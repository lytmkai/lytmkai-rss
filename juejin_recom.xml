<?xml version="1.0" encoding="UTF-8"?><rss version="2.0">  <channel>      <title>æ˜é‡‘æ–‡ç« æ¨è</title>      <link>https://juejin.cn/recommended?sort=newest</link>      <description>ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…æˆé•¿çš„ç¤¾åŒº</description>      <generator>python juejin_recom.py @Pi20</generator>      <item>    <title><![CDATA[å†™ CSS ç”¨ pxï¼Ÿè¿™ 3 ä¸ªå•ä½èƒ½è®©é¡µé¢è‡ªåŠ¨é€‚é…å±å¹•]]></title>    <link>https://juejin.cn/post/7593292445300899859</link>    <guid>https://juejin.cn/post/7593292445300899859</guid>    <pubDate>2026-01-11T05:27:42.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7593292445300899859" data-draft-id="7583913535270797322" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å†™ CSS ç”¨ pxï¼Ÿè¿™ 3 ä¸ªå•ä½èƒ½è®©é¡µé¢è‡ªåŠ¨é€‚é…å±å¹•"/> <meta itemprop="keywords" content="å‰ç«¯,CSS"/> <meta itemprop="datePublished" content="2026-01-11T05:27:42.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºå‘˜å¤§å"/> <meta itemprop="url" content="https://juejin.cn/user/3507878440995946"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å†™ CSS ç”¨ pxï¼Ÿè¿™ 3 ä¸ªå•ä½èƒ½è®©é¡µé¢è‡ªåŠ¨é€‚é…å±å¹•
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3507878440995946/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºå‘˜å¤§å
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-11T05:27:42.000Z" title="Sun Jan 11 2026 05:27:42 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ç½‘é¡µå¼€å‘ä¸­ï¼ŒCSS å•ä½æ˜¯æ§åˆ¶å…ƒç´ å°ºå¯¸ã€é—´è·å’Œæ’ç‰ˆçš„åŸºç¡€ã€‚</p>
<p>é•¿æœŸä»¥æ¥ï¼Œ<code>px</code>ï¼ˆåƒç´ ï¼‰å› å…¶ç›´è§‚ã€ç²¾ç¡®è€Œè¢«å¹¿æ³›ä½¿ç”¨ã€‚</p>
<p>ç„¶è€Œï¼Œéšç€è®¾å¤‡å±å¹•å°ºå¯¸å’Œç”¨æˆ·éœ€æ±‚çš„å¤šæ ·åŒ–ï¼Œå•çº¯ä¾èµ– <code>px</code> å·²éš¾ä»¥æ»¡è¶³ç°ä»£ Web å¯¹<strong>å¯è®¿é—®æ€§</strong>ã€<strong>çµæ´»æ€§</strong>å’Œ<strong>å“åº”å¼èƒ½åŠ›</strong>çš„è¦æ±‚ã€‚</p>
<h2 data-id="heading-0">ä»€ä¹ˆæ˜¯ pxï¼Ÿ</h2>
<p><code>px</code> æ˜¯ CSS ä¸­çš„ç»å¯¹é•¿åº¦å•ä½ï¼Œä»£è¡¨åƒç´ ï¼ˆpixelï¼‰ã€‚</p>
<p>åœ¨æ ‡å‡†å¯†åº¦å±å¹•ä¸Šï¼Œ1px é€šå¸¸å¯¹åº”ä¸€ä¸ªç‰©ç†åƒç´ ç‚¹ã€‚</p>
<p>å¼€å‘è€…ä½¿ç”¨ <code>px</code> å¯ä»¥ç²¾ç¡®æ§åˆ¶å…ƒç´ çš„å¤§å°ï¼Œä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.container</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">320px</span>;
  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">16px</span>;
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">12px</span>;
}
</code></pre>
<p>è¿™ç§å†™æ³•ç®€å•ç›´æ¥ï¼Œåœ¨å›ºå®šå°ºå¯¸çš„è®¾è®¡ç¨¿è¿˜åŸä¸­éå¸¸é«˜æ•ˆã€‚ä½†é—®é¢˜ä¹Ÿæ­£æºäºå®ƒçš„ç»å¯¹æ€§ã€‚</p>
<h2 data-id="heading-1">px å­˜åœ¨å“ªäº›é—®é¢˜ï¼Ÿ</h2>
<h3 data-id="heading-2">1. ç¼ºä¹å“åº”èƒ½åŠ›</h3>
<p><code>px</code> çš„å€¼æ˜¯å›ºå®šçš„ï¼Œä¸ä¼šéšå±å¹•å®½åº¦ã€å®¹å™¨å¤§å°æˆ–ç”¨æˆ·è®¾ç½®è€Œå˜åŒ–ã€‚</p>
<p>åœ¨ä¸€ä¸ª 320px å®½çš„æ‰‹æœºä¸Šæ˜¾ç¤ºè‰¯å¥½çš„æŒ‰é’®ï¼Œåœ¨ 4K æ˜¾ç¤ºå™¨ä¸Šå¯èƒ½æ˜¾å¾—å¾®ä¸è¶³é“ï¼Œåä¹‹äº¦ç„¶ã€‚</p>
<h3 data-id="heading-3">2. ä¸åˆ©äºå¯è®¿é—®æ€§</h3>
<p>è®¸å¤šç”¨æˆ·ï¼ˆå°¤å…¶æ˜¯è§†åŠ›éšœç¢è€…ï¼‰ä¼šè°ƒæ•´æµè§ˆå™¨çš„é»˜è®¤å­—ä½“å¤§å°ã€‚</p>
<p>ä½†ä½¿ç”¨ <code>px</code> å®šä¹‰çš„å­—ä½“ä¸ä¼šéšä¹‹ç¼©æ”¾ï¼Œå¯¼è‡´å†…å®¹éš¾ä»¥é˜…è¯»ã€‚</p>
<p>ç›¸æ¯”ä¹‹ä¸‹ï¼Œä½¿ç”¨ç›¸å¯¹å•ä½ï¼ˆå¦‚ <code>rem</code>ï¼‰èƒ½å°Šé‡ç”¨æˆ·çš„åå¥½è®¾ç½®ã€‚</p>
<hr/>
<h2 data-id="heading-4">æ›´å¥½çš„é€‰æ‹©</h2>
<p>ä¸ºè§£å†³ä¸Šè¿°é—®é¢˜ï¼ŒCSS æä¾›äº†ä¸€ç³»åˆ—æ›´æ™ºèƒ½ã€æ›´çµæ´»çš„å•ä½å’ŒåŠŸèƒ½ã€‚ä»¥ä¸‹æ˜¯å‡ ç§æ ¸å¿ƒæ–¹æ¡ˆï¼š</p>
<h3 data-id="heading-5">1. ç›¸å¯¹å•ä½ï¼šrem ä¸ em</h3>
<ul>
<li><strong><code>rem</code></strong>ï¼ˆroot emï¼‰ï¼šç›¸å¯¹äºæ ¹å…ƒç´ ï¼ˆ<code>&lt;html&gt;</code>ï¼‰çš„å­—ä½“å¤§å°ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œ1rem = 16pxï¼Œä½†å¯é€šè¿‡è®¾ç½® <code>html { font-size: 18px }</code> æ”¹å˜åŸºå‡†ã€‚</li>
<li><strong><code>em</code></strong>ï¼šç›¸å¯¹äºå½“å‰å…ƒç´ æˆ–å…¶çˆ¶å…ƒç´ çš„å­—ä½“å¤§å°ï¼Œå¸¸ç”¨äºå±€éƒ¨ç¼©æ”¾ã€‚</li>
</ul>
<p>ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-tag">html</span> {
  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">16px</span>; <span class="hljs-comment">/* åŸºå‡† */</span>
}

<span class="hljs-selector-class">.title</span> {
  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">1.5rem</span>; <span class="hljs-comment">/* 24px */</span>
  <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">1em</span>; <span class="hljs-comment">/* ç›¸å¯¹äºè‡ªèº«å­—ä½“å¤§å° */</span>
}
</code></pre>
<p>ä¼˜åŠ¿ï¼šæ”¯æŒç”¨æˆ·è‡ªå®šä¹‰ç¼©æ”¾ï¼Œä¾¿äºæ„å»ºæ¯”ä¾‹ä¸€è‡´çš„æ’ç‰ˆç³»ç»Ÿã€‚</p>
<h3 data-id="heading-6">2. è§†å£å•ä½ï¼švwã€vhã€vminã€vmax</h3>
<p>è¿™äº›å•ä½åŸºäºæµè§ˆå™¨è§†å£å°ºå¯¸ï¼š</p>
<ul>
<li><code>1vw</code> = è§†å£å®½åº¦çš„ 1%</li>
<li><code>1vh</code> = è§†å£é«˜åº¦çš„ 1%</li>
<li><code>vmin</code> å–å®½é«˜ä¸­è¾ƒå°è€…ï¼Œ<code>vmax</code> å–è¾ƒå¤§è€…</li>
</ul>
<p>ç”¨é€”ï¼šé€‚åˆå…¨å±å¸ƒå±€ã€åŠ¨æ€é«˜åº¦æ ‡é¢˜ç­‰åœºæ™¯ã€‚</p>
<p>ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.hero</span> {
  <span class="hljs-attribute">height</span>: <span class="hljs-number">80vh</span>; <span class="hljs-comment">/* å è§†å£é«˜åº¦çš„ 80% */</span>
  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">5vw</span>; <span class="hljs-comment">/* å­—ä½“éšå±å¹•å®½åº¦ç¼©æ”¾ */</span>
}
</code></pre>
<p>æ³¨æ„ï¼šåœ¨ç§»åŠ¨ç«¯ï¼Œ<code>vh</code> å¯èƒ½å—æµè§ˆå™¨åœ°å€æ å½±å“ï¼Œéœ€è°¨æ…ä½¿ç”¨ã€‚</p>
<h3 data-id="heading-7">3. clamp() å‡½æ•°ï¼šå®ç°æµä½“å“åº”</h3>
<p><code>clamp()</code> æ˜¯ CSS çš„ä¸€ä¸ªé‡è¦è¿›æ­¥ï¼Œå…è®¸ä½ åœ¨ä¸€ä¸ªå±æ€§ä¸­åŒæ—¶æŒ‡å®šæœ€å°å€¼ã€ç†æƒ³å€¼å’Œæœ€å¤§å€¼ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-attribute">font-size</span>: <span class="hljs-built_in">clamp</span>(<span class="hljs-number">16px</span>, <span class="hljs-number">4vw</span>, <span class="hljs-number">32px</span>);
</code></pre>
<p>å«ä¹‰ï¼š</p>
<ul>
<li>åœ¨å°å±å¹•ä¸Šï¼Œå­—ä½“ä¸å°äº 16pxï¼›</li>
<li>åœ¨ä¸­ç­‰å±å¹•ï¼ŒæŒ‰ 4vw åŠ¨æ€è®¡ç®—ï¼›</li>
<li>åœ¨å¤§å±å¹•ä¸Šï¼Œä¸è¶…è¿‡ 32pxã€‚</li>
</ul>
<p>è¿™è¡Œä»£ç å³å¯æ›¿ä»£å¤šä¸ª <code>@media</code> æŸ¥è¯¢ï¼Œå®ç°å¹³æ»‘ã€è¿ç»­çš„å“åº”æ•ˆæœã€‚</p>
<p>æ›´æ¨èç»“åˆç›¸å¯¹å•ä½ä½¿ç”¨ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-attribute">font-size</span>: <span class="hljs-built_in">clamp</span>(<span class="hljs-number">1rem</span>, <span class="hljs-number">2.5vw</span>, <span class="hljs-number">2rem</span>);
</code></pre>
<p>è¿™æ ·æ—¢ä¿ç•™äº†å¯è®¿é—®æ€§ï¼Œåˆå…·å¤‡å“åº”èƒ½åŠ›ã€‚</p>
<h3 data-id="heading-8">4. å®¹å™¨æŸ¥è¯¢ï¼ˆContainer Queriesï¼‰</h3>
<p>è¿‡å»ï¼Œå“åº”å¼å¸ƒå±€åªèƒ½åŸºäºæ•´ä¸ªè§†å£ï¼ˆé€šè¿‡ <code>@media</code>ï¼‰ã€‚</p>
<p>ä½†ç»„ä»¶å¸¸å¸¸éœ€è¦æ ¹æ®<strong>è‡ªèº«å®¹å™¨</strong>çš„å¤§å°æ¥è°ƒæ•´æ ·å¼â€”â€”è¿™å°±æ˜¯å®¹å™¨æŸ¥è¯¢è¦è§£å†³çš„é—®é¢˜ã€‚</p>
<p>ä½¿ç”¨æ­¥éª¤ï¼š</p>
<ol>
<li>ä¸ºå®¹å™¨å£°æ˜ <code>container-type</code>ï¼š</li>
</ol>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.card-wrapper</span> {
  container-type: inline-size; <span class="hljs-comment">/* åŸºäºå†…è”è½´ï¼ˆé€šå¸¸æ˜¯å®½åº¦ï¼‰ */</span>
}
</code></pre>
<ol start="2">
<li>ä½¿ç”¨ <code>@container</code> ç¼–å†™æŸ¥è¯¢è§„åˆ™ï¼š</li>
</ol>
<pre><code class="hljs language-css" lang="css"><span class="hljs-keyword">@container</span> (<span class="hljs-attribute">min-width</span>: <span class="hljs-number">300px</span>) {
  <span class="hljs-selector-class">.card-title</span> {
    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">1.25rem</span>;
  }
}

<span class="hljs-keyword">@container</span> (<span class="hljs-attribute">min-width</span>: <span class="hljs-number">500px</span>) {
  <span class="hljs-selector-class">.card-title</span> {
    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">1.75rem</span>;
  }
}
</code></pre>
<p>ç°åœ¨ï¼Œåªè¦ <code>.card-wrapper</code> çš„å®½åº¦å˜åŒ–ï¼Œå†…éƒ¨å…ƒç´ å°±èƒ½è‡ªåŠ¨å“åº”ï¼Œæ— éœ€å…³å¿ƒé¡µé¢æ•´ä½“å¸ƒå±€ã€‚è¿™å¯¹æ„å»ºå¯å¤ç”¨çš„ UI ç»„ä»¶åº“è‡³å…³é‡è¦ã€‚</p>
<p>å®¹å™¨æŸ¥è¯¢å·²åœ¨ä¸»æµæµè§ˆå™¨ï¼ˆChrome 105+ã€Firefox 116+ã€Safari 16+ï¼‰ä¸­å¾—åˆ°æ”¯æŒã€‚</p>
<hr/>
<h2 data-id="heading-9">å»ºè®®</h2>
<ul>
<li><strong>é¿å…åœ¨å­—ä½“å¤§å°ã€å®¹å™¨å®½åº¦ã€å†…è¾¹è·ç­‰å…³é”®å¸ƒå±€å±æ€§ä¸­ä½¿ç”¨çº¯ <code>px</code></strong>ã€‚</li>
<li>ä¼˜å…ˆä½¿ç”¨ <code>rem</code> ä½œä¸ºå…¨å±€å°ºå¯¸åŸºå‡†ï¼Œ<code>em</code> ç”¨äºå±€éƒ¨æ¯”ä¾‹ã€‚</li>
<li>å¯¹éœ€è¦éšå±å¹•ç¼©æ”¾çš„å…ƒç´ ï¼Œä½¿ç”¨ <code>clamp()</code> + <code>vw</code>/<code>rem</code> ç»„åˆã€‚</li>
<li>æ„å»ºç»„ä»¶æ—¶ï¼Œè€ƒè™‘å¯ç”¨å®¹å™¨æŸ¥è¯¢ï¼Œä½¿å…¶çœŸæ­£â€œè‡ªé€‚åº”â€ã€‚</li>
<li>ä¿ç•™ <code>px</code> ä»…ç”¨äº<strong>ä¸éœ€è¦ç¼©æ”¾çš„åœºæ™¯</strong>ï¼Œå¦‚è¾¹æ¡†ï¼ˆ<code>border: 1px solid</code>ï¼‰ã€å›ºå®šå›¾æ ‡å°ºå¯¸ç­‰ã€‚</li>
</ul>
<blockquote>
<p>æœ¬æ–‡é¦–å‘äºå…¬ä¼—å·ï¼šç¨‹åºå‘˜å¤§åï¼Œä¸“æ³¨åˆ†äº«å‰åç«¯å¼€å‘çš„å®æˆ˜ç¬”è®°ã€‚å…³æ³¨æˆ‘ï¼Œå°‘èµ°å¼¯è·¯ï¼Œä¸€èµ·è¿›æ­¥ï¼</p>
</blockquote>
<h4 data-id="heading-10">ğŸ“Œå¾€æœŸå†…å®¹</h4>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FUqzEppE_f8gdil6S-toBTg" target="_blank" title="https://mp.weixin.qq.com/s/UqzEppE_f8gdil6S-toBTg" ref="nofollow noopener noreferrer">å†™å‰ç«¯ä¹…äº†ï¼Œæˆ‘ç”¨ Node.js ç»™è‡ªå·±é€ äº†å‡ ä¸ªçœåŠ›å°å·¥å…·</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FF4JkmYxUs9RAtsti6V1uhg" target="_blank" title="https://mp.weixin.qq.com/s/F4JkmYxUs9RAtsti6V1uhg" ref="nofollow noopener noreferrer">æˆ‘ä¹Ÿæ˜¯å†™äº†å¾ˆä¹… TypeScriptï¼Œæ‰æ„è¯†åˆ°è¿™äº›å†™æ³•ä¸å¯¹</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2F2wHCiqgtRfK_008fLBamPQ" target="_blank" title="https://mp.weixin.qq.com/s/2wHCiqgtRfK_008fLBamPQ" ref="nofollow noopener noreferrer">ThreadLocal åœ¨å®é™…é¡¹ç›®ä¸­çš„ 6 å¤§ç”¨æ³•ï¼ŒåŸæ¥å¯ä»¥è¿™ä¹ˆç®€å•</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FsMAKhSLNvmU1ddxg0yv9Fg" target="_blank" title="https://mp.weixin.qq.com/s/sMAKhSLNvmU1ddxg0yv9Fg" ref="nofollow noopener noreferrer">é‡æ„äº†20ä¸ªSpringBooté¡¹ç›®åï¼Œæ€»ç»“å‡ºè¿™å¥—ç¨³å®šé«˜æ•ˆçš„æ¶æ„è®¾è®¡</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æœºå™¨å­¦ä¹ ä¸­çš„æ•°æ®é¢„å¤„ç†æ–¹æ³•å¤§å…¨ï¼]]></title>    <link>https://juejin.cn/post/7593607642552942618</link>    <guid>https://juejin.cn/post/7593607642552942618</guid>    <pubDate>2026-01-11T05:28:46.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7593607642552942618" data-draft-id="7593607642552909850" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æœºå™¨å­¦ä¹ ä¸­çš„æ•°æ®é¢„å¤„ç†æ–¹æ³•å¤§å…¨ï¼"/> <meta itemprop="keywords" content="ç®—æ³•,é¢è¯•"/> <meta itemprop="datePublished" content="2026-01-11T05:28:46.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="aicoting"/> <meta itemprop="url" content="https://juejin.cn/user/933911964427818"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æœºå™¨å­¦ä¹ ä¸­çš„æ•°æ®é¢„å¤„ç†æ–¹æ³•å¤§å…¨ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/933911964427818/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    aicoting
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-11T05:28:46.000Z" title="Sun Jan 11 2026 05:28:46 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æ¨èç›´æ¥ç½‘ç«™åœ¨çº¿é˜…è¯»ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Flink.zhihu.com%2F%3Ftarget%3Dhttps%253A%2F%2Faicoting.cn%2F" target="_blank" title="https://link.zhihu.com/?target=https%3A//aicoting.cn/" ref="nofollow noopener noreferrer">aicoting AIç®—æ³•é¢è¯•å­¦ä¹ åœ¨çº¿ç½‘ç«™</a></p>
</blockquote>
<p>æ•°æ®é¢„å¤„ç†æ˜¯æœºå™¨å­¦ä¹ å’Œæ•°æ®åˆ†ææµç¨‹ä¸­çš„åŸºç¡€æ­¥éª¤ï¼Œå…¶ç›®æ ‡æ˜¯å°†åŸå§‹æ•°æ®è½¬åŒ–ä¸ºå¹²å‡€ã€è§„èŒƒä¸”é€‚åˆæ¨¡å‹å¤„ç†çš„å½¢å¼ï¼Œä»è€Œæå‡æ¨¡å‹çš„è®­ç»ƒæ•ˆç‡ä¸é¢„æµ‹æ€§èƒ½ã€‚é€šå¸¸ï¼ŒåŸå§‹æ•°æ®ä¼šå­˜åœ¨å™ªå£°ã€ç¼ºå¤±å€¼ã€ä¸ä¸€è‡´æ ¼å¼æˆ–å°ºåº¦å·®å¼‚ï¼Œè¿™äº›é—®é¢˜è‹¥ä¸åŠ å¤„ç†ï¼Œå¾€å¾€ä¼šå¯¼è‡´æ¨¡å‹åå·®æˆ–æ€§èƒ½ä¸‹é™ã€‚</p>
<p>æ•°æ®é¢„å¤„ç†çš„ä¸»è¦ç¯èŠ‚åŒ…æ‹¬ï¼š</p>
<ol>
<li>æ•°æ®æ¸…æ´—ï¼šå¤„ç†ç¼ºå¤±å€¼ï¼ˆåˆ é™¤ã€å‡å€¼å¡«å……ã€æ’å€¼ç­‰ï¼‰ã€æ£€æµ‹å¹¶ä¿®æ­£å¼‚å¸¸å€¼ã€å»é™¤é‡å¤æ ·æœ¬ï¼Œç¡®ä¿æ•°æ®è´¨é‡ã€‚</li>
<li>æ•°æ®é›†æˆï¼šå°†æ¥è‡ªä¸åŒæ¥æºçš„æ•°æ®è¿›è¡Œåˆå¹¶ï¼Œè§£å†³å†—ä½™ä¸å†²çªé—®é¢˜ï¼Œå½¢æˆç»Ÿä¸€çš„åˆ†æå¯¹è±¡ã€‚</li>
<li>æ•°æ®å˜æ¢ï¼šé€šè¿‡å½’ä¸€åŒ–ã€æ ‡å‡†åŒ–ã€åˆ†ç®±ã€å¯¹æ•°å˜æ¢æˆ–ç¼–ç ç­‰æ–¹æ³•ï¼Œä½¿æ•°æ®æ»¡è¶³æ¨¡å‹å¯¹åˆ†å¸ƒä¸å°ºåº¦çš„è¦æ±‚ã€‚</li>
<li>æ•°æ®è§„çº¦ï¼šé‡‡ç”¨ç‰¹å¾é€‰æ‹©ã€ç‰¹å¾æå–æˆ–é™ç»´æ–¹æ³•å‡å°‘å†—ä½™ï¼Œé™ä½è®¡ç®—å¤æ‚åº¦ï¼Œæé«˜æ¨¡å‹æ³›åŒ–èƒ½åŠ›ã€‚ è‰¯å¥½çš„æ•°æ®é¢„å¤„ç†ä¸ä»…èƒ½å¤Ÿæ”¹å–„æ•°æ®è´¨é‡ï¼Œè¿˜èƒ½çªå‡ºæ½œåœ¨çš„æ¨¡å¼ä¸ç»“æ„ï¼Œä¸ºåç»­çš„ç‰¹å¾å·¥ç¨‹å’Œå»ºæ¨¡å¥ å®šåšå®åŸºç¡€ã€‚ ç¼ºå¤±å€¼å¤„ç† ä¸ºä»€ä¹ˆè¦å¤„ç†ç¼ºå¤±å€¼ åœ¨å®é™…çš„æœºå™¨å­¦ä¹ ä»»åŠ¡ä¸­ï¼Œæ•°æ®é›†å¾€å¾€å¹¶ä¸å®Œæ•´ï¼šæŸäº›æ ·æœ¬çš„ç‰¹å¾ç¼ºå¤±ï¼Œæˆ–æŸäº›ä¼ æ„Ÿå™¨åœ¨é‡‡é›†æ—¶å¤±è´¥ã€‚è¿™ç§æƒ…å†µä¼šå¯¼è‡´ï¼š</li>
</ol>
<ul>
<li>æ¨¡å‹æ— æ³•è®­ç»ƒï¼šå¤§å¤šæ•°ç®—æ³•æ— æ³•ç›´æ¥å¤„ç†ç¼ºå¤±å€¼ã€‚</li>
<li>ä¿¡æ¯ä¸¢å¤±ï¼šç¼ºå¤±æ¯”ä¾‹è¿‡å¤§æ—¶ï¼Œæ•°æ®ä»£è¡¨æ€§ä¸‹é™ã€‚</li>
<li>ç»“æœåå·®ï¼šè‹¥ç¼ºå¤±ä¸æ˜¯éšæœºçš„ï¼Œå¯èƒ½å¼•å…¥ç³»ç»Ÿæ€§åå·®ã€‚ å› æ­¤ï¼Œåˆç†çš„ç¼ºå¤±å€¼å¤„ç†æ˜¯æ•°æ®é¢„å¤„ç†çš„é‡è¦ç¯èŠ‚ã€‚</li>
</ul>
<h2 data-id="heading-0">ç¼ºå¤±å€¼çš„ç±»å‹</h2>
<p>åœ¨ç»Ÿè®¡å­¦ä¸­ï¼Œç¼ºå¤±å€¼å¯åˆ†ä¸ºä¸‰ç±»ï¼š</p>
<ol>
<li>MCARï¼ˆMissing Completely at Randomï¼‰ï¼šå®Œå…¨éšæœºç¼ºå¤±ï¼Œä¸ç‰¹å¾å’Œæ ‡ç­¾æ— å…³ã€‚</li>
<li>MARï¼ˆMissing at Randomï¼‰ï¼šä¸å·²è§‚æµ‹åˆ°çš„ç‰¹å¾ç›¸å…³ï¼Œä½†ä¸ç¼ºå¤±æœ¬èº«æ— å…³ã€‚</li>
<li>MNARï¼ˆMissing Not at Randomï¼‰ï¼šä¸ç¼ºå¤±å€¼æœ¬èº«ç›¸å…³ï¼Œä¾‹å¦‚é«˜æ”¶å…¥äººç¾¤æ›´ä¸æ„¿æ„å¡«å†™æ”¶å…¥è°ƒæŸ¥ã€‚ ä¸åŒç±»å‹ç¼ºå¤±å¯¹å¤„ç†æ–¹æ³•çš„é€‰æ‹©æœ‰å½±å“ã€‚</li>
</ol>
<h3 data-id="heading-1">ç¼ºå¤±å€¼æ£€æµ‹</h3>
<p>ä»¥ä¸‹çš„ä»£ç åœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Faicoting%2FMLHub%25E4%25B8%25AD%25E3%2580%2582" target="_blank" title="https://github.com/aicoting/MLHub%E4%B8%AD%E3%80%82" ref="nofollow noopener noreferrer">github.com/aicoting/MLâ€¦</a> åœ¨ Python ä¸­å¯ä»¥ç”¨ Pandas å¿«é€Ÿæ£€æµ‹ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np

<span class="hljs-comment"># æ„é€ ç¤ºä¾‹æ•°æ®</span>
data = {
    <span class="hljs-string">"Age"</span>: [<span class="hljs-number">25</span>, <span class="hljs-number">30</span>, np.nan, <span class="hljs-number">40</span>, <span class="hljs-number">35</span>],
    <span class="hljs-string">"Salary"</span>: [<span class="hljs-number">5000</span>, np.nan, <span class="hljs-number">7000</span>, <span class="hljs-number">8000</span>, <span class="hljs-number">7500</span>],
    <span class="hljs-string">"Department"</span>: [<span class="hljs-string">"IT"</span>, <span class="hljs-string">"HR"</span>, <span class="hljs-string">"Finance"</span>, <span class="hljs-literal">None</span>, <span class="hljs-string">"IT"</span>]
}
df = pd.DataFrame(data)

<span class="hljs-comment"># æ£€æŸ¥ç¼ºå¤±æƒ…å†µ</span>
<span class="hljs-built_in">print</span>(df.isnull())
<span class="hljs-built_in">print</span>(df.isnull().<span class="hljs-built_in">sum</span>())
</code></pre>
<p>è¾“å‡ºå¦‚ä¸‹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/784825ed77e348c89e8fb5a90685e984~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYWljb3Rpbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768714125&amp;x-signature=GfSvumm7IggZlRdgiSXX2cIgMZE%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-2">ç¼ºå¤±å€¼å¤„ç†æ–¹æ³•</h3>
<p>åˆ é™¤æ³•</p>
<p>é€‚åˆç¼ºå¤±å€¼æå°‘çš„æƒ…å†µã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># åˆ é™¤å«æœ‰ç¼ºå¤±å€¼çš„è¡Œ</span>
df_drop_row = df.dropna()

<span class="hljs-comment"># åˆ é™¤å«æœ‰ç¼ºå¤±å€¼çš„åˆ—</span>
df_drop_col = df.dropna(axis=<span class="hljs-number">1</span>)
<span class="hljs-comment"># æ£€æŸ¥ç¼ºå¤±æƒ…å†µ</span>
<span class="hljs-built_in">print</span>(df_drop_row)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"--------------------"</span>)
<span class="hljs-built_in">print</span>(df_drop_col)
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1d0250c479f24da58cd8d71f65a3ba70~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYWljb3Rpbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768714125&amp;x-signature=%2BaVh8daJqi%2FB6PEDw9Gm5RwW16o%3D" alt="" loading="lazy"/></p>
<p>è¿™ç§æ–¹æ³•çš„ç¼ºç‚¹æ˜¯å¯èƒ½ä¸¢å¤±æœ‰ç”¨ä¿¡æ¯ï¼Œä¸é€‚åˆç¼ºå¤±æ¯”ä¾‹è¾ƒé«˜çš„æ•°æ®ã€‚</p>
<p>ç®€å•å¡«å……æ³•</p>
<p>å‡å€¼/ä¸­ä½æ•°/ä¼—æ•°å¡«å……ï¼ˆæ•°å€¼å‹ï¼‰</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># ç”¨å‡å€¼å¡«å…… Age</span>
df[<span class="hljs-string">'Age'</span>].fillna(df[<span class="hljs-string">'Age'</span>].mean(), inplace=<span class="hljs-literal">True</span>)

<span class="hljs-comment"># ç”¨ä¸­ä½æ•°å¡«å…… Salary</span>
df[<span class="hljs-string">'Salary'</span>].fillna(df[<span class="hljs-string">'Salary'</span>].median(), inplace=<span class="hljs-literal">True</span>)
</code></pre>
<p>ä¼—æ•°å¡«å……ï¼ˆç±»åˆ«å‹ï¼‰</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># ç”¨ä¼—æ•°å¡«å…… Department</span>
df[<span class="hljs-string">'Department'</span>].fillna(df[<span class="hljs-string">'Department'</span>].mode()[<span class="hljs-number">0</span>], inplace=<span class="hljs-literal">True</span>)
<span class="hljs-built_in">print</span>(df)
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9ec02dd5f40a44668410416b6c3c959f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYWljb3Rpbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768714125&amp;x-signature=EQ4RPHFYAQXePdXmuemzT1Gs0%2FA%3D" alt="" loading="lazy"/></p>
<p>å‰å‘/åå‘å¡«å……æ³•</p>
<p>å‰å‘å¡«å……ï¼ˆffillï¼‰ï¼šç”¨å‰ä¸€ä¸ªéç¼ºå¤±å€¼å¡«å……å½“å‰ç¼ºå¤±å€¼ã€‚ åå‘å¡«å……ï¼ˆbfillï¼‰ï¼šç”¨åä¸€ä¸ªéç¼ºå¤±å€¼å¡«å……å½“å‰ç¼ºå¤±å€¼ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># å‰å‘å¡«å……</span>
df_ffill = df.fillna(method=<span class="hljs-string">'ffill'</span>)

<span class="hljs-comment"># åå‘å¡«å……</span>
df_bfill = df.fillna(method=<span class="hljs-string">'bfill'</span>)

<span class="hljs-built_in">print</span>(df)
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/02290cf798d749469961147fca29338e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYWljb3Rpbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768714125&amp;x-signature=kfin95cx9bm4RjdywHadARdDgnY%3D" alt="" loading="lazy"/></p>
<p>æ’å€¼æ³•ï¼ˆé€‚åˆæ—¶é—´åºåˆ—æˆ–æ•°å€¼å‹å˜é‡ï¼‰</p>
<p>çº¿æ€§æ’å€¼ï¼ˆlinearï¼‰ï¼šåœ¨ç¼ºå¤±å€¼ç‚¹é™„è¿‘ç»˜åˆ¶ä¸€æ¡ç›´çº¿ï¼Œæ ¹æ®ç›´çº¿ä¸Šçš„ç‚¹ä¼°è®¡ç¼ºå¤±å€¼ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># çº¿æ€§æ’å€¼</span>
df_interp = df.interpolate(method=<span class="hljs-string">'linear'</span>)

<span class="hljs-built_in">print</span>(df_interp)
</code></pre>
<p>åŸºäºæ¨¡å‹çš„æ’è¡¥</p>
<p>åˆ©ç”¨æœºå™¨å­¦ä¹ æ¨¡å‹é¢„æµ‹ç¼ºå¤±å€¼ï¼ˆé€‚åˆå¤æ‚ç¼ºå¤±æ¨¡å¼ï¼‰ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> sklearn.impute <span class="hljs-keyword">import</span> KNNImputer

imputer = KNNImputer(n_neighbors=<span class="hljs-number">2</span>)
df_knn = pd.DataFrame(imputer.fit_transform(df.select_dtypes(include=[np.number])),
                      columns=df.select_dtypes(include=[np.number]).columns)
</code></pre>
<p>è¯´æ˜ï¼šKNN æ’è¡¥ä¼šå¯»æ‰¾ç›¸ä¼¼æ ·æœ¬è¿›è¡Œå¡«è¡¥ï¼Œé€‚åˆç‰¹å¾ä¹‹é—´å­˜åœ¨ç›¸å…³æ€§çš„æƒ…å†µã€‚</p>
<p>å¤šé‡æ’è¡¥ï¼ˆMICE, Multiple Imputation by Chained Equationsï¼‰</p>
<p>MICE ä¼šåå¤è¿­ä»£å»ºæ¨¡ä¸å¡«è¡¥ï¼Œå¾—åˆ°å¤šä¸ªåˆç†çš„æ’è¡¥å€¼ï¼Œæœ€åå–å¹³å‡ç»“æœã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> sklearn.experimental <span class="hljs-keyword">import</span> enable_iterative_imputer
<span class="hljs-keyword">from</span> sklearn.impute <span class="hljs-keyword">import</span> IterativeImputer

imputer = IterativeImputer()
df_mice = pd.DataFrame(imputer.fit_transform(df.select_dtypes(include=[np.number])),
                       columns=df.select_dtypes(include=[np.number]).columns)
</code></pre>
<p>è¯´æ˜ï¼šMICE åŸºäºå¤šä¸ªæ¨¡å‹è¿­ä»£ä¼°è®¡ç¼ºå¤±å€¼ï¼Œé€‚åˆå¤æ‚ç¼ºå¤±æ¨¡å¼ã€‚</p>
<h2 data-id="heading-3">å¼‚å¸¸å€¼æ£€æµ‹</h2>
<h3 data-id="heading-4">ä»€ä¹ˆæ˜¯å¼‚å¸¸å€¼ï¼Ÿ</h3>
<p>å¼‚å¸¸å€¼ï¼ˆOutlierï¼‰æ˜¯æŒ‡é‚£äº›ä¸å¤§éƒ¨åˆ†æ•°æ®â€œæ ¼æ ¼ä¸å…¥â€çš„æ ·æœ¬ï¼Œå®ƒä»¬åœ¨ç»Ÿè®¡æ„ä¹‰ä¸Šåç¦»äº†æ•´ä½“åˆ†å¸ƒã€‚</p>
<ul>
<li>åœ¨é”€å”®æ•°æ®ä¸­ï¼ŒæŸä¸€å¤©é”€é‡çªç„¶æ˜¯å¹³å‡å€¼çš„ 10 å€ï¼›</li>
<li>åœ¨ä¼ æ„Ÿå™¨æ•°æ®ä¸­ï¼ŒæŸä¸ªæ•°å€¼çªç„¶é£™å‡ï¼›</li>
<li>åœ¨é‡‘èäº¤æ˜“ä¸­ï¼ŒæŸäº›äº¤æ˜“é‡‘é¢å¼‚å¸¸å·¨å¤§ã€‚</li>
</ul>
<p>å¼‚å¸¸å€¼å¯èƒ½æ˜¯ é”™è¯¯æ•°æ®ï¼ˆå™ªå£°ï¼‰ï¼Œä¹Ÿå¯èƒ½æ˜¯ æ½œåœ¨çš„é‡è¦ä¿¡å·ï¼ˆæ¬ºè¯ˆã€è®¾å¤‡æ•…éšœï¼‰ã€‚å› æ­¤ï¼Œå¼‚å¸¸å€¼æ£€æµ‹æ—¢æ˜¯æ•°æ®æ¸…æ´—çš„é‡è¦æ­¥éª¤ï¼Œä¹Ÿå¸¸ç”¨äºå®é™…åº”ç”¨ï¼ˆå¦‚æ¬ºè¯ˆæ£€æµ‹ã€å…¥ä¾µæ£€æµ‹ï¼‰ã€‚</p>
<h3 data-id="heading-5">å¼‚å¸¸å€¼çš„ç±»å‹</h3>
<ol>
<li>ç‚¹å¼‚å¸¸ï¼ˆPoint Outliersï¼‰ï¼šå•ä¸ªæ ·æœ¬ä¸å…¶ä»–æ•°æ®å·®å¼‚æ˜¾è‘—ã€‚</li>
<li>ä¸Šä¸‹æ–‡å¼‚å¸¸ï¼ˆContextual Outliersï¼‰ï¼šåœ¨ç‰¹å®šä¸Šä¸‹æ–‡ä¸­å¼‚å¸¸ï¼Œä¾‹å¦‚å†¬å¤©çš„é«˜æ¸©ã€‚</li>
<li>é›†ä½“å¼‚å¸¸ï¼ˆCollective Outliersï¼‰ï¼šä¸€ç»„æ•°æ®ç‚¹ä½œä¸ºæ•´ä½“å¼‚å¸¸ï¼Œä¾‹å¦‚ç½‘ç»œæ”»å‡»æµé‡æ¨¡å¼ã€‚</li>
</ol>
<h3 data-id="heading-6">å¼‚å¸¸å€¼æ£€æµ‹çš„å¸¸è§æ–¹æ³•</h3>
<p>1.åŸºäºç»Ÿè®¡å­¦çš„æ–¹æ³•</p>
<p>1.1 Z-Score æ–¹æ³•</p>
<p>è‹¥æ ·æœ¬ xiä¸å‡å€¼ Î¼çš„åå·®è¶…è¿‡ kå€æ ‡å‡†å·® Ïƒï¼Œåˆ™è§†ä¸ºå¼‚å¸¸ï¼š zi=xiâˆ’Î¼Ïƒ</p>
<p>è‹¥ |zi|&gt;3ï¼Œé€šå¸¸è®¤ä¸ºæ˜¯å¼‚å¸¸ç‚¹ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
<span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd

<span class="hljs-comment"># æ„é€ æ•°æ®</span>
data = [<span class="hljs-number">10</span>, <span class="hljs-number">12</span>, <span class="hljs-number">11</span>, <span class="hljs-number">13</span>, <span class="hljs-number">12</span>, <span class="hljs-number">200</span>, <span class="hljs-number">11</span>, <span class="hljs-number">10</span>, <span class="hljs-number">12</span>]
df = pd.DataFrame(data, columns=[<span class="hljs-string">'Value'</span>])

<span class="hljs-comment"># Z-Score æ–¹æ³•</span>
mean, std = df[<span class="hljs-string">'Value'</span>].mean(), df[<span class="hljs-string">'Value'</span>].std()
df[<span class="hljs-string">'Z-Score'</span>] = (df[<span class="hljs-string">'Value'</span>] - mean) / std
outliers = df[np.<span class="hljs-built_in">abs</span>(df[<span class="hljs-string">'Z-Score'</span>]) &gt; <span class="hljs-number">2</span>]
<span class="hljs-built_in">print</span>(outliers)
</code></pre>
<p>è¾“å‡ºå¦‚ä¸‹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/61d6bd6f02764ff6b19e8ea1465694e5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYWljb3Rpbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768714125&amp;x-signature=OqlTJXMTAQtsEDe2sQZ5x1m3gBU%3D" alt="" loading="lazy"/></p>
<p>1.2 IQR æ–¹æ³•ï¼ˆå››åˆ†ä½è·æ³•ï¼‰</p>
<p>åŸºäºç®±å‹å›¾æ€æƒ³ï¼š IQR=Q3âˆ’Q1</p>
<p>è‹¥æ•°æ®ç‚¹ x&lt;Q1âˆ’1.5IQRæˆ– x&gt;Q3+1.5IQRï¼Œåˆ™åˆ¤å®šä¸ºå¼‚å¸¸ã€‚</p>
<pre><code class="hljs language-python" lang="python">Q1 = df[<span class="hljs-string">'Value'</span>].quantile(<span class="hljs-number">0.25</span>)
Q3 = df[<span class="hljs-string">'Value'</span>].quantile(<span class="hljs-number">0.75</span>)
IQR = Q3 - Q1

outliers_iqr = df[(df[<span class="hljs-string">'Value'</span>] &lt; Q1 - <span class="hljs-number">1.5</span>*IQR) | (df[<span class="hljs-string">'Value'</span>] &gt; Q3 + <span class="hljs-number">1.5</span>*IQR)]
<span class="hljs-built_in">print</span>(outliers_iqr)
</code></pre>
<p>è¾“å‡ºå¦‚ä¸‹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/47fa1b14e9b447c38bdf2bc19d38b005~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYWljb3Rpbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768714125&amp;x-signature=Q4j1YZ%2BDF90YwlA9uuTLqgGmaIQ%3D" alt="" loading="lazy"/></p>
<p>2.åŸºäºè·ç¦»çš„æ–¹æ³•</p>
<p>2.1 KNN å¼‚å¸¸æ£€æµ‹</p>
<p>è‹¥æŸç‚¹ä¸å…¶æœ€è¿‘é‚»çš„å¹³å‡è·ç¦»è¿œå¤§äºå¤§å¤šæ•°ç‚¹ï¼Œåˆ™ä¸ºå¼‚å¸¸ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> sklearn.neighbors <span class="hljs-keyword">import</span> NearestNeighbors

X = df[[<span class="hljs-string">'Value'</span>]].values
nbrs = NearestNeighbors(n_neighbors=<span class="hljs-number">2</span>).fit(X)
distances, indices = nbrs.kneighbors(X)
df[<span class="hljs-string">'KNN_Dist'</span>] = distances[:, <span class="hljs-number">1</span>]
<span class="hljs-built_in">print</span>(df.sort_values(by=<span class="hljs-string">'KNN_Dist'</span>, ascending=<span class="hljs-literal">False</span>))
</code></pre>
<p>è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/aa7ef39ff3fe44a08d4f8153a0a32287~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYWljb3Rpbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768714125&amp;x-signature=H%2BBm%2FBuky3Ol18fen%2F81Cyw8t70%3D" alt="" loading="lazy"/></p>
<p>3.åŸºäºå¯†åº¦çš„æ–¹æ³•</p>
<p>3.1 LOFï¼ˆLocal Outlier Factorï¼Œæœ¬åœ°å¼‚å¸¸å› å­ï¼‰</p>
<p>LOF è¡¡é‡ä¸€ä¸ªç‚¹çš„å±€éƒ¨å¯†åº¦ä¸é‚»å±…çš„å±€éƒ¨å¯†åº¦ä¹‹æ¯”ï¼š</p>
<p>LOF(p)=âˆ‘oâˆˆNk(p)lrd(o)lrd(p)|Nk(p)|</p>
<p>å…¶ä¸­ lrd(p)æ˜¯ç‚¹ pçš„å±€éƒ¨å¯è¾¾å¯†åº¦ã€‚è‹¥ LOF(p)&gt;1ï¼Œåˆ™ pæ›´å¯èƒ½æ˜¯å¼‚å¸¸ç‚¹ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> sklearn.neighbors <span class="hljs-keyword">import</span> LocalOutlierFactor

lof = LocalOutlierFactor(n_neighbors=<span class="hljs-number">2</span>)
y_pred = lof.fit_predict(X)
df[<span class="hljs-string">'LOF'</span>] = y_pred
<span class="hljs-built_in">print</span>(df)
</code></pre>
<p>è¾“å‡ºç»“æœå¦‚ä¸‹ï¼Œè¾“å‡ºä¸­ -1 è¡¨ç¤ºå¼‚å¸¸å€¼ï¼Œå¯ä»¥çœ‹åˆ°å…¶ä»–ä¸€äº›å€¼ï¼ˆå¦‚ 11 å’Œ 13ï¼‰ä¹Ÿè¢«æ ‡è®°ä¸º -1ï¼Œè¿™æ˜¯å› ä¸º n_neighbors=2 å¯¹å°æ•°æ®é›†å¤ªå°ï¼Œå¯¼è‡´å±€éƒ¨å¯†åº¦è®¡ç®—ä¸ç¨³å®šã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e9fbbe960bf247fb8757743521cf7692~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYWljb3Rpbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768714125&amp;x-signature=ND%2FDqxOVnJBfeGFzGrFoYRVj01w%3D" alt="" loading="lazy"/></p>
<p>4.åŸºäºæ¨¡å‹çš„æ–¹æ³•</p>
<p>4.1 Isolation Forestï¼ˆå­¤ç«‹æ£®æ—ï¼‰</p>
<p>é€šè¿‡æ„å»ºéšæœºåˆ‡åˆ†æ ‘ï¼Œå°†å®¹æ˜“è¢«åˆ†ç¦»çš„ç‚¹è§†ä¸ºå¼‚å¸¸ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> sklearn.ensemble <span class="hljs-keyword">import</span> IsolationForest

iso = IsolationForest(contamination=<span class="hljs-number">0.1</span>, random_state=<span class="hljs-number">42</span>)
y_pred = iso.fit_predict(X)
df[<span class="hljs-string">'IForest'</span>] = y_pred
<span class="hljs-built_in">print</span>(df)
</code></pre>
<p>è¾“å‡ºå¦‚ä¸‹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b85c796e8ed141e99d408c5159222aee~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYWljb3Rpbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768714125&amp;x-signature=LraqxHyYRC40%2FhgTBCKneaH5uy4%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-7">æ•°æ®æ ‡å‡†åŒ–ä¸å½’ä¸€åŒ–</h2>
<h3 data-id="heading-8">ä¸ºä»€ä¹ˆéœ€è¦æ ‡å‡†åŒ–å’Œå½’ä¸€åŒ–ï¼Ÿ</h3>
<p>åœ¨æœºå™¨å­¦ä¹ ä¸­ï¼ŒåŸå§‹æ•°æ®çš„å°ºåº¦ï¼ˆscaleï¼‰å·®å¼‚å¯èƒ½éå¸¸å¤§ã€‚ä¾‹å¦‚ï¼š</p>
<ul>
<li>èº«é«˜ï¼ˆ150â€“200 cmï¼‰</li>
<li>ä½“é‡ï¼ˆ40â€“100 kgï¼‰</li>
<li>æ”¶å…¥ï¼ˆå‡ åƒåˆ°å‡ åä¸‡ï¼‰</li>
</ul>
<p>å¦‚æœç›´æ¥å°†è¿™äº›ç‰¹å¾è¾“å…¥æ¨¡å‹ï¼Œæ•°å€¼å¤§çš„ç‰¹å¾ä¼šä¸»å¯¼è®­ç»ƒè¿‡ç¨‹ï¼Œå¯¼è‡´æ¨¡å‹åå‘æŸäº›ç‰¹å¾ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œéœ€è¦å¯¹æ•°æ®è¿›è¡Œ æ ‡å‡†åŒ–ï¼ˆStandardizationï¼‰ æˆ– å½’ä¸€åŒ–ï¼ˆNormalizationï¼‰ã€‚</p>
<p>è¿™ä¸¤ä¸ªæ“ä½œçš„æ ¸å¿ƒç›®æ ‡æ˜¯ï¼š</p>
<ul>
<li>è®©ç‰¹å¾å¤„äºç›¸å¯¹å¯æ¯”çš„æ•°å€¼èŒƒå›´ï¼›</li>
<li>åŠ å¿«æ¨¡å‹æ”¶æ•›é€Ÿåº¦ï¼›</li>
<li>æå‡æŸäº›å¯¹æ•°å€¼æ•æ„Ÿæ¨¡å‹çš„æ€§èƒ½ï¼ˆå¦‚ KNNã€SVMã€ç¥ç»ç½‘ç»œï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-9">æ•°æ®æ ‡å‡†åŒ–ï¼ˆStandardizationï¼‰</h3>
<p>å®šä¹‰</p>
<p>æ ‡å‡†åŒ–æ˜¯å°†æ•°æ®æŒ‰ç‰¹å¾è½¬æ¢ä¸ºå‡å€¼ä¸º 0ã€æ ‡å‡†å·®ä¸º 1 çš„åˆ†å¸ƒã€‚å…¬å¼ï¼š</p>
<p>xâ€²=xâˆ’Î¼Ïƒ</p>
<p>å…¶ä¸­ï¼š</p>
<ul>
<li>x æ˜¯åŸå§‹å€¼ï¼Œ</li>
<li>Î¼ æ˜¯ç‰¹å¾å‡å€¼ï¼Œ</li>
<li>Ïƒ æ˜¯ç‰¹å¾æ ‡å‡†å·®ã€‚</li>
</ul>
<p>ç»“æœï¼šæ•°æ®åˆ†å¸ƒä¼šå˜æˆå‡å€¼ 0ã€æ–¹å·®1 çš„æ ‡å‡†æ­£æ€åˆ†å¸ƒã€‚</p>
<p>åº”ç”¨åœºæ™¯</p>
<ul>
<li>å‡è®¾æ•°æ®è¿‘ä¼¼æ­£æ€åˆ†å¸ƒï¼›</li>
<li>å¯¹ SVMã€é€»è¾‘å›å½’ã€KNNã€PCA ç­‰ç®—æ³•æ•ˆæœæ˜¾è‘—ï¼›</li>
<li>ç‰¹åˆ«é€‚åˆæ¢¯åº¦ä¸‹é™ç±»æ¨¡å‹ï¼ŒåŠ å¿«æ”¶æ•›ã€‚</li>
</ul>
<p>ç¤ºä¾‹ä»£ç </p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
<span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd
<span class="hljs-keyword">from</span> sklearn.preprocessing <span class="hljs-keyword">import</span> StandardScaler

<span class="hljs-comment"># æ„é€ æ•°æ®</span>
data = pd.DataFrame({
    <span class="hljs-string">'Height'</span>: [<span class="hljs-number">160</span>, <span class="hljs-number">170</span>, <span class="hljs-number">180</span>, <span class="hljs-number">190</span>],
    <span class="hljs-string">'Weight'</span>: [<span class="hljs-number">50</span>, <span class="hljs-number">65</span>, <span class="hljs-number">80</span>, <span class="hljs-number">95</span>]
})

scaler = StandardScaler()
standardized = scaler.fit_transform(data)

df_std = pd.DataFrame(standardized, columns=[<span class="hljs-string">'Height'</span>, <span class="hljs-string">'Weight'</span>])
<span class="hljs-built_in">print</span>(df_std)
</code></pre>
<p>è¾“å‡ºç»“æœå¦‚ä¸‹ï¼Œå¯ä»¥çœ‹åˆ°å˜æˆäº†å‡å€¼ä¸º0ï¼Œæ–¹å·®ä¸º1çš„æ•°æ®ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/91ca290865e54267ba35e691de99979f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYWljb3Rpbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768714125&amp;x-signature=9g1%2F2E3vdRTjAu%2FywBUKcqTyU1Q%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-10">æ•°æ®å½’ä¸€åŒ–ï¼ˆNormalizationï¼‰</h3>
<p>å®šä¹‰</p>
<p>å½’ä¸€åŒ–æ˜¯å°†æ•°æ®çº¿æ€§æ˜ å°„åˆ°æŒ‡å®šåŒºé—´ï¼ˆé€šå¸¸æ˜¯ [0, 1]ï¼‰ã€‚å…¬å¼ï¼š xâ€²=xâˆ’xminxmaxâˆ’xmin</p>
<p>å…¶ä¸­ï¼š</p>
<ul>
<li>xmin,xmax åˆ†åˆ«æ˜¯ç‰¹å¾çš„æœ€å°å€¼å’Œæœ€å¤§å€¼ã€‚ ç»“æœï¼šæ‰€æœ‰æ•°æ®ç‚¹ä¼šç¼©æ”¾åˆ°ç›¸åŒçš„åŒºé—´ã€‚</li>
</ul>
<p>åº”ç”¨åœºæ™¯</p>
<ul>
<li>ç‰¹å¾æ²¡æœ‰æ˜æ˜¾çš„åˆ†å¸ƒå‡è®¾ï¼›</li>
<li>é€‚åˆ ç¥ç»ç½‘ç»œï¼ˆSigmoidã€Tanh æ¿€æ´»å‡½æ•°ï¼‰ï¼Œé¿å…æ¢¯åº¦æ¶ˆå¤±ï¼›</li>
<li>é€‚åˆéœ€è¦è®¡ç®— è·ç¦»ï¼ˆæ¬§å¼è·ç¦»ã€ä½™å¼¦ç›¸ä¼¼åº¦ï¼‰ çš„ç®—æ³•ï¼Œå¦‚ KNNã€K-meansã€‚ ç¤ºä¾‹ä»£ç </li>
</ul>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> sklearn.preprocessing <span class="hljs-keyword">import</span> MinMaxScaler

scaler = MinMaxScaler()
normalized = scaler.fit_transform(data)

df_norm = pd.DataFrame(normalized, columns=[<span class="hljs-string">'Height'</span>, <span class="hljs-string">'Weight'</span>])
<span class="hljs-built_in">print</span>(df_norm)
</code></pre>
<p>è¾“å‡ºç»“æœå¦‚ä¸‹ï¼Œå…¨éƒ¨æ˜ å°„åˆ°äº†[0,1]ç©ºé—´å†…ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3e23f370b91945dfa452700b1eba4303~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYWljb3Rpbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768714125&amp;x-signature=CLilhKrtf%2B54d8R%2FCbL9W3Xj9lY%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-11">é«˜çº§æ‰©å±•</h3>
<p>Robust Scalerï¼ˆç¨³å¥æ ‡å‡†åŒ–ï¼‰</p>
<p>å®šä¹‰</p>
<p>ä½¿ç”¨ä¸­ä½æ•°å’Œå››åˆ†ä½å·®ï¼Œè€Œä¸æ˜¯å‡å€¼å’Œæ ‡å‡†å·®ï¼š xâ€²=xâˆ’Q2Q3âˆ’Q1</p>
<p>åº”ç”¨åœºæ™¯</p>
<ul>
<li>æ•°æ®å­˜åœ¨å¼‚å¸¸å€¼ï¼›</li>
<li>å¯¹æ¨¡å‹ç¨³å®šæ€§æœ‰è¦æ±‚ã€‚</li>
</ul>
<p>ç¤ºä¾‹ä»£ç </p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> sklearn.preprocessing <span class="hljs-keyword">import</span> RobustScaler

scaler = RobustScaler()
robust_scaled = scaler.fit_transform(data)
<span class="hljs-built_in">print</span>(robust_scaled)
</code></pre>
<p>è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2cb5d9c1c99f4718a16dd4af08c81226~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYWljb3Rpbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768714125&amp;x-signature=%2FXEXyytyi2UMgDRGH0trsqqDoIs%3D" alt="" loading="lazy"/></p>
<p>MaxAbs Scaler</p>
<p>å°†æ•°æ®ç¼©æ”¾åˆ° [-1, 1]ï¼Œä¿æŒç¨€ç–çŸ©é˜µç¨€ç–æ€§ï¼Œå¸¸ç”¨äºæ–‡æœ¬æ•°æ®ã€‚</p>
<p>å®šä¹‰</p>
<p>xâ€²=x|xmax|</p>
<p>åº”ç”¨åœºæ™¯</p>
<ul>
<li>æ•°æ®å­˜åœ¨å¼‚å¸¸å€¼ï¼›</li>
<li>å¯¹æ¨¡å‹ç¨³å®šæ€§æœ‰è¦æ±‚ã€‚</li>
</ul>
<p>ç¤ºä¾‹ä»£ç </p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> sklearn.preprocessing <span class="hljs-keyword">import</span> MaxAbsScaler

scaler = MaxAbsScaler()
scaled = scaler.fit_transform(data)
<span class="hljs-built_in">print</span>(scaled)
</code></pre>
<p>è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5fa36ce0f0dc4220a669d5174cb0a4b6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYWljb3Rpbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768714125&amp;x-signature=kKVRQrLyydsVtN1dv68Kd5NxAN4%3D" alt="" loading="lazy"/></p>
<p>æ€»ç»“ä¸€ä¸‹å°±æ˜¯æ ‡å‡†åŒ–ç”¨äºä¿æŒåˆ†å¸ƒå½¢æ€ï¼Œé€‚åˆæ­£æ€åˆ†å¸ƒå‡è®¾çš„æ¨¡å‹ã€‚å½’ä¸€åŒ–ç”¨äºå¼ºåˆ¶å‹ç¼©åˆ°å›ºå®šåŒºé—´ï¼Œé€‚åˆè·ç¦»åº¦é‡å’Œç¥ç»ç½‘ç»œã€‚é²æ£’æ ‡å‡†åŒ–åœ¨é¢å¯¹å¼‚å¸¸å€¼æ—¶æ›´ç¨³å¥ã€‚åœ¨å®è·µä¸­ï¼Œå¯ä»¥æ ¹æ®æ•°æ®åˆ†å¸ƒç‰¹æ€§ï¼ˆæ˜¯å¦æ­£æ€ï¼‰ã€æ¨¡å‹éœ€æ±‚ï¼ˆæ˜¯å¦ä¾èµ–è·ç¦»ã€æ¢¯åº¦ï¼‰ã€æ˜¯å¦å­˜åœ¨å¼‚å¸¸å€¼æ¥é€‰æ‹©åˆé€‚çš„æ–¹å¼ã€‚</p>
<p>æœ€æ–°çš„æ–‡ç« éƒ½åœ¨å…¬ä¼—å·aicotingæ›´æ–°ï¼Œåˆ«å¿˜è®°å…³æ³¨å“¦ï¼ï¼ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æœºå™¨å­¦ä¹ ç‰¹å¾å·¥ç¨‹ä¸­çš„ç‰¹å¾é€‰æ‹©]]></title>    <link>https://juejin.cn/post/7593607642552959002</link>    <guid>https://juejin.cn/post/7593607642552959002</guid>    <pubDate>2026-01-11T05:41:54.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7593607642552959002" data-draft-id="7593630465379680294" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æœºå™¨å­¦ä¹ ç‰¹å¾å·¥ç¨‹ä¸­çš„ç‰¹å¾é€‰æ‹©"/> <meta itemprop="keywords" content="é¢è¯•,ç®—æ³•"/> <meta itemprop="datePublished" content="2026-01-11T05:41:54.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="aicoting"/> <meta itemprop="url" content="https://juejin.cn/user/933911964427818"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æœºå™¨å­¦ä¹ ç‰¹å¾å·¥ç¨‹ä¸­çš„ç‰¹å¾é€‰æ‹©
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/933911964427818/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    aicoting
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-11T05:41:54.000Z" title="Sun Jan 11 2026 05:41:54 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æ¨èç›´æ¥ç½‘ç«™åœ¨çº¿é˜…è¯»ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Flink.zhihu.com%2F%3Ftarget%3Dhttps%253A%2F%2Faicoting.cn%2F" target="_blank" title="https://link.zhihu.com/?target=https%3A//aicoting.cn/" ref="nofollow noopener noreferrer">aicoting AIç®—æ³•é¢è¯•å­¦ä¹ åœ¨çº¿ç½‘ç«™</a></p>
</blockquote>
<p>ç‰¹å¾å·¥ç¨‹ï¼ˆFeature Engineeringï¼‰ æ˜¯æœºå™¨å­¦ä¹ æµç¨‹ä¸­å°†åŸå§‹æ•°æ®è½¬æ¢ä¸ºé€‚åˆæ¨¡å‹å­¦ä¹ çš„ç‰¹å¾çš„å…³é”®æ­¥éª¤ã€‚å®ƒç›´æ¥å†³å®šäº†æ¨¡å‹èƒ½å¦é«˜æ•ˆæ•æ‰æ•°æ®ä¸­çš„è§„å¾‹ã€‚å¥½çš„ç‰¹å¾å¯ä»¥æ˜¾è‘—æå‡æ¨¡å‹æ€§èƒ½ï¼Œè€Œå·®çš„ç‰¹å¾å³ä½¿æ¨¡å‹å†å¤æ‚ä¹Ÿéš¾ä»¥å–å¾—å¥½æ•ˆæœã€‚</p>
<p>ç‰¹å¾å·¥ç¨‹çš„æ ¸å¿ƒç›®æ ‡æ˜¯ï¼š</p>
<ul>
<li>æå–æœ‰æ•ˆä¿¡æ¯ï¼šå°†åŸå§‹æ•°æ®ä¸­æœ‰ä»·å€¼çš„ä¿¡å·è½¬åŒ–ä¸ºæ¨¡å‹å¯ä»¥ç†è§£çš„ç‰¹å¾ï¼›</li>
<li>å‡å°‘å†—ä½™ä¸å™ªå£°ï¼šå»æ‰æ— å…³æˆ–å¤šä½™çš„ç‰¹å¾ï¼Œä½¿æ¨¡å‹æ›´ç®€æ´ã€æ›´æ³›åŒ–ï¼›</li>
<li>å¢å¼ºè¡¨è¾¾èƒ½åŠ›ï¼šé€šè¿‡æ„é€ ã€ç»„åˆæˆ–é™ç»´ç”Ÿæˆæ–°çš„ç‰¹å¾ï¼Œä½¿æ¨¡å‹èƒ½å¤Ÿæ›´å¥½åœ°æ•æ‰æ•°æ®çš„å¤æ‚å…³ç³»ï¼›</li>
<li>æé«˜è®­ç»ƒæ•ˆç‡ï¼šå‡å°‘ç‰¹å¾ç»´åº¦ã€ç»Ÿä¸€å°ºåº¦ï¼Œä½¿æ¨¡å‹è®­ç»ƒæ›´å¿«ã€æ”¶æ•›æ›´ç¨³å®šã€‚</li>
</ul>
<p>ç‰¹å¾å·¥ç¨‹é€šå¸¸åŒ…æ‹¬ä¸‰ä¸ªä¸»è¦ç¯èŠ‚ï¼š</p>
<ol>
<li>ç‰¹å¾é€‰æ‹©ï¼šè¯†åˆ«å¹¶ä¿ç•™å¯¹é¢„æµ‹ä»»åŠ¡æœ€æœ‰è´¡çŒ®çš„ç‰¹å¾ï¼›</li>
<li>ç‰¹å¾æ„é€ ï¼šåŸºäºç°æœ‰ç‰¹å¾ç”Ÿæˆæ–°çš„ã€æ›´å…·ä¿¡æ¯é‡çš„ç‰¹å¾ï¼Œä¾‹å¦‚å¤šé¡¹å¼ç‰¹å¾ã€äº¤äº’ç‰¹å¾ï¼›</li>
<li>ç‰¹å¾é™ç»´ï¼šé€šè¿‡æ–¹æ³•å¦‚ PCAã€LDAã€ICAï¼Œå°†é«˜ç»´ç‰¹å¾å‹ç¼©åˆ°ä½ç»´ç©ºé—´ï¼ŒåŒæ—¶ä¿ç•™ä¸»è¦ä¿¡æ¯ã€‚</li>
</ol>
<p>ç‰¹å¾å·¥ç¨‹åœ¨æœºå™¨å­¦ä¹ ä¸­ä¸ç®—æ³•æœ¬èº«åŒç­‰é‡è¦ã€‚è¿™ä¹Ÿæ˜¯æœºå™¨å­¦ä¹ å’Œæ·±åº¦å­¦ä¹ çš„æœ€å¤§åŒºåˆ«æ‰€åœ¨ï¼Œé€šè¿‡åˆç†çš„ç‰¹å¾å¤„ç†ï¼Œå¯ä»¥è®©ç®€å•çš„æ¨¡å‹ä¹Ÿå–å¾—å‡ºè‰²çš„æ•ˆæœï¼Œä¸ºåç»­æ¨¡å‹è®­ç»ƒå’Œä¼˜åŒ–æ‰“ä¸‹åšå®åŸºç¡€ã€‚ä¸‹é¢æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ç‰¹å¾é€‰æ‹©ã€‚</p>
<h2 data-id="heading-0">ä»€ä¹ˆæ˜¯ç‰¹å¾é€‰æ‹©ï¼Ÿ</h2>
<p>ç‰¹å¾é€‰æ‹©æ˜¯æŒ‡ä»åŸå§‹ç‰¹å¾é›†åˆä¸­æŒ‘é€‰å‡ºå¯¹æ¨¡å‹é¢„æµ‹ä»»åŠ¡æœ€æœ‰ä»·å€¼çš„ç‰¹å¾ï¼ŒåŒæ—¶å»æ‰æ— å…³æˆ–å†—ä½™ç‰¹å¾çš„è¿‡ç¨‹ã€‚</p>
<ul>
<li>ç›®æ ‡ï¼šæé«˜æ¨¡å‹æ€§èƒ½ã€å‡å°‘è¿‡æ‹Ÿåˆã€é™ä½è®¡ç®—æˆæœ¬ã€æå‡å¯è§£é‡Šæ€§ã€‚</li>
<li>é—®é¢˜èƒŒæ™¯ï¼šåœ¨å¤§æ•°æ®æ—¶ä»£ï¼Œæ•°æ®é›†å¯èƒ½åŒ…å«æˆç™¾ä¸Šåƒä¸ªç‰¹å¾ï¼Œå¾ˆå¤šç‰¹å¾å¯¹é¢„æµ‹æ²¡æœ‰å¸®åŠ©ç”šè‡³æœ‰å®³ã€‚</li>
</ul>
<h2 data-id="heading-1">ç‰¹å¾é€‰æ‹©çš„åŸåˆ™</h2>
<p>ç‰¹å¾é€‰æ‹©é€šå¸¸éµå¾ªä»¥ä¸‹åŸåˆ™ï¼š</p>
<ol>
<li>ç›¸å…³æ€§åŸåˆ™ï¼šä¿ç•™ä¸ç›®æ ‡å˜é‡ç›¸å…³æ€§é«˜çš„ç‰¹å¾ã€‚</li>
<li>å†—ä½™æœ€å°åŒ–ï¼šå»æ‰é«˜åº¦ç›¸å…³æˆ–é‡å¤çš„ç‰¹å¾ã€‚</li>
<li>å¯è§£é‡Šæ€§ï¼šä¿ç•™å¯¹ä¸šåŠ¡æœ‰æ„ä¹‰çš„ç‰¹å¾ã€‚</li>
<li>æ³›åŒ–èƒ½åŠ›ï¼šé€‰æ‹©èƒ½å¤Ÿæé«˜æ¨¡å‹åœ¨æ–°æ•°æ®ä¸Šè¡¨ç°çš„ç‰¹å¾ã€‚</li>
</ol>
<h2 data-id="heading-2">ç‰¹å¾é€‰æ‹©çš„æ–¹æ³•åˆ†ç±»</h2>
<h3 data-id="heading-3">1. è¿‡æ»¤æ³•ï¼ˆFilter Methodï¼‰</h3>
<p>æ ¸å¿ƒæ€æƒ³ï¼šé€šè¿‡ç»Ÿè®¡æŒ‡æ ‡å¯¹ç‰¹å¾è¿›è¡Œæ’åºå’Œç­›é€‰ï¼Œç‹¬ç«‹äºå…·ä½“æ¨¡å‹ã€‚</p>
<p>å¸¸ç”¨æŒ‡æ ‡</p>
<ul>
<li>ç›¸å…³ç³»æ•°ï¼ˆCorrelationï¼‰ï¼šPearsonã€Spearmanã€‚</li>
<li>å¡æ–¹æ£€éªŒï¼ˆChi-Squareï¼‰ï¼šç”¨äºåˆ†ç±»é—®é¢˜çš„ç¦»æ•£ç‰¹å¾ã€‚</li>
<li>äº’ä¿¡æ¯ï¼ˆMutual Informationï¼‰ï¼šè¡¡é‡ç‰¹å¾ä¸ç›®æ ‡çš„ä¾èµ–å…³ç³»ã€‚</li>
</ul>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd
<span class="hljs-keyword">from</span> sklearn.datasets <span class="hljs-keyword">import</span> load_iris
<span class="hljs-keyword">from</span> sklearn.feature_selection <span class="hljs-keyword">import</span> SelectKBest, chi2, f_classif

<span class="hljs-comment"># åŠ è½½æ•°æ®</span>
iris = load_iris()
X, y = iris.data, iris.target

<span class="hljs-comment"># å¡æ–¹æ£€éªŒé€‰æ‹©å‰2ä¸ªç‰¹å¾</span>
chi2_selector = SelectKBest(score_func=chi2, k=<span class="hljs-number">2</span>)
X_chi2 = chi2_selector.fit_transform(X, y)
<span class="hljs-built_in">print</span>(X_chi2)

<span class="hljs-comment"># æ–¹å·®åˆ†æé€‰æ‹©å‰2ä¸ªç‰¹å¾</span>
f_selector = SelectKBest(score_func=f_classif, k=<span class="hljs-number">2</span>)
X_f = f_selector.fit_transform(X, y)
<span class="hljs-comment"># print(X_f)</span>
</code></pre>
<p>è¾“å‡ºå¦‚ä¸‹ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/befb65409f894eb3b350ac62afdf935a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYWljb3Rpbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768714914&amp;x-signature=tWGpUSWbekDZTo8OYFcOVZue09o%3D" alt="" loading="lazy"/></p>
<p>è¿‡æ»¤æ³•çš„ä¼˜ç‚¹æ˜¯ç®€å•å¿«é€Ÿã€ä¸æ¨¡å‹æ— å…³å¹¶ä¸”å¯å¤„ç†é«˜ç»´æ•°æ®ï¼›ç¼ºç‚¹æ˜¯å¿½ç•¥ç‰¹å¾é—´çš„å…³è”ã€å¯èƒ½ä¸¢å¤±éçº¿æ€§å…³ç³»ä¿¡æ¯ã€‚</p>
<h3 data-id="heading-4">2.åŒ…è£¹æ³•ï¼ˆWrapper Methodï¼‰</h3>
<p>æ ¸å¿ƒæ€æƒ³ï¼šé€šè¿‡æ¨¡å‹æ€§èƒ½ä½œä¸ºè¯„ä»·æ ‡å‡†ï¼Œä½¿ç”¨æœç´¢ç­–ç•¥æŒ‘é€‰ç‰¹å¾ã€‚ å¸¸ç”¨ç­–ç•¥</p>
<ul>
<li>é€’å½’ç‰¹å¾æ¶ˆé™¤ï¼ˆRFE, Recursive Feature Eliminationï¼‰ï¼šåå¤è®­ç»ƒæ¨¡å‹ï¼Œæ¯æ¬¡å‰”é™¤æœ€ä¸é‡è¦çš„ç‰¹å¾ã€‚</li>
<li>å‰å‘é€‰æ‹©ï¼ˆForward Selectionï¼‰ï¼šä»ç©ºç‰¹å¾é›†å¼€å§‹ï¼Œé€æ­¥åŠ å…¥æœ€ä¼˜ç‰¹å¾ã€‚</li>
<li>åå‘æ¶ˆé™¤ï¼ˆBackward Eliminationï¼‰ï¼šä»å®Œæ•´ç‰¹å¾é›†å¼€å§‹ï¼Œé€æ­¥åˆ é™¤æœ€å·®ç‰¹å¾ã€‚</li>
</ul>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> sklearn.feature_selection <span class="hljs-keyword">import</span> RFE
<span class="hljs-keyword">from</span> sklearn.linear_model <span class="hljs-keyword">import</span> LogisticRegression

model = LogisticRegression(max_iter=<span class="hljs-number">200</span>)
rfe = RFE(model, n_features_to_select=<span class="hljs-number">2</span>)
X_rfe = rfe.fit_transform(X, y)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"é€‰å‡ºçš„ç‰¹å¾ç´¢å¼•:"</span>, rfe.support_)
</code></pre>
<p>è¿è¡Œçš„ç»“æœå¦‚ä¸‹ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/67f3cf9aa6d944cc994ecc817ce39204~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYWljb3Rpbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768714914&amp;x-signature=pALUctOMQ%2BFYhrMXC%2Bmuc54CnaE%3D" alt="" loading="lazy"/></p>
<p>åŒ…è£¹æ³•çš„ä¼˜ç‚¹æ˜¯è€ƒè™‘ç‰¹å¾é—´äº¤äº’ä½œç”¨ï¼Œå¹¶ä¸”å¯æå‡æ¨¡å‹æ€§èƒ½ï¼›ä½†æ˜¯ç¼ºç‚¹æ˜¯è®¡ç®—æˆæœ¬é«˜ï¼Œå°¤å…¶åœ¨é«˜ç»´æ•°æ®ä¸­ï¼ŒåŒæ—¶å¯¹æ¨¡å‹ä¾èµ–å¼ºï¼Œä¸åŒæ¨¡å‹ç»“æœä¸åŒã€‚</p>
<h3 data-id="heading-5">3.åµŒå…¥æ³•ï¼ˆEmbedded Methodï¼‰</h3>
<p>æ ¸å¿ƒæ€æƒ³ï¼šåœ¨æ¨¡å‹è®­ç»ƒè¿‡ç¨‹ä¸­è‡ªåŠ¨é€‰æ‹©ç‰¹å¾ã€‚æ¨¡å‹æœ¬èº«å¸¦æœ‰ç‰¹å¾é€‰æ‹©èƒ½åŠ›ã€‚ å¸¸ç”¨æ–¹æ³•</p>
<ul>
<li>æ­£åˆ™åŒ–å›å½’ï¼ˆLasso/L1ï¼‰ï¼šå¯¹ä¸é‡è¦çš„ç‰¹å¾æƒé‡å‹ç¼©ä¸ºé›¶ã€‚</li>
<li>å†³ç­–æ ‘ / éšæœºæ£®æ—ç‰¹å¾é‡è¦æ€§ï¼šæ ¹æ®ä¿¡æ¯å¢ç›Šæˆ– Gini æŒ‡æ•°è¡¡é‡ç‰¹å¾è´¡çŒ®ã€‚ ç¤ºä¾‹ä»£ç ï¼ˆPython + Lassoï¼‰</li>
</ul>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> sklearn.linear_model <span class="hljs-keyword">import</span> Lasso

lasso = Lasso(alpha=<span class="hljs-number">0.1</span>)
lasso.fit(X, y)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"ç‰¹å¾ç³»æ•°:"</span>, lasso.coef_)
</code></pre>
<p>è¾“å‡ºç»“æœä¸ºï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/398c472566da418eb5eb6d34b856c138~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYWljb3Rpbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768714914&amp;x-signature=FS%2FOQVGODH4pboUOKzStQOQuUCg%3D" alt="" loading="lazy"/></p>
<p>åµŒå…¥æ³•çš„ä¼˜ç‚¹æ˜¯å°†ç‰¹å¾é€‰æ‹©èå…¥è®­ç»ƒè¿‡ç¨‹ï¼Œç›¸æ¯”åŒ…è£¹æ³•æ›´é«˜æ•ˆï¼Œé€‚åˆé«˜ç»´ç¨€ç–æ•°æ®ã€‚ä½†æ˜¯ç¼ºç‚¹æ˜¯å¯¹æ¨¡å‹ç±»å‹ä¾èµ–ï¼Œå¯èƒ½é”™è¿‡éçº¿æ€§å…³ç³»ã€‚</p>
<p>æœ€æ–°çš„æ–‡ç« éƒ½åœ¨å…¬ä¼—å·aicotingæ›´æ–°ï¼Œåˆ«å¿˜è®°å…³æ³¨å“¦ï¼ï¼ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Javaå¹¶å‘ç¼–ç¨‹å®æˆ˜ï¼šä»å…¥é—¨åˆ°ç²¾é€šçš„5ä¸ªå…³é”®æŠ€å·§ï¼Œè®©æˆ‘è–ªèµ„æ¶¨äº†40%]]></title>    <link>https://juejin.cn/post/7593353611943034932</link>    <guid>https://juejin.cn/post/7593353611943034932</guid>    <pubDate>2026-01-11T04:18:20.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7593353611943034932" data-draft-id="7593296804109860904" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Javaå¹¶å‘ç¼–ç¨‹å®æˆ˜ï¼šä»å…¥é—¨åˆ°ç²¾é€šçš„5ä¸ªå…³é”®æŠ€å·§ï¼Œè®©æˆ‘è–ªèµ„æ¶¨äº†40%"/> <meta itemprop="keywords" content="åç«¯,å‰ç«¯,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-01-11T04:18:20.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿æ©™çš„ç™¾å®ç®±"/> <meta itemprop="url" content="https://juejin.cn/user/1638743356481367"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Javaå¹¶å‘ç¼–ç¨‹å®æˆ˜ï¼šä»å…¥é—¨åˆ°ç²¾é€šçš„5ä¸ªå…³é”®æŠ€å·§ï¼Œè®©æˆ‘è–ªèµ„æ¶¨äº†40%
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1638743356481367/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿æ©™çš„ç™¾å®ç®±
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-11T04:18:20.000Z" title="Sun Jan 11 2026 04:18:20 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>Javaå¹¶å‘ç¼–ç¨‹å®æˆ˜ï¼šä»å…¥é—¨åˆ°ç²¾é€šçš„5ä¸ªå…³é”®æŠ€å·§ï¼Œè®©æˆ‘è–ªèµ„æ¶¨äº†40%</strong></h2>
<h3 data-id="heading-1">å¼•è¨€</h3>
<p>åœ¨å½“ä»Šé«˜å¹¶å‘çš„äº’è”ç½‘æ—¶ä»£ï¼ŒJavaå¹¶å‘ç¼–ç¨‹èƒ½åŠ›å·²æˆä¸ºè¡¡é‡å¼€å‘è€…æŠ€æœ¯æ°´å¹³çš„é‡è¦æ ‡å°ºã€‚æŒæ¡å¹¶å‘ç¼–ç¨‹ä¸ä»…èƒ½æå‡ç³»ç»Ÿæ€§èƒ½ï¼Œè¿˜èƒ½æ˜¾è‘—å¢å¼ºèŒä¸šç«äº‰åŠ›ã€‚ä½œä¸ºä¸€åä»å…¥é—¨åˆ°ç²¾é€šJavaå¹¶å‘ç¼–ç¨‹çš„å®è·µè€…ï¼Œæˆ‘é€šè¿‡ç³»ç»Ÿå­¦ä¹ å’Œé¡¹ç›®å®æˆ˜ï¼Œæ€»ç»“äº†5ä¸ªå…³é”®æŠ€å·§ï¼Œæœ€ç»ˆå®ç°äº†è–ªèµ„40%çš„å¢é•¿ã€‚æœ¬æ–‡å°†æ·±å…¥å‰–æè¿™äº›æŠ€å·§ï¼Œå¸®åŠ©ä½ å°‘èµ°å¼¯è·¯ï¼Œå¿«é€Ÿæå‡å¹¶å‘ç¼–ç¨‹èƒ½åŠ›ã€‚</p>
<h3 data-id="heading-2">1. æ·±å…¥ç†è§£Javaå†…å­˜æ¨¡å‹ï¼ˆJMMï¼‰</h3>
<h4 data-id="heading-3">ä¸ºä»€ä¹ˆJMMå¦‚æ­¤é‡è¦ï¼Ÿ</h4>
<p>Javaå†…å­˜æ¨¡å‹å®šä¹‰äº†å¤šçº¿ç¨‹ç¯å¢ƒä¸‹å˜é‡çš„è®¿é—®è§„åˆ™ï¼Œæ˜¯ç†è§£çº¿ç¨‹å®‰å…¨çš„åŸºç¡€ã€‚è®¸å¤šå¼€å‘è€…å¯¹<code>synchronized</code>å’Œ<code>volatile</code>çš„ä½¿ç”¨ä»…åœç•™åœ¨è¡¨é¢ï¼Œè€Œå¿½è§†äº†å¯¹JMMçš„æ·±å…¥ç†è§£ã€‚</p>
<h4 data-id="heading-4">å…³é”®çŸ¥è¯†ç‚¹ï¼š</h4>
<ul>
<li><strong>Happens-BeforeåŸåˆ™</strong>ï¼šè¿™æ˜¯JMMçš„æ ¸å¿ƒè§„åˆ™ä¹‹ä¸€ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªçº¿ç¨‹å¯¹<code>volatile</code>å˜é‡çš„å†™æ“ä½œ happens-before åç»­å¯¹è¯¥å˜é‡çš„è¯»æ“ä½œã€‚</li>
<li><strong>å¯è§æ€§ä¸æœ‰åºæ€§</strong>ï¼š<code>volatile</code>ä¸ä»…ä¿è¯å¯è§æ€§ï¼ˆä¸€ä¸ªçº¿ç¨‹ä¿®æ”¹åå…¶ä»–çº¿ç¨‹ç«‹å³å¯è§ï¼‰ï¼Œè¿˜ç¦æ­¢æŒ‡ä»¤é‡æ’åºï¼ˆé€šè¿‡æ’å…¥å†…å­˜å±éšœï¼‰ã€‚</li>
<li><strong>åŒé‡æ£€æŸ¥é”å®šï¼ˆDCLï¼‰é—®é¢˜</strong>ï¼šç»å…¸çš„DCLå•ä¾‹æ¨¡å¼åœ¨æ—©æœŸJDKä¸­å¯èƒ½å› æŒ‡ä»¤é‡æ’åºå¤±æ•ˆï¼Œè€Œ<code>volatile</code>å¯ä»¥è§£å†³è¿™ä¸€é—®é¢˜ã€‚</li>
</ul>
<h4 data-id="heading-5">å®æˆ˜å»ºè®®ï¼š</h4>
<ul>
<li>ä½¿ç”¨å·¥å…·ï¼ˆå¦‚JProfilerã€VisualVMï¼‰è§‚å¯Ÿçº¿ç¨‹é—´çš„å˜é‡åŒæ­¥æƒ…å†µã€‚</li>
<li>åœ¨éœ€è¦è·¨çº¿ç¨‹å…±äº«å˜é‡æ—¶ï¼Œä¼˜å…ˆè€ƒè™‘<code>volatile</code>è€Œé<code>synchronized</code>ï¼ˆå¦‚æœä»…éœ€å¯è§æ€§ä¿éšœï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-6">2. ç†Ÿç»ƒæŒæ¡å¹¶å‘å·¥å…·ç±»</h3>
<p>Javaæä¾›äº†ä¸°å¯Œçš„å¹¶å‘å·¥å…·ç±»ï¼ˆä½äº<code>java.util.concurrent</code>åŒ…ï¼‰ï¼Œåˆç†ä½¿ç”¨å®ƒä»¬å¯ä»¥å¤§å¹…ç®€åŒ–ä»£ç å¹¶æå‡æ€§èƒ½ã€‚</p>
<h4 data-id="heading-7">å…³é”®å·¥å…·ç±»åŠåœºæ™¯ï¼š</h4>
<ol>
<li><strong>CountDownLatch</strong>ï¼šé€‚ç”¨äºå¤šä»»åŠ¡å®Œæˆåè§¦å‘ä¸»ä»»åŠ¡çš„åœºæ™¯ï¼ˆå¦‚å¹¶è¡Œè®¡ç®—åçš„ç»“æœæ±‡æ€»ï¼‰ã€‚</li>
<li><strong>CyclicBarrier</strong>ï¼šé€‚åˆåˆ†é˜¶æ®µä»»åŠ¡ï¼ˆå¦‚æ¸¸æˆæœåŠ¡ç«¯çš„å¤šç©å®¶å›åˆåˆ¶åŒæ­¥ï¼‰ã€‚</li>
<li><strong>Semaphore</strong>ï¼šæ§åˆ¶èµ„æºè®¿é—®çš„å¹¶å‘æ•°ï¼ˆå¦‚æ•°æ®åº“è¿æ¥æ± ç®¡ç†ï¼‰ã€‚</li>
<li><strong>CompletableFuture</strong>ï¼šå¼‚æ­¥ç¼–ç¨‹ç¥å™¨ï¼Œæ”¯æŒé“¾å¼è°ƒç”¨å’Œç»„åˆæ“ä½œï¼ˆæ›¿ä»£ä¼ ç»Ÿçš„å›è°ƒåœ°ç‹±ï¼‰ã€‚</li>
</ol>
<h4 data-id="heading-8">å®æˆ˜æ¡ˆä¾‹ï¼š</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä½¿ç”¨CompletableFutureå®ç°å¼‚æ­¥ä»»åŠ¡é“¾</span>
CompletableFuture.supplyAsync(() -&gt; fetchDataFromDB())
    .thenApply(data -&gt; processData(data))
    .thenAccept(result -&gt; saveResult(result))
    .exceptionally(ex -&gt; handleError(ex));
</code></pre>
<h3 data-id="heading-9">3. é”ä¼˜åŒ–ä¸æ— é”ç¼–ç¨‹</h3>
<h4 data-id="heading-10">é”çš„ç²’åº¦æ§åˆ¶</h4>
<p>ç²—ç²’åº¦é”ï¼ˆå¦‚ç›´æ¥é”æ•´ä¸ªæ–¹æ³•ï¼‰ä¼šå¯¼è‡´æ€§èƒ½ç“¶é¢ˆï¼›ç»†ç²’åº¦é”ï¼ˆå¦‚ConcurrentHashMapçš„åˆ†æ®µé”ï¼‰èƒ½æ˜¾è‘—æå‡ååé‡ã€‚</p>
<h4 data-id="heading-11">æ— é”æŠ€æœ¯çš„åº”ç”¨</h4>
<ul>
<li><strong>CASæ“ä½œ</strong>ï¼šAtomicIntegerç­‰åŸå­ç±»åŸºäºCASå®ç°é«˜æ€§èƒ½è®¡æ•°ã€‚</li>
<li><strong>LongAdder</strong>ï¼šåœ¨é«˜ç«äº‰åœºæ™¯ä¸‹æ¯”AtomicLongæ›´é«˜æ•ˆï¼ˆé€šè¿‡åˆ†æ•£çƒ­ç‚¹ï¼‰ã€‚</li>
<li><strong>StampedLock</strong>ï¼šè¯»å†™é”çš„ä¼˜åŒ–ç‰ˆï¼Œæ”¯æŒä¹è§‚è¯»æ¨¡å¼ã€‚</li>
</ul>
<h4 data-id="heading-12">é¿å‘æŒ‡å—ï¼š</h4>
<ul>
<li>é¿å…æ­»é”ï¼šæŒ‰å›ºå®šé¡ºåºè·å–å¤šæŠŠé”ï¼›ä½¿ç”¨tryLockè®¾ç½®è¶…æ—¶æ—¶é—´ã€‚</li>
<li>æ³¨æ„æ´»é”é—®é¢˜ï¼šé‡è¯•æœºåˆ¶éœ€å¼•å…¥éšæœºå»¶è¿Ÿï¼ˆå¦‚æŒ‡æ•°é€€é¿ç®—æ³•ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-13">4. ThreadLocalçš„æ­£ç¡®ä½¿ç”¨ä¸å†…å­˜æ³„æ¼é˜²èŒƒ</h3>
<p>ThreadLocalå¸¸ç”¨äºä¿å­˜çº¿ç¨‹ç§æœ‰æ•°æ®ï¼ˆå¦‚ç”¨æˆ·ä¼šè¯ä¿¡æ¯ï¼‰ï¼Œä½†é”™è¯¯ä½¿ç”¨ä¼šå¯¼è‡´å†…å­˜æ³„æ¼ã€‚</p>
<h4 data-id="heading-14">æœ€ä½³å®è·µï¼š</h4>
<ol>
<li><strong>æ˜¾å¼æ¸…ç†</strong>ï¼šåœ¨try-finallyå—ä¸­è°ƒç”¨remove()æ–¹æ³•ã€‚</li>
<li><strong>ä½¿ç”¨å¼±å¼•ç”¨æ”¹è¿›è®¾è®¡</strong>ï¼š</li>
</ol>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ThreadLocalWeakRef</span>&lt;T&gt; <span class="hljs-keyword">extends</span> <span class="hljs-title class_">WeakReference</span>&lt;T&gt; {
    ThreadLocalWeakRef(T referent) {
        <span class="hljs-built_in">super</span>(referent);
    }
}
</code></pre>
<ol start="3">
<li><strong>é¿å…å…¨å±€ç¼“å­˜åœºæ™¯</strong>ï¼šThreadLocalä¸é€‚åˆå­˜å‚¨å¤§å¯¹è±¡æˆ–é•¿æœŸå­˜æ´»çš„æ•°æ®ã€‚</li>
</ol>
<h3 data-id="heading-15">5. JUCé›†åˆç±»çš„é€‰å‹ä¸æ€§èƒ½è°ƒä¼˜</h3>
<h4 data-id="heading-16">HashMap vs ConcurrentHashMap vs Collections.synchronizedMap()</h4>
<ul>
<li>HashMapéçº¿ç¨‹å®‰å…¨ï¼›ConcurrentHashMapåˆ†æ®µé”è®¾è®¡æ›´é«˜æ•ˆï¼›synchronizedMapé€‚åˆä½ç«äº‰åœºæ™¯ã€‚</li>
</ul>
<h4 data-id="heading-17">BlockingQueueçš„é€‰æ‹©ç­–ç•¥</h4>

























<table><thead><tr><th>é˜Ÿåˆ—ç±»å‹</th><th>ç‰¹ç‚¹</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>ArrayBlockingQueue</td><td>å›ºå®šå®¹é‡ã€å…¬å¹³æ€§å¯é€‰</td><td>ç”Ÿäº§æ¶ˆè´¹æ¨¡å‹</td></tr><tr><td>LinkedBlockingQueue</td><td>å¯é€‰æ— ç•Œé˜Ÿåˆ—</td><td>é«˜ååä»»åŠ¡</td></tr><tr><td>PriorityBlockingQueue</td><td>ä¼˜å…ˆçº§æ’åº</td><td>å»¶è¿Ÿä»»åŠ¡è°ƒåº¦</td></tr></tbody></table>
<h4 data-id="heading-18">ConcurrentSkipListMapçš„å¦™ç”¨</h4>
<p>è·³è¡¨ç»“æ„çš„å¹¶å‘æœ‰åºMap,æ¯”TreeMapæ›´é€‚åˆå†™å¤šè¯»å°‘åœºæ™¯ã€‚</p>
<hr/>
<p>###æ€»ç»“</p>
<p>Javaå¹¶å‘ç¼–ç¨‹çš„ç²¾é«“åœ¨äºå¹³è¡¡"å®‰å…¨æ€§"ã€"æ€§èƒ½"å’Œ"å¯ç»´æŠ¤æ€§"ã€‚é€šè¿‡æœ¬æ–‡ä»‹ç»çš„5ä¸ªå…³é”®æŠ€å·§â€”â€”ç†è§£JMMã€å–„ç”¨å¹¶å‘å·¥å…·ã€ä¼˜åŒ–é”ç«äº‰ã€è§„èŒƒThreadLocalä½¿ç”¨å’Œåˆç†é€‰æ‹©é›†åˆç±»â€”â€”ä½ å¯ä»¥ç³»ç»Ÿæ€§æå‡å¹¶å‘å¼€å‘èƒ½åŠ›ã€‚</p>
<p>çœŸæ­£çš„ç²¾é€šä¸åœ¨äºè®°ä½API,è€Œæ˜¯èƒ½å¤Ÿæ ¹æ®ä¸šåŠ¡åœºæ™¯çµæ´»é€‰æ‹©è§£å†³æ–¹æ¡ˆ,å¹¶é€šè¿‡å‹æµ‹éªŒè¯æ•ˆæœ(æ¨èJMHåŸºå‡†æµ‹è¯•)ã€‚å½“ä½ èƒ½å¤Ÿåœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­æ¸¸åˆƒæœ‰ä½™åœ°å¤„ç†CAPç†è®ºã€ä¸€è‡´æ€§å“ˆå¸Œç­‰é—®é¢˜æ—¶,è–ªèµ„çš„å¢é•¿å°†æ°´åˆ°æ¸ æˆã€‚</p>
<p>è®°ä½:æ²¡æœ‰é“¶å¼¹,åªæœ‰æŒç»­å­¦ä¹ å’Œæ·±åº¦æ€è€ƒæ‰èƒ½è®©ä½ åœ¨æŠ€æœ¯é“è·¯ä¸Šèµ°å¾—æ›´è¿œ</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Git ä¸“é¢˜]]></title>    <link>https://juejin.cn/post/7593356633636765730</link>    <guid>https://juejin.cn/post/7593356633636765730</guid>    <pubDate>2026-01-11T04:24:49.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7593356633636765730" data-draft-id="7592865044692123654" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Git ä¸“é¢˜"/> <meta itemprop="keywords" content="Git"/> <meta itemprop="datePublished" content="2026-01-11T04:24:49.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å“ªé‡Œçš„ç ´æ°´ç“¶"/> <meta itemprop="url" content="https://juejin.cn/user/4394111849466414"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Git ä¸“é¢˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4394111849466414/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å“ªé‡Œçš„ç ´æ°´ç“¶
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-11T04:24:49.000Z" title="Sun Jan 11 2026 04:24:49 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#444;background-image:linear-gradient(90deg,rgba(59,59,59,.1) 3%,transparent 0),linear-gradient(1turn,rgba(122,120,121,.1) 3%,transparent 0);background-size:30px 30px;background-position:50%;letter-spacing:1px;word-spacing:1px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{position:relative;margin-top:34px;margin-bottom:16px;font-weight:700;line-height:1.3;cursor:text;color:#444;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body h1{font-size:41px;margin-bottom:34px;line-height:1.5}.markdown-body h1:before{content:""}.markdown-body h2{font-size:30px;padding-left:.4em;border-left:.4em solid #5e5e5e;border-bottom:1px solid #444}.markdown-body h2:after{content:"ğŸ•›";position:absolute;top:0;right:0;transition:all;animation:rotate 10s linear infinite}@keyframes rotate{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.markdown-body h3{border-left:.4em solid #8d8d8d;font-size:24px;padding-left:.4em}.markdown-body h4{font-size:20px}.markdown-body h5{font-size:16px}.markdown-body h6{font-size:14px}.markdown-body blockquote,.markdown-body dl,.markdown-body ol,.markdown-body p,.markdown-body table,.markdown-body ul{margin:.8em 0}.markdown-body strong{font-weight:1000;position:relative;color:#444;padding:0 3px}.markdown-body em{font-weight:inherit}.markdown-body a{box-sizing:border-box;color:grey;position:relative}.markdown-body a:before{position:absolute;box-sizing:border-box;content:"Go -&gt;";left:0;width:100%;max-width:0;color:#fff;background-color:hsla(0,0%,50.2%,.8);white-space:nowrap;transition:.2s ease;pointer-events:none;overflow:hidden}.markdown-body a:after{content:"";position:absolute;bottom:0;left:0;width:100%;height:1px;background-color:grey}.markdown-body a:active:before,.markdown-body a:hover:before{max-width:100%;padding-left:8px;border-radius:5px}.markdown-body hr{position:relative;width:100%;height:1px;border:none;margin-top:36px;margin-bottom:36px;background:linear-gradient(90deg,grey,#f1f1f1,#444,#444,#f1f1f1,grey);overflow:visible}.markdown-body ol,.markdown-body ul{padding-left:32px}.markdown-body ol li,.markdown-body ul li{margin-bottom:6px;list-style:inherit}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol{counter-reset:my-counter}.markdown-body ol&gt;li{padding-left:6px;list-style:none;counter-increment:my-counter;position:relative}.markdown-body ol&gt;li:before{position:absolute;left:-1.5em;content:counter(my-counter);font-weight:700}.markdown-body ol&gt;li:first-child:before{content:"1ï¸âƒ£"}.markdown-body ol&gt;li:nth-child(2):before{content:"2ï¸âƒ£"}.markdown-body ol&gt;li:nth-child(3):before{content:"3ï¸âƒ£"}.markdown-body ol&gt;li:nth-child(4):before{content:"4ï¸âƒ£"}.markdown-body ol&gt;li:nth-child(5):before{content:"5ï¸âƒ£"}.markdown-body ol&gt;li:nth-child(6):before{content:"6ï¸âƒ£"}.markdown-body ol&gt;li:nth-child(7):before{content:"7ï¸âƒ£"}.markdown-body ol&gt;li:nth-child(8):before{content:"8ï¸âƒ£"}.markdown-body ol&gt;li:nth-child(9):before{content:"9ï¸âƒ£"}.markdown-body ol&gt;li:nth-child(10):before{content:"ğŸ”Ÿ"}.markdown-body ul&gt;li{list-style:none;position:relative}.markdown-body ul&gt;li:before{z-index:10;position:absolute;left:-1.57em;content:"ğŸ”¹";margin-right:12px}.markdown-body ul&gt;li input{margin-left:8px!important}.markdown-body blockquote{position:relative;background-color:#d3d3d3;padding:5px 10px;border-left:.2em solid #000;border-radius:3px;transition:all .8s ease}.markdown-body blockquote:hover{opacity:.7}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(69,69,77,.8);color:#fff;font-size:.87em;padding:.07em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;border-radius:7px;overflow:hidden}.markdown-body pre:before{z-index:10;position:absolute;top:14px;left:14px;width:12px;height:12px;border-radius:50%;background:#fc625d;-webkit-box-shadow:20px 0 #fdbc40,40px 0 #35cd4b;box-shadow:20px 0 #fdbc40,40px 0 #35cd4b;content:" "}.markdown-body pre:after{z-index:9;content:"";position:absolute;width:100%;height:40px;top:0;background-color:#1a1a1a}.markdown-body pre&gt;code{display:block;font-family:Menlo,Monaco,Consolas,Courier New,monospace;word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#171717;color:#bababa;font-size:14px;padding:40px 20px 20px}.markdown-body del{color:grey}.markdown-body table{margin-bottom:1.25rem;border-collapse:collapse}.markdown-body table td,.markdown-body table th{margin:0;padding:8px;line-height:20px;vertical-align:middle;border:1px solid #ddd}.markdown-body table thead,.markdown-body table tr:nth-child(2n){background-color:#fcfcfc}.markdown-body table thead th,.markdown-body table tr:nth-child(2n) th{font-weight:700;vertical-align:middle;color:#444}.markdown-body table tbody tr td{font-weight:400;color:#444}.markdown-body table tbody tr:hover{background-color:#d3d3d3}.markdown-body table tbody tr:hover td{color:#fff}.markdown-body img{max-width:100%;margin:0 12px}@media (max-width:720px){.markdown-body h1{font-size:32.8px}.markdown-body h2{font-size:24px}.markdown-body h3{font-size:19.2px}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:12.8px}}</style><style data-highlight="" data-highlight-key="a11y-dark">.hljs-comment,.hljs-quote{color:#d4d0ab}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#ffa07a}.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#f5ab35}.hljs-attribute{color:gold}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:#abe338}.hljs-section,.hljs-title{color:#00e0e0}.hljs-keyword,.hljs-selector-tag{color:#dcc6e0}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#2b2b2b;color:#f8f8f2}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}@media screen and (-ms-high-contrast:active){.hljs-addition,.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-comment,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-quote,.hljs-string,.hljs-symbol,.hljs-type{color:highlight}.hljs-keyword,.hljs-selector-tag{font-weight:700}}</style><blockquote>
<p>å…¨å±€é…ç½®</p>
</blockquote>
<pre><code class="hljs language-bash" lang="bash">git config --global user.name <span class="hljs-string">"admin"</span>
git config --global user.email <span class="hljs-string">"405015@qq.com"</span>
git config --list
</code></pre>
<ul>
<li>å·¥ä½œåŒºï¼šåŒ…å«.gitæ–‡ä»¶å¤¹çš„ç›®å½•å°±æ˜¯å·¥ä½œåŒºï¼Œä¹Ÿç§°ä¸ºå·¥ä½œç›®å½•æˆ–å·¥ä½œç©ºé—´ï¼Œä¸»è¦ç”¨äºå­˜æ”¾å¼€å‘çš„ä»£ç </li>
<li>ç‰ˆæœ¬åº“ï¼š.gitéšè—æ–‡ä»¶å¤¹å°±æ˜¯ç‰ˆæœ¬åº“ï¼Œç‰ˆæœ¬åº“ä¸­å­˜å‚¨äº†å¾ˆå¤šé…ç½®ä¿¡æ¯ã€æ—¥å¿—ä¿¡æ¯å’Œæ–‡ä»¶ç‰ˆæœ¬ä¿¡æ¯ç­‰</li>
<li>æš‚å­˜åŒºï¼š.gitæ–‡ä»¶å¤¹ä¸­æœ‰å¾ˆå¤šæ–‡ä»¶ï¼Œå…¶ä¸­æœ‰ä¸€ä¸ªindexæ–‡ä»¶å°±æ˜¯æš‚å­˜åŒºï¼Œä¹Ÿå¯ä»¥å«åšstageã€‚æš‚å­˜åŒºæ˜¯ä¸€ä¸ªä¸´æ—¶ä¿å­˜ä¿®æ”¹æ–‡ä»¶çš„åœ°æ–¹</li>
</ul>
<h2 data-id="heading-0">æµç¨‹</h2>
<ol>
<li>åˆå§‹åŒ–é¡¹ç›®</li>
</ol>
<pre><code class="hljs language-bash" lang="bash">git init
</code></pre>
<ol start="2">
<li>æ·»åŠ ä¸€ä¸ªæ–‡ä»¶ï¼Œå¹¶æŸ¥çœ‹å½“å‰gitçŠ¶æ€</li>
</ol>
<p>æ·»åŠ äº† 1.txtï¼Œè¾“å…¥å‘½ä»¤ git statusï¼Œå¯ä»¥çœ‹åˆ°æç¤ºæœªæ·»åŠ çš„æ–‡ä»¶</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/84afcab38fb744fd9ff2423a8e79d0ea~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOq6YeM55qE56C05rC055O2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768710289&amp;x-signature=j4JTXYlmKEvmURsDrfhYEuRgW58%3D" alt="image.png" loading="lazy"/></p>
<pre><code class="hljs language-txt" lang="txt">$ git status
On branch master

No commits yet

Untracked files:
  (use "git add &lt;file&gt;..." to include in what will be committed)
        1.txt

nothing added to commit but untracked files present (use "git add" to track)
</code></pre>
<ol start="3">
<li>å°† 1.txt æ·»åŠ åˆ°æš‚å­˜åŒº</li>
</ol>
<pre><code class="hljs language-bash" lang="bash">git add 1.txt
</code></pre>
<p>æ­¤æ—¶å†è¾“å…¥ git statusï¼Œå¯ä»¥çœ‹åˆ°æœ‰ä¸€ä¸ªéœ€è¦æäº¤çš„ä¿®æ”¹ã€‚</p>
<pre><code class="hljs language-txt" lang="txt">$ git status
On branch master

No commits yet

Changes to be committed:
  (use "git rm --cached &lt;file&gt;..." to unstage)
        new file:   1.txt
</code></pre>
<p>æ­¤å¤–æš‚å­˜åŒºæœ‰æ–‡ä»¶çš„æƒ…å†µä¸‹ï¼Œ.git ç›®å½•çš„indexä¼šå‡ºç°</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/28099889771540f6bc1808ca17e7a1dd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOq6YeM55qE56C05rC055O2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768710289&amp;x-signature=1h%2FLZebu4%2FaMEUO2u98n8M1JkuY%3D" alt="image.png" loading="lazy"/></p>
<ol start="4">
<li>æäº¤åˆ°æœ¬åœ°ä»“åº“</li>
</ol>
<pre><code class="hljs language-bash" lang="bash">git commit -m <span class="hljs-string">'ç¬¬ä¸€æ¬¡æäº¤'</span>
</code></pre>
<p>å¯ä»¥çœ‹åˆ°ä¸€ä¸ªæ–‡ä»¶å·²ç»æäº¤</p>
<pre><code class="hljs language-txt" lang="txt">[master (root-commit) 310cc1d] ç¬¬ä¸€æ¬¡æäº¤
 1 file changed, 0 insertions(+), 0 deletions(-)
 create mode 100644 1.txt
</code></pre>
<p>æŸ¥çœ‹è£…å¡«ï¼Œå¯ä»¥çœ‹åˆ° working tree cleanï¼Œéå¸¸å¹²å‡€</p>
<pre><code class="hljs language-txt" lang="txt">$ git status
On branch master
nothing to commit, working tree clean
</code></pre>
<ol start="5">
<li>æŸ¥çœ‹æäº¤æ—¥å¿—</li>
</ol>
<pre><code class="hljs language-bash" lang="bash">git <span class="hljs-built_in">log</span>
</code></pre>
<p>å¯ä»¥çœ‹åˆ°æäº¤æ—¥å¿—</p>
<pre><code class="hljs language-txt" lang="txt">$ git log
commit 310cc1d6a65e773e63e5d86459733c9cd8f9c6ec (HEAD -&gt; master)
Author: GKUN &lt;405015@qq.com&gt;
Date:   Fri Jan 9 11:52:37 2026 +0800
</code></pre>
<p>ç®€ä»‹çš„ä¿¡æ¯ reflog</p>
<pre><code class="hljs language-txt" lang="txt">$ git reflog
310cc1d (HEAD -&gt; master) HEAD@{0}: commit (initial): ç¬¬ä¸€æ¬¡æäº¤
</code></pre>
<h2 data-id="heading-1">ä¿®æ”¹æ–‡ä»¶åæäº¤</h2>
<p>ä¿®æ”¹æ–‡ä»¶åï¼Œé‡æ–°æŸ¥çœ‹çŠ¶æ€ï¼Œå¯ä»¥çœ‹åˆ° modified:   1.txt</p>
<pre><code class="hljs language-txt" lang="txt">$ git status
On branch master
Changes to be committed:
  (use "git restore --staged &lt;file&gt;..." to unstage)
        new file:   2.txt

Changes not staged for commit:
  (use "git add &lt;file&gt;..." to update what will be committed)
  (use "git restore &lt;file&gt;..." to discard changes in working directory)
        modified:   1.txt
</code></pre>
<p>æ¢å¤åˆ°æŒ‡å®šç‰ˆæœ¬</p>
<pre><code class="hljs language-bash" lang="bash">git reset --hard 5767f7f87fa39cdf77ecad84597e7e272125836e
</code></pre>
<h2 data-id="heading-2">å–æ¶ˆ / æš‚å­˜åŒº</h2>
<p>å–æ¶ˆæš‚å­˜åŒºï¼Œè¿”å›å‘½ä»¤</p>
<pre><code class="hljs language-bash" lang="bash">git reset
</code></pre>
<p><strong>å¿½ç•¥æ–‡ä»¶</strong></p>
<p>å¿½ç•¥æ–‡ä»¶åˆ—è¡¨è¢«å­˜æ”¾åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸­ä¸€ä¸ªè¢«ç§°ä¹‹ä¸º .gitignore çš„æ–‡ä»¶ä¸­ã€‚</p>
<p>å¿½ç•¥æ–‡ä»¶çš„è§„åˆ™</p>
<ul>
<li>å¿½ç•¥ä¸€ä¸ªç‰¹å®šçš„æ–‡ä»¶ï¼špath/file.ext</li>
<li>å¿½ç•¥é¡¹ç›®ä¸‹æ‰€æœ‰è¿™ä¸ªåå­—çš„æ–‡ä»¶ï¼šfilename.ext</li>
<li>å¿½ç•¥é¡¹ç›®ä¸‹æ‰€æœ‰è¿™ä¸ªç±»å‹çš„æ–‡ä»¶ï¼š*.class</li>
<li>å¿½ç•¥ä¸€ä¸ªç‰¹å®šç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ï¼štarget/*</li>
</ul>
<h2 data-id="heading-3">è¿œç¨‹æ¨é€ / è¿œç¨‹æ‹‰å–</h2>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ·»åŠ å…³è”çš„è¿œç¨‹ä»“åº“</span>
$ git remote add origin https://gitee.com/casw222/td1.git

<span class="hljs-comment"># æŸ¥çœ‹å…³è”çš„ä»“åº“</span>
$ git remote
origin

$ git remote -v
origin  https://gitee.com/casw222/td1.git (fetch)
origin  https://gitee.com/casw222/td1.git (push)

<span class="hljs-comment"># ç§»é™¤å…³è”çš„è¿œç¨‹ä»“åº“</span>
git remote remove origin  
</code></pre>
<blockquote>
<p>æ¨é€åˆ°è¿œç¨‹åˆ†æ”¯ä¸»ï¼Œä¼šå¼¹å‡ºæ¥ç™»å½•</p>
</blockquote>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ¨é€åˆ°è¿œç¨‹åˆ†æ”¯ä¸»</span>
$ git push origin master
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/755eff61fe4d4a76ba89e7b4f0a518f1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOq6YeM55qE56C05rC055O2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768710289&amp;x-signature=ai1DRLqi0ICnMpBv%2FVnCpBcQUhU%3D" alt="image.png" loading="lazy"/></p>
<blockquote>
<p>è¿œç¨‹æ‹‰å–</p>
</blockquote>
<pre><code class="hljs language-bash" lang="bash">git <span class="hljs-built_in">clone</span> https://gitee.com/casw222/td1.git
</code></pre>
<p>æ‹‰å–æœ€æ–°çš„ä»£ç </p>
<pre><code class="hljs language-bash" lang="bash">git pull origin master
</code></pre>
<p>æ³¨æ„ï¼šå¦‚æœå½“å‰æœ¬åœ°ä»“åº“ä¸æ˜¯ä»è¿œç¨‹ä»“åº“å…‹éš†çš„ï¼Œè€Œæ˜¯æœ¬åœ°åˆ›å»ºçš„ä»“åº“ï¼Œå¹¶ä¸”ä»“åº“ä¸­å­˜åœ¨æ–°æ–‡ä»¶ï¼Œæ­¤æ—¶å†ä»è¿œç¨‹ä»“åº“æ‹‰å–æ–‡ä»¶çš„æ—¶å€™ä¼šæŠ¥é”™ï¼ˆfatal: refusing to merge unrelated historiesï¼‰</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b6cde77d33f94bf19d85766abb3ac707~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOq6YeM55qE56C05rC055O2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768710289&amp;x-signature=fk145bKDOt96Vf7%2FXTOXK03RGjw%3D" alt="image.png" loading="lazy"/></p>
<p>è§£å†³æ­¤é—®é¢˜å¯ä»¥åœ¨ git pullå‘½ä»¤ååŠ å…¥å‚æ•°--allow-unrelated-histories</p>
<h2 data-id="heading-4">åˆ†æ”¯</h2>
<ul>
<li>åˆ†æ”¯æ˜¯Gitä¸­çš„ä¸€ä¸ªéå¸¸é‡è¦çš„æ¦‚å¿µã€‚ä½¿ç”¨åˆ†æ”¯æ„å‘³ç€ä½ å¯ä»¥æŠŠä½ çš„å·¥ä½œä»å¼€å‘ä¸»çº¿ä¸Šåˆ†ç¦»å¼€æ¥ï¼Œä»¥å…å½±å“å¼€å‘ä¸»çº¿</li>
<li>åŒä¸€ä¸ªä»“åº“å¯ä»¥æœ‰å¤šä¸ªåˆ†æ”¯ï¼Œå„ä¸ªåˆ†æ”¯ç›¸äº’ç‹¬ç«‹ï¼Œäº’ä¸å¹²æ‰°ã€‚</li>
<li>é€šè¿‡ git init å‘½ä»¤åˆ›å»ºæœ¬åœ°ä»“åº“æ—¶é»˜è®¤ä¼šåˆ›å»ºä¸€ä¸ª master åˆ†æ”¯ã€‚</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d75aea7f6fa64a5d8b973b0e5e0abfa2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOq6YeM55qE56C05rC055O2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768710289&amp;x-signature=RwGa9nkjcizyPjjRMbVZoKs%2FBCs%3D" alt="image.png" loading="lazy"/></p>
<p>HEADæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å¼•ç”¨ï¼ˆreferenceï¼‰ï¼Œå®ƒæŒ‡å‘å½“å‰åˆ†æ”¯çš„æœ€æ–°æäº¤ï¼ˆcommitï¼‰ã€‚HEADæ ‡è¯†äº†å½“å‰åˆ†æ”¯ä¸­å·¥ä½œçš„åŸºç¡€ç‚¹ï¼Œå³ä½ æœ€è¿‘ä¸€æ¬¡æäº¤çš„åœ°æ–¹
å…³é”®æ­¥éª¤æµç¨‹å¦‚ä¸‹ï¼š</p>
<ol>
<li>åˆ›å»ºåˆ†æ”¯ï¼šä»ä¸»åˆ†æ”¯ï¼ˆå¦‚masterï¼‰å‡ºå‘ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„åˆ†æ”¯ï¼ˆå¦‚v1ï¼‰ã€‚è¿™å…è®¸å¼€å‘è€…åœ¨æ–°çš„åˆ†æ”¯ä¸Šè‡ªç”±åœ°è¿›è¡Œä»£ç ä¿®æ”¹ï¼Œè€Œä¸å¿…æ‹…å¿ƒè¿™äº›ä¿®æ”¹ä¼šç«‹å³å½±å“åˆ°ä¸»åˆ†æ”¯æˆ–å…¶ä»–å›¢é˜Ÿæˆå‘˜çš„å·¥ä½œã€‚</li>
<li>ç‹¬ç«‹å¼€å‘ï¼šåœ¨v1åˆ†æ”¯ä¸Šï¼Œå¼€å‘è€…å¯ä»¥è‡ªç”±åœ°ç¼–å†™ä»£ç ã€æµ‹è¯•åŠŸèƒ½ï¼Œç”šè‡³è¿›è¡Œå¤šæ¬¡æäº¤ï¼Œæ‰€æœ‰è¿™äº›æ“ä½œéƒ½ç‹¬ç«‹äºä¸»åˆ†æ”¯ã€‚</li>
<li>åˆå¹¶åˆ†æ”¯ï¼šå½“v1åˆ†æ”¯ä¸Šçš„å¼€å‘å®Œæˆåï¼Œå¼€å‘è€…å¯ä»¥é€‰æ‹©å°†v1åˆ†æ”¯çš„æ›´æ”¹åˆå¹¶å›ä¸»åˆ†æ”¯ã€‚è¿™ç¡®ä¿äº†ä¸»åˆ†æ”¯èƒ½å¤ŸåŒ…å«æ‰€æœ‰æœ€æ–°çš„åŠŸèƒ½å’Œä¿®å¤ï¼ŒåŒæ—¶ä¿æŒäº†ä»£ç çš„æ•´æ´å’Œä¸€è‡´æ€§ã€‚</li>
<li>çµæ´»ç®¡ç†ï¼šGitçš„åˆ†æ”¯æœºåˆ¶è¿˜å…è®¸å¼€å‘è€…åœ¨éœ€è¦æ—¶è½»æ¾åœ°åˆ‡æ¢åˆ†æ”¯ï¼Œæ¯”å¦‚ä»v1åˆ†æ”¯åˆ‡æ¢åˆ°masteråˆ†æ”¯æŸ¥çœ‹æˆ–å¤„ç†å…¶ä»–äº‹åŠ¡ï¼Œç„¶åå†åˆ‡æ¢å›v1åˆ†æ”¯ç»§ç»­å·¥ä½œï¼ˆHEADçš„ä½œç”¨ï¼‰</li>
</ol>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åˆ—å‡ºæ‰€æœ‰æœ¬åœ°åˆ†æ”¯</span>
git branch
<span class="hljs-comment"># åˆ—å‡ºæ‰€æœ‰è¿œç¨‹åˆ†æ”¯</span>
git branch -r
<span class="hljs-comment"># åˆ—å‡ºæ‰€æœ‰æœ¬åœ°åˆ†æ”¯å’Œè¿œç¨‹åˆ†æ”¯</span>
git branch -a

<span class="hljs-comment"># åˆ›å»ºåˆ†æ”¯</span>
git branch åˆ†æ”¯åç§°
<span class="hljs-comment"># åˆ‡æ¢åˆ†æ”¯</span>
git checkout åˆ†æ”¯åç§°
<span class="hljs-comment"># å°†åˆ†æ”¯æ¨é€è‡³è¿œç¨‹ä»“åº“</span>
git push è¿œç¨‹ä»“åº“ç®€ç§° åˆ†æ”¯åç§°
</code></pre>
<blockquote>
<p>åˆå¹¶åˆ†æ”¯</p>
</blockquote>
<p>æ“ä½œæ­¥éª¤ï¼š</p>
<ul>
<li>åœ¨b1åˆ†æ”¯ä¸­åˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶b1.txtæ–‡ä»¶</li>
<li>ä½¿ç”¨git add æ·»åŠ åˆ°æš‚å­˜åŒº</li>
<li>ä½¿ç”¨git commit å‘½ä»¤æäº¤åˆ°æœ¬åœ°ä»“åº“</li>
<li>ä½¿ç”¨git checkout å‘½ä»¤åˆ‡æ¢åˆ°masteråˆ†æ”¯</li>
<li>ä½¿ç”¨git merge å‘½ä»¤æ¥åˆå¹¶ä¸¤ä¸ªåˆ†æ”¯</li>
</ul>
<h2 data-id="heading-5">åˆ†æ”¯åˆ›å»ºè§„åˆ™</h2>
<p>åœ¨é¡¹ç›®å¼€å‘ä¸­ï¼Œéµå®ˆGitåˆ†æ”¯çš„åˆ›å»ºè§„åˆ™é€šå¸¸æ˜¯ä¸ºäº†æé«˜å›¢é˜Ÿåä½œæ•ˆç‡ã€ä»£ç è´¨é‡ä»¥åŠç‰ˆæœ¬ç®¡ç†çš„æ¸…æ™°åº¦ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸è§çš„Gitåˆ†æ”¯åˆ›å»ºè§„åˆ™ï¼š</p>
<ol>
<li>ä¸»åˆ†æ”¯ï¼ˆmasterï¼‰</li>
</ol>
<p>ä¸»åˆ†æ”¯æ˜¯é¡¹ç›®çš„ç¨³å®šç‰ˆæœ¬ï¼Œç”¨äºå‘å¸ƒå’Œéƒ¨ç½²ï¼Œåªæœ‰ç»è¿‡ä¸¥æ ¼æµ‹è¯•å’Œä»£ç å®¡æ ¸çš„ä»£ç æ‰èƒ½è¢«åˆå¹¶åˆ°ä¸»åˆ†æ”¯ï¼Œé€šå¸¸å‘½åä¸º<code>master</code>ï¼Œmasteråˆ†æ”¯ä»¥ tag æ ‡è®°ä¸€ä¸ªç‰ˆæœ¬ï¼Œå› æ­¤åœ¨ master åˆ†æ”¯ä¸Šçœ‹åˆ°çš„æ¯ä¸€ä¸ª tag éƒ½åº”è¯¥å¯¹åº”ä¸€ä¸ªçº¿ä¸Šç‰ˆæœ¬ã€‚</p>
<ol start="2">
<li>å¼€å‘åˆ†æ”¯ï¼ˆdevelop/devï¼‰</li>
</ol>
<p>å¼€å‘åˆ†æ”¯æ˜¯å›¢é˜Ÿè¿›è¡Œæ—¥å¸¸å¼€å‘çš„ä¸»è¦åˆ†æ”¯ï¼ŒåŒ…å«äº†é¡¹ç›®ä¸­æœ€æ–°çš„åŠŸèƒ½å’Œä»£ç ï¼Œé€šå¸¸å‘½åä¸º<code>develop</code>æˆ–<code>dev</code>ï¼Œæ¯ä¸ªæ–°åŠŸèƒ½æˆ–ä»»åŠ¡é€šå¸¸ä»è¯¥åˆ†æ”¯åˆ›å»ºç‹¬ç«‹çš„ç‰¹æ€§åˆ†æ”¯è¿›è¡Œå¼€å‘ã€‚</p>
<ol start="3">
<li>ç‰¹æ€§åˆ†æ”¯ï¼ˆfeatureï¼‰</li>
</ol>
<p>ç‰¹æ€§åˆ†æ”¯ç”¨äºå¼€å‘ç‰¹å®šçš„åŠŸèƒ½ï¼Œæ¯ä¸ªæ–°åŠŸèƒ½æˆ–ä»»åŠ¡éƒ½åº”åœ¨ä»developåˆ†æ”¯åˆ›å»ºçš„<code>feature/xxx</code>å½¢å¼çš„ç‰¹æ€§åˆ†æ”¯ä¸Šè¿›è¡Œå¼€å‘å’Œæµ‹è¯•ï¼Œå¼€å‘å®Œæˆååˆå¹¶å› develop åˆ†æ”¯å¹¶ä¸”åˆ é™¤è¯¥ feature/xxx åˆ†æ”¯ã€‚</p>
<ol start="4">
<li>é¢„å‘å¸ƒåˆ†æ”¯ï¼ˆreleaseï¼‰</li>
</ol>
<p>é¢„å‘å¸ƒåˆ†æ”¯ç”¨äºå‡†å¤‡å‘å¸ƒæ–°ç‰ˆæœ¬ï¼Œè¿›è¡Œæœ€åçš„æµ‹è¯•å’Œè°ƒæ•´ï¼Œä» develop åˆ†æ”¯åˆ›å»ºä»¥ç¡®ä¿ä»£ç ç¨³å®šï¼Œå‘½åæ ¼å¼ä¸º<code>release/xxx</code>ï¼Œå…¶ä¸­xxxæ˜¯å…·ä½“çš„ç‰ˆæœ¬å·ï¼Œåˆ›å»ºå¥½ release åˆ†æ”¯åéœ€è¦å¯¹è¦å‘å¸ƒçš„åŠŸèƒ½è¿›è¡Œæœ€åçš„æµ‹è¯•ï¼Œå¦‚æœæµ‹è¯•è¿‡ç¨‹ä¸­è‹¥å­˜åœ¨bugéœ€è¦ä¿®å¤ï¼Œåˆ™ç›´æ¥ç”±å¼€å‘è€…åœ¨releaseåˆ†æ”¯ä¿®å¤å¹¶æäº¤ã€‚æµ‹è¯•å®Œæˆä¹‹åï¼Œå°† release åˆ†æ”¯åˆå¹¶åˆ° master å’Œ develop åˆ†æ”¯ï¼Œæ­¤æ—¶ master ä¸ºæœ€æ–°ä»£ç ï¼Œç”¨ä½œä¸Šçº¿ã€‚</p>
<ol start="5">
<li>ä¿®å¤åˆ†æ”¯ï¼ˆhotfix/bugfixï¼‰</li>
</ol>
<p>ä¿®å¤åˆ†æ”¯ç”¨äºè§£å†³çº¿ä¸Šç´§æ€¥bugæˆ–ä¿®å¤å·²çŸ¥é—®é¢˜ï¼Œä» master åˆ†æ”¯åˆ›å»ºä»¥ç¡®ä¿ä¿®å¤ä»£ç ç›´æ¥åº”ç”¨äºç¨³å®šç‰ˆæœ¬ï¼Œå‘½åæ ¼å¼ä¸º<code>hotfix/xxx</code>æˆ–<code>bugfix/xxx</code> ï¼Œå®Œæˆbugä¿®å¤åå°†ä»£ç åˆå¹¶åˆ°masteråˆ†æ”¯å’Œdevelopåˆ†æ”¯ï¼Œåˆå¹¶å®Œæˆåå¯ä»¥åˆ é™¤è¯¥åˆ†æ”¯ã€‚</p>
<p>ä»¥ä¸Šå°±æ˜¯åœ¨é¡¹ç›®ä¸­åº”è¯¥å‡ºç°çš„åˆ†æ”¯ä»¥åŠæ¯ä¸ªåˆ†æ”¯åŠŸèƒ½çš„è¯´æ˜ï¼Œå…¶ä¸­é•¿æœŸç¨³å®šå­˜åœ¨çš„åˆ†æ”¯åªæœ‰ master å’Œ develop åˆ†æ”¯ï¼Œåˆ«çš„åˆ†æ”¯åœ¨å®Œæˆå¯¹åº”çš„ä½¿å‘½ä¹‹åéƒ½ä¼šåˆå¹¶åˆ°è¿™ä¸¤ä¸ªåˆ†æ”¯ç„¶åè¢«åˆ é™¤ã€‚ç®€å•æ€»ç»“å¦‚ä¸‹ï¼š</p>
<p>master åˆ†æ”¯: çº¿ä¸Šç¨³å®šç‰ˆæœ¬åˆ†æ”¯</p>
<p>develop åˆ†æ”¯: å¼€å‘åˆ†æ”¯ï¼Œè¡ç”Ÿå‡º feature åˆ†æ”¯å’Œ release åˆ†æ”¯</p>
<p>feature åˆ†æ”¯: åŠŸèƒ½åˆ†æ”¯ï¼Œå®Œæˆç‰¹å®šåŠŸèƒ½å¼€å‘çš„åˆ†æ”¯ï¼Œå­˜åœ¨å¤šä¸ªï¼ŒåŠŸèƒ½åˆå¹¶ä¹‹ååˆ é™¤</p>
<p>release åˆ†æ”¯: é¢„å‘å¸ƒåˆ†æ”¯ï¼Œå‡†å¤‡å¾…å‘å¸ƒç‰ˆæœ¬çš„åˆ†æ”¯ï¼Œå­˜åœ¨å¤šä¸ªï¼Œç‰ˆæœ¬å‘å¸ƒä¹‹ååˆ é™¤</p>
<p>hotfix åˆ†æ”¯: ç´§æ€¥çƒ­ä¿®å¤åˆ†æ”¯ï¼Œå­˜åœ¨å¤šä¸ªï¼Œç´§æ€¥ç‰ˆæœ¬å‘å¸ƒä¹‹ååˆ é™¤</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/287e3217986b412ba5cf5f8a6e15c363~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOq6YeM55qE56C05rC055O2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768710289&amp;x-signature=HT2oK%2BZJPO2uEwcgxNzrlwmZoX8%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-6">å†²çªè§£å†³</h2>
<ul>
<li>å¤šäººåŒæ—¶ä¿®æ”¹åŒä¸€æ–‡ä»¶ï¼šä¸€ä¸ªé¡¹ç›®æ˜¯ç”±ä¸€ä¸ªå›¢é˜Ÿå¼€å‘ï¼Œå¦‚æœå¤šä¸ªå¼€å‘äººå‘˜åŒæ—¶å¯¹åŒä¸€ä¸ªæ–‡ä»¶çš„ç›¸åŒéƒ¨åˆ†è¿›è¡Œä¿®æ”¹ï¼Œå¹¶å°è¯•æäº¤è¿™äº›ä¿®æ”¹æ—¶ï¼ŒGitæ— æ³•è‡ªåŠ¨åˆå¹¶è¿™äº›æ›´æ”¹ï¼Œä»è€Œå¯¼è‡´å†²çªã€‚</li>
<li>åˆå¹¶åˆ†æ”¯æ—¶ï¼šå½“å°è¯•å°†ä¸¤ä¸ªä¸åŒçš„åˆ†æ”¯åˆå¹¶åˆ°ä¸€ä¸ªå…¬å…±åˆ†æ”¯ï¼ˆå¦‚ä¸»åˆ†æ”¯ï¼‰æˆ–è€…å°è¯•å°†å…¶ä»–åˆ†æ”¯çš„ä»£ç åˆå¹¶åˆ°å½“å‰åˆ†æ”¯æ—¶ï¼Œå¦‚æœè¿™äº›åˆ†æ”¯å¯¹åŒä¸€ä¸ªæ–‡ä»¶è¿›è¡Œäº†ä¸åŒçš„ä¿®æ”¹ï¼ŒGitåœ¨åˆå¹¶è¿™äº›æ›´æ”¹æ—¶å¯èƒ½ä¼šäº§ç”Ÿå†²çªã€‚</li>
<li>é‡å‘½åæˆ–ç§»åŠ¨æ–‡ä»¶ï¼šå¦‚æœåœ¨ä¸€ä¸ªåˆ†æ”¯ä¸­é‡å‘½åæˆ–ç§»åŠ¨äº†æ–‡ä»¶ï¼Œè€Œåœ¨å¦ä¸€ä¸ªåˆ†æ”¯ä¸­å¯¹åŸå§‹æ–‡ä»¶è¿›è¡Œäº†ä¿®æ”¹ï¼Œé‚£ä¹ˆåœ¨åˆå¹¶è¿™äº›åˆ†æ”¯æ—¶å¯èƒ½ä¼šäº§ç”Ÿå†²çªã€‚</li>
<li>åˆ é™¤æ–‡ä»¶ï¼šå¦‚æœä¸€ä¸ªåˆ†æ”¯åˆ é™¤äº†æŸä¸ªæ–‡ä»¶ï¼Œè€Œå¦ä¸€ä¸ªåˆ†æ”¯å¯¹è¯¥æ–‡ä»¶è¿›è¡Œäº†ä¿®æ”¹ï¼Œåˆå¹¶æ—¶ä¹Ÿä¼šå‘ç”Ÿå†²çªã€‚</li>
</ul>
<ol>
<li>æŸ¥çœ‹å†²çªï¼š</li>
</ol>
<ul>
<li>ä½¿ç”¨<code>git status</code>å‘½ä»¤æŸ¥çœ‹å“ªäº›æ–‡ä»¶å­˜åœ¨å†²çªã€‚</li>
<li>ä½¿ç”¨<code>git diff</code>å‘½ä»¤æŸ¥çœ‹å†²çªæ–‡ä»¶çš„å·®å¼‚ã€‚</li>
</ul>
<ol start="2">
<li>
<p>æ‰‹åŠ¨è§£å†³å†²çªï¼š</p>
</li>
<li>
<p>æ‰‹åŠ¨è§£å†³å†²çª</p>
</li>
</ol>
<ul>
<li>æ‰“å¼€å†²çªæ–‡ä»¶ï¼Œæ‰¾åˆ°è¢«Gitæ ‡è®°çš„å†²çªéƒ¨åˆ†ã€‚é€šå¸¸ï¼ŒGitä¼šç”¨<code>&lt;&lt;&lt;&lt;&lt;&lt;&lt;</code>ã€<code>=======</code>å’Œ<code>&gt;&gt;&gt;&gt;&gt;&gt;&gt;</code>è¿™æ ·çš„æ ‡è®°æ¥æŒ‡ç¤ºå†²çªçš„å¼€å§‹ã€å½“å‰åˆ†æ”¯çš„æ›´æ”¹ã€å¦ä¸€ä¸ªåˆ†æ”¯çš„æ›´æ”¹å’Œå†²çªçš„ç»“æŸã€‚</li>
<li>æ‰‹åŠ¨ç¼–è¾‘å†²çªéƒ¨åˆ†ï¼Œæ ¹æ®éœ€è¦ä¿ç•™æˆ–åˆå¹¶ä¸åŒçš„æ›´æ”¹ã€‚</li>
<li>åˆ é™¤Gitçš„å†²çªæ ‡è®°ï¼ˆ&lt;&lt;&lt;&lt;&lt;&lt;&lt;ã€=======ã€&gt;&gt;&gt;&gt;&gt;&gt;&gt;ï¼‰ã€‚</li>
</ul>
<ol start="4">
<li>æäº¤æ›´æ”¹ï¼š</li>
</ol>
<ul>
<li>ä½¿ç”¨git commitå‘½ä»¤æäº¤è§£å†³å†²çªåçš„æ›´æ”¹ã€‚åœ¨æäº¤ä¿¡æ¯ä¸­ï¼Œå¯ä»¥ç®€è¦æè¿°è§£å†³å†²çªçš„è¿‡ç¨‹ã€‚</li>
<li>git commit -a -m 'è§£å†³å†²çª'  å…¨éƒ¨æäº¤</li>
<li>git commit abc.txt -i -m "è§£å†³å†²çª"      æäº¤éƒ¨åˆ†æ–‡ä»¶</li>
</ul>
<ol start="5">
<li>ï¼ˆå¯é€‰ï¼‰ç»§ç»­åˆå¹¶æˆ–æ¨é€ï¼š</li>
</ol>
<ul>
<li>å¦‚æœæ˜¯åœ¨åˆå¹¶åˆ†æ”¯æ—¶äº§ç”Ÿçš„å†²çªï¼Œè§£å†³å†²çªåå¯ä»¥ç»§ç»­åˆå¹¶å…¶ä»–åˆ†æ”¯ã€‚</li>
<li>å¦‚æœéœ€è¦ï¼Œå°†æ›´æ”¹æ¨é€åˆ°è¿œç¨‹ä»“åº“ã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æœºå™¨å­¦ä¹ ï¼Œæ¢¯åº¦ä¸‹é™ï¼Œæ‹Ÿåˆï¼Œæ­£åˆ™åŒ–ï¼Œæ··æ·†çŸ©é˜µ]]></title>    <link>https://juejin.cn/post/7593296804109926440</link>    <guid>https://juejin.cn/post/7593296804109926440</guid>    <pubDate>2026-01-11T04:43:31.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7593296804109926440" data-draft-id="7586957204584497188" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æœºå™¨å­¦ä¹ ï¼Œæ¢¯åº¦ä¸‹é™ï¼Œæ‹Ÿåˆï¼Œæ­£åˆ™åŒ–ï¼Œæ··æ·†çŸ©é˜µ"/> <meta itemprop="keywords" content="æœºå™¨å­¦ä¹ ,Python"/> <meta itemprop="datePublished" content="2026-01-11T04:43:31.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å“ªé‡Œçš„ç ´æ°´ç“¶"/> <meta itemprop="url" content="https://juejin.cn/user/4394111849466414"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æœºå™¨å­¦ä¹ ï¼Œæ¢¯åº¦ä¸‹é™ï¼Œæ‹Ÿåˆï¼Œæ­£åˆ™åŒ–ï¼Œæ··æ·†çŸ©é˜µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4394111849466414/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å“ªé‡Œçš„ç ´æ°´ç“¶
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-11T04:43:31.000Z" title="Sun Jan 11 2026 04:43:31 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»20åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#444;background-image:linear-gradient(90deg,rgba(59,59,59,.1) 3%,transparent 0),linear-gradient(1turn,rgba(122,120,121,.1) 3%,transparent 0);background-size:30px 30px;background-position:50%;letter-spacing:1px;word-spacing:1px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{position:relative;margin-top:34px;margin-bottom:16px;font-weight:700;line-height:1.3;cursor:text;color:#444;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body h1{font-size:41px;margin-bottom:34px;line-height:1.5}.markdown-body h1:before{content:""}.markdown-body h2{font-size:30px;padding-left:.4em;border-left:.4em solid #5e5e5e;border-bottom:1px solid #444}.markdown-body h2:after{content:"ğŸ•›";position:absolute;top:0;right:0;transition:all;animation:rotate 10s linear infinite}@keyframes rotate{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.markdown-body h3{border-left:.4em solid #8d8d8d;font-size:24px;padding-left:.4em}.markdown-body h4{font-size:20px}.markdown-body h5{font-size:16px}.markdown-body h6{font-size:14px}.markdown-body blockquote,.markdown-body dl,.markdown-body ol,.markdown-body p,.markdown-body table,.markdown-body ul{margin:.8em 0}.markdown-body strong{font-weight:1000;position:relative;color:#444;padding:0 3px}.markdown-body em{font-weight:inherit}.markdown-body a{box-sizing:border-box;color:grey;position:relative}.markdown-body a:before{position:absolute;box-sizing:border-box;content:"Go -&gt;";left:0;width:100%;max-width:0;color:#fff;background-color:hsla(0,0%,50.2%,.8);white-space:nowrap;transition:.2s ease;pointer-events:none;overflow:hidden}.markdown-body a:after{content:"";position:absolute;bottom:0;left:0;width:100%;height:1px;background-color:grey}.markdown-body a:active:before,.markdown-body a:hover:before{max-width:100%;padding-left:8px;border-radius:5px}.markdown-body hr{position:relative;width:100%;height:1px;border:none;margin-top:36px;margin-bottom:36px;background:linear-gradient(90deg,grey,#f1f1f1,#444,#444,#f1f1f1,grey);overflow:visible}.markdown-body ol,.markdown-body ul{padding-left:32px}.markdown-body ol li,.markdown-body ul li{margin-bottom:6px;list-style:inherit}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol{counter-reset:my-counter}.markdown-body ol&gt;li{padding-left:6px;list-style:none;counter-increment:my-counter;position:relative}.markdown-body ol&gt;li:before{position:absolute;left:-1.5em;content:counter(my-counter);font-weight:700}.markdown-body ol&gt;li:first-child:before{content:"1ï¸âƒ£"}.markdown-body ol&gt;li:nth-child(2):before{content:"2ï¸âƒ£"}.markdown-body ol&gt;li:nth-child(3):before{content:"3ï¸âƒ£"}.markdown-body ol&gt;li:nth-child(4):before{content:"4ï¸âƒ£"}.markdown-body ol&gt;li:nth-child(5):before{content:"5ï¸âƒ£"}.markdown-body ol&gt;li:nth-child(6):before{content:"6ï¸âƒ£"}.markdown-body ol&gt;li:nth-child(7):before{content:"7ï¸âƒ£"}.markdown-body ol&gt;li:nth-child(8):before{content:"8ï¸âƒ£"}.markdown-body ol&gt;li:nth-child(9):before{content:"9ï¸âƒ£"}.markdown-body ol&gt;li:nth-child(10):before{content:"ğŸ”Ÿ"}.markdown-body ul&gt;li{list-style:none;position:relative}.markdown-body ul&gt;li:before{z-index:10;position:absolute;left:-1.57em;content:"ğŸ”¹";margin-right:12px}.markdown-body ul&gt;li input{margin-left:8px!important}.markdown-body blockquote{position:relative;background-color:#d3d3d3;padding:5px 10px;border-left:.2em solid #000;border-radius:3px;transition:all .8s ease}.markdown-body blockquote:hover{opacity:.7}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(69,69,77,.8);color:#fff;font-size:.87em;padding:.07em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;border-radius:7px;overflow:hidden}.markdown-body pre:before{z-index:10;position:absolute;top:14px;left:14px;width:12px;height:12px;border-radius:50%;background:#fc625d;-webkit-box-shadow:20px 0 #fdbc40,40px 0 #35cd4b;box-shadow:20px 0 #fdbc40,40px 0 #35cd4b;content:" "}.markdown-body pre:after{z-index:9;content:"";position:absolute;width:100%;height:40px;top:0;background-color:#1a1a1a}.markdown-body pre&gt;code{display:block;font-family:Menlo,Monaco,Consolas,Courier New,monospace;word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#171717;color:#bababa;font-size:14px;padding:40px 20px 20px}.markdown-body del{color:grey}.markdown-body table{margin-bottom:1.25rem;border-collapse:collapse}.markdown-body table td,.markdown-body table th{margin:0;padding:8px;line-height:20px;vertical-align:middle;border:1px solid #ddd}.markdown-body table thead,.markdown-body table tr:nth-child(2n){background-color:#fcfcfc}.markdown-body table thead th,.markdown-body table tr:nth-child(2n) th{font-weight:700;vertical-align:middle;color:#444}.markdown-body table tbody tr td{font-weight:400;color:#444}.markdown-body table tbody tr:hover{background-color:#d3d3d3}.markdown-body table tbody tr:hover td{color:#fff}.markdown-body img{max-width:100%;margin:0 12px}@media (max-width:720px){.markdown-body h1{font-size:32.8px}.markdown-body h2{font-size:24px}.markdown-body h3{font-size:19.2px}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:12.8px}}</style><style data-highlight="" data-highlight-key="a11y-dark">.hljs-comment,.hljs-quote{color:#d4d0ab}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#ffa07a}.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#f5ab35}.hljs-attribute{color:gold}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:#abe338}.hljs-section,.hljs-title{color:#00e0e0}.hljs-keyword,.hljs-selector-tag{color:#dcc6e0}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#2b2b2b;color:#f8f8f2}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}@media screen and (-ms-high-contrast:active){.hljs-addition,.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-comment,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-quote,.hljs-string,.hljs-symbol,.hljs-type{color:highlight}.hljs-keyword,.hljs-selector-tag{font-weight:700}}</style><h2 data-id="heading-0">æ¢¯åº¦ä¸‹é™</h2>
<blockquote>
<p>ä»€ä¹ˆæ˜¯æ¢¯åº¦ä¸‹é™æ³•</p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/49fd4aa37a954e758bccc28811837952~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOq6YeM55qE56C05rC055O2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768711840&amp;x-signature=6RIa5iX3PNJAAHYPUiBgwHtvnE0%3D" alt="image.png" loading="lazy"/></p>
<ul>
<li>æ¢¯åº¦ä¸‹é™è¿‡ç¨‹å°±å’Œä¸‹å±±åœºæ™¯ç±»ä¼¼</li>
<li>å¯å¾®åˆ†çš„æŸå¤±å‡½æ•°ï¼Œä»£è¡¨ç€ä¸€åº§å±±</li>
<li>å¯»æ‰¾çš„å‡½æ•°çš„æœ€å°å€¼ï¼Œä¹Ÿå°±æ˜¯å±±åº•</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/39853755c26d4390b3d39516ab0a12ee~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOq6YeM55qE56C05rC055O2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768711840&amp;x-signature=Bc3PmGoPycWaR%2FiwhF0qSFFImrA%3D" alt="image.png" loading="lazy"/></p>
<ul>
<li>å•å˜é‡å‡½æ•°ä¸­ï¼Œæ¢¯åº¦å°±æ˜¯æŸä¸€ç‚¹åˆ‡çº¿æ–œç‡ï¼ˆæŸä¸€ç‚¹çš„å¯¼æ•°ï¼‰ï¼›æœ‰æ–¹å‘ä¸ºå‡½æ•°å¢é•¿æœ€å¿«çš„æ–¹å‘</li>
<li>å¤šå˜é‡å‡½æ•°ä¸­ï¼Œæ¢¯åº¦å°±æ˜¯æŸä¸€ä¸ªç‚¹çš„åå¯¼æ•°ï¼›æœ‰æ–¹å‘ï¼šåå¯¼æ•°åˆ†é‡çš„å‘é‡æ–¹å‘</li>
</ul>
<blockquote>
<p>æ¢¯åº¦ä¸‹é™å…¬å¼</p>
</blockquote>
<ul>
<li>å¾ªç¯è¿­ä»£æ±‚å½“å‰ç‚¹çš„æ¢¯åº¦ï¼Œæ›´æ–°å½“å‰çš„æƒé‡å‚æ•°</li>
<li>Î±: å­¦ä¹ ç‡(æ­¥é•¿)  ä¸èƒ½å¤ªå¤§, ä¹Ÿä¸èƒ½å¤ªå°. æœºå™¨å­¦ä¹ ä¸­ï¼š0.001 ~ 0.01</li>
<li>æ¢¯åº¦æ˜¯ä¸Šå‡æœ€å¿«çš„æ–¹å‘, æˆ‘ä»¬éœ€è¦æ˜¯ä¸‹é™æœ€å¿«çš„æ–¹å‘, æ‰€ä»¥éœ€è¦åŠ è´Ÿå·</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4610fedd028845108cd6113466563a60~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOq6YeM55qE56C05rC055O2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768711840&amp;x-signature=Bfe0a4TvK%2BCXdD%2Bhu%2B1vYU68MfA%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-1">å•å˜é‡æ¢¯åº¦ä¸‹é™</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/eeb600c5d6264b45a066f4aa331f29e0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOq6YeM55qE56C05rC055O2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768711840&amp;x-signature=wjwImpt7orv5%2Fj6Y2xFTYFakP7k%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-2">å¤šå˜é‡æ¢¯åº¦ä¸‹é™</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a5f3b05e1ebf433fa10ca8e9e51c12c3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOq6YeM55qE56C05rC055O2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768711840&amp;x-signature=iLpITN6kCOBL1OmG8W1aQeDXzDA%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ada57cb488914380a09285be3ff7ab39~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOq6YeM55qE56C05rC055O2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768711840&amp;x-signature=UoSYDjC03Kr%2F43C5am8QfuU%2B8No%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-3">å¯¹æ¯”</h3>
<p>æ¢¯åº¦ä¸‹é™æ³•ä¸æ­£è§„æ–¹ç¨‹å¯¹æ¯”</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6db8544859b74d1ca6d2d10179768902~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOq6YeM55qE56C05rC055O2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768711840&amp;x-signature=mzsnmn6brhqqAxJRfw0m%2F1mmNKc%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a713344cbe56449c81811b6ca44cffc2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOq6YeM55qE56C05rC055O2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768711840&amp;x-signature=K%2FbP%2BgSdNtYxs5H57jv%2BxvK4%2Foo%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-4">æ¨¡å‹è¯„ä¼°</h2>
<blockquote>
<p>ä¸€èˆ¬ä½¿ç”¨ MAE å’Œ RMSE è¿™ä¸¤ä¸ªæŒ‡æ ‡</p>
</blockquote>
<p><strong>MAEå¹³å‡ç»å¯¹è¯¯å·®</strong>ååº”çš„æ˜¯çœŸå®çš„å¹³å‡è¯¯å·®ï¼Œ<strong>RMSEå‡æ–¹æ ¹è¯¯å·®</strong>ä¼šå°†è¯¯å·®å¤§çš„æ•°æ®ç‚¹æ”¾å¤§</p>
<p>MAE ä¸èƒ½ä½“ç°å‡ºè¯¯å·®å¤§çš„æ•°æ®ç‚¹ï¼Œæ™®éåˆ†å¸ƒã€‚</p>
<p>RMSEæ”¾å¤§å¤§è¯¯å·®çš„æ•°æ®ç‚¹å¯¹æŒ‡æ ‡çš„å½±å“ï¼Œä½†æ˜¯å¯¹å¼‚å¸¸æ•°æ®æ¯”è¾ƒæ•æ„Ÿï¼Œæ›´å¥½çš„çœ‹å¼‚å¸¸å€¼æƒ…å†µ</p>
<p>ç»“è®º</p>
<ul>
<li>éƒ½èƒ½åæ˜ å‡ºé¢„æµ‹å€¼å’ŒçœŸå®å€¼ä¹‹é—´çš„è¯¯å·®</li>
<li>MAEå¯¹è¯¯å·®å¤§å°ä¸æ•æ„Ÿ</li>
<li>RMSEä¼šæ”¾å¤§é¢„æµ‹è¯¯å·®è¾ƒå¤§çš„æ ·æœ¬çš„å½±å“</li>
<li>RMSEå¯¹å¼‚å¸¸æ•°æ®æ•æ„Ÿ</li>
</ul>
<h2 data-id="heading-5">æ³¢å£«é¡¿æˆ¿ä»·é¢„æµ‹</h2>
<p>æ­£è§„æ–¹ç¨‹æ³• å’Œ æ¢¯åº¦ä¸‹é™çš„åŒºåˆ«</p>
<p>ç›¸åŒç‚¹ï¼šéƒ½å¯ä»¥ç”¨æ¥æ‰¾<strong>æŸå¤±å‡½æ•°æå°å€¼</strong>ï¼Œè¯„ä¼°å›å½’æ¨¡å‹</p>
<p>ä¸åŒç‚¹ï¼š</p>
<ul>
<li>æ­£è§„æ–¹ç¨‹ï¼šä¸€æ¬¡æ€§æ±‚è§£ï¼Œèµ„æºå¼€é”€æå¤§ï¼Œé€‚åˆäºå°æ‰¹é‡å¹²å‡€çš„æ•°æ®é›†ï¼Œå¦‚æœæ•°æ®é›†æ²¡æœ‰é€†ï¼Œä¹Ÿæ— æ³•è®¡ç®—</li>
<li>æ¢¯åº¦ä¸‹é™ï¼šè¿­ä»£æ±‚è§£ï¼Œèµ„æºå¼€é”€ç›¸å¯¹è¾ƒå°ï¼Œé€‚ç”¨äºå¤§æ‰¹é‡çš„æ•°æ®é›†ï¼Œå®é™…å¼€å‘æ›´æ¨èã€‚
<ul>
<li>åˆ†ç±»</li>
<li>å…¨æ¢¯åº¦ä¸‹é™</li>
<li>éšæœºæ¢¯åº¦ä¸‹é™</li>
<li>å°æ‰¹é‡æ¢¯åº¦ä¸‹é™</li>
<li>éšæœºå¹³å‡æ¢¯åº¦ä¸‹é™</li>
</ul>
</li>
</ul>
<blockquote>
<p>è¯„ä¼°çš„æ–¹æ¡ˆ</p>
</blockquote>
<ul>
<li>æ–¹æ¡ˆ1ï¼šå¹³å‡ç»å¯¹è¯¯å·®ï¼šMean Absolute Errorï¼Œè¯¯å·®ç»å¯¹å€¼çš„å’Œçš„å¹³å‡å€¼</li>
<li>æ–¹æ¡ˆ2ï¼šå‡æ–¹è¯¯å·®ï¼šMean Squared Errorï¼Œè¯¯å·®çš„å¹³æ–¹å’Œçš„å¹³å‡å€¼</li>
<li>æ–¹æ¡ˆ3ï¼šå‡æ–¹æ ¹è¯¯å·®ï¼šRoot Mean Squared Errorï¼Œè¯¯å·®çš„å¹³æ–¹å’Œå¹³å‡å€¼çš„å¹³æ–¹æ ¹</li>
</ul>
<p>æœºå™¨å­¦ä¹ ç ”å‘æµç¨‹</p>
<ol>
<li>è·å–æ•°æ®</li>
<li>æ•°æ®é¢„å¤„ç†</li>
<li>ç‰¹å¾å·¥ç¨‹
<ul>
<li>ç‰¹å¾æå–ï¼Œç‰¹å¾é¢„å¤„ç†ï¼ˆæ ‡å‡†åŒ–ï¼Œå½’ä¸€åŒ–ï¼‰ï¼Œç‰¹å¾é™ç»´ï¼Œç‰¹å¾é€‰å–ï¼Œç‰¹å¾ç»„åˆ</li>
</ul>
</li>
<li>æ¨¡å‹è®­ç»ƒ</li>
<li>æ¨¡å‹è¯„ä¼°</li>
<li>æ¨¡å‹é¢„æµ‹</li>
</ol>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0d67df7297d74fe88b68db8144580c86~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOq6YeM55qE56C05rC055O2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768711840&amp;x-signature=V3W5EcfxjtCm3yaABs46%2B%2B6PDeQ%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-6">æ­£è§„æ–¹ç¨‹æ³•</h3>
<pre><code class="hljs language-py" lang="py"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
<span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd
<span class="hljs-keyword">from</span> skimage.metrics <span class="hljs-keyword">import</span> mean_squared_error
<span class="hljs-keyword">from</span> sklearn.linear_model <span class="hljs-keyword">import</span> LinearRegression
<span class="hljs-keyword">from</span> sklearn.metrics <span class="hljs-keyword">import</span> mean_absolute_error, root_mean_squared_error
<span class="hljs-keyword">from</span> sklearn.model_selection <span class="hljs-keyword">import</span> train_test_split
<span class="hljs-keyword">from</span> sklearn.preprocessing <span class="hljs-keyword">import</span> StandardScaler

<span class="hljs-comment"># <span class="hljs-doctag">TODO:</span> 1. è·å–æ•°æ®</span>
data_url = <span class="hljs-string">"http://lib.stat.cmu.edu/datasets/boston"</span>
raw_df = pd.read_csv(data_url, sep=<span class="hljs-string">"\s+"</span>, skiprows=<span class="hljs-number">22</span>, header=<span class="hljs-literal">None</span>)
<span class="hljs-comment"># æ•°æ®ï¼Œç‰¹å¾</span>
data = np.hstack([raw_df.values[::<span class="hljs-number">2</span>, :], raw_df.values[<span class="hljs-number">1</span>::<span class="hljs-number">2</span>, :<span class="hljs-number">2</span>]])
<span class="hljs-comment"># æ ‡ç­¾</span>
target = raw_df.values[<span class="hljs-number">1</span>::<span class="hljs-number">2</span>, <span class="hljs-number">2</span>]

<span class="hljs-built_in">print</span>(<span class="hljs-string">f'ç‰¹å¾ï¼š<span class="hljs-subst">{<span class="hljs-built_in">len</span>(data)}</span>, <span class="hljs-subst">{data[:<span class="hljs-number">5</span>]}</span>'</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f'æ ‡ç­¾ï¼š<span class="hljs-subst">{<span class="hljs-built_in">len</span>(target)}</span>, <span class="hljs-subst">{target[:<span class="hljs-number">5</span>]}</span>'</span>)

<span class="hljs-comment"># <span class="hljs-doctag">TODO:</span> 2. åˆ’åˆ†æ•°æ®é›†</span>
x_train, x_test, y_train, y_test = train_test_split(data, target, test_size=<span class="hljs-number">0.2</span>, random_state=<span class="hljs-number">22</span>)

<span class="hljs-comment"># <span class="hljs-doctag">TODO:</span> 3. ç‰¹å¾å·¥ç¨‹ï¼Œç‰¹å¾æå–ï¼Œç‰¹å¾é¢„å¤„ç†(æ ‡å‡†åŒ–ï¼Œå½’ä¸€åŒ–)ï¼Œç‰¹å¾é™ç»´ï¼Œç‰¹å¾é€‰å–ï¼Œç‰¹å¾ç»„åˆ</span>
<span class="hljs-comment"># åˆ›å»ºæ ‡å‡†åŒ–å¯¹è±¡</span>
transfer = StandardScaler()
<span class="hljs-comment"># å¯¹è®­ç»ƒé›†å’Œæµ‹è¯•é›†è¿›è¡Œæ ‡å‡†åŒ–å¤„ç†</span>
x_train = transfer.fit_transform(x_train)
x_test = transfer.transform(x_test)

<span class="hljs-comment"># TODO 4. æ¨¡å‹è®­ç»ƒ</span>
<span class="hljs-comment"># åˆ›å»ºçº¿æ€§å›å½’ä¹‹æ­£è§„æ–¹ç¨‹å¯¹è±¡</span>

<span class="hljs-comment"># fit_intercept æ˜¯å¦è€ƒè™‘åç½®ï¼ˆæˆªè·ï¼‰</span>
estimator = LinearRegression(fit_intercept=<span class="hljs-literal">True</span>)
<span class="hljs-comment"># è®­ç»ƒ</span>
estimator.fit(x_train, y_train)

<span class="hljs-comment"># TODO 5. æ¨¡å‹é¢„æµ‹</span>
y_predict = estimator.predict(x_test)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f'é¢„æµ‹å€¼ï¼š<span class="hljs-subst">{y_predict}</span>'</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f'æƒé‡ï¼š<span class="hljs-subst">{estimator.coef_}</span>'</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f'åç½®ï¼š<span class="hljs-subst">{estimator.intercept_}</span>'</span>)

<span class="hljs-comment"># TODO 6. æ¨¡å‹è¯„ä¼°</span>
<span class="hljs-comment"># å‚æ•°ä¸€çœŸå®å€¼ï¼Œå‚æ•°äºŒé¢„æµ‹å€¼</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">f'å¹³å‡ç»å¯¹å€¼è¯¯å·®ï¼š<span class="hljs-subst">{mean_absolute_error(y_test, y_predict)}</span>'</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f'å‡æ–¹è¯¯å·®ï¼š<span class="hljs-subst">{mean_squared_error(y_test, y_predict)}</span>'</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f'å‡æ–¹æ ¹è¯¯å·®ï¼š<span class="hljs-subst">{root_mean_squared_error(y_test, y_predict)}</span>'</span>)
</code></pre>
<h3 data-id="heading-7">æ¢¯åº¦ä¸‹é™æ³•</h3>
<p>å¯¹äºå°æ•°æ®é›†ï¼Œæ­£è§„æ–¹ç¨‹çš„æ•ˆæœä¼šæ›´å¥½ã€‚</p>
<pre><code class="hljs language-py" lang="py"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
<span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd
<span class="hljs-keyword">from</span> skimage.metrics <span class="hljs-keyword">import</span> mean_squared_error
<span class="hljs-keyword">from</span> sklearn.linear_model <span class="hljs-keyword">import</span> SGDRegressor
<span class="hljs-keyword">from</span> sklearn.metrics <span class="hljs-keyword">import</span> mean_absolute_error, root_mean_squared_error
<span class="hljs-keyword">from</span> sklearn.model_selection <span class="hljs-keyword">import</span> train_test_split
<span class="hljs-keyword">from</span> sklearn.preprocessing <span class="hljs-keyword">import</span> StandardScaler

data_url = <span class="hljs-string">"http://lib.stat.cmu.edu/datasets/boston"</span>
raw_df = pd.read_csv(data_url, sep=<span class="hljs-string">"\s+"</span>, skiprows=<span class="hljs-number">22</span>, header=<span class="hljs-literal">None</span>)
data = np.hstack([raw_df.values[::<span class="hljs-number">2</span>, :], raw_df.values[<span class="hljs-number">1</span>::<span class="hljs-number">2</span>, :<span class="hljs-number">2</span>]])
target = raw_df.values[<span class="hljs-number">1</span>::<span class="hljs-number">2</span>, <span class="hljs-number">2</span>]

<span class="hljs-built_in">print</span>(<span class="hljs-string">f'ç‰¹å¾ï¼š<span class="hljs-subst">{<span class="hljs-built_in">len</span>(data)}</span>, <span class="hljs-subst">{data[:<span class="hljs-number">5</span>]}</span>'</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f'æ ‡ç­¾ï¼š<span class="hljs-subst">{<span class="hljs-built_in">len</span>(target)}</span>, <span class="hljs-subst">{target[:<span class="hljs-number">5</span>]}</span>'</span>)

x_train, x_test, y_train, y_test = train_test_split(data, target, test_size=<span class="hljs-number">0.2</span>, random_state=<span class="hljs-number">22</span>)

transfer = StandardScaler()
x_train = transfer.fit_transform(x_train)
x_test = transfer.transform(x_test)

<span class="hljs-comment"># fit_intercept æ˜¯å¦è€ƒè™‘åç½®ï¼ˆæˆªè·ï¼‰ï¼Œå‚æ•°2ï¼š å­¦ä¹ ç‡æ˜¯å¸¸é‡ï¼Œå‚æ•°3ï¼šå­¦ä¹ ç‡</span>
estimator = SGDRegressor(fit_intercept=<span class="hljs-literal">True</span>, learning_rate=<span class="hljs-string">'constant'</span>, eta0=<span class="hljs-number">0.001</span>)
estimator.fit(x_train, y_train)

y_predict = estimator.predict(x_test)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f'é¢„æµ‹å€¼ï¼š<span class="hljs-subst">{y_predict}</span>'</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f'æƒé‡ï¼š<span class="hljs-subst">{estimator.coef_}</span>'</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f'åç½®ï¼š<span class="hljs-subst">{estimator.intercept_}</span>'</span>)

<span class="hljs-built_in">print</span>(<span class="hljs-string">f'å¹³å‡ç»å¯¹å€¼è¯¯å·®ï¼š<span class="hljs-subst">{mean_absolute_error(y_test, y_predict)}</span>'</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f'å‡æ–¹è¯¯å·®ï¼š<span class="hljs-subst">{mean_squared_error(y_test, y_predict)}</span>'</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f'å‡æ–¹æ ¹è¯¯å·®ï¼š<span class="hljs-subst">{root_mean_squared_error(y_test, y_predict)}</span>'</span>)
</code></pre>
<h2 data-id="heading-8">æ‹Ÿåˆ</h2>
<p>æ‹Ÿåˆ</p>
<p>æŒ‡çš„æ˜¯æ¨¡å‹å’Œæ•°æ®ä¹‹é—´å­˜åœ¨å…³ç³»ï¼Œå³ï¼šé¢„æµ‹å€¼å’ŒçœŸå®å€¼ä¹‹é—´çš„å…³ç³»</p>
<p>æ¬ æ‹Ÿåˆï¼šæ¨¡å‹åœ¨è®­ç»ƒé›†ï¼Œæµ‹è¯•é›†æ ‡ç­¾éƒ½ä¸å¥½ï¼ŒåŸå› æ˜¯æ¨¡å‹è¿‡äºç®€å•äº†ã€‚</p>
<p>è¿‡æ‹Ÿåˆï¼šæ¨¡å‹åœ¨è®­ç»ƒé›†è¡¨ç°å¥½ï¼Œåœ¨æµ‹è¯•é›†è¡¨ç°ä¸å¥½ï¼ŒåŸå› æ˜¯æ¨¡å‹è¿‡äºå¤æ‚äº†ï¼Œæ•°æ®ä¸çº¯ï¼Œæ•°æ®é‡å°‘ã€‚</p>
<p>æ­£å¥½æ‹Ÿåˆ(æ³›åŒ–)ï¼Œæ¨¡å‹åœ¨è®­ç»ƒé›†ï¼Œæµ‹è¯•é›†éƒ½å¥½ã€‚</p>
<p>å¥¥å¡å§†å‰ƒåˆ€ï¼šåœ¨è¯¯å·®(æ³›åŒ–ç¨‹åº¦éƒ½ä¸€æ ·)ç›¸åŒçš„æƒ…å†µä¸‹ï¼Œä¼˜å…ˆé€‰æ‹©ç®€å•çš„æ¨¡å‹ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3d0cb400490a40c3bc26149177d4eb33~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOq6YeM55qE56C05rC055O2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768711840&amp;x-signature=7IVBi3NY48O8a45M%2FyYXHny6J7w%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-9">æ¬ æ‹Ÿåˆ</h3>
<pre><code class="hljs language-py" lang="py"><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
<span class="hljs-keyword">from</span> skimage.metrics <span class="hljs-keyword">import</span> mean_squared_error
<span class="hljs-keyword">from</span> sklearn.linear_model <span class="hljs-keyword">import</span> LinearRegression
<span class="hljs-keyword">from</span> sklearn.metrics <span class="hljs-keyword">import</span> root_mean_squared_error, mean_absolute_error

<span class="hljs-comment"># <span class="hljs-doctag">TODO:</span> è®¾ç½®éšæœºç§å­</span>
<span class="hljs-comment"># è®¾ç½®éšæœºæ•°ç§å­</span>
np.random.seed(<span class="hljs-number">666</span>)

<span class="hljs-comment"># ç”Ÿæˆ x è½´æ•°æ®ï¼Œ100 ä¸ª</span>
x = np.random.uniform(-<span class="hljs-number">3</span>, <span class="hljs-number">3</span>, size=<span class="hljs-number">100</span>)

<span class="hljs-comment"># <span class="hljs-doctag">TODO:</span> y è¿™æ ·å†™ï¼Œæ˜¯ä¸ºäº† äººä¸ºæ„é€ ä¸€ä»½æ¥è¿‘çœŸå®ä¸–ç•Œçš„æ•°æ®</span>

<span class="hljs-comment"># åŸºäºxè½´çš„å€¼ï¼Œç»“åˆçº¿æ€§å…¬å¼ï¼Œç”Ÿæˆyè½´çš„å€¼</span>
<span class="hljs-comment"># é—®é¢˜ä¸€çº¿æ€§å›å½’å…¬å¼ï¼šy = kx+bï¼Œè¿™é‡Œä¸ºäº†æ•°æ®æ›´å¥½ï¼ŒåŠ å…¥å™ªå£°...</span>
<span class="hljs-comment"># å³ï¼šy = 0.5xÂ² + x + 2 + å™ªå£°(æ­£æ€åˆ†å¸ƒç”Ÿæˆçš„éšæœºæ•°)</span>
<span class="hljs-comment"># np.random.normal(0, 1, size=100) çš„æ„æ€æ˜¯ï¼Œç”Ÿæˆæ­£æ€åˆ†å¸ƒçš„éšæœºæ•°ï¼Œå‡å€¼ä¸º0ï¼Œæ ‡å‡†å·®ä¸º1ï¼Œå¤§å°ä¸º100</span>
y = <span class="hljs-number">0.5</span> * x ** <span class="hljs-number">2</span> + x + <span class="hljs-number">2</span> + np.random.normal(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, size=<span class="hljs-number">100</span>)

<span class="hljs-built_in">print</span>(<span class="hljs-string">f'æŸ¥çœ‹æ•°æ®xï¼š<span class="hljs-subst">{x}</span>'</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f'æŸ¥çœ‹æ•°æ®é›†yï¼š<span class="hljs-subst">{y}</span>'</span>)

<span class="hljs-comment"># TODOï¼š2. æ•°æ®é¢„å¤„ç†</span>
X1 = x.reshape(-<span class="hljs-number">1</span>, <span class="hljs-number">1</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f'å¤„ç†åçš„æ•°æ®é›†Xï¼š<span class="hljs-subst">{X1}</span>'</span>)

<span class="hljs-comment"># <span class="hljs-doctag">TODO:</span> 3. åˆ›å»ºæ¨¡å‹ï¼ˆç®—æ³•ï¼‰å¯¹è±¡</span>
estimator = LinearRegression()
estimator.fit(X1, y)

<span class="hljs-comment"># <span class="hljs-doctag">TODO:</span> 4. æ¨¡å‹é¢„æµ‹</span>
y_predict = estimator.predict(X1)

<span class="hljs-comment"># <span class="hljs-doctag">TODO:</span> 5. æ¨¡å‹è¯„ä¼°</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">f'å‡æ–¹è¯¯å·®ï¼š<span class="hljs-subst">{mean_squared_error(y, y_predict)}</span>'</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f'å‡æ–¹æ ¹è¯¯å·®ï¼š<span class="hljs-subst">{root_mean_squared_error(y, y_predict)}</span>'</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f'å¹³å‡ç»å¯¹è¯¯å·®ï¼š<span class="hljs-subst">{mean_absolute_error(y, y_predict)}</span>'</span>)

<span class="hljs-comment"># TODOï¼š6. ç»˜åˆ¶å›¾å½¢</span>
plt.scatter(x, y) <span class="hljs-comment"># ç»˜åˆ¶æ•£ç‚¹å›¾</span>
plt.plot(x, y_predict, color=<span class="hljs-string">'red'</span>) <span class="hljs-comment"># é¢„æµ‹å€¼xè½´ y è½´ç»˜åˆ¶æŠ˜çº¿å›¾</span>
plt.show()
</code></pre>
<p>ç‚¹æ˜¯çœŸå®çš„ï¼Œçº¿æ˜¯é¢„æµ‹çš„ï¼Œå¦‚ä¸‹å›¾å‘ç°æ˜¯æ¬ æ‹Ÿåˆ</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d0b2b8c93b1f4dcda82f1397c4eafb1b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOq6YeM55qE56C05rC055O2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768711840&amp;x-signature=ncgqMFxnuD5PkF1nmvbRcN4BZpw%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-10">æ­£å¥½æ‹Ÿåˆ</h3>
<p>åŸå› å°±æ˜¯ä¹‹å‰çš„ä¸€åˆ—æ•°æ®ï¼Œè¿‡äºç®€å•ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3054db410e6244279de479f7cee5f75a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOq6YeM55qE56C05rC055O2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768711840&amp;x-signature=rJY993%2F%2FuIv%2Fs3hdFyHSOJtvc1c%3D" alt="image.png" loading="lazy"/></p>
<p>æ•°æ®ä¸æ’åºï¼Œå¯¼è‡´æ¥å›ç”»å¯¼è‡´çš„</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/07ac0b021ffc459880f355ccec72bd2a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOq6YeM55qE56C05rC055O2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768711840&amp;x-signature=MlYOERO9NHxz7uEEsiBwodL6IMk%3D" alt="image.png" loading="lazy"/></p>
<blockquote>
<p>å®Œæ•´ä»£ç </p>
</blockquote>
<pre><code class="hljs language-py" lang="py"><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
<span class="hljs-keyword">from</span> skimage.metrics <span class="hljs-keyword">import</span> mean_squared_error
<span class="hljs-keyword">from</span> sklearn.linear_model <span class="hljs-keyword">import</span> LinearRegression
<span class="hljs-keyword">from</span> sklearn.metrics <span class="hljs-keyword">import</span> root_mean_squared_error, mean_absolute_error

<span class="hljs-comment"># <span class="hljs-doctag">TODO:</span> è®¾ç½®éšæœºç§å­</span>
<span class="hljs-comment"># è®¾ç½®éšæœºæ•°ç§å­</span>
np.random.seed(<span class="hljs-number">666</span>)

<span class="hljs-comment"># ç”Ÿæˆ x è½´æ•°æ®ï¼Œ100 ä¸ª</span>
x = np.random.uniform(-<span class="hljs-number">3</span>, <span class="hljs-number">3</span>, size=<span class="hljs-number">100</span>)

<span class="hljs-comment"># <span class="hljs-doctag">TODO:</span> y è¿™æ ·å†™ï¼Œæ˜¯ä¸ºäº† äººä¸ºæ„é€ ä¸€ä»½æ¥è¿‘çœŸå®ä¸–ç•Œçš„æ•°æ®</span>

<span class="hljs-comment"># åŸºäºxè½´çš„å€¼ï¼Œç»“åˆçº¿æ€§å…¬å¼ï¼Œç”Ÿæˆyè½´çš„å€¼</span>
<span class="hljs-comment"># é—®é¢˜ä¸€çº¿æ€§å›å½’å…¬å¼ï¼šy = kx+bï¼Œè¿™é‡Œä¸ºäº†æ•°æ®æ›´å¥½ï¼ŒåŠ å…¥å™ªå£°...</span>
<span class="hljs-comment"># å³ï¼šy = 0.5xÂ² + x + 2 + å™ªå£°(æ­£æ€åˆ†å¸ƒç”Ÿæˆçš„éšæœºæ•°)</span>
<span class="hljs-comment"># np.random.normal(0, 1, size=100) çš„æ„æ€æ˜¯ï¼Œç”Ÿæˆæ­£æ€åˆ†å¸ƒçš„éšæœºæ•°ï¼Œå‡å€¼ä¸º0ï¼Œæ ‡å‡†å·®ä¸º1ï¼Œå¤§å°ä¸º100</span>
y = <span class="hljs-number">0.5</span> * x ** <span class="hljs-number">2</span> + x + <span class="hljs-number">2</span> + np.random.normal(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, size=<span class="hljs-number">100</span>)

<span class="hljs-built_in">print</span>(<span class="hljs-string">f'æŸ¥çœ‹æ•°æ®xï¼š<span class="hljs-subst">{x}</span>'</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f'æŸ¥çœ‹æ•°æ®é›†yï¼š<span class="hljs-subst">{y}</span>'</span>)

<span class="hljs-comment"># TODOï¼š2. æ•°æ®é¢„å¤„ç†</span>
X1 = x.reshape(-<span class="hljs-number">1</span>, <span class="hljs-number">1</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f'å¤„ç†åçš„æ•°æ®é›†Xï¼š<span class="hljs-subst">{X1}</span>'</span>)
<span class="hljs-comment"># åˆ›å»ºç¬¬äºŒåˆ—ï¼Œç»™æ¯ä¸ªæ•°æ®å¼€ä¸ªå¹³æ–¹</span>
X2 = np.hstack([X1, X1 ** <span class="hljs-number">2</span>])
<span class="hljs-built_in">print</span>(<span class="hljs-string">f'å¤„ç†åçš„æ•°æ®é›†Xï¼š<span class="hljs-subst">{X2}</span>'</span>) <span class="hljs-comment"># [[x1, x1Â²], [x2, x2Â²], [x3, x3Â²], ...]</span>

<span class="hljs-comment"># <span class="hljs-doctag">TODO:</span> 3. åˆ›å»ºæ¨¡å‹ï¼ˆç®—æ³•ï¼‰å¯¹è±¡</span>
estimator = LinearRegression()
estimator.fit(X2, y)

<span class="hljs-comment"># <span class="hljs-doctag">TODO:</span> 4. æ¨¡å‹é¢„æµ‹</span>
y_predict = estimator.predict(X2)

<span class="hljs-comment"># <span class="hljs-doctag">TODO:</span> 5. æ¨¡å‹è¯„ä¼°</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">f'å‡æ–¹è¯¯å·®ï¼š<span class="hljs-subst">{mean_squared_error(y, y_predict)}</span>'</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f'å‡æ–¹æ ¹è¯¯å·®ï¼š<span class="hljs-subst">{root_mean_squared_error(y, y_predict)}</span>'</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f'å¹³å‡ç»å¯¹è¯¯å·®ï¼š<span class="hljs-subst">{mean_absolute_error(y, y_predict)}</span>'</span>)

<span class="hljs-comment"># TODOï¼š6. ç»˜åˆ¶å›¾å½¢</span>
plt.scatter(x, y) <span class="hljs-comment"># ç»˜åˆ¶æ•£ç‚¹å›¾</span>

<span class="hljs-comment"># æ ¹æ®xå»ä»å°åˆ°å¤§æ’åºï¼Œå¹¶è¿”å›ç´¢å¼•</span>
<span class="hljs-comment"># è¿”å›æ‰€æœ‰åï¼Œy_predict æ ¹æ®ç´¢å¼•å–å‡ºæ¥å…ƒç´ ï¼Œä¹Ÿå°±æ˜¯æ’åºäº†</span>
y_ = y_predict[np.argsort(x)]
plt.plot(np.sort(x), y_, color=<span class="hljs-string">'red'</span>) <span class="hljs-comment"># é¢„æµ‹å€¼xè½´ y è½´ç»˜åˆ¶æŠ˜çº¿å›¾</span>
plt.show()
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/17a73031a0764d7c86e0a90766896ece~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOq6YeM55qE56C05rC055O2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768711840&amp;x-signature=93uJJQ8JcXJRpNmqHFXHFxQ%2Fq9s%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-11">è¿‡æ‹Ÿåˆ</h3>
<p>å°±æ˜¯å¤šå¢åŠ ä¸€äº›æ— ç”¨çš„åˆ—ï¼Œå­¦ä¹ åˆ°å¾ˆå¤šæ— ç”¨çš„ä¸œè¥¿ã€‚æ¨¡å‹å˜çš„å¤æ‚ã€‚</p>
<pre><code class="hljs language-py" lang="py"><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
<span class="hljs-keyword">from</span> skimage.metrics <span class="hljs-keyword">import</span> mean_squared_error
<span class="hljs-keyword">from</span> sklearn.linear_model <span class="hljs-keyword">import</span> LinearRegression
<span class="hljs-keyword">from</span> sklearn.metrics <span class="hljs-keyword">import</span> root_mean_squared_error, mean_absolute_error

<span class="hljs-comment"># <span class="hljs-doctag">TODO:</span> è®¾ç½®éšæœºç§å­</span>
<span class="hljs-comment"># è®¾ç½®éšæœºæ•°ç§å­</span>
np.random.seed(<span class="hljs-number">666</span>)

<span class="hljs-comment"># ç”Ÿæˆ x è½´æ•°æ®ï¼Œ100 ä¸ª</span>
x = np.random.uniform(-<span class="hljs-number">3</span>, <span class="hljs-number">3</span>, size=<span class="hljs-number">100</span>)

<span class="hljs-comment"># <span class="hljs-doctag">TODO:</span> y è¿™æ ·å†™ï¼Œæ˜¯ä¸ºäº† äººä¸ºæ„é€ ä¸€ä»½æ¥è¿‘çœŸå®ä¸–ç•Œçš„æ•°æ®</span>

<span class="hljs-comment"># åŸºäºxè½´çš„å€¼ï¼Œç»“åˆçº¿æ€§å…¬å¼ï¼Œç”Ÿæˆyè½´çš„å€¼</span>
<span class="hljs-comment"># é—®é¢˜ä¸€çº¿æ€§å›å½’å…¬å¼ï¼šy = kx+bï¼Œè¿™é‡Œä¸ºäº†æ•°æ®æ›´å¥½ï¼ŒåŠ å…¥å™ªå£°...</span>
<span class="hljs-comment"># å³ï¼šy = 0.5xÂ² + x + 2 + å™ªå£°(æ­£æ€åˆ†å¸ƒç”Ÿæˆçš„éšæœºæ•°)</span>
<span class="hljs-comment"># np.random.normal(0, 1, size=100) çš„æ„æ€æ˜¯ï¼Œç”Ÿæˆæ­£æ€åˆ†å¸ƒçš„éšæœºæ•°ï¼Œå‡å€¼ä¸º0ï¼Œæ ‡å‡†å·®ä¸º1ï¼Œå¤§å°ä¸º100</span>
y = <span class="hljs-number">0.5</span> * x ** <span class="hljs-number">2</span> + x + <span class="hljs-number">2</span> + np.random.normal(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, size=<span class="hljs-number">100</span>)

<span class="hljs-built_in">print</span>(<span class="hljs-string">f'æŸ¥çœ‹æ•°æ®xï¼š<span class="hljs-subst">{x}</span>'</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f'æŸ¥çœ‹æ•°æ®é›†yï¼š<span class="hljs-subst">{y}</span>'</span>)

<span class="hljs-comment"># TODOï¼š2. æ•°æ®é¢„å¤„ç†</span>
X1 = x.reshape(-<span class="hljs-number">1</span>, <span class="hljs-number">1</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f'å¤„ç†åçš„æ•°æ®é›†Xï¼š<span class="hljs-subst">{X1}</span>'</span>)
<span class="hljs-comment"># åˆ›å»ºç¬¬äºŒåˆ—ï¼Œç»™æ¯ä¸ªæ•°æ®å¼€ä¸ªå¹³æ–¹</span>
X2 = np.hstack([X1, X1 ** <span class="hljs-number">2</span>, X1 ** <span class="hljs-number">3</span>, X1 ** <span class="hljs-number">4</span>, X1 ** <span class="hljs-number">5</span>, X1 ** <span class="hljs-number">6</span>, X1 ** <span class="hljs-number">7</span>, X1 ** <span class="hljs-number">8</span>, X1 ** <span class="hljs-number">9</span>, X1 ** <span class="hljs-number">10</span>])
<span class="hljs-built_in">print</span>(<span class="hljs-string">f'å¤„ç†åçš„æ•°æ®é›†Xï¼š<span class="hljs-subst">{X2}</span>'</span>) <span class="hljs-comment"># [[x1, x1Â²], [x2, x2Â²], [x3, x3Â²], ...]</span>

<span class="hljs-comment"># <span class="hljs-doctag">TODO:</span> 3. åˆ›å»ºæ¨¡å‹ï¼ˆç®—æ³•ï¼‰å¯¹è±¡</span>
estimator = LinearRegression()
estimator.fit(X2, y)

<span class="hljs-comment"># <span class="hljs-doctag">TODO:</span> 4. æ¨¡å‹é¢„æµ‹</span>
y_predict = estimator.predict(X2)

<span class="hljs-comment"># <span class="hljs-doctag">TODO:</span> 5. æ¨¡å‹è¯„ä¼°</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">f'å‡æ–¹è¯¯å·®ï¼š<span class="hljs-subst">{mean_squared_error(y, y_predict)}</span>'</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f'å‡æ–¹æ ¹è¯¯å·®ï¼š<span class="hljs-subst">{root_mean_squared_error(y, y_predict)}</span>'</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f'å¹³å‡ç»å¯¹è¯¯å·®ï¼š<span class="hljs-subst">{mean_absolute_error(y, y_predict)}</span>'</span>)

<span class="hljs-comment"># TODOï¼š6. ç»˜åˆ¶å›¾å½¢</span>
plt.scatter(x, y) <span class="hljs-comment"># ç»˜åˆ¶æ•£ç‚¹å›¾</span>

<span class="hljs-comment"># æ ¹æ®xå»ä»å°åˆ°å¤§æ’åºï¼Œå¹¶è¿”å›ç´¢å¼•</span>
<span class="hljs-comment"># è¿”å›æ‰€æœ‰åï¼Œy_predict æ ¹æ®ç´¢å¼•å–å‡ºæ¥å…ƒç´ ï¼Œä¹Ÿå°±æ˜¯æ’åºäº†</span>
y_ = y_predict[np.argsort(x)]
plt.plot(np.sort(x), y_, color=<span class="hljs-string">'red'</span>) <span class="hljs-comment"># é¢„æµ‹å€¼xè½´ y è½´ç»˜åˆ¶æŠ˜çº¿å›¾</span>
plt.show()
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7cdbf5044cbc458d9efdee001659b0e7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOq6YeM55qE56C05rC055O2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768711840&amp;x-signature=XpPYa1IuPC88dxfVXfm3Q2%2Fyb%2F0%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-12">è§£å†³æ–¹æ¡ˆ</h3>
<blockquote>
<p>æ¬ æ‹Ÿåˆå‡ºç°çš„åŸå› </p>
</blockquote>
<p>å­¦ä¹ åˆ°æ•°æ®çš„ç‰¹å¾è¿‡å°‘</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong></p>
<ul>
<li>æ·»åŠ å…¶ä»–ç‰¹å¾</li>
<li>ç»„åˆã€æ³›åŒ–ã€ç›¸å…³æ€§ä¸‰ç±»ç‰¹å¾æ˜¯ç‰¹å¾æ·»åŠ çš„é‡è¦æ‰‹æ®µ</li>
<li>æ·»åŠ å¤šé¡¹å¼ç‰¹å¾é¡¹</li>
<li>æ¨¡å‹è¿‡äºç®€å•æ—¶çš„å¸¸ç”¨å¥—è·¯ï¼Œä¾‹å¦‚å°†çº¿æ€§æ¨¡å‹é€šè¿‡æ·»åŠ äºŒæ¬¡é¡¹æˆ–ä¸‰æ¬¡é¡¹ä½¿æ¨¡å‹æ³›åŒ–èƒ½åŠ›æ›´å¼º</li>
</ul>
<blockquote>
<p>è¿‡æ‹Ÿåˆå‡ºç°çš„åŸå› </p>
</blockquote>
<p>åŸå§‹ç‰¹å¾è¿‡å¤šï¼Œå­˜åœ¨ä¸€äº›å˜ˆæ‚ç‰¹å¾ï¼Œ æ¨¡å‹è¿‡äºå¤æ‚æ˜¯å› ä¸ºæ¨¡å‹å°è¯•å»å…¼é¡¾å„ä¸ªæµ‹è¯•æ•°æ®ç‚¹</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong></p>
<ul>
<li>é‡æ–°æ¸…æ´—æ•°æ®ï¼šå¯¹äºè¿‡å¤šå¼‚å¸¸ç‚¹æ•°æ®ã€æ•°æ®ä¸çº¯çš„åœ°æ–¹å†å¤„ç†</li>
<li>å¢å¤§æ•°æ®çš„è®­ç»ƒé‡ï¼šå¯¹åŸæ¥çš„æ•°æ®è®­ç»ƒçš„å¤ªè¿‡äº†ï¼Œå¢åŠ æ•°æ®é‡çš„æƒ…å†µä¸‹ï¼Œä¼šç¼“è§£</li>
<li>æ­£åˆ™åŒ–ï¼šè§£å†³æ¨¡å‹è¿‡æ‹Ÿåˆçš„æ–¹æ³•ï¼Œåœ¨æœºå™¨å­¦ä¹ ã€æ·±åº¦å­¦ä¹ ä¸­å¤§é‡ä½¿ç”¨</li>
<li>å‡å°‘ç‰¹å¾ç»´åº¦ï¼Œé˜²æ­¢ç»´ç¾éš¾ï¼šç”±äºç‰¹å¾å¤šï¼Œæ ·æœ¬æ•°é‡å°‘ï¼Œå¯¼è‡´å­¦ä¹ ä¸å……åˆ†ï¼Œæ³›åŒ–èƒ½åŠ›å·®ã€‚</li>
</ul>
<h2 data-id="heading-13">æ­£åˆ™åŒ–å¤„ç†æ–¹æ¡ˆ</h2>
<p>å‡è®¾æƒé‡éƒ½æ˜¯ 0.2ï¼Œæœ€åä¸€åˆ—æ˜¯æ•°æ®å¼‚å¸¸ï¼Œç›¸å¯¹äºå…¶ä»–åˆ—è¿‡é«˜æˆ–è€…è¿‡ä½ï¼Œæ­¤æ—¶åº”è¯¥é™ä½æœ€åä¸€åˆ—æƒé‡ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5ec4e719e534430a840055531ae61807~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOq6YeM55qE56C05rC055O2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768711840&amp;x-signature=Cq3Xki14sYCkcSRFEM12IUX5cwE%3D" alt="image.png" loading="lazy"/></p>
<blockquote>
<p>æ­£åˆ™åŒ–æ¦‚å¿µï¼ˆå‡ºç°çš„åŸå› ï¼‰</p>
</blockquote>
<p>åœ¨æ¨¡å‹è®­ç»ƒæ—¶ï¼Œæ•°æ®ä¸­æœ‰äº›ç‰¹å¾å½±å“æ¨¡å‹å¤æ‚åº¦ã€æˆ–è€…æŸä¸ªç‰¹å¾çš„å¼‚å¸¸å€¼è¾ƒå¤šï¼Œæ‰€ä»¥è¦å°½é‡å‡å°‘è¿™ä¸ªç‰¹å¾çš„å½±å“ï¼ˆç”šè‡³åˆ é™¤æŸä¸ªç‰¹å¾çš„å½±å“ï¼‰ï¼Œè¿™å°±æ˜¯æ­£åˆ™åŒ–ã€‚</p>
<blockquote>
<p>æ­£åˆ™åŒ–å¦‚ä½•æ¶ˆé™¤å¼‚å¸¸ç‚¹å¸¦æ¥çš„wå€¼è¿‡å¤§è¿‡å°çš„å½±å“ï¼Ÿ</p>
</blockquote>
<ul>
<li>åœ¨æŸå¤±å‡½æ•°ä¸­å¢åŠ æ­£åˆ™åŒ–é¡¹</li>
<li>åˆ†ä¸ºL1æ­£åˆ™åŒ–ã€L2æ­£åˆ™åŒ–</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/819436743ea34890915dd9ea26969eab~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOq6YeM55qE56C05rC055O2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768711840&amp;x-signature=wozmu3D5X3Aofp6bciFBkU2DtKY%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-14">L1 æ­£åˆ™åŒ– / L2 æ­£åˆ™åŒ–</h3>
<p>æ¦‚è¿°ï¼šæ­£åˆ™åŒ–ï¼šæ˜¯ä¸€ç§å¯¹æ¨¡å‹å¤æ‚åº¦çš„æ§åˆ¶çš„ä¸€ç§æ‰‹æ®µï¼Œé€šè¿‡é™ä½ç‰¹å¾çš„æƒé‡å®ç°ã€‚</p>
<p>åˆ†ç±»ï¼š</p>
<ul>
<li>L1ï¼šLassoæ¨¡å—ï¼Œä¼šé™ä½æƒé‡ï¼Œç”šè‡³å¯èƒ½é™ä¸º 0 -&gt; ç‰¹å¾é€‰å–</li>
<li>L2ï¼šRidgeæ¨¡å—ï¼Œä¼šé™ä½æƒé‡ï¼Œä¸ä¼šé™ä¸º 0ï¼Œä¹Ÿå«å²­å›å½’</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b67851629e8942fdabf0443c30227a32~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOq6YeM55qE56C05rC055O2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768711840&amp;x-signature=5FF5X13BQgXeW7WG2sWdgE8Ww94%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/398ab0a5cc7b48c8bb6e69edc6ef240c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOq6YeM55qE56C05rC055O2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768711840&amp;x-signature=i6uFsOK1gYxFjHSgng3%2BKNNeuTw%3D" alt="image.png" loading="lazy"/></p>
<blockquote>
<p>æ³¨æ„ï¼šæ­£åˆ™åŒ–åªæ˜¯åœ¨çº¿æ€§å›å½’çš„åŸºç¡€ä¸Šï¼ŒåŠ ä¸Šäº†å¯¹ç³»æ•°å¤§å°çš„çº¦æŸæˆ–æƒ©ç½šã€‚</p>
</blockquote>
<p>åªéœ€è¦ä¿®æ”¹</p>
<pre><code class="hljs language-py" lang="py"><span class="hljs-comment"># L1 æ­£åˆ™ï¼Œå‚æ•° alpha: æƒ©ç½šç³»æ•°ï¼Œç³»æ•°è¶Šå¤§ï¼Œæ­£åˆ™åŒ–é¡¹æƒé‡è¶Šå°</span>
estimator = Lasso(alpha=<span class="hljs-number">0.2</span>)
<span class="hljs-comment"># L2 æ­£åˆ™</span>
estimator = Ridge(alpha=<span class="hljs-number">0.1</span>)
</code></pre>
<p>å®Œæ•´ä»£ç </p>
<pre><code class="hljs language-py" lang="py"><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
<span class="hljs-keyword">from</span> skimage.metrics <span class="hljs-keyword">import</span> mean_squared_error
<span class="hljs-keyword">from</span> sklearn.linear_model <span class="hljs-keyword">import</span> Lasso, Ridge
<span class="hljs-keyword">from</span> sklearn.metrics <span class="hljs-keyword">import</span> root_mean_squared_error, mean_absolute_error

<span class="hljs-comment"># <span class="hljs-doctag">TODO:</span> è®¾ç½®éšæœºç§å­</span>
<span class="hljs-comment"># è®¾ç½®éšæœºæ•°ç§å­</span>
np.random.seed(<span class="hljs-number">666</span>)

<span class="hljs-comment"># ç”Ÿæˆ x è½´æ•°æ®ï¼Œ100 ä¸ª</span>
x = np.random.uniform(-<span class="hljs-number">3</span>, <span class="hljs-number">3</span>, size=<span class="hljs-number">100</span>)

<span class="hljs-comment"># <span class="hljs-doctag">TODO:</span> y è¿™æ ·å†™ï¼Œæ˜¯ä¸ºäº† äººä¸ºæ„é€ ä¸€ä»½æ¥è¿‘çœŸå®ä¸–ç•Œçš„æ•°æ®</span>

<span class="hljs-comment"># åŸºäºxè½´çš„å€¼ï¼Œç»“åˆçº¿æ€§å…¬å¼ï¼Œç”Ÿæˆyè½´çš„å€¼</span>
<span class="hljs-comment"># é—®é¢˜ä¸€çº¿æ€§å›å½’å…¬å¼ï¼šy = kx+bï¼Œè¿™é‡Œä¸ºäº†æ•°æ®æ›´å¥½ï¼ŒåŠ å…¥å™ªå£°...</span>
<span class="hljs-comment"># å³ï¼šy = 0.5xÂ² + x + 2 + å™ªå£°(æ­£æ€åˆ†å¸ƒç”Ÿæˆçš„éšæœºæ•°)</span>
<span class="hljs-comment"># np.random.normal(0, 1, size=100) çš„æ„æ€æ˜¯ï¼Œç”Ÿæˆæ­£æ€åˆ†å¸ƒçš„éšæœºæ•°ï¼Œå‡å€¼ä¸º0ï¼Œæ ‡å‡†å·®ä¸º1ï¼Œå¤§å°ä¸º100</span>
y = <span class="hljs-number">0.5</span> * x ** <span class="hljs-number">2</span> + x + <span class="hljs-number">2</span> + np.random.normal(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, size=<span class="hljs-number">100</span>)

<span class="hljs-built_in">print</span>(<span class="hljs-string">f'æŸ¥çœ‹æ•°æ®xï¼š<span class="hljs-subst">{x}</span>'</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f'æŸ¥çœ‹æ•°æ®é›†yï¼š<span class="hljs-subst">{y}</span>'</span>)

<span class="hljs-comment"># TODOï¼š2. æ•°æ®é¢„å¤„ç†</span>
X1 = x.reshape(-<span class="hljs-number">1</span>, <span class="hljs-number">1</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f'å¤„ç†åçš„æ•°æ®é›†Xï¼š<span class="hljs-subst">{X1}</span>'</span>)
<span class="hljs-comment"># åˆ›å»ºç¬¬äºŒåˆ—ï¼Œç»™æ¯ä¸ªæ•°æ®å¼€ä¸ªå¹³æ–¹</span>
X2 = np.hstack([X1, X1 ** <span class="hljs-number">2</span>, X1 ** <span class="hljs-number">3</span>, X1 ** <span class="hljs-number">4</span>, X1 ** <span class="hljs-number">5</span>, X1 ** <span class="hljs-number">6</span>, X1 ** <span class="hljs-number">7</span>, X1 ** <span class="hljs-number">8</span>, X1 ** <span class="hljs-number">9</span>, X1 ** <span class="hljs-number">10</span>])
<span class="hljs-built_in">print</span>(<span class="hljs-string">f'å¤„ç†åçš„æ•°æ®é›†Xï¼š<span class="hljs-subst">{X2}</span>'</span>)  <span class="hljs-comment"># [[x1, x1Â²], [x2, x2Â²], [x3, x3Â²], ...]</span>

<span class="hljs-comment"># <span class="hljs-doctag">TODO:</span> 3. åˆ›å»ºæ¨¡å‹ï¼ˆç®—æ³•ï¼‰å¯¹è±¡</span>
<span class="hljs-comment"># L1 æ­£åˆ™ï¼Œ å‚æ•° alpha: æƒ©ç½šç³»æ•°ï¼Œç³»æ•°è¶Šå¤§ï¼Œæ­£åˆ™åŒ–é¡¹æƒé‡è¶Šå°</span>
<span class="hljs-comment"># estimator = Lasso(alpha=0.1)</span>
<span class="hljs-comment"># L2 æ­£åˆ™</span>
estimator = Ridge(alpha=<span class="hljs-number">0.1</span>)
estimator.fit(X2, y)

<span class="hljs-comment"># <span class="hljs-doctag">TODO:</span> 4. æ¨¡å‹é¢„æµ‹</span>
y_predict = estimator.predict(X2)

<span class="hljs-comment"># <span class="hljs-doctag">TODO:</span> 5. æ¨¡å‹è¯„ä¼°</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">f'å‡æ–¹è¯¯å·®ï¼š<span class="hljs-subst">{mean_squared_error(y, y_predict)}</span>'</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f'å‡æ–¹æ ¹è¯¯å·®ï¼š<span class="hljs-subst">{root_mean_squared_error(y, y_predict)}</span>'</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f'å¹³å‡ç»å¯¹è¯¯å·®ï¼š<span class="hljs-subst">{mean_absolute_error(y, y_predict)}</span>'</span>)

<span class="hljs-comment"># TODOï¼š6. ç»˜åˆ¶å›¾å½¢</span>
plt.scatter(x, y)  <span class="hljs-comment"># ç»˜åˆ¶æ•£ç‚¹å›¾</span>

<span class="hljs-comment"># æ ¹æ®xå»ä»å°åˆ°å¤§æ’åºï¼Œå¹¶è¿”å›ç´¢å¼•</span>
<span class="hljs-comment"># è¿”å›æ‰€æœ‰åï¼Œy_predict æ ¹æ®ç´¢å¼•å–å‡ºæ¥å…ƒç´ ï¼Œä¹Ÿå°±æ˜¯æ’åºäº†</span>
y_ = y_predict[np.argsort(x)]
plt.plot(np.sort(x), y_, color=<span class="hljs-string">'red'</span>)  <span class="hljs-comment"># é¢„æµ‹å€¼xè½´ y è½´ç»˜åˆ¶æŠ˜çº¿å›¾</span>
plt.show()
</code></pre>
<h3 data-id="heading-15">æ€»ç»“</h3>
<blockquote>
<p>æ¬ æ‹Ÿåˆ</p>
</blockquote>
<ul>
<li>åœ¨è®­ç»ƒé›†ä¸Šè¡¨ç°ä¸å¥½ï¼Œåœ¨æµ‹è¯•é›†ä¸Šè¡¨ç°ä¸å¥½</li>
<li>è§£å†³æ–¹æ³•ï¼Œç»§ç»­å­¦ä¹ 
<ul>
<li>æ·»åŠ å…¶ä»–ç‰¹å¾é¡¹</li>
<li>æ·»åŠ å¤šé¡¹å¼ç‰¹å¾</li>
</ul>
</li>
</ul>
<blockquote>
<p>è¿‡æ‹Ÿåˆ</p>
</blockquote>
<ul>
<li>åœ¨è®­ç»ƒé›†ä¸Šè¡¨ç°å¥½ï¼Œåœ¨æµ‹è¯•é›†ä¸Šè¡¨ç°ä¸å¥½</li>
<li>è§£å†³æ–¹æ³•
<ol>
<li>é‡æ–°æ¸…æ´—æ•°æ®é›†</li>
<li>å¢å¤§æ•°æ®çš„è®­ç»ƒé‡</li>
<li>æ­£åˆ™åŒ–</li>
<li>å‡å°‘ç‰¹å¾ç»´åº¦</li>
</ol>
</li>
</ul>
<h2 data-id="heading-16">é€»è¾‘å›å½’</h2>
<p>åº•å±‚ä¾èµ–äºçº¿æ€§å›å½’ã€‚</p>
<p><strong>è§£å†³äºŒåˆ†ç±»çš„é—®é¢˜</strong></p>
<p>æŠŠçº¿æ€§å›å½’æ¨¡å‹çš„ç»“æœè¾“å…¥ç»™æ¿€æ´»å‡½æ•° Sigmoid è®¡ç®—å‡ºå€¼ï¼Œå‡è®¾0.5ï¼Œè¶…è¿‡æ˜¯ä¸€ç±»ï¼Œä¸è¶…è¿‡æ˜¯ä¸€ç±»</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3967c526c31b40c8bc1812b1438949ec~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOq6YeM55qE56C05rC055O2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768711840&amp;x-signature=8I6nqCXspA52FFowRE6r%2BLd79cM%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0ae085f17d144e4782736702fea9665c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOq6YeM55qE56C05rC055O2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768711840&amp;x-signature=OpT8gK9sFlIPD2bNGTi5sct3zOI%3D" alt="image.png" loading="lazy"/></p>
<ol>
<li>æ¿€æ´»å‡½æ•° sigmoid  ä½œç”¨ï¼Ÿ
<ul>
<li>ä½œç”¨ï¼šæŠŠæ•°å€¼ æ˜ å°„åˆ° (0ï¼Œ 1ï¼‰</li>
</ul>
</li>
<li>æå¤§ä¼¼ç„¶ä¼°è®¡ï¼Ÿ
<ul>
<li>é€šè¿‡æå¤§åŒ–æ¦‚ç‡äº‹ä»¶ï¼Œæ¥ä¼°è®¡æœ€ä¼˜å‚æ•°</li>
</ul>
</li>
<li>å¯¹æ•°å‡½æ•°
<ul>
<li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>l</mi><mi>o</mi><msub><mi>g</mi><mi>a</mi></msub><mi>M</mi><mi>N</mi><mo>=</mo><mi>l</mi><mi>o</mi><msub><mi>g</mi><mi>a</mi></msub><mi>M</mi><mo>+</mo><mi>l</mi><mi>o</mi><msub><mi>g</mi><mi>a</mi></msub><mi>N</mi></mrow><annotation encoding="application/x-tex">log_a MN = log_a M+log_a N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">o</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">a</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.10903em;">MN</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">o</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">a</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">o</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">a</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span></span></span></span></span></li>
<li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>l</mi><mi>o</mi><msub><mi>g</mi><mi>a</mi></msub><msup><mi>M</mi><mi>n</mi></msup><mo>=</mo><mi>n</mi><mi>l</mi><mi>o</mi><msub><mi>g</mi><mi>a</mi></msub><mi>M</mi></mrow><annotation encoding="application/x-tex">log_aM^n = nlog_aM</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">o</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">a</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="mord mathnormal">n</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">o</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">a</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span></span></span></span></span></li>
</ul>
</li>
</ol>
<h3 data-id="heading-17">æ¦‚å¿µ</h3>
<ul>
<li>ä¸€ç§åˆ†ç±»æ¨¡å‹ï¼ŒæŠŠçº¿æ€§å›å½’çš„è¾“å‡ºï¼Œä½œä¸ºé€»è¾‘å›å½’çš„è¾“å…¥ã€‚</li>
<li>è¾“å‡ºæ˜¯ï¼ˆ0, 1ï¼‰ä¹‹é—´çš„å€¼</li>
</ul>
<p>æ€æƒ³</p>
<ol>
<li>åˆ©ç”¨çº¿æ€§æ¨¡å‹ f(x) = w^Tx + b æ ¹æ®ç‰¹å¾çš„é‡è¦æ€§è®¡ç®—å‡ºä¸€ä¸ªå€¼</li>
<li>å†ä½¿ç”¨ sigmoid å‡½æ•°å°† f(x) çš„è¾“å‡ºå€¼æ˜ å°„ä¸ºæ¦‚ç‡å€¼
<ul>
<li>è®¾ç½®é˜ˆå€¼(egï¼š0.5)ï¼Œè¾“å‡ºæ¦‚ç‡å€¼å¤§äº 0.5ï¼Œåˆ™å°†æœªçŸ¥æ ·æœ¬è¾“å‡ºä¸º 1 ç±»</li>
<li>å¦åˆ™è¾“å‡ºä¸º 0 ç±»</li>
</ul>
</li>
</ol>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d971e204971f486d831521cfef1f62dd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOq6YeM55qE56C05rC055O2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768711840&amp;x-signature=FyBMJ4sHZ%2BJJEMphy4XIM6G4Y9I%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0d2bc52e2c6942da8ac66d6c2d02b7b1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOq6YeM55qE56C05rC055O2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768711840&amp;x-signature=4nOHARWG9IlOImd2DFh2XXkn7ZU%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/aa2e552e02c84954ba8f74afd126e137~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOq6YeM55qE56C05rC055O2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768711840&amp;x-signature=Ook3Peh57o28tbLju8%2Fl5U07pvA%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8323e73b857748fa9808ca74d7abf996~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOq6YeM55qE56C05rC055O2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768711840&amp;x-signature=Vy40OL1ddssAaUkTOm78v6%2Bf6c0%3D" alt="image.png" loading="lazy"/></p>
<blockquote>
<p>æ€»ç»“</p>
</blockquote>
<p>é€»è¾‘å›å½’åŸç†</p>
<ul>
<li>æ€æƒ³ï¼šè§£å†³åˆ†ç±»é—®é¢˜ï¼ŒæŠŠçº¿æ€§å›å½’çš„è¾“å‡ºä½œä¸ºé€»è¾‘å›å½’çš„è¾“å…¥</li>
</ul>
<p>é€»è¾‘å›å½’çš„æŸå¤±å‡½æ•° â€“ å¯¹æ•°ä¼¼ç„¶æŸå¤±</p>
<ul>
<li>æŸå¤±å‡½æ•°è®¾è®¡æ€æƒ³ï¼šé¢„æµ‹å€¼ä¸ºAã€B 2ä¸ªç±»åˆ«ï¼ŒçœŸå®ç±»åˆ«æ‰€åœ¨çš„ä½ç½®ï¼Œæ¦‚ç‡å€¼è¶Šå¤§è¶Šå¥½</li>
</ul>
<h3 data-id="heading-18">API ç»ƒä¹ </h3>
<p>åä¾‹ï¼šä¹Ÿå«å‡ä¾‹ï¼Œé»˜è®¤æ•°é‡å°‘çš„æ˜¯æ­£ä¾‹</p>
<ul>
<li>å½“æ˜¯æ­£ä¾‹çš„æ—¶å€™ï¼Œæ¦‚ç‡è¶Šå¤§è¶Šå¥½</li>
<li>å½“æ˜¯åä¾‹çš„æ—¶å€™ï¼šæ¦‚ç‡è¶Šå°è¶Šå¥½</li>
</ul>
<p>æ¦‚è¿°ï¼šå±äºåˆ†ç±»ç®—æ³•çš„ä¸€ç§ï¼Œä¸€èˆ¬æ˜¯äºŒåˆ†æ³•ã€‚</p>
<ol>
<li>åŸºäºçº¿æ€§å›å½’ï¼Œç»“åˆç‰¹å¾å€¼ï¼Œè®¡ç®—å‡ºæ ‡ç­¾å€¼ã€‚</li>
<li>æŠŠä¸Šè¿°ç®—å‡ºæ¥çš„æ ‡ç­¾å€¼ä¼ ç»™æ¿€æ´»å‡½æ•°(Sigmoid)ï¼Œæ˜ å°„æˆ 0ï¼Œ1 åŒºé—´çš„å€¼ã€‚</li>
<li>ç»“åˆæ‰‹åŠ¨è®¾ç½®çš„é˜ˆå€¼ï¼Œæ¥åˆ’åˆ†åŒºåŸŸ
<ul>
<li>ä¾‹å¦‚ï¼šé˜ˆå€¼ = 0.6ï¼Œåˆ™ &gt; 0.6 Aç±»ï¼Œå¦åˆ™ B ç±»ã€‚</li>
</ul>
</li>
</ol>
<p>æŸå¤±å‡½æ•°ï¼š</p>
<ul>
<li>å…ˆåŸºäºæå¤§ä¼¼ç„¶å‡½æ•°è®¡ç®—ï¼Œç„¶åè½¬æˆå¯¹æ•°ä¼¼ç„¶å‡½æ•°ï¼Œç»“åˆæ¢¯åº¦ä¸‹é™ï¼Œè®¡ç®—æœ€å°å€¼å³å¯ã€‚</li>
</ul>
<p>æ€»ç»“ï¼š</p>
<ol>
<li>é€»è¾‘å›å½’åŸç†ï¼šæŠŠçº¿æ€§å›å½’çš„è¾“å‡ºï¼Œä½œä¸ºé€»è¾‘å›å½’çš„è¾“å…¥</li>
<li>é»˜è®¤æƒ…å†µä¸‹ï¼šé‡‡ç”¨æ ·æœ¬å°‘å½“ä½œæ­£ä¾‹ï¼Œå…¶ä»–æ˜¯åä¾‹(ä¹Ÿå«ï¼šå‡ä¾‹)</li>
<li>(é€»è¾‘å›å½’)æŸå¤±å‡½æ•°çš„è®¾è®¡åŸåˆ™ï¼šçœŸå®å€¼æ˜¯æ­£ä¾‹çš„æƒ…å†µä¸‹ï¼Œæ¦‚ç‡å€¼è¶Šå¤§è¶Šå¥½ã€‚</li>
</ol>
<pre><code class="hljs language-py" lang="py"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
<span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd
<span class="hljs-keyword">from</span> sklearn.linear_model <span class="hljs-keyword">import</span> LogisticRegression
<span class="hljs-keyword">from</span> sklearn.metrics <span class="hljs-keyword">import</span> accuracy_score
<span class="hljs-keyword">from</span> sklearn.model_selection <span class="hljs-keyword">import</span> train_test_split
<span class="hljs-keyword">from</span> sklearn.preprocessing <span class="hljs-keyword">import</span> StandardScaler

<span class="hljs-comment"># TODOï¼š1. å‡†å¤‡æ•°æ®</span>
data = pd.read_csv(<span class="hljs-string">r'E:\BaiduNetdiskDownload\Heima\25å¹´8æœˆå®Œç»“ æŒç»­æ›´æ–°ç‰ˆæœ¬'</span> \
                   <span class="hljs-string">r'\æºç è¯¾ä»¶è½¯ä»¶\04 æ­£è¯¾_æœºå™¨å­¦ä¹ -V6-25å¹´7æœˆç‰ˆæœ¬-8å¤©-AIç‰ˆæœ¬\05-é€»è¾‘å›å½’\03-ä»£ç \breast-cancer-wisconsin.csv'</span>)
<span class="hljs-comment"># çœ‹ä¸åˆ°ç©ºå€¼ï¼Œå› ä¸º ? æ ‡è®°çš„ç©º</span>
<span class="hljs-comment"># print(data.info())</span>

<span class="hljs-comment"># TODOï¼š2. æ•°æ®çš„é¢„å¤„ç†</span>
<span class="hljs-comment"># ç”¨ np.NaN æ¥æ›¿æ¢</span>
data.replace(<span class="hljs-string">'?'</span>, np.nan, inplace=<span class="hljs-literal">True</span>)
<span class="hljs-comment"># åˆ é™¤ç¼ºå¤±å€¼ï¼ŒæŒ‰è¡Œ</span>
data.dropna(axis=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">True</span>)
<span class="hljs-comment"># print(data.info())</span>

<span class="hljs-comment"># TODOï¼š3. ç‰¹å¾å·¥ç¨‹ï¼Œç‰¹å¾æå–ï¼Œç‰¹å¾é¢„å¤„ç†ï¼Œç‰¹å¾é™ç»´ï¼Œç‰¹å¾é€‰å–ï¼Œç‰¹å¾ç»„åˆ</span>
<span class="hljs-comment"># è·å–ç‰¹å¾å€¼ å’Œ ç›®æ ‡å€¼(æ ‡ç­¾å€¼)</span>
x = data.iloc[:, <span class="hljs-number">1</span>:-<span class="hljs-number">1</span>] <span class="hljs-comment"># ä»ç´¢å¼•ä¸º1çš„åˆ—å¼€å§‹è·å–ï¼Œç›´è‡³æœ€åä¸€åˆ—ä¸åŒ…å«ã€‚</span>
<span class="hljs-comment"># y = data.iloc[:, -1]</span>
<span class="hljs-comment"># y = data['Class']</span>
y = data.Class

<span class="hljs-comment"># print(len(x), len(y))</span>

x_train, x_test, y_train, y_test = train_test_split(x, y, test_size=<span class="hljs-number">0.2</span>, random_state=<span class="hljs-number">22</span>)
transfer = StandardScaler()
x_train = transfer.fit_transform(x_train)
x_test = transfer.transform(x_test)

<span class="hljs-comment"># TODOï¼š4. æ¨¡å‹è®­ç»ƒ</span>
<span class="hljs-comment"># é€»è¾‘å›å½’æ¨¡å‹</span>
estimator = LogisticRegression()
estimator.fit(x_train, y_train)

<span class="hljs-comment"># TODOï¼š5. æ¨¡å‹é¢„æµ‹</span>
y_predict = estimator.predict(x_test)
<span class="hljs-built_in">print</span>(<span class="hljs-string">'é¢„æµ‹ç»“æœä¸ºï¼š'</span>, y_predict)

<span class="hljs-comment"># TODOï¼š6. æ¨¡å‹è¯„ä¼°</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">'å‡†ç¡®ç‡ï¼š'</span>, estimator.score(x_test, y_test))
<span class="hljs-built_in">print</span>(<span class="hljs-string">'å‡†ç¡®ç‡ï¼š'</span>, accuracy_score(y_test, y_predict))
</code></pre>
<blockquote>
<p>æ€è€ƒ</p>
</blockquote>
<p>ä»…ä»…é æ­£ç¡®ç‡ï¼Œèƒ½è¡¡é‡é€»è¾‘å›å½’ç»“æœå—ï¼Ÿè‚¯å®šæ˜¯ä¸å¯ä»¥çš„ï¼Œå› ä¸ºåªçŸ¥é“æ­£ç¡®ç‡ï¼Œä¸çŸ¥é“åˆ°åº•å“ªäº›æ˜¯é¢„æµ‹æˆåŠŸäº†ï¼Œå“ªäº›æ˜¯é¢„æµ‹å¤±è´¥äº†ï¼Œæ‰€ä»¥ä¸ºäº†è¿›ä¸€æ­¥çš„è¯„ä¼°ï¼Œæˆ‘ä»¬éœ€è¦åŠ å…¥ï¼šæ··æ·†çŸ©é˜µï¼Œç²¾ç¡®ç‡ï¼ˆæŒæ¡ï¼‰ï¼Œå¬å›ç‡ï¼ˆæŒæ¡ï¼‰ï¼ŒF1 å€¼ï¼ˆF1-scoreï¼‰ï¼ˆæŒæ¡ï¼‰ï¼ŒROC æ›²çº¿ï¼ˆäº†è§£ï¼‰ï¼ŒAUC å€¼ï¼ˆäº†è§£ï¼‰ã€‚</p>
<h2 data-id="heading-19">æ··æ·†çŸ©é˜µ</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1ba98dbdc165485eb9ad6df169d264cc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOq6YeM55qE56C05rC055O2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768711840&amp;x-signature=1cq1zIl99QrSFaB98rTO0QHckOo%3D" alt="image.png" loading="lazy"/></p>
<p>é»˜è®¤æ˜¯å°†åˆ†ç±»å°‘çš„å½“ä½œæ­£ä¾‹</p>
<p>å·²çŸ¥ æ¶ä¸ºæ­£ä¾‹ï¼Œè‰¯ä¸ºåä¾‹</p>
<ul>
<li>æ­£ä¾‹æœ‰6ä¸ªï¼Œé¢„æµ‹ç»“æœ 6æ¶ï¼Œæ‰€ä»¥æ­£ä¾‹æ˜¯ 6ï¼Œå‡ä¾‹æ˜¯0</li>
<li>å‡ä¾‹æœ‰4ä¸ªï¼Œé¢„æµ‹ç»“æœ 1è‰¯ï¼Œæ‰€ä»¥æ­£ä¾‹æ˜¯ 3ï¼Œå‡ä¾‹æ˜¯1</li>
</ul>
<p>æ­¤å¤–è¿˜è¦è¯„ä¼°é¢„æµ‹ç»“æœï¼Œæ ¹æ®é¢„æµ‹ç»“æœé€‰æ‹©ä½¿ç”¨çš„æ¨¡å‹ã€‚</p>
<p>æ³¨æ„ï¼šTP+FN+FP+TN = æ€»æ ·æœ¬æ•°é‡</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f0e1a4b025b446118ba1b6d8c9394421~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOq6YeM55qE56C05rC055O2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768711840&amp;x-signature=p66OTIZA4ZmNXttaskZOmKRYSsg%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-20">æ¡ˆä¾‹</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/710abc5279764825a44c0f68422f71cd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOq6YeM55qE56C05rC055O2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768711840&amp;x-signature=YukyoT%2FsTKNqvJFf%2BVpIJ9elc%2BQ%3D" alt="image.png" loading="lazy"/></p>
<pre><code class="hljs language-py" lang="py"><span class="hljs-comment"># æ··æ·†</span>
<span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd
<span class="hljs-keyword">from</span> sklearn.metrics <span class="hljs-keyword">import</span> confusion_matrix

<span class="hljs-comment"># <span class="hljs-doctag">TODO:</span> 1. å®šä¹‰æ•°æ®é›†ï¼Œè¡¨ç¤ºï¼šçœŸå®æ ·æœ¬(å…±è®¡10ä¸ªï¼Œ6ä¸ªæ¶å¿ƒï¼Œ4ä¸ªè‰¯æ€§) = è®¾ç½®ï¼Œæ¶æ€§ï¼ˆæ­£ä¾‹ï¼‰è‰¯æ€§ï¼ˆåä¾‹ï¼‰</span>

y_train = [<span class="hljs-string">'æ¶æ€§'</span>, <span class="hljs-string">'æ¶æ€§'</span>, <span class="hljs-string">'æ¶æ€§'</span>, <span class="hljs-string">'æ¶æ€§'</span>, <span class="hljs-string">'æ¶æ€§'</span>, <span class="hljs-string">'æ¶æ€§'</span>, <span class="hljs-string">'è‰¯æ€§'</span>, <span class="hljs-string">'è‰¯æ€§'</span>, <span class="hljs-string">'è‰¯æ€§'</span>, <span class="hljs-string">'è‰¯æ€§'</span>]
<span class="hljs-comment"># <span class="hljs-doctag">TODO:</span> 2. å®šä¹‰æ ‡ç­¾å</span>
label = [<span class="hljs-string">'æ¶æ€§'</span>, <span class="hljs-string">'è‰¯æ€§'</span>]
df_label = [<span class="hljs-string">'æ¶æ€§(æ­£ä¾‹)'</span>, <span class="hljs-string">'è‰¯æ€§(åä¾‹)'</span>]
<span class="hljs-comment"># <span class="hljs-doctag">TODO:</span> 3. é¢„æµ‹ç»“æœAï¼Œé¢„æµ‹å¯¹äº†3ä¸ªæ¶æ€§è‚¿ç˜¤ï¼Œ4ä¸ªè‰¯æ€§è‚¿ç˜¤ã€‚</span>
y_predA = [<span class="hljs-string">'æ¶æ€§'</span>, <span class="hljs-string">'æ¶æ€§'</span>, <span class="hljs-string">'æ¶æ€§'</span>, <span class="hljs-string">'è‰¯æ€§'</span>, <span class="hljs-string">'è‰¯æ€§'</span>, <span class="hljs-string">'è‰¯æ€§'</span>, <span class="hljs-string">'è‰¯æ€§'</span>, <span class="hljs-string">'è‰¯æ€§'</span>, <span class="hljs-string">'è‰¯æ€§'</span>, <span class="hljs-string">'è‰¯æ€§'</span>]

<span class="hljs-comment"># TODOï¼š4. å°†çœŸå®å€¼å’Œé¢„æµ‹å€¼ä¼ é€’ç»™æ··æ·†çŸ©é˜µ</span>
<span class="hljs-comment"># å‚æ•°ä¸€ï¼šçœŸå®å€¼ï¼Œå‚æ•°äºŒï¼šé¢„æµ‹å€¼ï¼Œå‚æ•°ä¸‰ï¼šæ ‡ç­¾ï¼ˆåé¢è®¡ç®—ç”¨çš„ï¼Œæ‰“å°çš„æ—¶å€™ä¸ä¼šå‡ºç°ï¼‰</span>
cm_A = confusion_matrix(y_train, y_predA, labels=label)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f'æ··æ·†çŸ©é˜µA\n<span class="hljs-subst">{cm_A}</span>'</span>) <span class="hljs-comment"># [[3 3] [0 4]]</span>

<span class="hljs-comment"># <span class="hljs-doctag">TODO:</span> 5. æŠŠæ··æ·†çŸ©é˜µè½¬æˆ DataFrame</span>
df_A = pd.DataFrame(cm_A, index=df_label, columns=df_label)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f'æ··æ·†çŸ©é˜µA\n<span class="hljs-subst">{df_A}</span>'</span>)
<span class="hljs-comment">#        æ¶æ€§(æ­£ä¾‹)  è‰¯æ€§(åä¾‹)</span>
<span class="hljs-comment"># æ¶æ€§(æ­£ä¾‹)       3       3</span>
<span class="hljs-comment"># è‰¯æ€§(åä¾‹)       0       4</span>

<span class="hljs-comment"># TODO 6. æµ‹è¯•ç»“æœB</span>
y_predB = [<span class="hljs-string">'æ¶æ€§'</span>, <span class="hljs-string">'æ¶æ€§'</span>, <span class="hljs-string">'æ¶æ€§'</span>, <span class="hljs-string">'æ¶æ€§'</span>, <span class="hljs-string">'æ¶æ€§'</span>, <span class="hljs-string">'æ¶æ€§'</span>, <span class="hljs-string">'æ¶æ€§'</span>, <span class="hljs-string">'æ¶æ€§'</span>, <span class="hljs-string">'æ¶æ€§'</span>, <span class="hljs-string">'è‰¯æ€§'</span>]
cm_B = confusion_matrix(y_train, y_predB, labels=label)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f'æ··æ·†çŸ©é˜µB\n<span class="hljs-subst">{cm_B}</span>'</span>)
</code></pre>
<h2 data-id="heading-21">åˆ†ç±»è¯„ä¼°æ–¹æ³•</h2>
<h3 data-id="heading-22">å‡†ç¡®ç‡ï¼ŒæŸ¥å‡†ç‡</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b9eb21cbdaf445ffaf7f9a08d185167a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOq6YeM55qE56C05rC055O2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768711840&amp;x-signature=hl4Zr5De%2BTCJN%2B2cPjjWimQXMVU%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-23">å¬å›ç‡ï¼ŒæŸ¥å…¨ç‡</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/78e0cfc6860d42888682edca156a41c4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOq6YeM55qE56C05rC055O2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768711840&amp;x-signature=BO5xDnjFJkpzERq3XDHE%2FtjIyH0%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-24">F1</h3>
<p>è‹¥å¯¹æ¨¡å‹çš„ç²¾åº¦å’Œæ‰¾å›ç‡éƒ½æœ‰è¦æ±‚ï¼Œä½¿ç”¨ F1ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/df44d7acdbdb4b0e939de3c163a5007d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOq6YeM55qE56C05rC055O2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768711840&amp;x-signature=isOJ7jke1XAjsnuZFe%2BADGSjiJk%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-25">æ¡ˆä¾‹</h3>
<p>é€»è¾‘å›å½’ è¯„ä¼°æ–¹å¼ï¼š</p>
<blockquote>
<p>å‡†ç¡®ç‡</p>
</blockquote>
<p>é¢„æµ‹æ­£ç¡®çš„ / æ ·æœ¬æ€»æ•°ï¼Œå³ï¼š(tp + tn) / æ ·æœ¬æ€»æ•°</p>
<blockquote>
<p>ç²¾ç¡®ç‡(æŸ¥å‡†ç‡ï¼ŒPrecision)</p>
</blockquote>
<p>çœŸæ­£ä¾‹ / (çœŸæ­£ä¾‹ + ä¼ªæ­£ä¾‹)ï¼Œå³ï¼što / (tp + fp)</p>
<p>çœŸæ­£ä¾‹åœ¨é¢„æµ‹ä¼ªæ­£ä¾‹çš„ç»“æœä¸­çš„å æ¯”</p>
<blockquote>
<p>å¬å›ç‡ï¼ˆæŸ¥é‡ç‡ï¼ŒRecallï¼‰</p>
</blockquote>
<p>çœŸæ­£ä¾‹ / ï¼ˆçœŸæ­£ä¾‹ + ä¼ªåä¾‹ï¼‰ï¼Œå³ï¼štp / (tp + fn)</p>
<p>çœŸæ­£ä¾‹åœ¨çœŸå®æ­£ä¾‹æ ·æœ¬ä¸­çš„æ ·æœ¬çš„å æ¯”</p>
<blockquote>
<p>F1 å€¼ï¼ˆF1-Scoreï¼‰ï¼š</p>
</blockquote>
<p>2 * ç²¾ç¡®ç‡ * å¬å›ç‡ / (ç²¾ç¡®ç‡ + å¬å›ç‡)</p>
<p>æ—¢è¦è€ƒè™‘ç²¾ç¡®ç‡ï¼Œè¿˜è¦è€ƒè™‘å¬å›ç‡çš„æƒ…å†µ</p>
<p><strong>åŸºäºä¸Šé¢çš„æ¡ˆä¾‹è®¡ç®—</strong></p>
<ul>
<li>pos_labelï¼šæŒ‡å®šæ­£ä¾‹æ˜¯é‚£ä¸ªï¼Œå¦‚æœä¸æŒ‡å®šä¼šæŠ¥é”™ï¼Œå…¶ä¸­ labels æŒ‡å®šå‘Šè¯‰ sklearn æœ‰å“ªäº›ç±»åˆ«</li>
</ul>
<pre><code class="hljs language-py" lang="py"><span class="hljs-keyword">from</span> sklearn.metrics <span class="hljs-keyword">import</span> precision_score, recall_score, f1_score

<span class="hljs-comment"># ç²¾ç¡®ç‡</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">f'é¢„æµ‹ç»“æœAçš„ç²¾ç¡®ç‡ï¼š<span class="hljs-subst">{precision_score(y_train, y_predA, pos_label=<span class="hljs-string">"æ¶æ€§"</span>)}</span>'</span>) <span class="hljs-comment"># é¢„æµ‹ç»“æœAçš„ç²¾ç¡®ç‡ï¼š1.0</span>
<span class="hljs-comment"># å¬å›ç‡</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">f'é¢„æµ‹ç»“æœBçš„å¬å›ç‡ï¼š<span class="hljs-subst">{recall_score(y_train, y_predB, pos_label=<span class="hljs-string">"æ¶æ€§"</span>)}</span>'</span>) <span class="hljs-comment"># é¢„æµ‹ç»“æœBçš„å¬å›ç‡ï¼š1.0</span>
<span class="hljs-comment"># F1 å€¼</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">f'é¢„æµ‹ç»“æœBçš„F1å€¼ï¼š<span class="hljs-subst">{f1_score(y_train, y_predB, pos_label=<span class="hljs-string">"æ¶æ€§"</span>)}</span>'</span>) <span class="hljs-comment"># é¢„æµ‹ç»“æœBçš„F1å€¼ï¼š0.8</span>
</code></pre>
<h2 data-id="heading-26">AUC æŒ‡æ ‡å’Œ ROC æ›²çº¿</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6e28bf22cf074fbab74f964ecccddb8d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOq6YeM55qE56C05rC055O2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768711840&amp;x-signature=ARmWzR%2BqEajfAnFYwp5JTvZTZ8A%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1af2cc87e18c4820841f0354098bcb5e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOq6YeM55qE56C05rC055O2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768711840&amp;x-signature=qdco9DdnQOZK7wnVrQkT%2F44OFTM%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-27">æ¡ˆä¾‹</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9e88612dea1549dc887ffa5b66aa75ec~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOq6YeM55qE56C05rC055O2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768711840&amp;x-signature=qeG%2BFn4vqrpHQJzgBrWbsrhuPyQ%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/947f689bd4bb4496bed66e46fd89a8ce~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOq6YeM55qE56C05rC055O2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768711840&amp;x-signature=8ppfXNvlK9zADdcJAH9Zr5RVS6w%3D" alt="image.png" loading="lazy"/></p>
<ul>
<li>AUC æ˜¯ ROC æ›²çº¿ä¸‹æ–¹çš„é¢ç§¯ï¼Œç”¨äºæ¯”è¾ƒåˆ†ç±»å™¨çš„æ€§èƒ½</li>
<li>ROC æ›²çº¿ç”¨äºè¯„ä¼°äºŒå…ƒåˆ†ç±»æ¨¡å‹çš„æ€§èƒ½</li>
</ul>
<h3 data-id="heading-28">æ•°æ®é¢„å¤„ç†</h3>
<p>æŠŠ Object ç±»å‹å¤„ç†ä¸€ä¸‹</p>
<p><strong>åŸæ•°æ®</strong>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b1818328aceb4c3e95fb26f49357a45c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOq6YeM55qE56C05rC055O2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768711840&amp;x-signature=nka0SAZs%2BIfOqkU1OyWR80%2BYeKQ%3D" alt="image.png" loading="lazy"/>
<strong>å¤„ç†ä¹‹å</strong></p>
<p>å¯ä»¥å‘ç°æŠŠobjectæ”¹æˆäº† boolï¼Œå¤šäº†ä¸¤åˆ—
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fb5ce5a736804e8ba0e4c88d7c0707cf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOq6YeM55qE56C05rC055O2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768711840&amp;x-signature=m343ImEQ%2FQyXyvD6xTDr8%2BONqsI%3D" alt="image.png" loading="lazy"/></p>
<pre><code class="hljs language-py" lang="py"><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd

<span class="hljs-comment"># <span class="hljs-doctag">TODO:</span> 1. è¯»å–æ•°æ®</span>
data = pd.read_csv(<span class="hljs-string">'./churn.csv'</span>)
<span class="hljs-comment"># print(data.info())</span>

<span class="hljs-comment"># å› ä¸ºä¸Šè¿°çš„ Churnï¼Œgender æ˜¯å­—ç¬¦ä¸²ç±»å‹ï¼Œ</span>
<span class="hljs-comment"># ä½¿ç”¨ çƒ­ç¼–ç  one-hot å¤„ç†</span>
data = pd.get_dummies(data)
<span class="hljs-comment"># print(data.info())</span>

<span class="hljs-comment"># åˆ é™¤å¤šä½™çš„ä¸¤åˆ—</span>
data.drop(columns=[<span class="hljs-string">'gender_Male'</span>, <span class="hljs-string">'Churn_No'</span>], axis=<span class="hljs-number">1</span>, inplace=<span class="hljs-literal">True</span>)

<span class="hljs-comment"># ä¿®æ”¹åˆ—å</span>
data.rename(columns={<span class="hljs-string">'Churn_Yes'</span>: <span class="hljs-string">'flag'</span>}, inplace=<span class="hljs-literal">True</span>)
<span class="hljs-built_in">print</span>(data.info())

<span class="hljs-comment"># æŸ¥çœ‹æ•°æ®æ˜¯å¦æ˜¯å‡è¡¡çš„ï¼Œå‘ç°æµå¤±çš„ç”¨æˆ·æ˜¯å°‘çš„</span>
<span class="hljs-built_in">print</span>(data.flag.value_counts()) <span class="hljs-comment"># True æµå¤±çš„ 1869</span>
</code></pre>
<h3 data-id="heading-29">æ•°æ®å¯è§†åŒ–</h3>
<pre><code class="hljs language-py" lang="py"><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt
<span class="hljs-keyword">import</span> seaborn <span class="hljs-keyword">as</span> sns

<span class="hljs-comment"># <span class="hljs-doctag">TODO:</span> 2. ç»˜åˆ¶ä¼šå‘˜æµå¤±æƒ…å†µ</span>
<span class="hljs-comment"># Contract_Month æ˜¯å¦æ˜¯æœˆåº¦ä¼š</span>
<span class="hljs-comment"># æµå¤±æƒ…å†µåˆ†ç±»ï¼ŒFalse ä¸æµå¤±</span>
sns.countplot(data, x=<span class="hljs-string">'Contract_Month'</span>, hue=<span class="hljs-string">'flag'</span>)
plt.show()
</code></pre>
<h3 data-id="heading-30">æ¨¡å‹é¢„æµ‹å’Œè¯„ä¼°</h3>
<p>åˆ†ç±»è¯„ä¼°æŠ¥å‘Šï¼Œå†…å®¹è§£é‡Š</p>
<p>å‚æ•° <code>macro avg</code> çš„æ„æ€æ˜¯å®å¹³å‡ï¼Œæ˜¯æŒ‡æ‰€æœ‰çš„åˆ†ç±»å™¨ï¼Œéƒ½æŒ‰ç…§macroçš„æ–¹å¼ï¼Œè®¡ç®—å¹³å‡å€¼ï¼Œä¸è€ƒè™‘æ ·æœ¬çš„æƒé‡ï¼Œç›´æ¥å¹³å‡ï¼Œè·Ÿæ ·æœ¬çš„æ•°é‡å’Œæƒé‡æ— å…³ï¼Œæ‰€æœ‰çš„ç‰¹å¾æƒé‡éƒ½æ˜¯ä¸€æ ·çš„ï¼Œé€‚åˆæ•°æ®é›†æ¯”è¾ƒå¹³è¡¡çš„æƒ…å†µã€‚</p>
<p>å‚æ•° <code>weighted avg</code> çš„æ„æ€æ˜¯ï¼šæƒé‡å¹³å‡ï¼Œæ˜¯æŒ‡æ‰€æœ‰çš„åˆ†ç±»å™¨ï¼Œéƒ½æŒ‰ç…§ weighted çš„æ–¹å¼ï¼Œè®¡ç®—å¹³å‡å€¼ï¼Œè€ƒè™‘æ ·æœ¬çš„æƒé‡ï¼Œæ ¹æ®æ ·æœ¬çš„æƒé‡è®¡ç®—å¹³å‡å€¼ï¼Œé€‚åˆæ•°æ®é›†æ¯”è¾ƒä¸å¹³è¡¡çš„æƒ…å†µã€‚</p>
<pre><code class="hljs language-py" lang="py"><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt
<span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd
<span class="hljs-keyword">import</span> seaborn <span class="hljs-keyword">as</span> sns
<span class="hljs-keyword">from</span> sklearn.linear_model <span class="hljs-keyword">import</span> LogisticRegression
<span class="hljs-keyword">from</span> sklearn.metrics <span class="hljs-keyword">import</span> accuracy_score, precision_score, recall_score, f1_score, roc_auc_score, \
    classification_report
<span class="hljs-keyword">from</span> sklearn.model_selection <span class="hljs-keyword">import</span> train_test_split

<span class="hljs-comment"># <span class="hljs-doctag">TODO:</span> 1. è¯»å–æ•°æ®</span>
l = <span class="hljs-string">r'E:\BaiduNetdiskDownload\Heima\25å¹´8æœˆå®Œç»“ æŒç»­æ›´æ–°ç‰ˆæœ¬\æºç è¯¾ä»¶è½¯ä»¶\04 æ­£è¯¾_æœºå™¨å­¦ä¹ -V6-25å¹´7æœˆç‰ˆæœ¬-8å¤©-AIç‰ˆæœ¬\05-é€»è¾‘å›å½’\03-ä»£ç '</span>

data = pd.read_csv(l + <span class="hljs-string">'\churn.csv'</span>)
data = pd.get_dummies(data)
data.drop(columns=[<span class="hljs-string">'gender_Male'</span>, <span class="hljs-string">'Churn_No'</span>], axis=<span class="hljs-number">1</span>, inplace=<span class="hljs-literal">True</span>)
data.rename(columns={<span class="hljs-string">'Churn_Yes'</span>: <span class="hljs-string">'flag'</span>}, inplace=<span class="hljs-literal">True</span>)

<span class="hljs-comment"># <span class="hljs-doctag">TODO:</span> 2. ç»˜åˆ¶ä¼šå‘˜æµå¤±æƒ…å†µ</span>
<span class="hljs-comment"># Contract_Month æ˜¯å¦æ˜¯æœˆåº¦ä¼š</span>
<span class="hljs-comment"># æµå¤±æƒ…å†µåˆ†ç±»ï¼ŒFalse ä¸æµå¤±</span>
<span class="hljs-comment"># sns.countplot(data, x='Contract_Month', hue='flag')</span>
<span class="hljs-comment"># plt.show()</span>

<span class="hljs-comment"># <span class="hljs-doctag">TODO:</span> 3. æ¨¡å‹è®­ç»ƒè¯„ä¼°</span>

<span class="hljs-comment"># å…³é”®ç‰¹å¾å’Œæ ‡ç­¾é€‰å–</span>
y = data[<span class="hljs-string">'flag'</span>]
x = data[[<span class="hljs-string">'Contract_Month'</span>, <span class="hljs-string">'PaymentCreditcard'</span>, <span class="hljs-string">'internet_other'</span>]]
x_train, x_test, y_train, y_test = train_test_split(x, y, test_size=<span class="hljs-number">0.2</span>, random_state=<span class="hljs-number">22</span>)

<span class="hljs-comment"># åˆ›å»ºé€»è¾‘å›å½’æ¨¡å‹ï¼Œå¹¶è®­ç»ƒ</span>
estimator = LogisticRegression()
estimator.fit(x_train, y_train)

<span class="hljs-comment"># æ¨¡å‹é¢„æµ‹</span>
y_predict = estimator.predict(x_test)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f'é¢„æµ‹å€¼ä¸ºï¼š<span class="hljs-subst">{y_predict}</span>'</span>)

<span class="hljs-comment"># TODO 4. æ¨¡å‹è¯„ä¼°</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">f'å‡†ç¡®ç‡ï¼š<span class="hljs-subst">{estimator.score(x_test, y_test)}</span>'</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f'å‡†ç¡®ç‡ï¼š<span class="hljs-subst">{accuracy_score(y_test, y_predict)}</span>'</span>) <span class="hljs-comment"># çœŸå®å€¼ï¼Œé¢„æµ‹å€¼</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">f'ç²¾ç¡®ç‡ï¼š<span class="hljs-subst">{precision_score(y_test, y_predict)}</span>'</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f'å¬å›ç‡ï¼š<span class="hljs-subst">{recall_score(y_test, y_predict)}</span>'</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f'F1å€¼:<span class="hljs-subst">{f1_score(y_test, y_predict)}</span>'</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f'rocæ›²çº¿ï¼š<span class="hljs-subst">{roc_auc_score(y_test, y_predict)}</span>'</span>)

<span class="hljs-built_in">print</span>(<span class="hljs-string">f'åˆ†ç±»æŠ¥å‘Šï¼š<span class="hljs-subst">{classification_report(y_test, y_predict)}</span>'</span>)
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1e1f8e838c7744fd8ade079cc12b847f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOq6YeM55qE56C05rC055O2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768711840&amp;x-signature=kGR1YLcMiGULfG3OgcaAFGlZ6KY%3D" alt="image.png" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç®€è®° | ä¸€ä¸ªåŸºäº AntD çš„é«˜æ•ˆ useDrawer Hooks]]></title>    <link>https://juejin.cn/post/7593645549178568713</link>    <guid>https://juejin.cn/post/7593645549178568713</guid>    <pubDate>2026-01-11T04:50:09.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7593645549178568713" data-draft-id="7593603345518428187" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç®€è®° | ä¸€ä¸ªåŸºäº AntD çš„é«˜æ•ˆ useDrawer Hooks"/> <meta itemprop="keywords" content="å‰ç«¯,React.js,è®¾è®¡"/> <meta itemprop="datePublished" content="2026-01-11T04:50:09.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ™šé£äºˆæ˜Ÿ"/> <meta itemprop="url" content="https://juejin.cn/user/4344859055106215"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç®€è®° | ä¸€ä¸ªåŸºäº AntD çš„é«˜æ•ˆ useDrawer Hooks
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4344859055106215/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ™šé£äºˆæ˜Ÿ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-11T04:50:09.000Z" title="Sun Jan 11 2026 04:50:09 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    7
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨åŸºäº Ant Design çš„åå°ç®¡ç†ç³»ç»Ÿå¼€å‘ä¸­ï¼Œ<code>Drawer</code>ï¼ˆæŠ½å±‰ï¼‰æ˜¯ä¸€ä¸ªéå¸¸é«˜é¢‘ä½¿ç”¨çš„ç»„ä»¶ï¼Œå¸¸ç”¨äºæ–°å¢ã€ç¼–è¾‘æˆ–å±•ç¤ºè¯¦æƒ…ã€‚</p>
<p>å¦‚æœä½ ç»å¸¸å†™ç±»ä¼¼ä¸‹é¢è¿™æ ·çš„ä»£ç ï¼Œä½ å¯èƒ½å·²ç»æ„Ÿåˆ°äº†åŒå€¦ï¼š</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">const</span> [visible, setVisible] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);
<span class="hljs-keyword">const</span> [loading, setLoading] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);
<span class="hljs-keyword">const</span> [currentRow, setCurrentRow] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">null</span>);

<span class="hljs-comment">// ...ä¸€å¤§å †å¤„ç† openã€closeã€submit çš„å‡½æ•°</span>
</code></pre>
<p>æ¯æ¬¡éƒ½è¦é‡å¤ç®¡ç† <code>visible</code>ã€<code>loading</code> çŠ¶æ€ï¼Œè¿˜è¦æ‰‹åŠ¨å†™åº•éƒ¨çš„â€œå–æ¶ˆ/ç¡®è®¤â€æŒ‰é’®é€»è¾‘ã€‚åˆ©ç”¨ React Hooksï¼Œæˆ‘ä»¬æ¥å°è£…ä¸€ä¸ª <code>useDrawer</code>ï¼Œå½»åº•å°†æŠ½å±‰çš„<strong>UI é€»è¾‘</strong>ä¸<strong>ä¸šåŠ¡é€»è¾‘</strong>è§£è€¦ã€‚</p>
<h2 data-id="heading-0">æ ¸å¿ƒè®¾è®¡æ€è·¯</h2>
<p>æˆ‘ä»¬éœ€è¦ä¸€ä¸ª Hookï¼Œå®ƒèƒ½å¤Ÿï¼š</p>
<ol>
<li><strong>è‡ªåŠ¨ç®¡ç†æ˜¾éšçŠ¶æ€</strong>ï¼šä¸éœ€è¦åœ¨çˆ¶ç»„ä»¶æ‰‹åŠ¨ <code>useState</code>ã€‚</li>
<li><strong>ä¾¿æ·ä¼ å‚</strong>ï¼šæ‰“å¼€æŠ½å±‰æ—¶å¯ä»¥ä¼ å…¥æ•°æ®ï¼ˆä¾‹å¦‚ç¼–è¾‘è¡Œæ•°æ®ï¼‰ã€‚</li>
<li><strong>ç»Ÿä¸€äº¤äº’</strong>ï¼šè‡ªåŠ¨ç”Ÿæˆåº•éƒ¨çš„â€œå–æ¶ˆâ€å’Œâ€œä¿å­˜â€æŒ‰é’®ã€‚</li>
<li><strong>ç»Ÿä¸€æäº¤é€»è¾‘</strong>ï¼šé€šè¿‡ Ref è°ƒç”¨å­ç»„ä»¶çš„ <code>save</code> æ–¹æ³•ï¼Œè‡ªåŠ¨å¤„ç† loading çŠ¶æ€ã€‚</li>
</ol>
<h2 data-id="heading-1">ä»£ç å®ç°</h2>
<p>è¿™æ˜¯æˆ‘ä»¬çš„ <code>useDrawer</code> å®Œæ•´å®ç°ï¼ˆTypeScriptï¼‰ï¼š</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, { useState, useCallback, useRef, useMemo } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Drawer</span>, <span class="hljs-title class_">Space</span>, <span class="hljs-title class_">Button</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'antd'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-keyword">type</span> { <span class="hljs-title class_">DrawerProps</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'antd'</span>;

<span class="hljs-comment">// çº¦å®šå­ç»„ä»¶å¿…é¡»æš´éœ² save æ–¹æ³•</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">ComponentRef</span> {
  <span class="hljs-attr">save</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt;;
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> useDrawer&lt;T <span class="hljs-keyword">extends</span> <span class="hljs-built_in">object</span>&gt;(
  <span class="hljs-title class_">Component</span>: <span class="hljs-title class_">React</span>.<span class="hljs-property">ComponentType</span>&lt;T&gt;,
  <span class="hljs-attr">drawerProps</span>: <span class="hljs-title class_">Omit</span>&lt;<span class="hljs-title class_">DrawerProps</span>, <span class="hljs-string">'open'</span> | <span class="hljs-string">'onClose'</span>&gt;
) {
  <span class="hljs-keyword">const</span> componentRef = useRef&lt;<span class="hljs-title class_">ComponentRef</span>&gt;(<span class="hljs-literal">null</span>);
  <span class="hljs-keyword">const</span> [open, setOpen] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);
  <span class="hljs-keyword">const</span> [loading, setLoading] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);
  <span class="hljs-keyword">const</span> [componentProps, setComponentProps] = useState&lt;T | <span class="hljs-literal">null</span>&gt;(<span class="hljs-literal">null</span>);

  <span class="hljs-comment">// æ‰“å¼€æŠ½å±‰ï¼Œæ”¯æŒä¼ å…¥åˆå§‹ Props</span>
  <span class="hljs-keyword">const</span> show = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">(<span class="hljs-params">props?: T</span>) =&gt;</span> {
    <span class="hljs-title function_">setComponentProps</span>(props ?? <span class="hljs-literal">null</span>);
    <span class="hljs-title function_">setOpen</span>(<span class="hljs-literal">true</span>);
  }, []);

  <span class="hljs-keyword">const</span> close = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">setOpen</span>(<span class="hljs-literal">false</span>);
    <span class="hljs-title function_">setComponentProps</span>(<span class="hljs-literal">null</span>);
  }, []);

  <span class="hljs-keyword">const</span> <span class="hljs-title class_">DrawerHolder</span> = <span class="hljs-title function_">useMemo</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">if</span> (!open) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;

    <span class="hljs-keyword">return</span> (
      <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Drawer</span>
        <span class="hljs-attr">open</span>=<span class="hljs-string">{open}</span>
        <span class="hljs-attr">onClose</span>=<span class="hljs-string">{close}</span>
        <span class="hljs-attr">destroyOnHidden</span>
        <span class="hljs-attr">extra</span>=<span class="hljs-string">{</span>
          &lt;<span class="hljs-attr">Space</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{close}</span>&gt;</span>å–æ¶ˆ<span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">Button</span>
              <span class="hljs-attr">type</span>=<span class="hljs-string">"primary"</span>
              <span class="hljs-attr">loading</span>=<span class="hljs-string">{loading}</span>
              <span class="hljs-attr">onClick</span>=<span class="hljs-string">{async</span> () =&gt;</span> {
                try {
                  setLoading(true);
                  // æ ¸å¿ƒï¼šè°ƒç”¨å­ç»„ä»¶çš„ save æ–¹æ³•
                  await componentRef.current?.save();
                  close();
                } catch (err) {
                  console.error('ä¿å­˜å¤±è´¥', err);
                } finally {
                  setLoading(false);
                }
              }}
            &gt;
              ä¿å­˜
            <span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">Space</span>&gt;</span>
        }
        {...drawerProps}
      &gt;
        {/* å°† ref å’Œ props ä¼ é€’ç»™ä¸šåŠ¡ç»„ä»¶ */}
        <span class="hljs-tag">&lt;<span class="hljs-name">Component</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">{componentRef}</span> {<span class="hljs-attr">...</span>(<span class="hljs-attr">componentProps</span> <span class="hljs-attr">as</span> <span class="hljs-attr">T</span>)} /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">Drawer</span>&gt;</span></span>
    );
  }, [open, close, drawerProps, loading, <span class="hljs-title class_">Component</span>, componentProps]);

  <span class="hljs-keyword">return</span> {
    <span class="hljs-attr">open</span>: show,
    close,
    <span class="hljs-title class_">DrawerHolder</span>
  };
}
</code></pre>
<h2 data-id="heading-2">å¦‚ä½•ä½¿ç”¨ï¼Ÿ</h2>
<p>ä½¿ç”¨è¿™ä¸ª Hook åˆ†ä¸ºä¸¤æ­¥ï¼šå®šä¹‰è¡¨å•ç»„ä»¶ã€åœ¨çˆ¶ç»„ä»¶è°ƒç”¨ã€‚</p>
<h3 data-id="heading-3">1. å®šä¹‰ä¸šåŠ¡è¡¨å•ç»„ä»¶</h3>
<p>å­ç»„ä»¶éœ€è¦ä½¿ç”¨ <code>forwardRef</code> å’Œ <code>useImperativeHandle</code> æš´éœ²ä¸€ä¸ª <code>save</code> æ–¹æ³•ã€‚è¿™ä¸ªæ–¹æ³•é€šå¸¸åŒ…å«è¡¨å•éªŒè¯å’Œæ¥å£è¯·æ±‚ã€‚</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> { forwardRef, useImperativeHandle } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Form</span>, <span class="hljs-title class_">Input</span>, message } <span class="hljs-keyword">from</span> <span class="hljs-string">'antd'</span>;

<span class="hljs-comment">// UserForm.tsx</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">UserForm</span> = <span class="hljs-title function_">forwardRef</span>(<span class="hljs-function">(<span class="hljs-params">props: { id?: <span class="hljs-built_in">string</span>; name?: <span class="hljs-built_in">string</span> }, ref</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> [form] = <span class="hljs-title class_">Form</span>.<span class="hljs-title function_">useForm</span>();

  <span class="hljs-title function_">useImperativeHandle</span>(ref, <span class="hljs-function">() =&gt;</span> ({
    <span class="hljs-attr">save</span>: <span class="hljs-keyword">async</span> () =&gt; {
      <span class="hljs-comment">// 1. è§¦å‘è¡¨å•éªŒè¯</span>
      <span class="hljs-keyword">const</span> values = <span class="hljs-keyword">await</span> form.<span class="hljs-title function_">validateFields</span>();
      
      <span class="hljs-comment">// 2. æ¨¡æ‹Ÿæ¥å£è¯·æ±‚</span>
      <span class="hljs-keyword">await</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function"><span class="hljs-params">resolve</span> =&gt;</span> <span class="hljs-built_in">setTimeout</span>(resolve, <span class="hljs-number">1000</span>));
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æäº¤æ•°æ®:'</span>, { ...props, ...values });
      
      message.<span class="hljs-title function_">success</span>(<span class="hljs-string">'ä¿å­˜æˆåŠŸ'</span>);
    }
  }));

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Form</span> <span class="hljs-attr">form</span>=<span class="hljs-string">{form}</span> <span class="hljs-attr">initialValues</span>=<span class="hljs-string">{props}</span> <span class="hljs-attr">layout</span>=<span class="hljs-string">"vertical"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Form.Item</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"name"</span> <span class="hljs-attr">Label</span>=<span class="hljs-string">"ç”¨æˆ·åç§°"</span> <span class="hljs-attr">rules</span>=<span class="hljs-string">{[{</span> <span class="hljs-attr">required:</span> <span class="hljs-attr">true</span> }]}&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Input</span> /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">Form.Item</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">Form</span>&gt;</span></span>
  );
});

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">UserForm</span>;
</code></pre>
<h3 data-id="heading-4">2. åœ¨çˆ¶ç»„ä»¶ä¸­è°ƒç”¨</h3>
<p>åœ¨çˆ¶ç»„ä»¶ä¸­ï¼Œæˆ‘ä»¬åªéœ€è¦åƒè°ƒç”¨å‡½æ•°ä¸€æ ·æ‰“å¼€æŠ½å±‰ï¼Œå®Œå…¨ä¸éœ€è¦å…³å¿ƒ visible çŠ¶æ€å’Œ loading çŠ¶æ€ã€‚</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Button</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'antd'</span>;
<span class="hljs-keyword">import</span> { useDrawer } <span class="hljs-keyword">from</span> <span class="hljs-string">'./hooks/useDrawer'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">UserForm</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./UserForm'</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title function_">UserList</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-comment">// åˆå§‹åŒ– Hookï¼Œä¼ å…¥ç»„ä»¶é…ç½®</span>
  <span class="hljs-keyword">const</span> { open, <span class="hljs-title class_">DrawerHolder</span> } = <span class="hljs-title function_">useDrawer</span>(<span class="hljs-title class_">UserForm</span>, {
    <span class="hljs-attr">title</span>: <span class="hljs-string">'ç¼–è¾‘ç”¨æˆ·'</span>,
    <span class="hljs-attr">width</span>: <span class="hljs-number">600</span>
  });

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleEdit</span> = (<span class="hljs-params">record</span>) =&gt; {
    <span class="hljs-comment">// ä¸€è¡Œä»£ç å”¤èµ·æŠ½å±‰ï¼Œå¹¶é€ä¼ æ•°æ®</span>
    <span class="hljs-title function_">open</span>({ <span class="hljs-attr">id</span>: record.<span class="hljs-property">id</span>, <span class="hljs-attr">name</span>: record.<span class="hljs-property">name</span> });
  };

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"primary"</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> open()}&gt;æ–°å¢ç”¨æˆ·<span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> handleEdit({ id: '1', name: 'John' })}&gt;ç¼–è¾‘ç”¨æˆ·<span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span>
      
      {/* æ¸²æŸ“æŠ½å±‰å ä½ç¬¦ */}
      {DrawerHolder}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};
</code></pre>
<h2 data-id="heading-5">æ€»ç»“</h2>
<ol>
<li><strong>é€»è¾‘è§£è€¦</strong>ï¼šçˆ¶ç»„ä»¶åªè´Ÿè´£â€œä»€ä¹ˆæ—¶å€™æ‰“å¼€â€ï¼Œå­ç»„ä»¶è´Ÿè´£â€œå…·ä½“å†…å®¹â€å’Œâ€œå¦‚ä½•ä¿å­˜â€ã€‚</li>
<li><strong>UI ç»Ÿä¸€</strong>ï¼šæ‰€æœ‰æŠ½å±‰éƒ½æœ‰ç»Ÿä¸€çš„â€œå–æ¶ˆ/ä¿å­˜â€æŒ‰é’®æ ·å¼å’Œä½ç½®ã€‚å¦‚æœä¸éœ€è¦ï¼Œå°† <code>extra</code> çš„å€¼è®¾ç½®ä¸º <code>&lt;&gt;&lt;/&gt;</code> å³å¯ã€‚</li>
<li><strong>æç®€è°ƒç”¨</strong>ï¼šé€šè¿‡ <code>open(props)</code> ç›´æ¥ä¼ å‚ï¼Œé¿å…äº†åœ¨çˆ¶ç»„ä»¶å†å®šä¹‰ä¸€ä¸ª <code>currentEditItem</code> çŠ¶æ€æ¥æš‚å­˜æ•°æ®ã€‚</li>
<li><strong>Loading è‡ªåŠ¨æ‰˜ç®¡</strong>ï¼š<code>save</code> æ–¹æ³•æ˜¯ Promiseï¼ŒHook ä¼šè‡ªåŠ¨å¤„ç† Pending æœŸé—´çš„æŒ‰é’® loading çŠ¶æ€ï¼Œé˜²æ­¢é‡å¤æäº¤ã€‚</li>
<li><strong>ç”Ÿå‘½å‘¨æœŸ</strong>:
<ul>
<li>Drawer é»˜è®¤è®¾ç½®äº† <code>destroyOnHidden: true</code>ã€‚</li>
<li>æ¯æ¬¡å…³é—­ Drawer æ—¶ï¼Œå†…éƒ¨ç»„ä»¶ä¼šè¢«é”€æ¯ï¼›æ¯æ¬¡æ‰“å¼€æ—¶ï¼Œå†…éƒ¨ç»„ä»¶ä¼šé‡æ–°æŒ‚è½½ã€‚è¿™ç¡®ä¿äº†è¡¨å•çŠ¶æ€çš„é‡ç½®ã€‚</li>
</ul>
</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»£ç è·‘å¾—æ…¢ï¼Ÿè®©Springçš„StopWatchå‘Šè¯‰ä½ çœŸç›¸ï¼]]></title>    <link>https://juejin.cn/post/7593630465379598374</link>    <guid>https://juejin.cn/post/7593630465379598374</guid>    <pubDate>2026-01-11T04:54:58.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7593630465379598374" data-draft-id="7593607642552827930" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»£ç è·‘å¾—æ…¢ï¼Ÿè®©Springçš„StopWatchå‘Šè¯‰ä½ çœŸç›¸ï¼"/> <meta itemprop="keywords" content="åç«¯,GitHub,Java"/> <meta itemprop="datePublished" content="2026-01-11T04:54:58.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è‹æ¸¡è‹‡"/> <meta itemprop="url" content="https://juejin.cn/user/729731453429159"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»£ç è·‘å¾—æ…¢ï¼Ÿè®©Springçš„StopWatchå‘Šè¯‰ä½ çœŸç›¸ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/729731453429159/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è‹æ¸¡è‹‡
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-11T04:54:58.000Z" title="Sun Jan 11 2026 04:54:58 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{line-height:1.75;font-family:-apple-system-font,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei UI,Microsoft YaHei,Arial,sans-serif;letter-spacing:2px;background-image:linear-gradient(90deg,rgba(50,0,0,.05) 3%,transparent 0),linear-gradient(1turn,rgba(50,0,0,.05) 3%,transparent 0);background-size:20px 20px;background-position:50%;word-break:break-word;font-weight:400;font-size:15px;overflow-x:hidden;color:#333}.markdown-body h1{font-size:23px;margin-bottom:5px;font-weight:700;padding-left:10px;border-left:5px solid #773098}.markdown-body h2{font-size:19px;font-weight:700;padding-left:10px;border-left:5px solid #916dd5}.markdown-body h3{font-size:17px;font-weight:700;padding-left:10px;border-left:5px solid #d89cf6}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{font-size:14px;margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{display:block;max-width:100%;margin:1em 0;border-radius:6px;box-shadow:2px 4px 7px #999;user-select:none}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{padding:.2em .5em;font-weight:700;font-family:-apple-system-font,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei UI,Microsoft YaHei,Arial,sans-serif;font-size:1em;color:#916dd5;word-break:break-word;overflow-x:auto;background-color:none;border-radius:2px}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;font-family:-apple-system-font,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei UI,Microsoft YaHei,Arial,sans-serif;font-weight:400;font-size:.9em;padding:16px 12px;margin:0;color:#333;word-break:normal;overflow-x:auto;background:#f8f8f8;scroll-behavior:smooth}.markdown-body a{text-decoration:none;color:#916dd5;font-weight:700;border-bottom:1px solid #916dd5}.markdown-body a:active,.markdown-body a:hover{color:#773098}.markdown-body table{display:inline-block!important;font-size:14px;width:auto;max-width:100%;overflow:auto;border:1px solid #916dd5;border-collapse:collapse}.markdown-body thead{background-color:#916dd5;color:#fff;text-align:left}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px;border:1px solid #916dd5}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #d89cf6;background-color:#f4eeff}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0;line-height:26px}.markdown-body ol,.markdown-body ul{padding-left:28px;list-style-type:circle}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body b,.markdown-body strong{color:#916dd5;font-weight:700}.markdown-body b:before,.markdown-body strong:before{content:"ã€Œ"}.markdown-body b:after,.markdown-body strong:after{content:"ã€"}.markdown-body em,.markdown-body i{color:#916dd5}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="github-gist">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#fff;color:#333}.hljs-comment,.hljs-meta{color:#969896}.hljs-emphasis,.hljs-quote,.hljs-strong,.hljs-template-variable,.hljs-variable{color:#df5000}.hljs-keyword,.hljs-selector-tag,.hljs-type{color:#d73a49}.hljs-attribute,.hljs-bullet,.hljs-literal,.hljs-symbol{color:#0086b3}.hljs-name,.hljs-section{color:#63a35c}.hljs-tag{color:#333}.hljs-attr,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-id,.hljs-selector-pseudo,.hljs-title{color:#6f42c1}.hljs-addition{color:#55a532;background-color:#eaffea}.hljs-deletion{color:#bd2c00;background-color:#ffecec}.hljs-link{text-decoration:underline}.hljs-number{color:#005cc5}.hljs-string{color:#032f62}</style><blockquote>
<p>å¼€å‘æ—¶æ€»è§‰å¾—ä»£ç â€œå—–å—–å¿«â€ï¼Œä¸Šçº¿åç”¨æˆ·å´åé¦ˆâ€œç­‰ç­‰ç­‰â€â€”â€”è¿™ä¸­é—´çš„è®¤çŸ¥å·®è·ï¼Œå¤§æ¦‚å°±å·®ä¸€ä¸ªè¯šå®å¯é çš„â€œä»£ç è®¡æ—¶å™¨â€ã€‚</p>
<p>ä»Šå¤©è¦èŠçš„ <code>StopWatch</code>ï¼Œå°±æ˜¯ Spring æ¡†æ¶é‡Œé‚£ä¸ªä¸èµ·çœ¼å´ç‰¹å®åœ¨çš„è®¡æ—¶å°å·¥å…·ã€‚</p>
</blockquote>
<h2 data-id="heading-0">ä¸€ã€ä»£ç ä¸­åˆ°åº•å“ªä¸ªç¯èŠ‚å‡ºäº†é—®é¢˜ï¼Ÿ</h2>
<p>ç¨‹åºå‘˜çš„ä¸€å¤©ï¼Œç»å¸¸åœ¨ä¸¤ç§çŠ¶æ€é—´åˆ‡æ¢ï¼š</p>
<p><strong>çŠ¶æ€A</strong>ï¼šï¼ˆè‡ªä¿¡æ»¡æ»¡ï¼‰â€œæˆ‘è¿™ä¸ªæ–¹æ³•ä¼˜åŒ–è¿‡äº†ï¼Œç»å¯¹é£å¿«ï¼â€</p>
<p><strong>çŠ¶æ€B</strong>ï¼šï¼ˆç”¨æˆ·åé¦ˆåï¼‰â€œä¸åº”è¯¥å•Š...æˆ‘æœ¬åœ°æµ‹è¯•æ˜æ˜å¾ˆå¿«çš„...â€</p>
<p>ç„¶åå¼€å§‹ä¸Šæ¼”ç»å…¸ä¸‰éƒ¨æ›²ï¼š</p>
<ol>
<li>ç›²çŒœï¼šâ€œæ˜¯ä¸æ˜¯æ•°æ®åº“çš„é—®é¢˜ï¼Ÿâ€</li>
<li>ç„å­¦è°ƒæ•´ï¼šè¿™é‡Œæ”¹æ”¹ï¼Œé‚£é‡ŒåŠ¨åŠ¨</li>
<li>æœ€åç”©é”…ï¼šâ€œå¯èƒ½æ˜¯ç½‘ç»œæ³¢åŠ¨å§â€ï¼ˆè¿™ä¸ªæ˜¯æˆ‘ï¼Œå‹¿cueï¼Œæ‚è„¸ï¼‰</li>
</ol>
<p>ä»Šå¤©æˆ‘è¦ä»‹ç»Springé‡Œä¸€ä¸ªæœ´å®ä½†å¼ºå¤§çš„å°å·¥å…·â€”â€”<code>StopWatch</code>ï¼Œå®ƒèƒ½å¸®ä½ æŠŠâ€œæˆ‘è§‰å¾—â€å˜æˆâ€œæ•°æ®æ˜¾ç¤ºâ€ã€‚</p>
<h2 data-id="heading-1">äºŒã€StopWatchï¼šä»£ç ä¸–ç•Œçš„â€œå¨æˆ¿å®šæ—¶å™¨â€</h2>
<h3 data-id="heading-2">2.1 å®ƒä¸æ˜¯ä»€ä¹ˆé«˜ç§‘æŠ€</h3>
<p>æƒ³è±¡ä¸€ä¸‹ä½ ç…®æ³¡é¢ï¼šæ‹¿å‡ºæ‰‹æœºï¼Œæ‰“å¼€è®¡æ—¶å™¨ï¼Œè®¾3åˆ†é’Ÿã€‚æ—¶é—´ä¸€åˆ°ï¼Œâ€œå®ï¼â€â€”â€”è¿™å°±æ˜¯<code>StopWatch</code>åœ¨ä»£ç é‡Œçš„è§’è‰²ã€‚</p>
<p>ä¸è¿‡å®ƒæ¯”æ‰‹æœºè®¡æ—¶å™¨èªæ˜ç‚¹ï¼š</p>
<ul>
<li><strong>åˆ†æ®µè®¡æ—¶</strong>ï¼šæ—¢èƒ½æµ‹â€œç…®æ°´æ—¶é—´â€ï¼Œä¹Ÿèƒ½å•ç‹¬æµ‹â€œæ³¡é¢æ—¶é—´â€</li>
<li><strong>è‡ªåŠ¨ç»Ÿè®¡</strong>ï¼šå‘Šè¯‰ä½ å„ä¸ªç¯èŠ‚çš„å æ¯”</li>
<li><strong>æ¯«ç§’çº§ç²¾åº¦</strong>ï¼šæ¯”ä½ çœ‹æ‰‹è¡¨å‡†å¤šäº†</li>
</ul>
<h3 data-id="heading-3">2.2 ä¸ºä»€ä¹ˆä¸“é—¨ç”¨å®ƒï¼Ÿä¸ç”¨System.currentTimeMillis()ï¼Ÿ</h3>
<p>å½“ç„¶å¯ä»¥ç”¨ä¼ ç»Ÿæ–¹æ³•ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">long</span> <span class="hljs-variable">start</span> <span class="hljs-operator">=</span> System.currentTimeMillis();
<span class="hljs-comment">// ä»£ç ...</span>
<span class="hljs-type">long</span> <span class="hljs-variable">end</span> <span class="hljs-operator">=</span> System.currentTimeMillis();
System.out.println(<span class="hljs-string">"è€—æ—¶ï¼š"</span> + (end - start) + <span class="hljs-string">"ms"</span>);
</code></pre>
<p>ä½†è¿™å°±åƒï¼š</p>
<ul>
<li>ç”¨çº¸ç¬”ç®—è´¦ vs ç”¨è®¡ç®—å™¨</li>
<li>ç›®æµ‹æ²¹æ¸© vs ç”¨æ¸©åº¦è®¡</li>
</ul>
<p><code>StopWatch</code> ç»™ä½ ä¸‰ä¸ªæ— æ³•æ‹’ç»çš„ç†ç”±ï¼š</p>
<ol>
<li><strong>ä»£ç æ›´å¹²å‡€</strong>ï¼šä¸ç”¨åˆ°å¤„å£°æ˜<code>startTime</code>ã€<code>endTime</code></li>
<li><strong>åŠŸèƒ½æ›´ä¸“ä¸š</strong>ï¼šæ”¯æŒå¤šä»»åŠ¡è®¡æ—¶ã€ç™¾åˆ†æ¯”è®¡ç®—</li>
<li><strong>è¾“å‡ºæ›´ç¾è§‚</strong>ï¼šè‡ªå¸¦æ¼‚äº®æ ¼å¼ï¼Œä¸ç”¨æ‰‹åŠ¨æ‹¼æ¥å­—ç¬¦ä¸²</li>
</ol>
<h2 data-id="heading-4">ä¸‰ã€å®æˆ˜ï¼šStopWatchåœ¨æˆ‘é¡¹ç›®ä¸­çš„â€œå·¥ä½œæ—¥å¸¸â€</h2>
<p>æˆ‘åœ¨å¼€å‘ <strong>Spring Insight</strong> ï¼ˆä¸€ä¸ªSpring Bootåº”ç”¨è¯Šæ–­å·¥å…·ï¼‰æ—¶ï¼Œç»å¸¸éœ€è¦çŸ¥é“å“ªéƒ¨åˆ†ä¸šåŠ¡è€—æ—¶å¤šå°‘ï¼Œè¿™æ—¶å€™ï¼Œ<code>StopWatch</code> å°±æ´¾ä¸Šç”¨åœºäº†ã€‚</p>
<blockquote>
<p>Spring Insightï¼Œä¸€ä¸ªé¢å‘Spring Bootåº”ç”¨çš„è½»é‡çº§è¯Šæ–­ä¸æ¶æ„æ´å¯Ÿå·¥å…·ã€‚</p>
<p>è¿™æ˜¯æˆ‘çš„ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼Œç›®å‰è¿˜åœ¨å¼€å‘ä¸­ã€‚</p>
<p>æœ‰å…´è¶£çš„å¤§å®¶å¯ä»¥è®¿é—®ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fiweidujiang%2Fspring-insight" target="_blank" title="https://github.com/iweidujiang/spring-insight" ref="nofollow noopener noreferrer">github.com/iweidujiangâ€¦</a>ï¼Œæœ€é‡è¦çš„æ˜¯èƒ½ç»™ä¸ªstarçš„è¯ï¼Œæˆ‘å°±èƒ½èµ·é£äº†ï¼Œå“ˆå“ˆ</p>
</blockquote>
<h3 data-id="heading-5">3.1 æ¡ˆå‘ç°åœºï¼šæ•°æ®åº“ä¿å­˜æ“ä½œ</h3>
<p>å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæˆ‘éœ€è¦è®°å½•æ¯æ¬¡æœåŠ¡è°ƒç”¨çš„é“¾è·¯ä¿¡æ¯ã€‚</p>
<p>æˆ‘æ³¨æ„åˆ°ä¿å­˜æ•°æ®æœ‰ç‚¹æ…¢ï¼Œä½†â€œæœ‰ç‚¹æ…¢â€æ˜¯ä¸ªå¾ˆæ¨¡ç³Šçš„è¯´æ³•â€”â€”æ˜¯æ…¢äº†ä¸€ç‚¹ï¼Œè¿˜æ˜¯æ…¢äº†å¾ˆå¤šï¼Ÿå“ªé‡Œæœ€æ…¢ï¼Ÿ</p>
<p>äºæ˜¯æˆ‘ç»™ä¿å­˜æ–¹æ³•è£…ä¸Šäº†â€œè®¡æ—¶å™¨â€ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">saveTraceSpan</span><span class="hljs-params">(TraceSpan span)</span> {
    <span class="hljs-comment">// æå‡ºæˆ‘çš„â€œä¾¦æ¢å·¥å…·â€â€”â€”StopWatch</span>
    <span class="hljs-type">StopWatch</span> <span class="hljs-variable">stopWatch</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StopWatch</span>();
    stopWatch.start(); <span class="hljs-comment">// æŒ‰ä¸‹å¼€å§‹é”®</span>
    
    <span class="hljs-keyword">try</span> {
        <span class="hljs-comment">// æ€€ç–‘å¯¹è±¡1å·ï¼šå¯¹è±¡è½¬æ¢</span>
        <span class="hljs-type">TraceSpanDO</span> <span class="hljs-variable">entity</span> <span class="hljs-operator">=</span> TraceSpanDO.fromModel(span);
        
        <span class="hljs-comment">// æ€€ç–‘å¯¹è±¡2å·ï¼šæ•°æ®åº“ä¿å­˜</span>
        <span class="hljs-type">boolean</span> <span class="hljs-variable">success</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">this</span>.save(entity);
        
        stopWatch.stop(); <span class="hljs-comment">// æ—¶é—´åˆ°ï¼</span>
        
        <span class="hljs-keyword">if</span> (success) {
            <span class="hljs-comment">// å…³é”®è¯æ®å‡ºç‚‰ï¼</span>
            log.debug(<span class="hljs-string">"ä¿å­˜æˆåŠŸï¼traceId={}, æ€»è€—æ—¶={}ms, çº¯æ•°æ®åº“æ“ä½œ={}ms"</span>,
                    span.getTraceId(),
                    span.getDurationMs(), <span class="hljs-comment">// è¿™æ˜¯ä¸šåŠ¡æ€»è€—æ—¶</span>
                    stopWatch.getTotalTimeMillis()); <span class="hljs-comment">// è¿™æ˜¯ä¿å­˜è€—æ—¶</span>
        }
    } <span class="hljs-keyword">catch</span> (Exception e) {
        stopWatch.stop();
        log.error(<span class="hljs-string">"ä¿å­˜å¤±è´¥ï¼Œè€—æ—¶{}ms"</span>, stopWatch.getTotalTimeMillis(), e);
        <span class="hljs-keyword">throw</span> e;
    }
}
</code></pre>
<h3 data-id="heading-6">3.2 ä¾¦æ¢æŠ¥å‘Š</h3>
<p>è¿è¡Œåï¼Œæˆ‘çœ‹åˆ°è¿™æ ·çš„æ—¥å¿—ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">ä¿å­˜æˆåŠŸï¼<span class="hljs-attr">traceId</span>=<span class="hljs-number">19</span>bab1acce95f2a8, æ€»è€—æ—¶=<span class="hljs-number">150</span>ms, çº¯æ•°æ®åº“æ“ä½œ=<span class="hljs-number">145</span>ms
</code></pre>
<p><strong>ç ´æ¡ˆäº†ï¼</strong> 150æ¯«ç§’çš„ä¸šåŠ¡ä¸­ï¼Œæ•°æ®åº“æ“ä½œç‹¬å 145æ¯«ç§’ï¼è¿™å°±åƒï¼š</p>
<ul>
<li>ä½ å»å¿«é¤åº—ç‚¹é¤</li>
<li>æ’é˜Ÿ1åˆ†é’Ÿï¼Œç­‰é¤15åˆ†é’Ÿ</li>
<li>ä¼˜åŒ–æ–¹å‘å¾ˆæ˜æ˜¾ï¼šåˆ«ç ”ç©¶æ€ä¹ˆæ’é˜Ÿæ›´å¿«äº†ï¼Œå»çœ‹çœ‹å¨æˆ¿ä¸ºä»€ä¹ˆè¿™ä¹ˆæ…¢å§ï¼</li>
</ul>
<h3 data-id="heading-7">3.3 æ›´ç²¾ç»†çš„ä¾¦æŸ¥ï¼šåˆ†æ®µè®¡æ—¶</h3>
<p>æœ‰æ—¶å€™ï¼ŒçŸ¥é“â€œæ•°æ®åº“æ…¢â€è¿˜ä¸å¤Ÿï¼Œæˆ‘è¿˜æƒ³çŸ¥é“â€œæ•°æ®åº“çš„å“ªéƒ¨åˆ†æ…¢â€ã€‚è¿™æ—¶å€™å¯ä»¥ç”¨åˆ†æ®µè®¡æ—¶ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">StopWatch</span> <span class="hljs-variable">stopWatch</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StopWatch</span>(<span class="hljs-string">"æ•°æ®åº“æ“ä½œå…¨æµç¨‹åˆ†æ"</span>);

stopWatch.start(<span class="hljs-string">"å¯¹è±¡è½¬æ¢"</span>);
<span class="hljs-type">TraceSpanDO</span> <span class="hljs-variable">entity</span> <span class="hljs-operator">=</span> TraceSpanDO.fromModel(span);
stopWatch.stop();

stopWatch.start(<span class="hljs-string">"SQLç”Ÿæˆ"</span>);
<span class="hljs-comment">// è¿™é‡Œå‡è®¾æœ‰ä¸€äº›SQLæ„å»ºé€»è¾‘</span>
stopWatch.stop();

stopWatch.start(<span class="hljs-string">"æ‰§è¡Œä¿å­˜"</span>);
<span class="hljs-type">boolean</span> <span class="hljs-variable">success</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">this</span>.save(entity);
stopWatch.stop();

<span class="hljs-comment">// ç”Ÿæˆè¯¦ç»†æŠ¥å‘Š</span>
log.debug(<span class="hljs-string">"æ•°æ®åº“ä¿å­˜è¯¦ç»†åˆ†æï¼š\n{}"</span>, stopWatch.prettyPrint());
</code></pre>
<p>è¾“å‡ºç»“æœä¼šå‘Šè¯‰ä½ ï¼š</p>
<ul>
<li>å¯¹è±¡è½¬æ¢ï¼š5msï¼ˆ3%ï¼‰</li>
<li>SQLç”Ÿæˆï¼š10msï¼ˆ7%ï¼‰</li>
<li>æ‰§è¡Œä¿å­˜ï¼š130msï¼ˆ90%ï¼‰</li>
</ul>
<p>è¿™ä¸‹è¿ä¼˜åŒ–SQLè¯­å¥éƒ½çœäº†â€”â€”ç›´æ¥çœ‹æ˜¯ä¸æ˜¯æ•°æ®åº“è¿æ¥æ± æˆ–ç½‘ç»œé—®é¢˜å§ï¼</p>
<h2 data-id="heading-8">å››ã€StopWatchçš„èŠ±å¼ç”¨æ³•</h2>
<h3 data-id="heading-9">4.1 ç»™StopWatchèµ·ä¸ªåå­—</h3>
<p>ç»™ <code>StopWatch</code> èµ·åï¼Œå°±åƒç»™ä½ çš„çŒ«èµ·åä¸€æ ·â€”â€”è™½ç„¶å®ƒä¸åœ¨ä¹ï¼Œä½†ä½ ä¼šè®°å¾—æ›´æ¸…æ¥šï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä¸èµ·åï¼šé‚£ä¸ªStopWatch</span>
<span class="hljs-type">StopWatch</span> <span class="hljs-variable">sw1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StopWatch</span>();

<span class="hljs-comment">// èµ·åï¼šä¿å­˜è®¡æ—¶å™¨</span>
<span class="hljs-type">StopWatch</span> <span class="hljs-variable">sw2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StopWatch</span>(<span class="hljs-string">"ç”¨æˆ·æ•°æ®ä¿å­˜è®¡æ—¶å™¨"</span>);
</code></pre>
<p>æ‰“å°ç»“æœæ—¶ï¼Œæœ‰åå­—çš„StopWatchä¼šè¿™æ ·æ˜¾ç¤ºï¼š</p>
<pre><code class="hljs language-lua" lang="lua">StopWatch <span class="hljs-string">'ç”¨æˆ·æ•°æ®ä¿å­˜è®¡æ—¶å™¨'</span>: <span class="hljs-built_in">running</span> <span class="hljs-built_in">time</span> = <span class="hljs-number">65</span> ms
</code></pre>
<h3 data-id="heading-10">4.2 å¤šä¸ªä»»åŠ¡ï¼Œä¸€æ¬¡è®¡æ—¶</h3>
<p>StopWatchå¯ä»¥è®°å½•å¤šä¸ªä»»åŠ¡ï¼Œå°±åƒè®°å½•ä½ ä¸€å¤©çš„æ—¶é—´åˆ†é…ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">StopWatch</span> <span class="hljs-variable">day</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StopWatch</span>(<span class="hljs-string">"ç¨‹åºå‘˜çš„ä¸€å¤©"</span>);

day.start(<span class="hljs-string">"å†™ä»£ç "</span>);
Thread.sleep(<span class="hljs-number">1000</span>); <span class="hljs-comment">// å‡è£…åœ¨å†™ä»£ç </span>
day.stop();

day.start(<span class="hljs-string">"å¼€ä¼š"</span>);
Thread.sleep(<span class="hljs-number">500</span>); <span class="hljs-comment">// å‡è£…åœ¨å¼€ä¼š</span>
day.stop();

day.start(<span class="hljs-string">"ä¿®å¤bug"</span>);
Thread.sleep(<span class="hljs-number">200</span>); <span class="hljs-comment">// å‡è£…åœ¨ä¿®bug</span>
day.stop();

day.start(<span class="hljs-string">"åˆ·æŠ€æœ¯è®ºå›"</span>);
Thread.sleep(<span class="hljs-number">300</span>); <span class="hljs-comment">// æ”¾æ¾ä¸€ä¸‹</span>
day.stop();

System.out.println(day.prettyPrint());
</code></pre>
<p>è¾“å‡ºï¼š</p>
<pre><code class="hljs language-bash" lang="bash">StopWatch <span class="hljs-string">'ç¨‹åºå‘˜çš„ä¸€å¤©'</span>: 2.0186064 seconds
----------------------------------------
Seconds       %       Task name
----------------------------------------
1.005964      50%     å†™ä»£ç 
0.5018178     25%     å¼€ä¼š
0.2011992     10%     ä¿®å¤bug
0.3096254     15%     åˆ·æŠ€æœ¯è®ºå›
</code></pre>
<p>è¾“å‡ºç»“æœä¼šè®©ä½ æ¸…é†’åœ°è®¤è¯†åˆ°æ—¶é—´éƒ½å»å“ªäº†ã€‚</p>
<h2 data-id="heading-11">äº”ã€åœ¨Spring Insighté‡Œçš„çœŸå®åœºæ™¯</h2>
<p>åœ¨ <strong>Spring Insight</strong> é¡¹ç›®ä¸­ï¼Œ<code>StopWatch</code> æ‰®æ¼”ç€â€œæ•°æ®é‡‡é›†å‘˜â€çš„è§’è‰²ã€‚æ¯”å¦‚ï¼Œåˆ†æä¸€ä¸ªå®Œæ•´APIè¯·æ±‚æ—¶ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> ApiResponse <span class="hljs-title function_">handleRequest</span><span class="hljs-params">(Request req)</span> {
    <span class="hljs-type">StopWatch</span> <span class="hljs-variable">apiWatch</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StopWatch</span>(<span class="hljs-string">"APIå¤„ç†æµç¨‹"</span>);
    
    apiWatch.start(<span class="hljs-string">"å‚æ•°æ ¡éªŒ"</span>);
    validateRequest(req);
    apiWatch.stop();
    
    apiWatch.start(<span class="hljs-string">"æƒé™æ£€æŸ¥"</span>);
    checkPermission(req);
    apiWatch.stop();
    
    apiWatch.start(<span class="hljs-string">"ä¸šåŠ¡å¤„ç†"</span>);
    <span class="hljs-type">Object</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> processBusiness(req);
    apiWatch.stop();
    
    apiWatch.start(<span class="hljs-string">"ç»„è£…å“åº”"</span>);
    <span class="hljs-type">ApiResponse</span> <span class="hljs-variable">response</span> <span class="hljs-operator">=</span> buildResponse(result);
    apiWatch.stop();
    
    <span class="hljs-comment">// åªæœ‰è°ƒè¯•æ—¶æ‰æ‰“å°è¯¦ç»†æ—¶é—´ï¼Œé¿å…ç”Ÿäº§æ—¥å¿—çˆ†ç‚¸</span>
    <span class="hljs-keyword">if</span> (log.isDebugEnabled()) {
        log.debug(<span class="hljs-string">"API {} å¤„ç†æ—¶é—´åˆ†æï¼š\n{}"</span>, 
                 req.getPath(), 
                 apiWatch.prettyPrint());
    }
    
    <span class="hljs-keyword">return</span> response;
}
</code></pre>
<p>è¿™äº›æ•°æ®ä¼šè¢« <strong>Spring Insight</strong> æ”¶é›†èµ·æ¥ï¼Œä¸å…¶ä»–ç›‘æ§æ•°æ®ä¸€èµ·ï¼Œå¸®ä½ ç”»å‡ºå®Œæ•´çš„â€œæ€§èƒ½åœ°å›¾â€ã€‚ä½ ä¸ä»…èƒ½çœ‹åˆ°æ¯ä¸ªç¯èŠ‚çš„è€—æ—¶ï¼Œè¿˜èƒ½çœ‹åˆ°ï¼š</p>
<ul>
<li>å“ªäº›APIæœ€æ…¢</li>
<li>æ…¢åœ¨å“ªé‡Œï¼ˆæ˜¯ä¸šåŠ¡é€»è¾‘è¿˜æ˜¯IOæ“ä½œï¼‰</li>
<li>éšç€æ—¶é—´çš„å˜åŒ–è¶‹åŠ¿</li>
</ul>
<h2 data-id="heading-12">å…­ã€StopWatchä½¿ç”¨é¡»çŸ¥ï¼ˆé¿å‘æŒ‡å—ï¼‰</h2>
<h3 data-id="heading-13">6.1 ä¸‰ä¸ªâ€œåƒä¸‡ä¸è¦â€</h3>
<ol>
<li>
<p><strong>åƒä¸‡ä¸è¦å¿˜è®°åœæ­¢</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// é”™è¯¯ç¤ºèŒƒï¼šå¯åŠ¨äº†å¿˜è®°åœ</span>
stopWatch.start();
<span class="hljs-keyword">if</span> (error) {
    <span class="hljs-keyword">return</span>; <span class="hljs-comment">// ç›´æ¥æºœäº†ï¼Œè®¡æ—¶å™¨è¿˜åœ¨è·‘ï¼</span>
}
stopWatch.stop(); <span class="hljs-comment">// æ°¸è¿œæ‰§è¡Œä¸åˆ°è¿™é‡Œ</span>
</code></pre>
</li>
<li>
<p><strong>â€œåƒä¸‡ä¸è¦åœ¨â€˜ç®€å•è®¡æ—¶æ¨¡å¼â€™ä¸‹é‡å¤ä½¿ç”¨ä¸é‡ç½®â€</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// é”™è¯¯ç¤ºèŒƒï¼šè¿ç»­ä½¿ç”¨</span>
stopWatch.start();
<span class="hljs-comment">// ä»»åŠ¡1</span>
stopWatch.stop();

stopWatch.start(); <span class="hljs-comment">// æ²¡resetå°±ç›´æ¥startï¼Œä¼šæŠ¥é”™ï¼</span>
<span class="hljs-comment">// ä»»åŠ¡2</span>
stopWatch.stop();
</code></pre>
<p>å¦‚æœåœ¨ä¸€æ¬¡å®Œæ•´ä½¿ç”¨åï¼ˆæ¯”å¦‚å·²ç» <code>start()</code> + <code>stop()</code> è¿‡ï¼‰ï¼Œ<strong>å†æ¬¡è°ƒç”¨ <code>start()</code></strong>ï¼Œä¼šå‘ç”Ÿä»¥ä¸‹æƒ…å†µï¼š</p>
<ul>
<li>
<p>âœ… å¦‚æœä¹‹å‰æ²¡æœ‰ä»»åŠ¡åœ¨è¿è¡Œï¼ˆå³å·² <code>stop()</code>ï¼‰ï¼Œ<strong>å¯ä»¥ç»§ç»­ <code>start()</code> æ–°ä»»åŠ¡</strong>ï¼ˆå°¤å…¶æ˜¯å¸¦åå­—çš„ä»»åŠ¡ï¼‰ï¼›</p>
</li>
<li>
<p>âŒ ä½†å¦‚æœä½ å°è¯•å¯¹<strong>åŒä¸€ä¸ªæ— åä»»åŠ¡</strong>å†æ¬¡ <code>start()</code>ï¼Œæˆ–è€…åœ¨æŸäº›ç‰ˆæœ¬ä¸­æœªæ­£ç¡®ç»“æŸå‰ä¸€ä¸ªä»»åŠ¡ï¼Œä¼šæŠ›å‡ºå¼‚å¸¸ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">java.lang.IllegalStateException: Can<span class="hljs-string">'t start StopWatch: it'</span>s already running
</code></pre>
</li>
</ul>
<p>æ›´é‡è¦çš„æ˜¯ï¼š</p>
<blockquote>
<p><strong>StopWatch ä¸ä¼šè‡ªåŠ¨æ¸…ç©ºå†å²ä»»åŠ¡è®°å½•</strong>ã€‚å¦‚æœä½ ä¸ reset()ï¼Œä¹‹å‰çš„æ‰€æœ‰ä»»åŠ¡è€—æ—¶ä»ç„¶ä¿ç•™åœ¨å†…éƒ¨ï¼Œåç»­çš„ getTotalTimeMillis() æ˜¯æ‰€æœ‰ä»»åŠ¡çš„ç´¯è®¡å€¼ï¼Œè€Œä¸æ˜¯ä½ â€œæ–°ä¸€è½®â€çš„æ—¶é—´ã€‚</p>
</blockquote>
<p>è¿™å…¶å®æ˜¯ Spring <code>StopWatch</code> ä¸€ä¸ªå·§å¦™ä½†ä¹Ÿå®¹æ˜“æ··æ·†çš„è®¾è®¡ï¼Œå®ƒæœ‰ä¸¤ç§å·¥ä½œæ¨¡å¼ï¼š</p>























<table><thead><tr><th align="left">å·¥ä½œæ¨¡å¼</th><th align="left">å¦‚ä½•å¯åŠ¨</th><th align="left">æ˜¯å¦éœ€è¦ <code>reset()</code></th><th align="left">é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td align="left"><strong>ç®€å•è®¡æ—¶æ¨¡å¼</strong></td><td align="left"><code>start()</code> æˆ– <code>start("")</code></td><td align="left"><strong>å¿…é¡»</strong></td><td align="left">åªå…³å¿ƒä¸€æ®µä»£ç çš„æ€»è€—æ—¶</td></tr><tr><td align="left"><strong>å¤šä»»åŠ¡è®¡æ—¶æ¨¡å¼</strong></td><td align="left"><code>start("ä»»åŠ¡åç§°")</code></td><td align="left"><strong>ä¸éœ€è¦</strong></td><td align="left">éœ€è¦åˆ†æå¤šä¸ªå­ä»»åŠ¡çš„è€—æ—¶å’Œå æ¯”</td></tr></tbody></table>
</li>
<li>
<p><strong>åƒä¸‡ä¸è¦æµ‹é‡å¤ªçŸ­çš„æ“ä½œ</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// å¯èƒ½ä¸å‡†ç¡®ï¼šæµ‹é‡çº³ç§’çº§æ“ä½œ</span>
stopWatch.start();
<span class="hljs-type">int</span> <span class="hljs-variable">a</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span> + <span class="hljs-number">1</span>; <span class="hljs-comment">// è¿™å¤ªå¿«äº†</span>
stopWatch.stop();
<span class="hljs-comment">// ç»“æœå¯èƒ½æ˜¯0msï¼Œä½†å®é™…å¯èƒ½æœ‰å‡ çº³ç§’</span>
</code></pre>
</li>
</ol>
<h3 data-id="heading-14">6.2 ä¸‰ä¸ªâ€œæœ€å¥½è¿™æ ·â€</h3>
<ol>
<li>
<p><strong>æœ€å¥½é…åˆæ—¥å¿—çº§åˆ«ä½¿ç”¨</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// è°ƒè¯•ä¿¡æ¯ç”¨debugçº§åˆ«</span>
<span class="hljs-keyword">if</span> (log.isDebugEnabled()) {
    log.debug(<span class="hljs-string">"è€—æ—¶åˆ†æï¼š{}"</span>, stopWatch.prettyPrint());
}
</code></pre>
</li>
<li>
<p><strong>æœ€å¥½ç»™é‡è¦æ“ä½œå•ç‹¬è®¡æ—¶</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// é‡ç‚¹å…³æ³¨æ•°æ®åº“ã€å¤–éƒ¨APIç­‰IOæ“ä½œ</span>
stopWatch.start(<span class="hljs-string">"ç”¨æˆ·æœåŠ¡HTTPè°ƒç”¨"</span>);
userService.getUser(id);
stopWatch.stop();
</code></pre>
</li>
<li>
<p><strong>æœ€å¥½åœ¨å‘ç°é—®é¢˜æ—¶å†åŠ </strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä¸è¦ä¸€å¼€å§‹å°±ç»™æ‰€æœ‰æ–¹æ³•éƒ½åŠ </span>
<span class="hljs-comment">// ç­‰ç”¨æˆ·åé¦ˆâ€œè¿™é‡Œæ…¢â€æ—¶ï¼Œå†åŠ StopWatchå®šä½</span>
</code></pre>
</li>
</ol>
<h2 data-id="heading-15">å…«ã€æœ€åçš„å°å»ºè®®</h2>
<p>å¦‚æœä½ ä¹Ÿåœ¨å¼€å‘Spring Bootåº”ç”¨ï¼Œä¸å¦¨ï¼š</p>
<ol>
<li><strong>å¤‡ä¸€ä¸ªStopWatchåœ¨å·¥å…·ç®±é‡Œ</strong>ï¼šå°±åƒç”µå·¥éšèº«å¸¦ä¸‡ç”¨è¡¨</li>
<li><strong>æ€€ç–‘å“ªé‡Œæ…¢ï¼Œå°±ç»™å“ªé‡Œè®¡æ—¶</strong>ï¼šç”¨æ•°æ®ä»£æ›¿ç›´è§‰</li>
<li><strong>é‡ç‚¹ç›‘æ§å¤–éƒ¨ä¾èµ–</strong>ï¼šæ•°æ®åº“ã€Redisã€ç¬¬ä¸‰æ–¹APIâ€”â€”è¿™äº›é€šå¸¸æ˜¯æ€§èƒ½ç“¶é¢ˆ</li>
</ol>
<p>è®°ä½ï¼Œ<strong>åœ¨ä»£ç æ€§èƒ½çš„ä¸–ç•Œé‡Œï¼ŒStopWatchä¸ä¼šè¯´è°</strong>ã€‚å®ƒå¯èƒ½ä¸ä¼šç›´æ¥è®©ä½ çš„ä»£ç å˜å¿«ï¼Œä½†å®ƒèƒ½å‘Šè¯‰ä½ å“ªé‡Œæ…¢ï¼Œè€ŒçŸ¥é“â€œå“ªé‡Œæ…¢â€ï¼Œå°±è§£å†³äº†ä¼˜åŒ–çš„ä¸€åŠé—®é¢˜ã€‚</p>
<h2 data-id="heading-16">ä¹ã€ğŸš€ äº¤ä¸ªæœ‹å‹ï¼Œä¿æŒè”ç³»ï¼</h2>
<p>æˆ‘çš„æŠ€æœ¯æ€è€ƒå’Œå®è·µï¼Œç»Ÿä¸€æ²‰æ·€åœ¨è¿™äº›åœ°æ–¹ï¼š</p>
<p>ğŸŒ å¾®ä¿¡å…¬ä¼—å·ï¼šã€Œè‹æ¸¡è‹‡ã€</p>
<p>æ¨é€æœ€ç¨³å®šï¼Œé€‚åˆæ·±åº¦é˜…è¯»</p>
<p>â­ï¸ æ˜é‡‘ï¼šã€Œè‹æ¸¡è‹‡ã€</p>
<p><a href="https://juejin.cn/user/729731453429159" target="_blank" title="https://juejin.cn/user/729731453429159">juejin.cn/user/729731â€¦</a></p>
<p>ğŸ’¡ çŸ¥ä¹ï¼šã€Œè‹æ¸¡è‹‡ã€</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.zhihu.com%2Fpeople%2Fiweidujiang" target="_blank" title="https://www.zhihu.com/people/iweidujiang" ref="nofollow noopener noreferrer">www.zhihu.com/people/iweiâ€¦</a></p>
<p>ğŸ“˜ CSDNï¼šã€Œè‹æ¸¡è‹‡ã€</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2Fiweidujiang" target="_blank" title="https://blog.csdn.net/iweidujiang" ref="nofollow noopener noreferrer">blog.csdn.net/iweidujiang</a></p>
<p>ğŸ™ GitHubï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fiweidujiang" target="_blank" title="https://github.com/iweidujiang" ref="nofollow noopener noreferrer">github.com/iweidujiang</a></p>
<p>æ‰€æœ‰ä»£ç çš„æºå¤´ï¼ŒåŒ…æ‹¬ Spring Insight å¼€æºé¡¹ç›®ï¼Œæ„Ÿè°¢ Star â­</p>
<p>éå¸¸æ„Ÿè°¢å…³æ³¨æˆ‘ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æµ…è°ˆä¸€ä¸‹claudeçš„ skills]]></title>    <link>https://juejin.cn/post/7593528990846550067</link>    <guid>https://juejin.cn/post/7593528990846550067</guid>    <pubDate>2026-01-10T14:54:08.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7593528990846550067" data-draft-id="7593311347292143643" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æµ…è°ˆä¸€ä¸‹claudeçš„ skills"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯"/> <meta itemprop="datePublished" content="2026-01-10T14:54:08.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Hhang"/> <meta itemprop="url" content="https://juejin.cn/user/1994944446213274"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æµ…è°ˆä¸€ä¸‹claudeçš„ skills
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1994944446213274/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Hhang
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-10T14:54:08.000Z" title="Sat Jan 10 2026 14:54:08 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    17
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body .octicon{display:inline-block;fill:currentColor;vertical-align:text-bottom}.markdown-body .anchor{float:left;line-height:1;margin-left:-20px;padding-right:4px}.markdown-body .anchor:focus{outline:none}.markdown-body h1 .octicon-link,.markdown-body h2 .octicon-link,.markdown-body h3 .octicon-link,.markdown-body h4 .octicon-link,.markdown-body h5 .octicon-link,.markdown-body h6 .octicon-link{color:#1b1f23;vertical-align:middle;visibility:hidden}.markdown-body h1:hover .anchor,.markdown-body h2:hover .anchor,.markdown-body h3:hover .anchor,.markdown-body h4:hover .anchor,.markdown-body h5:hover .anchor,.markdown-body h6:hover .anchor{text-decoration:none}.markdown-body h1:hover .anchor .octicon-link,.markdown-body h2:hover .anchor .octicon-link,.markdown-body h3:hover .anchor .octicon-link,.markdown-body h4:hover .anchor .octicon-link,.markdown-body h5:hover .anchor .octicon-link,.markdown-body h6:hover .anchor .octicon-link{visibility:visible}.markdown-body h1:hover .anchor .octicon-link:before,.markdown-body h2:hover .anchor .octicon-link:before,.markdown-body h3:hover .anchor .octicon-link:before,.markdown-body h4:hover .anchor .octicon-link:before,.markdown-body h5:hover .anchor .octicon-link:before,.markdown-body h6:hover .anchor .octicon-link:before{width:16px;height:16px;content:" ";display:inline-block;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' aria-hidden='true'%3E%3Cpath fill-rule='evenodd' d='M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z'/%3E%3C/svg%3E")}.markdown-body{-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;color:#24292e;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;font-size:16px;line-height:1.5;word-wrap:break-word}.markdown-body details{display:block}.markdown-body summary{display:list-item}.markdown-body a{background-color:initial}.markdown-body a:active,.markdown-body a:hover{outline-width:0}.markdown-body strong{font-weight:inherit;font-weight:bolder}.markdown-body h1{margin:.67em 0}.markdown-body img{border-style:none}.markdown-body code,.markdown-body kbd,.markdown-body pre{font-family:monospace,monospace;font-size:1em}.markdown-body hr{box-sizing:initial;overflow:visible}.markdown-body input{font:inherit;margin:0;overflow:visible}.markdown-body [type=checkbox]{box-sizing:border-box;padding:0}.markdown-body *{box-sizing:border-box}.markdown-body input{font-family:inherit;font-size:inherit;line-height:inherit}.markdown-body a{color:#0366d6;text-decoration:none}.markdown-body a:hover{text-decoration:underline}.markdown-body strong{font-weight:600}.markdown-body hr{height:0;margin:15px 0;overflow:hidden;background:transparent;border-bottom:1px solid #dfe2e5}.markdown-body hr:after,.markdown-body hr:before{display:table;content:""}.markdown-body hr:after{clear:both}.markdown-body table{border-spacing:0;border-collapse:collapse}.markdown-body td,.markdown-body th{padding:0}.markdown-body details summary{cursor:pointer}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin-top:0;margin-bottom:0}.markdown-body h1{font-size:32px}.markdown-body h1,.markdown-body h2{font-weight:600}.markdown-body h2{font-size:24px}.markdown-body h3{font-size:20px}.markdown-body h3,.markdown-body h4{font-weight:600}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:14px}.markdown-body h5,.markdown-body h6{font-weight:600}.markdown-body h6{font-size:12px}.markdown-body p{margin-top:0;margin-bottom:10px}.markdown-body blockquote{margin:0}.markdown-body ol,.markdown-body ul{padding-left:0;margin-top:0;margin-bottom:0}.markdown-body ol ol,.markdown-body ul ol{list-style-type:lower-roman}.markdown-body ol ol ol,.markdown-body ol ul ol,.markdown-body ul ol ol,.markdown-body ul ul ol{list-style-type:lower-alpha}.markdown-body dd{margin-left:0}.markdown-body code,.markdown-body pre{font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:12px}.markdown-body pre{margin-top:0;margin-bottom:0}.markdown-body input::-webkit-inner-spin-button,.markdown-body input::-webkit-outer-spin-button{margin:0;-webkit-appearance:none;appearance:none}.markdown-body :checked+.radio-label{position:relative;z-index:1;border-color:#0366d6}.markdown-body .border{border:1px solid #e1e4e8!important}.markdown-body .border-0{border:0!important}.markdown-body .border-bottom{border-bottom:1px solid #e1e4e8!important}.markdown-body .rounded-1{border-radius:3px!important}.markdown-body .bg-white{background-color:#fff!important}.markdown-body .bg-gray-light{background-color:#fafbfc!important}.markdown-body .text-gray-light{color:#6a737d!important}.markdown-body .pl-3,.markdown-body .px-3{padding-left:16px!important}.markdown-body .px-3{padding-right:16px!important}.markdown-body .f6{font-size:12px!important}.markdown-body .lh-condensed{line-height:1.25!important}.markdown-body .text-bold{font-weight:600!important}.markdown-body .pl-c{color:#6a737d}.markdown-body .pl-c1,.markdown-body .pl-s .pl-v{color:#005cc5}.markdown-body .pl-e,.markdown-body .pl-en{color:#6f42c1}.markdown-body .pl-s .pl-s1,.markdown-body .pl-smi{color:#24292e}.markdown-body .pl-ent{color:#22863a}.markdown-body .pl-k{color:#d73a49}.markdown-body .pl-pds,.markdown-body .pl-s,.markdown-body .pl-s .pl-pse .pl-s1,.markdown-body .pl-sr,.markdown-body .pl-sr .pl-cce,.markdown-body .pl-sr .pl-sra,.markdown-body .pl-sr .pl-sre{color:#032f62}.markdown-body .pl-smw,.markdown-body .pl-v{color:#e36209}.markdown-body .pl-bu{color:#b31d28}.markdown-body .pl-ii{color:#fafbfc;background-color:#b31d28}.markdown-body .pl-c2{color:#fafbfc;background-color:#d73a49}.markdown-body .pl-c2:before{content:"^M"}.markdown-body .pl-sr .pl-cce{font-weight:700;color:#22863a}.markdown-body .pl-ml{color:#735c0f}.markdown-body .pl-mh,.markdown-body .pl-mh .pl-en,.markdown-body .pl-ms{font-weight:700;color:#005cc5}.markdown-body .pl-mi{font-style:italic;color:#24292e}.markdown-body .pl-mb{font-weight:700;color:#24292e}.markdown-body .pl-md{color:#b31d28;background-color:#ffeef0}.markdown-body .pl-mi1{color:#22863a;background-color:#f0fff4}.markdown-body .pl-mc{color:#e36209;background-color:#ffebda}.markdown-body .pl-mi2{color:#f6f8fa;background-color:#005cc5}.markdown-body .pl-mdr{font-weight:700;color:#6f42c1}.markdown-body .pl-ba{color:#586069}.markdown-body .pl-sg{color:#959da5}.markdown-body .pl-corl{text-decoration:underline;color:#032f62}.markdown-body .mb-0{margin-bottom:0!important}.markdown-body .my-2{margin-bottom:8px!important;margin-top:8px!important}.markdown-body .pl-0{padding-left:0!important}.markdown-body .py-0{padding-top:0!important;padding-bottom:0!important}.markdown-body .pl-1{padding-left:4px!important}.markdown-body .pl-2{padding-left:8px!important}.markdown-body .py-2{padding-top:8px!important;padding-bottom:8px!important}.markdown-body .pl-3{padding-left:16px!important}.markdown-body .pl-4{padding-left:24px!important}.markdown-body .pl-5{padding-left:32px!important}.markdown-body .pl-6{padding-left:40px!important}.markdown-body .pl-7{padding-left:48px!important}.markdown-body .pl-8{padding-left:64px!important}.markdown-body .pl-9{padding-left:80px!important}.markdown-body .pl-10{padding-left:96px!important}.markdown-body .pl-11{padding-left:112px!important}.markdown-body .pl-12{padding-left:128px!important}.markdown-body hr{border-bottom-color:#eee}.markdown-body kbd{display:inline-block;padding:3px 5px;font:11px SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;line-height:10px;color:#444d56;vertical-align:middle;background-color:#fafbfc;border:1px solid #d1d5da;border-radius:3px;box-shadow:inset 0 -1px 0 #d1d5da}.markdown-body:after,.markdown-body:before{display:table;content:""}.markdown-body:after{clear:both}.markdown-body&gt;:first-child{margin-top:0!important}.markdown-body&gt;:last-child{margin-bottom:0!important}.markdown-body a:not([href]){color:inherit;text-decoration:none}.markdown-body blockquote,.markdown-body details,.markdown-body dl,.markdown-body ol,.markdown-body p,.markdown-body pre,.markdown-body table,.markdown-body ul{margin-top:0;margin-bottom:16px}.markdown-body hr{height:.25em;padding:0;margin:24px 0;background-color:#e1e4e8;border:0}.markdown-body blockquote{padding:0 1em;color:#6a737d;border-left:.25em solid #dfe2e5}.markdown-body blockquote&gt;:first-child{margin-top:0}.markdown-body blockquote&gt;:last-child{margin-bottom:0}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin-top:24px;margin-bottom:16px;font-weight:600;line-height:1.25}.markdown-body h1{font-size:2em}.markdown-body h1,.markdown-body h2{padding-bottom:.3em;border-bottom:1px solid #eaecef}.markdown-body h2{font-size:1.5em}.markdown-body h3{font-size:1.25em}.markdown-body h4{font-size:1em}.markdown-body h5{font-size:.875em}.markdown-body h6{font-size:.85em;color:#6a737d}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:0;margin-bottom:0}.markdown-body li{word-wrap:break-all}.markdown-body li&gt;p{margin-top:16px}.markdown-body li+li{margin-top:.25em}.markdown-body dl{padding:0}.markdown-body dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:600}.markdown-body dl dd{padding:0 16px;margin-bottom:16px}.markdown-body table{display:block;width:100%;overflow:auto}.markdown-body table th{font-weight:600}.markdown-body table td,.markdown-body table th{padding:6px 13px;border:1px solid #dfe2e5}.markdown-body table tr{background-color:#fff;border-top:1px solid #c6cbd1}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}.markdown-body img{max-width:100%;box-sizing:initial;background-color:#fff}.markdown-body img[align=right]{padding-left:20px}.markdown-body img[align=left]{padding-right:20px}.markdown-body code{padding:.2em .4em;margin:0;font-size:85%;background-color:rgba(27,31,35,.05);border-radius:3px}.markdown-body pre{word-wrap:normal}.markdown-body pre&gt;code{padding:0;margin:0;font-size:100%;word-break:normal;white-space:pre;background:transparent;border:0}.markdown-body .highlight{margin-bottom:16px}.markdown-body .highlight pre{margin-bottom:0;word-break:normal}.markdown-body .highlight pre,.markdown-body pre{padding:16px;overflow:auto;font-size:85%;line-height:1.45;background-color:#f6f8fa;border-radius:3px}.markdown-body pre code{display:inline;max-width:auto;padding:0;margin:0;overflow:visible;line-height:inherit;word-wrap:normal;background-color:initial;border:0}.markdown-body .commit-tease-sha{display:inline-block;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:90%;color:#444d56}.markdown-body .full-commit .btn-outline:not(:disabled):hover{color:#005cc5;border-color:#005cc5}.markdown-body .blob-wrapper{overflow-x:auto;overflow-y:hidden}.markdown-body .blob-wrapper-embedded{max-height:240px;overflow-y:auto}.markdown-body .blob-num{width:1%;min-width:50px;padding-right:10px;padding-left:10px;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:12px;line-height:20px;color:rgba(27,31,35,.3);text-align:right;white-space:nowrap;vertical-align:top;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.markdown-body .blob-num:hover{color:rgba(27,31,35,.6)}.markdown-body .blob-num:before{content:attr(data-line-number)}.markdown-body .blob-code{position:relative;padding-right:10px;padding-left:10px;line-height:20px;vertical-align:top}.markdown-body .blob-code-inner{overflow:visible;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:12px;color:#24292e;word-wrap:normal;white-space:pre}.markdown-body .pl-token.active,.markdown-body .pl-token:hover{cursor:pointer;background:#ffea7f}.markdown-body .tab-size[data-tab-size="1"]{-moz-tab-size:1;tab-size:1}.markdown-body .tab-size[data-tab-size="2"]{-moz-tab-size:2;tab-size:2}.markdown-body .tab-size[data-tab-size="3"]{-moz-tab-size:3;tab-size:3}.markdown-body .tab-size[data-tab-size="4"]{-moz-tab-size:4;tab-size:4}.markdown-body .tab-size[data-tab-size="5"]{-moz-tab-size:5;tab-size:5}.markdown-body .tab-size[data-tab-size="6"]{-moz-tab-size:6;tab-size:6}.markdown-body .tab-size[data-tab-size="7"]{-moz-tab-size:7;tab-size:7}.markdown-body .tab-size[data-tab-size="8"]{-moz-tab-size:8;tab-size:8}.markdown-body .tab-size[data-tab-size="9"]{-moz-tab-size:9;tab-size:9}.markdown-body .tab-size[data-tab-size="10"]{-moz-tab-size:10;tab-size:10}.markdown-body .tab-size[data-tab-size="11"]{-moz-tab-size:11;tab-size:11}.markdown-body .tab-size[data-tab-size="12"]{-moz-tab-size:12;tab-size:12}.markdown-body .task-list-item{list-style-type:none}.markdown-body .task-list-item+.task-list-item{margin-top:3px}.markdown-body .task-list-item input{margin:0 .2em .25em -1.6em;vertical-align:middle}</style><style data-highlight="" data-highlight-key="agate">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#333;color:#fff}.hljs-name,.hljs-strong{font-weight:700}.hljs-code,.hljs-emphasis{font-style:italic}.hljs-tag{color:#62c8f3}.hljs-selector-class,.hljs-selector-id,.hljs-template-variable,.hljs-variable{color:#ade5fc}.hljs-bullet,.hljs-string{color:#a2fca2}.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-quote,.hljs-section,.hljs-title,.hljs-type{color:#ffa}.hljs-bullet,.hljs-number,.hljs-symbol{color:#d36363}.hljs-keyword,.hljs-literal,.hljs-selector-tag{color:#fcc28c}.hljs-code,.hljs-comment,.hljs-deletion{color:#888}.hljs-link,.hljs-regexp{color:#c6b4f0}.hljs-meta{color:#fc9b9b}.hljs-deletion{background-color:#fc9b9b;color:#333}.hljs-addition{background-color:#a2fca2;color:#333}.hljs a{color:inherit}.hljs a:focus,.hljs a:hover{color:inherit;text-decoration:underline}</style><h2 data-id="heading-0">ä¸ºä»€ä¹ˆéœ€è¦skillsï¼Œskillsè§£å†³äº†ä»€ä¹ˆé—®é¢˜</h2>
<p>1.æˆ‘ä»¬éƒ½çŸ¥é“æ¨¡å‹æ˜¯æœ‰ä¸€ä¸ªä¸Šä¸‹æ–‡é™åˆ¶çš„å¤§çº¦200k æˆ‘ä»¬ä½¿ç”¨çš„mcp ä»€ä¹ˆçš„æ˜¯éå¸¸åƒtokençš„ï¼Œä½ è¦è®©è¿™ä¸ªAIç†è§£å’Œä½¿ç”¨è¿™ä¸ªmcp éœ€è¦å†™æç¤ºè¯propmtæ˜¯å¹²ä»€ä¹ˆç”¨çš„ å¦‚ä½•ä½¿ç”¨ä»¥åŠè°ƒç”¨ç¤ºä¾‹ï¼Œè¿™å°±å¯¼è‡´æˆ‘ä»¬åœ¨ä½¿ç”¨AIcodingçš„æ—¶å€™æ˜æ˜200kçš„ä¸Šä¸‹åˆå¯¹è¯äº†å‡ æ¬¡å°±å æ»¡äº†ï¼Œé¦–å½“å…¶å†²å°±æ˜¯mcpï¼Œå¯¼è‡´æ¶ˆè€—tokenå’Œè´¹ç”¨éƒ½å¾ˆé«˜ï¼Œskillsçš„å‡ºç°å°±æ˜¯æ¥è§£å†³è¿™ä¸€ç—›ç‚¹çš„ï¼Œæ˜¯å› ä¸ºå®ƒè§£å†³äº†ä¸€ä¸ªå¾ˆå…·ä½“çœŸå®çš„ç—›ç‚¹ï¼š<strong>Claude å®¹æ˜“å‡ºç°å¥å¿˜ã€éœ€é‡å¤å†™æç¤ºè¯ã€å¤ªè´¹ tokenï¼</strong></p>
<p>è¿‡å»ä½¿ç”¨â€¯Claudeâ€¯æœ€å¤§çš„ç—›ç‚¹æ˜¯ â€œå¥å¿˜â€ï¼š</p>
<p>æ¯æ¢ä¸€ä¸ªä»»åŠ¡ã€æ¯å¼€ä¸€æ¬¡å¯¹è¯ï¼Œéƒ½è¦é‡å¤ä¸€å †ä¸œè¥¿ã€‚</p>
<p>Skillsâ€¯å‡ºç°åï¼Œè¿™äº›éƒ½èƒ½æ”¶çº³æˆä¸€ä¸ªè¯´æ˜ä¹¦ã€‚æŠŠè§„åˆ™æå‰å†™å¥½ï¼Œæ¨¡å‹åªéœ€è¦çœ‹åˆ°æœ‰è¿™ä¹ˆä¸ªè§„åˆ™ï¼Œå¤§æ¦‚ 100 ä¸ª tokenï¼Œéœ€è¦ç”¨åˆ°çš„æ—¶å€™å†æ‰“å¼€çœ‹ã€‚</p>
<h2 data-id="heading-1">skillsæ„Ÿè§‰å’Œclaude.mdå¾ˆåƒï¼Ÿ</h2>
<p>å¾ˆå¤šäººçœ‹åˆ°â€¯Skillsâ€¯çš„åŠŸèƒ½ä»‹ç»ï¼Œç¬¬ä¸€å°è±¡ä¼šè§‰å¾—ï¼šâ€œ<strong>è¿™ä¸å°±æ˜¯è‡ªå®šä¹‰æç¤ºå—ï¼Ÿè¿™ä¸å°±æ˜¯claudeçš„ruelæ–‡ä»¶å—ï¼Ÿ</strong> â€</p>
<p>å…¶å®ä¸ä¸€æ ·ã€‚</p>
<p>è‡ªå®šä¹‰æç¤ºåªæ˜¯ä¸€æ¬¡æ€§çš„è¯´æ˜ï¼Œä¸”æ— æ³•æ–‡ä»¶åŒ–ã€èµ„äº§åŒ–å¤ç”¨ï¼›</p>
<p>è€Œâ€¯Skillsâ€¯æ˜¯å¯ä»¥<strong>ä¿å­˜ã€è°ƒç”¨ã€ç»„åˆã€åå¤ä¼˜åŒ–çš„ä½“ç³»åŒ–å·¥ä½œè§„èŒƒæ–‡ä»¶ã€‚</strong></p>
<p>è¯´ç™½äº†ï¼ŒSkills å°±æ˜¯ä¸€å¥—ä½ å†™ç»™ Claude çš„ â€œè¯´æ˜ä¹¦â€ å’Œ â€œSOPï¼ˆæ ‡å‡†ä½œä¸šç¨‹åºï¼‰
ä»åŠŸèƒ½ç”¨é€”æ¥çœ‹ï¼ŒSkills å’Œ CLAUDE.md çš„åŠŸèƒ½å’‹ä¸€çœ‹æœ‰å¾ˆå¤šç›¸ä¼¼ä¹‹å¤„ï¼Œä½†å¦‚æœæ·±ç©¶ä¸€ä¸‹çš„è¯ï¼Œä»–ä»¬ä¸¤è€…ä¹‹é—´è¿˜æ˜¯æœ‰æœ¬è´¨ä¸ŠåŒºåˆ«ã€‚</p>
<h5 data-id="heading-2">1ã€Claude Skillsï¼ˆæŠ€èƒ½ï¼‰</h5>
<p><code>Skills</code>Â é€šå¸¸æŒ‡çš„æ˜¯å°è£…å¥½çš„ç‰¹å®šåŠŸèƒ½æˆ–ä»»åŠ¡æ¨¡å—ã€‚ä½ å¯ä»¥æŠŠå®ƒä»¬ç†è§£ä¸º â€œæ’ä»¶â€ æˆ– â€œå®â€ã€‚å®ƒä»¬æ—¨åœ¨è®© Claude æ‰§è¡Œå…·ä½“çš„ã€é‡å¤æ€§çš„æ“ä½œã€‚</p>
<blockquote>
<p>ä¾‹å¦‚ï¼Œå®šä¹‰ä¸€ä¸ª â€œä»£ç å®¡æŸ¥å‘˜â€ æŠ€èƒ½ï¼Œå½“ç”¨æˆ·è§¦å‘æ—¶ï¼ŒClaude ä¼šä¸¥æ ¼æ ¹æ®è¿™ä¸ªæŠ€èƒ½ä¸­å®šä¹‰çš„è§„åˆ™ï¼ˆæ¯”å¦‚æ£€æŸ¥å®‰å…¨æ€§ã€æ€§èƒ½ï¼‰æ¥è¿è¡Œã€‚</p>
</blockquote>
<p>é€šå¸¸ä¸æ˜¯å•ä¸€çš„æ–‡ä»¶ï¼Œè€Œæ˜¯ä¸€ä¸ª<strong>ç›®å½•ç»“æ„</strong>ï¼ŒåŒ…å«æŒ‡ä»¤ + è„šæœ¬ + èµ„æºï¼ŒSkills çš„ç›®å½•ç»“æ„å¯ä»¥å¾ˆä¸°å¯Œï¼Œé™¤äº†ä¸»æ–‡ä»¶ SKILL.mdï¼Œè¿˜å¯ä»¥åŒ…å«æ£€æŸ¥æ¸…å•ã€å‚è€ƒæ–‡æ¡£ã€è¾…åŠ©è„šæœ¬ç­‰ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">my-skill/
â”œâ”€â”€ SKILL.<span class="hljs-built_in">md</span> (required)
â”œâ”€â”€ reference.<span class="hljs-built_in">md</span> (optional documentation)
â”œâ”€â”€ examples.<span class="hljs-built_in">md</span> (optional examples)
â”œâ”€â”€ scripts/
â”‚   â””â”€â”€ helper.<span class="hljs-built_in">py</span> (optional utility)
â””â”€â”€ templates/
    â””â”€â”€ <span class="hljs-keyword">template</span>.<span class="hljs-built_in">txt</span> (optional <span class="hljs-keyword">template</span>)
</code></pre>
<p>ä¸” Claude åªä¼šè¯»å– Skill çš„ç®€çŸ­è¯´æ˜ï¼Œåªæœ‰åœ¨çœŸæ­£éœ€è¦ä½¿ç”¨æ—¶æ‰ä¼šåŠ è½½å®Œæ•´å†…å®¹ï¼Œä¸ä¼šä¸€å¼€å§‹å°±å ç”¨å¤§é‡ä¸Šä¸‹æ–‡ã€‚</p>
<p>éœ€è¦é¢å¤–è¯´æ˜ä¸€ç‚¹ï¼ŒSkills æŠ€èƒ½æ ¸å¿ƒæ˜¯<code>SKILL.md</code>æ–‡ä»¶ï¼Œä¸”å¿…é¡»åŒ…å« YAML å¤´ä¿¡æ¯ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-meta">---</span>
<span class="hljs-string">åç§°:</span> <span class="hljs-string">ç”Ÿæˆæäº¤æ¶ˆæ¯</span>
<span class="hljs-string">æè¿°:</span> <span class="hljs-string">æ ¹æ®</span> <span class="hljs-string">git</span> <span class="hljs-string">å·®å¼‚ç”Ÿæˆæ¸…æ™°çš„æäº¤æ¶ˆæ¯ã€‚åœ¨ç¼–å†™æäº¤æ¶ˆæ¯æˆ–å®¡æŸ¥æš‚å­˜æ›´æ”¹æ—¶ä½¿ç”¨ã€‚</span>
<span class="hljs-meta">---
</span>
<span class="hljs-comment"># ç”Ÿæˆæäº¤æ¶ˆæ¯</span>

<span class="hljs-comment">## æŒ‡ä»¤</span>

<span class="hljs-number">1</span><span class="hljs-string">.</span> <span class="hljs-string">è¿è¡Œ</span> <span class="hljs-string">`git</span> <span class="hljs-string">diff</span> <span class="hljs-string">--staged`</span> <span class="hljs-string">æŸ¥çœ‹æ›´æ”¹</span>
<span class="hljs-number">2</span><span class="hljs-string">.</span> <span class="hljs-string">æˆ‘å°†æä¾›åŒ…å«ä»¥ä¸‹å†…å®¹çš„æäº¤æ¶ˆæ¯ï¼š</span>
   <span class="hljs-bullet">-</span> <span class="hljs-string">ä¸è¶…è¿‡</span> <span class="hljs-number">50</span> <span class="hljs-string">å­—ç¬¦çš„æ‘˜è¦</span>
   <span class="hljs-bullet">-</span> <span class="hljs-string">è¯¦ç»†æè¿°</span>
   <span class="hljs-bullet">-</span> <span class="hljs-string">å—å½±å“çš„ç»„ä»¶</span>

<span class="hljs-comment">## æœ€ä½³å®è·µ</span>

<span class="hljs-bullet">-</span> <span class="hljs-string">ä½¿ç”¨ç°åœ¨æ—¶</span>
<span class="hljs-bullet">-</span> <span class="hljs-string">è§£é‡Šå†…å®¹å’ŒåŸå› ï¼Œè€Œéæ–¹å¼</span>
</code></pre>
<p>è¿™ä¹Ÿæ˜¯<code>Skills</code>å’Œ<code>MCP</code>ã€<code>FunctionCaling</code>çš„åŒºåˆ«ï¼Œå®ƒå¯ä»¥å®ç°åˆ†å±‚åŠ è½½ï¼Œç»™ä¸Šä¸‹æ–‡çª—å£å‡è´Ÿã€‚å¯åŠ¨æ—¶ï¼ŒåªåŠ è½½ YAML å¤´é…ç½®ï¼ˆåŒ…å« nameï¼Œdescriptionï¼‰ï¼Œå¤§æ¦‚ä¹Ÿå°± 100 ä¸ª tokenã€‚Skills çœŸæ­£çš„è§¦å‘æ—¶æœºï¼Œæ˜¯é€šè¿‡è‡ªç„¶è¯­è¨€è§¦å‘ï¼ŒClaude ä¼šæ ¹æ®ä½ çš„ä»»åŠ¡æè¿°è‡ªåŠ¨åˆ¤æ–­æ˜¯å¦éœ€è¦è°ƒç”¨æŸä¸ª Skillã€‚ä»»åŠ¡è§¦å‘æ—¶ï¼Œæ‰ä¼šè¯»å–æ•´ä¸ª Skill.md æ­£æ–‡å†…å®¹ã€‚</p>
<h5 data-id="heading-3">2ã€CLAUDE.md æ–‡ä»¶</h5>
<p><code>CLAUDE.md</code>æ˜¯é¡¹ç›® / å…¨å±€çš„é™æ€ä¸Šä¸‹æ–‡é…ç½®æ–‡ä»¶ï¼Œæœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ªé™æ€çš„ Markdown æ–‡ä»¶ã€‚</p>
<p>å½“ Claude (ä¾‹å¦‚é€šè¿‡ Claude for VS Code æ’ä»¶æˆ– MCP) è¯»å–ä½ çš„é¡¹ç›®æ—¶ï¼Œå®ƒä¼šä¼˜å…ˆæŸ¥æ‰¾è¿™ä¸ªæ–‡ä»¶ï¼Œä»¥äº†è§£è¯¥é¡¹ç›®çš„æ•´ä½“èƒŒæ™¯ã€ä»£ç é£æ ¼ã€å¼€å‘è§„èŒƒç­‰ã€‚é€šå¸¸åŒ…å«é¡¹ç›®ä»‹ç»ã€æ¶æ„è¯´æ˜ã€ç¼–ç çº¦å®šç­‰éæ‰§è¡Œæ€§çš„èƒŒæ™¯ä¿¡æ¯ã€‚</p>
<blockquote>
<p>å°±åƒæ–°å‘˜å·¥å…¥èŒæ—¶æ‹¿åˆ°çš„ â€œå‘˜å·¥æ‰‹å†Œâ€ æˆ– â€œé¡¹ç›®æ–‡æ¡£â€ï¼Œç”¨æ¥é˜…è¯»å’Œç†è§£ï¼Œè€Œä¸æ˜¯ç›´æ¥æ‰§è¡Œçš„å‘½ä»¤ã€‚</p>
</blockquote>
<p>è¯¥æ–‡ä»¶åœ¨å¯åŠ¨å°±ä¼šå…¨é‡åŠ è½½åˆ°ä¸Šä¸‹æ–‡ï¼Œä¸”æŒç»­ç”Ÿæ•ˆï¼ˆè‡ªåŠ¨åŠ è½½ï¼Œæ— éœ€è§¦å‘ï¼‰ï¼Œå†…å®¹è¶Šé•¿æ¶ˆè€—ä¸Šä¸‹æ–‡ token ä¹Ÿä¼šè¶Šå¤šï¼Œä¸€èˆ¬ä¸å»ºè®®å†™å¤ªå¤šå†…å®¹ã€‚</p>
<p><strong>å†…å®¹å»ºè®®</strong>ï¼šç»Ÿä¸€å›¢é˜Ÿä»£ç é£æ ¼ã€ä¼ é€’é¡¹ç›®æ¶æ„ã€å›ºåŒ–å¼€å‘æµç¨‹ã€æ¶æ„è¯´æ˜ã€æäº¤è§„åˆ™ç­‰</p>
<p><strong>ä¸€å¥è¯å°ç»“</strong>ï¼Œå¦‚æœä½ æƒ³è®© ClaudeÂ  <strong>â€œå­¦ä¼šåšæŸä»¶å…·ä½“çš„æ´»â€</strong> ï¼Œä½ éœ€è¦é…ç½®Â <strong>Skills</strong>ï¼›å¦‚æœä½ æƒ³è®© ClaudeÂ  <strong>â€œäº†è§£ä½ çš„é¡¹ç›®æƒ…å†µâ€</strong> ï¼Œä½ éœ€è¦ç¼–å†™Â <strong>CLAUDE.md</strong>ã€‚</p>
<h4 data-id="heading-4">Skills vs MCPâ€¯æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h4>
<p>å¾ˆå¤šäººåˆšæ¥è§¦ Skills æ—¶ï¼Œä¼šå’Œ MCP å‚»å‚»åˆ†ä¸æ¸…ï¼Œé‚£ä¹ˆ Skills å’Œ MCP ä¹‹é—´åˆ°åº•æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿ</p>
<p>é¦–å…ˆï¼ŒMCP æ˜¯ä¸€ä¸ªå¼€æºåè®®ï¼Œç”¨äºè¿æ¥ AI å’Œå¤–éƒ¨ç³»ç»Ÿï¼ŒAI+MCPï¼Œä½ å°±å¯ä»¥è°ƒç”¨å„ç§å¤–éƒ¨å·¥å…·ã€‚</p>
<blockquote>
<p>æ¯”å¦‚ä½ å¯ä»¥è®© Claude è®¿é—®æ•°æ®åº“ã€APIã€æ–‡ä»¶ç³»ç»Ÿã€æ¶ˆæ¯ç³»ç»Ÿç­‰å¤–éƒ¨èµ„æºã€‚åƒå¸¸ç”¨çš„ Playwright MCPï¼Œå°±æ˜¯è®© Claude èƒ½å¤Ÿæ“ä½œæµè§ˆå™¨ã€‚</p>
</blockquote>
<p>å¦‚æœï¼ŒæŠŠ Claudeâ€¯æ¯”å–» â€œå¤´è„‘â€ï¼ŒMCPâ€¯æ˜¯å®ƒèƒ½è°ƒç”¨çš„å·¥å…·ï¼Œè€Œ Skillsâ€¯åˆ™è§„å®šå®ƒçš„åšäº‹æ–¹æ³•ã€‚</p>
<p><strong>ä¸€å¥è¯å°ç»“</strong>ï¼šMCP æ˜¯æ•™ AI å¤§æ¨¡å‹æ€ä¹ˆè¿æ¥å¤–éƒ¨ç³»ç»Ÿã€APIã€‚Skills æ˜¯æ•™ AI å¤§æ¨¡å‹æ€ä¹ˆç”¨å·¥å…·ï¼ŒæŒ‰ä»€ä¹ˆæµç¨‹å¤„ç†ï¼Œè¾“å‡ºä»€ä¹ˆæ ¼å¼ã€‚</p>
<h2 data-id="heading-5">### Claude Skills æœ‰å“ªäº›ç±»å‹ï¼Œä»å“ªé‡ŒæŸ¥æ‰¾ï¼Ÿ</h2>
<h5 data-id="heading-6">Skills çš„ç±»å‹</h5>

























<table><thead><tr><th>ç±»å‹</th><th>è¯´æ˜</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td><strong>User Skills</strong></td><td>ç”¨æˆ·è‡ªå®šä¹‰æŠ€èƒ½,å­˜å‚¨åœ¨æœ¬åœ°</td><td>ä¸ªäººå·¥ä½œæµè‡ªåŠ¨åŒ–</td></tr><tr><td><strong>Plugin Skills</strong></td><td>æ’ä»¶æä¾›çš„æŠ€èƒ½,éšæ’ä»¶å®‰è£…</td><td>frontend-design</td></tr><tr><td><strong>Built-in Skills</strong></td><td>Claude Code å†…ç½®æŠ€èƒ½</td><td>commit, review-pr</td></tr></tbody></table>
<h5 data-id="heading-7">å¸¸ç”¨å®˜æ–¹ Skills</h5>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å‰ç«¯è®¾è®¡æŠ€èƒ½</span>
npx skills-installer install @anthropics/claude-code/frontend-design --client claude-code

<span class="hljs-comment"># æ–‡æ¡£ååŒæŠ€èƒ½</span>
npx skills-installer install @anthropics/claude-code/doc-coauthoring --client claude-code

<span class="hljs-comment"># Canvas è®¾è®¡æŠ€èƒ½</span>
npx skills-installer install @anthropics/claude-code/canvas-design --client claude-code

<span class="hljs-comment"># PDF å¤„ç†æŠ€èƒ½</span>
npx skills-installer install @anthropics/claude-code/pdf --client claude-code

<span class="hljs-comment"># ç®—æ³•è‰ºæœ¯ç”Ÿæˆ</span>
npx skills-installer install @anthropics/claude-code/algorithmic-art --client claude-code
</code></pre>
<h5 data-id="heading-8">å¦‚ä½•ä½¿ç”¨ Skills</h5>
<p><strong>æŸ¥çœ‹å¯ç”¨ Skills:</strong></p>
<pre><code class="hljs language-bash" lang="bash">claude /skills
</code></pre>
<p><strong>è°ƒç”¨ Skill:</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åœ¨ Claude Code å¯¹è¯ä¸­</span>
ä½¿ç”¨ frontend-design skill ä¼˜åŒ– https://example.com

ä½¿ç”¨ pdf skill æå– report.pdf ä¸­çš„è¡¨æ ¼æ•°æ®
</code></pre>
<p><strong>Skill ç›®å½•ç»“æ„:</strong></p>
<pre><code class="hljs language-perl" lang="perl"><span class="hljs-keyword">my</span>-skill/
â”œâ”€â”€ skill.json          <span class="hljs-comment"># Skill å…ƒæ•°æ®</span>
â”œâ”€â”€ skill.md            <span class="hljs-comment"># Skill æ–‡æ¡£</span>
â”œâ”€â”€ api/                <span class="hljs-comment"># API å®šä¹‰(å¯é€‰)</span>
â””â”€â”€ tools/              <span class="hljs-comment"># è‡ªå®šä¹‰å·¥å…·(å¯é€‰)</span>
</code></pre>
<p>`<strong>skill.md ç¤ºä¾‹:</strong></p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># xxx Skill</span>

è¿™ä¸ªæŠ€èƒ½å¸®åŠ©ç”¨æˆ·å¿«é€Ÿå®Œæˆ[ç‰¹å®šä»»åŠ¡]ã€‚

<span class="hljs-section">## ä½¿ç”¨åœºæ™¯</span>

<span class="hljs-bullet">-</span> åœºæ™¯1:æè¿°...
<span class="hljs-bullet">-</span> åœºæ™¯2:æè¿°...

<span class="hljs-section">## ä½¿ç”¨æ–¹å¼</span>

ç”¨æˆ·åªéœ€è¦å‘Šè¯‰ä½ è¦å®Œæˆä»€ä¹ˆ,è¿™ä¸ªæŠ€èƒ½å°±ä¼šè‡ªåŠ¨:

<span class="hljs-bullet">1.</span> åˆ†æéœ€æ±‚
<span class="hljs-bullet">2.</span> æ‰§è¡Œæ­¥éª¤
<span class="hljs-bullet">3.</span> è¿”å›ç»“æœ

<span class="hljs-section">## æ³¨æ„äº‹é¡¹</span>

<span class="hljs-bullet">-</span> æ³¨æ„äº‹é¡¹1
<span class="hljs-bullet">-</span> æ³¨æ„äº‹é¡¹2
</code></pre>
<p><strong>å®‰è£…æœ¬åœ° Skill:</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å°†æŠ€èƒ½å¤åˆ¶åˆ° Claude Code é…ç½®ç›®å½•</span>
<span class="hljs-built_in">cp</span> -r my-skill ~/.claude/skills/

<span class="hljs-comment"># æˆ–ä½¿ç”¨å®‰è£…å‘½ä»¤</span>
npx skills-installer install ./my-skill --client claude-code
</code></pre>
<h3 data-id="heading-9">å®ç”¨æŠ€å·§ä¸å¿«æ·æ“ä½œ</h3>
<h4 data-id="heading-10">åŸºç¡€æ“ä½œæŠ€å·§</h4>
<h5 data-id="heading-11">é¡¹ç›®åˆå§‹åŒ–(/init)</h5>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># è‡ªåŠ¨ç”Ÿæˆ CLAUDE.md</span>
/init

<span class="hljs-comment"># æˆ–æ‰‹åŠ¨æŒ‡å®š</span>
claude /init <span class="hljs-string">"è¿™æ˜¯ä¸€ä¸ª Node.js + React é¡¹ç›®"</span>
</code></pre>
<h5 data-id="heading-12">å¿«é€Ÿå¼•ç”¨ä¸Šä¸‹æ–‡(@æåŠ)</h5>
<pre><code class="hljs language-ruby" lang="ruby"><span class="hljs-comment"># å¼•ç”¨å•ä¸ªæ–‡ä»¶</span>
<span class="hljs-variable">@src</span>/auth.ts

<span class="hljs-comment"># å¼•ç”¨æ•´ä¸ªç›®å½•</span>
<span class="hljs-variable">@src</span>/components/

<span class="hljs-comment"># å¼•ç”¨å¤šä¸ªæ–‡ä»¶</span>
<span class="hljs-variable">@src</span>/auth.ts <span class="hljs-variable">@src</span>/user.ts <span class="hljs-variable">@src</span>/database.ts

<span class="hljs-comment"># å¼•ç”¨ MCP æœåŠ¡å™¨</span>
<span class="hljs-variable">@mcp</span><span class="hljs-symbol">:github</span>

<span class="hljs-comment"># æ¨¡ç³ŠåŒ¹é…</span>
<span class="hljs-variable">@auth</span>  <span class="hljs-comment"># è‡ªåŠ¨åŒ¹é… auth.ts, auth.controller.ts ç­‰</span>
</code></pre>
<h5 data-id="heading-13">æ ¸å¿ƒå‘½ä»¤é€ŸæŸ¥</h5>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åŸºç¡€æ“ä½œ</span>
claude                    <span class="hljs-comment"># å¯åŠ¨ Claude Code</span>
claude -p <span class="hljs-string">"prompt"</span>        <span class="hljs-comment"># Headless æ¨¡å¼</span>
claude --version          <span class="hljs-comment"># æŸ¥çœ‹ç‰ˆæœ¬</span>

<span class="hljs-comment"># æ–œæ å‘½ä»¤</span>
/clear                    <span class="hljs-comment"># æ¸…ç©ºå¯¹è¯</span>
/compact                  <span class="hljs-comment"># å‹ç¼©å¯¹è¯</span>
/context                  <span class="hljs-comment"># æŸ¥çœ‹ä¸Šä¸‹æ–‡</span>
/cost                     <span class="hljs-comment"># æŸ¥çœ‹è´¹ç”¨</span>
/model                    <span class="hljs-comment"># åˆ‡æ¢æ¨¡å‹</span>
/mcp                      <span class="hljs-comment"># ç®¡ç† MCP</span>
/skills                   <span class="hljs-comment"># æŸ¥çœ‹ Skills</span>
/hooks                    <span class="hljs-comment"># ç®¡ç† Hooks</span>
/agents                   <span class="hljs-comment"># ç®¡ç†å­ä»£ç†</span>
/status                   <span class="hljs-comment"># ç³»ç»ŸçŠ¶æ€</span>
/doctor                   <span class="hljs-comment"># è¯Šæ–­ç¯å¢ƒ</span>

<span class="hljs-comment"># å¿«æ·é”®</span>
Ctrl+R                    <span class="hljs-comment"># æœç´¢å†å²</span>
Ctrl+S                    <span class="hljs-comment"># æš‚å­˜æç¤ºè¯</span>
Ctrl+C                    <span class="hljs-comment"># ä¸­æ­¢æ“ä½œ</span>
Shift+Tab Ã— 2             <span class="hljs-comment"># Plan æ¨¡å¼</span>
ESC ESC                   <span class="hljs-comment"># å›é€€æ“ä½œ</span>
Alt+V                     <span class="hljs-comment"># ç²˜è´´å›¾ç‰‡</span>

<span class="hljs-comment"># æ–‡ä»¶æ“ä½œ</span>
@file.ts                  <span class="hljs-comment"># å¼•ç”¨æ–‡ä»¶</span>
@src/                     <span class="hljs-comment"># å¼•ç”¨ç›®å½•</span>
</code></pre>
<h4 data-id="heading-14">é¡¹ç›®ç»„ç»‡æœ€ä½³å®è·µ</h4>
<h5 data-id="heading-15">ç›®å½•ç»“æ„è§„èŒƒ</h5>
<pre><code class="hljs language-bash" lang="bash">project/
â”œâ”€â”€ .claude/                    <span class="hljs-comment"># Claude Code é…ç½®</span>
â”‚   â”œâ”€â”€ settings.json           <span class="hljs-comment"># é¡¹ç›®çº§è®¾ç½®</span>
â”‚   â”œâ”€â”€ agents.json             <span class="hljs-comment"># å­ä»£ç†é…ç½®</span>
â”‚   â”œâ”€â”€ rules/                  <span class="hljs-comment"># æ¨¡å—åŒ–è§„åˆ™</span>
â”‚   â”‚   â”œâ”€â”€ auth.md
â”‚   â”‚   â”œâ”€â”€ database.md
â”‚   â”‚   â””â”€â”€ api.md
â”‚   â””â”€â”€ mcp.json                <span class="hljs-comment"># MCP é…ç½®</span>
â”œâ”€â”€ src/                        <span class="hljs-comment"># æºä»£ç </span>
â”œâ”€â”€ tests/                      <span class="hljs-comment"># æµ‹è¯•ä»£ç </span>
â”œâ”€â”€ docs/                       <span class="hljs-comment"># æ–‡æ¡£</span>
â”œâ”€â”€ CLAUDE.md                   <span class="hljs-comment"># é¡¹ç›®ä¸»é…ç½®</span>
â””â”€â”€ README.md                   <span class="hljs-comment"># é¡¹ç›®è¯´æ˜</span>
</code></pre>













































<table><thead><tr><th>é…ç½®æ–‡ä»¶</th><th>ä½ç½®</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td><strong>CLAUDE.md</strong></td><td>é¡¹ç›®æ ¹ç›®å½•</td><td>é¡¹ç›®é…ç½®</td></tr><tr><td><strong>settings.json</strong></td><td>~/.claude/ æˆ–é¡¹ç›®/.claude/</td><td>å…¨å±€/é¡¹ç›®è®¾ç½®</td></tr><tr><td><strong>agents.json</strong></td><td>~/.claude/ æˆ–é¡¹ç›®/.claude/</td><td>å­ä»£ç†é…ç½®</td></tr><tr><td><strong>mcp.json</strong></td><td>~/.claude/</td><td>MCP æœåŠ¡å™¨é…ç½®</td></tr><tr><td><strong>hooks/</strong></td><td>~/.claude/hooks/</td><td>Hook è„šæœ¬</td></tr><tr><td><strong>skills/</strong></td><td>~/.claude/skills/</td><td>è‡ªå®šä¹‰ Skills</td></tr><tr><td><strong>rules/</strong></td><td>é¡¹ç›®/.claude/rules/</td><td>æ¨¡å—åŒ–è§„åˆ™</td></tr></tbody></table>
<h5 data-id="heading-16">è‡ªå·±çš„å…¨å±€é¡¹ç›®é€šç”¨claude.md</h5>
<p><span href="https://code.juejin.cn/pen/7593743222019489802" class="code-editor-container"><iframe class="code-editor-frame" data-code="code-editor-element" data-code-id="7593743222019489802" data-src="https://code.juejin.cn/pen/7593743222019489802" style="display:none;" loading="lazy"/><span class="loading-placeholder" style="display:none"><img class="placeholder-image" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAAJElEQVRoge3BMQEAAADCoPVP7WkJoAAAAAAAAAAAAAAAAAAAbjh8AAFte11jAAAAAElFTkSuQmCC" loading="lazy"/><span class="loading-logo"/></span></span></p>
<h4 data-id="heading-17">Â æ¨èèµ„æº</h4>
<h5 data-id="heading-18">å®˜æ–¹èµ„æº</h5>
<ul>
<li><strong>Claude Code å®˜ç½‘:</strong> Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fcode.claude.com%2F" target="_blank" title="https://code.claude.com/" ref="nofollow noopener noreferrer">code.claude.com</a></li>
<li><strong>æ–‡æ¡£:</strong> Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fcode.claude.com%2Fdocs" target="_blank" title="https://code.claude.com/docs" ref="nofollow noopener noreferrer">code.claude.com/docs</a></li>
<li><strong>GitHub:</strong> Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fanthropics%2Fclaude-code" target="_blank" title="https://github.com/anthropics/claude-code" ref="nofollow noopener noreferrer">github.com/anthropics/â€¦</a></li>
<li><strong>Skills åº“:</strong> Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fanthropics%2Fskills" target="_blank" title="https://github.com/anthropics/skills" ref="nofollow noopener noreferrer">github.com/anthropics/â€¦</a></li>
<li><strong>MCP æœåŠ¡å™¨:</strong> Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fmodelcontextprotocol" target="_blank" title="https://github.com/modelcontextprotocol" ref="nofollow noopener noreferrer">github.com/modelcontexâ€¦</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‘½ä»¤è¡Œä¸å›¾å½¢ç•Œé¢çš„å¤åˆ¶å“²å­¦ï¼šä» `cp a b` è¯´èµ·]]></title>    <link>https://juejin.cn/post/7593337928307392538</link>    <guid>https://juejin.cn/post/7593337928307392538</guid>    <pubDate>2026-01-10T10:56:19.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7593337928307392538" data-draft-id="7593261984190382130" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‘½ä»¤è¡Œä¸å›¾å½¢ç•Œé¢çš„å¤åˆ¶å“²å­¦ï¼šä» `cp a b` è¯´èµ·"/> <meta itemprop="keywords" content="ç¨‹åºå‘˜,å‘½ä»¤è¡Œ"/> <meta itemprop="datePublished" content="2026-01-10T10:56:19.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="donecoding"/> <meta itemprop="url" content="https://juejin.cn/user/3192637500430093"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‘½ä»¤è¡Œä¸å›¾å½¢ç•Œé¢çš„å¤åˆ¶å“²å­¦ï¼šä» `cp a b` è¯´èµ·
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3192637500430093/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    donecoding
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-10T10:56:19.000Z" title="Sat Jan 10 2026 10:56:19 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    4
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€ï¼šä¸€ä¸ªç®€å•çš„å¤åˆ¶æ“ä½œï¼Œä¸¤ç§ä¸åŒçš„æ€ç»´æ¨¡å¼</h2>
<p>å¦‚æœä½ æ›¾ç»åœ¨ Linux ç»ˆç«¯ä¸­æ‰§è¡Œè¿‡ <code>cp a b</code> å‘½ä»¤ï¼Œå¯èƒ½é‡åˆ°è¿‡ä¸€äº›æ„æƒ³ä¸åˆ°çš„ç»“æœã€‚ä¸ºä»€ä¹ˆæœ‰æ—¶å€™ä¼šåˆ›å»ºæ–°æ–‡ä»¶ï¼Œæœ‰æ—¶å€™ä¼šè¦†ç›–æ–‡ä»¶ï¼Œæœ‰æ—¶å€™åˆä¼šæŠŠæ–‡ä»¶æ”¾åˆ°ç›®å½•é‡Œï¼Ÿè¿™èƒŒåéšè—ç€ Unix å‘½ä»¤è¡Œä¸å›¾å½¢ç•Œé¢æ“ä½œåœ¨è®¾è®¡å“²å­¦ä¸Šçš„æ ¹æœ¬å·®å¼‚ã€‚</p>
<p>ä»Šå¤©ï¼Œæˆ‘ä»¬å°±æ¥æ·±å…¥æ¢è®¨å››ç§å¸¸è§çš„ <code>cp</code> å‘½ä»¤å˜ä½“ï¼š<code>cp a b</code>ã€<code>cp a/ b</code>ã€<code>cp a/ b/</code> å’Œ <code>cp a b/</code>ï¼Œå¹¶çœ‹çœ‹å®ƒä»¬åœ¨å¯è§†åŒ–ç•Œé¢ä¸­çš„å¯¹åº”æ“ä½œã€‚</p>
<h2 data-id="heading-1">å››ç§å‘½ä»¤çš„è¡Œä¸ºè§£æ</h2>
<h3 data-id="heading-2">æµ‹è¯•ç¯å¢ƒå‡†å¤‡</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åˆ›å»ºæµ‹è¯•ç›®å½•å’Œæ–‡ä»¶</span>
<span class="hljs-built_in">mkdir</span> -p <span class="hljs-built_in">test</span> &amp;&amp; <span class="hljs-built_in">cd</span> <span class="hljs-built_in">test</span>
<span class="hljs-built_in">mkdir</span> a b
<span class="hljs-built_in">echo</span> <span class="hljs-string">"æ–‡ä»¶å†…å®¹"</span> &gt; a/file.txt
<span class="hljs-built_in">echo</span> <span class="hljs-string">"æ—§å†…å®¹"</span> &gt; b/old.txt
</code></pre>
<h3 data-id="heading-3">1. <code>cp a b</code> - æœ€åŸºç¡€çš„å½¢å¼</h3>
<p><strong>è¡Œä¸ºåˆ†æï¼š</strong></p>
<ul>
<li>å¦‚æœ <code>b</code> ä¸å­˜åœ¨ï¼šåˆ›å»ºæ–‡ä»¶ <code>b</code></li>
<li>å¦‚æœ <code>b</code> æ˜¯æ–‡ä»¶ï¼šè¦†ç›– <code>b</code> çš„å†…å®¹</li>
<li>å¦‚æœ <code>b</code> æ˜¯ç›®å½•ï¼šåœ¨ <code>b</code> ä¸­åˆ›å»º <code>a</code> çš„å‰¯æœ¬ï¼ˆ<code>b/a</code>ï¼‰</li>
</ul>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ç¤ºä¾‹</span>
<span class="hljs-built_in">cp</span> file.txt newfile        <span class="hljs-comment"># åˆ›å»ºæ–°æ–‡ä»¶</span>
<span class="hljs-built_in">cp</span> file.txt existing.txt   <span class="hljs-comment"># è¦†ç›–å·²æœ‰æ–‡ä»¶</span>
<span class="hljs-built_in">cp</span> file.txt <span class="hljs-built_in">dir</span>/           <span class="hljs-comment"># å¤åˆ¶åˆ°ç›®å½•ä¸­</span>
</code></pre>
<p><strong>å›¾å½¢ç•Œé¢å¯¹åº”æ“ä½œï¼š</strong>
åœ¨æ–‡ä»¶ç®¡ç†å™¨ä¸­ï¼Œå°†æ–‡ä»¶ <code>a</code> æ‹–æ‹½åˆ°ç©ºç™½åŒºåŸŸï¼Œä¼šåˆ›å»ºå‰¯æœ¬ <code>b</code>ï¼›å°†æ–‡ä»¶æ‹–æ‹½åˆ°æ–‡ä»¶å¤¹ <code>b</code> ä¸Šï¼Œä¼šå¤åˆ¶åˆ°æ–‡ä»¶å¤¹å†…ã€‚è¿™ä¸ <code>cp a b</code> çš„è¡Œä¸ºåŸºæœ¬ä¸€è‡´ã€‚</p>
<h3 data-id="heading-4">2. <code>cp a/ b</code> - æºè·¯å¾„å¸¦æ–œæ </h3>
<p><strong>è¡Œä¸ºåˆ†æï¼š</strong></p>
<ul>
<li><code>a/</code> å¼ºè°ƒ <code>a</code> æ˜¯ä¸€ä¸ªç›®å½•</li>
<li>å¦‚æœä½¿ç”¨ <code>-r</code> é€’å½’æ ‡å¿—ï¼šå¤åˆ¶ç›®å½• <code>a</code> çš„å†…å®¹åˆ° <code>b</code></li>
<li>å¦‚æœä¸å¸¦ <code>-r</code> ä¸” <code>a</code> æ˜¯ç›®å½•ï¼šä¼šå¿½ç•¥æ–œæ ï¼Œç­‰åŒäº <code>cp a b</code></li>
</ul>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ­£ç¡®ç”¨æ³•</span>
<span class="hljs-built_in">cp</span> -r a/ b    <span class="hljs-comment"># å¤åˆ¶ a ç›®å½•çš„å†…å®¹åˆ° b</span>
</code></pre>
<p><strong>å›¾å½¢ç•Œé¢å¯¹åº”æ“ä½œï¼š</strong>
åœ¨å›¾å½¢ç•Œé¢ä¸­ï¼Œæ‰“å¼€ç›®å½• <code>a</code>ï¼Œå…¨é€‰æ‰€æœ‰æ–‡ä»¶ï¼Œç„¶åç²˜è´´åˆ° <code>b</code> ä¸­ã€‚è¿™å°±æ˜¯ <code>cp -r a/ b</code> çš„è§†è§‰æ•ˆæœã€‚</p>
<h3 data-id="heading-5">3. <code>cp a/ b/</code> - åŒæ–¹éƒ½å¸¦æ–œæ </h3>
<p><strong>è¡Œä¸ºåˆ†æï¼š</strong></p>
<ul>
<li>æœ€æ˜ç¡®çš„ç›®å½•å¯¹ç›®å½•æ“ä½œ</li>
<li>å°†ç›®å½• <code>a</code> çš„å†…å®¹å¤åˆ¶åˆ°ç›®å½• <code>b</code> ä¸­</li>
<li><code>b</code> å¿…é¡»æ˜¯å·²å­˜åœ¨çš„ç›®å½•</li>
</ul>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ç¤ºä¾‹</span>
<span class="hljs-built_in">cp</span> -r a/ b/   <span class="hljs-comment"># å°† a çš„å†…å®¹åˆå¹¶åˆ° b</span>
</code></pre>
<p><strong>å›¾å½¢ç•Œé¢å¯¹åº”æ“ä½œï¼š</strong>
æ‰“å¼€ç›®å½• <code>a</code> å’Œç›®å½• <code>b</code>ï¼Œå°† <code>a</code> ä¸­çš„æ‰€æœ‰æ–‡ä»¶æ‹–æ‹½åˆ° <code>b</code> çª—å£ä¸­ã€‚è¿™æ˜¯éƒ¨ç½²ç½‘ç«™æˆ–åˆå¹¶ç›®å½•æ—¶çš„å¸¸è§æ“ä½œã€‚</p>
<h3 data-id="heading-6">4. <code>cp a b/</code> - ç›®æ ‡è·¯å¾„å¸¦æ–œæ </h3>
<p><strong>è¡Œä¸ºåˆ†æï¼š</strong></p>
<ul>
<li>æ˜ç¡®è¦æ±‚ <code>b</code> å¿…é¡»æ˜¯ç›®å½•</li>
<li>å¦‚æœ <code>b</code> ä¸æ˜¯ç›®å½•æˆ–ä¸å­˜åœ¨ï¼šæŠ¥é”™</li>
<li>æ¯” <code>cp a b</code> æ›´å®‰å…¨ï¼Œé¿å…æ„å¤–è¦†ç›–</li>
</ul>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å®‰å…¨ç¤ºä¾‹</span>
<span class="hljs-built_in">cp</span> file.txt <span class="hljs-built_in">dir</span>/    <span class="hljs-comment"># æ˜ç¡®æ”¾å…¥ç›®å½•</span>
</code></pre>
<h2 data-id="heading-7">å¯¹æ¯”è¡¨æ ¼ï¼šå‘½ä»¤ vs å›¾å½¢ç•Œé¢</h2>















































<table><thead><tr><th>å‘½ä»¤</th><th>å›¾å½¢ç•Œé¢æ“ä½œ</th><th>æ˜¯å¦ä¸€è‡´</th><th>å¤‡æ³¨</th></tr></thead><tbody><tr><td><code>cp a b</code> (bä¸å­˜åœ¨)</td><td>å¤åˆ¶å¹¶é‡å‘½å</td><td>âœ… å®Œå…¨ä¸€è‡´</td><td>éƒ½åˆ›å»ºæ–°æ–‡ä»¶</td></tr><tr><td><code>cp a b</code> (bæ˜¯æ–‡ä»¶)</td><td>ç²˜è´´æ—¶é€‰æ‹©"æ›¿æ¢"</td><td>âœ… åŸºæœ¬ä¸€è‡´</td><td>å›¾å½¢ç•Œé¢é€šå¸¸ä¼šè¯¢é—®</td></tr><tr><td><code>cp a b</code> (bæ˜¯ç›®å½•)</td><td>æ‹–æ‹½åˆ°æ–‡ä»¶å¤¹ä¸Š</td><td>âœ… å®Œå…¨ä¸€è‡´</td><td>éƒ½å¤åˆ¶åˆ°ç›®å½•å†…</td></tr><tr><td><code>cp -r a/ b</code></td><td>å¤åˆ¶æ–‡ä»¶å¤¹å†…å®¹</td><td>âš ï¸ ç•¥æœ‰ä¸åŒ</td><td>å›¾å½¢ç•Œé¢é€šå¸¸ä¿æŒç›®å½•ç»“æ„</td></tr><tr><td><code>cp -r a/ b/</code></td><td>åˆå¹¶ä¸¤ä¸ªæ–‡ä»¶å¤¹</td><td>âœ… å®Œå…¨ä¸€è‡´</td><td>éƒ½è¿›è¡Œå†…å®¹åˆå¹¶</td></tr><tr><td><code>cp a b/</code></td><td>æ‹–æ‹½åˆ°å·²æ‰“å¼€çš„æ–‡ä»¶å¤¹</td><td>âœ… å®Œå…¨ä¸€è‡´</td><td>éƒ½æ˜ç¡®ç›®æ ‡ä¸ºç›®å½•</td></tr></tbody></table>
<h2 data-id="heading-8">å†å²åŸå› ï¼šä¸ºä»€ä¹ˆå‘½ä»¤è¡Œè¿™æ ·è®¾è®¡ï¼Ÿ</h2>
<h3 data-id="heading-9">1. <strong>è¯ç”Ÿäº 1970 å¹´ä»£</strong></h3>
<p>Unix çš„ <code>cp</code> å‘½ä»¤è¯ç”Ÿäº 1970 å¹´ä»£æ—©æœŸï¼Œå½“æ—¶çš„è®¡ç®—ç¯å¢ƒä¸ä»Šå¤©æˆªç„¶ä¸åŒï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å½“æ—¶çš„ç¡¬ä»¶é™åˆ¶ï¼š</span>
<span class="hljs-comment"># - å†…å­˜ï¼šKB çº§åˆ«</span>
<span class="hljs-comment"># - ç£ç›˜ï¼šMB çº§åˆ«  </span>
<span class="hljs-comment"># - ç”¨æˆ·ï¼šä¸“ä¸šç³»ç»Ÿç®¡ç†å‘˜</span>
<span class="hljs-comment"># - ç•Œé¢ï¼šçº¯æ–‡æœ¬ç»ˆç«¯</span>

<span class="hljs-comment"># è®¾è®¡åŸåˆ™ï¼šç®€æ´ã€é«˜æ•ˆã€è„šæœ¬å‹å¥½</span>
</code></pre>
<h3 data-id="heading-10">2. <strong>è„šæœ¬ä¼˜å…ˆçš„è®¾è®¡å“²å­¦</strong></h3>
<p>Unix å‘½ä»¤è¢«è®¾è®¡ä¸º"æ²‰é»˜çš„å·¥å…·åŒ "ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åœ¨è„šæœ¬ä¸­ï¼Œè¿™æ ·çš„ä»£ç å¾ˆå¸¸è§ï¼š</span>
<span class="hljs-built_in">cp</span> config.template config.prod  <span class="hljs-comment"># ç›´æ¥è¦†ç›–ï¼Œä¸éœ€è¦ç¡®è®¤</span>
<span class="hljs-built_in">cp</span> -r src/* /var/www/           <span class="hljs-comment"># éƒ¨ç½²æ—¶ç›´æ¥å¤åˆ¶</span>

<span class="hljs-comment"># å¦‚æœæ¯æ¬¡éƒ½éœ€è¦ç¡®è®¤ï¼Œè„šæœ¬ä¼šå˜å¾—å¤æ‚ï¼š</span>
<span class="hljs-keyword">if</span> [ -f <span class="hljs-string">"config.prod"</span> ]; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">rm</span> config.prod
<span class="hljs-keyword">fi</span>
<span class="hljs-built_in">cp</span> config.template config.prod
</code></pre>
<h3 data-id="heading-11">3. <strong>å®‰å…¨ä¸æ•ˆç‡çš„æƒè¡¡</strong></h3>
<p>Unix é€‰æ‹©äº†"æ•ˆç‡ä¼˜å…ˆï¼Œå®‰å…¨å¯é€‰"ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># é»˜è®¤è¡Œä¸ºï¼šé«˜æ•ˆä½†å±é™©</span>
<span class="hljs-built_in">cp</span> important.doc backup.doc  <span class="hljs-comment"># ç›´æ¥è¦†ç›–ï¼Œä¸è­¦å‘Š</span>

<span class="hljs-comment"># å®‰å…¨é€‰é¡¹ï¼šéœ€è¦æ—¶æ˜¾å¼å¯ç”¨</span>
<span class="hljs-built_in">cp</span> -i important.doc backup.doc  <span class="hljs-comment"># -i äº¤äº’æ¨¡å¼</span>
<span class="hljs-built_in">alias</span> <span class="hljs-built_in">cp</span>=<span class="hljs-string">'cp -i'</span>                <span class="hljs-comment"># ç”¨æˆ·è‡ªè¡Œè®¾ç½®åˆ«å</span>
</code></pre>
<h3 data-id="heading-12">4. <strong>ä¸å›¾å½¢ç•Œé¢çš„æ ¹æœ¬å·®å¼‚</strong></h3>
<p>å›¾å½¢ç•Œé¢è¯ç”Ÿäº 1980 å¹´ä»£ï¼Œé¢å‘çš„æ˜¯æ™®é€šç”¨æˆ·ï¼š</p>
<pre><code class="hljs language-text" lang="text">å‘½ä»¤è¡Œå“²å­¦ï¼š
- ç”¨æˆ·çŸ¥é“è‡ªå·±åœ¨åšä»€ä¹ˆ
- é»˜è®¤æä¾›æœ€é«˜æ•ˆç‡
- å®‰å…¨åŠŸèƒ½éœ€è¦æ˜¾å¼å¯ç”¨

å›¾å½¢ç•Œé¢å“²å­¦ï¼š
- é˜²æ­¢ç”¨æˆ·çŠ¯é”™è¯¯
- é»˜è®¤æä¾›æœ€å¤šä¿æŠ¤
- é«˜çº§åŠŸèƒ½éœ€è¦æ·±å…¥èœå•
</code></pre>
<h2 data-id="heading-13">å®é™…åº”ç”¨ï¼šä½•æ—¶ä½¿ç”¨å“ªç§å½¢å¼ï¼Ÿ</h2>
<h3 data-id="heading-14">åœºæ™¯ 1ï¼šéƒ¨ç½²ç½‘ç«™</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># é”™è¯¯ï¼šä¼šåˆ›å»º website/dist ç›®å½•</span>
<span class="hljs-built_in">cp</span> -r dist website

<span class="hljs-comment"># æ­£ç¡®ï¼šåªå¤åˆ¶ dist çš„å†…å®¹åˆ° website</span>
<span class="hljs-built_in">cp</span> -r dist/ website/

<span class="hljs-comment"># æœ€å®‰å…¨ï¼šç¡®ä¿ website å­˜åœ¨ä¸”æ˜¯ç›®å½•</span>
<span class="hljs-built_in">mkdir</span> -p website &amp;&amp; <span class="hljs-built_in">cp</span> -r dist/. website/
</code></pre>
<h3 data-id="heading-15">åœºæ™¯ 2ï¼šå¤‡ä»½é…ç½®æ–‡ä»¶</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å±é™©ï¼šå¯èƒ½æ„å¤–è¦†ç›–</span>
<span class="hljs-built_in">cp</span> .<span class="hljs-built_in">env</span> .env.backup

<span class="hljs-comment"># æ›´å¥½ï¼šä½¿ç”¨æ—¶é—´æˆ³é¿å…å†²çª</span>
<span class="hljs-built_in">cp</span> .<span class="hljs-built_in">env</span> .env.backup.$(<span class="hljs-built_in">date</span> +%Y%m%d)

<span class="hljs-comment"># æœ€ä½³ï¼šä½¿ç”¨ç‰ˆæœ¬æ§åˆ¶</span>
git add .<span class="hljs-built_in">env</span> &amp;&amp; git commit -m <span class="hljs-string">"å¤‡ä»½é…ç½®"</span>
</code></pre>
<h3 data-id="heading-16">åœºæ™¯ 3ï¼šæ—¥å¸¸æ–‡ä»¶ç®¡ç†</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ä¸ªäººä½¿ç”¨æ—¶ï¼Œå¯ä»¥è®¾ç½®å®‰å…¨åˆ«å</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"alias cp='cp -i'"</span> &gt;&gt; ~/.bashrc
<span class="hljs-built_in">echo</span> <span class="hljs-string">"alias mv='mv -i'"</span> &gt;&gt; ~/.bashrc
<span class="hljs-built_in">echo</span> <span class="hljs-string">"alias rm='rm -i'"</span> &gt;&gt; ~/.bashrc

<span class="hljs-comment"># æˆ–è€…åœ¨å¤åˆ¶ç›®å½•æ—¶æ€»æ˜¯ä½¿ç”¨æ˜ç¡®çš„å½¢å¼</span>
<span class="hljs-built_in">cp</span> -r <span class="hljs-built_in">source</span>/ destination/  <span class="hljs-comment"># æˆ‘çŸ¥é“æˆ‘åœ¨åˆå¹¶ç›®å½•å†…å®¹</span>
<span class="hljs-built_in">cp</span> -r <span class="hljs-built_in">source</span> destination/   <span class="hljs-comment"># æˆ‘çŸ¥é“æˆ‘åœ¨åˆ›å»ºå­ç›®å½•</span>
</code></pre>
<h2 data-id="heading-17">ç°ä»£æ”¹è¿›ï¼šæ›´å®‰å…¨çš„æ›¿ä»£æ–¹æ¡ˆ</h2>
<h3 data-id="heading-18">1. <strong>ä½¿ç”¨ <code>rsync</code></strong></h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ›´æ™ºèƒ½çš„å¤åˆ¶ï¼Œé»˜è®¤ä¸è¦†ç›–</span>
rsync -av <span class="hljs-built_in">source</span>/ destination/

<span class="hljs-comment"># æ˜ç¡®åŒæ­¥ï¼ˆåˆ é™¤ç›®æ ‡ä¸­ä¸å­˜åœ¨äºæºçš„æ–‡ä»¶ï¼‰</span>
rsync -av --delete <span class="hljs-built_in">source</span>/ destination/
</code></pre>
<h3 data-id="heading-19">2. <strong>ä½¿ç”¨ <code>install</code> å‘½ä»¤</strong></h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ä¸“é—¨ç”¨äºå®‰è£…æ–‡ä»¶çš„å‘½ä»¤</span>
install -m 644 source.txt /etc/config/

<span class="hljs-comment"># å¯ä»¥è®¾ç½®å¤‡ä»½</span>
install -b -m 644 source.txt /etc/config/
</code></pre>
<h3 data-id="heading-20">3. <strong>ç¼–å†™å®‰å…¨çš„åŒ…è£…å‡½æ•°</strong></h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åœ¨ ~/.bashrc ä¸­æ·»åŠ </span>
<span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">safe_cp</span></span>() {
    <span class="hljs-keyword">if</span> [ -d <span class="hljs-string">"<span class="hljs-variable">$1</span>"</span> ] &amp;&amp; [ <span class="hljs-string">"<span class="hljs-variable">${1: -1}</span>"</span> != <span class="hljs-string">"/"</span> ]; <span class="hljs-keyword">then</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"æç¤ºï¼šæº '<span class="hljs-variable">$1</span>' æ˜¯ç›®å½•ï¼Œæ˜¯å¦è¦å¤åˆ¶æ•´ä¸ªç›®å½•ï¼Ÿ"</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"  ä½¿ç”¨: safe_cp <span class="hljs-variable">$1</span>/ <span class="hljs-variable">$2</span>   # å¤åˆ¶ç›®å½•å†…å®¹"</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"  ä½¿ç”¨: safe_cp <span class="hljs-variable">$1</span> <span class="hljs-variable">$2</span>/   # å¤åˆ¶æ•´ä¸ªç›®å½•"</span>
        <span class="hljs-built_in">return</span> 1
    <span class="hljs-keyword">fi</span>
    
    <span class="hljs-built_in">cp</span> -i <span class="hljs-string">"<span class="hljs-variable">$@</span>"</span>
}
</code></pre>
<h2 data-id="heading-21">æ€»ç»“ï¼šç†è§£å·®å¼‚ï¼Œé€‰æ‹©é€‚åˆçš„å·¥å…·</h2>
<h3 data-id="heading-22">å…³é”®è¦ç‚¹</h3>
<ol>
<li><strong><code>cp a b</code> æ˜¯æœ€çµæ´»çš„</strong>ï¼Œä½†ä¹Ÿæ˜¯æœ€å®¹æ˜“å‡ºé”™çš„</li>
<li><strong>æ–œæ  <code>/</code> æ˜¯é‡è¦çš„æç¤º</strong>ï¼š<code>a/</code> è¡¨ç¤º"ç›®å½•çš„å†…å®¹"ï¼Œ<code>b/</code> è¡¨ç¤º"å¿…é¡»æ˜¯ç›®å½•"</li>
<li><strong>å›¾å½¢ç•Œé¢æ›´å®‰å…¨</strong>ï¼Œä½†å‘½ä»¤è¡Œæ›´å¼ºå¤§</li>
<li><strong>äº†è§£å†å²èƒŒæ™¯</strong>æœ‰åŠ©äºç†è§£ä¸ºä»€ä¹ˆè¿™æ ·è®¾è®¡</li>
</ol>
<h3 data-id="heading-23">ä¸ªäººå»ºè®®</h3>
<p>å¯¹äºåˆå­¦è€…ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ€»æ˜¯ä½¿ç”¨æ˜ç¡®çš„å½¢å¼</span>
<span class="hljs-built_in">cp</span> file <span class="hljs-built_in">dir</span>/          <span class="hljs-comment"># æˆ‘çŸ¥é“ dir æ˜¯ç›®å½•</span>
<span class="hljs-built_in">cp</span> -r <span class="hljs-built_in">source</span>/ dest/   <span class="hljs-comment"># æˆ‘çŸ¥é“æˆ‘åœ¨åˆå¹¶ç›®å½•å†…å®¹</span>
</code></pre>
<p>å¯¹äºé«˜çº§ç”¨æˆ·ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># äº†è§£é»˜è®¤è¡Œä¸ºï¼Œåœ¨è„šæœ¬ä¸­ä½¿ç”¨</span>
<span class="hljs-built_in">cp</span> config.new config  <span class="hljs-comment"># åœ¨è„šæœ¬ä¸­ç›´æ¥è¦†ç›–</span>
</code></pre>
<p>å¯¹äºæ‰€æœ‰äººï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># è®¾ç½®å®‰å…¨åˆ«åï¼Œä¿æŠ¤è‡ªå·±</span>
<span class="hljs-built_in">alias</span> <span class="hljs-built_in">cp</span>=<span class="hljs-string">'cp -i'</span>
</code></pre>
<h3 data-id="heading-24">æœ€åçš„æ€è€ƒ</h3>
<p>å‘½ä»¤è¡Œå’Œå›¾å½¢ç•Œé¢ä»£è¡¨äº†ä¸¤ç§ä¸åŒçš„è®¾è®¡å“²å­¦ï¼šä¸€ç§æ˜¯ä¿¡ä»»ç”¨æˆ·çš„ä¸“ä¸šåˆ¤æ–­ï¼Œè¿½æ±‚æè‡´æ•ˆç‡ï¼›ä¸€ç§æ˜¯ä¿æŠ¤ç”¨æˆ·å…äºçŠ¯é”™ï¼Œæä¾›ç›´è§‚ä½“éªŒã€‚æ²¡æœ‰ç»å¯¹çš„ä¼˜åŠ£ï¼Œåªæœ‰é€‚åˆçš„åœºæ™¯ã€‚</p>
<p>ç†è§£ <code>cp</code> å‘½ä»¤çš„è¿™äº›ç»†èŠ‚ï¼Œä¸ä»…èƒ½è®©æˆ‘ä»¬çš„æ—¥å¸¸æ“ä½œæ›´åŠ å¾—å¿ƒåº”æ‰‹ï¼Œä¹Ÿèƒ½è®©æˆ‘ä»¬æ›´æ·±å…¥åœ°ç†è§£è®¡ç®—æœºç³»ç»Ÿè®¾è®¡èƒŒåçš„æ€è€ƒã€‚ä¸‹æ¬¡æ‰§è¡Œ <code>cp</code> å‘½ä»¤æ—¶ï¼Œä¸å¦¨æƒ³ä¸€æƒ³ï¼šæˆ‘ç°åœ¨çš„æ“ä½œï¼Œåœ¨å›¾å½¢ç•Œé¢ä¸­ä¼šæ˜¯ä»€ä¹ˆæ ·å­ï¼Ÿ</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€å¼€å‘ç«æ˜Ÿåœ°å¹³çº¿è¾…åŠ©ã€‘æ™ºå•†ä¸å¤Ÿï¼Œç¼–ç¨‹æ¥å‡‘]]></title>    <link>https://juejin.cn/post/7593232758127804422</link>    <guid>https://juejin.cn/post/7593232758127804422</guid>    <pubDate>2026-01-10T13:39:17.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7593232758127804422" data-draft-id="7593232758127640582" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€å¼€å‘ç«æ˜Ÿåœ°å¹³çº¿è¾…åŠ©ã€‘æ™ºå•†ä¸å¤Ÿï¼Œç¼–ç¨‹æ¥å‡‘"/> <meta itemprop="keywords" content="ç®—æ³•"/> <meta itemprop="datePublished" content="2026-01-10T13:39:17.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="dora"/> <meta itemprop="url" content="https://juejin.cn/user/2656895088205453"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€å¼€å‘ç«æ˜Ÿåœ°å¹³çº¿è¾…åŠ©ã€‘æ™ºå•†ä¸å¤Ÿï¼Œç¼–ç¨‹æ¥å‡‘
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2656895088205453/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    dora
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-10T13:39:17.000Z" title="Sat Jan 10 2026 13:39:17 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h4 data-id="heading-0">æ¸¸æˆä»‹ç»</h4>
<p>ã€Šç«æ˜Ÿåœ°å¹³çº¿ã€‹ï¼ˆ<em>Mars Horizon</em>ï¼‰æ˜¯ä¸€æ¬¾<strong>å¤ªç©ºæ¢ç´¢ + ç®¡ç† + ç­–ç•¥æ¨¡æ‹Ÿæ¸¸æˆ</strong>ï¼Œç”±è‹±å›½ç‹¬ç«‹å·¥ä½œå®¤ Auroch Digital å¼€å‘ï¼Œå¹¶ç”± The Irregular Corporation å‘è¡Œã€‚è¯¥ä½œå¾—åˆ° <strong>æ¬§æ´²èˆªå¤©å±€ï¼ˆESAï¼‰å’Œè‹±å›½èˆªå¤©å±€çš„æ”¯æŒä¸å’¨è¯¢</strong>ï¼Œç›®çš„åœ¨äºæä¾›<strong>çœŸå®æ„Ÿå¼ºã€ç­–ç•¥æ·±åº¦é«˜çš„èˆªå¤©æ¢ç´¢ä½“éªŒ</strong>ã€‚</p>
<h4 data-id="heading-1">è§„åˆ™ä»‹ç»</h4>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/485e580a0ba64bac8706e16925361606~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZG9yYQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768657157&amp;x-signature=WwYzK%2F%2F8I47%2F6QMjXyv%2Bf4WOyvs%3D" alt="20260110_193643.gif" loading="lazy"/></p>
<p>åœ¨ã€Šç«æ˜Ÿåœ°å¹³çº¿ã€‹ä¸­ï¼Œæ•´ä¸ªå¤ªç©ºæ¢ç´¢è¿‡ç¨‹ä»¥<strong>å›åˆåˆ¶ä»»åŠ¡è§„åˆ’</strong>çš„æ–¹å¼è¿›è¡Œã€‚<br/>
æ¯ä¸€ä¸ªå›åˆï¼Œç©å®¶éœ€è¦åœ¨æœ‰é™çš„è¡ŒåŠ¨æ¬¡æ•°å†…ï¼Œåˆç†é€‰æ‹©å¹¶æ‰§è¡Œä¸åŒçš„æŒ‡ä»¤ï¼Œé€šè¿‡<strong>æ¶ˆè€—å·²æœ‰èµ„æºæ¥æ¢å–æ–°çš„å…³é”®èµ„æº</strong>ï¼Œä»è€Œé€æ­¥æ¨è¿›èˆªå¤©ä»»åŠ¡çš„å®Œæˆã€‚</p>
<h4 data-id="heading-2">å¼€å‘è¾…åŠ©</h4>
<p><strong>1.Launcher.java</strong></p>
<p>ç”±äºæ¯æ¬¡æ¸¸æˆå‘½ä»¤åˆ—è¡¨æ˜¯éšæœºç”Ÿæˆçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸èƒ½ç”Ÿæ¬ç¡¬å¥—ï¼Œå¿…é¡»å†™ä¸€ä¸ªæš´åŠ›æ±‚è§£ç¨‹åºã€‚é¦–å…ˆæˆ‘ä»¬éœ€è¦å†™ä¸€ä¸ªæ¥æ”¶è¾“å…¥å˜é‡çš„æ‰§è¡Œå…¥å£ï¼Œä½¿ç”¨çš„æ˜¯Scannerã€‚è¾“å…¥6~12æ¡å‘½ä»¤ï¼Œè¿™æ¬¡ä»»åŠ¡æ˜¯9æ¡å‘½ä»¤ï¼Œå†åŠ ä¸Šæœ€åå›ºå®šçš„å……ç”µå‘½ä»¤ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> java.util.*;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Launcher</span> {

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {

        <span class="hljs-type">Scanner</span> <span class="hljs-variable">scanner</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);
        <span class="hljs-type">MarsSolver</span> <span class="hljs-variable">solver</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MarsSolver</span>();
        <span class="hljs-type">State</span> <span class="hljs-variable">init</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">State</span>();
        List&lt;Command&gt; userCommands = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();

        <span class="hljs-comment">// =====================================================</span>
        <span class="hljs-comment">// 1. è¾“å…¥å‘½ä»¤</span>
        <span class="hljs-comment">// =====================================================</span>
        <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
            String name;
            <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
                System.out.print(<span class="hljs-string">"\nè¯·è¾“å…¥å‘½ä»¤åç§°ï¼ˆæˆ–è¾“å…¥ 0 ç»“æŸå‘½ä»¤è¾“å…¥ï¼‰: "</span>);
                name = scanner.nextLine().trim();

                <span class="hljs-keyword">if</span> (<span class="hljs-string">"0"</span>.equals(name)) <span class="hljs-keyword">break</span>;

                <span class="hljs-keyword">if</span> (name.isEmpty()) {
                    System.out.println(<span class="hljs-string">"âŒ å‘½ä»¤åç§°ä¸èƒ½ä¸ºç©º"</span>);
                    <span class="hljs-keyword">continue</span>;
                }
                <span class="hljs-keyword">break</span>;
            }
            <span class="hljs-keyword">if</span> (<span class="hljs-string">"0"</span>.equals(name)) <span class="hljs-keyword">break</span>;


            Map&lt;String, Integer&gt; consume = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
            Map&lt;String, Integer&gt; produce = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();

            System.out.println(
                    <span class="hljs-string">"è¯·è¾“å…¥ã€æ¶ˆè€—ã€‘èµ„æºï¼ˆæ ¼å¼ï¼šç±»å‹ æ•°é‡ï¼‰\n"</span> +
                            <span class="hljs-string">"1-ç”µåŠ› 2-ç£åŠ› 3-æ•°æ® 4-ä¿¡å· 5-åŠ¨åŠ› 6-å€¾æ–œ 7-æ¸©åº¦ 8-å®‡èˆªå‘˜\n"</span> +
                            <span class="hljs-string">"è¾“å…¥ 0 ç»“æŸï¼š"</span>
            );
            <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
                System.out.print(<span class="hljs-string">"æ¶ˆè€—&gt; "</span>);
                <span class="hljs-type">String</span> <span class="hljs-variable">line</span> <span class="hljs-operator">=</span> scanner.nextLine().trim();
                <span class="hljs-keyword">if</span> (<span class="hljs-string">"0"</span>.equals(line)) <span class="hljs-keyword">break</span>;
                <span class="hljs-keyword">try</span> {
                    String[] p = line.split(<span class="hljs-string">"\s+"</span>);
                    <span class="hljs-type">String</span> <span class="hljs-variable">key</span> <span class="hljs-operator">=</span> typeToName(Integer.parseInt(p[<span class="hljs-number">0</span>]));
                    <span class="hljs-type">int</span> <span class="hljs-variable">v</span> <span class="hljs-operator">=</span> Integer.parseInt(p[<span class="hljs-number">1</span>]);
                    consume.put(key, consume.getOrDefault(key, <span class="hljs-number">0</span>) + v);
                } <span class="hljs-keyword">catch</span> (Exception e) {
                    System.out.println(<span class="hljs-string">"âŒ æ ¼å¼é”™è¯¯"</span>);
                }
            }

            System.out.println(
                    <span class="hljs-string">"è¯·è¾“å…¥ã€è·å¾—ã€‘èµ„æºï¼ˆæ ¼å¼ï¼šç±»å‹ æ•°é‡ï¼‰\n"</span> +
                            <span class="hljs-string">"1-ç”µåŠ› 2-ç£åŠ› 3-æ•°æ® 4-ä¿¡å· 5-åŠ¨åŠ› 6-å€¾æ–œ 7-æ¸©åº¦\n"</span> +
                            <span class="hljs-string">"è¾“å…¥ 0 ç»“æŸï¼š"</span>
            );
            <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
                System.out.print(<span class="hljs-string">"è·å¾—&gt; "</span>);
                <span class="hljs-type">String</span> <span class="hljs-variable">line</span> <span class="hljs-operator">=</span> scanner.nextLine().trim();
                <span class="hljs-keyword">if</span> (<span class="hljs-string">"0"</span>.equals(line)) <span class="hljs-keyword">break</span>;
                <span class="hljs-keyword">try</span> {
                    String[] p = line.split(<span class="hljs-string">"\s+"</span>);
                    <span class="hljs-type">String</span> <span class="hljs-variable">key</span> <span class="hljs-operator">=</span> typeToName(Integer.parseInt(p[<span class="hljs-number">0</span>]));
                    <span class="hljs-type">int</span> <span class="hljs-variable">v</span> <span class="hljs-operator">=</span> Integer.parseInt(p[<span class="hljs-number">1</span>]);
                    produce.put(key, produce.getOrDefault(key, <span class="hljs-number">0</span>) + v);
                } <span class="hljs-keyword">catch</span> (Exception e) {
                    System.out.println(<span class="hljs-string">"âŒ æ ¼å¼é”™è¯¯"</span>);
                }
            }

            userCommands.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Command</span>(name, <span class="hljs-number">1</span>, consume, produce));
            System.out.println(<span class="hljs-string">"âœ… å·²æ·»åŠ å‘½ä»¤ï¼š"</span> + name);
        }

        <span class="hljs-comment">// å›ºå®šå……ç”µå‘½ä»¤</span>
        Map&lt;String, Integer&gt; charge = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
        charge.put(<span class="hljs-string">"power"</span>, <span class="hljs-number">1</span>);
        userCommands.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Command</span>(<span class="hljs-string">"Charge"</span>, <span class="hljs-number">0</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;(), charge));
        MarsSolver.ALL = userCommands;

        <span class="hljs-comment">// =====================</span>
        <span class="hljs-comment">// å‘½ä»¤æ ¡å¯¹ &amp; ç¼–è¾‘é˜¶æ®µ</span>
        <span class="hljs-comment">// =====================</span>
        editCommands(scanner, userCommands);
        MarsSolver.ALL = userCommands;
        System.out.println(<span class="hljs-string">"\næ ¡å¯¹å®Œæˆçš„å‘½ä»¤åˆ—è¡¨:"</span>);
        <span class="hljs-keyword">for</span> (Command c : MarsSolver.ALL) {
            System.out.println(c.getName() + <span class="hljs-string">" | æ¶ˆè€—: "</span> + c.getConsume() + <span class="hljs-string">" | è·å¾—: "</span> + c.getProduce());
        }

        <span class="hljs-comment">// =====================================================</span>
        <span class="hljs-comment">// 2. æœç´¢å‚æ•°</span>
        <span class="hljs-comment">// =====================================================</span>
        MarsSolver.ROUNDS = readInt(scanner, <span class="hljs-string">"è¯·è¾“å…¥å›åˆæ•° ROUNDS: "</span>);
        MarsSolver.STEPS = readInt(scanner, <span class="hljs-string">"è¯·è¾“å…¥æ¯å›åˆå‘½ä»¤æ•° STEPS: "</span>);

        <span class="hljs-comment">// =====================================================</span>
        <span class="hljs-comment">// 3. åˆå§‹çŠ¶æ€</span>
        <span class="hljs-comment">// =====================================================</span>
        init.power = readInt(scanner, <span class="hljs-string">"è¯·è¾“å…¥åˆå§‹ç”µåŠ›: "</span>);
        init.craw = readInt(scanner, <span class="hljs-string">"è¯·è¾“å…¥å®‡èˆªå‘˜æ•°: "</span>);
        MarsSolver.crawPerRound = init.craw;

        <span class="hljs-comment">// æ¸©åº¦</span>
        MarsSolver.useTempLimit = readBool01(scanner, <span class="hljs-string">"æ˜¯å¦å¯ç”¨ã€æ¸©åº¦åˆ¤å®šã€‘ï¼Ÿ(1=æ˜¯ 0=å¦): "</span>);
        <span class="hljs-keyword">if</span> (MarsSolver.useTempLimit) {
            init.temp = readInt(scanner, <span class="hljs-string">"è¯·è¾“å…¥åˆå§‹æ¸©åº¦: "</span>);
            <span class="hljs-keyword">if</span> (readBool01(scanner, <span class="hljs-string">"æ˜¯å¦è®¾ç½®æ¸©åº¦ä¸‹é™ï¼Ÿ1æ˜¯ 0å¦: "</span>)) {
                MarsSolver.tempMin = readInt(scanner, <span class="hljs-string">"è¯·è¾“å…¥æ¸©åº¦ä¸‹é™: "</span>);
            }
            <span class="hljs-keyword">if</span> (readBool01(scanner, <span class="hljs-string">"æ˜¯å¦è®¾ç½®æ¸©åº¦ä¸Šé™ï¼Ÿ1æ˜¯ 0å¦: "</span>)) {
                MarsSolver.tempMax = readInt(scanner, <span class="hljs-string">"è¯·è¾“å…¥æ¸©åº¦ä¸Šé™: "</span>);
            }
            MarsSolver.tempDeltaMin = readInt(scanner, <span class="hljs-string">"å›åˆæ¸©åº¦å˜åŒ–æœ€å°å€¼: "</span>);
            MarsSolver.tempDeltaMax = readInt(scanner, <span class="hljs-string">"å›åˆæ¸©åº¦å˜åŒ–æœ€å¤§å€¼: "</span>);
        }

        <span class="hljs-comment">// å€¾æ–œ</span>
        MarsSolver.useTiltLimit = readBool01(scanner, <span class="hljs-string">"æ˜¯å¦å¯ç”¨ã€å€¾æ–œåˆ¤å®šã€‘ï¼Ÿ(1=æ˜¯ 0=å¦): "</span>);
        <span class="hljs-keyword">if</span> (MarsSolver.useTiltLimit) {
            init.tilt = readInt(scanner, <span class="hljs-string">"è¯·è¾“å…¥åˆå§‹å€¾æ–œ: "</span>);
            MarsSolver.tiltMin = readInt(scanner, <span class="hljs-string">"å€¾æ–œä¸‹é™: "</span>);
            MarsSolver.tiltMax = readInt(scanner, <span class="hljs-string">"å€¾æ–œä¸Šé™: "</span>);

            MarsSolver.tiltResetEachRound =
                    readBool01(scanner, <span class="hljs-string">"æ¯å›åˆç»“æŸæ˜¯å¦ã€å€¾æ–œå½’é›¶ã€‘ï¼Ÿ(1=æ˜¯ 0=å¦): "</span>);

            MarsSolver.tiltDeltaMin = readInt(scanner, <span class="hljs-string">"å›åˆå€¾æ–œå˜åŒ–æœ€å°å€¼: "</span>);
            MarsSolver.tiltDeltaMax = readInt(scanner, <span class="hljs-string">"å›åˆå€¾æ–œå˜åŒ–æœ€å¤§å€¼: "</span>);
        }


        <span class="hljs-comment">// =====================================================</span>
        <span class="hljs-comment">// 4. ç›®æ ‡</span>
        <span class="hljs-comment">// =====================================================</span>
        MarsSolver.signalGoal = readInt(scanner, <span class="hljs-string">"ä¿¡å·ç›®æ ‡: "</span>);
        MarsSolver.dataGoal = readInt(scanner, <span class="hljs-string">"æ•°æ®ç›®æ ‡: "</span>);
        MarsSolver.magGoal = readInt(scanner, <span class="hljs-string">"ç£åŠ›ç›®æ ‡: "</span>);
        MarsSolver.planeGoal = readInt(scanner, <span class="hljs-string">"é£æœºç›®æ ‡: "</span>);
        MarsSolver.planeConsumePerRound = readInt(scanner, <span class="hljs-string">"è¯·è¾“å…¥æ¯å›åˆæ¶ˆè€—çš„é£æœºæ•°é‡: "</span>);

        <span class="hljs-comment">// =====================================================</span>
        <span class="hljs-comment">// 5. DFS + é‡æ–°è¾“å…¥ç›®æ ‡å¾ªç¯</span>
        <span class="hljs-comment">// =====================================================</span>
        <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {

            System.out.println(<span class="hljs-string">"\n=============================="</span>);
            System.out.println(<span class="hljs-string">"å½“å‰ç›®æ ‡:"</span>);
            System.out.println(<span class="hljs-string">" data="</span> + MarsSolver.dataGoal +
                    <span class="hljs-string">" mag="</span> + MarsSolver.magGoal +
                    <span class="hljs-string">" signal="</span> + MarsSolver.signalGoal +
                    <span class="hljs-string">" plane="</span> + MarsSolver.planeGoal);
            System.out.println(<span class="hljs-string">"=============================="</span>);

            <span class="hljs-type">boolean</span> <span class="hljs-variable">found</span> <span class="hljs-operator">=</span> solver.dfs(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, init.copy(), <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;());

            <span class="hljs-keyword">if</span> (found) {
                System.out.println(<span class="hljs-string">"\nâœ… å·²å®Œæˆ"</span>);
                <span class="hljs-keyword">break</span>;
            }

            System.out.println(<span class="hljs-string">"\nâŒ å½“å‰æ¡ä»¶æ— è§£ï¼Œè¯·é‡æ–°è®¾ç½®ç›®æ ‡ï¼ˆå›è½¦ä¿æŒï¼‰"</span>);

            MarsSolver.signalGoal = readIntOrKeep(scanner,
                    <span class="hljs-string">"ä¿¡å·ç›®æ ‡(å½“å‰="</span> + MarsSolver.signalGoal + <span class="hljs-string">"): "</span>, MarsSolver.signalGoal);
            MarsSolver.dataGoal   = readIntOrKeep(scanner,
                    <span class="hljs-string">"æ•°æ®ç›®æ ‡(å½“å‰="</span> + MarsSolver.dataGoal + <span class="hljs-string">"): "</span>, MarsSolver.dataGoal);
            MarsSolver.magGoal    = readIntOrKeep(scanner,
                    <span class="hljs-string">"ç£åŠ›ç›®æ ‡(å½“å‰="</span> + MarsSolver.magGoal + <span class="hljs-string">"): "</span>, MarsSolver.magGoal);
            MarsSolver.planeGoal  = readIntOrKeep(scanner,
                    <span class="hljs-string">"é£æœºç›®æ ‡(å½“å‰="</span> + MarsSolver.planeGoal + <span class="hljs-string">"): "</span>, MarsSolver.planeGoal);

            MarsSolver.reset();

        }
    }

    <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">editCommands</span><span class="hljs-params">(Scanner sc, List&lt;Command&gt; cmds)</span> {

        <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {

            System.out.println(<span class="hljs-string">"\n========== è¾“å…¥å®Œæˆçš„å‘½ä»¤åˆ—è¡¨ =========="</span>);
            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; cmds.size(); i++) {
                <span class="hljs-type">Command</span> <span class="hljs-variable">c</span> <span class="hljs-operator">=</span> cmds.get(i);
                System.out.println(
                                c.getName() +
                                <span class="hljs-string">" | æ¶ˆè€— "</span> + c.getConsume() +
                                <span class="hljs-string">" | è·å¾— "</span> + c.getProduce());
            }
            System.out.println(<span class="hljs-string">"================================"</span>);

            System.out.println(
                    <span class="hljs-string">"\næ“ä½œ:\n"</span> +
                            <span class="hljs-string">"1 = åˆ é™¤å‘½ä»¤\n"</span> +
                            <span class="hljs-string">"2 = æ–°å¢å‘½ä»¤\n"</span> +
                            <span class="hljs-string">"0 = å®Œæˆå‘½ä»¤å¹¶ç»§ç»­\n"</span>);

            System.out.print(<span class="hljs-string">"è¯·é€‰æ‹©: "</span>);
            <span class="hljs-type">String</span> <span class="hljs-variable">op</span> <span class="hljs-operator">=</span> sc.nextLine().trim();

            <span class="hljs-keyword">if</span> (<span class="hljs-string">"0"</span>.equals(op)) {
                <span class="hljs-keyword">return</span>;
            }
            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-string">"1"</span>.equals(op)) {
                System.out.print(<span class="hljs-string">"è¾“å…¥è¦åˆ é™¤çš„å‘½ä»¤åç§°: "</span>);
                <span class="hljs-type">String</span> <span class="hljs-variable">name</span> <span class="hljs-operator">=</span> sc.nextLine().trim();
                <span class="hljs-type">boolean</span> <span class="hljs-variable">removed</span> <span class="hljs-operator">=</span> cmds.removeIf(c -&gt; c.getName().equalsIgnoreCase(name));
                <span class="hljs-keyword">if</span> (removed) System.out.println(<span class="hljs-string">"âœ… å·²åˆ é™¤ "</span> + name);
                <span class="hljs-keyword">else</span> System.out.println(<span class="hljs-string">"âŒ æœªæ‰¾åˆ°å‘½ä»¤ "</span> + name);
            }
            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-string">"2"</span>.equals(op)) {
                addCommand(sc, cmds);
            }
            <span class="hljs-keyword">else</span> {
                System.out.println(<span class="hljs-string">"âŒ æ— æ•ˆæ“ä½œ"</span>);
            }
        }
    }

    <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addCommand</span><span class="hljs-params">(Scanner scanner, List&lt;Command&gt; cmds)</span> {
        String name;
        <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
            System.out.print(<span class="hljs-string">"\nè¯·è¾“å…¥æ–°å‘½ä»¤åç§°: "</span>);
            name = scanner.nextLine().trim();
            <span class="hljs-keyword">if</span> (<span class="hljs-string">"0"</span>.equals(name)) <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">if</span> (name.isEmpty()) {
                System.out.println(<span class="hljs-string">"âŒ å‘½ä»¤åç§°ä¸èƒ½ä¸ºç©º"</span>);
                <span class="hljs-keyword">continue</span>;
            }
            <span class="hljs-keyword">break</span>;
        }

        Map&lt;String, Integer&gt; consume = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
        Map&lt;String, Integer&gt; produce = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();

        System.out.println(<span class="hljs-string">"è¾“å…¥ã€æ¶ˆè€—ã€‘(ç±»å‹ æ•°é‡)ï¼Œ0ç»“æŸ"</span>);
        <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
            System.out.print(<span class="hljs-string">"æ¶ˆè€—&gt; "</span>);
            <span class="hljs-type">String</span> <span class="hljs-variable">line</span> <span class="hljs-operator">=</span> scanner.nextLine().trim();
            <span class="hljs-keyword">if</span> (<span class="hljs-string">"0"</span>.equals(line)) <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">try</span> {
                String[] p = line.split(<span class="hljs-string">"\s+"</span>);
                <span class="hljs-type">String</span> <span class="hljs-variable">key</span> <span class="hljs-operator">=</span> typeToName(Integer.parseInt(p[<span class="hljs-number">0</span>]));
                <span class="hljs-type">int</span> <span class="hljs-variable">v</span> <span class="hljs-operator">=</span> Integer.parseInt(p[<span class="hljs-number">1</span>]);
                consume.put(key, consume.getOrDefault(key, <span class="hljs-number">0</span>) + v);
            } <span class="hljs-keyword">catch</span> (Exception e) {
                System.out.println(<span class="hljs-string">"âŒ æ ¼å¼é”™è¯¯"</span>);
            }
        }

        System.out.println(<span class="hljs-string">"è¾“å…¥ã€è·å¾—ã€‘(ç±»å‹ æ•°é‡)ï¼Œ0ç»“æŸ"</span>);
        <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
            System.out.print(<span class="hljs-string">"è·å¾—&gt; "</span>);
            <span class="hljs-type">String</span> <span class="hljs-variable">line</span> <span class="hljs-operator">=</span> scanner.nextLine().trim();
            <span class="hljs-keyword">if</span> (<span class="hljs-string">"0"</span>.equals(line)) <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">try</span> {
                String[] p = line.split(<span class="hljs-string">"\s+"</span>);
                <span class="hljs-type">String</span> <span class="hljs-variable">key</span> <span class="hljs-operator">=</span> typeToName(Integer.parseInt(p[<span class="hljs-number">0</span>]));
                <span class="hljs-type">int</span> <span class="hljs-variable">v</span> <span class="hljs-operator">=</span> Integer.parseInt(p[<span class="hljs-number">1</span>]);
                produce.put(key, produce.getOrDefault(key, <span class="hljs-number">0</span>) + v);
            } <span class="hljs-keyword">catch</span> (Exception e) {
                System.out.println(<span class="hljs-string">"âŒ æ ¼å¼é”™è¯¯"</span>);
            }
        }

        cmds.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Command</span>(name, <span class="hljs-number">1</span>, consume, produce));
        System.out.println(<span class="hljs-string">"âœ… å·²æ–°å¢å‘½ä»¤: "</span> + name);
    }

    <span class="hljs-comment">// ================= å·¥å…·æ–¹æ³• =================</span>

    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-title function_">readInt</span><span class="hljs-params">(Scanner sc, String tip)</span> {
        <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
            System.out.print(tip);
            <span class="hljs-keyword">try</span> {
                <span class="hljs-keyword">return</span> Integer.parseInt(sc.nextLine().trim());
            } <span class="hljs-keyword">catch</span> (Exception e) {
                System.out.println(<span class="hljs-string">"âŒ è¾“å…¥é”™è¯¯"</span>);
            }
        }
    }

    <span class="hljs-keyword">static</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">readBool01</span><span class="hljs-params">(Scanner sc, String tip)</span> {
        <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
            System.out.print(tip);
            <span class="hljs-type">String</span> <span class="hljs-variable">s</span> <span class="hljs-operator">=</span> sc.nextLine().trim();
            <span class="hljs-keyword">if</span> (<span class="hljs-string">"1"</span>.equals(s)) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
            <span class="hljs-keyword">if</span> (<span class="hljs-string">"0"</span>.equals(s)) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
            System.out.println(<span class="hljs-string">"âŒ è¯·è¾“å…¥ 1 æˆ– 0"</span>);
        }
    }

    <span class="hljs-keyword">static</span> String <span class="hljs-title function_">typeToName</span><span class="hljs-params">(<span class="hljs-type">int</span> type)</span> {
        <span class="hljs-keyword">switch</span> (type) {
            <span class="hljs-keyword">case</span> <span class="hljs-number">1</span>:
                <span class="hljs-keyword">return</span> <span class="hljs-string">"power"</span>;
            <span class="hljs-keyword">case</span> <span class="hljs-number">2</span>:
                <span class="hljs-keyword">return</span> <span class="hljs-string">"mag"</span>;
            <span class="hljs-keyword">case</span> <span class="hljs-number">3</span>:
                <span class="hljs-keyword">return</span> <span class="hljs-string">"data"</span>;
            <span class="hljs-keyword">case</span> <span class="hljs-number">4</span>:
                <span class="hljs-keyword">return</span> <span class="hljs-string">"signal"</span>;
            <span class="hljs-keyword">case</span> <span class="hljs-number">5</span>:
                <span class="hljs-keyword">return</span> <span class="hljs-string">"plane"</span>;
            <span class="hljs-keyword">case</span> <span class="hljs-number">6</span>:
                <span class="hljs-keyword">return</span> <span class="hljs-string">"tilt"</span>;
            <span class="hljs-keyword">case</span> <span class="hljs-number">7</span>:
                <span class="hljs-keyword">return</span> <span class="hljs-string">"temp"</span>;
            <span class="hljs-keyword">case</span> <span class="hljs-number">8</span>:
                <span class="hljs-keyword">return</span> <span class="hljs-string">"craw"</span>;
            <span class="hljs-keyword">default</span>:
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(<span class="hljs-string">"æœªçŸ¥ç±»å‹: "</span> + type);
        }
    }

    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-title function_">readIntOrKeep</span><span class="hljs-params">(Scanner sc, String tip, <span class="hljs-type">int</span> oldVal)</span> {
        <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
            System.out.print(tip);
            <span class="hljs-type">String</span> <span class="hljs-variable">line</span> <span class="hljs-operator">=</span> sc.nextLine().trim();
            <span class="hljs-keyword">if</span> (line.isEmpty()) <span class="hljs-keyword">return</span> oldVal;
            <span class="hljs-keyword">try</span> {
                <span class="hljs-keyword">return</span> Integer.parseInt(line);
            } <span class="hljs-keyword">catch</span> (Exception e) {
                System.out.println(<span class="hljs-string">"âŒ è¯·è¾“å…¥æ•´æ•°ï¼Œæˆ–ç›´æ¥å›è½¦ä¿æŒä¸å˜"</span>);
            }
        }
    }
}
</code></pre>
<p>æœ€åæ‰§è¡ŒDFSï¼ˆDepth-First Searchï¼Œæ·±åº¦ä¼˜å…ˆæœç´¢ï¼‰ç®—æ³•ï¼Œä¹Ÿæ˜¯æˆ‘ä»¬æ•´ä¸ªç¨‹åºçš„çµé­‚ã€‚</p>
<p><strong>2.State</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">State</span> {
    <span class="hljs-type">int</span> craw;
    <span class="hljs-type">int</span> power;
    <span class="hljs-type">int</span> signal;
    <span class="hljs-type">int</span> mag;
    <span class="hljs-type">int</span> data;
    <span class="hljs-type">int</span> plane;
    <span class="hljs-type">int</span> temp;
    <span class="hljs-type">int</span> tilt;
<span class="hljs-comment">//    int rad;</span>

    State <span class="hljs-title function_">copy</span><span class="hljs-params">()</span> {
        <span class="hljs-type">State</span> <span class="hljs-variable">s</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">State</span>();
        s.craw = craw;
        s.power = power;
        s.signal = signal;
        s.mag = mag;
        s.data = data;
        s.plane = plane;
        s.temp = temp;
        s.tilt = tilt;
<span class="hljs-comment">//        s.rad = rad;</span>
        <span class="hljs-keyword">return</span> s;
    }
}
</code></pre>
<p>çŠ¶æ€ç±»ï¼Œå®šä¹‰å½“å‰çš„èµ„æºçŠ¶æ€ã€‚è¾å°„â˜¢ï¸æš‚æ—¶å…ˆä¸è€ƒè™‘ï¼Œé™ä½å‘½ä»¤æˆåŠŸç‡ï¼Œä¸ä½œä¸ºä»»åŠ¡æˆåŠŸçš„åˆ¤å®šæ ‡å‡†ã€‚</p>
<p><strong>3.Command</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> java.util.Map;

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Command</span> {
    String name;
    <span class="hljs-type">int</span> costPower;
    Map&lt;String, Integer&gt; consume;
    Map&lt;String, Integer&gt; produce;

    Command(String name, <span class="hljs-type">int</span> costPower,
            Map&lt;String, Integer&gt; consume,
            Map&lt;String, Integer&gt; produce) {
        <span class="hljs-built_in">this</span>.name = name;
        <span class="hljs-built_in">this</span>.costPower = costPower;
        <span class="hljs-built_in">this</span>.consume = consume;
        <span class="hljs-built_in">this</span>.produce = produce;
    }

    Command(String name) {
        <span class="hljs-built_in">this</span>.name = name;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getCostPower</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> costPower;
    }

    <span class="hljs-keyword">public</span> Map&lt;String, Integer&gt; <span class="hljs-title function_">getConsume</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> consume;
    }

    <span class="hljs-keyword">public</span> Map&lt;String, Integer&gt; <span class="hljs-title function_">getProduce</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> produce;
    }

    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> name;
    }
}
</code></pre>
<p>å‘½ä»¤ç±»ç”¨äºè®°å½•æ¯æ¡å‘½ä»¤çš„èµ„æºæ¶ˆè€—å’Œç”Ÿäº§ã€‚</p>
<p><strong>4.MarsSolver</strong></p>
<p>è¿™é‡Œå°±è¿›å…¥ä¸»èœäº†ï¼Œç”±äºæ¯å›åˆç»“æŸç¯å¢ƒä¼šå‘ç”Ÿå˜åŒ–ï¼Œæ‰€ä»¥è¦è€ƒè™‘è¿›å»ã€‚æ¯å›åˆç»“æŸæ¸©åº¦éƒ½ä¸èƒ½ç¢°é‚£ä¸ªè¾¹ç•Œï¼Œæ­¥éª¤ä¸­é—´å¯ä»¥çŸ­æœŸç¢°ï¼Œä½†æ¯ä¸€å›åˆç»“æŸä¸€å®šè¦æ‹‰å›æ¥ï¼Œå¦åˆ™ä»»åŠ¡ç›´æ¥å¤±è´¥ã€‚æœ‰äº›ä»»åŠ¡æ¸©åº¦çš„è­¦æˆ’çº¿ä¸æ˜¯ä¸Šé™ï¼Œè€Œæ˜¯ä¸‹é™ï¼Œæ¯”å¦‚å»å†°å·¨æ˜Ÿï¼Œå¤©ç‹æ˜Ÿå’Œæµ·ç‹æ˜Ÿï¼Œè¿˜æœ‰æŸ¯ä¼Šä¼¯å¸¦è¾¹ç•Œçš„å†¥ç‹æ˜Ÿï¼Œæ¯å›åˆéƒ½è¦å‡æ¸©ï¼Œæ— è®ºå‡å¤šé«˜ç›´æ¥å°†ä¸º0ï¼Œæ‰€ä»¥å‡åˆ°1æ˜¯æœ€ä½³ç­–ç•¥ã€‚å€¾æ–œè™½ç„¶ä¹Ÿä½œä¸ºä¸€ä¸ªé™åˆ¶ï¼Œä½†æ˜¯åªåœ¨æ‰€æœ‰å›åˆå®Œæˆçš„æœ€åè¾¾æˆç›®æ ‡å³å¯ï¼Œå›åˆä¸­éšä¾¿åç§»æ–¹å‘ã€‚å€¾æ–œå¯ä¸ºè´Ÿï¼Œè€Œæ¸©åº¦æœ€ä½é™ä¸º0ã€‚æœ‰äº›ä»»åŠ¡æ¯å›åˆç»“æŸä¹Ÿä¼šæœ‰ç¯å¢ƒéšæœºå˜åŒ–ï¼Œæ¯”å¦‚æ¸©åº¦+2ï¼Œå€¾æ–œ-2ç­‰ã€‚æ‰€ä»¥è¿™æ ·å°±ä¸ä¸€å®šèƒ½æœç´¢å‡ºè§£äº†ï¼Œè¿æ°”ä¸å¥½å°±æ˜¯æ— è§£ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> java.util.ArrayList;
<span class="hljs-keyword">import</span> java.util.HashSet;
<span class="hljs-keyword">import</span> java.util.List;
<span class="hljs-keyword">import</span> java.util.Map;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MarsSolver</span> {

    <span class="hljs-comment">// ========= æœç´¢å‚æ•° =========</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> ROUNDS;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> STEPS;

    <span class="hljs-comment">// ========= æœç´¢ç»Ÿè®¡ =========</span>
    <span class="hljs-keyword">static</span> <span class="hljs-type">long</span> <span class="hljs-variable">visited</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> <span class="hljs-variable">PRINT_INTERVAL</span> <span class="hljs-operator">=</span> <span class="hljs-number">1_000_000</span>;
    <span class="hljs-keyword">static</span> <span class="hljs-type">long</span> <span class="hljs-variable">lastPrint</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> <span class="hljs-variable">START_TIME</span> <span class="hljs-operator">=</span> System.currentTimeMillis();

    <span class="hljs-comment">// ========= ç›®æ ‡ =========</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-variable">magGoal</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-variable">dataGoal</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-variable">signalGoal</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-variable">planeGoal</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;

    <span class="hljs-comment">// ========= å›åˆè§„åˆ™ =========</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> crawPerRound;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> planeConsumePerRound;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">boolean</span> <span class="hljs-variable">tiltResetEachRound</span> <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>;

    <span class="hljs-comment">// ========= å›åˆç¯å¢ƒå˜åŒ– =========</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-variable">tempDeltaMin</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-variable">tempDeltaMax</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-variable">tiltDeltaMin</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-variable">tiltDeltaMax</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;

    <span class="hljs-comment">// ========= åˆ¤å®š =========</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">boolean</span> <span class="hljs-variable">useTempLimit</span> <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">Integer</span> <span class="hljs-variable">tempMin</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">Integer</span> <span class="hljs-variable">tempMax</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">boolean</span> <span class="hljs-variable">useTiltLimit</span> <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> tiltMin;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> tiltMax;

    <span class="hljs-comment">// ========= å‘½ä»¤æ±  =========</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> List&lt;Command&gt; ALL = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">reset</span><span class="hljs-params">()</span> {
        visited = <span class="hljs-number">0</span>;
        lastPrint = <span class="hljs-number">0</span>;
    }
    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-title function_">maxProducePerRound</span><span class="hljs-params">(String key)</span> {
        <span class="hljs-type">int</span> <span class="hljs-variable">best</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
        <span class="hljs-keyword">for</span> (Command c : ALL) {
            <span class="hljs-type">int</span> <span class="hljs-variable">v</span> <span class="hljs-operator">=</span> c.produce.getOrDefault(key, <span class="hljs-number">0</span>);
            <span class="hljs-keyword">if</span> (v &gt; best) best = v;
        }
        <span class="hljs-keyword">return</span> best * STEPS;
    }

    <span class="hljs-comment">// =====================================================</span>
    <span class="hljs-comment">// DFS</span>
    <span class="hljs-comment">// =====================================================</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">dfs</span><span class="hljs-params">(<span class="hljs-type">int</span> round, <span class="hljs-type">int</span> step, State state, List&lt;String&gt; path)</span> {

        <span class="hljs-type">int</span> <span class="hljs-variable">remainRounds</span> <span class="hljs-operator">=</span> ROUNDS - round;

        <span class="hljs-comment">// âœ‚ å‰ªæï¼šå‰©ä½™å›åˆæœ€å¤šèƒ½ç”Ÿäº§çš„èµ„æºä¸Šé™</span>
        <span class="hljs-type">int</span> <span class="hljs-variable">maxData</span> <span class="hljs-operator">=</span> state.data + remainRounds * maxProducePerRound(<span class="hljs-string">"data"</span>);
        <span class="hljs-type">int</span> <span class="hljs-variable">maxMag</span>  <span class="hljs-operator">=</span> state.mag  + remainRounds * maxProducePerRound(<span class="hljs-string">"mag"</span>);
        <span class="hljs-type">int</span> <span class="hljs-variable">maxSig</span>  <span class="hljs-operator">=</span> state.signal + remainRounds * maxProducePerRound(<span class="hljs-string">"signal"</span>);
        <span class="hljs-type">int</span> <span class="hljs-variable">maxPlane</span> <span class="hljs-operator">=</span> state.plane + remainRounds * maxProducePerRound(<span class="hljs-string">"plane"</span>);
        <span class="hljs-keyword">if</span> (maxData &lt; dataGoal) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">if</span> (maxMag &lt; magGoal) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">if</span> (maxSig &lt; signalGoal) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">if</span> (maxPlane &lt; planeGoal) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;

        visited++;
        <span class="hljs-keyword">if</span> (visited - lastPrint &gt;= PRINT_INTERVAL) {
            lastPrint = visited;
            <span class="hljs-type">long</span> <span class="hljs-variable">cost</span> <span class="hljs-operator">=</span> (System.currentTimeMillis() - START_TIME) / <span class="hljs-number">1000</span>;
            System.out.println(<span class="hljs-string">"[PROGRESS] visited="</span> + visited +
                    <span class="hljs-string">" time="</span> + cost + <span class="hljs-string">"s R="</span> + round + <span class="hljs-string">" S="</span> + step);
        }

        <span class="hljs-comment">// ===== æˆåŠŸåˆ¤å®š =====</span>
        <span class="hljs-keyword">if</span> (round == ROUNDS) {
            <span class="hljs-comment">// æœ€ç»ˆå€¾æ–œåˆ¤å®š</span>
            <span class="hljs-keyword">if</span> (useTiltLimit) {
                <span class="hljs-keyword">if</span> (state.tilt &lt; tiltMin || state.tilt &gt; tiltMax) {
                    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
                }
            }
            <span class="hljs-keyword">if</span> (state.mag &gt;= magGoal &amp;&amp;
                    state.data &gt;= dataGoal &amp;&amp;
                    state.signal &gt;= signalGoal &amp;&amp;
                    state.plane &gt;= planeGoal) {

                System.out.println(<span class="hljs-string">"\n===== FOUND SOLUTION ====="</span>);
                printSolutionByRound(path);
                System.exit(<span class="hljs-number">0</span>);
                <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
            }
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }

        <span class="hljs-comment">// ===== å›åˆç»“æŸ =====</span>
        <span class="hljs-keyword">if</span> (step == STEPS) {
            <span class="hljs-comment">// åˆ¤å®š</span>
            <span class="hljs-keyword">if</span> (useTempLimit) {
                <span class="hljs-keyword">if</span> (tempMin != <span class="hljs-literal">null</span> &amp;&amp; state.temp &lt; tempMin) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
                <span class="hljs-keyword">if</span> (tempMax != <span class="hljs-literal">null</span> &amp;&amp; state.temp &gt; tempMax) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
            }

            <span class="hljs-comment">// ç¯å¢ƒæšä¸¾</span>
            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">dt</span> <span class="hljs-operator">=</span> tempDeltaMin; dt &lt;= tempDeltaMax; dt++) {
                <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">dk</span> <span class="hljs-operator">=</span> tiltDeltaMin; dk &lt;= tiltDeltaMax; dk++) {

                    <span class="hljs-type">State</span> <span class="hljs-variable">next</span> <span class="hljs-operator">=</span> state.copy();

                    <span class="hljs-comment">// ç¯å¢ƒå˜åŒ–</span>
                    next.temp += dt;
                    <span class="hljs-keyword">if</span> (MarsSolver.tiltResetEachRound) {
                        next.tilt = <span class="hljs-number">0</span>;
                    }
                    next.tilt += dk;
                    <span class="hljs-type">boolean</span> <span class="hljs-variable">planeConsumed</span> <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>;
                    <span class="hljs-type">boolean</span> <span class="hljs-variable">crawRecovered</span> <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>;

                    <span class="hljs-keyword">if</span> (next.plane &gt; <span class="hljs-number">0</span>) {
                        <span class="hljs-keyword">if</span> (next.plane &lt; MarsSolver.planeConsumePerRound) {
                            <span class="hljs-keyword">continue</span>; <span class="hljs-comment">// é£æœºä¸å¤Ÿï¼Œå‰ªæ</span>
                        }
                        next.plane -= MarsSolver.planeConsumePerRound;
                        planeConsumed = <span class="hljs-literal">true</span>;
                    }

                    <span class="hljs-keyword">if</span> (next.craw != crawPerRound) {
                        next.craw = crawPerRound;
                        crawRecovered = <span class="hljs-literal">true</span>;
                    }

                    <span class="hljs-type">StringBuilder</span> <span class="hljs-variable">log</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuilder</span>();
                    log.append(<span class="hljs-string">"R"</span>).append(round + <span class="hljs-number">1</span>)
                            .append(<span class="hljs-string">" ENV CHANGE:"</span>)
                            .append(<span class="hljs-string">" temp"</span>).append(dt &gt;= <span class="hljs-number">0</span> ? <span class="hljs-string">"+"</span> : <span class="hljs-string">""</span>).append(dt)
                            .append(<span class="hljs-string">" tilt"</span>).append(dk &gt;= <span class="hljs-number">0</span> ? <span class="hljs-string">"+"</span> : <span class="hljs-string">""</span>).append(dk);
                    <span class="hljs-keyword">if</span> (planeConsumed) {
                        log.append(<span class="hljs-string">" plane-"</span>).append(MarsSolver.planeConsumePerRound);
                    }
                    <span class="hljs-keyword">if</span> (crawRecovered) log.append(<span class="hljs-string">" craw="</span>).append(crawPerRound);

                    path.add(log.toString());

                    dfs(round + <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, next, path);

                    path.remove(path.size() - <span class="hljs-number">1</span>);
                }
            }
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }

        <span class="hljs-comment">// ===== æ‰§è¡Œå‘½ä»¤ =====</span>
        <span class="hljs-keyword">for</span> (Command cmd : ALL) {
            <span class="hljs-keyword">if</span> (!canExecute(cmd, state)) <span class="hljs-keyword">continue</span>;

            <span class="hljs-type">State</span> <span class="hljs-variable">next</span> <span class="hljs-operator">=</span> state.copy();
            apply(cmd, next);

            <span class="hljs-keyword">if</span> (next.power &lt; <span class="hljs-number">0</span>) <span class="hljs-keyword">continue</span>;

            path.add(<span class="hljs-string">"R"</span> + (round + <span class="hljs-number">1</span>) + <span class="hljs-string">"S"</span> + (step + <span class="hljs-number">1</span>) + <span class="hljs-string">":"</span> + cmd.name);

            dfs(round, step + <span class="hljs-number">1</span>, next, path);

            path.remove(path.size() - <span class="hljs-number">1</span>);
        }
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }

    <span class="hljs-comment">// =====================================================</span>
    <span class="hljs-comment">// apply</span>
    <span class="hljs-comment">// =====================================================</span>
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">apply</span><span class="hljs-params">(Command cmd, State s)</span> {
        s.power -= cmd.costPower;
        <span class="hljs-keyword">for</span> (Map.Entry&lt;String, Integer&gt; e : cmd.consume.entrySet()) adjust(s, e.getKey(), -e.getValue());
        <span class="hljs-keyword">for</span> (Map.Entry&lt;String, Integer&gt; e : cmd.produce.entrySet()) adjust(s, e.getKey(), e.getValue());
    }

    <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">adjust</span><span class="hljs-params">(State s, String k, <span class="hljs-type">int</span> v)</span> {
        <span class="hljs-keyword">if</span> (<span class="hljs-string">"power"</span>.equals(k)) s.power += v;
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-string">"mag"</span>.equals(k)) s.mag += v;
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-string">"data"</span>.equals(k)) s.data += v;
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-string">"signal"</span>.equals(k)) s.signal += v;
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-string">"plane"</span>.equals(k)) s.plane += v;
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-string">"tilt"</span>.equals(k)) s.tilt += v;
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-string">"temp"</span>.equals(k)) s.temp += v;
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-string">"craw"</span>.equals(k)) s.craw += v;
    }

    <span class="hljs-comment">// =====================================================</span>
    <span class="hljs-comment">// canExecute</span>
    <span class="hljs-comment">// =====================================================</span>
    <span class="hljs-keyword">static</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">canExecute</span><span class="hljs-params">(Command cmd, State s)</span> {
        <span class="hljs-keyword">if</span> (cmd.costPower &gt; s.power) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">for</span> (Map.Entry&lt;String, Integer&gt; e : cmd.consume.entrySet()) {
            <span class="hljs-type">int</span> <span class="hljs-variable">need</span> <span class="hljs-operator">=</span> e.getValue();
            <span class="hljs-type">int</span> cur;
            <span class="hljs-type">String</span> <span class="hljs-variable">key</span> <span class="hljs-operator">=</span> e.getKey();
            <span class="hljs-keyword">switch</span> (key) {
                <span class="hljs-keyword">case</span> <span class="hljs-string">"power"</span>:
                    cur = s.power;
                    <span class="hljs-keyword">break</span>;
                <span class="hljs-keyword">case</span> <span class="hljs-string">"mag"</span>:
                    cur = s.mag;
                    <span class="hljs-keyword">break</span>;
                <span class="hljs-keyword">case</span> <span class="hljs-string">"data"</span>:
                    cur = s.data;
                    <span class="hljs-keyword">break</span>;
                <span class="hljs-keyword">case</span> <span class="hljs-string">"signal"</span>:
                    cur = s.signal;
                    <span class="hljs-keyword">break</span>;
                <span class="hljs-keyword">case</span> <span class="hljs-string">"plane"</span>:
                    cur = s.plane;
                    <span class="hljs-keyword">break</span>;
                <span class="hljs-keyword">case</span> <span class="hljs-string">"craw"</span>:
                    cur = s.craw;
                    <span class="hljs-keyword">break</span>;
                <span class="hljs-keyword">case</span> <span class="hljs-string">"temp"</span>:
                    cur = s.temp;
                    <span class="hljs-keyword">break</span>;
                <span class="hljs-keyword">case</span> <span class="hljs-string">"tilt"</span>:
                    <span class="hljs-keyword">continue</span>;
                <span class="hljs-keyword">default</span>:
                    <span class="hljs-keyword">continue</span>;
            }
            <span class="hljs-keyword">if</span> (cur &lt; need) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }

    <span class="hljs-comment">// =====================================================</span>
    <span class="hljs-comment">// æ‰“å°è§£</span>
    <span class="hljs-comment">// =====================================================</span>
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">printSolutionByRound</span><span class="hljs-params">(List&lt;String&gt; path)</span> {
        <span class="hljs-type">int</span> <span class="hljs-variable">cur</span> <span class="hljs-operator">=</span> -<span class="hljs-number">1</span>;
        <span class="hljs-keyword">for</span> (String s : path) {
            <span class="hljs-keyword">if</span> (s.matches(<span class="hljs-string">"R\d+S\d+:.*"</span>)) {
                <span class="hljs-type">int</span> <span class="hljs-variable">r</span> <span class="hljs-operator">=</span> Integer.parseInt(s.substring(<span class="hljs-number">1</span>, s.indexOf(<span class="hljs-string">'S'</span>)));
                <span class="hljs-keyword">if</span> (r != cur) {
                    cur = r;
                    System.out.println(<span class="hljs-string">"\n--- Round "</span> + r + <span class="hljs-string">" ---"</span>);
                }
                System.out.println(s);
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (s.contains(<span class="hljs-string">"ENV CHANGE"</span>)) {
                System.out.println(s.replaceFirst(<span class="hljs-string">"R\d+\s*"</span>, <span class="hljs-string">""</span>));
            }
        }
    }
}
</code></pre>
<p>å…±åˆ†ä¸ºä¸¤ä¸ªç»´åº¦ï¼ŒroundæŒ‡å½“å‰ç¬¬å‡ å›åˆï¼ŒstepæŒ‡å½“å‰å›åˆç¬¬å‡ æ­¥ã€‚æ‰€ä»¥æˆ‘ä»¬è®¾è®¡å‡º</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">boolean</span> <span class="hljs-title function_">dfs</span><span class="hljs-params">(round, step, state, path)</span>
</code></pre>
<p>è¿™æ ·çš„é€’å½’ç»“æ„ã€‚ä½¿ç”¨canExecuteå‡½æ•°æ£€æµ‹æŸä¸ªå‘½ä»¤å½“å‰æ˜¯å¦å¯ä»¥æ‰§è¡Œï¼Œå³éœ€è¦çš„èµ„æºå¤Ÿä¸å¤Ÿã€‚applyå‡½æ•°å»æ‰§è¡Œä¸€æ¡å‘½ä»¤ã€‚é€šè¿‡round == ROUNDSè¿›å…¥æ‰€æœ‰å‘½ä»¤æ‰§è¡Œç»“æŸçš„åˆ¤å®šé˜¶æ®µï¼Œstep == STEPSè¿›å…¥å›åˆç»“æŸçš„ç¯å¢ƒå˜åŒ–ã€‚ä½¿ç”¨pathé›†åˆæ¥ä¿å­˜å·²æœç´¢è¿‡çš„è·¯å¾„ã€‚å…¶ä¸­çš„äº®ç‚¹æ˜¯è¿˜å¸¦æœ‰å‰ªæåŠŸèƒ½ï¼Œå¤§å¤§é™ä½æœç´¢å¤æ‚åº¦ï¼Œé™ä½æ—¶é—´æ¶ˆè€—ã€‚è¿™é‡Œæˆ‘ä»¬ç§°å®ƒä¸ºä¹è§‚ä¸Šç•Œå‰ªæã€‚æ„æ€å°±æ˜¯å°±ç®—ä»¥åæ¯ä¸€å›åˆéƒ½ç”¨æœ€å¼ºå‘½ä»¤ï¼Œæˆ‘æœ€å¤šä¹Ÿåªèƒ½äº§è¿™ä¹ˆå¤šã€‚å¦‚æœè¿˜ä¸å¤Ÿï¼Œé‚£è¿™æ¡è·¯å¿…æ­»ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç»Ÿè®¡å­¦åŸºç¡€ä¸æ•°æ®å¯è§†åŒ–å®æˆ˜â€”â€”åŸºæœ¬å›¾è¡¨ï¼ˆ1ï¼‰]]></title>    <link>https://juejin.cn/post/7593232758127755270</link>    <guid>https://juejin.cn/post/7593232758127755270</guid>    <pubDate>2026-01-10T13:15:31.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7593232758127755270" data-draft-id="7586959875768713225" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç»Ÿè®¡å­¦åŸºç¡€ä¸æ•°æ®å¯è§†åŒ–å®æˆ˜â€”â€”åŸºæœ¬å›¾è¡¨ï¼ˆ1ï¼‰"/> <meta itemprop="keywords" content="é¢è¯•"/> <meta itemprop="datePublished" content="2026-01-10T13:15:31.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="UrbanJazzerati"/> <meta itemprop="url" content="https://juejin.cn/user/550205947391389"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç»Ÿè®¡å­¦åŸºç¡€ä¸æ•°æ®å¯è§†åŒ–å®æˆ˜â€”â€”åŸºæœ¬å›¾è¡¨ï¼ˆ1ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/550205947391389/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    UrbanJazzerati
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-10T13:15:31.000Z" title="Sat Jan 10 2026 13:15:31 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»17åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">ä¸€ã€æ ¸å¿ƒæ¦‚å¿µï¼šæ•°æ®çš„â€œé›†ä¸­è¶‹åŠ¿â€ä¸â€œç¦»æ•£ç¨‹åº¦â€</h3>
<p>åœ¨åˆ†æä»»ä½•ä¸€ç»„æ•°æ®ï¼ˆæ¯”å¦‚100æ ¹è–¯æ¡çš„é•¿åº¦ï¼‰æ—¶ï¼Œæˆ‘ä»¬é€šå¸¸å…³å¿ƒä¸¤ä¸ªæœ€æ ¸å¿ƒçš„é—®é¢˜ï¼š</p>
<ol>
<li><strong>é›†ä¸­è¶‹åŠ¿</strong>ï¼šè¿™æ‰¹æ•°æ®çš„â€œå¹³å‡æ°´å¹³â€å¤§æ¦‚åœ¨å“ªé‡Œï¼Ÿï¼ˆå¹³å‡æ•°ã€ä¸­ä½æ•°ã€ä¼—æ•°ï¼‰</li>
<li><strong>ç¦»æ•£ç¨‹åº¦</strong>ï¼šè¿™æ‰¹æ•°æ®æ˜¯æ•´é½åˆ’ä¸€ï¼Œè¿˜æ˜¯é•¿çŸ­ä¸ä¸€ï¼Ÿï¼ˆæ–¹å·®ã€æ ‡å‡†å·®ï¼‰</li>
</ol>
<p>ç†è§£äº†è¿™ä¸ªæ¡†æ¶ï¼Œæˆ‘ä»¬å†æ¥çœ‹æ¯ä¸ªå…·ä½“çš„æŒ‡æ ‡ã€‚</p>
<hr/>
<h3 data-id="heading-1">äºŒã€è¯¦è§£äº”å¤§æŒ‡æ ‡ï¼šä»â€œè–¯æ¡é•¿åº¦â€è¯´èµ·</h3>
<h4 data-id="heading-2">1.Â <strong>å¹³å‡æ•°</strong></h4>
<ul>
<li>
<p><strong>å®ƒæ˜¯ä»€ä¹ˆ</strong>ï¼šæœ€å¸¸è¯´çš„â€œå¹³å‡â€ã€‚æŠŠæ‰€æœ‰æ•°å€¼åŠ èµ·æ¥ï¼Œç„¶åé™¤ä»¥æ•°é‡ã€‚</p>
</li>
<li>
<p><strong>æ€ä¹ˆç®—</strong>ï¼š(ç¬¬1æ ¹é•¿åº¦ + ç¬¬2æ ¹é•¿åº¦ + ... + ç¬¬100æ ¹é•¿åº¦) Ã· 100</p>
</li>
<li>
<p><strong>è–¯æ¡ä¾‹å­</strong>ï¼š5æ ¹è–¯æ¡é•¿åº¦åˆ†åˆ«æ˜¯ 8cm, 9cm, 10cm, 11cm, 12cmã€‚å¹³å‡æ•° = (8+9+10+11+12) / 5 =Â <strong>10cm</strong>ã€‚</p>
</li>
<li>
<p><strong>å®é™…åº”ç”¨</strong>ï¼š</p>
<ul>
<li><strong>è®¡ç®—ç­çº§å¹³å‡åˆ†</strong>ï¼šäº†è§£ç­çº§æ•´ä½“å­¦ä¹ æ°´å¹³ã€‚</li>
<li><strong>è®¡ç®—å®¶åº­æœˆå¹³å‡å¼€é”€</strong>ï¼šè§„åˆ’å®¶åº­é¢„ç®—ã€‚</li>
</ul>
</li>
<li>
<p><strong>æ³¨æ„</strong>ï¼šå¹³å‡æ•°å¯¹<strong>æç«¯å€¼</strong>éå¸¸æ•æ„Ÿã€‚å¦‚æœ5æ ¹è–¯æ¡ä¸­æœ‰ä¸€æ ¹æ˜¯30cmé•¿çš„â€œå·¨æ— éœ¸â€è–¯æ¡ï¼Œå¹³å‡æ•°å°±ä¼šè¢«æ‹‰é«˜åˆ°14cmï¼Œæ— æ³•ä»£è¡¨å¤§å¤šæ•°è–¯æ¡çš„çœŸå®é•¿åº¦ã€‚</p>
</li>
</ul>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5ebfcfb57aa94224bb47da51a30ebf58~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVXJiYW5KYXp6ZXJhdGk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768655779&amp;x-signature=zmbtZbgPLE54nQM0GQKLj%2FUC7OI%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-3">2.Â <strong>ä¸­ä½æ•°</strong></h4>
<ul>
<li>
<p><strong>å®ƒæ˜¯ä»€ä¹ˆ</strong>ï¼šå°†æ•°æ®<strong>ä»å°åˆ°å¤§æ’åº</strong>åï¼Œ<strong>æ­£ä¸­é—´</strong>çš„é‚£ä¸ªæ•°ã€‚å®ƒèƒ½é¿å…è¢«æç«¯å€¼å½±å“ã€‚</p>
</li>
<li>
<p><strong>æ€ä¹ˆæ‰¾</strong>ï¼šå…ˆæ’åºï¼Œæ‰¾ä¸­é—´ä½ç½®ã€‚</p>
</li>
<li>
<p><strong>è–¯æ¡ä¾‹å­</strong>ï¼š</p>
<ul>
<li>åŒæ ·5æ ¹è–¯æ¡ï¼š8, 9,Â <strong>10</strong>, 11, 12 â†’ ä¸­ä½æ•°æ˜¯Â <strong>10cm</strong>ã€‚</li>
<li>åŠ å…¥â€œå·¨æ— éœ¸â€è–¯æ¡ï¼š8, 9, 10, 11,Â <strong>30</strong>Â â†’ ä¸­ä½æ•°ä¾ç„¶æ˜¯Â <strong>10cm</strong>ã€‚çœ‹ï¼Œå®ƒä¸å—å½±å“ï¼</li>
</ul>
</li>
<li>
<p><strong>å®é™…åº”ç”¨</strong>ï¼š</p>
<ul>
<li><strong>äº†è§£â€œæ™®é€šæ°´å¹³â€</strong> ï¼šæ¯”å¦‚<strong>å›½å®¶æˆ–åŸå¸‚å±…æ°‘æ”¶å…¥ä¸­ä½æ•°</strong>ï¼Œæ¯”å¹³å‡æ”¶å…¥æ›´èƒ½åæ˜ æ™®é€šäººçš„çœŸå®æ”¶å…¥æƒ…å†µï¼Œå› ä¸ºä¸ä¼šè¢«å°‘æ•°å¯Œè±ªçš„æ”¶å…¥æ‹‰é«˜ã€‚</li>
<li><strong>å¯»æ‰¾ä¸­å¿ƒè¶‹åŠ¿</strong>ï¼šåœ¨æˆ¿ä»·ã€è–ªèµ„ç­‰å¯èƒ½åŒ…å«æé«˜æˆ–æä½å€¼çš„æ•°æ®ä¸­ï¼Œä¸­ä½æ•°æ¯”å¹³å‡æ•°æ›´æœ‰å‚è€ƒä»·å€¼ã€‚</li>
</ul>
</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ed1fa35910d34e75ab175bf27850e176~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVXJiYW5KYXp6ZXJhdGk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768655779&amp;x-signature=VRb94j0pmb29egxpQuKGsoL7eBM%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-4">3.Â <strong>ä¼—æ•°</strong></h4>
<ul>
<li>
<p><strong>å®ƒæ˜¯ä»€ä¹ˆ</strong>ï¼šä¸€ç»„æ•°æ®ä¸­ï¼Œ<strong>å‡ºç°æ¬¡æ•°æœ€å¤š</strong>çš„é‚£ä¸ªæ•°å€¼ã€‚</p>
</li>
<li>
<p><strong>æ€ä¹ˆæ‰¾</strong>ï¼šç»Ÿè®¡å“ªä¸ªæ•°å­—å‡ºç°å¾—æœ€é¢‘ç¹ã€‚</p>
</li>
<li>
<p><strong>è–¯æ¡ä¾‹å­</strong>ï¼šåˆä¸€æ‰¹7æ ¹è–¯æ¡é•¿åº¦ï¼š8, 9, 10, 10, 10, 11, 12ã€‚é•¿åº¦â€œ10cmâ€å‡ºç°äº†3æ¬¡ï¼Œæœ€å¤š â†’ ä¼—æ•°æ˜¯Â <strong>10cm</strong>ã€‚</p>
</li>
<li>
<p><strong>å®é™…åº”ç”¨</strong>ï¼š</p>
<ul>
<li><strong>äº†è§£â€œæœ€å¸¸è§â€çš„æƒ…å†µ</strong>ï¼šæœè£…é‹å¸½åº—æ ¹æ®<strong>ä¼—æ•°</strong>ï¼ˆå–å¾—æœ€å¤šçš„å°ºç ï¼‰æ¥è¿›è´§ï¼Œè€Œä¸æ˜¯æ ¹æ®å¹³å‡å°ºç ã€‚</li>
<li><strong>å¸‚åœºè°ƒç ”</strong>ï¼šè°ƒæŸ¥æ¶ˆè´¹è€…æœ€å–œæ¬¢çš„æ‰‹æœºé¢œè‰²ï¼Œç»“æœâ€œé»‘è‰²â€è¢«é€‰æ‹©æœ€å¤šï¼Œâ€œé»‘è‰²â€å°±æ˜¯ä¼—æ•°ã€‚</li>
</ul>
</li>
</ul>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/78caf800b98d4f7c8b74ad206fb98a11~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVXJiYW5KYXp6ZXJhdGk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768655779&amp;x-signature=%2FBEvG26G3FWjichoyZYBtAaL700%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-5">4.Â <strong>æ–¹å·®</strong></h4>
<ul>
<li>
<p><strong>å®ƒæ˜¯ä»€ä¹ˆ</strong>ï¼šè¡¡é‡æ•°æ®<strong>æ³¢åŠ¨å¤§å°</strong>æˆ–<strong>åˆ†æ•£ç¨‹åº¦</strong>çš„ä¸€ä¸ªæŒ‡æ ‡ã€‚è®¡ç®—çš„æ˜¯æ¯ä¸ªæ•°æ®ç‚¹ä¸å¹³å‡æ•°<strong>å·®è·çš„å¹³æ–¹</strong>çš„å¹³å‡å€¼ã€‚</p>
</li>
<li>
<p><strong>ä¸ºä»€ä¹ˆå¹³æ–¹</strong>ï¼Ÿä¸ºäº†é¿å…å·®å€¼æœ‰æ­£æœ‰è´Ÿï¼Œç›¸åŠ æ—¶ç›¸äº’æŠµæ¶ˆï¼ˆæ¯”å¦‚æ¯”å¹³å‡é•¿3cmå’ŒçŸ­3cmï¼Œç›´æ¥åŠ æ˜¯0ï¼Œæ— æ³•ä½“ç°æ³¢åŠ¨ï¼‰ã€‚å¹³æ–¹èƒ½è®©æ‰€æœ‰å·®å€¼éƒ½å˜æˆæ­£æ•°ï¼Œæ”¾å¤§æ³¢åŠ¨çš„å½±å“ã€‚</p>
</li>
<li>
<p><strong>è–¯æ¡ä¾‹å­</strong>ï¼šæœ‰ä¸¤æ‰¹è–¯æ¡ï¼Œå¹³å‡æ•°éƒ½æ˜¯10cmã€‚</p>
<ul>
<li>Aæ‰¹ï¼š9, 10, 11 ï¼ˆå¾ˆå‡åŒ€ï¼‰</li>
<li>Bæ‰¹ï¼š5, 10, 15 ï¼ˆé•¿çŸ­ä¸ä¸€ï¼‰<br/>
è®¡ç®—å®ƒä»¬ä¸å¹³å‡æ•°(10)çš„å·®å€¼å¹³æ–¹çš„å¹³å‡ï¼š</li>
<li>Aæ‰¹æ–¹å·®ï¼š[(9-10)Â² + (10-10)Â² + (11-10)Â²] / 3 = (1+0+1)/3 â‰ˆÂ <strong>0.67</strong></li>
<li>Bæ‰¹æ–¹å·®ï¼š[(5-10)Â² + (10-10)Â² + (15-10)Â²] / 3 = (25+0+25)/3 â‰ˆÂ <strong>16.67</strong><br/>
<strong>Bæ‰¹çš„æ–¹å·®è¿œå¤§äºAæ‰¹</strong>ï¼Œè¯´æ˜Bæ‰¹è–¯æ¡é•¿åº¦å·®å¼‚æ›´å¤§ï¼Œè´¨é‡ä¸ç¨³å®šã€‚</li>
</ul>
</li>
<li>
<p><strong>ä¸»è¦ç”¨é€”</strong>ï¼š<strong>åœ¨æ•°å­¦ä¸Šä¾¿äºè®¡ç®—å’Œæ¨å¯¼</strong>ï¼Œæ˜¯ç»Ÿè®¡å­¦ä¸­çš„é‡è¦åŸºç¡€æ¦‚å¿µã€‚</p>
</li>
</ul>
<h4 data-id="heading-6">5.Â <strong>æ ‡å‡†å·®</strong></h4>
<ul>
<li>
<p><strong>å®ƒæ˜¯ä»€ä¹ˆ</strong>ï¼šæ–¹å·®çš„<strong>å¹³æ–¹æ ¹</strong>ã€‚ç›®çš„æ˜¯æŠŠæ–¹å·®â€œå¹³æ–¹åŒ–â€çš„å•ä½ï¼Œå˜å›å’ŒåŸå§‹æ•°æ®ä¸€æ ·çš„å•ä½ï¼Œè®©æˆ‘ä»¬èƒ½ç›´è§‚åœ°ç†è§£æ³¢åŠ¨çš„å®é™…å¤§å°ã€‚</p>
</li>
<li>
<p><strong>è–¯æ¡ä¾‹å­</strong>ï¼šæ¥ä¸Šé¢çš„æ–¹å·®ã€‚</p>
<ul>
<li>Aæ‰¹æ ‡å‡†å·® = âˆš0.67 â‰ˆÂ <strong>0.82 cm</strong></li>
<li>Bæ‰¹æ ‡å‡†å·® = âˆš16.67 â‰ˆÂ <strong>4.08 cm</strong><br/>
ç°åœ¨æˆ‘ä»¬å¯ä»¥ç›´è§‚åœ°è¯´ï¼šAæ‰¹è–¯æ¡çš„é•¿åº¦å¤§å¤šåœ¨Â <strong>10cm Â± 0.82cm</strong>Â ä¹‹é—´æ³¢åŠ¨ï¼Œå¾ˆç¨³å®šï¼›Bæ‰¹åˆ™åœ¨Â <strong>10cm Â± 4.08cm</strong>Â ä¹‹é—´æ³¢åŠ¨ï¼Œè´¨é‡å¾ˆå·®ã€‚</li>
</ul>
</li>
<li>
<p><strong>å®é™…åº”ç”¨ï¼ˆæå…¶é‡è¦ï¼‰</strong> ï¼š</p>
<ul>
<li><strong>äº§å“è´¨é‡æ§åˆ¶</strong>ï¼šå·¥å‚è®¾å®šæ ‡å‡†ï¼Œè§„å®šé›¶ä»¶å°ºå¯¸çš„æ ‡å‡†å·®å¿…é¡»å°äº0.1mmï¼Œä»¥ç¡®ä¿æ‰€æœ‰äº§å“å‡ ä¹ä¸€æ ·ã€‚</li>
<li><strong>æŠ•èµ„é£é™©è¡¡é‡</strong>ï¼šè‚¡ç¥¨æˆ–åŸºé‡‘å‡€å€¼çš„<strong>æ ‡å‡†å·®è¶Šå¤§ï¼Œä»£è¡¨å…¶ä»·æ ¼æ³¢åŠ¨è¶Šå‰§çƒˆï¼Œé£é™©è¶Šé«˜</strong>ã€‚</li>
<li><strong>è€ƒè¯•æˆç»©åˆ†æ</strong>ï¼šä¸€æ¬¡è€ƒè¯•çš„æ ‡å‡†å·®å¤§ï¼Œè¯´æ˜å­¦ç”Ÿæˆç»©ä¸¤æåˆ†åŒ–ä¸¥é‡ã€‚</li>
</ul>
</li>
</ul>
<hr/>
<h3 data-id="heading-7">ä¸‰ã€ä¸€å¼ å›¾çœ‹æ‡‚åŒºåˆ«ä¸åº”ç”¨</h3>















































<table><thead><tr><th>æŒ‡æ ‡</th><th>å…³æ³¨ç‚¹</th><th>é€šä¿—ç†è§£</th><th>ç”Ÿæ´»åº”ç”¨åœºæ™¯</th><th>å—æç«¯å€¼å½±å“</th></tr></thead><tbody><tr><td><strong>å¹³å‡æ•°</strong></td><td>æ€»ä½“å¹³å‡æ°´å¹³</td><td>â€œç®—å‡ºæ¥çš„å¹³å‡â€</td><td>è®¡ç®—å¹³å‡æˆç»©ã€å¹³å‡å·¥èµ„</td><td><strong>éå¸¸å¤§</strong></td></tr><tr><td><strong>ä¸­ä½æ•°</strong></td><td>ä¸­é—´ä½ç½®æ°´å¹³</td><td>â€œæ’å‡ºæ¥çš„ä¸­é—´â€</td><td>è¡¡é‡å±…æ°‘å…¸å‹æ”¶å…¥ã€æˆ¿ä»·ä¸­ä½æ•°</td><td><strong>å‡ ä¹æ²¡æœ‰</strong></td></tr><tr><td><strong>ä¼—æ•°</strong></td><td>æœ€å¸¸è§çš„æƒ…å†µ</td><td>â€œæ•°å‡ºæ¥çš„æœ€å¤šâ€</td><td>ç¡®å®šæœ€ç•…é”€çš„æœè£…å°ºç ã€æœ€å¸¸è§çš„æ„è§</td><td><strong>å‡ ä¹æ²¡æœ‰</strong></td></tr><tr><td><strong>æ–¹å·®</strong></td><td>æ•°æ®æ³¢åŠ¨ç¨‹åº¦</td><td>â€œæ³¢åŠ¨å¤§å°çš„å¹³æ–¹å€¼â€</td><td>ä¸»è¦ç”¨äºç»Ÿè®¡å­¦ç†è®ºè®¡ç®—</td><td>å¤§</td></tr><tr><td><strong>æ ‡å‡†å·®</strong></td><td>æ•°æ®æ³¢åŠ¨ç¨‹åº¦</td><td>â€œæ³¢åŠ¨å¤§å°çš„å®é™…å€¼â€</td><td><strong>äº§å“è´¨é‡æ§åˆ¶ã€é‡‘èé£é™©è¡¡é‡</strong></td><td>å¤§</td></tr></tbody></table>
<h3 data-id="heading-8">å››ã€ç»¼åˆå®æˆ˜ï¼šåˆ†æä¸€æ¬¡è€ƒè¯•æˆç»©</h3>
<p>å‡è®¾æŸæ¬¡è‰°éš¾çš„æ•°å­¦è€ƒè¯•ï¼Œå…¨ç­10äººæˆç»©ä¸ºï¼š35, 50, 65, 70, 75, 78, 80, 85, 90,Â <strong>100</strong>ï¼ˆæœ€åä¸€ä½æ˜¯å­¦éœ¸ï¼‰ã€‚</p>
<ul>
<li><strong>å¹³å‡æ•°</strong>Â = çº¦ 73åˆ†ã€‚ä½†è¿™ä¸ªâ€œå¹³å‡â€è¢«å­¦éœ¸çš„100åˆ†æ‹‰é«˜äº†ï¼Œå¯èƒ½è®©è€å¸ˆè¯¯ä»¥ä¸ºå¤§å®¶è€ƒå¾—è¿˜è¡Œã€‚</li>
<li><strong>ä¸­ä½æ•°</strong>Â = æ’åºåç¬¬5ã€6ä½çš„å¹³å‡ï¼š(75+78)/2 =Â <strong>76.5åˆ†</strong>ã€‚è¿™ä¸ªæ•°æ›´èƒ½ä»£è¡¨ç­é‡Œâ€œä¸­é—´æ¢¯é˜Ÿâ€çš„æ°´å¹³ã€‚</li>
<li><strong>ä¼—æ•°</strong>ï¼šæ²¡æœ‰é‡å¤åˆ†æ•°ï¼Œæ‰€ä»¥<strong>æ— ä¼—æ•°</strong>ã€‚å¦‚æœå¤§å¤šæ•°äººè€ƒäº†70åˆ†ï¼Œé‚£ä¹ˆä¼—æ•°70åˆ†å°±å¾ˆæœ‰æ„ä¹‰ã€‚</li>
<li><strong>æ–¹å·® &amp; æ ‡å‡†å·®</strong>ï¼šè®¡ç®—åä¼šå¾—åˆ°è¾ƒå¤§çš„å€¼ï¼ˆå› ä¸º35åˆ†å’Œ100åˆ†å·®è·å·¨å¤§ï¼‰ã€‚è¿™å‘Šè¯‰è€å¸ˆï¼š<strong>è¿™æ¬¡è€ƒè¯•æˆç»©åˆ†å¸ƒéå¸¸åˆ†æ•£ï¼Œå­¦ç”Ÿæ°´å¹³å·®è·æå¤§ï¼Œå¯èƒ½éœ€è¦åˆ†å±‚è¾…å¯¼</strong>ã€‚</li>
</ul>
<h3 data-id="heading-9">æ€»ç»“ä¸è®°å¿†å£è¯€</h3>
<ul>
<li><strong>æƒ³çŸ¥æ€»ä½“å¹³å‡æ°´å¹³ï¼Œç”¨Â <code>å¹³å‡æ•°</code></strong>ï¼ˆå°å¿ƒæç«¯å€¼éª—ä½ ï¼‰ã€‚</li>
<li><strong>æƒ³æ‰¾å…¸å‹ä¸å—å¹²æ‰°ï¼Œç”¨Â <code>ä¸­ä½æ•°</code></strong>ï¼ˆæ”¶å…¥æˆ¿ä»·å¸¸ç”¨å®ƒï¼‰ã€‚</li>
<li><strong>æƒ³çœ‹å“ªä¸ªæœ€å¤šæœ€ç«ï¼Œç”¨Â <code>ä¼—æ•°</code></strong>ï¼ˆå¸‚åœºè°ƒæŸ¥è¦é å®ƒï¼‰ã€‚</li>
<li><strong>æƒ³æ™“æ•°æ®ç¨³ä¸ç¨³å®šï¼Œçœ‹Â <code>æ ‡å‡†å·®</code></strong>ï¼ˆè´¨é‡æ§åˆ¶ã€é£é™©è¡¡é‡éƒ½æ‰¾å®ƒï¼‰ã€‚</li>
<li><strong><code>æ–¹å·®</code>Â æ˜¯Â <code>æ ‡å‡†å·®</code>Â çš„æ•°å­¦çˆ¸çˆ¸ï¼Œç†è®ºè®¡ç®—ç¦»ä¸å¼€å®ƒã€‚</strong></li>
</ul>
<h3 data-id="heading-10">æ ¸å¿ƒåŸåˆ™ï¼šä¸€å¼ å›¾çœ‹æ‡‚å¦‚ä½•é€‰æ‹©</h3>
<p>åœ¨æ·±å…¥ç»†èŠ‚å‰ï¼Œè®°ä½è¿™ä¸ªæœ€æ ¹æœ¬çš„é€‰å›¾é€»è¾‘ï¼š</p>
<ul>
<li><strong>æ¯”è¾ƒå¤§å°</strong>Â â†’Â <strong>æ¡å½¢å›¾</strong></li>
<li><strong>çœ‹è¶‹åŠ¿å˜åŒ–</strong>Â â†’Â <strong>çº¿å½¢å›¾ï¼ˆæŠ˜çº¿å›¾ï¼‰</strong></li>
<li><strong>çœ‹å æ¯”å…³ç³»</strong>Â â†’Â <strong>é¥¼å›¾/ç¯å½¢å›¾</strong></li>
<li><strong>å¸å¼•çœ¼çƒã€ç®€å•æ¯”è¾ƒ</strong>Â â†’Â <strong>è±¡å½¢ç»Ÿè®¡å›¾</strong></li>
</ul>
<p>ä¸‹é¢æˆ‘ä»¬é€ä¸€è¯¦è§£ã€‚</p>
<hr/>
<h3 data-id="heading-11">äº”. è±¡å½¢ç»Ÿè®¡å›¾ï¼šè®©æ•°æ®â€œæ´»â€èµ·æ¥</h3>
<ul>
<li>
<p><strong>å®ƒæ˜¯ä»€ä¹ˆ</strong>ï¼šç”¨å°å›¾æ ‡ï¼ˆè±¡å½¢ç¬¦å·ï¼‰çš„<strong>æ•°é‡æˆ–å¤§å°</strong>æ¥ä»£è¡¨æ•°æ®å¤šå°‘çš„å›¾è¡¨ã€‚å®ƒæ›´åƒæ˜¯â€œæ•°æ®æ’å›¾â€ï¼Œè¿½æ±‚ç›´è§‚å’Œè§†è§‰å†²å‡»åŠ›ã€‚</p>
</li>
<li>
<p><strong>æœ€ä½³ä½¿ç”¨åœºæ™¯</strong>ï¼š</p>
<ul>
<li><strong>é¢å‘å…¬ä¼—æˆ–å„¿ç«¥</strong>çš„ç§‘æ™®ã€å®£ä¼ ææ–™ã€‚</li>
<li>éœ€è¦å¿«é€Ÿã€ç›´è§‚åœ°ä¼ è¾¾<strong>æ•°é‡å¯¹æ¯”</strong>ï¼Œä¸”æ•°æ®é¡¹è¾ƒå°‘æ—¶ã€‚</li>
<li>ä¾‹å¦‚ï¼šæ¯”è¾ƒä¸¤ä¸ªå“ç‰Œçš„é”€é‡ã€å±•ç¤ºä¸åŒèƒ½æºçš„å‘ç”µé‡ã€‚</li>
</ul>
</li>
<li>
<p><strong>ä¸€ä¸ªä¾‹å­</strong>ï¼šæ¯”è¾ƒAã€Bã€Cä¸‰ä¸ªåŸå¸‚çš„æ±½è½¦ä¿æœ‰é‡ã€‚</p>
<ul>
<li><strong>å›¾è¡¨æè¿°</strong>ï¼šç”¨ä¸‰è¾†å°æ±½è½¦å›¾æ ‡æ’æˆä¸‰è¡Œï¼ŒAåŸå¸‚ä¸‹é¢æœ‰8è¾†è½¦ï¼ŒBåŸå¸‚ä¸‹é¢æœ‰5è¾†è½¦ï¼ŒCåŸå¸‚ä¸‹é¢æœ‰12è¾†è½¦ã€‚ä¸€çœ¼å°±èƒ½çœ‹å‡ºCåŸå¸‚æœ€å¤šã€‚</li>
</ul>
</li>
</ul>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1e91ebdb989542faaad01dda963b9b6b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVXJiYW5KYXp6ZXJhdGk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768655779&amp;x-signature=eecJzs6RGOSDLIUWTntviD1es4w%3D" alt="image.png" loading="lazy"/></p>
<ul>
<li>
<p><strong>âœ… æœ€ä½³å®è·µä¸âš ï¸æ³¨æ„äº‹é¡¹</strong>ï¼š</p>
<ul>
<li>
<p><strong>ä¼˜ç‚¹</strong>ï¼š<strong>éå¸¸ç›´è§‚ã€å¸å¼•äºº</strong>ï¼Œå³ä½¿ä¸è®¤è¯†å­—ä¹Ÿèƒ½çœ‹æ‡‚ã€‚</p>
</li>
<li>
<p><strong>ç¼ºç‚¹</strong>ï¼š<strong>ä¸ç²¾ç¡®</strong>ï¼Œéš¾ä»¥è¡¨è¾¾å¤æ‚æ•°æ®å’Œç»†å¾®å·®åˆ«ã€‚</p>
</li>
<li>
<p><strong>é‡è¦åŸåˆ™</strong>ï¼š</p>
<ol>
<li><strong>ä¸€ä¸ªå›¾æ ‡å¿…é¡»ä»£è¡¨å›ºå®šçš„æ•°é‡</strong>ï¼ˆæ¯”å¦‚1ä¸ªæˆ¿å­å›¾æ ‡ = 1000å¥—ä½æˆ¿ï¼‰ã€‚å¿Œç”¨å›¾æ ‡å¤§å°ä¸åŒæ¥æ¯”è¾ƒï¼ˆäººçœ¼å¯¹é¢ç§¯ä¸æ•æ„Ÿï¼‰ã€‚</li>
<li>æ•°æ®å¤æ‚æˆ–éœ€è¦ç²¾ç¡®é˜…è¯»æ—¶ï¼Œ<strong>é¿å…ä½¿ç”¨</strong>ã€‚</li>
</ol>
</li>
</ul>
</li>
</ul>
<h3 data-id="heading-12">å…­. æ¡å½¢å›¾ï¼šæ¯”è¾ƒå† å†›</h3>
<ul>
<li>
<p><strong>å®ƒæ˜¯ä»€ä¹ˆ</strong>ï¼šç”¨ä¸€ç³»åˆ—<strong>é«˜åº¦æˆ–é•¿åº¦ä¸æ•°æ®å€¼æˆæ¯”ä¾‹</strong>çš„çŸ©å½¢ï¼ˆæŸ±å­ï¼‰æ¥è¡¨ç¤ºæ•°æ®å¤§å°çš„å›¾è¡¨ã€‚æœ‰çºµå‘ï¼ˆæŸ±çŠ¶å›¾ï¼‰å’Œæ¨ªå‘ï¼ˆæ¡å½¢å›¾ï¼‰ä¸¤ç§ã€‚</p>
</li>
<li>
<p><strong>æœ€ä½³ä½¿ç”¨åœºæ™¯</strong>ï¼š</p>
<ul>
<li><strong>æ¯”è¾ƒä¸åŒç±»åˆ«ä¹‹é—´çš„æ•°å€¼å¤§å°</strong>ï¼ˆä¾‹å¦‚ï¼šæ¯”è¾ƒä¸åŒäº§å“çš„é”€é‡ã€ä¸åŒå›½å®¶çš„äººå£ï¼‰ã€‚</li>
<li><strong>æ˜¾ç¤ºä¸€æ®µæ—¶é—´å†…çš„æ•°æ®ï¼Œä½†ç±»åˆ«æ•°é‡è¾ƒå°‘æˆ–ç±»åˆ«åç§°è¾ƒé•¿æ—¶</strong>ï¼ˆä¾‹å¦‚ï¼šæ¯”è¾ƒ2023å¹´å„å­£åº¦çš„è¥æ”¶ï¼‰ã€‚</li>
<li>æ¨ªå‘æ¡å½¢å›¾ç‰¹åˆ«é€‚åˆ<strong>ç±»åˆ«åç§°å¾ˆé•¿</strong>çš„æƒ…å†µï¼Œæ–¹ä¾¿é˜…è¯»ã€‚</li>
</ul>
</li>
<li>
<p><strong>ä¸€ä¸ªä¾‹å­</strong>ï¼š2023å¹´å…¬å¸å„äº§å“çº¿é”€å”®é¢ã€‚</p>
<ul>
<li><strong>å›¾è¡¨æè¿°</strong>ï¼šæ¨ªè½´æ˜¯äº§å“åç§°ï¼ˆæ‰‹æœºã€ç”µè„‘ã€å¹³æ¿ã€è€³æœºï¼‰ï¼Œçºµè½´æ˜¯é”€å”®é¢ã€‚ç”µè„‘çš„æŸ±å­æœ€é«˜ï¼Œè€³æœºçš„æœ€çŸ®ï¼Œæ¸…æ™°å±•ç¤ºè°å–å¾—æœ€å¥½ã€‚</li>
</ul>
</li>
<li>
<p><strong>âœ… æœ€ä½³å®è·µä¸âš ï¸æ³¨æ„äº‹é¡¹</strong>ï¼š</p>
<ul>
<li><strong>æŸ±å­å¿…é¡»ç­‰å®½</strong>ï¼Œé—´è·ä¸€è‡´ã€‚</li>
<li><strong>çºµè½´å¿…é¡»ä»0å¼€å§‹</strong>ï¼å¦åˆ™ä¼šä¸¥é‡è¯¯å¯¼è§‚ä¼—ï¼Œå¤¸å¤§å·®å¼‚ã€‚</li>
<li>å¯¹æŸ±å­è¿›è¡Œ<strong>æ’åº</strong>ï¼ˆä»é«˜åˆ°ä½æˆ–ä»ä½åˆ°é«˜ï¼‰ï¼Œèƒ½è®©æ¯”è¾ƒæ›´å®¹æ˜“ã€‚</li>
<li>ä½¿ç”¨<strong>é¢œè‰²</strong>å¯ä»¥é«˜äº®é‡ç‚¹æ•°æ®ï¼ˆå¦‚å°†é”€é‡ç¬¬ä¸€çš„äº§å“æŸ±å­æ ‡æˆç‰¹æ®Šé¢œè‰²ï¼‰ã€‚</li>
</ul>
</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d259c61b833641f68ef44d3df96d42d0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVXJiYW5KYXp6ZXJhdGk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768655779&amp;x-signature=o9dq3f6opk9Pit5woqHmQdEVMtw%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-13">ä¸ƒ. çº¿å½¢å›¾ï¼šçœ‹è§è¶‹åŠ¿</h3>
<ul>
<li>
<p><strong>å®ƒæ˜¯ä»€ä¹ˆ</strong>ï¼šå°†ä¸€ç³»åˆ—<strong>è¿ç»­çš„æ•°æ®ç‚¹ç”¨ç›´çº¿è¿æ¥èµ·æ¥</strong>çš„å›¾è¡¨ï¼Œä¸»è¦ç”¨äºæ˜¾ç¤ºæ•°æ®éšæ—¶é—´æˆ–å…¶ä»–è¿ç»­å˜é‡è€Œå˜åŒ–çš„<strong>è¶‹åŠ¿</strong>ã€‚</p>
</li>
<li>
<p><strong>æœ€ä½³ä½¿ç”¨åœºæ™¯</strong>ï¼š</p>
<ul>
<li><strong>å±•ç¤ºæ•°æ®åœ¨è¿ç»­åŒºé—´ï¼ˆå°¤å…¶æ˜¯æ—¶é—´ï¼‰ä¸Šçš„å˜åŒ–è¶‹åŠ¿</strong>ï¼ˆä¾‹å¦‚ï¼šå…¬å¸è‚¡ä»·æ¯æ—¥æ³¢åŠ¨ã€ä¸€å¹´ä¸­çš„æ°”æ¸©å˜åŒ–ã€ç½‘ç«™æœˆåº¦è®¿é—®é‡ï¼‰ã€‚</li>
<li><strong>æ¯”è¾ƒå¤šä¸ªæ•°æ®ç³»åˆ—åœ¨åŒä¸€æ—¶æœŸçš„è¶‹åŠ¿</strong>ï¼ˆä¾‹å¦‚ï¼šæ¯”è¾ƒAã€Bä¸¤æ¬¾äº§å“åœ¨è¿‡å»ä¸€å¹´çš„é”€é‡è¶‹åŠ¿çº¿ï¼‰ã€‚</li>
</ul>
</li>
<li>
<p><strong>ä¸€ä¸ªä¾‹å­</strong>ï¼šæŸåŸå¸‚è¿‡å»ä¸€å‘¨çš„æ—¥æœ€é«˜æ°”æ¸©å˜åŒ–ã€‚</p>
<ul>
<li><strong>å›¾è¡¨æè¿°</strong>ï¼šæ¨ªè½´æ˜¯æ—¥æœŸï¼ˆå‘¨ä¸€åˆ°å‘¨æ—¥ï¼‰ï¼Œçºµè½´æ˜¯æ¸©åº¦ï¼ˆæ‘„æ°åº¦ï¼‰ã€‚å°†æ¯å¤©çš„æ¸©åº¦ç‚¹è¿æˆçº¿ï¼Œå¯ä»¥çœ‹åˆ°å‘¨ä¸‰æœ€é«˜ï¼Œå‘¨æœ«æœ‰æ‰€ä¸‹é™çš„â€œå…ˆå‡åé™â€è¶‹åŠ¿ã€‚</li>
</ul>
</li>
<li>
<p><strong>âœ… æœ€ä½³å®è·µä¸âš ï¸æ³¨æ„äº‹é¡¹</strong>ï¼š</p>
<ul>
<li><strong>æ¨ªè½´å¿…é¡»æ˜¯è¿ç»­çš„</strong>ï¼ˆå¦‚æ—¶é—´ã€è·ç¦»ï¼‰ï¼Œä¸èƒ½æ˜¯â€œäº§å“Aã€äº§å“Bâ€è¿™ç±»ç¦»æ•£ç±»åˆ«ã€‚</li>
<li>çº¿æ¡ä¸å®œè¿‡å¤šï¼Œ<strong>åŒæ—¶æ¯”è¾ƒçš„çº¿æ¡æœ€å¥½ä¸è¶…è¿‡4-5æ¡</strong>ï¼Œå¦åˆ™ä¼šåƒä¸€å›¢ä¹±éº»ã€‚</li>
<li>å¯ä»¥æ­é…<strong>æ•°æ®æ ‡è®°ç‚¹</strong>ï¼ˆåœ†åœˆã€æ–¹å—ï¼‰æ¥çªå‡ºå…·ä½“çš„æ•°æ®å€¼ã€‚</li>
<li>å¦‚æœçºµè½´å·®è·å¾ˆå¤§ï¼Œå¯ä»¥ä½¿ç”¨<strong>åŒçºµè½´</strong>æ¥æ¯”è¾ƒä¸åŒé‡çº§çš„æ•°æ®ï¼ˆéœ€è°¨æ…ï¼Œå¹¶æ˜ç¡®æ ‡æ³¨ï¼‰ã€‚</li>
</ul>
</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5de0c58954344571ab21afd18848816e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVXJiYW5KYXp6ZXJhdGk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768655779&amp;x-signature=lGSZYZo4gf5B5AvewvDVSYT7ftM%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-14">å…«. é¥¼å›¾ï¼šå±•ç¤ºâ€œè›‹ç³•â€æ€ä¹ˆåˆ†</h3>
<ul>
<li>
<p><strong>å®ƒæ˜¯ä»€ä¹ˆ</strong>ï¼šä¸€ä¸ªè¢«åˆ†å‰²æˆè‹¥å¹²æ‰‡å½¢çš„åœ†ï¼Œæ¯ä¸ªæ‰‡å½¢çš„<strong>é¢ç§¯ï¼ˆåœ†å¿ƒè§’å¤§å°ï¼‰</strong> Â ä»£è¡¨è¯¥éƒ¨åˆ†åœ¨æ€»ä½“ä¸­æ‰€å çš„<strong>ç™¾åˆ†æ¯”</strong>ã€‚</p>
</li>
<li>
<p><strong>æœ€ä½³ä½¿ç”¨åœºæ™¯</strong>ï¼š</p>
<ul>
<li><strong>å±•ç¤ºä¸€ä¸ªæ•´ä½“ï¼ˆ100%ï¼‰è¢«åˆ†å‰²æˆå‡ ä¸ªéƒ¨åˆ†æ—¶ï¼Œå„éƒ¨åˆ†çš„å æ¯”å…³ç³»</strong>ã€‚</li>
<li>å¼ºè°ƒ<strong>æŸä¸€éƒ¨åˆ†åœ¨æ•´ä½“ä¸­çš„é‡è¦ç¨‹åº¦</strong>ï¼ˆä¾‹å¦‚ï¼šå±•ç¤ºå…¬å¸æœ€å¤§è¥æ”¶æ¥æºçš„å æ¯”ï¼‰ã€‚</li>
<li><strong>ä»…ç”¨äºæ˜¾ç¤ºé™æ€çš„æ„æˆæ¯”ä¾‹</strong>ï¼Œä¸é€‚ç”¨äºéšæ—¶é—´å˜åŒ–çš„æ•°æ®ã€‚</li>
</ul>
</li>
<li>
<p><strong>ä¸€ä¸ªä¾‹å­</strong>ï¼šå…¬å¸æœ¬æœˆå¸‚åœºè´¹ç”¨é¢„ç®—æ„æˆã€‚</p>
<ul>
<li><strong>å›¾è¡¨æè¿°</strong>ï¼šä¸€ä¸ªå®Œæ•´çš„åœ†é¥¼ï¼Œå…¶ä¸­æ•°å­—å¹¿å‘Šå 45%ï¼ˆæœ€å¤§çš„ä¸€å—ï¼‰ï¼Œçº¿ä¸‹æ´»åŠ¨å 30%ï¼Œå†…å®¹åˆ¶ä½œå 20%ï¼Œå…¶ä»–å 5%ã€‚ä¸€çœ¼å¯çŸ¥ä¸»è¦èŠ±è´¹åœ¨æ•°å­—å¹¿å‘Šä¸Šã€‚</li>
</ul>
</li>
<li>
<p><strong>âœ… æœ€ä½³å®è·µä¸âš ï¸æ³¨æ„äº‹é¡¹</strong>ï¼š</p>
<ul>
<li><strong>æ‰‡å½¢éƒ¨åˆ†æœ€å¥½ä¸è¶…è¿‡6ä¸ª</strong>ï¼Œå¦åˆ™ä¼šéš¾ä»¥é˜…è¯»ã€‚å¯ä»¥å°†ä¼—å¤šå°ä»½é¢åˆå¹¶ä¸ºâ€œå…¶ä»–â€é¡¹ã€‚</li>
<li><strong>åŠ¡å¿…æ ‡æ³¨ç™¾åˆ†æ¯”æˆ–å…·ä½“æ•°å€¼</strong>ï¼Œå› ä¸ºäººçœ¼ä¸æ“…é•¿ç²¾ç¡®æ¯”è¾ƒè§’åº¦å¤§å°ã€‚</li>
<li><strong>ä»12ç‚¹é’Ÿæ–¹å‘å¼€å§‹</strong>ï¼ŒæŒ‰ä»½é¢ä»å¤§åˆ°å°é¡ºæ—¶é’ˆæ’åˆ—ï¼Œçœ‹èµ·æ¥æœ€èˆ’æœã€‚</li>
<li><strong>é¿å…ä½¿ç”¨3Dæ•ˆæœæˆ–çˆ†ç‚¸å¼é¥¼å›¾</strong>ï¼Œå®ƒä»¬ä¼šæ‰­æ›²è§†è§‰åˆ¤æ–­ã€‚</li>
<li><strong>å½“éœ€è¦æ¯”è¾ƒå¤šä¸ªâ€œæ•´ä½“â€çš„æ„æˆæ—¶ï¼Œä¸è¦ç”¨å¤šä¸ªé¥¼å›¾</strong>ï¼Œæ”¹ç”¨<strong>å †å ç™¾åˆ†æ¯”æ¡å½¢å›¾</strong>ä¼šæ›´æ¸…æ™°ã€‚</li>
</ul>
</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/902e5e5c2ab1406c8eff85897df3fe40~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVXJiYW5KYXp6ZXJhdGk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768655779&amp;x-signature=lt4E35zZbo0LPLwop4yOJZJO2zc%3D" alt="image.png" loading="lazy"/></p>
<hr/>
<h3 data-id="heading-15">æ€»ç»“ï¼šå››å¤§åŸºç¡€å›¾è¡¨é€ŸæŸ¥æ‰‹å†Œ</h3>
<p>ä¸ºäº†è®©ä½ ä¸€ç›®äº†ç„¶ï¼Œæˆ‘å°†è¿™å››ç§å›¾è¡¨çš„æ ¸å¿ƒç‰¹æ€§ã€é€‚ç”¨åœºæ™¯å’Œè¦ç‚¹æ€»ç»“åœ¨ä¸‹è¡¨ä¸­ï¼š</p>



































<table><thead><tr><th>ç‰¹æ€§å›¾è¡¨ç±»å‹</th><th>æ ¸å¿ƒåŠŸèƒ½</th><th>æœ€ä½³ä½¿ç”¨åœºæ™¯</th><th>å…³é”®æ³¨æ„äº‹é¡¹</th></tr></thead><tbody><tr><td><strong>è±¡å½¢ç»Ÿè®¡å›¾</strong></td><td><strong>ç›´è§‚å±•ç¤ºã€è§†è§‰å¸å¼•</strong></td><td>å…¬ä¼—å®£ä¼ ã€å„¿ç«¥æ•™è‚²ã€ç®€å•æ•°é‡å¯¹æ¯”</td><td>1ä¸ªå›¾æ ‡=å›ºå®šæ•°é‡ï¼›é¿å…ç”¨äºç²¾ç¡®æˆ–å¤æ‚æ•°æ®</td></tr><tr><td><strong>æ¡å½¢å›¾</strong></td><td><strong>ç²¾ç¡®æ¯”è¾ƒå„ç±»åˆ«æ•°å€¼å¤§å°</strong></td><td>æ¯”è¾ƒäº§å“é”€é‡ã€å›½å®¶äººå£ã€å­£åº¦è¥æ”¶ç­‰</td><td><strong>çºµè½´ä»0å¼€å§‹</strong>ï¼›å¯å¯¹ç±»åˆ«æ’åºï¼›é€‚åˆåç§°é•¿çš„ç±»åˆ«ç”¨æ¨ªå‘</td></tr><tr><td><strong>çº¿å½¢å›¾</strong></td><td><strong>æ­ç¤ºæ•°æ®éšæ—¶é—´çš„å˜åŒ–è¶‹åŠ¿</strong></td><td>è‚¡ä»·æ³¢åŠ¨ã€æ°”æ¸©å˜åŒ–ã€è®¿é—®é‡è¶‹åŠ¿ã€å¤šç³»åˆ—è¶‹åŠ¿å¯¹æ¯”</td><td>æ¨ªè½´éœ€è¿ç»­ï¼ˆå¦‚æ—¶é—´ï¼‰ï¼›åŒæ—¶æ˜¾ç¤ºçº¿æ¡ä¸å®œè¿‡å¤š</td></tr><tr><td><strong>é¥¼å›¾</strong></td><td><strong>å±•ç¤ºæ•´ä½“ä¸­å„éƒ¨åˆ†çš„å æ¯”å…³ç³»</strong></td><td>é¢„ç®—æ„æˆã€å¸‚åœºä»½é¢ã€é€‰æ°‘æ”¯æŒç‡ç­‰é™æ€æ¯”ä¾‹</td><td><strong>éƒ¨åˆ†æ•°â‰¤6</strong>ï¼›æ ‡æ³¨ç™¾åˆ†æ¯”ï¼›<strong>é¿å…ç”¨äºè¶‹åŠ¿æ¯”è¾ƒ</strong></td></tr></tbody></table>
<h3 data-id="heading-16">æœ€ç»ˆå†³ç­–æŒ‡å—ï¼šæˆ‘è¯¥ç”¨ä»€ä¹ˆå›¾ï¼Ÿ</h3>
<p>æœ€åï¼Œè®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªå…·ä½“çš„åœºæ™¯æ¥ä¸²è”æ‰€æœ‰çŸ¥è¯†ã€‚å‡è®¾ä½ æ˜¯æŸå“ç‰Œçš„å¸‚åœºåˆ†æå¸ˆï¼Œæ‰‹å¤´æœ‰å»å¹´çš„é”€å”®æ•°æ®ï¼Œä½ éœ€è¦å‘è€æ¿æ±‡æŠ¥ï¼š</p>
<ol>
<li>
<p><strong>â€œè€æ¿ï¼Œæˆ‘æƒ³çœ‹çœ‹å’±ä»¬å“ªæ¬¾äº§å“å–å¾—æœ€å¥½ï¼Ÿâ€</strong></p>
<ul>
<li>ğŸ‘‰ ç”¨<strong>æ¡å½¢å›¾</strong>ã€‚æŠŠå„äº§å“åç§°æ”¾åœ¨æ¨ªè½´ï¼Œé”€é‡ä½œä¸ºæŸ±å­é«˜åº¦ï¼Œé«˜ä½ç«‹åˆ¤ã€‚</li>
</ul>
</li>
<li>
<p><strong>â€œè€æ¿ï¼Œæˆ‘æƒ³çœ‹çœ‹å’±ä»¬æ——èˆ°äº§å“å…¨å¹´çš„é”€å”®èµ°åŠ¿ï¼Œæœ‰æ²¡æœ‰å­£èŠ‚æ€§è§„å¾‹ï¼Ÿâ€</strong></p>
<ul>
<li>ğŸ‘‰ ç”¨<strong>çº¿å½¢å›¾</strong>ã€‚æŠŠ12ä¸ªæœˆä»½æ”¾åœ¨æ¨ªè½´ï¼Œæ¯æœˆé”€é‡è¿æˆçº¿ï¼Œä¸Šå‡ä¸‹é™è¶‹åŠ¿ä¸€ç›®äº†ç„¶ã€‚</li>
</ul>
</li>
<li>
<p><strong>â€œè€æ¿ï¼Œæˆ‘æƒ³çœ‹çœ‹å’±ä»¬çš„é’±éƒ½èŠ±åœ¨å“ªäº›æ¸ é“äº†ï¼Œå¤§å¤´åœ¨å“ªï¼Ÿâ€</strong></p>
<ul>
<li>ğŸ‘‰ ç”¨<strong>é¥¼å›¾</strong>ã€‚æ¸…æ™°åœ°å±•ç¤ºå¹¿å‘Šã€ä¿ƒé”€ã€ç ”å‘ç­‰å„é¡¹è´¹ç”¨å æ€»é¢„ç®—çš„ç™¾åˆ†æ¯”ã€‚</li>
</ul>
</li>
<li>
<p><strong>â€œè€æ¿ï¼Œæˆ‘ä»¬è¦åšä¸€å¼ ç»™æ¶ˆè´¹è€…çœ‹çš„å®£ä¼ æµ·æŠ¥ï¼Œæƒ³çªå‡ºæˆ‘ä»¬ç”¨æˆ·æ•°é‡æ˜¯ç«äº‰å¯¹æ‰‹çš„ä¸¤å€ï¼â€</strong></p>
<ul>
<li>ğŸ‘‰ ç”¨<strong>è±¡å½¢ç»Ÿè®¡å›¾</strong>ã€‚ç”»ä¸¤æ’å°äººå›¾æ ‡ï¼Œæˆ‘ä»¬å“ç‰Œä¸‹é¢å°äººå›¾æ ‡æ•°é‡æ˜¯å¯¹æ‰‹çš„ä¸¤å€ï¼Œè§†è§‰å†²å‡»åŠ›å¼ºï¼Œæ˜“æ‡‚ã€‚</li>
</ul>
</li>
</ol>
<p>è®°ä½ï¼Œå›¾è¡¨æ˜¯ä¸ºä½ è®²æ•…äº‹çš„<strong>å·¥å…·</strong>ã€‚é€‰æ‹©é‚£ä¸ªèƒ½è®©ä½ çš„æ•°æ®æ•…äº‹è®²å¾—æœ€æ¸…æ™°ã€æœ€æœ‰åŠ›çš„å·¥å…·ã€‚å…ˆä»æŒæ¡è¿™å››ç§åŸºç¡€å›¾è¡¨å¼€å§‹ï¼Œä½ å°±èƒ½è§£å†³å·¥ä½œä¸­80%ä»¥ä¸Šçš„æ•°æ®å±•ç¤ºéœ€æ±‚äº†ã€‚</p>
<hr/>
<h3 data-id="heading-17">ä¸€ä¸ªä¸­æ€§çš„â€œè¯šå®â€å›¾è¡¨</h3>
<p>å‡è®¾æŸå…¬å¸è¿‡å»12ä¸ªæœˆçš„è¥æ”¶ï¼ˆå•ä½ï¼šä¸‡å…ƒï¼‰å¦‚ä¸‹ï¼š<br/>
<code>[100, 101, 102, 103, 104, 105, 106, 108, 110, 112, 115, 118]</code></p>
<ul>
<li><strong>äº‹å®</strong>ï¼šè¥æ”¶åœ¨ç¨³å®šã€ç¼“æ…¢åœ°å¢é•¿ï¼Œä»100ä¸‡åˆ°118ä¸‡ï¼Œå…¨å¹´å¢é•¿çº¦18%ã€‚</li>
</ul>
<p>ç°åœ¨ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹å¦‚ä½•â€œæ”¹é€ â€è¿™ä¸ªå›¾è¡¨ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e85ae4c973e3440f80c034e477245a3b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVXJiYW5KYXp6ZXJhdGk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768655779&amp;x-signature=F45zY2tcOoRWEEV78GMoRG4p4UQ%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-18">è¯¯å¯¼æ‰‹æ³•ä¸€ï¼šæˆªæ–­Yè½´ï¼ˆæœ€å¸¸è§ã€æœ€ç‹¡çŒ¾ï¼‰</h3>
<ul>
<li>
<p><strong>æ“ä½œæ–¹æ³•</strong>ï¼š<strong>ä¸è®©çºµè½´ä»0å¼€å§‹</strong>ï¼Œè€Œæ˜¯ä»ä¸€ä¸ªæ¥è¿‘æ•°æ®æœ€å°å€¼çš„æ•°å­—å¼€å§‹ï¼ˆæ¯”å¦‚ä»98å¼€å§‹ï¼‰ã€‚</p>
</li>
<li>
<p><strong>è¯¯å¯¼æ•ˆæœ</strong>ï¼šå¾®å°çš„ç»å¯¹å˜åŒ–ï¼ˆ18ä¸ªå•ä½ï¼‰ï¼Œåœ¨è§†è§‰ä¸Šè¢«æ”¾å¤§æˆå·¨å¤§çš„ç›¸å¯¹æ³¢åŠ¨ï¼Œè®©å¹³ç¼“çš„å¢é•¿çœ‹èµ·æ¥åƒâ€œé£™å‡â€æˆ–â€œæš´è·Œâ€ã€‚</p>
</li>
<li>
<p><strong>å¯¹æ¯”</strong>ï¼šå·¦è¾¹è¯šå®çš„å›¾è¡¨æ˜¾ç¤ºå¢é•¿å¹³ç¼“ï¼›å³è¾¹è¯¯å¯¼çš„å›¾è¡¨æ˜¾ç¤ºå¢é•¿é™¡å³­ï¼Œåƒä¸šç»©â€œç«ç®­å¼ä¸Šå‡â€ã€‚</p>
</li>
<li>
<p><strong>å¦‚ä½•è¯†ç ´</strong>ï¼š<strong>ç¬¬ä¸€çœ¼æ°¸è¿œçœ‹çºµè½´èµ·ç‚¹ï¼</strong> Â æ£€æŸ¥åæ ‡è½´æ˜¯å¦ä»0å¼€å§‹ã€‚å•†ä¸šæ–°é—»ã€å¹¿å‘Šä¸­å°¤å…¶å¸¸è§ã€‚</p>
</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f902e07d39874bb28079599f76a99e2a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVXJiYW5KYXp6ZXJhdGk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768655779&amp;x-signature=JG%2FIQB2IGZjP73EwxqnzrIO4aZc%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-19">è¯¯å¯¼æ‰‹æ³•äºŒï¼šæ‰­æ›²æ¯”ä¾‹ï¼ˆå‹ç¼©æˆ–æ‹‰ä¼¸ï¼‰</h3>
<ul>
<li>
<p><strong>æ“ä½œæ–¹æ³•</strong>ï¼šäººä¸ºè°ƒæ•´å›¾è¡¨çš„Â  <strong>â€œé•¿å®½æ¯”â€</strong> ã€‚æ¨ªè½´è¢«æ‹‰å¾—å¾ˆé•¿ï¼Œæˆ–çºµè½´è¢«å‹å¾—å¾ˆæ‰ã€‚</p>
</li>
<li>
<p><strong>è¯¯å¯¼æ•ˆæœ</strong>ï¼š</p>
<ul>
<li><strong>æ¨ªè½´è¿‡é•¿</strong>ï¼šè¶‹åŠ¿çœ‹èµ·æ¥æ›´å¹³ç¼“ï¼Œæ©ç›–å˜åŒ–ã€‚ï¼ˆâ€œçœ‹ï¼Œæˆ‘ä»¬çš„ä¸šç»©ä¸€ç›´å¾ˆç¨³å®šï¼â€ï¼‰</li>
<li><strong>çºµè½´è¿‡é•¿/æ¨ªè½´è¿‡çŸ­</strong>ï¼šè¶‹åŠ¿çœ‹èµ·æ¥æ›´å‰§çƒˆï¼Œå¤¸å¤§æ³¢åŠ¨ã€‚ï¼ˆâ€œçœ‹ï¼Œæˆ‘ä»¬çš„å¢é•¿åŠ¿å¤´å¤šçŒ›ï¼â€ï¼‰</li>
</ul>
</li>
<li>
<p><strong>å¦‚ä½•è¯†ç ´</strong>ï¼šå…³æ³¨å›¾è¡¨æ•´ä½“çš„â€œå¡åº¦â€ã€‚åŒä¸€ä¸ªæ•°æ®ï¼Œåœ¨ä¸åŒå½¢çŠ¶çš„å›¾è¡¨é‡Œï¼Œä¼šè®²å‡ºå®Œå…¨ä¸åŒçš„æ•…äº‹ã€‚</p>
</li>
</ul>
<h3 data-id="heading-20">è¯¯å¯¼æ‰‹æ³•ä¸‰ï¼šé€‰æ‹©æ€§å‘ˆç°æ•°æ®ï¼ˆæ–­ç« å–ä¹‰ï¼‰</h3>
<ul>
<li><strong>æ“ä½œæ–¹æ³•</strong>ï¼š<strong>åªå±•ç¤ºå¯¹è®ºç‚¹æœ‰åˆ©çš„æ—¶é—´æ®µ</strong>ï¼Œéšè—ä¸åˆ©çš„æ•°æ®ã€‚</li>
<li><strong>ä¾‹å­</strong>ï¼šåªå±•ç¤ºä¸Šé¢æ•°æ®ä¸­æœ€å3ä¸ªæœˆÂ <code>[112, 115, 118]</code>ã€‚</li>
<li><strong>è¯¯å¯¼æ•ˆæœ</strong>ï¼šâ€œæœ¬å…¬å¸æœ€è¿‘ä¸€å­£åº¦è¥æ”¶å¼ºåŠ²å¢é•¿ï¼â€â€”â€”è¿™æ˜¯äº‹å®ï¼Œä½†å®ƒéšè—äº†å…¨å¹´å¢é•¿å¹³ç¼“çš„æ•´ä½“èƒŒæ™¯ã€‚å¦‚æœé€‰å–1æœˆã€6æœˆã€12æœˆä¸‰ä¸ªç‚¹ï¼Œç”šè‡³å¯ä»¥è¿å‡ºä¸€æ¡æ›´é™¡çš„ç›´çº¿ã€‚</li>
<li><strong>å¦‚ä½•è¯†ç ´</strong>ï¼šè´¨ç–‘<strong>æ—¶é—´èŒƒå›´</strong>ã€‚â€œä¸ºä»€ä¹ˆä»è¿™æ—¶å¼€å§‹ï¼Ÿåˆ°è¿™æ—¶ç»“æŸï¼Ÿâ€ è¦æ±‚æŸ¥çœ‹æ›´é•¿æ—¶é—´è·¨åº¦çš„å®Œæ•´æ•°æ®ã€‚</li>
</ul>
<h3 data-id="heading-21">è¯¯å¯¼æ‰‹æ³•å››ï¼šä½¿ç”¨éçº¿æ€§åˆ»åº¦ï¼ˆé«˜é˜¶è¯¯å¯¼ï¼‰</h3>
<ul>
<li>
<p><strong>æ“ä½œæ–¹æ³•</strong>ï¼šåœ¨åº”è¯¥ä½¿ç”¨çº¿æ€§åˆ»åº¦ï¼ˆå‡åŒ€é—´éš”ï¼‰çš„è½´ä¸Šï¼Œä½¿ç”¨<strong>å¯¹æ•°åˆ»åº¦</strong>ã€‚</p>
</li>
<li>
<p><strong>å¯¹æ•°åˆ»åº¦çš„æ­£å½“ç”¨é€”</strong>ï¼šæ˜¾ç¤ºè·¨è¶Šå¤šä¸ªæ•°é‡çº§çš„æ•°æ®ï¼ˆæ¯”å¦‚ä»1åˆ°1,000,000ï¼‰çš„å¢é•¿<strong>ç‡</strong>ï¼ˆç™¾åˆ†æ¯”ï¼‰ï¼Œä¾‹å¦‚çœ‹ç—…æ¯’ä¼ æ’­é€Ÿåº¦ã€å›½å®¶GDPé•¿æœŸè¶‹åŠ¿ã€‚</p>
</li>
<li>
<p><strong>è¯¯å¯¼æ•ˆæœ</strong>ï¼šå¦‚æœæ•°æ®é‡çº§å·®å¼‚ä¸å¤§ï¼ˆå¦‚æˆ‘ä»¬çš„è¥æ”¶æ•°æ®ï¼‰ï¼Œç”¨å¯¹æ•°åˆ»åº¦ä¼š<strong>ä¸¥é‡å‹å¹³è¶‹åŠ¿</strong>ï¼Œè®©å¢é•¿çœ‹èµ·æ¥å¾®ä¸è¶³é“ã€‚</p>
</li>
<li>
<p><strong>å¦‚ä½•è¯†ç ´</strong>ï¼šæŸ¥çœ‹åæ ‡è½´æ ‡æ³¨ã€‚çº¿æ€§åˆ»åº¦ï¼š<code>0, 50, 100, 150...</code>ï¼›å¯¹æ•°åˆ»åº¦ï¼š<code>1, 10, 100, 1000...</code>Â æˆ–æ˜ç¡®æ ‡æœ‰â€œå¯¹æ•°åˆ»åº¦â€ã€‚</p>
</li>
</ul>
<h3 data-id="heading-22">å…¶ä»–å¸¸è§è¯¯å¯¼æ‰‹æ³•</h3>
<ol>
<li><strong>è¿æ¥ä¸åº”è¿æ¥çš„ç‚¹</strong>ï¼šå¦‚æœæ•°æ®ç‚¹ä»£è¡¨ç‹¬ç«‹çš„ã€éè¿ç»­çš„ç±»åˆ«ï¼ˆå¦‚â€œè‹¹æœã€é¦™è•‰ã€æ©™å­â€çš„é”€é‡ï¼‰ï¼Œç”¨çº¿è¿èµ·æ¥æš—ç¤ºä¸€ç§è¶‹åŠ¿æˆ–è¿ç»­æ€§ï¼Œè¿™æ˜¯è¯¯å¯¼çš„ã€‚<strong>çº¿å½¢å›¾åªåº”ç”¨äºè¿ç»­æ•°æ®ï¼ˆå¦‚æ—¶é—´åºåˆ—ï¼‰ã€‚</strong></li>
<li><strong>æ··æ·†ç›¸å…³æ€§ä¸å› æœæ€§</strong>ï¼šä¸¤æ¡è¶‹åŠ¿çº¿èµ°åŠ¿ç›¸ä¼¼ï¼Œå°±æ–­è¨€â€œAå¯¼è‡´Bâ€ã€‚ï¼ˆä¾‹å¦‚ï¼šâ€œå†°æ·‡æ·‹é”€é‡ä¸Šå‡æ—¶ï¼Œæººæ°´äººæ•°ä¹Ÿä¸Šå‡ï¼Œæ‰€ä»¥å†°æ·‡æ·‹å¯¼è‡´æººæ°´ï¼Ÿâ€ å®é™…æ˜¯ä¸¤è€…éƒ½å—å¤å¤©é«˜æ¸©å½±å“ã€‚ï¼‰</li>
<li><strong>ä¸æ ‡æ³¨å…³é”®äº‹ä»¶</strong>ï¼šåœ¨è¶‹åŠ¿çªç„¶å˜åŒ–æ—¶ï¼ˆå¦‚éª¤é™ï¼‰ï¼Œä¸æ ‡æ³¨å¯èƒ½çš„åŸå› ï¼ˆå¦‚â€œä¸»è¦ç«äº‰å¯¹æ‰‹å‘å¸ƒæ–°å“â€ï¼‰ï¼Œè®©äººæ— æ³•æ­£ç¡®è§£è¯»æ•°æ®ã€‚</li>
</ol>
<hr/>
<h3 data-id="heading-23">æ€»ç»“ï¼šä¸€å¼ â€œé˜²è¯¯å¯¼â€æ£€æŸ¥æ¸…å•</h3>
<p>å½“ä½ çœ‹åˆ°ä»»ä½•ä¸€ä¸ªçº¿å½¢å›¾æ—¶ï¼Œè¯·å…»æˆä¹ æƒ¯ï¼Œå¿«é€Ÿæ ¸å¯¹ä»¥ä¸‹é—®é¢˜ï¼š</p>








































<table><thead><tr><th>æ£€æŸ¥é¡¹</th><th>è¯šå®å›¾è¡¨ç‰¹å¾</th><th>è¯¯å¯¼æ€§è­¦æŠ¥</th></tr></thead><tbody><tr><td><strong>1. çºµè½´èµ·ç‚¹</strong></td><td>é€šå¸¸ä»0å¼€å§‹</td><td><strong>çºµè½´è¢«æˆªæ–­</strong>ï¼Œèµ·ç‚¹è¿œå¤§äº0</td></tr><tr><td><strong>2. åæ ‡è½´åˆ»åº¦</strong></td><td>åˆ»åº¦å‡åŒ€ï¼ˆçº¿æ€§ï¼‰</td><td>ä½¿ç”¨<strong>å¯¹æ•°åˆ»åº¦</strong>ä½†æœªæ˜ç¡®å‘ŠçŸ¥æˆ–ç†ç”±ä¸å……åˆ†</td></tr><tr><td><strong>3. å›¾è¡¨é•¿å®½æ¯”</strong></td><td>æ¯”ä¾‹é€‚ä¸­ï¼Œå¡åº¦è‡ªç„¶</td><td>å›¾å½¢è¢«<strong>å¼‚å¸¸å‹æ‰æˆ–æ‹‰é«˜</strong>ï¼Œå¯¼è‡´è¶‹åŠ¿å¤±çœŸ</td></tr><tr><td><strong>4. æ•°æ®å®Œæ•´æ€§</strong></td><td>å±•ç¤ºäº†åˆç†ã€å®Œæ•´çš„æ—¶é—´æ®µ</td><td><strong>æ—¶é—´æ®µé€‰æ‹©å¯ç–‘</strong>ï¼Œå¯èƒ½éšè—äº†é‡è¦å‰æœŸ/åæœŸæ•°æ®</td></tr><tr><td><strong>5. æ•°æ®è¿ç»­æ€§</strong></td><td>æ•°æ®ç‚¹ä»£è¡¨è¿ç»­å˜é‡ï¼ˆå¦‚æ—¶é—´ï¼‰</td><td>ç”¨çº¿è¿æ¥äº†<strong>ç‹¬ç«‹ä¸è¿ç»­</strong>çš„ç±»åˆ«æ•°æ®</td></tr><tr><td><strong>6. å› æœæ–­è¨€</strong></td><td>è°¨æ…æè¿°â€œä¼´éšå‘ç”Ÿâ€çš„è¶‹åŠ¿</td><td>ä»…å‡­æ›²çº¿ç›¸ä¼¼å°±å£°ç§°â€œå¯¼è‡´â€</td></tr></tbody></table>
<p><strong>æ ¸å¿ƒå¿ƒæ³•</strong>ï¼šçº¿å½¢å›¾çš„æ ¸å¿ƒæ˜¯å±•ç¤º<strong>è¶‹åŠ¿</strong>ã€‚ä»»ä½•è®©è¶‹åŠ¿çš„è§†è§‰<strong>æ–œç‡</strong>å‘ç”Ÿéæ•°æ®æœ¬èº«æ”¹å˜çš„æ“ä½œï¼Œéƒ½å¯èƒ½æ˜¯è¯¯å¯¼ã€‚</p>
<p><strong>ç»™ä½ çš„å»ºè®®</strong>ï¼šä½œä¸ºè¯»è€…ï¼Œä¿æŒæ‰¹åˆ¤æ€§æ€ç»´ï¼Œæ°¸è¿œå¤šçœ‹ä¸¤çœ¼åæ ‡è½´ã€‚ä½œä¸ºåˆ¶ä½œè€…ï¼Œåšå®ˆè¯šä¿¡ï¼Œ<strong>çºµè½´ä»0å¼€å§‹æ˜¯é»„é‡‘å‡†åˆ™</strong>ï¼ˆé™¤éæœ‰æç‰¹æ®Šçš„æ­£å½“ç†ç”±å¹¶æ˜ç¡®æ ‡æ³¨ï¼‰ï¼Œé€‰æ‹©åˆç†çš„æ—¶é—´èŒƒå›´ï¼Œè®©ä½ çš„æ•°æ®çœŸå®åœ°è‡ªæˆ‘è¡¨è¾¾ã€‚</p>
<p>ç†è§£è¿™äº›åï¼Œä½ ä¸ä»…èƒ½è¯†ç ´å¤§å¤šæ•°æ•°æ®è¯¡è®¡ï¼Œä¹Ÿèƒ½åšå‡ºæ›´ä¸“ä¸šã€æ›´ä»¤äººä¿¡æœçš„å›¾è¡¨ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[WPFæ‹–æ‹½åŠŸèƒ½é—®é¢˜åˆ†æä¸è§£å†³æ–¹æ¡ˆ]]></title>    <link>https://juejin.cn/post/7593356633636569122</link>    <guid>https://juejin.cn/post/7593356633636569122</guid>    <pubDate>2026-01-10T16:47:56.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7593356633636569122" data-draft-id="7593262196844789812" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="WPFæ‹–æ‹½åŠŸèƒ½é—®é¢˜åˆ†æä¸è§£å†³æ–¹æ¡ˆ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-10T16:47:56.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="guchen66"/> <meta itemprop="url" content="https://juejin.cn/user/3191200923270394"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            WPFæ‹–æ‹½åŠŸèƒ½é—®é¢˜åˆ†æä¸è§£å†³æ–¹æ¡ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3191200923270394/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    guchen66
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-10T16:47:56.000Z" title="Sat Jan 10 2026 16:47:56 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    4
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">é—®é¢˜æè¿°</h2>
<p>åœ¨WPFé¡¹ç›®ä¸­ä½¿ç”¨ <code>xmlns:i="http://schemas.microsoft.com/xaml/behaviors"</code> å®ç°æ‹–æ‹½åŠŸèƒ½æ—¶ï¼Œå½“åœ¨UserControlä¸­åŒæ—¶ä½¿ç”¨å¤šä¸ªäº‹ä»¶è§¦å‘å™¨æ—¶ï¼Œ<code>MouseLeftButtonDown</code> äº‹ä»¶ä¸èµ·ä½œç”¨ã€‚å³ä½¿æ›´æ¢ä¸º <code>PreviewMouseLeftButtonDown</code> äº‹ä»¶ï¼Œé—®é¢˜ä»ç„¶å­˜åœ¨ã€‚</p>
<h2 data-id="heading-1">æ ¹æœ¬åŸå› åˆ†æ</h2>
<h3 data-id="heading-2">1. ContentControlçš„é»˜è®¤æ¨¡æ¿é—®é¢˜</h3>
<p><code>ContentControl</code> çš„é»˜è®¤æ¨¡æ¿åœ¨åµŒå…¥Contentæ—¶ï¼Œä¼šç”Ÿæˆä¸€ä¸ªæ— èƒŒæ™¯ã€æ— å‘½ä¸­æµ‹è¯•åŒºçš„ <code>ContentPresenter</code>ã€‚è¿™å¯¼è‡´ä½ çš„ <code>HeaderView</code>ï¼ˆUserControlï¼‰è¢«å½“æˆé€»è¾‘å­æ ‘å¡è¿›å»ä»¥åï¼Œå®é™…æ¸²æŸ“å°ºå¯¸è¢« <code>ContentPresenter</code> å‹æ‰ï¼Œé¼ æ ‡æ ¹æœ¬æ— æ³•å‘½ä¸­å®ƒï¼Œéš§é“äº‹ä»¶è¿èµ·ç‚¹éƒ½æ²¡æœ‰ï¼Œè§¦å‘å™¨å½“ç„¶æ°¸è¿œè¿›ä¸æ¥ã€‚</p>
<h3 data-id="heading-3">2. èƒŒæ™¯è‰²ä¸å‘½ä¸­æµ‹è¯•çš„å…³ç³»</h3>
<p>å½“æ§ä»¶çš„ <code>Background</code> ä¸º <code>null</code> æ—¶ï¼Œé¼ æ ‡äº‹ä»¶ä¼šç›´æ¥ç©¿é€æ§ä»¶ï¼Œä¸ä¼šè§¦å‘ä»»ä½•äº‹ä»¶ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæœ‰æ—¶å€™æ‹–æ‹½åŠŸèƒ½ä¼šçªç„¶å¤±æ•ˆâ€”â€”å¯èƒ½æ˜¯ä½ åˆ é™¤äº†æ§ä»¶çš„èƒŒæ™¯è‰²ã€‚</p>
<h2 data-id="heading-4">è§£å†³æ–¹æ¡ˆ</h2>
<h3 data-id="heading-5">1. éªŒè¯é—®é¢˜</h3>
<p>åœ¨ <code>HeaderView</code> çš„æ ¹èŠ‚ç‚¹ä¸´æ—¶ç¡¬å†™æ­»å°ºå¯¸å’Œé¢œè‰²ï¼ŒéªŒè¯ContentControlæ˜¯å¦æŠŠå†…å®¹å‹æ²¡äº†ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">UserControl</span> <span class="hljs-attr">...</span>&gt;</span>
 Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">Border</span> <span class="hljs-attr">Width</span>=<span class="hljs-string">"300"</span> <span class="hljs-attr">Height</span>=<span class="hljs-string">"50"</span> <span class="hljs-attr">Background</span>=<span class="hljs-string">"Red"</span>&gt;</span> Â  <span class="hljs-comment">&lt;!-- å¿…é¡»èƒ½çœ‹åˆ°çº¢è‰²æ¡ --&gt;</span>
 Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">i:Interaction.Triggers</span>&gt;</span>
 Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">i:EventTrigger</span> <span class="hljs-attr">EventName</span>=<span class="hljs-string">"PreviewMouseLeftButtonDown"</span>&gt;</span>
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">i:InvokeCommandAction</span> <span class="hljs-attr">Command</span>=<span class="hljs-string">"{Binding TestCommand}"</span>/&gt;</span>
 Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;/<span class="hljs-name">i:EventTrigger</span>&gt;</span>
 Â  Â  Â  Â <span class="hljs-tag">&lt;/<span class="hljs-name">i:Interaction.Triggers</span>&gt;</span>
 Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">TextBlock</span> <span class="hljs-attr">Text</span>=<span class="hljs-string">"Header"</span> <span class="hljs-attr">HorizontalAlignment</span>=<span class="hljs-string">"Center"</span> <span class="hljs-attr">VerticalAlignment</span>=<span class="hljs-string">"Center"</span>/&gt;</span>
 Â  Â <span class="hljs-tag">&lt;/<span class="hljs-name">Border</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">UserControl</span>&gt;</span>
</code></pre>
<p>è¿è¡Œåï¼Œå¦‚æœçª—å£é¡¶éƒ¨æ²¡æœ‰å‡ºç° 300Ã—50 çš„çº¢è‰²çŸ©å½¢ï¼Œå°±è¯´æ˜ <code>ContentControl</code> æŠŠå†…å®¹å‹æ²¡äº†ã€‚</p>
<h3 data-id="heading-6">2. è®©ContentControlåˆ«æŠŠå­çº§å‹æ‰</h3>
<h4 data-id="heading-7">æ–¹æ¡ˆAï¼šç»™ContentControlæ˜¾å¼æ¨¡æ¿ï¼Œè®©ContentPresenterå¡«å……æ»¡</h4>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ContentControl</span> <span class="hljs-attr">Content</span>=<span class="hljs-string">"{Binding HeaderViewModel}"</span>
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-attr">DockPanel.Dock</span>=<span class="hljs-string">"Top"</span> <span class="hljs-attr">Height</span>=<span class="hljs-string">"50"</span>&gt;</span>
 Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">ContentControl.Template</span>&gt;</span>
 Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">ControlTemplate</span> <span class="hljs-attr">TargetType</span>=<span class="hljs-string">"ContentControl"</span>&gt;</span>
 Â  Â  Â  Â  Â  Â <span class="hljs-comment">&lt;!-- å…³é”®ï¼šBackground ä¸èƒ½ä¸º nullï¼Œå¦åˆ™ç»§ç»­ç©¿é€ --&gt;</span>
 Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">Border</span> <span class="hljs-attr">Background</span>=<span class="hljs-string">"Transparent"</span>&gt;</span>
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">ContentPresenter</span>/&gt;</span>
 Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;/<span class="hljs-name">Border</span>&gt;</span>
 Â  Â  Â  Â <span class="hljs-tag">&lt;/<span class="hljs-name">ControlTemplate</span>&gt;</span>
 Â  Â <span class="hljs-tag">&lt;/<span class="hljs-name">ContentControl.Template</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">ContentControl</span>&gt;</span>
</code></pre>
<h4 data-id="heading-8">æ–¹æ¡ˆBï¼šç›´æ¥ç”¨BorderåŒ…ä¸€å±‚ï¼Œåˆ«å†è®©ContentControlæ’æ‰‹</h4>
<pre><code class="hljs language-ini" lang="ini">&lt;Border <span class="hljs-attr">DockPanel.Dock</span>=<span class="hljs-string">"Top"</span> Height=<span class="hljs-string">"50"</span> Background=<span class="hljs-string">"Transparent"</span>&gt;
 Â  Â &lt;ContentControl <span class="hljs-attr">Content</span>=<span class="hljs-string">"{Binding HeaderViewModel}"</span>/&gt;
&lt;/Border&gt;
</code></pre>
<h3 data-id="heading-9">3. ç¡®ä¿DataContextæ­£ç¡®</h3>
<p>å¦‚æœçº¢è‰²æ¡å·²å‡ºç°ï¼Œä½†ä»ä¸è¿›å‘½ä»¤ï¼Œå¯ä»¥åœ¨ <code>HeaderView</code> æ„é€ å‡½æ•°é‡ŒåŠ ä¸€è¡Œä»£ç åç½®ç›‘å¬ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">HeaderView</span>()</span>
{
 Â  Â InitializeComponent();
 Â  Â <span class="hljs-keyword">this</span>.PreviewMouseLeftButtonDown += (s, e) =&gt;
 Â  Â  Â  Â Console.WriteLine(<span class="hljs-string">$"[ä»£ç åç½®] éš§é“äº‹ä»¶ Source=<span class="hljs-subst">{e.Source.GetType().Name}</span>"</span>);
}
</code></pre>
<ul>
<li>æ§åˆ¶å°æ— è¾“å‡º â†’ ç‰©ç†å‘½ä¸­ä¸åˆ°ï¼ˆå›åˆ°ç¬¬2æ­¥ç»§ç»­æ”¾å¤§å°ºå¯¸ï¼‰</li>
<li>æ§åˆ¶å°æœ‰è¾“å‡ºï¼Œä½†è§¦å‘å™¨ä¸æ‰§è¡Œ â†’ æ£€æŸ¥DataContextæ˜¯å¦æ­£ç¡®æˆ–å‘½ä»¤æ˜¯å¦ä¸ºnull</li>
</ul>
<h2 data-id="heading-10">æœ€ä½³å®è·µ</h2>
<h3 data-id="heading-11">1. é€æ˜æ§ä»¶æƒ³æ”¶åˆ°é¼ æ ‡äº‹ä»¶</h3>
<p>æ°¸è¿œè®°ä½ï¼šã€Œé€æ˜ã€â‰ ã€Œæ²¡æœ‰èƒŒæ™¯ã€</p>
<p>å¿…é¡»ç»™ <code>Background</code> ä¸€ä¸ªå€¼ï¼Œå“ªæ€•æ˜¯ <code>Transparent</code>ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- æ­£ç¡®ï¼šé€æ˜ä½†å¯å‘½ä¸­ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">Border</span> <span class="hljs-attr">Background</span>=<span class="hljs-string">"Transparent"</span> <span class="hljs-attr">...</span>/&gt;</span>
â€‹
<span class="hljs-comment">&lt;!-- é”™è¯¯ï¼šç©¿é€ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">Border</span> <span class="hljs-attr">...</span>/&gt;</span>
</code></pre>
<h3 data-id="heading-12">2. å…¨å±€æ ·å¼è§£å†³èƒŒæ™¯é—®é¢˜</h3>
<p>å¦‚æœä½ å«Œæ¯å±‚éƒ½è¦å†™ <code>Background="Transparent"</code> éº»çƒ¦ï¼Œå¯ä»¥ç»™æ‰€æœ‰ <code>UserControl</code> ç»Ÿä¸€å†™ä¸€æ¡å…¨å±€æ ·å¼ï¼Œä¸€æ¬¡æ€§è§£å†³ï¼š</p>
<p>åœ¨ <code>App.xaml</code> ä¸­æ·»åŠ ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Application.Resources</span>&gt;</span>
 Â  Â <span class="hljs-comment">&lt;!-- è®©æ‰€æœ‰ UserControl çš„æ ¹ Border é»˜è®¤å¸¦é€æ˜èƒŒæ™¯ --&gt;</span>
 Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">Style</span> <span class="hljs-attr">TargetType</span>=<span class="hljs-string">"Border"</span> <span class="hljs-attr">x:Key</span>=<span class="hljs-string">"UcRootBorder"</span>&gt;</span><span class="xml">
 Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">Setter</span> <span class="hljs-attr">Property</span>=<span class="hljs-string">"Background"</span> <span class="hljs-attr">Value</span>=<span class="hljs-string">"Transparent"</span>/&gt;</span>
 Â  Â </span><span class="hljs-tag">&lt;/<span class="hljs-name">Style</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">Application.Resources</span>&gt;</span>
</code></pre>
<p>ç„¶ååœ¨ä½ çš„ <code>UserControl</code> é‡Œä½¿ç”¨ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">UserControl</span> <span class="hljs-attr">...</span>&gt;</span>
 Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">Border</span> <span class="hljs-attr">Style</span>=<span class="hljs-string">"{StaticResource UcRootBorder}"</span>&gt;</span>
 Â  Â  Â  Â <span class="hljs-comment">&lt;!-- è§¦å‘å™¨ã€å†…å®¹éšä¾¿å†™ --&gt;</span>
 Â  Â <span class="hljs-tag">&lt;/<span class="hljs-name">Border</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">UserControl</span>&gt;</span>
</code></pre>
<h2 data-id="heading-13">æ€»ç»“</h2>
<p>ContentControl é»˜è®¤æ¨¡æ¿é‡Œçš„ ContentPresenter æ²¡æœ‰èƒŒæ™¯ä¸”å¸¸è¢«å‹æ‰ï¼Œå¯¼è‡´ä½ çš„ HeaderViewï¼ˆUserControlï¼‰æ ¹æœ¬ã€Œç¢°ä¸åˆ°ã€é¼ æ ‡ï¼Œéš§é“äº‹ä»¶è‡ªç„¶èµ·ä¸æ¥ã€‚</p>
<p>ç»™ ContentControl å¥—ä¸€ä¸ª <code>Background="Transparent"</code> çš„ Borderï¼Œæˆ–è®©å®ƒå¡«å……æ»¡ï¼Œè§¦å‘å™¨ç«‹åˆ»æ¢å¤ã€‚</p>
<p><strong>ä¸€å¥è¯è®°ä½</strong>ï¼šé€æ˜æ§ä»¶æƒ³æ”¶åˆ°é¼ æ ‡äº‹ä»¶ï¼ŒèƒŒæ™¯é¢å¿…é¡»é nullâ€”â€”å†™ <code>Background="Transparent"</code> å°±è¡Œï¼Œåˆ é¢œè‰²å°±ç­‰äºåˆ äº‹ä»¶ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»€ä¹ˆæ˜¯ Vue 3 ä¸­çš„ `defineEmits`ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7593630465379336230</link>    <guid>https://juejin.cn/post/7593630465379336230</guid>    <pubDate>2026-01-11T03:24:23.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7593630465379336230" data-draft-id="7593528990848237619" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»€ä¹ˆæ˜¯ Vue 3 ä¸­çš„ `defineEmits`ï¼Ÿ"/> <meta itemprop="keywords" content="Vue.js"/> <meta itemprop="datePublished" content="2026-01-11T03:24:23.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åŒ—è¾°alk"/> <meta itemprop="url" content="https://juejin.cn/user/1772855673241352"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»€ä¹ˆæ˜¯ Vue 3 ä¸­çš„ `defineEmits`ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1772855673241352/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åŒ—è¾°alk
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-11T03:24:23.000Z" title="Sun Jan 11 2026 03:24:23 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">1. å¼•è¨€</h2>
<h3 data-id="heading-1">Vue 3 çš„ Composition API ç®€ä»‹</h3>
<p>Vue 3 å¼•å…¥äº† Composition APIï¼Œæ—¨åœ¨è§£å†³ Options API åœ¨å¤æ‚ç»„ä»¶ä¸­çš„å±€é™æ€§ã€‚Composition API æä¾›äº†ä¸€ç§æ›´çµæ´»çš„æ–¹å¼æ¥ç»„ç»‡å’Œå¤ç”¨é€»è¾‘ä»£ç ã€‚</p>
<h3 data-id="heading-2"><code>defineEmits</code> çš„ä½œç”¨ä¸ä¼˜åŠ¿</h3>
<p><code>defineEmits</code> æ˜¯ Vue 3 ä¸­ç”¨äºå®šä¹‰ç»„ä»¶äº‹ä»¶çš„æ–¹æ³•ï¼Œå®ƒå…è®¸å¼€å‘è€…åœ¨ <code>setup()</code> å‡½æ•°ä¸­å®šä¹‰å’Œè§¦å‘äº‹ä»¶ã€‚<code>defineEmits</code> çš„ä¼˜åŠ¿åŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>ç±»å‹å®‰å…¨</strong>ï¼šæ”¯æŒ TypeScriptï¼Œæä¾›æ›´å¥½çš„ç±»å‹æ¨æ–­å’Œä»£ç æç¤ºã€‚</li>
<li><strong>çµæ´»æ€§</strong>ï¼šå…è®¸åŠ¨æ€å®šä¹‰äº‹ä»¶ï¼Œé€‚åº”å¤æ‚çš„ä¸šåŠ¡åœºæ™¯ã€‚</li>
<li><strong>ä»£ç ç®€æ´</strong>ï¼šé€šè¿‡ <code>defineEmits</code> å®šä¹‰äº‹ä»¶ï¼Œå‡å°‘å†—ä½™ä»£ç ã€‚</li>
</ul>
<h3 data-id="heading-3">æœ¬æ–‡çš„ç›®æ ‡ä¸ç»“æ„</h3>
<p>æœ¬æ–‡æ—¨åœ¨å…¨é¢è§£æ Vue 3 ä¸­çš„ <code>defineEmits</code>ï¼Œå¹¶é€šè¿‡è¯¦ç»†çš„ä»£ç ç¤ºä¾‹å¸®åŠ©è¯»è€…æŒæ¡è¿™äº›æŠ€å·§ã€‚æ–‡ç« ç»“æ„å¦‚ä¸‹ï¼š</p>
<ol>
<li>ä»‹ç» <code>defineEmits</code> çš„åŸºç¡€çŸ¥è¯†å’Œç”¨æ³•ã€‚</li>
<li>æ¢è®¨ <code>defineEmits</code> åœ¨ç»„ä»¶é€šä¿¡ä¸­çš„åº”ç”¨ã€‚</li>
<li>æä¾›æ€§èƒ½ä¼˜åŒ–å»ºè®®å’Œå®æˆ˜æ¡ˆä¾‹ã€‚</li>
</ol>
<hr/>
<h2 data-id="heading-4">2. <code>defineEmits</code> çš„åŸºç¡€</h2>
<h3 data-id="heading-5"><code>defineEmits</code> çš„å®šä¹‰ä¸ä½¿ç”¨</h3>
<p><code>defineEmits</code> æ˜¯ Vue 3 ä¸­ç”¨äºå®šä¹‰ç»„ä»¶äº‹ä»¶çš„æ–¹æ³•ï¼Œé€šå¸¸åœ¨ <code>setup()</code> å‡½æ•°ä¸­ä½¿ç”¨ã€‚</p>
<h4 data-id="heading-6">ç¤ºä¾‹ä»£ç </h4>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;button @click="increment"&gt;Increment&lt;/button&gt;
&lt;/template&gt;

&lt;script&gt;
import { defineEmits } from 'vue';

export default {
  setup() {
    const emit = defineEmits(['increment']);

    const increment = () =&gt; {
      emit('increment');
    };

    return {
      increment,
    };
  },
};
&lt;/script&gt;
</code></pre>
<h3 data-id="heading-7"><code>defineEmits</code> çš„å‚æ•°ä¸è¿”å›å€¼</h3>
<p><code>defineEmits</code> æ¥æ”¶ä¸€ä¸ªäº‹ä»¶åç§°æ•°ç»„ä½œä¸ºå‚æ•°ï¼Œè¿”å›ä¸€ä¸ª <code>emit</code> å‡½æ•°ã€‚</p>
<h4 data-id="heading-8">ç¤ºä¾‹ä»£ç </h4>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;button @click="increment"&gt;Increment&lt;/button&gt;
&lt;/template&gt;

&lt;script&gt;
import { defineEmits } from 'vue';

export default {
  setup() {
    const emit = defineEmits(['increment']);

    const increment = () =&gt; {
      emit('increment');
    };

    return {
      increment,
    };
  },
};
&lt;/script&gt;
</code></pre>
<h3 data-id="heading-9">ç¤ºä¾‹ï¼šç®€å•çš„ <code>defineEmits</code> ä½¿ç”¨</h3>
<p>é€šè¿‡ <code>defineEmits</code> å®šä¹‰ä¸€ä¸ª <code>increment</code> äº‹ä»¶ï¼Œå¹¶åœ¨æŒ‰é’®ç‚¹å‡»æ—¶è§¦å‘ã€‚</p>
<h4 data-id="heading-10">ç¤ºä¾‹ä»£ç </h4>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;button @click="increment"&gt;Increment&lt;/button&gt;
&lt;/template&gt;

&lt;script&gt;
import { defineEmits } from 'vue';

export default {
  setup() {
    const emit = defineEmits(['increment']);

    const increment = () =&gt; {
      emit('increment');
    };

    return {
      increment,
    };
  },
};
&lt;/script&gt;
</code></pre>
<hr/>
<h2 data-id="heading-11">3. <code>defineEmits</code> ä¸ç»„ä»¶é€šä¿¡</h2>
<h3 data-id="heading-12">ä½¿ç”¨ <code>defineEmits</code> å®ç°çˆ¶å­ç»„ä»¶é€šä¿¡</h3>
<p><code>defineEmits</code> ç”¨äºå®šä¹‰å­ç»„ä»¶çš„äº‹ä»¶ï¼Œçˆ¶ç»„ä»¶é€šè¿‡ç›‘å¬è¿™äº›äº‹ä»¶å®ç°é€šä¿¡ã€‚</p>
<h4 data-id="heading-13">ç¤ºä¾‹ä»£ç </h4>
<pre><code class="hljs language-vue" lang="vue">&lt;!-- çˆ¶ç»„ä»¶ --&gt;
&lt;template&gt;
  &lt;div&gt;
    &lt;ChildComponent @increment="handleIncrement" /&gt;
    &lt;p&gt;Count: {{ count }}&lt;/p&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
import ChildComponent from './ChildComponent.vue';

export default {
  components: {
    ChildComponent,
  },
  data() {
    return {
      count: 0,
    };
  },
  methods: {
    handleIncrement() {
      this.count++;
    },
  },
};
&lt;/script&gt;

&lt;!-- å­ç»„ä»¶ --&gt;
&lt;template&gt;
  &lt;button @click="increment"&gt;Increment&lt;/button&gt;
&lt;/template&gt;

&lt;script&gt;
import { defineEmits } from 'vue';

export default {
  setup() {
    const emit = defineEmits(['increment']);

    const increment = () =&gt; {
      emit('increment');
    };

    return {
      increment,
    };
  },
};
&lt;/script&gt;
</code></pre>
<h3 data-id="heading-14">ä½¿ç”¨ <code>defineEmits</code> å®ç°è·¨ç»„ä»¶é€šä¿¡</h3>
<p>é€šè¿‡ <code>provide</code> å’Œ <code>inject</code> å®ç°è·¨ç»„ä»¶é€šä¿¡ï¼Œç»“åˆ <code>defineEmits</code> è§¦å‘äº‹ä»¶ã€‚</p>
<h4 data-id="heading-15">ç¤ºä¾‹ä»£ç </h4>
<pre><code class="hljs language-vue" lang="vue">&lt;!-- ç¥–å…ˆç»„ä»¶ --&gt;
&lt;template&gt;
  &lt;div&gt;
    &lt;ChildComponent /&gt;
    &lt;p&gt;Count: {{ count }}&lt;/p&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
import { provide, ref } from 'vue';
import ChildComponent from './ChildComponent.vue';

export default {
  components: {
    ChildComponent,
  },
  setup() {
    const count = ref(0);

    const increment = () =&gt; {
      count.value++;
    };

    provide('increment', increment);

    return {
      count,
    };
  },
};
&lt;/script&gt;

&lt;!-- åä»£ç»„ä»¶ --&gt;
&lt;template&gt;
  &lt;button @click="increment"&gt;Increment&lt;/button&gt;
&lt;/template&gt;

&lt;script&gt;
import { inject } from 'vue';

export default {
  setup() {
    const increment = inject('increment');

    return {
      increment,
    };
  },
};
&lt;/script&gt;
</code></pre>
<h3 data-id="heading-16">ç¤ºä¾‹ï¼šåœ¨ <code>setup()</code> ä¸­ä½¿ç”¨ <code>defineEmits</code></h3>
<p>é€šè¿‡ <code>defineEmits</code> å®šä¹‰äº‹ä»¶ï¼Œå¹¶åœ¨ <code>setup()</code> ä¸­è§¦å‘ã€‚</p>
<h4 data-id="heading-17">ç¤ºä¾‹ä»£ç </h4>
<pre><code class="hljs language-vue" lang="vue">&lt;!-- çˆ¶ç»„ä»¶ --&gt;
&lt;template&gt;
  &lt;div&gt;
    &lt;ChildComponent @increment="handleIncrement" /&gt;
    &lt;p&gt;Count: {{ count }}&lt;/p&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
import ChildComponent from './ChildComponent.vue';

export default {
  components: {
    ChildComponent,
  },
  data() {
    return {
      count: 0,
    };
  },
  methods: {
    handleIncrement() {
      this.count++;
    },
  },
};
&lt;/script&gt;

&lt;!-- å­ç»„ä»¶ --&gt;
&lt;template&gt;
  &lt;button @click="increment"&gt;Increment&lt;/button&gt;
&lt;/template&gt;

&lt;script&gt;
import { defineEmits } from 'vue';

export default {
  setup() {
    const emit = defineEmits(['increment']);

    const increment = () =&gt; {
      emit('increment');
    };

    return {
      increment,
    };
  },
};
&lt;/script&gt;
</code></pre>
<hr/>
<h2 data-id="heading-18">4. <code>defineEmits</code> ä¸ TypeScript</h2>
<h3 data-id="heading-19">åœ¨ <code>defineEmits</code> ä¸­ä½¿ç”¨ TypeScript</h3>
<p>TypeScript æä¾›äº†å¼ºå¤§çš„ç±»å‹æ”¯æŒï¼Œå¯ä»¥åœ¨ <code>defineEmits</code> ä¸­ä½¿ç”¨ã€‚</p>
<h4 data-id="heading-20">ç¤ºä¾‹ä»£ç </h4>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;button @click="increment"&gt;Increment&lt;/button&gt;
&lt;/template&gt;

&lt;script lang="ts"&gt;
import { defineEmits, defineComponent } from 'vue';

export default defineComponent({
  setup() {
    const emit = defineEmits&lt;{
      (e: 'increment'): void;
    }&gt;();

    const increment = () =&gt; {
      emit('increment');
    };

    return {
      increment,
    };
  },
});
&lt;/script&gt;
</code></pre>
<h3 data-id="heading-21">ç±»å‹æ¨æ–­ä¸ç±»å‹å®‰å…¨</h3>
<p>TypeScript å¯ä»¥è‡ªåŠ¨æ¨æ–­ <code>defineEmits</code> çš„ç±»å‹ï¼Œå‡å°‘ç±»å‹é”™è¯¯ã€‚</p>
<h4 data-id="heading-22">ç¤ºä¾‹ä»£ç </h4>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;button @click="increment"&gt;Increment&lt;/button&gt;
&lt;/template&gt;

&lt;script lang="ts"&gt;
import { defineEmits, defineComponent } from 'vue';

export default defineComponent({
  setup() {
    const emit = defineEmits&lt;{
      (e: 'increment'): void;
    }&gt;();

    const increment = () =&gt; {
      emit('increment');
    };

    return {
      increment,
    };
  },
});
&lt;/script&gt;
</code></pre>
<h3 data-id="heading-23">ç¤ºä¾‹ï¼šç±»å‹åŒ–çš„ <code>defineEmits</code></h3>
<p>é€šè¿‡ TypeScript å¢å¼º <code>defineEmits</code> çš„ç±»å‹å®‰å…¨ã€‚</p>
<h4 data-id="heading-24">ç¤ºä¾‹ä»£ç </h4>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;button @click="increment"&gt;Increment&lt;/button&gt;
&lt;/template&gt;

&lt;script lang="ts"&gt;
import { defineEmits, defineComponent } from 'vue';

export default defineComponent({
  setup() {
    const emit = defineEmits&lt;{
      (e: 'increment'): void;
    }&gt;();

    const increment = () =&gt; {
      emit('increment');
    };

    return {
      increment,
    };
  },
});
&lt;/script&gt;
</code></pre>
<hr/>
<h2 data-id="heading-25">5. <code>defineEmits</code> çš„é«˜çº§ç”¨æ³•</h2>
<h3 data-id="heading-26">ä½¿ç”¨ <code>defineEmits</code> å®ç°å¤æ‚äº‹ä»¶å¤„ç†</h3>
<p>é€šè¿‡ <code>defineEmits</code> å®šä¹‰å¤æ‚äº‹ä»¶ï¼Œå¹¶åœ¨ <code>setup()</code> ä¸­å¤„ç†ã€‚</p>
<h4 data-id="heading-27">ç¤ºä¾‹ä»£ç </h4>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;button @click="handleClick"&gt;Click Me&lt;/button&gt;
&lt;/template&gt;

&lt;script&gt;
import { defineEmits } from 'vue';

export default {
  setup() {
    const emit = defineEmits(['click', 'custom-event']);

    const handleClick = () =&gt; {
      emit('click');
      emit('custom-event', 'Hello from child');
    };

    return {
      handleClick,
    };
  },
};
&lt;/script&gt;
</code></pre>
<h3 data-id="heading-28">ä½¿ç”¨ <code>defineEmits</code> å®ç°è‡ªå®šä¹‰äº‹ä»¶</h3>
<p>é€šè¿‡ <code>defineEmits</code> å®šä¹‰è‡ªå®šä¹‰äº‹ä»¶ï¼Œå¹¶åœ¨çˆ¶ç»„ä»¶ä¸­ç›‘å¬ã€‚</p>
<h4 data-id="heading-29">ç¤ºä¾‹ä»£ç </h4>
<pre><code class="hljs language-vue" lang="vue">&lt;!-- çˆ¶ç»„ä»¶ --&gt;
&lt;template&gt;
  &lt;div&gt;
    &lt;ChildComponent @custom-event="handleCustomEvent" /&gt;
    &lt;p&gt;Message: {{ message }}&lt;/p&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
import ChildComponent from './ChildComponent.vue';

export default {
  components: {
    ChildComponent,
  },
  data() {
    return {
      message: '',
    };
  },
  methods: {
    handleCustomEvent(payload) {
      this.message = payload;
    },
  },
};
&lt;/script&gt;

&lt;!-- å­ç»„ä»¶ --&gt;
&lt;template&gt;
  &lt;button @click="handleClick"&gt;Click Me&lt;/button&gt;
&lt;/template&gt;

&lt;script&gt;
import { defineEmits } from 'vue';

export default {
  setup() {
    const emit = defineEmits(['custom-event']);

    const handleClick = () =&gt; {
      emit('custom-event', 'Hello from child');
    };

    return {
      handleClick,
    };
  },
};
&lt;/script&gt;
</code></pre>
<h3 data-id="heading-30">ç¤ºä¾‹ï¼šåœ¨ <code>setup()</code> ä¸­å®ç°å¤æ‚äº‹ä»¶å¤„ç†</h3>
<p>é€šè¿‡ <code>defineEmits</code> å®šä¹‰å¤šä¸ªäº‹ä»¶ï¼Œå¹¶åœ¨ <code>setup()</code> ä¸­å¤„ç†ã€‚</p>
<h4 data-id="heading-31">ç¤ºä¾‹ä»£ç </h4>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;button @click="handleClick"&gt;Click Me&lt;/button&gt;
&lt;/template&gt;

&lt;script&gt;
import { defineEmits } from 'vue';

export default {
  setup() {
    const emit = defineEmits(['click', 'custom-event']);

    const handleClick = () =&gt; {
      emit('click');
      emit('custom-event', 'Hello from child');
    };

    return {
      handleClick,
    };
  },
};
&lt;/script&gt;
</code></pre>
<hr/>
<h2 data-id="heading-32">6. <code>defineEmits</code> çš„æ€§èƒ½ä¼˜åŒ–</h2>
<h3 data-id="heading-33">é¿å…ä¸å¿…è¦çš„äº‹ä»¶è§¦å‘</h3>
<p>é€šè¿‡æ¡ä»¶åˆ¤æ–­é¿å…ä¸å¿…è¦çš„äº‹ä»¶è§¦å‘ã€‚</p>
<h4 data-id="heading-34">ç¤ºä¾‹ä»£ç </h4>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;button @click="handleClick"&gt;Click Me&lt;/button&gt;
&lt;/template&gt;

&lt;script&gt;
import { defineEmits } from 'vue';

export default {
  setup() {
    const emit = defineEmits(['click']);

    const handleClick = () =&gt; {
      if (shouldEmit) {
        emit('click');
      }
    };

    return {
      handleClick,
    };
  },
};
&lt;/script&gt;
</code></pre>
<h3 data-id="heading-35">ä½¿ç”¨ <code>defineEmits</code> ä¼˜åŒ–äº‹ä»¶å¤„ç†æ€§èƒ½</h3>
<p>é€šè¿‡ <code>defineEmits</code> ä¼˜åŒ–äº‹ä»¶å¤„ç†é€»è¾‘ï¼Œå‡å°‘ä¸å¿…è¦çš„æ¸²æŸ“ã€‚</p>
<h4 data-id="heading-36">ç¤ºä¾‹ä»£ç </h4>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;button @click="handleClick"&gt;Click Me&lt;/button&gt;
&lt;/template&gt;

&lt;script&gt;
import { defineEmits } from 'vue';

export default {
  setup() {
    const emit = defineEmits(['click']);

    const handleClick = () =&gt; {
      emit('click');
    };

    return {
      handleClick,
    };
  },
};
&lt;/script&gt;
</code></pre>
<h3 data-id="heading-37">ç¤ºä¾‹ï¼šä¼˜åŒ– <code>defineEmits</code> çš„æ€§èƒ½</h3>
<p>é€šè¿‡æ¡ä»¶åˆ¤æ–­å’Œä¼˜åŒ–äº‹ä»¶å¤„ç†é€»è¾‘ï¼Œæå‡æ€§èƒ½ã€‚</p>
<h4 data-id="heading-38">ç¤ºä¾‹ä»£ç </h4>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;button @click="handleClick"&gt;Click Me&lt;/button&gt;
&lt;/template&gt;

&lt;script&gt;
import { defineEmits } from 'vue';

export default {
  setup() {
    const emit = defineEmits(['click']);

    const handleClick = () =&gt; {
      if (shouldEmit) {
        emit('click');
      }
    };

    return {
      handleClick,
    };
  },
};
&lt;/script&gt;
</code></pre>
<hr/>
<h2 data-id="heading-39">7. <code>defineEmits</code> çš„æµ‹è¯•ä¸è°ƒè¯•</h2>
<h3 data-id="heading-40">ä½¿ç”¨ Vitest æµ‹è¯• <code>defineEmits</code></h3>
<p>é€šè¿‡ Vitest æµ‹è¯• <code>defineEmits</code> çš„åŠŸèƒ½ã€‚</p>
<h4 data-id="heading-41">ç¤ºä¾‹ä»£ç </h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { mount } <span class="hljs-keyword">from</span> <span class="hljs-string">'@vue/test-utils'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">MyComponent</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'@/components/MyComponent.vue'</span>;

<span class="hljs-title function_">test</span>(<span class="hljs-string">'æµ‹è¯• defineEmits'</span>, <span class="hljs-keyword">async</span> () =&gt; {
  <span class="hljs-keyword">const</span> wrapper = <span class="hljs-title function_">mount</span>(<span class="hljs-title class_">MyComponent</span>);
  <span class="hljs-keyword">await</span> wrapper.<span class="hljs-title function_">find</span>(<span class="hljs-string">'button'</span>).<span class="hljs-title function_">trigger</span>(<span class="hljs-string">'click'</span>);
  <span class="hljs-title function_">expect</span>(wrapper.<span class="hljs-title function_">emitted</span>(<span class="hljs-string">'click'</span>)).<span class="hljs-title function_">toBeTruthy</span>();
});
</code></pre>
<h3 data-id="heading-42">ä½¿ç”¨ Vue Devtools è°ƒè¯• <code>defineEmits</code></h3>
<p>é€šè¿‡ Vue Devtools è°ƒè¯• <code>defineEmits</code> çš„äº‹ä»¶è§¦å‘ã€‚</p>
<h4 data-id="heading-43">ç¤ºä¾‹ä»£ç </h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åœ¨ç»„ä»¶ä¸­ä½¿ç”¨ console.log è°ƒè¯•</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-title function_">setup</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> emit = <span class="hljs-title function_">defineEmits</span>([<span class="hljs-string">'click'</span>]);

    <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleClick</span> = (<span class="hljs-params"/>) =&gt; {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Click event emitted'</span>);
      <span class="hljs-title function_">emit</span>(<span class="hljs-string">'click'</span>);
    };

    <span class="hljs-keyword">return</span> {
      handleClick,
    };
  },
};
</code></pre>
<h3 data-id="heading-44">ç¤ºä¾‹ï¼šæµ‹è¯•ä¸è°ƒè¯• <code>defineEmits</code></h3>
<p>é€šè¿‡ Vitest å’Œ Vue Devtools æµ‹è¯•ä¸è°ƒè¯• <code>defineEmits</code>ã€‚</p>
<h4 data-id="heading-45">ç¤ºä¾‹ä»£ç </h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { mount } <span class="hljs-keyword">from</span> <span class="hljs-string">'@vue/test-utils'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">MyComponent</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'@/components/MyComponent.vue'</span>;

<span class="hljs-title function_">test</span>(<span class="hljs-string">'æµ‹è¯• defineEmits'</span>, <span class="hljs-keyword">async</span> () =&gt; {
  <span class="hljs-keyword">const</span> wrapper = <span class="hljs-title function_">mount</span>(<span class="hljs-title class_">MyComponent</span>);
  <span class="hljs-keyword">await</span> wrapper.<span class="hljs-title function_">find</span>(<span class="hljs-string">'button'</span>).<span class="hljs-title function_">trigger</span>(<span class="hljs-string">'click'</span>);
  <span class="hljs-title function_">expect</span>(wrapper.<span class="hljs-title function_">emitted</span>(<span class="hljs-string">'click'</span>)).<span class="hljs-title function_">toBeTruthy</span>();
});
</code></pre>
<hr/>
<h2 data-id="heading-46">8. å®æˆ˜æ¡ˆä¾‹</h2>
<h3 data-id="heading-47">æ¡ˆä¾‹ä¸€ï¼šå®ç°ä¸€ä¸ªè®¡æ•°å™¨ç»„ä»¶</h3>
<p>é€šè¿‡ <code>defineEmits</code> å®ç°ä¸€ä¸ªè®¡æ•°å™¨ç»„ä»¶ï¼Œæ”¯æŒç‚¹å‡»æŒ‰é’®å¢åŠ è®¡æ•°ã€‚</p>
<h4 data-id="heading-48">ç¤ºä¾‹ä»£ç </h4>
<pre><code class="hljs language-vue" lang="vue">&lt;!-- çˆ¶ç»„ä»¶ --&gt;
&lt;template&gt;
  &lt;div&gt;
    &lt;ChildComponent @increment="handleIncrement" /&gt;
    &lt;p&gt;Count: {{ count }}&lt;/p&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
import ChildComponent from './ChildComponent.vue';

export default {
  components: {
    ChildComponent,
  },
  data() {
    return {
      count: 0,
    };
  },
  methods: {
    handleIncrement() {
      this.count++;
    },
  },
};
&lt;/script&gt;

&lt;!-- å­ç»„ä»¶ --&gt;
&lt;template&gt;
  &lt;button @click="increment"&gt;Increment&lt;/button&gt;
&lt;/template&gt;

&lt;script&gt;
import { defineEmits } from 'vue';

export default {
  setup() {
    const emit = defineEmits(['increment']);

    const increment = () =&gt; {
      emit('increment');
    };

    return {
      increment,
    };
  },
};
&lt;/script&gt;
</code></pre>
<h3 data-id="heading-49">æ¡ˆä¾‹äºŒï¼šå®ç°ä¸€ä¸ªè¡¨å•éªŒè¯ç»„ä»¶</h3>
<p>é€šè¿‡ <code>defineEmits</code> å®ç°ä¸€ä¸ªè¡¨å•éªŒè¯ç»„ä»¶ï¼Œæ”¯æŒæäº¤è¡¨å•æ—¶è§¦å‘éªŒè¯äº‹ä»¶ã€‚</p>
<h4 data-id="heading-50">ç¤ºä¾‹ä»£ç </h4>
<pre><code class="hljs language-vue" lang="vue">&lt;!-- çˆ¶ç»„ä»¶ --&gt;
&lt;template&gt;
  &lt;div&gt;
    &lt;ChildComponent @submit="handleSubmit" /&gt;
    &lt;p&gt;Validation Message: {{ message }}&lt;/p&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
import ChildComponent from './ChildComponent.vue';

export default {
  components: {
    ChildComponent,
  },
  data() {
    return {
      message: '',
    };
  },
  methods: {
    handleSubmit(isValid) {
      this.message = isValid ? 'Valid' : 'Invalid';
    },
  },
};
&lt;/script&gt;

&lt;!-- å­ç»„ä»¶ --&gt;
&lt;template&gt;
  &lt;form @submit.prevent="submit"&gt;
    &lt;input v-model="input" placeholder="Enter something" /&gt;
    &lt;button type="submit"&gt;Submit&lt;/button&gt;
  &lt;/form&gt;
&lt;/template&gt;

&lt;script&gt;
import { defineEmits, ref } from 'vue';

export default {
  setup() {
    const input = ref('');
    const emit = defineEmits(['submit']);

    const submit = () =&gt; {
      const isValid = input.value.length &gt; 0;
      emit('submit', isValid);
    };

    return {
      input,
      submit,
    };
  },
};
&lt;/script&gt;
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[toRef å’Œ toRefs è¯¦è§£åŠåº”ç”¨]]></title>    <link>https://juejin.cn/post/7593600903249854490</link>    <guid>https://juejin.cn/post/7593600903249854490</guid>    <pubDate>2026-01-11T03:28:20.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7593600903249854490" data-draft-id="7593607642552451098" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="toRef å’Œ toRefs è¯¦è§£åŠåº”ç”¨"/> <meta itemprop="keywords" content="Vue.js"/> <meta itemprop="datePublished" content="2026-01-11T03:28:20.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åŒ—è¾°alk"/> <meta itemprop="url" content="https://juejin.cn/user/1772855673241352"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            toRef å’Œ toRefs è¯¦è§£åŠåº”ç”¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1772855673241352/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åŒ—è¾°alk
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-11T03:28:20.000Z" title="Sun Jan 11 2026 03:28:20 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">1. å¼•è¨€</h2>
<h3 data-id="heading-1">ä¸ºä»€ä¹ˆéœ€è¦ <code>toRef</code> å’Œ <code>toRefs</code>ï¼Ÿ</h3>
<p>åœ¨ Vue 3 ä¸­ï¼Œå“åº”å¼ç³»ç»Ÿæ˜¯æ ¸å¿ƒç‰¹æ€§ä¹‹ä¸€ã€‚<code>ref</code> å’Œ <code>reactive</code> æ˜¯åˆ›å»ºå“åº”å¼æ•°æ®çš„ä¸¤ç§ä¸»è¦æ–¹å¼ã€‚ç„¶è€Œï¼Œåœ¨æŸäº›åœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬éœ€è¦æ›´çµæ´»åœ°å¤„ç†å“åº”å¼æ•°æ®ï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li><strong>å±€éƒ¨å“åº”å¼</strong>ï¼šå°†å¯¹è±¡çš„æŸä¸ªå±æ€§è½¬æ¢ä¸ºå“åº”å¼å¼•ç”¨ã€‚</li>
<li><strong>è§£æ„å“åº”å¼å¯¹è±¡</strong>ï¼šåœ¨è§£æ„å“åº”å¼å¯¹è±¡æ—¶ä¿æŒå…¶å“åº”æ€§ã€‚</li>
</ul>
<p><code>toRef</code> å’Œ <code>toRefs</code> æ­£æ˜¯ä¸ºäº†è§£å†³è¿™äº›é—®é¢˜è€Œè®¾è®¡çš„å·¥å…·å‡½æ•°ã€‚</p>
<h3 data-id="heading-2"><code>toRef</code> å’Œ <code>toRefs</code> çš„åº”ç”¨åœºæ™¯</h3>
<ul>
<li><strong>è¡¨å•å¤„ç†</strong>ï¼šå°†è¡¨å•å­—æ®µè½¬æ¢ä¸ºå“åº”å¼å¼•ç”¨ã€‚</li>
<li><strong>çŠ¶æ€ç®¡ç†</strong>ï¼šåœ¨ç»„ä»¶ä¹‹é—´å…±äº«çŠ¶æ€æ—¶ä¿æŒå“åº”æ€§ã€‚</li>
<li><strong>ç»„ä»¶é€šä¿¡</strong>ï¼šåœ¨çˆ¶ç»„ä»¶å’Œå­ç»„ä»¶ä¹‹é—´ä¼ é€’å“åº”å¼æ•°æ®ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-3">2. Vue 3 å“åº”å¼ç³»ç»Ÿç®€ä»‹</h2>
<h3 data-id="heading-4">å“åº”å¼ç³»ç»Ÿçš„æ ¸å¿ƒæ¦‚å¿µ</h3>
<p>Vue 3 çš„å“åº”å¼ç³»ç»ŸåŸºäº Proxy å®ç°ï¼Œå…·æœ‰ä»¥ä¸‹æ ¸å¿ƒæ¦‚å¿µï¼š</p>
<ul>
<li><strong>å“åº”å¼å¯¹è±¡</strong>ï¼šé€šè¿‡ <code>reactive</code> åˆ›å»ºçš„å¯¹è±¡ï¼Œå…¶å±æ€§æ˜¯å“åº”å¼çš„ã€‚</li>
<li><strong>å“åº”å¼å¼•ç”¨</strong>ï¼šé€šè¿‡ <code>ref</code> åˆ›å»ºçš„å€¼ï¼Œå…¶æœ¬èº«æ˜¯å“åº”å¼çš„ã€‚</li>
</ul>
<h3 data-id="heading-5"><code>ref</code> å’Œ <code>reactive</code> çš„åŸºæœ¬ç”¨æ³•</h3>
<ul>
<li><strong><code>ref</code></strong>ï¼šç”¨äºåˆ›å»ºå“åº”å¼å¼•ç”¨ã€‚
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { ref } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>;

<span class="hljs-keyword">const</span> count = <span class="hljs-title function_">ref</span>(<span class="hljs-number">0</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(count.<span class="hljs-property">value</span>); <span class="hljs-comment">// 0</span>
</code></pre>
</li>
<li><strong><code>reactive</code></strong>ï¼šç”¨äºåˆ›å»ºå“åº”å¼å¯¹è±¡ã€‚
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { reactive } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>;

<span class="hljs-keyword">const</span> state = <span class="hljs-title function_">reactive</span>({ <span class="hljs-attr">count</span>: <span class="hljs-number">0</span> });
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(state.<span class="hljs-property">count</span>); <span class="hljs-comment">// 0</span>
</code></pre>
</li>
</ul>
<hr/>
<h2 data-id="heading-6">3. <code>toRef</code> è¯¦è§£</h2>
<h3 data-id="heading-7"><code>toRef</code> çš„å®šä¹‰ä¸ä½œç”¨</h3>
<p><code>toRef</code> ç”¨äºå°†å¯¹è±¡çš„æŸä¸ªå±æ€§è½¬æ¢ä¸ºå“åº”å¼å¼•ç”¨ã€‚å®ƒçš„å®šä¹‰å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">function</span> toRef&lt;T <span class="hljs-keyword">extends</span> <span class="hljs-built_in">object</span>, K <span class="hljs-keyword">extends</span> keyof T&gt;(<span class="hljs-attr">object</span>: T, <span class="hljs-attr">key</span>: K): <span class="hljs-title class_">Ref</span>&lt;T[K]&gt;;
</code></pre>
<h3 data-id="heading-8"><code>toRef</code> çš„ä½¿ç”¨åœºæ™¯</h3>
<ul>
<li><strong>å±€éƒ¨å“åº”å¼</strong>ï¼šå°†å¯¹è±¡çš„æŸä¸ªå±æ€§è½¬æ¢ä¸ºå“åº”å¼å¼•ç”¨ã€‚
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { reactive, toRef } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>;

<span class="hljs-keyword">const</span> state = <span class="hljs-title function_">reactive</span>({ <span class="hljs-attr">count</span>: <span class="hljs-number">0</span> });
<span class="hljs-keyword">const</span> countRef = <span class="hljs-title function_">toRef</span>(state, <span class="hljs-string">'count'</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(countRef.<span class="hljs-property">value</span>); <span class="hljs-comment">// 0</span>
</code></pre>
</li>
<li><strong>è¡¨å•å¤„ç†</strong>ï¼šå°†è¡¨å•å­—æ®µè½¬æ¢ä¸ºå“åº”å¼å¼•ç”¨ã€‚
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> form = <span class="hljs-title function_">reactive</span>({ <span class="hljs-attr">username</span>: <span class="hljs-string">''</span>, <span class="hljs-attr">password</span>: <span class="hljs-string">''</span> });
<span class="hljs-keyword">const</span> usernameRef = <span class="hljs-title function_">toRef</span>(form, <span class="hljs-string">'username'</span>);
</code></pre>
</li>
</ul>
<h3 data-id="heading-9"><code>toRef</code> çš„æºç è§£æ</h3>
<p><code>toRef</code> çš„æºç å®ç°å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> toRef&lt;T <span class="hljs-keyword">extends</span> <span class="hljs-built_in">object</span>, K <span class="hljs-keyword">extends</span> keyof T&gt;(
  <span class="hljs-attr">object</span>: T,
  <span class="hljs-attr">key</span>: K
): <span class="hljs-title class_">Ref</span>&lt;T[K]&gt; {
  <span class="hljs-keyword">return</span> {
    <span class="hljs-keyword">get</span> <span class="hljs-title function_">value</span>() {
      <span class="hljs-keyword">return</span> <span class="hljs-built_in">object</span>[key];
    },
    <span class="hljs-keyword">set</span> <span class="hljs-title function_">value</span>(<span class="hljs-params">newValue</span>) {
      <span class="hljs-built_in">object</span>[key] = newValue;
    },
  };
}
</code></pre>
<hr/>
<h2 data-id="heading-10">4. <code>toRefs</code> è¯¦è§£</h2>
<h3 data-id="heading-11"><code>toRefs</code> çš„å®šä¹‰ä¸ä½œç”¨</h3>
<p><code>toRefs</code> ç”¨äºå°†å“åº”å¼å¯¹è±¡çš„æ‰€æœ‰å±æ€§è½¬æ¢ä¸ºå“åº”å¼å¼•ç”¨ã€‚å®ƒçš„å®šä¹‰å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">function</span> toRefs&lt;T <span class="hljs-keyword">extends</span> <span class="hljs-built_in">object</span>&gt;(<span class="hljs-attr">object</span>: T): <span class="hljs-title class_">ToRefs</span>&lt;T&gt;;
</code></pre>
<h3 data-id="heading-12"><code>toRefs</code> çš„ä½¿ç”¨åœºæ™¯</h3>
<ul>
<li><strong>è§£æ„å“åº”å¼å¯¹è±¡</strong>ï¼šåœ¨è§£æ„å“åº”å¼å¯¹è±¡æ—¶ä¿æŒå…¶å“åº”æ€§ã€‚
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { reactive, toRefs } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>;

<span class="hljs-keyword">const</span> state = <span class="hljs-title function_">reactive</span>({ <span class="hljs-attr">count</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'Vue'</span> });
<span class="hljs-keyword">const</span> { count, name } = <span class="hljs-title function_">toRefs</span>(state);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(count.<span class="hljs-property">value</span>); <span class="hljs-comment">// 0</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(name.<span class="hljs-property">value</span>); <span class="hljs-comment">// Vue</span>
</code></pre>
</li>
<li><strong>ç»„ä»¶é€šä¿¡</strong>ï¼šåœ¨çˆ¶ç»„ä»¶å’Œå­ç»„ä»¶ä¹‹é—´ä¼ é€’å“åº”å¼æ•°æ®ã€‚
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> state = <span class="hljs-title function_">reactive</span>({ <span class="hljs-attr">count</span>: <span class="hljs-number">0</span> });
<span class="hljs-keyword">const</span> { count } = <span class="hljs-title function_">toRefs</span>(state);
</code></pre>
</li>
</ul>
<h3 data-id="heading-13"><code>toRefs</code> çš„æºç è§£æ</h3>
<p><code>toRefs</code> çš„æºç å®ç°å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> toRefs&lt;T <span class="hljs-keyword">extends</span> <span class="hljs-built_in">object</span>&gt;(<span class="hljs-attr">object</span>: T): <span class="hljs-title class_">ToRefs</span>&lt;T&gt; {
  <span class="hljs-keyword">const</span> <span class="hljs-attr">ret</span>: <span class="hljs-built_in">any</span> = {};
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> key <span class="hljs-keyword">in</span> <span class="hljs-built_in">object</span>) {
    ret[key] = <span class="hljs-title function_">toRef</span>(<span class="hljs-built_in">object</span>, key);
  }
  <span class="hljs-keyword">return</span> ret;
}
</code></pre>
<hr/>
<h2 data-id="heading-14">5. <code>toRef</code> å’Œ <code>toRefs</code> çš„åŒºåˆ«</h2>
<h3 data-id="heading-15">åŠŸèƒ½å¯¹æ¯”</h3>
<ul>
<li><strong><code>toRef</code></strong>ï¼šå°†å¯¹è±¡çš„æŸä¸ªå±æ€§è½¬æ¢ä¸ºå“åº”å¼å¼•ç”¨ã€‚</li>
<li><strong><code>toRefs</code></strong>ï¼šå°†å¯¹è±¡çš„æ‰€æœ‰å±æ€§è½¬æ¢ä¸ºå“åº”å¼å¼•ç”¨ã€‚</li>
</ul>
<h3 data-id="heading-16">ä½¿ç”¨åœºæ™¯å¯¹æ¯”</h3>
<ul>
<li><strong><code>toRef</code></strong>ï¼šé€‚ç”¨äºå±€éƒ¨å“åº”å¼åœºæ™¯ã€‚</li>
<li><strong><code>toRefs</code></strong>ï¼šé€‚ç”¨äºè§£æ„å“åº”å¼å¯¹è±¡åœºæ™¯ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-17">6. å®æˆ˜ï¼š<code>toRef</code> å’Œ <code>toRefs</code> çš„åº”ç”¨</h2>
<h3 data-id="heading-18">é¡¹ç›®åˆå§‹åŒ–</h3>
<p>ä½¿ç”¨ Vue CLI æˆ– Vite åˆ›å»ºä¸€ä¸ªæ–°çš„ Vue 3 é¡¹ç›®ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">npm create vite@latest my-vue-app --template vue-ts
<span class="hljs-built_in">cd</span> my-vue-app
npm install
</code></pre>
<h3 data-id="heading-19">ä½¿ç”¨ <code>toRef</code> å®ç°å±€éƒ¨å“åº”å¼</h3>
<p>åœ¨ç»„ä»¶ä¸­ä½¿ç”¨ <code>toRef</code> å°†å¯¹è±¡çš„æŸä¸ªå±æ€§è½¬æ¢ä¸ºå“åº”å¼å¼•ç”¨ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { reactive, toRef } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-title function_">setup</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> state = <span class="hljs-title function_">reactive</span>({ <span class="hljs-attr">count</span>: <span class="hljs-number">0</span> });
    <span class="hljs-keyword">const</span> countRef = <span class="hljs-title function_">toRef</span>(state, <span class="hljs-string">'count'</span>);
    <span class="hljs-keyword">return</span> { countRef };
  },
};
</code></pre>
<h3 data-id="heading-20">ä½¿ç”¨ <code>toRefs</code> è§£æ„å“åº”å¼å¯¹è±¡</h3>
<p>åœ¨ç»„ä»¶ä¸­ä½¿ç”¨ <code>toRefs</code> è§£æ„å“åº”å¼å¯¹è±¡ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { reactive, toRefs } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-title function_">setup</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> state = <span class="hljs-title function_">reactive</span>({ <span class="hljs-attr">count</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'Vue'</span> });
    <span class="hljs-keyword">const</span> { count, name } = <span class="hljs-title function_">toRefs</span>(state);
    <span class="hljs-keyword">return</span> { count, name };
  },
};
</code></pre>
<h3 data-id="heading-21">ç»“åˆ Composition API ä½¿ç”¨ <code>toRef</code> å’Œ <code>toRefs</code></h3>
<p>åœ¨ Composition API ä¸­ä½¿ç”¨ <code>toRef</code> å’Œ <code>toRefs</code>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { reactive, toRef, toRefs } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-title function_">setup</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> state = <span class="hljs-title function_">reactive</span>({ <span class="hljs-attr">count</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'Vue'</span> });
    <span class="hljs-keyword">const</span> countRef = <span class="hljs-title function_">toRef</span>(state, <span class="hljs-string">'count'</span>);
    <span class="hljs-keyword">const</span> { name } = <span class="hljs-title function_">toRefs</span>(state);
    <span class="hljs-keyword">return</span> { countRef, name };
  },
};
</code></pre>
<hr/>
<h2 data-id="heading-22">7. è¿›é˜¶ï¼š<code>toRef</code> å’Œ <code>toRefs</code> çš„å¸¸è§åº”ç”¨åœºæ™¯</h2>
<h3 data-id="heading-23">è¡¨å•å¤„ç†</h3>
<p>å°†è¡¨å•å­—æ®µè½¬æ¢ä¸ºå“åº”å¼å¼•ç”¨ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> form = <span class="hljs-title function_">reactive</span>({ <span class="hljs-attr">username</span>: <span class="hljs-string">''</span>, <span class="hljs-attr">password</span>: <span class="hljs-string">''</span> });
<span class="hljs-keyword">const</span> { username, password } = <span class="hljs-title function_">toRefs</span>(form);
</code></pre>
<h3 data-id="heading-24">çŠ¶æ€ç®¡ç†</h3>
<p>åœ¨ç»„ä»¶ä¹‹é—´å…±äº«çŠ¶æ€æ—¶ä¿æŒå“åº”æ€§ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> state = <span class="hljs-title function_">reactive</span>({ <span class="hljs-attr">count</span>: <span class="hljs-number">0</span> });
<span class="hljs-keyword">const</span> { count } = <span class="hljs-title function_">toRefs</span>(state);
</code></pre>
<h3 data-id="heading-25">ç»„ä»¶é€šä¿¡</h3>
<p>åœ¨çˆ¶ç»„ä»¶å’Œå­ç»„ä»¶ä¹‹é—´ä¼ é€’å“åº”å¼æ•°æ®ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// çˆ¶ç»„ä»¶</span>
<span class="hljs-keyword">const</span> state = <span class="hljs-title function_">reactive</span>({ <span class="hljs-attr">count</span>: <span class="hljs-number">0</span> });
<span class="hljs-keyword">const</span> { count } = <span class="hljs-title function_">toRefs</span>(state);

<span class="hljs-comment">// å­ç»„ä»¶</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-attr">props</span>: {
    <span class="hljs-attr">count</span>: {
      <span class="hljs-attr">type</span>: <span class="hljs-title class_">Number</span>,
      <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,
    },
  },
};
</code></pre>
<hr/>
<h2 data-id="heading-26">8. å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ</h2>
<h3 data-id="heading-27"><code>toRef</code> å’Œ <code>toRefs</code> çš„æ€§èƒ½é—®é¢˜</h3>
<ul>
<li><strong>é—®é¢˜</strong>ï¼š<code>toRef</code> å’Œ <code>toRefs</code> å¯èƒ½ä¼šå½±å“æ€§èƒ½ã€‚</li>
<li><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼šé¿å…åœ¨å¤§å‹å¯¹è±¡ä¸Šé¢‘ç¹ä½¿ç”¨ <code>toRef</code> å’Œ <code>toRefs</code>ã€‚</li>
</ul>
<h3 data-id="heading-28"><code>toRef</code> å’Œ <code>toRefs</code> çš„å…¼å®¹æ€§é—®é¢˜</h3>
<ul>
<li><strong>é—®é¢˜</strong>ï¼š<code>toRef</code> å’Œ <code>toRefs</code> åœ¨æŸäº›ç¯å¢ƒä¸‹å¯èƒ½æ— æ³•æ­£å¸¸ä½¿ç”¨ã€‚</li>
<li><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼šç¡®ä¿ Vue 3 ç‰ˆæœ¬å…¼å®¹ï¼Œå¹¶æµ‹è¯•ä¸åŒç¯å¢ƒä¸‹çš„å…¼å®¹æ€§ã€‚</li>
</ul>
<h3 data-id="heading-29"><code>toRef</code> å’Œ <code>toRefs</code> çš„ä½¿ç”¨è¯¯åŒº</h3>
<ul>
<li><strong>é—®é¢˜</strong>ï¼šè¯¯ç”¨ <code>toRef</code> å’Œ <code>toRefs</code> å¯èƒ½å¯¼è‡´å“åº”æ€§ä¸¢å¤±ã€‚</li>
<li><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼šç†è§£ <code>toRef</code> å’Œ <code>toRefs</code> çš„ä½œç”¨ï¼Œé¿å…è¯¯ç”¨ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-30">9. æ€»ç»“ä¸å±•æœ›</h2>
<h3 data-id="heading-31"><code>toRef</code> å’Œ <code>toRefs</code> çš„æœ€ä½³å®è·µ</h3>
<ul>
<li><strong>æ˜ç¡®ä½¿ç”¨åœºæ™¯</strong>ï¼šæ ¹æ®éœ€æ±‚é€‰æ‹©åˆé€‚çš„å·¥å…·å‡½æ•°ã€‚</li>
<li><strong>ä¼˜åŒ–æ€§èƒ½</strong>ï¼šé¿å…åœ¨å¤§å‹å¯¹è±¡ä¸Šé¢‘ç¹ä½¿ç”¨ <code>toRef</code> å’Œ <code>toRefs</code>ã€‚</li>
<li><strong>ç¡®ä¿å“åº”æ€§</strong>ï¼šç†è§£ <code>toRef</code> å’Œ <code>toRefs</code> çš„ä½œç”¨ï¼Œç¡®ä¿å“åº”æ€§ä¸ä¸¢å¤±ã€‚</li>
</ul>
<h3 data-id="heading-32">æœªæ¥å‘å±•æ–¹å‘</h3>
<ul>
<li><strong>æ›´å¼ºå¤§çš„å·¥å…·å‡½æ•°</strong>ï¼šæ”¯æŒæ›´å¤æ‚çš„å“åº”å¼åœºæ™¯ã€‚</li>
<li><strong>æ›´å¥½çš„æ€§èƒ½ä¼˜åŒ–</strong>ï¼šæä¾›æ›´é«˜æ•ˆçš„å“åº”å¼å¤„ç†æ–¹å¼ã€‚</li>
</ul>
<hr/>
<p>é€šè¿‡æœ¬æ–‡çš„å­¦ä¹ ï¼Œä½ åº”è¯¥å·²ç»æŒæ¡äº† <code>toRef</code> å’Œ <code>toRefs</code> çš„ç”¨æ³•å’Œåº”ç”¨åœºæ™¯ã€‚å¸Œæœ›è¿™äº›å†…å®¹èƒ½å¸®åŠ©ä½ åœ¨å®é™…é¡¹ç›®ä¸­æ›´å¥½åœ°å¤„ç†å“åº”å¼æ•°æ®ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[vue3 å¦‚ä½•ç›‘å¬è·¯ç”±å˜åŒ–]]></title>    <link>https://juejin.cn/post/7593528990848286771</link>    <guid>https://juejin.cn/post/7593528990848286771</guid>    <pubDate>2026-01-11T03:30:44.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7593528990848286771" data-draft-id="7593528990848270387" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="vue3 å¦‚ä½•ç›‘å¬è·¯ç”±å˜åŒ–"/> <meta itemprop="keywords" content="Vue.js"/> <meta itemprop="datePublished" content="2026-01-11T03:30:44.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åŒ—è¾°alk"/> <meta itemprop="url" content="https://juejin.cn/user/1772855673241352"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            vue3 å¦‚ä½•ç›‘å¬è·¯ç”±å˜åŒ–
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1772855673241352/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åŒ—è¾°alk
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-11T03:30:44.000Z" title="Sun Jan 11 2026 03:30:44 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ Vue 3 ä¸­ï¼Œç›‘å¬è·¯ç”±å˜åŒ–æ˜¯ä¸€ä¸ªå¸¸è§çš„éœ€æ±‚ï¼Œå°¤å…¶æ˜¯åœ¨éœ€è¦æ ¹æ®è·¯ç”±åŠ¨æ€åŠ è½½æ•°æ®æˆ–æ‰§è¡ŒæŸäº›æ“ä½œæ—¶ã€‚Vue Router æä¾›äº†å¤šç§æ–¹å¼æ¥å®ç°è·¯ç”±å˜åŒ–çš„ç›‘å¬ã€‚ä»¥ä¸‹æ˜¯å‡ ç§å¸¸è§çš„æ–¹æ³•ï¼š</p>
<hr/>
<p>@[toc]</p>
<h2 data-id="heading-0">1. ä½¿ç”¨ <code>watch</code> ç›‘å¬ <code>$route</code> å¯¹è±¡</h2>
<p>Vue 3 çš„ <code>watch</code> API å¯ä»¥ç”¨æ¥ç›‘å¬ <code>$route</code> å¯¹è±¡çš„å˜åŒ–ã€‚<code>$route</code> åŒ…å«äº†å½“å‰è·¯ç”±çš„ä¿¡æ¯ï¼ˆå¦‚è·¯å¾„ã€å‚æ•°ã€æŸ¥è¯¢ç­‰ï¼‰ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { watch } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>;
<span class="hljs-keyword">import</span> { useRoute } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue-router'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-title function_">setup</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> route = <span class="hljs-title function_">useRoute</span>();

    <span class="hljs-comment">// ç›‘å¬è·¯ç”±å˜åŒ–</span>
    <span class="hljs-title function_">watch</span>(
      <span class="hljs-function">() =&gt;</span> route.<span class="hljs-property">path</span>, <span class="hljs-comment">// ç›‘å¬ path å˜åŒ–</span>
      <span class="hljs-function">(<span class="hljs-params">newPath, oldPath</span>) =&gt;</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è·¯ç”±è·¯å¾„ä»'</span>, oldPath, <span class="hljs-string">'å˜ä¸º'</span>, newPath);
      }
    );

    <span class="hljs-comment">// ç›‘å¬è·¯ç”±å‚æ•°å˜åŒ–</span>
    <span class="hljs-title function_">watch</span>(
      <span class="hljs-function">() =&gt;</span> route.<span class="hljs-property">params</span>, <span class="hljs-comment">// ç›‘å¬ params å˜åŒ–</span>
      <span class="hljs-function">(<span class="hljs-params">newParams, oldParams</span>) =&gt;</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è·¯ç”±å‚æ•°ä»'</span>, oldParams, <span class="hljs-string">'å˜ä¸º'</span>, newParams);
      }
    );

    <span class="hljs-comment">// ç›‘å¬æŸ¥è¯¢å‚æ•°å˜åŒ–</span>
    <span class="hljs-title function_">watch</span>(
      <span class="hljs-function">() =&gt;</span> route.<span class="hljs-property">query</span>, <span class="hljs-comment">// ç›‘å¬ query å˜åŒ–</span>
      <span class="hljs-function">(<span class="hljs-params">newQuery, oldQuery</span>) =&gt;</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æŸ¥è¯¢å‚æ•°ä»'</span>, oldQuery, <span class="hljs-string">'å˜ä¸º'</span>, newQuery);
      }
    );
  }
};
</code></pre>
<hr/>
<h2 data-id="heading-1">2. ä½¿ç”¨ <code>onBeforeRouteUpdate</code> å¯¼èˆªå®ˆå«</h2>
<p><code>onBeforeRouteUpdate</code> æ˜¯ Vue Router æä¾›çš„ä¸€ä¸ªå¯¼èˆªå®ˆå«ï¼Œå¯ä»¥åœ¨ç»„ä»¶å†…ç›‘å¬è·¯ç”±æ›´æ–°ï¼ˆä¾‹å¦‚ï¼Œä» <code>/user/1</code> è·³è½¬åˆ° <code>/user/2</code>ï¼‰ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { onBeforeRouteUpdate } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue-router'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-title function_">setup</span>(<span class="hljs-params"/>) {
    <span class="hljs-title function_">onBeforeRouteUpdate</span>(<span class="hljs-function">(<span class="hljs-params">to, <span class="hljs-keyword">from</span></span>) =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è·¯ç”±ä»'</span>, <span class="hljs-keyword">from</span>.<span class="hljs-property">path</span>, <span class="hljs-string">'æ›´æ–°ä¸º'</span>, to.<span class="hljs-property">path</span>);
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ–°å‚æ•°:'</span>, to.<span class="hljs-property">params</span>);
    });
  }
};
</code></pre>
<hr/>
<h2 data-id="heading-2">3. ä½¿ç”¨ <code>onBeforeRouteLeave</code> å¯¼èˆªå®ˆå«</h2>
<p><code>onBeforeRouteLeave</code> ç”¨äºç›‘å¬è·¯ç”±ç¦»å¼€å½“å‰ç»„ä»¶æ—¶çš„å˜åŒ–ã€‚é€‚åˆåœ¨ç”¨æˆ·ç¦»å¼€é¡µé¢æ—¶æ‰§è¡Œä¸€äº›æ“ä½œï¼ˆå¦‚ä¿å­˜æ•°æ®æˆ–æç¤ºç”¨æˆ·ï¼‰ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { onBeforeRouteLeave } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue-router'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-title function_">setup</span>(<span class="hljs-params"/>) {
    <span class="hljs-title function_">onBeforeRouteLeave</span>(<span class="hljs-function">(<span class="hljs-params">to, <span class="hljs-keyword">from</span></span>) =&gt;</span> {
      <span class="hljs-keyword">const</span> answer = <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">confirm</span>(<span class="hljs-string">'ç¡®å®šè¦ç¦»å¼€å—ï¼Ÿæœªä¿å­˜çš„æ•°æ®å¯èƒ½ä¼šä¸¢å¤±ã€‚'</span>);
      <span class="hljs-keyword">if</span> (!answer) {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>; <span class="hljs-comment">// å–æ¶ˆå¯¼èˆª</span>
      }
    });
  }
};
</code></pre>
<hr/>
<h2 data-id="heading-3">4. ä½¿ç”¨å…¨å±€è·¯ç”±å®ˆå«</h2>
<p>å¦‚æœä½ éœ€è¦åœ¨å…¨å±€èŒƒå›´å†…ç›‘å¬è·¯ç”±å˜åŒ–ï¼Œå¯ä»¥ä½¿ç”¨ Vue Router çš„å…¨å±€è·¯ç”±å®ˆå«ï¼ˆ<code>beforeEach</code> å’Œ <code>afterEach</code>ï¼‰ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { createRouter, createWebHistory } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue-router'</span>;

<span class="hljs-keyword">const</span> router = <span class="hljs-title function_">createRouter</span>({
  <span class="hljs-attr">history</span>: <span class="hljs-title function_">createWebHistory</span>(),
  <span class="hljs-attr">routes</span>: [
    <span class="hljs-comment">// è·¯ç”±é…ç½®</span>
  ],
});

<span class="hljs-comment">// å…¨å±€å‰ç½®å®ˆå«</span>
router.<span class="hljs-title function_">beforeEach</span>(<span class="hljs-function">(<span class="hljs-params">to, <span class="hljs-keyword">from</span></span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ä»'</span>, <span class="hljs-keyword">from</span>.<span class="hljs-property">path</span>, <span class="hljs-string">'è·³è½¬åˆ°'</span>, to.<span class="hljs-property">path</span>);
});

<span class="hljs-comment">// å…¨å±€åç½®å®ˆå«</span>
router.<span class="hljs-title function_">afterEach</span>(<span class="hljs-function">(<span class="hljs-params">to, <span class="hljs-keyword">from</span></span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å·²å®Œæˆä»'</span>, <span class="hljs-keyword">from</span>.<span class="hljs-property">path</span>, <span class="hljs-string">'åˆ°'</span>, to.<span class="hljs-property">path</span>, <span class="hljs-string">'çš„è·³è½¬'</span>);
});

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> router;
</code></pre>
<hr/>
<h2 data-id="heading-4">5. ä½¿ç”¨ <code>useRouter</code> å’Œ <code>useRoute</code> ç»„åˆå¼ API</h2>
<p>Vue Router æä¾›äº† <code>useRouter</code> å’Œ <code>useRoute</code> ä¸¤ä¸ªç»„åˆå¼ APIï¼Œå¯ä»¥æ›´æ–¹ä¾¿åœ°åœ¨ <code>setup</code> å‡½æ•°ä¸­è®¿é—®è·¯ç”±ä¿¡æ¯ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { useRouter, useRoute } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue-router'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-title function_">setup</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> router = <span class="hljs-title function_">useRouter</span>();
    <span class="hljs-keyword">const</span> route = <span class="hljs-title function_">useRoute</span>();

    <span class="hljs-comment">// ç›‘å¬è·¯ç”±å˜åŒ–</span>
    <span class="hljs-title function_">watch</span>(
      <span class="hljs-function">() =&gt;</span> route.<span class="hljs-property">path</span>,
      <span class="hljs-function">(<span class="hljs-params">newPath, oldPath</span>) =&gt;</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è·¯ç”±è·¯å¾„ä»'</span>, oldPath, <span class="hljs-string">'å˜ä¸º'</span>, newPath);
      }
    );

    <span class="hljs-comment">// æ‰‹åŠ¨è·³è½¬è·¯ç”±</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">goToAbout</span> = (<span class="hljs-params"/>) =&gt; {
      router.<span class="hljs-title function_">push</span>(<span class="hljs-string">'/about'</span>);
    };

    <span class="hljs-keyword">return</span> {
      goToAbout,
    };
  },
};
</code></pre>
<hr/>
<h2 data-id="heading-5">6. ç›‘å¬ç‰¹å®šè·¯ç”±å‚æ•°çš„å˜åŒ–</h2>
<p>å¦‚æœåªéœ€è¦ç›‘å¬æŸä¸ªç‰¹å®šè·¯ç”±å‚æ•°çš„å˜åŒ–ï¼Œå¯ä»¥ç›´æ¥åœ¨ <code>watch</code> ä¸­ç›‘å¬ <code>route.params</code> çš„æŸä¸ªå±æ€§ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { watch } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>;
<span class="hljs-keyword">import</span> { useRoute } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue-router'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-title function_">setup</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> route = <span class="hljs-title function_">useRoute</span>();

    <span class="hljs-comment">// ç›‘å¬ userId å‚æ•°çš„å˜åŒ–</span>
    <span class="hljs-title function_">watch</span>(
      <span class="hljs-function">() =&gt;</span> route.<span class="hljs-property">params</span>.<span class="hljs-property">userId</span>,
      <span class="hljs-function">(<span class="hljs-params">newUserId, oldUserId</span>) =&gt;</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'userId ä»'</span>, oldUserId, <span class="hljs-string">'å˜ä¸º'</span>, newUserId);
      }
    );
  },
};
</code></pre>
<hr/>
<h2 data-id="heading-6">7. ç›‘å¬æŸ¥è¯¢å‚æ•°çš„å˜åŒ–</h2>
<p>æŸ¥è¯¢å‚æ•°ï¼ˆ<code>query</code>ï¼‰çš„å˜åŒ–ä¹Ÿå¯ä»¥é€šè¿‡ <code>watch</code> ç›‘å¬ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { watch } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>;
<span class="hljs-keyword">import</span> { useRoute } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue-router'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-title function_">setup</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> route = <span class="hljs-title function_">useRoute</span>();

    <span class="hljs-comment">// ç›‘å¬æŸ¥è¯¢å‚æ•°çš„å˜åŒ–</span>
    <span class="hljs-title function_">watch</span>(
      <span class="hljs-function">() =&gt;</span> route.<span class="hljs-property">query</span>,
      <span class="hljs-function">(<span class="hljs-params">newQuery, oldQuery</span>) =&gt;</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æŸ¥è¯¢å‚æ•°ä»'</span>, oldQuery, <span class="hljs-string">'å˜ä¸º'</span>, newQuery);
      }
    );
  },
};
</code></pre>
<hr/>
<h2 data-id="heading-7">8. ç›‘å¬å“ˆå¸Œå˜åŒ–</h2>
<p>å¦‚æœè·¯ç”±ä½¿ç”¨äº†å“ˆå¸Œæ¨¡å¼ï¼ˆ<code>hash</code>ï¼‰ï¼Œå¯ä»¥é€šè¿‡ç›‘å¬ <code>route.hash</code> æ¥æ•è·å“ˆå¸Œå˜åŒ–ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { watch } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>;
<span class="hljs-keyword">import</span> { useRoute } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue-router'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-title function_">setup</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> route = <span class="hljs-title function_">useRoute</span>();

    <span class="hljs-comment">// ç›‘å¬å“ˆå¸Œå˜åŒ–</span>
    <span class="hljs-title function_">watch</span>(
      <span class="hljs-function">() =&gt;</span> route.<span class="hljs-property">hash</span>,
      <span class="hljs-function">(<span class="hljs-params">newHash, oldHash</span>) =&gt;</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å“ˆå¸Œä»'</span>, oldHash, <span class="hljs-string">'å˜ä¸º'</span>, newHash);
      }
    );
  },
};
</code></pre>
<hr/>
<h2 data-id="heading-8">æ€»ç»“</h2>
<p>åœ¨Vue 3ä¸­ç›‘å¬è·¯ç”±çš„å˜åŒ–æ˜¯ä¸€é¡¹å¸¸è§çš„éœ€æ±‚ï¼Œå®ƒå…è®¸å¼€å‘è€…åœ¨è·¯ç”±è·³è½¬æ—¶æ‰§è¡Œç›¸åº”çš„é€»è¾‘ï¼Œå¦‚è·å–æ–°æ•°æ®ã€æ›´æ–°ç»„ä»¶çŠ¶æ€ç­‰ã€‚Vue 3å¼•å…¥äº†Composition APIï¼Œä½¿å¾—ç›‘å¬è·¯ç”±å˜åŒ–çš„æ–¹å¼ä¸Vue 2æœ‰æ‰€ä¸åŒï¼Œä½†åŒæ ·æä¾›äº†å¤šç§æ–¹æ³•æ¥å®ç°è¿™ä¸€ç›®æ ‡ã€‚</p>
<p>ä¸€ç§å¸¸è§çš„æ–¹æ³•æ˜¯ä½¿ç”¨watchå‡½æ•°æ¥ç›‘å¬$routeå¯¹è±¡çš„å˜åŒ–ã€‚é€šè¿‡useRouteé’©å­è·å–å½“å‰è·¯ç”±å¯¹è±¡ï¼Œå¹¶ä½¿ç”¨watchå‡½æ•°æ¥ç›‘å¬å…¶å˜åŒ–ã€‚è¿™ç§æ–¹å¼é€‚ç”¨äºåœ¨ç»„ä»¶å†…éƒ¨ç›‘å¬è·¯ç”±å˜åŒ–ï¼Œå¹¶æ‰§è¡Œç›¸åº”æ“ä½œã€‚watchå‡½æ•°å¯ä»¥æ¥å—ä¸€ä¸ªè¿”å›éœ€è¦ç›‘å¬å€¼çš„å‡½æ•°ä½œä¸ºå‚æ•°ï¼Œå½“ç›‘å¬çš„å€¼å‘ç”Ÿå˜åŒ–æ—¶ï¼Œä¼šè§¦å‘å›è°ƒå‡½æ•°ï¼Œæ‰§è¡Œç›¸åº”çš„é€»è¾‘ã€‚</p>
<p>å¦ä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨onBeforeRouteUpdateå¯¼èˆªå®ˆå«ã€‚è¿™æ˜¯Vue Routeræä¾›çš„ä¸€ä¸ªç”Ÿå‘½å‘¨æœŸé’©å­ï¼Œå®ƒä¼šåœ¨å½“å‰è·¯ç”±æ”¹å˜ä¸”å¤ç”¨ç»„ä»¶æ—¶è°ƒç”¨ã€‚è¿™æ„å‘³ç€å½“è·¯ç”±æ”¹å˜ä½†æ˜¯å®ƒæ‰€å¯¹åº”çš„ç»„ä»¶è¢«é‡ç”¨æ—¶ï¼Œä¼šè§¦å‘æ­¤é’©å­ã€‚é€šè¿‡æ­¤é’©å­ï¼Œå¼€å‘è€…å¯ä»¥åœ¨è·¯ç”±å˜åŒ–å‰æ‰§è¡Œä¸€äº›é€»è¾‘ï¼Œå¦‚è·å–æ–°æ•°æ®ã€éªŒè¯æƒé™ç­‰ã€‚</p>
<p>æ­¤å¤–ï¼Œè¿˜å¯ä»¥ç›´æ¥ç›‘å¬router.currentRoute.value.pathæ¥å®ç°è·¯ç”±å˜åŒ–çš„ç›‘å¬ã€‚è¿™ç§æ–¹å¼é€šè¿‡useRouteré’©å­è·å–è·¯ç”±å®ä¾‹ï¼Œå¹¶ä½¿ç”¨watchå‡½æ•°æ¥ç›‘å¬å½“å‰è·¯ç”±è·¯å¾„çš„å˜åŒ–ã€‚å½“è·¯å¾„å‘ç”Ÿå˜åŒ–æ—¶ï¼Œä¼šè§¦å‘å›è°ƒå‡½æ•°ï¼Œæ‰§è¡Œç›¸åº”çš„é€»è¾‘ã€‚</p>
<p>ä»¥ä¸Šä¸‰ç§æ–¹æ³•éƒ½å¯ä»¥æœ‰æ•ˆåœ°å¸®åŠ©å¼€å‘è€…åœ¨Vue 3ä¸­ç›‘å¬è·¯ç”±çš„å˜åŒ–ï¼Œå¹¶æ ¹æ®å˜åŒ–æ‰§è¡Œç‰¹å®šçš„æ“ä½œã€‚é€‰æ‹©å“ªç§æ–¹æ³•å–å†³äºå…·ä½“çš„åº”ç”¨åœºæ™¯å’Œä¸ªäººåå¥½ã€‚æ— è®ºä½¿ç”¨å“ªç§æ–¹æ³•ï¼ŒVue 3éƒ½æä¾›äº†çµæ´»è€Œå¼ºå¤§çš„å·¥å…·æ¥æ”¯æŒè·¯ç”±å˜åŒ–çš„ç›‘å¬å’Œå¤„ç†ã€‚
åœ¨ Vue 3 ä¸­ç›‘å¬è·¯ç”±å˜åŒ–æœ‰å¤šç§æ–¹å¼ï¼Œå…·ä½“é€‰æ‹©å–å†³äºä½ çš„éœ€æ±‚ï¼š</p>
<ul>
<li>å¦‚æœéœ€è¦ç›‘å¬å…¨å±€è·¯ç”±å˜åŒ–ï¼Œå¯ä»¥ä½¿ç”¨ <strong>å…¨å±€è·¯ç”±å®ˆå«</strong>ã€‚</li>
<li>å¦‚æœéœ€è¦åœ¨ç»„ä»¶å†…ç›‘å¬è·¯ç”±å˜åŒ–ï¼Œå¯ä»¥ä½¿ç”¨ <strong><code>watch</code></strong> æˆ– <strong><code>onBeforeRouteUpdate</code></strong>ã€‚</li>
<li>å¦‚æœéœ€è¦ç›‘å¬ç‰¹å®šå‚æ•°æˆ–æŸ¥è¯¢çš„å˜åŒ–ï¼Œå¯ä»¥ç›´æ¥ç›‘å¬ <code>route.params</code> æˆ– <code>route.query</code>ã€‚</li>
</ul>
<p>é€šè¿‡åˆç†ä½¿ç”¨è¿™äº›æ–¹æ³•ï¼Œå¯ä»¥è½»æ¾å®ç°è·¯ç”±å˜åŒ–çš„ç›‘å¬å’Œå¤„ç†ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€èŠ‚ç‚¹ã€‘[Channel-SplitèŠ‚ç‚¹]åŸç†è§£æä¸å®é™…åº”ç”¨]]></title>    <link>https://juejin.cn/post/7593603345518116891</link>    <guid>https://juejin.cn/post/7593603345518116891</guid>    <pubDate>2026-01-11T03:31:40.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7593603345518116891" data-draft-id="7593603345518034971" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€èŠ‚ç‚¹ã€‘[Channel-SplitèŠ‚ç‚¹]åŸç†è§£æä¸å®é™…åº”ç”¨"/> <meta itemprop="keywords" content="æ¸¸æˆå¼€å‘,å›¾å½¢å­¦,Unity3D"/> <meta itemprop="datePublished" content="2026-01-11T03:31:40.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="SmalBox"/> <meta itemprop="url" content="https://juejin.cn/user/2218166695237532"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€èŠ‚ç‚¹ã€‘[Channel-SplitèŠ‚ç‚¹]åŸç†è§£æä¸å®é™…åº”ç”¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2218166695237532/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    SmalBox
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-11T03:31:40.000Z" title="Sun Jan 11 2026 03:31:40 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»13åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2Fchenghai37%2Fcategory_13074589.html%3Ffromshare%3Dblogcolumn%26sharetype%3Dblogcolumn%26sharerId%3D13074589%26sharerefer%3DPC%26sharesource%3Dchenghai37%26sharefrom%3Dfrom_link" target="_blank" title="https://blog.csdn.net/chenghai37/category_13074589.html?fromshare=blogcolumn&amp;sharetype=blogcolumn&amp;sharerId=13074589&amp;sharerefer=PC&amp;sharesource=chenghai37&amp;sharefrom=from_link" ref="nofollow noopener noreferrer">ã€Unity Shader Graph ä½¿ç”¨ä¸ç‰¹æ•ˆå®ç°ã€‘</a><strong>ä¸“æ -ç›´è¾¾</strong></p>
</blockquote>
<p>æ‹†åˆ†èŠ‚ç‚¹ï¼ˆSplit Nodeï¼‰æ˜¯Unity ShaderGraphä¸­ç”¨äºå°†å‘é‡åˆ†è§£ä¸ºç‹¬ç«‹æµ®ç‚¹æ•°å€¼çš„åŸºç¡€å·¥å…·ã€‚å®ƒé€šè¿‡æå–è¾“å…¥å‘é‡çš„å„ä¸ªé€šé“ï¼ˆR/G/B/Aï¼‰ï¼Œå°†å¤šç»´å‘é‡æ•°æ®æ‹†åˆ†ä¸ºå•ç²¾åº¦æµ®ç‚¹æ•°è¾“å‡ºï¼Œå¹¿æ³›åº”ç”¨äºæè´¨ç¼–è¾‘ã€æ•°æ®å¤„ç†åŠç®—æ³•é€»è¾‘ä¸­ã€‚è¯¥èŠ‚ç‚¹èƒ½å¤Ÿè‡ªåŠ¨å¤„ç†ä¸åŒç»´åº¦çš„è¾“å…¥å‘é‡ï¼Œæ”¯æŒVector2ã€Vector3å’ŒVector4ç±»å‹ï¼Œå¹¶æ ¹æ®è¾“å…¥ç»´åº¦æ™ºèƒ½è°ƒæ•´è¾“å‡ºå†…å®¹ã€‚</p>
<p>SplitèŠ‚ç‚¹çš„æ ¸å¿ƒä¼˜åŠ¿ä½“ç°åœ¨ä¸‰ä¸ªæ–¹é¢ï¼šç»´åº¦åˆ†è§£åŠŸèƒ½æ”¯æŒå°†Vector2/3/4å‘é‡æ‹†åˆ†ä¸ºç‹¬ç«‹çš„æµ®ç‚¹æ•°å€¼ï¼›çµæ´»é€‚é…ç‰¹æ€§ä½¿å…¶èƒ½å¤Ÿè‡ªåŠ¨å¤„ç†ä½ç»´è¾“å…¥ï¼Œä¾‹å¦‚Vector2ä»…è¾“å‡ºRå’ŒGé€šé“ï¼ŒBä¸Aé€šé“è‡ªåŠ¨è¡¥é›¶ï¼›é€»è¾‘æ¸…æ™°çš„è®¾è®¡æä¾›äº†ç›´è§‚çš„é€šé“åˆ†ç¦»åŠŸèƒ½ï¼Œæå¤§ç®€åŒ–äº†å‘é‡æ•°æ®æ“ä½œæµç¨‹ã€‚åœ¨ShaderGraphçš„å¯è§†åŒ–ç¼–ç¨‹ç¯å¢ƒä¸­ï¼ŒSplitèŠ‚ç‚¹ä½œä¸ºæ•°æ®æµè½¬çš„å…³é”®ç¯èŠ‚ï¼Œæ‰¿æ‹…ç€å°†å¤åˆæ•°æ®è½¬æ¢ä¸ºå•ä¸€æ•°å€¼çš„é‡è¦ä»»åŠ¡ã€‚</p>
<p>åœ¨å›¾å½¢æ¸²æŸ“ç®¡çº¿ä¸­ï¼ŒSplitèŠ‚ç‚¹æ‰®æ¼”æ•°æ®é¢„å¤„ç†å™¨çš„è§’è‰²ã€‚å½“éœ€è¦å•ç‹¬æ“ä½œå‘é‡çš„æŸä¸ªåˆ†é‡æ—¶ï¼Œå®ƒæä¾›äº†æœ€ç›´æ¥çš„è§£å†³æ–¹æ¡ˆã€‚ä¾‹å¦‚ï¼Œåœ¨è°ƒæ•´æè´¨é¢œè‰²å±æ€§æ—¶ï¼Œè‹¥éœ€ä»…ä¿®æ”¹çº¢è‰²é€šé“å¼ºåº¦è€Œä¸å½±å“å…¶ä»–é€šé“ï¼ŒSplitèŠ‚ç‚¹ä¾¿å±•ç°å‡ºå…¶ç‹¬ç‰¹ä»·å€¼ã€‚</p>
<h2 data-id="heading-0">ç«¯å£ä¸å‚æ•°è¯¦è§£</h2>
<p><img src="https://docs.unity.cn/cn/Packages-cn/com.unity.shadergraph@14.0/manual/images/SplitNodeThumb.png" alt="" loading="lazy"/></p>
<h3 data-id="heading-1">è¾“å…¥ç«¯å£é…ç½®</h3>
<p>SplitèŠ‚ç‚¹çš„è¾“å…¥ç«¯å£è®¾è®¡ç®€æ´è€Œå¼ºå¤§ï¼Œä»…åŒ…å«ä¸€ä¸ªåä¸ºâ€œInâ€çš„åŠ¨æ€çŸ¢é‡è¾“å…¥ã€‚è¯¥ç«¯å£ç±»å‹ä¸ºDynamic Vectorï¼Œå¯æ¥å—Vector2ã€Vector3æˆ–Vector4ç±»å‹çš„è¾“å…¥æ•°æ®ï¼Œæ— éœ€ç”¨æˆ·æ‰‹åŠ¨æŒ‡å®šå‘é‡ç»´åº¦ï¼Œä»è€Œå…·å¤‡è¾ƒé«˜çš„çµæ´»æ€§ï¼Œé€‚åº”å¤šæ ·åŒ–çš„æ•°æ®æµåœºæ™¯ã€‚</p>
<p>è¾“å…¥ç«¯å£çš„æ ¸å¿ƒç‰¹æ€§åŒ…æ‹¬ï¼šç±»å‹è‡ªé€‚åº”æ€§ï¼Œèƒ½è‡ªåŠ¨è¯†åˆ«å’Œå¤„ç†ä¸åŒç»´åº¦çš„è¾“å…¥å‘é‡ï¼›æ•°æ®æµå…¼å®¹æ€§ï¼Œå¯æ— ç¼è¿æ¥å…¶ä»–èŠ‚ç‚¹è¾“å‡ºçš„å‘é‡æ•°æ®ï¼›å®æ—¶å¤„ç†èƒ½åŠ›ï¼Œå¯¹è¾“å…¥å‘é‡è¿›è¡Œå³æ—¶åˆ†è§£æ“ä½œã€‚åœ¨å®é™…åº”ç”¨ä¸­ï¼Œç”¨æˆ·å¯å°†ä»»ä½•ç”Ÿæˆå‘é‡æ•°æ®çš„èŠ‚ç‚¹ï¼ˆå¦‚çº¹ç†é‡‡æ ·èŠ‚ç‚¹ã€æ•°å­¦è¿ç®—èŠ‚ç‚¹ã€æ—¶é—´èŠ‚ç‚¹ç­‰ï¼‰ç›´æ¥æ¥å…¥SplitèŠ‚ç‚¹çš„è¾“å…¥ç«¯å£ã€‚</p>
<p>è¾“å…¥ç«¯å£çš„æŠ€æœ¯è§„æ ¼å¦‚ä¸‹ï¼šæ”¯æŒçš„æœ€å°ç»´åº¦ä¸ºVector2ï¼Œæœ€å¤§ä¸ºVector4ï¼›æ‰€æœ‰è¾“å…¥å‡æŒ‰æµ®ç‚¹æ•°ç²¾åº¦å¤„ç†ï¼›ç«¯å£è¿æ¥æ— ç‰¹æ®Šé™åˆ¶ï¼Œå¯æ¥å…¥ä»»ä½•è¾“å‡ºå‘é‡ç±»å‹çš„èŠ‚ç‚¹ã€‚</p>
<h3 data-id="heading-2">è¾“å‡ºç«¯å£æ¶æ„</h3>
<p>SplitèŠ‚ç‚¹æä¾›å››ä¸ªç‹¬ç«‹çš„æµ®ç‚¹æ•°è¾“å‡ºç«¯å£ï¼Œåˆ†åˆ«å¯¹åº”å‘é‡çš„ä¸åŒé€šé“ï¼š</p>
<ul>
<li>Rï¼ˆçº¢è‰²é€šé“ï¼‰ï¼šè¾“å‡ºè¾“å…¥å‘é‡çš„ç¬¬ä¸€ä¸ªåˆ†é‡ï¼Œå¯¹åº”Vector2çš„xã€Vector3çš„xã€Vector4çš„x</li>
<li>Gï¼ˆç»¿è‰²é€šé“ï¼‰ï¼šè¾“å‡ºè¾“å…¥å‘é‡çš„ç¬¬äºŒä¸ªåˆ†é‡ï¼Œå¯¹åº”Vector2çš„yã€Vector3çš„yã€Vector4çš„y</li>
<li>Bï¼ˆè“è‰²é€šé“ï¼‰ï¼šè¾“å‡ºè¾“å…¥å‘é‡çš„ç¬¬ä¸‰ä¸ªåˆ†é‡ï¼ŒVector2è¾“å…¥æ—¶ä¸º0ï¼ŒVector3ä¸ºzï¼ŒVector4ä¸ºz</li>
<li>Aï¼ˆAlphaé€šé“ï¼‰ï¼šè¾“å‡ºè¾“å…¥å‘é‡çš„ç¬¬å››ä¸ªåˆ†é‡ï¼ŒVector2ä¸Vector3è¾“å…¥æ—¶ä¸º0ï¼ŒVector4ä¸ºw</li>
</ul>
<p>è¯¥è¾“å‡ºè®¾è®¡ä½¿ç”¨æˆ·èƒ½å¤Ÿå•ç‹¬è®¿é—®å’Œæ“ä½œå‘é‡çš„æ¯ä¸€ä¸ªåˆ†é‡ï¼Œä¸ºå¤æ‚ç€è‰²å™¨æ•ˆæœæä¾›äº†åŸºç¡€æ”¯æŒã€‚æ¯ä¸ªè¾“å‡ºç«¯å£ç‹¬ç«‹è¿ä½œï¼Œç”¨æˆ·å¯æ ¹æ®éœ€è¦é€‰ç”¨å…¶ä¸­éƒ¨åˆ†æˆ–å…¨éƒ¨ç«¯å£ï¼Œæœªä½¿ç”¨çš„ç«¯å£ä¿æŒæ–­å¼€çŠ¶æ€ï¼Œä¸å½±å“å…¶ä»–ç«¯å£åŠŸèƒ½ã€‚</p>
<p>è¾“å‡ºç«¯å£çš„æ•°å€¼èŒƒå›´å–å†³äºè¾“å…¥å‘é‡çš„å–å€¼èŒƒå›´ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œé¢œè‰²é€šé“çš„å–å€¼èŒƒå›´ä¸º[0,1]ï¼Œåæ ‡æ•°æ®å¯èƒ½è¶…å‡ºè¯¥èŒƒå›´ã€‚ç†è§£å„ç«¯å£çš„é¢„æœŸæ•°å€¼èŒƒå›´å¯¹æ­£ç¡®ä½¿ç”¨SplitèŠ‚ç‚¹è‡³å…³é‡è¦ã€‚</p>
<h2 data-id="heading-3">æŠ€æœ¯åŸç†è§£æ</h2>
<h3 data-id="heading-4">æ ¸å¿ƒç®—æ³•é€»è¾‘</h3>
<p>SplitèŠ‚ç‚¹çš„å†…éƒ¨ç®—æ³•åŸºäºå‘é‡åˆ†é‡çš„ç´¢å¼•è®¿é—®æœºåˆ¶ã€‚å½“æ¥æ”¶åˆ°è¾“å…¥å‘é‡æ—¶ï¼ŒèŠ‚ç‚¹ä¼šæ ¹æ®å‘é‡çš„å®é™…ç»´åº¦ï¼ŒæŒ‰ç…§é¢„å®šä¹‰çš„é€šé“æ˜ å°„å…³ç³»æå–å„åˆ†é‡å€¼ã€‚å¯¹ä¸åŒç»´åº¦çš„è¾“å…¥å‘é‡ï¼ŒèŠ‚ç‚¹å¤„ç†é€»è¾‘ä¸€è‡´ï¼Œä½†ä¼šæ ¹æ®ç»´åº¦è‡ªåŠ¨è°ƒæ•´è¾“å‡ºå†…å®¹ã€‚</p>
<p>å¯¹äºVector2è¾“å…¥ï¼ŒèŠ‚ç‚¹æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼šæå–ç´¢å¼•0ä½ç½®çš„Ré€šé“å€¼ï¼Œæå–ç´¢å¼•1ä½ç½®çš„Gé€šé“å€¼ï¼ŒBä¸Aé€šé“å€¼å›ºå®šä¸º0ã€‚Vector3è¾“å…¥çš„å¤„ç†åŒ…æ‹¬ï¼šæå–ç´¢å¼•0çš„Ré€šé“å€¼ï¼Œç´¢å¼•1çš„Gé€šé“å€¼ï¼Œç´¢å¼•2çš„Bé€šé“å€¼ï¼ŒAé€šé“å€¼å›ºå®šä¸º0ã€‚Vector4è¾“å…¥åˆ™å®Œæ•´æå–æ‰€æœ‰å››ä¸ªé€šé“ï¼šç´¢å¼•0çš„Rã€ç´¢å¼•1çš„Gã€ç´¢å¼•2çš„Bå’Œç´¢å¼•3çš„Aã€‚</p>
<p>ç®—æ³•å®ç°çš„å…³é”®åœ¨äºåŠ¨æ€ç±»å‹è¯†åˆ«ã€‚èŠ‚ç‚¹åœ¨è¿è¡Œæ—¶é¦–å…ˆæ£€æµ‹è¾“å…¥å‘é‡çš„ç»´åº¦ï¼Œç„¶åæ ¹æ®æ£€æµ‹ç»“æœé€‰æ‹©ç›¸åº”çš„å¤„ç†è·¯å¾„ã€‚è¯¥è®¾è®¡é¿å…äº†ç¡¬ç¼–ç çš„å±€é™æ€§ï¼Œä½¿èŠ‚ç‚¹èƒ½çµæ´»åº”å¯¹å„ç±»è¾“å…¥æƒ…å†µã€‚</p>
<h3 data-id="heading-5">ç”Ÿæˆä»£ç è§£æ</h3>
<p>SplitèŠ‚ç‚¹åœ¨Shaderç¼–è¯‘é˜¶æ®µç”Ÿæˆç›¸åº”çš„HLSLä»£ç ã€‚æ ¹æ®è¾“å…¥ç±»å‹ä¸åŒï¼Œç”Ÿæˆçš„ä»£ç è¡¨ç°ä¸ºå¤šä¸ªç‹¬ç«‹çš„æµ®ç‚¹æ•°å˜é‡å£°æ˜ä¸èµ‹å€¼æ“ä½œã€‚ä»£ç ç”Ÿæˆè¿‡ç¨‹éµå¾ªä¸¥æ ¼çš„ç±»å‹åŒ¹é…è§„åˆ™ï¼Œç¡®ä¿è¾“å‡ºå€¼ä¸è¾“å…¥å‘é‡çš„ç»´åº¦å®Œå…¨å¯¹åº”ã€‚</p>
<p>ç”Ÿæˆçš„HLSLä»£ç å…·æœ‰é«˜åº¦ä¼˜åŒ–ç‰¹æ€§ï¼Œç¼–è¯‘å™¨ä¼šæ ¹æ®å®é™…ä½¿ç”¨æƒ…å†µå¯¹æœªä½¿ç”¨çš„è¾“å‡ºé€šé“è¿›è¡Œå‰ªæä¼˜åŒ–ï¼Œé¿å…ä¸å¿…è¦çš„è®¡ç®—å¼€é”€ã€‚è¯¥æœºåˆ¶ä½¿SplitèŠ‚ç‚¹åœ¨æ€§èƒ½æ–¹é¢è¡¨ç°ä¼˜å¼‚ï¼Œå³ä½¿åœ¨é«˜é¢‘ç‡çš„ç‰‡æ®µç€è‰²å™¨ä¸­ä½¿ç”¨ä¹Ÿä¸ä¼šé€ æˆæ˜æ˜¾è´Ÿæ‹…ã€‚</p>
<p>åœ¨ä»£ç å®ç°å±‚é¢ï¼ŒSplitèŠ‚ç‚¹çš„ç”Ÿæˆä»£ç ä¼šæ ¹æ®è¾“å…¥ç±»å‹è‡ªåŠ¨è°ƒæ•´ã€‚å¯¹äºVector3è¾“å…¥ï¼Œç”Ÿæˆçš„ä»£ç åŒ…å«ä¸‰ä¸ªæœ‰æ•ˆèµ‹å€¼å’Œä¸€ä¸ªé›¶å€¼èµ‹å€¼ã€‚è¿™ç§æ™ºèƒ½åŒ–çš„ä»£ç ç”Ÿæˆç­–ç•¥ç¡®ä¿äº†ç€è‰²å™¨çš„é«˜æ•ˆæ‰§è¡Œã€‚</p>
<h2 data-id="heading-6">åº”ç”¨åœºæ™¯ä¸å®æˆ˜æ¡ˆä¾‹</h2>
<h3 data-id="heading-7">æè´¨å‚æ•°åˆ†ç¦»åº”ç”¨</h3>
<p>åœ¨æè´¨å‚æ•°åˆ†ç¦»åœºæ™¯ä¸­ï¼ŒSplitèŠ‚ç‚¹å‘æŒ¥é‡è¦ä½œç”¨ï¼Œç‰¹åˆ«æ˜¯åœ¨å¤„ç†æ³•çº¿è´´å›¾æ—¶ï¼Œè®¾è®¡å¸ˆå¸¸éœ€ç‹¬ç«‹æ§åˆ¶å„é€šé“ä»¥å®ç°ç‰¹æ®Šè§†è§‰æ•ˆæœã€‚</p>
<ul>
<li>æ³•çº¿è´´å›¾é€šé“ç‹¬ç«‹æ§åˆ¶ï¼šé€šè¿‡SplitèŠ‚ç‚¹åˆ†ç¦»æ³•çº¿è´´å›¾çš„RGBé€šé“ï¼Œè®¾è®¡å¸ˆå¯å•ç‹¬è°ƒæ•´å„é€šé“å¼ºåº¦ï¼Œå®ç°éç‰©ç†å‡†ç¡®ä½†è§†è§‰ä¸Šä»¤äººæ»¡æ„çš„æ•ˆæœ</li>
<li>å¤šå‚æ•°æè´¨è°ƒèŠ‚ï¼šå½“ä½¿ç”¨ä¸€å¼ çº¹ç†åŒ…å«å¤šä¸ªæè´¨å‚æ•°ï¼ˆå¦‚ç²—ç³™åº¦ã€é‡‘å±åº¦ã€ç¯å¢ƒå…‰é®è”½ç­‰ï¼‰æ—¶ï¼Œä½¿ç”¨SplitèŠ‚ç‚¹å¯åˆ†ç¦»è¿™äº›å‚æ•°å¹¶è¿›è¡Œç‹¬ç«‹æ§åˆ¶</li>
<li>åŠ¨æ€æè´¨æ•ˆæœï¼šç»“åˆæ—¶é—´èŠ‚ç‚¹æˆ–åŠ¨ç”»æ›²çº¿ï¼Œå¯¹åˆ†ç¦»åçš„é€šé“å€¼è¿›è¡ŒåŠ¨æ€ä¿®æ”¹ï¼Œåˆ›é€ éšæ—¶é—´å˜åŒ–çš„æè´¨æ•ˆæœ</li>
</ul>
<p>å…·ä½“åº”ç”¨å®ä¾‹ä¹‹ä¸€æ˜¯åˆ›å»ºåŠ¨æ€è…èš€æ•ˆæœã€‚é€šè¿‡SplitèŠ‚ç‚¹åˆ†ç¦»å™ªå£°çº¹ç†çš„å„é€šé“ï¼Œåˆ†åˆ«æ§åˆ¶ä¸åŒé€šé“çš„è…èš€é€Ÿåº¦ä¸å¼ºåº¦ï¼Œå¯äº§ç”Ÿæ›´è‡ªç„¶ã€å¤æ‚çš„è…èš€åŠ¨ç”»ã€‚</p>
<h3 data-id="heading-8">åæ ‡ç³»ç»Ÿå¤„ç†æŠ€æœ¯</h3>
<p>åæ ‡ç³»ç»Ÿå¤„ç†æ˜¯SplitèŠ‚ç‚¹çš„å¦ä¸€é‡è¦åº”ç”¨é¢†åŸŸã€‚åœ¨å¤„ç†UVåæ ‡æ—¶ï¼Œå¸¸éœ€å•ç‹¬æ“ä½œUå’ŒVåˆ†é‡ä»¥å®ç°å„ç±»çº¹ç†æ•ˆæœã€‚</p>
<ul>
<li>UVåæ ‡åˆ†é‡æå–ï¼šé€šè¿‡SplitèŠ‚ç‚¹åˆ†ç¦»UVåæ ‡çš„xå’Œyåˆ†é‡ï¼Œå¯ç‹¬ç«‹æ§åˆ¶æ°´å¹³å’Œå‚ç›´æ–¹å‘çš„çº¹ç†æ»šåŠ¨é€Ÿåº¦</li>
<li>å±€éƒ¨åæ ‡å˜æ¢ï¼šå¤„ç†ç‰©ä½“å±€éƒ¨åæ ‡ç³»æ—¶ï¼Œä½¿ç”¨SplitèŠ‚ç‚¹åˆ†ç¦»xyzåˆ†é‡ï¼Œå®ç°åŸºäºå•ä¸ªåæ ‡è½´çš„ç‰¹æ•ˆ</li>
<li>æåæ ‡è½¬æ¢ï¼šå®ç°æåæ ‡æ•ˆæœæ—¶ï¼Œéœ€åˆ†åˆ«å¤„ç†è·ç¦»å’Œè§’åº¦åˆ†é‡ï¼ŒSplitèŠ‚ç‚¹ä¸ºæ­¤æä¾›äº†åŸºç¡€æ”¯æŒ</li>
</ul>
<p>åœ¨å®é™…é¡¹ç›®ä¸­ï¼ŒSplitèŠ‚ç‚¹å¸¸ç”¨äºåˆ›å»ºé«˜çº§UVåŠ¨ç”»æ•ˆæœã€‚ä¾‹å¦‚ï¼Œé€šè¿‡å•ç‹¬æ§åˆ¶Uåæ ‡å®ç°æ°´å¹³æµåŠ¨çš„æ°´é¢æ•ˆæœï¼ŒåŒæ—¶ä¿æŒVåæ ‡ä¸å˜ä»¥è·å¾—æ­£ç¡®çš„çº¹ç†æ‹‰ä¼¸ã€‚</p>
<h3 data-id="heading-9">æ•°æ®å¯è§†åŒ–å®ç°</h3>
<p>SplitèŠ‚ç‚¹åœ¨æ•°æ®å¯è§†åŒ–æ–¹é¢å…·æœ‰ç‹¬ç‰¹ä»·å€¼ã€‚é€šè¿‡å°†å¤šç»´æ•°æ®åˆ†ç¦»ä¸ºå•ç»´åˆ†é‡ï¼Œå¯å®ç°å„ç±»ç›´è§‚çš„æ•°æ®ç›‘æ§æ•ˆæœã€‚</p>
<ul>
<li>é€šé“å€¼å®æ—¶ç›‘æ§ï¼šåœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œä½¿ç”¨SplitèŠ‚ç‚¹åˆ†ç¦»é¢œè‰²æˆ–å‘é‡çš„å„é€šé“ï¼Œè¿æ¥è‡³è‡ªå‘å…‰è¾“å‡ºï¼Œå®æ—¶è§‚å¯Ÿå„é€šé“æ•°å€¼å˜åŒ–</li>
<li>è°ƒè¯•ä¿¡æ¯æ˜¾ç¤ºï¼šé€šè¿‡åˆ†ç¦»é‡è¦çš„ä¸­é—´è®¡ç®—ç»“æœï¼Œåœ¨å±å¹•ç‰¹å®šåŒºåŸŸæ˜¾ç¤ºæ•°å€¼ä¿¡æ¯ï¼Œè¾…åŠ©ç€è‰²å™¨è°ƒè¯•</li>
<li>æ€§èƒ½åˆ†æè¾…åŠ©ï¼šå°†å¤æ‚è®¡ç®—è¿‡ç¨‹åˆ†è§£ä¸ºå¤šä¸ªæ­¥éª¤ï¼Œä½¿ç”¨SplitèŠ‚ç‚¹ç›‘æ§æ¯æ­¥è¾“å‡ºå€¼ï¼Œè¿›è¡Œæ€§èƒ½ç“¶é¢ˆåˆ†æ</li>
</ul>
<p>åœ¨å¤æ‚ç€è‰²å™¨å¼€å‘ä¸­ï¼ŒSplitèŠ‚ç‚¹å¯ä½œä¸ºè°ƒè¯•å·¥å…·ä½¿ç”¨ã€‚é€šè¿‡å°†å…³é”®ä¸­é—´å˜é‡åˆ†ç¦»æ˜¾ç¤ºï¼Œå¼€å‘è€…å¯å¿«é€Ÿå®šä½é—®é¢˜æ‰€åœ¨ã€‚</p>
<h2 data-id="heading-10">ä½¿ç”¨æŠ€å·§ä¸æ³¨æ„äº‹é¡¹</h2>
<h3 data-id="heading-11">ç»´åº¦åŒ¹é…ç­–ç•¥</h3>
<p>ä½¿ç”¨SplitèŠ‚ç‚¹æ—¶ï¼Œæ­£ç¡®çš„ç»´åº¦åŒ¹é…ç­–ç•¥è‡³å…³é‡è¦ã€‚ç”¨æˆ·éœ€æ ¹æ®è¾“å…¥å‘é‡çš„å®é™…ç»´åº¦ç†è§£è¾“å‡ºå€¼çš„å«ä¹‰ï¼Œé¿å…é€»è¾‘é”™è¯¯ã€‚</p>
<ul>
<li>Vector2è¾“å…¥å¤„ç†ï¼šä»…Rå’ŒGé€šé“åŒ…å«æœ‰æ•ˆæ•°æ®ï¼ŒBå’ŒAé€šé“è¾“å‡ºä¸º0ï¼Œé€‚ç”¨äºå¤„ç†äºŒç»´åæ ‡æˆ–ç®€å•å‚æ•°å¯¹</li>
<li>Vector3è¾“å…¥å¤„ç†ï¼šRã€Gã€Bä¸‰é€šé“åŒ…å«æœ‰æ•ˆæ•°æ®ï¼ŒAé€šé“è¾“å‡ºä¸º0ï¼Œé€‚ç”¨äºå¤„ç†ä¸‰ç»´åæ ‡æˆ–é¢œè‰²å€¼ï¼ˆæ— é€æ˜åº¦ï¼‰</li>
<li>Vector4è¾“å…¥å¤„ç†ï¼šæ‰€æœ‰å››é€šé“å‡å«æœ‰æ•ˆæ•°æ®ï¼Œé€‚ç”¨äºå¤„ç†å®Œæ•´é¢œè‰²ä¿¡æ¯æˆ–å››ç»´æ•°æ®</li>
</ul>
<p>ç»´åº¦åŒ¹é…ä¸ä»…å½±å“æ•°æ®æ­£ç¡®æ€§ï¼Œè¿˜å…³ç³»åˆ°ç€è‰²å™¨æ€§èƒ½è¡¨ç°ã€‚é”™è¯¯åœ°ä½¿ç”¨é«˜ç»´è¾“å…¥å¤„ç†ä½ç»´æ•°æ®å¯èƒ½å¯¼è‡´ä¸å¿…è¦çš„è®¡ç®—å¼€é”€ã€‚</p>
<h3 data-id="heading-12">ä¸å…¶ä»–èŠ‚ç‚¹é…åˆæŠ€å·§</h3>
<p>SplitèŠ‚ç‚¹é€šå¸¸éœ€ä¸å…¶ä»–èŠ‚ç‚¹é…åˆä½¿ç”¨ï¼Œä»¥å‘æŒ¥æœ€å¤§æ•ˆç”¨ã€‚</p>
<ul>
<li>ä¸ç»„åˆèŠ‚ç‚¹ï¼ˆCombine Nodeï¼‰é…åˆï¼šSplitä¸CombineèŠ‚ç‚¹æ„æˆShaderGraphä¸­çš„æ•°æ®æ‹†åˆ†ç»„è£…æµæ°´çº¿ï¼Œå¯çµæ´»é‡ç»„å‘é‡æ•°æ®</li>
<li>ä¸æ•°å­¦èŠ‚ç‚¹é…åˆï¼šå°†åˆ†ç¦»åçš„é€šé“å€¼è¿æ¥è‡³ä¸åŒæ•°å­¦èŠ‚ç‚¹ï¼Œå®ç°åŸºäºé€šé“çš„å·®å¼‚åŒ–å¤„ç†</li>
<li>ä¸æ¡ä»¶èŠ‚ç‚¹é…åˆï¼šæ ¹æ®åˆ†ç¦»åçš„å•ä¸ªé€šé“å€¼è¿›è¡Œæ¡ä»¶åˆ¤æ–­ï¼Œåˆ›å»ºåŸºäºé˜ˆå€¼çš„æ•ˆæœåˆ‡æ¢</li>
<li>ä¸æ—¶é—´èŠ‚ç‚¹é…åˆï¼šå¯¹ç‰¹å®šé€šé“å€¼è¿›è¡Œæ—¶é—´é©±åŠ¨çš„åŠ¨ç”»å¤„ç†ï¼Œåˆ›é€ åŠ¨æ€è§†è§‰æ•ˆæœ</li>
</ul>
<p>å…¸å‹é…åˆä½¿ç”¨åœºæ™¯ä¹‹ä¸€æ˜¯é¢œè‰²æ ¡æ­£ç³»ç»Ÿã€‚é€šè¿‡SplitèŠ‚ç‚¹åˆ†ç¦»é¢œè‰²å€¼ï¼Œå¯¹å„é€šé“åº”ç”¨ä¸åŒçš„ä¼½é©¬æ ¡æ­£æ›²çº¿ï¼Œå†ä½¿ç”¨CombineèŠ‚ç‚¹é‡æ–°ç»„åˆï¼Œå®ç°ç²¾ç»†é¢œè‰²æ§åˆ¶ã€‚</p>
<h3 data-id="heading-13">æ€§èƒ½ä¼˜åŒ–å»ºè®®</h3>
<p>å°½ç®¡SplitèŠ‚ç‚¹æœ¬èº«æ€§èƒ½å¼€é”€è¾ƒå°ï¼Œä½†åœ¨å¤æ‚ç€è‰²å™¨ä¸­ä»éœ€æ³¨æ„ä¼˜åŒ–ä½¿ç”¨ã€‚</p>
<ul>
<li>é¿å…ä¸å¿…è¦çš„æ‹†åˆ†ï¼šä»…æ‹†åˆ†å®é™…éœ€ä½¿ç”¨çš„é€šé“ï¼Œå‡å°‘å†—ä½™æ“ä½œ</li>
<li>åˆç†ä½¿ç”¨é€šé“å‰ªæï¼šShaderç¼–è¯‘å™¨è‡ªåŠ¨å‰ªææœªä½¿ç”¨çš„è¾“å‡ºé€šé“ï¼Œä½†æ˜¾å¼æ–­å¼€ä¸éœ€è¦çš„è¿æ¥å¯ä½¿èŠ‚ç‚¹å›¾æ›´æ¸…æ™°</li>
<li>æ‰¹é‡å¤„ç†ç­–ç•¥ï¼šå½“éœ€å¯¹å¤šä¸ªå‘é‡è¿›è¡Œç›¸åŒé€šé“æ‹†åˆ†æ—¶ï¼Œè€ƒè™‘ä½¿ç”¨SwizzleèŠ‚ç‚¹æˆ–å…¶ä»–æ›¿ä»£æ–¹æ¡ˆ</li>
</ul>
<p>æ€§èƒ½ä¼˜åŒ–çš„å…³é”®åœ¨äºç†è§£GPUçš„å¹¶è¡Œè®¡ç®—ç‰¹æ€§ã€‚SplitèŠ‚ç‚¹çš„æ“ä½œåœ¨GPUä¸Šé€šå¸¸ä»¥å‘é‡åŒ–æ–¹å¼æ‰§è¡Œï¼Œåˆç†è®¾è®¡å¯å……åˆ†åˆ©ç”¨è¯¥ç‰¹æ€§ã€‚</p>
<h2 data-id="heading-14">é«˜çº§åº”ç”¨ä¸ç‰¹æ®ŠæŠ€å·§</h2>
<h3 data-id="heading-15">å¤šç»´åº¦æ•°æ®æµå¤„ç†</h3>
<p>åœ¨å¤æ‚ç€è‰²å™¨è®¾è®¡ä¸­ï¼ŒSplitèŠ‚ç‚¹å¯ç”¨äºå¤„ç†å¤šç»´åº¦æ•°æ®æµã€‚é€šè¿‡åˆ›å»ºåŸºäºSplitèŠ‚ç‚¹çš„æ•°æ®å¤„ç†ç®¡é“ï¼Œå¯å®ç°å¤æ‚çš„ç‰¹æ•ˆç»„åˆã€‚</p>
<ul>
<li>å¹¶è¡Œé€šé“å¤„ç†ï¼šå°†åˆ†ç¦»åçš„ä¸åŒé€šé“è¿æ¥è‡³å„è‡ªç‹¬ç«‹çš„å¤„ç†åˆ†æ”¯ï¼Œæœ€ååˆå¹¶è¾“å‡ºï¼Œå……åˆ†åˆ©ç”¨GPUå¹¶è¡Œè®¡ç®—èƒ½åŠ›</li>
<li>æ•°æ®é‡æ˜ å°„ï¼šé€šè¿‡SplitèŠ‚ç‚¹åˆ†ç¦»åŸå§‹æ•°æ®ï¼Œç»æ•°å­¦å˜æ¢åé‡æ–°ç»„åˆï¼Œå®ç°æ•°æ®çš„éçº¿æ€§é‡æ˜ å°„æ•ˆæœ</li>
<li>æ¡ä»¶é€šé“æ“ä½œï¼šåŸºäºç‰¹å®šæ¡ä»¶é€‰æ‹©æ€§åœ°ä¿®æ”¹æŸäº›é€šé“å€¼ï¼Œä¿æŒå…¶ä»–é€šé“ä¸å˜ï¼Œå®ç°ç²¾ç¡®æ•ˆæœæ§åˆ¶</li>
</ul>
<p>é«˜çº§åº”ç”¨å®ä¾‹ä¹‹ä¸€æ˜¯åŸºäºé€šé“çš„æè´¨æ··åˆç³»ç»Ÿã€‚é€šè¿‡SplitèŠ‚ç‚¹åˆ†ç¦»ä¸åŒæè´¨çš„å‚æ•°ï¼Œæ ¹æ®é®ç½©é€šé“å€¼è¿›è¡ŒåŠ æƒæ··åˆï¼Œåˆ›é€ è‡ªç„¶çš„æè´¨è¿‡æ¸¡æ•ˆæœã€‚</p>
<h3 data-id="heading-16">åŠ¨æ€æ•ˆæœåˆ›å»º</h3>
<p>SplitèŠ‚ç‚¹åœ¨åˆ›å»ºåŠ¨æ€è§†è§‰æ•ˆæœæ–¹é¢å…·æœ‰ç‹¬ç‰¹ä¼˜åŠ¿ã€‚é€šè¿‡å°†æ—¶é—´å› ç´ å¼•å…¥é€šé“å¤„ç†ï¼Œå¯åˆ›é€ ä¸°å¯Œçš„åŠ¨ç”»æ•ˆæœã€‚</p>
<ul>
<li>é€šé“ç‹¬ç«‹åŠ¨ç”»ï¼šä¸ºåˆ†ç¦»åçš„ä¸åŒé€šé“è®¾ç½®ä¸åŒåŠ¨ç”»é¢‘ç‡ä¸å¹…åº¦ï¼Œåˆ›é€ å¤æ‚çš„åŠ¨æ€çº¹ç†æ•ˆæœ</li>
<li>äº¤äº’å“åº”æ•ˆæœï¼šæ ¹æ®ç©å®¶è¾“å…¥æˆ–æ¸¸æˆçŠ¶æ€ï¼ŒåŠ¨æ€è°ƒæ•´ç‰¹å®šé€šé“å€¼ï¼Œå®ç°å®æ—¶äº¤äº’çš„è§†è§‰åé¦ˆ</li>
<li>ç¯å¢ƒé€‚åº”æ•ˆæœï¼šæ ¹æ®åœºæ™¯å…‰ç…§æ¡ä»¶æˆ–å…¶ä»–ç¯å¢ƒå› ç´ ï¼Œè‡ªåŠ¨è°ƒæ•´æè´¨çš„ä¸åŒå±æ€§é€šé“ï¼Œå¢å¼ºè§†è§‰çœŸå®æ„Ÿ</li>
</ul>
<p>åŠ¨æ€æ•ˆæœåˆ›å»ºçš„å…³é”®åœ¨äºç†è§£æ—¶é—´ä¸é€šé“å€¼çš„æ•°å­¦å…³ç³»ã€‚é€šè¿‡å·§å¦™çš„å‡½æ•°è®¾è®¡ï¼Œå¯å®ç°å„ç±»å¤æ‚åŠ¨ç”»æ¨¡å¼ã€‚</p>
<h2 data-id="heading-17">å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ</h2>
<h3 data-id="heading-18">æ•°æ®ç±»å‹ä¸åŒ¹é…é—®é¢˜</h3>
<p>ä½¿ç”¨SplitèŠ‚ç‚¹æ—¶å¸¸é‡åˆ°æ•°æ®ç±»å‹ä¸åŒ¹é…é—®é¢˜ï¼Œä¸»è¦è¡¨ç°ä¸ºè¾“å…¥å‘é‡ç»´åº¦ä¸é¢„æœŸä¸ç¬¦ã€‚è§£å†³æ–¹æ¡ˆåŒ…æ‹¬ï¼šåˆ©ç”¨SplitèŠ‚ç‚¹çš„åŠ¨æ€ç±»å‹ç‰¹æ€§è‡ªåŠ¨å¤„ç†ä¸åŒç»´åº¦è¾“å…¥ï¼›åœ¨éœ€è¦æ—¶ä½¿ç”¨é€‚å½“çš„è½¬æ¢èŠ‚ç‚¹ç¡®ä¿æ•°æ®ç»´åº¦æ­£ç¡®ï¼›èŠ‚ç‚¹è¿æ¥å®Œæˆåï¼Œé€šè¿‡é¢„è§ˆåŠŸèƒ½éªŒè¯å„é€šé“è¾“å‡ºå€¼æ˜¯å¦ç¬¦åˆé¢„æœŸã€‚</p>
<p>å…·ä½“è€Œè¨€ï¼Œå½“é‡åˆ°Vector2è¾“å…¥ä½†éœ€å››ä¸ªæœ‰æ•ˆé€šé“æ—¶ï¼Œåº”å…ˆä½¿ç”¨è½¬æ¢èŠ‚ç‚¹å°†Vector2è½¬ä¸ºVector4ï¼Œå†ä½¿ç”¨SplitèŠ‚ç‚¹åˆ†ç¦»ã€‚</p>
<h3 data-id="heading-19">æ€§èƒ½ç“¶é¢ˆæ’æŸ¥</h3>
<p>å½“ç€è‰²å™¨å‡ºç°æ€§èƒ½é—®é¢˜æ—¶ï¼ŒSplitèŠ‚ç‚¹çš„ä½¿ç”¨æ–¹å¼å¯èƒ½æ˜¯å½±å“å› ç´ ä¹‹ä¸€ã€‚éœ€è¿›è¡Œè¿æ¥ä¼˜åŒ–ï¼Œæ£€æŸ¥å¹¶ç§»é™¤æœªä½¿ç”¨çš„è¾“å‡ºç«¯å£è¿æ¥ï¼Œå‡å°‘ä¸å¿…è¦è®¡ç®—ï¼›ç®€åŒ–èŠ‚ç‚¹å›¾ï¼Œé¿å…è¿‡åº¦å¤æ‚çš„æ‹†åˆ†-å¤„ç†-é‡ç»„é“¾æ¡ï¼Œå¯»æ‰¾æ›´ç®€æ´çš„ç­‰æ•ˆå®ç°ï¼›å½“å¤šä¸ªéƒ¨åˆ†éœ€è¦åŒä¸€é€šé“å€¼æ—¶ï¼Œè€ƒè™‘ä½¿ç”¨åˆ†æ”¯èŠ‚ç‚¹è€Œéå¤šæ¬¡æ‹†åˆ†ã€‚</p>
<p>æ€§èƒ½åˆ†æå·¥å…·çš„ä½¿ç”¨åŒæ ·é‡è¦ã€‚Unityæä¾›çš„Frame Debuggerç­‰å·¥å…·å¯å¸®åŠ©å¼€å‘è€…è¯†åˆ«æ€§èƒ½çƒ­ç‚¹ã€‚</p>
<h3 data-id="heading-20">è§†è§‰æ•ˆæœè°ƒè¯•æŠ€å·§</h3>
<p>è°ƒè¯•åŸºäºSplitèŠ‚ç‚¹çš„è§†è§‰æ•ˆæœæ—¶ï¼Œå¯é‡‡ç”¨åˆ†å±‚è°ƒè¯•ç­–ç•¥ã€‚åŒ…æ‹¬ï¼šé€šè¿‡å°†å•ä¸ªé€šé“ç›´æ¥è¿æ¥è‡³ä¸»é¢œè‰²è¾“å‡ºï¼Œå•ç‹¬è°ƒè¯•å„é€šé“æ•ˆæœï¼›ä½¿ç”¨SplitèŠ‚ç‚¹åˆ†ç¦»ä¸­é—´è®¡ç®—ç»“æœï¼Œåœ¨ç¼–è¾‘å™¨ä¸­è§‚å¯Ÿæ•°å€¼å˜åŒ–ï¼›ä»ç®€å•çš„æ‹†åˆ†æ“ä½œå¼€å§‹ï¼Œé€æ­¥æ·»åŠ å¤æ‚å¤„ç†é€»è¾‘ï¼Œç¡®ä¿æ¯ä¸€æ­¥æ­£ç¡®æ— è¯¯ã€‚</p>
<p>è°ƒè¯•è¿‡ç¨‹ä¸­ï¼Œå»ºè®®ä½¿ç”¨æ˜æ˜¾çš„æµ‹è¯•å€¼éªŒè¯å„é€šé“åŠŸèƒ½ã€‚ä¾‹å¦‚ï¼Œå°†Ré€šé“è®¾ä¸º1.0ï¼Œå…¶ä»–é€šé“è®¾ä¸º0ï¼Œè§‚å¯Ÿè¾“å‡ºç»“æœæ˜¯å¦ç¬¦åˆé¢„æœŸã€‚</p>
<hr/>
<blockquote>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2Fchenghai37%2Fcategory_13074589.html%3Ffromshare%3Dblogcolumn%26sharetype%3Dblogcolumn%26sharerId%3D13074589%26sharerefer%3DPC%26sharesource%3Dchenghai37%26sharefrom%3Dfrom_link" target="_blank" title="https://blog.csdn.net/chenghai37/category_13074589.html?fromshare=blogcolumn&amp;sharetype=blogcolumn&amp;sharerId=13074589&amp;sharerefer=PC&amp;sharesource=chenghai37&amp;sharefrom=from_link" ref="nofollow noopener noreferrer">ã€Unity Shader Graph ä½¿ç”¨ä¸ç‰¹æ•ˆå®ç°ã€‘</a><strong>ä¸“æ -ç›´è¾¾</strong>
ï¼ˆæ¬¢è¿<em>ç‚¹èµç•™è¨€</em>æ¢è®¨ï¼Œæ›´å¤šäººåŠ å…¥è¿›æ¥èƒ½æ›´åŠ å®Œå–„è¿™ä¸ªæ¢ç´¢çš„è¿‡ç¨‹ï¼ŒğŸ™ï¼‰</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸€æ–‡è§£é”vue3ä¸­hooksçš„ä½¿ç”¨å§¿åŠ¿]]></title>    <link>https://juejin.cn/post/7593607642552483866</link>    <guid>https://juejin.cn/post/7593607642552483866</guid>    <pubDate>2026-01-11T03:32:49.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7593607642552483866" data-draft-id="7593528990848319539" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸€æ–‡è§£é”vue3ä¸­hooksçš„ä½¿ç”¨å§¿åŠ¿"/> <meta itemprop="keywords" content="Vue.js"/> <meta itemprop="datePublished" content="2026-01-11T03:32:49.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åŒ—è¾°alk"/> <meta itemprop="url" content="https://juejin.cn/user/1772855673241352"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸€æ–‡è§£é”vue3ä¸­hooksçš„ä½¿ç”¨å§¿åŠ¿
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1772855673241352/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åŒ—è¾°alk
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-11T03:32:49.000Z" title="Sun Jan 11 2026 03:32:49 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€</h2>
<p>Vue 3 å¼•å…¥äº† Composition APIï¼Œä¸ºå¼€å‘è€…æä¾›äº†æ›´çµæ´»çš„æ–¹å¼æ¥ç»„ç»‡ç»„ä»¶é€»è¾‘ã€‚Hooks æ˜¯ Composition API çš„æ ¸å¿ƒæ¦‚å¿µä¹‹ä¸€ï¼Œå®ƒå€Ÿé‰´äº† React Hooks çš„æ€æƒ³ï¼Œå…è®¸å¼€å‘è€…å°†é€»è¾‘æŠ½ç¦»ä¸ºå¯å¤ç”¨çš„å‡½æ•°ã€‚æœ¬æ–‡å°†è¯¦ç»†ä»‹ç» Vue 3 ä¸­ Hooks çš„ä½¿ç”¨å§¿åŠ¿ï¼Œå¸®åŠ©ä½ æ›´å¥½åœ°æŒæ¡è¿™ä¸€å¼ºå¤§å·¥å…·ã€‚</p>
<hr/>
<h2 data-id="heading-1">ä»€ä¹ˆæ˜¯ Hooksï¼Ÿ</h2>
<p>Hooks æ˜¯ä¸€ç§å°†é€»è¾‘æŠ½ç¦»ä¸ºå¯å¤ç”¨å‡½æ•°çš„æ–¹å¼ã€‚å®ƒå…è®¸å¼€å‘è€…åœ¨å‡½æ•°ç»„ä»¶ä¸­ä½¿ç”¨çŠ¶æ€å’Œç”Ÿå‘½å‘¨æœŸé’©å­ï¼Œä»è€Œé¿å…ç±»ç»„ä»¶çš„å¤æ‚æ€§ã€‚åœ¨ Vue 3 ä¸­ï¼ŒHooks é€šå¸¸æŒ‡é€šè¿‡ Composition API åˆ›å»ºçš„è‡ªå®šä¹‰é€»è¾‘å‡½æ•°ã€‚</p>
<hr/>
<h2 data-id="heading-2">Vue 3 ä¸­çš„ Hooks</h2>
<p>Vue 3 çš„ Composition API æä¾›äº† <code>ref</code>ã€<code>reactive</code>ã€<code>computed</code>ã€<code>watch</code> ç­‰å‡½æ•°ï¼Œè¿™äº›å‡½æ•°å¯ä»¥ç”¨äºåˆ›å»ºè‡ªå®šä¹‰ Hooksã€‚é€šè¿‡ Hooksï¼Œå¼€å‘è€…å¯ä»¥å°†ç»„ä»¶çš„é€»è¾‘æ‹†åˆ†ä¸ºæ›´å°çš„ã€å¯å¤ç”¨çš„å•å…ƒã€‚</p>
<hr/>
<h2 data-id="heading-3">Hooks çš„åŸºæœ¬ä½¿ç”¨</h2>
<h3 data-id="heading-4">åˆ›å»ºè‡ªå®šä¹‰ Hook</h3>
<p>è‡ªå®šä¹‰ Hook æ˜¯ä¸€ä¸ªæ™®é€šçš„ JavaScript å‡½æ•°ï¼Œé€šå¸¸ä»¥ <code>use</code> å¼€å¤´å‘½åã€‚å®ƒå¯ä»¥ä½¿ç”¨ Composition API æä¾›çš„å‡½æ•°æ¥ç®¡ç†çŠ¶æ€å’Œå‰¯ä½œç”¨ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { ref, onMounted, onUnmounted } <span class="hljs-keyword">from</span> <span class="hljs-string">"vue"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">useMousePosition</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> x = <span class="hljs-title function_">ref</span>(<span class="hljs-number">0</span>);
  <span class="hljs-keyword">const</span> y = <span class="hljs-title function_">ref</span>(<span class="hljs-number">0</span>);

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">updatePosition</span> = (<span class="hljs-params">event</span>) =&gt; {
    x.<span class="hljs-property">value</span> = event.<span class="hljs-property">pageX</span>;
    y.<span class="hljs-property">value</span> = event.<span class="hljs-property">pageY</span>;
  };

  <span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"mousemove"</span>, updatePosition);
  });

  <span class="hljs-title function_">onUnmounted</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">"mousemove"</span>, updatePosition);
  });

  <span class="hljs-keyword">return</span> { x, y };
}
</code></pre>
<h3 data-id="heading-5">ä½¿ç”¨è‡ªå®šä¹‰ Hook</h3>
<p>åœ¨ç»„ä»¶ä¸­ä½¿ç”¨è‡ªå®šä¹‰ Hook éå¸¸ç®€å•ï¼Œåªéœ€è°ƒç”¨ Hook å‡½æ•°å¹¶è§£æ„è¿”å›å€¼å³å¯ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript">&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>X: {{ x }}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Y: {{ y }}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
&lt;/template&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { useMousePosition } <span class="hljs-keyword">from</span> <span class="hljs-string">"./useMousePosition"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-title function_">setup</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> { x, y } = <span class="hljs-title function_">useMousePosition</span>();
    <span class="hljs-keyword">return</span> { x, y };
  },
};
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
</code></pre>
<hr/>
<h2 data-id="heading-6">Hooks çš„å¸¸è§åœºæ™¯</h2>
<h3 data-id="heading-7">çŠ¶æ€ç®¡ç†</h3>
<p>Hooks å¯ä»¥ç”¨äºç®¡ç†ç»„ä»¶çš„å±€éƒ¨çŠ¶æ€ã€‚ä¾‹å¦‚ï¼Œåˆ›å»ºä¸€ä¸ªè®¡æ•°å™¨ Hookï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { ref } <span class="hljs-keyword">from</span> <span class="hljs-string">"vue"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">useCounter</span>(<span class="hljs-params">initialValue = <span class="hljs-number">0</span></span>) {
  <span class="hljs-keyword">const</span> count = <span class="hljs-title function_">ref</span>(initialValue);

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">increment</span> = (<span class="hljs-params"/>) =&gt; {
    count.<span class="hljs-property">value</span>++;
  };

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">decrement</span> = (<span class="hljs-params"/>) =&gt; {
    count.<span class="hljs-property">value</span>--;
  };

  <span class="hljs-keyword">return</span> { count, increment, decrement };
}
</code></pre>
<h3 data-id="heading-8">å‰¯ä½œç”¨ç®¡ç†</h3>
<p>Hooks å¯ä»¥ç”¨äºç®¡ç†å‰¯ä½œç”¨ï¼Œä¾‹å¦‚ç›‘å¬çª—å£å¤§å°å˜åŒ–ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { ref, onMounted, onUnmounted } <span class="hljs-keyword">from</span> <span class="hljs-string">"vue"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">useWindowSize</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> width = <span class="hljs-title function_">ref</span>(<span class="hljs-variable language_">window</span>.<span class="hljs-property">innerWidth</span>);
  <span class="hljs-keyword">const</span> height = <span class="hljs-title function_">ref</span>(<span class="hljs-variable language_">window</span>.<span class="hljs-property">innerHeight</span>);

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">updateSize</span> = (<span class="hljs-params"/>) =&gt; {
    width.<span class="hljs-property">value</span> = <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerWidth</span>;
    height.<span class="hljs-property">value</span> = <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerHeight</span>;
  };

  <span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"resize"</span>, updateSize);
  });

  <span class="hljs-title function_">onUnmounted</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">"resize"</span>, updateSize);
  });

  <span class="hljs-keyword">return</span> { width, height };
}
</code></pre>
<h3 data-id="heading-9">é€»è¾‘å¤ç”¨</h3>
<p>Hooks çš„æœ€å¤§ä¼˜åŠ¿æ˜¯é€»è¾‘å¤ç”¨ã€‚ä¾‹å¦‚ï¼Œåˆ›å»ºä¸€ä¸ªè¡¨å•éªŒè¯ Hookï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { ref } <span class="hljs-keyword">from</span> <span class="hljs-string">"vue"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">useFormValidation</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> errors = <span class="hljs-title function_">ref</span>({});

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">validate</span> = (<span class="hljs-params">rules, formData</span>) =&gt; {
    errors.<span class="hljs-property">value</span> = {};
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> field <span class="hljs-keyword">in</span> rules) {
      <span class="hljs-keyword">const</span> rule = rules[field];
      <span class="hljs-keyword">if</span> (rule.<span class="hljs-property">required</span> &amp;&amp; !formData[field]) {
        errors.<span class="hljs-property">value</span>[field] = <span class="hljs-string">"è¯¥å­—æ®µä¸ºå¿…å¡«é¡¹"</span>;
      }
    }
  };

  <span class="hljs-keyword">return</span> { errors, validate };
}
</code></pre>
<hr/>
<h2 data-id="heading-10">Hooks çš„æœ€ä½³å®è·µ</h2>
<h3 data-id="heading-11">å‘½åè§„èŒƒ</h3>
<p>è‡ªå®šä¹‰ Hook é€šå¸¸ä»¥ <code>use</code> å¼€å¤´å‘½åï¼Œä¾‹å¦‚ <code>useMousePosition</code>ã€<code>useCounter</code>ã€‚è¿™æœ‰åŠ©äºåŒºåˆ†æ™®é€šå‡½æ•°å’Œ Hooksã€‚</p>
<h3 data-id="heading-12">å•ä¸€èŒè´£</h3>
<p>æ¯ä¸ª Hook åº”è¯¥åªè´Ÿè´£ä¸€ä¸ªåŠŸèƒ½ï¼Œéµå¾ªå•ä¸€èŒè´£åŸåˆ™ã€‚ä¾‹å¦‚ï¼Œ<code>useMousePosition</code> åªè´Ÿè´£è·å–é¼ æ ‡ä½ç½®ï¼Œ<code>useCounter</code> åªè´Ÿè´£è®¡æ•°ã€‚</p>
<h3 data-id="heading-13">æ€§èƒ½ä¼˜åŒ–</h3>
<p>åœ¨ Hooks ä¸­ä½¿ç”¨ <code>ref</code> å’Œ <code>computed</code> æ—¶ï¼Œæ³¨æ„é¿å…ä¸å¿…è¦çš„è®¡ç®—å’Œæ¸²æŸ“ã€‚å¯ä»¥ä½¿ç”¨ <code>watchEffect</code> æˆ– <code>watch</code> æ¥ä¼˜åŒ–æ€§èƒ½ã€‚</p>
<hr/>
<h2 data-id="heading-14">Hooks ä¸ Mixins çš„å¯¹æ¯”</h2>
<p>åœ¨ Vue 2 ä¸­ï¼ŒMixins æ˜¯é€»è¾‘å¤ç”¨çš„ä¸»è¦æ–¹å¼ã€‚ç„¶è€Œï¼ŒMixins å­˜åœ¨å‘½åå†²çªå’Œéšå¼ä¾èµ–ç­‰é—®é¢˜ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼ŒHooks å…·æœ‰ä»¥ä¸‹ä¼˜åŠ¿ï¼š</p>
<ul>
<li><strong>æ˜¾å¼ä¾èµ–</strong>ï¼šHooks çš„ä¾èµ–å…³ç³»æ›´åŠ æ¸…æ™°ã€‚</li>
<li><strong>é€»è¾‘å¤ç”¨</strong>ï¼šHooks å¯ä»¥æ›´çµæ´»åœ°ç»„åˆå’Œå¤ç”¨ã€‚</li>
<li><strong>ç±»å‹æ”¯æŒ</strong>ï¼šHooks æ›´å®¹æ˜“ä¸ TypeScript é›†æˆã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-15">æ€»ç»“</h2>
<p>Vue 3 ä¸­çš„ Hooks æ˜¯ Composition API çš„æ ¸å¿ƒç‰¹æ€§ä¹‹ä¸€ï¼Œå®ƒæä¾›äº†ä¸€ç§æ›´çµæ´»ã€æ›´å¼ºå¤§çš„æ–¹å¼æ¥ç»„ç»‡ç»„ä»¶é€»è¾‘ã€‚é€šè¿‡è‡ªå®šä¹‰ Hooksï¼Œå¼€å‘è€…å¯ä»¥å°†é€»è¾‘æŠ½ç¦»ä¸ºå¯å¤ç”¨çš„å‡½æ•°ï¼Œä»è€Œæé«˜ä»£ç çš„å¯ç»´æŠ¤æ€§å’Œå¯è¯»æ€§ã€‚å¸Œæœ›æœ¬æ–‡èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°æŒæ¡ Vue 3 ä¸­ Hooks çš„ä½¿ç”¨å§¿åŠ¿ï¼Œè§£é”æ›´å¤šå¼€å‘æŠ€å·§ï¼</p>
<hr/>
<p><strong>æ³¨æ„</strong>ï¼šHooks æ˜¯ Vue 3 çš„æ–°ç‰¹æ€§ï¼Œå»ºè®®ç»“åˆå…·ä½“é¡¹ç›®éœ€æ±‚çµæ´»è¿ç”¨ï¼Œå¹¶éµå¾ªæœ€ä½³å®è·µã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vue3 ç”Ÿå‘½å‘¨æœŸæ·±åº¦è§£æï¼šä» Options API åˆ° Composition API çš„å®Œæ•´æŒ‡å—]]></title>    <link>https://juejin.cn/post/7593603345518182427</link>    <guid>https://juejin.cn/post/7593603345518182427</guid>    <pubDate>2026-01-11T03:33:58.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7593603345518182427" data-draft-id="7593603345518166043" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vue3 ç”Ÿå‘½å‘¨æœŸæ·±åº¦è§£æï¼šä» Options API åˆ° Composition API çš„å®Œæ•´æŒ‡å—"/> <meta itemprop="keywords" content="Vue.js"/> <meta itemprop="datePublished" content="2026-01-11T03:33:58.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åŒ—è¾°alk"/> <meta itemprop="url" content="https://juejin.cn/user/1772855673241352"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vue3 ç”Ÿå‘½å‘¨æœŸæ·±åº¦è§£æï¼šä» Options API åˆ° Composition API çš„å®Œæ•´æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1772855673241352/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åŒ—è¾°alk
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-11T03:33:58.000Z" title="Sun Jan 11 2026 03:33:58 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>æ‘˜è¦</strong></h2>
<p>Vue3 åœ¨ä¿ç•™æ ¸å¿ƒæ¦‚å¿µçš„åŒæ—¶ï¼Œå¯¹ç”Ÿå‘½å‘¨æœŸç³»ç»Ÿè¿›è¡Œäº†é‡è¦ä¼˜åŒ–å’Œé‡æ„ã€‚æœ¬æ–‡å°†æ·±å…¥æ¢è®¨ Vue3 ç”Ÿå‘½å‘¨æœŸçš„å˜åŒ–ã€ç»„åˆå¼ API çš„ä½¿ç”¨æ–¹å¼ã€æ–°æ—§ç”Ÿå‘½å‘¨æœŸå¯¹æ¯”ï¼Œé€šè¿‡è¯¦ç»†çš„ä»£ç ç¤ºä¾‹ã€æ‰§è¡Œæµç¨‹åˆ†æå’Œæœ€ä½³å®è·µï¼Œå¸®åŠ©ä½ å…¨é¢æŒæ¡ Vue3 ç”Ÿå‘½å‘¨æœŸçš„å®Œæ•´çŸ¥è¯†ä½“ç³»ã€‚</p>
<hr/>
<h2 data-id="heading-1"><strong>ä¸€ã€ Vue3 ç”Ÿå‘½å‘¨æœŸæ¦‚è¿°ï¼šä¸ºä»€ä¹ˆéœ€è¦å˜åŒ–ï¼Ÿ</strong></h2>
<h3 data-id="heading-2"><strong>1.1 Vue2 ç”Ÿå‘½å‘¨æœŸçš„ç—›ç‚¹</strong></h3>
<p>åœ¨ Vue2 ä¸­ï¼Œç”Ÿå‘½å‘¨æœŸå­˜åœ¨ä¸€äº›é™åˆ¶ï¼š</p>
<ul>
<li><strong>ä»£ç ç»„ç»‡åˆ†æ•£</strong>ï¼šç›¸å…³é€»è¾‘åˆ†æ•£åœ¨ä¸åŒç”Ÿå‘½å‘¨æœŸé’©å­ä¸­</li>
<li><strong>é€»è¾‘å¤ç”¨å›°éš¾</strong>ï¼šç›¸ä¼¼çš„é€»è¾‘éœ€è¦åœ¨å¤šä¸ªç»„ä»¶ä¸­é‡å¤ç¼–å†™</li>
<li><strong>ç±»å‹æ¨å¯¼æœ‰é™</strong>ï¼šTypeScript æ”¯æŒä¸å¤Ÿå®Œå–„</li>
<li><strong>ä»£ç å¯è¯»æ€§</strong>ï¼šå¤§å‹ç»„ä»¶ä¸­é€»è¾‘å…³æ³¨ç‚¹åˆ†ç¦»ä¸æ¸…æ™°</li>
</ul>
<h3 data-id="heading-3"><strong>1.2 Vue3 çš„ç”Ÿå‘½å‘¨æœŸæ”¹è¿›</strong></h3>
<p>Vue3 åœ¨ç”Ÿå‘½å‘¨æœŸæ–¹é¢çš„ä¸»è¦æ”¹è¿›ï¼š</p>
<ul>
<li><strong>æ›´åˆç†çš„å‘½å</strong>ï¼š<code>beforeDestroy</code> â†’ <code>beforeUnmount</code>ï¼Œ<code>destroyed</code> â†’ <code>unmounted</code></li>
<li><strong>ç»„åˆå¼ API</strong>ï¼šæ›´å¥½çš„é€»è¾‘ç»„ç»‡å’Œå¤ç”¨</li>
<li><strong>æ›´å¥½çš„ TS æ”¯æŒ</strong>ï¼šå®Œæ•´çš„ç±»å‹æ¨å¯¼</li>
<li><strong>æ›´çµæ´»çš„ä½¿ç”¨</strong>ï¼šå¯ä»¥åœ¨ setup ä¸­ç›´æ¥ä½¿ç”¨</li>
</ul>
<hr/>
<h2 data-id="heading-4"><strong>äºŒã€ Vue2 ä¸ Vue3 ç”Ÿå‘½å‘¨æœŸå®Œæ•´å¯¹æ¯”</strong></h2>
<h3 data-id="heading-5"><strong>2.1 ç”Ÿå‘½å‘¨æœŸé’©å­å¯¹ç…§è¡¨</strong></h3>

























































































<table><thead><tr><th>Vue2 ç”Ÿå‘½å‘¨æœŸ</th><th>Vue3 ç”Ÿå‘½å‘¨æœŸ</th><th>å˜åŒ–è¯´æ˜</th><th>æ‰§è¡Œæ—¶æœº</th></tr></thead><tbody><tr><td><code>beforeCreate</code></td><td>âŒ ç§»é™¤</td><td>ä½¿ç”¨ <code>setup()</code> æ›¿ä»£</td><td>ç»„ä»¶åˆå§‹åŒ–å‰</td></tr><tr><td><code>created</code></td><td>âŒ ç§»é™¤</td><td>ä½¿ç”¨ <code>setup()</code> æ›¿ä»£</td><td>ç»„ä»¶åˆ›å»ºå®Œæˆ</td></tr><tr><td><code>beforeMount</code></td><td><code>onBeforeMount</code></td><td>åç§°å˜åŒ–ï¼ŒåŠŸèƒ½ç›¸åŒ</td><td>æŒ‚è½½å‰</td></tr><tr><td><code>mounted</code></td><td><code>onMounted</code></td><td>åç§°å˜åŒ–ï¼ŒåŠŸèƒ½ç›¸åŒ</td><td>æŒ‚è½½å</td></tr><tr><td><code>beforeUpdate</code></td><td><code>onBeforeUpdate</code></td><td>åç§°å˜åŒ–ï¼ŒåŠŸèƒ½ç›¸åŒ</td><td>æ›´æ–°å‰</td></tr><tr><td><code>updated</code></td><td><code>onUpdated</code></td><td>åç§°å˜åŒ–ï¼ŒåŠŸèƒ½ç›¸åŒ</td><td>æ›´æ–°å</td></tr><tr><td><code>beforeDestroy</code></td><td><code>onBeforeUnmount</code></td><td>åç§°æ›´å‡†ç¡®</td><td>å¸è½½å‰</td></tr><tr><td><code>destroyed</code></td><td><code>onUnmounted</code></td><td>åç§°æ›´å‡†ç¡®</td><td>å¸è½½å</td></tr><tr><td><code>errorCaptured</code></td><td><code>onErrorCaptured</code></td><td>åç§°å˜åŒ–ï¼ŒåŠŸèƒ½ç›¸åŒ</td><td>é”™è¯¯æ•è·</td></tr><tr><td>-</td><td><code>onRenderTracked</code></td><td><strong>æ–°å¢</strong></td><td>æ¸²æŸ“ä¾èµ–è·Ÿè¸ª</td></tr><tr><td>-</td><td><code>onRenderTriggered</code></td><td><strong>æ–°å¢</strong></td><td>æ¸²æŸ“è§¦å‘è·Ÿè¸ª</td></tr><tr><td><code>activated</code></td><td><code>onActivated</code></td><td>åç§°å˜åŒ–ï¼ŒåŠŸèƒ½ç›¸åŒ</td><td>keep-alive æ¿€æ´»</td></tr><tr><td><code>deactivated</code></td><td><code>onDeactivated</code></td><td>åç§°å˜åŒ–ï¼ŒåŠŸèƒ½ç›¸åŒ</td><td>keep-alive åœç”¨</td></tr></tbody></table>
<h3 data-id="heading-6"><strong>2.2 ç”Ÿå‘½å‘¨æœŸå®Œæ•´æ‰§è¡Œæµç¨‹å›¾</strong></h3>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart TD
    A[ç»„ä»¶åˆå§‹åŒ–] --&gt; B[Setup æ‰§è¡Œ]
    B --&gt; C[onBeforeMount&lt;br&gt;æŒ‚è½½å‰]
    C --&gt; D[DOM æŒ‚è½½]
    D --&gt; E[onMounted&lt;br&gt;æŒ‚è½½å®Œæˆ]
    
    E --&gt; F{å“åº”å¼æ•°æ®å˜åŒ–?}
    F -- æ˜¯ --&gt; G[onBeforeUpdate&lt;br&gt;æ›´æ–°å‰]
    G --&gt; H[è™šæ‹Ÿ DOM é‡æ–°æ¸²æŸ“]
    H --&gt; I[onUpdated&lt;br&gt;æ›´æ–°å®Œæˆ]
    F -- å¦ --&gt; J[ç»„ä»¶å¸è½½]
    
    J --&gt; K[onBeforeUnmount&lt;br&gt;å¸è½½å‰]
    K --&gt; L[DOM ç§»é™¤]
    L --&gt; M[onUnmounted&lt;br&gt;å¸è½½å®Œæˆ]
    
    E --&gt; N[onActivated&lt;br&gt;keep-alive æ¿€æ´»]
    N --&gt; O[onDeactivated&lt;br&gt;keep-alive åœç”¨]
    
    style B fill:#e1f5fe
    style E fill:#e8f5e8
    style M fill:#ffebee
</code></pre>
<hr/>
<h2 data-id="heading-7"><strong>ä¸‰ã€ ç»„åˆå¼ API ä¸­çš„ç”Ÿå‘½å‘¨æœŸä½¿ç”¨</strong></h2>
<h3 data-id="heading-8"><strong>3.1 åŸºæœ¬ç”Ÿå‘½å‘¨æœŸé’©å­ä½¿ç”¨</strong></h3>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;div class="lifecycle-demo"&gt;
    &lt;h2&gt;Vue3 ç”Ÿå‘½å‘¨æœŸæ¼”ç¤º&lt;/h2&gt;
    &lt;p&gt;è®¡æ•°: {{ count }}&lt;/p&gt;
    &lt;p&gt;æ¶ˆæ¯: {{ message }}&lt;/p&gt;
    &lt;button @click="increment"&gt;å¢åŠ è®¡æ•°&lt;/button&gt;
    &lt;button @click="updateMessage"&gt;æ›´æ–°æ¶ˆæ¯&lt;/button&gt;
    &lt;button @click="forceUpdate"&gt;å¼ºåˆ¶æ›´æ–°&lt;/button&gt;
    
    &lt;div v-if="showChild"&gt;
      &lt;ChildComponent :count="count" /&gt;
    &lt;/div&gt;
    &lt;button @click="toggleChild"&gt;åˆ‡æ¢å­ç»„ä»¶&lt;/button&gt;
    
    &lt;div class="log-container"&gt;
      &lt;h3&gt;ç”Ÿå‘½å‘¨æœŸæ—¥å¿—:&lt;/h3&gt;
      &lt;div v-for="(log, index) in logs" :key="index" class="log-item"&gt;
        {{ log }}
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
import { ref, onBeforeMount, onMounted, onBeforeUpdate, onUpdated, 
         onBeforeUnmount, onUnmounted, onErrorCaptured, nextTick } from 'vue'
import ChildComponent from './ChildComponent.vue'

export default {
  name: 'LifecycleDemo',
  components: { ChildComponent },
  
  setup() {
    const count = ref(0)
    const message = ref('Hello Vue3 Lifecycle')
    const showChild = ref(true)
    const logs = ref([])
    
    // æ·»åŠ æ—¥å¿—å‡½æ•°
    const addLog = (hookName, details = '') =&gt; {
      const timestamp = new Date().toLocaleTimeString()
      const log = `[${timestamp}] ${hookName} ${details}`.trim()
      logs.value.push(log)
      
      // ä¿æŒæ—¥å¿—æ•°é‡ä¸è¶…è¿‡20æ¡
      if (logs.value.length &gt; 20) {
        logs.value.shift()
      }
      
      console.log(log)
    }
    
    // 1. setup é˜¶æ®µ - æ›¿ä»£ beforeCreate å’Œ created
    addLog('setup', 'ç»„ä»¶åˆå§‹åŒ–')
    console.log('count åˆå§‹å€¼:', count.value)
    
    // 2. onBeforeMount - æŒ‚è½½å‰
    onBeforeMount(() =&gt; {
      addLog('onBeforeMount', 'DOM æŒ‚è½½å‰')
      // æ­¤æ—¶æ— æ³•è®¿é—® DOM å…ƒç´ 
      console.log('æŒ‚è½½å‰ï¼Œæ— æ³•è®¿é—® DOM')
    })
    
    // 3. onMounted - æŒ‚è½½å®Œæˆ
    onMounted(() =&gt; {
      addLog('onMounted', 'DOM æŒ‚è½½å®Œæˆ')
      // å¯ä»¥è®¿é—® DOM å…ƒç´ 
      const appElement = document.querySelector('.lifecycle-demo')
      console.log('æ ¹å…ƒç´ :', appElement)
      
      // æ¨¡æ‹Ÿå¼‚æ­¥æ“ä½œ
      setTimeout(() =&gt; {
        message.value = 'å¼‚æ­¥æ›´æ–°æ¶ˆæ¯'
      }, 2000)
    })
    
    // 4. onBeforeUpdate - æ›´æ–°å‰
    onBeforeUpdate(() =&gt; {
      addLog('onBeforeUpdate', `count: ${count.value}`)
      // æ­¤æ—¶æ•°æ®å·²æ›´æ–°ï¼Œä½† DOM è¿˜æœªé‡æ–°æ¸²æŸ“
      const countElement = document.querySelector('p')
      console.log('æ›´æ–°å‰ count æ–‡æœ¬:', countElement?.textContent)
    })
    
    // 5. onUpdated - æ›´æ–°å®Œæˆ
    onUpdated(() =&gt; {
      addLog('onUpdated', `count: ${count.value}`)
      // DOM å·²æ›´æ–°å®Œæˆ
      const countElement = document.querySelector('p')
      console.log('æ›´æ–°å count æ–‡æœ¬:', countElement?.textContent)
      
      // æ³¨æ„ï¼šä¸è¦åœ¨ updated ä¸­åŒæ­¥ä¿®æ”¹çŠ¶æ€ï¼Œå¯èƒ½å¯¼è‡´æ— é™å¾ªç¯
    })
    
    // 6. onBeforeUnmount - å¸è½½å‰
    onBeforeUnmount(() =&gt; {
      addLog('onBeforeUnmount', 'ç»„ä»¶å¸è½½å‰')
      // æ¸…ç†å·¥ä½œï¼Œå¦‚å®šæ—¶å™¨ã€äº‹ä»¶ç›‘å¬å™¨ç­‰
      console.log('æ‰§è¡Œæ¸…ç†æ“ä½œ...')
    })
    
    // 7. onUnmounted - å¸è½½å®Œæˆ
    onUnmounted(() =&gt; {
      addLog('onUnmounted', 'ç»„ä»¶å·²å¸è½½')
      // ç»„ä»¶å·²ä» DOM ä¸­ç§»é™¤
    })
    
    // 8. onErrorCaptured - é”™è¯¯æ•è·
    onErrorCaptured((error, instance, info) =&gt; {
      addLog('onErrorCaptured', `é”™è¯¯: ${error.message}`)
      console.error('æ•è·åˆ°çš„é”™è¯¯:', error)
      console.log('é”™è¯¯ä¿¡æ¯:', info)
      
      // è¿”å› false é˜»æ­¢é”™è¯¯ç»§ç»­å‘ä¸Šä¼ æ’­
      return false
    })
    
    // æ–¹æ³•å®šä¹‰
    const increment = () =&gt; {
      count.value++
    }
    
    const updateMessage = () =&gt; {
      message.value = `æ¶ˆæ¯å·²æ›´æ–° ${Date.now()}`
    }
    
    const forceUpdate = async () =&gt; {
      addLog('forceUpdate', 'æ‰‹åŠ¨è§¦å‘æ›´æ–°')
      await nextTick()
      addLog('nextTick', 'DOM æ›´æ–°å®Œæˆ')
    }
    
    const toggleChild = () =&gt; {
      showChild.value = !showChild.value
    }
    
    return {
      count,
      message,
      showChild,
      logs,
      increment,
      updateMessage,
      forceUpdate,
      toggleChild
    }
  },
  
  // é€‰é¡¹å¼ API ä»ç„¶å¯ç”¨ï¼ˆå…¼å®¹æ¨¡å¼ï¼‰
  mounted() {
    console.log('é€‰é¡¹å¼ API çš„ mounted')
  }
}
&lt;/script&gt;

&lt;style scoped&gt;
.lifecycle-demo {
  padding: 20px;
  max-width: 800px;
  margin: 0 auto;
  font-family: Arial, sans-serif;
}

button {
  margin: 5px;
  padding: 8px 16px;
  background: #42b883;
  color: white;
  border: none;
  border-radius: 4px;
  cursor: pointer;
}

button:hover {
  background: #369870;
}

.log-container {
  margin-top: 30px;
  padding: 15px;
  background: #f5f5f5;
  border-radius: 8px;
  max-height: 400px;
  overflow-y: auto;
}

.log-item {
  padding: 8px 12px;
  margin: 4px 0;
  background: white;
  border-radius: 4px;
  font-family: 'Courier New', monospace;
  font-size: 12px;
  border-left: 4px solid #42b883;
}
&lt;/script&gt;
</code></pre>
<h3 data-id="heading-9"><strong>3.2 å­ç»„ä»¶ç¤ºä¾‹</strong></h3>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;div class="child-component" :style="style"&gt;
    &lt;h4&gt;å­ç»„ä»¶&lt;/h4&gt;
    &lt;p&gt;æ¥æ”¶çš„è®¡æ•°: {{ props.count }}&lt;/p&gt;
    &lt;p&gt;å†…éƒ¨çŠ¶æ€: {{ internalState }}&lt;/p&gt;
    &lt;button @click="changeState"&gt;æ”¹å˜çŠ¶æ€&lt;/button&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup&gt;
import { ref, onMounted, onUnmounted, onBeforeMount, watch } from 'vue'

const props = defineProps({
  count: {
    type: Number,
    default: 0
  }
})

const internalState = ref('åˆå§‹çŠ¶æ€')
const style = ref({
  padding: '15px',
  margin: '10px 0',
  border: '2px solid #ff6b6b',
  borderRadius: '8px',
  background: '#fff5f5'
})

// ç”Ÿå‘½å‘¨æœŸé’©å­
onBeforeMount(() =&gt; {
  console.log('å­ç»„ä»¶ - onBeforeMount')
})

onMounted(() =&gt; {
  console.log('å­ç»„ä»¶ - onMounted')
  
  // æ¨¡æ‹Ÿç»„ä»¶å†…çš„å¼‚æ­¥æ“ä½œ
  setTimeout(() =&gt; {
    internalState.value = 'å¼‚æ­¥æ›´æ–°åçš„çŠ¶æ€'
  }, 1000)
})

onUnmounted(() =&gt; {
  console.log('å­ç»„ä»¶ - onUnmounted')
})

// ç›‘å¬ props å˜åŒ–
watch(() =&gt; props.count, (newVal, oldVal) =&gt; {
  console.log(`å­ç»„ä»¶æ£€æµ‹åˆ° count å˜åŒ–: ${oldVal} -&gt; ${newVal}`)
  
  // æ ¹æ® count å˜åŒ–æ›´æ–°æ ·å¼
  if (newVal % 2 === 0) {
    style.value.background = '#fff5f5'
    style.value.borderColor = '#ff6b6b'
  } else {
    style.value.background = '#f0f9ff'
    style.value.borderColor = '#3b82f6'
  }
})

const changeState = () =&gt; {
  internalState.value = `çŠ¶æ€æ”¹å˜äº ${new Date().toLocaleTimeString()}`
}
&lt;/script&gt;
</code></pre>
<hr/>
<h2 data-id="heading-10"><strong>å››ã€ Vue3 æ–°å¢çš„ç”Ÿå‘½å‘¨æœŸé’©å­</strong></h2>
<h3 data-id="heading-11"><strong>4.1 onRenderTracked å’Œ onRenderTriggered</strong></h3>
<p>è¿™ä¸¤ä¸ªæ–°å¢çš„é’©å­ä¸»è¦ç”¨äºè°ƒè¯•å’Œæ€§èƒ½åˆ†æï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;div class="debug-demo"&gt;
    &lt;h2&gt;æ¸²æŸ“è°ƒè¯•é’©å­æ¼”ç¤º&lt;/h2&gt;
    &lt;p&gt;è®¡æ•°: {{ count }}&lt;/p&gt;
    &lt;p&gt;æ¶ˆæ¯: {{ message }}&lt;/p&gt;
    &lt;p&gt;è®¡ç®—å±æ€§: {{ computedMessage }}&lt;/p&gt;
    &lt;button @click="increment"&gt;å¢åŠ è®¡æ•°&lt;/button&gt;
    &lt;button @click="changeMessage"&gt;æ”¹å˜æ¶ˆæ¯&lt;/button&gt;
    
    &lt;div class="debug-info"&gt;
      &lt;h3&gt;æ¸²æŸ“è·Ÿè¸ªä¿¡æ¯:&lt;/h3&gt;
      &lt;div v-for="(info, index) in renderInfo" :key="index" class="info-item"&gt;
        &lt;span class="type"&gt;{{ info.type }}&lt;/span&gt;
        &lt;span class="target"&gt;{{ info.target }}&lt;/span&gt;
        &lt;span class="time"&gt;{{ info.time }}&lt;/span&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup&gt;
import { ref, computed, onRenderTracked, onRenderTriggered } from 'vue'

const count = ref(0)
const message = ref('Hello Debug')
const renderInfo = ref([])

// è®¡ç®—å±æ€§
const computedMessage = computed(() =&gt; {
  return `${message.value} - è®¡æ•°: ${count.value}`
})

// æ·»åŠ è°ƒè¯•ä¿¡æ¯
const addRenderInfo = (type, target) =&gt; {
  const timestamp = new Date().toLocaleTimeString()
  renderInfo.value.unshift({
    type,
    target: String(target),
    time: timestamp
  })
  
  if (renderInfo.value.length &gt; 10) {
    renderInfo.value.pop()
  }
}

// onRenderTracked - è·Ÿè¸ªä¾èµ–æ”¶é›†
onRenderTracked((event) =&gt; {
  addRenderInfo('TRACKED', event.target)
  console.log('ä¾èµ–è¢«è·Ÿè¸ª:', event)
})

// onRenderTriggered - è·Ÿè¸ªä¾èµ–è§¦å‘
onRenderTriggered((event) =&gt; {
  addRenderInfo('TRIGGERED', event.target)
  console.log('ä¾èµ–è§¦å‘æ›´æ–°:', event)
})

const increment = () =&gt; {
  count.value++
}

const changeMessage = () =&gt; {
  message.value = `æ¶ˆæ¯æ›´æ–° ${Date.now()}`
}
&lt;/script&gt;

&lt;style scoped&gt;
.debug-demo {
  padding: 20px;
  max-width: 800px;
  margin: 0 auto;
}

.debug-info {
  margin-top: 20px;
  padding: 15px;
  background: #2c3e50;
  color: white;
  border-radius: 8px;
}

.info-item {
  display: flex;
  justify-content: space-between;
  padding: 8px;
  margin: 4px 0;
  background: #34495e;
  border-radius: 4px;
  font-family: 'Courier New', monospace;
  font-size: 12px;
}

.type {
  color: #42b883;
  font-weight: bold;
}

.target {
  color: #e0e0e0;
  flex: 1;
  margin: 0 10px;
}

.time {
  color: #bdc3c7;
}
&lt;/style&gt;
</code></pre>
<h3 data-id="heading-12"><strong>4.2 æœåŠ¡ç«¯æ¸²æŸ“ç›¸å…³ç”Ÿå‘½å‘¨æœŸ</strong></h3>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;div class="ssr-demo"&gt;
    &lt;h2&gt;æœåŠ¡ç«¯æ¸²æŸ“ç”Ÿå‘½å‘¨æœŸ&lt;/h2&gt;
    &lt;p&gt;å½“å‰ç¯å¢ƒ: {{ isServer ? 'æœåŠ¡ç«¯' : 'å®¢æˆ·ç«¯' }}&lt;/p&gt;
    &lt;p&gt;æ•°æ®: {{ serverData }}&lt;/p&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup&gt;
import { ref, onServerPrefetch, onMounted } from 'vue'

const isServer = ref(typeof window === 'undefined')
const serverData = ref(null)

// æœåŠ¡ç«¯æ•°æ®é¢„å–
onServerPrefetch(async () =&gt; {
  console.log('æœåŠ¡ç«¯æ•°æ®é¢„å–...')
  // æ¨¡æ‹ŸæœåŠ¡ç«¯ API è°ƒç”¨
  serverData.value = await fetchServerData()
})

// å®¢æˆ·ç«¯æ¿€æ´»
onMounted(() =&gt; {
  console.log('å®¢æˆ·ç«¯æ¿€æ´»å®Œæˆ')
  // å¦‚æœæœåŠ¡ç«¯æ²¡æœ‰é¢„å–æ•°æ®ï¼Œåœ¨å®¢æˆ·ç«¯è·å–
  if (!serverData.value) {
    fetchServerData().then(data =&gt; {
      serverData.value = data
    })
  }
})

// æ¨¡æ‹Ÿæ•°æ®è·å–
const fetchServerData = async () =&gt; {
  return new Promise(resolve =&gt; {
    setTimeout(() =&gt; {
      resolve(`æœåŠ¡å™¨æ•°æ® - ${new Date().toISOString()}`)
    }, 100)
  })
}
&lt;/script&gt;
</code></pre>
<hr/>
<h2 data-id="heading-13"><strong>äº”ã€ Keep-alive ç›¸å…³ç”Ÿå‘½å‘¨æœŸ</strong></h2>
<h3 data-id="heading-14"><strong>5.1 onActivated å’Œ onDeactivated</strong></h3>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;div class="keep-alive-demo"&gt;
    &lt;h2&gt;Keep-alive ç”Ÿå‘½å‘¨æœŸæ¼”ç¤º&lt;/h2&gt;
    
    &lt;div class="controls"&gt;
      &lt;button 
        v-for="tab in tabs" 
        :key="tab.id"
        @click="currentTab = tab.id"
        :class="{ active: currentTab === tab.id }"
      &gt;
        {{ tab.name }}
      &lt;/button&gt;
    &lt;/div&gt;
    
    &lt;keep-alive&gt;
      &lt;component :is="currentComponent" :key="currentTab" /&gt;
    &lt;/keep-alive&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup&gt;
import { ref, computed, markRaw } from 'vue'
import Tab1 from './components/Tab1.vue'
import Tab2 from './components/Tab2.vue'
import Tab3 from './components/Tab3.vue'

const currentTab = ref('tab1')

const tabs = [
  { id: 'tab1', name: 'é€‰é¡¹å¡1', component: markRaw(Tab1) },
  { id: 'tab2', name: 'é€‰é¡¹å¡2', component: markRaw(Tab2) },
  { id: 'tab3', name: 'é€‰é¡¹å¡3', component: markRaw(Tab3) }
]

const currentComponent = computed(() =&gt; {
  return tabs.find(tab =&gt; tab.id === currentTab.value)?.component
})
&lt;/script&gt;

&lt;style scoped&gt;
.keep-alive-demo {
  padding: 20px;
}

.controls {
  margin-bottom: 20px;
}

.controls button {
  margin: 0 5px;
  padding: 10px 20px;
  background: #ecf0f1;
  border: none;
  border-radius: 4px;
  cursor: pointer;
}

.controls button.active {
  background: #42b883;
  color: white;
}
&lt;/style&gt;
</code></pre>
<p><strong>Tab1.vue - ç¼“å­˜ç»„ä»¶ç¤ºä¾‹</strong></p>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;div class="tab-content"&gt;
    &lt;h3&gt;é€‰é¡¹å¡ 1 (è¢«ç¼“å­˜)&lt;/h3&gt;
    &lt;p&gt;è®¡æ•°: {{ count }}&lt;/p&gt;
    &lt;p&gt;æœ€åæ¿€æ´»æ—¶é—´: {{ lastActivated }}&lt;/p&gt;
    &lt;button @click="increment"&gt;å¢åŠ è®¡æ•°&lt;/button&gt;
    &lt;button @click="fetchData"&gt;æ¨¡æ‹Ÿæ•°æ®è¯·æ±‚&lt;/button&gt;
    
    &lt;div v-if="data" class="data-display"&gt;
      &lt;h4&gt;æ•°æ®å†…å®¹:&lt;/h4&gt;
      &lt;p&gt;{{ data }}&lt;/p&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup&gt;
import { ref, onActivated, onDeactivated, onMounted, onUnmounted } from 'vue'

const count = ref(0)
const lastActivated = ref(null)
const data = ref(null)

// ç»„ä»¶æ¿€æ´»æ—¶è°ƒç”¨
onActivated(() =&gt; {
  lastActivated.value = new Date().toLocaleTimeString()
  console.log('Tab1 è¢«æ¿€æ´»')
  
  // å¯ä»¥åœ¨è¿™é‡Œé‡æ–°å¯åŠ¨å®šæ—¶å™¨ã€é‡æ–°è®¢é˜…äº‹ä»¶ç­‰
  startTimer()
})

// ç»„ä»¶åœç”¨æ—¶è°ƒç”¨
onDeactivated(() =&gt; {
  console.log('Tab1 è¢«åœç”¨')
  
  // å¯ä»¥åœ¨è¿™é‡Œæš‚åœå®šæ—¶å™¨ã€å–æ¶ˆè®¢é˜…ç­‰
  stopTimer()
})

// æ­£å¸¸ç”Ÿå‘½å‘¨æœŸ
onMounted(() =&gt; {
  console.log('Tab1 mounted')
  startTimer()
})

onUnmounted(() =&gt; {
  console.log('Tab1 unmounted')
  stopTimer()
})

// å®šæ—¶å™¨ç¤ºä¾‹
let timer = null
const startTimer = () =&gt; {
  if (!timer) {
    timer = setInterval(() =&gt; {
      console.log('Tab1 å®šæ—¶å™¨è¿è¡Œä¸­...')
    }, 3000)
  }
}

const stopTimer = () =&gt; {
  if (timer) {
    clearInterval(timer)
    timer = null
    console.log('Tab1 å®šæ—¶å™¨å·²åœæ­¢')
  }
}

const increment = () =&gt; {
  count.value++
}

const fetchData = async () =&gt; {
  // æ¨¡æ‹Ÿå¼‚æ­¥æ•°æ®è¯·æ±‚
  data.value = 'åŠ è½½ä¸­...'
  setTimeout(() =&gt; {
    data.value = `æ•°æ®åŠ è½½å®Œæˆ: ${new Date().toLocaleTimeString()}`
  }, 1000)
}
&lt;/script&gt;

&lt;style scoped&gt;
.tab-content {
  padding: 20px;
  border: 2px solid #42b883;
  border-radius: 8px;
  background: #f8fff8;
}

.data-display {
  margin-top: 15px;
  padding: 10px;
  background: white;
  border-radius: 4px;
  border: 1px solid #e0e0e0;
}
&lt;/style&gt;
</code></pre>
<hr/>
<h2 data-id="heading-15"><strong>å…­ã€ ç”Ÿå‘½å‘¨æœŸæœ€ä½³å®è·µå’Œå¸¸è§é™·é˜±</strong></h2>
<h3 data-id="heading-16"><strong>6.1 ç”Ÿå‘½å‘¨æœŸä½¿ç”¨æœ€ä½³å®è·µ</strong></h3>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;div class="best-practice-demo"&gt;
    &lt;h2&gt;ç”Ÿå‘½å‘¨æœŸæœ€ä½³å®è·µ&lt;/h2&gt;
    
    &lt;div class="practice-section"&gt;
      &lt;h3&gt;1. å¼‚æ­¥æ“ä½œå¤„ç†&lt;/h3&gt;
      &lt;button @click="startAsyncOperation"&gt;å¼€å§‹å¼‚æ­¥æ“ä½œ&lt;/button&gt;
      &lt;button @click="cancelAsyncOperation"&gt;å–æ¶ˆå¼‚æ­¥æ“ä½œ&lt;/button&gt;
      &lt;p&gt;æ“ä½œçŠ¶æ€: {{ operationStatus }}&lt;/p&gt;
    &lt;/div&gt;
    
    &lt;div class="practice-section"&gt;
      &lt;h3&gt;2. äº‹ä»¶ç›‘å¬å™¨æ¸…ç†&lt;/h3&gt;
      &lt;button @click="toggleEventListener"&gt;åˆ‡æ¢äº‹ä»¶ç›‘å¬&lt;/button&gt;
      &lt;p&gt;ç›‘å¬çŠ¶æ€: {{ isListening ? 'å¼€å¯' : 'å…³é—­' }}&lt;/p&gt;
    &lt;/div&gt;
    
    &lt;div class="practice-section"&gt;
      &lt;h3&gt;3. å®šæ—¶å™¨ç®¡ç†&lt;/h3&gt;
      &lt;button @click="toggleTimer"&gt;åˆ‡æ¢å®šæ—¶å™¨&lt;/button&gt;
      &lt;p&gt;å®šæ—¶å™¨è®¡æ•°: {{ timerCount }}&lt;/p&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup&gt;
import { ref, onMounted, onUnmounted, onBeforeUnmount } from 'vue'

// 1. å¼‚æ­¥æ“ä½œå¤„ç†
const operationStatus = ref('ç©ºé—²')
let asyncOperationController = null

const startAsyncOperation = async () =&gt; {
  // å¦‚æœå·²æœ‰æ“ä½œåœ¨è¿›è¡Œï¼Œå…ˆå–æ¶ˆ
  if (asyncOperationController) {
    asyncOperationController.abort()
  }
  
  asyncOperationController = new AbortController()
  operationStatus.value = 'è¿›è¡Œä¸­'
  
  try {
    // æ¨¡æ‹Ÿé•¿æ—¶é—´å¼‚æ­¥æ“ä½œ
    await new Promise((resolve, reject) =&gt; {
      const timeout = setTimeout(resolve, 3000)
      
      // ç›‘å¬å–æ¶ˆä¿¡å·
      asyncOperationController.signal.addEventListener('abort', () =&gt; {
        clearTimeout(timeout)
        reject(new Error('æ“ä½œè¢«å–æ¶ˆ'))
      })
    })
    
    if (!asyncOperationController.signal.aborted) {
      operationStatus.value = 'å®Œæˆ'
    }
  } catch (error) {
    if (error.message !== 'æ“ä½œè¢«å–æ¶ˆ') {
      operationStatus.value = 'å¤±è´¥'
      console.error('æ“ä½œå¤±è´¥:', error)
    } else {
      operationStatus.value = 'å·²å–æ¶ˆ'
    }
  } finally {
    asyncOperationController = null
  }
}

const cancelAsyncOperation = () =&gt; {
  if (asyncOperationController) {
    asyncOperationController.abort()
  }
}

// 2. äº‹ä»¶ç›‘å¬å™¨æ¸…ç†
const isListening = ref(false)
let resizeListener = null

const toggleEventListener = () =&gt; {
  if (isListening.value) {
    removeEventListener()
  } else {
    addEventListener()
  }
}

const addEventListener = () =&gt; {
  if (!resizeListener) {
    resizeListener = () =&gt; {
      console.log('çª—å£å¤§å°æ”¹å˜:', window.innerWidth, 'x', window.innerHeight)
    }
    window.addEventListener('resize', resizeListener)
    isListening.value = true
    console.log('äº‹ä»¶ç›‘å¬å™¨å·²æ·»åŠ ')
  }
}

const removeEventListener = () =&gt; {
  if (resizeListener) {
    window.removeEventListener('resize', resizeListener)
    resizeListener = null
    isListening.value = false
    console.log('äº‹ä»¶ç›‘å¬å™¨å·²ç§»é™¤')
  }
}

// 3. å®šæ—¶å™¨ç®¡ç†
const timerCount = ref(0)
let timer = null

const toggleTimer = () =&gt; {
  if (timer) {
    stopTimer()
  } else {
    startTimer()
  }
}

const startTimer = () =&gt; {
  if (!timer) {
    timer = setInterval(() =&gt; {
      timerCount.value++
      console.log('å®šæ—¶å™¨è®¡æ•°:', timerCount.value)
    }, 1000)
    console.log('å®šæ—¶å™¨å·²å¯åŠ¨')
  }
}

const stopTimer = () =&gt; {
  if (timer) {
    clearInterval(timer)
    timer = null
    console.log('å®šæ—¶å™¨å·²åœæ­¢')
  }
}

// ç»„ä»¶æŒ‚è½½æ—¶åˆå§‹åŒ–
onMounted(() =&gt; {
  console.log('ç»„ä»¶æŒ‚è½½å®Œæˆï¼Œæ‰§è¡Œåˆå§‹åŒ–æ“ä½œ')
  addEventListener() // é»˜è®¤å¼€å¯äº‹ä»¶ç›‘å¬
})

// ç»„ä»¶å¸è½½å‰æ¸…ç†
onBeforeUnmount(() =&gt; {
  console.log('ç»„ä»¶å³å°†å¸è½½ï¼Œæ‰§è¡Œæ¸…ç†æ“ä½œ')
  cancelAsyncOperation() // å–æ¶ˆè¿›è¡Œä¸­çš„å¼‚æ­¥æ“ä½œ
  removeEventListener()  // ç§»é™¤äº‹ä»¶ç›‘å¬
  stopTimer()           // åœæ­¢å®šæ—¶å™¨
})

// ä¹Ÿå¯ä»¥ä½¿ç”¨ onUnmounted
onUnmounted(() =&gt; {
  console.log('ç»„ä»¶å·²å¸è½½')
})
&lt;/script&gt;

&lt;style scoped&gt;
.best-practice-demo {
  padding: 20px;
  max-width: 800px;
  margin: 0 auto;
}

.practice-section {
  margin: 30px 0;
  padding: 20px;
  border: 1px solid #e0e0e0;
  border-radius: 8px;
  background: #fafafa;
}

.practice-section h3 {
  color: #2c3e50;
  margin-top: 0;
}

button {
  margin: 5px;
  padding: 8px 16px;
  background: #42b883;
  color: white;
  border: none;
  border-radius: 4px;
  cursor: pointer;
}

button:hover {
  background: #369870;
}
&lt;/style&gt;
</code></pre>
<h3 data-id="heading-17"><strong>6.2 å¸¸è§é™·é˜±å’Œè§£å†³æ–¹æ¡ˆ</strong></h3>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;div class="pitfalls-demo"&gt;
    &lt;h2&gt;ç”Ÿå‘½å‘¨æœŸå¸¸è§é™·é˜±&lt;/h2&gt;
    
    &lt;div class="pitfall-item"&gt;
      &lt;h3&gt;é™·é˜±1: åœ¨ updated ä¸­ä¿®æ”¹çŠ¶æ€å¯¼è‡´æ— é™å¾ªç¯&lt;/h3&gt;
      &lt;button @click="count++"&gt;å¢åŠ è®¡æ•° ({{ count }})&lt;/button&gt;
      &lt;p&gt;æ›´æ–°æ¬¡æ•°: {{ updateCount }}&lt;/p&gt;
    &lt;/div&gt;
    
    &lt;div class="pitfall-item"&gt;
      &lt;h3&gt;é™·é˜±2: å¿˜è®°æ¸…ç†èµ„æºå¯¼è‡´å†…å­˜æ³„æ¼&lt;/h3&gt;
      &lt;button @click="showLeakyComponent = !showLeakyComponent"&gt;
        {{ showLeakyComponent ? 'éšè—' : 'æ˜¾ç¤º' }} å¯èƒ½æ³„æ¼çš„ç»„ä»¶
      &lt;/button&gt;
      &lt;LeakyComponent v-if="showLeakyComponent" /&gt;
    &lt;/div&gt;
    
    &lt;div class="pitfall-item"&gt;
      &lt;h3&gt;é™·é˜±3: é”™è¯¯çš„å¼‚æ­¥æ“ä½œæ—¶æœº&lt;/h3&gt;
      &lt;button @click="fetchDataWithTiming"&gt;æœ‰é—®é¢˜çš„æ•°æ®è·å–&lt;/button&gt;
      &lt;button @click="fetchDataCorrectly"&gt;æ­£ç¡®çš„æ•°æ®è·å–&lt;/button&gt;
      &lt;p&gt;æ•°æ®: {{ fetchedData }}&lt;/p&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup&gt;
import { ref, onUpdated, onMounted, onUnmounted } from 'vue'
import LeakyComponent from './LeakyComponent.vue'

// é™·é˜±1: æ— é™å¾ªç¯
const count = ref(0)
const updateCount = ref(0)

onUpdated(() =&gt; {
  updateCount.value++
  console.log(`ç¬¬ ${updateCount.value} æ¬¡æ›´æ–°`)
  
  // é”™è¯¯åšæ³•: åœ¨ updated ä¸­åŒæ­¥ä¿®æ”¹å“åº”å¼æ•°æ®
  // count.value++ // è¿™ä¼šå¯¼è‡´æ— é™å¾ªç¯!
  
  // æ­£ç¡®åšæ³•: ä½¿ç”¨æ¡ä»¶åˆ¤æ–­æˆ–å¼‚æ­¥æ“ä½œ
  if (count.value &lt; 5) {
    // å¦‚æœéœ€è¦ï¼Œä½¿ç”¨ nextTick æˆ– setTimeout
    // setTimeout(() =&gt; { count.value++ }, 0)
  }
})

// é™·é˜±2: å†…å­˜æ³„æ¼
const showLeakyComponent = ref(false)

// é™·é˜±3: å¼‚æ­¥æ“ä½œæ—¶æœº
const fetchedData = ref('')

// é”™è¯¯åšæ³•: åœ¨å¯èƒ½å¸è½½çš„ç»„ä»¶ä¸­ä¸å¤„ç†å¼‚æ­¥æ“ä½œ
const fetchDataWithTiming = () =&gt; {
  setTimeout(() =&gt; {
    // å¦‚æœç»„ä»¶åœ¨æ•°æ®è¿”å›å‰å·²å¸è½½ï¼Œè¿™é‡Œä¼šæŠ¥é”™
    fetchedData.value = 'å»¶è¿Ÿæ•°æ®'
  }, 2000)
}

// æ­£ç¡®åšæ³•: ä½¿ç”¨æ ‡å¿—ä½æˆ– AbortController
let isMounted = true

const fetchDataCorrectly = () =&gt; {
  fetchedData.value = 'åŠ è½½ä¸­...'
  
  setTimeout(() =&gt; {
    // æ£€æŸ¥ç»„ä»¶æ˜¯å¦ä»ç„¶æŒ‚è½½
    if (isMounted) {
      fetchedData.value = 'å®‰å…¨çš„æ•°æ®åŠ è½½'
    }
  }, 2000)
}

onMounted(() =&gt; {
  isMounted = true
})

onUnmounted(() =&gt; {
  isMounted = false
})
&lt;/script&gt;

&lt;style scoped&gt;
.pitfalls-demo {
  padding: 20px;
  max-width: 800px;
  margin: 0 auto;
}

.pitfall-item {
  margin: 25px 0;
  padding: 20px;
  border: 2px solid #ff6b6b;
  border-radius: 8px;
  background: #fff5f5;
}

.pitfall-item h3 {
  color: #e53e3e;
  margin-top: 0;
}

button {
  margin: 5px;
  padding: 8px 16px;
  background: #e53e3e;
  color: white;
  border: none;
  border-radius: 4px;
  cursor: pointer;
}

button:hover {
  background: #c53030;
}
&lt;/style&gt;
</code></pre>
<hr/>
<h2 data-id="heading-18"><strong>ä¸ƒã€ æ€»ç»“</strong></h2>
<h3 data-id="heading-19"><strong>7.1 Vue3 ç”Ÿå‘½å‘¨æœŸæ ¸å¿ƒå˜åŒ–æ€»ç»“</strong></h3>
<ol>
<li><strong>æ›´åˆç†çš„å‘½å</strong>ï¼š<code>beforeUnmount</code> å’Œ <code>unmounted</code> æ›´å‡†ç¡®æè¿°ç»„ä»¶å¸è½½</li>
<li><strong>ç»„åˆå¼ API</strong>ï¼šåœ¨ <code>setup()</code> ä¸­ä½¿ç”¨ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼Œæ›´å¥½çš„é€»è¾‘ç»„ç»‡</li>
<li><strong>æ–°å¢è°ƒè¯•é’©å­</strong>ï¼š<code>onRenderTracked</code> å’Œ <code>onRenderTriggered</code> ç”¨äºå¼€å‘è°ƒè¯•</li>
<li><strong>æ›´å¥½çš„ TypeScript æ”¯æŒ</strong>ï¼šå®Œæ•´çš„ç±»å‹å®šä¹‰å’Œæ™ºèƒ½æç¤º</li>
</ol>
<h3 data-id="heading-20"><strong>7.2 ç”Ÿå‘½å‘¨æœŸä½¿ç”¨æŒ‡å—</strong></h3>













































<table><thead><tr><th>åœºæ™¯</th><th>æ¨èçš„ç”Ÿå‘½å‘¨æœŸ</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>æ•°æ®åˆå§‹åŒ–</td><td><code>setup()</code></td><td>æ›¿ä»£ <code>beforeCreate</code> å’Œ <code>created</code></td></tr><tr><td>DOM æ“ä½œ</td><td><code>onMounted</code></td><td>ç¡®ä¿ DOM å·²æŒ‚è½½</td></tr><tr><td>äº‹ä»¶ç›‘å¬</td><td><code>onMounted</code> æ·»åŠ ï¼Œ<code>onUnmounted</code> ç§»é™¤</td><td>é˜²æ­¢å†…å­˜æ³„æ¼</td></tr><tr><td>å®šæ—¶å™¨</td><td><code>onMounted</code> å¯åŠ¨ï¼Œ<code>onUnmounted</code> æ¸…ç†</td><td>é˜²æ­¢å†…å­˜æ³„æ¼</td></tr><tr><td>å¼‚æ­¥æ“ä½œ</td><td><code>onMounted</code> + æ¸…ç†å‡½æ•°</td><td>å¤„ç†ç»„ä»¶å¸è½½æ—¶çš„æ“ä½œå–æ¶ˆ</td></tr><tr><td>å“åº”å¼æ•°æ®æ›´æ–°</td><td><code>onUpdated</code>ï¼ˆè°¨æ…ä½¿ç”¨ï¼‰</td><td>é¿å…æ— é™å¾ªç¯</td></tr><tr><td>æ€§èƒ½è°ƒè¯•</td><td><code>onRenderTracked</code> / <code>onRenderTriggered</code></td><td>å¼€å‘é˜¶æ®µä½¿ç”¨</td></tr></tbody></table>
<h3 data-id="heading-21"><strong>7.3 è¿ç§»å»ºè®®</strong></h3>
<ul>
<li><strong>Vue2 â†’ Vue3</strong>ï¼šé€æ­¥æ›¿æ¢ç”Ÿå‘½å‘¨æœŸå‡½æ•°åç§°</li>
<li><strong>æ–°é¡¹ç›®</strong>ï¼šä¼˜å…ˆä½¿ç”¨ç»„åˆå¼ API å’Œæ–°çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°</li>
<li><strong>å¤§å‹é¡¹ç›®</strong>ï¼šå¯ä»¥æ··åˆä½¿ç”¨é€‰é¡¹å¼å’Œç»„åˆå¼ API</li>
<li><strong>TypeScript é¡¹ç›®</strong>ï¼šå……åˆ†åˆ©ç”¨å®Œæ•´çš„ç±»å‹æ”¯æŒ</li>
</ul>
<p>Vue3 çš„ç”Ÿå‘½å‘¨æœŸç³»ç»Ÿåœ¨ä¿æŒæ˜“ç”¨æ€§çš„åŒæ—¶ï¼Œæä¾›äº†æ›´å¼ºå¤§çš„åŠŸèƒ½å’Œæ›´å¥½çš„å¼€å‘ä½“éªŒã€‚é€šè¿‡åˆç†ä½¿ç”¨ç”Ÿå‘½å‘¨æœŸé’©å­ï¼Œå¯ä»¥æ„å»ºå‡ºæ›´å¥å£®ã€æ›´æ˜“ç»´æŠ¤çš„ Vue åº”ç”¨ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vue3 ç»„ä»¶æ‡’åŠ è½½æ·±åº¦è§£æï¼šä»åŸç†åˆ°æè‡´ä¼˜åŒ–çš„å®Œæ•´æŒ‡å—]]></title>    <link>https://juejin.cn/post/7593645549178339337</link>    <guid>https://juejin.cn/post/7593645549178339337</guid>    <pubDate>2026-01-11T03:35:10.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7593645549178339337" data-draft-id="7593600903249920026" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vue3 ç»„ä»¶æ‡’åŠ è½½æ·±åº¦è§£æï¼šä»åŸç†åˆ°æè‡´ä¼˜åŒ–çš„å®Œæ•´æŒ‡å—"/> <meta itemprop="keywords" content="Vue.js"/> <meta itemprop="datePublished" content="2026-01-11T03:35:10.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åŒ—è¾°alk"/> <meta itemprop="url" content="https://juejin.cn/user/1772855673241352"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vue3 ç»„ä»¶æ‡’åŠ è½½æ·±åº¦è§£æï¼šä»åŸç†åˆ°æè‡´ä¼˜åŒ–çš„å®Œæ•´æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1772855673241352/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åŒ—è¾°alk
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-11T03:35:10.000Z" title="Sun Jan 11 2026 03:35:10 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»13åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>æ‘˜è¦</strong></h2>
<p>ç»„ä»¶æ‡’åŠ è½½æ˜¯ç°ä»£å‰ç«¯æ€§èƒ½ä¼˜åŒ–çš„æ ¸å¿ƒæŠ€æœ¯ï¼ŒVue3 æä¾›äº†å¤šç§å¼ºå¤§çš„æ‡’åŠ è½½æ–¹æ¡ˆã€‚æœ¬æ–‡å°†æ·±å…¥æ¢è®¨ Vue3 ä¸­ç»„ä»¶æ‡’åŠ è½½çš„å®ç°åŸç†ã€ä½¿ç”¨åœºæ™¯ã€æ€§èƒ½ä¼˜åŒ–ç­–ç•¥ï¼Œé€šè¿‡è¯¦ç»†çš„ä»£ç ç¤ºä¾‹ã€æ‰§è¡Œæµç¨‹åˆ†æå’Œå®é™…é¡¹ç›®æ¡ˆä¾‹ï¼Œå¸®åŠ©ä½ å…¨é¢æŒæ¡ Vue3 ç»„ä»¶æ‡’åŠ è½½çš„å®Œæ•´çŸ¥è¯†ä½“ç³»ã€‚</p>
<hr/>
<h2 data-id="heading-1"><strong>ä¸€ã€ ä»€ä¹ˆæ˜¯ç»„ä»¶æ‡’åŠ è½½ï¼Ÿä¸ºä»€ä¹ˆéœ€è¦å®ƒï¼Ÿ</strong></h2>
<h3 data-id="heading-2"><strong>1.1 ä¼ ç»Ÿç»„ä»¶åŠ è½½çš„é—®é¢˜</strong></h3>
<p>åœ¨ä¼ ç»Ÿçš„ Vue åº”ç”¨ä¸­ï¼Œæ‰€æœ‰ç»„ä»¶é€šå¸¸è¢«æ‰“åŒ…åˆ°ä¸€ä¸ª JavaScript æ–‡ä»¶ä¸­ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä¼ ç»ŸåŒæ­¥å¯¼å…¥æ–¹å¼</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Home</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./components/Home.vue'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">About</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./components/About.vue'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Contact</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./components/Contact.vue'</span>

<span class="hljs-keyword">const</span> app = <span class="hljs-title function_">createApp</span>({
  <span class="hljs-attr">components</span>: {
    <span class="hljs-title class_">Home</span>,
    <span class="hljs-title class_">About</span>,
    <span class="hljs-title class_">Contact</span>
  }
})
</code></pre>
<p><strong>ä¼ ç»Ÿæ–¹å¼çš„é—®é¢˜ï¼š</strong></p>
<ul>
<li><strong>é¦–å±åŠ è½½ç¼“æ…¢</strong>ï¼šç”¨æˆ·éœ€è¦ä¸‹è½½æ•´ä¸ªåº”ç”¨ä»£ç æ‰èƒ½çœ‹åˆ°é¦–å±å†…å®¹</li>
<li><strong>èµ„æºæµªè´¹</strong>ï¼šç”¨æˆ·å¯èƒ½æ°¸è¿œä¸ä¼šè®¿é—®æŸäº›é¡µé¢ï¼Œä½†ä¾ç„¶åŠ è½½äº†å¯¹åº”ç»„ä»¶</li>
<li><strong>ç”¨æˆ·ä½“éªŒå·®</strong>ï¼šç‰¹åˆ«æ˜¯å¯¹äºç§»åŠ¨ç«¯ç”¨æˆ·å’Œç½‘ç»œæ¡ä»¶è¾ƒå·®çš„åœºæ™¯</li>
<li><strong>ç¼“å­˜æ•ˆç‡ä½</strong>ï¼šæ•´ä¸ªåº”ç”¨æ‰“åŒ…æˆä¸€ä¸ªæ–‡ä»¶ï¼Œä»»ä½•æ”¹åŠ¨éƒ½ä¼šä½¿ç¼“å­˜å¤±æ•ˆ</li>
</ul>
<h3 data-id="heading-3"><strong>1.2 ç»„ä»¶æ‡’åŠ è½½çš„è§£å†³æ–¹æ¡ˆ</strong></h3>
<p>æ‡’åŠ è½½ï¼ˆLazy Loadingï¼‰ä¹Ÿç§°ä¸ºä»£ç åˆ†å‰²ï¼ˆCode Splittingï¼‰ï¼Œå®ƒå…è®¸æˆ‘ä»¬å°†ä»£ç åˆ†å‰²æˆå¤šä¸ª chunkï¼Œåªåœ¨éœ€è¦æ—¶åŠ è½½ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ‡’åŠ è½½æ–¹å¼</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">Home</span> = (<span class="hljs-params"/>) =&gt; <span class="hljs-keyword">import</span>(<span class="hljs-string">'./components/Home.vue'</span>)
<span class="hljs-keyword">const</span> <span class="hljs-title function_">About</span> = (<span class="hljs-params"/>) =&gt; <span class="hljs-keyword">import</span>(<span class="hljs-string">'./components/About.vue'</span>)
<span class="hljs-keyword">const</span> <span class="hljs-title function_">Contact</span> = (<span class="hljs-params"/>) =&gt; <span class="hljs-keyword">import</span>(<span class="hljs-string">'./components/Contact.vue'</span>)
</code></pre>
<p><strong>æ‡’åŠ è½½çš„ä¼˜åŠ¿ï¼š</strong></p>
<ul>
<li><strong>æ›´å¿«çš„é¦–å±åŠ è½½</strong>ï¼šåªåŠ è½½å½“å‰é¡µé¢éœ€è¦çš„ä»£ç </li>
<li><strong>æŒ‰éœ€åŠ è½½</strong>ï¼šæ ¹æ®ç”¨æˆ·æ“ä½œåŠ¨æ€åŠ è½½ç»„ä»¶</li>
<li><strong>æ›´å¥½çš„ç¼“å­˜</strong>ï¼šç‹¬ç«‹çš„ chunk å¯ä»¥ç‹¬ç«‹ç¼“å­˜</li>
<li><strong>ä¼˜åŒ–ç”¨æˆ·ä½“éªŒ</strong>ï¼šå‡å°‘åˆå§‹åŠ è½½æ—¶é—´</li>
</ul>
<hr/>
<h2 data-id="heading-4"><strong>äºŒã€ Vue3 ç»„ä»¶æ‡’åŠ è½½æ ¸å¿ƒæ¦‚å¿µ</strong></h2>
<h3 data-id="heading-5"><strong>2.1 æ‡’åŠ è½½çš„å·¥ä½œåŸç†</strong></h3>
<p><strong>æµç¨‹å›¾ï¼šç»„ä»¶æ‡’åŠ è½½å®Œæ•´å·¥ä½œæµç¨‹</strong></p>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart TD
    A[ç”¨æˆ·è®¿é—®åº”ç”¨] --&gt; B[åŠ è½½ä¸»åŒ… main.js]
    B --&gt; C[æ¸²æŸ“é¦–å±å†…å®¹]
    C --&gt; D{ç”¨æˆ·è§¦å‘æ‡’åŠ è½½?}
    
    D -- è·¯ç”±åˆ‡æ¢ --&gt; E[åŠ è½½å¯¹åº”è·¯ç”±ç»„ä»¶]
    D -- æ¡ä»¶æ¸²æŸ“ --&gt; F[åŠ è½½æ¡ä»¶ç»„ä»¶]
    D -- ç”¨æˆ·äº¤äº’ --&gt; G[åŠ è½½äº¤äº’ç»„ä»¶]
    
    E --&gt; H[æ˜¾ç¤ºåŠ è½½çŠ¶æ€]
    F --&gt; H
    G --&gt; H
    
    H --&gt; I[ç½‘ç»œè¯·æ±‚å¯¹åº”chunk]
    I --&gt; J{åŠ è½½æˆåŠŸ?}
    J -- æ˜¯ --&gt; K[æ¸²æŸ“æ‡’åŠ è½½ç»„ä»¶]
    J -- å¦ --&gt; L[æ˜¾ç¤ºé”™è¯¯çŠ¶æ€]
    
    K --&gt; M[ç»„ä»¶æ¿€æ´»ä½¿ç”¨]
    L --&gt; N[æä¾›é‡è¯•æœºåˆ¶]
</code></pre>
<h3 data-id="heading-6"><strong>2.2 æ‡’åŠ è½½çš„æ ¸å¿ƒæ¦‚å¿µ</strong></h3>
<ul>
<li><strong>ä»£ç åˆ†å‰²</strong>ï¼šå°†ä»£ç æ‹†åˆ†æˆå¤šä¸ªå°å—ï¼ˆchunksï¼‰</li>
<li><strong>åŠ¨æ€å¯¼å…¥</strong>ï¼šä½¿ç”¨ <code>import()</code> å‡½æ•°åœ¨è¿è¡Œæ—¶åŠ è½½æ¨¡å—</li>
<li><strong>ç»„ä»¶å·¥å‚</strong>ï¼šè¿”å› Promise çš„å‡½æ•°ï¼Œè§£æä¸ºç»„ä»¶å®šä¹‰</li>
<li><strong>åŠ è½½çŠ¶æ€</strong>ï¼šåœ¨ç»„ä»¶åŠ è½½æœŸé—´æ˜¾ç¤ºçš„å›é€€å†…å®¹</li>
<li><strong>é”™è¯¯å¤„ç†</strong>ï¼šåŠ è½½å¤±è´¥æ—¶çš„é™çº§æ–¹æ¡ˆ</li>
</ul>
<hr/>
<h2 data-id="heading-7"><strong>ä¸‰ã€ Vue3 ç»„ä»¶æ‡’åŠ è½½åŸºç¡€å®ç°</strong></h2>
<h3 data-id="heading-8"><strong>3.1 ä½¿ç”¨ defineAsyncComponent å®ç°æ‡’åŠ è½½</strong></h3>
<p>Vue3 æä¾›äº† <code>defineAsyncComponent</code> å‡½æ•°æ¥åˆ›å»ºå¼‚æ­¥ç»„ä»¶ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;div class="basic-lazy-demo"&gt;
    &lt;h2&gt;åŸºç¡€æ‡’åŠ è½½ç¤ºä¾‹&lt;/h2&gt;
    
    &lt;div class="controls"&gt;
      &lt;button @click="showLazyComponent = !showLazyComponent" class="btn-primary"&gt;
        {{ showLazyComponent ? 'éšè—' : 'æ˜¾ç¤º' }} æ‡’åŠ è½½ç»„ä»¶
      &lt;/button&gt;
    &lt;/div&gt;

    &lt;div class="component-area"&gt;
      &lt;!-- åŒæ­¥åŠ è½½çš„ç»„ä»¶ --&gt;
      &lt;div v-if="!showLazyComponent" class="sync-component"&gt;
        &lt;h3&gt;åŒæ­¥åŠ è½½çš„ç»„ä»¶&lt;/h3&gt;
        &lt;p&gt;è¿™ä¸ªç»„ä»¶åœ¨ä¸»åŒ…ä¸­ï¼Œç«‹å³å¯ç”¨&lt;/p&gt;
      &lt;/div&gt;

      &lt;!-- æ‡’åŠ è½½çš„ç»„ä»¶ --&gt;
      &lt;Suspense v-else&gt;
        &lt;template #default&gt;
          &lt;LazyBasicComponent /&gt;
        &lt;/template&gt;
        &lt;template #fallback&gt;
          &lt;div class="loading-state"&gt;
            &lt;div class="spinner"&gt;&lt;/div&gt;
            &lt;p&gt;æ‡’åŠ è½½ç»„ä»¶åŠ è½½ä¸­...&lt;/p&gt;
          &lt;/div&gt;
        &lt;/template&gt;
      &lt;/Suspense&gt;
    &lt;/div&gt;

    &lt;div class="bundle-info"&gt;
      &lt;h3&gt;æ‰“åŒ…ä¿¡æ¯åˆ†æ&lt;/h3&gt;
      &lt;div class="info-grid"&gt;
        &lt;div class="info-item"&gt;
          &lt;span&gt;ä¸»åŒ…å¤§å°:&lt;/span&gt;
          &lt;strong&gt;~15KB&lt;/strong&gt;
        &lt;/div&gt;
        &lt;div class="info-item"&gt;
          &lt;span&gt;æ‡’åŠ è½½ç»„ä»¶å¤§å°:&lt;/span&gt;
          &lt;strong&gt;~8KB (å•ç‹¬chunk)&lt;/strong&gt;
        &lt;/div&gt;
        &lt;div class="info-item"&gt;
          &lt;span&gt;åŠ è½½æ–¹å¼:&lt;/span&gt;
          &lt;strong&gt;æŒ‰éœ€åŠ è½½&lt;/strong&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup&gt;
import { ref, defineAsyncComponent } from 'vue'

const showLazyComponent = ref(false)

// ä½¿ç”¨ defineAsyncComponent å®šä¹‰æ‡’åŠ è½½ç»„ä»¶
const LazyBasicComponent = defineAsyncComponent(() =&gt; 
  import('./components/LazyBasicComponent.vue')
)
&lt;/script&gt;

&lt;style scoped&gt;
.basic-lazy-demo {
  padding: 20px;
  max-width: 800px;
  margin: 0 auto;
  font-family: Arial, sans-serif;
}

.controls {
  margin: 20px 0;
  text-align: center;
}

.btn-primary {
  padding: 12px 24px;
  background: #42b883;
  color: white;
  border: none;
  border-radius: 6px;
  cursor: pointer;
  font-size: 16px;
  transition: background 0.3s;
}

.btn-primary:hover {
  background: #369870;
}

.component-area {
  margin: 30px 0;
  min-height: 200px;
}

.sync-component {
  padding: 30px;
  background: #e3f2fd;
  border: 2px solid #2196f3;
  border-radius: 8px;
  text-align: center;
}

.sync-component h3 {
  margin: 0 0 15px 0;
  color: #1976d2;
}

.loading-state {
  padding: 40px;
  background: #fff3e0;
  border: 2px dashed #ff9800;
  border-radius: 8px;
  text-align: center;
  color: #e65100;
}

.spinner {
  width: 40px;
  height: 40px;
  border: 4px solid #f3f3f3;
  border-top: 4px solid #ff9800;
  border-radius: 50%;
  animation: spin 1s linear infinite;
  margin: 0 auto 16px;
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

.bundle-info {
  margin-top: 30px;
  padding: 20px;
  background: #f5f5f5;
  border-radius: 8px;
}

.bundle-info h3 {
  margin: 0 0 15px 0;
  color: #333;
}

.info-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 15px;
}

.info-item {
  display: flex;
  justify-content: space-between;
  padding: 12px;
  background: white;
  border-radius: 6px;
  border-left: 4px solid #42b883;
}

.info-item span {
  color: #666;
}

.info-item strong {
  color: #2c3e50;
}
&lt;/style&gt;
</code></pre>
<p><strong>LazyBasicComponent.vue</strong></p>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;div class="lazy-basic-component"&gt;
    &lt;h3&gt;ğŸš€ æ‡’åŠ è½½ç»„ä»¶å·²åŠ è½½!&lt;/h3&gt;
    &lt;div class="component-content"&gt;
      &lt;p&gt;è¿™ä¸ªç»„ä»¶æ˜¯é€šè¿‡æ‡’åŠ è½½æ–¹å¼åŠ¨æ€åŠ è½½çš„&lt;/p&gt;
      &lt;div class="features"&gt;
        &lt;div class="feature"&gt;
          &lt;span class="icon"&gt;ğŸ“¦&lt;/span&gt;
          &lt;span&gt;ç‹¬ç«‹ chunk&lt;/span&gt;
        &lt;/div&gt;
        &lt;div class="feature"&gt;
          &lt;span class="icon"&gt;âš¡&lt;/span&gt;
          &lt;span&gt;æŒ‰éœ€åŠ è½½&lt;/span&gt;
        &lt;/div&gt;
        &lt;div class="feature"&gt;
          &lt;span class="icon"&gt;ğŸ¯&lt;/span&gt;
          &lt;span&gt;æ€§èƒ½ä¼˜åŒ–&lt;/span&gt;
        &lt;/div&gt;
      &lt;/div&gt;
      &lt;p class="load-time"&gt;ç»„ä»¶åŠ è½½æ—¶é—´: {{ loadTime }}&lt;/p&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup&gt;
import { ref, onMounted } from 'vue'

const loadTime = ref('')

onMounted(() =&gt; {
  loadTime.value = new Date().toLocaleTimeString()
  console.log('LazyBasicComponent å·²æŒ‚è½½')
})
&lt;/script&gt;

&lt;style scoped&gt;
.lazy-basic-component {
  padding: 30px;
  background: #e8f5e8;
  border: 2px solid #4caf50;
  border-radius: 8px;
  text-align: center;
}

.lazy-basic-component h3 {
  margin: 0 0 20px 0;
  color: #2e7d32;
  font-size: 24px;
}

.component-content {
  max-width: 400px;
  margin: 0 auto;
}

.features {
  display: flex;
  justify-content: space-around;
  margin: 25px 0;
  padding: 20px;
  background: white;
  border-radius: 8px;
}

.feature {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 8px;
}

.feature .icon {
  font-size: 24px;
}

.feature span:last-child {
  font-size: 14px;
  color: #666;
}

.load-time {
  margin: 20px 0 0 0;
  padding: 10px;
  background: #2c3e50;
  color: white;
  border-radius: 4px;
  font-family: 'Courier New', monospace;
  font-size: 14px;
}
&lt;/style&gt;
</code></pre>
<h3 data-id="heading-9"><strong>3.2 è·¯ç”±çº§åˆ«çš„æ‡’åŠ è½½</strong></h3>
<p>åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œè·¯ç”±çº§åˆ«çš„æ‡’åŠ è½½æ˜¯æœ€å¸¸è§çš„åº”ç”¨åœºæ™¯ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// router/index.js</span>
<span class="hljs-keyword">import</span> { createRouter, createWebHistory } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue-router'</span>

<span class="hljs-keyword">const</span> routes = [
  {
    <span class="hljs-attr">path</span>: <span class="hljs-string">'/'</span>,
    <span class="hljs-attr">name</span>: <span class="hljs-string">'Home'</span>,
    <span class="hljs-attr">component</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'@/views/Home.vue'</span>)  <span class="hljs-comment">// æ‡’åŠ è½½é¦–é¡µ</span>
  },
  {
    <span class="hljs-attr">path</span>: <span class="hljs-string">'/about'</span>,
    <span class="hljs-attr">name</span>: <span class="hljs-string">'About'</span>,
    <span class="hljs-attr">component</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'@/views/About.vue'</span>) <span class="hljs-comment">// æ‡’åŠ è½½å…³äºé¡µ</span>
  },
  {
    <span class="hljs-attr">path</span>: <span class="hljs-string">'/products'</span>,
    <span class="hljs-attr">name</span>: <span class="hljs-string">'Products'</span>,
    <span class="hljs-attr">component</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'@/views/Products.vue'</span>) <span class="hljs-comment">// æ‡’åŠ è½½äº§å“é¡µ</span>
  },
  {
    <span class="hljs-attr">path</span>: <span class="hljs-string">'/contact'</span>,
    <span class="hljs-attr">name</span>: <span class="hljs-string">'Contact'</span>,
    <span class="hljs-attr">component</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'@/views/Contact.vue'</span>) <span class="hljs-comment">// æ‡’åŠ è½½è”ç³»é¡µ</span>
  }
]

<span class="hljs-keyword">const</span> router = <span class="hljs-title function_">createRouter</span>({
  <span class="hljs-attr">history</span>: <span class="hljs-title function_">createWebHistory</span>(),
  routes
})

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> router
</code></pre>
<p><strong>å¸¦åŠ è½½çŠ¶æ€çš„è·¯ç”±æ‡’åŠ è½½ï¼š</strong></p>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;div class="route-lazy-demo"&gt;
    &lt;h2&gt;è·¯ç”±çº§åˆ«æ‡’åŠ è½½ç¤ºä¾‹&lt;/h2&gt;
    
    &lt;nav class="nav-tabs"&gt;
      &lt;router-link 
        v-for="tab in tabs" 
        :key="tab.path"
        :to="tab.path"
        class="nav-tab"
        active-class="active"
      &gt;
        {{ tab.name }}
      &lt;/router-link&gt;
    &lt;/nav&gt;

    &lt;div class="route-content"&gt;
      &lt;RouterView v-slot="{ Component }"&gt;
        &lt;Suspense&gt;
          &lt;template #default&gt;
            &lt;component :is="Component" /&gt;
          &lt;/template&gt;
          &lt;template #fallback&gt;
            &lt;div class="route-loading"&gt;
              &lt;div class="loading-content"&gt;
                &lt;div class="spinner large"&gt;&lt;/div&gt;
                &lt;p&gt;é¡µé¢åŠ è½½ä¸­...&lt;/p&gt;
                &lt;div class="loading-dots"&gt;
                  &lt;span&gt;&lt;/span&gt;
                  &lt;span&gt;&lt;/span&gt;
                  &lt;span&gt;&lt;/span&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/template&gt;
        &lt;/Suspense&gt;
      &lt;/RouterView&gt;
    &lt;/div&gt;

    &lt;div class="route-info"&gt;
      &lt;h3&gt;è·¯ç”±æ‡’åŠ è½½ä¿¡æ¯&lt;/h3&gt;
      &lt;div class="chunk-status"&gt;
        &lt;div 
          v-for="chunk in chunkStatus" 
          :key="chunk.name"
          class="chunk-item"
          :class="chunk.status"
        &gt;
          &lt;span class="chunk-name"&gt;{{ chunk.name }}&lt;/span&gt;
          &lt;span class="chunk-status"&gt;{{ chunk.status }}&lt;/span&gt;
          &lt;span class="chunk-size"&gt;{{ chunk.size }}&lt;/span&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup&gt;
import { ref, watch } from 'vue'
import { useRoute } from 'vue-router'

const route = useRoute()

const tabs = [
  { path: '/', name: 'é¦–é¡µ' },
  { path: '/about', name: 'å…³äºæˆ‘ä»¬' },
  { path: '/products', name: 'äº§å“æœåŠ¡' },
  { path: '/contact', name: 'è”ç³»æˆ‘ä»¬' }
]

const chunkStatus = ref([
  { name: 'home', status: 'loaded', size: '15KB' },
  { name: 'about', status: 'pending', size: '12KB' },
  { name: 'products', status: 'pending', size: '25KB' },
  { name: 'contact', status: 'pending', size: '8KB' }
])

// ç›‘å¬è·¯ç”±å˜åŒ–ï¼Œæ¨¡æ‹Ÿ chunk åŠ è½½çŠ¶æ€
watch(() =&gt; route.name, (newRouteName) =&gt; {
  const chunkName = newRouteName.toLowerCase()
  chunkStatus.value.forEach(chunk =&gt; {
    if (chunk.name === chunkName) {
      chunk.status = 'loaded'
    }
  })
})
&lt;/script&gt;

&lt;style scoped&gt;
.route-lazy-demo {
  max-width: 1000px;
  margin: 0 auto;
  padding: 20px;
}

.nav-tabs {
  display: flex;
  background: #f8f9fa;
  border-radius: 8px;
  padding: 5px;
  margin: 20px 0;
}

.nav-tab {
  flex: 1;
  padding: 12px 20px;
  text-align: center;
  text-decoration: none;
  color: #666;
  border-radius: 6px;
  transition: all 0.3s;
}

.nav-tab:hover {
  background: #e9ecef;
  color: #333;
}

.nav-tab.active {
  background: #42b883;
  color: white;
}

.route-content {
  min-height: 400px;
  margin: 30px 0;
}

.route-loading {
  display: flex;
  align-items: center;
  justify-content: center;
  min-height: 300px;
  background: #f8f9fa;
  border-radius: 8px;
  border: 2px dashed #dee2e6;
}

.loading-content {
  text-align: center;
  color: #666;
}

.spinner.large {
  width: 60px;
  height: 60px;
  border: 6px solid #f3f3f3;
  border-top: 6px solid #42b883;
  border-radius: 50%;
  animation: spin 1s linear infinite;
  margin: 0 auto 20px;
}

.loading-dots {
  display: flex;
  justify-content: center;
  gap: 4px;
  margin-top: 15px;
}

.loading-dots span {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: #42b883;
  animation: bounce 1.4s infinite ease-in-out;
}

.loading-dots span:nth-child(1) { animation-delay: -0.32s; }
.loading-dots span:nth-child(2) { animation-delay: -0.16s; }

@keyframes bounce {
  0%, 80%, 100% {
    transform: scale(0);
  }
  40% {
    transform: scale(1);
  }
}

.route-info {
  margin-top: 30px;
  padding: 20px;
  background: #2c3e50;
  border-radius: 8px;
  color: white;
}

.route-info h3 {
  margin: 0 0 15px 0;
  color: #42b883;
}

.chunk-status {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.chunk-item {
  display: flex;
  justify-content: space-between;
  padding: 12px 15px;
  background: #34495e;
  border-radius: 6px;
  transition: all 0.3s;
}

.chunk-item.loaded {
  border-left: 4px solid #27ae60;
}

.chunk-item.pending {
  border-left: 4px solid #f39c12;
  opacity: 0.7;
}

.chunk-name {
  font-weight: bold;
  color: #ecf0f1;
}

.chunk-status {
  padding: 2px 8px;
  border-radius: 12px;
  font-size: 12px;
  font-weight: bold;
  text-transform: uppercase;
}

.chunk-item.loaded .chunk-status {
  background: #27ae60;
  color: white;
}

.chunk-item.pending .chunk-status {
  background: #f39c12;
  color: white;
}

.chunk-size {
  color: #bdc3c7;
  font-family: 'Courier New', monospace;
}
&lt;/style&gt;
</code></pre>
<hr/>
<h2 data-id="heading-10"><strong>å››ã€ é«˜çº§æ‡’åŠ è½½é…ç½®ä¸ä¼˜åŒ–</strong></h2>
<h3 data-id="heading-11"><strong>4.1 å®Œæ•´çš„å¼‚æ­¥ç»„ä»¶é…ç½®</strong></h3>
<p>Vue3 çš„ <code>defineAsyncComponent</code> æ”¯æŒå®Œæ•´çš„é…ç½®é€‰é¡¹ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;div class="advanced-lazy-demo"&gt;
    &lt;h2&gt;é«˜çº§æ‡’åŠ è½½é…ç½®&lt;/h2&gt;
    
    &lt;div class="controls"&gt;
      &lt;button @click="loadComponent('success')" class="btn-success"&gt;
        åŠ è½½æˆåŠŸç»„ä»¶
      &lt;/button&gt;
      &lt;button @click="loadComponent('error')" class="btn-error"&gt;
        åŠ è½½é”™è¯¯ç»„ä»¶
      &lt;/button&gt;
      &lt;button @click="loadComponent('timeout')" class="btn-warning"&gt;
        åŠ è½½è¶…æ—¶ç»„ä»¶
      &lt;/button&gt;
      &lt;button @click="loadComponent('delay')" class="btn-info"&gt;
        åŠ è½½å»¶è¿Ÿç»„ä»¶
      &lt;/button&gt;
    &lt;/div&gt;

    &lt;div class="component-area"&gt;
      &lt;AdvancedAsyncComponent 
        v-if="currentComponent"
        :key="componentKey"
      /&gt;
    &lt;/div&gt;

    &lt;div class="config-info"&gt;
      &lt;h3&gt;å¼‚æ­¥ç»„ä»¶é…ç½®è¯´æ˜&lt;/h3&gt;
      &lt;div class="config-grid"&gt;
        &lt;div class="config-item"&gt;
          &lt;h4&gt;loader&lt;/h4&gt;
          &lt;p&gt;ç»„ä»¶åŠ è½½å‡½æ•°ï¼Œè¿”å› Promise&lt;/p&gt;
        &lt;/div&gt;
        &lt;div class="config-item"&gt;
          &lt;h4&gt;loadingComponent&lt;/h4&gt;
          &lt;p&gt;åŠ è½½è¿‡ç¨‹ä¸­æ˜¾ç¤ºçš„ç»„ä»¶&lt;/p&gt;
        &lt;/div&gt;
        &lt;div class="config-item"&gt;
          &lt;h4&gt;errorComponent&lt;/h4&gt;
          &lt;p&gt;åŠ è½½å¤±è´¥æ—¶æ˜¾ç¤ºçš„ç»„ä»¶&lt;/p&gt;
        &lt;/div&gt;
        &lt;div class="config-item"&gt;
          &lt;h4&gt;delay&lt;/h4&gt;
          &lt;p&gt;å»¶è¿Ÿæ˜¾ç¤ºåŠ è½½çŠ¶æ€ï¼ˆé¿å…é—ªçƒï¼‰&lt;/p&gt;
        &lt;/div&gt;
        &lt;div class="config-item"&gt;
          &lt;h4&gt;timeout&lt;/h4&gt;
          &lt;p&gt;åŠ è½½è¶…æ—¶æ—¶é—´&lt;/p&gt;
        &lt;/div&gt;
        &lt;div class="config-item"&gt;
          &lt;h4&gt;onError&lt;/h4&gt;
          &lt;p&gt;é”™è¯¯å¤„ç†å›è°ƒå‡½æ•°&lt;/p&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup&gt;
import { ref, defineAsyncComponent } from 'vue'
import LoadingSpinner from './components/LoadingSpinner.vue'
import ErrorDisplay from './components/ErrorDisplay.vue'

const currentComponent = ref(null)
const componentKey = ref(0)

// æ¨¡æ‹Ÿä¸åŒåŠ è½½åœºæ™¯çš„ç»„ä»¶
const componentConfigs = {
  success: () =&gt; import('./components/SuccessComponent.vue'),
  error: () =&gt; Promise.reject(new Error('æ¨¡æ‹ŸåŠ è½½é”™è¯¯')),
  timeout: () =&gt; new Promise(() =&gt; {}), // æ°¸è¿œä¸ä¼š resolve
  delay: () =&gt; new Promise(resolve =&gt; {
    setTimeout(() =&gt; {
      resolve(import('./components/DelayedComponent.vue'))
    }, 3000)
  })
}

// é«˜çº§å¼‚æ­¥ç»„ä»¶é…ç½®
const AdvancedAsyncComponent = defineAsyncComponent({
  // åŠ è½½å™¨å‡½æ•°
  loader: () =&gt; currentComponent.value?.loader() || Promise.reject(new Error('æœªé€‰æ‹©ç»„ä»¶')),
  
  // åŠ è½½ä¸­æ˜¾ç¤ºçš„ç»„ä»¶
  loadingComponent: LoadingSpinner,
  
  // åŠ è½½å¤±è´¥æ˜¾ç¤ºçš„ç»„ä»¶
  errorComponent: ErrorDisplay,
  
  // å»¶è¿Ÿæ˜¾ç¤ºåŠ è½½çŠ¶æ€ï¼ˆé¿å…é—ªçƒï¼‰
  delay: 200,
  
  // è¶…æ—¶æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰
  timeout: 5000,
  
  // é”™è¯¯å¤„ç†å‡½æ•°
  onError: (error, retry, fail, attempts) =&gt; {
    console.error(`ç»„ä»¶åŠ è½½å¤±è´¥ (å°è¯•æ¬¡æ•°: ${attempts}):`, error)
    
    // æœ€å¤šé‡è¯• 3 æ¬¡
    if (attempts &lt;= 3) {
      console.log(`ç¬¬ ${attempts} æ¬¡é‡è¯•...`)
      retry()
    } else {
      fail()
    }
  },
  
  // å¯æŒ‚èµ·ï¼ˆSuspense ç›¸å…³ï¼‰
  suspensible: false
})

const loadComponent = (type) =&gt; {
  currentComponent.value = {
    loader: componentConfigs[type],
    type: type
  }
  componentKey.value++ // å¼ºåˆ¶é‡æ–°åˆ›å»ºç»„ä»¶
}
&lt;/script&gt;

&lt;style scoped&gt;
.advanced-lazy-demo {
  padding: 20px;
  max-width: 1000px;
  margin: 0 auto;
}

.controls {
  display: flex;
  gap: 15px;
  justify-content: center;
  margin: 30px 0;
  flex-wrap: wrap;
}

.btn-success { background: #27ae60; }
.btn-error { background: #e74c3c; }
.btn-warning { background: #f39c12; }
.btn-info { background: #3498db; }

.btn-success, .btn-error, .btn-warning, .btn-info {
  color: white;
  border: none;
  padding: 12px 20px;
  border-radius: 6px;
  cursor: pointer;
  font-size: 14px;
  transition: all 0.3s;
}

.btn-success:hover { background: #229954; }
.btn-error:hover { background: #c0392b; }
.btn-warning:hover { background: #e67e22; }
.btn-info:hover { background: #2980b9; }

.component-area {
  min-height: 300px;
  margin: 30px 0;
  border: 2px dashed #ddd;
  border-radius: 8px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.config-info {
  margin-top: 40px;
  padding: 25px;
  background: #f8f9fa;
  border-radius: 8px;
}

.config-info h3 {
  margin: 0 0 20px 0;
  color: #2c3e50;
  text-align: center;
}

.config-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 20px;
}

.config-item {
  padding: 20px;
  background: white;
  border-radius: 8px;
  border-left: 4px solid #42b883;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}

.config-item h4 {
  margin: 0 0 10px 0;
  color: #42b883;
  font-size: 16px;
}

.config-item p {
  margin: 0;
  color: #666;
  line-height: 1.5;
}
&lt;/style&gt;
</code></pre>
<p><strong>LoadingSpinner.vue</strong></p>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;div class="loading-spinner"&gt;
    &lt;div class="spinner-container"&gt;
      &lt;div class="spinner"&gt;&lt;/div&gt;
      &lt;p&gt;ç»„ä»¶åŠ è½½ä¸­...&lt;/p&gt;
      &lt;div class="progress"&gt;
        &lt;div class="progress-bar" :style="progressStyle"&gt;&lt;/div&gt;
      &lt;/div&gt;
      &lt;p class="hint"&gt;è¿™é€šå¸¸å¾ˆå¿«ï¼Œè¯·è€å¿ƒç­‰å¾…&lt;/p&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup&gt;
import { ref, onMounted, onUnmounted } from 'vue'

const progress = ref(0)
let progressInterval

onMounted(() =&gt; {
  progressInterval = setInterval(() =&gt; {
    progress.value = Math.min(progress.value + Math.random() * 10, 90)
  }, 200)
})

onUnmounted(() =&gt; {
  clearInterval(progressInterval)
})

const progressStyle = {
  width: `${progress.value}%`
}
&lt;/script&gt;

&lt;style scoped&gt;
.loading-spinner {
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 40px;
  text-align: center;
}

.spinner-container {
  max-width: 300px;
}

.spinner {
  width: 50px;
  height: 50px;
  border: 4px solid #f3f3f3;
  border-top: 4px solid #42b883;
  border-radius: 50%;
  animation: spin 1s linear infinite;
  margin: 0 auto 20px;
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

.progress {
  width: 100%;
  height: 6px;
  background: #f0f0f0;
  border-radius: 3px;
  margin: 15px 0;
  overflow: hidden;
}

.progress-bar {
  height: 100%;
  background: linear-gradient(90deg, #42b883, #369870);
  border-radius: 3px;
  transition: width 0.3s ease;
}

.hint {
  font-size: 12px;
  color: #999;
  margin: 10px 0 0 0;
}
&lt;/style&gt;
</code></pre>
<p><strong>ErrorDisplay.vue</strong></p>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;div class="error-display"&gt;
    &lt;div class="error-container"&gt;
      &lt;div class="error-icon"&gt;âŒ&lt;/div&gt;
      &lt;h3&gt;ç»„ä»¶åŠ è½½å¤±è´¥&lt;/h3&gt;
      &lt;p class="error-message"&gt;{{ error?.message || 'æœªçŸ¥é”™è¯¯' }}&lt;/p&gt;
      &lt;div class="error-actions"&gt;
        &lt;button @click="retry" class="retry-btn"&gt;
          ğŸ”„ é‡è¯•åŠ è½½
        &lt;/button&gt;
        &lt;button @click="reset" class="reset-btn"&gt;
          ğŸ  è¿”å›é¦–é¡µ
        &lt;/button&gt;
      &lt;/div&gt;
      &lt;p class="error-hint"&gt;å¦‚æœé—®é¢˜æŒç»­å­˜åœ¨ï¼Œè¯·è”ç³»æŠ€æœ¯æ”¯æŒ&lt;/p&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup&gt;
const props = defineProps({
  error: {
    type: Error,
    default: null
  }
})

const emit = defineEmits(['retry'])

const retry = () =&gt; {
  emit('retry')
}

const reset = () =&gt; {
  window.location.href = '/'
}
&lt;/script&gt;

&lt;style scoped&gt;
.error-display {
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 40px;
  text-align: center;
}

.error-container {
  max-width: 400px;
  padding: 30px;
  background: #fff5f5;
  border: 2px solid #fed7d7;
  border-radius: 8px;
}

.error-icon {
  font-size: 48px;
  margin-bottom: 20px;
}

.error-container h3 {
  margin: 0 0 15px 0;
  color: #e53e3e;
}

.error-message {
  color: #718096;
  margin-bottom: 20px;
  padding: 10px;
  background: white;
  border-radius: 4px;
  font-family: 'Courier New', monospace;
  font-size: 14px;
}

.error-actions {
  display: flex;
  gap: 10px;
  justify-content: center;
  margin-bottom: 15px;
}

.retry-btn, .reset-btn {
  padding: 10px 20px;
  border: none;
  border-radius: 6px;
  cursor: pointer;
  font-size: 14px;
  transition: all 0.3s;
}

.retry-btn {
  background: #4299e1;
  color: white;
}

.retry-btn:hover {
  background: #3182ce;
}

.reset-btn {
  background: #e2e8f0;
  color: #4a5568;
}

.reset-btn:hover {
  background: #cbd5e0;
}

.error-hint {
  font-size: 12px;
  color: #a0aec0;
  margin: 0;
}
&lt;/style&gt;
</code></pre>
<h3 data-id="heading-12"><strong>4.2 æ¡ä»¶æ‡’åŠ è½½ä¸é¢„åŠ è½½</strong></h3>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;div class="conditional-lazy-demo"&gt;
    &lt;h2&gt;æ¡ä»¶æ‡’åŠ è½½ä¸é¢„åŠ è½½ç­–ç•¥&lt;/h2&gt;
    
    &lt;div class="strategies"&gt;
      &lt;div class="strategy"&gt;
        &lt;h3&gt;1. æ¡ä»¶æ‡’åŠ è½½&lt;/h3&gt;
        &lt;div class="demo-section"&gt;
          &lt;label class="toggle-label"&gt;
            &lt;input type="checkbox" v-model="enableHeavyComponent"&gt;
            å¯ç”¨é‡å‹ç»„ä»¶
          &lt;/label&gt;
          &lt;div class="component-container"&gt;
            &lt;HeavyComponent v-if="enableHeavyComponent" /&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;

      &lt;div class="strategy"&gt;
        &lt;h3&gt;2. é¢„åŠ è½½ç­–ç•¥&lt;/h3&gt;
        &lt;div class="demo-section"&gt;
          &lt;div class="preload-buttons"&gt;
            &lt;button @click="preloadComponent('chart')" class="preload-btn"&gt;
              é¢„åŠ è½½å›¾è¡¨ç»„ä»¶
            &lt;/button&gt;
            &lt;button @click="preloadComponent('editor')" class="preload-btn"&gt;
              é¢„åŠ è½½ç¼–è¾‘å™¨
            &lt;/button&gt;
          &lt;/div&gt;
          &lt;div class="preload-status"&gt;
            &lt;div 
              v-for="item in preloadStatus" 
              :key="item.name"
              class="status-item"
              :class="item.status"
            &gt;
              &lt;span&gt;{{ item.name }}&lt;/span&gt;
              &lt;span class="status-dot"&gt;&lt;/span&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;

      &lt;div class="strategy"&gt;
        &lt;h3&gt;3. å¯è§æ—¶åŠ è½½&lt;/h3&gt;
        &lt;div class="demo-section"&gt;
          &lt;div class="scroll-container"&gt;
            &lt;div 
              v-for="n in 10" 
              :key="n"
              class="scroll-item"
            &gt;
              &lt;p&gt;å†…å®¹åŒºå— {{ n }}&lt;/p&gt;
              &lt;LazyWhenVisible v-if="n === 5" /&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup&gt;
import { ref, reactive, defineAsyncComponent, onMounted } from 'vue'

// 1. æ¡ä»¶æ‡’åŠ è½½
const enableHeavyComponent = ref(false)
const HeavyComponent = defineAsyncComponent(() =&gt; 
  import('./components/HeavyComponent.vue')
)

// 2. é¢„åŠ è½½ç­–ç•¥
const preloadStatus = reactive([
  { name: 'å›¾è¡¨ç»„ä»¶', status: 'pending' },
  { name: 'ç¼–è¾‘å™¨ç»„ä»¶', status: 'pending' }
])

const preloadedComponents = {}

const preloadComponent = async (type) =&gt; {
  const index = preloadStatus.findIndex(item =&gt; item.name.includes(type))
  if (index === -1) return

  preloadStatus[index].status = 'loading'
  
  try {
    if (type === 'chart') {
      preloadedComponents.chart = await import('./components/ChartComponent.vue')
    } else if (type === 'editor') {
      preloadedComponents.editor = await import('./components/EditorComponent.vue')
    }
    
    preloadStatus[index].status = 'loaded'
    console.log(`${type} ç»„ä»¶é¢„åŠ è½½å®Œæˆ`)
  } catch (error) {
    preloadStatus[index].status = 'error'
    console.error(`${type} ç»„ä»¶é¢„åŠ è½½å¤±è´¥:`, error)
  }
}

// 3. å¯è§æ—¶åŠ è½½
const LazyWhenVisible = defineAsyncComponent(() =&gt; 
  import('./components/LazyWhenVisible.vue')
)

// æ¨¡æ‹Ÿé¢„åŠ è½½
onMounted(() =&gt; {
  // ç©ºé—²æ—¶é¢„åŠ è½½å¯èƒ½ç”¨åˆ°çš„ç»„ä»¶
  if ('requestIdleCallback' in window) {
    requestIdleCallback(() =&gt; {
      preloadComponent('chart')
    })
  }
})
&lt;/script&gt;

&lt;style scoped&gt;
.conditional-lazy-demo {
  padding: 20px;
  max-width: 1200px;
  margin: 0 auto;
}

.strategies {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
  gap: 30px;
  margin: 30px 0;
}

.strategy {
  padding: 25px;
  background: #f8f9fa;
  border-radius: 8px;
  border: 1px solid #e9ecef;
}

.strategy h3 {
  margin: 0 0 20px 0;
  color: #2c3e50;
  font-size: 18px;
}

.demo-section {
  min-height: 200px;
}

.toggle-label {
  display: flex;
  align-items: center;
  gap: 10px;
  margin-bottom: 15px;
  cursor: pointer;
  font-weight: bold;
  color: #333;
}

.component-container {
  min-height: 150px;
  border: 2px dashed #ddd;
  border-radius: 6px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.preload-buttons {
  display: flex;
  gap: 10px;
  margin-bottom: 15px;
}

.preload-btn {
  padding: 10px 16px;
  background: #3498db;
  color: white;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  font-size: 14px;
  transition: background 0.3s;
}

.preload-btn:hover {
  background: #2980b9;
}

.preload-status {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.status-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 10px 12px;
  background: white;
  border-radius: 4px;
  border-left: 4px solid #bdc3c7;
}

.status-item.pending {
  border-left-color: #f39c12;
}

.status-item.loading {
  border-left-color: #3498db;
}

.status-item.loaded {
  border-left-color: #27ae60;
}

.status-item.error {
  border-left-color: #e74c3c;
}

.status-dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: #bdc3c7;
}

.status-item.pending .status-dot { background: #f39c12; }
.status-item.loading .status-dot { 
  background: #3498db;
  animation: pulse 1.5s infinite;
}
.status-item.loaded .status-dot { background: #27ae60; }
.status-item.error .status-dot { background: #e74c3c; }

@keyframes pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.5; }
}

.scroll-container {
  height: 300px;
  overflow-y: auto;
  border: 1px solid #e0e0e0;
  border-radius: 6px;
  padding: 10px;
}

.scroll-item {
  padding: 20px;
  margin: 10px 0;
  background: white;
  border-radius: 4px;
  border: 1px solid #f0f0f0;
  min-height: 80px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.scroll-item p {
  margin: 0;
  color: #666;
}
&lt;/style&gt;
</code></pre>
<hr/>
<h2 data-id="heading-13"><strong>äº”ã€ æ€§èƒ½ä¼˜åŒ–ä¸æœ€ä½³å®è·µ</strong></h2>
<h3 data-id="heading-14"><strong>5.1 Webpack æ‰“åŒ…ä¼˜åŒ–é…ç½®</strong></h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// vue.config.js</span>
<span class="hljs-keyword">const</span> { defineConfig } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'@vue/cli-service'</span>)
<span class="hljs-keyword">const</span> <span class="hljs-title class_">BundleAnalyzerPlugin</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">'webpack-bundle-analyzer'</span>).<span class="hljs-property">BundleAnalyzerPlugin</span>

<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = <span class="hljs-title function_">defineConfig</span>({
  <span class="hljs-attr">transpileDependencies</span>: <span class="hljs-literal">true</span>,
  
  <span class="hljs-attr">configureWebpack</span>: {
    <span class="hljs-attr">optimization</span>: {
      <span class="hljs-attr">splitChunks</span>: {
        <span class="hljs-attr">chunks</span>: <span class="hljs-string">'all'</span>,
        <span class="hljs-attr">cacheGroups</span>: {
          <span class="hljs-comment">// ç¬¬ä¸‰æ–¹åº“å•ç‹¬æ‰“åŒ…</span>
          <span class="hljs-attr">vendor</span>: {
            <span class="hljs-attr">test</span>: <span class="hljs-regexp">/[\\/]node_modules[\\/]/</span>,
            <span class="hljs-attr">name</span>: <span class="hljs-string">'vendors'</span>,
            <span class="hljs-attr">priority</span>: <span class="hljs-number">20</span>,
            <span class="hljs-attr">chunks</span>: <span class="hljs-string">'all'</span>
          },
          <span class="hljs-comment">// Vue ç›¸å…³åº“å•ç‹¬æ‰“åŒ…</span>
          <span class="hljs-attr">vue</span>: {
            <span class="hljs-attr">test</span>: <span class="hljs-regexp">/[\\/]node_modules[\\/](vue|vue-router|vuex)[\\/]/</span>,
            <span class="hljs-attr">name</span>: <span class="hljs-string">'vue-vendors'</span>,
            <span class="hljs-attr">priority</span>: <span class="hljs-number">30</span>,
            <span class="hljs-attr">chunks</span>: <span class="hljs-string">'all'</span>
          },
          <span class="hljs-comment">// å…¬å…±ä»£ç æå–</span>
          <span class="hljs-attr">common</span>: {
            <span class="hljs-attr">name</span>: <span class="hljs-string">'common'</span>,
            <span class="hljs-attr">minChunks</span>: <span class="hljs-number">2</span>,
            <span class="hljs-attr">priority</span>: <span class="hljs-number">10</span>,
            <span class="hljs-attr">chunks</span>: <span class="hljs-string">'all'</span>
          }
        }
      }
    },
    <span class="hljs-attr">plugins</span>: [
      <span class="hljs-comment">// æ‰“åŒ…åˆ†æå·¥å…·ï¼ˆå¼€å‘æ—¶ä½¿ç”¨ï¼‰</span>
      process.<span class="hljs-property">env</span>.<span class="hljs-property">NODE_ENV</span> === <span class="hljs-string">'development'</span> &amp;&amp; 
      <span class="hljs-keyword">new</span> <span class="hljs-title class_">BundleAnalyzerPlugin</span>({
        <span class="hljs-attr">analyzerMode</span>: <span class="hljs-string">'server'</span>,
        <span class="hljs-attr">openAnalyzer</span>: <span class="hljs-literal">false</span>
      })
    ].<span class="hljs-title function_">filter</span>(<span class="hljs-title class_">Boolean</span>)
  },
  
  <span class="hljs-attr">chainWebpack</span>: <span class="hljs-function"><span class="hljs-params">config</span> =&gt;</span> {
    <span class="hljs-comment">// é¢„åŠ è½½é…ç½®</span>
    config.<span class="hljs-title function_">plugin</span>(<span class="hljs-string">'preload'</span>).<span class="hljs-title function_">tap</span>(<span class="hljs-function"><span class="hljs-params">options</span> =&gt;</span> {
      options[<span class="hljs-number">0</span>] = {
        <span class="hljs-attr">rel</span>: <span class="hljs-string">'preload'</span>,
        <span class="hljs-title function_">as</span>(<span class="hljs-params">entry</span>) {
          <span class="hljs-keyword">if</span> (<span class="hljs-regexp">/\.css$/</span>.<span class="hljs-title function_">test</span>(entry)) <span class="hljs-keyword">return</span> <span class="hljs-string">'style'</span>
          <span class="hljs-keyword">if</span> (<span class="hljs-regexp">/\.(woff|woff2)$/</span>.<span class="hljs-title function_">test</span>(entry)) <span class="hljs-keyword">return</span> <span class="hljs-string">'font'</span>
          <span class="hljs-keyword">return</span> <span class="hljs-string">'script'</span>
        },
        <span class="hljs-attr">include</span>: <span class="hljs-string">'initial'</span>,
        <span class="hljs-attr">fileBlacklist</span>: [<span class="hljs-regexp">/\.map$/</span>, <span class="hljs-regexp">/hot-update\.js$/</span>]
      }
      <span class="hljs-keyword">return</span> options
    })
    
    <span class="hljs-comment">//  prefetch é…ç½®</span>
    config.<span class="hljs-title function_">plugin</span>(<span class="hljs-string">'prefetch'</span>).<span class="hljs-title function_">tap</span>(<span class="hljs-function"><span class="hljs-params">options</span> =&gt;</span> {
      options[<span class="hljs-number">0</span>] = {
        <span class="hljs-attr">rel</span>: <span class="hljs-string">'prefetch'</span>,
        <span class="hljs-attr">include</span>: <span class="hljs-string">'asyncChunks'</span>
      }
      <span class="hljs-keyword">return</span> options
    })
  }
})
</code></pre>
<h3 data-id="heading-15"><strong>5.2 æ€§èƒ½ç›‘æ§ä¸é”™è¯¯è¿½è¸ª</strong></h3>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;div class="performance-monitor"&gt;
    &lt;h2&gt;æ‡’åŠ è½½æ€§èƒ½ç›‘æ§&lt;/h2&gt;
    
    &lt;div class="metrics-dashboard"&gt;
      &lt;div class="metric-cards"&gt;
        &lt;div class="metric-card"&gt;
          &lt;div class="metric-value"&gt;{{ metrics.totalLoads }}&lt;/div&gt;
          &lt;div class="metric-label"&gt;æ€»åŠ è½½æ¬¡æ•°&lt;/div&gt;
        &lt;/div&gt;
        &lt;div class="metric-card"&gt;
          &lt;div class="metric-value"&gt;{{ metrics.averageLoadTime }}ms&lt;/div&gt;
          &lt;div class="metric-label"&gt;å¹³å‡åŠ è½½æ—¶é—´&lt;/div&gt;
        &lt;/div&gt;
        &lt;div class="metric-card"&gt;
          &lt;div class="metric-value"&gt;{{ metrics.successRate }}%&lt;/div&gt;
          &lt;div class="metric-label"&gt;æˆåŠŸç‡&lt;/div&gt;
        &lt;/div&gt;
        &lt;div class="metric-card"&gt;
          &lt;div class="metric-value"&gt;{{ metrics.cacheHits }}&lt;/div&gt;
          &lt;div class="metric-label"&gt;ç¼“å­˜å‘½ä¸­&lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;

      &lt;div class="load-timeline"&gt;
        &lt;h3&gt;ç»„ä»¶åŠ è½½æ—¶é—´çº¿&lt;/h3&gt;
        &lt;div class="timeline"&gt;
          &lt;div 
            v-for="event in loadEvents" 
            :key="event.id"
            class="timeline-event"
            :class="event.status"
          &gt;
            &lt;div class="event-time"&gt;{{ event.timestamp }}&lt;/div&gt;
            &lt;div class="event-name"&gt;{{ event.name }}&lt;/div&gt;
            &lt;div class="event-duration"&gt;{{ event.duration }}ms&lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup&gt;
import { ref, reactive, onMounted } from 'vue'

const metrics = reactive({
  totalLoads: 0,
  averageLoadTime: 0,
  successRate: 100,
  cacheHits: 0
})

const loadEvents = ref([])

// ç›‘æ§ç»„ä»¶åŠ è½½æ€§èƒ½
const monitorComponentLoad = (componentName) =&gt; {
  const startTime = performance.now()
  const eventId = Date.now()
  
  const loadEvent = {
    id: eventId,
    name: componentName,
    timestamp: new Date().toLocaleTimeString(),
    status: 'loading',
    duration: 0
  }
  
  loadEvents.value.unshift(loadEvent)
  if (loadEvents.value.length &gt; 10) {
    loadEvents.value.pop()
  }
  
  metrics.totalLoads++
  
  return {
    success: () =&gt; {
      const endTime = performance.now()
      const duration = endTime - startTime
      
      loadEvent.status = 'success'
      loadEvent.duration = Math.round(duration)
      
      // æ›´æ–°å¹³å‡åŠ è½½æ—¶é—´
      const totalTime = metrics.averageLoadTime * (metrics.totalLoads - 1) + duration
      metrics.averageLoadTime = Math.round(totalTime / metrics.totalLoads)
    },
    error: () =&gt; {
      const endTime = performance.now()
      const duration = endTime - startTime
      
      loadEvent.status = 'error'
      loadEvent.duration = Math.round(duration)
      
      // æ›´æ–°æˆåŠŸç‡
      const successCount = Math.floor(metrics.totalLoads * (metrics.successRate / 100))
      metrics.successRate = Math.round((successCount / metrics.totalLoads) * 100)
    },
    cacheHit: () =&gt; {
      metrics.cacheHits++
    }
  }
}

// ç¤ºä¾‹ï¼šç›‘æ§ç»„ä»¶åŠ è½½
const loadMonitoredComponent = async (componentName) =&gt; {
  const monitor = monitorComponentLoad(componentName)
  
  try {
    // æ¨¡æ‹Ÿç»„ä»¶åŠ è½½
    await new Promise(resolve =&gt; setTimeout(resolve, Math.random() * 1000 + 500))
    
    // æ£€æŸ¥æ˜¯å¦ç¼“å­˜å‘½ä¸­
    if (Math.random() &gt; 0.7) {
      monitor.cacheHit()
    }
    
    monitor.success()
    return true
  } catch (error) {
    monitor.error()
    return false
  }
}

// æ¨¡æ‹Ÿä¸€äº›åŠ è½½äº‹ä»¶
onMounted(async () =&gt; {
  const components = ['é¦–é¡µ', 'ç”¨æˆ·é¢æ¿', 'è®¾ç½®é¡µé¢', 'æ•°æ®åˆ†æ', 'æ–‡æ¡£æŸ¥çœ‹']
  
  for (const component of components) {
    await loadMonitoredComponent(component)
    await new Promise(resolve =&gt; setTimeout(resolve, 1000))
  }
})
&lt;/script&gt;

&lt;style scoped&gt;
.performance-monitor {
  padding: 20px;
  max-width: 1000px;
  margin: 0 auto;
}

.metrics-dashboard {
  margin: 30px 0;
}

.metric-cards {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 20px;
  margin-bottom: 30px;
}

.metric-card {
  padding: 25px;
  background: white;
  border-radius: 8px;
  box-shadow: 0 2px 10px rgba(0,0,0,0.1);
  text-align: center;
  border-top: 4px solid #42b883;
}

.metric-value {
  font-size: 32px;
  font-weight: bold;
  color: #2c3e50;
  margin-bottom: 8px;
}

.metric-label {
  color: #7f8c8d;
  font-size: 14px;
}

.load-timeline {
  background: white;
  border-radius: 8px;
  padding: 25px;
  box-shadow: 0 2px 10px rgba(0,0,0,0.1);
}

.load-timeline h3 {
  margin: 0 0 20px 0;
  color: #2c3e50;
}

.timeline {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.timeline-event {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 12px 15px;
  border-radius: 6px;
  border-left: 4px solid #bdc3c7;
  transition: all 0.3s;
}

.timeline-event.loading {
  border-left-color: #3498db;
  background: #ebf5fb;
}

.timeline-event.success {
  border-left-color: #27ae60;
  background: #eafaf1;
}

.timeline-event.error {
  border-left-color: #e74c3c;
  background: #fdedec;
}

.event-time {
  font-size: 12px;
  color: #7f8c8d;
  min-width: 80px;
}

.event-name {
  flex: 1;
  font-weight: 500;
  color: #2c3e50;
}

.event-duration {
  font-family: 'Courier New', monospace;
  font-weight: bold;
  color: #34495e;
  min-width: 60px;
  text-align: right;
}
&lt;/style&gt;
</code></pre>
<hr/>
<h2 data-id="heading-16"><strong>å…­ã€ å®é™…é¡¹ç›®ä¸­çš„åº”ç”¨åœºæ™¯</strong></h2>
<h3 data-id="heading-17"><strong>6.1 å¤§å‹ç®¡ç†ç³»ç»Ÿçš„æ‡’åŠ è½½ç­–ç•¥</strong></h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// src/utils/lazyLoading.js</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">createLazyComponent</span> = (<span class="hljs-params">loader, options = {}</span>) =&gt; {
  <span class="hljs-keyword">const</span> defaultOptions = {
    <span class="hljs-attr">loadingComponent</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'@/components/Loading/LoadingState.vue'</span>),
    <span class="hljs-attr">errorComponent</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'@/components/Error/ErrorState.vue'</span>),
    <span class="hljs-attr">delay</span>: <span class="hljs-number">200</span>,
    <span class="hljs-attr">timeout</span>: <span class="hljs-number">10000</span>,
    <span class="hljs-attr">retryAttempts</span>: <span class="hljs-number">3</span>
  }
  
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">defineAsyncComponent</span>({
    loader,
    ...defaultOptions,
    ...options
  })
}

<span class="hljs-comment">// ä¸šåŠ¡ç»„ä»¶æ‡’åŠ è½½</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">LazyUserManagement</span> = <span class="hljs-title function_">createLazyComponent</span>(
  <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'@/views/UserManagement.vue'</span>),
  { <span class="hljs-attr">timeout</span>: <span class="hljs-number">15000</span> }
)

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">LazyDataAnalytics</span> = <span class="hljs-title function_">createLazyComponent</span>(
  <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'@/views/DataAnalytics.vue'</span>)
)

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">LazyReportGenerator</span> = <span class="hljs-title function_">createLazyComponent</span>(
  <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'@/views/ReportGenerator.vue'</span>)
)

<span class="hljs-comment">// åŠŸèƒ½æ¨¡å—æ‡’åŠ è½½</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">LazyRichEditor</span> = <span class="hljs-title function_">createLazyComponent</span>(
  <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'@/components/Editors/RichEditor.vue'</span>)
)

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">LazyChartLibrary</span> = <span class="hljs-title function_">createLazyComponent</span>(
  <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'@/components/Charts/ChartLibrary.vue'</span>)
)

<span class="hljs-comment">// é¢„åŠ è½½ç­–ç•¥</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">preloadCriticalComponents</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">if</span> (<span class="hljs-string">'requestIdleCallback'</span> <span class="hljs-keyword">in</span> <span class="hljs-variable language_">window</span>) {
    <span class="hljs-title function_">requestIdleCallback</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-comment">// é¢„åŠ è½½å…³é”®ç»„ä»¶</span>
      <span class="hljs-keyword">import</span>(<span class="hljs-string">'@/views/Dashboard.vue'</span>)
      <span class="hljs-keyword">import</span>(<span class="hljs-string">'@/components/Common/SearchBox.vue'</span>)
    })
  }
}

<span class="hljs-comment">// è·¯ç”±çº§åˆ«çš„åˆ†ç»„æ‡’åŠ è½½</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">createRouteGroup</span> = (<span class="hljs-params">groupName</span>) =&gt; {
  <span class="hljs-keyword">return</span> {
    <span class="hljs-attr">user</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-comment">/* webpackChunkName: "user-group" */</span> <span class="hljs-string">`@/views/<span class="hljs-subst">${groupName}</span>/User.vue`</span>),
    <span class="hljs-attr">profile</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-comment">/* webpackChunkName: "user-group" */</span> <span class="hljs-string">`@/views/<span class="hljs-subst">${groupName}</span>/Profile.vue`</span>),
    <span class="hljs-attr">settings</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-comment">/* webpackChunkName: "user-group" */</span> <span class="hljs-string">`@/views/<span class="hljs-subst">${groupName}</span>/Settings.vue`</span>)
  }
}
</code></pre>
<h3 data-id="heading-18"><strong>6.2 åŸºäºç”¨æˆ·è¡Œä¸ºçš„æ™ºèƒ½é¢„åŠ è½½</strong></h3>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;div class="smart-preload-demo"&gt;
    &lt;h2&gt;æ™ºèƒ½é¢„åŠ è½½ç­–ç•¥&lt;/h2&gt;
    
    &lt;div class="user-journey"&gt;
      &lt;div class="journey-step" @mouseenter="preloadStep('products')"&gt;
        &lt;h3&gt;1. æµè§ˆäº§å“&lt;/h3&gt;
        &lt;p&gt;é¼ æ ‡æ‚¬åœé¢„åŠ è½½äº§å“è¯¦æƒ…&lt;/p&gt;
      &lt;/div&gt;
      
      &lt;div class="journey-step" @click="preloadStep('checkout')"&gt;
        &lt;h3&gt;2. åŠ å…¥è´­ç‰©è½¦&lt;/h3&gt;
        &lt;p&gt;ç‚¹å‡»é¢„åŠ è½½ç»“ç®—é¡µé¢&lt;/p&gt;
      &lt;/div&gt;
      
      &lt;div class="journey-step" @touchstart="preloadStep('payment')"&gt;
        &lt;h3&gt;3. ç»“ç®—æ”¯ä»˜&lt;/h3&gt;
        &lt;p&gt;è§¦æ‘¸é¢„åŠ è½½æ”¯ä»˜ç»„ä»¶&lt;/p&gt;
      &lt;/div&gt;
    &lt;/div&gt;

    &lt;div class="preload-strategies"&gt;
      &lt;h3&gt;é¢„åŠ è½½ç­–ç•¥çŠ¶æ€&lt;/h3&gt;
      &lt;div class="strategy-grid"&gt;
        &lt;div 
          v-for="strategy in strategies" 
          :key="strategy.name"
          class="strategy-item"
          :class="strategy.status"
        &gt;
          &lt;div class="strategy-icon"&gt;{{ strategy.icon }}&lt;/div&gt;
          &lt;div class="strategy-info"&gt;
            &lt;div class="strategy-name"&gt;{{ strategy.name }}&lt;/div&gt;
            &lt;div class="strategy-desc"&gt;{{ strategy.description }}&lt;/div&gt;
          &lt;/div&gt;
          &lt;div class="strategy-status"&gt;{{ strategy.status }}&lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup&gt;
import { ref, reactive, onMounted } from 'vue'

const strategies = reactive([
  {
    name: 'æ‚¬åœé¢„åŠ è½½',
    description: 'é¼ æ ‡æ‚¬åœæ—¶é¢„åŠ è½½ç›®æ ‡ç»„ä»¶',
    icon: 'ğŸ–±ï¸',
    status: 'ç­‰å¾…è§¦å‘',
    trigger: 'mouseenter'
  },
  {
    name: 'ç‚¹å‡»é¢„åŠ è½½',
    description: 'ç”¨æˆ·ç‚¹å‡»æ—¶é¢„åŠ è½½ä¸‹ä¸€é¡µé¢',
    icon: 'ğŸ‘†',
    status: 'ç­‰å¾…è§¦å‘',
    trigger: 'click'
  },
  {
    name: 'è§¦æ‘¸é¢„åŠ è½½',
    description: 'ç§»åŠ¨ç«¯è§¦æ‘¸æ—¶é¢„åŠ è½½',
    icon: 'ğŸ“±',
    status: 'ç­‰å¾…è§¦å‘',
    trigger: 'touchstart'
  },
  {
    name: 'ç©ºé—²é¢„åŠ è½½',
    description: 'æµè§ˆå™¨ç©ºé—²æ—¶é¢„åŠ è½½',
    icon: 'ğŸ’¤',
    status: 'ç­‰å¾…è§¦å‘',
    trigger: 'idle'
  }
])

const preloadedComponents = new Set()

const preloadStep = async (step) =&gt; {
  const strategy = strategies.find(s =&gt; s.trigger === step)
  if (strategy &amp;&amp; strategy.status === 'ç­‰å¾…è§¦å‘') {
    strategy.status = 'åŠ è½½ä¸­...'
    
    try {
      // æ¨¡æ‹Ÿç»„ä»¶é¢„åŠ è½½
      await new Promise(resolve =&gt; setTimeout(resolve, 1000))
      
      strategy.status = 'å·²åŠ è½½'
      preloadedComponents.add(step)
      console.log(`âœ… ${step} ç»„ä»¶é¢„åŠ è½½å®Œæˆ`)
    } catch (error) {
      strategy.status = 'åŠ è½½å¤±è´¥'
      console.error(`âŒ ${step} ç»„ä»¶é¢„åŠ è½½å¤±è´¥:`, error)
    }
  }
}

// ç©ºé—²æ—¶é¢„åŠ è½½
onMounted(() =&gt; {
  if ('requestIdleCallback' in window) {
    requestIdleCallback(() =&gt; {
      const idleStrategy = strategies.find(s =&gt; s.trigger === 'idle')
      if (idleStrategy) {
        idleStrategy.status = 'å·²åŠ è½½'
        preloadedComponents.add('common')
        console.log('ğŸ•’ ç©ºé—²æ—¶é¢„åŠ è½½å®Œæˆ')
      }
    })
  }
})
&lt;/script&gt;

&lt;style scoped&gt;
.smart-preload-demo {
  padding: 20px;
  max-width: 1000px;
  margin: 0 auto;
}

.user-journey {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 20px;
  margin: 30px 0;
}

.journey-step {
  padding: 30px;
  background: white;
  border: 2px solid #e0e0e0;
  border-radius: 8px;
  text-align: center;
  cursor: pointer;
  transition: all 0.3s;
}

.journey-step:hover {
  border-color: #42b883;
  transform: translateY(-2px);
  box-shadow: 0 4px 15px rgba(66, 184, 131, 0.2);
}

.journey-step h3 {
  margin: 0 0 10px 0;
  color: #2c3e50;
}

.journey-step p {
  margin: 0;
  color: #7f8c8d;
  font-size: 14px;
}

.preload-strategies {
  margin-top: 40px;
}

.preload-strategies h3 {
  margin: 0 0 20px 0;
  color: #2c3e50;
}

.strategy-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 15px;
}

.strategy-item {
  display: flex;
  align-items: center;
  gap: 15px;
  padding: 20px;
  background: white;
  border-radius: 8px;
  border-left: 4px solid #bdc3c7;
  transition: all 0.3s;
}

.strategy-item.ç­‰å¾…è§¦å‘ {
  border-left-color: #f39c12;
}

.strategy-item.åŠ è½½ä¸­ {
  border-left-color: #3498db;
}

.strategy-item.å·²åŠ è½½ {
  border-left-color: #27ae60;
}

.strategy-item.åŠ è½½å¤±è´¥ {
  border-left-color: #e74c3c;
}

.strategy-icon {
  font-size: 24px;
}

.strategy-info {
  flex: 1;
}

.strategy-name {
  font-weight: bold;
  color: #2c3e50;
  margin-bottom: 4px;
}

.strategy-desc {
  font-size: 12px;
  color: #7f8c8d;
}

.strategy-status {
  padding: 4px 8px;
  border-radius: 12px;
  font-size: 12px;
  font-weight: bold;
  text-transform: uppercase;
}

.strategy-item.ç­‰å¾…è§¦å‘ .strategy-status {
  background: #fff3cd;
  color: #856404;
}

.strategy-item.åŠ è½½ä¸­ .strategy-status {
  background: #d1ecf1;
  color: #0c5460;
}

.strategy-item.å·²åŠ è½½ .strategy-status {
  background: #d4edda;
  color: #155724;
}

.strategy-item.åŠ è½½å¤±è´¥ .strategy-status {
  background: #f8d7da;
  color: #721c24;
}
&lt;/style&gt;
</code></pre>
<hr/>
<h2 data-id="heading-19"><strong>ä¸ƒã€ æ€»ç»“</strong></h2>
<h3 data-id="heading-20"><strong>7.1 Vue3 ç»„ä»¶æ‡’åŠ è½½çš„æ ¸å¿ƒä»·å€¼</strong></h3>
<ol>
<li><strong>æ€§èƒ½ä¼˜åŒ–</strong>ï¼šæ˜¾è‘—å‡å°‘é¦–å±åŠ è½½æ—¶é—´ï¼Œæå‡ç”¨æˆ·ä½“éªŒ</li>
<li><strong>èµ„æºæ•ˆç‡</strong>ï¼šæŒ‰éœ€åŠ è½½ï¼Œé¿å…èµ„æºæµªè´¹</li>
<li><strong>ç¼“å­˜ä¼˜åŒ–</strong>ï¼šç‹¬ç«‹çš„ chunk å¯ä»¥æ›´å¥½åœ°åˆ©ç”¨æµè§ˆå™¨ç¼“å­˜</li>
<li><strong>ç”¨æˆ·ä½“éªŒ</strong>ï¼šåˆç†çš„åŠ è½½çŠ¶æ€å’Œé”™è¯¯å¤„ç†æå‡ç”¨æˆ·æ»¡æ„åº¦</li>
</ol>
<h3 data-id="heading-21"><strong>7.2 æ‡’åŠ è½½å®ç°æ–¹å¼æ€»ç»“</strong></h3>



































<table><thead><tr><th>æ–¹å¼</th><th>é€‚ç”¨åœºæ™¯</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th></tr></thead><tbody><tr><td><code>defineAsyncComponent</code></td><td>æ¡ä»¶æ¸²æŸ“ç»„ä»¶</td><td>é…ç½®çµæ´»ï¼Œé”™è¯¯å¤„ç†å®Œå–„</td><td>éœ€è¦æ‰‹åŠ¨ç®¡ç†åŠ è½½çŠ¶æ€</td></tr><tr><td>è·¯ç”±æ‡’åŠ è½½</td><td>é¡µé¢çº§ç»„ä»¶</td><td>å¤©ç„¶çš„ä¸šåŠ¡åˆ†å‰²ï¼Œå®ç°ç®€å•</td><td>é¡µé¢åˆ‡æ¢å¯èƒ½æœ‰å»¶è¿Ÿ</td></tr><tr><td>Suspense + å¼‚æ­¥ç»„ä»¶</td><td>éœ€è¦åŠ è½½çŠ¶æ€çš„åœºæ™¯</td><td>å£°æ˜å¼ï¼Œä»£ç ç®€æ´</td><td>éœ€è¦ Vue3 æ”¯æŒ</td></tr><tr><td>åŠ¨æ€ import()</td><td>æ¨¡å—çº§æ‡’åŠ è½½</td><td>æ ‡å‡†è¯­æ³•ï¼Œé€šç”¨æ€§å¼º</td><td>éœ€è¦é…åˆæ„å»ºå·¥å…·</td></tr></tbody></table>
<h3 data-id="heading-22"><strong>7.3 æ€§èƒ½ä¼˜åŒ–æœ€ä½³å®è·µ</strong></h3>
<ol>
<li><strong>åˆç†åˆ†å‰²ä»£ç </strong>ï¼šæŒ‰ç…§ä¸šåŠ¡æ¨¡å—å’ŒåŠŸèƒ½è¿›è¡Œä»£ç åˆ†å‰²</li>
<li><strong>é¢„åŠ è½½ç­–ç•¥</strong>ï¼šæ ¹æ®ç”¨æˆ·è¡Œä¸ºé¢„æµ‹å¹¶é¢„åŠ è½½å¯èƒ½éœ€è¦çš„ç»„ä»¶</li>
<li><strong>åŠ è½½çŠ¶æ€ç®¡ç†</strong>ï¼šæä¾›å‹å¥½çš„åŠ è½½åé¦ˆå’Œé”™è¯¯å¤„ç†</li>
<li><strong>ç¼“å­˜ç­–ç•¥</strong>ï¼šåˆ©ç”¨æµè§ˆå™¨ç¼“å­˜å’Œ Service Worker</li>
<li><strong>ç›‘æ§åˆ†æ</strong>ï¼šæŒç»­ç›‘æ§åŠ è½½æ€§èƒ½ï¼Œä¼˜åŒ–åˆ†å‰²ç­–ç•¥</li>
</ol>
<h3 data-id="heading-23"><strong>7.4 æ³¨æ„äº‹é¡¹</strong></h3>
<ul>
<li><strong>é¿å…è¿‡åº¦åˆ†å‰²</strong>ï¼šå¤ªå¤šçš„ chunk ä¼šå¢åŠ  HTTP è¯·æ±‚å¼€é”€</li>
<li><strong>é”™è¯¯å¤„ç†</strong>ï¼šå¿…é¡»å¤„ç†åŠ è½½å¤±è´¥çš„æƒ…å†µ</li>
<li><strong>æµ‹è¯•è¦†ç›–</strong>ï¼šç¡®ä¿æ‡’åŠ è½½ç»„ä»¶åœ¨å„ç§ç½‘ç»œæ¡ä»¶ä¸‹çš„è¡¨ç°</li>
<li><strong>SEO è€ƒè™‘</strong>ï¼šæœåŠ¡ç«¯æ¸²æŸ“æ—¶éœ€è¦è€ƒè™‘æ‡’åŠ è½½ç»„ä»¶çš„å¤„ç†</li>
</ul>
<p>Vue3 çš„ç»„ä»¶æ‡’åŠ è½½ä¸ºç°ä»£å‰ç«¯åº”ç”¨æä¾›äº†å¼ºå¤§çš„æ€§èƒ½ä¼˜åŒ–æ‰‹æ®µã€‚é€šè¿‡åˆç†è¿ç”¨å„ç§æ‡’åŠ è½½ç­–ç•¥ï¼Œå¯ä»¥æ˜¾è‘—æå‡åº”ç”¨æ€§èƒ½ï¼Œæ”¹å–„ç”¨æˆ·ä½“éªŒã€‚</p>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[React Router è·¯ç”±æ¨¡å¼è¯¦è§£ï¼šHashRouter vs BrowserRouter]]></title>    <link>https://juejin.cn/post/7593603345518198811</link>    <guid>https://juejin.cn/post/7593603345518198811</guid>    <pubDate>2026-01-11T03:38:38.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7593603345518198811" data-draft-id="7593602686135320602" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="React Router è·¯ç”±æ¨¡å¼è¯¦è§£ï¼šHashRouter vs BrowserRouter"/> <meta itemprop="keywords" content="React.js"/> <meta itemprop="datePublished" content="2026-01-11T03:38:38.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åŒ—è¾°alk"/> <meta itemprop="url" content="https://juejin.cn/user/1772855673241352"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            React Router è·¯ç”±æ¨¡å¼è¯¦è§£ï¼šHashRouter vs BrowserRouter
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1772855673241352/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åŒ—è¾°alk
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-11T03:38:38.000Z" title="Sun Jan 11 2026 03:38:38 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>åœ¨ç°ä»£å‰ç«¯å•é¡µé¢åº”ç”¨ï¼ˆSPAï¼‰å¼€å‘ä¸­ï¼Œè·¯ç”±ç®¡ç†æ˜¯è‡³å…³é‡è¦çš„ä¸€ç¯ã€‚React Router ä½œä¸º React ç”Ÿæ€ä¸­æœ€æµè¡Œçš„è·¯ç”±åº“ï¼Œæä¾›äº†ä¸¤ç§ä¸»è¦çš„è·¯ç”±æ¨¡å¼ï¼šHashRouter å’Œ BrowserRouterã€‚æœ¬æ–‡å°†æ·±å…¥æ¢è®¨è¿™ä¸¤ç§æ¨¡å¼çš„å®ç°åŸç†ã€ä½¿ç”¨åœºæ™¯å’Œå·®å¼‚ã€‚</p>
</blockquote>
<h2 data-id="heading-0">1. React Router ç®€ä»‹</h2>
<p>React Router æ˜¯ React å®˜æ–¹æ¨èçš„è·¯ç”±åº“ï¼Œå®ƒé€šè¿‡ç®¡ç† URL ä¸ç»„ä»¶ä¹‹é—´çš„æ˜ å°„å…³ç³»ï¼Œå®ç°äº†å•é¡µé¢åº”ç”¨çš„å¤šè§†å›¾åˆ‡æ¢åŠŸèƒ½ã€‚ç›®å‰ React Router å·²å‘å±•åˆ° v6 ç‰ˆæœ¬ï¼Œæä¾›äº†æ›´åŠ ç®€æ´å’Œå¼ºå¤§çš„ APIã€‚</p>
<h3 data-id="heading-1">1.1 å®‰è£… React Router</h3>
<pre><code class="hljs language-bash" lang="bash">npm install react-router-dom
</code></pre>
<h3 data-id="heading-2">1.2 åŸºæœ¬ä½¿ç”¨</h3>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">BrowserRouter</span>, <span class="hljs-title class_">Routes</span>, <span class="hljs-title class_">Route</span>, <span class="hljs-title class_">Link</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-router-dom'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Home</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./components/Home'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">About</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./components/About'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Contact</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./components/Contact'</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">BrowserRouter</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">nav</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">"/"</span>&gt;</span>é¦–é¡µ<span class="hljs-tag">&lt;/<span class="hljs-name">Link</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">"/about"</span>&gt;</span>å…³äº<span class="hljs-tag">&lt;/<span class="hljs-name">Link</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">"/contact"</span>&gt;</span>è”ç³»<span class="hljs-tag">&lt;/<span class="hljs-name">Link</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">nav</span>&gt;</span>
      
      <span class="hljs-tag">&lt;<span class="hljs-name">Routes</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">"/"</span> <span class="hljs-attr">element</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">Home</span> /&gt;</span>} /&gt;
        <span class="hljs-tag">&lt;<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">"/about"</span> <span class="hljs-attr">element</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">About</span> /&gt;</span>} /&gt;
        <span class="hljs-tag">&lt;<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">"/contact"</span> <span class="hljs-attr">element</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">Contact</span> /&gt;</span>} /&gt;
      <span class="hljs-tag">&lt;/<span class="hljs-name">Routes</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">BrowserRouter</span>&gt;</span></span>
  );
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">App</span>;
</code></pre>
<h2 data-id="heading-3">2. HashRouter æ¨¡å¼</h2>
<h3 data-id="heading-4">2.1 ä»€ä¹ˆæ˜¯ HashRouter</h3>
<p>HashRouter ä½¿ç”¨ URL çš„ hash éƒ¨åˆ†ï¼ˆå³ <code>#</code> å·åé¢çš„å†…å®¹ï¼‰æ¥ç®¡ç†è·¯ç”±ã€‚è¿™ç§æ¨¡å¼å…¼å®¹æ€§æœ€å¥½ï¼Œå¯ä»¥åœ¨æ‰€æœ‰æµè§ˆå™¨ä¸­è¿è¡Œï¼Œå¹¶ä¸”ä¸éœ€è¦æœåŠ¡å™¨ç«¯é…ç½®ã€‚</p>
<p><strong>ç¤ºä¾‹ URLï¼š</strong></p>
<pre><code class="hljs language-bash" lang="bash">http://example.com/<span class="hljs-comment">#/home</span>
http://example.com/<span class="hljs-comment">#/about</span>
http://example.com/<span class="hljs-comment">#/users/123</span>
</code></pre>
<h3 data-id="heading-5">2.2 HashRouter å®ç°åŸç†</h3>
<h4 data-id="heading-6">2.2.1 æ ¸å¿ƒæœºåˆ¶</h4>
<p>HashRouter çš„æ ¸å¿ƒåŸç†æ˜¯åˆ©ç”¨ <code>window.location.hash</code> å±æ€§å’Œ <code>hashchange</code> äº‹ä»¶ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">SimpleHashRouter</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">routes</span> = {};
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">currentUrl</span> = <span class="hljs-string">''</span>;
    
    <span class="hljs-comment">// ç›‘å¬ hashchange äº‹ä»¶</span>
    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'hashchange'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">refresh</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>), <span class="hljs-literal">false</span>);
    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'load'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">refresh</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>), <span class="hljs-literal">false</span>);
  }
  
  <span class="hljs-comment">// æ³¨å†Œè·¯ç”±</span>
  <span class="hljs-title function_">route</span>(<span class="hljs-params">path, callback</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">routes</span>[path] = callback || <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {};
  }
  
  <span class="hljs-comment">// è·¯ç”±åˆ·æ–°</span>
  <span class="hljs-title function_">refresh</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">currentUrl</span> = <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">hash</span>.<span class="hljs-title function_">slice</span>(<span class="hljs-number">1</span>) || <span class="hljs-string">'/'</span>;
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">routes</span>[<span class="hljs-variable language_">this</span>.<span class="hljs-property">currentUrl</span>]) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">routes</span>[<span class="hljs-variable language_">this</span>.<span class="hljs-property">currentUrl</span>]();
    }
  }
  
  <span class="hljs-comment">// å¯¼èˆªåˆ°æ–°è·¯ç”±</span>
  <span class="hljs-title function_">navigate</span>(<span class="hljs-params">path</span>) {
    <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">hash</span> = <span class="hljs-string">'#'</span> + path;
  }
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">const</span> router = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SimpleHashRouter</span>();

router.<span class="hljs-title function_">route</span>(<span class="hljs-string">'/'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'content'</span>).<span class="hljs-property">innerHTML</span> = <span class="hljs-string">'&lt;h1&gt;é¦–é¡µ&lt;/h1&gt;'</span>;
});

router.<span class="hljs-title function_">route</span>(<span class="hljs-string">'/about'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'content'</span>).<span class="hljs-property">innerHTML</span> = <span class="hljs-string">'&lt;h1&gt;å…³äºæˆ‘ä»¬&lt;/h1&gt;'</span>;
});
</code></pre>
<h4 data-id="heading-7">2.2.2 React Router ä¸­çš„ HashRouter å®ç°</h4>
<p>React Router çš„ HashRouter ç»„ä»¶å†…éƒ¨å®ç°æ›´åŠ å¤æ‚ï¼Œä½†åŸºæœ¬åŸç†ç›¸åŒï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, { useState, useEffect } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Router</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-router-dom'</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">HashRouter</span>(<span class="hljs-params">{ children }</span>) {
  <span class="hljs-keyword">const</span> [location, setLocation] = <span class="hljs-title function_">useState</span>({
    <span class="hljs-attr">pathname</span>: <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">hash</span>.<span class="hljs-title function_">slice</span>(<span class="hljs-number">1</span>) || <span class="hljs-string">'/'</span>,
    <span class="hljs-attr">search</span>: <span class="hljs-string">''</span>,
    <span class="hljs-attr">hash</span>: <span class="hljs-string">''</span>,
    <span class="hljs-attr">state</span>: <span class="hljs-literal">null</span>
  });

  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleHashChange</span> = (<span class="hljs-params"/>) =&gt; {
      <span class="hljs-title function_">setLocation</span>(<span class="hljs-function"><span class="hljs-params">prev</span> =&gt;</span> ({
        ...prev,
        <span class="hljs-attr">pathname</span>: <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">hash</span>.<span class="hljs-title function_">slice</span>(<span class="hljs-number">1</span>) || <span class="hljs-string">'/'</span>
      }));
    };

    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'hashchange'</span>, handleHashChange);
    
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'hashchange'</span>, handleHashChange);
    };
  }, []);

  <span class="hljs-keyword">const</span> history = {
    <span class="hljs-attr">push</span>: <span class="hljs-function">(<span class="hljs-params">path</span>) =&gt;</span> {
      <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">hash</span> = <span class="hljs-string">'#'</span> + path;
    },
    <span class="hljs-attr">replace</span>: <span class="hljs-function">(<span class="hljs-params">path</span>) =&gt;</span> {
      <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-title function_">replace</span>(<span class="hljs-string">'#'</span> + path);
    },
    <span class="hljs-attr">go</span>: <span class="hljs-function">(<span class="hljs-params">n</span>) =&gt;</span> {
      <span class="hljs-variable language_">window</span>.<span class="hljs-property">history</span>.<span class="hljs-title function_">go</span>(n);
    },
    <span class="hljs-attr">goBack</span>: <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">window</span>.<span class="hljs-property">history</span>.<span class="hljs-title function_">back</span>();
    },
    <span class="hljs-attr">goForward</span>: <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">window</span>.<span class="hljs-property">history</span>.<span class="hljs-title function_">forward</span>();
    },
    location
  };

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Router</span> <span class="hljs-attr">history</span>=<span class="hljs-string">{history}</span> <span class="hljs-attr">location</span>=<span class="hljs-string">{location}</span>&gt;</span>
      {children}
    <span class="hljs-tag">&lt;/<span class="hljs-name">Router</span>&gt;</span></span>
  );
}
</code></pre>
<h3 data-id="heading-8">2.3 HashRouter ä½¿ç”¨ç¤ºä¾‹</h3>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">HashRouter</span>, <span class="hljs-title class_">Routes</span>, <span class="hljs-title class_">Route</span>, <span class="hljs-title class_">Link</span>, useNavigate } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-router-dom'</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">Home</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> navigate = <span class="hljs-title function_">useNavigate</span>();
  
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>é¦–é¡µ<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> navigate('/about')}&gt;è·³è½¬åˆ°å…³äºé¡µé¢<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">About</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>å…³äºæˆ‘ä»¬<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span>;
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">User</span>(<span class="hljs-params">{ id }</span>) {
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>ç”¨æˆ·è¯¦æƒ… - ID: {id}<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span>;
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">HashRouter</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">nav</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">"/"</span>&gt;</span>é¦–é¡µ<span class="hljs-tag">&lt;/<span class="hljs-name">Link</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">"/about"</span>&gt;</span>å…³äº<span class="hljs-tag">&lt;/<span class="hljs-name">Link</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">"/user/123"</span>&gt;</span>ç”¨æˆ·123<span class="hljs-tag">&lt;/<span class="hljs-name">Link</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">nav</span>&gt;</span>
      
      <span class="hljs-tag">&lt;<span class="hljs-name">Routes</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">"/"</span> <span class="hljs-attr">element</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">Home</span> /&gt;</span>} /&gt;
        <span class="hljs-tag">&lt;<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">"/about"</span> <span class="hljs-attr">element</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">About</span> /&gt;</span>} /&gt;
        <span class="hljs-tag">&lt;<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">"/user/:id"</span> <span class="hljs-attr">element</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">User</span> /&gt;</span>} /&gt;
      <span class="hljs-tag">&lt;/<span class="hljs-name">Routes</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">HashRouter</span>&gt;</span></span>
  );
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">App</span>;
</code></pre>
<h3 data-id="heading-9">2.4 HashRouter æµç¨‹å›¾</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TD
    A[ç”¨æˆ·ç‚¹å‡»é“¾æ¥æˆ–è°ƒç”¨ navigate] --&gt; B[æ›´æ–° window.location.hash]
    B --&gt; C[è§¦å‘ hashchange äº‹ä»¶]
    C --&gt; D[React Router ç›‘å¬å™¨æ•è·äº‹ä»¶]
    D --&gt; E[æ›´æ–° Router å†…éƒ¨çŠ¶æ€]
    E --&gt; F[é‡æ–°æ¸²æŸ“åŒ¹é…çš„ç»„ä»¶]
    F --&gt; G[é¡µé¢å†…å®¹æ›´æ–°]
</code></pre>
<h2 data-id="heading-10">3. BrowserRouter æ¨¡å¼</h2>
<h3 data-id="heading-11">3.1 ä»€ä¹ˆæ˜¯ BrowserRouter</h3>
<p>BrowserRouter ä½¿ç”¨ HTML5 History API æ¥ç®¡ç†è·¯ç”±ï¼Œåˆ›å»ºçš„æ˜¯çœŸå®çš„ URL è·¯å¾„ï¼Œä¸åŒ…å« <code>#</code> ç¬¦å·ã€‚è¿™ç§æ¨¡å¼åˆ›å»ºçš„ URL æ›´åŠ ç¾è§‚ï¼Œæ›´ç¬¦åˆç”¨æˆ·ä¹ æƒ¯ã€‚</p>
<p><strong>ç¤ºä¾‹ URLï¼š</strong></p>
<pre><code class="hljs language-arduino" lang="arduino">http:<span class="hljs-comment">//example.com/home</span>
http:<span class="hljs-comment">//example.com/about</span>
http:<span class="hljs-comment">//example.com/users/123</span>
</code></pre>
<h3 data-id="heading-12">3.2 BrowserRouter å®ç°åŸç†</h3>
<h4 data-id="heading-13">3.2.1 History API æ ¸å¿ƒæ–¹æ³•</h4>
<p>BrowserRouter ä¾èµ–äº HTML5 History APIï¼Œä¸»è¦æ–¹æ³•åŒ…æ‹¬ï¼š</p>
<ul>
<li><code>history.pushState()</code>: æ·»åŠ æ–°çš„å†å²è®°å½•</li>
<li><code>history.replaceState()</code>: æ›¿æ¢å½“å‰å†å²è®°å½•</li>
<li><code>popstate</code> äº‹ä»¶: å½“ç”¨æˆ·å¯¼èˆªå†å²è®°å½•æ—¶è§¦å‘</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">SimpleBrowserRouter</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">routes</span> = {};
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">currentUrl</span> = <span class="hljs-string">''</span>;
    
    <span class="hljs-comment">// ç›‘å¬ popstate äº‹ä»¶</span>
    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'popstate'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">refresh</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>), <span class="hljs-literal">false</span>);
    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'load'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">refresh</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>), <span class="hljs-literal">false</span>);
  }
  
  <span class="hljs-comment">// æ³¨å†Œè·¯ç”±</span>
  <span class="hljs-title function_">route</span>(<span class="hljs-params">path, callback</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">routes</span>[path] = callback || <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {};
  }
  
  <span class="hljs-comment">// è·¯ç”±åˆ·æ–°</span>
  <span class="hljs-title function_">refresh</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">currentUrl</span> = <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">pathname</span> || <span class="hljs-string">'/'</span>;
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">routes</span>[<span class="hljs-variable language_">this</span>.<span class="hljs-property">currentUrl</span>]) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">routes</span>[<span class="hljs-variable language_">this</span>.<span class="hljs-property">currentUrl</span>]();
    }
  }
  
  <span class="hljs-comment">// å¯¼èˆªåˆ°æ–°è·¯ç”±</span>
  <span class="hljs-title function_">push</span>(<span class="hljs-params">path</span>) {
    <span class="hljs-variable language_">window</span>.<span class="hljs-property">history</span>.<span class="hljs-title function_">pushState</span>(<span class="hljs-literal">null</span>, <span class="hljs-literal">null</span>, path);
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">refresh</span>();
  }
  
  <span class="hljs-title function_">replace</span>(<span class="hljs-params">path</span>) {
    <span class="hljs-variable language_">window</span>.<span class="hljs-property">history</span>.<span class="hljs-title function_">replaceState</span>(<span class="hljs-literal">null</span>, <span class="hljs-literal">null</span>, path);
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">refresh</span>();
  }
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">const</span> router = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SimpleBrowserRouter</span>();

router.<span class="hljs-title function_">route</span>(<span class="hljs-string">'/'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'content'</span>).<span class="hljs-property">innerHTML</span> = <span class="hljs-string">'&lt;h1&gt;é¦–é¡µ&lt;/h1&gt;'</span>;
});

router.<span class="hljs-title function_">route</span>(<span class="hljs-string">'/about'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'content'</span>).<span class="hljs-property">innerHTML</span> = <span class="hljs-string">'&lt;h1&gt;å…³äºæˆ‘ä»¬&lt;/h1&gt;'</span>;
});
</code></pre>
<h4 data-id="heading-14">3.2.2 React Router ä¸­çš„ BrowserRouter å®ç°</h4>
<p>React Router çš„ BrowserRouter ç»„ä»¶å®ç°ï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, { useState, useEffect } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Router</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-router-dom'</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">BrowserRouter</span>(<span class="hljs-params">{ children }</span>) {
  <span class="hljs-keyword">const</span> [location, setLocation] = <span class="hljs-title function_">useState</span>({
    <span class="hljs-attr">pathname</span>: <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">pathname</span>,
    <span class="hljs-attr">search</span>: <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">search</span>,
    <span class="hljs-attr">hash</span>: <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">hash</span>,
    <span class="hljs-attr">state</span>: <span class="hljs-literal">null</span>
  });

  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">handlePopState</span> = (<span class="hljs-params"/>) =&gt; {
      <span class="hljs-title function_">setLocation</span>({
        <span class="hljs-attr">pathname</span>: <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">pathname</span>,
        <span class="hljs-attr">search</span>: <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">search</span>,
        <span class="hljs-attr">hash</span>: <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">hash</span>,
        <span class="hljs-attr">state</span>: <span class="hljs-variable language_">window</span>.<span class="hljs-property">history</span>.<span class="hljs-property">state</span>
      });
    };

    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'popstate'</span>, handlePopState);
    
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'popstate'</span>, handlePopState);
    };
  }, []);

  <span class="hljs-keyword">const</span> history = {
    <span class="hljs-attr">push</span>: <span class="hljs-function">(<span class="hljs-params">path, state</span>) =&gt;</span> {
      <span class="hljs-variable language_">window</span>.<span class="hljs-property">history</span>.<span class="hljs-title function_">pushState</span>(state, <span class="hljs-string">''</span>, path);
      <span class="hljs-title function_">setLocation</span>({
        <span class="hljs-attr">pathname</span>: <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">pathname</span>,
        <span class="hljs-attr">search</span>: <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">search</span>,
        <span class="hljs-attr">hash</span>: <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">hash</span>,
        state
      });
    },
    <span class="hljs-attr">replace</span>: <span class="hljs-function">(<span class="hljs-params">path, state</span>) =&gt;</span> {
      <span class="hljs-variable language_">window</span>.<span class="hljs-property">history</span>.<span class="hljs-title function_">replaceState</span>(state, <span class="hljs-string">''</span>, path);
      <span class="hljs-title function_">setLocation</span>({
        <span class="hljs-attr">pathname</span>: <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">pathname</span>,
        <span class="hljs-attr">search</span>: <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">search</span>,
        <span class="hljs-attr">hash</span>: <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">hash</span>,
        state
      });
    },
    <span class="hljs-attr">go</span>: <span class="hljs-function">(<span class="hljs-params">n</span>) =&gt;</span> {
      <span class="hljs-variable language_">window</span>.<span class="hljs-property">history</span>.<span class="hljs-title function_">go</span>(n);
    },
    <span class="hljs-attr">goBack</span>: <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">window</span>.<span class="hljs-property">history</span>.<span class="hljs-title function_">back</span>();
    },
    <span class="hljs-attr">goForward</span>: <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">window</span>.<span class="hljs-property">history</span>.<span class="hljs-title function_">forward</span>();
    },
    location
  };

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Router</span> <span class="hljs-attr">history</span>=<span class="hljs-string">{history}</span> <span class="hljs-attr">location</span>=<span class="hljs-string">{location}</span>&gt;</span>
      {children}
    <span class="hljs-tag">&lt;/<span class="hljs-name">Router</span>&gt;</span></span>
  );
}
</code></pre>
<h3 data-id="heading-15">3.3 BrowserRouter ä½¿ç”¨ç¤ºä¾‹</h3>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">BrowserRouter</span>, <span class="hljs-title class_">Routes</span>, <span class="hljs-title class_">Route</span>, <span class="hljs-title class_">Link</span>, useParams } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-router-dom'</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">Home</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>é¦–é¡µ<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span>;
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">About</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>å…³äºæˆ‘ä»¬<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span>;
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">User</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> { id } = <span class="hljs-title function_">useParams</span>();
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>ç”¨æˆ·è¯¦æƒ… - ID: {id}<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span>;
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">NotFound</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>404 - é¡µé¢æœªæ‰¾åˆ°<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span>;
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">BrowserRouter</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">nav</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">"/"</span>&gt;</span>é¦–é¡µ<span class="hljs-tag">&lt;/<span class="hljs-name">Link</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">"/about"</span>&gt;</span>å…³äº<span class="hljs-tag">&lt;/<span class="hljs-name">Link</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">"/user/123"</span>&gt;</span>ç”¨æˆ·123<span class="hljs-tag">&lt;/<span class="hljs-name">Link</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">nav</span>&gt;</span>
      
      <span class="hljs-tag">&lt;<span class="hljs-name">Routes</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">"/"</span> <span class="hljs-attr">element</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">Home</span> /&gt;</span>} /&gt;
        <span class="hljs-tag">&lt;<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">"/about"</span> <span class="hljs-attr">element</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">About</span> /&gt;</span>} /&gt;
        <span class="hljs-tag">&lt;<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">"/user/:id"</span> <span class="hljs-attr">element</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">User</span> /&gt;</span>} /&gt;
        <span class="hljs-tag">&lt;<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">"*"</span> <span class="hljs-attr">element</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">NotFound</span> /&gt;</span>} /&gt;
      <span class="hljs-tag">&lt;/<span class="hljs-name">Routes</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">BrowserRouter</span>&gt;</span></span>
  );
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">App</span>;
</code></pre>
<h3 data-id="heading-16">3.4 BrowserRouter æµç¨‹å›¾</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TD
    A[ç”¨æˆ·ç‚¹å‡»é“¾æ¥æˆ–è°ƒç”¨ navigate] --&gt; B[è°ƒç”¨ history.pushState]
    B --&gt; C[æ›´æ–° URL ä½†ä¸åˆ·æ–°é¡µé¢]
    C --&gt; D[React Router æ›´æ–°å†…éƒ¨çŠ¶æ€]
    D --&gt; E[é‡æ–°æ¸²æŸ“åŒ¹é…çš„ç»„ä»¶]
    E --&gt; F[é¡µé¢å†…å®¹æ›´æ–°]
    
    G[ç”¨æˆ·ç‚¹å‡»æµè§ˆå™¨å‰è¿›/åé€€] --&gt; H[è§¦å‘ popstate äº‹ä»¶]
    H --&gt; I[React Router ç›‘å¬å™¨æ•è·äº‹ä»¶]
    I --&gt; J[æ›´æ–° Router å†…éƒ¨çŠ¶æ€]
    J --&gt; K[é‡æ–°æ¸²æŸ“åŒ¹é…çš„ç»„ä»¶]
    K --&gt; L[é¡µé¢å†…å®¹æ›´æ–°]
</code></pre>
<h2 data-id="heading-17">4. ä¸¤ç§æ¨¡å¼çš„å¯¹æ¯”</h2>
<h3 data-id="heading-18">4.1 åŠŸèƒ½ç‰¹æ€§å¯¹æ¯”</h3>



































<table><thead><tr><th>ç‰¹æ€§</th><th>HashRouter</th><th>BrowserRouter</th></tr></thead><tbody><tr><td>URL ç¾è§‚åº¦</td><td>è¾ƒå·®ï¼ˆåŒ…å« #ï¼‰</td><td>è¾ƒå¥½ï¼ˆçº¯è·¯å¾„ï¼‰</td></tr><tr><td>å…¼å®¹æ€§</td><td>æ‰€æœ‰æµè§ˆå™¨</td><td>IE10+</td></tr><tr><td>æœåŠ¡å™¨é…ç½®</td><td>ä¸éœ€è¦</td><td>éœ€è¦é…ç½®æ”¯æŒ</td></tr><tr><td>SEO å‹å¥½æ€§</td><td>è¾ƒå·®</td><td>è¾ƒå¥½</td></tr><tr><td>å®ç°åŸç†</td><td>hashchange äº‹ä»¶</td><td>History API</td></tr></tbody></table>
<h3 data-id="heading-19">4.2 æœåŠ¡å™¨é…ç½®è¦æ±‚</h3>
<h4 data-id="heading-20">HashRouter æœåŠ¡å™¨é…ç½®</h4>
<p>HashRouter ä¸éœ€è¦ç‰¹æ®ŠæœåŠ¡å™¨é…ç½®ï¼Œå› ä¸º <code>#</code> åé¢çš„å†…å®¹ä¸ä¼šå‘é€åˆ°æœåŠ¡å™¨ã€‚</p>
<h4 data-id="heading-21">BrowserRouter æœåŠ¡å™¨é…ç½®</h4>
<p>BrowserRouter éœ€è¦æœåŠ¡å™¨é…ç½®ï¼Œç¡®ä¿æ‰€æœ‰è·¯ç”±éƒ½è¿”å› index.htmlï¼š</p>
<p><strong>Express æœåŠ¡å™¨é…ç½®ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> express = <span class="hljs-built_in">require</span>(<span class="hljs-string">'express'</span>);
<span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">'path'</span>);
<span class="hljs-keyword">const</span> app = <span class="hljs-title function_">express</span>();

<span class="hljs-comment">// é™æ€æ–‡ä»¶æœåŠ¡</span>
app.<span class="hljs-title function_">use</span>(express.<span class="hljs-title function_">static</span>(path.<span class="hljs-title function_">join</span>(__dirname, <span class="hljs-string">'build'</span>)));

<span class="hljs-comment">// æ‰€æœ‰è·¯ç”±éƒ½è¿”å› index.html</span>
app.<span class="hljs-title function_">get</span>(<span class="hljs-string">'*'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">req, res</span>) {
  res.<span class="hljs-title function_">sendFile</span>(path.<span class="hljs-title function_">join</span>(__dirname, <span class="hljs-string">'build'</span>, <span class="hljs-string">'index.html'</span>));
});

app.<span class="hljs-title function_">listen</span>(<span class="hljs-number">9000</span>);
</code></pre>
<p><strong>Nginx æœåŠ¡å™¨é…ç½®ï¼š</strong></p>
<pre><code class="hljs language-nginx" lang="nginx">server {
  listen 80;
  server_name example.com;
  root /usr/share/nginx/html;
  index index.html;
  
  location / {
    try_files $uri $uri/ /index.html;
  }
}
</code></pre>
<h3 data-id="heading-22">4.3 é€‰æ‹©å»ºè®®</h3>
<ul>
<li>
<p><strong>ä½¿ç”¨ HashRouter çš„æƒ…å†µ</strong>ï¼š</p>
<ul>
<li>é™æ€ç½‘ç«™æ‰˜ç®¡ï¼ˆå¦‚ GitHub Pagesï¼‰</li>
<li>ä¸æ”¯æŒ History API çš„æ—§æµè§ˆå™¨</li>
<li>æ²¡æœ‰æœåŠ¡å™¨é…ç½®æƒé™</li>
<li>å¿«é€ŸåŸå‹å¼€å‘</li>
</ul>
</li>
<li>
<p><strong>ä½¿ç”¨ BrowserRouter çš„æƒ…å†µ</strong>ï¼š</p>
<ul>
<li>æœ‰è‡ªå·±çš„æœåŠ¡å™¨å¹¶å¯ä»¥é…ç½®</li>
<li>éœ€è¦ SEO å‹å¥½çš„ URL</li>
<li>ç°ä»£æµè§ˆå™¨ç¯å¢ƒ</li>
<li>ç”Ÿäº§ç¯å¢ƒåº”ç”¨</li>
</ul>
</li>
</ul>
<h2 data-id="heading-23">5. å®é™…åº”ç”¨ç¤ºä¾‹</h2>
<h3 data-id="heading-24">5.1 åŠ¨æ€è·¯ç”±åº”ç”¨</h3>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, { useState, useEffect } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">BrowserRouter</span>, <span class="hljs-title class_">Routes</span>, <span class="hljs-title class_">Route</span>, <span class="hljs-title class_">Link</span>, useParams } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-router-dom'</span>;

<span class="hljs-comment">// æ¨¡æ‹Ÿæ•°æ®è·å–</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">fetchUser</span> = (<span class="hljs-params">id</span>) =&gt; {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> {
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-title function_">resolve</span>({
        id,
        <span class="hljs-attr">name</span>: <span class="hljs-string">`ç”¨æˆ· <span class="hljs-subst">${id}</span>`</span>,
        <span class="hljs-attr">email</span>: <span class="hljs-string">`user<span class="hljs-subst">${id}</span>@example.com`</span>
      });
    }, <span class="hljs-number">500</span>);
  });
};

<span class="hljs-keyword">function</span> <span class="hljs-title function_">UserList</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> users = [
    { <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'å¼ ä¸‰'</span> },
    { <span class="hljs-attr">id</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'æå››'</span> },
    { <span class="hljs-attr">id</span>: <span class="hljs-number">3</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'ç‹äº”'</span> }
  ];
  
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>ç”¨æˆ·åˆ—è¡¨<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>
        {users.map(user =&gt; (
          <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{user.id}</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">Link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">{</span>`/<span class="hljs-attr">user</span>/${<span class="hljs-attr">user.id</span>}`}&gt;</span>{user.name}<span class="hljs-tag">&lt;/<span class="hljs-name">Link</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
        ))}
      <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">UserDetail</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> { id } = <span class="hljs-title function_">useParams</span>();
  <span class="hljs-keyword">const</span> [user, setUser] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">null</span>);
  <span class="hljs-keyword">const</span> [loading, setLoading] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">true</span>);
  
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">loadUser</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
      <span class="hljs-title function_">setLoading</span>(<span class="hljs-literal">true</span>);
      <span class="hljs-keyword">const</span> userData = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchUser</span>(id);
      <span class="hljs-title function_">setUser</span>(userData);
      <span class="hljs-title function_">setLoading</span>(<span class="hljs-literal">false</span>);
    };
    
    <span class="hljs-title function_">loadUser</span>();
  }, [id]);
  
  <span class="hljs-keyword">if</span> (loading) <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>åŠ è½½ä¸­...<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
  <span class="hljs-keyword">if</span> (!user) <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>ç”¨æˆ·ä¸å­˜åœ¨<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
  
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>ç”¨æˆ·è¯¦æƒ…<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>ID:<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span> {user.id}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>å§“å:<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span> {user.name}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>é‚®ç®±:<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span> {user.email}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">BrowserRouter</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">nav</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">padding:</span> '<span class="hljs-attr">10px</span>', <span class="hljs-attr">borderBottom:</span> '<span class="hljs-attr">1px</span> <span class="hljs-attr">solid</span> #<span class="hljs-attr">ccc</span>' }}&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">"/"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">marginRight:</span> '<span class="hljs-attr">10px</span>' }}&gt;</span>é¦–é¡µ<span class="hljs-tag">&lt;/<span class="hljs-name">Link</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">"/users"</span>&gt;</span>ç”¨æˆ·åˆ—è¡¨<span class="hljs-tag">&lt;/<span class="hljs-name">Link</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">nav</span>&gt;</span>
      
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">padding:</span> '<span class="hljs-attr">20px</span>' }}&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Routes</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">"/"</span> <span class="hljs-attr">element</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">h1</span>&gt;</span>æ¬¢è¿æ¥åˆ°ç”¨æˆ·ç®¡ç†ç³»ç»Ÿ<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>} /&gt;
          <span class="hljs-tag">&lt;<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">"/users"</span> <span class="hljs-attr">element</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">UserList</span> /&gt;</span>} /&gt;
          <span class="hljs-tag">&lt;<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">"/user/:id"</span> <span class="hljs-attr">element</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">UserDetail</span> /&gt;</span>} /&gt;
        <span class="hljs-tag">&lt;/<span class="hljs-name">Routes</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">BrowserRouter</span>&gt;</span></span>
  );
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">App</span>;
</code></pre>
<h3 data-id="heading-25">5.2 è·¯ç”±å®ˆå«ç¤ºä¾‹</h3>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, { useState, useEffect } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">BrowserRouter</span>, <span class="hljs-title class_">Routes</span>, <span class="hljs-title class_">Route</span>, <span class="hljs-title class_">Navigate</span>, useLocation } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-router-dom'</span>;

<span class="hljs-comment">// æ¨¡æ‹Ÿè®¤è¯çŠ¶æ€</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">useAuth</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> [isAuthenticated, setIsAuthenticated] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);
  
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">login</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-title function_">setIsAuthenticated</span>(<span class="hljs-literal">true</span>);
    <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">'isAuthenticated'</span>, <span class="hljs-string">'true'</span>);
  };
  
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">logout</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-title function_">setIsAuthenticated</span>(<span class="hljs-literal">false</span>);
    <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">removeItem</span>(<span class="hljs-string">'isAuthenticated'</span>);
  };
  
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> authStatus = <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">'isAuthenticated'</span>);
    <span class="hljs-keyword">if</span> (authStatus === <span class="hljs-string">'true'</span>) {
      <span class="hljs-title function_">setIsAuthenticated</span>(<span class="hljs-literal">true</span>);
    }
  }, []);
  
  <span class="hljs-keyword">return</span> { isAuthenticated, login, logout };
};

<span class="hljs-comment">// è·¯ç”±å®ˆå«ç»„ä»¶</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">ProtectedRoute</span>(<span class="hljs-params">{ children }</span>) {
  <span class="hljs-keyword">const</span> { isAuthenticated } = <span class="hljs-title function_">useAuth</span>();
  <span class="hljs-keyword">const</span> location = <span class="hljs-title function_">useLocation</span>();
  
  <span class="hljs-keyword">if</span> (!isAuthenticated) {
    <span class="hljs-comment">// é‡å®šå‘åˆ°ç™»å½•é¡µï¼Œå¹¶ä¿å­˜å½“å‰è·¯å¾„ä»¥ä¾¿ç™»å½•åè¿”å›</span>
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Navigate</span> <span class="hljs-attr">to</span>=<span class="hljs-string">"/login"</span> <span class="hljs-attr">state</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">from:</span> <span class="hljs-attr">location</span> }} <span class="hljs-attr">replace</span> /&gt;</span></span>;
  }
  
  <span class="hljs-keyword">return</span> children;
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">LoginPage</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> { login } = <span class="hljs-title function_">useAuth</span>();
  <span class="hljs-keyword">const</span> location = <span class="hljs-title function_">useLocation</span>();
  <span class="hljs-keyword">const</span> <span class="hljs-keyword">from</span> = location.<span class="hljs-property">state</span>?.<span class="hljs-property">from</span>?.<span class="hljs-property">pathname</span> || <span class="hljs-string">'/'</span>;
  
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleLogin</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-title function_">login</span>();
    <span class="hljs-comment">// ç™»å½•åè·³è½¬åˆ°ä¹‹å‰å°è¯•è®¿é—®çš„é¡µé¢æˆ–é¦–é¡µ</span>
    <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">href</span> = <span class="hljs-keyword">from</span>;
  };
  
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>ç™»å½•é¡µé¢<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{handleLogin}</span>&gt;</span>ç™»å½•<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">Dashboard</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> { logout } = <span class="hljs-title function_">useAuth</span>();
  
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>ä»ªè¡¨æ¿<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>è¿™æ˜¯å—ä¿æŠ¤çš„é¡µé¢<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{logout}</span>&gt;</span>é€€å‡ºç™»å½•<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">PublicPage</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>å…¬å¼€é¡µé¢<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span>;
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">BrowserRouter</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Routes</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">"/"</span> <span class="hljs-attr">element</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">PublicPage</span> /&gt;</span>} /&gt;
        <span class="hljs-tag">&lt;<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">"/login"</span> <span class="hljs-attr">element</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">LoginPage</span> /&gt;</span>} /&gt;
        <span class="hljs-tag">&lt;<span class="hljs-name">Route</span> 
          <span class="hljs-attr">path</span>=<span class="hljs-string">"/dashboard"</span> 
          <span class="hljs-attr">element</span>=<span class="hljs-string">{</span>
            &lt;<span class="hljs-attr">ProtectedRoute</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">Dashboard</span> /&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">ProtectedRoute</span>&gt;</span>
          } 
        /&gt;
      <span class="hljs-tag">&lt;/<span class="hljs-name">Routes</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">BrowserRouter</span>&gt;</span></span>
  );
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">App</span>;
</code></pre>
<h2 data-id="heading-26">6. æ€»ç»“</h2>
<p>React Router æä¾›äº†ä¸¤ç§ä¸»è¦çš„è·¯ç”±æ¨¡å¼ï¼šHashRouter å’Œ BrowserRouterï¼Œå®ƒä»¬å„æœ‰ä¼˜ç¼ºç‚¹å’Œé€‚ç”¨åœºæ™¯ã€‚</p>
<ul>
<li><strong>HashRouter</strong> åŸºäº URL hash å’Œ hashchange äº‹ä»¶ï¼Œå…¼å®¹æ€§å¥½ï¼Œæ— éœ€æœåŠ¡å™¨é…ç½®ï¼Œé€‚åˆé™æ€æ‰˜ç®¡å’Œç®€å•åº”ç”¨ã€‚</li>
<li><strong>BrowserRouter</strong> åŸºäº HTML5 History APIï¼ŒURL ç¾è§‚ï¼ŒSEO å‹å¥½ï¼Œä½†éœ€è¦æœåŠ¡å™¨é…ç½®ï¼Œé€‚åˆç°ä»£æµè§ˆå™¨å’Œç”Ÿäº§ç¯å¢ƒåº”ç”¨ã€‚</li>
</ul>
<p>åœ¨å®é™…å¼€å‘ä¸­ï¼Œåº”æ ¹æ®é¡¹ç›®éœ€æ±‚ã€ç›®æ ‡ç”¨æˆ·æµè§ˆå™¨ç¯å¢ƒå’ŒæœåŠ¡å™¨é…ç½®èƒ½åŠ›æ¥é€‰æ‹©åˆé€‚çš„è·¯ç”±æ¨¡å¼ã€‚å¯¹äºå¤§å¤šæ•°ç°ä»£ Web åº”ç”¨ï¼ŒBrowserRouter æ˜¯æ›´å¥½çš„é€‰æ‹©ï¼Œå› ä¸ºå®ƒæä¾›äº†æ›´å¥½çš„ç”¨æˆ·ä½“éªŒå’Œå¼€å‘ä½“éªŒã€‚</p>
<p>æ— è®ºé€‰æ‹©å“ªç§æ¨¡å¼ï¼ŒReact Router éƒ½æä¾›äº†å¼ºå¤§è€Œçµæ´»çš„è·¯ç”±ç®¡ç†èƒ½åŠ›ï¼Œå¯ä»¥å¸®åŠ©å¼€å‘è€…æ„å»ºå¤æ‚çš„å•é¡µé¢åº”ç”¨ç¨‹åºã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[React Consumer æ‰¾ä¸åˆ° Provider çš„å¤„ç†æ–¹æ¡ˆ]]></title>    <link>https://juejin.cn/post/7593602686135353370</link>    <guid>https://juejin.cn/post/7593602686135353370</guid>    <pubDate>2026-01-11T03:39:35.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7593602686135353370" data-draft-id="7593602686135336986" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="React Consumer æ‰¾ä¸åˆ° Provider çš„å¤„ç†æ–¹æ¡ˆ"/> <meta itemprop="keywords" content="React.js"/> <meta itemprop="datePublished" content="2026-01-11T03:39:35.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åŒ—è¾°alk"/> <meta itemprop="url" content="https://juejin.cn/user/1772855673241352"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            React Consumer æ‰¾ä¸åˆ° Provider çš„å¤„ç†æ–¹æ¡ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1772855673241352/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åŒ—è¾°alk
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-11T03:39:35.000Z" title="Sun Jan 11 2026 03:39:35 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">1. é—®é¢˜æ¦‚è¿°ä¸é»˜è®¤è¡Œä¸º</h3>
<h4 data-id="heading-1">1.1 é»˜è®¤è¡Œä¸º</h4>
<p>å½“ React çš„ Consumer ç»„ä»¶åœ¨ä¸Šä¸‹æ–‡æ ‘ä¸­æ‰¾ä¸åˆ°å¯¹åº”çš„ Provider æ—¶ï¼Œå®ƒä¼šä½¿ç”¨åˆ›å»º Context æ—¶ä¼ é€’çš„<strong>é»˜è®¤å€¼</strong>ä½œä¸º valueã€‚</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// åˆ›å»º Context æ—¶æŒ‡å®šé»˜è®¤å€¼</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">MyContext</span> = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">createContext</span>(<span class="hljs-string">'default value'</span>);

<span class="hljs-comment">// æ²¡æœ‰ Provider æ—¶ï¼ŒConsumer ä¼šä½¿ç”¨ 'default value'</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">MyComponent</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">MyContext.Consumer</span>&gt;</span>
      {value =&gt; <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Value: {value}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>} {/* æ˜¾ç¤º: Value: default value */}
    <span class="hljs-tag">&lt;/<span class="hljs-name">MyContext.Consumer</span>&gt;</span></span>
  );
}
</code></pre>
<h4 data-id="heading-2">1.2 é—®é¢˜ç¤ºä¾‹</h4>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-comment">// åˆ›å»ºå¸¦é»˜è®¤å€¼çš„ Context</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">UserContext</span> = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">createContext</span>({
  <span class="hljs-attr">name</span>: <span class="hljs-string">'Unknown User'</span>,
  <span class="hljs-attr">role</span>: <span class="hljs-string">'guest'</span>,
  <span class="hljs-attr">isLoggedIn</span>: <span class="hljs-literal">false</span>
});

<span class="hljs-comment">// æ²¡æœ‰ Provider åŒ…è£…çš„ç»„ä»¶</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">UserProfile</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">UserContext.Consumer</span>&gt;</span>
      {user =&gt; (
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>User Profile<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Name: {user.name}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Role: {user.role}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Status: {user.isLoggedIn ? 'Logged In' : 'Guest'}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      )}
    <span class="hljs-tag">&lt;/<span class="hljs-name">UserContext.Consumer</span>&gt;</span></span>
  );
}

<span class="hljs-comment">// ç›´æ¥ä½¿ç”¨ï¼Œæ²¡æœ‰ Provider</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">UserProfile</span> /&gt;</span> {/* ä½¿ç”¨é»˜è®¤å€¼ */}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<h3 data-id="heading-3">2. è§£å†³æ–¹æ¡ˆ</h3>
<h4 data-id="heading-4">2.1 æ–¹æ¡ˆä¸€ï¼šè®¾ç½®åˆç†çš„é»˜è®¤å€¼ï¼ˆæ¨èï¼‰</h4>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-comment">// 1. å®šä¹‰å®Œæ•´çš„é»˜è®¤å€¼å¯¹è±¡</span>
<span class="hljs-keyword">const</span> defaultSettings = {
  <span class="hljs-attr">theme</span>: <span class="hljs-string">'light'</span>,
  <span class="hljs-attr">language</span>: <span class="hljs-string">'zh-CN'</span>,
  <span class="hljs-attr">fontSize</span>: <span class="hljs-number">14</span>,
  <span class="hljs-attr">notifications</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">userPreferences</span>: {
    <span class="hljs-attr">autoSave</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">darkMode</span>: <span class="hljs-literal">false</span>
  }
};

<span class="hljs-comment">// 2. åˆ›å»º Context æ—¶æä¾›æœ‰æ„ä¹‰çš„é»˜è®¤å€¼</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">AppSettingsContext</span> = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">createContext</span>(defaultSettings);

<span class="hljs-comment">// 3. åˆ›å»º Provider ç»„ä»¶</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">AppSettingsProvider</span>(<span class="hljs-params">{ children, settings = {} }</span>) {
  <span class="hljs-comment">// åˆå¹¶é»˜è®¤å€¼å’Œä¼ å…¥çš„è®¾ç½®</span>
  <span class="hljs-keyword">const</span> contextValue = {
    ...defaultSettings,
    ...settings,
    <span class="hljs-attr">userPreferences</span>: {
      ...defaultSettings.<span class="hljs-property">userPreferences</span>,
      ...settings.<span class="hljs-property">userPreferences</span>
    }
  };

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">AppSettingsContext.Provider</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{contextValue}</span>&gt;</span>
      {children}
    <span class="hljs-tag">&lt;/<span class="hljs-name">AppSettingsContext.Provider</span>&gt;</span></span>
  );
}

<span class="hljs-comment">// 4. ä½¿ç”¨ Consumer çš„ç»„ä»¶</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">SettingsDisplay</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">AppSettingsContext.Consumer</span>&gt;</span>
      {settings =&gt; (
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> 
          <span class="hljs-attr">padding:</span> '<span class="hljs-attr">20px</span>', 
          <span class="hljs-attr">backgroundColor:</span> <span class="hljs-attr">settings.userPreferences.darkMode</span> ? '#<span class="hljs-attr">333</span>' <span class="hljs-attr">:</span> '#<span class="hljs-attr">fff</span>',
          <span class="hljs-attr">color:</span> <span class="hljs-attr">settings.userPreferences.darkMode</span> ? '#<span class="hljs-attr">fff</span>' <span class="hljs-attr">:</span> '#<span class="hljs-attr">333</span>'
        }}&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>Application Settings<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>Theme: {settings.theme}<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>Language: {settings.language}<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>Font Size: {settings.fontSize}px<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>Notifications: {settings.notifications ? 'On' : 'Off'}<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>Auto Save: {settings.userPreferences.autoSave ? 'Enabled' : 'Disabled'}<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      )}
    <span class="hljs-tag">&lt;/<span class="hljs-name">AppSettingsContext.Consumer</span>&gt;</span></span>
  );
}

<span class="hljs-comment">// 5. ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      {/* æœ‰ Provider çš„æƒ…å†µ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">AppSettingsProvider</span> <span class="hljs-attr">settings</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">theme:</span> '<span class="hljs-attr">dark</span>', <span class="hljs-attr">fontSize:</span> <span class="hljs-attr">16</span> }}&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">SettingsDisplay</span> /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">AppSettingsProvider</span>&gt;</span>
      
      {/* æ²¡æœ‰ Provider çš„æƒ…å†µ - ä½¿ç”¨é»˜è®¤å€¼ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">SettingsDisplay</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<h4 data-id="heading-5">2.2 æ–¹æ¡ˆäºŒï¼šåˆ›å»ºé«˜é˜¶ç»„ä»¶è¿›è¡Œé˜²æŠ¤</h4>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-comment">// åˆ›å»º Context</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">AuthContext</span> = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">createContext</span>(<span class="hljs-literal">null</span>);

<span class="hljs-comment">// é«˜é˜¶ç»„ä»¶ï¼šæ£€æŸ¥ Provider æ˜¯å¦å­˜åœ¨</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">withAuthProviderCheck</span>(<span class="hljs-params">WrappedComponent, context</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">AuthCheckedComponent</span>(<span class="hljs-params">props</span>) {
    <span class="hljs-keyword">return</span> (
      <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">context.Consumer</span>&gt;</span>
        {value =&gt; {
          // æ£€æŸ¥æ˜¯å¦æ‰¾åˆ°äº† Provider
          if (value === null) {
            return (
              <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> 
                <span class="hljs-attr">padding:</span> '<span class="hljs-attr">20px</span>', 
                <span class="hljs-attr">border:</span> '<span class="hljs-attr">2px</span> <span class="hljs-attr">solid</span> #<span class="hljs-attr">ff6b6b</span>', 
                <span class="hljs-attr">backgroundColor:</span> '#<span class="hljs-attr">ffeaea</span>',
                <span class="hljs-attr">borderRadius:</span> '<span class="hljs-attr">8px</span>'
              }}&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>âš ï¸ Authentication Provider Missing<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>
                  This component requires an AuthProvider. 
                  Please wrap your application with AuthProvider.
                <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">details</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">marginTop:</span> '<span class="hljs-attr">10px</span>' }}&gt;</span>
                  <span class="hljs-tag">&lt;<span class="hljs-name">summary</span>&gt;</span>Debug Information<span class="hljs-tag">&lt;/<span class="hljs-name">summary</span>&gt;</span>
                  <span class="hljs-tag">&lt;<span class="hljs-name">pre</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> 
                    <span class="hljs-attr">backgroundColor:</span> '#<span class="hljs-attr">f8f9fa</span>', 
                    <span class="hljs-attr">padding:</span> '<span class="hljs-attr">10px</span>', 
                    <span class="hljs-attr">borderRadius:</span> '<span class="hljs-attr">4px</span>',
                    <span class="hljs-attr">fontSize:</span> '<span class="hljs-attr">12px</span>'
                  }}&gt;</span>
                    Component: {WrappedComponent.name}
                    Context: {context.displayName || 'Anonymous Context'}
                  <span class="hljs-tag">&lt;/<span class="hljs-name">pre</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">details</span>&gt;</span>
              <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            );
          }
          
          return <span class="hljs-tag">&lt;<span class="hljs-name">WrappedComponent</span> {<span class="hljs-attr">...props</span>} /&gt;</span>;
        }}
      <span class="hljs-tag">&lt;/<span class="hljs-name">context.Consumer</span>&gt;</span></span>
    );
  };
}

<span class="hljs-comment">// ç”¨æˆ·ä¿¡æ¯ç»„ä»¶</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">UserInfo</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">AuthContext.Consumer</span>&gt;</span>
      {auth =&gt; (
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">padding:</span> '<span class="hljs-attr">20px</span>', <span class="hljs-attr">border:</span> '<span class="hljs-attr">1px</span> <span class="hljs-attr">solid</span> #<span class="hljs-attr">ddd</span>' }}&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>User Information<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
          {auth ? (
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Username: {auth.username}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Email: {auth.email}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Role: {auth.role}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
          ) : (
            <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>No authentication data available<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
          )}
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      )}
    <span class="hljs-tag">&lt;/<span class="hljs-name">AuthContext.Consumer</span>&gt;</span></span>
  );
}

<span class="hljs-comment">// ä½¿ç”¨é«˜é˜¶ç»„ä»¶åŒ…è£…</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">ProtectedUserInfo</span> = <span class="hljs-title function_">withAuthProviderCheck</span>(<span class="hljs-title class_">UserInfo</span>, <span class="hljs-title class_">AuthContext</span>);

<span class="hljs-comment">// Auth Provider ç»„ä»¶</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">AuthProvider</span>(<span class="hljs-params">{ children, authData }</span>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">AuthContext.Provider</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{authData}</span>&gt;</span>
      {children}
    <span class="hljs-tag">&lt;/<span class="hljs-name">AuthContext.Provider</span>&gt;</span></span>
  );
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> mockAuthData = {
    <span class="hljs-attr">username</span>: <span class="hljs-string">'john_doe'</span>,
    <span class="hljs-attr">email</span>: <span class="hljs-string">'john@example.com'</span>,
    <span class="hljs-attr">role</span>: <span class="hljs-string">'admin'</span>
  };

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>With Provider:<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">AuthProvider</span> <span class="hljs-attr">authData</span>=<span class="hljs-string">{mockAuthData}</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">ProtectedUserInfo</span> /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">AuthProvider</span>&gt;</span>
      
      <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>Without Provider:<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">ProtectedUserInfo</span> /&gt;</span> {/* æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯ */}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<h4 data-id="heading-6">2.3 æ–¹æ¡ˆä¸‰ï¼šè‡ªå®šä¹‰ Hook è¿›è¡Œé˜²æŠ¤</h4>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, { useContext, useDebugValue } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-comment">// åˆ›å»º Context</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">FeatureFlagsContext</span> = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">createContext</span>(<span class="hljs-literal">null</span>);

<span class="hljs-comment">// è‡ªå®šä¹‰ Hook å¸¦æœ‰ Provider æ£€æŸ¥</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">useFeatureFlags</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> context = <span class="hljs-title function_">useContext</span>(<span class="hljs-title class_">FeatureFlagsContext</span>);
  
  <span class="hljs-title function_">useDebugValue</span>(context ? <span class="hljs-string">'FeatureFlags: Available'</span> : <span class="hljs-string">'FeatureFlags: Using Defaults'</span>);
  
  <span class="hljs-keyword">if</span> (context === <span class="hljs-literal">null</span>) {
    <span class="hljs-comment">// è¿”å›å®‰å…¨çš„é»˜è®¤å€¼</span>
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">isEnabled</span>: <span class="hljs-function">(<span class="hljs-params">flag</span>) =&gt;</span> <span class="hljs-literal">false</span>,
      <span class="hljs-attr">getAllFlags</span>: <span class="hljs-function">() =&gt;</span> ({}),
      <span class="hljs-attr">hasProvider</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">error</span>: <span class="hljs-string">'FeatureFlagsProvider is missing. All features are disabled by default.'</span>
    };
  }
  
  <span class="hljs-keyword">return</span> {
    ...context,
    <span class="hljs-attr">hasProvider</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">error</span>: <span class="hljs-literal">null</span>
  };
}

<span class="hljs-comment">// åˆ›å»º Provider</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">FeatureFlagsProvider</span>(<span class="hljs-params">{ flags = {}, children }</span>) {
  <span class="hljs-keyword">const</span> value = {
    <span class="hljs-attr">isEnabled</span>: <span class="hljs-function">(<span class="hljs-params">flagName</span>) =&gt;</span> <span class="hljs-title class_">Boolean</span>(flags[flagName]),
    <span class="hljs-attr">getAllFlags</span>: <span class="hljs-function">() =&gt;</span> ({ ...flags }),
    flags
  };

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">FeatureFlagsContext.Provider</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{value}</span>&gt;</span>
      {children}
    <span class="hljs-tag">&lt;/<span class="hljs-name">FeatureFlagsContext.Provider</span>&gt;</span></span>
  );
}

<span class="hljs-comment">// ä½¿ç”¨è‡ªå®šä¹‰ Hook çš„ç»„ä»¶</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">FeatureComponent</span>(<span class="hljs-params">{ featureName, children }</span>) {
  <span class="hljs-keyword">const</span> { isEnabled, hasProvider, error } = <span class="hljs-title function_">useFeatureFlags</span>();
  
  <span class="hljs-keyword">if</span> (!<span class="hljs-title function_">isEnabled</span>(featureName)) {
    <span class="hljs-keyword">return</span> (
      <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> 
        <span class="hljs-attr">padding:</span> '<span class="hljs-attr">15px</span>', 
        <span class="hljs-attr">margin:</span> '<span class="hljs-attr">10px</span> <span class="hljs-attr">0</span>',
        <span class="hljs-attr">backgroundColor:</span> <span class="hljs-attr">hasProvider</span> ? '#<span class="hljs-attr">fff3cd</span>' <span class="hljs-attr">:</span> '#<span class="hljs-attr">f8d7da</span>',
        <span class="hljs-attr">border:</span> `<span class="hljs-attr">1px</span> <span class="hljs-attr">solid</span> ${<span class="hljs-attr">hasProvider</span> ? '#<span class="hljs-attr">ffeaa7</span>' <span class="hljs-attr">:</span> '#<span class="hljs-attr">f5c6cb</span>'}`,
        <span class="hljs-attr">borderRadius:</span> '<span class="hljs-attr">4px</span>'
      }}&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>
            {hasProvider ? 'ğŸ”’ Feature Disabled' : 'âš ï¸ Provider Missing'}
          <span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Feature "{featureName}" is not available.<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
        {error &amp;&amp; (
          <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">fontSize:</span> '<span class="hljs-attr">0.9em</span>', <span class="hljs-attr">color:</span> '#<span class="hljs-attr">721c24</span>' }}&gt;</span>
            {error}
          <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
        )}
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
    );
  }
  
  <span class="hljs-keyword">return</span> children;
}

<span class="hljs-comment">// åŠŸèƒ½å¼€å…³æ˜¾ç¤ºç»„ä»¶</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">FeaturesDashboard</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> { getAllFlags, hasProvider } = <span class="hljs-title function_">useFeatureFlags</span>();
  <span class="hljs-keyword">const</span> allFlags = <span class="hljs-title function_">getAllFlags</span>();
  
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">padding:</span> '<span class="hljs-attr">20px</span>' }}&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>Features Dashboard<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> 
        <span class="hljs-attr">padding:</span> '<span class="hljs-attr">10px</span>', 
        <span class="hljs-attr">backgroundColor:</span> <span class="hljs-attr">hasProvider</span> ? '#<span class="hljs-attr">d1ecf1</span>' <span class="hljs-attr">:</span> '#<span class="hljs-attr">f8d7da</span>',
        <span class="hljs-attr">border:</span> `<span class="hljs-attr">1px</span> <span class="hljs-attr">solid</span> ${<span class="hljs-attr">hasProvider</span> ? '#<span class="hljs-attr">bee5eb</span>' <span class="hljs-attr">:</span> '#<span class="hljs-attr">f5c6cb</span>'}`,
        <span class="hljs-attr">borderRadius:</span> '<span class="hljs-attr">4px</span>',
        <span class="hljs-attr">marginBottom:</span> '<span class="hljs-attr">20px</span>'
      }}&gt;</span>
        Provider Status: {hasProvider ? 'âœ… Connected' : 'âŒ Missing'}
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>Available Features:<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
        {Object.entries(allFlags).map(([flag, enabled]) =&gt; (
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{flag}</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> 
            <span class="hljs-attr">padding:</span> '<span class="hljs-attr">8px</span>', 
            <span class="hljs-attr">margin:</span> '<span class="hljs-attr">5px</span> <span class="hljs-attr">0</span>',
            <span class="hljs-attr">backgroundColor:</span> <span class="hljs-attr">enabled</span> ? '#<span class="hljs-attr">d4edda</span>' <span class="hljs-attr">:</span> '#<span class="hljs-attr">f8d7da</span>',
            <span class="hljs-attr">border:</span> `<span class="hljs-attr">1px</span> <span class="hljs-attr">solid</span> ${<span class="hljs-attr">enabled</span> ? '#<span class="hljs-attr">c3e6cb</span>' <span class="hljs-attr">:</span> '#<span class="hljs-attr">f5c6cb</span>'}`,
            <span class="hljs-attr">borderRadius:</span> '<span class="hljs-attr">4px</span>'
          }}&gt;</span>
            {flag}: {enabled ? 'âœ… Enabled' : 'âŒ Disabled'}
          <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        ))}
        
        {Object.keys(allFlags).length === 0 &amp;&amp; (
          <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>No features configured<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
        )}
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> featureFlags = {
    <span class="hljs-string">'new-ui'</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-string">'beta-features'</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-string">'export-functionality'</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-string">'advanced-settings'</span>: <span class="hljs-literal">false</span>
  };

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      {/* æœ‰ Provider çš„æƒ…å†µ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">FeatureFlagsProvider</span> <span class="hljs-attr">flags</span>=<span class="hljs-string">{featureFlags}</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">FeaturesDashboard</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">FeatureComponent</span> <span class="hljs-attr">featureName</span>=<span class="hljs-string">"new-ui"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">padding:</span> '<span class="hljs-attr">15px</span>', <span class="hljs-attr">backgroundColor:</span> '#<span class="hljs-attr">e8f5e8</span>', <span class="hljs-attr">margin:</span> '<span class="hljs-attr">10px</span> <span class="hljs-attr">0</span>' }}&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>New UI Feature<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>This is the exciting new UI!<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">FeatureComponent</span>&gt;</span>
        
        <span class="hljs-tag">&lt;<span class="hljs-name">FeatureComponent</span> <span class="hljs-attr">featureName</span>=<span class="hljs-string">"beta-features"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Beta features content (this won't show)<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">FeatureComponent</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">FeatureFlagsProvider</span>&gt;</span>
      
      <span class="hljs-tag">&lt;<span class="hljs-name">hr</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">margin:</span> '<span class="hljs-attr">40px</span> <span class="hljs-attr">0</span>' }} /&gt;</span>
      
      {/* æ²¡æœ‰ Provider çš„æƒ…å†µ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">FeaturesDashboard</span> /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">FeatureComponent</span> <span class="hljs-attr">featureName</span>=<span class="hljs-string">"new-ui"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>This won't show without provider<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">FeatureComponent</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<h4 data-id="heading-7">2.4 æ–¹æ¡ˆå››ï¼šè¿è¡Œæ—¶æ£€æµ‹å’Œé”™è¯¯æŠ¥å‘Š</h4>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, { useContext, useEffect, useRef } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-comment">// åˆ›å»ºå¸¦æ£€æµ‹åŠŸèƒ½çš„ Context</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">AnalyticsContext</span> = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">createContext</span>(<span class="hljs-literal">undefined</span>);

<span class="hljs-comment">// å¼€å‘ç¯å¢ƒä¸‹çš„ä¸¥æ ¼æ¨¡å¼ Hook</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">useStrictContext</span>(<span class="hljs-params">context, contextName = <span class="hljs-string">'Unknown'</span></span>) {
  <span class="hljs-keyword">const</span> contextValue = <span class="hljs-title function_">useContext</span>(context);
  <span class="hljs-keyword">const</span> hasReported = <span class="hljs-title function_">useRef</span>(<span class="hljs-literal">false</span>);
  
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">// åªåœ¨å¼€å‘ç¯å¢ƒä¸‹æ£€æŸ¥ï¼Œä¸”åªæŠ¥å‘Šä¸€æ¬¡</span>
    <span class="hljs-keyword">if</span> (process.<span class="hljs-property">env</span>.<span class="hljs-property">NODE_ENV</span> === <span class="hljs-string">'development'</span> &amp;&amp; 
        contextValue === <span class="hljs-literal">undefined</span> &amp;&amp; 
        !hasReported.<span class="hljs-property">current</span>) {
      
      hasReported.<span class="hljs-property">current</span> = <span class="hljs-literal">true</span>;
      
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(
        <span class="hljs-string">`ğŸš¨ Context Provider Missing: <span class="hljs-subst">${contextName}</span>\n`</span> +
        <span class="hljs-string">`A component is trying to use <span class="hljs-subst">${contextName}</span> but no Provider was found in the component tree.\n`</span> +
        <span class="hljs-string">`This might cause unexpected behavior in your application.\n`</span> +
        <span class="hljs-string">`Please make sure to wrap your components with the appropriate Provider.`</span>
      );
      
      <span class="hljs-comment">// åœ¨å¼€å‘ç¯å¢ƒä¸­æ˜¾ç¤ºè§†è§‰è­¦å‘Š</span>
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-variable language_">window</span> !== <span class="hljs-string">'undefined'</span>) {
        <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
          <span class="hljs-keyword">const</span> warningElement = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'div'</span>);
          warningElement.<span class="hljs-property">style</span>.<span class="hljs-property">cssText</span> = <span class="hljs-string">`
            position: fixed;
            top: 10px;
            right: 10px;
            background: #ff6b6b;
            color: white;
            padding: 15px;
            border-radius: 5px;
            z-index: 10000;
            max-width: 400px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            font-family: system-ui, sans-serif;
            font-size: 14px;
          `</span>;
          warningElement.<span class="hljs-property">innerHTML</span> = <span class="hljs-string">`
            &lt;strong&gt;âš ï¸ Context Provider Missing&lt;/strong&gt;&lt;br&gt;
            &lt;small&gt;<span class="hljs-subst">${contextName}</span> - Check browser console for details&lt;/small&gt;
          `</span>;
          <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">appendChild</span>(warningElement);
          
          <span class="hljs-comment">// è‡ªåŠ¨ç§»é™¤è­¦å‘Š</span>
          <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
            <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">contains</span>(warningElement)) {
              <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">removeChild</span>(warningElement);
            }
          }, <span class="hljs-number">5000</span>);
        }, <span class="hljs-number">100</span>);
      }
    }
  }, [contextValue, contextName]);
  
  <span class="hljs-keyword">return</span> contextValue;
}

<span class="hljs-comment">// Analytics Provider</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">AnalyticsProvider</span>(<span class="hljs-params">{ children, trackingId, enabled = <span class="hljs-literal">true</span> }</span>) {
  <span class="hljs-keyword">const</span> contextValue = {
    <span class="hljs-attr">trackEvent</span>: <span class="hljs-function">(<span class="hljs-params">eventName, properties = {}</span>) =&gt;</span> {
      <span class="hljs-keyword">if</span> (enabled &amp;&amp; trackingId) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`[Analytics] Tracking: <span class="hljs-subst">${eventName}</span>`</span>, properties);
        <span class="hljs-comment">// å®é™…é¡¹ç›®ä¸­è¿™é‡Œä¼šè°ƒç”¨ analytics SDK</span>
      }
    },
    <span class="hljs-attr">trackPageView</span>: <span class="hljs-function">(<span class="hljs-params">pageName</span>) =&gt;</span> {
      <span class="hljs-keyword">if</span> (enabled &amp;&amp; trackingId) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`[Analytics] Page View: <span class="hljs-subst">${pageName}</span>`</span>);
      }
    },
    <span class="hljs-attr">isEnabled</span>: enabled,
    <span class="hljs-attr">hasValidConfig</span>: !!trackingId
  };

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">AnalyticsContext.Provider</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{contextValue}</span>&gt;</span>
      {children}
    <span class="hljs-tag">&lt;/<span class="hljs-name">AnalyticsContext.Provider</span>&gt;</span></span>
  );
}

<span class="hljs-comment">// ä½¿ç”¨ä¸¥æ ¼ Context çš„ç»„ä»¶</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">TrackedButton</span>(<span class="hljs-params">{ onClick, eventName, children, ...props }</span>) {
  <span class="hljs-keyword">const</span> analytics = <span class="hljs-title function_">useStrictContext</span>(<span class="hljs-title class_">AnalyticsContext</span>, <span class="hljs-string">'AnalyticsContext'</span>);
  
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleClick</span> = (<span class="hljs-params">e</span>) =&gt; {
    <span class="hljs-comment">// è°ƒç”¨åŸå§‹ onClick</span>
    onClick?.(e);
    
    <span class="hljs-comment">// è·Ÿè¸ªäº‹ä»¶</span>
    <span class="hljs-keyword">if</span> (analytics) {
      analytics.<span class="hljs-title function_">trackEvent</span>(eventName || <span class="hljs-string">'button_click'</span>, {
        <span class="hljs-attr">buttonText</span>: <span class="hljs-keyword">typeof</span> children === <span class="hljs-string">'string'</span> ? children : <span class="hljs-string">'Unknown'</span>,
        <span class="hljs-attr">timestamp</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">toISOString</span>()
      });
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-comment">// é™çº§å¤„ç†ï¼šåœ¨æ§åˆ¶å°è®°å½•</span>
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`[Analytics Fallback] Event: <span class="hljs-subst">${eventName || <span class="hljs-string">'button_click'</span>}</span>`</span>);
    }
  };
  
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{handleClick}</span> {<span class="hljs-attr">...props</span>}&gt;</span>
      {children}
    <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>
  );
}

<span class="hljs-comment">// é¡µé¢è§†å›¾è·Ÿè¸ªç»„ä»¶</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">TrackedPage</span>(<span class="hljs-params">{ pageName, children }</span>) {
  <span class="hljs-keyword">const</span> analytics = <span class="hljs-title function_">useStrictContext</span>(<span class="hljs-title class_">AnalyticsContext</span>, <span class="hljs-string">'AnalyticsContext'</span>);
  
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">if</span> (analytics) {
      analytics.<span class="hljs-title function_">trackPageView</span>(pageName);
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`[Analytics Fallback] Page View: <span class="hljs-subst">${pageName}</span>`</span>);
    }
  }, [analytics, pageName]);
  
  <span class="hljs-keyword">return</span> children;
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      {/* æœ‰ Provider çš„æƒ…å†µ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">AnalyticsProvider</span> <span class="hljs-attr">trackingId</span>=<span class="hljs-string">"UA-123456789-1"</span> <span class="hljs-attr">enabled</span>=<span class="hljs-string">{true}</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">TrackedPage</span> <span class="hljs-attr">pageName</span>=<span class="hljs-string">"Home Page"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>Home Page with Analytics<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">TrackedButton</span> <span class="hljs-attr">eventName</span>=<span class="hljs-string">"cta_click"</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> alert('Clicked!')}&gt;
              Tracked Button
            <span class="hljs-tag">&lt;/<span class="hljs-name">TrackedButton</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">TrackedPage</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">AnalyticsProvider</span>&gt;</span>
      
      <span class="hljs-tag">&lt;<span class="hljs-name">hr</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">margin:</span> '<span class="hljs-attr">40px</span> <span class="hljs-attr">0</span>' }} /&gt;</span>
      
      {/* æ²¡æœ‰ Provider çš„æƒ…å†µ - ä¼šæ˜¾ç¤ºè­¦å‘Šä½†ä¸ä¼šå´©æºƒ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">TrackedPage</span> <span class="hljs-attr">pageName</span>=<span class="hljs-string">"Standalone Page"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>Standalone Page (No Provider)<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">TrackedButton</span> <span class="hljs-attr">eventName</span>=<span class="hljs-string">"standalone_click"</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> alert('Standalone!')}&gt;
            Standalone Button
          <span class="hljs-tag">&lt;/<span class="hljs-name">TrackedButton</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">TrackedPage</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<h3 data-id="heading-8">3. æœ€ä½³å®è·µæ€»ç»“</h3>
<h4 data-id="heading-9">3.1 é¢„é˜²æªæ–½</h4>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// 1. æ€»æ˜¯æä¾›æœ‰æ„ä¹‰çš„é»˜è®¤å€¼</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">SafeContext</span> = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">createContext</span>({
  <span class="hljs-comment">// æä¾›å®Œæ•´çš„é»˜è®¤çŠ¶æ€</span>
  <span class="hljs-attr">data</span>: <span class="hljs-literal">null</span>,
  <span class="hljs-attr">loading</span>: <span class="hljs-literal">false</span>,
  <span class="hljs-attr">error</span>: <span class="hljs-literal">null</span>,
  <span class="hljs-attr">actions</span>: {
    <span class="hljs-comment">// æä¾›å®‰å…¨çš„ç©ºå‡½æ•°</span>
    <span class="hljs-attr">fetch</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">'No provider found'</span>),
    <span class="hljs-attr">update</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">'No provider found'</span>)
  }
});

<span class="hljs-comment">// 2. åˆ›å»º Provider åŒ…è£…ç»„ä»¶</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">AppProviders</span>(<span class="hljs-params">{ children }</span>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">AuthProvider</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">ThemeProvider</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">FeatureFlagsProvider</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">ErrorBoundary</span>&gt;</span>
            {children}
          <span class="hljs-tag">&lt;/<span class="hljs-name">ErrorBoundary</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">FeatureFlagsProvider</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">ThemeProvider</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">AuthProvider</span>&gt;</span></span>
  );
}

<span class="hljs-comment">// 3. åœ¨åº”ç”¨æ ¹ç»„ä»¶ä¸­ä½¿ç”¨</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">AppProviders</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">MyApp</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">AppProviders</span>&gt;</span></span>
  );
}
</code></pre>
<h4 data-id="heading-10">3.2 é”™è¯¯è¾¹ç•Œé…åˆ</h4>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ContextErrorBoundary</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Component</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">props</span>) {
    <span class="hljs-variable language_">super</span>(props);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = { <span class="hljs-attr">hasError</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">errorInfo</span>: <span class="hljs-literal">null</span> };
  }
  
  <span class="hljs-keyword">static</span> <span class="hljs-title function_">getDerivedStateFromError</span>(<span class="hljs-params">error</span>) {
    <span class="hljs-keyword">return</span> { <span class="hljs-attr">hasError</span>: <span class="hljs-literal">true</span> };
  }
  
  <span class="hljs-title function_">componentDidCatch</span>(<span class="hljs-params">error, errorInfo</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>({ errorInfo });
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Context Error:'</span>, error, errorInfo);
  }
  
  <span class="hljs-title function_">render</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>.<span class="hljs-property">hasError</span>) {
      <span class="hljs-keyword">return</span> (
        <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">padding:</span> '<span class="hljs-attr">20px</span>', <span class="hljs-attr">border:</span> '<span class="hljs-attr">2px</span> <span class="hljs-attr">solid</span> #<span class="hljs-attr">ff6b6b</span>' }}&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>Context Configuration Error<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>There's an issue with context providers in this component tree.<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">details</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">summary</span>&gt;</span>Error Details<span class="hljs-tag">&lt;/<span class="hljs-name">summary</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">pre</span>&gt;</span>{this.state.errorInfo?.componentStack}<span class="hljs-tag">&lt;/<span class="hljs-name">pre</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">details</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
      );
    }
    
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">props</span>.<span class="hljs-property">children</span>;
  }
}
</code></pre>
<h4 data-id="heading-11">3.3 æµ‹è¯•ç­–ç•¥</h4>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// æµ‹è¯•å·¥å…·ï¼šæ¨¡æ‹Ÿç¼ºå°‘ Provider çš„æƒ…å†µ</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">createMissingProviderTest</span>(<span class="hljs-params">Component, contextName</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">MissingProviderTest</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> (
      <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">data-testid</span>=<span class="hljs-string">"missing-provider-test"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Component</span> /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
    );
  };
}

<span class="hljs-comment">// åœ¨æµ‹è¯•ä¸­éªŒè¯é™çº§è¡Œä¸º</span>
<span class="hljs-title function_">describe</span>(<span class="hljs-string">'Context Missing Handling'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title function_">test</span>(<span class="hljs-string">'should use default values when provider is missing'</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> { getByText } = <span class="hljs-title function_">render</span>(<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">UserProfile</span> /&gt;</span></span>);
    <span class="hljs-title function_">expect</span>(<span class="hljs-title function_">getByText</span>(<span class="hljs-string">'Unknown User'</span>)).<span class="hljs-title function_">toBeInTheDocument</span>();
  });
  
  <span class="hljs-title function_">test</span>(<span class="hljs-string">'should show fallback UI when provider is missing'</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> { getByText } = <span class="hljs-title function_">render</span>(<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ProtectedUserInfo</span> /&gt;</span></span>);
    <span class="hljs-title function_">expect</span>(<span class="hljs-title function_">getByText</span>(<span class="hljs-string">'Authentication Provider Missing'</span>)).<span class="hljs-title function_">toBeInTheDocument</span>();
  });
});
</code></pre>
<h3 data-id="heading-12">4. æ€»ç»“</h3>
<p>å½“ React Consumer æ‰¾ä¸åˆ° Provider æ—¶ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼å¤„ç†ï¼š</p>
<ol>
<li><strong>è®¾ç½®åˆç†çš„é»˜è®¤å€¼</strong> - æœ€åŸºç¡€çš„é˜²æŠ¤æªæ–½</li>
<li><strong>é«˜é˜¶ç»„ä»¶åŒ…è£…</strong> - æä¾›ç»Ÿä¸€çš„é”™è¯¯å¤„ç†</li>
<li><strong>è‡ªå®šä¹‰ Hook</strong> - ç°ä»£åŒ–çš„è§£å†³æ–¹æ¡ˆï¼Œæä¾›æ›´å¥½çš„å¼€å‘ä½“éªŒ</li>
<li><strong>è¿è¡Œæ—¶æ£€æµ‹</strong> - å¼€å‘ç¯å¢ƒä¸‹çš„ä¸»åŠ¨è­¦å‘Š</li>
<li><strong>é”™è¯¯è¾¹ç•Œ</strong> - é˜²æ­¢æ•´ä¸ªåº”ç”¨å´©æºƒ</li>
</ol>
<p><strong>æ¨èåšæ³•</strong>ï¼šç»“åˆä½¿ç”¨åˆç†çš„é»˜è®¤å€¼ + è‡ªå®šä¹‰ Hook è¿›è¡Œé˜²æŠ¤ï¼Œåœ¨å¼€å‘ç¯å¢ƒä¸‹æ·»åŠ è¿è¡Œæ—¶æ£€æµ‹ï¼Œåœ¨ç”Ÿäº§ç¯å¢ƒä¸‹æä¾›ä¼˜é›…çš„é™çº§ä½“éªŒã€‚<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3cee2081aa7d4b3c9c4147a8c884603b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YyX6L6wYWxr:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768707575&amp;x-signature=0oiO9nZmVGz4dZSUNCJAFZ4H3M0%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
@[toc]</p>
<h3 data-id="heading-13">1. é—®é¢˜æ¦‚è¿°ä¸é»˜è®¤è¡Œä¸º</h3>
<h4 data-id="heading-14">1.1 é»˜è®¤è¡Œä¸º</h4>
<p>å½“ React çš„ Consumer ç»„ä»¶åœ¨ä¸Šä¸‹æ–‡æ ‘ä¸­æ‰¾ä¸åˆ°å¯¹åº”çš„ Provider æ—¶ï¼Œå®ƒä¼šä½¿ç”¨åˆ›å»º Context æ—¶ä¼ é€’çš„<strong>é»˜è®¤å€¼</strong>ä½œä¸º valueã€‚</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// åˆ›å»º Context æ—¶æŒ‡å®šé»˜è®¤å€¼</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">MyContext</span> = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">createContext</span>(<span class="hljs-string">'default value'</span>);

<span class="hljs-comment">// æ²¡æœ‰ Provider æ—¶ï¼ŒConsumer ä¼šä½¿ç”¨ 'default value'</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">MyComponent</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">MyContext.Consumer</span>&gt;</span>
      {value =&gt; <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Value: {value}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>} {/* æ˜¾ç¤º: Value: default value */}
    <span class="hljs-tag">&lt;/<span class="hljs-name">MyContext.Consumer</span>&gt;</span></span>
  );
}
</code></pre>
<h4 data-id="heading-15">1.2 é—®é¢˜ç¤ºä¾‹</h4>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-comment">// åˆ›å»ºå¸¦é»˜è®¤å€¼çš„ Context</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">UserContext</span> = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">createContext</span>({
  <span class="hljs-attr">name</span>: <span class="hljs-string">'Unknown User'</span>,
  <span class="hljs-attr">role</span>: <span class="hljs-string">'guest'</span>,
  <span class="hljs-attr">isLoggedIn</span>: <span class="hljs-literal">false</span>
});

<span class="hljs-comment">// æ²¡æœ‰ Provider åŒ…è£…çš„ç»„ä»¶</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">UserProfile</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">UserContext.Consumer</span>&gt;</span>
      {user =&gt; (
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>User Profile<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Name: {user.name}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Role: {user.role}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Status: {user.isLoggedIn ? 'Logged In' : 'Guest'}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      )}
    <span class="hljs-tag">&lt;/<span class="hljs-name">UserContext.Consumer</span>&gt;</span></span>
  );
}

<span class="hljs-comment">// ç›´æ¥ä½¿ç”¨ï¼Œæ²¡æœ‰ Provider</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">UserProfile</span> /&gt;</span> {/* ä½¿ç”¨é»˜è®¤å€¼ */}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<h3 data-id="heading-16">2. è§£å†³æ–¹æ¡ˆ</h3>
<h4 data-id="heading-17">2.1 æ–¹æ¡ˆä¸€ï¼šè®¾ç½®åˆç†çš„é»˜è®¤å€¼ï¼ˆæ¨èï¼‰</h4>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-comment">// 1. å®šä¹‰å®Œæ•´çš„é»˜è®¤å€¼å¯¹è±¡</span>
<span class="hljs-keyword">const</span> defaultSettings = {
  <span class="hljs-attr">theme</span>: <span class="hljs-string">'light'</span>,
  <span class="hljs-attr">language</span>: <span class="hljs-string">'zh-CN'</span>,
  <span class="hljs-attr">fontSize</span>: <span class="hljs-number">14</span>,
  <span class="hljs-attr">notifications</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">userPreferences</span>: {
    <span class="hljs-attr">autoSave</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">darkMode</span>: <span class="hljs-literal">false</span>
  }
};

<span class="hljs-comment">// 2. åˆ›å»º Context æ—¶æä¾›æœ‰æ„ä¹‰çš„é»˜è®¤å€¼</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">AppSettingsContext</span> = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">createContext</span>(defaultSettings);

<span class="hljs-comment">// 3. åˆ›å»º Provider ç»„ä»¶</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">AppSettingsProvider</span>(<span class="hljs-params">{ children, settings = {} }</span>) {
  <span class="hljs-comment">// åˆå¹¶é»˜è®¤å€¼å’Œä¼ å…¥çš„è®¾ç½®</span>
  <span class="hljs-keyword">const</span> contextValue = {
    ...defaultSettings,
    ...settings,
    <span class="hljs-attr">userPreferences</span>: {
      ...defaultSettings.<span class="hljs-property">userPreferences</span>,
      ...settings.<span class="hljs-property">userPreferences</span>
    }
  };

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">AppSettingsContext.Provider</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{contextValue}</span>&gt;</span>
      {children}
    <span class="hljs-tag">&lt;/<span class="hljs-name">AppSettingsContext.Provider</span>&gt;</span></span>
  );
}

<span class="hljs-comment">// 4. ä½¿ç”¨ Consumer çš„ç»„ä»¶</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">SettingsDisplay</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">AppSettingsContext.Consumer</span>&gt;</span>
      {settings =&gt; (
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> 
          <span class="hljs-attr">padding:</span> '<span class="hljs-attr">20px</span>', 
          <span class="hljs-attr">backgroundColor:</span> <span class="hljs-attr">settings.userPreferences.darkMode</span> ? '#<span class="hljs-attr">333</span>' <span class="hljs-attr">:</span> '#<span class="hljs-attr">fff</span>',
          <span class="hljs-attr">color:</span> <span class="hljs-attr">settings.userPreferences.darkMode</span> ? '#<span class="hljs-attr">fff</span>' <span class="hljs-attr">:</span> '#<span class="hljs-attr">333</span>'
        }}&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>Application Settings<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>Theme: {settings.theme}<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>Language: {settings.language}<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>Font Size: {settings.fontSize}px<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>Notifications: {settings.notifications ? 'On' : 'Off'}<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>Auto Save: {settings.userPreferences.autoSave ? 'Enabled' : 'Disabled'}<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      )}
    <span class="hljs-tag">&lt;/<span class="hljs-name">AppSettingsContext.Consumer</span>&gt;</span></span>
  );
}

<span class="hljs-comment">// 5. ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      {/* æœ‰ Provider çš„æƒ…å†µ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">AppSettingsProvider</span> <span class="hljs-attr">settings</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">theme:</span> '<span class="hljs-attr">dark</span>', <span class="hljs-attr">fontSize:</span> <span class="hljs-attr">16</span> }}&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">SettingsDisplay</span> /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">AppSettingsProvider</span>&gt;</span>
      
      {/* æ²¡æœ‰ Provider çš„æƒ…å†µ - ä½¿ç”¨é»˜è®¤å€¼ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">SettingsDisplay</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<h4 data-id="heading-18">2.2 æ–¹æ¡ˆäºŒï¼šåˆ›å»ºé«˜é˜¶ç»„ä»¶è¿›è¡Œé˜²æŠ¤</h4>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-comment">// åˆ›å»º Context</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">AuthContext</span> = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">createContext</span>(<span class="hljs-literal">null</span>);

<span class="hljs-comment">// é«˜é˜¶ç»„ä»¶ï¼šæ£€æŸ¥ Provider æ˜¯å¦å­˜åœ¨</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">withAuthProviderCheck</span>(<span class="hljs-params">WrappedComponent, context</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">AuthCheckedComponent</span>(<span class="hljs-params">props</span>) {
    <span class="hljs-keyword">return</span> (
      <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">context.Consumer</span>&gt;</span>
        {value =&gt; {
          // æ£€æŸ¥æ˜¯å¦æ‰¾åˆ°äº† Provider
          if (value === null) {
            return (
              <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> 
                <span class="hljs-attr">padding:</span> '<span class="hljs-attr">20px</span>', 
                <span class="hljs-attr">border:</span> '<span class="hljs-attr">2px</span> <span class="hljs-attr">solid</span> #<span class="hljs-attr">ff6b6b</span>', 
                <span class="hljs-attr">backgroundColor:</span> '#<span class="hljs-attr">ffeaea</span>',
                <span class="hljs-attr">borderRadius:</span> '<span class="hljs-attr">8px</span>'
              }}&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>âš ï¸ Authentication Provider Missing<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>
                  This component requires an AuthProvider. 
                  Please wrap your application with AuthProvider.
                <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">details</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">marginTop:</span> '<span class="hljs-attr">10px</span>' }}&gt;</span>
                  <span class="hljs-tag">&lt;<span class="hljs-name">summary</span>&gt;</span>Debug Information<span class="hljs-tag">&lt;/<span class="hljs-name">summary</span>&gt;</span>
                  <span class="hljs-tag">&lt;<span class="hljs-name">pre</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> 
                    <span class="hljs-attr">backgroundColor:</span> '#<span class="hljs-attr">f8f9fa</span>', 
                    <span class="hljs-attr">padding:</span> '<span class="hljs-attr">10px</span>', 
                    <span class="hljs-attr">borderRadius:</span> '<span class="hljs-attr">4px</span>',
                    <span class="hljs-attr">fontSize:</span> '<span class="hljs-attr">12px</span>'
                  }}&gt;</span>
                    Component: {WrappedComponent.name}
                    Context: {context.displayName || 'Anonymous Context'}
                  <span class="hljs-tag">&lt;/<span class="hljs-name">pre</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">details</span>&gt;</span>
              <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            );
          }
          
          return <span class="hljs-tag">&lt;<span class="hljs-name">WrappedComponent</span> {<span class="hljs-attr">...props</span>} /&gt;</span>;
        }}
      <span class="hljs-tag">&lt;/<span class="hljs-name">context.Consumer</span>&gt;</span></span>
    );
  };
}

<span class="hljs-comment">// ç”¨æˆ·ä¿¡æ¯ç»„ä»¶</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">UserInfo</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">AuthContext.Consumer</span>&gt;</span>
      {auth =&gt; (
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">padding:</span> '<span class="hljs-attr">20px</span>', <span class="hljs-attr">border:</span> '<span class="hljs-attr">1px</span> <span class="hljs-attr">solid</span> #<span class="hljs-attr">ddd</span>' }}&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>User Information<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
          {auth ? (
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Username: {auth.username}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Email: {auth.email}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Role: {auth.role}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
          ) : (
            <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>No authentication data available<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
          )}
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      )}
    <span class="hljs-tag">&lt;/<span class="hljs-name">AuthContext.Consumer</span>&gt;</span></span>
  );
}

<span class="hljs-comment">// ä½¿ç”¨é«˜é˜¶ç»„ä»¶åŒ…è£…</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">ProtectedUserInfo</span> = <span class="hljs-title function_">withAuthProviderCheck</span>(<span class="hljs-title class_">UserInfo</span>, <span class="hljs-title class_">AuthContext</span>);

<span class="hljs-comment">// Auth Provider ç»„ä»¶</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">AuthProvider</span>(<span class="hljs-params">{ children, authData }</span>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">AuthContext.Provider</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{authData}</span>&gt;</span>
      {children}
    <span class="hljs-tag">&lt;/<span class="hljs-name">AuthContext.Provider</span>&gt;</span></span>
  );
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> mockAuthData = {
    <span class="hljs-attr">username</span>: <span class="hljs-string">'john_doe'</span>,
    <span class="hljs-attr">email</span>: <span class="hljs-string">'john@example.com'</span>,
    <span class="hljs-attr">role</span>: <span class="hljs-string">'admin'</span>
  };

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>With Provider:<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">AuthProvider</span> <span class="hljs-attr">authData</span>=<span class="hljs-string">{mockAuthData}</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">ProtectedUserInfo</span> /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">AuthProvider</span>&gt;</span>
      
      <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>Without Provider:<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">ProtectedUserInfo</span> /&gt;</span> {/* æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯ */}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<h4 data-id="heading-19">2.3 æ–¹æ¡ˆä¸‰ï¼šè‡ªå®šä¹‰ Hook è¿›è¡Œé˜²æŠ¤</h4>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, { useContext, useDebugValue } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-comment">// åˆ›å»º Context</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">FeatureFlagsContext</span> = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">createContext</span>(<span class="hljs-literal">null</span>);

<span class="hljs-comment">// è‡ªå®šä¹‰ Hook å¸¦æœ‰ Provider æ£€æŸ¥</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">useFeatureFlags</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> context = <span class="hljs-title function_">useContext</span>(<span class="hljs-title class_">FeatureFlagsContext</span>);
  
  <span class="hljs-title function_">useDebugValue</span>(context ? <span class="hljs-string">'FeatureFlags: Available'</span> : <span class="hljs-string">'FeatureFlags: Using Defaults'</span>);
  
  <span class="hljs-keyword">if</span> (context === <span class="hljs-literal">null</span>) {
    <span class="hljs-comment">// è¿”å›å®‰å…¨çš„é»˜è®¤å€¼</span>
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">isEnabled</span>: <span class="hljs-function">(<span class="hljs-params">flag</span>) =&gt;</span> <span class="hljs-literal">false</span>,
      <span class="hljs-attr">getAllFlags</span>: <span class="hljs-function">() =&gt;</span> ({}),
      <span class="hljs-attr">hasProvider</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">error</span>: <span class="hljs-string">'FeatureFlagsProvider is missing. All features are disabled by default.'</span>
    };
  }
  
  <span class="hljs-keyword">return</span> {
    ...context,
    <span class="hljs-attr">hasProvider</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">error</span>: <span class="hljs-literal">null</span>
  };
}

<span class="hljs-comment">// åˆ›å»º Provider</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">FeatureFlagsProvider</span>(<span class="hljs-params">{ flags = {}, children }</span>) {
  <span class="hljs-keyword">const</span> value = {
    <span class="hljs-attr">isEnabled</span>: <span class="hljs-function">(<span class="hljs-params">flagName</span>) =&gt;</span> <span class="hljs-title class_">Boolean</span>(flags[flagName]),
    <span class="hljs-attr">getAllFlags</span>: <span class="hljs-function">() =&gt;</span> ({ ...flags }),
    flags
  };

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">FeatureFlagsContext.Provider</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{value}</span>&gt;</span>
      {children}
    <span class="hljs-tag">&lt;/<span class="hljs-name">FeatureFlagsContext.Provider</span>&gt;</span></span>
  );
}

<span class="hljs-comment">// ä½¿ç”¨è‡ªå®šä¹‰ Hook çš„ç»„ä»¶</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">FeatureComponent</span>(<span class="hljs-params">{ featureName, children }</span>) {
  <span class="hljs-keyword">const</span> { isEnabled, hasProvider, error } = <span class="hljs-title function_">useFeatureFlags</span>();
  
  <span class="hljs-keyword">if</span> (!<span class="hljs-title function_">isEnabled</span>(featureName)) {
    <span class="hljs-keyword">return</span> (
      <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> 
        <span class="hljs-attr">padding:</span> '<span class="hljs-attr">15px</span>', 
        <span class="hljs-attr">margin:</span> '<span class="hljs-attr">10px</span> <span class="hljs-attr">0</span>',
        <span class="hljs-attr">backgroundColor:</span> <span class="hljs-attr">hasProvider</span> ? '#<span class="hljs-attr">fff3cd</span>' <span class="hljs-attr">:</span> '#<span class="hljs-attr">f8d7da</span>',
        <span class="hljs-attr">border:</span> `<span class="hljs-attr">1px</span> <span class="hljs-attr">solid</span> ${<span class="hljs-attr">hasProvider</span> ? '#<span class="hljs-attr">ffeaa7</span>' <span class="hljs-attr">:</span> '#<span class="hljs-attr">f5c6cb</span>'}`,
        <span class="hljs-attr">borderRadius:</span> '<span class="hljs-attr">4px</span>'
      }}&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>
            {hasProvider ? 'ğŸ”’ Feature Disabled' : 'âš ï¸ Provider Missing'}
          <span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Feature "{featureName}" is not available.<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
        {error &amp;&amp; (
          <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">fontSize:</span> '<span class="hljs-attr">0.9em</span>', <span class="hljs-attr">color:</span> '#<span class="hljs-attr">721c24</span>' }}&gt;</span>
            {error}
          <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
        )}
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
    );
  }
  
  <span class="hljs-keyword">return</span> children;
}

<span class="hljs-comment">// åŠŸèƒ½å¼€å…³æ˜¾ç¤ºç»„ä»¶</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">FeaturesDashboard</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> { getAllFlags, hasProvider } = <span class="hljs-title function_">useFeatureFlags</span>();
  <span class="hljs-keyword">const</span> allFlags = <span class="hljs-title function_">getAllFlags</span>();
  
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">padding:</span> '<span class="hljs-attr">20px</span>' }}&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>Features Dashboard<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> 
        <span class="hljs-attr">padding:</span> '<span class="hljs-attr">10px</span>', 
        <span class="hljs-attr">backgroundColor:</span> <span class="hljs-attr">hasProvider</span> ? '#<span class="hljs-attr">d1ecf1</span>' <span class="hljs-attr">:</span> '#<span class="hljs-attr">f8d7da</span>',
        <span class="hljs-attr">border:</span> `<span class="hljs-attr">1px</span> <span class="hljs-attr">solid</span> ${<span class="hljs-attr">hasProvider</span> ? '#<span class="hljs-attr">bee5eb</span>' <span class="hljs-attr">:</span> '#<span class="hljs-attr">f5c6cb</span>'}`,
        <span class="hljs-attr">borderRadius:</span> '<span class="hljs-attr">4px</span>',
        <span class="hljs-attr">marginBottom:</span> '<span class="hljs-attr">20px</span>'
      }}&gt;</span>
        Provider Status: {hasProvider ? 'âœ… Connected' : 'âŒ Missing'}
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>Available Features:<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
        {Object.entries(allFlags).map(([flag, enabled]) =&gt; (
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{flag}</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> 
            <span class="hljs-attr">padding:</span> '<span class="hljs-attr">8px</span>', 
            <span class="hljs-attr">margin:</span> '<span class="hljs-attr">5px</span> <span class="hljs-attr">0</span>',
            <span class="hljs-attr">backgroundColor:</span> <span class="hljs-attr">enabled</span> ? '#<span class="hljs-attr">d4edda</span>' <span class="hljs-attr">:</span> '#<span class="hljs-attr">f8d7da</span>',
            <span class="hljs-attr">border:</span> `<span class="hljs-attr">1px</span> <span class="hljs-attr">solid</span> ${<span class="hljs-attr">enabled</span> ? '#<span class="hljs-attr">c3e6cb</span>' <span class="hljs-attr">:</span> '#<span class="hljs-attr">f5c6cb</span>'}`,
            <span class="hljs-attr">borderRadius:</span> '<span class="hljs-attr">4px</span>'
          }}&gt;</span>
            {flag}: {enabled ? 'âœ… Enabled' : 'âŒ Disabled'}
          <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        ))}
        
        {Object.keys(allFlags).length === 0 &amp;&amp; (
          <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>No features configured<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
        )}
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> featureFlags = {
    <span class="hljs-string">'new-ui'</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-string">'beta-features'</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-string">'export-functionality'</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-string">'advanced-settings'</span>: <span class="hljs-literal">false</span>
  };

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      {/* æœ‰ Provider çš„æƒ…å†µ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">FeatureFlagsProvider</span> <span class="hljs-attr">flags</span>=<span class="hljs-string">{featureFlags}</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">FeaturesDashboard</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">FeatureComponent</span> <span class="hljs-attr">featureName</span>=<span class="hljs-string">"new-ui"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">padding:</span> '<span class="hljs-attr">15px</span>', <span class="hljs-attr">backgroundColor:</span> '#<span class="hljs-attr">e8f5e8</span>', <span class="hljs-attr">margin:</span> '<span class="hljs-attr">10px</span> <span class="hljs-attr">0</span>' }}&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>New UI Feature<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>This is the exciting new UI!<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">FeatureComponent</span>&gt;</span>
        
        <span class="hljs-tag">&lt;<span class="hljs-name">FeatureComponent</span> <span class="hljs-attr">featureName</span>=<span class="hljs-string">"beta-features"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Beta features content (this won't show)<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">FeatureComponent</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">FeatureFlagsProvider</span>&gt;</span>
      
      <span class="hljs-tag">&lt;<span class="hljs-name">hr</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">margin:</span> '<span class="hljs-attr">40px</span> <span class="hljs-attr">0</span>' }} /&gt;</span>
      
      {/* æ²¡æœ‰ Provider çš„æƒ…å†µ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">FeaturesDashboard</span> /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">FeatureComponent</span> <span class="hljs-attr">featureName</span>=<span class="hljs-string">"new-ui"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>This won't show without provider<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">FeatureComponent</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<h4 data-id="heading-20">2.4 æ–¹æ¡ˆå››ï¼šè¿è¡Œæ—¶æ£€æµ‹å’Œé”™è¯¯æŠ¥å‘Š</h4>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, { useContext, useEffect, useRef } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-comment">// åˆ›å»ºå¸¦æ£€æµ‹åŠŸèƒ½çš„ Context</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">AnalyticsContext</span> = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">createContext</span>(<span class="hljs-literal">undefined</span>);

<span class="hljs-comment">// å¼€å‘ç¯å¢ƒä¸‹çš„ä¸¥æ ¼æ¨¡å¼ Hook</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">useStrictContext</span>(<span class="hljs-params">context, contextName = <span class="hljs-string">'Unknown'</span></span>) {
  <span class="hljs-keyword">const</span> contextValue = <span class="hljs-title function_">useContext</span>(context);
  <span class="hljs-keyword">const</span> hasReported = <span class="hljs-title function_">useRef</span>(<span class="hljs-literal">false</span>);
  
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">// åªåœ¨å¼€å‘ç¯å¢ƒä¸‹æ£€æŸ¥ï¼Œä¸”åªæŠ¥å‘Šä¸€æ¬¡</span>
    <span class="hljs-keyword">if</span> (process.<span class="hljs-property">env</span>.<span class="hljs-property">NODE_ENV</span> === <span class="hljs-string">'development'</span> &amp;&amp; 
        contextValue === <span class="hljs-literal">undefined</span> &amp;&amp; 
        !hasReported.<span class="hljs-property">current</span>) {
      
      hasReported.<span class="hljs-property">current</span> = <span class="hljs-literal">true</span>;
      
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(
        <span class="hljs-string">`ğŸš¨ Context Provider Missing: <span class="hljs-subst">${contextName}</span>\n`</span> +
        <span class="hljs-string">`A component is trying to use <span class="hljs-subst">${contextName}</span> but no Provider was found in the component tree.\n`</span> +
        <span class="hljs-string">`This might cause unexpected behavior in your application.\n`</span> +
        <span class="hljs-string">`Please make sure to wrap your components with the appropriate Provider.`</span>
      );
      
      <span class="hljs-comment">// åœ¨å¼€å‘ç¯å¢ƒä¸­æ˜¾ç¤ºè§†è§‰è­¦å‘Š</span>
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-variable language_">window</span> !== <span class="hljs-string">'undefined'</span>) {
        <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
          <span class="hljs-keyword">const</span> warningElement = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'div'</span>);
          warningElement.<span class="hljs-property">style</span>.<span class="hljs-property">cssText</span> = <span class="hljs-string">`
            position: fixed;
            top: 10px;
            right: 10px;
            background: #ff6b6b;
            color: white;
            padding: 15px;
            border-radius: 5px;
            z-index: 10000;
            max-width: 400px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            font-family: system-ui, sans-serif;
            font-size: 14px;
          `</span>;
          warningElement.<span class="hljs-property">innerHTML</span> = <span class="hljs-string">`
            &lt;strong&gt;âš ï¸ Context Provider Missing&lt;/strong&gt;&lt;br&gt;
            &lt;small&gt;<span class="hljs-subst">${contextName}</span> - Check browser console for details&lt;/small&gt;
          `</span>;
          <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">appendChild</span>(warningElement);
          
          <span class="hljs-comment">// è‡ªåŠ¨ç§»é™¤è­¦å‘Š</span>
          <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
            <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">contains</span>(warningElement)) {
              <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">removeChild</span>(warningElement);
            }
          }, <span class="hljs-number">5000</span>);
        }, <span class="hljs-number">100</span>);
      }
    }
  }, [contextValue, contextName]);
  
  <span class="hljs-keyword">return</span> contextValue;
}

<span class="hljs-comment">// Analytics Provider</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">AnalyticsProvider</span>(<span class="hljs-params">{ children, trackingId, enabled = <span class="hljs-literal">true</span> }</span>) {
  <span class="hljs-keyword">const</span> contextValue = {
    <span class="hljs-attr">trackEvent</span>: <span class="hljs-function">(<span class="hljs-params">eventName, properties = {}</span>) =&gt;</span> {
      <span class="hljs-keyword">if</span> (enabled &amp;&amp; trackingId) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`[Analytics] Tracking: <span class="hljs-subst">${eventName}</span>`</span>, properties);
        <span class="hljs-comment">// å®é™…é¡¹ç›®ä¸­è¿™é‡Œä¼šè°ƒç”¨ analytics SDK</span>
      }
    },
    <span class="hljs-attr">trackPageView</span>: <span class="hljs-function">(<span class="hljs-params">pageName</span>) =&gt;</span> {
      <span class="hljs-keyword">if</span> (enabled &amp;&amp; trackingId) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`[Analytics] Page View: <span class="hljs-subst">${pageName}</span>`</span>);
      }
    },
    <span class="hljs-attr">isEnabled</span>: enabled,
    <span class="hljs-attr">hasValidConfig</span>: !!trackingId
  };

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">AnalyticsContext.Provider</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{contextValue}</span>&gt;</span>
      {children}
    <span class="hljs-tag">&lt;/<span class="hljs-name">AnalyticsContext.Provider</span>&gt;</span></span>
  );
}

<span class="hljs-comment">// ä½¿ç”¨ä¸¥æ ¼ Context çš„ç»„ä»¶</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">TrackedButton</span>(<span class="hljs-params">{ onClick, eventName, children, ...props }</span>) {
  <span class="hljs-keyword">const</span> analytics = <span class="hljs-title function_">useStrictContext</span>(<span class="hljs-title class_">AnalyticsContext</span>, <span class="hljs-string">'AnalyticsContext'</span>);
  
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleClick</span> = (<span class="hljs-params">e</span>) =&gt; {
    <span class="hljs-comment">// è°ƒç”¨åŸå§‹ onClick</span>
    onClick?.(e);
    
    <span class="hljs-comment">// è·Ÿè¸ªäº‹ä»¶</span>
    <span class="hljs-keyword">if</span> (analytics) {
      analytics.<span class="hljs-title function_">trackEvent</span>(eventName || <span class="hljs-string">'button_click'</span>, {
        <span class="hljs-attr">buttonText</span>: <span class="hljs-keyword">typeof</span> children === <span class="hljs-string">'string'</span> ? children : <span class="hljs-string">'Unknown'</span>,
        <span class="hljs-attr">timestamp</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">toISOString</span>()
      });
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-comment">// é™çº§å¤„ç†ï¼šåœ¨æ§åˆ¶å°è®°å½•</span>
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`[Analytics Fallback] Event: <span class="hljs-subst">${eventName || <span class="hljs-string">'button_click'</span>}</span>`</span>);
    }
  };
  
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{handleClick}</span> {<span class="hljs-attr">...props</span>}&gt;</span>
      {children}
    <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>
  );
}

<span class="hljs-comment">// é¡µé¢è§†å›¾è·Ÿè¸ªç»„ä»¶</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">TrackedPage</span>(<span class="hljs-params">{ pageName, children }</span>) {
  <span class="hljs-keyword">const</span> analytics = <span class="hljs-title function_">useStrictContext</span>(<span class="hljs-title class_">AnalyticsContext</span>, <span class="hljs-string">'AnalyticsContext'</span>);
  
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">if</span> (analytics) {
      analytics.<span class="hljs-title function_">trackPageView</span>(pageName);
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`[Analytics Fallback] Page View: <span class="hljs-subst">${pageName}</span>`</span>);
    }
  }, [analytics, pageName]);
  
  <span class="hljs-keyword">return</span> children;
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      {/* æœ‰ Provider çš„æƒ…å†µ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">AnalyticsProvider</span> <span class="hljs-attr">trackingId</span>=<span class="hljs-string">"UA-123456789-1"</span> <span class="hljs-attr">enabled</span>=<span class="hljs-string">{true}</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">TrackedPage</span> <span class="hljs-attr">pageName</span>=<span class="hljs-string">"Home Page"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>Home Page with Analytics<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">TrackedButton</span> <span class="hljs-attr">eventName</span>=<span class="hljs-string">"cta_click"</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> alert('Clicked!')}&gt;
              Tracked Button
            <span class="hljs-tag">&lt;/<span class="hljs-name">TrackedButton</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">TrackedPage</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">AnalyticsProvider</span>&gt;</span>
      
      <span class="hljs-tag">&lt;<span class="hljs-name">hr</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">margin:</span> '<span class="hljs-attr">40px</span> <span class="hljs-attr">0</span>' }} /&gt;</span>
      
      {/* æ²¡æœ‰ Provider çš„æƒ…å†µ - ä¼šæ˜¾ç¤ºè­¦å‘Šä½†ä¸ä¼šå´©æºƒ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">TrackedPage</span> <span class="hljs-attr">pageName</span>=<span class="hljs-string">"Standalone Page"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>Standalone Page (No Provider)<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">TrackedButton</span> <span class="hljs-attr">eventName</span>=<span class="hljs-string">"standalone_click"</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> alert('Standalone!')}&gt;
            Standalone Button
          <span class="hljs-tag">&lt;/<span class="hljs-name">TrackedButton</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">TrackedPage</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<h3 data-id="heading-21">3. æœ€ä½³å®è·µæ€»ç»“</h3>
<h4 data-id="heading-22">3.1 é¢„é˜²æªæ–½</h4>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// 1. æ€»æ˜¯æä¾›æœ‰æ„ä¹‰çš„é»˜è®¤å€¼</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">SafeContext</span> = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">createContext</span>({
  <span class="hljs-comment">// æä¾›å®Œæ•´çš„é»˜è®¤çŠ¶æ€</span>
  <span class="hljs-attr">data</span>: <span class="hljs-literal">null</span>,
  <span class="hljs-attr">loading</span>: <span class="hljs-literal">false</span>,
  <span class="hljs-attr">error</span>: <span class="hljs-literal">null</span>,
  <span class="hljs-attr">actions</span>: {
    <span class="hljs-comment">// æä¾›å®‰å…¨çš„ç©ºå‡½æ•°</span>
    <span class="hljs-attr">fetch</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">'No provider found'</span>),
    <span class="hljs-attr">update</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">'No provider found'</span>)
  }
});

<span class="hljs-comment">// 2. åˆ›å»º Provider åŒ…è£…ç»„ä»¶</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">AppProviders</span>(<span class="hljs-params">{ children }</span>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">AuthProvider</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">ThemeProvider</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">FeatureFlagsProvider</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">ErrorBoundary</span>&gt;</span>
            {children}
          <span class="hljs-tag">&lt;/<span class="hljs-name">ErrorBoundary</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">FeatureFlagsProvider</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">ThemeProvider</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">AuthProvider</span>&gt;</span></span>
  );
}

<span class="hljs-comment">// 3. åœ¨åº”ç”¨æ ¹ç»„ä»¶ä¸­ä½¿ç”¨</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">AppProviders</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">MyApp</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">AppProviders</span>&gt;</span></span>
  );
}
</code></pre>
<h4 data-id="heading-23">3.2 é”™è¯¯è¾¹ç•Œé…åˆ</h4>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ContextErrorBoundary</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Component</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">props</span>) {
    <span class="hljs-variable language_">super</span>(props);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = { <span class="hljs-attr">hasError</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">errorInfo</span>: <span class="hljs-literal">null</span> };
  }
  
  <span class="hljs-keyword">static</span> <span class="hljs-title function_">getDerivedStateFromError</span>(<span class="hljs-params">error</span>) {
    <span class="hljs-keyword">return</span> { <span class="hljs-attr">hasError</span>: <span class="hljs-literal">true</span> };
  }
  
  <span class="hljs-title function_">componentDidCatch</span>(<span class="hljs-params">error, errorInfo</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>({ errorInfo });
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Context Error:'</span>, error, errorInfo);
  }
  
  <span class="hljs-title function_">render</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>.<span class="hljs-property">hasError</span>) {
      <span class="hljs-keyword">return</span> (
        <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">padding:</span> '<span class="hljs-attr">20px</span>', <span class="hljs-attr">border:</span> '<span class="hljs-attr">2px</span> <span class="hljs-attr">solid</span> #<span class="hljs-attr">ff6b6b</span>' }}&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>Context Configuration Error<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>There's an issue with context providers in this component tree.<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">details</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">summary</span>&gt;</span>Error Details<span class="hljs-tag">&lt;/<span class="hljs-name">summary</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">pre</span>&gt;</span>{this.state.errorInfo?.componentStack}<span class="hljs-tag">&lt;/<span class="hljs-name">pre</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">details</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
      );
    }
    
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">props</span>.<span class="hljs-property">children</span>;
  }
}
</code></pre>
<h4 data-id="heading-24">3.3 æµ‹è¯•ç­–ç•¥</h4>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// æµ‹è¯•å·¥å…·ï¼šæ¨¡æ‹Ÿç¼ºå°‘ Provider çš„æƒ…å†µ</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">createMissingProviderTest</span>(<span class="hljs-params">Component, contextName</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">MissingProviderTest</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> (
      <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">data-testid</span>=<span class="hljs-string">"missing-provider-test"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Component</span> /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
    );
  };
}

<span class="hljs-comment">// åœ¨æµ‹è¯•ä¸­éªŒè¯é™çº§è¡Œä¸º</span>
<span class="hljs-title function_">describe</span>(<span class="hljs-string">'Context Missing Handling'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title function_">test</span>(<span class="hljs-string">'should use default values when provider is missing'</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> { getByText } = <span class="hljs-title function_">render</span>(<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">UserProfile</span> /&gt;</span></span>);
    <span class="hljs-title function_">expect</span>(<span class="hljs-title function_">getByText</span>(<span class="hljs-string">'Unknown User'</span>)).<span class="hljs-title function_">toBeInTheDocument</span>();
  });
  
  <span class="hljs-title function_">test</span>(<span class="hljs-string">'should show fallback UI when provider is missing'</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> { getByText } = <span class="hljs-title function_">render</span>(<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ProtectedUserInfo</span> /&gt;</span></span>);
    <span class="hljs-title function_">expect</span>(<span class="hljs-title function_">getByText</span>(<span class="hljs-string">'Authentication Provider Missing'</span>)).<span class="hljs-title function_">toBeInTheDocument</span>();
  });
});
</code></pre>
<h3 data-id="heading-25">4. æ€»ç»“</h3>
<p>å½“ React Consumer æ‰¾ä¸åˆ° Provider æ—¶ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼å¤„ç†ï¼š</p>
<ol>
<li><strong>è®¾ç½®åˆç†çš„é»˜è®¤å€¼</strong> - æœ€åŸºç¡€çš„é˜²æŠ¤æªæ–½</li>
<li><strong>é«˜é˜¶ç»„ä»¶åŒ…è£…</strong> - æä¾›ç»Ÿä¸€çš„é”™è¯¯å¤„ç†</li>
<li><strong>è‡ªå®šä¹‰ Hook</strong> - ç°ä»£åŒ–çš„è§£å†³æ–¹æ¡ˆï¼Œæä¾›æ›´å¥½çš„å¼€å‘ä½“éªŒ</li>
<li><strong>è¿è¡Œæ—¶æ£€æµ‹</strong> - å¼€å‘ç¯å¢ƒä¸‹çš„ä¸»åŠ¨è­¦å‘Š</li>
<li><strong>é”™è¯¯è¾¹ç•Œ</strong> - é˜²æ­¢æ•´ä¸ªåº”ç”¨å´©æºƒ</li>
</ol>
<p><strong>æ¨èåšæ³•</strong>ï¼šç»“åˆä½¿ç”¨åˆç†çš„é»˜è®¤å€¼ + è‡ªå®šä¹‰ Hook è¿›è¡Œé˜²æŠ¤ï¼Œåœ¨å¼€å‘ç¯å¢ƒä¸‹æ·»åŠ è¿è¡Œæ—¶æ£€æµ‹ï¼Œåœ¨ç”Ÿäº§ç¯å¢ƒä¸‹æä¾›ä¼˜é›…çš„é™çº§ä½“éªŒã€‚<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f79d9fee49f44d4e96425f9ad6525aa8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YyX6L6wYWxr:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768707575&amp;x-signature=DDcFdpLLGDZAgkubFbruMpCC%2Bpc%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h2 data-id="heading-26">React Consumer æ‰¾ä¸åˆ° Provider çš„å¤„ç†æ–¹æ¡ˆ</h2>
<h3 data-id="heading-27">1. é—®é¢˜æ¦‚è¿°ä¸é»˜è®¤è¡Œä¸º</h3>
<h4 data-id="heading-28">1.1 é»˜è®¤è¡Œä¸º</h4>
<p>å½“ React çš„ Consumer ç»„ä»¶åœ¨ä¸Šä¸‹æ–‡æ ‘ä¸­æ‰¾ä¸åˆ°å¯¹åº”çš„ Provider æ—¶ï¼Œå®ƒä¼šä½¿ç”¨åˆ›å»º Context æ—¶ä¼ é€’çš„<strong>é»˜è®¤å€¼</strong>ä½œä¸º valueã€‚</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// åˆ›å»º Context æ—¶æŒ‡å®šé»˜è®¤å€¼</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">MyContext</span> = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">createContext</span>(<span class="hljs-string">'default value'</span>);

<span class="hljs-comment">// æ²¡æœ‰ Provider æ—¶ï¼ŒConsumer ä¼šä½¿ç”¨ 'default value'</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">MyComponent</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">MyContext.Consumer</span>&gt;</span>
      {value =&gt; <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Value: {value}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>} {/* æ˜¾ç¤º: Value: default value */}
    <span class="hljs-tag">&lt;/<span class="hljs-name">MyContext.Consumer</span>&gt;</span></span>
  );
}
</code></pre>
<h4 data-id="heading-29">1.2 é—®é¢˜ç¤ºä¾‹</h4>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-comment">// åˆ›å»ºå¸¦é»˜è®¤å€¼çš„ Context</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">UserContext</span> = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">createContext</span>({
  <span class="hljs-attr">name</span>: <span class="hljs-string">'Unknown User'</span>,
  <span class="hljs-attr">role</span>: <span class="hljs-string">'guest'</span>,
  <span class="hljs-attr">isLoggedIn</span>: <span class="hljs-literal">false</span>
});

<span class="hljs-comment">// æ²¡æœ‰ Provider åŒ…è£…çš„ç»„ä»¶</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">UserProfile</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">UserContext.Consumer</span>&gt;</span>
      {user =&gt; (
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>User Profile<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Name: {user.name}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Role: {user.role}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Status: {user.isLoggedIn ? 'Logged In' : 'Guest'}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      )}
    <span class="hljs-tag">&lt;/<span class="hljs-name">UserContext.Consumer</span>&gt;</span></span>
  );
}

<span class="hljs-comment">// ç›´æ¥ä½¿ç”¨ï¼Œæ²¡æœ‰ Provider</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">UserProfile</span> /&gt;</span> {/* ä½¿ç”¨é»˜è®¤å€¼ */}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<h3 data-id="heading-30">2. è§£å†³æ–¹æ¡ˆ</h3>
<h4 data-id="heading-31">2.1 æ–¹æ¡ˆä¸€ï¼šè®¾ç½®åˆç†çš„é»˜è®¤å€¼ï¼ˆæ¨èï¼‰</h4>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-comment">// 1. å®šä¹‰å®Œæ•´çš„é»˜è®¤å€¼å¯¹è±¡</span>
<span class="hljs-keyword">const</span> defaultSettings = {
  <span class="hljs-attr">theme</span>: <span class="hljs-string">'light'</span>,
  <span class="hljs-attr">language</span>: <span class="hljs-string">'zh-CN'</span>,
  <span class="hljs-attr">fontSize</span>: <span class="hljs-number">14</span>,
  <span class="hljs-attr">notifications</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">userPreferences</span>: {
    <span class="hljs-attr">autoSave</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">darkMode</span>: <span class="hljs-literal">false</span>
  }
};

<span class="hljs-comment">// 2. åˆ›å»º Context æ—¶æä¾›æœ‰æ„ä¹‰çš„é»˜è®¤å€¼</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">AppSettingsContext</span> = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">createContext</span>(defaultSettings);

<span class="hljs-comment">// 3. åˆ›å»º Provider ç»„ä»¶</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">AppSettingsProvider</span>(<span class="hljs-params">{ children, settings = {} }</span>) {
  <span class="hljs-comment">// åˆå¹¶é»˜è®¤å€¼å’Œä¼ å…¥çš„è®¾ç½®</span>
  <span class="hljs-keyword">const</span> contextValue = {
    ...defaultSettings,
    ...settings,
    <span class="hljs-attr">userPreferences</span>: {
      ...defaultSettings.<span class="hljs-property">userPreferences</span>,
      ...settings.<span class="hljs-property">userPreferences</span>
    }
  };

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">AppSettingsContext.Provider</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{contextValue}</span>&gt;</span>
      {children}
    <span class="hljs-tag">&lt;/<span class="hljs-name">AppSettingsContext.Provider</span>&gt;</span></span>
  );
}

<span class="hljs-comment">// 4. ä½¿ç”¨ Consumer çš„ç»„ä»¶</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">SettingsDisplay</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">AppSettingsContext.Consumer</span>&gt;</span>
      {settings =&gt; (
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> 
          <span class="hljs-attr">padding:</span> '<span class="hljs-attr">20px</span>', 
          <span class="hljs-attr">backgroundColor:</span> <span class="hljs-attr">settings.userPreferences.darkMode</span> ? '#<span class="hljs-attr">333</span>' <span class="hljs-attr">:</span> '#<span class="hljs-attr">fff</span>',
          <span class="hljs-attr">color:</span> <span class="hljs-attr">settings.userPreferences.darkMode</span> ? '#<span class="hljs-attr">fff</span>' <span class="hljs-attr">:</span> '#<span class="hljs-attr">333</span>'
        }}&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>Application Settings<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>Theme: {settings.theme}<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>Language: {settings.language}<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>Font Size: {settings.fontSize}px<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>Notifications: {settings.notifications ? 'On' : 'Off'}<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>Auto Save: {settings.userPreferences.autoSave ? 'Enabled' : 'Disabled'}<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      )}
    <span class="hljs-tag">&lt;/<span class="hljs-name">AppSettingsContext.Consumer</span>&gt;</span></span>
  );
}

<span class="hljs-comment">// 5. ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      {/* æœ‰ Provider çš„æƒ…å†µ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">AppSettingsProvider</span> <span class="hljs-attr">settings</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">theme:</span> '<span class="hljs-attr">dark</span>', <span class="hljs-attr">fontSize:</span> <span class="hljs-attr">16</span> }}&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">SettingsDisplay</span> /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">AppSettingsProvider</span>&gt;</span>
      
      {/* æ²¡æœ‰ Provider çš„æƒ…å†µ - ä½¿ç”¨é»˜è®¤å€¼ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">SettingsDisplay</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<h4 data-id="heading-32">2.2 æ–¹æ¡ˆäºŒï¼šåˆ›å»ºé«˜é˜¶ç»„ä»¶è¿›è¡Œé˜²æŠ¤</h4>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-comment">// åˆ›å»º Context</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">AuthContext</span> = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">createContext</span>(<span class="hljs-literal">null</span>);

<span class="hljs-comment">// é«˜é˜¶ç»„ä»¶ï¼šæ£€æŸ¥ Provider æ˜¯å¦å­˜åœ¨</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">withAuthProviderCheck</span>(<span class="hljs-params">WrappedComponent, context</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">AuthCheckedComponent</span>(<span class="hljs-params">props</span>) {
    <span class="hljs-keyword">return</span> (
      <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">context.Consumer</span>&gt;</span>
        {value =&gt; {
          // æ£€æŸ¥æ˜¯å¦æ‰¾åˆ°äº† Provider
          if (value === null) {
            return (
              <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> 
                <span class="hljs-attr">padding:</span> '<span class="hljs-attr">20px</span>', 
                <span class="hljs-attr">border:</span> '<span class="hljs-attr">2px</span> <span class="hljs-attr">solid</span> #<span class="hljs-attr">ff6b6b</span>', 
                <span class="hljs-attr">backgroundColor:</span> '#<span class="hljs-attr">ffeaea</span>',
                <span class="hljs-attr">borderRadius:</span> '<span class="hljs-attr">8px</span>'
              }}&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>âš ï¸ Authentication Provider Missing<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>
                  This component requires an AuthProvider. 
                  Please wrap your application with AuthProvider.
                <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">details</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">marginTop:</span> '<span class="hljs-attr">10px</span>' }}&gt;</span>
                  <span class="hljs-tag">&lt;<span class="hljs-name">summary</span>&gt;</span>Debug Information<span class="hljs-tag">&lt;/<span class="hljs-name">summary</span>&gt;</span>
                  <span class="hljs-tag">&lt;<span class="hljs-name">pre</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> 
                    <span class="hljs-attr">backgroundColor:</span> '#<span class="hljs-attr">f8f9fa</span>', 
                    <span class="hljs-attr">padding:</span> '<span class="hljs-attr">10px</span>', 
                    <span class="hljs-attr">borderRadius:</span> '<span class="hljs-attr">4px</span>',
                    <span class="hljs-attr">fontSize:</span> '<span class="hljs-attr">12px</span>'
                  }}&gt;</span>
                    Component: {WrappedComponent.name}
                    Context: {context.displayName || 'Anonymous Context'}
                  <span class="hljs-tag">&lt;/<span class="hljs-name">pre</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">details</span>&gt;</span>
              <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            );
          }
          
          return <span class="hljs-tag">&lt;<span class="hljs-name">WrappedComponent</span> {<span class="hljs-attr">...props</span>} /&gt;</span>;
        }}
      <span class="hljs-tag">&lt;/<span class="hljs-name">context.Consumer</span>&gt;</span></span>
    );
  };
}

<span class="hljs-comment">// ç”¨æˆ·ä¿¡æ¯ç»„ä»¶</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">UserInfo</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">AuthContext.Consumer</span>&gt;</span>
      {auth =&gt; (
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">padding:</span> '<span class="hljs-attr">20px</span>', <span class="hljs-attr">border:</span> '<span class="hljs-attr">1px</span> <span class="hljs-attr">solid</span> #<span class="hljs-attr">ddd</span>' }}&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>User Information<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
          {auth ? (
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Username: {auth.username}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Email: {auth.email}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Role: {auth.role}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
          ) : (
            <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>No authentication data available<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
          )}
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      )}
    <span class="hljs-tag">&lt;/<span class="hljs-name">AuthContext.Consumer</span>&gt;</span></span>
  );
}

<span class="hljs-comment">// ä½¿ç”¨é«˜é˜¶ç»„ä»¶åŒ…è£…</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">ProtectedUserInfo</span> = <span class="hljs-title function_">withAuthProviderCheck</span>(<span class="hljs-title class_">UserInfo</span>, <span class="hljs-title class_">AuthContext</span>);

<span class="hljs-comment">// Auth Provider ç»„ä»¶</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">AuthProvider</span>(<span class="hljs-params">{ children, authData }</span>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">AuthContext.Provider</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{authData}</span>&gt;</span>
      {children}
    <span class="hljs-tag">&lt;/<span class="hljs-name">AuthContext.Provider</span>&gt;</span></span>
  );
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> mockAuthData = {
    <span class="hljs-attr">username</span>: <span class="hljs-string">'john_doe'</span>,
    <span class="hljs-attr">email</span>: <span class="hljs-string">'john@example.com'</span>,
    <span class="hljs-attr">role</span>: <span class="hljs-string">'admin'</span>
  };

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>With Provider:<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">AuthProvider</span> <span class="hljs-attr">authData</span>=<span class="hljs-string">{mockAuthData}</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">ProtectedUserInfo</span> /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">AuthProvider</span>&gt;</span>
      
      <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>Without Provider:<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">ProtectedUserInfo</span> /&gt;</span> {/* æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯ */}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<h4 data-id="heading-33">2.3 æ–¹æ¡ˆä¸‰ï¼šè‡ªå®šä¹‰ Hook è¿›è¡Œé˜²æŠ¤</h4>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, { useContext, useDebugValue } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-comment">// åˆ›å»º Context</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">FeatureFlagsContext</span> = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">createContext</span>(<span class="hljs-literal">null</span>);

<span class="hljs-comment">// è‡ªå®šä¹‰ Hook å¸¦æœ‰ Provider æ£€æŸ¥</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">useFeatureFlags</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> context = <span class="hljs-title function_">useContext</span>(<span class="hljs-title class_">FeatureFlagsContext</span>);
  
  <span class="hljs-title function_">useDebugValue</span>(context ? <span class="hljs-string">'FeatureFlags: Available'</span> : <span class="hljs-string">'FeatureFlags: Using Defaults'</span>);
  
  <span class="hljs-keyword">if</span> (context === <span class="hljs-literal">null</span>) {
    <span class="hljs-comment">// è¿”å›å®‰å…¨çš„é»˜è®¤å€¼</span>
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">isEnabled</span>: <span class="hljs-function">(<span class="hljs-params">flag</span>) =&gt;</span> <span class="hljs-literal">false</span>,
      <span class="hljs-attr">getAllFlags</span>: <span class="hljs-function">() =&gt;</span> ({}),
      <span class="hljs-attr">hasProvider</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">error</span>: <span class="hljs-string">'FeatureFlagsProvider is missing. All features are disabled by default.'</span>
    };
  }
  
  <span class="hljs-keyword">return</span> {
    ...context,
    <span class="hljs-attr">hasProvider</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">error</span>: <span class="hljs-literal">null</span>
  };
}

<span class="hljs-comment">// åˆ›å»º Provider</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">FeatureFlagsProvider</span>(<span class="hljs-params">{ flags = {}, children }</span>) {
  <span class="hljs-keyword">const</span> value = {
    <span class="hljs-attr">isEnabled</span>: <span class="hljs-function">(<span class="hljs-params">flagName</span>) =&gt;</span> <span class="hljs-title class_">Boolean</span>(flags[flagName]),
    <span class="hljs-attr">getAllFlags</span>: <span class="hljs-function">() =&gt;</span> ({ ...flags }),
    flags
  };

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">FeatureFlagsContext.Provider</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{value}</span>&gt;</span>
      {children}
    <span class="hljs-tag">&lt;/<span class="hljs-name">FeatureFlagsContext.Provider</span>&gt;</span></span>
  );
}

<span class="hljs-comment">// ä½¿ç”¨è‡ªå®šä¹‰ Hook çš„ç»„ä»¶</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">FeatureComponent</span>(<span class="hljs-params">{ featureName, children }</span>) {
  <span class="hljs-keyword">const</span> { isEnabled, hasProvider, error } = <span class="hljs-title function_">useFeatureFlags</span>();
  
  <span class="hljs-keyword">if</span> (!<span class="hljs-title function_">isEnabled</span>(featureName)) {
    <span class="hljs-keyword">return</span> (
      <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> 
        <span class="hljs-attr">padding:</span> '<span class="hljs-attr">15px</span>', 
        <span class="hljs-attr">margin:</span> '<span class="hljs-attr">10px</span> <span class="hljs-attr">0</span>',
        <span class="hljs-attr">backgroundColor:</span> <span class="hljs-attr">hasProvider</span> ? '#<span class="hljs-attr">fff3cd</span>' <span class="hljs-attr">:</span> '#<span class="hljs-attr">f8d7da</span>',
        <span class="hljs-attr">border:</span> `<span class="hljs-attr">1px</span> <span class="hljs-attr">solid</span> ${<span class="hljs-attr">hasProvider</span> ? '#<span class="hljs-attr">ffeaa7</span>' <span class="hljs-attr">:</span> '#<span class="hljs-attr">f5c6cb</span>'}`,
        <span class="hljs-attr">borderRadius:</span> '<span class="hljs-attr">4px</span>'
      }}&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>
            {hasProvider ? 'ğŸ”’ Feature Disabled' : 'âš ï¸ Provider Missing'}
          <span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Feature "{featureName}" is not available.<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
        {error &amp;&amp; (
          <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">fontSize:</span> '<span class="hljs-attr">0.9em</span>', <span class="hljs-attr">color:</span> '#<span class="hljs-attr">721c24</span>' }}&gt;</span>
            {error}
          <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
        )}
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
    );
  }
  
  <span class="hljs-keyword">return</span> children;
}

<span class="hljs-comment">// åŠŸèƒ½å¼€å…³æ˜¾ç¤ºç»„ä»¶</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">FeaturesDashboard</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> { getAllFlags, hasProvider } = <span class="hljs-title function_">useFeatureFlags</span>();
  <span class="hljs-keyword">const</span> allFlags = <span class="hljs-title function_">getAllFlags</span>();
  
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">padding:</span> '<span class="hljs-attr">20px</span>' }}&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>Features Dashboard<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> 
        <span class="hljs-attr">padding:</span> '<span class="hljs-attr">10px</span>', 
        <span class="hljs-attr">backgroundColor:</span> <span class="hljs-attr">hasProvider</span> ? '#<span class="hljs-attr">d1ecf1</span>' <span class="hljs-attr">:</span> '#<span class="hljs-attr">f8d7da</span>',
        <span class="hljs-attr">border:</span> `<span class="hljs-attr">1px</span> <span class="hljs-attr">solid</span> ${<span class="hljs-attr">hasProvider</span> ? '#<span class="hljs-attr">bee5eb</span>' <span class="hljs-attr">:</span> '#<span class="hljs-attr">f5c6cb</span>'}`,
        <span class="hljs-attr">borderRadius:</span> '<span class="hljs-attr">4px</span>',
        <span class="hljs-attr">marginBottom:</span> '<span class="hljs-attr">20px</span>'
      }}&gt;</span>
        Provider Status: {hasProvider ? 'âœ… Connected' : 'âŒ Missing'}
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>Available Features:<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
        {Object.entries(allFlags).map(([flag, enabled]) =&gt; (
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{flag}</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> 
            <span class="hljs-attr">padding:</span> '<span class="hljs-attr">8px</span>', 
            <span class="hljs-attr">margin:</span> '<span class="hljs-attr">5px</span> <span class="hljs-attr">0</span>',
            <span class="hljs-attr">backgroundColor:</span> <span class="hljs-attr">enabled</span> ? '#<span class="hljs-attr">d4edda</span>' <span class="hljs-attr">:</span> '#<span class="hljs-attr">f8d7da</span>',
            <span class="hljs-attr">border:</span> `<span class="hljs-attr">1px</span> <span class="hljs-attr">solid</span> ${<span class="hljs-attr">enabled</span> ? '#<span class="hljs-attr">c3e6cb</span>' <span class="hljs-attr">:</span> '#<span class="hljs-attr">f5c6cb</span>'}`,
            <span class="hljs-attr">borderRadius:</span> '<span class="hljs-attr">4px</span>'
          }}&gt;</span>
            {flag}: {enabled ? 'âœ… Enabled' : 'âŒ Disabled'}
          <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        ))}
        
        {Object.keys(allFlags).length === 0 &amp;&amp; (
          <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>No features configured<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
        )}
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> featureFlags = {
    <span class="hljs-string">'new-ui'</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-string">'beta-features'</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-string">'export-functionality'</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-string">'advanced-settings'</span>: <span class="hljs-literal">false</span>
  };

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      {/* æœ‰ Provider çš„æƒ…å†µ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">FeatureFlagsProvider</span> <span class="hljs-attr">flags</span>=<span class="hljs-string">{featureFlags}</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">FeaturesDashboard</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">FeatureComponent</span> <span class="hljs-attr">featureName</span>=<span class="hljs-string">"new-ui"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">padding:</span> '<span class="hljs-attr">15px</span>', <span class="hljs-attr">backgroundColor:</span> '#<span class="hljs-attr">e8f5e8</span>', <span class="hljs-attr">margin:</span> '<span class="hljs-attr">10px</span> <span class="hljs-attr">0</span>' }}&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>New UI Feature<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>This is the exciting new UI!<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">FeatureComponent</span>&gt;</span>
        
        <span class="hljs-tag">&lt;<span class="hljs-name">FeatureComponent</span> <span class="hljs-attr">featureName</span>=<span class="hljs-string">"beta-features"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Beta features content (this won't show)<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">FeatureComponent</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">FeatureFlagsProvider</span>&gt;</span>
      
      <span class="hljs-tag">&lt;<span class="hljs-name">hr</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">margin:</span> '<span class="hljs-attr">40px</span> <span class="hljs-attr">0</span>' }} /&gt;</span>
      
      {/* æ²¡æœ‰ Provider çš„æƒ…å†µ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">FeaturesDashboard</span> /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">FeatureComponent</span> <span class="hljs-attr">featureName</span>=<span class="hljs-string">"new-ui"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>This won't show without provider<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">FeatureComponent</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<h4 data-id="heading-34">2.4 æ–¹æ¡ˆå››ï¼šè¿è¡Œæ—¶æ£€æµ‹å’Œé”™è¯¯æŠ¥å‘Š</h4>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, { useContext, useEffect, useRef } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-comment">// åˆ›å»ºå¸¦æ£€æµ‹åŠŸèƒ½çš„ Context</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">AnalyticsContext</span> = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">createContext</span>(<span class="hljs-literal">undefined</span>);

<span class="hljs-comment">// å¼€å‘ç¯å¢ƒä¸‹çš„ä¸¥æ ¼æ¨¡å¼ Hook</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">useStrictContext</span>(<span class="hljs-params">context, contextName = <span class="hljs-string">'Unknown'</span></span>) {
  <span class="hljs-keyword">const</span> contextValue = <span class="hljs-title function_">useContext</span>(context);
  <span class="hljs-keyword">const</span> hasReported = <span class="hljs-title function_">useRef</span>(<span class="hljs-literal">false</span>);
  
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">// åªåœ¨å¼€å‘ç¯å¢ƒä¸‹æ£€æŸ¥ï¼Œä¸”åªæŠ¥å‘Šä¸€æ¬¡</span>
    <span class="hljs-keyword">if</span> (process.<span class="hljs-property">env</span>.<span class="hljs-property">NODE_ENV</span> === <span class="hljs-string">'development'</span> &amp;&amp; 
        contextValue === <span class="hljs-literal">undefined</span> &amp;&amp; 
        !hasReported.<span class="hljs-property">current</span>) {
      
      hasReported.<span class="hljs-property">current</span> = <span class="hljs-literal">true</span>;
      
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(
        <span class="hljs-string">`ğŸš¨ Context Provider Missing: <span class="hljs-subst">${contextName}</span>\n`</span> +
        <span class="hljs-string">`A component is trying to use <span class="hljs-subst">${contextName}</span> but no Provider was found in the component tree.\n`</span> +
        <span class="hljs-string">`This might cause unexpected behavior in your application.\n`</span> +
        <span class="hljs-string">`Please make sure to wrap your components with the appropriate Provider.`</span>
      );
      
      <span class="hljs-comment">// åœ¨å¼€å‘ç¯å¢ƒä¸­æ˜¾ç¤ºè§†è§‰è­¦å‘Š</span>
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-variable language_">window</span> !== <span class="hljs-string">'undefined'</span>) {
        <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
          <span class="hljs-keyword">const</span> warningElement = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'div'</span>);
          warningElement.<span class="hljs-property">style</span>.<span class="hljs-property">cssText</span> = <span class="hljs-string">`
            position: fixed;
            top: 10px;
            right: 10px;
            background: #ff6b6b;
            color: white;
            padding: 15px;
            border-radius: 5px;
            z-index: 10000;
            max-width: 400px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            font-family: system-ui, sans-serif;
            font-size: 14px;
          `</span>;
          warningElement.<span class="hljs-property">innerHTML</span> = <span class="hljs-string">`
            &lt;strong&gt;âš ï¸ Context Provider Missing&lt;/strong&gt;&lt;br&gt;
            &lt;small&gt;<span class="hljs-subst">${contextName}</span> - Check browser console for details&lt;/small&gt;
          `</span>;
          <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">appendChild</span>(warningElement);
          
          <span class="hljs-comment">// è‡ªåŠ¨ç§»é™¤è­¦å‘Š</span>
          <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
            <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">contains</span>(warningElement)) {
              <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">removeChild</span>(warningElement);
            }
          }, <span class="hljs-number">5000</span>);
        }, <span class="hljs-number">100</span>);
      }
    }
  }, [contextValue, contextName]);
  
  <span class="hljs-keyword">return</span> contextValue;
}

<span class="hljs-comment">// Analytics Provider</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">AnalyticsProvider</span>(<span class="hljs-params">{ children, trackingId, enabled = <span class="hljs-literal">true</span> }</span>) {
  <span class="hljs-keyword">const</span> contextValue = {
    <span class="hljs-attr">trackEvent</span>: <span class="hljs-function">(<span class="hljs-params">eventName, properties = {}</span>) =&gt;</span> {
      <span class="hljs-keyword">if</span> (enabled &amp;&amp; trackingId) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`[Analytics] Tracking: <span class="hljs-subst">${eventName}</span>`</span>, properties);
        <span class="hljs-comment">// å®é™…é¡¹ç›®ä¸­è¿™é‡Œä¼šè°ƒç”¨ analytics SDK</span>
      }
    },
    <span class="hljs-attr">trackPageView</span>: <span class="hljs-function">(<span class="hljs-params">pageName</span>) =&gt;</span> {
      <span class="hljs-keyword">if</span> (enabled &amp;&amp; trackingId) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`[Analytics] Page View: <span class="hljs-subst">${pageName}</span>`</span>);
      }
    },
    <span class="hljs-attr">isEnabled</span>: enabled,
    <span class="hljs-attr">hasValidConfig</span>: !!trackingId
  };

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">AnalyticsContext.Provider</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{contextValue}</span>&gt;</span>
      {children}
    <span class="hljs-tag">&lt;/<span class="hljs-name">AnalyticsContext.Provider</span>&gt;</span></span>
  );
}

<span class="hljs-comment">// ä½¿ç”¨ä¸¥æ ¼ Context çš„ç»„ä»¶</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">TrackedButton</span>(<span class="hljs-params">{ onClick, eventName, children, ...props }</span>) {
  <span class="hljs-keyword">const</span> analytics = <span class="hljs-title function_">useStrictContext</span>(<span class="hljs-title class_">AnalyticsContext</span>, <span class="hljs-string">'AnalyticsContext'</span>);
  
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleClick</span> = (<span class="hljs-params">e</span>) =&gt; {
    <span class="hljs-comment">// è°ƒç”¨åŸå§‹ onClick</span>
    onClick?.(e);
    
    <span class="hljs-comment">// è·Ÿè¸ªäº‹ä»¶</span>
    <span class="hljs-keyword">if</span> (analytics) {
      analytics.<span class="hljs-title function_">trackEvent</span>(eventName || <span class="hljs-string">'button_click'</span>, {
        <span class="hljs-attr">buttonText</span>: <span class="hljs-keyword">typeof</span> children === <span class="hljs-string">'string'</span> ? children : <span class="hljs-string">'Unknown'</span>,
        <span class="hljs-attr">timestamp</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">toISOString</span>()
      });
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-comment">// é™çº§å¤„ç†ï¼šåœ¨æ§åˆ¶å°è®°å½•</span>
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`[Analytics Fallback] Event: <span class="hljs-subst">${eventName || <span class="hljs-string">'button_click'</span>}</span>`</span>);
    }
  };
  
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{handleClick}</span> {<span class="hljs-attr">...props</span>}&gt;</span>
      {children}
    <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>
  );
}

<span class="hljs-comment">// é¡µé¢è§†å›¾è·Ÿè¸ªç»„ä»¶</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">TrackedPage</span>(<span class="hljs-params">{ pageName, children }</span>) {
  <span class="hljs-keyword">const</span> analytics = <span class="hljs-title function_">useStrictContext</span>(<span class="hljs-title class_">AnalyticsContext</span>, <span class="hljs-string">'AnalyticsContext'</span>);
  
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">if</span> (analytics) {
      analytics.<span class="hljs-title function_">trackPageView</span>(pageName);
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`[Analytics Fallback] Page View: <span class="hljs-subst">${pageName}</span>`</span>);
    }
  }, [analytics, pageName]);
  
  <span class="hljs-keyword">return</span> children;
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      {/* æœ‰ Provider çš„æƒ…å†µ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">AnalyticsProvider</span> <span class="hljs-attr">trackingId</span>=<span class="hljs-string">"UA-123456789-1"</span> <span class="hljs-attr">enabled</span>=<span class="hljs-string">{true}</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">TrackedPage</span> <span class="hljs-attr">pageName</span>=<span class="hljs-string">"Home Page"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>Home Page with Analytics<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">TrackedButton</span> <span class="hljs-attr">eventName</span>=<span class="hljs-string">"cta_click"</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> alert('Clicked!')}&gt;
              Tracked Button
            <span class="hljs-tag">&lt;/<span class="hljs-name">TrackedButton</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">TrackedPage</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">AnalyticsProvider</span>&gt;</span>
      
      <span class="hljs-tag">&lt;<span class="hljs-name">hr</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">margin:</span> '<span class="hljs-attr">40px</span> <span class="hljs-attr">0</span>' }} /&gt;</span>
      
      {/* æ²¡æœ‰ Provider çš„æƒ…å†µ - ä¼šæ˜¾ç¤ºè­¦å‘Šä½†ä¸ä¼šå´©æºƒ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">TrackedPage</span> <span class="hljs-attr">pageName</span>=<span class="hljs-string">"Standalone Page"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>Standalone Page (No Provider)<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">TrackedButton</span> <span class="hljs-attr">eventName</span>=<span class="hljs-string">"standalone_click"</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> alert('Standalone!')}&gt;
            Standalone Button
          <span class="hljs-tag">&lt;/<span class="hljs-name">TrackedButton</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">TrackedPage</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<h3 data-id="heading-35">3. æœ€ä½³å®è·µæ€»ç»“</h3>
<h4 data-id="heading-36">3.1 é¢„é˜²æªæ–½</h4>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// 1. æ€»æ˜¯æä¾›æœ‰æ„ä¹‰çš„é»˜è®¤å€¼</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">SafeContext</span> = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">createContext</span>({
  <span class="hljs-comment">// æä¾›å®Œæ•´çš„é»˜è®¤çŠ¶æ€</span>
  <span class="hljs-attr">data</span>: <span class="hljs-literal">null</span>,
  <span class="hljs-attr">loading</span>: <span class="hljs-literal">false</span>,
  <span class="hljs-attr">error</span>: <span class="hljs-literal">null</span>,
  <span class="hljs-attr">actions</span>: {
    <span class="hljs-comment">// æä¾›å®‰å…¨çš„ç©ºå‡½æ•°</span>
    <span class="hljs-attr">fetch</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">'No provider found'</span>),
    <span class="hljs-attr">update</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">'No provider found'</span>)
  }
});

<span class="hljs-comment">// 2. åˆ›å»º Provider åŒ…è£…ç»„ä»¶</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">AppProviders</span>(<span class="hljs-params">{ children }</span>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">AuthProvider</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">ThemeProvider</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">FeatureFlagsProvider</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">ErrorBoundary</span>&gt;</span>
            {children}
          <span class="hljs-tag">&lt;/<span class="hljs-name">ErrorBoundary</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">FeatureFlagsProvider</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">ThemeProvider</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">AuthProvider</span>&gt;</span></span>
  );
}

<span class="hljs-comment">// 3. åœ¨åº”ç”¨æ ¹ç»„ä»¶ä¸­ä½¿ç”¨</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">AppProviders</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">MyApp</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">AppProviders</span>&gt;</span></span>
  );
}
</code></pre>
<h4 data-id="heading-37">3.2 é”™è¯¯è¾¹ç•Œé…åˆ</h4>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ContextErrorBoundary</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Component</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">props</span>) {
    <span class="hljs-variable language_">super</span>(props);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = { <span class="hljs-attr">hasError</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">errorInfo</span>: <span class="hljs-literal">null</span> };
  }
  
  <span class="hljs-keyword">static</span> <span class="hljs-title function_">getDerivedStateFromError</span>(<span class="hljs-params">error</span>) {
    <span class="hljs-keyword">return</span> { <span class="hljs-attr">hasError</span>: <span class="hljs-literal">true</span> };
  }
  
  <span class="hljs-title function_">componentDidCatch</span>(<span class="hljs-params">error, errorInfo</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>({ errorInfo });
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Context Error:'</span>, error, errorInfo);
  }
  
  <span class="hljs-title function_">render</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>.<span class="hljs-property">hasError</span>) {
      <span class="hljs-keyword">return</span> (
        <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">padding:</span> '<span class="hljs-attr">20px</span>', <span class="hljs-attr">border:</span> '<span class="hljs-attr">2px</span> <span class="hljs-attr">solid</span> #<span class="hljs-attr">ff6b6b</span>' }}&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>Context Configuration Error<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>There's an issue with context providers in this component tree.<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">details</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">summary</span>&gt;</span>Error Details<span class="hljs-tag">&lt;/<span class="hljs-name">summary</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">pre</span>&gt;</span>{this.state.errorInfo?.componentStack}<span class="hljs-tag">&lt;/<span class="hljs-name">pre</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">details</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
      );
    }
    
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">props</span>.<span class="hljs-property">children</span>;
  }
}
</code></pre>
<h4 data-id="heading-38">3.3 æµ‹è¯•ç­–ç•¥</h4>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// æµ‹è¯•å·¥å…·ï¼šæ¨¡æ‹Ÿç¼ºå°‘ Provider çš„æƒ…å†µ</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">createMissingProviderTest</span>(<span class="hljs-params">Component, contextName</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">MissingProviderTest</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> (
      <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">data-testid</span>=<span class="hljs-string">"missing-provider-test"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Component</span> /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
    );
  };
}

<span class="hljs-comment">// åœ¨æµ‹è¯•ä¸­éªŒè¯é™çº§è¡Œä¸º</span>
<span class="hljs-title function_">describe</span>(<span class="hljs-string">'Context Missing Handling'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title function_">test</span>(<span class="hljs-string">'should use default values when provider is missing'</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> { getByText } = <span class="hljs-title function_">render</span>(<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">UserProfile</span> /&gt;</span></span>);
    <span class="hljs-title function_">expect</span>(<span class="hljs-title function_">getByText</span>(<span class="hljs-string">'Unknown User'</span>)).<span class="hljs-title function_">toBeInTheDocument</span>();
  });
  
  <span class="hljs-title function_">test</span>(<span class="hljs-string">'should show fallback UI when provider is missing'</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> { getByText } = <span class="hljs-title function_">render</span>(<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ProtectedUserInfo</span> /&gt;</span></span>);
    <span class="hljs-title function_">expect</span>(<span class="hljs-title function_">getByText</span>(<span class="hljs-string">'Authentication Provider Missing'</span>)).<span class="hljs-title function_">toBeInTheDocument</span>();
  });
});
</code></pre>
<h3 data-id="heading-39">4. æ€»ç»“</h3>
<p>å½“ React Consumer æ‰¾ä¸åˆ° Provider æ—¶ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼å¤„ç†ï¼š</p>
<ol>
<li><strong>è®¾ç½®åˆç†çš„é»˜è®¤å€¼</strong> - æœ€åŸºç¡€çš„é˜²æŠ¤æªæ–½</li>
<li><strong>é«˜é˜¶ç»„ä»¶åŒ…è£…</strong> - æä¾›ç»Ÿä¸€çš„é”™è¯¯å¤„ç†</li>
<li><strong>è‡ªå®šä¹‰ Hook</strong> - ç°ä»£åŒ–çš„è§£å†³æ–¹æ¡ˆï¼Œæä¾›æ›´å¥½çš„å¼€å‘ä½“éªŒ</li>
<li><strong>è¿è¡Œæ—¶æ£€æµ‹</strong> - å¼€å‘ç¯å¢ƒä¸‹çš„ä¸»åŠ¨è­¦å‘Š</li>
<li><strong>é”™è¯¯è¾¹ç•Œ</strong> - é˜²æ­¢æ•´ä¸ªåº”ç”¨å´©æºƒ</li>
</ol>
<p><strong>æ¨èåšæ³•</strong>ï¼šç»“åˆä½¿ç”¨åˆç†çš„é»˜è®¤å€¼ + è‡ªå®šä¹‰ Hook è¿›è¡Œé˜²æŠ¤ï¼Œåœ¨å¼€å‘ç¯å¢ƒä¸‹æ·»åŠ è¿è¡Œæ—¶æ£€æµ‹ï¼Œåœ¨ç”Ÿäº§ç¯å¢ƒä¸‹æä¾›ä¼˜é›…çš„é™çº§ä½“éªŒã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[C è¯­è¨€è´ªå¿ƒç®—æ³•å®æˆ˜ï¼šè§£å†³ç»å…¸æ´»åŠ¨é€‰æ‹©é—®é¢˜]]></title>    <link>https://juejin.cn/post/7593296804109402152</link>    <guid>https://juejin.cn/post/7593296804109402152</guid>    <pubDate>2026-01-11T00:59:56.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7593296804109402152" data-draft-id="7590705425134403593" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="C è¯­è¨€è´ªå¿ƒç®—æ³•å®æˆ˜ï¼šè§£å†³ç»å…¸æ´»åŠ¨é€‰æ‹©é—®é¢˜"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-11T00:59:56.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°æ¨åŒå­¦49"/> <meta itemprop="url" content="https://juejin.cn/user/1189004976589664"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            C è¯­è¨€è´ªå¿ƒç®—æ³•å®æˆ˜ï¼šè§£å†³ç»å…¸æ´»åŠ¨é€‰æ‹©é—®é¢˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1189004976589664/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°æ¨åŒå­¦49
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-11T00:59:56.000Z" title="Sun Jan 11 2026 00:59:56 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">C è¯­è¨€è´ªå¿ƒç®—æ³•å®æˆ˜ï¼šè§£å†³ç»å…¸æ´»åŠ¨é€‰æ‹©é—®é¢˜</h2>
<p>æ´»åŠ¨é€‰æ‹©é—®é¢˜æ˜¯è´ªå¿ƒç®—æ³•çš„å…¸å‹åº”ç”¨åœºæ™¯ï¼Œæ ¸å¿ƒç›®æ ‡æ˜¯åœ¨ä¸€ç»„äº’æ–¥çš„æ´»åŠ¨ä¸­é€‰æ‹©æœ€å¤šçš„äº’ä¸å†²çªæ´»åŠ¨ã€‚æœ¬æ–‡é€šè¿‡å®Œæ•´çš„ C è¯­è¨€ä»£ç å®ç°ï¼Œè¯¦è§£ â€œæŒ‰ç»“æŸæ—¶é—´æ’åº + ä¼˜å…ˆé€‰ç»“æŸæœ€æ—©æ´»åŠ¨â€ çš„è´ªå¿ƒç­–ç•¥ï¼Œæ‹†è§£æ’åºã€å†²çªåˆ¤æ–­ã€ç»“æœè¾“å‡ºçš„å…¨æµç¨‹ï¼Œå¸®åŠ©æŒæ¡è´ªå¿ƒç®—æ³•çš„æ ¸å¿ƒæ€æƒ³ä¸å·¥ç¨‹å®ç°æŠ€å·§ã€‚</p>
<h3 data-id="heading-1">ä¸€ã€æ´»åŠ¨é€‰æ‹©é—®é¢˜æ ¸å¿ƒè§„åˆ™</h3>
<h4 data-id="heading-2">1. é—®é¢˜æè¿°</h4>
<p>ç»™å®š<code>n</code>ä¸ªæ´»åŠ¨ï¼Œæ¯ä¸ªæ´»åŠ¨æœ‰å”¯ä¸€çš„å¼€å§‹æ—¶é—´<code>s[i]</code>å’Œç»“æŸæ—¶é—´<code>f[i]</code>ï¼Œæ´»åŠ¨åœ¨åŒä¸€èµ„æºï¼ˆå¦‚ä¼šè®®å®¤ï¼‰è¿›è¡Œï¼Œè¦æ±‚é€‰æ‹©<strong>æœ€å¤šæ•°é‡</strong>çš„äº’ä¸å†²çªæ´»åŠ¨ï¼ˆå³ä»»æ„ä¸¤ä¸ªé€‰ä¸­æ´»åŠ¨çš„æ—¶é—´åŒºé—´æ— é‡å ï¼‰ã€‚</p>
<h4 data-id="heading-3">2. è´ªå¿ƒç­–ç•¥ï¼ˆæœ€ä¼˜è§£æ ¸å¿ƒï¼‰</h4>
<ul>
<li><strong>æ ¸å¿ƒæ€æƒ³</strong>ï¼šä¼˜å…ˆé€‰æ‹©ç»“æŸæ—¶é—´æœ€æ—©çš„æ´»åŠ¨ï¼Œä¸ºåç»­æ´»åŠ¨ç•™å‡ºæ›´å¤šå¯å®‰æ’æ—¶é—´ï¼›</li>
<li><strong>ç­–ç•¥ä¾æ®</strong>ï¼šç»“æŸæ—¶é—´è¶Šæ—©ï¼Œå‰©ä½™å¯å®‰æ’æ—¶é—´è¶Šé•¿ï¼Œèƒ½é€‰æ‹©çš„æ´»åŠ¨æ•°é‡è¶Šå¤šï¼ˆè¯¥ç­–ç•¥æ»¡è¶³ â€œè´ªå¿ƒé€‰æ‹©æ€§è´¨â€ å’Œ â€œæœ€ä¼˜å­ç»“æ„â€ï¼Œå¯æ¨å¯¼å‡ºå…¨å±€æœ€ä¼˜è§£ï¼‰ï¼›</li>
<li><strong>å…³é”®å‰æ</strong>ï¼šå…ˆå°†æ‰€æœ‰æ´»åŠ¨æŒ‰ç»“æŸæ—¶é—´ä»å°åˆ°å¤§æ’åºã€‚</li>
</ul>
<h4 data-id="heading-4">3. å†²çªåˆ¤æ–­è§„åˆ™</h4>
<p>è‹¥å½“å‰æ´»åŠ¨çš„å¼€å§‹æ—¶é—´ â‰¥ ä¸Šä¸€ä¸ªé€‰ä¸­æ´»åŠ¨çš„ç»“æŸæ—¶é—´ â†’ ä¸¤ä¸ªæ´»åŠ¨æ— å†²çªï¼Œå¯é€‰ä¸­ã€‚</p>
<h3 data-id="heading-5">äºŒã€å®Œæ•´ä»£ç å®ç°ä¸è§£æ</h3>
<p>c</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-markdown" lang="markdown">/<span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span>**
<span class="hljs-emphasis">*æ–‡ä»¶åç§°ï¼šActivity_Arrangements.c
*</span>ä½œè€…:czy
<span class="hljs-emphasis">*é‚®ç®±ï¼šcaozhiyang_0613@163.com
*</span>åˆ›å»ºæ—¥æœŸ:2025/12/25
<span class="hljs-emphasis">*ä¿®æ”¹æ—¥æœŸï¼š2025/12/26
			2025/12/28
*</span>æ–‡ä»¶åŠŸèƒ½ï¼šè´ªå¿ƒç®—æ³•è§£å†³æ´»åŠ¨é€‰æ‹©é—®é¢˜
<span class="hljs-emphasis">*æ ¸å¿ƒæ€è·¯ï¼š
*</span>  1. æ’åºï¼šç”¨å†’æ³¡æ’åºå°†æ´»åŠ¨æŒ‰ç»“æŸæ—¶é—´ä»å°åˆ°å¤§æ’åºï¼ˆè´ªå¿ƒå‰æï¼‰ï¼›
<span class="hljs-bullet">*</span>  2. è´ªå¿ƒé€‰æ‹©ï¼šä¼˜å…ˆé€‰ç»“æŸæœ€æ—©çš„æ´»åŠ¨ï¼Œæœ€å¤§åŒ–å…¼å®¹æ´»åŠ¨æ•°é‡ï¼›
<span class="hljs-bullet">*</span>  3. æ ¸å¿ƒé€»è¾‘ï¼šé€‰ä¸­çš„æ´»åŠ¨å¼€å§‹æ—¶é—´ â‰¥ ä¸Šä¸€ä¸ªæ´»åŠ¨ç»“æŸæ—¶é—´ â†’ æ— å†²çªã€‚
<span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-emphasis">*/

#include<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">stdio.h</span>&gt;</span></span>

#define MAX 1000
/<span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span>
*</span>å‡½æ•°åç§°ï¼šswap
<span class="hljs-emphasis">*å‡½æ•°åŠŸèƒ½: äº¤æ¢ä¸¤ä¸ªæ•´æ•°çš„å€¼ï¼ˆæŒ‡é’ˆå®ç°ï¼‰
*</span>è¾“å…¥å‚æ•°: 
<span class="hljs-bullet">*</span>   <span class="hljs-emphasis">*a - ç¬¬ä¸€ä¸ªæ•´æ•°çš„æŒ‡é’ˆ
*</span>   <span class="hljs-emphasis">*b - ç¬¬äºŒä¸ªæ•´æ•°çš„æŒ‡é’ˆ
*</span>è¿”å›å‚æ•°: æ— 
<span class="hljs-emphasis">*åˆ›å»ºæ—¶é—´:2025/12/25
*</span>ä¿®æ”¹æ—¶é—´ï¼š2025/12/26
<span class="hljs-emphasis">*å‡½æ•°ä½œè€…: czy
*</span>æ³¨æ„äº‹é¡¹ï¼šç”¨äºäº¤æ¢æ´»åŠ¨çš„å¼€å§‹/ç»“æŸæ—¶é—´ï¼Œä¿è¯æ’åºæ—¶æ´»åŠ¨çš„æ—¶é—´å¯¹åº”
<span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">**/
void swap(int <span class="hljs-emphasis">*a,int *</span>b)
{
    int temp = <span class="hljs-emphasis">*a; // ä¸´æ—¶å˜é‡å­˜å‚¨açš„å€¼ï¼Œé¿å…è¦†ç›–
    *</span>a = <span class="hljs-emphasis">*b;       // å°†bçš„å€¼èµ‹ç»™a
    *</span>b = temp;     // å°†ä¸´æ—¶å˜é‡çš„å€¼èµ‹ç»™b
}

/**</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span>**
<span class="hljs-emphasis">*å‡½æ•°åç§°ï¼šbubblesort
*</span>å‡½æ•°åŠŸèƒ½: å†’æ³¡æ’åº - æŒ‰æ´»åŠ¨ç»“æŸæ—¶é—´ä»å°åˆ°å¤§æ’åº
<span class="hljs-emphasis">*è¾“å…¥å‚æ•°: 
*</span>   a[<span class="hljs-string">2</span>][<span class="hljs-symbol">1000</span>] - äºŒç»´æ•°ç»„ï¼ša[<span class="hljs-string">0</span>][<span class="hljs-symbol">i</span>]=ç¬¬iä¸ªæ´»åŠ¨å¼€å§‹æ—¶é—´ï¼Œa[<span class="hljs-string">1</span>][<span class="hljs-symbol">i</span>]=ç¬¬iä¸ªæ´»åŠ¨ç»“æŸæ—¶é—´
<span class="hljs-bullet">*</span>   n          - æ´»åŠ¨æ€»æ•°
<span class="hljs-emphasis">*è¿”å›å‚æ•°: æ— 
*</span>åˆ›å»ºæ—¶é—´:2025/12/25
<span class="hljs-emphasis">*ä¿®æ”¹æ—¶é—´ï¼š1-----2025/12/26
		  2----2025/12/28
*</span>å‡½æ•°ä½œè€…: czy
<span class="hljs-emphasis">*æ ¸å¿ƒé€»è¾‘ï¼šæ¯”è¾ƒç›¸é‚»æ´»åŠ¨çš„ç»“æŸæ—¶é—´ï¼Œäº¤æ¢ä½ç½®ï¼ˆåŒæ—¶äº¤æ¢å¼€å§‹æ—¶é—´ï¼Œä¿è¯æ—¶é—´å¯¹åº”ï¼‰
<span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">**/
void bubblesort(int a[<span class="hljs-string">2</span>][<span class="hljs-symbol">MAX</span>],int index[MAX],int n)
{
    // å¤–å±‚å¾ªç¯ï¼šæ§åˆ¶æ’åºè½®æ•°ï¼ˆå…±nè½®ï¼‰
    for(int i=0; i<span class="xml">&lt;n; i++)
    {
        // å†…å±‚å¾ªç¯ï¼šæ¯è½®æ¯”è¾ƒåˆ°n-i-1ï¼ˆåiä¸ªå…ƒç´ å·²æ’åºï¼‰
        for(int j=0; j&lt;n-i-1; j++)
        {
            // è‹¥å‰ä¸€ä¸ªæ´»åŠ¨ç»“æŸæ—¶é—´ &gt;</span> åä¸€ä¸ª â†’ éœ€è¦äº¤æ¢
            if(a[<span class="hljs-string">1</span>][<span class="hljs-symbol">j</span>] &gt; a[<span class="hljs-string">1</span>][<span class="hljs-symbol">j+1</span>])
            {
                swap(&amp;a[<span class="hljs-string">1</span>][<span class="hljs-symbol">j</span>], &amp;a[<span class="hljs-string">1</span>][<span class="hljs-symbol">j+1</span>]); // äº¤æ¢ç»“æŸæ—¶é—´
                swap(&amp;a[<span class="hljs-string">0</span>][<span class="hljs-symbol">j</span>], &amp;a[<span class="hljs-string">0</span>][<span class="hljs-symbol">j+1</span>]); // åŒæ­¥äº¤æ¢å¼€å§‹æ—¶é—´ï¼ˆå…³é”®ï¼ä¿è¯æ—¶é—´å¯¹åº”ï¼‰
                swap(&amp;index[j],&amp;index[j+1]);// åŒæ­¥äº¤æ¢æ´»åŠ¨ç¼–å·ï¼ˆå…³é”®ï¼‰				
            }
        }
    }
}

/**</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span>*</span>*
<span class="hljs-emphasis">*å‡½æ•°åç§°ï¼šselect_activity
*</span>å‡½æ•°åŠŸèƒ½: è´ªå¿ƒç®—æ³•é€‰æ‹©æœ€å¤šçš„äº’ä¸å†²çªæ´»åŠ¨
<span class="hljs-emphasis">*è¾“å…¥å‚æ•°: 
*</span>   a[<span class="hljs-string">2</span>][<span class="hljs-symbol">MAX</span>] - å·²æŒ‰ç»“æŸæ—¶é—´æ’åºçš„æ´»åŠ¨æ•°ç»„ï¼ˆa[0]=å¼€å§‹ï¼Œa[1]=ç»“æŸï¼‰
<span class="hljs-bullet">*</span>   n          - æ´»åŠ¨æ€»æ•°
<span class="hljs-emphasis">*è¿”å›å‚æ•°: æœ€å¤šèƒ½é€‰æ‹©çš„å…¼å®¹æ´»åŠ¨æ•°é‡ï¼ˆnâ‰¤0æ—¶è¿”å›0ï¼‰
*</span>åˆ›å»ºæ—¶é—´:2025/12/25
<span class="hljs-emphasis">*ä¿®æ”¹æ—¶é—´ï¼š2025/12/26
2025/12/28
*</span>å‡½æ•°ä½œè€…: czy
<span class="hljs-emphasis">*è´ªå¿ƒç­–ç•¥ï¼šä¼˜å…ˆé€‰ç»“æŸæœ€æ—©çš„æ´»åŠ¨ï¼Œä¸ºåç»­æ´»åŠ¨ç•™å‡ºæ›´å¤šæ—¶é—´
<span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">**/
int select_activity(int a[<span class="hljs-string">2</span>][<span class="hljs-symbol">MAX</span>],int index[MAX],int n,int selected_idx[MAX])
{
    // è¾¹ç•Œæ¡ä»¶ï¼šæ´»åŠ¨æ•°é‡â‰¤0ï¼Œæç¤ºé”™è¯¯å¹¶è¿”å›0
    if(n &lt;= 0)
    {
        printf("é”™è¯¯ï¼šæ´»åŠ¨ä¸ªæ•°å¿…é¡»ä¸ºæ­£æ•´æ•°ï¼\n");
        return 0;
    }
    
    int count = 1;                // è‡³å°‘é€‰1ä¸ªæ´»åŠ¨ï¼ˆç»“æŸæœ€æ—©çš„ç¬¬ä¸€ä¸ªæ´»åŠ¨ï¼‰
    int lastfinish = a[<span class="hljs-string">1</span>][<span class="hljs-symbol">0</span>];     // è®°å½•ä¸Šä¸€ä¸ªé€‰ä¸­æ´»åŠ¨çš„ç»“æŸæ—¶é—´ï¼ˆåˆå§‹ä¸ºç¬¬ä¸€ä¸ªæ´»åŠ¨ï¼‰
    selected_idx[0]=index[0];
    
    // éå†å‰©ä½™æ´»åŠ¨ï¼ˆä»ç¬¬2ä¸ªå¼€å§‹ï¼‰
    for(int i=1; i<span class="xml">&lt;n; i++)
    {
        // æ ¸å¿ƒåˆ¤æ–­ï¼šå½“å‰æ´»åŠ¨å¼€å§‹æ—¶é—´ â‰¥ ä¸Šä¸€ä¸ªæ´»åŠ¨ç»“æŸæ—¶é—´ â†’ æ— å†²çªï¼Œå¯é€‰
        if(a[0][i] &gt;</span>= lastfinish)
        {
        	selected_idx[count]=index[i];
            count++;                      // é€‰ä¸­æ´»åŠ¨ï¼Œè®¡æ•°+1
            lastfinish = a[<span class="hljs-string">1</span>][<span class="hljs-symbol">i</span>];         // æ›´æ–°ä¸Šä¸€ä¸ªæ´»åŠ¨çš„ç»“æŸæ—¶é—´
        }
    }
    return count; // è¿”å›æœ€å¤šå¯é€‰æ‹©çš„æ´»åŠ¨æ•°
}

/**</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">***
*å‡½æ•°åç§°ï¼šmain
*å‡½æ•°åŠŸèƒ½: ä¸»å‡½æ•° - è¾“å…¥æ´»åŠ¨æ•°æ®ã€è°ƒç”¨æ’åº+è´ªå¿ƒå‡½æ•°ã€è¾“å‡ºç»“æœ
*è¾“å…¥å‚æ•°: æ— 
*è¿”å›å‚æ•°: 
*   0 - ç¨‹åºæ­£å¸¸é€€å‡º
*   1 - ç¨‹åºå¼‚å¸¸é€€å‡ºï¼ˆè¾“å…¥æ— æ•ˆæ—¶ï¼‰
*åˆ›å»ºæ—¶é—´:2025/12/26
*ä¿®æ”¹æ—¶é—´ï¼š2025/12/26
*å‡½æ•°ä½œè€…:czy
**</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span>/
int main()
{
    int n;                // æ´»åŠ¨ä¸ªæ•°
    int a[<span class="hljs-string">2</span>][<span class="hljs-symbol">MAX</span>];       // å­˜å‚¨æ´»åŠ¨æ—¶é—´ï¼ša[<span class="hljs-string">0</span>][<span class="hljs-symbol">i</span>]=å¼€å§‹ï¼Œa[<span class="hljs-string">1</span>][<span class="hljs-symbol">i</span>]=ç»“æŸ
    int index[MAX]; 	// æ´»åŠ¨åŸå§‹ç¼–å·ï¼ˆ1~n
    int selected_idx[MAX];//å­˜å‚¨é€‰ä¸­çš„æ´»åŠ¨åŸå§‹ç¼–å·
    
    // æç¤ºç”¨æˆ·è¾“å…¥æ´»åŠ¨ä¸ªæ•°
    printf("===== æ´»åŠ¨é€‰æ‹©é—®é¢˜ï¼ˆè´ªå¿ƒç®—æ³•ï¼‰=====\n");
    printf("è¯·è¾“å…¥æ´»åŠ¨ä¸ªæ•°ï¼š\n");
    scanf("%d", &amp;n);
    
    // è¾“å…¥æ ¡éªŒï¼šæ´»åŠ¨ä¸ªæ•°å¿…é¡»ä¸ºæ­£æ•´æ•°
    if(n &lt;= 0 || n &gt; MAX)
    {
        printf("é”™è¯¯ï¼šæ´»åŠ¨ä¸ªæ•°å¿…é¡»ä¸º1~%dä¹‹é—´çš„æ­£æ•´æ•°ï¼\n",MAX);
        return 1; // é0è¿”å›å€¼è¡¨ç¤ºç¨‹åºå¼‚å¸¸é€€å‡º
    }
    
    // æç¤ºç”¨æˆ·è¾“å…¥æ¯ä¸ªæ´»åŠ¨çš„å¼€å§‹æ—¶é—´å’Œç»“æŸæ—¶é—´
    printf("è¯·ä¾æ¬¡è¾“å…¥æ¯ä¸ªæ´»åŠ¨çš„ã€Œå¼€å§‹æ—¶é—´ ç»“æŸæ—¶é—´ã€ï¼ˆç©ºæ ¼åˆ†éš”ï¼‰ï¼š\n");
    for(int i=0; i<span class="xml">&lt;n; i++)
    {
    	index[i]=i+1;
        printf("æ´»åŠ¨%dï¼š", i+1); // æç¤ºå½“å‰è¾“å…¥çš„æ˜¯ç¬¬å‡ ä¸ªæ´»åŠ¨ï¼Œæ›´å‹å¥½
        scanf("%d %d", &amp;a[0][i], &amp;a[1][i]);
    }
    
    // æ­¥éª¤1ï¼šæŒ‰ç»“æŸæ—¶é—´æ’åºï¼ˆè´ªå¿ƒç®—æ³•çš„å‰æï¼‰
    bubblesort(a, index , n);
    
    // æ­¥éª¤2ï¼šè´ªå¿ƒé€‰æ‹©æœ€å¤šçš„å…¼å®¹æ´»åŠ¨
    int result = select_activity(a, index,n,selected_idx);
    
    // è¾“å‡ºç»“æœï¼ˆè¡¥å……è¯´æ˜ï¼Œæ›´æ˜“ç†è§£ï¼‰
    printf("\n====æœ€ç»ˆé€‰æ‹©ç»“æœ===\n");
    printf("\næœ€å¤šèƒ½é€‰æ‹©çš„äº’ä¸å†²çªæ´»åŠ¨æ•°é‡ï¼š%d\n", result);
	printf("é€‰ä¸­çš„æ´»åŠ¨ä¸ºï¼š\n");
	// éå†æ‰€æœ‰é€‰ä¸­çš„æ´»åŠ¨ï¼ˆresultæ˜¯é€‰ä¸­çš„æ´»åŠ¨æ€»æ•°ï¼‰
	for(int i=0;i&lt;result;i++)
	{
		int pos=0; // åˆå§‹åŒ–posä¸º0ï¼šç”¨äºå­˜å‚¨â€œé€‰ä¸­ç¼–å·â€åœ¨æ’åºåindexæ•°ç»„ä¸­çš„ä½ç½®
		// éå†æ’åºåçš„indexæ•°ç»„ï¼ˆæ‰¾é€‰ä¸­ç¼–å·å¯¹åº”çš„ä½ç½®ï¼‰
		for(int j =0;j&lt;n;j++)
		{
		 // æ ¸å¿ƒåˆ¤æ–­ï¼šæ‰¾åˆ°â€œæ’åºåindexæ•°ç»„ä¸­ = é€‰ä¸­æ´»åŠ¨ç¼–å·â€çš„ä½ç½®
			if(index[j] == selected_idx[i])
			{
				pos = j;// è®°å½•è¯¥ä½ç½®
				break; // æ‰¾åˆ°åç«‹å³é€€å‡ºå¾ªç¯ï¼Œæå‡æ•ˆç‡
			}
		}
		printf("æ´»åŠ¨%d:å¼€å§‹æ—¶é—´=%d , ç»“æŸæ—¶é—´=%d\n",selected_idx[i],a[0][pos],a[1][pos]);
	}

    return 0; // ç¨‹åºæ­£å¸¸é€€å‡º
}
</span></span></code></pre>
<h3 data-id="heading-6">ä¸‰ã€æ ¸å¿ƒæ¨¡å—æ‹†è§£</h3>
<h4 data-id="heading-7">1. å·¥å…·å‡½æ•°ï¼šswapï¼ˆæŒ‡é’ˆäº¤æ¢ï¼‰</h4>
<p>c</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-ini" lang="ini">void swap(int *a,int *b)
{
    int <span class="hljs-attr">temp</span> = *a<span class="hljs-comment">;</span>
    *<span class="hljs-attr">a</span> = *b<span class="hljs-comment">;</span>
    *<span class="hljs-attr">b</span> = temp<span class="hljs-comment">;</span>
}
</code></pre>
<ul>
<li><strong>ä½œç”¨</strong>ï¼šäº¤æ¢ä¸¤ä¸ªæ•´æ•°çš„å€¼ï¼Œç”¨äºæ’åºæ—¶åŒæ­¥äº¤æ¢æ´»åŠ¨çš„å¼€å§‹æ—¶é—´ã€ç»“æŸæ—¶é—´ã€åŸå§‹ç¼–å·ï¼›</li>
<li><strong>æ ¸å¿ƒ</strong>ï¼šé€šè¿‡æŒ‡é’ˆæ“ä½œç›´æ¥ä¿®æ”¹åŸå˜é‡å€¼ï¼Œé¿å…å€¼ä¼ é€’å¯¼è‡´çš„æ— æ•ˆäº¤æ¢ã€‚</li>
</ul>
<h4 data-id="heading-8">2. æ’åºæ¨¡å—ï¼šbubblesortï¼ˆæŒ‰ç»“æŸæ—¶é—´æ’åºï¼‰</h4>
<p>c</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-css" lang="css">void bubblesort(int <span class="hljs-selector-tag">a</span><span class="hljs-selector-attr">[2]</span><span class="hljs-selector-attr">[MAX]</span>,int index<span class="hljs-selector-attr">[MAX]</span>,int n)
{
    for(int <span class="hljs-selector-tag">i</span>=<span class="hljs-number">0</span>; <span class="hljs-selector-tag">i</span>&lt;n; <span class="hljs-selector-tag">i</span>++)
    {
        for(int j=<span class="hljs-number">0</span>; j&lt;n-<span class="hljs-selector-tag">i</span>-<span class="hljs-number">1</span>; j++)
        {
            if(<span class="hljs-selector-tag">a</span><span class="hljs-selector-attr">[1]</span><span class="hljs-selector-attr">[j]</span> &gt; <span class="hljs-selector-tag">a</span><span class="hljs-selector-attr">[1]</span><span class="hljs-selector-attr">[j+1]</span>)
            {
                swap(&amp;<span class="hljs-selector-tag">a</span><span class="hljs-selector-attr">[1]</span><span class="hljs-selector-attr">[j]</span>, &amp;<span class="hljs-selector-tag">a</span><span class="hljs-selector-attr">[1]</span><span class="hljs-selector-attr">[j+1]</span>); // äº¤æ¢ç»“æŸæ—¶é—´
                swap(&amp;<span class="hljs-selector-tag">a</span><span class="hljs-selector-attr">[0]</span><span class="hljs-selector-attr">[j]</span>, &amp;<span class="hljs-selector-tag">a</span><span class="hljs-selector-attr">[0]</span><span class="hljs-selector-attr">[j+1]</span>); // åŒæ­¥äº¤æ¢å¼€å§‹æ—¶é—´
                swap(&amp;index<span class="hljs-selector-attr">[j]</span>,&amp;index<span class="hljs-selector-attr">[j+1]</span>);// åŒæ­¥äº¤æ¢æ´»åŠ¨ç¼–å·
            }
        }
    }
}
</code></pre>
<ul>
<li><strong>æ ¸å¿ƒé€»è¾‘</strong>ï¼šå†’æ³¡æ’åºçš„æ ¸å¿ƒæ˜¯ â€œç›¸é‚»æ¯”è¾ƒã€é€†åºäº¤æ¢â€ï¼Œæ­¤å¤„æŒ‰<strong>ç»“æŸæ—¶é—´å‡åº</strong>æ’åºï¼ˆè´ªå¿ƒç®—æ³•çš„å‰æï¼‰ï¼›</li>
<li><strong>å…³é”®ç»†èŠ‚</strong>ï¼šäº¤æ¢ç»“æŸæ—¶é—´æ—¶ï¼Œå¿…é¡»åŒæ­¥äº¤æ¢å¼€å§‹æ—¶é—´å’Œæ´»åŠ¨åŸå§‹ç¼–å·ï¼Œå¦åˆ™ä¼šå‡ºç° â€œæ—¶é—´ä¸ç¼–å·ä¸åŒ¹é…â€ çš„é”™è¯¯ã€‚</li>
</ul>
<h4 data-id="heading-9">3. è´ªå¿ƒæ ¸å¿ƒï¼šselect_activityï¼ˆé€‰æ‹©æœ€å¤šå…¼å®¹æ´»åŠ¨ï¼‰</h4>
<p>c</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-ini" lang="ini">int select_activity(int a<span class="hljs-section">[2]</span><span class="hljs-section">[MAX]</span>,int index<span class="hljs-section">[MAX]</span>,int n,int selected_idx<span class="hljs-section">[MAX]</span>)
{
    if(n &lt;= 0) { printf("é”™è¯¯ï¼šæ´»åŠ¨ä¸ªæ•°å¿…é¡»ä¸ºæ­£æ•´æ•°ï¼\n")<span class="hljs-comment">; return 0; }</span>
    
    int <span class="hljs-attr">count</span> = <span class="hljs-number">1</span><span class="hljs-comment">;                // åˆå§‹é€‰ä¸­ç¬¬ä¸€ä¸ªï¼ˆç»“æŸæœ€æ—©çš„ï¼‰æ´»åŠ¨</span>
    int <span class="hljs-attr">lastfinish</span> = a[<span class="hljs-number">1</span>][<span class="hljs-number">0</span>]<span class="hljs-comment">;     // è®°å½•ä¸Šä¸€ä¸ªæ´»åŠ¨çš„ç»“æŸæ—¶é—´</span>
    selected_idx<span class="hljs-section">[0]</span>=index<span class="hljs-section">[0]</span><span class="hljs-comment">;</span>
    
    for(int <span class="hljs-attr">i</span>=<span class="hljs-number">1</span><span class="hljs-comment">; i&lt;n; i++)</span>
    {
        if(a<span class="hljs-section">[0]</span><span class="hljs-section">[i]</span> &gt;= lastfinish) // æ— å†²çªåˆ¤æ–­
        {
        	selected_idx<span class="hljs-section">[count]</span>=index<span class="hljs-section">[i]</span><span class="hljs-comment">;</span>
            count++<span class="hljs-comment">;</span>
            <span class="hljs-attr">lastfinish</span> = a[<span class="hljs-number">1</span>][i]<span class="hljs-comment">;</span>
        }
    }
    return count<span class="hljs-comment">;</span>
}
</code></pre>
<ul>
<li>
<p><strong>è´ªå¿ƒç­–ç•¥è½åœ°</strong>ï¼š</p>
<ol>
<li>åˆå§‹é€‰ä¸­ç»“æŸæ—¶é—´æœ€æ—©çš„æ´»åŠ¨ï¼ˆæ’åºåçš„ç¬¬ä¸€ä¸ªï¼‰ï¼›</li>
<li>éå†å‰©ä½™æ´»åŠ¨ï¼Œä»…é€‰æ‹© â€œå¼€å§‹æ—¶é—´ â‰¥ ä¸Šä¸€ä¸ªæ´»åŠ¨ç»“æŸæ—¶é—´â€ çš„æ´»åŠ¨ï¼›</li>
<li>æ¯é€‰ä¸­ä¸€ä¸ªæ´»åŠ¨ï¼Œæ›´æ–° â€œä¸Šä¸€ä¸ªç»“æŸæ—¶é—´â€ï¼Œä¿è¯åç»­åˆ¤æ–­çš„å‡†ç¡®æ€§ï¼›</li>
</ol>
</li>
<li>
<p><strong>è¿”å›å€¼</strong>ï¼šæœ€å¤šå¯é€‰æ‹©çš„äº’ä¸å†²çªæ´»åŠ¨æ•°é‡ã€‚</p>
</li>
</ul>
<h4 data-id="heading-10">4. ä¸»å‡½æ•°ï¼šæµç¨‹æ•´åˆä¸ç»“æœè¾“å‡º</h4>
<h5 data-id="heading-11">ï¼ˆ1ï¼‰è¾“å…¥ä¸æ ¡éªŒ</h5>
<p>c</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-perl" lang="perl">scanf(<span class="hljs-string">"%d"</span>, &amp;n);
<span class="hljs-keyword">if</span>(n &lt;= <span class="hljs-number">0</span> || n &gt; MAX)
{
    <span class="hljs-keyword">printf</span>(<span class="hljs-string">"é”™è¯¯ï¼šæ´»åŠ¨ä¸ªæ•°å¿…é¡»ä¸º1~%dä¹‹é—´çš„æ­£æ•´æ•°ï¼\n"</span>,MAX);
    <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;
}
</code></pre>
<ul>
<li>æ ¡éªŒæ´»åŠ¨æ•°é‡çš„åˆæ³•æ€§ï¼Œé¿å…æ•°ç»„è¶Šç•Œæˆ–æ— æ•ˆè®¡ç®—ã€‚</li>
</ul>
<h5 data-id="heading-12">ï¼ˆ2ï¼‰æ•°æ®è¾“å…¥</h5>
<p>c</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-css" lang="css">for(int <span class="hljs-selector-tag">i</span>=<span class="hljs-number">0</span>; <span class="hljs-selector-tag">i</span>&lt;n; <span class="hljs-selector-tag">i</span>++)
{
    index<span class="hljs-selector-attr">[i]</span>=<span class="hljs-selector-tag">i</span>+<span class="hljs-number">1</span>;
    printf("æ´»åŠ¨%dï¼š", <span class="hljs-selector-tag">i</span>+<span class="hljs-number">1</span>);
    scanf("%d %d", &amp;<span class="hljs-selector-tag">a</span><span class="hljs-selector-attr">[0]</span><span class="hljs-selector-attr">[i]</span>, &amp;<span class="hljs-selector-tag">a</span><span class="hljs-selector-attr">[1]</span><span class="hljs-selector-attr">[i]</span>);
}
</code></pre>
<ul>
<li>ä¸ºæ¯ä¸ªæ´»åŠ¨åˆ†é…åŸå§‹ç¼–å·ï¼ˆ1~nï¼‰ï¼Œæ–¹ä¾¿åç»­è¾“å‡ºæ—¶è¯†åˆ«æ´»åŠ¨ï¼›</li>
<li>æç¤ºå¼è¾“å…¥æå‡ç”¨æˆ·ä½“éªŒã€‚</li>
</ul>
<h5 data-id="heading-13">ï¼ˆ3ï¼‰ç»“æœè¾“å‡º</h5>
<p>c</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-ini" lang="ini">for(int <span class="hljs-attr">i</span>=<span class="hljs-number">0</span><span class="hljs-comment">;i&lt;result;i++)</span>
{
    int <span class="hljs-attr">pos</span>=<span class="hljs-number">0</span><span class="hljs-comment">;</span>
    for(int <span class="hljs-attr">j</span> =<span class="hljs-number">0</span><span class="hljs-comment">;j&lt;n;j++)</span>
    {
        if(index<span class="hljs-section">[j]</span> == selected_idx<span class="hljs-section">[i]</span>)
        {
            <span class="hljs-attr">pos</span> = j<span class="hljs-comment">;</span>
            break<span class="hljs-comment">;</span>
        }
    }
    printf("æ´»åŠ¨%d:å¼€å§‹æ—¶é—´=%d , ç»“æŸæ—¶é—´=%d\n",selected_idx<span class="hljs-section">[i]</span>,a<span class="hljs-section">[0]</span><span class="hljs-section">[pos]</span>,a<span class="hljs-section">[1]</span><span class="hljs-section">[pos]</span>)<span class="hljs-comment">;</span>
}
</code></pre>
<ul>
<li>æ ¸å¿ƒï¼šé€šè¿‡åŸå§‹ç¼–å·åŒ¹é…æ’åºåçš„æ´»åŠ¨æ—¶é—´ï¼Œä¿è¯è¾“å‡ºçš„æ˜¯æ´»åŠ¨çš„åŸå§‹ä¿¡æ¯ï¼›</li>
<li>ç»†èŠ‚ï¼šæ‰¾åˆ°åŒ¹é…ä½ç½®åç«‹å³<code>break</code>ï¼Œé¿å…æ— æ•ˆå¾ªç¯ã€‚</li>
</ul>
<h3 data-id="heading-14">å››ã€è¿è¡Œç»“æœç¤ºä¾‹</h3>
<h4 data-id="heading-15">è¾“å…¥ç¤ºä¾‹</h4>
<p>plaintext</p>
<pre><code class="hljs language-diff" lang="diff"><span class="hljs-comment">===== æ´»åŠ¨é€‰æ‹©é—®é¢˜ï¼ˆè´ªå¿ƒç®—æ³•ï¼‰=====</span>
è¯·è¾“å…¥æ´»åŠ¨ä¸ªæ•°ï¼š
5
è¯·ä¾æ¬¡è¾“å…¥æ¯ä¸ªæ´»åŠ¨çš„ã€Œå¼€å§‹æ—¶é—´ ç»“æŸæ—¶é—´ã€ï¼ˆç©ºæ ¼åˆ†éš”ï¼‰ï¼š
æ´»åŠ¨1ï¼š1 4
æ´»åŠ¨2ï¼š3 5
æ´»åŠ¨3ï¼š0 6
æ´»åŠ¨4ï¼š5 7
æ´»åŠ¨5ï¼š8 9
</code></pre>
<h4 data-id="heading-16">è¾“å‡ºç¤ºä¾‹</h4>
<p>plaintext</p>
<pre><code class="hljs language-makefile" lang="makefile">====æœ€ç»ˆé€‰æ‹©ç»“æœ===

æœ€å¤šèƒ½é€‰æ‹©çš„äº’ä¸å†²çªæ´»åŠ¨æ•°é‡ï¼š3
é€‰ä¸­çš„æ´»åŠ¨ä¸ºï¼š
<span class="hljs-section">æ´»åŠ¨1:å¼€å§‹æ—¶é—´=1 , ç»“æŸæ—¶é—´=4</span>
<span class="hljs-section">æ´»åŠ¨4:å¼€å§‹æ—¶é—´=5 , ç»“æŸæ—¶é—´=7</span>
<span class="hljs-section">æ´»åŠ¨5:å¼€å§‹æ—¶é—´=8 , ç»“æŸæ—¶é—´=9</span>
</code></pre>
<h4 data-id="heading-17">ç»“æœéªŒè¯</h4>
<ul>
<li>
<p>æ’åºåæ´»åŠ¨æŒ‰ç»“æŸæ—¶é—´ä¸ºï¼šæ´»åŠ¨ 1ï¼ˆ1,4ï¼‰ã€æ´»åŠ¨ 2ï¼ˆ3,5ï¼‰ã€æ´»åŠ¨ 3ï¼ˆ0,6ï¼‰ã€æ´»åŠ¨ 4ï¼ˆ5,7ï¼‰ã€æ´»åŠ¨ 5ï¼ˆ8,9ï¼‰ï¼›</p>
</li>
<li>
<p>è´ªå¿ƒé€‰æ‹©ï¼š</p>
<ol>
<li>é€‰æ´»åŠ¨ 1ï¼ˆç»“æŸ 4ï¼‰ï¼›</li>
<li>è·³è¿‡æ´»åŠ¨ 2ï¼ˆå¼€å§‹ 3&lt;4ï¼‰ã€æ´»åŠ¨ 3ï¼ˆå¼€å§‹ 0&lt;4ï¼‰ï¼›</li>
<li>é€‰æ´»åŠ¨ 4ï¼ˆå¼€å§‹ 5â‰¥4ï¼‰ï¼›</li>
<li>é€‰æ´»åŠ¨ 5ï¼ˆå¼€å§‹ 8â‰¥7ï¼‰ï¼›</li>
</ol>
</li>
<li>
<p>æ€»è®¡ 3 ä¸ªï¼Œç¬¦åˆæœ€ä¼˜è§£ã€‚</p>
</li>
</ul>
<h3 data-id="heading-18">äº”ã€è´ªå¿ƒç®—æ³•çš„æ ¸å¿ƒè¦ç‚¹ä¸æ‰©å±•</h3>
<h4 data-id="heading-19">1. æ´»åŠ¨é€‰æ‹©é—®é¢˜çš„è´ªå¿ƒæ­£ç¡®æ€§</h4>
<ul>
<li>è´ªå¿ƒé€‰æ‹©æ€§è´¨ï¼šé€‰æ‹©ç»“æŸæœ€æ—©çš„æ´»åŠ¨ï¼Œå‰©ä½™çš„æ—¶é—´åŒºé—´æœ€å¤§ï¼Œèƒ½å®¹çº³æ›´å¤šæ´»åŠ¨ï¼›</li>
<li>æœ€ä¼˜å­ç»“æ„ï¼šè‹¥ A æ˜¯æœ€ä¼˜è§£ï¼Œé‚£ä¹ˆ A ä¸­ç¬¬ä¸€ä¸ªæ´»åŠ¨ä¸€å®šæ˜¯ç»“æŸæœ€æ—©çš„æ´»åŠ¨ï¼Œå‰©ä½™éƒ¨åˆ†ä¹Ÿæ˜¯å­é—®é¢˜çš„æœ€ä¼˜è§£ã€‚</li>
</ul>
<h4 data-id="heading-20">2. æ‰©å±•ä¼˜åŒ–æ€è·¯</h4>
<h5 data-id="heading-21">ï¼ˆ1ï¼‰è¾“å…¥åˆæ³•æ€§æ ¡éªŒï¼ˆæ—¶é—´ç»´åº¦ï¼‰</h5>
<p>c</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-css" lang="css">scanf("%d %d", &amp;<span class="hljs-selector-tag">a</span><span class="hljs-selector-attr">[0]</span><span class="hljs-selector-attr">[i]</span>, &amp;<span class="hljs-selector-tag">a</span><span class="hljs-selector-attr">[1]</span><span class="hljs-selector-attr">[i]</span>);
if(<span class="hljs-selector-tag">a</span><span class="hljs-selector-attr">[0]</span><span class="hljs-selector-attr">[i]</span> &lt; <span class="hljs-number">0</span> || <span class="hljs-selector-tag">a</span><span class="hljs-selector-attr">[1]</span><span class="hljs-selector-attr">[i]</span> &lt;= <span class="hljs-selector-tag">a</span><span class="hljs-selector-attr">[0]</span><span class="hljs-selector-attr">[i]</span>)
{
    printf("é”™è¯¯ï¼šæ´»åŠ¨%dçš„å¼€å§‹æ—¶é—´éœ€â‰¥<span class="hljs-number">0</span>ï¼Œä¸”ç»“æŸæ—¶é—´&gt;å¼€å§‹æ—¶é—´ï¼\n", <span class="hljs-selector-tag">i</span>+<span class="hljs-number">1</span>);
    <span class="hljs-selector-tag">i</span>--; // é‡æ–°è¾“å…¥å½“å‰æ´»åŠ¨
    continue;
}
</code></pre>
<ul>
<li>é¿å…è¾“å…¥ â€œå¼€å§‹æ—¶é—´ä¸ºè´Ÿâ€â€œç»“æŸæ—¶é—´â‰¤å¼€å§‹æ—¶é—´â€ çš„æ— æ•ˆæ´»åŠ¨ã€‚</li>
</ul>
<h5 data-id="heading-22">ï¼ˆ2ï¼‰æ›¿æ¢æ›´é«˜æ•ˆçš„æ’åºç®—æ³•</h5>
<p>å†’æ³¡æ’åºçš„æ—¶é—´å¤æ‚åº¦ä¸º O (nÂ²)ï¼Œå¯æ›¿æ¢ä¸ºå¿«é€Ÿæ’åºï¼ˆO (nlogn)ï¼‰ï¼Œæå‡å¤§æ•°é‡æ´»åŠ¨çš„æ’åºæ•ˆç‡ï¼š</p>
<p>c</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-css" lang="css">// å¿«é€Ÿæ’åºæ ¸å¿ƒï¼ˆæŒ‰ç»“æŸæ—¶é—´æ’åºï¼‰
void quicksort(int <span class="hljs-selector-tag">a</span><span class="hljs-selector-attr">[2]</span><span class="hljs-selector-attr">[MAX]</span>, int index<span class="hljs-selector-attr">[MAX]</span>, int <span class="hljs-attribute">left</span>, int <span class="hljs-attribute">right</span>)
{
    if(<span class="hljs-attribute">left</span> &gt;= <span class="hljs-attribute">right</span>) return;
    int pivot = <span class="hljs-selector-tag">a</span><span class="hljs-selector-attr">[1]</span><span class="hljs-selector-attr">[right]</span>; // åŸºå‡†ä¸ºæœ€å³ä¾§ç»“æŸæ—¶é—´
    int <span class="hljs-selector-tag">i</span> = <span class="hljs-attribute">left</span> - <span class="hljs-number">1</span>;
    for(int j=<span class="hljs-attribute">left</span>; j&lt;<span class="hljs-attribute">right</span>; j++)
    {
        if(<span class="hljs-selector-tag">a</span><span class="hljs-selector-attr">[1]</span><span class="hljs-selector-attr">[j]</span> &lt;= pivot)
        {
            <span class="hljs-selector-tag">i</span>++;
            swap(&amp;<span class="hljs-selector-tag">a</span><span class="hljs-selector-attr">[1]</span><span class="hljs-selector-attr">[i]</span>, &amp;<span class="hljs-selector-tag">a</span><span class="hljs-selector-attr">[1]</span><span class="hljs-selector-attr">[j]</span>);
            swap(&amp;<span class="hljs-selector-tag">a</span><span class="hljs-selector-attr">[0]</span><span class="hljs-selector-attr">[i]</span>, &amp;<span class="hljs-selector-tag">a</span><span class="hljs-selector-attr">[0]</span><span class="hljs-selector-attr">[j]</span>);
            swap(&amp;index<span class="hljs-selector-attr">[i]</span>, &amp;index<span class="hljs-selector-attr">[j]</span>);
        }
    }
    <span class="hljs-selector-tag">i</span>++;
    swap(&amp;<span class="hljs-selector-tag">a</span><span class="hljs-selector-attr">[1]</span><span class="hljs-selector-attr">[i]</span>, &amp;<span class="hljs-selector-tag">a</span><span class="hljs-selector-attr">[1]</span><span class="hljs-selector-attr">[right]</span>);
    swap(&amp;<span class="hljs-selector-tag">a</span><span class="hljs-selector-attr">[0]</span><span class="hljs-selector-attr">[i]</span>, &amp;<span class="hljs-selector-tag">a</span><span class="hljs-selector-attr">[0]</span><span class="hljs-selector-attr">[right]</span>);
    swap(&amp;index<span class="hljs-selector-attr">[i]</span>, &amp;index<span class="hljs-selector-attr">[right]</span>);
    quicksort(<span class="hljs-selector-tag">a</span>, index, <span class="hljs-attribute">left</span>, <span class="hljs-selector-tag">i</span>-<span class="hljs-number">1</span>);
    quicksort(<span class="hljs-selector-tag">a</span>, index, <span class="hljs-selector-tag">i</span>+<span class="hljs-number">1</span>, <span class="hljs-attribute">right</span>);
}
</code></pre>
<h3 data-id="heading-23">å…­ã€æ–°æ‰‹é¿å‘æŒ‡å—</h3>
<ol>
<li><strong>æ’åºæ—¶æœªåŒæ­¥äº¤æ¢æ•°æ®</strong>ï¼šä»…äº¤æ¢ç»“æŸæ—¶é—´ï¼Œå¯¼è‡´å¼€å§‹æ—¶é—´ / ç¼–å·ä¸ç»“æŸæ—¶é—´ä¸åŒ¹é…ï¼Œè¾“å‡ºç»“æœæ··ä¹±ï¼›</li>
<li><strong>å¿½ç•¥æ´»åŠ¨åŸå§‹ç¼–å·</strong>ï¼šæ’åºåç›´æ¥è¾“å‡ºæ•°ç»„ä¸‹æ ‡ï¼Œç”¨æˆ·æ— æ³•è¯†åˆ«åŸå§‹æ´»åŠ¨ï¼›</li>
<li><strong>è¾¹ç•Œæ¡ä»¶ç¼ºå¤±</strong>ï¼šæœªæ ¡éªŒ<code>nâ‰¤0</code>æˆ–<code>n&gt;MAX</code>ï¼Œå¯¼è‡´æ•°ç»„è¶Šç•Œæˆ–ç¨‹åºå´©æºƒï¼›</li>
<li><strong>å†²çªåˆ¤æ–­é€»è¾‘é”™è¯¯</strong>ï¼šè¯¯å†™ä¸º<code>a[0][i] &gt; lastfinish</code>ï¼Œæ¼æ‰ â€œç­‰äºâ€ çš„æƒ…å†µï¼ˆå¦‚æ´»åŠ¨å¼€å§‹æ—¶é—´ç­‰äºä¸Šä¸€ä¸ªç»“æŸæ—¶é—´ï¼Œå®é™…æ— å†²çªï¼‰ï¼›</li>
<li><strong>è¾“å‡ºæ—¶æœªåŒ¹é…ä½ç½®</strong>ï¼šç›´æ¥ç”¨<code>selected_idx[i]</code>ä½œä¸ºæ•°ç»„ä¸‹æ ‡ï¼Œå¿½ç•¥æ’åºåä¸‹æ ‡å·²å˜åŒ–çš„é—®é¢˜ã€‚</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[requestAnimationFrame åŠ¨ç”»ä¼˜åŒ–å®è·µæŒ‡å—]]></title>    <link>https://juejin.cn/post/7593375360553844786</link>    <guid>https://juejin.cn/post/7593375360553844786</guid>    <pubDate>2026-01-10T16:24:27.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7593375360553844786" data-draft-id="7593337928307982362" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="requestAnimationFrame åŠ¨ç”»ä¼˜åŒ–å®è·µæŒ‡å—"/> <meta itemprop="keywords" content="JavaScript,é¢è¯•,å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-10T16:24:27.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¬”COOLåˆ›å§‹äºº"/> <meta itemprop="url" content="https://juejin.cn/user/1280287468430270"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            requestAnimationFrame åŠ¨ç”»ä¼˜åŒ–å®è·µæŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1280287468430270/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¬”COOLåˆ›å§‹äºº
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-10T16:24:27.000Z" title="Sat Jan 10 2026 16:24:27 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€ä»€ä¹ˆå«â€œä¼˜åŒ–å¥½â€çš„ requestAnimationFrame åŠ¨ç”»ï¼Ÿ</h2>
<p>å¯¹äºå¸¸è§ 60Hz å±å¹•ï¼Œä½ æ¯ä¸€å¸§å¯ç”¨æ—¶é—´å¤§çº¦ <strong>16ms</strong>ã€‚åªè¦ï¼š</p>
<ul>
<li>æ¯ä¸ª <code>requestAnimationFrame</code> å›è°ƒé‡Œçš„ <strong>æ€»å·¥ä½œæ—¶é—´ &lt; 16ms</strong>ï¼ˆæ›´ç†æƒ³æ˜¯ 10â€“15msï¼‰</li>
<li>é¿å…é¢‘ç¹é‡æ’ï¼ˆreflowï¼‰å’Œé‡ç»˜ï¼ˆrepaintï¼‰</li>
<li>å°½å¯èƒ½æŠŠè®¡ç®—å’Œ DOM æ›´æ–°æ§åˆ¶åœ¨å¿…è¦çš„æœ€å°èŒƒå›´å†…</li>
</ul>
<p>ä½ çš„åŠ¨ç”»åœ¨è§†è§‰ä¸Šå°±ä¼šæ˜¯â€œå¹³æ»‘çš„â€ï¼ˆ60fps æˆ–è¢«æµè§ˆå™¨ç¨³å®šåœ°é™åˆ°ä¸€ä¸ªä¸€è‡´çš„å¸§ç‡ï¼Œå¦‚ 30fpsï¼‰ã€‚</p>
<hr/>
<h2 data-id="heading-1">äºŒã€æ ¸å¿ƒåŸåˆ™</h2>
<ol>
<li>
<p><strong>ç”¨ requestAnimationFrameï¼Œè€Œä¸æ˜¯ <code>setTimeout</code> / <code>setInterval</code> æ¥é©±åŠ¨åŠ¨ç”»</strong></p>
<ul>
<li>requestAnimationFrame ä¼šåœ¨æµè§ˆå™¨å‡†å¤‡é‡ç»˜å‰è°ƒç”¨å›è°ƒï¼Œè‡ªåŠ¨è·Ÿéšä¸åŒè®¾å¤‡åˆ·æ–°ç‡ï¼Œå¹¶åœ¨åå°æ ‡ç­¾é¡µæš‚åœï¼Œæ•´ä½“æ›´èŠ‚èƒ½ã€ä¹Ÿæ›´å¹³æ»‘[1][3][8]ã€‚</li>
</ul>
</li>
<li>
<p><strong>ä¼˜å…ˆä½¿ç”¨ CSS åŠ¨ç”»/è¿‡æ¸¡ï¼ˆtransform / opacityï¼‰</strong></p>
<ul>
<li>å¾ˆå¤šç®€å•çš„ä½ç§»ã€ç¼©æ”¾ã€æ·¡å…¥æ·¡å‡ºï¼Œåªç”¨ CSS å°±èƒ½ç”¨ GPU åšâ€œåˆæˆå±‚åŠ¨ç”»â€ï¼Œå‡ ä¹ä¸å  JS æ—¶é—´ã€‚</li>
<li>å½“éœ€è¦å¤æ‚é€»è¾‘ã€äº¤äº’é©±åŠ¨æˆ–æ—¶é—´è½´æ§åˆ¶æ—¶ï¼Œå†ç”¨ requestAnimationFrame åš JS åŠ¨ç”»ã€‚</li>
</ul>
</li>
<li>
<p><strong>æŠŠ requestAnimationFrame å›è°ƒåšâ€œç˜¦èº«â€ï¼šè½»è®¡ç®— + å°‘ DOM æ“ä½œ</strong></p>
<ul>
<li>å¤§å—è®¡ç®—é€»è¾‘ä¸è¦æ”¾åœ¨ requestAnimationFrame å†…éƒ¨ï¼Œè€Œæ˜¯æ‹†åˆ†ã€å»¶åæˆ–æ”¾åˆ° Worker é‡Œã€‚</li>
<li>requestAnimationFrame å›è°ƒå†…åªåšï¼š
<ul>
<li>åŸºäºå½“å‰æ—¶é—´è®¡ç®—ä¸‹ä¸€çŠ¶æ€</li>
<li>å¯¹ DOM åšæœ€å°é‡ã€æ‰¹é‡åŒ–çš„æ ·å¼æ›´æ–°</li>
</ul>
</li>
</ul>
</li>
</ol>
<hr/>
<h2 data-id="heading-2">ä¸‰ã€å…·ä½“ä¼˜åŒ–ç­–ç•¥</h2>
<h3 data-id="heading-3">1. ä½¿ç”¨ GPU å‹å¥½çš„ CSS å±æ€§ï¼š<code>transform</code> / <code>opacity</code></h3>
<p><strong>æ­£ç¡®åšæ³•ï¼š</strong></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// åœ¨ requestAnimationFrame ä¸­</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">step</span>(<span class="hljs-params">timestamp</span>) {
  <span class="hljs-comment">// è®¡ç®—æ–°çš„ä½ç§»</span>
  box.<span class="hljs-property">style</span>.<span class="hljs-property">transform</span> = <span class="hljs-string">`translateX(<span class="hljs-subst">${x}</span>px)`</span>;  <span class="hljs-comment">// ä½ç§»</span>
  box.<span class="hljs-property">style</span>.<span class="hljs-property">opacity</span>   = alpha;                <span class="hljs-comment">// é€æ˜åº¦</span>
  <span class="hljs-title function_">requestAnimationFrame</span>(step);
}
</code></pre>
<p><strong>é¿å…ï¼š</strong></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// è¿™äº›å±æ€§ç»å¸¸è§¦å‘å¸ƒå±€å’Œé‡ç»˜</span>
div.<span class="hljs-property">style</span>.<span class="hljs-property">left</span>   = x + <span class="hljs-string">'px'</span>;
div.<span class="hljs-property">style</span>.<span class="hljs-property">top</span>    = y + <span class="hljs-string">'px'</span>;
div.<span class="hljs-property">style</span>.<span class="hljs-property">width</span>  = w + <span class="hljs-string">'px'</span>;
div.<span class="hljs-property">style</span>.<span class="hljs-property">height</span> = h + <span class="hljs-string">'px'</span>;
div.<span class="hljs-property">style</span>.<span class="hljs-property">margin</span> = m + <span class="hljs-string">'px'</span>;
</code></pre>
<p>åŸå› ï¼š</p>
<ul>
<li>transform / opacity é€šå¸¸åªè§¦å‘<strong>åˆæˆé˜¶æ®µ</strong>ï¼Œå¯åœ¨ GPU åˆæˆå±‚ä¸Šå¤„ç†ï¼Œæ˜æ˜¾é™ä½ä¸»çº¿ç¨‹å‹åŠ›ã€‚</li>
<li>width / left ç­‰ä¼šè§¦å‘å¸ƒå±€ï¼ˆlayoutï¼‰å’Œç»˜åˆ¶ï¼ˆpaintï¼‰ï¼Œå®¹æ˜“å¯¼è‡´ LoAFï¼ˆé•¿åŠ¨ç”»å¸§ &gt; 50msï¼‰ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-4">2. ç»Ÿä¸€åŠ¨ç”»å¾ªç¯ï¼šå•ä¸€ requestAnimationFrame ç®¡ç†å¤šåŠ¨ç”»</h3>
<p><strong>é—®é¢˜æ¨¡å¼ï¼ˆåä¾‹ï¼‰ï¼š</strong></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">animateBox1</span>(<span class="hljs-params">t</span>) { <span class="hljs-comment">/* ... */</span> <span class="hljs-title function_">requestAnimationFrame</span>(animateBox1); }
<span class="hljs-keyword">function</span> <span class="hljs-title function_">animateBox2</span>(<span class="hljs-params">t</span>) { <span class="hljs-comment">/* ... */</span> <span class="hljs-title function_">requestAnimationFrame</span>(animateBox2); }
<span class="hljs-keyword">function</span> <span class="hljs-title function_">animateBox3</span>(<span class="hljs-params">t</span>) { <span class="hljs-comment">/* ... */</span> <span class="hljs-title function_">requestAnimationFrame</span>(animateBox3); }
</code></pre>
<ul>
<li>å¤šä¸ªç‹¬ç«‹ requestAnimationFrame å›è°ƒå¢åŠ äº†è°ƒåº¦è´Ÿæ‹…ï¼Œä¹Ÿæ›´éš¾ç»Ÿä¸€é™æµ/æš‚åœã€‚</li>
</ul>
<p><strong>æ¨èæ¨¡å¼ï¼šé›†ä¸­ç®¡ç† + ç»Ÿä¸€å¾ªç¯</strong>ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">class</span> <span class="hljs-title class_">AnimationManager</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">tasks</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">animationId</span> = <span class="hljs-literal">null</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">fps</span> = <span class="hljs-number">60</span>;  <span class="hljs-comment">// å¯è°ƒ</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">lastFrameTime</span> = performance.<span class="hljs-title function_">now</span>();
  }

  <span class="hljs-title function_">registerTask</span>(<span class="hljs-params">task</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">tasks</span>.<span class="hljs-title function_">add</span>(task);
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">tasks</span>.<span class="hljs-property">size</span> === <span class="hljs-number">1</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">animationId</span> = <span class="hljs-title function_">requestAnimationFrame</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">run</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>));
    }
  }

  <span class="hljs-title function_">unregisterTask</span>(<span class="hljs-params">task</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">tasks</span>.<span class="hljs-title function_">delete</span>(task);
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">tasks</span>.<span class="hljs-property">size</span> === <span class="hljs-number">0</span> &amp;&amp; <span class="hljs-variable language_">this</span>.<span class="hljs-property">animationId</span> !== <span class="hljs-literal">null</span>) {
      <span class="hljs-title function_">cancelAnimationFrame</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">animationId</span>);
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">animationId</span> = <span class="hljs-literal">null</span>;
    }
  }

  <span class="hljs-title function_">run</span>(<span class="hljs-params">currentTime</span>) {
    <span class="hljs-keyword">const</span> deltaTime = currentTime - <span class="hljs-variable language_">this</span>.<span class="hljs-property">lastFrameTime</span>;
    <span class="hljs-keyword">const</span> frameInterval = <span class="hljs-number">1000</span> / <span class="hljs-variable language_">this</span>.<span class="hljs-property">fps</span>;

    <span class="hljs-keyword">if</span> (deltaTime &gt; frameInterval) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">tasks</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">task</span> =&gt;</span> <span class="hljs-title function_">task</span>(currentTime, deltaTime));
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">lastFrameTime</span> = currentTime;
    }

    <span class="hljs-variable language_">this</span>.<span class="hljs-property">animationId</span> = <span class="hljs-title function_">requestAnimationFrame</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">run</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>));
  }
}
</code></pre>
<p><strong>ä½¿ç”¨ï¼š</strong></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> manager = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AnimationManager</span>();

<span class="hljs-keyword">function</span> <span class="hljs-title function_">scaleTask</span>(<span class="hljs-params">time</span>)   { <span class="hljs-comment">/* åªåšç¼©æ”¾æ ·å¼æ›´æ–° */</span> }
<span class="hljs-keyword">function</span> <span class="hljs-title function_">colorTask</span>(<span class="hljs-params">time</span>)   { <span class="hljs-comment">/* åªåšé¢œè‰²æ ·å¼æ›´æ–° */</span> }
<span class="hljs-keyword">function</span> <span class="hljs-title function_">rotateTask</span>(<span class="hljs-params">time</span>)  { <span class="hljs-comment">/* åªåšæ—‹è½¬æ ·å¼æ›´æ–° */</span> }

manager.<span class="hljs-title function_">registerTask</span>(scaleTask);
manager.<span class="hljs-title function_">registerTask</span>(colorTask);
manager.<span class="hljs-title function_">registerTask</span>(rotateTask);
<span class="hljs-comment">// åœæ­¢æŸä¸ªåŠ¨ç”»æ—¶ï¼š manager.unregisterTask(scaleTask);</span>
</code></pre>
<p>å¥½å¤„ï¼š</p>
<ul>
<li>æ‰€æœ‰åŠ¨ç”»å…±ç”¨ä¸€æ¡â€œæ—¶è„‰â€ï¼Œä¾¿äºç»Ÿä¸€æ§åˆ¶ FPS å’Œæš‚åœ/æ¢å¤ã€‚</li>
<li>æµè§ˆå™¨åªç®¡ç†ä¸€ä¸ª requestAnimationFrame è°ƒåº¦ç‚¹ï¼Œå‡å°‘å†—ä½™å›è°ƒå¼€é”€ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-5">3. æ§åˆ¶ FPSï¼šæœ‰æ„è¯†åœ°â€œå°‘æ¸²æŸ“â€</h3>
<p>ä¸æ˜¯æ‰€æœ‰åŠ¨ç”»éƒ½éœ€è¦ 60fpsï¼Œä¾‹å¦‚èƒŒæ™¯è£…é¥°åŠ¨ç”»å®Œå…¨å¯ä»¥ 30fps æˆ–æ›´ä½ã€‚</p>
<p>åœ¨ä¸Šé¢çš„ <code>AnimationManager</code> é‡Œï¼Œé€šè¿‡ä¿®æ”¹ <code>this.fps</code> æ§åˆ¶ç›®æ ‡å¸§ç‡ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> manager = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AnimationManager</span>();
manager.<span class="hljs-property">fps</span> = <span class="hljs-number">30</span>; <span class="hljs-comment">// èƒŒæ™¯åŠ¨ç”» 30fpsï¼Œæ˜æ˜¾é™ä½ CPU å ç”¨</span>
</code></pre>
<ul>
<li>å¤šæ•°ç”¨æˆ·éš¾ä»¥åˆ†è¾¨ 30fps çš„è½»é‡åŠ¨ç”»ä¸ 60fps çš„å·®åˆ«ï¼Œä½† CPU/GPU å¼€é”€å¯ä»¥æ˜æ˜¾ä¸‹é™ï¼ˆç§»åŠ¨è®¾å¤‡ã€ç”µæ± å°¤ä¸ºå—ç›Šï¼‰ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-6">4. æ‹†åˆ†é‡ä»»åŠ¡ï¼Œé¿å…â€œé•¿åŠ¨ç”»å¸§â€ï¼ˆLoAFï¼‰</h3>
<p><strong>LoAF å®šä¹‰</strong>ï¼šå•å¸§æ—¶é•¿è¶…è¿‡çº¦ 50ms å³å¯è§†ä½œâ€œé•¿åŠ¨ç”»å¸§â€[5]ï¼Œå¾ˆå®¹æ˜“é€ æˆæ˜æ˜¾å¡é¡¿ã€‚</p>
<p><strong>ä¸è¦è¿™æ ·ï¼š</strong></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-title function_">requestAnimationFrame</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-comment">// è¿™é‡Œåšäº†ä¸€ä¸ª 50ms çš„å¤§å¾ªç¯è¿ç®—</span>
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">1_000_000</span>; i++) { <span class="hljs-comment">/* ...é‡è¿ç®—... */</span> }
  <span class="hljs-comment">// ç„¶åå†æ›´æ–° DOM</span>
});
</code></pre>
<p><strong>æ‹†æˆå°å—è·¨å¸§æ‰§è¡Œ</strong>ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">heavyTaskChunk</span>(<span class="hljs-params">start, done</span>) {
  <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">CHUNK_SIZE</span> = <span class="hljs-number">1000</span>;
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = start; i &lt; <span class="hljs-number">1_000_000</span> &amp;&amp; i &lt; start + <span class="hljs-variable constant_">CHUNK_SIZE</span>; i++) {
    <span class="hljs-comment">// æ‰¹é‡å¤„ç†æ•°æ®</span>
  }
  <span class="hljs-keyword">if</span> (start + <span class="hljs-variable constant_">CHUNK_SIZE</span> &lt; <span class="hljs-number">1_000_000</span>) {
    <span class="hljs-comment">// æŠŠå‰©ä½™ä»»åŠ¡äº¤ç»™åç»­å¸§ / ç©ºé—²æ—¶é—´ç»§ç»­è·‘</span>
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">heavyTaskChunk</span>(start + <span class="hljs-variable constant_">CHUNK_SIZE</span>, done), <span class="hljs-number">0</span>);
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (done) {
    <span class="hljs-title function_">done</span>();
  }
}

<span class="hljs-comment">// åœ¨åŠ¨ç”»å¤–éƒ¨å®‰æ’é‡ä»»åŠ¡</span>
<span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">heavyTaskChunk</span>(<span class="hljs-number">0</span>, <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å®Œæˆ'</span>)), <span class="hljs-number">0</span>);
</code></pre>
<p>è¦ç‚¹ï¼š</p>
<ul>
<li>requestAnimationFrame å›è°ƒåªè´Ÿè´£<strong>åŠ¨ç”»çŠ¶æ€ä¸ DOM æ¸²æŸ“</strong>ï¼›é‡è®¡ç®—è¦ä¹ˆæ‹†åˆ†åˆ° <code>setTimeout</code> / <code>requestIdleCallback</code>ï¼Œè¦ä¹ˆæ”¾åˆ° Web Workerã€‚</li>
<li>å¯¹äº¤äº’æ¥è¯´ï¼Œæ›´é‡è¦çš„æ˜¯è®©ä¸»çº¿ç¨‹â€œç»å¸¸æœ‰æœºä¼šç©ºè½¬â€ï¼Œä»¥ä¾¿éšæ—¶å¤„ç†ç”¨æˆ·è¾“å…¥ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-7">5. é¿å… Layout Thrashingï¼šå…ˆè¯»åå†™</h3>
<p><strong>é”™è¯¯æ¨¡å¼ï¼š</strong></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// æ¯æ¬¡å¾ªç¯æ—¢è¯»åˆå†™ï¼Œä¼šä¸æ–­å¼ºåˆ¶æµè§ˆå™¨é‡æ–°å¸ƒå±€</span>
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> el <span class="hljs-keyword">of</span> elements) {
  el.<span class="hljs-property">style</span>.<span class="hljs-property">width</span> = el.<span class="hljs-property">offsetWidth</span> + <span class="hljs-string">'10px'</span>; <span class="hljs-comment">// è¯» offsetWidth ç«‹åˆ»è§¦å‘å¸ƒå±€</span>
}
</code></pre>
<p><strong>æ­£ç¡®æ¨¡å¼ï¼šæ‰¹é‡è¯» / æ‰¹é‡å†™</strong>ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> widths = [];

<span class="hljs-comment">// 1. å…ˆæŠŠæ‰€æœ‰è¯»æ“ä½œåšå®Œ</span>
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; elements.<span class="hljs-property">length</span>; i++) {
  widths[i] = elements[i].<span class="hljs-property">offsetWidth</span>;
}

<span class="hljs-comment">// 2. å†ç»Ÿä¸€å†™</span>
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; elements.<span class="hljs-property">length</span>; i++) {
  elements[i].<span class="hljs-property">style</span>.<span class="hljs-property">width</span> = widths[i] + <span class="hljs-number">10</span> + <span class="hljs-string">'px'</span>;
}
</code></pre>
<p>åœ¨ requestAnimationFrame é‡Œå°¤å…¶è¦éµå®ˆè¿™ä¸ªæ¨¡å¼ï¼š</p>
<ul>
<li>å…ˆåœ¨ä¸€æ®µé€»è¾‘ä¸­<strong>è¯»æ‰€æœ‰éœ€è¦çš„å¸ƒå±€ä¿¡æ¯</strong>ï¼ˆå¦‚ <code>offsetWidth</code>ã€<code>scrollTop</code> ç­‰ï¼‰</li>
<li>ç„¶åä¸€æ®µé€»è¾‘ä¸­ç»Ÿä¸€æ›´æ–°æ ·å¼ï¼ˆå†™ styleï¼‰</li>
</ul>
<hr/>
<h3 data-id="heading-8">6. è§‚å¯Ÿè€…å›è°ƒä¸­ä¸è¦åšé‡å·¥ä½œ</h3>
<p>åƒ <code>ResizeObserver</code>ã€<code>IntersectionObserver</code> çš„å›è°ƒæœ¬èº«å°±æ˜¯åœ¨æ¥è¿‘ç»˜åˆ¶é˜¶æ®µè°ƒç”¨çš„ï¼Œå¦‚æœåœ¨é‡Œé¢åšé‡è®¡ç®—ï¼Œä¼šç›´æ¥â€œåƒæ‰è¿™ä¸€å¸§çš„é¢„ç®—â€ã€‚</p>
<p><strong>æ”¹è¿›ï¼š</strong></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> resizeObserver = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ResizeObserver</span>(<span class="hljs-function"><span class="hljs-params">entries</span> =&gt;</span> {
  <span class="hljs-comment">// æ¨è¿Ÿåˆ°ä¸‹ä¸€è½® event loop / ä¸‹ä¸€å¸§å¤„ç†</span>
  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">dealWithResize</span>(entries);
  }, <span class="hljs-number">0</span>);
});
</code></pre>
<hr/>
<h3 data-id="heading-9">7. å–„ç”¨ CSS åŠ¨ç”»ï¼Œå‡å°‘ JS å‚ä¸</h3>
<ul>
<li>å°½é‡è®©â€œå¯é¢„æµ‹ã€æ— éœ€äº¤äº’æ§åˆ¶â€çš„åŠ¨ç”»ä½¿ç”¨ CSSï¼ˆ<code>@keyframes</code> æˆ– <code>transition</code>ï¼‰ã€‚</li>
<li>æŸäº›æµè§ˆå™¨åœ¨ JS ç¹å¿™æ—¶ï¼Œä»å¯è®© CSS åŠ¨ç”»åœ¨åˆæˆçº¿ç¨‹ä¸Šç›¸å¯¹å¹³æ»‘åœ°ç»§ç»­è¿è¡Œï¼Œè¿™æ˜¯ JS requestAnimationFrame åšä¸åˆ°çš„ã€‚</li>
</ul>
<p>ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.box</span> {
  <span class="hljs-attribute">animation</span>: float <span class="hljs-number">2s</span> ease-in-out infinite alternate;
}

<span class="hljs-keyword">@keyframes</span> float {
  <span class="hljs-selector-tag">from</span> { <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateY</span>(<span class="hljs-number">0</span>); }
  <span class="hljs-selector-tag">to</span>   { <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateY</span>(-<span class="hljs-number">10px</span>); }
}
</code></pre>
<p>æ­¤æ—¶ JS å®Œå…¨ä¸å‚ä¸åŠ¨ç”»è¿‡ç¨‹ï¼Œåªè´Ÿè´£ä¸šåŠ¡é€»è¾‘ã€‚</p>
<hr/>
<h3 data-id="heading-10">8. åˆçº§æ€§èƒ½æ’æŸ¥æµç¨‹ï¼ˆå®æˆ˜å‘ï¼‰</h3>
<ol>
<li>
<p><strong>ç”¨ Chrome DevTools Performance å½•åˆ¶åŠ¨ç”»åœºæ™¯</strong></p>
<ul>
<li>æ£€æŸ¥ <code>Frames</code> æ—¶é—´æ¡ï¼Œæ˜¯å¦å¤§é‡å¸§è¶…å‡º 16msï¼Œå°¤å…¶ &gt; 50msã€‚</li>
</ul>
</li>
<li>
<p><strong>æ‰¾å‡ºæœ€é‡çš„ requestAnimationFrame å›è°ƒ / äº‹ä»¶å¤„ç†</strong></p>
<ul>
<li>é‡ç‚¹çœ‹ï¼š
<ul>
<li>JavaScript è¿è¡Œæ—¶é—´ï¼ˆJS flame chartï¼‰</li>
<li>layout / paint æ—¶é—´æ˜¯å¦è¿‡é•¿</li>
<li>æœ‰æ— ç´§æ¥ç€çš„å¼ºåˆ¶å¸ƒå±€æ“ä½œï¼ˆè¯»å†™äº¤é”™ï¼‰</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>æŒ‰ä¼˜å…ˆçº§ä¼˜åŒ–</strong></p>
<ol>
<li>æŠŠå½±å“æœ€å¤§çš„ JS è®¡ç®—æ‹†åˆ†æˆ–ç§»å‡º requestAnimationFrameï¼ˆè§ç¬¬ 4 æ¡ï¼‰ã€‚</li>
<li>æŠŠæ‰€æœ‰åŠ¨ç”»ç›¸å…³æ ·å¼æ”¹æˆ <code>transform</code>/<code>opacity</code>ï¼ˆè§ç¬¬ 1 æ¡ï¼‰ã€‚</li>
<li>åˆå¹¶ requestAnimationFrame è°ƒç”¨ï¼Œä½¿ç”¨ç»Ÿä¸€åŠ¨ç”»ç®¡ç†å™¨ï¼Œå¹¶æŒ‰éœ€é™ FPSï¼ˆè§ç¬¬ 2ã€3 æ¡ï¼‰ã€‚</li>
<li>æ£€æŸ¥å¹¶ä¿®æ­£ layout thrashingï¼ˆè§ç¬¬ 5 æ¡ï¼‰ã€‚</li>
<li>ç¡®è®¤è§‚å¯Ÿè€…å’Œè¾“å…¥äº‹ä»¶ä¸­æ²¡æœ‰é‡ä»»åŠ¡ï¼ˆè§ç¬¬ 6 æ¡ï¼‰ã€‚</li>
</ol>
</li>
</ol>
<hr/>
<h2 data-id="heading-11">ä¹ã€ç®€è¦å®è·µæ¸…å•</h2>
<p><strong>ç¼–å†™ requestAnimationFrame åŠ¨ç”»æ—¶ï¼Œè¯·ä¿è¯ï¼š</strong></p>
<ul>
<li>åŠ¨ç”»é©±åŠ¨å…¨éƒ¨ä½¿ç”¨ <code>requestAnimationFrame</code>ï¼Œä¸ç”¨ <code>setInterval</code> åšé«˜é¢‘æ›´æ–°</li>
<li>requestAnimationFrame å›è°ƒå†…åªåšï¼šè½»é‡çŠ¶æ€è®¡ç®— + transform/opacity æ›´æ–°</li>
<li>ä¸åœ¨ requestAnimationFrame å›è°ƒä¸­æ‰§è¡Œå¤§å¾ªç¯æˆ–å¤æ‚ç®—æ³•</li>
<li>å¦‚æœæœ‰å¤šä¸ªåŠ¨ç”»ï¼Œå°½é‡é€šè¿‡ç»Ÿä¸€çš„ AnimationManager æ¥é›†ä¸­è°ƒåº¦</li>
<li>éå…³é”®åŠ¨ç”»ï¼ˆè£…é¥°ç±»ï¼‰ä½¿ç”¨è¾ƒä½ FPSï¼ˆå¦‚ 30fpsï¼‰</li>
<li>æ‰€æœ‰å¸ƒå±€è¯»å†™åˆ†ç¦»ï¼ˆå…ˆè¯»åå†™ï¼‰ï¼Œé¿å…åå¤è§¦å‘å¸ƒå±€</li>
<li>å°½é‡è®©â€œå¯é¢„æµ‹â€çš„åŠ¨ç”»äº¤ç»™ CSS transitions/animations å®Œæˆ</li>
<li>é€šè¿‡ Performance/DevTools ç¡®è®¤æ²¡æœ‰æ˜æ˜¾é•¿å¸§ï¼ˆ&gt; 50msï¼‰</li>
</ul>
<hr/>
<h3 data-id="heading-12">References</h3>
<p>[1] CSS and JavaScript animation performance. <a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FPerformance%2FGuides%2FCSS_JavaScript_animation_performance" target="_blank" title="https://developer.mozilla.org/en-US/docs/Web/Performance/Guides/CSS_JavaScript_animation_performance" ref="nofollow noopener noreferrer">developer.mozilla.org/en-US/docs/â€¦</a><br/>
[2] Optimize requestAnimationFrame Like a Pro. <a href="https://link.juejin.cn?target=https%3A%2F%2Fdev.to%2Fjosephciullo%2Fsupercharge-your-web-animations-optimize-requestanimationframe-like-a-pro-22i5" target="_blank" title="https://dev.to/josephciullo/supercharge-your-web-animations-optimize-requestanimationframe-like-a-pro-22i5" ref="nofollow noopener noreferrer">dev.to/josephciullâ€¦</a><br/>
[3] Jank busting for better rendering performance. <a href="https://link.juejin.cn?target=https%3A%2F%2Fweb.dev%2Farticles%2Fspeed-rendering" target="_blank" title="https://web.dev/articles/speed-rendering" ref="nofollow noopener noreferrer">web.dev/articles/spâ€¦</a><br/>
[5] Fixing Long Animation Frames (LoAF). <a href="https://link.juejin.cn?target=https%3A%2F%2Frequestmetrics.com%2Fweb-performance%2Ffixing-long-animation-frame-loaf%2F" target="_blank" title="https://requestmetrics.com/web-performance/fixing-long-animation-frame-loaf/" ref="nofollow noopener noreferrer">requestmetrics.com/web-performâ€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ€§èƒ½ç›‘æ§ä¹‹é¦–å±æ€§èƒ½ç›‘æ§å°å®è·µ]]></title>    <link>https://juejin.cn/post/7593528990846664755</link>    <guid>https://juejin.cn/post/7593528990846664755</guid>    <pubDate>2026-01-10T16:03:10.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7593528990846664755" data-draft-id="7593251491936944174" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ€§èƒ½ç›‘æ§ä¹‹é¦–å±æ€§èƒ½ç›‘æ§å°å®è·µ"/> <meta itemprop="keywords" content="å‰ç«¯,æ€§èƒ½ä¼˜åŒ–,JavaScript"/> <meta itemprop="datePublished" content="2026-01-10T16:03:10.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="sophieæ—­"/> <meta itemprop="url" content="https://juejin.cn/user/2559318799692952"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ€§èƒ½ç›‘æ§ä¹‹é¦–å±æ€§èƒ½ç›‘æ§å°å®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2559318799692952/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    sophieæ—­
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-10T16:03:10.000Z" title="Sat Jan 10 2026 16:03:10 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">èƒŒæ™¯ï¼š</h2>
<p>ç»ˆäºå®Œæˆäº†é˜¶æ®µæ€§çš„é¦–å±æ€§èƒ½ä¼˜åŒ–çš„å¼€å‘éƒ¨åˆ†ï¼Œè¯¥å†™ç›‘æ§ä»£ç éªŒæ”¶æˆæ•ˆäº†ï¼Œè¿™ä¸¤å¤©ç ”ç©¶äº†ä¸‹ï¼Œå…ˆçœ‹ä¸‹ç»“æœå§ï¼š</p>
<p><strong>æ ¸å¿ƒæ€§èƒ½æŒ‡æ ‡å‡å®ç°å¤§å¹…ä¸‹é™</strong>ï¼Œä¼˜åŒ–æ•ˆæœæ˜¾è‘—ï¼Œå…·ä½“åˆ†æå¦‚ä¸‹ï¼š</p>








































<table><thead><tr><th>æŒ‡æ ‡</th><th>ä¼˜åŒ–å‰å‡å€¼ï¼ˆmsï¼‰</th><th>ä¼˜åŒ–åå‡å€¼ï¼ˆmsï¼‰</th><th>ä¼˜åŒ–å¹…åº¦</th><th>æ ¸å¿ƒä»·å€¼ä½“ç°</th></tr></thead><tbody><tr><td>FCPï¼ˆé¦–æ¬¡å†…å®¹ç»˜åˆ¶ï¼‰</td><td>5078</td><td>1433</td><td><strong>-71.8%</strong></td><td>ç”¨æˆ·æ„ŸçŸ¥é¡µé¢åŠ è½½çš„<strong>é¦–å±æ—¶é—´å¤§å¹…ç¼©çŸ­</strong>ï¼Œå‘Šåˆ«â€œç™½å±ç­‰å¾…â€</td></tr><tr><td>LCPï¼ˆæœ€å¤§å†…å®¹ç»˜åˆ¶ï¼‰</td><td>5570</td><td>2276</td><td><strong>-59.1%</strong></td><td>é¦–å±æ ¸å¿ƒå†…å®¹ï¼ˆå¦‚å•†å“å›¾ã€æ ‡é¢˜ï¼‰<strong>åŠ è½½æ•ˆç‡æå‡è¿‘6æˆ</strong>ï¼Œç”¨æˆ·å¯å¿«é€Ÿè·å–å…³é”®ä¿¡æ¯</td></tr><tr><td>DCLï¼ˆDOMå†…å®¹åŠ è½½å®Œæˆï¼‰</td><td>5139</td><td>1572</td><td><strong>-69.4%</strong></td><td>DOMè§£æå®Œæˆæ—¶é—´å¤§å¹…æå‰ï¼Œ<strong>é¡µé¢å¯äº¤äº’åŸºç¡€æ›´ä¼˜</strong>ï¼ŒJSè„šæœ¬å¯æ›´æ—©æ‰§è¡Œ</td></tr><tr><td>Loadï¼ˆé¡µé¢å®Œå…¨åŠ è½½ï¼‰</td><td>5229</td><td>1574</td><td><strong>-69.9%</strong></td><td>é¡µé¢æ‰€æœ‰èµ„æºï¼ˆå›¾ç‰‡/è„šæœ¬/æ ·å¼ï¼‰åŠ è½½å®Œæˆæ—¶é—´ç¼©çŸ­ï¼Œ<strong>æ•´ä½“åŠ è½½é“¾è·¯æ•ˆç‡æ˜¾è‘—æå‡</strong></td></tr></tbody></table>
<h2 data-id="heading-1">LCP(Largest Contentful Paint) ï¼š é¦–å±åº¦é‡çš„â€œç»ˆæåˆ©å™¨â€œ</h2>
<p>å®˜æ–¹å®šä¹‰ï¼šé¡µé¢åŠ è½½è¿‡ç¨‹ä¸­ï¼Œ<strong>è§†å£ä¸­æœ€å¤§çš„ã€å¯¹ç”¨æˆ·æœ‰æ„ä¹‰çš„å†…å®¹å…ƒç´ </strong>å®Œæˆæ¸²æŸ“çš„æ—¶é—´ç‚¹ï¼›</p>
<h3 data-id="heading-2"><strong>ä¸ºä»€ä¹ˆ LCP æ˜¯é¦–å±åº¦é‡çš„â€œç»ˆæåˆ©å™¨â€ï¼Ÿ</strong></h3>
<h4 data-id="heading-3">âœ… <strong>ä¼˜åŠ¿1ï¼šé›¶ä¾µå…¥ï¼Œæµè§ˆå™¨åŸç”Ÿæ”¯æŒ</strong></h4>
<ul>
<li>
<p><strong>è‡ªåŠ¨æ•è·</strong>ï¼š<code>æµè§ˆå™¨è‡ªåŠ¨è¯†åˆ«è§†å£å†…**æœ€å¤§æ–‡æœ¬å—æˆ–å›¾ç‰‡å…ƒç´ **ï¼ˆå¦‚æ ‡é¢˜ã€Bannerå›¾ï¼‰ï¼Œæ— éœ€å¼€å‘è€…æ‰‹åŠ¨æ ‡è®°ã€‚</code></p>
</li>
<li>
<p><strong>è¦†ç›–æ€§</strong>ï¼šé€‚ç”¨äº95%ä»¥ä¸Šçš„æ ‡å‡†é¡µé¢ï¼ˆåŒ…æ‹¬SSR/CSRï¼‰ï¼Œæ¯”å¦‚ï¼š</p>
</li>
<li>
<p>æ–°é—»ç«™ï¼šä¸»æ ‡é¢˜+å¤´å›¾</p>
</li>
<li>
<p>ç”µå•†ï¼šé¦–å±å•†å“å¤§å›¾</p>
</li>
<li>
<p>åšå®¢ï¼šæ–‡ç« é¦–æ®µ</p>
</li>
</ul>
<h4 data-id="heading-4">âœ… <strong>ä¼˜åŠ¿2ï¼šç›´æ¥å…³è”ç”¨æˆ·å¿ƒç†æ¨¡å‹</strong></h4>
<ul>
<li>
<p><strong>æ³¨æ„åŠ›åŸåˆ™</strong>ï¼š<code>ç”¨æˆ·æœ¬èƒ½èšç„¦é¡µé¢æœ€å¤§å…ƒç´ ï¼Œå…¶æ¸²æŸ“å®Œæˆä»£è¡¨â€œå†…å®¹å·²å¯ç”¨â€ã€‚</code></p>
</li>
<li>
<p><strong>æ•°æ®éªŒè¯</strong>ï¼šGoogleç ”ç©¶è¡¨æ˜ï¼ŒLCPâ‰¤2.5ç§’çš„é¡µé¢ï¼Œç”¨æˆ·è·³å‡ºç‡<strong>é™ä½76%</strong>ï¼ˆå¯¹æ¯”&gt;4ç§’é¡µé¢ï¼‰ã€‚</p>
</li>
</ul>
<h4 data-id="heading-5">âœ… <strong>ä¼˜åŠ¿3ï¼šè§„é¿ä¼ ç»Ÿç—›ç‚¹</strong></h4>
<p>| æŒ‡æ ‡ | é—®é¢˜ | LCPè§£å†³æ–¹æ¡ˆ |</p>
<p>|-------|-------------------------------|--------------------------|</p>
<p>| FMP | ç®—æ³•å¤æ‚ï¼Œæµè§ˆå™¨å®ç°ä¸ä¸€è‡´ | æ ‡å‡†åŒ–ï¼Œæ‰€æœ‰ç°ä»£æµè§ˆå™¨æ”¯æŒ |</p>
<p>| FP/FCP| å¯èƒ½æ¸²æŸ“æ— æ„ä¹‰å†…å®¹ï¼ˆå¦‚èƒŒæ™¯ï¼‰ | å¼ºåˆ¶å…³è”â€œæœ€å¤§å†…å®¹â€ |</p>
<hr/>
<h2 data-id="heading-6">å…³äº LCPçš„ä¸€äº›è¿·æ€</h2>
<p>å› ä¸ºæˆ‘çœŸçš„å¾ˆå¥½å¥‡ LCPæ˜¯å¦‚ä½•åˆ¤å®š å¯¹ç”¨æˆ·æœ‰æ„ä¹‰çš„å†…å®¹å…ƒç´  çš„ï¼Ÿå¦‚æœä¸€å¼€å§‹æ˜¯éª¨æ¶å±ï¼Œé‚£ä¹ˆLCPä¼šè¯¯åˆ¤å—ï¼Ÿæ‰€ä»¥é—®äº†ä¸‹AIï¼Œä¹Ÿå¾—åˆ°äº†è§£ç­”ã€‚</p>
<h3 data-id="heading-7">ä¸€ã€LCP æ ¸å¿ƒå®šä¹‰ä¸åˆ¤å®šå‰æ</h3>
<p>LCP æ˜¯ Core Web Vitals æ ¸å¿ƒæŒ‡æ ‡ï¼Œå®šä¹‰ä¸º<strong>é¡µé¢ç”Ÿå‘½å‘¨æœŸå†…ï¼Œè§†å£ä¸­æœ€å¤§çš„ã€å¯¹ç”¨æˆ·æœ‰æ„ä¹‰çš„å†…å®¹å…ƒç´ å®Œæˆæ¸²æŸ“çš„æ—¶é—´ç‚¹</strong>ï¼ˆstartTimeï¼‰ï¼Œ<code>ä»…é’ˆå¯¹ã€Œå·²å®Œæˆåƒç´ çº§æ¸²æŸ“çš„çœŸå®å†…å®¹ã€ï¼Œæ’é™¤éª¨æ¶å±ã€çº¯èƒŒæ™¯ã€å ä½å…ƒç´ ã€‚</code></p>
<h4 data-id="heading-8">åˆ¤å®šå‰æï¼ˆå¿…é¡»åŒæ—¶æ»¡è¶³ï¼‰</h4>
<ol>
<li>å…ƒç´ å¿…é¡»åœ¨<strong>è§†å£å†…å¯è§</strong>ï¼ˆæ—  <code>display: none</code>ã€<code>visibility: hidden</code>ã€<code>opacity: 0</code>ã€è¢«å…¶ä»–å…ƒç´ å®Œå…¨é®æŒ¡ï¼‰ï¼›</li>
<li>å…ƒç´ å¿…é¡»æ˜¯<strong>æœ‰æ•ˆå†…å®¹å…ƒç´ </strong>ï¼ˆä»…åŒ…å« <code>&lt;img&gt;</code>ã€<code>&lt;svg&gt;</code>ã€<code>&lt;video&gt;</code>ã€å¸¦ <code>url()</code> èƒŒæ™¯å›¾çš„å…ƒç´ ã€æ–‡æœ¬å—å…ƒç´ ï¼Œå¦‚ <code>&lt;p&gt;</code>/<code>&lt;h1&gt;</code>/<code>&lt;div&gt;</code> å†…çš„æ–‡æœ¬èŠ‚ç‚¹ï¼‰ï¼›</li>
<li>å…ƒç´ å¿…é¡»<strong>å®Œæˆæ¸²æŸ“</strong>ï¼ˆæ–‡æœ¬æœ‰å­—å½¢åƒç´ ã€å›¾åƒæœ‰å®Œæ•´åƒç´ ï¼ŒéåŠ è½½ä¸­/å ä½çŠ¶æ€ï¼‰ï¼›</li>
<li>å…ƒç´ é¢ç§¯è®¡ç®—ä¸º<strong>è§†å£å†…å¯è§éƒ¨åˆ†çš„é¢ç§¯</strong>ï¼ˆéå…ƒç´ è‡ªèº«çš„å®Œæ•´é¢ç§¯ï¼‰ã€‚</li>
</ol>
<hr/>
<h3 data-id="heading-9">äºŒã€LCP å€™é€‰å…ƒç´ çš„ç­›é€‰ä¸é¢ç§¯è®¡ç®—è§„åˆ™</h3>
<p><code>LCP çš„åˆ¤å®šä¸æ˜¯ä¸€æ¬¡æ€§çš„ï¼Œè€Œæ˜¯</code><strong><code>æŒç»­è·Ÿè¸ªé¡µé¢æ¸²æŸ“è¿‡ç¨‹ä¸­çš„å€™é€‰å…ƒç´ ï¼Œç›´åˆ°é¡µé¢åŠ è½½ç¨³å®šåç¡®å®šæœ€ç»ˆå€¼</code></strong>ã€‚--- è¯·è®°ä½è¿™å¥è¯ï¼</p>
<h4 data-id="heading-10">1. å€™é€‰å…ƒç´ ç±»å‹ï¼ˆä»…ä»¥ä¸‹ç±»å‹å‚ä¸ç«äº‰ï¼‰</h4>



































<table><thead><tr><th>å…ƒç´ ç±»å‹</th><th>é¢ç§¯è®¡ç®—æ–¹å¼</th><th>å…³é”®ç»†èŠ‚</th></tr></thead><tbody><tr><td><code>&lt;img&gt;</code></td><td>å›¾åƒåœ¨è§†å£å†…çš„å¯è§åƒç´ çŸ©å½¢é¢ç§¯</td><td>ä¸åŒ…å«è¾¹æ¡†ã€paddingï¼›ä»…è®¡ç®—å›¾åƒå®é™…åƒç´ åŒºåŸŸ</td></tr><tr><td><code>&lt;video&gt;</code></td><td>ç¬¬ä¸€å¸§å¯è§åƒç´ é¢ç§¯</td><td>ä»…åœ¨è§†é¢‘æœ‰å°é¢/ç¬¬ä¸€å¸§æ—¶å‚ä¸ï¼Œå¦åˆ™ä¸å‚ä¸</td></tr><tr><td><code>&lt;svg&gt;</code></td><td>SVG å›¾å½¢åœ¨è§†å£å†…çš„å¯è§åƒç´ é¢ç§¯</td><td>ä»…åŒ…å«æœ‰ç»˜åˆ¶å†…å®¹çš„åŒºåŸŸ</td></tr><tr><td>èƒŒæ™¯å›¾å…ƒç´ ï¼ˆ<code>background-image: url(...)</code>ï¼‰</td><td>èƒŒæ™¯å›¾åœ¨è§†å£å†…çš„å¯è§åŒºåŸŸé¢ç§¯</td><td>ä»…å½“èƒŒæ™¯å›¾ä¸º <code>url()</code> ä¸”æœ‰å®é™…åƒç´ æ—¶å‚ä¸ï¼Œçº¯æ¸å˜/çº¯è‰²ä¸å‚ä¸</td></tr><tr><td>æ–‡æœ¬å—å…ƒç´ </td><td>æ–‡æœ¬èŠ‚ç‚¹çš„<strong>è¾¹ç•ŒçŸ©å½¢é¢ç§¯</strong>ï¼ˆåŒ…å«æ‰€æœ‰å¯è§å­—ç¬¦çš„æœ€å°çŸ©å½¢ï¼‰</td><td>ä»…åŒ…å«æ–‡æœ¬åƒç´ ï¼Œä¸åŒ…å«ç©ºç™½åŒºåŸŸ</td></tr></tbody></table>
<h4 data-id="heading-11">2. é¢ç§¯è®¡ç®—ä¼˜å…ˆçº§ä¸æ’é™¤é¡¹</h4>
<ul>
<li>æ’é™¤ï¼š<code>çº¯èƒŒæ™¯è‰²ã€æ¸å˜ã€åŠ¨ç”»ã€è¾¹æ¡†ã€é˜´å½±ã€ç©ºç™½å…ƒç´ ã€éšè—å…ƒç´ ï¼› -- æ˜¯ä¸æ˜¯å°±å¯ä»¥åŒºåˆ†éª¨æ¶å±äº†</code></li>
<li>ä¼˜å…ˆçº§ï¼š<code>ç›¸åŒé¢ç§¯ä¸‹ï¼Œ**æ–‡æœ¬/å›¾åƒå…ƒç´  &gt; èƒŒæ™¯å›¾å…ƒç´ **ï¼ˆå¯¹ç”¨æˆ·æ›´æœ‰æ„ä¹‰ï¼‰ï¼›</code></li>
<li>ç‰¹æ®Šæƒ…å†µï¼šå¦‚æœä¸€ä¸ªå…ƒç´ æœ‰å¤šä¸ªå†…å®¹ç±»å‹ï¼ˆå¦‚ <code>&lt;div&gt;</code> æ—¢æœ‰æ–‡æœ¬åˆæœ‰èƒŒæ™¯å›¾ï¼‰ï¼Œä»…è®¡ç®—æœ€ä¸»è¦çš„å†…å®¹ç±»å‹çš„é¢ç§¯ï¼Œä¸å åŠ ã€‚</li>
</ul>
<h4 data-id="heading-12">3. åŠ¨æ€è·Ÿè¸ªä¸å€™é€‰æ›´æ–°ï¼ˆæ ¸å¿ƒé€»è¾‘ï¼‰</h4>
<ol>
<li>é¡µé¢åŠ è½½åˆæœŸï¼ŒLCP å€™é€‰æ˜¯ç¬¬ä¸€ä¸ªç¬¦åˆæ¡ä»¶çš„å…ƒç´ ï¼›</li>
<li>åç»­æ¸²æŸ“è¿‡ç¨‹ä¸­ï¼Œè‹¥å‡ºç°<strong>é¢ç§¯æ›´å¤§</strong>æˆ–<strong>å¯¹ç”¨æˆ·æ›´æœ‰æ„ä¹‰</strong>çš„å…ƒç´ ï¼Œå€™é€‰ä¼šæ›´æ–°ï¼›</li>
<li>é¡µé¢åŠ è½½ç¨³å®šåï¼ˆé€šå¸¸åœ¨ <code>load</code> äº‹ä»¶åï¼Œæˆ– 5 ç§’å†…æ— æ–°å€™é€‰å…ƒç´ ï¼‰ï¼Œç¡®å®šæœ€ç»ˆ LCP å…ƒç´ å’Œæ—¶é—´ç‚¹ï¼›</li>
<li>è‹¥é¡µé¢æœ‰è·³è½¬ã€åˆ·æ–°ã€è·¯ç”±å˜åŒ–ï¼ŒLCP é‡æ–°è®¡ç®—ã€‚</li>
</ol>
<hr/>
<h3 data-id="heading-13">ä¸‰ã€LCP æ—¶é—´ç‚¹çš„ç¡®å®šï¼ˆstartTime çš„åº•å±‚è§„åˆ™ï¼‰</h3>
<p>LCP çš„æ—¶é—´ç‚¹ä¸æ˜¯ã€Œå…ƒç´ æ’å…¥ DOM çš„æ—¶é—´ã€ï¼Œè€Œæ˜¯ã€Œ<strong>å…ƒç´ å®Œæˆæ¸²æŸ“çš„æ—¶é—´</strong>ã€ï¼Œä¸åŒå…ƒç´ çš„æ—¶é—´ç‚¹è®¡ç®—æ–¹å¼ä¸åŒï¼š</p>
<ol>
<li><strong>å›¾åƒå…ƒç´ ï¼ˆ<code>&lt;img&gt;</code>ï¼‰</strong>ï¼šstartTime = å›¾åƒçš„ <code>load</code> äº‹ä»¶æ—¶é—´ï¼ˆæˆ–è§£ç å®Œæˆæ—¶é—´ï¼Œå–æ›´æ—©çš„ï¼‰ï¼Œå³å›¾åƒåƒç´ å®Œå…¨ç»˜åˆ¶åˆ°è§†å£çš„æ—¶é—´ï¼›</li>
<li><strong>æ–‡æœ¬å…ƒç´ </strong>ï¼šstartTime = æ–‡æœ¬èŠ‚ç‚¹çš„<strong>é¦–æ¬¡æ¸²æŸ“å®Œæˆæ—¶é—´</strong>ï¼ˆå­—å½¢åƒç´ ç»˜åˆ¶åˆ°è§†å£çš„æ—¶é—´ï¼‰ï¼›</li>
<li><strong>èƒŒæ™¯å›¾å…ƒç´ </strong>ï¼šstartTime = èƒŒæ™¯å›¾çš„åŠ è½½+è§£ç +ç»˜åˆ¶å®Œæˆæ—¶é—´ï¼›</li>
<li><strong>è§†é¢‘å…ƒç´ </strong>ï¼šstartTime = ç¬¬ä¸€å¸§çš„æ¸²æŸ“å®Œæˆæ—¶é—´ã€‚</li>
</ol>
<h4 data-id="heading-14">å…³é”®å‘ç‚¹ï¼šæ¥å£æ•°æ®è¿”å›æ…¢å¯¼è‡´ LCP å‡é«˜</h4>
<p>å¦‚æœ LCP å€™é€‰å…ƒç´ ï¼ˆå¦‚åˆ—è¡¨ä¸­çš„å•†å“å›¾/æ ‡é¢˜ï¼‰ä¾èµ–æ¥å£æ•°æ®æ¸²æŸ“ï¼š</p>
<ol>
<li>æ¥å£è¿”å›å‰ï¼ŒDOM ä¸­æ— æœ‰æ•ˆå†…å®¹å…ƒç´ ï¼ŒLCP å€™é€‰ä¸ºç©ºï¼›</li>
<li>æ¥å£è¿”å›åï¼Œæ’å…¥ DOM â†’ å‘èµ·èµ„æºè¯·æ±‚ï¼ˆå¦‚å›¾ç‰‡ URLï¼‰â†’ èµ„æºåŠ è½½å®Œæˆ â†’ æ¸²æŸ“å®Œæˆ â†’ æ›´æ–° LCP å€™é€‰ï¼›</li>
<li>æ¥å£å»¶è¿Ÿä¼šç›´æ¥å¯¼è‡´è¿™ä¸ªé“¾è·¯çš„æ‰€æœ‰æ­¥éª¤å»¶åï¼Œæœ€ç»ˆ LCP æ—¶é—´ç‚¹å¤§å¹…å‡é«˜ã€‚</li>
</ol>
<hr/>
<h3 data-id="heading-15">å››ã€LCP åˆ¤å®šçš„ç‰¹æ®Šè¾¹ç•Œåœºæ™¯ï¼ˆå®¹æ˜“æ··æ·†ï¼‰</h3>
<ol>
<li><strong>éª¨æ¶å±ä¸å‚ä¸ LCP</strong>ï¼š<code>å³ä¾¿éª¨æ¶å±å’ŒçœŸå®å†…å®¹å¸ƒå±€å®Œå…¨ä¸€è‡´ï¼Œåªè¦æ˜¯çº¯æ¸å˜/çº¯è‰²å ä½ï¼Œå°±ä¸ä¼šè¢«åˆ¤å®šä¸ºå€™é€‰å…ƒç´ ï¼›</code></li>
<li><strong>LCP å…ƒç´ å¯èƒ½ä¸æ˜¯é¦–å±çš„ç¬¬ä¸€ä¸ªå…ƒç´ </strong>ï¼š<code>æ¯”å¦‚é¦–å±å…ˆæ¸²æŸ“ä¸€ä¸ªå°æ–‡æœ¬ï¼Œåç»­æ¸²æŸ“ä¸€ä¸ªå¤§å›¾ç‰‡ï¼ŒLCP ä¼šæ›´æ–°ä¸ºå¤§å›¾ç‰‡çš„æ¸²æŸ“æ—¶é—´ï¼›</code></li>
<li><strong>æ»šåŠ¨ä¸å½±å“ LCP</strong>ï¼š<code>LCP æ˜¯åŸºäºé¡µé¢åŠ è½½æ—¶çš„è§†å£çŠ¶æ€ï¼Œç”¨æˆ·ä¸»åŠ¨æ»šåŠ¨ä¸ä¼šæ”¹å˜ LCP çš„å€™é€‰å…ƒç´ å’Œæ—¶é—´ç‚¹ï¼›</code></li>
<li><strong>æ‡’åŠ è½½å›¾ç‰‡çš„ LCP åˆ¤å®š</strong>ï¼šæ‡’åŠ è½½å›¾ç‰‡åœ¨è¿›å…¥è§†å£å‰ä¸ä¼šåŠ è½½ï¼Œè‹¥å®ƒæ˜¯é¦–å±æœ€å¤§å…ƒç´ ï¼Œä¼šå¯¼è‡´ LCP å¤§å¹…å‡é«˜ï¼Œå»ºè®®å¯¹é¦–å± LCP å›¾ç‰‡ç¦ç”¨æ‡’åŠ è½½ï¼Œæˆ–ç”¨ <code>&lt;link rel="preload"&gt;</code> é¢„åŠ è½½ã€‚</li>
</ol>
<hr/>
<h3 data-id="heading-16">äº”ã€æ€»ç»“</h3>
<p>LCP çš„åˆ¤å®šæ˜¯ä¸€ä¸ª**<code>åŠ¨æ€è·Ÿè¸ªã€é¢ç§¯ä¼˜å…ˆã€æ„ä¹‰ä¼˜å…ˆ</code>**çš„è¿‡ç¨‹ï¼Œæ ¸å¿ƒæ˜¯ã€ŒçœŸå®å†…å®¹çš„åƒç´ çº§æ¸²æŸ“å®Œæˆæ—¶é—´ã€ã€‚å¯¹åˆ—è¡¨ç±»é¡µé¢æ¥è¯´ï¼Œæ¥å£æ•°æ®è¿”å›é€Ÿåº¦ç›´æ¥å†³å®šäº† LCP å€™é€‰å…ƒç´ çš„å‡ºç°æ—¶æœºï¼Œæ˜¯ä¼˜åŒ– LCP çš„é‡ä¸­ä¹‹é‡ã€‚</p>
<h4 data-id="heading-17">å…³é”®åŸç†ï¼šåƒç´ çº§å·®å¼‚</h4>
<ul>
<li>éª¨æ¶å±ï¼šæ¸²æŸ“çš„æ˜¯<strong>è¿ç»­çš„æ¸å˜åƒç´ </strong>ï¼Œæ—  â€œå†…å®¹ç‰¹å¾â€ï¼ˆå¦‚æ–‡æœ¬çš„å­—å½¢è¾¹ç¼˜ã€å›¾åƒçš„åƒç´ ç»†èŠ‚ï¼‰ï¼›</li>
<li>çœŸå®å†…å®¹ï¼šæ¸²æŸ“çš„æ˜¯<strong>ç¦»æ•£çš„ã€æœ‰è¯­ä¹‰çš„åƒç´ </strong>ï¼ˆæ–‡æœ¬çš„ç¬”ç”»ã€å›¾åƒçš„è‰²å½©å·®å¼‚ï¼‰ï¼Œæµè§ˆå™¨çš„åˆæˆå™¨çº¿ç¨‹ä¼šæ ‡è®°è¿™ä¸ªçŠ¶æ€å˜åŒ–ä¸º â€œå†…å®¹ç»˜åˆ¶â€ã€‚</li>
</ul>
<h2 data-id="heading-18">å¦‚ä½•æµ‹é‡LCP</h2>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> <span class="hljs-title function_">collectLCP</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-keyword">if</span> (isCollected) <span class="hljs-keyword">return</span>;
    <span class="hljs-comment">// isCollected=true;</span>
    <span class="hljs-comment">// if (observerCount &gt;= 1) return; // é™åˆ¶åªæ³¨å†Œä¸€æ¬¡</span>
    <span class="hljs-comment">// observerCount++;</span>
    <span class="hljs-keyword">if</span> (observer) <span class="hljs-keyword">return</span>; <span class="hljs-comment">// é˜²æ­¢é‡å¤æ³¨å†Œ</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-string">'PerformanceObserver'</span> <span class="hljs-keyword">in</span> <span class="hljs-variable language_">window</span>) {
    observer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">PerformanceObserver</span>(<span class="hljs-function">(<span class="hljs-params">entryList</span>) =&gt;</span> {
      <span class="hljs-keyword">const</span> lcpEntry = entryList.<span class="hljs-title function_">getEntries</span>()[<span class="hljs-number">0</span>];
      <span class="hljs-keyword">if</span> (lcpEntry) {
        <span class="hljs-comment">// console.log('LCPæŒ‡æ ‡,observerCounts', observerCount);</span>
        <span class="hljs-comment">// observer.disconnect(); // é‡‡é›†åè§£ç»‘</span>
      }

      <span class="hljs-keyword">if</span> (lcpEntry) {
        <span class="hljs-variable language_">window</span>.<span class="hljs-property">perfMetrics</span>.<span class="hljs-property">lcp</span> = lcpEntry.<span class="hljs-property">startTime</span>.<span class="hljs-title function_">toFixed</span>(<span class="hljs-number">2</span>);
        <span class="hljs-comment">// LCPæ˜¯æœ€åè§¦å‘çš„æ ¸å¿ƒæŒ‡æ ‡ï¼Œæ­¤æ—¶å¯è¾“å‡ºå®Œæ•´æ—¥å¿—ï¼ˆå¼€å‘ç¯å¢ƒï¼‰</span>
        <span class="hljs-comment">// if (process.env.NODE_ENV !== 'production') {</span>
          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">group</span>(<span class="hljs-string">'ğŸ“Š åŸç”Ÿé¦–å±æ€§èƒ½æŒ‡æ ‡'</span>);
          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`TTFB: <span class="hljs-subst">${<span class="hljs-variable language_">window</span>.perfMetrics.ttfb}</span>ms`</span>);
          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`FCP: <span class="hljs-subst">${<span class="hljs-variable language_">window</span>.perfMetrics.fcp}</span>ms`</span>);
          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`LCP: <span class="hljs-subst">${<span class="hljs-variable language_">window</span>.perfMetrics.lcp}</span>ms`</span>);
          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`DCL: <span class="hljs-subst">${<span class="hljs-variable language_">window</span>.perfMetrics.dcl}</span>ms`</span>);
          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Load: <span class="hljs-subst">${<span class="hljs-variable language_">window</span>.perfMetrics.load}</span>ms`</span>);
          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">groupEnd</span>();
        <span class="hljs-comment">// }</span>
      }
    }).<span class="hljs-title function_">observe</span>({ <span class="hljs-attr">type</span>: <span class="hljs-string">'largest-contentful-paint'</span>, <span class="hljs-attr">buffered</span>: <span class="hljs-literal">true</span> });
  }
};
</code></pre>
<h3 data-id="heading-19">å®é™…æµ‹é‡ä½ ä¼šå‘ç°ï¼Œè¿™æ®µé€»è¾‘ä¼šè§¦å‘ä¸‰æ¬¡å·¦å³ï¼Œä½†ä¸è¦æ‹…å¿ƒï¼Œè¿™æ˜¯æ­£å¸¸çš„</h3>
<p>æ ¸å¿ƒç»“è®ºï¼š<strong>LCPï¼ˆæœ€å¤§å†…å®¹ç»˜åˆ¶ï¼‰åœ¨é¡µé¢åŠ è½½è¿‡ç¨‹ä¸­ä¼šè¢«è§¦å‘å¤šæ¬¡çš„</strong>ï¼Œä½†æœ€ç»ˆæœ‰æ•ˆæŒ‡æ ‡é€šå¸¸æ˜¯<strong>æœ€åä¸€æ¬¡</strong>è§¦å‘çš„ç»“æœï¼›é‡å¤è§¦å‘çš„æœ¬è´¨æ˜¯é¡µé¢ä¸­â€œæœ€å¤§å†…å®¹å…ƒç´ â€çš„åŠ¨æ€å˜åŒ–ã€‚</p>
<p>æ‰€ä»¥æˆ‘ä»¬è¦å–æœ€åä¸€æ¬¡çš„LCPï¼Œä½œä¸ºæœ€ç»ˆæ•°æ®</p>
<h2 data-id="heading-20">å…³äºFCP(Fisrt Contentful Paint)</h2>
<p>æ ¸å¿ƒç»“è®ºï¼š<strong>FCPï¼ˆé¦–æ¬¡å†…å®¹ç»˜åˆ¶ï¼‰çš„æ ¸å¿ƒæ„ä¹‰å¹¶éâ€œä»…åˆ¤æ–­æ¸²æŸ“æ—¶é—´è¿‡é•¿â€ï¼Œè€Œæ˜¯ä½œä¸ºç”¨æˆ·æ„ŸçŸ¥çš„ã€Œç™½å±æ—¶é•¿ã€æ ¸å¿ƒæŒ‡æ ‡ï¼Œç”¨äºå®šä½ä»è¯·æ±‚åˆ°é¦–æ¬¡å¯è§å†…å®¹çš„å…¨é“¾è·¯ç“¶é¢ˆï¼›åˆ¤æ–­æ¸²æŸ“è€—æ—¶åªæ˜¯å…¶è¡ç”Ÿç”¨é€”ä¹‹ä¸€</strong>ã€‚</p>
<hr/>
<h3 data-id="heading-21">ä¸€ã€FCP çš„æ ¸å¿ƒå®šä¹‰ä¸è®¾è®¡ç›®æ ‡</h3>
<p>FCP æ˜¯æµè§ˆå™¨é¦–æ¬¡å°†<strong>æ–‡æœ¬ã€å›¾ç‰‡ã€èƒŒæ™¯å›¾æˆ–éç™½è‰²ç”»å¸ƒ</strong>ç»˜åˆ¶åˆ°è§†å£çš„æ—¶é—´ï¼Œæ˜¯ W3C Web Vitals å®šä¹‰çš„æ ¸å¿ƒç”¨æˆ·ä½“éªŒæŒ‡æ ‡ä¹‹ä¸€ï¼Œæ ¸å¿ƒç›®æ ‡æ˜¯ï¼š</p>
<ol>
<li><strong>é‡åŒ–ç™½å±æ—¶é•¿</strong>ï¼šç›´æ¥åæ˜ ç”¨æˆ·ä»è¾“å…¥ç½‘å€åˆ°çœ‹åˆ°é¡µé¢å†…å®¹çš„ç­‰å¾…æ—¶é—´ï¼Œç™½å±è¶Šé•¿ï¼Œç”¨æˆ·æµå¤±ç‡è¶Šé«˜ï¼›</li>
<li><strong>åˆ’åˆ†å…¨é“¾è·¯ç“¶é¢ˆåŒºé—´</strong>ï¼šFCP æ—¶é—´ç‚¹æ˜¯ã€Œç½‘ç»œè¯·æ±‚+HTMLè§£æ+CSSè®¡ç®—+é¦–æ¬¡æ¸²æŸ“ã€çš„ç»ˆç‚¹ï¼Œé€šè¿‡å¯¹æ¯” TTFBã€DCL ç­‰æŒ‡æ ‡ï¼Œå¯ç²¾å‡†å®šä½ç“¶é¢ˆåœ¨å“ªä¸ªé˜¶æ®µï¼›</li>
<li><strong>éªŒè¯æ ¸å¿ƒä¼˜åŒ–æ•ˆæœ</strong>ï¼šå¦‚æœåŠ¡ç«¯æ¸²æŸ“ï¼ˆSSRï¼‰ã€é¢„åŠ è½½å…³é”®èµ„æºã€CSS å†…è”ç­‰ä¼˜åŒ–çš„æ•ˆæœï¼Œéƒ½å¯é€šè¿‡ FCP å‰åå·®å€¼é‡åŒ–ã€‚</li>
</ol>
<h3 data-id="heading-22">äºŒã€FCP å¦‚ä½•è¾…åŠ©åˆ¤æ–­æ¸²æŸ“è€—æ—¶ï¼ˆä½†ä¸æ˜¯å”¯ä¸€ç›®çš„ï¼‰</h3>
<p><code>åˆ¤æ–­æ¸²æŸ“è€—æ—¶æ˜¯ FCP çš„**è¡ç”Ÿç”¨é€”**ï¼Œä¸”å¿…é¡»ç»“åˆå…¶ä»–æŒ‡æ ‡ï¼ˆå¦‚ LCPã€TTFBã€DCLï¼‰æ‰èƒ½å‡†ç¡®åˆ¤æ–­ï¼Œå•ç‹¬çœ‹ FCP æ— æ³•å¾—å‡ºç»“è®ºï¼š</code></p>
<h4 data-id="heading-23">1. ç»“åˆ TTFB åˆ¤æ–­ï¼šç“¶é¢ˆåœ¨ç½‘ç»œ/æœåŠ¡ç«¯è¿˜æ˜¯æ¸²æŸ“</h4>
<ul>
<li>è‹¥ <code>TTFB &gt; 3000ms</code> ä¸” <code>FCP â‰ˆ TTFB + 500ms</code>ï¼šç“¶é¢ˆåœ¨<strong>ç½‘ç»œ/æœåŠ¡ç«¯</strong>ï¼ˆé¦–å­—èŠ‚æ—¶é—´è¿‡é•¿ï¼Œæ¸²æŸ“é˜¶æ®µè€—æ—¶å¯æ§ï¼‰ï¼›</li>
<li>è‹¥ <code>TTFB &lt; 1000ms</code> ä½† <code>FCP &gt; 4000ms</code>ï¼šç“¶é¢ˆåœ¨<strong>æ¸²æŸ“é˜»å¡</strong>ï¼ˆå¦‚ CSS æœªå†…è”ã€åŒæ­¥ JS æ‰§è¡Œè¿‡é•¿ï¼Œå¯¼è‡´ HTML è§£æåæ— æ³•ç«‹å³æ¸²æŸ“ï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-24">2. ç»“åˆ LCP åˆ¤æ–­ï¼šæ¸²æŸ“é˜¶æ®µè€—æ—¶æ˜¯å¦è¿‡é•¿</h4>
<ul>
<li>å¦‚ä¹‹å‰çš„æ¡ˆä¾‹ï¼Œ<code>LCP-FCP &lt; 500ms</code>ï¼šæ¸²æŸ“é˜¶æ®µè€—æ—¶å¯æ§ï¼›</li>
<li>è‹¥ <code>LCP-FCP &gt; 1000ms</code>ï¼šæ¸²æŸ“é˜¶æ®µæ˜¯æ ¸å¿ƒç“¶é¢ˆï¼ˆå¦‚å¤§å›¾ç‰‡åŠ è½½ã€å¤æ‚å¸ƒå±€è®¡ç®—ã€é«˜é¢‘é‡æ’é‡ç»˜ï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-25">3. ç»“åˆ DCL åˆ¤æ–­ï¼šDOM è§£æä¸æ¸²æŸ“çš„å…³ç³»</h4>
<ul>
<li>è‹¥ <code>FCP &lt; DCL</code>ï¼šè¯´æ˜æµè§ˆå™¨åœ¨ DOM å®Œå…¨è§£æå‰å°±å®Œæˆäº†é¦–æ¬¡ç»˜åˆ¶ï¼ˆå¦‚ HTML ä¸­ç›´æ¥å†™æ­»çš„æ–‡æœ¬/å›¾ç‰‡ï¼‰ï¼Œæ¸²æŸ“æµç¨‹æ­£å¸¸ï¼›</li>
<li>è‹¥ <code>FCP &gt; DCL</code>ï¼šè¯´æ˜ DOM è§£æå®Œæˆåï¼Œæ¸²æŸ“ä»è¢«é˜»å¡ï¼ˆå¦‚ CSS æœªåŠ è½½å®Œæˆã€JS æ‰§è¡Œé˜»å¡æ¸²æŸ“ï¼‰ï¼Œæ¸²æŸ“é˜¶æ®µå­˜åœ¨é—®é¢˜ã€‚</li>
</ul>
<h3 data-id="heading-26">ä¸‰ã€FCP çš„å…¶ä»–å…³é”®æ„ä¹‰ï¼ˆè¶…è¶Šæ¸²æŸ“è€—æ—¶åˆ¤æ–­ï¼‰</h3>
<h4 data-id="heading-27">1. ä½œä¸ºç”¨æˆ·ç•™å­˜çš„å…³é”®æŒ‡æ ‡</h4>
<ul>
<li>ç ”ç©¶è¡¨æ˜ï¼ŒFCP è¶…è¿‡ 3 ç§’ï¼Œç”¨æˆ·æµå¤±ç‡ä¼šæ˜¾è‘—ä¸Šå‡ï¼›</li>
<li>ç”µå•†ã€å†…å®¹ç±»ç½‘ç«™å¯¹ FCP å°¤ä¸ºæ•æ„Ÿï¼Œä¼˜åŒ– FCP å¯ç›´æ¥æå‡ç”¨æˆ·ç•™å­˜å’Œè½¬åŒ–ç‡ã€‚</li>
</ul>
<h4 data-id="heading-28">2. è¾…åŠ©å®šä½èµ„æºåŠ è½½ä¸é˜»å¡é—®é¢˜</h4>
<ul>
<li>è‹¥ FCP æ—¶é—´è¿‡é•¿ï¼Œä¸” Network é¢æ¿æ˜¾ç¤º CSS/JS èµ„æºåŠ è½½ç¼“æ…¢ï¼Œè¯´æ˜<strong>å…³é”®èµ„æºåŠ è½½æ˜¯ç“¶é¢ˆ</strong>ï¼›</li>
<li>è‹¥ CSS/JS åŠ è½½å¿«ï¼Œä½† FCP ä»æ™šï¼Œè¯´æ˜<strong>CSS è®¡ç®—æˆ– JS æ‰§è¡Œé˜»å¡äº†æ¸²æŸ“</strong>ã€‚</li>
</ul>
<h4 data-id="heading-29">3. éªŒè¯è·¨ç¯å¢ƒçš„æ€§èƒ½ä¸€è‡´æ€§</h4>
<ul>
<li>åœ¨ä¸åŒè®¾å¤‡ï¼ˆé«˜ç«¯æœº/ä½ç«¯æœºï¼‰ã€ä¸åŒç½‘ç»œï¼ˆ5G/Fast 3Gï¼‰ä¸‹æµ‹é‡ FCPï¼Œå¯éªŒè¯é¡µé¢æ€§èƒ½çš„å…¼å®¹æ€§ï¼›</li>
<li>è‹¥ä½ç«¯æœº FCP æ¯”é«˜ç«¯æœºé«˜ 2 å€ä»¥ä¸Šï¼Œè¯´æ˜é¡µé¢æœªé€‚é…ä½ç«¯æœºï¼Œéœ€ä¼˜åŒ–æ¸²æŸ“æ€§èƒ½ã€‚</li>
</ul>
<h3 data-id="heading-30">å››ã€å¸¸è§è¯¯åŒºï¼šFCP ä¸æ˜¯æ¸²æŸ“è€—æ—¶çš„å”¯ä¸€åˆ¤æ–­æ ‡å‡†</h3>
<ol>
<li><strong>è¯¯åŒº1</strong>ï¼šFCP é«˜ = æ¸²æŸ“è€—æ—¶è¿‡é•¿ â†’ é”™è¯¯ï¼Œå¯èƒ½æ˜¯ç½‘ç»œ/æœåŠ¡ç«¯ç“¶é¢ˆï¼›</li>
<li><strong>è¯¯åŒº2</strong>ï¼šFCP ä½ = é¡µé¢æ€§èƒ½å¥½ â†’ é”™è¯¯ï¼ŒFCP åªåæ˜ é¦–æ¬¡å†…å®¹ç»˜åˆ¶ï¼Œä¸åæ˜ å†…å®¹å®Œæ•´æ€§ï¼ˆå¦‚ FCP ä½ä½† LCP é«˜ï¼Œé¦–å±æ ¸å¿ƒå†…å®¹ä»éœ€ç­‰å¾…ï¼‰ï¼›</li>
<li><strong>è¯¯åŒº3</strong>ï¼šFCP å¯æ›¿ä»£ LCP â†’ é”™è¯¯ï¼ŒLCP åæ˜ é¦–å±æ ¸å¿ƒå†…å®¹å°±ç»ªæ—¶é—´ï¼Œæ˜¯æ¯” FCP æ›´é‡è¦çš„ç”¨æˆ·ä½“éªŒæŒ‡æ ‡ã€‚</li>
</ol>
<hr/>
<h3 data-id="heading-31">æ€»ç»“</h3>
<p>FCP çš„æ ¸å¿ƒæ„ä¹‰æ˜¯<strong>é‡åŒ–ç™½å±æ—¶é•¿ã€åˆ’åˆ†å…¨é“¾è·¯ç“¶é¢ˆåŒºé—´ã€éªŒè¯æ ¸å¿ƒä¼˜åŒ–æ•ˆæœ</strong>ï¼Œåˆ¤æ–­æ¸²æŸ“è€—æ—¶åªæ˜¯å…¶è¡ç”Ÿç”¨é€”ä¹‹ä¸€ï¼Œä¸”å¿…é¡»ç»“åˆ TTFBã€LCPã€DCL ç­‰æŒ‡æ ‡æ‰èƒ½å‡†ç¡®åˆ¤æ–­ã€‚å•ç‹¬çœ‹ FCP æ— æ³•å¾—å‡ºâ€œæ¸²æŸ“æ—¶é—´è¿‡é•¿â€çš„ç»“è®ºï¼Œéœ€å»ºç«‹å…¨é“¾è·¯æŒ‡æ ‡å¯¹æ¯”åˆ†æçš„æ€ç»´ã€‚</p>
<h2 data-id="heading-32">å¦‚ä½•æµ‹é‡ FCP</h2>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">collectFCP</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> paintEntries = performance.<span class="hljs-title function_">getEntriesByType</span>(<span class="hljs-string">'paint'</span>);
    <span class="hljs-keyword">const</span> fcpEntry = paintEntries.<span class="hljs-title function_">find</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item.<span class="hljs-property">name</span> === <span class="hljs-string">'first-contentful-paint'</span>);
    <span class="hljs-keyword">if</span> (fcpEntry) {
        <span class="hljs-variable language_">window</span>.<span class="hljs-property">perfMetrics</span>.<span class="hljs-property">fcp</span> = fcpEntry.<span class="hljs-property">startTime</span>.<span class="hljs-title function_">toFixed</span>(<span class="hljs-number">2</span>);
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'FCP é‡‡é›†å®Œæˆï¼š'</span>, <span class="hljs-variable language_">window</span>.<span class="hljs-property">perfMetrics</span>.<span class="hljs-property">fcp</span>, <span class="hljs-string">'ms'</span>);
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-comment">// è‹¥æœªé‡‡é›†åˆ°ï¼Œ100ms åé‡è¯•ï¼ˆæœ€å¤šé‡è¯• 3 æ¬¡ï¼‰</span>
        retry++;
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'retry--'</span>, retry)
        <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">collectFCP</span>(), <span class="hljs-number">100</span>);
    }
}
</code></pre>
<p>æ ¸å¿ƒç»“è®ºï¼š<strong>ç»™ <code>collectFCP</code> åŠ  100ms å»¶æ—¶ï¼Œæ˜¯ä¸ºäº†è§„é¿ã€ŒFCP æŒ‡æ ‡æœªå®Œå…¨è§¦å‘å°±é‡‡é›†ã€çš„é—æ¼é—®é¢˜</strong>â€”â€”FCPï¼ˆé¦–æ¬¡å†…å®¹ç»˜åˆ¶ï¼‰çš„è§¦å‘æ—¶æœºä¾èµ–æµè§ˆå™¨çš„æ¸²æŸ“ç®¡çº¿ï¼Œé¡µé¢åŠ è½½åˆæœŸå¯èƒ½è¿˜æœªç”Ÿæˆ FCP æ¡ç›®ï¼Œå»¶æ—¶èƒ½ç¡®ä¿é‡‡é›†åˆ°å®Œæ•´çš„æŒ‡æ ‡æ•°æ®ã€‚</p>
<hr/>
<h3 data-id="heading-33">ä¸€ã€å…ˆç†è§£ FCP çš„è§¦å‘é€»è¾‘ï¼ˆå»¶æ—¶çš„åº•å±‚åŸå› ï¼‰</h3>
<p>FCP æ˜¯æµè§ˆå™¨åœ¨ã€Œé¦–æ¬¡å°†æ–‡æœ¬/å›¾ç‰‡/èƒŒæ™¯å›¾ç­‰å†…å®¹ç»˜åˆ¶åˆ°å±å¹•ã€æ—¶è§¦å‘çš„æ€§èƒ½æŒ‡æ ‡ï¼Œå…¶è§¦å‘æœ‰ä¸¤ä¸ªå…³é”®ç‰¹ç‚¹ï¼š</p>
<ol>
<li><strong>å¼‚æ­¥æ€§</strong>ï¼šFCP ä¸æ˜¯å’Œ <code>DOMContentLoaded</code>/<code>load</code> åŒæ­¥è§¦å‘çš„ï¼Œè€Œæ˜¯ä¾èµ–æµè§ˆå™¨çš„ã€Œæ¸²æŸ“å¸§ã€â€”â€”HTML è§£æã€CSS è®¡ç®—ã€å¸ƒå±€å®Œæˆåï¼Œæµè§ˆå™¨æ‰ä¼šç»˜åˆ¶åƒç´ ï¼Œè¿™ä¸ªè¿‡ç¨‹æ˜¯å¼‚æ­¥çš„ï¼Œä¸”è€—æ—¶ä¸ç¡®å®šï¼ˆæ¯”å¦‚ä½ç«¯æœº/å¼±ç½‘ä¸‹å¯èƒ½å»¶è¿Ÿå‡ åæ¯«ç§’ï¼‰ï¼›</li>
<li><strong>é‡‡é›†æ—¶æœºæ•æ„Ÿ</strong>ï¼šå¦‚æœåœ¨ <code>FCP</code> è§¦å‘å‰è°ƒç”¨ <code>performance.getEntriesByType('paint')</code>ï¼Œä¼šè¿”å›ç©ºæ•°ç»„æˆ–ä¸åŒ…å« FCP æ¡ç›®çš„ç»“æœï¼Œå¯¼è‡´é‡‡é›†åˆ°çš„ FCP ä¸º 0ï¼ˆé—æ¼ï¼‰ã€‚</li>
</ol>
<p>ä¸¾ä¸ªç›´è§‚çš„æ—¶é—´çº¿ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-number">0ms</span> â†’ é¡µé¢å¼€å§‹åŠ è½½ï¼Œæ‰§è¡Œé‡‡é›†è„šæœ¬
<span class="hljs-number">20ms</span> â†’ æµè§ˆå™¨è§£æ<span class="hljs-selector-tag">HTML</span>ï¼Œä½†è¿˜æœªç»˜åˆ¶ä»»ä½•å†…å®¹ï¼ˆFCPæœªè§¦å‘ï¼‰
<span class="hljs-number">50ms</span> â†’ æµè§ˆå™¨å®Œæˆé¦–æ¬¡ç»˜åˆ¶ï¼Œè§¦å‘FCPï¼Œç”Ÿæˆpaintæ¡ç›®
<span class="hljs-number">80ms</span> â†’ è‹¥æœªå»¶æ—¶ï¼Œå·²æ‰§è¡Œå®ŒcollectFCPï¼Œé‡‡é›†ä¸åˆ°FCPï¼›è‹¥å»¶æ—¶<span class="hljs-number">100ms</span>ï¼Œæ­¤æ—¶æ‰§è¡ŒcollectFCPèƒ½ç²¾å‡†é‡‡é›†
</code></pre>
<h3 data-id="heading-34">äºŒã€å¯¹æ¯” LCPï¼šä¸ºä»€ä¹ˆ LCP ä¸éœ€è¦å»¶æ—¶ï¼Ÿ</h3>
<p>ä½ ä¼šå‘ç° <code>collectLCP()</code> æ˜¯ç«‹å³æ‰§è¡Œçš„ï¼Œå’Œ FCP ä¸åŒï¼š</p>
<ul>
<li>LCP ç”¨ <code>PerformanceObserver</code> ç›‘å¬ï¼ˆå¼‚æ­¥ç›‘å¬ï¼‰ï¼Œåªè¦æ³¨å†Œäº†ç›‘å¬ï¼Œæ— è®º LCP ä½•æ—¶è§¦å‘ï¼Œéƒ½ä¼šæ•è·åˆ°ï¼ˆåŒ…æ‹¬ç›‘å¬å‰å·²è§¦å‘çš„å†å²æ¡ç›®ï¼Œå› ä¸º <code>buffered: true</code>ï¼‰ï¼›</li>
<li>FCP æ˜¯é€šè¿‡ <code>performance.getEntriesByType('paint')</code> ã€Œä¸»åŠ¨æŸ¥è¯¢ã€ï¼ˆåŒæ­¥è·å–ï¼‰ï¼Œå¦‚æœæŸ¥è¯¢æ—¶ FCP è¿˜æœªè§¦å‘ï¼Œå°±ä¼šé—æ¼ï¼Œå› æ­¤éœ€è¦å»¶æ—¶ç­‰å¾… FCP ç”Ÿæˆã€‚</li>
</ul>
<h3 data-id="heading-35">ä¸‰ã€æ³¨æ„äº‹é¡¹ï¼šç›‘å¬ <code>paint</code> äº‹ä»¶ + ä¸»åŠ¨æŸ¥è¯¢-- æœ€ä¼˜è§£</h3>
<p>100ms æ˜¯ã€Œç»éªŒå€¼ã€ï¼Œè™½ç„¶èƒ½è§£å†³å¤§éƒ¨åˆ†é—®é¢˜ï¼Œä½†ä¹Ÿå­˜åœ¨å°æ¦‚ç‡çš„é—æ¼ï¼ˆæ¯”å¦‚ FCP è§¦å‘è¶…è¿‡ 100msï¼‰ã€‚æ›´ä¸¥è°¨çš„æ–¹æ¡ˆæ˜¯ã€Œç›‘å¬ <code>paint</code> äº‹ä»¶ + ä¸»åŠ¨æŸ¥è¯¢ã€ç»“åˆï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ›´ä¸¥è°¨çš„ FCP é‡‡é›†é€»è¾‘ï¼ˆæ›¿ä»£ setTimeoutï¼‰</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">collectFCP</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> paintEntries = performance.<span class="hljs-title function_">getEntriesByType</span>(<span class="hljs-string">'paint'</span>);
  <span class="hljs-keyword">const</span> fcpEntry = paintEntries.<span class="hljs-title function_">find</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item.<span class="hljs-property">name</span> === <span class="hljs-string">'first-contentful-paint'</span>);
  <span class="hljs-keyword">if</span> (fcpEntry) {
    <span class="hljs-variable language_">window</span>.<span class="hljs-property">perfMetrics</span>.<span class="hljs-property">fcp</span> = fcpEntry.<span class="hljs-property">startTime</span>.<span class="hljs-title function_">toFixed</span>(<span class="hljs-number">2</span>);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'FCP é‡‡é›†å®Œæˆï¼š'</span>, <span class="hljs-variable language_">window</span>.<span class="hljs-property">perfMetrics</span>.<span class="hljs-property">fcp</span>, <span class="hljs-string">'ms'</span>);
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// è‹¥æœªé‡‡é›†åˆ°ï¼Œ100ms åé‡è¯•ï¼ˆæœ€å¤šé‡è¯• 3 æ¬¡ï¼‰</span>
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">collectFCP</span>(), <span class="hljs-number">100</span>);
  }
}

<span class="hljs-comment">// ç«‹å³åˆå§‹åŒ–é‡‡é›†ï¼Œæœªé‡‡é›†åˆ°åˆ™è‡ªåŠ¨é‡è¯•</span>
<span class="hljs-title function_">collectFCP</span>();
</code></pre>
<p>è¿™ä¸ªæ–¹æ¡ˆçš„ä¼˜åŠ¿ï¼š</p>
<ul>
<li>æ— éœ€å›ºå®šå»¶æ—¶ï¼Œé¦–æ¬¡æŸ¥è¯¢ä¸åˆ° FCP æ—¶è‡ªåŠ¨é‡è¯•ï¼›</li>
<li>é¿å…äº†ã€Œå»¶æ—¶è¿‡é•¿æµªè´¹æ—¶é—´ã€æˆ–ã€Œå»¶æ—¶è¿‡çŸ­é—æ¼ã€çš„é—®é¢˜ï¼›</li>
<li>å¯é€šè¿‡é™åˆ¶é‡è¯•æ¬¡æ•°ï¼ˆå¦‚ 3 æ¬¡ï¼‰ï¼Œé˜²æ­¢æ— é™é‡è¯•ã€‚</li>
</ul>
<hr/>
<h4 data-id="heading-36">æ€»ç»“</h4>
<p>åŠ  100ms å»¶æ—¶çš„æ ¸å¿ƒç›®çš„æ˜¯ã€Œç­‰å¾… FCP æ¡ç›®ç”Ÿæˆï¼Œé¿å…é‡‡é›†é—æ¼ã€â€”â€”FCP æ˜¯åŒæ­¥ä¸»åŠ¨æŸ¥è¯¢ï¼Œè€Œå…¶è§¦å‘æ˜¯å¼‚æ­¥çš„ï¼Œå»¶æ—¶èƒ½å…¼å®¹æµè§ˆå™¨æ¸²æŸ“çš„æ—¶é—´å·®ï¼›è€Œ LCP ç”¨å¼‚æ­¥ç›‘å¬ï¼Œå› æ­¤æ— éœ€å»¶æ—¶ã€‚å¦‚æœè¿½æ±‚æ›´ä¸¥è°¨çš„é‡‡é›†ï¼Œéœ€é‡‡ç”¨ã€Œé‡è¯•æœºåˆ¶ã€æ›¿ä»£å›ºå®šå»¶æ—¶ã€‚</p>
<h2 data-id="heading-37">DOMContentLoaded å’Œ Load</h2>
<p>æœ‰äº†è¿™äº›LCPä¹‹åï¼Œè¿˜éœ€è¦æµ‹é‡ DOMContentLoaded å’Œ Loadå—ï¼Ÿ</p>
<p>æ ¸å¿ƒç»“è®ºï¼š<strong>é¦–å±æ€§èƒ½ä¼˜åŒ–ä¸­ï¼ŒDOMContentLoadedï¼ˆDCLï¼‰å’ŒLoadï¼ˆonloadï¼‰æ˜¯é‡è¦å‚è€ƒæŒ‡æ ‡ï¼Œä½†å¹¶éç›´æ¥è¡¡é‡ç”¨æˆ·ä½“éªŒçš„æ ¸å¿ƒæŒ‡æ ‡ï¼›å¿…é¡»ç»“åˆFCP/LCPç­‰ç”¨æˆ·å¯æ„ŸçŸ¥æŒ‡æ ‡ä¸€èµ·æµ‹é‡ï¼Œè€Œéå•ç‹¬ä¾èµ–</strong>ã€‚</p>
<hr/>
<h3 data-id="heading-38">ä¸€ã€æŒ‡æ ‡å®šä¹‰ä¸æ ¸å¿ƒä½œç”¨</h3>



































<table><thead><tr><th align="left">æŒ‡æ ‡</th><th align="left">è§¦å‘æ—¶æœº</th><th align="left">é¦–å±æ€§èƒ½ä¸­çš„ä½œç”¨</th><th align="left">å±€é™æ€§</th></tr></thead><tbody><tr><td align="left">DOMContentLoadedï¼ˆDCLï¼‰</td><td align="left">HTMLè§£æå®Œæˆï¼ŒDOMæ ‘æ„å»ºå®Œæ¯•ï¼Œä¸ç­‰å¾…æ ·å¼è¡¨ã€å›¾ç‰‡ã€å­å¸§åŠ è½½</td><td align="left">æ ‡å¿—â€œå¯äº¤äº’èµ·ç‚¹â€ï¼Œç”¨äºåˆ¤æ–­JSæ‰§è¡Œæ—¶æœºæ˜¯å¦åˆç†ï¼›å¯è¾…åŠ©å®šä½é¦–å±ä¾èµ–çš„DOMæ¸²æŸ“é˜»å¡é—®é¢˜</td><td align="left">ä¸åæ˜ è§†è§‰å®Œæˆåº¦ï¼ˆå¯èƒ½DOMå°±ç»ªä½†é¦–å±å†…å®¹æœªæ¸²æŸ“ï¼‰</td></tr><tr><td align="left">Loadï¼ˆwindow.onloadï¼‰</td><td align="left">é¡µé¢æ‰€æœ‰èµ„æºï¼ˆHTML/CSS/JS/å›¾ç‰‡/å­—ä½“ç­‰ï¼‰åŠ è½½å®Œæˆ</td><td align="left">æ ‡å¿—â€œå®Œæ•´åŠ è½½ç»ˆç‚¹â€ï¼Œç”¨äºåˆ¤æ–­é™æ€èµ„æºåŠ è½½æ˜¯å¦å­˜åœ¨ç“¶é¢ˆï¼›é€‚åˆéªŒè¯ç¼“å­˜/CDN/èµ„æºå‹ç¼©æ•ˆæœ</td><td align="left">é¦–å±æ€§èƒ½ä¸­å¸¸æ»åäºç”¨æˆ·å®é™…æ„ŸçŸ¥ï¼ˆå¦‚é¦–å±å·²æ¸²æŸ“ä½†éé¦–å±å›¾ç‰‡ä»åœ¨åŠ è½½ï¼‰</td></tr><tr><td align="left">FCPï¼ˆé¦–æ¬¡å†…å®¹ç»˜åˆ¶ï¼‰</td><td align="left">é¡µé¢é¦–æ¬¡å‡ºç°æ–‡æœ¬/å›¾ç‰‡ç­‰å®é™…å†…å®¹çš„æ—¶é—´</td><td align="left">æ ¸å¿ƒç”¨æˆ·ä½“éªŒæŒ‡æ ‡ï¼Œç›´æ¥åæ˜ â€œç™½å±æ—¶é•¿â€</td><td align="left">ä¸å…³æ³¨å†…å®¹å®Œæ•´æ€§</td></tr><tr><td align="left">LCPï¼ˆæœ€å¤§å†…å®¹ç»˜åˆ¶ï¼‰</td><td align="left">é¦–å±æœ€å¤§å…ƒç´ çš„æ¸²æŸ“æ—¶é—´</td><td align="left">æ ¸å¿ƒé¦–å±æ€§èƒ½æŒ‡æ ‡ï¼Œåæ˜ â€œé¦–å±æ ¸å¿ƒå†…å®¹å°±ç»ªæ—¶é•¿â€</td><td align="left">å—å›¾ç‰‡/å­—ä½“åŠ è½½å½±å“è¾ƒå¤§</td></tr></tbody></table>
<h3 data-id="heading-39">äºŒã€æ˜¯å¦éœ€è¦æµ‹é‡ï¼Ÿåˆ†åœºæ™¯åˆ¤æ–­</h3>
<h4 data-id="heading-40">2.1 å¿…é¡»æµ‹é‡çš„åœºæ™¯</h4>
<ol>
<li><strong>é¦–å±ä¾èµ–JSæ¸²æŸ“ï¼ˆå¦‚SPAã€æœåŠ¡ç«¯æ¸²æŸ“åå®¢æˆ·ç«¯hydrationï¼‰</strong>
<ul>
<li>DCLè§¦å‘æ—¶ï¼ŒDOMå·²å°±ç»ªï¼ŒJSå¯å®‰å…¨æ‰§è¡Œï¼›è‹¥DCLæ—¶é—´è¿‡é•¿ï¼Œè¯´æ˜HTMLè§£ææˆ–é˜»å¡JSåŠ è½½æœ‰é—®é¢˜</li>
<li>ç¤ºä¾‹ï¼šé¦–å±å†…å®¹ç”±JSåŠ¨æ€æ’å…¥ï¼ŒDCLå»¶è¿Ÿä¼šç›´æ¥å¯¼è‡´FCP/LCPå»¶è¿Ÿ</li>
</ul>
</li>
<li><strong>é¦–å±åŒ…å«å¤§é‡é™æ€èµ„æºï¼ˆå¦‚é¦–å±è½®æ’­å›¾ã€èƒŒæ™¯å›¾ã€å­—ä½“ï¼‰</strong>
<ul>
<li>Loadæ—¶é—´å¯åæ˜ è¿™äº›èµ„æºçš„åŠ è½½å®Œæˆæƒ…å†µï¼›è‹¥Loadæ—¶é—´è¿œå¤§äºLCPï¼Œè¯´æ˜éé¦–å±èµ„æºåŠ è½½å­˜åœ¨ä¼˜åŒ–ç©ºé—´ï¼ˆå¦‚æ‡’åŠ è½½ï¼‰</li>
</ul>
</li>
<li><strong>æ€§èƒ½ä¼˜åŒ–æ•ˆæœé‡åŒ–ï¼ˆå¦‚ä»£ç åˆ†å‰²ã€èµ„æºé¢„åŠ è½½ã€ç¼“å­˜ç­–ç•¥ä¼˜åŒ–ï¼‰</strong>
<ul>
<li>ä¼˜åŒ–å‰åDCL/Loadæ—¶é—´å¯¹æ¯”ï¼Œå¯éªŒè¯ï¼š
<ul>
<li>ä»£ç åˆ†å‰²æ˜¯å¦å‡å°‘äº†é˜»å¡JSçš„ä½“ç§¯ï¼ˆDCLæå‰ï¼‰</li>
<li>é™æ€èµ„æºç¼“å­˜æ˜¯å¦ç”Ÿæ•ˆï¼ˆLoadæ—¶é—´ç¼©çŸ­ï¼‰</li>
</ul>
</li>
</ul>
</li>
<li><strong>å¤šç¯å¢ƒ/å¤šè®¾å¤‡é€‚é…éªŒè¯</strong>
<ul>
<li>ä½ç«¯è®¾å¤‡æˆ–å¼±ç½‘ç¯å¢ƒä¸‹ï¼ŒDCL/Loadæ—¶é—´å¯èƒ½æ˜¾è‘—å¢åŠ ï¼Œéœ€æµ‹é‡ä»¥ç¡®ä¿é¦–å±ä½“éªŒè¾¾æ ‡</li>
</ul>
</li>
</ol>
<h4 data-id="heading-41">2.2 å¯å¼±åŒ–æµ‹é‡çš„åœºæ™¯</h4>
<ol>
<li><strong>çº¯é™æ€é¦–å±ï¼ˆæ— JSæ¸²æŸ“ï¼Œä»…HTML+CSSï¼‰</strong>
<ul>
<li>FCP/LCPå·²èƒ½å¾ˆå¥½åæ˜ é¦–å±ä½“éªŒï¼ŒDCL/Loadçš„å‚è€ƒä»·å€¼è¾ƒä½</li>
</ul>
</li>
<li><strong>é¦–å±å†…å®¹æå‰æ¸²æŸ“ï¼ˆå¦‚æœåŠ¡ç«¯æ¸²æŸ“ã€SSGï¼‰</strong>
<ul>
<li>é¦–å±å†…å®¹åœ¨HTMLè§£æè¿‡ç¨‹ä¸­å·²æ¸²æŸ“ï¼ŒDCLè§¦å‘æ—¶FCP/LCPå¯èƒ½å·²å®Œæˆ</li>
</ul>
</li>
</ol>
<h3 data-id="heading-42">ä¸‰ã€æ ¸å¿ƒæŒ‡æ ‡åˆ†æ</h3>
<h4 data-id="heading-43">3.1 æ ¸å¿ƒåˆ†æé€»è¾‘ï¼ˆä¼˜åŒ–å†³ç­–ä¾æ®ï¼‰</h4>

























<table><thead><tr><th align="left">æŒ‡æ ‡ç»„åˆ</th><th align="left">é—®é¢˜è¯Šæ–­</th><th align="left">ä¼˜åŒ–æ–¹å‘</th></tr></thead><tbody><tr><td align="left">DCL è¿œ &gt; FCP</td><td align="left">HTMLè§£æé˜»å¡ï¼ˆå¦‚å†…è”JSæ‰§è¡Œè¿‡é•¿ï¼‰</td><td align="left">æ‹†åˆ†å†…è”é•¿ä»»åŠ¡ã€ä½¿ç”¨defer/asyncåŠ è½½éå…³é”®JS</td></tr><tr><td align="left">Load è¿œ &gt; LCP</td><td align="left">éé¦–å±èµ„æºåŠ è½½è€—æ—¶è¿‡é•¿</td><td align="left">æ‡’åŠ è½½éé¦–å±å›¾ç‰‡/è§†é¢‘ã€ä¼˜åŒ–é™æ€èµ„æºç¼“å­˜</td></tr><tr><td align="left">DCL å»¶è¿Ÿ &amp; FCP å»¶è¿Ÿ</td><td align="left">é˜»å¡JSåŠ è½½/æ‰§è¡Œå¯¼è‡´é¦–å±æ¸²æŸ“å»¶è¿Ÿ</td><td align="left">ä»£ç åˆ†å‰²ã€é¢„åŠ è½½å…³é”®JSã€ä¼˜åŒ–JSæ‰§è¡Œæ€§èƒ½</td></tr></tbody></table>
<h3 data-id="heading-44">å››ã€æµ‹é‡æœ€ä½³å®è·µä¸é¿å‘</h3>
<ol>
<li><strong>æµ‹é‡æ¡ä»¶</strong>ï¼šå…³é—­æµè§ˆå™¨æ’ä»¶ã€æ¸…ç©ºç¼“å­˜ï¼ˆé¦–æ¬¡è®¿é—®ï¼‰å’Œå¯ç”¨ç¼“å­˜ï¼ˆäºŒæ¬¡è®¿é—®ï¼‰åˆ†åˆ«æµ‹é‡ï¼›ä½¿ç”¨çœŸå®ç½‘ç»œç¯å¢ƒï¼ˆ4G/5Gï¼‰å’Œç›®æ ‡è®¾å¤‡</li>
<li><strong>æŒ‡æ ‡ä¼˜å…ˆçº§</strong>ï¼šFCP &gt; LCP &gt; TTFB &gt; DCL &gt; Load</li>
<li><strong>é¿å‘</strong>ï¼š
<ul>
<li>ä¸è¦å•ç‹¬ç”¨DCL/Loadè¡¡é‡é¦–å±æ€§èƒ½ï¼ˆå¦‚Loadæ—¶é—´çŸ­ä½†FCP/LCPé•¿ï¼Œç”¨æˆ·ä½“éªŒä»å·®ï¼‰</li>
<li>ä¸è¦åœ¨å¼€å‘ç¯å¢ƒæµ‹é‡ï¼ˆå¼€å‘ç¯å¢ƒæœ‰sourcemapã€çƒ­æ›´æ–°ç­‰å¹²æ‰°ï¼Œæ•°æ®ä¸å‡†ï¼‰</li>
</ul>
</li>
</ol>
<hr/>
<h3 data-id="heading-45">æ€»ç»“</h3>
<p>é¦–å±æ€§èƒ½ä¼˜åŒ–ä¸­ï¼Œ<strong>DCLå’ŒLoadéœ€è¦æµ‹é‡ï¼Œä½†åº”ä½œä¸ºè¾…åŠ©æŒ‡æ ‡ï¼Œä¸FCP/LCPç­‰æ ¸å¿ƒç”¨æˆ·ä½“éªŒæŒ‡æ ‡ç»“åˆåˆ†æ</strong>ã€‚æµ‹é‡çš„æ ¸å¿ƒç›®çš„æ˜¯å®šä½é¦–å±æ¸²æŸ“çš„é˜»å¡ç‚¹å’Œé™æ€èµ„æºåŠ è½½çš„ä¼˜åŒ–ç©ºé—´ï¼Œè€Œéå•çº¯è¿½æ±‚DCL/Loadæ—¶é—´çš„ç¼©çŸ­ã€‚</p>
<h2 data-id="heading-46">å¦‚ä½•æµ‹é‡DCLå’ŒLoad</h2>
<pre><code class="hljs language-js" lang="js">
<span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'DOMContentLoaded'</span>, collectNavigationMetrics);
<span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'load'</span>, collectNavigationMetricsOfLoad); <span class="hljs-comment">// è¡¥å……LoadæŒ‡æ ‡</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">collectNavigationMetrics</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-keyword">const</span> navEntry = performance.<span class="hljs-title function_">getEntriesByType</span>(<span class="hljs-string">'navigation'</span>)[<span class="hljs-number">0</span>];
        <span class="hljs-keyword">if</span> (navEntry) {
            <span class="hljs-variable language_">window</span>.<span class="hljs-property">perfMetrics</span>.<span class="hljs-property">ttfb</span> = (navEntry.<span class="hljs-property">responseStart</span> - navEntry.<span class="hljs-property">requestStart</span>).<span class="hljs-title function_">toFixed</span>(<span class="hljs-number">2</span>);
            <span class="hljs-variable language_">window</span>.<span class="hljs-property">perfMetrics</span>.<span class="hljs-property">dcl</span> = (navEntry.<span class="hljs-property">domContentLoadedEventEnd</span> - navEntry.<span class="hljs-property">fetchStart</span>).<span class="hljs-title function_">toFixed</span>(<span class="hljs-number">2</span>);

        }
    }, <span class="hljs-number">0</span>)
};

<span class="hljs-keyword">const</span> <span class="hljs-title function_">collectNavigationMetricsOfLoad</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-keyword">const</span> navEntry = performance.<span class="hljs-title function_">getEntriesByType</span>(<span class="hljs-string">'navigation'</span>)[<span class="hljs-number">0</span>];
        <span class="hljs-keyword">if</span> (navEntry) {
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'loadEventEnd---'</span>, navEntry.<span class="hljs-property">loadEventEnd</span>)
            <span class="hljs-variable language_">window</span>.<span class="hljs-property">perfMetrics</span>.<span class="hljs-property">load</span> = (navEntry.<span class="hljs-property">loadEventEnd</span> - navEntry.<span class="hljs-property">fetchStart</span>).<span class="hljs-title function_">toFixed</span>(<span class="hljs-number">2</span>);
        }
    }, <span class="hljs-number">0</span>)

};
</code></pre>
<h3 data-id="heading-47">å¯ä»¥ä¸åŠ å»¶æ—¶å—ï¼Ÿä¸å¯ä»¥ï¼ŒloadEventEndä¼šæ‰“å°ä¸º0</h3>
<p>ä½ åœ¨ <code>load</code> äº‹ä»¶å›è°ƒé‡Œæ‰“å° <code>navEntry.loadEventEnd</code> ç»“æœè¿˜æ˜¯ 0ï¼Œè¿™æ˜¯ä¸€ä¸ªå¾ˆå…¸å‹çš„â€œæ—¶æœºå·®â€é—®é¢˜â€”â€”<strong><code>load</code> äº‹ä»¶è§¦å‘æ—¶ï¼Œ<code>loadEventEnd</code> è¿™ä¸ªæ—¶é—´æˆ³è¿˜æ²¡è¢«æµè§ˆå™¨æœ€ç»ˆå†™å…¥</strong>ï¼Œå¯¼è‡´è¯»å–åˆ°çš„ä»æ˜¯åˆå§‹å€¼ 0ã€‚</p>
<h4 data-id="heading-48">æ ¸å¿ƒåŸå› ï¼šäº‹ä»¶è§¦å‘ä¸æ—¶é—´æˆ³å†™å…¥çš„å…ˆåé¡ºåº</h4>
<p>æµè§ˆå™¨çš„æ‰§è¡Œé€»è¾‘æ˜¯è¿™æ ·çš„ï¼š</p>
<ol>
<li>é¡µé¢æ‰€æœ‰èµ„æºåŠ è½½å®Œæˆ â†’ è§¦å‘ <code>load</code> äº‹ä»¶ â†’ æ‰§è¡Œä½ ç»‘å®šçš„ <code>collectNavigationMetricsOfLoad</code> å›è°ƒï¼›</li>
<li><strong>åœ¨ <code>load</code> äº‹ä»¶å›è°ƒæ‰§è¡Œå®Œæ¯•å</strong>ï¼Œæµè§ˆå™¨æ‰ä¼šæŠŠ <code>loadEventEnd</code> æ ‡è®°ä¸ºå½“å‰æ—¶é—´æˆ³ï¼ˆè€Œéè§¦å‘ <code>load</code> äº‹ä»¶æ—¶å°±å†™å…¥ï¼‰ã€‚</li>
</ol>
<p>ç®€å•è¯´ï¼šä½ åœ¨ <code>load</code> äº‹ä»¶â€œæ­£åœ¨æ‰§è¡Œâ€æ—¶è¯» <code>loadEventEnd</code>ï¼Œå®ƒè¿˜æ²¡æ›´æ–°ï¼›åªæœ‰ç­‰ <code>load</code> äº‹ä»¶æ‰€æœ‰å›è°ƒéƒ½è·‘å®Œï¼Œè¿™ä¸ªå€¼æ‰ä¼šå˜æˆçœŸå®çš„æ—¶é—´æˆ³ã€‚</p>
<h4 data-id="heading-49">è§£å†³æ–¹æ¡ˆï¼šç»™æµè§ˆå™¨ä¸€ç‚¹â€œå†™å…¥æ—¶é—´â€</h4>
<p>æœ€ç¨³å¦¥çš„æ–¹å¼æ˜¯åœ¨ <code>load</code> äº‹ä»¶å›è°ƒé‡Œï¼Œç”¨ <code>setTimeout</code> å»¶è¿ŸæçŸ­æ—¶é—´ï¼ˆ0 æ¯«ç§’å³å¯ï¼Œåˆ©ç”¨äº‹ä»¶å¾ªç¯æœºåˆ¶ï¼‰è¯»å– <code>loadEventEnd</code>ï¼Œæ­¤æ—¶æµè§ˆå™¨å·²ç»å®Œæˆäº†æ—¶é—´æˆ³çš„å†™å…¥ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">collectNavigationMetricsOfLoad</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-comment">// å»¶è¿Ÿ 0msï¼Œè®©æµè§ˆå™¨å…ˆå®Œæˆ loadEventEnd çš„å†™å…¥</span>
  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> navEntry = performance.<span class="hljs-title function_">getEntriesByType</span>(<span class="hljs-string">'navigation'</span>)[<span class="hljs-number">0</span>];
    <span class="hljs-keyword">if</span> (navEntry) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'loadEventEnd---'</span>, navEntry.<span class="hljs-property">loadEventEnd</span>); <span class="hljs-comment">// æ­¤æ—¶ä¼šæ˜¯çœŸå®çš„æ—¶é—´æˆ³</span>
      <span class="hljs-comment">// å¢åŠ è¾¹ç•Œåˆ¤æ–­ï¼Œé¿å…è´Ÿæ•°</span>
      <span class="hljs-keyword">const</span> loadTime = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(<span class="hljs-number">0</span>, navEntry.<span class="hljs-property">loadEventEnd</span> - navEntry.<span class="hljs-property">fetchStart</span>).<span class="hljs-title function_">toFixed</span>(<span class="hljs-number">2</span>);
      <span class="hljs-variable language_">window</span>.<span class="hljs-property">perfMetrics</span> = <span class="hljs-variable language_">window</span>.<span class="hljs-property">perfMetrics</span> || {};
      <span class="hljs-variable language_">window</span>.<span class="hljs-property">perfMetrics</span>.<span class="hljs-property">load</span> = loadTime;
    }
  }, <span class="hljs-number">0</span>);
};
<span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'load'</span>, collectNavigationMetricsOfLoad); <span class="hljs-comment">// è¡¥å……LoadæŒ‡æ ‡</span>
</code></pre>
<h4 data-id="heading-50">æ›´ä¼˜æ–¹æ¡ˆï¼šç›´æ¥ç”¨ durationï¼ˆæ¨èï¼‰</h4>
<p>å¦‚æœä½ åªæ˜¯æƒ³è·å–é¡µé¢ä»å¼€å§‹åŠ è½½åˆ° load äº‹ä»¶å®Œæˆçš„æ€»è€—æ—¶ï¼Œå®Œå…¨å¯ä»¥ä¸ç”¨æ‰‹åŠ¨è®¡ç®—ï¼Œç›´æ¥ç”¨ <code>navEntry.duration</code>â€”â€”è¿™ä¸ªå±æ€§æ˜¯æµè§ˆå™¨è‡ªåŠ¨è®¡ç®—çš„ï¼Œä¸ä¼šå—â€œæ—¶æœºå·®â€å½±å“ï¼Œä¸”æ°¸è¿œæ˜¯æ­£æ•°ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">collectNavigationMetricsOfLoad</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> navEntry = performance.<span class="hljs-title function_">getEntriesByType</span>(<span class="hljs-string">'navigation'</span>)[<span class="hljs-number">0</span>];
  <span class="hljs-keyword">if</span> (navEntry) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ€»åŠ è½½è€—æ—¶ï¼ˆdurationï¼‰---'</span>, navEntry.<span class="hljs-property">duration</span>); <span class="hljs-comment">// ç›´æ¥æ‹¿åˆ°æ­£ç¡®å€¼</span>
    <span class="hljs-variable language_">window</span>.<span class="hljs-property">perfMetrics</span> = <span class="hljs-variable language_">window</span>.<span class="hljs-property">perfMetrics</span> || {};
    <span class="hljs-variable language_">window</span>.<span class="hljs-property">perfMetrics</span>.<span class="hljs-property">load</span> = navEntry.<span class="hljs-property">duration</span>.<span class="hljs-title function_">toFixed</span>(<span class="hljs-number">2</span>);
  }
};
<span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'load'</span>, collectNavigationMetricsOfLoad);
</code></pre>
<h4 data-id="heading-51">æ€»ç»“</h4>
<ol>
<li><code>loadEventEnd</code> ä¸º 0 çš„æ ¸å¿ƒåŸå› æ˜¯ï¼š<code>load</code> äº‹ä»¶è§¦å‘æ—¶ï¼Œæµè§ˆå™¨è¿˜æ²¡æ¥å¾—åŠå†™å…¥è¿™ä¸ªæ—¶é—´æˆ³ï¼›</li>
<li>æœ€å¿«è§£å†³æ–¹å¼ï¼šåœ¨ <code>load</code> å›è°ƒé‡Œç”¨ <code>setTimeout(..., 0)</code> å»¶è¿Ÿè¯»å–ï¼›</li>
<li>æœ€ä¼˜è§£ï¼šç›´æ¥ä½¿ç”¨ <code>navEntry.duration</code>ï¼Œæ— éœ€æ‰‹åŠ¨è®¡ç®—ï¼Œé¿å…æ—¶æœºå’Œè´Ÿæ•°é—®é¢˜ã€‚</li>
</ol>
<h2 data-id="heading-52">å…³äºæœ¬åœ°æµ‹é‡ç¯å¢ƒï¼š</h2>
<p>æ ¸å¿ƒç»“è®ºï¼š<strong>å¯ä»¥ç”¨æ— ç—•æ¨¡å¼æ›¿ä»£ã€Œæ‰‹åŠ¨æ¸…ç¼“å­˜+ç¦ç”¨HTTPç¼“å­˜ã€çš„å†·å¯åŠ¨æµç¨‹ï¼Œä½†è¦æ³¨æ„å®ƒçš„å±€é™å’Œæ­£ç¡®ç”¨æ³•</strong>â€”â€”æ— ç—•æ¨¡å¼é»˜è®¤æ— ç£ç›˜ç¼“å­˜ã€æ— Cookieã€æ— æµè§ˆè®°å½•ï¼Œä¸”å†…å­˜ç¼“å­˜ä¼šåœ¨çª—å£å…³é—­åæ¸…ç©ºï¼Œæ˜¯æ¨¡æ‹Ÿå†·å¯åŠ¨çš„é«˜æ•ˆæ–¹æ¡ˆï¼Œä½†ä¸èƒ½å®Œå…¨æ›¿ä»£ã€Œç½‘ç»œ/CPUæ¨¡æ‹Ÿã€å’Œã€Œå¤šæ¬¡æµ‹é‡å–å¹³å‡ã€ã€‚</p>
<hr/>
<h3 data-id="heading-53">ä¸€ã€æ— ç—•æ¨¡å¼çš„æ ¸å¿ƒä¼˜åŠ¿ï¼ˆé€‚åˆå†·å¯åŠ¨æµ‹é‡ï¼‰</h3>
<ol>
<li><strong>é›¶ç¼“å­˜å†·å¯åŠ¨</strong>ï¼š
<ul>
<li>æ— ç—•çª—å£é»˜è®¤<strong>æ— ç£ç›˜ç¼“å­˜ã€æ— Cookieã€æ— æœ¬åœ°å­˜å‚¨</strong>ï¼Œé¦–æ¬¡è®¿é—®é¡¹ç›®æ—¶ï¼Œå¿…é¡»å…¨é‡ä¸‹è½½æ‰€æœ‰èµ„æºï¼ˆJS/CSS/å›¾ç‰‡/å­—ä½“ï¼‰ï¼Œç­‰ä»·äºçœŸå®ç”¨æˆ·çš„é¦–æ¬¡è®¿é—®ï¼›</li>
<li>å†…å­˜ç¼“å­˜ä»…åœ¨å½“å‰æ— ç—•çª—å£å†…æœ‰æ•ˆï¼Œå…³é—­çª—å£åç«‹å³æ¸…ç©ºï¼Œä¸‹æ¬¡æ‰“å¼€åˆæ˜¯å…¨æ–°å†·å¯åŠ¨ã€‚</li>
</ul>
</li>
<li><strong>éš”ç¦»å¼€å‘ç¯å¢ƒå¹²æ‰°</strong>ï¼š
<ul>
<li>æ— ç—•æ¨¡å¼é»˜è®¤<strong>ç¦ç”¨æ‰€æœ‰æµè§ˆå™¨æ’ä»¶</strong>ï¼ˆå¦‚AdBlockã€React DevToolsç­‰ï¼‰ï¼Œé¿å…æ’ä»¶å½±å“é¡µé¢åŠ è½½æ€§èƒ½ï¼›</li>
<li>ä¸ä¼šç»§æ‰¿ä¸»çª—å£çš„ç¼“å­˜ã€Cookieï¼Œæµ‹é‡ç»“æœæ›´çº¯å‡€ã€‚</li>
</ul>
</li>
<li><strong>æ“ä½œé«˜æ•ˆ</strong>ï¼š
<ul>
<li>æ— éœ€æ‰‹åŠ¨æ‰§è¡Œã€ŒClear browsing dataã€+ å‹¾é€‰ã€ŒDisable cacheã€ï¼Œç›´æ¥æ‰“å¼€æ— ç—•çª—å£å³å¯è¿›å…¥å†·å¯åŠ¨çŠ¶æ€ï¼ŒèŠ‚çœæ—¶é—´ã€‚</li>
</ul>
</li>
</ol>
<h3 data-id="heading-54">äºŒã€å…³é”®å±€é™ï¼ˆå¿…é¡»è§„é¿ï¼Œå¦åˆ™æ•°æ®å¤±çœŸï¼‰</h3>
<ol>
<li><strong>ä¸èƒ½æ›¿ä»£ã€Œç½‘ç»œ/CPUæ¨¡æ‹Ÿã€</strong>ï¼š
<ul>
<li>æ— ç—•æ¨¡å¼åªæ˜¯éš”ç¦»ç¼“å­˜ï¼Œä¸ä¼šæ”¹å˜ç½‘ç»œé€Ÿåº¦å’ŒCPUæ€§èƒ½ï¼›æœ¬åœ°å†…ç½‘é€Ÿåº¦è¿œå¿«äºçœŸå®ç§»åŠ¨ç«¯ç½‘ç»œï¼Œä½ç«¯æœºCPUæ€§èƒ½ä¹Ÿè¿œå¼±äºå¼€å‘ç”µè„‘ï¼Œè‹¥ä¸æ¨¡æ‹Ÿï¼Œæµ‹é‡çš„LCP/FCPä¼šè¿œä½äºçœŸå®ç”¨æˆ·ä½“éªŒã€‚</li>
</ul>
</li>
<li><strong>å†…å­˜ç¼“å­˜ä»å­˜åœ¨äºå½“å‰çª—å£</strong>ï¼š
<ul>
<li>æ— ç—•çª—å£å†…<strong>åˆ·æ–°é¡µé¢</strong>æ—¶ï¼Œæµè§ˆå™¨ä»ä¼šå¤ç”¨å†…å­˜ç¼“å­˜ï¼ˆå¦‚å·²åŠ è½½çš„JSã€å›¾ç‰‡ï¼‰ï¼Œå¯¼è‡´ç¬¬äºŒæ¬¡åˆ·æ–°çš„LCPè¿œå°äºé¦–æ¬¡ï¼Œè¿™å’ŒçœŸå®å†·å¯åŠ¨ä¸åŒï¼›</li>
<li>è§£å†³ï¼šè‹¥è¦å¤šæ¬¡å†·å¯åŠ¨æµ‹é‡ï¼Œ<strong>æ¯æ¬¡æµ‹é‡éƒ½å…³é—­å½“å‰æ— ç—•çª—å£ï¼Œé‡æ–°æ‰“å¼€ä¸€ä¸ªæ–°çš„æ— ç—•çª—å£</strong>ã€‚</li>
</ul>
</li>
<li><strong>å¼€å‘ç¯å¢ƒçš„ä¼˜åŒ–ä»ä¼šå½±å“ç»“æœ</strong>ï¼š
<ul>
<li>æ— ç—•æ¨¡å¼ä¸ä¼šå…³é—­Vite/Webpack Dev Serverçš„é¢„æ„å»ºã€çƒ­æ›´æ–°ï¼ˆHMRï¼‰ç­‰å¼€å‘ä¼˜åŒ–ï¼Œè¿™äº›ä¼˜åŒ–ä¼šè®©å¼€å‘ç¯å¢ƒçš„æŒ‡æ ‡å¤±çœŸï¼›</li>
<li>è§£å†³ï¼šä¼˜å…ˆæµ‹é‡ç”Ÿäº§æ„å»ºåŒ…ï¼ˆ<code>npm run build</code> + <code>npx serve dist</code>ï¼‰ï¼Œæˆ–åœ¨å¼€å‘ç¯å¢ƒä¸­å…³é—­é¢„æ„å»ºã€çƒ­æ›´æ–°ã€‚</li>
</ul>
</li>
</ol>
<h3 data-id="heading-55">ä¸‰ã€æ— ç—•æ¨¡å¼çš„æ­£ç¡®ç”¨æ³•ï¼ˆæ ‡å‡†åŒ–æµ‹é‡æ­¥éª¤ï¼‰</h3>
<h4 data-id="heading-56">å®Œæ•´æµç¨‹ï¼ˆå†·å¯åŠ¨æµ‹é‡ï¼Œé€‚é…é¦–å±æ€§èƒ½æŒ‡æ ‡ï¼‰</h4>
<ol>
<li><strong>å‡†å¤‡ç”Ÿäº§æ„å»ºåŒ…</strong>ï¼ˆæ¨èï¼‰ï¼š
<ul>
<li>æ‰§è¡Œ <code>npm run build</code> æ„å»ºç”Ÿäº§åŒ…ï¼›</li>
<li>ç”¨é™æ€æœåŠ¡å™¨å¯åŠ¨ï¼š<code>npx serve dist</code>ï¼Œè®°å½•è®¿é—®åœ°å€ï¼ˆå¦‚ <code>http://localhost:3000</code>ï¼‰ã€‚</li>
</ul>
</li>
<li><strong>æ‰“å¼€æ–°çš„æ— ç—•çª—å£</strong>ï¼š
<ul>
<li>Chromeï¼š<code>Ctrl+Shift+N</code>ï¼ˆMacï¼š<code>Cmd+Shift+N</code>ï¼‰ï¼›</li>
<li>ç¡®è®¤çª—å£é¡¶éƒ¨æ˜¾ç¤ºã€Œæ— ç—•æ¨¡å¼ã€ï¼Œä¸”æ— æ’ä»¶å›¾æ ‡ã€‚</li>
</ul>
</li>
<li><strong>æ¨¡æ‹ŸçœŸå®ç½‘ç»œå’ŒCPUæ¡ä»¶</strong>ï¼ˆæ ¸å¿ƒï¼‰ï¼š
<ul>
<li>åœ¨æ— ç—•çª—å£ä¸­æ‰“å¼€ DevToolsï¼ˆ<code>F12</code>ï¼‰ï¼›</li>
<li>åˆ‡æ¢åˆ° <strong>Performance</strong> é¢æ¿ï¼Œç‚¹å‡»ã€ŒCapture settingsã€ï¼ˆé½¿è½®å›¾æ ‡ï¼‰ï¼š
<ul>
<li>Networkï¼šFast 3Gï¼›</li>
<li>CPUï¼š4x slowdownï¼›</li>
<li>å‹¾é€‰ã€ŒMemoryã€ã€ŒWeb Vitalsã€ã€ŒScreenshotsã€ã€‚</li>
</ul>
</li>
</ul>
</li>
<li><strong>æ‰§è¡Œæµ‹é‡å¹¶è®°å½•æ•°æ®</strong>ï¼š
<ul>
<li>ç‚¹å‡»ã€ŒRecordã€æŒ‰é’®ï¼Œç«‹å³åˆ·æ–°é¡µé¢ï¼ˆ<code>F5</code>ï¼‰ï¼›</li>
<li>é¡µé¢åŠ è½½å®Œæˆååœæ­¢å½•åˆ¶ï¼Œè®°å½• FCPã€LCPã€TTFBã€CLS ç­‰æŒ‡æ ‡ï¼›</li>
<li>è‹¥è¦é‡å¤æµ‹é‡ï¼Œ<strong>å…³é—­å½“å‰æ— ç—•çª—å£ï¼Œé‡æ–°æ‰“å¼€ä¸€ä¸ªæ–°çš„æ— ç—•çª—å£</strong>ï¼Œé‡å¤æ­¥éª¤ 3â€“4ï¼Œå– 3 æ¬¡æµ‹é‡çš„å¹³å‡å€¼ã€‚</li>
</ul>
</li>
</ol>
<h4 data-id="heading-57">è¡¥å……ï¼šå¼€å‘ç¯å¢ƒçš„æ— ç—•æµ‹é‡ï¼ˆä»…ä½œå‚è€ƒï¼‰</h4>
<p>è‹¥å¿…é¡»åœ¨å¼€å‘ç¯å¢ƒæµ‹é‡ï¼ˆæ— ç”Ÿäº§åŒ…ï¼‰ï¼š</p>
<ol>
<li>å…³é—­å¼€å‘ç¯å¢ƒçš„ä¼˜åŒ–ï¼ˆViteï¼š<code>optimizeDeps: { disabled: true }, server: { hmr: false }</code>ï¼›Webpackï¼š<code>--mode production</code> + å…³é—­ HMRï¼‰ï¼›</li>
<li>æ‰“å¼€æ–°çš„æ— ç—•çª—å£ï¼Œè®¿é—®å¼€å‘ç¯å¢ƒåœ°å€ï¼ˆå¦‚ <code>http://localhost:5173</code>ï¼‰ï¼›</li>
<li>æŒ‰ä¸Šè¿°æ­¥éª¤ 3â€“4 æ‰§è¡Œæµ‹é‡ï¼Œæ ‡æ³¨ã€Œå¼€å‘ç¯å¢ƒï¼Œä»…ä¾›å‚è€ƒã€ã€‚</li>
</ol>
<h3 data-id="heading-58">å››ã€å¯¹æ¯”ï¼šæ— ç—•æ¨¡å¼ vs æ‰‹åŠ¨æ¸…ç¼“å­˜ï¼ˆå†·å¯åŠ¨æµ‹é‡ï¼‰</h3>

































<table><thead><tr><th>æ–¹æ¡ˆ</th><th>æ“ä½œå¤æ‚åº¦</th><th>ç¼“å­˜éš”ç¦»æ•ˆæœ</th><th>æµ‹é‡çº¯å‡€åº¦</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>æ— ç—•æ¨¡å¼</td><td>ä½ï¼ˆä¸€é”®æ‰“å¼€ï¼‰</td><td>é«˜ï¼ˆæ— ç£ç›˜ç¼“å­˜ï¼Œç¦ç”¨æ’ä»¶ï¼‰</td><td>é«˜</td><td>å¿«é€Ÿå†·å¯åŠ¨æµ‹é‡ã€è§„é¿æ’ä»¶å¹²æ‰°</td></tr><tr><td>æ‰‹åŠ¨æ¸…ç¼“å­˜+ç¦ç”¨HTTPç¼“å­˜</td><td>é«˜ï¼ˆå¤šæ­¥æ“ä½œï¼‰</td><td>é«˜ï¼ˆæ— ç£ç›˜ç¼“å­˜ï¼Œå¯æ§åˆ¶ï¼‰</td><td>é«˜</td><td>éœ€ç²¾ç¡®æ§åˆ¶ç¼“å­˜ç­–ç•¥çš„æµ‹é‡</td></tr><tr><td>æ— ç—•æ¨¡å¼ + ç½‘ç»œ/CPUæ¨¡æ‹Ÿ</td><td>ä¸­</td><td>æé«˜</td><td>æé«˜</td><td>æ¨èï¼Œå…¼é¡¾é«˜æ•ˆå’Œçº¯å‡€</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-59">æ€»ç»“</h3>
<p>ç›´æ¥ç”¨æ— ç—•æ¨¡å¼å¯ä»¥ï¼Œä½†å¿…é¡»æ»¡è¶³ä¸¤ä¸ªå‰æï¼š<strong>æ¯æ¬¡å†·å¯åŠ¨æµ‹é‡éƒ½æ‰“å¼€æ–°çš„æ— ç—•çª—å£</strong> + <strong>å¿…é¡»æ¨¡æ‹ŸçœŸå®çš„ç½‘ç»œå’ŒCPUæ¡ä»¶</strong>ã€‚è‹¥ä¸æ¨¡æ‹Ÿç½‘ç»œå’ŒCPUï¼Œæµ‹é‡çš„LCP/FCPä¼šè¿œä½äºçœŸå®ç”¨æˆ·ä½“éªŒï¼Œå¤±å»ä¼˜åŒ–å‚è€ƒä»·å€¼ã€‚</p>
<h2 data-id="heading-60">useEffct éœ€è¦æ‰“æ—¥å¿—å—ï¼Ÿ</h2>
<p>æ ¸å¿ƒç»“è®ºï¼š<strong>åœ¨React/Vueç­‰æ¡†æ¶ä¸­ï¼ŒuseEffectï¼ˆæˆ–å¯¹åº”ç”Ÿå‘½å‘¨æœŸï¼‰æ‰“é¦–å±æ€§èƒ½æ—¥å¿—æ˜¯æœ‰å¿…è¦çš„ï¼Œä½†è¦é€‰å¯¹æ—¶æœºã€æ§åˆ¶ç²’åº¦ï¼Œä¸”ä¸èƒ½æ›¿ä»£åŸç”ŸPerformance APIçš„æµ‹é‡</strong>â€”â€”å®ƒä¸»è¦ç”¨æ¥è¡¥å……æ¡†æ¶å±‚é¢çš„æ¸²æŸ“è€—æ—¶ï¼Œå®šä½ä¸šåŠ¡ä»£ç å¯¼è‡´çš„é¦–å±é˜»å¡é—®é¢˜ã€‚</p>
<hr/>
<h3 data-id="heading-61">ä¸€ã€ä»€ä¹ˆæ—¶å€™å¿…é¡»åœ¨useEffectæ‰“é¦–å±æ€§èƒ½æ—¥å¿—ï¼Ÿ</h3>
<h4 data-id="heading-62">1. é¦–å±å†…å®¹ä¾èµ–å¼‚æ­¥æ•°æ®ï¼ˆæœ€æ ¸å¿ƒåœºæ™¯ï¼‰</h4>
<p>å¦‚æœä½ çš„é¦–å±æ¸²æŸ“éœ€è¦ç­‰å¾…æ¥å£è¿”å›æ•°æ®ï¼ˆå¦‚åˆ—è¡¨ã€ç”¨æˆ·ä¿¡æ¯ï¼‰ï¼ŒuseEffectæ˜¯ç›‘å¬â€œæ•°æ®åŠ è½½â†’æ¸²æŸ“å®Œæˆâ€å…¨é“¾è·¯çš„å…³é”®ï¼š</p>
<ul>
<li>é—®é¢˜ï¼šåŸç”ŸPerformance APIèƒ½æµ‹FCP/LCPï¼Œä½†æ— æ³•åŒºåˆ†â€œæ¥å£ç­‰å¾…è€—æ—¶â€å’Œâ€œæ¸²æŸ“è€—æ—¶â€ï¼›</li>
<li>è§£å†³ï¼šåœ¨useEffectä¸­æ ‡è®°â€œæ¥å£å¼€å§‹è¯·æ±‚â€â€œæ¥å£è¿”å›â€â€œæ•°æ®æ¸²æŸ“å®Œæˆâ€ä¸‰ä¸ªæ—¶é—´ç‚¹ï¼Œå®šä½ç“¶é¢ˆã€‚</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç¤ºä¾‹ï¼šé¦–å±å¼‚æ­¥æ•°æ®åŠ è½½æ€§èƒ½æ—¥å¿—</span>
<span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-comment">// 1. æ ‡è®°æ¥å£è¯·æ±‚å¼€å§‹æ—¶é—´</span>
  <span class="hljs-keyword">const</span> fetchStart = performance.<span class="hljs-title function_">now</span>();
  
  <span class="hljs-comment">// 2. é¦–å±æ ¸å¿ƒæ¥å£è¯·æ±‚</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">fetchHomeData</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`[é¦–å±æ€§èƒ½] æ¥å£è¯·æ±‚å¼€å§‹: <span class="hljs-subst">${fetchStart.toFixed(<span class="hljs-number">2</span>)}</span>ms`</span>);
      <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> api.<span class="hljs-title function_">getHomeData</span>();
      <span class="hljs-keyword">const</span> fetchEnd = performance.<span class="hljs-title function_">now</span>();
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`[é¦–å±æ€§èƒ½] æ¥å£è¿”å›è€—æ—¶: <span class="hljs-subst">${(fetchEnd - fetchStart).toFixed(<span class="hljs-number">2</span>)}</span>ms`</span>);
      
      <span class="hljs-comment">// 3. æ•°æ®æ¸²æŸ“å®Œæˆï¼ˆå¯ç»“åˆuseStateæ›´æ–°åçš„å‰¯ä½œç”¨ï¼‰</span>
      <span class="hljs-title function_">setHomeData</span>(res.<span class="hljs-property">data</span>);
      <span class="hljs-keyword">const</span> renderEnd = performance.<span class="hljs-title function_">now</span>();
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`[é¦–å±æ€§èƒ½] æ•°æ®æ¸²æŸ“è€—æ—¶: <span class="hljs-subst">${(renderEnd - fetchEnd).toFixed(<span class="hljs-number">2</span>)}</span>ms`</span>);
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`[é¦–å±æ€§èƒ½] å¼‚æ­¥æ•°æ®å…¨é“¾è·¯è€—æ—¶: <span class="hljs-subst">${(renderEnd - fetchStart).toFixed(<span class="hljs-number">2</span>)}</span>ms`</span>);
    } <span class="hljs-keyword">catch</span> (err) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'[é¦–å±æ€§èƒ½] æ¥å£è¯·æ±‚å¤±è´¥'</span>, err);
    }
  };

  <span class="hljs-title function_">fetchHomeData</span>();
}, []); <span class="hljs-comment">// ç©ºä¾èµ–ï¼šä»…é¦–å±æŒ‚è½½æ—¶æ‰§è¡Œ</span>
</code></pre>
<h4 data-id="heading-63">2. é¦–å±åŒ…å«å¤æ‚ç»„ä»¶/å¤§è®¡ç®—é‡é€»è¾‘</h4>
<p>å¦‚æœé¦–å±æœ‰è¡¨æ ¼æ¸²æŸ“ã€æ•°æ®æ ¼å¼åŒ–ã€å›¾è¡¨ç»˜åˆ¶ç­‰è€—æ—¶æ“ä½œï¼ŒuseEffectå¯æ ‡è®°è¿™äº›ä¸šåŠ¡é€»è¾‘çš„æ‰§è¡Œè€—æ—¶ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç¤ºä¾‹ï¼šé¦–å±å¤æ‚è®¡ç®—æ€§èƒ½æ—¥å¿—</span>
<span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> calcStart = performance.<span class="hljs-title function_">now</span>();
  <span class="hljs-comment">// é¦–å±å¤æ‚æ•°æ®å¤„ç†ï¼ˆå¦‚åˆ—è¡¨è¿‡æ»¤ã€æ ¼å¼åŒ–ï¼‰</span>
  <span class="hljs-keyword">const</span> formattedData = <span class="hljs-title function_">formatHomeList</span>(rawData);
  <span class="hljs-keyword">const</span> calcEnd = performance.<span class="hljs-title function_">now</span>();
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`[é¦–å±æ€§èƒ½] æ•°æ®æ ¼å¼åŒ–è€—æ—¶: <span class="hljs-subst">${(calcEnd - calcStart).toFixed(<span class="hljs-number">2</span>)}</span>ms`</span>);
  
  <span class="hljs-comment">// å›¾è¡¨æ¸²æŸ“</span>
  <span class="hljs-keyword">const</span> chartStart = performance.<span class="hljs-title function_">now</span>();
  <span class="hljs-title function_">initHomeChart</span>(formattedData);
  <span class="hljs-keyword">const</span> chartEnd = performance.<span class="hljs-title function_">now</span>();
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`[é¦–å±æ€§èƒ½] å›¾è¡¨æ¸²æŸ“è€—æ—¶: <span class="hljs-subst">${(chartEnd - chartStart).toFixed(<span class="hljs-number">2</span>)}</span>ms`</span>);
}, [rawData]); <span class="hljs-comment">// ä¾èµ–é¦–å±æ•°æ®</span>
</code></pre>
<h4 data-id="heading-64">3. æ¡†æ¶å±‚é¢çš„æ¸²æŸ“é˜»å¡æ’æŸ¥</h4>
<p>åŸç”ŸPerformance APIæ— æ³•åŒºåˆ†â€œReactè™šæ‹ŸDOMè°ƒå’Œè€—æ—¶â€â€œç»„ä»¶æŒ‚è½½è€—æ—¶â€ï¼ŒuseEffectå¯è¡¥å……ï¼š</p>
<ul>
<li>æ ¹ç»„ä»¶çš„ç©ºä¾èµ–useEffectï¼šæ ‡è®°â€œReacté¦–å±æŒ‚è½½å®Œæˆâ€æ—¶é—´ï¼ˆæ™šäºåŸç”ŸDCLï¼Œåæ˜ æ¡†æ¶æ¸²æŸ“è€—æ—¶ï¼‰ï¼›</li>
<li>å¯¹æ¯”â€œåŸç”ŸFCPâ€å’Œâ€œReactæŒ‚è½½å®Œæˆæ—¶é—´â€ï¼Œåˆ¤æ–­æ¡†æ¶æ¸²æŸ“æ˜¯å¦æ‹–æ…¢é¦–å±ã€‚</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ ¹ç»„ä»¶App.js</span>
<span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> reactMountEnd = performance.<span class="hljs-title function_">now</span>();
  <span class="hljs-comment">// åŸç”ŸDCLæ—¶é—´ï¼ˆä»Performance APIè·å–ï¼‰</span>
  <span class="hljs-keyword">const</span> dclTime = performance.<span class="hljs-title function_">getEntriesByType</span>(<span class="hljs-string">'navigation'</span>)[<span class="hljs-number">0</span>].<span class="hljs-property">domContentLoadedEventEnd</span>;
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`[é¦–å±æ€§èƒ½] ReactæŒ‚è½½è€—æ—¶: <span class="hljs-subst">${(reactMountEnd - dclTime).toFixed(<span class="hljs-number">2</span>)}</span>ms`</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`[é¦–å±æ€§èƒ½] é¦–å±æ€»è€—æ—¶ï¼ˆåˆ°ReactæŒ‚è½½å®Œæˆï¼‰: <span class="hljs-subst">${reactMountEnd.toFixed(<span class="hljs-number">2</span>)}</span>ms`</span>);
}, []);
</code></pre>
<h3 data-id="heading-65">äºŒã€ä»€ä¹ˆæ—¶å€™æ²¡å¿…è¦åœ¨useEffectæ‰“æ—¥å¿—ï¼Ÿ</h3>
<ol>
<li><strong>çº¯é™æ€é¦–å±ï¼ˆæ— å¼‚æ­¥æ•°æ®ã€æ— å¤æ‚è®¡ç®—ï¼‰</strong>ï¼šä»…HTML/CSSæ¸²æŸ“ï¼ŒåŸç”ŸPerformance APIçš„FCP/LCPå·²è¶³å¤Ÿï¼ŒuseEffectæ—¥å¿—æ— é¢å¤–ä»·å€¼ï¼›</li>
<li><strong>æ—¥å¿—ç²’åº¦å¤ªç»†</strong>ï¼šæ¯”å¦‚æ¯ä¸ªå­ç»„ä»¶éƒ½æ‰“useEffectæ—¥å¿—ï¼Œä¼šå¯¼è‡´æ—¥å¿—å†—ä½™ï¼Œåè€Œå¹²æ‰°åˆ†æï¼ˆå»ºè®®åªåœ¨é¦–å±æ ¸å¿ƒç»„ä»¶/æ ¹ç»„ä»¶æ‰“ï¼‰ï¼›</li>
<li><strong>æ›¿ä»£åŸç”ŸPerformance API</strong>ï¼šuseEffectæ—¥å¿—æ˜¯â€œä¸šåŠ¡å±‚é¢è¡¥å……â€ï¼Œä¸èƒ½æ›¿ä»£FCP/LCP/DCLçš„æµ‹é‡â€”â€”æ¯”å¦‚ä½ ä¸èƒ½ç”¨useEffectçš„æ—¶é—´æ¥åˆ¤æ–­FCPï¼Œå› ä¸ºFCPæ˜¯ç”¨æˆ·è§†è§‰æ„ŸçŸ¥çš„ç¬¬ä¸€ä¸ªå†…å®¹ï¼Œæ—©äºReactæŒ‚è½½å®Œæˆã€‚</li>
</ol>
<h3 data-id="heading-66">ä¸‰ã€useEffectæ‰“æ€§èƒ½æ—¥å¿—çš„æœ€ä½³å®è·µ</h3>
<h4 data-id="heading-67">1. é€‰å¯¹æ—¶æœºï¼ˆé¿å…æ•°æ®ä¸å‡†ï¼‰</h4>
<ul>
<li>ç©ºä¾èµ–<code>useEffect(() =&gt; {}, [])</code>ï¼šå¯¹åº”â€œç»„ä»¶æŒ‚è½½å®Œæˆâ€ï¼Œæ¥è¿‘é¦–å±å¯äº¤äº’çŠ¶æ€ï¼›</li>
<li>ä¾èµ–å¼‚æ­¥æ•°æ®çš„useEffectï¼šåœ¨æ•°æ®æ›´æ–°åæ‰“â€œæ¸²æŸ“å®Œæˆâ€æ—¥å¿—ï¼ˆæ³¨æ„ï¼šuseStateæ˜¯å¼‚æ­¥çš„ï¼Œéœ€ç”¨setTimeout/useLayoutEffectå…œåº•ï¼‰ï¼›</li>
<li>ä¼˜å…ˆç”¨<code>performance.now()</code>ï¼ˆé«˜ç²¾åº¦æ—¶é—´ï¼‰ï¼Œè€Œé<code>Date.now()</code>ï¼ˆæ¯«ç§’çº§ï¼Œç²¾åº¦ä½ï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-68">2. æ§åˆ¶æ—¥å¿—è¾“å‡ºï¼ˆé¿å…ç”Ÿäº§ç¯å¢ƒå¹²æ‰°ï¼‰</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å°è£…æ€§èƒ½æ—¥å¿—å·¥å…·ï¼šä»…å¼€å‘/é¢„å‘å¸ƒç¯å¢ƒè¾“å‡º</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">logPerformance</span> = (<span class="hljs-params">label, duration</span>) =&gt; {
  <span class="hljs-keyword">if</span> (process.<span class="hljs-property">env</span>.<span class="hljs-property">NODE_ENV</span> !== <span class="hljs-string">'production'</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`[é¦–å±æ€§èƒ½] <span class="hljs-subst">${label}</span>: <span class="hljs-subst">${duration.toFixed(<span class="hljs-number">2</span>)}</span>ms`</span>);
  }
};

<span class="hljs-comment">// ä½¿ç”¨</span>
<span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> start = performance.<span class="hljs-title function_">now</span>();
  <span class="hljs-comment">// ä¸šåŠ¡é€»è¾‘</span>
  <span class="hljs-keyword">const</span> end = performance.<span class="hljs-title function_">now</span>();
  <span class="hljs-title function_">logPerformance</span>(<span class="hljs-string">'é¦–å±æ•°æ®åŠ è½½'</span>, end - start);
}, []);
</code></pre>
<h4 data-id="heading-69">3. ç»“åˆåŸç”ŸPerformance APIï¼ˆå½¢æˆå®Œæ•´é“¾è·¯ï¼‰</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å®Œæ•´é¦–å±æ€§èƒ½æ—¥å¿—ï¼šåŸç”ŸæŒ‡æ ‡ + ä¸šåŠ¡æŒ‡æ ‡</span>
<span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-comment">// 1. è·å–åŸç”ŸPerformanceæŒ‡æ ‡</span>
  <span class="hljs-keyword">const</span> navData = performance.<span class="hljs-title function_">getEntriesByType</span>(<span class="hljs-string">'navigation'</span>)[<span class="hljs-number">0</span>];
  <span class="hljs-keyword">const</span> paintData = performance.<span class="hljs-title function_">getEntriesByType</span>(<span class="hljs-string">'paint'</span>).<span class="hljs-title function_">find</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item.<span class="hljs-property">name</span> === <span class="hljs-string">'first-contentful-paint'</span>);
  
  <span class="hljs-comment">// 2. ä¸šåŠ¡æŒ‡æ ‡ï¼ˆå¼‚æ­¥æ•°æ®ï¼‰</span>
  <span class="hljs-keyword">const</span> fetchStart = performance.<span class="hljs-title function_">now</span>();
  api.<span class="hljs-title function_">getHomeData</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> fetchEnd = performance.<span class="hljs-title function_">now</span>();
    
    <span class="hljs-comment">// 3. æ•´åˆæ—¥å¿—ï¼ˆå¼€å‘ç¯å¢ƒè¾“å‡ºï¼‰</span>
    <span class="hljs-keyword">if</span> (process.<span class="hljs-property">env</span>.<span class="hljs-property">NODE_ENV</span> !== <span class="hljs-string">'production'</span>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">group</span>(<span class="hljs-string">'[é¦–å±æ€§èƒ½å®Œæ•´é“¾è·¯]'</span>);
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`TTFB: <span class="hljs-subst">${navData.responseStart - navData.requestStart}</span>ms`</span>);
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`FCP: <span class="hljs-subst">${paintData?.startTime || <span class="hljs-number">0</span>}</span>ms`</span>);
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`DCL: <span class="hljs-subst">${navData.domContentLoadedEventEnd}</span>ms`</span>);
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`æ¥å£åŠ è½½è€—æ—¶: <span class="hljs-subst">${fetchEnd - fetchStart}</span>ms`</span>);
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`é¦–å±æ€»è€—æ—¶ï¼ˆåˆ°æ•°æ®æ¸²æŸ“å®Œæˆï¼‰: <span class="hljs-subst">${performance.now()}</span>ms`</span>);
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">groupEnd</span>();
    }
  });
}, []);
</code></pre>
<hr/>
<h3 data-id="heading-70">æ€»ç»“</h3>
<ol>
<li><strong>æœ‰å¿…è¦ç”¨useEffectæ‰“é¦–å±æ€§èƒ½æ—¥å¿—</strong>ï¼šæ ¸å¿ƒåœºæ™¯æ˜¯é¦–å±ä¾èµ–å¼‚æ­¥æ•°æ®ã€åŒ…å«å¤æ‚è®¡ç®—ï¼Œç”¨æ¥è¡¥å……æ¡†æ¶/ä¸šåŠ¡å±‚é¢çš„è€—æ—¶ï¼Œå®šä½åŸç”ŸAPIæ— æ³•è¦†ç›–çš„ç“¶é¢ˆï¼›</li>
<li><strong>ä¸èƒ½æ›¿ä»£åŸç”ŸPerformance API</strong>ï¼šuseEffectæ—¥å¿—æ˜¯â€œè¡¥å……é¡¹â€ï¼Œéœ€å’ŒFCP/LCP/DCLç­‰æ ¸å¿ƒæŒ‡æ ‡ç»“åˆåˆ†æï¼›</li>
<li><strong>å…³é”®åŸåˆ™</strong>ï¼šé€‰å¯¹æ—¶æœºï¼ˆç©ºä¾èµ–/æ•°æ®ä¾èµ–ï¼‰ã€æ§åˆ¶ç²’åº¦ï¼ˆæ ¸å¿ƒç»„ä»¶ï¼‰ã€ä»…éç”Ÿäº§ç¯å¢ƒè¾“å‡ºã€‚</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Nginx çš„ location è·¯å¾„åŒ¹é…è¯­æ³•è¯¦è§£]]></title>    <link>https://juejin.cn/post/7593254419079249960</link>    <guid>https://juejin.cn/post/7593254419079249960</guid>    <pubDate>2026-01-11T02:16:40.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7593254419079249960" data-draft-id="7593254419079233576" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Nginx çš„ location è·¯å¾„åŒ¹é…è¯­æ³•è¯¦è§£"/> <meta itemprop="keywords" content="Nginx,API"/> <meta itemprop="datePublished" content="2026-01-11T02:16:40.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ˜Ÿå…‰ä¸é—®èµ¶è·¯äºº"/> <meta itemprop="url" content="https://juejin.cn/user/950397121075304"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Nginx çš„ location è·¯å¾„åŒ¹é…è¯­æ³•è¯¦è§£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/950397121075304/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ˜Ÿå…‰ä¸é—®èµ¶è·¯äºº
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-11T02:16:40.000Z" title="Sun Jan 11 2026 02:16:40 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    6
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ¬æ–‡ç³»ç»Ÿæ¢³ç† <strong>location çš„åŒ¹é…è§„åˆ™ã€ä¼˜å…ˆçº§é¡ºåº</strong>ï¼Œå¹¶ç»“åˆç¤ºä¾‹è¯´æ˜å¸¸è§è¯¯åŒºï¼Œå¸®åŠ©ä½ åœ¨å®é™…é…ç½®ä¸­åšåˆ°<strong>å¯é¢„æµ‹ã€å¯æ§</strong>ã€‚</p>
<h2 data-id="heading-0"><code>location</code> æŒ‡ä»¤çš„åŒ¹é…æ–¹å¼ä¸ä¼˜å…ˆçº§</h2>
<p>Nginx åœ¨æ¥æ”¶åˆ°è¯·æ±‚åï¼Œä¼šæŒ‰ç…§<strong>å›ºå®šçš„è§„åˆ™é¡ºåº</strong>å¯¹ <code>location</code> è¿›è¡ŒåŒ¹é…ã€‚<br/>
ç†è§£ä¼˜å…ˆçº§ï¼Œæ˜¯æ­£ç¡®é…ç½®çš„å…³é”®ã€‚</p>















































<table><thead><tr><th>å†™æ³•</th><th>ç¤ºä¾‹</th><th>åŒ¹é…æ–¹å¼</th><th>ä¼˜å…ˆçº§</th></tr></thead><tbody><tr><td>ç²¾ç¡®åŒ¹é… <code>=</code></td><td><code>location = /foo</code></td><td>URI å¿…é¡»å®Œå…¨ä¸€è‡´</td><td>ğŸ¥‡ æœ€é«˜</td></tr><tr><td>å‰ç¼€åŒ¹é… <code>^~</code></td><td><code>location ^~ /images/</code></td><td>å‰ç¼€åŒ¹é…ï¼Œä¸”<strong>å‘½ä¸­åä¸å†è¿›å…¥æ­£åˆ™åŒ¹é…é˜¶æ®µ</strong></td><td>ğŸ¥ˆ ç¬¬äºŒ</td></tr><tr><td>å‰ç¼€åŒ¹é…(æ™®é€š)</td><td><code>location /foo</code></td><td>å‰ç¼€åŒ¹é…ï¼Œå¤šä¸ªå‘½ä¸­æ—¶å–<strong>æœ€é•¿å‰ç¼€</strong></td><td>ğŸ¥‰ ç¬¬ä¸‰</td></tr><tr><td>æ­£åˆ™åŒ¹é… <code>~</code></td><td><code>location ~ .php$</code></td><td>åŒºåˆ†å¤§å°å†™çš„æ­£åˆ™</td><td>ğŸ… ç¬¬å››ï¼ˆæ­£åˆ™ä¸­æŒ‰ä¹¦å†™é¡ºåºï¼‰</td></tr><tr><td>æ­£åˆ™åŒ¹é… <code>~*</code></td><td><code>location ~* .jpg$</code></td><td>å¿½ç•¥å¤§å°å†™çš„æ­£åˆ™</td><td>åŒä¸Š</td></tr><tr><td>é€šç”¨åŒ¹é… <code>/</code></td><td><code>location /</code></td><td>é»˜è®¤å…œåº•</td><td>æœ€ä½</td></tr></tbody></table>
<h2 data-id="heading-1">å®é™…åŒ¹é…æµç¨‹ï¼ˆç®€åŒ–ç‰ˆï¼‰</h2>
<p>å¯ä»¥ç”¨ä¸€å¥è¯æ¦‚æ‹¬ï¼š</p>
<blockquote>
<p><strong>å…ˆç²¾ç¡® â†’ å†å‰ç¼€ â†’ å†æ­£åˆ™ â†’ æœ€åå…œåº•</strong></p>
</blockquote>
<p>æ›´å®Œæ•´çš„é€»è¾‘æ˜¯ï¼š</p>
<ol>
<li>å…ˆæ£€æŸ¥æ˜¯å¦å­˜åœ¨ <strong>ç²¾ç¡®åŒ¹é… (<code>=</code>)</strong></li>
<li>å†æ£€æŸ¥æ‰€æœ‰ <strong>å‰ç¼€åŒ¹é…</strong>ï¼Œè®°å½•æœ€é•¿çš„ä¸€ä¸ª</li>
<li>å¦‚æœè¯¥å‰ç¼€æ˜¯ <code>^~</code>ï¼Œç›´æ¥å‘½ä¸­å¹¶ç»“æŸ</li>
<li>å¦åˆ™è¿›å…¥ <strong>æ­£åˆ™åŒ¹é…</strong>ï¼ˆæŒ‰é…ç½®é¡ºåºï¼‰</li>
<li>è‹¥æ­£åˆ™æœªå‘½ä¸­ï¼Œåˆ™å›é€€åˆ°æœ€é•¿çš„æ™®é€šå‰ç¼€åŒ¹é…</li>
</ol>
<h2 data-id="heading-2">å¸¸è§é…ç½®ç¤ºä¾‹</h2>
<pre><code class="hljs language-nginx" lang="nginx">server {
    # 1. ç²¾ç¡®åŒ¹é…ï¼šåªåŒ¹é… /login
    location = /login {
        ...
    }

    # 2. é™æ€èµ„æºï¼šå‰ç¼€åŒ¹é…å¹¶é˜»æ–­æ­£åˆ™
    location ^~ /static/ {
        root /web/data;
    }

    # 3. æ­£åˆ™åŒ¹é…ï¼šå¤„ç† PHP è¯·æ±‚
    location ~ .php$ {
        fastcgi_pass unix:/run/php/php7.4-fpm.sock;
    }

    # 4. æ™®é€šå‰ç¼€åŒ¹é…ï¼šAPI è½¬å‘
    location /api {
        proxy_pass http://api-backend;
    }

    # 5. é»˜è®¤å…œåº•
    location / {
        index index.html;
    }
}
</code></pre>
<p>ğŸ“ <strong>å®è·µå»ºè®®</strong></p>
<ul>
<li>é™æ€èµ„æºè·¯å¾„ï¼ˆå¦‚ <code>/static/</code>ã€<code>/assets/</code>ï¼‰ä¼˜å…ˆä½¿ç”¨ <code>^~</code></li>
<li>APIã€é¡µé¢è·¯ç”±å¤šä½¿ç”¨æ™®é€šå‰ç¼€åŒ¹é…</li>
<li>æ­£åˆ™åŒ¹é…è°¨æ…ä½¿ç”¨ï¼Œé¿å…æ€§èƒ½å’Œå¯è¯»æ€§é—®é¢˜</li>
</ul>
<hr/>
<h2 data-id="heading-3">æ˜“é”™ç‚¹ï¼š<code>proxy_pass</code> çš„è·¯å¾„æ‹¼æ¥è§„åˆ™ âš ï¸</h2>
<blockquote>
<p><strong><code>proxy_pass</code> ç»“å°¾æœ‰ <code>/</code>ï¼šæ›¿æ¢ location å‰ç¼€</strong><br/>
<strong><code>proxy_pass</code> ç»“å°¾æ—  <code>/</code>ï¼šä¿ç•™åŸå§‹ URI</strong></p>
</blockquote>
<h3 data-id="heading-4">è£å‰ªå‰ç¼€ï¼ˆæ¨èç”¨äº API ç½‘å…³ï¼‰</h3>
<pre><code class="hljs language-nginx" lang="nginx">location /api/ {
    proxy_pass http://backend/;
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
}

# /api/user/list  â†’  http://backend/user/list
</code></pre>
<h3 data-id="heading-5">ä¸è£å‰ªå‰ç¼€</h3>
<pre><code class="hljs language-ruby" lang="ruby">location /api/ {
    proxy_pass <span class="hljs-symbol">http:</span>/<span class="hljs-regexp">/backend;
}

# /api</span><span class="hljs-regexp">/user/list</span>  â†’  <span class="hljs-symbol">http:</span>/<span class="hljs-regexp">/backend/api</span><span class="hljs-regexp">/user/list</span>
</code></pre>
<h2 data-id="heading-6">æ€»ç»“</h2>
<ul>
<li><code>location</code> çš„<strong>ä¼˜å…ˆçº§ä¸æ˜¯é…ç½®é¡ºåºï¼Œè€Œæ˜¯è¯­æ³•è§„åˆ™</strong></li>
<li><code>=</code> å’Œ <code>^~</code> æ˜¯æ§åˆ¶åŒ¹é…è¡Œä¸ºçš„â€œåˆ©å™¨â€</li>
<li>æ­£åˆ™åŒ¹é…åº”ä½œä¸ºè¡¥å……æ‰‹æ®µï¼Œè€Œéä¸»åŠ›æ–¹æ¡ˆ</li>
<li><code>proxy_pass</code> æ˜¯å¦å¸¦ <code>/</code>ï¼Œç›´æ¥å†³å®šè¯·æ±‚è·¯å¾„æ˜¯å¦è¢«è£å‰ª</li>
</ul>
<h2 data-id="heading-7">å‚è€ƒ</h2>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.cnblogs.com%2Fitzgr%2Fp%2F13359249.html" target="_blank" title="https://www.cnblogs.com/itzgr/p/13359249.html" ref="nofollow noopener noreferrer">www.cnblogs.com/itzgr/p/133â€¦</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Node.js ç¼–ç¨‹å®æˆ˜ï¼šæµ‹è¯•ä¸è°ƒè¯• â€”â€” è°ƒè¯•æŠ€å·§ä¸æ€§èƒ½åˆ†æ]]></title>    <link>https://juejin.cn/post/7593600903250034714</link>    <guid>https://juejin.cn/post/7593600903250034714</guid>    <pubDate>2026-01-11T03:52:52.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7593600903250034714" data-draft-id="7593600903250001946" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Node.js ç¼–ç¨‹å®æˆ˜ï¼šæµ‹è¯•ä¸è°ƒè¯• â€”â€” è°ƒè¯•æŠ€å·§ä¸æ€§èƒ½åˆ†æ"/> <meta itemprop="keywords" content="åç«¯,å‰ç«¯,Node.js"/> <meta itemprop="datePublished" content="2026-01-11T03:52:52.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºå‘˜çˆ±é’“é±¼"/> <meta itemprop="url" content="https://juejin.cn/user/2799775299157614"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Node.js ç¼–ç¨‹å®æˆ˜ï¼šæµ‹è¯•ä¸è°ƒè¯• â€”â€” è°ƒè¯•æŠ€å·§ä¸æ€§èƒ½åˆ†æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2799775299157614/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºå‘˜çˆ±é’“é±¼
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-11T03:52:52.000Z" title="Sun Jan 11 2026 03:52:52 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>åœ¨ Node.js å¼€å‘è¿‡ç¨‹ä¸­ï¼ŒåŠŸèƒ½æ˜¯å¦æ­£ç¡®åªæ˜¯ç¬¬ä¸€æ­¥ï¼Œæ€§èƒ½æ˜¯å¦ç¨³å®šã€é—®é¢˜æ˜¯å¦å®¹æ˜“å®šä½åŒæ ·é‡è¦ã€‚éšç€é¡¹ç›®è§„æ¨¡æ‰©å¤§ï¼Œå•é  <code>console.log</code> å·²ç»æ— æ³•æ»¡è¶³è°ƒè¯•å’Œæ€§èƒ½åˆ†æçš„éœ€æ±‚ã€‚</p>
</blockquote>
<p>æœ¬æ–‡å°†å›´ç»• Node.js çš„è°ƒè¯•æŠ€å·§ä¸æ€§èƒ½åˆ†ææ–¹æ³•ï¼Œä»‹ç»å¸¸ç”¨å·¥å…·å’Œå®è·µç»éªŒï¼Œå¸®åŠ©ä½ æ›´é«˜æ•ˆåœ°å®šä½é—®é¢˜ã€ä¼˜åŒ–ç³»ç»Ÿæ€§èƒ½ã€‚</p>
<hr/>
<h2 data-id="heading-0">ä¸€ã€Node.js è°ƒè¯•çš„å¸¸è§åœºæ™¯</h2>
<p>åœ¨å®é™…å¼€å‘ä¸­ï¼Œä»¥ä¸‹é—®é¢˜ç»å¸¸å‡ºç°ï¼š</p>
<ul>
<li>æ¥å£å¶å‘æ€§æŠ¥é”™</li>
<li>å¼‚æ­¥é€»è¾‘æ‰§è¡Œé¡ºåºæ··ä¹±</li>
<li>å†…å­˜å ç”¨ä¸æ–­å¢é•¿</li>
<li>æ¥å£å“åº”æ—¶é—´å˜æ…¢</li>
</ul>
<p>è¿™äº›é—®é¢˜å¾€å¾€æ— æ³•é€šè¿‡ä»£ç å®¡æŸ¥ç›´æ¥å‘ç°ï¼Œéœ€è¦å€ŸåŠ©è°ƒè¯•å’Œåˆ†æå·¥å…·ã€‚</p>
<hr/>
<h2 data-id="heading-1">äºŒã€ä½¿ç”¨ Node.js å†…ç½®è°ƒè¯•å™¨</h2>
<p>Node.js è‡ªå¸¦è°ƒè¯•èƒ½åŠ›ï¼Œæ— éœ€é¢å¤–ä¾èµ–ã€‚</p>
<h3 data-id="heading-2">1. å¯åŠ¨è°ƒè¯•æ¨¡å¼</h3>
<pre><code class="hljs language-bash" lang="bash">node --inspect app.js
</code></pre>
<p>å¯åŠ¨åï¼ŒNode.js ä¼šç›‘å¬ä¸€ä¸ªè°ƒè¯•ç«¯å£ï¼Œå¼€å‘è€…å¯ä»¥é€šè¿‡æµè§ˆå™¨æˆ– IDE è¿›è¡Œè°ƒè¯•ã€‚</p>
<hr/>
<h3 data-id="heading-3">2. åœ¨ Chrome ä¸­è°ƒè¯•</h3>
<p>åœ¨æµè§ˆå™¨åœ°å€æ è¾“å…¥ï¼š</p>
<pre><code class="hljs language-text" lang="text">chrome://inspect
</code></pre>
<p>å³å¯è¿æ¥ Node.js è¿›ç¨‹ï¼Œè®¾ç½®æ–­ç‚¹ã€æŸ¥çœ‹å˜é‡ã€å•æ­¥æ‰§è¡Œä»£ç ï¼Œä½“éªŒä¸å‰ç«¯è°ƒè¯•éå¸¸æ¥è¿‘ã€‚</p>
<hr/>
<h2 data-id="heading-4">ä¸‰ã€ä½¿ç”¨ VS Code è¿›è¡Œè°ƒè¯•</h2>
<p>VS Code æ˜¯ Node.js å¼€å‘ä¸­æœ€å¸¸ç”¨çš„ IDEï¼Œè°ƒè¯•ä½“éªŒéå¸¸æˆç†Ÿã€‚</p>
<h3 data-id="heading-5">1. é…ç½® launch.json</h3>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"version"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"0.2.0"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"configurations"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"node"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"request"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"launch"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Debug Node App"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"program"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"${workspaceFolder}/app.js"</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>é€šè¿‡æ–­ç‚¹å’Œè°ƒè¯•æ§åˆ¶å°ï¼Œå¯ä»¥å¿«é€Ÿå®šä½é—®é¢˜ã€‚</p>
<hr/>
<h3 data-id="heading-6">2. è°ƒè¯•å¼‚æ­¥ä»£ç </h3>
<p>VS Code æ”¯æŒå¼‚æ­¥è°ƒç”¨æ ˆï¼Œèƒ½å¤Ÿæ¸…æ™°å±•ç¤º <code>async/await</code> çš„æ‰§è¡Œè¿‡ç¨‹ï¼Œè¿™å¯¹æ’æŸ¥å¼‚æ­¥é—®é¢˜éå¸¸æœ‰å¸®åŠ©ã€‚</p>
<hr/>
<h2 data-id="heading-7">å››ã€æ—¥å¿—åœ¨è°ƒè¯•ä¸­çš„ä½œç”¨</h2>
<p>è°ƒè¯•ä¸ä»…ä»…ä¾èµ–æ–­ç‚¹ï¼Œåˆç†çš„æ—¥å¿—åŒæ ·é‡è¦ã€‚</p>
<p>åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œæ—¥å¿—å¾€å¾€æ˜¯å”¯ä¸€çš„æ’é”™æ‰‹æ®µã€‚</p>
<p>å¸¸è§æ—¥å¿—å®è·µåŒ…æ‹¬ï¼š</p>
<ul>
<li>è®°å½•å…³é”®ä¸šåŠ¡æµç¨‹</li>
<li>åŒºåˆ†æ—¥å¿—çº§åˆ«</li>
<li>è¾“å‡ºç»“æ„åŒ–æ—¥å¿—</li>
</ul>
<p>é¿å…æ— æ„ä¹‰çš„æ—¥å¿—å †ç§¯ï¼Œæ‰èƒ½æé«˜æ’æŸ¥æ•ˆç‡ã€‚</p>
<hr/>
<h2 data-id="heading-8">äº”ã€Node.js æ€§èƒ½åˆ†æçš„å¿…è¦æ€§</h2>
<p>æ€§èƒ½é—®é¢˜é€šå¸¸è¡¨ç°ä¸ºï¼š</p>
<ul>
<li>æ¥å£å“åº”æ…¢</li>
<li>CPU ä½¿ç”¨ç‡è¿‡é«˜</li>
<li>å†…å­˜æŒç»­å¢é•¿</li>
</ul>
<p>å¦‚æœä¸è¿›è¡Œæ€§èƒ½åˆ†æï¼Œå¾ˆéš¾å‡†ç¡®æ‰¾åˆ°ç“¶é¢ˆæ‰€åœ¨ã€‚</p>
<hr/>
<h2 data-id="heading-9">å…­ã€ä½¿ç”¨ <code>console.time</code> è¿›è¡Œç®€å•æ€§èƒ½åˆ†æ</h2>
<p>åœ¨æ’æŸ¥ä»£ç å—è€—æ—¶æ—¶ï¼Œå¯ä»¥ä½¿ç”¨å†…ç½®æ–¹æ³•ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">time</span>(<span class="hljs-string">'dbQuery'</span>);
<span class="hljs-comment">// æ‰§è¡Œè€—æ—¶æ“ä½œ</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">timeEnd</span>(<span class="hljs-string">'dbQuery'</span>);
</code></pre>
<p>è¿™ç§æ–¹å¼ç®€å•ç›´è§‚ï¼Œé€‚åˆå¿«é€Ÿå®šä½æ€§èƒ½çƒ­ç‚¹ã€‚</p>
<hr/>
<h2 data-id="heading-10">ä¸ƒã€ä½¿ç”¨ Node.js Profiler è¿›è¡Œ CPU åˆ†æ</h2>
<p>Node.js æä¾›äº†å†…ç½®çš„ CPU Profilerã€‚</p>
<pre><code class="hljs language-bash" lang="bash">node --prof app.js
</code></pre>
<p>è¿è¡Œåä¼šç”Ÿæˆæ—¥å¿—æ–‡ä»¶ï¼Œå¯ç”¨äºåˆ†æå‡½æ•°è°ƒç”¨å’Œ CPU å ç”¨æƒ…å†µã€‚</p>
<p>é€šè¿‡åˆ†æç»“æœï¼Œå¯ä»¥æ‰¾å‡ºæœ€è€—æ—¶çš„å‡½æ•°ã€‚</p>
<hr/>
<h2 data-id="heading-11">å…«ã€å†…å­˜æ³„æ¼çš„æ’æŸ¥æ€è·¯</h2>
<p>å†…å­˜æ³„æ¼æ˜¯ Node.js é¡¹ç›®ä¸­æ¯”è¾ƒéšè”½çš„é—®é¢˜ã€‚</p>
<p>å¸¸è§åŸå› åŒ…æ‹¬ï¼š</p>
<ul>
<li>å…¨å±€å˜é‡æœªé‡Šæ”¾</li>
<li>ç¼“å­˜æ— é™å¢é•¿</li>
<li>äº‹ä»¶ç›‘å¬æœªç§»é™¤</li>
</ul>
<p>å¯ä»¥é€šè¿‡å®šæœŸè®°å½•å†…å­˜ä½¿ç”¨æƒ…å†µï¼Œè§‚å¯Ÿæ˜¯å¦æŒç»­å¢é•¿ã€‚</p>
<hr/>
<h2 data-id="heading-12">ä¹ã€ä½¿ç”¨ Chrome DevTools åˆ†æå†…å­˜</h2>
<p>Node.js ä¹Ÿå¯ä»¥ä½¿ç”¨ Chrome çš„å†…å­˜åˆ†æå·¥å…·ã€‚</p>
<p>æ­¥éª¤åŒ…æ‹¬ï¼š</p>
<ul>
<li>å¯åŠ¨ <code>--inspect</code></li>
<li>è¿æ¥ Chrome DevTools</li>
<li>ç”Ÿæˆ Heap Snapshot</li>
</ul>
<p>é€šè¿‡å¯¹æ¯”å¿«ç…§ï¼Œå¯ä»¥æ‰¾å‡ºæœªè¢«é‡Šæ”¾çš„å¯¹è±¡ã€‚</p>
<hr/>
<h2 data-id="heading-13">åã€äº‹ä»¶å¾ªç¯ä¸æ€§èƒ½çš„å…³ç³»</h2>
<p>Node.js çš„æ€§èƒ½ä¸äº‹ä»¶å¾ªç¯å¯†åˆ‡ç›¸å…³ã€‚</p>
<p>å¦‚æœå­˜åœ¨ï¼š</p>
<ul>
<li>é•¿æ—¶é—´åŒæ­¥ä»£ç </li>
<li>å¯†é›†è®¡ç®—ä»»åŠ¡</li>
</ul>
<p>å°±ä¼šé˜»å¡äº‹ä»¶å¾ªç¯ï¼Œå¯¼è‡´æ•´ä½“æ€§èƒ½ä¸‹é™ã€‚</p>
<p>å»ºè®®å°†è€—æ—¶è®¡ç®—æ‹†åˆ†æˆ–äº¤ç»™å…¶ä»–è¿›ç¨‹å¤„ç†ã€‚</p>
<hr/>
<h2 data-id="heading-14">åä¸€ã€æ€§èƒ½ä¼˜åŒ–çš„å®è·µå»ºè®®</h2>
<p>åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œå¯ä»¥éµå¾ªä»¥ä¸‹åŸåˆ™ï¼š</p>
<ul>
<li>é¿å…é˜»å¡äº‹ä»¶å¾ªç¯</li>
<li>åˆç†ä½¿ç”¨ç¼“å­˜</li>
<li>æ§åˆ¶å¹¶å‘æ•°é‡</li>
<li>ä½¿ç”¨è¿æ¥æ± </li>
</ul>
<p>æ€§èƒ½ä¼˜åŒ–åº”ä»¥æ•°æ®åˆ†æä¸ºåŸºç¡€ï¼Œè€Œä¸æ˜¯ç›²ç›®ä¿®æ”¹ä»£ç ã€‚</p>
<hr/>
<h2 data-id="heading-15">åäºŒã€æ€»ç»“</h2>
<p>è°ƒè¯•å’Œæ€§èƒ½åˆ†ææ˜¯ Node.js å¼€å‘ä¸­çš„å¿…å¤‡æŠ€èƒ½ã€‚é€šè¿‡å†…ç½®è°ƒè¯•å™¨ã€IDE å·¥å…·å’Œæ€§èƒ½åˆ†ææ‰‹æ®µï¼Œå¯ä»¥æ›´é«˜æ•ˆåœ°å‘ç°é—®é¢˜ã€å®šä½ç“¶é¢ˆå¹¶æŒç»­ä¼˜åŒ–ç³»ç»Ÿã€‚</p>
<p>åœ¨ã€ŠNode.js ç¼–ç¨‹å®æˆ˜ã€‹ä¸­ï¼ŒæŒæ¡è¿™äº›æŠ€å·§ï¼Œä¸ä»…èƒ½å†™å‡ºèƒ½è·‘çš„ä»£ç ï¼Œæ›´èƒ½å†™å‡ºç¨³å®šã€é«˜æ€§èƒ½çš„ä»£ç ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‘Šåˆ«é»‘ç›’ï¼æ‰‹å†™Windowsç‰ˆç®€æ˜“NodeMONï¼Œå­¦ä¹ æ–‡ä»¶ç›‘å¬ä»£ç ä¿®æ”¹ä¸è¿›ç¨‹æœåŠ¡é‡å¯çŸ¥è¯†]]></title>    <link>https://juejin.cn/post/7593528990848090163</link>    <guid>https://juejin.cn/post/7593528990848090163</guid>    <pubDate>2026-01-11T02:38:52.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7593528990848090163" data-draft-id="7593603345517199387" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‘Šåˆ«é»‘ç›’ï¼æ‰‹å†™Windowsç‰ˆç®€æ˜“NodeMONï¼Œå­¦ä¹ æ–‡ä»¶ç›‘å¬ä»£ç ä¿®æ”¹ä¸è¿›ç¨‹æœåŠ¡é‡å¯çŸ¥è¯†"/> <meta itemprop="keywords" content="Node.js,Express"/> <meta itemprop="datePublished" content="2026-01-11T02:38:52.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ°´å†—æ°´å­š"/> <meta itemprop="url" content="https://juejin.cn/user/1406974769508679"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‘Šåˆ«é»‘ç›’ï¼æ‰‹å†™Windowsç‰ˆç®€æ˜“NodeMONï¼Œå­¦ä¹ æ–‡ä»¶ç›‘å¬ä»£ç ä¿®æ”¹ä¸è¿›ç¨‹æœåŠ¡é‡å¯çŸ¥è¯†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1406974769508679/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ°´å†—æ°´å­š
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-11T02:38:52.000Z" title="Sun Jan 11 2026 02:38:52 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:14px;overflow-x:hidden;color:var(--cyanosis-base-color);transition:color .35s;--cyanosis-base-color:#353535;--cyanosis-title-color:#005bb7;--cyanosis-strong-color:#2196f3;--cyanosis-em-color:#4fc3f7;--cyanosis-del-color:#ccc;--cyanosis-link-color:#3da8f5;--cyanosis-linkh-color:#007fff;--cyanosis-border-color:#bedcff;--cyanosis-border-color-2:#ececec;--cyanosis-bg-color:#fff;--cyanosis-blockquote-color:#8c8c8c;--cyanosis-blockquote-bg-color:#f0fdff;--cyanosis-code-color:#c2185b;--cyanosis-code-bg-color:#fff4f4;--cyanosis-code-pre-color:#f8f8f8;--cyanosis-table-border-color:#c3e0fd;--cyanosis-table-th-color:#dff0ff;--cyanosis-table-tht-color:#005bb7;--cyanosis-table-tr-nc-color:#f7fbff;--cyanosis-table-trh-color:#e0edf7;--cyanosis-slct-title-color:#005bb7;--cyanosis-slct-titlebg-color:rgba(175,207,247,0.25);--cyanosis-slct-text-color:#c80000;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#e8ebec;--cyanosis-slct-codebg-color:#ffeaeb;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body.__dark{--cyanosis-base-color:#cacaca;--cyanosis-title-color:#ddd;--cyanosis-strong-color:#fe9900;--cyanosis-em-color:#ffd28e;--cyanosis-del-color:#ccc;--cyanosis-link-color:#ffb648;--cyanosis-linkh-color:#fe9900;--cyanosis-border-color:#ffe3ba;--cyanosis-border-color-2:#ffcb7b;--cyanosis-bg-color:#2f2f2f;--cyanosis-blockquote-color:#c7c7c7;--cyanosis-blockquote-bg-color:rgba(255,199,116,0.1);--cyanosis-code-color:#000;--cyanosis-code-bg-color:#ffcb7b;--cyanosis-code-pre-color:rgba(255,227,185,0.5);--cyanosis-table-border-color:#fe9900;--cyanosis-table-th-color:#ffb648;--cyanosis-table-tht-color:#000;--cyanosis-table-tr-nc-color:#6d5736;--cyanosis-table-trh-color:#947443;--cyanosis-slct-title-color:#000;--cyanosis-slct-titlebg-color:#fe9900;--cyanosis-slct-text-color:#00c888;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#000;--cyanosis-slct-codebg-color:#ffcb7b;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body h1{padding-bottom:4px;font-size:30px}.markdown-body h1,.markdown-body h2{margin-top:36px;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);transition:color .35s}.markdown-body h2{position:relative;padding-left:10px;padding-right:10px;padding-bottom:10px;font-size:24px;border-bottom:1px solid var(--cyanosis-border-color-2)}.markdown-body h2:before{content:"ã€Œ";position:absolute;top:-6px;left:-14px}.markdown-body h2:after{content:"ã€";position:relative;top:6px;right:auto}.markdown-body h3{position:relative;padding-bottom:0;margin-top:30px;margin-bottom:10px;font-size:20px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h3:before{content:"Â»";padding-right:6px;color:var(--cyanosis-strong-color)}.markdown-body h4{margin-top:24px;font-size:16px}.markdown-body h4,.markdown-body h5{padding-bottom:0;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h5{margin-top:18px;font-size:14px}.markdown-body h6{padding-bottom:0;margin-top:12px;margin-bottom:10px;font-size:12px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body p{line-height:inherit;margin-top:16px;margin-bottom:16px}.markdown-body img{max-width:100%}.markdown-body hr{position:relative;width:98%;height:1px;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,var(--cyanosis-link-color),rgba(255,0,0,.3),hsla(0,0%,100%,.1),rgba(255,0,0,.3),var(--cyanosis-link-color));border-width:0;overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background-color:var(--cyanosis-bg-color);background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center;transition:background-color .5s}.markdown-body code{padding:.065em .4em;font-size:.87em;color:var(--cyanosis-code-color);word-break:break-word;overflow-x:auto;background-color:var(--cyanosis-code-bg-color);border-radius:2px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;padding:16px 12px;margin:0;font-size:12px;color:#333;word-break:normal;overflow-x:auto;background:var(--cyanosis-code-pre-color)}.markdown-body pre&gt;code::-webkit-scrollbar{width:4px;height:4px}.markdown-body pre&gt;code::-webkit-scrollbar-track{background-color:var(--cyanosis-border-color)}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:var(--cyanosis-strong-color);border-radius:10px}.markdown-body a{position:relative;text-decoration:none;color:var(--cyanosis-link-color);border-bottom:1px solid var(--cyanosis-border-color)}.markdown-body a:hover{border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body a:active,.markdown-body a:hover{color:var(--cyanosis-linkh-color)}.markdown-body a:after{position:absolute;content:"";top:100%;left:0;width:100%;opacity:0;border-bottom:1px solid var(--cyanosis-border-color);transition:top .3s,opacity .3s;transform:translateZ(0)}.markdown-body a:hover:after{top:0;opacity:1;border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid var(--cyanosis-table-border-color);border-spacing:0;border-collapse:collapse}.markdown-body table thead{color:#000;text-align:left;font-size:14px;background:#f6f6f6}.markdown-body table tr:nth-child(2n){background-color:var(--cyanosis-table-tr-nc-color)}.markdown-body table tr:hover{background-color:var(--cyanosis-table-trh-color)}.markdown-body table td,.markdown-body table th{padding:12px 8px;line-height:24px;border:1px solid var(--cyanosis-table-border-color)}.markdown-body table th{color:var(--cyanosis-table-tht-color);background-color:var(--cyanosis-table-th-color)}.markdown-body table td{min-width:120px}.markdown-body blockquote{color:var(--cyanosis-blockquote-color);border-left:4px solid var(--cyanosis-strong-color);background-color:var(--cyanosis-blockquote-bg-color);padding:1px 20px;margin:22px 0;transition:color .35s}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body b,.markdown-body blockquote&gt;b,.markdown-body blockquote&gt;strong,.markdown-body strong{color:var(--cyanosis-strong-color)}.markdown-body em,.markdown-body i{color:var(--cyanosis-em-color)}.markdown-body del{color:var(--cyanosis-del-color)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:4px}.markdown-body ol li{padding-left:6px}.markdown-body details&gt;summary{outline:none;color:var(--cyanosis-title-color);font-size:20px;font-weight:bolder;border-bottom:1px solid var(--cyanosis-border-color);cursor:pointer}.markdown-body details&gt;p{padding:10px 20px;margin:10px 0 0;color:#666;background-color:var(--cyanosis-blockquote-bg-color);border:2px dashed var(--cyanosis-strong-color)}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection{color:var(--cyanosis-slct-title-color);background-color:var(--cyanosis-slct-titlebg-color)}.markdown-body ol li::selection,.markdown-body p::selection,.markdown-body ul li::selection{color:var(--cyanosis-slct-text-color);background-color:var(--cyanosis-slct-bg-color)}.markdown-body a::selection,.markdown-body b::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:var(--cyanosis-slct-elbg-color)}.markdown-body del::selection{color:var(--cyanosis-slct-del-color);background-color:var(--cyanosis-slct-elbg-color)}.markdown-body table thead th::selection{background-color:transparent}.markdown-body table tbody td::selection{background-color:var(--cyanosis-slct-bg-color)}.markdown-body code::selection{background-color:var(--cyanosis-slct-codebg-color)}.markdown-body pre&gt;code::selection{background-color:var(--cyanosis-slct-prebg-color)}.markdown-body .contains-task-list{padding-left:14px;list-style:none}.markdown-body .contains-task-list input[type=checkbox]{position:relative}.markdown-body .contains-task-list input[type=checkbox]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;width:inherit;height:inherit;background:#f0f8ff;border:1px solid #add6ff;border-radius:2px;box-sizing:border-box;z-index:1}.markdown-body .contains-task-list input[type=checkbox]:checked:after{content:"âœ“";position:absolute;top:-12px;left:0;right:0;bottom:0;width:0;height:0;color:#f55;font-size:20px;font-weight:700;z-index:2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atom-one-dark">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#abb2bf;background:#282c34}.hljs-comment,.hljs-quote{color:#5c6370;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#c678dd}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e06c75}.hljs-literal{color:#56b6c2}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#98c379}.hljs-built_in,.hljs-class .hljs-title{color:#e6c07b}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#d19a66}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#61aeee}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}</style><hr/>
<h2 data-id="heading-0">ä¸ºä»€ä¹ˆè¦æ‰‹å†™ NodeMONï¼Ÿ</h2>
<p>åœ¨å¼€å‘ Node.js åº”ç”¨æ—¶ï¼Œæˆ‘ä»¬ç»å¸¸ç”¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.npmjs.com%2Fpackage%2Fnodemon%2Fv%2F1.3.6" target="_blank" title="https://www.npmjs.com/package/nodemon/v/1.3.6" ref="nofollow noopener noreferrer"><code>nodemon</code></a> æ¥è‡ªåŠ¨é‡å¯æœåŠ¡ã€‚ä½†ä½ æœ‰æ²¡æœ‰æƒ³è¿‡ï¼š</p>
<ul>
<li>ğŸ¤” å®ƒæ˜¯å¦‚ä½•ç›‘å¬æ–‡ä»¶å˜åŒ–çš„ï¼Ÿ</li>
<li>ğŸ¤” å®ƒæ˜¯å¦‚ä½•ä¼˜é›…åœ°æ€æ‰è¿›ç¨‹å¹¶é‡å¯æ–°è¿›ç¨‹çš„ï¼Ÿ</li>
</ul>
<p>ä»Šå¤©æˆ‘ä»¬å°±ä»é›¶å¼€å§‹ï¼Œæ‰‹å†™ä¸€ä¸ª <strong>Windows ä¸“å±çš„ç®€æ˜“ NodeMON å·¥å…·</strong>ï¼Œå½»åº•ææ‡‚èƒŒåçš„åŸç†ï¼</p>
<h3 data-id="heading-1">node index.jsçš„æ‰§è¡Œè¿‡ç¨‹</h3>
<p>æ¯”å¦‚æˆ‘ä½¿ç”¨expressç¼–å†™ä¸€ä¸ªç®€å•çš„æœåŠ¡ä»£ç </p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> express = <span class="hljs-built_in">require</span>(<span class="hljs-string">'express'</span>); 
<span class="hljs-keyword">const</span> app = <span class="hljs-title function_">express</span>();

app.<span class="hljs-title function_">get</span>(<span class="hljs-string">'/'</span>, <span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> { res.<span class="hljs-title function_">send</span>(<span class="hljs-string">'Hello World!'</span>); });

<span class="hljs-keyword">const</span> server = app.<span class="hljs-title function_">listen</span>(<span class="hljs-number">6666</span>, <span class="hljs-function">() =&gt;</span> { 
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Express æœåŠ¡å·²å¯åŠ¨ï¼Œè¿›ç¨‹ IDï¼š'</span>, process.<span class="hljs-property">pid</span>); <span class="hljs-comment">// æ‰“å°å½“å‰è¿›ç¨‹ID </span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æœåŠ¡ç›‘å¬ http://localhost:6666'</span>); 
});
</code></pre>
<p>å½“æˆ‘ä»¬æ‰§è¡Œ <code>node index.js</code> æ—¶ï¼š</p>
<ul>
<li>æ“ä½œç³»ç»Ÿä¼šåœ¨ç¯å¢ƒå˜é‡çš„ç›®å½•é‡Œé¢é€ä¸ªæŸ¥æ‰¾ï¼Œå¹¶æ‰¾åˆ°nodeçš„å¯æ‰§è¡Œç¨‹åºï¼Œæ¯”å¦‚ä½ç½®åœ¨ï¼š<code>C:\Program Files\nodejs</code> <img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4b83f4f68c8e4bfc9f89a859b6b54ac2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rC05YaX5rC05a2a:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768704014&amp;x-signature=vjpD45vkomNnpLqgUaIUEQxgzwA%3D" alt="111.png" width="60%" loading="lazy"/></li>
<li>å½“æ“ä½œç³»ç»Ÿæ‰¾åˆ°è¿™ä¸ªå¯æ‰§è¡Œç¨‹åºåï¼Œä¼šå®‰æ’ä¸€ä¸ªè¿›ç¨‹å»åŠ è½½å¹¶æ‰§è¡Œè¿™ä¸ªnode.exeç¨‹åºï¼Œå†æŠŠindex.jsæ–‡ä»¶ä½œä¸ºå‚æ•°äº¤ç»™node.exeå»è§£æå¹¶è¿è¡Œ</li>
<li>åœ¨è¿™ä¸ªæ–°è¿›ç¨‹çš„å†…éƒ¨ï¼ŒNodejsä¼šå»æ‰§è¡Œindex.jsçš„ä»£ç ï¼Œæœ€ç»ˆä¼šå¯åŠ¨ä¸€ä¸ªExpressæœåŠ¡ï¼Œè¿™ä¸ªæœåŠ¡ä½¿ç”¨çš„æ˜¯6666ç«¯å£</li>
<li>åªè¦è¿™ä¸ªè¿›ç¨‹ä¸ç»ˆæ­¢ï¼ˆæ¯”å¦‚ä½ æŒ‰ <code>Ctrl+C</code>ã€æ€æ­»è¿›ç¨‹ã€æœåŠ¡å™¨é‡å¯ï¼‰ï¼Œ6666 ç«¯å£å°±ä¼šä¸€ç›´è¢«å ç”¨ï¼ŒæœåŠ¡å°±ä¸€ç›´å¯ç”¨ã€‚</li>
</ul>
<h3 data-id="heading-2">é€šä¿—æ˜“æ‡‚åœ°ç±»æ¯”ç†è§£</h3>
<p>æ“ä½œç³»ç»Ÿæ˜¯ â€œå·¥å‚å°è€æ¿â€ï¼Œè¿›ç¨‹æ˜¯é©¾é©¶æœºå™¨çš„ä¸€ä¸ªä¸ªçš„å‘˜å·¥ï¼Œè€Œnode.exe åˆ™æ˜¯ â€œä¸€å°æœºå™¨â€ï¼Œindex.js æ˜¯ â€œæœºå™¨è¦å¤„ç†çš„ä»»åŠ¡å•â€</p>
<ul>
<li>
<p><strong>æ“ä½œç³»ç»Ÿ = å·¥å‚å°è€æ¿</strong>è´Ÿè´£ç»Ÿç­¹å…¨å±€ï¼Œå†³å®šè¦ä¸è¦æ‹›æ–°å‘˜å·¥ï¼ˆåˆ›å»ºè¿›ç¨‹ï¼‰ã€ç»™å‘˜å·¥åˆ†é…æœºå™¨ï¼ˆè¿è¡Œå¯æ‰§è¡Œç¨‹åºï¼‰ã€ä¸‹å‘ä»»åŠ¡å•ï¼ˆä¼ é€’å‚æ•°ï¼‰ï¼Œè¿˜èƒ½éšæ—¶ç›‘ç£å‘˜å·¥å·¥ä½œçŠ¶æ€ï¼ˆæŸ¥çœ‹è¿›ç¨‹ PIDã€å ç”¨èµ„æºï¼‰ï¼Œæˆ–è€…è®©å‘˜å·¥ä¸‹ç­ï¼ˆç»ˆæ­¢è¿›ç¨‹ï¼‰ã€‚</p>
</li>
<li>
<p><strong>è¿›ç¨‹ = é©¾é©¶æœºå™¨çš„å‘˜å·¥</strong>æ˜¯è€æ¿ï¼ˆç³»ç»Ÿï¼‰ä¸“é—¨æ‹›æ¥çš„ â€œä¸“äººâ€ï¼Œæœ‰è‡ªå·±çš„å”¯ä¸€å·¥å·ï¼ˆPIDï¼‰ï¼Œä»–çš„æ ¸å¿ƒå·¥ä½œå°±æ˜¯æ“ä½œæ‰‹é‡Œçš„æœºå™¨ï¼Œå…¨ç¨‹åªå›´ç»•è¿™ä¸ªæœºå™¨å’Œä»»åŠ¡è½¬ï¼Œä¸ä¼šåŒæ—¶å¹²åˆ«çš„æ´»ã€‚</p>
</li>
<li>
<p><strong>node.exe = å‘˜å·¥é©¾é©¶çš„æœºå™¨</strong>æ˜¯å‘˜å·¥çš„ â€œå·¥å…·â€ï¼Œæœ¬èº«æœ‰å›ºå®šçš„åŠŸèƒ½ï¼ˆJavaScript è§£é‡Šæ‰§è¡Œèƒ½åŠ›ï¼‰ï¼Œæ²¡æœ‰å‘˜å·¥ï¼ˆè¿›ç¨‹ï¼‰æ“ä½œçš„è¯ï¼Œå®ƒå°±æ˜¯ä¸€å°é—²ç½®çš„æœºå™¨ï¼Œå•¥ä¹Ÿå¹²ä¸äº†ã€‚</p>
</li>
<li>
<p><strong>index.js = æœºå™¨è¦å¤„ç†çš„ä»»åŠ¡å•</strong>ä¸Šé¢å†™ç€å…·ä½“çš„å·¥ä½œå†…å®¹ï¼ˆæ¯”å¦‚ â€œå¯åŠ¨ Express æœåŠ¡ã€ç›‘å¬ 3000 ç«¯å£â€ï¼‰ï¼Œå‘˜å·¥ï¼ˆè¿›ç¨‹ï¼‰æ“ä½œæœºå™¨ï¼ˆnode.exeï¼‰æ—¶ï¼Œå°±ç…§ç€ä»»åŠ¡å•çš„è¦æ±‚ä¸€æ­¥æ­¥æ‰§è¡Œã€‚</p>
</li>
</ul>
<blockquote>
<p>è‡³äºçº¿ç¨‹ï¼Œæˆ‘ä»¬çŸ¥é“è¿›ç¨‹ä¸­å¯ä»¥åˆ›å»ºå¤šä¸ªçº¿ç¨‹ï¼ˆå¯ä»¥ç†è§£ä¸ºä¸€ä¸ªæ“ä½œæœºå™¨çš„å‘˜å·¥ï¼Œå¯ä»¥é•¿å‡ºå¤šåªæ‰‹ï¼Œä¸¤åªæ‰‹å¹²æ´»æ€»ä¼šæ¯”ä¸€åªæ‰‹å¹²æ´»å¿«ï¼‰</p>
</blockquote>
<blockquote>
<p>å‘˜å·¥å¸¸å¸¸ç”¨ä¸€åªæ‰‹å¹²æ´»ï¼ˆè¿›ç¨‹ä¸­çš„ä¸»çº¿ç¨‹å¹²æ´»ï¼‰</p>
</blockquote>
<p><strong>è¯´åˆ°è¿™é‡Œï¼Œå°±è¦é¢å¤–æä¸€ä¸‹Processè¿™ä¸ªå˜é‡äº†</strong></p>
<p>processå°±ç›¸å½“äºnode.exeè¿™ä¸ªæœºå™¨ä¸Šé¢çš„æ§åˆ¶æ˜¾ç¤ºå±ï¼Œè®°å½•äº†ä¸€äº›ä¿¡æ¯ï¼Œæä¾›ç»™å¤–éƒ¨æ–¹ä¾¿ä½¿ç”¨</p>



































<table><thead><tr><th>æ§åˆ¶æ˜¾ç¤ºå±ï¼ˆprocessï¼‰çš„åŠŸèƒ½</th><th>å¯¹åº”å·¥å‚åœºæ™¯</th><th>ä»£ç ç¤ºä¾‹</th></tr></thead><tbody><tr><td>æ˜¾ç¤º â€œå‘˜å·¥å·¥å·ï¼ˆPIDï¼‰â€</td><td>å±å¹•ä¸Šæ˜¾ç¤ºå½“å‰æ“ä½œæœºå™¨çš„å‘˜å·¥ç¼–å·</td><td><code>process.pid</code> â†’ è¾“å‡º 39900</td></tr><tr><td>æ˜¾ç¤º â€œæœºå™¨è¿è¡Œå‚æ•°â€</td><td>å±å¹•æ˜¾ç¤ºæœºå™¨æ¥æ”¶åˆ°çš„ä»»åŠ¡å•ï¼ˆindex.jsï¼‰ã€å¯åŠ¨æŒ‡ä»¤</td><td><code>process.argv</code> â†’ è¾“å‡º <code>['node', 'index.js']</code></td></tr><tr><td>æ˜¾ç¤º â€œæœºå™¨èµ„æºå ç”¨â€</td><td>å±å¹•æ˜¾ç¤ºæœºå™¨å½“å‰ç”¨äº†å¤šå°‘å†…å­˜ã€CPU</td><td><code>process.memoryUsage()</code> â†’ è¾“å‡ºå†…å­˜å ç”¨æ•°æ®</td></tr><tr><td>æä¾› â€œå…³æœºæŒ‰é’®â€</td><td>å±å¹•ä¸Šçš„ â€œåœæ­¢è¿è¡Œâ€ æŒ‰é’®ï¼ŒæŒ‰äº†å‘˜å·¥å°±ä¸‹ç­</td><td><code>process.exit()</code> â†’ ç»ˆæ­¢å½“å‰è¿›ç¨‹</td></tr><tr><td>æ˜¾ç¤º â€œå·¥å‚ç¯å¢ƒâ€</td><td>å±å¹•æ˜¾ç¤ºè€æ¿ï¼ˆç³»ç»Ÿï¼‰ç»™çš„ç¯å¢ƒå˜é‡ï¼ˆæ¯”å¦‚ PATHï¼‰</td><td><code>process.env</code> â†’ è¾“å‡ºç³»ç»Ÿç¯å¢ƒå˜é‡</td></tr></tbody></table>
<ul>
<li>æ¯”å¦‚ï¼Œæˆ‘å¯ä»¥æ‰“å°è¿›ç¨‹idå°±æ˜¯</li>
<li>console.log('è¿›ç¨‹ IDï¼š', process.pid) // å¾—åˆ°39900è¿™ä¸ªå€¼ æ˜¯40188å½“ç„¶æ¯æ¬¡ä¸€èˆ¬éƒ½ä¸ä¸€æ ·</li>
</ul>
<p><em>cmdå‘½ä»¤ï¼š</em></p>
<p><code>tasklist | findstr 39900</code> æŸ¥çœ‹è¿›ç¨‹39900åœ¨ä½¿ç”¨å“ªä¸€å°æœºå™¨â€”â€”ä½¿ç”¨node.exeè¿™ä¸ªæœºå™¨</p>
<pre><code class="hljs language-bash" lang="bash">C:\Users\lss13&gt;tasklist | findstr 39900
node.exe                     39900 Console                    1     25,176 K

</code></pre>
<p><code>netstat -ano | findstr :6666</code> æŸ¥çœ‹6666ç«¯å£ï¼Œè¢«é‚£ä¸ªè¿›ç¨‹ä½¿ç”¨â€”â€”è¢«39900è¿›ç¨‹ä½¿ç”¨</p>
<pre><code class="hljs language-bash" lang="bash">C:\Users\lss13&gt;netstat -ano | findstr :6666
  TCP    0.0.0.0:6666           0.0.0.0:0              LISTENING       39900
  TCP    [::]:6666              [::]:0                 LISTENING       39900
</code></pre>
<hr/>
<h2 data-id="heading-3">ä¸€ã€åŸç†è®²è§£</h2>
<p>æœ‰äº†å‰ç½®çš„çŸ¥è¯†åï¼Œæˆ‘ä»¬æ¥æ¢³ç†ä¸€ä¸‹æ‰‹å†™å¯åŠ¨ç›‘æ§å·¥å…·çš„æ€è·¯</p>
<h3 data-id="heading-4">æ ¸å¿ƒæµç¨‹</h3>
<pre><code class="hljs language-markdown" lang="markdown">å¯åŠ¨ç›‘æ§å·¥å…·
<span class="hljs-code">    â†“
ç›‘å¬æ–‡ä»¶å˜åŒ–ï¼ˆchokidarï¼‰
    â†“
æ£€æµ‹åˆ°ä¿®æ”¹ â†’ è®¡ç®—æ–‡ä»¶ Hash
    â†“
Hash å˜äº†ï¼Ÿ
    â”œâ”€ æ˜¯ â†’ æ€æ‰æ—§è¿›ç¨‹ï¼ˆtaskkillï¼‰â†’ ç­‰å¾…ç«¯å£é‡Šæ”¾ â†’ å¯åŠ¨æ–°è¿›ç¨‹
    â””â”€ å¦ â†’ å¿½ç•¥ï¼ˆé¿å…æ— æ„ä¹‰é‡å¯ï¼‰
</span></code></pre>
<h3 data-id="heading-5">å…³é”®æŠ€æœ¯ç‚¹</h3>
<p>chokidarï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.npmjs.com%2Fpackage%2Fchokidar%2Fv%2F4.0.1" target="_blank" title="https://www.npmjs.com/package/chokidar/v/4.0.1" ref="nofollow noopener noreferrer">www.npmjs.com/package/choâ€¦</a></p>






























<table><thead><tr><th>æŠ€æœ¯</th><th>ä½œç”¨</th><th>Windows ç‰¹æ®Šå¤„ç†</th></tr></thead><tbody><tr><td><strong>chokidar</strong></td><td>ç›‘å¬æ–‡ä»¶å˜åŒ–</td><td>å¯é€‰è½®è¯¢æ¨¡å¼ï¼ˆæ›´ç¨³å®šï¼‰</td></tr><tr><td><strong>spawn</strong></td><td>å¯åŠ¨/ç®¡ç†å­è¿›ç¨‹</td><td>éœ€è¦å¤„ç†è¿›ç¨‹æ ‘</td></tr><tr><td><strong>taskkill</strong></td><td>æ€æ­»è¿›ç¨‹</td><td>Windows ä¸“å±å‘½ä»¤</td></tr><tr><td><strong>crypto</strong></td><td>è®¡ç®—æ–‡ä»¶ Hash</td><td>ç²¾ç¡®åˆ¤æ–­å†…å®¹æ˜¯å¦å˜åŒ–</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-6">äºŒã€ä»£ç å®ç°</h2>
<h3 data-id="heading-7">é¡¹ç›®ç»“æ„</h3>
<pre><code class="hljs language-bash" lang="bash">myNodeMon/
â”œâ”€â”€ package.json    <span class="hljs-comment"># é¡¹ç›®é…ç½®</span>
â”œâ”€â”€ nmon.js         <span class="hljs-comment"># ç›‘æ§å·¥å…·ï¼ˆæ ¸å¿ƒï¼‰</span>
â””â”€â”€ index.js        <span class="hljs-comment"># ä¸šåŠ¡ä»£ç ï¼ˆHTTP æœåŠ¡å™¨ï¼‰</span>
</code></pre>
<h3 data-id="heading-8">ç¬¬ä¸€æ­¥ï¼šåˆå§‹åŒ–é¡¹ç›®</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åˆ›å»ºé¡¹ç›®ç›®å½•</span>
<span class="hljs-built_in">mkdir</span> myNodeMon
<span class="hljs-built_in">cd</span> myNodeMon

<span class="hljs-comment"># åˆå§‹åŒ– package.json</span>
npm init -y

<span class="hljs-comment"># å®‰è£…ä¾èµ–</span>
npm install chokidar
</code></pre>
<h3 data-id="heading-9">ç¬¬äºŒæ­¥ï¼šé…ç½® package.json</h3>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"mynodemon"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"version"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"1.0.0"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"module"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"author"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">""</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"license"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ISC"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">""</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"dependencies"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"chokidar"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^5.0.0"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>å…³é”®é…ç½®ï¼š</strong></p>
<ul>
<li><code>"type": "module"</code>ï¼šå¯ç”¨ ES Module è¯­æ³•</li>
</ul>
<hr/>
<h3 data-id="heading-10">ç¬¬ä¸‰æ­¥ï¼šç¼–å†™ä¸šåŠ¡ä»£ç ï¼ˆindex.jsï¼‰</h3>
<p>è¿™æ˜¯æˆ‘ä»¬è¦ç›‘æ§çš„ç›®æ ‡æ–‡ä»¶index.jsï¼Œä¸€ä¸ªç®€å•çš„ HTTP æœåŠ¡å™¨ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> http <span class="hljs-keyword">from</span> <span class="hljs-string">'http'</span>;

<span class="hljs-comment">// åˆ›å»ºhttpæœåŠ¡å™¨</span>
<span class="hljs-keyword">const</span> server = http.<span class="hljs-title function_">createServer</span>(<span class="hljs-function">(<span class="hljs-params">_req, res</span>) =&gt;</span> {
    res.<span class="hljs-title function_">writeHead</span>(<span class="hljs-number">200</span>, { <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'text/plain; charset=utf-8'</span> });
    res.<span class="hljs-title function_">end</span>(<span class="hljs-string">`
    å½“å‰æ—¶é—´ï¼š<span class="hljs-subst">${<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>().toLocaleTimeString()}</span>
  `</span>);
});

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-number">666</span>)

<span class="hljs-comment">// å¯åŠ¨æœåŠ¡å™¨</span>
server.<span class="hljs-title function_">listen</span>(<span class="hljs-number">6666</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Node.js æœåŠ¡å·²å¯åŠ¨ï¼šhttp://localhost:6666`</span>);
});
</code></pre>
<p><em>åŠŸèƒ½ï¼š</em></p>
<ul>
<li>ç›‘å¬ 6666 ç«¯å£</li>
<li>è¿”å›å½“å‰æ—¶é—´</li>
</ul>
<hr/>
<h3 data-id="heading-11">ç¬¬å››æ­¥ï¼šç¼–å†™ç›‘æ§å·¥å…·ï¼ˆnmon.jsï¼‰</h3>
<p>è¿™æ˜¯æ ¸å¿ƒä»£ç ï¼Œæˆ‘ä»¬é€å—è§£æï¼š</p>
<p><em>å¯¼å…¥ä¾èµ–</em></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> chokidar <span class="hljs-keyword">from</span> <span class="hljs-string">'chokidar'</span>; <span class="hljs-comment">// æ–‡ä»¶ç›‘å¬åº“</span>
<span class="hljs-keyword">import</span> { spawn } <span class="hljs-keyword">from</span> <span class="hljs-string">'child_process'</span>; <span class="hljs-comment">// å­è¿›ç¨‹ç®¡ç†</span>
<span class="hljs-keyword">import</span> path <span class="hljs-keyword">from</span> <span class="hljs-string">'path'</span>;
<span class="hljs-keyword">import</span> crypto <span class="hljs-keyword">from</span> <span class="hljs-string">'crypto'</span>; <span class="hljs-comment">// Hash è®¡ç®—</span>
<span class="hljs-keyword">import</span> fs <span class="hljs-keyword">from</span> <span class="hljs-string">'fs'</span>; <span class="hljs-comment">// æ–‡ä»¶è¯»å–</span>
</code></pre>
<hr/>
<p><em>é…ç½®é¡¹</em></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ===================== é…ç½®é¡¹ =====================</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">TARGET_FILE</span> = <span class="hljs-string">'index.js'</span>; <span class="hljs-comment">// è¦ç›‘æ§çš„æ–‡ä»¶</span>
<span class="hljs-comment">// =================================================</span>

<span class="hljs-keyword">const</span> entryPath = path.<span class="hljs-title function_">resolve</span>(process.<span class="hljs-title function_">cwd</span>(), <span class="hljs-variable constant_">TARGET_FILE</span>); <span class="hljs-comment">// è·å–ç»å¯¹è·¯å¾„</span>
</code></pre>
<ul>
<li><code>process.cwd()</code>ï¼šå½“å‰å·¥ä½œç›®å½•ï¼ˆè¿è¡Œå‘½ä»¤çš„ä½ç½®ï¼‰</li>
<li><code>path.resolve()</code>ï¼šæ‹¼æ¥æˆç»å¯¹è·¯å¾„ï¼Œå¦‚ <code>C:\Users\xxx\myNodeMon\index.js</code></li>
</ul>
<hr/>
<p><em>Hash è®¡ç®—</em></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">let</span> lastHash = <span class="hljs-literal">null</span>; <span class="hljs-comment">// ä¿å­˜ä¸Šæ¬¡çš„ hash</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">getFileHash</span>(<span class="hljs-params">filePath</span>) {
    <span class="hljs-keyword">const</span> content = fs.<span class="hljs-title function_">readFileSync</span>(filePath);
    <span class="hljs-keyword">return</span> crypto.<span class="hljs-title function_">createHash</span>(<span class="hljs-string">'md5'</span>).<span class="hljs-title function_">update</span>(content).<span class="hljs-title function_">digest</span>(<span class="hljs-string">'hex'</span>);
}
</code></pre>
<p><em>ä¸ºä»€ä¹ˆè¦ç”¨ Hashï¼Ÿ</em></p>

















<table><thead><tr><th>æ–¹æ¡ˆ</th><th>é—®é¢˜</th></tr></thead><tbody><tr><td>åªæ£€æµ‹ä¿®æ”¹æ—¶é—´</td><td>Ctrl+S ä¸ä¿®æ”¹å†…å®¹ä¹Ÿä¼šè§¦å‘é‡å¯ âŒ</td></tr><tr><td><strong>Hash å¯¹æ¯”</strong></td><td>åªæœ‰å†…å®¹çœŸæ­£å˜åŒ–æ‰é‡å¯ âœ…</td></tr></tbody></table>
<blockquote>
<p>å½“æˆ‘ä»¬åœ¨ç¼–è¾‘å™¨é‡Œé¢ Ctrl+S çš„æ—¶å€™ï¼Œå°½ç®¡æ²¡æœ‰ä¿®æ”¹æ–‡ä»¶ï¼Œä½†æ˜¯æ“ä½œç³»ç»Ÿä¾æ—§è®¤ä¸ºè¿™ä¸ªæ–‡ä»¶å˜åŒ–äº†ï¼Œä¹Ÿä¼šè§¦å‘æ–‡ä»¶å˜åŒ–å›è°ƒå‡½æ•°ï¼Œå³æ–‡ä»¶çš„æ—¶é—´ä¼šå˜åŒ–</p>
</blockquote>
<p><em>å·¥ä½œåŸç†ï¼š</em></p>
<ol>
<li>è¯»å–æ–‡ä»¶å†…å®¹</li>
<li>è®¡ç®— MD5 å“ˆå¸Œå€¼ï¼ˆå¦‚ <code>a1b2c3d4...</code>ï¼‰</li>
<li>å¯¹æ¯”ä¸Šæ¬¡çš„å“ˆå¸Œå€¼</li>
<li>ä¸åŒæ‰é‡å¯</li>
</ol>
<hr/>
<p><em>è¿›ç¨‹å¼•ç”¨ç®¡ç†</em></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">let</span> childProcess = <span class="hljs-literal">null</span>; <span class="hljs-comment">// ä¿å­˜è¿›ç¨‹å®ä¾‹</span>

<span class="hljs-comment">// å¯åŠ¨æˆ–é‡å¯ index.js</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">startApp</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (childProcess) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ğŸ”„ æ­£åœ¨ç»ˆæ­¢æ—§è¿›ç¨‹...'</span>);

        <span class="hljs-comment">// Windows ä¸‹ç”¨ taskkill å¼ºåˆ¶æ€æ­»è¿›ç¨‹æ ‘</span>
        <span class="hljs-keyword">const</span> killProcess = <span class="hljs-title function_">spawn</span>(<span class="hljs-string">'taskkill'</span>, [<span class="hljs-string">'/F'</span>, <span class="hljs-string">'/T'</span>, <span class="hljs-string">'/PID'</span>, childProcess.<span class="hljs-property">pid</span>]);

        killProcess.<span class="hljs-title function_">on</span>(<span class="hljs-string">'close'</span>, <span class="hljs-function">() =&gt;</span> {
            childProcess = <span class="hljs-literal">null</span>; <span class="hljs-comment">// æ¸…ç©ºå¼•ç”¨</span>
            <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
                <span class="hljs-title function_">launchNewProcess</span>();
            }, <span class="hljs-number">200</span>); <span class="hljs-comment">// ç­‰å¾…ç«¯å£é‡Šæ”¾</span>
        });
        <span class="hljs-keyword">return</span>;
    }
    <span class="hljs-title function_">launchNewProcess</span>();
}
</code></pre>





















<table><thead><tr><th>å‚æ•°</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td><code>/F</code></td><td>å¼ºåˆ¶ç»ˆæ­¢</td></tr><tr><td><code>/T</code></td><td>ç»ˆæ­¢è¿›ç¨‹æ ‘ï¼ˆåŒ…æ‹¬å­è¿›ç¨‹ï¼‰</td></tr><tr><td><code>/PID</code></td><td>æŒ‰è¿›ç¨‹ ID æ€æ­»</td></tr></tbody></table>
<p><em>ä¸ºä»€ä¹ˆè¦å»¶è¿Ÿ 200msï¼Ÿ</em></p>
<pre><code class="hljs language-markdown" lang="markdown">taskkill å®Œæˆ â†’ è¿›ç¨‹é€€å‡º â†’ æ“ä½œç³»ç»Ÿé‡Šæ”¾ç«¯å£ â†’ æ–°è¿›ç¨‹å¯åŠ¨
<span class="hljs-code">                              â†‘
                        è¿™é‡Œéœ€è¦æ—¶é—´ï¼ˆçº¦ 50-150msï¼‰
</span></code></pre>
<p>å¦‚æœä¸ç­‰å¾…ï¼Œæ–°è¿›ç¨‹ä¼šæŠ¥é”™ï¼š<code>EADDRINUSE: address already in use</code></p>
<hr/>
<p><em>å¯åŠ¨æ–°è¿›ç¨‹</em></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">launchNewProcess</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ğŸš€ æ­£åœ¨å¯åŠ¨æ–°è¿›ç¨‹...\n'</span>);

    <span class="hljs-comment">// ç›¸å½“äºæ‰§è¡Œï¼šnode index.js</span>
    childProcess = <span class="hljs-title function_">spawn</span>(<span class="hljs-string">'node'</span>, [entryPath], {
        <span class="hljs-attr">stdio</span>: <span class="hljs-string">'inherit'</span> <span class="hljs-comment">// è®©å­è¿›ç¨‹çš„æ—¥å¿—ç›´æ¥æ˜¾ç¤ºåœ¨æ§åˆ¶å°</span>
    });

    childProcess.<span class="hljs-title function_">on</span>(<span class="hljs-string">'error'</span>, <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'âŒ å¯åŠ¨å¤±è´¥ï¼š'</span>, err.<span class="hljs-property">message</span>);
    });
}
</code></pre>
<p><code>stdio: 'inherit'</code>ï¼šç»§æ‰¿çˆ¶è¿›ç¨‹çš„è¾“å…¥è¾“å‡ºï¼Œè®© <code>index.js</code> çš„æ—¥å¿—èƒ½æ˜¾ç¤ºå‡ºæ¥</p>
<hr/>
<p><em>æ–‡ä»¶å˜åŒ–ç›‘å¬</em></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åˆ›å»ºæ–‡ä»¶ç›‘å¬å™¨</span>
<span class="hljs-keyword">const</span> watcher = chokidar.<span class="hljs-title function_">watch</span>(<span class="hljs-variable constant_">TARGET_FILE</span>, {
    <span class="hljs-attr">ignoreInitial</span>: <span class="hljs-literal">true</span>  <span class="hljs-comment">// å¿½ç•¥åˆå§‹åŒ–æ—¶çš„äº‹ä»¶</span>
});

watcher.<span class="hljs-title function_">on</span>(<span class="hljs-string">'change'</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> currentHash = <span class="hljs-title function_">getFileHash</span>(<span class="hljs-variable constant_">TARGET_FILE</span>);
    
    <span class="hljs-keyword">if</span> (currentHash !== lastHash) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ğŸ“ æ£€æµ‹åˆ°å†…å®¹çœŸçš„å˜äº†'</span>);
        lastHash = currentHash;
        <span class="hljs-title function_">startApp</span>();
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'â­ï¸ å†…å®¹æ²¡å˜ï¼Œå¿½ç•¥'</span>);
    }
});

<span class="hljs-comment">// åˆå§‹åŒ–æ—¶è®¡ç®—ä¸€æ¬¡</span>
lastHash = <span class="hljs-title function_">getFileHash</span>(<span class="hljs-variable constant_">TARGET_FILE</span>);
</code></pre>
<p><em>æµç¨‹</em></p>
<ol>
<li>ç›‘å¬ <code>index.js</code> çš„ <code>change</code> äº‹ä»¶</li>
<li>è®¡ç®—å½“å‰æ–‡ä»¶çš„ Hash</li>
<li>å¯¹æ¯”ä¸Šæ¬¡çš„ Hash</li>
<li>ä¸åŒæ‰è°ƒç”¨ <code>startApp()</code> é‡å¯</li>
</ol>
<hr/>
<p><em>å¯åŠ¨ç›‘æ§</em></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`ğŸš€ Windows ç›‘æ§å·¥å…·å·²å¯åŠ¨`</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`ğŸ¯ ç›‘æ§ç›®æ ‡ï¼š<span class="hljs-subst">${TARGET_FILE}</span>\n`</span>);
<span class="hljs-title function_">startApp</span>();
</code></pre>
<hr/>
<p><em>ä¼˜é›…é€€å‡ºï¼ˆCtrl+Cï¼‰</em></p>
<pre><code class="hljs language-javascript" lang="javascript">process.<span class="hljs-title function_">on</span>(<span class="hljs-string">'SIGINT'</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">if</span> (childProcess) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'\nğŸ›‘ æ­£åœ¨æ¸…ç†å­è¿›ç¨‹...'</span>);
        <span class="hljs-title function_">spawn</span>(<span class="hljs-string">'taskkill'</span>, [<span class="hljs-string">'/F'</span>, <span class="hljs-string">'/T'</span>, <span class="hljs-string">'/PID'</span>, childProcess.<span class="hljs-property">pid</span>]);
        childProcess = <span class="hljs-literal">null</span>;
    }
    watcher.<span class="hljs-title function_">close</span>();
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ğŸ‘‹ ç›‘æ§å·¥å…·å·²é€€å‡º'</span>);
    process.<span class="hljs-title function_">exit</span>(<span class="hljs-number">0</span>);
});
</code></pre>
<ul>
<li>æŒ‰ Ctrl+C æ—¶æ¸…ç†å­è¿›ç¨‹</li>
<li>å…³é—­æ–‡ä»¶ç›‘å¬å™¨</li>
<li>é¿å…ç«¯å£æ®‹ç•™å ç”¨</li>
</ul>
<hr/>
<h2 data-id="heading-12">ä¸‰ã€æµ‹è¯•éªŒè¯æ•ˆæœ</h2>
<p>æµ‹è¯•åœºæ™¯ 0ï¼šå¯åŠ¨æœåŠ¡å¹¶è®¿é—®
æµ‹è¯•åœºæ™¯ 1ï¼šä¿®æ”¹æ–‡ä»¶å†…å®¹
æµ‹è¯•åœºæ™¯ 2ï¼šä¸ä¿®æ”¹å†…å®¹ï¼Œåªä¿å­˜
æµ‹è¯•åœºæ™¯ 3ï¼šä¼˜é›…é€€å‡º</p>
<p>æ•ˆæœå›¾</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/882bdef8d8024f9ebc8915410b414b8c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rC05YaX5rC05a2a:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768704014&amp;x-signature=HYP1U%2BUGeYsKRhH4zbwBCI%2F5WIw%3D" alt="gif.gif" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-13">å››ã€è¸©å‘</h2>
<h3 data-id="heading-14">ä¸ºä»€ä¹ˆ Windows éœ€è¦ç‰¹æ®Šå¤„ç†ï¼Ÿ</h3>
<p><em>é—®é¢˜ 1ï¼šæ–‡ä»¶ç›‘å¬ä¸ç¨³å®š</em></p>
<p>Linux/Macï¼š</p>
<ul>
<li>ä½¿ç”¨ <code>inotify</code> / <code>FSEvents</code>ï¼ˆå†…æ ¸çº§åˆ«ï¼‰</li>
<li>é«˜æ•ˆã€å‡†ç¡®ã€å®æ—¶</li>
</ul>
<p>Windowsï¼š</p>
<ul>
<li>ä½¿ç”¨ <code>ReadDirectoryChangesW</code>ï¼ˆåŸºäºç›®å½•æ‰«æï¼‰</li>
<li>å®¹æ˜“ä¸¢å¤±äº‹ä»¶æˆ–é‡å¤è§¦å‘</li>
<li>å®¹æ˜“ä¸¢å¤±äº‹ä»¶æˆ–é‡å¤è§¦å‘</li>
<li>å®¹æ˜“ä¸¢å¤±äº‹ä»¶æˆ–é‡å¤è§¦å‘</li>
</ul>
<blockquote>
<p><strong>ç‰¹åˆ«æ˜¯å¿«é€ŸCtrl + Sä¿å­˜ï¼Œå¯èƒ½ä¼šäº‹ä»¶è¯¯è§¦å‘...</strong></p>
</blockquote>
<p>è§£å†³æ–¹æ¡ˆå¯é€‰ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å¯é€‰ï¼šä½¿ç”¨è½®è¯¢æ¨¡å¼ï¼ˆæ›´ç¨³å®šä½†è€—èµ„æºï¼‰</span>
<span class="hljs-keyword">const</span> watcher = chokidar.<span class="hljs-title function_">watch</span>(<span class="hljs-variable constant_">TARGET_FILE</span>, {
    <span class="hljs-attr">ignoreInitial</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">usePolling</span>: <span class="hljs-literal">true</span>,     <span class="hljs-comment">// å¼ºåˆ¶è½®è¯¢</span>
    <span class="hljs-attr">interval</span>: <span class="hljs-number">500</span>         <span class="hljs-comment">// æ¯ 500ms æ£€æŸ¥ä¸€æ¬¡</span>
});
</code></pre>
<hr/>
<p><em>é—®é¢˜ 2ï¼šè¿›ç¨‹æ€ä¸å¹²å‡€</em></p>
<p>Linux/Macï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">kill</span> -9 &lt;PID&gt;  <span class="hljs-comment"># ç›´æ¥æ€è¿›ç¨‹</span>
</code></pre>
<p>Windowsï¼š</p>
<pre><code class="hljs language-bash" lang="bash">taskkill /F /T /PID &lt;PID&gt;  <span class="hljs-comment"># éœ€è¦æ€è¿›ç¨‹æ ‘</span>
</code></pre>
<p>ä¸ºä»€ä¹ˆè¦åŠ  <code>/T</code>ï¼Ÿ</p>
<pre><code class="hljs language-markdown" lang="markdown">çˆ¶è¿›ç¨‹ï¼ˆnode nmon.jsï¼‰
  â””â”€ å­è¿›ç¨‹ï¼ˆnode index.jsï¼‰
<span class="hljs-code">       â””â”€ å¯èƒ½è¿˜æœ‰å­™è¿›ç¨‹
</span></code></pre>
<p>ä¸åŠ  <code>/T</code> åªæ€çˆ¶è¿›ç¨‹ï¼Œå­è¿›ç¨‹ä¼šå˜æˆå­¤å„¿è¿›ç¨‹ï¼Œç»§ç»­å ç”¨ç«¯å£ã€‚</p>
<hr/>
<h3 data-id="heading-15">ä¸ºä»€ä¹ˆè¦ä¿å­˜è¿›ç¨‹å®ä¾‹ï¼Ÿ</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">let</span> childProcess = <span class="hljs-literal">null</span>;
</code></pre>
<p><strong>ä½œç”¨ï¼š</strong></p>
<ol>
<li>è·å–è¿›ç¨‹ PIDï¼ˆ<code>childProcess.pid</code>ï¼‰</li>
<li>åœ¨é‡å¯æ—¶æ€æ‰æ—§è¿›ç¨‹</li>
<li>ç›‘å¬è¿›ç¨‹çŠ¶æ€ï¼ˆé€€å‡ºã€é”™è¯¯ï¼‰</li>
</ol>
<p><strong>å¦‚æœä¸ä¿å­˜ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âŒ é”™è¯¯ç¤ºèŒƒ</span>
<span class="hljs-title function_">spawn</span>(<span class="hljs-string">'node'</span>, [<span class="hljs-string">'index.js'</span>]); <span class="hljs-comment">// å¯åŠ¨äº†ï¼Œä½†æ²¡äººè®°ä½å®ƒ</span>

<span class="hljs-comment">// æƒ³é‡å¯æ—¶</span>
<span class="hljs-title function_">spawn</span>(<span class="hljs-string">'taskkill'</span>, [<span class="hljs-string">'/PID'</span>, ???]); <span class="hljs-comment">// ä¸çŸ¥é“ PIDï¼Œæ— æ³•æ€è¿›ç¨‹</span>
</code></pre>
<hr/>
<h2 data-id="heading-16">äº”ã€å®Œæ•´ä»£ç </h2>
<h3 data-id="heading-17">GitHub</h3>
<p>ä»“åº“åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fshuirongshuifu%2Fmynodemon" target="_blank" title="https://github.com/shuirongshuifu/mynodemon" ref="nofollow noopener noreferrer">github.com/shuirongshuâ€¦</a></p>
<h3 data-id="heading-18">nmon.js</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> chokidar <span class="hljs-keyword">from</span> <span class="hljs-string">'chokidar'</span>; <span class="hljs-comment">// ç›‘æ§åŒ…</span>
<span class="hljs-keyword">import</span> { spawn } <span class="hljs-keyword">from</span> <span class="hljs-string">'child_process'</span>; <span class="hljs-comment">// æ´¾å‘ç”Ÿç³»ç»Ÿå‘½ä»¤æ¥åˆ›å»ºå’Œç»ˆæ­¢å­è¿›ç¨‹ï¼Œå®ç°å¯åŠ¨å’Œé‡å¯</span>
<span class="hljs-keyword">import</span> path <span class="hljs-keyword">from</span> <span class="hljs-string">'path'</span>;
<span class="hljs-keyword">import</span> crypto <span class="hljs-keyword">from</span> <span class="hljs-string">'crypto'</span>;
<span class="hljs-keyword">import</span> fs <span class="hljs-keyword">from</span> <span class="hljs-string">'fs'</span>;

<span class="hljs-comment">// ===================== é…ç½®é¡¹ =====================</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">TARGET_FILE</span> = <span class="hljs-string">'index.js'</span>; <span class="hljs-comment">// è¦ç›‘æ§å¹¶è‡ªåŠ¨é‡å¯çš„æ–‡ä»¶</span>
<span class="hljs-comment">// =================================================</span>

<span class="hljs-keyword">const</span> entryPath = path.<span class="hljs-title function_">resolve</span>(process.<span class="hljs-title function_">cwd</span>(), <span class="hljs-variable constant_">TARGET_FILE</span>); <span class="hljs-comment">// è·¯å¾„</span>

<span class="hljs-keyword">let</span> childProcess = <span class="hljs-literal">null</span>; <span class="hljs-comment">// ä¿å­˜ index.js çš„è¿›ç¨‹å®ä¾‹å¯¹è±¡çš„å¼•ç”¨ï¼Œä¾¿äºåç»­æ¸…ç©ºé‡ç½®</span>

<span class="hljs-keyword">let</span> lastHash = <span class="hljs-literal">null</span>; <span class="hljs-comment">// ä¿å­˜ä¸Šæ¬¡çš„ hash</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">getFileHash</span>(<span class="hljs-params">filePath</span>) {
    <span class="hljs-keyword">const</span> content = fs.<span class="hljs-title function_">readFileSync</span>(filePath);
    <span class="hljs-keyword">return</span> crypto.<span class="hljs-title function_">createHash</span>(<span class="hljs-string">'md5'</span>).<span class="hljs-title function_">update</span>(content).<span class="hljs-title function_">digest</span>(<span class="hljs-string">'hex'</span>);
}

<span class="hljs-comment">// å¯åŠ¨æˆ–é‡å¯ index.js</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">startApp</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// å½“å‰æœ‰è¿›ç¨‹ï¼Œå°±æ¸…é™¤æ‰ä»¥åï¼Œå†å¯åŠ¨ï¼ˆé‡å¯åŠŸèƒ½ï¼‰</span>
    <span class="hljs-keyword">if</span> (childProcess) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ğŸ”„ æ­£åœ¨ç»ˆæ­¢æ—§è¿›ç¨‹...'</span>);

        <span class="hljs-comment">// Windows ä¸‹ç”¨ taskkillå‘½ä»¤ å¼ºåˆ¶æ€æ­»è¿›ç¨‹æ ‘ // æ¯”å¦‚ç±»ä¼¼ taskkill /f /t /im nginx.exe</span>
        <span class="hljs-keyword">const</span> killProcess = <span class="hljs-title function_">spawn</span>(<span class="hljs-string">'taskkill'</span>, [<span class="hljs-string">'/F'</span>, <span class="hljs-string">'/T'</span>, <span class="hljs-string">'/PID'</span>, childProcess.<span class="hljs-property">pid</span>]);

        killProcess.<span class="hljs-title function_">on</span>(<span class="hljs-string">'close'</span>, <span class="hljs-function">() =&gt;</span> {
            childProcess = <span class="hljs-literal">null</span>; <span class="hljs-comment">// æ¸…ç©ºè¿›ç¨‹å®ä¾‹å¯¹è±¡çš„å¼•ç”¨</span>
            <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> { <span class="hljs-comment">// ç­‰200æ¯«ç§’è¶³å¤Ÿæ“ä½œç³»ç»Ÿé‡Šæ”¾ç«¯å£äº†</span>
                <span class="hljs-title function_">launchNewProcess</span>();
            }, <span class="hljs-number">200</span>);
        });
        <span class="hljs-keyword">return</span>;
    }
    <span class="hljs-comment">// å½“å‰æ²¡æœ‰è¿›ç¨‹å°±ç›´æ¥å¯åŠ¨å³å¯</span>
    <span class="hljs-title function_">launchNewProcess</span>();
}

<span class="hljs-comment">// å¯åŠ¨æ–°è¿›ç¨‹</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">launchNewProcess</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ğŸš€ æ­£åœ¨å¯åŠ¨æ–°è¿›ç¨‹...\n'</span>);

    <span class="hljs-comment">// ç›¸å½“äºæ‰§è¡Œå‘½ä»¤ï¼šnode C:\Users\xxx\myNodeMon\index.js ç®€åŒ–å°±æ˜¯ node index.js</span>
    childProcess = <span class="hljs-title function_">spawn</span>(<span class="hljs-string">'node'</span>, [entryPath], {
        <span class="hljs-attr">stdio</span>: <span class="hljs-string">'inherit'</span> <span class="hljs-comment">// è®©å­è¿›ç¨‹çš„è¾“å‡ºæ—¥å¿—ï¼Œç›´æ¥æ˜¾ç¤ºåœ¨å½“å‰æ§åˆ¶å°</span>
    });

    <span class="hljs-comment">// æ¯”å¦‚æ–‡ä»¶ä¸å­˜åœ¨æˆ–è€…è·¯å¾„é”™è¯¯ä¼šæŠ¥é”™ï¼Œå…œä¸€ä¸‹</span>
    childProcess.<span class="hljs-title function_">on</span>(<span class="hljs-string">'error'</span>, <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'âŒ å¯åŠ¨å¤±è´¥ï¼š'</span>, err.<span class="hljs-property">message</span>);
    });
}

<span class="hljs-comment">// åˆ›å»ºæ–‡ä»¶ç›‘å¬å™¨â€”â€”ä¸ä½¿ç”¨è½®è¯¢</span>
<span class="hljs-keyword">const</span> watcher = chokidar.<span class="hljs-title function_">watch</span>(<span class="hljs-variable constant_">TARGET_FILE</span>, {
    <span class="hljs-attr">ignoreInitial</span>: <span class="hljs-literal">true</span>  <span class="hljs-comment">// å¿½ç•¥åˆå§‹åŒ–æ—¶çš„äº‹ä»¶</span>
});

<span class="hljs-comment">// // åˆ›å»ºæ–‡ä»¶ç›‘å¬å™¨â€”â€”ä½¿ç”¨è½®è¯¢</span>
<span class="hljs-comment">// const watcher = chokidar.watch(TARGET_FILE, {</span>
<span class="hljs-comment">//     ignoreInitial: true,  // å¿½ç•¥åˆå§‹åŒ–æ—¶çš„äº‹ä»¶</span>
<span class="hljs-comment">//     usePolling: true,     // Windowsä¸‹ç”¨è½®è¯¢æ›´åŠ ç¨³å¦¥ï¼ˆæ¯•ç«Ÿå…¶æ–‡ä»¶ç®¡ç†æ²¡æœ‰Linuxåšå¾—å¥½ï¼‰</span>
<span class="hljs-comment">//     interval: 1000         // æ¯ 100ms æ£€æŸ¥ä¸€æ¬¡æ–‡ä»¶å˜åŒ–</span>
<span class="hljs-comment">// });</span>

watcher.<span class="hljs-title function_">on</span>(<span class="hljs-string">'change'</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> currentHash = <span class="hljs-title function_">getFileHash</span>(<span class="hljs-variable constant_">TARGET_FILE</span>);
    
    <span class="hljs-keyword">if</span> (currentHash !== lastHash) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ğŸ“ æ£€æµ‹åˆ°å†…å®¹çœŸçš„å˜äº†'</span>);
        lastHash = currentHash;
        <span class="hljs-title function_">startApp</span>();
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'â­ï¸ å†…å®¹æ²¡å˜ï¼Œå¿½ç•¥'</span>);
    }
});

<span class="hljs-comment">// åˆå§‹åŒ–æ—¶è®¡ç®—ä¸€æ¬¡</span>
lastHash = <span class="hljs-title function_">getFileHash</span>(<span class="hljs-variable constant_">TARGET_FILE</span>);

<span class="hljs-comment">// å¯åŠ¨ç›‘æ§</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`ğŸš€ Windows ç›‘æ§å·¥å…·å·²å¯åŠ¨`</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`ğŸ¯ ç›‘æ§ç›®æ ‡ï¼š<span class="hljs-subst">${TARGET_FILE}</span>\n`</span>);
<span class="hljs-title function_">startApp</span>();

<span class="hljs-comment">// Ctrl+C é€€å‡ºæ—¶æ¸…ç†è¿›ç¨‹</span>
process.<span class="hljs-title function_">on</span>(<span class="hljs-string">'SIGINT'</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">if</span> (childProcess) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'\nğŸ›‘ æ­£åœ¨æ¸…ç†å­è¿›ç¨‹...'</span>);
        <span class="hljs-title function_">spawn</span>(<span class="hljs-string">'taskkill'</span>, [<span class="hljs-string">'/F'</span>, <span class="hljs-string">'/T'</span>, <span class="hljs-string">'/PID'</span>, childProcess.<span class="hljs-property">pid</span>]);
        childProcess = <span class="hljs-literal">null</span>;
    }
    watcher.<span class="hljs-title function_">close</span>();
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ğŸ‘‹ ç›‘æ§å·¥å…·å·²é€€å‡º'</span>);
    process.<span class="hljs-title function_">exit</span>(<span class="hljs-number">0</span>);
});
</code></pre>
<hr/>
<h2 data-id="heading-19">å…­ã€æ€»ç»“</h2>
<h3 data-id="heading-20">å­¦åˆ°äº†ä»€ä¹ˆï¼Ÿ</h3>
<ul>
<li>é€šä¿—æ˜“æ‡‚ç†è§£ä¸€äº›åŸºç¡€æ¦‚å¿µ</li>
<li>chokidar çš„ä½¿ç”¨</li>
<li>Windows ä¸‹æ–‡ä»¶ç³»ç»Ÿè¿˜æ˜¯å·®ç‚¹æ„æ€ï¼ˆç¨³å®šæ€§é—®é¢˜ï¼‰</li>
<li><code>spawn()</code> å¯åŠ¨å­è¿›ç¨‹</li>
<li><code>taskkill</code> æ€æ­»è¿›ç¨‹æ ‘</li>
<li>é€šè¿‡æ–‡ä»¶hashç²¾ç¡®åˆ¤æ–­æ–‡ä»¶å†…å®¹æ˜¯å¦å˜åŒ–</li>
<li>ä¿¡å·å¤„ç†ï¼ˆ<code>SIGINT</code>ï¼‰</li>
</ul>
<hr/>
<h3 data-id="heading-21">ä¸ nodemon çš„å¯¹æ¯”</h3>













































<table><thead><tr><th>ç‰¹æ€§</th><th>æˆ‘ä»¬çš„å·¥å…·</th><th>nodemon</th></tr></thead><tbody><tr><td>æ–‡ä»¶ç›‘å¬</td><td>âœ…</td><td>âœ…</td></tr><tr><td>è‡ªåŠ¨é‡å¯</td><td>âœ…</td><td>âœ…</td></tr><tr><td>Hash å¯¹æ¯”</td><td>âœ…</td><td>âŒ</td></tr><tr><td>é…ç½®æ–‡ä»¶</td><td>âŒ</td><td>âœ…</td></tr><tr><td>è·¨å¹³å°</td><td>âŒï¼ˆä»… Windowsï¼‰</td><td>âœ…</td></tr><tr><td>æ—¥å¿—è®°å½•</td><td>âŒ</td><td>âœ…</td></tr><tr><td>ä»£ç é‡</td><td>~100 è¡Œ</td><td>~5000 è¡Œ</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-22">ä¸ƒã€æ‹“å±•æ€è€ƒ</h2>
<h3 data-id="heading-23">ğŸ¤” å¦‚ä½•ç›‘å¬å¤šä¸ªæ–‡ä»¶ï¼Ÿ</h3>
<p><strong>æç¤ºï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">TARGET_FILES</span> = [<span class="hljs-string">'index.js'</span>, <span class="hljs-string">'config.js'</span>];
<span class="hljs-keyword">const</span> watcher = chokidar.<span class="hljs-title function_">watch</span>(<span class="hljs-variable constant_">TARGET_FILES</span>, { ... });

<span class="hljs-comment">// éœ€è¦ä¸ºæ¯ä¸ªæ–‡ä»¶ä¿å­˜ Hash</span>
<span class="hljs-keyword">const</span> fileHashes = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();
</code></pre>
<hr/>
<h3 data-id="heading-24">ğŸ¤” å¦‚ä½•æ·»åŠ æ—¥å¿—è¾“å‡ºï¼Ÿ</h3>
<p><strong>æç¤ºï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> fs <span class="hljs-keyword">from</span> <span class="hljs-string">'fs'</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">log</span>(<span class="hljs-params">message</span>) {
    <span class="hljs-keyword">const</span> timestamp = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">toISOString</span>();
    <span class="hljs-keyword">const</span> logMessage = <span class="hljs-string">`[<span class="hljs-subst">${timestamp}</span>] <span class="hljs-subst">${message}</span>\n`</span>;
    fs.<span class="hljs-title function_">appendFileSync</span>(<span class="hljs-string">'nmon.log'</span>, logMessage);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(message);
}
</code></pre>
<hr/>
<h3 data-id="heading-25">ğŸ¤” å¦‚ä½•æ”¯æŒé…ç½®æ–‡ä»¶ï¼Ÿ</h3>
<p><strong>æç¤ºï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// nmon.config.json</span>
{
  <span class="hljs-string">"target"</span>: <span class="hljs-string">"index.js"</span>,
  <span class="hljs-string">"port"</span>: <span class="hljs-number">6666</span>,
  <span class="hljs-string">"delay"</span>: <span class="hljs-number">200</span>
}

<span class="hljs-comment">// è¯»å–é…ç½®</span>
<span class="hljs-keyword">const</span> config = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(fs.<span class="hljs-title function_">readFileSync</span>(<span class="hljs-string">'nmon.config.json'</span>, <span class="hljs-string">'utf8'</span>));
</code></pre>
<hr/>
<h3 data-id="heading-26">ğŸ¤” å¦‚ä½•å®ç°çƒ­é‡è½½ï¼ˆä¸é‡å¯è¿›ç¨‹ï¼‰ï¼Ÿ</h3>
<p><strong>æç¤ºï¼š</strong></p>
<ul>
<li>ä½¿ç”¨ <code>vm</code> æ¨¡å—åŠ¨æ€åŠ è½½ä»£ç </li>
<li>æˆ–è€…ä½¿ç”¨ WebSocket é€šçŸ¥æµè§ˆå™¨åˆ·æ–°</li>
</ul>
<hr/>
<h2 data-id="heading-27">å…«ã€å‚è€ƒèµ„æ–™</h2>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fpaulmillr%2Fchokidar" target="_blank" title="https://github.com/paulmillr/chokidar" ref="nofollow noopener noreferrer">chokidar å®˜æ–¹æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fnodejs.org%2Fapi%2Fchild_process.html" target="_blank" title="https://nodejs.org/api/child_process.html" ref="nofollow noopener noreferrer">Node.js child_process æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fnodejs.org%2Fapi%2Fcrypto.html" target="_blank" title="https://nodejs.org/api/crypto.html" ref="nofollow noopener noreferrer">Node.js crypto æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Flearn.microsoft.com%2Fzh-cn%2Fwindows-server%2Fadministration%2Fwindows-commands%2Ftaskkill" target="_blank" title="https://learn.microsoft.com/zh-cn/windows-server/administration/windows-commands/taskkill" ref="nofollow noopener noreferrer">Windows taskkill å‘½ä»¤</a></li>
</ul>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¼˜é›…åœ°æ§åˆ¶Pythonå¾ªç¯ï¼šbreakä¸continueçš„æœ€ä½³å®è·µåŠåº•å±‚é€»è¾‘]]></title>    <link>https://juejin.cn/post/7593252939708497956</link>    <guid>https://juejin.cn/post/7593252939708497956</guid>    <pubDate>2026-01-10T15:38:12.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7593252939708497956" data-draft-id="7593198957985169449" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¼˜é›…åœ°æ§åˆ¶Pythonå¾ªç¯ï¼šbreakä¸continueçš„æœ€ä½³å®è·µåŠåº•å±‚é€»è¾‘"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-10T15:38:12.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="love_summer"/> <meta itemprop="url" content="https://juejin.cn/user/1462819851084228"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¼˜é›…åœ°æ§åˆ¶Pythonå¾ªç¯ï¼šbreakä¸continueçš„æœ€ä½³å®è·µåŠåº•å±‚é€»è¾‘
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1462819851084228/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    love_summer
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-10T15:38:12.000Z" title="Sat Jan 10 2026 15:38:12 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:18px;overflow-x:hidden;color:#333}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin-top:40px;margin-bottom:20px;color:#007fff;display:flex;align-items:center}.markdown-body h1:hover:before,.markdown-body h2:hover:before,.markdown-body h3:hover:before,.markdown-body h4:hover:before,.markdown-body h5:hover:before,.markdown-body h6:hover:before{transition:All .4s ease-in-out;transform:rotate(1turn)}.markdown-body h1{font-size:30px;background:linear-gradient(#fff 60%,#c6e3ff 0)}.markdown-body h1:before{content:"";display:inline-block;width:32px;height:32px;margin-right:10px;background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC");background-size:100% 100%}.markdown-body h2{font-size:24px;background:linear-gradient(#fff 60%,#cce3fb 0)}.markdown-body h2:before{content:"";display:inline-block;width:24px;height:24px;margin-right:10px;background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC");background-size:100% 100%}.markdown-body h3{font-size:20px}.markdown-body h3:before{content:"";display:inline-block;width:18px;height:18px;margin-right:10px;background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC");background-size:100% 100%}.markdown-body h4{font-size:18px}.markdown-body h4:before{content:"";display:inline-block;width:16px;height:16px;margin-right:10px;background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC");background-size:100% 100%}.markdown-body h5{font-size:16px}.markdown-body h5:before{content:"";display:inline-block;width:15px;height:15px;margin-right:10px;background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC");background-size:100% 100%}.markdown-body h6{font-size:14px}.markdown-body h6:before{content:"";display:inline-block;width:12px;height:12px;margin-right:10px;background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC");background-size:100% 100%}.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{border-bottom:2px solid #007fff;color:#007fff;padding-right:10px}.markdown-body p{letter-spacing:1px;line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{display:block;max-width:100%;margin:10px auto}.markdown-body hr{border:none;border-top:1px dashed #92c8ff}.markdown-body hr:before{content:"âœ‚";display:inline-block;position:relative;top:-12px;left:40px;padding:0 3px;color:#007fff;font-size:18px}.markdown-body hr:after{content:"æŒ‰è™šçº¿å‰ªå¼€";position:relative;top:-15px;left:84%;padding:0 3px;color:#007fff;font-size:12px}.markdown-body del{color:#f44}.markdown-body em{color:#007fff;margin:0 2px}.markdown-body strong{color:#007fff;font-weight:bolder}.markdown-body code{word-break:break-word;border-radius:4px;overflow-x:auto;background-color:#e6f3ff;color:#007fff;font-weight:600;font-size:16px;padding:.065em .4em;border:1px solid #007fff}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:5px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px}.markdown-body pre&gt;code{font-size:18px;font-weight:400;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8;border:none}.markdown-body a{text-decoration:none;color:#007fff;border-bottom:1px solid #007fff}.markdown-body a:before{content:"Â¶";margin-right:5px;font-size:22px}.markdown-body a:after{content:"â†·";margin-left:2px;font-size:22px;display:none}.markdown-body a:active,.markdown-body a:hover{color:#275b8c;border-bottom:1px solid #275b8c}.markdown-body a:active:after,.markdown-body a:hover:after{display:inline-block}.markdown-body table{display:inline-block!important;font-size:16px;width:auto;max-width:100%;overflow:auto;border:1px solid #a5d3ff}.markdown-body thead{background:#c6e3ff;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#eef7ff}.markdown-body tbody&gt;tr:nth-child(odd){background-color:#f8fcff}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #007fff;background-color:#eef7ff}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#007fff}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="srcery">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#1c1b19;color:#fce8c3}.hljs-emphasis,.hljs-strong{color:#918175}.hljs-bullet,.hljs-link,.hljs-literal,.hljs-number,.hljs-quote,.hljs-regexp{color:#ff5c8f}.hljs-code,.hljs-selector-class{color:#68a8e4}.hljs-emphasis{font-style:italic}.hljs-attribute,.hljs-keyword,.hljs-section,.hljs-selector-tag,.hljs-variable{color:#ef2f27}.hljs-name,.hljs-title{color:#fbb829}.hljs-params,.hljs-type{color:#0aaeb3}.hljs-string{color:#98bc37}.hljs-addition,.hljs-built_in,.hljs-builtin-name,.hljs-selector-attr,.hljs-selector-id,.hljs-selector-pseudo,.hljs-subst,.hljs-symbol,.hljs-template-tag,.hljs-template-variable{color:#c07abe}.hljs-comment,.hljs-deletion,.hljs-meta{color:#918175}</style><blockquote>
<p><strong>ã€å¼•è¨€ã€‘</strong><br/>
åœ¨ç¼–å†™å¾ªç¯é€»è¾‘æ—¶ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦æ ¹æ®ç‰¹å®šæ¡ä»¶æ”¹å˜ç¨‹åºçš„æ‰§è¡Œæµã€‚Pythonæä¾›äº†<code>break</code>å’Œ<code>continue</code>ä¸¤ä¸ªå…³é”®å­—æ¥èµ‹äºˆå¾ªç¯â€œåˆ¤æ–­åŠ›â€ã€‚è™½ç„¶å®ƒä»¬éƒ½æ˜¯æ§åˆ¶æµè¯­å¥ï¼Œä½†åœ¨åº•å±‚é€»è¾‘å’Œé€‚ç”¨åœºæ™¯ä¸Šæœ‰ç€æœ¬è´¨çš„åŒºåˆ«ã€‚æœ¬æ–‡ç»“åˆå®é™…æ¡ˆä¾‹ï¼ˆå‚è€ƒPythonåŸºç¡€æ•™ç¨‹4.3ï¼‰ï¼Œæ·±å…¥å‰–æäºŒè€…çš„å·®å¼‚åŠæœ€ä½³å®è·µã€‚</p>
</blockquote>
<h4 data-id="heading-0">ä¸€ã€breakï¼šç ´åè€…æ¨¡å¼</h4>
<p><code>break</code>æ˜¯æœ€å¸¸è§çš„å¾ªç¯æ§åˆ¶è¯­å¥ã€‚å½“Pythonè§£é‡Šå™¨åœ¨å¾ªç¯ä½“ä¸­é‡åˆ°<code>break</code>æ—¶ï¼Œä¼šç«‹å³ç»ˆæ­¢å½“å‰çš„å¾ªç¯å±‚ï¼Œå¹¶å°†æ‰§è¡Œæƒäº¤ç»™å¾ªç¯ä¹‹åçš„ä»£ç ã€‚</p>
<p><strong>1. æ ¸å¿ƒåœºæ™¯ï¼šæŸ¥æ‰¾ä¸é€€å‡º</strong></p>
<p><code>break</code>æœ€å¸¸è§çš„ç”¨æ³•æ˜¯â€œæœç´¢æ¨¡å¼â€ã€‚ä¸€æ—¦æ»¡è¶³ç›®æ ‡ï¼Œç«‹å³åœæ­¢æœç´¢ï¼Œè¿™åœ¨æ€§èƒ½ä¸Šè‡³å…³é‡è¦ã€‚</p>
<ul>
<li><strong>åœºæ™¯Aï¼šç´¯åŠ æº¢å‡ºç›‘æµ‹</strong></li>
</ul>
<p>åœ¨è®¡ç®—ç´¯åŠ å’Œæ—¶ï¼Œå¦‚æœè¶…è¿‡æŸä¸ªé˜ˆå€¼ï¼ˆæ¯”å¦‚20ï¼‰ï¼Œåº”è¯¥ç«‹å³åœæ­¢è®¡ç®—ï¼Œé˜²æ­¢æº¢å‡ºæˆ–æµªè´¹èµ„æºã€‚</p>
<pre><code class="hljs language-python" lang="python">```python
s = <span class="hljs-number">0</span>
i = <span class="hljs-number">1</span>
<span class="hljs-keyword">while</span> i &lt; <span class="hljs-number">11</span>:
    s += i
    <span class="hljs-keyword">if</span> s &gt; <span class="hljs-number">20</span>:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f'ç´¯åŠ å’Œå¤§äº20çš„å½“å‰æ•°<span class="hljs-subst">{i}</span>'</span>)
        <span class="hljs-keyword">break</span>  <span class="hljs-comment"># è¾¾åˆ°é˜ˆå€¼ï¼Œç«‹å³é€€å‡º</span>
    i += <span class="hljs-number">1</span>
```
</code></pre>
<ul>
<li><strong>åœºæ™¯Bï¼šç™»å½•éªŒè¯ä¸èµ„æºé‡Šæ”¾</strong></li>
</ul>
<p>åœ¨ç”¨æˆ·è®¤è¯é€»è¾‘ä¸­ï¼Œä¸€æ—¦éªŒè¯é€šè¿‡ï¼ˆ<code>user_name == 'ysj' and pwd == '888888'</code>ï¼‰ï¼Œå°±åº”è¯¥ä½¿ç”¨<code>break</code>è·³å‡ºå¾ªç¯ï¼Œé¿å…æ— æ•ˆçš„è¿­ä»£å°è¯•ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/28fe9f3fd0f24f9996ae21b79d89b76c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbG92ZV9zdW1tZXI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768664292&amp;x-signature=tHcfv57Jf8E%2BV10oARUURFbqq4o%3D" alt="image.png" loading="lazy"/>
<strong>2. ä¸<code>for...else</code>çš„è”åŠ¨ï¼ˆé‡è¦ï¼‰</strong></p>
<p>å¾ˆå¤šå¼€å‘è€…å®¹æ˜“å¿½ç•¥ä¸€ç‚¹ï¼š<code>break</code>ä¼šé˜»æ­¢<code>else</code>è¯­å¥å—çš„æ‰§è¡Œã€‚<code>else</code>å—åªæœ‰åœ¨å¾ªç¯æ­£å¸¸éå†ç»“æŸæ—¶æ‰ä¼šæ‰§è¡Œã€‚å¦‚æœå¾ªç¯æ˜¯è¢«<code>break</code>ç»ˆæ­¢çš„ï¼Œ<code>else</code>å—å°†è¢«è·³è¿‡ã€‚è¿™å¯¹äºåˆ¤æ–­â€œå¾ªç¯æ˜¯å¦è¢«å¼ºåˆ¶ä¸­æ–­â€éå¸¸æœ‰ç”¨ã€‚</p>
<h4 data-id="heading-1">äºŒã€continueï¼šè¿­ä»£å™¨æ¨¡å¼</h4>
<p><code>continue</code>å¹¶ä¸æ˜¯ç»ˆæ­¢å¾ªç¯ï¼Œè€Œæ˜¯è·³è¿‡å½“å‰è¿­ä»£çš„å‰©ä½™éƒ¨åˆ†ã€‚å®ƒçš„ä½œç”¨æ˜¯å°†æ§åˆ¶æƒç›´æ¥å¸¦å›å¾ªç¯çš„å¼€å¤´ï¼Œè¿›è¡Œä¸‹ä¸€æ¬¡æ¡ä»¶åˆ¤æ–­æˆ–å–ä¸‹ä¸€ä¸ªå…ƒç´ ã€‚</p>
<p><strong>1. æ ¸å¿ƒåœºæ™¯ï¼šæ¡ä»¶è¿‡æ»¤</strong></p>
<p><code>continue</code>éå¸¸é€‚åˆç”¨äºâ€œè¿‡æ»¤å™¨â€æ¨¡å¼ã€‚æˆ‘ä»¬éœ€è¦éå†ä¸€å †æ•°æ®ï¼Œä½†åªå¤„ç†ç¬¦åˆæ¡ä»¶çš„ä¸€éƒ¨åˆ†ã€‚</p>
<ul>
<li><strong>å®æˆ˜æ¡ˆä¾‹ï¼šè®¡ç®—å¶æ•°å’Œ</strong></li>
</ul>
<p>ä½¿ç”¨<code>continue</code>æ¥è¿‡æ»¤æ‰å¥‡æ•°ï¼Œæ¯”åœ¨å¾ªç¯ä½“å†…éƒ¨å†™å¤§é‡çš„<code>if...else</code>åµŒå¥—è¦ä¼˜é›…å¾—å¤šã€‚</p>
<pre><code class="hljs language-ini" lang="ini">```python
<span class="hljs-attr">s</span> = <span class="hljs-number">0</span>
for i in range(1, 101):
    if i % <span class="hljs-attr">2</span> == <span class="hljs-number">1</span>:
        continue  <span class="hljs-comment"># è¿‡æ»¤å¥‡æ•°ï¼Œç›´æ¥è¿›å…¥ä¸‹ä¸€æ¬¡è¿­ä»£</span>
    s += i
print('1-100ä¹‹é—´çš„å¶æ•°å’Œ:', s)
```
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a3c75420e3294cf1acc8b13312e2e7c5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbG92ZV9zdW1tZXI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768664292&amp;x-signature=eLxKVm%2BqQmwt%2FmL07ro8owy3LdI%3D" alt="image.png" loading="lazy"/>
<em>å¯¹æ¯”å†™æ³•</em>ï¼šå¦‚æœä¸ä½¿ç”¨<code>continue</code>ï¼Œä½ å¯èƒ½éœ€è¦å†™æˆ<code>if i % 2 == 0: s += i</code>ã€‚è¿™åœ¨é€»è¾‘ä¸Šæ²¡é—®é¢˜ï¼Œä½†å¦‚æœ<code>else</code>å—é‡Œçš„ä»£ç å¾ˆé•¿ï¼Œç¼©è¿›ä¼šå¾ˆæ·±ï¼Œå½±å“å¯è¯»æ€§ã€‚<code>continue</code>èƒ½è®©ä»£ç ä¿æŒâ€œæ‰å¹³åŒ–â€ã€‚</p>
<p><strong>2. whileå¾ªç¯ä¸­çš„é™·é˜±</strong></p>
<p>åœ¨ä½¿ç”¨<code>while</code>é…åˆ<code>continue</code>æ—¶è¦æ ¼å¤–å°å¿ƒã€‚å¦‚æœè·³è¿‡äº†æ”¹å˜å¾ªç¯å˜é‡çš„ä»£ç ï¼ˆå¦‚<code>i += 1</code>ï¼‰ï¼Œå¾ˆå®¹æ˜“å¯¼è‡´<strong>æ­»å¾ªç¯</strong>ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">while</span> i &lt;= <span class="hljs-number">100</span>:
    <span class="hljs-keyword">if</span> i % <span class="hljs-number">2</span> == <span class="hljs-number">1</span>:
        i += <span class="hljs-number">1</span>  <span class="hljs-comment"># å¿…é¡»åœ¨continueä¹‹å‰æ”¹å˜å˜é‡ï¼</span>
        <span class="hljs-keyword">continue</span>
    s += i
    i += <span class="hljs-number">1</span>
</code></pre>
<h4 data-id="heading-2">ä¸‰ã€æ€»ç»“ä¸å»ºè®®</h4>




















<table><thead><tr><th align="left">ç‰¹æ€§</th><th align="left"><code>break</code></th><th align="left"><code>continue</code></th></tr></thead><tbody><tr><td align="left"><strong>ç›®æ ‡</strong></td><td align="left">é€€å‡ºæ•´ä¸ªå¾ªç¯</td><td align="left">è·³è¿‡æœ¬æ¬¡å¾ªç¯</td></tr><tr><td align="left"><strong>æ€§èƒ½</strong></td><td align="left">é¿å…æ— æ•ˆè®¡ç®—ï¼Œæå‡æ€§èƒ½</td><td align="left">è¿‡æ»¤æ— æ•ˆæ•°æ®ï¼Œä¿æŒä»£ç æ•´æ´</td></tr></tbody></table>
<p><strong>æœ€ä½³å®è·µå»ºè®®</strong>ï¼š</p>
<ol>
<li>ä¼˜å…ˆä½¿ç”¨ <code>for</code> å¾ªç¯æ¥éå†é›†åˆï¼Œå¹¶åœ¨å…¶ä¸­ä½¿ç”¨ <code>continue</code> è¿›è¡Œè¿‡æ»¤ã€‚</li>
<li>åœ¨ <code>while</code> å¾ªç¯ä¸­å¤„ç†çŠ¶æ€æœºï¼ˆå¦‚ç™»å½•ã€Socketé€šä¿¡ï¼‰æ—¶ï¼Œä½¿ç”¨ <code>break</code> å¤„ç†â€œæˆåŠŸ/å¤±è´¥â€çš„é€€å‡ºé€»è¾‘ã€‚</li>
<li>æ°¸è¿œä¸è¦åœ¨ <code>while</code> å¾ªç¯ä¸­å¿˜è®°åœ¨ <code>continue</code> å‰æ›´æ–°å¾ªç¯å˜é‡ã€‚
æŒæ¡è¿™ä¸¤ä¸ªè¯­å¥ï¼Œä½ å°±èƒ½å†™å‡ºæ›´é«˜æ•ˆã€æ›´Pythonicçš„å¾ªç¯ä»£ç ã€‚</li>
</ol>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€å‰ç«¯æ€§èƒ½ä¼˜åŒ–ã€‘æŒ‡æ ‡ç¯‡ï¼šå¡é¡¿ç‡â€”â€”å¦‚ä½•å»å®šä¹‰ä½ çš„é¡µé¢å¡ä¸å¡]]></title>    <link>https://juejin.cn/post/7593262196844134452</link>    <guid>https://juejin.cn/post/7593262196844134452</guid>    <pubDate>2026-01-10T10:32:25.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7593262196844134452" data-draft-id="7593258683750301730" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€å‰ç«¯æ€§èƒ½ä¼˜åŒ–ã€‘æŒ‡æ ‡ç¯‡ï¼šå¡é¡¿ç‡â€”â€”å¦‚ä½•å»å®šä¹‰ä½ çš„é¡µé¢å¡ä¸å¡"/> <meta itemprop="keywords" content="æ€§èƒ½ä¼˜åŒ–"/> <meta itemprop="datePublished" content="2026-01-10T10:32:25.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸Šè¯¾æ‘¸é±¼çš„å–µé…±"/> <meta itemprop="url" content="https://juejin.cn/user/4253359486547133"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€å‰ç«¯æ€§èƒ½ä¼˜åŒ–ã€‘æŒ‡æ ‡ç¯‡ï¼šå¡é¡¿ç‡â€”â€”å¦‚ä½•å»å®šä¹‰ä½ çš„é¡µé¢å¡ä¸å¡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4253359486547133/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸Šè¯¾æ‘¸é±¼çš„å–µé…±
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-10T10:32:25.000Z" title="Sat Jan 10 2026 10:32:25 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ€è¿‘æœ‰å¤§é‡ç”¨æˆ·åé¦ˆï¼Œä½¿ç”¨æˆ‘ä»¬çš„å¹³å°å®åœ¨æ˜¯å¤ªå¡äº†ã€‚æ‰€ä»¥äºæ˜¯æ€»ç›‘å¤§æ‰‹ä¸€æŒ¥ï¼Œâ€œå’±ä»¬è¿™ä¸ªQå¿…é¡»å¾—åšæ€§èƒ½ä¼˜åŒ–ï¼Œå¦‚æœç”¨æˆ·ç”¨å’±ä»¬çš„å¹³å°éƒ½å¡ã€ç”¨æˆ·æ€ä¹ˆå¯èƒ½ä¹æ„æ¥æ¶ˆè´¹å‘¢ï¼Ÿâ€</p>
<p>æˆ‘å¤§å£°åé©³â€œç”¨æˆ·ç”¨èµ·æ¥å¡æ˜¯å› ä¸ºç”¨æˆ·çš„ç”µè„‘å¤ªå·®äº†ï¼Œæ¢å°æ€§èƒ½å¥½ç‚¹çš„ç”µè„‘å°±ä¸å¡äº†â€</p>
<p align="right">â€”â€”â€”ä»¥ä¸Šæ˜¯æˆ‘çš„å¹»æƒ³</p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7c836af00976491e9288dc48407d5686~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiK6K--5pG46bG855qE5Za16YWx:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768645944&amp;x-signature=VhW21Bohpcgyf0LwUtiTAFNbd1A%3D" alt="1.jpeg" loading="lazy"/></p>
<p>äºæ˜¯ä¹åœ¨ç»„é‡Œå¤§ä½¬çš„å¸¦é¢†ä¸‹ã€å­å“§å­å“§æäº†ä¸€ä¸ªQï¼Œå°±æœ‰äº†æ€§èƒ½ä¼˜åŒ–ä¸€ç³»åˆ—çš„æ–‡ç« ï¼›</p>
<p><strong>äº‹å…ˆå£°æ˜ã€ä½œä¸ºä¸€ä¸ªåˆšæ¯•ä¸šä¸€å¹´å¤šçš„å‰ç«¯èœç‹—ã€è¿™ä¸ªä¸œè¥¿è‚¯å®šä¸æ˜¯æˆ‘æå‡ºæ¥çš„ã€è¿™ä¸ªå¾—æ„Ÿè°¢å…¬å¸é‡Œçš„å‰è¾ˆã€åšäº†å®Œå–„çš„ç›‘æ§æœºåˆ¶ï¼Œæ‰“å¥½äº†åŸºç¡€æ¶æ„ï¼›æ‰èƒ½è®©æˆ‘åœ¨å‰ç«¯çš„æµ·æ´‹é‡Œä¸åœæººæ°´åˆæµ®èµ·æ¥ï¼Œç„¶åç»§ç»­æººæ°´ã€‚ã€‚ã€‚ã€‚</strong></p>
<h2 data-id="heading-0">å¦‚ä½•å»å®šä¹‰æ€§èƒ½æŒ‡æ ‡ï¼Ÿ</h2>
<p>é¦–å…ˆã€æˆ‘ä»¬çš„é¡¹ç›®æ˜¯ä¸€ä¸ªæ™®æ™®é€šé€šçš„webç«¯çš„é¡¹ç›®ï¼›é‚£æ€ä¹ˆå»çœ‹ä¸€ä¸ªç½‘é¡µå®ƒçš„æ€§èƒ½å‘¢ï¼Ÿè¯¶è¿™ä¸ªæ—¶å€™è‚¯å®šæœ‰åŒå­¦è¯´äº†ï¼Œè¿™ä¸ªæˆ‘çŸ¥é“lighthouseæ¥ä¸€æ³¢ï¼Œå¸¸ç”¨çš„æ€§èƒ½æŒ‡æ ‡ï¼šFPã€FCPã€CLSç­‰çœ‹ä¸€çœ‹ã€å†çœ‹çœ‹ç™½å±æ—¶é—´å•¥çš„ï¼› åœ¨æ˜é‡‘é‡Œæœå‰ç«¯æ€§èƒ½ä¼˜åŒ–ã€å¤§éƒ¨åˆ†éƒ½æ˜¯è¿™ä¸ªæ–¹å‘çš„å†…å®¹ï¼›</p>
<p>ä¹Ÿä¸èƒ½è¯´è¿™äº›ä¸œè¥¿æ˜¯é”™çš„ã€ä½†æ˜¯æœ‰å‡ ä¸ªé—®é¢˜ï¼š</p>
<ol>
<li>lighthouseåœ¨ä¸åŒæ€§èƒ½çš„ç”µè„‘ä¸Šç»“æœä¸ä¸€æ ·ï¼Œä¸èƒ½å½“ä½œä¸€ä¸ªå¯ä»¥é”šå®šçš„æŒ‡æ ‡ã€‚</li>
<li>ç”¨å¸¸ç”¨çš„æ€§èƒ½æŒ‡æ ‡æ¥ä½œä¸ºæ ‡å‡†ï¼Ÿè¿™ä¹ˆå¤šä¸ªæŒ‡æ ‡æ€ä¹ˆå»å¹³è¡¡è¿™äº›æŒ‡æ ‡å‘¢ï¼Ÿå®šä¸€ä¸ªæ¯”ä¾‹ï¼Ÿè¿˜æ˜¯å°±é€‰å–å‡ ä¸ªï¼Ÿ</li>
<li><strong>å…¶å®æœ€é‡è¦çš„æ˜¯è€æ¿å¯èƒ½ä¸çŸ¥é“ä½ çš„æ€§èƒ½æŒ‡æ ‡æ˜¯ä»€ä¹ˆä¸œè¥¿ï¼Œå¦‚æœ+1æˆ–è€…+2æ˜¯rd/qa/pmå‡ä¸Šå»çš„ï¼Œä½ å¯¹ç€è€æ¿è¯´æˆ‘ä»¬ä½¿ç”¨FCPé¦–æ¬¡å†…å®¹ç»˜åˆ¶æ¥å®šä¹‰æ€§èƒ½ï¼›è€æ¿ï¼šâ€œå•¥ï¼Ÿä½ åœ¨è¯´ä»€ä¹ˆç©æ„ï¼Ÿâ€ å’±æ‰“å·¥äºº åˆ°æœ€åéƒ½æ˜¯ä¸ºäº†æ»¡è¶³é‚£ä¸ªokrå˜›ï¼Œè€æ¿éƒ½ä¸ç†è§£ä½ åœ¨æä»€ä¹ˆä¸œè¥¿ï¼Œè¿™ç»©æ•ˆè¿˜è¦å—ã€‚ã€‚ã€‚</strong></li>
</ol>
<p>æ‰€ä»¥æœ‰æ²¡æœ‰åŠæ³•å»æ•´ä¸€ä¸ªæŒ‡æ ‡ï¼Œæ—¢èƒ½è®©éå‰ç«¯äººå‘˜ç®€å•æ˜“æ‡‚ï¼Œåˆèƒ½æ¯”è¾ƒèƒ½è¡¨è¾¾æ€§èƒ½å‘¢ï¼Ÿ</p>
<p>æœ‰çš„ï¼Œå…„å¼Ÿï¼Œæœ‰çš„ã€‚</p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/efbd06f9424a43608edf53205b55fc5c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiK6K--5pG46bG855qE5Za16YWx:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768645944&amp;x-signature=Fs1ecuL%2BzPagR6DH5sAT%2F5WWQRE%3D" alt="2.jpeg" loading="lazy"/></p>
<h2 data-id="heading-1">å¡é¡¿ç‡</h2>
<h3 data-id="heading-2">ä»€ä¹ˆæ˜¯å¡é¡¿ç‡ï¼Ÿ</h3>
<p>å…ˆæ¥ä¸€æ®µæ–‡ç»‰ç»‰çš„å®šä¹‰ï¼š<strong>å¡é¡¿ç‡</strong>ç”¨äºè¡¡é‡ç”¨æˆ·åœ¨ä½¿ç”¨é¡µé¢è¿‡ç¨‹ä¸­ï¼Œç”»é¢æ— æ³•ä»¥æ­£å¸¸å¸§ç‡æŒç»­æ¸²æŸ“çš„æ—¶é—´å æ¯”ï¼Œæ˜¯ä¸€ä¸ªåæ˜ é¡µé¢<strong>æ•´ä½“æµç•…æ€§ä½“éªŒ</strong>çš„ç™¾åˆ†æ¯”æŒ‡æ ‡ã€‚</p>
<p>ä¸€å¥è¯æ¥æ¦‚æ‹¬å°±æ˜¯ï¼šå¡é¡¿ç‡è¡¨ç¤ºç”¨æˆ·åœ¨å¯æ„ŸçŸ¥ä½¿ç”¨é¡µé¢çš„è¿‡ç¨‹ä¸­ï¼Œæœ‰å¤šå¤§æ¯”ä¾‹çš„æ—¶é—´ç”»é¢å¤„äºâ€œå¡ä½â€çš„çŠ¶æ€ã€‚</p>
<p>è¿™ä¸‹å…¶ä»–å²—ä½çš„åŒå­¦ä¹Ÿèƒ½å¬æ‡‚äº†ï¼Œå°±æ˜¯æˆ‘åœ¨ä½¿ç”¨æŸä¸ªé¡µé¢çš„æ—¶é—´é‡Œï¼Œæœ‰å¤šé•¿æ—¶é—´çš„å æ¯”å¡äº†å˜›ï¼›</p>
<h3 data-id="heading-3">æ€ä¹ˆç»Ÿè®¡å¡é¡¿ç‡ï¼Ÿ</h3>
<h4 data-id="heading-4">å¡é¡¿ç‡çš„ç®€å•åˆ†ç±»</h4>
<p>ç›®å‰å¡é¡¿ç‡åˆ†ä¸ºä¸‰ç§ç±»å‹ï¼š</p>
<ul>
<li>æ—¶é—´å¡é¡¿ç‡ï¼šå¡é¡¿æ—¶é—´ / æ€»è§‚å¯Ÿæ—¶é—´ï¼›
<ul>
<li>å¡é¡¿ç‡ = Long Task æ€»è€—æ—¶ / æ€»æ—¶é•¿</li>
</ul>
</li>
<li>äº¤äº’å¡é¡¿ç‡ï¼šäº¤äº’çš„å¡é¡¿æ¬¡æ•° / äº¤äº’æ€»æ¬¡æ•°ï¼›
<ul>
<li>100 æ¬¡ç‚¹å‡»ï¼Œå…¶ä¸­ 12 æ¬¡å‘ç”Ÿ Long Taskï¼Œå°±è®¤ä¸ºå¡é¡¿ç‡ = 12%</li>
</ul>
</li>
<li>Taskå¡é¡¿ç‡
<ul>
<li>Long Task æ¬¡æ•° / æ€» Task æ¬¡æ•°</li>
</ul>
</li>
</ul>
<p>ç›®å‰æˆ‘ä»¬ä½¿ç”¨çš„æ˜¯æ—¶é—´å¡é¡¿ç‡ã€ä¹Ÿå°±æ˜¯ç¬¬ä¸€ç§ï¼›</p>
<h4 data-id="heading-5">å¡é¡¿æ—¶é—´çš„ä¼˜åŒ–</h4>
<p>W3C æ ‡å‡†é‡Œæå‡ºï¼Œä»»ä½•åœ¨ä¸»çº¿ç¨‹ä¸Šæ‰§è¡Œæ—¶é—´è¶…è¿‡ <strong>50 æ¯«ç§’ (ms)</strong> çš„ä»»åŠ¡éƒ½è¢«å®šä¹‰ä¸º Long Taskã€‚
ä¹Ÿå°±æ˜¯è¯´ï¼šå•æ¬¡ task &gt; 50ms å°±ç®—é•¿ä»»åŠ¡ï¼Œå°±åº”è¯¥ç®—å…¥å¡é¡¿æ—¶é—´ã€‚</p>
<p>å¯¹å—ï¼Ÿï¼Ÿï¼Ÿ</p>
<p>ä»å‰ç«¯çš„è§’åº¦æ¥çœ‹ï¼Œå¯¹çš„å¯¹çš„ã€‚ä½†æ˜¯ä»ç”¨æˆ·çš„æ„Ÿå—æ¥çœ‹ï¼Œå¡50msï¼Œå¥½åƒä¹Ÿæ„Ÿè§‰ä¸å‡ºæ¥ï¼Ÿ</p>
<p>ç°åœ¨å±å¹•çš„ç†æƒ³åˆ·æ–°ç‡ä¸€èˆ¬æ˜¯60å¸§æ¯ç§’ï¼Œ1000/60=16.7msï¼› 50/16.7çº¦ç­‰äº3å¸§ï¼›äºæ˜¯æˆ‘ä»¬åŠ ä¸Šäº†ä¸€ä¸ªå‰ææ¡ä»¶ï¼šè¿ç»­ä¸‰å¸§éƒ½æœ‰é•¿ä»»åŠ¡å¹¶ä¸”è¢«å®Œå…¨é˜»å¡ï¼Œæ‰ä¼šç®—åšå¡é¡¿ã€‚</p>
<p>ï¼ˆä¸€å¸§èƒ½ç”¨ï¼Œä¸¤å¸§æµç•…ï¼Œä¸‰å¸§ç”µç«ã€‚ã€‚ã€‚ã€‚ï¼‰</p>
<p><strong>æ³¨æ„ç‚¹ï¼š</strong>  è¿™é‡Œçš„æœ‰é•¿ä»»åŠ¡ä¸æ˜¯è¯´æˆ‘åªè¦ç¢°åˆ°0.1mséƒ½ç®—ï¼Œè€Œæ˜¯å®Œå…¨å æ»¡æ‰ç®—ï¼›</p>
<p>todoï¼šè¡¥ä¸€å¼ å›¾ï¼Œæ‹¿nano bananaè·‘äº†å‡ æ¬¡å‡ºæ¥çš„å›¾éƒ½ä¸å¯ç”¨ï¼Œè¿˜å¾—è‡ªå·±ç”»ã€‚ã€‚ å¤§æ¦‚é•¿è¿™æ ·ï¼š</p>
<p>Frame 0: [0 ----- 16.7] ï¼ˆmsï¼‰</p>
<p>Frame 1: [16.7 -- 33.4]</p>
<p>Frame 2: [33.4 -- 50.1]</p>
<p>Frame 3: [50.1 -- 66.8]</p>
<p>Long Task [10ms ------------------------- 61ms] é•¿ä»»åŠ¡è€—æ—¶51msï¼Œå¯èƒ½ä»frame0çš„ä¸­é—´å¼€å§‹ï¼Œfrmae3çš„ä¸­é—´ç»“æŸ</p>
<p><strong>å› ä¸ºæˆ‘ä»¬éƒ¨åˆ†å ç”¨å¹¶ä¸ä»£è¡¨ç€ä¼šå½±å“å¸§æ¸²æŸ“ï¼Œå½“ç„¶ä¹Ÿä¸ä¸€å®šèƒ½ä¿è¯è¯´å‰©ä¸‹çš„æ—¶é—´å°±ä¸€å®šå¤Ÿæ¸²æŸ“ï¼›æ¯”å¦‚å ç”¨6msï¼Œå‰©ä¸‹çš„10msä¸èƒ½ç¡®å®šèƒ½ä¸èƒ½å®Œæˆæ¸²æŸ“ï¼›ç›®å‰ä¹Ÿæ²¡æœ‰åŠæ³•å»ç»Ÿè®¡æ˜¯éå®Œæˆæ¸²æŸ“ï¼Œæ‰€ä»¥æˆ‘ä»¬åªç»Ÿè®¡ä¸€å®šè¢«å æ»¡çš„å¸§ï¼Œå»å‡å°‘å™ªéŸ³ï¼›</strong></p>





















<table><thead><tr><th>æƒ…å†µ</th><th>æ¸²æŸ“ç»Ÿè®¡</th></tr></thead><tbody><tr><td>å¸§å®Œå…¨è½åœ¨ Long Task å†…</td><td>100% æ— æ³•æ¸²æŸ“</td></tr><tr><td><strong>å¸§éƒ¨åˆ†è½åœ¨ Long Task å†…</strong></td><td><strong>ä¸ç¡®å®šï¼Œå¿½ç•¥ä¸è®¡</strong></td></tr><tr><td>å¸§æœªè½åœ¨ Long Task å†…</td><td>ä¸å½±å“</td></tr></tbody></table>
<h4 data-id="heading-6">æ€»è§‚å¯Ÿæ—¶é—´</h4>
<p>ä¸ºä»€ä¹ˆå«åšæ€»è§‚å¯Ÿæ—¶é—´è€Œä¸æ˜¯æ€»æ—¶é—´ï¼Œè¿™ä¸ªä¹Ÿå¥½ç†è§£ï¼›</p>
<p>å¦‚æœé¡µé¢å¤„äºå‰å°ã€ç”¨æˆ·æ“ä½œï¼Œé‚£å¿…é¡»å¾—è®°å½•ï¼›</p>
<p>å¦‚æœç”¨æˆ·å¤±ç„¦äº†ã€ç‚¹åˆ°äº†åˆ«çš„æ ‡ç­¾ï¼Œè¿™é‡Œåå°å¯èƒ½ä¼šå¼€å§‹æ‰§è¡Œä¸€äº›åŠ¨ä½œæ¯”å¦‚ä¸ŠæŠ¥åŸ‹ç‚¹æ•°æ®ã€è¿™ä¸ªæ—¶å€™å› ä¸ºç”¨æˆ·çœ‹ä¸åˆ°ï¼Œæ‰€ä»¥å°±ç®—å‘ç”Ÿäº†é•¿ä»»åŠ¡ä¹Ÿä¸è®¡å…¥ï¼›</p>
<p>åˆæˆ–è€…æ˜¯è¿›å…¥äº†ä¸‹ä¸€ä¸ªç•Œé¢ï¼Œå½“å‰ç•Œé¢å†»ç»“äº†ï¼Œè¿‡äº†ä¸€ä¼šç‚¹äº†å›é€€ï¼›ä¸­é—´è¿™æ®µæ—¶é—´å°±å¾—æ’é™¤ï¼Œå› ä¸ºå®é™…ä¸Šåœ¨è¿™æ®µæ—¶é—´é‡Œï¼Œæ²¡æœ‰åšä»»ä½•çš„äº¤äº’ï¼Œä¸åšæ’é™¤ä¼šå¯¼è‡´åˆ†æ¯å˜å¤§ï¼Œæ•°æ®å¤±çœŸï¼›</p>
<h2 data-id="heading-7">ä¼ªä»£ç éƒ¨åˆ†</h2>
<p>é‚£ä¹ˆå…¶å®æˆ‘ä»¬è¦åšçš„å°±å¾ˆæ˜æ˜¾äº†ï¼š</p>
<p>å¡é¡¿ç‡ = é¡µé¢å¤„äºå‰å°ã€ç”¨æˆ·å¯æ„ŸçŸ¥æœŸé—´ï¼Œç”»é¢è¢«è¿ç»­ â‰¥3 å¸§é˜»å¡çš„æ—¶é—´ / å¯æ„ŸçŸ¥æ€»æ—¶é—´</p>
<h4 data-id="heading-8">æ ¸å¿ƒå¸¸é‡ &amp; çŠ¶æ€</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">FRAME_TIME</span> = <span class="hljs-number">16.7</span>;           <span class="hljs-comment">// ä¸€å¸§æ—¶é—´</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">STALL_FRAMES</span> = <span class="hljs-number">3</span>;            <span class="hljs-comment">// è¿ç»­ä¸‰å¸§ç®—å¡é¡¿</span>

<span class="hljs-keyword">let</span> longTasks = [];

<span class="hljs-comment">// ç»Ÿè®¡é¡µé¢çš„å¯æ„ŸçŸ¥æ—¶é—´</span>
<span class="hljs-keyword">let</span> observing = <span class="hljs-literal">true</span>;
<span class="hljs-keyword">let</span> lastActiveTime = performance.<span class="hljs-title function_">now</span>();
<span class="hljs-keyword">let</span> activeTime = <span class="hljs-number">0</span>;

<span class="hljs-comment">// å¡é¡¿æ—¶é—´</span>
<span class="hljs-keyword">let</span> stallTime = <span class="hljs-number">0</span>;

<span class="hljs-comment">// æ˜¯å¦ç»“æŸç»Ÿè®¡</span>
<span class="hljs-keyword">let</span> finalized = <span class="hljs-literal">false</span>;

</code></pre>
<h4 data-id="heading-9">Long Taskçš„ç›‘å¬</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> longTaskObserver = <span class="hljs-keyword">new</span> <span class="hljs-title class_">PerformanceObserver</span>(<span class="hljs-function"><span class="hljs-params">list</span> =&gt;</span> {
  <span class="hljs-keyword">if</span> (!observing) <span class="hljs-keyword">return</span>;

  list.<span class="hljs-title function_">getEntries</span>().<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">entry</span> =&gt;</span> {
    longTasks.<span class="hljs-title function_">push</span>({
      <span class="hljs-attr">start</span>: entry.<span class="hljs-property">startTime</span>,
      <span class="hljs-attr">duration</span>: entry.<span class="hljs-property">duration</span>
    });
  });
});

longTaskObserver.<span class="hljs-title function_">observe</span>({ <span class="hljs-attr">entryTypes</span>: [<span class="hljs-string">'longtask'</span>] });

</code></pre>
<h4 data-id="heading-10">ç”¨Long Taskè®¡ç®—å‡ºå®Œæ•´å ç”¨å¸§æ•°çš„æ—¶é—´</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">getBlockedFrameCount</span>(<span class="hljs-params">task</span>) {
  <span class="hljs-keyword">const</span> startFrame = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(task.<span class="hljs-property">start</span> / <span class="hljs-variable constant_">FRAME_TIME</span>);
  <span class="hljs-keyword">const</span> endFrame = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(
    (task.<span class="hljs-property">start</span> + task.<span class="hljs-property">duration</span>) / <span class="hljs-variable constant_">FRAME_TIME</span>
  );

  <span class="hljs-comment">// åªè®¡ç®—å®Œæ•´è¢«å ç”¨çš„å¸§</span>
  <span class="hljs-keyword">return</span> <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(<span class="hljs-number">0</span>, endFrame - startFrame - <span class="hljs-number">1</span>);
}

</code></pre>
<h4 data-id="heading-11">ç”¨visibilitychangeå’Œpagehideç›‘å¬ï¼Œæ’é™¤æ ‡ç­¾åˆ‡èµ°/æœ€å°åŒ–/é¡µé¢å†»ç»“çš„æ—¶é—´</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'visibilitychange'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> now = performance.<span class="hljs-title function_">now</span>();

  <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">document</span>.<span class="hljs-property">hidden</span>) {
    <span class="hljs-keyword">if</span> (observing) {
      activeTime += now - lastActiveTime;
      observing = <span class="hljs-literal">false</span>;
    }
  } <span class="hljs-keyword">else</span> {
    lastActiveTime = now;
    observing = <span class="hljs-literal">true</span>;
  }
});

<span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'pagehide'</span>, <span class="hljs-function"><span class="hljs-params">event</span> =&gt;</span> {
  <span class="hljs-keyword">if</span> (event.<span class="hljs-property">persisted</span>) {
    <span class="hljs-keyword">return</span>;
  }
  <span class="hljs-title function_">finalize</span>();
});

<span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'pageshow'</span>, <span class="hljs-function"><span class="hljs-params">event</span> =&gt;</span> {
  <span class="hljs-keyword">if</span> (event.<span class="hljs-property">persisted</span>) {
    lastActiveTime = performance.<span class="hljs-title function_">now</span>();
    observing = <span class="hljs-literal">true</span>;
  }
});

</code></pre>
<h4 data-id="heading-12">ç»“æŸç»Ÿè®¡</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">finalize</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">if</span> (finalized) <span class="hljs-keyword">return</span>;
  finalized = <span class="hljs-literal">true</span>;

  <span class="hljs-keyword">const</span> now = performance.<span class="hljs-title function_">now</span>();
  <span class="hljs-keyword">if</span> (observing) {
    activeTime += now - lastActiveTime;
  }

  longTasks.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">task</span> =&gt;</span> {
    <span class="hljs-keyword">const</span> blockedFrames = <span class="hljs-title function_">getBlockedFrameCount</span>(task);
    <span class="hljs-keyword">if</span> (blockedFrames &gt;= <span class="hljs-variable constant_">STALL_FRAMES</span>) {
      stallTime += blockedFrames * <span class="hljs-variable constant_">FRAME_TIME</span>;
    }
  });

  <span class="hljs-keyword">const</span> stallRate = activeTime &gt; <span class="hljs-number">0</span> ? (stallTime / activeTime) * <span class="hljs-number">100</span> : <span class="hljs-number">0</span>;

  <span class="hljs-title function_">report</span>({
    activeTime,
    stallTime,
    stallRate,
    <span class="hljs-attr">stallCount</span>: longTasks.<span class="hljs-title function_">filter</span>(
        <span class="hljs-function"><span class="hljs-params">t</span> =&gt;</span> <span class="hljs-title function_">getBlockedFrameCount</span>(t) &gt;= <span class="hljs-variable constant_">STALL_FRAMES</span>
    ).<span class="hljs-property">length</span>
  });

  longTaskObserver.<span class="hljs-title function_">disconnect</span>();
}

</code></pre>
<h2 data-id="heading-13">ç»“è¯­</h2>
<p>å…¶å®å¦‚æœè¦æŠŠå¡é¡¿ç‡åšä¸€ä¸ªå®Œæ•´å•†ç”¨çš„sdké‡Œçš„æŸä¸ªæŒ‡æ ‡ï¼Œé™¤äº†æœ¬æ–‡æåˆ°çš„å†…å®¹ï¼Œç¼ºå¤±çš„éƒ¨åˆ†è¿˜æœ‰å¾ˆå¤šï¼Œæ¯”å¦‚ä»€ä¹ˆæ—¶å€™æ‰§è¡Œã€ä»€ä¹ˆæ—¶å€™å‘é€ï¼Œç­‰ç­‰â€¦â€¦ è¿™é‡Œåªæ˜¯æœäº†ä¸€ä¸‹æ˜é‡‘å‘ç°å‰ç«¯æ€§èƒ½ä¼˜åŒ–è¿™å—æ²¡æœ‰æ‰¾åˆ°ç›¸å…³å†…å®¹ï¼Œå› æ­¤æŠŠåœ¨å·¥ä½œä¸­å­¦åˆ°çš„çŸ¥è¯†ï¼Œç®€å•æ€»ç»“äº†ä¸€ä¸‹ï¼Œæ„Ÿè°¢é˜…è¯»ã€‚</p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/aa1bdf22fe654a8e9a183d0260aa33fa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiK6K--5pG46bG855qE5Za16YWx:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768645944&amp;x-signature=M6CfifNCUeie0kFH7lqaj%2FbyOGI%3D" alt="3.png" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[lecenï¼šä¸€ä¸ªæ›´å¥½çš„å¼€æºå¯è§†åŒ–ç³»ç»Ÿæ­å»ºé¡¹ç›®--æ•°æ®ã€è¯·æ±‚ã€å¯„è¿å¯¹è±¡ä½¿ç”¨--å…¨ä½ä»£ç |æ‰€è§å³æ‰€å¾—|åˆ©ç”¨å¯è§†åŒ–è®¾è®¡å™¨æ„å»ºä½ çš„åº”ç”¨ç³»ç»Ÿ-åšä¸€ä¸ªæ‡‚ä½ çš„äºº]]></title>    <link>https://juejin.cn/post/7593258683751006242</link>    <guid>https://juejin.cn/post/7593258683751006242</guid>    <pubDate>2026-01-10T11:34:08.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7593258683751006242" data-draft-id="7593262196844216372" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="lecenï¼šä¸€ä¸ªæ›´å¥½çš„å¼€æºå¯è§†åŒ–ç³»ç»Ÿæ­å»ºé¡¹ç›®--æ•°æ®ã€è¯·æ±‚ã€å¯„è¿å¯¹è±¡ä½¿ç”¨--å…¨ä½ä»£ç |æ‰€è§å³æ‰€å¾—|åˆ©ç”¨å¯è§†åŒ–è®¾è®¡å™¨æ„å»ºä½ çš„åº”ç”¨ç³»ç»Ÿ-åšä¸€ä¸ªæ‡‚ä½ çš„äºº"/> <meta itemprop="keywords" content="ä½ä»£ç ,å‰ç«¯,åç«¯"/> <meta itemprop="datePublished" content="2026-01-10T11:34:08.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ™´è™¹"/> <meta itemprop="url" content="https://juejin.cn/user/976022057782280"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            lecenï¼šä¸€ä¸ªæ›´å¥½çš„å¼€æºå¯è§†åŒ–ç³»ç»Ÿæ­å»ºé¡¹ç›®--æ•°æ®ã€è¯·æ±‚ã€å¯„è¿å¯¹è±¡ä½¿ç”¨--å…¨ä½ä»£ç |æ‰€è§å³æ‰€å¾—|åˆ©ç”¨å¯è§†åŒ–è®¾è®¡å™¨æ„å»ºä½ çš„åº”ç”¨ç³»ç»Ÿ-åšä¸€ä¸ªæ‡‚ä½ çš„äºº
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/976022057782280/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ™´è™¹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-10T11:34:08.000Z" title="Sat Jan 10 2026 11:34:08 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">åŸºæœ¬å®šä¹‰</h2>
<p>å‰ç«¯ç³»ç»Ÿä¸»è¦ç”±åœ¨çº¿ç¼–å†™ä»£ç ä¸å¯è§†åŒ–æ“ä½œä¸¤ç§æ–¹å¼æ¥æ„å»ºã€‚é¡µé¢ç»“æ„ä¸»è¦é€šè¿‡åœ¨çº¿å¯è§†åŒ–æ‹–æ‹½ç»„åˆç”Ÿæˆï¼Œä¸€äº›é¡µé¢å…ƒç´ modelçš„ç»‘å®šåŠäº¤äº’äº‹ä»¶é€šè¿‡åœ¨å…ƒç´ å±æ€§é¢æ¿ç¼–è¾‘æ¥æ“ä½œã€‚</p>
<p>æˆ‘ä»¬æä¾›äº†å¤šä¸ªæ•°æ®æºæ¥è·å–éœ€è¦çš„æ•°æ®ï¼Œç”±äºæ•°æ®ç±»å‹çš„ä¸åŒï¼Œæˆ‘ä»¬ä½¿ç”¨å¯¹è±¡æ¥å¯¹ä»–ä»¬è¿›è¡Œåˆ†ç±»ç®¡ç†ã€‚</p>
<p>ä»åŠŸèƒ½æ€§ä¸Šä¸»è¦åˆ†ä¸ºä¸‹é¢å‡ ç±»ï¼š</p>
<p>å±æ€§å€¼ã€é¢„ç½®å‡½æ•°ã€å¯„è¿ã€è§†å›¾ã€å…ƒç´ ã€å·¥å…·ç±»ã€‚</p>
<p>ç”±äºç»†åˆ†ä¸‹æ¥å±æ€§ç‰¹åˆ«å¤šã€‚å› æ­¤æˆ‘ä»¬é€šè¿‡ä¸åŒçš„å¯¹è±¡æ¥å¯¹è¿™äº›å€¼è¿›è¡Œè®¿é—®ã€‚</p>






























<table><thead><tr><th>åç§°</th><th>å®šä¹‰</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>B</td><td>åŸºç¡€å¯¹è±¡</td><td>åŒ…å«initDataï¼ŒcollectionDataç­‰</td></tr><tr><td>G</td><td>å…¨å±€å¯¹è±¡</td><td>åŒ…å«pageï¼Œmenuï¼Œuserç­‰</td></tr><tr><td>R</td><td>è¯·æ±‚é“¾æ¥å¯¹è±¡</td><td>åŒ…å«ä¸€äº›é“¾æ¥è°ƒç”¨çš„æ–¹æ³•å’Œå±æ€§</td></tr><tr><td>P</td><td>æ‰§è¡Œå¯„è¿å¯¹è±¡</td><td>åŒ…å«ä¸€äº›å¯„è¿è°ƒå–çš„æ–¹æ³•å’Œå±æ€§</td></tr></tbody></table>
<p>å‡ ä¹æ‰€æœ‰çš„å˜é‡éƒ½èƒ½å¤Ÿé€šè¿‡è¿™å››ä¸ªå¯¹è±¡è®¿é—®åˆ°ï¼Œæ¯ä¸ªé¡µé¢éƒ½æœ‰è‡ªå·±çš„ <code>B</code>ã€<code>G</code>ã€<code>R</code>ã€<code>P</code> å¯¹è±¡ï¼Œé™¤äº† <code>G</code> ä¹‹å¤–ï¼Œä¸åŒé¡µé¢ä¹‹é—´çš„ <code>B</code>ã€<code>R</code>ã€<code>P</code> å¯¹è±¡éƒ½æ˜¯ç›¸äº’ç‹¬ç«‹çš„</p>
<p>è¿™å››ä¸ªå¯¹è±¡æ—¢å¯ä»¥ç‹¬ç«‹è®¿é—®ï¼Œä¹Ÿå¯ä»¥åœ¨æŸä¸ªå¯¹è±¡ä¸­è®¿é—®å¦ä¸€ä¸ªå¯¹è±¡</p>
<p>é¡µé¢ä¸­æ‰€æœ‰çš„åœ°æ–¹éƒ½èƒ½å¤Ÿè®¿é—®è¿™äº›å¯¹è±¡ï¼Œæ‰€æœ‰å¯ä»¥å†™è„šæœ¬çš„åœ°æ–¹éƒ½èƒ½é€šè¿‡ <code>this</code> æ¥è·å–è¿™äº›å˜é‡</p>
<p>é™¤äº†å½“å‰é¡µé¢ä¸‹çš„å…¬å…±å¯¹è±¡ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸¤ä¸ªå¯¹è±¡æ˜¯åªåœ¨å½“å‰ç»„ä»¶çš„äº‹ä»¶ä¸­èƒ½è®¿é—®åˆ°çš„å±æ€§</p>




















<table><thead><tr><th>åç§°</th><th>å®šä¹‰</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>describe</td><td>å½“å‰ç»„ä»¶è§†å›¾é…ç½®</td><td>åŒ…å«äº†æ¸²æŸ“è¯¥ç»„å»ºæ‰€éœ€çš„æ‰€æœ‰é…ç½®</td></tr><tr><td>scopeData</td><td>æ¸²æŸ“æ•°æ®</td><td>å½“å‰ä½œç”¨åŸŸæ’æ§½çš„æ•°æ®</td></tr></tbody></table>
<h2 data-id="heading-1">æ•°æ®å¯¹è±¡</h2>
<h3 data-id="heading-2">initData</h3>
<p>è¯¥å¯¹è±¡ä¸»è¦å­˜å‚¨ä¸€äº›åˆå§‹åŒ–æ•°æ®ï¼Œä¸€èˆ¬æƒ…å†µä¸‹å®ƒçš„å±æ€§å€¼ä¸ä¼šå‘ç”Ÿå˜åŒ–ï¼Œå¯ä»¥é€šè¿‡å¯„è¿ã€è¯·æ±‚çš„æ–¹å¼è¿›è¡Œè®¾å®šï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æ‰‹åŠ¨æŒ‡å®šåˆå§‹åŒ–çš„æ•°æ®ï¼Œä¾›ä¹‹åè®¿é—®ã€æ¯”è¾ƒç­‰æ“ä½œã€‚</p>
<p>è¯¥å¯¹è±¡å¹¶æ²¡æœ‰ä¸¥æ ¼çš„é™åˆ¶è¯´èƒ½å¤Ÿå­˜å‚¨å“ªäº›æ•°æ®ï¼Œåªæ˜¯çº¦å®šå¥½åªå­˜å‚¨é¡µé¢åˆå§‹åŒ–æ•°æ®ï¼Œæˆ–è€…ä¸€äº›å…¶ä»–çš„ä¿¡æ¯ç­‰</p>
<p><code>initData</code> åœ¨é¡µé¢åŠ è½½çš„æ—¶å€™ï¼Œä¼šé»˜è®¤å¡«å……ä¸¤ä¸ªå±æ€§ï¼š<code>formCode</code> å’Œ <code>serviceTable</code>ï¼Œåˆ†åˆ«è¡¨ç¤ºå½“å‰é¡µé¢çš„ç¼–ç å’Œå½“å‰é¡µé¢å­˜å‚¨çš„æ•°æ®è¡¨</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f76fe8d81ac4435d89c872f4557f1ea0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm06Jm5:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768649648&amp;x-signature=QR6UV9%2F6ATgoANy71BDTyD1mWzY%3D" alt="initDataé»˜è®¤å¡«å……" loading="lazy"/></p>
<p>ç„¶åæˆ‘ä»¬å¯ä»¥åœ¨ä»»æ„å…¶ä»–ä½ç½®å¯¹å®ƒè¿›è¡Œè®¾å®š</p>
<p>æ¯”å¦‚æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªè¯·æ±‚é“¾æ¥ï¼Œç„¶ååœ¨å›è°ƒå‡½æ•°é‡Œé¢æŠŠæ¥å£çš„è¿”å›å€¼æ”¾åˆ° <code>initData</code> é‡Œé¢</p>
<p>è¯·æ±‚é“¾æ¥çš„å›è°ƒå‡½æ•°é‡Œé¢å†™ä¸Š <code>this.B.setInitData(data)</code></p>
<p>å…ˆçœ‹ä¸‹æ¥å£çš„è¿”å›å€¼ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/398bb796fb8d45c5800d24bf105b8d99~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm06Jm5:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768649648&amp;x-signature=JPLDGfQ9qMd%2F2TbQWZ4CnVkbwGI%3D" alt="æ¥å£è¿”å›å€¼" loading="lazy"/></p>
<p>ç»™é¡µé¢æ·»åŠ è¯¥æ¥å£ä¹‹åï¼Œæ¥å£è°ƒç”¨å®Œæ¯•ä¼šæ‰§è¡Œå›è°ƒå‡½æ•°ï¼Œå°†æ•°æ®å¡«å……åˆ° <code>initData</code> ä¸­</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f25d64e5faec430e9f087a7fe96bb36e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm06Jm5:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768649648&amp;x-signature=9w%2FtxF54Nyy4Fdv6lfZJtHSkp0s%3D" alt="initDataèµ‹å€¼" loading="lazy"/></p>
<h3 data-id="heading-3">collectionData</h3>
<p>æ‰€æœ‰åœ¨è§†å›¾ä¸­å¸¦æœ‰modelå­—æ®µçš„å±æ€§éƒ½ä¼šè¢«æ”¶é›†åˆ°è¿™ä¸ªå¯¹è±¡ä¸­ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ç»™è¯¥å¯¹è±¡èµ‹å€¼ä¸€äº›ä¸´æ—¶çš„å…¶ä»–å±æ€§ï¼Œè¿™æ ·æ–¹ä¾¿åœ¨åˆ«çš„åœ°æ–¹éƒ½å¯ä»¥è®¿é—®åˆ°ã€‚</p>
<p>è¯¦è§ <a href="https://link.juejin.cn?target=http%3A%2F%2Flnsstyp.com%2Fweb%2Fguide%2FsystemPage%2FpageDesign.html%23model%25E7%25BB%2591%25E5%25AE%259A" target="_blank" title="http://lnsstyp.com/web/guide/systemPage/pageDesign.html#model%E7%BB%91%E5%AE%9A" ref="nofollow noopener noreferrer">collectionDataæ”¶é›†model</a></p>
<h3 data-id="heading-4">requestData</h3>
<p>å¦‚æœè¯·æ±‚é“¾æ¥é…ç½®äº†ç»‘å®šæ•°æ®å­—æ®µï¼Œé‚£ä¹ˆé€šè¿‡è¯·æ±‚è¿”å›çš„æ•°æ®å°±ä¼šè¢«å­˜å‚¨åˆ°è¯¥å¯¹è±¡ä¸­ï¼Œå®ƒè¿˜åŒ…å«äº†ä¸¤ä¸ªç‰¹æ®Šçš„å±æ€§ï¼š</p>
<p><code>handle</code>ï¼šæ‰€æœ‰è¯·æ±‚ä¸­å¦‚æœè®¾å®šäº†codeï¼Œé‚£ä¹ˆå°±ä¼šè¢«ä¿å­˜åœ¨è¯¥å¯¹è±¡ä¸­ï¼Œä»¥å¤‡ä¹‹åæ‰‹åŠ¨è§¦å‘è¯·æ±‚ã€‚</p>
<p><code>code</code>ï¼šå¸¦æœ‰æƒé™æ§åˆ¶çš„codeå¯ä»¥é€šè¿‡è¿™ä¸ªå¯¹è±¡è®¿é—®åˆ°ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æ‰‹åŠ¨æŒ‡å®šcodeå±æ€§ã€‚</p>
<p>å…³äºå¦‚ä½•å°†è¯·æ±‚é“¾æ¥è¿”å›çš„æ•°æ®ç»‘å®šåˆ° <code>collectionData</code> å¯¹è±¡ä¸­ï¼Œä»¥åŠå®ƒä»¬çš„ç»‘å®šæœºåˆ¶å’Œæ‰‹åŠ¨è§¦å‘è¯·æ±‚ï¼Œå¯å‚è€ƒ <a href="https://link.juejin.cn?target=http%3A%2F%2Flnsstyp.com%2Fweb%2Fguide%2FsystemPage%2Frequest.html%23%25E6%2596%25B0%25E5%25BB%25BA" target="_blank" title="http://lnsstyp.com/web/guide/systemPage/request.html#%E6%96%B0%E5%BB%BA" ref="nofollow noopener noreferrer">è¯·æ±‚é“¾æ¥é…ç½®</a></p>
<p>å…³äº <code>requestData.code</code> å¯¹è±¡çš„ä½œç”¨å’Œè¿è¡Œæœºåˆ¶ï¼Œå¯å‚è€ƒ <a href="https://link.juejin.cn?target=http%3A%2F%2Flnsstyp.com%2Fweb%2Freference%2Fcontrol.html%23code" target="_blank" title="http://lnsstyp.com/web/reference/control.html#code" ref="nofollow noopener noreferrer">æƒé™æ§åˆ¶</a></p>
<h3 data-id="heading-5">controlData</h3>
<p>é¡µé¢ä¸­çš„æ‰€æœ‰æ•°æ®è§†å›¾éƒ½ä¼šä»¥codeä¸ºæ ‡è¯†å­˜å‚¨åœ¨è¯¥å¯¹è±¡ä¸­ï¼Œæˆ‘ä»¬æ‰‹åŠ¨è®¾å®šçš„domå’Œviewä¹Ÿä¼šé€šè¿‡å®ƒè¿›è¡Œè®¿é—®ã€‚</p>
<p>å…³äºç»„ä»¶çš„ <code>dom</code> å’Œ <code>view</code> è®¾ç½®è§„åˆ™å’Œå®ƒä»¬çš„ä½¿ç”¨æ–¹å¼ï¼Œå¯å‚è€ƒ <a href="https://link.juejin.cn?target=http%3A%2F%2Flnsstyp.com%2Fweb%2Freference%2Fcontrol.html%23dom" target="_blank" title="http://lnsstyp.com/web/reference/control.html#dom" ref="nofollow noopener noreferrer">å…ƒç´ å’Œè§†å›¾çš„å¼•ç”¨</a></p>
<h3 data-id="heading-6">setInitData(data)</h3>
<p>è¿™æ˜¯ <code>B</code> å¯¹è±¡æš´éœ²å‡ºæ¥çš„ç”¨äºè®¾ç½® <code>initData</code> å¯¹è±¡çš„æ–¹æ³•ï¼Œç›´æ¥ä¼ å…¥éœ€è¦è®¾ç½®çš„æ•°æ®å¯¹è±¡å³å¯</p>
<h3 data-id="heading-7">setCollectionData(data)</h3>
<p>è¿™æ˜¯ <code>B</code> å¯¹è±¡æš´éœ²å‡ºæ¥çš„ç”¨äºè®¾ç½® <code>collectionData</code> å¯¹è±¡çš„æ–¹æ³•ï¼Œç›´æ¥ä¼ å…¥éœ€è¦è®¾ç½®çš„æ•°æ®å¯¹è±¡å³å¯</p>
<h2 data-id="heading-8">è¯·æ±‚é“¾æ¥å¯¹è±¡</h2>
<p>ç®¡ç†é¡µé¢ä¸­æ‰€æœ‰çš„è¯·æ±‚é“¾æ¥ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6361930b23f54b22ba99cdb7293f22b9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm06Jm5:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768649648&amp;x-signature=%2FUPhRiG7T75bTJ3fvRFrYT40qTM%3D" alt="è¯·æ±‚é“¾æ¥å¯¹è±¡" loading="lazy"/></p>
<p>æ¯ä¸ª <a href="https://link.juejin.cn?target=http%3A%2F%2Flnsstyp.com%2Fweb%2Fguide%2FsystemPage%2Frequest.html" target="_blank" title="http://lnsstyp.com/web/guide/systemPage/request.html" ref="nofollow noopener noreferrer">è¯·æ±‚é“¾æ¥</a> çš„å›è°ƒå‡½æ•°ä¸­çš„thiséƒ½æŒ‡å‘è¿™ä¸ªå¯¹è±¡ã€‚</p>
<p>é™¤äº†åœ¨è¯·æ±‚é“¾æ¥ä¸­ä½¿ç”¨ï¼Œåœ¨é¡µé¢çš„å…¶ä»–ä»»ä½•åœ°æ–¹éƒ½å¯ä»¥é€šè¿‡ <code>this.R</code> æ‹¿åˆ°è¿™ä¸ªå¯¹è±¡ã€‚</p>
<p>ä¹Ÿå¯ä»¥é€šè¿‡è¿™ä¸ªå¯¹è±¡è·å–åˆ° <code>G</code>ã€<code>P</code>ã€<code>collectionData</code>ã€<code>controlData</code>ã€<code>requestData</code> ç­‰ç­‰å…¬å…±å¯¹è±¡ã€‚</p>
<p>ä¸»è¦æœ‰ä»¥ä¸‹æ–¹æ³•ï¼š</p>
<ul>
<li>
<p>doCallBackï¼šç”¨äºæ‰§è¡Œè¯·æ±‚é“¾æ¥è¿”å›æ•°æ®ä¹‹åçš„å›è°ƒå‡½æ•°</p>
</li>
<li>
<p>filterCancelï¼šç”¨äºè¿‡æ»¤æ‰è¢«å–æ¶ˆçš„è¯·æ±‚</p>
</li>
<li>
<p>getListsï¼šå®é™…å‘èµ·æ¥å£è¯·æ±‚è·å–æ•°æ®</p>
</li>
<li>
<p>initListsï¼šæ ¹æ®è¯·æ±‚é“¾æ¥çš„é…ç½®ä¿¡æ¯åˆå§‹åŒ–è¯·æ±‚</p>
</li>
<li>
<p>pitchRequestï¼šæ ¹æ®è¯·æ±‚ç­–ç•¥æ‹†åˆ†å‡ºä¸åŒçš„è¯·æ±‚é›†åˆ</p>
</li>
<li>
<p>prepareï¼šå‘èµ·å®é™…è¯·æ±‚ä¹‹å‰çš„å‡†å¤‡</p>
</li>
<li>
<p>requestï¼šç®¡ç†ä¸€ä¸ªè¯·æ±‚ä»å¼€å§‹åˆ°ç»“æŸçš„æ•´ä¸ªå‘¨æœŸ</p>
</li>
<li>
<p>setListsï¼šæ ¹æ®è¯·æ±‚é“¾æ¥çš„é…ç½®å°†è¿”å›çš„æ•°æ®è¿›è¡Œå¤„ç†</p>
</li>
<li>
<p>triggerï¼šæ ¹æ®è¯·æ±‚ç¼–ç å‘èµ·è¯·æ±‚</p>
</li>
</ul>
<p>é™¤äº† <code>prepare</code> å’Œ <code>trigger</code> ä¹‹å¤–ï¼Œå…¶ä»–æ–¹æ³•å‡å±äºå†…éƒ¨ä½¿ç”¨çš„æ–¹æ³•ï¼Œä¸€èˆ¬ç”¨ä¸åˆ°</p>
<h3 data-id="heading-9">prepare</h3>
<p>è¿™æ˜¯ä¸€ä¸ªè¯·æ±‚é¢„å¤„ç†ï¼Œä¸»è¦ç”¨æ¥åœ¨å‘èµ·ä¸€ä¸ªè¯·æ±‚å‰åšä¸€äº›é€»è¾‘å¤„ç†ï¼Œæ¯”å¦‚è®¾ç½®å‚æ•°ç­‰ã€‚</p>
<p>å¦‚æœé¡µé¢ä¸­çš„ä¸€ä¸ªè¯·æ±‚é“¾æ¥å…·æœ‰ <code>code</code> å€¼ï¼Œé‚£ä¹ˆé€šè¿‡è°ƒç”¨ <code>prepare</code> æ–¹æ³•ï¼Œä¼ å…¥å¯¹åº”è¯·æ±‚çš„ <code>code</code>ï¼Œå°±ä¼šå¯¹è¯¥è¯·æ±‚è¿›è¡Œåˆå§‹åŒ–å¹¶è¿”å›ä¸€ä¸ª <code>promise</code>ã€‚</p>
<p>åœ¨thenæ–¹æ³•ä¼ é€’å›æ¥çš„å‚æ•°æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå…¶ä¸­åŒ…å«ä¸¤ä¸ªå±æ€§ï¼š<code>request</code> å’Œ <code>run</code>ã€‚</p>
<p><code>request</code> ä»£è¡¨å½“å‰çš„è¯·æ±‚ï¼Œå¯ä»¥é€šè¿‡å®ƒä¿®æ”¹å‚æ•°æˆ–æ‰§è¡Œå…¶ä»–æ“ä½œã€‚</p>
<p><code>run</code> æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œæ‰§è¡Œä¹‹åå°†ä¼šå‘èµ·çœŸæ­£çš„è¯·æ±‚ã€‚</p>
<p>å…³äºå…·ä½“çš„ä½¿ç”¨æ–¹å¼å¯å‚ç…§ <a href="https://link.juejin.cn?target=http%3A%2F%2Flnsstyp.com%2Fweb%2Fguide%2FsystemPage%2Frequest.html%23%25E8%25AF%25B7%25E6%25B1%2582%25E7%25BC%2596%25E7%25A0%2581" target="_blank" title="http://lnsstyp.com/web/guide/systemPage/request.html#%E8%AF%B7%E6%B1%82%E7%BC%96%E7%A0%81" ref="nofollow noopener noreferrer">è¯·æ±‚ç¼–ç </a></p>
<h3 data-id="heading-10">trigger</h3>
<p>æ ¹æ®ä¼ å…¥çš„å¯¹åº”è¯·æ±‚çš„ <code>code</code> å‘èµ·è¯·æ±‚ï¼Œä¸»è¦æ˜¯ç”¨æ¥å¤„ç†æ‰‹åŠ¨è§¦å‘çš„è¯·æ±‚ã€‚</p>
<p>å…·ä½“çš„ç¤ºä¾‹å¯è§ <a href="https://link.juejin.cn?target=http%3A%2F%2Flnsstyp.com%2Fweb%2Fguide%2FsystemPage%2Frequest.html%23%25E8%25AF%25B7%25E6%25B1%2582%25E7%25BC%2596%25E7%25A0%2581" target="_blank" title="http://lnsstyp.com/web/guide/systemPage/request.html#%E8%AF%B7%E6%B1%82%E7%BC%96%E7%A0%81" ref="nofollow noopener noreferrer">è¯·æ±‚ç¼–ç </a></p>
<h2 data-id="heading-11">å¯„è¿å¯¹è±¡</h2>
<p>ç”¨æ¥ç®¡ç†é¡µé¢ä¸­çš„æ‰§è¡Œå¯„è¿</p>

























<table><thead><tr><th>å‡½æ•°</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>bond</td><td>æ‰§è¡Œç­–ç•¥ä¸ºbeforeçš„å¯„è¿</td></tr><tr><td>doCallBack</td><td>è‡ªåŠ¨æ‰§è¡ŒæŒ‡å®šçš„å¯„è¿</td></tr><tr><td>pitchBond</td><td>æ ¹æ®å¯„è¿ç­–ç•¥æ‹†åˆ†å‡ºä¸åŒçš„å¯„è¿é›†åˆ</td></tr><tr><td>runIt</td><td>æ‰‹åŠ¨æ‰§è¡ŒæŒ‡å®šçš„å¯„è¿</td></tr></tbody></table>
<p>è¿˜æœ‰ä¸€ä¸ª <code>handle</code> çš„å¯¹è±¡å±æ€§å’Œä¸€ä¸ª <code>prepare</code> çš„æ•°ç»„å±æ€§</p>
<p><code>handle</code> ä¸»è¦ç”¨æ¥å­˜æ”¾éœ€è¦æ‰‹åŠ¨æ‰§è¡Œçš„å¯„è¿</p>
<p><code>prepare</code> å­˜æ”¾äº†æ‰§è¡Œç­–ç•¥ä¸ºbeforeçš„å¯„è¿</p>
<h3 data-id="heading-12">RunIt</h3>
<p>é€šè¿‡å®ƒæ¥æ‰‹åŠ¨æ‰§è¡Œå¯„è¿ï¼Œç¬¬ä¸€ä¸ªå‚æ•°è¡¨ç¤ºè¦æ‰§è¡Œçš„å¯„è¿ <code>code</code>ï¼Œä»ç¬¬äºŒä¸ªå‚æ•°å¼€å§‹ï¼Œéƒ½æ˜¯è¦ä¼ å…¥å¯„è¿å‡½æ•°çš„å‚æ•°ã€‚</p>
<p>æ¯”å¦‚ç°åœ¨æœ‰ä¸€ä¸ªç¼–ç ä¸º <code>getAverage</code> çš„å¯„è¿ï¼Œå®ƒç”¨æ¥è®¡ç®—å¤šä¸ªæ•°çš„å¹³å‡æ•°ï¼Œå¯„è¿å†…å®¹å¦‚ä¸‹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4bcacf410870488d94837dac599eb71c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm06Jm5:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768649648&amp;x-signature=qBFDyU7yQnsgL4Jkz2nSjIB92Uw%3D" alt="è®¡ç®—å¹³å‡æ•°" loading="lazy"/></p>
<p>ç°åœ¨åœ¨ä¸€ä¸ªæŒ‰é’®çš„ç‚¹å‡»äº‹ä»¶é‡Œé¢æ¥è°ƒç”¨è¿™ä¸ªæ‰§è¡Œå¯„è¿</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ebc96920dd8a4661b7ea2778025471a8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm06Jm5:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768649648&amp;x-signature=Ht9S9GmoE0VPvbMXlXxpaZUyiME%3D" alt="æ‰§è¡Œå¯„è¿" loading="lazy"/></p>
<p>ç‚¹å‡»æŒ‰é’®ä¹‹åå°±ä¼šæ‰§è¡Œè¯¥å¯„è¿</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/440cbbbe468d4f2bbb2c73ecaf593367~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm06Jm5:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768649648&amp;x-signature=uq%2BrJx5C7C52T6LLszkd2GhzqbM%3D" alt="è®¡ç®—ç»“æœ" loading="lazy"/></p>
<p>å…³äºæ‰‹åŠ¨æ‰§è¡Œå¯„è¿çš„é…ç½®å¯å‚è€ƒ <a href="https://link.juejin.cn?target=http%3A%2F%2Flnsstyp.com%2Fweb%2Fguide%2FsystemPage%2FparasiticBond.html%23%25E5%25AF%2584%25E8%25BF%259E%25E6%2589%25A7%25E8%25A1%258C%25E7%25AD%2596%25E7%2595%25A5" target="_blank" title="http://lnsstyp.com/web/guide/systemPage/parasiticBond.html#%E5%AF%84%E8%BF%9E%E6%89%A7%E8%A1%8C%E7%AD%96%E7%95%A5" ref="nofollow noopener noreferrer">å¯„è¿æ‰§è¡Œç­–ç•¥</a></p>
<p>ã€é¡¹ç›®ä½“éªŒã€‘</p>
<p><a href="https://link.juejin.cn?target=http%3A%2F%2Fwww.lecen.top%2Fmanage" target="_blank" title="http://www.lecen.top/manage" ref="nofollow noopener noreferrer">ç³»ç»Ÿç®¡ç†ç«¯åœ°å€</a> ï¼š<a href="https://link.juejin.cn?target=http%3A%2F%2Fwww.lecen.top%2Fmanage" target="_blank" title="http://www.lecen.top/manage" ref="nofollow noopener noreferrer">www.lecen.top/manage</a></p>
<p><a href="https://link.juejin.cn?target=http%3A%2F%2Fwww.liudaxianer.com%2Fuser" target="_blank" title="http://www.liudaxianer.com/user" ref="nofollow noopener noreferrer">ç³»ç»Ÿç”¨æˆ·ç«¯åœ°å€</a> ï¼š<a href="https://link.juejin.cn?target=http%3A%2F%2Fwww.liudaxianer.com%2Fuser" target="_blank" title="http://www.liudaxianer.com/user" ref="nofollow noopener noreferrer">www.liudaxianer.com/user</a></p>
<p><a href="https://link.juejin.cn?target=http%3A%2F%2Fwww.lnsstyp.com%2Fweb" target="_blank" title="http://www.lnsstyp.com/web" ref="nofollow noopener noreferrer">ç³»ç»Ÿæ–‡æ¡£åœ°å€</a> ï¼š<a href="https://link.juejin.cn?target=http%3A%2F%2Fwww.lnsstyp.com%2Fweb" target="_blank" title="http://www.lnsstyp.com/web" ref="nofollow noopener noreferrer">www.lnsstyp.com/web</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»é›¶æ‰“é€ AIæ™ºèƒ½åšå®¢ï¼šä¸€ä¸ªé¡¹ç›®å¸¦ä½ å…¥é—¨å…¨æ ˆä¸å¤§æ¨¡å‹åº”ç”¨å¼€å‘]]></title>    <link>https://juejin.cn/post/7593262196844249140</link>    <guid>https://juejin.cn/post/7593262196844249140</guid>    <pubDate>2026-01-10T11:58:17.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7593262196844249140" data-draft-id="7593296804108779560" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»é›¶æ‰“é€ AIæ™ºèƒ½åšå®¢ï¼šä¸€ä¸ªé¡¹ç›®å¸¦ä½ å…¥é—¨å…¨æ ˆä¸å¤§æ¨¡å‹åº”ç”¨å¼€å‘"/> <meta itemprop="keywords" content="å‰ç«¯,AIGC"/> <meta itemprop="datePublished" content="2026-01-10T11:58:17.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="SpringLament"/> <meta itemprop="url" content="https://juejin.cn/user/822855086907101"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»é›¶æ‰“é€ AIæ™ºèƒ½åšå®¢ï¼šä¸€ä¸ªé¡¹ç›®å¸¦ä½ å…¥é—¨å…¨æ ˆä¸å¤§æ¨¡å‹åº”ç”¨å¼€å‘
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/822855086907101/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    SpringLament
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-10T11:58:17.000Z" title="Sat Jan 10 2026 11:58:17 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å†™åœ¨å‰é¢</h2>
<p>æœ€è¿‘ AI Coding å®åœ¨å¤ªç«äº†ï¼ŒCursorã€Claude Code è¿™äº›å·¥å…·è®©å†™ä»£ç å˜å¾—è¶Šæ¥è¶Šè½»æ¾ã€‚ä½ å¯èƒ½ä¹Ÿæ³¨æ„åˆ°äº†ï¼Œè¿™äº›å·¥å…·éƒ½æœ‰ä¸€ä¸ªå…±åŒç‚¹ï¼šåœ¨ä½ å†™ä»£ç çš„æ—¶å€™ï¼Œå®ƒä»¬ä¼šå®æ—¶ç»™ä½ è¡¥å…¨å»ºè®®ï¼ŒæŒ‰ Tab å°±èƒ½æ¥å—ã€‚è¿™ç§ä½“éªŒå¤ªçˆ½äº†ï¼Œä»¥è‡³äºæˆ‘æƒ³åœ¨è‡ªå·±çš„åšå®¢ç¼–è¾‘å™¨é‡Œä¹Ÿæä¸€ä¸ªç±»ä¼¼çš„åŠŸèƒ½ã€‚</p>
<p>ä¸æ­¤åŒæ—¶ï¼Œã€Œå…¨æ ˆå¼€å‘ã€å’Œã€Œå¤§æ¨¡å‹åº”ç”¨å¼€å‘ã€ä¹Ÿæˆäº†å¾ˆå¤šäººæƒ³è¦å­¦ä¹ çš„æ–¹å‘ã€‚</p>
<p>æˆ‘è‡ªå·±æŠ˜è…¾äº†ä¸€ä¸ª Next.js å…¨æ ˆ AI åšå®¢é¡¹ç›®ï¼ŒæŠŠ Prompt å·¥ç¨‹ã€RAG çŸ¥è¯†åº“ã€æµå¼è¾“å‡ºã€AI Copilot è¿™äº›ä¸œè¥¿éƒ½å®è·µäº†ä¸€éã€‚ä»Šå¤©æƒ³é€šè¿‡è¿™ç¯‡æ–‡ç« ï¼ŒæŠŠæˆ‘åœ¨è¿™ä¸ªé¡¹ç›®é‡Œå­¦åˆ°çš„ä¸œè¥¿åˆ†äº«å‡ºæ¥ï¼Œå¸Œæœ›èƒ½å¸®åˆ°æƒ³å…¥é—¨è¿™ä¸ªé¢†åŸŸçš„æœ‹å‹ã€‚</p>
<p><strong>GitHub åœ°å€</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fflawlessv%2FSpring-Broken-AI-Blog%2522" target="_blank" title="https://github.com/flawlessv/Spring-Broken-AI-Blog%22" ref="nofollow noopener noreferrer">github.com/flawlessv/Sâ€¦</a></p>
<p><strong>ğŸ”— çº¿ä¸Šåœ°å€</strong>ï¼š<a href="https://link.juejin.cn?target=http%3A%2F%2Fpowder.icu%2F" target="_blank" title="http://powder.icu/" ref="nofollow noopener noreferrer">powder.icu/</a></p>
<blockquote>
<p>æœ¬æ–‡ä¸»è¦è®²è¿°å¦‚ä½•å®ç°åšå®¢çš„AIç›¸å…³åŠŸèƒ½ï¼Œæƒ³äº†è§£åŸºç¡€åŠŸèƒ½å¦‚ä½•å®ç°çš„åŒå­¦å¯ä»¥çœ‹ä¸‹<a href="https://juejin.cn/post/7575112613779128354" target="_blank" title="https://juejin.cn/post/7575112613779128354">Next.jså…¨æ ˆå¼€å‘ä»å…¥é—¨åˆ°éƒ¨ç½²å®æˆ˜</a></p>
</blockquote>
<p>å…ˆçœ‹çœ‹è¿™ä¸ªåšå®¢é•¿ä»€ä¹ˆæ ·ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/38591165cd3e4872b14a0458197f98bd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU3ByaW5nTGFtZW50:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768652174&amp;x-signature=hkjEab%2FezuFSyeIiemwYXKf%2BZgQ%3D" alt="shouye.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/895d9a11a27a427e823e6a93fa9d00eb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU3ByaW5nTGFtZW50:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768652174&amp;x-signature=pRxyOCaJohk1NPxSsh5TEGt%2B9dw%3D" alt="åå°ä»ªè¡¨ç›˜.png" loading="lazy"/>
é¡¹ç›®ç”¨çš„æŠ€æœ¯æ ˆï¼š</p>
<ul>
<li><strong>å‰ç«¯</strong>ï¼šNext.js 15 + TypeScript + shadcn/ui + Tailwind CSS</li>
<li><strong>åç«¯</strong>ï¼šNext.js API Routes + Prisma ORM</li>
<li><strong>AI</strong>ï¼šKimi API + Ollama + ChromaDB</li>
</ul>
<p>æ¥ä¸‹æ¥æˆ‘ä¼šä» Prompt è®²èµ·ï¼Œç„¶åèŠèŠ AI Copilotã€RAGã€æµå¼è¾“å‡ºè¿™äº›åŠŸèƒ½æ˜¯æ€ä¹ˆå®ç°çš„ã€‚</p>
<hr/>
<h2 data-id="heading-1">ä¸€åˆ‡çš„èµ·ç‚¹ï¼šPrompt</h2>
<p>è¯´åˆ°å¤§æ¨¡å‹åº”ç”¨å¼€å‘ï¼Œç»‘ä¸å¼€çš„å°±æ˜¯ Promptã€‚</p>
<p><strong>Prompt æ˜¯ä»€ä¹ˆï¼Ÿ</strong> è¯´ç™½äº†å°±æ˜¯ä½ è·Ÿå¤§æ¨¡å‹è¯´çš„è¯ã€‚ä½ æ€ä¹ˆé—®ï¼Œå®ƒå°±æ€ä¹ˆç­”ã€‚é—®å¾—å¥½ï¼Œç­”æ¡ˆå°±é è°±ï¼›é—®å¾—çƒ‚ï¼Œç­”æ¡ˆå°±ç¦»è°±ã€‚</p>
<p>æˆ‘åœ¨åšè¿™ä¸ªé¡¹ç›®çš„æ—¶å€™å‘ç°ï¼Œå¾ˆå¤š AI åŠŸèƒ½çš„æœ¬è´¨éƒ½æ˜¯ä¸€æ ·çš„ï¼š<strong>æ„é€ ä¸€ä¸ª Promptï¼Œç„¶åè°ƒ LLM API</strong>ã€‚</p>
<p>æ¯”å¦‚ï¼š</p>
<ul>
<li>AI ç”Ÿæˆæ–‡ç« æ ‡é¢˜ï¼ŸPrompt + LLM</li>
<li>AI ç”Ÿæˆæ‘˜è¦ï¼ŸPrompt + LLM</li>
<li>AI æ¨èæ ‡ç­¾ï¼Ÿè¿˜æ˜¯ Prompt + LLM</li>
</ul>
<p>æ‰€ä»¥æƒ³ç©å¥½å¤§æ¨¡å‹åº”ç”¨ï¼ŒPrompt å·¥ç¨‹æ˜¯å¿…é¡»è¦ä¼šçš„ã€‚</p>
<h3 data-id="heading-2">ç»“æ„åŒ– Prompt</h3>
<p>å†™ Prompt å…¶å®è·Ÿå†™æ–‡ç« å·®ä¸å¤šï¼Œæœ‰ç»“æ„ä¼šæ¯”ä¹±å†™å¥½å¾ˆå¤šã€‚æˆ‘åœ¨é¡¹ç›®é‡Œç”¨çš„æ˜¯ä¸€ç§å«ã€Œç»“æ„åŒ– Promptã€çš„å†™æ³•ï¼Œå¤§æ¦‚é•¿è¿™æ ·ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># Role: ä½ çš„è§’è‰²</span>

<span class="hljs-section">## Profile</span>

<span class="hljs-bullet">-</span> Author: xxx
<span class="hljs-bullet">-</span> Version: 1.0
<span class="hljs-bullet">-</span> Language: ä¸­æ–‡
<span class="hljs-bullet">-</span> Description: è§’è‰²æè¿°

<span class="hljs-section">## Skills</span>

<span class="hljs-bullet">-</span> æŠ€èƒ½1
<span class="hljs-bullet">-</span> æŠ€èƒ½2

<span class="hljs-section">## Rules</span>

<span class="hljs-bullet">1.</span> è§„åˆ™1
<span class="hljs-bullet">2.</span> è§„åˆ™2

<span class="hljs-section">## Workflow</span>

<span class="hljs-bullet">1.</span> ç¬¬ä¸€æ­¥åšä»€ä¹ˆ
<span class="hljs-bullet">2.</span> ç¬¬äºŒæ­¥åšä»€ä¹ˆ

<span class="hljs-section">## OutputFormat</span>

<span class="hljs-bullet">-</span> è¾“å‡ºæ ¼å¼è¦æ±‚

<span class="hljs-section">## Initialization</span>

ä½œä¸º <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Role</span>&gt;</span></span>ï¼Œä¸¥æ ¼éµå®ˆ <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Rules</span>&gt;</span></span>ï¼ŒæŒ‰ç…§ <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Workflow</span>&gt;</span></span> æ‰§è¡Œä»»åŠ¡ã€‚
</code></pre>
<p>è¿™ç§å†™æ³•çš„å¥½å¤„æ˜¯é€»è¾‘æ¸…æ™°ï¼Œå¤§æ¨¡å‹æ›´å®¹æ˜“ç†è§£ä½ æƒ³è¦ä»€ä¹ˆã€‚</p>
<p>ä¸¾ä¸ªå®é™…çš„ä¾‹å­ï¼Œè¿™æ˜¯æˆ‘é¡¹ç›®é‡Œç”¨æ¥ç”Ÿæˆæ–‡ç« æ‘˜è¦çš„ Promptï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">buildExcerptPrompt</span>(<span class="hljs-params">content: <span class="hljs-built_in">string</span></span>): <span class="hljs-built_in">string</span> {
  <span class="hljs-keyword">return</span> <span class="hljs-string">`# Role: å†…å®¹æ‘˜è¦æ’°å†™ä¸“å®¶

## Profile
- Author: Spring Broken AI Blog
- Version: 2.0
- Language: ä¸­æ–‡
- Description: ä½ æ˜¯ä¸€ä½ä¸“ä¸šçš„å†…å®¹ç¼–è¾‘ï¼Œæ“…é•¿ä»é•¿æ–‡ä¸­æå–æ ¸å¿ƒä¿¡æ¯ï¼Œæ’°å†™ç®€æ´æœ‰åŠ›çš„æ‘˜è¦ã€‚

## Rules
1. æ‘˜è¦é•¿åº¦å¿…é¡»ä¸¥æ ¼æ§åˆ¶åœ¨ 100-200 ä¸ªæ±‰å­—ä¹‹é—´
2. å¿…é¡»åŒ…å«æ–‡ç« çš„æ ¸å¿ƒè§‚ç‚¹å’Œä¸»è¦ç»“è®º
3. ä½¿ç”¨ç®€æ´ã€ä¸“ä¸šçš„è¯­è¨€ï¼Œé¿å…å†—ä½™è¡¨è¾¾
4. åªè¿”å›æ‘˜è¦æ–‡æœ¬ï¼Œä¸è¦åŒ…å«ä»»ä½•å…¶ä»–å†…å®¹

## Workflow
1. ä»”ç»†é˜…è¯»å¹¶ç†è§£å®Œæ•´çš„æ–‡ç« å†…å®¹
2. è¯†åˆ«æ–‡ç« çš„æ ¸å¿ƒä¸»é¢˜å’Œä¸»è¦è®ºç‚¹
3. ç”¨ç®€æ´çš„è¯­è¨€ç»„ç»‡æ‘˜è¦
4. è¾“å‡ºçº¯æ–‡æœ¬æ‘˜è¦

## Input
æ–‡ç« å†…å®¹ï¼š
<span class="hljs-subst">${content.slice(<span class="hljs-number">0</span>, <span class="hljs-number">3000</span>)}</span>

## Initialization
ä½œä¸º &lt;Role&gt;ï¼Œä¸¥æ ¼éµå®ˆ &lt;Rules&gt;ï¼ŒæŒ‰ç…§ &lt;Workflow&gt; æ’°å†™æ‘˜è¦ã€‚`</span>;
}
</code></pre>
<p>ä½ çœ‹ï¼Œå…¶å®å°±æ˜¯å‘Šè¯‰å¤§æ¨¡å‹ï¼šä½ æ˜¯è°ã€è¦éµå®ˆä»€ä¹ˆè§„åˆ™ã€æŒ‰ä»€ä¹ˆæµç¨‹åšäº‹ã€è¾“å‡ºä»€ä¹ˆæ ¼å¼ã€‚æŠŠè¿™äº›è¯´æ¸…æ¥šäº†ï¼Œå¤§æ¨¡å‹çš„è¾“å‡ºè´¨é‡ä¼šå¥½å¾ˆå¤šã€‚</p>
<hr/>
<h2 data-id="heading-3">AI Copilotï¼šç¼–è¾‘å™¨é‡Œçš„æ™ºèƒ½è¡¥å…¨</h2>
<p>è¿™ä¸ªåŠŸèƒ½æ˜¯æˆ‘è§‰å¾—æœ€æœ‰æ„æ€çš„ä¸€ä¸ªï¼Œæ•ˆæœç±»ä¼¼ GitHub Copilot æˆ–è€… Cursorï¼Œåœ¨ä½ å†™æ–‡ç« çš„æ—¶å€™å®æ—¶ç»™ä½ è¡¥å…¨å»ºè®®ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/08670e6f6784457aa015edff46d14265~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU3ByaW5nTGFtZW50:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768652174&amp;x-signature=5mD3zBJ0%2FZxDFf5KeKURbqUf4sc%3D" alt="AIæ–‡ç« æ–°å»ºå’Œç¼–è¾‘é¡µ.png" loading="lazy"/></p>
<h3 data-id="heading-4">å®ç°æ€è·¯</h3>
<p>è¯´ç©¿äº†ä¹Ÿä¸å¤æ‚ï¼š<strong>æŠŠæ–‡ç« ä¸Šä¸‹æ–‡ + Prompt ä¸¢ç»™ LLMï¼Œè®©å®ƒå¸®ä½ ç»­å†™</strong>ã€‚</p>
<p>å…·ä½“æµç¨‹æ˜¯è¿™æ ·çš„ï¼š</p>
<ol>
<li>ç”¨æˆ·åœ¨ç¼–è¾‘å™¨é‡Œæ‰“å­—</li>
<li>æˆ‘æå–å…‰æ ‡å‰ 500 ä¸ªå­—ç¬¦ä½œä¸ºä¸Šä¸‹æ–‡</li>
<li>æ„é€ ä¸€ä¸ª Promptï¼Œå¤§æ„æ˜¯ã€Œæ ¹æ®ä¸Šä¸‹æ–‡ï¼Œç»­å†™ 5-30 ä¸ªå­—ã€</li>
<li>è°ƒ Kimi API æ‹¿åˆ°è¡¥å…¨å»ºè®®</li>
<li>æŠŠå»ºè®®ä»¥ç°è‰²æ–œä½“æ˜¾ç¤ºåœ¨å…‰æ ‡åé¢</li>
<li>ç”¨æˆ·æŒ‰ Tab æ¥å—ï¼ŒæŒ‰ Esc å–æ¶ˆ</li>
</ol>
<h3 data-id="heading-5">æŠ€æœ¯éš¾ç‚¹</h3>
<p>è¿™ä¸ªåŠŸèƒ½çœ‹èµ·æ¥ç®€å•ï¼Œä½†å®é™…åšèµ·æ¥æœ‰å‡ ä¸ªå‘ï¼š</p>
<p><strong>1. éä¾µå…¥å¼æ˜¾ç¤º</strong></p>
<p>è¡¥å…¨å»ºè®®ä¸èƒ½ç›´æ¥å†™å…¥æ–‡æ¡£ï¼Œåªèƒ½åœ¨è§†å›¾å±‚æ˜¾ç¤ºã€‚</p>
<p>æˆ‘ä¸€å¼€å§‹æƒ³çš„å°±æ˜¯ç”¨æ ·å¼æ¥å®ç°â€”â€”åœ¨å…‰æ ‡ä½ç½®å åŠ ä¸€ä¸ªç°è‰²æ–œä½“çš„æ–‡æœ¬ï¼Œçœ‹èµ·æ¥åƒæ˜¯è¡¥å…¨å»ºè®®ï¼Œä½†å®é™…ä¸Šä¸æ˜¯æ–‡æ¡£çš„ä¸€éƒ¨åˆ†ã€‚è¿™ä¸ªæ€è·¯æ˜¯å¯¹çš„ï¼Œå…³é”®æ˜¯æ€ä¹ˆå®ç°ã€‚</p>
<p>å‚è€ƒäº† VSCode çš„åšæ³•ã€‚VSCode çš„ AI è¡¥å…¨ï¼ˆGitHub Copilotï¼‰ç”¨çš„æ˜¯ã€Œè™šæ‹Ÿæ–‡æœ¬ã€æœºåˆ¶ï¼š<strong>è¡¥å…¨å»ºè®®åªåœ¨è§†å›¾å±‚æ˜¾ç¤ºï¼Œä¸å†™å…¥æ–‡æ¡£æ¨¡å‹</strong>ã€‚åªæœ‰ç”¨æˆ·æŒ‰ Tab ç¡®è®¤åï¼Œæ‰çœŸæ­£å†™å…¥ã€‚</p>
<p>æˆ‘ç”¨çš„ç¼–è¾‘å™¨æ˜¯ Tiptapï¼ˆåŸºäº ProseMirrorï¼‰ï¼Œåˆšå¥½æœ‰ç±»ä¼¼çš„æœºåˆ¶å« Decorationã€‚å®ƒå¯ä»¥åœ¨è§†å›¾å±‚å åŠ æ˜¾ç¤ºå†…å®¹ï¼Œä¸å½±å“æ–‡æ¡£ç»“æ„ï¼Œæ­£å¥½ç¬¦åˆæˆ‘çš„éœ€æ±‚ã€‚</p>
<p><strong>2. é˜²æŠ–</strong></p>
<p>ç”¨æˆ·æ‰“å­—å¾ˆå¿«çš„æ—¶å€™ï¼Œä¸èƒ½æ¯æ•²ä¸€ä¸ªå­—å°±è°ƒä¸€æ¬¡ APIï¼Œé‚£æ ·å¤ªæµªè´¹äº†ã€‚æˆ‘è®¾äº† 500ms çš„é˜²æŠ–ï¼Œç”¨æˆ·åœä¸‹æ¥åŠç§’é’Ÿæ‰è§¦å‘è¡¥å…¨è¯·æ±‚ã€‚</p>
<p><strong>3. å¼‚æ­¥ç«æ€</strong></p>
<p>ç”¨æˆ·å¯èƒ½åœ¨ API è¿”å›ä¹‹å‰åˆç»§ç»­æ‰“å­—äº†ï¼Œè¿™æ—¶å€™å…‰æ ‡ä½ç½®å·²ç»å˜äº†ã€‚å¦‚æœç›´æ¥æŠŠè¡¥å…¨å»ºè®®æ˜¾ç¤ºå‡ºæ¥ï¼Œä½ç½®å°±å¯¹ä¸ä¸Šäº†ã€‚</p>
<p>æˆ‘çš„åšæ³•æ˜¯åŒé‡ä½ç½®æ ¡éªŒï¼šå‘è¯·æ±‚å‰è®°å½•å…‰æ ‡ä½ç½®ï¼ŒAPI è¿”å›åå†æ ¡éªŒä¸€æ¬¡ï¼Œä½ç½®å˜äº†å°±ä¸æ˜¾ç¤ºã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ç¬¬ä¸€æ¬¡æ ¡éªŒï¼šé˜²æŠ–å›è°ƒæ‰§è¡Œæ—¶</span>
<span class="hljs-keyword">const</span> currentState = extension.<span class="hljs-property">editor</span>.<span class="hljs-property">state</span>;
<span class="hljs-keyword">if</span> (currentSelection.<span class="hljs-property">from</span> !== currentFrom) {
  <span class="hljs-keyword">return</span>; <span class="hljs-comment">// ä½ç½®å·²æ”¹å˜ï¼Œä¸¢å¼ƒè¯·æ±‚</span>
}

<span class="hljs-comment">// è°ƒç”¨ AI API...</span>

<span class="hljs-comment">// ç¬¬äºŒæ¬¡æ ¡éªŒï¼šAPI è¿”å›å</span>
<span class="hljs-keyword">const</span> latestState = extension.<span class="hljs-property">editor</span>.<span class="hljs-property">state</span>;
<span class="hljs-keyword">if</span> (latestState.<span class="hljs-property">selection</span>.<span class="hljs-property">from</span> === currentFrom) {
  <span class="hljs-comment">// ä½ç½®ä»ç„¶ä¸€è‡´ï¼Œæ‰æ›´æ–°çŠ¶æ€</span>
}
</code></pre>
<p><strong>4. ProseMirror æ’ä»¶</strong></p>
<p>ç¼–è¾‘å™¨ç”¨çš„æ˜¯ Tiptapï¼ˆåŸºäº ProseMirrorï¼‰ï¼Œè¡¥å…¨å»ºè®®çš„æ˜¾ç¤ºç”¨çš„æ˜¯ Decorationï¼Œä¸ä¼šå½±å“æ–‡æ¡£ç»“æ„ï¼Œåªæ˜¯è§†è§‰ä¸Šçš„è£…é¥°ã€‚</p>
<p>æ ¸å¿ƒä»£ç å¤§æ¦‚é•¿è¿™æ ·ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// åˆ›å»ºè¡¥å…¨å»ºè®®çš„è§†è§‰è£…é¥°</span>
<span class="hljs-keyword">const</span> widget = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">"span"</span>);
widget.<span class="hljs-property">className</span> = <span class="hljs-string">"ai-completion-suggestion"</span>;
widget.<span class="hljs-property">style</span>.<span class="hljs-property">cssText</span> =
  <span class="hljs-string">"color: #9ca3af; "</span> + <span class="hljs-comment">// ç°è‰²</span>
  <span class="hljs-string">"font-style: italic; "</span> + <span class="hljs-comment">// æ–œä½“</span>
  <span class="hljs-string">"pointer-events: none; "</span> + <span class="hljs-comment">// ä¸æ‹¦æˆªé¼ æ ‡</span>
  <span class="hljs-string">"user-select: none;"</span>; <span class="hljs-comment">// ä¸å¯é€‰ä¸­</span>

widget.<span class="hljs-property">textContent</span> = suggestion;

<span class="hljs-comment">// åœ¨å…‰æ ‡ä½ç½®æ˜¾ç¤º</span>
<span class="hljs-keyword">const</span> decoration = <span class="hljs-title class_">Decoration</span>.<span class="hljs-title function_">widget</span>(position, widget, {
  <span class="hljs-attr">side</span>: <span class="hljs-number">1</span>, <span class="hljs-comment">// å…‰æ ‡å</span>
  <span class="hljs-attr">ignoreSelection</span>: <span class="hljs-literal">true</span>,
});
</code></pre>
<hr/>
<h2 data-id="heading-6">RAGï¼šè®© AI åŸºäºä½ çš„å†…å®¹å›ç­”é—®é¢˜</h2>
<p>RAG æ˜¯è¿™ä¸ªé¡¹ç›®é‡Œæˆ‘èŠ±æ—¶é—´æœ€å¤šçš„åŠŸèƒ½ã€‚</p>
<h3 data-id="heading-7">å…ˆèŠèŠå‘é‡æ•°æ®åº“</h3>
<p>åœ¨è®² RAG ä¹‹å‰ï¼Œå¾—å…ˆè¯´è¯´å‘é‡æ•°æ®åº“æ˜¯ä»€ä¹ˆã€‚</p>
<p>æˆ‘ä»¬å¹³æ—¶ç”¨çš„æ•°æ®åº“ï¼Œæ¯”å¦‚ MySQLã€MongoDBï¼Œå­˜çš„éƒ½æ˜¯ç»“æ„åŒ–æ•°æ®æˆ–æ–‡æ¡£ã€‚æŸ¥è¯¢çš„æ—¶å€™ç”¨çš„æ˜¯ç²¾ç¡®åŒ¹é…æˆ–è€…å…³é”®è¯æœç´¢ã€‚</p>
<p>ä½† AI é¢†åŸŸæœ‰ä¸ªé—®é¢˜ï¼šæ€ä¹ˆæ‰¾åˆ°ã€Œè¯­ä¹‰ç›¸ä¼¼ã€çš„å†…å®¹ï¼Ÿæ¯”å¦‚ã€Œå¦‚ä½•å†™å¥½ Promptã€å’Œã€ŒPrompt å·¥ç¨‹æŠ€å·§ã€ï¼Œè¿™ä¸¤å¥è¯å…³é”®è¯ä¸ä¸€æ ·ï¼Œä½†æ„æ€å¾ˆæ¥è¿‘ã€‚ä¼ ç»Ÿæ•°æ®åº“æä¸å®šè¿™ä¸ªã€‚</p>
<p>å‘é‡æ•°æ®åº“å°±æ˜¯ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ã€‚å®ƒçš„æ€è·¯æ˜¯ï¼š</p>
<ol>
<li>æŠŠæ–‡æœ¬è½¬æˆä¸€ä¸²æ•°å­—ï¼ˆå‘é‡ï¼‰ï¼Œè¿™ä¸ªè¿‡ç¨‹å« Embedding</li>
<li>è¯­ä¹‰ç›¸ä¼¼çš„æ–‡æœ¬ï¼Œè½¬å‡ºæ¥çš„å‘é‡ä¹Ÿç›¸ä¼¼</li>
<li>æŸ¥è¯¢çš„æ—¶å€™ï¼ŒæŠŠé—®é¢˜ä¹Ÿè½¬æˆå‘é‡ï¼Œç„¶åæ‰¾æœ€ç›¸ä¼¼çš„å‡ ä¸ª</li>
</ol>
<p>å¸¸è§çš„å‘é‡æ•°æ®åº“æœ‰ Pineconeã€Milvusã€Chroma ç­‰ã€‚æˆ‘ç”¨çš„æ˜¯ Chromaï¼Œå¼€æºå…è´¹ï¼Œè½»é‡å¥½ç”¨ã€‚</p>
<h3 data-id="heading-8">ä¸ºä»€ä¹ˆéœ€è¦ RAGï¼Ÿ</h3>
<p>å¤§æ¨¡å‹è™½ç„¶å¾ˆèªæ˜ï¼Œä½†å®ƒä¸çŸ¥é“ä½ åšå®¢é‡Œå†™äº†ä»€ä¹ˆã€‚ä½ é—®å®ƒã€Œæˆ‘ä¹‹å‰å†™çš„é‚£ç¯‡å…³äº Prompt çš„æ–‡ç« è®²äº†ä»€ä¹ˆã€ï¼Œå®ƒåªèƒ½ççŒœã€‚</p>
<p>è¿™æ˜¯å› ä¸ºå¤§æ¨¡å‹çš„çŸ¥è¯†æœ‰ä¸¤ä¸ªé—®é¢˜ï¼š</p>
<ol>
<li><strong>çŸ¥è¯†ä¸æ–°</strong>ï¼šè®­ç»ƒæ•°æ®æœ‰æˆªæ­¢æ—¥æœŸï¼Œä¸çŸ¥é“æœ€æ–°çš„äº‹</li>
<li><strong>çŸ¥è¯†ä¸å…¨</strong>ï¼šä¸çŸ¥é“ä½ çš„ç§æœ‰å†…å®¹</li>
</ol>
<p>RAGï¼ˆRetrieval-Augmented Generationï¼Œæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰å°±æ˜¯ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ç®€å•è¯´å°±æ˜¯ç»™å¤§æ¨¡å‹ã€Œå¼€å·è€ƒè¯•ã€ï¼šå…ˆä»ä½ çš„å†…å®¹é‡Œæ£€ç´¢ç›¸å…³ä¿¡æ¯ï¼Œå†è®©å¤§æ¨¡å‹åŸºäºè¿™äº›ä¿¡æ¯å›ç­”ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d4ff90066e064a9c8f9c9ec7737748e3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU3ByaW5nTGFtZW50:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768652174&amp;x-signature=%2F5rNxF2KN8BO3o%2FhoGLG2EbdZuc%3D" alt="cover.gif" loading="lazy"/></p>
<h3 data-id="heading-9">æˆ‘çš„å®ç°æ€è·¯</h3>
<p>æ•´ä¸ªæµç¨‹åˆ†ä¸¤éƒ¨åˆ†ï¼š</p>
<p><strong>ç¦»çº¿ç´¢å¼•ï¼ˆæŠŠæ–‡ç« å­˜èµ·æ¥ï¼‰</strong></p>
<ol>
<li>æŠŠæ–‡ç« åˆ‡æˆå°å—ï¼ˆè¯­ä¹‰åˆ†å—ï¼‰</li>
<li>ç”¨ Ollama æŠŠæ¯ä¸ªå—è½¬æˆå‘é‡ï¼ˆEmbeddingï¼‰</li>
<li>æŠŠå‘é‡å­˜åˆ° ChromaDB</li>
</ol>
<p><strong>åœ¨çº¿æ£€ç´¢ï¼ˆç”¨æˆ·æé—®æ—¶ï¼‰</strong></p>
<ol>
<li>æŠŠç”¨æˆ·çš„é—®é¢˜ä¹Ÿè½¬æˆå‘é‡</li>
<li>åœ¨ ChromaDB é‡Œæ‰¾æœ€ç›¸ä¼¼çš„å‡ ä¸ªå—</li>
<li>æŠŠè¿™äº›å—ä½œä¸ºä¸Šä¸‹æ–‡ï¼Œæ„é€  Prompt</li>
<li>è°ƒ Kimi API ç”Ÿæˆå›ç­”</li>
</ol>
<h3 data-id="heading-10">åˆ†å—çš„å‘</h3>
<p>åˆ†å—è¿™ä¸€æ­¥è¸©äº†ä¸å°‘å‘ã€‚</p>
<p>ä¸€å¼€å§‹æˆ‘æƒ³ç®€å•ç‚¹ï¼ŒæŒ‰å›ºå®šå­—ç¬¦æ•°åˆ‡ï¼Œæ¯”å¦‚æ¯ 500 å­—ä¸€å—ã€‚ç»“æœå‘ç°å¾ˆå¤šé—®é¢˜ï¼šå¥å­è¢«æˆªæ–­ã€æ®µè½è¢«åˆ†å‰²ã€æ£€ç´¢æ—¶åŒ¹é…åˆ°ä¸å®Œæ•´çš„ç‰‡æ®µã€‚</p>
<p>åæ¥æ”¹æˆäº†è¯­ä¹‰åˆ†å—ï¼ŒæŒ‰ä¼˜å…ˆçº§ï¼š</p>
<ol>
<li>å…ˆæŒ‰æ®µè½åˆ†ï¼ˆ<code>\n\n</code>ï¼‰</li>
<li>æ®µè½å¤ªé•¿å°±æŒ‰å¥å­åˆ†ï¼ˆ<code>ã€‚ï¼ï¼Ÿ</code>ï¼‰</li>
<li>å®åœ¨ä¸è¡Œæ‰ç¡¬åˆ‡</li>
</ol>
<p>è¿˜æœ‰ä¸€ä¸ªå‘æ˜¯ Ollama çš„ nomic-embed-text æ¨¡å‹æœ‰ 800 å­—ç¬¦çš„é™åˆ¶ã€‚è¶…è¿‡è¿™ä¸ªé•¿åº¦å°±æŠ¥é”™ã€‚</p>
<p>æˆ‘çš„å¤„ç†æ–¹å¼æ˜¯ï¼šå¦‚æœä¸€ä¸ªå—è¶…è¿‡ 800 å­—ç¬¦ï¼Œå°±æŠŠå®ƒåˆ‡æˆå¤šä¸ªå­å—ï¼Œæ¯ä¸ªå­å—å•ç‹¬ç”Ÿæˆå‘é‡ï¼Œå•ç‹¬å­˜å‚¨ã€‚è¿™æ ·è™½ç„¶éº»çƒ¦ç‚¹ï¼Œä½†ä¸ä¼šä¸¢ä¿¡æ¯ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// è¯­ä¹‰åˆ†å—çš„æ ¸å¿ƒé€»è¾‘</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">chunkPost</span>(<span class="hljs-params">content: <span class="hljs-built_in">string</span>, options = {}</span>) {
  <span class="hljs-keyword">const</span> maxChars = options.<span class="hljs-property">maxChars</span> || <span class="hljs-number">800</span>; <span class="hljs-comment">// Ollama ç¡¬é™åˆ¶</span>
  <span class="hljs-keyword">const</span> chunks = [];

  <span class="hljs-comment">// æŒ‰æ®µè½åˆ†å‰²</span>
  <span class="hljs-keyword">const</span> paragraphs = content.<span class="hljs-title function_">split</span>(<span class="hljs-regexp">/\n\n+/</span>).<span class="hljs-title function_">filter</span>(<span class="hljs-function">(<span class="hljs-params">p</span>) =&gt;</span> p.<span class="hljs-title function_">trim</span>());

  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> para <span class="hljs-keyword">of</span> paragraphs) {
    <span class="hljs-keyword">if</span> (para.<span class="hljs-property">length</span> &gt; maxChars) {
      <span class="hljs-comment">// æ®µè½å¤ªé•¿ï¼ŒæŒ‰å¥å­åˆ†å‰²</span>
      <span class="hljs-title function_">splitBySentence</span>(para, chunks);
    } <span class="hljs-keyword">else</span> {
      chunks.<span class="hljs-title function_">push</span>(para);
    }
  }

  <span class="hljs-keyword">return</span> chunks;
}
</code></pre>
<hr/>
<h2 data-id="heading-11">æµå¼è¾“å‡ºï¼šæ‰“å­—æœºæ•ˆæœ</h2>
<p>å¦‚æœä½ ç”¨è¿‡ ChatGPTï¼Œåº”è¯¥å¯¹é‚£ä¸ªæ‰“å­—æœºæ•ˆæœæœ‰å°è±¡ã€‚AI çš„å›ç­”ä¸æ˜¯ä¸€ä¸‹å­å…¨å‡ºæ¥ï¼Œè€Œæ˜¯ä¸€ä¸ªå­—ä¸€ä¸ªå­—è¹¦å‡ºæ¥çš„ã€‚</p>
<p>è¿™ä¸ªæ•ˆæœä¸åªæ˜¯å¥½çœ‹ï¼Œæ›´é‡è¦çš„æ˜¯ç”¨æˆ·ä½“éªŒã€‚å¦‚æœç­‰ AI ç”Ÿæˆå®Œå†è¿”å›ï¼Œç”¨æˆ·å¯èƒ½è¦å¹²ç­‰å¥½å‡ ç§’ï¼Œä½“éªŒå¾ˆå·®ã€‚æµå¼è¾“å‡ºè®©ç”¨æˆ·ç«‹åˆ»çœ‹åˆ°åé¦ˆï¼Œæ„Ÿè§‰å“åº”æ›´å¿«ã€‚</p>
<h3 data-id="heading-12">å®ç°æ€è·¯</h3>
<p>æµå¼è¾“å‡ºçš„æ ¸å¿ƒæ˜¯ <strong>SSEï¼ˆServer-Sent Eventsï¼‰</strong>ã€‚</p>
<p>ä¼ ç»Ÿçš„ HTTP è¯·æ±‚æ˜¯ï¼šå‘è¯·æ±‚ â†’ ç­‰å¾… â†’ æ”¶åˆ°å®Œæ•´å“åº”ã€‚</p>
<p>SSE æ˜¯ï¼šå‘è¯·æ±‚ â†’ ä¿æŒè¿æ¥ â†’ æœåŠ¡å™¨æŒç»­æ¨é€æ•°æ® â†’ æœ€åå…³é—­è¿æ¥ã€‚</p>
<p><strong>ä¸€ä¸ªè¯·æ±‚ï¼Œå¤šæ¬¡æ¨é€</strong>ã€‚</p>
<p>åç«¯ä»£ç å¤§æ¦‚æ˜¯è¿™æ ·ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// åˆ›å»º SSE æµ</span>
<span class="hljs-keyword">const</span> stream = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ReadableStream</span>({
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">start</span>(<span class="hljs-params">controller</span>) {
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">sendEvent</span> = (<span class="hljs-params"><span class="hljs-keyword">type</span>, data</span>) =&gt; {
      <span class="hljs-keyword">const</span> message = <span class="hljs-string">`event: <span class="hljs-subst">${<span class="hljs-keyword">type</span>}</span>\ndata: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(data)}</span>\n\n`</span>;
      controller.<span class="hljs-title function_">enqueue</span>(encoder.<span class="hljs-title function_">encode</span>(message));
    };

    <span class="hljs-comment">// è°ƒç”¨ Kimi APIï¼Œæµå¼è¿”å›</span>
    <span class="hljs-keyword">await</span> aiClient.<span class="hljs-title function_">chatStream</span>(messages, {}, <span class="hljs-function">(<span class="hljs-params">chunk</span>) =&gt;</span> {
      <span class="hljs-comment">// æ¯æ”¶åˆ°ä¸€ä¸ªæ–‡æœ¬å—ï¼Œå°±æ¨é€ç»™å‰ç«¯</span>
      <span class="hljs-title function_">sendEvent</span>(<span class="hljs-string">"chunk"</span>, { chunk });
    });

    <span class="hljs-comment">// å®Œæˆåå…³é—­è¿æ¥</span>
    <span class="hljs-title function_">sendEvent</span>(<span class="hljs-string">"complete"</span>, { <span class="hljs-attr">done</span>: <span class="hljs-literal">true</span> });
    controller.<span class="hljs-title function_">close</span>();
  },
});

<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Response</span>(stream, {
  <span class="hljs-attr">headers</span>: {
    <span class="hljs-string">"Content-Type"</span>: <span class="hljs-string">"text/event-stream"</span>,
    <span class="hljs-string">"Cache-Control"</span>: <span class="hljs-string">"no-cache"</span>,
    <span class="hljs-title class_">Connection</span>: <span class="hljs-string">"keep-alive"</span>,
  },
});
</code></pre>
<p>å‰ç«¯ç”¨ <code>fetch</code> + <code>ReadableStream</code> è¯»å–ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">"/api/ai/rag/stream"</span>, {
  <span class="hljs-attr">method</span>: <span class="hljs-string">"POST"</span>,
  <span class="hljs-attr">body</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({ question }),
});

<span class="hljs-keyword">const</span> reader = response.<span class="hljs-property">body</span>.<span class="hljs-title function_">getReader</span>();
<span class="hljs-keyword">const</span> decoder = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TextDecoder</span>();

<span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
  <span class="hljs-keyword">const</span> { done, value } = <span class="hljs-keyword">await</span> reader.<span class="hljs-title function_">read</span>();
  <span class="hljs-keyword">if</span> (done) <span class="hljs-keyword">break</span>;

  <span class="hljs-keyword">const</span> text = decoder.<span class="hljs-title function_">decode</span>(value);
  <span class="hljs-comment">// è§£æ SSE æ ¼å¼ï¼Œæ›´æ–° UI</span>
  <span class="hljs-title function_">parseSSE</span>(text, <span class="hljs-function">(<span class="hljs-params">chunk</span>) =&gt;</span> {
    <span class="hljs-title function_">setContent</span>(<span class="hljs-function">(<span class="hljs-params">prev</span>) =&gt;</span> prev + chunk); <span class="hljs-comment">// è¿½åŠ æ–‡æœ¬ï¼Œå®ç°æ‰“å­—æœºæ•ˆæœ</span>
  });
}
</code></pre>
<hr/>
<h2 data-id="heading-13">å…¶ä»–åŠŸèƒ½</h2>
<p>é™¤äº†ä¸Šé¢è¯´çš„ AI åŠŸèƒ½ï¼Œé¡¹ç›®é‡Œè¿˜æœ‰ä¸€äº›åŸºç¡€åŠŸèƒ½ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/01e041ff153d48a38a3fe15c42861bc9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU3ByaW5nTGFtZW50:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768652174&amp;x-signature=cRS06Y8v%2FEfrjcoNn1fQoNv7yyQ%3D" alt="è¯¦æƒ….png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/85352021003a4626aa3098ca839df6f8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU3ByaW5nTGFtZW50:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768652174&amp;x-signature=7hktTiy%2FNMcPy5lDIRHvUUUAi9c%3D" alt="aboutme.png" loading="lazy"/></p>
<h3 data-id="heading-14">AI ç”Ÿæˆæ ‡é¢˜ã€æ‘˜è¦ã€æ ‡ç­¾</h3>
<p>è¿™äº›éƒ½æ˜¯ã€ŒPrompt + LLMã€çš„å¥—è·¯ã€‚ç»™å¤§æ¨¡å‹æ–‡ç« å†…å®¹ï¼Œè®©å®ƒç”Ÿæˆæ ‡é¢˜/æ‘˜è¦/æ ‡ç­¾ã€‚</p>
<h3 data-id="heading-15">ç›¸å…³æ–‡ç« æ¨è</h3>
<p>ç”¨å½“å‰æ–‡ç« çš„æ ‡é¢˜å’Œæ‘˜è¦ç”Ÿæˆå‘é‡ï¼Œåœ¨ ChromaDB é‡Œæ‰¾æœ€ç›¸ä¼¼çš„å‡ ç¯‡æ–‡ç« ã€‚æ¯”ä¼ ç»Ÿçš„ã€ŒæŒ‰æ ‡ç­¾åŒ¹é…ã€æ›´æ™ºèƒ½ã€‚</p>
<h3 data-id="heading-16">é™çº§æœºåˆ¶</h3>
<p>RAG ä¾èµ– Ollama å’Œ ChromaDBï¼Œè¿™ä¸¤ä¸ªæœåŠ¡æŒ‚äº†æ€ä¹ˆåŠï¼Ÿ</p>
<p>æˆ‘åšäº†é™çº§å¤„ç†ï¼šå¦‚æœ RAG ä¸å¯ç”¨ï¼Œå°±é€€åŒ–æˆçº¯ LLM æ¨¡å¼ã€‚è™½ç„¶å›ç­”è´¨é‡ä¼šå·®ä¸€äº›ï¼Œä½†è‡³å°‘åŠŸèƒ½è¿˜èƒ½ç”¨ã€‚</p>
<hr/>
<h2 data-id="heading-17">å¦‚ä½•è·å– LLM API Key</h2>
<p>è¿™ä¸ªé¡¹ç›®ç”¨çš„æ˜¯ Kimiï¼ˆMoonshot AIï¼‰çš„ APIï¼Œç”³è¯·åœ°å€ï¼š</p>
<p><strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fplatform.moonshot.cn%2F" target="_blank" title="https://platform.moonshot.cn/" ref="nofollow noopener noreferrer">platform.moonshot.cn/</a></strong></p>
<p>æ³¨å†Œåä¼šæœ‰å…è´¹é¢åº¦ï¼Œä¸ªäººå­¦ä¹ å®Œå…¨å¤Ÿç”¨ã€‚</p>
<p>å…¶ä»–å¯é€‰çš„ LLM æœåŠ¡ï¼š</p>
<ul>
<li><strong>DeepSeek</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fplatform.deepseek.com%2F" target="_blank" title="https://platform.deepseek.com/" ref="nofollow noopener noreferrer">platform.deepseek.com/</a></li>
<li><strong>é€šä¹‰åƒé—®</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdashscope.aliyun.com%2F" target="_blank" title="https://dashscope.aliyun.com/" ref="nofollow noopener noreferrer">dashscope.aliyun.com/</a></li>
<li><strong>æ™ºè°± AI</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fopen.bigmodel.cn%2F" target="_blank" title="https://open.bigmodel.cn/" ref="nofollow noopener noreferrer">open.bigmodel.cn/</a></li>
</ul>
<hr/>
<h2 data-id="heading-18">å¿«é€Ÿä¸Šæ‰‹</h2>
<p>é¡¹ç›®å¼€æºåœ¨ GitHubï¼Œæ„Ÿå…´è¶£çš„è¯å¯ä»¥ clone ä¸‹æ¥è·‘ä¸€è·‘ï¼š</p>
<p><strong>GitHub åœ°å€</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fflawlessv%2FSpring-Broken-AI-Blog" target="_blank" title="https://github.com/flawlessv/Spring-Broken-AI-Blog" ref="nofollow noopener noreferrer">github.com/flawlessv/Sâ€¦</a></p>
<p>å¦‚æœè§‰å¾—æœ‰å¸®åŠ©ï¼Œæ¬¢è¿ç»™ä¸ª â­ï¸ Starï¼</p>
<p>è¯¦ç»†çš„å®‰è£…æ­¥éª¤åœ¨ README é‡Œéƒ½æœ‰ï¼Œè¿™é‡Œå°±ä¸å±•å¼€äº†ã€‚ç®€å•è¯´å°±æ˜¯ï¼š</p>
<ol>
<li>å®‰è£… Node.jsã€Ollamaã€ChromaDB</li>
<li>é…ç½® Kimi API Key</li>
<li><code>npm install</code> + <code>npm run dev</code></li>
</ol>
<hr/>
<h2 data-id="heading-19">æ€»ç»“</h2>
<p>åšå®Œè¿™ä¸ªé¡¹ç›®ï¼Œæˆ‘æœ€å¤§çš„æ„Ÿå—æ˜¯ï¼š<strong>å¤§æ¨¡å‹åº”ç”¨å¼€å‘æ²¡æœ‰æƒ³è±¡ä¸­é‚£ä¹ˆéš¾</strong>ã€‚</p>
<p>å¾ˆå¤šåŠŸèƒ½çš„æœ¬è´¨éƒ½æ˜¯ã€ŒPrompt + è°ƒ APIã€ï¼Œå…³é”®æ˜¯æŠŠ Prompt å†™å¥½ï¼ŒæŠŠæµç¨‹ç†æ¸…æ¥šã€‚</p>
<p>é€šè¿‡è¿™ä¸ªé¡¹ç›®ï¼Œä½ å¯ä»¥å­¦åˆ°ï¼š</p>
<ul>
<li>Next.js å…¨æ ˆå¼€å‘ï¼ˆå‰ç«¯ + åç«¯ + æ•°æ®åº“ï¼‰</li>
<li>Prompt å·¥ç¨‹ï¼ˆç»“æ„åŒ– Promptã€è§’è‰²è®¾å®šã€è§„åˆ™çº¦æŸï¼‰</li>
<li>RAG å®ç°ï¼ˆå‘é‡åŒ–ã€è¯­ä¹‰åˆ†å—ã€ç›¸ä¼¼åº¦æ£€ç´¢ï¼‰</li>
<li>æµå¼è¾“å‡ºï¼ˆSSEã€ReadableStreamï¼‰</li>
</ul>
<p>å¦‚æœæƒ³ç»§ç»­æ·±å…¥ï¼Œå¯ä»¥çœ‹çœ‹è¿™äº›æ–¹å‘ï¼š</p>
<ul>
<li><strong>Agent</strong>ï¼šè®© AI è‡ªå·±è§„åˆ’ä»»åŠ¡ã€è°ƒç”¨å·¥å…·</li>
<li><strong>MCP</strong>ï¼šæ¨¡å‹ä¸Šä¸‹æ–‡åè®®ï¼Œç»Ÿä¸€ AI ä¸å¤–éƒ¨ç³»ç»Ÿçš„äº¤äº’</li>
<li><strong>å¾®è°ƒ</strong>ï¼šç”¨è‡ªå·±çš„æ•°æ®è®­ç»ƒæ¨¡å‹</li>
</ul>
<p>å¸Œæœ›è¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©ã€‚æœ‰é—®é¢˜æ¬¢è¿äº¤æµï¼</p>
<h2 data-id="heading-20">é™„å½•ï¼šå‚è€ƒèµ„æ–™</h2>
<p>æœ¬é¡¹ç›®åœ¨å¼€å‘è¿‡ç¨‹ä¸­å‚è€ƒäº†ä»¥ä¸‹ä¼˜ç§€å†…å®¹ï¼š</p>
<ul>
<li><strong>æ ·å¼ç”Ÿæˆ</strong>ï¼š<a href="https://juejin.cn/post/7569777676098814002" target="_blank" title="https://juejin.cn/post/7569777676098814002">å¦‚ä½•ç”¨ Claude Code ç”Ÿæˆé¡¶çº§ UI</a> - é€šè¿‡ STYLE_GUIDE.md å‡å°‘æ ·å¼ä¿¡æ¯ä¸¢å¤±ï¼Œè®© AI ç”Ÿæˆæ›´ç²¾å‡†çš„ UI</li>
<li><strong>Prompt è®¾è®¡</strong>ï¼š<a href="https://juejin.cn/post/7462691800122884136" target="_blank" title="https://juejin.cn/post/7462691800122884136">ç»“æ„åŒ– Prompt è®¾è®¡æŒ‡å—</a> - ç»“æ„åŒ– Prompt çš„å†™æ³•å’Œæœ€ä½³å®è·µ</li>
<li><strong>åšå®¢æ ·å¼</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.ursb.me%2F" target="_blank" title="https://blog.ursb.me/" ref="nofollow noopener noreferrer">Ursb's Blog</a> - åšå®¢æ•´ä½“é£æ ¼å‚è€ƒ</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Web å›¾å½¢åˆæˆæŠ€æœ¯ï¼šBlending ä¸ Porter-Duff Compositing]]></title>    <link>https://juejin.cn/post/7593241698370453540</link>    <guid>https://juejin.cn/post/7593241698370453540</guid>    <pubDate>2026-01-10T13:46:59.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7593241698370453540" data-draft-id="7593252939708317732" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Web å›¾å½¢åˆæˆæŠ€æœ¯ï¼šBlending ä¸ Porter-Duff Compositing"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-10T13:46:59.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ¸©å®‡é£"/> <meta itemprop="url" content="https://juejin.cn/user/4300945219403368"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Web å›¾å½¢åˆæˆæŠ€æœ¯ï¼šBlending ä¸ Porter-Duff Compositing
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4300945219403368/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ¸©å®‡é£
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-10T13:46:59.000Z" title="Sat Jan 10 2026 13:46:59 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    6
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»18åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>Web å›¾å½¢æ¸²æŸ“ä¸­ï¼Œå½“å¤šä¸ªå›¾å±‚é‡å æ—¶ï¼Œéœ€è¦å°†å®ƒä»¬ç»„åˆæˆæœ€ç»ˆæ˜¾ç¤ºçš„å›¾åƒã€‚æœ¬æ–‡åŸºäº <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.w3.org%2FTR%2Fcompositing-1%2F" target="_blank" title="https://www.w3.org/TR/compositing-1/" ref="nofollow noopener noreferrer">W3C Compositing and Blending è§„èŒƒ</a>ï¼Œç³»ç»Ÿè®²è§£ Blending å’Œ Porter-Duff Compositing ä¸¤å¤§æ ¸å¿ƒæŠ€æœ¯ã€‚ä»æ•°å­¦åŸç†åˆ°å®é™…åº”ç”¨ï¼Œæ·±å…¥è§£æ Web å›¾å½¢åˆæˆçš„å®Œæ•´ä½“ç³»ã€‚</p>
<h2 data-id="heading-0">ç¬¦å·ä¸å…¬å¼çº¦å®š</h2>
<p>ç†è§£å›¾å½¢åˆæˆçš„æ•°å­¦å…¬å¼éœ€è¦å…ˆæ˜ç¡®ç¬¦å·çº¦å®šã€‚æœ¬ç« å®šä¹‰æ–‡ä¸­ä½¿ç”¨çš„æ ¸å¿ƒæœ¯è¯­å’Œæ•°å­¦ç¬¦å·ï¼ŒåŒ…æ‹¬é¢œè‰²è¡¨ç¤ºæ–¹å¼ã€Alpha é€šé“å¤„ç†ä»¥åŠåˆæˆè¿‡ç¨‹ä¸­çš„ä¸­é—´ç»“æœã€‚</p>
<h3 data-id="heading-1">æ ¸å¿ƒæœ¯è¯­</h3>
<p><strong>Source</strong> æ˜¯å½“å‰è¦ç»˜åˆ¶çš„å›¾å±‚ï¼Œé€šå¸¸æ˜¯å‰æ™¯å…ƒç´ ã€‚å®ƒåŒ…å«é¢œè‰²ä¿¡æ¯å’Œ Alpha é€šé“ã€‚</p>
<p><strong>Backdrop</strong> æ˜¯ Source åé¢çš„å›¾å±‚å†…å®¹ï¼Œæ˜¯ Source è¦ä¸ä¹‹åˆæˆçš„å¯¹è±¡ã€‚Backdrop æ˜¯ä¹‹å‰æ‰€æœ‰å›¾å±‚åˆæˆçš„ç´¯ç§¯ç»“æœã€‚</p>
<p><strong>Destination</strong> æ˜¯æ¸²æŸ“ç›®æ ‡ï¼Œå³ç”»å¸ƒä¸Šçš„åƒç´ ç¼“å†²åŒºã€‚åˆæˆçš„æœ€ç»ˆç»“æœä¼šå†™å…¥ Destinationã€‚</p>
<p><strong>Alpha é€šé“</strong>è¡¨ç¤ºåƒç´ çš„ä¸é€æ˜åº¦ï¼Œå–å€¼èŒƒå›´ä¸º [0, 1]ã€‚Alpha ä¸º 0 è¡¨ç¤ºå®Œå…¨é€æ˜ï¼ŒAlpha ä¸º 1 è¡¨ç¤ºå®Œå…¨ä¸é€æ˜ã€‚</p>
<h3 data-id="heading-2">é¢„ä¹˜ Alpha ä¸éé¢„ä¹˜ Alpha</h3>
<p>é¢œè‰²å¯ä»¥ç”¨ä¸¤ç§å½¢å¼è¡¨ç¤ºï¼š</p>
<p><strong>éé¢„ä¹˜ Alpha (Non-premultiplied Alpha)</strong> è¡¨ç¤ºé¢œè‰²åˆ†é‡å’Œ Alpha é€šé“ç‹¬ç«‹å­˜å‚¨ã€‚ä¾‹å¦‚ï¼ŒåŠé€æ˜çº¢è‰²è¡¨ç¤ºä¸º <code>(R=1.0, G=0, B=0, Î±=0.5)</code>ï¼Œé¢œè‰²å€¼ä¸å— Alpha å½±å“ã€‚</p>
<p><strong>é¢„ä¹˜ Alpha (Premultiplied Alpha)</strong> è¡¨ç¤ºé¢œè‰²åˆ†é‡å·²ä¹˜ä»¥ Alpha å€¼ã€‚åŒæ ·çš„åŠé€æ˜çº¢è‰²è¡¨ç¤ºä¸º <code>(r=0.5, g=0, b=0, Î±=0.5)</code>ï¼Œå…¶ä¸­ <code>r = R Ã— Î±</code>ã€‚é¢„ä¹˜å½¢å¼åœ¨å›¾å½¢ç¡¬ä»¶ä¸­æ›´é«˜æ•ˆï¼Œç®€åŒ–äº†åˆæˆè¿ç®—ã€‚</p>
<p>ä¸¤ç§å½¢å¼ä¹‹é—´çš„è½¬æ¢ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// éé¢„ä¹˜è½¬é¢„ä¹˜</span>
<span class="hljs-keyword">const</span> cs = <span class="hljs-title class_">Cs</span> * Î±s;
<span class="hljs-keyword">const</span> cb = <span class="hljs-title class_">Cb</span> * Î±b;

<span class="hljs-comment">// é¢„ä¹˜è½¬éé¢„ä¹˜ï¼ˆéœ€å¤„ç† Î± = 0 çš„æƒ…å†µï¼‰</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">Cs</span> = Î±s &gt; <span class="hljs-number">0</span> ? cs / Î±s : <span class="hljs-number">0</span>;
<span class="hljs-keyword">const</span> <span class="hljs-title class_">Cb</span> = Î±b &gt; <span class="hljs-number">0</span> ? cb / Î±b : <span class="hljs-number">0</span>;
</code></pre>
<h3 data-id="heading-3">ç¬¦å·å®šä¹‰</h3>
<p>æœ¬æ–‡ä½¿ç”¨ä»¥ä¸‹ç¬¦å·çº¦å®šï¼š</p>











































































<table><thead><tr><th>ç¬¦å·</th><th>å«ä¹‰</th><th>å–å€¼èŒƒå›´</th></tr></thead><tbody><tr><td><code>Cs</code></td><td>Source çš„éé¢„ä¹˜é¢œè‰² (R, G, B)</td><td>[0, 1]</td></tr><tr><td><code>Cb</code></td><td>Backdrop çš„éé¢„ä¹˜é¢œè‰² (R, G, B)</td><td>[0, 1]</td></tr><tr><td><code>Cr</code></td><td>Blending åçš„ç»“æœé¢œè‰² (R, G, B)</td><td>[0, 1]</td></tr><tr><td><code>Co</code></td><td>æœ€ç»ˆè¾“å‡ºçš„éé¢„ä¹˜é¢œè‰² (R, G, B)</td><td>[0, 1]</td></tr><tr><td><code>cs</code></td><td>Source çš„é¢„ä¹˜é¢œè‰² (r, g, b)</td><td>[0, 1]</td></tr><tr><td><code>cb</code></td><td>Backdrop çš„é¢„ä¹˜é¢œè‰² (r, g, b)</td><td>[0, 1]</td></tr><tr><td><code>cr</code></td><td>Blending åçš„é¢„ä¹˜é¢œè‰² (r, g, b)</td><td>[0, 1]</td></tr><tr><td><code>co</code></td><td>æœ€ç»ˆè¾“å‡ºçš„é¢„ä¹˜é¢œè‰² (r, g, b)</td><td>[0, 1]</td></tr><tr><td><code>Î±s</code></td><td>Source çš„ Alpha å€¼</td><td>[0, 1]</td></tr><tr><td><code>Î±b</code></td><td>Backdrop çš„ Alpha å€¼</td><td>[0, 1]</td></tr><tr><td><code>Î±o</code></td><td>è¾“å‡ºçš„ Alpha å€¼</td><td>[0, 1]</td></tr><tr><td><code>Fa</code></td><td>Source çš„ Porter-Duff å› å­</td><td>[0, 1]</td></tr><tr><td><code>Fb</code></td><td>Backdrop çš„ Porter-Duff å› å­</td><td>[0, 1]</td></tr></tbody></table>
<p>å…³é”®ç¬¦å·è¯´æ˜ï¼š</p>
<ul>
<li><strong>Cr (Result color)</strong>ï¼šBlending é˜¶æ®µè®¡ç®—å‡ºçš„ä¸­é—´ç»“æœé¢œè‰²ã€‚å®ƒæ˜¯ Backdrop é¢œè‰² <code>Cb</code> å’Œ Source é¢œè‰² <code>Cs</code> é€šè¿‡ Blending å‡½æ•°æ··åˆåçš„ç»“æœï¼Œä¼šåœ¨ Porter-Duff Compositing é˜¶æ®µä½œä¸ºæ–°çš„ Source é¢œè‰²ä½¿ç”¨ã€‚</li>
<li><strong>Fa å’Œ Fb</strong>ï¼šPorter-Duff Compositing çš„æ§åˆ¶å› å­ï¼Œå†³å®š Source å’Œ Backdrop å¯¹æœ€ç»ˆç»“æœçš„è´¡çŒ®ç¨‹åº¦ã€‚</li>
</ul>
<h3 data-id="heading-4">é¢œè‰²å€¼è£å‰ª</h3>
<p>åˆæˆè®¡ç®—è¿‡ç¨‹ä¸­ï¼Œé¢œè‰²å€¼å¯èƒ½è¶…å‡º [0, 1] èŒƒå›´ã€‚éœ€è¦è¿›è¡Œè£å‰ª (clamp) å¤„ç†ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// è£å‰ªåˆ°æœ‰æ•ˆèŒƒå›´</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">clamp</span> = (<span class="hljs-params">value</span>) =&gt; <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(<span class="hljs-number">0</span>, <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(<span class="hljs-number">1</span>, value));

<span class="hljs-title class_">Co</span> = <span class="hljs-title function_">clamp</span>(<span class="hljs-title class_">Co</span>);
Î±o = <span class="hljs-title function_">clamp</span>(Î±o);
</code></pre>
<p>æŸäº› Blending æ¨¡å¼ï¼ˆå¦‚ <code>color-dodge</code>ï¼‰å¯èƒ½äº§ç”Ÿå¤§äº 1 çš„å€¼ï¼Œè£å‰ªç¡®ä¿æœ€ç»ˆè¾“å‡ºçš„é¢œè‰²åœ¨æ˜¾ç¤ºè®¾å¤‡çš„æœ‰æ•ˆèŒƒå›´å†…ã€‚</p>
<h2 data-id="heading-5">åˆæˆæ¨¡å‹</h2>
<p>å›¾å½¢åˆæˆæ˜¯ä¸€ä¸ªä¸¥æ ¼çš„ä¸¤é˜¶æ®µæµç¨‹ï¼šå…ˆè¿›è¡Œ Blending è®¡ç®—é‡å åŒºåŸŸçš„é¢œè‰²æ··åˆï¼Œå†ä½¿ç”¨ Alpha åˆæˆå…¬å¼å¤„ç† Alpha é€šé“çš„å½±å“ã€‚æœ¬ç« ä»‹ç»é€šç”¨åˆæˆå…¬å¼åŠå…¶ç‰¹ä¾‹ Simple Alpha Compositingã€‚</p>
<h3 data-id="heading-6">é€šç”¨åˆæˆå…¬å¼</h3>
<p>å®Œæ•´çš„åˆæˆæµç¨‹ä¸¥æ ¼æŒ‰ç…§ä»¥ä¸‹é¡ºåºæ‰§è¡Œï¼š</p>
<pre><code class="hljs language-ini" lang="ini">è¾“å…¥: Source (Cs, Î±s), Backdrop (Cb, Î±b)
     â†“
<span class="hljs-section">[1. Blending]</span>
     <span class="hljs-attr">Cr</span> = (<span class="hljs-number">1</span> - Î±b) Ã— Cs + Î±b Ã— B(Cb, Cs)
     â†“
<span class="hljs-section">[2. Alpha Compositing]</span>
     <span class="hljs-attr">co</span> = Fa Ã— (Cr Ã— Î±s) + Fb Ã— (Cb Ã— Î±b)
     Î±<span class="hljs-attr">o</span> = Fa Ã— Î±s + Fb Ã— Î±b
     â†“
è¾“å‡º: Result (Co, Î±o)
</code></pre>
<p><strong>ç¬¬ 1 æ­¥ï¼šBlending</strong></p>
<p>è®¡ç®—æ··åˆåçš„é¢œè‰² <code>Cr</code>ï¼Œå¯¹æ¯ä¸ªé¢œè‰²é€šé“ï¼ˆR/G/Bï¼‰åº”ç”¨ Blending å‡½æ•° <code>B(Cb, Cs)</code>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// éé¢„ä¹˜å½¢å¼</span>
<span class="hljs-title class_">Cr</span> = (<span class="hljs-number">1</span> - Î±b) Ã— <span class="hljs-title class_">Cs</span> + Î±b Ã— <span class="hljs-title function_">B</span>(<span class="hljs-title class_">Cb</span>, <span class="hljs-title class_">Cs</span>);
</code></pre>
<p><code>B(Cb, Cs)</code> å®šä¹‰äº† Backdrop å’Œ Source é¢œè‰²çš„æ··åˆæ–¹å¼ã€‚ä¸åŒçš„ Blending æ¨¡å¼å¯¹åº”ä¸åŒçš„ <code>B</code> å‡½æ•°å®ç°ï¼š</p>
<ul>
<li><code>normal</code>ï¼š<code>B(Cb, Cs) = Cs</code>ï¼ˆæ— æ··åˆï¼Œä¿æŒ Source åŸè‰²ï¼‰</li>
<li><code>multiply</code>ï¼š<code>B(Cb, Cs) = Cb Ã— Cs</code>ï¼ˆæ­£ç‰‡å åº•ï¼‰</li>
<li><code>screen</code>ï¼š<code>B(Cb, Cs) = Cb + Cs - Cb Ã— Cs</code>ï¼ˆæ»¤è‰²ï¼‰</li>
</ul>
<p><code>Î±b</code> æ§åˆ¶ Blending çš„å½±å“ç¨‹åº¦ï¼šå½“ Backdrop é€æ˜ï¼ˆÎ±b=0ï¼‰æ—¶ä¿æŒ Source åŸè‰²ï¼Œå½“ Backdrop ä¸é€æ˜ï¼ˆÎ±b=1ï¼‰æ—¶å®Œå…¨æ··åˆã€‚</p>
<p><strong>ç¬¬ 2 æ­¥ï¼šAlpha Compositing</strong></p>
<p>å°† <code>Cr</code> ä½œä¸ºæ–°çš„ Source é¢œè‰²ï¼Œä½¿ç”¨å› å­ <code>Fa</code> å’Œ <code>Fb</code> æ§åˆ¶ Source å’Œ Backdrop çš„è´¡çŒ®ç¨‹åº¦ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// é¢„ä¹˜å½¢å¼</span>
co = <span class="hljs-title class_">Fa</span> Ã— (<span class="hljs-title class_">Cr</span> Ã— Î±s) + <span class="hljs-title class_">Fb</span> Ã— (<span class="hljs-title class_">Cb</span> Ã— Î±b);
Î±o = <span class="hljs-title class_">Fa</span> Ã— Î±s + <span class="hljs-title class_">Fb</span> Ã— Î±b;
</code></pre>
<p><code>Fa</code> å’Œ <code>Fb</code> æ˜¯åˆæˆå› å­ï¼Œé€šè¿‡ä¸åŒçš„å–å€¼å®ç°ä¸åŒçš„åˆæˆæ•ˆæœã€‚ä¾‹å¦‚ï¼š</p>
<ul>
<li><code>Fa = 1, Fb = 1 - Î±s</code>ï¼šSource è¦†ç›– Backdropï¼ˆsource-overï¼‰</li>
<li><code>Fa = Î±b, Fb = 0</code>ï¼šSource è£å‰ªåˆ° Backdrop å½¢çŠ¶ï¼ˆsource-inï¼‰</li>
<li><code>Fa = 1 - Î±b, Fb = 1</code>ï¼šBackdrop è¦†ç›– Sourceï¼ˆdestination-overï¼‰</li>
</ul>
<p><strong>åˆå¹¶å…¬å¼</strong></p>
<p>å°†ä¸¤ä¸ªæ­¥éª¤åˆå¹¶ï¼Œå¾—åˆ°å®Œæ•´çš„åˆæˆå…¬å¼ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å®Œæ•´çš„åˆæˆå…¬å¼ï¼ˆé¢„ä¹˜å½¢å¼ï¼‰</span>
co = <span class="hljs-title class_">Fa</span> Ã— <span class="hljs-title function_">B</span>(<span class="hljs-title class_">Cb</span>, <span class="hljs-title class_">Cs</span>) Ã— Î±s Ã— Î±b + <span class="hljs-title class_">Fa</span> Ã— (<span class="hljs-number">1</span> - Î±b) Ã— cs + <span class="hljs-title class_">Fb</span> Ã— cb;
Î±o = <span class="hljs-title class_">Fa</span> Ã— Î±s + <span class="hljs-title class_">Fb</span> Ã— Î±b;
</code></pre>
<p>è¿™ä¸ªå…¬å¼æ¸…æ¥šåœ°å±•ç¤ºäº†ä¸‰éƒ¨åˆ†çš„è´¡çŒ®ï¼š</p>
<ul>
<li><code>Fa Ã— B(Cb, Cs) Ã— Î±s Ã— Î±b</code>ï¼šBlending ç»“æœå¯¹é‡å åŒºåŸŸçš„è´¡çŒ®</li>
<li><code>Fa Ã— (1 - Î±b) Ã— cs</code>ï¼šSource åœ¨ Backdrop é€æ˜åŒºåŸŸçš„è´¡çŒ®</li>
<li><code>Fb Ã— cb</code>ï¼šBackdrop æ ¹æ®åˆæˆå› å­çš„è´¡çŒ®</li>
</ul>
<h3 data-id="heading-7">Simple Alpha Compositing</h3>
<p>Simple Alpha Compositing æ˜¯é€šç”¨å…¬å¼çš„æœ€å¸¸ç”¨ç‰¹ä¾‹ï¼Œå¯¹åº”å‚æ•°ï¼š</p>
<ul>
<li>Blending æ¨¡å¼ï¼š<code>normal</code>ï¼Œå³ <code>B(Cb, Cs) = Cs</code></li>
<li>åˆæˆå› å­ï¼š<code>Fa = 1, Fb = 1 - Î±s</code></li>
</ul>
<p>ä»£å…¥é€šç”¨å…¬å¼å¾—åˆ°ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// é¢„ä¹˜å½¢å¼</span>
co = cs + cb Ã— (<span class="hljs-number">1</span> - Î±s);
Î±o = Î±s + Î±b Ã— (<span class="hljs-number">1</span> - Î±s);
</code></pre>
<p>è¿™å°±æ˜¯é»˜è®¤çš„å›¾å±‚å åŠ æ–¹å¼ï¼ˆsource-overï¼‰ï¼šSource ä»¥å…¶ä¸é€æ˜åº¦è¦†ç›–åœ¨ Backdrop ä¸Šæ–¹ã€‚å½“ Source å®Œå…¨ä¸é€æ˜ï¼ˆÎ±s = 1ï¼‰æ—¶ï¼ŒBackdrop å®Œå…¨è¢«é®ç›–ï¼›å½“ Source å®Œå…¨é€æ˜ï¼ˆÎ±s = 0ï¼‰æ—¶ï¼Œè¾“å‡ºå°±æ˜¯ Backdropã€‚</p>
<p>å…³é”®è¦ç‚¹ï¼š</p>
<ul>
<li>Blending åœ¨å‰ï¼ŒAlpha Compositing åœ¨åï¼Œé¡ºåºä¸å¯é¢ å€’</li>
<li>Blending é€šè¿‡å‡½æ•° <code>B</code> è®¡ç®—é¢œè‰²ï¼ŒAlpha Compositing é€šè¿‡å› å­ <code>Fa</code> å’Œ <code>Fb</code> æ§åˆ¶åŒºåŸŸå’Œ Alpha é€šé“</li>
<li>Simple Alpha Compositing æ˜¯ <code>B=Cs, Fa=1, Fb=1-Î±s</code> çš„ç‰¹ä¾‹</li>
<li>ä¸¤ä¸ªé˜¶æ®µé€šè¿‡ä¸­é—´ç»“æœ <code>Cr</code> è¿æ¥</li>
</ul>
<h2 data-id="heading-8">Porter-Duff Compositing Operators</h2>
<p>Porter-Duff Compositing Operators ç”± Thomas Porter å’Œ Tom Duff åœ¨ 1984 å¹´æå‡ºï¼Œå®šä¹‰äº†é€šè¿‡ Alpha é€šé“æ§åˆ¶å›¾å±‚åˆæˆåŒºåŸŸçš„ä»£æ•°è¿ç®—ä½“ç³»ã€‚æœ¬ç« ä»‹ç» Porter-Duff æ“ä½œç¬¦çš„æ•°å­¦åŸç†ã€13 ç§æ ‡å‡†æ“ä½œç¬¦ä»¥åŠå®ƒä»¬ä¸ Compositing Groups çš„äº¤äº’è¡Œä¸ºã€‚</p>
<h3 data-id="heading-9">æ“ä½œç¬¦åŸç†</h3>
<p>Porter-Duff æ“ä½œç¬¦åŸºäº Alpha é€šé“çš„çº¿æ€§åˆæˆã€‚æ ¸å¿ƒæ€æƒ³æ˜¯é€šè¿‡ä¸¤ä¸ªå› å­ <code>Fa</code> å’Œ <code>Fb</code> æ§åˆ¶ Source å’Œ Backdrop å¯¹æœ€ç»ˆç»“æœçš„è´¡çŒ®ç¨‹åº¦ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">co = <span class="hljs-title class_">Fa</span> Ã— cs + <span class="hljs-title class_">Fb</span> Ã— cb;
Î±o = <span class="hljs-title class_">Fa</span> Ã— Î±s + <span class="hljs-title class_">Fb</span> Ã— Î±b;
</code></pre>
<p>Porter-Duff ç†è®ºå°†ä¸¤å¼ å›¾åƒçš„åƒç´ ç©ºé—´åˆ†ä¸ºå››ä¸ªé€»è¾‘åŒºåŸŸï¼š</p>
<ol>
<li><strong>Source ç‹¬å åŒºåŸŸ</strong>ï¼šSource ä¸é€æ˜ï¼ŒBackdrop é€æ˜ï¼ˆÎ±s &gt; 0, Î±b = 0ï¼‰</li>
<li><strong>Backdrop ç‹¬å åŒºåŸŸ</strong>ï¼šBackdrop ä¸é€æ˜ï¼ŒSource é€æ˜ï¼ˆÎ±s = 0, Î±b &gt; 0ï¼‰</li>
<li><strong>é‡å åŒºåŸŸ</strong>ï¼šä¸¤è€…éƒ½ä¸é€æ˜ï¼ˆÎ±s &gt; 0, Î±b &gt; 0ï¼‰</li>
<li><strong>ç©ºç™½åŒºåŸŸ</strong>ï¼šä¸¤è€…éƒ½é€æ˜ï¼ˆÎ±s = 0, Î±b = 0ï¼‰</li>
</ol>
<p>ä¸ºäº†ç²¾ç¡®æ§åˆ¶è¿™å››ä¸ªåŒºåŸŸï¼Œ<code>Fa</code> å’Œ <code>Fb</code> çš„å–å€¼è¢«é™åˆ¶åœ¨ä¸ Alpha å€¼ç›¸å…³çš„ç¦»æ•£é›†åˆä¸­ï¼š</p>
<pre><code class="hljs language-css" lang="css">Fa âˆˆ {<span class="hljs-number">0</span>, Î±<span class="hljs-selector-tag">b</span>, <span class="hljs-number">1</span> - Î±<span class="hljs-selector-tag">b</span>, <span class="hljs-number">1</span>}
Fb âˆˆ {<span class="hljs-number">0</span>, Î±s, <span class="hljs-number">1</span> - Î±s, <span class="hljs-number">1</span>}
</code></pre>
<p>è¿™ç§é™åˆ¶ç¡®ä¿äº†æ“ä½œç¬¦å…·æœ‰æ˜ç¡®çš„å‡ ä½•æ„ä¹‰ï¼š</p>
<ul>
<li><code>Fa = 0</code>ï¼šSource ä¸è´¡çŒ®</li>
<li><code>Fa = 1</code>ï¼šSource å®Œå…¨è´¡çŒ®</li>
<li><code>Fa = Î±b</code>ï¼šSource ä»…åœ¨ Backdrop å­˜åœ¨çš„åŒºåŸŸè´¡çŒ®</li>
<li><code>Fa = 1 - Î±b</code>ï¼šSource ä»…åœ¨ Backdrop ä¸å­˜åœ¨çš„åŒºåŸŸè´¡çŒ®</li>
</ul>
<p><code>Fb</code> çš„å«ä¹‰ä¸ <code>Fa</code> å¯¹ç§°ã€‚</p>
<h3 data-id="heading-10">13 ç§ Porter-Duff æ“ä½œç¬¦</h3>
<p>ä»æ•°å­¦ä¸Šçœ‹ï¼Œ<code>Fa</code> å’Œ <code>Fb</code> çš„å–å€¼é›†åˆå¯ä»¥äº§ç”Ÿ 4 Ã— 4 = 16 ç§ç»„åˆã€‚W3C è§„èŒƒå®šä¹‰äº†å…¶ä¸­ 13 ç§å…·æœ‰å®é™…æ„ä¹‰çš„æ“ä½œç¬¦ï¼š</p>

























































































<table><thead><tr><th>æ“ä½œç¬¦</th><th>Fa</th><th>Fb</th><th>æ•ˆæœæè¿°</th></tr></thead><tbody><tr><td><code>clear</code></td><td>0</td><td>0</td><td>æ¸…é™¤æ‰€æœ‰å†…å®¹</td></tr><tr><td><code>copy</code></td><td>1</td><td>0</td><td>ä»…æ˜¾ç¤º Source</td></tr><tr><td><code>destination</code></td><td>0</td><td>1</td><td>ä»…æ˜¾ç¤º Backdrop</td></tr><tr><td><code>source-over</code></td><td>1</td><td>1 - Î±s</td><td>Source è¦†ç›– Backdropï¼ˆé»˜è®¤ï¼‰</td></tr><tr><td><code>destination-over</code></td><td>1 - Î±b</td><td>1</td><td>Backdrop è¦†ç›– Source</td></tr><tr><td><code>source-in</code></td><td>Î±b</td><td>0</td><td>Source è£å‰ªåˆ° Backdrop å½¢çŠ¶</td></tr><tr><td><code>destination-in</code></td><td>0</td><td>Î±s</td><td>Backdrop è£å‰ªåˆ° Source å½¢çŠ¶</td></tr><tr><td><code>source-out</code></td><td>1 - Î±b</td><td>0</td><td>Source åœ¨ Backdrop å¤–çš„éƒ¨åˆ†</td></tr><tr><td><code>destination-out</code></td><td>0</td><td>1 - Î±s</td><td>Backdrop åœ¨ Source å¤–çš„éƒ¨åˆ†</td></tr><tr><td><code>source-atop</code></td><td>Î±b</td><td>1 - Î±s</td><td>Source åœ¨ Backdrop ä¸Šæ–¹ï¼ˆé™å®šåœ¨ Backdrop åŒºåŸŸï¼‰</td></tr><tr><td><code>destination-atop</code></td><td>1 - Î±b</td><td>Î±s</td><td>Backdrop åœ¨ Source ä¸Šæ–¹ï¼ˆé™å®šåœ¨ Source åŒºåŸŸï¼‰</td></tr><tr><td><code>xor</code></td><td>1 - Î±b</td><td>1 - Î±s</td><td>ä»…æ˜¾ç¤ºéé‡å åŒºåŸŸ</td></tr><tr><td><code>lighter</code></td><td>1</td><td>1</td><td>ç›¸åŠ ï¼ˆéœ€è¦ clampï¼‰</td></tr></tbody></table>
<p>æœªå®šä¹‰çš„ 3 ç§ç»„åˆï¼ˆ<code>Fa=Î±b, Fb=Î±s</code>ã€<code>Fa=Î±b, Fb=1</code>ã€<code>Fa=1, Fb=Î±s</code>ï¼‰ç¼ºä¹æ˜ç¡®çš„è¯­ä¹‰æˆ–å®é™…åº”ç”¨ä»·å€¼ï¼Œå› æ­¤è¢«æ’é™¤åœ¨è§„èŒƒä¹‹å¤–ã€‚</p>
<p>W3C é€‰æ‹©è¿™ 13 ç§æ“ä½œç¬¦çš„åŸåˆ™æ˜¯ï¼š</p>
<ol>
<li><strong>å®Œå¤‡æ€§</strong>ï¼šè¦†ç›–æ‰€æœ‰å¸¸è§çš„å›¾åƒåˆæˆéœ€æ±‚ï¼ˆè¦†ç›–ã€è£å‰ªã€é®ç½©ã€å¼‚æˆ–ç­‰ï¼‰</li>
<li><strong>å¯¹ç§°æ€§</strong>ï¼šæä¾› Source å’Œ Destination çš„å¯¹ç§°æ“ä½œï¼ˆå¦‚ <code>source-in</code> å¯¹åº” <code>destination-in</code>ï¼‰</li>
<li><strong>è¯­ä¹‰æ¸…æ™°</strong>ï¼šæ¯ä¸ªæ“ä½œç¬¦éƒ½æœ‰æ˜ç¡®çš„è§†è§‰æ•ˆæœå’Œåº”ç”¨åœºæ™¯</li>
</ol>
<h3 data-id="heading-11">å¸¸è§åº”ç”¨åœºæ™¯</h3>
<p><strong>é®ç½©æ•ˆæœ</strong>ï¼šä½¿ç”¨ <code>source-in</code> æˆ– <code>destination-in</code></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> canvas = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">"myCanvas"</span>);
<span class="hljs-keyword">const</span> ctx = canvas.<span class="hljs-title function_">getContext</span>(<span class="hljs-string">"2d"</span>);

<span class="hljs-comment">// ç»˜åˆ¶é®ç½©å½¢çŠ¶ï¼ˆåœ†å½¢ï¼‰</span>
ctx.<span class="hljs-title function_">arc</span>(<span class="hljs-number">100</span>, <span class="hljs-number">100</span>, <span class="hljs-number">50</span>, <span class="hljs-number">0</span>, <span class="hljs-title class_">Math</span>.<span class="hljs-property">PI</span> * <span class="hljs-number">2</span>);
ctx.<span class="hljs-title function_">fill</span>();

<span class="hljs-comment">// ä½¿ç”¨ source-in å°†å›¾åƒè£å‰ªåˆ°åœ†å½¢</span>
ctx.<span class="hljs-property">globalCompositeOperation</span> = <span class="hljs-string">"source-in"</span>;
ctx.<span class="hljs-title function_">drawImage</span>(image, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);
</code></pre>
<p><strong>æ“¦é™¤æ•ˆæœ</strong>ï¼šä½¿ç”¨ <code>destination-out</code></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç»˜åˆ¶åº•å›¾</span>
ctx.<span class="hljs-title function_">drawImage</span>(image, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);

<span class="hljs-comment">// ä½¿ç”¨ destination-out æ“¦é™¤</span>
ctx.<span class="hljs-property">globalCompositeOperation</span> = <span class="hljs-string">"destination-out"</span>;
ctx.<span class="hljs-title function_">arc</span>(<span class="hljs-number">100</span>, <span class="hljs-number">100</span>, <span class="hljs-number">30</span>, <span class="hljs-number">0</span>, <span class="hljs-title class_">Math</span>.<span class="hljs-property">PI</span> * <span class="hljs-number">2</span>);
ctx.<span class="hljs-title function_">fill</span>(); <span class="hljs-comment">// æ“¦é™¤åœ†å½¢åŒºåŸŸ</span>
</code></pre>
<p><strong>å‘å…‰å åŠ </strong>ï¼šä½¿ç”¨ <code>lighter</code></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç»˜åˆ¶ç¬¬ä¸€ä¸ªå…‰æº</span>
ctx.<span class="hljs-title function_">drawImage</span>(light1, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);

<span class="hljs-comment">// ä½¿ç”¨ lighter å åŠ ç¬¬äºŒä¸ªå…‰æº</span>
ctx.<span class="hljs-property">globalCompositeOperation</span> = <span class="hljs-string">"lighter"</span>;
ctx.<span class="hljs-title function_">drawImage</span>(light2, <span class="hljs-number">50</span>, <span class="hljs-number">50</span>);
</code></pre>
<h2 data-id="heading-12">Blending æ··åˆæ¨¡å¼</h2>
<p>Blending æ§åˆ¶é‡å åŒºåŸŸçš„é¢œè‰²å¦‚ä½•æ··åˆã€‚ä¸ Porter-Duff Compositing Operators é€šè¿‡ <code>Fa</code> å’Œ <code>Fb</code> æ§åˆ¶åŒºåŸŸé€‰æ‹©ä¸åŒï¼ŒBlending é€šè¿‡å‡½æ•° <code>B(Cb, Cs)</code> æ”¹å˜é¢œè‰²çš„è®¡ç®—æ–¹å¼ã€‚æœ¬ç« ä»‹ç» Blending å‡½æ•°ã€ä¸ Alpha Compositing çš„ç»“åˆã€å¯åˆ†ç¦»å’Œä¸å¯åˆ†ç¦»æ··åˆæ¨¡å¼ï¼Œä»¥åŠ Group isolation å¯¹ Blending çš„å½±å“ã€‚</p>
<h3 data-id="heading-13">Blending å‡½æ•°</h3>
<p>Blending çš„æ ¸å¿ƒæ˜¯ Blending å‡½æ•° <code>B(Cb, Cs)</code>ï¼Œå®ƒå®šä¹‰äº† Backdrop é¢œè‰² <code>Cb</code> å’Œ Source é¢œè‰² <code>Cs</code> å¦‚ä½•è®¡ç®—å‡ºæ··åˆåçš„é¢œè‰² <code>Cr</code>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// Blending å…¬å¼ï¼ˆéé¢„ä¹˜å½¢å¼ï¼‰</span>
<span class="hljs-title class_">Cr</span> = (<span class="hljs-number">1</span> - Î±b) Ã— <span class="hljs-title class_">Cs</span> + Î±b Ã— <span class="hljs-title function_">B</span>(<span class="hljs-title class_">Cb</span>, <span class="hljs-title class_">Cs</span>);
</code></pre>
<p><code>Î±b</code> æ§åˆ¶ Blending å‡½æ•°çš„å½±å“ç¨‹åº¦ï¼š</p>
<ul>
<li>å½“ <code>Î±b = 0</code>ï¼ˆBackdrop é€æ˜ï¼‰æ—¶ï¼Œ<code>Cr = Cs</code>ï¼ˆä¿æŒ Source åŸè‰²ï¼‰</li>
<li>å½“ <code>Î±b = 1</code>ï¼ˆBackdrop ä¸é€æ˜ï¼‰æ—¶ï¼Œ<code>Cr = B(Cb, Cs)</code>ï¼ˆå®Œå…¨æ··åˆï¼‰</li>
</ul>
<p>ä¸åŒçš„ Blending æ¨¡å¼å¯¹åº”ä¸åŒçš„ <code>B</code> å‡½æ•°å®ç°ã€‚Blending æ¨¡å¼åˆ†ä¸ºä¸¤å¤§ç±»ï¼š</p>
<ul>
<li><strong>å¯åˆ†ç¦»æ··åˆæ¨¡å¼ (Separable Blend Modes)</strong>ï¼š<code>B(Cb, Cs)</code> å¯¹ RGB æ¯ä¸ªé€šé“ç‹¬ç«‹è®¡ç®—</li>
<li><strong>ä¸å¯åˆ†ç¦»æ··åˆæ¨¡å¼ (Non-separable Blend Modes)</strong>ï¼š<code>B(Cb, Cs)</code> éœ€è¦åŒæ—¶è€ƒè™‘æ‰€æœ‰é¢œè‰²é€šé“ï¼Œæ¶‰åŠ RGB ä¸ HSL è‰²å½©ç©ºé—´è½¬æ¢</li>
</ul>
<h3 data-id="heading-14">Blending ä¸ Alpha Compositing</h3>
<p>åœ¨å®Œæ•´çš„åˆæˆæµç¨‹ä¸­ï¼ŒBlending è®¡ç®—å‡º <code>Cr</code> åï¼Œéœ€è¦ä¸ Porter-Duff Compositing ç»“åˆã€‚æœ€å¸¸è§çš„ç®€åŒ–æ¨¡å¼æ˜¯ï¼š<strong>Blending ä¹‹åè¿›è¡Œ source-over åˆæˆ</strong>ã€‚</p>
<p>è¿™ç§æ¨¡å¼å¯¹åº”å‚æ•°ï¼š</p>
<ul>
<li>Blending æ¨¡å¼ï¼šä»»æ„ <code>B(Cb, Cs)</code> å‡½æ•°ï¼ˆå¦‚ multiplyã€screen ç­‰ï¼‰</li>
<li>Alpha Compositing å› å­ï¼š<code>Fa = 1, Fb = 1 - Î±s</code>ï¼ˆsource-overï¼‰</li>
</ul>
<p>å®Œæ•´å…¬å¼ä¸ºï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç¬¬ 1 æ­¥ï¼šBlending</span>
<span class="hljs-title class_">Cr</span> = (<span class="hljs-number">1</span> - Î±b) Ã— <span class="hljs-title class_">Cs</span> + Î±b Ã— <span class="hljs-title function_">B</span>(<span class="hljs-title class_">Cb</span>, <span class="hljs-title class_">Cs</span>);

<span class="hljs-comment">// ç¬¬ 2 æ­¥ï¼šsource-over Alpha Compositing</span>
co = <span class="hljs-title class_">Cr</span> Ã— Î±s + <span class="hljs-title class_">Cb</span> Ã— Î±b Ã— (<span class="hljs-number">1</span> - Î±s);
Î±o = Î±s + Î±b Ã— (<span class="hljs-number">1</span> - Î±s);
</code></pre>
<p>åˆå¹¶ä¸ºå•ä¸€å…¬å¼ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// Blending + source-over åˆæˆï¼ˆé¢„ä¹˜å½¢å¼ï¼‰</span>
co = <span class="hljs-title function_">B</span>(<span class="hljs-title class_">Cb</span>, <span class="hljs-title class_">Cs</span>) Ã— Î±s Ã— Î±b + (<span class="hljs-number">1</span> - Î±b) Ã— cs + (<span class="hljs-number">1</span> - Î±s) Ã— cb;
Î±o = Î±s + Î±b Ã— (<span class="hljs-number">1</span> - Î±s);
</code></pre>
<p>è¿™ä¸ªå…¬å¼æ¸…æ¥šåœ°å±•ç¤ºäº†ä¸‰éƒ¨åˆ†çš„è´¡çŒ®ï¼š</p>
<ul>
<li><code>B(Cb, Cs) Ã— Î±s Ã— Î±b</code>ï¼šBlending ç»“æœå¯¹é‡å åŒºåŸŸçš„è´¡çŒ®</li>
<li><code>(1 - Î±b) Ã— cs</code>ï¼šSource åœ¨ Backdrop é€æ˜åŒºåŸŸçš„è´¡çŒ®</li>
<li><code>(1 - Î±s) Ã— cb</code>ï¼šBackdrop åœ¨ Source é€æ˜åŒºåŸŸçš„è´¡çŒ®</li>
</ul>
<p>è¿™æ˜¯ Web å¹³å°æœ€å¸¸ç”¨çš„åˆæˆæ¨¡å¼ï¼Œé€šè¿‡ CSS çš„ <code>mix-blend-mode</code> å±æ€§æˆ– Canvas çš„ <code>globalCompositeOperation</code> å±æ€§ä½¿ç”¨ã€‚</p>
<h3 data-id="heading-15">å¯åˆ†ç¦»æ··åˆæ¨¡å¼</h3>
<p>å¯åˆ†ç¦»æ··åˆæ¨¡å¼çš„ <code>B(Cb, Cs)</code> å‡½æ•°å¯¹æ¯ä¸ªé¢œè‰²é€šé“ç‹¬ç«‹åº”ç”¨ã€‚</p>



















































































<table><thead><tr><th>æ··åˆæ¨¡å¼</th><th>B(Cb, Cs) å…¬å¼</th><th>æ•ˆæœæè¿°</th><th>å¸¸è§ç”¨é€”</th></tr></thead><tbody><tr><td><code>normal</code></td><td>Cs</td><td>æ— æ··åˆ</td><td>é»˜è®¤</td></tr><tr><td><code>multiply</code></td><td>Cb Ã— Cs</td><td>æ­£ç‰‡å åº•</td><td>é˜´å½±ã€çº¹ç†å åŠ </td></tr><tr><td><code>screen</code></td><td>Cb + Cs - Cb Ã— Cs</td><td>æ»¤è‰²</td><td>å‘å…‰æ•ˆæœ</td></tr><tr><td><code>overlay</code></td><td>Cb â‰¤ 0.5 ? 2Ã—CbÃ—Cs : 1 - 2Ã—(1-Cb)Ã—(1-Cs)</td><td>å åŠ </td><td>å›¾åƒå¢å¼º</td></tr><tr><td><code>darken</code></td><td>min(Cb, Cs)</td><td>å˜æš—</td><td>æš—éƒ¨åˆæˆ</td></tr><tr><td><code>lighten</code></td><td>max(Cb, Cs)</td><td>å˜äº®</td><td>äº®éƒ¨åˆæˆ</td></tr><tr><td><code>color-dodge</code></td><td>Cs â‰¥ 1 ? 1 : min(1, Cb / (1 - Cs))</td><td>é¢œè‰²å‡æ·¡</td><td>å¼ºå…‰æ•ˆæœ</td></tr><tr><td><code>color-burn</code></td><td>Cs â‰¤ 0 ? 0 : 1 - min(1, (1 - Cb) / Cs)</td><td>é¢œè‰²åŠ æ·±</td><td>åŠ æ·±æ•ˆæœ</td></tr><tr><td><code>hard-light</code></td><td>Cs â‰¤ 0.5 ? 2Ã—CbÃ—Cs : 1 - 2Ã—(1-Cb)Ã—(1-Cs)</td><td>å¼ºå…‰</td><td>é«˜å¯¹æ¯”åº¦æ•ˆæœ</td></tr><tr><td><code>soft-light</code></td><td>å¤æ‚å…¬å¼ï¼ˆè¯¦è§ W3C è§„èŒƒï¼‰</td><td>æŸ”å…‰</td><td>æŸ”å…‰æ•ˆæœ</td></tr><tr><td><code>difference</code></td><td>|Cb - Cs|</td><td>å·®å€¼</td><td>å·®å¼‚æ£€æµ‹</td></tr><tr><td><code>exclusion</code></td><td>Cb + Cs - 2Ã—CbÃ—Cs</td><td>æ’é™¤</td><td>æŸ”å’Œå·®å¼‚</td></tr></tbody></table>
<p><strong>ä»£ç ç¤ºä¾‹</strong>ï¼šä½¿ç”¨ multiply æ··åˆæ¨¡å¼</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> canvas = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">"myCanvas"</span>);
<span class="hljs-keyword">const</span> ctx = canvas.<span class="hljs-title function_">getContext</span>(<span class="hljs-string">"2d"</span>);

<span class="hljs-comment">// ç»˜åˆ¶ Backdropï¼ˆè“è‰²çŸ©å½¢ï¼‰</span>
ctx.<span class="hljs-property">fillStyle</span> = <span class="hljs-string">"blue"</span>;
ctx.<span class="hljs-title function_">fillRect</span>(<span class="hljs-number">50</span>, <span class="hljs-number">50</span>, <span class="hljs-number">100</span>, <span class="hljs-number">100</span>);

<span class="hljs-comment">// ä½¿ç”¨ multiply æ··åˆæ¨¡å¼ç»˜åˆ¶ Sourceï¼ˆçº¢è‰²åœ†å½¢ï¼‰</span>
ctx.<span class="hljs-property">globalCompositeOperation</span> = <span class="hljs-string">"multiply"</span>;
ctx.<span class="hljs-property">fillStyle</span> = <span class="hljs-string">"red"</span>;
ctx.<span class="hljs-title function_">arc</span>(<span class="hljs-number">100</span>, <span class="hljs-number">100</span>, <span class="hljs-number">50</span>, <span class="hljs-number">0</span>, <span class="hljs-title class_">Math</span>.<span class="hljs-property">PI</span> * <span class="hljs-number">2</span>);
ctx.<span class="hljs-title function_">fill</span>();
<span class="hljs-comment">// é‡å åŒºåŸŸï¼šblue Ã— red = æš—ç´«è‰²</span>
</code></pre>
<h3 data-id="heading-16">ä¸å¯åˆ†ç¦»æ··åˆæ¨¡å¼</h3>
<p>ä¸å¯åˆ†ç¦»æ··åˆæ¨¡å¼éœ€è¦åœ¨ HSL è‰²å½©ç©ºé—´ä¸­æ“ä½œã€‚è¾…åŠ©å‡½æ•°ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// è®¡ç®—äº®åº¦ (Luminosity)</span>
<span class="hljs-title class_">Lum</span>(C) = <span class="hljs-number">0.3</span> Ã— C.<span class="hljs-property">red</span> + <span class="hljs-number">0.59</span> Ã— C.<span class="hljs-property">green</span> + <span class="hljs-number">0.11</span> Ã— C.<span class="hljs-property">blue</span>;

<span class="hljs-comment">// è®¡ç®—é¥±å’Œåº¦ (Saturation)</span>
<span class="hljs-title class_">Sat</span>(C) = <span class="hljs-title function_">max</span>(C.<span class="hljs-property">red</span>, C.<span class="hljs-property">green</span>, C.<span class="hljs-property">blue</span>) - <span class="hljs-title function_">min</span>(C.<span class="hljs-property">red</span>, C.<span class="hljs-property">green</span>, C.<span class="hljs-property">blue</span>);

<span class="hljs-comment">// è®¾ç½®äº®åº¦ï¼šä¿æŒè‰²ç›¸å’Œé¥±å’Œåº¦ï¼Œä¿®æ”¹äº®åº¦</span>
<span class="hljs-title class_">SetLum</span>(C, lum);

<span class="hljs-comment">// è®¾ç½®é¥±å’Œåº¦ï¼šä¿æŒè‰²ç›¸å’Œäº®åº¦ï¼Œä¿®æ”¹é¥±å’Œåº¦</span>
<span class="hljs-title class_">SetSat</span>(C, sat);
</code></pre>



































<table><thead><tr><th>æ··åˆæ¨¡å¼</th><th>B(Cb, Cs) å…¬å¼</th><th>æ•ˆæœæè¿°</th><th>å¸¸è§ç”¨é€”</th></tr></thead><tbody><tr><td><code>hue</code></td><td>SetLum(SetSat(Cs, Sat(Cb)), Lum(Cb))</td><td>ä½¿ç”¨ Source è‰²ç›¸</td><td>è‰²å½©è°ƒæ•´</td></tr><tr><td><code>saturation</code></td><td>SetLum(SetSat(Cb, Sat(Cs)), Lum(Cb))</td><td>ä½¿ç”¨ Source é¥±å’Œåº¦</td><td>é¥±å’Œåº¦è°ƒæ•´</td></tr><tr><td><code>color</code></td><td>SetLum(Cs, Lum(Cb))</td><td>ä½¿ç”¨ Source è‰²ç›¸å’Œé¥±å’Œåº¦</td><td>ç€è‰²æ•ˆæœ</td></tr><tr><td><code>luminosity</code></td><td>SetLum(Cb, Lum(Cs))</td><td>ä½¿ç”¨ Source äº®åº¦</td><td>äº®åº¦è°ƒæ•´</td></tr></tbody></table>
<h2 data-id="heading-17">Compositing Groups</h2>
<p>Compositing Groups å½±å“å…ƒç´ å¦‚ä½•ä¸èƒŒæ™¯äº¤äº’ã€‚ç†è§£ Groups å¯¹äºæŒæ¡å¤æ‚çš„è§†è§‰æ•ˆæœè‡³å…³é‡è¦ï¼Œå®ƒå†³å®šäº†å­å…ƒç´ èƒ½å¦çœ‹åˆ°å¤–éƒ¨èƒŒæ™¯ï¼Œä»¥åŠ Group å¦‚ä½•ä½œä¸ºæ•´ä½“ä¸å¤–éƒ¨åˆæˆã€‚</p>
<h3 data-id="heading-18">Group Invariance(ç»„ä¸å˜æ€§)</h3>
<p>Group Invariance æ˜¯ Compositing Groups çš„æ ¸å¿ƒåŸåˆ™ï¼šä¸€ä¸ª Group ä½œä¸ºæ•´ä½“ä¸å¤–éƒ¨ Backdrop è¿›è¡Œåˆæˆçš„ç»“æœï¼Œåº”è¯¥ä¸ Group å†…éƒ¨çš„å…·ä½“å®ç°ç»†èŠ‚æ— å…³ã€‚</p>
<p>å…·ä½“æ¥è¯´ï¼ŒGroup Invariance è¦æ±‚ï¼š</p>
<ol>
<li><strong>Group å†…éƒ¨çš„å…ƒç´ å…ˆç›¸äº’åˆæˆ</strong>ï¼Œç”Ÿæˆ Group çš„æœ€ç»ˆå›¾åƒ</li>
<li><strong>Group ä½œä¸ºå•ä¸ªå›¾å±‚</strong>ä¸å¤–éƒ¨ Backdrop è¿›è¡Œåˆæˆ</li>
<li>Group å†…éƒ¨å…ƒç´ çš„é¡ºåºã€æ•°é‡ã€åˆæˆæ–¹å¼å¯¹å¤–éƒ¨ä¸å¯è§</li>
</ol>
<p>è¿™ä¸ªåŸåˆ™ç¡®ä¿äº†æ¨¡å—åŒ–å’Œå°è£…æ€§ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªåŒ…å«å¤šä¸ªå­å…ƒç´ çš„ <code>&lt;div&gt;</code> å¯ä»¥ä½œä¸ºä¸€ä¸ªæ•´ä½“ä¸é¡µé¢å…¶ä»–éƒ¨åˆ†è¿›è¡Œåˆæˆï¼Œè€Œä¸ä¼šå› ä¸ºå†…éƒ¨ç»“æ„å˜åŒ–è€Œå½±å“æœ€ç»ˆæ•ˆæœã€‚</p>
<p>Group Invariance çš„æ•°å­¦è¡¨è¾¾ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// Group å†…éƒ¨åˆæˆ</span>
<span class="hljs-keyword">let</span> groupResult = initialBackdrop;
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> element <span class="hljs-keyword">of</span> groupElements) {
  groupResult = <span class="hljs-title function_">composite</span>(groupResult, element);
}

<span class="hljs-comment">// Group ä½œä¸ºæ•´ä½“ä¸å¤–éƒ¨åˆæˆ</span>
<span class="hljs-keyword">const</span> finalResult = <span class="hljs-title function_">composite</span>(externalBackdrop, groupResult);
</code></pre>
<h3 data-id="heading-19">ç»„ä¸å˜æ€§çš„æ•°å­¦åŸºç¡€</h3>
<p>Compositing æ“ä½œæ»¡è¶³ç»“åˆå¾‹ï¼Œè¿™æ˜¯ç»„ä¸å˜æ€§çš„æ•°å­¦åŸºç¡€ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä¸‰ä¸ªå…ƒç´  Aã€Bã€C</span>
<span class="hljs-title function_">composite</span>(<span class="hljs-title function_">composite</span>(A, B), C) === <span class="hljs-title function_">composite</span>(A, <span class="hljs-title function_">composite</span>(B, C));
<span class="hljs-comment">// (A + B) + C = A + (B + C)</span>
</code></pre>
<p><strong>Simple Alpha Compositing æ»¡è¶³ç»„ä¸å˜æ€§</strong></p>
<p>å¯¹äº Simple Alpha Compositing (<code>source-over</code>)ï¼Œç»„ä¸å˜æ€§æ€»æ˜¯æˆç«‹ï¼Œå› ä¸ºå…¶å…¬å¼æ˜¯çº¿æ€§çš„ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// source-over æ˜¯çº¿æ€§æ“ä½œ</span>
co = cs + cb Ã— (<span class="hljs-number">1</span> - Î±s);
Î±o = Î±s + Î±b Ã— (<span class="hljs-number">1</span> - Î±s);
</code></pre>
<p>è¿™æ„å‘³ç€ï¼š</p>
<ul>
<li>å¯ä»¥å…ˆæŠŠ A å’Œ B åˆæˆï¼Œå†ä¸ C åˆæˆ â†’ <code>(A + B) + C</code></li>
<li>ä¹Ÿå¯ä»¥å…ˆæŠŠ B å’Œ C åˆæˆï¼Œå†ä¸ A åˆæˆ â†’ <code>A + (B + C)</code></li>
<li>ä¸¤ç§æ–¹å¼ç»“æœç›¸åŒ</li>
</ul>
<p>å› ä¸ºæ»¡è¶³ç»“åˆå¾‹ï¼Œæ‰€ä»¥å¯ä»¥å®‰å…¨åœ°å°†å…ƒç´ åˆ†ç»„ï¼šå…ˆåœ¨ Group å†…éƒ¨åˆæˆï¼Œå†ä¸å¤–éƒ¨åˆæˆï¼Œä¸ä¼šæ”¹å˜æœ€ç»ˆç»“æœã€‚</p>
<p><strong>Blending æ‰“ç ´ç»„ä¸å˜æ€§</strong></p>
<p>æŸäº› Blending æ¨¡å¼ä¼šæ‰“ç ´ç»„ä¸å˜æ€§ï¼Œå› ä¸º Blending å‡½æ•° <code>B(Cb, Cs)</code> æ˜¯éçº¿æ€§çš„ã€‚ä¾‹å¦‚ <code>multiply</code> æ¨¡å¼ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title function_">B</span>(<span class="hljs-title class_">Cb</span>, <span class="hljs-title class_">Cs</span>) = <span class="hljs-title class_">Cb</span> Ã— <span class="hljs-title class_">Cs</span>;

<span class="hljs-comment">// éçº¿æ€§å¯¼è‡´ä¸æ»¡è¶³ç»“åˆå¾‹</span>
<span class="hljs-title function_">B</span>(<span class="hljs-title function_">B</span>(<span class="hljs-title class_">Ca</span>, <span class="hljs-title class_">Cb</span>), <span class="hljs-title class_">Cc</span>) â‰  <span class="hljs-title function_">B</span>(<span class="hljs-title class_">Ca</span>, <span class="hljs-title function_">B</span>(<span class="hljs-title class_">Cb</span>, <span class="hljs-title class_">Cc</span>));
</code></pre>
<p>è€ƒè™‘å®Œæ•´çš„ Blending å…¬å¼ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title class_">Cr</span> = (<span class="hljs-number">1</span> - Î±b) Ã— <span class="hljs-title class_">Cs</span> + Î±b Ã— <span class="hljs-title function_">B</span>(<span class="hljs-title class_">Cb</span>, <span class="hljs-title class_">Cs</span>);
</code></pre>
<p>ç”±äº <code>Î±b</code> å’Œ <code>B</code> çš„éçº¿æ€§ç‰¹æ€§ï¼Œä¸åŒçš„åˆ†ç»„æ–¹å¼ä¼šå¯¼è‡´ä¸åŒçš„ç»“æœï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æƒ…å†µ 1ï¼šB ä½œä¸º Group å…ˆä¸ C åˆæˆ</span>
<span class="hljs-comment">// B çœ‹åˆ°çš„ Backdrop æ˜¯ Cï¼ŒÎ±b æ¥è‡ª C</span>
groupResult = <span class="hljs-title function_">blend</span>(B, C);
final = <span class="hljs-title function_">blend</span>(groupResult, A);

<span class="hljs-comment">// æƒ…å†µ 2ï¼šB ç›´æ¥ä¸å¤–éƒ¨ A åˆæˆ</span>
<span class="hljs-comment">// B çœ‹åˆ°çš„ Backdrop æ˜¯ Aï¼ŒÎ±b æ¥è‡ª A</span>
final = <span class="hljs-title function_">blend</span>(<span class="hljs-title function_">blend</span>(A, B), C);

<span class="hljs-comment">// ä¸¤ç§æƒ…å†µç»“æœä¸åŒ</span>
</code></pre>
<p><strong>Isolated Groups çš„å¿…è¦æ€§</strong></p>
<p>ä¸ºäº†åœ¨ä½¿ç”¨ Blending æ—¶ä¿æŒç¡®å®šæ€§ï¼ŒCSS ä¸­è®¾ç½® <code>mix-blend-mode</code> ä¼šè‡ªåŠ¨åˆ›å»ºæ–°çš„å±‚å ä¸Šä¸‹æ–‡å’Œ Compositing Groupï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.element</span> {
  <span class="hljs-attribute">mix-blend-mode</span>: multiply;
  <span class="hljs-comment">/* è‡ªåŠ¨åˆ›å»º Compositing Groupï¼Œç¡®ä¿æ··åˆé¡ºåºçš„ç¡®å®šæ€§ */</span>
}
</code></pre>
<p>é€šè¿‡åˆ›å»º Compositing Groupï¼Œç³»ç»Ÿæ˜ç¡®å®šä¹‰ï¼š</p>
<ol>
<li><strong>æ··åˆé¡ºåº</strong>ï¼šGroup å†…çš„å…ƒç´ æŒ‰æ–‡æ¡£é¡ºåºä¾æ¬¡æ··åˆ</li>
<li><strong>Backdrop æ¥æº</strong>ï¼šBlending å‡½æ•° <code>B(Cb, Cs)</code> ä¸­çš„ <code>Cb</code> æ¥è‡ª Group çš„ initialBackdrop</li>
<li><strong>éš”ç¦»èŒƒå›´</strong>ï¼šå¦‚æœæ˜¯ Isolated Groupï¼ŒinitialBackdrop ä¸ºé€æ˜ï¼Œå…ƒç´ åªä¸ Group å†…éƒ¨æ··åˆ</li>
</ol>
<p>å®é™…ä¾‹å­ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"background: red;"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"background: green; mix-blend-mode: multiply;"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"background: blue; mix-blend-mode: multiply;"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<ul>
<li>ç»¿è‰²å±‚è®¾ç½®äº† <code>multiply</code>ï¼Œåˆ›å»º Compositing Group</li>
<li>è“è‰²å±‚åœ¨ç»¿è‰²å±‚çš„ Group å†…ï¼Œå…ˆä¸ç»¿è‰²æ··åˆ</li>
<li>ç»¿è‰² Group çš„ç»“æœå†ä¸çº¢è‰²èƒŒæ™¯æ··åˆ</li>
<li>æ··åˆé¡ºåºï¼šblue â†’ green â†’ redï¼Œç¡®å®šä¸”ä¸å¯æ”¹å˜</li>
</ul>
<p>è¿™å°±å¼•å‡ºäº† Isolated Groups å’Œ Non-isolated Groups çš„åŒºåˆ«ï¼šå®ƒä»¬çš„ initialBackdrop ä¸åŒï¼Œå†³å®šäº† Group å†…å…ƒç´ èƒ½å¦çœ‹åˆ°å¤–éƒ¨èƒŒæ™¯ã€‚</p>
<h3 data-id="heading-20">Isolated å’Œ Non-isolated Groups</h3>
<p>Isolated Groups å’Œ Non-isolated Groups çš„æ ¸å¿ƒåŒºåˆ«åœ¨äº <code>initialBackdrop</code> çš„å–å€¼ï¼š</p>
<p><strong>Isolated Groupsï¼ˆéš”ç¦»ç»„ï¼‰</strong></p>
<p>åˆå§‹ Backdrop ä¸ºå…¨é€æ˜é»‘è‰² <code>rgba(0, 0, 0, 0)</code>ï¼ŒGroup å†…éƒ¨å…ƒç´ çœ‹ä¸åˆ°å¤–éƒ¨èƒŒæ™¯ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">let</span> groupResult = { <span class="hljs-attr">r</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">g</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">b</span>: <span class="hljs-number">0</span>, Î±: <span class="hljs-number">0</span> }; <span class="hljs-comment">// é€æ˜èƒŒæ™¯</span>

<span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> element <span class="hljs-keyword">of</span> groupElements) {
  groupResult = <span class="hljs-title function_">composite</span>(groupResult, element);
}

<span class="hljs-comment">// Group ä½œä¸ºæ•´ä½“ä¸å¤–éƒ¨åˆæˆ</span>
<span class="hljs-keyword">const</span> finalResult = <span class="hljs-title function_">composite</span>(externalBackdrop, groupResult);
</code></pre>
<p><strong>Non-isolated Groupsï¼ˆééš”ç¦»ç»„ï¼‰</strong></p>
<p>åˆå§‹ Backdrop ä½¿ç”¨å¤–éƒ¨ Backdropï¼ŒGroup å†…éƒ¨å…ƒç´ å¯ä»¥çœ‹åˆ°å¤–éƒ¨èƒŒæ™¯ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">let</span> groupResult = externalBackdrop; <span class="hljs-comment">// ä½¿ç”¨å¤–éƒ¨èƒŒæ™¯</span>

<span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> element <span class="hljs-keyword">of</span> groupElements) {
  groupResult = <span class="hljs-title function_">composite</span>(groupResult, element);
}

<span class="hljs-keyword">const</span> finalResult = groupResult;
</code></pre>
<p><strong>åˆ›å»º Isolated Group çš„æ–¹å¼</strong></p>
<p>æ ¹æ® W3C è§„èŒƒï¼š</p>
<ul>
<li><strong>CSS</strong>ï¼šæ‰€æœ‰åˆ›å»ºå±‚å ä¸Šä¸‹æ–‡ (stacking context) çš„æ“ä½œéƒ½ä¼šåˆ›å»º Isolated Group</li>
<li><strong>SVG</strong>ï¼šopacityã€filtersã€3D transformsã€blendingã€masking ä¼šåˆ›å»º Isolated Group</li>
<li>æ˜¾å¼åˆ›å»ºï¼šä½¿ç”¨ <code>isolation: isolate</code> å±æ€§</li>
</ul>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒHTML å…ƒç´ å½¢æˆ Non-isolated Groupã€‚</p>
<h3 data-id="heading-21">Isolated vs Non-isolated å¯¹æ¯”</h3>
<p>å‡è®¾æœ‰ä¸€ä¸ªç»¿è‰²åœ†å½¢ä½¿ç”¨ <code>multiply</code> æ··åˆæ¨¡å¼å åŠ åœ¨çº¢è‰²æ–¹å—å’Œè“è‰²èƒŒæ™¯ä¸Šï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-comment">&lt;!-- Non-isolated Groupï¼ˆé»˜è®¤ï¼‰ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"background: blue; padding: 50px;"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"background: red; width: 100px; height: 100px;"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>
    <span class="hljs-attr">style</span>=<span class="hljs-string">"background: green; border-radius: 50%; width: 80px; height: 80px;
              margin: -60px 0 0 40px; mix-blend-mode: multiply;"</span>
  &gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

<span class="hljs-comment">&lt;!-- Isolated Group --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"background: blue; padding: 50px;"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"isolation: isolate;"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"background: red; width: 100px; height: 100px;"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>
      <span class="hljs-attr">style</span>=<span class="hljs-string">"background: green; border-radius: 50%; width: 80px; height: 80px;
                margin: -60px 0 0 40px; mix-blend-mode: multiply;"</span>
    &gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<p><strong>Non-isolated Group çš„åˆæˆè¿‡ç¨‹ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åˆå§‹ Backdrop æ˜¯è“è‰²èƒŒæ™¯</span>
<span class="hljs-keyword">let</span> result = blue;

<span class="hljs-comment">// çº¢è‰²æ–¹å—ä¸è“è‰²èƒŒæ™¯åˆæˆ</span>
result = <span class="hljs-title function_">composite</span>(result, red); <span class="hljs-comment">// â†’ è“è‰²èƒŒæ™¯ä¸Šçš„çº¢è‰²æ–¹å—</span>

<span class="hljs-comment">// ç»¿è‰²åœ†å½¢ä½¿ç”¨ multiply æ¨¡å¼ä¸å½“å‰ç»“æœåˆæˆ</span>
<span class="hljs-comment">// ç»¿è‰²åœ†å½¢ä¼šä¸çº¢è‰²æ–¹å—å’Œè“è‰²èƒŒæ™¯éƒ½å‘ç”Ÿæ··åˆ</span>
result = <span class="hljs-title function_">composite_with_blend</span>(result, green, multiply);
<span class="hljs-comment">// é‡å çº¢è‰²åŒºåŸŸï¼šgreen Ã— red = æš—çº¢è‰²</span>
<span class="hljs-comment">// é‡å è“è‰²åŒºåŸŸï¼šgreen Ã— blue = æš—è“è‰²</span>
</code></pre>
<p><strong>Isolated Group çš„åˆæˆè¿‡ç¨‹ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// Group å†…éƒ¨ï¼šåˆå§‹ Backdrop æ˜¯é€æ˜</span>
<span class="hljs-keyword">let</span> groupResult = transparent;

<span class="hljs-comment">// çº¢è‰²æ–¹å—ä¸é€æ˜èƒŒæ™¯åˆæˆ</span>
groupResult = <span class="hljs-title function_">composite</span>(groupResult, red); <span class="hljs-comment">// â†’ çº¢è‰²æ–¹å—ï¼ˆæ— èƒŒæ™¯ï¼‰</span>

<span class="hljs-comment">// ç»¿è‰²åœ†å½¢ä½¿ç”¨ multiply æ¨¡å¼ä¸çº¢è‰²æ–¹å—åˆæˆ</span>
<span class="hljs-comment">// ç»¿è‰²åœ†å½¢åªèƒ½çœ‹åˆ°çº¢è‰²æ–¹å—ï¼Œçœ‹ä¸åˆ°å¤–éƒ¨è“è‰²èƒŒæ™¯</span>
groupResult = <span class="hljs-title function_">composite_with_blend</span>(groupResult, green, multiply);
<span class="hljs-comment">// é‡å åŒºåŸŸï¼šgreen Ã— red = æš—çº¢è‰²</span>
<span class="hljs-comment">// éé‡å åŒºåŸŸï¼šä¿æŒåŸè‰²</span>

<span class="hljs-comment">// Group ç»“æœä¸è“è‰²èƒŒæ™¯åˆæˆ</span>
result = <span class="hljs-title function_">composite</span>(blue, groupResult);
<span class="hljs-comment">// æœ€ç»ˆï¼šè“è‰²èƒŒæ™¯ + çº¢è‰²æ–¹å— + æš—çº¢è‰²é‡å åŒºåŸŸï¼ˆç»¿è‰²åœ†å½¢ä¸ä¼šä¸è“è‰²æ··åˆï¼‰</span>
</code></pre>
<p><strong>å…³é”®åŒºåˆ«ï¼š</strong></p>
<ul>
<li><strong>Non-isolated</strong>ï¼šç»¿è‰²åœ†å½¢ä¸çº¢è‰²æ–¹å—å’Œè“è‰²èƒŒæ™¯éƒ½å‘ç”Ÿ multiply æ··åˆ</li>
<li><strong>Isolated</strong>ï¼šç»¿è‰²åœ†å½¢åªä¸çº¢è‰²æ–¹å—å‘ç”Ÿ multiply æ··åˆï¼Œçœ‹ä¸åˆ°è“è‰²èƒŒæ™¯</li>
</ul>
<h2 data-id="heading-22">å®é™…åº”ç”¨</h2>
<p>Compositing å’Œ Blending æŠ€æœ¯åœ¨ Web å¹³å°çš„ä¸‰ä¸ªä¸»è¦é¢†åŸŸæœ‰å¹¿æ³›åº”ç”¨ï¼šCanvas 2D APIã€HTML/CSSã€SVGã€‚æœ¬ç« ä»‹ç»å¦‚ä½•åœ¨è¿™äº›å¹³å°ä½¿ç”¨è¿™äº›æŠ€æœ¯ï¼Œä»¥åŠæ€§èƒ½ä¼˜åŒ–å»ºè®®ã€‚</p>
<p><strong>å¹³å°èƒ½åŠ›å¯¹æ¯”</strong>ï¼š</p>
<ul>
<li><strong>Canvas 2D</strong>ï¼šåŒæ—¶æ”¯æŒ Porter-Duff æ“ä½œç¬¦å’Œ Blending æ¨¡å¼</li>
<li><strong>CSS</strong>ï¼šä»…æ”¯æŒ Blending æ¨¡å¼ï¼ˆé€šè¿‡ <code>mix-blend-mode</code>ã€<code>background-blend-mode</code>ï¼‰</li>
<li><strong>SVG</strong>ï¼šé€šè¿‡æ»¤é•œå…ƒç´ æ”¯æŒ Porter-Duff æ“ä½œç¬¦ï¼ˆ<code>feComposite</code>ï¼‰å’Œ Blending æ¨¡å¼ï¼ˆ<code>feBlend</code>ï¼‰</li>
</ul>
<p><strong>é‡è¦è¯´æ˜</strong>ï¼šåœ¨æ‰€æœ‰ Web å¹³å°ï¼ˆCanvas 2Dã€CSSã€SVGï¼‰ä¸­ï¼ŒBlending æ¨¡å¼éƒ½é‡‡ç”¨ <code>Blending + source-over</code> çš„åˆæˆæ–¹å¼ï¼Œå³ Blending è®¡ç®—åä½¿ç”¨ source-over è¿›è¡Œ Alpha Compositingï¼ˆFa=1, Fb=1-Î±sï¼‰ã€‚</p>
<h3 data-id="heading-23">Canvas 2D</h3>
<p>Canvas 2D é€šè¿‡ <code>globalCompositeOperation</code> å±æ€§æ§åˆ¶ Compositing å’Œ Blendingã€‚</p>
<p><strong>globalCompositeOperation å±æ€§</strong></p>
<p>è¯¥å±æ€§æ¥å—å­—ç¬¦ä¸²å€¼ï¼ŒæŒ‡å®šåˆæˆæˆ–æ··åˆæ¨¡å¼ã€‚æ”¯æŒçš„å€¼åŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>Porter-Duff æ“ä½œç¬¦</strong>ï¼š<code>source-over</code>ï¼ˆé»˜è®¤ï¼‰, <code>source-in</code>, <code>source-out</code>, <code>source-atop</code>, <code>destination-over</code>, <code>destination-in</code>, <code>destination-out</code>, <code>destination-atop</code>, <code>lighter</code>, <code>copy</code>, <code>xor</code>, <code>destination</code></li>
<li><strong>Blending æ¨¡å¼</strong>ï¼š<code>multiply</code>, <code>screen</code>, <code>overlay</code>, <code>darken</code>, <code>lighten</code>, <code>color-dodge</code>, <code>color-burn</code>, <code>hard-light</code>, <code>soft-light</code>, <code>difference</code>, <code>exclusion</code>, <code>hue</code>, <code>saturation</code>, <code>color</code>, <code>luminosity</code></li>
</ul>
<h3 data-id="heading-24">CSS</h3>
<p>CSS ä»…æ”¯æŒ Blending æ¨¡å¼ï¼Œä¸æ”¯æŒ Porter-Duff æ“ä½œç¬¦ã€‚æä¾›ä»¥ä¸‹å±æ€§æ§åˆ¶ Blendingï¼š</p>
<p><strong>mix-blend-mode</strong></p>
<p>æ§åˆ¶å…ƒç´ ä¸å…¶ Backdrop çš„æ··åˆæ–¹å¼ã€‚å…ƒç´ ä¼šä¸ä¸‹æ–¹çš„æ‰€æœ‰å†…å®¹è¿›è¡Œæ··åˆã€‚</p>
<ul>
<li>è¯­æ³•ï¼š<code>mix-blend-mode: &lt;blend-mode&gt;</code></li>
<li>æ”¯æŒçš„å€¼ï¼š<code>normal</code>ï¼ˆé»˜è®¤ï¼‰, <code>multiply</code>, <code>screen</code>, <code>overlay</code>, <code>darken</code>, <code>lighten</code>, <code>color-dodge</code>, <code>color-burn</code>, <code>hard-light</code>, <code>soft-light</code>, <code>difference</code>, <code>exclusion</code>, <code>hue</code>, <code>saturation</code>, <code>color</code>, <code>luminosity</code></li>
<li>è‡ªåŠ¨åˆ›å»º Compositing Groupï¼ˆé <code>normal</code> æ—¶ï¼‰</li>
</ul>
<p><strong>background-blend-mode</strong></p>
<p>æ§åˆ¶åŒä¸€å…ƒç´ çš„å¤šä¸ªèƒŒæ™¯å±‚ä¹‹é—´çš„æ··åˆã€‚å¤šä¸ªèƒŒæ™¯æŒ‰ç…§ä»ä¸Šåˆ°ä¸‹çš„é¡ºåºæ··åˆã€‚</p>
<ul>
<li>è¯­æ³•ï¼š<code>background-blend-mode: &lt;blend-mode&gt;</code></li>
<li>æ”¯æŒçš„å€¼ï¼šä¸ <code>mix-blend-mode</code> ç›¸åŒ</li>
<li>å¯ä»¥æŒ‡å®šå¤šä¸ªå€¼ï¼Œå¯¹åº”å¤šä¸ªèƒŒæ™¯å±‚</li>
</ul>
<p><strong>isolation</strong></p>
<p>æ˜¾å¼åˆ›å»º Isolated Groupï¼Œéš”ç¦»å­å…ƒç´ çš„æ··åˆæ•ˆæœã€‚</p>
<ul>
<li>è¯­æ³•ï¼š<code>isolation: auto | isolate</code></li>
<li><code>auto</code>ï¼šé»˜è®¤ï¼Œä¸åˆ›å»ºéš”ç¦»ç»„</li>
<li><code>isolate</code>ï¼šåˆ›å»º Isolated Groupï¼Œå­å…ƒç´ çš„æ··åˆä¸ä¼šå½±å“å¤–éƒ¨èƒŒæ™¯</li>
</ul>
<h3 data-id="heading-25">SVG</h3>
<p>SVG é€šè¿‡æ»¤é•œå…ƒç´ å®ç° Compositing å’Œ Blendingã€‚</p>
<p><strong>feComposite å…ƒç´ </strong></p>
<p>å®ç° Porter-Duff Compositing æ“ä½œç¬¦ã€‚</p>
<ul>
<li>å±æ€§ï¼š<code>operator</code> æŒ‡å®šæ“ä½œç¬¦ç±»å‹</li>
<li>æ”¯æŒçš„å€¼ï¼š<code>over</code>, <code>in</code>, <code>out</code>, <code>atop</code>, <code>xor</code>, <code>lighter</code>, <code>arithmetic</code></li>
<li><code>in</code> å’Œ <code>in2</code> å±æ€§æŒ‡å®š Source å’Œ Backdrop</li>
<li><code>arithmetic</code> æ¨¡å¼æ”¯æŒè‡ªå®šä¹‰çº¿æ€§ç»„åˆå…¬å¼</li>
</ul>
<p><strong>feBlend å…ƒç´ </strong></p>
<p>å®ç° Blending æ··åˆæ¨¡å¼ã€‚</p>
<ul>
<li>å±æ€§ï¼š<code>mode</code> æŒ‡å®šæ··åˆæ¨¡å¼</li>
<li>æ”¯æŒçš„å€¼ï¼š<code>normal</code>, <code>multiply</code>, <code>screen</code>, <code>overlay</code>, <code>darken</code>, <code>lighten</code>, <code>color-dodge</code>, <code>color-burn</code>, <code>hard-light</code>, <code>soft-light</code>, <code>difference</code>, <code>exclusion</code>, <code>hue</code>, <code>saturation</code>, <code>color</code>, <code>luminosity</code></li>
<li><code>in</code> å’Œ <code>in2</code> å±æ€§æŒ‡å®šè¦æ··åˆçš„ä¸¤ä¸ªè¾“å…¥æº</li>
</ul>
<h3 data-id="heading-26">Isolated Group çš„æ€§èƒ½å½±å“</h3>
<p>Isolated Group éœ€è¦ç¦»å±æ¸²æŸ“ï¼Œå¸¦æ¥é¢å¤–çš„æ€§èƒ½å¼€é”€ï¼š</p>
<ul>
<li>æµè§ˆå™¨ä¸º Group åˆ†é…ç¦»å±ç¼“å†²åŒºï¼ˆoffscreen bufferï¼‰</li>
<li>Group å†…å®¹å…ˆæ¸²æŸ“åˆ°ç¦»å±ç¼“å†²åŒºï¼Œå†åˆæˆåˆ°ä¸»ç”»å¸ƒ</li>
<li>å¢åŠ å†…å­˜å ç”¨å’Œ GPU è®¡ç®—è´Ÿæ‹…</li>
</ul>
<p>è¿‡å¤šæˆ–åµŒå¥—çš„ Isolated Group ä¼šæ˜¾è‘—å½±å“æ¸²æŸ“æ€§èƒ½ã€‚</p>
<p><strong>Canvas 2D</strong></p>
<p>Canvas 2D æ˜¯å³æ—¶æ¨¡å¼ï¼ˆimmediate modeï¼‰ç»˜å›¾ APIï¼Œä¸ä¼šè‡ªåŠ¨åˆ›å»º Isolated Groupã€‚å¦‚éœ€éš”ç¦»æ•ˆæœï¼Œéœ€æ‰‹åŠ¨ä½¿ç”¨ç¦»å± Canvasã€‚</p>
<p><strong>HTML/CSS</strong></p>
<p>æ ¹æ® <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.w3.org%2FTR%2Fcompositing-1%2F%23csscompositingrules_CSS" target="_blank" title="https://www.w3.org/TR/compositing-1/#csscompositingrules_CSS" ref="nofollow noopener noreferrer">W3C è§„èŒƒ Section 3.2</a>ï¼ŒHTML/CSS ä¸­æ‰€æœ‰åˆ›å»ºå±‚å ä¸Šä¸‹æ–‡ï¼ˆStacking Contextï¼‰çš„å±æ€§éƒ½ä¼šåˆ›å»º Isolated Groupï¼ŒåŒ…æ‹¬ <code>opacity</code>ã€<code>transform</code>ã€<code>filter</code>ã€<code>mix-blend-mode</code>ã€<code>isolation: isolate</code> ç­‰ã€‚</p>
<p><strong>SVG</strong></p>
<p>æ ¹æ® <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.w3.org%2FTR%2Fcompositing-1%2F%23csscompositingrules_SVG" target="_blank" title="https://www.w3.org/TR/compositing-1/#csscompositingrules_SVG" ref="nofollow noopener noreferrer">W3C è§„èŒƒ Section 3.3</a>ï¼ŒSVG ä¸­åªæœ‰ç‰¹å®šæ“ä½œä¼šåˆ›å»º Isolated Groupï¼š</p>
<ul>
<li><code>opacity</code></li>
<li><code>filters</code>ï¼ˆæ»¤é•œï¼‰</li>
<li>3D transformsï¼ˆ2D transforms ä¸ä¼šåˆ›å»ºï¼‰</li>
<li><code>blending</code>ï¼ˆæ··åˆæ¨¡å¼ï¼‰</li>
<li><code>masking</code>ï¼ˆé®ç½©ï¼‰</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è¯»æ‡‚ Tailwind v4ï¼šä¸ºä»€ä¹ˆå®ƒæ˜¯ç°ä»£å‰ç«¯é¡¹ç›®çš„å¿…é€‰é¡¹ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7593310044479209481</link>    <guid>https://juejin.cn/post/7593310044479209481</guid>    <pubDate>2026-01-10T15:00:22.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7593310044479209481" data-draft-id="7593375360553795634" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è¯»æ‡‚ Tailwind v4ï¼šä¸ºä»€ä¹ˆå®ƒæ˜¯ç°ä»£å‰ç«¯é¡¹ç›®çš„å¿…é€‰é¡¹ï¼Ÿ"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,Vue.js"/> <meta itemprop="datePublished" content="2026-01-10T15:00:22.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="404æ˜Ÿçƒçš„çŒ«"/> <meta itemprop="url" content="https://juejin.cn/user/193147068224126"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è¯»æ‡‚ Tailwind v4ï¼šä¸ºä»€ä¹ˆå®ƒæ˜¯ç°ä»£å‰ç«¯é¡¹ç›®çš„å¿…é€‰é¡¹ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/193147068224126/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    404æ˜Ÿçƒçš„çŒ«
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-10T15:00:22.000Z" title="Sat Jan 10 2026 15:00:22 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p><strong>æ‘˜è¦</strong>ï¼šå½“åŸå­åŒ– CSS å·²ç»æˆä¸ºäº‹å®æ ‡å‡†ï¼ŒTailwind CSS è¿˜èƒ½å¦‚ä½•è¿›åŒ–ï¼Ÿç­”æ¡ˆä¸æ˜¯æ›´å¤šçš„ Utility Classï¼Œè€Œæ˜¯å½»åº•é‡æ„åº•å±‚å¼•æ“ã€‚æœ¬æ–‡å°†å¸¦ä½ æ·±å…¥äº†è§£ Tailwind v4 (ä»£å· Oxy)ï¼Œçœ‹å®ƒå¦‚ä½•é€šè¿‡ Rust å’Œâ€œå» PostCSS åŒ–â€ï¼Œå°†å¼€å‘ä½“éªŒæå‡åˆ°å…¨æ–°ç»´åº¦ã€‚</p>
</blockquote>
<hr/>
<p>åœ¨è¿‡å»å‡ å¹´é‡Œï¼ŒTailwind CSS å‡ ä¹å‡­ä¸€å·±ä¹‹åŠ›æ”¹å˜äº†å‰ç«¯å¼€å‘è€…ç¼–å†™æ ·å¼çš„æ–¹å¼ã€‚å®ƒèµ¢å¾—äº†â€œåŸå­åŒ– CSS vs è¯­ä¹‰åŒ– CSSâ€çš„æˆ˜äº‰ï¼Œæˆä¸ºäº†ç°ä»£å‰ç«¯é¡¹ç›®çš„æ ‡é…ã€‚</p>
<p>ç„¶è€Œï¼Œéšç€é¡¹ç›®è§„æ¨¡çš„æ‰©å¤§ï¼ŒTailwind v3 çš„å±€é™æ€§ä¹Ÿé€æ¸æ˜¾ç°ï¼šåœ¨åŒ…å«æ•°åƒä¸ªç»„ä»¶çš„å¤§å‹ Monorepo ä¸­ï¼Œå¼€å‘æœåŠ¡å™¨çš„å¯åŠ¨å’Œ HMRï¼ˆçƒ­æ›´æ–°ï¼‰é€Ÿåº¦å¼€å§‹å˜æ…¢ã€‚è¿™å¹¶é Tailwind çš„è®¾è®¡ç¼ºé™·ï¼Œè€Œæ˜¯å…¶ä¾èµ–çš„ JavaScript å’Œ PostCSS å·¥å…·é“¾çš„æ€§èƒ½å¤©èŠ±æ¿ã€‚</p>
<p>ç«™åœ¨ 2026 å¹´åˆï¼ŒTailwind CSS v4 çš„æ­£å¼å‘å¸ƒï¼Œæ ‡å¿—ç€è¿™ä¸ªå¤©èŠ±æ¿è¢«å½»åº•å‡»ç¢ã€‚è¿™æ˜¯ä¸€æ¬¡**â€œä¸ºäº†é€Ÿåº¦è€Œé‡å†™ï¼Œä¸ºäº†ç®€å•è€Œé‡æ„â€**çš„é©å‘½æ€§å‡çº§ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€é€Ÿåº¦çš„è´¨å˜ï¼šRust å¼•æ“ç™»åœº</h2>
<p>Tailwind v4 æœ€å¤§çš„å˜åŒ–åœ¨äºå…¶å†…éƒ¨ä»£å·ä¸º <strong>"Oxy"</strong> çš„å…¨æ–°å¼•æ“ã€‚</p>
<h3 data-id="heading-1">å‘Šåˆ« JavaScript çš„æŸç¼š</h3>
<p>åœ¨ v3 ç‰ˆæœ¬ä¸­ï¼ŒTailwind æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªå¤æ‚çš„ PostCSS æ’ä»¶ã€‚æ¯å½“ä½ ä¿å­˜æ–‡ä»¶ï¼Œå®ƒéƒ½éœ€è¦é€šè¿‡ JavaScript è§£æä½ çš„ä»£ç ï¼Œæ‰«æç±»åï¼Œç„¶åç”Ÿæˆ CSSã€‚</p>
<p>è€Œåœ¨ v4 ä¸­ï¼Œæ ¸å¿ƒå¼•æ“å®Œå…¨ä½¿ç”¨ <strong>Rust</strong> é‡å†™ã€‚</p>
<p>ç»“æœæ˜¯æƒŠäººçš„ã€‚åœ¨å¤§å‹é¡¹ç›®ä¸­ï¼Œæ„å»ºé€Ÿåº¦å’Œ HMR é€Ÿåº¦æå‡äº† <strong>10 å€ä»¥ä¸Š</strong>ã€‚è¿™ç§æ„Ÿè§‰å°±åƒæ˜¯ä»æœºæ¢°ç¡¬ç›˜å‡çº§åˆ°äº† NVMe SSDï¼Œæ›¾ç»éœ€è¦å‡ ç§’é’Ÿçš„é‡æ–°ç¼–è¯‘ç°åœ¨å‡ ä¹æ˜¯ç¬é—´å®Œæˆçš„ã€‚ä½ ç”šè‡³æ„Ÿè§‰ä¸åˆ°æ„å»ºè¿‡ç¨‹çš„å­˜åœ¨ã€‚</p>
<h2 data-id="heading-2">äºŒã€æ¶æ„çš„æç®€ï¼šå†è§ï¼ŒPostCSS</h2>
<p>å¯¹äºè®¸å¤šå¼€å‘è€…æ¥è¯´ï¼Œv4 æœ€ä»¤äººå…´å¥‹çš„æ”¹åŠ¨æˆ–è®¸ä¸æ˜¯é€Ÿåº¦ï¼Œè€Œæ˜¯<strong>å®ƒä¸å†ä¾èµ– PostCSS</strong>ã€‚</p>
<h3 data-id="heading-3">å·¥å…·é“¾çš„è§£è€¦</h3>
<p>é•¿ä¹…ä»¥æ¥ï¼Œé…ç½® Tailwind æ„å‘³ç€ä½ å¿…é¡»é…ç½® PostCSSã€‚ä½ éœ€è¦ä¸€ä¸ª <code>postcss.config.js</code>ï¼Œé‡Œé¢å¡ç€ <code>tailwindcss</code> å’Œ <code>autoprefixer</code>ã€‚å¦‚æœä½ çš„é¡¹ç›®æ„å»ºé“¾æ¯”è¾ƒå¤æ‚ï¼ˆæ¯”å¦‚ä»¥å‰çš„ Webpackï¼‰ï¼Œè¿™å±‚ä¾èµ–å¾€å¾€æ˜¯ç—›è‹¦çš„æ¥æºã€‚</p>
<p>Tailwind v4 å˜æˆäº†ä¸€ä¸ªç‹¬ç«‹çš„ CLI å·¥å…·ï¼ˆå½“ç„¶ä¹Ÿæä¾›äº†æå…¶ä¼˜ç§€çš„ Vite æ’ä»¶ï¼‰ã€‚å®ƒè‡ªå¸¦äº†è§£æå’Œå‰ç¼€æ·»åŠ åŠŸèƒ½ã€‚</p>
<p>è¿™æ„å‘³ç€ä»€ä¹ˆï¼Ÿ</p>
<ul>
<li>â€¢ ä½ çš„é¡¹ç›®æ ¹ç›®å½•å°‘äº†ä¸€ä¸ªé…ç½®æ–‡ä»¶ã€‚</li>
<li>â€¢ ä½ çš„ <code>package.json</code> å°‘äº†ä¸€å †ä¾èµ–ã€‚</li>
<li>â€¢ æ„å»ºæµç¨‹å°‘äº†ä¸€ä¸ªä¸­é—´ç¯èŠ‚ï¼Œæ›´åŠ å¥å£®ã€‚</li>
</ul>
<h2 data-id="heading-4">ä¸‰ã€é…ç½®çš„èŒƒå¼è½¬ç§»ï¼šCSS-First</h2>
<p>v4 å¸¦æ¥äº†é…ç½®æ–¹å¼çš„é‡å¤§å˜é©ã€‚å®ƒè¯•å›¾æ‘†è„±å¯¹ <code>tailwind.config.js</code> çš„é‡åº¦ä¾èµ–ï¼Œè½¬è€Œæ‹¥æŠ±åŸç”Ÿçš„ CSS å˜é‡ã€‚è¿™æ˜¯ä¸€ä¸ªéå¸¸ç°ä»£åŒ–çš„ç†å¿µï¼š<strong>è®© CSS çš„å½’ CSSã€‚</strong></p>
<h3 data-id="heading-5">å¯¹æ¯”ï¼šè‡ªå®šä¹‰ä¸»é¢˜é¢œè‰²</h3>
<p><strong>åœ¨ Tailwind v3 ä¸­</strong>ï¼Œä½ éœ€è¦ä¿®æ”¹ JavaScript é…ç½®æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-css" lang="css">
    
    
    
  //Â tailwind<span class="hljs-selector-class">.config</span><span class="hljs-selector-class">.js</span>Â (æ—§ç‰ˆ)
module<span class="hljs-selector-class">.exports</span>Â =Â {
Â Â theme:Â {
Â Â Â Â extend:Â {
Â Â Â Â Â Â colors:Â {
Â Â Â Â Â Â Â Â brand:Â {
Â Â Â Â Â Â Â Â Â Â DEFAULT:Â <span class="hljs-string">'#0070f3'</span>,
Â Â Â Â Â Â Â Â Â Â dark:Â <span class="hljs-string">'#024dbc'</span>,
Â Â Â Â Â Â Â Â },
Â Â Â Â Â Â },
Â Â Â Â },
Â Â },
Â Â //Â ...
}
</code></pre>
<p><strong>åœ¨ Tailwind v4 ä¸­</strong>ï¼Œä½ å¯ä»¥ç›´æ¥åœ¨ä½ çš„ä¸» CSS æ–‡ä»¶ä¸­å®šä¹‰ï¼Œåˆ©ç”¨æ–°çš„ <code>@theme</code> æŒ‡ä»¤ï¼š</p>
<pre><code class="hljs language-css" lang="css">
    
    
    
  <span class="hljs-comment">/*Â globals.cssÂ (æ–°ç‰ˆÂ v4)Â */</span>
<span class="hljs-keyword">@tailwind</span>Â base;
<span class="hljs-keyword">@tailwind</span>Â components;
<span class="hljs-keyword">@tailwind</span>Â utilities;

<span class="hljs-keyword">@theme</span>Â {
Â Â <span class="hljs-comment">/*Â ç›´æ¥ä½¿ç”¨Â CSSÂ å˜é‡å®šä¹‰ä¸»é¢˜Â */</span>
Â Â <span class="hljs-attr">--color-brand</span>:Â <span class="hljs-number">#0070f3</span>;
Â Â <span class="hljs-attr">--color-brand-dark</span>:Â <span class="hljs-number">#024dbc</span>;

Â Â <span class="hljs-comment">/*Â ç”šè‡³å¯ä»¥å®šä¹‰å­—ä½“å’Œæ–­ç‚¹Â */</span>
Â Â <span class="hljs-attr">--font-sans</span>:Â <span class="hljs-string">"Inter"</span>,Â sans-serif;
Â Â <span class="hljs-attr">--breakpoint-3xl</span>:Â <span class="hljs-number">1920px</span>;
}
</code></pre>
<p>Tailwind v4 çš„å¼•æ“ä¼šè‡ªåŠ¨è¯»å–è¿™äº› CSS å˜é‡ï¼Œå¹¶ç”Ÿæˆå¯¹åº”çš„å·¥å…·ç±»ï¼ˆå¦‚ <code>bg-brand</code>, <code>text-brand-dark</code>ï¼‰ã€‚</p>
<p><strong>è¿™ç§å˜åŒ–çš„ä¼˜åŠ¿åœ¨äºï¼š</strong></p>
<ol>
<li>
<ol>
<li><strong>æ›´ç¬¦åˆ Web æ ‡å‡†ï¼š</strong> é…ç½®å°±åœ¨ CSS é‡Œï¼Œè€Œä¸æ˜¯ JS é‡Œã€‚</li>
</ol>
</li>
<li>
<ol start="2">
<li><strong>åŠ¨æ€æ€§ï¼š</strong> ä½ å¯ä»¥åœ¨è¿è¡Œæ—¶é€šè¿‡ JS ä¿®æ”¹è¿™äº› CSS å˜é‡ï¼ŒTailwind çš„æ ·å¼ä¼šè‡ªåŠ¨å“åº”ï¼ˆè™½ç„¶å·¥å…·ç±»åæ˜¯é™æ€çš„ï¼Œä½†å®ƒä»¬å¼•ç”¨çš„å€¼æ˜¯åŠ¨æ€çš„ï¼‰ã€‚</li>
</ol>
</li>
<li>
<ol start="3">
<li><strong>é›¶é…ç½®å¯åŠ¨ï¼š</strong> å¯¹äºå¤§å¤šæ•°ç®€å•é¡¹ç›®ï¼Œä½ ç”šè‡³å®Œå…¨ä¸éœ€è¦ <code>tailwind.config.js</code> æ–‡ä»¶ã€‚å¼•æ“ä¼šè‡ªåŠ¨æ‰«æä½ çš„æ–‡ä»¶å¹¶å¼€å§‹å·¥ä½œã€‚</li>
</ol>
</li>
</ol>
<h2 data-id="heading-6">å››ã€æå…¶ä¸æ»‘çš„ Vite é›†æˆ</h2>
<p>Tailwind v4 å›¢é˜Ÿä¸ Vite å›¢é˜Ÿè¿›è¡Œäº†æ·±åº¦åˆä½œï¼Œæ¨å‡ºäº†å…¨æ–°çš„å®˜æ–¹ Vite æ’ä»¶ <code>@tailwindcss/vite</code>ã€‚</p>
<p>è¿™ä¸ªæ’ä»¶ç»•è¿‡äº†è®¸å¤šä¸­é—´ç¯èŠ‚ï¼Œç›´æ¥ä»‹å…¥ Vite çš„æ„å»ºæµç¨‹ã€‚å®ƒå¸¦æ¥çš„ä½“éªŒæ˜¯ï¼š</p>
<ul>
<li>â€¢ <strong>é›¶é…ç½®ï¼š</strong> å®‰è£…æ’ä»¶ï¼Œåœ¨ <code>vite.config.ts</code> ä¸­å¼•å…¥ï¼Œç»“æŸã€‚å®ƒä¼šè‡ªåŠ¨æ‰¾åˆ°ä½ çš„ CSS å…¥å£å¹¶å¼€å§‹å·¥ä½œã€‚</li>
<li>â€¢ <strong>ç¬é—´ HMRï¼š</strong> æ— è®ºä½ çš„é¡¹ç›®å¤šå¤§ï¼Œä¿®æ”¹ä¸€ä¸ª class åï¼Œæµè§ˆå™¨é‡Œçš„æ ·å¼å‡ ä¹æ˜¯ç«‹åˆ»æ›´æ–°ã€‚</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript">
    
    
    
  <span class="hljs-comment">//Â vite.config.ts</span>
<span class="hljs-keyword">import</span>Â {Â defineConfigÂ }Â <span class="hljs-keyword">from</span>Â <span class="hljs-string">'vite'</span>
<span class="hljs-keyword">import</span>Â tailwindcssÂ <span class="hljs-keyword">from</span>Â <span class="hljs-string">'@tailwindcss/vite'</span>

<span class="hljs-keyword">export</span>Â <span class="hljs-keyword">default</span>Â <span class="hljs-title function_">defineConfig</span>({
Â Â <span class="hljs-attr">plugins</span>:Â [
Â Â Â Â <span class="hljs-title function_">tailwindcss</span>(),Â <span class="hljs-comment">//Â å°±è¿™ä¹ˆç®€å•</span>
Â Â ],
})
</code></pre>
<h2 data-id="heading-7">äº”ã€æ€»ç»“ï¼šæˆç†Ÿçš„æ ‡å¿—</h2>
<p>Tailwind CSS v4 å¹¶ä¸æ˜¯ä¸€æ¬¡ç®€å•çš„åŠŸèƒ½å åŠ ï¼Œè€Œæ˜¯ä¸€æ¬¡æˆç†Ÿçš„æ ‡å¿—ã€‚</p>
<p>å®ƒä¸å†æ»¡è¶³äºä»…ä»…æ”¹å˜æˆ‘ä»¬å†™ CSS çš„æ–¹å¼ï¼Œå®ƒå¼€å§‹æ·±å…¥åº•å±‚ï¼Œä¼˜åŒ–æ•´ä¸ªå‰ç«¯å·¥å…·é“¾çš„æ€§èƒ½å’Œä½“éªŒã€‚é€šè¿‡æ‹¥æŠ± Rustï¼Œå®ƒè§£å†³äº†æ€§èƒ½ç“¶é¢ˆï¼›é€šè¿‡æŠ›å¼ƒ PostCSSï¼Œå®ƒç®€åŒ–äº†æ¶æ„ï¼›é€šè¿‡è½¬å‘ CSS-First é…ç½®ï¼Œå®ƒæ‹¥æŠ±äº† Web æ ‡å‡†ã€‚</p>
<p>å¦‚æœè¯´ v3 è®© Tailwind æˆä¸ºäº†ä¸»æµï¼Œé‚£ä¹ˆ v4 åˆ™è®©å®ƒæˆä¸ºäº†**â€œä¸å¯æ›¿ä»£â€**çš„åŸºç¡€è®¾æ–½ã€‚å¯¹äºä»»ä½•è¿½æ±‚æè‡´å¼€å‘ä½“éªŒå’Œæ€§èƒ½çš„å›¢é˜Ÿæ¥è¯´ï¼Œå‡çº§åˆ° v4 éƒ½æ˜¯ä¸€ä¸ªæ— éœ€çŠ¹è±«çš„é€‰æ‹©ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[computedã€watch ä¸ watchEffect çš„ä½¿ç”¨è¾¹ç•Œä¸å®æˆ˜æŒ‡å—]]></title>    <link>https://juejin.cn/post/7593262196844724276</link>    <guid>https://juejin.cn/post/7593262196844724276</guid>    <pubDate>2026-01-10T15:11:13.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7593262196844724276" data-draft-id="7593177437081927731" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="computedã€watch ä¸ watchEffect çš„ä½¿ç”¨è¾¹ç•Œä¸å®æˆ˜æŒ‡å—"/> <meta itemprop="keywords" content="Vue.js,JavaScript"/> <meta itemprop="datePublished" content="2026-01-10T15:11:13.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="boooooooom"/> <meta itemprop="url" content="https://juejin.cn/user/3078273283917399"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            computedã€watch ä¸ watchEffect çš„ä½¿ç”¨è¾¹ç•Œä¸å®æˆ˜æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3078273283917399/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    boooooooom
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-10T15:11:13.000Z" title="Sat Jan 10 2026 15:11:13 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    4
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;color:#3c9dff}.markdown-body h1{font-size:30px;margin-bottom:5px;padding-bottom:8px;text-align:center}.markdown-body h2{font-size:24px;padding-bottom:6px}.markdown-body h2:before{content:"ğŸ‹"}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h3:before{content:"ğŸ“"}.markdown-body h4{font-size:16px}.markdown-body h4:before{content:"ğŸ‘"}.markdown-body h5{font-size:15px}.markdown-body h5:before{content:"ğŸ‰"}.markdown-body h6{margin-top:5px}.markdown-body h6:before{content:"ğŸ’"}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{display:block;margin:0 auto;max-width:100%;border-radius:4px;padding:1px;border:1px solid #d2e8ff}.markdown-body img:hover{box-shadow:0 1px 3px #5eaeff}.markdown-body hr{height:4px;margin:34px 0;background-size:4px 1px;background-image:linear-gradient(270deg,#5eaeff,#f3f9ff 25%,transparent 50%);border-style:none}.markdown-body code{word-break:break-word;border-radius:3px;overflow-x:auto;background-color:#d2e8ff;color:#3c9dff;font-size:.9em;padding:.1em .5em;margin:0 3px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;transition:all .3s}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;border:1px solid #90c7ff;border-radius:4px}.markdown-body pre:hover{box-shadow:0 1px 10px #beddff}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#3c9dff;border-bottom:1px solid #90c7ff;transition:all .3s}.markdown-body a:hover{color:#007fff;border-bottom:2px solid #5eaeff}.markdown-body a[href]:not(:empty){padding-right:18px}.markdown-body a[href]:not(:empty):after{display:inline-block;width:16px;height:16px;margin-left:2px;content:"";background:url(data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiPjxwYXRoIGQ9Ik0zODQgMTI4YTQ4IDQ4IDAgMDEyLjgxNiA5NS45MkwzODQgMjI0SDI1NmEzMiAzMiAwIDAwLTMxLjkyIDI5LjZMMjI0IDI1NnY1MTJhMzIgMzIgMCAwMDI5LjYgMzEuOTJsMi40LjA4aDUxMmEzMiAzMiAwIDAwMzEuOTItMjkuNmwuMDgtMi40VjY1NmE0OCA0OCAwIDAxOTUuOTItMi44MTZMODk2IDY1NnYxMTJhMTI4IDEyOCAwIDAxLTEyNCAxMjcuOTM2bC00IC4wNjRIMjU2YTEyOCAxMjggMCAwMS0xMjcuOTM2LTEyNGwtLjA2NC00VjI1NmExMjggMTI4IDAgMDExMjQtMTI3LjkzNmw0LS4wNjRoMTI4em0zODQgMGExMjggMTI4IDAgMDExMjcuOTM2IDEyNGwuMDY0IDR2MTYwYTQ4IDQ4IDAgMDEtOTUuOTIgMi44MTZMODAwIDQxNlYyOTEuODcybC0zODIuMDY0IDM4Mi4wOGE0OCA0OCAwIDAxLTcwLjAzMi02NS42bDIuMTYtMi4yODhMNzMyLjA5NiAyMjRINjA4YTQ4IDQ4IDAgMDEtMi44MTYtOTUuOTJMNjA4IDEyOGgxNjB6IiBmaWxsPSIjM2M5ZGZmIiBmaWxsLW9wYWNpdHk9Ii41NiIgZGF0YS1zcG0tYW5jaG9yLWlkPSJhMzEzeC5zZWFyY2hfaW5kZXguMC5pMC41Yzc1M2E4MTgwa2RKWCIgY2xhc3M9InNlbGVjdGVkIi8+PC9zdmc+);background-size:100%}.markdown-body table{margin:0 auto 10px;font-size:12px;width:auto;max-width:100%;overflow:auto;border-collapse:collapse;border:1px solid #3c9dff}.markdown-body thead{text-align:center}.markdown-body thead th{color:#fff;background-color:#5eaeff}.markdown-body tr{text-align:center}.markdown-body tbody tr:hover{background-color:#d2e8ff}.markdown-body tbody tr:hover code{background-color:#90c7ff}.markdown-body tr:nth-child(2n){background-color:#ecf5ff}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#5eaeff}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body b,.markdown-body strong{font-weight:900;padding:0 1px;font-size:17px}.markdown-body small{color:#cbcbcb;padding:0 1px;font-size:22px;zoom:.5}.markdown-body em{padding:0 1px}.markdown-body del{padding:0 1px;text-decoration-thickness:2px}.markdown-body blockquote{color:#1a1b1c;padding:1px 20px;margin:22px 0;border-radius:4px;border-left:4px solid rgba(60,157,255,.5);background-color:rgba(190,221,255,.3)}.markdown-body blockquote blockquote{margin:8px 0}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body details{margin:12px 0;padding:4px 10px;border:2px solid #3c9dff;border-radius:8px;background-color:#ecf5ff;transition:all .3s}.markdown-body details summary{cursor:pointer}.markdown-body input[type=checkbox]{position:relative;appearance:none;width:16px;height:16px;border-radius:2px;vertical-align:middle;transform:translateY(-2px);box-sizing:border-box;border:1px solid #beddff}.markdown-body input[type=checkbox]:checked{border:1px solid #5eaeff;background-color:#5eaeff}.markdown-body input[type=checkbox]:checked:before{position:absolute;top:3px;left:1px;width:11px;height:6px;background-color:transparent;border-left:2px solid #fff;border-bottom:2px solid #fff;transform:rotate(-45deg);content:"";box-sizing:border-box}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="androidstudio">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#a9b7c6;background:#282b2e}.hljs-bullet,.hljs-literal,.hljs-number,.hljs-symbol{color:#6897bb}.hljs-deletion,.hljs-keyword,.hljs-selector-tag{color:#cc7832}.hljs-link,.hljs-template-variable,.hljs-variable{color:#629755}.hljs-comment,.hljs-quote{color:grey}.hljs-meta{color:#bbb529}.hljs-addition,.hljs-attribute,.hljs-string{color:#6a8759}.hljs-section,.hljs-title,.hljs-type{color:#ffc66d}.hljs-name,.hljs-selector-class,.hljs-selector-id{color:#e8bf6a}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Vue3 ä¸­ computedã€watch ä¸ watchEffect çš„ä½¿ç”¨è¾¹ç•Œä¸å®æˆ˜æŒ‡å—</h2>
<p>åœ¨ Vue3 çš„å“åº”å¼ç³»ç»Ÿä¸­ï¼Œcomputedã€watch å’Œ watchEffect æ˜¯å¤„ç†å“åº”å¼æ•°æ®ä¾èµ–çš„æ ¸å¿ƒ APIã€‚å®ƒä»¬çœ‹ä¼¼éƒ½èƒ½ç›‘å¬æ•°æ®å˜åŒ–å¹¶æ‰§è¡Œç›¸åº”é€»è¾‘ï¼Œä½†å„è‡ªçš„è®¾è®¡åˆè¡·ã€é€‚ç”¨åœºæ™¯å’Œä½¿ç”¨è¾¹ç•Œå­˜åœ¨æ˜¾è‘—å·®å¼‚ã€‚å¾ˆå¤šå¼€å‘è€…åœ¨å®é™…å¼€å‘ä¸­å®¹æ˜“æ··æ·†ä¸‰è€…çš„ç”¨æ³•ï¼Œå¯¼è‡´å‡ºç°æ€§èƒ½å†—ä½™ã€é€»è¾‘æ··ä¹±ç”šè‡³å“åº”å¼å¤±æ•ˆçš„é—®é¢˜ã€‚æœ¬æ–‡å°†ä»â€œè¾¹ç•Œâ€è§†è§’å‡ºå‘ï¼Œæ·±å…¥å‰–æä¸‰è€…çš„æ ¸å¿ƒå®šä½ã€é€‚ç”¨åœºæ™¯ã€ç¦å¿Œç”¨æ³•åŠå®æˆ˜æŠ€å·§ï¼Œå¸®åŠ©å¼€å‘è€…ç²¾å‡†æŠŠæ¡å…¶ä½¿ç”¨è¾¹ç•Œï¼Œå†™å‡ºæ›´ä¼˜é›…ã€é«˜æ•ˆçš„å“åº”å¼ä»£ç ã€‚</p>
<h3 data-id="heading-1">ä¸€ã€æ ¸å¿ƒå®šä½ï¼šæ˜ç¡®è¾¹ç•Œçš„å‰æ</h3>
<p>è¦æŒæ¡ä¸‰è€…çš„ä½¿ç”¨è¾¹ç•Œï¼Œé¦–å…ˆéœ€è¦æ˜ç¡®å®ƒä»¬çš„æ ¸å¿ƒå®šä½â€”â€”Vue å›¢é˜Ÿåœ¨è®¾è®¡è¿™ä¸‰ä¸ª API æ—¶ï¼Œèµ‹äºˆäº†å®ƒä»¬æˆªç„¶ä¸åŒçš„èŒè´£ï¼š</p>
<ul>
<li><strong>computedï¼ˆè®¡ç®—å±æ€§ï¼‰</strong> ï¼šæ ¸å¿ƒå®šä½æ˜¯â€œæ´¾ç”ŸçŠ¶æ€â€ï¼Œç”¨äºåŸºäºå·²æœ‰å“åº”å¼æ•°æ®ç”Ÿæˆæ–°çš„å“åº”å¼æ•°æ®ã€‚å®ƒçš„æœ¬è´¨æ˜¯â€œæ•°æ®çš„åŠ å·¥è€…â€ï¼Œä¸“æ³¨äºæ•°æ®çš„è½¬æ¢ä¸æ´¾ç”Ÿï¼Œè€Œéæ‰§è¡Œå‰¯ä½œç”¨ã€‚</li>
<li><strong>watchï¼ˆç›‘å¬å™¨ï¼‰</strong> ï¼šæ ¸å¿ƒå®šä½æ˜¯â€œæ•°æ®å˜åŒ–çš„å“åº”å™¨â€ï¼Œç”¨äºç›‘å¬ç‰¹å®šå“åº”å¼æ•°æ®çš„å˜åŒ–ï¼Œå¹¶åœ¨å˜åŒ–æ—¶æ‰§è¡Œè‡ªå®šä¹‰é€»è¾‘ï¼ˆé€šå¸¸æ˜¯å‰¯ä½œç”¨ï¼‰ã€‚å®ƒçš„ç‰¹ç‚¹æ˜¯â€œç²¾å‡†ç›‘å¬ã€ä¸»åŠ¨è§¦å‘â€ï¼Œéœ€è¦æ˜ç¡®æŒ‡å®šç›‘å¬ç›®æ ‡ã€‚</li>
<li><strong>watchEffectï¼ˆå‰¯ä½œç”¨ç›‘å¬å™¨ï¼‰</strong> ï¼šæ ¸å¿ƒå®šä½æ˜¯â€œéšå¼ä¾èµ–çš„å‰¯ä½œç”¨æ‰§è¡Œå™¨â€ï¼Œç”¨äºè‡ªåŠ¨è¿½è¸ªå‡½æ•°å†…éƒ¨çš„å“åº”å¼ä¾èµ–ï¼Œå½“ä¾èµ–å˜åŒ–æ—¶é‡æ–°æ‰§è¡Œå‡½æ•°ï¼ˆå‰¯ä½œç”¨ï¼‰ã€‚å®ƒçš„ç‰¹ç‚¹æ˜¯â€œéšå¼ç›‘å¬ã€è‡ªåŠ¨è§¦å‘â€ï¼Œæ— éœ€æŒ‡å®šç›‘å¬ç›®æ ‡ï¼Œä¾èµ–ç”±å‡½æ•°å†…éƒ¨ä½¿ç”¨è‡ªåŠ¨æ”¶é›†ã€‚</li>
</ul>
<p>ç®€å•æ¥è¯´ï¼šcomputed ç®¡â€œæ•°æ®æ´¾ç”Ÿâ€ï¼Œwatch ç®¡â€œç²¾å‡†å‰¯ä½œç”¨â€ï¼ŒwatchEffect ç®¡â€œéšå¼ä¾èµ–å‰¯ä½œç”¨â€ã€‚è¿™ä¸€å®šä½å·®å¼‚ï¼Œæ˜¯åˆ’åˆ†å®ƒä»¬ä½¿ç”¨è¾¹ç•Œçš„æ ¹æœ¬ä¾æ®ã€‚</p>
<h3 data-id="heading-2">äºŒã€computed çš„ä½¿ç”¨è¾¹ç•Œï¼šåªåšæ´¾ç”Ÿï¼Œä¸åšå‰¯ä½œç”¨</h3>
<p>computed çš„è®¾è®¡åˆè¡·æ˜¯ä¸ºäº†ç®€åŒ–â€œåŸºäºå·²æœ‰æ•°æ®ç”Ÿæˆæ–°æ•°æ®â€çš„åœºæ™¯ï¼Œå®ƒå…·æœ‰ç¼“å­˜æœºåˆ¶ï¼ˆåªæœ‰ä¾èµ–å˜åŒ–æ—¶æ‰é‡æ–°è®¡ç®—ï¼‰ï¼Œèƒ½æœ‰æ•ˆæå‡æ€§èƒ½ã€‚ä½†å®ƒçš„è¾¹ç•Œä¹Ÿéå¸¸æ˜ç¡®ï¼š<strong>ä»…ç”¨äºæ•°æ®æ´¾ç”Ÿï¼Œç¦æ­¢åœ¨å…¶ä¸­æ‰§è¡Œå‰¯ä½œç”¨</strong>ã€‚</p>
<h4 data-id="heading-3">2.1 é€‚ç”¨åœºæ™¯</h4>
<ul>
<li>åŸºäºå¤šä¸ªå“åº”å¼æ•°æ®çš„ç»„åˆ/è½¬æ¢ç”Ÿæˆæ–°æ•°æ®ï¼ˆå¦‚æ‹¼æ¥å­—ç¬¦ä¸²ã€è®¡ç®—æ€»å’Œã€è¿‡æ»¤æ•°ç»„ï¼‰ï¼›</li>
<li>éœ€è¦å¯¹æ•°æ®è¿›è¡Œæ ¼å¼åŒ–å¤„ç†ï¼ˆå¦‚æ—¥æœŸæ ¼å¼åŒ–ã€é‡‘é¢åƒåˆ†ä½å¤„ç†ï¼‰ï¼›</li>
<li>ä¾èµ–æ•°æ®å˜åŒ–æ—¶éœ€è¦è‡ªåŠ¨æ›´æ–°çš„æ´¾ç”ŸçŠ¶æ€ï¼ˆå¦‚è´­ç‰©è½¦æ€»ä»·ã€åˆ—è¡¨ç­›é€‰ç»“æœï¼‰ã€‚</li>
</ul>
<p>ç¤ºä¾‹ï¼šè´­ç‰©è½¦æ€»ä»·è®¡ç®—ï¼ˆå…¸å‹çš„æ´¾ç”ŸçŠ¶æ€åœºæ™¯ï¼‰</p>
<pre><code class="hljs language-vue" lang="vue">import { ref, computed } from 'vue';

const cartItems = ref([
  { id: 1, name: 'æ‰‹æœº', price: 5999, quantity: 1 },
  { id: 2, name: 'è€³æœº', price: 1299, quantity: 2 }
]);

// æ­£ç¡®ï¼šcomputed ç”¨äºæ´¾ç”Ÿè´­ç‰©è½¦æ€»ä»·
const totalPrice = computed(() =&gt; {
  return cartItems.value.reduce((sum, item) =&gt; {
    return sum + item.price * item.quantity;
  }, 0);
});
</code></pre>
<h4 data-id="heading-4">2.2 ç¦å¿Œè¾¹ç•Œï¼ˆç»å¯¹ä¸èƒ½åšçš„äº‹ï¼‰</h4>
<ol>
<li><strong>ç¦æ­¢æ‰§è¡Œå‰¯ä½œç”¨æ“ä½œ</strong>ï¼šå¦‚ä¿®æ”¹ DOMã€å‘é€ç½‘ç»œè¯·æ±‚ã€ä¿®æ”¹å…¶ä»–å“åº”å¼æ•°æ®ã€æ‰“å°æ—¥å¿—ç­‰ã€‚computed çš„å›è°ƒå‡½æ•°åº”æ˜¯â€œçº¯å‡½æ•°â€ï¼ˆè¾“å…¥ä¸å˜åˆ™è¾“å‡ºä¸å˜ï¼Œæ— å‰¯ä½œç”¨ï¼‰ï¼Œå¦åˆ™ä¼šå¯¼è‡´é€»è¾‘æ··ä¹±ã€å“åº”å¼è¿½è¸ªå¼‚å¸¸ã€‚</li>
<li><strong>ç¦æ­¢ä¾èµ–éå“åº”å¼æ•°æ®</strong>ï¼šcomputed ä»…èƒ½è¿½è¸ªå“åº”å¼æ•°æ®ï¼ˆref/reactiveï¼‰çš„å˜åŒ–ï¼Œä¾èµ–éå“åº”å¼æ•°æ®ï¼ˆå¦‚æ™®é€šå˜é‡ã€å…¨å±€å˜é‡ï¼‰ä¼šå¯¼è‡´è®¡ç®—ç»“æœæ— æ³•è‡ªåŠ¨æ›´æ–°ã€‚</li>
<li><strong>ç¦æ­¢è¿‡åº¦å¤æ‚çš„è®¡ç®—é€»è¾‘</strong>ï¼šcomputed é€‚åˆç®€å•çš„æ•°æ®æ´¾ç”Ÿï¼Œè‹¥åŒ…å«å¤§é‡å¾ªç¯ã€å¤æ‚ç®—æ³•ï¼Œä¼šé˜»å¡é¡µé¢æ¸²æŸ“ã€‚å¤æ‚è®¡ç®—åº”æ‹†åˆ†åˆ°æ–¹æ³•ä¸­ï¼Œæˆ–ä½¿ç”¨é˜²æŠ–/èŠ‚æµå¤„ç†ã€‚</li>
</ol>
<p>é”™è¯¯ç¤ºä¾‹ï¼ˆcomputed ä¸­æ‰§è¡Œå‰¯ä½œç”¨ï¼‰ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">// é”™è¯¯ï¼šåœ¨ computed ä¸­å‘é€ç½‘ç»œè¯·æ±‚ï¼ˆå‰¯ä½œç”¨ï¼‰
const userInfo = computed(async () =&gt; {
  const res = await fetch(`/api/user/${userId.value}`); // å‰¯ä½œç”¨
  return res.json();
});

// é”™è¯¯ï¼šåœ¨ computed ä¸­ä¿®æ”¹å…¶ä»–å“åº”å¼æ•°æ®ï¼ˆå‰¯ä½œç”¨ï¼‰
const count = ref(0);
const doubleCount = computed(() =&gt; {
  count.value += 1; // ä¿®æ”¹å…¶ä»–å“åº”å¼æ•°æ®ï¼Œå¯¼è‡´æ­»å¾ªç¯
  return count.value * 2;
});
</code></pre>
<h4 data-id="heading-5">2.3 å®æˆ˜æ³¨æ„ç‚¹</h4>
<ul>
<li>åˆ©ç”¨ç¼“å­˜æœºåˆ¶ï¼šcomputed çš„ç¼“å­˜ç‰¹æ€§å¯ä»¥é¿å…é‡å¤è®¡ç®—ï¼Œä½†è‹¥ä¾èµ–çš„å“åº”å¼æ•°æ®æœªå˜åŒ–ï¼Œå¤šæ¬¡è®¿é—® computed ä¼šç›´æ¥è¿”å›ç¼“å­˜ç»“æœï¼Œæ— éœ€é‡æ–°è®¡ç®—ã€‚</li>
<li>é¿å…å¾ªç¯ä¾èµ–ï¼šä¸¤ä¸ª computed ç›¸äº’ä¾èµ–ä¼šå¯¼è‡´æ— é™å¾ªç¯ï¼Œåº”é‡æ„é€»è¾‘ï¼Œæ‹†åˆ†ä¾èµ–å…³ç³»ã€‚</li>
<li>åªè¯»ä¸å¯å†™ computedï¼šé»˜è®¤ computed æ˜¯åªè¯»çš„ï¼Œè‹¥éœ€è¦ä¿®æ”¹ computed çš„å€¼ï¼Œå¯é€šè¿‡ set æ–¹æ³•å®šä¹‰å¯å†™ computedï¼Œä½†éœ€ç¡®ä¿é€»è¾‘æ¸…æ™°ï¼Œé¿å…ç ´åæ´¾ç”Ÿå…³ç³»ã€‚</li>
</ul>
<h3 data-id="heading-6">ä¸‰ã€watch çš„ä½¿ç”¨è¾¹ç•Œï¼šç²¾å‡†ç›‘å¬ï¼Œå‰¯ä½œç”¨å¯æ§</h3>
<p>watch æ˜¯ Vue ä¸­æœ€å¸¸ç”¨çš„ç›‘å¬ APIï¼Œå®ƒçš„æ ¸å¿ƒä¼˜åŠ¿æ˜¯â€œç²¾å‡†æ§åˆ¶â€â€”â€”å¯ä»¥æ˜ç¡®æŒ‡å®šç›‘å¬ç›®æ ‡ã€æ·±åº¦ç›‘å¬ã€æ§åˆ¶æ‰§è¡Œæ—¶æœºã€‚å…¶ä½¿ç”¨è¾¹ç•Œåœ¨äºï¼š<strong>ä»…ç”¨äºç›‘å¬ç‰¹å®šæ•°æ®å˜åŒ–å¹¶æ‰§è¡Œå¯æ§çš„å‰¯ä½œç”¨ï¼Œé¿å…è¿‡åº¦ç›‘å¬æˆ–ç›‘å¬ä¸æ˜ç¡®çš„ç›®æ ‡</strong>ã€‚</p>
<h4 data-id="heading-7">3.1 é€‚ç”¨åœºæ™¯</h4>
<ul>
<li>ç›‘å¬ç‰¹å®šå“åº”å¼æ•°æ®å˜åŒ–ï¼Œæ‰§è¡Œå‰¯ä½œç”¨ï¼ˆå¦‚å‘é€ç½‘ç»œè¯·æ±‚ã€ä¿®æ”¹ DOMã€æ›´æ–°å…¨å±€çŠ¶æ€ï¼‰ï¼›</li>
<li>éœ€è¦è·å–æ•°æ®å˜åŒ–å‰åçš„å€¼ï¼ˆoldValue å’Œ newValueï¼‰ï¼›</li>
<li>éœ€è¦æ§åˆ¶ç›‘å¬æ—¶æœºï¼ˆå¦‚åˆå§‹æ‰§è¡Œã€æ·±åº¦ç›‘å¬å¯¹è±¡/æ•°ç»„å†…éƒ¨å˜åŒ–ï¼‰ï¼›</li>
<li>éœ€è¦æ¡ä»¶æ€§æ‰§è¡Œå‰¯ä½œç”¨ï¼ˆå¦‚ä»…å½“æ•°æ®å˜åŒ–æ»¡è¶³ç‰¹å®šæ¡ä»¶æ—¶æ‰§è¡Œï¼‰ã€‚</li>
</ul>
<p>ç¤ºä¾‹ï¼šç›‘å¬ç”¨æˆ· ID å˜åŒ–ï¼Œé‡æ–°è·å–ç”¨æˆ·ä¿¡æ¯ï¼ˆç²¾å‡†ç›‘å¬ + å‰¯ä½œç”¨ï¼‰</p>
<pre><code class="hljs language-vue" lang="vue">import { ref, watch } from 'vue';

const userId = ref(1);
const userInfo = ref(null);

// æ­£ç¡®ï¼šwatch ç›‘å¬ userId å˜åŒ–ï¼Œå‘é€ç½‘ç»œè¯·æ±‚ï¼ˆå‰¯ä½œç”¨ï¼‰
watch(userId, async (newId, oldId) =&gt; {
  console.log(`ç”¨æˆ· ID ä» ${oldId} å˜ä¸º ${newId}`);
  const res = await fetch(`/api/user/${newId}`);
  userInfo.value = res.json();
}, {
  immediate: true, // åˆå§‹æ‰§è¡Œä¸€æ¬¡ï¼ˆé¡µé¢åŠ è½½æ—¶è·å–é»˜è®¤ç”¨æˆ·ä¿¡æ¯ï¼‰
  deep: false // åŸºæœ¬ç±»å‹æ— éœ€æ·±åº¦ç›‘å¬ï¼Œé»˜è®¤ false
});
</code></pre>
<h4 data-id="heading-8">3.3 ç¦å¿Œè¾¹ç•Œï¼ˆç»å¯¹ä¸èƒ½åšçš„äº‹ï¼‰</h4>
<ol>
<li><strong>ç¦æ­¢ç›‘å¬éå“åº”å¼æ•°æ®</strong>ï¼šwatch æ— æ³•è¿½è¸ªæ™®é€šå˜é‡ã€å…¨å±€å˜é‡çš„å˜åŒ–ï¼Œç›‘å¬è¿™äº›æ•°æ®ä¼šå¯¼è‡´å›è°ƒå‡½æ•°æ°¸è¿œä¸æ‰§è¡Œã€‚</li>
<li><strong>ç¦æ­¢è¿‡åº¦æ·±åº¦ç›‘å¬</strong>ï¼šå¯¹å¤§å‹å¯¹è±¡/æ•°ç»„è¿›è¡Œæ·±åº¦ç›‘å¬ï¼ˆdeep: trueï¼‰ä¼šä¸¥é‡å½±å“æ€§èƒ½ï¼Œå› ä¸º Vue ä¼šé€’å½’éå†æ•´ä¸ªæ•°æ®ç»“æ„ã€‚åº”å°½é‡ç›‘å¬å¯¹è±¡çš„å…·ä½“å±æ€§ï¼ˆå¦‚ watch(() =&gt; obj.xxx)ï¼‰ã€‚</li>
<li><strong>ç¦æ­¢åœ¨ watch ä¸­ä¿®æ”¹ç›‘å¬ç›®æ ‡æœ¬èº«</strong>ï¼šè¿™ä¼šå¯¼è‡´æ— é™å¾ªç¯ï¼ˆæ•°æ®å˜åŒ– â†’ watch æ‰§è¡Œ â†’ ä¿®æ”¹æ•°æ® â†’ å†æ¬¡è§¦å‘ watchï¼‰ã€‚</li>
<li><strong>ç¦æ­¢ç›‘å¬è¿‡å¤šç›®æ ‡</strong>ï¼šä¸€ä¸ª watch ç›‘å¬å¤šä¸ªä¸ç›¸å…³çš„ç›®æ ‡ä¼šå¯¼è‡´é€»è¾‘æ··ä¹±ï¼Œåº”æ‹†åˆ†å¤šä¸ª watchï¼Œæ¯ä¸ª watch ä¸“æ³¨äºä¸€ä¸ªç›‘å¬ç›®æ ‡ã€‚</li>
</ol>
<p>é”™è¯¯ç¤ºä¾‹ï¼ˆè¿‡åº¦æ·±åº¦ç›‘å¬ + å¾ªç¯ä¿®æ”¹ï¼‰ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">const largeObj = ref({ /* å¤§å‹å¯¹è±¡ï¼ŒåŒ…å«å‡ åå±‚åµŒå¥— */ });

// é”™è¯¯ï¼šè¿‡åº¦æ·±åº¦ç›‘å¬ï¼Œä¸¥é‡å½±å“æ€§èƒ½
watch(largeObj, (newObj) =&gt; {
  console.log('å¤§å‹å¯¹è±¡å˜åŒ–', newObj);
}, { deep: true });

// é”™è¯¯ï¼šwatch ä¸­ä¿®æ”¹ç›‘å¬ç›®æ ‡ï¼Œå¯¼è‡´æ— é™å¾ªç¯
const count = ref(0);
watch(count, (newVal) =&gt; {
  count.value = newVal + 1; // ä¿®æ”¹ç›‘å¬ç›®æ ‡ï¼Œè§¦å‘æ— é™å¾ªç¯
});
</code></pre>
<h4 data-id="heading-9">3.3 å®æˆ˜æ³¨æ„ç‚¹</h4>
<ul>
<li>ç›‘å¬å¯¹è±¡å±æ€§ï¼šå¯¹äº reactive å¯¹è±¡çš„å•ä¸ªå±æ€§ï¼Œåº”ä½¿ç”¨å‡½æ•°å½¢å¼æŒ‡å®šç›‘å¬ç›®æ ‡ï¼ˆwatch(() =&gt; obj.xxx, ...)ï¼‰ï¼Œé¿å…ç›´æ¥ç›‘å¬ obj.xxxï¼ˆæ— æ³•æ­£ç¡®è¿½è¸ªï¼‰ã€‚</li>
<li>æ¸…ç†å‰¯ä½œç”¨ï¼šè‹¥ watch ä¸­åŒ…å«å¼‚æ­¥æ“ä½œï¼ˆå¦‚å®šæ—¶å™¨ã€ç½‘ç»œè¯·æ±‚ï¼‰ï¼Œåº”åœ¨å›è°ƒå‡½æ•°ä¸­è¿”å›æ¸…ç†å‡½æ•°ï¼Œé¿å…å†…å­˜æ³„æ¼ï¼ˆå¦‚ç»„ä»¶å¸è½½æ—¶å–æ¶ˆæœªå®Œæˆçš„è¯·æ±‚ï¼‰ã€‚</li>
<li>æ§åˆ¶åˆå§‹æ‰§è¡Œï¼šé€šè¿‡ immediate: true æ§åˆ¶æ˜¯å¦åœ¨åˆå§‹æ—¶æ‰§è¡Œå›è°ƒï¼Œé¿å…é‡å¤ç¼–å†™åˆå§‹åŒ–é€»è¾‘ã€‚</li>
</ul>
<h3 data-id="heading-10">å››ã€watchEffect çš„ä½¿ç”¨è¾¹ç•Œï¼šéšå¼ä¾èµ–ï¼Œç®€åŒ–å‰¯ä½œç”¨</h3>
<p>watchEffect æ˜¯ Vue3 æ–°å¢çš„ APIï¼Œå®ƒçš„æ ¸å¿ƒä¼˜åŠ¿æ˜¯â€œç®€åŒ–â€â€”â€”æ— éœ€æŒ‡å®šç›‘å¬ç›®æ ‡ï¼Œè‡ªåŠ¨è¿½è¸ªå‡½æ•°å†…éƒ¨çš„å“åº”å¼ä¾èµ–ã€‚å…¶ä½¿ç”¨è¾¹ç•Œåœ¨äºï¼š<strong>ä»…ç”¨äºå‰¯ä½œç”¨é€»è¾‘ç®€å•ã€ä¾èµ–æ˜ç¡®ä¸”æ— éœ€è·å–æ—§å€¼çš„åœºæ™¯ï¼Œé¿å…ä¾èµ–æ¨¡ç³Šå¯¼è‡´çš„é€»è¾‘ä¸å¯æ§</strong>ã€‚</p>
<h4 data-id="heading-11">4.1 é€‚ç”¨åœºæ™¯</h4>
<ul>
<li>å‰¯ä½œç”¨é€»è¾‘ä¾èµ–å¤šä¸ªå“åº”å¼æ•°æ®ï¼Œä¸”æ— éœ€åŒºåˆ†å…·ä½“å“ªä¸ªæ•°æ®å˜åŒ–ï¼›</li>
<li>æ— éœ€è·å–æ•°æ®å˜åŒ–å‰åçš„æ—§å€¼ï¼Œåªéœ€åœ¨ä¾èµ–å˜åŒ–æ—¶é‡æ–°æ‰§è¡Œå‰¯ä½œç”¨ï¼›</li>
<li>ç®€å•çš„å‰¯ä½œç”¨æ“ä½œï¼ˆå¦‚æ›´æ–° DOMã€æ‰“å°æ—¥å¿—ã€åŒæ­¥çŠ¶æ€ï¼‰ã€‚</li>
</ul>
<p>ç¤ºä¾‹ï¼šç›‘å¬æœç´¢å…³é”®è¯å’Œåˆ†é¡µå˜åŒ–ï¼Œé‡æ–°è·å–åˆ—è¡¨æ•°æ®ï¼ˆå¤šä¾èµ–ç®€åŒ–ç›‘å¬ï¼‰</p>
<pre><code class="hljs language-ini" lang="ini">import { ref, watchEffect } from 'vue'<span class="hljs-comment">;</span>

const <span class="hljs-attr">keyword</span> = ref(<span class="hljs-string">''</span>)<span class="hljs-comment">;</span>
const <span class="hljs-attr">page</span> = ref(<span class="hljs-number">1</span>)<span class="hljs-comment">;</span>
const <span class="hljs-attr">list</span> = ref([])<span class="hljs-comment">;</span>

// æ­£ç¡®ï¼šwatchEffect è‡ªåŠ¨è¿½è¸ª keyword å’Œ page çš„å˜åŒ–
watchEffect(async () =&gt; {
  const <span class="hljs-attr">res</span> = await fetch(`/api/list?keyword=<span class="hljs-variable">${keyword.value}</span>&amp;page=<span class="hljs-variable">${page.value}</span>`)<span class="hljs-comment">;</span>
  <span class="hljs-attr">list.value</span> = res.json()<span class="hljs-comment">;</span>
})<span class="hljs-comment">;</span>
</code></pre>
<p>ä¸Šè¿°åœºæ™¯è‹¥ç”¨ watch å®ç°ï¼Œéœ€è¦ç›‘å¬ [keyword, page] ä¸¤ä¸ªç›®æ ‡ï¼Œè€Œ watchEffect åªéœ€åœ¨å‡½æ•°å†…éƒ¨ä½¿ç”¨ä¾èµ–ï¼Œå³å¯è‡ªåŠ¨è¿½è¸ªï¼Œä»£ç æ›´ç®€æ´ã€‚</p>
<h4 data-id="heading-12">4.2 ç¦å¿Œè¾¹ç•Œï¼ˆç»å¯¹ä¸èƒ½åšçš„äº‹ï¼‰</h4>
<ol>
<li><strong>ç¦æ­¢ä¾èµ–æ¨¡ç³Šçš„é€»è¾‘</strong>ï¼šè‹¥å‡½æ•°å†…éƒ¨åŒ…å«å¤§é‡æ¡ä»¶åˆ¤æ–­ï¼Œå¯¼è‡´ä¾èµ–å…³ç³»ä¸æ˜ç¡®ï¼Œä¼šå¢åŠ è°ƒè¯•éš¾åº¦ï¼ˆæ— æ³•ç›´è§‚çŸ¥é“å“ªäº›æ•°æ®ä¼šè§¦å‘å‰¯ä½œç”¨ï¼‰ã€‚</li>
<li><strong>ç¦æ­¢éœ€è¦è·å–æ—§å€¼çš„åœºæ™¯</strong>ï¼šwatchEffect æ— æ³•è·å–æ•°æ®å˜åŒ–å‰åçš„æ—§å€¼ï¼Œè‹¥éœ€è¦å¯¹æ¯”æ–°æ—§å€¼ï¼Œå¿…é¡»ä½¿ç”¨ watchã€‚</li>
<li><strong>ç¦æ­¢åœ¨å‡½æ•°å†…éƒ¨åˆ›å»ºæœªæ¸…ç†çš„é•¿æœŸå‰¯ä½œç”¨</strong>ï¼šå¦‚æœªæ¸…é™¤çš„å®šæ—¶å™¨ã€æœªå–æ¶ˆçš„äº‹ä»¶ç›‘å¬ï¼Œä¼šå¯¼è‡´å†…å­˜æ³„æ¼ï¼ˆéœ€ä½¿ç”¨ onInvalidate æ¸…ç†ï¼‰ã€‚</li>
<li><strong>ç¦æ­¢è¿‡åº¦å¤æ‚çš„é€»è¾‘</strong>ï¼šwatchEffect é€‚åˆç®€å•çš„å‰¯ä½œç”¨ï¼Œå¤æ‚é€»è¾‘åº”æ‹†åˆ†ï¼Œé¿å…å‡½æ•°ä½“ç§¯è¿‡å¤§ã€å¯è¯»æ€§å·®ã€‚</li>
</ol>
<p>é”™è¯¯ç¤ºä¾‹ï¼ˆéœ€è¦æ—§å€¼å´ç”¨ watchEffectï¼‰ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">const count = ref(0);

// é”™è¯¯ï¼šéœ€è¦å¯¹æ¯”æ–°æ—§å€¼ï¼ŒwatchEffect æ— æ³•å®ç°
watchEffect((onInvalidate) =&gt; {
  console.log(`count å˜åŒ–äº†ï¼Œæ—§å€¼ï¼š?ï¼Œæ–°å€¼ï¼š${count.value}`); // æ— æ³•è·å–æ—§å€¼
});

// æ­£ç¡®ï¼šä½¿ç”¨ watch è·å–æ–°æ—§å€¼
watch(count, (newVal, oldVal) =&gt; {
  console.log(`count å˜åŒ–äº†ï¼Œæ—§å€¼ï¼š${oldVal}ï¼Œæ–°å€¼ï¼š${newVal}`);
});
</code></pre>
<h4 data-id="heading-13">4.3 å®æˆ˜æ³¨æ„ç‚¹</h4>
<ul>
<li>æ¸…ç†å‰¯ä½œç”¨ï¼šé€šè¿‡ onInvalidate å‡½æ•°æ¸…ç†é•¿æœŸå‰¯ä½œç”¨ï¼ˆå¦‚å®šæ—¶å™¨ã€ç½‘ç»œè¯·æ±‚ï¼‰ï¼Œç¡®ä¿ç»„ä»¶å¸è½½æ—¶ä¸ä¼šæ®‹ç•™èµ„æºã€‚</li>
<li>æ§åˆ¶æ‰§è¡Œæ—¶æœºï¼šé»˜è®¤ watchEffect åœ¨ç»„ä»¶æ¸²æŸ“å‰æ‰§è¡Œï¼Œå¯é€šè¿‡ flush: 'post' é…ç½®æ”¹ä¸ºæ¸²æŸ“åæ‰§è¡Œï¼ˆé¿å…ä¿®æ”¹ DOM å½±å“æ¸²æŸ“ï¼‰ã€‚</li>
<li>æ‰‹åŠ¨åœæ­¢ç›‘å¬ï¼šwatchEffect è¿”å›ä¸€ä¸ªåœæ­¢å‡½æ•°ï¼Œè‹¥éœ€è¦æ¡ä»¶æ€§åœæ­¢ç›‘å¬ï¼ˆå¦‚æŸä¸ªçŠ¶æ€æ»¡è¶³åä¸å†ç›‘å¬ï¼‰ï¼Œå¯è°ƒç”¨è¯¥å‡½æ•°ã€‚</li>
</ul>
<h3 data-id="heading-14">äº”ã€ä¸‰è€…æ ¸å¿ƒå·®å¼‚å¯¹æ¯”ä¸é€‰æ‹©æŒ‡å—</h3>
<p>ä¸ºäº†æ›´æ¸…æ™°åœ°åˆ’åˆ†ä½¿ç”¨è¾¹ç•Œï¼Œæˆ‘ä»¬æ•´ç†äº†ä¸‰è€…çš„æ ¸å¿ƒå·®å¼‚ï¼Œå¹¶ç»™å‡ºå…·ä½“çš„é€‰æ‹©æŒ‡å—ï¼š</p>
<h4 data-id="heading-15">5.1 æ ¸å¿ƒå·®å¼‚å¯¹æ¯”</h4>









































<table><thead><tr><th>ç‰¹æ€§</th><th>computed</th><th>watch</th><th>watchEffect</th></tr></thead><tbody><tr><td>æ ¸å¿ƒå®šä½</td><td>æ´¾ç”ŸçŠ¶æ€ï¼ˆæ•°æ® â†’ æ•°æ®ï¼‰</td><td>ç²¾å‡†ç›‘å¬ï¼ˆæ•°æ® â†’ å‰¯ä½œç”¨ï¼‰</td><td>éšå¼ç›‘å¬ï¼ˆå‰¯ä½œç”¨ â†’ è‡ªåŠ¨è¿½è¸ªæ•°æ®ï¼‰</td></tr><tr><td>æ˜¯å¦éœ€è¦æŒ‡å®šç›®æ ‡</td><td>æ— éœ€ï¼ˆè‡ªåŠ¨è¿½è¸ªä¾èµ–ï¼‰</td><td>éœ€è¦ï¼ˆæ˜ç¡®ç›‘å¬ç›®æ ‡ï¼‰</td><td>æ— éœ€ï¼ˆè‡ªåŠ¨è¿½è¸ªå‡½æ•°å†…ä¾èµ–ï¼‰</td></tr><tr><td>æ˜¯å¦èƒ½è·å–æ—§å€¼</td><td>ä¸èƒ½</td><td>èƒ½ï¼ˆnewVal, oldValï¼‰</td><td>ä¸èƒ½</td></tr><tr><td>æ˜¯å¦æ‰§è¡Œå‰¯ä½œç”¨</td><td>ç¦æ­¢</td><td>å…è®¸ï¼ˆæ ¸å¿ƒç”¨é€”ï¼‰</td><td>å…è®¸ï¼ˆæ ¸å¿ƒç”¨é€”ï¼‰</td></tr><tr><td>ç¼“å­˜æœºåˆ¶</td><td>æœ‰ï¼ˆä¾èµ–ä¸å˜åˆ™ç¼“å­˜ï¼‰</td><td>æ— ï¼ˆå˜åŒ–å³æ‰§è¡Œï¼‰</td><td>æ— ï¼ˆä¾èµ–å˜åŒ–å³æ‰§è¡Œï¼‰</td></tr></tbody></table>
<h4 data-id="heading-16">5.2 é€‰æ‹©æŒ‡å—ï¼ˆä¸€å¥è¯æ€»ç»“ï¼‰</h4>
<ul>
<li>å½“éœ€è¦<strong>æ´¾ç”Ÿæ–°çš„å“åº”å¼æ•°æ®</strong>æ—¶ï¼Œç”¨ computedï¼›</li>
<li>å½“éœ€è¦<strong>ç²¾å‡†ç›‘å¬ç‰¹å®šæ•°æ®å˜åŒ–</strong>ï¼Œä¸”å¯èƒ½éœ€è¦<strong>æ–°æ—§å€¼å¯¹æ¯”</strong>æˆ–<strong>æ§åˆ¶æ‰§è¡Œæ—¶æœº</strong>æ—¶ï¼Œç”¨ watchï¼›</li>
<li>å½“éœ€è¦<strong>æ‰§è¡Œå‰¯ä½œç”¨</strong>ï¼Œä¸”å‰¯ä½œç”¨ä¾èµ–çš„å“åº”å¼æ•°æ®è¾ƒå¤šï¼Œæ— éœ€åŒºåˆ†å…·ä½“ç›®æ ‡ã€æ— éœ€æ–°æ—§å€¼å¯¹æ¯”æ—¶ï¼Œç”¨ watchEffectã€‚</li>
</ul>
<h3 data-id="heading-17">å…­ã€å®æˆ˜é¿å‘ï¼šå¸¸è§è¾¹ç•Œé”™è¯¯ä¸ä¿®å¤æ–¹æ¡ˆ</h3>
<p>ç»“åˆå®é™…å¼€å‘åœºæ™¯ï¼Œæˆ‘ä»¬æ•´ç†äº†ä»¥ä¸‹å¸¸è§çš„è¾¹ç•Œé”™è¯¯åŠå¯¹åº”çš„ä¿®å¤æ–¹æ¡ˆï¼Œå¸®åŠ©å¼€å‘è€…å¿«é€Ÿé¿å‘ï¼š</p>
<h4 data-id="heading-18">6.1 é”™è¯¯ 1ï¼šç”¨ computed å‘é€ç½‘ç»œè¯·æ±‚</h4>
<p>é”™è¯¯åŸå› ï¼šè¿å computed ç¦æ­¢å‰¯ä½œç”¨çš„è¾¹ç•Œã€‚</p>
<pre><code class="hljs language-ini" lang="ini">// é”™è¯¯
const <span class="hljs-attr">userInfo</span> = computed(async () =&gt; {
  const <span class="hljs-attr">res</span> = await fetch(`/api/user/<span class="hljs-variable">${userId.value}</span>`)<span class="hljs-comment">;</span>
  return res.json()<span class="hljs-comment">;</span>
})<span class="hljs-comment">;</span>
</code></pre>
<p>ä¿®å¤æ–¹æ¡ˆï¼šæ”¹ç”¨ watch æˆ– watchEffectï¼ˆæ ¹æ®æ˜¯å¦éœ€è¦ç²¾å‡†ç›‘å¬ï¼‰ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">// æ­£ç¡®ï¼ˆéœ€è¦ç²¾å‡†ç›‘å¬ userIdï¼Œç”¨ watchï¼‰
const <span class="hljs-attr">userInfo</span> = ref(null)<span class="hljs-comment">;</span>
watch(userId, async (newId) =&gt; {
  const <span class="hljs-attr">res</span> = await fetch(`/api/user/<span class="hljs-variable">${newId}</span>`)<span class="hljs-comment">;</span>
  <span class="hljs-attr">userInfo.value</span> = res.json()<span class="hljs-comment">;</span>
}, { immediate: true })<span class="hljs-comment">;</span>
</code></pre>
<h4 data-id="heading-19">6.2 é”™è¯¯ 2ï¼šç”¨ watch ç›‘å¬æ•´ä¸ªå¤§å¯¹è±¡ï¼Œå¼€å¯ deep: true</h4>
<p>é”™è¯¯åŸå› ï¼šè¿‡åº¦æ·±åº¦ç›‘å¬ï¼Œæ€§èƒ½æŸè€—å¤§ã€‚</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-comment">// é”™è¯¯</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">form</span> = <span class="hljs-title function_ invoke__">ref</span>({ <span class="hljs-attr">name</span>: <span class="hljs-string">''</span>, <span class="hljs-attr">age</span>: <span class="hljs-string">''</span>, <span class="hljs-attr">address</span>: { <span class="hljs-attr">province</span>: <span class="hljs-string">''</span>, <span class="hljs-attr">city</span>: <span class="hljs-string">''</span> } });
<span class="hljs-title function_ invoke__">watch</span>(form, (newForm) =&gt; {
  console.<span class="hljs-title function_ invoke__">log</span>(<span class="hljs-string">'è¡¨å•å˜åŒ–'</span>, newForm);
}, { deep: <span class="hljs-literal">true</span> });
</code></pre>
<p>ä¿®å¤æ–¹æ¡ˆï¼šç›‘å¬å¯¹è±¡çš„å…·ä½“å±æ€§ï¼Œé¿å…æ·±åº¦ç›‘å¬æ•´ä¸ªå¯¹è±¡ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ­£ç¡®ï¼ˆç›‘å¬å…·ä½“å±æ€§ï¼‰</span>
<span class="hljs-title function_">watch</span>(
  <span class="hljs-function">() =&gt;</span> [form.<span class="hljs-property">value</span>.<span class="hljs-property">name</span>, form.<span class="hljs-property">value</span>.<span class="hljs-property">address</span>.<span class="hljs-property">city</span>],
  <span class="hljs-function">(<span class="hljs-params">[newName, newCity]</span>) =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å…³é”®å±æ€§å˜åŒ–'</span>, newName, newCity);
  }
);
</code></pre>
<h4 data-id="heading-20">6.3 é”™è¯¯ 3ï¼šç”¨ watchEffect å´éœ€è¦è·å–æ—§å€¼</h4>
<p>é”™è¯¯åŸå› ï¼šè¿å watchEffect æ— æ³•è·å–æ—§å€¼çš„è¾¹ç•Œã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// é”™è¯¯</span>
<span class="hljs-keyword">const</span> count = <span class="hljs-title function_">ref</span>(<span class="hljs-number">0</span>);
<span class="hljs-title function_">watchEffect</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`count ä» <span class="hljs-subst">${?}</span> å˜ä¸º <span class="hljs-subst">${count.value}</span>`</span>); <span class="hljs-comment">// æ— æ³•è·å–æ—§å€¼</span>
});
</code></pre>
<p>ä¿®å¤æ–¹æ¡ˆï¼šæ”¹ç”¨ watchã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ­£ç¡®</span>
<span class="hljs-title function_">watch</span>(count, <span class="hljs-function">(<span class="hljs-params">newVal, oldVal</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`count ä» <span class="hljs-subst">${oldVal}</span> å˜ä¸º <span class="hljs-subst">${newVal}</span>`</span>);
});
</code></pre>
<h3 data-id="heading-21">ä¸ƒã€æ€»ç»“</h3>
<p>Vue3 çš„ computedã€watchã€watchEffect è™½åŒå±å“åº”å¼ä¾èµ–å¤„ç† APIï¼Œä½†è¾¹ç•Œæ¸…æ™°ï¼šcomputed ä¸“æ³¨â€œæ•°æ®æ´¾ç”Ÿâ€ï¼Œwatch ä¸“æ³¨â€œç²¾å‡†å‰¯ä½œç”¨â€ï¼ŒwatchEffect ä¸“æ³¨â€œç®€åŒ–éšå¼ä¾èµ–å‰¯ä½œç”¨â€ã€‚æŒæ¡å®ƒä»¬çš„ä½¿ç”¨è¾¹ç•Œï¼Œæ ¸å¿ƒåœ¨äºç†è§£å…¶è®¾è®¡åˆè¡·â€”â€”é¿å…â€œç”¨é”™å·¥å…·â€å¯¼è‡´çš„æ€§èƒ½é—®é¢˜å’Œé€»è¾‘æ··ä¹±ã€‚</p>
<p>åœ¨å®é™…å¼€å‘ä¸­ï¼Œåº”éµå¾ªâ€œæ•°æ®æ´¾ç”Ÿç”¨ computedï¼Œç²¾å‡†ç›‘å¬ç”¨ watchï¼Œå¤šä¾èµ–å‰¯ä½œç”¨ç”¨ watchEffectâ€çš„åŸåˆ™ï¼ŒåŒæ—¶é¿å¼€å„è‡ªçš„ç¦å¿Œè¾¹ç•Œï¼ˆå¦‚ computed ä¸åšå‰¯ä½œç”¨ã€watch ä¸è¿‡åº¦æ·±åº¦ç›‘å¬ã€watchEffect ä¸ä¾èµ–æ¨¡ç³Šé€»è¾‘ï¼‰ã€‚åªæœ‰ç²¾å‡†æŠŠæ¡è¾¹ç•Œï¼Œæ‰èƒ½å……åˆ†å‘æŒ¥ Vue3 å“åº”å¼ç³»ç»Ÿçš„ä¼˜åŠ¿ï¼Œå†™å‡ºæ›´é«˜æ•ˆã€å¯ç»´æŠ¤çš„ä»£ç ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vue createRenderer è‡ªå®šä¹‰æ¸²æŸ“å™¨ä»å…¥é—¨åˆ°å®æˆ˜]]></title>    <link>https://juejin.cn/post/7593528990846615603</link>    <guid>https://juejin.cn/post/7593528990846615603</guid>    <pubDate>2026-01-10T15:44:50.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7593528990846615603" data-draft-id="7593337928307867674" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vue createRenderer è‡ªå®šä¹‰æ¸²æŸ“å™¨ä»å…¥é—¨åˆ°å®æˆ˜"/> <meta itemprop="keywords" content="Vue.js,å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2026-01-10T15:44:50.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¦‚æœä½ å¥½"/> <meta itemprop="url" content="https://juejin.cn/user/2272012281328215"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vue createRenderer è‡ªå®šä¹‰æ¸²æŸ“å™¨ä»å…¥é—¨åˆ°å®æˆ˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2272012281328215/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¦‚æœä½ å¥½
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-10T15:44:50.000Z" title="Sat Jan 10 2026 15:44:50 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Vue createRenderer è‡ªå®šä¹‰æ¸²æŸ“å™¨ä»å…¥é—¨åˆ°å®æˆ˜</h2>
<blockquote>
<p>ğŸ”¥ Vue 3å®ƒä¸ä»…èƒ½é«˜æ•ˆæ¸²æŸ“æµè§ˆå™¨ DOMï¼Œè¿˜èƒ½å®ç°å°ç¨‹åºã€Native ç­‰å¤šç«¯è¿è¡Œã€‚è€Œæ”¯æ’‘è¿™ä¸€åˆ‡çš„æ ¸å¿ƒï¼Œå°±æ˜¯ <code>createRenderer</code> å‡½æ•°ã€‚å®ƒå…è®¸æˆ‘ä»¬è‡ªå®šä¹‰æ¸²æŸ“é€»è¾‘ï¼Œæ‘†è„± Vue å†…ç½® DOM æ¸²æŸ“çš„é™åˆ¶ï¼Œæ‰“é€ é€‚é…ä»»æ„å¹³å°çš„æ¸²æŸ“å™¨</p>
</blockquote>
<h3 data-id="heading-1">ä¸€ã€è‡ªå®šä¹‰ DOM æ¸²æŸ“å™¨</h3>
<p>ç¤ºä¾‹é‡ç‚¹å®ç°æ”¯æŒäº‹ä»¶ç»‘å®šçš„ <code>patchProp</code> æ–¹æ³•ï¼Œè¿˜ä¼šåŠ å…¥è™šæ‹ŸèŠ‚ç‚¹æ›´æ–°æ¡ˆä¾‹ï¼Œç›´è§‚çœ‹åˆ°æ¸²æŸ“å™¨çš„æ›´æ–°æµç¨‹ã€‚</p>
<h4 data-id="heading-2">å®Œæ•´å¯è¿è¡Œä»£ç </h4>
<pre><code class="hljs language-html" lang="html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"zh-CN"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Vue è‡ªå®šä¹‰æ¸²æŸ“å™¨å…¥é—¨ç¤ºä¾‹<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
  <span class="hljs-comment">&lt;!-- å¼•å…¥ Vue 3 å®Œæ•´ç‰ˆï¼Œæ–¹ä¾¿æµè§ˆå™¨ç›´æ¥è¿è¡Œ --&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://unpkg.com/vue@3/dist/vue.global.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
  <span class="hljs-comment">&lt;!-- æ¸²æŸ“æŒ‚è½½å®¹å™¨ --&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"app"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
    <span class="hljs-comment">// ä» Vue ä¸­è§£æ„å‡º createRenderer å’Œ h å‡½æ•°</span>
    <span class="hljs-keyword">const</span> { createRenderer, h } = <span class="hljs-title class_">Vue</span>;

    <span class="hljs-comment">// 1. åˆ›å»ºè‡ªå®šä¹‰æ¸²æŸ“å™¨ï¼šä¼ å…¥å¹³å°æ¸²æŸ“é…ç½®å¯¹è±¡</span>
    <span class="hljs-keyword">const</span> renderer = <span class="hljs-title function_">createRenderer</span>({
      <span class="hljs-comment">// åˆ›å»ºå…ƒç´ èŠ‚ç‚¹ï¼šæ ¹æ®æ ‡ç­¾ååˆ›å»º DOM å…ƒç´ </span>
      <span class="hljs-title function_">createElement</span>(<span class="hljs-params">tag</span>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`[æ¸²æŸ“æ­¥éª¤] åˆ›å»ºå…ƒç´ èŠ‚ç‚¹ï¼š&lt;<span class="hljs-subst">${tag}</span>&gt;`</span>);
        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(tag);
      },

      <span class="hljs-comment">// æ›´æ–°å…ƒç´ å±æ€§ï¼šæ ¸å¿ƒæ”¹é€ ï¼æ”¯æŒæ™®é€šå±æ€§ + äº‹ä»¶ç»‘å®šï¼ˆonXXX æ ¼å¼ï¼‰</span>
      <span class="hljs-title function_">patchProp</span>(<span class="hljs-params">el, key, prevValue, nextValue</span>) {
        <span class="hljs-comment">// åˆ¤æ–­æ˜¯å¦æ˜¯äº‹ä»¶å±æ€§ï¼ˆä»¥ on å¼€å¤´ï¼Œä¸”ç¬¬äºŒä¸ªå­—æ¯å¤§å†™ï¼Œå¦‚ onClickã€onInputï¼‰</span>
        <span class="hljs-keyword">const</span> isEvent = key.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">'on'</span>) &amp;&amp; <span class="hljs-regexp">/^on[A-Z]/</span>.<span class="hljs-title function_">test</span>(key);
        
        <span class="hljs-keyword">if</span> (isEvent) {
          <span class="hljs-comment">// æå–äº‹ä»¶åï¼ˆå»æ‰ on å‰ç¼€ï¼Œè½¬ä¸ºå°å†™ï¼Œå¦‚ onClick -&gt; clickï¼‰</span>
          <span class="hljs-keyword">const</span> eventName = key.<span class="hljs-title function_">slice</span>(<span class="hljs-number">2</span>).<span class="hljs-title function_">toLowerCase</span>();
          
          <span class="hljs-comment">// ç§»é™¤æ—§çš„äº‹ä»¶ç›‘å¬ï¼ˆå¦‚æœæœ‰æ—§å€¼ï¼‰</span>
          <span class="hljs-keyword">if</span> (prevValue) {
            el.<span class="hljs-title function_">removeEventListener</span>(eventName, prevValue);
          }
          
          <span class="hljs-comment">// ç»‘å®šæ–°çš„äº‹ä»¶ç›‘å¬ï¼ˆå¦‚æœæœ‰æ–°å€¼ï¼‰</span>
          <span class="hljs-keyword">if</span> (nextValue) {
            el.<span class="hljs-title function_">addEventListener</span>(eventName, nextValue);
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`[æ¸²æŸ“æ­¥éª¤] ç»‘å®šäº‹ä»¶ï¼š<span class="hljs-subst">${eventName}</span>ï¼Œå›è°ƒå‡½æ•°å·²æŒ‚è½½`</span>);
          }
        } <span class="hljs-keyword">else</span> {
          <span class="hljs-comment">// æ™®é€šå±æ€§ï¼šç›´æ¥ç”¨ setAttribute å¤„ç†</span>
          <span class="hljs-keyword">if</span> (nextValue === <span class="hljs-literal">undefined</span> || nextValue === <span class="hljs-literal">null</span>) {
            el.<span class="hljs-title function_">removeAttribute</span>(key);
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`[æ¸²æŸ“æ­¥éª¤] ç§»é™¤æ™®é€šå±æ€§ï¼š<span class="hljs-subst">${key}</span>`</span>);
          } <span class="hljs-keyword">else</span> {
            el.<span class="hljs-title function_">setAttribute</span>(key, nextValue);
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`[æ¸²æŸ“æ­¥éª¤] æ›´æ–°æ™®é€šå±æ€§ï¼š<span class="hljs-subst">${key}</span> = <span class="hljs-subst">${nextValue}</span>`</span>);
          }
        }
      },

      <span class="hljs-comment">// æ’å…¥å…ƒç´ ï¼šå°†å­å…ƒç´ æ’å…¥åˆ°çˆ¶å…ƒç´ çš„æŒ‡å®šä½ç½®</span>
      <span class="hljs-title function_">insert</span>(<span class="hljs-params">el, parent, anchor</span>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`[æ¸²æŸ“æ­¥éª¤] æ’å…¥å…ƒç´ ï¼šå°† &lt;<span class="hljs-subst">${el.tagName.toLowerCase()}</span>&gt; æ’å…¥åˆ° &lt;<span class="hljs-subst">${parent.tagName.toLowerCase()}</span>&gt;`</span>);
        parent.<span class="hljs-title function_">insertBefore</span>(el, anchor || <span class="hljs-literal">null</span>);
      },

      <span class="hljs-comment">// ç§»é™¤å…ƒç´ ï¼šä»çˆ¶èŠ‚ç‚¹ä¸­ç§»é™¤å½“å‰å…ƒç´ </span>
      <span class="hljs-title function_">remove</span>(<span class="hljs-params">el</span>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`[æ¸²æŸ“æ­¥éª¤] ç§»é™¤å…ƒç´ ï¼š&lt;<span class="hljs-subst">${el.tagName.toLowerCase()}</span>&gt;`</span>);
        el.<span class="hljs-property">parentNode</span>.<span class="hljs-title function_">removeChild</span>(el);
      },

      <span class="hljs-comment">// åˆ›å»ºæ–‡æœ¬èŠ‚ç‚¹ï¼šåˆ›å»º DOM æ–‡æœ¬èŠ‚ç‚¹</span>
      <span class="hljs-title function_">createText</span>(<span class="hljs-params">text</span>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`[æ¸²æŸ“æ­¥éª¤] åˆ›å»ºæ–‡æœ¬èŠ‚ç‚¹ï¼š<span class="hljs-subst">${text}</span>`</span>);
        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createTextNode</span>(text);
      },

      <span class="hljs-comment">// æ›´æ–°æ–‡æœ¬èŠ‚ç‚¹ï¼šä¿®æ”¹æ–‡æœ¬èŠ‚ç‚¹çš„å†…å®¹</span>
      <span class="hljs-title function_">setText</span>(<span class="hljs-params">node, text</span>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`[æ¸²æŸ“æ­¥éª¤] æ›´æ–°æ–‡æœ¬èŠ‚ç‚¹ï¼š<span class="hljs-subst">${node.nodeValue}</span> â†’ <span class="hljs-subst">${text}</span>`</span>);
        node.<span class="hljs-property">nodeValue</span> = text;
      }
    });

    <span class="hljs-comment">// 2. è·å–æŒ‚è½½å®¹å™¨</span>
    <span class="hljs-keyword">const</span> app = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'app'</span>);

    <span class="hljs-comment">// 3. åˆå§‹è™šæ‹ŸèŠ‚ç‚¹ï¼ˆæ— äº‹ä»¶ï¼‰</span>
    <span class="hljs-keyword">const</span> vnode1 = <span class="hljs-title function_">h</span>(<span class="hljs-string">'div'</span>, { <span class="hljs-attr">title</span>: <span class="hljs-string">'åˆå§‹èŠ‚ç‚¹'</span> }, <span class="hljs-string">'Hello initial vnode'</span>);

    <span class="hljs-comment">// 4. 1ç§’åæ›´æ–°çš„è™šæ‹ŸèŠ‚ç‚¹ï¼ˆå¸¦ onClick äº‹ä»¶ï¼‰</span>
    <span class="hljs-keyword">const</span> vnode2 = <span class="hljs-title function_">h</span>(
      <span class="hljs-string">'div'</span>,
      {
        <span class="hljs-title function_">onClick</span>(<span class="hljs-params"/>) {
          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ›´æ–°äº†ï¼ç‚¹å‡»äº‹ä»¶è§¦å‘æˆåŠŸï½'</span>);
        },
        <span class="hljs-attr">title</span>: <span class="hljs-string">'æ›´æ–°åèŠ‚ç‚¹ï¼ˆå¸¦ç‚¹å‡»äº‹ä»¶ï¼‰'</span> <span class="hljs-comment">// åŒæ—¶æ›´æ–°æ™®é€šå±æ€§</span>
      },
      <span class="hljs-string">'hello world'</span>
    );

    <span class="hljs-comment">// 5. å…ˆæ¸²æŸ“åˆå§‹è™šæ‹ŸèŠ‚ç‚¹</span>
    renderer.<span class="hljs-title function_">render</span>(vnode1, app);

    <span class="hljs-comment">// 6. 1ç§’åæ›´æ–°è™šæ‹ŸèŠ‚ç‚¹ï¼Œè§¦å‘ patchProp å¤„ç†äº‹ä»¶å’Œå±æ€§æ›´æ–°</span>
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'==== å¼€å§‹æ›´æ–°è™šæ‹ŸèŠ‚ç‚¹ ===='</span>);
      renderer.<span class="hljs-title function_">render</span>(vnode2, app);
    }, <span class="hljs-number">1000</span>);
  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<h4 data-id="heading-3">è¿è¡Œæ•ˆæœ</h4>
<ol>
<li>æ‰“å¼€æµè§ˆå™¨è¿è¡Œè¯¥ HTML æ–‡ä»¶ï¼Œé¡µé¢å…ˆæ˜¾ç¤º <code>Hello initial vnode</code>ï¼Œé¼ æ ‡æ‚¬æµ®å¼¹å‡ºã€Œåˆå§‹èŠ‚ç‚¹ã€æç¤ºï¼›</li>
<li>1ç§’åï¼Œæ–‡æœ¬è‡ªåŠ¨æ›´æ–°ä¸º <code>hello world</code>ï¼Œæ‚¬æµ®æç¤ºå˜ä¸ºã€Œæ›´æ–°åèŠ‚ç‚¹ï¼ˆå¸¦ç‚¹å‡»äº‹ä»¶ï¼‰ã€ï¼›</li>
<li>ç‚¹å‡»æ–‡æœ¬æ‰€åœ¨çš„ <code>div</code>ï¼Œæ§åˆ¶å°æ‰“å° <code>æ›´æ–°äº†ï¼ç‚¹å‡»äº‹ä»¶è§¦å‘æˆåŠŸï½</code>ï¼›</li>
<li>å…¨ç¨‹æ§åˆ¶å°ä¼šæ¸…æ™°æ‰“å°æ¸²æŸ“ã€æ›´æ–°ã€äº‹ä»¶ç»‘å®šçš„æ—¥å¿—ï¼Œç›´è§‚çœ‹åˆ°è‡ªå®šä¹‰æ¸²æŸ“å™¨çš„å®Œæ•´æ‰§è¡Œæµç¨‹ã€‚</li>
</ol>
<h3 data-id="heading-4">äºŒã€æ ¸å¿ƒæ‹†è§£ï¼šè¿™æ®µä»£ç åˆ°åº•åœ¨åšä»€ä¹ˆï¼Ÿ</h3>
<p>æˆ‘ä»¬é€éƒ¨åˆ†æ‹†è§£ä»£ç ï¼Œç†è§£ <code>createRenderer</code> çš„æ ¸å¿ƒç»„æˆå’Œå·¥ä½œé€»è¾‘ï¼Œé‡ç‚¹è§£ææ–°å¢çš„è™šæ‹ŸèŠ‚ç‚¹æ›´æ–°æ¡ˆä¾‹ã€‚</p>
<h4 data-id="heading-5">1. æ ¸å¿ƒå¼•å…¥ï¼š<code>createRenderer</code> å’Œ <code>h</code> å‡½æ•°</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> { createRenderer, h } = <span class="hljs-title class_">Vue</span>;
</code></pre>
<p>è¿™ä¸¤ä¸ªå‡½æ•°æ˜¯å®ç°è‡ªå®šä¹‰æ¸²æŸ“çš„å…³é”®ï¼Œå„è‡ªæ‰¿æ‹…æ ¸å¿ƒèŒè´£ï¼š</p>
<ul>
<li><strong><code>createRenderer</code></strong>ï¼šVue 3 æä¾›çš„<strong>æ¸²æŸ“å™¨å·¥å‚å‡½æ•°</strong>ï¼Œæ¥æ”¶ä¸€å¥—ã€Œå¹³å°æ¸²æŸ“æ¥å£ã€ï¼Œè¿”å›ä¸€ä¸ªå…·å¤‡å®Œæ•´æ¸²æŸ“èƒ½åŠ›çš„è‡ªå®šä¹‰æ¸²æŸ“å™¨å®ä¾‹ã€‚è¿™ä¸ªå®ä¾‹æ‹¥æœ‰ <code>createApp</code> å’Œ <code>render</code> æ–¹æ³•ï¼Œå’Œ Vue é»˜è®¤çš„ DOM æ¸²æŸ“å™¨åŠŸèƒ½ä¸€è‡´ï¼Œåªæ˜¯æ¸²æŸ“é€»è¾‘ç”±æˆ‘ä»¬è‡ªå®šä¹‰ã€‚</li>
<li><strong><code>h</code> å‡½æ•°</strong>ï¼šå…¨ç§° <code>createVNode</code>ï¼Œæ ¸å¿ƒä½œç”¨æ˜¯<strong>æ„å»ºè™šæ‹Ÿ DOM èŠ‚ç‚¹ï¼ˆVNodeï¼‰</strong>ã€‚å®ƒæ¥æ”¶æ ‡ç­¾å/ç»„ä»¶ã€å±æ€§å¯¹è±¡ã€å­èŠ‚ç‚¹/æ–‡æœ¬å†…å®¹ï¼Œè¿”å›ä¸€ä¸ªæ ‡å‡†çš„ VNode å¯¹è±¡ï¼Œä½œä¸ºæ¸²æŸ“å™¨çš„è¾“å…¥æ•°æ®ã€‚</li>
</ul>
<h4 data-id="heading-6">2. æ ¸å¿ƒæ­¥éª¤ï¼šåˆ›å»ºè‡ªå®šä¹‰æ¸²æŸ“å™¨ï¼ˆ<code>createRenderer</code>ï¼‰</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> renderer = <span class="hljs-title function_">createRenderer</span>({ <span class="hljs-comment">/* æ¸²æŸ“é…ç½®å¯¹è±¡ */</span> });
</code></pre>
<p><code>createRenderer</code> æ¥æ”¶ä¸€ä¸ª<strong>é…ç½®å¯¹è±¡</strong>ä½œä¸ºå”¯ä¸€å‚æ•°ï¼Œè¿™ä¸ªå¯¹è±¡å¿…é¡»å®ç° 6 ä¸ªæ ¸å¿ƒæ–¹æ³•ï¼Œå®ƒä»¬æ˜¯æ¸²æŸ“å™¨ä¸ã€Œç›®æ ‡å¹³å°ã€çš„äº¤äº’æ¡¥æ¢ï¼Œè´Ÿè´£å°† VNode è½¬æ¢ä¸ºç›®æ ‡å¹³å°çš„çœŸå®èŠ‚ç‚¹ï¼ˆè¿™é‡Œæ˜¯æµè§ˆå™¨ DOMï¼‰ã€‚</p>
<h5 data-id="heading-7">6 ä¸ªæ ¸å¿ƒæ¸²æŸ“æ–¹æ³•è¯¦è§£ï¼ˆDOM å¹³å°ï¼‰</h5>








































<table><thead><tr><th>æ–¹æ³•å</th><th>æ ¸å¿ƒä½œç”¨</th><th>å…¥å‚è¯´æ˜</th></tr></thead><tbody><tr><td><code>createElement</code></td><td>åˆ›å»ºå…ƒç´ èŠ‚ç‚¹</td><td><code>tag</code>ï¼šæ ‡ç­¾åï¼ˆå¦‚ 'div'ã€'p'ï¼‰ï¼Œè¿”å›åˆ›å»ºå¥½çš„ DOM å…ƒç´ </td></tr><tr><td><code>patchProp</code></td><td>æ›´æ–°å…ƒç´ å±æ€§</td><td><code>el</code>ï¼šçœŸå® DOM å…ƒç´ ã€<code>key</code>ï¼šå±æ€§åã€<code>prevValue</code>ï¼šæ—§å±æ€§å€¼ã€<code>nextValue</code>ï¼šæ–°å±æ€§å€¼</td></tr><tr><td><code>insert</code></td><td>æ’å…¥å…ƒç´ </td><td><code>el</code>ï¼šè¦æ’å…¥çš„ DOM å…ƒç´ ã€<code>parent</code>ï¼šçˆ¶ DOM å…ƒç´ ã€<code>anchor</code>ï¼šæ’å…¥å‚è€ƒèŠ‚ç‚¹ï¼ˆnull åˆ™æ’å…¥æœ«å°¾ï¼‰</td></tr><tr><td><code>remove</code></td><td>ç§»é™¤å…ƒç´ </td><td><code>el</code>ï¼šè¦ç§»é™¤çš„ DOM å…ƒç´ </td></tr><tr><td><code>createText</code></td><td>åˆ›å»ºæ–‡æœ¬èŠ‚ç‚¹</td><td><code>text</code>ï¼šæ–‡æœ¬å†…å®¹ï¼Œè¿”å›åˆ›å»ºå¥½çš„ DOM æ–‡æœ¬èŠ‚ç‚¹</td></tr><tr><td><code>setText</code></td><td>æ›´æ–°æ–‡æœ¬èŠ‚ç‚¹</td><td><code>node</code>ï¼šçœŸå® DOM æ–‡æœ¬èŠ‚ç‚¹ã€<code>text</code>ï¼šæ–°çš„æ–‡æœ¬å†…å®¹</td></tr></tbody></table>
<h5 data-id="heading-8">å…³é”®äº®ç‚¹ï¼š<code>patchProp</code> æ”¯æŒäº‹ä»¶ç»‘å®š</h5>
<p>æœ¬æ¬¡æ”¹é€ çš„æ ¸å¿ƒæ˜¯ <code>patchProp</code> æ–¹æ³•ï¼Œå®ƒä¸ä»…èƒ½å¤„ç† <code>title</code> è¿™ç±»æ™®é€šå±æ€§ï¼Œè¿˜èƒ½è¯†åˆ« <code>onClick</code> è¿™ç±»äº‹ä»¶å±æ€§ï¼Œå®ç° DOM äº‹ä»¶çš„ç»‘å®šä¸ç§»é™¤ï¼š</p>
<ul>
<li>å…ˆåˆ¤æ–­å±æ€§æ˜¯å¦ä¸º <code>onXXX</code> æ ¼å¼çš„äº‹ä»¶ï¼›</li>
<li>æå–åŸç”Ÿäº‹ä»¶åï¼ˆ<code>onClick</code> â†’ <code>click</code>ï¼‰ï¼›</li>
<li>éµå¾ªã€Œå…ˆæ¸…åç»‘ã€åŸåˆ™ï¼Œé¿å…é‡å¤ç»‘å®šå¯¼è‡´å¤šæ¬¡è§¦å‘ã€‚</li>
</ul>
<h4 data-id="heading-9">3. æ–°å¢äº®ç‚¹ï¼šè™šæ‹ŸèŠ‚ç‚¹æ›´æ–°æ¡ˆä¾‹ï¼ˆæ ¸å¿ƒè§£æï¼‰</h4>
<p>è‡ªå®šä¹‰æ¸²æŸ“å™¨å¦‚ä½•å¤„ç† VNode æ›´æ–°ï¼Œè¿™ä¹Ÿæ˜¯ Vue å“åº”å¼æ›´æ–°çš„åº•å±‚ç¼©å½±ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// 2. è·å–æŒ‚è½½å®¹å™¨</span>
<span class="hljs-keyword">const</span> app = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'app'</span>);

<span class="hljs-comment">// 3. åˆå§‹è™šæ‹ŸèŠ‚ç‚¹ï¼ˆæ— äº‹ä»¶ï¼‰</span>
<span class="hljs-keyword">const</span> vnode1 = <span class="hljs-title function_">h</span>(<span class="hljs-string">'div'</span>, { <span class="hljs-attr">title</span>: <span class="hljs-string">'åˆå§‹èŠ‚ç‚¹'</span> }, <span class="hljs-string">'Hello initial vnode'</span>);

<span class="hljs-comment">// 4. 1ç§’åæ›´æ–°çš„è™šæ‹ŸèŠ‚ç‚¹ï¼ˆå¸¦ onClick äº‹ä»¶ï¼‰</span>
<span class="hljs-keyword">const</span> vnode2 = <span class="hljs-title function_">h</span>(
  <span class="hljs-string">'div'</span>,
  {
    <span class="hljs-title function_">onClick</span>(<span class="hljs-params"/>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ›´æ–°äº†ï¼ç‚¹å‡»äº‹ä»¶è§¦å‘æˆåŠŸï½'</span>);
    },
    <span class="hljs-attr">title</span>: <span class="hljs-string">'æ›´æ–°åèŠ‚ç‚¹ï¼ˆå¸¦ç‚¹å‡»äº‹ä»¶ï¼‰'</span> <span class="hljs-comment">// åŒæ—¶æ›´æ–°æ™®é€šå±æ€§</span>
  },
  <span class="hljs-string">'hello world'</span>
);

<span class="hljs-comment">// 5. å…ˆæ¸²æŸ“åˆå§‹è™šæ‹ŸèŠ‚ç‚¹</span>
renderer.<span class="hljs-title function_">render</span>(vnode1, app);

<span class="hljs-comment">// 6. 1ç§’åæ›´æ–°è™šæ‹ŸèŠ‚ç‚¹ï¼Œè§¦å‘ patchProp å¤„ç†äº‹ä»¶å’Œå±æ€§æ›´æ–°</span>
<span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'==== å¼€å§‹æ›´æ–°è™šæ‹ŸèŠ‚ç‚¹ ===='</span>);
  renderer.<span class="hljs-title function_">render</span>(vnode2, app);
}, <span class="hljs-number">1000</span>);
</code></pre>
<h5 data-id="heading-10">è¿™æ®µä»£ç çš„æ ¸å¿ƒé€»è¾‘ï¼š</h5>
<ol>
<li><strong>åˆå§‹æ¸²æŸ“</strong>ï¼šè°ƒç”¨ <code>renderer.render(vnode1, app)</code>ï¼Œæ¸²æŸ“å™¨å°† <code>vnode1</code> è½¬æ¢ä¸ºçœŸå® DOMï¼Œæ’å…¥åˆ°æŒ‚è½½å®¹å™¨ä¸­ï¼Œå®Œæˆé¦–æ¬¡æ¸²æŸ“ï¼›</li>
<li><strong>å»¶è¿Ÿæ›´æ–°</strong>ï¼š1 ç§’åè°ƒç”¨ <code>renderer.render(vnode2, app)</code>ï¼Œæ¸²æŸ“å™¨ä¼šè‡ªåŠ¨å¯¹æ¯” <code>vnode1</code> å’Œ <code>vnode2</code> çš„å·®å¼‚ï¼ˆå±æ€§ã€æ–‡æœ¬å†…å®¹ï¼‰ï¼›</li>
<li><strong>å·®å¼‚æ›´æ–°</strong>ï¼š
<ul>
<li>å¯¹äº <code>title</code> å±æ€§ï¼šè§¦å‘ <code>patchProp</code> æ–¹æ³•ï¼Œå°†æ—§å€¼ã€Œåˆå§‹èŠ‚ç‚¹ã€æ›´æ–°ä¸ºæ–°å€¼ã€Œæ›´æ–°åèŠ‚ç‚¹ï¼ˆå¸¦ç‚¹å‡»äº‹ä»¶ï¼‰ã€ï¼›</li>
<li>å¯¹äº <code>onClick</code> äº‹ä»¶ï¼šè§¦å‘ <code>patchProp</code> æ–¹æ³•ï¼Œç»‘å®šæ–°çš„ç‚¹å‡»äº‹ä»¶å›è°ƒï¼›</li>
<li>å¯¹äºæ–‡æœ¬å†…å®¹ï¼šè§¦å‘ <code>setText</code> æ–¹æ³•ï¼Œå°†ã€ŒHello initial vnodeã€æ›´æ–°ä¸ºã€Œhello worldã€ï¼›</li>
</ul>
</li>
<li><strong>æ— å…¨é‡é‡å»º</strong>ï¼šæ•´ä¸ªæ›´æ–°è¿‡ç¨‹æ²¡æœ‰åˆ é™¤æ—§ DOM å†åˆ›å»ºæ–° DOMï¼Œè€Œæ˜¯åªæ›´æ–°æœ‰å·®å¼‚çš„éƒ¨åˆ†ï¼Œè¿™ä¹Ÿæ˜¯ Vue æ¸²æŸ“é«˜æ•ˆçš„æ ¸å¿ƒåŸå› ã€‚</li>
</ol>
<h4 data-id="heading-11">4. æŒ‚è½½åº”ç”¨çš„ä¸¤ç§æ–¹å¼</h4>
<p>æ¡ˆä¾‹ä½¿ç”¨ <code>renderer.render(vnode, container)</code> ç›´æ¥æ¸²æŸ“ VNodeï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ <code>renderer.createApp(component).mount(container)</code> æŒ‚è½½ç»„ä»¶ï¼Œä¸¤ç§æ–¹å¼å‡æœ‰æ•ˆï¼š</p>
<ul>
<li>ç›´æ¥æ¸²æŸ“ VNodeï¼šæ›´çµæ´»ï¼Œé€‚åˆæ‰‹åŠ¨æ§åˆ¶æ¸²æŸ“æµç¨‹ï¼ˆå¦‚æœ¬æ¬¡çš„å»¶è¿Ÿæ›´æ–°æ¡ˆä¾‹ï¼‰ï¼›</li>
<li>é€šè¿‡ <code>createApp</code> æŒ‚è½½ï¼šæ›´è´´è¿‘æ—¥å¸¸ Vue å¼€å‘ï¼Œé€‚åˆç»„ä»¶åŒ–å¼€å‘åœºæ™¯ã€‚</li>
</ul>
<h3 data-id="heading-12">ä¸‰ã€æ·±å…¥ç†è§£ï¼šè‡ªå®šä¹‰æ¸²æŸ“å™¨çš„å·¥ä½œæµç¨‹</h3>
<p>æ•´ä¸ªæ¸²æŸ“ä¸æ›´æ–°è¿‡ç¨‹å¯ä»¥æ€»ç»“ä¸º 4 ä¸ªæ ¸å¿ƒæ­¥éª¤ï¼Œå½¢æˆä¸€ä¸ªå®Œæ•´çš„é—­ç¯ï¼š</p>
<ol>
<li><strong>ç”Ÿæˆ VNode</strong>ï¼šé€šè¿‡ <code>h</code> å‡½æ•°åˆ›å»ºæ ‡å‡† VNodeï¼Œæä¾›æ¸²æŸ“çš„æ•°æ®æºï¼›</li>
<li><strong>é¦–æ¬¡æ¸²æŸ“</strong>ï¼šæ¸²æŸ“å™¨è°ƒç”¨ 6 ä¸ªæ ¸å¿ƒæ–¹æ³•ï¼Œå°† VNode è½¬æ¢ä¸ºçœŸå®èŠ‚ç‚¹ï¼Œæ’å…¥åˆ°æŒ‚è½½å®¹å™¨ä¸­ï¼›</li>
<li><strong>VNode å¯¹æ¯”</strong>ï¼šæ›´æ–°æ—¶ï¼Œæ¸²æŸ“å™¨å¯¹æ¯”æ–°æ—§ VNodeï¼Œæ‰¾å‡ºå±æ€§ã€æ–‡æœ¬ç­‰å·®å¼‚ï¼›</li>
<li><strong>å·®å¼‚æ›´æ–°</strong>ï¼šé’ˆå¯¹å·®å¼‚éƒ¨åˆ†ï¼Œè°ƒç”¨å¯¹åº”çš„ <code>patchProp</code>ã€<code>setText</code> ç­‰æ–¹æ³•ï¼Œæ›´æ–°çœŸå®èŠ‚ç‚¹ï¼Œæ— éœ€å…¨é‡é‡å»ºã€‚</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»10åˆ†é’Ÿåˆ°30ç§’ï¼Webpack æ‰“åŒ…æ•ˆç‡ä¼˜åŒ–å®æˆ˜æŒ‡å—]]></title>    <link>https://juejin.cn/post/7593337928307916826</link>    <guid>https://juejin.cn/post/7593337928307916826</guid>    <pubDate>2026-01-10T15:51:45.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7593337928307916826" data-draft-id="7593541291012079643" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»10åˆ†é’Ÿåˆ°30ç§’ï¼Webpack æ‰“åŒ…æ•ˆç‡ä¼˜åŒ–å®æˆ˜æŒ‡å—"/> <meta itemprop="keywords" content="Webpack,æ€§èƒ½ä¼˜åŒ–"/> <meta itemprop="datePublished" content="2026-01-10T15:51:45.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æŠŠæ‘¸é±¼åšå¤§åšå¼º"/> <meta itemprop="url" content="https://juejin.cn/user/3526889032921223"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»10åˆ†é’Ÿåˆ°30ç§’ï¼Webpack æ‰“åŒ…æ•ˆç‡ä¼˜åŒ–å®æˆ˜æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3526889032921223/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æŠŠæ‘¸é±¼åšå¤§åšå¼º
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-10T15:51:45.000Z" title="Sat Jan 10 2026 15:51:45 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    5
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>ä½œä¸ºå‰ç«¯å¼€å‘è€…ï¼Œä½ æ˜¯å¦ç»å†è¿‡è¿™äº›ç»æœ›æ—¶åˆ»ï¼š</p>
<ul>
<li>å¼€å‘æ—¶æ”¹ä¸€è¡Œä»£ç ï¼Œçƒ­æ›´æ–°è¦ç­‰åŠåˆ†é’Ÿï¼›</li>
<li>ç”Ÿäº§ç¯å¢ƒæ‰“åŒ…ï¼Œå–ä¸¤æ¯å’–å•¡å›æ¥è¿˜æ²¡ç»“æŸï¼›</li>
<li>é¡¹ç›®è¶Šå¤§ï¼Œæ‰“åŒ…é€Ÿåº¦è¶Šæ…¢ï¼Œæœ€åç”šè‡³å½±å“è¿­ä»£æ•ˆç‡ã€‚</li>
</ul>
<p>Webpack ä½œä¸ºå‰ç«¯å·¥ç¨‹åŒ–çš„æ ¸å¿ƒå·¥å…·ï¼Œå…¶æ‰“åŒ…æ•ˆç‡ç›´æ¥å†³å®šäº†å¼€å‘ä½“éªŒå’Œå‘å¸ƒæ•ˆç‡ã€‚æœ¬æ–‡ç»“åˆå®æˆ˜ç»éªŒï¼Œæ•´ç†äº†ä¸€å¥—â€œä»åŸºç¡€åˆ°è¿›é˜¶â€çš„ Webpack æ‰“åŒ…ä¼˜åŒ–æ–¹æ¡ˆï¼Œå¸®ä½ æŠŠæ‰“åŒ…æ—¶é—´ä»â€œåˆ†é’Ÿçº§â€å‹ç¼©åˆ°â€œç§’çº§â€ï¼Œäº²æµ‹æœ‰æ•ˆï¼</p>
<p>å…ˆæ˜ç¡®æ ¸å¿ƒä¼˜åŒ–æ€è·¯ï¼š<strong>è®© Webpack åªåšå¿…è¦çš„äº‹ï¼Œå‡å°‘æ— æ•ˆå·¥ä½œï¼›è®©é‡å¤å·¥ä½œå¤ç”¨ç»“æœï¼›è®©å¤šæ ¸ CPU å¹¶è¡Œå¹²æ´»</strong>ã€‚ä¸‹é¢æŒ‰è¿™ä¸ªæ€è·¯é€æ­¥æ‹†è§£ã€‚</p>
<h2 data-id="heading-1">ä¸€ã€åŸºç¡€ä¼˜åŒ–ï¼šç«‹ç«¿è§å½±çš„â€œå‡æ³•æ“ä½œâ€</h2>
<p>æ‰“åŒ…æ…¢çš„æ ¸å¿ƒåŸå› ä¹‹ä¸€æ˜¯ Webpack å¤„ç†äº†è¿‡å¤šä¸å¿…è¦çš„æ–‡ä»¶ã€‚è¿™ä¸€æ­¥å…ˆé€šè¿‡â€œç¼©å°å¤„ç†èŒƒå›´â€åšå‡æ³•ï¼Œä¼˜åŒ–æˆæœ¬æœ€ä½ï¼Œæ•ˆæœæœ€æ˜æ˜¾ã€‚</p>
<h3 data-id="heading-2">1. ç²¾å‡†é™å®š loader å¤„ç†èŒƒå›´</h3>
<p>loader æ˜¯æ‰“åŒ…è€—æ—¶çš„é‡ç¾åŒºï¼ˆæ¯”å¦‚ babel-loaderã€css-loaderï¼‰ï¼Œå¾ˆå¤šæ—¶å€™æˆ‘ä»¬ä¼šè®© loader å¤„ç†æ‰€æœ‰ç¬¦åˆè§„åˆ™çš„æ–‡ä»¶ï¼Œä½†å®é™…ä¸Šåªæœ‰ <code>src</code> ç›®å½•ä¸‹çš„æºç éœ€è¦å¤„ç†ï¼Œ<code>node_modules</code> é‡Œçš„ç¬¬ä¸‰æ–¹åº“æ—©å·²æ˜¯ç¼–è¯‘å¥½çš„ä»£ç ï¼Œæ— éœ€é‡å¤å¤„ç†ã€‚</p>
<p>ä¼˜åŒ–æ–¹æ¡ˆï¼šç”¨ <code>include</code> é™å®šå¤„ç†ç›®å½•ï¼Œ<code>exclude</code> æ’é™¤æ— éœ€å¤„ç†çš„ç›®å½•ï¼ˆ<code>exclude</code> ä¼˜å…ˆçº§æ›´é«˜ï¼‰ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">'path'</span>);

<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">module</span>: {
    <span class="hljs-attr">rules</span>: [
      {
        <span class="hljs-attr">test</span>: <span class="hljs-regexp">/.js$/</span>, <span class="hljs-comment">// åŒ¹é… js æ–‡ä»¶</span>
        <span class="hljs-attr">include</span>: path.<span class="hljs-title function_">resolve</span>(__dirname, <span class="hljs-string">'src'</span>), <span class="hljs-comment">// åªå¤„ç† src ç›®å½•ä¸‹çš„ js</span>
        <span class="hljs-attr">exclude</span>: <span class="hljs-regexp">/node_modules/</span>, <span class="hljs-comment">// æ’é™¤ node_modulesï¼ˆç¬¬ä¸‰æ–¹åº“æ— éœ€ babel è½¬è¯‘ï¼‰</span>
        <span class="hljs-attr">use</span>: <span class="hljs-string">'babel-loader'</span>,
      },
      {
        <span class="hljs-attr">test</span>: <span class="hljs-regexp">/.css$/</span>,
        <span class="hljs-attr">include</span>: path.<span class="hljs-title function_">resolve</span>(__dirname, <span class="hljs-string">'src'</span>),
        <span class="hljs-attr">exclude</span>: <span class="hljs-regexp">/node_modules/</span>,
        <span class="hljs-attr">use</span>: [<span class="hljs-string">'style-loader'</span>, <span class="hljs-string">'css-loader'</span>],
      }
    ],
  },
};
</code></pre>
<p>é¿å‘æç¤ºï¼šä¸è¦ç”¨ <code>exclude: /node_modules/</code> åŒæ—¶åˆç”¨ <code>include: é src ç›®å½•</code>ï¼Œå®¹æ˜“å¯¼è‡´è§„åˆ™å†²çªï¼Œä¼˜å…ˆç”¨ <code>include</code> ç²¾å‡†åŒ¹é…ã€‚</p>
<h3 data-id="heading-3">2. ä¼˜åŒ– resolve é…ç½®ï¼šå‡å°‘æ–‡ä»¶æŸ¥æ‰¾æ—¶é—´</h3>
<p>Webpack è§£ææ¨¡å—æ—¶ä¼šæŒ‰è§„åˆ™éå†æŸ¥æ‰¾æ–‡ä»¶ï¼Œæ¯”å¦‚é»˜è®¤ä¼šæŸ¥æ‰¾ <code>.js</code>ã€<code>.json</code>ã€<code>.jsx</code> ç­‰å¤šç§åç¼€ï¼Œè¿˜ä¼šå‘ä¸Šçº§ç›®å½•æŸ¥æ‰¾ <code>node_modules</code>ï¼Œè¿™äº›éƒ½éœ€è¦è€—æ—¶ã€‚</p>
<p>ä¼˜åŒ–æ–¹æ¡ˆï¼š</p>
<ul>
<li>é™å®šæ‰©å±•åï¼šåªä¿ç•™å¸¸ç”¨åç¼€ï¼ŒæŒ‰ä½¿ç”¨é¢‘ç‡æ’åºï¼›</li>
<li>æŒ‡å®šæ¨¡å—æŸ¥æ‰¾ç›®å½•ï¼šä¼˜å…ˆåœ¨é¡¹ç›®æœ¬åœ° <code>node_modules</code> æŸ¥æ‰¾ï¼Œé¿å…å‘ä¸Šçº§ç›®å½•éå†ï¼›</li>
<li>é…ç½®åˆ«åï¼šç¼©çŸ­å¸¸ç”¨ç›®å½•çš„æŸ¥æ‰¾è·¯å¾„ï¼Œæ¯”å¦‚ç”¨<code>@</code> ä»£æ›¿ <code>src</code>ã€‚</li>
</ul>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">module</span>.<span class="hljs-keyword">exports</span> = {
  resolve: {
    <span class="hljs-comment">// 1. é™å®šæ‰©å±•åï¼ŒæŒ‰ä½¿ç”¨é¢‘ç‡æ’åºï¼ˆå‡å°‘éå†æ¬¡æ•°ï¼‰</span>
    extensions: [<span class="hljs-string">'.js'</span>, <span class="hljs-string">'.jsx'</span>, <span class="hljs-string">'.json'</span>],
    <span class="hljs-comment">// 2. æŒ‡å®šæ¨¡å—æŸ¥æ‰¾ç›®å½•ï¼ˆä¼˜å…ˆæœ¬åœ° node_modulesï¼‰</span>
    modules: [path.resolve(__dirname, <span class="hljs-string">'node_modules'</span>)],
    <span class="hljs-comment">// 3. é…ç½®åˆ«åï¼ˆç¼©çŸ­è·¯å¾„æŸ¥æ‰¾ï¼ŒåŒæ—¶ç®€åŒ–ä»£ç å¼•å…¥ï¼‰</span>
    alias: {
      <span class="hljs-string">'@'</span>: path.resolve(__dirname, <span class="hljs-string">'src'</span>),
      <span class="hljs-string">'components'</span>: path.resolve(__dirname, <span class="hljs-string">'src/components'</span>),
      <span class="hljs-comment">// å¯¹ç¬¬ä¸‰æ–¹åº“ä¹Ÿå¯é…ç½®åˆ«åï¼Œç›´æ¥æŒ‡å‘ä¼˜åŒ–åçš„ç‰ˆæœ¬</span>
      <span class="hljs-string">'react$'</span>: <span class="hljs-string">'react/dist/react.production.min.js'</span>,
      <span class="hljs-string">'react-dom$'</span>: <span class="hljs-string">'react-dom/dist/react-dom.production.min.js'</span>
    },
  },
};
</code></pre>
<p>æ•ˆæœï¼šæ¨¡å—æŸ¥æ‰¾æ—¶é—´å‡å°‘ 30%+ï¼ŒåŒæ—¶ä»£ç ä¸­å¼•å…¥ç»„ä»¶å¯ä»¥å†™æˆ <code>import Button from '@/components/Button'</code>ï¼Œæ›´ç®€æ´ã€‚</p>
<h3 data-id="heading-4">3. ç”¨ externals æ’é™¤ç¬¬ä¸‰æ–¹åº“æ‰“åŒ…</h3>
<p>Reactã€Vueã€jQuery è¿™ç±»ç¬¬ä¸‰æ–¹åº“ä½“ç§¯å¤§ã€ä¸å¸¸å˜åŠ¨ï¼Œæ¯æ¬¡æ‰“åŒ…éƒ½è¦é‡å¤è§£æã€å‹ç¼©ï¼Œéå¸¸è€—æ—¶ã€‚æˆ‘ä»¬å¯ä»¥æŠŠå®ƒä»¬ä»æ‰“åŒ…æµç¨‹ä¸­æ’é™¤ï¼Œæ”¹ç”¨ CDN å¼•å…¥ã€‚</p>
<p>ä¼˜åŒ–æ–¹æ¡ˆï¼šé…ç½® <code>externals</code>ï¼Œå‘Šè¯‰ Webpack è¿™äº›æ¨¡å—ä¸éœ€è¦æ‰“åŒ…ï¼Œè¿è¡Œæ—¶ä»å…¨å±€å˜é‡è·å–ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">module</span>.<span class="hljs-keyword">exports</span> = {
  externals: {
    <span class="hljs-comment">// é”®ï¼šä»£ç ä¸­ import çš„åç§°ï¼›å€¼ï¼šCDN å¼•å…¥åæš´éœ²çš„å…¨å±€å˜é‡å</span>
    react: <span class="hljs-string">'React'</span>,
    <span class="hljs-string">'react-dom'</span>: <span class="hljs-string">'ReactDOM'</span>,
    vue: <span class="hljs-string">'Vue'</span>,
    jquery: <span class="hljs-string">'jQuery'</span>
  },
};
</code></pre>
<p>ç„¶ååœ¨ <code>index.html</code> ä¸­å¼•å…¥ CDN èµ„æºï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- å¼•å…¥ React å’Œ ReactDOM çš„ CDN --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://cdn.jsdelivr.net/npm/react@18/umd/react.production.min.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://cdn.jsdelivr.net/npm/react-dom@18/umd/react-dom.production.min.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-comment">&lt;!-- å¼•å…¥ Vue çš„ CDN --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://cdn.jsdelivr.net/npm/vue@3/dist/vue.global.prod.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p>æ•ˆæœï¼šæ‰“åŒ…ä½“ç§¯å¤§å¹…å‡å°ï¼Œæ‰“åŒ…æ—¶é—´ç›´æ¥å‡å°‘ 20%-50%ï¼ˆå–å†³äºç¬¬ä¸‰æ–¹åº“çš„ä½“ç§¯ï¼‰ã€‚</p>
<h2 data-id="heading-5">äºŒã€è¿›é˜¶ä¼˜åŒ–ï¼šå¤ç”¨ç»“æœï¼Œé¿å…é‡å¤å·¥ä½œ</h2>
<p>å¾ˆå¤šæ—¶å€™æ‰“åŒ…æ…¢æ˜¯å› ä¸ºâ€œé‡å¤åŠ³åŠ¨â€â€”â€”æ¯”å¦‚æ¯æ¬¡æ‰“åŒ…éƒ½é‡æ–°ç¼–è¯‘æ‰€æœ‰æ–‡ä»¶ï¼Œå“ªæ€•å¤§éƒ¨åˆ†æ–‡ä»¶æ²¡å˜åŠ¨ã€‚è¿™ä¸€æ­¥é€šè¿‡â€œç¼“å­˜â€å¤ç”¨ä¹‹å‰çš„æ„å»ºç»“æœï¼Œè®© Webpack åªå¤„ç†å˜åŠ¨çš„æ–‡ä»¶ã€‚</p>
<h3 data-id="heading-6">1. Webpack 5 å†…ç½®ç¼“å­˜ï¼ˆæ¨èï¼‰</h3>
<p>Webpack 5 è‡ªå¸¦äº†æŒä¹…åŒ–ç¼“å­˜æœºåˆ¶ï¼Œæ— éœ€é¢å¤–å®‰è£…æ’ä»¶ï¼Œå¼€å¯åä¼šæŠŠæ„å»ºç»“æœç¼“å­˜åˆ°æ–‡ä»¶ç³»ç»Ÿï¼Œä¸‹æ¬¡æ„å»ºæ—¶ç›´æ¥å¤ç”¨æœªå˜åŠ¨æ¨¡å—çš„ç¼“å­˜ã€‚</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-keyword">module</span>.exports = {
  cache: {
    type: <span class="hljs-string">'filesystem'</span>, <span class="hljs-comment">// ç¼“å­˜ç±»å‹ï¼šæ–‡ä»¶ç³»ç»Ÿï¼ˆæ¯”å†…å­˜ç¼“å­˜æ›´æŒä¹…ï¼Œé‡å¯ç»ˆç«¯ä¸ä¸¢å¤±ï¼‰</span>
    cacheDirectory: path.<span class="hljs-built_in">resolve</span>(__dirname, <span class="hljs-string">'node_modules/.cache/webpack'</span>), <span class="hljs-comment">// ç¼“å­˜å­˜æ”¾ç›®å½•</span>
    <span class="hljs-comment">// å¯é€‰ï¼šè‡ªå®šä¹‰ç¼“å­˜å¤±æ•ˆè§„åˆ™ï¼ˆé»˜è®¤æ–‡ä»¶å†…å®¹å˜åŠ¨åˆ™å¤±æ•ˆï¼‰</span>
    buildDependencies: {
      config: [__filename] <span class="hljs-comment">// å½“ webpack é…ç½®æ–‡ä»¶å˜åŠ¨æ—¶ï¼Œç¼“å­˜å¤±æ•ˆ</span>
    }
  },
};
</code></pre>
<p>æ•ˆæœï¼šé¦–æ¬¡æ‰“åŒ…åï¼Œåç»­å¢é‡æ„å»ºé€Ÿåº¦æå‡ 60%+ï¼Œæ¯”å¦‚ä¹‹å‰æ”¹ä¸€è¡Œä»£ç è¦ç­‰ 20 ç§’ï¼Œå¼€å¯åå¯èƒ½åªéœ€è¦ 5 ç§’ã€‚</p>
<h3 data-id="heading-7">2. å¼€å¯ loader ç¼“å­˜ï¼ˆé’ˆå¯¹æ€§ä¼˜åŒ–ï¼‰</h3>
<p>babel-loader å¤„ç† JS/JSX æ—¶è€—æ—¶è¾ƒé«˜ï¼Œå¼€å¯å®ƒçš„ä¸“å±ç¼“å­˜ï¼Œèƒ½é¿å…é‡å¤ç¼–è¯‘ç›¸åŒçš„æ–‡ä»¶ã€‚</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-string">module.exports</span> <span class="hljs-string">=</span> {
  <span class="hljs-attr">module:</span> {
    <span class="hljs-attr">rules:</span> [
      {
        <span class="hljs-attr">test:</span> <span class="hljs-string">/.js$/</span>,
        <span class="hljs-attr">exclude:</span> <span class="hljs-string">/node_modules/</span>,
        <span class="hljs-attr">use:</span> {
          <span class="hljs-attr">loader:</span> <span class="hljs-string">'babel-loader'</span>,
          <span class="hljs-attr">options:</span> {
            <span class="hljs-attr">cacheDirectory:</span> <span class="hljs-literal">true</span>, <span class="hljs-string">//</span> <span class="hljs-string">å¼€å¯ç¼“å­˜ï¼Œé»˜è®¤ç¼“å­˜åˆ°</span> <span class="hljs-string">node_modules/.cache/babel-loader</span>
            <span class="hljs-attr">cacheCompression:</span> <span class="hljs-literal">false</span>, <span class="hljs-string">//</span> <span class="hljs-string">å¼€å‘ç¯å¢ƒå…³é—­ç¼“å­˜å‹ç¼©ï¼ˆæå‡ç¼“å­˜è¯»å–é€Ÿåº¦ï¼‰</span>
          },
        },
      },
    ],
  },
}<span class="hljs-string">;</span>
</code></pre>
<h3 data-id="heading-8">3. ç”Ÿäº§ç¯å¢ƒï¼šhard-source-webpack-pluginï¼ˆå¯é€‰ï¼‰</h3>
<p>å¦‚æœéœ€è¦æ›´æŒä¹…çš„ç¼“å­˜ï¼ˆæ¯”å¦‚è·¨æ„å»ºè¿‡ç¨‹å¤ç”¨ï¼‰ï¼Œå¯ä»¥ä½¿ç”¨ <code>hard-source-webpack-plugin</code>ï¼Œå®ƒä¼šä¸ºæ¯ä¸ªæ¨¡å—ç”Ÿæˆç‹¬ç«‹çš„ç¼“å­˜ï¼Œé¦–æ¬¡æ‰“åŒ…åï¼Œåç»­æ‰“åŒ…é€Ÿåº¦æå‡ 50%+ã€‚</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å®‰è£…</span>
npm install hard-source-webpack-plugin --save-dev
</code></pre>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title class_">HardSourceWebpackPlugin</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">'hard-source-webpack-plugin'</span>);

<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">plugins</span>: [
    <span class="hljs-keyword">new</span> <span class="hljs-title class_">HardSourceWebpackPlugin</span>(), <span class="hljs-comment">// å¯ç”¨ç¡¬ç¼“å­˜</span>
    <span class="hljs-keyword">new</span> <span class="hljs-title class_">HardSourceWebpackPlugin</span>.<span class="hljs-title class_">ExcludeModulePlugin</span>([
      {
        <span class="hljs-attr">test</span>: <span class="hljs-regexp">/mini-css-extract-plugin[\/]dist[\/]loader/</span>, <span class="hljs-comment">// æ’é™¤éƒ¨åˆ†æ˜“å‡ºé”™çš„ loader</span>
      },
    ]),
  ],
};
</code></pre>
<p>æ³¨æ„ï¼šå¼€å‘ç¯å¢ƒä¼˜å…ˆç”¨ Webpack å†…ç½®ç¼“å­˜ï¼Œç”Ÿäº§ç¯å¢ƒå¯æ ¹æ®éœ€æ±‚é€‰æ‹©ï¼›å¦‚æœé¡¹ç›®ä¾èµ–é¢‘ç¹å˜åŠ¨ï¼Œç¡¬ç¼“å­˜å¯èƒ½å¯¼è‡´ç¼“å­˜å¤±æ•ˆä¸åŠæ—¶ï¼Œéœ€è°¨æ…ä½¿ç”¨ã€‚</p>
<h2 data-id="heading-9">ä¸‰ã€å¹¶è¡Œä¼˜åŒ–ï¼šè®©å¤šæ ¸ CPU ç«åŠ›å…¨å¼€</h2>
<p>Webpack é»˜è®¤æ˜¯å•è¿›ç¨‹è¿è¡Œçš„ï¼Œåªèƒ½åˆ©ç”¨ CPU çš„ä¸€ä¸ªæ ¸å¿ƒï¼Œè€Œç°ä»£ç”µè„‘éƒ½æ˜¯å¤šæ ¸ CPUï¼Œè¿™å°±é€ æˆäº†èµ„æºæµªè´¹ã€‚é€šè¿‡å¤šè¿›ç¨‹/å¤šçº¿ç¨‹è®©å¤šä¸ªæ ¸å¿ƒåŒæ—¶å¹²æ´»ï¼Œèƒ½å¤§å¹…æå‡æ‰“åŒ…é€Ÿåº¦ã€‚</p>
<h3 data-id="heading-10">1. thread-loaderï¼šå¤šçº¿ç¨‹å¤„ç† loader</h3>
<p>æŠŠè€—æ—¶çš„ loaderï¼ˆå¦‚ babel-loaderã€ts-loaderï¼‰æ”¾åˆ°ç‹¬ç«‹çš„çº¿ç¨‹ä¸­å¤„ç†ï¼Œä¸»çº¿ç¨‹åªè´Ÿè´£ç»Ÿç­¹ï¼Œä¸é˜»å¡æ„å»ºæµç¨‹ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">module</span>: {
    <span class="hljs-attr">rules</span>: [
      {
        <span class="hljs-attr">test</span>: <span class="hljs-regexp">/.js$/</span>,
        <span class="hljs-attr">exclude</span>: <span class="hljs-regexp">/node_modules/</span>,
        <span class="hljs-attr">use</span>: [
          <span class="hljs-comment">// thread-loader å¿…é¡»æ”¾åœ¨è€—æ—¶ loader å‰é¢</span>
          {
            <span class="hljs-attr">loader</span>: <span class="hljs-string">'thread-loader'</span>,
            <span class="hljs-attr">options</span>: {
              <span class="hljs-attr">workers</span>: <span class="hljs-built_in">require</span>(<span class="hljs-string">'os'</span>).<span class="hljs-title function_">cpus</span>().<span class="hljs-property">length</span> - <span class="hljs-number">1</span>, <span class="hljs-comment">// çº¿ç¨‹æ•° = CPU æ ¸å¿ƒæ•° - 1ï¼ˆé¿å…å æ»¡ CPUï¼‰</span>
              <span class="hljs-attr">workerNodeArgs</span>: [<span class="hljs-string">'--max-old-space-size=1024'</span>], <span class="hljs-comment">// ç»™æ¯ä¸ªçº¿ç¨‹åˆ†é…å†…å­˜</span>
            },
          },
          <span class="hljs-string">'babel-loader'</span>, <span class="hljs-comment">// è€—æ—¶ loader æ”¾åˆ°çº¿ç¨‹ä¸­å¤„ç†</span>
        ],
      },
    ],
  },
};
</code></pre>
<p>é¿å‘æç¤ºï¼šthread-loader ä¸é€‚åˆæ‰€æœ‰ loaderï¼Œæ¯”å¦‚ file-loaderï¼ˆå¤„ç†é™æ€èµ„æºï¼‰ï¼Œå¤šçº¿ç¨‹ä¼šå¢åŠ æ–‡ä»¶ IO å¼€é”€ï¼Œåè€Œå˜æ…¢ï¼›åªå¯¹ babel-loaderã€ts-loader è¿™ç±» CPU å¯†é›†å‹ loader ç”Ÿæ•ˆã€‚</p>
<h3 data-id="heading-11">2. ç”Ÿäº§ç¯å¢ƒï¼šå¤šè¿›ç¨‹å‹ç¼©ä»£ç </h3>
<p>ç”Ÿäº§ç¯å¢ƒéœ€è¦å‹ç¼© JSã€CSSï¼Œè¿™æ˜¯éå¸¸è€—æ—¶çš„æ“ä½œã€‚é»˜è®¤æ˜¯å•è¿›ç¨‹å‹ç¼©ï¼Œæˆ‘ä»¬å¯ä»¥å¼€å¯å¤šè¿›ç¨‹å‹ç¼©ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title class_">TerserPlugin</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">'terser-webpack-plugin'</span>); <span class="hljs-comment">// JS å‹ç¼©æ’ä»¶</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">CssMinimizerPlugin</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">'css-minimizer-webpack-plugin'</span>); <span class="hljs-comment">// CSS å‹ç¼©æ’ä»¶</span>

<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">mode</span>: <span class="hljs-string">'production'</span>,
  <span class="hljs-attr">optimization</span>: {
    <span class="hljs-attr">minimizer</span>: [
      <span class="hljs-comment">// å¤šè¿›ç¨‹å‹ç¼© JS</span>
      <span class="hljs-keyword">new</span> <span class="hljs-title class_">TerserPlugin</span>({
        <span class="hljs-attr">parallel</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// è‡ªåŠ¨å¼€å¯å¤šè¿›ç¨‹ï¼ˆé»˜è®¤å¼€å¯ï¼Œçº¿ç¨‹æ•° = CPU æ ¸å¿ƒæ•° - 1ï¼‰</span>
        <span class="hljs-attr">extractComments</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">// ä¸æå–æ³¨é‡Šï¼ˆå‡å°‘æ–‡ä»¶ä½“ç§¯å’Œå¤„ç†æ—¶é—´ï¼‰</span>
      }),
      <span class="hljs-comment">// å¤šè¿›ç¨‹å‹ç¼© CSS</span>
      <span class="hljs-keyword">new</span> <span class="hljs-title class_">CssMinimizerPlugin</span>({
        <span class="hljs-attr">parallel</span>: <span class="hljs-literal">true</span>,
      }),
    ],
  },
};
</code></pre>
<h2 data-id="heading-12">å››ã€ç¯å¢ƒä¸“å±ä¼˜åŒ–ï¼šæŒ‰éœ€é…ç½®ï¼Œä¸åšæ— ç”¨åŠŸ</h2>
<p>å¼€å‘ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒçš„ä¼˜åŒ–ç›®æ ‡ä¸åŒï¼šå¼€å‘ç¯å¢ƒè¿½æ±‚â€œçƒ­æ›´æ–°é€Ÿåº¦â€ï¼Œç”Ÿäº§ç¯å¢ƒè¿½æ±‚â€œæ‰“åŒ…é€Ÿåº¦ + äº§ç‰©ä½“ç§¯â€ã€‚åˆ†å¼€é…ç½®ï¼Œé¿å…åœ¨å¼€å‘ç¯å¢ƒå¯ç”¨ç”Ÿäº§ç¯å¢ƒçš„è€—æ—¶æ’ä»¶ï¼ˆå¦‚å‹ç¼©ã€ä»£ç åˆ†å‰²ï¼‰ã€‚</p>
<h3 data-id="heading-13">1. å¼€å‘ç¯å¢ƒä¼˜åŒ–</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// webpack.dev.js</span>
<span class="hljs-keyword">const</span> webpack = <span class="hljs-built_in">require</span>(<span class="hljs-string">'webpack'</span>);
<span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">'path'</span>);

<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">mode</span>: <span class="hljs-string">'development'</span>, <span class="hljs-comment">// å¼€å‘æ¨¡å¼é»˜è®¤å¼€å¯ï¼šä»£ç æœªå‹ç¼©ã€tree-shaking å…³é—­ç­‰</span>
  <span class="hljs-attr">devtool</span>: <span class="hljs-string">'eval-cheap-module-source-map'</span>, <span class="hljs-comment">// é«˜æ•ˆçš„ source mapï¼ˆé€Ÿåº¦å¿«ï¼Œè°ƒè¯•ä½“éªŒå¥½ï¼‰</span>
  <span class="hljs-attr">entry</span>: <span class="hljs-string">'./src/index.js'</span>,
  <span class="hljs-attr">output</span>: {
    <span class="hljs-attr">filename</span>: <span class="hljs-string">'bundle.js'</span>,
    <span class="hljs-attr">path</span>: path.<span class="hljs-title function_">resolve</span>(__dirname, <span class="hljs-string">'dist'</span>),
  },
  <span class="hljs-attr">devServer</span>: {
    <span class="hljs-attr">hot</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// å¼€å¯çƒ­æ¨¡å—æ›¿æ¢ï¼ˆHMRï¼‰ï¼šåªæ›´æ–°å˜åŠ¨æ¨¡å—ï¼Œä¸åˆ·æ–°æ•´ä¸ªé¡µé¢</span>
    <span class="hljs-attr">open</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨</span>
    <span class="hljs-attr">port</span>: <span class="hljs-number">8080</span>,
    <span class="hljs-attr">static</span>: path.<span class="hljs-title function_">resolve</span>(__dirname, <span class="hljs-string">'public'</span>),
  },
  <span class="hljs-attr">cache</span>: {
    <span class="hljs-attr">type</span>: <span class="hljs-string">'filesystem'</span>, <span class="hljs-comment">// å¼€å¯æ–‡ä»¶ç¼“å­˜</span>
  },
  <span class="hljs-attr">plugins</span>: [
    <span class="hljs-keyword">new</span> webpack.<span class="hljs-title class_">HotModuleReplacementPlugin</span>(), <span class="hljs-comment">// HMR æ ¸å¿ƒæ’ä»¶</span>
  ],
  <span class="hljs-attr">module</span>: {
    <span class="hljs-attr">rules</span>: [
      {
        <span class="hljs-attr">test</span>: <span class="hljs-regexp">/.js$/</span>,
        <span class="hljs-attr">include</span>: path.<span class="hljs-title function_">resolve</span>(__dirname, <span class="hljs-string">'src'</span>),
        <span class="hljs-attr">exclude</span>: <span class="hljs-regexp">/node_modules/</span>,
        <span class="hljs-attr">use</span>: [<span class="hljs-string">'thread-loader'</span>, <span class="hljs-string">'babel-loader'</span>],
      },
      {
        <span class="hljs-attr">test</span>: <span class="hljs-regexp">/.css$/</span>,
        <span class="hljs-attr">use</span>: [<span class="hljs-string">'style-loader'</span>, <span class="hljs-string">'css-loader'</span>], <span class="hljs-comment">// å¼€å‘ç¯å¢ƒç”¨ style-loader æ›´å¿«ï¼ˆæ— éœ€æå– CSSï¼‰</span>
      },
    ],
  },
};
</code></pre>
<h3 data-id="heading-14">2. ç”Ÿäº§ç¯å¢ƒä¼˜åŒ–</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// webpack.prod.js</span>
<span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">'path'</span>);
<span class="hljs-keyword">const</span> <span class="hljs-title class_">TerserPlugin</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">'terser-webpack-plugin'</span>);
<span class="hljs-keyword">const</span> <span class="hljs-title class_">CssMinimizerPlugin</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">'css-minimizer-webpack-plugin'</span>);
<span class="hljs-keyword">const</span> <span class="hljs-title class_">MiniCssExtractPlugin</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">'mini-css-extract-plugin'</span>); <span class="hljs-comment">// æå– CSS ä¸ºå•ç‹¬æ–‡ä»¶</span>

<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">mode</span>: <span class="hljs-string">'production'</span>, <span class="hljs-comment">// ç”Ÿäº§æ¨¡å¼é»˜è®¤å¼€å¯ï¼šä»£ç å‹ç¼©ã€tree-shakingã€ä½œç”¨åŸŸæå‡ç­‰</span>
  <span class="hljs-attr">devtool</span>: <span class="hljs-string">'nosources-source-map'</span>, <span class="hljs-comment">// ä¸æš´éœ²æºä»£ç çš„ source mapï¼ˆå…¼é¡¾è°ƒè¯•å’Œå®‰å…¨ï¼‰</span>
  <span class="hljs-attr">entry</span>: <span class="hljs-string">'./src/index.js'</span>,
  <span class="hljs-attr">output</span>: {
    <span class="hljs-attr">filename</span>: <span class="hljs-string">'[name].[contenthash:8].js'</span>, <span class="hljs-comment">// ç”¨ contenthash åšç¼“å­˜ä¼˜åŒ–</span>
    <span class="hljs-attr">path</span>: path.<span class="hljs-title function_">resolve</span>(__dirname, <span class="hljs-string">'dist'</span>),
    <span class="hljs-attr">clean</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// æ‰“åŒ…å‰æ¸…ç©º dist ç›®å½•ï¼ˆé¿å…æ—§æ–‡ä»¶æ®‹ç•™ï¼‰</span>
  },
  <span class="hljs-attr">cache</span>: {
    <span class="hljs-attr">type</span>: <span class="hljs-string">'filesystem'</span>,
  },
  <span class="hljs-attr">optimization</span>: {
    <span class="hljs-attr">minimizer</span>: [
      <span class="hljs-keyword">new</span> <span class="hljs-title class_">TerserPlugin</span>({ <span class="hljs-attr">parallel</span>: <span class="hljs-literal">true</span> }),
      <span class="hljs-keyword">new</span> <span class="hljs-title class_">CssMinimizerPlugin</span>({ <span class="hljs-attr">parallel</span>: <span class="hljs-literal">true</span> }),
    ],
    <span class="hljs-attr">splitChunks</span>: {
      <span class="hljs-attr">chunks</span>: <span class="hljs-string">'all'</span>, <span class="hljs-comment">// æ‹†åˆ†åŒæ­¥/å¼‚æ­¥ chunk</span>
      <span class="hljs-attr">cacheGroups</span>: {
        <span class="hljs-attr">vendor</span>: {
          <span class="hljs-attr">test</span>: <span class="hljs-regexp">/node_modules/</span>, <span class="hljs-comment">// æŠŠç¬¬ä¸‰æ–¹åº“æ‹†æˆå•ç‹¬ chunkï¼ˆä¾¿äºç¼“å­˜ï¼‰</span>
          <span class="hljs-attr">name</span>: <span class="hljs-string">'vendors'</span>,
          <span class="hljs-attr">chunks</span>: <span class="hljs-string">'all'</span>,
        },
      },
    },
  },
  <span class="hljs-attr">plugins</span>: [
    <span class="hljs-keyword">new</span> <span class="hljs-title class_">MiniCssExtractPlugin</span>({
      <span class="hljs-attr">filename</span>: <span class="hljs-string">'[name].[contenthash:8].css'</span>, <span class="hljs-comment">// æå– CSS å¹¶åŠ  hash</span>
    }),
  ],
  <span class="hljs-attr">module</span>: {
    <span class="hljs-attr">rules</span>: [
      {
        <span class="hljs-attr">test</span>: <span class="hljs-regexp">/.js$/</span>,
        <span class="hljs-attr">include</span>: path.<span class="hljs-title function_">resolve</span>(__dirname, <span class="hljs-string">'src'</span>),
        <span class="hljs-attr">exclude</span>: <span class="hljs-regexp">/node_modules/</span>,
        <span class="hljs-attr">use</span>: [<span class="hljs-string">'thread-loader'</span>, <span class="hljs-string">'babel-loader'</span>],
      },
      {
        <span class="hljs-attr">test</span>: <span class="hljs-regexp">/.css$/</span>,
        <span class="hljs-attr">use</span>: [<span class="hljs-title class_">MiniCssExtractPlugin</span>.<span class="hljs-property">loader</span>, <span class="hljs-string">'css-loader'</span>], <span class="hljs-comment">// ç”Ÿäº§ç¯å¢ƒæå– CSSï¼ˆä¾¿äºç¼“å­˜å’Œå¹¶è¡ŒåŠ è½½ï¼‰</span>
      },
    ],
  },
};
</code></pre>
<h2 data-id="heading-15">äº”ã€å…³é”®å·¥å…·ï¼šå…ˆåˆ†æç“¶é¢ˆï¼Œå†ç²¾å‡†ä¼˜åŒ–</h2>
<p>ä¼˜åŒ–å‰ä¸€å®šè¦å…ˆæ‰¾åˆ°æ‰“åŒ…æ…¢çš„æ ¸å¿ƒç“¶é¢ˆï¼Œä¸è¦ç›²ç›®åŠ é…ç½®ã€‚æ¨èç”¨ <code>webpack-bundle-analyzer</code> åˆ†ææ‰“åŒ…ä½“ç§¯å’Œä¾èµ–å…³ç³»ï¼Œæ‰¾åˆ°å¤§æ–‡ä»¶ã€é‡å¤ä¾èµ–ç­‰é—®é¢˜ã€‚</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å®‰è£…</span>
npm install webpack-bundle-analyzer --save-dev
</code></pre>
<pre><code class="hljs language-ini" lang="ini">const <span class="hljs-attr">BundleAnalyzerPlugin</span> = require(<span class="hljs-string">'webpack-bundle-analyzer'</span>).BundleAnalyzerPlugin<span class="hljs-comment">;</span>

<span class="hljs-attr">module.exports</span> = {
  plugins: <span class="hljs-section">[
    new BundleAnalyzerPlugin({
      analyzerMode: 'server', // å¯åŠ¨æœåŠ¡å™¨å±•ç¤ºåˆ†æç»“æœ
      analyzerPort: 8888, // ç«¯å£å·
    }),
  ]</span>,
}<span class="hljs-comment">;</span>
</code></pre>
<p>è¿è¡Œæ‰“åŒ…å‘½ä»¤åï¼Œä¼šè‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨ï¼Œå±•ç¤ºä¸€ä¸ªå¯è§†åŒ–çš„æ‰“åŒ…åˆ†æå›¾ï¼š</p>
<ul>
<li>çº¢è‰²å—ï¼šä½“ç§¯è¾ƒå¤§çš„æ–‡ä»¶ï¼Œä¼˜å…ˆè€ƒè™‘æ‹†åˆ†æˆ–æ›¿æ¢ä¸ºæ›´å°çš„æ›¿ä»£æ–¹æ¡ˆï¼›</li>
<li>é‡å¤ä¾èµ–ï¼šæ¯”å¦‚å¤šä¸ªç»„ä»¶éƒ½å¼•å…¥äº† lodashï¼Œå¯ä»¥ç”¨ <code>lodash-es</code> æŒ‰éœ€å¼•å…¥ï¼Œæˆ–ç”¨ <code>ProvidePlugin</code> å…¨å±€å¼•å…¥ï¼›</li>
<li>ä¸å¿…è¦çš„ä¾èµ–ï¼šæ¯”å¦‚æŠŠå¼€å‘ç¯å¢ƒçš„ä¾èµ–ï¼ˆå¦‚ mockjsï¼‰æ‰“åŒ…åˆ°ç”Ÿäº§ç¯å¢ƒï¼Œéœ€è¦æ’é™¤ã€‚</li>
</ul>
<h2 data-id="heading-16">å…­ã€å…¶ä»–ä¼˜åŒ–å°æŠ€å·§</h2>
<ol>
<li>å‡çº§ Webpack ç‰ˆæœ¬ï¼šWebpack 5 ç›¸æ¯” 4 æœ‰å¤§å¹…æ€§èƒ½æå‡ï¼ˆå¦‚æŒä¹…åŒ–ç¼“å­˜ã€æ›´å¥½çš„ tree-shakingã€æ¨¡å—è”é‚¦ç­‰ï¼‰ï¼Œè€é¡¹ç›®ä¼˜å…ˆå‡çº§ï¼›</li>
<li>é¿å…åœ¨é…ç½®ä¸­åšè€—æ—¶æ“ä½œï¼šæ¯”å¦‚æ¯æ¬¡æ‰“åŒ…éƒ½è¯»å–æ–‡ä»¶ã€æ‰§è¡Œå¤æ‚è®¡ç®—ï¼Œå°½é‡æå‰è®¡ç®—å¥½ç»“æœï¼›</li>
<li>ä½¿ç”¨ ES æ¨¡å—è¯­æ³•ï¼šCommonJS æ¨¡å—æ— æ³•è¢« tree-shaking ä¼˜åŒ–ï¼Œå°½é‡ç”¨ <code>import/export</code>ï¼›</li>
<li>å…³é—­ä¸å¿…è¦çš„æ’ä»¶ï¼šæ¯”å¦‚å¼€å‘ç¯å¢ƒå…³é—­ <code>BundleAnalyzerPlugin</code>ã€<code>MiniCssExtractPlugin</code> ç­‰ç”Ÿäº§ç¯å¢ƒæ’ä»¶ã€‚</li>
</ol>
<h2 data-id="heading-17">ä¸ƒã€ä¼˜åŒ–æ•ˆæœå¯¹æ¯”</h2>
<p>ä»¥ä¸€ä¸ªä¸­å‹ React é¡¹ç›®ï¼ˆçº¦ 50 ä¸ªç»„ä»¶ï¼Œä¾èµ– Reactã€Ant Design ç­‰ï¼‰ä¸ºä¾‹ï¼Œä¼˜åŒ–å‰åå¯¹æ¯”ï¼š</p>





























<table><thead><tr><th>åœºæ™¯</th><th>ä¼˜åŒ–å‰</th><th>ä¼˜åŒ–å</th><th>æå‡æ¯”ä¾‹</th></tr></thead><tbody><tr><td>å¼€å‘çƒ­æ›´æ–°ï¼ˆæ”¹ä¸€è¡Œä»£ç ï¼‰</td><td>25 ç§’</td><td>4 ç§’</td><td>84%</td></tr><tr><td>ç”Ÿäº§ç¯å¢ƒé¦–æ¬¡æ‰“åŒ…</td><td>8 åˆ†é’Ÿ</td><td>1 åˆ†é’Ÿ</td><td>87.5%</td></tr><tr><td>ç”Ÿäº§ç¯å¢ƒå¢é‡æ‰“åŒ…</td><td>3 åˆ†é’Ÿ</td><td>30 ç§’</td><td>83.3%</td></tr></tbody></table>
<h2 data-id="heading-18">æ€»ç»“</h2>
<p>Webpack æ‰“åŒ…ä¼˜åŒ–çš„æ ¸å¿ƒé€»è¾‘æ˜¯â€œ<strong>å‡å°‘æ— æ•ˆå·¥ä½œã€å¤ç”¨å·²æœ‰æˆæœã€åˆ©ç”¨å¤šæ ¸èµ„æºã€æŒ‰éœ€ç¯å¢ƒé…ç½®</strong>â€ï¼ŒæŒ‰ä»¥ä¸‹æ­¥éª¤é€æ­¥ä¼˜åŒ–å³å¯ï¼š</p>
<ol>
<li>åŸºç¡€ä¼˜åŒ–ï¼šç”¨ <code>include/exclude</code>ã€<code>resolve</code>ã€<code>externals</code> ç¼©å°å¤„ç†èŒƒå›´ï¼›</li>
<li>è¿›é˜¶ä¼˜åŒ–ï¼šå¼€å¯ Webpack å†…ç½®ç¼“å­˜ã€loader ç¼“å­˜ï¼Œå‡å°‘é‡å¤æ„å»ºï¼›</li>
<li>å¹¶è¡Œä¼˜åŒ–ï¼šç”¨ <code>thread-loader</code>ã€å¤šè¿›ç¨‹å‹ç¼©ï¼Œåˆ©ç”¨å¤šæ ¸ CPUï¼›</li>
<li>ç¯å¢ƒé€‚é…ï¼šå¼€å‘/ç”Ÿäº§ç¯å¢ƒåˆ†å¼€é…ç½®ï¼Œä¸åšæ— ç”¨åŠŸï¼›</li>
<li>ç²¾å‡†ä¼˜åŒ–ï¼šç”¨ <code>webpack-bundle-analyzer</code> æ‰¾åˆ°ç“¶é¢ˆï¼Œé’ˆå¯¹æ€§ä¼˜åŒ–ã€‚</li>
</ol>
<p>ä¼˜åŒ–ä¸æ˜¯ä¸€è¹´è€Œå°±çš„ï¼Œå»ºè®®é€æ­¥å°è¯•ï¼Œæ¯åŠ ä¸€ä¸ªé…ç½®å°±æµ‹è¯•ä¸€æ¬¡æ‰“åŒ…é€Ÿåº¦ï¼Œæ‰¾åˆ°æœ€é€‚åˆè‡ªå·±é¡¹ç›®çš„æ–¹æ¡ˆã€‚å¦‚æœä½ çš„é¡¹ç›®æœ‰ç‰¹æ®Šåœºæ™¯ï¼ˆæ¯”å¦‚è¶…å¤§å•é¡µåº”ç”¨ã€å¤šå…¥å£é¡¹ç›®ï¼‰ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºç•™è¨€ï¼Œä¸€èµ·æ¢è®¨ä¼˜åŒ–æ–¹æ¡ˆï¼</p>
<p>æœ€åï¼Œè§‰å¾—æœ‰ç”¨çš„è¯ï¼Œç‚¹èµ + æ”¶è—ï¼Œä¸‹æ¬¡ä¼˜åŒ– Webpack ç›´æ¥æŠ„ä½œä¸šï½ ğŸš€</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç¨³å®šæ€§æ€§èƒ½ç³»åˆ—ä¹‹åâ€”â€”å¡é¡¿é—®é¢˜åˆ†æ:ä»æ‰å¸§åˆ°æµç•…ä½“éªŒ]]></title>    <link>https://juejin.cn/post/7593310044479012873</link>    <guid>https://juejin.cn/post/7593310044479012873</guid>    <pubDate>2026-01-10T13:42:18.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7593310044479012873" data-draft-id="7593311347292094491" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç¨³å®šæ€§æ€§èƒ½ç³»åˆ—ä¹‹åâ€”â€”å¡é¡¿é—®é¢˜åˆ†æ:ä»æ‰å¸§åˆ°æµç•…ä½“éªŒ"/> <meta itemprop="keywords" content="Android,æ€§èƒ½ä¼˜åŒ–,Debug"/> <meta itemprop="datePublished" content="2026-01-10T13:42:18.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å†¬å¥‡Lab"/> <meta itemprop="url" content="https://juejin.cn/user/1857501105781193"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç¨³å®šæ€§æ€§èƒ½ç³»åˆ—ä¹‹åâ€”â€”å¡é¡¿é—®é¢˜åˆ†æ:ä»æ‰å¸§åˆ°æµç•…ä½“éªŒ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1857501105781193/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å†¬å¥‡Lab
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-10T13:42:18.000Z" title="Sat Jan 10 2026 13:42:18 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»19åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æµç•…åº¦,æ˜¯è¡¡é‡Appç”¨æˆ·ä½“éªŒçš„æ ¸å¿ƒæŒ‡æ ‡ã€‚ä¸€ä¸ªä¸èˆ¬é¡ºæ»‘çš„60fpså’Œä¸€ä¸ªå¡é¡¿é¢‘ç¹çš„30fps,å·®çš„ä¸ä»…ä»…æ˜¯æ•°å­—,æ›´æ˜¯ç”¨æˆ·çš„å»ç•™ã€‚æœ¬æ–‡å°†å¸¦ä½ ç³»ç»ŸåŒ–åœ°æ”»å…‹å¡é¡¿é—®é¢˜ã€‚</p>
</blockquote>
<h2 data-id="heading-0">å¼•è¨€</h2>
<p>å¡é¡¿æ˜¯Androidåº”ç”¨å¼€å‘ä¸­æœ€å¸¸è§çš„æ€§èƒ½é—®é¢˜ä¹‹ä¸€ã€‚å½“åº”ç”¨çš„å¸§ç‡ä»æµç•…çš„60fpsä¸‹é™åˆ°30fpsç”šè‡³æ›´ä½æ—¶,ç”¨æˆ·ä¼šæ˜æ˜¾æ„Ÿå—åˆ°æ“ä½œä¸æµç•…ã€ç”»é¢åœæ»,ä¸¥é‡å½±å“ä½¿ç”¨ä½“éªŒã€‚</p>
<p><strong>å¡é¡¿çš„æœ¬è´¨æ˜¯æ‰å¸§</strong>ã€‚Androidç³»ç»Ÿä»¥60fpsçš„æ ‡å‡†åˆ·æ–°å±å¹•,å³æ¯å¸§å¿…é¡»åœ¨16.6mså†…å®Œæˆæ¸²æŸ“ã€‚ä¸€æ—¦è¶…è¿‡è¿™ä¸ªæ—¶é—´é˜ˆå€¼,å°±ä¼šå‘ç”Ÿæ‰å¸§,ç”¨æˆ·å°±èƒ½æ„ŸçŸ¥åˆ°å¡é¡¿ã€‚</p>
<h3 data-id="heading-1">ä¸€ä¸ªå…¸å‹çš„å¡é¡¿æ¡ˆä¾‹</h3>
<p>åœ¨å®é™…å¼€å‘ä¸­,æˆ‘ä»¬é‡åˆ°è¿‡è¿™æ ·ä¸€ä¸ªé—®é¢˜:RecyclerViewåˆ—è¡¨æ»‘åŠ¨æ—¶å‡ºç°æ˜æ˜¾å¡é¡¿,å¸§ç‡ä»60fpséª¤é™åˆ°25-30fpsã€‚</p>
<p>é€šè¿‡Systraceåˆ†æ,å‘ç°äº†é—®é¢˜æ ¹æº:</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-string">Frame</span> <span class="hljs-comment">#245: 35ms (Dropped 2 frames) â† è¶…è¿‡16.6ms,æ‰äº†2å¸§</span>
  <span class="hljs-string">â””â”€</span> <span class="hljs-attr">RecyclerView.onBindViewHolder:</span> <span class="hljs-string">28ms</span>
      <span class="hljs-string">â”œâ”€</span> <span class="hljs-attr">BitmapFactory.decodeFile:</span> <span class="hljs-string">18ms</span>   <span class="hljs-string">â†</span> <span class="hljs-string">ä¸»çº¿ç¨‹åŒæ­¥è§£ç å›¾ç‰‡</span>
      <span class="hljs-string">â”œâ”€</span> <span class="hljs-attr">TextView.setText:</span> <span class="hljs-string">5ms</span>
      <span class="hljs-string">â””â”€</span> <span class="hljs-string">å…¶ä»–æ“ä½œ:</span> <span class="hljs-string">5ms</span>

<span class="hljs-string">Frame</span> <span class="hljs-comment">#246: 42ms (Dropped 3 frames) â† åˆæ‰äº†3å¸§</span>
  <span class="hljs-string">â””â”€</span> <span class="hljs-attr">RecyclerView.onBindViewHolder:</span> <span class="hljs-string">38ms</span>
      <span class="hljs-string">â””â”€</span> <span class="hljs-attr">BitmapFactory.decodeFile:</span> <span class="hljs-string">32ms</span>   <span class="hljs-string">â†</span> <span class="hljs-string">å›¾ç‰‡è§£ç è€—æ—¶è¿‡é•¿</span>
</code></pre>
<p><strong>é—®é¢˜åˆ†æ</strong>:</p>
<p>åœ¨<code>onBindViewHolder</code>ä¸­ç›´æ¥ä½¿ç”¨<code>BitmapFactory.decodeFile()</code>åŒæ­¥è§£ç å›¾ç‰‡,æ¯å¼ å›¾ç‰‡è€—æ—¶15-30msã€‚è€Œ60fpsè¦æ±‚æ¯å¸§åœ¨16.6mså†…å®Œæˆ,å•æ¬¡è§£ç å°±å·²ç»è¶…æ—¶ã€‚ç”¨æˆ·æ»‘åŠ¨ä¸€æ¬¡åŠ è½½10ä¸ªitem,æ¯ä¸ªiteméƒ½è¦è§£ç ä¸€å¼ å›¾,ç´¯è®¡è€—æ—¶150-300ms,ç›¸å½“äº<strong>9-18å¸§çš„å¡é¡¿</strong>ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>:</p>
<p>å°†å›¾ç‰‡è§£ç æ”¹ä¸ºå¼‚æ­¥åŠ è½½,ä½¿ç”¨Glideç­‰å›¾ç‰‡åŠ è½½åº“:</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// âŒ Before: ä¸»çº¿ç¨‹åŒæ­¥è§£ç </span>
<span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onBindViewHolder</span><span class="hljs-params">(holder: <span class="hljs-type">ViewHolder</span>, position: <span class="hljs-type">Int</span>)</span></span> {
    <span class="hljs-keyword">val</span> bitmap = BitmapFactory.decodeFile(<span class="hljs-keyword">data</span>[position].imagePath) <span class="hljs-comment">// 18-32ms</span>
    holder.imageView.setImageBitmap(bitmap)
}

<span class="hljs-comment">// âœ… After: Glideå¼‚æ­¥åŠ è½½+ç¼“å­˜</span>
<span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onBindViewHolder</span><span class="hljs-params">(holder: <span class="hljs-type">ViewHolder</span>, position: <span class="hljs-type">Int</span>)</span></span> {
    Glide.with(holder.itemView.context)
        .load(<span class="hljs-keyword">data</span>[position].imagePath)
        .<span class="hljs-keyword">override</span>(<span class="hljs-number">300</span>, <span class="hljs-number">300</span>)  <span class="hljs-comment">// ç¼©æ”¾åˆ°ç›®æ ‡å°ºå¯¸</span>
        .centerCrop()
        .into(holder.imageView)
}
</code></pre>
<p>ä¼˜åŒ–å,<code>onBindViewHolder</code>è€—æ—¶ä»28msé™ä½åˆ°3ms,å¸§ç‡æ¢å¤åˆ°58-60fpsã€‚</p>
<h3 data-id="heading-2">å¡é¡¿åˆ†æçš„é‡è¦æ€§</h3>
<p>è¿™ä¸ªæ¡ˆä¾‹è¯´æ˜äº†<strong>ç²¾å‡†å®šä½é—®é¢˜</strong>çš„é‡è¦æ€§ã€‚å¦‚æœæ²¡æœ‰ä½¿ç”¨Systraceç­‰å·¥å…·è¿›è¡Œç³»ç»ŸåŒ–åˆ†æ,å¯èƒ½ä¼šè¯¯åˆ¤é—®é¢˜æ–¹å‘:</p>
<ul>
<li>æ€€ç–‘æ˜¯RecyclerViewç¼“å­˜ç­–ç•¥é—®é¢˜,å»ä¼˜åŒ–ç¼“å­˜</li>
<li>æ€€ç–‘æ˜¯å¸ƒå±€å¤ªå¤æ‚,å»ä¼˜åŒ–XMLå±‚çº§</li>
<li>æ€€ç–‘æ˜¯æ•°æ®é‡å¤ªå¤§,å»åšåˆ†é¡µåŠ è½½</li>
</ul>
<p>è¿™äº›ä¼˜åŒ–æ–¹å‘è™½ç„¶ä¹Ÿæœ‰ä»·å€¼,ä½†éƒ½ä¸æ˜¯æ ¸å¿ƒé—®é¢˜ã€‚<strong>åªæœ‰é€šè¿‡å·¥å…·å’Œæ–¹æ³•è®º,æ‰èƒ½ç²¾å‡†å®šä½é—®é¢˜æ ¹æº,é«˜æ•ˆè§£å†³é—®é¢˜ã€‚</strong></p>
<h3 data-id="heading-3">æœ¬æ–‡å†…å®¹æ¦‚è§ˆ</h3>
<p>æœ¬æ–‡å°†ç³»ç»ŸåŒ–åœ°è®²è§£Androidå¡é¡¿é—®é¢˜çš„åˆ†æä¸ä¼˜åŒ–:</p>
<ol>
<li><strong>å¡é¡¿çš„æœ¬è´¨</strong> - æ‰å¸§æœºåˆ¶ã€VSYNCä¿¡å·ã€æ¸²æŸ“ç®¡çº¿æµç¨‹</li>
<li><strong>åˆ†æå·¥å…·é“¾</strong> - Systraceã€Perfettoã€FrameMetricsã€Choreographerçš„ä½¿ç”¨æ–¹æ³•</li>
<li><strong>ä¸»çº¿ç¨‹ä¼˜åŒ–</strong> - å¼‚æ­¥åŒ–ã€å¸ƒå±€ä¼˜åŒ–ã€é¢„åŠ è½½ç­‰ç­–ç•¥</li>
<li><strong>æ¸²æŸ“ä¼˜åŒ–</strong> - è¿‡åº¦ç»˜åˆ¶åˆ†æã€ç¡¬ä»¶åŠ é€Ÿã€GPUæ€§èƒ½ä¼˜åŒ–</li>
<li><strong>å®æˆ˜æ¡ˆä¾‹</strong> - RecyclerViewæ»‘åŠ¨ä¼˜åŒ–çš„å®Œæ•´æµç¨‹</li>
</ol>
<p>é€šè¿‡æŒæ¡è¿™å¥—æ–¹æ³•è®ºå’Œå·¥å…·é“¾,èƒ½å¤Ÿç³»ç»ŸåŒ–åœ°åˆ†æå’Œè§£å†³å¡é¡¿é—®é¢˜,æå‡åº”ç”¨æµç•…åº¦ã€‚</p>
<h2 data-id="heading-4">1. å¡é¡¿çš„æœ¬è´¨:æ‰å¸§ä¸VSYNCæœºåˆ¶</h2>
<h3 data-id="heading-5">1.1 ä»€ä¹ˆæ˜¯å¡é¡¿?</h3>
<p><strong>å¡é¡¿,æœ¬è´¨ä¸Šå°±æ˜¯æ‰å¸§ã€‚</strong></p>
<p>æˆ‘ä»¬å…ˆæ¥ç†è§£å‡ ä¸ªæ ¸å¿ƒæ¦‚å¿µ:</p>
<p><strong>60fpsæ ‡å‡†</strong>: äººçœ¼æ„ŸçŸ¥æµç•…çš„é˜ˆå€¼æ˜¯60å¸§æ¯ç§’(60 frames per second),ä¹Ÿå°±æ˜¯è¯´,å±å¹•éœ€è¦æ¯ç§’åˆ·æ–°60æ¬¡ç”»é¢ã€‚æ¢ç®—æˆæ—¶é—´,å°±æ˜¯:</p>
<pre><code class="hljs">1ç§’ Ã· 60å¸§ = 16.67æ¯«ç§’/å¸§
</code></pre>
<p><strong>è¿™å°±æ˜¯é‚£ä¸ªè‘—åçš„"16.6ms"é»„é‡‘æ—¶é—´ã€‚</strong></p>
<p>å¦‚æœä½ çš„Appèƒ½åœ¨æ¯16.6mså†…å®Œæˆä¸€å¸§ç”»é¢çš„ç»˜åˆ¶,ç”¨æˆ·å°±ä¼šæ„Ÿè§‰æµç•…ã€‚ä¸€æ—¦è¶…è¿‡è¿™ä¸ªæ—¶é—´,å°±ä¼šå‘ç”Ÿ<strong>æ‰å¸§(Dropped Frames)</strong>ã€‚</p>
<p><strong>æ‰å¸§çš„æ„ŸçŸ¥é˜ˆå€¼</strong>:</p>
<ul>
<li>æ‰1å¸§: 32ms,è½»å¾®é¡¿æŒ«,å¤šæ•°ç”¨æˆ·æ„ŸçŸ¥ä¸æ˜æ˜¾</li>
<li>æ‰2å¸§: 48ms,æ˜æ˜¾é¡¿æŒ«,æ•æ„Ÿç”¨æˆ·èƒ½å¯Ÿè§‰</li>
<li>æ‰3å¸§åŠä»¥ä¸Š: 64ms+,<strong>ä¸¥é‡å¡é¡¿</strong>,æ‰€æœ‰ç”¨æˆ·éƒ½èƒ½æ˜æ˜¾æ„ŸçŸ¥</li>
</ul>
<h3 data-id="heading-6">1.2 Androidæ¸²æŸ“ç®¡çº¿:ä»VSYNCåˆ°æ˜¾ç¤º</h3>
<p>è¦ç†è§£å¡é¡¿,å¿…é¡»å…ˆç†è§£Androidçš„æ¸²æŸ“ç®¡çº¿(Rendering Pipeline)ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/954c3cd47c834f3c9996e2ab7e64c693~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yas5aWHTGFi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768657337&amp;x-signature=qtxxOIPU73nEsw6dg7akUxn6GeQ%3D" alt="10-01-android-rendering-pipeline.png" loading="lazy"/></p>
<p><strong>å…³é”®æ—¶é—´åˆ†é…</strong>:</p>
<ul>
<li><strong>ä¸»çº¿ç¨‹</strong> (UI Thread): 8-10ms - measure/layout/draw</li>
<li><strong>RenderThread</strong>: 4-6ms - GPUæŒ‡ä»¤æäº¤å’Œæ¸²æŸ“</li>
<li><strong>SurfaceFlinger</strong>: 1-2ms - å¤šçª—å£åˆæˆ</li>
<li><strong>é¢„ç•™Buffer</strong>: 2-3ms - åº”å¯¹æ³¢åŠ¨</li>
</ul>
<p><strong>æ€»è®¡</strong>: â‰¤ 16.6ms</p>
<p><strong>ä¸€æ—¦æŸä¸ªç¯èŠ‚è¶…æ—¶,å°±ä¼šæ‰å¸§ã€‚</strong></p>
<h3 data-id="heading-7">1.3 Triple Bufferä¸‰ç¼“å†²æœºåˆ¶</h3>
<p>ä¸ºäº†æé«˜æ•ˆç‡,Androidä½¿ç”¨äº†**ä¸‰ç¼“å†²(Triple Buffer)**æœºåˆ¶:</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">Buffer A:</span> <span class="hljs-string">æ­£åœ¨æ˜¾ç¤ºçš„ç”»é¢</span> <span class="hljs-string">(Displayæ˜¾ç¤º)</span>
<span class="hljs-attr">Buffer B:</span> <span class="hljs-string">å·²ç»˜åˆ¶å®Œæˆ,ç­‰å¾…æ˜¾ç¤º</span> <span class="hljs-string">(GPUå·²æ¸²æŸ“å®Œ)</span>
<span class="hljs-attr">Buffer C:</span> <span class="hljs-string">æ­£åœ¨ç»˜åˆ¶çš„ç”»é¢</span> <span class="hljs-string">(CPU/GPUå·¥ä½œä¸­)</span>
</code></pre>
<p><strong>æ­£å¸¸æƒ…å†µä¸‹çš„æµæ°´çº¿</strong>:</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">VSYNC</span> <span class="hljs-selector-id">#1</span>: <span class="hljs-selector-tag">Buffer</span> <span class="hljs-selector-tag">A</span>æ˜¾ç¤º, <span class="hljs-selector-tag">Buffer</span> <span class="hljs-selector-tag">B</span>å‡†å¤‡, <span class="hljs-selector-tag">Buffer</span> <span class="hljs-selector-tag">C</span>ç»˜åˆ¶ä¸­
<span class="hljs-selector-tag">VSYNC</span> <span class="hljs-selector-id">#2</span>: <span class="hljs-selector-tag">Buffer</span> <span class="hljs-selector-tag">B</span>æ˜¾ç¤º, <span class="hljs-selector-tag">Buffer</span> <span class="hljs-selector-tag">C</span>å‡†å¤‡, <span class="hljs-selector-tag">Buffer</span> <span class="hljs-selector-tag">A</span>ç»˜åˆ¶ä¸­
<span class="hljs-selector-tag">VSYNC</span> <span class="hljs-selector-id">#3</span>: <span class="hljs-selector-tag">Buffer</span> <span class="hljs-selector-tag">C</span>æ˜¾ç¤º, <span class="hljs-selector-tag">Buffer</span> <span class="hljs-selector-tag">A</span>å‡†å¤‡, <span class="hljs-selector-tag">Buffer</span> <span class="hljs-selector-tag">B</span>ç»˜åˆ¶ä¸­
</code></pre>
<p><strong>æ‰å¸§æƒ…å†µ</strong>:</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">VSYNC</span> <span class="hljs-selector-id">#1</span>: <span class="hljs-selector-tag">Buffer</span> <span class="hljs-selector-tag">A</span>æ˜¾ç¤º, <span class="hljs-selector-tag">Buffer</span> <span class="hljs-selector-tag">C</span>è¿˜åœ¨ç»˜åˆ¶ (è¶…æ—¶!)
<span class="hljs-selector-tag">VSYNC</span> <span class="hljs-selector-id">#2</span>: <span class="hljs-selector-tag">Buffer</span> <span class="hljs-selector-tag">A</span>ç»§ç»­æ˜¾ç¤º (æ‰å¸§!), <span class="hljs-selector-tag">Buffer</span> <span class="hljs-selector-tag">C</span>å®Œæˆ
<span class="hljs-selector-tag">VSYNC</span> <span class="hljs-selector-id">#3</span>: <span class="hljs-selector-tag">Buffer</span> <span class="hljs-selector-tag">C</span>æ˜¾ç¤º (å»¶è¿Ÿä¸€å¸§)
</code></pre>
<p><strong>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆå¡é¡¿ä¼šè®©ç”»é¢"åœæ»"çš„åŸå› â€”â€”Bufferæ²¡å‡†å¤‡å¥½,åªèƒ½ç»§ç»­æ˜¾ç¤ºæ—§ç”»é¢ã€‚</strong></p>
<h3 data-id="heading-8">1.4 æ‰å¸§çš„ä¸‰å¤§æ ¹æº</h3>
<p>é€šè¿‡å¯¹æ¸²æŸ“ç®¡çº¿çš„åˆ†æ,æˆ‘ä»¬å¯ä»¥æ€»ç»“å‡ºæ‰å¸§çš„ä¸‰å¤§æ ¹æº:</p>
<h4 data-id="heading-9">æ ¹æº1: ä¸»çº¿ç¨‹è€—æ—¶æ“ä½œ</h4>
<p><strong>å…¸å‹åœºæ™¯</strong>:</p>
<ul>
<li>å¤æ‚çš„å¸ƒå±€å±‚çº§å¯¼è‡´<code>measure/layout</code>è€—æ—¶</li>
<li><code>onDraw()</code>ä¸­æ‰§è¡Œå¤æ‚è®¡ç®—æˆ–IOæ“ä½œ</li>
<li>ä¸»çº¿ç¨‹ç­‰å¾…é”ã€åŒæ­¥ç½‘ç»œè¯·æ±‚</li>
<li>RecyclerViewçš„<code>onBindViewHolder</code>ä¸­è€—æ—¶æ“ä½œ</li>
</ul>
<p><strong>Systraceç‰¹å¾</strong>:</p>
<pre><code class="hljs language-diff" lang="diff">UI Thread: [<span class="hljs-comment">======================================] 25ms â† è¶…è¿‡16.6ms</span>
  â””â”€ RecyclerView.onBindViewHolder
      â””â”€ åŒæ­¥è§£ç å›¾ç‰‡ (ç½ªé­ç¥¸é¦–)
</code></pre>
<h4 data-id="heading-10">æ ¹æº2: æ¸²æŸ“çº¿ç¨‹/GPUè€—æ—¶</h4>
<p><strong>å…¸å‹åœºæ™¯</strong>:</p>
<ul>
<li>è¿‡åº¦ç»˜åˆ¶ (Overdraw),å¤šå±‚èƒŒæ™¯å åŠ </li>
<li>å¤æ‚çš„è‡ªå®šä¹‰Viewç»˜åˆ¶ (<code>onDraw</code>ä¸­å¤§é‡<code>Canvas</code>æ“ä½œ)</li>
<li>Shaderç¼–è¯‘å’Œçº¹ç†ä¸Šä¼ </li>
<li>GPUé¢‘ç‡é™ä½ (æ¸©æ§é™é¢‘)</li>
</ul>
<p><strong>Systraceç‰¹å¾</strong>:</p>
<pre><code class="hljs language-diff" lang="diff">RenderThread: [<span class="hljs-comment">======================================] 20ms</span>
  â””â”€ GPUæ¸²æŸ“å¤æ‚Path
</code></pre>
<h4 data-id="heading-11">æ ¹æº3: ç³»ç»Ÿèµ„æºä¸è¶³</h4>
<p><strong>å…¸å‹åœºæ™¯</strong>:</p>
<ul>
<li>GCæš‚åœ (Full GCå¯èƒ½æš‚åœ100ms+)</li>
<li>å†…å­˜æŠ–åŠ¨é¢‘ç¹è§¦å‘GC</li>
<li>CPUé¢‘ç‡é™ä½</li>
<li>Binderé€šä¿¡å»¶è¿Ÿ (ç³»ç»ŸæœåŠ¡ç¹å¿™)</li>
</ul>
<p><strong>Systraceç‰¹å¾</strong>:</p>
<pre><code class="hljs language-ini" lang="ini">UI Thread: <span class="hljs-section">[    ]</span><span class="hljs-section">[GCæš‚åœ 50ms]</span><span class="hljs-section">[     ]</span>  â† å¤šå¸§ç©ºç™½
</code></pre>
<h2 data-id="heading-12">2. å¡é¡¿é—®é¢˜åˆ†æå·¥å…·</h2>
<h3 data-id="heading-13">2.1 Systrace/Perfetto - æœ€å¼ºå¤§çš„åˆ†æå·¥å…·</h3>
<p><strong>Systraceæ˜¯å¡é¡¿åˆ†æçš„æ ¸å¿ƒå·¥å…·</strong>,å®ƒèƒ½ç²¾ç¡®è®°å½•æ¯ä¸€å¸§çš„è€—æ—¶å’Œè°ƒç”¨æ ˆã€‚</p>
<p><strong>æŠ“å–å‘½ä»¤</strong>:</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æŠ“å–10ç§’çš„Trace,åŒ…å«æ¸²æŸ“ç›¸å…³çš„æ‰€æœ‰ä¿¡æ¯</span>
python systrace.py -o trace.html <span class="hljs-built_in">sched</span> freq idle am wm gfx view binder_driver -t 10

<span class="hljs-comment"># æˆ–ä½¿ç”¨Perfetto (æ›´å¼ºå¤§)</span>
adb shell perfetto \
  -c - --txt \
  -o /data/misc/perfetto-traces/trace \
  &lt; perfetto-config.pbtxt
</code></pre>
<p><strong>å…³é”®åˆ†æé¢æ¿</strong>:</p>
<ol>
<li><strong>Frame Timeline</strong>: æŸ¥çœ‹æ‰å¸§æƒ…å†µ</li>
</ol>

<pre><code class="hljs language-diff" lang="diff">æ¯ä¸ªå°ç«–æ¡ä»£è¡¨ä¸€å¸§:
<span class="hljs-deletion">- ç»¿è‰²: æ­£å¸¸ (â‰¤16.6ms)</span>
<span class="hljs-deletion">- é»„è‰²: è½»å¾®æ‰å¸§ (16.6-33ms)</span>
<span class="hljs-deletion">- æ©™è‰²: ä¸­åº¦æ‰å¸§ (33-50ms)</span>
<span class="hljs-deletion">- çº¢è‰²: ä¸¥é‡æ‰å¸§ (&gt;50ms)</span>
</code></pre>
<p>2.  <strong>UI Thread</strong>: ä¸»çº¿ç¨‹è€—æ—¶åˆ†æ</p>

<pre><code class="hljs language-diff" lang="diff">é€‰ä¸­ä¸€ä¸ªçº¢è‰²å¸§,æŸ¥çœ‹UI Threadé¢æ¿:
<span class="hljs-deletion">- æ‰¾å‡ºè€—æ—¶&gt;10msçš„æ“ä½œ</span>
<span class="hljs-deletion">- æŸ¥çœ‹Wall Duration (æ€»è€—æ—¶) å’Œ Self Time (è‡ªèº«è€—æ—¶)</span>
<span class="hljs-deletion">- å®šä½åˆ°å…·ä½“å‡½æ•°</span>
</code></pre>
<p>3.  <strong>RenderThread</strong>: æ¸²æŸ“çº¿ç¨‹åˆ†æ</p>

<pre><code class="hljs language-diff" lang="diff">æŸ¥çœ‹GPUç›¸å…³çš„è€—æ—¶:
<span class="hljs-deletion">- DrawFrame: æäº¤GPUå‘½ä»¤</span>
<span class="hljs-deletion">- eglSwapBuffers: ç­‰å¾…GPUå®Œæˆ</span>
</code></pre>
<p><strong>Systraceå®æˆ˜æŠ€å·§</strong>:</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># æŠ€å·§1: åªæŠ“å–å…³é”®æ—¶åˆ»</span>
<span class="hljs-comment"># åœ¨ä»£ç ä¸­æ’å…¥Traceæ ‡è®°</span>
Trace.beginSection(<span class="hljs-string">"MyExpensiveOperation"</span>)
// è€—æ—¶æ“ä½œ
Trace.endSection()

<span class="hljs-comment"># Systraceä¸­å°±ä¼šæ˜¾ç¤ºè¿™ä¸ªæ ‡è®°,æ–¹ä¾¿å®šä½</span>
</code></pre>
<h3 data-id="heading-14">2.2 FrameMetrics API - å®æ—¶ç›‘æ§</h3>
<p><strong>FrameMetrics</strong>æ˜¯Android 7.0å¼•å…¥çš„API,å¯ä»¥å®æ—¶ç›‘æ§æ¯ä¸€å¸§çš„è€—æ—¶ã€‚</p>
<p><strong>å®Œæ•´ä»£ç ç¤ºä¾‹</strong>:</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MainActivity</span> : <span class="hljs-type">AppCompatActivity</span>() {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> frameMetricsListener = Window.OnFrameMetricsAvailableListener {
        _, frameMetrics, dropCountSinceLastInvocation -&gt;

        <span class="hljs-comment">// è·å–å„é˜¶æ®µè€—æ—¶ (å•ä½:çº³ç§’)</span>
        <span class="hljs-keyword">val</span> totalDuration = frameMetrics.getMetric(FrameMetrics.TOTAL_DURATION)
        <span class="hljs-keyword">val</span> inputDuration = frameMetrics.getMetric(FrameMetrics.INPUT_HANDLING_DURATION)
        <span class="hljs-keyword">val</span> animationDuration = frameMetrics.getMetric(FrameMetrics.ANIMATION_DURATION)
        <span class="hljs-keyword">val</span> layoutDuration = frameMetrics.getMetric(FrameMetrics.LAYOUT_MEASURE_DURATION)
        <span class="hljs-keyword">val</span> drawDuration = frameMetrics.getMetric(FrameMetrics.DRAW_DURATION)
        <span class="hljs-keyword">val</span> syncDuration = frameMetrics.getMetric(FrameMetrics.SYNC_DURATION)
        <span class="hljs-keyword">val</span> commandDuration = frameMetrics.getMetric(FrameMetrics.COMMAND_ISSUE_DURATION)
        <span class="hljs-keyword">val</span> swapDuration = frameMetrics.getMetric(FrameMetrics.SWAP_BUFFERS_DURATION)

        <span class="hljs-comment">// è½¬æ¢ä¸ºæ¯«ç§’</span>
        <span class="hljs-keyword">val</span> totalMs = totalDuration / <span class="hljs-number">1_000_000.0</span>

        <span class="hljs-comment">// åˆ¤æ–­æ˜¯å¦æ‰å¸§ (è¶…è¿‡16.6ms)</span>
        <span class="hljs-keyword">if</span> (totalMs &gt; <span class="hljs-number">16.6</span>) {
            Log.w(<span class="hljs-string">"FrameMetrics"</span>, <span class="hljs-string">"""
                âš ï¸ Dropped Frame: <span class="hljs-subst">${totalMs}</span>ms (æ‰äº† <span class="hljs-subst">${dropCountSinceLastInvocation}</span> å¸§)
                  - Input: <span class="hljs-subst">${inputDuration / <span class="hljs-number">1</span>_000_000<span class="hljs-number">.0</span>}</span>ms
                  - Animation: <span class="hljs-subst">${animationDuration / <span class="hljs-number">1</span>_000_000<span class="hljs-number">.0</span>}</span>ms
                  - Layout/Measure: <span class="hljs-subst">${layoutDuration / <span class="hljs-number">1</span>_000_000<span class="hljs-number">.0</span>}</span>ms
                  - Draw: <span class="hljs-subst">${drawDuration / <span class="hljs-number">1</span>_000_000<span class="hljs-number">.0</span>}</span>ms
                  - Sync: <span class="hljs-subst">${syncDuration / <span class="hljs-number">1</span>_000_000<span class="hljs-number">.0</span>}</span>ms
                  - GPU Command: <span class="hljs-subst">${commandDuration / <span class="hljs-number">1</span>_000_000<span class="hljs-number">.0</span>}</span>ms
                  - SwapBuffers: <span class="hljs-subst">${swapDuration / <span class="hljs-number">1</span>_000_000<span class="hljs-number">.0</span>}</span>ms
            """</span>.trimIndent())

            <span class="hljs-comment">// å¯ä»¥ä¸ŠæŠ¥åˆ°ç›‘æ§å¹³å°</span>
            reportJankToServer(totalMs, dropCountSinceLastInvocation)
        }
    }

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreate</span><span class="hljs-params">(savedInstanceState: <span class="hljs-type">Bundle</span>?)</span></span> {
        <span class="hljs-keyword">super</span>.onCreate(savedInstanceState)
        setContentView(R.layout.activity_main)

        <span class="hljs-comment">// æ³¨å†Œç›‘å¬å™¨</span>
        window.addOnFrameMetricsAvailableListener(
            frameMetricsListener,
            Handler(Looper.getMainLooper())
        )
    }

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onDestroy</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">super</span>.onDestroy()
        <span class="hljs-comment">// ç§»é™¤ç›‘å¬å™¨</span>
        window.removeOnFrameMetricsAvailableListener(frameMetricsListener)
    }
}
</code></pre>
<p><strong>FrameMetricsçš„ä¼˜åŠ¿</strong>:</p>
<ul>
<li>âœ… å®æ—¶ç›‘æ§,ä¸éœ€è¦æ‰‹åŠ¨æŠ“Trace</li>
<li>âœ… å¯ä»¥åœ¨çº¿ä¸Šç¯å¢ƒä½¿ç”¨,æ”¶é›†ç”¨æˆ·æ•°æ®</li>
<li>âœ… å¯ä»¥ç²¾ç¡®åˆ°æ¯ä¸ªé˜¶æ®µçš„è€—æ—¶</li>
<li>âš ï¸ ç¼ºç‚¹:æ— æ³•çœ‹åˆ°è°ƒç”¨æ ˆ,åªèƒ½çœ‹è€—æ—¶</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2526b42f748c4bcda111bd606bcb5951~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yas5aWHTGFi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768657337&amp;x-signature=9Wia644aRS88EG0F8jqGaeoA0BA%3D" alt="10-02-jank-analysis-tools.png" loading="lazy"/></p>
<h3 data-id="heading-15">2.3 Choreographer - è‡ªå®šä¹‰ç›‘æ§æ–¹æ¡ˆ</h3>
<p><strong>Choreographer</strong>æ˜¯Androidçš„"ç¼–èˆè€…",è´Ÿè´£è°ƒåº¦VSYNCä¿¡å·å’ŒUIæ›´æ–°ã€‚æˆ‘ä»¬å¯ä»¥åˆ©ç”¨å®ƒå®ç°æ›´çµæ´»çš„ç›‘æ§ã€‚</p>
<p><strong>æ ¸å¿ƒä»£ç </strong>:</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ChoreographerJankMonitor</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> lastFrameTimeNanos: <span class="hljs-built_in">Long</span> = <span class="hljs-number">0</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> jankThresholdMs = <span class="hljs-number">16.6</span>  <span class="hljs-comment">// æ‰å¸§é˜ˆå€¼</span>

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> frameCallback = <span class="hljs-keyword">object</span> : Choreographer.FrameCallback {
        <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">doFrame</span><span class="hljs-params">(frameTimeNanos: <span class="hljs-type">Long</span>)</span></span> {
            <span class="hljs-keyword">if</span> (lastFrameTimeNanos &gt; <span class="hljs-number">0</span>) {
                <span class="hljs-comment">// è®¡ç®—ä¸¤å¸§ä¹‹é—´çš„æ—¶é—´å·®</span>
                <span class="hljs-keyword">val</span> frameIntervalMs = (frameTimeNanos - lastFrameTimeNanos) / <span class="hljs-number">1_000_000.0</span>

                <span class="hljs-keyword">if</span> (frameIntervalMs &gt; jankThresholdMs) {
                    <span class="hljs-comment">// æ‰å¸§äº†!</span>
                    <span class="hljs-keyword">val</span> droppedFrames = (frameIntervalMs / <span class="hljs-number">16.6</span>).toInt()
                    onJankDetected(frameIntervalMs, droppedFrames)
                }
            }

            lastFrameTimeNanos = frameTimeNanos

            <span class="hljs-comment">// ç»§ç»­ç›‘å¬ä¸‹ä¸€å¸§</span>
            Choreographer.getInstance().postFrameCallback(<span class="hljs-keyword">this</span>)
        }
    }

    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">start</span><span class="hljs-params">()</span></span> {
        Choreographer.getInstance().postFrameCallback(frameCallback)
    }

    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">stop</span><span class="hljs-params">()</span></span> {
        Choreographer.getInstance().removeFrameCallback(frameCallback)
    }

    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onJankDetected</span><span class="hljs-params">(intervalMs: <span class="hljs-type">Double</span>, droppedFrames: <span class="hljs-type">Int</span>)</span></span> {
        Log.w(<span class="hljs-string">"JankMonitor"</span>, <span class="hljs-string">"âš ï¸ Jank detected: <span class="hljs-subst">${intervalMs}</span>ms (dropped <span class="hljs-variable">$droppedFrames</span> frames)"</span>)

        <span class="hljs-comment">// é‡‡é›†å †æ ˆä¿¡æ¯</span>
        <span class="hljs-keyword">val</span> stackTrace = Thread.currentThread().stackTrace

        <span class="hljs-comment">// ä¸ŠæŠ¥ç›‘æ§</span>
        reportJank(intervalMs, droppedFrames, stackTrace)
    }
}

<span class="hljs-comment">// ä½¿ç”¨</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MyApplication</span> : <span class="hljs-type">Application</span>() {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> jankMonitor = ChoreographerJankMonitor()

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreate</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">super</span>.onCreate()
        jankMonitor.start()
    }
}
</code></pre>
<p><strong>Choreographeræ–¹æ¡ˆçš„ç‰¹ç‚¹</strong>:</p>
<ul>
<li>âœ… è½»é‡çº§,æ€§èƒ½å¼€é”€å°</li>
<li>âœ… å¯ä»¥è‡ªå®šä¹‰é˜ˆå€¼å’Œç›‘æ§ç­–ç•¥</li>
<li>âœ… å¯ä»¥é‡‡é›†å †æ ˆä¿¡æ¯</li>
<li>âš ï¸ åªèƒ½ç›‘æ§æ‰å¸§,æ— æ³•åˆ†æå…·ä½“åŸå› </li>
</ul>
<h3 data-id="heading-16">2.4 å·¥å…·é€‰æ‹©æŒ‡å—</h3>





















































<table><thead><tr><th align="left">å·¥å…·</th><th align="center">å®æ—¶æ€§</th><th align="center">å‡†ç¡®æ€§</th><th align="center">è¯¦ç»†ç¨‹åº¦</th><th align="center">æ€§èƒ½å¼€é”€</th><th align="left">é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td align="left"><strong>Systrace</strong></td><td align="center">âŒ ç¦»çº¿</td><td align="center">â­â­â­â­â­</td><td align="center">æœ€è¯¦ç»†</td><td align="center">å¤§</td><td align="left">å¼€å‘é˜¶æ®µæ·±åº¦åˆ†æ</td></tr><tr><td align="left"><strong>Perfetto</strong></td><td align="center">âŒ ç¦»çº¿</td><td align="center">â­â­â­â­â­</td><td align="center">æœ€è¯¦ç»†</td><td align="center">å¤§</td><td align="left">å¼€å‘é˜¶æ®µæ·±åº¦åˆ†æ</td></tr><tr><td align="left"><strong>FrameMetrics</strong></td><td align="center">âœ… å®æ—¶</td><td align="center">â­â­â­â­</td><td align="center">åˆ†é˜¶æ®µ</td><td align="center">å°</td><td align="left">çº¿ä¸Šå®æ—¶ç›‘æ§</td></tr><tr><td align="left"><strong>Choreographer</strong></td><td align="center">âœ… å®æ—¶</td><td align="center">â­â­â­</td><td align="center">ä»…æ‰å¸§</td><td align="center">æå°</td><td align="left">çº¿ä¸Šè½»é‡ç›‘æ§</td></tr><tr><td align="left"><strong>Profiler</strong></td><td align="center">âŒ ç¦»çº¿</td><td align="center">â­â­â­â­</td><td align="center">è¯¦ç»†</td><td align="center">ä¸­</td><td align="left">å¼€å‘é˜¶æ®µåˆ†æ</td></tr></tbody></table>
<p><strong>æ¨èç»„åˆæ–¹æ¡ˆ</strong>:</p>
<ul>
<li><strong>å¼€å‘é˜¶æ®µ</strong>: Systrace/Perfettoæ·±åº¦åˆ†æ + Profilerè¾…åŠ©</li>
<li><strong>çº¿ä¸Šç›‘æ§</strong>: FrameMetrics + ChoreographeråŒé‡ç›‘æ§</li>
<li><strong>é—®é¢˜å®šä½</strong>: å…ˆç”¨FrameMetricså‘ç°é—®é¢˜,å†ç”¨Systraceæ·±åº¦åˆ†æ</li>
</ul>
<h2 data-id="heading-17">3. ä¸»çº¿ç¨‹å¡é¡¿åˆ†æä¸ä¼˜åŒ–</h2>
<p>ä¸»çº¿ç¨‹å¡é¡¿æ˜¯æœ€å¸¸è§çš„å¡é¡¿ç±»å‹,å æ¯”è¶…è¿‡80%ã€‚</p>
<h3 data-id="heading-18">3.1 ä¸»çº¿ç¨‹è€—æ—¶æ“ä½œè¯†åˆ«</h3>
<p><strong>Systraceåˆ†ææ­¥éª¤</strong>:</p>
<ol>
<li><strong>æ‰“å¼€Systraceæ–‡ä»¶</strong>,å®šä½åˆ°Frame Timeline</li>
<li><strong>æ‰¾åˆ°çº¢è‰²/æ©™è‰²çš„å¸§</strong>,æŸ¥çœ‹è€—æ—¶</li>
<li><strong>é€‰ä¸­è¯¥å¸§</strong>,æŸ¥çœ‹UI Threadé¢æ¿</li>
<li><strong>å±•å¼€è°ƒç”¨æ ˆ</strong>,æ‰¾å‡ºè€—æ—¶&gt;10msçš„æ“ä½œ</li>
<li><strong>æŸ¥çœ‹Self Time</strong>,å®šä½åˆ°å…·ä½“å‡½æ•°</li>
</ol>
<p><strong>ç¤ºä¾‹</strong>:</p>
<pre><code class="hljs language-ini" lang="ini">Frame <span class="hljs-comment">#245: 35ms (Dropped 2 frames)</span>
â””â”€ UI Thread <span class="hljs-section">[====================================]</span> 32ms
    â””â”€ RecyclerView.onBindViewHolder <span class="hljs-section">[==========================]</span> 28ms
        â”œâ”€ BitmapFactory.decodeFile <span class="hljs-section">[===================]</span> 18ms  â† ç½ªé­ç¥¸é¦–!
        â”œâ”€ TextView.setText <span class="hljs-section">[====]</span> 5ms
        â””â”€ å…¶ä»–æ“ä½œ <span class="hljs-section">[===]</span> 5ms
</code></pre>
<p><strong>Self Time vs Wall Duration</strong>:</p>
<ul>
<li><strong>Wall Duration</strong>: æ€»è€—æ—¶ (åŒ…å«å­å‡½æ•°)</li>
<li><strong>Self Time</strong>: è‡ªèº«è€—æ—¶ (ä¸åŒ…å«å­å‡½æ•°)</li>
</ul>
<p>ä¼˜åŒ–æ—¶,ä¼˜å…ˆçœ‹<strong>Self Timeé«˜</strong>çš„å‡½æ•°,è¿™æ˜¯çœŸæ­£çš„ç“¶é¢ˆã€‚</p>
<h3 data-id="heading-19">3.2 å¸¸è§ä¸»çº¿ç¨‹å¡é¡¿åœºæ™¯åŠä¼˜åŒ–</h3>
<h4 data-id="heading-20">åœºæ™¯1: è¿‡åº¦çš„measure/layout</h4>
<p><strong>é—®é¢˜ä»£ç </strong>:</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- âŒ Bad: åµŒå¥—5å±‚LinearLayout,æ¯æ¬¡measureéƒ½è¦éå†æ‰€æœ‰å­View --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">LinearLayout</span>
    <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
    <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"wrap_content"</span>
    <span class="hljs-attr">android:orientation</span>=<span class="hljs-string">"vertical"</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">LinearLayout</span>
        <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
        <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"wrap_content"</span>
        <span class="hljs-attr">android:orientation</span>=<span class="hljs-string">"horizontal"</span>&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-name">LinearLayout</span>
            <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"0dp"</span>
            <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"wrap_content"</span>
            <span class="hljs-attr">android:layout_weight</span>=<span class="hljs-string">"1"</span>
            <span class="hljs-attr">android:orientation</span>=<span class="hljs-string">"vertical"</span>&gt;</span>

            <span class="hljs-tag">&lt;<span class="hljs-name">LinearLayout</span>
                <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
                <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"wrap_content"</span>
                <span class="hljs-attr">android:orientation</span>=<span class="hljs-string">"horizontal"</span>&gt;</span>

                <span class="hljs-tag">&lt;<span class="hljs-name">LinearLayout</span>
                    <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"0dp"</span>
                    <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"wrap_content"</span>
                    <span class="hljs-attr">android:layout_weight</span>=<span class="hljs-string">"1"</span>&gt;</span>

                    <span class="hljs-tag">&lt;<span class="hljs-name">TextView</span>
                        <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"wrap_content"</span>
                        <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"wrap_content"</span>
                        <span class="hljs-attr">android:text</span>=<span class="hljs-string">"æ·±åº¦åµŒå¥—çš„TextView"</span> /&gt;</span>

                <span class="hljs-tag">&lt;/<span class="hljs-name">LinearLayout</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">LinearLayout</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">LinearLayout</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">LinearLayout</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">LinearLayout</span>&gt;</span>
</code></pre>
<p><strong>Systraceæ˜¾ç¤º</strong>:</p>
<pre><code class="hljs language-bash" lang="bash">measure/layout: 12ms  â† è¿‡é«˜!
</code></pre>
<p><strong>ä¼˜åŒ–æ–¹æ¡ˆ</strong>:</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- âœ… Good: ä½¿ç”¨ConstraintLayout,å•å±‚å¸ƒå±€ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">androidx.constraintlayout.widget.ConstraintLayout</span>
    <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
    <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"wrap_content"</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">TextView</span>
        <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/textView"</span>
        <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"wrap_content"</span>
        <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"wrap_content"</span>
        <span class="hljs-attr">android:text</span>=<span class="hljs-string">"å•å±‚å¸ƒå±€çš„TextView"</span>
        <span class="hljs-attr">app:layout_constraintTop_toTopOf</span>=<span class="hljs-string">"parent"</span>
        <span class="hljs-attr">app:layout_constraintStart_toStartOf</span>=<span class="hljs-string">"parent"</span>
        <span class="hljs-attr">app:layout_constraintEnd_toEndOf</span>=<span class="hljs-string">"parent"</span> /&gt;</span>

<span class="hljs-tag">&lt;/<span class="hljs-name">androidx.constraintlayout.widget.ConstraintLayout</span>&gt;</span>
</code></pre>
<p><strong>ä¼˜åŒ–æ•ˆæœ</strong>:</p>
<pre><code class="hljs language-bash" lang="bash">measure/layout: 3ms  â† ä¼˜åŒ–75%!
</code></pre>
<p><strong>ä¼˜åŒ–åŸåˆ™</strong>:</p>
<ul>
<li>ä½¿ç”¨<code>ConstraintLayout</code>æ›¿ä»£åµŒå¥—çš„<code>LinearLayout</code>/<code>RelativeLayout</code></li>
<li>é¿å…ä½¿ç”¨<code>layout_weight</code>,ä¼šå¯¼è‡´ä¸¤æ¬¡measure</li>
<li>ä½¿ç”¨<code>ViewStub</code>å»¶è¿ŸåŠ è½½ä¸å¯è§çš„View</li>
<li>ä½¿ç”¨<code>&amp;lt;merge&amp;gt;</code>æ ‡ç­¾å‡å°‘å±‚çº§</li>
</ul>
<h4 data-id="heading-21">åœºæ™¯2: ä¸»çº¿ç¨‹IOæ“ä½œ</h4>
<p><strong>é—®é¢˜ä»£ç </strong>:</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// âŒ Bad: ä¸»çº¿ç¨‹è¯»å–æ–‡ä»¶</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MainActivity</span> : <span class="hljs-type">AppCompatActivity</span>() {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreate</span><span class="hljs-params">(savedInstanceState: <span class="hljs-type">Bundle</span>?)</span></span> {
        <span class="hljs-keyword">super</span>.onCreate(savedInstanceState)
        setContentView(R.layout.activity_main)

        <span class="hljs-comment">// åŒæ­¥è¯»å–é…ç½®æ–‡ä»¶ (å¯èƒ½è€—æ—¶100ms+)</span>
        <span class="hljs-keyword">val</span> config = File(filesDir, <span class="hljs-string">"config.json"</span>).readText()
        parseConfig(config)

        <span class="hljs-comment">// åŒæ­¥æŸ¥è¯¢æ•°æ®åº“ (å¯èƒ½è€—æ—¶50ms+)</span>
        <span class="hljs-keyword">val</span> <span class="hljs-keyword">data</span> = database.queryAll()
        displayData(<span class="hljs-keyword">data</span>)
    }
}
</code></pre>
<p><strong>Systraceæ˜¾ç¤º</strong>:</p>
<pre><code class="hljs language-ini" lang="ini">UI Thread: <span class="hljs-section">[==IO Read 120ms==]</span><span class="hljs-section">[DB Query 60ms==]</span> â† ä¸»çº¿ç¨‹é˜»å¡180ms!
</code></pre>
<p><strong>ä¼˜åŒ–æ–¹æ¡ˆ</strong>:</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// âœ… Good: å¼‚æ­¥åŠ è½½</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MainActivity</span> : <span class="hljs-type">AppCompatActivity</span>() {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreate</span><span class="hljs-params">(savedInstanceState: <span class="hljs-type">Bundle</span>?)</span></span> {
        <span class="hljs-keyword">super</span>.onCreate(savedInstanceState)
        setContentView(R.layout.activity_main)

        <span class="hljs-comment">// å…ˆæ˜¾ç¤ºå ä½UI</span>
        showLoadingUI()

        <span class="hljs-comment">// å¼‚æ­¥åŠ è½½æ•°æ®</span>
        lifecycleScope.launch {
            <span class="hljs-comment">// IOçº¿ç¨‹è¯»å–é…ç½®</span>
            <span class="hljs-keyword">val</span> config = withContext(Dispatchers.IO) {
                File(filesDir, <span class="hljs-string">"config.json"</span>).readText()
            }

            <span class="hljs-comment">// è§£æé…ç½® (å¯èƒ½æ˜¯CPUå¯†é›†å‹,ç”¨Defaultçº¿ç¨‹æ± )</span>
            <span class="hljs-keyword">val</span> parsedConfig = withContext(Dispatchers.Default) {
                parseConfig(config)
            }

            <span class="hljs-comment">// IOçº¿ç¨‹æŸ¥è¯¢æ•°æ®åº“</span>
            <span class="hljs-keyword">val</span> <span class="hljs-keyword">data</span> = withContext(Dispatchers.IO) {
                database.queryAll()
            }

            <span class="hljs-comment">// å›åˆ°ä¸»çº¿ç¨‹æ›´æ–°UI</span>
            withContext(Dispatchers.Main) {
                hideLoadingUI()
                displayData(<span class="hljs-keyword">data</span>)
            }
        }
    }
}
</code></pre>
<p><strong>ä¼˜åŒ–æ•ˆæœ</strong>:</p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">onCreate: 5ms  â† ä¼˜åŒ–97%!</span>
<span class="hljs-section">æ•°æ®åŠ è½½: åå°çº¿ç¨‹,ä¸é˜»å¡UI</span>
</code></pre>
<h4 data-id="heading-22">åœºæ™¯3: RecyclerViewæ»‘åŠ¨å¡é¡¿</h4>
<p>è¿™æ˜¯æœ€å¸¸è§çš„å¡é¡¿åœºæ™¯,æˆ‘ä»¬åœ¨ç¬¬7èŠ‚ä¼šè¯¦ç»†å±•å¼€ã€‚è¿™é‡Œå…ˆåˆ—å‡ºæ ¸å¿ƒä¼˜åŒ–ç‚¹:</p>
<p><strong>é—®é¢˜ä»£ç </strong>:</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// âŒ Bad: onBindViewHolderä¸­è€—æ—¶æ“ä½œ</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MyAdapter</span> : <span class="hljs-type">RecyclerView.Adapter</span>&lt;<span class="hljs-type">MyViewHolder</span>&gt;() {

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onBindViewHolder</span><span class="hljs-params">(holder: <span class="hljs-type">MyViewHolder</span>, position: <span class="hljs-type">Int</span>)</span></span> {
        <span class="hljs-keyword">val</span> item = dataList[position]

        <span class="hljs-comment">// é—®é¢˜1: åŒæ­¥è§£ç å›¾ç‰‡ (15-30ms)</span>
        <span class="hljs-keyword">val</span> bitmap = BitmapFactory.decodeFile(item.imagePath)
        holder.imageView.setImageBitmap(bitmap)

        <span class="hljs-comment">// é—®é¢˜2: å¤æ‚çš„å­—ç¬¦ä¸²æ‹¼æ¥</span>
        holder.titleView.text = buildString {
            append(item.title)
            append(<span class="hljs-string">" - "</span>)
            append(SimpleDateFormat(<span class="hljs-string">"yyyy-MM-dd"</span>).format(item.date))
            append(<span class="hljs-string">" - "</span>)
            append(item.category)
        }

        <span class="hljs-comment">// é—®é¢˜3: åŠ¨æ€è®¾ç½®Viewå±æ€§å¯¼è‡´é‡æ–°layout</span>
        <span class="hljs-keyword">val</span> params = holder.imageView.layoutParams
        params.height = item.height
        holder.imageView.layoutParams = params  <span class="hljs-comment">// è§¦å‘requestLayout</span>
    }
}
</code></pre>
<p><strong>Systraceæ˜¾ç¤º</strong>:</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">onBindViewHolder:</span> <span class="hljs-string">45ms</span>  <span class="hljs-string">â†</span> <span class="hljs-string">è¿œè¶…16.6ms!</span>
  <span class="hljs-string">â”œâ”€</span> <span class="hljs-attr">BitmapFactory.decodeFile:</span> <span class="hljs-string">28ms</span>
  <span class="hljs-string">â”œâ”€</span> <span class="hljs-string">Stringæ‹¼æ¥:</span> <span class="hljs-string">10ms</span>
  <span class="hljs-string">â””â”€</span> <span class="hljs-attr">requestLayout:</span> <span class="hljs-string">7ms</span>
</code></pre>
<p><strong>ä¼˜åŒ–æ–¹æ¡ˆ</strong>:</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// âœ… Good: ä¼˜åŒ–åçš„Adapter</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MyAdapter</span> : <span class="hljs-type">RecyclerView.Adapter</span>&lt;<span class="hljs-type">MyViewHolder</span>&gt;() {

    <span class="hljs-comment">// ä¼˜åŒ–1: é¢„å¤„ç†æ•°æ®</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> formattedDataList = dataList.map { item -&gt;
        FormattedItem(
            imagePath = item.imagePath,
            displayTitle = <span class="hljs-string">"<span class="hljs-subst">${item.title}</span> - <span class="hljs-subst">${dateFormat.format(item.date)}</span> - <span class="hljs-subst">${item.category}</span>"</span>,
            imageHeight = item.height
        )
    }

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onBindViewHolder</span><span class="hljs-params">(holder: <span class="hljs-type">MyViewHolder</span>, position: <span class="hljs-type">Int</span>)</span></span> {
        <span class="hljs-keyword">val</span> item = formattedDataList[position]

        <span class="hljs-comment">// ä¼˜åŒ–2: ä½¿ç”¨Glideå¼‚æ­¥åŠ è½½å›¾ç‰‡</span>
        Glide.with(holder.itemView.context)
            .load(item.imagePath)
            .<span class="hljs-keyword">override</span>(<span class="hljs-number">300</span>, <span class="hljs-number">300</span>)  <span class="hljs-comment">// ç¼©æ”¾åˆ°ç›®æ ‡å°ºå¯¸</span>
            .centerCrop()
            .placeholder(R.drawable.placeholder)  <span class="hljs-comment">// å ä½å›¾</span>
            .into(holder.imageView)

        <span class="hljs-comment">// ä¼˜åŒ–3: ç›´æ¥ä½¿ç”¨é¢„å¤„ç†çš„å­—ç¬¦ä¸²</span>
        holder.titleView.text = item.displayTitle

        <span class="hljs-comment">// ä¼˜åŒ–4: åœ¨XMLä¸­ä½¿ç”¨å›ºå®šé«˜åº¦,é¿å…åŠ¨æ€è®¾ç½®</span>
        <span class="hljs-comment">// æˆ–è€…ä½¿ç”¨è‡ªå®šä¹‰LayoutManagerå¤„ç†</span>
    }

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreateViewHolder</span><span class="hljs-params">(parent: <span class="hljs-type">ViewGroup</span>, viewType: <span class="hljs-type">Int</span>)</span></span>: MyViewHolder {
        <span class="hljs-comment">// ä¼˜åŒ–5: ä½¿ç”¨ViewBindingå‡å°‘findViewById</span>
        <span class="hljs-keyword">val</span> binding = ItemLayoutBinding.inflate(
            LayoutInflater.from(parent.context),
            parent,
            <span class="hljs-literal">false</span>
        )
        <span class="hljs-keyword">return</span> MyViewHolder(binding)
    }
}

<span class="hljs-comment">// ä¼˜åŒ–6: å¢åŠ ViewHolderç¼“å­˜</span>
recyclerView.setItemViewCacheSize(<span class="hljs-number">20</span>)  <span class="hljs-comment">// é»˜è®¤2,å¢åŠ åˆ°20</span>
recyclerView.setHasFixedSize(<span class="hljs-literal">true</span>)     <span class="hljs-comment">// å›ºå®šå°ºå¯¸,é¿å…å¤šæ¬¡measure</span>
</code></pre>
<p><strong>ä¼˜åŒ–æ•ˆæœ</strong>:</p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">onBindViewHolder: 3ms  â† ä¼˜åŒ–93%!</span>
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ad336c7b5a5e4112900aecdc1a3c49d2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yas5aWHTGFi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768657337&amp;x-signature=sVV%2FffXRM83oxZjdCA5ahQkiPR4%3D" alt="10-03-main-thread-optimization-decision-tree.png" loading="lazy"/></p>
<h3 data-id="heading-23">3.3 ä¸»çº¿ç¨‹ä¼˜åŒ–ç­–ç•¥æ€»ç»“</h3>









































<table><thead><tr><th align="left">é—®é¢˜ç±»å‹</th><th align="left">è¯†åˆ«ç‰¹å¾</th><th align="left">ä¼˜åŒ–ç­–ç•¥</th><th align="center">æ•ˆæœ</th></tr></thead><tbody><tr><td align="left"><strong>å¤æ‚å¸ƒå±€</strong></td><td align="left">measure/layout &gt;10ms</td><td align="left">ConstraintLayout, ViewStub, &lt;merge&gt;</td><td align="center">â†“60-80%</td></tr><tr><td align="left"><strong>IOæ“ä½œ</strong></td><td align="left">æ–‡ä»¶è¯»å†™, æ•°æ®åº“æŸ¥è¯¢</td><td align="left">å¼‚æ­¥åŠ è½½ (Coroutines/RxJava)</td><td align="center">â†“90%+</td></tr><tr><td align="left"><strong>å›¾ç‰‡è§£ç </strong></td><td align="left">BitmapFactory &gt;10ms</td><td align="left">Glide/Coilå¼‚æ­¥åŠ è½½+ç¼“å­˜</td><td align="center">â†“90%+</td></tr><tr><td align="left"><strong>å­—ç¬¦ä¸²æ“ä½œ</strong></td><td align="left">Stringæ‹¼æ¥ &gt;5ms</td><td align="left">é¢„å¤„ç†, StringBuilder</td><td align="center">â†“70%</td></tr><tr><td align="left"><strong>åŠ¨æ€è®¾ç½®å±æ€§</strong></td><td align="left">requestLayouté¢‘ç¹è§¦å‘</td><td align="left">XMLå›ºå®šå°ºå¯¸, æ‰¹é‡æ›´æ–°</td><td align="center">â†“50-70%</td></tr></tbody></table>
<p><strong>æ ¸å¿ƒåŸåˆ™</strong>:</p>
<ol>
<li><strong>å¼‚æ­¥åŒ–</strong>: ä¸€åˆ‡è€—æ—¶æ“ä½œéƒ½ä¸åº”è¯¥åœ¨ä¸»çº¿ç¨‹</li>
<li><strong>é¢„åŠ è½½</strong>: æå‰å‡†å¤‡æ•°æ®,å‡å°‘ç­‰å¾…æ—¶é—´</li>
<li><strong>å¸ƒå±€ä¼˜åŒ–</strong>: å‡å°‘å±‚çº§,ä½¿ç”¨é«˜æ•ˆçš„LayoutManager</li>
<li><strong>ç¼“å­˜</strong>: å›¾ç‰‡ã€æ•°æ®ã€Viewéƒ½åº”è¯¥ç¼“å­˜</li>
<li><strong>å»¶è¿ŸåŠ è½½</strong>: ViewStubã€æ‡’åŠ è½½éé¦–å±å†…å®¹</li>
</ol>
<h2 data-id="heading-24">4. æ¸²æŸ“çº¿ç¨‹ä¸GPUå¡é¡¿åˆ†æ</h2>
<p>å½“ä¸»çº¿ç¨‹ä¼˜åŒ–åˆ°ä½å,å¦‚æœä»ç„¶å¡é¡¿,é—®é¢˜å¯èƒ½å‡ºåœ¨æ¸²æŸ“çº¿ç¨‹æˆ–GPUã€‚</p>
<h3 data-id="heading-25">4.1 RenderThreadå·¥ä½œåŸç†</h3>
<p>ä»Android 5.0å¼€å§‹,Androidå¼•å…¥äº†<strong>RenderThread</strong>(æ¸²æŸ“çº¿ç¨‹),å°†æ¸²æŸ“å·¥ä½œä»ä¸»çº¿ç¨‹åˆ†ç¦»å‡ºæ¥ã€‚</p>
<p><strong>æ¸²æŸ“æµç¨‹</strong>:</p>
<pre><code class="hljs language-markdown" lang="markdown">ä¸»çº¿ç¨‹ (UI Thread):
  â””â”€ View.draw()
<span class="hljs-code">      â””â”€ å½•åˆ¶DisplayList (è®°å½•ç»˜åˆ¶æŒ‡ä»¤,ä¸å®é™…ç»˜åˆ¶)
          â””â”€ é€šçŸ¥RenderThread
</span>
RenderThread (æ¸²æŸ“çº¿ç¨‹):
  â””â”€ åŒæ­¥DisplayList
<span class="hljs-code">      â””â”€ å°†ç»˜åˆ¶æŒ‡ä»¤è½¬æ¢ä¸ºGPUå‘½ä»¤
          â””â”€ æäº¤åˆ°GPU
              â””â”€ ç­‰å¾…GPUå®Œæˆ
                  â””â”€ eglSwapBuffers (äº¤æ¢ç¼“å†²åŒº)
</span></code></pre>
<p><strong>è¿™æ ·åšçš„å¥½å¤„</strong>:</p>
<ul>
<li>âœ… ä¸»çº¿ç¨‹ä¸ç”¨ç­‰å¾…GPUæ¸²æŸ“å®Œæˆ</li>
<li>âœ… ä¸»çº¿ç¨‹å¯ä»¥ç»§ç»­å¤„ç†ä¸‹ä¸€å¸§</li>
<li>âœ… æ¸²æŸ“å’ŒUIæ›´æ–°å¹¶è¡Œ</li>
</ul>
<p><strong>ä½†ä¹Ÿå¸¦æ¥æ–°é—®é¢˜</strong>:</p>
<ul>
<li>âš ï¸ RenderThreadå¦‚æœè€—æ—¶è¿‡é•¿,ä¹Ÿä¼šæ‰å¸§</li>
<li>âš ï¸ GPUæ¸²æŸ“å¤æ‚å†…å®¹å¯èƒ½æˆä¸ºç“¶é¢ˆ</li>
</ul>
<h3 data-id="heading-26">4.2 è¿‡åº¦ç»˜åˆ¶(Overdraw)åˆ†æ</h3>
<p><strong>è¿‡åº¦ç»˜åˆ¶</strong>æ˜¯æŒ‡åŒä¸€ä¸ªåƒç´ è¢«ç»˜åˆ¶äº†å¤šæ¬¡ã€‚æ¯”å¦‚:</p>
<pre><code class="hljs language-scss" lang="scss">èƒŒæ™¯<span class="hljs-number">1</span> (ActivityèƒŒæ™¯) - ç¬¬<span class="hljs-number">1</span>æ¬¡ç»˜åˆ¶
  â””â”€ èƒŒæ™¯<span class="hljs-number">2</span> (LayoutèƒŒæ™¯) - ç¬¬<span class="hljs-number">2</span>æ¬¡ç»˜åˆ¶
      â””â”€ èƒŒæ™¯<span class="hljs-number">3</span> (ViewèƒŒæ™¯) - ç¬¬<span class="hljs-number">3</span>æ¬¡ç»˜åˆ¶
          â””â”€ å‰æ™¯ (Viewå†…å®¹) - ç¬¬<span class="hljs-number">4</span>æ¬¡ç»˜åˆ¶
</code></pre>
<p><strong>æœ€ç»ˆç”¨æˆ·åªèƒ½çœ‹åˆ°æœ€ä¸Šå±‚çš„å†…å®¹,ä¸‹é¢3å±‚å®Œå…¨æ˜¯æµªè´¹!</strong></p>
<p><strong>å¼€å¯è¿‡åº¦ç»˜åˆ¶å¯è§†åŒ–</strong>:</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ–¹æ³•1: é€šè¿‡adbå‘½ä»¤</span>
adb shell setprop debug.hwui.overdraw show

<span class="hljs-comment"># æ–¹æ³•2: è®¾ç½® - å¼€å‘è€…é€‰é¡¹ - è°ƒè¯•GPUè¿‡åº¦ç»˜åˆ¶ - æ˜¾ç¤ºè¿‡åº¦ç»˜åˆ¶åŒºåŸŸ</span>
</code></pre>
<p><strong>é¢œè‰²å«ä¹‰</strong>:</p>
<ul>
<li><strong>æ— è‰²/ç™½è‰²</strong>: æ— è¿‡åº¦ç»˜åˆ¶ (æœ€ç†æƒ³)</li>
<li><strong>è“è‰²</strong>: 1xè¿‡åº¦ç»˜åˆ¶ (å¯æ¥å—)</li>
<li><strong>ç»¿è‰²</strong>: 2xè¿‡åº¦ç»˜åˆ¶ (å°šå¯)</li>
<li><strong>ç²‰è‰²</strong>: 3xè¿‡åº¦ç»˜åˆ¶ (éœ€è¦ä¼˜åŒ–)</li>
<li><strong>çº¢è‰²</strong>: 4x+è¿‡åº¦ç»˜åˆ¶ (ä¸¥é‡é—®é¢˜!)</li>
</ul>
<p><strong>ä¼˜åŒ–ç›®æ ‡</strong>: å±å¹•ä¸Šå¤§éƒ¨åˆ†åŒºåŸŸåº”è¯¥æ˜¯æ— è‰²æˆ–è“è‰²,ç»¿è‰²åŒºåŸŸåº”è¯¥æ§åˆ¶åœ¨10%ä»¥å†…,é¿å…å‡ºç°ç²‰è‰²å’Œçº¢è‰²ã€‚</p>
<p><strong>å®æˆ˜æ¡ˆä¾‹:ä¼˜åŒ–è¿‡åº¦ç»˜åˆ¶</strong></p>
<p><strong>é—®é¢˜å¸ƒå±€</strong>:</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- âŒ Bad: 3å±‚èƒŒæ™¯å åŠ  --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">LinearLayout</span>
    <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
    <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"wrap_content"</span>
    <span class="hljs-attr">android:background</span>=<span class="hljs-string">"@color/white"</span>&gt;</span>  â† èƒŒæ™¯1

    <span class="hljs-tag">&lt;<span class="hljs-name">RelativeLayout</span>
        <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
        <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"wrap_content"</span>
        <span class="hljs-attr">android:background</span>=<span class="hljs-string">"@color/white"</span>&gt;</span>  â† èƒŒæ™¯2 (é‡å¤!)

        <span class="hljs-tag">&lt;<span class="hljs-name">TextView</span>
            <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"wrap_content"</span>
            <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"wrap_content"</span>
            <span class="hljs-attr">android:background</span>=<span class="hljs-string">"@drawable/bg_rounded"</span>  â† <span class="hljs-attr">èƒŒæ™¯3</span>
            <span class="hljs-attr">android:text</span>=<span class="hljs-string">"è¿‡åº¦ç»˜åˆ¶çš„æ–‡æœ¬"</span> /&gt;</span>

    <span class="hljs-tag">&lt;/<span class="hljs-name">RelativeLayout</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">LinearLayout</span>&gt;</span>
</code></pre>
<p><strong>è¿‡åº¦ç»˜åˆ¶å¯è§†åŒ–</strong>: æ–‡æœ¬åŒºåŸŸæ˜¾ç¤ºçº¢è‰²! (4xè¿‡åº¦ç»˜åˆ¶)</p>
<p><strong>ä¼˜åŒ–å</strong>:</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- âœ… Good: ç§»é™¤ä¸å¿…è¦çš„èƒŒæ™¯ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">LinearLayout</span>
    <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
    <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"wrap_content"</span>&gt;</span>  â† ç§»é™¤èƒŒæ™¯

    <span class="hljs-tag">&lt;<span class="hljs-name">RelativeLayout</span>
        <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
        <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"wrap_content"</span>&gt;</span>  â† ç§»é™¤èƒŒæ™¯

        <span class="hljs-tag">&lt;<span class="hljs-name">TextView</span>
            <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"wrap_content"</span>
            <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"wrap_content"</span>
            <span class="hljs-attr">android:background</span>=<span class="hljs-string">"@drawable/bg_rounded"</span>  â† <span class="hljs-attr">åªä¿ç•™æœ€ä¸Šå±‚èƒŒæ™¯</span>
            <span class="hljs-attr">android:text</span>=<span class="hljs-string">"ä¼˜åŒ–åçš„æ–‡æœ¬"</span> /&gt;</span>

    <span class="hljs-tag">&lt;/<span class="hljs-name">RelativeLayout</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">LinearLayout</span>&gt;</span>
</code></pre>
<p><strong>è¿‡åº¦ç»˜åˆ¶å¯è§†åŒ–</strong>: æ–‡æœ¬åŒºåŸŸæ˜¾ç¤ºè“è‰² (1xè¿‡åº¦ç»˜åˆ¶) - ä¼˜åŒ–75%!</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b7f5eac53ca54774bcedb04fc32250db~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yas5aWHTGFi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768657337&amp;x-signature=GAMAb0SWbA%2BpQxVtkU0ordCDJSU%3D" alt="10-04-overdraw-optimization-comparison.png" loading="lazy"/></p>
<h3 data-id="heading-27">4.3 GPUæ¸²æŸ“æ€§èƒ½ç“¶é¢ˆ</h3>
<p><strong>å¸¸è§GPUç“¶é¢ˆ</strong>:</p>
<ol>
<li><strong>Shaderç¼–è¯‘è€—æ—¶</strong></li>
</ol>

<pre><code class="hljs language-sql" lang="sql">ç¬¬ä¸€æ¬¡ç»˜åˆ¶è‡ªå®šä¹‰<span class="hljs-keyword">View</span>æ—¶,GPUéœ€è¦ç¼–è¯‘Shaderç¨‹åº
é¦–æ¬¡è€—æ—¶å¯èƒ½è¾¾åˆ°<span class="hljs-number">50</span><span class="hljs-number">-100</span>ms
</code></pre>
<p>2.  <strong>çº¹ç†ä¸Šä¼ å¸¦å®½</strong></p>

<pre><code class="hljs">å¤§é‡å›¾ç‰‡éœ€è¦ä»å†…å­˜ä¸Šä¼ åˆ°GPUæ˜¾å­˜
å¸¦å®½æœ‰é™,å¯èƒ½æˆä¸ºç“¶é¢ˆ
</code></pre>
<p>3.  <strong>å¤æ‚å›¾å½¢ç»˜åˆ¶</strong></p>

<pre><code class="hljs">å¤§é‡çš„Pathã€Bezieræ›²çº¿ã€é˜´å½±æ•ˆæœ
GPUè®¡ç®—é‡å¤§
</code></pre>
<p><strong>GPUæ€§èƒ½åˆ†æå·¥å…·</strong>:</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å¼€å¯GPUæ¸²æŸ“æŸ±çŠ¶å›¾</span>
adb shell setprop debug.hwui.profile visual_bars

<span class="hljs-comment"># æˆ–åœ¨è®¾ç½® - å¼€å‘è€…é€‰é¡¹ - GPUæ¸²æŸ“æ¨¡å¼åˆ†æ - åœ¨å±å¹•ä¸Šæ˜¾ç¤ºä¸ºæ¡å½¢å›¾</span>
</code></pre>
<p><strong>æŸ±çŠ¶å›¾è§£è¯»</strong>:</p>
<pre><code class="hljs language-diff" lang="diff">æ¯æ¡æŸ±çŠ¶å›¾ä»£è¡¨ä¸€å¸§,ç”±å¤šä¸ªé¢œè‰²æ®µç»„æˆ:
<span class="hljs-deletion">- è“è‰²: Inputå¤„ç†</span>
<span class="hljs-deletion">- ç´«è‰²: AnimationåŠ¨ç”»</span>
<span class="hljs-deletion">- çº¢è‰²: measure/layout</span>
<span class="hljs-deletion">- æ©™è‰²: draw (DisplayListå½•åˆ¶)</span>
<span class="hljs-deletion">- é»„è‰²: RenderThreadå¤„ç†</span>
<span class="hljs-deletion">- é’è‰²: GPUæ¸²æŸ“</span>
<span class="hljs-deletion">- ç»¿è‰²: Swap buffers</span>

æ€»é«˜åº¦è¶…è¿‡ç»¿çº¿ (16ms) = æ‰å¸§
</code></pre>
<h3 data-id="heading-28">4.4 ç¡¬ä»¶åŠ é€Ÿä¼˜åŒ–</h3>
<p><strong>ç¡¬ä»¶åŠ é€Ÿå›¾å±‚</strong>(Hardware Layer)å¯ä»¥ç¼“å­˜Viewçš„ç»˜åˆ¶ç»“æœ,é¿å…é‡å¤ç»˜åˆ¶ã€‚</p>
<p><strong>é€‚ç”¨åœºæ™¯</strong>:</p>
<ul>
<li>å¤æ‚çš„è‡ªå®šä¹‰View (ç»˜åˆ¶ä¸€æ¬¡,ç¼“å­˜åˆ°GPUçº¹ç†)</li>
<li>åŠ¨ç”»è¿‡ç¨‹ä¸­çš„View (ä½ç§»ã€ç¼©æ”¾ã€æ—‹è½¬ç­‰ä¸éœ€è¦é‡ç»˜å†…å®¹)</li>
</ul>
<p><strong>ä½¿ç”¨æ–¹æ³•</strong>:</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// å¯¹å¤æ‚Viewå¯ç”¨ç¡¬ä»¶åŠ é€Ÿå›¾å±‚</span>
customView.setLayerType(View.LAYER_TYPE_HARDWARE, <span class="hljs-literal">null</span>)

<span class="hljs-comment">// åŠ¨ç”»å¼€å§‹æ—¶å¯ç”¨</span>
animator.addListener(<span class="hljs-keyword">object</span> : AnimatorListenerAdapter() {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onAnimationStart</span><span class="hljs-params">(animation: <span class="hljs-type">Animator</span>)</span></span> {
        customView.setLayerType(View.LAYER_TYPE_HARDWARE, <span class="hljs-literal">null</span>)
    }

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onAnimationEnd</span><span class="hljs-params">(animation: <span class="hljs-type">Animator</span>)</span></span> {
        <span class="hljs-comment">// åŠ¨ç”»ç»“æŸåç§»é™¤å›¾å±‚,é‡Šæ”¾æ˜¾å­˜</span>
        customView.setLayerType(View.LAYER_TYPE_NONE, <span class="hljs-literal">null</span>)
    }
})
</code></pre>
<p><strong>æ³¨æ„äº‹é¡¹</strong>:</p>
<ul>
<li>âš ï¸ ç¡¬ä»¶å›¾å±‚ä¼šå ç”¨æ˜¾å­˜,ä¸è¦æ»¥ç”¨</li>
<li>âš ï¸ å¦‚æœViewå†…å®¹é¢‘ç¹å˜åŒ–,ç¡¬ä»¶å›¾å±‚åè€Œä¼šé™ä½æ€§èƒ½ (éœ€è¦é¢‘ç¹æ›´æ–°çº¹ç†)</li>
<li>âœ… é€‚åˆé™æ€å†…å®¹æˆ–åŠ¨ç”»è¿‡ç¨‹ä¸­çš„View</li>
</ul>
<h2 data-id="heading-29">5. ç³»ç»Ÿçº§å¡é¡¿å› ç´ </h2>
<p>é™¤äº†åº”ç”¨å±‚çš„é—®é¢˜,ç³»ç»Ÿçº§å› ç´ ä¹Ÿä¼šå¯¼è‡´å¡é¡¿ã€‚</p>
<h3 data-id="heading-30">5.1 GCæš‚åœ</h3>
<p><strong>GCç±»å‹ä¸æš‚åœæ—¶é—´</strong>:</p>





























<table><thead><tr><th align="left">GCç±»å‹</th><th align="left">è§¦å‘åŸå› </th><th align="right">æš‚åœæ—¶é—´</th><th align="left">å½±å“</th></tr></thead><tbody><tr><td align="left"><strong>Young GC</strong></td><td align="left">EdenåŒºæ»¡</td><td align="right">5-10ms</td><td align="left">è½»å¾®å¡é¡¿</td></tr><tr><td align="left"><strong>Full GC</strong></td><td align="left">è€å¹´ä»£æ»¡</td><td align="right">50-200ms</td><td align="left">ä¸¥é‡å¡é¡¿</td></tr><tr><td align="left"><strong>Concurrent GC</strong></td><td align="left">åå°å›æ”¶</td><td align="right">å°äº1ms</td><td align="left">å‡ ä¹æ— å½±å“</td></tr></tbody></table>
<p><strong>Systraceä¸­çš„GCæ ‡è®°</strong>:</p>
<pre><code class="hljs language-ini" lang="ini">UI Thread: <span class="hljs-section">[    ]</span><span class="hljs-section">[GCæš‚åœ 80ms]</span><span class="hljs-section">[     ]</span>  â† Full GCå¯¼è‡´å¤šå¸§ç©ºç™½
</code></pre>
<p><strong>ä¼˜åŒ–ç­–ç•¥</strong>:</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// 1. é¿å…åœ¨å¾ªç¯ä¸­åˆ›å»ºå¤§é‡ä¸´æ—¶å¯¹è±¡</span>
<span class="hljs-comment">// âŒ Bad</span>
<span class="hljs-keyword">for</span> (i <span class="hljs-keyword">in</span> <span class="hljs-number">0</span> until <span class="hljs-number">1000</span>) {
    <span class="hljs-keyword">val</span> temp = SomeObject()  <span class="hljs-comment">// åˆ›å»º1000ä¸ªä¸´æ—¶å¯¹è±¡</span>
    doSomething(temp)
}

<span class="hljs-comment">// âœ… Good</span>
<span class="hljs-keyword">val</span> reusableObject = SomeObject()
<span class="hljs-keyword">for</span> (i <span class="hljs-keyword">in</span> <span class="hljs-number">0</span> until <span class="hljs-number">1000</span>) {
    reusableObject.reset()  <span class="hljs-comment">// é‡ç”¨å¯¹è±¡</span>
    doSomething(reusableObject)
}

<span class="hljs-comment">// 2. ä½¿ç”¨å¯¹è±¡æ± </span>
<span class="hljs-keyword">val</span> bitmapPool = Glide.<span class="hljs-keyword">get</span>(context).bitmapPool
<span class="hljs-keyword">val</span> bitmap = bitmapPool.<span class="hljs-keyword">get</span>(width, height, Bitmap.Config.ARGB_8888)
<span class="hljs-comment">// ä½¿ç”¨å®Œåå›æ”¶</span>
bitmapPool.put(bitmap)

<span class="hljs-comment">// 3. åŠæ—¶é‡Šæ”¾ä¸ç”¨çš„å¤§å¯¹è±¡</span>
bitmap.recycle()
</code></pre>
<h3 data-id="heading-31">5.2 Binderé€šä¿¡å»¶è¿Ÿ</h3>
<p><strong>è·¨è¿›ç¨‹è°ƒç”¨çš„æ€§èƒ½å¼€é”€</strong>:</p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">æ­£å¸¸Binderè°ƒç”¨: 0.5-2ms</span>
<span class="hljs-section">ç³»ç»Ÿç¹å¿™æ—¶: 5-20ms</span>
<span class="hljs-section">Binderçº¿ç¨‹æ± é¥±å’Œ: 50-100ms+</span>
</code></pre>
<p><strong>ä¼˜åŒ–ç­–ç•¥</strong>:</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// 1. å‡å°‘IPCè°ƒç”¨æ¬¡æ•°</span>
<span class="hljs-comment">// âŒ Bad: å¾ªç¯è°ƒç”¨è¿œç¨‹æœåŠ¡</span>
<span class="hljs-keyword">for</span> (i <span class="hljs-keyword">in</span> <span class="hljs-number">0</span> until <span class="hljs-number">100</span>) {
    remoteService.getData(i)  <span class="hljs-comment">// 100æ¬¡IPC</span>
}

<span class="hljs-comment">// âœ… Good: æ‰¹é‡è·å–</span>
<span class="hljs-keyword">val</span> dataList = remoteService.getBatchData(<span class="hljs-number">0</span>, <span class="hljs-number">100</span>)  <span class="hljs-comment">// 1æ¬¡IPC</span>

<span class="hljs-comment">// 2. ä½¿ç”¨å¼‚æ­¥Binder (Android 11+)</span>
<span class="hljs-comment">// ä¸é˜»å¡å½“å‰çº¿ç¨‹</span>
</code></pre>
<h3 data-id="heading-32">5.3 CPU/GPUé¢‘ç‡è°ƒåº¦</h3>
<p><strong>æ¸©æ§é™é¢‘</strong>æ˜¯å¸¸è§çš„æ€§èƒ½ä¸‹é™åŸå› :</p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">æ­£å¸¸: CPU 2.0GHz, GPU 600MHz</span>
<span class="hljs-section">å‘çƒ­å: CPU 1.2GHz (é™ä½40%), GPU 400MHz (é™ä½33%)</span>
<span class="hljs-section">æ€§èƒ½ä¸‹é™: 30-50%</span>
</code></pre>
<p><strong>ç›‘æ§æ–¹æ³•</strong>:</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æŸ¥çœ‹CPUé¢‘ç‡</span>
adb shell <span class="hljs-built_in">cat</span> /sys/devices/system/cpu/cpu0/cpufreq/scaling_cur_freq

<span class="hljs-comment"># æŸ¥çœ‹GPUé¢‘ç‡</span>
adb shell <span class="hljs-built_in">cat</span> /sys/class/kgsl/kgsl-3d0/gpuclk
</code></pre>
<p><strong>ä¼˜åŒ–ç­–ç•¥</strong>:</p>
<ul>
<li>å‡å°‘ä¸å¿…è¦çš„è®¡ç®—,é™ä½å‘çƒ­</li>
<li>ä½¿ç”¨ç”µé‡ä¼˜åŒ–API (PowerManager)</li>
<li>é¿å…é•¿æ—¶é—´é«˜è´Ÿè½½è¿è¡Œ</li>
</ul>
<h2 data-id="heading-33">6. å®æˆ˜æ¡ˆä¾‹:RecyclerViewæ»‘åŠ¨ä¼˜åŒ–å…¨æµç¨‹</h2>
<p>è¿™æ˜¯ä¸€ä¸ªå®Œæ•´çš„çœŸå®æ¡ˆä¾‹,å±•ç¤ºä»é—®é¢˜å‘ç°åˆ°è§£å†³çš„å…¨è¿‡ç¨‹ã€‚</p>
<h3 data-id="heading-34">6.1 é—®é¢˜ç°è±¡</h3>
<p><strong>ç”¨æˆ·åé¦ˆ</strong>: "é¦–é¡µåˆ—è¡¨æ»‘åŠ¨éå¸¸å¡,æ ¹æœ¬æ»‘ä¸åŠ¨,ä¸¥é‡å½±å“ä½“éªŒ!"</p>
<p><strong>æµ‹è¯•éªŒè¯</strong>:</p>
<ul>
<li>å¿«é€Ÿæ»‘åŠ¨åˆ—è¡¨,FPSä»60éª¤é™åˆ°25-30</li>
<li>æ˜æ˜¾çš„é¡¿æŒ«æ„Ÿ,ä¸¥é‡æ‰å¸§</li>
<li>æ»‘åŠ¨è¶Šå¿«è¶Šå¡</li>
</ul>
<h3 data-id="heading-35">6.2 é—®é¢˜å®šä½</h3>
<p><strong>Step 1: æŠ“å–Systrace</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æŠ“å–10ç§’çš„æ»‘åŠ¨Trace</span>
python systrace.py -o scroll_trace.html <span class="hljs-built_in">sched</span> freq idle am wm gfx view -t 10
</code></pre>
<p><strong>Step 2: åˆ†æFrame Timeline</strong></p>
<p>æ‰“å¼€Traceæ–‡ä»¶,Frame Timelineä¸Šå¯†å¯†éº»éº»çš„çº¢è‰²å’Œæ©™è‰²æ ‡è®°:</p>
<pre><code class="hljs language-bash" lang="bash">Frame <span class="hljs-comment">#245: 35ms (Dropped 2 frames)</span>
Frame <span class="hljs-comment">#246: 42ms (Dropped 3 frames)</span>
Frame <span class="hljs-comment">#247: 38ms (Dropped 2 frames)</span>
Frame <span class="hljs-comment">#248: 45ms (Dropped 3 frames)</span>
...è¿ç»­20å¸§éƒ½åœ¨æ‰å¸§!
</code></pre>
<p><strong>Step 3: åˆ†æUI Thread</strong></p>
<p>é€‰ä¸­Frame #245,æŸ¥çœ‹UI Threadé¢æ¿:</p>
<pre><code class="hljs language-ini" lang="ini">UI Thread: <span class="hljs-section">[======================================]</span> 32ms
  â””â”€ RecyclerView.onBindViewHolder <span class="hljs-section">[==========================]</span> 28ms
      â”œâ”€ BitmapFactory.decodeFile <span class="hljs-section">[===================]</span> 18ms  â† ç¬¬ä¸€ç“¶é¢ˆ!
      â”œâ”€ String.format <span class="hljs-section">[====]</span> 5ms
      â”œâ”€ SimpleDateFormat.format <span class="hljs-section">[===]</span> 3ms
      â””â”€ å…¶ä»–æ“ä½œ <span class="hljs-section">[==]</span> 2ms
</code></pre>
<p><strong>é—®é¢˜æ˜ç¡®äº†!</strong></p>
<ol>
<li><strong>å›¾ç‰‡åŒæ­¥è§£ç </strong>: æ¯å¼ å›¾ç‰‡18ms,ä¸€å±10ä¸ªitemå°±æ˜¯180ms</li>
<li><strong>å­—ç¬¦ä¸²æ ¼å¼åŒ–</strong>: æ¯æ¬¡5ms,è™½ç„¶ä¸å¤šä½†ç´¯ç§¯å¯è§‚</li>
<li><strong>æ—¥æœŸæ ¼å¼åŒ–</strong>: SimpleDateFormatéçº¿ç¨‹å®‰å…¨,æ¯æ¬¡åˆ›å»ºæ–°å®ä¾‹</li>
</ol>
<h3 data-id="heading-36">6.3 ä¼˜åŒ–æ–¹æ¡ˆå®æ–½</h3>
<h4 data-id="heading-37">ä¼˜åŒ–1: å›¾ç‰‡å¼‚æ­¥åŠ è½½</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// Before: åŒæ­¥è§£ç å›¾ç‰‡</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">NewsAdapter</span> : <span class="hljs-type">RecyclerView.Adapter</span>&lt;<span class="hljs-type">NewsViewHolder</span>&gt;() {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onBindViewHolder</span><span class="hljs-params">(holder: <span class="hljs-type">NewsViewHolder</span>, position: <span class="hljs-type">Int</span>)</span></span> {
        <span class="hljs-keyword">val</span> item = newsList[position]

        <span class="hljs-comment">// ğŸ”´ ä¸»çº¿ç¨‹åŒæ­¥è§£ç ,è€—æ—¶18ms</span>
        <span class="hljs-keyword">val</span> bitmap = BitmapFactory.decodeFile(item.imagePath)
        holder.imageView.setImageBitmap(bitmap)
    }
}

<span class="hljs-comment">// After: Glideå¼‚æ­¥åŠ è½½</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">NewsAdapter</span> : <span class="hljs-type">RecyclerView.Adapter</span>&lt;<span class="hljs-type">NewsViewHolder</span>&gt;() {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onBindViewHolder</span><span class="hljs-params">(holder: <span class="hljs-type">NewsViewHolder</span>, position: <span class="hljs-type">Int</span>)</span></span> {
        <span class="hljs-keyword">val</span> item = newsList[position]

        <span class="hljs-comment">// âœ… Glideå¼‚æ­¥åŠ è½½+ç¼“å­˜+ç¼©æ”¾</span>
        Glide.with(holder.itemView.context)
            .load(item.imagePath)
            .<span class="hljs-keyword">override</span>(<span class="hljs-number">300</span>, <span class="hljs-number">300</span>)  <span class="hljs-comment">// ç¼©æ”¾åˆ°ç›®æ ‡å°ºå¯¸,å‡å°‘å†…å­˜å ç”¨</span>
            .centerCrop()
            .placeholder(R.drawable.img_placeholder)  <span class="hljs-comment">// å ä½å›¾</span>
            .error(R.drawable.img_error)  <span class="hljs-comment">// é”™è¯¯å›¾</span>
            .into(holder.imageView)
    }
}
</code></pre>
<p><strong>ä¼˜åŒ–æ•ˆæœ</strong>: å›¾ç‰‡è§£ç ä»ä¸»çº¿ç¨‹ç§»é™¤,è€—æ—¶ä»18msé™åˆ°0ms (å¼‚æ­¥åŠ è½½)</p>
<h4 data-id="heading-38">ä¼˜åŒ–2: æ•°æ®é¢„å¤„ç†</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// Before: æ¯æ¬¡bindéƒ½æ ¼å¼åŒ–å­—ç¬¦ä¸²</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">NewsAdapter</span>(<span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> newsList: List&lt;NewsItem&gt;) : RecyclerView.Adapter&lt;NewsViewHolder&gt;() {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> dateFormat = SimpleDateFormat(<span class="hljs-string">"yyyy-MM-dd HH:mm"</span>, Locale.getDefault())

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onBindViewHolder</span><span class="hljs-params">(holder: <span class="hljs-type">NewsViewHolder</span>, position: <span class="hljs-type">Int</span>)</span></span> {
        <span class="hljs-keyword">val</span> item = newsList[position]

        <span class="hljs-comment">// ğŸ”´ æ¯æ¬¡éƒ½é‡æ–°æ ¼å¼åŒ–,è€—æ—¶5ms</span>
        <span class="hljs-keyword">val</span> title = String.format(<span class="hljs-string">"%s - %s"</span>, item.title, item.category)
        holder.titleView.text = title

        <span class="hljs-comment">// ğŸ”´ SimpleDateFormatéçº¿ç¨‹å®‰å…¨,æ¯æ¬¡åˆ›å»ºæ–°å®ä¾‹,è€—æ—¶3ms</span>
        <span class="hljs-keyword">val</span> dateText = dateFormat.format(item.publishTime)
        holder.dateView.text = dateText
    }
}

<span class="hljs-comment">// After: é¢„å¤„ç†æ•°æ®</span>
<span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FormattedNewsItem</span>(
    <span class="hljs-keyword">val</span> imagePath: String,
    <span class="hljs-keyword">val</span> displayTitle: String,  <span class="hljs-comment">// é¢„æ ¼å¼åŒ–çš„æ ‡é¢˜</span>
    <span class="hljs-keyword">val</span> displayDate: String    <span class="hljs-comment">// é¢„æ ¼å¼åŒ–çš„æ—¥æœŸ</span>
)

<span class="hljs-keyword">class</span> <span class="hljs-title class_">NewsAdapter</span>(newsList: List&lt;NewsItem&gt;) : RecyclerView.Adapter&lt;NewsViewHolder&gt;() {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> formattedList: List&lt;FormattedNewsItem&gt; = newsList.map { item -&gt;
        <span class="hljs-comment">// åœ¨æ„é€ å‡½æ•°ä¸­ä¸€æ¬¡æ€§å¤„ç†æ‰€æœ‰æ•°æ®</span>
        FormattedNewsItem(
            imagePath = item.imagePath,
            displayTitle = <span class="hljs-string">"<span class="hljs-subst">${item.title}</span> - <span class="hljs-subst">${item.category}</span>"</span>,
            displayDate = dateFormat.format(item.publishTime)
        )
    }

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onBindViewHolder</span><span class="hljs-params">(holder: <span class="hljs-type">NewsViewHolder</span>, position: <span class="hljs-type">Int</span>)</span></span> {
        <span class="hljs-keyword">val</span> item = formattedList[position]

        <span class="hljs-comment">// âœ… ç›´æ¥ä½¿ç”¨é¢„å¤„ç†çš„å­—ç¬¦ä¸²,è€—æ—¶å°äº1ms</span>
        holder.titleView.text = item.displayTitle
        holder.dateView.text = item.displayDate

        Glide.with(holder.itemView.context)
            .load(item.imagePath)
            .<span class="hljs-keyword">override</span>(<span class="hljs-number">300</span>, <span class="hljs-number">300</span>)
            .into(holder.imageView)
    }
}
</code></pre>
<p><strong>ä¼˜åŒ–æ•ˆæœ</strong>: å­—ç¬¦ä¸²æ ¼å¼åŒ–ä»æ¯æ¬¡5msé™åˆ°å°äº1ms</p>
<h4 data-id="heading-39">ä¼˜åŒ–3: å¢åŠ ViewHolderç¼“å­˜</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// RecyclerViewé»˜è®¤åªç¼“å­˜2ä¸ªViewHolder,å¢åŠ åˆ°20ä¸ª</span>
recyclerView.setItemViewCacheSize(<span class="hljs-number">20</span>)

<span class="hljs-comment">// å¦‚æœitemé«˜åº¦å›ºå®š,è®¾ç½®ä¸ºtrueé¿å…å¤šæ¬¡measure</span>
recyclerView.setHasFixedSize(<span class="hljs-literal">true</span>)
</code></pre>
<h4 data-id="heading-40">ä¼˜åŒ–4: é¢„åŠ è½½æœºåˆ¶</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// è‡ªå®šä¹‰LayoutManager,æå‰åŠ è½½å±å¹•å¤–çš„item</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">PreloadLinearLayoutManager</span>(context: Context) : LinearLayoutManager(context) {

    <span class="hljs-comment">// è¿”å›é¢å¤–çš„å¸ƒå±€ç©ºé—´ (åƒç´ ),ç”¨äºé¢„åŠ è½½</span>
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getExtraLayoutSpace</span><span class="hljs-params">(state: <span class="hljs-type">RecyclerView</span>.<span class="hljs-type">State</span>)</span></span>: <span class="hljs-built_in">Int</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-number">500</span>  <span class="hljs-comment">// é¢„åŠ è½½å±å¹•å¤–500pxçš„å†…å®¹</span>
    }
}

<span class="hljs-comment">// ä½¿ç”¨</span>
recyclerView.layoutManager = PreloadLinearLayoutManager(<span class="hljs-keyword">this</span>)
</code></pre>
<h3 data-id="heading-41">6.4 ä¼˜åŒ–æ•ˆæœéªŒè¯</h3>
<p><strong>é‡æ–°æŠ“å–Systraceå¯¹æ¯”</strong>:</p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">Beforeä¼˜åŒ–:</span>
Frame <span class="hljs-comment">#245: 35ms (Dropped 2 frames)</span>
  â””â”€ onBindViewHolder: 28ms

<span class="hljs-section">Afterä¼˜åŒ–:</span>
Frame <span class="hljs-comment">#245: 8ms (No dropped frames)</span>
  â””â”€ onBindViewHolder: 3ms  â† ä¼˜åŒ–89%!
</code></pre>
<p><strong>FPSå¯¹æ¯”</strong>:</p>
<ul>
<li>Before: 25-30 FPS (ä¸¥é‡å¡é¡¿)</li>
<li>After: 58-60 FPS (ä¸èˆ¬é¡ºæ»‘)</li>
</ul>
<p><strong>ç”¨æˆ·åé¦ˆ</strong>: "æµç•…å¤šäº†,ç»ˆäºèƒ½æ­£å¸¸ä½¿ç”¨äº†!"</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d66e0cb1eb6446a99cd78a22bbf689b5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yas5aWHTGFi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768657337&amp;x-signature=cADUEN%2BBMa5fH1w0X2hxt8j%2FX0w%3D" alt="10-05-recyclerview-optimization-result.png" loading="lazy"/></p>
<h2 data-id="heading-42">7. å¡é¡¿ç›‘æ§ä¸æŒç»­ä¼˜åŒ–</h2>
<p>ä¼˜åŒ–ä¸æ˜¯ä¸€æ¬¡æ€§çš„,éœ€è¦å»ºç«‹æŒç»­ç›‘æ§å’Œä¼˜åŒ–çš„ä½“ç³»ã€‚</p>
<h3 data-id="heading-43">7.1 çº¿ä¸Šç›‘æ§æ–¹æ¡ˆ</h3>
<p><strong>æ–¹æ¡ˆ1: é›†æˆå¼€æºç›‘æ§æ¡†æ¶</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// é›†æˆTencent Matrix</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MyApplication</span> : <span class="hljs-type">Application</span>() {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreate</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">super</span>.onCreate()

        <span class="hljs-comment">// åˆå§‹åŒ–Matrix</span>
        Matrix.Builder(<span class="hljs-keyword">this</span>)
            .patchListener(MatrixPatchListener())
            .plugin(FrameTracer())      <span class="hljs-comment">// å¸§ç‡ç›‘æ§</span>
            .plugin(MethodTracer())      <span class="hljs-comment">// æ–¹æ³•è€—æ—¶ç›‘æ§</span>
            .plugin(MemoryLeakPlugin())  <span class="hljs-comment">// å†…å­˜æ³„æ¼ç›‘æ§</span>
            .build()
            .startAllPlugins()
    }
}
</code></pre>
<p><strong>æ–¹æ¡ˆ2: è‡ªç ”è½»é‡çº§ç›‘æ§</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">JankMonitor</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> jankList = mutableListOf&lt;JankInfo&gt;()

    <span class="hljs-comment">// ä½¿ç”¨FrameMetricsç›‘æ§</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">startMonitor</span><span class="hljs-params">(activity: <span class="hljs-type">Activity</span>)</span></span> {
        activity.window.addOnFrameMetricsAvailableListener { _, metrics, _ -&gt;
            <span class="hljs-keyword">val</span> totalMs = metrics.getMetric(FrameMetrics.TOTAL_DURATION) / <span class="hljs-number">1_000_000.0</span>

            <span class="hljs-keyword">if</span> (totalMs &gt; <span class="hljs-number">16.6</span>) {
                <span class="hljs-comment">// è®°å½•å¡é¡¿ä¿¡æ¯</span>
                <span class="hljs-keyword">val</span> jankInfo = JankInfo(
                    timestamp = System.currentTimeMillis(),
                    duration = totalMs,
                    scene = getCurrentScene(),
                    stackTrace = Thread.currentThread().stackTrace
                )
                jankList.add(jankInfo)

                <span class="hljs-comment">// è¾¾åˆ°ä¸€å®šæ•°é‡åä¸ŠæŠ¥</span>
                <span class="hljs-keyword">if</span> (jankList.size &gt;= <span class="hljs-number">10</span>) {
                    reportJankToServer(jankList)
                    jankList.clear()
                }
            }
        }, Handler(Looper.getMainLooper()))
    }
}

<span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">JankInfo</span>(
    <span class="hljs-keyword">val</span> timestamp: <span class="hljs-built_in">Long</span>,
    <span class="hljs-keyword">val</span> duration: <span class="hljs-built_in">Double</span>,
    <span class="hljs-keyword">val</span> scene: String,
    <span class="hljs-keyword">val</span> stackTrace: Array&lt;StackTraceElement&gt;
)
</code></pre>
<h3 data-id="heading-44">7.2 å…³é”®æŒ‡æ ‡å®šä¹‰</h3>
<p><strong>å¡é¡¿ç‡ (Jank Rate)</strong>:</p>
<pre><code class="hljs language-erlang" lang="erlang">å¡é¡¿ç‡ = (æ‰å¸§æ¬¡æ•° / æ€»å¸§æ•°) Ã— <span class="hljs-number">100</span><span class="hljs-comment">%</span>

ä¼˜ç§€: &lt;<span class="hljs-number">3</span><span class="hljs-comment">%</span>
è‰¯å¥½: <span class="hljs-number">3</span>-<span class="hljs-number">5</span><span class="hljs-comment">%</span>
éœ€ä¼˜åŒ–: <span class="hljs-number">5</span>-<span class="hljs-number">10</span><span class="hljs-comment">%</span>
ä¸¥é‡é—®é¢˜: &gt;<span class="hljs-number">10</span><span class="hljs-comment">%</span>
</code></pre>
<p><strong>FPSåˆ†å¸ƒ</strong>:</p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">ç›®æ ‡: 90%ä»¥ä¸Šçš„å¸§ &gt; 50fps</span>
</code></pre>
<p><strong>ANRç‡</strong>:</p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">ç›®æ ‡: &lt;0.1% (æ¯1000æ¬¡å¯åŠ¨,ANRå°‘äº1æ¬¡)</span>
</code></pre>
<h3 data-id="heading-45">7.3 æŒç»­ä¼˜åŒ–æµç¨‹</h3>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-bullet">1.</span> ç›‘æ§æ•°æ®æ”¶é›†
   â†“
<span class="hljs-bullet">2.</span> é—®é¢˜TOPæ¦œæ’åº (æŒ‰å½±å“ç”¨æˆ·æ•°æ’åº)
   â†“
<span class="hljs-bullet">3.</span> å®šæœŸä¼˜åŒ–è¿­ä»£ (æ¯å‘¨/æ¯ä¸¤å‘¨)
   â†“
<span class="hljs-bullet">4.</span> A/Bæµ‹è¯•éªŒè¯
   â†“
<span class="hljs-bullet">5.</span> å…¨é‡å‘å¸ƒ
   â†“
å›åˆ°æ­¥éª¤1,æŒç»­å¾ªç¯
</code></pre>
<h2 data-id="heading-46">8. æ€»ç»“ä¸æœ€ä½³å®è·µ</h2>
<h3 data-id="heading-47">æ ¸å¿ƒè¦ç‚¹å›é¡¾</h3>
<ol>
<li>
<p><strong>å¡é¡¿çš„æœ¬è´¨</strong>:</p>
<ul>
<li>æ‰å¸§ = è¶…è¿‡16.6msæœªå®Œæˆæ¸²æŸ“</li>
<li>æ ¹æº:ä¸»çº¿ç¨‹è€—æ—¶ã€æ¸²æŸ“çº¿ç¨‹è€—æ—¶ã€ç³»ç»Ÿèµ„æºä¸è¶³</li>
</ul>
</li>
<li>
<p><strong>åˆ†æå·¥å…·é“¾</strong>:</p>
<ul>
<li><strong>Systrace/Perfetto</strong>: å¼€å‘é˜¶æ®µæ·±åº¦åˆ†æ</li>
<li><strong>FrameMetrics</strong>: çº¿ä¸Šå®æ—¶ç›‘æ§</li>
<li><strong>Choreographer</strong>: è½»é‡çº§ç›‘æ§</li>
</ul>
</li>
<li>
<p><strong>ä¸»çº¿ç¨‹ä¼˜åŒ–</strong>:</p>
<ul>
<li>å¼‚æ­¥åŒ–:IOã€ç½‘ç»œã€å›¾ç‰‡è§£ç </li>
<li>å¸ƒå±€ä¼˜åŒ–:ConstraintLayoutã€å‡å°‘å±‚çº§</li>
<li>é¢„åŠ è½½:æå‰å‡†å¤‡æ•°æ®</li>
</ul>
</li>
<li>
<p><strong>æ¸²æŸ“ä¼˜åŒ–</strong>:</p>
<ul>
<li>å‡å°‘è¿‡åº¦ç»˜åˆ¶:ç§»é™¤ä¸å¿…è¦çš„èƒŒæ™¯</li>
<li>ç¡¬ä»¶åŠ é€Ÿ:å¤æ‚Viewå’ŒåŠ¨ç”»åœºæ™¯</li>
<li>GPUä¼˜åŒ–:é¿å…å¤æ‚å›¾å½¢ç»˜åˆ¶</li>
</ul>
</li>
<li>
<p><strong>ç³»ç»Ÿç›‘æ§</strong>:</p>
<ul>
<li>å»ºç«‹çº¿ä¸Šç›‘æ§ä½“ç³»</li>
<li>å…³æ³¨å…³é”®æŒ‡æ ‡ (å¡é¡¿ç‡ã€FPSã€ANR)</li>
<li>æŒç»­ä¼˜åŒ–è¿­ä»£</li>
</ul>
</li>
</ol>
<h3 data-id="heading-48">ä¼˜åŒ–ä¼˜å…ˆçº§</h3>





















































<table><thead><tr><th align="center">ä¼˜å…ˆçº§</th><th align="left">ä¼˜åŒ–é¡¹</th><th align="center">é¢„æœŸæ•ˆæœ</th><th align="center">å®æ–½éš¾åº¦</th></tr></thead><tbody><tr><td align="center"><strong>P0</strong></td><td align="left">ä¸»çº¿ç¨‹IOæ“ä½œ</td><td align="center">â†“90%+</td><td align="center">â­</td></tr><tr><td align="center"><strong>P0</strong></td><td align="left">RecyclerViewå›¾ç‰‡åŒæ­¥è§£ç </td><td align="center">â†“90%+</td><td align="center">â­</td></tr><tr><td align="center"><strong>P1</strong></td><td align="left">å¤æ‚å¸ƒå±€å±‚çº§</td><td align="center">â†“60-80%</td><td align="center">â­â­</td></tr><tr><td align="center"><strong>P1</strong></td><td align="left">è¿‡åº¦ç»˜åˆ¶</td><td align="center">â†“40-60%</td><td align="center">â­â­</td></tr><tr><td align="center"><strong>P2</strong></td><td align="left">ViewHolderç¼“å­˜</td><td align="center">â†“20-40%</td><td align="center">â­</td></tr><tr><td align="center"><strong>P2</strong></td><td align="left">ç¡¬ä»¶åŠ é€Ÿ</td><td align="center">â†“30-50%</td><td align="center">â­â­</td></tr><tr><td align="center"><strong>P3</strong></td><td align="left">GCä¼˜åŒ–</td><td align="center">â†“10-20%</td><td align="center">â­â­â­</td></tr></tbody></table>
<p><strong>ä¼˜åŒ–å»ºè®®</strong>:</p>
<ul>
<li>å…ˆè§£å†³P0çº§åˆ«çš„é—®é¢˜ (ä¸»çº¿ç¨‹IOã€å›¾ç‰‡åŒæ­¥è§£ç )</li>
<li>å†ä¼˜åŒ–P1çº§åˆ« (å¸ƒå±€ã€è¿‡åº¦ç»˜åˆ¶)</li>
<li>æœ€åè€ƒè™‘P2/P3çº§åˆ«</li>
</ul>
<h3 data-id="heading-49">å¸¸è§è¯¯åŒº</h3>
<p>âŒ <strong>è¯¯åŒº1</strong>: "æˆ‘çš„å¸ƒå±€å¾ˆç®€å•,ä¸éœ€è¦ä¼˜åŒ–"</p>
<ul>
<li>å³ä½¿ç®€å•å¸ƒå±€,åµŒå¥—è¿‡æ·±ä¹Ÿä¼šå¯¼è‡´æ€§èƒ½é—®é¢˜</li>
</ul>
<p>âŒ <strong>è¯¯åŒº2</strong>: "Glideä¼šè‡ªåŠ¨ä¼˜åŒ–,ä¸ç”¨ç®¡"</p>
<ul>
<li>Glideéœ€è¦æ­£ç¡®é…ç½® (overrideã€centerCropç­‰)</li>
</ul>
<p>âŒ <strong>è¯¯åŒº3</strong>: "ç¡¬ä»¶åŠ é€Ÿå¼€å¯å°±å¥½äº†"</p>
<ul>
<li>ç¡¬ä»¶åŠ é€Ÿä¸æ˜¯ä¸‡èƒ½çš„,éœ€è¦æ ¹æ®åœºæ™¯ä½¿ç”¨</li>
</ul>
<p>âŒ <strong>è¯¯åŒº4</strong>: "çº¿ä¸Šç›‘æ§ä¼šå½±å“æ€§èƒ½"</p>
<ul>
<li>è½»é‡çº§ç›‘æ§ (FrameMetricsã€Choreographer) æ€§èƒ½å¼€é”€å°äº1%</li>
</ul>
<hr/>
<p><strong>è‡³æ­¤,ä½ å·²ç»æŒæ¡äº†å¡é¡¿é—®é¢˜åˆ†æä¸ä¼˜åŒ–çš„å®Œæ•´æ–¹æ³•è®ºã€‚</strong></p>
<p>è®°ä½:<strong>å·¥å…·+æ–¹æ³•è®º+æŒç»­è¿­ä»£ = ä¸èˆ¬é¡ºæ»‘çš„60fpsä½“éªŒã€‚</strong></p>
<h2 data-id="heading-50">å‚è€ƒèµ„æ–™</h2>
<h3 data-id="heading-51">Androidå®˜æ–¹æ–‡æ¡£</h3>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.com%2Ftopic%2Fperformance%2Fvitals%2Frender" target="_blank" title="https://developer.android.com/topic/performance/vitals/render" ref="nofollow noopener noreferrer">Slow rendering</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.com%2Fstudio%2Fprofile" target="_blank" title="https://developer.android.com/studio/profile" ref="nofollow noopener noreferrer">Profile your app performance</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.com%2Freference%2Fandroid%2Fview%2FFrameMetrics" target="_blank" title="https://developer.android.com/reference/android/view/FrameMetrics" ref="nofollow noopener noreferrer">FrameMetrics API</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fsource.android.com%2Fdocs%2Fcore%2Fgraphics" target="_blank" title="https://source.android.com/docs/core/graphics" ref="nofollow noopener noreferrer">Androidæ¸²æŸ“æœºåˆ¶è¯¦è§£</a></li>
</ul>
<h3 data-id="heading-52">AOSPæºç å‚è€ƒ</h3>
<ul>
<li><code>frameworks/base/core/java/android/view/Choreographer.java</code></li>
<li><code>frameworks/base/core/java/android/view/ViewRootImpl.java</code></li>
<li><code>frameworks/base/libs/hwui/renderthread/RenderThread.cpp</code></li>
</ul>
<h3 data-id="heading-53">å·¥å…·ä¸åº“</h3>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.com%2Ftopic%2Fperformance%2Ftracing%2Fcommand-line" target="_blank" title="https://developer.android.com/topic/performance/tracing/command-line" ref="nofollow noopener noreferrer">Systrace</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fperfetto.dev%2F" target="_blank" title="https://perfetto.dev/" ref="nofollow noopener noreferrer">Perfetto</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FTencent%2Fmatrix" target="_blank" title="https://github.com/Tencent/matrix" ref="nofollow noopener noreferrer">Tencent Matrix</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fbumptech%2Fglide" target="_blank" title="https://github.com/bumptech/glide" ref="nofollow noopener noreferrer">Glide</a></li>
</ul>
<hr/>
<p><strong>ç³»åˆ—æ–‡ç« </strong>:</p>
<ul>
<li><a href="https://juejin.cn/post/7592432859862974498" target="_blank" title="https://juejin.cn/post/7592432859862974498">ä¸Šä¸€ç¯‡ï¼šå¯åŠ¨æ€§èƒ½ä¼˜åŒ–:Bootã€å†·å¯åŠ¨ä¸çƒ­å¯åŠ¨</a></li>
<li><a href="https://juejin.cn/post/7587473691170095104" target="_blank" title="https://juejin.cn/post/7587473691170095104">ç³»åˆ—ç›®å½•: Androidç³»ç»Ÿç¨³å®šæ€§ä¸æ€§èƒ½ä¼˜åŒ–</a></li>
</ul>
<blockquote>
<p><strong>ä½œè€…ç®€ä»‹</strong>: å¤šå¹´Androidç³»ç»Ÿå¼€å‘ç»éªŒ,ä¸“æ³¨äºç³»ç»Ÿç¨³å®šæ€§ä¸æ€§èƒ½ä¼˜åŒ–é¢†åŸŸã€‚æ¬¢è¿å…³æ³¨æœ¬ç³»åˆ—,ä¸€èµ·æ·±å…¥Androidç³»ç»Ÿçš„ç²¾å½©ä¸–ç•Œ!</p>
</blockquote>
<hr/>
<h3 data-id="heading-54">ğŸ‰ æ„Ÿè°¢å…³æ³¨,è®©æˆ‘ä»¬ä¸€èµ·æ·±å…¥Androidç³»ç»Ÿçš„ç²¾å½©ä¸–ç•Œ!</h3>
<h3 data-id="heading-55"><strong>æ‰¾åˆ°æˆ‘</strong>: <a href="https://link.juejin.cn?target=https%3A%2F%2Fhome.wonlab.top" target="_blank" title="https://home.wonlab.top" ref="nofollow noopener noreferrer">ä¸ªäººä¸»é¡µ</a></h3></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€Kotlinç³»åˆ—01ã€‘Kotlinå¿«é€Ÿå…¥é—¨ï¼šç¯å¢ƒæ­å»ºä¸Hello World]]></title>    <link>https://juejin.cn/post/7593541291011883035</link>    <guid>https://juejin.cn/post/7593541291011883035</guid>    <pubDate>2026-01-10T14:20:20.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7593541291011883035" data-draft-id="7593337928307785754" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€Kotlinç³»åˆ—01ã€‘Kotlinå¿«é€Ÿå…¥é—¨ï¼šç¯å¢ƒæ­å»ºä¸Hello World"/> <meta itemprop="keywords" content="Android,Kotlin,Android Studio"/> <meta itemprop="datePublished" content="2026-01-10T14:20:20.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å†¬å¥‡Lab"/> <meta itemprop="url" content="https://juejin.cn/user/1857501105781193"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€Kotlinç³»åˆ—01ã€‘Kotlinå¿«é€Ÿå…¥é—¨ï¼šç¯å¢ƒæ­å»ºä¸Hello World
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1857501105781193/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å†¬å¥‡Lab
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-10T14:20:20.000Z" title="Sat Jan 10 2026 14:20:20 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€</h2>
<p>å¦‚æœä½ æ˜¯ä¸€ä½Androidå¼€å‘è€…ï¼Œå¯èƒ½å·²ç»å¬è¯´è¿‡Googleåœ¨2017å¹´å®£å¸ƒKotlinæˆä¸ºAndroidå®˜æ–¹å¼€å‘è¯­è¨€çš„æ¶ˆæ¯ã€‚å¦‚æœä½ æ˜¯åç«¯å¼€å‘è€…,å¯èƒ½æ³¨æ„åˆ°è¶Šæ¥è¶Šå¤šçš„å›¢é˜Ÿå¼€å§‹ç”¨Kotliné‡æ„Javaé¡¹ç›®ã€‚å¦‚æœä½ å¯¹å¤šå¹³å°å¼€å‘æ„Ÿå…´è¶£,Kotlin Multiplatformå¯èƒ½å·²ç»è¿›å…¥ä½ çš„è§†é‡ã€‚</p>
<p><strong>Kotlinæ­£åœ¨æˆä¸ºJVMç”Ÿæ€ç³»ç»Ÿä¸­æœ€å—æ¬¢è¿çš„ç°ä»£è¯­è¨€ä¹‹ä¸€</strong>ã€‚æ ¹æ®JetBrains 2024å¹´çš„å¼€å‘è€…è°ƒæŸ¥,Kotlinåœ¨JVMè¯­è¨€ä¸­çš„é‡‡ç”¨ç‡å·²ç»è¶…è¿‡30%,å¹¶ä¸”è¿˜åœ¨å¿«é€Ÿå¢é•¿ã€‚</p>
<p>é‚£ä¹ˆ,<strong>ä¸ºä»€ä¹ˆè¦å­¦ä¹ Kotlin?</strong> è®©æˆ‘å…ˆåˆ†äº«ä¸€ä¸ªçœŸå®çš„æ•…äº‹:</p>
<blockquote>
<p>æˆ‘çš„ä¸€ä½æœ‹å‹åœ¨æŸäº’è”ç½‘å…¬å¸è´Ÿè´£Androidå›¢é˜Ÿã€‚2019å¹´å›¢é˜Ÿå†³å®šå°†æ ¸å¿ƒæ¨¡å—ä»Javaè¿ç§»åˆ°Kotlinã€‚ä»…ä»…ä¸‰ä¸ªæœˆå,ä»–ä»¬å‘ç°:</p>
<ul>
<li><strong>ä»£ç é‡å‡å°‘äº†çº¦40%</strong> - åŒæ ·çš„åŠŸèƒ½,Kotlinä»£ç æ›´ç®€æ´</li>
<li><strong>NullPointerExceptionå‡å°‘äº†80%</strong> - Kotlinçš„ç©ºå®‰å…¨æœºåˆ¶ä»æ ¹æºä¸Šæœç»äº†ç©ºæŒ‡é’ˆ</li>
<li><strong>å¼€å‘æ•ˆç‡æå‡æ˜æ˜¾</strong> - åç¨‹ã€æ‰©å±•å‡½æ•°ç­‰ç‰¹æ€§è®©å¼‚æ­¥ç¼–ç¨‹å˜å¾—ç®€å•</li>
<li><strong>å›¢é˜Ÿæ»¡æ„åº¦æé«˜</strong> - å¼€å‘è€…ä»¬æ™®éè¡¨ç¤º"å†ä¹Ÿä¸æƒ³å›åˆ°Javaäº†"</li>
</ul>
</blockquote>
<p>è¿™ä¸æ˜¯ä¸ªä¾‹ã€‚ä»Netflixåˆ°Uber,ä»Slackåˆ°Pinterest,è¶Šæ¥è¶Šå¤šçš„å¤§å…¬å¸é€‰æ‹©Kotlinä½œä¸ºä¸»åŠ›å¼€å‘è¯­è¨€ã€‚</p>
<p><strong>æœ¬ç³»åˆ—æ–‡ç« çš„ç›®æ ‡</strong>:å¸¦ä½ ä»é›¶å¼€å§‹ç³»ç»Ÿå­¦ä¹ Kotlin,ä¸ä»…æŒæ¡è¯­æ³•,æ›´è¦ç†è§£è®¾è®¡å“²å­¦å’Œæœ€ä½³å®è·µã€‚æ— è®ºä½ æ˜¯å®Œå…¨çš„æ–°æ‰‹,è¿˜æ˜¯æœ‰JavaèƒŒæ™¯çš„å¼€å‘è€…,éƒ½èƒ½åœ¨è¿™é‡Œæ‰¾åˆ°é€‚åˆè‡ªå·±çš„å­¦ä¹ è·¯å¾„ã€‚</p>
<p>ä»Šå¤©è¿™ç¯‡æ–‡ç« ,æˆ‘ä»¬å°†:</p>
<ul>
<li>äº†è§£Kotlinçš„å†å²å’Œæ ¸å¿ƒç‰¹æ€§</li>
<li>å¯¹æ¯”Kotlinå’ŒJava,ç†è§£ä¸ºä»€ä¹ˆè¦é€‰æ‹©Kotlin</li>
<li>æ­å»ºKotlinå¼€å‘ç¯å¢ƒ</li>
<li>ç¼–å†™ç¬¬ä¸€ä¸ªKotlinç¨‹åº</li>
<li>å­¦ä¹ ä½¿ç”¨REPLå¿«é€ŸéªŒè¯ä»£ç </li>
<li>æŒæ¡KotlinåŸºæœ¬è¯­æ³•æ¦‚å¿µ</li>
</ul>
<p>è®©æˆ‘ä»¬å¼€å§‹è¿™æ®µæ¿€åŠ¨äººå¿ƒçš„æ—…ç¨‹å§!</p>
<h2 data-id="heading-1">è®¤è¯†Kotlin</h2>
<h3 data-id="heading-2">Kotlinçš„è¯ç”Ÿä¸å‘å±•</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/92c99858493a4187b8e2c2335683514b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yas5aWHTGFi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768659619&amp;x-signature=uMe5tVYzuFfWd2AC1w0IM2%2BFH2E%3D" alt="01-01-kotlin-timeline.png" loading="lazy"/></p>
<p><em>å›¾ç‰‡è¯´æ˜:Kotlinä»2011å¹´å‘å¸ƒåˆ°ä»Šå¤©çš„å‘å±•å†ç¨‹</em></p>
<p><strong>Kotlin</strong>çš„åå­—æ¥æºäºä¿„ç½—æ–¯åœ£å½¼å¾—å ¡é™„è¿‘çš„Kotlinå²›(ĞšĞ¾Ñ‚Ğ»Ğ¸Ğ½),è¿™ä¸ªåå­—ç”±JetBrainså…¬å¸(IntelliJ IDEAçš„å¼€å‘å•†)é€‰å®šã€‚è®©æˆ‘ä»¬çœ‹çœ‹Kotlinçš„é‡è¦é‡Œç¨‹ç¢‘:</p>
<ul>
<li><strong>2011å¹´7æœˆ</strong> - JetBrainså…¬å¼€å®£å¸ƒKotliné¡¹ç›®</li>
<li><strong>2012å¹´2æœˆ</strong> - å¼€æº,é‡‡ç”¨Apache 2è®¸å¯è¯</li>
<li><strong>2016å¹´2æœˆ</strong> - Kotlin 1.0æ­£å¼å‘å¸ƒ,æ ‡å¿—ç€ç”Ÿäº§å¯ç”¨</li>
<li><strong>2017å¹´5æœˆ</strong> - Googleå®£å¸ƒKotlinæˆä¸ºAndroidå®˜æ–¹å¼€å‘è¯­è¨€</li>
<li><strong>2019å¹´5æœˆ</strong> - Googleå®£å¸ƒKotlinæˆä¸ºAndroidå¼€å‘é¦–é€‰è¯­è¨€(Kotlin-First)</li>
<li><strong>2021å¹´5æœˆ</strong> - Kotlin 1.5å‘å¸ƒ,JVMç›®æ ‡å­—èŠ‚ç å‡çº§åˆ°Java 8</li>
<li><strong>2024å¹´11æœˆ</strong> - Kotlin 2.0å‘å¸ƒ,å¸¦æ¥K2ç¼–è¯‘å™¨å’Œé‡å¤§æ€§èƒ½æå‡</li>
</ul>
<p>ä»è¿™ä¸ªå‘å±•å†ç¨‹å¯ä»¥çœ‹å‡º,<strong>Kotlinå·²ç»ä»ä¸€ä¸ª"å°ä¼—è¯­è¨€"æˆé•¿ä¸ºä¸»æµçš„ç°ä»£ç¼–ç¨‹è¯­è¨€</strong>ã€‚</p>
<h3 data-id="heading-3">ä¸ºä»€ä¹ˆé€‰æ‹©Kotlin?</h3>
<p>ä¸å…¶å¬æˆ‘é•¿ç¯‡å¤§è®º,ä¸å¦‚ç›´æ¥çœ‹ä»£ç å¯¹æ¯”ã€‚å‡è®¾æˆ‘ä»¬è¦å®ç°ä¸€ä¸ªç®€å•çš„åŠŸèƒ½:åˆ›å»ºä¸€ä¸ªPersonç±»,åŒ…å«å§“åå’Œå¹´é¾„,å¹¶èƒ½æ‰“å°ä¸ªäººä¿¡æ¯ã€‚</p>
<p><strong>Javaå®ç°:</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> String name;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> age;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Person</span><span class="hljs-params">(String name, <span class="hljs-type">int</span> age)</span> {
        <span class="hljs-built_in">this</span>.name = name;
        <span class="hljs-built_in">this</span>.age = age;
    }

    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> name;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getAge</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> age;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">printInfo</span><span class="hljs-params">()</span> {
        System.out.println(<span class="hljs-string">"Name: "</span> + name + <span class="hljs-string">", Age: "</span> + age);
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">equals</span><span class="hljs-params">(Object o)</span> {
        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span> == o) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        <span class="hljs-keyword">if</span> (o == <span class="hljs-literal">null</span> || getClass() != o.getClass()) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        <span class="hljs-type">Person</span> <span class="hljs-variable">person</span> <span class="hljs-operator">=</span> (Person) o;
        <span class="hljs-keyword">return</span> age == person.age &amp;&amp; Objects.equals(name, person.name);
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">hashCode</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> Objects.hash(name, age);
    }
}
</code></pre>
<p><strong>Kotlinå®ç°:</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span>(<span class="hljs-keyword">val</span> name: String, <span class="hljs-keyword">val</span> age: <span class="hljs-built_in">Int</span>) {
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">printInfo</span><span class="hljs-params">()</span></span> {
        println(<span class="hljs-string">"Name: <span class="hljs-variable">$name</span>, Age: <span class="hljs-variable">$age</span>"</span>)
    }
}
</code></pre>
<p>çœ‹åˆ°åŒºåˆ«äº†å—?<strong>åŒæ ·çš„åŠŸèƒ½,Javaéœ€è¦30å¤šè¡Œä»£ç ,Kotlinåªéœ€è¦5è¡Œ!</strong> è€Œä¸”Kotlinçš„<code>data class</code>è‡ªåŠ¨ç”Ÿæˆäº†:</p>
<ul>
<li>æ„é€ å‡½æ•°</li>
<li>getteræ–¹æ³•</li>
<li><code>equals()</code>å’Œ<code>hashCode()</code>æ–¹æ³•</li>
<li><code>toString()</code>æ–¹æ³•</li>
<li><code>copy()</code>æ–¹æ³•(ç”¨äºå¤åˆ¶å¯¹è±¡)</li>
</ul>
<p>è¿™å°±æ˜¯Kotlinçš„é­…åŠ›:<strong>Less is More(å°‘å³æ˜¯å¤š)</strong>ã€‚</p>
<h3 data-id="heading-4">Kotlinçš„æ ¸å¿ƒç‰¹æ€§</h3>
<p>è®©æˆ‘ç”¨ä¸€å¼ å›¾æ¥å±•ç¤ºKotlinçš„æ ¸å¿ƒç‰¹æ€§:</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f390885d22bc4227b133ee1d343edfa4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yas5aWHTGFi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768659619&amp;x-signature=YaK%2BUdLjaJuD9rH0%2BR6%2BzH9MElA%3D" alt="01-02-kotlin-features.png" loading="lazy"/></p>
<p><em>å›¾ç‰‡è¯´æ˜:Kotlinçš„å…«å¤§æ ¸å¿ƒç‰¹æ€§</em></p>
<h4 data-id="heading-5">1. ç®€æ´æ€§(Conciseness)</h4>
<p>å¤§å¹…å‡å°‘æ ·æ¿ä»£ç (Boilerplate Code),è®©å¼€å‘è€…ä¸“æ³¨äºä¸šåŠ¡é€»è¾‘è€Œéé‡å¤æ€§ä»£ç ã€‚</p>
<h4 data-id="heading-6">2. ç©ºå®‰å…¨(Null Safety)</h4>
<p>ä»è¯­è¨€å±‚é¢åŒºåˆ†å¯ç©ºç±»å‹å’Œéç©ºç±»å‹,ç¼–è¯‘æœŸå°±èƒ½æ•è·ç»å¤§å¤šæ•°ç©ºæŒ‡é’ˆé”™è¯¯ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">var</span> name: String = <span class="hljs-string">"Kotlin"</span>  <span class="hljs-comment">// ä¸å¯ä¸ºç©º</span>
name = <span class="hljs-literal">null</span>  <span class="hljs-comment">// ç¼–è¯‘é”™è¯¯!</span>

<span class="hljs-keyword">var</span> nullableName: String? = <span class="hljs-string">"Kotlin"</span>  <span class="hljs-comment">// å¯ç©ºç±»å‹</span>
nullableName = <span class="hljs-literal">null</span>  <span class="hljs-comment">// æ­£ç¡®</span>
</code></pre>
<h4 data-id="heading-7">3. äº’æ“ä½œæ€§(Interoperability)</h4>
<p>ä¸Java 100%äº’æ“ä½œ,å¯ä»¥ç›´æ¥è°ƒç”¨Javaåº“,æ··åˆç¼–è¯‘,å¹³æ»‘è¿ç§»ã€‚</p>
<h4 data-id="heading-8">4. å·¥å…·å‹å¥½(Tool-Friendly)</h4>
<p>ç”±IntelliJ IDEAèƒŒåçš„å…¬å¸å¼€å‘,å·¥å…·æ”¯æŒä¸€æµ,æ™ºèƒ½æç¤ºã€é‡æ„ç­‰åŠŸèƒ½ä½“éªŒæä½³ã€‚</p>
<h4 data-id="heading-9">5. ç°ä»£åŒ–è¯­è¨€ç‰¹æ€§</h4>
<ul>
<li>å‡½æ•°å¼ç¼–ç¨‹æ”¯æŒ(é«˜é˜¶å‡½æ•°ã€Lambdaè¡¨è¾¾å¼)</li>
<li>åç¨‹(Coroutines)ç”¨äºä¼˜é›…å¤„ç†å¼‚æ­¥æ“ä½œ</li>
<li>æ‰©å±•å‡½æ•°(Extension Functions)æ— éœ€ç»§æ‰¿å³å¯æ‰©å±•ç±»åŠŸèƒ½</li>
<li>DSLæ„å»ºèƒ½åŠ›</li>
</ul>
<h4 data-id="heading-10">6. å¤šå¹³å°æ”¯æŒ</h4>
<ul>
<li>JVMå¹³å° - Androidå’ŒæœåŠ¡ç«¯å¼€å‘</li>
<li>JavaScriptå¹³å° - å‰ç«¯å¼€å‘</li>
<li>Nativeå¹³å° - iOSã€Desktopã€åµŒå…¥å¼ç³»ç»Ÿ</li>
<li>Kotlin Multiplatform - è·¨å¹³å°ä»£ç å…±äº«</li>
</ul>
<h4 data-id="heading-11">7. è¡¨è¾¾åŠ›å¼º</h4>
<ul>
<li>æ“ä½œç¬¦é‡è½½</li>
<li>ä¸­ç¼€å‡½æ•°</li>
<li>å­—ç¬¦ä¸²æ¨¡æ¿</li>
<li>whenè¡¨è¾¾å¼</li>
</ul>
<h4 data-id="heading-12">8. å®‰å…¨æ€§</h4>
<ul>
<li>ç±»å‹å®‰å…¨</li>
<li>ç¼–è¯‘æ—¶æ£€æŸ¥</li>
<li>ä¸å¯å˜æ€§ä¼˜å…ˆ</li>
</ul>
<h3 data-id="heading-13">Kotlin vs Java - æ·±åº¦å¯¹æ¯”</h3>
<p>ä½œä¸ºä¸€ä½åœ¨Javaå’ŒKotlinéƒ½æœ‰å¤šå¹´ç»éªŒçš„å¼€å‘è€…,æˆ‘æ•´ç†äº†ä¸€ä¸ªè¯¦ç»†å¯¹æ¯”è¡¨:</p>







































































<table><thead><tr><th align="left">ç‰¹æ€§</th><th align="left">Java</th><th align="left">Kotlin</th><th align="left">è¯´æ˜</th></tr></thead><tbody><tr><td align="left"><strong>ç©ºå®‰å…¨</strong></td><td align="left">è¿è¡Œæ—¶æ£€æŸ¥,æ˜“NPE</td><td align="left">ç¼–è¯‘æ—¶æ£€æŸ¥</td><td align="left">Kotlinå‡å°‘80%ç©ºæŒ‡é’ˆé”™è¯¯</td></tr><tr><td align="left"><strong>ä»£ç ç®€æ´åº¦</strong></td><td align="left">å†—é•¿</td><td align="left">ç®€æ´</td><td align="left">å¹³å‡å‡å°‘40%ä»£ç é‡</td></tr><tr><td align="left"><strong>å‡½æ•°å¼ç¼–ç¨‹</strong></td><td align="left">Java 8+æ”¯æŒLambda</td><td align="left">åŸç”Ÿæ”¯æŒ,æ›´å¼ºå¤§</td><td align="left">Kotlinçš„é«˜é˜¶å‡½æ•°æ›´çµæ´»</td></tr><tr><td align="left"><strong>åç¨‹</strong></td><td align="left">éœ€è¦ç¬¬ä¸‰æ–¹åº“</td><td align="left">åŸç”Ÿæ”¯æŒ</td><td align="left">Kotlinåç¨‹è½»é‡çº§é«˜æ•ˆ</td></tr><tr><td align="left"><strong>æ‰©å±•å‡½æ•°</strong></td><td align="left">ä¸æ”¯æŒ</td><td align="left">æ”¯æŒ</td><td align="left">æ— éœ€ç»§æ‰¿å³å¯æ‰©å±•ç±»</td></tr><tr><td align="left"><strong>æ™ºèƒ½ç±»å‹è½¬æ¢</strong></td><td align="left">éœ€æ‰‹åŠ¨è½¬æ¢</td><td align="left">è‡ªåŠ¨è½¬æ¢</td><td align="left">isæ£€æŸ¥åè‡ªåŠ¨è½¬å‹</td></tr><tr><td align="left"><strong>æ•°æ®ç±»</strong></td><td align="left">éœ€å¤§é‡æ ·æ¿ä»£ç </td><td align="left">ä¸€è¡Œæå®š</td><td align="left">data classè‡ªåŠ¨ç”Ÿæˆ</td></tr><tr><td align="left"><strong>é»˜è®¤å‚æ•°</strong></td><td align="left">ä¸æ”¯æŒ</td><td align="left">æ”¯æŒ</td><td align="left">å‡å°‘æ–¹æ³•é‡è½½</td></tr><tr><td align="left"><strong>å­—ç¬¦ä¸²æ¨¡æ¿</strong></td><td align="left">å­—ç¬¦ä¸²æ‹¼æ¥ç¹ç</td><td align="left">åŸç”Ÿæ”¯æŒ</td><td align="left"><code>"Hello $name"</code></td></tr><tr><td align="left"><strong>whenè¡¨è¾¾å¼</strong></td><td align="left">switchè¯­å¥å—é™</td><td align="left">åŠŸèƒ½å¼ºå¤§</td><td align="left">æ”¯æŒä»»æ„è¡¨è¾¾å¼</td></tr></tbody></table>
<h3 data-id="heading-14">Kotlinçš„åº”ç”¨åœºæ™¯</h3>
<p>ç°åœ¨è®©æˆ‘ä»¬çœ‹çœ‹Kotlinåœ¨å®é™…é¡¹ç›®ä¸­çš„åº”ç”¨åœºæ™¯:</p>
<h4 data-id="heading-15">Androidå¼€å‘(æœ€å¹¿æ³›)</h4>
<ul>
<li><strong>å®˜æ–¹é¦–é€‰è¯­è¨€</strong> - Googleæ¨èKotlinä½œä¸ºAndroidå¼€å‘é¦–é€‰</li>
<li><strong>Jetpack Compose</strong> - æ–°ä¸€ä»£UIæ¡†æ¶å®Œå…¨åŸºäºKotlin</li>
<li><strong>åç¨‹ + LiveData/Flow</strong> - ä¼˜é›…å¤„ç†å¼‚æ­¥å’Œå“åº”å¼ç¼–ç¨‹</li>
</ul>
<h4 data-id="heading-16">æœåŠ¡ç«¯å¼€å‘</h4>
<ul>
<li><strong>Spring Boot</strong> - å®Œç¾æ”¯æŒKotlin</li>
<li><strong>Ktor</strong> - JetBrainså¼€å‘çš„KotlinåŸç”ŸWebæ¡†æ¶</li>
<li><strong>Vert.x</strong> - å“åº”å¼æ¡†æ¶Kotlinæ”¯æŒ</li>
</ul>
<h4 data-id="heading-17">å¤šå¹³å°å¼€å‘(Kotlin Multiplatform)</h4>
<ul>
<li>åœ¨Androidã€iOSã€Webä¹‹é—´å…±äº«ä¸šåŠ¡é€»è¾‘ä»£ç </li>
<li>é™ä½ç»´æŠ¤æˆæœ¬,æé«˜ä»£ç å¤ç”¨ç‡</li>
</ul>
<h4 data-id="heading-18">è„šæœ¬å’Œå·¥å…·å¼€å‘</h4>
<ul>
<li>Gradleæ„å»ºè„šæœ¬(Kotlin DSL)</li>
<li>æ•°æ®ç§‘å­¦å’Œè„šæœ¬ä»»åŠ¡</li>
</ul>
<h2 data-id="heading-19">æ­å»ºKotlinå¼€å‘ç¯å¢ƒ</h2>
<p>å¥½äº†,ç†è®ºä»‹ç»å¤Ÿäº†,è®©æˆ‘ä»¬åŠ¨æ‰‹æ­å»ºå¼€å‘ç¯å¢ƒ!æˆ‘ä¼šæä¾›è¯¦ç»†çš„æ­¥éª¤,ç¡®ä¿ä½ èƒ½é¡ºåˆ©å®Œæˆã€‚</p>
<h3 data-id="heading-20">ç¯å¢ƒéœ€æ±‚</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/76da428f4f81439c8d13a72f65c42cba~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yas5aWHTGFi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768659619&amp;x-signature=j8GP85CIX5uaouhvCkxSf45qzEM%3D" alt="01-03-dev-environment.png" loading="lazy"/></p>
<p><em>å›¾ç‰‡è¯´æ˜:Kotlinå¼€å‘ç¯å¢ƒçš„ç»„æˆéƒ¨åˆ†</em></p>
<p>åœ¨å¼€å§‹ä¹‹å‰,æˆ‘ä»¬éœ€è¦å‡†å¤‡:</p>
<ol>
<li><strong>JDK(Java Development Kit)</strong> - Kotlinè¿è¡Œåœ¨JVMä¸Š,éœ€è¦JDK</li>
<li><strong>IntelliJ IDEA</strong> - æœ€ä½³çš„Kotlinå¼€å‘å·¥å…·</li>
<li><strong>Kotlinæ’ä»¶</strong> - IntelliJ IDEA Communityç‰ˆå†…ç½®Kotlinæ”¯æŒ</li>
</ol>
<h3 data-id="heading-21">æ­¥éª¤1:å®‰è£…JDK</h3>
<p>Kotlinå¯ä»¥è¿è¡Œåœ¨Java 8åŠä»¥ä¸Šç‰ˆæœ¬,æ¨èä½¿ç”¨Java 11æˆ–Java 17(LTSç‰ˆæœ¬)ã€‚</p>
<h4 data-id="heading-22">Windowsç³»ç»Ÿ</h4>
<ol>
<li>
<p><strong>ä¸‹è½½JDK</strong></p>
<ul>
<li>è®¿é—® <a href="https://link.juejin.cn?target=https%3A%2F%2Fadoptium.net%2F" target="_blank" title="https://adoptium.net/" ref="nofollow noopener noreferrer">Adoptium</a> æˆ– <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.oracle.com%2Fjava%2Ftechnologies%2Fdownloads%2F" target="_blank" title="https://www.oracle.com/java/technologies/downloads/" ref="nofollow noopener noreferrer">Oracle JDK</a></li>
<li>é€‰æ‹©Java 17(æ¨è)</li>
<li>ä¸‹è½½Windows x64 MSIå®‰è£…åŒ…</li>
</ul>
</li>
<li>
<p><strong>å®‰è£…JDK</strong></p>
<ul>
<li>åŒå‡»MSIæ–‡ä»¶,æŒ‰æç¤ºå®‰è£…</li>
<li>å»ºè®®å®‰è£…è·¯å¾„:<code>C:\Program Files\Java\jdk-17</code></li>
</ul>
</li>
<li>
<p><strong>é…ç½®ç¯å¢ƒå˜é‡</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ‰“å¼€"ç³»ç»Ÿç¯å¢ƒå˜é‡"è®¾ç½®</span>
<span class="hljs-comment"># æ–°å»ºç³»ç»Ÿå˜é‡ JAVA_HOME</span>
JAVA_HOME=C:\Program Files\Java\jdk-17

<span class="hljs-comment"># ç¼–è¾‘Pathå˜é‡,æ·»åŠ </span>
%JAVA_HOME%\bin
</code></pre>
</li>
<li>
<p><strong>éªŒè¯å®‰è£…</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ‰“å¼€å‘½ä»¤æç¤ºç¬¦,æ‰§è¡Œ</span>
java -version
<span class="hljs-comment"># åº”è¯¥æ˜¾ç¤º: openjdk version "17.0.x"</span>
</code></pre>
</li>
</ol>
<h4 data-id="heading-23">macOSç³»ç»Ÿ</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ä½¿ç”¨Homebrewå®‰è£…(æ¨è)</span>
brew install openjdk@17

<span class="hljs-comment"># åˆ›å»ºç¬¦å·é“¾æ¥</span>
sudo <span class="hljs-built_in">ln</span> -sfn /opt/homebrew/opt/openjdk@17/libexec/openjdk.jdk \
    /Library/Java/JavaVirtualMachines/openjdk-17.jdk

<span class="hljs-comment"># æ·»åŠ åˆ°PATH(æ·»åŠ åˆ° ~/.zshrc æˆ– ~/.bash_profile)</span>
<span class="hljs-built_in">export</span> PATH=<span class="hljs-string">"/opt/homebrew/opt/openjdk@17/bin:<span class="hljs-variable">$PATH</span>"</span>

<span class="hljs-comment"># éªŒè¯å®‰è£…</span>
java -version
</code></pre>
<h4 data-id="heading-24">Linuxç³»ç»Ÿ(Ubuntu/Debian)</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ›´æ–°åŒ…åˆ—è¡¨</span>
sudo apt update

<span class="hljs-comment"># å®‰è£…OpenJDK 17</span>
sudo apt install openjdk-17-jdk

<span class="hljs-comment"># éªŒè¯å®‰è£…</span>
java -version
</code></pre>

**æ¨è**: å¦‚æœä½ éœ€è¦ç®¡ç†å¤šä¸ªJDKç‰ˆæœ¬,å¯ä»¥ä½¿ç”¨:
- Windows: [Jabba](https://github.com/shyiko/jabba) æˆ– [SDKMAN!](https://sdkman.io/)
- macOS/Linux: [SDKMAN!](https://sdkman.io/) æˆ– [jEnv](https://www.jenv.be/)

<h3 data-id="heading-25">æ­¥éª¤2:å®‰è£…IntelliJ IDEA</h3>
<p><strong>IntelliJ IDEA</strong>æ˜¯ç”±JetBrainså¼€å‘çš„IDE,å¯¹Kotlinæ”¯æŒæœ€å¥½ã€‚æœ‰ä¸¤ä¸ªç‰ˆæœ¬:</p>
<ul>
<li><strong>Community Edition</strong>(å…è´¹) - å¯¹äºå­¦ä¹ Kotlinå·²ç»è¶³å¤Ÿ</li>
<li><strong>Ultimate Edition</strong>(æ”¶è´¹) - æä¾›æ›´å¤šä¼ä¸šçº§åŠŸèƒ½</li>
</ul>
<p>æˆ‘ä»¬ä½¿ç”¨å…è´¹çš„Communityç‰ˆæœ¬å³å¯ã€‚</p>
<h4 data-id="heading-26">ä¸‹è½½ä¸å®‰è£…</h4>
<ol>
<li>
<p><strong>è®¿é—®å®˜ç½‘</strong></p>
<ul>
<li>æ‰“å¼€ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.jetbrains.com%2Fidea%2Fdownload%2F" target="_blank" title="https://www.jetbrains.com/idea/download/" ref="nofollow noopener noreferrer">JetBrainså®˜ç½‘</a></li>
<li>é€‰æ‹©ä½ çš„æ“ä½œç³»ç»Ÿ</li>
<li>ä¸‹è½½<strong>Community Edition</strong></li>
</ul>
</li>
<li>
<p><strong>å®‰è£…IDEA</strong></p>
<ul>
<li>Windows: è¿è¡Œ.exeå®‰è£…åŒ…,æŒ‰æç¤ºå®‰è£…</li>
<li>macOS: æ‰“å¼€.dmgæ–‡ä»¶,æ‹–æ‹½IDEAåˆ°Applications</li>
<li>Linux: è§£å‹.tar.gz,è¿è¡Œbin/idea.sh</li>
</ul>
</li>
<li>
<p><strong>é¦–æ¬¡å¯åŠ¨é…ç½®</strong></p>
<ul>
<li>é€‰æ‹©UIä¸»é¢˜(Darculaæ·±è‰²ä¸»é¢˜æˆ–Lightæµ…è‰²ä¸»é¢˜)</li>
<li>é€‰æ‹©é”®ç›˜æ˜ å°„(é»˜è®¤æˆ–ç±»ä¼¼IDE)</li>
<li><strong>é‡è¦</strong>: ç¡®è®¤Kotlinæ’ä»¶å·²å®‰è£…(Communityç‰ˆè‡ªå¸¦)</li>
</ul>
</li>
</ol>

**å­¦ç”Ÿç¦åˆ©**: å¦‚æœä½ æ˜¯å­¦ç”Ÿ,å¯ä»¥ç”³è¯·å…è´¹çš„Ultimateç‰ˆæœ¬æ•™è‚²è®¸å¯ã€‚è®¿é—® [JetBrainså­¦ç”Ÿè®¡åˆ’](https://www.jetbrains.com/student/) äº†è§£è¯¦æƒ…ã€‚

<h3 data-id="heading-27">æ­¥éª¤3:åˆ›å»ºç¬¬ä¸€ä¸ªKotliné¡¹ç›®</h3>
<p>ç°åœ¨è®©æˆ‘ä»¬åœ¨IntelliJ IDEAä¸­åˆ›å»ºç¬¬ä¸€ä¸ªKotliné¡¹ç›®!</p>
<ol>
<li>
<p><strong>å¯åŠ¨IDEA</strong>,ç‚¹å‡»<strong>New Project</strong></p>
</li>
<li>
<p><strong>é…ç½®é¡¹ç›®</strong></p>
<ul>
<li><strong>Name</strong>: HelloKotlin</li>
<li><strong>Location</strong>: é€‰æ‹©ä½ çš„é¡¹ç›®ç›®å½•</li>
<li><strong>Language</strong>: Kotlin</li>
<li><strong>Build System</strong>: IntelliJ(å¯¹äºå­¦ä¹ æœ€ç®€å•)</li>
<li><strong>JDK</strong>: é€‰æ‹©åˆšæ‰å®‰è£…çš„JDK 17</li>
<li><strong>Add sample code</strong>: å‹¾é€‰(ä¼šè‡ªåŠ¨åˆ›å»ºMain.kt)</li>
</ul>
</li>
<li>
<p><strong>ç‚¹å‡»Create</strong>,ç­‰å¾…é¡¹ç›®åˆ›å»ºå®Œæˆ</p>
</li>
</ol>
<h3 data-id="heading-28">é¡¹ç›®ç»“æ„è§£æ</h3>
<p>åˆ›å»ºå®Œæˆå,ä½ ä¼šçœ‹åˆ°è¿™æ ·çš„é¡¹ç›®ç»“æ„:</p>
<pre><code class="hljs language-csharp" lang="csharp">HelloKotlin/
â”œâ”€â”€ .idea/                 <span class="hljs-meta"># IDEAé…ç½®æ–‡ä»¶ç›®å½•</span>
â”œâ”€â”€ src/                   <span class="hljs-meta"># æºä»£ç ç›®å½•</span>
â”‚   â””â”€â”€ main/
â”‚       â””â”€â”€ kotlin/
â”‚           â””â”€â”€ Main.kt    <span class="hljs-meta"># ä¸»ç¨‹åºæ–‡ä»¶</span>
â”œâ”€â”€ <span class="hljs-keyword">out</span>/                   <span class="hljs-meta"># ç¼–è¯‘è¾“å‡ºç›®å½•</span>
â””â”€â”€ HelloKotlin.iml       <span class="hljs-meta"># æ¨¡å—é…ç½®æ–‡ä»¶</span>
</code></pre>
<p><strong>ç›®å½•è¯´æ˜:</strong></p>
<ul>
<li><code>src/main/kotlin/</code> - å­˜æ”¾Kotlinæºä»£ç </li>
<li><code>out/</code> - ç¼–è¯‘åçš„å­—èŠ‚ç æ–‡ä»¶(<code>.class</code>)</li>
<li><code>.idea/</code> - IntelliJ IDEAçš„é¡¹ç›®é…ç½®</li>
</ul>
<h2 data-id="heading-29">ç¬¬ä¸€ä¸ªKotlinç¨‹åº:Hello World</h2>
<p>è®©æˆ‘ä»¬çœ‹çœ‹IDEAè‡ªåŠ¨åˆ›å»ºçš„<code>Main.kt</code>æ–‡ä»¶:</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    println(<span class="hljs-string">"Hello World!"</span>)
}
</code></pre>
<p>å°±è¿™ä¹ˆç®€å•!ä»…ä»…3è¡Œä»£ç ,æˆ‘ä»¬å°±å®Œæˆäº†ç¬¬ä¸€ä¸ªKotlinç¨‹åºã€‚è®©æˆ‘ä»¬é€è¡Œè§£æ:</p>
<h3 data-id="heading-30">ä»£ç è§£æ</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {                <span class="hljs-comment">// 1. å£°æ˜mainå‡½æ•°</span>
    println(<span class="hljs-string">"Hello World!"</span>) <span class="hljs-comment">// 2. æ‰“å°æ–‡æœ¬</span>
}                           <span class="hljs-comment">// 3. å‡½æ•°ç»“æŸ</span>
</code></pre>
<p><strong>è¯¦ç»†è¯´æ˜:</strong></p>
<ol>
<li>
<p><strong><code>fun main()</code></strong> - ç¨‹åºå…¥å£ç‚¹</p>
<ul>
<li><code>fun</code> æ˜¯Kotlinçš„å…³é”®å­—,ç”¨äºå£°æ˜å‡½æ•°(function)</li>
<li><code>main</code> æ˜¯ç‰¹æ®Šçš„å‡½æ•°å,ç¨‹åºä»è¿™é‡Œå¼€å§‹æ‰§è¡Œ</li>
<li><code>()</code> è¡¨ç¤ºè¿™ä¸ªå‡½æ•°ä¸æ¥å—å‚æ•°</li>
<li>æ²¡æœ‰æŒ‡å®šè¿”å›ç±»å‹,è¡¨ç¤ºè¿”å›<code>Unit</code>(ç›¸å½“äºJavaçš„void)</li>
</ul>
</li>
<li>
<p><strong><code>println("Hello World!")</code></strong> - æ‰“å°è¾“å‡º</p>
<ul>
<li><code>println</code>æ˜¯Kotlinæ ‡å‡†åº“æä¾›çš„å‡½æ•°</li>
<li>åŠŸèƒ½:æ‰“å°æ–‡æœ¬å¹¶æ¢è¡Œ</li>
<li><code>"Hello World!"</code>æ˜¯å­—ç¬¦ä¸²å­—é¢é‡</li>
</ul>
</li>
<li>
<p><strong>æ³¨æ„æ²¡æœ‰åˆ†å·!</strong></p>
<ul>
<li>Kotlinä¸­åˆ†å·æ˜¯å¯é€‰çš„</li>
<li>è™½ç„¶åŠ äº†ä¹Ÿä¸æŠ¥é”™,ä½†çº¦å®šä¿—æˆä¸åŠ </li>
</ul>
</li>
</ol>
<h3 data-id="heading-31">è¿è¡Œç¨‹åº</h3>
<p>æœ‰ä¸‰ç§æ–¹å¼è¿è¡Œç¨‹åº:</p>
<p><strong>æ–¹å¼1:ç‚¹å‡»è¡Œå·æ—çš„ç»¿è‰²ç®­å¤´</strong></p>
<ul>
<li>åœ¨<code>fun main()</code>è¿™ä¸€è¡Œ,ä¼šå‡ºç°ç»¿è‰²çš„â–¶ï¸å›¾æ ‡</li>
<li>ç‚¹å‡»å›¾æ ‡,é€‰æ‹©<strong>Run 'MainKt'</strong></li>
</ul>
<p><strong>æ–¹å¼2:ä½¿ç”¨èœå•</strong></p>
<ul>
<li>ç‚¹å‡»é¡¶éƒ¨èœå• <strong>Run</strong> â†’ <strong>Run 'MainKt'</strong></li>
</ul>
<p><strong>æ–¹å¼3:ä½¿ç”¨å¿«æ·é”®</strong></p>
<ul>
<li>Windows/Linux: <code>Ctrl + Shift + F10</code></li>
<li>macOS: <code>Ctrl + Shift + R</code></li>
</ul>
<p>è¿è¡Œå,ä½ ä¼šåœ¨åº•éƒ¨çš„<strong>Runçª—å£</strong>çœ‹åˆ°è¾“å‡º:</p>
<pre><code class="hljs language-vbnet" lang="vbnet">Hello World!

Process finished <span class="hljs-keyword">with</span> <span class="hljs-keyword">exit</span> code <span class="hljs-number">0</span>
</code></pre>
<p><strong>æ­å–œä½ !ä½ å·²ç»æˆåŠŸè¿è¡Œäº†ç¬¬ä¸€ä¸ªKotlinç¨‹åº!</strong> ğŸ‰</p>
<h3 data-id="heading-32">è®©æˆ‘ä»¬ç¨å¾®æ”¹è¿›ä¸€ä¸‹</h3>
<p>ç°åœ¨è®©æˆ‘ä»¬è®©ç¨‹åºæ›´æœ‰è¶£ä¸€ç‚¹:</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">val</span> name = <span class="hljs-string">"Kotlin"</span>
    <span class="hljs-keyword">val</span> version = <span class="hljs-string">"2.0"</span>
    println(<span class="hljs-string">"Hello <span class="hljs-variable">$name</span> <span class="hljs-variable">$version</span>!"</span>)
    println(<span class="hljs-string">"æ¬¢è¿æ¥åˆ°Kotlinçš„ä¸–ç•Œ!"</span>)
}
</code></pre>
<p><strong>æ–°æ¦‚å¿µ:</strong></p>
<ul>
<li><code>val</code> - å£°æ˜ä¸€ä¸ªåªè¯»å˜é‡(ç±»ä¼¼Javaçš„final)</li>
<li><code>$name</code> - å­—ç¬¦ä¸²æ¨¡æ¿,ç›´æ¥åœ¨å­—ç¬¦ä¸²ä¸­æ’å…¥å˜é‡å€¼</li>
</ul>
<p>è¿è¡Œè¾“å‡º:</p>
<pre><code class="hljs">Hello Kotlin 2.0!
æ¬¢è¿æ¥åˆ°Kotlinçš„ä¸–ç•Œ!
</code></pre>
<p>çœ‹åˆ°äº†å—?å­—ç¬¦ä¸²æ¨¡æ¿è®©ä»£ç æ›´ç®€æ´,ä¸éœ€è¦Javaé‚£æ ·ç¹ççš„<code>+</code>æ‹¼æ¥ã€‚</p>
<h2 data-id="heading-33">ä½¿ç”¨Kotlin REPL</h2>
<p><strong>REPL</strong>(Read-Eval-Print Loop,è¯»å–-æ±‚å€¼-è¾“å‡ºå¾ªç¯)æ˜¯ä¸€ä¸ªäº¤äº’å¼ç¼–ç¨‹ç¯å¢ƒ,éå¸¸é€‚åˆå¿«é€ŸéªŒè¯ä»£ç ç‰‡æ®µå’Œå­¦ä¹ æ–°è¯­æ³•ã€‚</p>
<h3 data-id="heading-34">å¯åŠ¨REPL</h3>
<p>åœ¨IntelliJ IDEAä¸­:</p>
<ol>
<li>ç‚¹å‡»é¡¶éƒ¨èœå• <strong>Tools</strong> â†’ <strong>Kotlin</strong> â†’ <strong>Kotlin REPL</strong></li>
<li>åº•éƒ¨ä¼šå‡ºç°<strong>Kotlin REPL</strong>çª—å£</li>
</ol>
<p>ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨å‘½ä»¤è¡ŒREPL(éœ€è¦å…ˆå®‰è£…Kotlin compiler):</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># macOS/Linuxç”¨æˆ·å¯ä»¥ç”¨SDKMANå®‰è£…</span>
sdk install kotlin

<span class="hljs-comment"># å¯åŠ¨REPL</span>
kotlinc-jvm
</code></pre>
<h3 data-id="heading-35">REPLåŸºæœ¬ä½¿ç”¨</h3>
<p>è®©æˆ‘ä»¬åœ¨REPLä¸­å°è¯•ä¸€äº›ä»£ç :</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// è¾“å…¥è¡¨è¾¾å¼,æŒ‰Ctrl+Enteræ‰§è¡Œ</span>
&gt;&gt;&gt; <span class="hljs-number">2</span> + <span class="hljs-number">3</span>
<span class="hljs-number">5</span>

&gt;&gt;&gt; <span class="hljs-string">"Hello"</span> + <span class="hljs-string">" "</span> + <span class="hljs-string">"REPL"</span>
Hello REPL

&gt;&gt;&gt; <span class="hljs-keyword">val</span> x = <span class="hljs-number">10</span>
&gt;&gt;&gt; <span class="hljs-keyword">val</span> y = <span class="hljs-number">20</span>
&gt;&gt;&gt; x + y
<span class="hljs-number">30</span>

&gt;&gt;&gt; <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">greet</span><span class="hljs-params">(name: <span class="hljs-type">String</span>)</span></span> = <span class="hljs-string">"Hello, <span class="hljs-variable">$name</span>!"</span>
&gt;&gt;&gt; greet(<span class="hljs-string">"Kotlin"</span>)
Hello, Kotlin!

&gt;&gt;&gt; (<span class="hljs-number">1.</span><span class="hljs-number">.10</span>).filter { it % <span class="hljs-number">2</span> == <span class="hljs-number">0</span> }
[<span class="hljs-number">2</span>, <span class="hljs-number">4</span>, <span class="hljs-number">6</span>, <span class="hljs-number">8</span>, <span class="hljs-number">10</span>]
</code></pre>
<p><strong>REPLçš„ä¼˜åŠ¿:</strong></p>
<ul>
<li>âœ… ç«‹å³çœ‹åˆ°ç»“æœ,æ— éœ€ç¼–è¯‘</li>
<li>âœ… å¿«é€ŸéªŒè¯è¯­æ³•å’ŒAPI</li>
<li>âœ… å­¦ä¹ æ–°ç‰¹æ€§çš„æœ€ä½³å·¥å…·</li>
<li>âœ… è°ƒè¯•ä»£ç ç‰‡æ®µ</li>
</ul>

**å­¦ä¹ å»ºè®®**: åœ¨å­¦ä¹ Kotlinçš„è¿‡ç¨‹ä¸­,é‡åˆ°ä¸ç¡®å®šçš„è¯­æ³•,å…ˆåœ¨REPLä¸­è¯•ä¸€è¯•,æ¯”æŸ¥æ–‡æ¡£æ›´å¿«!

<h3 data-id="heading-36">REPLå®æˆ˜:å¿«é€Ÿè®¡ç®—å™¨</h3>
<p>è®©æˆ‘ä»¬ç”¨REPLå®ç°ä¸€ä¸ªç®€å•çš„è®¡ç®—å™¨:</p>
<pre><code class="hljs language-kotlin" lang="kotlin">&gt;&gt;&gt; <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">calculate</span><span class="hljs-params">(a: <span class="hljs-type">Int</span>, b: <span class="hljs-type">Int</span>, op: <span class="hljs-type">Char</span>)</span></span>: <span class="hljs-built_in">Int</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">when</span> (op) {
            <span class="hljs-string">'+'</span> -&gt; a + b
            <span class="hljs-string">'-'</span> -&gt; a - b
            <span class="hljs-string">'*'</span> -&gt; a * b
            <span class="hljs-string">'/'</span> -&gt; a / b
            <span class="hljs-keyword">else</span> -&gt; <span class="hljs-number">0</span>
        }
    }

&gt;&gt;&gt; calculate(<span class="hljs-number">10</span>, <span class="hljs-number">5</span>, <span class="hljs-string">'+'</span>)
<span class="hljs-number">15</span>

&gt;&gt;&gt; calculate(<span class="hljs-number">10</span>, <span class="hljs-number">5</span>, <span class="hljs-string">'*'</span>)
<span class="hljs-number">50</span>
</code></pre>
<h2 data-id="heading-37">KotlinåŸºæœ¬è¯­æ³•æ¦‚è§ˆ</h2>
<p>åœ¨ç»“æŸæœ¬æ–‡ä¹‹å‰,è®©æˆ‘ä»¬å¿«é€Ÿæµè§ˆä¸€ä¸‹Kotlinçš„åŸºæœ¬è¯­æ³•,ä¸ºåç»­å­¦ä¹ æ‰“ä¸‹åŸºç¡€ã€‚</p>
<h3 data-id="heading-38">åŒ…å£°æ˜å’Œå¯¼å…¥</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">package</span> com.example.myapp  <span class="hljs-comment">// å£°æ˜åŒ…å</span>

<span class="hljs-keyword">import</span> kotlin.math.*       <span class="hljs-comment">// å¯¼å…¥kotlin.mathåŒ…çš„æ‰€æœ‰å†…å®¹</span>
<span class="hljs-keyword">import</span> java.util.Date      <span class="hljs-comment">// å¯¼å…¥Javaç±»</span>

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    println(sqrt(<span class="hljs-number">16.0</span>))  <span class="hljs-comment">// ä½¿ç”¨å¯¼å…¥çš„å‡½æ•°</span>
    println(Date())      <span class="hljs-comment">// ä½¿ç”¨å¯¼å…¥çš„Javaç±»</span>
}
</code></pre>
<p><strong>è¯´æ˜:</strong></p>
<ul>
<li>åŒ…åé€šå¸¸ä¸æ–‡ä»¶è·¯å¾„å¯¹åº”,ä½†ä¸å¼ºåˆ¶</li>
<li>å¯ä»¥ä½¿ç”¨<code>import</code>å¯¼å…¥Kotlinå’ŒJavaçš„ç±»å’Œå‡½æ•°</li>
<li><code>*</code>è¡¨ç¤ºå¯¼å…¥åŒ…ä¸­çš„æ‰€æœ‰å†…å®¹</li>
</ul>
<h3 data-id="heading-39">è¯­å¥ vs è¡¨è¾¾å¼</h3>
<p>è¿™æ˜¯Kotlinçš„ä¸€ä¸ªé‡è¦æ¦‚å¿µ:<strong>å‡ ä¹ä¸€åˆ‡éƒ½æ˜¯è¡¨è¾¾å¼</strong>ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// Javaä¸­ifæ˜¯è¯­å¥(statement)</span>
String result;
<span class="hljs-keyword">if</span> (x &gt; <span class="hljs-number">0</span>) {
    result = <span class="hljs-string">"positive"</span>;
} <span class="hljs-keyword">else</span> {
    result = <span class="hljs-string">"negative"</span>;
}

<span class="hljs-comment">// Kotlinä¸­ifæ˜¯è¡¨è¾¾å¼(expression),æœ‰è¿”å›å€¼</span>
<span class="hljs-keyword">val</span> result = <span class="hljs-keyword">if</span> (x &gt; <span class="hljs-number">0</span>) <span class="hljs-string">"positive"</span> <span class="hljs-keyword">else</span> <span class="hljs-string">"negative"</span>
</code></pre>
<p><strong>è¡¨è¾¾å¼ä¸è¯­å¥çš„åŒºåˆ«:</strong></p>
<ul>
<li><strong>è¯­å¥(Statement)</strong>: æ‰§è¡Œæ“ä½œ,æ— è¿”å›å€¼</li>
<li><strong>è¡¨è¾¾å¼(Expression)</strong>: æ‰§è¡Œæ“ä½œ,æœ‰è¿”å›å€¼</li>
</ul>
<p>Kotlinä¸­,<code>if</code>ã€<code>when</code>ã€<code>try</code>éƒ½æ˜¯è¡¨è¾¾å¼,å¯ä»¥ç›´æ¥èµ‹å€¼ç»™å˜é‡ã€‚</p>
<h3 data-id="heading-40">åˆ†å·å¯é€‰</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// ä¸éœ€è¦åˆ†å·</span>
<span class="hljs-keyword">val</span> x = <span class="hljs-number">10</span>
<span class="hljs-keyword">val</span> y = <span class="hljs-number">20</span>
println(x + y)

<span class="hljs-comment">// åŠ åˆ†å·ä¹Ÿå¯ä»¥,ä½†ä¸æ¨è</span>
<span class="hljs-keyword">val</span> a = <span class="hljs-number">10</span>;
<span class="hljs-keyword">val</span> b = <span class="hljs-number">20</span>;
</code></pre>
<h3 data-id="heading-41">æ³¨é‡Š</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// è¿™æ˜¯å•è¡Œæ³¨é‡Š</span>

<span class="hljs-comment">/*
 è¿™æ˜¯
 å¤šè¡Œæ³¨é‡Š
 */</span>

<span class="hljs-comment">/**
 * è¿™æ˜¯æ–‡æ¡£æ³¨é‡Š(KDoc)
 * <span class="hljs-doctag">@param</span> name å‚æ•°è¯´æ˜
 * <span class="hljs-doctag">@return</span> è¿”å›å€¼è¯´æ˜
 */</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">greet</span><span class="hljs-params">(name: <span class="hljs-type">String</span>)</span></span>: String {
    <span class="hljs-keyword">return</span> <span class="hljs-string">"Hello, <span class="hljs-variable">$name</span>!"</span>
}
</code></pre>
<h3 data-id="heading-42">ä»£ç é£æ ¼çº¦å®š</h3>
<p>Kotlinæœ‰ä¸€å¥—å®˜æ–¹çš„<a href="https://link.juejin.cn?target=https%3A%2F%2Fkotlinlang.org%2Fdocs%2Fcoding-conventions.html" target="_blank" title="https://kotlinlang.org/docs/coding-conventions.html" ref="nofollow noopener noreferrer">ä»£ç é£æ ¼æŒ‡å—</a>,ä¸»è¦çº¦å®š:</p>
<ul>
<li>
<p><strong>å‘½åé£æ ¼:</strong></p>
<ul>
<li>ç±»å:PascalCase (å¤§é©¼å³°) - <code>PersonInfo</code></li>
<li>å‡½æ•°å/å˜é‡å:camelCase (å°é©¼å³°) - <code>userName</code></li>
<li>å¸¸é‡:SCREAMING_SNAKE_CASE - <code>MAX_COUNT</code></li>
</ul>
</li>
<li>
<p><strong>ç¼©è¿›</strong>: ä½¿ç”¨4ä¸ªç©ºæ ¼,ä¸ä½¿ç”¨Tab</p>
</li>
<li>
<p><strong>èŠ±æ‹¬å·</strong>: å¼€èŠ±æ‹¬å·ä¸æ¢è¡Œ(K&amp;Ré£æ ¼)</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">example</span><span class="hljs-params">()</span></span> {  <span class="hljs-comment">// å¼€èŠ±æ‹¬å·ç´§è·Ÿå‡½æ•°å£°æ˜</span>
    <span class="hljs-comment">// ä»£ç </span>
}
</code></pre>
</li>
<li>
<p><strong>ç©ºæ ¼ä½¿ç”¨:</strong></p>
<ul>
<li>æ“ä½œç¬¦ä¸¤ä¾§åŠ ç©ºæ ¼:<code>a + b</code></li>
<li>é€—å·ååŠ ç©ºæ ¼:<code>fun foo(a: Int, b: Int)</code></li>
<li>å†’å·å‰ä¸åŠ ,ååŠ :<code>val name: String</code></li>
</ul>
</li>
</ul>
<h2 data-id="heading-43">Kotlin Playground:åœ¨çº¿ä½“éªŒ</h2>
<p>å¦‚æœä½ æš‚æ—¶ä¸æƒ³å®‰è£…ç¯å¢ƒ,å¯ä»¥ä½¿ç”¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fplay.kotlinlang.org%2F" target="_blank" title="https://play.kotlinlang.org/" ref="nofollow noopener noreferrer">Kotlin Playground</a>:</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/86ef2b87fbb741d5b73ed5d1ad5c519f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yas5aWHTGFi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768659619&amp;x-signature=vJ1yxJxVmQFtoX7stcww7Fhy67o%3D" alt="01-04-kotlin-playground.png" loading="lazy"/></p>
<p><em>å›¾ç‰‡è¯´æ˜:Kotlin Playgroundåœ¨çº¿ç¼–ç¨‹ç¯å¢ƒ</em></p>
<p><strong>ç‰¹ç‚¹:</strong></p>
<ul>
<li>æ— éœ€å®‰è£…,æµè§ˆå™¨ç›´æ¥è¿è¡Œ</li>
<li>æ”¯æŒåˆ‡æ¢Kotlinç‰ˆæœ¬å’Œè¿è¡Œå¹³å°(JVM/JS/Native)</li>
<li>å¯ä»¥åˆ†äº«ä»£ç é“¾æ¥</li>
<li>å†…ç½®å¤§é‡ç¤ºä¾‹</li>
</ul>
<p><strong>è®¿é—®æ–¹å¼:</strong></p>
<ol>
<li>æ‰“å¼€ <a href="https://link.juejin.cn?target=https%3A%2F%2Fplay.kotlinlang.org%2F" target="_blank" title="https://play.kotlinlang.org/" ref="nofollow noopener noreferrer">play.kotlinlang.org/</a></li>
<li>åœ¨ç¼–è¾‘å™¨ä¸­è¾“å…¥ä»£ç </li>
<li>ç‚¹å‡»<strong>Run</strong>æŒ‰é’®</li>
<li>åœ¨å³ä¾§æŸ¥çœ‹è¾“å‡ºç»“æœ</li>
</ol>
<p>è¿™å¯¹äºå¿«é€Ÿåˆ†äº«ä»£ç å’Œåœ¨çº¿æ¼”ç¤ºéå¸¸æœ‰ç”¨ã€‚</p>
<h2 data-id="heading-44">å¸¸è§é—®é¢˜è§£ç­”</h2>
<h3 data-id="heading-45">Q1: Kotlinå’ŒJavaå¯ä»¥æ··åˆä½¿ç”¨å—?</h3>
<p><strong>ç­”:</strong> å®Œå…¨å¯ä»¥!Kotlinä¸Java 100%äº’æ“ä½œã€‚ä½ å¯ä»¥:</p>
<ul>
<li>åœ¨Kotliné¡¹ç›®ä¸­è°ƒç”¨Javaä»£ç </li>
<li>åœ¨Javaé¡¹ç›®ä¸­è°ƒç”¨Kotlinä»£ç </li>
<li>åŒä¸€é¡¹ç›®ä¸­æ—¢æœ‰<code>.kt</code>æ–‡ä»¶åˆæœ‰<code>.java</code>æ–‡ä»¶</li>
</ul>
<p>å®é™…é¡¹ç›®ä¸­,å¾ˆå¤šå›¢é˜Ÿéƒ½æ˜¯æ¸è¿›å¼è¿ç§»,å…ˆå†™æ–°åŠŸèƒ½ç”¨Kotlin,è€ä»£ç ä¿æŒJava,ä¸¤è€…å’Œå¹³å…±å¤„ã€‚</p>
<h3 data-id="heading-46">Q2: å­¦ä¹ Kotlinéœ€è¦å…ˆå­¦Javaå—?</h3>
<p><strong>ç­”:</strong> ä¸éœ€è¦ã€‚Kotlinè¯­æ³•æ›´ç°ä»£ã€æ›´ç®€æ´,ç›´æ¥å­¦ä¹ Kotlinåè€Œæ›´å®¹æ˜“ã€‚ä½†æ˜¯:</p>
<ul>
<li>å¦‚æœä½ <strong>å·²ç»ä¼šJava</strong>,å­¦Kotlinä¼šéå¸¸å¿«(1-2å‘¨å³å¯ä¸Šæ‰‹)</li>
<li>å¦‚æœä½ <strong>å®Œå…¨æ²¡æœ‰ç¼–ç¨‹ç»éªŒ</strong>,å»ºè®®å…ˆå­¦ä¹ ç¼–ç¨‹åŸºç¡€æ¦‚å¿µ</li>
<li>å¦‚æœä½ <strong>ä¼šå…¶ä»–è¯­è¨€</strong>(å¦‚Python/JavaScript),å­¦Kotlinå¾ˆè½»æ¾</li>
</ul>
<h3 data-id="heading-47">Q3: IntelliJ IDEAå’ŒAndroid Studioæœ‰ä»€ä¹ˆåŒºåˆ«?</h3>
<p><strong>ç­”:</strong></p>
<ul>
<li><strong>Android Studio</strong>åŸºäºIntelliJ IDEA,ä¸“ä¸ºAndroidå¼€å‘å®šåˆ¶</li>
<li><strong>IntelliJ IDEA</strong>æ˜¯é€šç”¨IDE,æ”¯æŒå¤šç§è¯­è¨€å’Œæ¡†æ¶</li>
</ul>
<p>å¦‚æœä½ æ˜¯Androidå¼€å‘è€…,ä½¿ç”¨Android Studio;å¦‚æœæ˜¯åç«¯æˆ–å¤šå¹³å°å¼€å‘,ä½¿ç”¨IntelliJ IDEAã€‚ä¸¤è€…çš„Kotlinæ”¯æŒå‡ ä¹ä¸€è‡´ã€‚</p>
<h3 data-id="heading-48">Q4: Kotlinçš„æ€§èƒ½å¦‚ä½•?</h3>
<p><strong>ç­”:</strong></p>
<ul>
<li>Kotlinç¼–è¯‘æˆJVMå­—èŠ‚ç ,<strong>è¿è¡Œæ—¶æ€§èƒ½ä¸Javaç›¸åŒ</strong></li>
<li>æŸäº›ç‰¹æ€§(å¦‚inlineå‡½æ•°)ç”šè‡³å¯ä»¥ä¼˜åŒ–æ€§èƒ½</li>
<li>åç¨‹æ¯”Javaçº¿ç¨‹æ›´è½»é‡çº§,æ€§èƒ½æ›´å¥½</li>
<li>å”¯ä¸€éœ€è¦æ³¨æ„çš„æ˜¯ç¼–è¯‘é€Ÿåº¦,Kotlinç¼–è¯‘æ¯”Javaç¨æ…¢,ä½†Kotlin 2.0çš„K2ç¼–è¯‘å™¨å·²å¤§å¹…æ”¹è¿›</li>
</ul>
<h3 data-id="heading-49">Q5: å­¦ä¹ Kotlinéœ€è¦å¤šé•¿æ—¶é—´?</h3>
<p><strong>ç­”:</strong> å–å†³äºä½ çš„èƒŒæ™¯:</p>
<ul>
<li><strong>æœ‰Javaç»éªŒ</strong>: 1-2å‘¨æŒæ¡åŸºç¡€,1-2ä¸ªæœˆç†Ÿç»ƒ</li>
<li><strong>æœ‰å…¶ä»–è¯­è¨€ç»éªŒ</strong>: 2-4å‘¨æŒæ¡åŸºç¡€,2-3ä¸ªæœˆç†Ÿç»ƒ</li>
<li><strong>é›¶åŸºç¡€</strong>: 1-2ä¸ªæœˆæŒæ¡åŸºç¡€,3-6ä¸ªæœˆç†Ÿç»ƒ</li>
</ul>
<p>æœ¬ç³»åˆ—æ–‡ç« ä¼šå¸¦ä½ ç³»ç»Ÿå­¦ä¹ ,è·Ÿç€ç»ƒä¹ ,è¿›æ­¥ä¼šå¾ˆå¿«!</p>
<h2 data-id="heading-50">æ€»ç»“</h2>
<p>æ­å–œä½ å®Œæˆäº†Kotlinå­¦ä¹ çš„ç¬¬ä¸€æ­¥!è®©æˆ‘ä»¬å›é¡¾ä¸€ä¸‹ä»Šå¤©å­¦åˆ°çš„å†…å®¹:</p>
<h3 data-id="heading-51">æ ¸å¿ƒè¦ç‚¹</h3>
<ol>
<li>
<p><strong>Kotlinæ˜¯ä»€ä¹ˆ:</strong></p>
<ul>
<li>JetBrainså¼€å‘çš„ç°ä»£åŒ–JVMè¯­è¨€</li>
<li>Androidå®˜æ–¹é¦–é€‰è¯­è¨€</li>
<li>ç®€æ´ã€å®‰å…¨ã€å¯Œæœ‰è¡¨ç°åŠ›</li>
<li>ä¸Java 100%äº’æ“ä½œ</li>
</ul>
</li>
<li>
<p><strong>ä¸ºä»€ä¹ˆé€‰æ‹©Kotlin:</strong></p>
<ul>
<li>ä»£ç é‡å‡å°‘40%</li>
<li>ç¼–è¯‘æœŸç©ºå®‰å…¨,å‡å°‘80%ç©ºæŒ‡é’ˆé”™è¯¯</li>
<li>ç°ä»£åŒ–è¯­è¨€ç‰¹æ€§(åç¨‹ã€æ‰©å±•å‡½æ•°ã€DSLç­‰)</li>
<li>å¤šå¹³å°æ”¯æŒ</li>
</ul>
</li>
<li>
<p><strong>å¼€å‘ç¯å¢ƒ:</strong></p>
<ul>
<li>JDK 17+ (æ¨è)</li>
<li>IntelliJ IDEA Community Edition</li>
<li>Kotlinæ’ä»¶(IDEAè‡ªå¸¦)</li>
</ul>
</li>
<li>
<p><strong>Hello Worldç¨‹åº:</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    println(<span class="hljs-string">"Hello World!"</span>)
}
</code></pre>
</li>
<li>
<p><strong>REPLå·¥å…·:</strong></p>
<ul>
<li>å¿«é€ŸéªŒè¯ä»£ç çš„äº¤äº’å¼ç¯å¢ƒ</li>
<li>å­¦ä¹ æ–°è¯­æ³•çš„æœ€ä½³å·¥å…·</li>
</ul>
</li>
<li>
<p><strong>åŸºæœ¬è¯­æ³•:</strong></p>
<ul>
<li>åˆ†å·å¯é€‰</li>
<li>å‡ ä¹ä¸€åˆ‡éƒ½æ˜¯è¡¨è¾¾å¼</li>
<li>å­—ç¬¦ä¸²æ¨¡æ¿ <code>"Hello $name"</code></li>
<li>ç®€æ´çš„å‡½æ•°å£°æ˜</li>
</ul>
</li>
</ol>
<h3 data-id="heading-52">ä¸‹ä¸€æ­¥å­¦ä¹ è®¡åˆ’</h3>
<p>ç°åœ¨ä½ å·²ç»æ­å»ºå¥½ç¯å¢ƒå¹¶è¿è¡Œäº†ç¬¬ä¸€ä¸ªç¨‹åº,æ¥ä¸‹æ¥æˆ‘ä»¬å°†æ·±å…¥å­¦ä¹ :</p>
<ul>
<li><code>val</code> vs <code>var</code> çš„åŒºåˆ«</li>
<li>Kotlinçš„åŸºæœ¬æ•°æ®ç±»å‹</li>
<li>å­—ç¬¦ä¸²æ“ä½œå’Œæ¨¡æ¿</li>
<li>æ•°ç»„å’Œé›†åˆ</li>
<li>ç©ºå®‰å…¨æœºåˆ¶è¯¦è§£</li>
</ul>
<p><strong>ç»ƒä¹ å»ºè®®:</strong></p>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> åœ¨IntelliJ IDEAä¸­åˆ›å»ºä¸€ä¸ªæ–°é¡¹ç›®</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> ä¿®æ”¹Hello Worldç¨‹åº,è¾“å‡ºä½ çš„å§“åå’Œå­¦ä¹ Kotlinçš„ç›®æ ‡</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> åœ¨REPLä¸­å°è¯•æœ¬æ–‡çš„æ‰€æœ‰ä»£ç ç¤ºä¾‹</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> æ¢ç´¢Kotlin Playgroundçš„åœ¨çº¿ç¤ºä¾‹</li>
</ul>

**å­¦ä¹ å°è´´å£«**: å­¦ä¹ ç¼–ç¨‹æœ€é‡è¦çš„æ˜¯**å¤šç»ƒä¹ **ã€‚ä¸è¦åªæ˜¯çœ‹ä»£ç ,ä¸€å®šè¦äº²æ‰‹æ•²ä¸€é,è¿è¡Œä¸€é,ç”šè‡³æ•…æ„æ”¹é”™çœ‹çœ‹ä¼šå‘ç”Ÿä»€ä¹ˆã€‚åªæœ‰é€šè¿‡å®è·µ,æ‰èƒ½çœŸæ­£ç†è§£å’Œè®°ä½çŸ¥è¯†!

<h2 data-id="heading-53">ç›¸å…³èµ„æº</h2>
<h3 data-id="heading-54">å®˜æ–¹èµ„æº</h3>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fkotlinlang.org%2Fdocs%2Fhome.html" target="_blank" title="https://kotlinlang.org/docs/home.html" ref="nofollow noopener noreferrer">Kotlinå®˜æ–¹æ–‡æ¡£</a> - æœ€æƒå¨çš„å­¦ä¹ èµ„æ–™</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fplay.kotlinlang.org%2Fkoans" target="_blank" title="https://play.kotlinlang.org/koans" ref="nofollow noopener noreferrer">Kotlin Koans</a> - äº’åŠ¨å¼ç¼–ç¨‹ç»ƒä¹ </li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fplay.kotlinlang.org%2F" target="_blank" title="https://play.kotlinlang.org/" ref="nofollow noopener noreferrer">Kotlin Playground</a> - åœ¨çº¿ç¼–ç¨‹ç¯å¢ƒ</li>
</ul>
<h3 data-id="heading-55">ç¤¾åŒºèµ„æº</h3>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.kotlincn.net%2F" target="_blank" title="https://www.kotlincn.net/" ref="nofollow noopener noreferrer">Kotlinä¸­æ–‡ç¤¾åŒº</a> - ä¸­æ–‡æ–‡æ¡£å’Œç¤¾åŒº</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fsurveys.jetbrains.com%2Fs3%2Fkotlin-slack-sign-up" target="_blank" title="https://surveys.jetbrains.com/s3/kotlin-slack-sign-up" ref="nofollow noopener noreferrer">Kotlin Slack</a> - å®˜æ–¹Slacké¢‘é“</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.reddit.com%2Fr%2FKotlin%2F" target="_blank" title="https://www.reddit.com/r/Kotlin/" ref="nofollow noopener noreferrer">Reddit /r/Kotlin</a> - Redditè®¨è®ºåŒº</li>
</ul>
<h3 data-id="heading-56">å­¦ä¹ è·¯å¾„</h3>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fplay.kotlinlang.org%2FbyExample%2Foverview" target="_blank" title="https://play.kotlinlang.org/byExample/overview" ref="nofollow noopener noreferrer">Kotlin By Example</a> - é€šè¿‡ç¤ºä¾‹å­¦ä¹ </li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fhyperskill.org%2Ftracks%2F18" target="_blank" title="https://hyperskill.org/tracks/18" ref="nofollow noopener noreferrer">JetBrains Academy - Kotlin Track</a> - ç³»ç»ŸåŒ–è¯¾ç¨‹</li>
</ul>
<hr/>
<p><strong>ç³»åˆ—æ–‡ç« å¯¼èˆª:</strong></p>
<ul>
<li>ğŸ‘‰ ä¸‹ä¸€ç¯‡: [å˜é‡ã€æ•°æ®ç±»å‹ä¸åŸºæœ¬æ“ä½œ]--é©¬ä¸Šå°±æ¥</li>
</ul>
<hr/>
<p><em>å¦‚æœè¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©,æ¬¢è¿ç‚¹èµã€æ”¶è—ã€åˆ†äº«!æœ‰ä»»ä½•é—®é¢˜æˆ–å»ºè®®,æ¬¢è¿åœ¨è¯„è®ºåŒºç•™è¨€è®¨è®ºã€‚è®©æˆ‘ä»¬ä¸€èµ·å­¦ä¹ ,ä¸€èµ·æˆé•¿!</em></p>
<p><em>ä¹Ÿæ¬¢è¿è®¿é—®æˆ‘çš„<a href="https://link.juejin.cn?target=https%3A%2F%2Fhome.wonlab.top" target="_blank" title="https://home.wonlab.top" ref="nofollow noopener noreferrer">ä¸ªäººä¸»é¡µ</a>å‘ç°æ›´å¤šå®è—èµ„æº</em></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Claude Code ä¸­çš„å­ Agent æ´¾ç”Ÿå®ç°ï¼šTask Tool å®Œå…¨æŒ‡å—]]></title>    <link>https://juejin.cn/post/7593292445299933203</link>    <guid>https://juejin.cn/post/7593292445299933203</guid>    <pubDate>2026-01-10T13:32:39.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7593292445299933203" data-draft-id="7593232758127607814" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Claude Code ä¸­çš„å­ Agent æ´¾ç”Ÿå®ç°ï¼šTask Tool å®Œå…¨æŒ‡å—"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,Python"/> <meta itemprop="datePublished" content="2026-01-10T13:32:39.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸¤ä¸‡äº”åƒä¸ªå°æ—¶"/> <meta itemprop="url" content="https://juejin.cn/user/3966693682971870"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Claude Code ä¸­çš„å­ Agent æ´¾ç”Ÿå®ç°ï¼šTask Tool å®Œå…¨æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3966693682971870/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸¤ä¸‡äº”åƒä¸ªå°æ—¶
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-10T13:32:39.000Z" title="Sat Jan 10 2026 13:32:39 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    5
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»32åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Claude Code ä¸­çš„å­ Agent æ´¾ç”Ÿå®ç°ï¼šTask Tool å®Œå…¨æŒ‡å—</h2>
<h3 data-id="heading-1">ğŸ“ å¯¼èˆªæŒ‡å—</h3>
<p>æ ¹æ®ä½ çš„éœ€æ±‚ï¼Œé€‰æ‹©åˆé€‚çš„é˜…è¯»è·¯å¾„ï¼š</p>
<ul>
<li>ğŸ¯ <strong>æƒ³äº†è§£ Task toolï¼Ÿ</strong> â†’ <a href="#task-tool-core" title="#task-tool-core">Task Tool æ ¸å¿ƒæœºåˆ¶</a> - Claude Code çš„å®é™…å®ç°</li>
<li>ğŸ”§ <strong>æƒ³çœ‹ä»£ç å®ç°ï¼Ÿ</strong> â†’ <a href="#code-implementation" title="#code-implementation">å®Œæ•´ä»£ç ç¤ºä¾‹</a> - ä»é›¶æ„å»ºæ´¾ç”Ÿç³»ç»Ÿ</li>
<li>âš¡ <strong>å…³æ³¨æ€§èƒ½ä¼˜åŒ–ï¼Ÿ</strong> â†’ <a href="#parallel-execution" title="#parallel-execution">å¹¶è¡Œæ‰§è¡Œæœºåˆ¶</a> - è·å¾— 2-3x åŠ é€Ÿ</li>
<li>ğŸ“š <strong>æ·±å…¥ç†è§£åŸç†ï¼Ÿ</strong> â†’ <a href="#architecture-design" title="#architecture-design">æ¶æ„è®¾è®¡è§£æ</a> - è®¾è®¡æ€æƒ³å’Œæƒè¡¡</li>
</ul>
<hr/>
<h3 data-id="heading-2">ç›®å½•</h3>
<h4 data-id="heading-3">ç¬¬ä¸€éƒ¨åˆ†ï¼šæ ¸å¿ƒæ¦‚å¿µ ğŸ¯</h4>
<ul>
<li><a href="#what-is-delegation" title="#what-is-delegation">ä»€ä¹ˆæ˜¯å­ Agent æ´¾ç”Ÿ</a></li>
<li><a href="#why-not-hardcode" title="#why-not-hardcode">ä¸ºä»€ä¹ˆéœ€è¦æ´¾ç”Ÿè€Œéç¡¬ç¼–ç </a></li>
<li><a href="#claude-code-implementation" title="#claude-code-implementation">Claude Code ä¸­çš„å®ç°æ–¹å¼</a></li>
</ul>
<h4 data-id="heading-4">ç¬¬äºŒéƒ¨åˆ†ï¼šTask Tool è¯¦è§£ ğŸ”§</h4>
<ul>
<li><a href="#task-tool-core" title="#task-tool-core">Task Tool æ ¸å¿ƒæœºåˆ¶</a></li>
<li><a href="#subagent-types" title="#subagent-types">6 ç§ SubAgent Type è®¾è®¡</a></li>
<li><a href="#state-management" title="#state-management">çŠ¶æ€ç®¡ç†ä¸ä¸Šä¸‹æ–‡ä¼ é€’</a></li>
<li><a href="#dependency-resolution" title="#dependency-resolution">ä¾èµ–è§£æä¸æ‰§è¡Œé¡ºåº</a></li>
</ul>
<h4 data-id="heading-5">ç¬¬ä¸‰éƒ¨åˆ†ï¼šä»£ç å®ç° ğŸ’»</h4>
<ul>
<li><a href="#setup" title="#setup">ç¯å¢ƒå‡†å¤‡</a></li>
<li><a href="#data-models" title="#data-models">æ•°æ®æ¨¡å‹è®¾è®¡</a></li>
<li><a href="#subagent-implementation" title="#subagent-implementation">SubAgent å®ç°</a></li>
<li><a href="#langgraph-workflow" title="#langgraph-workflow">LangGraph å·¥ä½œæµ</a></li>
<li><a href="#complete-example" title="#complete-example">å®Œæ•´ç¤ºä¾‹</a></li>
</ul>
<hr/>
<p><a id="user-content-what-is-delegation" title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target="/></p>
<h3 data-id="heading-6">ä»€ä¹ˆæ˜¯å­ Agent æ´¾ç”Ÿï¼Ÿ</h3>
<p><strong>å­ Agent æ´¾ç”Ÿï¼ˆSub-Agent Delegationï¼‰</strong> æ˜¯ä¸€ç§é«˜æ•ˆçš„æ¶æ„æ¨¡å¼ï¼Œæ—¨åœ¨é€šè¿‡åˆ†è€Œæ²»ä¹‹çš„ç­–ç•¥å¤„ç†å¤æ‚ä»»åŠ¡ã€‚åœ¨æ­¤æ¨¡å¼ä¸­ï¼Œ<strong>ä¸» Agent (Controller)</strong> æ‰®æ¼”æŒ‡æŒ¥å®˜è§’è‰²ï¼Œè´Ÿè´£è§£æç”¨æˆ·éœ€æ±‚å¹¶åŠ¨æ€ç”Ÿæˆå­ä»»åŠ¡è®¡åˆ’ï¼›éšåï¼Œç³»ç»Ÿä¼š<strong>é‡‡ç”¨åŠåŠ¨æ€æœºåˆ¶ï¼ˆå›ºå®šè§’è‰²æ¨¡æ¿ + åŠ¨æ€ä»»åŠ¡å†…å®¹ï¼‰æ¥æ¿€æ´»å¯¹åº”çš„å­ Agent</strong>ï¼Œè¿™äº› Agent æ¥æ”¶å®šåˆ¶åŒ–çš„ä»»åŠ¡å‚æ•°åç‹¬ç«‹æ‰§è¡Œã€‚è¿™ç§æœºåˆ¶æ—¢ä¿è¯äº†æ‰§è¡Œçš„ç¨³å®šæ€§ï¼ˆé€šè¿‡é¢„è®¾æ¨¡æ¿ï¼‰ï¼Œåˆå…¼é¡¾äº†ä»»åŠ¡çš„çµæ´»æ€§ï¼ˆé€šè¿‡åŠ¨æ€å†…å®¹ï¼‰ï¼Œæœ€åç”±ä¸» Agent æ±‡æ€»æ‰€æœ‰ç»“æœã€‚</p>
<h4 data-id="heading-7">æ ¸å¿ƒå·¥ä½œæµç¨‹</h4>
<pre><code class="hljs language-arduino" lang="arduino">ç”¨æˆ·å¤æ‚è¯·æ±‚ï¼ˆå¦‚ï¼š<span class="hljs-string">"å†™ä¸€ç¯‡æŠ€æœ¯åšå®¢"</span>ï¼‰
    â†“
ä¸» Agent åŠ¨æ€åˆ¶å®šå§”æ´¾è®¡åˆ’
    â†“
ä»»åŠ¡åˆ†è§£ä¸ºä¸“ä¸šåŒ–å­ä»»åŠ¡
    â”œâ”€ Research Agentï¼šç ”ç©¶ä¸»é¢˜
    â”œâ”€ Writing Agentï¼šæ’°å†™å†…å®¹
    â””â”€ QA Agentï¼šè´¨é‡å®¡æ ¸
    â†“
ä¸» Agent èšåˆç»“æœç”Ÿæˆæœ€ç»ˆæŠ¥å‘Š
</code></pre>
<h4 data-id="heading-8">ä¸€ä¸ªçœŸå®çš„ä¾‹å­</h4>
<p>å‡è®¾ç”¨æˆ·è¯·æ±‚ï¼š"å¸®æˆ‘å†™ä¸€ç¯‡å…³äº Python è£…é¥°å™¨çš„æŠ€æœ¯åšå®¢"</p>
<p><strong>ç¡¬ç¼–ç æ–¹å¼ï¼ˆä¼ ç»Ÿï¼‰</strong>ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">write_blog_hardcoded</span>(<span class="hljs-params">topic</span>):
    <span class="hljs-comment"># å›ºå®šæµç¨‹ï¼šç ”ç©¶ â†’ å†™ä½œ â†’ å®¡æ ¸</span>
    research = research_agent.run(topic)
    article = writing_agent.run(research)
    final = qa_agent.run(article)
    <span class="hljs-keyword">return</span> final
</code></pre>
<p><strong>é—®é¢˜</strong>ï¼š</p>
<ul>
<li>âŒ ç®€å•ä»»åŠ¡ä¹Ÿèµ°å®Œæ•´æµç¨‹ï¼ˆæµªè´¹èµ„æºï¼‰</li>
<li>âŒ å¤æ‚ä»»åŠ¡å¯èƒ½æµç¨‹ä¸å¤Ÿï¼ˆè¾“å‡ºè´¨é‡å·®ï¼‰</li>
<li>âŒ æ‰€æœ‰ä»»åŠ¡ç”¨ç›¸åŒå‚æ•°ï¼ˆæ— æ³•ä¸“ä¸šåŒ–ï¼‰</li>
</ul>
<p><strong>æ´¾ç”Ÿæ–¹å¼ï¼ˆClaude Codeï¼‰</strong>ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># ä¸» Agent åŠ¨æ€å†³å®šéœ€è¦å“ªäº›æ­¥éª¤</span>
plan = main_agent.create_plan(user_request)

<span class="hljs-comment"># å¯èƒ½çš„è®¡åˆ’ 1ï¼šç®€å•ä»»åŠ¡</span>
<span class="hljs-comment"># [writing_agent]  # ç›´æ¥å†™ä½œï¼Œè·³è¿‡ç ”ç©¶</span>

<span class="hljs-comment"># å¯èƒ½çš„è®¡åˆ’ 2ï¼šæ ‡å‡†ä»»åŠ¡</span>
<span class="hljs-comment"># [research_agent, writing_agent, qa_agent]</span>

<span class="hljs-comment"># å¯èƒ½çš„è®¡åˆ’ 3ï¼šæ·±åº¦ä»»åŠ¡</span>
<span class="hljs-comment"># [research_agent, analysis_agent, code_examples_agent,</span>
<span class="hljs-comment">#  writing_agent, seo_agent, qa_agent]</span>

results = execute_dynamic_plan(plan)
<span class="hljs-keyword">return</span> aggregate(results)
</code></pre>
<p><strong>ä¼˜åŠ¿</strong>ï¼š</p>
<ul>
<li>âœ… <strong>æ™ºèƒ½é€‚åº”</strong>ï¼šæ ¹æ®ä»»åŠ¡å¤æ‚åº¦è‡ªåŠ¨è°ƒæ•´</li>
<li>âœ… <strong>ä¸“ä¸šåŒ–</strong>ï¼šæ¯ä¸ª Agent é’ˆå¯¹æ€§ä¼˜åŒ–ï¼ˆæ¸©åº¦ã€å·¥å…·ã€æç¤ºè¯ï¼‰</li>
<li>âœ… <strong>é«˜è´¨é‡</strong>ï¼šå¤æ‚ä»»åŠ¡å¾—åˆ°å……åˆ†å¤„ç†</li>
<li>âœ… <strong>é«˜æ•ˆç‡</strong>ï¼šç®€å•ä»»åŠ¡å¿«é€Ÿå“åº”</li>
</ul>
<hr/>
<p><a id="user-content-why-not-hardcode" title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target="/></p>
<h3 data-id="heading-9">ä¸ºä»€ä¹ˆéœ€è¦æ´¾ç”Ÿè€Œéç¡¬ç¼–ç ï¼Ÿ</h3>
<p>å¾ˆå¤šå¼€å‘è€…ä¼šé—®ï¼š"æˆ‘çŸ¥é“ä»»åŠ¡éœ€è¦ç ”ç©¶ã€å†™ä½œã€å®¡æ ¸ä¸‰æ­¥ï¼Œä¸ºä»€ä¹ˆä¸ç›´æ¥å†™æ­»æµç¨‹ï¼Ÿ"</p>
<h4 data-id="heading-10">ç¡¬ç¼–ç çš„ä¸‰å¤§å¤±è´¥åœºæ™¯</h4>
<h5 data-id="heading-11">åœºæ™¯ 1ï¼šä»»åŠ¡å¤æ‚åº¦å·®å¼‚å·¨å¤§</h5>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># ç¡¬ç¼–ç æ–¹æ¡ˆ</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">write_blog_hardcoded</span>(<span class="hljs-params">topic</span>):
    research = research_agent.execute(topic)  <span class="hljs-comment"># å›ºå®šè°ƒç”¨</span>
    article = writing_agent.execute(research)
    <span class="hljs-keyword">return</span> qa_agent.execute(article)

<span class="hljs-comment"># âŒ é—®é¢˜ 1ï¼šç®€å•ä»»åŠ¡æµªè´¹èµ„æº</span>
user_input = <span class="hljs-string">"æ€»ç»“ä¸€ä¸‹ Python è£…é¥°å™¨æ˜¯ä»€ä¹ˆï¼ˆ50å­—ï¼‰"</span>
<span class="hljs-comment"># â†’ ä¸éœ€è¦ç ”ç©¶ï¼Œä½†ä»ä¼šæ‰§è¡Œå®Œæ•´æµç¨‹</span>
<span class="hljs-comment"># â†’ æµªè´¹æ—¶é—´ + tokenï¼Œç”¨æˆ·ä½“éªŒå·®</span>

<span class="hljs-comment"># âŒ é—®é¢˜ 2ï¼šå¤æ‚ä»»åŠ¡å¤„ç†ä¸è¶³</span>
user_input = <span class="hljs-string">"å†™ä¸€ç¯‡å…³äºé‡å­è®¡ç®—åœ¨å¯†ç å­¦åº”ç”¨çš„ç»¼è¿°è®ºæ–‡"</span>
<span class="hljs-comment"># â†’ éœ€è¦ï¼šæ–‡çŒ®è°ƒç ” â†’ ç†è®ºåˆ†æ â†’ ç®—æ³•ç ”ç©¶ â†’ å®‰å…¨åˆ†æ â†’ æ’°å†™ â†’ å­¦æœ¯å®¡æ ¸</span>
<span class="hljs-comment"># â†’ ç¡¬ç¼–ç çš„ 3 æ­¥æµç¨‹æ ¹æœ¬ä¸å¤Ÿç”¨</span>
</code></pre>
<h5 data-id="heading-12">åœºæ™¯ 2ï¼šé¢†åŸŸä¸“ä¸šåŒ–éœ€æ±‚</h5>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># ç¡¬ç¼–ç ï¼šæ‰€æœ‰ä»»åŠ¡ç”¨åŒä¸€å¥— Agent</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">analyze_hardcoded</span>(<span class="hljs-params">data</span>):
    <span class="hljs-keyword">return</span> general_agent.analyze(data)  <span class="hljs-comment"># é€šç”¨ Agent</span>

<span class="hljs-comment"># âŒ æ•°æ®åˆ†æï¼šéœ€è¦ç»Ÿè®¡æ–¹æ³•ã€å¯è§†åŒ–</span>
<span class="hljs-comment"># âŒ æ³•å¾‹åˆ†æï¼šéœ€è¦æ³•è§„æ£€ç´¢ã€é£é™©è¯„ä¼°</span>
<span class="hljs-comment"># âŒ ä»£ç åˆ†æï¼šéœ€è¦æ€§èƒ½åˆ†æã€ç®—æ³•ä¼˜åŒ–</span>
<span class="hljs-comment"># â†’ é€šç”¨ Agent ä»€ä¹ˆéƒ½ä¼šä¸€ç‚¹ï¼Œä½†ä»€ä¹ˆéƒ½ä¸ç²¾é€š</span>
</code></pre>
<p><strong>åŠ¨æ€æ´¾ç”Ÿçš„ä¸“ä¸šåŒ–</strong>ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># æ•°æ®åˆ†æè¯·æ±‚ â†’ æ•°æ®ä¸“å®¶å›¢é˜Ÿ</span>
plan_data = [data_cleaning_agent, statistical_analysis_agent,
             visualization_agent, insight_generation_agent]

<span class="hljs-comment"># æ³•å¾‹åˆ†æè¯·æ±‚ â†’ æ³•å¾‹ä¸“å®¶å›¢é˜Ÿ</span>
plan_legal = [legal_research_agent, risk_identification_agent,
              compliance_check_agent, recommendation_agent]

<span class="hljs-comment"># æ¯ä¸ªé¢†åŸŸéƒ½æœ‰ä¸“é—¨çš„ Agentï¼Œè¾“å‡ºè´¨é‡è¿œè¶…é€šç”¨ Agent</span>
</code></pre>
<h5 data-id="heading-13">åœºæ™¯ 3ï¼šåŠ¨æ€ä¾èµ–å˜åŒ–</h5>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># ç¡¬ç¼–ç ï¼šå›ºå®šçš„æ‰§è¡Œé¡ºåº</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">create_marketing</span>(<span class="hljs-params">product</span>):
    research = research_agent.execute(product)      <span class="hljs-comment"># æ­¥éª¤ 1</span>
    analysis = analysis_agent.execute(research)     <span class="hljs-comment"># æ­¥éª¤ 2</span>
    copy = writing_agent.execute(analysis)          <span class="hljs-comment"># æ­¥éª¤ 3</span>
    seo = seo_agent.execute(copy)                  <span class="hljs-comment"># æ­¥éª¤ 4</span>
    <span class="hljs-keyword">return</span> seo

<span class="hljs-comment"># âŒ ç”¨æˆ·å·²ç»æœ‰ç ”ç©¶æŠ¥å‘Šæ€ä¹ˆåŠï¼Ÿ</span>
<span class="hljs-comment"># â†’ ä»ä¼šé‡å¤æ‰§è¡Œç ”ç©¶æ­¥éª¤ï¼Œæµªè´¹èµ„æº</span>

<span class="hljs-comment"># âŒ ç”¨æˆ·ä¸éœ€è¦ SEO ä¼˜åŒ–æ€ä¹ˆåŠï¼Ÿ</span>
<span class="hljs-comment"># â†’ æ— æ³•è·³è¿‡ï¼Œå¿…é¡»æ‰§è¡Œå®Œæ•´æµç¨‹</span>
</code></pre>
<p><strong>åŠ¨æ€æ´¾ç”Ÿçš„çµæ´»æ€§</strong>ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># åœºæ™¯ 1ï¼šç”¨æˆ·æä¾›äº†ç ”ç©¶æŠ¥å‘Š</span>
user_request = <span class="hljs-string">"æˆ‘å·²ç»æœ‰äº†å¸‚åœºç ”ç©¶æŠ¥å‘Šï¼ˆè§é™„ä»¶ï¼‰ï¼Œè¯·å¸®æˆ‘å†™è¥é”€æ–‡æ¡ˆ"</span>
<span class="hljs-comment"># â†’ ä¸» Agent è¯†åˆ«åè·³è¿‡ç ”ç©¶ï¼Œç›´æ¥ä»å†™ä½œå¼€å§‹</span>
plan = [copywriting_agent, seo_agent, review_agent]

<span class="hljs-comment"># åœºæ™¯ 2ï¼šç”¨æˆ·åªè¦å¿«é€Ÿæ–‡æ¡ˆ</span>
user_request = <span class="hljs-string">"å¿«é€Ÿå†™ä¸€ä¸ªäº§å“ä»‹ç»ï¼ˆ100å­—ï¼‰"</span>
<span class="hljs-comment"># â†’ ä¸» Agent è¯†åˆ«ç®€å•ä»»åŠ¡ï¼Œè·³è¿‡æ‰€æœ‰åˆ†æç¯èŠ‚</span>
plan = [quick_writing_agent]

<span class="hljs-comment"># åœºæ™¯ 3ï¼šå®Œæ•´è¥é”€æ–¹æ¡ˆ</span>
user_request = <span class="hljs-string">"ä¸ºæ–°äº§å“åˆ¶å®šå®Œæ•´è¥é”€ç­–ç•¥"</span>
<span class="hljs-comment"># â†’ ä¸» Agent ç”Ÿæˆå®Œæ•´æµç¨‹</span>
plan = [market_research_agent, competitor_analysis_agent,
        positioning_agent, copywriting_agent, seo_agent,
        social_media_agent, review_agent]
</code></pre>
<h4 data-id="heading-14">æ ¸å¿ƒå·®å¼‚æ€»ç»“</h4>








































<table><thead><tr><th>ç»´åº¦</th><th>ç¡¬ç¼–ç æ–¹æ¡ˆ âŒ</th><th>åŠ¨æ€æ´¾ç”Ÿ âœ…</th></tr></thead><tbody><tr><td><strong>é€‚åº”æ€§</strong></td><td>ä¸€å¥—æµç¨‹åº”å¯¹æ‰€æœ‰åœºæ™¯</td><td>æ ¹æ®ä»»åŠ¡åŠ¨æ€è°ƒæ•´</td></tr><tr><td><strong>æ•ˆç‡</strong></td><td>ç®€å•ä»»åŠ¡ä¹Ÿèµ°å®Œæ•´æµç¨‹</td><td>ç®€å•ä»»åŠ¡å¿«é€Ÿå“åº”</td></tr><tr><td><strong>ä¸“ä¸šæ€§</strong></td><td>é€šç”¨ Agent ä»€ä¹ˆéƒ½ä¸ç²¾</td><td>ä¸“é—¨ Agent è¾“å‡ºé«˜è´¨é‡</td></tr><tr><td><strong>å¯æ‰©å±•</strong></td><td>æ–°éœ€æ±‚éœ€è¦ä¿®æ”¹ä»£ç </td><td>æ— éœ€ä¿®æ”¹ï¼Œè‡ªåŠ¨é€‚é…</td></tr><tr><td><strong>ç»´æŠ¤æˆæœ¬</strong></td><td>éœ€æ±‚è¶Šå¤šï¼Œä»£ç è¶Šä¹±</td><td>æ ¸å¿ƒé€»è¾‘ä¸å˜ï¼Œæ˜“ç»´æŠ¤</td></tr><tr><td><strong>ç”¨æˆ·ä½“éªŒ</strong></td><td>æ— æ³•ä¸ªæ€§åŒ–å“åº”</td><td>æ™ºèƒ½ç†è§£ç”¨æˆ·æ„å›¾</td></tr></tbody></table>
<h4 data-id="heading-15">ä½•æ—¶å¯ä»¥ç¡¬ç¼–ç ï¼Ÿ</h4>
<p>ä¹Ÿä¸æ˜¯å®Œå…¨ä¸èƒ½ç¡¬ç¼–ç ï¼Œä»¥ä¸‹åœºæ™¯å¯ä»¥ä½¿ç”¨ï¼š</p>
<p><strong>âœ… é€‚åˆç¡¬ç¼–ç çš„åœºæ™¯</strong>ï¼š</p>
<ol>
<li><strong>æµç¨‹æå…¶å›ºå®š</strong>ï¼šå¦‚å‘ç¥¨ç”Ÿæˆï¼ˆæ­¥éª¤æ°¸è¿œä¸å˜ï¼‰</li>
<li><strong>æ€§èƒ½è¦æ±‚æé«˜</strong>ï¼šå¦‚å®æ—¶æ¨èç³»ç»Ÿï¼ˆæ¯«ç§’çº§å“åº”ï¼Œæ— æ³•æ‰¿å—åŠ¨æ€è§„åˆ’å¼€é”€ï¼‰</li>
<li><strong>åˆè§„æ€§è¦æ±‚</strong>ï¼šå¦‚é‡‘èäº¤æ˜“æµç¨‹ï¼ˆå¿…é¡»ä¸¥æ ¼æŒ‰è§„å®šé¡ºåºï¼‰</li>
</ol>
<p><strong>ä½†å¯¹äº AI Agent åœºæ™¯ï¼Œå‡ ä¹éƒ½ä¸æ»¡è¶³ä»¥ä¸Šæ¡ä»¶ï¼</strong></p>
<hr/>
<p><a id="user-content-claude-code-implementation" title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target="/></p>
<h3 data-id="heading-16">Claude Code ä¸­çš„å®ç°æ–¹å¼</h3>
<p>Claude Code å®ç°äº†ä¸€å¥—å®Œæ•´çš„å­ Agent æ´¾ç”Ÿæ¡†æ¶ï¼Œæ ¸å¿ƒæ˜¯ <strong>Task Tool</strong>ã€‚</p>
<h4 data-id="heading-17">Task Tool çš„è®¾è®¡ç†å¿µ</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># Task Tool çš„æ ¸å¿ƒæ¥å£ï¼ˆç®€åŒ–ç‰ˆï¼‰</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">task_tool</span>(<span class="hljs-params">
    description: <span class="hljs-built_in">str</span>,        <span class="hljs-comment"># ä»»åŠ¡æè¿°ï¼ˆ3-5 è¯ï¼‰</span>
    prompt: <span class="hljs-built_in">str</span>,            <span class="hljs-comment"># è¯¦ç»†ä»»åŠ¡è¯´æ˜</span>
    subagent_type: <span class="hljs-built_in">str</span>,     <span class="hljs-comment"># Agent ç±»å‹</span>
    model: <span class="hljs-built_in">str</span> = <span class="hljs-string">"sonnet"</span>,  <span class="hljs-comment"># å¯é€‰æ¨¡å‹</span>
    run_in_background: <span class="hljs-built_in">bool</span> = <span class="hljs-literal">False</span>,  <span class="hljs-comment"># æ˜¯å¦åå°è¿è¡Œ</span>
    resume: <span class="hljs-built_in">str</span> = <span class="hljs-literal">None</span>      <span class="hljs-comment"># æ¢å¤ä¹‹å‰çš„ Agent</span>
</span>):
    <span class="hljs-string">"""
    å¯åŠ¨ä¸€ä¸ªä¸“é—¨åŒ–çš„å­ Agent æ¥å¤„ç†ç‰¹å®šä»»åŠ¡

    æ ¸å¿ƒç‰¹ç‚¹ï¼š
    1. åŠ¨æ€æ´¾ç”Ÿï¼šæ ¹æ®éœ€æ±‚åˆ›å»ºä¸“ä¸š Agent
    2. åå°è¿è¡Œï¼šæ”¯æŒå¹¶è¡Œæ‰§è¡Œ
    3. å¯æ¢å¤ï¼šæ”¯æŒä»ä¸­æ–­ç‚¹ç»§ç»­
    4. éš”ç¦»æ‰§è¡Œï¼šå¤±è´¥ä¸å½±å“å…¶ä»– Agent
    """</span>
    <span class="hljs-keyword">pass</span>
</code></pre>
<h4 data-id="heading-18">å¯ç”¨çš„ SubAgent Types</h4>
<p>Claude Code é¢„å®šä¹‰äº†å¤šç§ä¸“ä¸šåŒ–çš„ Agent ç±»å‹ï¼š</p>






















































<table><thead><tr><th>SubAgent Type</th><th>ä¸“é•¿é¢†åŸŸ</th><th>æ¸©åº¦</th><th>å·¥å…·</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td><strong>general-purpose</strong></td><td>é€šç”¨ä»»åŠ¡</td><td>0.5</td><td>All</td><td>å¤æ‚å¤šæ­¥éª¤ä»»åŠ¡</td></tr><tr><td><strong>Explore</strong></td><td>ä»£ç æ¢ç´¢</td><td>0.3</td><td>Glob, Grep, Read</td><td>ä»£ç åº“æœç´¢ã€ç»“æ„åˆ†æ</td></tr><tr><td><strong>Plan</strong></td><td>æ–¹æ¡ˆè®¾è®¡</td><td>0.4</td><td>All</td><td>å®ç°è§„åˆ’ã€æ¶æ„è®¾è®¡</td></tr><tr><td><strong>claude-code-guide</strong></td><td>Claude Code æ–‡æ¡£</td><td>0.5</td><td>WebFetch, WebSearch</td><td>Claude Code ä½¿ç”¨æŒ‡å—</td></tr><tr><td><strong>ollama-code-analyzer</strong></td><td>ä»£ç å®¡æŸ¥</td><td>0.2</td><td>Code analysis</td><td>Bugã€æ€§èƒ½ã€å®‰å…¨åˆ†æ</td></tr><tr><td><strong>ollama-architect</strong></td><td>æ¶æ„è®¾è®¡</td><td>0.6</td><td>Design tools</td><td>æŠ€æœ¯é€‰å‹ã€æ–¹æ¡ˆå¯¹æ¯”</td></tr></tbody></table>
<h4 data-id="heading-19">ä¸€ä¸ªçœŸå®çš„ä½¿ç”¨ç¤ºä¾‹</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># åœºæ™¯ï¼šåˆ†æä»£ç åº“å¹¶ç”Ÿæˆä¼˜åŒ–å»ºè®®</span>

<span class="hljs-comment"># Step 1: ä½¿ç”¨ Explore Agent æ¢ç´¢ä»£ç ç»“æ„</span>
explore_result = task_tool(
    description=<span class="hljs-string">"æ¢ç´¢ä»£ç åº“ç»“æ„"</span>,
    prompt=<span class="hljs-string">"""
    æ¢ç´¢è¿™ä¸ª Python é¡¹ç›®çš„ä»£ç ç»“æ„ï¼š
    1. æ‰¾åˆ°æ‰€æœ‰ Python æ–‡ä»¶
    2. è¯†åˆ«ä¸»è¦æ¨¡å—å’Œä¾èµ–å…³ç³»
    3. æ ‡è®°æ½œåœ¨çš„æ€§èƒ½ç“¶é¢ˆ
    """</span>,
    subagent_type=<span class="hljs-string">"Explore"</span>
)

<span class="hljs-comment"># Step 2: ä½¿ç”¨ Code Analyzer Agent æ·±åº¦åˆ†æ</span>
analyze_result = task_tool(
    description=<span class="hljs-string">"æ·±åº¦ä»£ç åˆ†æ"</span>,
    prompt=<span class="hljs-string">f"""
    åŸºäºä»¥ä¸‹ä»£ç ç»“æ„è¿›è¡Œæ·±åº¦åˆ†æï¼š
    <span class="hljs-subst">{explore_result}</span>

    è¯·è¯†åˆ«ï¼š
    1. æ€§èƒ½é—®é¢˜
    2. å®‰å…¨æ¼æ´
    3. ä»£ç å¼‚å‘³
    """</span>,
    subagent_type=<span class="hljs-string">"ollama-code-analyzer"</span>,
    run_in_background=<span class="hljs-literal">True</span>  <span class="hljs-comment"># åå°è¿è¡Œï¼Œä¸é˜»å¡</span>
)

<span class="hljs-comment"># Step 3: ä½¿ç”¨ Architect Agent è®¾è®¡ä¼˜åŒ–æ–¹æ¡ˆ</span>
plan_result = task_tool(
    description=<span class="hljs-string">"è®¾è®¡ä¼˜åŒ–æ–¹æ¡ˆ"</span>,
    prompt=<span class="hljs-string">f"""
    åŸºäºåˆ†æç»“æœè®¾è®¡ä¼˜åŒ–æ–¹æ¡ˆï¼š
    <span class="hljs-subst">{analyze_result}</span>

    è¯·æä¾›ï¼š
    1. ä¼˜åŒ–ç­–ç•¥
    2. æŠ€æœ¯é€‰å‹
    3. å®æ–½æ­¥éª¤
    """</span>,
    subagent_type=<span class="hljs-string">"ollama-architect"</span>
)
</code></pre>
<hr/>
<p><a id="user-content-task-tool-core" title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target="/></p>
<h3 data-id="heading-20">Task Tool æ ¸å¿ƒæœºåˆ¶</h3>
<p>è®©æˆ‘ä»¬æ·±å…¥äº†è§£ Claude Code Task Tool çš„å®ç°åŸç†ã€‚</p>
<h4 data-id="heading-21">æ•°æ®æ¨¡å‹è®¾è®¡</h4>
<h5 data-id="heading-22">1. SubTask æ¨¡å‹</h5>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> pydantic <span class="hljs-keyword">import</span> BaseModel, Field
<span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> <span class="hljs-type">List</span>, <span class="hljs-type">Literal</span>, <span class="hljs-type">Optional</span>

<span class="hljs-keyword">class</span> <span class="hljs-title class_">SubTask</span>(<span class="hljs-title class_ inherited__">BaseModel</span>):
    <span class="hljs-string">"""
    å­ä»»åŠ¡æ•°æ®æ¨¡å‹

    å®šä¹‰äº†ä»å¤æ‚ç”¨æˆ·è¯·æ±‚ä¸­æ‹†è§£å‡ºæ¥çš„ç‹¬ç«‹å·¥ä½œå•å…ƒã€‚
    æ¯ä¸ªå­ä»»åŠ¡éƒ½è¢«åˆ†é…ç»™ç‰¹å®šç±»å‹çš„ä¸“å®¶ Agent æ‰§è¡Œã€‚
    """</span>
    task_id: <span class="hljs-built_in">str</span>  <span class="hljs-comment"># ä»»åŠ¡å”¯ä¸€æ ‡è¯†ç¬¦ (ä¾‹å¦‚: "task_01")</span>
    description: <span class="hljs-built_in">str</span>  <span class="hljs-comment"># ä»»åŠ¡çš„è¯¦ç»†æ‰§è¡Œè¯´æ˜å’Œç›®æ ‡</span>
    agent_type: <span class="hljs-type">Literal</span>[
        <span class="hljs-string">"research"</span>,   <span class="hljs-comment"># ä¿¡æ¯è°ƒç ”ä¸æ”¶é›†</span>
        <span class="hljs-string">"analysis"</span>,   <span class="hljs-comment"># æ•°æ®åˆ†æä¸å¤„ç†</span>
        <span class="hljs-string">"writing"</span>,    <span class="hljs-comment"># å†…å®¹åˆ›ä½œä¸æ’°å†™</span>
        <span class="hljs-string">"coding"</span>,     <span class="hljs-comment"># ä»£ç å¼€å‘ä¸å®ç°</span>
        <span class="hljs-string">"planning"</span>,   <span class="hljs-comment"># è®¡åˆ’åˆ¶å®šä¸è®¾è®¡</span>
        <span class="hljs-string">"qa"</span>          <span class="hljs-comment"># è´¨é‡æ£€æŸ¥ä¸å®¡æ ¸</span>
    ]
    priority: <span class="hljs-built_in">int</span> = Field(ge=<span class="hljs-number">1</span>, le=<span class="hljs-number">5</span>, default=<span class="hljs-number">3</span>)  <span class="hljs-comment"># ä¼˜å…ˆçº§ï¼ˆ1æœ€ä½ï¼Œ5æœ€é«˜ï¼‰</span>
    dependencies: <span class="hljs-type">List</span>[<span class="hljs-built_in">str</span>] = Field(default_factory=<span class="hljs-built_in">list</span>)  <span class="hljs-comment"># å‰ç½®ä¾èµ–ä»»åŠ¡ ID</span>

    <span class="hljs-comment"># æ‰§è¡Œé…ç½®</span>
    temperature: <span class="hljs-type">Optional</span>[<span class="hljs-built_in">float</span>] = <span class="hljs-literal">None</span>  <span class="hljs-comment"># è¦†ç›–é»˜è®¤æ¸©åº¦</span>
    tools: <span class="hljs-type">Optional</span>[<span class="hljs-type">List</span>[<span class="hljs-built_in">str</span>]] = <span class="hljs-literal">None</span>    <span class="hljs-comment"># æŒ‡å®šå¯ç”¨å·¥å…·</span>
</code></pre>
<p><strong>è®¾è®¡äº®ç‚¹</strong>ï¼š</p>
<ul>
<li>âœ… ä½¿ç”¨ <code>Literal</code> é™åˆ¶ agent_typeï¼Œé¿å…æ‹¼å†™é”™è¯¯</li>
<li>âœ… ä½¿ç”¨ <code>Field</code> æ·»åŠ éªŒè¯è§„åˆ™ï¼ˆä¼˜å…ˆçº§ 1-5ï¼‰</li>
<li>âœ… æ”¯æŒæ¸©åº¦å’Œå·¥å…·çš„ç»†ç²’åº¦æ§åˆ¶</li>
<li>âœ… é»˜è®¤å€¼å’Œå·¥å‚å‡½æ•°ç¡®ä¿å®‰å…¨æ€§</li>
</ul>
<h5 data-id="heading-23">2. SubAgentResult æ¨¡å‹</h5>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> datetime <span class="hljs-keyword">import</span> datetime

<span class="hljs-keyword">class</span> <span class="hljs-title class_">SubAgentResult</span>(<span class="hljs-title class_ inherited__">BaseModel</span>):
    <span class="hljs-string">"""å­ Agent æ‰§è¡Œç»“æœ"""</span>
    task_id: <span class="hljs-built_in">str</span>                    <span class="hljs-comment"># å¯¹åº”çš„ä»»åŠ¡ ID</span>
    agent_type: <span class="hljs-built_in">str</span>                 <span class="hljs-comment"># æ‰§è¡Œçš„ Agent ç±»å‹</span>
    success: <span class="hljs-built_in">bool</span>                   <span class="hljs-comment"># æ‰§è¡Œæ˜¯å¦æˆåŠŸ</span>
    output: <span class="hljs-built_in">str</span>                     <span class="hljs-comment"># æ‰§è¡Œç»“æœå†…å®¹</span>
    error_message: <span class="hljs-type">Optional</span>[<span class="hljs-built_in">str</span>] = <span class="hljs-literal">None</span>  <span class="hljs-comment"># é”™è¯¯ä¿¡æ¯ï¼ˆå¦‚æœå¤±è´¥ï¼‰</span>
    execution_time: <span class="hljs-built_in">float</span> = <span class="hljs-number">0.0</span>     <span class="hljs-comment"># æ‰§è¡Œè€—æ—¶ï¼ˆç§’ï¼‰</span>
    timestamp: <span class="hljs-built_in">str</span> = Field(
        default_factory=<span class="hljs-keyword">lambda</span>: datetime.now().isoformat()
    )

    <span class="hljs-comment"># å…ƒæ•°æ®</span>
    model_used: <span class="hljs-type">Optional</span>[<span class="hljs-built_in">str</span>] = <span class="hljs-literal">None</span>     <span class="hljs-comment"># ä½¿ç”¨çš„æ¨¡å‹</span>
    tokens_used: <span class="hljs-type">Optional</span>[<span class="hljs-built_in">int</span>] = <span class="hljs-literal">None</span>    <span class="hljs-comment"># æ¶ˆè€—çš„ tokens</span>
    confidence: <span class="hljs-type">Optional</span>[<span class="hljs-built_in">float</span>] = <span class="hljs-literal">None</span>   <span class="hljs-comment"># ç»“æœç½®ä¿¡åº¦ï¼ˆ0-1ï¼‰</span>
</code></pre>
<h5 data-id="heading-24">3. DelegationPlan æ¨¡å‹</h5>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">DelegationPlan</span>(<span class="hljs-title class_ inherited__">BaseModel</span>):
    <span class="hljs-string">"""å§”æ´¾è®¡åˆ’"""</span>
    sub_tasks: <span class="hljs-type">List</span>[SubTask]          <span class="hljs-comment"># å­ä»»åŠ¡åˆ—è¡¨</span>
    execution_order: <span class="hljs-type">List</span>[<span class="hljs-built_in">str</span>]        <span class="hljs-comment"># ä»»åŠ¡ ID çš„æ‰§è¡Œé¡ºåºï¼ˆæ‹“æ‰‘æ’åºåï¼‰</span>
    rationale: <span class="hljs-built_in">str</span>                    <span class="hljs-comment"># è®¡åˆ’åˆ¶å®šçš„ç†ç”±</span>

    <span class="hljs-comment"># æ‰§è¡Œç­–ç•¥</span>
    parallel_groups: <span class="hljs-type">Optional</span>[<span class="hljs-type">List</span>[<span class="hljs-type">List</span>[<span class="hljs-built_in">str</span>]]] = <span class="hljs-literal">None</span>  <span class="hljs-comment"># å¯å¹¶è¡Œæ‰§è¡Œçš„ä»»åŠ¡ç»„</span>
    estimated_time: <span class="hljs-type">Optional</span>[<span class="hljs-built_in">float</span>] = <span class="hljs-literal">None</span>             <span class="hljs-comment"># é¢„ä¼°æ€»è€—æ—¶</span>

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">validate_dependencies</span>(<span class="hljs-params">self</span>) -&gt; <span class="hljs-built_in">bool</span>:
        <span class="hljs-string">"""éªŒè¯ä¾èµ–å…³ç³»æ˜¯å¦æœ‰æ•ˆ"""</span>
        task_ids = {t.task_id <span class="hljs-keyword">for</span> t <span class="hljs-keyword">in</span> self.sub_tasks}
        <span class="hljs-keyword">for</span> task <span class="hljs-keyword">in</span> self.sub_tasks:
            <span class="hljs-keyword">for</span> dep <span class="hljs-keyword">in</span> task.dependencies:
                <span class="hljs-keyword">if</span> dep <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> task_ids:
                    <span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">f"ä»»åŠ¡ <span class="hljs-subst">{task.task_id}</span> ä¾èµ–çš„ <span class="hljs-subst">{dep}</span> ä¸å­˜åœ¨"</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span>

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">detect_circular_dependency</span>(<span class="hljs-params">self</span>) -&gt; <span class="hljs-type">Optional</span>[<span class="hljs-type">List</span>[<span class="hljs-built_in">str</span>]]:
        <span class="hljs-string">"""æ£€æµ‹å¾ªç¯ä¾èµ–"""</span>
        <span class="hljs-comment"># DFS å®ç°</span>
        visited = <span class="hljs-built_in">set</span>()
        rec_stack = <span class="hljs-built_in">set</span>()

        <span class="hljs-keyword">def</span> <span class="hljs-title function_">has_cycle</span>(<span class="hljs-params">task_id: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">bool</span>:
            visited.add(task_id)
            rec_stack.add(task_id)

            task = <span class="hljs-built_in">next</span>(t <span class="hljs-keyword">for</span> t <span class="hljs-keyword">in</span> self.sub_tasks <span class="hljs-keyword">if</span> t.task_id == task_id)
            <span class="hljs-keyword">for</span> dep <span class="hljs-keyword">in</span> task.dependencies:
                <span class="hljs-keyword">if</span> dep <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> visited:
                    <span class="hljs-keyword">if</span> has_cycle(dep):
                        <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span>
                <span class="hljs-keyword">elif</span> dep <span class="hljs-keyword">in</span> rec_stack:
                    <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span>

            rec_stack.remove(task_id)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span>

        <span class="hljs-keyword">for</span> task <span class="hljs-keyword">in</span> self.sub_tasks:
            <span class="hljs-keyword">if</span> task.task_id <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> visited:
                <span class="hljs-keyword">if</span> has_cycle(task.task_id):
                    <span class="hljs-keyword">return</span> <span class="hljs-built_in">list</span>(rec_stack)
        <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>
</code></pre>
<h5 data-id="heading-25">4. DelegationState æ¨¡å‹</h5>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">DelegationState</span>(<span class="hljs-title class_ inherited__">BaseModel</span>):
    <span class="hljs-string">"""å…¨å±€çŠ¶æ€å¯¹è±¡ï¼Œåœ¨å·¥ä½œæµçš„æ‰€æœ‰èŠ‚ç‚¹é—´ä¼ é€’"""</span>

    <span class="hljs-comment"># è¾“å…¥</span>
    user_request: <span class="hljs-built_in">str</span>                <span class="hljs-comment"># ç”¨æˆ·åŸå§‹éœ€æ±‚ï¼ˆåªè¯»ï¼‰</span>

    <span class="hljs-comment"># è§„åˆ’é˜¶æ®µ</span>
    delegation_plan: <span class="hljs-type">Optional</span>[DelegationPlan] = <span class="hljs-literal">None</span>  <span class="hljs-comment"># å§”æ´¾è®¡åˆ’</span>

    <span class="hljs-comment"># æ‰§è¡Œé˜¶æ®µ</span>
    sub_agent_results: <span class="hljs-type">Dict</span>[<span class="hljs-built_in">str</span>, SubAgentResult] = Field(
        default_factory=<span class="hljs-built_in">dict</span>
    )  <span class="hljs-comment"># æ‰§è¡Œç»“æœï¼ˆtask_id -&gt; resultï¼‰</span>
    completed_tasks: <span class="hljs-type">List</span>[<span class="hljs-built_in">str</span>] = Field(
        default_factory=<span class="hljs-built_in">list</span>
    )  <span class="hljs-comment"># å·²å®Œæˆä»»åŠ¡ ID åˆ—è¡¨</span>
    failed_tasks: <span class="hljs-type">List</span>[<span class="hljs-built_in">str</span>] = Field(
        default_factory=<span class="hljs-built_in">list</span>
    )  <span class="hljs-comment"># å¤±è´¥ä»»åŠ¡ ID åˆ—è¡¨</span>

    <span class="hljs-comment"># èšåˆé˜¶æ®µ</span>
    final_report: <span class="hljs-type">Optional</span>[<span class="hljs-built_in">str</span>] = <span class="hljs-literal">None</span>  <span class="hljs-comment"># æœ€ç»ˆæ•´åˆæŠ¥å‘Š</span>

    <span class="hljs-comment"># å…ƒæ•°æ®</span>
    workflow_start_time: <span class="hljs-type">Optional</span>[<span class="hljs-built_in">str</span>] = <span class="hljs-literal">None</span>
    workflow_end_time: <span class="hljs-type">Optional</span>[<span class="hljs-built_in">str</span>] = <span class="hljs-literal">None</span>
    total_tokens_used: <span class="hljs-built_in">int</span> = <span class="hljs-number">0</span>
</code></pre>
<hr/>
<p><a id="user-content-subagent-types" title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target="/></p>
<h3 data-id="heading-26">6 ç§ SubAgent Type è¯¦è§£</h3>
<p>æ¯ç§ SubAgent ç±»å‹éƒ½ç»è¿‡ä¸“é—¨ä¼˜åŒ–ï¼Œé’ˆå¯¹ç‰¹å®šé¢†åŸŸã€‚</p>
<h4 data-id="heading-27">1. Research Agent - ä¿¡æ¯è°ƒç ”ä¸“å®¶</h4>
<p><strong>é…ç½®</strong>ï¼š</p>
<pre><code class="hljs language-python" lang="python">RESEARCH_AGENT_CONFIG = {
    <span class="hljs-string">"temperature"</span>: <span class="hljs-number">0.5</span>,  <span class="hljs-comment"># å¹³è¡¡ç²¾ç¡®æ€§å’Œå¤šæ ·æ€§</span>
    <span class="hljs-string">"tools"</span>: [<span class="hljs-string">"web_search"</span>, <span class="hljs-string">"arxiv_search"</span>, <span class="hljs-string">"file_read"</span>],
    <span class="hljs-string">"system_prompt"</span>: <span class="hljs-string">"""
ä½ æ˜¯ä¸€ä½ä¸“ä¸šçš„ç ”ç©¶å‘˜ï¼Œæ“…é•¿ä¿¡æ¯æ”¶é›†å’Œæ•´ç†ã€‚

ä½ çš„èŒè´£ï¼š
1. æ·±å…¥ç ”ç©¶ç»™å®šä¸»é¢˜
2. æ”¶é›†æƒå¨æ¥æºçš„ä¿¡æ¯
3. æ•´ç†å…³é”®å‘ç°
4. æä¾›å¼•ç”¨æ¥æº

ç ”ç©¶æ–¹æ³•ï¼š
- ä½¿ç”¨ web_search æŸ¥æ‰¾æœ€æ–°ä¿¡æ¯
- ä½¿ç”¨ arxiv_search æŸ¥æ‰¾å­¦æœ¯è®ºæ–‡
- ä½¿ç”¨ file_read é˜…è¯»æœ¬åœ°æ–‡æ¡£
- äº¤å‰éªŒè¯å¤šä¸ªæ¥æº
- æ ‡æ³¨ä¿¡æ¯çš„å¯ä¿¡åº¦

è¾“å‡ºæ ¼å¼ï¼š
## ç ”ç©¶ä¸»é¢˜
[ä¸»é¢˜æè¿°]

## å…³é”®å‘ç°
1. [å‘ç° 1]
   - æ¥æºï¼š[URL/æ–‡çŒ®]
   - å¯ä¿¡åº¦ï¼š[é«˜/ä¸­/ä½]

2. [å‘ç° 2]
   ...

## å‚è€ƒèµ„æ–™
- [æ¥æº 1]
- [æ¥æº 2]
"""</span>
}
</code></pre>
<p><strong>ä½¿ç”¨åœºæ™¯</strong>ï¼š</p>
<ul>
<li>æŠ€æœ¯è°ƒç ”ï¼ˆ"ç ”ç©¶ Python è£…é¥°å™¨çš„æœ€ä½³å®è·µ"ï¼‰</li>
<li>å¸‚åœºåˆ†æï¼ˆ"è°ƒç ” AI Agent å¸‚åœºç°çŠ¶"ï¼‰</li>
<li>æ–‡çŒ®ç»¼è¿°ï¼ˆ"æ€»ç»“é‡å­è®¡ç®—æœ€æ–°è¿›å±•"ï¼‰</li>
<li>ç«å“åˆ†æï¼ˆ"åˆ†æä¸»è¦ LLM æ¡†æ¶çš„ç‰¹ç‚¹"ï¼‰</li>
</ul>
<p><strong>å®é™…ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-python" lang="python">research_task = SubTask(
    task_id=<span class="hljs-string">"task_research_1"</span>,
    description=<span class="hljs-string">"ç ”ç©¶ LangGraph çš„æ ¸å¿ƒæ¦‚å¿µå’Œæœ€ä½³å®è·µ"</span>,
    agent_type=<span class="hljs-string">"research"</span>,
    priority=<span class="hljs-number">5</span>,
    dependencies=[]
)

<span class="hljs-comment"># Research Agent çš„è¾“å‡ºç¤ºä¾‹</span>
result = <span class="hljs-string">"""
## ç ”ç©¶ä¸»é¢˜
LangGraph çš„æ ¸å¿ƒæ¦‚å¿µå’Œæœ€ä½³å®è·µ

## å…³é”®å‘ç°
1. **StateGraph æ˜¯æ ¸å¿ƒæŠ½è±¡**
   - æ¥æºï¼šhttps://langchain-ai.github.io/langgraph/
   - å¯ä¿¡åº¦ï¼šé«˜ï¼ˆå®˜æ–¹æ–‡æ¡£ï¼‰
   - StateGraph é€šè¿‡èŠ‚ç‚¹å’Œè¾¹å®šä¹‰å·¥ä½œæµ
   - æ¯ä¸ªèŠ‚ç‚¹æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œæ¥æ”¶å’Œè¿”å›çŠ¶æ€

2. **çŠ¶æ€ç®¡ç†æœºåˆ¶**
   - æ¥æºï¼šLangGraph Tutorial
   - å¯ä¿¡åº¦ï¼šé«˜
   - ä½¿ç”¨ TypedDict æˆ– Pydantic Model å®šä¹‰çŠ¶æ€
   - çŠ¶æ€åœ¨èŠ‚ç‚¹é—´ä¼ é€’ï¼Œæ”¯æŒå¢é‡æ›´æ–°

3. **æœ€ä½³å®è·µ**
   - æ¥æºï¼šç¤¾åŒºå®è·µæ€»ç»“
   - å¯ä¿¡åº¦ï¼šä¸­
   - ä½¿ç”¨ Pydantic Model è·å¾—æ›´å¥½çš„ç±»å‹æ£€æŸ¥
   - èŠ‚ç‚¹å‡½æ•°ä¿æŒçº¯å‡½æ•°ç‰¹æ€§
   - ä½¿ç”¨æ¡ä»¶è¾¹å®ç°åŠ¨æ€è·¯ç”±

## å‚è€ƒèµ„æ–™
- https://langchain-ai.github.io/langgraph/
- https://github.com/langchain-ai/langgraph/examples
"""</span>
</code></pre>
<h4 data-id="heading-28">2. Analysis Agent - æ•°æ®åˆ†æä¸“å®¶</h4>
<p><strong>é…ç½®</strong>ï¼š</p>
<pre><code class="hljs language-python" lang="python">ANALYSIS_AGENT_CONFIG = {
    <span class="hljs-string">"temperature"</span>: <span class="hljs-number">0.3</span>,  <span class="hljs-comment"># æ›´ä½æ¸©åº¦ï¼Œå¼ºè°ƒç²¾ç¡®æ€§</span>
    <span class="hljs-string">"tools"</span>: [<span class="hljs-string">"python_repl"</span>, <span class="hljs-string">"data_visualization"</span>, <span class="hljs-string">"statistical_analysis"</span>],
    <span class="hljs-string">"system_prompt"</span>: <span class="hljs-string">"""
ä½ æ˜¯ä¸€ä½ä¸“ä¸šçš„æ•°æ®åˆ†æå¸ˆï¼Œæ“…é•¿æ•°æ®å¤„ç†å’Œæ´å¯Ÿæç‚¼ã€‚

ä½ çš„èŒè´£ï¼š
1. åˆ†æç»™å®šæ•°æ®æˆ–ä¿¡æ¯
2. è¯†åˆ«æ¨¡å¼å’Œè¶‹åŠ¿
3. è¿›è¡Œç»Ÿè®¡è®¡ç®—
4. æä¾›æ•°æ®æ”¯æŒçš„æ´å¯Ÿ

åˆ†ææ–¹æ³•ï¼š
- ä½¿ç”¨ python_repl è¿›è¡Œæ•°æ®å¤„ç†
- ä½¿ç”¨ pandas å¤„ç†ç»“æ„åŒ–æ•°æ®
- ä½¿ç”¨ numpy è¿›è¡Œæ•°å€¼è®¡ç®—
- ä½¿ç”¨ matplotlib/seaborn å¯è§†åŒ–
- åº”ç”¨ç»Ÿè®¡æ–¹æ³•éªŒè¯å‡è®¾

è¾“å‡ºæ ¼å¼ï¼š
## åˆ†æç›®æ ‡
[ç›®æ ‡æè¿°]

## æ•°æ®æ¦‚è§ˆ
- æ•°æ®æ¥æºï¼š[...]
- æ ·æœ¬é‡ï¼š[N]
- æ—¶é—´èŒƒå›´ï¼š[...]

## å…³é”®æŒ‡æ ‡
1. [æŒ‡æ ‡ 1]ï¼š[å€¼] (åŒæ¯” +X%)
2. [æŒ‡æ ‡ 2]ï¼š[å€¼] (ç¯æ¯” -Y%)

## æ·±åº¦åˆ†æ
### [åˆ†æç»´åº¦ 1]
[å‘ç°å’Œè§£é‡Š]

### [åˆ†æç»´åº¦ 2]
[å‘ç°å’Œè§£é‡Š]

## æ´å¯Ÿä¸å»ºè®®
1. [æ´å¯Ÿ 1] â†’ [å»ºè®® 1]
2. [æ´å¯Ÿ 2] â†’ [å»ºè®® 2]
"""</span>
}
</code></pre>
<p><strong>ä½¿ç”¨åœºæ™¯</strong>ï¼š</p>
<ul>
<li>ç”¨æˆ·è¡Œä¸ºåˆ†æï¼ˆ"åˆ†æç”¨æˆ·ç•™å­˜ç‡ä¸‹é™çš„åŸå› "ï¼‰</li>
<li>æ€§èƒ½åˆ†æï¼ˆ"åˆ†æç³»ç»Ÿæ€§èƒ½ç“¶é¢ˆ"ï¼‰</li>
<li>ä»£ç åˆ†æï¼ˆ"åˆ†æä»£ç å¤æ‚åº¦å’Œå¯ç»´æŠ¤æ€§"ï¼‰</li>
<li>è¶‹åŠ¿é¢„æµ‹ï¼ˆ"é¢„æµ‹ä¸‹å­£åº¦çš„å¢é•¿è¶‹åŠ¿"ï¼‰</li>
</ul>
<h4 data-id="heading-29">3. Writing Agent - å†…å®¹åˆ›ä½œä¸“å®¶</h4>
<p><strong>é…ç½®</strong>ï¼š</p>
<pre><code class="hljs language-python" lang="python">WRITING_AGENT_CONFIG = {
    <span class="hljs-string">"temperature"</span>: <span class="hljs-number">0.7</span>,  <span class="hljs-comment"># æ›´é«˜æ¸©åº¦ï¼Œå¼ºè°ƒåˆ›é€ æ€§</span>
    <span class="hljs-string">"tools"</span>: [<span class="hljs-string">"grammar_check"</span>, <span class="hljs-string">"readability_score"</span>, <span class="hljs-string">"style_guide"</span>],
    <span class="hljs-string">"system_prompt"</span>: <span class="hljs-string">"""
ä½ æ˜¯ä¸€ä½èµ„æ·±ä½œå®¶ï¼Œæ“…é•¿å†…å®¹åˆ›ä½œå’Œè¡¨è¾¾ã€‚

ä½ çš„èŒè´£ï¼š
1. æ’°å†™é«˜è´¨é‡çš„å†…å®¹
2. ç¡®ä¿é€»è¾‘æ¸…æ™°ã€è¡¨è¾¾æµç•…
3. é€‚é…ç›®æ ‡å—ä¼—
4. ä¿æŒä¸€è‡´çš„é£æ ¼å’Œè¯­æ°”

å†™ä½œåŸåˆ™ï¼š
- æ¸…æ™°ï¼šç®€æ´æ˜äº†ï¼Œé¿å…å†—ä½™
- è¿è´¯ï¼šé€»è¾‘æµç•…ï¼Œè¿‡æ¸¡è‡ªç„¶
- å‡†ç¡®ï¼šäº‹å®æ­£ç¡®ï¼Œå¼•ç”¨å¯é 
- å¸å¼•ï¼šå¼€å¤´å¼•äººï¼Œç»“å°¾æœ‰åŠ›
- é€‚é…ï¼šç¬¦åˆå—ä¼—èƒŒæ™¯å’Œéœ€æ±‚

è¾“å‡ºæ ¼å¼ï¼š
æ ¹æ®å†…å®¹ç±»å‹è°ƒæ•´æ ¼å¼ï¼š
- æŠ€æœ¯åšå®¢ï¼šæ ‡é¢˜ â†’ å¼•è¨€ â†’ æ­£æ–‡ï¼ˆå¤šçº§æ ‡é¢˜ï¼‰ â†’ æ€»ç»“
- æŠ€æœ¯æ–‡æ¡£ï¼šæ¦‚è¿° â†’ è¯¦ç»†è¯´æ˜ â†’ ç¤ºä¾‹ â†’ æ³¨æ„äº‹é¡¹
- è¥é”€æ–‡æ¡ˆï¼šç—›ç‚¹ â†’ æ–¹æ¡ˆ â†’ ä¼˜åŠ¿ â†’ è¡ŒåŠ¨å·å¬
"""</span>
}
</code></pre>
<p><strong>ä½¿ç”¨åœºæ™¯</strong>ï¼š</p>
<ul>
<li>æŠ€æœ¯åšå®¢ï¼ˆ"æ’°å†™å…³äº React Hooks çš„æ•™ç¨‹"ï¼‰</li>
<li>æŠ€æœ¯æ–‡æ¡£ï¼ˆ"ç¼–å†™ API ä½¿ç”¨æ–‡æ¡£"ï¼‰</li>
<li>è¥é”€æ–‡æ¡ˆï¼ˆ"æ’°å†™äº§å“ä»‹ç»"ï¼‰</li>
<li>æŠ¥å‘Šæ’°å†™ï¼ˆ"ç”Ÿæˆå­£åº¦ä¸šåŠ¡æŠ¥å‘Š"ï¼‰</li>
</ul>
<h4 data-id="heading-30">4. Coding Agent - ä»£ç å¼€å‘ä¸“å®¶</h4>
<p><strong>é…ç½®</strong>ï¼š</p>
<pre><code class="hljs language-python" lang="python">CODING_AGENT_CONFIG = {
    <span class="hljs-string">"temperature"</span>: <span class="hljs-number">0.2</span>,  <span class="hljs-comment"># æä½æ¸©åº¦ï¼Œç¡®ä¿ä»£ç å‡†ç¡®</span>
    <span class="hljs-string">"tools"</span>: [<span class="hljs-string">"code_executor"</span>, <span class="hljs-string">"linter"</span>, <span class="hljs-string">"formatter"</span>, <span class="hljs-string">"test_runner"</span>],
    <span class="hljs-string">"system_prompt"</span>: <span class="hljs-string">"""
ä½ æ˜¯ä¸€ä½é«˜çº§è½¯ä»¶å·¥ç¨‹å¸ˆï¼Œæ“…é•¿ç¼–å†™é«˜è´¨é‡ä»£ç ã€‚

ä½ çš„èŒè´£ï¼š
1. å®ç°ç»™å®šçš„åŠŸèƒ½éœ€æ±‚
2. ç¼–å†™æ¸…æ™°ã€å¯ç»´æŠ¤çš„ä»£ç 
3. éµå¾ªæœ€ä½³å®è·µå’Œç¼–ç è§„èŒƒ
4. ç¼–å†™å¿…è¦çš„æ³¨é‡Šå’Œæ–‡æ¡£

ç¼–ç åŸåˆ™ï¼š
- DRY (Don't Repeat Yourself)
- SOLID åŸåˆ™
- æ¸…æ™°å‘½å
- é€‚å½“æ³¨é‡Š
- é”™è¯¯å¤„ç†
- æ€§èƒ½è€ƒè™‘
- å®‰å…¨æ„è¯†

è¾“å‡ºæ ¼å¼ï¼š
## åŠŸèƒ½è¯´æ˜
[åŠŸèƒ½æè¿°]

## ä»£ç å®ç°
```python
[ä»£ç ]
</span></code></pre>
<h3 data-id="heading-31">ä½¿ç”¨ç¤ºä¾‹</h3>
<pre><code class="hljs language-python" lang="python">[ç¤ºä¾‹ä»£ç ]
</code></pre>
<h3 data-id="heading-32">æ³¨æ„äº‹é¡¹</h3>
<ul>
<li>[æ³¨æ„ç‚¹ 1]</li>
<li>[æ³¨æ„ç‚¹ 2]
"""
}</li>
</ul>
<pre><code class="hljs language-ini" lang="ini">
**ä½¿ç”¨åœºæ™¯**ï¼š
- åŠŸèƒ½å®ç°ï¼ˆ"å®ç°ç”¨æˆ·ç™»å½•åŠŸèƒ½"ï¼‰
- Bug ä¿®å¤ï¼ˆ"ä¿®å¤å†…å­˜æ³„æ¼é—®é¢˜"ï¼‰
- ä»£ç é‡æ„ï¼ˆ"é‡æ„è¿™æ®µä»£ç æå‡å¯è¯»æ€§"ï¼‰
- è„šæœ¬ç¼–å†™ï¼ˆ"ç¼–å†™æ•°æ®è¿ç§»è„šæœ¬"ï¼‰

<span class="hljs-comment">### 5. Planning Agent - è®¡åˆ’åˆ¶å®šä¸“å®¶</span>

**é…ç½®**ï¼š
```python
<span class="hljs-attr">PLANNING_AGENT_CONFIG</span> = {
    "temperature": 0.4,  <span class="hljs-comment"># å¹³è¡¡åˆ›é€ æ€§å’Œç»“æ„æ€§</span>
    "tools": <span class="hljs-section">["diagram_generator", "timeline_creator"]</span>,
    "system_prompt": """
ä½ æ˜¯ä¸€ä½é¡¹ç›®è§„åˆ’ä¸“å®¶ï¼Œæ“…é•¿ä»»åŠ¡åˆ†è§£å’Œè®¡åˆ’åˆ¶å®šã€‚

ä½ çš„èŒè´£ï¼š
1. åˆ†æå¤æ‚éœ€æ±‚
2. åˆ†è§£ä¸ºå¯æ‰§è¡Œçš„å­ä»»åŠ¡
3. è¯†åˆ«ä»»åŠ¡é—´çš„ä¾èµ–å…³ç³»
4. åˆ¶å®šåˆç†çš„æ‰§è¡Œè®¡åˆ’

è§„åˆ’åŸåˆ™ï¼š
- MECE åŸåˆ™ï¼ˆç›¸äº’ç‹¬ç«‹ï¼Œå®Œå…¨ç©·å°½ï¼‰
- ç”±ç²—åˆ°ç»†ï¼Œé€æ­¥ç»†åŒ–
- æ˜ç¡®ä¾èµ–å…³ç³»
- è€ƒè™‘é£é™©å› ç´ 
- é¢„ç•™ç¼“å†²æ—¶é—´

è¾“å‡ºæ ¼å¼ï¼š
<span class="hljs-comment">## éœ€æ±‚åˆ†æ</span>
<span class="hljs-section">[éœ€æ±‚æ¦‚è¿°]</span>

<span class="hljs-comment">## ä»»åŠ¡åˆ†è§£</span>
1. <span class="hljs-section">[ä»»åŠ¡ 1]</span>
   - ç›®æ ‡ï¼š<span class="hljs-section">[...]</span>
   - äº§å‡ºï¼š<span class="hljs-section">[...]</span>
   - ä¾èµ–ï¼š<span class="hljs-section">[...]</span>

2. <span class="hljs-section">[ä»»åŠ¡ 2]</span>
   ...

<span class="hljs-comment">## æ‰§è¡Œè®¡åˆ’</span>
é˜¶æ®µ 1ï¼š<span class="hljs-section">[åç§°]</span>
â”œâ”€ ä»»åŠ¡ A
â”œâ”€ ä»»åŠ¡ B
â””â”€ ä»»åŠ¡ C

é˜¶æ®µ 2ï¼š<span class="hljs-section">[åç§°]</span>
...

<span class="hljs-comment">## é£é™©è¯„ä¼°</span>
- <span class="hljs-section">[é£é™© 1]</span> â†’ <span class="hljs-section">[åº”å¯¹æªæ–½]</span>
- <span class="hljs-section">[é£é™© 2]</span> â†’ <span class="hljs-section">[åº”å¯¹æªæ–½]</span>
"""
}
</code></pre>
<p><strong>ä½¿ç”¨åœºæ™¯</strong>ï¼š</p>
<ul>
<li>é¡¹ç›®è§„åˆ’ï¼ˆ"è§„åˆ’æ–°åŠŸèƒ½çš„å¼€å‘è®¡åˆ’"ï¼‰</li>
<li>å­¦ä¹ è®¡åˆ’ï¼ˆ"åˆ¶å®š Python å­¦ä¹ è·¯çº¿"ï¼‰</li>
<li>è¿ç§»è®¡åˆ’ï¼ˆ"è§„åˆ’ç³»ç»Ÿæ¶æ„è¿ç§»æ­¥éª¤"ï¼‰</li>
<li>ä¼˜åŒ–è®¡åˆ’ï¼ˆ"åˆ¶å®šæ€§èƒ½ä¼˜åŒ–æ–¹æ¡ˆ"ï¼‰</li>
</ul>
<h4 data-id="heading-33">6. QA Agent - è´¨é‡å®¡æ ¸ä¸“å®¶</h4>
<p><strong>é…ç½®</strong>ï¼š</p>
<pre><code class="hljs language-python" lang="python">QA_AGENT_CONFIG = {
    <span class="hljs-string">"temperature"</span>: <span class="hljs-number">0.3</span>,  <span class="hljs-comment"># ä½æ¸©åº¦ï¼Œç¡®ä¿ä¸¥æ ¼å®¡æ ¸</span>
    <span class="hljs-string">"tools"</span>: [<span class="hljs-string">"grammar_check"</span>, <span class="hljs-string">"fact_check"</span>, <span class="hljs-string">"plagiarism_check"</span>, <span class="hljs-string">"code_review"</span>],
    <span class="hljs-string">"system_prompt"</span>: <span class="hljs-string">"""
ä½ æ˜¯ä¸€ä½è´¨é‡å®¡æ ¸ä¸“å®¶ï¼Œæ“…é•¿å‘ç°é—®é¢˜å’Œæå‡ºæ”¹è¿›å»ºè®®ã€‚

ä½ çš„èŒè´£ï¼š
1. å®¡æ ¸å†…å®¹è´¨é‡
2. è¯†åˆ«é”™è¯¯å’Œé—®é¢˜
3. è¯„ä¼°ç¬¦åˆåº¦
4. æä¾›æ”¹è¿›å»ºè®®

å®¡æ ¸ç»´åº¦ï¼š
- å‡†ç¡®æ€§ï¼šäº‹å®æ˜¯å¦æ­£ç¡®
- å®Œæ•´æ€§ï¼šæ˜¯å¦é—æ¼é‡è¦å†…å®¹
- ä¸€è‡´æ€§ï¼šé£æ ¼å’Œæœ¯è¯­æ˜¯å¦ç»Ÿä¸€
- å¯è¯»æ€§ï¼šæ˜¯å¦æ¸…æ™°æ˜“æ‡‚
- åˆè§„æ€§ï¼šæ˜¯å¦ç¬¦åˆè¦æ±‚

è¾“å‡ºæ ¼å¼ï¼š
## å®¡æ ¸æ‘˜è¦
- å®¡æ ¸å¯¹è±¡ï¼š[...]
- å®¡æ ¸æ ‡å‡†ï¼š[...]
- æ€»ä½“è¯„åˆ†ï¼š[X/10]

## å‘ç°çš„é—®é¢˜
### ä¸¥é‡é—®é¢˜ï¼ˆMust Fixï¼‰
1. [é—®é¢˜æè¿°]
   - ä½ç½®ï¼š[...]
   - å½±å“ï¼š[...]
   - å»ºè®®ï¼š[...]

### ä¸€èˆ¬é—®é¢˜ï¼ˆShould Fixï¼‰
...

### ä¼˜åŒ–å»ºè®®ï¼ˆNice to Haveï¼‰
...

## ä¿®æ”¹åçš„ç‰ˆæœ¬
[ä¿®æ”¹åçš„å®Œæ•´å†…å®¹]
"""</span>
}
</code></pre>
<p><strong>ä½¿ç”¨åœºæ™¯</strong>ï¼š</p>
<ul>
<li>å†…å®¹å®¡æ ¸ï¼ˆ"å®¡æ ¸æŠ€æœ¯åšå®¢çš„è´¨é‡"ï¼‰</li>
<li>ä»£ç å®¡æŸ¥ï¼ˆ"å®¡æŸ¥ä»£ç çš„å®‰å…¨æ€§å’Œæ€§èƒ½"ï¼‰</li>
<li>æ–‡æ¡£å®¡æ ¸ï¼ˆ"å®¡æ ¸ API æ–‡æ¡£çš„å®Œæ•´æ€§"ï¼‰</li>
<li>åˆè§„æ£€æŸ¥ï¼ˆ"æ£€æŸ¥å†…å®¹æ˜¯å¦ç¬¦åˆè§„èŒƒ"ï¼‰</li>
</ul>
<hr/>
<h4 data-id="heading-34">Agent é…ç½®å¯¹æ¯”è¡¨</h4>






















































<table><thead><tr><th>Agent ç±»å‹</th><th>æ¸©åº¦</th><th>ä¸»è¦å·¥å…·</th><th>è¾“å‡ºç‰¹ç‚¹</th><th>å…¸å‹è€—æ—¶</th></tr></thead><tbody><tr><td><strong>Research</strong></td><td>0.5</td><td>web_search, arxiv</td><td>ä¿¡æ¯ä¸°å¯Œï¼Œæ¥æºå¯é </td><td>20-40s</td></tr><tr><td><strong>Analysis</strong></td><td>0.3</td><td>python_repl, visualization</td><td>æ•°æ®é©±åŠ¨ï¼Œæ´å¯Ÿæ·±åˆ»</td><td>15-30s</td></tr><tr><td><strong>Writing</strong></td><td>0.7</td><td>grammar_check, style_guide</td><td>æµç•…æ˜“è¯»ï¼Œç»“æ„æ¸…æ™°</td><td>10-25s</td></tr><tr><td><strong>Coding</strong></td><td>0.2</td><td>code_executor, linter</td><td>å‡†ç¡®å¯é ï¼Œè§„èŒƒæ ‡å‡†</td><td>15-35s</td></tr><tr><td><strong>Planning</strong></td><td>0.4</td><td>diagram_generator</td><td>ç»“æ„å®Œæ•´ï¼Œé€»è¾‘æ¸…æ™°</td><td>10-20s</td></tr><tr><td><strong>QA</strong></td><td>0.3</td><td>fact_check, plagiarism</td><td>ä¸¥æ ¼ç»†è‡´ï¼Œå»ºè®®å…·ä½“</td><td>10-20s</td></tr></tbody></table>
<p><strong>æ¸©åº¦è®¾ç½®çš„åŸç†</strong>ï¼š</p>
<ul>
<li><strong>ä½æ¸©åº¦ï¼ˆ0.2-0.3ï¼‰</strong>ï¼šè¾“å‡ºæ›´ç¡®å®šã€æ›´ä¸€è‡´ï¼Œé€‚åˆä»£ç ã€åˆ†æã€å®¡æ ¸</li>
<li><strong>ä¸­æ¸©åº¦ï¼ˆ0.4-0.5ï¼‰</strong>ï¼šå¹³è¡¡åˆ›é€ æ€§å’Œå‡†ç¡®æ€§ï¼Œé€‚åˆç ”ç©¶ã€è§„åˆ’</li>
<li><strong>é«˜æ¸©åº¦ï¼ˆ0.6-0.7ï¼‰</strong>ï¼šè¾“å‡ºæ›´å¤šæ ·ã€æ›´åˆ›é€ æ€§ï¼Œé€‚åˆå†™ä½œã€å¤´è„‘é£æš´</li>
</ul>
<hr/>
<p><a id="user-content-state-management" title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target="/></p>
<h3 data-id="heading-35">çŠ¶æ€ç®¡ç†ä¸ä¸Šä¸‹æ–‡ä¼ é€’</h3>
<p>å­ Agent æ´¾ç”Ÿç³»ç»Ÿé€šè¿‡ <code>DelegationState</code> å¯¹è±¡ç®¡ç†å…¨å±€çŠ¶æ€ã€‚</p>
<h4 data-id="heading-36">çŠ¶æ€æ¼”è¿›æ—¶é—´çº¿</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># t0: åˆå§‹åŒ–</span>
state = DelegationState(
    user_request=<span class="hljs-string">"å†™ä¸€ç¯‡å…³äº Python è£…é¥°å™¨çš„æŠ€æœ¯åšå®¢"</span>,
    delegation_plan=<span class="hljs-literal">None</span>,
    sub_agent_results={},
    completed_tasks=[],
    final_report=<span class="hljs-literal">None</span>
)

<span class="hljs-comment"># t1: è§„åˆ’é˜¶æ®µå®Œæˆ</span>
state.delegation_plan = DelegationPlan(
    sub_tasks=[
        SubTask(task_id=<span class="hljs-string">"task_1"</span>, agent_type=<span class="hljs-string">"research"</span>, ...),
        SubTask(task_id=<span class="hljs-string">"task_2"</span>, agent_type=<span class="hljs-string">"writing"</span>, ...),
        SubTask(task_id=<span class="hljs-string">"task_3"</span>, agent_type=<span class="hljs-string">"qa"</span>, ...)
    ],
    execution_order=[<span class="hljs-string">"task_1"</span>, <span class="hljs-string">"task_2"</span>, <span class="hljs-string">"task_3"</span>],
    rationale=<span class="hljs-string">"å…ˆç ”ç©¶æ”¶é›†ä¿¡æ¯ï¼Œå†åŸºäºç ”ç©¶ç»“æœæ’°å†™å†…å®¹ï¼Œæœ€åè¿›è¡Œè´¨é‡å®¡æ ¸"</span>
)

<span class="hljs-comment"># t2: ç¬¬ä¸€ä¸ªå­ä»»åŠ¡å®Œæˆ</span>
state.sub_agent_results[<span class="hljs-string">"task_1"</span>] = SubAgentResult(
    task_id=<span class="hljs-string">"task_1"</span>,
    agent_type=<span class="hljs-string">"research"</span>,
    success=<span class="hljs-literal">True</span>,
    output=<span class="hljs-string">"[ç ”ç©¶ç»“æœï¼šè£…é¥°å™¨çš„åŸç†ã€ç”¨æ³•ã€æœ€ä½³å®è·µ...]"</span>,
    execution_time=<span class="hljs-number">25.3</span>
)
state.completed_tasks = [<span class="hljs-string">"task_1"</span>]

<span class="hljs-comment"># t3: ç¬¬äºŒä¸ªå­ä»»åŠ¡å®Œæˆ</span>
state.sub_agent_results[<span class="hljs-string">"task_2"</span>] = SubAgentResult(
    task_id=<span class="hljs-string">"task_2"</span>,
    agent_type=<span class="hljs-string">"writing"</span>,
    success=<span class="hljs-literal">True</span>,
    output=<span class="hljs-string">"[æ–‡ç« å†…å®¹ï¼š# Python è£…é¥°å™¨å®Œå…¨æŒ‡å—\n\n...]"</span>,
    execution_time=<span class="hljs-number">18.7</span>
)
state.completed_tasks = [<span class="hljs-string">"task_1"</span>, <span class="hljs-string">"task_2"</span>]

<span class="hljs-comment"># t4: ç¬¬ä¸‰ä¸ªå­ä»»åŠ¡å®Œæˆ</span>
state.sub_agent_results[<span class="hljs-string">"task_3"</span>] = SubAgentResult(
    task_id=<span class="hljs-string">"task_3"</span>,
    agent_type=<span class="hljs-string">"qa"</span>,
    success=<span class="hljs-literal">True</span>,
    output=<span class="hljs-string">"[å®¡æ ¸ç»“æœï¼šå‘ç° 2 å¤„é—®é¢˜ï¼Œå·²ä¿®æ­£...]"</span>,
    execution_time=<span class="hljs-number">12.5</span>
)
state.completed_tasks = [<span class="hljs-string">"task_1"</span>, <span class="hljs-string">"task_2"</span>, <span class="hljs-string">"task_3"</span>]

<span class="hljs-comment"># t5: èšåˆé˜¶æ®µå®Œæˆ</span>
state.final_report = <span class="hljs-string">"""
# Python è£…é¥°å™¨å®Œå…¨æŒ‡å—

[æ•´åˆäº†ç ”ç©¶ã€å†™ä½œã€å®¡æ ¸çš„æœ€ç»ˆé«˜è´¨é‡å†…å®¹...]
"""</span>
</code></pre>
<h4 data-id="heading-37">ä¸Šä¸‹æ–‡ä¼ é€’æœºåˆ¶</h4>
<h5 data-id="heading-38">æ–¹å¼ 1ï¼šé€šè¿‡çŠ¶æ€å¯¹è±¡ä¼ é€’</h5>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">execute_sub_agents_node</span>(<span class="hljs-params">state: DelegationState</span>) -&gt; DelegationState:
    <span class="hljs-string">"""æ‰§è¡Œå­ Agent èŠ‚ç‚¹"""</span>

    <span class="hljs-keyword">for</span> task_id <span class="hljs-keyword">in</span> state.delegation_plan.execution_order:
        task = find_task_by_id(task_id, state.delegation_plan.sub_tasks)

        <span class="hljs-comment"># æ„å»ºä¸Šä¸‹æ–‡ï¼šåŒ…å«å‰ç½®ä»»åŠ¡çš„ç»“æœ</span>
        context = {
            <span class="hljs-string">"user_request"</span>: state.user_request,
            <span class="hljs-string">"previous_results"</span>: {}
        }

        <span class="hljs-comment"># æ·»åŠ ä¾èµ–ä»»åŠ¡çš„ç»“æœ</span>
        <span class="hljs-keyword">for</span> dep_id <span class="hljs-keyword">in</span> task.dependencies:
            dep_result = state.sub_agent_results.get(dep_id)
            <span class="hljs-keyword">if</span> dep_result <span class="hljs-keyword">and</span> dep_result.success:
                context[<span class="hljs-string">"previous_results"</span>][dep_id] = dep_result.output

        <span class="hljs-comment"># æ‰§è¡Œä»»åŠ¡ï¼Œä¼ å…¥ä¸Šä¸‹æ–‡</span>
        agent = get_agent(task.agent_type)
        result = agent.execute(task, context)

        <span class="hljs-comment"># æ›´æ–°çŠ¶æ€</span>
        state.sub_agent_results[task_id] = result
        <span class="hljs-keyword">if</span> result.success:
            state.completed_tasks.append(task_id)

    <span class="hljs-keyword">return</span> state
</code></pre>
<h5 data-id="heading-39">æ–¹å¼ 2ï¼šåœ¨æç¤ºè¯ä¸­åµŒå…¥ä¸Šä¸‹æ–‡</h5>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">WritingAgent</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">execute</span>(<span class="hljs-params">self, task: SubTask, context: <span class="hljs-type">Dict</span></span>) -&gt; SubAgentResult:
        <span class="hljs-comment"># æå–å‰ç½®ä»»åŠ¡çš„ç»“æœ</span>
        research_result = context[<span class="hljs-string">"previous_results"</span>].get(<span class="hljs-string">"task_research_1"</span>, <span class="hljs-string">""</span>)

        <span class="hljs-comment"># æ„å»ºæç¤ºè¯ï¼ŒåŒ…å«ä¸Šä¸‹æ–‡</span>
        prompt = <span class="hljs-string">f"""
ä½ æ˜¯ä¸€ä½èµ„æ·±æŠ€æœ¯ä½œå®¶ã€‚

ç”¨æˆ·éœ€æ±‚ï¼š
<span class="hljs-subst">{context[<span class="hljs-string">"user_request"</span>]}</span>

å½“å‰ä»»åŠ¡ï¼š
<span class="hljs-subst">{task.description}</span>

ç ”ç©¶æˆæœï¼ˆæ¥è‡ª Research Agentï¼‰ï¼š
<span class="hljs-subst">{research_result}</span>

è¯·åŸºäºä»¥ä¸Šç ”ç©¶æˆæœï¼Œæ’°å†™ä¸€ç¯‡é«˜è´¨é‡çš„æŠ€æœ¯åšå®¢æ–‡ç« ã€‚

è¦æ±‚ï¼š
1. ç»“æ„æ¸…æ™°ï¼Œé€»è¾‘æµç•…
2. åŒ…å«ä»£ç ç¤ºä¾‹
3. é€‚åˆä¸­çº§å¼€å‘è€…é˜…è¯»
4. é•¿åº¦ 2000-3000 å­—
"""</span>

        response = self.llm.invoke([HumanMessage(content=prompt)])

        <span class="hljs-keyword">return</span> SubAgentResult(
            task_id=task.task_id,
            agent_type=<span class="hljs-string">"writing"</span>,
            success=<span class="hljs-literal">True</span>,
            output=response.content.strip()
        )
</code></pre>
<hr/>
<p><a id="user-content-dependency-resolution" title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target="/></p>
<h3 data-id="heading-40">ä¾èµ–è§£æä¸æ‰§è¡Œé¡ºåº</h3>
<p>å­ Agent æ´¾ç”Ÿç³»ç»Ÿä½¿ç”¨ <strong>æ‹“æ‰‘æ’åº</strong> ç®—æ³•è‡ªåŠ¨è®¡ç®—ä»»åŠ¡çš„æ‰§è¡Œé¡ºåºã€‚</p>
<h4 data-id="heading-41">ä¾èµ–è§£æå¼•æ“</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> collections <span class="hljs-keyword">import</span> defaultdict, deque
<span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> <span class="hljs-type">List</span>, <span class="hljs-type">Dict</span>

<span class="hljs-keyword">class</span> <span class="hljs-title class_">DependencyEngine</span>:
    <span class="hljs-string">"""ä¾èµ–è§£æå¼•æ“"""</span>

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">resolve_execution_order</span>(<span class="hljs-params">
        self,
        tasks: <span class="hljs-type">List</span>[SubTask]
    </span>) -&gt; <span class="hljs-type">List</span>[<span class="hljs-built_in">str</span>]:
        <span class="hljs-string">"""
        åŸºäºä»»åŠ¡ä¾èµ–å…³ç³»è®¡ç®—æ‰§è¡Œé¡ºåº
        ä½¿ç”¨æ‹“æ‰‘æ’åºç®—æ³•ï¼ˆKahn's Algorithmï¼‰

        ç®—æ³•æ­¥éª¤ï¼š
        1. æ„å»ºä¾èµ–å›¾å’Œå…¥åº¦è¡¨
        2. æ‰¾åˆ°æ‰€æœ‰å…¥åº¦ä¸º 0 çš„ä»»åŠ¡ï¼ˆæ— ä¾èµ–ï¼‰
        3. ä¾æ¬¡å¤„ç†è¿™äº›ä»»åŠ¡ï¼Œæ›´æ–°ä¾èµ–å®ƒä»¬çš„ä»»åŠ¡çš„å…¥åº¦
        4. é‡å¤ç›´åˆ°æ‰€æœ‰ä»»åŠ¡éƒ½è¢«å¤„ç†

        Returns:
            List[str]: ä»»åŠ¡ ID çš„æ‰§è¡Œé¡ºåº

        Raises:
            ValueError: å¦‚æœæ£€æµ‹åˆ°å¾ªç¯ä¾èµ–
        """</span>
        <span class="hljs-comment"># æ„å»ºä¾èµ–å›¾</span>
        graph = defaultdict(<span class="hljs-built_in">list</span>)  <span class="hljs-comment"># task_id -&gt; [dependent_task_ids]</span>
        in_degree = defaultdict(<span class="hljs-built_in">int</span>)  <span class="hljs-comment"># task_id -&gt; å…¥åº¦ï¼ˆä¾èµ–æ•°é‡ï¼‰</span>

        <span class="hljs-comment"># åˆå§‹åŒ–</span>
        <span class="hljs-keyword">for</span> task <span class="hljs-keyword">in</span> tasks:
            <span class="hljs-keyword">if</span> task.task_id <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> in_degree:
                in_degree[task.task_id] = <span class="hljs-number">0</span>

            in_degree[task.task_id] += <span class="hljs-built_in">len</span>(task.dependencies)

            <span class="hljs-keyword">for</span> dep <span class="hljs-keyword">in</span> task.dependencies:
                graph[dep].append(task.task_id)

        <span class="hljs-comment"># æ‹“æ‰‘æ’åº</span>
        queue = deque([
            task.task_id
            <span class="hljs-keyword">for</span> task <span class="hljs-keyword">in</span> tasks
            <span class="hljs-keyword">if</span> in_degree[task.task_id] == <span class="hljs-number">0</span>
        ])
        execution_order = []

        <span class="hljs-keyword">while</span> queue:
            current = queue.popleft()
            execution_order.append(current)

            <span class="hljs-comment"># æ›´æ–°ä¾èµ–å½“å‰ä»»åŠ¡çš„æ‰€æœ‰ä»»åŠ¡</span>
            <span class="hljs-keyword">for</span> next_task <span class="hljs-keyword">in</span> graph[current]:
                in_degree[next_task] -= <span class="hljs-number">1</span>
                <span class="hljs-keyword">if</span> in_degree[next_task] == <span class="hljs-number">0</span>:
                    queue.append(next_task)

        <span class="hljs-comment"># æ£€æµ‹å¾ªç¯ä¾èµ–</span>
        <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(execution_order) != <span class="hljs-built_in">len</span>(tasks):
            <span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">"æ£€æµ‹åˆ°å¾ªç¯ä¾èµ–ï¼Œæ— æ³•æ‰§è¡Œ"</span>)

        <span class="hljs-keyword">return</span> execution_order

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">analyze_parallel_groups</span>(<span class="hljs-params">
        self,
        tasks: <span class="hljs-type">List</span>[SubTask]
    </span>) -&gt; <span class="hljs-type">List</span>[<span class="hljs-type">List</span>[<span class="hljs-built_in">str</span>]]:
        <span class="hljs-string">"""
        åˆ†æå“ªäº›ä»»åŠ¡å¯ä»¥å¹¶è¡Œæ‰§è¡Œ

        ç®—æ³•ï¼š
        1. æŒ‰æ‰§è¡Œé¡ºåºåˆ†ç»„
        2. åŒä¸€ç»„å†…çš„ä»»åŠ¡å¯ä»¥å¹¶è¡Œ

        Returns:
            List[List[str]]: ä»»åŠ¡ç»„åˆ—è¡¨ï¼Œæ¯ç»„å†…çš„ä»»åŠ¡å¯å¹¶è¡Œ
        """</span>
        execution_order = self.resolve_execution_order(tasks)
        task_map = {t.task_id: t <span class="hljs-keyword">for</span> t <span class="hljs-keyword">in</span> tasks}

        groups = []
        processed = <span class="hljs-built_in">set</span>()

        <span class="hljs-keyword">for</span> task_id <span class="hljs-keyword">in</span> execution_order:
            <span class="hljs-keyword">if</span> task_id <span class="hljs-keyword">in</span> processed:
                <span class="hljs-keyword">continue</span>

            <span class="hljs-comment"># æ‰¾åˆ°æ‰€æœ‰ä¾èµ–å·²æ»¡è¶³ä¸”æœªå¤„ç†çš„ä»»åŠ¡</span>
            current_group = []
            <span class="hljs-keyword">for</span> tid <span class="hljs-keyword">in</span> execution_order:
                <span class="hljs-keyword">if</span> tid <span class="hljs-keyword">in</span> processed:
                    <span class="hljs-keyword">continue</span>

                task = task_map[tid]
                <span class="hljs-comment"># æ£€æŸ¥ä¾èµ–æ˜¯å¦éƒ½å·²å®Œæˆ</span>
                <span class="hljs-keyword">if</span> <span class="hljs-built_in">all</span>(dep <span class="hljs-keyword">in</span> processed <span class="hljs-keyword">for</span> dep <span class="hljs-keyword">in</span> task.dependencies):
                    current_group.append(tid)

            <span class="hljs-keyword">if</span> current_group:
                groups.append(current_group)
                processed.update(current_group)

        <span class="hljs-keyword">return</span> groups
</code></pre>
<h4 data-id="heading-42">ä¾èµ–è§£æç¤ºä¾‹</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># å®šä¹‰ä»»åŠ¡</span>
tasks = [
    SubTask(
        task_id=<span class="hljs-string">"task_1"</span>,
        description=<span class="hljs-string">"ç ”ç©¶ Python è£…é¥°å™¨çš„åŸºæœ¬æ¦‚å¿µ"</span>,
        agent_type=<span class="hljs-string">"research"</span>,
        dependencies=[]  <span class="hljs-comment"># æ— ä¾èµ–</span>
    ),
    SubTask(
        task_id=<span class="hljs-string">"task_2"</span>,
        description=<span class="hljs-string">"åˆ†æè£…é¥°å™¨çš„é«˜çº§ç”¨æ³•"</span>,
        agent_type=<span class="hljs-string">"analysis"</span>,
        dependencies=[<span class="hljs-string">"task_1"</span>]  <span class="hljs-comment"># ä¾èµ– task_1</span>
    ),
    SubTask(
        task_id=<span class="hljs-string">"task_3"</span>,
        description=<span class="hljs-string">"ç¼–å†™è£…é¥°å™¨çš„ä»£ç ç¤ºä¾‹"</span>,
        agent_type=<span class="hljs-string">"coding"</span>,
        dependencies=[<span class="hljs-string">"task_1"</span>]  <span class="hljs-comment"># ä¾èµ– task_1</span>
    ),
    SubTask(
        task_id=<span class="hljs-string">"task_4"</span>,
        description=<span class="hljs-string">"æ’°å†™æŠ€æœ¯åšå®¢"</span>,
        agent_type=<span class="hljs-string">"writing"</span>,
        dependencies=[<span class="hljs-string">"task_2"</span>, <span class="hljs-string">"task_3"</span>]  <span class="hljs-comment"># ä¾èµ– task_2 å’Œ task_3</span>
    ),
    SubTask(
        task_id=<span class="hljs-string">"task_5"</span>,
        description=<span class="hljs-string">"è´¨é‡å®¡æ ¸"</span>,
        agent_type=<span class="hljs-string">"qa"</span>,
        dependencies=[<span class="hljs-string">"task_4"</span>]  <span class="hljs-comment"># ä¾èµ– task_4</span>
    )
]

<span class="hljs-comment"># è§£ææ‰§è¡Œé¡ºåº</span>
engine = DependencyEngine()
execution_order = engine.resolve(tasks)
<span class="hljs-comment"># ç»“æœ: ["task_1", "task_2", "task_3", "task_4", "task_5"]</span>

<span class="hljs-comment"># åˆ†æå¹¶è¡Œç»„</span>
parallel_groups = engine.analyze_parallel_groups(tasks)
<span class="hljs-comment"># ç»“æœ: [</span>
<span class="hljs-comment">#     ["task_1"],           # ç¬¬ä¸€æ‰¹ï¼šæ— ä¾èµ–</span>
<span class="hljs-comment">#     ["task_2", "task_3"], # ç¬¬äºŒæ‰¹ï¼šä¾èµ– task_1ï¼Œå¯å¹¶è¡Œ</span>
<span class="hljs-comment">#     ["task_4"],           # ç¬¬ä¸‰æ‰¹ï¼šä¾èµ– task_2 å’Œ task_3</span>
<span class="hljs-comment">#     ["task_5"]            # ç¬¬å››æ‰¹ï¼šä¾èµ– task_4</span>
<span class="hljs-comment"># ]</span>
</code></pre>
<h4 data-id="heading-43">å¯è§†åŒ–ä¾èµ–å…³ç³»</h4>
<pre><code class="hljs language-erlang" lang="erlang"><span class="hljs-function"><span class="hljs-title">task_1</span> <span class="hljs-params">(research)</span> â”€â”€â”€â”€â”€â”€â”
   â”‚                     â”‚
   â”œâ”€â†’ <span class="hljs-title">task_2</span> <span class="hljs-params">(analysis)</span> â”¤
   â”‚                     â”œâ”€â†’ <span class="hljs-title">task_4</span> <span class="hljs-params">(writing)</span> â”€â”€â†’ <span class="hljs-title">task_5</span> <span class="hljs-params">(qa)</span>
   â””â”€â†’ <span class="hljs-title">task_3</span> <span class="hljs-params">(coding)</span> â”€â”€â”˜

æ‰§è¡Œç­–ç•¥ï¼š
æ‰¹æ¬¡ 1: <span class="hljs-title">task_1</span>              <span class="hljs-params">(<span class="hljs-number">1</span> ä¸ªä»»åŠ¡)</span>
æ‰¹æ¬¡ 2: <span class="hljs-title">task_2</span>, <span class="hljs-title">task_3</span>      <span class="hljs-params">(<span class="hljs-number">2</span> ä¸ªä»»åŠ¡å¹¶è¡Œ)</span>
æ‰¹æ¬¡ 3: <span class="hljs-title">task_4</span>              <span class="hljs-params">(<span class="hljs-number">1</span> ä¸ªä»»åŠ¡)</span>
æ‰¹æ¬¡ 4: <span class="hljs-title">task_5</span>              <span class="hljs-params">(<span class="hljs-number">1</span> ä¸ªä»»åŠ¡)</span>

æ€»è€—æ—¶ï¼ˆä¸²è¡Œï¼‰: T1 + T2 + T3 + T4 + T5
æ€»è€—æ—¶ï¼ˆå¹¶è¡Œï¼‰: T1 + <span class="hljs-title">max</span><span class="hljs-params">(T2, T3)</span> + T4 + T5
åŠ é€Ÿæ¯”: ~1.5<span class="hljs-title">x</span> <span class="hljs-params">(å‡è®¾ T2 â‰ˆ T3)</span>
</span></code></pre>
<h4 data-id="heading-44">å¾ªç¯ä¾èµ–æ£€æµ‹</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># é”™è¯¯ç¤ºä¾‹ï¼šå¾ªç¯ä¾èµ–</span>
bad_tasks = [
    SubTask(task_id=<span class="hljs-string">"A"</span>, agent_type=<span class="hljs-string">"research"</span>, dependencies=[<span class="hljs-string">"B"</span>]),
    SubTask(task_id=<span class="hljs-string">"B"</span>, agent_type=<span class="hljs-string">"analysis"</span>, dependencies=[<span class="hljs-string">"C"</span>]),
    SubTask(task_id=<span class="hljs-string">"C"</span>, agent_type=<span class="hljs-string">"writing"</span>, dependencies=[<span class="hljs-string">"A"</span>])  <span class="hljs-comment"># å¾ªç¯ï¼</span>
]

<span class="hljs-keyword">try</span>:
    engine.resolve_execution_order(bad_tasks)
<span class="hljs-keyword">except</span> ValueError <span class="hljs-keyword">as</span> e:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"é”™è¯¯: <span class="hljs-subst">{e}</span>"</span>)
    <span class="hljs-comment"># è¾“å‡º: "é”™è¯¯: æ£€æµ‹åˆ°å¾ªç¯ä¾èµ–ï¼Œæ— æ³•æ‰§è¡Œ"</span>
</code></pre>
<hr/>
<p><a id="user-content-code-implementation" title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target="/></p>
<h2 data-id="heading-45">ç¬¬ä¸‰éƒ¨åˆ†ï¼šä»£ç å®ç° ğŸ’»</h2>
<p>ç°åœ¨è®©æˆ‘ä»¬åŠ¨æ‰‹å®ç°ä¸€ä¸ªå®Œæ•´çš„å­ Agent æ´¾ç”Ÿç³»ç»Ÿã€‚</p>
<p><a id="user-content-setup" title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target="/></p>
<h3 data-id="heading-46">ç¯å¢ƒå‡†å¤‡</h3>
<h4 data-id="heading-47">å®‰è£…ä¾èµ–</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ</span>
python -m venv venv
<span class="hljs-built_in">source</span> venv/bin/activate  <span class="hljs-comment"># Windows: venv\Scripts\activate</span>

<span class="hljs-comment"># å®‰è£…æ ¸å¿ƒä¾èµ–</span>
pip install langchain-core langchain-openai langchain-ollama
pip install langgraph pydantic python-dotenv
</code></pre>
<h4 data-id="heading-48">é…ç½®ç¯å¢ƒå˜é‡</h4>
<p>åˆ›å»º <code>.env</code> æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ä½¿ç”¨ OpenAI</span>
LLM_PROVIDER=openai
OPENAI_API_KEY=your_api_key_here
OPENAI_MODEL=gpt-4o-mini

<span class="hljs-comment"># æˆ–ä½¿ç”¨ Ollamaï¼ˆæœ¬åœ°ï¼‰</span>
<span class="hljs-comment"># LLM_PROVIDER=ollama</span>
<span class="hljs-comment"># OLLAMA_MODEL=llama3.1:8b</span>
<span class="hljs-comment"># OLLAMA_BASE_URL=http://localhost:11434</span>
</code></pre>
<h4 data-id="heading-49">LLM åˆå§‹åŒ–å·¥å…·å‡½æ•°</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># utils/llm_helper.py</span>
<span class="hljs-keyword">import</span> os
<span class="hljs-keyword">from</span> langchain_openai <span class="hljs-keyword">import</span> ChatOpenAI
<span class="hljs-keyword">from</span> langchain_ollama <span class="hljs-keyword">import</span> ChatOllama
<span class="hljs-keyword">from</span> dotenv <span class="hljs-keyword">import</span> load_dotenv

<span class="hljs-keyword">def</span> <span class="hljs-title function_">get_llm</span>(<span class="hljs-params">temperature: <span class="hljs-built_in">float</span> = <span class="hljs-number">0.3</span></span>):
    <span class="hljs-string">"""
    è·å– LLM å®ä¾‹ï¼ˆæ”¯æŒ OpenAI å’Œ Ollamaï¼‰

    Args:
        temperature: æ¸©åº¦å‚æ•°ï¼ˆ0-1ï¼‰

    Returns:
        LLM å®ä¾‹
    """</span>
    load_dotenv()
    provider = os.getenv(<span class="hljs-string">"LLM_PROVIDER"</span>, <span class="hljs-string">""</span>).lower()

    <span class="hljs-keyword">if</span> provider == <span class="hljs-string">"ollama"</span>:
        <span class="hljs-keyword">return</span> ChatOllama(
            model=os.getenv(<span class="hljs-string">"OLLAMA_MODEL"</span>, <span class="hljs-string">"llama3.1:8b"</span>),
            base_url=os.getenv(<span class="hljs-string">"OLLAMA_BASE_URL"</span>, <span class="hljs-string">"http://localhost:11434"</span>),
            temperature=temperature
        )
    <span class="hljs-keyword">else</span>:
        <span class="hljs-keyword">return</span> ChatOpenAI(
            model=os.getenv(<span class="hljs-string">"OPENAI_MODEL"</span>, <span class="hljs-string">"gpt-4o-mini"</span>),
            api_key=os.getenv(<span class="hljs-string">"OPENAI_API_KEY"</span>),
            temperature=temperature
        )
</code></pre>
<hr/>
<p><a id="user-content-subagent-implementation" title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target="/></p>
<h3 data-id="heading-50">SubAgent å®ç°</h3>
<h4 data-id="heading-51">åŸºç¡€ SubAgent ç±»</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># agents/base_agent.py</span>
<span class="hljs-keyword">from</span> abc <span class="hljs-keyword">import</span> ABC, abstractmethod
<span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> <span class="hljs-type">Dict</span>, <span class="hljs-type">Optional</span>
<span class="hljs-keyword">from</span> pydantic <span class="hljs-keyword">import</span> BaseModel
<span class="hljs-keyword">from</span> langchain_core.messages <span class="hljs-keyword">import</span> HumanMessage, SystemMessage
<span class="hljs-keyword">import</span> time

<span class="hljs-keyword">class</span> <span class="hljs-title class_">SubAgent</span>(<span class="hljs-title class_ inherited__">ABC</span>):
    <span class="hljs-string">"""SubAgent åŸºç±»"""</span>

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, agent_type: <span class="hljs-built_in">str</span>, temperature: <span class="hljs-built_in">float</span>, system_prompt: <span class="hljs-built_in">str</span></span>):
        self.agent_type = agent_type
        self.temperature = temperature
        self.system_prompt = system_prompt
        self.llm = get_llm(temperature)

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">execute</span>(<span class="hljs-params">self, task: SubTask, context: <span class="hljs-type">Dict</span></span>) -&gt; SubAgentResult:
        <span class="hljs-string">"""
        æ‰§è¡Œä»»åŠ¡çš„æ ‡å‡†åŒ–æ–¹æ³•

        Args:
            task: å­ä»»åŠ¡å¯¹è±¡
            context: ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼ˆåŒ…å«å‰ç½®ä»»åŠ¡ç»“æœï¼‰

        Returns:
            SubAgentResult: æ‰§è¡Œç»“æœ
        """</span>
        start_time = time.time()

        <span class="hljs-keyword">try</span>:
            <span class="hljs-comment"># æ„å»ºæç¤ºè¯</span>
            prompt = self._build_prompt(task, context)

            <span class="hljs-comment"># è°ƒç”¨ LLM</span>
            messages = [
                SystemMessage(content=self.system_prompt),
                HumanMessage(content=prompt)
            ]
            response = self.llm.invoke(messages)

            <span class="hljs-comment"># è®¡ç®—è€—æ—¶</span>
            execution_time = time.time() - start_time

            <span class="hljs-keyword">return</span> SubAgentResult(
                task_id=task.task_id,
                agent_type=self.agent_type,
                success=<span class="hljs-literal">True</span>,
                output=response.content.strip(),
                execution_time=execution_time,
                model_used=self.llm.model_name <span class="hljs-keyword">if</span> <span class="hljs-built_in">hasattr</span>(self.llm, <span class="hljs-string">'model_name'</span>) <span class="hljs-keyword">else</span> <span class="hljs-string">"unknown"</span>
            )

        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
            execution_time = time.time() - start_time
            <span class="hljs-keyword">return</span> SubAgentResult(
                task_id=task.task_id,
                agent_type=self.agent_type,
                success=<span class="hljs-literal">False</span>,
                output=<span class="hljs-string">""</span>,
                error_message=<span class="hljs-built_in">str</span>(e),
                execution_time=execution_time
            )

<span class="hljs-meta">    @abstractmethod</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">_build_prompt</span>(<span class="hljs-params">self, task: SubTask, context: <span class="hljs-type">Dict</span></span>) -&gt; <span class="hljs-built_in">str</span>:
        <span class="hljs-string">"""æ„å»ºé’ˆå¯¹æ€§çš„æç¤ºè¯ï¼ˆå­ç±»å®ç°ï¼‰"""</span>
        <span class="hljs-keyword">pass</span>
</code></pre>
<h4 data-id="heading-52">6 ç§å…·ä½“ Agent å®ç°</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># agents/research_agent.py</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ResearchAgent</span>(<span class="hljs-title class_ inherited__">SubAgent</span>):
    <span class="hljs-string">"""ç ”ç©¶å‹ Agent"""</span>

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):
        <span class="hljs-built_in">super</span>().__init__(
            agent_type=<span class="hljs-string">"research"</span>,
            temperature=<span class="hljs-number">0.5</span>,
            system_prompt=<span class="hljs-string">"""ä½ æ˜¯ä¸€ä½ä¸“ä¸šçš„ç ”ç©¶å‘˜ï¼Œæ“…é•¿ä¿¡æ¯æ”¶é›†å’Œæ•´ç†ã€‚

ä½ çš„èŒè´£ï¼š
1. æ·±å…¥ç ”ç©¶ç»™å®šä¸»é¢˜
2. æ”¶é›†æƒå¨æ¥æºçš„ä¿¡æ¯
3. æ•´ç†å…³é”®å‘ç°
4. æä¾›å¼•ç”¨æ¥æº

è¾“å‡ºæ ¼å¼ï¼š
## ç ”ç©¶ä¸»é¢˜
[ä¸»é¢˜æè¿°]

## å…³é”®å‘ç°
1. [å‘ç° 1]
   - æ¥æºï¼š[URL/æ–‡çŒ®]
   - å¯ä¿¡åº¦ï¼š[é«˜/ä¸­/ä½]

## å‚è€ƒèµ„æ–™
- [æ¥æº 1]
"""</span>
        )

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">_build_prompt</span>(<span class="hljs-params">self, task: SubTask, context: <span class="hljs-type">Dict</span></span>) -&gt; <span class="hljs-built_in">str</span>:
        prompt = <span class="hljs-string">f"""
ç”¨æˆ·éœ€æ±‚ï¼š<span class="hljs-subst">{context[<span class="hljs-string">'user_request'</span>]}</span>

å½“å‰ä»»åŠ¡ï¼š<span class="hljs-subst">{task.description}</span>

è¯·è¿›è¡Œæ·±å…¥ç ”ç©¶ï¼Œæä¾›è¯¦ç»†ã€å¯é çš„ä¿¡æ¯ã€‚
"""</span>
        <span class="hljs-keyword">return</span> prompt


<span class="hljs-comment"># agents/analysis_agent.py</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">AnalysisAgent</span>(<span class="hljs-title class_ inherited__">SubAgent</span>):
    <span class="hljs-string">"""åˆ†æå‹ Agent"""</span>

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):
        <span class="hljs-built_in">super</span>().__init__(
            agent_type=<span class="hljs-string">"analysis"</span>,
            temperature=<span class="hljs-number">0.3</span>,
            system_prompt=<span class="hljs-string">"""ä½ æ˜¯ä¸€ä½ä¸“ä¸šçš„æ•°æ®åˆ†æå¸ˆï¼Œæ“…é•¿æ•°æ®å¤„ç†å’Œæ´å¯Ÿæç‚¼ã€‚

è¾“å‡ºæ ¼å¼ï¼š
## åˆ†æç›®æ ‡
[ç›®æ ‡æè¿°]

## å…³é”®æŒ‡æ ‡
1. [æŒ‡æ ‡ 1]ï¼š[å€¼]

## æ·±åº¦åˆ†æ
[åˆ†æå†…å®¹]

## æ´å¯Ÿä¸å»ºè®®
1. [æ´å¯Ÿ] â†’ [å»ºè®®]
"""</span>
        )

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">_build_prompt</span>(<span class="hljs-params">self, task: SubTask, context: <span class="hljs-type">Dict</span></span>) -&gt; <span class="hljs-built_in">str</span>:
        <span class="hljs-comment"># è·å–å‰ç½®ä»»åŠ¡ç»“æœ</span>
        previous_results = context.get(<span class="hljs-string">"previous_results"</span>, {})
        context_text = <span class="hljs-string">"\n\n"</span>.join([
            <span class="hljs-string">f"## <span class="hljs-subst">{task_id}</span> çš„ç»“æœï¼š\n<span class="hljs-subst">{result}</span>"</span>
            <span class="hljs-keyword">for</span> task_id, result <span class="hljs-keyword">in</span> previous_results.items()
        ])

        prompt = <span class="hljs-string">f"""
ç”¨æˆ·éœ€æ±‚ï¼š<span class="hljs-subst">{context[<span class="hljs-string">'user_request'</span>]}</span>

å½“å‰ä»»åŠ¡ï¼š<span class="hljs-subst">{task.description}</span>

å‰ç½®ä¿¡æ¯ï¼š
<span class="hljs-subst">{context_text}</span>

è¯·åŸºäºä»¥ä¸Šä¿¡æ¯è¿›è¡Œæ·±åº¦åˆ†æã€‚
"""</span>
        <span class="hljs-keyword">return</span> prompt


<span class="hljs-comment"># agents/writing_agent.py</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">WritingAgent</span>(<span class="hljs-title class_ inherited__">SubAgent</span>):
    <span class="hljs-string">"""å†™ä½œå‹ Agent"""</span>

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):
        <span class="hljs-built_in">super</span>().__init__(
            agent_type=<span class="hljs-string">"writing"</span>,
            temperature=<span class="hljs-number">0.7</span>,
            system_prompt=<span class="hljs-string">"""ä½ æ˜¯ä¸€ä½èµ„æ·±ä½œå®¶ï¼Œæ“…é•¿å†…å®¹åˆ›ä½œå’Œè¡¨è¾¾ã€‚

å†™ä½œåŸåˆ™ï¼š
- æ¸…æ™°ï¼šç®€æ´æ˜äº†ï¼Œé¿å…å†—ä½™
- è¿è´¯ï¼šé€»è¾‘æµç•…ï¼Œè¿‡æ¸¡è‡ªç„¶
- å‡†ç¡®ï¼šäº‹å®æ­£ç¡®ï¼Œå¼•ç”¨å¯é 
- å¸å¼•ï¼šå¼€å¤´å¼•äººï¼Œç»“å°¾æœ‰åŠ›

è¾“å‡ºæ ¼å¼ï¼š
# [æ ‡é¢˜]

## [ç« èŠ‚ 1]
[å†…å®¹]

## [ç« èŠ‚ 2]
[å†…å®¹]
"""</span>
        )

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">_build_prompt</span>(<span class="hljs-params">self, task: SubTask, context: <span class="hljs-type">Dict</span></span>) -&gt; <span class="hljs-built_in">str</span>:
        previous_results = context.get(<span class="hljs-string">"previous_results"</span>, {})
        context_text = <span class="hljs-string">"\n\n"</span>.join([
            <span class="hljs-string">f"## å‚è€ƒææ–™ <span class="hljs-subst">{i+<span class="hljs-number">1</span>}</span>ï¼š\n<span class="hljs-subst">{result}</span>"</span>
            <span class="hljs-keyword">for</span> i, (task_id, result) <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(previous_results.items())
        ])

        prompt = <span class="hljs-string">f"""
ç”¨æˆ·éœ€æ±‚ï¼š<span class="hljs-subst">{context[<span class="hljs-string">'user_request'</span>]}</span>

å½“å‰ä»»åŠ¡ï¼š<span class="hljs-subst">{task.description}</span>

å‚è€ƒææ–™ï¼š
<span class="hljs-subst">{context_text}</span>

è¯·åŸºäºä»¥ä¸Šææ–™ï¼Œæ’°å†™é«˜è´¨é‡çš„å†…å®¹ã€‚
"""</span>
        <span class="hljs-keyword">return</span> prompt


<span class="hljs-comment"># agents/coding_agent.py</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">CodingAgent</span>(<span class="hljs-title class_ inherited__">SubAgent</span>):
    <span class="hljs-string">"""ç¼–ç å‹ Agent"""</span>

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):
        <span class="hljs-built_in">super</span>().__init__(
            agent_type=<span class="hljs-string">"coding"</span>,
            temperature=<span class="hljs-number">0.2</span>,
            system_prompt=<span class="hljs-string">"""ä½ æ˜¯ä¸€ä½é«˜çº§è½¯ä»¶å·¥ç¨‹å¸ˆï¼Œæ“…é•¿ç¼–å†™é«˜è´¨é‡ä»£ç ã€‚

ç¼–ç åŸåˆ™ï¼š
- DRY (Don't Repeat Yourself)
- SOLID åŸåˆ™
- æ¸…æ™°å‘½å
- é€‚å½“æ³¨é‡Š
- é”™è¯¯å¤„ç†

è¾“å‡ºæ ¼å¼ï¼š
## åŠŸèƒ½è¯´æ˜
[åŠŸèƒ½æè¿°]

## ä»£ç å®ç°
```python
[ä»£ç ]
</span></code></pre>
<h3 data-id="heading-53">ä½¿ç”¨ç¤ºä¾‹</h3>
<pre><code class="hljs language-python" lang="python">[ç¤ºä¾‹]
</code></pre>
<p>"""
)</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">_build_prompt</span>(<span class="hljs-params">self, task: SubTask, context: <span class="hljs-type">Dict</span></span>) -&gt; <span class="hljs-built_in">str</span>:
    previous_results = context.get(<span class="hljs-string">"previous_results"</span>, {})
    context_text = <span class="hljs-string">"\n\n"</span>.join([
        <span class="hljs-string">f"## <span class="hljs-subst">{task_id}</span> çš„è¾“å‡ºï¼š\n<span class="hljs-subst">{result}</span>"</span>
        <span class="hljs-keyword">for</span> task_id, result <span class="hljs-keyword">in</span> previous_results.items()
    ])

    prompt = <span class="hljs-string">f"""
</span></code></pre>
<p>ç”¨æˆ·éœ€æ±‚ï¼š{context['user_request']}</p>
<p>å½“å‰ä»»åŠ¡ï¼š{task.description}</p>
<p>ç›¸å…³ä¿¡æ¯ï¼š
{context_text}</p>
<p>è¯·å®ç°é«˜è´¨é‡çš„ä»£ç ã€‚
"""
return prompt</p>
<h2 data-id="heading-54">agents/planning_agent.py</h2>
<p>class PlanningAgent(SubAgent):
"""è§„åˆ’å‹ Agent"""</p>
<pre><code class="hljs language-ini" lang="ini">def __init__(self):
    super().__init__(
        <span class="hljs-attr">agent_type</span>=<span class="hljs-string">"planning"</span>,
        <span class="hljs-attr">temperature</span>=<span class="hljs-number">0.4</span>,
        <span class="hljs-attr">system_prompt</span>=<span class="hljs-string">"""ä½ æ˜¯ä¸€ä½é¡¹ç›®è§„åˆ’ä¸“å®¶ï¼Œæ“…é•¿ä»»åŠ¡åˆ†è§£å’Œè®¡åˆ’åˆ¶å®šã€‚
</span></code></pre>
<p>è§„åˆ’åŸåˆ™ï¼š</p>
<ul>
<li>MECE åŸåˆ™ï¼ˆç›¸äº’ç‹¬ç«‹ï¼Œå®Œå…¨ç©·å°½ï¼‰</li>
<li>ç”±ç²—åˆ°ç»†ï¼Œé€æ­¥ç»†åŒ–</li>
<li>æ˜ç¡®ä¾èµ–å…³ç³»</li>
</ul>
<p>è¾“å‡ºæ ¼å¼ï¼š</p>
<h3 data-id="heading-55">éœ€æ±‚åˆ†æ</h3>
<p>[éœ€æ±‚æ¦‚è¿°]</p>
<h3 data-id="heading-56">ä»»åŠ¡åˆ†è§£</h3>
<ol>
<li>[ä»»åŠ¡ 1]
<ul>
<li>ç›®æ ‡ï¼š[...]</li>
<li>ä¾èµ–ï¼š[...]</li>
</ul>
</li>
</ol>
<h3 data-id="heading-57">æ‰§è¡Œè®¡åˆ’</h3>
<p>[è®¡åˆ’è¯¦æƒ…]
"""
)</p>
<pre><code class="hljs language-php" lang="php">def <span class="hljs-title function_ invoke__">_build_prompt</span>(<span class="hljs-built_in">self</span>, <span class="hljs-attr">task</span>: SubTask, <span class="hljs-attr">context</span>: Dict) -&gt; str:
    prompt = f<span class="hljs-string">""</span><span class="hljs-string">"
</span></code></pre>
<p>ç”¨æˆ·éœ€æ±‚ï¼š{context['user_request']}</p>
<p>å½“å‰ä»»åŠ¡ï¼š{task.description}</p>
<p>è¯·åˆ¶å®šè¯¦ç»†çš„æ‰§è¡Œè®¡åˆ’ã€‚
"""
return prompt</p>
<h2 data-id="heading-58">agents/qa_agent.py</h2>
<p>class QAAgent(SubAgent):
"""è´¨é‡å®¡æ ¸ Agent"""</p>
<pre><code class="hljs language-ini" lang="ini">def __init__(self):
    super().__init__(
        <span class="hljs-attr">agent_type</span>=<span class="hljs-string">"qa"</span>,
        <span class="hljs-attr">temperature</span>=<span class="hljs-number">0.3</span>,
        <span class="hljs-attr">system_prompt</span>=<span class="hljs-string">"""ä½ æ˜¯ä¸€ä½è´¨é‡å®¡æ ¸ä¸“å®¶ï¼Œæ“…é•¿å‘ç°é—®é¢˜å’Œæå‡ºæ”¹è¿›å»ºè®®ã€‚
</span></code></pre>
<p>å®¡æ ¸ç»´åº¦ï¼š</p>
<ul>
<li>å‡†ç¡®æ€§ï¼šäº‹å®æ˜¯å¦æ­£ç¡®</li>
<li>å®Œæ•´æ€§ï¼šæ˜¯å¦é—æ¼é‡è¦å†…å®¹</li>
<li>ä¸€è‡´æ€§ï¼šé£æ ¼å’Œæœ¯è¯­æ˜¯å¦ç»Ÿä¸€</li>
<li>å¯è¯»æ€§ï¼šæ˜¯å¦æ¸…æ™°æ˜“æ‡‚</li>
</ul>
<p>è¾“å‡ºæ ¼å¼ï¼š</p>
<h3 data-id="heading-59">å®¡æ ¸æ‘˜è¦</h3>
<ul>
<li>æ€»ä½“è¯„åˆ†ï¼š[X/10]</li>
</ul>
<h3 data-id="heading-60">å‘ç°çš„é—®é¢˜</h3>
<h4 data-id="heading-61">ä¸¥é‡é—®é¢˜ï¼ˆMust Fixï¼‰</h4>
<ol>
<li>[é—®é¢˜]</li>
</ol>
<h4 data-id="heading-62">ä¸€èˆ¬é—®é¢˜ï¼ˆShould Fixï¼‰</h4>
<ol>
<li>[é—®é¢˜]</li>
</ol>
<h3 data-id="heading-63">ä¿®æ”¹åçš„ç‰ˆæœ¬</h3>
<p>[ä¿®æ”¹åçš„å®Œæ•´å†…å®¹]
"""
)</p>
<pre><code class="hljs language-ini" lang="ini">def _build_prompt(self, task: SubTask, context: Dict) -&gt; str:
    <span class="hljs-comment"># QA Agent éœ€è¦å®¡æ ¸å‰ä¸€ä¸ªä»»åŠ¡çš„è¾“å‡º</span>
    <span class="hljs-attr">previous_results</span> = context.get(<span class="hljs-string">"previous_results"</span>, {})

    <span class="hljs-comment"># æ‰¾åˆ°æœ€è¿‘çš„ä¸€ä¸ªä»»åŠ¡ç»“æœ</span>
    <span class="hljs-attr">content_to_review</span> = <span class="hljs-string">""</span>
    if task.dependencies:
        <span class="hljs-attr">last_dep</span> = task.dependencies[-<span class="hljs-number">1</span>]
        <span class="hljs-attr">content_to_review</span> = previous_results.get(last_dep, <span class="hljs-string">""</span>)

    <span class="hljs-attr">prompt</span> = f<span class="hljs-string">"""
</span></code></pre>
<p>ç”¨æˆ·éœ€æ±‚ï¼š{context['user_request']}</p>
<p>å½“å‰ä»»åŠ¡ï¼š{task.description}</p>
<p>éœ€è¦å®¡æ ¸çš„å†…å®¹ï¼š
{content_to_review}</p>
<p>è¯·è¿›è¡Œå…¨é¢å®¡æ ¸å¹¶æä¾›ä¿®æ”¹åçš„ç‰ˆæœ¬ã€‚
"""
return prompt</p>
<pre><code class="hljs language-python" lang="python">
<span class="hljs-comment">### SubAgent ç®¡ç†å™¨</span>

```python
<span class="hljs-comment"># agents/subagent_manager.py</span>
<span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> <span class="hljs-type">Dict</span>

<span class="hljs-keyword">class</span> <span class="hljs-title class_">SubAgentManager</span>:
    <span class="hljs-string">"""SubAgent ç®¡ç†å™¨"""</span>

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):
        <span class="hljs-comment"># æ³¨å†Œæ‰€æœ‰ Agent</span>
        self.agents: <span class="hljs-type">Dict</span>[<span class="hljs-built_in">str</span>, SubAgent] = {
            <span class="hljs-string">"research"</span>: ResearchAgent(),
            <span class="hljs-string">"analysis"</span>: AnalysisAgent(),
            <span class="hljs-string">"writing"</span>: WritingAgent(),
            <span class="hljs-string">"coding"</span>: CodingAgent(),
            <span class="hljs-string">"planning"</span>: PlanningAgent(),
            <span class="hljs-string">"qa"</span>: QAAgent()
        }

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_agent</span>(<span class="hljs-params">self, agent_type: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-type">Optional</span>[SubAgent]:
        <span class="hljs-string">"""è·å–æŒ‡å®šç±»å‹çš„ Agent"""</span>
        <span class="hljs-keyword">return</span> self.agents.get(agent_type)

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">execute_task</span>(<span class="hljs-params">self, task: SubTask, context: <span class="hljs-type">Dict</span></span>) -&gt; SubAgentResult:
        <span class="hljs-string">"""æ‰§è¡Œå•ä¸ªä»»åŠ¡"""</span>
        agent = self.get_agent(task.agent_type)

        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> agent:
            <span class="hljs-keyword">return</span> SubAgentResult(
                task_id=task.task_id,
                agent_type=task.agent_type,
                success=<span class="hljs-literal">False</span>,
                output=<span class="hljs-string">""</span>,
                error_message=<span class="hljs-string">f"æœªæ‰¾åˆ°ç±»å‹ä¸º <span class="hljs-subst">{task.agent_type}</span> çš„ Agent"</span>
            )

        <span class="hljs-keyword">return</span> agent.execute(task, context)
</code></pre>
<hr/>
<p><a id="user-content-langgraph-workflow" title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target="/></p>
<h3 data-id="heading-64">LangGraph å·¥ä½œæµ</h3>
<h4 data-id="heading-65">å·¥ä½œæµèŠ‚ç‚¹å®ç°</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># workflow/nodes.py</span>
<span class="hljs-keyword">import</span> json
<span class="hljs-keyword">import</span> re
<span class="hljs-keyword">from</span> langchain_core.messages <span class="hljs-keyword">import</span> HumanMessage

<span class="hljs-keyword">def</span> <span class="hljs-title function_">create_delegation_plan_node</span>(<span class="hljs-params">state: DelegationState</span>) -&gt; DelegationState:
    <span class="hljs-string">"""
    èŠ‚ç‚¹ 1ï¼šåˆ›å»ºå§”æ´¾è®¡åˆ’

    ä¸» Agent åˆ†æç”¨æˆ·è¯·æ±‚ï¼ŒåŠ¨æ€ç”Ÿæˆä»»åŠ¡åˆ†è§£è®¡åˆ’
    """</span>
    llm = get_llm(temperature=<span class="hljs-number">0.4</span>)

    prompt = <span class="hljs-string">f"""
ç”¨æˆ·éœ€æ±‚ï¼š<span class="hljs-subst">{state.user_request}</span>

è¯·å°†è¿™ä¸ªéœ€æ±‚åˆ†è§£ä¸ºå¤šä¸ªå­ä»»åŠ¡ï¼Œå¹¶åˆ¶å®šæ‰§è¡Œè®¡åˆ’ã€‚

å¯ç”¨çš„å­ Agent ç±»å‹ï¼š
- research: ä¿¡æ¯è°ƒç ”ä¸æ”¶é›†
- analysis: æ•°æ®åˆ†æä¸å¤„ç†
- writing: å†…å®¹åˆ›ä½œä¸æ’°å†™
- coding: ä»£ç å¼€å‘ä¸å®ç°
- planning: è®¡åˆ’åˆ¶å®šä¸è®¾è®¡
- qa: è´¨é‡æ£€æŸ¥ä¸å®¡æ ¸

è¯·è¾“å‡º JSON æ ¼å¼çš„è®¡åˆ’ï¼š
{{
  "sub_tasks": [
    {{
      "task_id": "task_1",
      "description": "ä»»åŠ¡æè¿°",
      "agent_type": "research",
      "priority": 5,
      "dependencies": []
    }},
    ...
  ],
  "execution_order": ["task_1", "task_2", ...],
  "rationale": "è®¡åˆ’ç†ç”±"
}}

è¦æ±‚ï¼š
1. ä»»åŠ¡è¦å…·ä½“ã€å¯æ‰§è¡Œ
2. æ­£ç¡®è®¾ç½®ä»»åŠ¡é—´çš„ä¾èµ–å…³ç³»
3. é¿å…å¾ªç¯ä¾èµ–
4. ä¼˜å…ˆçº§ 1-5ï¼Œ5 æœ€é«˜
"""</span>

    response = llm.invoke([HumanMessage(content=prompt)])

    <span class="hljs-comment"># æå– JSON</span>
    json_match = re.search(<span class="hljs-string">r'\{[\s\S]*\}'</span>, response.content)
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> json_match:
        <span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">"LLM æœªè¿”å›æœ‰æ•ˆçš„ JSON æ ¼å¼"</span>)

    plan_data = json.loads(json_match.group())

    <span class="hljs-comment"># æ„å»º DelegationPlan</span>
    sub_tasks = [SubTask(**task) <span class="hljs-keyword">for</span> task <span class="hljs-keyword">in</span> plan_data[<span class="hljs-string">"sub_tasks"</span>]]
    plan = DelegationPlan(
        sub_tasks=sub_tasks,
        execution_order=plan_data[<span class="hljs-string">"execution_order"</span>],
        rationale=plan_data.get(<span class="hljs-string">"rationale"</span>, <span class="hljs-string">""</span>)
    )

    <span class="hljs-comment"># éªŒè¯ä¾èµ–å…³ç³»</span>
    plan.validate_dependencies()

    <span class="hljs-comment"># æ£€æµ‹å¾ªç¯ä¾èµ–</span>
    circular = plan.detect_circular_dependency()
    <span class="hljs-keyword">if</span> circular:
        <span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">f"æ£€æµ‹åˆ°å¾ªç¯ä¾èµ–: <span class="hljs-subst">{circular}</span>"</span>)

    state.delegation_plan = plan
    <span class="hljs-keyword">return</span> state


<span class="hljs-keyword">def</span> <span class="hljs-title function_">execute_sub_agents_node</span>(<span class="hljs-params">state: DelegationState</span>) -&gt; DelegationState:
    <span class="hljs-string">"""
    èŠ‚ç‚¹ 2ï¼šæ‰§è¡Œå­ Agent

    æŒ‰ç…§æ‰§è¡Œé¡ºåºï¼Œä¾æ¬¡æ‰§è¡Œæ¯ä¸ªå­ä»»åŠ¡
    """</span>
    manager = SubAgentManager()

    <span class="hljs-keyword">for</span> task_id <span class="hljs-keyword">in</span> state.delegation_plan.execution_order:
        <span class="hljs-comment"># æŸ¥æ‰¾ä»»åŠ¡</span>
        task = <span class="hljs-built_in">next</span>(
            (t <span class="hljs-keyword">for</span> t <span class="hljs-keyword">in</span> state.delegation_plan.sub_tasks <span class="hljs-keyword">if</span> t.task_id == task_id),
            <span class="hljs-literal">None</span>
        )

        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> task:
            <span class="hljs-keyword">continue</span>

        <span class="hljs-comment"># æ£€æŸ¥ä¾èµ–æ˜¯å¦å·²å®Œæˆ</span>
        <span class="hljs-keyword">if</span> task.dependencies:
            pending_deps = [
                dep <span class="hljs-keyword">for</span> dep <span class="hljs-keyword">in</span> task.dependencies
                <span class="hljs-keyword">if</span> dep <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> state.completed_tasks
            ]
            <span class="hljs-keyword">if</span> pending_deps:
                <span class="hljs-built_in">print</span>(<span class="hljs-string">f"â¸ï¸  ä»»åŠ¡ <span class="hljs-subst">{task_id}</span> çš„ä¾èµ– <span class="hljs-subst">{pending_deps}</span> å°šæœªå®Œæˆï¼Œè·³è¿‡"</span>)
                <span class="hljs-keyword">continue</span>

        <span class="hljs-comment"># æ„å»ºä¸Šä¸‹æ–‡</span>
        context = {
            <span class="hljs-string">"user_request"</span>: state.user_request,
            <span class="hljs-string">"previous_results"</span>: {}
        }

        <span class="hljs-comment"># æ·»åŠ ä¾èµ–ä»»åŠ¡çš„ç»“æœ</span>
        <span class="hljs-keyword">for</span> dep_id <span class="hljs-keyword">in</span> task.dependencies:
            dep_result = state.sub_agent_results.get(dep_id)
            <span class="hljs-keyword">if</span> dep_result <span class="hljs-keyword">and</span> dep_result.success:
                context[<span class="hljs-string">"previous_results"</span>][dep_id] = dep_result.output

        <span class="hljs-comment"># æ‰§è¡Œä»»åŠ¡</span>
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ğŸš€ æ‰§è¡Œä»»åŠ¡ <span class="hljs-subst">{task_id}</span>: <span class="hljs-subst">{task.description}</span>"</span>)
        result = manager.execute_task(task, context)

        <span class="hljs-comment"># æ›´æ–°çŠ¶æ€</span>
        state.sub_agent_results[task_id] = result

        <span class="hljs-keyword">if</span> result.success:
            state.completed_tasks.append(task_id)
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"âœ… ä»»åŠ¡ <span class="hljs-subst">{task_id}</span> å®Œæˆ (è€—æ—¶: <span class="hljs-subst">{result.execution_time:<span class="hljs-number">.2</span>f}</span>s)"</span>)
        <span class="hljs-keyword">else</span>:
            state.failed_tasks.append(task_id)
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"âŒ ä»»åŠ¡ <span class="hljs-subst">{task_id}</span> å¤±è´¥: <span class="hljs-subst">{result.error_message}</span>"</span>)

    <span class="hljs-keyword">return</span> state


<span class="hljs-keyword">def</span> <span class="hljs-title function_">aggregate_results_node</span>(<span class="hljs-params">state: DelegationState</span>) -&gt; DelegationState:
    <span class="hljs-string">"""
    èŠ‚ç‚¹ 3ï¼šèšåˆç»“æœ

    ä¸» Agent æ•´åˆæ‰€æœ‰å­ Agent çš„è¾“å‡ºï¼Œç”Ÿæˆæœ€ç»ˆæŠ¥å‘Š
    """</span>
    llm = get_llm(temperature=<span class="hljs-number">0.5</span>)

    <span class="hljs-comment"># æå–æˆåŠŸçš„ä»»åŠ¡ç»“æœ</span>
    successful_results = []
    <span class="hljs-keyword">for</span> task_id <span class="hljs-keyword">in</span> state.completed_tasks:
        result = state.sub_agent_results.get(task_id)
        <span class="hljs-keyword">if</span> result <span class="hljs-keyword">and</span> result.success:
            task = <span class="hljs-built_in">next</span>(
                (t <span class="hljs-keyword">for</span> t <span class="hljs-keyword">in</span> state.delegation_plan.sub_tasks <span class="hljs-keyword">if</span> t.task_id == task_id),
                <span class="hljs-literal">None</span>
            )
            successful_results.append({
                <span class="hljs-string">"task_id"</span>: task_id,
                <span class="hljs-string">"task_description"</span>: task.description <span class="hljs-keyword">if</span> task <span class="hljs-keyword">else</span> <span class="hljs-string">""</span>,
                <span class="hljs-string">"agent_type"</span>: result.agent_type,
                <span class="hljs-string">"output"</span>: result.output
            })

    <span class="hljs-comment"># æ„å»ºèšåˆæç¤ºè¯</span>
    results_text = <span class="hljs-string">"\n\n"</span>.join([
        <span class="hljs-string">f"### ä»»åŠ¡ <span class="hljs-subst">{r[<span class="hljs-string">'task_id'</span>]}</span> - <span class="hljs-subst">{r[<span class="hljs-string">'task_description'</span>]}</span>\n"</span>
        <span class="hljs-string">f"**Agent ç±»å‹**: <span class="hljs-subst">{r[<span class="hljs-string">'agent_type'</span>]}</span>\n"</span>
        <span class="hljs-string">f"**è¾“å‡º**:\n<span class="hljs-subst">{r[<span class="hljs-string">'output'</span>]}</span>"</span>
        <span class="hljs-keyword">for</span> r <span class="hljs-keyword">in</span> successful_results
    ])

    prompt = <span class="hljs-string">f"""
ç”¨æˆ·åŸå§‹éœ€æ±‚ï¼š<span class="hljs-subst">{state.user_request}</span>

ä»¥ä¸‹æ˜¯å„ä¸ªä¸“ä¸š Agent çš„æ‰§è¡Œç»“æœï¼š

<span class="hljs-subst">{results_text}</span>

è¯·å°†è¿™äº›ç»“æœæ•´åˆæˆä¸€ä¸ªè¿è´¯ã€å®Œæ•´çš„æœ€ç»ˆæŠ¥å‘Šã€‚

è¦æ±‚ï¼š
1. ä¿ç•™æ‰€æœ‰å…³é”®ä¿¡æ¯
2. ç¡®ä¿é€»è¾‘æµç•…
3. é€‚å½“è°ƒæ•´ç»“æ„
4. çªå‡ºé‡ç‚¹å†…å®¹
"""</span>

    response = llm.invoke([HumanMessage(content=prompt)])
    state.final_report = response.content.strip()

    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\nğŸ“Š èšåˆå®Œæˆï¼Œå…±æ•´åˆ <span class="hljs-subst">{<span class="hljs-built_in">len</span>(successful_results)}</span> ä¸ªä»»åŠ¡çš„ç»“æœ"</span>)

    <span class="hljs-keyword">return</span> state
</code></pre>
<h4 data-id="heading-66">åˆ›å»ºå·¥ä½œæµ</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># workflow/graph.py</span>
<span class="hljs-keyword">from</span> langgraph.graph <span class="hljs-keyword">import</span> StateGraph, END

<span class="hljs-keyword">def</span> <span class="hljs-title function_">create_delegation_workflow</span>():
    <span class="hljs-string">"""åˆ›å»ºå­ Agent æ´¾ç”Ÿå·¥ä½œæµ"""</span>

    <span class="hljs-comment"># åˆ›å»ºçŠ¶æ€å›¾</span>
    graph = StateGraph(DelegationState)

    <span class="hljs-comment"># æ·»åŠ èŠ‚ç‚¹</span>
    graph.add_node(<span class="hljs-string">"plan"</span>, create_delegation_plan_node)
    graph.add_node(<span class="hljs-string">"execute"</span>, execute_sub_agents_node)
    graph.add_node(<span class="hljs-string">"aggregate"</span>, aggregate_results_node)

    <span class="hljs-comment"># å®šä¹‰è¾¹</span>
    graph.set_entry_point(<span class="hljs-string">"plan"</span>)
    graph.add_edge(<span class="hljs-string">"plan"</span>, <span class="hljs-string">"execute"</span>)
    graph.add_edge(<span class="hljs-string">"execute"</span>, <span class="hljs-string">"aggregate"</span>)
    graph.add_edge(<span class="hljs-string">"aggregate"</span>, END)

    <span class="hljs-comment"># ç¼–è¯‘</span>
    <span class="hljs-keyword">return</span> graph.<span class="hljs-built_in">compile</span>()
</code></pre>
<hr/>
<p><a id="user-content-complete-example" title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target="/></p>
<h3 data-id="heading-67">å®Œæ•´ç¤ºä¾‹</h3>
<h4 data-id="heading-68">ä¸»ç¨‹åº</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># main.py</span>
<span class="hljs-keyword">from</span> datetime <span class="hljs-keyword">import</span> datetime

<span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():
    <span class="hljs-string">"""ä¸»å‡½æ•°ï¼šæ¼”ç¤ºå®Œæ•´çš„å­ Agent æ´¾ç”Ÿæµç¨‹"""</span>

    <span class="hljs-comment"># ç”¨æˆ·è¯·æ±‚</span>
    user_request = <span class="hljs-string">"å†™ä¸€ç¯‡å…³äº Python è£…é¥°å™¨çš„æŠ€æœ¯åšå®¢ï¼ŒåŒ…æ‹¬åŸºæœ¬æ¦‚å¿µã€é«˜çº§ç”¨æ³•å’Œä»£ç ç¤ºä¾‹"</span>

    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\n<span class="hljs-subst">{<span class="hljs-string">'='</span>*<span class="hljs-number">60</span>}</span>"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ğŸ¯ ç”¨æˆ·è¯·æ±‚: <span class="hljs-subst">{user_request}</span>"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"<span class="hljs-subst">{<span class="hljs-string">'='</span>*<span class="hljs-number">60</span>}</span>\n"</span>)

    <span class="hljs-comment"># åˆ›å»ºå·¥ä½œæµ</span>
    workflow = create_delegation_workflow()

    <span class="hljs-comment"># åˆå§‹åŒ–çŠ¶æ€</span>
    initial_state = DelegationState(
        user_request=user_request,
        workflow_start_time=datetime.now().isoformat()
    )

    <span class="hljs-comment"># æ‰§è¡Œå·¥ä½œæµ</span>
    <span class="hljs-keyword">try</span>:
        final_state = workflow.invoke(initial_state)

        <span class="hljs-comment"># è¾“å‡ºç»“æœ</span>
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\n<span class="hljs-subst">{<span class="hljs-string">'='</span>*<span class="hljs-number">60</span>}</span>"</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ğŸ“ æœ€ç»ˆæŠ¥å‘Š"</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"<span class="hljs-subst">{<span class="hljs-string">'='</span>*<span class="hljs-number">60</span>}</span>\n"</span>)
        <span class="hljs-built_in">print</span>(final_state.final_report)

        <span class="hljs-comment"># ç»Ÿè®¡ä¿¡æ¯</span>
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\n<span class="hljs-subst">{<span class="hljs-string">'='</span>*<span class="hljs-number">60</span>}</span>"</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ğŸ“Š æ‰§è¡Œç»Ÿè®¡"</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"<span class="hljs-subst">{<span class="hljs-string">'='</span>*<span class="hljs-number">60</span>}</span>"</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ€»ä»»åŠ¡æ•°: <span class="hljs-subst">{<span class="hljs-built_in">len</span>(final_state.delegation_plan.sub_tasks)}</span>"</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æˆåŠŸä»»åŠ¡: <span class="hljs-subst">{<span class="hljs-built_in">len</span>(final_state.completed_tasks)}</span>"</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å¤±è´¥ä»»åŠ¡: <span class="hljs-subst">{<span class="hljs-built_in">len</span>(final_state.failed_tasks)}</span>"</span>)

        total_time = <span class="hljs-built_in">sum</span>(
            r.execution_time
            <span class="hljs-keyword">for</span> r <span class="hljs-keyword">in</span> final_state.sub_agent_results.values()
        )
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ€»è€—æ—¶: <span class="hljs-subst">{total_time:<span class="hljs-number">.2</span>f}</span>s"</span>)

    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\nâŒ æ‰§è¡Œå¤±è´¥: <span class="hljs-subst">{e}</span>"</span>)
        <span class="hljs-keyword">import</span> traceback
        traceback.print_exc()


<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    main()
</code></pre>
<h4 data-id="heading-69">è¿è¡Œç¤ºä¾‹</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># è¿è¡Œç¨‹åº</span>
python main.py
</code></pre>
<p><strong>è¾“å‡ºç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">============================================================
<span class="hljs-section">ğŸ¯ ç”¨æˆ·è¯·æ±‚: å†™ä¸€ç¯‡å…³äº Python è£…é¥°å™¨çš„æŠ€æœ¯åšå®¢ï¼ŒåŒ…æ‹¬åŸºæœ¬æ¦‚å¿µã€é«˜çº§ç”¨æ³•å’Œä»£ç ç¤ºä¾‹
============================================================</span>

ğŸš€ æ‰§è¡Œä»»åŠ¡ task<span class="hljs-emphasis">_1: ç ”ç©¶ Python è£…é¥°å™¨çš„åŸºæœ¬æ¦‚å¿µå’ŒåŸç†
âœ… ä»»åŠ¡ task_</span>1 å®Œæˆ (è€—æ—¶: 8.32s)

ğŸš€ æ‰§è¡Œä»»åŠ¡ task<span class="hljs-emphasis">_2: åˆ†æè£…é¥°å™¨çš„é«˜çº§ç”¨æ³•å’Œè®¾è®¡æ¨¡å¼
âœ… ä»»åŠ¡ task_</span>2 å®Œæˆ (è€—æ—¶: 6.78s)

ğŸš€ æ‰§è¡Œä»»åŠ¡ task<span class="hljs-emphasis">_3: ç¼–å†™è£…é¥°å™¨çš„ä»£ç ç¤ºä¾‹
âœ… ä»»åŠ¡ task_</span>3 å®Œæˆ (è€—æ—¶: 7.45s)

ğŸš€ æ‰§è¡Œä»»åŠ¡ task<span class="hljs-emphasis">_4: åŸºäºç ”ç©¶å’Œä»£ç ç¤ºä¾‹æ’°å†™æŠ€æœ¯åšå®¢
âœ… ä»»åŠ¡ task_</span>4 å®Œæˆ (è€—æ—¶: 12.34s)

ğŸš€ æ‰§è¡Œä»»åŠ¡ task<span class="hljs-emphasis">_5: å®¡æ ¸åšå®¢è´¨é‡å¹¶ä¼˜åŒ–
âœ… ä»»åŠ¡ task_</span>5 å®Œæˆ (è€—æ—¶: 8.91s)

ğŸ“Š èšåˆå®Œæˆï¼Œå…±æ•´åˆ 5 ä¸ªä»»åŠ¡çš„ç»“æœ

============================================================
<span class="hljs-section">ğŸ“ æœ€ç»ˆæŠ¥å‘Š
============================================================</span>

<span class="hljs-section"># Python è£…é¥°å™¨å®Œå…¨æŒ‡å—</span>

<span class="hljs-section">## 1. ä»€ä¹ˆæ˜¯è£…é¥°å™¨ï¼Ÿ</span>

è£…é¥°å™¨æ˜¯ Python ä¸­ä¸€ç§å¼ºå¤§çš„è®¾è®¡æ¨¡å¼ï¼Œå…è®¸æˆ‘ä»¬åœ¨ä¸ä¿®æ”¹åŸå‡½æ•°ä»£ç çš„æƒ…å†µä¸‹ï¼Œä¸ºå‡½æ•°æ·»åŠ é¢å¤–çš„åŠŸèƒ½...

[å®Œæ•´çš„æŠ€æœ¯åšå®¢å†…å®¹...]

============================================================
<span class="hljs-section">ğŸ“Š æ‰§è¡Œç»Ÿè®¡
============================================================</span>
æ€»ä»»åŠ¡æ•°: 5
æˆåŠŸä»»åŠ¡: 5
å¤±è´¥ä»»åŠ¡: 0
æ€»è€—æ—¶: 43.80s
</code></pre>
<hr/>
<h3 data-id="heading-70">æ€»ç»“</h3>
<p>æœ¬æ–‡æ·±å…¥ä»‹ç»äº† Claude Code ä¸­å­ Agent æ´¾ç”Ÿçš„å®ç°ï¼š</p>
<p><strong>æ ¸å¿ƒè¦ç‚¹</strong>ï¼š</p>
<ol>
<li>âœ… <strong>åŠ¨æ€æ´¾ç”Ÿ</strong> vs ç¡¬ç¼–ç ï¼šæ ¹æ®ä»»åŠ¡è‡ªåŠ¨è°ƒæ•´æµç¨‹</li>
<li>âœ… <strong>ä¸“ä¸šåŒ–åˆ†å·¥</strong>ï¼š6 ç§ Agent ç±»å‹ï¼Œå„æœ‰ä¸“é•¿</li>
<li>âœ… <strong>ä¾èµ–è§£æ</strong>ï¼šè‡ªåŠ¨è®¡ç®—æ‰§è¡Œé¡ºåºï¼Œæ”¯æŒå¹¶è¡Œ</li>
<li>âœ… <strong>çŠ¶æ€ç®¡ç†</strong>ï¼šç»“æ„åŒ–çš„ä¸Šä¸‹æ–‡ä¼ é€’æœºåˆ¶</li>
<li>âœ… <strong>æ€§èƒ½ä¼˜åŒ–</strong>ï¼šå¹¶è¡Œæ‰§è¡Œè·å¾— 1.5-2x åŠ é€Ÿ</li>
</ol>
<p><strong>å…³é”®æ”¶è·</strong>ï¼š</p>
<ul>
<li>ğŸ¯ ç†è§£äº†ä¸ºä»€ä¹ˆéœ€è¦åŠ¨æ€æ´¾ç”Ÿè€Œéç¡¬ç¼–ç </li>
<li>ğŸ”§ æŒæ¡äº†å®Œæ•´çš„å®ç°æ–¹æ³•å’Œä»£ç </li>
<li>âš¡ å­¦ä¼šäº†å¹¶è¡Œä¼˜åŒ–æå‡æ€§èƒ½</li>
<li>ğŸš€ äº†è§£äº†å®é™…åº”ç”¨åœºæ™¯å’Œæœ€ä½³å®è·µ</li>
</ul>
<p><strong>ä¸‹ä¸€æ­¥</strong>ï¼š</p>
<ol>
<li>å°è¯•è¿è¡Œç¤ºä¾‹ä»£ç </li>
<li>æ ¹æ®è‡ªå·±çš„éœ€æ±‚å®šåˆ¶ Agent ç±»å‹</li>
<li>å®ç°æ›´å¤æ‚çš„å·¥ä½œæµ</li>
<li>æ¢ç´¢ Lead Researcher ç­‰é«˜çº§æ¨¡å¼</li>
</ol>
<hr/>
<h3 data-id="heading-71">å‚è€ƒèµ„æº</h3>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Flangchain-ai.github.io%2Flanggraph%2F" target="_blank" title="https://langchain-ai.github.io/langgraph/" ref="nofollow noopener noreferrer">LangGraph å®˜æ–¹æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FkakaCat%2Flangchain-learn%2Ftree%2Fmain%2F10-agent-examples" target="_blank" title="https://github.com/kakaCat/langchain-learn/tree/main/10-agent-examples" ref="nofollow noopener noreferrer">å®Œæ•´ç¤ºä¾‹ä»£ç </a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fanthropics%2Fclaude-code" target="_blank" title="https://github.com/anthropics/claude-code" ref="nofollow noopener noreferrer">Claude Code æ–‡æ¡£</a></li>
</ul>
<hr/>
<p><strong>ğŸ“§ åé¦ˆä¸è®¨è®º</strong></p>
<p>å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œæ¬¢è¿åœ¨é¡¹ç›® GitHub æ Issueï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FkakaCat%2Flangchain-learn%2Fissues" target="_blank" title="https://github.com/kakaCat/langchain-learn/issues" ref="nofollow noopener noreferrer">langchain-learn/issues</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æœåŠ¡ç«¯æ¶æ„çš„æ¼”è¿›ä¸è®¾è®¡]]></title>    <link>https://juejin.cn/post/7593292445300670483</link>    <guid>https://juejin.cn/post/7593292445300670483</guid>    <pubDate>2026-01-11T02:33:19.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7593292445300670483" data-draft-id="7593296804108943400" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æœåŠ¡ç«¯æ¶æ„çš„æ¼”è¿›ä¸è®¾è®¡"/> <meta itemprop="keywords" content="åç«¯,æ¶æ„,è®¾è®¡"/> <meta itemprop="datePublished" content="2026-01-11T02:33:19.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸€çº¿å¤§ç "/> <meta itemprop="url" content="https://juejin.cn/user/3280598429340984"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æœåŠ¡ç«¯æ¶æ„çš„æ¼”è¿›ä¸è®¾è®¡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3280598429340984/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸€çº¿å¤§ç 
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-11T02:33:19.000Z" title="Sun Jan 11 2026 02:33:19 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»29åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="a11y-dark">.hljs-comment,.hljs-quote{color:#d4d0ab}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#ffa07a}.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#f5ab35}.hljs-attribute{color:gold}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:#abe338}.hljs-section,.hljs-title{color:#00e0e0}.hljs-keyword,.hljs-selector-tag{color:#dcc6e0}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#2b2b2b;color:#f8f8f2}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}@media screen and (-ms-high-contrast:active){.hljs-addition,.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-comment,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-quote,.hljs-string,.hljs-symbol,.hljs-type{color:highlight}.hljs-keyword,.hljs-selector-tag{font-weight:700}}</style><h2 data-id="heading-0">1. åŸºæœ¬æ¦‚å¿µ</h2>
<p>åœ¨ä»‹ç»æ¶æ„ä¹‹å‰ï¼Œä¸ºäº†é¿å…éƒ¨åˆ†è¯»è€…å¯¹æ¶æ„è®¾è®¡ä¸­çš„ä¸€äº›æ¦‚å¿µä¸äº†è§£ï¼Œä¸‹é¢å¯¹å‡ ä¸ªæœ€åŸºç¡€çš„æ¦‚å¿µè¿›è¡Œä»‹ç»ã€‚</p>
<p><strong>1ï¼‰ä»€ä¹ˆæ˜¯åˆ†å¸ƒå¼ï¼Ÿ</strong></p>
<p>ç³»ç»Ÿä¸­çš„å¤šä¸ªæ¨¡å—åœ¨ä¸åŒæœåŠ¡å™¨ä¸Šéƒ¨ç½²ï¼Œå³å¯ç§°ä¸ºåˆ†å¸ƒå¼ç³»ç»Ÿï¼Œå¦‚ Tomcat å’Œæ•°æ®åº“åˆ†åˆ«éƒ¨ç½²åœ¨ä¸åŒçš„æœåŠ¡å™¨ä¸Šï¼Œæˆ–ä¸¤ä¸ªç›¸åŒåŠŸèƒ½çš„ Tomcat åˆ†åˆ«éƒ¨ç½²åœ¨ä¸åŒæœåŠ¡å™¨ä¸Šã€‚</p>
<p><strong>2ï¼‰ä»€ä¹ˆæ˜¯é«˜å¯ç”¨ï¼Ÿ</strong></p>
<p>ç³»ç»Ÿä¸­éƒ¨åˆ†èŠ‚ç‚¹å¤±æ•ˆæ—¶ï¼Œå…¶ä»–èŠ‚ç‚¹èƒ½å¤Ÿæ¥æ›¿å®ƒç»§ç»­æä¾›æœåŠ¡ï¼Œåˆ™å¯è®¤ä¸ºç³»ç»Ÿå…·æœ‰é«˜å¯ç”¨æ€§ã€‚</p>
<p><strong>3ï¼‰ä»€ä¹ˆæ˜¯é›†ç¾¤ï¼Ÿ</strong></p>
<p>ä¸€ä¸ªç‰¹å®šé¢†åŸŸçš„è½¯ä»¶éƒ¨ç½²åœ¨å¤šå°æœåŠ¡å™¨ä¸Šå¹¶ä½œä¸ºä¸€ä¸ªæ•´ä½“æä¾›ä¸€ç±»æœåŠ¡ï¼Œè¿™ä¸ªæ•´ä½“ç§°ä¸ºé›†ç¾¤ã€‚</p>
<p>å¦‚ Zookeeper ä¸­çš„ Master å’Œ Slave åˆ†åˆ«éƒ¨ç½²åœ¨å¤šå°æœåŠ¡å™¨ä¸Šï¼Œå…±åŒç»„æˆä¸€ä¸ªæ•´ä½“æä¾›é›†ä¸­é…ç½®æœåŠ¡ã€‚</p>
<p>åœ¨å¸¸è§çš„é›†ç¾¤ä¸­ï¼Œå®¢æˆ·ç«¯å¾€å¾€èƒ½å¤Ÿè¿æ¥ä»»æ„ä¸€ä¸ªèŠ‚ç‚¹è·å¾—æœåŠ¡ï¼Œå¹¶ä¸”å½“é›†ç¾¤ä¸­ä¸€ä¸ªèŠ‚ç‚¹æ‰çº¿æ—¶ï¼Œå…¶ä»–èŠ‚ç‚¹å¾€å¾€èƒ½å¤Ÿè‡ªåŠ¨çš„æ¥æ›¿å®ƒç»§ç»­æä¾›æœåŠ¡ï¼Œè¿™æ—¶å€™è¯´æ˜é›†ç¾¤å…·æœ‰é«˜å¯ç”¨æ€§ã€‚</p>
<p><strong>4ï¼‰ä»€ä¹ˆæ˜¯è´Ÿè½½å‡è¡¡ï¼Ÿ</strong></p>
<p>è¯·æ±‚å‘é€åˆ°ç³»ç»Ÿæ—¶ï¼Œé€šè¿‡æŸäº›æ–¹å¼æŠŠè¯·æ±‚å‡åŒ€åˆ†å‘åˆ°å¤šä¸ªèŠ‚ç‚¹ä¸Šï¼Œä½¿ç³»ç»Ÿä¸­æ¯ä¸ªèŠ‚ç‚¹èƒ½å¤Ÿå‡åŒ€çš„å¤„ç†è¯·æ±‚è´Ÿè½½ï¼Œåˆ™å¯è®¤ä¸ºç³»ç»Ÿæ˜¯è´Ÿè½½å‡è¡¡çš„ã€‚</p>
<p><strong>5ï¼‰ä»€ä¹ˆæ˜¯æ­£å‘ä»£ç†å’Œåå‘ä»£ç†ï¼Ÿ</strong></p>
<p>ç³»ç»Ÿå†…éƒ¨è¦è®¿é—®å¤–éƒ¨ç½‘ç»œæ—¶ï¼Œç»Ÿä¸€é€šè¿‡ä¸€ä¸ªä»£ç†æœåŠ¡å™¨æŠŠè¯·æ±‚è½¬å‘å‡ºå»ï¼Œåœ¨å¤–éƒ¨ç½‘ç»œçœ‹æ¥å°±æ˜¯ä»£ç†æœåŠ¡å™¨å‘èµ·çš„è®¿é—®ï¼Œæ­¤æ—¶ä»£ç†æœåŠ¡å™¨å®ç°çš„æ˜¯æ­£å‘ä»£ç†ï¼›å½“å¤–éƒ¨è¯·æ±‚è¿›å…¥ç³»ç»Ÿæ—¶ï¼Œä»£ç†æœåŠ¡å™¨æŠŠè¯¥è¯·æ±‚è½¬å‘åˆ°ç³»ç»Ÿä¸­çš„æŸå°æœåŠ¡å™¨ä¸Šï¼Œå¯¹å¤–éƒ¨è¯·æ±‚æ¥è¯´ï¼Œä¸ä¹‹äº¤äº’çš„åªæœ‰ä»£ç†æœåŠ¡å™¨ï¼Œæ­¤æ—¶ä»£ç†æœåŠ¡å™¨å®ç°çš„æ˜¯åå‘ä»£ç†ã€‚</p>
<p>ç®€å•æ¥è¯´ï¼Œæ­£å‘ä»£ç†æ˜¯ä»£ç†æœåŠ¡å™¨ä»£æ›¿ç³»ç»Ÿå†…éƒ¨æ¥è®¿é—®å¤–éƒ¨ç½‘ç»œçš„è¿‡ç¨‹ï¼Œåå‘ä»£ç†æ˜¯å¤–éƒ¨è¯·æ±‚è®¿é—®ç³»ç»Ÿæ—¶é€šè¿‡ä»£ç†æœåŠ¡å™¨è½¬å‘åˆ°å†…éƒ¨æœåŠ¡å™¨çš„è¿‡ç¨‹ã€‚</p>
<h2 data-id="heading-1">2. æ¶æ„æ¼”è¿›</h2>
<p>æœåŠ¡æ¶æ„çš„æ¼”è¿›æ˜¯ä¸€ä¸ªä»ç®€å•åˆ°å¤æ‚ã€å†ä»å¤æ‚å›å½’ç®€å•ï¼ˆä½†å†…æ¶µä¸åŒï¼‰çš„å†ç¨‹ã€‚å…¶æ ¸å¿ƒé©±åŠ¨åŠ›å§‹ç»ˆæ˜¯ï¼š<strong>å¦‚ä½•æ›´é«˜æ•ˆåœ°åº”å¯¹ä¸šåŠ¡è§„æ¨¡çš„å¢é•¿ã€å›¢é˜Ÿçš„æ‰©å¼ ä»¥åŠæŠ€æœ¯çš„å˜é©</strong>ã€‚</p>
<p>ä»¥ä¸‹æ˜¯æœåŠ¡æ¶æ„æ¼”è¿›çš„ä¸»è¦é˜¶æ®µå’Œæ ¸å¿ƒç†å¿µï¼š</p>
<h3 data-id="heading-2">2.1. å•ä½“æ¶æ„</h3>
<p>è¿™æ˜¯æœ€ä¼ ç»Ÿçš„æ¶æ„æ¨¡å¼ã€‚</p>
<ul>
<li><strong>ç‰¹ç‚¹</strong>ï¼šæ‰€æœ‰åŠŸèƒ½æ¨¡å—ï¼ˆå¦‚ç”¨æˆ·ç®¡ç†ã€è®¢å•å¤„ç†ã€æ”¯ä»˜ç­‰ï¼‰éƒ½æ‰“åŒ…åœ¨ä¸€ä¸ªå•ä¸€çš„åº”ç”¨ç¨‹åºä¸­ï¼Œå…±äº«åŒä¸€ä¸ªæ•°æ®åº“ã€‚</li>
<li><strong>ä¼˜ç‚¹</strong>ï¼š
<ul>
<li><strong>å¼€å‘ç®€å•</strong>ï¼šåˆæœŸé¡¹ç›®æ­å»ºå¿«ï¼ŒIDEæ”¯æŒå¥½ï¼Œæ˜“äºè°ƒè¯•å’Œéƒ¨ç½²ã€‚</li>
<li><strong>æµ‹è¯•å®¹æ˜“</strong>ï¼šç«¯åˆ°ç«¯æµ‹è¯•å•ä¸€ã€‚</li>
<li><strong>éƒ¨ç½²æ–¹ä¾¿</strong>ï¼šåªéœ€æ‰“åŒ…ä¸€ä¸ªWAR/JARæ–‡ä»¶ï¼Œæ”¾åˆ°ä¸€ä¸ªæœåŠ¡å™¨ä¸Šå³å¯è¿è¡Œã€‚</li>
</ul>
</li>
<li><strong>ç¼ºç‚¹</strong>ï¼š
<ul>
<li><strong>ç»´æŠ¤æˆæœ¬é«˜</strong>ï¼šä»£ç è†¨èƒ€åï¼Œé€»è¾‘å¤æ‚ï¼Œå¯è¯»æ€§å·®ã€‚</li>
<li><strong>æŠ€æœ¯æ ˆåƒµåŒ–</strong>ï¼šéš¾ä»¥å¼•å…¥æ–°çš„æŠ€æœ¯æˆ–æ¡†æ¶ã€‚</li>
<li><strong>æ‰©å±•æ€§å·®</strong>ï¼šæ— æ³•æŒ‰éœ€æ‰©å±•æŸä¸ªæ¨¡å—ï¼Œåªèƒ½æ•´ä½“æ‰©å±•ï¼Œèµ„æºæµªè´¹ã€‚</li>
<li><strong>å¯é æ€§ä½</strong>ï¼šä¸€ä¸ªå¾®å°bugå¯èƒ½å¯¼è‡´æ•´ä¸ªç³»ç»Ÿå´©æºƒã€‚</li>
<li><strong>é˜»ç¢æŒç»­äº¤ä»˜</strong>ï¼šç‰µä¸€å‘è€ŒåŠ¨å…¨èº«ï¼Œä»»ä½•ä¿®æ”¹éƒ½éœ€è¦å…¨é‡å›å½’æµ‹è¯•å’Œéƒ¨ç½²ã€‚</li>
</ul>
</li>
<li><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šåˆ›ä¸šåˆæœŸã€å°å‹é¡¹ç›®ã€å†…éƒ¨å·¥å…·ã€‚</li>
</ul>
<pre><code class="hljs language-java" lang="java">+---------------------------------------------------+
|                      å•ä½“åº”ç”¨                      |
|  +--------+  +--------+  +--------+  +--------+   |
|  | æ¨¡å—A  |  | æ¨¡å—B   |  | æ¨¡å—C  |  | æ¨¡å—D   |  |
|  +--------+  +--------+  +--------+  +--------+   |
|                                                   |
|             +----------------------+              |
|             |      å…±äº«æ•°æ®åº“       |              |
|             +----------------------+              |
+---------------------------------------------------+
</code></pre>
<h3 data-id="heading-3">2.2. å‚ç›´æ¶æ„ï¼ˆä¹Ÿç§°â€œçƒŸå›±å¼æ¶æ„â€ï¼‰</h3>
<p>ä¸ºäº†è§£å†³å•ä½“çš„æ‰©å±•é—®é¢˜ï¼Œå¼€å§‹æŒ‰ä¸šåŠ¡è¿›è¡Œåˆ‡å‰²ã€‚</p>
<ul>
<li><strong>ç‰¹ç‚¹</strong>ï¼šå°†ä¸€ä¸ªå¤§çš„å•ä½“åº”ç”¨æ‹†åˆ†æˆå‡ ä¸ªäº’ä¸ç›¸å¹²çš„ç‹¬ç«‹åº”ç”¨ã€‚ä¾‹å¦‚åˆ†ä¸ºç”µå•†å‰å°ã€å•†å®¶åå°ã€è¿è¥åå°ã€‚</li>
<li><strong>ä¼˜ç‚¹</strong>ï¼š
<ul>
<li><strong>ç³»ç»Ÿæ‹†åˆ†</strong>ï¼šå®ç°äº†ä¸€å®šç¨‹åº¦çš„è§£è€¦ã€‚</li>
<li><strong>å¯é’ˆå¯¹æ€§æ‰©å±•</strong>ï¼šå¯ä»¥é’ˆå¯¹è®¿é—®é‡å¤§çš„åº”ç”¨ï¼ˆå¦‚å‰å°ï¼‰ç‹¬ç«‹å¢åŠ æœåŠ¡å™¨ã€‚</li>
</ul>
</li>
<li><strong>ç¼ºç‚¹</strong>ï¼š
<ul>
<li><strong>åŠŸèƒ½é‡å¤</strong>ï¼šæ¯ä¸ªåº”ç”¨å¯èƒ½éƒ½åŒ…å«ä¸€å¥—è‡ªå·±çš„ç”¨æˆ·è®¤è¯ã€æ—¥å¿—ç­‰é€šç”¨é€»è¾‘ï¼Œé€ æˆé‡å¤å¼€å‘ã€‚</li>
<li><strong>æ•°æ®å­¤å²›</strong>ï¼šåº”ç”¨é—´æ•°æ®ä¸äº’é€šï¼Œå¯èƒ½å½¢æˆå†—ä½™å’Œæ•°æ®ä¸ä¸€è‡´ã€‚</li>
</ul>
</li>
<li><strong>æ¼”è¿›</strong>ï¼šè¿™æ˜¯ä»å•ä½“èµ°å‘åˆ†å¸ƒå¼çš„ä¸€ä¸ªè¿‡æ¸¡å½¢æ€ã€‚</li>
</ul>
<pre><code class="hljs language-java" lang="java">+-------------------+      +-------------------+      +-------------------+
|     å‚ç›´åº”ç”¨<span class="hljs-number">1</span>      |      |     å‚ç›´åº”ç”¨<span class="hljs-number">2</span>     |      |     å‚ç›´åº”ç”¨<span class="hljs-number">3</span>      |
|  +--------------+ |      |  +--------------+ |      |  +--------------+ |
|  |  åŠŸèƒ½æ¨¡å—     | |      |  |  åŠŸèƒ½æ¨¡å—    | |      |  |  åŠŸèƒ½æ¨¡å—     | |
|  +--------------+ |      |  +--------------+ |      |  +--------------+ |
|         |         |      |         |         |      |         |         |
|  +--------------+ |      |  +--------------+ |      |  +--------------+ |
|  |  æ•°æ®åº“<span class="hljs-number">1</span>      | |      | |   æ•°æ®åº“<span class="hljs-number">2</span>     | |      |  |  æ•°æ®åº“<span class="hljs-number">3</span>      | |
|  +--------------+ |      |  +--------------+ |      |  +--------------+ |
+-------------------+      +-------------------+      +-------------------+
</code></pre>
<h3 data-id="heading-4">2.3. SOA æ¶æ„</h3>
<p>ä¸ºäº†è§£å†³â€œé‡å¤é€ è½®å­â€å’Œæ•°æ®å­¤å²›é—®é¢˜ï¼Œæå‡ºäº†<strong>é¢å‘æœåŠ¡çš„æ¶æ„</strong>(SOAï¼ŒService Oriented Architecture)æ€æƒ³ã€‚</p>
<ul>
<li><strong>ç‰¹ç‚¹</strong>ï¼š
<ul>
<li><strong>æœåŠ¡åŒ–</strong>ï¼šå°†å…±åŒçš„ã€å¯å¤ç”¨çš„åŠŸèƒ½æŠ½å–æˆç‹¬ç«‹çš„â€œæœåŠ¡â€ï¼Œå¦‚ä¸Šæ–‡æåˆ°çš„ç”¨æˆ·æœåŠ¡ã€è®¢å•æœåŠ¡ã€‚</li>
<li><strong>ä¼ä¸šæœåŠ¡æ€»çº¿</strong>ï¼šæ ¸å¿ƒæ˜¯<strong>ESB</strong>ï¼Œæ‰€æœ‰æœåŠ¡éƒ½é€šè¿‡ESBè¿›è¡Œé€šä¿¡å’Œé›†æˆã€‚ESBè´Ÿè´£æ¶ˆæ¯è·¯ç”±ã€åè®®è½¬æ¢ã€æœåŠ¡ç¼–æ’ç­‰ã€‚</li>
</ul>
</li>
<li><strong>ä¼˜ç‚¹</strong>ï¼š
<ul>
<li><strong>ç³»ç»Ÿé›†æˆ</strong>ï¼šæœ‰æ•ˆè§£å†³äº†ä¼ä¸šå†…éƒ¨å¼‚æ„ç³»ç»Ÿä¹‹é—´çš„äº’é€šé—®é¢˜ã€‚</li>
<li><strong>æœåŠ¡å¤ç”¨</strong>ï¼šæé«˜äº†åŠŸèƒ½å¤ç”¨æ€§ã€‚</li>
</ul>
</li>
<li><strong>ç¼ºç‚¹</strong>ï¼š
<ul>
<li><strong>ä¸­å¿ƒåŒ–ç“¶é¢ˆ</strong>ï¼šESBæˆä¸ºä¸­å¿ƒèŠ‚ç‚¹ï¼Œå®¹æ˜“é€ æˆæ€§èƒ½ç“¶é¢ˆå’Œå•ç‚¹æ•…éšœã€‚</li>
<li><strong>å¤æ‚åº¦é«˜</strong>ï¼šESBæœ¬èº«éå¸¸é‡ï¼Œåè®®å’Œæ ‡å‡†å¤æ‚ï¼ˆå¦‚SOAP/WS-*ï¼‰ï¼Œå¼€å‘æµ‹è¯•å›°éš¾ã€‚</li>
</ul>
</li>
<li><strong>ç†å¿µè´¡çŒ®</strong>ï¼šé¦–æ¬¡æ˜ç¡®äº†â€œæœåŠ¡â€ä½œä¸ºåŸºæœ¬ç»„ä»¶çš„æ¦‚å¿µã€‚</li>
</ul>
<pre><code class="hljs language-java" lang="java">+----------+      +----------+      +----------+
|  æœåŠ¡A   |      |  æœåŠ¡B    |      |  æœåŠ¡C   |
+----------+      +----------+      +----------+
      |                |                |
      +----------------+----------------+
                       |
               +----------------+
               |      ESB       |
               |  (ä¼ä¸šæœåŠ¡æ€»çº¿) |
               +----------------+
                       |
      +----------------+----------------+
      |                |                |
+----------+      +----------+      +----------+
| æ•°æ®åº“A   |      | æ•°æ®åº“B  |      | æ•°æ®åº“C   |
+----------+      +----------+      +----------+
</code></pre>
<h3 data-id="heading-5">2.4. å¾®æœåŠ¡æ¶æ„</h3>
<p>è¿™æ˜¯å½“å‰çš„ä¸»æµæ¶æ„èŒƒå¼ï¼Œå¯ä»¥çœ‹ä½œæ˜¯SOAçš„å»ä¸­å¿ƒåŒ–ã€ç²¾ç»†åŒ–æ¼”è¿›ã€‚</p>
<ul>
<li><strong>ç‰¹ç‚¹</strong>ï¼š
<ul>
<li><strong>å½»åº•çš„æœåŠ¡åŒ–ä¸è‡ªæ²»</strong>ï¼šä¸€ä¸ªæœåŠ¡å°±æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ã€å¯éƒ¨ç½²çš„ä¸šåŠ¡å•å…ƒï¼Œæ‹¥æœ‰è‡ªå·±çš„ç‹¬ç«‹æ•°æ®åº“ï¼ˆæ•°æ®åº“ä¹Ÿå®Œæˆæ‹†åˆ†ï¼‰ã€‚</li>
<li><strong>å»ä¸­å¿ƒåŒ–æ²»ç†</strong>ï¼šæ²¡æœ‰ESBï¼ŒæœåŠ¡é—´é€šè¿‡è½»é‡çº§é€šä¿¡æœºåˆ¶ï¼ˆå¦‚HTTP/REST, gRPCï¼‰ç›´æ¥è°ƒç”¨ã€‚æœåŠ¡æ³¨å†Œä¸å‘ç°ï¼ˆå¦‚Eureka, Nacosï¼‰å–ä»£äº†ä¸­å¿ƒåŒ–çš„è·¯ç”±ã€‚</li>
<li><strong>æŠ€æœ¯å¤šæ ·æ€§</strong>ï¼šæ¯ä¸ªæœåŠ¡å¯ä»¥æ ¹æ®è‡ªèº«éœ€æ±‚é€‰æ‹©æœ€åˆé€‚çš„æŠ€æœ¯æ ˆï¼ˆPolyglotï¼‰ã€‚</li>
<li><strong>å›´ç»•ä¸šåŠ¡èƒ½åŠ›ç»„ç»‡å›¢é˜Ÿ</strong>ï¼ˆåº·å¨å®šå¾‹çš„ä½“ç°ï¼‰ã€‚</li>
</ul>
</li>
<li><strong>ä¼˜ç‚¹</strong>ï¼š
<ul>
<li><strong>é«˜å†…èšã€ä½è€¦åˆ</strong>ï¼šæœåŠ¡è¾¹ç•Œæ¸…æ™°ï¼Œç‹¬ç«‹å¼€å‘ã€éƒ¨ç½²ã€æ‰©å±•ã€‚</li>
<li><strong>å¼¹æ€§ä¸å®¹é”™</strong>ï¼šå•ä¸ªæœåŠ¡æ•…éšœä¸ä¼šå¯¼è‡´æ•´ä¸ªç³»ç»Ÿç˜«ç—ªã€‚</li>
<li><strong>æŠ€æœ¯é€‰å‹çµæ´»</strong>ã€‚</li>
<li><strong>æ›´é€‚åˆæŒç»­äº¤ä»˜å’ŒDevOps</strong>ã€‚</li>
</ul>
</li>
<li><strong>ç¼ºç‚¹</strong>ï¼š
<ul>
<li><strong>åˆ†å¸ƒå¼ç³»ç»Ÿå¤æ‚æ€§</strong>ï¼šå¼•å…¥äº†ç½‘ç»œå»¶è¿Ÿã€æœåŠ¡å‘ç°ã€è´Ÿè½½å‡è¡¡ã€é…ç½®ç®¡ç†ã€åˆ†å¸ƒå¼äº‹åŠ¡ã€é“¾è·¯è¿½è¸ªç­‰ä¸€ç³»åˆ—æŒ‘æˆ˜ã€‚</li>
<li><strong>è¿ç»´å’Œç›‘æ§å¤æ‚åº¦é™¡å¢</strong>ã€‚</li>
<li><strong>æµ‹è¯•éš¾åº¦å¤§</strong>ã€‚</li>
</ul>
</li>
<li><strong>æŠ€æœ¯ç”Ÿæ€</strong>ï¼šSpring Cloud, Dubbo, Kubernetes (ä½œä¸ºéƒ¨ç½²å’Œç¼–æ’å¹³å°) ç­‰ã€‚</li>
</ul>
<pre><code class="hljs language-java" lang="java">+-------------+    +-------------+    +-------------+
|  å¾®æœåŠ¡A     |   |  å¾®æœåŠ¡B     |    |  å¾®æœåŠ¡C     |
|  +--------+ |    |  +--------+ |    |  +--------+ |
|  | ä¸šåŠ¡é€»è¾‘| |   |  | ä¸šåŠ¡é€»è¾‘| |    |  | ä¸šåŠ¡é€»è¾‘| |
|  +--------+ |    |  +--------+ |    |  +--------+ |
|       |     |    |       |     |    |       |     |
|  +--------+ |    |  +--------+ |    |  +--------+ |
|  | æ•°æ®åº“A | |    | | æ•°æ®åº“B | |    |  | æ•°æ®åº“C | |
|  +--------+ |    |  +--------+ |    |  +--------+ |
+-------------+    +-------------+    +-------------+
       |                  |                  |
       +------------------+------------------+
                          |
                  +-----------------+
                  |  æœåŠ¡æ³¨å†Œä¸å‘ç°  |
                  | (å¦‚Eureka/Nacos)|
                  +-----------------+
                          |
       +------------------+------------------+
       |                  |                  |
+-------------+    +-------------+    +-------------+
|    APIç½‘å…³  |    |  è´Ÿè½½å‡è¡¡å™¨  |    |  é…ç½®ä¸­å¿ƒ    |
+-------------+    +-------------+    +-------------+
</code></pre>
<h3 data-id="heading-6">2.5. äº‘åŸç”Ÿä¸æœåŠ¡ç½‘æ ¼æ¶æ„</h3>
<p>è¿™æ˜¯å¾®æœåŠ¡æ¶æ„åœ¨äº‘ç¯å¢ƒä¸‹çš„è‡ªç„¶æ¼”è¿›å’Œâ€œå‡åâ€ã€‚</p>
<ul>
<li><strong>æ ¸å¿ƒæ€æƒ³</strong>ï¼š<strong>å°†å¾®æœåŠ¡æ¶æ„ä¸­ä¸ä¸šåŠ¡æ— å…³çš„é€šç”¨èƒ½åŠ›ï¼ˆå¦‚æœåŠ¡é€šä¿¡ã€å¯è§‚æµ‹æ€§ã€å®‰å…¨æ€§ã€æµé‡æ²»ç†ï¼‰ä¸‹æ²‰åˆ°åŸºç¡€è®¾æ–½å±‚</strong>ã€‚</li>
<li><strong>ç‰¹ç‚¹</strong>ï¼š
<ul>
<li><strong>æœåŠ¡ç½‘æ ¼</strong>ï¼šåœ¨åº”ç”¨æ—éƒ¨ç½²ä¸€ä¸ªè½»é‡çº§ç½‘ç»œä»£ç†ï¼ˆSidecarï¼Œå¦‚Envoyï¼‰ï¼Œæ‰€æœ‰æœåŠ¡é—´çš„é€šä¿¡éƒ½ç»ç”±Sidecarä»£ç†ã€‚ç”±æ§åˆ¶å¹³é¢ï¼ˆå¦‚Istio, Linkerdï¼‰ç»Ÿä¸€ç®¡ç†è¿™äº›Sidecarã€‚å®ç°äº† <strong>â€œä¸šåŠ¡é€»è¾‘ä¸ç½‘ç»œé€šä¿¡çš„è§£è€¦â€</strong>ã€‚</li>
<li><strong>å£°æ˜å¼APIä¸ä¸å¯å˜åŸºç¡€è®¾æ–½</strong>ï¼šä»¥Kubernetesä¸ºä»£è¡¨ï¼Œé€šè¿‡YAMLæ–‡ä»¶æè¿°â€œæœŸæœ›çš„çŠ¶æ€â€ï¼Œç”±ç³»ç»Ÿè‡ªåŠ¨å®ç°å’Œç»´æŠ¤ã€‚</li>
<li><strong>DevOpsä¸GitOps</strong>ï¼šå°†åŸºç¡€è®¾æ–½å³ä»£ç ã€æŒç»­éƒ¨ç½²æµç¨‹åŒ–ã€‚</li>
</ul>
</li>
<li><strong>ä¼˜ç‚¹</strong>ï¼š
<ul>
<li><strong>æå¤§ç®€åŒ–äº†å¾®æœåŠ¡å¼€å‘</strong>ï¼šå¼€å‘è€…å‡ ä¹åªéœ€å…³æ³¨ä¸šåŠ¡é€»è¾‘ã€‚</li>
<li><strong>æä¾›äº†å¼ºå¤§çš„ã€ç»Ÿä¸€çš„æµé‡æ§åˆ¶èƒ½åŠ›</strong>ï¼ˆå¦‚é‡‘ä¸é›€å‘å¸ƒã€ç†”æ–­ã€æ•…éšœæ³¨å…¥ï¼‰ã€‚</li>
<li><strong>åŸºç¡€è®¾æ–½æ ‡å‡†åŒ–ã€è‡ªåŠ¨åŒ–</strong>ã€‚</li>
</ul>
</li>
<li><strong>ç¼ºç‚¹</strong>ï¼š
<ul>
<li><strong>å­¦ä¹ æ›²çº¿éå¸¸é™¡å³­</strong>ã€‚</li>
<li><strong>ç»„ä»¶ç¹å¤šï¼Œä½“ç³»å¤æ‚</strong>ã€‚</li>
<li><strong>å¯¹è¿ç»´å›¢é˜Ÿè¦æ±‚æé«˜</strong>ã€‚</li>
</ul>
</li>
</ul>
<pre><code class="hljs language-java" lang="java">+---------------------------------------------------------+
|                   æœåŠ¡ç½‘æ ¼æ§åˆ¶å¹³é¢                       |
|                  (å¦‚Istio, Linkerd)                     |
+---------------------------------------------------------+
                             |
+--------------------------------------------------------------------+
|                    æ•°æ®å¹³é¢ï¼ˆç”±Sidecarä»£ç†ç»„æˆï¼‰                     |
|                                                                    |
|  +-------------+        +-------------+        +-------------+     |
|  |   å¾®æœåŠ¡A    |        |   å¾®æœåŠ¡B   |        |   å¾®æœåŠ¡C   |      |
|  |  +--------+ |        |  +--------+ |        |  +--------+ |     |
|  |  | ä¸šåŠ¡é€»è¾‘| |        | | ä¸šåŠ¡é€»è¾‘| |         | | ä¸šåŠ¡é€»è¾‘| |     |
|  |  +--------+ |        |  +--------+ |        |  +--------+ |     |
|  |       |     |        |       |     |        |       |     |     |
|  |  +--------+ |        |  +--------+ |        |  +--------+ |     |
|  |  | Sidecar| |        |  | Sidecar| |        |  | Sidecar| |     |
|  |  | (Envoy)| |        |  | (Envoy)| |        |  | (Envoy)| |     |
|  |  +--------+ |        |  +--------+ |        |  +--------+ |     |
|  +-------------+        +-------------+        +-------------+     |
|         |                    |                    |                |
|  +--------+             +--------+             +--------+          |
|  | æ•°æ®åº“A |            | æ•°æ®åº“B |             | æ•°æ®åº“C |          |
|  +--------+             +--------+             +--------+          |
+--------------------------------------------------------------------+
</code></pre>
<h3 data-id="heading-7">2.6. æ— æœåŠ¡å™¨ä¸å‡½æ•°è®¡ç®—</h3>
<p>å°†â€œè§£è€¦â€å’Œâ€œä¸‹æ²‰â€çš„æ€æƒ³æ¨å‘æè‡´ï¼Œè®©å¼€å‘è€…å®Œå…¨ä¸ç”¨å…³å¿ƒæœåŠ¡å™¨ã€‚</p>
<ul>
<li><strong>ç‰¹ç‚¹</strong>ï¼š
<ul>
<li><strong>å‡½æ•°å³æœåŠ¡</strong>ï¼šä»¥å‡½æ•°ä¸ºæœ€å°éƒ¨ç½²å’Œè®¡è´¹å•ä½ã€‚å¼€å‘è€…åªç¼–å†™ä¸€ä¸ªä¸ªç‹¬ç«‹çš„å‡½æ•°ï¼Œç”±äº‘å¹³å°è´Ÿè´£å…¶è§¦å‘ã€è¿è¡Œã€æ‰©ç¼©å®¹ï¼ˆç”šè‡³ç¼©åˆ°é›¶ï¼‰å’Œè¿ç»´ã€‚</li>
<li><strong>åç«¯å³æœåŠ¡</strong>ï¼šç›´æ¥ä½¿ç”¨äº‘æ•°æ®åº“ã€äº‘å­˜å‚¨ã€äº‘è®¤è¯ç­‰æ‰˜ç®¡æœåŠ¡ã€‚</li>
</ul>
</li>
<li><strong>ä¼˜ç‚¹</strong>ï¼š
<ul>
<li><strong>æè‡´çš„å¼€å‘æ•ˆç‡ä¸è¿ç»´æˆæœ¬</strong>ï¼šå®Œå…¨æ— éœ€ç®¡ç†æœåŠ¡å™¨ã€‚</li>
<li><strong>æè‡´çš„å¼¹æ€§ä¸æˆæœ¬</strong>ï¼šæŒ‰å®é™…è°ƒç”¨æ¬¡æ•°å’Œèµ„æºæ¶ˆè€—è®¡è´¹ï¼Œç©ºé—²æ—¶æˆæœ¬ä¸ºé›¶ã€‚</li>
</ul>
</li>
<li><strong>ç¼ºç‚¹</strong>ï¼š
<ul>
<li><strong>å†·å¯åŠ¨å»¶è¿Ÿ</strong>ã€‚</li>
<li><strong>çŠ¶æ€ç®¡ç†å›°éš¾</strong>ï¼Œå‡½æ•°åº”ä¸ºæ— çŠ¶æ€çš„ã€‚</li>
<li><strong>ä¾›åº”å•†é”å®šé£é™©</strong>ã€‚</li>
<li><strong>è°ƒè¯•å’Œç›‘æ§æœ‰ç‰¹æ®ŠæŒ‘æˆ˜</strong>ã€‚</li>
</ul>
</li>
<li><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šäº‹ä»¶é©±åŠ¨å‹ã€çªå‘æµé‡ã€å¼‚æ­¥å¤„ç†ï¼ˆå¦‚å›¾ç‰‡å¤„ç†ã€æ¶ˆæ¯æ¸…æ´—ã€å®šæ—¶ä»»åŠ¡ï¼‰ã€‚</li>
</ul>
<pre><code class="hljs language-java" lang="java">+-----------------------------------------------------------+
|                   äº‘å¹³å°ï¼ˆå¦‚AWS Lambdaï¼‰                   |
|                                                           |
|  +----------------+  +----------------+  +----------------+
|  |    å‡½æ•°A       |  |    å‡½æ•°B        |  |    å‡½æ•°C       |
|  |  +----------+  |  |  +----------+  |  |  +----------+  |
|  |  | ä»£ç é€»è¾‘  |  |  |  | ä»£ç é€»è¾‘  |  |  |  | ä»£ç é€»è¾‘ |  |
|  |  +----------+  |  |  +----------+  |  |  +----------+  |
|  +----------------+  +----------------+  +----------------+
|          |                  |                  |          |
|  +----------------+  +----------------+  +------ -----+   |
|  |   äº‹ä»¶æº<span class="hljs-number">1</span>      |  |   äº‹ä»¶æº<span class="hljs-number">2</span>       |  |   äº‹ä»¶æº<span class="hljs-number">3</span>   |   |
|  | (å¦‚APIç½‘å…³)    |  | (å¦‚æ¶ˆæ¯é˜Ÿåˆ—)    |  | (å¦‚å¯¹è±¡å­˜å‚¨) |   |
|  +----------------+  +----------------+  +----------------+
|                                                           |
+-----------------------------------------------------------+

+-----------------------------------------------------------+
|                   åç«¯å³æœåŠ¡ï¼ˆBaaSï¼‰                       |
|   +-----------------------------------------------+       |
|   |        äº‘æ•°æ®åº“      äº‘å­˜å‚¨      äº‘èº«ä»½è®¤è¯     |       |
|   +-----------------------------------------------+       |
+-----------------------------------------------------------+
</code></pre>
<h2 data-id="heading-8">3. åˆ†å¸ƒå¼æ¶æ„</h2>
<p><strong>åˆ†å¸ƒå¼æ¶æ„ä¸æ˜¯ä¸€ä¸ªä¸å•ä½“ã€SOAã€å¾®æœåŠ¡ç­‰å¹¶åˆ—çš„â€œæ¶æ„é£æ ¼â€ï¼Œè€Œæ˜¯ä¸€ä¸ªæ›´ä¸Šå±‚çš„ã€æè¿°ç³»ç»Ÿéƒ¨ç½²å’Œè¿è¡ŒçŠ¶æ€çš„â€œå±æ€§â€æˆ–â€œæ¨¡å¼â€ã€‚</strong></p>
<p><strong>æ¦‚å¿µå±‚çº§ä¸åŒ</strong></p>
<ul>
<li><strong>å•ä½“æ¶æ„ã€å¾®æœåŠ¡æ¶æ„</strong> ç­‰æè¿°çš„æ˜¯<strong>åº”ç”¨ä»£ç çš„ç»„ç»‡æ–¹å¼ã€æ¨¡å—çš„è¾¹ç•Œå’ŒèŒè´£åˆ’åˆ†</strong>ã€‚å®ƒä»¬å›ç­”çš„æ˜¯â€œå¦‚ä½•åˆ‡å‰²æˆ‘çš„ä»£ç å’ŒåŠŸèƒ½â€ã€‚</li>
<li><strong>åˆ†å¸ƒå¼æ¶æ„</strong> æè¿°çš„æ˜¯<strong>ç³»ç»Ÿç»„ä»¶éƒ¨ç½²å’Œè¿è¡Œçš„ç‰©ç†ï¼ˆæˆ–é€»è¾‘ï¼‰ä½ç½®å…³ç³»</strong>ã€‚å®ƒå›ç­”çš„æ˜¯â€œæˆ‘çš„ç»„ä»¶æ˜¯å¦è¿è¡Œåœ¨å¤šä¸ªç‹¬ç«‹çš„ã€éœ€è¦ç½‘ç»œé€šä¿¡çš„è¿›ç¨‹/æœºå™¨ä¸Šâ€ã€‚</li>
</ul>
<p><strong>ç®€å•ç±»æ¯”ï¼š</strong></p>
<ul>
<li>å•ä½“/å¾®æœåŠ¡æ¶æ„å°±åƒæ˜¯<strong>æˆ¿å±‹çš„ç»“æ„è®¾è®¡</strong>ï¼ˆæ˜¯æ‰“é€šçš„å¤§å¼€é—´ï¼Œè¿˜æ˜¯åˆ†æˆå§å®¤ã€å®¢å…ã€å¨æˆ¿ç­‰å¤šä¸ªåŠŸèƒ½æˆ¿é—´ï¼‰ã€‚</li>
<li>åˆ†å¸ƒå¼æ¶æ„åˆ™æ˜¯æŒ‡<strong>è¿™ä¸ªæˆ¿å­æ˜¯å»ºåœ¨ä¸€å—åœ°åŸºä¸Šï¼Œè¿˜æ˜¯ç”±å¤šä¸ªå»ºåœ¨ä¸åŒåœ°æ–¹ã€é€šè¿‡é“è·¯è¿æ¥çš„å°å±‹ç»„æˆ</strong>ã€‚</li>
</ul>
<p><strong>åˆ†å¸ƒå¼æ˜¯å¤šä¸ªé˜¶æ®µçš„å…±åŒç‰¹å¾</strong></p>
<p><strong>æ¼”è¿›ä¸»çº¿ï¼ˆæ¶æ„é£æ ¼ï¼‰ï¼š</strong> <strong>å•ä½“ â†’ å‚ç›´ â†’ SOA â†’ å¾®æœåŠ¡ â†’ æœåŠ¡ç½‘æ ¼/äº‘åŸç”Ÿ â†’ æ— æœåŠ¡å™¨</strong></p>
<p>åœ¨æ¼”è¿›å†ç¨‹ä¸­ï¼Œ<strong>ä»å‚ç›´æ¶æ„å¼€å§‹ï¼Œåç»­çš„æ¶æ„å‡ ä¹éƒ½å…·å¤‡â€œåˆ†å¸ƒå¼â€çš„ç‰¹æ€§</strong>ã€‚</p>
<ul>
<li><strong>å‚ç›´æ¶æ„</strong>ï¼šå¦‚æœâ€œç”µå•†å‰å°â€å’Œâ€œå•†å®¶åå°â€éƒ¨ç½²åœ¨ä¸åŒçš„æœåŠ¡å™¨ä¸Šï¼Œå¹¶é€šè¿‡ç½‘ç»œï¼ˆå¦‚HTTPï¼‰è°ƒç”¨ï¼Œé‚£ä¹ˆå®ƒå°±æ˜¯ä¸€ä¸ªç®€å•çš„åˆ†å¸ƒå¼ç³»ç»Ÿã€‚</li>
<li><strong>SOAæ¶æ„</strong>ï¼šå…¶æ ¸å¿ƒESBå’ŒæœåŠ¡æä¾›è€…é€šå¸¸å°±æ˜¯åˆ†å¸ƒå¼éƒ¨ç½²çš„ã€‚</li>
<li><strong>å¾®æœåŠ¡æ¶æ„</strong>ï¼š<strong>æ˜¯åˆ†å¸ƒå¼æ¶æ„çš„æè‡´ä½“ç°</strong>ã€‚æ¯ä¸ªæœåŠ¡éƒ½æ˜¯ç‹¬ç«‹çš„è¿›ç¨‹ï¼Œéƒ¨ç½²ä¸Šå¤©ç„¶å°±æ˜¯åˆ†å¸ƒå¼çš„ã€‚</li>
<li><strong>äº‘åŸç”Ÿ/æ— æœåŠ¡å™¨æ¶æ„</strong>ï¼šæ›´æ˜¯æ„å»ºåœ¨éå¸ƒå…¨çƒæ•°æ®ä¸­å¿ƒçš„åˆ†å¸ƒå¼äº‘åŸºç¡€è®¾æ–½ä¹‹ä¸Šã€‚</li>
</ul>
<p><strong>åˆ†å¸ƒå¼ç‰¹æ€§ï¼š</strong></p>
<ul>
<li><strong>å•ä½“æ¶æ„</strong>ï¼šé€šå¸¸æ˜¯éåˆ†å¸ƒå¼çš„ï¼ˆæ‰€æœ‰æ¨¡å—åœ¨ä¸€ä¸ªè¿›ç¨‹å†…ï¼‰ã€‚</li>
<li><strong>å‚ç›´æ¶æ„åŠä»¥å</strong>ï¼š<strong>éƒ½å…·å¤‡åˆ†å¸ƒå¼æ¶æ„çš„å±æ€§</strong>ã€‚åˆ†å¸ƒå¼ç¨‹åº¦å’Œå¤æ‚åº¦é€æ¸å¢åŠ ï¼Œåœ¨å¾®æœåŠ¡æ—¶è¾¾åˆ°é«˜å³°ï¼Œåœ¨äº‘åŸç”Ÿæ—¶ä»£é€šè¿‡åŸºç¡€è®¾æ–½ï¼ˆæœåŠ¡ç½‘æ ¼ï¼‰å°†å¤æ‚åº¦ä¸‹æ²‰ç®¡ç†ã€‚</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2561a3f5e6004e0c92d99fddc89aa587~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA57q_5aSn56CB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768703932&amp;x-signature=W9TkUiA%2BY7wdH5JGV7ZTjW2Kito%3D" alt="deepseek_mermaid_20260110_f91ff9.png" loading="lazy"/></p>
<h2 data-id="heading-9">4. æ¼”è¿›æ€»ç»“</h2>
<h3 data-id="heading-10">4.1. æ¼”è¿›è¶‹åŠ¿æ€»ç»“</h3>






















































<table><thead><tr><th align="left">æ¶æ„</th><th align="left">æ ¸å¿ƒå•å…ƒ</th><th align="left">é€šä¿¡/é›†æˆ</th><th align="left">æ•°æ®åº“</th><th align="left">å…³é”®ç›®æ ‡</th></tr></thead><tbody><tr><td align="left"><strong>å•ä½“</strong></td><td align="left">åº”ç”¨</td><td align="left">è¿›ç¨‹å†…è°ƒç”¨</td><td align="left">å•ä¸€å…±äº«æ•°æ®åº“</td><td align="left">å¿«é€Ÿå¯åŠ¨</td></tr><tr><td align="left"><strong>å‚ç›´</strong></td><td align="left">ç‹¬ç«‹åº”ç”¨</td><td align="left">ç®€å•RPC/HTTP</td><td align="left">åˆ†åº“</td><td align="left">æŒ‰ä¸šåŠ¡æ‰©å±•</td></tr><tr><td align="left"><strong>SOA</strong></td><td align="left">ç²—ç²’åº¦æœåŠ¡</td><td align="left"><strong>ä¸­å¿ƒåŒ–ESB</strong></td><td align="left">åˆ†åº“</td><td align="left">æœåŠ¡å¤ç”¨ï¼Œç³»ç»Ÿé›†æˆ</td></tr><tr><td align="left"><strong>å¾®æœåŠ¡</strong></td><td align="left">ç»†ç²’åº¦æœåŠ¡</td><td align="left"><strong>å»ä¸­å¿ƒåŒ–ï¼Œç›´æ¥è°ƒç”¨</strong></td><td align="left"><strong>ä¸€æœåŠ¡ä¸€åº“</strong></td><td align="left">æ•æ·ã€ç‹¬ç«‹ã€çµæ´»</td></tr><tr><td align="left"><strong>äº‘åŸç”Ÿ</strong></td><td align="left">å¾®æœåŠ¡+Sidecar</td><td align="left"><strong>æœåŠ¡ç½‘æ ¼</strong></td><td align="left">ä¸€æœåŠ¡ä¸€åº“</td><td align="left">åŸºç¡€è®¾æ–½èƒ½åŠ›ä¸‹æ²‰</td></tr><tr><td align="left"><strong>æ— æœåŠ¡å™¨</strong></td><td align="left">å‡½æ•°/äº‹ä»¶</td><td align="left">äº‹ä»¶/æ¶ˆæ¯</td><td align="left">æ‰˜ç®¡BaaS</td><td align="left"><strong>é›¶è¿ç»´ã€æè‡´å¼¹æ€§</strong></td></tr></tbody></table>
<h3 data-id="heading-11">4.2. æ¼”è¿›å…³ç³»æ€»è§ˆ</h3>
<pre><code class="hljs language-java" lang="java">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   æ¼”è¿›æ—¶é—´çº¿                                 â”‚
â”‚                                                             â”‚
â”‚  å•ä½“ â†’ å‚ç›´ â†’ SOA â†’ å¾®æœåŠ¡ â†’ æœåŠ¡ç½‘æ ¼ â†’ æ— æœåŠ¡å™¨              â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚é›†ä¸­ â”‚    â”‚ ç®€å• â”‚   â”‚ ä¸­å¿ƒ â”‚    â”‚å»ä¸­ â”‚    â”‚åŸºç¡€  â”‚        â”‚
â”‚  â”‚åŒ–   â”‚    â”‚ åˆ†å¸ƒ â”‚   â”‚ åŒ–   â”‚    â”‚å¿ƒåŒ– â”‚    â”‚è®¾æ–½ â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚           åˆ†å¸ƒå¼ç³»ç»Ÿå¤æ‚åº¦é€æ¸å¢åŠ                       â”‚  â”‚
â”‚  â”‚           è¿ç»´å…³æ³¨ç‚¹é€æ¸ä¸Šç§»/æŠ½è±¡åŒ–                     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h3 data-id="heading-12">4.3. æ ¸å¿ƒæ€æƒ³æ¼”è¿›</h3>
<ol>
<li><strong>ä»â€œå¤§è€Œå…¨â€åˆ°â€œå°è€Œä¸“â€</strong>ï¼šåŠŸèƒ½å•å…ƒä¸æ–­ç»†åŒ–å’Œç‹¬ç«‹ã€‚</li>
<li><strong>ä»â€œæ™ºèƒ½ç«¯ç‚¹ï¼Œç¬¨ç®¡é“â€åˆ°â€œç¬¨ç«¯ç‚¹ï¼Œæ™ºèƒ½ç®¡é“â€</strong>ï¼šé€šä¿¡çš„æ™ºèƒ½æ€§ä»åº”ç”¨å†…éƒ¨ï¼ˆESBï¼‰è½¬ç§»åˆ°ç½‘ç»œåŸºç¡€è®¾æ–½ï¼ˆæœåŠ¡ç½‘æ ¼ï¼‰ã€‚</li>
<li><strong>ä»â€œå…³æ³¨æœåŠ¡å™¨â€åˆ°â€œå…³æ³¨ä»£ç â€å†åˆ°â€œå…³æ³¨ä¸šåŠ¡é€»è¾‘â€</strong>ï¼šè¿ç»´è´Ÿæ‹…è¢«å±‚å±‚å‰¥ç¦»ã€‚</li>
<li><strong>ä»â€œæŠ€æœ¯é©±åŠ¨æ‹†åˆ†â€åˆ°â€œä¸šåŠ¡é©±åŠ¨æ‹†åˆ†â€</strong>ï¼šåº·å¨å®šå¾‹æ—¥ç›Šå‡¸æ˜¾ã€‚</li>
</ol>
<h3 data-id="heading-13">4.4. å…³é”®å˜åŒ–ç»´åº¦</h3>





























<table><thead><tr><th>æ¶æ„ç»´åº¦</th><th>å•ä½“ â†’ å‚ç›´ â†’ SOA â†’ å¾®æœåŠ¡ â†’ æœåŠ¡ç½‘æ ¼ â†’ æ— æœåŠ¡å™¨</th></tr></thead><tbody><tr><td><strong>éƒ¨ç½²å•å…ƒ</strong></td><td>åº”ç”¨ â†’ åº”ç”¨ â†’ æœåŠ¡ â†’ å®¹å™¨ â†’ æœåŠ¡+Sidecar â†’ å‡½æ•°</td></tr><tr><td><strong>é€šä¿¡æ–¹å¼</strong></td><td>å‡½æ•°è°ƒç”¨ â†’ RPC â†’ ESB â†’ REST/gRPC â†’ æœåŠ¡ç½‘æ ¼ â†’ äº‹ä»¶</td></tr><tr><td><strong>æ•°æ®ç®¡ç†</strong></td><td>å…±äº«åº“ â†’ ç‹¬ç«‹åº“ â†’ åˆ†åº“ â†’ ä¸€æœåŠ¡ä¸€åº“ â†’ ä¸€æœåŠ¡ä¸€åº“ â†’ BaaS</td></tr><tr><td><strong>å›¢é˜Ÿç»“æ„</strong></td><td>åŠŸèƒ½å‹ â†’ é¡¹ç›®å‹ â†’ æœåŠ¡å‹ â†’ äº§å“å‹ â†’ å¹³å°å‹ â†’ æ— è¿ç»´</td></tr><tr><td><strong>æ‰©å±•æ–¹å¼</strong></td><td>å‚ç›´æ‰©å±• â†’ å‚ç›´æ‰©å±• â†’ æœåŠ¡æ‰©å±• â†’ æœåŠ¡æ‰©å±• â†’ è‡ªåŠ¨æ‰©å±• â†’ è‡ªåŠ¨æ‰©å±•</td></tr></tbody></table>
<h3 data-id="heading-14">4.5. æ¶æ„é€‰æ‹©å»ºè®®</h3>
<ol>
<li><strong>åˆåˆ›é˜¶æ®µ</strong>ï¼šå•ä½“æˆ–å‚ç›´æ¶æ„ï¼Œå¿«é€ŸéªŒè¯ä¸šåŠ¡</li>
<li><strong>å¿«é€Ÿå‘å±•æœŸ</strong>ï¼šå¾®æœåŠ¡æ¶æ„ï¼Œæ”¯æŒå›¢é˜Ÿå¹¶è¡Œå¼€å‘</li>
<li><strong>å¹³å°åŒ–é˜¶æ®µ</strong>ï¼šæœåŠ¡ç½‘æ ¼/äº‘åŸç”Ÿï¼Œæ ‡å‡†åŒ–åŸºç¡€è®¾æ–½</li>
<li><strong>äº‹ä»¶é©±åŠ¨åœºæ™¯</strong>ï¼šæ— æœåŠ¡å™¨ï¼Œå¤„ç†çªå‘æµé‡å’Œå¼‚æ­¥ä»»åŠ¡</li>
<li><strong>é—ç•™ç³»ç»Ÿé›†æˆ</strong>ï¼šSOAæˆ–APIç½‘å…³æ–¹å¼</li>
</ol>
<p><strong>æ²¡æœ‰æœ€å¥½çš„æ¶æ„ï¼Œåªæœ‰æœ€åˆé€‚çš„æ¶æ„ã€‚</strong> æ¶æ„æ¼”è¿›çš„é€‰æ‹©å¿…é¡»ä¸å›¢é˜Ÿè§„æ¨¡ã€ä¸šåŠ¡é˜¶æ®µã€æŠ€æœ¯å‚¨å¤‡å’Œè¿ç»´èƒ½åŠ›ç›¸åŒ¹é…ã€‚è®¸å¤šç°ä»£å¤§å‹ç³»ç»Ÿå®é™…ä¸Šæ˜¯å¤šç§æ¶æ„æ¨¡å¼çš„æ··åˆä½“ï¼ˆå¦‚æ ¸å¿ƒä¸šåŠ¡é‡‡ç”¨å¾®æœåŠ¡ï¼Œè¾¹ç¼˜è®¡ç®—æˆ–äº‹ä»¶å¤„ç†é‡‡ç”¨Serverlessï¼‰ã€‚</p>
<h2 data-id="heading-15">5. æ¼”è¿›ç¤ºä¾‹</h2>
<p>å‚è€ƒåœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FsVwpJIAuvtLwIPFxTIPZuw" target="_blank" title="https://mp.weixin.qq.com/s/sVwpJIAuvtLwIPFxTIPZuw" ref="nofollow noopener noreferrer">mp.weixin.qq.com/s/sVwpJIAuvâ€¦</a></p>
<p>ä¸‹é¢ä»¥æ·˜å®é¡¹ç›®çš„æ¶æ„æ¼”è¿›è¿›è¡Œç¤ºä¾‹ã€‚</p>
<h3 data-id="heading-16">5.1. å•æœºæ¶æ„</h3>
<p>åœ¨ç½‘ç«™æœ€åˆæ—¶ï¼Œåº”ç”¨æ•°é‡ä¸ç”¨æˆ·æ•°éƒ½è¾ƒå°‘ï¼Œå¯ä»¥æŠŠ Tomcat å’Œæ•°æ®åº“éƒ¨ç½²åœ¨åŒä¸€å°æœåŠ¡å™¨ä¸Šã€‚æµè§ˆå™¨å¾€Â <code>www.taobao.com</code>Â å‘èµ·è¯·æ±‚æ—¶ï¼Œé¦–å…ˆç»è¿‡ DNS æœåŠ¡å™¨ï¼ˆåŸŸåç³»ç»Ÿï¼‰æŠŠåŸŸåè½¬æ¢ä¸ºå®é™… IP åœ°å€ 10.102.4.1ï¼Œæµè§ˆå™¨è½¬è€Œè®¿é—®è¯¥ IP å¯¹åº”çš„ Tomcatã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/83906bb5c4634bed9278678329b397bc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA57q_5aSn56CB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768703932&amp;x-signature=NeVxyT0sdcer68BsKIKbn%2BSTboM%3D" alt="18a8991b8ad538e9c37f6de020ce2255_640_wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1#imgIndex=1.webp" loading="lazy"/></p>
<p>æ¶æ„ç“¶é¢ˆï¼šéšç€ç”¨æˆ·æ•°çš„å¢é•¿ï¼ŒTomcat å’Œæ•°æ®åº“ä¹‹é—´ç«äº‰èµ„æºï¼Œå•æœºæ€§èƒ½ä¸è¶³ä»¥æ”¯æ’‘ä¸šåŠ¡ã€‚</p>
<h3 data-id="heading-17">5.2. ç¬¬ä¸€æ¬¡æ¼”è¿›</h3>
<p><strong>Tomcat ä¸æ•°æ®åº“åˆ†å¼€éƒ¨ç½²</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2df1a88146cf464fb374e34b6f293137~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA57q_5aSn56CB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768703932&amp;x-signature=CyRwBvqvn7tmgV3sQIPOmyhCcqQ%3D" alt="a5aca3e8b130cbd7085ca035c2f058ae_640_wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1#imgIndex=2.webp" loading="lazy"/></p>
<p>Tomcat å’Œæ•°æ®åº“åˆ†åˆ«ç‹¬å æœåŠ¡å™¨èµ„æºï¼Œæ˜¾è‘—æé«˜ä¸¤è€…å„è‡ªæ€§èƒ½ã€‚</p>
<p>æ¶æ„ç“¶é¢ˆï¼šéšç€ç”¨æˆ·æ•°çš„å¢é•¿ï¼Œå¹¶å‘è¯»å†™æ•°æ®åº“æˆä¸ºç“¶é¢ˆã€‚</p>
<h3 data-id="heading-18">5.3. ç¬¬äºŒæ¬¡æ¼”è¿›</h3>
<p><strong>å¼•å…¥æœ¬åœ°ç¼“å­˜å’Œåˆ†å¸ƒå¼ç¼“å­˜</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a2dea6812ed44c398d920d9ffa0a6cd9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA57q_5aSn56CB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768703932&amp;x-signature=Ye9Kap5kqhhowIhV5%2BOGrlQ9Vms%3D" alt="53b8dd22bfe95628d146d5207634fd1c_640_wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1#imgIndex=3.webp" loading="lazy"/></p>
<p>åœ¨ Tomcat åŒæœåŠ¡å™¨ä¸Šæˆ–åŒ JVM ä¸­å¢åŠ æœ¬åœ°ç¼“å­˜ï¼Œå¹¶åœ¨å¤–éƒ¨å¢åŠ åˆ†å¸ƒå¼ç¼“å­˜ï¼Œç¼“å­˜çƒ­é—¨å•†å“ä¿¡æ¯æˆ–çƒ­é—¨å•†å“çš„ html é¡µé¢ç­‰ã€‚é€šè¿‡ç¼“å­˜èƒ½æŠŠç»å¤§å¤šæ•°è¯·æ±‚åœ¨è¯»å†™æ•°æ®åº“å‰æ‹¦æˆªæ‰ï¼Œå¤§å¤§é™ä½æ•°æ®åº“å‹åŠ›ã€‚</p>
<p>å…¶ä¸­æ¶‰åŠçš„æŠ€æœ¯åŒ…æ‹¬ï¼šä½¿ç”¨ memcached ä½œä¸ºæœ¬åœ°ç¼“å­˜ï¼Œä½¿ç”¨ Redis ä½œä¸ºåˆ†å¸ƒå¼ç¼“å­˜ï¼Œè¿˜ä¼šæ¶‰åŠç¼“å­˜ä¸€è‡´æ€§ã€ç¼“å­˜ç©¿é€/å‡»ç©¿ã€ç¼“å­˜é›ªå´©ã€çƒ­ç‚¹æ•°æ®é›†ä¸­å¤±æ•ˆç­‰é—®é¢˜ã€‚</p>
<p>æ¶æ„ç“¶é¢ˆï¼šç¼“å­˜æŠ—ä½äº†å¤§éƒ¨åˆ†çš„è®¿é—®è¯·æ±‚ï¼Œéšç€ç”¨æˆ·æ•°çš„å¢é•¿ï¼Œå¹¶å‘å‹åŠ›ä¸»è¦è½åœ¨å•æœºçš„ Tomcat ä¸Šï¼Œå“åº”é€æ¸å˜æ…¢ã€‚</p>
<h3 data-id="heading-19">5.4. ç¬¬ä¸‰æ¬¡æ¼”è¿›</h3>
<p><strong>å¼•å…¥åå‘ä»£ç†å®ç°è´Ÿè½½å‡è¡¡</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d6a4912d4fd94595b7f7ae2099dc0e15~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA57q_5aSn56CB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768703932&amp;x-signature=hBE0HVA32gLqjkkbCrDzEwhSOSY%3D" alt="03f88af23ead3c3ac8a3064c812b710a_640_wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1#imgIndex=4.webp" loading="lazy"/></p>
<p>åœ¨å¤šå°æœåŠ¡å™¨ä¸Šåˆ†åˆ«éƒ¨ç½² Tomcatï¼Œä½¿ç”¨åå‘ä»£ç†è½¯ä»¶ Nginx æŠŠè¯·æ±‚å‡åŒ€åˆ†å‘åˆ°æ¯ä¸ª Tomcat ä¸­ã€‚æ­¤å¤„å‡è®¾ Tomcat æœ€å¤šæ”¯æŒ 100 ä¸ªå¹¶å‘ï¼ŒNginx æœ€å¤šæ”¯æŒ 50000 ä¸ªå¹¶å‘ï¼Œé‚£ä¹ˆç†è®ºä¸ŠÂ NginxÂ æŠŠè¯·æ±‚åˆ†å‘åˆ° 500 ä¸ª Tomcat ä¸Šï¼Œå°±èƒ½æŠ—ä½ 50000 ä¸ªå¹¶å‘ã€‚</p>
<p>å…¶ä¸­æ¶‰åŠçš„æŠ€æœ¯åŒ…æ‹¬ï¼šNginxã€HAProxyï¼Œä¸¤è€…éƒ½æ˜¯å·¥ä½œåœ¨ç½‘ç»œç¬¬ä¸ƒå±‚çš„åå‘ä»£ç†è½¯ä»¶ï¼Œä¸»è¦æ”¯æŒ http åè®®ï¼Œè¿˜ä¼šæ¶‰åŠ session å…±äº«ã€æ–‡ä»¶ä¸Šä¼ ä¸‹è½½çš„é—®é¢˜ã€‚</p>
<p>æ¶æ„ç“¶é¢ˆï¼šåå‘ä»£ç†ä½¿åº”ç”¨æœåŠ¡å™¨å¯æ”¯æŒçš„å¹¶å‘é‡å¤§å¤§å¢åŠ ï¼Œä½†å¹¶å‘é‡çš„å¢é•¿ä¹Ÿæ„å‘³ç€æ›´å¤šè¯·æ±‚ç©¿é€åˆ°æ•°æ®åº“ï¼Œå•æœºçš„æ•°æ®åº“æœ€ç»ˆæˆä¸ºç“¶é¢ˆã€‚</p>
<h3 data-id="heading-20">5.5. ç¬¬å››æ¬¡æ¼”è¿›</h3>
<p><strong>æ•°æ®åº“è¯»å†™åˆ†ç¦»</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/eaf73f96f45a44049aa3336896772f1c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA57q_5aSn56CB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768703932&amp;x-signature=o992rAUXrtApT%2BWiVXv1VJqs2j8%3D" alt="b54bdfa1ba22ffd757c9b7fd9f5f96b7_640_wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1#imgIndex=5.webp" loading="lazy"/></p>
<p>æŠŠæ•°æ®åº“åˆ’åˆ†ä¸ºè¯»åº“å’Œå†™åº“ï¼Œè¯»åº“å¯ä»¥æœ‰å¤šä¸ªï¼Œé€šè¿‡åŒæ­¥æœºåˆ¶æŠŠå†™åº“çš„æ•°æ®åŒæ­¥åˆ°è¯»åº“ï¼Œå¯¹äºéœ€è¦æŸ¥è¯¢æœ€æ–°å†™å…¥æ•°æ®åœºæ™¯ï¼Œå¯é€šè¿‡åœ¨ç¼“å­˜ä¸­å¤šå†™ä¸€ä»½ï¼Œé€šè¿‡ç¼“å­˜è·å¾—æœ€æ–°æ•°æ®ã€‚</p>
<p>å…¶ä¸­æ¶‰åŠçš„æŠ€æœ¯åŒ…æ‹¬ï¼šMyCatï¼Œå®ƒæ˜¯æ•°æ®åº“ä¸­é—´ä»¶ï¼Œå¯é€šè¿‡å®ƒæ¥ç»„ç»‡æ•°æ®åº“çš„åˆ†ç¦»è¯»å†™å’Œåˆ†åº“åˆ†è¡¨ï¼Œå®¢æˆ·ç«¯é€šè¿‡å®ƒæ¥è®¿é—®ä¸‹å±‚æ•°æ®åº“ï¼Œè¿˜ä¼šæ¶‰åŠæ•°æ®åŒæ­¥ï¼Œæ•°æ®ä¸€è‡´æ€§çš„é—®é¢˜ã€‚</p>
<p>æ¶æ„ç“¶é¢ˆï¼šä¸šåŠ¡é€æ¸å˜å¤šï¼Œä¸åŒä¸šåŠ¡ä¹‹é—´çš„è®¿é—®é‡å·®è·è¾ƒå¤§ï¼Œä¸åŒä¸šåŠ¡ç›´æ¥ç«äº‰æ•°æ®åº“ï¼Œç›¸äº’å½±å“æ€§èƒ½ã€‚</p>
<h3 data-id="heading-21">5.6. ç¬¬äº”æ¬¡æ¼”è¿›</h3>
<p><strong>æ•°æ®åº“æŒ‰ä¸šåŠ¡åˆ†åº“</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7005fab27ffa4951bf4a14e2dc15eeca~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA57q_5aSn56CB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768703932&amp;x-signature=rkckPROrZAu%2B%2F%2FUrTGNoo37qnkE%3D" alt="ed0c1667e0ab6769dea9ba85fbc03e7c_640_wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1#imgIndex=6.webp" loading="lazy"/></p>
<p>æŠŠä¸åŒä¸šåŠ¡çš„æ•°æ®ä¿å­˜åˆ°ä¸åŒçš„æ•°æ®åº“ä¸­ï¼Œä½¿ä¸šåŠ¡ä¹‹é—´çš„èµ„æºç«äº‰é™ä½ï¼Œå¯¹äºè®¿é—®é‡å¤§çš„ä¸šåŠ¡ï¼Œå¯ä»¥éƒ¨ç½²æ›´å¤šçš„æœåŠ¡å™¨æ¥æ”¯æ’‘ã€‚è¿™æ ·åŒæ—¶å¯¼è‡´è·¨ä¸šåŠ¡çš„è¡¨æ— æ³•ç›´æ¥åšå…³è”åˆ†æï¼Œéœ€è¦é€šè¿‡å…¶ä»–é€”å¾„æ¥è§£å†³ï¼Œä½†è¿™ä¸æ˜¯æœ¬æ–‡è®¨è®ºçš„é‡ç‚¹ï¼Œæœ‰å…´è¶£çš„å¯ä»¥è‡ªè¡Œæœç´¢è§£å†³æ–¹æ¡ˆã€‚</p>
<p>æ¶æ„ç“¶é¢ˆï¼šéšç€ç”¨æˆ·æ•°çš„å¢é•¿ï¼Œå•æœºçš„å†™åº“ä¼šé€æ¸ä¼šè¾¾åˆ°æ€§èƒ½ç“¶é¢ˆã€‚</p>
<h3 data-id="heading-22">5.7. ç¬¬å…­æ¬¡æ¼”è¿›</h3>
<p><strong>æŠŠå¤§è¡¨æ‹†åˆ†ä¸ºå°è¡¨</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d071e1a1cc23454cb950d9c8f324394b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA57q_5aSn56CB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768703932&amp;x-signature=QaxXkHNDvWzT2575gnq8D%2BlfFKo%3D" alt="f5e299e75bf2b3fef72c209b423d97b4_640_wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1#imgIndex=7.webp" loading="lazy"/></p>
<p>æ¯”å¦‚é’ˆå¯¹è¯„è®ºæ•°æ®ï¼Œå¯æŒ‰ç…§å•†å“ ID è¿›è¡Œ hashï¼Œè·¯ç”±åˆ°å¯¹åº”çš„è¡¨ä¸­å­˜å‚¨ï¼›é’ˆå¯¹æ”¯ä»˜è®°å½•ï¼Œå¯æŒ‰ç…§å°æ—¶åˆ›å»ºè¡¨ï¼Œæ¯ä¸ªå°æ—¶è¡¨ç»§ç»­æ‹†åˆ†ä¸ºå°è¡¨ï¼Œä½¿ç”¨ç”¨æˆ· ID æˆ–è®°å½•ç¼–å·æ¥è·¯ç”±æ•°æ®ã€‚åªè¦å®æ—¶æ“ä½œçš„è¡¨æ•°æ®é‡è¶³å¤Ÿå°ï¼Œè¯·æ±‚èƒ½å¤Ÿè¶³å¤Ÿå‡åŒ€çš„åˆ†å‘åˆ°å¤šå°æœåŠ¡å™¨ä¸Šçš„å°è¡¨ï¼Œé‚£æ•°æ®åº“å°±èƒ½é€šè¿‡æ°´å¹³æ‰©å±•çš„æ–¹å¼æ¥æé«˜æ€§èƒ½ã€‚å…¶ä¸­å‰é¢æåˆ°çš„Â MyCat ä¹Ÿæ”¯æŒåœ¨å¤§è¡¨æ‹†åˆ†ä¸ºå°è¡¨æƒ…å†µä¸‹çš„è®¿é—®æ§åˆ¶ã€‚</p>
<p>è¿™ç§åšæ³•æ˜¾è‘—çš„å¢åŠ äº†æ•°æ®åº“è¿ç»´çš„éš¾åº¦ï¼Œå¯¹ DBA çš„è¦æ±‚è¾ƒé«˜ã€‚æ•°æ®åº“è®¾è®¡åˆ°è¿™ç§ç»“æ„æ—¶ï¼Œå·²ç»å¯ä»¥ç§°ä¸ºåˆ†å¸ƒå¼æ•°æ®åº“ï¼Œä½†æ˜¯è¿™åªæ˜¯ä¸€ä¸ªé€»è¾‘çš„æ•°æ®åº“æ•´ä½“ï¼Œæ•°æ®åº“é‡Œä¸åŒçš„ç»„æˆéƒ¨åˆ†æ˜¯ç”±ä¸åŒçš„ç»„ä»¶å•ç‹¬æ¥å®ç°çš„ï¼Œå¦‚åˆ†åº“åˆ†è¡¨çš„ç®¡ç†å’Œè¯·æ±‚åˆ†å‘ï¼Œç”±Â MyCat å®ç°ï¼ŒSQL çš„è§£æç”±å•æœºçš„æ•°æ®åº“å®ç°ï¼Œè¯»å†™åˆ†ç¦»å¯èƒ½ç”±ç½‘å…³å’Œæ¶ˆæ¯é˜Ÿåˆ—æ¥å®ç°ï¼ŒæŸ¥è¯¢ç»“æœçš„æ±‡æ€»å¯èƒ½ç”±æ•°æ®åº“æ¥å£å±‚æ¥å®ç°ç­‰ç­‰ï¼Œè¿™ç§æ¶æ„å…¶å®æ˜¯ MPPï¼ˆå¤§è§„æ¨¡å¹¶è¡Œå¤„ç†ï¼‰æ¶æ„çš„ä¸€ç±»å®ç°ã€‚</p>
<p>ç›®å‰å¼€æºå’Œå•†ç”¨éƒ½å·²ç»æœ‰ä¸å°‘ MPP æ•°æ®åº“ï¼Œå¼€æºä¸­æ¯”è¾ƒæµè¡Œçš„æœ‰ Greenplumã€TiDBã€Postgresql XCã€HAWQ ç­‰ï¼Œå•†ç”¨çš„å¦‚å—å¤§é€šç”¨çš„ GBaseã€ç¿å¸†ç§‘æŠ€çš„é›ªçƒ DBã€åä¸ºçš„ LibrA ç­‰ç­‰ï¼Œä¸åŒçš„ MPP æ•°æ®åº“çš„ä¾§é‡ç‚¹ä¹Ÿä¸ä¸€æ ·ï¼Œå¦‚ TiDB æ›´ä¾§é‡äºåˆ†å¸ƒå¼ OLTP åœºæ™¯ï¼ŒGreenplum æ›´ä¾§é‡äºåˆ†å¸ƒå¼ OLAP åœºæ™¯ï¼Œè¿™äº› MPP æ•°æ®åº“åŸºæœ¬éƒ½æä¾›äº†ç±»ä¼¼ Postgresqlã€Oracleã€MySQL é‚£æ ·çš„ SQL æ ‡å‡†æ”¯æŒèƒ½åŠ›ï¼Œèƒ½æŠŠä¸€ä¸ªæŸ¥è¯¢è§£æä¸ºåˆ†å¸ƒå¼çš„æ‰§è¡Œè®¡åˆ’åˆ†å‘åˆ°æ¯å°æœºå™¨ä¸Šå¹¶è¡Œæ‰§è¡Œï¼Œæœ€ç»ˆç”±æ•°æ®åº“æœ¬èº«æ±‡æ€»æ•°æ®è¿›è¡Œè¿”å›ï¼Œä¹Ÿæä¾›äº†è¯¸å¦‚æƒé™ç®¡ç†ã€åˆ†åº“åˆ†è¡¨ã€äº‹åŠ¡ã€æ•°æ®å‰¯æœ¬ç­‰èƒ½åŠ›ï¼Œå¹¶ä¸”å¤§å¤šèƒ½å¤Ÿæ”¯æŒ 100 ä¸ªèŠ‚ç‚¹ä»¥ä¸Šçš„é›†ç¾¤ï¼Œå¤§å¤§é™ä½äº†æ•°æ®åº“è¿ç»´çš„æˆæœ¬ï¼Œå¹¶ä¸”ä½¿æ•°æ®åº“ä¹Ÿèƒ½å¤Ÿå®ç°æ°´å¹³æ‰©å±•ã€‚</p>
<p>æ¶æ„ç“¶é¢ˆï¼šæ•°æ®åº“å’Œ Tomcat éƒ½èƒ½å¤Ÿæ°´å¹³æ‰©å±•ï¼Œå¯æ”¯æ’‘çš„å¹¶å‘å¤§å¹…æé«˜ï¼Œéšç€ç”¨æˆ·æ•°çš„å¢é•¿ï¼Œæœ€ç»ˆå•æœºçš„ Nginx ä¼šæˆä¸ºç“¶é¢ˆã€‚</p>
<h3 data-id="heading-23">5.8. ç¬¬ä¸ƒæ¬¡æ¼”è¿›</h3>
<p><strong>ä½¿ç”¨ LVS æˆ– F5 æ¥ä½¿å¤šä¸ª NginxÂ è´Ÿè½½å‡è¡¡</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/673d9d340d634187b7fc8332c3533d1b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA57q_5aSn56CB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768703932&amp;x-signature=xiNxo4p3r2eVkrMBARxncmJ32LE%3D" alt="ec133500f8437e4495e0cceeb0803c0f_640_wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1#imgIndex=8.webp" loading="lazy"/></p>
<p>ç”±äºç“¶é¢ˆåœ¨Â Nginxï¼Œå› æ­¤æ— æ³•é€šè¿‡ä¸¤å±‚çš„Â Nginx æ¥å®ç°å¤šä¸ªÂ NginxÂ çš„è´Ÿè½½å‡è¡¡ã€‚å›¾ä¸­çš„ LVS å’Œ F5 æ˜¯å·¥ä½œåœ¨ç½‘ç»œç¬¬å››å±‚çš„è´Ÿè½½å‡è¡¡è§£å†³æ–¹æ¡ˆï¼Œå…¶ä¸­ LVS æ˜¯è½¯ä»¶ï¼Œè¿è¡Œåœ¨æ“ä½œç³»ç»Ÿå†…æ ¸æ€ï¼Œå¯å¯¹ TCP è¯·æ±‚æˆ–æ›´é«˜å±‚çº§çš„ç½‘ç»œåè®®è¿›è¡Œè½¬å‘ï¼Œå› æ­¤æ”¯æŒçš„åè®®æ›´ä¸°å¯Œï¼Œå¹¶ä¸”æ€§èƒ½ä¹Ÿè¿œé«˜äºÂ Nginxï¼Œå¯å‡è®¾å•æœºçš„ LVS å¯æ”¯æŒå‡ åä¸‡ä¸ªå¹¶å‘çš„è¯·æ±‚è½¬å‘ï¼›F5 æ˜¯ä¸€ç§è´Ÿè½½å‡è¡¡ç¡¬ä»¶ï¼Œä¸ LVS æä¾›çš„èƒ½åŠ›ç±»ä¼¼ï¼Œæ€§èƒ½æ¯” LVS æ›´é«˜ï¼Œä½†ä»·æ ¼æ˜‚è´µã€‚ç”±äº LVS æ˜¯å•æœºç‰ˆçš„è½¯ä»¶ï¼Œè‹¥ LVS æ‰€åœ¨æœåŠ¡å™¨å®•æœºåˆ™ä¼šå¯¼è‡´æ•´ä¸ªåç«¯ç³»ç»Ÿéƒ½æ— æ³•è®¿é—®ï¼Œå› æ­¤éœ€è¦æœ‰å¤‡ç”¨èŠ‚ç‚¹ã€‚å¯ä½¿ç”¨ keepalived è½¯ä»¶æ¨¡æ‹Ÿå‡ºè™šæ‹Ÿ IPï¼Œç„¶åæŠŠè™šæ‹Ÿ IP ç»‘å®šåˆ°å¤šå° LVS æœåŠ¡å™¨ä¸Šï¼Œæµè§ˆå™¨è®¿é—®è™šæ‹Ÿ IP æ—¶ï¼Œä¼šè¢«è·¯ç”±å™¨é‡å®šå‘åˆ°çœŸå®çš„ LVS æœåŠ¡å™¨ï¼Œå½“ä¸» LVS æœåŠ¡å™¨å®•æœºæ—¶ï¼Œkeepalived è½¯ä»¶ä¼šè‡ªåŠ¨æ›´æ–°è·¯ç”±å™¨ä¸­çš„è·¯ç”±è¡¨ï¼ŒæŠŠè™šæ‹Ÿ IP é‡å®šå‘åˆ°å¦å¤–ä¸€å°æ­£å¸¸çš„ LVS æœåŠ¡å™¨ï¼Œä»è€Œè¾¾åˆ° LVS æœåŠ¡å™¨é«˜å¯ç”¨çš„æ•ˆæœã€‚</p>
<p>æ­¤å¤„éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸Šå›¾ä¸­ä» NginxÂ å±‚åˆ° Tomcat å±‚è¿™æ ·ç”»å¹¶ä¸ä»£è¡¨å…¨éƒ¨Â NginxÂ éƒ½è½¬å‘è¯·æ±‚åˆ°å…¨éƒ¨çš„ Tomcatï¼Œåœ¨å®é™…ä½¿ç”¨æ—¶ï¼Œå¯èƒ½ä¼šæ˜¯å‡ ä¸ªÂ Nginx ä¸‹é¢æ¥ä¸€éƒ¨åˆ†çš„ Tomcatï¼Œè¿™äº›Â Nginx ä¹‹é—´é€šè¿‡ keepalived å®ç°é«˜å¯ç”¨ï¼Œå…¶ä»–çš„Â NginxÂ æ¥å¦å¤–çš„ Tomcatï¼Œè¿™æ ·å¯æ¥å…¥çš„ Tomcat æ•°é‡å°±èƒ½æˆå€çš„å¢åŠ ã€‚</p>
<p>æ¶æ„ç“¶é¢ˆï¼šç”±äº LVS ä¹Ÿæ˜¯å•æœºçš„ï¼Œéšç€å¹¶å‘æ•°å¢é•¿åˆ°å‡ åä¸‡æ—¶ï¼ŒLVS æœåŠ¡å™¨æœ€ç»ˆä¼šè¾¾åˆ°ç“¶é¢ˆï¼Œæ­¤æ—¶ç”¨æˆ·æ•°è¾¾åˆ°åƒä¸‡ç”šè‡³ä¸Šäº¿çº§åˆ«ï¼Œç”¨æˆ·åˆ†å¸ƒåœ¨ä¸åŒçš„åœ°åŒºï¼Œä¸æœåŠ¡å™¨æœºæˆ¿è·ç¦»ä¸åŒï¼Œå¯¼è‡´äº†è®¿é—®çš„å»¶è¿Ÿä¼šæ˜æ˜¾ä¸åŒã€‚</p>
<h3 data-id="heading-24">5.9. ç¬¬å…«æ¬¡æ¼”è¿›</h3>
<p><strong>é€šè¿‡ DNS è½®è¯¢å®ç°æœºæˆ¿é—´çš„è´Ÿè½½å‡è¡¡</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b0aed386dd2d4eb28c3187f24e5fbe96~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA57q_5aSn56CB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768703932&amp;x-signature=DKAcB9nZaIU5vk8e8bUngjQKlZ4%3D" alt="26ac93ab7d73fa971319946eee6d2193_640_wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1#imgIndex=9.webp" loading="lazy"/></p>
<p>åœ¨ DNS æœåŠ¡å™¨ä¸­å¯é…ç½®ä¸€ä¸ªåŸŸåå¯¹åº”å¤šä¸ª IP åœ°å€ï¼Œæ¯ä¸ª IP åœ°å€å¯¹åº”åˆ°ä¸åŒçš„æœºæˆ¿é‡Œçš„è™šæ‹Ÿ IPã€‚å½“ç”¨æˆ·è®¿é—® <code>www.taobao.com</code> æ—¶ï¼ŒDNS æœåŠ¡å™¨ä¼šä½¿ç”¨è½®è¯¢ç­–ç•¥æˆ–å…¶ä»–ç­–ç•¥ï¼Œæ¥é€‰æ‹©æŸä¸ª IP ä¾›ç”¨æˆ·è®¿é—®ã€‚æ­¤æ–¹å¼èƒ½å®ç°æœºæˆ¿é—´çš„è´Ÿè½½å‡è¡¡ï¼Œè‡³æ­¤ï¼Œç³»ç»Ÿå¯åšåˆ°æœºæˆ¿çº§åˆ«çš„æ°´å¹³æ‰©å±•ï¼Œåƒä¸‡çº§åˆ°äº¿çº§çš„å¹¶å‘é‡éƒ½å¯é€šè¿‡å¢åŠ æœºæˆ¿æ¥è§£å†³ï¼Œ<strong>ç³»ç»Ÿå…¥å£å¤„çš„è¯·æ±‚å¹¶å‘é‡ä¸å†æ˜¯é—®é¢˜</strong>ã€‚</p>
<p>æ¶æ„ç“¶é¢ˆï¼šéšç€æ•°æ®çš„ä¸°å¯Œç¨‹åº¦å’Œä¸šåŠ¡çš„å‘å±•ï¼Œæ£€ç´¢ã€åˆ†æç­‰éœ€æ±‚è¶Šæ¥è¶Šä¸°å¯Œï¼Œå•å•ä¾é æ•°æ®åº“æ— æ³•è§£å†³å¦‚æ­¤ä¸°å¯Œçš„éœ€æ±‚ã€‚</p>
<h3 data-id="heading-25">5.10. ç¬¬ä¹æ¬¡æ¼”è¿›</h3>
<p><strong>å¼•å…¥ NoSQL æ•°æ®åº“å’Œæœç´¢å¼•æ“ç­‰æŠ€æœ¯</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a4bf801fb23e472991c0fcee91bd920d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA57q_5aSn56CB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768703932&amp;x-signature=oqCS8txzR0FuFRV9MdxN66hKPKQ%3D" alt="8a0c0696cbb736fc8ec8f090cb0fb17e_640_wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1#imgIndex=10.webp" loading="lazy"/></p>
<p>å½“æ•°æ®åº“ä¸­çš„æ•°æ®å¤šåˆ°ä¸€å®šè§„æ¨¡æ—¶ï¼Œæ•°æ®åº“å°±ä¸é€‚ç”¨äºå¤æ‚çš„æŸ¥è¯¢äº†ï¼Œå¾€å¾€åªèƒ½æ»¡è¶³æ™®é€šæŸ¥è¯¢çš„åœºæ™¯ã€‚å¯¹äºç»Ÿè®¡æŠ¥è¡¨åœºæ™¯ï¼Œåœ¨æ•°æ®é‡å¤§æ—¶ä¸ä¸€å®šèƒ½è·‘å‡ºç»“æœï¼Œè€Œä¸”åœ¨è·‘å¤æ‚æŸ¥è¯¢æ—¶ä¼šå¯¼è‡´å…¶ä»–æŸ¥è¯¢å˜æ…¢ï¼Œå¯¹äºå…¨æ–‡æ£€ç´¢ã€å¯å˜æ•°æ®ç»“æ„ç­‰åœºæ™¯ï¼Œæ•°æ®åº“å¤©ç”Ÿä¸é€‚ç”¨ã€‚å› æ­¤éœ€è¦é’ˆå¯¹ç‰¹å®šçš„åœºæ™¯ï¼Œå¼•å…¥åˆé€‚çš„è§£å†³æ–¹æ¡ˆã€‚å¦‚å¯¹äºæµ·é‡æ–‡ä»¶å­˜å‚¨ï¼Œå¯é€šè¿‡åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿ HDFS è§£å†³ï¼Œå¯¹äº key value ç±»å‹çš„æ•°æ®ï¼Œå¯é€šè¿‡ HBase å’Œ Redis ç­‰æ–¹æ¡ˆè§£å†³ï¼Œå¯¹äºå…¨æ–‡æ£€ç´¢åœºæ™¯ï¼Œå¯é€šè¿‡æœç´¢å¼•æ“å¦‚ ElasticSearch è§£å†³ï¼Œå¯¹äºå¤šç»´åˆ†æåœºæ™¯ï¼Œå¯é€šè¿‡ Kylin æˆ– Druid ç­‰æ–¹æ¡ˆè§£å†³ã€‚</p>
<p>å½“ç„¶ï¼Œå¼•å…¥æ›´å¤šç»„ä»¶åŒæ—¶ä¼šæé«˜ç³»ç»Ÿçš„å¤æ‚åº¦ï¼Œä¸åŒçš„ç»„ä»¶ä¿å­˜çš„æ•°æ®éœ€è¦åŒæ­¥ï¼Œéœ€è¦è€ƒè™‘ä¸€è‡´æ€§çš„é—®é¢˜ï¼Œéœ€è¦æœ‰æ›´å¤šçš„è¿ç»´æ‰‹æ®µæ¥ç®¡ç†è¿™äº›ç»„ä»¶ç­‰ã€‚</p>
<p>æ¶æ„ç“¶é¢ˆï¼šå¼•å…¥æ›´å¤šç»„ä»¶è§£å†³äº†ä¸°å¯Œçš„éœ€æ±‚ï¼Œä¸šåŠ¡ç»´åº¦èƒ½å¤Ÿæå¤§æ‰©å……ï¼Œéšä¹‹è€Œæ¥çš„æ˜¯ä¸€ä¸ªåº”ç”¨ä¸­åŒ…å«äº†å¤ªå¤šçš„ä¸šåŠ¡ä»£ç ï¼Œä¸šåŠ¡çš„å‡çº§è¿­ä»£å˜å¾—å›°éš¾ã€‚</p>
<h3 data-id="heading-26">5.11. ç¬¬åæ¬¡æ¼”è¿›</h3>
<p><strong>å¤§åº”ç”¨æ‹†åˆ†ä¸ºå°åº”ç”¨</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4d00da37d8ac4deea8fc4f4585c3ceb1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA57q_5aSn56CB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768703932&amp;x-signature=AZqfUaYHTifU%2BGQQ04if36tFSZ0%3D" alt="5681d61143c73f79c14a97088c554762_640_wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1#imgIndex=11.webp" loading="lazy"/></p>
<p>æŒ‰ç…§ä¸šåŠ¡æ¿å—æ¥åˆ’åˆ†åº”ç”¨ä»£ç ï¼Œä½¿å•ä¸ªåº”ç”¨çš„èŒè´£æ›´æ¸…æ™°ï¼Œç›¸äº’ä¹‹é—´å¯ä»¥åšåˆ°ç‹¬ç«‹å‡çº§è¿­ä»£ã€‚è¿™æ—¶å€™åº”ç”¨ä¹‹é—´å¯èƒ½ä¼šæ¶‰åŠåˆ°ä¸€äº›å…¬å…±é…ç½®ï¼Œå¯ä»¥é€šè¿‡åˆ†å¸ƒå¼é…ç½®ä¸­å¿ƒ Zookeeper æ¥è§£å†³ã€‚</p>
<p>æ¶æ„ç“¶é¢ˆï¼šä¸åŒåº”ç”¨ä¹‹é—´å­˜åœ¨å…±ç”¨çš„æ¨¡å—ï¼Œç”±åº”ç”¨å•ç‹¬ç®¡ç†ä¼šå¯¼è‡´ç›¸åŒä»£ç å­˜åœ¨å¤šä»½ï¼Œå¯¼è‡´å…¬å…±åŠŸèƒ½å‡çº§æ—¶å…¨éƒ¨åº”ç”¨ä»£ç éƒ½è¦è·Ÿç€å‡çº§ã€‚</p>
<h3 data-id="heading-27">5.12. ç¬¬åä¸€æ¬¡æ¼”è¿›</h3>
<p><strong>å¤ç”¨çš„åŠŸèƒ½æŠ½ç¦»æˆå¾®æœåŠ¡</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/23a534cb934c4b209af4a56499482376~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA57q_5aSn56CB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768703932&amp;x-signature=EveK8JBZPKuiC70wZW%2BALalDqVw%3D" alt="acfdf3b69e1f01099bf338647ef9b4ca_640_wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1#imgIndex=12.webp" loading="lazy"/></p>
<p>å¦‚ç”¨æˆ·ç®¡ç†ã€è®¢å•ã€æ”¯ä»˜ã€é‰´æƒç­‰åŠŸèƒ½åœ¨å¤šä¸ªåº”ç”¨ä¸­éƒ½å­˜åœ¨ï¼Œé‚£ä¹ˆå¯ä»¥æŠŠè¿™äº›åŠŸèƒ½çš„ä»£ç å•ç‹¬æŠ½å–å‡ºæ¥å½¢æˆä¸€ä¸ªå•ç‹¬çš„æœåŠ¡æ¥ç®¡ç†ï¼Œè¿™æ ·çš„æœåŠ¡å°±æ˜¯æ‰€è°“çš„å¾®æœåŠ¡ï¼Œåº”ç”¨å’ŒæœåŠ¡ä¹‹é—´é€šè¿‡ HTTPã€TCP æˆ– RPC è¯·æ±‚ç­‰å¤šç§æ–¹å¼æ¥è®¿é—®å…¬å…±æœåŠ¡ï¼Œæ¯ä¸ªå•ç‹¬çš„æœåŠ¡éƒ½å¯ä»¥ç”±å•ç‹¬çš„å›¢é˜Ÿæ¥ç®¡ç†ã€‚æ­¤å¤–ï¼Œå¯ä»¥é€šè¿‡ Dubboã€SpringClou ç­‰æ¡†æ¶å®ç°æœåŠ¡æ²»ç†ã€é™æµã€ç†”æ–­ã€é™çº§ç­‰åŠŸèƒ½ï¼Œæé«˜æœåŠ¡çš„ç¨³å®šæ€§å’Œå¯ç”¨æ€§ã€‚</p>
<p>æ¶æ„ç“¶é¢ˆï¼šä¸åŒæœåŠ¡çš„æ¥å£è®¿é—®æ–¹å¼ä¸åŒï¼Œåº”ç”¨ä»£ç éœ€è¦é€‚é…å¤šç§è®¿é—®æ–¹å¼æ‰èƒ½ä½¿ç”¨æœåŠ¡ï¼Œæ­¤å¤–ï¼Œåº”ç”¨è®¿é—®æœåŠ¡ï¼ŒæœåŠ¡ä¹‹é—´ä¹Ÿå¯èƒ½ç›¸äº’è®¿é—®ï¼Œè°ƒç”¨é“¾å°†ä¼šå˜å¾—éå¸¸å¤æ‚ï¼Œé€»è¾‘å˜å¾—æ··ä¹±ã€‚</p>
<h3 data-id="heading-28">5.13. ç¬¬åäºŒæ¬¡æ¼”è¿›ï¼ˆSOAï¼‰</h3>
<p><strong>å¼•å…¥ä¼ä¸šæœåŠ¡æ€»çº¿(ESBï¼ŒEnterprise Service Bus)å±è”½æœåŠ¡æ¥å£çš„è®¿é—®å·®å¼‚</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c4c4992985554f5babc5efb4a4a57c47~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA57q_5aSn56CB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768703932&amp;x-signature=LdFV842wTWe4hXY8RT7C%2BQYifdY%3D" alt="6af19fe8244134e3a4389b83516bfc51_640_wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1#imgIndex=13.webp" loading="lazy"/></p>
<p>é€šè¿‡ ESB ç»Ÿä¸€è¿›è¡Œè®¿é—®åè®®è½¬æ¢ï¼Œåº”ç”¨ç»Ÿä¸€é€šè¿‡ ESB æ¥è®¿é—®åç«¯æœåŠ¡ï¼ŒæœåŠ¡ä¸æœåŠ¡ä¹‹é—´ä¹Ÿé€šè¿‡ ESB æ¥ç›¸äº’è°ƒç”¨ï¼Œä»¥æ­¤é™ä½ç³»ç»Ÿçš„è€¦åˆç¨‹åº¦ã€‚</p>
<p>è¿™ç§å•ä¸ªåº”ç”¨æ‹†åˆ†ä¸ºå¤šä¸ªåº”ç”¨ï¼Œå…¬å…±æœåŠ¡å•ç‹¬æŠ½å–å‡ºæ¥æ¥ç®¡ç†ï¼Œå¹¶ä½¿ç”¨ä¼ä¸šæ¶ˆæ¯æ€»çº¿æ¥è§£é™¤æœåŠ¡ä¹‹é—´è€¦åˆé—®é¢˜çš„æ¶æ„ï¼Œå°±æ˜¯æ‰€è°“çš„ SOAï¼ˆé¢å‘æœåŠ¡ï¼‰æ¶æ„ï¼Œè¿™ç§æ¶æ„ä¸å¾®æœåŠ¡æ¶æ„å®¹æ˜“æ··æ·†ï¼Œå› ä¸ºè¡¨ç°å½¢å¼ååˆ†ç›¸ä¼¼ã€‚</p>
<p><strong>ä¸ªäººç†è§£ï¼Œå¾®æœåŠ¡æ¶æ„æ›´å¤šæ˜¯æŒ‡æŠŠç³»ç»Ÿé‡Œçš„å…¬å…±æœåŠ¡æŠ½å–å‡ºæ¥å•ç‹¬è¿ç»´ç®¡ç†çš„æ€æƒ³ï¼Œè€Œ SOA æ¶æ„åˆ™æ˜¯æŒ‡ä¸€ç§æ‹†åˆ†æœåŠ¡å¹¶ä½¿æœåŠ¡æ¥å£è®¿é—®å˜å¾—ç»Ÿä¸€çš„æ¶æ„æ€æƒ³ï¼ŒSOA æ¶æ„ä¸­åŒ…å«äº†å¾®æœåŠ¡çš„æ€æƒ³ã€‚</strong></p>
<p>æ¶æ„ç“¶é¢ˆï¼šä¸šåŠ¡ä¸æ–­å‘å±•ï¼Œåº”ç”¨å’ŒæœåŠ¡éƒ½ä¼šä¸æ–­å˜å¤šï¼Œåº”ç”¨å’ŒæœåŠ¡çš„éƒ¨ç½²å˜å¾—å¤æ‚ï¼ŒåŒä¸€å°æœåŠ¡å™¨ä¸Šéƒ¨ç½²å¤šä¸ªæœåŠ¡è¿˜è¦è§£å†³è¿è¡Œç¯å¢ƒå†²çªçš„é—®é¢˜ï¼Œæ­¤å¤–ï¼Œå¯¹äºå¦‚å¤§ä¿ƒè¿™ç±»éœ€è¦åŠ¨æ€æ‰©ç¼©å®¹çš„åœºæ™¯ï¼Œéœ€è¦æ°´å¹³æ‰©å±•æœåŠ¡çš„æ€§èƒ½ï¼Œå°±éœ€è¦åœ¨æ–°å¢çš„æœåŠ¡ä¸Šå‡†å¤‡è¿è¡Œç¯å¢ƒï¼Œéƒ¨ç½²æœåŠ¡ç­‰ï¼Œè¿ç»´å°†å˜å¾—ååˆ†å›°éš¾ã€‚</p>
<h3 data-id="heading-29">5.14. ç¬¬åä¸‰æ¬¡æ¼”è¿›</h3>
<p><strong>å¼•å…¥å®¹å™¨åŒ–æŠ€æœ¯å®ç°è¿è¡Œç¯å¢ƒéš”ç¦»ä¸åŠ¨æ€æœåŠ¡ç®¡ç†</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/725b9820dfdb43c78580fdd1ab193da1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA57q_5aSn56CB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768703932&amp;x-signature=dlkHQHWxR%2Bl5fBCsIAs0ZKY%2BRAI%3D" alt="7401f25b7ba14c38c7a69b006b94fd69_640_wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1#imgIndex=14.webp" loading="lazy"/></p>
<p>ç›®å‰æœ€æµè¡Œçš„å®¹å™¨åŒ–æŠ€æœ¯æ˜¯ Dockerï¼Œæœ€æµè¡Œçš„å®¹å™¨ç®¡ç†æœåŠ¡æ˜¯ Kubernetes(K8S)ï¼Œåº”ç”¨/æœåŠ¡å¯ä»¥æ‰“åŒ…ä¸º Docker é•œåƒï¼Œé€šè¿‡ K8S æ¥åŠ¨æ€åˆ†å‘å’Œéƒ¨ç½²é•œåƒã€‚Docker é•œåƒå¯ç†è§£ä¸ºä¸€ä¸ªèƒ½è¿è¡Œä½ çš„åº”ç”¨/æœåŠ¡çš„æœ€å°çš„æ“ä½œç³»ç»Ÿï¼Œé‡Œé¢æ”¾ç€åº”ç”¨/æœåŠ¡çš„è¿è¡Œä»£ç ï¼Œè¿è¡Œç¯å¢ƒæ ¹æ®å®é™…çš„éœ€è¦è®¾ç½®å¥½ã€‚æŠŠæ•´ä¸ªâ€œæ“ä½œç³»ç»Ÿâ€æ‰“åŒ…ä¸ºä¸€ä¸ªé•œåƒåï¼Œå°±å¯ä»¥åˆ†å‘åˆ°éœ€è¦éƒ¨ç½²ç›¸å…³æœåŠ¡çš„æœºå™¨ä¸Šï¼Œç›´æ¥å¯åŠ¨ Docker é•œåƒå°±å¯ä»¥æŠŠæœåŠ¡èµ·èµ·æ¥ï¼Œä½¿æœåŠ¡çš„éƒ¨ç½²å’Œè¿ç»´å˜å¾—ç®€å•ã€‚</p>
<p>åœ¨å¤§ä¿ƒçš„ä¹‹å‰ï¼Œå¯ä»¥åœ¨ç°æœ‰çš„æœºå™¨é›†ç¾¤ä¸Šåˆ’åˆ†å‡ºæœåŠ¡å™¨æ¥å¯åŠ¨ Docker é•œåƒï¼Œå¢å¼ºæœåŠ¡çš„æ€§èƒ½ï¼Œå¤§ä¿ƒè¿‡åå°±å¯ä»¥å…³é—­é•œåƒï¼Œå¯¹æœºå™¨ä¸Šçš„å…¶ä»–æœåŠ¡ä¸é€ æˆå½±å“ã€‚</p>
<p>æ¶æ„ç“¶é¢ˆï¼šä½¿ç”¨å®¹å™¨åŒ–æŠ€æœ¯åæœåŠ¡åŠ¨æ€æ‰©ç¼©å®¹é—®é¢˜å¾—ä»¥è§£å†³ï¼Œä½†æ˜¯æœºå™¨è¿˜æ˜¯éœ€è¦å…¬å¸è‡ªèº«æ¥ç®¡ç†ï¼Œåœ¨éå¤§ä¿ƒçš„æ—¶å€™ï¼Œè¿˜æ˜¯éœ€è¦é—²ç½®ç€å¤§é‡çš„æœºå™¨èµ„æºæ¥åº”å¯¹å¤§ä¿ƒï¼Œæœºå™¨è‡ªèº«æˆæœ¬å’Œè¿ç»´æˆæœ¬éƒ½æé«˜ï¼Œèµ„æºåˆ©ç”¨ç‡ä½ã€‚</p>
<h3 data-id="heading-30">5.15. ç¬¬åå››æ¬¡æ¼”è¿›</h3>
<p><strong>ä»¥äº‘å¹³å°æ‰¿è½½ç³»ç»Ÿ</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dd07bc684c584e228d3105eff161d67c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA57q_5aSn56CB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768703932&amp;x-signature=y4ghwmLrpbCaxJ%2FDlXGJERU5uBQ%3D" alt="5c963715366c2d30271663e37847eea3_640_wx_fmt=jpeg&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1#imgIndex=15.webp" loading="lazy"/></p>
<p>ç³»ç»Ÿå¯éƒ¨ç½²åˆ°å…¬æœ‰äº‘ä¸Šï¼Œåˆ©ç”¨å…¬æœ‰äº‘çš„æµ·é‡æœºå™¨èµ„æºï¼Œè§£å†³åŠ¨æ€ç¡¬ä»¶èµ„æºçš„é—®é¢˜ï¼Œåœ¨å¤§ä¿ƒçš„æ—¶é—´æ®µé‡Œï¼Œåœ¨äº‘å¹³å°ä¸­ä¸´æ—¶ç”³è¯·æ›´å¤šçš„èµ„æºï¼Œç»“åˆ Docker å’Œ K8S æ¥å¿«é€Ÿéƒ¨ç½²æœåŠ¡ï¼Œåœ¨å¤§ä¿ƒç»“æŸåé‡Šæ”¾èµ„æºï¼ŒçœŸæ­£åšåˆ°æŒ‰éœ€ä»˜è´¹ï¼Œèµ„æºåˆ©ç”¨ç‡å¤§å¤§æé«˜ï¼ŒåŒæ—¶å¤§å¤§é™ä½äº†è¿ç»´æˆæœ¬ã€‚</p>
<p>æ‰€è°“çš„äº‘å¹³å°ï¼Œå°±æ˜¯æŠŠæµ·é‡æœºå™¨èµ„æºï¼Œé€šè¿‡ç»Ÿä¸€çš„èµ„æºç®¡ç†ï¼ŒæŠ½è±¡ä¸ºä¸€ä¸ªèµ„æºæ•´ä½“ï¼Œåœ¨ä¹‹ä¸Šå¯æŒ‰éœ€åŠ¨æ€ç”³è¯·ç¡¬ä»¶èµ„æºï¼ˆå¦‚ CPUã€å†…å­˜ã€ç½‘ç»œç­‰ï¼‰ï¼Œå¹¶ä¸”ä¹‹ä¸Šæä¾›é€šç”¨çš„æ“ä½œç³»ç»Ÿï¼Œæä¾›å¸¸ç”¨çš„æŠ€æœ¯ç»„ä»¶ï¼ˆå¦‚ Hadoop æŠ€æœ¯æ ˆï¼ŒMPP æ•°æ®åº“ç­‰ï¼‰ä¾›ç”¨æˆ·ä½¿ç”¨ï¼Œç”šè‡³æä¾›å¼€å‘å¥½çš„åº”ç”¨ï¼Œç”¨æˆ·ä¸éœ€è¦å…³å¿ƒåº”ç”¨å†…éƒ¨ä½¿ç”¨äº†ä»€ä¹ˆæŠ€æœ¯ï¼Œå°±èƒ½å¤Ÿè§£å†³éœ€æ±‚ï¼ˆå¦‚éŸ³è§†é¢‘è½¬ç æœåŠ¡ã€é‚®ä»¶æœåŠ¡ã€ä¸ªäººåšå®¢ç­‰ï¼‰ã€‚åœ¨äº‘å¹³å°ä¸­ä¼šæ¶‰åŠå¦‚ä¸‹å‡ ä¸ªæ¦‚å¿µï¼š</p>
<ol>
<li>
<p>IaaSï¼šåŸºç¡€è®¾æ–½å³æœåŠ¡ã€‚å¯¹åº”äºä¸Šé¢æ‰€è¯´çš„æœºå™¨èµ„æºç»Ÿä¸€ä¸ºèµ„æºæ•´ä½“ï¼Œå¯åŠ¨æ€ç”³è¯·ç¡¬ä»¶èµ„æºçš„å±‚é¢ï¼›</p>
</li>
<li>
<p>PaaSï¼šå¹³å°å³æœåŠ¡ã€‚å¯¹åº”äºä¸Šé¢æ‰€è¯´çš„æä¾›å¸¸ç”¨çš„æŠ€æœ¯ç»„ä»¶æ–¹ä¾¿ç³»ç»Ÿçš„å¼€å‘å’Œç»´æŠ¤ï¼›</p>
</li>
<li>
<p>SaaSï¼šè½¯ä»¶å³æœåŠ¡ã€‚å¯¹åº”äºä¸Šé¢æ‰€è¯´çš„æä¾›å¼€å‘å¥½çš„åº”ç”¨æˆ–æœåŠ¡ï¼ŒæŒ‰åŠŸèƒ½æˆ–æ€§èƒ½è¦æ±‚ä»˜è´¹ã€‚</p>
</li>
</ol>
<h2 data-id="heading-31">6. æ¶æ„è®¾è®¡ç»éªŒå°ç»“</h2>
<p><strong>1ï¼‰æ¶æ„çš„è°ƒæ•´æ˜¯å¦å¿…é¡»æŒ‰ç…§ä¸Šè¿°æ¼”å˜è·¯å¾„è¿›è¡Œï¼Ÿ</strong></p>
<p>ä¸æ˜¯çš„ï¼Œä»¥ä¸Šæ‰€è¯´çš„æ¶æ„æ¼”å˜é¡ºåºåªæ˜¯é’ˆå¯¹æŸä¸ªä¾§é¢è¿›è¡Œå•ç‹¬çš„æ”¹è¿›ï¼Œåœ¨å®é™…åœºæ™¯ä¸­ï¼Œå¯èƒ½åŒä¸€æ—¶é—´ä¼šæœ‰å‡ ä¸ªé—®é¢˜éœ€è¦è§£å†³ï¼Œæˆ–è€…å¯èƒ½å…ˆè¾¾åˆ°ç“¶é¢ˆçš„æ˜¯å¦å¤–çš„æ–¹é¢ï¼Œè¿™æ—¶å€™å°±åº”è¯¥æŒ‰ç…§å®é™…é—®é¢˜å®é™…è§£å†³ã€‚å¦‚åœ¨æ”¿åºœç±»çš„å¹¶å‘é‡å¯èƒ½ä¸å¤§ï¼Œä½†ä¸šåŠ¡å¯èƒ½å¾ˆä¸°å¯Œçš„åœºæ™¯ï¼Œé«˜å¹¶å‘å°±ä¸æ˜¯é‡ç‚¹è§£å†³çš„é—®é¢˜ï¼Œæ­¤æ—¶ä¼˜å…ˆéœ€è¦çš„å¯èƒ½ä¼šæ˜¯ä¸°å¯Œéœ€æ±‚çš„è§£å†³æ–¹æ¡ˆã€‚</p>
<p><strong>2ï¼‰å¯¹äºå°†è¦å®æ–½çš„ç³»ç»Ÿï¼Œæ¶æ„åº”è¯¥è®¾è®¡åˆ°ä»€ä¹ˆç¨‹åº¦ï¼Ÿ</strong></p>
<p>å¯¹äºå•æ¬¡å®æ–½å¹¶ä¸”æ€§èƒ½æŒ‡æ ‡æ˜ç¡®çš„ç³»ç»Ÿï¼Œæ¶æ„è®¾è®¡åˆ°èƒ½å¤Ÿæ”¯æŒç³»ç»Ÿçš„æ€§èƒ½æŒ‡æ ‡è¦æ±‚å°±è¶³å¤Ÿäº†ï¼Œä½†è¦ç•™æœ‰æ‰©å±•æ¶æ„çš„æ¥å£ä»¥å¤‡ä¸æ—¶ä¹‹éœ€ã€‚å¯¹äºä¸æ–­å‘å±•çš„ç³»ç»Ÿï¼Œå¦‚ç”µå•†å¹³å°ï¼Œåº”è®¾è®¡åˆ°èƒ½æ»¡è¶³ä¸‹ä¸€é˜¶æ®µç”¨æˆ·é‡å’Œæ€§èƒ½æŒ‡æ ‡è¦æ±‚çš„ç¨‹åº¦ï¼Œå¹¶æ ¹æ®ä¸šåŠ¡çš„å¢é•¿ä¸æ–­çš„è¿­ä»£å‡çº§æ¶æ„ï¼Œä»¥æ”¯æŒæ›´é«˜çš„å¹¶å‘å’Œæ›´ä¸°å¯Œçš„ä¸šåŠ¡ã€‚</p>
<p><strong>3ï¼‰æœåŠ¡ç«¯æ¶æ„å’Œå¤§æ•°æ®æ¶æ„æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</strong></p>
<p>æ‰€è°“çš„â€œå¤§æ•°æ®â€å…¶å®æ˜¯æµ·é‡æ•°æ®é‡‡é›†æ¸…æ´—è½¬æ¢ã€æ•°æ®å­˜å‚¨ã€æ•°æ®åˆ†æã€æ•°æ®æœåŠ¡ç­‰åœºæ™¯è§£å†³æ–¹æ¡ˆçš„ä¸€ä¸ªç»Ÿç§°ï¼Œåœ¨æ¯ä¸€ä¸ªåœºæ™¯éƒ½åŒ…å«äº†å¤šç§å¯é€‰çš„æŠ€æœ¯ï¼Œå¦‚æ•°æ®é‡‡é›†æœ‰ Flumeã€Sqoopã€Kettle ç­‰ï¼Œæ•°æ®å­˜å‚¨æœ‰åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»ŸHDFSã€FastDFSï¼ŒNoSQL æ•°æ®åº“ HBaseã€MongoDB ç­‰ï¼Œæ•°æ®åˆ†ææœ‰ Spark æŠ€æœ¯æ ˆã€æœºå™¨å­¦ä¹ ç®—æ³•ç­‰ã€‚</p>
<p>æ€»çš„æ¥è¯´å¤§æ•°æ®æ¶æ„å°±æ˜¯æ ¹æ®ä¸šåŠ¡çš„éœ€æ±‚ï¼Œæ•´åˆå„ç§å¤§æ•°æ®ç»„ä»¶ç»„åˆè€Œæˆçš„æ¶æ„ï¼Œä¸€èˆ¬ä¼šæä¾›åˆ†å¸ƒå¼å­˜å‚¨ã€åˆ†å¸ƒå¼è®¡ç®—ã€å¤šç»´åˆ†æã€æ•°æ®ä»“åº“ã€æœºå™¨å­¦ä¹ ç®—æ³•ç­‰èƒ½åŠ›ã€‚è€ŒæœåŠ¡ç«¯æ¶æ„æ›´å¤šæŒ‡çš„æ˜¯åº”ç”¨ç»„ç»‡å±‚é¢çš„æ¶æ„ï¼Œåº•å±‚èƒ½åŠ›å¾€å¾€æ˜¯ç”±å¤§æ•°æ®æ¶æ„æ¥æä¾›ã€‚</p>
<p><strong>4ï¼‰æœ‰æ²¡æœ‰ä¸€äº›æ¶æ„è®¾è®¡çš„åŸåˆ™ï¼Ÿ</strong></p>
<p>a. N+1 è®¾è®¡ï¼šç³»ç»Ÿä¸­çš„æ¯ä¸ªç»„ä»¶éƒ½åº”åšåˆ°æ²¡æœ‰å•ç‚¹æ•…éšœï¼›</p>
<p>b. å›æ»šè®¾è®¡ï¼šç¡®ä¿ç³»ç»Ÿå¯ä»¥å‘å‰å…¼å®¹ï¼Œåœ¨ç³»ç»Ÿå‡çº§æ—¶åº”èƒ½æœ‰åŠæ³•å›æ»šç‰ˆæœ¬ï¼›</p>
<p>c. ç¦ç”¨è®¾è®¡ï¼šåº”è¯¥æä¾›æ§åˆ¶å…·ä½“åŠŸèƒ½æ˜¯å¦å¯ç”¨çš„é…ç½®ï¼Œåœ¨ç³»ç»Ÿå‡ºç°æ•…éšœæ—¶èƒ½å¤Ÿå¿«é€Ÿä¸‹çº¿åŠŸèƒ½ï¼›</p>
<p>d. ç›‘æ§è®¾è®¡ï¼šåœ¨è®¾è®¡é˜¶æ®µå°±è¦è€ƒè™‘ç›‘æ§çš„æ‰‹æ®µï¼›</p>
<p>e. å¤šæ´»æ•°æ®ä¸­å¿ƒè®¾è®¡ï¼šè‹¥ç³»ç»Ÿéœ€è¦æé«˜çš„é«˜å¯ç”¨ï¼Œåº”è€ƒè™‘åœ¨å¤šåœ°å®æ–½æ•°æ®ä¸­å¿ƒè¿›è¡Œå¤šæ´»ï¼Œè‡³å°‘åœ¨ä¸€ä¸ªæœºæˆ¿æ–­ç”µçš„æƒ…å†µä¸‹ç³»ç»Ÿä¾ç„¶å¯ç”¨ï¼›</p>
<p>f. é‡‡ç”¨æˆç†Ÿçš„æŠ€æœ¯ï¼šåˆšå¼€å‘çš„æˆ–å¼€æºçš„æŠ€æœ¯å¾€å¾€å­˜åœ¨å¾ˆå¤šéšè—çš„ bugï¼Œå‡ºäº†é—®é¢˜æ²¡æœ‰å•†ä¸šæ”¯æŒå¯èƒ½ä¼šæ˜¯ä¸€ä¸ªç¾éš¾ï¼›</p>
<p>g. èµ„æºéš”ç¦»è®¾è®¡ï¼šåº”é¿å…å•ä¸€ä¸šåŠ¡å ç”¨å…¨éƒ¨èµ„æºï¼›</p>
<p>h. æ¶æ„åº”èƒ½æ°´å¹³æ‰©å±•ï¼šç³»ç»Ÿåªæœ‰åšåˆ°èƒ½æ°´å¹³æ‰©å±•ï¼Œæ‰èƒ½æœ‰æ•ˆé¿å…ç“¶é¢ˆé—®é¢˜ï¼›</p>
<p>i. éæ ¸å¿ƒåˆ™è´­ä¹°ï¼šéæ ¸å¿ƒåŠŸèƒ½è‹¥éœ€è¦å ç”¨å¤§é‡çš„ç ”å‘èµ„æºæ‰èƒ½è§£å†³ï¼Œåˆ™è€ƒè™‘è´­ä¹°æˆç†Ÿçš„äº§å“ï¼›</p>
<p>j. ä½¿ç”¨å•†ç”¨ç¡¬ä»¶ï¼šå•†ç”¨ç¡¬ä»¶èƒ½æœ‰æ•ˆé™ä½ç¡¬ä»¶æ•…éšœçš„æœºç‡ï¼›</p>
<p>k. å¿«é€Ÿè¿­ä»£ï¼šç³»ç»Ÿåº”è¯¥å¿«é€Ÿå¼€å‘å°åŠŸèƒ½æ¨¡å—ï¼Œå°½å¿«ä¸Šçº¿è¿›è¡ŒéªŒè¯ï¼Œæ—©æ—¥å‘ç°é—®é¢˜å¤§å¤§é™ä½ç³»ç»Ÿäº¤ä»˜çš„é£é™©ï¼›</p>
<p>l. æ— çŠ¶æ€è®¾è®¡ï¼šæœåŠ¡æ¥å£åº”è¯¥åšæˆæ— çŠ¶æ€çš„ï¼Œå½“å‰æ¥å£çš„è®¿é—®ä¸ä¾èµ–äºæ¥å£ä¸Šæ¬¡è®¿é—®çš„çŠ¶æ€ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Token ç»æµå­¦ï¼šAI å·¥ç¨‹å¸ˆå¿…ä¿®çš„ Token æ²»ç†å®æˆ˜]]></title>    <link>https://juejin.cn/post/7593337928307736602</link>    <guid>https://juejin.cn/post/7593337928307736602</guid>    <pubDate>2026-01-10T13:34:23.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7593337928307736602" data-draft-id="7593261984190660658" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Token ç»æµå­¦ï¼šAI å·¥ç¨‹å¸ˆå¿…ä¿®çš„ Token æ²»ç†å®æˆ˜"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-01-10T13:34:23.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="AIå·¥ç¨‹åŒ–å®éªŒå®¤"/> <meta itemprop="url" content="https://juejin.cn/user/2612095357040989"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Token ç»æµå­¦ï¼šAI å·¥ç¨‹å¸ˆå¿…ä¿®çš„ Token æ²»ç†å®æˆ˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2612095357040989/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    AIå·¥ç¨‹åŒ–å®éªŒå®¤
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-10T13:34:23.000Z" title="Sat Jan 10 2026 13:34:23 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»13åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9d019b9a80514df4b0e42217039a96d5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlt6XnqIvljJblrp7pqozlrqQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768656862&amp;x-signature=IYj2iCfWTZ%2BNZ8KfEHWNSb0Z4Qk%3D" alt="cover.webp" loading="lazy"/></p>
<h3 data-id="heading-0">å¼•è¨€ï¼šå½“â€œé‡‘ç§‘ç‰å¾‹â€å˜æˆâ€œå‰§æ¯’è¯ä¸¸â€</h3>
<p><strong>â€œè¿‡æ—©ä¼˜åŒ–æ˜¯ä¸‡æ¶ä¹‹æºã€‚â€</strong></p>
<p>è¿™æ˜¯è®¡ç®—æœºç§‘å­¦æ³°æ–— Donald Knuth åœ¨ã€Šè®¡ç®—æœºç¼–ç¨‹è‰ºæœ¯ã€‹ä¸­ç•™ä¸‹çš„åè¨€ã€‚åœ¨ Web å¼€å‘çš„é»„é‡‘æ—¶ä»£ï¼Œè¿™å¥è¯æ˜¯æ— æ•°å·¥ç¨‹å¸ˆçš„æŠ¤èº«ç¬¦ã€‚å¦‚æœä½ åœ¨é¡¹ç›®åˆæœŸå°±ä¸ºäº†çœå‡  KB å†…å­˜ã€å°‘å‡ æ¬¡ CPU å¾ªç¯è€Œç»å°½è„‘æ±ï¼Œé€šå¸¸ä¼šè¢«å˜²ç¬‘ä¸ºä¸æ‡‚å·¥ç¨‹ã€‚å› ä¸ºæœåŠ¡å™¨èµ„æºæ˜¯å»‰ä»·çš„ã€å›ºå®šçš„ï¼Œä»£ç å¤šè·‘ä¸€åœˆå¾ªç¯çš„è¾¹é™…æˆæœ¬ï¼Œå‡ ä¹ä¸ºé›¶ã€‚</p>
<p>ç„¶è€Œï¼Œå½“ä½ è¸å…¥ AI Engineering çš„é¢†åŸŸï¼Œè¿™å¥è¯å´æˆäº†æœ€å±é™©çš„æ¯’è¯ã€‚</p>
<p>AI å¼€å‘ä¸ä¼ ç»Ÿå¼€å‘ä¹‹é—´ï¼Œæ¨ªäº˜ç€ä¸€é“å·¨å¤§çš„é¸¿æ²Ÿâ€”â€”<strong>â€œç®—åŠ›æˆæœ¬â€çš„è®¡ç®—é€»è¾‘å½»åº•å˜äº†ã€‚</strong></p>
<ul>
<li>åœ¨ä¼ ç»Ÿå¼€å‘ä¸­ï¼šä½ å¤šæ‰“å°ä¸€è¡Œ Logï¼Œå¤šè¿”å›ä¸€ä¸ªå†—ä½™çš„ JSON å­—æ®µï¼Œå¤šå†™ä¸€ä¸ª if-elseï¼Œå¯¹æˆæœ¬çš„å½±å“å¾®ä¹å…¶å¾®ï¼ŒåŸºæœ¬å¯ä»¥å¿½ç•¥ä¸è®¡ã€‚</li>
<li>åœ¨ AI å¼€å‘ä¸­ï¼šæ¯ä¸€æ¬¡ API è°ƒç”¨ï¼Œæ¯ä¸€ä¸ªä½ å¡è¿› Context çš„å­—ç¬¦ï¼Œç”šè‡³æ¯ä¸€æ¬¡æ¨¡å‹è¾“å‡ºçš„æ¢è¡Œç¬¦ï¼Œ<strong>éƒ½æ˜¯ç›´æ¥çš„ã€å®æ—¶çš„ã€æŒ‰é‡è®¡è´¹çš„çœŸé‡‘ç™½é“¶ã€‚</strong></li>
</ul>
<p>è¿™æ„å‘³ç€ï¼Œ<strong>Token ä¸å†æ˜¯å•çº¯çš„æŠ€æœ¯å‚æ•°ï¼Œå®ƒæ˜¯ä½ çš„â€œè´¢åŠ¡è´¦æœ¬â€ã€‚</strong></p>
<p>å¦‚æœä½ ä¾ç„¶å¸¦ç€ä¼ ç»Ÿå¼€å‘çš„æƒ¯æ€§â€”â€”â€œå…ˆæŠŠåŠŸèƒ½è·‘é€šï¼Œä¸Šçº¿åå†è€ƒè™‘ä¼˜åŒ–â€â€”â€”é‚£ä¹ˆåœ¨ LLM ç³»ç»Ÿè§„æ¨¡åŒ–æ‰©å±•çš„é‚£ä¸€åˆ»ï¼Œä½ å°†é¢ä¸´ç¾éš¾æ€§çš„åæœï¼šç³»ç»Ÿçš„è¾¹é™…æˆæœ¬ä¸ä¼šéšç€è§„æ¨¡æ•ˆåº”é™ä½ï¼Œåè€Œä¼šå› ä¸ºæ¶æ„è®¾è®¡çš„ç²—ç³™è€Œå‘ˆæŒ‡æ•°çº§çˆ†ç‚¸ã€‚</p>
<p><strong>åœ¨ AI æ—¶ä»£ï¼Œæˆæœ¬æ§åˆ¶ä¸å†æ˜¯ä¸Šçº¿åçš„è¿ç»´å·¥ä½œï¼Œè€Œæ˜¯å†™ç¬¬ä¸€è¡Œä»£ç å‰çš„æ¶æ„è®¾è®¡ã€‚</strong></p>
<h2 data-id="heading-1">ä¸€ï½œä¸ºä»€ä¹ˆ Token æ²»ç†ä¸èƒ½ç•™åˆ°â€œä¸Šçº¿å‰å¤•â€ï¼Ÿ</h2>
<p>è¿™æ˜¯ AI Engineer å¿…é¡»è·¨è¶Šçš„ä¸€é“è®¤çŸ¥åˆ†æ°´å²­ï¼š<strong>å‘Šåˆ«â€œå…ˆè·‘é€šï¼Œå†ä¼˜åŒ–â€çš„ä¼ ç»Ÿè½¯ä»¶æ€ç»´ã€‚</strong></p>
<p>åœ¨ä¼ ç»Ÿè½¯ä»¶å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ä¹ æƒ¯å°†æ€§èƒ½ä¼˜åŒ–æ”¾åœ¨é¡¹ç›®æ”¶å°¾é˜¶æ®µç”šè‡³ä¸Šçº¿ä»¥åã€‚å› ä¸ºå°†ä¸€æ®µ Python ä»£ç çš„æ‰§è¡Œæ•ˆç‡æå‡ 20%ï¼Œé€šå¸¸åªæ˜¯è®©ç¨‹åºè·‘å¾—æ›´å¿«ï¼Œè€Œä¸ä¼šæ”¹å˜æ ¸å¿ƒåŠŸèƒ½ã€‚ä½†åœ¨ LLM çš„ä¸–ç•Œé‡Œï¼Œè¿™æ˜¯ä¸€ä¸ªè‡´å‘½çš„é™·é˜±ã€‚</p>
<p><strong>å› ä¸º Token ä¸ä»…ä»…æ˜¯è®¡è´¹å•ä½ï¼Œå®ƒæ˜¯æ‰¿è½½æ¨ç†èƒ½åŠ›çš„â€œé€»è¾‘ç®—åŠ›â€ã€‚</strong></p>
<h3 data-id="heading-2">1. å¾®è§‚é™·é˜±ï¼šToken è°ƒä¼˜ = ç ´åæ€§é‡æ„</h3>
<p>AI Engineer éœ€è¦è¾¾æˆä¸€ä¸ªåº•å±‚å…±è¯†ï¼šå¤§æ¨¡å‹çœ‹ä¸è§ä½ çš„ä¸šåŠ¡é€»è¾‘ï¼Œå®ƒåªçœ‹è§ Token åºåˆ—ã€‚æ¨¡å‹æ‰€æœ‰çš„æ¨ç†ï¼Œæœ¬è´¨ä¸Šéƒ½æ˜¯åŸºäºè¿™ä¸²åºåˆ—çš„æ¦‚ç‡é¢„æµ‹ã€‚</p>
<p>å½“ä½ ä¸ºäº†çœé’±æˆ–æé€Ÿè€Œåœ¨<strong>ä¸Šçº¿å‰å¤•</strong>ä¸´æ—¶â€œå‹ç¼© Tokenâ€ï¼ˆæ¯”å¦‚ç²¾ç®€ Promptã€æˆªæ–­ä¸Šä¸‹æ–‡ï¼‰æ—¶ï¼Œä½ æ”¹å˜çš„ä¸ä»…ä»…æ˜¯å­—ç¬¦é•¿åº¦ï¼Œä½ æ”¹å˜äº†æ¨¡å‹çš„â€œæ³¨æ„åŠ›åˆ†å¸ƒï¼ˆAttention Distributionï¼‰â€ã€‚</p>
<p>åœ¨ä¼ ç»Ÿä»£ç ä¸­ï¼Œæˆ‘ä»¬åˆ æ‰æ³¨é‡Šã€ä¼˜åŒ–å¾ªç¯ï¼Œç¨‹åºçš„è¾“å‡ºç»“æœæ˜¯ç¡®å®šçš„ã€‚ä½†åœ¨ Prompt ä¸­ï¼Œåˆ æ‰å‡ ä¸ªçœ‹ä¼¼æ— å…³ç´§è¦çš„å½¢å®¹è¯ï¼Œæˆ–è€…å‹ç¼©ä¸€æ®µèƒŒæ™¯æè¿°ï¼Œå¯èƒ½ä¼šå¯¼è‡´æ¨¡å‹å¯¹å…³é”®æŒ‡ä»¤çš„â€œæ³¨æ„åŠ›æƒé‡â€é™ä½ï¼Œç›´æ¥å¯¼è‡´å¹»è§‰æˆ–æŒ‡ä»¤éµå¾ªå¤±è´¥ã€‚</p>
<p>è¿™ä¹Ÿå°±æ„å‘³ç€ï¼š å¦‚æœä½ ç­‰åˆ°åŠŸèƒ½å¼€å‘å®Œå†åšâ€œToken é™æœ¬â€ï¼Œä½ ä¼šå‘ç°ï¼Œä½ çš„æ¯ä¸€æ¬¡ä¸ºäº†èŠ‚çœæˆæœ¬çš„è°ƒä¼˜ï¼Œéƒ½éœ€è¦é‡æ–°è¿›è¡Œå…¨é‡çš„å›å½’æµ‹è¯•ã€‚åç½®çš„ Token ä¼˜åŒ–ï¼Œæœ¬è´¨ä¸Šæ˜¯åœ¨é¡¹ç›®å‘å¸ƒå‰å¤œï¼Œæ¨ç¿»æ ¸å¿ƒä»£ç é‡å†™ã€‚</p>
<h3 data-id="heading-3">2. æ¶æ„é™·é˜±ï¼šä¸å¯é€†çš„â€œæˆæœ¬ä¹˜æ•°â€</h3>
<p>çœŸæ­£è®© AI å·¥ç¨‹å¸ˆå¿…é¡»åœ¨ Day 1 å°±è€ƒè™‘ Token çš„åŸå› ï¼Œåœ¨äºæ¶æ„å±‚é¢çš„æˆæœ¬ä¹˜æ•°æ•ˆåº”ï¼ˆCost Multiplierï¼‰ã€‚</p>
<p>åœ¨ä¼ ç»Ÿè½¯ä»¶ä¸­ï¼Œä¸€ä¸ª API è°ƒç”¨çš„æˆæœ¬å¾€å¾€æ˜¯å›ºå®šçš„ã€‚ä½†åœ¨ AI ç³»ç»Ÿï¼ˆç‰¹åˆ«æ˜¯ Agent æˆ–å¤æ‚çš„ RAG ç³»ç»Ÿï¼‰ä¸­ï¼Œä½ çš„æ¶æ„è®¾è®¡å†³å®šäº†â€œä¸€æ¬¡ç”¨æˆ·è¯·æ±‚â€èƒŒåä¼šåˆ†è£‚å‡ºå¤šå°‘â€œToken æ¶ˆè€—â€ã€‚</p>
<p><strong>è¿™ç§éšå½¢åˆ†è£‚å¾€å¾€æ˜¯æƒŠäººçš„ã€‚</strong></p>
<p>ä»¥ Agent å¼€å‘ä¸ºä¾‹ï¼šå¦‚æœä½ åœ¨æ¶æ„å±‚æ²¡æœ‰è®¾è®¡ä¸¥æ ¼çš„â€œæ€è€ƒæ­¥æ•°é™åˆ¶â€å’Œâ€œToken ç†”æ–­æœºåˆ¶â€ï¼Œé‚£ä¹ˆåœ¨çœŸå®ç¯å¢ƒä¸­ï¼Œä¸€ä¸ªç®€å•çš„ç”¨æˆ·è¯·æ±‚å¯èƒ½ä¼šè®© Agent é™·å…¥â€œæ€è€ƒ-æœç´¢-å†æ€è€ƒâ€çš„æ­»å¾ªç¯ã€‚è¿™ä¸ä»…å¯¼è‡´å“åº”è¶…æ—¶ï¼Œæ›´åœ¨åå°æ‚„æ— å£°æ¯åœ°æ¶ˆè€—äº†æ•°ä¸‡ Tokenâ€”â€”æœ€ç»ˆæ— è®ºä»»åŠ¡æˆåŠŸä¸å¦ï¼Œè¿™ç¬”è´¦å•éƒ½å¿…é¡»ç”±ç³»ç»Ÿæ”¯ä»˜ã€‚</p>
<p>åŒæ ·çš„é™·é˜±ä¹Ÿå­˜åœ¨äº RAGï¼ˆæ£€ç´¢å¢å¼ºï¼‰ ç³»ç»Ÿä¸­ï¼šä¸ºäº†è¿½æ±‚æ‰€è°“çš„â€œé«˜å¬å›ç‡â€ï¼Œå¾ˆå¤šå·¥ç¨‹å¸ˆå€¾å‘äºåœ¨æ¶æ„ä¸Šè®¾å®šæ¯æ¬¡æ£€ç´¢å¤§é‡çš„æ–‡æ¡£ç‰‡æ®µã€‚è¿™å®é™…ä¸Šæ˜¯åœ¨æ¶æ„å±‚é¢é”æ­»äº†ç³»ç»Ÿçš„â€œåŸºç¡€ä»£è°¢ç‡â€ï¼šæ¯ä¸€æ¬¡ç”¨æˆ·æé—®ï¼Œæ— è®ºç®€å•ä¸å¦ï¼Œèµ·æ­¥æˆæœ¬éƒ½è¢«é”šå®šåœ¨äº†ä¸€ä¸ªé«˜ä½ã€‚</p>
<p>ä¸ºä»€ä¹ˆå¿…é¡»å‰ç½®è€ƒè™‘ï¼Ÿ</p>
<p>å› ä¸ºä¸€æ—¦è¿™äº›æµç¨‹è¢«å†™è¿›ä»£ç é€»è¾‘ï¼ˆWorkflowï¼‰ï¼Œå®ƒä»¬å°±æ„æˆäº†ç³»ç»Ÿçš„æˆæœ¬åŸºåº§ã€‚å¦‚æœä½ ç­‰åˆ°ä¸Šçº¿å‰å¤•æ‰å»å®¡è§†è¿™äº›é—®é¢˜ï¼Œä½ é¢å¯¹çš„å·²ç»ä¸æ˜¯ç®€å•çš„â€œå‚æ•°è°ƒæ•´â€ï¼Œè€Œæ˜¯è¦æ¨ç¿»æ•´ä¸ª Agent çš„æ€è€ƒé“¾è·¯ï¼Œæˆ–è€…é‡å†™å‘é‡æ•°æ®åº“çš„æ£€ç´¢ç­–ç•¥ã€‚</p>
<p>è¿™ä¸å«ä¼˜åŒ–ï¼Œè¿™å«æ¶æ„é‡æ„ã€‚æ‰€ä»¥ï¼ŒToken ç»æµå­¦å‘Šè¯‰æˆ‘ä»¬ï¼šæ‰€æœ‰çš„æˆæœ¬å¤±æ§ï¼Œæœ¬è´¨ä¸Šéƒ½æ˜¯æ¶æ„è®¾è®¡çš„å¤±èŒã€‚</p>
<h2 data-id="heading-4">äºŒï½œæˆæœ¬é»‘æ´ï¼šå¸¸è§çš„Token æµªè´¹æ¨¡å¼</h2>
<p>åœ¨ç†è§£äº† Token ä¼˜åŒ–çš„é‡è¦æ€§åï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹åœ¨çœŸå®çš„å·¥ç¨‹ç°åœºï¼ŒToken åˆ°åº•æ˜¯æ€ä¹ˆè¢«çƒ§æ‰çš„ã€‚</p>
<p>åœ¨è½¯ä»¶å·¥ç¨‹ä¸­ï¼Œæˆ‘ä»¬æœ‰â€œå†…å­˜æ³„æ¼ï¼ˆMemory Leakï¼‰â€çš„æ¦‚å¿µã€‚åœ¨ AI å·¥ç¨‹ä¸­ï¼ŒåŒæ ·å­˜åœ¨â€œ<strong>Token æ³„æ¼ï¼ˆToken Leakï¼‰</strong>â€ã€‚</p>
<p>è¿™ç§æ³„æ¼é€šå¸¸ä¸æ˜¯ä¸€æ¬¡æ€§çš„çˆ†å‘ï¼Œè€Œæ˜¯åƒæ°´é¾™å¤´æ»´æ°´ä¸€æ ·ï¼šæ¯ä¸€æ¬¡è°ƒç”¨å¤šä¸€ç‚¹ï¼Œæ¯ä¸€ä¸ª Prompt å•°å—¦ä¸€ç‚¹ã€‚ç›´åˆ°æœˆåº•è´¦å•å‡ºæ¥ï¼Œä½ æ‰å‘ç°è¿™äº›ä¸èµ·çœ¼çš„æ»´æ¼æ±‡èšæˆäº†æƒŠäººçš„æˆæœ¬é»‘æ´ã€‚</p>
<p>ä»¥ä¸‹æ˜¯6ç§æœ€å…¸å‹çš„â€œå·¥ç¨‹åæ¨¡å¼ï¼ˆAnti-Patternsï¼‰â€ï¼Œè¯·å¯¹ç…§ä½ çš„ç³»ç»Ÿæ£€æŸ¥ä¸€ä¸‹ï¼Œæ˜¯å¦æ­£åœ¨è¸©å‘ã€‚</p>
<h3 data-id="heading-5">1. å›¤ç§¯ç™–åæ¨¡å¼ï¼š â€œå¤šç»™ç‚¹ä¸Šä¸‹æ–‡ï¼Œæ€»æ²¡åå¤„â€</h3>
<p>è¿™æ˜¯ Token æµªè´¹çš„ç¬¬ä¸€å¤§æºå¤´ï¼Œæºäºå·¥ç¨‹å¸ˆçš„ä¸€ç§â€œé˜²å¾¡æ€§å¿ƒç†â€ã€‚</p>
<p>å½“æ¨¡å‹å›ç­”ä¸å‡†ç¡®æ—¶ï¼Œç›´è§‰å‘Šè¯‰æˆ‘ä»¬è¦â€œå–‚æ›´å¤šæ•°æ®â€ï¼šå¤šè´´å‡ è½®å†å²å¯¹è¯ï¼Œå¤šå¡å‡ æ®µä¸šåŠ¡èƒŒæ™¯ï¼Œå¤šåŠ å‡ ä¸ª Edge Case è¯´æ˜ã€‚</p>
<p>è€Œå·¥ç¨‹çœŸç›¸æ˜¯ï¼š</p>
<p>æ¨¡å‹æ²¡æœ‰â€œè‡ªåŠ¨å¿½ç•¥åƒåœ¾ä¿¡æ¯â€çš„èƒ½åŠ›ã€‚åœ¨ Transformer æ¶æ„ä¸­ï¼š</p>
<ul>
<li>æ¯ä¸€ä¸ªè¾“å…¥çš„ Token éƒ½ä¼šå ç”¨æ˜¾å­˜ï¼›</li>
<li>æ¯ä¸€ä¸ª Token éƒ½ä¼šå‚ä¸ Attention çŸ©é˜µçš„å¤æ‚è®¡ç®—ï¼›</li>
<li>æ¯ä¸€ä¸ª Token éƒ½åœ¨ç¨€é‡Šå…³é”®ä¿¡æ¯çš„æƒé‡ï¼ˆä¿¡å™ªæ¯”ä¸‹é™ï¼‰ã€‚</li>
</ul>
<p>ä½ ä»¥ä¸ºä½ åœ¨â€œå…œåº•â€ï¼Œå®é™…ä¸Šä½ æ˜¯åœ¨èŠ±é’±ä¹°å™ªéŸ³ã€‚è¿™ä¸ä»…å¢åŠ äº†æˆæœ¬ï¼Œæ›´å¯¼è‡´äº†â€œè¿·å¤±ä¸­é—´ï¼ˆLost in the Middleï¼‰â€æ•ˆåº”ï¼Œè®©æ¨¡å‹å˜ç¬¨ã€‚</p>
<h3 data-id="heading-6">2. é™æ€èµ„äº§ç¨åæ¨¡å¼ï¼š System Prompt çš„é‡å¤æ”¯ä»˜</h3>
<p>è¿™æ˜¯æœ€å®¹æ˜“è¢«å¿½è§†çš„â€œéšå½¢ç¨â€ã€‚</p>
<p>æƒ³è±¡ä¸€ä¸‹ï¼Œä½ çš„ System Prompt æ˜¯ä¸€ä»½ 500 Token çš„â€œè§’è‰²è®¾å®šä¹¦â€ã€‚</p>
<ul>
<li>å•æ¬¡çœ‹ï¼šå‡ åˆ†é’±ï¼Œä¸è´µã€‚</li>
<li>æ”¾è¿› High QPS æ¥å£ï¼šæ¯å¤©è°ƒç”¨ 10 ä¸‡æ¬¡ã€‚åæœæ˜¯ï¼Œä½ æ¯å¤©åœ¨ä¸ºè¿™ å®Œå…¨ç›¸åŒ çš„ 500 ä¸ª Tokenï¼Œé‡å¤æ”¯ä»˜ 10 ä¸‡æ¬¡ã€‚</li>
</ul>
<p>å¾ˆå¤šç³»ç»ŸæŠŠ Prompt å½“æˆé™æ€çš„â€œé…ç½®æ–‡ä»¶â€å†™åœ¨ä»£ç é‡Œï¼Œå´å¿˜äº† API æ˜¯æŒ‰æ¬¡è®¡è´¹çš„ã€‚æ¨¡å‹çœ‹ä¸è§ä½ çš„ä»£ç ç»“æ„ï¼Œå®ƒåªçœ‹å¾—è§ä½ æ¯æ¬¡ä¼ ç»™å®ƒçš„ Payloadã€‚</p>
<h3 data-id="heading-7">3. RAG æ³¨æ°´åæ¨¡å¼ï¼š æ£€ç´¢ â‰  å¯ç”¨</h3>
<p>RAGï¼ˆæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰æœ¬åº”æ˜¯è®©æ¨¡å‹æ›´ç²¾å‡†ï¼Œä½†ç°åœ¨å´æˆäº† Token æ»¥ç”¨çš„é‡ç¾åŒºã€‚</p>
<p>å¸¸è§åšæ³•æ˜¯ï¼šæ£€ç´¢å‡º Top-5 æ–‡æ¡£ â€”&gt;  ç›´æ¥æ‹¼æ¥ â€”&gt; å¡è¿› Context â€”&gt; ç¥ˆç¥·æ¨¡å‹è‡ªå·±æŒ‘é‡ç‚¹ã€‚</p>
<p>è€Œå·¥ç¨‹çœŸç›¸æ˜¯ï¼š</p>
<p>å¬å›ï¼ˆRetrievalï¼‰å’Œ ä½¿ç”¨ï¼ˆUsageï¼‰æ˜¯ä¸¤ç äº‹ã€‚</p>
<ul>
<li>æ–‡æ¡£é‡Œçš„é¡µçœ‰ã€é¡µè„šã€å…è´£å£°æ˜ã€HTML æ ‡ç­¾ï¼Œå…¨æ˜¯æ— æ•ˆ Tokenã€‚</li>
<li>å¬å›äº† 5000 å­—ï¼Œå¯èƒ½åªæœ‰ 200 å­—ä¸é—®é¢˜ç›¸å…³ã€‚</li>
</ul>
<p>æŠŠ RAG åšæˆâ€œåƒåœ¾å€¾å€’åœºâ€ï¼Œæ¨¡å‹ä¸ä»…ä¼šå¸®ä½ æŠŠåƒåœ¾è¯»ä¸€éå¹¶æ”¶è´¹ï¼Œè¿˜ä¼šå› ä¸ºå¹²æ‰°ä¿¡æ¯å¤ªå¤šè€Œäº§ç”Ÿå¹»è§‰ã€‚</p>
<h3 data-id="heading-8">4. è¯ç—¨åæ¨¡å¼ï¼š ä¸ºâ€œåºŸè¯â€ä¹°å•</h3>
<p>å¾ˆå¤šå·¥ç¨‹å¸ˆåªç›¯ç€ Input Tokenï¼ˆè¾“å…¥ï¼‰ï¼Œå´å¿½ç•¥äº† Output Tokenï¼ˆè¾“å‡ºï¼‰ã€‚</p>
<p>ä½†åœ¨è®¡è´¹é€»è¾‘ä¸­ï¼ŒOutput Token çš„å•ä»·é€šå¸¸æ¯”Input Tokenæ›´è´µã€‚</p>
<p>å¦‚æœä½ çš„ Prompt é‡Œæ²¡æœ‰æ˜ç¡®å¯¹outout é™åˆ¶ï¼š</p>
<ul>
<li>é™åˆ¶é•¿åº¦ï¼ˆ<code>Max Tokens</code>ï¼‰ï¼›</li>
<li>è§„å®šæ ¼å¼ï¼ˆ<code>JSON</code> / <code>Bullet Points</code>ï¼‰ï¼›</li>
<li>ç¦æ­¢å¯’æš„ï¼ˆ<code>Do not say "Here is the result"</code>ï¼‰ï¼›</li>
</ul>
<p>é‚£ä¹ˆæ¨¡å‹å°±ä¼šæŒ‰ç…§å®ƒâ€œè¯ç—¨â€çš„æœ¬æ€§ï¼Œå…ˆå¤è¿°ä¸€éä½ çš„é—®é¢˜ï¼Œå†å†™ä¸€æ®µå®¢å¥—è¯ï¼Œæœ€åæ‰ç»™å‡ºç­”æ¡ˆã€‚è¿™äº›å¤šå‡ºæ¥çš„åºŸè¯ï¼Œéƒ½æ˜¯ä½ åœ¨ä¸ºæ¨¡å‹çš„â€œç¤¼è²Œâ€ä¹°å•ã€‚</p>
<h3 data-id="heading-9">5. è¯´æ˜ä¹¦åæ¨¡å¼ï¼š ç»™æœºå™¨å†™æ–‡æ¡£</h3>
<p>è¿™æ˜¯å…¸å‹çš„â€œå¯¹è±¡é”™ä½â€ã€‚å¾ˆå¤š Prompt è¢«å†™æˆäº†ç»™äººç±»çœ‹çš„â€œæ“ä½œæ‰‹å†Œâ€ï¼š</p>
<blockquote>
<p>â€œè¯·ä½ ä½œä¸ºä¸€ä¸ªä¸“ä¸šçš„åŠ©æ‰‹ï¼Œéå¸¸ä»”ç»†åœ°é˜…è¯»ä¸‹é¢çš„å†…å®¹ï¼Œè¿™å¯¹æˆ‘éå¸¸é‡è¦ï¼Œè¯·ä¸è¦é—æ¼...â€</p>
</blockquote>
<p>å·¥ç¨‹çœŸç›¸ï¼š</p>
<p>LLM ä¸éœ€è¦è¢«â€œè¯´æœâ€ï¼Œä¹Ÿä¸éœ€è¦æƒ…æ„Ÿé“ºå«, å®ƒåªéœ€è¦é«˜å¯†åº¦çš„æŒ‡ä»¤ä¿¡å·ã€‚</p>
<p>Prompt é‡Œçš„æ¯ä¸€ä¸ªå½¢å®¹è¯ã€æ¯ä¸€ä¸ªå‰¯è¯ã€æ¯ä¸€ä¸ªç¤¼è²Œç”¨è¯­ï¼Œå¦‚æœä¸èƒ½æ˜¾è‘—é™ä½â€œä¿¡æ¯ç†µâ€ï¼Œé‚£å°±æ˜¯çº¯ç²¹çš„ Token æµªè´¹ã€‚</p>
<h3 data-id="heading-10">6. çŠ¶æ€çˆ†ç‚¸åæ¨¡å¼ï¼š Agent é“¾è·¯çš„å¤åˆ©æ•ˆåº”</h3>
<p>å½“ä½ å¼€å§‹æ„å»º Agent æˆ– Workflow æ—¶ï¼ŒToken æµªè´¹ä¼šå‘ˆæŒ‡æ•°çº§æ”¾å¤§ã€‚</p>
<ul>
<li>Step 1 çš„è¾“å‡ºï¼Œå˜æˆäº† Step 2 çš„è¾“å…¥ï¼›</li>
<li>Step 2 çš„è¾“å‡ºï¼Œåˆå åŠ ä¹‹å‰çš„å†å²ï¼Œå˜æˆäº† Step 3 çš„è¾“å…¥...</li>
</ul>
<p>å¦‚æœåœ¨ Agent ä¼ é€’è¿‡ç¨‹ä¸­ï¼Œæ²¡æœ‰åšâ€œçŠ¶æ€æ¸…æ´—ï¼ˆState Flushingï¼‰â€**ï¼Œ**ä¿ç•™äº†æ¯ä¸€æ¬¡ä¸­é—´æ€è€ƒè¿‡ç¨‹ï¼ˆChain of Thoughtï¼‰ï¼Œé‚£ä¹ˆæ•´æ¡é“¾è·¯çš„æˆæœ¬å°†ä¸æ˜¯çº¿æ€§çš„ï¼Œè€Œæ˜¯æ»šé›ªçƒå¼å¢é•¿ã€‚</p>
<p>å•æ¬¡ Debug çœ‹ä¸å‡ºé—®é¢˜ï¼Œä¸€æ—¦ç³»ç»Ÿè·‘èµ·æ¥ï¼Œè¿™å°±æ˜¯è´¢åŠ¡ç¾éš¾ã€‚</p>
<p>æ€»ç»“è¿™ 6 ç§åæ¨¡å¼ï¼Œæˆ‘ä»¬å¯ä»¥å¾—å‡ºä¸€ä¸ªæ®‹é…·çš„ç»“è®ºï¼š</p>
<p><strong>Token æµªè´¹ï¼Œä»æ¥ä¸æ˜¯å› ä¸ºâ€œä¸å°å¿ƒâ€ï¼Œè€Œæ˜¯å› ä¸ºâ€œæ²¡è®¾è®¡â€ã€‚</strong></p>
<p>å¦‚æœä½ æ²¡æœ‰æŠŠ Token å½“ä½œå’Œ CPUã€å†…å­˜ã€å¸¦å®½åŒç­‰é‡è¦çš„å·¥ç¨‹èµ„æºå»è§„åˆ’ï¼Œé‚£ä¹ˆå®ƒå°±ä¼šä»¥æœ€æ˜‚è´µçš„æ–¹å¼æ¶ˆè€—è‡ªå·±ã€‚</p>
<h2 data-id="heading-11">ä¸‰ï½œé¡¶å±‚è®¾è®¡ï¼š å»ºç«‹Tokenèµ„äº§çš„ç³»ç»Ÿçº§è§†è§’</h2>
<p>ä¸Šé¢çš„å¯¹token ç®¡ç†å¤±ç­–çš„é—®é¢˜è¡¨é¢ä¸Šçœ‹æ˜¯â€œå†™ Prompt ä¸ä¸¥è°¨â€ï¼Œ</p>
<p>ä½†å¦‚æœç«™åœ¨æ›´é«˜çš„è§†è§’ï¼Œä¼šå‘ç°ä¸€ä¸ªå…±åŒçš„æ ¹å› ï¼š</p>
<p><strong>Token ä»æœªè¢«å½“ä½œä¸€ç§éœ€è¦è¢«â€œè®¾è®¡å’Œæ²»ç†â€çš„å·¥ç¨‹èµ„äº§ã€‚</strong></p>
<p>åœ¨æ¶æ„è®¾è®¡é˜¶æ®µï¼Œæˆ‘ä»¬å¯ä»¥å°† Token æ‹†è§£ä¸ºä¸‰ç±»æ€§è´¨å®Œå…¨ä¸åŒçš„â€œå·¥ç¨‹èµ„äº§â€ã€‚</p>
<p>å› ä¸ºå®ƒä»¬çš„å¤±æ§æ–¹å¼ä¸åŒï¼Œæ²»ç†æ‰‹æ®µä¹Ÿå®Œå…¨ä¸åŒã€‚æˆ‘ä»¬å°†ä»é™æ€ï¼ˆStaticï¼‰ã€åŠ¨æ€ï¼ˆDynamicï¼‰ã€ç”Ÿæˆï¼ˆGenerationï¼‰ä¸‰ä¸ªç»´åº¦è€ƒè™‘Token ä½œä¸ºå·¥ç¨‹èµ„äº§çš„æ‹†åˆ†å’Œæ²»ç†ç­–ç•¥ã€‚</p>
<h3 data-id="heading-12">1. é™æ€èµ„äº§ï¼ˆStatic Contextï¼‰ï¼š</h3>
<p>ä¸»è¦åŒ…æ‹¬ï¼š System Promptã€Few-Shot ç¤ºä¾‹ã€å›ºå®šä¸šåŠ¡è§„åˆ™ã€‚</p>
<p>è¿™ä¸€ç±»tokenæ¶ˆè€—å¯¹åº”çš„å†…å®¹ä¸‡å¹´ä¸å˜ï¼Œä½†æ¯ä¸€æ¬¡ API è¯·æ±‚éƒ½ä¼šè¢«å®Œæ•´ä¼ è¾“ã€å®Œæ•´è®¡è´¹ã€‚</p>
<p>è¿™æ˜¯é«˜ QPS åœºæ™¯ä¸‹æœ€å¤§çš„æˆæœ¬é»‘æ´ã€‚</p>
<p>å¾ˆå¤šå·¥ç¨‹å¸ˆæŠŠ System Prompt å†™æ­»åœ¨ä»£ç é‡Œï¼Œè®¤ä¸ºè¿™æ˜¯â€œä¸€æ¬¡æ€§é…ç½®â€ã€‚ä½†æ˜¯åœ¨æ¨¡å‹çœ¼é‡Œï¼Œæ¯æ¬¡è¯·æ±‚ä¼ è¿‡æ¥çš„ System Prompt éƒ½æ˜¯å…¨æ–°çš„è¾“å…¥ï¼Œéƒ½ä¼šé‡æ–°è®¡è´¹ï¼›</p>
<p>å¦‚æœä½ æ¯å¤©è°ƒç”¨ 10 ä¸‡æ¬¡ï¼Œä½ å°±ä¸ºè¿™å®Œå…¨ç›¸åŒçš„ 500 Token é‡å¤ä»˜è´¹äº† 10 ä¸‡æ¬¡ã€‚</p>
<p>æ²»ç†ç­–ç•¥ä¸»è¦è€ƒè™‘ <strong>Context Cachingï¼ˆä¸Šä¸‹æ–‡ç¼“å­˜ï¼‰ï¼Œ å³</strong>ä¸è¦æŠŠ Prompt é›¶æ•£åœ°æ‹¼æ¥ã€‚è€Œæ˜¯å°†æ‰€æœ‰é™æ€å†…å®¹ç‹¬ç«‹å°è£…æˆä¸€ä¸ª Context Blockï¼Œåˆ©ç”¨æ¨¡å‹å‚å•†ï¼ˆå¦‚ Anthropic, DeepSeek, Googleï¼‰æä¾›çš„ Prompt Caching åŠŸèƒ½è¿›è¡Œç¼“å­˜åä½¿ç”¨ã€‚ è¿™æ ·è¿™éƒ¨åˆ†çš„æˆæœ¬å°†ä¸‹é™ 70%â€“90%ï¼Œä¸”é¦–å­—å»¶è¿Ÿï¼ˆTTFTï¼‰æ˜¾è‘—é™ä½ã€‚</p>
<h3 data-id="heading-13">2. åŠ¨æ€èµ„äº§ï¼ˆDynamic Contextï¼‰</h3>
<p>ä¸»è¦åŒ…æ‹¬ç”¨æˆ· Queryã€RAG æ£€ç´¢å›æ¥çš„æ–‡æ¡£ã€å†å²å¯¹è¯è®°å½•ï¼Œ ç­‰åœ¨ç³»ç»Ÿè¿è¡Œè¿‡ç¨‹ä¸­åŠ¨æ€äº§ç”Ÿçš„å†…å®¹ï¼›ä¸»è¦çš„ç‰¹ç‚¹æ˜¯ï¼Œæ¯æ¬¡éƒ½ä¸ä¸€æ ·ï¼Œæ— æ³•ç¼“å­˜ï¼Œä¸”éšç€ç³»ç»Ÿä½¿ç”¨æ—¶é—´å¢é•¿ï¼Œä½“ç§¯å‘ˆçº¿æ€§ç”šè‡³æŒ‡æ•°çº§è†¨èƒ€ã€‚</p>
<p>è€Œâ€œå¤šç»™ç‚¹ä¸Šä¸‹æ–‡ï¼Œæ¨¡å‹ä¼šæ›´èªæ˜â€â€”â€”è¿™æ˜¯å·¥ç¨‹ä¸Šæœ€å¤§çš„è°è¨€ã€‚</p>
<p>æ— èŠ‚åˆ¶çš„ RAG å¬å›å’Œæ— é™çš„å†å²è®°å½•ï¼Œä¸ä»…ä¼šè®©æˆæœ¬å‚ç›´èµ·é£ï¼Œè¿˜ä¼šå¯¼è‡´â€œè¿·å¤±ä¸­é—´ï¼ˆLost in the Middleï¼‰â€æ•ˆåº”ï¼Œé™ä½æ¨¡å‹å‡†ç¡®ç‡ã€‚</p>
<p>æ²»ç†åŸåˆ™ä¸æ˜¯â€œçœâ€ï¼Œè€Œæ˜¯**â€œç†”æ–­â€ã€‚**ä½ å¿…é¡»åœ¨ä»£ç å±‚å¯¹åŠ¨æ€å†…å®¹æ‰§è¡Œç¡¬æ€§æˆªæ–­ã€‚</p>
<ul>
<li>
<p>RAG ç†”æ–­é€»è¾‘ï¼ˆä¼ªä»£ç ï¼‰<strong>ï¼š</strong></p>
<pre><code class="hljs language-python" lang="python">context = <span class="hljs-string">""</span>
<span class="hljs-keyword">for</span> doc <span class="hljs-keyword">in</span> retrieved_docs:
    <span class="hljs-comment"># å¦‚æœåŠ äº†è¿™ç¯‡æ–‡æ¡£ä¼šè¶…é¢„ç®—ï¼Œç›´æ¥ä¸¢å¼ƒï¼Œè€Œä¸æ˜¯æˆªæ–­æ–‡æ¡£</span>
    <span class="hljs-keyword">if</span> count_tokens(context + doc) &gt; MAX_RAG_BUDGET:
        <span class="hljs-keyword">break</span> 
    context += doc
</code></pre>
</li>
<li>
<p>å†å²è®°å½•ç­–ç•¥ï¼š</p>
<p>æ”¾å¼ƒâ€œå…¨é‡ç»§æ‰¿â€ã€‚ä½¿ç”¨ æ»‘åŠ¨çª—å£ï¼ˆSliding Windowï¼‰ æˆ– å…³é”®ä¿¡æ¯æ‘˜è¦ï¼ˆSummaryï¼‰ æ›¿ä»£ã€‚</p>
</li>
</ul>
<p>æ²»ç†åè¿™éƒ¨åˆ†çš„æ”¶ç›Šé¢„æœŸæ˜¯ï¼Œå°†ä¸å¯æ§çš„å˜é‡æˆæœ¬è½¬åŒ–ä¸º<strong>å¯é¢„æµ‹</strong>çš„å›ºå®šæˆæœ¬ã€‚</p>
<h3 data-id="heading-14">3. ç”Ÿæˆèµ„äº§ï¼ˆGeneration Contextï¼‰</h3>
<p>è¿™éƒ¨åˆ†tokenæ¶ˆè€—ä¸»è¦æ¥æºäºæ¨¡å‹æœ€ç»ˆè¾“å‡ºã€CoTï¼ˆæ€ç»´é“¾ï¼‰ã€Agent ä¸­é—´æ€è€ƒè¿‡ç¨‹ã€‚</p>
<p>ä¸»è¦çš„ç‰¹ç‚¹æ˜¯å•ä»·æœ€è´µï¼Œä¸”ç›´æ¥é˜»å¡ç”¨æˆ·ï¼Œä¹Ÿå†³å®šäº† API çš„å“åº”å»¶è¿Ÿã€‚</p>
<p>å¦‚æœä¸åŠ æ§åˆ¶ï¼Œæ¨¡å‹ä¸€æ—¦å¼€å§‹åºŸè¯ï¼ˆè¿‡åº¦å¯’æš„ã€è¿‡åº¦è§£é‡Šï¼‰ï¼Œä½ ä¸ä»…è¦ä¸ºè¿™äº›åºŸè¯ä»˜è´¹ï¼Œåº”ç”¨çš„è¾“å‡ºæ—¶é—´ä¹Ÿä¼šè¢«æ‹–é•¿ï¼Œç”¨æˆ·è¦ç›¯ç€å±å¹•å‚»ç­‰ï¼Œ <strong>ç”Ÿæˆ Token å¤±æ§ çš„åŒæ—¶ï¼Œ ç”¨æˆ·ä½“éªŒä¹Ÿå˜å¾—ä¸å¥½ã€‚</strong></p>
<p>è¿™ä¸€éƒ¨åˆ†èµ„äº§çš„æ²»ç†ï¼Œå¯ä»¥ä»å‡ ä¸ªç»´åº¦è€ƒè™‘</p>
<ul>
<li>
<p>ä¸è¦å•çº¯ç”¨æ•°é‡é™åˆ¶ï¼Œè¦ç”¨â€œç”¨æˆ·èƒ½ç­‰å¤šä¹…â€æ¥åæ¨ã€‚æ¯”å¦‚å‡è®¾æ¨¡å‹ç”Ÿæˆé€Ÿåº¦ä¸º 20 Token/sï¼Œç”¨æˆ·æœ€å¤§å¿å—ç­‰å¾…æ—¶é—´ä¸º 10sã€‚é‚£ä¹ˆ max_tokens çš„ç¡¬é™åˆ¶ç»å¯¹ä¸èƒ½è¶…è¿‡ 200ã€‚</p>
</li>
<li>
<p>è¾“å‡ºæ ¼å¼çš„åè®®é™çº§ï¼ˆProtocol Downgradeï¼‰ï¼šå¯¹äºç”¨æˆ·ä¸å¯è§çš„ Agent å†…éƒ¨é€šä¿¡ï¼Œä¸¥ç¦ä½¿ç”¨ JSONï¼ˆæ ¼å¼ç¨å¤ªé«˜ï¼‰ã€‚</p>
<ul>
<li>âŒ JSON: <code>{"status": "success", "reason": "ok"}</code> (10+ Tokens)</li>
<li>âœ… CSV: <code>success,ok</code> (3 Tokens)</li>
</ul>
</li>
<li>
<p>åœ¨å¤šæ­¥ Agent ç³»ç»Ÿä¸­ï¼Œæœ€è‡´å‘½çš„è®¾è®¡æ˜¯â€œå…¨é‡ç»§æ‰¿â€â€”â€”å³ Step 2 ç»§æ‰¿ Step 1 çš„æ‰€æœ‰è¾“å…¥è¾“å‡ºã€‚è¿™ä¼šå¯¼è‡´ Token å‘ˆæŒ‡æ•°çº§çˆ†ç‚¸ã€‚</p>
<p>åœ¨è¿™éƒ¨åˆ†çš„æ²»ç†ä¸Šï¼Œ éœ€è¦è®©Agent çš„æ¯ä¸€æ¬¡çŠ¶æ€æµè½¬ï¼Œéƒ½å¿…é¡»ç»è¿‡ä¸€æ¬¡â€œä¿¡æ¯æ¸…æ´—ï¼ˆState Washingï¼‰â€ã€‚</p>
<p>å³åªä¼  Resultï¼Œä¸ä¼  Reasonï¼šä¸‹æ¸¸ Agent é€šå¸¸åªéœ€è¦ä¸Šä¸€æ­¥çš„â€œç»“æœâ€ï¼Œä¸éœ€è¦çŸ¥é“ä¸Šä¸€æ­¥çš„â€œæ€è€ƒè¿‡ç¨‹â€ã€‚</p>
<p>å¦‚æœå¿…é¡»ä¼ é€’å†å²ï¼Œè¯·å…ˆè°ƒç”¨ä¸€ä¸ªå»‰ä»·çš„å°æ¨¡å‹ï¼ˆå¦‚ GPT-3.5-Turbo æˆ– Haikuï¼‰ï¼ŒæŠŠä¸Šä¸€æ­¥çš„ 2000 Token æ‰§è¡Œè®°å½•å‹ç¼©æˆ 100 Token çš„æ‘˜è¦ï¼Œå†ä¼ ç»™ä¸‹ä¸€æ­¥ã€‚</p>
</li>
</ul>
<p>è¿™éƒ¨åˆ†èµ„äº§çš„æ²»ç†æ”¶ç›Šé¢„æœŸæ˜¯ï¼Œå“åº”æ—¶é—´ç¨³å®šï¼Œä¸å†ä¸ºæ¨¡å‹çš„â€œåºŸè¯â€ä¹°å•ã€‚</p>
<p>æœ€åï¼Œæˆ‘ä»¬å°†è¿™å¥—æ²»ç†é€»è¾‘æµ“ç¼©ä¸ºä¸€å¼ æ¶æ„é€ŸæŸ¥è¡¨ï¼š</p>





























<table><thead><tr><th>èµ„äº§ç±»å‹</th><th>æ ¸å¿ƒç—›ç‚¹</th><th>æ²»ç†é€»è¾‘</th><th>å…³é”®æŠ€æœ¯æ‰‹æ®µ</th></tr></thead><tbody><tr><td>é™æ€èµ„äº§</td><td>é‡å¤ä»˜è´¹</td><td>å¤ç”¨</td><td>Context Caching / é™æ€å°è£…</td></tr><tr><td>åŠ¨æ€èµ„äº§</td><td>æ— é™è†¨èƒ€</td><td>æˆªæ–­</td><td>é¢„ç®—ç†”æ–­ (Circuit Breaker)</td></tr><tr><td>ç”Ÿæˆèµ„äº§</td><td>å»¶è¿Ÿè¿‡é«˜</td><td>åæ¨</td><td>åè®®é™çº§ / æ—¶é—´é¢„ç®—æ§åˆ¶/Agent çŠ¶æ€æ¸…æ´—</td></tr></tbody></table>
<p><strong>è®°ä½ï¼šToken é¢„ç®—çš„æœ¬è´¨ï¼Œä¸æ˜¯è´¢åŠ¡ç®—è´¦ï¼Œè€Œæ˜¯ç³»ç»Ÿæ¶æ„æ²»ç†ã€‚</strong></p>
<h2 data-id="heading-15">ç»“è¯­ï¼šä»â€œè°ƒåŒ…ä¾ â€åˆ°â€œæ¶æ„å¸ˆâ€</h2>
<p>åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å…³äº Token ç»æµå­¦çš„æ¢è®¨å°±å‘Šä¸€æ®µè½äº†ã€‚</p>
<p>ä½œä¸º AI Engineerï¼Œè¯·è®°ä½ï¼š<strong>åœ¨ AI æ—¶ä»£ï¼Œä»£ç æ•ˆç‡ä¸ä»…ä½“ç°åœ¨ç®—æ³•å¤æ‚åº¦ï¼ˆO(n)ï¼‰ä¸Šï¼Œæ›´ä½“ç°åœ¨ Token æ¶ˆè€—é‡ä¸Šã€‚</strong></p>
<p>ä»¥å‰æˆ‘ä»¬ä¼˜åŒ–çš„æ˜¯ CPU Cycleï¼Œç°åœ¨æˆ‘ä»¬ä¼˜åŒ–çš„æ˜¯ Token Budgetã€‚</p>
<p>å½“ä½ å¼€å§‹ä¸ºä¸€ä¸ª AI ç³»ç»Ÿå»ºç«‹ Dashboardï¼Œç›‘æ§æ¯ä¸€ä¸ª Request çš„ Token/Response æ•ˆç‡æ¯” æ—¶ï¼Œä½ å°±çœŸæ­£ä»ä¸€åâ€œè°ƒåŒ…ä¾ â€ï¼Œè¿›é˜¶ä¸ºäº†ä¸€ååˆæ ¼çš„ AI æ¶æ„å¸ˆã€‚</p>
<hr/>
<p>é˜…è¯»æ›´å¤š <a href="https://link.juejin.cn?target=https%3A%2F%2Faienglab.net" target="_blank" title="https://aienglab.net" ref="nofollow noopener noreferrer">AI å·¥ç¨‹åŒ–å®éªŒå®¤</a>ç³»åˆ—æ–‡ç«  æˆ–å…³æ³¨å…¬ä¼—å· <strong>AIå·¥ç¨‹åŒ–å®éªŒå®¤</strong>ï¼Œæ·±å…¥æ¢ç´¢ RAGä¼˜åŒ–ã€Agentç¼–æ’ç¡¬æ ¸æŠ€æœ¯å¹²è´§ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[BPE ç®—æ³•åŸç†ä¸è®­ç»ƒå®ç°]]></title>    <link>https://juejin.cn/post/7593541291011784731</link>    <guid>https://juejin.cn/post/7593541291011784731</guid>    <pubDate>2026-01-10T13:47:32.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7593541291011784731" data-draft-id="7593310044479029257" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="BPE ç®—æ³•åŸç†ä¸è®­ç»ƒå®ç°"/> <meta itemprop="keywords" content="ç®—æ³•,LLM"/> <meta itemprop="datePublished" content="2026-01-10T13:47:32.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°å°å®«åŸç‹®"/> <meta itemprop="url" content="https://juejin.cn/user/3931509310620071"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            BPE ç®—æ³•åŸç†ä¸è®­ç»ƒå®ç°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3931509310620071/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°å°å®«åŸç‹®
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-10T13:47:32.000Z" title="Sat Jan 10 2026 13:47:32 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    5
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€BPE ç®—æ³•æ ¸å¿ƒåŸç†</h2>
<h3 data-id="heading-1">1. æ ¸å¿ƒæ€æƒ³</h3>
<p>BPE çš„æ ¸å¿ƒæ€æƒ³æ˜¯<strong>ä»åŸºç¡€è¯æ±‡å•å…ƒï¼ˆå­—ç¬¦ / å­—èŠ‚ï¼‰å‡ºå‘ï¼Œåå¤è¿­ä»£åœ°åˆå¹¶å‡ºç°é¢‘ç‡æœ€é«˜çš„ç›¸é‚»å­—ç¬¦å¯¹ï¼ˆå­—èŠ‚å¯¹ï¼‰ï¼Œå°†å…¶ä½œä¸ºæ–°çš„å­è¯å•å…ƒ</strong>ï¼Œç›´åˆ°è¾¾åˆ°é¢„è®¾çš„è¯æ±‡è¡¨å¤§å°æˆ–æ²¡æœ‰å¯åˆå¹¶çš„å­—ç¬¦å¯¹ä¸ºæ­¢ã€‚</p>
<p>è¿™ç§æ€æƒ³æ—¢ä¿ç•™äº†å­—ç¬¦çº§åˆ«çš„ç»†ç²’åº¦ï¼ˆè§£å†³ OOV é—®é¢˜ï¼‰ï¼Œåˆèƒ½é€šè¿‡åˆå¹¶é«˜é¢‘å­è¯å½¢æˆæ›´å…·è¯­ä¹‰çš„å•å…ƒï¼ˆå¦‚ "un-"ã€"happy"ã€"ing"ï¼‰ï¼Œæå‡ç¼–ç æ•ˆç‡ã€‚</p>
<h3 data-id="heading-2">2. å…³é”®æ¦‚å¿µé“ºå«</h3>
<ul>
<li>
<p>åŸºç¡€å•å…ƒï¼šåˆå§‹ä¸ºæ–‡æœ¬ä¸­çš„å•ä¸ªå­—ç¬¦ï¼ˆé€šå¸¸ä¼šåœ¨è¯å°¾æ·»åŠ ç‰¹æ®Šæ ‡è®°<code>&lt;/w&gt;</code>ï¼Œç”¨äºåŒºåˆ†è¯å†…å­è¯å’Œè¯å°¾å­è¯ï¼Œå¦‚ "low"å’Œ"lower"ï¼‰ï¼›</p>
</li>
<li>
<p>é¢‘ç‡ç»Ÿè®¡ï¼šä»¥ â€œè¯ - å‡ºç°æ¬¡æ•°â€ çš„å½¢å¼ç»Ÿè®¡è¯­æ–™ä¸­æ‰€æœ‰è¯çš„é¢‘ç‡ï¼›</p>
</li>
<li>
<p>ç›¸é‚»å­—ç¬¦å¯¹ï¼šå•ä¸ªè¯å†…çš„è¿ç»­ä¸¤ä¸ªåŸºç¡€å•å…ƒï¼ˆæˆ–å·²åˆå¹¶çš„å­è¯å•å…ƒï¼‰ï¼›</p>
</li>
<li>
<p>åˆå¹¶åœæ­¢æ¡ä»¶ï¼šä¸¤ç§å¸¸è§æ¡ä»¶ï¼ˆæ»¡è¶³å…¶ä¸€å³å¯ï¼‰ï¼š</p>
<ol>
<li>è¯æ±‡è¡¨å¤§å°è¾¾åˆ°é¢„è®¾é˜ˆå€¼ï¼ˆå¦‚ 30000ã€50000ï¼‰ï¼›</li>
<li>è¯­æ–™ä¸­ä¸å­˜åœ¨å‡ºç°é¢‘ç‡ &gt; 1 çš„ç›¸é‚»å­—ç¬¦å¯¹ã€‚</li>
</ol>
</li>
</ul>
<h3 data-id="heading-3">3. ç®—æ³•æ‰§è¡Œæ­¥éª¤ï¼ˆåŸç†å±‚é¢ï¼‰</h3>
<ol>
<li>
<p><strong>æ•°æ®é¢„å¤„ç†ä¸åˆå§‹åŒ–</strong>ï¼š</p>
<ul>
<li>å¯¹åŸå§‹è¯­æ–™è¿›è¡Œåˆ†è¯ã€æ¸…æ´—ï¼Œä¸ºæ¯ä¸ªè¯æ·»åŠ è¯å°¾æ ‡è®°<code>&lt;/w&gt;</code>ï¼›</li>
<li>ç»Ÿè®¡æ¯ä¸ªè¯çš„å‡ºç°é¢‘ç‡ï¼Œå½¢æˆã€Œè¯ï¼šé¢‘ç‡ã€å­—å…¸ï¼›</li>
<li>å°†æ¯ä¸ªè¯æ‹†åˆ†ä¸ºå•ä¸ªå­—ç¬¦çš„åºåˆ—ï¼Œä½œä¸ºåˆå§‹å­è¯å•å…ƒï¼ˆå¦‚ "low" æ‹†åˆ†ä¸º<code>l o w &lt;/w&gt;</code>ï¼‰ã€‚</li>
</ul>
</li>
<li>
<p><strong>ç»Ÿè®¡ç›¸é‚»å­—ç¬¦å¯¹é¢‘ç‡</strong>ï¼š</p>
<ul>
<li>éå†æ‰€æœ‰è¯çš„å­—ç¬¦åºåˆ—ï¼Œç»Ÿè®¡æ‰€æœ‰ç›¸é‚»å­—ç¬¦å¯¹çš„å…¨å±€å‡ºç°é¢‘ç‡ï¼›</li>
<li>ä¾‹å¦‚è¯­æ–™ä¸­æœ‰ "low":5ã€"lower":3ï¼Œä¼šç»Ÿè®¡åˆ°<code>(l,o):8</code>ã€<code>(o,w):8</code>ã€<code>(w,&lt;/w&gt;):5</code>ç­‰ã€‚</li>
</ul>
</li>
<li>
<p><strong>åˆå¹¶æœ€é«˜é¢‘å­—ç¬¦å¯¹</strong>ï¼š</p>
<ul>
<li>æ‰¾åˆ°å…¨å±€é¢‘ç‡æœ€é«˜çš„ç›¸é‚»å­—ç¬¦å¯¹ï¼Œå°†å…¶åˆå¹¶ä¸ºä¸€ä¸ªæ–°çš„å­è¯å•å…ƒï¼›</li>
<li>éå†æ‰€æœ‰è¯çš„å­—ç¬¦åºåˆ—ï¼Œå°†è¯¥å­—ç¬¦å¯¹æ›¿æ¢ä¸ºæ–°å­è¯ï¼ˆå¦‚åˆå¹¶<code>w &lt;/w&gt;</code>ä¸º<code>w&lt;/w&gt;</code>ï¼Œåˆ™ "low" å˜ä¸º<code>l o w&lt;/w&gt;</code>ï¼‰ã€‚</li>
</ul>
</li>
<li>
<p><strong>è¿­ä»£åˆå¹¶</strong>ï¼š</p>
<ul>
<li>é‡å¤æ­¥éª¤ 2 å’Œæ­¥éª¤ 3ï¼Œæ¯æ¬¡åˆå¹¶åéƒ½ä¼šç”Ÿæˆæ–°çš„å­è¯å•å…ƒï¼Œè¯æ±‡è¡¨ä¸æ–­æ‰©å¤§ï¼›</li>
<li>æ¯æ¬¡åˆå¹¶éƒ½ä¼šè®°å½•ã€Œåˆå¹¶è§„åˆ™ã€ï¼ˆå³å“ªä¸¤ä¸ªå•å…ƒåˆå¹¶ä¸ºæ–°å•å…ƒï¼‰ï¼Œç”¨äºåç»­çš„ç¼–ç å’Œè§£ç ã€‚</li>
</ul>
</li>
<li>
<p><strong>åœæ­¢è¿­ä»£ï¼Œç”Ÿæˆæœ€ç»ˆè¯æ±‡è¡¨</strong>ï¼š</p>
<ul>
<li>å½“è¯æ±‡è¡¨å¤§å°è¾¾åˆ°é¢„è®¾å€¼æˆ–æ— é«˜é¢‘å­—ç¬¦å¯¹å¯åˆå¹¶æ—¶ï¼Œåœæ­¢è¿­ä»£ï¼›</li>
<li>æœ€ç»ˆè¯æ±‡è¡¨åŒ…å«åˆå§‹å­—ç¬¦å•å…ƒå’Œæ‰€æœ‰è¿­ä»£è¿‡ç¨‹ä¸­ç”Ÿæˆçš„åˆå¹¶å­è¯å•å…ƒã€‚</li>
</ul>
</li>
</ol>
<h2 data-id="heading-4">äºŒã€BPE ç®—æ³•è®­ç»ƒå®ç°ï¼ˆPython æ‰‹åŠ¨å®ç°ï¼‰</h2>
<p>ä¸‹é¢é€šè¿‡ä¸€ä¸ªæç®€ç¤ºä¾‹ï¼Œæ‰‹åŠ¨å®ç° BPE çš„è®­ç»ƒè¿‡ç¨‹ï¼Œæ¸…æ™°å±•ç¤ºå…¶æ ¸å¿ƒé€»è¾‘ï¼ˆæ— ç¬¬ä¸‰æ–¹åº“ä¾èµ–ï¼‰ã€‚</p>
<h3 data-id="heading-5">æ­¥éª¤ 1ï¼šå‡†å¤‡åˆå§‹æ•°æ®ï¼ˆå¸¦é¢‘ç‡çš„è¯­æ–™ï¼‰</h3>
<p>æˆ‘ä»¬é€‰ç”¨ä¸€ä¸ªç®€å•çš„æ¨¡æ‹Ÿè¯­æ–™ï¼ŒåŒ…å« 4 ä¸ªè¯åŠå…¶å‡ºç°é¢‘ç‡ï¼Œæ–¹ä¾¿è§‚å¯Ÿåˆå¹¶è¿‡ç¨‹ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># æ­¥éª¤1ï¼šåˆå§‹åŒ–å¸¦é¢‘ç‡çš„è¯è¡¨ï¼ˆå·²æ·»åŠ è¯å°¾æ ‡è®°&lt;/w&gt;ï¼‰</span>
word_freqs = {
    <span class="hljs-string">"low&lt;/w&gt;"</span>: <span class="hljs-number">5</span>,
    <span class="hljs-string">"lower&lt;/w&gt;"</span>: <span class="hljs-number">3</span>,
    <span class="hljs-string">"newest&lt;/w&gt;"</span>: <span class="hljs-number">2</span>,
    <span class="hljs-string">"widest&lt;/w&gt;"</span>: <span class="hljs-number">2</span>
}

<span class="hljs-comment"># å°†æ¯ä¸ªè¯æ‹†åˆ†ä¸ºå­—ç¬¦åˆ—è¡¨ï¼Œå½¢æˆåˆå§‹çš„ã€Œè¯åºåˆ—: é¢‘ç‡ã€å­—å…¸</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">init_word_sequences</span>(<span class="hljs-params">word_freqs</span>):
    word_seqs = {}
    <span class="hljs-keyword">for</span> word, freq <span class="hljs-keyword">in</span> word_freqs.items():
        <span class="hljs-comment"># æ‹†åˆ†ä¸ºå•ä¸ªå­—ç¬¦ï¼ˆå¦‚"low&lt;/w&gt;" -&gt; ["l", "o", "w", "&lt;/w&gt;"]ï¼‰</span>
        char_seq = <span class="hljs-built_in">list</span>(word)
        word_seqs[<span class="hljs-built_in">tuple</span>(char_seq)] = freq  <span class="hljs-comment"># ç”¨tupleä½œä¸ºkeyï¼ˆlistä¸å¯å“ˆå¸Œï¼‰</span>
    <span class="hljs-keyword">return</span> word_seqs

word_sequences = init_word_sequences(word_freqs)
</code></pre>
<h3 data-id="heading-6">æ­¥éª¤ 2ï¼šå®šä¹‰æ ¸å¿ƒè¾…åŠ©å‡½æ•°</h3>
<p>åŒ…æ‹¬ã€Œç»Ÿè®¡ç›¸é‚»å­—ç¬¦å¯¹é¢‘ç‡ã€ã€ã€Œåˆå¹¶æœ€é«˜é¢‘å­—ç¬¦å¯¹ã€ä¸¤ä¸ªæ ¸å¿ƒå‡½æ•°ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> collections <span class="hljs-keyword">import</span> defaultdict

<span class="hljs-keyword">def</span> <span class="hljs-title function_">get_pair_freqs</span>(<span class="hljs-params">word_sequences</span>):
    <span class="hljs-string">"""
    æ­¥éª¤2ï¼šç»Ÿè®¡æ‰€æœ‰ç›¸é‚»å­—ç¬¦å¯¹çš„å…¨å±€é¢‘ç‡
    """</span>
    pair_freqs = defaultdict(<span class="hljs-built_in">int</span>)
    <span class="hljs-keyword">for</span> char_seq, freq <span class="hljs-keyword">in</span> word_sequences.items():
        <span class="hljs-comment"># éå†å•ä¸ªè¯çš„å­—ç¬¦åºåˆ—ï¼Œç»Ÿè®¡ç›¸é‚»å¯¹</span>
        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(char_seq) - <span class="hljs-number">1</span>):
            pair = (char_seq[i], char_seq[i+<span class="hljs-number">1</span>])
            pair_freqs[pair] += freq
    <span class="hljs-keyword">return</span> pair_freqs

<span class="hljs-keyword">def</span> <span class="hljs-title function_">merge_highest_freq_pair</span>(<span class="hljs-params">word_sequences, best_pair</span>):
    <span class="hljs-string">"""
    æ­¥éª¤3ï¼šåˆå¹¶å…¨å±€é¢‘ç‡æœ€é«˜çš„å­—ç¬¦å¯¹ï¼ˆbest_pairï¼‰
    """</span>
    new_word_sequences = {}
    <span class="hljs-keyword">for</span> char_seq, freq <span class="hljs-keyword">in</span> word_sequences.items():
        new_char_seq = []
        i = <span class="hljs-number">0</span>
        <span class="hljs-keyword">while</span> i &lt; <span class="hljs-built_in">len</span>(char_seq):
            <span class="hljs-comment"># æ‰¾åˆ°å¯åˆå¹¶çš„å¯¹ï¼Œåˆå¹¶åè·³è¿‡ä¸‹ä¸€ä¸ªå­—ç¬¦</span>
            <span class="hljs-keyword">if</span> i &lt; <span class="hljs-built_in">len</span>(char_seq) - <span class="hljs-number">1</span> <span class="hljs-keyword">and</span> (char_seq[i], char_seq[i+<span class="hljs-number">1</span>]) == best_pair:
                merged_token = char_seq[i] + char_seq[i+<span class="hljs-number">1</span>]
                new_char_seq.append(merged_token)
                i += <span class="hljs-number">2</span>  <span class="hljs-comment"># è·³è¿‡å·²åˆå¹¶çš„ä¸‹ä¸€ä¸ªå­—ç¬¦</span>
            <span class="hljs-keyword">else</span>:
                new_char_seq.append(char_seq[i])
                i += <span class="hljs-number">1</span>
        <span class="hljs-comment"># æ›´æ–°æ–°çš„è¯åºåˆ—å­—å…¸</span>
        new_word_sequences[<span class="hljs-built_in">tuple</span>(new_char_seq)] = freq
    <span class="hljs-keyword">return</span> new_word_sequences
</code></pre>
<h3 data-id="heading-7">æ­¥éª¤ 3ï¼šæ‰§è¡Œè¿­ä»£åˆå¹¶ï¼ˆå®Œæ•´è®­ç»ƒæµç¨‹ï¼‰</h3>
<p>è®¾ç½®é¢„è®¾è¯æ±‡è¡¨å¤§å°ï¼Œæ‰§è¡Œè¿­ä»£åˆå¹¶ï¼Œè®°å½•åˆå¹¶è§„åˆ™å’Œæœ€ç»ˆè¯æ±‡è¡¨ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">train_bpe</span>(<span class="hljs-params">word_freqs, vocab_size=<span class="hljs-number">10</span></span>):
    <span class="hljs-string">"""
    å®Œæ•´BPEè®­ç»ƒæµç¨‹
    :param word_freqs: åˆå§‹è¯é¢‘å­—å…¸
    :param vocab_size: é¢„è®¾è¯æ±‡è¡¨å¤§å°ï¼ˆéœ€å¤§äºåˆå§‹å­—ç¬¦æ•°ï¼‰
    :return: åˆå¹¶è§„åˆ™åˆ—è¡¨ã€æœ€ç»ˆè¯æ±‡è¡¨
    """</span>
    <span class="hljs-comment"># åˆå§‹åŒ–</span>
    word_sequences = init_word_sequences(word_freqs)
    merge_rules = []  <span class="hljs-comment"># è®°å½•æ‰€æœ‰åˆå¹¶è§„åˆ™ï¼ˆ[(a,b), (c,d), ...]ï¼‰</span>
    <span class="hljs-comment"># æå–åˆå§‹å­—ç¬¦è¯æ±‡è¡¨ï¼ˆå»é‡ï¼‰</span>
    vocab = <span class="hljs-built_in">set</span>()
    <span class="hljs-keyword">for</span> word <span class="hljs-keyword">in</span> word_freqs.keys():
        vocab.update(<span class="hljs-built_in">list</span>(word))
    vocab = <span class="hljs-built_in">list</span>(vocab)
    
    <span class="hljs-comment"># è¿­ä»£åˆå¹¶ï¼Œç›´åˆ°è¾¾åˆ°è¯æ±‡è¡¨å¤§å°</span>
    <span class="hljs-keyword">while</span> <span class="hljs-built_in">len</span>(vocab) &lt; vocab_size:
        <span class="hljs-comment"># æ­¥éª¤1ï¼šç»Ÿè®¡ç›¸é‚»å¯¹é¢‘ç‡</span>
        pair_freqs = get_pair_freqs(word_sequences)
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> pair_freqs:  <span class="hljs-comment"># æ— å¯ç”¨åˆå¹¶å¯¹ï¼Œæå‰ç»ˆæ­¢</span>
            <span class="hljs-keyword">break</span>
        
        <span class="hljs-comment"># æ­¥éª¤2ï¼šæ‰¾åˆ°é¢‘ç‡æœ€é«˜çš„å­—ç¬¦å¯¹</span>
        best_pair = <span class="hljs-built_in">max</span>(pair_freqs.items(), key=<span class="hljs-keyword">lambda</span> x: x[<span class="hljs-number">1</span>])[<span class="hljs-number">0</span>]
        
        <span class="hljs-comment"># æ­¥éª¤3ï¼šåˆå¹¶æœ€é«˜é¢‘å­—ç¬¦å¯¹</span>
        word_sequences = merge_highest_freq_pair(word_sequences, best_pair)
        
        <span class="hljs-comment"># æ­¥éª¤4ï¼šè®°å½•åˆå¹¶è§„åˆ™ï¼Œæ›´æ–°è¯æ±‡è¡¨</span>
        merge_rules.append(best_pair)
        new_token = best_pair[<span class="hljs-number">0</span>] + best_pair[<span class="hljs-number">1</span>]
        vocab.append(new_token)
        
        <span class="hljs-comment"># æ‰“å°ä¸­é—´è¿‡ç¨‹ï¼ˆå¯é€‰ï¼Œæ–¹ä¾¿è§‚å¯Ÿï¼‰</span>
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"åˆå¹¶ <span class="hljs-subst">{best_pair}</span> -&gt; <span class="hljs-subst">{new_token}</span> | å½“å‰è¯æ±‡è¡¨å¤§å°ï¼š<span class="hljs-subst">{<span class="hljs-built_in">len</span>(vocab)}</span>"</span>)
    
    <span class="hljs-keyword">return</span> merge_rules, vocab, word_sequences

<span class="hljs-comment"># æ‰§è¡ŒBPEè®­ç»ƒï¼Œé¢„è®¾è¯æ±‡è¡¨å¤§å°ä¸º15</span>
merge_rules, final_vocab, final_word_sequences = train_bpe(word_freqs, vocab_size=<span class="hljs-number">15</span>)
</code></pre>
<h3 data-id="heading-8">æ­¥éª¤ 4ï¼šæŸ¥çœ‹è®­ç»ƒç»“æœ</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># æ‰“å°æœ€ç»ˆç»“æœ</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"\n=== è®­ç»ƒå®Œæˆ ==="</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"åˆå¹¶è§„åˆ™åˆ—è¡¨ï¼ˆå…±<span class="hljs-subst">{<span class="hljs-built_in">len</span>(merge_rules)}</span>æ¡ï¼‰ï¼š"</span>)
<span class="hljs-keyword">for</span> idx, rule <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(merge_rules):
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"  <span class="hljs-subst">{idx+<span class="hljs-number">1</span>}</span>: <span class="hljs-subst">{rule}</span> -&gt; <span class="hljs-subst">{rule[<span class="hljs-number">0</span>]+rule[<span class="hljs-number">1</span>]}</span>"</span>)

<span class="hljs-built_in">print</span>(<span class="hljs-string">f"\næœ€ç»ˆè¯æ±‡è¡¨ï¼ˆå…±<span class="hljs-subst">{<span class="hljs-built_in">len</span>(final_vocab)}</span>ä¸ªå•å…ƒï¼‰ï¼š"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-built_in">sorted</span>(final_vocab))

<span class="hljs-built_in">print</span>(<span class="hljs-string">f"\næœ€ç»ˆè¯åºåˆ—ï¼ˆåˆå¹¶åï¼‰ï¼š"</span>)
<span class="hljs-keyword">for</span> seq, freq <span class="hljs-keyword">in</span> final_word_sequences.items():
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"  <span class="hljs-subst">{seq}</span>: <span class="hljs-subst">{freq}</span>"</span>)
</code></pre>
<h3 data-id="heading-9">è¿è¡Œç»“æœè§£è¯»</h3>
<p>è¿è¡Œä¸Šè¿°ä»£ç åï¼Œä¼šçœ‹åˆ°è¿­ä»£åˆå¹¶çš„è¿‡ç¨‹ï¼ˆéƒ¨åˆ†è¾“å‡ºå¦‚ä¸‹ï¼‰ï¼š</p>
<pre><code class="hljs language-plaintext" lang="plaintext">åˆå¹¶ ('e', 's') -&gt; es | å½“å‰è¯æ±‡è¡¨å¤§å°ï¼š9
åˆå¹¶ ('s', 't') -&gt; st | å½“å‰è¯æ±‡è¡¨å¤§å°ï¼š10
åˆå¹¶ ('e', 'st') -&gt; est | å½“å‰è¯æ±‡è¡¨å¤§å°ï¼š11
...
</code></pre>
<ol>
<li>åˆå¹¶è§„åˆ™æŒ‰è¿­ä»£é¡ºåºè®°å½•ï¼Œåç»­ç¼–ç æ—¶éœ€ä¸¥æ ¼æŒ‰ç…§è¯¥é¡ºåºè¿›è¡Œå­è¯åˆ†å‰²ï¼›</li>
<li>æœ€ç»ˆè¯æ±‡è¡¨åŒ…å«åˆå§‹å­—ç¬¦ï¼ˆ<code>l</code>ã€<code>o</code>ã€<code>w</code>ç­‰ï¼‰å’Œåˆå¹¶ç”Ÿæˆçš„å­è¯ï¼ˆ<code>es</code>ã€<code>st</code>ã€<code>est</code>ç­‰ï¼‰ï¼›</li>
<li>æœ€ç»ˆè¯åºåˆ—å·²è¢«åˆå¹¶ä¸ºæ›´ç²—ç²’åº¦çš„å­è¯å•å…ƒï¼Œå‡å°‘äº†å†—ä½™ï¼Œæå‡äº†ç¼–ç æ•ˆç‡ã€‚</li>
</ol>
<h2 data-id="heading-10">ä¸‰ã€å…³é”®è¡¥å……è¯´æ˜</h2>
<ol>
<li>
<p><strong>BPE çš„ä¼˜åŠ¿</strong>ï¼š</p>
<ul>
<li>æ— ç›‘ç£è®­ç»ƒï¼Œæ— éœ€äººå·¥æ ‡æ³¨å­è¯ï¼›</li>
<li>æœ‰æ•ˆè§£å†³æœªç™»å½•è¯ï¼ˆOOVï¼‰é—®é¢˜ï¼Œå³ä½¿é‡åˆ°æ–°è¯ï¼Œä¹Ÿèƒ½æ‹†åˆ†ä¸ºåŸºç¡€å­—ç¬¦å•å…ƒï¼›</li>
<li>è¯æ±‡è¡¨å¤§å°å¯æ§ï¼Œå¹³è¡¡ç¼–ç æ•ˆç‡å’Œæ¨¡å‹å¤æ‚åº¦ã€‚</li>
</ul>
</li>
<li>
<p><strong>å®é™…åº”ç”¨ä¸­çš„ä¼˜åŒ–</strong>ï¼š</p>
<ul>
<li>ä¸Šè¿°å®ç°ä¸ºæç®€ç‰ˆæœ¬ï¼Œå®é™…å·¥ä¸šç•Œï¼ˆå¦‚ Hugging Faceï¼‰çš„ BPE å®ç°ä¼šä¼˜åŒ–å­˜å‚¨å’Œè®¡ç®—ï¼ˆå¦‚ç”¨å“ˆå¸Œè¡¨åŠ é€ŸæŸ¥æ‰¾ï¼‰ï¼›</li>
<li>é€šå¸¸ä»¥ã€Œå­—èŠ‚ã€è€Œéã€Œå­—ç¬¦ã€ä½œä¸ºåˆå§‹å•å…ƒï¼ˆå°¤å…¶é’ˆå¯¹å¤šè¯­è¨€åœºæ™¯ï¼‰ï¼Œé¿å…å­—ç¬¦ç¼–ç ï¼ˆå¦‚ UTF-8ï¼‰å¸¦æ¥çš„é—®é¢˜ï¼›</li>
<li>ä¼šæ·»åŠ ç‰¹æ®Šæ ‡è®°ï¼ˆå¦‚<code>&lt;unk&gt;</code>ï¼‰å¤„ç†ç½•è§å­—ç¬¦ã€‚</li>
</ul>
</li>
<li>
<p><strong>è§£ç è¿‡ç¨‹</strong>ï¼š</p>
<ul>
<li>è§£ç æ—¶åªéœ€åå‘åº”ç”¨åˆå¹¶è§„åˆ™ï¼Œæˆ–å°†å­è¯å•å…ƒç›´æ¥æ‹¼æ¥ï¼ˆæ³¨æ„<code>&lt;/w&gt;</code>æ ‡è®°éœ€æ›¿æ¢ä¸ºç©ºæ ¼æˆ–ç›´æ¥åˆ é™¤ï¼‰ã€‚</li>
</ul>
</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ·±å…¥æµ…å‡º TinyEditor å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ç³»åˆ—2ï¼šå¿«é€Ÿå¼€å§‹]]></title>    <link>https://juejin.cn/post/7593600903249625114</link>    <guid>https://juejin.cn/post/7593600903249625114</guid>    <pubDate>2026-01-11T02:46:32.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7593600903249625114" data-draft-id="7593541291012849691" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ·±å…¥æµ…å‡º TinyEditor å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ç³»åˆ—2ï¼šå¿«é€Ÿå¼€å§‹"/> <meta itemprop="keywords" content="å‰ç«¯,å¼€æº,TypeScript"/> <meta itemprop="datePublished" content="2026-01-11T02:46:32.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‰ç«¯å¼€æºæ˜Ÿçƒ"/> <meta itemprop="url" content="https://juejin.cn/user/1504599026445150"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ·±å…¥æµ…å‡º TinyEditor å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ç³»åˆ—2ï¼šå¿«é€Ÿå¼€å§‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1504599026445150/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‰ç«¯å¼€æºæ˜Ÿçƒ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-11T02:46:32.000Z" title="Sun Jan 11 2026 02:46:32 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä½ å¥½ï¼Œæˆ‘æ˜¯ Kagolï¼Œä¸ªäººå…¬ä¼—å·ï¼š<code>å‰ç«¯å¼€æºæ˜Ÿçƒ</code>ã€‚</p>
<p>è¿™æ˜¯ã€Šæ·±å…¥æµ…å‡º TinyEditor å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ç³»åˆ—ã€‹çš„ç¬¬2ç¯‡ï¼Œå®Œæ•´çš„ç³»åˆ—æ–‡ç« ï¼š</p>
<ul>
<li><a href="https://juejin.cn/spost/7593261984189218866" target="_blank" title="https://juejin.cn/spost/7593261984189218866">æ·±å…¥æµ…å‡º TinyEditor å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ç³»åˆ—1ï¼šTinyEditor æ˜¯ä»€ä¹ˆ</a></li>
</ul>
<p>æ¬¢è¿ä½¿ç”¨ TinyEditor - ä¸€æ¬¾åŸºäº Quill 2.0 æ„å»ºçš„å¼ºå¤§å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼Œæä¾›äº†å¼€ç®±å³ç”¨çš„ä¸°å¯Œæ¨¡å—å’Œæ ¼å¼ã€‚æœ¬æŒ‡å—å°†å¸®åŠ©ä½ å¿«é€Ÿé«˜æ•ˆåœ°å¼€å§‹ä½¿ç”¨ TinyEditorã€‚</p>
<h2 data-id="heading-0">æ¶æ„æ¦‚è¿°</h2>
<p>TinyEditor é‡‡ç”¨æ¨¡å—åŒ–æ¶æ„ï¼Œé€šè¿‡è‡ªå®šä¹‰æ¨¡å—ã€æ ¼å¼å’Œä¸»é¢˜æ‰©å±•äº† Quill çš„åŠŸèƒ½ã€‚æ ¸å¿ƒç»“æ„åŒ…æ‹¬ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ca43520a29de41f1835c6cb5af8b2f8e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5byA5rqQ5pif55CD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768704391&amp;x-signature=0ohennCTn6eohe%2FPVXXsdulJwDg%3D" alt="æ¨¡å—æ¶æ„.png" loading="lazy"/></p>
<h2 data-id="heading-1">å®‰è£…</h2>
<h3 data-id="heading-2">åŸºç¡€è®¾ç½®</h3>
<p>ä½¿ç”¨ npm å®‰è£… TinyEditorï¼š</p>
<pre><code class="hljs language-bash" lang="bash">npm install @opentiny/fluent-editor
</code></pre>
<p>è¯¥åŒ…ä»¥ ES æ¨¡å—å½¢å¼æä¾›ï¼ŒåŒ…å«æ‰€æœ‰å¿…è¦çš„ä¾èµ–ï¼ŒåŒ…æ‹¬ä½œä¸ºåŸºç¡€çš„ Quill 2.0ã€‚</p>
<h3 data-id="heading-3">é¡¹ç›®ç»“æ„</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1e4182b8e8514d0b881f88d81e5ada6e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5byA5rqQ5pif55CD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768704391&amp;x-signature=7iEKccb5mhd8rDoVZldu266U79I%3D" alt="é¡¹ç›®ç»“æ„.png" loading="lazy"/></p>
<h2 data-id="heading-4">åŸºæœ¬ç”¨æ³•</h2>
<h3 data-id="heading-5">æœ€å°ç¤ºä¾‹</h3>
<p>åˆ›å»ºä¸€ä¸ªå…·æœ‰æœ€å°é…ç½®çš„åŸºç¡€ç¼–è¾‘å™¨å®ä¾‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">FluentEditor</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'@opentiny/fluent-editor'</span>
 
<span class="hljs-keyword">const</span> editor = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FluentEditor</span>(<span class="hljs-string">'#editor'</span>, {
  <span class="hljs-attr">theme</span>: <span class="hljs-string">'snow'</span>
})
</code></pre>
<h3 data-id="heading-6">åŒ…å«å¤šä¸ªæ¨¡å—çš„ç¤ºä¾‹</h3>
<p>è¿™æ˜¯ä¸€ä¸ªå±•ç¤ºé…ç½®å¤šä¸ªæ¨¡å—çš„ç»¼åˆè®¾ç½®ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">FluentEditor</span>, { <span class="hljs-title class_">CollaborationModule</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@opentiny/fluent-editor'</span>

<span class="hljs-comment">// å¼•å…¥ååŒç¼–è¾‘ç›¸å…³ä¾èµ–</span>
<span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> Y <span class="hljs-keyword">from</span> <span class="hljs-string">'yjs'</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Awareness</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'y-protocols/awareness'</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">QuillBinding</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'y-quill'</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">WebsocketProvider</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'y-websocket'</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">IndexeddbPersistence</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'y-indexeddb'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">QuillCursors</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'quill-cursors'</span>

<span class="hljs-comment">// æ³¨å†ŒååŒç¼–è¾‘æ¨¡å—</span>
<span class="hljs-title class_">FluentEditor</span>.<span class="hljs-title function_">register</span>(
  <span class="hljs-string">'modules/collaborative-editing'</span>,
  <span class="hljs-title class_">CollaborationModule</span>,
  <span class="hljs-literal">true</span>,
)

<span class="hljs-keyword">const</span> editor = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FluentEditor</span>(<span class="hljs-string">'#editor'</span>, {
  <span class="hljs-attr">theme</span>: <span class="hljs-string">'snow'</span>,
  <span class="hljs-attr">modules</span>: {
    <span class="hljs-attr">toolbar</span>: [
      [{ <span class="hljs-string">'header'</span>: [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-literal">false</span>] }],
      [<span class="hljs-string">'bold'</span>, <span class="hljs-string">'italic'</span>, <span class="hljs-string">'underline'</span>, <span class="hljs-string">'strike'</span>],
      [{ <span class="hljs-string">'color'</span>: [] }, { <span class="hljs-string">'background'</span>: [] }],
      [{ <span class="hljs-string">'list'</span>: <span class="hljs-string">'ordered'</span>}, { <span class="hljs-string">'list'</span>: <span class="hljs-string">'bullet'</span> }],
      [<span class="hljs-string">'link'</span>, <span class="hljs-string">'image'</span>, <span class="hljs-string">'video'</span>],
      [<span class="hljs-string">'clean'</span>]
    ],
    <span class="hljs-comment">// é…ç½®ååŒç¼–è¾‘æ¨¡å—</span>
    <span class="hljs-string">'collaborative-editing'</span>: {
        <span class="hljs-attr">deps</span>: {
          Y,
          <span class="hljs-title class_">Awareness</span>,
          <span class="hljs-title class_">QuillBinding</span>,
          <span class="hljs-title class_">QuillCursors</span>,
          <span class="hljs-title class_">WebsocketProvider</span>,
          <span class="hljs-title class_">IndexeddbPersistence</span>,
        },
        <span class="hljs-attr">provider</span>: {
          <span class="hljs-attr">type</span>: <span class="hljs-string">'websocket'</span>,
          <span class="hljs-attr">options</span>: {
            <span class="hljs-attr">serverUrl</span>: <span class="hljs-string">'wss://ai.opentiny.design/tiny-editor/'</span>,
            <span class="hljs-attr">roomName</span>: <span class="hljs-string">'tiny-editor-document-demo-roomName'</span>,
          },
        },
        <span class="hljs-attr">awareness</span>: {
          <span class="hljs-attr">state</span>: {
            <span class="hljs-attr">name</span>: <span class="hljs-string">`userId:<span class="hljs-subst">${<span class="hljs-built_in">Math</span>.random().toString(<span class="hljs-number">36</span>).substring(<span class="hljs-number">2</span>, <span class="hljs-number">15</span>)}</span>`</span>,
            <span class="hljs-attr">color</span>: <span class="hljs-string">`rgb(<span class="hljs-subst">${<span class="hljs-built_in">Math</span>.floor(<span class="hljs-built_in">Math</span>.random() * <span class="hljs-number">255</span>)}</span>,<span class="hljs-subst">${<span class="hljs-built_in">Math</span>.floor(<span class="hljs-built_in">Math</span>.random() * <span class="hljs-number">255</span>)}</span>,<span class="hljs-subst">${<span class="hljs-built_in">Math</span>.floor(<span class="hljs-built_in">Math</span>.random() * <span class="hljs-number">255</span>)}</span>)`</span>,
          },
        },
    },
    <span class="hljs-string">'mathlive'</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// éœ€è¦å¼•å…¥ mathlive ç›¸å…³ä¾èµ–</span>
    <span class="hljs-string">'syntax'</span>: <span class="hljs-literal">true</span> <span class="hljs-comment">// éœ€è¦å¼•å…¥ highlight.js ç›¸å…³ä¾èµ–</span>
  }
})
</code></pre>
<p>è¯¦ç»†é…ç½®è¯·å‚è€ƒæ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fopentiny.github.io%2Ftiny-editor%2Fdocs%2Fdemo%2Fcollaborative-editing" target="_blank" title="https://opentiny.github.io/tiny-editor/docs/demo/collaborative-editing" ref="nofollow noopener noreferrer">opentiny.github.io/tiny-editorâ€¦</a></p>
<h2 data-id="heading-7">å¯ç”¨æ¨¡å—</h2>
<p>TinyEditor æä¾›äº†ä¸°å¯Œçš„é¢„æ³¨å†Œæ¨¡å—é›†ï¼š</p>













































<table><thead><tr><th>æ¨¡å—</th><th>æè¿°</th><th>ç”¨æ³•</th></tr></thead><tbody><tr><td><strong>toolbar</strong></td><td>å¸¦æœ‰è‡ªå®šä¹‰å¤„ç†å™¨çš„å¢å¼ºå·¥å…·æ </td><td><code>toolbar: { container: TOOLBAR_CONFIG }</code></td></tr><tr><td><strong>image</strong></td><td>æ”¯æŒæ ¼å¼åŒ–çš„é«˜çº§å›¾ç‰‡å¤„ç†</td><td><code>image: true</code></td></tr><tr><td><strong>collaborative-editing</strong></td><td>å®æ—¶åä½œ</td><td>å‚è§ä¸Šé¢çš„åä½œç¤ºä¾‹</td></tr><tr><td><strong>mathlive</strong></td><td>LaTeX æ•°å­¦å…¬å¼</td><td><code>mathlive: true</code></td></tr><tr><td><strong>syntax</strong></td><td>ä»£ç è¯­æ³•é«˜äº®</td><td><code>syntax: true</code></td></tr><tr><td><strong>emoji</strong></td><td>è¡¨æƒ…é€‰æ‹©å™¨å’Œæ”¯æŒ</td><td><code>emoji: true</code></td></tr><tr><td><strong>mention</strong></td><td>@æåŠåŠŸèƒ½</td><td><code>mention: true</code></td></tr></tbody></table>
<h2 data-id="heading-8">é…ç½®é€‰é¡¹</h2>
<p>ç¼–è¾‘å™¨æ¥å—æ‰©å±•äº† Quill é€‰é¡¹çš„ç»¼åˆé…ç½®å¯¹è±¡ï¼š</p>









































<table><thead><tr><th>é€‰é¡¹</th><th>ç±»å‹</th><th>é»˜è®¤å€¼</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>modules</code></td><td><code>IEditorModules</code></td><td><code>{}</code></td><td>æ¨¡å—é…ç½®</td></tr><tr><td><code>scrollingContainer</code></td><td><code>HTMLElement</code> | <code>string</code> | <code>null</code></td><td><code>body</code></td><td>è‡ªå®šä¹‰æ»šåŠ¨å®¹å™¨</td></tr><tr><td><code>autoProtocol</code></td><td><code>boolean</code> | <code>string</code></td><td><code>false</code></td><td>è‡ªåŠ¨ä¸ºé“¾æ¥æ·»åŠ åè®®</td></tr><tr><td><code>editorPaste</code></td><td><code>any</code></td><td><code>undefined</code></td><td>è‡ªå®šä¹‰ç²˜è´´å¤„ç†</td></tr><tr><td><code>screenshot</code></td><td><code>Partial&lt;ScreenShotOptions&gt;</code></td><td><code>undefined</code></td><td>æˆªå›¾é…ç½®</td></tr></tbody></table>
<h2 data-id="heading-9">å¿«é€Ÿå¼€å§‹æ¨¡æ¿</h2>
<p>è¿™æ˜¯ä¸€ä¸ªå¯ç”¨äºå¿«é€ŸåŸå‹è®¾è®¡çš„å³ç”¨å‹ HTML æ¨¡æ¿ï¼ˆå¯ç›´æ¥å¤åˆ¶åˆ° HTML æ–‡ä»¶ä¸­è¿è¡Œï¼‰ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>TinyEditor Quick Start<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
    <span class="hljs-selector-id">#editor</span> { 
      <span class="hljs-attribute">height</span>: <span class="hljs-number">400px</span>; 
      <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#ccc</span>;
      <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span>;
    }
  </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
  <span class="hljs-comment">&lt;!-- å¼•å…¥ @opentiny/fluent-editor --&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"importmap"</span>&gt;</span><span class="javascript">
    {
      <span class="hljs-string">"imports"</span>: {
        <span class="hljs-string">"@opentiny/fluent-editor"</span>: <span class="hljs-string">"https://unpkg.com/@opentiny/fluent-editor@3.18.3/index.es.js"</span>
      }
    }
  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
  <span class="hljs-comment">&lt;!-- å¼•å…¥ @opentiny/fluent-editor æ ·å¼ --&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"https://unpkg.com/@opentiny/fluent-editor@3.18.3/style.css"</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"editor"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  
  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"module"</span>&gt;</span><span class="javascript">
    <span class="hljs-keyword">import</span> <span class="hljs-title class_">FluentEditor</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'@opentiny/fluent-editor'</span>
    
    <span class="hljs-keyword">const</span> editor = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FluentEditor</span>(<span class="hljs-string">'#editor'</span>, {
      <span class="hljs-attr">theme</span>: <span class="hljs-string">'snow'</span>,
      <span class="hljs-attr">modules</span>: {
        <span class="hljs-attr">toolbar</span>: [
          [<span class="hljs-string">'bold'</span>, <span class="hljs-string">'italic'</span>, <span class="hljs-string">'underline'</span>],
          [{ <span class="hljs-string">'list'</span>: <span class="hljs-string">'ordered'</span>}, { <span class="hljs-string">'list'</span>: <span class="hljs-string">'bullet'</span> }],
          [<span class="hljs-string">'link'</span>, <span class="hljs-string">'image'</span>],
          [<span class="hljs-string">'clean'</span>]
        ]
      }
    })
  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<p>æ•ˆæœå›¾ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6c54419305d3484c910df28726116c7b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5byA5rqQ5pif55CD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768704391&amp;x-signature=R09cn%2FxUXM5BcmqZA5jxwdicIzs%3D" alt="é¡¹ç›®æ•ˆæœå›¾.png" loading="lazy"/></p>
<p>TinyEditor ç±»æ‰©å±•äº† Quill çš„æ ¸å¿ƒåŠŸèƒ½ï¼ŒåŒæ—¶ä¿æŒä¸ç°æœ‰ Quill é…ç½®çš„å…¼å®¹æ€§ã€‚è¿™ç¡®ä¿äº†ç°æœ‰ Quill ç”¨æˆ·çš„å¹³æ»‘è¿ç§»è·¯å¾„ï¼ŒåŒæ—¶æä¾›äº†å¯¹ TinyEditor å¢å¼ºåŠŸèƒ½é›†çš„è®¿é—®ã€‚</p>
<p>åç»­å°†å…¨é¢ä»‹ç» TinyEditor å¦‚ä½•ä½¿ç”¨ã€è®¾è®¡æ¶æ„ã€å®ç°åŸç†ã€äºŒæ¬¡å¼€å‘ç­‰å†…å®¹ï¼Œç‚¹ä¸ªå…³æ³¨ï¼Œä¸è¿·è·¯ã€‚</p>
<h2 data-id="heading-10">è”ç³»æˆ‘ä»¬</h2>
<p>GitHubï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fopentiny%2Ftiny-editor" target="_blank" title="https://github.com/opentiny/tiny-editor" ref="nofollow noopener noreferrer">github.com/opentiny/tiâ€¦</a>ï¼ˆæ¬¢è¿ Star â­ï¼‰</p>
<p>å®˜ç½‘ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fopentiny.github.io%2Ftiny-editor" target="_blank" title="https://opentiny.github.io/tiny-editor" ref="nofollow noopener noreferrer">opentiny.github.io/tiny-editor</a></p>
<p>ä¸ªäººåšå®¢ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fkagol.github.io%2Fblogs%2F" target="_blank" title="https://kagol.github.io/blogs/" ref="nofollow noopener noreferrer">kagol.github.io/blogs/</a></p>
<p>å°åŠ©æ‰‹å¾®ä¿¡ï¼šopentiny-official</p>
<p>å…¬ä¼—å·ï¼šOpenTiny</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[AIæœ€å¤§çš„æ”¹å˜å¯èƒ½ä¸æ˜¯å†™ä»£ç è€Œæ˜¯æœç´¢]]></title>    <link>https://juejin.cn/post/7593241698370945060</link>    <guid>https://juejin.cn/post/7593241698370945060</guid>    <pubDate>2026-01-11T02:54:38.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7593241698370945060" data-draft-id="7593292445300686867" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="AIæœ€å¤§çš„æ”¹å˜å¯èƒ½ä¸æ˜¯å†™ä»£ç è€Œæ˜¯æœç´¢"/> <meta itemprop="keywords" content="åç«¯,Java,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-01-11T02:54:38.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="9å·è¾¾äºº"/> <meta itemprop="url" content="https://juejin.cn/user/2450136052270077"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            AIæœ€å¤§çš„æ”¹å˜å¯èƒ½ä¸æ˜¯å†™ä»£ç è€Œæ˜¯æœç´¢
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2450136052270077/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    9å·è¾¾äºº
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-11T02:54:38.000Z" title="Sun Jan 11 2026 02:54:38 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åˆåˆ°äº†ä¸€å¹´ä¸€åº¦çš„å¹´ç»ˆæ€»ç»“å­£ã€‚ç°åœ¨åº”è¯¥å«å»å¹´äº†ï¼Œç›¸ä¿¡å¤§å®¶æˆ–å¤šæˆ–å°‘éƒ½ä¼šå¸¦ä¸Šaiè¿™ä¸ªå…³é”®è¯ã€‚</p>
<p>å¦‚æœè®©æˆ‘é€‰ä»Šå¹´æœ€å¤§çš„æ”¹å˜ï¼Œä¸æ˜¯å†™ä»£ç ï¼Œä¸æ˜¯ç”Ÿå›¾ï¼Œè€Œæ˜¯æœç´¢ã€‚</p>
<p>AIè®©æœç´¢è¿™ä¸ªèƒ½åŠ›ï¼Œå½»åº•å¹³æƒäº†ã€‚</p>
<h2 data-id="heading-0">ä»¥å‰ï¼Œæœç´¢è´¨é‡å–å†³äºä½ çš„çŸ¥è¯†é¢</h2>
<p>åšç¨‹åºå‘˜è¿™äº›å¹´ï¼Œæˆ‘ä»¬ä¼šæ˜ç™½å¾ˆå¤šæ—¶å€™</p>
<p><strong>æœç´¢çš„å¥½åï¼Œå–å†³äºä½ çš„çŸ¥è¯†é¢ã€‚</strong></p>
<p>ä»€ä¹ˆæ˜¯æœç´¢ï¼Ÿ</p>
<p>ä¸æ˜¯åœ¨Googleæˆ–bingï¼ˆæˆ‘æ˜¯çœŸä¸å¤ªæƒ³æç™¾åº¦ï¼‰è¾“å…¥å‡ ä¸ªå…³é”®è¯ã€‚</p>
<p><strong>æœç´¢æ˜¯å¯¹ä¸€ä¸ªé—®é¢˜ï¼Œå¤šè§’åº¦æ”¶é›†ä¿¡æ¯ï¼Œæœ€ç»ˆæ‰¾åˆ°èƒ½è§£å†³é—®é¢˜çš„æ–¹æ¡ˆï¼Œæˆ–è€…èƒ½æ¨å¯¼å‡ºè§£æ³•çš„æ–¹æ¡ˆã€‚</strong></p>
<p>é—®é¢˜æ˜¯ï¼Œå¤šè§’åº¦æ”¶é›†ä¿¡æ¯ï¼Œå‰ææ˜¯ä½ å¾—çŸ¥é“æœ‰å“ªäº›è§’åº¦ã€‚</p>
<p>ä½ çŸ¥è¯†é¢å¹¿ï¼ŒçŸ¥é“ä»å“ªäº›è§’åº¦åˆ‡å…¥ï¼ŒçŸ¥é“å»å“ªäº›ç½‘ç«™æ‰¾ï¼ˆStack Overflowã€GitHubã€å®˜æ–¹æ–‡æ¡£ï¼‰ï¼Œä¼šç”¨æœç´¢æŒ‡ä»¤ï¼ˆ<code>site:</code>ã€<code>filetype:</code>ã€<code>-</code>æ’é™¤å…³é”®è¯ï¼‰ï¼Œèƒ½æ ¹æ®ä¸€ä¸ªç›¸ä¼¼çš„è§£æ³•ä¸¾ä¸€åä¸‰ã€‚</p>
<p>é‚£ä½ æœç´¢è´¨é‡å°±é«˜ã€‚</p>
<p>ä½ çŸ¥è¯†é¢çª„ï¼Œæœç´¢è§’åº¦å•ä¸€ï¼ŒåªçŸ¥é“ç™¾åº¦ï¼Œåªä¼šè¾“å…¥å‡ ä¸ªå…³é”®è¯ï¼Œç»“æœä¸å¯¹åˆæ¢å‡ ä¸ªè¯è¯•ã€‚</p>
<p>é‚£ä½ å¾ˆå¤šæ—¶å€™è¶Šæœè¶Šåï¼Œæ‰¾ä¸åˆ°æ–¹å‘ã€‚</p>
<p><strong>çŸ¥è¯†é¢å†³å®šäº†æœç´¢çš„ä¸Šé™ã€‚</strong></p>
<p>ä½ çš„ä¿¡æ¯åœˆå­æœ‰å¤šå¤§ï¼Œä½ èƒ½æœåˆ°çš„ä¿¡æ¯å°±æœ‰å¤šå…¨ã€‚ä½ ä¸çŸ¥é“çš„ä¸œè¥¿ï¼Œä½ è¿æœéƒ½ä¸çŸ¥é“æ€ä¹ˆæœã€‚</p>
<p>ä½†ä»Šå¹´ç”¨AIç”¨å¤šäº†ï¼Œå‘ç°è¿™ä¸ªé€»è¾‘å˜äº†ã€‚</p>
<h2 data-id="heading-1">AIå‡ºç°åï¼Œæœç´¢æ–¹å¼å˜äº†</h2>
<p>ä»Šå¹´æˆ‘ç”¨AIæœç´¢çš„é¢‘ç‡æ˜æ˜¾å˜é«˜äº†ã€‚</p>
<p>é‡åˆ°é—®é¢˜ï¼Œç¬¬ä¸€ååº”ä¸æ˜¯æ‰“å¼€Googleï¼Œè€Œæ˜¯é—®ChatGPTã€Claudeã€Perplexityã€‚</p>
<p>ä¸ºä»€ä¹ˆï¼Ÿ</p>
<p><strong>å› ä¸ºAIçš„çŸ¥è¯†é¢æ¯”ä»»ä½•äººéƒ½å¹¿ï¼Œæ¸ é“ä¹Ÿæ¯”ä»»ä½•äººéƒ½å¤šã€‚</strong></p>
<p>ä¸¾ä¸ªä¾‹å­ã€‚æœ‰ä¸€æ¬¡æˆ‘æƒ³åœ¨é˜¿é‡Œäº‘æœåŠ¡å™¨ä¸Šä¸‹ä¸€ä¸ªDockeré•œåƒã€‚</p>
<p>å…ˆæ˜¯æŒ‰è€è·¯å¾„æœï¼š</p>
<ol>
<li>Googleæœ"é˜¿é‡Œäº‘ Docker é•œåƒä¸‹è½½æ…¢"</li>
<li>æ‰¾åˆ°å‡ ç¯‡æ•™ç¨‹ï¼Œè¯´é…ç½®å›½å†…é•œåƒæº</li>
<li>æŒ‰æ•™ç¨‹é…å¥½äº†ï¼Œè¿˜æ˜¯ä¸‹ä¸ä¸‹æ¥</li>
<li>æ¢å…³é”®è¯"Docker é•œåƒæº é…ç½®"ï¼Œåˆè¯•äº†å‡ ä¸ªæº</li>
<li>è¿˜æ˜¯ä¸è¡Œï¼Œæƒ³è¯´åœ¨æœ¬æœºDocker Desktopå…ˆä¸‹å¥½å†ä¸Šä¼ </li>
<li>ç»“æœDocker Desktopçªç„¶æ‰“ä¸å¼€äº†</li>
<li>ç»§ç»­æœ"Docker Desktop æ‰“ä¸å¼€"ï¼Œè¯•äº†å‡ ä¸ªæ–¹æ³•</li>
<li>æ­»ç£•äº†åŠå¤©ï¼Œè¿˜æ˜¯å¡åœ¨è¿™</li>
</ol>
<p>è¿™æ—¶å€™æˆ‘å·²ç»ä¸çŸ¥é“è¯¥æœä»€ä¹ˆäº†ã€‚æˆ‘èƒ½æƒ³åˆ°çš„æ–¹æ³•éƒ½è¯•è¿‡äº†ã€‚</p>
<p>ç”¨AIå‘¢ï¼Ÿ</p>
<p>æˆ‘ç›´æ¥æŠŠæƒ…å†µæè¿°ç»™AIï¼š</p>
<blockquote>
<p>"æˆ‘åœ¨é˜¿é‡Œäº‘ä¸Šä¸‹Dockeré•œåƒï¼Œé…äº†å›½å†…æºè¿˜æ˜¯ä¸‹ä¸ä¸‹æ¥ã€‚æœ¬æœºDocker Desktopåˆæ‰“ä¸å¼€ï¼Œæ²¡æ³•å…ˆä¸‹å¥½å†ä¸Šä¼ ã€‚æœ‰æ²¡æœ‰å…¶ä»–åŠæ³•ï¼Ÿ"</p>
</blockquote>
<p>AIå‡ ç§’é’Ÿç»™å‡ºäº†ä¸€ä¸ªæ–¹æ¡ˆï¼š</p>
<ul>
<li>GitHubæ”¯æŒåœ¨çº¿æ‰“å¼€VSCodeï¼ˆCodespacesï¼‰</li>
<li>è¿™æ˜¯ä¸ªäº‘ç«¯çš„å¼€å‘ç¯å¢ƒï¼Œå¯ä»¥ç›´æ¥è¿è¡ŒDocker</li>
<li>åœ¨é‚£é‡Œä¸‹è½½é•œåƒåˆ°æœ¬åœ°</li>
<li>å†ä»æœ¬åœ°ä¼ åˆ°é˜¿é‡Œäº‘ä¸Š</li>
</ul>
<p>è¿™ä¸ªæ–¹æ¡ˆæˆ‘<strong>å‹æ ¹ä¸çŸ¥é“</strong>ã€‚</p>
<p>æˆ‘æ ¹æœ¬ä¸çŸ¥é“GitHubè¿˜èƒ½ç›´æ¥æ‰“å¼€VSCodeï¼Œè¿˜èƒ½å½“äº‘æœåŠ¡å™¨ç”¨ã€‚ä»¥å‰æœç´¢ï¼Œæˆ‘åªä¼šæœ"Dockeré•œåƒä¸‹è½½"ã€"é•œåƒæºé…ç½®"ï¼Œæ€ä¹ˆä¹Ÿæœä¸åˆ°è¿™ä¸ªæ–¹å‘ã€‚</p>
<p><strong>å› ä¸ºæˆ‘ä¸çŸ¥é“ï¼Œæ‰€ä»¥æˆ‘è¿æœéƒ½ä¸çŸ¥é“æ€ä¹ˆæœã€‚</strong></p>
<p>ä½†AIçŸ¥é“ã€‚å®ƒç»™å‡ºçš„æ–¹æ¡ˆï¼Œç›´æ¥è·³å‡ºäº†æˆ‘çš„çŸ¥è¯†åœˆå­ã€‚</p>
<h2 data-id="heading-2">ä¸ºä»€ä¹ˆå·®è¿™ä¹ˆå¤šï¼Ÿ</h2>
<h3 data-id="heading-3">1. çŸ¥è¯†é¢</h3>
<p>ä»¥å‰ï¼š</p>
<ul>
<li>ä½ çŸ¥é“ä»€ä¹ˆå…³é”®è¯,å°±æœä»€ä¹ˆ</li>
<li>ä½ çŸ¥é“å“ªäº›ç½‘ç«™ï¼Œå°±å»å“ªäº›ç½‘ç«™æ‰¾</li>
<li>çŸ¥è¯†é¢å†³å®šäº†æœç´¢çš„å¹¿åº¦</li>
</ul>
<p>AIï¼š</p>
<ul>
<li>çŸ¥é“æ‰€æœ‰å¯èƒ½ç›¸å…³çš„æ¦‚å¿µ</li>
<li>èƒ½ä»å¤šä¸ªè§’åº¦åˆ†æé—®é¢˜</li>
<li>çŸ¥è¯†é¢è¿œè¶…ä»»ä½•äºº</li>
</ul>
<h3 data-id="heading-4">2. æœç´¢æ¸ é“</h3>
<p>ä»¥å‰ï¼š</p>
<ul>
<li>Googleã€Stack Overflowã€GitHubã€å®˜æ–¹æ–‡æ¡£</li>
<li>æ¯ä¸ªæ¸ é“å•ç‹¬æœï¼Œä¿¡æ¯åˆ†æ•£</li>
<li>è¦è‡ªå·±æ•´åˆ</li>
</ul>
<p>AIï¼š</p>
<ul>
<li>å·²ç»"è¯»è¿‡"è¿™äº›ç½‘ç«™</li>
<li>ç›´æ¥ç»™å‡ºç»¼åˆç­”æ¡ˆ</li>
<li>ä¸ç”¨è·³è½¬å¤šä¸ªç½‘ç«™</li>
</ul>
<h3 data-id="heading-5">3. ç†è§£èƒ½åŠ›</h3>
<p>ä»¥å‰ï¼š</p>
<ul>
<li>åªèƒ½åŒ¹é…å…³é”®è¯</li>
<li>"Dockeré•œåƒä¸‹è½½"ã€"é•œåƒæºé…ç½®"ï¼Œæœä¸åˆ°"GitHubäº‘æœåŠ¡å™¨"</li>
<li>ä½ å¾—è‡ªå·±æƒ³å„ç§å…³é”®è¯ç»„åˆ</li>
<li><strong>ä½ ä¸çŸ¥é“çš„æ–¹æ¡ˆï¼Œä½ è¿å…³é”®è¯éƒ½æƒ³ä¸å‡ºæ¥</strong></li>
</ul>
<p>AIï¼š</p>
<ul>
<li>ç†è§£ä½ çš„å›°å¢ƒ</li>
<li>èƒ½è·³å‡ºä½ çš„çŸ¥è¯†åœˆå­ï¼Œç»™å‡ºä½ å¯èƒ½ä¸çŸ¥é“çš„æ–¹æ¡ˆ</li>
</ul>
<h2 data-id="heading-6">ç°åœ¨ï¼Œæœç´¢è´¨é‡å–å†³äºä½ çš„æè¿°èƒ½åŠ›</h2>
<p>AIæœç´¢æœ€å¤§çš„æ”¹å˜ä¸æ˜¯å¿«ã€‚</p>
<p>æ˜¯<strong>å†³å®šå› ç´ å˜äº†</strong>ã€‚</p>
<p>ä»¥å‰ï¼Œæœç´¢è´¨é‡å–å†³äºä½ çš„çŸ¥è¯†é¢ã€‚çŸ¥è¯†é¢çª„ï¼Œæœç´¢å°±å—é™ã€‚</p>
<p>ç°åœ¨ï¼Œæœç´¢è´¨é‡å–å†³äºä½ çš„æè¿°èƒ½åŠ›ã€‚</p>
<p>åªè¦ä¼šæè¿°é—®é¢˜ï¼ŒAIå‡ æ¬¡å¯¹è¯å°±èƒ½ç»™å‡ºæ–¹æ¡ˆã€‚ä¸éœ€è¦çŸ¥é“ä¸“ä¸šæœ¯è¯­ï¼Œä¸éœ€è¦çŸ¥é“æœç´¢æŒ‡ä»¤ï¼Œä¸éœ€è¦çŸ¥é“å»å“ªä¸ªç½‘ç«™ã€‚</p>
<p><strong>ä»"çŸ¥è¯†é¢"åˆ°"æè¿°èƒ½åŠ›"ï¼Œè¿™æ˜¯æœç´¢çš„å¹³æƒã€‚</strong></p>
<p>æ›´é‡è¦çš„æ˜¯ï¼ŒAIè¿˜èƒ½åè¿‡æ¥æ‰©å……ä½ çš„çŸ¥è¯†é¢ã€‚</p>
<p>ä»¥å‰ï¼Œä½ ä¸çŸ¥é“çš„ä¸œè¥¿ï¼Œä½ è¿æœéƒ½ä¸çŸ¥é“æ€ä¹ˆæœã€‚ä½ çš„ä¿¡æ¯åœˆå­å°±é‚£ä¹ˆå¤§ï¼Œå¾ˆéš¾çªç ´ã€‚</p>
<p>å°±åƒè¿™æ¬¡ä¸‹Dockeré•œåƒã€‚æˆ‘çš„çŸ¥è¯†åœˆå­é‡Œåªæœ‰"é…ç½®é•œåƒæº"ã€"æœ¬åœ°ä¸‹è½½å†ä¸Šä¼ "è¿™äº›æ–¹æ³•ã€‚æˆ‘å‹æ ¹ä¸çŸ¥é“GitHubèƒ½ç›´æ¥æ‰“å¼€VSCodeå½“äº‘æœåŠ¡å™¨ç”¨ï¼Œè‡ªç„¶ä¹Ÿæœä¸åˆ°è¿™ä¸ªæ–¹æ¡ˆã€‚</p>
<p>ç°åœ¨ä¸ä¸€æ ·äº†ã€‚</p>
<p>ä½ é—®AIä¸€ä¸ªé—®é¢˜ï¼ŒAIçš„å›ç­”é‡Œå¯èƒ½ä¼šå¸¦å‡ºä¸€äº›ä½ ä¸çŸ¥é“çš„æ¦‚å¿µã€ä¸çŸ¥é“çš„å·¥å…·ã€ä¸çŸ¥é“çš„æ–¹æ³•ã€‚</p>
<p>é‚£æ¬¡ä¹‹åï¼Œæˆ‘çŸ¥é“äº†GitHub Codespacesï¼ŒçŸ¥é“äº†å¯ä»¥ç”¨äº‘æœåŠ¡å™¨ä¸­è½¬ä¸‹è½½ï¼ŒçŸ¥é“äº†é•œåƒä»“åº“çš„å¦ä¸€ç§ç”¨æ³•ã€‚</p>
<p>ä½ é¡ºç€è¿™äº›çº¿ç´¢ç»§ç»­é—®ï¼ŒçŸ¥è¯†é¢å°±è¢«æ‹“å®½äº†ã€‚</p>
<p><strong>AIåœ¨å¸®ä½ æœç´¢çš„åŒæ—¶ï¼Œä¹Ÿåœ¨æ‰“ç ´ä½ çš„ä¿¡æ¯åœˆå­ã€‚</strong></p>
<p>è¿™æ‰æ˜¯æœ€å¤§çš„ä»·å€¼ã€‚è¿™æ ·çš„ä¾‹å­å¾ˆå¤šå¾ˆå¤šã€‚</p>
<p>å½“ç„¶AIä¹Ÿä¸æ˜¯ä¸‡èƒ½çš„ã€‚ç‰¹åˆ«åé—¨çš„é—®é¢˜ï¼Œå®ƒä¹Ÿç­”ä¸ä¸Šæ¥ã€‚ä½†å¸¸è§é—®é¢˜ï¼Œå·²ç»å¤Ÿç”¨äº†ã€‚</p>
<h2 data-id="heading-7">å†™åœ¨æœ€å</h2>
<p>ä»Šå¹´æœ€å¤§çš„æ„Ÿå—ï¼š<strong>AIè®©æœç´¢å˜ç®€å•äº†ã€‚</strong></p>
<p>ä¸æ˜¯è¯´ä¼ ç»Ÿæœç´¢ä¸é‡è¦ã€‚æ˜¯é—¨æ§›é™ä½äº†ï¼Œä¸ä¼šæœç´¢çš„äººä¹Ÿèƒ½å¿«é€Ÿæ‰¾åˆ°ç­”æ¡ˆã€‚</p>
<p>è¿™æ˜¯å¥½äº‹ã€‚</p>
<p>æŠ€æœ¯çš„ä»·å€¼ä¸åœ¨äºåˆ¶é€ é—¨æ§›ï¼Œè€Œåœ¨äºé™ä½é—¨æ§›ã€‚è€ŒAIæœç´¢åšåˆ°äº†ã€‚</p>
<p>ä½†æ˜¯ç°åœ¨æˆ‘ç›¸ä¿¡åªæ˜¯ä¸€ä¸ªè¿‡æ¸¡ï¼Œæœªæ¥çš„æœç´¢åˆæ˜¯ä»€ä¹ˆæ ·çš„ï¼Œæˆ‘ä¹Ÿä¸çŸ¥é“ã€‚ä½†æˆ‘çŸ¥é“ç›®å‰aiè®©æœç´¢å˜ç®€å•äº†ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[AI æ—¶ä»£çš„å‡æ³•ç”Ÿæ´»ï¼šæˆ‘ä¸ºä»€ä¹ˆä¸å†è¿½é€æ–°å·¥å…·äº†]]></title>    <link>https://juejin.cn/post/7593528990846369843</link>    <guid>https://juejin.cn/post/7593528990846369843</guid>    <pubDate>2026-01-10T14:48:10.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7593528990846369843" data-draft-id="7593311347292307483" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="AI æ—¶ä»£çš„å‡æ³•ç”Ÿæ´»ï¼šæˆ‘ä¸ºä»€ä¹ˆä¸å†è¿½é€æ–°å·¥å…·äº†"/> <meta itemprop="keywords" content="AIç¼–ç¨‹,AIGC"/> <meta itemprop="datePublished" content="2026-01-10T14:48:10.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿è¡¡Eve"/> <meta itemprop="url" content="https://juejin.cn/user/254742428393310"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            AI æ—¶ä»£çš„å‡æ³•ç”Ÿæ´»ï¼šæˆ‘ä¸ºä»€ä¹ˆä¸å†è¿½é€æ–°å·¥å…·äº†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/254742428393310/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿è¡¡Eve
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-10T14:48:10.000Z" title="Sat Jan 10 2026 14:48:10 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">AI æ—¶ä»£çš„å‡æ³•ç”Ÿæ´»ï¼šæˆ‘ä¸ºä»€ä¹ˆä¸å†è¿½é€æ–°å·¥å…·äº†</h2>
<p>ğŸ’ å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯é˜¿è¡¡ï¼Œä¸€å¹´ç»éªŒç”¨äº†åæ¬¡çš„æ¸¸æˆåç«¯å¼€å‘ï¼Œè¾èŒåæˆä¸ºè‡ªç”±èŒä¸šã€ç‹¬ç«‹æ¸¸æˆå¼€å‘è€…ã€‚
éä¸“ä¸š AI ç©å®¶ï¼Œæ—¥å¸¸å…³æ³¨ AI ç¼–ç¨‹æ–¹å‘çš„å†…å®¹ã€‚</p>
<hr/>
<p>æ˜¨å¤©æ™šä¸Šæ•´ç†ç”µè„‘çš„æ—¶å€™ï¼Œæˆ‘çªç„¶æ„è¯†åˆ°ä¸€ä¸ªé—®é¢˜ã€‚</p>
<p>æ‰“å¼€å¾®ä¿¡æ”¶è—ã€cuboxï¼Œé‡Œé¢èººç€ 100 å¤šä¸ªã€Œç¨åé˜…è¯»ã€çš„ AI ç›¸å…³æ–‡ç« ã€‚ç‚¹å¼€æ¡Œé¢ï¼Œåå‡ ä¸ªåˆšä¸‹è½½æ²¡ä¸¤å¤©çš„ AI åº”ç”¨å›¾æ ‡é™é™åœ°å¾…åœ¨é‚£é‡Œã€‚å†çœ‹çœ‹æˆ‘çš„ç¬”è®°è½¯ä»¶ï¼Œå¯†å¯†éº»éº»è®°å½•ç€å„ç§å·¥å…·çš„ä½¿ç”¨æ–¹æ³•ï¼Œä½†æ¯ä¸€æ¡ç¬”è®°éƒ½åªæœ‰æ ‡é¢˜ï¼Œå†…å®¹åŒºç©ºç©ºå¦‚ä¹Ÿã€‚</p>
<p>æˆ‘å¥½åƒå¾—äº†ä¸€ç§ç—…ï¼Œå« <strong>ã€ŒAI å·¥å…·æ”¶é›†ç™–ã€</strong> ã€‚</p>
<hr/>
<h3 data-id="heading-1">æ‹¿ç€é”¤å­æ‰¾é’‰å­</h3>
<p>è¿™ä¸¤å¹´ AI å‘å±•å¤ªå¿«äº†ã€‚å‡ ä¹æ¯å‘¨éƒ½æœ‰æ–°å·¥å…·å‘å¸ƒï¼Œæ¯ä¸ªæœˆéƒ½æœ‰é‡å¤§çªç ´ã€‚æˆ‘åƒæ‰€æœ‰å…³æ³¨ AI çš„äººä¸€æ ·ï¼Œç”Ÿæ€•é”™è¿‡ä»€ä¹ˆé‡è¦çš„ä¸œè¥¿ï¼Œäºæ˜¯ç–¯ç‹‚åœ°è®¢é˜…ã€æ”¶è—ã€ä¸‹è½½ã€‚</p>
<p>ChatGPTã€Claudeã€Gemini éƒ½å¾—è¯•è¯•ã€‚Cursorã€Claude Codeã€GitHub Copilot ä¸€ä¸ªéƒ½ä¸èƒ½å°‘ã€‚Midjourneyã€Stable Diffusionã€ComfyUI ä¹Ÿè¦äº†è§£ä¸€ä¸‹ã€‚è¿˜æœ‰å„ç§ Chrome æ’ä»¶ã€VS Code æ‰©å±•ã€å‘½ä»¤è¡Œå·¥å…·â€¦â€¦
<strong>æˆ‘ä»¥ä¸ºè‡ªå·±åœ¨å­¦ä¹ ï¼Œå…¶å®åªæ˜¯åœ¨æ”¶é›†ã€‚</strong></p>
<p>æ¯æ¬¡çœ‹åˆ°æœ‰äººåˆ†äº«æ–°å·¥å…·ï¼Œæˆ‘éƒ½ä¼šæƒ³ã€Œè¿™ä¸ªå¥½åƒå¾ˆæœ‰ç”¨ã€ï¼Œç„¶åé©¬ä¸ŠåŠ å…¥æ”¶è—å¤¹ã€‚å¯çœŸè¦ç”¨çš„æ—¶å€™ï¼Œæˆ‘å´å‘ç°è‡ªå·±æ ¹æœ¬ä¸çŸ¥é“è¯¥åœ¨ä»€ä¹ˆåœºæ™¯ä¸‹ä½¿ç”¨å®ƒã€‚<strong>å°±åƒæ‹¿ç€ä¸€æŠŠé”¤å­ï¼Œåˆ°å¤„æ‰¾é’‰å­ã€‚</strong> æ‰¾åˆ°é’‰å­äº†å—ï¼Ÿæ²¡æœ‰ã€‚é’‰å­æœ¬æ¥å°±ä¸å­˜åœ¨ï¼Œæ˜¯æˆ‘ç¡¬ç”Ÿç”Ÿæƒ³è±¡å‡ºæ¥çš„éœ€æ±‚ã€‚</p>
<p>æ›´å¯æ€•çš„æ˜¯ï¼Œè¿™ç§çŠ¶æ€è®©æˆ‘è¶Šæ¥è¶Šç„¦è™‘ã€‚çœ‹åˆ°åˆ«äººç”¨æŸä¸ªå·¥å…·åšå‡ºäº†å¾ˆé…·çš„ä¸œè¥¿ï¼Œæˆ‘å°±ä¼šæƒ³ã€Œæˆ‘æ˜¯ä¸æ˜¯ä¹Ÿåº”è¯¥å­¦ä¸€å­¦ã€ã€‚å¯å­¦æ¥å­¦å»ï¼Œæ¯ä¸ªå·¥å…·éƒ½åªæ˜¯æµ…å°è¾„æ­¢ï¼Œä¸€ä¸ªéƒ½æ²¡çœŸæ­£æŒæ¡ã€‚</p>
<p><strong>æˆ‘å¼€å§‹æ€€ç–‘è‡ªå·±æ˜¯ä¸æ˜¯è·Ÿä¸ä¸Šæ—¶ä»£äº†ã€‚</strong></p>
<hr/>
<h3 data-id="heading-2">è½¬æŠ˜ç‚¹</h3>
<p>é‚£å¤©æˆ‘å‡†å¤‡å†™ä¸€ç¯‡é¡¹ç›®æçº²ï¼Œ æ‰“å¼€ç”µè„‘ï¼Œæˆ‘ä¹ æƒ¯æ€§åœ°å¼€å§‹çº ç»“ï¼šã€Œç”¨ ChatGPT å¸®æˆ‘èµ·è‰å¤§çº²å§ï¼Œè¿˜æ˜¯ç”¨ Claude æ›´å¥½ï¼Ÿ Gemini å†™æ–‡æ¡£è¿˜æŒºå¼ºçš„å‘¢ï¼è¦ä¸è¦è¯•è¯•æ–°å‡ºçš„é‚£ä¸ªå†™ä½œSkillï¼Ÿå¯¹äº†ï¼Œæˆ‘æ”¶è—çš„é‚£ä¸ª AI æ–‡ç« ç”Ÿæˆå·¥å…·è¿˜æ²¡ç”¨è¿‡â€¦â€¦ã€</p>
<p>çº ç»“äº†åŠä¸ªå°æ—¶ï¼Œæˆ‘ä¸€ä¸ªå­—éƒ½æ²¡å†™å‡ºæ¥ã€‚</p>
<p>é‚£ä¸€åˆ»æˆ‘çªç„¶æ„è¯†åˆ°ï¼Œæˆ‘å·²ç»å®Œå…¨æœ¬æœ«å€’ç½®äº†ã€‚å†™æçº²çš„ç›®çš„æ˜¯ä¸ºäº†æ¢³ç†é¡¹ç›®è„‰ç»œï¼Œè€Œä¸æ˜¯ç ”ç©¶å“ªä¸ª AI å·¥å…·æ›´é€‚åˆå†™ä½œã€‚<strong>æˆ‘åœ¨ã€Œé€‰å·¥å…·ã€ä¸ŠèŠ±çš„æ—¶é—´ï¼Œå·²ç»è¿œè¿œè¶…è¿‡äº†ã€Œåšäº‹æƒ…ã€æœ¬èº«ã€‚</strong></p>
<p>æˆ‘å…³æ‰äº†æ‰€æœ‰çš„ AI å·¥å…·ï¼Œå¼€å§‹è‡ªå·±å†™ã€‚å†™å®Œä¹‹åï¼Œæˆ‘ç”¨æœ€ç†Ÿæ‚‰çš„ Claude å¸®æˆ‘æ¶¦è‰²äº†ä¸€ä¸‹è¯­è¨€ã€‚æ•´ä¸ªè¿‡ç¨‹è¡Œäº‘æµæ°´ï¼Œæ–‡ç« è´¨é‡ä¹Ÿæ¯”æˆ‘é¢„æœŸçš„è¦å¥½ã€‚</p>
<p>è¿™ä»¶äº‹è®©æˆ‘å¼€å§‹åæ€ï¼š<strong>æˆ‘çœŸçš„éœ€è¦è¿™ä¹ˆå¤šå·¥å…·å—ï¼Ÿ</strong></p>
<hr/>
<h3 data-id="heading-3">åšå‡æ³•</h3>
<p>åæ€ä¹‹åï¼Œæˆ‘åšäº†ä¸€ä¸ªå†³å®šï¼šå¼€å§‹åšå‡æ³•ã€‚</p>
<p>ä¸å†å…³æ³¨æ¯å¤©æœ‰ä»€ä¹ˆæ–°å·¥å…·å‘å¸ƒï¼Œä¸å†æ”¶è—ä»»ä½•ã€Œä»¥åå¯èƒ½ä¼šç”¨åˆ°ã€çš„æ–‡ç« ã€‚æˆ‘è¦å…ˆææ¸…æ¥šè‡ªå·±åˆ°åº•éœ€è¦ä»€ä¹ˆï¼Œç„¶ååªé€‰æ‹©ä¸€ä¸ªå·¥å…·ï¼ŒæŠŠå®ƒç”¨åˆ°æè‡´ã€‚</p>
<p><strong>ç¬¬ä¸€æ­¥æ˜¯åˆ—å‡ºæˆ‘çœŸå®çš„ç—›ç‚¹ã€‚</strong> ä¸çœ‹ä»€ä¹ˆå·¥å…·ç«ï¼Œä¹Ÿä¸ç®¡åˆ«äººåœ¨ç”¨ä»€ä¹ˆï¼Œå°±é—®è‡ªå·±ä¸€ä¸ªé—®é¢˜ï¼šæˆ‘æ¯å¤©çš„å·¥ä½œç”Ÿæ´»ä¸­ï¼Œåˆ°åº•å“ªé‡Œæœ€ç—›ï¼Ÿ</p>
<p>æƒ³äº†å¾ˆä¹…ï¼Œæˆ‘å‘ç°å…¶å®ç—›ç‚¹æ²¡é‚£ä¹ˆå¤šã€‚å†™æŠ€æœ¯æ–‡ç« ç¡®å®è´¹æ—¶é—´ï¼ŒDebug æ•ˆç‡ç¡®å®ä¸å¤Ÿé«˜ï¼Œæ•´ç†å­¦ä¹ ç¬”è®°ç¡®å®å¾ˆéº»çƒ¦ã€‚ä½†ä»”ç»†æƒ³æƒ³ï¼Œè¿™äº›é—®é¢˜å…¶å®éƒ½å¯ä»¥ç”¨ä¸€ä¸ªå·¥å…·è§£å†³ï¼Œé‚£å°±æ˜¯ Claude Codeã€‚</p>
<p>æˆ‘å†³å®šå°±ç”¨å®ƒã€‚ä¸è¯•åˆ«çš„äº†ï¼Œå°±ä¸“æ³¨ç ”ç©¶æ€ä¹ˆç”¨ Claude Code è§£å†³æˆ‘çš„å®é™…é—®é¢˜ã€‚</p>
<p><strong>ç¬¬äºŒæ­¥æ˜¯ç»™è‡ªå·±è®¾å®šè§„åˆ™ï¼šä¸€ä¸ªç—›ç‚¹ï¼Œä¸€ä¸ªå·¥å…·ï¼Œæ·±åº¦ä½¿ç”¨ä¸€ä¸ªæœˆã€‚</strong></p>
<p>è¿™ä¸€ä¸ªæœˆé‡Œï¼Œæˆ‘ä¸å†è¿½æ–°å·¥å…·ï¼Œä¸å†çœ‹ä»€ä¹ˆã€ŒXX å·¥å…·å…¨é¢æµ‹è¯„ã€ã€‚æˆ‘åªåšä¸€ä»¶äº‹ï¼šæŠŠ Claude Code ç”¨åˆ°æè‡´ã€‚æ€ä¹ˆç”¨å®ƒå¸®æˆ‘ç”Ÿæˆæ–‡ç« æ¡†æ¶ï¼Ÿæ€ä¹ˆè®©å®ƒç†è§£æˆ‘çš„ä»£ç ä¸Šä¸‹æ–‡ï¼Ÿæ€ä¹ˆç”¨å®ƒå¿«é€Ÿå®šä½ Bugï¼Ÿæ€ä¹ˆè®©å®ƒç”Ÿæˆæ›´ç¬¦åˆæˆ‘é£æ ¼çš„æ–‡å­—ï¼Ÿ</p>
<p>è¿™äº›é—®é¢˜ï¼Œä»¥å‰æˆ‘éƒ½æ˜¯æµ…å°è¾„æ­¢çš„ã€‚ä½†å½“æˆ‘æ²‰ä¸‹å¿ƒæ¥ï¼ŒçœŸæ­£èŠ±æ—¶é—´å»ç ”ç©¶ä¸€ä¸ªå·¥å…·çš„æ—¶å€™ï¼Œæˆ‘å‘ç°å®ƒèƒ½åšçš„äº‹æƒ…è¿œæ¯”æˆ‘æƒ³è±¡çš„è¦å¤šã€‚</p>
<hr/>
<h3 data-id="heading-4">çŠ¶æ€å˜åŒ–</h3>
<p>ä»æˆ‘åšå‡ºè¿™ä¸ªå†³å®šèµ·ï¼Œæˆ‘çš„çŠ¶æ€å‘ç”Ÿäº†æ˜æ˜¾çš„å˜åŒ–ã€‚</p>
<p>ç„¦è™‘æ„Ÿå°‘äº†å¾ˆå¤šã€‚ä¸å†æ¯å¤©åˆ·å·¥å…·æ¦œå•ï¼Œä¸å†çœ‹åˆ°æ–°ä¸œè¥¿å°±æ…Œå¼ ã€‚æˆ‘çŸ¥é“æˆ‘æ‰‹ä¸Šè¿™ä¸ªå·¥å…·å·²ç»å¤Ÿç”¨äº†ï¼Œç”šè‡³æˆ‘è¿˜æ²¡å®Œå…¨æŒ–æ˜å‡ºå®ƒçš„æ½œåŠ›ã€‚</p>
<p>æ•ˆç‡æå‡äº†ä¸å°‘ã€‚Claude Code ç”¨å¾—è¶Šæ¥è¶Šé¡ºæ‰‹ï¼Œå¾ˆå¤šä»¥å‰éœ€è¦æ‰‹åŠ¨å¤„ç†çš„äº‹æƒ…ï¼Œç°åœ¨å‡ å¥è¯å°±èƒ½æå®šã€‚å†™æ–‡ç« çš„æ—¶é—´ä»ä¸¤å°æ—¶ç¼©çŸ­åˆ°äº†ä¸€å°æ—¶ï¼ŒDebug çš„é€Ÿåº¦ä¹Ÿå¿«äº†ä¸€å€ã€‚</p>
<p>æœ€é‡è¦çš„æ˜¯ï¼Œæˆå°±æ„Ÿå›æ¥äº†ã€‚æˆ‘çœŸæ­£è§£å†³äº†å®é™…é—®é¢˜ï¼Œè€Œä¸æ˜¯åœ¨è¡¨é¢åŠŸå¤«ä¸Šæµªè´¹æ—¶é—´ã€‚æˆ‘å¼€å§‹æ„Ÿè§‰åˆ°ï¼Œ<strong>æˆ‘æ˜¯åœ¨ã€Œç”¨ã€AI å·¥å…·ï¼Œè€Œä¸æ˜¯è¢«å·¥å…·ã€Œç”¨ã€ã€‚</strong></p>
<p>è¿™è®©æˆ‘æƒ³èµ·äº†ä¸€å¥è¯ï¼š
<strong>æ·±åº¦ï¼Œæ°¸è¿œæ¯”å¹¿åº¦æ›´æœ‰ä»·å€¼ã€‚</strong></p>
<hr/>
<h3 data-id="heading-5">éœ€æ±‚é©±åŠ¨ï¼Œè€Œä¸æ˜¯å·¥å…·é©±åŠ¨</h3>
<p>è¿™æ®µç»å†è®©æˆ‘æ˜ç™½äº†ä¸€ä¸ªé“ç†ï¼š<strong>æˆ‘ä»¬åº”è¯¥ç”¨éœ€æ±‚é©±åŠ¨å·¥å…·é€‰æ‹©ï¼Œè€Œä¸æ˜¯ç”¨å·¥å…·é©±åŠ¨éœ€æ±‚åˆ›é€ ã€‚</strong></p>
<p>ä»¥å‰æˆ‘æ˜¯è¿™æ ·çš„ï¼šçœ‹åˆ°ä¸€ä¸ªæ–°å·¥å…·ï¼Œå…ˆæ”¶è—ï¼Œç„¶åæƒ³ã€Œæˆ‘èƒ½ç”¨å®ƒåšä»€ä¹ˆã€ã€‚è¿™æ˜¯å·¥å…·é©±åŠ¨çš„æ€ç»´æ–¹å¼ï¼Œæœ¬è´¨ä¸Šæ˜¯åœ¨ä¸ºå·¥å…·æ‰¾åº”ç”¨åœºæ™¯ï¼Œè€Œä¸æ˜¯ä¸ºé—®é¢˜æ‰¾è§£å†³æ–¹æ¡ˆã€‚</p>
<p>ç°åœ¨æˆ‘å˜æˆäº†è¿™æ ·ï¼šé‡åˆ°ä¸€ä¸ªé—®é¢˜ï¼Œå…ˆæ€è€ƒã€Œæˆ‘éœ€è¦ä»€ä¹ˆèƒ½åŠ›æ¥è§£å†³å®ƒã€ï¼Œç„¶åå»æ‰¾å¯¹åº”çš„å·¥å…·ã€‚å¦‚æœç°æœ‰çš„å·¥å…·å·²ç»å¤Ÿç”¨ï¼Œå°±ä¸å†æ·»åŠ æ–°çš„ã€‚è¿™æ˜¯éœ€æ±‚é©±åŠ¨çš„æ€ç»´æ–¹å¼ï¼Œæ›´åŠ åŠ¡å®ï¼Œä¹Ÿæ›´åŠ é«˜æ•ˆã€‚</p>
<p>è¯´å®è¯ï¼Œè¿™ä¸ªè½¬å˜ä¸å®¹æ˜“ã€‚å› ä¸ºæˆ‘ä»¬ç”Ÿæ´»åœ¨ä¸€ä¸ªä¿¡æ¯çˆ†ç‚¸çš„æ—¶ä»£ï¼Œæ¯å¤©éƒ½æœ‰æ— æ•°çš„æ–°ä¸œè¥¿åœ¨è¯±æƒ‘æˆ‘ä»¬ã€‚ã€Œä¸å­¦å°±ä¼šè½åã€çš„ç„¦è™‘æ„Ÿä¸€ç›´åœ¨é©±ä½¿ç€æˆ‘ä»¬ä¸åœåœ°è¿½é€æ–°äº‹ç‰©ã€‚</p>
<p>ä½†æˆ‘ç°åœ¨æ˜ç™½äº†ï¼ŒçœŸæ­£çš„è½åä¸æ˜¯ä¸çŸ¥é“æœ€æ–°çš„å·¥å…·ï¼Œè€Œæ˜¯è¿æ‰‹ä¸Šçš„å·¥å…·éƒ½æ²¡ç”¨æ˜ç™½ã€‚</p>
<p><strong>â—ï¸AI æ—¶ä»£æœ€å¤§çš„é™·é˜±ï¼Œä¸æ˜¯å­¦å¾—æ…¢ï¼Œè€Œæ˜¯å­¦å¾—å¤ªæ‚ã€‚</strong></p>
<hr/>
<h3 data-id="heading-6">èšç„¦è‡ªå·±çš„åœºæ™¯</h3>
<p>è¿˜æœ‰ä¸€ä¸ªå¾ˆé‡è¦çš„æ„Ÿæ‚Ÿï¼š<strong>è¦èšç„¦è‡ªå·±çš„åœºæ™¯ï¼Œè€Œä¸æ˜¯ç›²ç›®è·Ÿé£ã€‚</strong></p>
<p>æ¯ä¸ªäººçš„å·¥ä½œåœºæ™¯ã€ç”Ÿæ´»æ–¹å¼ã€æ€ç»´ä¹ æƒ¯éƒ½ä¸ä¸€æ ·ã€‚åˆ«äººè§‰å¾—å¥½ç”¨çš„å·¥å…·ï¼Œä¸ä¸€å®šé€‚åˆä½ ã€‚åˆ«äººéœ€è¦è§£å†³çš„é—®é¢˜ï¼Œä¹Ÿä¸ä¸€å®šæ˜¯ä½ çš„ç—›ç‚¹ã€‚</p>
<p>æˆ‘æ˜¯ç‹¬ç«‹æ¸¸æˆå¼€å‘è€…ï¼Œæˆ‘çš„ä¸»è¦éœ€æ±‚æ˜¯å†™ä»£ç ã€Debugã€å†™æ–‡ç« ã€æ•´ç†ç¬”è®°ã€‚æ‰€ä»¥å¯¹æˆ‘æ¥è¯´ï¼ŒClaude Code å·²ç»è¶³å¤Ÿäº†ã€‚</p>
<p>å…³é”®æ˜¯è¦ææ¸…æ¥šè‡ªå·±çœŸæ­£éœ€è¦ä»€ä¹ˆï¼Œè€Œä¸æ˜¯çœ‹åˆ«äººç”¨ä»€ä¹ˆå°±è·Ÿç€ç”¨ä»€ä¹ˆã€‚</p>
<p>æˆ‘è§è¿‡å¤ªå¤šäººï¼Œæ”¶è—å¤¹é‡Œè£…ç€ä¸Šç™¾ä¸ªå·¥å…·ï¼Œå´è¿ä¸€ä¸ªéƒ½æ²¡ç”¨å¥½ã€‚ä»–ä»¬ä¸æ˜¯ä¸åŠªåŠ›ï¼Œè€Œæ˜¯å¤ªåˆ†æ•£äº†ã€‚ç²¾åŠ›æ˜¯æœ‰é™çš„ï¼Œä½ ä¸å¯èƒ½æŠŠæ¯ä¸ªå·¥å…·éƒ½ç ”ç©¶é€ã€‚</p>
<p>ä¸å…¶è¿™æ ·ï¼Œä¸å¦‚èšç„¦ä¸€ä¸ªåœºæ™¯ï¼Œé€‰ä¸€ä¸ªå·¥å…·ï¼Œæ·±åº¦ä½¿ç”¨ã€‚æŠŠå®ƒç”¨åˆ°æè‡´ï¼Œè§£å†³ä½  80% çš„é—®é¢˜ã€‚è¿™æ¯”ä½ æµ…å°è¾„æ­¢åœ°è¯• 100 ä¸ªå·¥å…·è¦æœ‰æ•ˆå¾—å¤šã€‚</p>
<hr/>
<h3 data-id="heading-7">å®è·µï¼Œè€Œä¸æ˜¯æ”¶è—</h3>
<p>æœ€åä¸€ä¸ªæ„Ÿæ‚Ÿï¼š<strong>è¦ç«‹åˆ»å®è·µï¼Œè€Œä¸æ˜¯å…ˆæ”¶è—ã€‚</strong></p>
<p>ä»¥å‰çœ‹åˆ°ä¸€ç¯‡å¥½æ–‡ç« ï¼Œæˆ‘çš„ç¬¬ä¸€ååº”æ˜¯ã€Œå…ˆæ”¶è—ï¼Œä»¥åå†çœ‹ã€ã€‚ç»“æœæ”¶è—å¤¹é‡Œç§¯ç´¯äº†å‡ ç™¾ç¯‡æ–‡ç« ï¼ŒçœŸæ­£çœ‹çš„ä¸åˆ°ååˆ†ä¹‹ä¸€ã€‚</p>
<p>ç°åœ¨æˆ‘æ”¹å˜äº†ç­–ç•¥ï¼šçœ‹åˆ°ä¸€ç¯‡æ–‡ç« ï¼Œè¦ä¹ˆç«‹åˆ»å®è·µï¼Œè¦ä¹ˆç›´æ¥æ”¾å¼ƒã€‚æ²¡æœ‰ä¸­é—´çŠ¶æ€ï¼Œæ²¡æœ‰ã€Œä»¥åå†è¯´ã€ã€‚</p>
<p>è¿™ä¸ªæ–¹æ³•çœ‹èµ·æ¥å¾ˆæ¿€è¿›ï¼Œä½†å®é™…ä¸Šéå¸¸æœ‰æ•ˆã€‚å› ä¸ºå¤§éƒ¨åˆ†æ—¶å€™ï¼Œã€Œä»¥åã€æ°¸è¿œä¸ä¼šæ¥ã€‚ä½ æ”¶è—çš„ä¸œè¥¿ï¼Œ90% éƒ½ä¸ä¼šå†æ‰“å¼€ã€‚ä¸å…¶è®©å®ƒä»¬é™é™åœ°èººåœ¨æ”¶è—å¤¹é‡Œåˆ¶é€ ç„¦è™‘ï¼Œä¸å¦‚ä¸€å¼€å§‹å°±åšä¸ªå†³å®šï¼šè¿™ä¸ªä¸œè¥¿å¯¹æˆ‘æœ‰ç”¨å—ï¼Ÿæœ‰ç”¨å°±é©¬ä¸Šè¯•ï¼Œæ²¡ç”¨å°±ç›´æ¥è·³è¿‡ã€‚</p>
<p>åŒæ ·çš„é“ç†ä¹Ÿé€‚ç”¨äºå·¥å…·ã€‚çœ‹åˆ°ä¸€ä¸ªæ–°å·¥å…·ï¼Œä¸è¦æ€¥ç€ä¸‹è½½å®‰è£…ã€‚å…ˆé—®è‡ªå·±ï¼šå®ƒèƒ½è§£å†³æˆ‘ç°åœ¨é‡åˆ°çš„ä»€ä¹ˆé—®é¢˜ï¼Ÿå¦‚æœç­”æ¡ˆæ˜¯ã€Œè¯´ä¸æ¸…ã€æˆ–è€…ã€Œä»¥åå¯èƒ½ä¼šç”¨åˆ°ã€ï¼Œé‚£å°±å…ˆåˆ«ç¢°å®ƒã€‚ç­‰ä½ çœŸæ­£é‡åˆ°äº†å¯¹åº”çš„é—®é¢˜ï¼Œå†å»ç ”ç©¶ä¹Ÿä¸è¿Ÿã€‚</p>
<p>GPT-5 å‡ºäº†ï¼Ÿå…ˆåˆ«æ€¥ç€è¯•ã€‚é—®é—®è‡ªå·±ï¼šæˆ‘ç°åœ¨ç”¨çš„å·¥å…·å¤Ÿä¸å¤Ÿç”¨ï¼Ÿå¦‚æœå¤Ÿç”¨ï¼Œå°±æ²¡å¿…è¦æ¢ã€‚å¦‚æœä¸å¤Ÿç”¨ï¼Œå…ˆææ¸…æ¥šå“ªé‡Œä¸å¤Ÿç”¨ï¼Œå†åˆ¤æ–­æ–°å·¥å…·èƒ½ä¸èƒ½è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p>
<hr/>
<h3 data-id="heading-8">å†™åœ¨æœ€å</h3>
<p>ä»ã€Œå·¥å…·æ”¶é›†ç‹‚ã€åˆ°ã€Œå‡æ³•ç”Ÿæ´»ã€ï¼Œè¿™ä¸ªè½¬å˜è®©æˆ‘é‡æ–°æ‰¾å›äº†å¯¹ AI å·¥å…·çš„æŒæ§æ„Ÿã€‚</p>
<p>AI å·¥å…·æ˜¯ç”¨æ¥è§£å†³é—®é¢˜çš„ï¼Œä¸æ˜¯ç”¨æ¥åˆ¶é€ ç„¦è™‘çš„ã€‚ä½ ä¸éœ€è¦æŒæ¡æ‰€æœ‰å·¥å…·ï¼Œä½ åªéœ€è¦è§£å†³è‡ªå·±çš„é—®é¢˜ã€‚</p>
<p><strong>ä¸å…¶æ‹¿ç€é”¤å­åˆ°å¤„æ‰¾é’‰å­ï¼Œä¸å¦‚å…ˆçœ‹æ¸…è‡ªå·±çš„é’‰å­åœ¨å“ªé‡Œã€‚
å°‘å³æ˜¯å¤šï¼Œèšç„¦æ‰æ˜¯ç‹é“ã€‚</strong></p>
<p>å¦‚æœä½ ä¹Ÿæœ‰ AI ç„¦è™‘ï¼Œä¸å¦¨è¯•è¯•åšå‡æ³•ã€‚åˆ—å‡ºä¸‰ä¸ªä½ æœ€ç—›çš„å®é™…é—®é¢˜ï¼Œæ¯ä¸ªé—®é¢˜åªé€‰ä¸€ä¸ªå·¥å…·ï¼Œæ·±åº¦ä½¿ç”¨ä¸€ä¸ªæœˆã€‚è§£å†³äº†ï¼Œå†æ¢ä¸‹ä¸€ä¸ªã€‚</p>
<p><strong>ğŸ’¡æ…¢æ…¢æ¥ï¼Œæ¯”è¾ƒå¿«</strong></p>
<hr/>
<p>ğŸ’¬ ä½ å¹³æ—¶æ˜¯æ€ä¹ˆé€‰æ‹©å’Œä½¿ç”¨ AI å·¥å…·çš„ï¼Ÿæ¬¢è¿åœ¨è¯„è®ºåŒºåˆ†äº«ä½ çš„æ–¹æ³•å’Œæ„Ÿæ‚Ÿã€‚</p>
<p>ğŸ‘ è§‰å¾—æœ‰ç”¨çš„è¯ï¼Œè®°å¾—ç‚¹èµæ”¶è—ï¼Œè®©æ›´å¤šäººçœ‹åˆ°è¿™ç¯‡æ–‡ç« ã€‚</p>
<p>æˆ‘ä»¬ä¸‹æœŸè§ã€‚</p>
<hr/>
<ul>
<li>#å…¬ä¼—å·ï¼šé˜¿è¡¡çš„AIæ—¥å¸¸</li>
<li>å°çº¢ä¹¦ï¼šé˜¿è¡¡çš„AIæ—¥å¸¸</li>
<li>#CSDNï¼šDebugEve</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æœºå™¨å­¦ä¹ æ ¸å¿ƒç®—æ³•å…¨æ™¯è§£æï¼šä»åŸç†åˆ°å®æˆ˜]]></title>    <link>https://juejin.cn/post/7593600903249379354</link>    <guid>https://juejin.cn/post/7593600903249379354</guid>    <pubDate>2026-01-11T01:32:56.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7593600903249379354" data-draft-id="7593375360554795058" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æœºå™¨å­¦ä¹ æ ¸å¿ƒç®—æ³•å…¨æ™¯è§£æï¼šä»åŸç†åˆ°å®æˆ˜"/> <meta itemprop="keywords" content="æœºå™¨å­¦ä¹ "/> <meta itemprop="datePublished" content="2026-01-11T01:32:56.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åŒ—è¾°alk"/> <meta itemprop="url" content="https://juejin.cn/user/1772855673241352"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æœºå™¨å­¦ä¹ æ ¸å¿ƒç®—æ³•å…¨æ™¯è§£æï¼šä»åŸç†åˆ°å®æˆ˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1772855673241352/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åŒ—è¾°alk
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-11T01:32:56.000Z" title="Sun Jan 11 2026 01:32:56 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»17åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€ï¼šèµ°è¿›æ™ºèƒ½æ—¶ä»£çš„æ ¸å¿ƒå¼•æ“</h2>
<p>å„ä½è¯»è€…æœ‹å‹ï¼Œå¤§å®¶å¥½ï¼åœ¨è¿™ä¸ªæ•°æ®çˆ†ç‚¸çš„æ—¶ä»£ï¼Œæœºå™¨å­¦ä¹ å·²ç»æ‚„ç„¶æ¸—é€åˆ°æˆ‘ä»¬ç”Ÿæ´»çš„æ–¹æ–¹é¢é¢â€”â€”ä»æ‰‹æœºçš„äººè„¸è¯†åˆ«ã€ç”µå•†çš„æ¨èç³»ç»Ÿï¼Œåˆ°è‡ªåŠ¨é©¾é©¶ã€åŒ»ç–—è¯Šæ–­ï¼Œæ— ä¸é—ªè€€ç€æœºå™¨å­¦ä¹ ç®—æ³•çš„æ™ºæ…§å…‰èŠ’ã€‚ä»Šå¤©ï¼Œæˆ‘å°†å¸¦å¤§å®¶æ·±å…¥æ¢ç´¢æœºå™¨å­¦ä¹ çš„æ ¸å¿ƒç®—æ³•ä¸–ç•Œï¼Œä¸ä»…è¯¦ç»†è§£æåŸç†ï¼Œè¿˜ä¼šé™„ä¸Šå®é™…ä»£ç ç¤ºä¾‹å’Œæµç¨‹å›¾ï¼Œè®©ä½ çœŸæ­£æŒæ¡è¿™äº›æ”¹å˜ä¸–ç•Œçš„æŠ€æœ¯ï¼</p>
<h2 data-id="heading-1">ä¸€ã€æœºå™¨å­¦ä¹ ç®—æ³•åˆ†ç±»å…¨æ™¯å›¾</h2>
<pre><code class="hljs">æœºå™¨å­¦ä¹ ç®—æ³•ç›‘ç£å­¦ä¹ æ— ç›‘ç£å­¦ä¹ åŠç›‘ç£å­¦ä¹ å¼ºåŒ–å­¦ä¹ åˆ†ç±»ç®—æ³•å›å½’ç®—æ³•é€»è¾‘å›å½’å†³ç­–æ ‘éšæœºæ£®æ—æ”¯æŒå‘é‡æœºæœ´ç´ è´å¶æ–¯ç¥ç»ç½‘ç»œèšç±»ç®—æ³•é™ç»´ç®—æ³•K-meanså±‚æ¬¡èšç±»DBSCANPCAt-SNE
</code></pre>
<h2 data-id="heading-2">äºŒã€ç›‘ç£å­¦ä¹ ï¼šæœ‰å¯¼å¸ˆçš„æ™ºèƒ½è®­ç»ƒ</h2>
<h3 data-id="heading-3">1. çº¿æ€§å›å½’ï¼šé¢„æµ‹çš„åŸºç¡€æ”¯æŸ±</h3>
<p><strong>ç®—æ³•åŸç†</strong>ï¼šå¯»æ‰¾ç‰¹å¾ä¸ç›®æ ‡ä¹‹é—´çš„çº¿æ€§å…³ç³»</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span>Â numpyÂ <span class="hljs-keyword">as</span>Â np
<span class="hljs-keyword">import</span>Â matplotlib.pyplotÂ <span class="hljs-keyword">as</span>Â plt
<span class="hljs-keyword">from</span>Â sklearn.linear_modelÂ <span class="hljs-keyword">import</span>Â LinearRegression
<span class="hljs-keyword">from</span>Â sklearn.model_selectionÂ <span class="hljs-keyword">import</span>Â train_test_split
<span class="hljs-keyword">from</span>Â sklearn.metricsÂ <span class="hljs-keyword">import</span>Â mean_squared_error,Â r2_score

<span class="hljs-comment">#Â ç”Ÿæˆç¤ºä¾‹æ•°æ®</span>
np.random.seed(<span class="hljs-number">42</span>)
XÂ =Â <span class="hljs-number">2</span>Â *Â np.random.rand(<span class="hljs-number">100</span>,Â <span class="hljs-number">1</span>)
yÂ =Â <span class="hljs-number">4</span>Â +Â <span class="hljs-number">3</span>Â *Â XÂ +Â np.random.randn(<span class="hljs-number">100</span>,Â <span class="hljs-number">1</span>)

<span class="hljs-comment">#Â åˆ’åˆ†æ•°æ®é›†</span>
X_train,Â X_test,Â y_train,Â y_testÂ =Â train_test_split(X,Â y,Â test_size=<span class="hljs-number">0.2</span>,Â random_state=<span class="hljs-number">42</span>)

<span class="hljs-comment">#Â åˆ›å»ºæ¨¡å‹å¹¶è®­ç»ƒ</span>
modelÂ =Â LinearRegression()
model.fit(X_train,Â y_train)

<span class="hljs-comment">#Â é¢„æµ‹</span>
y_predÂ =Â model.predict(X_test)

<span class="hljs-comment">#Â è¯„ä¼°æ¨¡å‹</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"æˆªè·:Â <span class="hljs-subst">{model.intercept_}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"ç³»æ•°:Â <span class="hljs-subst">{model.coef_}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"å‡æ–¹è¯¯å·®:Â <span class="hljs-subst">{mean_squared_error(y_test,Â y_pred):<span class="hljs-number">.2</span>f}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"RÂ²åˆ†æ•°:Â <span class="hljs-subst">{r2_score(y_test,Â y_pred):<span class="hljs-number">.2</span>f}</span>"</span>)

<span class="hljs-comment">#Â å¯è§†åŒ–ç»“æœ</span>
plt.figure(figsize=(<span class="hljs-number">10</span>,Â <span class="hljs-number">6</span>))
plt.scatter(X_test,Â y_test,Â color=<span class="hljs-string">'blue'</span>,Â label=<span class="hljs-string">'å®é™…å€¼'</span>)
plt.plot(X_test,Â y_pred,Â color=<span class="hljs-string">'red'</span>,Â linewidth=<span class="hljs-number">2</span>,Â label=<span class="hljs-string">'é¢„æµ‹å€¼'</span>)
plt.xlabel(<span class="hljs-string">'ç‰¹å¾X'</span>)
plt.ylabel(<span class="hljs-string">'ç›®æ ‡y'</span>)
plt.title(<span class="hljs-string">'çº¿æ€§å›å½’é¢„æµ‹ç»“æœ'</span>)
plt.legend()
plt.show()
</code></pre>
<p><strong>æµç¨‹å›¾è§£</strong>ï¼š</p>
<pre><code class="hljs">æ•°æ®å‡†å¤‡Â â†’Â è®¡ç®—æŸå¤±å‡½æ•°Â â†’Â æ¢¯åº¦ä¸‹é™ä¼˜åŒ–Â â†’Â æ›´æ–°æƒé‡å‚æ•°Â â†’Â é‡å¤ç›´åˆ°æ”¶æ•›Â â†’Â å¾—åˆ°æœ€ä½³æ‹Ÿåˆç›´çº¿
</code></pre>
<h3 data-id="heading-4">2. é€»è¾‘å›å½’ï¼šåˆ†ç±»çš„ç»å…¸ç®—æ³•</h3>
<p>è™½ç„¶åå­—ä¸­æœ‰"å›å½’"ï¼Œä½†é€»è¾‘å›å½’å®é™…ä¸Šæ˜¯å¤„ç†äºŒåˆ†ç±»é—®é¢˜çš„åˆ©å™¨ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">importÂ numpyÂ asÂ np
importÂ matplotlib.pyplotÂ asÂ plt
fromÂ sklearn.linear_modelÂ importÂ LogisticRegression
fromÂ sklearn.datasetsÂ importÂ make_classification
fromÂ sklearn.model_selectionÂ importÂ train_test_split
fromÂ sklearn.metricsÂ importÂ classification_report,Â confusion_matrix,Â roc_curve,Â auc

<span class="hljs-comment">#Â åˆ›å»ºåˆ†ç±»æ•°æ®é›†</span>
X,Â <span class="hljs-attr">y</span>Â =Â make_classification(n_samples=<span class="hljs-number">1000</span>,Â n_features=<span class="hljs-number">2</span>,Â n_informative=<span class="hljs-number">2</span>,
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-attr">n_redundant</span>=<span class="hljs-number">0</span>,Â n_clusters_per_class=<span class="hljs-number">1</span>,
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-attr">random_state</span>=<span class="hljs-number">42</span>)

<span class="hljs-comment">#Â åˆ’åˆ†æ•°æ®é›†</span>
X_train,Â X_test,Â y_train,Â <span class="hljs-attr">y_test</span>Â =Â train_test_split(X,Â y,Â test_size=<span class="hljs-number">0.3</span>,Â random_state=<span class="hljs-number">42</span>)

<span class="hljs-comment">#Â åˆ›å»ºé€»è¾‘å›å½’æ¨¡å‹</span>
<span class="hljs-attr">log_reg</span>Â =Â LogisticRegression()
log_reg.fit(X_train,Â y_train)

<span class="hljs-comment">#Â é¢„æµ‹</span>
<span class="hljs-attr">y_pred</span>Â =Â log_reg.predict(X_test)
<span class="hljs-attr">y_pred_proba</span>Â =Â log_reg.predict_proba(X_test)[:,Â <span class="hljs-number">1</span>]

<span class="hljs-comment">#Â è¯„ä¼°æ¨¡å‹</span>
print("åˆ†ç±»æŠ¥å‘Š:")
print(classification_report(y_test,Â y_pred))

print("\næ··æ·†çŸ©é˜µ:")
print(confusion_matrix(y_test,Â y_pred))

<span class="hljs-comment">#Â ROCæ›²çº¿</span>
fpr,Â tpr,Â <span class="hljs-attr">thresholds</span>Â =Â roc_curve(y_test,Â y_pred_proba)
<span class="hljs-attr">roc_auc</span>Â =Â auc(fpr,Â tpr)

plt.figure(<span class="hljs-attr">figsize</span>=(<span class="hljs-number">12</span>,Â <span class="hljs-number">5</span>))
plt.subplot(1,Â 2,Â 1)
plt.scatter(X_test<span class="hljs-section">[:,Â 0]</span>,Â X_test<span class="hljs-section">[:,Â 1]</span>,Â <span class="hljs-attr">c</span>=y_test,Â cmap=<span class="hljs-string">'coolwarm'</span>,Â alpha=<span class="hljs-number">0.6</span>)
plt.title('æµ‹è¯•é›†æ•°æ®åˆ†å¸ƒ')

plt.subplot(1,Â 2,Â 2)
plt.plot(fpr,Â tpr,Â <span class="hljs-attr">color</span>=<span class="hljs-string">'darkorange'</span>,Â lw=<span class="hljs-number">2</span>,Â label=f<span class="hljs-string">'ROCæ›²çº¿Â (AUCÂ =Â {roc_auc:.2f})'</span>)
plt.plot(<span class="hljs-section">[0,Â 1]</span>,Â <span class="hljs-section">[0,Â 1]</span>,Â <span class="hljs-attr">color</span>=<span class="hljs-string">'navy'</span>,Â lw=<span class="hljs-number">2</span>,Â linestyle=<span class="hljs-string">'--'</span>)
plt.xlabel('å‡æ­£ç‡')
plt.ylabel('çœŸæ­£ç‡')
plt.title('ROCæ›²çº¿')
plt.legend()
plt.tight_layout()
plt.show()
</code></pre>
<h3 data-id="heading-5">3. å†³ç­–æ ‘ï¼šç›´è§‚çš„å¯è§£é‡Šæ¨¡å‹</h3>
<p>å†³ç­–æ ‘é€šè¿‡ä¸€ç³»åˆ—è§„åˆ™å¯¹æ•°æ®è¿›è¡Œåˆ†ç±»ï¼Œéå¸¸ç›´è§‚æ˜“æ‡‚ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">fromÂ sklearn.treeÂ importÂ DecisionTreeClassifier,Â plot_tree
fromÂ sklearn.datasetsÂ importÂ load_iris
fromÂ sklearn.model_selectionÂ importÂ train_test_split
importÂ matplotlib.pyplotÂ asÂ plt

<span class="hljs-comment">#Â åŠ è½½é¸¢å°¾èŠ±æ•°æ®é›†</span>
<span class="hljs-attr">iris</span>Â =Â load_iris()
<span class="hljs-attr">X</span>Â =Â iris.data
<span class="hljs-attr">y</span>Â =Â iris.target
<span class="hljs-attr">feature_names</span>Â =Â iris.feature_names
<span class="hljs-attr">class_names</span>Â =Â iris.target_names

<span class="hljs-comment">#Â åˆ’åˆ†æ•°æ®é›†</span>
X_train,Â X_test,Â y_train,Â <span class="hljs-attr">y_test</span>Â =Â train_test_split(X,Â y,Â test_size=<span class="hljs-number">0.3</span>,Â random_state=<span class="hljs-number">42</span>)

<span class="hljs-comment">#Â åˆ›å»ºå†³ç­–æ ‘æ¨¡å‹</span>
<span class="hljs-attr">tree_clf</span>Â =Â DecisionTreeClassifier(max_depth=<span class="hljs-number">3</span>,Â random_state=<span class="hljs-number">42</span>)
tree_clf.fit(X_train,Â y_train)

<span class="hljs-comment">#Â è¯„ä¼°æ¨¡å‹</span>
<span class="hljs-attr">train_score</span>Â =Â tree_clf.score(X_train,Â y_train)
<span class="hljs-attr">test_score</span>Â =Â tree_clf.score(X_test,Â y_test)

print(f"è®­ç»ƒé›†å‡†ç¡®ç‡:Â {train_score:.2f}")
print(f"æµ‹è¯•é›†å‡†ç¡®ç‡:Â {test_score:.2f}")

<span class="hljs-comment">#Â å¯è§†åŒ–å†³ç­–æ ‘</span>
plt.figure(<span class="hljs-attr">figsize</span>=(<span class="hljs-number">15</span>,Â <span class="hljs-number">10</span>))
plot_tree(tree_clf,Â 
Â Â Â Â Â Â Â Â Â Â <span class="hljs-attr">feature_names</span>=feature_names,
Â Â Â Â Â Â Â Â Â Â <span class="hljs-attr">class_names</span>=class_names,
Â Â Â Â Â Â Â Â Â Â <span class="hljs-attr">filled</span>=<span class="hljs-literal">True</span>,
Â Â Â Â Â Â Â Â Â Â <span class="hljs-attr">rounded</span>=<span class="hljs-literal">True</span>)
plt.title("å†³ç­–æ ‘å¯è§†åŒ–")
plt.show()
</code></pre>
<p><strong>å†³ç­–æ ‘æ„å»ºæµç¨‹</strong>ï¼š</p>
<pre><code class="hljs">å¼€å§‹
Â Â Â Â â†“
é€‰æ‹©æœ€ä½³åˆ†è£‚ç‰¹å¾ï¼ˆä½¿ç”¨åŸºå°¼æŒ‡æ•°æˆ–ä¿¡æ¯å¢ç›Šï¼‰
Â Â Â Â â†“
æ ¹æ®ç‰¹å¾é˜ˆå€¼åˆ†å‰²æ•°æ®
Â Â Â Â â†“
å¯¹æ¯ä¸ªå­é›†é‡å¤ä¸Šè¿°è¿‡ç¨‹
Â Â Â Â â†“
è¾¾åˆ°åœæ­¢æ¡ä»¶ï¼ˆæ·±åº¦é™åˆ¶ã€æ ·æœ¬æ•°æœ€å°ç­‰ï¼‰
Â Â Â Â â†“
ç”Ÿæˆå¶èŠ‚ç‚¹ï¼Œç¡®å®šç±»åˆ«
Â Â Â Â â†“
ç»“æŸ
</code></pre>
<h3 data-id="heading-6">4. éšæœºæ£®æ—ï¼šé›†ä½“çš„æ™ºæ…§</h3>
<p>éšæœºæ£®æ—é€šè¿‡æ„å»ºå¤šä¸ªå†³ç­–æ ‘å¹¶ç»¼åˆå®ƒä»¬çš„é¢„æµ‹ç»“æœï¼Œæ˜¾è‘—æå‡äº†æ¨¡å‹çš„å‡†ç¡®æ€§å’Œç¨³å®šæ€§ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">fromÂ sklearn.ensembleÂ importÂ RandomForestClassifier
fromÂ sklearn.datasetsÂ importÂ make_classification
fromÂ sklearn.model_selectionÂ importÂ train_test_split,Â cross_val_score
importÂ numpyÂ asÂ np
importÂ matplotlib.pyplotÂ asÂ plt

<span class="hljs-comment">#Â åˆ›å»ºå¤æ‚æ•°æ®é›†</span>
X,Â <span class="hljs-attr">y</span>Â =Â make_classification(n_samples=<span class="hljs-number">1000</span>,Â n_features=<span class="hljs-number">20</span>,Â n_informative=<span class="hljs-number">15</span>,
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-attr">n_classes</span>=<span class="hljs-number">3</span>,Â random_state=<span class="hljs-number">42</span>)

<span class="hljs-comment">#Â åˆ’åˆ†æ•°æ®é›†</span>
X_train,Â X_test,Â y_train,Â <span class="hljs-attr">y_test</span>Â =Â train_test_split(X,Â y,Â test_size=<span class="hljs-number">0.3</span>,Â random_state=<span class="hljs-number">42</span>)

<span class="hljs-comment">#Â åˆ›å»ºéšæœºæ£®æ—æ¨¡å‹</span>
<span class="hljs-attr">rf_clf</span>Â =Â RandomForestClassifier(n_estimators=<span class="hljs-number">100</span>,Â Â <span class="hljs-comment">#Â æ ‘çš„æ•°é‡</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-attr">max_depth</span>=<span class="hljs-number">10</span>,Â Â Â Â Â Â <span class="hljs-comment">#Â æœ€å¤§æ·±åº¦</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-attr">min_samples_split</span>=<span class="hljs-number">5</span>,Â <span class="hljs-comment">#Â æœ€å°åˆ†è£‚æ ·æœ¬æ•°</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-attr">random_state</span>=<span class="hljs-number">42</span>)

<span class="hljs-comment">#Â è®­ç»ƒæ¨¡å‹</span>
rf_clf.fit(X_train,Â y_train)

<span class="hljs-comment">#Â è¯„ä¼°æ¨¡å‹</span>
<span class="hljs-attr">accuracy</span>Â =Â rf_clf.score(X_test,Â y_test)
print(f"éšæœºæ£®æ—æµ‹è¯•é›†å‡†ç¡®ç‡:Â {accuracy:.2f}")

<span class="hljs-comment">#Â äº¤å‰éªŒè¯</span>
<span class="hljs-attr">cv_scores</span>Â =Â cross_val_score(rf_clf,Â X,Â y,Â cv=<span class="hljs-number">5</span>)
print(f"äº¤å‰éªŒè¯å¹³å‡å¾—åˆ†:Â {cv_scores.mean():.2f}Â (+/-Â {cv_scores.std()Â *Â 2:.2f})")

<span class="hljs-comment">#Â ç‰¹å¾é‡è¦æ€§åˆ†æ</span>
<span class="hljs-attr">feature_importance</span>Â =Â rf_clf.feature_importances_
<span class="hljs-attr">indices</span>Â =Â np.argsort(feature_importance)[::-<span class="hljs-number">1</span>]

plt.figure(<span class="hljs-attr">figsize</span>=(<span class="hljs-number">12</span>,Â <span class="hljs-number">6</span>))
plt.title("ç‰¹å¾é‡è¦æ€§æ’åº")
plt.bar(range(X.shape<span class="hljs-section">[1]</span>),Â feature_importance<span class="hljs-section">[indices]</span>)
plt.xlabel("ç‰¹å¾ç´¢å¼•")
plt.ylabel("é‡è¦æ€§å¾—åˆ†")
plt.xticks(range(X.shape<span class="hljs-section">[1]</span>),Â indices)
plt.show()
</code></pre>
<h3 data-id="heading-7">5. æ”¯æŒå‘é‡æœºï¼ˆSVMï¼‰ï¼šå¯»æ‰¾æœ€ä¼˜è¾¹ç•Œ</h3>
<p>SVMé€šè¿‡å¯»æ‰¾æœ€å¤§åŒ–ç±»åˆ«é—´éš”çš„è¶…å¹³é¢æ¥è¿›è¡Œåˆ†ç±»ï¼Œç‰¹åˆ«é€‚åˆé«˜ç»´ç©ºé—´ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">importÂ numpyÂ asÂ np
importÂ matplotlib.pyplotÂ asÂ plt
fromÂ sklearnÂ importÂ svm
fromÂ sklearn.datasetsÂ importÂ make_moons
fromÂ sklearn.model_selectionÂ importÂ train_test_split
fromÂ sklearn.preprocessingÂ importÂ StandardScaler
fromÂ sklearn.metricsÂ importÂ accuracy_score

<span class="hljs-comment">#Â åˆ›å»ºéçº¿æ€§å¯åˆ†æ•°æ®</span>
X,Â <span class="hljs-attr">y</span>Â =Â make_moons(n_samples=<span class="hljs-number">300</span>,Â noise=<span class="hljs-number">0.2</span>,Â random_state=<span class="hljs-number">42</span>)

<span class="hljs-comment">#Â æ•°æ®æ ‡å‡†åŒ–</span>
<span class="hljs-attr">scaler</span>Â =Â StandardScaler()
<span class="hljs-attr">X_scaled</span>Â =Â scaler.fit_transform(X)

<span class="hljs-comment">#Â åˆ’åˆ†æ•°æ®é›†</span>
X_train,Â X_test,Â y_train,Â <span class="hljs-attr">y_test</span>Â =Â train_test_split(X_scaled,Â y,Â test_size=<span class="hljs-number">0.3</span>,Â random_state=<span class="hljs-number">42</span>)

<span class="hljs-comment">#Â åˆ›å»ºSVMæ¨¡å‹ï¼ˆä½¿ç”¨RBFæ ¸å¤„ç†éçº¿æ€§é—®é¢˜ï¼‰</span>
<span class="hljs-attr">svm_clf</span>Â =Â svm.SVC(kernel=<span class="hljs-string">'rbf'</span>,Â Â <span class="hljs-comment">#Â å¾„å‘åŸºå‡½æ•°æ ¸</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-attr">C</span>=<span class="hljs-number">1.0</span>,Â Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â æ­£åˆ™åŒ–å‚æ•°</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-attr">gamma</span>=<span class="hljs-string">'scale'</span>,Â <span class="hljs-comment">#Â æ ¸ç³»æ•°</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-attr">random_state</span>=<span class="hljs-number">42</span>)

<span class="hljs-comment">#Â è®­ç»ƒæ¨¡å‹</span>
svm_clf.fit(X_train,Â y_train)

<span class="hljs-comment">#Â é¢„æµ‹</span>
<span class="hljs-attr">y_pred</span>Â =Â svm_clf.predict(X_test)
<span class="hljs-attr">accuracy</span>Â =Â accuracy_score(y_test,Â y_pred)
print(f"SVMæµ‹è¯•é›†å‡†ç¡®ç‡:Â {accuracy:.2f}")

<span class="hljs-comment">#Â å¯è§†åŒ–å†³ç­–è¾¹ç•Œ</span>
defÂ plot_decision_boundary(clf,Â X,Â y):
Â Â Â Â <span class="hljs-attr">h</span>Â =Â <span class="hljs-number">0.02</span>Â Â <span class="hljs-comment">#Â ç½‘æ ¼æ­¥é•¿</span>
Â Â Â Â x_min,Â <span class="hljs-attr">x_max</span>Â =Â X[:,Â <span class="hljs-number">0</span>].min()Â -Â <span class="hljs-number">1</span>,Â X[:,Â <span class="hljs-number">0</span>].max()Â +Â <span class="hljs-number">1</span>
Â Â Â Â y_min,Â <span class="hljs-attr">y_max</span>Â =Â X[:,Â <span class="hljs-number">1</span>].min()Â -Â <span class="hljs-number">1</span>,Â X[:,Â <span class="hljs-number">1</span>].max()Â +Â <span class="hljs-number">1</span>
Â Â Â Â xx,Â <span class="hljs-attr">yy</span>Â =Â np.meshgrid(np.arange(x_min,Â x_max,Â h),
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â np.arange(y_min,Â y_max,Â h))
Â Â Â Â 
Â Â Â Â <span class="hljs-attr">Z</span>Â =Â clf.predict(np.c_[xx.ravel(),Â yy.ravel()])
Â Â Â Â <span class="hljs-attr">Z</span>Â =Â Z.reshape(xx.shape)
Â Â Â Â 
Â Â Â Â plt.figure(<span class="hljs-attr">figsize</span>=(<span class="hljs-number">10</span>,Â <span class="hljs-number">8</span>))
Â Â Â Â plt.contourf(xx,Â yy,Â Z,Â <span class="hljs-attr">alpha</span>=<span class="hljs-number">0.3</span>,Â cmap=<span class="hljs-string">'coolwarm'</span>)
Â Â Â Â plt.scatter(X<span class="hljs-section">[:,Â 0]</span>,Â X<span class="hljs-section">[:,Â 1]</span>,Â <span class="hljs-attr">c</span>=y,Â cmap=<span class="hljs-string">'coolwarm'</span>,Â edgecolors=<span class="hljs-string">'k'</span>)
Â Â Â Â plt.xlabel('ç‰¹å¾1')
Â Â Â Â plt.ylabel('ç‰¹å¾2')
Â Â Â Â plt.title('SVMå†³ç­–è¾¹ç•Œå¯è§†åŒ–')
Â Â Â Â plt.show()

plot_decision_boundary(svm_clf,Â X_train,Â y_train)
</code></pre>
<h2 data-id="heading-8">ä¸‰ã€æ— ç›‘ç£å­¦ä¹ ï¼šå‘ç°æ•°æ®çš„éšè—ç»“æ„</h2>
<h3 data-id="heading-9">1. K-meansèšç±»ï¼šæ•°æ®åˆ†ç»„åˆ©å™¨</h3>
<pre><code class="hljs language-ini" lang="ini">importÂ numpyÂ asÂ np
importÂ matplotlib.pyplotÂ asÂ plt
fromÂ sklearn.clusterÂ importÂ KMeans
fromÂ sklearn.datasetsÂ importÂ make_blobs
fromÂ sklearn.metricsÂ importÂ silhouette_score
fromÂ sklearn.preprocessingÂ importÂ StandardScaler

<span class="hljs-comment">#Â ç”Ÿæˆæ¨¡æ‹Ÿæ•°æ®</span>
X,Â <span class="hljs-attr">y_true</span>Â =Â make_blobs(n_samples=<span class="hljs-number">300</span>,Â centers=<span class="hljs-number">4</span>,Â cluster_std=<span class="hljs-number">0.60</span>,Â random_state=<span class="hljs-number">42</span>)

<span class="hljs-comment">#Â æ•°æ®æ ‡å‡†åŒ–</span>
<span class="hljs-attr">scaler</span>Â =Â StandardScaler()
<span class="hljs-attr">X_scaled</span>Â =Â scaler.fit_transform(X)

<span class="hljs-comment">#Â ä½¿ç”¨è‚˜éƒ¨æ–¹æ³•ç¡®å®šæœ€ä½³Kå€¼</span>
<span class="hljs-attr">inertia</span>Â =Â []
<span class="hljs-attr">silhouette_scores</span>Â =Â []
<span class="hljs-attr">K_range</span>Â =Â range(<span class="hljs-number">2</span>,Â <span class="hljs-number">10</span>)

forÂ kÂ inÂ K_range:
Â Â Â Â <span class="hljs-attr">kmeans</span>Â =Â KMeans(n_clusters=k,Â random_state=<span class="hljs-number">42</span>,Â n_init=<span class="hljs-number">10</span>)
Â Â Â Â kmeans.fit(X_scaled)
Â Â Â Â inertia.append(kmeans.inertia_)
Â Â Â Â 
Â Â Â Â ifÂ len(set(kmeans.labels_))Â &gt;Â 1:Â Â <span class="hljs-comment">#Â ç¡®ä¿æœ‰å¤šä¸ªç°‡</span>
Â Â Â Â Â Â Â Â silhouette_scores.append(silhouette_score(X_scaled,Â kmeans.labels_))
Â Â Â Â else:
Â Â Â Â Â Â Â Â silhouette_scores.append(0)

<span class="hljs-comment">#Â å¯è§†åŒ–ç»“æœ</span>
fig,Â <span class="hljs-attr">axes</span>Â =Â plt.subplots(<span class="hljs-number">1</span>,Â <span class="hljs-number">3</span>,Â figsize=(<span class="hljs-number">15</span>,Â <span class="hljs-number">5</span>))

<span class="hljs-comment">#Â åŸå§‹æ•°æ®</span>
axes<span class="hljs-section">[0]</span>.scatter(X_scaled<span class="hljs-section">[:,Â 0]</span>,Â X_scaled<span class="hljs-section">[:,Â 1]</span>,Â <span class="hljs-attr">s</span>=<span class="hljs-number">50</span>)
axes<span class="hljs-section">[0]</span>.set_title('åŸå§‹æ•°æ®åˆ†å¸ƒ')

<span class="hljs-comment">#Â è‚˜éƒ¨æ³•åˆ™å›¾</span>
axes<span class="hljs-section">[1]</span>.plot(K_range,Â inertia,Â 'bo-')
axes<span class="hljs-section">[1]</span>.set_xlabel('ç°‡æ•°é‡Â K')
axes<span class="hljs-section">[1]</span>.set_ylabel('è¯¯å·®å¹³æ–¹å’Œ')
axes<span class="hljs-section">[1]</span>.set_title('è‚˜éƒ¨æ³•åˆ™')

<span class="hljs-comment">#Â è½®å»“ç³»æ•°å›¾</span>
axes<span class="hljs-section">[2]</span>.plot(K_range<span class="hljs-section">[:len(silhouette_scores)]</span>,Â silhouette_scores,Â 'ro-')
axes<span class="hljs-section">[2]</span>.set_xlabel('ç°‡æ•°é‡Â K')
axes<span class="hljs-section">[2]</span>.set_ylabel('è½®å»“ç³»æ•°')
axes<span class="hljs-section">[2]</span>.set_title('è½®å»“ç³»æ•°æ³•')

plt.tight_layout()
plt.show()

<span class="hljs-comment">#Â ä½¿ç”¨æœ€ä½³Kå€¼è¿›è¡Œèšç±»</span>
<span class="hljs-attr">best_k</span>Â =Â <span class="hljs-number">4</span>Â Â <span class="hljs-comment">#Â æ ¹æ®ä¸Šå›¾ç¡®å®š</span>
<span class="hljs-attr">kmeans</span>Â =Â KMeans(n_clusters=best_k,Â random_state=<span class="hljs-number">42</span>,Â n_init=<span class="hljs-number">10</span>)
<span class="hljs-attr">y_pred</span>Â =Â kmeans.fit_predict(X_scaled)

<span class="hljs-comment">#Â å¯è§†åŒ–èšç±»ç»“æœ</span>
plt.figure(<span class="hljs-attr">figsize</span>=(<span class="hljs-number">10</span>,Â <span class="hljs-number">8</span>))
<span class="hljs-attr">colors</span>Â =Â [<span class="hljs-string">'red'</span>,Â <span class="hljs-string">'blue'</span>,Â <span class="hljs-string">'green'</span>,Â <span class="hljs-string">'purple'</span>,Â <span class="hljs-string">'orange'</span>,Â <span class="hljs-string">'brown'</span>]
forÂ iÂ inÂ range(best_k):
Â Â Â Â plt.scatter(X_scaled<span class="hljs-section">[y_predÂ ==Â i,Â 0]</span>,Â 
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â X_scaled<span class="hljs-section">[y_predÂ ==Â i,Â 1]</span>,Â 
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-attr">s</span>=<span class="hljs-number">50</span>,Â c=colors[i],Â 
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-attr">label</span>=f<span class="hljs-string">'ç°‡Â {i+1}'</span>)

<span class="hljs-comment">#Â ç»˜åˆ¶èšç±»ä¸­å¿ƒ</span>
plt.scatter(kmeans.cluster_centers_<span class="hljs-section">[:,Â 0]</span>,Â 
Â Â Â Â Â Â Â Â Â Â Â Â kmeans.cluster_centers_<span class="hljs-section">[:,Â 1]</span>,Â 
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-attr">s</span>=<span class="hljs-number">200</span>,Â c=<span class="hljs-string">'yellow'</span>,Â marker=<span class="hljs-string">'*'</span>,Â 
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-attr">label</span>=<span class="hljs-string">'èšç±»ä¸­å¿ƒ'</span>,Â edgecolors=<span class="hljs-string">'black'</span>)

plt.xlabel('ç‰¹å¾1')
plt.ylabel('ç‰¹å¾2')
plt.title('K-meansèšç±»ç»“æœ')
plt.legend()
plt.show()
</code></pre>
<p><strong>K-meansç®—æ³•æµç¨‹</strong>ï¼š</p>
<pre><code class="hljs">åˆå§‹åŒ–ï¼šéšæœºé€‰æ‹©Kä¸ªä¸­å¿ƒç‚¹
Â Â Â Â â†“
å¾ªç¯ç›´åˆ°æ”¶æ•›ï¼š
Â Â Â Â â†“
åˆ†é…é˜¶æ®µï¼šå°†æ¯ä¸ªç‚¹åˆ†é…åˆ°æœ€è¿‘çš„ä¸­å¿ƒç‚¹
Â Â Â Â â†“
æ›´æ–°é˜¶æ®µï¼šé‡æ–°è®¡ç®—æ¯ä¸ªç°‡çš„ä¸­å¿ƒç‚¹
Â Â Â Â â†“
åˆ¤æ–­æ˜¯å¦æ”¶æ•›ï¼ˆä¸­å¿ƒç‚¹ä¸å†å˜åŒ–æˆ–è¾¾åˆ°æœ€å¤§è¿­ä»£æ¬¡æ•°ï¼‰
Â Â Â Â â†“
è¾“å‡ºï¼šKä¸ªç°‡åŠå…¶ä¸­å¿ƒç‚¹
</code></pre>
<h3 data-id="heading-10">2. ä¸»æˆåˆ†åˆ†æï¼ˆPCAï¼‰ï¼šæ•°æ®é™ç»´ç¥å™¨</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span>Â numpyÂ <span class="hljs-keyword">as</span>Â np
<span class="hljs-keyword">import</span>Â matplotlib.pyplotÂ <span class="hljs-keyword">as</span>Â plt
<span class="hljs-keyword">from</span>Â sklearn.decompositionÂ <span class="hljs-keyword">import</span>Â PCA
<span class="hljs-keyword">from</span>Â sklearn.datasetsÂ <span class="hljs-keyword">import</span>Â load_digits
<span class="hljs-keyword">from</span>Â sklearn.preprocessingÂ <span class="hljs-keyword">import</span>Â StandardScaler

<span class="hljs-comment">#Â åŠ è½½æ‰‹å†™æ•°å­—æ•°æ®é›†</span>
digitsÂ =Â load_digits()
XÂ =Â digits.data
yÂ =Â digits.target

<span class="hljs-built_in">print</span>(<span class="hljs-string">f"åŸå§‹æ•°æ®ç»´åº¦:Â <span class="hljs-subst">{X.shape}</span>"</span>)

<span class="hljs-comment">#Â æ•°æ®æ ‡å‡†åŒ–</span>
scalerÂ =Â StandardScaler()
X_scaledÂ =Â scaler.fit_transform(X)

<span class="hljs-comment">#Â è®¡ç®—ä¸»æˆåˆ†</span>
pcaÂ =Â PCA()
X_pcaÂ =Â pca.fit_transform(X_scaled)

<span class="hljs-comment">#Â å¯è§†åŒ–ç´¯è®¡æ–¹å·®è§£é‡Šç‡</span>
plt.figure(figsize=(<span class="hljs-number">10</span>,Â <span class="hljs-number">8</span>))
cumulative_varianceÂ =Â np.cumsum(pca.explained_variance_ratio_)

plt.subplot(<span class="hljs-number">2</span>,Â <span class="hljs-number">2</span>,Â <span class="hljs-number">1</span>)
plt.bar(<span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,Â <span class="hljs-number">11</span>),Â pca.explained_variance_ratio_[:<span class="hljs-number">10</span>])
plt.xlabel(<span class="hljs-string">'ä¸»æˆåˆ†'</span>)
plt.ylabel(<span class="hljs-string">'æ–¹å·®è§£é‡Šç‡'</span>)
plt.title(<span class="hljs-string">'å‰10ä¸ªä¸»æˆåˆ†çš„æ–¹å·®è§£é‡Šç‡'</span>)

plt.subplot(<span class="hljs-number">2</span>,Â <span class="hljs-number">2</span>,Â <span class="hljs-number">2</span>)
plt.plot(<span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,Â <span class="hljs-built_in">len</span>(cumulative_variance)Â +Â <span class="hljs-number">1</span>),Â cumulative_variance,Â <span class="hljs-string">'b-'</span>)
plt.xlabel(<span class="hljs-string">'ä¸»æˆåˆ†æ•°é‡'</span>)
plt.ylabel(<span class="hljs-string">'ç´¯è®¡æ–¹å·®è§£é‡Šç‡'</span>)
plt.axhline(y=<span class="hljs-number">0.95</span>,Â color=<span class="hljs-string">'r'</span>,Â linestyle=<span class="hljs-string">'--'</span>,Â label=<span class="hljs-string">'95%æ–¹å·®'</span>)
plt.legend()
plt.title(<span class="hljs-string">'ç´¯è®¡æ–¹å·®è§£é‡Šç‡'</span>)

<span class="hljs-comment">#Â ä½¿ç”¨å‰ä¸¤ä¸ªä¸»æˆåˆ†å¯è§†åŒ–æ•°æ®</span>
plt.subplot(<span class="hljs-number">2</span>,Â <span class="hljs-number">2</span>,Â <span class="hljs-number">3</span>)
scatterÂ =Â plt.scatter(X_pca[:,Â <span class="hljs-number">0</span>],Â X_pca[:,Â <span class="hljs-number">1</span>],Â c=y,Â cmap=<span class="hljs-string">'tab10'</span>,Â alpha=<span class="hljs-number">0.6</span>)
plt.xlabel(<span class="hljs-string">'ç¬¬ä¸€ä¸»æˆåˆ†'</span>)
plt.ylabel(<span class="hljs-string">'ç¬¬äºŒä¸»æˆåˆ†'</span>)
plt.title(<span class="hljs-string">'PCAé™ç»´å¯è§†åŒ–Â (2D)'</span>)
plt.colorbar(scatter,Â label=<span class="hljs-string">'æ•°å­—æ ‡ç­¾'</span>)

<span class="hljs-comment">#Â ä½¿ç”¨å‰ä¸‰ä¸ªä¸»æˆåˆ†å¯è§†åŒ–ï¼ˆ3Dï¼‰</span>
<span class="hljs-keyword">from</span>Â mpl_toolkits.mplot3dÂ <span class="hljs-keyword">import</span>Â Axes3D
axÂ =Â plt.subplot(<span class="hljs-number">2</span>,Â <span class="hljs-number">2</span>,Â <span class="hljs-number">4</span>,Â projection=<span class="hljs-string">'3d'</span>)
scatterÂ =Â ax.scatter(X_pca[:,Â <span class="hljs-number">0</span>],Â X_pca[:,Â <span class="hljs-number">1</span>],Â X_pca[:,Â <span class="hljs-number">2</span>],Â c=y,Â cmap=<span class="hljs-string">'tab10'</span>,Â alpha=<span class="hljs-number">0.6</span>)
ax.set_xlabel(<span class="hljs-string">'PC1'</span>)
ax.set_ylabel(<span class="hljs-string">'PC2'</span>)
ax.set_zlabel(<span class="hljs-string">'PC3'</span>)
ax.set_title(<span class="hljs-string">'PCAé™ç»´å¯è§†åŒ–Â (3D)'</span>)

plt.tight_layout()
plt.show()

<span class="hljs-comment">#Â æŸ¥çœ‹é™ç»´åçš„æ•°æ®ä¿¡æ¯</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"ç¬¬ä¸€ä¸ªä¸»æˆåˆ†è§£é‡Šçš„æ–¹å·®æ¯”ä¾‹:Â <span class="hljs-subst">{pca.explained_variance_ratio_[<span class="hljs-number">0</span>]:<span class="hljs-number">.2</span>%}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"å‰ä¸¤ä¸ªä¸»æˆåˆ†ç´¯è®¡è§£é‡Šçš„æ–¹å·®æ¯”ä¾‹:Â <span class="hljs-subst">{cumulative_variance[<span class="hljs-number">1</span>]:<span class="hljs-number">.2</span>%}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"ä¿ç•™95%æ–¹å·®æ‰€éœ€çš„ä¸»æˆåˆ†æ•°é‡:Â <span class="hljs-subst">{np.argmax(cumulative_varianceÂ &gt;=Â <span class="hljs-number">0.95</span>)Â +Â <span class="hljs-number">1</span>}</span>"</span>)
</code></pre>
<h2 data-id="heading-11">å››ã€ç¥ç»ç½‘ç»œï¼šæ·±åº¦å­¦ä¹ çš„åŸºçŸ³</h2>
<h3 data-id="heading-12">å¤šå±‚æ„ŸçŸ¥æœºï¼ˆMLPï¼‰ï¼šåŸºç¡€ç¥ç»ç½‘ç»œ</h3>
<pre><code class="hljs language-ini" lang="ini">importÂ numpyÂ asÂ np
importÂ matplotlib.pyplotÂ asÂ plt
fromÂ sklearn.neural_networkÂ importÂ MLPClassifier
fromÂ sklearn.datasetsÂ importÂ make_classification
fromÂ sklearn.model_selectionÂ importÂ train_test_split
fromÂ sklearn.preprocessingÂ importÂ StandardScaler
fromÂ sklearn.metricsÂ importÂ accuracy_score,Â confusion_matrix
importÂ seabornÂ asÂ sns

<span class="hljs-comment">#Â åˆ›å»ºå¤æ‚æ•°æ®é›†</span>
X,Â <span class="hljs-attr">y</span>Â =Â make_classification(n_samples=<span class="hljs-number">1000</span>,Â n_features=<span class="hljs-number">20</span>,Â n_informative=<span class="hljs-number">15</span>,
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-attr">n_redundant</span>=<span class="hljs-number">2</span>,Â n_classes=<span class="hljs-number">3</span>,Â random_state=<span class="hljs-number">42</span>)

<span class="hljs-comment">#Â æ•°æ®æ ‡å‡†åŒ–</span>
<span class="hljs-attr">scaler</span>Â =Â StandardScaler()
<span class="hljs-attr">X_scaled</span>Â =Â scaler.fit_transform(X)

<span class="hljs-comment">#Â åˆ’åˆ†æ•°æ®é›†</span>
X_train,Â X_test,Â y_train,Â <span class="hljs-attr">y_test</span>Â =Â train_test_split(X_scaled,Â y,Â test_size=<span class="hljs-number">0.3</span>,Â random_state=<span class="hljs-number">42</span>)

<span class="hljs-comment">#Â åˆ›å»ºMLPæ¨¡å‹</span>
<span class="hljs-attr">mlp</span>Â =Â MLPClassifier(hidden_layer_sizes=(<span class="hljs-number">100</span>,Â <span class="hljs-number">50</span>),Â Â <span class="hljs-comment">#Â ä¸¤ä¸ªéšè—å±‚ï¼Œåˆ†åˆ«æœ‰100å’Œ50ä¸ªç¥ç»å…ƒ</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-attr">activation</span>=<span class="hljs-string">'relu'</span>,Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â æ¿€æ´»å‡½æ•°</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-attr">solver</span>=<span class="hljs-string">'adam'</span>,Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â ä¼˜åŒ–ç®—æ³•</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-attr">alpha</span>=<span class="hljs-number">0.0001</span>,Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â L2æ­£åˆ™åŒ–å‚æ•°</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-attr">batch_size</span>=<span class="hljs-number">32</span>,Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â æ‰¹å¤§å°</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-attr">learning_rate_init</span>=<span class="hljs-number">0.001</span>,Â Â Â Â Â Â <span class="hljs-comment">#Â å­¦ä¹ ç‡</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-attr">max_iter</span>=<span class="hljs-number">500</span>,Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â æœ€å¤§è¿­ä»£æ¬¡æ•°</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-attr">random_state</span>=<span class="hljs-number">42</span>,
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-attr">verbose</span>=<span class="hljs-literal">False</span>)

<span class="hljs-comment">#Â è®­ç»ƒæ¨¡å‹</span>
mlp.fit(X_train,Â y_train)

<span class="hljs-comment">#Â é¢„æµ‹</span>
<span class="hljs-attr">y_pred</span>Â =Â mlp.predict(X_test)
<span class="hljs-attr">accuracy</span>Â =Â accuracy_score(y_test,Â y_pred)
print(f"MLPæµ‹è¯•é›†å‡†ç¡®ç‡:Â {accuracy:.2f}")

<span class="hljs-comment">#Â ç»˜åˆ¶è®­ç»ƒæŸå¤±æ›²çº¿</span>
plt.figure(<span class="hljs-attr">figsize</span>=(<span class="hljs-number">12</span>,Â <span class="hljs-number">5</span>))

plt.subplot(1,Â 2,Â 1)
plt.plot(mlp.loss_curve_)
plt.xlabel('è¿­ä»£æ¬¡æ•°')
plt.ylabel('æŸå¤±å€¼')
plt.title('è®­ç»ƒæŸå¤±æ›²çº¿')

<span class="hljs-comment">#Â ç»˜åˆ¶æ··æ·†çŸ©é˜µ</span>
plt.subplot(1,Â 2,Â 2)
<span class="hljs-attr">cm</span>Â =Â confusion_matrix(y_test,Â y_pred)
sns.heatmap(cm,Â <span class="hljs-attr">annot</span>=<span class="hljs-literal">True</span>,Â fmt=<span class="hljs-string">'d'</span>,Â cmap=<span class="hljs-string">'Blues'</span>)
plt.xlabel('é¢„æµ‹æ ‡ç­¾')
plt.ylabel('çœŸå®æ ‡ç­¾')
plt.title('æ··æ·†çŸ©é˜µ')

plt.tight_layout()
plt.show()

<span class="hljs-comment">#Â æŸ¥çœ‹æ¨¡å‹ç»“æ„ä¿¡æ¯</span>
print(f"æ¨¡å‹å±‚æ•°:Â {mlp.n_layers_}")
print(f"æ¨¡å‹å‚æ•°æ•°é‡:Â {mlp.coefs_<span class="hljs-section">[0]</span>.shape<span class="hljs-section">[0]</span>Â *Â mlp.coefs_<span class="hljs-section">[0]</span>.shape<span class="hljs-section">[1]</span>Â +Â mlp.coefs_<span class="hljs-section">[1]</span>.shape<span class="hljs-section">[0]</span>Â *Â mlp.coefs_<span class="hljs-section">[1]</span>.shape<span class="hljs-section">[1]</span>}")
</code></pre>
<h2 data-id="heading-13">äº”ã€ç®—æ³•é€‰æ‹©æŒ‡å—ï¼šå¦‚ä½•ä¸ºä½ çš„é—®é¢˜é€‰æ‹©åˆé€‚ç®—æ³•</h2>
<h3 data-id="heading-14">ç®—æ³•é€‰æ‹©æµç¨‹å›¾</h3>
<pre><code class="hljs language-ruby" lang="ruby">æ˜¯

å¦

è¿ç»­å€¼

ç±»åˆ«

å‘ç°ç»“æ„

é™ç»´

æ˜¯

å¦

æ˜¯

å¦

å°é‡æ•°æ®

å¤§é‡æ•°æ®

æ˜¯

å¦

æ˜¯

å¦

å¼€å§‹é€‰æ‹©ç®—æ³•æ˜¯å¦æœ‰æ ‡ç­¾æ•°æ®<span class="hljs-string">?é¢„</span>æµ‹è¿ç»­å€¼è¿˜æ˜¯ç±»åˆ«<span class="hljs-string">?ç›®</span>æ ‡æ˜¯å‘ç°ç»“æ„è¿˜æ˜¯é™ç»´<span class="hljs-string">?å›</span>å½’ç®—æ³•åˆ†ç±»ç®—æ³•èšç±»ç®—æ³•é™ç»´ç®—æ³•æ•°æ®çº¿æ€§<span class="hljs-string">?çº¿</span>æ€§å›å½’å¤šé¡¹å¼å›å½’æˆ–æ ‘æ¨¡å‹éœ€è¦å¯è§£é‡Šæ€§<span class="hljs-string">?å†³</span>ç­–æ ‘/éšæœºæ£®æ—æ•°æ®é‡å¤§å°<span class="hljs-string">?æ”¯</span>æŒå‘é‡æœºç¥ç»ç½‘ç»œå·²çŸ¥ç°‡æ•°é‡<span class="hljs-string">?K</span>-meansèšç±»å±‚æ¬¡èšç±»æˆ–<span class="hljs-variable constant_">DBSCAN</span>éœ€è¦å¯è§†åŒ–<span class="hljs-string">?t</span>-<span class="hljs-variable constant_">SNE</span>ä¸»æˆåˆ†åˆ†æ
</code></pre>
<h3 data-id="heading-15">å„ç®—æ³•å…³é”®ç‰¹ç‚¹æ€»ç»“è¡¨</h3>




































































<table><thead><tr><th>ç®—æ³•</th><th>ç±»å‹</th><th>ä¸»è¦ä¼˜åŠ¿</th><th>é€‚ç”¨åœºæ™¯</th><th>æ³¨æ„äº‹é¡¹</th></tr></thead><tbody><tr><td><strong>çº¿æ€§å›å½’</strong></td><td>ç›‘ç£/å›å½’</td><td>ç®€å•ã€å¯è§£é‡Šæ€§å¼º</td><td>é¢„æµ‹è¿ç»­å€¼ï¼Œç‰¹å¾ä¸ç›®æ ‡å‘ˆçº¿æ€§å…³ç³»</td><td>å¯¹å¼‚å¸¸å€¼æ•æ„Ÿï¼Œå‡è®¾çº¿æ€§å…³ç³»</td></tr><tr><td><strong>é€»è¾‘å›å½’</strong></td><td>ç›‘ç£/åˆ†ç±»</td><td>æ¦‚ç‡è¾“å‡ºï¼Œå¯è§£é‡Šæ€§å¥½</td><td>äºŒåˆ†ç±»é—®é¢˜ï¼Œéœ€è¦æ¦‚ç‡ä¼°è®¡</td><td>åªèƒ½å¤„ç†çº¿æ€§å¯åˆ†é—®é¢˜ï¼ˆæ ¸æŠ€å·§å¯æ‰©å±•ï¼‰</td></tr><tr><td><strong>å†³ç­–æ ‘</strong></td><td>ç›‘ç£/åˆ†ç±»</td><td>ç›´è§‚æ˜“æ‡‚ï¼Œæ— éœ€ç‰¹å¾ç¼©æ”¾</td><td>åˆ†ç±»å’Œå›å½’ï¼Œéœ€è¦å¯è§£é‡Šæ€§</td><td>å®¹æ˜“è¿‡æ‹Ÿåˆï¼Œéœ€è¦å‰ªæ</td></tr><tr><td><strong>éšæœºæ£®æ—</strong></td><td>ç›‘ç£/åˆ†ç±»</td><td>é«˜å‡†ç¡®æ€§ï¼ŒæŠ—è¿‡æ‹Ÿåˆ</td><td>å¤æ‚åˆ†ç±»/å›å½’é—®é¢˜</td><td>è®¡ç®—æˆæœ¬è¾ƒé«˜ï¼Œå¯è§£é‡Šæ€§è¾ƒå·®</td></tr><tr><td><strong>SVM</strong></td><td>ç›‘ç£/åˆ†ç±»</td><td>é«˜ç»´ç©ºé—´æœ‰æ•ˆï¼Œæ³›åŒ–èƒ½åŠ›å¼º</td><td>å°æ ·æœ¬ã€éçº¿æ€§é—®é¢˜</td><td>å¤§è§„æ¨¡æ•°æ®æ•ˆç‡ä½ï¼Œå‚æ•°è°ƒä¼˜é‡è¦</td></tr><tr><td><strong>K-means</strong></td><td>æ— ç›‘ç£/èšç±»</td><td>ç®€å•é«˜æ•ˆï¼Œå¯æ‰©å±•æ€§å¥½</td><td>å®¢æˆ·åˆ†ç¾¤ï¼Œå›¾åƒåˆ†å‰²</td><td>éœ€è¦æŒ‡å®šKå€¼ï¼Œå¯¹å¼‚å¸¸å€¼æ•æ„Ÿ</td></tr><tr><td><strong>PCA</strong></td><td>æ— ç›‘ç£/é™ç»´</td><td>å»é™¤ç›¸å…³æ€§ï¼Œé™ä½ç»´åº¦</td><td>æ•°æ®å¯è§†åŒ–ï¼Œç‰¹å¾æå–</td><td>çº¿æ€§æ–¹æ³•ï¼Œå¯èƒ½ä¸¢å¤±éçº¿æ€§ç»“æ„</td></tr><tr><td><strong>ç¥ç»ç½‘ç»œ</strong></td><td>ç›‘ç£/åˆ†ç±»å›å½’</td><td>å¼ºå¤§æ‹Ÿåˆèƒ½åŠ›ï¼Œç‰¹å¾è‡ªåŠ¨å­¦ä¹ </td><td>å›¾åƒã€è¯­éŸ³ã€è‡ªç„¶è¯­è¨€å¤„ç†</td><td>éœ€è¦å¤§é‡æ•°æ®ï¼Œè°ƒå‚å¤æ‚</td></tr></tbody></table>
<h2 data-id="heading-16">å…­ã€å®æˆ˜æ¡ˆä¾‹ï¼šç»¼åˆåº”ç”¨ç¤ºä¾‹</h2>
<h3 data-id="heading-17">ç”µå•†ç”¨æˆ·åˆ†ç¾¤ä¸è´­ä¹°é¢„æµ‹ç³»ç»Ÿ</h3>
<pre><code class="hljs language-ini" lang="ini">importÂ pandasÂ asÂ pd
importÂ numpyÂ asÂ np
fromÂ sklearn.preprocessingÂ importÂ StandardScaler
fromÂ sklearn.clusterÂ importÂ KMeans
fromÂ sklearn.ensembleÂ importÂ RandomForestClassifier
fromÂ sklearn.model_selectionÂ importÂ train_test_split,Â GridSearchCV
fromÂ sklearn.metricsÂ importÂ classification_report,Â confusion_matrix
importÂ matplotlib.pyplotÂ asÂ plt
importÂ seabornÂ asÂ sns

<span class="hljs-comment">#Â ç”Ÿæˆæ¨¡æ‹Ÿç”µå•†æ•°æ®</span>
np.random.seed(42)
<span class="hljs-attr">n_samples</span>Â =Â <span class="hljs-number">1000</span>

<span class="hljs-comment">#Â ç”¨æˆ·ç‰¹å¾ï¼šå¹´é¾„ã€æ”¶å…¥ã€ç½‘ç«™è®¿é—®é¢‘ç‡ã€å¹³å‡ä¼šè¯æ—¶é•¿ã€è´­ä¹°æ¬¡æ•°</span>
<span class="hljs-attr">data</span>Â =Â {
Â Â Â Â 'å¹´é¾„':Â np.random.randint(18,Â 70,Â n_samples),
Â Â Â Â 'æœˆæ”¶å…¥':Â np.random.randint(2000,Â 20000,Â n_samples),
Â Â Â Â 'è®¿é—®é¢‘ç‡':Â np.random.poisson(5,Â n_samples),
Â Â Â Â 'ä¼šè¯æ—¶é•¿':Â np.random.exponential(10,Â n_samples),
Â Â Â Â 'è´­ä¹°æ¬¡æ•°':Â np.random.poisson(3,Â n_samples),
Â Â Â Â 'å¹³å‡è®¢å•é‡‘é¢':Â np.random.uniform(20,Â 500,Â n_samples),
Â Â Â Â 'æœ€åè´­ä¹°è·ä»Šå¤©æ•°':Â np.random.randint(1,Â 180,Â n_samples)
}

<span class="hljs-attr">df</span>Â =Â pd.DataFrame(data)

<span class="hljs-comment">#Â åˆ›å»ºç›®æ ‡å˜é‡ï¼šæ˜¯å¦ä¼šå†æ¬¡è´­ä¹°ï¼ˆ0/1ï¼‰</span>
df<span class="hljs-section">['æ˜¯å¦å†è´­']</span>Â =Â np.where((df<span class="hljs-section">['æœ€åè´­ä¹°è·ä»Šå¤©æ•°']</span>Â &lt;Â 30)Â &amp;Â 
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â (df<span class="hljs-section">['è´­ä¹°æ¬¡æ•°']</span>Â &gt;Â 2)Â &amp;Â 
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â (df<span class="hljs-section">['å¹³å‡è®¢å•é‡‘é¢']</span>Â &gt;Â 100),Â 1,Â 0)

print("æ•°æ®æ¦‚è§ˆ:")
print(df.head())
print(f"\næ•°æ®å½¢çŠ¶:Â {df.shape}")
print(f"\nç›®æ ‡å˜é‡åˆ†å¸ƒ:\n{df<span class="hljs-section">['æ˜¯å¦å†è´­']</span>.value_counts()}")

<span class="hljs-comment">#Â 1.Â ç”¨æˆ·åˆ†ç¾¤ï¼ˆæ— ç›‘ç£å­¦ä¹ ï¼‰</span>
<span class="hljs-attr">cluster_features</span>Â =Â [<span class="hljs-string">'å¹´é¾„'</span>,Â <span class="hljs-string">'æœˆæ”¶å…¥'</span>,Â <span class="hljs-string">'è®¿é—®é¢‘ç‡'</span>,Â <span class="hljs-string">'ä¼šè¯æ—¶é•¿'</span>,Â <span class="hljs-string">'è´­ä¹°æ¬¡æ•°'</span>,Â <span class="hljs-string">'å¹³å‡è®¢å•é‡‘é¢'</span>]
<span class="hljs-attr">X_cluster</span>Â =Â df[cluster_features]

<span class="hljs-comment">#Â æ ‡å‡†åŒ–</span>
<span class="hljs-attr">scaler</span>Â =Â StandardScaler()
<span class="hljs-attr">X_cluster_scaled</span>Â =Â scaler.fit_transform(X_cluster)

<span class="hljs-comment">#Â ä½¿ç”¨K-meansåˆ†ç¾¤</span>
<span class="hljs-attr">kmeans</span>Â =Â KMeans(n_clusters=<span class="hljs-number">4</span>,Â random_state=<span class="hljs-number">42</span>,Â n_init=<span class="hljs-number">10</span>)
df<span class="hljs-section">['ç”¨æˆ·åˆ†ç¾¤']</span>Â =Â kmeans.fit_predict(X_cluster_scaled)

<span class="hljs-comment">#Â 2.Â è´­ä¹°é¢„æµ‹ï¼ˆç›‘ç£å­¦ä¹ ï¼‰</span>
<span class="hljs-attr">predict_features</span>Â =Â [<span class="hljs-string">'å¹´é¾„'</span>,Â <span class="hljs-string">'æœˆæ”¶å…¥'</span>,Â <span class="hljs-string">'è®¿é—®é¢‘ç‡'</span>,Â <span class="hljs-string">'ä¼šè¯æ—¶é•¿'</span>,Â 
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-string">'è´­ä¹°æ¬¡æ•°'</span>,Â <span class="hljs-string">'å¹³å‡è®¢å•é‡‘é¢'</span>,Â <span class="hljs-string">'æœ€åè´­ä¹°è·ä»Šå¤©æ•°'</span>,Â <span class="hljs-string">'ç”¨æˆ·åˆ†ç¾¤'</span>]
<span class="hljs-attr">X_predict</span>Â =Â df[predict_features]
<span class="hljs-attr">y_predict</span>Â =Â df[<span class="hljs-string">'æ˜¯å¦å†è´­'</span>]

<span class="hljs-comment">#Â åˆ’åˆ†æ•°æ®é›†</span>
X_train,Â X_test,Â y_train,Â <span class="hljs-attr">y_test</span>Â =Â train_test_split(
Â Â Â Â X_predict,Â y_predict,Â <span class="hljs-attr">test_size</span>=<span class="hljs-number">0.3</span>,Â random_state=<span class="hljs-number">42</span>
)

<span class="hljs-comment">#Â ä½¿ç”¨éšæœºæ£®æ—è¿›è¡Œé¢„æµ‹</span>
<span class="hljs-attr">rf_clf</span>Â =Â RandomForestClassifier(n_estimators=<span class="hljs-number">100</span>,Â random_state=<span class="hljs-number">42</span>)

<span class="hljs-comment">#Â å‚æ•°ç½‘æ ¼æœç´¢</span>
<span class="hljs-attr">param_grid</span>Â =Â {
Â Â Â Â 'max_depth':Â <span class="hljs-section">[5,Â 10,Â 15]</span>,
Â Â Â Â 'min_samples_split':Â <span class="hljs-section">[2,Â 5,Â 10]</span>,
Â Â Â Â 'min_samples_leaf':Â <span class="hljs-section">[1,Â 2,Â 4]</span>
}

<span class="hljs-attr">grid_search</span>Â =Â GridSearchCV(rf_clf,Â param_grid,Â cv=<span class="hljs-number">5</span>,Â scoring=<span class="hljs-string">'accuracy'</span>,Â n_jobs=-<span class="hljs-number">1</span>)
grid_search.fit(X_train,Â y_train)

<span class="hljs-comment">#Â æœ€ä½³æ¨¡å‹</span>
<span class="hljs-attr">best_rf</span>Â =Â grid_search.best_estimator_

<span class="hljs-comment">#Â é¢„æµ‹</span>
<span class="hljs-attr">y_pred</span>Â =Â best_rf.predict(X_test)

print(f"\næœ€ä½³å‚æ•°:Â {grid_search.best_params_}")
print(f"æœ€ä½³äº¤å‰éªŒè¯å‡†ç¡®ç‡:Â {grid_search.best_score_:.2f}")
print(f"æµ‹è¯•é›†å‡†ç¡®ç‡:Â {best_rf.score(X_test,Â y_test):.2f}")

print("\nåˆ†ç±»æŠ¥å‘Š:")
print(classification_report(y_test,Â y_pred))

<span class="hljs-comment">#Â å¯è§†åŒ–ç»“æœ</span>
fig,Â <span class="hljs-attr">axes</span>Â =Â plt.subplots(<span class="hljs-number">2</span>,Â <span class="hljs-number">3</span>,Â figsize=(<span class="hljs-number">15</span>,Â <span class="hljs-number">10</span>))

<span class="hljs-comment">#Â ç”¨æˆ·åˆ†ç¾¤å¯è§†åŒ–</span>
forÂ iÂ inÂ range(4):
Â Â Â Â <span class="hljs-attr">cluster_data</span>Â =Â df[df[<span class="hljs-string">'ç”¨æˆ·åˆ†ç¾¤'</span>]Â ==Â i]
Â Â Â Â axes<span class="hljs-section">[0,Â 0]</span>.scatter(cluster_data<span class="hljs-section">['æœˆæ”¶å…¥']</span>,Â cluster_data<span class="hljs-section">['å¹³å‡è®¢å•é‡‘é¢']</span>,Â 
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-attr">label</span>=f<span class="hljs-string">'åˆ†ç¾¤{i}'</span>,Â alpha=<span class="hljs-number">0.6</span>)
axes<span class="hljs-section">[0,Â 0]</span>.set_xlabel('æœˆæ”¶å…¥')
axes<span class="hljs-section">[0,Â 0]</span>.set_ylabel('å¹³å‡è®¢å•é‡‘é¢')
axes<span class="hljs-section">[0,Â 0]</span>.set_title('ç”¨æˆ·åˆ†ç¾¤å¯è§†åŒ–')
axes<span class="hljs-section">[0,Â 0]</span>.legend()

<span class="hljs-comment">#Â ç‰¹å¾é‡è¦æ€§</span>
<span class="hljs-attr">feature_importance</span>Â =Â pd.DataFrame({
Â Â Â Â 'ç‰¹å¾':Â predict_features,
Â Â Â Â 'é‡è¦æ€§':Â best_rf.feature_importances_
}).sort_values('é‡è¦æ€§',Â <span class="hljs-attr">ascending</span>=<span class="hljs-literal">False</span>)

axes<span class="hljs-section">[0,Â 1]</span>.barh(feature_importance<span class="hljs-section">['ç‰¹å¾']</span>,Â feature_importance<span class="hljs-section">['é‡è¦æ€§']</span>)
axes<span class="hljs-section">[0,Â 1]</span>.set_xlabel('é‡è¦æ€§')
axes<span class="hljs-section">[0,Â 1]</span>.set_title('ç‰¹å¾é‡è¦æ€§æ’åº')

<span class="hljs-comment">#Â æ··æ·†çŸ©é˜µ</span>
<span class="hljs-attr">cm</span>Â =Â confusion_matrix(y_test,Â y_pred)
sns.heatmap(cm,Â <span class="hljs-attr">annot</span>=<span class="hljs-literal">True</span>,Â fmt=<span class="hljs-string">'d'</span>,Â cmap=<span class="hljs-string">'Blues'</span>,Â ax=axes[<span class="hljs-number">0</span>,Â <span class="hljs-number">2</span>])
axes<span class="hljs-section">[0,Â 2]</span>.set_xlabel('é¢„æµ‹æ ‡ç­¾')
axes<span class="hljs-section">[0,Â 2]</span>.set_ylabel('çœŸå®æ ‡ç­¾')
axes<span class="hljs-section">[0,Â 2]</span>.set_title('æ··æ·†çŸ©é˜µ')

<span class="hljs-comment">#Â å„åˆ†ç¾¤è´­ä¹°ç‡</span>
<span class="hljs-attr">cluster_purchase_rate</span>Â =Â df.groupby(<span class="hljs-string">'ç”¨æˆ·åˆ†ç¾¤'</span>)[<span class="hljs-string">'æ˜¯å¦å†è´­'</span>].mean()
axes<span class="hljs-section">[1,Â 0]</span>.bar(cluster_purchase_rate.index,Â cluster_purchase_rate.values)
axes<span class="hljs-section">[1,Â 0]</span>.set_xlabel('ç”¨æˆ·åˆ†ç¾¤')
axes<span class="hljs-section">[1,Â 0]</span>.set_ylabel('å†è´­ç‡')
axes<span class="hljs-section">[1,Â 0]</span>.set_title('å„ç”¨æˆ·åˆ†ç¾¤çš„å†è´­ç‡')

<span class="hljs-comment">#Â ROCæ›²çº¿</span>
fromÂ sklearn.metricsÂ importÂ roc_curve,Â auc
<span class="hljs-attr">y_pred_proba</span>Â =Â best_rf.predict_proba(X_test)[:,Â <span class="hljs-number">1</span>]
fpr,Â tpr,Â <span class="hljs-attr">thresholds</span>Â =Â roc_curve(y_test,Â y_pred_proba)
<span class="hljs-attr">roc_auc</span>Â =Â auc(fpr,Â tpr)

axes<span class="hljs-section">[1,Â 1]</span>.plot(fpr,Â tpr,Â <span class="hljs-attr">color</span>=<span class="hljs-string">'darkorange'</span>,Â lw=<span class="hljs-number">2</span>,Â 
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-attr">label</span>=f<span class="hljs-string">'ROCæ›²çº¿Â (AUCÂ =Â {roc_auc:.2f})'</span>)
axes<span class="hljs-section">[1,Â 1]</span>.plot(<span class="hljs-section">[0,Â 1]</span>,Â <span class="hljs-section">[0,Â 1]</span>,Â <span class="hljs-attr">color</span>=<span class="hljs-string">'navy'</span>,Â lw=<span class="hljs-number">2</span>,Â linestyle=<span class="hljs-string">'--'</span>)
axes<span class="hljs-section">[1,Â 1]</span>.set_xlabel('å‡æ­£ç‡')
axes<span class="hljs-section">[1,Â 1]</span>.set_ylabel('çœŸæ­£ç‡')
axes<span class="hljs-section">[1,Â 1]</span>.set_title('ROCæ›²çº¿')
axes<span class="hljs-section">[1,Â 1]</span>.legend()

<span class="hljs-comment">#Â å­¦ä¹ æ›²çº¿</span>
fromÂ sklearn.model_selectionÂ importÂ learning_curve
train_sizes,Â train_scores,Â <span class="hljs-attr">test_scores</span>Â =Â learning_curve(
Â Â Â Â best_rf,Â X_predict,Â y_predict,Â <span class="hljs-attr">cv</span>=<span class="hljs-number">5</span>,Â n_jobs=-<span class="hljs-number">1</span>,
Â Â Â Â <span class="hljs-attr">train_sizes</span>=np.linspace(<span class="hljs-number">0.1</span>,Â <span class="hljs-number">1.0</span>,Â <span class="hljs-number">10</span>)
)

<span class="hljs-attr">train_scores_mean</span>Â =Â np.mean(train_scores,Â axis=<span class="hljs-number">1</span>)
<span class="hljs-attr">test_scores_mean</span>Â =Â np.mean(test_scores,Â axis=<span class="hljs-number">1</span>)

axes<span class="hljs-section">[1,Â 2]</span>.plot(train_sizes,Â train_scores_mean,Â 'o-',Â <span class="hljs-attr">color</span>=<span class="hljs-string">'r'</span>,Â label=<span class="hljs-string">'è®­ç»ƒå¾—åˆ†'</span>)
axes<span class="hljs-section">[1,Â 2]</span>.plot(train_sizes,Â test_scores_mean,Â 'o-',Â <span class="hljs-attr">color</span>=<span class="hljs-string">'g'</span>,Â label=<span class="hljs-string">'äº¤å‰éªŒè¯å¾—åˆ†'</span>)
axes<span class="hljs-section">[1,Â 2]</span>.set_xlabel('è®­ç»ƒæ ·æœ¬æ•°')
axes<span class="hljs-section">[1,Â 2]</span>.set_ylabel('å‡†ç¡®ç‡')
axes<span class="hljs-section">[1,Â 2]</span>.set_title('å­¦ä¹ æ›²çº¿')
axes<span class="hljs-section">[1,Â 2]</span>.legend()

plt.tight_layout()
plt.show()

<span class="hljs-comment">#Â è¾“å‡ºä¸šåŠ¡æ´å¯Ÿ</span>
print("\<span class="hljs-attr">n</span>===Â ä¸šåŠ¡æ´å¯ŸÂ ===<span class="hljs-string">")
print("</span><span class="hljs-number">1</span>.Â ç”¨æˆ·åˆ†ç¾¤ç‰¹å¾:<span class="hljs-string">")
forÂ iÂ inÂ range(4):
Â Â Â Â cluster_statsÂ =Â df[df['ç”¨æˆ·åˆ†ç¾¤']Â ==Â i].describe().loc[['mean']]
Â Â Â Â print(f"</span>\nåˆ†ç¾¤Â {i}Â (å…±{len(df[df[<span class="hljs-string">'ç”¨æˆ·åˆ†ç¾¤'</span>]Â ==Â i])}äºº):<span class="hljs-string">")
Â Â Â Â print(f"</span>Â Â å¹³å‡å¹´é¾„:Â {cluster_stats[<span class="hljs-string">'å¹´é¾„'</span>].values[<span class="hljs-number">0</span>]:.<span class="hljs-number">1</span>f}å²<span class="hljs-string">")
Â Â Â Â print(f"</span>Â Â å¹³å‡æœˆæ”¶å…¥:Â {cluster_stats[<span class="hljs-string">'æœˆæ”¶å…¥'</span>].values[<span class="hljs-number">0</span>]:.<span class="hljs-number">0</span>f}å…ƒ<span class="hljs-string">")
Â Â Â Â print(f"</span>Â Â å¹³å‡è´­ä¹°æ¬¡æ•°:Â {cluster_stats[<span class="hljs-string">'è´­ä¹°æ¬¡æ•°'</span>].values[<span class="hljs-number">0</span>]:.<span class="hljs-number">1</span>f}æ¬¡<span class="hljs-string">")
Â Â Â Â print(f"</span>Â Â å†è´­ç‡:Â {cluster_purchase_rate[i]:.<span class="hljs-number">1</span>%}<span class="hljs-string">")

print("</span>\n2.Â å…³é”®å‘ç°:<span class="hljs-string">")
print(f"</span>Â Â æœ€é‡è¦çš„é¢„æµ‹ç‰¹å¾:Â {feature_importance.iloc[<span class="hljs-number">0</span>][<span class="hljs-string">'ç‰¹å¾'</span>]}<span class="hljs-string">")
print(f"</span>Â Â é«˜ä»·å€¼ç”¨æˆ·è¯†åˆ«:Â åˆ†ç¾¤{cluster_purchase_rate.idxmax()}å…·æœ‰æœ€é«˜çš„å†è´­ç‡<span class="hljs-string">")
print(f"</span>Â Â è¥é”€å»ºè®®:Â é’ˆå¯¹åˆ†ç¾¤{cluster_purchase_rate.idxmin()}åˆ¶å®šå¤è´­æ¿€åŠ±ç­–ç•¥<span class="hljs-string">")
</span></code></pre>
<h2 data-id="heading-18">ä¸ƒã€ç®—æ³•æ€§èƒ½ä¼˜åŒ–æŠ€å·§</h2>
<h3 data-id="heading-19">1. æ•°æ®é¢„å¤„ç†æœ€ä½³å®è·µ</h3>
<pre><code class="hljs language-ini" lang="ini">fromÂ sklearn.pipelineÂ importÂ Pipeline
fromÂ sklearn.imputeÂ importÂ SimpleImputer
fromÂ sklearn.preprocessingÂ importÂ StandardScaler,Â OneHotEncoder
fromÂ sklearn.composeÂ importÂ ColumnTransformer
fromÂ sklearn.ensembleÂ importÂ RandomForestClassifier

<span class="hljs-comment">#Â åˆ›å»ºå®Œæ•´çš„æ•°æ®é¢„å¤„ç†å’Œå»ºæ¨¡ç®¡é“</span>
<span class="hljs-attr">numeric_features</span>Â =Â [<span class="hljs-string">'å¹´é¾„'</span>,Â <span class="hljs-string">'æ”¶å…¥'</span>,Â <span class="hljs-string">'æ¶ˆè´¹é‡‘é¢'</span>]
<span class="hljs-attr">categorical_features</span>Â =Â [<span class="hljs-string">'æ€§åˆ«'</span>,Â <span class="hljs-string">'åŸå¸‚'</span>,Â <span class="hljs-string">'ä¼šå‘˜ç­‰çº§'</span>]

<span class="hljs-comment">#Â æ•°å€¼å‹ç‰¹å¾å¤„ç†</span>
<span class="hljs-attr">numeric_transformer</span>Â =Â Pipeline(steps=[
Â Â Â Â (<span class="hljs-string">'imputer'</span>,Â SimpleImputer(strategy=<span class="hljs-string">'median'</span>)),Â Â <span class="hljs-comment">#Â ç¼ºå¤±å€¼å¤„ç†</span>
Â Â Â Â (<span class="hljs-string">'scaler'</span>,Â StandardScaler())Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â æ ‡å‡†åŒ–</span>
])

<span class="hljs-comment">#Â ç±»åˆ«å‹ç‰¹å¾å¤„ç†</span>
<span class="hljs-attr">categorical_transformer</span>Â =Â Pipeline(steps=[
Â Â Â Â (<span class="hljs-string">'imputer'</span>,Â SimpleImputer(strategy=<span class="hljs-string">'most_frequent'</span>)),Â Â <span class="hljs-comment">#Â ç¼ºå¤±å€¼å¤„ç†</span>
Â Â Â Â (<span class="hljs-string">'onehot'</span>,Â <span class="hljs-literal">On</span>eHotEncoder(handle_unknown=<span class="hljs-string">'ignore'</span>))Â Â Â Â Â <span class="hljs-comment">#Â ç‹¬çƒ­ç¼–ç </span>
])

<span class="hljs-comment">#Â åˆå¹¶é¢„å¤„ç†æ­¥éª¤</span>
<span class="hljs-attr">preprocessor</span>Â =Â ColumnTransformer(
Â Â Â Â <span class="hljs-attr">transformers</span>=[
Â Â Â Â Â Â Â Â (<span class="hljs-string">'num'</span>,Â numeric_transformer,Â numeric_features),
Â Â Â Â Â Â Â Â (<span class="hljs-string">'cat'</span>,Â categorical_transformer,Â categorical_features)
Â Â Â Â ])

<span class="hljs-comment">#Â åˆ›å»ºå®Œæ•´ç®¡é“</span>
<span class="hljs-attr">full_pipeline</span>Â =Â Pipeline(steps=[
Â Â Â Â (<span class="hljs-string">'preprocessor'</span>,Â preprocessor),
Â Â Â Â (<span class="hljs-string">'classifier'</span>,Â RandomForestClassifier(random_state=<span class="hljs-number">42</span>))
])

<span class="hljs-comment">#Â ä½¿ç”¨ç®¡é“è¿›è¡Œè®­ç»ƒå’Œé¢„æµ‹ï¼ˆä»£ç ç®€æ´ä¸”ä¸æ˜“å‡ºé”™ï¼‰</span>
<span class="hljs-comment">#Â full_pipeline.fit(X_train,Â y_train)</span>
<span class="hljs-comment">#Â y_predÂ =Â full_pipeline.predict(X_test)</span>
</code></pre>
<h3 data-id="heading-20">2. è¶…å‚æ•°è°ƒä¼˜æ–¹æ³•</h3>
<pre><code class="hljs language-ini" lang="ini">fromÂ sklearn.model_selectionÂ importÂ RandomizedSearchCV
fromÂ scipy.statsÂ importÂ randint,Â uniform

<span class="hljs-comment">#Â å®šä¹‰å‚æ•°åˆ†å¸ƒ</span>
<span class="hljs-attr">param_dist</span>Â =Â {
Â Â Â Â 'n_estimators':Â randint(100,Â 500),
Â Â Â Â 'max_depth':Â <span class="hljs-section">[5,Â 10,Â 15,Â 20,Â None]</span>,
Â Â Â Â 'min_samples_split':Â randint(2,Â 20),
Â Â Â Â 'min_samples_leaf':Â randint(1,Â 10),
Â Â Â Â 'max_features':Â <span class="hljs-section">['sqrt',Â 'log2',Â None]</span>
}

<span class="hljs-comment">#Â éšæœºæœç´¢</span>
<span class="hljs-attr">random_search</span>Â =Â RandomizedSearchCV(
Â Â Â Â RandomForestClassifier(<span class="hljs-attr">random_state</span>=<span class="hljs-number">42</span>),
Â Â Â Â <span class="hljs-attr">param_distributions</span>=param_dist,
Â Â Â Â <span class="hljs-attr">n_iter</span>=<span class="hljs-number">50</span>,Â Â <span class="hljs-comment">#Â éšæœºå°è¯•çš„å‚æ•°ç»„åˆæ•°</span>
Â Â Â Â <span class="hljs-attr">cv</span>=<span class="hljs-number">5</span>,
Â Â Â Â <span class="hljs-attr">scoring</span>=<span class="hljs-string">'accuracy'</span>,
Â Â Â Â <span class="hljs-attr">random_state</span>=<span class="hljs-number">42</span>,
Â Â Â Â <span class="hljs-attr">n_jobs</span>=-<span class="hljs-number">1</span>
)

<span class="hljs-comment">#Â random_search.fit(X_train,Â y_train)</span>
<span class="hljs-comment">#Â print(f"æœ€ä½³å‚æ•°:Â {random_search.best_params_}")</span>
<span class="hljs-comment">#Â print(f"æœ€ä½³å¾—åˆ†:Â {random_search.best_score_:.2f}")</span>
</code></pre>
<h2 data-id="heading-21">ç»“è¯­ï¼šæœºå™¨å­¦ä¹ çš„å‘å±•ä¸æœªæ¥</h2>
<p>é€šè¿‡æœ¬æ–‡çš„è¯¦ç»†è®²è§£ï¼Œæˆ‘ä»¬å·²ç»ç³»ç»Ÿäº†è§£äº†æœºå™¨å­¦ä¹ çš„ä¸»è¦ç®—æ³•åŠå…¶åº”ç”¨ã€‚ä»åŸºç¡€çš„çº¿æ€§å›å½’åˆ°å¤æ‚çš„ç¥ç»ç½‘ç»œï¼Œä»ç›‘ç£å­¦ä¹ åˆ°æ— ç›‘ç£å­¦ä¹ ï¼Œæ¯ç§ç®—æ³•éƒ½æœ‰å…¶ç‹¬ç‰¹çš„ä¼˜åŠ¿å’Œé€‚ç”¨åœºæ™¯ã€‚</p>
<p>æœºå™¨å­¦ä¹ çš„æœªæ¥å‘å±•è¶‹åŠ¿åŒ…æ‹¬ï¼š</p>
<ol>
<li>1.Â <strong>è‡ªåŠ¨åŒ–æœºå™¨å­¦ä¹ ï¼ˆAutoMLï¼‰</strong> ï¼šè®©ç®—æ³•é€‰æ‹©ã€ç‰¹å¾å·¥ç¨‹ã€è¶…å‚æ•°è°ƒä¼˜ç­‰è¿‡ç¨‹è‡ªåŠ¨åŒ–</li>
<li>2.Â <strong>å¯è§£é‡Šæ€§AI</strong>ï¼šæé«˜å¤æ‚æ¨¡å‹çš„å¯è§£é‡Šæ€§ï¼Œå»ºç«‹ç”¨æˆ·ä¿¡ä»»</li>
<li>3.Â <strong>è”é‚¦å­¦ä¹ </strong>ï¼šåœ¨ä¿æŠ¤æ•°æ®éšç§çš„å‰æä¸‹è¿›è¡Œåˆ†å¸ƒå¼æ¨¡å‹è®­ç»ƒ</li>
<li>4.Â <strong>å¼ºåŒ–å­¦ä¹ åº”ç”¨æ‰©å±•</strong>ï¼šä»æ¸¸æˆé¢†åŸŸæ‰©å±•åˆ°æ›´å¤šå®é™…åº”ç”¨åœºæ™¯</li>
</ol>
<p>æ— è®ºä½ æ˜¯åˆšåˆšå…¥é—¨çš„æ–°æ‰‹ï¼Œè¿˜æ˜¯æœ‰ä¸€å®šç»éªŒçš„æ•°æ®ç§‘å­¦å®¶ï¼ŒæŒæ¡è¿™äº›æ ¸å¿ƒç®—æ³•éƒ½æ˜¯æ„å»ºæœºå™¨å­¦ä¹ è§£å†³æ–¹æ¡ˆçš„åŸºç¡€ã€‚å»ºè®®è¯»è€…åœ¨å­¦ä¹ ç†è®ºçš„åŒæ—¶ï¼Œå¤šåŠ¨æ‰‹å®è·µï¼Œé€šè¿‡é¡¹ç›®å®æˆ˜åŠ æ·±ç†è§£ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸ªäººå¼€å‘è€…ç³»åˆ—-ä¸Šçº¿å³â€œçˆ†ç«â€ï¼Ÿé‚£äº›æç©ºä½  Cloudflare é¢åº¦çš„è™šå‡ç¹è£]]></title>    <link>https://juejin.cn/post/7593337928307703834</link>    <guid>https://juejin.cn/post/7593337928307703834</guid>    <pubDate>2026-01-10T13:31:32.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7593337928307703834" data-draft-id="7593310044478898185" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸ªäººå¼€å‘è€…ç³»åˆ—-ä¸Šçº¿å³â€œçˆ†ç«â€ï¼Ÿé‚£äº›æç©ºä½  Cloudflare é¢åº¦çš„è™šå‡ç¹è£"/> <meta itemprop="keywords" content="å‰ç«¯,Nuxt.js"/> <meta itemprop="datePublished" content="2026-01-10T13:31:32.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="vueTmp"/> <meta itemprop="url" content="https://juejin.cn/user/254742426814798"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸ªäººå¼€å‘è€…ç³»åˆ—-ä¸Šçº¿å³â€œçˆ†ç«â€ï¼Ÿé‚£äº›æç©ºä½  Cloudflare é¢åº¦çš„è™šå‡ç¹è£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/254742426814798/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    vueTmp
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-10T13:31:32.000Z" title="Sat Jan 10 2026 13:31:32 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    5
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æœ¬ç³»åˆ—ä¸“ä¸ºä¸ªäººå¼€å‘è€…æ‰“é€ ï¼Œæ ¸å¿ƒç†å¿µæ˜¯ä»¥æœ€å°æˆæœ¬å®ç°æœ€ä½³æ•ˆæœï¼Œä¸»è¦ä¾§é‡äºå…è´¹æˆ–ä½æˆæœ¬çš„è§£å†³æ–¹æ¡ˆã€‚æ—¨åœ¨ä¸ºæ—©æœŸç‹¬ç«‹å¼€å‘è€…æä¾›å®ç”¨å‚è€ƒï¼ŒåŠ©åŠ›å…¶åœ¨èµ„æºæœ‰é™çš„æƒ…å†µä¸‹å¼€å¯åˆ›ä¸šä¹‹æ—…ã€‚
ä¸‹é¢çš„å†…å®¹æ˜¯å¯¹2025å¹´10æœˆçš„å†…å®¹è®°å½•ï¼Œå¸Œæœ›æˆ‘è¶Ÿè¿‡çš„å‘ï¼Œä½ ä¸å†è¸©ã€‚</p>
</blockquote>
<h2 data-id="heading-0">01 æ„å¤–çš„â€œæƒŠå–œâ€ï¼šæˆ‘çš„æ’ä»¶ç½‘ç«™ç«äº†ï¼Ÿ</h2>
<p>æˆ‘æœ€è¿‘ç”¨ <strong>Nuxt v4</strong> å¼€å‘äº†ä¸€ä¸ªç½‘ç«™ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdevworld.top%2F" target="_blank" title="https://devworld.top/" ref="nofollow noopener noreferrer">VSCode Plugin Toolkit - Professional Plugin Offline Download</a>ï¼Œä¸»è¦æä¾› VS Code æ’ä»¶çš„æœç´¢å’Œä¸‹è½½ï¼Œå¹¶å°†å…¶éƒ¨ç½²åœ¨ <strong>Cloudflare Workers</strong> ä¸Šã€‚è¿™ä¸ªé€‰æ‹©å¾ˆç¬¦åˆæˆ‘ä»¬ä¸€ç›´è®¨è®ºçš„â€œä½æˆæœ¬å¯åŠ¨â€ç†å¿µâ€”â€”Cloudflare Workersæä¾›æ¯å¤©10ä¸‡æ¬¡è¯·æ±‚çš„å…è´¹é¢åº¦ï¼Œå¯¹äºæ—©æœŸé¡¹ç›®æ¥è¯´åº”è¯¥ç»°ç»°æœ‰ä½™ã€‚</p>
<blockquote>
<p>Cloudflare Workers å’Œ Pages Functions å…è´¹é¢åº¦ï¼š</p>
<ul>
<li>æ¯ä¸ªè¯·æ±‚æœ€å¤šå ç”¨ 10 æ¯«ç§’ CPU æ—¶é—´ï¼›</li>
<li>æ¯å¤©æœ€å¤š 100,000 (UTC+0)ã€‚</li>
</ul>
</blockquote>
<p>å°±åœ¨ç½‘ç«™ä¸Šçº¿ä¸ä¹…åï¼Œæˆ‘è¿ç»­æ”¶åˆ°äº†ä¸‰å°æ¥è‡ª Cloudflare çš„é‚®ä»¶ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5085bcfdc84749238aa9ab2921213257~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgdnVlVG1w:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768657274&amp;x-signature=pCBnkTHGzFBiyFiR2mA%2Bk8us%2BBw%3D" alt="é‚®ä»¶é¢„è­¦.png" loading="lazy"/></p>
<p>ç¬¬ä¸€çœ¼çœ‹åˆ°â€œæ‚¨çš„è´¦æˆ·å·²è¶…è¿‡æ¯æ—¥è¯·æ±‚é™åˆ¶â€æ—¶ï¼Œæˆ‘å†…å¿ƒçš„ç¬¬ä¸€ååº”ç«Ÿç„¶æ˜¯ï¼š <strong>â€œå¤©å‘ï¼Œéš¾é“æˆ‘è¿™ç½‘ç«™ä¸Šçº¿å³ç«ï¼Œæµé‡çˆ†äº†ï¼Ÿâ€</strong></p>
<p>3 ç§’è¿‡åæƒ³æƒ³ç½‘ç«™æ²¡åšä»»ä½• SEOï¼Œä¹Ÿæ²¡åšè¿‡æ¨å¹¿çš„æ–°ç«™èƒ½ç«ä¸ª Der ï¼Œè¿™ä¹ˆå¤§çš„è‡ªç„¶æµé‡ï¼Œè¿™æ˜¾ç„¶ä¸æ­£å¸¸ã€‚éš¾é“è¢«æŒ‚ç‰‡äº†ï¼Ÿæˆ‘æ‹‰è·¨ï¼ŒCloudflare ä¹Ÿä¸æ‹‰åº“å‘€ã€‚</p>
<h2 data-id="heading-1">2 æ¡ˆå‘ç°åœºï¼šè°åœ¨æç©ºæˆ‘çš„å…è´¹é¢åº¦ï¼Ÿ</h2>
<p>Cloudflare Workers å…è´¹ç‰ˆè™½ç„¶æ…·æ…¨ï¼Œä½†ä¹Ÿæœ‰ä¸¥æ ¼çš„é™åˆ¶ï¼š<strong>æ¯å¤© 10 ä¸‡æ¬¡è¯·æ±‚ (UTC+0)</strong> ã€‚å¦‚æœè¯·æ±‚è¢«é€ä¼ åˆ°åç«¯ Serverï¼Œæ¯ä¸€æ¬¡éƒ½ä¼šæ‰£å‡è¿™ä¸ªé¢åº¦ã€‚</p>
<p>æˆ‘èµ¶ç´§æ‰“å¼€æ—¥å¿—è¿›è¡Œæ’æŸ¥ï¼Œç»“æœè®©æˆ‘å¤§è·Œçœ¼é•œã€‚</p>
<h3 data-id="heading-2">ç½ªé­ç¥¸é¦–ä¸€ï¼šæ¶ˆå¤±çš„å ä½å›¾</h3>
<p>åœ¨å¼€å‘æ’ä»¶æœç´¢åŠŸèƒ½æ—¶ï¼Œæˆ‘è®¾è®¡äº†ä¸€ä¸ªé€»è¾‘ï¼šå›¾ç‰‡åŠ è½½ä¸­æˆ–æŸ¥è¯¢å¤±è´¥æ—¶æ˜¾ç¤ºä¸€å¼ é»˜è®¤å ä½å›¾ã€‚ç„¶è€Œï¼Œç”±äºç²—å¿ƒï¼Œæˆ‘å¿˜è®°å°†è¿™å¼ å›¾æ”¾åˆ° <code>public</code> é™æ€èµ„æºç›®å½•ä¸­äº†ï¼Œå¯¼è‡´è¯·æ±‚è·¯å¾„ä¸å­˜åœ¨ã€‚</p>
<p>æ›´ç³Ÿç³•çš„æ˜¯ï¼Œä½œä¸º Nuxt æ–°æ‰‹ï¼Œæˆ‘å½“æ—¶æ²¡æœ‰é…ç½® <code>error.vue</code> é¡µé¢ã€‚</p>
<p>åœ¨ Nuxt çš„æœºåˆ¶ä¸‹ï¼Œå¦‚æœä¸€ä¸ªé™æ€èµ„æºè¯·æ±‚ï¼ˆå¦‚ <code>.png</code>ï¼‰åœ¨é™æ€ç›®å½•æ‰¾ä¸åˆ°ï¼Œä¸”æ²¡æœ‰é”™è¯¯æ‹¦æˆªï¼Œè¿™ä¸ªè¯·æ±‚å°±ä¼š<strong>å›æºåˆ°æœåŠ¡å™¨ï¼ˆServerï¼‰</strong> ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2060f8685da3401d8bb765048baabf70~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgdnVlVG1w:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768657274&amp;x-signature=r13qOZhCO1OIVC2s%2FsV27bSPZ%2Bo%3D" alt="é»˜è®¤å›¾ç‰‡è¯·æ±‚.png" loading="lazy"/></p>
<p>ä»æ—¥å¿—ä¸­å¯ä»¥çœ‹åˆ°ï¼Œå¤§é‡çš„ 404 è¯·æ±‚æ¶Œå‘äº†é‚£ä¸ªå¹¶ä¸å­˜åœ¨çš„å›¾ç‰‡ã€‚ç”±äºæ²¡æœ‰ç¼“å­˜ï¼Œæ¯ä¸€æ¬¡ 404 éƒ½åœ¨å®æ‰“å®åœ°æ¶ˆè€—æˆ‘çš„ Workers é¢åº¦ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7fa48792e43d44fea19056131a4d1b37~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgdnVlVG1w:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768657274&amp;x-signature=gdVElLS0Ykqev31gJey2dtBGRSM%3D" alt="å›¾ç‰‡è¯·æ±‚è¯¦æƒ….png" loading="lazy"/></p>
<h3 data-id="heading-3">ç½ªé­ç¥¸é¦–äºŒï¼šå‹¤å¥‹çš„â€œä¸é€Ÿä¹‹å®¢â€</h3>
<p>é™¤äº†è‡ªå·±ç•™ä¸‹çš„å‘ï¼Œæˆ‘è¿˜å‘ç°äº†ä¸€äº›â€œä¸æ€€å¥½æ„â€çš„è®¿å®¢ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e26eafe4e0e1465799c3c368243474fe~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgdnVlVG1w:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768657274&amp;x-signature=KCmp74OGis4si367VDpnO3qed2g%3D" alt="å¼‚å¸¸è®¿é—®ä¿¡æ¯æˆªå›¾.png" loading="lazy"/></p>
<p>é€šè¿‡æ—¥å¿—åˆ†æï¼Œæˆ‘å‘ç°å¤§é‡é’ˆå¯¹ <code>.env</code>ã€<code>phpinfo.php</code>ã€<code>wp-admin</code> ç­‰è·¯å¾„çš„æ‰«æè¯·æ±‚ã€‚è¿™äº›å…¸å‹çš„æ¶æ„æ‰«æå’Œçˆ¬è™«è¡Œä¸ºï¼Œå› ä¸ºæˆ‘ç¼ºå°‘å…¨å±€é”™è¯¯æ‹¦æˆªï¼Œå¯¼è‡´æ‰€æœ‰çš„å¼‚å¸¸è¯·æ±‚å…¨éƒ¨èµ°åˆ°äº† Nuxt çš„æœåŠ¡å™¨ç«¯å¤„ç†é€»è¾‘é‡Œã€‚</p>
<p><strong>æ¼é£çš„çª—æˆ·ï¼ˆæ²¡å ä½å›¾ï¼‰+ æ•å¼€çš„å¤§é—¨ï¼ˆæ²¡é”™è¯¯é¡µé¢ï¼‰+ é—¨å¤–çš„è·¯äººï¼ˆæ‰«æå™¨ï¼‰</strong> ï¼Œæœ€ç»ˆå¯¼è‡´æˆ‘çš„ 10 ä¸‡æ¬¡é¢åº¦åœ¨çŸ­çŸ­å‡ ä¸ªå°æ—¶å†…è¢«å½»åº•æç©ºã€‚</p>
<h2 data-id="heading-4">03 æ­¢æŸæ–¹æ¡ˆï¼šæœ€å°æˆæœ¬çš„ä¿®å¤</h2>
<p>é’ˆå¯¹ä¸Šé¢ä¸¤ä¸ªåšäº†å¦‚ä¸‹ä¿®å¤ï¼š</p>
<ol>
<li><strong>è¡¥å…¨é™æ€èµ„æº</strong>ï¼šå°†ä¸¢å¤±çš„å ä½å›¾é‡æ–°æ”¾å› <code>public</code> æ–‡ä»¶å¤¹ã€‚è¿™æ · Cloudflare CDN ä¼šç›´æ¥æ‹¦æˆªå¹¶è¿”å›é™æ€èµ„æºï¼Œä¸å†æ¶ˆè€— Workers çš„ CPU è®¡ç®—é…é¢ã€‚</li>
<li><strong>å¢åŠ  <code>error.vue</code></strong>ï¼šè¿™æ˜¯æœ€å…³é”®çš„ä¸€æ­¥ã€‚åœ¨ Nuxt ä¸­å¢åŠ ä¸€ä¸ªç®€å•çš„è‡ªå®šä¹‰é”™è¯¯é¡µï¼Œç¡®ä¿æ‰€æœ‰éé¢„æœŸè·¯å¾„çš„è®¿é—®åœ¨å‰ç«¯å°±è¢«æ‹¦æˆªå¤„ç†ï¼Œè€Œä¸æ˜¯äº¤ç»™åç«¯é€»è¾‘å»æ¶ˆè€—èµ„æºã€‚</li>
</ol>
<h2 data-id="heading-5">04 å¤ç›˜ï¼šç»™ä¸ªäººå¼€å‘è€…çš„é¿å‘æŒ‡å—</h2>
<p>è¿™æ¬¡â€œè™šå‡ç¹è£â€è®©æˆ‘æ·±åˆ»æ„è¯†åˆ°ï¼Œåœ¨åˆ©ç”¨ Serverless äº‘æœåŠ¡äº«å—â€œé›¶æˆæœ¬â€éƒ¨ç½²çš„åŒæ—¶ï¼Œå¿…é¡»è¦æ³¨æ„èµ„æºçš„é˜²å¾¡æ€§ç®¡ç†ã€‚</p>
<ul>
<li><strong>ä¸è¦ä¿¡ä»»å¼€å‘ç¯å¢ƒçš„â€œä¸æ»‘â€</strong> ï¼šæœ¬åœ°å¼€å‘æ—¶ï¼Œç”±äºç½‘ç»œå»¶è¿Ÿä½ï¼Œå›¾ç‰‡ç¼ºå¤±å¯èƒ½åªæ˜¯ä¸€é—ªè€Œè¿‡ï¼Œå®¹æ˜“è¢«å¿½ç•¥ã€‚</li>
<li><strong>è·¯ç”±å…œåº•æ˜¯åˆšéœ€</strong>ï¼šæ— è®ºæ˜¯ Nuxt è¿˜æ˜¯å…¶ä»–æ¡†æ¶ï¼Œä¸Šçº¿å‰è¯·åŠ¡å¿…ç¡®è®¤æ˜¯å¦æœ‰å¤„ç† 404 å’Œ 500 é”™è¯¯çš„å…œåº•æ–¹æ¡ˆã€‚</li>
<li><strong>ç›‘æ§ä¼˜äºç›´è§‰</strong>ï¼šå½“çœ‹åˆ°æµé‡æš´æ¶¨æ—¶ï¼Œå…ˆåˆ«æ€¥ç€åº†ç¥ï¼Œå»åˆ†æä¸€ä¸‹æ—¥å¿—ã€‚</li>
</ul>
<p>ä¿®å¤è¿™äº›é—®é¢˜åï¼Œç½‘ç«™çš„è¯·æ±‚é‡è¿…é€Ÿå›å½’åˆ°äº†æ­£å¸¸æ°´å¹³ï¼ˆå‘¨æœ«ä½¿ç”¨çš„äººç›¸å¯¹è¾ƒå°‘ï¼‰ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d3b3b04467b24c4b99905464990b1c6e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgdnVlVG1w:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768657274&amp;x-signature=ROD46JdJnanvqWDYfErltRpwagc%3D" alt="ä¿®æ”¹åè®¿é—®æµé‡.png" loading="lazy"/></p>
<h3 data-id="heading-6">ç»“è¯­</h3>
<p>ç‹¬ç«‹å¼€å‘çš„è·¯ä¸Šï¼Œæˆ‘ä»¬ä¸ä»…è¦å­¦ä¼šæ„å»ºï¼Œæ›´è¦å­¦ä¼šå¦‚ä½•â€œé˜²å®ˆâ€ã€‚Cloudflare æ˜¯ä¸ªäººå¼€å‘è€…çš„ç¥å…µåˆ©å™¨ï¼Œä½†å¦‚æœä¸æ³¨æ„ç»†èŠ‚ï¼Œå®ƒä¹Ÿä¼šå› ä¸ºé¢åº¦è¶…é™è€Œå˜å¾—â€œé’é‡â€ã€‚</p>
<p><strong>å¦‚æœä½ ä¹Ÿæ­£åœ¨ä½¿ç”¨ Nuxt ï¼Œè®°å¾—æ£€æŸ¥ä¸€ä¸‹ä½ çš„ 404 é€»è¾‘ï¼</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[24.Axonæ¡†æ¶-äº‹ä»¶ï¼ˆäºŒï¼‰]]></title>    <link>https://juejin.cn/post/7593262196844167220</link>    <guid>https://juejin.cn/post/7593262196844167220</guid>    <pubDate>2026-01-10T10:38:35.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7593262196844167220" data-draft-id="7593262196844150836" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="24.Axonæ¡†æ¶-äº‹ä»¶ï¼ˆäºŒï¼‰"/> <meta itemprop="keywords" content="åç«¯,é¢†åŸŸé©±åŠ¨è®¾è®¡"/> <meta itemprop="datePublished" content="2026-01-10T10:38:35.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å­£é£1132"/> <meta itemprop="url" content="https://juejin.cn/user/2799777150149710"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            24.Axonæ¡†æ¶-äº‹ä»¶ï¼ˆäºŒï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2799777150149710/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å­£é£1132
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-10T10:38:35.000Z" title="Sat Jan 10 2026 10:38:35 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Axonæ¡†æ¶-äº‹ä»¶ï¼ˆäºŒï¼‰</h2>
<h3 data-id="heading-1">1.ä»€ä¹ˆæ˜¯äº‹ä»¶å¤„ç†å™¨</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f97c4d97b77647e68d631484793b364d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2j6aOOMTEzMg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768646315&amp;x-signature=W%2Bbhm9tLX40lPYOOmjUBXEpPJTY%3D" alt="1768035329540.png" loading="lazy"/></p>
<h3 data-id="heading-2">2.æ˜ç¡®æ¦‚å¿µ</h3>
<ul>
<li>EventProcessorï¼šäº‹ä»¶å¤„ç†å™¨</li>
<li>ProcessingGroupï¼šå¤„ç†ç»„</li>
<li>EventHandlerï¼šäº‹ä»¶å¤„ç†ç¨‹åº</li>
</ul>
<h3 data-id="heading-3">3.äº‹ä»¶å¤„ç†å™¨åˆ†å±‚ç»“æ„</h3>
<h4 data-id="heading-4">ä»‹ç»</h4>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6a93169fefe645be80df9ec924d0cbda~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2j6aOOMTEzMg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768646315&amp;x-signature=FbvcqnIEXoBPpiBs%2FLdi8Os06tE%3D" alt="1768035465950.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/38b8fcdedcf94db3a5430fe19b11b4e7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2j6aOOMTEzMg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768646315&amp;x-signature=%2BpvxQoPB4ydjQiQCTrR9apHZGk4%3D" alt="asdasdcccccCCCAawio.png" loading="lazy"/></p>
<ol>
<li>äº‹ä»¶å¤„ç†ç¨‹åºï¼ˆEventHandlerï¼‰ï¼šæ¥æ”¶äº‹ä»¶æ—¶éœ€æ‰§è¡Œçš„ä¸šåŠ¡é€»è¾‘</li>
<li>äº‹ä»¶å¤„ç†å™¨ï¼ˆEventProcessorï¼‰ï¼šåˆ™æ˜¯è´Ÿè´£å¤„ç†äº‹ä»¶å¤„ç†è¿‡ç¨‹ä¸­æŠ€æœ¯å±‚é¢å·¥ä½œçš„ç»„ä»¶ã€‚å®ƒä¼šå¯åŠ¨ä¸€ä¸ªå·¥ä½œå•å…ƒï¼Œå¯èƒ½è¿˜ä¼šå¼€å¯äº‹åŠ¡ï¼›æ­¤å¤–ï¼Œå®ƒè¿˜éœ€ç¡®ä¿äº‹ä»¶å¤„ç†æœŸé—´åˆ›å»ºçš„æ‰€æœ‰æ¶ˆæ¯èƒ½æ­£ç¡®é™„åŠ å…³è”æ•°æ®ï¼ŒåŒæ—¶æ»¡è¶³å…¶ä»–éåŠŸèƒ½éœ€æ±‚ï¼ˆå¦‚æ€§èƒ½ã€å®¹é”™ç­‰ï¼‰</li>
<li>å¤„ç†ç»„ï¼ˆProcessing Groupï¼‰ï¼šæ¯ä¸ªEventHandlerä»…å±äºä¸€ä¸ªå¤„ç†ç»„ã€‚å¤„ç†ç»„ä¸ºäº‹ä»¶å¤„ç†æä¾›äº†å¯é…ç½®çš„éåŠŸèƒ½éœ€æ±‚èƒ½åŠ›ï¼Œä¾‹å¦‚é”™è¯¯å¤„ç†ã€æ’åºç­–ç•¥ç­‰</li>
</ol>
<h4 data-id="heading-5">ä¸ºEventHandleråˆ†é…ProcessingGroup</h4>
<h5 data-id="heading-6">ä»‹ç»</h5>
<p>æ‰€æœ‰EventProcessoréƒ½æœ‰ä¸€ä¸ªåç§°ï¼Œè¯¥åç§°åœ¨å¤šä¸ªJVMå®ä¾‹é—´å”¯ä¸€æ ‡è¯†ä¸€ä¸ªEventProcessorå®ä¾‹ï¼Œä¸¤ä¸ªåç§°ç›¸åŒçš„EventProcessorä¼šè¢«è§†ä¸ºåŒä¸€EventProcessorçš„ä¸åŒå®ä¾‹</p>
<p>æ‰€æœ‰EventHandleré»˜è®¤ä¼šé™„åŠ åˆ°åç§°ä¸ºå…¶ç±»æ‰€åœ¨åŒ…åçš„äº‹ä»¶å¤„ç†å™¨ä¸Šã€‚æ­¤å¤–ï¼ŒAxoné»˜è®¤ä½¿ç”¨çš„EventProcessorå®ç°æ˜¯TrackingEventProcessorï¼ˆè·Ÿè¸ªå¼äº‹ä»¶å¤„ç†å™¨ï¼‰</p>
<p>EventHandlerå¤§è‡´åˆ†ä¸ºä¸¤ç±»ï¼šå¸¸è§„EventHandlerï¼ŒSagaçš„EventHandlerï¼Œè¿™é‡Œä»‹ç»å¸¸è§„EventHandlerçš„æµç¨‹</p>
<h5 data-id="heading-7">ä¸¤ç§åˆ†é…æ–¹å¼</h5>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/10f99302d5484653bbc891ab1223a402~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2j6aOOMTEzMg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768646315&amp;x-signature=YZ7lnFSSTdHvUFfpnk5rNOqHSRc%3D" alt="1768036737757.png" loading="lazy"/></p>
<h4 data-id="heading-8">æ›´ç²¾ç»†çš„åˆ†é…æ–¹å¼</h4>
<h5 data-id="heading-9">ä»‹ç»</h5>
<p>Axonçš„é…ç½®APIå…è®¸è‡ªå®šä¹‰çš„æ›´ç²¾ç»†çš„åˆ†é…æ–¹å¼ï¼Œè¿™äº›è§„åˆ™å¯åˆ†ä¸ºä¸¤å¤§ç±»ï¼š</p>
<ul>
<li>EventHandler â†’ ProcessingGroup</li>
<li>ProcessingGroup â†’ EventProcessor</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7eab752c085a48e2838eeb29e26020ef~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2j6aOOMTEzMg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768646315&amp;x-signature=HWsHCCfagMgogrWMOEiJ%2BC8HpfI%3D" alt="1768037088706.png" loading="lazy"/></p>
<h5 data-id="heading-10">äº‹ä»¶å¤„ç†ç¨‹åºåˆ°å¤„ç†ç»„</h5>
<ol>
<li>byDefaultAssignTo(String)ï¼šå®šä¹‰EventHandlerçš„é»˜è®¤ProcessingGroupåç§°ã€‚ä»…åœ¨æ— æ›´å…·ä½“è§„åˆ™ä¸”æœªæ ‡æ³¨@ProcessingGroupæ³¨è§£æ—¶ç”Ÿæ•ˆ</li>
<li>byDefaultAssignHandlerInstancesTo(Function&lt;Object, String&gt;)ï¼šé€šè¿‡Lambdaè¡¨è¾¾å¼ä¸ºEventHandlerå®ä¾‹åˆ†é…ProcessingGroupï¼ˆè¿”å›ProcessingGroupåç§°ï¼‰ã€‚ä»…åœ¨æ— æ›´å…·ä½“è§„åˆ™ä¸”æœªæ ‡æ³¨@ProcessingGroupæ³¨è§£æ—¶ç”Ÿæ•ˆ</li>
<li>byDefaultAssignHandlerTypesTo(Function&lt;Class&lt;?&gt;, String&gt;)ï¼šé€šè¿‡Lambdaè¡¨è¾¾å¼ä¸ºEventHandlerç±»å‹åˆ†é…ProcessingGroupï¼ˆè¿”å›ProcessingGroupåç§°ï¼‰ã€‚ä»…åœ¨æ— æ›´å…·ä½“è§„åˆ™ä¸”æœªæ ‡æ³¨@ProcessingGroupæ³¨è§£æ—¶ç”Ÿæ•ˆ</li>
<li>assignHandlerInstancesMatching(String, Predicate&lt;Object&gt;)ï¼šæ ¹æ®EventHandlerå®ä¾‹æ˜¯å¦åŒ¹é…Predicateæ¡ä»¶ï¼Œå°†å…¶åˆ†é…åˆ°æŒ‡å®šProcessingGroupã€‚é»˜è®¤ä¼˜å…ˆçº§ä¸º0ï¼›è‹¥ä¸€ä¸ªå®ä¾‹åŒ¹é…å¤šä¸ªæ¡ä»¶ï¼Œç»“æœæœªå®šä¹‰</li>
<li>assignHandlerTypesMatching(String, Predicate&lt;Class&lt;?&gt;&gt;)ï¼šæ ¹æ®EventHandlerç±»å‹æ˜¯å¦åŒ¹é…Predicateæ¡ä»¶ï¼Œå°†å…¶åˆ†é…åˆ°æŒ‡å®šProcessingGroupã€‚é»˜è®¤ä¼˜å…ˆçº§ä¸º0ï¼›è‹¥ä¸€ä¸ªç±»å‹åŒ¹é…å¤šä¸ªæ¡ä»¶ï¼Œç»“æœæœªå®šä¹‰</li>
<li>assignHandlerInstancesMatching(String, int, Predicate&lt;Object&gt;)ï¼šåŠŸèƒ½ä¸ç¬¬4ç‚¹ç±»ä¼¼ï¼Œä½†å¯è‡ªå®šä¹‰ä¼˜å…ˆçº§ï¼ˆæ•°å€¼è¶Šé«˜ï¼Œè§„åˆ™ä¼˜å…ˆçº§è¶Šé«˜ï¼‰</li>
<li>assignHandlerTypesMatching(String, int, Predicate&lt;Class&lt;?&gt;&gt;)ï¼šåŠŸèƒ½ä¸ç¬¬5ç‚¹ç±»ä¼¼ï¼Œä½†å¯è‡ªå®šä¹‰ä¼˜å…ˆçº§ï¼ˆæ•°å€¼è¶Šé«˜ï¼Œè§„åˆ™ä¼˜å…ˆçº§è¶Šé«˜ï¼‰</li>
</ol>
<h5 data-id="heading-11">å¤„ç†ç»„åˆ°äº‹ä»¶å¤„ç†å™¨</h5>
<ol>
<li>assignProcessingGroup(String, String)ï¼šå°†æŒ‡å®šåç§°çš„ProcessingGroupï¼Œåˆ†é…ç»™æŒ‡å®šåç§°çš„EventProcessor</li>
<li>assignProcessingGroup(Function&lt;String, String&gt;)ï¼šé€šè¿‡Lambdaè¡¨è¾¾å¼ä¸ºProcessingGroupåˆ†é…EventProcessorï¼ˆè¾“å…¥ProcessingGroupï¼Œåç§°ï¼Œè¿”å›EventProcessoråç§°ï¼‰</li>
</ol>
<h4 data-id="heading-12">EventProcessorå†…éƒ¨çš„EventHandleré¡ºåºé—®é¢˜</h4>
<h5 data-id="heading-13">ä»‹ç»</h5>
<p>é»˜è®¤é¡ºåºå°±æ˜¯å®ƒä»¬åœ¨é…ç½®APIä¸­çš„æ³¨å†Œé¡ºåºä¸€è‡´</p>
<h5 data-id="heading-14">Springç¯å¢ƒä¸‹çš„æ˜¾å¼æ’åº</h5>
<p>è‹¥ä½¿ç”¨Springè¿›è¡Œä¾èµ–æ³¨å…¥ï¼Œå¯é€šè¿‡@Orderæ³¨è§£æ˜¾å¼æŒ‡å®šäº‹ä»¶å¤„ç†ç¨‹åºçš„æ’åºã€‚è¯¥æ³¨è§£æ ‡æ³¨åœ¨äº‹ä»¶å¤„ç†ç¨‹åºç±»ä¸Šï¼Œé€šè¿‡æ•´æ•°å‚æ•°æŒ‡å®šä¼˜å…ˆçº§ï¼ˆæ•°å€¼è¶Šå°ï¼Œä¼˜å…ˆçº§è¶Šé«˜ï¼‰</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@ProcessingGroup("my-handlers")</span>
<span class="hljs-meta">@Order(1)</span> <span class="hljs-comment">// ä¼˜å…ˆçº§é«˜äº @Order(2) çš„ç»„ä»¶</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HighPriorityHandler</span> {
    <span class="hljs-meta">@EventHandler</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">on</span><span class="hljs-params">(ImportantEvent event)</span> {
        <span class="hljs-comment">// é«˜ä¼˜å…ˆçº§é€»è¾‘</span>
    }
}

<span class="hljs-meta">@ProcessingGroup("my-handlers")</span>
<span class="hljs-meta">@Order(2)</span> <span class="hljs-comment">// ä¼˜å…ˆçº§ä½äº @Order(1) çš„ç»„ä»¶</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LowPriorityHandler</span> {
    <span class="hljs-meta">@EventHandler</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">on</span><span class="hljs-params">(ImportantEvent event)</span> {
        <span class="hljs-comment">// ä½ä¼˜å…ˆçº§é€»è¾‘ï¼ˆåœ¨ HighPriorityHandler ä¹‹åæ‰§è¡Œï¼‰</span>
    }
}
</code></pre>
<h5 data-id="heading-15">æ³¨æ„äº‹é¡¹</h5>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cea64b880290460685e34a9ea28fd539~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2j6aOOMTEzMg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768646315&amp;x-signature=pQTQYkunTP4Buly4LrNFMICLbRs%3D" alt="1768038172709.png" loading="lazy"/></p>
<h3 data-id="heading-16">4.äº‹ä»¶é”™è¯¯å¤„ç†</h3>
<h4 data-id="heading-17">ä»‹ç»</h4>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fb91f194cb0947a1b75b4c4afb816cbd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2j6aOOMTEzMg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768646315&amp;x-signature=4z6rTKTmGZP%2BGC5F3zLN3B%2BveEE%3D" alt="1768038674466.png" loading="lazy"/></p>
<h4 data-id="heading-18">ProcessingGroupå±‚çº§ï¼ˆListenerInvocationErrorHandlerï¼‰</h4>
<h5 data-id="heading-19">ä»‹ç»</h5>
<p>ListenerInvocationErrorHandlerè´Ÿè´£å¤„ç†äº‹ä»¶å¤„ç†ç¨‹åºæ–¹æ³•æŠ›å‡ºçš„å¼‚å¸¸ã€‚é»˜è®¤å®ç°ä¸ºLoggingErrorHandlerï¼Œè®°å½•å¼‚å¸¸æ—¥å¿—åï¼Œç»§ç»­å¤„ç†ä¸‹ä¸€ä¸ªå¤„ç†ç¨‹åºæˆ–äº‹ä»¶</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/03aed535c87941c9815f9be50096cb35~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2j6aOOMTEzMg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768646315&amp;x-signature=7liyGYulCEY8icwem3pGVAhZcJA%3D" alt="1768038773748.png" loading="lazy"/></p>
<h5 data-id="heading-20">åŸç”ŸAPIé…ç½®</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AxonConfig</span> {
    <span class="hljs-comment">// çœç•¥å…¶ä»–é…ç½®æ–¹æ³•...</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">configureProcessingGroupErrorHandling</span><span class="hljs-params">(EventProcessingConfigurer processingConfigurer)</span> {
        <span class="hljs-comment">// 1. é…ç½®æ‰€æœ‰å¤„ç†ç»„çš„é»˜è®¤é”™è¯¯å¤„ç†å™¨</span>
        processingConfigurer
            .registerDefaultListenerInvocationErrorHandler(conf -&gt; {
                <span class="hljs-comment">// ç¤ºä¾‹ï¼šè¿”å›è‡ªå®šä¹‰ ListenerInvocationErrorHandler å®ä¾‹</span>
                <span class="hljs-keyword">return</span> (exception, event, eventHandler) -&gt; {
                    <span class="hljs-comment">// è‡ªå®šä¹‰é€»è¾‘ï¼šå¦‚é‡è¯•ã€å¿½ç•¥ã€æ­»ä¿¡é˜Ÿåˆ—æŠ•é€’ç­‰</span>
                    log.error(<span class="hljs-string">"EventHandler [{}] failed to process event [{}]"</span>, 
                              eventHandler.getClass().getSimpleName(), 
                              event.getPayloadType().getSimpleName(), 
                              exception);
                    <span class="hljs-comment">// è‹¥éœ€å‘ä¸Šä¼ æ’­å¼‚å¸¸ï¼Œç›´æ¥æŠ›å‡ºå³å¯</span>
                    <span class="hljs-comment">// throw new RuntimeException("Propagate error", exception);</span>
                };
            })
            <span class="hljs-comment">// 2. ä¸ºç‰¹å®šå¤„ç†ç»„é…ç½®ä¸“å±é”™è¯¯å¤„ç†å™¨</span>
            .registerListenerInvocationErrorHandler(<span class="hljs-string">"my-processing-group"</span>, conf -&gt; {
                <span class="hljs-comment">// ä¸º "my-processing-group" å¤„ç†ç»„é…ç½®è‡ªå®šä¹‰é”™è¯¯å¤„ç†å™¨</span>
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">CustomMyGroupErrorHandler</span>();
            });
    }
}
</code></pre>
<h5 data-id="heading-21">SpringBooté…ç½®</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AxonConfig</span> {
    <span class="hljs-comment">// çœç•¥å…¶ä»–é…ç½®æ–¹æ³•...</span>
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> ConfigurerModule <span class="hljs-title function_">processingGroupErrorHandlingConfigurerModule</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> configurer -&gt; configurer.eventProcessing(processingConfigurer -&gt;
            processingConfigurer
                <span class="hljs-comment">// é…ç½®é»˜è®¤é”™è¯¯å¤„ç†å™¨</span>
                .registerDefaultListenerInvocationErrorHandler(conf -&gt; {
                    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">LoggingErrorHandler</span>(); <span class="hljs-comment">// ä¹Ÿå¯ä½¿ç”¨è‡ªå®šä¹‰å®ç°</span>
                })
                <span class="hljs-comment">// ä¸ºç‰¹å®šå¤„ç†ç»„é…ç½®é”™è¯¯å¤„ç†å™¨</span>
                .registerListenerInvocationErrorHandler(
                        <span class="hljs-string">"my-processing-group"</span>,
                        conf -&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">CustomMyGroupErrorHandler</span>()
                )
        );
    }
}
</code></pre>
<h5 data-id="heading-22">è‡ªå®šä¹‰ListenerInvocationErrorHandler</h5>
<p>å®ç°ListenerInvocationErrorHandleræ¥å£å³å¯è‡ªå®šä¹‰é”™è¯¯å¤„ç†é€»è¾‘ï¼Œæ¥å£æä¾›ä»¥ä¸‹å‚æ•°ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">ListenerInvocationErrorHandler</span> {
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">onError</span><span class="hljs-params">(Exception exception,
                 EventMessage&lt;?&gt; event,
                 EventMessageHandler eventHandler)</span> <span class="hljs-keyword">throws</span> Exception;
}
</code></pre>
<ol>
<li>exceptionï¼šEventHandleræŠ›å‡ºçš„å¼‚å¸¸</li>
<li>eventï¼šå¾…å¤„ç†çš„äº‹ä»¶</li>
<li>eventHandlerï¼šæŠ›å‡ºå¼‚å¸¸çš„EventHandler</li>
</ol>
<p>å¯æ ¹æ®éœ€æ±‚é€‰æ‹©é‡è¯•å¿½ç•¥æˆ–å‘ä¸Šä¼ æ’­å¼‚å¸¸ï¼›è‹¥å‘ä¸Šä¼ æ’­ï¼Œå¼‚å¸¸ä¼šè¿›å…¥EventProcessor</p>
<h4 data-id="heading-23">EventProcessorå±‚çº§ï¼ˆErrorHandlerï¼‰</h4>
<h5 data-id="heading-24">ä»‹ç»</h5>
<p>EventHandleræ–¹æ³•å¤–æŠ›å‡ºçš„å¼‚å¸¸æˆ–ä»EventHandlerå±‚çº§ä¼ æ’­ä¸Šæ¥çš„å¼‚å¸¸ï¼Œç”±ErrorHandlerå¤„ç†ã€‚é»˜è®¤å®ç°ä¸ºPropagatingErrorHandlerï¼Œç›´æ¥é‡æ–°æŠ›å‡ºæ‰€æœ‰æ•è·çš„å¼‚å¸¸</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/141ac9b246fc49ab9de7501c72ff428f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2j6aOOMTEzMg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768646315&amp;x-signature=4%2BLLctG8gTHhsXRmLkB2oLp%2FRvA%3D" alt="1768038951834.png" loading="lazy"/></p>
<h5 data-id="heading-25">ä¸åŒäº‹ä»¶å¤„ç†å™¨ç±»å‹çš„å¼‚å¸¸ä¼ æ’­è¡Œä¸º</h5>
<ol>
<li>è®¢é˜…å¼äº‹ä»¶å¤„ç†å™¨ï¼ˆSubscribingEventProcessorï¼‰ï¼šå¼‚å¸¸ä¼šä¼ æ’­ç»™äº‹ä»¶å‘å¸ƒè€…</li>
<li>æµå¤„ç†å¼äº‹ä»¶å¤„ç†å™¨ï¼ˆStreamingEventProcessorï¼‰ï¼šè¿›å…¥é”™è¯¯æ¨¡å¼ï¼Œé‡è¯•å¤±è´¥åæš‚åœå¤„ç†</li>
</ol>
<h5 data-id="heading-26">åŸç”ŸAPIé…ç½®</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AxonConfig</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">configure</span><span class="hljs-params">(EventProcessingConfigurer configurer)</span> {
        configurer
            <span class="hljs-comment">// 1. é…ç½®æ‰€æœ‰äº‹ä»¶å¤„ç†å™¨çš„é»˜è®¤é”™è¯¯å¤„ç†å™¨</span>
            .registerDefaultErrorHandler(conf -&gt; {
                <span class="hljs-comment">// ç¤ºä¾‹ï¼šè‡ªå®šä¹‰ ErrorHandlerï¼Œæ”¯æŒé‡è¯•</span>
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RetryingErrorHandler</span>(
                        IntervalRetryScheduler.builder()
                                             .retryCount(<span class="hljs-number">3</span>)
                                             .interval(Duration.ofSeconds(<span class="hljs-number">1</span>))
                                             .build()
                );
            })
            <span class="hljs-comment">// 2. ä¸ºç‰¹å®šäº‹ä»¶å¤„ç†å™¨é…ç½®ä¸“å±é”™è¯¯å¤„ç†å™¨</span>
            .registerErrorHandler(<span class="hljs-string">"my-processor"</span>, conf -&gt; {
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">CustomProcessorErrorHandler</span>();
            });
    }
}
</code></pre>
<h5 data-id="heading-27">SpringBooté…ç½®</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AxonConfig</span> {
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> ConfigurerModule <span class="hljs-title function_">processorErrorHandlingConfigurerModule</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> configurer -&gt; configurer.eventProcessing(processing -&gt;
            processing
                <span class="hljs-comment">// é…ç½®å…¨å±€é»˜è®¤é”™è¯¯å¤„ç†å™¨</span>
                .registerDefaultErrorHandler(conf -&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">RetryingErrorHandler</span>())
                <span class="hljs-comment">// ä¸ºç‰¹å®šäº‹ä»¶å¤„ç†å™¨é…ç½®é”™è¯¯å¤„ç†å™¨</span>
                .registerErrorHandler(<span class="hljs-string">"my-processor"</span>, conf -&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">CustomProcessorErrorHandler</span>())
        );
    }
}
</code></pre>
<h5 data-id="heading-28">è‡ªå®šä¹‰ErrorHandler</h5>
<p>å®ç°ErrorHandleræ¥å£ï¼Œé€šè¿‡ErrorContextè·å–é”™è¯¯ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œè‡ªå®šä¹‰å¤„ç†é€»è¾‘ï¼ˆå¦‚å¿½ç•¥ã€é‡è¯•ã€æ­»ä¿¡é˜Ÿåˆ—æŠ•é€’ç­‰ï¼‰ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">ErrorHandler</span> {
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleError</span><span class="hljs-params">(ErrorContext errorContext)</span> <span class="hljs-keyword">throws</span> Exception;
}

<span class="hljs-comment">// ç¤ºä¾‹ï¼šè‡ªå®šä¹‰ ErrorHandler</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CustomErrorHandler</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">ErrorHandler</span> {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleError</span><span class="hljs-params">(ErrorContext errorContext)</span> <span class="hljs-keyword">throws</span> Exception {
        <span class="hljs-type">Exception</span> <span class="hljs-variable">cause</span> <span class="hljs-operator">=</span> errorContext.getCause();
        EventMessage&lt;?&gt; event = errorContext.getEvent();
        <span class="hljs-comment">// è‡ªå®šä¹‰é€»è¾‘ï¼šå¦‚åˆ¤æ–­å¼‚å¸¸ç±»å‹ï¼Œå†³å®šæ˜¯å¦æŠ•é€’åˆ°æ­»ä¿¡é˜Ÿåˆ—</span>
        <span class="hljs-keyword">if</span> (cause <span class="hljs-keyword">instanceof</span> NonTransientException) {
            <span class="hljs-comment">// éæš‚æ—¶æ€§å¼‚å¸¸ï¼šæŠ•é€’åˆ°æ­»ä¿¡é˜Ÿåˆ—</span>
            deadLetterQueue.send(event, cause);
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-comment">// æš‚æ—¶æ€§å¼‚å¸¸ï¼šé‡è¯•</span>
            <span class="hljs-keyword">throw</span> cause; <span class="hljs-comment">// å‘ä¸Šä¼ æ’­ï¼Œè§¦å‘é‡è¯•</span>
        }
    }
}
</code></pre>
<h4 data-id="heading-29">æ­»ä¿¡é˜Ÿåˆ—</h4>
<p>è¿™ä¸€éƒ¨åˆ†å†…å®¹ï¼Œè¿˜ä¸“é—¨æœ‰ä¸€ç« ï¼Œè¿™é‡Œç†è§£ä¸ºä¸€ä¸ªæŒç»­å¤±è´¥çš„äº‹ä»¶ä¼šäº§ç”Ÿä¸å¥½çš„å½±å“ï¼Œéœ€è¦æ­»ä¿¡é˜Ÿåˆ—æ¥å‚ä¸è§£å†³</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c017998568a04d0f8c2620f6025c0006~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2j6aOOMTEzMg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768646315&amp;x-signature=3O3wJXoK7hV5wRHyv5vx2hmekZE%3D" alt="1768039221811.png" loading="lazy"/></p>
<h3 data-id="heading-30">5.EventProcessoré€šç”¨é…ç½®</h3>
<h4 data-id="heading-31">ä»‹ç»</h4>
<p>é™¤äº†å¤„ç†EventHandleråˆ†é…å’Œé”™è¯¯å¤„ç†ï¼ŒEventProcessorè¿˜æ”¯æŒå…¶ä»–ç»„ä»¶çš„é…ç½®ã€‚è®¢é˜…å¼å’Œæµå¤„ç†å¼äº‹ä»¶å¤„ç†å™¨çš„ä¸“å±é…ç½®ä»¥åè¯´ï¼Œè¿™é‡Œæ˜¯é€šç”¨é…ç½®</p>
<h4 data-id="heading-32">EventProcessorBuilder</h4>
<h5 data-id="heading-33">ä»‹ç»</h5>
<p>EventProcessingConfigureræä¾›äº†å¤§é‡EventProcessorçš„å¯é…ç½®ç»„ä»¶ï¼Œä½†æœ‰æ—¶ç›´æ¥æä¾›æ„å»ºEventProcessorçš„å®Œæ•´é€»è¾‘ä¼šæ›´ä¾¿æ·ã€‚æ­¤æ—¶å¯é€šè¿‡EventProcessorBuilderè‡ªå®šä¹‰æ„å»ºé€»è¾‘</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/aa8b220ed1584fcaa59077a2f5360c02~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2j6aOOMTEzMg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768646315&amp;x-signature=ARt6Tgt8sFg0lVMjRistbMIBWPA%3D" alt="1768040215878.png" loading="lazy"/></p>
<h5 data-id="heading-34">é…ç½®æ–¹å¼</h5>
<p>EventProcessingConfigureræä¾›ä¸¤ç§é…ç½®EventProcessorBuilderçš„æ–¹æ³•ï¼š</p>
<ol>
<li>registerEventProcessorFactory(EventProcessorBuilder)ï¼šä¸ºæœªé…ç½®ä¸“å±æ„å»ºå™¨çš„EventProcessorï¼Œé…ç½®é»˜è®¤æ„å»ºå·¥å‚</li>
<li>registerEventProcessor(String, EventProcessorBuilder)ï¼šä¸ºæŒ‡å®šåç§°çš„EventProcessorï¼Œé…ç½®ä¸“å±æ„å»ºå™¨</li>
</ol>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AxonConfig</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">configureEventProcessorBuilder</span><span class="hljs-params">(EventProcessingConfigurer processingConfigurer)</span> {
        <span class="hljs-comment">// 1. é…ç½®é»˜è®¤æ„å»ºå™¨ï¼šæ‰€æœ‰æœªæŒ‡å®šä¸“å±æ„å»ºå™¨çš„å¤„ç†å™¨ä½¿ç”¨æ­¤é€»è¾‘</span>
        processingConfigurer.registerEventProcessorFactory((name, config, invoker) -&gt; {
            <span class="hljs-comment">// ç¤ºä¾‹ï¼šæ ¹æ®å¤„ç†å™¨åç§°ï¼Œé€‰æ‹©æ„å»º Subscribing æˆ– Tracking å¤„ç†å™¨</span>
            <span class="hljs-keyword">if</span> (name.startsWith(<span class="hljs-string">"subscribing-"</span>)) {
                <span class="hljs-keyword">return</span> SubscribingEventProcessor.builder()
                                                .name(name)
                                                .eventHandlerInvoker(invoker)
                                                .messageSource(config.eventBus())
                                                .build();
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">return</span> TrackingEventProcessor.builder()
                                             .name(name)
                                             .eventHandlerInvoker(invoker)
                                             .tokenStore(config.tokenStore())
                                             .build();
            }
        });

        <span class="hljs-comment">// 2. ä¸º "custom-processor" é…ç½®ä¸“å±æ„å»ºå™¨</span>
        processingConfigurer.registerEventProcessor(<span class="hljs-string">"custom-processor"</span>, 
            (name, config, invoker) -&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">CustomEventProcessor</span>(name, invoker, config.eventStore())
        );
    }
}
</code></pre>
<h4 data-id="heading-35">EventHandleræ‹¦æˆªå™¨</h4>
<h5 data-id="heading-36">ä»‹ç»</h5>
<p>EventProcessoræ˜¯EventHandlerçš„è°ƒç”¨è€…ï¼Œå› æ­¤ä¹Ÿæ˜¯é…ç½®EventHandleræ‹¦æˆªå™¨çš„åˆé€‚ä½ç½®ã€‚ç”±äºEventProcessorä¸“é—¨å¤„ç†äº‹ä»¶ï¼Œæ­¤å¤„çš„æ‹¦æˆªå™¨éœ€é’ˆå¯¹EventMessageï¼Œå³EventHandlerInterceptor</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6ab7c8a23fae4db79bd45f4da794d94b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2j6aOOMTEzMg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768646315&amp;x-signature=WQxW4iWPP7WhM5g6E7e4S2Et7L0%3D" alt="1768040791381.png" loading="lazy"/></p>
<h5 data-id="heading-37">é…ç½®æ–¹å¼</h5>
<p>EventProcessingConfigureræä¾›ä¸¤ç§é…ç½®æ‹¦æˆªå™¨çš„æ–¹æ³•ï¼š</p>
<ol>
<li>registerDefaultHandlerInterceptor(BiFunction&lt;Configuration, String, MessageHandlerInterceptor&lt;? super EventMessage&lt;?&gt;&gt;&gt;)ï¼šä¸ºæ‰€æœ‰EventProcessoré…ç½®é»˜è®¤æ‹¦æˆªå™¨ï¼ˆè¾“å…¥å…¨å±€é…ç½®å’ŒEventProcessoråç§°ï¼Œè¿”å›æ‹¦æˆªå™¨å®ä¾‹ï¼‰</li>
<li>registerHandlerInterceptor(String, Function&lt;Configuration, MessageHandlerInterceptor&lt;? super EventMessage&lt;?&gt;&gt;&gt;)ï¼šä¸ºæŒ‡å®šåç§°çš„EventProcessoré…ç½®ä¸“å±æ‹¦æˆªå™¨</li>
</ol>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AxonConfig</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">configureInterceptors</span><span class="hljs-params">(EventProcessingConfigurer processingConfigurer)</span> {
        <span class="hljs-comment">// 1. é…ç½®å…¨å±€é»˜è®¤æ‹¦æˆªå™¨ï¼šä¸ºæ‰€æœ‰å¤„ç†å™¨æ·»åŠ å…³è”æ•°æ®æ‹¦æˆª</span>
        processingConfigurer.registerDefaultHandlerInterceptor((config, processorName) -&gt; 
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">CorrelationDataInterceptor</span>&lt;&gt;(config.correlationDataProviders())
        );

        <span class="hljs-comment">// 2. ä¸º "audit-processor" é…ç½®ä¸“å±å®¡è®¡æ‹¦æˆªå™¨</span>
        processingConfigurer.registerHandlerInterceptor(<span class="hljs-string">"audit-processor"</span>, config -&gt; 
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">AuditLoggingInterceptor</span>() <span class="hljs-comment">// è‡ªå®šä¹‰å®¡è®¡æ‹¦æˆªå™¨ï¼Œè®°å½•äº‹ä»¶å¤„ç†æ—¥å¿—</span>
        );
    }
}
</code></pre>
<h4 data-id="heading-38">æ¶ˆæ¯ç›‘æ§</h4>
<h5 data-id="heading-39">ä»‹ç»</h5>
<p>æ‰€æœ‰EventProcessorå®ä¾‹éƒ½æ”¯æŒé…ç½®MessageMonitorã€‚MessageMonitorç”¨äºç›‘æ§Axonåº”ç”¨ä¸­æ¶ˆæ¯çš„æµè½¬è¿‡ç¨‹ï¼Œå¯¹äºEvnetProcessorè€Œè¨€ï¼Œå®ƒä¼šä¸“é—¨ç›‘æ§ä»EventProcessoræµå‘EventHandlerçš„äº‹ä»¶</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fcde9e4cdc454c458ece83589f002930~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2j6aOOMTEzMg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768646315&amp;x-signature=Qg7LqcxCH5F2iADYgg6w5FQh3%2F4%3D" alt="1768041065242.png" loading="lazy"/></p>
<h5 data-id="heading-40">é…ç½®æ–¹å¼</h5>
<p>MessageMonitorFactoryæ˜¯Axoné…ç½®APIä¸­é€šç”¨çš„ç›‘æ§å™¨æ„å»ºæ¥å£ï¼Œæ”¯æŒæ›´çµæ´»çš„ç›‘æ§å™¨åˆ›å»ºé€»è¾‘ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@FunctionalInterface</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">MessageMonitorFactory</span> {
    <span class="hljs-comment">// å‚æ•°è¯´æ˜ï¼š</span>
    <span class="hljs-comment">// - configurationï¼šå…¨å±€é…ç½®ï¼ˆå¯è·å–ä¾èµ–ç»„ä»¶ï¼‰</span>
    <span class="hljs-comment">// - componentTypeï¼šç»„ä»¶ç±»å‹ï¼ˆäº‹ä»¶å¤„ç†å™¨åœºæ™¯ä¸‹ä¸º EventProcessor å®ç°ç±»ï¼‰</span>
    <span class="hljs-comment">// - componentNameï¼šç»„ä»¶åç§°ï¼ˆäº‹ä»¶å¤„ç†å™¨åç§°ï¼‰</span>
    MessageMonitor&lt;Message&lt;?&gt;&gt; create(Configuration configuration,
                                      Class&lt;?&gt; componentType,
                                      String componentName);
}
</code></pre>
<p>ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AxonConfig</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">configureMessageMonitor</span><span class="hljs-params">(EventProcessingConfigurer processingConfigurer)</span> {
        <span class="hljs-comment">// ä½¿ç”¨å·¥å‚ä¸º "metrics-processor" é…ç½®ç›‘æ§å™¨</span>
        processingConfigurer.registerMessageMonitorFactory(<span class="hljs-string">"metrics-processor"</span>, 
            (config, componentType, componentName) -&gt; {
                <span class="hljs-comment">// ç¤ºä¾‹ï¼šåŸºäº Micrometer å®ç°äº‹ä»¶å¤„ç†æŒ‡æ ‡ç›‘æ§</span>
                <span class="hljs-keyword">return</span> MicrometerMessageMonitor.builder(componentName)
                                              .meterRegistry(config.getComponent(MeterRegistry.class))
                                              .build();
            }
        );
    }
}
</code></pre>
<h4 data-id="heading-41">äº‹åŠ¡ç®¡ç†</h4>
<h5 data-id="heading-42">ä»‹ç»</h5>
<p>EventProcessorè´Ÿè´£äº‹ä»¶å¤„ç†ï¼Œå› æ­¤ä¹Ÿæ˜¯é…ç½®äº‹åŠ¡çš„åˆç†ä½ç½®ã€‚å¤§å¤šæ•°åœºæ™¯ä¸‹ï¼Œé»˜è®¤é…ç½®å·²è¶³å¤Ÿï¼Œæœ¬èŠ‚ä»…ä»‹ç»å¯è°ƒæ•´çš„é€‰é¡¹</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/34f672f908c34574a840e61e2299a744~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2j6aOOMTEzMg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768646315&amp;x-signature=zicwto9UNgVnoQ3isYmxqSH9EJo%3D" alt="1768041132884.png" loading="lazy"/></p>
<h5 data-id="heading-43">TransactionManager</h5>
<p>Axonä½¿ç”¨TransactionManagerä¸ºæ¯ä¸ªå·¥ä½œå•å…ƒé™„åŠ äº‹åŠ¡ï¼š</p>
<ol>
<li>Springç¯å¢ƒï¼šé»˜è®¤ä½¿ç”¨SpringTransactionManagerï¼Œåº•å±‚ä¾èµ–Springçš„PlatformTransactionManager</li>
<li>éSpringç¯å¢ƒï¼šè‹¥éœ€äº‹åŠ¡ç®¡ç†ï¼Œéœ€è‡ªå®šä¹‰TransactionManagerå®ç°ï¼Œä»…éœ€å®ç°TransactionManager#startTransaction()æ–¹æ³•</li>
</ol>
<h5 data-id="heading-44">é…ç½®æ–¹å¼</h5>
<p>é€šè¿‡EventProcessingConfigurerçš„registerTransactionManageræ–¹æ³•é…ç½®ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AxonConfig</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">configureTransactionManager</span><span class="hljs-params">(EventProcessingConfigurer processingConfigurer)</span> {
        <span class="hljs-comment">// ä¸º "transactional-processor" é…ç½®è‡ªå®šä¹‰äº‹åŠ¡ç®¡ç†å™¨</span>
        processingConfigurer.registerTransactionManager(<span class="hljs-string">"transactional-processor"</span>, 
            config -&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">CustomTransactionManager</span>()
        );
    }
}
</code></pre>
<h5 data-id="heading-45">å›æ»šé…ç½®</h5>
<p>RollbackConfigurationç”¨äºå†³å®šå·¥ä½œå•å…ƒä½•æ—¶éœ€è¦å›æ»šäº‹åŠ¡ã€‚é»˜è®¤é…ç½®ä¸ºä»»ä½•Throwableéƒ½ä¼šè§¦å‘å›æ»šï¼Œå…¶ä»–å¯é€‰é…ç½®å¯å‚è€ƒå·¥ä½œå•å…ƒ</p>
<p>é€šè¿‡EventProcessingConfigurerçš„registerRollbackConfigurationæ–¹æ³•é…ç½®ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AxonConfig</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">configureRollback</span><span class="hljs-params">(EventProcessingConfigurer processingConfigurer)</span> {
        <span class="hljs-comment">// ä¸º "custom-rollback-processor" é…ç½®è‡ªå®šä¹‰å›æ»šç­–ç•¥ï¼šä»… RuntimeException è§¦å‘å›æ»š</span>
        processingConfigurer.registerRollbackConfiguration(<span class="hljs-string">"custom-rollback-processor"</span>, 
            config -&gt; RollbackConfigurationType.ANY_RUNTIME_EXCEPTION
        );
    }
}
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item>  </channel></rss>