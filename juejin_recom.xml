<?xml version="1.0" encoding="UTF-8"?><rss version="2.0">  <channel>      <title>æ˜é‡‘æ–‡ç« æ¨è</title>      <link>https://juejin.cn/recommended?sort=newest</link>      <description>ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…æˆé•¿çš„ç¤¾åŒº</description>      <generator>python juejin_recom.py @Pi20</generator>      <item>    <title><![CDATA[JavaScript ä¸­çš„ sort æ’åºé—®é¢˜]]></title>    <link>https://juejin.cn/post/7594310266410614784</link>    <guid>https://juejin.cn/post/7594310266410614784</guid>    <pubDate>2026-01-12T14:12:54.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594310266410614784" data-draft-id="7594303923361382440" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="JavaScript ä¸­çš„ sort æ’åºé—®é¢˜"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2026-01-12T14:12:54.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‰ç«¯å¼€æºæ˜Ÿçƒ"/> <meta itemprop="url" content="https://juejin.cn/user/1504599026445150"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            JavaScript ä¸­çš„ sort æ’åºé—®é¢˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1504599026445150/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‰ç«¯å¼€æºæ˜Ÿçƒ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-12T14:12:54.000Z" title="Mon Jan 12 2026 14:12:54 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    22
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ JavaScript ä¸­ï¼Œä»¥ä¸‹ä¸¤ç§å†™æ³•æ˜¯ç­‰ä»·çš„ï¼š</p>
<p>å†™æ³•ä¸€ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">let</span> fruits = [<span class="hljs-string">"banana"</span>, <span class="hljs-string">"apple"</span>, <span class="hljs-string">"cherry"</span>, <span class="hljs-string">"Apple"</span>]  
fruits.<span class="hljs-title function_">sort</span>()  
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(fruits) <span class="hljs-comment">// ["Apple", "apple", "banana", "cherry"]  </span>
</code></pre>
<p>å†™æ³•äºŒï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">let</span> fruits = [<span class="hljs-string">"banana"</span>, <span class="hljs-string">"apple"</span>, <span class="hljs-string">"cherry"</span>, <span class="hljs-string">"Apple"</span>]
fruits.<span class="hljs-title function_">sort</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> {
  <span class="hljs-keyword">return</span> a &gt; b ? <span class="hljs-number">1</span> : -<span class="hljs-number">1</span>
})
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(fruits)
</code></pre>
<h2 data-id="heading-0">sort æ’åºåŸºæœ¬åŸç†</h2>
<p>å› ä¸º sort å‡½æ•°é»˜è®¤æ˜¯å­—ç¬¦çš„ ASCII ç å‡åºæ’åˆ—çš„ã€‚</p>
<p>æ¯”å¦‚ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-string">'A'</span>.<span class="hljs-title function_">charCode</span>() <span class="hljs-comment">// 65</span>
<span class="hljs-string">'a'</span>.<span class="hljs-title function_">charCode</span>() <span class="hljs-comment">// 97</span>
<span class="hljs-string">'b'</span>.<span class="hljs-title function_">charCode</span>() <span class="hljs-comment">// 98</span>
</code></pre>
<p>å› æ­¤å¦‚æœæ˜¯10å’Œ2æ’åºçš„è¯ï¼Œå…¶å®æ˜¯'10'å’Œ'2'æ’åºï¼Œ<code>'1'.charCode()</code> ä¸º 49ï¼Œ<code>'2'.charCode()</code> ä¸º 50ï¼Œå¯¼è‡´å‡ºç° 2 æ¯” 10 å¤§ï¼Œå‡ºç°åœ¨ 10 åé¢ã€‚</p>
<p>æ¯”å¦‚ä¸‹é¢çš„ä»£ç ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">let</span> nums = [<span class="hljs-number">3</span>, <span class="hljs-number">10</span>, <span class="hljs-number">2</span>]
nums.<span class="hljs-title function_">sort</span>()
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'nums'</span>) <span class="hljs-comment">// [10, 2, 3]</span>
</code></pre>
<h2 data-id="heading-1">åŸºç¡€</h2>
<p>é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œå¦‚æœæˆ‘æƒ³å®ç°ä»¥ä¸‹æ•°ç»„æŒ‰ç…§ appName å­—å…¸é¡ºåº<code>é™åºæ’åˆ—</code>æ€ä¹ˆåŠï¼Ÿ</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">let</span> apps = [
  [<span class="hljs-string">'chrome'</span>, { <span class="hljs-attr">cpu</span>: <span class="hljs-number">30</span>, <span class="hljs-attr">memory</span>: <span class="hljs-number">50</span> }],
  [<span class="hljs-string">'edge'</span>, { <span class="hljs-attr">cpu</span>: <span class="hljs-number">30</span>, <span class="hljs-attr">memory</span>: <span class="hljs-number">20</span> }],
  [<span class="hljs-string">'firefox'</span>, { <span class="hljs-attr">cpu</span>: <span class="hljs-number">80</span>, <span class="hljs-attr">memory</span>: <span class="hljs-number">90</span> }],
  [<span class="hljs-string">'safari'</span>, { <span class="hljs-attr">cpu</span>: <span class="hljs-number">10</span>, <span class="hljs-attr">memory</span>: <span class="hljs-number">50</span> }],
]
</code></pre>
<blockquote>
<p>æ³¨ï¼šchromeã€edge è¿™äº›æ˜¯ appName</p>
</blockquote>
<p>æ¬¢è¿åœ¨è¯„è®ºåŒºè§£ç­”ã€‚</p>
<h2 data-id="heading-2">è¿›é˜¶</h2>
<p>å†æ‰©å±•ä¸€ä¸‹ï¼Œç»™å®šä¸€ä¸ªæ•°ç»„ sortRulesï¼Œè¿™ä¸ªæ•°ç»„åªèƒ½å– cpu å’Œ memory ä¸¤ä¸ªå€¼ï¼Œå¯èƒ½æ˜¯ 0ã€1ã€2 ä¸ªã€‚</p>
<p>æ¯”å¦‚ sortRules å¯èƒ½æ˜¯ï¼š<code>[]</code>ã€<code>['cpu']</code>ã€<code>['memory', 'cpu']</code>ã€<code>['cpu', 'memory']</code> ç­‰ã€‚</p>
<p>è¯·å®ç°å…ˆæŒ‰ç…§ç»™å®šçš„ sortRules çš„å€¼ä¾æ¬¡å‡åºæ’åºï¼Œå†æŒ‰ç…§ appName é™åºæ’åºã€‚</p>
<p>æ¯”å¦‚ sortRules æ˜¯ <code>['cpu']</code>ï¼Œåˆ™æ’åºç»“æœæ˜¯ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">let</span> apps = [
  [<span class="hljs-string">'safari'</span>, { <span class="hljs-attr">cpu</span>: <span class="hljs-number">10</span>, <span class="hljs-attr">memory</span>: <span class="hljs-number">50</span> }],
  [<span class="hljs-string">'chrome'</span>, { <span class="hljs-attr">cpu</span>: <span class="hljs-number">30</span>, <span class="hljs-attr">memory</span>: <span class="hljs-number">50</span> }],
  [<span class="hljs-string">'edge'</span>, { <span class="hljs-attr">cpu</span>: <span class="hljs-number">30</span>, <span class="hljs-attr">memory</span>: <span class="hljs-number">20</span> }],
  [<span class="hljs-string">'firefox'</span>, { <span class="hljs-attr">cpu</span>: <span class="hljs-number">80</span>, <span class="hljs-attr">memory</span>: <span class="hljs-number">90</span> }],
]
</code></pre>
<p>æ¯”å¦‚ sortRules æ˜¯ <code>['cpu', 'memory']</code>ï¼Œåˆ™æ’åºç»“æœæ˜¯ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">let</span> apps = [
  [<span class="hljs-string">'safari'</span>, { <span class="hljs-attr">cpu</span>: <span class="hljs-number">10</span>, <span class="hljs-attr">memory</span>: <span class="hljs-number">50</span> }],
  [<span class="hljs-string">'edge'</span>, { <span class="hljs-attr">cpu</span>: <span class="hljs-number">30</span>, <span class="hljs-attr">memory</span>: <span class="hljs-number">20</span> }],
  [<span class="hljs-string">'chrome'</span>, { <span class="hljs-attr">cpu</span>: <span class="hljs-number">30</span>, <span class="hljs-attr">memory</span>: <span class="hljs-number">50</span> }],
  [<span class="hljs-string">'firefox'</span>, { <span class="hljs-attr">cpu</span>: <span class="hljs-number">80</span>, <span class="hljs-attr">memory</span>: <span class="hljs-number">90</span> }],
]
</code></pre>
<p>æ¬¢è¿åœ¨è¯„è®ºåŒºå›å¤~</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»â€œæ— â€åˆ°â€œæœ‰â€ï¼šæ‰‹åŠ¨å®ç°ä¸€ä¸ª 3D æ¸²æŸ“å¾ªç¯å…¨è¿‡ç¨‹]]></title>    <link>https://juejin.cn/post/7594303825012703247</link>    <guid>https://juejin.cn/post/7594303825012703247</guid>    <pubDate>2026-01-12T14:34:01.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594303825012703247" data-draft-id="7594310266410565632" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»â€œæ— â€åˆ°â€œæœ‰â€ï¼šæ‰‹åŠ¨å®ç°ä¸€ä¸ª 3D æ¸²æŸ“å¾ªç¯å…¨è¿‡ç¨‹"/> <meta itemprop="keywords" content="å‰ç«¯,WebGL,three.js"/> <meta itemprop="datePublished" content="2026-01-12T14:34:01.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="çƒ›é˜´"/> <meta itemprop="url" content="https://juejin.cn/user/950397795841032"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»â€œæ— â€åˆ°â€œæœ‰â€ï¼šæ‰‹åŠ¨å®ç°ä¸€ä¸ª 3D æ¸²æŸ“å¾ªç¯å…¨è¿‡ç¨‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/950397795841032/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    çƒ›é˜´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-12T14:34:01.000Z" title="Mon Jan 12 2026 14:34:01 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€ Three.js çš„åŸºæœ¬æ„æˆ</h2>
<ol>
<li><strong>Scene</strong> ï¼šåœºæ™¯ã€‚</li>
<li><strong>Camera</strong> ï¼šæ‘„åƒæœºã€‚</li>
<li><strong>Renderer</strong> ï¼šæ¸²æŸ“å™¨ï¼Œã€‚</li>
</ol>
<h2 data-id="heading-1">äºŒã€å…·ä½“å®ç°</h2>
<h3 data-id="heading-2">1. åˆå§‹åŒ–åœºæ™¯ (The Scene)</h3>
<p>åœºæ™¯æ˜¯ä¸€åˆ‡ç‰©ä½“çš„å®¹å™¨ã€‚</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-keyword">const</span> scene = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Scene</span>();
<span class="hljs-comment">// ğŸ’¡ INTP è§†è§’ï¼šæŠŠå®ƒæƒ³è±¡æˆä¸€ä¸ªåæ ‡ç³»åŸç‚¹ä¸º (0,0,0) çš„æ— é™ç©ºè…”ã€‚</span>
</code></pre>
<h3 data-id="heading-3">2. é…ç½®ç›¸æœº (The Camera)</h3>
<p>æœ€å¸¸ç”¨çš„æ˜¯ <strong>é€è§†ç›¸æœºï¼ˆPerspectiveCameraï¼‰</strong> ï¼Œå®ƒæ¨¡æ‹Ÿäº†äººçœ¼çš„â€œè¿‘å¤§è¿œå°â€æ•ˆæœã€‚</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-keyword">const</span> camera = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">PerspectiveCamera</span>(
    <span class="hljs-number">75</span>, <span class="hljs-comment">// è§†è§’ (Field of View)</span>
    <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerWidth</span> / <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerHeight</span>, <span class="hljs-comment">// å®½é«˜æ¯”</span>
    <span class="hljs-number">0.1</span>, <span class="hljs-comment">// è¿‘å‰ªè£é¢</span>
    <span class="hljs-number">1000</span> <span class="hljs-comment">// è¿œå‰ªè£é¢</span>
);
camera.<span class="hljs-property">position</span>.<span class="hljs-property">z</span> = <span class="hljs-number">5</span>; <span class="hljs-comment">// å°†ç›¸æœºåé€€ 5 ä¸ªå•ä½ï¼Œå¦åˆ™ä¼šåœ¨ç‰©ä½“ä¸­å¿ƒ</span>
</code></pre>
<h3 data-id="heading-4">3. åŠ å…¥æè´¨ (The Mesh)</h3>
<p>ä¸€ä¸ªç‰©ä½“ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼š</p>
<ul>
<li><strong>å‡ ä½•ä½“(Geometry)</strong></li>
<li><strong>æè´¨(Material)</strong></li>
</ul>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-keyword">const</span> geometry = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">BoxGeometry</span>(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>); <span class="hljs-comment">// å½¢çŠ¶ï¼šç«‹æ–¹ä½“</span>
<span class="hljs-keyword">const</span> material = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">MeshBasicMaterial</span>({ <span class="hljs-attr">color</span>: <span class="hljs-number">0x00ff00</span> }); <span class="hljs-comment">// æè´¨ï¼šåŸºç¡€ç»¿è‰²</span>
<span class="hljs-keyword">const</span> cube = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Mesh</span>(geometry, material); <span class="hljs-comment">// ç»„åˆæˆç½‘æ ¼</span>
scene.<span class="hljs-title function_">add</span>(cube); <span class="hljs-comment">// å¿…é¡»æ·»åŠ åˆ°åœºæ™¯ä¸­</span>
</code></pre>
<h3 data-id="heading-5">4. æ¸²æŸ“ä¸å¾ªç¯ (The Render Loop)</h3>
<p>è¿™æ˜¯æœ€å…³é”®çš„ä¸€æ­¥ã€‚æˆ‘ä»¬éœ€è¦æ¯ä¸€ç§’åˆ·æ–° 60 æ¬¡å±å¹•ï¼Œæ‰èƒ½çœ‹åˆ°åŠ¨ç”»ã€‚</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-keyword">const</span> renderer = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">WebGLRenderer</span>();
renderer.<span class="hljs-title function_">setSize</span>(<span class="hljs-variable language_">window</span>.<span class="hljs-property">innerWidth</span>, <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerHeight</span>);
<span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">appendChild</span>(renderer.<span class="hljs-property">domElement</span>);

<span class="hljs-keyword">function</span> <span class="hljs-title function_">animate</span>(<span class="hljs-params"/>) {
    <span class="hljs-title function_">requestAnimationFrame</span>(animate); <span class="hljs-comment">// æ ¸å¿ƒï¼šè¯·æ±‚ä¸‹ä¸€å¸§</span>
    
    <span class="hljs-comment">// è®©ç‰©ä½“åŠ¨èµ·æ¥ï¼Œå¢åŠ ä¸€ç‚¹ç”Ÿå‘½åŠ›</span>
    cube.<span class="hljs-property">rotation</span>.<span class="hljs-property">x</span> += <span class="hljs-number">0.01</span>;
    cube.<span class="hljs-property">rotation</span>.<span class="hljs-property">y</span> += <span class="hljs-number">0.01</span>;

    renderer.<span class="hljs-title function_">render</span>(scene, camera); <span class="hljs-comment">// çœŸæ­£ç»˜åˆ¶çš„ä¸€è¡Œ</span>
}
<span class="hljs-title function_">animate</span>();
</code></pre>
<p>ğŸ“‚Â <strong>æ ¸å¿ƒä»£ç ä¸å®Œæ•´ç¤ºä¾‹ï¼š</strong> Â Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fqq790git%2Fmy-three-app.git" target="_blank" title="https://github.com/qq790git/my-three-app.git" ref="nofollow noopener noreferrer">my-three-app</a></p>
<h2 data-id="heading-6">æ€»ç»“</h2>
<p><strong>å¦‚æœä½ å–œæ¬¢æœ¬æ•™ç¨‹ï¼Œè®°å¾—ç‚¹èµ+æ”¶è—ï¼å…³æ³¨æˆ‘è·å–æ›´å¤šThree.jså¼€å‘å¹²è´§</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸§å¿ƒç—…ç‹‚ï¼åœ¨æµè§ˆå™¨å…¨å¤©å€™è®°å½•ç”¨æˆ·è¡Œä¸ºæ’éšœ]]></title>    <link>https://juejin.cn/post/7594350054090670122</link>    <guid>https://juejin.cn/post/7594350054090670122</guid>    <pubDate>2026-01-12T14:40:16.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594350054090670122" data-draft-id="7425812523129176105" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸§å¿ƒç—…ç‹‚ï¼åœ¨æµè§ˆå™¨å…¨å¤©å€™è®°å½•ç”¨æˆ·è¡Œä¸ºæ’éšœ"/> <meta itemprop="keywords" content="å‰ç«¯,æ¶æ„"/> <meta itemprop="datePublished" content="2026-01-12T14:40:16.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æºå¿ƒé”"/> <meta itemprop="url" content="https://juejin.cn/user/1645288319627576"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸§å¿ƒç—…ç‹‚ï¼åœ¨æµè§ˆå™¨å…¨å¤©å€™è®°å½•ç”¨æˆ·è¡Œä¸ºæ’éšœ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1645288319627576/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æºå¿ƒé”
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-12T14:40:16.000Z" title="Mon Jan 12 2026 14:40:16 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»13åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{line-height:1.75;font-family:-apple-system-font,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei UI,Microsoft YaHei,Arial,sans-serif;letter-spacing:2px;background-image:linear-gradient(90deg,rgba(50,0,0,.05) 3%,transparent 0),linear-gradient(1turn,rgba(50,0,0,.05) 3%,transparent 0);background-size:20px 20px;background-position:50%;word-break:break-word;font-weight:400;font-size:15px;overflow-x:hidden;color:#333}.markdown-body h1{font-size:23px;margin-bottom:5px;font-weight:700;padding-left:10px;border-left:5px solid #773098}.markdown-body h2{font-size:19px;font-weight:700;padding-left:10px;border-left:5px solid #916dd5}.markdown-body h3{font-size:17px;font-weight:700;padding-left:10px;border-left:5px solid #d89cf6}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{font-size:14px;margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{display:block;max-width:100%;margin:1em 0;border-radius:6px;box-shadow:2px 4px 7px #999;user-select:none}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{padding:.2em .5em;font-weight:700;font-family:-apple-system-font,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei UI,Microsoft YaHei,Arial,sans-serif;font-size:1em;color:#916dd5;word-break:break-word;overflow-x:auto;background-color:none;border-radius:2px}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;font-family:-apple-system-font,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei UI,Microsoft YaHei,Arial,sans-serif;font-weight:400;font-size:.9em;padding:16px 12px;margin:0;color:#333;word-break:normal;overflow-x:auto;background:#f8f8f8;scroll-behavior:smooth}.markdown-body a{text-decoration:none;color:#916dd5;font-weight:700;border-bottom:1px solid #916dd5}.markdown-body a:active,.markdown-body a:hover{color:#773098}.markdown-body table{display:inline-block!important;font-size:14px;width:auto;max-width:100%;overflow:auto;border:1px solid #916dd5;border-collapse:collapse}.markdown-body thead{background-color:#916dd5;color:#fff;text-align:left}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px;border:1px solid #916dd5}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #d89cf6;background-color:#f4eeff}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0;line-height:26px}.markdown-body ol,.markdown-body ul{padding-left:28px;list-style-type:circle}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body b,.markdown-body strong{color:#916dd5;font-weight:700}.markdown-body b:before,.markdown-body strong:before{content:"ã€Œ"}.markdown-body b:after,.markdown-body strong:after{content:"ã€"}.markdown-body em,.markdown-body i{color:#916dd5}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="github-gist">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#fff;color:#333}.hljs-comment,.hljs-meta{color:#969896}.hljs-emphasis,.hljs-quote,.hljs-strong,.hljs-template-variable,.hljs-variable{color:#df5000}.hljs-keyword,.hljs-selector-tag,.hljs-type{color:#d73a49}.hljs-attribute,.hljs-bullet,.hljs-literal,.hljs-symbol{color:#0086b3}.hljs-name,.hljs-section{color:#63a35c}.hljs-tag{color:#333}.hljs-attr,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-id,.hljs-selector-pseudo,.hljs-title{color:#6f42c1}.hljs-addition{color:#55a532;background-color:#eaffea}.hljs-deletion{color:#bd2c00;background-color:#ffecec}.hljs-link{text-decoration:underline}.hljs-number{color:#005cc5}.hljs-string{color:#032f62}</style><h2 data-id="heading-0">1 å‰è¨€</h2>
<p>QAï¼šâ€œbug, ä½ æŠŠè¿™ä¸ª bug å¤„ç†ä¸€ä¸‹ã€‚â€</p>
<p>æˆ‘ï¼šâ€œè¿™ä¸ª bug å¤ç°ä¸äº†ï¼Œä½ å…ˆå¤ç°ä¸€ä¸‹ã€‚â€</p>
<p>QAï¼šâ€œæˆ‘ä¹Ÿå¤ç°ä¸äº†ã€‚â€</p>
<p>(PS: é¢é¢ç›¸è§‘è„¸ x 2)</p>
<p>ä¼—æ‰€å‘¨çŸ¥ï¼Œæ¯ä¸ªå…¬å¸æ¯ä¸ªé¡¹ç›®éƒ½å¯èƒ½å­˜åœ¨å¶ç°çš„ç¼ºé™·ï¼Œæ¯‹åº¸ç½®ç–‘ï¼Œè¿™ä¸ºé—®é¢˜çš„å®šä½å’Œä¿®å¤å¸¦æ¥äº†ä¸¥é‡çš„é˜»ç¢ã€‚</p>
<p>è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œç¤¾åŒºæ–¹æ¡ˆä¸­å¸¸å¸¸ä¾èµ– datadogã€sentry ç­‰é—®é¢˜è®°å½•å·¥å…·ï¼Œä½†è¿™äº›å·¥å…·å­˜åœ¨é‡‡æ ·ç‡é™åˆ¶æˆ–ä¾èµ–é”™è¯¯åšä¿¡æ¯æ”¶é›†ï¼Œå¾ˆéš¾åšåˆ° 100% çš„æ—¥å¿—è®°å½•ã€‚</p>
<p align="center"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/248f65482455461493c575e097b54af1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rqQ5b-D6ZSB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768833616&amp;x-signature=C5Cfvt73vGhnFRN%2FhpKT%2BJLwjMk%3D" alt="emoji_002.png" loading="lazy"/></p>
<p>å¶ç„¶é—´ï¼Œæˆ‘çœ‹åˆ°äº† pagespyï¼Œå®ƒç¬¦åˆéœ€æ±‚ï¼Œä½†åˆä¸å®Œå…¨ç¬¦åˆï¼Œå¥½åœ¨è°ƒç ”ä¸‹æ¥ï¼Œæˆ‘ä»¬åªè¦é­”æ”¹ä¸€ç•ªï¼Œä¿ç•™å…¶åŸºç¡€çš„æ—¥å¿—èƒ½åŠ›ï¼Œä¿®æ”¹å…¶å­˜å‚¨æ–¹å¼ï¼Œå°±èƒ½å¾—åˆ°ä¸€ä¸ªèƒ½åšå…¨å¤©å€™æ—¥å¿—é‡‡é›†çš„å·¥å…·ã€‚</p>
<p>é‚£ä¹ˆï¼Œç›®æ ‡æ˜ç¡®ï¼š</p>
<ul>
<li><strong>å®ç°å…¨æ—¶æ®µç”¨æˆ·è¡Œä¸ºå½•åˆ¶ä¸å›æ”¾</strong></li>
<li>æœ€å°åŒ–å¯¹ç”¨æˆ·ä½“éªŒçš„å½±å“</li>
<li>ç¡®ä¿æ•°æ®å®‰å…¨ä¸éšç§ä¿æŠ¤</li>
<li>ä¸ç°æœ‰ç³»ç»Ÿï¼ˆå¦‚ intercom ï¼‰æ— ç¼é›†æˆ</li>
</ul>
<h2 data-id="heading-1">2 SDK è®¾è®¡</h2>
<p>ç›®å‰ pagespy è®¾è®¡ç›®æ ‡å’Œæˆ‘ä»¬é¢„æœŸå¹¶ä¸ä¸€è‡´ï¼Œå¹¶ä¸èƒ½å¼€ç®±å³ç”¨ã€‚pagespy çš„æ–¹æ¡ˆä¸æ»¡è¶³æˆ‘ä»¬éœ€æ±‚çš„ç‚¹åœ¨äºï¼š</p>
<ol>
<li>æ²¡æœ‰æŒä¹…åŒ–èƒ½åŠ›ï¼Œå†…å­˜å­˜å‚¨ï¼Œå•æ¬¡å½•åˆ¶ä¸å¯¹æ•°æ®åšå¯¼å‡ºåˆ™æ•°æ®æ¸…ç©ºã€‚</li>
<li>pagespy çš„è®¾è®¡ç†å¿µä¸­ã€‚æ•°æ®æ˜¯éœ€è¦æ˜¾å¼ç”±ç”¨æˆ·æ‰‹åŠ¨å¯¼å‡ºçš„ï¼Œä½†æˆ‘ä»¬æ˜¯éœ€è¦æŒç»­å­˜å‚¨æ•°æ®ã€‚</li>
</ol>
<p>ç»è¿‡å¯¹ pagespy çš„æºç è§£æä»¥åŠæ–‡æ¡£é˜…è¯»ï¼Œæ•´ç†å‡ºæ¥å…¶ä¸­åˆ†æ”¯çš„ OSpyï¼ˆç¦»çº¿ç‰ˆ pagespy çš„æ•°æ®èµ°å‘å¦‚ä¸‹ï¼‰ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d680c9d0612c453a86eaa0d2fa59ec7d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rqQ5b-D6ZSB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768833616&amp;x-signature=Knkgm%2BaAa243VIxNJiefm0Ea%2FEA%3D" alt="image.png" loading="lazy"/></p>
<p>æˆ‘ä»¬å¯ä»¥é€šè¿‡ inject çš„å½¢å¼ï¼ŒæŠŠè¿™ä¸¤ä¸ªèƒ½åŠ›ä»£ç†åˆ°æˆ‘ä»¬çš„é€»è¾‘ä¸­ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d8c88e6d64ca4950817882d31211d4a6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rqQ5b-D6ZSB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768833616&amp;x-signature=7vECXH6KANIMq%2F9tBMOYaWZSnS8%3D" alt="image.png" loading="lazy"/></p>
<p>æ ·å¼ä¸Šï¼Œåˆ™é€šè¿‡æ’å…¥ä¸€æ®µ style å¼ºåˆ¶å°† dom æ ·å¼éšè—ã€‚</p>
<pre><code class="hljs language-js" lang="js">  <span class="hljs-variable language_">document</span>.<span class="hljs-property">head</span>.<span class="hljs-title function_">insertAdjacentHTML</span>(
    <span class="hljs-string">'beforeend'</span>,
    <span class="hljs-string">`&lt;style&gt;
    #o-spy {
      display: none;
    }
    &lt;/style&gt;`</span>,
  );
</code></pre>
<p>è‡³æ­¤ï¼Œ<strong>æˆ‘ä»¬å·²ç»åŸºæœ¬è„±ç¦»äº† pagespy çš„æ•°æ® in &amp; out é€»è¾‘ï¼Œæ‰€æœ‰æ•°æ®éƒ½ç”±æˆ‘ä»¬æ¥å¤„ç†ï¼ŒåŒ…æ‹¬æ•°æ®å­˜å‚¨ä¹Ÿéœ€è¦æˆ‘ä»¬é‡æ–°è®¾è®¡ã€‚</strong></p>
<h3 data-id="heading-2"><strong>2.1 æ—¥å¿—å­˜å‚¨æ–¹æ¡ˆ</strong></h3>
<blockquote>
<p>âœ… ç¡®å®šæ—¥å¿—å­˜å‚¨æ–¹æ¡ˆã€‚éœ€è¦æ³¨æ„é¿å…å¤§é‡æ—¥å¿—å°†ç”¨æˆ·çš„ç”µè„‘å¡æ­»ã€‚</p>
</blockquote>
<blockquote>
<p>âœ… pagespy çš„è®¾è®¡ç†å¿µä¸­ã€‚æ•°æ®æ˜¯éœ€è¦æ˜¾å¼ç”±ç”¨æˆ·æ‰‹åŠ¨å¯¼å‡ºçš„ï¼Œä½†æˆ‘ä»¬æ˜¯éœ€è¦æŒç»­å­˜å‚¨æ•°æ®ã€‚</p>
</blockquote>
<blockquote>
<p>âœ… pagespy ä¸ºäº†é˜²æ­¢çˆ†å†…å­˜å¼•å…¥äº†æ—¶é—´ä¸Šé™ç­‰å› ç´ ï¼Œä¼šæ—¶ä¸æ—¶æ¸…é™¤æ•°æ®ï¼ˆrrweb å­˜åœ¨éå¸¸é‡è¦çš„é¦–å±å¸§ï¼Œç¼ºå°‘è¯¥å¸§åç»­éƒ½æ— æ³•æ¸²æŸ“æˆåŠŸï¼‰ï¼Œè¿™ä¼šå¯¼è‡´ä»¥å•ä¸ªæµè§ˆå™¨æ ‡ç­¾ä½œä¸ºåˆ‡ç‰‡çš„è®¾è®¡é€»è¾‘è¢«è¿«ä¸­æ–­ï¼Œä¼šå¯¹æˆ‘ä»¬çš„é€»è¾‘å¸¦æ¥è´Ÿé¢å½±å“ã€‚</p>
</blockquote>
<p>ä¸ºäº†å®ç°å…¨æ—¶æ®µå­˜å‚¨çš„ç›®æ ‡ï¼Œç»è¯„ä¼°é™¤äº† indexDB ä¹‹å¤–æ²¡æœ‰å…¶ä»–å¾ˆå¥½çš„å­˜å‚¨æ–¹æ¡ˆå¯ä»¥æ»¡è¶³æˆ‘ä»¬çš„å¤§å®¹é‡éœ€æ±‚ã€‚åœ¨æ­¤ï¼Œå†³å®šå¼•å…¥ dexie è¿›è¡Œæ•°æ®åº“ç®¡ç†ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> type { <span class="hljs-title class_">EntityTable</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'dexie'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Dexie</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'dexie'</span>;

<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">DB_NAME</span> = <span class="hljs-string">'SpyDataHarborDB'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DataHarborClient</span> {
  <span class="hljs-attr">db</span>: <span class="hljs-title class_">DBType</span>;
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">db</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Dexie</span>(<span class="hljs-variable constant_">DB_NAME</span>) <span class="hljs-keyword">as</span> <span class="hljs-title class_">DBType</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">db</span>.<span class="hljs-title function_">version</span>(<span class="hljs-number">1</span>).<span class="hljs-title function_">stores</span>({
      <span class="hljs-attr">logs</span>: <span class="hljs-string">'++id,[tabId+timestamp],tabId, timestamp'</span>,
      <span class="hljs-attr">metas</span>: <span class="hljs-string">'++id,tabId,startTime,endTime'</span>,
    });
  }
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> { db } = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DataHarborClient</span>();
</code></pre>
<p>æˆ‘ä»¬å°†æ—¥å¿—ä»¥æµè§ˆå™¨æ ‡ç­¾é¡µä¸ºç»´åº¦è¿›è¡Œæ‹†åˆ†ï¼Œå¼•å…¥äº† <code>tabId</code> çš„æ¦‚å¿µã€‚å¹¶è®¾è®¡äº†ä¸¤ä¸ªè¡¨ï¼Œä¸€ä¸ªç”¨äºå­˜å‚¨æ—¥å¿—ï¼Œä¸€ä¸ªç”¨äºå­˜åœ¨ tab çš„åŸºæœ¬ä¿¡æ¯ã€‚</p>
<pre><code class="hljs language-js" lang="js">type <span class="hljs-title class_">DBType</span> = <span class="hljs-title class_">Dexie</span> &amp; {
  <span class="hljs-attr">logs</span>: <span class="hljs-title class_">EntityTable</span>&lt;{
    id?: number;
    <span class="hljs-attr">tabId</span>: string;
    <span class="hljs-attr">timestamp</span>: number;
    <span class="hljs-attr">data</span>: string;
  }&gt;;
  <span class="hljs-attr">metas</span>: <span class="hljs-title class_">EntityTable</span>&lt;{
    id?: number;
    <span class="hljs-attr">tabId</span>: string;
    <span class="hljs-attr">size</span>: number;
    <span class="hljs-attr">startTime</span>: number;
    <span class="hljs-attr">endTime</span>: number;
  }&gt;;
};
</code></pre>
<p>è¿™æ„å‘³ç€ï¼Œä» pagespy å¾—åˆ°çš„æ•°æ®åªéœ€è¦ç›´æ¥å…¥åº“ï¼Œæˆ‘ä»¬åœ¨æ¯æ¬¡å…¥åº“ååšä¸€æ¬¡æ—¥å¿—æ¸…ç†ï¼Œå³å¯å®ç°ä¸€ä¸ªåŸºæœ¬çš„å­˜å‚¨ç³»ç»Ÿã€‚</p>
<pre><code class="hljs language-js" lang="js">  <span class="hljs-keyword">async</span> <span class="hljs-title function_">addLog</span>(<span class="hljs-params">data: CacheMessageItem</span>) {
    <span class="hljs-keyword">const</span> now = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>();

    <span class="hljs-keyword">const</span> dataStr = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(data);

    <span class="hljs-keyword">await</span> db.<span class="hljs-property">logs</span>.<span class="hljs-title function_">add</span>({
      <span class="hljs-attr">tabId</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">tabId</span>,
      <span class="hljs-attr">timestamp</span>: now.<span class="hljs-title function_">getTime</span>(),
      <span class="hljs-attr">data</span>: dataStr,
    });

    <span class="hljs-keyword">await</span> db.<span class="hljs-title function_">transaction</span>(<span class="hljs-string">'rw'</span>, [<span class="hljs-string">'metas'</span>], <span class="hljs-keyword">async</span> (tx) =&gt; {
      <span class="hljs-keyword">const</span> meta = <span class="hljs-keyword">await</span> tx.<span class="hljs-property">metas</span>.<span class="hljs-title function_">get</span>({
        <span class="hljs-attr">tabId</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">tabId</span>,
      });
      <span class="hljs-keyword">if</span> (meta) {
        meta.<span class="hljs-property">size</span> += dataStr.<span class="hljs-property">length</span>;
        meta.<span class="hljs-property">endTime</span> = now.<span class="hljs-title function_">getTime</span>();
        <span class="hljs-keyword">await</span> db.<span class="hljs-property">metas</span>.<span class="hljs-title function_">put</span>(meta);
        <span class="hljs-keyword">return</span> meta;
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">await</span> db.<span class="hljs-property">metas</span>.<span class="hljs-title function_">add</span>({
          <span class="hljs-attr">tabId</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">tabId</span>,
          <span class="hljs-attr">size</span>: dataStr.<span class="hljs-property">length</span>,
          <span class="hljs-attr">startTime</span>: now.<span class="hljs-title function_">getTime</span>(),
          <span class="hljs-attr">endTime</span>: now.<span class="hljs-title function_">getTime</span>(),
        });
      }
    });
  }
</code></pre>
<p>åœ¨æˆ‘ä»¬å®Œæˆæ—¥å¿—å…¥åº“ä¹‹åï¼Œé¢å¤–éœ€è¦è€ƒè™‘çš„æ˜¯æŒç»­ç›´æ¥å…¥åº“çš„æ€§èƒ½æŸè€—ã€‚ ç»æµ‹è¯•ï¼Œé€šè¿‡ worker è¿›è¡Œæ“ä½œä¸ç›´æ¥åœ¨ä¸»çº¿ç¨‹è¿›è¡Œæ“ä½œï¼Œå¯¹ä¸»çº¿ç¨‹çš„è€—æ—¶å½±å“å¯¹æ¯”è¡¨æ ¼å¦‚ä¸‹ï¼ˆåŸºäº <code>performance.now()</code>ï¼‰ï¼š</p>


























<table><thead><tr><th><strong>æ“ä½œæ–¹å¼</strong></th><th><strong>å³°å€¼</strong></th><th><strong>æœ€ä½å€¼</strong></th><th><strong>ä¸­ä½æ•°</strong></th><th><strong>å¹³å‡å€¼</strong></th></tr></thead><tbody><tr><td>worker + insert</td><td>5.3 ms</td><td>0ms</td><td>0.1ms</td><td>0.31ms</td></tr><tr><td>ç›´æ¥ insert</td><td>149.5 ms</td><td>0.4ms</td><td>3.6ms</td><td>55.29ms</td></tr></tbody></table>
<p>æ‰€ä»¥æœ€ç»ˆå†³ç­–å°†æ•°æ®åº“æ“ä½œè½¬ç§»åˆ° worker ä¸­å®ç°â€”â€”ä½†è¿™åˆååº”äº†ä¸€ç‚¹é—®é¢˜ï¼Œç›®å‰ pagespy çš„å…¥åº“æ•°æ®æ˜¯åºåˆ—åŒ–åçš„å­—ç¬¦ä¸²ï¼Œå¹¶ä¸èƒ½å¾ˆå¥½åœ°äº«å—ä¸»çº¿ç¨‹å’Œ worker çº¿ç¨‹ä¹‹é—´é€šè¿‡ transfer ä¼ è¾“çš„æ€§èƒ½ä¼˜åŠ¿ã€‚</p>
<h3 data-id="heading-3"><strong>2.2 å®‰å…¨å’Œåˆè§„é—®é¢˜</strong></h3>
<p>ç›®å‰å¯çŸ¥ï¼Œæˆ‘ä»¬çš„æ–¹æ¡ˆå…ˆå¤©å°±å­˜åœ¨è¾ƒä¸¥é‡çš„åˆè§„é—®é¢˜ ğŸ™‹ï¼Œè¿™ä½“ç°åœ¨ï¼š</p>
<ol>
<li>pagespy ä¼šä¿å­˜ä¸€äº›éšç§˜çš„ storageã€cookie æ•°æ®åˆ° indexedDB ä¸­ï¼Œæœ‰ä¸€å®šå®‰å…¨é£é™©ã€‚</li>
<li>pagespy åŸºäº rrweb âºï¸Â å½•åˆ¶é¡µé¢ï¼Œç”¨æˆ·åœ¨ç”µè„‘ä¸Šçš„è¡Œä¸ºå’Œä¿¡æ¯å¯èƒ½è¢«è®°å½•ã€‚ï¼ˆå¦‚ PII æ•°æ®ï¼‰</li>
</ol>
<p>ç¬¬ä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥è€ƒè™‘ç›´æ¥åŸºäº Pagespy æ¥è®°å½•ï¼Œå…¶å®é™…ä¸Šæä¾›äº† <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.pagespy.org%2F%23%2Fdocs%2Fpagespy%23config-dataProcessor" target="_blank" title="https://www.pagespy.org/#/docs/pagespy#config-dataProcessor" ref="nofollow noopener noreferrer">API</a> å…è®¸æˆ‘ä»¬è‡ªè¡Œå†³å®šè¦æŠ›å¼ƒå“ªäº›ä¿¡æ¯ã€‚</p>
<p>ä½¿ç”¨æ—¶ï¼Œç±»ä¼¼äºï¼š</p>
<pre><code class="hljs language-js" lang="js">    <span class="hljs-attr">network</span>: <span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {
      <span class="hljs-keyword">if</span> ([<span class="hljs-string">'fetch'</span>, <span class="hljs-string">'xhr'</span>].<span class="hljs-title function_">includes</span>(data.<span class="hljs-property">requestType</span>)) {
        data.<span class="hljs-property">responseHeader</span>?.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> {
          <span class="hljs-keyword">if</span> (item[<span class="hljs-number">0</span>] === <span class="hljs-string">'set-cookie'</span>) {
            item[<span class="hljs-number">1</span>] = <span class="hljs-title function_">obfuscate</span>(item[<span class="hljs-number">1</span>]);
          }
        });
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
      }
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    },
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5eeabfcddd38421d962929c5042a2ef6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rqQ5b-D6ZSB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768833616&amp;x-signature=PWg4HMgqMnk21LO4gnKexcGhgeU%3D" alt="image.png" loading="lazy"/>
ç¬¬äºŒä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬åº”è€ƒè™‘åŸºäº rrweb çš„é»˜è®¤éšç§ç­–ç•¥æ¥åšå¤„ç†ï¼Œrrweb åœ¨ sentryã€posthog ä¸­éƒ½æœ‰ä½¿ç”¨ï¼Œéƒ½æ˜¯åŸºäºé»˜è®¤å±è”½è§„åˆ™æ¥å…è®¸ï¼Œæ‰€ä»¥æˆ‘ä»¬ä½¿ç”¨é»˜è®¤å±è”½è§„åˆ™ï¼Œå…¶ä»–åº“çš„éšç§åˆè§„ä¹Ÿç›¸å½“äºä¸€èµ·åšäº†ã€‚</p>
<p>æ‰€ä»¥ï¼Œæˆ‘ä»¬éœ€éµå¾ªä»¥ä¸‹è§„åˆ™ï¼ˆrrweb é»˜è®¤å±è”½è§„åˆ™ï¼‰ä¿®æ”¹ Web ç«¯ï¼Œè€Œä¸æ˜¯ SDKï¼š</p>
<ul>
<li>å…·æœ‰è¯¥ç±»åçš„å…ƒç´ <code>.rr-block</code>ä¸ä¼šè¢«è®°å½•ã€‚å®ƒå°†è¢«æ›¿æ¢ä¸ºå…·æœ‰ç›¸åŒå°ºå¯¸çš„å ä½ç¬¦ã€‚</li>
<li>å…·æœ‰è¯¥ç±»åçš„å…ƒç´ <code>.rr-ignore</code>å°†ä¸ä¼šè®°å½•å…¶è¾“å…¥äº‹ä»¶ã€‚</li>
<li>å…·æœ‰ç±»åçš„å…ƒç´ <code>.rr-mask</code>åŠå…¶å­å…ƒç´ çš„æ‰€æœ‰æ–‡æœ¬éƒ½å°†è¢«å±è”½ã€‚å’Œ block çš„åŒºåˆ«æ˜¯ï¼Œ<strong>åªä¼šå±è”½æ–‡æœ¬ï¼Œä¸ä¼šç›´æ¥æ›¿æ¢ dom ç»“æ„ï¼ˆä¹Ÿå°±æ˜¯èƒŒæ™¯é¢œè‰²ä¹‹ç±»çš„ä¼šä¿ç•™ï¼‰</strong> ã€‚</li>
<li><code>input[type="password"]</code>å°†è¢«é»˜è®¤å±è”½ã€‚</li>
</ul>
<p>æ ¹æ®å…ƒç´ æ˜¯å¦åŒ…å«â€œç”¨æˆ·è¾“å…¥èƒ½åŠ›â€ï¼Œåˆ†ä¸º 3 ç§å¤„ç†æ–¹å¼ï¼š</p>
<ul>
<li>
<p>1ï¸âƒ£ åŒ…å«è¾“å…¥èƒ½åŠ›ï¼ˆå¦‚ <code>input</code>, <code>textarea</code>,<code>canvas</code> å¯ç¼–è¾‘åŒºåŸŸï¼‰</p>
<ul>
<li><strong>ç›®çš„</strong>ï¼šæ—¢å±è”½ç”¨æˆ·çš„è¾“å…¥è¡Œä¸ºï¼Œä¹Ÿå±è”½è¾“å…¥å†…å®¹</li>
<li><strong>å¤„ç†æ–¹å¼</strong>ï¼šæ·»åŠ  <code>rr-ignore</code> å’Œ <code>rr-block</code> ä¸¤ä¸ªç±»</li>
<li>æ•ˆæœï¼š</li>
</ul>
</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d29e2a7829af4a3483bddaff588e92f9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rqQ5b-D6ZSB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768833616&amp;x-signature=YK5QlN5MC4e5PeTgjdPp4y3PREE%3D" alt="image.png" loading="lazy"/></p>
<ul>
<li>
<p><strong>2ï¸âƒ£ ä¸åŒ…å«è¾“å…¥èƒ½åŠ›ï¼ˆå¦‚çº¯å±•ç¤ºç±»çš„æ–‡æœ¬ï¼‰</strong></p>
<ul>
<li><strong>ç›®çš„</strong>ï¼šä¿ç•™ç»“æ„ï¼Œéšè—æ–‡æœ¬å†…å®¹ï¼Œé¿å…æ³„éœ²éšç§</li>
<li><strong>å¤„ç†æ–¹å¼</strong>ï¼šæ·»åŠ  <code>rr-mask</code> ç±»ï¼Œå°†æ–‡æœ¬è¿›è¡Œæ··æ·†æ˜¾ç¤º</li>
<li>æ•ˆæœï¼š</li>
</ul>
</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/428b67b316f142b8b0d1c5e1d161e7c1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rqQ5b-D6ZSB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768833616&amp;x-signature=46RgkIiKlLm0PWA7507A4JXNM3E%3D" alt="image.png" loading="lazy"/></p>
<ul>
<li>
<p>3ï¸âƒ£ å›¾ç‰‡ã€åªè¯» canvas åŒ…å«éšç§ä¿¡æ¯ï¼ˆå¦‚ç­¾åï¼‰</p>
<ul>
<li><strong>ç›®çš„</strong>ï¼šéšè—å†…å®¹</li>
<li><strong>å¤„ç†æ–¹å¼</strong>ï¼šæ·»åŠ  <code>rr-block</code> ç±»</li>
</ul>
</li>
</ul>
<h3 data-id="heading-4">2.3 æ—¥å¿—è·å–å’Œå¤„ç†</h3>
<p>åœ¨ä¸Šè¿°æµç¨‹ä¸­ï¼Œæˆ‘ä»¬è®¾è®¡äº†åŸºäºæµè§ˆå™¨æ ‡ç­¾é¡µçš„å­˜å‚¨ç³»ç»Ÿï¼Œä½†<strong>ç”±äº rrweb å’Œ ospy çš„è®¾è®¡ï¼Œæˆ‘ä»¬ä»æœ‰ä¸¤ä¸ªé—®é¢˜å¾…è§£å†³ï¼š</strong></p>
<ol>
<li><strong>ospy ä¸­çš„ meta å¸§åªåœ¨ download æ—¶è·å–ï¼Œå¹¶éœ€è¦æ˜¯ logs çš„æœ€åä¸€å¸§ã€‚</strong></li>
<li><strong>rrweb</strong> <strong>å­˜åœ¨ç‰¹æ®Šé™åˆ¶ï¼Œå³å¿…é¡»å­˜åœ¨é¦– 2 å¸§</strong>ï¼Œå¦åˆ™æå–å‡ºæ¥çš„æ—¥å¿—æ— æ³•æ˜¾ç¤ºé¡µé¢ã€‚</li>
</ol>
<p>è¿™ä¸¤ä¸ªé—®é¢˜æˆ‘ä»¬éœ€è¦ç‰¹æ®Šå¤„ç†ï¼Œé’ˆå¯¹ meta å¸§çš„æƒ…å†µï¼Œé¦–å…ˆè¦çŸ¥é“ï¼Œmeta å¸§åŒ…å«äº†å®¢æˆ·ç«¯ä¿¡æ¯ç­‰æ•°æ®ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/afa8537d77bd42f7b43ed8deef191c69~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rqQ5b-D6ZSB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768833616&amp;x-signature=Ul2mU%2FhgPkRK%2FQUoxPhrX8Stvgo%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/85f896236cd8481ba90ff24f5985ca86~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rqQ5b-D6ZSB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768833616&amp;x-signature=XL4PZafaykPuu%2Bkn9413AMd09bg%3D" alt="image.png" loading="lazy"/></p>
<p>è¿™éƒ¨åˆ†ä¿¡æ¯è™½ç„¶ç›¸æ¯”ä¹‹ä¸‹ä¸æ˜¯é‚£ä¹ˆé‡è¦ï¼Œä½†åœ¨ç‰¹å®šåœºæ™¯ä¸­éå¸¸æœ‰ç”¨ï¼Œnice to haveã€‚åœ¨æ­¤å‰æä¸‹ï¼Œç”±äº ospy æœªæä¾›å¯¹å¤–å‡½æ•°ï¼Œæˆ‘ä»¬éœ€è¦è‡ªè¡Œæ·»åŠ è¯¥å¸§ã€‚<strong>ç›®å‰ï¼Œmeta å¸§ä¼šåœ¨ spy åˆå§‹åŒ–æ—¶è‡ªåŠ¨æ’å…¥ï¼Œç„¶ååœ¨è¯»å–æ—¶æ’åºåˆ°å°¾éƒ¨ã€‚</strong></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// è¿™ä¸ªå…¶å®æ˜¯ spy çš„æºç </span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">minifyData</span> = (<span class="hljs-params">d: any</span>) =&gt; {
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">strFromU8</span>(<span class="hljs-title function_">zlibSync</span>(<span class="hljs-title function_">strToU8</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(d)), { <span class="hljs-attr">level</span>: <span class="hljs-number">9</span> }), <span class="hljs-literal">true</span>);
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">getMetaLog</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">minifyData</span>({
    <span class="hljs-attr">ua</span>: navigator.<span class="hljs-property">userAgent</span>,
    <span class="hljs-attr">title</span>: <span class="hljs-variable language_">document</span>.<span class="hljs-property">title</span>,
    <span class="hljs-attr">url</span>: <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">href</span>,
    <span class="hljs-attr">startTime</span>: <span class="hljs-number">0</span>,
    <span class="hljs-attr">endTime</span>: <span class="hljs-number">0</span>,
    <span class="hljs-attr">remark</span>: <span class="hljs-string">''</span>,
  });
};
</code></pre>
<p>ç¬¬äºŒä¸ªé—®é¢˜ç›¸æ¯”ä¹‹ä¸‹æ›´åŠ è‡´å‘½ï¼Œä½†è§£å†³èµ·æ¥åˆå¼‚å¸¸ç®€å•ã€‚rrweb çš„æœºåˆ¶å†³å®šäº†æˆ‘ä»¬åœ¨<strong>å¯¼å‡ºçš„æ—¶å€™å¿…å®šè¦æŸ¥è¯¢å‡ºç¬¬ä¸€äºŒå¸§</strong>ï¼Œæˆ‘ä»¬åœ¨è·å–æ—¥å¿—æ—¶éœ€è¦ç‰¹æ®Šå¤„ç†ï¼š</p>
<ol>
<li>è·å–ç”¨æˆ·æŒ‡å®šæ—¥æœŸèŒƒå›´å†…çš„æ—¥å¿—çš„ tabIdã€‚</li>
<li>åŸºäº tabId ç­›æŸ¥å‡ºæ‰€æœ‰æ—¥å¿—ï¼Œç­›æŸ¥å‡º &lt; endTime çš„æ‰€æœ‰æ—¥å¿—ã€‚</li>
</ol>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">async</span> <span class="hljs-title function_">getTabLogs</span>(<span class="hljs-params">{ tabId, end }: { tabId: string; end: number }</span>) {
    <span class="hljs-comment">// æ—¥å¿—è·å–é€»è¾‘</span>
}
</code></pre>
<p>(å¦‚ä½ æ‰€è§ï¼Œè·å–æ—¥å¿—é˜¶æ®µ start ç›´æ¥ gank æ²¡äº†ï¼‰</p>
<p>æ­¤å¤–ï¼Œç”±äºæŒç»­å­˜å‚¨ç‰¹æ€§ï¼Œè¯»å–æ—¥å¿—æ—¶ä¼šé¢ä¸´æ•°æ®é‡è¿‡å¤§çš„é—®é¢˜ã€‚ä¾‹å¦‚ï¼Œ8 åˆ†é’Ÿè¿ç»­æ“ä½œå¯¼å‡ºçš„æ—¥å¿—çº¦ 17MBï¼Œä¸€å°æ—¶çº¦ 120MBã€‚æŒ‰ç…§å¹³å‡æ¯å°æ—¶å½•åˆ¶æ•°æ®é‡ä¼°ç®—ï¼Œé™æ€æµè§ˆçº¦ 2 - 5MBï¼Œæ™®é€šäº¤äº’çº¦ 50MBï¼Œé«˜é¢‘äº¤äº’çº¦ 100MBã€‚ä»¥å•ä¸ªç”¨æˆ·æ¯æ—¥ä½¿ç”¨ 8 å°æ—¶è®¡ç®—ï¼Œå¹³å‡ç”¨æˆ·çº¦ 400MB / å¤©ï¼Œé‡åº¦ç”¨æˆ·çº¦ 800MB / å¤©ã€‚åŸºäº 14 å¤©ä¿ç•™ç­–ç•¥ï¼Œå•ç”¨æˆ·æœ€å¤§å­˜å‚¨ç©ºé—´çº¦ä¸º 12GBã€‚</p>
<p>è¿™æ„å‘³ç€å¦‚æœç”¨æˆ·é€‰æ‹©çš„æ—¶é—´èŒƒå›´è¾ƒå¤§ï¼Œä¼ ç»Ÿè¯»å–æµç¨‹å¯èƒ½è¯»å– 10GB+ æ—¥å¿—åˆ°å†…å­˜ï¼Œè¿™æ˜¾ç„¶ä¼šå¯¼è‡´æµè§ˆå™¨å†…å­˜æº¢å‡ºã€‚</p>
<p>ä¸ºé¿å…è¯»å–å¤§é‡æ—¥å¿—å¯¼è‡´æµè§ˆå™¨å†…å­˜æº¢å‡ºï¼Œæˆ‘ä»¬é‡‡ç”¨åˆ†ç‰‡å¼è¯»å–ã€‚æ ¸å¿ƒæ€æƒ³æ˜¯å°†æŒ‡å®š tab çš„æ—¥å¿—æ•°æ®æŒ‰éœ€ â€œåˆ†ç‰‡æå–â€ï¼Œé€šè¿‡å›è°ƒé€æ­¥ä¼ è¾“ç»™è°ƒç”¨æ–¹ï¼Œç¡®ä¿é«˜æ•ˆã€ç¨³å®šåœ°å¤„ç†å¤§ä½“ç§¯æ—¥å¿—çš„è¯»å–ä¸ä¼ è¾“ï¼š</p>
<ol>
<li>
<p><strong>è¯»å–å…ƒä¿¡æ¯ (<code>meta</code>)ï¼š</strong></p>
<ul>
<li>é€šè¿‡ <code>tabId</code> ä» <code>db.metas</code> è·å–å¯¹åº”æ—¥å¿—çš„å…ƒä¿¡æ¯ï¼ˆå¦‚æ—¥å¿—æ€»å¤§å°ï¼‰ã€‚</li>
</ul>
</li>
<li>
<p><strong>åˆ¤æ–­æ˜¯å¦éœ€è¦åˆ†ç‰‡ï¼š</strong></p>
<ul>
<li>å¦‚æœæ—¥å¿—æ€»å¤§å°å°äºé˜ˆå€¼ <code>MIN_SLICE_CHUNK_SIZE</code>ï¼Œ<strong>ä¸€æ¬¡æ€§è¯»å–æ‰€æœ‰æ—¥å¿—</strong>ï¼Œæ‹¼æ¥æˆå®Œæ•´ JSONï¼Œå†è°ƒç”¨ <code>callback</code> å‘é€ã€‚</li>
</ul>
</li>
<li>
<p><strong>å¤§æ–‡ä»¶åˆ†ç‰‡å¤„ç†é€»è¾‘ï¼š</strong></p>
<ul>
<li>æ ¹æ®æ—¥å¿—æ€»å¤§å°è®¡ç®—åˆé€‚çš„ <code>chunkSize</code>ï¼Œä»è€Œå†³å®šåˆ†ç‰‡æ•°é‡ <code>chunkCount</code>ã€‚</li>
<li>æ¯æ¬¡è¯»å–ä¸€éƒ¨åˆ†æ—¥å¿—æ•°æ®ï¼ˆå—é™äºè®¡ç®—å‡ºçš„ <code>limit</code>ï¼‰ï¼Œæ‹¼æ¥ä¸º JSON ç‰‡æ®µï¼Œé€šè¿‡ <code>callback</code> é€æ­¥ä¼ å‡ºã€‚</li>
<li>æ¯ç‰‡éƒ½ä½¿ç”¨ <code>Comlink.transfer()</code> è¿›è¡Œå†…å­˜é›¶æ‹·è´ä¼ è¾“ï¼Œæé«˜æ€§èƒ½ã€‚</li>
</ul>
</li>
<li>
<p><strong>åˆå¹¶ä¸è¡¥å…… meta ä¿¡æ¯ï¼š</strong></p>
<ul>
<li>å¦‚æœæ—¥å¿—æ•°æ®ä¸­æœ‰ <code>meta</code> ç±»å‹æ•°æ®ï¼ˆæºå¸¦ä¸€äº›å‹ç¼©ä¿¡æ¯ï¼‰ï¼Œåœ¨æœ€åä¸€ç‰‡ä¸­è¿›è¡Œå¤„ç†ä¸æ‹¼æ¥ï¼Œä¿æŒè¯­ä¹‰å®Œæ•´ã€‚</li>
</ul>
</li>
<li>
<p><strong>è¿›åº¦è¿½è¸ªä¸æ ‡è®°ï¼š</strong></p>
<ul>
<li>æ¯ä¸€ç‰‡ä¼ è¾“éƒ½é™„å¸¦ <code>progress</code> å’Œ <code>partNumber</code>ï¼Œä¾¿äºå‰ç«¯è¿½è¸ªå¤„ç†è¿›åº¦ã€‚</li>
</ul>
</li>
</ol>
<pre><code class="hljs language-js" lang="js">  <span class="hljs-keyword">async</span> <span class="hljs-title function_">getTabLogs</span>(<span class="hljs-params">
    {
      tabId,
      end,
    }: {
      tabId: string;
      end: number;
    },
    callback: (log: { content: <span class="hljs-built_in">Uint8Array</span>; progress: number; partNumber: number }) =&gt; <span class="hljs-keyword">void</span> | <span class="hljs-built_in">Promise</span>&lt;<span class="hljs-keyword">void</span>&gt;,
  </span>) {
  
    ...

    <span class="hljs-keyword">const</span> totalSize = meta.<span class="hljs-property">size</span> + <span class="hljs-variable constant_">BUFFER_SIZE</span>;
    <span class="hljs-comment">// æ ¹æ® totalSizeã€MAX_SLICE_CHUNKã€MIN_SLICE_CHUNK_SIZE è®¡ç®—å‡ºæœ€ä½³åˆ†ç‰‡å¤§å°</span>
    <span class="hljs-keyword">const</span> chunkSize = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(totalSize / <span class="hljs-variable constant_">MAX_SLICE_CHUNK</span>, <span class="hljs-variable constant_">MIN_SLICE_CHUNK_SIZE</span>), <span class="hljs-variable constant_">MIN_SLICE_CHUNK_SIZE</span>);

    <span class="hljs-keyword">const</span> chunkCount = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">ceil</span>(totalSize / chunkSize);

    <span class="hljs-keyword">let</span> offset = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">const</span> count = <span class="hljs-keyword">await</span> db.<span class="hljs-property">logs</span>
      .<span class="hljs-title function_">where</span>(<span class="hljs-string">'tabId'</span>)
      .<span class="hljs-title function_">equals</span>(tabId)
      .<span class="hljs-title function_">and</span>(<span class="hljs-function">(<span class="hljs-params">log</span>) =&gt;</span> log.<span class="hljs-property">timestamp</span> &lt;= end)
      .<span class="hljs-title function_">count</span>();

    <span class="hljs-keyword">const</span> limit = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(<span class="hljs-number">1</span>, <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">ceil</span>(count / chunkCount / <span class="hljs-number">3</span>));

    <span class="hljs-keyword">let</span> <span class="hljs-attr">metaData</span>: string | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;

    <span class="hljs-keyword">let</span> startTime = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">let</span> endTime = <span class="hljs-number">0</span>;

    <span class="hljs-keyword">let</span> preLogStr = <span class="hljs-string">''</span>;
    <span class="hljs-keyword">let</span> progressContentSize = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">let</span> partNumber = <span class="hljs-number">1</span>;
    <span class="hljs-keyword">while</span> (offset &lt;= count) {
      <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">const</span> logs = <span class="hljs-keyword">await</span> db.<span class="hljs-property">logs</span>
          .<span class="hljs-title function_">where</span>(<span class="hljs-string">'tabId'</span>)
          .<span class="hljs-title function_">equals</span>(tabId)
          .<span class="hljs-title function_">and</span>(<span class="hljs-function">(<span class="hljs-params">log</span>) =&gt;</span> log.<span class="hljs-property">timestamp</span> &lt;= end)
          .<span class="hljs-title function_">offset</span>(offset)
          .<span class="hljs-title function_">limit</span>(limit)
          .<span class="hljs-title function_">toArray</span>();

        <span class="hljs-keyword">let</span> baseStr = preLogStr;
        <span class="hljs-keyword">if</span> (offset &gt; <span class="hljs-number">0</span>) {
          baseStr += <span class="hljs-string">','</span>;
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (offset === <span class="hljs-number">0</span>) {
          baseStr += <span class="hljs-string">'['</span>;
        }

        endTime = logs?.[logs.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>]?.<span class="hljs-property">timestamp</span> ?? endTime;
        <span class="hljs-keyword">if</span> (offset === <span class="hljs-number">0</span>) {
          startTime = logs?.[<span class="hljs-number">0</span>].<span class="hljs-property">timestamp</span> ?? <span class="hljs-number">0</span>;
        }

        offset += logs.<span class="hljs-property">length</span>;

        <span class="hljs-keyword">const</span> logData = logs.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">log</span>) =&gt;</span> log.<span class="hljs-property">data</span>).<span class="hljs-title function_">filter</span>(<span class="hljs-function">(<span class="hljs-params">log</span>) =&gt;</span> log !== <span class="hljs-string">'"PERIOD_DIVIDE_IDENTIFIER"'</span>);
        ...

        <span class="hljs-keyword">const</span> logsStr = logData.<span class="hljs-title function_">join</span>(<span class="hljs-string">','</span>);
        baseStr += logsStr;

        <span class="hljs-keyword">if</span> (offset === count) {
          <span class="hljs-keyword">if</span> (!metaData) {
            <span class="hljs-keyword">await</span> <span class="hljs-title function_">callback</span>({
              <span class="hljs-attr">content</span>: <span class="hljs-title function_">transfer</span>(baseStr + <span class="hljs-string">']'</span>),
              <span class="hljs-attr">progress</span>: <span class="hljs-number">1</span>,
              partNumber,
            });
          } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">const</span> metaJson = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(metaData);
            <span class="hljs-keyword">const</span> parseMetaData = <span class="hljs-title function_">parseMinifiedData</span>(metaJson.<span class="hljs-property">data</span>);
            <span class="hljs-keyword">const</span> metaMinifyData = <span class="hljs-title function_">minifyData</span>({
              ...parseMetaData,
              startTime,
              endTime,
            });
            <span class="hljs-keyword">const</span> metaStr = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({
              <span class="hljs-attr">type</span>: <span class="hljs-string">'meta'</span>,
              <span class="hljs-attr">timestamp</span>: endTime,
              <span class="hljs-attr">data</span>: metaMinifyData,
            });
            <span class="hljs-keyword">await</span> <span class="hljs-title function_">callback</span>({
              <span class="hljs-attr">content</span>: <span class="hljs-title function_">transfer</span>(baseStr + <span class="hljs-string">','</span> + metaStr + <span class="hljs-string">']'</span>),
              <span class="hljs-attr">progress</span>: <span class="hljs-number">1</span>,
              partNumber,
            });
          }
          <span class="hljs-keyword">break</span>;
        }

        progressContentSize += baseStr.<span class="hljs-property">length</span>;
        <span class="hljs-keyword">const</span> progress = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(<span class="hljs-number">0.99</span>, progressContentSize / totalSize);

        <span class="hljs-comment">// å¦‚æœ size &lt; minSizeï¼Œé‚£ä¹ˆå°±ç»§ç»­è·å–</span>
        <span class="hljs-keyword">if</span> (baseStr.<span class="hljs-property">length</span> &lt; <span class="hljs-variable constant_">MIN_SLICE_CHUNK_SIZE</span>) {
          preLogStr = baseStr;
          <span class="hljs-keyword">continue</span>;
        }

        preLogStr = <span class="hljs-string">''</span>;
        <span class="hljs-keyword">await</span> <span class="hljs-title function_">callback</span>({
          <span class="hljs-attr">content</span>: <span class="hljs-title function_">transfer</span>(baseStr),
          progress,
          partNumber,
        });
        partNumber++;
      } <span class="hljs-keyword">catch</span> (error) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(error);
        <span class="hljs-keyword">break</span>;
      }
    }
  }
</code></pre>
<h2 data-id="heading-5">3 å·¥ä½œæµè®¾è®¡</h2>
<h3 data-id="heading-6">3.1 ğŸ‘¼Â åŸºç¡€å·¥ä½œæµ</h3>
<p>æˆ‘ä»¬å…¬å¸é‡‡ç”¨ intercom å’Œå¤–éƒ¨å®¢æˆ·æ²Ÿé€šï¼Œç”¨æˆ·å¯ä»¥åœ¨ç½‘é¡µå³ä¸‹è§’çš„ intercom iframe ä¸­å’Œå®¢æœæ²Ÿé€šã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cee973e407f54795801eaa43f0898416~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rqQ5b-D6ZSB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768833616&amp;x-signature=HboEK%2FjsIHf4DGdc19JYK0KNKF0%3D" alt="image.png" loading="lazy"/></p>
<p>æ‰€ä»¥ï¼Œå¦‚æœæœ‰åŠæ³•å°†æ•´ä¸ªæ—¥å¿—æµç¨‹åˆå¹¶åˆ°ç›®å‰çš„ intercom æµç¨‹ä¸­ï¼Œä¸ä»…è´´åˆç›®å‰çš„ä¸šåŠ¡æƒ…å†µï¼Œè€Œä¸”ä¸æ”¹å˜ç”¨æˆ·ä¹ æƒ¯ã€‚</p>
<p>é€šè¿‡è°ƒç ”ï¼Œå¯ä»¥ç¡®å®šä»¥ä¸‹æ–¹æ¡ˆï¼š</p>
<ol>
<li>CS ä¾§é…ç½®é»˜è®¤æ—¶é—´èŒƒå›´ï¼Œéœ€è¦ <code>POST /configure-card</code> è¿›è¡Œè¡¨å•å¡«å†™ï¼Œå¡«å†™åè¡¨å•ä¼šåœ¨ä¸‹ä¸€æ­¥è¢«æºå¸¦åˆ° payload ä¸­ã€‚</li>
<li>CS ä¾§åœ¨å‘é€æ—¶ï¼Œä¼š <code>POST /initialize</code>æ¥å£ï¼ˆç”±è‡ªæœ‰åç«¯æä¾›ï¼‰ï¼Œæ¥å£éœ€è¿”å› canvas json æ•°æ®ã€‚å¦‚ï¼š</li>
</ol>

<pre><code class="hljs language-css" lang="css">{
  <span class="hljs-selector-tag">canvas</span>: {
    <span class="hljs-attribute">content</span>: {
      components: [
        {
          type: <span class="hljs-string">"text"</span>,
          text: <span class="hljs-string">"*Log Submission*"</span>,
          style: <span class="hljs-string">"header"</span>,
        },
        {
          type: <span class="hljs-string">"button"</span>,
          label: <span class="hljs-string">"Select logs"</span>,
          style: <span class="hljs-string">"primary"</span>,
          id: <span class="hljs-string">"submit_button"</span>,
          action: {
            type: <span class="hljs-string">"sheet"</span>,
            url: <span class="hljs-string">"xxxxxx"</span>,
          },
        },
      ],
    },
  },
}
</code></pre>
<ol>
<li>å‘é€åï¼Œç”¨æˆ·ç‚¹å‡» sheet æŒ‰é’®å¯ä»¥è·³è½¬åˆ°å‰ç«¯ï¼Œä½†éœ€æ³¨æ„ï¼Œè¯¥è¯·æ±‚ä¸º POST è¯·æ±‚ã€‚</li>
<li>ç”¨æˆ·å¡«å†™å®Œè¡¨å•ï¼Œæäº¤æ—¶å¯ä»¥ç›´æ¥è¯·æ±‚åç«¯æ¥å£ï¼Œä¹Ÿå¯ä»¥ç”± intercom æœåŠ¡ç«¯å‘åç«¯å‘èµ· POST è¯·æ±‚ã€‚</li>
<li>å¦‚æœŸæœ›åœ¨æäº¤åä¿®æ”¹æ¶ˆæ¯çŠ¶æ€ï¼Œåˆ™å¿…é¡»åœ¨ä¸Šä¸€æ­¥æ‰§è¡Œã€ç”± intercom æœåŠ¡ç«¯å‘åç«¯å‘èµ· POST è¯·æ±‚ã€‘ï¼ˆæ¨èï¼Œæœ€å®Œæ•´çš„ flowï¼‰ï¼Œæ­¤æ—¶åç«¯éœ€è¿”å› canvas jsonï¼Œåç«¯åŒæ­¥è§¦å‘é€»è¾‘ï¼Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fdevelopers.intercom.com%2Fdocs%2Freferences%2Frest-api%2Fapi.intercom.io%2Fconversations%2Freplyconversation" target="_blank" title="https://developers.intercom.com/docs/references/rest-api/api.intercom.io/conversations/replyconversation" ref="nofollow noopener noreferrer">æ·»åŠ  note</a> åˆ° intercom é¡µé¢ï¼Œæ–¹ä¾¿ CS åˆ›å»º jira å•æ—¶æºå¸¦å¤ç°é“¾æ¥</li>
</ol>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/661ea340d8664b5fa4209d995b038eb0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rqQ5b-D6ZSB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768833616&amp;x-signature=U0%2F%2Fd3dEuZaxb2Wy4W%2FWX3RJFgk%3D" alt="Editor _ Mermaid Chart-2025-05-09-062511.png" loading="lazy"/></p>
<h3 data-id="heading-7">3.2 âš ï¸Â å¢å¼ºå·¥ä½œæµ</h3>
<p>åœ¨æˆ‘ä»¬ä¸Šè¿° flow ä¸­ï¼Œéœ€è¦è·å–ç”¨æˆ·æˆæƒï¼Œç”±ç”¨æˆ·æ“ä½œè§¦å‘ä¸‹è½½å’Œä¸Šä¼ æ—¥å¿—çš„è¿‡ç¨‹ï¼Œä½†å®é™…ä¸Šæœ‰æ¯”è¾ƒåˆ‘çš„æ–¹æ¡ˆã€‚</p>
<p>å…·ä½“ flow å¦‚å›¾ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/109f820a89ac4ff6b6272d4ae7414cff~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rqQ5b-D6ZSB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768833616&amp;x-signature=UN%2BazNAKum72UtEOv8tX1EhUYeo%3D" alt="image.png" loading="lazy"/></p>
<p>è¯¥æ–¹æ¡ˆçš„æ•´ä½“ä¼˜åŠ¿æ˜¯ï¼š</p>
<ol>
<li>æ— éœ€ CS ä»‹å…¥ï¼Œæ— éœ€ä¿®æ”¹ CS æµç¨‹ã€‚</li>
<li>ç”¨æˆ·å¯¹æ—¥å¿—ä¸Šä¼ æ„ŸçŸ¥åŠ›åº¦å°</li>
</ol>
<p>æ¢å¥è¯è¯´ï¼Œéšç§åˆè§„é£é™©è¾ƒå¤§ã€‚</p>
<h2 data-id="heading-8">4 å·¥ä½œæµæŠ€æœ¯è¦ç‚¹</h2>
<h3 data-id="heading-9">4.1 ğŸ˜ˆÂ iframe å®ç°</h3>
<p>Iframe æŒ‡çš„æ˜¯ ã€æ—¥å¿—ä¸Šä¼  iframeã€‘ï¼Œå¯¹åº”è¿™ä¸€æ­¥éª¤ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7a33648607234838a058d09fddab406f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rqQ5b-D6ZSB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768833616&amp;x-signature=m6eWgZbk7NaDs8K5lKNNyt4Bw2I%3D" alt="image.png" loading="lazy"/></p>
<p>ç”±äº intercom å°†åŸºäº POST è¯·æ±‚å»è°ƒç”¨æœåŠ¡å¸Œæœ›å¾—åˆ° html çš„é™åˆ¶ï¼Œè¿™é‡Œå­˜åœ¨ä¸¤ä¸ªé—®é¢˜ï¼š</p>
<ol>
<li>Intercom ä½¿ç”¨ POST è¯·æ±‚ï¼Œåˆ™æˆ‘ä»¬çš„æœåŠ¡éœ€è¦æ”¯æŒ POST è¯·æ±‚è¿”å› htmlï¼Œç›®å‰æ˜¯ä¸æ”¯æŒçš„ï¼Œæ‰€ä»¥éœ€è¦è§£å†³æ–¹æ¡ˆã€‚</li>
<li>ç”±äºæˆ‘ä»¬çš„ iframe ç½‘é¡µè¦è¯»å–æ—¥å¿—ï¼Œé‚£ä¹ˆ iframe åœ°å€å¿…é¡»å’Œ Web ç«¯åŒæºï¼Œä½†ç”Ÿäº§çš„ API åœ°å€å’Œ Web ç«¯ä¸åŒæºã€‚</li>
</ol>
<p>åŸºæœ¬æ–¹å‘ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡åå‘ä»£ç†çš„æ–¹å¼å®ç°ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3ccd2e258f3b44dab8ff3a4fe6f8e267~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rqQ5b-D6ZSB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768833616&amp;x-signature=J8Ga%2FBxq%2FsjM1GI%2BnMYPBpgTkNo%3D" alt="image.png" loading="lazy"/></p>
<p>ä½† <code>iframe</code> çš„åŒæºé™åˆ¶æ¯”é¢„æƒ³çš„è¿˜è¦éº»çƒ¦ä¸€äº›ï¼Œç”±äº <code>intercom</code> çš„æ¥å…¥æ–¹å¼æ˜¯ <code>iframe</code> åµŒå¥—ï¼Œç±»ä¼¼äºï¼š<code>A(&lt;https://samesite.com/&gt;)-&gt;B(&lt;https://xxxx.com/&gt;)-&gt;A(&lt;https://samesite.com&gt;)</code> ã€‚</p>
<p>è¿™ä¸ªè¿‡ç¨‹ä¼šå¯¼è‡´ä¸¤ä¸ªè·¨åŸŸé™åˆ¶ï¼š</p>
<ol>
<li>Cookie çš„è·¨åŸŸé™åˆ¶ï¼Œå…·ä½“è¡¨ç°ä¸ºç”¨äºç™»å½•æ€çš„ Cookie ç”±äºæœªæ˜¾å¼è®¾ç½® <code>Samesite: None</code> ï¼Œæ— æ³•è¢«æºå¸¦è¿›å†…å±‚ç½‘é¡µï¼Œè¿›è€Œä¸¢å¤±ç™»å½•æ€ã€‚</li>
<li>indexedDB çš„è·¨åŸŸé™åˆ¶ï¼Œç”±äºä¸­é—´å¤šäº†ä¸€å±‚å¤–åŸŸï¼Œæµè§ˆå™¨é™åˆ¶äº†æœ€é‡Œè¾¹çš„ç½‘é¡µè¯»å– indexedDBï¼Œå…·ä½“è¡¨ç°ä¸ºè¯»å–åˆ°çš„æ•°æ®ä¸ºğŸˆ³ã€‚</li>
</ol>
<p>Cookie çš„è·¨åŸŸé™åˆ¶é€šè¿‡æ˜¾å¼è®¾ç½® Samesite å¯ä»¥è§£å†³ï¼Œä½†è¿›ä¸€æ­¥åœ°ï¼Œä¸ºäº†ç¡®ä¿å®‰å…¨æ€§ï¼Œæˆ‘ä»¬éœ€è¦ç»™ç½‘é¡µå…¶ä»–è·¯å¾„æ·»åŠ <code>X-Frame-Options SAMEORIGIN;</code> é˜²æ­¢å¤–åŸŸåµŒå¥—æˆ‘ä»¬çš„å…¶ä»–ç½‘é¡µã€‚</p>
<p>åè€…å¡äº†ä¸€é˜µå­ï¼Œæœ€åçš„è§£å†³æ€è·¯æ˜¯é€šè¿‡ <code>postMessage</code> é€šä¿¡çš„æ–¹å¼å˜ç›¸è¯»å–â€”â€”åæ­£èƒ½è¯»å–åˆ°å°±è¡Œã€‚</p>
<pre><code class="hljs language-js" lang="js">  <span class="hljs-variable language_">window</span>.<span class="hljs-property">top</span>.<span class="hljs-title function_">postMessage</span>(
    {
      <span class="hljs-attr">type</span>: <span class="hljs-string">'uploadLogs'</span>,
      <span class="hljs-attr">id</span>: topUUID,
      <span class="hljs-attr">params</span>: {
        start,
        end,
      },
    },
    <span class="hljs-string">'*'</span>,
  );
</code></pre>
<p>ï¼ˆæœ‰è¶£çš„æ˜¯ï¼Œæ’æŸ¥è¿‡ç¨‹ä¸­å‘ç°äº† chrome devtools çš„ç¼ºé™·ï¼Œdevtools é‡Œçš„ document éƒ½æŒ‡ä¸åˆ°æœ€å¤–å±‚ï¼Œä½†æ˜¯å®é™…ä¸Š window.top å’Œ window.parent.parent.parent éƒ½æ˜¯æœ€å¤–å±‚ï¼Œå…·ä½“ä¸ç»†è¯´äº†ï¼‰</p>
<h3 data-id="heading-10">4.2 ğŸ¥¹Â æ—¥å¿—å®‰å…¨ä¸ä¸Šä¼ </h3>
<p>æ—¥å¿—çš„æ ¼å¼æ˜¯ JSON æ ¼å¼ï¼Œå°†å…¶æ‹–æ‹½åˆ° ospy ä¸­å³å¯å¤åŸç”¨æˆ·æµè§ˆå™¨æ“ä½œè®°å½•ï¼Œä¸€æ—¦æ³„æ¼ä¼šæœ‰æé«˜çš„å®‰å…¨é£é™©ã€‚åœ¨æ­¤ï¼Œæå‡ºåŠ å¯†æ–¹æ¡ˆç”¨äºè§£å†³è¯¥é—®é¢˜ã€‚</p>
<p>æ€è·¯å…¶å®å¾ˆç®€å•ï¼šåœ¨æ–‡ä»¶ä¸Šä¼ å‰å¯¹æ–‡ä»¶å†…å®¹è¿›è¡Œ AES åŠ å¯†ï¼Œå¯¹ AES å¯†é’¥åš RSA éå¯¹ç§°åŠ å¯†ï¼Œé€šè¿‡å…¬é’¥åŠ å¯†ï¼Œç„¶åå°†åŠ å¯†åçš„å¯†é’¥é™„åŠ åˆ°æ–‡ä»¶å°¾ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bbf1073cddd943c8b7a821a81ce64f4e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rqQ5b-D6ZSB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768833616&amp;x-signature=9aq4gqzHbzds5i3qql%2FAOwGOb34%3D" alt="image.png" loading="lazy"/></p>
<p>å…¶å®è¿˜å¯ä»¥è¿›ä¸€æ­¥ï¼Œæˆ‘ä»¬åœ¨å†™å…¥æ—¥å¿—çš„æ—¶å€™å°±åŠ å¯†ï¼Œä½†è¿™æ ·è¯»å–çš„æ—¶å€™å‹åŠ›ä¼šæ¯”è¾ƒå¤§ï¼Œå› ä¸ºæ—¥å¿—æ˜¯ä¸€æ®µä¸€æ®µçš„ï¼Œæˆ–è®¸æˆ‘ä»¬è¿˜éœ€è¦å®šåˆ¶åˆ†éš”ç¬¦ã€‚</p>
<h2 data-id="heading-11">5 æ€»ç»“</h2>
<p>å¥½ï¼Œé‚£ä¹ˆç†æ‰€å½“ç„¶çš„ï¼Œæˆ‘ä»¬åº”è¯¥ä¸ä¼šé‡åˆ°å…¶ä»–å¡ç‚¹å¡ï¼Œæ–¹æ¡ˆè½åœ°åº”è¯¥æ˜¯æ²¡é—®é¢˜äº†ã€‚ä½†â€”â€”</p>
<p>Leader: â€œæœ‰ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬æ²¡æœ‰åˆ†ç‰‡ä¸Šä¼ â€</p>
<p>æˆ‘ï¼š â€Woc? åˆè¦è‡ªå·±å†™ï¼Ÿâ€</p>
<p>æ¬²çŸ¥åäº‹å¦‚ä½•ï¼Œä¸”å¬ä¸‹å›åˆ†è§£ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[GDAL å®ç°æŠ•å½±è½¬æ¢]]></title>    <link>https://juejin.cn/post/7594350054090653738</link>    <guid>https://juejin.cn/post/7594350054090653738</guid>    <pubDate>2026-01-12T14:40:11.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594350054090653738" data-draft-id="7594322573452329003" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="GDAL å®ç°æŠ•å½±è½¬æ¢"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-12T14:40:11.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="GISä¹‹è·¯"/> <meta itemprop="url" content="https://juejin.cn/user/4346787284915481"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            GDAL å®ç°æŠ•å½±è½¬æ¢
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4346787284915481/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    GISä¹‹è·¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-12T14:40:11.000Z" title="Mon Jan 12 2026 14:40:11 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">^Â å…³æ³¨æˆ‘ï¼Œå¸¦ä½ ä¸€èµ·å­¦GISÂ ^</h2>
<h2 data-id="heading-1">å‰è¨€</h2>
<blockquote>
<p>â</p>
<p>åœ¨GISå¼€å‘ä¸­ï¼Œå¯¹äºæ•°æ®æºé¦–å…ˆè¦ç¡®å®šçš„ç¬¬ä¸€ä»¶äº‹å°±æ˜¯åæ ‡ç³»ç»Ÿï¼Œè¿™å°±æ¶‰åŠåˆ°åæ ‡è½¬æ¢å¤„ç†é—®é¢˜ã€‚è€Œç»å¸¸é‡åˆ°çš„ä¾¿æ˜¯<code>Shapefile</code>æ•°æ®çš„æŠ•å½±è½¬æ¢ï¼Œå¦‚ä½•é«˜æ•ˆã€å‡†ç¡®çš„å°†æºæ•°æ®åæ ‡ç³»è½¬æ¢åˆ°ç›®æ ‡åæ ‡ç³»æ˜¯æˆ‘ä»¬éœ€è¦ç ”ç©¶è§£å†³çš„é—®é¢˜ã€‚</p>
</blockquote>
<p>åœ¨ä¹‹å‰çš„æ–‡ç« ä¸­è®²äº†å¦‚ä½•ä½¿ç”¨<code>GDAL</code>æˆ–è€…<code>ogr2ogr</code>å·¥å…·å°†<code>txt</code>ä»¥åŠ<code>csv</code>æ–‡æœ¬æ•°æ®è½¬æ¢ä¸º<code>Shp</code>æ ¼å¼ï¼Œæœ¬ç¯‡æ•™ç¨‹åœ¨ä¹‹å‰ä¸€ç³»åˆ—æ–‡ç« çš„åŸºç¡€ä¸Šè®²è§£å¦‚ä½•ä½¿ç”¨<strong>GDAL å®ç°æŠ•å½±è½¬æ¢</strong>ã€‚</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FQtb_BJw91nKrFMeoa7WcxA" target="_blank" title="https://mp.weixin.qq.com/s/Qtb_BJw91nKrFMeoa7WcxA" ref="nofollow noopener noreferrer">GDAL ç®€ä»‹</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FFLWfZItLj24JYicQEX-PbQ" target="_blank" title="https://mp.weixin.qq.com/s/FLWfZItLj24JYicQEX-PbQ" ref="nofollow noopener noreferrer">GDAL ä¸‹è½½å®‰è£…</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2Fu0539e3CM2q4Y3MbMxxZKQ" target="_blank" title="https://mp.weixin.qq.com/s/u0539e3CM2q4Y3MbMxxZKQ" ref="nofollow noopener noreferrer">GDAL å¼€å‘èµ·æ­¥</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2F0DGoC0oFHizJbweBnEvI-g" target="_blank" title="https://mp.weixin.qq.com/s/0DGoC0oFHizJbweBnEvI-g" ref="nofollow noopener noreferrer">GDAL å®ç° GIS æ•°æ®è¯»å–è½¬æ¢ï¼ˆå…¨ï¼‰</a></li>
</ul>
<p>å¦‚æœä½ è¿˜æ²¡æœ‰çœ‹è¿‡ï¼Œå»ºè®®ä»ä»¥ä¸Šå†…å®¹å¼€å§‹ã€‚</p>
<h2 data-id="heading-2">1. å¼€å‘ç¯å¢ƒ</h2>
<p>æœ¬æ–‡ä½¿ç”¨å¦‚ä¸‹å¼€å‘ç¯å¢ƒï¼Œä»¥ä¾›å‚è€ƒã€‚</p>
<p>æ—¶é—´ï¼š<code>2025å¹´</code></p>
<p>ç³»ç»Ÿï¼š<code>Windows 11</code></p>
<p>Pythonï¼š<code>3.11.7</code></p>
<p>GDALï¼š<code>3.11.1</code></p>
<h2 data-id="heading-3">2. æ•°æ®å‡†å¤‡</h2>
<p>å¦‚ä¸‹æ˜¯æœ¬æ–‡é€‰å–çš„å…¨å›½çœçº§è¡Œæ”¿åŒºShpæ•°æ®ï¼ˆæ•°æ®åæ ‡ç³»ä¸º4326ï¼‰ï¼š<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c3db59d808d441d4b63e49935fad420f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768833611&amp;x-signature=3YgVYK5mfHwCK38T2wr1exQlw7c%3D" alt="" loading="lazy"/></p>
<p>éƒ¨åˆ†æ™¯ç‚¹æ•°æ®ï¼š<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/159cf310149c4912859a713f9e60a909~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768833611&amp;x-signature=mah%2F5xtNupRAbyQxE9dknOnVDtY%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-4">3. æŠ•å½±å½¢å¼</h2>
<p>å‚è€ƒç½‘ç«™ï¼š<code>https://epsg.io/4490</code><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2644c0b98a7a461d9b07eb8a532460c8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768833611&amp;x-signature=rijPkdPYJwN3WB1mUI%2FhYVItsVk%3D" alt="" loading="lazy"/></p>
<p>åæ ‡å®šä¹‰ä¿¡æ¯å…·æœ‰å¤šç§æ ¼å¼ï¼Œå¯ä»¥é€‰æ‹©ç¬¦åˆé€šç”¨æ ‡å‡†çš„OGCæ ¼å¼ï¼Œä¸‹é¢ä»¥EPSGç¼–ç 4490ï¼Œå³CGCS2000åæ ‡ç³»ä¸ºä¾‹è¿›è¡Œå±•ç¤ºã€‚</p>
<ul>
<li><strong>OGC WKT</strong></li>
</ul>

<pre><code class="hljs language-css" lang="css">GEOGCS<span class="hljs-selector-attr">[<span class="hljs-string">"China Geodetic Coordinate System 2000"</span>,Â  Â  DATUM[<span class="hljs-string">"China_2000"</span>,Â  Â  Â  Â  SPHEROID[<span class="hljs-string">"CGCS2000"</span>,6378137,298.257222101,Â  Â  Â  Â  Â  Â  AUTHORITY[<span class="hljs-string">"EPSG"</span>,<span class="hljs-string">"1024"</span>]</span>],
Â  Â  Â  Â  AUTHORITY<span class="hljs-selector-attr">[<span class="hljs-string">"EPSG"</span>,<span class="hljs-string">"1043"</span>]</span>],
Â  Â  PRIMEM<span class="hljs-selector-attr">[<span class="hljs-string">"Greenwich"</span>,0,Â  Â  Â  Â  AUTHORITY[<span class="hljs-string">"EPSG"</span>,<span class="hljs-string">"8901"</span>]</span>],
Â  Â  UNIT<span class="hljs-selector-attr">[<span class="hljs-string">"degree"</span>,0.0174532925199433,Â  Â  Â  Â  AUTHORITY[<span class="hljs-string">"EPSG"</span>,<span class="hljs-string">"9122"</span>]</span>],
Â  Â  AUTHORITY<span class="hljs-selector-attr">[<span class="hljs-string">"EPSG"</span>,<span class="hljs-string">"4490"</span>]</span>]
</code></pre>
<ul>
<li><strong>ESRI WKT</strong></li>
</ul>

<pre><code class="hljs language-css" lang="css">GEOGCS<span class="hljs-selector-attr">[<span class="hljs-string">"GCS_China_Geodetic_Coordinate_System_2000"</span>,Â  Â  DATUM[<span class="hljs-string">"D_China_2000"</span>,Â  Â  Â  Â  SPHEROID[<span class="hljs-string">"CGCS2000"</span>,6378137.0,298.257222101]</span>],
Â  Â  PRIMEM<span class="hljs-selector-attr">[<span class="hljs-string">"Greenwich"</span>,0.0]</span>,
Â  Â  UNIT<span class="hljs-selector-attr">[<span class="hljs-string">"Degree"</span>,0.0174532925199433]</span>]
</code></pre>
<ul>
<li><strong>PROJ.4</strong></li>
</ul>

<pre><code class="hljs language-ini" lang="ini">+<span class="hljs-attr">proj</span>=longlat +ellps=GRS80 +no_defs +type=crs
</code></pre>
<ul>
<li><strong>Proj4js</strong></li>
</ul>

<pre><code class="hljs language-arduino" lang="arduino">proj4.<span class="hljs-built_in">defs</span>(<span class="hljs-string">"EPSG:4490"</span>,<span class="hljs-string">"+proj=longlat +ellps=GRS80 +no_defs +type=crs"</span>);
</code></pre>
<ul>
<li><strong>GeoServer</strong></li>
</ul>

<pre><code class="hljs language-css" lang="css"><span class="hljs-number">4490</span>=GEOGCS<span class="hljs-selector-attr">[<span class="hljs-string">"China Geodetic Coordinate System 2000"</span>,DATUM[<span class="hljs-string">"China_2000"</span>,SPHEROID[<span class="hljs-string">"CGCS2000"</span>,6378137,298.257222101,AUTHORITY[<span class="hljs-string">"EPSG"</span>,<span class="hljs-string">"1024"</span>]</span>],AUTHORITY<span class="hljs-selector-attr">[<span class="hljs-string">"EPSG"</span>,<span class="hljs-string">"1043"</span>]</span>],PRIMEM<span class="hljs-selector-attr">[<span class="hljs-string">"Greenwich"</span>,0,AUTHORITY[<span class="hljs-string">"EPSG"</span>,<span class="hljs-string">"8901"</span>]</span>],UNIT<span class="hljs-selector-attr">[<span class="hljs-string">"degree"</span>,0.0174532925199433,AUTHORITY[<span class="hljs-string">"EPSG"</span>,<span class="hljs-string">"9122"</span>]</span>],AUTHORITY<span class="hljs-selector-attr">[<span class="hljs-string">"EPSG"</span>,<span class="hljs-string">"4490"</span>]</span>]
</code></pre>
<h2 data-id="heading-5">4. è·å–å›¾å±‚åæ ‡ç³»ç»Ÿ</h2>
<p>ä½¿ç”¨<code>GetSpatialRef</code>æ–¹æ³•å¯ä»¥è·å–å›¾å±‚åæ ‡å‚è€ƒï¼Œè‹¥å›¾å±‚ç¼ºå°‘æŠ•å½±ä¿¡æ¯ï¼Œåˆ™è¿”å›<code>None</code>ã€‚<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8b22c50c01f348cbafe6b22e4cd6bcb0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768833611&amp;x-signature=jT4avuNsVgOdlRinn0P8zkER7SY%3D" alt="" loading="lazy"/></p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># è·å–å›¾å±‚åŠåæ ‡ç³»ç»Ÿ</span>
<span class="hljs-attr">sourceLayer</span> = shpDs.GetLayer(<span class="hljs-number">0</span>)
<span class="hljs-attr">geomType</span> = sourceLayer.GetGeomType()
<span class="hljs-attr">sourceSrs</span> = sourceLayer.GetSpatialRef()
</code></pre>
<p>ä¹Ÿå¯ä»¥ä½¿ç”¨<code>Geometry</code>å¯¹è±¡æ–¹æ³•<code>GetSpatialReference</code>è·å–ã€‚<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2dc44f4562fe45aaa2f7b251c698d3d5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768833611&amp;x-signature=kKuGIB43IsCC6oo%2F4ko2Bz0BTC8%3D" alt="" loading="lazy"/></p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># è·å–åæ ‡ç³»ç»Ÿ</span>
<span class="hljs-attr">geom</span> = feature.GetGeometryRef()
<span class="hljs-attr">sourceSrs</span> = geom.GetSpatialReference()
</code></pre>
<h2 data-id="heading-6">5. å›¾å±‚æŠ•å½±è½¬æ¢</h2>
<h3 data-id="heading-7">5.1. å¯¼å…¥ä¾èµ–</h3>
<p><code>Shp</code>ä½œä¸ºä¸€ç§çŸ¢é‡æ•°æ®æ ¼å¼ï¼Œå¯ä»¥ä½¿ç”¨çŸ¢é‡åº“<code>OGR</code>è¿›è¡Œå¤„ç†ï¼Œç”¨äºæ‰“å¼€æ•°æ®æºå’Œè·å–å›¾å±‚ã€‚è¿˜éœ€è¦å¼•å…¥<code>osr</code>æ¨¡å—ç”¨äºåæ ‡å®šä¹‰ä»¥åŠ<code>os</code>æ¨¡å—ç”¨äºåˆ¤æ–­æ–‡ä»¶æ•°æ®è·¯å¾„ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">from</span> osgeo <span class="hljs-keyword">import</span> ogr,osr
<span class="hljs-keyword">import</span> os
</code></pre>
<h3 data-id="heading-8">5.2. è·å–æ•°æ®</h3>
<p>å®šä¹‰ä¸€ä¸ªæ–¹æ³•<code>LayerProject</code>ç”¨äºå›¾å±‚æŠ•å½±è½¬æ¢ï¼Œè¯¥æ–¹æ³•æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œä¸€ä¸ªæºæ•°æ®æ–‡ä»¶è·¯å¾„<code>sourcePath</code>ï¼Œä¸€ä¸ªæŠ•å½±è½¬æ¢æ–‡ä»¶æ•°æ®è·¯å¾„<code>projectPath</code>ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-string">"""
è¯´æ˜ï¼šGDAL æŠ•å½±è½¬æ¢
å‚æ•°ï¼š
Â  Â  -sourcePathï¼šæºæ–‡ä»¶Shpæ•°æ®è·¯å¾„
Â  Â  -projectPathï¼šæŠ•å½±è½¬æ¢å›¾å±‚æ•°æ®è·¯å¾„
"""</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">LayerProject</span>(<span class="hljs-params">sourcePath,projectPath</span>):
</code></pre>
<p>æŒ‰ç…§è€è§„çŸ©æ·»åŠ æ•°æ®é©±åŠ¨ï¼Œä½¿ç”¨<code>checkFilePath</code>æ–¹æ³•æ£€æŸ¥æ–‡ä»¶è·¯å¾„æ˜¯å¦å­˜åœ¨ï¼Œä½¿ç”¨<code>checkDriver</code>åˆ¤æ–­æ•°æ®é©±åŠ¨æ˜¯å¦æ­£å¸¸ï¼Œä¹‹åè·å–å›¾å±‚åŠåæ ‡ç³»ç»Ÿã€‚</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨</span>
checkFilePath(sourcePath)
checkFilePath(projectPath)

<span class="hljs-comment"># è·å–æ•°æ®é©±åŠ¨</span>
<span class="hljs-attr">shpDriver</span> = ogr.GetDriverByName(<span class="hljs-string">"ESRI Shapefile"</span>)

<span class="hljs-comment"># æ£€æŸ¥æ•°æ®é©±åŠ¨æ˜¯å¦æ­£å¸¸</span>
checkDriver(shpDriver)

<span class="hljs-comment"># è·å–æ•°æ®æº</span>
<span class="hljs-attr">shpDs</span> = shpDriver.Open(sourcePath)

<span class="hljs-comment"># è·å–æºå›¾å±‚åŠåæ ‡ä¿¡æ¯</span>
<span class="hljs-attr">sourceLayer</span> = shpDs.GetLayer(<span class="hljs-number">0</span>)
<span class="hljs-attr">geomType</span> = sourceLayer.GetGeomType()
<span class="hljs-attr">sourceSrs</span> = sourceLayer.GetSpatialRef()

<span class="hljs-comment"># è·å–æºæ•°æ®ç»“æ„</span>
<span class="hljs-attr">featureDefn</span> = sourceLayer.GetLayerDefn()
<span class="hljs-attr">fieldCount</span> = featureDefn.GetFieldCount()
</code></pre>
<p>æ–‡ä»¶å’Œæ•°æ®é©±åŠ¨æ£€æŸ¥æ–¹æ³•å®šä¹‰å¦‚ä¸‹ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-string">"""
è¯´æ˜ï¼šæ£€æŸ¥æ–‡ä»¶è·¯å¾„æ˜¯å¦æ­£å¸¸
å‚æ•°ï¼š
Â  Â  -filePathï¼šæ–‡ä»¶æ•°æ®è·¯å¾„
"""</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">checkFilePath</span>(<span class="hljs-params">filePath</span>):
Â  Â Â <span class="hljs-keyword">if</span>Â os.path.exists(filePath):
Â  Â  Â  Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"<span class="hljs-subst">{filePath}</span> æ–‡ä»¶æ•°æ®è·¯å¾„å­˜åœ¨"</span>)
Â  Â Â <span class="hljs-keyword">else</span>:
Â  Â  Â  Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"<span class="hljs-subst">{filePath}</span> æ–‡ä»¶æ•°æ®è·¯å¾„ä¸å­˜åœ¨ï¼Œè¯·æ£€æŸ¥ï¼"</span>)

<span class="hljs-string">"""
è¯´æ˜ï¼šæ£€æŸ¥æ•°æ®é©±åŠ¨æ˜¯å¦æ­£å¸¸
"""</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">checkDriver</span>(<span class="hljs-params">driver</span>):
Â  Â Â <span class="hljs-keyword">if</span>Â driver <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>:
Â  Â  Â  Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"æ•°æ®é©±åŠ¨ä¸å¯ç”¨"</span>)
Â  Â  Â  Â Â <span class="hljs-keyword">return</span>Â <span class="hljs-literal">False</span>
</code></pre>
<h3 data-id="heading-9">5.3. åˆ›å»ºæŠ•å½±</h3>
<p>ä½¿ç”¨<code>osr.SpatialReference()</code>åˆ›å»ºç©ºé—´å‚è€ƒï¼Œç„¶åå°†æŠ•å½±ä¿¡æ¯å¯¼å…¥åˆ°åæ ‡ç³»ç»Ÿã€‚å¯ä»¥ä½¿ç”¨å¦‚ä¸‹å¤šç§æ–¹æ³•ï¼š</p>
<pre><code class="hljs language-objectivec" lang="objectivec">- ImportFromEPSG(SpatialReference <span class="hljs-keyword">self</span>, <span class="hljs-type">int</span> arg)
- ImportFromESRI(SpatialReference <span class="hljs-keyword">self</span>, <span class="hljs-type">char</span> ** ppszInput)
- ImportFromProj4(SpatialReference <span class="hljs-keyword">self</span>, <span class="hljs-type">char</span> * ppszInput)
- ImportFromUSGS(SpatialReference <span class="hljs-keyword">self</span>, <span class="hljs-type">long</span> proj_code, <span class="hljs-type">long</span> zone=<span class="hljs-number">0</span>, <span class="hljs-type">double</span> [<span class="hljs-number">15</span>] argin=<span class="hljs-number">0</span>, <span class="hljs-type">long</span> datum_code=<span class="hljs-number">0</span>)
- ImportFromWkt(SpatialReference <span class="hljs-keyword">self</span>, <span class="hljs-type">char</span> ** ppszInput)
</code></pre>
<p>å…¶ä¸­ä¸ªäººè§‰å¾—æœ€ç®€å•æ–¹ä¾¿çš„è¿˜æ˜¯<code>ImportFromEPSG</code>æ–¹æ³•ã€‚<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9f41b145bf0b43aaa384aa0f53b67fa9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768833611&amp;x-signature=2SsPXGhgjFF%2FXMG4weUmHxa5ukc%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f99ff6461a2c4483b596b48ca6b17f50~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768833611&amp;x-signature=DLhlqUjqbDGMykEqMO96eIJmShU%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-10">5.4. åˆ›å»ºæŠ•å½±å›¾å±‚</h3>
<p>ä½¿ç”¨<code>CreateDataSource</code>æ–¹æ³•åˆ›å»ºæŠ•å½±æ•°æ®æºå’Œå›¾å±‚ï¼Œå¹¶æ ¹æ®æºæ•°æ®å¤åˆ¶è¦ç´ ã€‚åˆ›å»ºå›¾å±‚æ–¹æ³•<code>CreateLayer</code>ç¬¬äºŒä¸ªå‚æ•°ç”¨äºæŒ‡å®šæ•°æ®åæ ‡ç³»ï¼Œåæ ‡ç³»ç»Ÿå¯ä»¥ä½¿ç”¨<code>ImportFromEPSG</code>æ–¹æ³•å®šä¹‰ï¼Œåªéœ€ä¼ å…¥ä¸€ä¸ª<code>EPSG</code>ç¼–ç ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-string">"""
æŠ•å½±è½¬æ¢æ“ä½œ
"""</span>
<span class="hljs-comment"># åˆ›å»ºæŠ•å½±æ•°æ®æº</span>
prjDs = shpDriver.CreateDataSource(projectPath)

<span class="hljs-comment"># æŠ•å½±åæ ‡å¯¹è±¡</span>
srs = osr.SpatialReference()
srs.ImportFromEPSG(<span class="hljs-number">4522</span>)

<span class="hljs-comment"># åˆ›å»ºæŠ•å½±å›¾å±‚</span>
prjLayer = prjDs.CreateLayer(<span class="hljs-string">"prj_layer"</span>,srs,geomType)

<span class="hljs-comment"># æ·»åŠ å±æ€§ç»“æ„</span>
<span class="hljs-keyword">for</span>Â iÂ <span class="hljs-keyword">in</span>Â <span class="hljs-built_in">range</span>(fieldCount):
Â  Â  fieldDefn = featureDefn.GetFieldDefn(i)
Â  Â  prjLayer.CreateField(fieldDefn)

<span class="hljs-comment"># å†™å…¥è¦ç´ </span>
<span class="hljs-keyword">for</span>Â featureÂ <span class="hljs-keyword">in</span>Â sourceLayer: Â  Â 
Â  Â  prjLayer.CreateFeature(feature) Â  Â 
</code></pre>
<h3 data-id="heading-11">5.5. å¯¼å‡ºæŠ•å½±</h3>
<p>å¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ–¹æ³•å¯¼å‡ºæŠ•å½±ä¿¡æ¯ã€‚<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f2ea16a4310d4287a8a0a1286d848dd5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768833611&amp;x-signature=1Ypl2ib%2Fl3C%2FR2j3weatNKZViqc%3D" alt="" loading="lazy"/></p>
<pre><code class="hljs language-objectivec" lang="objectivec">- ExportToPrettyWkt(SpatialReference <span class="hljs-keyword">self</span>, <span class="hljs-type">int</span> simplify=<span class="hljs-number">0</span>)
- ExportToProj4(SpatialReference <span class="hljs-keyword">self</span>)
- ExportToUSGS(SpatialReference <span class="hljs-keyword">self</span>)
- ExportToWkt(SpatialReference <span class="hljs-keyword">self</span>, <span class="hljs-type">char</span> ** options=None)
- ExportToXML(SpatialReference <span class="hljs-keyword">self</span>, <span class="hljs-type">char</span> <span class="hljs-keyword">const</span> * dialect=<span class="hljs-string">""</span>)
</code></pre>
<h3 data-id="heading-12">5.6. å‡ ä½•æŠ•å½±</h3>
<p>ä½¿ç”¨<code>CoordinateTransformation</code>æ–¹æ³•å®šä¹‰è½¬æ¢ä¿¡æ¯ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ä¸ºæºæ•°æ®åæ ‡ç³»ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºç›®æ ‡æŠ•å½±åæ ‡ç³»ï¼Œç„¶åè°ƒç”¨<code>Geometry</code>å¯¹è±¡æ–¹æ³•<code>Transform</code>è¿›è¡Œåæ ‡è½¬æ¢ã€‚</p>
<pre><code class="hljs language-scss" lang="scss"># æºæ•°æ®åæ ‡å‚è€ƒ
sourceSrs = osr<span class="hljs-selector-class">.SpatialReference</span>()
sourceSrs<span class="hljs-selector-class">.ImportFromEPSG</span>(<span class="hljs-number">4326</span>)
<span class="hljs-built_in">print</span>("æºæ•°æ®åæ ‡ç³»åç§°ï¼š",sourceSrs.GetName())

# æ·»åŠ å‡ ä½•å¯¹è±¡
geom = feature<span class="hljs-selector-class">.GetGeometryRef</span>()
<span class="hljs-built_in">print</span>("ä¹‹å‰çš„åæ ‡ï¼š",geom.GetX(),geom<span class="hljs-selector-class">.GetY</span>())

# å‡ ä½•æŠ•å½±
targetSrs = osr<span class="hljs-selector-class">.SpatialReference</span>()
targetSrs<span class="hljs-selector-class">.ImportFromEPSG</span>(<span class="hljs-number">4522</span>)
<span class="hljs-built_in">print</span>("ç›®æ ‡æ•°æ®åæ ‡ç³»åç§°ï¼š",targetSrs.GetName())

# åæ ‡è½¬æ¢
coordsTransform = osr<span class="hljs-selector-class">.CoordinateTransformation</span>(sourceSrs,targetSrs)
geom<span class="hljs-selector-class">.Transform</span>(coordsTransform)

<span class="hljs-built_in">print</span>("ä¹‹åçš„åæ ‡ï¼š",geom.GetX(),geom<span class="hljs-selector-class">.GetY</span>())
</code></pre>
<p>åæ ‡ç³»è¾“å‡ºä¿¡æ¯æ˜¾ç¤ºå¦‚ä¸‹ã€‚<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ab7c7c0e335c4c7d9f9081044d9c1a59~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768833611&amp;x-signature=vUjkTfGU%2BL3LhfT1QdxA1yv2e8k%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-13">5.7. åˆ›å»ºæŠ•å½±æ–‡ä»¶</h3>
<p>å¯¹äºç¼ºå°‘<code>.prj</code>æ–‡ä»¶çš„æ•°æ®å¯ä»¥ä½¿ç”¨ç©ºé—´å‚è€ƒæ–¹æ³•<code>MorphToESRI()</code>ä¿®æ”¹åæ ‡ä¿¡æ¯ï¼Œä½¿ç”¨<code>ExportToWkt()</code>æ–¹æ³•å¯¼å‡ºåæ ‡å‚è€ƒåå°†å…¶å†™å…¥æŠ•å½±æ–‡ä»¶ä¸­ã€‚</p>
<p>åˆ›å»ºä¸€ä¸ªæ–¹æ³•<code>CreatePrjFile</code>ç”¨äºåˆ›å»ºæŠ•å½±æ–‡ä»¶ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-string">"""
è¯´æ˜ï¼šåˆ›å»º.prjæ–‡ä»¶
å‚æ•°ï¼š
Â  Â  -shpPathï¼š Shpæ–‡ä»¶è·¯å¾„
"""</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">CreatePrjFile</span>(<span class="hljs-params">shpPath</span>):
Â  Â  prjSrs = osr.SpatialReference()
Â  Â  prjSrs.ImportFromEPSG(<span class="hljs-number">4522</span>)

Â  Â  prjSrs.MorphToESRI()

Â  Â  fileName = os.path.splitext(shpPath)[<span class="hljs-number">0</span>]
Â  Â  prjFile = fileName +Â <span class="hljs-string">".prj"</span>

Â  Â  <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(prjFile,<span class="hljs-string">"w"</span>) <span class="hljs-keyword">as</span> f:
Â  Â  Â  Â  f.write(prjSrs.ExportToWkt())
Â  Â  Â  Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æˆåŠŸåˆ›å»ºæŠ•å½±æ–‡ä»¶: <span class="hljs-subst">{prjFile}</span>"</span>)
</code></pre>
<h2 data-id="heading-14">6. æ³¨æ„äº‹é¡¹</h2>
<p>åœ¨<code>windows</code>å¼€å‘ç¯å¢ƒä¸­åŒæ—¶å®‰è£…<code>GDAL</code>ä¸<code>PostGIS</code>ï¼Œå…¶ä¸­æŠ•å½±åº“<code>PROJ</code>çš„ç¯å¢ƒå˜é‡æŒ‡å‘<code>PostGIS</code>çš„å®‰è£…è·¯å¾„ï¼Œåœ¨è¿è¡ŒGDALç¨‹åºæ—¶ï¼Œæ¶‰åŠåˆ°è¦ç´ ã€å‡ ä½•ä¸æŠ•å½±æ“ä½œæ—¶ä¼šå¯¼è‡´å¼‚å¸¸ã€‚<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ee4c2aa434b241878b04c78310b6a15d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768833611&amp;x-signature=JfFaNLDTGO5tyOM95Fp8lTXnImE%3D" alt="" loading="lazy"/>å…·ä½“æ„æ€ä¸º<code>GDAL</code>ä¸æ”¯æŒ<code>PostGIS</code>æ’ä»¶ä¸­çš„æŠ•å½±åº“ç‰ˆæœ¬ï¼Œéœ€è¦æ›´æ¢æŠ•å½±åº“æˆ–è€…å‡çº§ç‰ˆæœ¬ã€‚</p>
<p><code>RuntimeError: PROJ: proj_identify: D:Program FilesPostgreSQL13sharecontribpostgis-3.5projproj.db contains DATABASE.LAYOUT.VERSION.MINOR = 2 whereas a number &gt;= 5 is expected. It comes from another PROJ installation.</code><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7798df0df611458697ead3f320cac4f7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768833611&amp;x-signature=CHHn83FKB712MrMKyruzZnCilLM%3D" alt="" loading="lazy"/></p>
<p>è§£å†³åŠæ³•ä¸ºä¿®æ”¹<code>PROJ</code>çš„ç¯å¢ƒå˜é‡åˆ°<code>GDAL</code>æ”¯æŒçš„ç‰ˆæœ¬æˆ–è€…åœ¨<code>GDAL</code>ç¨‹åºå¼€å¤´æ·»åŠ ä»¥ä¸‹ä»£ç ï¼š</p>
<pre><code class="hljs language-python" lang="python">os.environ[<span class="hljs-string">'PROJ_LIB'</span>] = <span class="hljs-string">r'D:\Programs\Python\Python311\Libsite-packages\osgeo\data\proj'</span>
</code></pre>
<p><strong>å›¾ç‰‡æ•ˆæœ</strong></p>
<p><strong><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f74f0526c6be4437932f6f486fbabde3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768833611&amp;x-signature=17fxzULy7j3FlGnhr0VLOgAtB2A%3D" alt="" loading="lazy"/></strong></p>
<hr/>
<p><strong><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/39ea253f0d2d4e96bd7d13f2c0859eb1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768833611&amp;x-signature=wqmv6walD6BTX5O7sDdiI94z4Bc%3D" alt="" loading="lazy"/></strong></p>
<blockquote>
<p>â</p>
<p>OpenLayersç¤ºä¾‹æ•°æ®ä¸‹è½½ï¼Œè¯·åœ¨å…¬ä¼—å·åå°å›å¤ï¼š<strong>olæ•°æ®</strong></p>
<p>å…¨å›½ä¿¡æ¯åŒ–å·¥ç¨‹å¸ˆï¼GIS åº”ç”¨æ°´å¹³è€ƒè¯•èµ„æ–™ï¼Œè¯·åœ¨å…¬ä¼—å·åå°å›å¤ï¼š<strong>GISè€ƒè¯•</strong></p>
</blockquote>
<blockquote>
<p>â</p>
<p><em><strong>GISä¹‹è·¯</strong></em> å…¬ä¼—å·å·²ç»æ¥å…¥äº†<strong>æ™ºèƒ½</strong> <strong>åŠ©æ‰‹</strong>ï¼Œå¯ä»¥åœ¨å¯¹è¯æ¡†è¿›è¡Œæé—®ï¼Œä¹Ÿå¯ä»¥ç›´æ¥æœç´¢å†å²æ–‡ç« è¿›è¡ŒæŸ¥çœ‹ã€‚</p>
</blockquote>
<p>éƒ½çœ‹åˆ°è¿™äº†ï¼Œä¸è¦å¿˜è®°<em><strong>ç‚¹èµã€æ”¶è—</strong></em> <strong>+</strong> <em><strong>å…³æ³¨</strong></em> å“¦ <strong>ï¼</strong></p>
<p>æœ¬å·ä¸å®šæ—¶æ›´æ–°æœ‰å…³Â <em><strong>GISå¼€å‘</strong></em> ç›¸å…³å†…å®¹ï¼Œ<em><strong>æ¬¢è¿å…³æ³¨Â <img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5cea658015e54be2a4f71a582460dc53~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768833611&amp;x-signature=L1g6jRmfsTwmM6LUpYl0omGgXok%3D" alt="" loading="lazy"/><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/532072904a5b468694c4cdcd0c29dece~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768833611&amp;x-signature=bZ1ucDKzNlW37bV34X8DOWLZTNc%3D" alt="" loading="lazy"/></strong></em></p>
<hr/>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1000068f2a894663bd9f664e31770e9d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768833611&amp;x-signature=AUa14T1TQVLCXREbRB8lLP6e%2B7I%3D" alt="" loading="lazy"/></p>
<p>Â  Â <img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/23619a9e680a4a29ac1039bc7b27be45~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768833611&amp;x-signature=Th8UliiXQOMdqfU24vfphCv43vw%3D" alt="" loading="lazy"/>Â </p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzkwOTEzNjI5NQ%3D%3D%26mid%3D2247487953%26idx%3D1%26sn%3D0b2d5aeefdb290583cf8cdd82f3c2077%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzkwOTEzNjI5NQ==&amp;mid=2247487953&amp;idx=1&amp;sn=0b2d5aeefdb290583cf8cdd82f3c2077&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">GeoTools å¼€å‘åˆé›†ï¼ˆå…¨ï¼‰</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzkwOTEzNjI5NQ%3D%3D%26mid%3D2247487119%26idx%3D1%26sn%3Dc313efa84c27bf933ef2f2a47991ef2d%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzkwOTEzNjI5NQ==&amp;mid=2247487119&amp;idx=1&amp;sn=c313efa84c27bf933ef2f2a47991ef2d&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">OpenLayers å¼€å‘åˆé›†</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2Fz_naHKef17txAV2l30zCvg" target="_blank" title="https://mp.weixin.qq.com/s/z_naHKef17txAV2l30zCvg" ref="nofollow noopener noreferrer">GDAL å®ç°çŸ¢é‡åˆå¹¶</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FARKk8BFiEo79CXPvSmS-Ng" target="_blank" title="https://mp.weixin.qq.com/s/ARKk8BFiEo79CXPvSmS-Ng" ref="nofollow noopener noreferrer">GDAL å›¾å±‚åˆå¹¶æ“ä½œ</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FSX2u2ww1iNOtqR5m3BE93g" target="_blank" title="https://mp.weixin.qq.com/s/SX2u2ww1iNOtqR5m3BE93g" ref="nofollow noopener noreferrer">å›½äº§ç‰ˆçš„Google Earthï¼Œå‰æ—ä¸€å·å«æ˜ŸAppâ€œå…±ç”Ÿåœ°çƒâ€æ¥äº†</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FfWufqSyplniNj4Q3BRRbAQ" target="_blank" title="https://mp.weixin.qq.com/s/fWufqSyplniNj4Q3BRRbAQ" ref="nofollow noopener noreferrer">2026å¹´å…¨å›½è‡ªç„¶èµ„æºå·¥ä½œä¼šè®®å¬å¼€</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FRq7mCSrKU7DA7WRGDEy6Cg" target="_blank" title="https://mp.weixin.qq.com/s/Rq7mCSrKU7DA7WRGDEy6Cg" ref="nofollow noopener noreferrer">æ—¥æœ¬æ¬²æ‰“é€ â€œæœ¬åœŸç‰ˆâ€æ˜Ÿé“¾ç³»ç»Ÿ</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FuI-pb6NHVIQQBn84zgbVzQ" target="_blank" title="https://mp.weixin.qq.com/s/uI-pb6NHVIQQBn84zgbVzQ" ref="nofollow noopener noreferrer">GDAL å®ç°çŸ¢é‡è£å‰ª</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2F4l8z3pCgtMA7mgDV2-SSfA" target="_blank" title="https://mp.weixin.qq.com/s/4l8z3pCgtMA7mgDV2-SSfA" ref="nofollow noopener noreferrer">GDAL å®ç°ç©ºé—´åˆ†æ</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2F_DVIdV5_bBPn3zVzUSoZ0w" target="_blank" title="https://mp.weixin.qq.com/s/_DVIdV5_bBPn3zVzUSoZ0w" ref="nofollow noopener noreferrer">GDAL ç©ºé—´å…³ç³»è§£æ</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2Ff1GPy_DNqtvEDzojlRmcBg" target="_blank" title="https://mp.weixin.qq.com/s/f1GPy_DNqtvEDzojlRmcBg" ref="nofollow noopener noreferrer">GDAL å®ç°æ•°æ®ç©ºé—´æŸ¥è¯¢</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FEyUADPYCf7O_9b0u8LUQCg" target="_blank" title="https://mp.weixin.qq.com/s/EyUADPYCf7O_9b0u8LUQCg" ref="nofollow noopener noreferrer">GDAL å®ç°æ•°æ®å±æ€§æŸ¥è¯¢</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FEqpOD--IdOUO6gyzwBc6RA" target="_blank" title="https://mp.weixin.qq.com/s/EqpOD--IdOUO6gyzwBc6RA" ref="nofollow noopener noreferrer">å‰æ—ä¸€å·å›½å†…é¦–å¼ é«˜åˆ†è¾¨ç‡å½©è‰²å¤œå…‰å«æ˜Ÿå½±åƒå‘å¸ƒ</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FRdlldTRZ6c7FzfjBSdSPMg" target="_blank" title="https://mp.weixin.qq.com/s/RdlldTRZ6c7FzfjBSdSPMg" ref="nofollow noopener noreferrer">GDAL å®ç°åˆ›å»ºå‡ ä½•å¯¹è±¡</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2Fi77nCatd4V2nuybZFIs-xA" target="_blank" title="https://mp.weixin.qq.com/s/i77nCatd4V2nuybZFIs-xA" ref="nofollow noopener noreferrer">GDAL æ•°æ®ç±»å‹å¤§å…¨</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç²¾é€‰ 10 æ¬¾ .NET å¼€æºå…è´¹ã€åŠŸèƒ½å¼ºå¤§çš„ Windows æ•ˆç‡è½¯ä»¶]]></title>    <link>https://juejin.cn/post/7594485030233014313</link>    <guid>https://juejin.cn/post/7594485030233014313</guid>    <pubDate>2026-01-12T14:52:58.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594485030233014313" data-draft-id="7594350054090702890" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç²¾é€‰ 10 æ¬¾ .NET å¼€æºå…è´¹ã€åŠŸèƒ½å¼ºå¤§çš„ Windows æ•ˆç‡è½¯ä»¶"/> <meta itemprop="keywords" content="åç«¯,.NET"/> <meta itemprop="datePublished" content="2026-01-12T14:52:58.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è¿½é€æ—¶å…‰è€…"/> <meta itemprop="url" content="https://juejin.cn/user/2770425031690333"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç²¾é€‰ 10 æ¬¾ .NET å¼€æºå…è´¹ã€åŠŸèƒ½å¼ºå¤§çš„ Windows æ•ˆç‡è½¯ä»¶
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2770425031690333/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è¿½é€æ—¶å…‰è€…
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-12T14:52:58.000Z" title="Mon Jan 12 2026 14:52:58 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>åœ¨å½“ä»Šå¿«èŠ‚å¥çš„æ•°å­—å·¥ä½œç¯å¢ƒä¸­ï¼Œæ•ˆç‡å·¥å…·å·²æˆä¸ºå¼€å‘è€…ã€ITä¸“ä¸šäººå£«ä¹ƒè‡³æ™®é€šç”¨æˆ·æå‡ç”Ÿäº§åŠ›çš„å…³é”®åŠ©åŠ›ã€‚</p>
<p>ä»Šå¤©å¤§å§šç»™å¤§å®¶åˆ†äº« 10 æ¬¾ .NET å¼€æºå…è´¹ã€åŠŸèƒ½å¼ºå¤§çš„ Windows æ•ˆç‡è½¯ä»¶ï¼Œå¼€å‘å·¥ä½œæå‡åˆ©å™¨ï¼Œå¸Œæœ›å¯ä»¥å¸®åŠ©åˆ°æœ‰éœ€è¦çš„å°ä¼™ä¼´ã€‚</p>
<h2 data-id="heading-1">DevToys</h2>
<p>DevToysæ˜¯ä¸€ä¸ªä¸“é—¨ä¸ºå¼€å‘è€…è®¾è®¡çš„Windowså·¥å…·ç®±ï¼Œå®Œå…¨æ”¯æŒç¦»çº¿è¿è¡Œï¼Œæ— éœ€ä½¿ç”¨è®¸å¤šä¸çœŸå®çš„ç½‘ç«™æ¥å¤„ç†ä½ çš„æ•°æ®ï¼Œå¸¸ç”¨åŠŸèƒ½æœ‰ï¼šæ ¼å¼åŒ–ï¼ˆæ”¯æŒ JSONã€SQLã€XMLï¼‰ã€JWTè§£ç ã€URLç¼–ç /è§£ç ã€UUIDç”Ÿæˆã€å›¾ç‰‡å‹ç¼©ã€æ–‡æœ¬æ¯”è¾ƒã€æ­£åˆ™è¡¨è¾¾å¼æµ‹è¯•ã€Markdowné¢„è§ˆç­‰28+ç§å®ç”¨å·¥å…·ã€‚</p>
<ul>
<li><strong>å¼€æºåœ°å€ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fveler%2FDevToys" target="_blank" title="https://github.com/veler/DevToys" ref="nofollow noopener noreferrer">github.com/veler/DevToâ€¦</a></li>
<li><strong>è¯¦ç»†ä»‹ç»ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FDg7mGLXYKKIwfHAv2GEkVQ" target="_blank" title="https://mp.weixin.qq.com/s/Dg7mGLXYKKIwfHAv2GEkVQ" ref="nofollow noopener noreferrer">mp.weixin.qq.com/s/Dg7mGLXYKâ€¦</a></li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d4ceb239276f4fd1a745eb1a6142b2a4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768834378&amp;x-signature=bQ0mxLBeTW9tpgjKVuIafNMcSNg%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a4a07d125d074774bbb0a0a9d905ef1f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768834378&amp;x-signature=DhthkhzlCjbtxMUU1ODTZcR%2B7nQ%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-2">Microsoft PowerToys</h2>
<p>Microsoft PowerToys æ˜¯ä½¿ç”¨ C++ å’Œ C# ç¼–ç¨‹è¯­è¨€å¼€å‘çš„ã€‚å®ƒåˆ©ç”¨äº† Windows æ“ä½œç³»ç»Ÿçš„åº•å±‚åŠŸèƒ½å’Œ APIï¼Œä»¥åŠ Microsoft å¼€å‘çš„ä¸€äº›å¼€æºåº“å’Œå·¥å…·æ¥å®ç°å…¶åŠŸèƒ½ï¼Œé›†æˆäº†20å¤šä¸ªå®ç”¨å·¥å…·ã€‚</p>
<ul>
<li><strong>å¼€æºåœ°å€ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fmicrosoft%2FPowerToys" target="_blank" title="https://github.com/microsoft/PowerToys" ref="nofollow noopener noreferrer">github.com/microsoft/Pâ€¦</a></li>
<li><strong>è¯¦ç»†ä»‹ç»ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2Fe6p3YebvL2EebTSwvAFe_A" target="_blank" title="https://mp.weixin.qq.com/s/e6p3YebvL2EebTSwvAFe_A" ref="nofollow noopener noreferrer">mp.weixin.qq.com/s/e6p3YebvLâ€¦</a></li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/42d35ccb2ef0456eb70ed7110daa3753~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768834378&amp;x-signature=cLwex%2BkRB7OfxfqPRUkScLVRIuI%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/917e0bd6053f4cd6bad888b30072cce5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768834378&amp;x-signature=GLGAKhxLjNzaM%2FfgPrFcAC%2BKs2Y%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-3">Bulk Crap Uninstaller</h2>
<p>Bulk Crap Uninstaller æ˜¯ä¸€æ¬¾åŸºäº .NET å¼€æºï¼ˆApache Licenseï¼‰ã€å…è´¹ã€åŠŸèƒ½å¼ºå¤§çš„Windowsåº”ç”¨å¸è½½å·¥å…·ï¼Œæ—¨åœ¨å¸®åŠ©ç”¨æˆ·å¿«é€Ÿä¸”æœ‰æ•ˆåœ°ç§»é™¤ç³»ç»Ÿä¸­ä¸å†éœ€è¦çš„å¤§é‡åº”ç”¨ç¨‹åºã€‚æ”¯æŒæ‰¹é‡å’Œå¼ºåˆ¶å¸è½½ã€æ¸…ç†æ®‹ç•™æ–‡ä»¶ã€æ£€æµ‹éšè—æˆ–å—ä¿æŠ¤çš„å·²æ³¨å†Œåº”ç”¨ç­‰åŠŸèƒ½ã€‚è™½ç„¶é¢å‘ IT ä¸“ä¸šäººå‘˜è®¾è®¡ï¼Œä½†å…¶ç®€å•çš„é»˜è®¤è®¾ç½®ï¼Œè®©ä»»ä½•äººéƒ½èƒ½è½»æ¾ä¸Šæ‰‹ã€‚</p>
<ul>
<li><strong>å¼€æºåœ°å€ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FKlocman%2FBulk-Crap-Uninstaller" target="_blank" title="https://github.com/Klocman/Bulk-Crap-Uninstaller" ref="nofollow noopener noreferrer">github.com/Klocman/Bulâ€¦</a></li>
<li><strong>è¯¦ç»†ä»‹ç»ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FjZCDMcjnpj-_N52jxHgxKw" target="_blank" title="https://mp.weixin.qq.com/s/jZCDMcjnpj-_N52jxHgxKw" ref="nofollow noopener noreferrer">mp.weixin.qq.com/s/jZCDMcjnpâ€¦</a></li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0c8e78a3d3d943cfaf533336183410dd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768834378&amp;x-signature=2CQOp9Hetowzoux8U21FobTZTtg%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ee2e48ab2b9c411ca4931f7dcec79d00~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768834378&amp;x-signature=OMcBD4zNdyt3Z0K0siZ0YzPy7Do%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-4">PDFPatcher</h2>
<p>PDF è¡¥ä¸ä¸ï¼ˆPDFPatcherï¼‰æ˜¯ä¸€æ¬¾.NETå¼€æºï¼ˆAGPLï¼‰ã€å…è´¹ã€åŠŸèƒ½å¼ºå¤§çš„ PDF å¤„ç†å·¥å…·ï¼Œå¯ä»¥ç¼–è¾‘ä¹¦ç­¾ã€å‰ªè£æ—‹è½¬é¡µé¢ã€è§£é™¤é™åˆ¶ã€æå–æˆ–åˆå¹¶æ–‡æ¡£ï¼Œæ¢æŸ¥æ–‡æ¡£ç»“æ„ï¼Œæå–å›¾ç‰‡ã€è½¬æˆå›¾ç‰‡ç­‰ç­‰ï¼Œæ—¨åœ¨ä¸ºç”¨æˆ·æä¾›ä¾¿æ·ã€é«˜æ•ˆçš„ PDF ç¼–è¾‘å’Œç®¡ç†ä½“éªŒã€‚</p>
<ul>
<li><strong>å¼€æºåœ°å€ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fwmjordan%2FPDFPatcher" target="_blank" title="https://github.com/wmjordan/PDFPatcher" ref="nofollow noopener noreferrer">github.com/wmjordan/PDâ€¦</a></li>
<li><strong>è¯¦ç»†ä»‹ç»ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FMX8np6yN-x-D4FAdEf4dcA" target="_blank" title="https://mp.weixin.qq.com/s/MX8np6yN-x-D4FAdEf4dcA" ref="nofollow noopener noreferrer">mp.weixin.qq.com/s/MX8np6yN-â€¦</a></li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2d3317b494bb4158b0197313f9a934ac~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768834378&amp;x-signature=uEM8rz4SXmN0%2Bl8rmA2%2BMdHgkAQ%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/47c3e36d9ac94b018e28acb5216d46e7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768834378&amp;x-signature=4su%2FuzR%2FSeqs7Oe61TaWZbvFgcs%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-5">FileConverter</h2>
<p>FileConverteræ˜¯ä¸€æ¬¾åŸºäº.NETå¼€å‘çš„å…è´¹ï¼ˆGPL-3.0 licenseï¼‰ã€ç®€æ˜“ã€é«˜æ•ˆçš„æ–‡ä»¶è½¬æ¢å™¨ï¼Œå…è®¸ç”¨æˆ·é€šè¿‡Windowsèµ„æºç®¡ç†å™¨çš„ä¸Šä¸‹æ–‡èœå•æ¥è½¬æ¢å’Œå‹ç¼©ä¸€ä¸ªæˆ–å¤šä¸ªæ–‡ä»¶</p>
<ul>
<li><strong>å¼€æºåœ°å€ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FTichau%2FFileConverter" target="_blank" title="https://github.com/Tichau/FileConverter" ref="nofollow noopener noreferrer">github.com/Tichau/Fileâ€¦</a></li>
<li><strong>è¯¦ç»†ä»‹ç»ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2F4_DLJ-KzI413uDO4k4FLtw" target="_blank" title="https://mp.weixin.qq.com/s/4_DLJ-KzI413uDO4k4FLtw" ref="nofollow noopener noreferrer">mp.weixin.qq.com/s/4_DLJ-KzIâ€¦</a></li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c1e92857b4a04b588b4218d2e659d0e5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768834378&amp;x-signature=Mt3rc6B4gM7A8F%2BQAwpLFkZxc3o%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-6">Flow Launcher</h2>
<p>Flow Launcheræ˜¯ä¸€æ¬¾.NETå¼€æºï¼ˆMIT Licenseï¼‰ã€å…è´¹ã€åŠŸèƒ½å¼ºå¤§ã€æ–¹ä¾¿å®ç”¨çš„ Windows æ–‡ä»¶æœç´¢å’Œåº”ç”¨ç¨‹åºå¯åŠ¨å™¨ï¼Œèƒ½å¤Ÿå¸®åŠ©ä½ å¿«é€ŸæŸ¥æ‰¾æ–‡ä»¶ã€å¯åŠ¨åº”ç”¨ç¨‹åºå’Œæ‰§è¡Œç³»ç»Ÿæ“ä½œï¼Œæé«˜å·¥ä½œæ•ˆç‡å’Œæ“ä½œä¾¿åˆ©æ€§ã€‚å¹¶ä¸”ç”Ÿæ€å®Œå–„ï¼Œæœ‰æ’ä»¶å•†åº—ï¼Œä½ å¯ä»¥æŸ¥çœ‹å®Œæ•´çš„æ’ä»¶åˆ—è¡¨ï¼Œæˆ–é€šè¿‡ "è®¾ç½® "ä¸­çš„ "æ’ä»¶å•†åº— "èœå•å¿«é€Ÿå®‰è£…æ’ä»¶ã€‚</p>
<ul>
<li><strong>å¼€æºåœ°å€ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FFlow-Launcher%2FFlow.Launcher" target="_blank" title="https://github.com/Flow-Launcher/Flow.Launcher" ref="nofollow noopener noreferrer">github.com/Flow-Launchâ€¦</a></li>
<li><strong>è¯¦ç»†ä»‹ç»ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FWeDpUhAH4L7UksBjTG_2Ow" target="_blank" title="https://mp.weixin.qq.com/s/WeDpUhAH4L7UksBjTG_2Ow" ref="nofollow noopener noreferrer">mp.weixin.qq.com/s/WeDpUhAH4â€¦</a></li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/16d013857ab74495a65a6fe4d20c9911~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768834378&amp;x-signature=sQQolctuZIux7oiPf3YDVpNxEpE%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5706fab72f3e4ff18834cc9fefa80da3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768834378&amp;x-signature=CdTxWFXiTtBZ5eO2jSG3C7%2FzsPA%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-7">ShareX</h2>
<p>ShareXæ˜¯ä¸€æ¬¾.NETå¼€æºå…è´¹ï¼ˆåŸºäºGPL3.0å¼€æºåè®®ï¼‰ã€åŠŸèƒ½å¼ºå¤§ã€ç®€æ´çµæ´»çš„ Windows æˆªå›¾ã€å½•å±ã€GifåŠ¨å›¾åˆ¶ä½œç¥å™¨ã€‚</p>
<ul>
<li><strong>å¼€æºåœ°å€ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FShareX%2FShareX" target="_blank" title="https://github.com/ShareX/ShareX" ref="nofollow noopener noreferrer">github.com/ShareX/Sharâ€¦</a></li>
<li><strong>è¯¦ç»†ä»‹ç»ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2F9RQhkeOx-4EtY_9RdEn7hQ" target="_blank" title="https://mp.weixin.qq.com/s/9RQhkeOx-4EtY_9RdEn7hQ" ref="nofollow noopener noreferrer">mp.weixin.qq.com/s/9RQhkeOx-â€¦</a></li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/501e8b7abfeb4518b18bba4b4caeae0b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768834378&amp;x-signature=8CQVNa3M%2BGkQ33%2FVOKeJa4EZM6g%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0254b3adae0e4330817211f8bf3108a3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768834378&amp;x-signature=7KXAqhrqKnQ813qsQZxhmHAHMms%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-8">Notepads</h2>
<p>Notepadsæ˜¯ä¸€ä¸ª.NETå¼€æºã€å…è´¹ï¼ˆMIT Licenseï¼‰ã€ç°ä»£ã€è½»é‡çº§ã€å…·æœ‰æç®€ä¸»ä¹‰è®¾è®¡çš„æ–‡æœ¬ç¼–è¾‘å™¨ã€‚</p>
<ul>
<li><strong>å¼€æºåœ°å€ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2F0x7c13%2FNotepads" target="_blank" title="https://github.com/0x7c13/Notepads" ref="nofollow noopener noreferrer">github.com/0x7c13/Noteâ€¦</a></li>
<li><strong>è¯¦ç»†ä»‹ç»ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FQImXbg7taYqmOoEY1VeAjg" target="_blank" title="https://mp.weixin.qq.com/s/QImXbg7taYqmOoEY1VeAjg" ref="nofollow noopener noreferrer">mp.weixin.qq.com/s/QImXbg7taâ€¦</a></li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d76756bb95e641509bc33860ef786848~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768834378&amp;x-signature=GR5nzIeRvxWgoFpH%2FB7mviYOKDM%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/063db1c21fda49c497c76645eec916e2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768834378&amp;x-signature=Z09KwmjPZ4nMMqcUu316H1YtCA4%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-9">ZyperWin++</h2>
<p>ZyperWin++ æ˜¯ä¸€ä¸ªåŸºäº .NET + SunnyUI å¼€æºã€è½»ä¾¿ã€ç®€æ´ç¾è§‚çš„ Windows ä¼˜åŒ–å·¥å…·ï¼Œé€‚ç”¨äº Win7 - Win11 æœ€æ–°ç‰ˆçš„ä¼˜åŒ–ï¼ŒåŒ…æ‹¬æ€§èƒ½ä¼˜åŒ–ã€æœåŠ¡é¡¹ä¼˜åŒ–ã€åƒåœ¾æ¸…ç†ã€èµ„æºç®¡ç†å™¨ç®¡ç†ã€å®‰å…¨è®¾ç½®ã€éšç§è®¾ç½®ã€æ›´æ–°è®¾ç½®ã€Appxç®¡ç†ç­–ç•¥ä¼˜åŒ–ç­‰æ“ä½œï¼Œè¿˜æ”¯æŒç³»ç»Ÿæ¿€æ´»å’ŒOfficeå¿«é€Ÿå®‰è£…ã€‚</p>
<ul>
<li><strong>å¼€æºåœ°å€ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FZyperWave%2FZyperWinOptimize" target="_blank" title="https://github.com/ZyperWave/ZyperWinOptimize" ref="nofollow noopener noreferrer">github.com/ZyperWave/Zâ€¦</a></li>
<li><strong>è¯¦ç»†ä»‹ç»ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FndD-06WHiI5z0P9VQGpyEw" target="_blank" title="https://mp.weixin.qq.com/s/ndD-06WHiI5z0P9VQGpyEw" ref="nofollow noopener noreferrer">mp.weixin.qq.com/s/ndD-06WHiâ€¦</a></li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fc49118868594b5d8fe925fce74b3ac6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768834378&amp;x-signature=nrwtzuxPDuNKf2pFBz1PqWOn6qA%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/51473e48c71d4593b482825a5ce49325~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768834378&amp;x-signature=tREDLhsELjx4r4QN7MfjEHBIs38%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-10">1Remote</h2>
<p>1Remoteæ˜¯ä¸€æ¬¾åŸºäº .NET å¼€æºï¼ˆGPL-3.0 licenseï¼‰ã€å…è´¹ã€ç°ä»£çš„è¿œç¨‹ä¼šè¯ç®¡ç†å’Œå¯åŠ¨å™¨ï¼Œå®ƒè®©ä½ èƒ½å¤Ÿåœ¨ä»»ä½•æ—¶å€™å¿«é€Ÿå¼€å¯ä¸€ä¸ªè¿œç¨‹ä¼šè¯ã€‚ç›®å‰ PRemoteM å·²æ”¯æŒ å¾®è½¯è¿œç¨‹æ¡Œé¢(RDP)ã€VNCã€SSHã€Telnetã€SFTP, FTP, RemoteApp ç­‰åè®®ã€‚</p>
<ul>
<li><strong>å¼€æºåœ°å€ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2F1Remote%2F1Remote" target="_blank" title="https://github.com/1Remote/1Remote" ref="nofollow noopener noreferrer">github.com/1Remote/1Reâ€¦</a></li>
<li><strong>è¯¦ç»†ä»‹ç»ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FpZN_MdQu4TbBhfRUbol7KA" target="_blank" title="https://mp.weixin.qq.com/s/pZN_MdQu4TbBhfRUbol7KA" ref="nofollow noopener noreferrer">mp.weixin.qq.com/s/pZN_MdQu4â€¦</a></li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4434b946426e4e4a8b871600005cdd2e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768834378&amp;x-signature=74xW4dvsW4tJK2pYrnS3h5GD3W8%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cce412241f034b1d91cbcec33ef39264~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768834378&amp;x-signature=KUfSDlBYw4DvqqgVDFf3HWZsCVU%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-11">ä¼˜ç§€é¡¹ç›®å’Œæ¡†æ¶ç²¾é€‰</h2>
<p>æœ¬æ–‡æ‰€æœ‰é¡¹ç›®éƒ½å·²æ”¶å½•åˆ°C#/.NET/.NET Coreä¼˜ç§€é¡¹ç›®å’Œæ¡†æ¶ç²¾é€‰ä¸­ï¼Œå…³æ³¨ä¼˜ç§€é¡¹ç›®å’Œæ¡†æ¶ç²¾é€‰èƒ½è®©ä½ åŠæ—¶äº†è§£C#ã€.NETå’Œ.NET Coreé¢†åŸŸçš„æœ€æ–°åŠ¨æ€å’Œæœ€ä½³å®è·µï¼Œæé«˜å¼€å‘å·¥ä½œæ•ˆç‡å’Œè´¨é‡ã€‚å‡å¦‚ä½ æœ‰æ›´å¥½çš„æ¨èï¼Œæ¬¢è¿å¤§å®¶è¸Šè·ƒæäº¤PRæ¨èæˆ–è‡ªèï¼ˆ<strong>è®©ä¼˜ç§€çš„é¡¹ç›®å’Œæ¡†æ¶ä¸è¢«åŸ‹æ²¡</strong>ğŸ¤ï¼‰ã€‚</p>
<ul>
<li><strong>GitHubå¼€æºåœ°å€ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FYSGStudyHards%2FDotNetGuide%2Fblob%2Fmain%2Fdocs%2FDotNet%2FDotNetProjectPicks.md" target="_blank" title="https://github.com/YSGStudyHards/DotNetGuide/blob/main/docs/DotNet/DotNetProjectPicks.md" ref="nofollow noopener noreferrer">github.com/YSGStudyHarâ€¦</a></li>
<li><strong>Giteeå¼€æºåœ°å€ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2Fysgdaydayup%2FDotNetGuide%2Fblob%2Fmain%2Fdocs%2FDotNet%2FDotNetProjectPicks.md" target="_blank" title="https://gitee.com/ysgdaydayup/DotNetGuide/blob/main/docs/DotNet/DotNetProjectPicks.md" ref="nofollow noopener noreferrer">gitee.com/ysgdaydayupâ€¦</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸€æ¬¾å¼€æºã€å…è´¹çš„ WPF è‡ªå®šä¹‰æ§ä»¶é›†]]></title>    <link>https://juejin.cn/post/7594350054090719274</link>    <guid>https://juejin.cn/post/7594350054090719274</guid>    <pubDate>2026-01-12T14:56:08.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594350054090719274" data-draft-id="7594485030233030697" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸€æ¬¾å¼€æºã€å…è´¹çš„ WPF è‡ªå®šä¹‰æ§ä»¶é›†"/> <meta itemprop="keywords" content="åç«¯,.NET"/> <meta itemprop="datePublished" content="2026-01-12T14:56:08.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è¿½é€æ—¶å…‰è€…"/> <meta itemprop="url" content="https://juejin.cn/user/2770425031690333"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸€æ¬¾å¼€æºã€å…è´¹çš„ WPF è‡ªå®šä¹‰æ§ä»¶é›†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2770425031690333/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è¿½é€æ—¶å…‰è€…
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-12T14:56:08.000Z" title="Mon Jan 12 2026 14:56:08 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>ä»Šå¤©å¤§å§šç»™å¤§å®¶åˆ†äº«ä¸€æ¬¾å¼€æºï¼ˆMIT licenseï¼‰ã€å…è´¹çš„ WPF è‡ªå®šä¹‰æ§ä»¶é›†ï¼Œå¯¹äºæ­£åœ¨å­¦ä¹ æˆ–å¼€å‘ WPF åº”ç”¨ã€å¸Œæœ›æ·±å…¥äº†è§£è‡ªå®šä¹‰æ§ä»¶å®ç°åŸç†çš„åŒå­¦æ¥è¯´ï¼Œå…·æœ‰å¾ˆé«˜çš„å‚è€ƒå’Œå€Ÿé‰´ä»·å€¼ã€‚</p>
<h2 data-id="heading-1">é¡¹ç›®ä»‹ç»</h2>
<p>PropertyTools æ˜¯ä¸€æ¬¾å¼€æºï¼ˆMIT licenseï¼‰ã€å…è´¹çš„ WPF è‡ªå®šä¹‰æ§ä»¶é›†ï¼Œè¯¥æ§ä»¶é›†æ¶µç›–äº† PropertyGridã€DataGridã€æ”¯æŒå¤šé€‰çš„ TreeViewã€ColorPicker ç­‰å¸¸ç”¨æ§ä»¶ã€‚</p>
<h2 data-id="heading-2">æ”¯æŒçš„.NETç‰ˆæœ¬</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6dfaf1a6edd64edaa0559a6e72b0d061~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768834568&amp;x-signature=1yxx17iN0l3ut2B7n4itiY5WddQ%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-3">æ§ä»¶ä»‹ç»</h2>
<p>å½“ç„¶å¯ä»¥ï¼Œä»¥ä¸‹æ˜¯å»æ‰â€œçŠ¶æ€â€åˆ—åçš„ä¸­æ–‡è¡¨æ ¼ï¼š</p>









































































<table><thead><tr><th>æ§ä»¶åç§°</th><th>æè¿°</th></tr></thead><tbody><tr><td>PropertyGridï¼ˆå±æ€§ç½‘æ ¼ï¼‰</td><td>æ˜¾ç¤ºå•ä¸ªå¯¹è±¡æˆ–ä¸€ç»„å¯¹è±¡çš„å±æ€§çš„æ§ä»¶ã€‚</td></tr><tr><td>DataGridï¼ˆæ•°æ®è¡¨æ ¼ï¼‰</td><td>å…·æœ‰â€œExcel é£æ ¼â€çš„æ•°æ®è¡¨æ ¼æ§ä»¶ï¼ˆæ³¨æ„ï¼šè¯¥æ§ä»¶æœªå®ç°è™šæ‹ŸåŒ–ï¼‰ã€‚</td></tr><tr><td>TreeListBoxï¼ˆæ ‘å½¢åˆ—è¡¨æ¡†ï¼‰</td><td>å¤–è§‚å’Œè¡Œä¸ºç±»ä¼¼ <code>TreeView</code> çš„ <code>ListBox</code>ï¼Œæ”¯æŒå¤šé€‰å’Œæ‹–æ”¾æ“ä½œã€‚</td></tr><tr><td>ColorPickerï¼ˆé¢œè‰²é€‰æ‹©å™¨ï¼‰</td><td>ç”¨äºé€‰æ‹©é¢œè‰²çš„æ§ä»¶ã€‚</td></tr><tr><td>RadioButtonListï¼ˆå•é€‰æŒ‰é’®åˆ—è¡¨ï¼‰</td><td>ä¸€ç»„ç»‘å®šåˆ°æšä¸¾ï¼ˆenumï¼‰çš„å•é€‰æŒ‰é’®ã€‚</td></tr><tr><td>EnumMenuItemï¼ˆæšä¸¾èœå•é¡¹ï¼‰</td><td>ä¸€ç»„å¯å‹¾é€‰çš„èœå•é¡¹ï¼Œç»‘å®šåˆ°æšä¸¾ï¼ˆenumï¼‰ã€‚</td></tr><tr><td>EditableTextBlockï¼ˆå¯ç¼–è¾‘æ–‡æœ¬å—ï¼‰</td><td>ä¸€ç§å¯åœ¨ <code>TextBlock</code> å’Œ <code>TextBox</code> ä¹‹é—´åˆ‡æ¢çš„æ§ä»¶ï¼Œé€‚ç”¨äºåœ¨ <code>TreeView</code> ä¸­è¿›è¡Œå°±åœ°ç¼–è¾‘ã€‚</td></tr><tr><td>FilePickerï¼ˆæ–‡ä»¶é€‰æ‹©å™¨ï¼‰</td><td>å¸¦æœ‰â€œæµè§ˆæ–‡ä»¶â€æŒ‰é’®çš„ <code>TextBox</code>ã€‚</td></tr><tr><td>DirectoryPickerï¼ˆç›®å½•é€‰æ‹©å™¨ï¼‰</td><td>å¸¦æœ‰â€œæµè§ˆæ–‡ä»¶å¤¹â€æŒ‰é’®çš„ <code>TextBox</code>ã€‚</td></tr><tr><td>DockPanelSplitterï¼ˆåœé é¢æ¿åˆ†å‰²æ¡ï¼‰</td><td>ç”¨äº <code>DockPanel</code> çš„åˆ†å‰²æ¡æ§ä»¶ã€‚</td></tr><tr><td>SpinControlï¼ˆæ•°å€¼è°ƒèŠ‚æ¡†ï¼‰</td><td>å¸¦æœ‰ä¸Šä¸‹ç®­å¤´çš„æ•°å­—è¾“å…¥æ§ä»¶ï¼ˆæ•°å€¼å¾®è°ƒå™¨ï¼‰ã€‚</td></tr><tr><td>LinkBlockï¼ˆè¶…é“¾æ¥æ–‡æœ¬å—ï¼‰</td><td>åœ¨ <code>TextBlock</code> ä¸Šå®ç°è¶…é“¾æ¥åŠŸèƒ½çš„æ§ä»¶ã€‚</td></tr><tr><td>SliderExï¼ˆå¢å¼ºæ»‘å—ï¼‰</td><td>ä¸€ç§ <code>Slider</code>ï¼Œåœ¨æ‹–åŠ¨æ»‘å—æ—¶ä¼šè°ƒç”¨ <code>IEditableObject.BeginEdit/EndEdit</code> æ–¹æ³•ã€‚</td></tr><tr><td>TextBlockExï¼ˆå¢å¼ºæ–‡æœ¬å—ï¼‰</td><td>æ”¯æŒç¦ç”¨çŠ¶æ€æ ·å¼çš„ <code>TextBlock</code>ã€‚</td></tr><tr><td>PopupBoxï¼ˆå¼¹å‡ºæ¡†ï¼‰</td><td>é‡æ–°æ ·å¼åŒ–çš„ <code>ComboBox</code>ï¼Œå…è®¸åœ¨å¼¹å‡ºè§†å›¾ä¸­æ”¾ç½®ä»»æ„å†…å®¹ã€‚</td></tr><tr><td>FormattingTextBoxï¼ˆæ ¼å¼åŒ–æ–‡æœ¬æ¡†ï¼‰</td><td>å¯ç»‘å®šæ ¼å¼åŒ–å­—ç¬¦ä¸²çš„ <code>TextBox</code>ã€‚</td></tr></tbody></table>
<h2 data-id="heading-4">é¡¹ç›®æºä»£ç </h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/331578aff9e4490591514bb2b5ebf43e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768834568&amp;x-signature=0HbVcF6nBzYkXmoq9%2FbktlRLbmM%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-5">æ§ä»¶æ•ˆæœæŸ¥çœ‹</h2>
<p>è®¾ç½®<code>ControlDemos</code>ä¸ºå¯åŠ¨é¡¹ç›®ï¼Œè¿è¡ŒæŸ¥çœ‹æ•ˆæœï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5312efdecef54c0a8c8a1b5ee08b9e95~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768834568&amp;x-signature=CXfpodQXb0YIUFDLyud7m4wCOy8%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/580aa8dd1f5445508c57e3a0cb54098f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768834568&amp;x-signature=N8TvB2Sv8WYlmry8OzrGeOGiRik%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ed25154e135742b2a92fc08fa4873a48~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768834568&amp;x-signature=E3RwxeiCgENevTYP1ljxL106vqw%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2d9f5447966b44e0a7cd6180fe76c526~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768834568&amp;x-signature=tjWKSxkMqNWmMVPzuy84u2Oigsw%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/403a1852afae402e9ffe16d6a94442a7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768834568&amp;x-signature=QuJ5II5GMnujdto%2F4Y7VxUJoXcA%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/64f4afc1e8f3400fbd741a347ff4e724~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768834568&amp;x-signature=AEFTfQFdgfMOYBuHAwxEZ6mMJco%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e6d305c579cc4e5c9ef149d27ccab0e3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768834568&amp;x-signature=UBAIx%2BnE%2BVHFqUNRmzKPBfS5mzQ%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9098e541c1dd49b6a59d30207f5739e8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768834568&amp;x-signature=bw0Ekrh5kuMLwUG7e1hMjrIfyOs%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8ed22db0ffb545549ce27fac84f4d540~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768834568&amp;x-signature=K52zPOMjUFRLC93puLSCHqZaEAc%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-6">é¡¹ç›®æºç åœ°å€</h2>
<p>æ›´å¤šé¡¹ç›®å®ç”¨åŠŸèƒ½å’Œç‰¹æ€§æ¬¢è¿å‰å¾€é¡¹ç›®å¼€æºåœ°å€æŸ¥çœ‹ğŸ‘€ï¼Œåˆ«å¿˜äº†ç»™é¡¹ç›®ä¸€ä¸ªStaræ”¯æŒğŸ’–ã€‚</p>
<ul>
<li><strong>GitHubå¼€æºåœ°å€ï¼š</strong> <strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FPropertyTools%2FPropertyTools" target="_blank" title="https://github.com/PropertyTools/PropertyTools" ref="nofollow noopener noreferrer">github.com/PropertyTooâ€¦</a></strong></li>
</ul>
<h2 data-id="heading-7">ä¼˜ç§€é¡¹ç›®å’Œæ¡†æ¶ç²¾é€‰</h2>
<p>è¯¥é¡¹ç›®å·²æ”¶å½•åˆ°C#/.NET/.NET Coreä¼˜ç§€é¡¹ç›®å’Œæ¡†æ¶ç²¾é€‰ä¸­ï¼Œå…³æ³¨ä¼˜ç§€é¡¹ç›®å’Œæ¡†æ¶ç²¾é€‰èƒ½è®©ä½ åŠæ—¶äº†è§£C#ã€.NETå’Œ.NET Coreé¢†åŸŸçš„æœ€æ–°åŠ¨æ€å’Œæœ€ä½³å®è·µï¼Œæé«˜å¼€å‘å·¥ä½œæ•ˆç‡å’Œè´¨é‡ã€‚å‘å·²æŒ–ï¼Œæ¬¢è¿å¤§å®¶è¸Šè·ƒæäº¤PRæ¨èæˆ–è‡ªèï¼ˆ<strong>è®©ä¼˜ç§€çš„é¡¹ç›®å’Œæ¡†æ¶ä¸è¢«åŸ‹æ²¡ğŸ¤</strong>ï¼‰ã€‚</p>
<ul>
<li><strong>GitHubå¼€æºåœ°å€ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FYSGStudyHards%2FDotNetGuide%2Fblob%2Fmain%2Fdocs%2FDotNet%2FDotNetProjectPicks.md" target="_blank" title="https://github.com/YSGStudyHards/DotNetGuide/blob/main/docs/DotNet/DotNetProjectPicks.md" ref="nofollow noopener noreferrer">github.com/YSGStudyHarâ€¦</a></li>
<li><strong>Giteeå¼€æºåœ°å€ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2Fysgdaydayup%2FDotNetGuide%2Fblob%2Fmain%2Fdocs%2FDotNet%2FDotNetProjectPicks.md" target="_blank" title="https://gitee.com/ysgdaydayup/DotNetGuide/blob/main/docs/DotNet/DotNetProjectPicks.md" ref="nofollow noopener noreferrer">gitee.com/ysgdaydayupâ€¦</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[0ä»£ç ç”Ÿæˆ4Ké«˜æ¸…å›¾ï¼ACE Data Platform Ã— SeeDream ä¸“å±æ–¹æ¡ˆï¼šå°ç™½/å•†å®¶é—­çœ¼å†²]]></title>    <link>https://juejin.cn/post/7594301878827221030</link>    <guid>https://juejin.cn/post/7594301878827221030</guid>    <pubDate>2026-01-12T15:01:24.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594301878827221030" data-draft-id="7594303751965868078" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="0ä»£ç ç”Ÿæˆ4Ké«˜æ¸…å›¾ï¼ACE Data Platform Ã— SeeDream ä¸“å±æ–¹æ¡ˆï¼šå°ç™½/å•†å®¶é—­çœ¼å†²"/> <meta itemprop="keywords" content="API,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-01-12T15:01:24.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å´”åº†æ‰ä¸¨é™è§…"/> <meta itemprop="url" content="https://juejin.cn/user/1521379821230269"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            0ä»£ç ç”Ÿæˆ4Ké«˜æ¸…å›¾ï¼ACE Data Platform Ã— SeeDream ä¸“å±æ–¹æ¡ˆï¼šå°ç™½/å•†å®¶é—­çœ¼å†²
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1521379821230269/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å´”åº†æ‰ä¸¨é™è§…
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-12T15:01:24.000Z" title="Mon Jan 12 2026 15:01:24 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>è¿˜åœ¨ä¸ºå›¾ç‰‡åˆ›ä½œå‘æ„ï¼Ÿæ‰¾å›¾æ€•ä¾µæƒã€è¯·è®¾è®¡å¸ˆ1å¼ å›¾è¦èŠ±å‡ ç™¾å—ã€AIç”Ÿæˆæ¨¡ç³Šä¸æ¸…ã€å¤æ‚å·¥å…·åŠå¤©å­¦ä¸ä¼šï¼Ÿåˆ«è®©æŠ€æœ¯å’Œæˆæœ¬æŒ¡ä½ä½ çš„åˆ›æ„ï¼</p>
<p>ACE Data Platform é‡ç£…æ¨å‡º <strong>SeeDream å›¾åƒç”Ÿæˆä¸“å±é›†æˆæ–¹æ¡ˆ</strong>ï¼ŒæŠŠç™»é¡¶å›½é™…æ¦œå•çš„AIç”Ÿå›¾èƒ½åŠ›å˜æˆâ€œå‚»ç“œå¼å·¥å…·â€â€”â€”ä¸ç”¨å†™1è¡Œä»£ç ã€ä¸ç”¨æ‡‚è®¾è®¡æŠ€å·§ï¼Œæ‰“å­—æè¿°ã€ä¸Šä¼ å›¾ç‰‡å°±èƒ½ç”Ÿæˆ4Kç”µå½±çº§é«˜æ¸…å›¾ï¼Œæ–°ç”¨æˆ·ç›´æ¥é€å…è´¹é¢åº¦ï¼Œä¸ªäººåˆ›ä½œã€ä¼ä¸šæ‰¹é‡äº§å‡ºå…¨æå®šï¼ä¸“å±å¼€é€šé“¾æ¥ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fplatform.acedata.cloud%2Fdocuments%2Fseedream-images" target="_blank" title="https://platform.acedata.cloud/documents/seedream-images" ref="nofollow noopener noreferrer">ACE Data Platform SeeDream å…è´¹é¢†é¢åº¦</a></p>
<h3 data-id="heading-0">ä¸€ã€æ ¸å¿ƒä¼˜åŠ¿ï¼šä¸ºä»€ä¹ˆé€‰ACEé›†æˆSeeDreamï¼Ÿ</h3>
<p>å¯¹æ¯”æ™®é€šç”Ÿå›¾å·¥å…·ï¼ŒACEä¸“å±æ–¹æ¡ˆç²¾å‡†æˆ³ä¸­ç—›ç‚¹ï¼Œæ–°æ‰‹ä¹Ÿèƒ½ç§’ä¸Šæ‰‹ï¼š</p>
<ol>
<li><strong>0é—¨æ§›æ“ä½œ</strong>ï¼šå…¨ç¨‹å¯è§†åŒ–ç•Œé¢ï¼Œä¸ç”¨æ‡‚ä»»ä½•æŠ€æœ¯ï¼Œæ‰“å­—è¯´è¯å°±èƒ½ç”Ÿå›¾ï¼Œ1åˆ†é’Ÿå‡ºç»“æœï¼›</li>
<li><strong>4Ké«˜æ¸…ç”»è´¨</strong>ï¼šæ”¯æŒè¶…é«˜æ¸…å›¾ç‰‡ç”Ÿæˆï¼Œç»†èŠ‚æ‹‰æ»¡ï¼Œå°åˆ·ã€å¤§å±å±•ç¤ºéƒ½å¤Ÿç”¨ï¼Œæ¯”æ™®é€šå·¥å…·æ¸…æ™°2å€ï¼›</li>
<li><strong>3å¤§æ ¸å¿ƒåŠŸèƒ½</strong>ï¼šæ–‡æœ¬ç”Ÿå›¾ã€å›¾ç‰‡ç¼–è¾‘ã€ç»„å›¾ç”Ÿæˆï¼Œè¦†ç›–æ‰€æœ‰å›¾ç‰‡éœ€æ±‚ï¼Œä¸­æ–‡æè¿°ä¹Ÿèƒ½ç²¾å‡†è¯†åˆ«ï¼›</li>
<li><strong>ç¨³å®šä¸å¡é¡¿</strong>ï¼šå›½å†…ç›´æ¥è¿æ¥ï¼Œ99.9%å¯ç”¨ç‡ï¼Œæ‰¹é‡ç”Ÿæˆå‡ åä¸Šç™¾å¼ ä¹Ÿä¸ä¸­æ–­ï¼›</li>
<li><strong>çœå¿ƒåˆçœé’±</strong>ï¼šç”Ÿæˆå›¾ç‰‡è‡ªåŠ¨å¤‡ä»½ï¼Œæˆæœ¬æ¯”è¯·è®¾è®¡å¸ˆä½90%ï¼Œè¿˜é€å…è´¹é¢åº¦ï¼Œé›¶é£é™©è¯•é”™ã€‚</li>
</ol>
<h3 data-id="heading-1">äºŒã€3æ­¥å…è´¹å¼€é€šï¼š1åˆ†é’Ÿè§£é”ç”Ÿå›¾è¶…èƒ½åŠ›</h3>
<p>å¼€é€šæµç¨‹ç®€å•åˆ°ç¦»è°±ï¼Œä¸ç”¨å¤æ‚å®¡æ ¸ï¼Œäººäººå¯é¢†å…è´¹é¢åº¦ï¼š</p>
<ol>
<li>ç‚¹å‡»ä¸“å±é“¾æ¥ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fplatform.acedata.cloud%2Fdocuments%2Fseedream-images" target="_blank" title="https://platform.acedata.cloud/documents/seedream-images" ref="nofollow noopener noreferrer">ACE Data Platform SeeDream å¼€é€šé¡µ</a>ï¼›</li>
<li>ç‚¹å‡»é¡µé¢â€œAcquireâ€æŒ‰é’®ï¼Œæ²¡æ³¨å†Œçš„è¯ç®€å•å¡«ä¿¡æ¯æ³¨å†Œç™»å½•ï¼Œè‡ªåŠ¨è¿”å›å¼€é€šé¡µï¼›</li>
<li>å¼€é€šæˆåŠŸåï¼Œç³»ç»Ÿç›´æ¥é€å…è´¹é¢åº¦ï¼Œç«‹é©¬å°±èƒ½å¼€å§‹ç”Ÿæˆå›¾ç‰‡ã€‚</li>
</ol>
<h3 data-id="heading-2">ä¸‰ã€æ ¸å¿ƒåŠŸèƒ½ï¼š3ç§ç©æ³•ï¼Œæ»¡è¶³æ‰€æœ‰å›¾ç‰‡éœ€æ±‚</h3>
<h4 data-id="heading-3">1. æ–‡æœ¬ç”Ÿå›¾ï¼šæ‰“å­—æè¿°ï¼Œç§’å‡ºé«˜æ¸…å›¾</h4>
<p>æƒ³è¦äº§å“å›¾ã€æ’ç”»ã€æµ·æŠ¥ã€è¡¨æƒ…åŒ…ï¼Ÿç›´æ¥ç”¨ä¸­æ–‡æè¿°ç”»é¢ï¼ˆæ¯”å¦‚â€œæ—¥ç³»æ¸…æ–°é£æ ¼çš„å’–å•¡æ¯ï¼Œç™½è‰²èƒŒæ™¯ï¼Œ4Ké«˜æ¸…â€ï¼‰ï¼Œé€‰å¥½å°ºå¯¸ï¼ˆæ¨ªå±/ç«–å±/æ­£æ–¹å½¢ï¼‰ï¼Œä¸€é”®ç”Ÿæˆä¸“ä¸šå›¾ç‰‡ï¼Œä¸ç”¨æ‰‹åŠ¨è°ƒä»»ä½•å‚æ•°ã€‚</p>
<h4 data-id="heading-4">2. å›¾ç‰‡ç¼–è¾‘ï¼šä¸Šä¼ ç´ æï¼Œæƒ³æ”¹å°±æ”¹</h4>
<p>æœ‰ç°æˆå›¾ç‰‡æƒ³ä¼˜åŒ–ï¼Ÿä¸Šä¼ å›¾ç‰‡åï¼Œç”¨æ–‡å­—è¯´æ˜ä¿®æ”¹éœ€æ±‚ï¼ˆæ¯”å¦‚â€œæŠŠè¡£æœæè´¨æ¢æˆé€æ˜ç»ç’ƒï¼Œä¿ç•™äººç‰©å§¿åŠ¿â€â€œå»é™¤èƒŒæ™¯ï¼Œæ¢æˆè“è‰²æ¸å˜â€ï¼‰ï¼ŒAIè‡ªåŠ¨é€‚é…é£æ ¼ï¼Œä¿®æ”¹æ•ˆæœè‡ªç„¶ä¸ç”Ÿç¡¬ã€‚</p>
<h4 data-id="heading-5">3. ç»„å›¾ç”Ÿæˆï¼šä¸€æ¬¡å‡ºä¸€å¥—ï¼Œå†…å®¹ç›¸å…³ä¸é‡æ ·</h4>
<p>éœ€è¦ç³»åˆ—é…å›¾ã€å¤šåœºæ™¯å±•ç¤ºå›¾ï¼Ÿè¾“å…¥æ ¸å¿ƒä¸»é¢˜ï¼ˆæ¯”å¦‚â€œå°çº¢ä¹¦å…»ç”Ÿå›¾æ–‡ç³»åˆ—ï¼Œç»Ÿä¸€å¡é€šé£æ ¼â€ï¼‰ï¼Œç³»ç»Ÿä¼šç”Ÿæˆä¸€ç»„å†…å®¹å…³è”ã€é£æ ¼ç»Ÿä¸€çš„å›¾ç‰‡ï¼Œé€‚åˆè‡ªåª’ä½“è¿è½½ã€äº§å“å¤šç»´åº¦å±•ç¤ºã€‚</p>
<h4 data-id="heading-6">4. æ‰¹é‡ç”Ÿæˆ+è‡ªåŠ¨é€šçŸ¥ï¼šé«˜æ•ˆä¸è´¹å¿ƒ</h4>
<p>éœ€è¦å¤§é‡å›¾ç‰‡ï¼Ÿæäº¤éœ€æ±‚åä¸ç”¨ç›¯ç€ç­‰ï¼Œç³»ç»Ÿåå°è‡ªåŠ¨å¤„ç†ï¼Œç”Ÿæˆå®Œæˆåä¼šåŠæ—¶é€šçŸ¥ä½ ï¼Œå›¾ç‰‡è‡ªåŠ¨ä¿å­˜ï¼Œéšæ—¶æŸ¥çœ‹ä¸‹è½½ï¼Œæ‰¹é‡äº§å‡ºä¹Ÿèƒ½ä¿è¯ç”»è´¨ä¸€è‡´ã€‚</p>
<h3 data-id="heading-7">å››ã€5å¤§è½åœ°åœºæ™¯ï¼šä¸ç®¡ä½ æ˜¯è°ï¼Œéƒ½èƒ½é å›¾ææ•ˆ</h3>
<ol>
<li><strong>ç”µå•†å•†å®¶</strong>ï¼šç”Ÿæˆäº§å“ç™½åº•å›¾ã€åœºæ™¯åŒ–ç§è‰å›¾ã€è¯¦æƒ…é¡µé…å›¾ï¼Œä¸ç”¨æ­å»ºå®æ™¯æ‹æ‘„ï¼Œè½¬åŒ–ç‡ç›´æ¥æå‡ï¼›</li>
<li><strong>è‡ªåª’ä½“åˆ›ä½œè€…</strong>ï¼šæ‰¹é‡äº§å‡ºå°é¢å›¾ã€è¡¨æƒ…åŒ…ã€çŸ¥è¯†å¡ç‰‡ï¼Œ1å¤©èƒ½åšå‡ åå¥—ï¼Œè½»æ¾ç»´æŒæ—¥æ›´ï¼ŒæŠ¢å å¹³å°æµé‡ï¼›</li>
<li><strong>å“ç‰Œ/è®¾è®¡å¸ˆ</strong>ï¼šå¿«é€Ÿç”ŸæˆLOGOåˆç¨¿ã€æµ·æŠ¥æ–¹æ¡ˆã€æ´»åŠ¨è§†è§‰å›¾ï¼ŒèŠ‚çœåˆ›æ„æ—¶é—´ï¼Œè¿˜èƒ½å®šåˆ¶ä¸“å±é£æ ¼ï¼›</li>
<li><strong>ä¼ä¸šåŠå…¬</strong>ï¼šæŠŠPPTã€æ–‡å­—æ‰‹å†Œå˜æˆç”ŸåŠ¨æ’å›¾ï¼Œåˆ¶ä½œåŸ¹è®­è¯¾ä»¶ã€å®£ä¼ ç‰©æ–™ï¼Œä¸ç”¨ç­‰è®¾è®¡éƒ¨é—¨æ’æœŸï¼›</li>
<li><strong>ä¸ªäººç”¨æˆ·</strong>ï¼šç”Ÿæˆæ—…è¡Œæ‰“å¡å›¾ã€ç¤¾äº¤å¤´åƒã€èŠ‚æ—¥ç¥ç¦å›¾ï¼Œåˆ›æ„ä¸é™ï¼Œæƒ³æ€ä¹ˆç©å°±æ€ä¹ˆç©ã€‚</li>
</ol>
<h3 data-id="heading-8">äº”ã€å¹³å°èƒŒä¹¦+é™æ—¶ç¦åˆ©ï¼šæ”¾å¿ƒç”¨ï¼Œä¸è¸©å‘</h3>
<h4 data-id="heading-9">é è°±ä¿éšœï¼Œç”¨å¾—å®‰å¿ƒï¼š</h4>
<ul>
<li>æŠ€æœ¯ç¡¬æ ¸ï¼šSeeDreamæ¨¡å‹æ‹¿ä¸‹å›½é™…ç”Ÿå›¾æ¦œå•ç¬¬ä¸€ï¼Œä¸­æ–‡ç†è§£èƒ½åŠ›è¶…å¼ºï¼ŒæŒ‡ä»¤æ‰§è¡Œè¶…ç²¾å‡†ï¼›</li>
<li>æœåŠ¡è´´å¿ƒï¼šACE Data Platformæä¾›24å°æ—¶åœ¨çº¿å®¢æœï¼Œé‡åˆ°é—®é¢˜éšæ—¶è§£å†³ï¼Œä¸ç”¨è‡ªå·±ç¢ç£¨ï¼›</li>
<li>ç”Ÿæ€å®Œå–„ï¼šç”Ÿæˆçš„å›¾ç‰‡å¯ç›´æ¥å¯¹æ¥æµé‡åˆ†æå·¥å…·ï¼Œè¿˜èƒ½ä¸€é”®åˆ†äº«åˆ°ç¤¾äº¤å¹³å°ï¼Œåˆ›ä½œä¼ æ’­ä¸€æ­¥åˆ°ä½ã€‚</li>
</ul>
<h4 data-id="heading-10">é™æ—¶å…è´¹ç¦åˆ©ï¼Œæ‰‹æ…¢æ— ï¼š</h4>
<p>æ–°ç”¨æˆ·æ³¨å†Œå°±é€ <strong>å…è´¹å›¾ç‰‡ç”Ÿæˆé¢åº¦</strong>ï¼Œæ— å¥—è·¯ã€æ— å¼ºåˆ¶æ¶ˆè´¹ï¼Œä¸ªäººå’Œä¼ä¸šéƒ½èƒ½é¢†</p>
<p>ç‚¹å‡»ç›´è¾¾å¼€é€šï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fplatform.acedata.cloud%2Fdocuments%2Fseedream-images" target="_blank" title="https://platform.acedata.cloud/documents/seedream-images" ref="nofollow noopener noreferrer">ACE Data Platform SeeDream å…è´¹é¢†é¢åº¦</a></p>
<h3 data-id="heading-11">ç»“è¯­</h3>
<p>2026å¹´ï¼Œå¥½å›¾ç‰‡å°±æ˜¯æµé‡å¯†ç ï¼ACE Data Platform Ã— SeeDream è®©â€œ0ä»£ç ã€ä½æˆæœ¬ã€æ‰¹é‡å‡º4Ké«˜æ¸…å›¾â€æˆä¸ºç°å®ï¼Œä¸ç®¡ä½ æ˜¯æƒ³çœæ—¶é—´çš„è‡ªåª’ä½“äººã€æƒ³é™æœ¬å¢æ•ˆçš„å•†å®¶ï¼Œè¿˜æ˜¯çˆ±åˆ›æ„çš„æ™®é€šäººï¼Œéƒ½èƒ½è½»æ¾è§£é”å›¾ç‰‡åˆ›ä½œè¶…èƒ½åŠ›ã€‚</p>
<p>ç°åœ¨é¢†å…è´¹é¢åº¦ï¼Œé›¶é£é™©è¯•é”™ï¼Œ1åˆ†é’Ÿå°±èƒ½åšå‡ºç¬¬ä¸€å¼ ä¸“ä¸šçº§å›¾ç‰‡ï¼ŒæŠ¢å æµé‡çº¢åˆ©ï¼æœ‰ä»»ä½•ç–‘é—®ï¼Œç›´æ¥è”ç³»å®¢æœå°±èƒ½è·å–ä¸€å¯¹ä¸€æŒ‡å¯¼ï½</p>
<p>æ›´æœ‰æµ·é‡promptä¾›å¤§å®¶ç›´æ¥ä½¿ç”¨ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<h2 data-id="heading-12">ç”µå•†è¥é”€ä¸“å±ï¼šäº§å“ç™½åº•å›¾ç²¾å‡†æ¨¡æ¿ï¼ˆç›´æ¥å¤åˆ¶æ›¿æ¢ï¼‰</h2>
<p>é€‚é…æ·˜å®ã€äº¬ä¸œã€äºšé©¬é€Šã€æ‹¼å¤šå¤šç­‰ä¸»æµç”µå•†å¹³å°ï¼Œæ»¡è¶³ä¸»å›¾/è¯¦æƒ…é¡µ/æ´»åŠ¨æŠ¥åè¦æ±‚ï¼Œçº¯ç™½èƒŒæ™¯ï¼ˆRGB 255,255,255ï¼‰ã€æ— é˜´å½±ã€æ— æ°´å°ã€ç»†èŠ‚æ¸…æ™°ï¼Œç›´æ¥æ›¿æ¢ <code>[ ]</code> å†…å®¹å³å¯ç”Ÿæˆå¯ç”¨å›¾ï¼</p>
<h3 data-id="heading-13">ä¸€ã€3Cæ•°ç ç±»</h3>
<ol>
<li>æ‰‹æœº/å¹³æ¿ï¼šã€Œ4Ké«˜æ¸…ï¼Œ[äº§å“å‹å·ï¼Œå¦‚ï¼šiPhone 16 Pro]ï¼Œçº¯ç™½è‰²èƒŒæ™¯ï¼Œæ­£é¢æœä¸Šå¹³æ”¾ï¼Œå±å¹•äº®å±å±•ç¤ºé»˜è®¤å£çº¸ï¼Œè¾¹æ¡†æ— åå…‰ï¼Œæ— å¤šä½™é…ä»¶ï¼Œ800x800åƒç´ ï¼Œç¬¦åˆæ·˜å®ä¸»å›¾è§„èŒƒã€</li>
<li>è€³æœº/éŸ³ç®±ï¼šã€Œ4Ké«˜æ¸…ï¼Œ[äº§å“åç§°ï¼Œå¦‚ï¼šæ— çº¿é™å™ªè€³æœº]ï¼Œçº¯ç™½è‰²èƒŒæ™¯ï¼Œè€³æœºä¸»ä½“å‘ˆä½©æˆ´çŠ¶æ€æ‘†æ”¾ï¼ˆæˆ–å¯¹ç§°å¹³æ”¾ï¼‰ï¼Œå±•ç¤ºå……ç”µç›’+è€³æœºå…¨å¥—ï¼Œç»†èŠ‚çº¹ç†æ¸…æ™°ï¼Œæ— é˜´å½±ï¼Œ1000x1000åƒç´ ï¼Œé€‚é…äºšé©¬é€Šä¸»å›¾ã€</li>
<li>å°å®¶ç”µï¼ˆå¹é£æœº/å‰ƒé¡»åˆ€ï¼‰ï¼šã€Œ4Ké«˜æ¸…ï¼Œ[äº§å“åç§°ï¼Œå¦‚ï¼šè´Ÿç¦»å­å¹é£æœº]ï¼Œçº¯ç™½è‰²èƒŒæ™¯ï¼Œæœºèº«ç›´ç«‹æ‘†æ”¾ï¼Œå±•ç¤ºå¼€å…³ã€é£å˜´ç­‰æ ¸å¿ƒéƒ¨ä»¶ï¼Œæ— ç”µçº¿ç¼ ç»•ï¼Œå…‰çº¿å‡åŒ€ï¼Œ600x600åƒç´ ï¼Œé€‚åˆæ‹¼å¤šå¤šè¯¦æƒ…é¡µã€</li>
<li>æ•°ç é…ä»¶ï¼ˆå……ç”µå™¨/æ•°æ®çº¿ï¼‰ï¼šã€Œ4Ké«˜æ¸…ï¼Œ[äº§å“åç§°ï¼Œå¦‚ï¼š65Wæ°®åŒ–é•“å……ç”µå™¨]ï¼Œçº¯ç™½è‰²èƒŒæ™¯ï¼Œå……ç”µå™¨+æ•°æ®çº¿è‡ªç„¶æ‘†æ”¾ï¼ˆæ•°æ®çº¿å‘ˆå¼§å½¢ï¼‰ï¼Œå±•ç¤ºæ¥å£ç»†èŠ‚ï¼Œæ— å¤šä½™è£…é¥°ï¼Œ800x800åƒç´ ï¼Œç¬¦åˆäº¬ä¸œä¸»å›¾è¦æ±‚ã€</li>
</ol>
<h3 data-id="heading-14">äºŒã€ç¾å¦†æŠ¤è‚¤ç±»</h3>
<ol>
<li>ç“¶ç½ç±»ï¼ˆé¢éœœ/ç²¾åï¼‰ï¼šã€Œ4Ké«˜æ¸…ï¼Œ[äº§å“åç§°ï¼Œå¦‚ï¼šç»å°¿é…¸ä¿æ¹¿é¢éœœ]ï¼Œçº¯ç™½è‰²èƒŒæ™¯ï¼Œç“¶èº«ç›´ç«‹æ‘†æ”¾ï¼Œæ­£é¢æœå‘é•œå¤´ï¼Œæ ‡ç­¾æ–‡å­—æ¸…æ™°å¯è¾¨ï¼Œæ— ç“¶ç›–è„±è½ï¼Œå…‰çº¿æŸ”å’Œæ— åå…‰ï¼Œ800x800åƒç´ ï¼Œé€‚é…æ·˜å®ä¸»å›¾ã€</li>
<li>å½©å¦†ç±»ï¼ˆå£çº¢/çœ¼å½±ç›˜ï¼‰ï¼šã€Œ4Ké«˜æ¸…ï¼Œ[äº§å“åç§°ï¼Œå¦‚ï¼šå“‘å…‰é›¾é¢å£çº¢]ï¼Œçº¯ç™½è‰²èƒŒæ™¯ï¼Œå£çº¢æ—‹å‡º1/3é•¿åº¦ï¼Œè†ä½“é¢œè‰²å‡åŒ€ï¼Œå¤–å£³æ— åˆ’ç—•ï¼Œå•ç‹¬æ‘†æ”¾ï¼ˆçœ¼å½±ç›˜éœ€å¼€ç›–å±•ç¤ºå†…æ ¼é¢œè‰²ï¼‰ï¼Œ1000x1000åƒç´ ï¼Œç¬¦åˆäºšé©¬é€Šè¦æ±‚ã€</li>
<li>é¢è†œç±»ï¼ˆç‰‡çŠ¶/æ¶‚æŠ¹å¼ï¼‰ï¼šã€Œ4Ké«˜æ¸…ï¼Œ[äº§å“åç§°ï¼Œå¦‚ï¼šè¡¥æ°´é¢è†œ]ï¼Œçº¯ç™½è‰²èƒŒæ™¯ï¼Œå•ç‰‡é¢è†œå¹³é“ºå±•å¼€ï¼ˆæ¶‚æŠ¹å¼é¢è†œéœ€å±•ç¤ºç½èº«+æŒ–å‹ºï¼‰ï¼Œæ— è¤¶çš±ï¼ŒåŒ…è£…æ–‡å­—æ¸…æ™°ï¼Œ600x600åƒç´ ï¼Œé€‚åˆæ‹¼å¤šå¤šè¯¦æƒ…é¡µã€</li>
<li>ç¾å¦†å·¥å…·ï¼ˆåŒ–å¦†åˆ·/ç²‰æ‰‘ï¼‰ï¼šã€Œ4Ké«˜æ¸…ï¼Œ[äº§å“åç§°ï¼Œå¦‚ï¼š10æ”¯åŒ–å¦†åˆ·å¥—è£…]ï¼Œçº¯ç™½è‰²èƒŒæ™¯ï¼Œåˆ·å­æ•´é½æ’åˆ—ï¼ˆåˆ·å¤´æœå·¦/å³ï¼‰ï¼Œå±•ç¤ºåˆ·æ¯›ç»†èŠ‚ï¼Œæ— æ‰æ¯›ï¼Œæ‰‹æŸ„ç›´ç«‹æ— å€¾æ–œï¼Œ800x800åƒç´ ï¼Œé€‚é…äº¬ä¸œä¸»å›¾ã€</li>
</ol>
<h3 data-id="heading-15">ä¸‰ã€æœè£…é‹å¸½ç±»</h3>
<ol>
<li>ä¸Šè¡£/è£¤å­ï¼šã€Œ4Ké«˜æ¸…ï¼Œ[äº§å“åç§°ï¼Œå¦‚ï¼šçº¯æ£‰å®½æ¾Tæ¤]ï¼Œçº¯ç™½è‰²èƒŒæ™¯ï¼Œè¡£ç‰©å¹³é“ºæ‹æ‘„ï¼ˆæˆ–ç”¨æ¨¡ç‰¹æ¶æ”¯æ’‘ï¼‰ï¼Œæ­£é¢å±•ç¤ºï¼Œæ— è¤¶çš±ï¼Œé¢œè‰²è¿˜åŸå‡†ç¡®ï¼Œæ— åŠç‰Œå¤–éœ²ï¼Œ1000x1000åƒç´ ï¼Œç¬¦åˆæ·˜å®ä¸»å›¾è§„èŒƒã€</li>
<li>é‹å­ï¼ˆè¿åŠ¨é‹/çš®é‹ï¼‰ï¼šã€Œ4Ké«˜æ¸…ï¼Œ[äº§å“åç§°ï¼Œå¦‚ï¼šé€æ°”è¿åŠ¨é‹]ï¼Œçº¯ç™½è‰²èƒŒæ™¯ï¼Œå•åªé‹å­æ–œ45Â°æ‘†æ”¾ï¼ˆæˆ–ä¸¤åªå¯¹ç§°æ‘†æ”¾ï¼‰ï¼Œå±•ç¤ºé‹å‹ã€é‹åº•çº¹è·¯ï¼Œæ— é‹å¸¦æ¾æ•£ï¼Œå…‰çº¿å‡åŒ€ï¼Œ800x800åƒç´ ï¼Œé€‚é…äºšé©¬é€Šä¸»å›¾ã€</li>
<li>é…é¥°ï¼ˆåŒ…åŒ…/å›´å·¾ï¼‰ï¼šã€Œ4Ké«˜æ¸…ï¼Œ[äº§å“åç§°ï¼Œå¦‚ï¼šå¸†å¸ƒæ‰˜ç‰¹åŒ…]ï¼Œçº¯ç™½è‰²èƒŒæ™¯ï¼ŒåŒ…åŒ…è‡ªç„¶æ’‘å¼€ï¼ˆå†…ç½®å¡«å……ç‰©ä¿æŒå½¢çŠ¶ï¼‰ï¼Œå±•ç¤ºå¼€å£ã€è‚©å¸¦ç»†èŠ‚ï¼Œæ— æ±¡æ¸ï¼Œ600x600åƒç´ ï¼Œé€‚åˆæ‹¼å¤šå¤šè¯¦æƒ…é¡µã€</li>
<li>å†…è¡£/è¢œå­ï¼šã€Œ4Ké«˜æ¸…ï¼Œ[äº§å“åç§°ï¼Œå¦‚ï¼šæ— ç—•å†…è£¤]ï¼Œçº¯ç™½è‰²èƒŒæ™¯ï¼Œè¡£ç‰©å¹³é“ºæ— è¤¶çš±ï¼Œé¢œè‰²å‡åŒ€ï¼Œæ— æ ‡ç­¾å¤–éœ²ï¼Œå•ç‹¬æ‘†æ”¾ï¼ˆè¢œå­å¯æˆå¯¹å æ”¾ï¼‰ï¼Œ800x800åƒç´ ï¼Œç¬¦åˆäº¬ä¸œä¸»å›¾è¦æ±‚ã€</li>
</ol>
<h3 data-id="heading-16">å››ã€å®¶å±…æ—¥ç”¨ç±»</h3>
<ol>
<li>å¨å…·ç±»ï¼ˆé”…å…·/é¤å…·ï¼‰ï¼šã€Œ4Ké«˜æ¸…ï¼Œ[äº§å“åç§°ï¼Œå¦‚ï¼šä¸ç²˜å¹³åº•é”…]ï¼Œçº¯ç™½è‰²èƒŒæ™¯ï¼Œé”…å…·ç›´ç«‹æ‘†æ”¾ï¼ˆæˆ–å¹³é“ºå±•ç¤ºé”…åº•ï¼‰ï¼Œæ— æ²¹æ±¡ï¼Œæ‰‹æŸ„æ— æ¾åŠ¨ï¼Œå±•ç¤ºé”…å£è¾¹ç¼˜ç»†èŠ‚ï¼Œ1000x1000åƒç´ ï¼Œé€‚é…æ·˜å®ä¸»å›¾ã€</li>
<li>å®¶çººç±»ï¼ˆåºŠå•/æ•å¥—ï¼‰ï¼šã€Œ4Ké«˜æ¸…ï¼Œ[äº§å“åç§°ï¼Œå¦‚ï¼šå…¨æ£‰å°èŠ±åºŠå•]ï¼Œçº¯ç™½è‰²èƒŒæ™¯ï¼ŒåºŠå•å¹³é“ºå±•å¼€ï¼Œå›¾æ¡ˆå±…ä¸­å±•ç¤ºï¼Œæ— è¤¶çš±ï¼Œé¢œè‰²è¿˜åŸå‡†ç¡®ï¼Œ800x800åƒç´ ï¼Œç¬¦åˆäºšé©¬é€Šè¦æ±‚ã€</li>
<li>æ¸…æ´ç”¨å“ï¼ˆæ´—è¡£æ¶²/æ´—æ´ç²¾ï¼‰ï¼šã€Œ4Ké«˜æ¸…ï¼Œ[äº§å“åç§°ï¼Œå¦‚ï¼šå¤©ç„¶æ¤ç‰©æ´—è¡£æ¶²]ï¼Œçº¯ç™½è‰²èƒŒæ™¯ï¼Œç“¶èº«ç›´ç«‹æ‘†æ”¾ï¼Œæ­£é¢æœå‘é•œå¤´ï¼Œæ ‡ç­¾æ–‡å­—æ¸…æ™°ï¼Œæ— æ¼æ¶²ç—•è¿¹ï¼Œ600x600åƒç´ ï¼Œé€‚åˆæ‹¼å¤šå¤šè¯¦æƒ…é¡µã€</li>
<li>æ”¶çº³ç”¨å“ï¼ˆæ”¶çº³ç›’/è¡£æ¶ï¼‰ï¼šã€Œ4Ké«˜æ¸…ï¼Œ[äº§å“åç§°ï¼Œå¦‚ï¼šæŠ½å±‰å¼æ”¶çº³ç›’]ï¼Œçº¯ç™½è‰²èƒŒæ™¯ï¼Œæ”¶çº³ç›’å¼€ç›–å±•ç¤ºå†…éƒ¨éš”å±‚ï¼Œæ— å˜å½¢ï¼Œé¢œè‰²å‡åŒ€ï¼Œå•ç‹¬æ‘†æ”¾ï¼ˆè¡£æ¶å¯æˆç»„æ’åˆ—ï¼‰ï¼Œ800x800åƒç´ ï¼Œé€‚é…äº¬ä¸œä¸»å›¾ã€</li>
</ol>
<h3 data-id="heading-17">äº”ã€é£Ÿå“é¥®æ–™ç±»</h3>
<ol>
<li>åŒ…è£…é£Ÿå“ï¼ˆé›¶é£Ÿ/é¥¼å¹²ï¼‰ï¼šã€Œ4Ké«˜æ¸…ï¼Œ[äº§å“åç§°ï¼Œå¦‚ï¼šæ— è”—ç³–é¥¼å¹²]ï¼Œçº¯ç™½è‰²èƒŒæ™¯ï¼ŒåŒ…è£…æ­£é¢æœå‘é•œå¤´ï¼Œæ–‡å­—å›¾æ¡ˆæ¸…æ™°ï¼Œæ— ç ´æŸã€æ— èƒ€æ°”ï¼Œå•ç‹¬æ‘†æ”¾ï¼ˆå¤šåŒ…å¯æ•´é½æ’åˆ—ï¼‰ï¼Œ800x800åƒç´ ï¼Œç¬¦åˆæ·˜å®ä¸»å›¾è§„èŒƒã€</li>
<li>ç“¶è£…é¥®æ–™ï¼ˆæœæ±/çŸ¿æ³‰æ°´ï¼‰ï¼šã€Œ4Ké«˜æ¸…ï¼Œ[äº§å“åç§°ï¼Œå¦‚ï¼šé²œæ¦¨æ©™æ±]ï¼Œçº¯ç™½è‰²èƒŒæ™¯ï¼Œç“¶èº«ç›´ç«‹æ‘†æ”¾ï¼Œæ ‡ç­¾å±…ä¸­ï¼Œæ¶²ä½“é¢œè‰²å‡åŒ€ï¼Œæ— æ²‰æ·€ç‰©ï¼Œå…‰çº¿æŸ”å’Œæ— åå…‰ï¼Œ1000x1000åƒç´ ï¼Œé€‚é…äºšé©¬é€Šä¸»å›¾ã€</li>
<li>ç”Ÿé²œé£Ÿå“ï¼ˆæ°´æœ/è”¬èœï¼‰ï¼šã€Œ4Ké«˜æ¸…ï¼Œ[äº§å“åç§°ï¼Œå¦‚ï¼šè¿›å£è½¦å˜å­]ï¼Œçº¯ç™½è‰²èƒŒæ™¯ï¼Œ3-5é¢—æœå®è‡ªç„¶æ‘†æ”¾ï¼Œå±•ç¤ºæœå½¢ã€è‰²æ³½ï¼Œæ— è…çƒ‚ã€æ— æ‚è´¨ï¼Œ600x600åƒç´ ï¼Œé€‚åˆæ‹¼å¤šå¤šè¯¦æƒ…é¡µã€</li>
<li>å¹²è´§ç‰¹äº§ï¼ˆåšæœ/çº¢æ£ï¼‰ï¼šã€Œ4Ké«˜æ¸…ï¼Œ[äº§å“åç§°ï¼Œå¦‚ï¼šåŸå‘³å·´æ—¦æœ¨]ï¼Œçº¯ç™½è‰²èƒŒæ™¯ï¼Œåšæœå»å£³+å¸¦å£³ç»„åˆæ‘†æ”¾ï¼ˆæˆ–å±•ç¤ºåŒ…è£…+å€’å‡ºçš„åšæœï¼‰ï¼Œæ— å—æ½®ï¼Œé¢—ç²’é¥±æ»¡ï¼Œ800x800åƒç´ ï¼Œç¬¦åˆäº¬ä¸œä¸»å›¾è¦æ±‚ã€</li>
</ol>
<h3 data-id="heading-18">å…­ã€è·¨å¢ƒç”µå•†ä¸“å±ï¼ˆäºšé©¬é€Š/é€Ÿå–é€šï¼‰</h3>
<ol>
<li>é€šç”¨æ¨¡æ¿1ï¼šã€ŒHigh-resolution 4K, [Product Name, e.g.: Wireless Bluetooth Earbuds], pure white background (RGB 255,255,255), product placed vertically, front facing the camera, no shadows or reflections, all details clearly visible, 1000x1000 pixels, meeting Amazon main image requirementsã€</li>
<li>é€šç”¨æ¨¡æ¿2ï¼šã€Œ4K ultra HD, [Product Name, e.g.: Matte Lipstick], pure white background, product displayed alone without extra accessories, labels and logos clearly legible, even lighting, 1200x1200 pixels, suitable for AliExpress main imageã€</li>
<li>å¤æ‚äº§å“æ¨¡æ¿ï¼šã€Œ4K high definition, [Product Name, e.g.: 10-in-1 Makeup Brush Set], pure white background, brushes arranged neatly in a row, brush hair details visible, no shedding, 1000x1000 pixels, compliant with Amazon product image guidelinesã€</li>
</ol>
<h3 data-id="heading-19">æ¨¡æ¿ä½¿ç”¨å°è´´å£«</h3>
<ol>
<li>åƒç´ å»ºè®®ï¼šæ·˜å®/äº¬ä¸œä¸»å›¾æ¨è800x800åƒç´ ï¼Œäºšé©¬é€Šå»ºè®®1000x1000åƒç´ ï¼ˆæ”¯æŒç¼©æ”¾ï¼‰ï¼Œæ‹¼å¤šå¤šå¯600x600åƒç´ ï¼ˆå…¼é¡¾åŠ è½½é€Ÿåº¦ï¼‰ï¼›</li>
<li>å…‰çº¿è¦æ±‚ï¼šæ¨¡æ¿ä¸­å·²åŒ…å«â€œå…‰çº¿å‡åŒ€â€â€œæ— åå…‰â€ç­‰å…³é”®è¯ï¼Œç”Ÿæˆæ—¶è‡ªåŠ¨é€‚é…ï¼Œæ— éœ€é¢å¤–æ·»åŠ ï¼›</li>
<li>äº§å“æ‘†æ”¾ï¼šæŒ‰æ¨¡æ¿æè¿°çš„â€œç›´ç«‹â€â€œå¹³é“ºâ€â€œæ–œ45Â°â€æ‘†æ”¾ï¼Œç¡®ä¿ä¸»ä½“çªå‡ºï¼Œç¬¦åˆç”µå•†å¹³å°å®¡æ ¸è§„èŒƒï¼›</li>
<li>æ‰¹é‡ç”Ÿæˆï¼šå¦‚éœ€æ‰¹é‡åˆ¶ä½œåŒç³»åˆ—äº§å“ç™½åº•å›¾ï¼Œå¯ä¿æŒæ¨¡æ¿ç»“æ„ä¸å˜ï¼Œä»…æ›¿æ¢äº§å“åç§°å’Œæ ¸å¿ƒç‰¹å¾ï¼Œä¿è¯é£æ ¼ç»Ÿä¸€ã€‚</li>
</ol>
<p>ç›´æ¥å¤åˆ¶æ¨¡æ¿åˆ° <a href="https://link.juejin.cn?target=https%3A%2F%2Fplatform.acedata.cloud%2Fdocuments%2Fseedream-images" target="_blank" title="https://platform.acedata.cloud/documents/seedream-images" ref="nofollow noopener noreferrer">ACE Data Platform SeeDream ç”Ÿæˆé¡µ</a>ï¼Œä¸€é”®ç”Ÿæˆç¬¦åˆå¹³å°è¦æ±‚çš„4Ké«˜æ¸…ç™½åº•å›¾ï¼Œæ— éœ€ä¸“ä¸šæ‘„å½±å’Œä¿®å›¾ï¼Œæˆæœ¬ç›´é™90%ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[DigitalOceanå®¹å™¨æ³¨å†Œè¡¨æ¨å‡ºå¤šæ³¨å†Œè¡¨æ”¯æŒåŠŸèƒ½]]></title>    <link>https://juejin.cn/post/7594301878827008038</link>    <guid>https://juejin.cn/post/7594301878827008038</guid>    <pubDate>2026-01-12T13:10:50.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594301878827008038" data-draft-id="7594276252460285962" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="DigitalOceanå®¹å™¨æ³¨å†Œè¡¨æ¨å‡ºå¤šæ³¨å†Œè¡¨æ”¯æŒåŠŸèƒ½"/> <meta itemprop="keywords" content="å®¹å™¨"/> <meta itemprop="datePublished" content="2026-01-12T13:10:50.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="DigitalOcean"/> <meta itemprop="url" content="https://juejin.cn/user/2031553217827127"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            DigitalOceanå®¹å™¨æ³¨å†Œè¡¨æ¨å‡ºå¤šæ³¨å†Œè¡¨æ”¯æŒåŠŸèƒ½
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2031553217827127/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    DigitalOcean
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-12T13:10:50.000Z" title="Mon Jan 12 2026 13:10:50 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>è¿‘æ—¥ï¼ŒDigitalOcean äº‘å¹³å°å®£å¸ƒï¼Œå®¹å™¨æ³¨å†Œè¡¨è¿›è¡Œäº†ä¸€é¡¹é‡å¤§å‡çº§ï¼šç°åœ¨ï¼Œå•ä¸ªå›¢é˜Ÿå¯ä»¥åˆ›å»ºå’Œç®¡ç†å¤šä¸ªæ³¨å†Œè¡¨ã€‚æ­¤åŠŸèƒ½é¢å‘ä¸“ä¸šç‰ˆè®¡åˆ’ï¼ˆProfessional Planï¼‰çš„å®¢æˆ·ï¼Œæ— éœ€é¢å¤–è´¹ç”¨ï¼Œæ¯ä¸ªå›¢é˜Ÿæœ€å¤šå¯åˆ›å»º 10 ä¸ªæ³¨å†Œè¡¨ï¼Œä»è€Œåœ¨ DigitalOcean ä¸Šæä¾›äº†æå¤§çš„é•œåƒéƒ¨ç½²çµæ´»æ€§ã€‚</p>
<p><strong>ä»€ä¹ˆæ˜¯å¤šæ³¨å†Œè¡¨ï¼Ÿå®ƒä¸ºä½•é‡è¦ï¼Ÿ</strong></p>
<p>æ­¤å‰ï¼Œè™½ç„¶ä¸€ä¸ª DigitalOcean å®¹å™¨æ³¨å†Œè¡¨ï¼ˆDOCRï¼‰è´¦æˆ·å¯ä»¥åˆ›å»ºå¤šä¸ªå›¢é˜Ÿï¼Œä½†æ¯ä¸ªå›¢é˜Ÿä»…é™äºä¸€ä¸ªå®¹å™¨æ³¨å†Œè¡¨ã€‚</p>
<p>é€šè¿‡æ­¤æ¬¡æ›´æ–°ï¼Œä¸“ä¸šç‰ˆè®¡åˆ’çš„å®¢æˆ·ç°åœ¨å¯ä»¥åœ¨å•ä¸ªå›¢é˜Ÿä¸‹åˆ›å»ºæœ€å¤š 10 ä¸ªæ³¨å†Œè¡¨ï¼Œæ¯ä¸ªæ³¨å†Œè¡¨éƒ½åŒ…å«å…¶ç‹¬ç«‹çš„ä¸€ç»„ä»“åº“å’Œé…ç½®ã€‚æ­¤æ¶æ„ä¸“ä¸ºç®¡ç†ä¸åŒç¯å¢ƒï¼ˆå¦‚å¼€å‘ã€é¢„å‘å¸ƒã€ç”Ÿäº§ï¼‰æˆ–åˆ†å¸ƒå¼å›¢é˜Ÿçš„ç”¨æˆ·è®¾è®¡ï¼Œå…è®¸è¿›è¡Œåˆ†éš”åŒ–çš„æ³¨å†Œè¡¨ç®¡ç†ã€‚</p>
<p><strong>å¤šæ³¨å†Œè¡¨çš„å¥½å¤„</strong></p>
<ul>
<li>â€‹<strong>ç¯å¢ƒéš”ç¦»</strong>â€‹ï¼šéš”ç¦»ä¸åŒçš„éƒ¨ç½²é˜¶æ®µï¼ˆä¾‹å¦‚å¼€å‘ç¯å¢ƒä¸ç”Ÿäº§ç¯å¢ƒï¼‰ã€‚</li>
<li>â€‹<strong>åŒºåŸŸæ€§èƒ½</strong>â€‹ï¼šåœ¨ç‰¹å®šåŒºåŸŸï¼ˆå¦‚ fra1 æˆ– nyc3ï¼‰é…ç½®æ³¨å†Œè¡¨ï¼Œä½¿é•œåƒä¸æ‚¨çš„ Kubernetes é›†ç¾¤ä½äºåŒä¸€åŒºåŸŸã€‚è¿™å‡å°‘äº†æ‹‰å–é•œåƒæ—¶çš„å»¶è¿Ÿå’Œæ•°æ®ä¼ è¾“æˆæœ¬ã€‚</li>
<li>â€‹<strong>æ³•è§„éµä»æ€§</strong>â€‹ï¼šå¯¹äºæœ‰ä¸¥æ ¼æ•°æ®é©»ç•™è¦æ±‚ï¼ˆå¦‚ GDPRï¼‰çš„ç”¨æˆ·ï¼Œå¤šæ³¨å†Œè¡¨é€šè¿‡ç¡®ä¿å®¹å™¨å·¥ä»¶å­˜å‚¨åœ¨ç‰¹å®šçš„åœ°ç†ç®¡è¾–èŒƒå›´å†…æ¥å¢å¼ºåˆè§„æ€§ã€‚</li>
<li>â€‹<strong>ä¸º DOCR çš„æœªæ¥å¢å¼ºåšå¥½å‡†å¤‡</strong>â€‹ï¼šè¿™ç§å¤šæ³¨å†Œè¡¨åŸºç¡€ä¸º DOCR æœªæ¥çš„é«˜çº§åŠŸèƒ½ï¼ˆå¦‚æ³¨å†Œè¡¨é•œåƒå’Œåœ°ç†å¤åˆ¶ï¼‰é“ºå¹³äº†é“è·¯ã€‚</li>
</ul>
<h2 data-id="heading-0"><strong>å¦‚ä½•åœ¨ DigitalOcean ä¸Šä½¿ç”¨æ–°çš„å¤šæ³¨å†Œè¡¨åŠŸèƒ½</strong></h2>
<p><strong>1ã€é€šè¿‡æ§åˆ¶é¢æ¿</strong></p>
<p>ç‚¹å‡»å³ä¸Šè§’çš„"åˆ›å»ºæ³¨å†Œè¡¨"æŒ‰é’®ä»¥æ·»åŠ æ›´å¤šæ³¨å†Œè¡¨ã€‚</p>
<p><img src="https://www.digitaloceans.cn/wp-content/uploads/2026/01/image-4-1024x488.png" alt="" loading="lazy"/></p>
<p>å†åˆ›å»ºä¸€ä¸ªæ³¨å†Œè¡¨ã€‚</p>
<p><img src="https://www.digitaloceans.cn/wp-content/uploads/2026/01/image-5-1024x488.png" alt="" loading="lazy"/></p>
<p>ä¸€ä¸ªæ–°çš„æ³¨å†Œè¡¨å·²æ·»åŠ æˆåŠŸã€‚</p>
<p><img src="https://www.digitaloceans.cn/wp-content/uploads/2026/01/image-6-1024x255.png" alt="" loading="lazy"/></p>
<p><strong>2ã€é€šè¿‡API</strong></p>
<p>é€šè¿‡æˆ‘ä»¬æ›´æ–°çš„ API å‘½åç©ºé—´ <code>v2/registries</code>ï¼Œå¯ä»¥ç®€åŒ–å¤šæ³¨å†Œè¡¨çš„ç®¡ç†ã€‚è¯·æ³¨æ„ï¼Œä¸ºä¿æŒå‘åå…¼å®¹æ€§ï¼Œæ—§çš„ <code>v2/registry</code> ç«¯ç‚¹ä»ç„¶ä¿ç•™ï¼Œä½†æ‰€æœ‰å¤šæ³¨å†Œè¡¨æ“ä½œå¿…é¡»ä½¿ç”¨æ–°çš„å¤æ•°åŒ–ç«¯ç‚¹ã€‚</p>
<p><strong>åˆ›å»ºæ³¨å†Œè¡¨</strong></p>
<p>è¦åˆ›å»ºä¸€ä¸ªæ–°æ³¨å†Œè¡¨ï¼Œå‘é€ä¸€ä¸ªæŒ‡å®šå”¯ä¸€åç§°å’Œç›®æ ‡åŒºåŸŸçš„ POST è¯·æ±‚ã€‚</p>
<pre><code class="hljs language-json" lang="json">curl -X POST \
  -H <span class="hljs-string">"Content-Type: application/json"</span> \
  -H <span class="hljs-string">"Authorization: Bearer $DIGITALOCEAN_TOKEN"</span> \
  -d '<span class="hljs-punctuation">{</span><span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"example"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"subscription_tier_slug"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"basic"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"region"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"fra1"</span><span class="hljs-punctuation">}</span>' \
  <span class="hljs-string">"https://api.digitalocean.com/v2/registries"</span>
</code></pre>
<p>æ³¨æ„ï¼šåœ¨ä¸“ä¸šç‰ˆè®¡åˆ’ä¸‹ï¼Œæ‚¨æœ€å¤šå¯ä»¥åˆ›å»º 10 ä¸ªæ³¨å†Œè¡¨ã€‚</p>
<p><strong>åˆ—å‡ºæ‰€æœ‰æ³¨å†Œè¡¨</strong></p>
<p>é€šè¿‡æ£€ç´¢ä¸æ‚¨è´¦æˆ·å…³è”çš„æ‰€æœ‰æ³¨å†Œè¡¨åˆ—è¡¨æ¥å®¡æ ¸æ‚¨çš„åŸºç¡€æ¶æ„ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">curl -X GET \
  -H <span class="hljs-string">"Content-Type: application/json"</span> \
  -H <span class="hljs-string">"Authorization: Bearer <span class="hljs-variable">$DIGITALOCEAN_TOKEN</span>"</span> \
  <span class="hljs-string">"https://api.digitalocean.com/v2/registries"</span>
</code></pre>
<p><strong>è·å–æ³¨å†Œè¡¨ä¿¡æ¯</strong></p>
<p>è·å–ç‰¹å®šæ³¨å†Œè¡¨çš„é…ç½®è¯¦ç»†ä¿¡æ¯ï¼Œä¾‹å¦‚å…¶ç«¯ç‚¹å’Œåˆ›å»ºæ—¥æœŸã€‚</p>
<pre><code class="hljs language-bash" lang="bash">curl -X GET \
  -H <span class="hljs-string">"Content-Type: application/json"</span> \
  -H <span class="hljs-string">"Authorization: Bearer <span class="hljs-variable">$DIGITALOCEAN_TOKEN</span>"</span> \
  <span class="hljs-string">"https://api.digitalocean.com/v2/registries/example"</span>
</code></pre>
<p><strong>è·å– Docker å‡­è¯</strong></p>
<p>ä¸ºç‰¹å®šæ³¨å†Œè¡¨ç”Ÿæˆé™å®šèŒƒå›´çš„å‡­è¯ã€‚è¿™å¯¹äºé…ç½®éš”ç¦»çš„ CI/CD æµæ°´çº¿è‡³å…³é‡è¦ï¼ˆä¾‹å¦‚ï¼Œå…è®¸è¿è¡Œå™¨ä»…æ¨é€åˆ°é¢„å‘å¸ƒæ³¨å†Œè¡¨ï¼‰ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">curl -X GET \
  -H <span class="hljs-string">"Content-Type: application/json"</span> \
  -H <span class="hljs-string">"Authorization: Bearer <span class="hljs-variable">$DIGITALOCEAN_TOKEN</span>"</span> \
  <span class="hljs-string">"https://api.digitalocean.com/v2/registries/example/docker-credentials"</span>
</code></pre>
<p><strong>å¯åŠ¨åƒåœ¾å›æ”¶</strong></p>
<p>åƒåœ¾å›æ”¶å¯¹äºç®¡ç†æ‚¨ä¸“ä¸šç‰ˆè®¡åˆ’çš„å…±äº«å­˜å‚¨æ± è‡³å…³é‡è¦ã€‚ä¸ºç‰¹å®šæ³¨å†Œè¡¨æ˜¾å¼è§¦å‘åƒåœ¾å›æ”¶ä»¥æ¸…é™¤æ— æ ‡ç­¾çš„æ¸…å•ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">curl -X POST \
  -H <span class="hljs-string">"Content-Type: application/json"</span> \
  -H <span class="hljs-string">"Authorization: Bearer <span class="hljs-variable">$DIGITALOCEAN_TOKEN</span>"</span> \
  <span class="hljs-string">"https://api.digitalocean.com/v2/registries/example/garbage-collection"</span>
</code></pre>
<p><strong>åˆ é™¤æ³¨å†Œè¡¨</strong></p>
<p>åœ¨å¤šæ³¨å†Œè¡¨è®¾ç½®ä¸­ï¼Œæ‚¨å¿…é¡»ä½¿ç”¨ <code>v2/registries</code> ç«¯ç‚¹æ¥åˆ é™¤æ³¨å†Œè¡¨ã€‚æ—§çš„ç«¯ç‚¹æ— æ³•åŒºåˆ†è¦åˆ é™¤å“ªä¸ªæ³¨å†Œè¡¨ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">curl -X DELETE \
  -H <span class="hljs-string">"Content-Type: application/json"</span> \
  -H <span class="hljs-string">"Authorization: Bearer <span class="hljs-variable">$DIGITALOCEAN_TOKEN</span>"</span> \
  <span class="hljs-string">"https://api.digitalocean.com/v2/registries/example"</span>
</code></pre>
<p>æˆ‘ä»¬çš„å‘½ä»¤è¡Œå·¥å…· <code>doctl</code> å’Œ Terraform æä¾›å•†ç°å·²åŒ…å«å¯¹ç®¡ç† DigitalOcean å®¹å™¨æ³¨å†Œè¡¨çš„æ”¯æŒã€‚</p>
<p><strong>3ã€é€šè¿‡CLI</strong></p>
<p>ä¸ API æ›´æ–°åŒæ­¥ï¼Œæˆ‘ä»¬çš„å‘½ä»¤è¡Œå·¥å…· <code>doctl</code> ç°åœ¨æ–°å¢äº†ä¸€ä¸ªå¤æ•°åŒ–çš„å­å‘½ä»¤ï¼š<code>registries</code>ã€‚æ­¤å­å‘½ä»¤æ˜¯ç®¡ç†æ³¨å†Œè¡¨çš„æ–°è§„èŒƒï¼Œåæ˜ äº†æ–°çš„ API å‘½åç©ºé—´ã€‚è¯·æ³¨æ„ï¼Œæ—§çš„ <code>registry</code> å­å‘½ä»¤å°†åœ¨æœªæ¥çš„ç‰ˆæœ¬ä¸­å¼ƒç”¨ã€‚</p>
<p><strong>åˆ›å»ºæ³¨å†Œè¡¨</strong></p>
<p>è¦åˆ›å»ºæ–°æ³¨å†Œè¡¨ï¼Œä½¿ç”¨ <code>create</code> å‘½ä»¤å¹¶æŒ‡å®šå”¯ä¸€åç§°ã€ç›®æ ‡åŒºåŸŸå’Œè®¢é˜…å±‚çº§ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">doctl \
  -t $DIGITALOCEAN_TOKEN \
  registries create cool-reg \
  <span class="hljs-attr">--region</span>=blr1 \
  <span class="hljs-attr">--subscription-tier</span>=professional
</code></pre>
<p>æ³¨æ„ï¼šé€‰æ‹©ä¸“ä¸šç‰ˆå±‚çº§ä»¥åˆ›å»ºå’Œç®¡ç†å¤šä¸ªæ³¨å†Œè¡¨ã€‚</p>
<p><strong>åˆ—å‡ºæ‰€æœ‰æ³¨å†Œè¡¨</strong></p>
<p>é€šè¿‡æ£€ç´¢ä¸æ‚¨è´¦æˆ·å…³è”çš„æ‰€æœ‰æ³¨å†Œè¡¨åˆ—è¡¨æ¥å®¡æ ¸æ‚¨çš„åŸºç¡€æ¶æ„ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">doctl \
  -t <span class="hljs-variable">$DIGITALOCEAN_TOKEN</span> \
  registries list
</code></pre>
<p><strong>è·å–æ³¨å†Œè¡¨ä¿¡æ¯</strong></p>
<p>è·å–ç‰¹å®šæ³¨å†Œè¡¨çš„é…ç½®è¯¦ç»†ä¿¡æ¯ï¼Œä¾‹å¦‚å…¶ç«¯ç‚¹å’ŒåŒºåŸŸæ ‡è¯†ã€‚</p>
<pre><code class="hljs language-swift" lang="swift">doctl \
  <span class="hljs-operator">-</span>t <span class="hljs-variable">$DIGITALOCEAN_TOKEN</span> \
  registries <span class="hljs-keyword">get</span> cool<span class="hljs-operator">-</span>reg
</code></pre>
<p><strong>åˆ é™¤æ³¨å†Œè¡¨</strong></p>
<p>ä½¿ç”¨ <code>delete</code> å‘½ä»¤åˆ é™¤ç‰¹å®šæ³¨å†Œè¡¨ã€‚åˆ é™¤å‰ä¼šæ”¶åˆ°æç¤ºï¼Œå¦‚æœæ‚¨ç¡®è®¤ï¼Œè¯·é€‰æ‹©"yes"ã€‚</p>
<pre><code class="hljs language-perl" lang="perl">doctl \
  -t $DIGITALOCEAN_TOKEN \
  registries <span class="hljs-keyword">delete</span> cool-reg
</code></pre>
<p>æœ‰å…³å¯ç”¨å‘½ä»¤çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·é˜…è¯» <code>doctl registries help</code>ã€‚</p>
<h2 data-id="heading-1">é‡è¦é™åˆ¶ä¸æ³¨æ„äº‹é¡¹</h2>
<p>åœ¨é‡‡ç”¨æ­¤åŠŸèƒ½æ—¶ï¼Œè¯·æ³¨æ„ä»¥ä¸‹æ“ä½œé™åˆ¶ï¼š</p>
<ul>
<li>â€‹<strong>10 ä¸ªæ³¨å†Œè¡¨é™åˆ¶</strong>â€‹ï¼šæ¯ä¸ªè®¢é˜…ä¸“ä¸šç‰ˆè®¡åˆ’çš„å›¢é˜Ÿæœ€å¤šå¯ä»¥åˆ›å»º 10 ä¸ªæ³¨å†Œè¡¨ã€‚</li>
<li>â€‹<strong>APIå‘½åç©ºé—´</strong>â€‹ï¼šé’ˆå¯¹å¤šä¸ªæ³¨å†Œè¡¨çš„æ“ä½œå¿…é¡»ä½¿ç”¨ <code>v2/registries</code> è·¯å¾„ã€‚å•æ•°çš„ <code>v2/registry</code> è·¯å¾„å°†é»˜è®¤æŒ‡å‘æ‚¨çš„"ä¸»è¦"æ³¨å†Œè¡¨ï¼Œæˆ–è€…åœ¨ä¸Šä¸‹æ–‡ä¸æ˜ç¡®æ—¶ä¼šå¤±è´¥ã€‚</li>
<li>â€‹<strong>è®¡åˆ’é™çº§</strong>â€‹ï¼šå¦‚æœæ‚¨å¸Œæœ›ä»ä¸“ä¸šç‰ˆè®¡åˆ’é™çº§åˆ°å…¥é—¨ç‰ˆæˆ–åŸºç¡€ç‰ˆï¼Œæ‚¨å¿…é¡»å…ˆæ‰‹åŠ¨åˆ é™¤æ‰€æœ‰"æ¬¡è¦"æ³¨å†Œè¡¨ï¼Œç›´åˆ°åªå‰©ä¸€ä¸ªä¸ºæ­¢ã€‚</li>
</ul>
<p>å¤šæ³¨å†Œè¡¨æ”¯æŒç°å·²æ­£å¼é¢å‘ DigitalOcean å®¹å™¨æ³¨å†Œè¡¨ä¸“ä¸šç‰ˆè®¡åˆ’çš„æ‰€æœ‰ç”¨æˆ·å¼€æ”¾ã€‚è¯·è®¿é—®å®¹å™¨æ³¨å†Œè¡¨äº§å“é¡µé¢è·å–å®Œæ•´æ–‡æ¡£ã€‚æˆ‘ä»¬æœŸå¾…çœ‹åˆ°æ‚¨å¦‚ä½•åˆ©ç”¨è¿™ç§çµæ´»æ€§æ„å»ºæ›´å®‰å…¨ã€åˆè§„ä¸”é«˜æ€§èƒ½çš„äº¤ä»˜æµæ°´çº¿ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Claude Code é…ç½® Figma MCP å®æˆ˜æŒ‡å—]]></title>    <link>https://juejin.cn/post/7594396779022925887</link>    <guid>https://juejin.cn/post/7594396779022925887</guid>    <pubDate>2026-01-12T13:10:17.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594396779022925887" data-draft-id="7594322573452132395" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Claude Code é…ç½® Figma MCP å®æˆ˜æŒ‡å—"/> <meta itemprop="keywords" content="AIç¼–ç¨‹,Claude"/> <meta itemprop="datePublished" content="2026-01-12T13:10:17.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¥‡èˆç²¾é€‰"/> <meta itemprop="url" content="https://juejin.cn/user/4388906147515367"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Claude Code é…ç½® Figma MCP å®æˆ˜æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4388906147515367/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¥‡èˆç²¾é€‰
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-12T13:10:17.000Z" title="Mon Jan 12 2026 13:10:17 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>Claude Code æ¨å‡ºåï¼ŒMCPï¼ˆModel Context Protocolï¼‰çš„é…ç½®æˆä¸ºäº†è®¸å¤šå¼€å‘è€…å…³æ³¨çš„ç„¦ç‚¹ã€‚è™½ç„¶å®˜æ–¹æä¾›äº†åŸºç¡€æ•™ç¨‹ï¼Œä½†åœ¨å®é™…é…ç½® Figma MCP æ—¶ï¼Œæˆ‘é‡åˆ°äº†ä¸å°‘å‘ã€‚æœ¬æ–‡å°†åˆ†äº«æˆ‘çš„å®Œæ•´é…ç½®ç»éªŒï¼Œå¸®åŠ©ä½ å°‘èµ°å¼¯è·¯ã€‚</p>
<h2 data-id="heading-1">MCP åŸºç¡€ç®¡ç†å‘½ä»¤</h2>
<p>åœ¨å¼€å§‹é…ç½®ä¹‹å‰ï¼Œå…ˆäº†è§£ Claude Code ä¸­ MCP çš„åŸºæœ¬ç®¡ç†å‘½ä»¤ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åˆ—å‡ºæ‰€æœ‰å·²é…ç½®çš„æœåŠ¡å™¨</span>
claude mcp list

<span class="hljs-comment"># æŸ¥çœ‹ç‰¹å®šæœåŠ¡å™¨çš„è¯¦ç»†ä¿¡æ¯</span>
claude mcp get github

<span class="hljs-comment"># åˆ é™¤æœåŠ¡å™¨</span>
claude mcp remove github

<span class="hljs-comment"># åœ¨ Claude Code ä¸­æ£€æŸ¥æœåŠ¡å™¨çŠ¶æ€</span>
/mcp
</code></pre>
<h3 data-id="heading-2">æ·»åŠ è¿œç¨‹ HTTP æœåŠ¡</h3>
<p>å¯¹äºè¿œç¨‹ HTTP MCP æœåŠ¡ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åŸºç¡€æ·»åŠ å‘½ä»¤</span>
claude mcp add --transport http &lt;name&gt; &lt;url&gt;

<span class="hljs-comment"># ç¤ºä¾‹ï¼šè¿æ¥åˆ°æœ¬åœ° HTTP MCP æœåŠ¡å™¨</span>
claude mcp add --transport http my-server http://localhost:8080/mcp

<span class="hljs-comment"># éœ€è¦è®¤è¯æ—¶ä½¿ç”¨ --header å‚æ•°</span>
claude mcp add --transport http secure-api https://api.example.com/mcp \
  --header <span class="hljs-string">"Authorization: Bearer your-token"</span>
</code></pre>
<h2 data-id="heading-3">é…ç½® Figma MCP çš„ä¸¤æ¡è·¯å¾„</h2>
<p>åœ¨é…ç½®è¿‡ç¨‹ä¸­ï¼Œæˆ‘å‘ç° Figma MCP æœ‰ä¸¤ä¸ªç‰ˆæœ¬å¯é€‰ï¼š</p>
<ol>
<li><strong>Figma å®˜æ–¹ MCP Server</strong>ï¼šåŠŸèƒ½å¼ºå¤§ä½†æœ‰ä½¿ç”¨é™åˆ¶</li>
<li><strong>å¼€æºç‰ˆ Figma-Context-MCP</strong>ï¼šå®Œå…¨å…è´¹ä½†åŠŸèƒ½ç›¸å¯¹ç²¾ç®€</li>
</ol>
<h3 data-id="heading-4">æ–¹æ¡ˆä¸€ï¼šFigma å®˜æ–¹ MCPï¼ˆæ¨èä»˜è´¹ç”¨æˆ·ï¼‰</h3>
<h4 data-id="heading-5">å¿«é€Ÿé…ç½®</h4>
<p>åœ¨ç»ˆç«¯è¿è¡Œä»¥ä¸‹å‘½ä»¤å³å¯å®Œæˆé…ç½®ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">claude mcp add --transport http figma https://mcp.figma.com/mcp
</code></pre>
<p>è¿™ä¸ªå‘½ä»¤å®é™…ä¸Šä¼šä¿®æ”¹ç”¨æˆ·ç›®å½•ä¸‹çš„ <code>.claude.json</code> æ–‡ä»¶ã€‚é…ç½®å®Œæˆåçš„æ•ˆæœï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f47aba18dc51402f8c54bdfa5393f8b4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aWH6Iie57K-6YCJ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768828217&amp;x-signature=69NfCWPX3aYMWy0D37GAvQvSOjE%3D" alt="å®˜æ–¹ MCP é…ç½®æˆåŠŸ" loading="lazy"/></p>
<h4 data-id="heading-6">æˆæƒè¿æ¥</h4>
<p>é¦–æ¬¡ä½¿ç”¨éœ€è¦æˆæƒ Figma è´¦å·ã€‚å¯åŠ¨ Claude Code åï¼Œè¾“å…¥ <code>/mcp</code> æŸ¥çœ‹è¿æ¥çŠ¶æ€ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c5dc6a6a78d74ec08550286a0294f9dd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aWH6Iie57K-6YCJ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768828217&amp;x-signature=VTGzHKw0Ey54t%2FSu5XfjcABxBIQ%3D" alt="Figma å·²è¿æ¥" loading="lazy"/></p>
<p>å¦‚æœæœªæˆæƒï¼Œä¼šå‡ºç°æˆæƒé€‰é¡¹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e4482b69d76e475ca5aed3df468cf490~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aWH6Iie57K-6YCJ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768828217&amp;x-signature=bRdxFWI4t%2BWzfzLurSs4iC4jHPg%3D" alt="æˆæƒæç¤º" loading="lazy"/></p>
<h4 data-id="heading-7">ä½¿ç”¨é™åˆ¶</h4>
<p><strong>é‡è¦æç¤º</strong>ï¼šå…è´¹ç”¨æˆ·æ¯æœˆä»…æœ‰ <strong>6 æ¬¡</strong>ä½¿ç”¨é¢åº¦ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f44395c20f8343f7805d119d4a1e1410~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aWH6Iie57K-6YCJ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768828217&amp;x-signature=jsRwQNBL6l9ZHudy%2Bjqx9uhtHlc%3D" alt="ä½¿ç”¨é™åˆ¶æç¤º" loading="lazy"/></p>
<p>å®é™…ä½“éªŒä¸­ï¼Œç”Ÿæˆä¸€ä¸ª Figma é¡µé¢åŸºæœ¬ä¼šè€—å°½è¿™ 6 æ¬¡æœºä¼šï¼Œç”šè‡³å¯èƒ½ä¸å¤Ÿç”¨ã€‚å› æ­¤ï¼Œ<strong>é™¤éä½ æ˜¯ä»˜è´¹ç”¨æˆ·ï¼Œå¦åˆ™ä¸å»ºè®®åœ¨æ­£å¼é¡¹ç›®ä¸­ä½¿ç”¨å®˜æ–¹ MCP</strong>ã€‚</p>
<h4 data-id="heading-8">å®˜æ–¹ MCP çš„ä¼˜åŠ¿</h4>
<p>å°½ç®¡æœ‰ä½¿ç”¨é™åˆ¶,å®˜æ–¹ MCP æä¾›äº† <strong>10 ä¸ªå·¥å…·</strong>ï¼ŒåŠŸèƒ½éå¸¸å…¨é¢ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ca0f92f70d9d4c81842968196e7f60cc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aWH6Iie57K-6YCJ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768828217&amp;x-signature=ouux00Ogpc8PSzIDvdA3QtGtm50%3D" alt="å®˜æ–¹ MCP å·¥å…·åˆ—è¡¨" loading="lazy"/></p>
<p>å®˜æ–¹ç‰ˆæœ¬è·å–çš„è®¾è®¡ç¨¿ä¸Šä¸‹æ–‡æ›´åŠ è¯¦ç»†ä¸°å¯Œï¼ŒåŒ…æ‹¬ï¼š</p>
<ul>
<li>å®Œæ•´çš„å…ƒæ•°æ®</li>
<li>è®¾è®¡ä¸Šä¸‹æ–‡ä¿¡æ¯</li>
<li>é«˜è´¨é‡æˆªå›¾</li>
</ul>
<p>è¿™äº›ä¿¡æ¯èƒ½æ˜¾è‘—æå‡ä»£ç ç”Ÿæˆçš„å‡†ç¡®åº¦ã€‚</p>
<h3 data-id="heading-9">æ–¹æ¡ˆäºŒï¼šå¼€æº Figma-Context-MCPï¼ˆæ¨èå…è´¹ç”¨æˆ·ï¼‰</h3>
<p>å¯¹äºé¢„ç®—æœ‰é™æˆ–éœ€è¦é¢‘ç¹ä½¿ç”¨çš„å¼€å‘è€…ï¼Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FGLips%2FFigma-Context-MCP" target="_blank" title="https://github.com/GLips/Figma-Context-MCP" ref="nofollow noopener noreferrer">Figma-Context-MCP</a> æ˜¯æ›´å¥½çš„é€‰æ‹©ã€‚</p>
<h4 data-id="heading-10">é…ç½®æ­¥éª¤</h4>
<p><strong>æ­¥éª¤ 1ï¼šå…¨å±€å®‰è£…ä¾èµ–</strong></p>
<pre><code class="hljs language-bash" lang="bash">npm install -g figma-developer-mcp
</code></pre>
<p><strong>æ­¥éª¤ 2ï¼šåˆ›å»ºé…ç½®æ–‡ä»¶</strong></p>
<p>åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º <code>.mcp.json</code> æ–‡ä»¶ï¼ˆæˆ–ä¿®æ”¹ <code>~/.claude.json</code> ä»¥å®ç°å…¨å±€é…ç½®ï¼‰ï¼Œæ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"mcpServers"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"figma-developer-mcp"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"command"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"figma-developer-mcp"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"args"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
        <span class="hljs-string">"--stdio"</span>
      <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"env"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"FIGMA_API_KEY"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"[YOUR_FIGMA_API_KEY]"</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>é…ç½®è¯´æ˜</strong>ï¼š</p>
<ul>
<li><code>figma-developer-mcp</code>ï¼šè‡ªå®šä¹‰åˆ«åï¼Œé¿å…ä¸å®˜æ–¹ MCP å†²çª</li>
<li><code>FIGMA_API_KEY</code>ï¼šéœ€è¦åœ¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fhelp.figma.com%2Fhc%2Fen-us%2Farticles%2F8085703771159-Manage-personal-access-tokens" target="_blank" title="https://help.figma.com/hc/en-us/articles/8085703771159-Manage-personal-access-tokens" ref="nofollow noopener noreferrer">Figma è®¾ç½®</a>ä¸­ç”Ÿæˆä¸ªäººè®¿é—®ä»¤ç‰Œ</li>
</ul>
<p><strong>æ­¥éª¤ 3ï¼šé‡å¯å¹¶æˆæƒ</strong></p>
<p>é…ç½®å®Œæˆåï¼Œé‡å¯ Claude Codeï¼ŒåŒæ„ä½¿ç”¨è¯¥ MCPï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9ac76220c0e2484c94c7010477c98c96~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aWH6Iie57K-6YCJ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768828217&amp;x-signature=P6O7%2BgNM%2FeFDsXmhdbTB2mCcXDA%3D" alt="æˆæƒå¼€æº MCP" loading="lazy"/></p>
<p><strong>æ­¥éª¤ 4ï¼šéªŒè¯é…ç½®</strong></p>
<p>ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤éªŒè¯é…ç½®æ˜¯å¦æˆåŠŸï¼š</p>
<pre><code class="hljs language-bash" lang="bash">claude mcp list
<span class="hljs-comment"># æˆ–åœ¨ Claude Code ä¸­è¾“å…¥</span>
/mcp
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/10c0295334c348febd8dc20de7ffc8b0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aWH6Iie57K-6YCJ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768828217&amp;x-signature=yS4BCjvQbw3VCD9V9GuSlKeLWfw%3D" alt="å¼€æº MCP é…ç½®æˆåŠŸ" loading="lazy"/></p>
<h4 data-id="heading-11">å¼€æºç‰ˆæœ¬çš„ç‰¹ç‚¹</h4>
<p>å¼€æº MCP æä¾› <strong>2 ä¸ªæ ¸å¿ƒå·¥å…·</strong>ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0f45622332b740168c4c9e2e16f4d214~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aWH6Iie57K-6YCJ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768828217&amp;x-signature=FWOgwP9uZGyyAFl4NRnShlQUqEo%3D" alt="å¼€æº MCP å·¥å…·åˆ—è¡¨" loading="lazy"/></p>
<ol>
<li><strong>è·å– Figma å›¾ç‰‡</strong>ï¼šæå–è®¾è®¡ç¨¿çš„è§†è§‰å†…å®¹</li>
<li><strong>è·å– Figma æ•°æ®</strong>ï¼šæå–è®¾è®¡ç¨¿çš„ç»“æ„æ•°æ®</li>
</ol>
<p>è™½ç„¶å·¥å…·æ•°é‡è¾ƒå°‘ï¼Œä½†å®Œå…¨å…è´¹ä¸”æ— ä½¿ç”¨é™åˆ¶ã€‚</p>
<h2 data-id="heading-12">å®æˆ˜æŠ€å·§ï¼šå¦‚ä½•æå‡å¼€æº MCP çš„ç”Ÿæˆæ•ˆæœ</h2>
<p>ä½¿ç”¨å¼€æºç‰ˆ Figma MCP æ—¶ï¼Œæˆ‘æ€»ç»“äº†ä»¥ä¸‹æŠ€å·§æ¥æå‡ä»£ç ç”Ÿæˆè´¨é‡ï¼š</p>
<h3 data-id="heading-13">æŠ€å·§ä¸€ï¼šç»“åˆæˆªå›¾ä½¿ç”¨</h3>
<p>åœ¨è°ƒç”¨ Figma MCP å·¥å…·ä¹‹å‰ï¼Œå…ˆæ‰‹åŠ¨ä¸Šä¼ è®¾è®¡ç¨¿æˆªå›¾ï¼Œç„¶åå†è°ƒç”¨ MCP è·å–æ•°æ®ã€‚<strong>è§†è§‰ä¿¡æ¯ + ç»“æ„æ•°æ®</strong>çš„ç»„åˆèƒ½æ˜¾è‘—æå‡è¿˜åŸåº¦ã€‚</p>
<h3 data-id="heading-14">æŠ€å·§äºŒï¼šå‚è€ƒå®˜æ–¹æœ€ä½³å®è·µ</h3>
<p>Figma å®˜æ–¹æä¾›äº†ä¸ Claude Code ç»“åˆä½¿ç”¨çš„<a href="https://link.juejin.cn?target=https%3A%2F%2Fdevelopers.figma.com%2Fdocs%2Ffigma-mcp-server%2Fadd-custom-rules%2F%23rules-to-ensure-consistently-good-output" target="_blank" title="https://developers.figma.com/docs/figma-mcp-server/add-custom-rules/#rules-to-ensure-consistently-good-output" ref="nofollow noopener noreferrer">æœ€ä½³å®è·µæ–‡æ¡£</a>ï¼Œä¸»è¦åŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>CLAUDE.md æ–‡ä»¶é…ç½®</strong>ï¼šå®šä¹‰é¡¹ç›®çº§åˆ«çš„è§„åˆ™å’Œçº¦æŸ</li>
<li><strong>é«˜æ•ˆæç¤ºè¯æ¨¡æ¿</strong>ï¼šé’ˆå¯¹ Figma MCP ä¼˜åŒ–çš„æç¤ºè¯ç¤ºä¾‹</li>
<li><strong>è¾“å‡ºä¸€è‡´æ€§ä¿è¯</strong>ï¼šç¡®ä¿ç”Ÿæˆç»“æœç¬¦åˆé¢„æœŸçš„æŠ€å·§</li>
</ul>
<p>å³ä½¿ä½¿ç”¨å¼€æºç‰ˆæœ¬ï¼Œè¿™äº›å®è·µæ–¹æ³•åŒæ ·é€‚ç”¨ã€‚</p>
<h2 data-id="heading-15">æ€»ç»“ä¸å»ºè®®</h2>
<h3 data-id="heading-16">é€‰æ‹©å»ºè®®</h3>

























<table><thead><tr><th>ä½¿ç”¨åœºæ™¯</th><th>æ¨èæ–¹æ¡ˆ</th><th>ç†ç”±</th></tr></thead><tbody><tr><td>ä¸ªäººå­¦ä¹ /å°é¡¹ç›®</td><td>å¼€æº Figma-Context-MCP</td><td>å…è´¹æ— é™åˆ¶ï¼Œæ»¡è¶³åŸºæœ¬éœ€æ±‚</td></tr><tr><td>å•†ä¸šé¡¹ç›®ï¼ˆé¢„ç®—å……è¶³ï¼‰</td><td>Figma å®˜æ–¹ MCP</td><td>åŠŸèƒ½å…¨é¢ï¼Œç”Ÿæˆè´¨é‡æ›´é«˜</td></tr><tr><td>å•†ä¸šé¡¹ç›®ï¼ˆé¢„ç®—æœ‰é™ï¼‰</td><td>å¼€æº MCP + æ‰‹åŠ¨ä¼˜åŒ–</td><td>æ€§ä»·æ¯”æœ€é«˜</td></tr></tbody></table>
<h3 data-id="heading-17">é…ç½®è¦ç‚¹</h3>
<ol>
<li><strong>é¡¹ç›®çº§ vs å…¨å±€é…ç½®</strong>ï¼š
<ul>
<li>é¡¹ç›®çº§ï¼šåœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º <code>.mcp.json</code></li>
<li>å…¨å±€é…ç½®ï¼šä¿®æ”¹ <code>~/.claude.json</code></li>
</ul>
</li>
<li><strong>API Key å®‰å…¨</strong>ï¼š
<ul>
<li>ä¸è¦å°†åŒ…å« API Key çš„é…ç½®æ–‡ä»¶æäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶</li>
<li>å»ºè®®ä½¿ç”¨ç¯å¢ƒå˜é‡ç®¡ç†æ•æ„Ÿä¿¡æ¯</li>
</ul>
</li>
<li><strong>æ€§èƒ½ä¼˜åŒ–</strong>ï¼š
<ul>
<li>å¼€æºç‰ˆæœ¬å“åº”é€Ÿåº¦æ›´å¿«ï¼ˆæœ¬åœ°è¿è¡Œï¼‰</li>
<li>å®˜æ–¹ç‰ˆæœ¬å¯èƒ½å—ç½‘ç»œå½±å“</li>
</ul>
</li>
</ol>
<p>é€šè¿‡æœ¬æ–‡çš„é…ç½®æŒ‡å—ï¼Œç›¸ä¿¡ä½ å·²ç»èƒ½å¤Ÿæ ¹æ®è‡ªå·±çš„éœ€æ±‚é€‰æ‹©åˆé€‚çš„ Figma MCP æ–¹æ¡ˆã€‚æ— è®ºé€‰æ‹©å“ªç§æ–¹æ¡ˆï¼Œåˆç†è¿ç”¨éƒ½èƒ½å¤§å¹…æå‡å‰ç«¯å¼€å‘æ•ˆç‡ã€‚</p>
<hr/>
<p><strong>ç›¸å…³èµ„æº</strong>ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.claude.com%2F" target="_blank" title="https://docs.claude.com/" ref="nofollow noopener noreferrer">Claude Code å®˜æ–¹æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FGLips%2FFigma-Context-MCP" target="_blank" title="https://github.com/GLips/Figma-Context-MCP" ref="nofollow noopener noreferrer">Figma-Context-MCP GitHub</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdevelopers.figma.com%2Fdocs%2Ffigma-mcp-server%2F" target="_blank" title="https://developers.figma.com/docs/figma-mcp-server/" ref="nofollow noopener noreferrer">Figma MCP Server æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fhelp.figma.com%2Fhc%2Fen-us%2Farticles%2F8085703771159-Manage-personal-access-tokens" target="_blank" title="https://help.figma.com/hc/en-us/articles/8085703771159-Manage-personal-access-tokens" ref="nofollow noopener noreferrer">Figma API Token ç®¡ç†</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Milvus å‘é‡æ•°æ®åº“å®æˆ˜ï¼šä»é›¶æ„å»ºé«˜æ€§èƒ½ RAG ç³»ç»Ÿ]]></title>    <link>https://juejin.cn/post/7594103243685691435</link>    <guid>https://juejin.cn/post/7594103243685691435</guid>    <pubDate>2026-01-12T13:11:37.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594103243685691435" data-draft-id="7594396779022942271" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Milvus å‘é‡æ•°æ®åº“å®æˆ˜ï¼šä»é›¶æ„å»ºé«˜æ€§èƒ½ RAG ç³»ç»Ÿ"/> <meta itemprop="keywords" content="AIGC"/> <meta itemprop="datePublished" content="2026-01-12T13:11:37.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¥‡èˆç²¾é€‰"/> <meta itemprop="url" content="https://juejin.cn/user/4388906147515367"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Milvus å‘é‡æ•°æ®åº“å®æˆ˜ï¼šä»é›¶æ„å»ºé«˜æ€§èƒ½ RAG ç³»ç»Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4388906147515367/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¥‡èˆç²¾é€‰
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-12T13:11:37.000Z" title="Mon Jan 12 2026 13:11:37 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»20åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>åœ¨ AI åº”ç”¨å¿«é€Ÿå‘å±•çš„ä»Šå¤©ï¼Œå‘é‡æ•°æ®åº“å·²æˆä¸ºæ„å»ºæ™ºèƒ½æ£€ç´¢ç³»ç»Ÿçš„æ ¸å¿ƒåŸºç¡€è®¾æ–½ã€‚Milvus ä½œä¸ºä¸€æ¬¾å¼€æºçš„é«˜æ€§èƒ½å‘é‡æ•°æ®åº“ï¼Œåœ¨ RAGï¼ˆRetrieval-Augmented Generationï¼‰ç³»ç»Ÿä¸­å‘æŒ¥ç€å…³é”®ä½œç”¨ã€‚</p>
<p>æœ¬æ–‡å°†å¸¦ä½ ä»é›¶å¼€å§‹ï¼ŒåŸºäº Milvus æ„å»ºä¸€ä¸ªå®Œæ•´çš„ RAG ç³»ç»Ÿï¼Œæ¶µç›–æ•°æ®å‡†å¤‡ã€å‘é‡æ£€ç´¢ã€ç»“æœé‡æ’ã€ä½ç½®ä¼˜åŒ–ç­‰æ ¸å¿ƒç¯èŠ‚ï¼Œå¹¶åˆ†äº«ç”Ÿäº§ç¯å¢ƒä¸­çš„æœ€ä½³å®è·µå’Œæ€§èƒ½ä¼˜åŒ–æŠ€å·§ã€‚</p>
<hr/>
<h2 data-id="heading-1">1. Milvus ç®€ä»‹ä¸æ ¸å¿ƒç‰¹æ€§</h2>
<h3 data-id="heading-2">1.1 ä»€ä¹ˆæ˜¯ Milvusï¼Ÿ</h3>
<p>Milvus æ˜¯ä¸€ä¸ªå¼€æºçš„å‘é‡æ•°æ®åº“ï¼Œä¸“ä¸º AI åº”ç”¨è®¾è®¡ï¼Œæ”¯æŒå¤§è§„æ¨¡å‘é‡æ•°æ®çš„å­˜å‚¨ã€ç´¢å¼•å’Œæ£€ç´¢ã€‚å®ƒå…·å¤‡ä»¥ä¸‹æ ¸å¿ƒç‰¹æ€§ï¼š</p>
<ul>
<li><strong>é«˜æ€§èƒ½</strong>ï¼šæ¯«ç§’çº§å‘é‡æ£€ç´¢ï¼Œæ”¯æŒç™¾ä¸‡åˆ°ç™¾äº¿çº§å‘é‡</li>
<li><strong>æ˜“ç”¨æ€§</strong>ï¼šæä¾› Python SDKï¼ŒAPI ç®€æ´ç›´è§‚</li>
<li><strong>å¯æ‰©å±•æ€§</strong>ï¼šæ”¯æŒåˆ†å¸ƒå¼éƒ¨ç½²ï¼Œæ°´å¹³æ‰©å±•</li>
<li><strong>å¤šç´¢å¼•æ”¯æŒ</strong>ï¼šHNSWã€IVFã€DiskANN ç­‰å¤šç§ç´¢å¼•ç®—æ³•</li>
<li><strong>å¤šæ¨¡æ€å‹å¥½</strong>ï¼šæ”¯æŒæ–‡æœ¬ã€å›¾åƒã€éŸ³é¢‘ç­‰å¤šç§æ•°æ®ç±»å‹</li>
</ul>
<h3 data-id="heading-3">1.2 ä¸ºä»€ä¹ˆé€‰æ‹© Milvusï¼Ÿ</h3>
<p>åœ¨æ„å»º RAG ç³»ç»Ÿæ—¶ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªèƒ½å¤Ÿï¼š</p>
<ol>
<li><strong>å¿«é€Ÿæ£€ç´¢</strong>ï¼šä»å¤§è§„æ¨¡æ–‡æ¡£åº“ä¸­å¿«é€Ÿæ‰¾åˆ°ç›¸å…³æ–‡æ¡£</li>
<li><strong>ç²¾ç¡®åŒ¹é…</strong>ï¼šé€šè¿‡å‘é‡ç›¸ä¼¼åº¦æ‰¾åˆ°è¯­ä¹‰ç›¸å…³çš„æ–‡æ¡£</li>
<li><strong>æ˜“äºé›†æˆ</strong>ï¼šä¸ç°æœ‰ AI å·¥å…·é“¾æ— ç¼é›†æˆ</li>
<li><strong>ç”Ÿäº§å°±ç»ª</strong>ï¼šæ”¯æŒé«˜å¹¶å‘ã€é«˜å¯ç”¨éƒ¨ç½²</li>
</ol>
<p>Milvus å®Œç¾æ»¡è¶³è¿™äº›éœ€æ±‚ï¼Œå·²æˆä¸º RAG ç³»ç»Ÿçš„é¦–é€‰å‘é‡æ•°æ®åº“ã€‚</p>
<h3 data-id="heading-4">1.3 Milvus Lite vs Milvus Server</h3>
<p>Milvus æä¾›äº†ä¸¤ç§ä½¿ç”¨æ–¹å¼ï¼š</p>



































<table><thead><tr><th>ç‰¹æ€§</th><th>Milvus Lite</th><th>Milvus Server</th></tr></thead><tbody><tr><td><strong>éƒ¨ç½²æ–¹å¼</strong></td><td>æœ¬åœ°æ–‡ä»¶ï¼Œæ— éœ€å¯åŠ¨æœåŠ¡</td><td>ç‹¬ç«‹æœåŠ¡ï¼Œéœ€è¦å¯åŠ¨</td></tr><tr><td><strong>é€‚ç”¨åœºæ™¯</strong></td><td>å¼€å‘ã€æµ‹è¯•ã€å°è§„æ¨¡åº”ç”¨</td><td>ç”Ÿäº§ç¯å¢ƒã€å¤§è§„æ¨¡åº”ç”¨</td></tr><tr><td><strong>æ•°æ®å­˜å‚¨</strong></td><td>æœ¬åœ°æ–‡ä»¶ï¼ˆ.dbï¼‰</td><td>åˆ†å¸ƒå¼å­˜å‚¨</td></tr><tr><td><strong>æ€§èƒ½</strong></td><td>é€‚åˆä¸­å°è§„æ¨¡ï¼ˆ&lt;100 ä¸‡å‘é‡ï¼‰</td><td>æ”¯æŒå¤§è§„æ¨¡ï¼ˆç™¾ä¸‡åˆ°ç™¾äº¿çº§ï¼‰</td></tr><tr><td><strong>ä½¿ç”¨æ–¹å¼</strong></td><td><code>MilvusClient(uri="./db")</code></td><td><code>connections.connect(host="localhost")</code></td></tr></tbody></table>
<p><strong>æœ¬æ–‡ä½¿ç”¨ Milvus Lite</strong>ï¼Œå› ä¸ºå®ƒæ›´ç®€å•ï¼Œé€‚åˆå¿«é€Ÿä¸Šæ‰‹å’Œå¼€å‘æµ‹è¯•ã€‚</p>
<hr/>
<h2 data-id="heading-5">2. ç¯å¢ƒå‡†å¤‡ä¸å®‰è£…</h2>
<h3 data-id="heading-6">2.1 ç³»ç»Ÿè¦æ±‚</h3>
<ul>
<li>Python 3.8+</li>
<li>8GB+ RAMï¼ˆæ¨è 16GBï¼‰</li>
<li>10GB+ ç£ç›˜ç©ºé—´ï¼ˆç”¨äºå­˜å‚¨å‘é‡å’Œæ¨¡å‹ï¼‰</li>
</ul>
<h3 data-id="heading-7">2.2 å®‰è£…ä¾èµ–</h3>
<p>é¦–å…ˆåˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼ˆæ¨èï¼‰ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ</span>
python3 -m venv venv

<span class="hljs-comment"># æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ</span>
<span class="hljs-comment"># macOS/Linux:</span>
<span class="hljs-built_in">source</span> venv/bin/activate
<span class="hljs-comment"># Windows:</span>
<span class="hljs-comment"># venv\Scripts\activate</span>
</code></pre>
<p>å®‰è£…å¿…è¦çš„ä¾èµ–ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">pip install pymilvus[milvus_lite]  <span class="hljs-comment"># åŒ…å«Milvus Lite</span>
pip install sentence-transformers   <span class="hljs-comment"># Embeddingæ¨¡å‹</span>
pip install transformers            <span class="hljs-comment"># é‡æ’æ¨¡å‹</span>
pip install torch                   <span class="hljs-comment"># PyTorchï¼ˆé‡æ’æ¨¡å‹éœ€è¦ï¼‰</span>
</code></pre>
<p><strong>é‡è¦æç¤º</strong>ï¼šå¿…é¡»å®‰è£… <code>pymilvus[milvus_lite]</code>ï¼ˆä¸æ˜¯ <code>pymilvus</code>ï¼‰ï¼Œè¿™æ ·æ‰èƒ½ä½¿ç”¨ Milvus Lite çš„æœ¬åœ°æ–‡ä»¶åŠŸèƒ½ã€‚</p>
<h3 data-id="heading-8">2.3 éªŒè¯å®‰è£…</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> pymilvus <span class="hljs-keyword">import</span> MilvusClient

<span class="hljs-comment"># æµ‹è¯•Milvus Liteè¿æ¥</span>
client = MilvusClient(uri=<span class="hljs-string">"./test.db"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"âœ“ Milvus Lite å®‰è£…æˆåŠŸï¼"</span>)
</code></pre>
<hr/>
<h2 data-id="heading-9">3. æ•°æ®å‡†å¤‡ï¼šä»æ–‡æ¡£åˆ°å‘é‡</h2>
<h3 data-id="heading-10">3.1 æ–‡æ¡£é¢„å¤„ç†</h3>
<p>åœ¨å®é™…åº”ç”¨ä¸­ï¼Œæˆ‘ä»¬éœ€è¦å°†åŸå§‹æ–‡æ¡£è½¬æ¢ä¸ºå‘é‡ã€‚è¿™ä¸ªè¿‡ç¨‹åŒ…æ‹¬ï¼š</p>
<ol>
<li><strong>æ–‡æ¡£åŠ è½½</strong>ï¼šä»æ–‡ä»¶ã€æ•°æ®åº“æˆ– API åŠ è½½æ–‡æ¡£</li>
<li><strong>æ–‡æ¡£åˆ†å—</strong>ï¼šå°†é•¿æ–‡æ¡£åˆ‡åˆ†ä¸ºè¾ƒå°çš„å—ï¼ˆchunksï¼‰</li>
<li><strong>å‘é‡åŒ–</strong>ï¼šä½¿ç”¨ Embedding æ¨¡å‹å°†æ–‡æœ¬è½¬æ¢ä¸ºå‘é‡</li>
</ol>
<h3 data-id="heading-11">3.2 æ–‡æ¡£åˆ†å—ç­–ç•¥</h3>
<p>æ–‡æ¡£åˆ†å—æ˜¯ RAG ç³»ç»Ÿçš„å…³é”®æ­¥éª¤ï¼Œç›´æ¥å½±å“æ£€ç´¢æ•ˆæœï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">chunk_document</span>(<span class="hljs-params">text, chunk_size=<span class="hljs-number">512</span>, overlap=<span class="hljs-number">50</span></span>):
    <span class="hljs-string">"""
    æ–‡æ¡£åˆ†å—

    Args:
        text: åŸå§‹æ–‡æ¡£æ–‡æœ¬
        chunk_size: æ¯å—çš„å¤§å°ï¼ˆå­—ç¬¦æ•°æˆ–tokensï¼‰
        overlap: å—ä¹‹é—´çš„é‡å å¤§å°ï¼Œä¿è¯ä¸Šä¸‹æ–‡è¿è´¯æ€§

    Returns:
        æ–‡æ¡£å—åˆ—è¡¨
    """</span>
    chunks = []
    start = <span class="hljs-number">0</span>

    <span class="hljs-keyword">while</span> start &lt; <span class="hljs-built_in">len</span>(text):
        end = start + chunk_size
        chunk = text[start:end]
        chunks.append(chunk)
        start = end - overlap  <span class="hljs-comment"># é‡å ï¼Œä¿è¯ä¸Šä¸‹æ–‡è¿è´¯</span>

    <span class="hljs-keyword">return</span> chunks
</code></pre>
<p><strong>åˆ†å—ç­–ç•¥é€‰æ‹©</strong>ï¼š</p>
<ul>
<li><strong>å›ºå®šå¤§å°åˆ†å—</strong>ï¼šç®€å•å¿«é€Ÿï¼Œé€‚åˆç»“æ„åŒ–æ–‡æ¡£</li>
<li><strong>è¯­ä¹‰åˆ†å—</strong>ï¼šæŒ‰å¥å­æˆ–æ®µè½è¾¹ç•Œåˆ†å—ï¼Œä¿æŒè¯­ä¹‰å®Œæ•´æ€§</li>
<li><strong>æ»‘åŠ¨çª—å£</strong>ï¼šä½¿ç”¨é‡å çª—å£ï¼Œé¿å…ä¿¡æ¯ä¸¢å¤±</li>
</ul>
<h3 data-id="heading-12">3.3 å‘é‡åŒ–ï¼šé€‰æ‹© Embedding æ¨¡å‹</h3>
<p>é€‰æ‹©åˆé€‚çš„ Embedding æ¨¡å‹è‡³å…³é‡è¦ï¼š</p>








































<table><thead><tr><th>æ¨¡å‹</th><th>ç»´åº¦</th><th>è¯­è¨€æ”¯æŒ</th><th>é€‚ç”¨åœºæ™¯</th><th>æ€§èƒ½</th></tr></thead><tbody><tr><td><strong>all-MiniLM-L6-v2</strong></td><td>384</td><td>è‹±æ–‡</td><td>å¿«é€ŸåŸå‹ã€æ¼”ç¤º</td><td>â­â­â­</td></tr><tr><td><strong>BGE-large-en-v1.5</strong></td><td>1024</td><td>è‹±æ–‡</td><td>ç”Ÿäº§ç¯å¢ƒã€é«˜ç²¾åº¦</td><td>â­â­â­â­â­</td></tr><tr><td><strong>BGE-large-zh-v1.5</strong></td><td>1024</td><td>ä¸­æ–‡</td><td>ä¸­æ–‡æ£€ç´¢</td><td>â­â­â­â­â­</td></tr><tr><td><strong>E5-mistral-7b</strong></td><td>4096</td><td>å¤šè¯­è¨€</td><td>é•¿æ–‡æ¡£æ£€ç´¢</td><td>â­â­â­â­</td></tr></tbody></table>
<p><strong>ä»£ç ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> sentence_transformers <span class="hljs-keyword">import</span> SentenceTransformer

<span class="hljs-comment"># é€‰æ‹©æ¨¡å‹ï¼ˆæ ¹æ®éœ€æ±‚ï¼‰</span>
embedding_model = <span class="hljs-string">"sentence-transformers/all-MiniLM-L6-v2"</span>  <span class="hljs-comment"># å¿«é€Ÿï¼Œ80MB</span>
<span class="hljs-comment"># embedding_model = "BAAI/bge-large-en-v1.5"  # é«˜ç²¾åº¦ï¼Œ1.3GB</span>

<span class="hljs-comment"># åŠ è½½æ¨¡å‹</span>
encoder = SentenceTransformer(embedding_model)

<span class="hljs-comment"># ç”Ÿæˆå‘é‡</span>
texts = [<span class="hljs-string">"Milvus is a vector database..."</span>, <span class="hljs-string">"RAG combines retrieval and generation..."</span>]
embeddings = encoder.encode(texts, normalize_embeddings=<span class="hljs-literal">True</span>)

<span class="hljs-built_in">print</span>(<span class="hljs-string">f"å‘é‡ç»´åº¦: <span class="hljs-subst">{embeddings.shape}</span>"</span>)  <span class="hljs-comment"># (2, 384) æˆ– (2, 1024)</span>
</code></pre>
<h3 data-id="heading-13">3.4 åˆ›å»º Milvus é›†åˆ</h3>
<p>åœ¨æ’å…¥æ•°æ®ä¹‹å‰ï¼Œéœ€è¦å…ˆåˆ›å»ºé›†åˆï¼ˆCollectionï¼‰ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> pymilvus <span class="hljs-keyword">import</span> MilvusClient

<span class="hljs-comment"># è¿æ¥Milvusï¼ˆè‡ªåŠ¨ä½¿ç”¨Milvus Liteï¼‰</span>
client = MilvusClient(uri=<span class="hljs-string">"./milvus_demo.db"</span>)

<span class="hljs-comment"># é›†åˆé…ç½®</span>
collection_name = <span class="hljs-string">"documents"</span>
dimension = <span class="hljs-number">384</span>  <span class="hljs-comment"># æ ¹æ®Embeddingæ¨¡å‹é€‰æ‹©ï¼šall-MiniLM-L6-v2=384, BGE-large=1024</span>

<span class="hljs-comment"># æ£€æŸ¥é›†åˆæ˜¯å¦å­˜åœ¨</span>
<span class="hljs-keyword">if</span> client.has_collection(collection_name):
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"é›†åˆ <span class="hljs-subst">{collection_name}</span> å·²å­˜åœ¨ï¼Œåˆ é™¤æ—§é›†åˆ..."</span>)
    client.drop_collection(collection_name)

<span class="hljs-comment"># åˆ›å»ºé›†åˆ</span>
client.create_collection(
    collection_name=collection_name,
    dimension=dimension,      <span class="hljs-comment"># å‘é‡ç»´åº¦</span>
    metric_type=<span class="hljs-string">"L2"</span>,         <span class="hljs-comment"># è·ç¦»åº¦é‡ï¼šL2ï¼ˆæ¬§æ°è·ç¦»ï¼‰æˆ–IPï¼ˆå†…ç§¯ï¼‰</span>
    auto_id=<span class="hljs-literal">True</span>,             <span class="hljs-comment"># è‡ªåŠ¨ç”ŸæˆID</span>
)

<span class="hljs-built_in">print</span>(<span class="hljs-string">f"âœ“ é›†åˆ <span class="hljs-subst">{collection_name}</span> åˆ›å»ºæˆåŠŸ"</span>)
</code></pre>
<h3 data-id="heading-14">3.5 æ’å…¥æ•°æ®</h3>
<p>å°†å‘é‡å’Œå…ƒæ•°æ®æ’å…¥ Milvusï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># å‡†å¤‡æ•°æ®</span>
documents = [
    {
        <span class="hljs-string">"text"</span>: <span class="hljs-string">"Milvus is an open-source vector database..."</span>,
        <span class="hljs-string">"doc_id"</span>: <span class="hljs-string">"doc_001"</span>,
        <span class="hljs-string">"title"</span>: <span class="hljs-string">"Introduction to Milvus"</span>
    },
    <span class="hljs-comment"># ... æ›´å¤šæ–‡æ¡£</span>
]

<span class="hljs-comment"># ç”Ÿæˆå‘é‡</span>
texts = [doc[<span class="hljs-string">"text"</span>] <span class="hljs-keyword">for</span> doc <span class="hljs-keyword">in</span> documents]
embeddings = encoder.encode(texts, normalize_embeddings=<span class="hljs-literal">True</span>)

<span class="hljs-comment"># å‡†å¤‡æ’å…¥æ•°æ®</span>
data = []
<span class="hljs-keyword">for</span> i, (emb, doc) <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(<span class="hljs-built_in">zip</span>(embeddings, documents)):
    data.append({
        <span class="hljs-string">"vector"</span>: emb.tolist(),  <span class="hljs-comment"># å‘é‡ï¼ˆå¿…é¡»ï¼‰</span>
        <span class="hljs-string">"text"</span>: doc[<span class="hljs-string">"text"</span>],      <span class="hljs-comment"># æ–‡æœ¬å†…å®¹</span>
        <span class="hljs-string">"doc_id"</span>: doc[<span class="hljs-string">"doc_id"</span>],  <span class="hljs-comment"># ä¸šåŠ¡ID</span>
        <span class="hljs-string">"title"</span>: doc[<span class="hljs-string">"title"</span>],    <span class="hljs-comment"># æ ‡é¢˜</span>
    })

<span class="hljs-comment"># æ’å…¥æ•°æ®</span>
client.insert(collection_name=collection_name, data=data)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"âœ“ æˆåŠŸæ’å…¥ <span class="hljs-subst">{<span class="hljs-built_in">len</span>(data)}</span> ä¸ªæ–‡æ¡£"</span>)
</code></pre>
<p><strong>å®Œæ•´çš„æ•°æ®å‡†å¤‡è„šæœ¬</strong>ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-string">"""
å®Œæ•´çš„æ•°æ®å‡†å¤‡ç¤ºä¾‹
"""</span>
<span class="hljs-keyword">from</span> pymilvus <span class="hljs-keyword">import</span> MilvusClient
<span class="hljs-keyword">from</span> sentence_transformers <span class="hljs-keyword">import</span> SentenceTransformer

<span class="hljs-keyword">def</span> <span class="hljs-title function_">prepare_data</span>():
    <span class="hljs-comment"># 1. è¿æ¥Milvus</span>
    client = MilvusClient(uri=<span class="hljs-string">"./milvus_demo.db"</span>)
    collection_name = <span class="hljs-string">"documents"</span>

    <span class="hljs-comment"># 2. å‡†å¤‡æ–‡æ¡£</span>
    documents = [
        <span class="hljs-string">"Milvus is an open-source vector database..."</span>,
        <span class="hljs-string">"RAG combines information retrieval with language models..."</span>,
        <span class="hljs-comment"># ... æ›´å¤šæ–‡æ¡£</span>
    ]

    <span class="hljs-comment"># 3. åˆå§‹åŒ–Embeddingæ¨¡å‹</span>
    encoder = SentenceTransformer(<span class="hljs-string">"sentence-transformers/all-MiniLM-L6-v2"</span>)
    dimension = <span class="hljs-number">384</span>

    <span class="hljs-comment"># 4. åˆ›å»ºé›†åˆ</span>
    <span class="hljs-keyword">if</span> client.has_collection(collection_name):
        client.drop_collection(collection_name)

    client.create_collection(
        collection_name=collection_name,
        dimension=dimension,
        metric_type=<span class="hljs-string">"L2"</span>,
        auto_id=<span class="hljs-literal">True</span>,
    )

    <span class="hljs-comment"># 5. ç”Ÿæˆå‘é‡å¹¶æ’å…¥</span>
    embeddings = encoder.encode(documents, normalize_embeddings=<span class="hljs-literal">True</span>)
    data = [
        {<span class="hljs-string">"vector"</span>: emb.tolist(), <span class="hljs-string">"text"</span>: doc}
        <span class="hljs-keyword">for</span> emb, doc <span class="hljs-keyword">in</span> <span class="hljs-built_in">zip</span>(embeddings, documents)
    ]

    client.insert(collection_name=collection_name, data=data)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"âœ“ æ•°æ®å‡†å¤‡å®Œæˆï¼Œå…± <span class="hljs-subst">{<span class="hljs-built_in">len</span>(data)}</span> ä¸ªæ–‡æ¡£"</span>)

<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    prepare_data()
</code></pre>
<hr/>
<h2 data-id="heading-15">4. æ ¸å¿ƒå®ç°ï¼šæ„å»º RAG ç³»ç»Ÿ</h2>
<h3 data-id="heading-16">4.1 RAG ç³»ç»Ÿæ¶æ„</h3>
<p>ä¸€ä¸ªå®Œæ•´çš„ RAG ç³»ç»ŸåŒ…å«ä»¥ä¸‹ç»„ä»¶ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">ç”¨æˆ·æŸ¥è¯¢
<span class="hljs-code">    â†“
å‘é‡æ£€ç´¢ï¼ˆMilvusï¼‰â† çŸ¥è¯†åº“
    â†“
ç»“æœé‡æ’ï¼ˆå¯é€‰ï¼‰
    â†“
ä¸Šä¸‹æ–‡æ„å»º
    â†“
LLMç”Ÿæˆç­”æ¡ˆ
</span></code></pre>
<h3 data-id="heading-17">4.2 åŸºç¡€ RAG å®ç°</h3>
<p>è®©æˆ‘ä»¬ä»æœ€ç®€å•çš„ RAG ç³»ç»Ÿå¼€å§‹ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> pymilvus <span class="hljs-keyword">import</span> MilvusClient
<span class="hljs-keyword">from</span> sentence_transformers <span class="hljs-keyword">import</span> SentenceTransformer

<span class="hljs-keyword">class</span> <span class="hljs-title class_">SimpleRAGSystem</span>:
    <span class="hljs-string">"""åŸºç¡€RAGç³»ç»Ÿ"""</span>

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, milvus_uri=<span class="hljs-string">"./milvus_demo.db"</span>, collection_name=<span class="hljs-string">"documents"</span></span>):
        <span class="hljs-comment"># è¿æ¥Milvus</span>
        self.client = MilvusClient(uri=milvus_uri)
        self.collection_name = collection_name

        <span class="hljs-comment"># åˆå§‹åŒ–Embeddingæ¨¡å‹</span>
        self.encoder = SentenceTransformer(<span class="hljs-string">"sentence-transformers/all-MiniLM-L6-v2"</span>)

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">retrieve</span>(<span class="hljs-params">self, query: <span class="hljs-built_in">str</span>, top_k: <span class="hljs-built_in">int</span> = <span class="hljs-number">10</span></span>):
        <span class="hljs-string">"""å‘é‡æ£€ç´¢"""</span>
        <span class="hljs-comment"># 1. ç¼–ç æŸ¥è¯¢</span>
        query_vector = self.encoder.encode(query, normalize_embeddings=<span class="hljs-literal">True</span>)
        query_vector = query_vector.tolist()

        <span class="hljs-comment"># 2. åœ¨Milvusä¸­æœç´¢</span>
        results = self.client.search(
            collection_name=self.collection_name,
            data=[query_vector],
            limit=top_k,
            search_params={<span class="hljs-string">"metric_type"</span>: <span class="hljs-string">"L2"</span>, <span class="hljs-string">"params"</span>: {}},
            output_fields=[<span class="hljs-string">"text"</span>, <span class="hljs-string">"doc_id"</span>, <span class="hljs-string">"title"</span>]
        )

        <span class="hljs-comment"># 3. æ ¼å¼åŒ–ç»“æœ</span>
        retrieved_docs = []
        <span class="hljs-keyword">for</span> hit <span class="hljs-keyword">in</span> results[<span class="hljs-number">0</span>]:
            retrieved_docs.append({
                <span class="hljs-string">"id"</span>: hit.get(<span class="hljs-string">"id"</span>, <span class="hljs-string">""</span>),
                <span class="hljs-string">"text"</span>: hit.get(<span class="hljs-string">"entity"</span>, {}).get(<span class="hljs-string">"text"</span>, <span class="hljs-string">""</span>),
                <span class="hljs-string">"score"</span>: hit.get(<span class="hljs-string">"distance"</span>, <span class="hljs-number">0.0</span>),
                <span class="hljs-string">"doc_id"</span>: hit.get(<span class="hljs-string">"entity"</span>, {}).get(<span class="hljs-string">"doc_id"</span>, <span class="hljs-string">""</span>),
                <span class="hljs-string">"title"</span>: hit.get(<span class="hljs-string">"entity"</span>, {}).get(<span class="hljs-string">"title"</span>, <span class="hljs-string">""</span>),
            })

        <span class="hljs-keyword">return</span> retrieved_docs

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">query</span>(<span class="hljs-params">self, user_query: <span class="hljs-built_in">str</span>, top_k: <span class="hljs-built_in">int</span> = <span class="hljs-number">5</span></span>):
        <span class="hljs-string">"""æŸ¥è¯¢æµç¨‹"""</span>
        <span class="hljs-comment"># 1. æ£€ç´¢</span>
        retrieved_docs = self.retrieve(user_query, top_k=top_k)

        <span class="hljs-comment"># 2. æ„å»ºä¸Šä¸‹æ–‡</span>
        context = <span class="hljs-string">"\n\n"</span>.join([doc[<span class="hljs-string">"text"</span>] <span class="hljs-keyword">for</span> doc <span class="hljs-keyword">in</span> retrieved_docs])

        <span class="hljs-comment"># 3. è¿”å›ç»“æœï¼ˆè¿™é‡Œåªè¿”å›ä¸Šä¸‹æ–‡ï¼Œå®é™…åº”ç”¨ä¸­ä¼šè°ƒç”¨LLMï¼‰</span>
        <span class="hljs-keyword">return</span> {
            <span class="hljs-string">"query"</span>: user_query,
            <span class="hljs-string">"context"</span>: context,
            <span class="hljs-string">"documents"</span>: retrieved_docs
        }

<span class="hljs-comment"># ä½¿ç”¨ç¤ºä¾‹</span>
rag = SimpleRAGSystem()
result = rag.query(<span class="hljs-string">"What is Milvus?"</span>)
<span class="hljs-built_in">print</span>(result[<span class="hljs-string">"context"</span>])
</code></pre>
<h3 data-id="heading-18">4.3 å¢å¼ºç‰ˆ RAGï¼šæ·»åŠ é‡æ’</h3>
<p>å‘é‡æ£€ç´¢è™½ç„¶å¿«é€Ÿï¼Œä½†å¯èƒ½ä¸å¤Ÿç²¾ç¡®ã€‚æˆ‘ä»¬å¯ä»¥æ·»åŠ é‡æ’ï¼ˆRerankingï¼‰æ­¥éª¤æ¥æå‡å‡†ç¡®æ€§ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> transformers <span class="hljs-keyword">import</span> AutoModelForSequenceClassification, AutoTokenizer
<span class="hljs-keyword">import</span> torch

<span class="hljs-keyword">class</span> <span class="hljs-title class_">EnhancedRAGSystem</span>(<span class="hljs-title class_ inherited__">SimpleRAGSystem</span>):
    <span class="hljs-string">"""å¢å¼ºç‰ˆRAGç³»ç»Ÿï¼ˆå¸¦é‡æ’ï¼‰"""</span>

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, milvus_uri=<span class="hljs-string">"./milvus_demo.db"</span>, collection_name=<span class="hljs-string">"documents"</span></span>):
        <span class="hljs-built_in">super</span>().__init__(milvus_uri, collection_name)

        <span class="hljs-comment"># åˆå§‹åŒ–é‡æ’æ¨¡å‹ï¼ˆå¯é€‰ï¼‰</span>
        self.reranker = <span class="hljs-literal">None</span>
        self.reranker_tokenizer = <span class="hljs-literal">None</span>
        <span class="hljs-keyword">try</span>:
            <span class="hljs-built_in">print</span>(<span class="hljs-string">"æ­£åœ¨åŠ è½½é‡æ’æ¨¡å‹..."</span>)
            reranker_model = <span class="hljs-string">"BAAI/bge-reranker-base"</span>
            self.reranker = AutoModelForSequenceClassification.from_pretrained(reranker_model)
            self.reranker_tokenizer = AutoTokenizer.from_pretrained(reranker_model)
            self.reranker.<span class="hljs-built_in">eval</span>()
            <span class="hljs-built_in">print</span>(<span class="hljs-string">"âœ“ é‡æ’æ¨¡å‹åŠ è½½æˆåŠŸ"</span>)
        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"âš ï¸ é‡æ’æ¨¡å‹åŠ è½½å¤±è´¥: <span class="hljs-subst">{e}</span>ï¼Œå°†è·³è¿‡é‡æ’æ­¥éª¤"</span>)

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">rerank</span>(<span class="hljs-params">self, query: <span class="hljs-built_in">str</span>, documents: <span class="hljs-type">List</span>[<span class="hljs-built_in">str</span>], top_k: <span class="hljs-built_in">int</span> = <span class="hljs-number">10</span></span>):
        <span class="hljs-string">"""é‡æ’ï¼šä½¿ç”¨BGE-Rerankerå¯¹æ£€ç´¢ç»“æœè¿›è¡Œç²¾æ’"""</span>
        <span class="hljs-keyword">if</span> self.reranker <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span> <span class="hljs-keyword">or</span> <span class="hljs-built_in">len</span>(documents) == <span class="hljs-number">0</span>:
            <span class="hljs-keyword">return</span> documents[:top_k]

        <span class="hljs-comment"># æ„å»ºæŸ¥è¯¢-æ–‡æ¡£å¯¹</span>
        pairs = [[query, doc] <span class="hljs-keyword">for</span> doc <span class="hljs-keyword">in</span> documents]

        <span class="hljs-comment"># Tokenize</span>
        <span class="hljs-keyword">with</span> torch.no_grad():
            inputs = self.reranker_tokenizer(
                pairs,
                padding=<span class="hljs-literal">True</span>,
                truncation=<span class="hljs-literal">True</span>,
                return_tensors=<span class="hljs-string">"pt"</span>,
                max_length=<span class="hljs-number">512</span>
            )

            <span class="hljs-comment"># è®¡ç®—ç›¸å…³æ€§åˆ†æ•°</span>
            scores = self.reranker(**inputs).logits.squeeze(-<span class="hljs-number">1</span>)

            <span class="hljs-comment"># æŒ‰åˆ†æ•°æ’åº</span>
            ranked_indices = scores.argsort(descending=<span class="hljs-literal">True</span>)

            <span class="hljs-comment"># è¿”å›Top-K</span>
            reranked_docs = [documents[idx] <span class="hljs-keyword">for</span> idx <span class="hljs-keyword">in</span> ranked_indices[:top_k]]

        <span class="hljs-keyword">return</span> reranked_docs

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">query</span>(<span class="hljs-params">self, user_query: <span class="hljs-built_in">str</span>, retrieve_top_k: <span class="hljs-built_in">int</span> = <span class="hljs-number">100</span>, rerank_top_k: <span class="hljs-built_in">int</span> = <span class="hljs-number">10</span></span>):
        <span class="hljs-string">"""æŸ¥è¯¢æµç¨‹ï¼šæ£€ç´¢ â†’ é‡æ’ â†’ æ„å»ºä¸Šä¸‹æ–‡"""</span>
        <span class="hljs-comment"># 1. å‘é‡æ£€ç´¢ï¼ˆç²—æ’ï¼‰</span>
        retrieved_docs = self.retrieve(user_query, top_k=retrieve_top_k)

        <span class="hljs-comment"># 2. é‡æ’ï¼ˆç²¾æ’ï¼‰</span>
        doc_texts = [doc[<span class="hljs-string">"text"</span>] <span class="hljs-keyword">for</span> doc <span class="hljs-keyword">in</span> retrieved_docs]
        reranked_texts = self.rerank(user_query, doc_texts, top_k=rerank_top_k)

        <span class="hljs-comment"># 3. æ„å»ºä¸Šä¸‹æ–‡</span>
        context = <span class="hljs-string">"\n\n"</span>.join(reranked_texts)

        <span class="hljs-keyword">return</span> {
            <span class="hljs-string">"query"</span>: user_query,
            <span class="hljs-string">"context"</span>: context,
            <span class="hljs-string">"retrieved_count"</span>: <span class="hljs-built_in">len</span>(retrieved_docs),
            <span class="hljs-string">"reranked_count"</span>: <span class="hljs-built_in">len</span>(reranked_texts)
        }
</code></pre>
<p><strong>é‡æ’çš„ä¼˜åŠ¿</strong>ï¼š</p>
<ul>
<li><strong>æå‡å‡†ç¡®æ€§</strong>ï¼šé‡æ’æ¨¡å‹è€ƒè™‘æŸ¥è¯¢å’Œæ–‡æ¡£çš„äº¤äº’ï¼Œæ¯”å•çº¯å‘é‡ç›¸ä¼¼åº¦æ›´å‡†ç¡®</li>
<li><strong>çµæ´»è°ƒæ•´</strong>ï¼šå¯ä»¥è°ƒæ•´é‡æ’åçš„ Top-Kï¼Œå¹³è¡¡å‡†ç¡®æ€§å’Œæˆæœ¬</li>
<li><strong>æ•ˆæœæ˜¾è‘—</strong>ï¼šé€šå¸¸èƒ½æå‡ 15-22%çš„å‡†ç¡®ç‡</li>
</ul>
<hr/>
<h2 data-id="heading-19">5. å…³é”®ä¼˜åŒ–ï¼šçªç ´ U å‹é™·é˜±</h2>
<h3 data-id="heading-20">5.1 ä»€ä¹ˆæ˜¯ U å‹é™·é˜±ï¼Ÿ</h3>
<p>ç ”ç©¶å‘ç°ï¼Œé•¿ä¸Šä¸‹æ–‡è¯­è¨€æ¨¡å‹å­˜åœ¨<strong>ä½ç½®åå·®</strong>ï¼ˆPosition Biasï¼‰ï¼š</p>
<ul>
<li><strong>å¼€å¤´ä½ç½®</strong>ï¼ˆPrimacy Biasï¼‰ï¼šå‡†ç¡®ç‡ ~75.8% âœ…</li>
<li><strong>ä¸­é—´ä½ç½®</strong>ï¼ˆLost in the Middleï¼‰ï¼šå‡†ç¡®ç‡ ~53.8% âŒ</li>
<li><strong>ç»“å°¾ä½ç½®</strong>ï¼ˆRecency Biasï¼‰ï¼šå‡†ç¡®ç‡ ~63.2% âœ…</li>
</ul>
<p>è¿™æ„å‘³ç€ï¼Œå¦‚æœå…³é”®ä¿¡æ¯æ”¾åœ¨ä¸­é—´ä½ç½®ï¼Œæ¨¡å‹å¯èƒ½æ— æ³•æœ‰æ•ˆåˆ©ç”¨ï¼Œå¯¼è‡´æ€§èƒ½ä¸‹é™ã€‚</p>
<h3 data-id="heading-21">5.2 ä½ç½®ä¼˜åŒ–ç­–ç•¥</h3>
<p>é€šè¿‡<strong>ä½ç½®ä¼˜åŒ–</strong>ï¼Œæˆ‘ä»¬å¯ä»¥çªç ´ U å‹é™·é˜±ï¼š</p>
<p><strong>æ ¸å¿ƒç­–ç•¥</strong>ï¼š</p>
<ol>
<li><strong>æœ€ç›¸å…³æ–‡æ¡£ â†’ å¼€å¤´</strong>ï¼šåˆ©ç”¨ Primacy Bias</li>
<li><strong>æ¬¡ç›¸å…³æ–‡æ¡£ â†’ ä¸­é—´</strong>ï¼šä½ä¼˜å…ˆçº§</li>
<li><strong>ç”¨æˆ·é—®é¢˜ â†’ ç»“å°¾</strong>ï¼šåˆ©ç”¨ Recency Bias</li>
</ol>
<h3 data-id="heading-22">5.3 å®ç°ä½ç½®ä¼˜åŒ–</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">OptimizedRAGSystem</span>(<span class="hljs-title class_ inherited__">EnhancedRAGSystem</span>):
    <span class="hljs-string">"""ä¼˜åŒ–ç‰ˆRAGç³»ç»Ÿï¼ˆä½ç½®ä¼˜åŒ–ï¼‰"""</span>

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">build_context</span>(<span class="hljs-params">self, query: <span class="hljs-built_in">str</span>, retrieved_docs: <span class="hljs-type">List</span>[<span class="hljs-type">Dict</span>[<span class="hljs-built_in">str</span>, <span class="hljs-type">Any</span>]]</span>) -&gt; <span class="hljs-built_in">str</span>:
        <span class="hljs-string">"""
        æ„å»ºä¸Šä¸‹æ–‡ï¼ˆä½ç½®ä¼˜åŒ–ï¼šçªç ´Uå‹é™·é˜±çš„å…³é”®æ­¥éª¤ï¼‰

        ç­–ç•¥ï¼š
        - æœ€ç›¸å…³æ–‡æ¡£ â†’ å¼€å¤´ï¼ˆåˆ©ç”¨Primacy Biasï¼‰
        - æ¬¡ç›¸å…³æ–‡æ¡£ â†’ ä¸­é—´ï¼ˆä½ä¼˜å…ˆçº§ï¼‰
        - ç”¨æˆ·é—®é¢˜ â†’ ç»“å°¾ï¼ˆåˆ©ç”¨Recency Biasï¼‰
        """</span>
        <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(retrieved_docs) == <span class="hljs-number">0</span>:
            <span class="hljs-keyword">return</span> <span class="hljs-string">f"ç³»ç»Ÿæç¤ºï¼šè¯·å›ç­”é—®é¢˜ã€‚\n\nç”¨æˆ·é—®é¢˜ï¼š<span class="hljs-subst">{query}</span>"</span>

        <span class="hljs-comment"># æŒ‰ç›¸å…³æ€§æ’åºï¼ˆæœ€ç›¸å…³çš„åœ¨å‰ï¼‰</span>
        sorted_docs = <span class="hljs-built_in">sorted</span>(
            retrieved_docs,
            key=<span class="hljs-keyword">lambda</span> x: x.get(<span class="hljs-string">"score"</span>, <span class="hljs-number">0</span>) <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(x.get(<span class="hljs-string">"score"</span>), (<span class="hljs-built_in">int</span>, <span class="hljs-built_in">float</span>)) <span class="hljs-keyword">else</span> <span class="hljs-number">0</span>,
            reverse=<span class="hljs-literal">True</span>  <span class="hljs-comment"># åˆ†æ•°è¶Šé«˜è¶Šå¥½ï¼ˆå¦‚æœæ˜¯ç›¸ä¼¼åº¦åˆ†æ•°ï¼‰</span>
        )

        <span class="hljs-comment"># æ„å»ºä¸Šä¸‹æ–‡</span>
        context_parts = []

        <span class="hljs-comment"># ç³»ç»Ÿæç¤º</span>
        context_parts.append(<span class="hljs-string">"ç³»ç»Ÿæç¤ºï¼šè¯·åŸºäºä»¥ä¸‹æ–‡æ¡£å›ç­”é—®é¢˜ã€‚\n"</span>)

        <span class="hljs-comment"># æœ€ç›¸å…³æ–‡æ¡£ï¼ˆå¼€å¤´ä½ç½® - åˆ©ç”¨Primacy Biasï¼‰</span>
        context_parts.append(<span class="hljs-string">"# æœ€ç›¸å…³æ–‡æ¡£ï¼ˆå¼€å¤´ä½ç½®ï¼‰\n"</span>)
        top_docs = sorted_docs[:<span class="hljs-built_in">min</span>(<span class="hljs-number">3</span>, <span class="hljs-built_in">len</span>(sorted_docs))]
        <span class="hljs-keyword">for</span> i, doc <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(top_docs, <span class="hljs-number">1</span>):
            text = doc.get(<span class="hljs-string">"text"</span>, <span class="hljs-string">""</span>)
            context_parts.append(<span class="hljs-string">f"æ–‡æ¡£ <span class="hljs-subst">{i}</span>ï¼š<span class="hljs-subst">{text}</span>\n"</span>)

        <span class="hljs-comment"># æ¬¡ç›¸å…³æ–‡æ¡£ï¼ˆä¸­é—´ä½ç½®ï¼‰</span>
        <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(sorted_docs) &gt; <span class="hljs-number">3</span>:
            context_parts.append(<span class="hljs-string">"\n# æ¬¡ç›¸å…³æ–‡æ¡£ï¼ˆä¸­é—´ä½ç½®ï¼‰\n"</span>)
            secondary_docs = sorted_docs[<span class="hljs-number">3</span>:<span class="hljs-built_in">min</span>(<span class="hljs-number">7</span>, <span class="hljs-built_in">len</span>(sorted_docs))]
            <span class="hljs-keyword">for</span> i, doc <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(secondary_docs, <span class="hljs-number">4</span>):
                text = doc.get(<span class="hljs-string">"text"</span>, <span class="hljs-string">""</span>)
                context_parts.append(<span class="hljs-string">f"æ–‡æ¡£ <span class="hljs-subst">{i}</span>ï¼š<span class="hljs-subst">{text}</span>\n"</span>)

        <span class="hljs-comment"># ç”¨æˆ·é—®é¢˜ï¼ˆç»“å°¾ä½ç½® - åˆ©ç”¨Recency Biasï¼‰</span>
        context_parts.append(<span class="hljs-string">"\n# ç”¨æˆ·é—®é¢˜ï¼ˆç»“å°¾ä½ç½®ï¼‰\n"</span>)
        context_parts.append(<span class="hljs-string">f"ç”¨æˆ·é—®é¢˜ï¼š<span class="hljs-subst">{query}</span>"</span>)

        <span class="hljs-keyword">return</span> <span class="hljs-string">"\n"</span>.join(context_parts)

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">query</span>(<span class="hljs-params">self, user_query: <span class="hljs-built_in">str</span>, retrieve_top_k: <span class="hljs-built_in">int</span> = <span class="hljs-number">100</span>, rerank_top_k: <span class="hljs-built_in">int</span> = <span class="hljs-number">10</span></span>):
        <span class="hljs-string">"""å®Œæ•´æŸ¥è¯¢æµç¨‹ï¼šæ£€ç´¢ â†’ é‡æ’ â†’ ä½ç½®ä¼˜åŒ– â†’ ç”Ÿæˆ"""</span>
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\næŸ¥è¯¢ï¼š<span class="hljs-subst">{user_query}</span>\n"</span>)

        <span class="hljs-comment"># 1. å‘é‡æ£€ç´¢</span>
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ­¥éª¤ 1: å‘é‡æ£€ç´¢ï¼ˆTop-<span class="hljs-subst">{retrieve_top_k}</span>ï¼‰..."</span>)
        retrieved_docs = self.retrieve(user_query, top_k=retrieve_top_k)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"âœ“ æ£€ç´¢åˆ° <span class="hljs-subst">{<span class="hljs-built_in">len</span>(retrieved_docs)}</span> ä¸ªæ–‡æ¡£"</span>)

        <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(retrieved_docs) == <span class="hljs-number">0</span>:
            <span class="hljs-keyword">return</span> {<span class="hljs-string">"query"</span>: user_query, <span class="hljs-string">"context"</span>: <span class="hljs-string">""</span>, <span class="hljs-string">"answer"</span>: <span class="hljs-string">"æœªæ‰¾åˆ°ç›¸å…³æ–‡æ¡£ã€‚"</span>}

        <span class="hljs-comment"># 2. é‡æ’ï¼ˆå¯é€‰ï¼‰</span>
        <span class="hljs-keyword">if</span> self.reranker <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span>:
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\næ­¥éª¤ 2: é‡æ’ï¼ˆTop-<span class="hljs-subst">{rerank_top_k}</span>ï¼‰..."</span>)
            doc_texts = [doc[<span class="hljs-string">"text"</span>] <span class="hljs-keyword">for</span> doc <span class="hljs-keyword">in</span> retrieved_docs]
            reranked_texts = self.rerank(user_query, doc_texts, top_k=rerank_top_k)

            <span class="hljs-comment"># æ›´æ–°æ–‡æ¡£åˆ—è¡¨ï¼ˆåªä¿ç•™é‡æ’åçš„æ–‡æ¡£ï¼‰</span>
            reranked_docs = [
                doc <span class="hljs-keyword">for</span> doc <span class="hljs-keyword">in</span> retrieved_docs
                <span class="hljs-keyword">if</span> doc[<span class="hljs-string">"text"</span>] <span class="hljs-keyword">in</span> reranked_texts
            ]
            <span class="hljs-comment"># æŒ‰é‡æ’é¡ºåºé‡æ–°æ’åº</span>
            text_to_doc = {doc[<span class="hljs-string">"text"</span>]: doc <span class="hljs-keyword">for</span> doc <span class="hljs-keyword">in</span> reranked_docs}
            reranked_docs = [text_to_doc[text] <span class="hljs-keyword">for</span> text <span class="hljs-keyword">in</span> reranked_texts]
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"âœ“ é‡æ’å®Œæˆï¼Œè¿”å› Top-<span class="hljs-subst">{<span class="hljs-built_in">len</span>(reranked_docs)}</span> ä¸ªæ–‡æ¡£"</span>)
        <span class="hljs-keyword">else</span>:
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\næ­¥éª¤ 2: è·³è¿‡é‡æ’ï¼ˆæœªé…ç½®Rerankerï¼‰..."</span>)
            reranked_docs = retrieved_docs[:rerank_top_k]
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"âœ“ ä½¿ç”¨æ£€ç´¢ç»“æœï¼Œè¿”å› Top-<span class="hljs-subst">{<span class="hljs-built_in">len</span>(reranked_docs)}</span> ä¸ªæ–‡æ¡£"</span>)

        <span class="hljs-comment"># 3. ä½ç½®ä¼˜åŒ–æ„å»ºä¸Šä¸‹æ–‡</span>
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\næ­¥éª¤ 3: ä½ç½®ä¼˜åŒ–æ„å»ºä¸Šä¸‹æ–‡..."</span>)
        context = self.build_context(user_query, reranked_docs)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"âœ“ ä¸Šä¸‹æ–‡æ„å»ºå®Œæˆï¼ˆé•¿åº¦ï¼š<span class="hljs-subst">{<span class="hljs-built_in">len</span>(context)}</span> å­—ç¬¦ï¼‰"</span>)

        <span class="hljs-comment"># 4. ç”Ÿæˆç­”æ¡ˆï¼ˆè¿™é‡Œåªè¿”å›ä¸Šä¸‹æ–‡ï¼Œå®é™…åº”ç”¨ä¸­ä¼šè°ƒç”¨LLMï¼‰</span>
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\næ­¥éª¤ 4: ä¸Šä¸‹æ–‡å·²å‡†å¤‡å°±ç»ª\n"</span>)

        <span class="hljs-keyword">return</span> {
            <span class="hljs-string">"query"</span>: user_query,
            <span class="hljs-string">"retrieved_docs"</span>: retrieved_docs[:<span class="hljs-number">5</span>],  <span class="hljs-comment"># åªè¿”å›å‰5ä¸ªç”¨äºå±•ç¤º</span>
            <span class="hljs-string">"reranked_docs"</span>: reranked_docs,
            <span class="hljs-string">"context"</span>: context,
            <span class="hljs-string">"answer"</span>: <span class="hljs-string">"ã€æç¤ºã€‘æœªé…ç½®LLMï¼Œä»…è¿”å›ä¸Šä¸‹æ–‡ã€‚\n\n"</span> + context
        }
</code></pre>
<h3 data-id="heading-23">5.4 æ•ˆæœå¯¹æ¯”</h3>
<p>ä½ç½®ä¼˜åŒ–å¸¦æ¥çš„æ•ˆæœæå‡ï¼š</p>























<table><thead><tr><th>æŒ‡æ ‡</th><th>ä¼˜åŒ–å‰ï¼ˆä¸­é—´ä½ç½®ï¼‰</th><th>ä¼˜åŒ–åï¼ˆå¼€å¤´ä½ç½®ï¼‰</th><th>æå‡</th></tr></thead><tbody><tr><td><strong>å‡†ç¡®ç‡</strong></td><td>53.8%</td><td>75.8%</td><td><strong>+22%</strong></td></tr><tr><td><strong>ä¿¡æ¯åˆ©ç”¨ç‡</strong></td><td>ä½</td><td>é«˜</td><td>æ˜¾è‘—æå‡</td></tr></tbody></table>
<p><strong>å…³é”®ç»“è®º</strong>ï¼šä½ç½®ä¼˜åŒ–æ˜¯çªç ´ U å‹é™·é˜±çš„æ ¸å¿ƒæ­¥éª¤ï¼Œç”Ÿäº§ç¯å¢ƒå¿…é¡»åŒ…å«ï¼</p>
<hr/>
<h2 data-id="heading-24">6. æ€§èƒ½ä¼˜åŒ–å®æˆ˜</h2>
<h3 data-id="heading-25">6.1 ç´¢å¼•é€‰æ‹©</h3>
<p>Milvus æ”¯æŒå¤šç§ç´¢å¼•ç±»å‹ï¼Œé€‰æ‹©åˆé€‚çš„ç´¢å¼•å¯¹æ€§èƒ½è‡³å…³é‡è¦ï¼š</p>



































<table><thead><tr><th>ç´¢å¼•ç±»å‹</th><th>ç‰¹ç‚¹</th><th>é€‚ç”¨åœºæ™¯</th><th>æ¨èå‚æ•°</th></tr></thead><tbody><tr><td><strong>HNSW</strong></td><td>é«˜ç²¾åº¦ã€ä½å»¶è¿Ÿ</td><td>é«˜ç²¾åº¦è¦æ±‚ã€ä½å»¶è¿Ÿéœ€æ±‚</td><td>M=16, ef=64</td></tr><tr><td><strong>IVF_FLAT</strong></td><td>æˆæœ¬å‹å¥½</td><td>å¤§è§„æ¨¡æ•°æ®ã€æˆæœ¬æ•æ„Ÿ</td><td>nlist=1024, nprobe=10</td></tr><tr><td><strong>IVF_PQ</strong></td><td>å‹ç¼©å­˜å‚¨</td><td>è¶…å¤§è§„æ¨¡æ•°æ®</td><td>nlist=1024, m=8</td></tr><tr><td><strong>DiskANN</strong></td><td>å¤§è§„æ¨¡åœºæ™¯</td><td>ç™¾äº¿çº§å‘é‡</td><td>é€‚åˆç£ç›˜å­˜å‚¨</td></tr></tbody></table>
<p><strong>ä»£ç ç¤ºä¾‹</strong>ï¼ˆä½¿ç”¨ HNSW ç´¢å¼•ï¼‰ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># æ³¨æ„ï¼šMilvusClientæ–¹å¼åˆ›å»ºé›†åˆæ—¶ï¼Œç´¢å¼•å‚æ•°åœ¨create_collectionä¸­è®¾ç½®</span>
<span class="hljs-comment"># å¦‚æœéœ€è¦æ›´ç²¾ç»†çš„ç´¢å¼•æ§åˆ¶ï¼Œå¯ä»¥ä½¿ç”¨pymilvusçš„Collectionæ–¹å¼</span>

<span class="hljs-keyword">from</span> pymilvus <span class="hljs-keyword">import</span> Collection, connections, FieldSchema, CollectionSchema, DataType

<span class="hljs-comment"># è¿æ¥Milvus Serverï¼ˆä¸æ˜¯Liteï¼‰</span>
connections.connect(alias=<span class="hljs-string">"default"</span>, host=<span class="hljs-string">"localhost"</span>, port=<span class="hljs-string">"19530"</span>)

<span class="hljs-comment"># å®šä¹‰Schema</span>
fields = [
    FieldSchema(name=<span class="hljs-string">"id"</span>, dtype=DataType.INT64, is_primary=<span class="hljs-literal">True</span>, auto_id=<span class="hljs-literal">True</span>),
    FieldSchema(name=<span class="hljs-string">"vector"</span>, dtype=DataType.FLOAT_VECTOR, dim=<span class="hljs-number">384</span>),
    FieldSchema(name=<span class="hljs-string">"text"</span>, dtype=DataType.VARCHAR, max_length=<span class="hljs-number">1000</span>),
]

schema = CollectionSchema(fields=fields, description=<span class="hljs-string">"Documents collection"</span>)
collection = Collection(name=<span class="hljs-string">"documents"</span>, schema=schema)

<span class="hljs-comment"># åˆ›å»ºHNSWç´¢å¼•</span>
index_params = {
    <span class="hljs-string">"metric_type"</span>: <span class="hljs-string">"L2"</span>,
    <span class="hljs-string">"index_type"</span>: <span class="hljs-string">"HNSW"</span>,
    <span class="hljs-string">"params"</span>: {
        <span class="hljs-string">"M"</span>: <span class="hljs-number">16</span>,              <span class="hljs-comment"># æ¯ä¸ªèŠ‚ç‚¹çš„è¿æ¥æ•°</span>
        <span class="hljs-string">"efConstruction"</span>: <span class="hljs-number">200</span>  <span class="hljs-comment"># æ„å»ºæ—¶çš„æœç´¢èŒƒå›´</span>
    }
}

collection.create_index(field_name=<span class="hljs-string">"vector"</span>, index_params=index_params)

<span class="hljs-comment"># æœç´¢æ—¶è®¾ç½®efå‚æ•°</span>
search_params = {<span class="hljs-string">"metric_type"</span>: <span class="hljs-string">"L2"</span>, <span class="hljs-string">"params"</span>: {<span class="hljs-string">"ef"</span>: <span class="hljs-number">64</span>}}
</code></pre>
<h3 data-id="heading-26">6.2 æ‰¹é‡å¤„ç†</h3>
<p>å¯¹äºå¤§é‡æŸ¥è¯¢ï¼Œä½¿ç”¨æ‰¹é‡å¤„ç†å¯ä»¥æ˜¾è‘—æå‡ååé‡ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">batch_search</span>(<span class="hljs-params">self, queries: <span class="hljs-type">List</span>[<span class="hljs-built_in">str</span>], batch_size: <span class="hljs-built_in">int</span> = <span class="hljs-number">32</span></span>):
    <span class="hljs-string">"""æ‰¹é‡æ£€ç´¢"""</span>
    all_results = []

    <span class="hljs-comment"># æ‰¹é‡ç¼–ç </span>
    query_vectors = self.encoder.encode(queries, normalize_embeddings=<span class="hljs-literal">True</span>)

    <span class="hljs-comment"># æ‰¹é‡æœç´¢</span>
    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>, <span class="hljs-built_in">len</span>(query_vectors), batch_size):
        batch_vectors = query_vectors[i:i+batch_size]
        batch_queries = queries[i:i+batch_size]

        results = self.client.search(
            collection_name=self.collection_name,
            data=batch_vectors.tolist(),
            limit=<span class="hljs-number">10</span>,
            search_params={<span class="hljs-string">"metric_type"</span>: <span class="hljs-string">"L2"</span>, <span class="hljs-string">"params"</span>: {}},
            output_fields=[<span class="hljs-string">"text"</span>]
        )

        all_results.extend(results)

    <span class="hljs-keyword">return</span> all_results
</code></pre>
<h3 data-id="heading-27">6.3 ç¼“å­˜ç­–ç•¥</h3>
<p>å®ç°æŸ¥è¯¢ç¼“å­˜å¯ä»¥å¤§å¹…é™ä½å»¶è¿Ÿå’Œæˆæœ¬ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> functools <span class="hljs-keyword">import</span> lru_cache
<span class="hljs-keyword">import</span> hashlib
<span class="hljs-keyword">import</span> json

<span class="hljs-keyword">class</span> <span class="hljs-title class_">CachedRAGSystem</span>(<span class="hljs-title class_ inherited__">OptimizedRAGSystem</span>):
    <span class="hljs-string">"""å¸¦ç¼“å­˜çš„RAGç³»ç»Ÿ"""</span>

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, *args, **kwargs</span>):
        <span class="hljs-built_in">super</span>().__init__(*args, **kwargs)
        self.cache = {}  <span class="hljs-comment"># ç®€å•çš„å†…å­˜ç¼“å­˜ï¼Œç”Ÿäº§ç¯å¢ƒå»ºè®®ä½¿ç”¨Redis</span>

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">_get_cache_key</span>(<span class="hljs-params">self, query: <span class="hljs-built_in">str</span>, top_k: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">str</span>:
        <span class="hljs-string">"""ç”Ÿæˆç¼“å­˜é”®"""</span>
        key_data = <span class="hljs-string">f"<span class="hljs-subst">{query}</span>_<span class="hljs-subst">{top_k}</span>"</span>
        <span class="hljs-keyword">return</span> hashlib.md5(key_data.encode()).hexdigest()

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">retrieve</span>(<span class="hljs-params">self, query: <span class="hljs-built_in">str</span>, top_k: <span class="hljs-built_in">int</span> = <span class="hljs-number">10</span>, use_cache: <span class="hljs-built_in">bool</span> = <span class="hljs-literal">True</span></span>):
        <span class="hljs-string">"""å¸¦ç¼“å­˜çš„æ£€ç´¢"""</span>
        <span class="hljs-keyword">if</span> use_cache:
            cache_key = self._get_cache_key(query, top_k)
            <span class="hljs-keyword">if</span> cache_key <span class="hljs-keyword">in</span> self.cache:
                <span class="hljs-built_in">print</span>(<span class="hljs-string">f"âœ“ ä½¿ç”¨ç¼“å­˜ç»“æœ"</span>)
                <span class="hljs-keyword">return</span> self.cache[cache_key]

        <span class="hljs-comment"># æ‰§è¡Œæ£€ç´¢</span>
        results = <span class="hljs-built_in">super</span>().retrieve(query, top_k)

        <span class="hljs-comment"># å­˜å…¥ç¼“å­˜</span>
        <span class="hljs-keyword">if</span> use_cache:
            self.cache[cache_key] = results

        <span class="hljs-keyword">return</span> results
</code></pre>
<h3 data-id="heading-28">6.4 å¼‚æ­¥å¤„ç†</h3>
<p>å¯¹äºé«˜å¹¶å‘åœºæ™¯ï¼Œä½¿ç”¨å¼‚æ­¥å¤„ç†å¯ä»¥æå‡æ€§èƒ½ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> asyncio
<span class="hljs-keyword">from</span> concurrent.futures <span class="hljs-keyword">import</span> ThreadPoolExecutor

<span class="hljs-keyword">class</span> <span class="hljs-title class_">AsyncRAGSystem</span>(<span class="hljs-title class_ inherited__">OptimizedRAGSystem</span>):
    <span class="hljs-string">"""å¼‚æ­¥RAGç³»ç»Ÿ"""</span>

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, *args, **kwargs</span>):
        <span class="hljs-built_in">super</span>().__init__(*args, **kwargs)
        self.executor = ThreadPoolExecutor(max_workers=<span class="hljs-number">4</span>)

    <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">async_retrieve</span>(<span class="hljs-params">self, query: <span class="hljs-built_in">str</span>, top_k: <span class="hljs-built_in">int</span> = <span class="hljs-number">10</span></span>):
        <span class="hljs-string">"""å¼‚æ­¥æ£€ç´¢"""</span>
        loop = asyncio.get_event_loop()
        results = <span class="hljs-keyword">await</span> loop.run_in_executor(
            self.executor,
            self.retrieve,
            query,
            top_k
        )
        <span class="hljs-keyword">return</span> results

    <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">async_query</span>(<span class="hljs-params">self, user_query: <span class="hljs-built_in">str</span>, retrieve_top_k: <span class="hljs-built_in">int</span> = <span class="hljs-number">100</span>, rerank_top_k: <span class="hljs-built_in">int</span> = <span class="hljs-number">10</span></span>):
        <span class="hljs-string">"""å¼‚æ­¥æŸ¥è¯¢"""</span>
        <span class="hljs-comment"># å¼‚æ­¥æ£€ç´¢</span>
        retrieved_docs = <span class="hljs-keyword">await</span> self.async_retrieve(user_query, top_k=retrieve_top_k)

        <span class="hljs-comment"># å…¶ä»–æ­¥éª¤å¯ä»¥ç»§ç»­å¼‚æ­¥åŒ–...</span>
        <span class="hljs-comment"># è¿™é‡Œç®€åŒ–å¤„ç†</span>

        <span class="hljs-keyword">return</span> {
            <span class="hljs-string">"query"</span>: user_query,
            <span class="hljs-string">"documents"</span>: retrieved_docs
        }

<span class="hljs-comment"># ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():
    rag = AsyncRAGSystem()
    result = <span class="hljs-keyword">await</span> rag.async_query(<span class="hljs-string">"What is Milvus?"</span>)
    <span class="hljs-built_in">print</span>(result)

<span class="hljs-comment"># asyncio.run(main())</span>
</code></pre>
<hr/>
<h2 data-id="heading-29">7. ç”Ÿäº§ç¯å¢ƒæœ€ä½³å®è·µ</h2>
<h3 data-id="heading-30">7.1 é”™è¯¯å¤„ç†ä¸é‡è¯•</h3>
<p>ç”Ÿäº§ç¯å¢ƒå¿…é¡»åŒ…å«å®Œå–„çš„é”™è¯¯å¤„ç†ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> time
<span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> <span class="hljs-type">Optional</span>

<span class="hljs-keyword">class</span> <span class="hljs-title class_">ProductionRAGSystem</span>(<span class="hljs-title class_ inherited__">OptimizedRAGSystem</span>):
    <span class="hljs-string">"""ç”Ÿäº§ç¯å¢ƒRAGç³»ç»Ÿï¼ˆå¸¦é”™è¯¯å¤„ç†å’Œé‡è¯•ï¼‰"""</span>

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">retrieve_with_retry</span>(<span class="hljs-params">
        self,
        query: <span class="hljs-built_in">str</span>,
        top_k: <span class="hljs-built_in">int</span> = <span class="hljs-number">10</span>,
        max_retries: <span class="hljs-built_in">int</span> = <span class="hljs-number">3</span>,
        retry_delay: <span class="hljs-built_in">float</span> = <span class="hljs-number">1.0</span>
    </span>):
        <span class="hljs-string">"""å¸¦é‡è¯•çš„æ£€ç´¢"""</span>
        <span class="hljs-keyword">for</span> attempt <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(max_retries):
            <span class="hljs-keyword">try</span>:
                <span class="hljs-keyword">return</span> self.retrieve(query, top_k)
            <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
                <span class="hljs-keyword">if</span> attempt == max_retries - <span class="hljs-number">1</span>:
                    <span class="hljs-keyword">raise</span>  <span class="hljs-comment"># æœ€åä¸€æ¬¡é‡è¯•å¤±è´¥ï¼ŒæŠ›å‡ºå¼‚å¸¸</span>

                <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ£€ç´¢å¤±è´¥ï¼ˆå°è¯• <span class="hljs-subst">{attempt + <span class="hljs-number">1</span>}</span>/<span class="hljs-subst">{max_retries}</span>ï¼‰ï¼š<span class="hljs-subst">{e}</span>"</span>)
                time.sleep(retry_delay * (attempt + <span class="hljs-number">1</span>))  <span class="hljs-comment"># æŒ‡æ•°é€€é¿</span>

        <span class="hljs-keyword">return</span> []

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">query</span>(<span class="hljs-params">self, user_query: <span class="hljs-built_in">str</span>, **kwargs</span>):
        <span class="hljs-string">"""ç”Ÿäº§ç¯å¢ƒæŸ¥è¯¢ï¼ˆå¸¦é”™è¯¯å¤„ç†ï¼‰"""</span>
        <span class="hljs-keyword">try</span>:
            <span class="hljs-keyword">return</span> <span class="hljs-built_in">super</span>().query(user_query, **kwargs)
        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
            <span class="hljs-keyword">return</span> {
                <span class="hljs-string">"query"</span>: user_query,
                <span class="hljs-string">"error"</span>: <span class="hljs-built_in">str</span>(e),
                <span class="hljs-string">"context"</span>: <span class="hljs-string">""</span>,
                <span class="hljs-string">"answer"</span>: <span class="hljs-string">"æŠ±æ­‰ï¼ŒæŸ¥è¯¢è¿‡ç¨‹ä¸­å‡ºç°é”™è¯¯ï¼Œè¯·ç¨åé‡è¯•ã€‚"</span>
            }
</code></pre>
<h3 data-id="heading-31">7.2 æ—¥å¿—è®°å½•</h3>
<p>æ·»åŠ è¯¦ç»†çš„æ—¥å¿—è®°å½•ï¼Œä¾¿äºç›‘æ§å’Œè°ƒè¯•ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> logging
<span class="hljs-keyword">from</span> datetime <span class="hljs-keyword">import</span> datetime

<span class="hljs-keyword">class</span> <span class="hljs-title class_">LoggedRAGSystem</span>(<span class="hljs-title class_ inherited__">ProductionRAGSystem</span>):
    <span class="hljs-string">"""å¸¦æ—¥å¿—çš„RAGç³»ç»Ÿ"""</span>

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, *args, **kwargs</span>):
        <span class="hljs-built_in">super</span>().__init__(*args, **kwargs)

        <span class="hljs-comment"># é…ç½®æ—¥å¿—</span>
        logging.basicConfig(
            level=logging.INFO,
            <span class="hljs-built_in">format</span>=<span class="hljs-string">'%(asctime)s - %(name)s - %(levelname)s - %(message)s'</span>,
            handlers=[
                logging.FileHandler(<span class="hljs-string">'rag_system.log'</span>),
                logging.StreamHandler()
            ]
        )
        self.logger = logging.getLogger(__name__)

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">query</span>(<span class="hljs-params">self, user_query: <span class="hljs-built_in">str</span>, **kwargs</span>):
        <span class="hljs-string">"""å¸¦æ—¥å¿—çš„æŸ¥è¯¢"""</span>
        start_time = datetime.now()
        self.logger.info(<span class="hljs-string">f"å¼€å§‹æŸ¥è¯¢: <span class="hljs-subst">{user_query}</span>"</span>)

        <span class="hljs-keyword">try</span>:
            result = <span class="hljs-built_in">super</span>().query(user_query, **kwargs)

            elapsed_time = (datetime.now() - start_time).total_seconds()
            self.logger.info(
                <span class="hljs-string">f"æŸ¥è¯¢å®Œæˆ: <span class="hljs-subst">{user_query}</span>, "</span>
                <span class="hljs-string">f"è€—æ—¶: <span class="hljs-subst">{elapsed_time:<span class="hljs-number">.2</span>f}</span>ç§’, "</span>
                <span class="hljs-string">f"æ£€ç´¢åˆ°: <span class="hljs-subst">{<span class="hljs-built_in">len</span>(result.get(<span class="hljs-string">'retrieved_docs'</span>, []))}</span> ä¸ªæ–‡æ¡£"</span>
            )

            <span class="hljs-keyword">return</span> result
        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
            self.logger.error(<span class="hljs-string">f"æŸ¥è¯¢å¤±è´¥: <span class="hljs-subst">{user_query}</span>, é”™è¯¯: <span class="hljs-subst">{e}</span>"</span>)
            <span class="hljs-keyword">raise</span>
</code></pre>
<h3 data-id="heading-32">7.3 ç›‘æ§æŒ‡æ ‡</h3>
<p>æ”¶é›†å…³é”®æ€§èƒ½æŒ‡æ ‡ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> collections <span class="hljs-keyword">import</span> defaultdict
<span class="hljs-keyword">import</span> time

<span class="hljs-keyword">class</span> <span class="hljs-title class_">MonitoredRAGSystem</span>(<span class="hljs-title class_ inherited__">LoggedRAGSystem</span>):
    <span class="hljs-string">"""å¸¦ç›‘æ§çš„RAGç³»ç»Ÿ"""</span>

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, *args, **kwargs</span>):
        <span class="hljs-built_in">super</span>().__init__(*args, **kwargs)
        self.metrics = {
            <span class="hljs-string">"total_queries"</span>: <span class="hljs-number">0</span>,
            <span class="hljs-string">"total_retrieval_time"</span>: <span class="hljs-number">0</span>,
            <span class="hljs-string">"total_rerank_time"</span>: <span class="hljs-number">0</span>,
            <span class="hljs-string">"total_query_time"</span>: <span class="hljs-number">0</span>,
            <span class="hljs-string">"errors"</span>: <span class="hljs-number">0</span>,
        }

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">query</span>(<span class="hljs-params">self, user_query: <span class="hljs-built_in">str</span>, **kwargs</span>):
        <span class="hljs-string">"""å¸¦ç›‘æ§çš„æŸ¥è¯¢"""</span>
        self.metrics[<span class="hljs-string">"total_queries"</span>] += <span class="hljs-number">1</span>
        start_time = time.time()

        <span class="hljs-keyword">try</span>:
            <span class="hljs-comment"># ç›‘æ§æ£€ç´¢æ—¶é—´</span>
            retrieval_start = time.time()
            retrieved_docs = self.retrieve(user_query, top_k=kwargs.get(<span class="hljs-string">"retrieve_top_k"</span>, <span class="hljs-number">100</span>))
            self.metrics[<span class="hljs-string">"total_retrieval_time"</span>] += time.time() - retrieval_start

            <span class="hljs-comment"># ç›‘æ§é‡æ’æ—¶é—´</span>
            <span class="hljs-keyword">if</span> self.reranker:
                rerank_start = time.time()
                <span class="hljs-comment"># ... é‡æ’é€»è¾‘</span>
                self.metrics[<span class="hljs-string">"total_rerank_time"</span>] += time.time() - rerank_start

            result = <span class="hljs-built_in">super</span>().query(user_query, **kwargs)
            self.metrics[<span class="hljs-string">"total_query_time"</span>] += time.time() - start_time

            <span class="hljs-keyword">return</span> result
        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
            self.metrics[<span class="hljs-string">"errors"</span>] += <span class="hljs-number">1</span>
            <span class="hljs-keyword">raise</span>

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_metrics</span>(<span class="hljs-params">self</span>):
        <span class="hljs-string">"""è·å–ç›‘æ§æŒ‡æ ‡"""</span>
        total = self.metrics[<span class="hljs-string">"total_queries"</span>]
        <span class="hljs-keyword">if</span> total == <span class="hljs-number">0</span>:
            <span class="hljs-keyword">return</span> {}

        <span class="hljs-keyword">return</span> {
            <span class="hljs-string">"total_queries"</span>: total,
            <span class="hljs-string">"avg_retrieval_time"</span>: self.metrics[<span class="hljs-string">"total_retrieval_time"</span>] / total,
            <span class="hljs-string">"avg_rerank_time"</span>: self.metrics[<span class="hljs-string">"total_rerank_time"</span>] / total,
            <span class="hljs-string">"avg_query_time"</span>: self.metrics[<span class="hljs-string">"total_query_time"</span>] / total,
            <span class="hljs-string">"error_rate"</span>: self.metrics[<span class="hljs-string">"errors"</span>] / total,
        }
</code></pre>
<h3 data-id="heading-33">7.4 é…ç½®ç®¡ç†</h3>
<p>ä½¿ç”¨é…ç½®æ–‡ä»¶ç®¡ç†å‚æ•°ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># config.yaml</span>
<span class="hljs-attr">milvus:</span>
  <span class="hljs-attr">uri:</span> <span class="hljs-string">"./milvus_demo.db"</span>
  <span class="hljs-attr">collection_name:</span> <span class="hljs-string">"documents"</span>

<span class="hljs-attr">embedding:</span>
  <span class="hljs-attr">model:</span> <span class="hljs-string">"sentence-transformers/all-MiniLM-L6-v2"</span>
  <span class="hljs-attr">dimension:</span> <span class="hljs-number">384</span>

<span class="hljs-attr">reranker:</span>
  <span class="hljs-attr">enabled:</span> <span class="hljs-literal">true</span>
  <span class="hljs-attr">model:</span> <span class="hljs-string">"BAAI/bge-reranker-base"</span>

<span class="hljs-attr">retrieval:</span>
  <span class="hljs-attr">top_k:</span> <span class="hljs-number">100</span>
  <span class="hljs-attr">rerank_top_k:</span> <span class="hljs-number">10</span>

<span class="hljs-attr">position_optimization:</span>
  <span class="hljs-attr">enabled:</span> <span class="hljs-literal">true</span>
  <span class="hljs-attr">top_relevant:</span> <span class="hljs-number">3</span>
  <span class="hljs-attr">secondary_relevant:</span> <span class="hljs-number">5</span>
</code></pre>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> yaml

<span class="hljs-keyword">class</span> <span class="hljs-title class_">ConfigurableRAGSystem</span>(<span class="hljs-title class_ inherited__">OptimizedRAGSystem</span>):
    <span class="hljs-string">"""å¯é…ç½®çš„RAGç³»ç»Ÿ"""</span>

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, config_path: <span class="hljs-built_in">str</span> = <span class="hljs-string">"config.yaml"</span></span>):
        <span class="hljs-comment"># åŠ è½½é…ç½®</span>
        <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(config_path, <span class="hljs-string">'r'</span>) <span class="hljs-keyword">as</span> f:
            config = yaml.safe_load(f)

        <span class="hljs-comment"># ä½¿ç”¨é…ç½®åˆå§‹åŒ–</span>
        <span class="hljs-built_in">super</span>().__init__(
            milvus_uri=config[<span class="hljs-string">"milvus"</span>][<span class="hljs-string">"uri"</span>],
            collection_name=config[<span class="hljs-string">"milvus"</span>][<span class="hljs-string">"collection_name"</span>]
        )

        self.config = config
</code></pre>
<hr/>
<h2 data-id="heading-34">8. å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ</h2>
<h3 data-id="heading-35">8.1 é›†åˆä¸å­˜åœ¨</h3>
<p><strong>é—®é¢˜</strong>ï¼š<code>Collection 'documents' does not exist</code></p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># æ£€æŸ¥é›†åˆæ˜¯å¦å­˜åœ¨</span>
<span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> client.has_collection(collection_name):
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"é›†åˆ <span class="hljs-subst">{collection_name}</span> ä¸å­˜åœ¨ï¼Œè¯·å…ˆåˆ›å»ºé›†åˆå¹¶æ’å…¥æ•°æ®"</span>)
    <span class="hljs-comment"># åˆ›å»ºé›†åˆ</span>
    client.create_collection(...)
    <span class="hljs-comment"># æ’å…¥æ•°æ®</span>
    client.insert(...)
</code></pre>
<h3 data-id="heading-36">8.2 å‘é‡ç»´åº¦ä¸åŒ¹é…</h3>
<p><strong>é—®é¢˜</strong>ï¼š<code>Dimension mismatch: expected 384, got 1024</code></p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># ç¡®ä¿Embeddingæ¨¡å‹ç»´åº¦ä¸é›†åˆç»´åº¦ä¸€è‡´</span>
embedding_model = <span class="hljs-string">"sentence-transformers/all-MiniLM-L6-v2"</span>  <span class="hljs-comment"># 384ç»´</span>
<span class="hljs-comment"># æˆ–</span>
embedding_model = <span class="hljs-string">"BAAI/bge-large-en-v1.5"</span>  <span class="hljs-comment"># 1024ç»´</span>

<span class="hljs-comment"># åˆ›å»ºé›†åˆæ—¶ä½¿ç”¨æ­£ç¡®çš„ç»´åº¦</span>
dimension = <span class="hljs-number">384</span> <span class="hljs-keyword">if</span> <span class="hljs-string">"all-MiniLM-L6-v2"</span> <span class="hljs-keyword">in</span> embedding_model <span class="hljs-keyword">else</span> <span class="hljs-number">1024</span>
client.create_collection(..., dimension=dimension)
</code></pre>
<h3 data-id="heading-37">8.3 å†…å­˜ä¸è¶³</h3>
<p><strong>é—®é¢˜</strong>ï¼šåŠ è½½å¤§æ¨¡å‹æ—¶å†…å­˜ä¸è¶³</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<ol>
<li>
<p><strong>ä½¿ç”¨æ›´å°çš„æ¨¡å‹</strong>ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># ä½¿ç”¨å°æ¨¡å‹ï¼ˆ80MB vs 1.3GBï¼‰</span>
encoder = SentenceTransformer(<span class="hljs-string">"sentence-transformers/all-MiniLM-L6-v2"</span>)
</code></pre>
</li>
<li>
<p><strong>å»¶è¿ŸåŠ è½½</strong>ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">LazyRAGSystem</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):
        self._encoder = <span class="hljs-literal">None</span>
        self._reranker = <span class="hljs-literal">None</span>

<span class="hljs-meta">    @property</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">encoder</span>(<span class="hljs-params">self</span>):
        <span class="hljs-keyword">if</span> self._encoder <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>:
            self._encoder = SentenceTransformer(<span class="hljs-string">"..."</span>)
        <span class="hljs-keyword">return</span> self._encoder
</code></pre>
</li>
<li>
<p><strong>ä½¿ç”¨ CPU æ¨¡å¼</strong>ï¼ˆå¦‚æœ GPU å†…å­˜ä¸è¶³ï¼‰ï¼š</p>
<pre><code class="hljs language-python" lang="python">encoder = SentenceTransformer(<span class="hljs-string">"..."</span>, device=<span class="hljs-string">"cpu"</span>)
</code></pre>
</li>
</ol>
<h3 data-id="heading-38">8.4 æ£€ç´¢ç»“æœä¸å‡†ç¡®</h3>
<p><strong>é—®é¢˜</strong>ï¼šæ£€ç´¢åˆ°çš„æ–‡æ¡£ä¸æŸ¥è¯¢ä¸ç›¸å…³</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<ol>
<li>
<p><strong>ä½¿ç”¨æ›´å¥½çš„ Embedding æ¨¡å‹</strong>ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># ä»all-MiniLM-L6-v2å‡çº§åˆ°BGE-large</span>
encoder = SentenceTransformer(<span class="hljs-string">"BAAI/bge-large-en-v1.5"</span>)
</code></pre>
</li>
<li>
<p><strong>æ·»åŠ é‡æ’</strong>ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># ä½¿ç”¨é‡æ’æ¨¡å‹æå‡å‡†ç¡®æ€§</span>
reranker = AutoModelForSequenceClassification.from_pretrained(<span class="hljs-string">"BAAI/bge-reranker-base"</span>)
</code></pre>
</li>
<li>
<p><strong>è°ƒæ•´æ£€ç´¢å‚æ•°</strong>ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># å¢åŠ æ£€ç´¢æ•°é‡ï¼Œç„¶åé‡æ’</span>
retrieved_docs = self.retrieve(query, top_k=<span class="hljs-number">200</span>)  <span class="hljs-comment"># å¢åŠ æ£€ç´¢æ•°é‡</span>
reranked_docs = self.rerank(query, retrieved_docs, top_k=<span class="hljs-number">10</span>)  <span class="hljs-comment"># é‡æ’åå–Top-10</span>
</code></pre>
</li>
</ol>
<h3 data-id="heading-39">8.5 æ€§èƒ½ä¼˜åŒ–</h3>
<p><strong>é—®é¢˜</strong>ï¼šæŸ¥è¯¢é€Ÿåº¦æ…¢</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<ol>
<li>
<p><strong>ä½¿ç”¨åˆé€‚çš„ç´¢å¼•</strong>ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># HNSWç´¢å¼•é€‚åˆä½å»¶è¿Ÿåœºæ™¯</span>
index_params = {
    <span class="hljs-string">"index_type"</span>: <span class="hljs-string">"HNSW"</span>,
    <span class="hljs-string">"params"</span>: {<span class="hljs-string">"M"</span>: <span class="hljs-number">16</span>, <span class="hljs-string">"efConstruction"</span>: <span class="hljs-number">200</span>}
}
</code></pre>
</li>
<li>
<p><strong>æ‰¹é‡å¤„ç†</strong>ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># æ‰¹é‡æŸ¥è¯¢æ¯”å•ä¸ªæŸ¥è¯¢æ›´é«˜æ•ˆ</span>
results = batch_search(queries, batch_size=<span class="hljs-number">32</span>)
</code></pre>
</li>
<li>
<p><strong>ç¼“å­˜ç»“æœ</strong>ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># ç¼“å­˜å¸¸è§æŸ¥è¯¢çš„ç»“æœ</span>
cached_results = cache.get(query)
<span class="hljs-keyword">if</span> cached_results:
    <span class="hljs-keyword">return</span> cached_results
</code></pre>
</li>
</ol>
<hr/>
<h2 data-id="heading-40">9. æ€»ç»“</h2>
<p>æœ¬æ–‡ä»‹ç»äº†å¦‚ä½•ä»é›¶å¼€å§‹åŸºäº Milvus æ„å»ºé«˜æ€§èƒ½ RAG ç³»ç»Ÿï¼Œæ¶µç›–äº†æ•°æ®å‡†å¤‡ã€å‘é‡æ£€ç´¢ã€ç»“æœé‡æ’ã€ä½ç½®ä¼˜åŒ–ç­‰æ ¸å¿ƒç¯èŠ‚ã€‚</p>
<p><strong>å…³é”®è¦ç‚¹</strong>ï¼š</p>
<ul>
<li>âœ… <strong>ä½ç½®ä¼˜åŒ–æ˜¯å…³é”®</strong>ï¼šé€šè¿‡å°†æœ€ç›¸å…³æ–‡æ¡£æ”¾åœ¨å¼€å¤´ï¼Œå¯ä»¥çªç ´ U å‹é™·é˜±ï¼Œæå‡ 22%çš„å‡†ç¡®ç‡</li>
<li>âœ… <strong>é‡æ’æå‡å‡†ç¡®æ€§</strong>ï¼šä½¿ç”¨ BGE-Reranker ç­‰é‡æ’æ¨¡å‹å¯ä»¥æ˜¾è‘—æå‡æ£€ç´¢æ•ˆæœ</li>
<li>âœ… <strong>ç´¢å¼•é€‰æ‹©å¾ˆé‡è¦</strong>ï¼šæ ¹æ®æ•°æ®è§„æ¨¡å’Œæ€§èƒ½éœ€æ±‚é€‰æ‹©åˆé€‚çš„ç´¢å¼•ç±»å‹ï¼ˆHNSWã€IVF ç­‰ï¼‰</li>
<li>âœ… <strong>ç”Ÿäº§ç¯å¢ƒéœ€å®Œå–„</strong>ï¼šé”™è¯¯å¤„ç†ã€æ—¥å¿—è®°å½•ã€æ€§èƒ½ç›‘æ§æ˜¯ç”Ÿäº§ç¯å¢ƒå¿…å¤‡åŠŸèƒ½</li>
</ul>
<p>å¸Œæœ›æœ¬æ–‡èƒ½å¸®åŠ©ä½ æ„å»ºé«˜æ€§èƒ½çš„ RAG ç³»ç»Ÿã€‚æ›´å¤šæŠ€æœ¯ç»†èŠ‚å’Œä»£ç ç¤ºä¾‹è¯·å‚è€ƒæ–‡ä¸­å„ç« èŠ‚å†…å®¹ã€‚</p>
<hr/>
<h2 data-id="heading-41">é™„å½•ï¼šå®Œæ•´ä»£ç ç¤ºä¾‹</h2>
<h3 data-id="heading-42">A. å®Œæ•´çš„æ•°æ®å‡†å¤‡è„šæœ¬</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-string">"""
å®Œæ•´çš„æ•°æ®å‡†å¤‡è„šæœ¬
"""</span>
<span class="hljs-keyword">from</span> pymilvus <span class="hljs-keyword">import</span> MilvusClient
<span class="hljs-keyword">from</span> sentence_transformers <span class="hljs-keyword">import</span> SentenceTransformer

<span class="hljs-keyword">def</span> <span class="hljs-title function_">prepare_data</span>():
    <span class="hljs-comment"># 1. è¿æ¥Milvus</span>
    client = MilvusClient(uri=<span class="hljs-string">"./milvus_demo.db"</span>)
    collection_name = <span class="hljs-string">"documents"</span>

    <span class="hljs-comment"># 2. å‡†å¤‡æ–‡æ¡£</span>
    documents = [
        {
            <span class="hljs-string">"text"</span>: <span class="hljs-string">"Milvus is an open-source vector database designed for AI applications..."</span>,
            <span class="hljs-string">"doc_id"</span>: <span class="hljs-string">"doc_001"</span>,
            <span class="hljs-string">"title"</span>: <span class="hljs-string">"Introduction to Milvus"</span>
        },
        <span class="hljs-comment"># ... æ›´å¤šæ–‡æ¡£</span>
    ]

    <span class="hljs-comment"># 3. åˆå§‹åŒ–Embeddingæ¨¡å‹</span>
    encoder = SentenceTransformer(<span class="hljs-string">"sentence-transformers/all-MiniLM-L6-v2"</span>)
    dimension = <span class="hljs-number">384</span>

    <span class="hljs-comment"># 4. åˆ›å»ºé›†åˆ</span>
    <span class="hljs-keyword">if</span> client.has_collection(collection_name):
        client.drop_collection(collection_name)

    client.create_collection(
        collection_name=collection_name,
        dimension=dimension,
        metric_type=<span class="hljs-string">"L2"</span>,
        auto_id=<span class="hljs-literal">True</span>,
    )

    <span class="hljs-comment"># 5. ç”Ÿæˆå‘é‡å¹¶æ’å…¥</span>
    texts = [doc[<span class="hljs-string">"text"</span>] <span class="hljs-keyword">for</span> doc <span class="hljs-keyword">in</span> documents]
    embeddings = encoder.encode(texts, normalize_embeddings=<span class="hljs-literal">True</span>)

    data = [
        {
            <span class="hljs-string">"vector"</span>: emb.tolist(),
            <span class="hljs-string">"text"</span>: doc[<span class="hljs-string">"text"</span>],
            <span class="hljs-string">"doc_id"</span>: doc[<span class="hljs-string">"doc_id"</span>],
            <span class="hljs-string">"title"</span>: doc[<span class="hljs-string">"title"</span>],
        }
        <span class="hljs-keyword">for</span> emb, doc <span class="hljs-keyword">in</span> <span class="hljs-built_in">zip</span>(embeddings, documents)
    ]

    client.insert(collection_name=collection_name, data=data)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"âœ“ æ•°æ®å‡†å¤‡å®Œæˆï¼Œå…± <span class="hljs-subst">{<span class="hljs-built_in">len</span>(data)}</span> ä¸ªæ–‡æ¡£"</span>)

<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    prepare_data()
</code></pre>
<h3 data-id="heading-43">B. å®Œæ•´çš„ RAG ç³»ç»Ÿå®ç°</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-string">"""
å®Œæ•´çš„ä¼˜åŒ–RAGç³»ç»Ÿå®ç°
"""</span>
<span class="hljs-keyword">from</span> pymilvus <span class="hljs-keyword">import</span> MilvusClient
<span class="hljs-keyword">from</span> sentence_transformers <span class="hljs-keyword">import</span> SentenceTransformer
<span class="hljs-keyword">from</span> transformers <span class="hljs-keyword">import</span> AutoModelForSequenceClassification, AutoTokenizer
<span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> <span class="hljs-type">List</span>, <span class="hljs-type">Dict</span>, <span class="hljs-type">Any</span>
<span class="hljs-keyword">import</span> torch

<span class="hljs-keyword">class</span> <span class="hljs-title class_">OptimizedRAGSystem</span>:
    <span class="hljs-string">"""ä¼˜åŒ–çš„RAGç³»ç»Ÿ"""</span>

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">
        self,
        milvus_uri: <span class="hljs-built_in">str</span> = <span class="hljs-string">"./milvus_demo.db"</span>,
        collection_name: <span class="hljs-built_in">str</span> = <span class="hljs-string">"documents"</span>,
        embedding_model: <span class="hljs-built_in">str</span> = <span class="hljs-string">"sentence-transformers/all-MiniLM-L6-v2"</span>,
        reranker_model: <span class="hljs-built_in">str</span> = <span class="hljs-literal">None</span>,
    </span>):
        <span class="hljs-comment"># è¿æ¥Milvus</span>
        self.client = MilvusClient(uri=milvus_uri)
        self.collection_name = collection_name

        <span class="hljs-comment"># åˆå§‹åŒ–Embeddingæ¨¡å‹</span>
        self.encoder = SentenceTransformer(embedding_model)

        <span class="hljs-comment"># åˆå§‹åŒ–é‡æ’æ¨¡å‹ï¼ˆå¯é€‰ï¼‰</span>
        self.reranker = <span class="hljs-literal">None</span>
        self.reranker_tokenizer = <span class="hljs-literal">None</span>
        <span class="hljs-keyword">if</span> reranker_model:
            self.reranker = AutoModelForSequenceClassification.from_pretrained(reranker_model)
            self.reranker_tokenizer = AutoTokenizer.from_pretrained(reranker_model)
            self.reranker.<span class="hljs-built_in">eval</span>()

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">retrieve</span>(<span class="hljs-params">self, query: <span class="hljs-built_in">str</span>, top_k: <span class="hljs-built_in">int</span> = <span class="hljs-number">100</span></span>):
        <span class="hljs-string">"""å‘é‡æ£€ç´¢"""</span>
        query_vector = self.encoder.encode(query, normalize_embeddings=<span class="hljs-literal">True</span>).tolist()

        results = self.client.search(
            collection_name=self.collection_name,
            data=[query_vector],
            limit=top_k,
            search_params={<span class="hljs-string">"metric_type"</span>: <span class="hljs-string">"L2"</span>, <span class="hljs-string">"params"</span>: {}},
            output_fields=[<span class="hljs-string">"text"</span>, <span class="hljs-string">"doc_id"</span>, <span class="hljs-string">"title"</span>]
        )

        retrieved_docs = []
        <span class="hljs-keyword">for</span> hit <span class="hljs-keyword">in</span> results[<span class="hljs-number">0</span>]:
            retrieved_docs.append({
                <span class="hljs-string">"id"</span>: hit.get(<span class="hljs-string">"id"</span>, <span class="hljs-string">""</span>),
                <span class="hljs-string">"text"</span>: hit.get(<span class="hljs-string">"entity"</span>, {}).get(<span class="hljs-string">"text"</span>, <span class="hljs-string">""</span>),
                <span class="hljs-string">"score"</span>: hit.get(<span class="hljs-string">"distance"</span>, <span class="hljs-number">0.0</span>),
                <span class="hljs-string">"doc_id"</span>: hit.get(<span class="hljs-string">"entity"</span>, {}).get(<span class="hljs-string">"doc_id"</span>, <span class="hljs-string">""</span>),
                <span class="hljs-string">"title"</span>: hit.get(<span class="hljs-string">"entity"</span>, {}).get(<span class="hljs-string">"title"</span>, <span class="hljs-string">""</span>),
            })

        <span class="hljs-keyword">return</span> retrieved_docs

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">rerank</span>(<span class="hljs-params">self, query: <span class="hljs-built_in">str</span>, documents: <span class="hljs-type">List</span>[<span class="hljs-built_in">str</span>], top_k: <span class="hljs-built_in">int</span> = <span class="hljs-number">10</span></span>):
        <span class="hljs-string">"""é‡æ’"""</span>
        <span class="hljs-keyword">if</span> self.reranker <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span> <span class="hljs-keyword">or</span> <span class="hljs-built_in">len</span>(documents) == <span class="hljs-number">0</span>:
            <span class="hljs-keyword">return</span> documents[:top_k]

        pairs = [[query, doc] <span class="hljs-keyword">for</span> doc <span class="hljs-keyword">in</span> documents]

        <span class="hljs-keyword">with</span> torch.no_grad():
            inputs = self.reranker_tokenizer(
                pairs, padding=<span class="hljs-literal">True</span>, truncation=<span class="hljs-literal">True</span>, return_tensors=<span class="hljs-string">"pt"</span>, max_length=<span class="hljs-number">512</span>
            )
            scores = self.reranker(**inputs).logits.squeeze(-<span class="hljs-number">1</span>)
            ranked_indices = scores.argsort(descending=<span class="hljs-literal">True</span>)
            <span class="hljs-keyword">return</span> [documents[idx] <span class="hljs-keyword">for</span> idx <span class="hljs-keyword">in</span> ranked_indices[:top_k]]

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">build_context</span>(<span class="hljs-params">self, query: <span class="hljs-built_in">str</span>, retrieved_docs: <span class="hljs-type">List</span>[<span class="hljs-type">Dict</span>[<span class="hljs-built_in">str</span>, <span class="hljs-type">Any</span>]]</span>) -&gt; <span class="hljs-built_in">str</span>:
        <span class="hljs-string">"""æ„å»ºä¸Šä¸‹æ–‡ï¼ˆä½ç½®ä¼˜åŒ–ï¼‰"""</span>
        sorted_docs = <span class="hljs-built_in">sorted</span>(
            retrieved_docs,
            key=<span class="hljs-keyword">lambda</span> x: x.get(<span class="hljs-string">"score"</span>, <span class="hljs-number">0</span>) <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(x.get(<span class="hljs-string">"score"</span>), (<span class="hljs-built_in">int</span>, <span class="hljs-built_in">float</span>)) <span class="hljs-keyword">else</span> <span class="hljs-number">0</span>,
            reverse=<span class="hljs-literal">True</span>
        )

        context_parts = [<span class="hljs-string">"ç³»ç»Ÿæç¤ºï¼šè¯·åŸºäºä»¥ä¸‹æ–‡æ¡£å›ç­”é—®é¢˜ã€‚\n"</span>]

        <span class="hljs-comment"># æœ€ç›¸å…³æ–‡æ¡£ï¼ˆå¼€å¤´ï¼‰</span>
        context_parts.append(<span class="hljs-string">"# æœ€ç›¸å…³æ–‡æ¡£ï¼ˆå¼€å¤´ä½ç½®ï¼‰\n"</span>)
        <span class="hljs-keyword">for</span> i, doc <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(sorted_docs[:<span class="hljs-number">3</span>], <span class="hljs-number">1</span>):
            context_parts.append(<span class="hljs-string">f"æ–‡æ¡£ <span class="hljs-subst">{i}</span>ï¼š<span class="hljs-subst">{doc.get(<span class="hljs-string">'text'</span>, <span class="hljs-string">''</span>)}</span>\n"</span>)

        <span class="hljs-comment"># æ¬¡ç›¸å…³æ–‡æ¡£ï¼ˆä¸­é—´ï¼‰</span>
        <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(sorted_docs) &gt; <span class="hljs-number">3</span>:
            context_parts.append(<span class="hljs-string">"\n# æ¬¡ç›¸å…³æ–‡æ¡£ï¼ˆä¸­é—´ä½ç½®ï¼‰\n"</span>)
            <span class="hljs-keyword">for</span> i, doc <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(sorted_docs[<span class="hljs-number">3</span>:<span class="hljs-number">7</span>], <span class="hljs-number">4</span>):
                context_parts.append(<span class="hljs-string">f"æ–‡æ¡£ <span class="hljs-subst">{i}</span>ï¼š<span class="hljs-subst">{doc.get(<span class="hljs-string">'text'</span>, <span class="hljs-string">''</span>)}</span>\n"</span>)

        <span class="hljs-comment"># ç”¨æˆ·é—®é¢˜ï¼ˆç»“å°¾ï¼‰</span>
        context_parts.append(<span class="hljs-string">"\n# ç”¨æˆ·é—®é¢˜ï¼ˆç»“å°¾ä½ç½®ï¼‰\n"</span>)
        context_parts.append(<span class="hljs-string">f"ç”¨æˆ·é—®é¢˜ï¼š<span class="hljs-subst">{query}</span>"</span>)

        <span class="hljs-keyword">return</span> <span class="hljs-string">"\n"</span>.join(context_parts)

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">query</span>(<span class="hljs-params">self, user_query: <span class="hljs-built_in">str</span>, retrieve_top_k: <span class="hljs-built_in">int</span> = <span class="hljs-number">100</span>, rerank_top_k: <span class="hljs-built_in">int</span> = <span class="hljs-number">10</span></span>):
        <span class="hljs-string">"""å®Œæ•´æŸ¥è¯¢æµç¨‹"""</span>
        <span class="hljs-comment"># 1. æ£€ç´¢</span>
        retrieved_docs = self.retrieve(user_query, top_k=retrieve_top_k)

        <span class="hljs-comment"># 2. é‡æ’</span>
        <span class="hljs-keyword">if</span> self.reranker:
            doc_texts = [doc[<span class="hljs-string">"text"</span>] <span class="hljs-keyword">for</span> doc <span class="hljs-keyword">in</span> retrieved_docs]
            reranked_texts = self.rerank(user_query, doc_texts, top_k=rerank_top_k)
            text_to_doc = {doc[<span class="hljs-string">"text"</span>]: doc <span class="hljs-keyword">for</span> doc <span class="hljs-keyword">in</span> retrieved_docs}
            reranked_docs = [text_to_doc[text] <span class="hljs-keyword">for</span> text <span class="hljs-keyword">in</span> reranked_texts]
        <span class="hljs-keyword">else</span>:
            reranked_docs = retrieved_docs[:rerank_top_k]

        <span class="hljs-comment"># 3. æ„å»ºä¸Šä¸‹æ–‡</span>
        context = self.build_context(user_query, reranked_docs)

        <span class="hljs-keyword">return</span> {
            <span class="hljs-string">"query"</span>: user_query,
            <span class="hljs-string">"context"</span>: context,
            <span class="hljs-string">"documents"</span>: reranked_docs
        }

<span class="hljs-comment"># ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    rag = OptimizedRAGSystem()
    result = rag.query(<span class="hljs-string">"What is Milvus?"</span>)
    <span class="hljs-built_in">print</span>(result[<span class="hljs-string">"context"</span>])
</code></pre>
<hr/>
<p><strong>æ„Ÿè°¢é˜…è¯»ï¼å¸Œæœ›æœ¬æ–‡èƒ½å¸®åŠ©ä½ æ„å»ºé«˜æ€§èƒ½çš„ RAG ç³»ç»Ÿã€‚å¦‚æœ‰é—®é¢˜ï¼Œæ¬¢è¿äº¤æµè®¨è®ºã€‚</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€AI ç¼–ç¨‹å®æˆ˜ã€‘ç¬¬ 7 ç¯‡ï¼šç™»å½•æµç¨‹è®¾è®¡ - å¤šåœºæ™¯ã€å¤šæ­¥éª¤çš„ä¼˜é›…å®ç°]]></title>    <link>https://juejin.cn/post/7594266018304884799</link>    <guid>https://juejin.cn/post/7594266018304884799</guid>    <pubDate>2026-01-12T13:13:27.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594266018304884799" data-draft-id="7587277503947587584" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€AI ç¼–ç¨‹å®æˆ˜ã€‘ç¬¬ 7 ç¯‡ï¼šç™»å½•æµç¨‹è®¾è®¡ - å¤šåœºæ™¯ã€å¤šæ­¥éª¤çš„ä¼˜é›…å®ç°"/> <meta itemprop="keywords" content="å‰ç«¯,uni-app,AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2026-01-12T13:13:27.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="HashTang"/> <meta itemprop="url" content="https://juejin.cn/user/1117561754756488"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€AI ç¼–ç¨‹å®æˆ˜ã€‘ç¬¬ 7 ç¯‡ï¼šç™»å½•æµç¨‹è®¾è®¡ - å¤šåœºæ™¯ã€å¤šæ­¥éª¤çš„ä¼˜é›…å®ç°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1117561754756488/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    HashTang
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-12T13:13:27.000Z" title="Mon Jan 12 2026 13:13:27 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{position:relative;word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#333}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:30px;margin-bottom:5px}.markdown-body h2{font-size:24px;display:inline-block;font-weight:700;background:#ef7060;color:#fff;padding:6px 8px 0 0;border-top-right-radius:6px;margin-right:2px;box-shadow:6px 3px 0 0 rgba(239,112,96,.2)}.markdown-body h2:before{content:" ";display:inline-block;width:8px}.markdown-body h2:after{content:" ";position:absolute;display:block;width:calc(100% - 50px);border-bottom:3px solid #ef7060}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #3e3e3e;margin-top:32px;margin-bottom:32px;height:1px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(27,31,35,.05);color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:JetBranins Mono,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px;background-color:#fdfdfd}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#fdfdfd}.markdown-body a{text-decoration:none;font-weight:700;color:#ef7060;border-bottom:1px solid #ef7060}.markdown-body a:active,.markdown-body a:hover{color:#ef2d26}.markdown-body table tr td,.markdown-body table tr th{border:1px solid #ccc;padding:5px 10px}.markdown-body table{display:block!important;width:auto;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{background:#f0f0f0;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#f8f8f8}.markdown-body blockquote{margin-inline-start:0;margin-inline-end:0;border-left:3px solid #ef7060;background:#fff9f9;padding:1px 20px;margin-top:20px}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="vs2015">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#1e1e1e;color:#dcdcdc}.hljs-keyword,.hljs-link,.hljs-literal,.hljs-name,.hljs-symbol{color:#569cd6}.hljs-link{text-decoration:underline}.hljs-built_in,.hljs-type{color:#4ec9b0}.hljs-class,.hljs-number{color:#b8d7a3}.hljs-meta-string,.hljs-string{color:#d69d85}.hljs-regexp,.hljs-template-tag{color:#9a5334}.hljs-formula,.hljs-function,.hljs-params,.hljs-subst,.hljs-title{color:#dcdcdc}.hljs-comment,.hljs-quote{color:#57a64a;font-style:italic}.hljs-doctag{color:#608b4e}.hljs-meta,.hljs-meta-keyword,.hljs-tag{color:#9b9b9b}.hljs-template-variable,.hljs-variable{color:#bd63c5}.hljs-attr,.hljs-attribute,.hljs-builtin-name{color:#9cdcfe}.hljs-section{color:gold}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-bullet,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-id,.hljs-selector-pseudo,.hljs-selector-tag{color:#d7ba7d}.hljs-addition{background-color:#144212}.hljs-addition,.hljs-deletion{display:inline-block;width:100%}.hljs-deletion{background-color:#600}</style><blockquote>
<p>ç™»å½•æ˜¯ç”¨æˆ·è¿›å…¥åº”ç”¨çš„ç¬¬ä¸€é“é—¨ï¼Œä½†è®¾è®¡ä¸€ä¸ª<strong>ä½“éªŒå¥½ã€å¯ç»´æŠ¤ã€å¤šåœºæ™¯é€‚ç”¨</strong>çš„ç™»å½•æµç¨‹å¹¶ä¸ç®€å•ã€‚è¿™ç¯‡æ–‡ç« ä»¥<strong>å¿ƒåŠ¨æ‹èŠ</strong>å°ç¨‹åºä¸ºä¾‹ï¼Œå±•ç¤ºå¦‚ä½•å’Œ AI å¯¹è¯ï¼Œè®¾è®¡ä¸€å¥—å®Œæ•´çš„ç™»å½•ç³»ç»Ÿâ€”â€”ä»å¾®ä¿¡æˆæƒåˆ°æ‰‹æœºå·ç»‘å®šï¼Œä»å¼¹çª—ç»„ä»¶åˆ°å…¨å±€çŠ¶æ€ç®¡ç†ã€‚</p>
<p><strong>ç³»åˆ—ä¸“æ </strong>ï¼š<a href="https://juejin.cn/column/7579556047783624756" target="_blank" title="https://juejin.cn/column/7579556047783624756">ã€AI ç¼–ç¨‹å®æˆ˜ï¼šTRAE SOLO å…¨æ ˆå¼€å‘æŒ‡å—ã€‘</a></p>
<p><strong>æœ¬ç¯‡ä¸»é¢˜</strong>ï¼šç™»å½•æµç¨‹è®¾è®¡ - å¤šåœºæ™¯ã€å¤šæ­¥éª¤çš„ä¼˜é›…å®ç°</p>
<p><strong>å®æˆ˜é¡¹ç›®</strong>ï¼šå¿ƒåŠ¨æ‹èŠ - AI æ‹çˆ±èŠå¤©åŠ©æ‰‹</p>
</blockquote>
<h2 data-id="heading-0">ä¸€ã€å¼€ç¯‡ï¼šç™»å½•æµç¨‹çš„å¤æ‚æ€§</h2>
<h3 data-id="heading-1">1.1 çœ‹ä¼¼ç®€å•ï¼Œå®åˆ™å¤æ‚</h3>
<p>å¾ˆå¤šäººè§‰å¾—ç™»å½•å°±æ˜¯"ç‚¹å‡»æŒ‰é’® â†’ è°ƒç”¨æ¥å£ â†’ è·³è½¬é¦–é¡µ"ï¼Œä½†å®é™…ä¸šåŠ¡ä¸­çš„ç™»å½•æµç¨‹è¦å¤æ‚å¾—å¤šï¼š</p>
<pre><code class="hljs language-txt" lang="txt">ç”¨æˆ·ç‚¹å‡»ç™»å½•
    â†“
å¾®ä¿¡é™é»˜ç™»å½•ï¼ˆè·å– openidï¼‰
    â†“
æ£€æŸ¥æ˜¯å¦å·²æ³¨å†Œï¼Ÿ
    â”œâ”€â”€ æ˜¯ â†’ ç›´æ¥ç™»å½•æˆåŠŸ
    â””â”€â”€ å¦ â†’ éœ€è¦æ‰‹æœºå·æˆæƒ
              â†“
         ç”¨æˆ·æˆæƒæ‰‹æœºå·
              â†“
         æ˜¯å¦æ–°ç”¨æˆ·ï¼Ÿ
              â”œâ”€â”€ æ˜¯ â†’ å®Œå–„èµ„æ–™ï¼ˆæ€§åˆ«ã€å¹´é¾„ï¼‰
              â””â”€â”€ å¦ â†’ ç™»å½•æˆåŠŸ
</code></pre>
<p><strong>è¿˜æœ‰æ›´å¤šåœºæ™¯</strong>ï¼š</p>
<ul>
<li>ä»»æ„é¡µé¢è§¦å‘ç™»å½•ï¼ˆä¸åªæ˜¯ç™»å½•é¡µï¼‰</li>
<li>ç™»å½•æˆåŠŸåæ‰§è¡Œå›è°ƒï¼ˆå¦‚ç»§ç»­ä¹‹å‰çš„æ“ä½œï¼‰</li>
<li>ç™»å½•å¼¹çª—è€Œéç™»å½•é¡µï¼ˆä¸æ‰“æ–­ç”¨æˆ·æµè§ˆï¼‰</li>
<li>ç™»å½•çŠ¶æ€å…¨å±€åŒæ­¥</li>
</ul>
<h3 data-id="heading-2">1.2 æˆ‘éœ€è¦ä»€ä¹ˆ</h3>
<p>æˆ‘éœ€è¦ä¸€å¥—<strong>å®Œæ•´çš„ç™»å½•ç³»ç»Ÿ</strong>ï¼š</p>
<ul>
<li>å¾®ä¿¡ä¸€é”®ç™»å½• + æ‰‹æœºå·æˆæƒ</li>
<li>æ–°ç”¨æˆ·å¼•å¯¼å®Œå–„èµ„æ–™</li>
<li>å…¨å±€ç™»å½•å¼¹çª—ï¼ˆä»»æ„é¡µé¢å¯è§¦å‘ï¼‰</li>
<li>ç™»å½•æˆåŠŸå›è°ƒæœºåˆ¶</li>
<li>çŠ¶æ€å…¨å±€åŒæ­¥</li>
</ul>
<h2 data-id="heading-3">äºŒã€æ•´ä½“æ¶æ„è®¾è®¡</h2>
<h3 data-id="heading-4">2.1 æˆ‘çš„éœ€æ±‚</h3>
<pre><code class="hljs language-txt" lang="txt">æˆ‘ï¼šéœ€è¦è®¾è®¡ä¸€å¥—ç™»å½•ç³»ç»Ÿï¼Œè¦æ±‚ï¼š
    1. å¾®ä¿¡å°ç¨‹åºç¯å¢ƒ
    2. æ”¯æŒå¾®ä¿¡ç™»å½• + æ‰‹æœºå·æˆæƒ
    3. æ–°ç”¨æˆ·è¦å¼•å¯¼å¡«æ€§åˆ«å’Œå¹´é¾„
    4. ä»»æ„é¡µé¢éƒ½èƒ½è§¦å‘ç™»å½•å¼¹çª—
    5. ç™»å½•æˆåŠŸåèƒ½æ‰§è¡Œå›è°ƒ
</code></pre>
<h3 data-id="heading-5">2.2 AI åˆ†æå¹¶ç»™å‡ºæ¶æ„</h3>
<pre><code class="hljs language-txt" lang="txt">AIï¼šè¿™æ˜¯ä¸€ä¸ªæ¯”è¾ƒå¤æ‚çš„ç™»å½•ç³»ç»Ÿï¼Œæˆ‘æ¥è®¾è®¡æ•´ä½“æ¶æ„ã€‚

ğŸ“ æ¶æ„è®¾è®¡ï¼š

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ä¸šåŠ¡é¡µé¢                       â”‚
â”‚   ï¼ˆé¦–é¡µã€æˆ‘çš„ã€è¯¦æƒ…é¡µ...ä»»æ„éœ€è¦ç™»å½•çš„åœ°æ–¹ï¼‰         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚ è°ƒç”¨
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              loginModalStore                     â”‚
â”‚   ï¼ˆå…¨å±€çŠ¶æ€ï¼šæ§åˆ¶å¼¹çª—æ˜¾ç¤ºã€ç®¡ç†å›è°ƒé˜Ÿåˆ—ï¼‰            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚ é©±åŠ¨
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              LoginModalRoot                      â”‚
â”‚   ï¼ˆå…¨å±€ç»„ä»¶ï¼šæŒ‚è½½åœ¨ App å±‚ï¼Œç›‘å¬ Store çŠ¶æ€ï¼‰       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚ åŒ…å«
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              LoginModal                          â”‚
â”‚   ï¼ˆç™»å½•å¼¹çª—ï¼šå¤šæ­¥éª¤æµç¨‹ loginâ†’genderâ†’ageï¼‰         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚ è°ƒç”¨
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               userStore                          â”‚
â”‚   ï¼ˆç”¨æˆ·çŠ¶æ€ï¼šç™»å½•æ–¹æ³•ã€ç”¨æˆ·ä¿¡æ¯ã€æŒä¹…åŒ–ï¼‰            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸ—‚ï¸ æ–‡ä»¶ç»“æ„ï¼š

src/
â”œâ”€â”€ store/
â”‚   â”œâ”€â”€ user.ts           # ç”¨æˆ·çŠ¶æ€ + ç™»å½•æ–¹æ³•
â”‚   â””â”€â”€ loginModal.ts     # ç™»å½•å¼¹çª—çŠ¶æ€
â”œâ”€â”€ components/
â”‚   â””â”€â”€ auth/
â”‚       â””â”€â”€ LoginModalRoot.vue  # å…¨å±€ç™»å½•å¼¹çª—å®¹å™¨
â””â”€â”€ pages/
    â””â”€â”€ my/
        â””â”€â”€ components/
            â””â”€â”€ LoginModal.vue  # ç™»å½•å¼¹çª—ä¸»ä½“

è¿™æ ·è®¾è®¡çš„å¥½å¤„ï¼š
1. ä»»æ„é¡µé¢è°ƒç”¨ loginModalStore.open() å³å¯è§¦å‘ç™»å½•
2. ç™»å½•é€»è¾‘é›†ä¸­åœ¨ LoginModalï¼Œä¸åˆ†æ•£åˆ°å„é¡µé¢
3. æ”¯æŒå›è°ƒæœºåˆ¶ï¼Œç™»å½•æˆåŠŸåæ‰§è¡Œç‰¹å®šæ“ä½œ
</code></pre>
<pre><code class="hljs language-txt" lang="txt">æˆ‘ï¼šè¿™ä¸ªæ¶æ„çœ‹èµ·æ¥ä¸é”™ï¼Œå¼€å§‹å®ç°å§
</code></pre>
<h2 data-id="heading-6">ä¸‰ã€ç™»å½•å¼¹çª—çŠ¶æ€ç®¡ç†</h2>
<h3 data-id="heading-7">3.1 è®¾è®¡ loginModalStore</h3>
<pre><code class="hljs language-txt" lang="txt">AIï¼šå…ˆå®ç°ç™»å½•å¼¹çª—çš„çŠ¶æ€ç®¡ç†ã€‚

æ ¸å¿ƒåŠŸèƒ½ï¼š
1. æ§åˆ¶å¼¹çª—æ˜¾ç¤º/éšè—
2. ç®¡ç†ç™»å½•æˆåŠŸå›è°ƒé˜Ÿåˆ—
3. è§¦å‘ç™»å½•æµç¨‹æˆ–èµ„æ–™å®Œå–„æµç¨‹
</code></pre>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// src/store/loginModal.ts</span>
<span class="hljs-keyword">import</span> { defineStore } <span class="hljs-keyword">from</span> <span class="hljs-string">'pinia'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-keyword">type</span> { <span class="hljs-title class_">UserInfo</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'shared-types'</span>;

<span class="hljs-keyword">type</span> <span class="hljs-title class_">LoginSuccessHandler</span> = <span class="hljs-function">(<span class="hljs-params">userInfo?: UserInfo</span>) =&gt;</span> <span class="hljs-built_in">void</span> | <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt;;

<span class="hljs-keyword">interface</span> <span class="hljs-title class_">LoginModalState</span> {
  <span class="hljs-attr">visible</span>: <span class="hljs-built_in">boolean</span>;
  <span class="hljs-attr">shouldStart</span>: <span class="hljs-built_in">boolean</span>; <span class="hljs-comment">// æ˜¯å¦è§¦å‘ç™»å½•æµç¨‹</span>
  <span class="hljs-attr">shouldStartProfileCompletion</span>: <span class="hljs-built_in">boolean</span>; <span class="hljs-comment">// æ˜¯å¦è§¦å‘èµ„æ–™å®Œå–„æµç¨‹</span>
  <span class="hljs-attr">queue</span>: <span class="hljs-title class_">LoginSuccessHandler</span>[]; <span class="hljs-comment">// å›è°ƒé˜Ÿåˆ—</span>
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> useLoginModalStore = <span class="hljs-title function_">defineStore</span>(<span class="hljs-string">'loginModal'</span>, {
  <span class="hljs-attr">state</span>: (): <span class="hljs-function"><span class="hljs-params">LoginModalState</span> =&gt;</span> ({
    <span class="hljs-attr">visible</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">shouldStart</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">shouldStartProfileCompletion</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">queue</span>: [],
  }),

  <span class="hljs-attr">actions</span>: {
    <span class="hljs-comment">/**
     * æ‰“å¼€ç™»å½•å¼¹çª—
     * <span class="hljs-doctag">@param</span> options.onSuccess - ç™»å½•æˆåŠŸåçš„å›è°ƒ
     * <span class="hljs-doctag">@param</span> options.startProfileCompletion - æ˜¯å¦ç›´æ¥è¿›å…¥èµ„æ–™å®Œå–„
     */</span>
    <span class="hljs-title function_">open</span>(<span class="hljs-params">options?: { onSuccess?: LoginSuccessHandler; startProfileCompletion?: <span class="hljs-built_in">boolean</span> }</span>) {
      <span class="hljs-comment">// å°†å›è°ƒåŠ å…¥é˜Ÿåˆ—</span>
      <span class="hljs-keyword">if</span> (options?.<span class="hljs-property">onSuccess</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">queue</span>.<span class="hljs-title function_">push</span>(options.<span class="hljs-property">onSuccess</span>);
      }

      <span class="hljs-variable language_">this</span>.<span class="hljs-property">visible</span> = <span class="hljs-literal">true</span>;

      <span class="hljs-keyword">if</span> (options?.<span class="hljs-property">startProfileCompletion</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">shouldStartProfileCompletion</span> = <span class="hljs-literal">true</span>;
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">shouldStart</span> = <span class="hljs-literal">true</span>;
      }
    },

    <span class="hljs-comment">/**
     * ç™»å½•æµç¨‹å·²å¯åŠ¨ï¼ˆç”± LoginModalRoot è°ƒç”¨ï¼‰
     */</span>
    <span class="hljs-title function_">markStarted</span>(<span class="hljs-params"/>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">shouldStart</span> = <span class="hljs-literal">false</span>;
    },

    <span class="hljs-comment">/**
     * èµ„æ–™å®Œå–„æµç¨‹å·²å¯åŠ¨
     */</span>
    <span class="hljs-title function_">markProfileCompletionStarted</span>(<span class="hljs-params"/>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">shouldStartProfileCompletion</span> = <span class="hljs-literal">false</span>;
    },

    <span class="hljs-comment">/**
     * ç™»å½•æˆåŠŸï¼Œæ‰§è¡Œæ‰€æœ‰å›è°ƒ
     */</span>
    <span class="hljs-keyword">async</span> <span class="hljs-title function_">resolveSuccess</span>(<span class="hljs-params">userInfo?: UserInfo</span>) {
      <span class="hljs-keyword">const</span> callbacks = [...<span class="hljs-variable language_">this</span>.<span class="hljs-property">queue</span>];
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">queue</span> = [];

      <span class="hljs-comment">// ä¾æ¬¡æ‰§è¡Œå›è°ƒ</span>
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> callback <span class="hljs-keyword">of</span> callbacks) {
        <span class="hljs-keyword">await</span> <span class="hljs-title function_">callback</span>(userInfo);
      }

      <span class="hljs-variable language_">this</span>.<span class="hljs-property">visible</span> = <span class="hljs-literal">false</span>;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">shouldStart</span> = <span class="hljs-literal">false</span>;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">shouldStartProfileCompletion</span> = <span class="hljs-literal">false</span>;
    },

    <span class="hljs-comment">/**
     * å…³é—­å¼¹çª—
     */</span>
    <span class="hljs-title function_">close</span>(<span class="hljs-params"/>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">visible</span> = <span class="hljs-literal">false</span>;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">shouldStart</span> = <span class="hljs-literal">false</span>;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">shouldStartProfileCompletion</span> = <span class="hljs-literal">false</span>;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">queue</span> = [];
    },
  },
});
</code></pre>
<pre><code class="hljs language-txt" lang="txt">AIï¼šä½¿ç”¨æ–¹å¼ï¼š

// ä»»æ„é¡µé¢è§¦å‘ç™»å½•
import { useLoginModalStore } from '@/store/loginModal'

const loginModalStore = useLoginModalStore()

// åœºæ™¯1ï¼šç®€å•è§¦å‘ç™»å½•
loginModalStore.open()

// åœºæ™¯2ï¼šç™»å½•æˆåŠŸåæ‰§è¡Œæ“ä½œ
loginModalStore.open({
  onSuccess: (userInfo) =&gt; {
    console.log('ç™»å½•æˆåŠŸ:', userInfo)
    // ç»§ç»­ä¹‹å‰çš„æ“ä½œï¼Œå¦‚å‘é€æ¶ˆæ¯ã€è´­ä¹°ä¼šå‘˜ç­‰
  }
})

// åœºæ™¯3ï¼šç›´æ¥è¿›å…¥èµ„æ–™å®Œå–„ï¼ˆç”¨æˆ·å·²ç™»å½•ä½†æœªå¡«èµ„æ–™ï¼‰
loginModalStore.open({ startProfileCompletion: true })
</code></pre>
<h3 data-id="heading-8">3.2 æˆ‘è¿½é—®å›è°ƒé˜Ÿåˆ—çš„ä½œç”¨</h3>
<pre><code class="hljs language-txt" lang="txt">æˆ‘ï¼šä¸ºä»€ä¹ˆè¦ç”¨é˜Ÿåˆ—ï¼Ÿç›´æ¥å­˜ä¸€ä¸ªå›è°ƒä¸è¡Œå—ï¼Ÿ
</code></pre>
<pre><code class="hljs language-txt" lang="txt">AIï¼šé˜Ÿåˆ—æ˜¯ä¸ºäº†å¤„ç†"è¿ç»­è§¦å‘"çš„åœºæ™¯ã€‚

ğŸ¯ åœºæ™¯ç¤ºä¾‹ï¼š
ç”¨æˆ·åœ¨é¡µé¢ A ç‚¹å‡»"å‘é€æ¶ˆæ¯"ï¼ˆéœ€è¦ç™»å½•ï¼‰
â†’ å¼¹å‡ºç™»å½•æ¡†
â†’ ç”¨æˆ·æ²¡ç™»å½•ï¼Œåˆç‚¹å‡»äº†"æ”¶è—"ï¼ˆä¹Ÿéœ€è¦ç™»å½•ï¼‰
â†’ è¿™æ—¶æœ‰ä¸¤ä¸ªå›è°ƒç­‰å¾…æ‰§è¡Œ

å¦‚æœåªå­˜ä¸€ä¸ªå›è°ƒï¼Œç¬¬äºŒä¸ªä¼šè¦†ç›–ç¬¬ä¸€ä¸ªã€‚
ç”¨é˜Ÿåˆ—å°±èƒ½ä¿è¯ä¸¤ä¸ªæ“ä½œéƒ½èƒ½åœ¨ç™»å½•åæ‰§è¡Œã€‚

å½“ç„¶ï¼Œå¦‚æœä½ çš„ä¸šåŠ¡ä¸éœ€è¦è¿™ç§åœºæ™¯ï¼Œç”¨å•ä¸ªå›è°ƒä¹Ÿå¯ä»¥ã€‚
</code></pre>
<h2 data-id="heading-9">å››ã€å…¨å±€ç™»å½•å¼¹çª—å®¹å™¨</h2>
<h3 data-id="heading-10">4.1 LoginModalRoot è®¾è®¡</h3>
<pre><code class="hljs language-txt" lang="txt">æˆ‘ï¼šloginModalStore æœ‰äº†ï¼Œä½†å¼¹çª—ç»„ä»¶åœ¨å“ªé‡Œæ¸²æŸ“ï¼Ÿ
    æ¯ä¸ªé¡µé¢éƒ½å¼•å…¥ä¸€éå—ï¼Ÿ
</code></pre>
<pre><code class="hljs language-txt" lang="txt">AIï¼šä¸ç”¨ã€‚åˆ›å»ºä¸€ä¸ªå…¨å±€å®¹å™¨ç»„ä»¶ï¼ŒæŒ‚è½½åœ¨ App å±‚ã€‚

è®¾è®¡æ€è·¯ï¼š
1. LoginModalRoot æ”¾åœ¨ App.vue æˆ– Layout ä¸­
2. å®ƒç›‘å¬ loginModalStore çš„çŠ¶æ€
3. çŠ¶æ€å˜åŒ–æ—¶ï¼Œè°ƒç”¨ LoginModal çš„æ–¹æ³•
</code></pre>
<pre><code class="hljs language-vue" lang="vue">&lt;!-- src/components/auth/LoginModalRoot.vue --&gt;
&lt;template&gt;
  &lt;LoginModal ref="loginModalRef" v-model="modalVisible" @login-success="handleLoginSuccess" /&gt;
&lt;/template&gt;

&lt;script lang="ts" setup&gt;
import { computed, nextTick, ref, watch } from 'vue';
import type { UserInfo } from 'shared-types';
import LoginModal from '@/pages/my/components/LoginModal.vue';
import { useLoginModalStore } from '@/store/loginModal';

const loginModalStore = useLoginModalStore();
const loginModalRef = ref&lt;InstanceType&lt;typeof LoginModal&gt; | null&gt;(null);

// åŒå‘ç»‘å®šå¼¹çª—æ˜¾ç¤ºçŠ¶æ€
const modalVisible = computed({
  get: () =&gt; loginModalStore.visible,
  set: (value: boolean) =&gt; {
    loginModalStore.setVisible(value);
  },
});

// ç™»å½•æˆåŠŸå¤„ç†
const handleLoginSuccess = async (userInfo?: UserInfo) =&gt; {
  await loginModalStore.resolveSuccess(userInfo);
};

// ç›‘å¬"å¼€å§‹ç™»å½•"ä¿¡å·
watch(
  () =&gt; loginModalStore.shouldStart,
  async (shouldStart) =&gt; {
    if (!shouldStart) return;
    await nextTick();
    loginModalRef.value?.startLogin();
    loginModalStore.markStarted();
  },
);

// ç›‘å¬"å¼€å§‹èµ„æ–™å®Œå–„"ä¿¡å·
watch(
  () =&gt; loginModalStore.shouldStartProfileCompletion,
  async (shouldStart) =&gt; {
    if (!shouldStart) return;
    await nextTick();
    loginModalRef.value?.startProfileCompletion();
    loginModalStore.markProfileCompletionStarted();
  },
);
&lt;/script&gt;
</code></pre>
<h3 data-id="heading-11">4.2 æŒ‚è½½åˆ°å…¨å±€</h3>
<pre><code class="hljs language-txt" lang="txt">AIï¼šæŠŠ LoginModalRoot æŒ‚è½½åˆ° Layout æˆ– App å±‚ï¼š
</code></pre>
<pre><code class="hljs language-vue" lang="vue">&lt;!-- src/layouts/default.vue --&gt;
&lt;template&gt;
  &lt;slot /&gt;
  &lt;!-- å…¨å±€ç™»å½•å¼¹çª— --&gt;
  &lt;LoginModalRoot /&gt;
&lt;/template&gt;

&lt;script setup lang="ts"&gt;
import LoginModalRoot from '@/components/auth/LoginModalRoot.vue';
&lt;/script&gt;
</code></pre>
<pre><code class="hljs language-txt" lang="txt">AIï¼šè¿™æ ·æ‰€æœ‰ä½¿ç”¨ default å¸ƒå±€çš„é¡µé¢éƒ½èƒ½è§¦å‘ç™»å½•å¼¹çª—ï¼Œ
ä¸éœ€è¦æ¯ä¸ªé¡µé¢å•ç‹¬å¼•å…¥ã€‚
</code></pre>
<h2 data-id="heading-12">äº”ã€å¤šæ­¥éª¤ç™»å½•å¼¹çª—</h2>
<h3 data-id="heading-13">5.1 ç™»å½•æµç¨‹è®¾è®¡</h3>
<pre><code class="hljs language-txt" lang="txt">æˆ‘ï¼šç°åœ¨è¦å®ç° LoginModal æœ¬èº«äº†ã€‚
    æµç¨‹æ˜¯ï¼šç™»å½• â†’ æ€§åˆ«é€‰æ‹© â†’ å¹´é¾„é€‰æ‹© â†’ å®Œæˆ
</code></pre>
<pre><code class="hljs language-txt" lang="txt">AIï¼šæˆ‘æ¥è®¾è®¡å¤šæ­¥éª¤çš„çŠ¶æ€æœºï¼š

ğŸ“‹ æ­¥éª¤çŠ¶æ€ï¼š
- login: ç™»å½•ç•Œé¢ï¼ˆå¾®ä¿¡æˆæƒ + åè®®å‹¾é€‰ï¼‰
- gender: æ€§åˆ«é€‰æ‹©ï¼ˆæ–°ç”¨æˆ·ï¼‰
- age: å¹´é¾„é€‰æ‹©ï¼ˆæ–°ç”¨æˆ·ï¼‰

ğŸ“‹ æµç¨‹é€»è¾‘ï¼š
1. ç”¨æˆ·ç‚¹å‡»ç™»å½• â†’ è°ƒç”¨å¾®ä¿¡ç™»å½•
2. æ£€æŸ¥è¿”å›ç»“æœï¼š
   - æœ‰ token + user_id â†’ è€ç”¨æˆ·ï¼Œç›´æ¥æˆåŠŸ
   - æ—  token â†’ éœ€è¦æ‰‹æœºå·æˆæƒ
   - needsRegistration=true â†’ æ–°ç”¨æˆ·ï¼Œè¿›å…¥èµ„æ–™å®Œå–„
</code></pre>
<pre><code class="hljs language-vue" lang="vue">&lt;!-- src/pages/my/components/LoginModal.vue --&gt;
&lt;template&gt;
  &lt;u-popup
    v-model="isVisible"
    mode="bottom"
    border-radius="24"
    :safe-area-inset-bottom="true"
    :closeable="true"
    @close="handleClose"
  &gt;
    &lt;view class="login-modal-content"&gt;
      &lt;!-- æ­¥éª¤1ï¼šç™»å½•ç•Œé¢ --&gt;
      &lt;view v-if="currentStep === 'login'" class="login-step"&gt;
        &lt;view class="pt-4.5 pb-10"&gt;
          &lt;text class="block text-center text-lg font-bold"&gt;æ¬¢è¿ç™»å½•&lt;/text&gt;
        &lt;/view&gt;

        &lt;!-- ç™»å½•æŒ‰é’® --&gt;
        &lt;view class="px-9 pb-4"&gt;
          &lt;XButton
            text="æ‰‹æœºå·å¿«æ·ç™»å½•"
            :loading="isLoading"
            :open-type="needPhoneAuth ? 'getPhoneNumber' : undefined"
            @getphonenumber="handlePhoneNumber"
            @click="handleLoginClick"
          /&gt;
        &lt;/view&gt;

        &lt;!-- åè®®å‹¾é€‰ --&gt;
        &lt;view class="px-9 pb-20"&gt;
          &lt;view class="flex items-center justify-center" @click="toggleAgreement"&gt;
            &lt;view
              class="w-5 h-5 rounded-full border flex items-center justify-center"
              :class="isAgreed ? 'bg-primary border-primary' : 'border-gray-400'"
            &gt;
              &lt;u-icon v-if="isAgreed" name="checkmark" size="20" color="#fff" /&gt;
            &lt;/view&gt;
            &lt;text class="ml-2 text-sm"&gt;
              å‹¾é€‰åŒæ„
              &lt;text class="text-primary" @click.stop="openAgreement('user')"&gt;ã€Šç”¨æˆ·åè®®ã€‹&lt;/text&gt;
              å’Œ
              &lt;text class="text-primary" @click.stop="openAgreement('privacy')"&gt;ã€Šéšç§æ”¿ç­–ã€‹&lt;/text&gt;
            &lt;/text&gt;
          &lt;/view&gt;
        &lt;/view&gt;
      &lt;/view&gt;

      &lt;!-- æ­¥éª¤2ï¼šæ€§åˆ«é€‰æ‹© --&gt;
      &lt;view v-else-if="currentStep === 'gender'" class="gender-step"&gt;
        &lt;view class="pt-4 pb-10"&gt;
          &lt;text class="block text-center text-lg font-bold"&gt;é€‰æ‹©ä½ çš„æ€§åˆ«&lt;/text&gt;
          &lt;text class="block text-center text-sm text-gray-500 mt-2"&gt;æ›´ç²¾å‡†åŒ¹é…å›å¤è¯æœ¯&lt;/text&gt;
        &lt;/view&gt;

        &lt;view class="flex justify-center gap-8 pb-20"&gt;
          &lt;view
            v-for="gender in genderOptions"
            :key="gender.value"
            class="flex flex-col items-center"
            @click="selectGender(gender.value)"
          &gt;
            &lt;image :src="gender.icon" class="w-32 h-32" /&gt;
            &lt;text class="mt-2"&gt;{{ gender.label }}&lt;/text&gt;
            &lt;view
              v-if="selectedGender === gender.value"
              class="w-5 h-5 rounded-full bg-primary mt-2"
            /&gt;
          &lt;/view&gt;
        &lt;/view&gt;
      &lt;/view&gt;

      &lt;!-- æ­¥éª¤3ï¼šå¹´é¾„é€‰æ‹© --&gt;
      &lt;view v-else class="age-step"&gt;
        &lt;view class="pt-4 pb-10"&gt;
          &lt;text class="block text-center text-lg font-bold"&gt;é€‰æ‹©ä½ çš„å¹´é¾„æ®µ&lt;/text&gt;
        &lt;/view&gt;

        &lt;view class="flex flex-wrap justify-center gap-4 pb-20"&gt;
          &lt;view
            v-for="age in ageOptions"
            :key="age"
            class="px-6 py-3 rounded-full"
            :class="selectedAge === age ? 'bg-primary text-white' : 'bg-gray-100'"
            @click="selectAge(age)"
          &gt;
            {{ age }}
          &lt;/view&gt;
        &lt;/view&gt;
      &lt;/view&gt;
    &lt;/view&gt;
  &lt;/u-popup&gt;
&lt;/template&gt;
</code></pre>
<h3 data-id="heading-14">5.2 ç™»å½•é€»è¾‘å®ç°</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// LoginModal.vue &lt;script setup&gt;</span>
<span class="hljs-keyword">import</span> { ref, computed } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>;
<span class="hljs-keyword">import</span> { useUserStore } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/store/user'</span>;
<span class="hljs-keyword">import</span> { toast } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/utils/toast'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">GenderEnum</span>, <span class="hljs-title class_">AgeGroupEnum</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'shared-types'</span>;
<span class="hljs-keyword">import</span> { requestWechatLoginCode } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/utils/wechat'</span>;

<span class="hljs-keyword">const</span> userStore = <span class="hljs-title function_">useUserStore</span>();

<span class="hljs-comment">// å½“å‰æ­¥éª¤</span>
<span class="hljs-keyword">const</span> currentStep = ref&lt;<span class="hljs-string">'login'</span> | <span class="hljs-string">'gender'</span> | <span class="hljs-string">'age'</span>&gt;(<span class="hljs-string">'login'</span>);

<span class="hljs-comment">// çŠ¶æ€</span>
<span class="hljs-keyword">const</span> isAgreed = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">false</span>);
<span class="hljs-keyword">const</span> isLoading = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">false</span>);
<span class="hljs-keyword">const</span> needPhoneAuth = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">false</span>);
<span class="hljs-keyword">const</span> selectedGender = <span class="hljs-title function_">ref</span>(<span class="hljs-string">''</span>);
<span class="hljs-keyword">const</span> selectedAge = <span class="hljs-title function_">ref</span>(<span class="hljs-string">''</span>);

<span class="hljs-comment">// æ€§åˆ«å’Œå¹´é¾„é€‰é¡¹</span>
<span class="hljs-keyword">const</span> genderOptions = [
  { <span class="hljs-attr">value</span>: <span class="hljs-string">'male'</span>, <span class="hljs-attr">label</span>: <span class="hljs-string">'ç”·'</span>, <span class="hljs-attr">icon</span>: <span class="hljs-string">'/static/images/male.png'</span> },
  { <span class="hljs-attr">value</span>: <span class="hljs-string">'female'</span>, <span class="hljs-attr">label</span>: <span class="hljs-string">'å¥³'</span>, <span class="hljs-attr">icon</span>: <span class="hljs-string">'/static/images/female.png'</span> },
];
<span class="hljs-keyword">const</span> ageOptions = [<span class="hljs-string">'00å'</span>, <span class="hljs-string">'05å'</span>, <span class="hljs-string">'90å'</span>, <span class="hljs-string">'80å'</span>, <span class="hljs-string">'70å'</span>];

<span class="hljs-comment">/**
 * å¤„ç†ç™»å½•æŒ‰é’®ç‚¹å‡»
 */</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleLoginClick</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">if</span> (!isAgreed.<span class="hljs-property">value</span>) {
    toast.<span class="hljs-title function_">warning</span>(<span class="hljs-string">'è¯·å‹¾é€‰åŒæ„ç”¨æˆ·åè®®'</span>);
    <span class="hljs-keyword">return</span>;
  }

  <span class="hljs-comment">// å¦‚æœéœ€è¦æ‰‹æœºå·æˆæƒï¼Œç”± open-type å¤„ç†</span>
  <span class="hljs-keyword">if</span> (needPhoneAuth.<span class="hljs-property">value</span>) <span class="hljs-keyword">return</span>;

  <span class="hljs-keyword">await</span> <span class="hljs-title function_">performWechatLogin</span>();
};

<span class="hljs-comment">/**
 * æ‰§è¡Œå¾®ä¿¡ç™»å½•
 */</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">performWechatLogin</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
  isLoading.<span class="hljs-property">value</span> = <span class="hljs-literal">true</span>;
  <span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// 1. è·å–å¾®ä¿¡ code</span>
    <span class="hljs-keyword">const</span> loginCode = <span class="hljs-keyword">await</span> <span class="hljs-title function_">requestWechatLoginCode</span>();

    <span class="hljs-comment">// 2. è°ƒç”¨ Store ç™»å½•æ–¹æ³•</span>
    <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> userStore.<span class="hljs-title function_">wechatLogin</span>({ <span class="hljs-attr">code</span>: loginCode });

    <span class="hljs-comment">// 3. åˆ¤æ–­ç»“æœ</span>
    <span class="hljs-keyword">if</span> (result.<span class="hljs-property">token</span> &amp;&amp; result.<span class="hljs-property">user_id</span>) {
      <span class="hljs-comment">// å·²æœ‰è´¦å·</span>
      <span class="hljs-keyword">if</span> (result.<span class="hljs-property">needsRegistration</span>) {
        <span class="hljs-comment">// æ–°ç”¨æˆ·ï¼Œéœ€è¦å®Œå–„èµ„æ–™</span>
        currentStep.<span class="hljs-property">value</span> = <span class="hljs-string">'gender'</span>;
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-comment">// è€ç”¨æˆ·ï¼Œç›´æ¥æˆåŠŸ</span>
        <span class="hljs-title function_">completeLogin</span>();
      }
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-comment">// éœ€è¦æ‰‹æœºå·æˆæƒ</span>
      needPhoneAuth.<span class="hljs-property">value</span> = <span class="hljs-literal">true</span>;
    }
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'å¾®ä¿¡ç™»å½•å¤±è´¥:'</span>, error);
    toast.<span class="hljs-title function_">error</span>(<span class="hljs-string">'ç™»å½•å¤±è´¥ï¼Œè¯·é‡è¯•'</span>);
  } <span class="hljs-keyword">finally</span> {
    isLoading.<span class="hljs-property">value</span> = <span class="hljs-literal">false</span>;
  }
};

<span class="hljs-comment">/**
 * å¤„ç†æ‰‹æœºå·æˆæƒ
 */</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">handlePhoneNumber</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">event: <span class="hljs-built_in">any</span></span>) =&gt; {
  <span class="hljs-keyword">const</span> { code, errMsg } = event.<span class="hljs-property">detail</span> || {};

  <span class="hljs-keyword">if</span> (!code) {
    <span class="hljs-keyword">if</span> (errMsg?.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'user deny'</span>)) {
      toast.<span class="hljs-title function_">info</span>(<span class="hljs-string">'å·²å–æ¶ˆæ‰‹æœºå·æˆæƒ'</span>);
    }
    <span class="hljs-keyword">return</span>;
  }

  isLoading.<span class="hljs-property">value</span> = <span class="hljs-literal">true</span>;
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> loginCode = <span class="hljs-keyword">await</span> <span class="hljs-title function_">requestWechatLoginCode</span>();
    <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> userStore.<span class="hljs-title function_">phoneLogin</span>({
      code,
      <span class="hljs-attr">login_code</span>: loginCode,
    });

    <span class="hljs-keyword">if</span> (result.<span class="hljs-property">needsRegistration</span>) {
      currentStep.<span class="hljs-property">value</span> = <span class="hljs-string">'gender'</span>;
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-title function_">completeLogin</span>();
    }
  } <span class="hljs-keyword">catch</span> (error) {
    toast.<span class="hljs-title function_">error</span>(<span class="hljs-string">'éªŒè¯æ‰‹æœºå·å¤±è´¥'</span>);
  } <span class="hljs-keyword">finally</span> {
    isLoading.<span class="hljs-property">value</span> = <span class="hljs-literal">false</span>;
  }
};

<span class="hljs-comment">/**
 * é€‰æ‹©æ€§åˆ«
 */</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">selectGender</span> = (<span class="hljs-params">gender: <span class="hljs-built_in">string</span></span>) =&gt; {
  selectedGender.<span class="hljs-property">value</span> = gender;
  <span class="hljs-comment">// å»¶è¿Ÿè·³è½¬ï¼Œè®©ç”¨æˆ·çœ‹åˆ°é€‰æ‹©æ•ˆæœ</span>
  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
    currentStep.<span class="hljs-property">value</span> = <span class="hljs-string">'age'</span>;
  }, <span class="hljs-number">500</span>);
};

<span class="hljs-comment">/**
 * é€‰æ‹©å¹´é¾„
 */</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">selectAge</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">age: <span class="hljs-built_in">string</span></span>) =&gt; {
  selectedAge.<span class="hljs-property">value</span> = age;

  <span class="hljs-comment">// æäº¤èµ„æ–™</span>
  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-keyword">async</span> () =&gt; {
    <span class="hljs-keyword">await</span> <span class="hljs-title function_">submitProfile</span>();
  }, <span class="hljs-number">300</span>);
};

<span class="hljs-comment">/**
 * æäº¤ç”¨æˆ·èµ„æ–™
 */</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">submitProfile</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> genderValue = selectedGender.<span class="hljs-property">value</span> === <span class="hljs-string">'male'</span> ? <span class="hljs-title class_">GenderEnum</span>.<span class="hljs-property">MALE</span> : <span class="hljs-title class_">GenderEnum</span>.<span class="hljs-property">FEMALE</span>;

  <span class="hljs-keyword">const</span> <span class="hljs-attr">ageMapping</span>: <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">number</span>&gt; = {
    <span class="hljs-string">'00å'</span>: <span class="hljs-title class_">AgeGroupEnum</span>.<span class="hljs-property">POST_00</span>,
    <span class="hljs-string">'05å'</span>: <span class="hljs-title class_">AgeGroupEnum</span>.<span class="hljs-property">POST_05</span>,
    <span class="hljs-string">'90å'</span>: <span class="hljs-title class_">AgeGroupEnum</span>.<span class="hljs-property">POST_90</span>,
    <span class="hljs-string">'80å'</span>: <span class="hljs-title class_">AgeGroupEnum</span>.<span class="hljs-property">POST_80</span>,
    <span class="hljs-string">'70å'</span>: <span class="hljs-title class_">AgeGroupEnum</span>.<span class="hljs-property">POST_70</span>,
  };

  <span class="hljs-keyword">await</span> userStore.<span class="hljs-title function_">updateUserInfo</span>(
    {
      <span class="hljs-attr">gender</span>: genderValue,
      <span class="hljs-attr">age_group</span>: ageMapping[selectedAge.<span class="hljs-property">value</span>],
    },
    <span class="hljs-string">'ç™»å½•æˆåŠŸ'</span>,
  );

  <span class="hljs-title function_">completeLogin</span>();
};

<span class="hljs-comment">/**
 * å®Œæˆç™»å½•
 */</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">completeLogin</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-title function_">emit</span>(<span class="hljs-string">'login-success'</span>, userStore.<span class="hljs-property">userInfo</span>);
  <span class="hljs-title function_">handleClose</span>();
};

<span class="hljs-comment">/**
 * å…³é—­å¼¹çª—
 */</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleClose</span> = (<span class="hljs-params"/>) =&gt; {
  isVisible.<span class="hljs-property">value</span> = <span class="hljs-literal">false</span>;
  <span class="hljs-comment">// é‡ç½®çŠ¶æ€</span>
  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
    currentStep.<span class="hljs-property">value</span> = <span class="hljs-string">'login'</span>;
    isAgreed.<span class="hljs-property">value</span> = <span class="hljs-literal">false</span>;
    selectedGender.<span class="hljs-property">value</span> = <span class="hljs-string">''</span>;
    selectedAge.<span class="hljs-property">value</span> = <span class="hljs-string">''</span>;
    needPhoneAuth.<span class="hljs-property">value</span> = <span class="hljs-literal">false</span>;
  }, <span class="hljs-number">300</span>);
};

<span class="hljs-comment">// æš´éœ²æ–¹æ³•ç»™çˆ¶ç»„ä»¶</span>
<span class="hljs-title function_">defineExpose</span>({
  <span class="hljs-attr">startLogin</span>: <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">resetState</span>();
    isVisible.<span class="hljs-property">value</span> = <span class="hljs-literal">true</span>;
  },
  <span class="hljs-attr">startProfileCompletion</span>: <span class="hljs-function">() =&gt;</span> {
    currentStep.<span class="hljs-property">value</span> = <span class="hljs-string">'gender'</span>;
    isVisible.<span class="hljs-property">value</span> = <span class="hljs-literal">true</span>;
  },
});
</code></pre>
<h2 data-id="heading-15">å…­ã€ä¸šåŠ¡é¡µé¢é›†æˆ</h2>
<h3 data-id="heading-16">6.1 è§¦å‘ç™»å½•çš„åœºæ™¯</h3>
<pre><code class="hljs language-txt" lang="txt">æˆ‘ï¼šç™»å½•å¼¹çª—åšå¥½äº†ï¼Œä¸šåŠ¡é¡µé¢æ€ä¹ˆç”¨ï¼Ÿ
</code></pre>
<pre><code class="hljs language-txt" lang="txt">AIï¼šä¸šåŠ¡é¡µé¢åªéœ€è¦è°ƒç”¨ loginModalStore.open()ï¼š
</code></pre>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// åœºæ™¯1ï¼šéœ€è¦ç™»å½•æ‰èƒ½æ“ä½œçš„æŒ‰é’®</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleSendMessage</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">if</span> (!userStore.<span class="hljs-property">isLoggedIn</span>) {
    loginModalStore.<span class="hljs-title function_">open</span>({
      <span class="hljs-attr">onSuccess</span>: <span class="hljs-function">() =&gt;</span> {
        <span class="hljs-comment">// ç™»å½•æˆåŠŸåï¼Œç»§ç»­å‘é€æ¶ˆæ¯</span>
        <span class="hljs-title function_">doSendMessage</span>();
      },
    });
    <span class="hljs-keyword">return</span>;
  }
  <span class="hljs-title function_">doSendMessage</span>();
};

<span class="hljs-comment">// åœºæ™¯2ï¼šå°è£…æˆé€šç”¨çš„ç™»å½•æ£€æŸ¥å‡½æ•°</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">requireLogin</span> = (<span class="hljs-params">callback: () =&gt; <span class="hljs-built_in">void</span></span>) =&gt; {
  <span class="hljs-keyword">if</span> (userStore.<span class="hljs-property">isLoggedIn</span>) {
    <span class="hljs-title function_">callback</span>();
    <span class="hljs-keyword">return</span>;
  }

  loginModalStore.<span class="hljs-title function_">open</span>({
    <span class="hljs-attr">onSuccess</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">callback</span>(),
  });
};

<span class="hljs-comment">// ä½¿ç”¨</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleBuyVip</span> = (<span class="hljs-params"/>) =&gt; {
  requireLogin(<span class="hljs-function">() =&gt;</span> {
    uni.<span class="hljs-title function_">navigateTo</span>({ <span class="hljs-attr">url</span>: <span class="hljs-string">'/pages/vip/index'</span> });
  });
};

<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleCollect</span> = (<span class="hljs-params"/>) =&gt; {
  requireLogin(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">doCollect</span>();
  });
};
</code></pre>
<h3 data-id="heading-17">6.2 æˆ‘è¿½é—®ï¼šèƒ½ä¸èƒ½æ›´ç®€æ´</h3>
<pre><code class="hljs language-txt" lang="txt">æˆ‘ï¼šæ¯æ¬¡éƒ½è¦å†™ if (!isLoggedIn) å¾ˆç¹çï¼Œèƒ½ä¸èƒ½æ›´ç®€æ´ï¼Ÿ
</code></pre>
<pre><code class="hljs language-txt" lang="txt">AIï¼šå¯ä»¥å°è£…æˆ Hookï¼š
</code></pre>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// src/hooks/useRequireLogin.ts</span>
<span class="hljs-keyword">import</span> { useUserStore } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/store/user'</span>;
<span class="hljs-keyword">import</span> { useLoginModalStore } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/store/loginModal'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">useRequireLogin</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> userStore = <span class="hljs-title function_">useUserStore</span>();
  <span class="hljs-keyword">const</span> loginModalStore = <span class="hljs-title function_">useLoginModalStore</span>();

  <span class="hljs-comment">/**
   * éœ€è¦ç™»å½•æ‰èƒ½æ‰§è¡Œçš„æ“ä½œ
   */</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">requireLogin</span> = (<span class="hljs-params">callback: () =&gt; <span class="hljs-built_in">void</span> | <span class="hljs-built_in">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt;</span>) =&gt; {
    <span class="hljs-keyword">if</span> (userStore.<span class="hljs-property">isLoggedIn</span>) {
      <span class="hljs-title function_">callback</span>();
      <span class="hljs-keyword">return</span>;
    }

    loginModalStore.<span class="hljs-title function_">open</span>({
      <span class="hljs-attr">onSuccess</span>: <span class="hljs-keyword">async</span> () =&gt; {
        <span class="hljs-keyword">await</span> <span class="hljs-title function_">callback</span>();
      },
    });
  };

  <span class="hljs-comment">/**
   * åˆ›å»ºéœ€è¦ç™»å½•çš„å¤„ç†å‡½æ•°
   */</span>
  <span class="hljs-keyword">const</span> withLogin = &lt;T <span class="hljs-keyword">extends</span> (...<span class="hljs-attr">args</span>: <span class="hljs-built_in">any</span>[]) =&gt; <span class="hljs-built_in">any</span>&gt;(<span class="hljs-attr">fn</span>: T): <span class="hljs-function"><span class="hljs-params">T</span> =&gt;</span> {
    <span class="hljs-keyword">return</span> (<span class="hljs-function">(<span class="hljs-params">...args: Parameters&lt;T&gt;</span>) =&gt;</span> {
      requireLogin(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">fn</span>(...args));
    }) <span class="hljs-keyword">as</span> T;
  };

  <span class="hljs-keyword">return</span> {
    requireLogin,
    withLogin,
    <span class="hljs-attr">isLoggedIn</span>: <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> userStore.<span class="hljs-property">isLoggedIn</span>),
  };
}
</code></pre>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// é¡µé¢ä¸­ä½¿ç”¨</span>
<span class="hljs-keyword">const</span> { requireLogin, withLogin, isLoggedIn } = <span class="hljs-title function_">useRequireLogin</span>();

<span class="hljs-comment">// æ–¹å¼1ï¼šåŒ…è£…å‡½æ•°</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleSendMessage</span> = (<span class="hljs-params"/>) =&gt; {
  requireLogin(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">doSendMessage</span>();
  });
};

<span class="hljs-comment">// æ–¹å¼2ï¼šç›´æ¥åˆ›å»ºå¸¦ç™»å½•æ£€æŸ¥çš„å‡½æ•°</span>
<span class="hljs-keyword">const</span> handleBuyVip = <span class="hljs-title function_">withLogin</span>(<span class="hljs-function">() =&gt;</span> {
  uni.<span class="hljs-title function_">navigateTo</span>({ <span class="hljs-attr">url</span>: <span class="hljs-string">'/pages/vip/index'</span> });
});

<span class="hljs-keyword">const</span> handleCollect = <span class="hljs-title function_">withLogin</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title function_">doCollect</span>();
});
</code></pre>
<h2 data-id="heading-18">ä¸ƒã€ç™»å½•çŠ¶æ€åˆ¤æ–­ä¼˜åŒ–</h2>
<h3 data-id="heading-19">7.1 é¢„æ£€å¾®ä¿¡ç™»å½•çŠ¶æ€</h3>
<pre><code class="hljs language-txt" lang="txt">æˆ‘ï¼šæ¯æ¬¡æ‰“å¼€ç™»å½•å¼¹çª—éƒ½è¦ç­‰ç”¨æˆ·ç‚¹å‡»ï¼Œ
    èƒ½ä¸èƒ½æå‰çŸ¥é“éœ€ä¸éœ€è¦æ‰‹æœºå·æˆæƒï¼Ÿ
</code></pre>
<pre><code class="hljs language-txt" lang="txt">AIï¼šå¯ä»¥åœ¨æ‰“å¼€å¼¹çª—æ—¶"é¢„æ£€"å¾®ä¿¡ç™»å½•çŠ¶æ€ï¼š
</code></pre>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// LoginModal.vue</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">determineLoginStrategy</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">if</span> (!isMpWeixin) {
    needPhoneAuth.<span class="hljs-property">value</span> = <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">return</span>;
  }

  <span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// é™é»˜è·å– codeï¼Œå°è¯•ç™»å½•</span>
    <span class="hljs-keyword">const</span> loginCode = <span class="hljs-keyword">await</span> <span class="hljs-title function_">requestWechatLoginCode</span>();
    <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">loginByWechat</span>({
      <span class="hljs-attr">code</span>: loginCode,
      <span class="hljs-attr">source</span>: clientSource,
      <span class="hljs-attr">channel</span>: clientChannel,
    });

    <span class="hljs-comment">// å¦‚æœèƒ½ç›´æ¥ç™»å½•ï¼Œä¸éœ€è¦æ‰‹æœºå·</span>
    <span class="hljs-keyword">if</span> (response.<span class="hljs-property">code</span> === <span class="hljs-number">200</span> &amp;&amp; response.<span class="hljs-property">data</span>?.<span class="hljs-property">token</span>) {
      needPhoneAuth.<span class="hljs-property">value</span> = <span class="hljs-literal">false</span>;
    } <span class="hljs-keyword">else</span> {
      needPhoneAuth.<span class="hljs-property">value</span> = <span class="hljs-literal">true</span>;
    }
  } <span class="hljs-keyword">catch</span> (error) {
    needPhoneAuth.<span class="hljs-property">value</span> = <span class="hljs-literal">true</span>;
  }
};

<span class="hljs-comment">// æ‰“å¼€å¼¹çª—æ—¶è°ƒç”¨</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">startLogin</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-title function_">resetState</span>();
  isVisible.<span class="hljs-property">value</span> = <span class="hljs-literal">true</span>;
  <span class="hljs-comment">// é¢„æ£€ç™»å½•çŠ¶æ€</span>
  <span class="hljs-built_in">void</span> <span class="hljs-title function_">determineLoginStrategy</span>();
};
</code></pre>
<pre><code class="hljs language-txt" lang="txt">AIï¼šè¿™æ ·çš„å¥½å¤„ï¼š
1. è€ç”¨æˆ·ï¼šæŒ‰é’®æ˜¾ç¤º"å¾®ä¿¡ç™»å½•"ï¼Œç‚¹å‡»ç›´æ¥æˆåŠŸ
2. æ–°ç”¨æˆ·ï¼šæŒ‰é’®æ˜¾ç¤º"æ‰‹æœºå·å¿«æ·ç™»å½•"ï¼Œéœ€è¦æˆæƒ

ç”¨æˆ·ä½“éªŒæ›´é¡ºç•…ï¼Œä¸ç”¨ç‚¹ä¸¤æ¬¡ã€‚
</code></pre>
<h2 data-id="heading-20">å…«ã€æ ¸å¿ƒç»éªŒï¼šç™»å½•ç³»ç»Ÿè®¾è®¡è¦ç‚¹</h2>
<h3 data-id="heading-21">8.1 æ¶æ„è®¾è®¡åŸåˆ™</h3>

























<table><thead><tr><th>åŸåˆ™</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>çŠ¶æ€é›†ä¸­</td><td>loginModalStore ç»Ÿä¸€ç®¡ç†å¼¹çª—çŠ¶æ€å’Œå›è°ƒ</td></tr><tr><td>ç»„ä»¶åˆ†ç¦»</td><td>LoginModalRoot è´Ÿè´£æ¡¥æ¥ï¼ŒLoginModal è´Ÿè´£ UI é€»è¾‘</td></tr><tr><td>å…¨å±€å¯ç”¨</td><td>æŒ‚è½½åœ¨ Layout å±‚ï¼Œä»»æ„é¡µé¢å¯è§¦å‘</td></tr><tr><td>å›è°ƒæœºåˆ¶</td><td>æ”¯æŒç™»å½•æˆåŠŸåæ‰§è¡Œç‰¹å®šæ“ä½œ</td></tr></tbody></table>
<h3 data-id="heading-22">8.2 æµç¨‹è®¾è®¡è¦ç‚¹</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// âœ… æ¨èï¼šå¤šæ­¥éª¤ç”¨çŠ¶æ€æœº</span>
<span class="hljs-keyword">const</span> currentStep = ref&lt;<span class="hljs-string">'login'</span> | <span class="hljs-string">'gender'</span> | <span class="hljs-string">'age'</span>&gt;(<span class="hljs-string">'login'</span>);

<span class="hljs-comment">// âŒ ä¸æ¨èï¼šå¤šä¸ª boolean æ§åˆ¶</span>
<span class="hljs-keyword">const</span> showLogin = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">true</span>);
<span class="hljs-keyword">const</span> showGender = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">false</span>);
<span class="hljs-keyword">const</span> showAge = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">false</span>);
</code></pre>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// âœ… æ¨èï¼šé¢„æ£€ç™»å½•çŠ¶æ€</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">startLogin</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-built_in">void</span> <span class="hljs-title function_">determineLoginStrategy</span>(); <span class="hljs-comment">// æå‰åˆ¤æ–­éœ€è¦å“ªç§ç™»å½•</span>
};

<span class="hljs-comment">// âŒ ä¸æ¨èï¼šç”¨æˆ·ç‚¹å‡»æ‰åˆ¤æ–­</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleClick</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-comment">// ç‚¹å‡»åæ‰çŸ¥é“éœ€è¦æ‰‹æœºå·ï¼Œä½“éªŒå·®</span>
};
</code></pre>
<h3 data-id="heading-23">8.3 é”™è¯¯å¤„ç†</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// åŒºåˆ†ä¸åŒçš„é”™è¯¯åœºæ™¯</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">showWechatLoginError</span> = (<span class="hljs-params">error: <span class="hljs-built_in">any</span></span>) =&gt; {
  <span class="hljs-keyword">if</span> (error?.<span class="hljs-property">code</span> === -<span class="hljs-number">8</span>) {
    toast.<span class="hljs-title function_">error</span>(<span class="hljs-string">'æœªå®‰è£…å¾®ä¿¡å®¢æˆ·ç«¯'</span>);
    <span class="hljs-keyword">return</span>;
  }
  toast.<span class="hljs-title function_">error</span>(<span class="hljs-string">'ç™»å½•å¤±è´¥ï¼Œè¯·é‡è¯•'</span>);
};

<span class="hljs-comment">// æ‰‹æœºå·æˆæƒå–æ¶ˆ vs å¤±è´¥</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">handlePhoneNumber</span> = (<span class="hljs-params">event: <span class="hljs-built_in">any</span></span>) =&gt; {
  <span class="hljs-keyword">const</span> { code, errMsg } = event.<span class="hljs-property">detail</span>;
  <span class="hljs-keyword">if</span> (!code) {
    <span class="hljs-keyword">if</span> (errMsg?.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'user deny'</span>)) {
      toast.<span class="hljs-title function_">info</span>(<span class="hljs-string">'å·²å–æ¶ˆæˆæƒ'</span>); <span class="hljs-comment">// ç”¨æˆ·ä¸»åŠ¨å–æ¶ˆï¼Œä¸æ˜¯é”™è¯¯</span>
    } <span class="hljs-keyword">else</span> {
      toast.<span class="hljs-title function_">error</span>(<span class="hljs-string">'è·å–æ‰‹æœºå·å¤±è´¥'</span>); <span class="hljs-comment">// çœŸæ­£çš„é”™è¯¯</span>
    }
    <span class="hljs-keyword">return</span>;
  }
};
</code></pre>
<h2 data-id="heading-24">ä¹ã€æ€»ç»“ï¼šç™»å½•ç³»ç»Ÿçš„å®Œæ•´å®ç°</h2>
<h3 data-id="heading-25">9.1 æ–‡ä»¶æ¸…å•</h3>





























<table><thead><tr><th>æ–‡ä»¶</th><th>èŒè´£</th></tr></thead><tbody><tr><td><code>store/loginModal.ts</code></td><td>å¼¹çª—çŠ¶æ€ + å›è°ƒé˜Ÿåˆ—</td></tr><tr><td><code>store/user.ts</code></td><td>ç”¨æˆ·çŠ¶æ€ + ç™»å½•æ–¹æ³•</td></tr><tr><td><code>components/auth/LoginModalRoot.vue</code></td><td>å…¨å±€å¼¹çª—å®¹å™¨</td></tr><tr><td><code>pages/my/components/LoginModal.vue</code></td><td>ç™»å½•å¼¹çª— UI + é€»è¾‘</td></tr><tr><td><code>hooks/useRequireLogin.ts</code></td><td>ç™»å½•æ£€æŸ¥ Hook</td></tr></tbody></table>
<h3 data-id="heading-26">9.2 å…³é”®æ”¶è·</h3>
<ol>
<li><strong>æ¶æ„å…ˆè¡Œ</strong>ï¼šå…ˆè®¾è®¡æ•´ä½“æ¶æ„ï¼Œå†å®ç°ç»†èŠ‚</li>
<li><strong>çŠ¶æ€é›†ä¸­</strong>ï¼šç”¨ Store ç®¡ç†å¼¹çª—çŠ¶æ€å’Œå›è°ƒ</li>
<li><strong>å¤šæ­¥éª¤æµç¨‹</strong>ï¼šç”¨çŠ¶æ€æœºç®¡ç†ï¼Œé¿å…å¤šä¸ª boolean</li>
<li><strong>ä½“éªŒä¼˜åŒ–</strong>ï¼šé¢„æ£€ç™»å½•çŠ¶æ€ï¼Œå‡å°‘ç”¨æˆ·ç­‰å¾…</li>
<li><strong>é”™è¯¯åŒºåˆ†</strong>ï¼šç”¨æˆ·å–æ¶ˆ vs ç³»ç»Ÿé”™è¯¯ï¼Œæç¤ºä¸åŒ</li>
</ol>
<h3 data-id="heading-27">9.3 ä¸‹ä¸€ç¯‡é¢„å‘Š</h3>
<p><strong>ã€Šã€AI ç¼–ç¨‹å®æˆ˜ã€‘ç¬¬ 8 ç¯‡ï¼šç»„ä»¶å°è£…çš„è‰ºæœ¯ - ä»ä¸šåŠ¡ä»£ç åˆ°å¯å¤ç”¨ç»„ä»¶ã€‹</strong></p>
<p>ä¸‹ä¸€ç¯‡å±•ç¤ºå¦‚ä½•è®¾è®¡é€šç”¨ç»„ä»¶ï¼š</p>
<ul>
<li>ä»ä¸šåŠ¡ä»£ç ä¸­æå–ç»„ä»¶</li>
<li>Props å’Œ Events è®¾è®¡</li>
<li>ç»„ä»¶çš„æ‰©å±•æ€§å’Œçµæ´»æ€§</li>
</ul>
<hr/>
<blockquote>
<p>ç™»å½•ç³»ç»Ÿä¸åªæ˜¯"è°ƒç”¨æ¥å£"ï¼Œè€Œæ˜¯<strong>ç”¨æˆ·ä½“éªŒã€çŠ¶æ€ç®¡ç†ã€é”™è¯¯å¤„ç†</strong>çš„ç»¼åˆè€ƒéªŒã€‚
é€šè¿‡å’Œ AI å¯¹è¯ï¼Œé€æ­¥ç†æ¸…æ¯ä¸ªç¯èŠ‚ï¼Œæœ€ç»ˆå½¢æˆå®Œæ•´çš„è§£å†³æ–¹æ¡ˆã€‚</p>
<p>å¦‚æœè¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç‚¹èµã€æ”¶è—ã€è½¬å‘ï¼</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ·±å…¥ç†è§£Vueæ•°æ®æµï¼šå•å‘ä¸åŒå‘çš„å“²å­¦åšå¼ˆ]]></title>    <link>https://juejin.cn/post/7594282984326397961</link>    <guid>https://juejin.cn/post/7594282984326397961</guid>    <pubDate>2026-01-12T13:16:11.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594282984326397961" data-draft-id="7594303751965622318" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ·±å…¥ç†è§£Vueæ•°æ®æµï¼šå•å‘ä¸åŒå‘çš„å“²å­¦åšå¼ˆ"/> <meta itemprop="keywords" content="Vue.js"/> <meta itemprop="datePublished" content="2026-01-12T13:16:11.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åŒ—è¾°alk"/> <meta itemprop="url" content="https://juejin.cn/user/1772855673241352"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ·±å…¥ç†è§£Vueæ•°æ®æµï¼šå•å‘ä¸åŒå‘çš„å“²å­¦åšå¼ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1772855673241352/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åŒ—è¾°alk
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-12T13:16:11.000Z" title="Mon Jan 12 2026 13:16:11 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€ï¼šæ•°æ®æµä¸ºä½•å¦‚æ­¤é‡è¦ï¼Ÿ</h2>
<p>åœ¨Vueçš„ä¸–ç•Œé‡Œï¼Œæ•°æ®æµå°±åƒåŸå¸‚çš„äº¤é€šç³»ç»Ÿâ€”â€”åˆç†çš„æµå‘è®¾è®¡èƒ½è®©åº”ç”¨è¿è¡Œå¦‚è¡Œäº‘æµæ°´ï¼Œè€Œæ··ä¹±çš„æ•°æ®æµå‘åˆ™å¯èƒ½å¯¼è‡´"äº¤é€šæ‹¥å µ"ç”šè‡³"ç³»ç»Ÿå´©æºƒ"ã€‚ä»Šå¤©ï¼Œæˆ‘ä»¬å°±æ¥æ·±å…¥æ¢è®¨Vueä¸­ä¸¤ç§æ ¸å¿ƒæ•°æ®æµæ¨¡å¼ï¼š<strong>å•å‘æ•°æ®æµ</strong>ä¸<strong>åŒå‘æ•°æ®æµ</strong>çš„åšå¼ˆä¸èåˆã€‚</p>
<h2 data-id="heading-1">ä¸€ã€æ•°æ®æµçš„æœ¬è´¨ï¼šç†è§£ä¸¤ç§æ¨¡å¼</h2>
<h3 data-id="heading-2">1.1 ä»€ä¹ˆæ˜¯æ•°æ®æµï¼Ÿ</h3>
<p>åœ¨Vueä¸­ï¼Œ<strong>æ•°æ®æµ</strong>æŒ‡çš„æ˜¯æ•°æ®åœ¨åº”ç”¨å„å±‚çº§ç»„ä»¶é—´çš„ä¼ é€’æ–¹å‘å’Œæ–¹å¼ã€‚æƒ³è±¡ä¸€ä¸‹æ°´æµï¼Œæœ‰çš„æ²³æµåªèƒ½å•å‘æµæ·Œï¼ˆå•å‘æ•°æ®æµï¼‰ï¼Œè€Œæœ‰çš„åˆ™åƒæ½®æ±å¯ä»¥æ¥å›æµåŠ¨ï¼ˆåŒå‘æ•°æ®æµï¼‰ã€‚</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TB
    A[æ•°æ®æµæ¦‚å¿µ] --&gt; B[å•å‘æ•°æ®æµ]
    A --&gt; C[åŒå‘æ•°æ®æµ]
    
    B --&gt; D[æ•°æ®æº -&gt; è§†å›¾]
    D --&gt; E[Propså‘ä¸‹ä¼ é€’]
    E --&gt; F[äº‹ä»¶å‘ä¸Šé€šçŸ¥]
    
    C --&gt; G[æ•°æ®æº &lt;-&gt; è§†å›¾]
    G --&gt; H[è‡ªåŠ¨åŒå‘åŒæ­¥]
    H --&gt; I[ç®€åŒ–è¡¨å•å¤„ç†]
    
    subgraph J [æ ¸å¿ƒåŒºåˆ«]
        B
        C
    end
</code></pre>
<h3 data-id="heading-3">1.2 å•å‘æ•°æ®æµï¼šVueçš„é»˜è®¤å“²å­¦</h3>
<p>Vueé»˜è®¤é‡‡ç”¨<strong>å•å‘æ•°æ®æµ</strong>ä½œä¸ºå…¶æ ¸å¿ƒè®¾è®¡ç†å¿µã€‚è¿™æ„å‘³ç€æ•°æ®åªèƒ½ä»ä¸€ä¸ªæ–¹å‘ä¼ é€’ï¼šä»çˆ¶ç»„ä»¶æµå‘å­ç»„ä»¶ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ParentComponent.vue</span>
&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- å•å‘æ•°æ®æµï¼šçˆ¶ä¼ å­ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">ChildComponent</span> <span class="hljs-attr">:message</span>=<span class="hljs-string">"parentMessage"</span> @<span class="hljs-attr">update</span>=<span class="hljs-string">"handleUpdate"</span> /&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
&lt;/template&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-title function_">data</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">parentMessage</span>: <span class="hljs-string">'Hello from Parent'</span>
    }
  },
  <span class="hljs-attr">methods</span>: {
    <span class="hljs-title function_">handleUpdate</span>(<span class="hljs-params">newMessage</span>) {
      <span class="hljs-comment">// å­ç»„ä»¶é€šè¿‡äº‹ä»¶é€šçŸ¥çˆ¶ç»„ä»¶æ›´æ–°</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">parentMessage</span> = newMessage
    }
  }
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>

<span class="hljs-comment">// ChildComponent.vue</span>
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>æ¥æ”¶åˆ°çš„æ¶ˆæ¯: {{ message }}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"updateMessage"</span>&gt;</span>æ›´æ–°æ¶ˆæ¯<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span>

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-attr">props</span>: {
    <span class="hljs-attr">message</span>: <span class="hljs-title class_">String</span>  <span class="hljs-comment">// åªè¯»å±æ€§ï¼Œä¸èƒ½ç›´æ¥ä¿®æ”¹</span>
  },
  <span class="hljs-attr">methods</span>: {
    <span class="hljs-title function_">updateMessage</span>(<span class="hljs-params"/>) {
      <span class="hljs-comment">// é”™è¯¯åšæ³•ï¼šç›´æ¥ä¿®æ”¹prop âŒ</span>
      <span class="hljs-comment">// this.message = 'New Message'</span>
      
      <span class="hljs-comment">// æ­£ç¡®åšæ³•ï¼šé€šè¿‡äº‹ä»¶é€šçŸ¥çˆ¶ç»„ä»¶ âœ…</span>
      <span class="hljs-variable language_">this</span>.$emit(<span class="hljs-string">'update'</span>, <span class="hljs-string">'New Message from Child'</span>)
    }
  }
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
</code></pre>
<h3 data-id="heading-4">1.3 åŒå‘æ•°æ®æµï¼šVueçš„ç‰¹æ®Šç¤¼ç‰©</h3>
<p>è™½ç„¶Vueé»˜è®¤æ˜¯å•å‘æ•°æ®æµï¼Œä½†å®ƒæä¾›äº†<strong>v-model</strong>æŒ‡ä»¤æ¥å®ç°ç‰¹å®šåœºæ™¯ä¸‹çš„åŒå‘æ•°æ®ç»‘å®šã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åŒå‘ç»‘å®šç¤ºä¾‹</span>
&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- è¯­æ³•ç³–ï¼šv-model = :value + @input --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">CustomInput</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"userInput"</span> /&gt;</span>
    
    <span class="hljs-comment">&lt;!-- ç­‰ä»·äº --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">CustomInput</span> 
      <span class="hljs-attr">:value</span>=<span class="hljs-string">"userInput"</span> 
      @<span class="hljs-attr">input</span>=<span class="hljs-string">"userInput = $event"</span> 
    /&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
&lt;/template&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-title function_">data</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">userInput</span>: <span class="hljs-string">''</span>
    }
  }
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
</code></pre>
<h2 data-id="heading-5">äºŒã€å•å‘æ•°æ®æµï¼šä¸ºä»€ä¹ˆå®ƒæ˜¯é»˜è®¤é€‰æ‹©ï¼Ÿ</h2>
<h3 data-id="heading-6">2.1 å•å‘æ•°æ®æµçš„ä¼˜åŠ¿</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart TD
    A[å•å‘æ•°æ®æµä¼˜åŠ¿] --&gt; B[æ•°æ®æµå‘å¯é¢„æµ‹]
    A --&gt; C[è°ƒè¯•è¿½è¸ªç®€å•]
    A --&gt; D[ç»„ä»¶ç‹¬ç«‹æ€§é«˜]
    A --&gt; E[çŠ¶æ€ç®¡ç†æ¸…æ™°]
    
    B --&gt; F[æ›´å®¹æ˜“ç†è§£åº”ç”¨çŠ¶æ€]
    C --&gt; G[é€šè¿‡äº‹ä»¶è¿½æº¯æ•°æ®å˜æ›´]
    D --&gt; H[ç»„ä»¶å¯å¤ç”¨æ€§å¼º]
    E --&gt; I[å•ä¸€æ•°æ®æºåŸåˆ™]
    
    F --&gt; J[é™ä½ç»´æŠ¤æˆæœ¬]
    G --&gt; J
    H --&gt; J
    I --&gt; J
</code></pre>
<h3 data-id="heading-7">2.2 å®é™…é¡¹ç›®ä¸­çš„å•å‘æ•°æ®æµåº”ç”¨</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å¤§å‹é¡¹ç›®ä¸­çš„å•å‘æ•°æ®æµæ¶æ„ç¤ºä¾‹</span>
<span class="hljs-comment">// store.js - VuexçŠ¶æ€ç®¡ç†ï¼ˆå•å‘æ•°æ®æµå…¸èŒƒï¼‰</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Vue</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Vuex</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'vuex'</span>

<span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">use</span>(<span class="hljs-title class_">Vuex</span>)

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vuex</span>.<span class="hljs-title class_">Store</span>({
  <span class="hljs-attr">state</span>: {
    <span class="hljs-attr">user</span>: <span class="hljs-literal">null</span>,
    <span class="hljs-attr">products</span>: []
  },
  <span class="hljs-attr">mutations</span>: {
    <span class="hljs-comment">// å”¯ä¸€ä¿®æ”¹stateçš„æ–¹å¼ï¼ˆå•å‘ï¼‰</span>
    <span class="hljs-title function_">SET_USER</span>(<span class="hljs-params">state, user</span>) {
      state.<span class="hljs-property">user</span> = user
    },
    <span class="hljs-title function_">ADD_PRODUCT</span>(<span class="hljs-params">state, product</span>) {
      state.<span class="hljs-property">products</span>.<span class="hljs-title function_">push</span>(product)
    }
  },
  <span class="hljs-attr">actions</span>: {
    <span class="hljs-comment">// å¼‚æ­¥æ“ä½œï¼Œæäº¤mutation</span>
    <span class="hljs-keyword">async</span> <span class="hljs-title function_">login</span>(<span class="hljs-params">{ commit }, credentials</span>) {
      <span class="hljs-keyword">const</span> user = <span class="hljs-keyword">await</span> api.<span class="hljs-title function_">login</span>(credentials)
      <span class="hljs-title function_">commit</span>(<span class="hljs-string">'SET_USER'</span>, user)  <span class="hljs-comment">// å•å‘æ•°æ®æµï¼šaction -&gt; mutation -&gt; state</span>
    }
  },
  <span class="hljs-attr">getters</span>: {
    <span class="hljs-comment">// è®¡ç®—å±æ€§ï¼Œåªè¯»</span>
    <span class="hljs-attr">isAuthenticated</span>: <span class="hljs-function"><span class="hljs-params">state</span> =&gt;</span> !!state.<span class="hljs-property">user</span>
  }
})

<span class="hljs-comment">// UserProfile.vue - ä½¿ç”¨å•å‘æ•°æ®æµ</span>
&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- å•å‘æ•°æ®æµï¼šstore -&gt; ç»„ä»¶ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>{{ userName }}<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">UserForm</span> @<span class="hljs-attr">submit</span>=<span class="hljs-string">"updateUser"</span> /&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
&lt;/template&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { mapState, mapActions } <span class="hljs-keyword">from</span> <span class="hljs-string">'vuex'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-attr">computed</span>: {
    <span class="hljs-comment">// å•å‘ï¼šä»storeè¯»å–æ•°æ®</span>
    ...<span class="hljs-title function_">mapState</span>({
      <span class="hljs-attr">userName</span>: <span class="hljs-function"><span class="hljs-params">state</span> =&gt;</span> state.<span class="hljs-property">user</span>?.<span class="hljs-property">name</span>
    })
  },
  <span class="hljs-attr">methods</span>: {
    <span class="hljs-comment">// å•å‘ï¼šé€šè¿‡actionä¿®æ”¹æ•°æ®</span>
    ...<span class="hljs-title function_">mapActions</span>([<span class="hljs-string">'updateUserInfo'</span>]),
    
    <span class="hljs-keyword">async</span> <span class="hljs-title function_">updateUser</span>(<span class="hljs-params">userData</span>) {
      <span class="hljs-comment">// äº‹ä»¶é©±åŠ¨ï¼šè¡¨å•æäº¤è§¦å‘action</span>
      <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">updateUserInfo</span>(userData)
      <span class="hljs-comment">// æ•°æ®æµï¼šç»„ä»¶ -&gt; action -&gt; mutation -&gt; state -&gt; ç»„ä»¶</span>
    }
  }
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
</code></pre>
<h3 data-id="heading-8">2.3 å•å‘æ•°æ®æµçš„æœ€ä½³å®è·µ</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// 1. ä¸¥æ ¼çš„PropéªŒè¯</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-attr">props</span>: {
    <span class="hljs-comment">// ç±»å‹æ£€æŸ¥</span>
    <span class="hljs-attr">title</span>: {
      <span class="hljs-attr">type</span>: <span class="hljs-title class_">String</span>,
      <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">validator</span>: <span class="hljs-function"><span class="hljs-params">value</span> =&gt;</span> value.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>
    },
    <span class="hljs-comment">// é»˜è®¤å€¼</span>
    <span class="hljs-attr">count</span>: {
      <span class="hljs-attr">type</span>: <span class="hljs-title class_">Number</span>,
      <span class="hljs-attr">default</span>: <span class="hljs-number">0</span>
    },
    <span class="hljs-comment">// å¤æ‚å¯¹è±¡</span>
    <span class="hljs-attr">config</span>: {
      <span class="hljs-attr">type</span>: <span class="hljs-title class_">Object</span>,
      <span class="hljs-attr">default</span>: <span class="hljs-function">() =&gt;</span> ({})  <span class="hljs-comment">// å·¥å‚å‡½æ•°é¿å…å¼•ç”¨å…±äº«</span>
    }
  }
}

<span class="hljs-comment">// 2. è‡ªå®šä¹‰äº‹ä»¶è§„èŒƒ</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-attr">methods</span>: {
    <span class="hljs-title function_">handleInput</span>(<span class="hljs-params">value</span>) {
      <span class="hljs-comment">// äº‹ä»¶åä½¿ç”¨kebab-case</span>
      <span class="hljs-variable language_">this</span>.$emit(<span class="hljs-string">'user-input'</span>, value)
      
      <span class="hljs-comment">// æä¾›è¯¦ç»†çš„äº‹ä»¶å¯¹è±¡</span>
      <span class="hljs-variable language_">this</span>.$emit(<span class="hljs-string">'input-change'</span>, {
        value,
        <span class="hljs-attr">timestamp</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>(),
        <span class="hljs-attr">component</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">$options</span>.<span class="hljs-property">name</span>
      })
    }
  }
}

<span class="hljs-comment">// 3. ä½¿ç”¨.syncä¿®é¥°ç¬¦ï¼ˆVue 2.xï¼‰</span>
<span class="hljs-comment">// çˆ¶ç»„ä»¶</span>
&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ChildComponent</span> <span class="hljs-attr">:title.sync</span>=<span class="hljs-string">"pageTitle"</span> /&gt;</span></span>
&lt;/template&gt;

<span class="hljs-comment">// å­ç»„ä»¶</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-attr">props</span>: [<span class="hljs-string">'title'</span>],
  <span class="hljs-attr">methods</span>: {
    <span class="hljs-title function_">updateTitle</span>(<span class="hljs-params"/>) {
      <span class="hljs-comment">// è‡ªåŠ¨æ›´æ–°çˆ¶ç»„ä»¶æ•°æ®</span>
      <span class="hljs-variable language_">this</span>.$emit(<span class="hljs-string">'update:title'</span>, <span class="hljs-string">'New Title'</span>)
    }
  }
}
</code></pre>
<h2 data-id="heading-9">ä¸‰ã€åŒå‘æ•°æ®æµï¼šv-modelçš„é­”æ³•</h2>
<h3 data-id="heading-10">3.1 v-modelçš„å·¥ä½œåŸç†</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// v-modelçš„å†…éƒ¨å®ç°åŸç†</span>
&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- v-modelçš„æœ¬è´¨ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> 
      <span class="hljs-attr">:value</span>=<span class="hljs-string">"message"</span> 
      @<span class="hljs-attr">input</span>=<span class="hljs-string">"message = $event.target.value"</span>
    /&gt;</span>
    
    <span class="hljs-comment">&lt;!-- è‡ªå®šä¹‰ç»„ä»¶çš„v-model --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">CustomInput</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"message"</span> /&gt;</span>
    
    <span class="hljs-comment">&lt;!-- Vue 2.xï¼šç­‰ä»·äº --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">CustomInput</span> 
      <span class="hljs-attr">:value</span>=<span class="hljs-string">"message"</span> 
      @<span class="hljs-attr">input</span>=<span class="hljs-string">"message = $event"</span> 
    /&gt;</span>
    
    <span class="hljs-comment">&lt;!-- Vue 3.xï¼šç­‰ä»·äº --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">CustomInput</span> 
      <span class="hljs-attr">:modelValue</span>=<span class="hljs-string">"message"</span> 
      @<span class="hljs-attr">update:modelValue</span>=<span class="hljs-string">"message = $event"</span> 
    /&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
&lt;/template&gt;
</code></pre>
<h3 data-id="heading-11">3.2 å®ç°è‡ªå®šä¹‰ç»„ä»¶çš„v-model</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// CustomInput.vue - Vue 2.xå®ç°</span>
&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"custom-input"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> 
      <span class="hljs-attr">:value</span>=<span class="hljs-string">"value"</span> 
      @<span class="hljs-attr">input</span>=<span class="hljs-string">"$emit('input', $event.target.value)"</span>
      @<span class="hljs-attr">blur</span>=<span class="hljs-string">"$emit('blur')"</span>
    /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">"error"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"error"</span>&gt;</span>{{ error }}<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
&lt;/template&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-comment">// æ¥æ”¶valueï¼Œè§¦å‘inputäº‹ä»¶</span>
  <span class="hljs-attr">props</span>: [<span class="hljs-string">'value'</span>, <span class="hljs-string">'error'</span>],
  <span class="hljs-attr">model</span>: {
    <span class="hljs-attr">prop</span>: <span class="hljs-string">'value'</span>,
    <span class="hljs-attr">event</span>: <span class="hljs-string">'input'</span>
  }
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>

<span class="hljs-comment">// CustomInput.vue - Vue 3.xå®ç°</span>
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"custom-input"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> 
      <span class="hljs-attr">:value</span>=<span class="hljs-string">"modelValue"</span> 
      @<span class="hljs-attr">input</span>=<span class="hljs-string">"$emit('update:modelValue', $event.target.value)"</span>
    /&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span>

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-comment">// Vue 3é»˜è®¤ä½¿ç”¨modelValueå’Œupdate:modelValue</span>
  <span class="hljs-attr">props</span>: [<span class="hljs-string">'modelValue'</span>],
  <span class="hljs-attr">emits</span>: [<span class="hljs-string">'update:modelValue'</span>]
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
</code></pre>
<h3 data-id="heading-12">3.3 å¤šv-modelç»‘å®šï¼ˆVue 3ç‰¹æ€§ï¼‰</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ParentComponent.vue</span>
&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">UserForm</span>
    <span class="hljs-attr">v-model:name</span>=<span class="hljs-string">"user.name"</span>
    <span class="hljs-attr">v-model:email</span>=<span class="hljs-string">"user.email"</span>
    <span class="hljs-attr">v-model:age</span>=<span class="hljs-string">"user.age"</span>
  /&gt;</span></span>
&lt;/template&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-title function_">data</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">user</span>: {
        <span class="hljs-attr">name</span>: <span class="hljs-string">''</span>,
        <span class="hljs-attr">email</span>: <span class="hljs-string">''</span>,
        <span class="hljs-attr">age</span>: <span class="hljs-number">18</span>
      }
    }
  }
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>

<span class="hljs-comment">// UserForm.vue</span>
&lt;template&gt;
  &lt;form&gt;
    &lt;input :value="name" @input="$emit('update:name', $event.target.value)"&gt;
    &lt;input :value="email" @input="$emit('update:email', $event.target.value)"&gt;
    &lt;input 
      type="number" 
      :value="age" 
      @input="$emit('update:age', parseInt($event.target.value))"
    &gt;
  &lt;/form&gt;
&lt;/template&gt;

&lt;script&gt;
export default {
  props: ['name', 'email', 'age'],
  emits: ['update:name', 'update:email', 'update:age']
}
&lt;/script&gt;
</code></pre>
<h2 data-id="heading-13">å››ã€ä¸¤ç§æ•°æ®æµçš„å¯¹æ¯”ä¸é€‰æ‹©</h2>
<h3 data-id="heading-14">4.1 è¯¦ç»†å¯¹æ¯”è¡¨</h3>


















































<table><thead><tr><th>ç‰¹æ€§</th><th>å•å‘æ•°æ®æµ</th><th>åŒå‘æ•°æ®æµ</th></tr></thead><tbody><tr><td><strong>æ•°æ®æµå‘</strong></td><td>å•å‘ï¼šçˆ¶ â†’ å­</td><td>åŒå‘ï¼šçˆ¶ â†” å­</td></tr><tr><td><strong>ä¿®æ”¹æ–¹å¼</strong></td><td>Propsåªè¯»ï¼Œäº‹ä»¶é€šçŸ¥</td><td>è‡ªåŠ¨åŒæ­¥ä¿®æ”¹</td></tr><tr><td><strong>ä»£ç é‡</strong></td><td>è¾ƒå¤šï¼ˆéœ€è¦æ˜¾å¼äº‹ä»¶ï¼‰</td><td>è¾ƒå°‘ï¼ˆv-modelç®€åŒ–ï¼‰</td></tr><tr><td><strong>å¯é¢„æµ‹æ€§</strong></td><td>é«˜ï¼Œæ˜“äºè¿½è¸ª</td><td>è¾ƒä½ï¼Œéšå¼æ›´æ–°</td></tr><tr><td><strong>è°ƒè¯•éš¾åº¦</strong></td><td>å®¹æ˜“ï¼Œé€šè¿‡äº‹ä»¶è¿½æº¯</td><td>è¾ƒéš¾ï¼Œæ›´æ–°å¯èƒ½éšå¼å‘ç”Ÿ</td></tr><tr><td><strong>é€‚ç”¨åœºæ™¯</strong></td><td>å¤§å¤šæ•°ç»„ä»¶é€šä¿¡</td><td>è¡¨å•è¾“å…¥ç»„ä»¶</td></tr><tr><td><strong>æ€§èƒ½å½±å“</strong></td><td>æœ€å°ï¼Œç²¾ç¡®æ§åˆ¶æ›´æ–°</td><td>å¯èƒ½æ›´å¤šé‡æ–°æ¸²æŸ“</td></tr><tr><td><strong>æµ‹è¯•éš¾åº¦</strong></td><td>å®¹æ˜“ï¼Œè¾“å…¥è¾“å‡ºæ˜ç¡®</td><td>éœ€è¦æ¨¡æ‹ŸåŒå‘ç»‘å®š</td></tr></tbody></table>
<h3 data-id="heading-15">4.2 ä½•æ—¶ä½¿ç”¨å“ªç§æ¨¡å¼ï¼Ÿ</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart TD
    A[é€‰æ‹©æ•°æ®æµæ¨¡å¼] --&gt; B{ç»„ä»¶ç±»å‹}
    
    B --&gt; C[å±•ç¤ºå‹ç»„ä»¶]
    B --&gt; D[è¡¨å•å‹ç»„ä»¶]
    B --&gt; E[å¤æ‚ä¸šåŠ¡ç»„ä»¶]
    
    C --&gt; F[ä½¿ç”¨å•å‘æ•°æ®æµ]
    D --&gt; G[ä½¿ç”¨åŒå‘æ•°æ®æµ]
    E --&gt; H[æ··åˆä½¿ç”¨]
    
    F --&gt; I[Props + Events&lt;br&gt;ä¿è¯æ•°æ®çº¯å‡€æ€§]
    G --&gt; J[v-model&lt;br&gt;ç®€åŒ–è¡¨å•å¤„ç†]
    H --&gt; K[å•å‘ä¸ºä¸»&lt;br&gt;åŒå‘ä¸ºè¾…]
    
    I --&gt; L[ç¤ºä¾‹&lt;br&gt;ProductList, UserCard]
    J --&gt; M[ç¤ºä¾‹&lt;br&gt;CustomInput, DatePicker]
    K --&gt; N[ç¤ºä¾‹&lt;br&gt;å¤æ‚è¡¨å•, ç¼–è¾‘å™¨ç»„ä»¶]
</code></pre>
<h3 data-id="heading-16">4.3 æ··åˆä½¿ç”¨å®è·µ</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ··åˆä½¿ç”¨ç¤ºä¾‹ï¼šæ™ºèƒ½è¡¨å•ç»„ä»¶</span>
&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"smart-form"</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- å•å‘æ•°æ®æµï¼šæ˜¾ç¤ºéªŒè¯çŠ¶æ€ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">ValidationStatus</span> <span class="hljs-attr">:errors</span>=<span class="hljs-string">"errors"</span> /&gt;</span>
    
    <span class="hljs-comment">&lt;!-- åŒå‘æ•°æ®æµï¼šè¡¨å•è¾“å…¥ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">SmartInput</span> 
      <span class="hljs-attr">v-model</span>=<span class="hljs-string">"formData.username"</span>
      <span class="hljs-attr">:rules</span>=<span class="hljs-string">"usernameRules"</span>
      @<span class="hljs-attr">validate</span>=<span class="hljs-string">"updateValidation"</span>
    /&gt;</span>
    
    <span class="hljs-comment">&lt;!-- å•å‘æ•°æ®æµï¼šæäº¤æ§åˆ¶ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">SubmitButton</span> 
      <span class="hljs-attr">:disabled</span>=<span class="hljs-string">"!isValid"</span> 
      @<span class="hljs-attr">submit</span>=<span class="hljs-string">"handleSubmit"</span>
    /&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
&lt;/template&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-title function_">data</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">formData</span>: {
        <span class="hljs-attr">username</span>: <span class="hljs-string">''</span>,
        <span class="hljs-attr">email</span>: <span class="hljs-string">''</span>
      },
      <span class="hljs-attr">errors</span>: {},
      <span class="hljs-attr">isValid</span>: <span class="hljs-literal">false</span>
    }
  },
  <span class="hljs-attr">methods</span>: {
    <span class="hljs-title function_">updateValidation</span>(<span class="hljs-params">field, isValid</span>) {
      <span class="hljs-comment">// å•å‘ï¼šæ›´æ–°éªŒè¯çŠ¶æ€</span>
      <span class="hljs-keyword">if</span> (isValid) {
        <span class="hljs-keyword">delete</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">errors</span>[field]
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">errors</span>[field] = <span class="hljs-string">`<span class="hljs-subst">${field}</span>éªŒè¯å¤±è´¥`</span>
      }
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">isValid</span> = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">errors</span>).<span class="hljs-property">length</span> === <span class="hljs-number">0</span>
    },
    
    <span class="hljs-title function_">handleSubmit</span>(<span class="hljs-params"/>) {
      <span class="hljs-comment">// å•å‘ï¼šæäº¤æ•°æ®</span>
      <span class="hljs-variable language_">this</span>.$emit(<span class="hljs-string">'form-submit'</span>, {
        <span class="hljs-attr">data</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">formData</span>,
        <span class="hljs-attr">isValid</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">isValid</span>
      })
    }
  }
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
</code></pre>
<h2 data-id="heading-17">äº”ã€Vue 3ä¸­çš„æ–°å˜åŒ–</h2>
<h3 data-id="heading-18">5.1 Composition APIä¸æ•°æ®æµ</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä½¿ç”¨Composition APIå¤„ç†æ•°æ®æµ</span>
&lt;script setup&gt;
<span class="hljs-comment">// Vue 3çš„&lt;script setup&gt;è¯­æ³•</span>
<span class="hljs-keyword">import</span> { ref, computed, defineProps, defineEmits } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>

<span class="hljs-comment">// å®šä¹‰propsï¼ˆå•å‘æ•°æ®æµå…¥å£ï¼‰</span>
<span class="hljs-keyword">const</span> props = <span class="hljs-title function_">defineProps</span>({
  <span class="hljs-attr">initialValue</span>: {
    <span class="hljs-attr">type</span>: <span class="hljs-title class_">String</span>,
    <span class="hljs-attr">default</span>: <span class="hljs-string">''</span>
  }
})

<span class="hljs-comment">// å®šä¹‰emitsï¼ˆå•å‘æ•°æ®æµå‡ºå£ï¼‰</span>
<span class="hljs-keyword">const</span> emit = <span class="hljs-title function_">defineEmits</span>([<span class="hljs-string">'update:value'</span>, <span class="hljs-string">'change'</span>])

<span class="hljs-comment">// å“åº”å¼æ•°æ®</span>
<span class="hljs-keyword">const</span> internalValue = <span class="hljs-title function_">ref</span>(props.<span class="hljs-property">initialValue</span>)

<span class="hljs-comment">// è®¡ç®—å±æ€§ï¼ˆå•å‘æ•°æ®æµå¤„ç†ï¼‰</span>
<span class="hljs-keyword">const</span> formattedValue = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">return</span> internalValue.<span class="hljs-property">value</span>.<span class="hljs-title function_">toUpperCase</span>()
})

<span class="hljs-comment">// åŒå‘ç»‘å®šå¤„ç†</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">handleInput</span>(<span class="hljs-params">event</span>) {
  internalValue.<span class="hljs-property">value</span> = event.<span class="hljs-property">target</span>.<span class="hljs-property">value</span>
  <span class="hljs-comment">// å•å‘ï¼šé€šçŸ¥çˆ¶ç»„ä»¶</span>
  <span class="hljs-title function_">emit</span>(<span class="hljs-string">'update:value'</span>, internalValue.<span class="hljs-property">value</span>)
  <span class="hljs-title function_">emit</span>(<span class="hljs-string">'change'</span>, {
    <span class="hljs-attr">value</span>: internalValue.<span class="hljs-property">value</span>,
    <span class="hljs-attr">formatted</span>: formattedValue.<span class="hljs-property">value</span>
  })
}
&lt;/script&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> 
      <span class="hljs-attr">:value</span>=<span class="hljs-string">"internalValue"</span> 
      @<span class="hljs-attr">input</span>=<span class="hljs-string">"handleInput"</span>
    /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>æ ¼å¼åŒ–å€¼: {{ formattedValue }}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span>
</code></pre>
<h3 data-id="heading-19">5.2 Teleportå’ŒçŠ¶æ€æå‡</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä½¿ç”¨Teleportå’ŒçŠ¶æ€æå‡ç®¡ç†æ•°æ®æµ</span>
&lt;template&gt;
  &lt;!-- çŠ¶æ€æå‡åˆ°æœ€å¤–å±‚ --&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- æ¨¡æ€æ¡†å†…å®¹ä¼ é€åˆ°bodyï¼Œä½†æ•°æ®æµä»å¯æ§ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">teleport</span> <span class="hljs-attr">to</span>=<span class="hljs-string">"body"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Modal</span> 
        <span class="hljs-attr">:is-open</span>=<span class="hljs-string">"modalOpen"</span>
        <span class="hljs-attr">:content</span>=<span class="hljs-string">"modalContent"</span>
        @<span class="hljs-attr">close</span>=<span class="hljs-string">"modalOpen = false"</span>
      /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">teleport</span>&gt;</span>
    
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"openModal('user')"</span>&gt;</span>æ‰“å¼€ç”¨æˆ·æ¨¡æ€æ¡†<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"openModal('settings')"</span>&gt;</span>æ‰“å¼€è®¾ç½®æ¨¡æ€æ¡†<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
&lt;/template&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { ref } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>

<span class="hljs-comment">// çŠ¶æ€æå‡ï¼šåœ¨å…±åŒç¥–å…ˆä¸­ç®¡ç†çŠ¶æ€</span>
<span class="hljs-keyword">const</span> modalOpen = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">false</span>)
<span class="hljs-keyword">const</span> modalContent = <span class="hljs-title function_">ref</span>(<span class="hljs-string">''</span>)

<span class="hljs-keyword">function</span> <span class="hljs-title function_">openModal</span>(<span class="hljs-params">type</span>) {
  <span class="hljs-comment">// å•å‘æ•°æ®æµï¼šé€šè¿‡æ–¹æ³•æ›´æ–°çŠ¶æ€</span>
  modalContent.<span class="hljs-property">value</span> = type === <span class="hljs-string">'user'</span> ? <span class="hljs-string">'ç”¨æˆ·ä¿¡æ¯'</span> : <span class="hljs-string">'è®¾ç½®é€‰é¡¹'</span>
  modalOpen.<span class="hljs-property">value</span> = <span class="hljs-literal">true</span>
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
</code></pre>
<h2 data-id="heading-20">å…­ã€æœ€ä½³å®è·µä¸å¸¸è§é™·é˜±</h2>
<h3 data-id="heading-21">6.1 å¿…é¡»é¿å…çš„é™·é˜±</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// é™·é˜±1ï¼šç›´æ¥ä¿®æ”¹Propï¼ˆåæ¨¡å¼ï¼‰</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-attr">props</span>: [<span class="hljs-string">'list'</span>],
  <span class="hljs-attr">methods</span>: {
    <span class="hljs-title function_">removeItem</span>(<span class="hljs-params">index</span>) {
      <span class="hljs-comment">// âŒ é”™è¯¯ï¼šç›´æ¥ä¿®æ”¹prop</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">list</span>.<span class="hljs-title function_">splice</span>(index, <span class="hljs-number">1</span>)
      
      <span class="hljs-comment">// âœ… æ­£ç¡®ï¼šé€šè¿‡äº‹ä»¶é€šçŸ¥çˆ¶ç»„ä»¶</span>
      <span class="hljs-variable language_">this</span>.$emit(<span class="hljs-string">'remove-item'</span>, index)
    }
  }
}

<span class="hljs-comment">// é™·é˜±2ï¼šè¿‡åº¦ä½¿ç”¨åŒå‘ç»‘å®š</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-title function_">data</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> {
      <span class="hljs-comment">// âŒ é”™è¯¯ï¼šæ‰€æœ‰æ•°æ®éƒ½ç”¨v-model</span>
      <span class="hljs-comment">// user: {},</span>
      <span class="hljs-comment">// products: [],</span>
      <span class="hljs-comment">// settings: {}</span>
      
      <span class="hljs-comment">// âœ… æ­£ç¡®ï¼šåŒºåˆ†çŠ¶æ€ç±»å‹</span>
      <span class="hljs-attr">user</span>: {},           <span class="hljs-comment">// é€‚åˆv-model</span>
      <span class="hljs-attr">products</span>: [],       <span class="hljs-comment">// é€‚åˆå•å‘æ•°æ®æµ</span>
      <span class="hljs-attr">settings</span>: {         <span class="hljs-comment">// æ··åˆä½¿ç”¨</span>
        <span class="hljs-attr">theme</span>: <span class="hljs-string">'dark'</span>,    <span class="hljs-comment">// é€‚åˆv-model</span>
        <span class="hljs-attr">permissions</span>: []   <span class="hljs-comment">// é€‚åˆå•å‘æ•°æ®æµ</span>
      }
    }
  }
}

<span class="hljs-comment">// é™·é˜±3ï¼šå¿½ç•¥æ•°æ®æµçš„å¯è¿½æº¯æ€§</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-attr">methods</span>: {
    <span class="hljs-comment">// âŒ é”™è¯¯ï¼šéšå¼æ›´æ–°ï¼Œéš¾ä»¥è¿½è¸ª</span>
    <span class="hljs-title function_">updateData</span>(<span class="hljs-params"/>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">$parent</span>.<span class="hljs-property">$data</span>.<span class="hljs-property">someValue</span> = <span class="hljs-string">'new'</span>
    },
    
    <span class="hljs-comment">// âœ… æ­£ç¡®ï¼šæ˜¾å¼äº‹ä»¶ï¼Œæ˜“äºè°ƒè¯•</span>
    <span class="hljs-title function_">updateData</span>(<span class="hljs-params"/>) {
      <span class="hljs-variable language_">this</span>.$emit(<span class="hljs-string">'data-updated'</span>, {
        <span class="hljs-attr">value</span>: <span class="hljs-string">'new'</span>,
        <span class="hljs-attr">source</span>: <span class="hljs-string">'ChildComponent'</span>,
        <span class="hljs-attr">timestamp</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>()
      })
    }
  }
}
</code></pre>
<h3 data-id="heading-22">6.2 æ€§èƒ½ä¼˜åŒ–å»ºè®®</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// 1. åˆç†ä½¿ç”¨v-onceï¼ˆå•å‘æ•°æ®æµä¼˜åŒ–ï¼‰</span>
&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- é™æ€å†…å®¹ä½¿ç”¨v-once --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">v-once</span>&gt;</span>{{ appTitle }}<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- åŠ¨æ€å†…å®¹ä¸ä½¿ç”¨v-once --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>{{ dynamicContent }}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
&lt;/template&gt;

<span class="hljs-comment">// 2. é¿å…ä¸å¿…è¦çš„å“åº”å¼ï¼ˆåŒå‘æ•°æ®æµä¼˜åŒ–ï¼‰</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-title function_">data</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> {
      <span class="hljs-comment">// ä¸éœ€è¦å“åº”å¼çš„æ•°æ®</span>
      <span class="hljs-attr">constants</span>: <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">freeze</span>({
        <span class="hljs-attr">PI</span>: <span class="hljs-number">3.14159</span>,
        <span class="hljs-attr">MAX_ITEMS</span>: <span class="hljs-number">100</span>
      }),
      
      <span class="hljs-comment">// å¤§æ•°ç»„è€ƒè™‘ä½¿ç”¨Object.freeze</span>
      <span class="hljs-attr">largeList</span>: <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">freeze</span>([
        <span class="hljs-comment">// ...å¤§é‡æ•°æ®</span>
      ])
    }
  }
}

<span class="hljs-comment">// 3. ä½¿ç”¨computedç¼“å­˜ï¼ˆå•å‘æ•°æ®æµä¼˜åŒ–ï¼‰</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-attr">props</span>: [<span class="hljs-string">'items'</span>, <span class="hljs-string">'filter'</span>],
  <span class="hljs-attr">computed</span>: {
    <span class="hljs-comment">// ç¼“å­˜è¿‡æ»¤ç»“æœï¼Œé¿å…é‡å¤è®¡ç®—</span>
    <span class="hljs-title function_">filteredItems</span>(<span class="hljs-params"/>) {
      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> 
        item.<span class="hljs-property">name</span>.<span class="hljs-title function_">includes</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">filter</span>)
      )
    },
    
    <span class="hljs-comment">// è®¡ç®—å±æ€§ä¾èµ–å˜åŒ–æ—¶æ‰é‡æ–°è®¡ç®—</span>
    <span class="hljs-title function_">itemCount</span>(<span class="hljs-params"/>) {
      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">filteredItems</span>.<span class="hljs-property">length</span>
    }
  }
}
</code></pre>
<h3 data-id="heading-23">6.3 æµ‹è¯•ç­–ç•¥</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å•å‘æ•°æ®æµç»„ä»¶æµ‹è¯•</span>
<span class="hljs-keyword">import</span> { mount } <span class="hljs-keyword">from</span> <span class="hljs-string">'@vue/test-utils'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">UserCard</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./UserCard.vue'</span>

<span class="hljs-title function_">describe</span>(<span class="hljs-string">'UserCard - å•å‘æ•°æ®æµ'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title function_">it</span>(<span class="hljs-string">'åº”è¯¥æ­£ç¡®æ¥æ”¶props'</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> wrapper = <span class="hljs-title function_">mount</span>(<span class="hljs-title class_">UserCard</span>, {
      <span class="hljs-attr">propsData</span>: {
        <span class="hljs-attr">user</span>: { <span class="hljs-attr">name</span>: <span class="hljs-string">'å¼ ä¸‰'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">30</span> }
      }
    })
    
    <span class="hljs-title function_">expect</span>(wrapper.<span class="hljs-title function_">text</span>()).<span class="hljs-title function_">toContain</span>(<span class="hljs-string">'å¼ ä¸‰'</span>)
    <span class="hljs-title function_">expect</span>(wrapper.<span class="hljs-title function_">text</span>()).<span class="hljs-title function_">toContain</span>(<span class="hljs-string">'30'</span>)
  })
  
  <span class="hljs-title function_">it</span>(<span class="hljs-string">'åº”è¯¥æ­£ç¡®è§¦å‘äº‹ä»¶'</span>, <span class="hljs-keyword">async</span> () =&gt; {
    <span class="hljs-keyword">const</span> wrapper = <span class="hljs-title function_">mount</span>(<span class="hljs-title class_">UserCard</span>)
    
    <span class="hljs-keyword">await</span> wrapper.<span class="hljs-title function_">find</span>(<span class="hljs-string">'button'</span>).<span class="hljs-title function_">trigger</span>(<span class="hljs-string">'click'</span>)
    
    <span class="hljs-comment">// éªŒè¯æ˜¯å¦æ­£ç¡®è§¦å‘äº‹ä»¶</span>
    <span class="hljs-title function_">expect</span>(wrapper.<span class="hljs-title function_">emitted</span>()[<span class="hljs-string">'user-click'</span>]).<span class="hljs-title function_">toBeTruthy</span>()
    <span class="hljs-title function_">expect</span>(wrapper.<span class="hljs-title function_">emitted</span>()[<span class="hljs-string">'user-click'</span>][<span class="hljs-number">0</span>]).<span class="hljs-title function_">toEqual</span>([<span class="hljs-string">'clicked'</span>])
  })
})

<span class="hljs-comment">// åŒå‘æ•°æ®æµç»„ä»¶æµ‹è¯•</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">CustomInput</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./CustomInput.vue'</span>

<span class="hljs-title function_">describe</span>(<span class="hljs-string">'CustomInput - åŒå‘æ•°æ®æµ'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title function_">it</span>(<span class="hljs-string">'v-modelåº”è¯¥æ­£å¸¸å·¥ä½œ'</span>, <span class="hljs-keyword">async</span> () =&gt; {
    <span class="hljs-keyword">const</span> wrapper = <span class="hljs-title function_">mount</span>(<span class="hljs-title class_">CustomInput</span>, {
      <span class="hljs-attr">propsData</span>: {
        <span class="hljs-attr">value</span>: <span class="hljs-string">'initial'</span>
      }
    })
    
    <span class="hljs-comment">// æ¨¡æ‹Ÿè¾“å…¥</span>
    <span class="hljs-keyword">const</span> input = wrapper.<span class="hljs-title function_">find</span>(<span class="hljs-string">'input'</span>)
    <span class="hljs-keyword">await</span> input.<span class="hljs-title function_">setValue</span>(<span class="hljs-string">'new value'</span>)
    
    <span class="hljs-comment">// éªŒè¯æ˜¯å¦è§¦å‘inputäº‹ä»¶</span>
    <span class="hljs-title function_">expect</span>(wrapper.<span class="hljs-title function_">emitted</span>().<span class="hljs-property">input</span>).<span class="hljs-title function_">toBeTruthy</span>()
    <span class="hljs-title function_">expect</span>(wrapper.<span class="hljs-title function_">emitted</span>().<span class="hljs-property">input</span>[<span class="hljs-number">0</span>]).<span class="hljs-title function_">toEqual</span>([<span class="hljs-string">'new value'</span>])
  })
  
  <span class="hljs-title function_">it</span>(<span class="hljs-string">'åº”è¯¥å“åº”å¤–éƒ¨valueå˜åŒ–'</span>, <span class="hljs-keyword">async</span> () =&gt; {
    <span class="hljs-keyword">const</span> wrapper = <span class="hljs-title function_">mount</span>(<span class="hljs-title class_">CustomInput</span>, {
      <span class="hljs-attr">propsData</span>: { <span class="hljs-attr">value</span>: <span class="hljs-string">'old'</span> }
    })
    
    <span class="hljs-comment">// æ›´æ–°prop</span>
    <span class="hljs-keyword">await</span> wrapper.<span class="hljs-title function_">setProps</span>({ <span class="hljs-attr">value</span>: <span class="hljs-string">'new'</span> })
    
    <span class="hljs-comment">// éªŒè¯è¾“å…¥æ¡†å€¼å·²æ›´æ–°</span>
    <span class="hljs-title function_">expect</span>(wrapper.<span class="hljs-title function_">find</span>(<span class="hljs-string">'input'</span>).<span class="hljs-property">element</span>.<span class="hljs-property">value</span>).<span class="hljs-title function_">toBe</span>(<span class="hljs-string">'new'</span>)
  })
})
</code></pre>
<h2 data-id="heading-24">ä¸ƒã€å®æˆ˜æ¡ˆä¾‹ï¼šæ„å»ºä¸€ä¸ªä»»åŠ¡ç®¡ç†åº”ç”¨</h2>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å®Œæ•´ç¤ºä¾‹ï¼šTodoåº”ç”¨çš„æ•°æ®æµè®¾è®¡</span>
<span class="hljs-comment">// App.vue - æ ¹ç»„ä»¶</span>
&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"app"</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- å•å‘ï¼šä¼ é€’è¿‡æ»¤æ¡ä»¶ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">TodoFilter</span> 
      <span class="hljs-attr">:filter</span>=<span class="hljs-string">"currentFilter"</span>
      @<span class="hljs-attr">filter-change</span>=<span class="hljs-string">"updateFilter"</span>
    /&gt;</span>
    
    <span class="hljs-comment">&lt;!-- åŒå‘ï¼šæ·»åŠ æ–°ä»»åŠ¡ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">TodoInput</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"newTodo"</span> @<span class="hljs-attr">add</span>=<span class="hljs-string">"addTodo"</span> /&gt;</span>
    
    <span class="hljs-comment">&lt;!-- å•å‘ï¼šä»»åŠ¡åˆ—è¡¨ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">TodoList</span> 
      <span class="hljs-attr">:todos</span>=<span class="hljs-string">"filteredTodos"</span>
      @<span class="hljs-attr">toggle</span>=<span class="hljs-string">"toggleTodo"</span>
      @<span class="hljs-attr">delete</span>=<span class="hljs-string">"deleteTodo"</span>
    /&gt;</span>
    
    <span class="hljs-comment">&lt;!-- å•å‘ï¼šç»Ÿè®¡æ•°æ® --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">TodoStats</span> <span class="hljs-attr">:stats</span>=<span class="hljs-string">"todoStats"</span> /&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
&lt;/template&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-title function_">data</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">todos</span>: [],
      <span class="hljs-attr">newTodo</span>: <span class="hljs-string">''</span>,
      <span class="hljs-attr">currentFilter</span>: <span class="hljs-string">'all'</span>
    }
  },
  <span class="hljs-attr">computed</span>: {
    <span class="hljs-comment">// å•å‘æ•°æ®æµï¼šè®¡ç®—è¿‡æ»¤åçš„ä»»åŠ¡</span>
    <span class="hljs-title function_">filteredTodos</span>(<span class="hljs-params"/>) {
      <span class="hljs-keyword">switch</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">currentFilter</span>) {
        <span class="hljs-keyword">case</span> <span class="hljs-string">'active'</span>:
          <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">todos</span>.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">todo</span> =&gt;</span> !todo.<span class="hljs-property">completed</span>)
        <span class="hljs-keyword">case</span> <span class="hljs-string">'completed'</span>:
          <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">todos</span>.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">todo</span> =&gt;</span> todo.<span class="hljs-property">completed</span>)
        <span class="hljs-attr">default</span>:
          <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">todos</span>
      }
    },
    
    <span class="hljs-comment">// å•å‘æ•°æ®æµï¼šè®¡ç®—ç»Ÿè®¡ä¿¡æ¯</span>
    <span class="hljs-title function_">todoStats</span>(<span class="hljs-params"/>) {
      <span class="hljs-keyword">const</span> total = <span class="hljs-variable language_">this</span>.<span class="hljs-property">todos</span>.<span class="hljs-property">length</span>
      <span class="hljs-keyword">const</span> completed = <span class="hljs-variable language_">this</span>.<span class="hljs-property">todos</span>.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">t</span> =&gt;</span> t.<span class="hljs-property">completed</span>).<span class="hljs-property">length</span>
      <span class="hljs-keyword">const</span> active = total - completed
      
      <span class="hljs-keyword">return</span> { total, completed, active }
    }
  },
  <span class="hljs-attr">methods</span>: {
    <span class="hljs-comment">// å•å‘ï¼šæ·»åŠ ä»»åŠ¡</span>
    <span class="hljs-title function_">addTodo</span>(<span class="hljs-params"/>) {
      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">newTodo</span>.<span class="hljs-title function_">trim</span>()) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">todos</span>.<span class="hljs-title function_">push</span>({
          <span class="hljs-attr">id</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>(),
          <span class="hljs-attr">text</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">newTodo</span>.<span class="hljs-title function_">trim</span>(),
          <span class="hljs-attr">completed</span>: <span class="hljs-literal">false</span>,
          <span class="hljs-attr">createdAt</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>()
        })
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">newTodo</span> = <span class="hljs-string">''</span>
      }
    },
    
    <span class="hljs-comment">// å•å‘ï¼šåˆ‡æ¢ä»»åŠ¡çŠ¶æ€</span>
    <span class="hljs-title function_">toggleTodo</span>(<span class="hljs-params">id</span>) {
      <span class="hljs-keyword">const</span> todo = <span class="hljs-variable language_">this</span>.<span class="hljs-property">todos</span>.<span class="hljs-title function_">find</span>(<span class="hljs-function"><span class="hljs-params">t</span> =&gt;</span> t.<span class="hljs-property">id</span> === id)
      <span class="hljs-keyword">if</span> (todo) {
        todo.<span class="hljs-property">completed</span> = !todo.<span class="hljs-property">completed</span>
      }
    },
    
    <span class="hljs-comment">// å•å‘ï¼šåˆ é™¤ä»»åŠ¡</span>
    <span class="hljs-title function_">deleteTodo</span>(<span class="hljs-params">id</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">todos</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">todos</span>.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">t</span> =&gt;</span> t.<span class="hljs-property">id</span> !== id)
    },
    
    <span class="hljs-comment">// å•å‘ï¼šæ›´æ–°è¿‡æ»¤æ¡ä»¶</span>
    <span class="hljs-title function_">updateFilter</span>(<span class="hljs-params">filter</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">currentFilter</span> = filter
    }
  }
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>

<span class="hljs-comment">// TodoInput.vue - åŒå‘æ•°æ®æµç»„ä»¶</span>
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"todo-input"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> 
      <span class="hljs-attr">v-model</span>=<span class="hljs-string">"localValue"</span>
      @<span class="hljs-attr">keyup.enter</span>=<span class="hljs-string">"handleAdd"</span>
      <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"æ·»åŠ æ–°ä»»åŠ¡..."</span>
    /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"handleAdd"</span>&gt;</span>æ·»åŠ <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span>

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-attr">props</span>: {
    <span class="hljs-attr">value</span>: <span class="hljs-title class_">String</span>
  },
  <span class="hljs-title function_">data</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">localValue</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">value</span>
    }
  },
  <span class="hljs-attr">watch</span>: {
    <span class="hljs-title function_">value</span>(<span class="hljs-params">newVal</span>) {
      <span class="hljs-comment">// å•å‘ï¼šå“åº”å¤–éƒ¨valueå˜åŒ–</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">localValue</span> = newVal
    }
  },
  <span class="hljs-attr">methods</span>: {
    <span class="hljs-title function_">handleAdd</span>(<span class="hljs-params"/>) {
      <span class="hljs-comment">// åŒå‘ï¼šæ›´æ–°v-modelç»‘å®šçš„å€¼</span>
      <span class="hljs-variable language_">this</span>.$emit(<span class="hljs-string">'input'</span>, <span class="hljs-string">''</span>)
      <span class="hljs-comment">// å•å‘ï¼šè§¦å‘æ·»åŠ äº‹ä»¶</span>
      <span class="hljs-variable language_">this</span>.$emit(<span class="hljs-string">'add'</span>)
    }
  }
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>

<span class="hljs-comment">// TodoList.vue - å•å‘æ•°æ®æµç»„ä»¶</span>
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"todo-list"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">TodoItem</span> 
      <span class="hljs-attr">v-for</span>=<span class="hljs-string">"todo in todos"</span>
      <span class="hljs-attr">:key</span>=<span class="hljs-string">"todo.id"</span>
      <span class="hljs-attr">:todo</span>=<span class="hljs-string">"todo"</span>
      @<span class="hljs-attr">toggle</span>=<span class="hljs-string">"$emit('toggle', todo.id)"</span>
      @<span class="hljs-attr">delete</span>=<span class="hljs-string">"$emit('delete', todo.id)"</span>
    /&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span>

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-attr">props</span>: {
    <span class="hljs-attr">todos</span>: <span class="hljs-title class_">Array</span>  <span class="hljs-comment">// åªè¯»ï¼Œä¸èƒ½ä¿®æ”¹</span>
  },
  <span class="hljs-attr">components</span>: {
    <span class="hljs-title class_">TodoItem</span>
  }
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
</code></pre>
<h2 data-id="heading-25">å…«ã€æ€»ç»“ä¸å±•æœ›</h2>
<h3 data-id="heading-26">8.1 æ ¸å¿ƒè¦ç‚¹å›é¡¾</h3>
<ol>
<li>
<p><strong>å•å‘æ•°æ®æµæ˜¯Vueçš„é»˜è®¤è®¾è®¡</strong>ï¼Œå®ƒé€šè¿‡propså‘ä¸‹ä¼ é€’ï¼Œäº‹ä»¶å‘ä¸Šé€šçŸ¥ï¼Œä¿è¯äº†æ•°æ®æµçš„å¯é¢„æµ‹æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</p>
</li>
<li>
<p><strong>åŒå‘æ•°æ®æµé€šè¿‡v-modelå®ç°</strong>ï¼Œä¸»è¦é€‚ç”¨äºè¡¨å•åœºæ™¯ï¼Œå®ƒæœ¬è´¨ä¸Šæ˜¯<code>:value</code> + <code>@input</code>çš„è¯­æ³•ç³–ã€‚</p>
</li>
<li>
<p><strong>é€‰æ‹©åˆé€‚çš„æ•°æ®æµæ¨¡å¼</strong>ï¼š</p>
<ul>
<li>å¤§å¤šæ•°æƒ…å†µï¼šä½¿ç”¨å•å‘æ•°æ®æµ</li>
<li>è¡¨å•è¾“å…¥ï¼šä½¿ç”¨åŒå‘æ•°æ®æµï¼ˆv-modelï¼‰</li>
<li>å¤æ‚åœºæ™¯ï¼šæ··åˆä½¿ç”¨ï¼Œä½†ä»¥å•å‘ä¸ºä¸»</li>
</ul>
</li>
<li>
<p><strong>Vue 3çš„å¢å¼º</strong>ï¼š</p>
<ul>
<li>å¤šv-modelæ”¯æŒ</li>
<li>Composition APIæä¾›æ›´çµæ´»çš„æ•°æ®æµç®¡ç†</li>
<li>æ›´å¥½çš„TypeScriptæ”¯æŒ</li>
</ul>
</li>
</ol>
<h3 data-id="heading-27">8.2 æœªæ¥å‘å±•è¶‹åŠ¿</h3>
<p>éšç€Vueç”Ÿæ€çš„å‘å±•ï¼Œæ•°æ®æµç®¡ç†ä¹Ÿåœ¨ä¸æ–­è¿›åŒ–ï¼š</p>
<ol>
<li>
<p><strong>Piniaçš„å…´èµ·</strong>ï¼šä½œä¸ºæ–°ä¸€ä»£çŠ¶æ€ç®¡ç†åº“ï¼ŒPiniaæä¾›äº†æ›´ç®€æ´çš„APIå’Œæ›´å¥½çš„TypeScriptæ”¯æŒã€‚</p>
</li>
<li>
<p><strong>Composition APIçš„æ™®åŠ</strong>ï¼šä½¿å¾—é€»è¾‘å¤ç”¨å’Œæ•°æ®æµç®¡ç†æ›´åŠ çµæ´»ã€‚</p>
</li>
<li>
<p><strong>å“åº”å¼ç³»ç»Ÿä¼˜åŒ–</strong>ï¼šVue 3çš„å“åº”å¼ç³»ç»Ÿæ€§èƒ½æ›´å¥½ï¼Œä¸ºå¤æ‚æ•°æ®æµæä¾›äº†æ›´å¥½çš„åŸºç¡€ã€‚</p>
</li>
</ol>
<h3 data-id="heading-28">8.3 æœ€åçš„å»ºè®®</h3>
<p>è®°ä½ä¸€ä¸ªç®€å•çš„åŸåˆ™ï¼š<strong>å½“ä½ ä¸ç¡®å®šè¯¥ç”¨å“ªç§æ•°æ®æµæ—¶ï¼Œé€‰æ‹©å•å‘æ•°æ®æµ</strong>ã€‚å®ƒå¯èƒ½ä»£ç é‡ç¨å¤šï¼Œä½†å¸¦æ¥çš„å¯ç»´æŠ¤æ€§å’Œå¯è°ƒè¯•æ€§æ˜¯å€¼å¾—çš„ã€‚</p>
<p>åŒå‘æ•°æ®æµå°±åƒæ˜¯ç”œç‚¹â€”â€”é€‚é‡ä½¿ç”¨èƒ½æå‡ä½“éªŒï¼Œä½†è¿‡åº¦ä¾èµ–å¯èƒ½å¯¼è‡´"ä»£ç è‚¥èƒ–ç—‡"ã€‚è€Œå•å‘æ•°æ®æµåˆ™æ˜¯ä¸»é£Ÿï¼Œæ„æˆäº†å¥åº·åº”ç”¨çš„åŸºç¡€ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è§£å†³Github QQé‚®ç®±æ³¨å†Œéš¾é¢˜ï¼šç»•è¿‡â€œUnable to verify your captcha responseâ€é”™è¯¯]]></title>    <link>https://juejin.cn/post/7594093947809595426</link>    <guid>https://juejin.cn/post/7594093947809595426</guid>    <pubDate>2026-01-12T13:39:20.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594093947809595426" data-draft-id="7594262760940355618" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è§£å†³Github QQé‚®ç®±æ³¨å†Œéš¾é¢˜ï¼šç»•è¿‡â€œUnable to verify your captcha responseâ€é”™è¯¯"/> <meta itemprop="keywords" content="GitHub"/> <meta itemprop="datePublished" content="2026-01-12T13:39:20.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¿®å·±xj"/> <meta itemprop="url" content="https://juejin.cn/user/2641475936724142"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è§£å†³Github QQé‚®ç®±æ³¨å†Œéš¾é¢˜ï¼šç»•è¿‡â€œUnable to verify your captcha responseâ€é”™è¯¯
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2641475936724142/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¿®å·±xj
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-12T13:39:20.000Z" title="Mon Jan 12 2026 13:39:20 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/43007796bc5d40bc9e9e37d9b24b1f7b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L-u5bexeGo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768829960&amp;x-signature=aqrsWMVMh0ygml3wQwJ9%2BIHj%2BtU%3D" alt="" loading="lazy"/></p>
<p>æœ€è¿‘åœ¨å°è¯•ä½¿ç”¨QQé‚®ç®±æ³¨å†Œæ–°çš„Githubè´¦å·æ—¶ï¼Œé‡åˆ°äº†ä¸€ä¸ªä»¤äººå›°æ‰°çš„é—®é¢˜ã€‚ç»è¿‡ç¹ççš„å›¾ç‰‡éªŒè¯åï¼Œé¡µé¢ä¸ä»…æ²¡æœ‰è·³è½¬æˆåŠŸï¼Œåè€Œé‡æ–°å›åˆ°æ³¨å†Œé¡µé¢ï¼Œå¹¶æ˜¾ç¤ºä»¥ä¸‹é”™è¯¯ä¿¡æ¯ï¼š</p>
<p><strong>â€œUnable to verify your captcha response.â€</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cb2cdbcb3ba6492bb83498ec4b323881~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L-u5bexeGo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768829960&amp;x-signature=QPmqkeHY5OfoBosEyAhsO7Q9hc4%3D" alt="" loading="lazy"/></p>
<p>æ— è®ºæ›´æ¢ç½‘ç»œç¯å¢ƒã€ä½¿ç”¨ä¸åŒè®¾å¤‡ï¼ˆåŒ…æ‹¬æ‰‹æœºï¼‰è¿˜æ˜¯åˆ‡æ¢å„ç§æµè§ˆå™¨ï¼Œè¿™ä¸ªé—®é¢˜å§‹ç»ˆå­˜åœ¨ã€‚ç»è¿‡ä¸€ç•ªæ¢ç´¢ï¼Œæˆ‘æ‰¾åˆ°äº†ä¸€ä¸ªæœ‰æ•ˆçš„è§£å†³æ–¹æ¡ˆï¼Œå¹¶åœ¨æ­¤åˆ†äº«ç»™å¤§å®¶ã€‚</p>
<h2 data-id="heading-0">é—®é¢˜ç°è±¡</h2>
<ol>
<li>åœ¨Githubæ³¨å†Œé¡µé¢å¡«å†™ç”¨æˆ·åã€å¯†ç å’Œé‚®ç®±ï¼ˆQQé‚®ç®±ï¼‰ç­‰ä¿¡æ¯</li>
<li>å®Œæˆå¤æ‚çš„å›¾ç‰‡éªŒè¯è¿‡ç¨‹</li>
<li>æäº¤åé¡µé¢è·³è½¬å›æ³¨å†Œé¡µé¢ï¼Œæ˜¾ç¤ºä¸Šè¿°é”™è¯¯æç¤º</li>
<li>å¤šæ¬¡å°è¯•å‡æ— æ³•è§£å†³</li>
</ol>
<h2 data-id="heading-1">è§£å†³æ–¹æ¡ˆï¼šè¿‚å›æ³¨å†Œæ³•</h2>
<p>ç»è¿‡å¤šæ–¹æŸ¥æ‰¾å’Œå°è¯•ï¼Œæˆ‘å‘ç°äº†ä¸€ä¸ªå¯è¡Œçš„â€œæ›²çº¿æ•‘å›½â€æ–¹æ³•ï¼š</p>
<h3 data-id="heading-2">æ­¥éª¤ä¸€ï¼šä½¿ç”¨ç¬¬ä¸‰æ–¹è´¦å·æ³¨å†Œ</h3>
<ol>
<li>åœ¨Githubæ³¨å†Œé¡µé¢ï¼Œä¸ç›´æ¥å¡«å†™è¡¨å•ï¼Œè€Œæ˜¯é€‰æ‹© <strong>â€œContinue with Googleâ€</strong></li>
<li>ä½¿ç”¨ä½ çš„Googleè´¦å·å®Œæˆæ³¨å†Œè¿‡ç¨‹</li>
<li>æ³¨å†ŒæˆåŠŸåï¼Œè¿›å…¥æ–°åˆ›å»ºçš„Githubè´¦å·è®¾ç½®</li>
</ol>
<h3 data-id="heading-3">æ­¥éª¤äºŒï¼šæ›´æ¢ä¸»é‚®ç®±</h3>
<ol>
<li>è¿›å…¥â€œSettingsâ€ â†’ â€œEmailsâ€</li>
<li>æ·»åŠ ä½ åŸæœ¬æƒ³è¦ä½¿ç”¨çš„QQé‚®ç®±</li>
<li>éªŒè¯è¯¥é‚®ç®±åœ°å€</li>
<li>å°†å…¶è®¾ç½®ä¸º <strong>â€œPrimary Emailâ€</strong></li>
</ol>
<h3 data-id="heading-4">æ­¥éª¤ä¸‰ï¼šè°ƒæ•´ç™»å½•æ–¹å¼</h3>
<ol>
<li>åœ¨â€œSettingsâ€ â†’ â€œPassword and authenticationâ€ä¸­è®¾ç½®Githubç™»å½•å¯†ç </li>
<li>è§£é™¤Googleè´¦å·ä¸Githubçš„å…³è”</li>
<li>ï¼ˆå¯é€‰ï¼‰ä»Githubè´¦å·ä¸­ç§»é™¤Googleé‚®ç®±,åç»­å¯ç»§ç»­ä½¿ç”¨æ­¤é‚®ç®±æ³¨å†Œgithub è´¦å·</li>
</ol>
<h3 data-id="heading-5">å®Œæˆ</h3>
<p>ç°åœ¨ï¼Œä½ çš„Githubè´¦å·å·²ç»ä¸ä½ æƒ³è¦çš„é‚®ç®±å…³è”ï¼Œå¹¶ä¸”ä¸å†ä¾èµ–Googleè´¦å·ç™»å½•ã€‚</p>
<h2 data-id="heading-6">ç»“è¯­</h2>
<p>è™½ç„¶è¿™ä¸ªè§£å†³æ–¹æ¡ˆéœ€è¦é¢å¤–çš„æ­¥éª¤ï¼Œä½†å®ƒç¡®å®èƒ½è§£å†³è¿™ä¸ªä»¤äººæ²®ä¸§çš„æ³¨å†Œé—®é¢˜ã€‚å¸Œæœ›Githubå®˜æ–¹èƒ½å°½å¿«ä¼˜åŒ–ä»–ä»¬çš„éªŒè¯ç³»ç»Ÿï¼Œç‰¹åˆ«æ˜¯å¯¹æŸäº›åœ°åŒºå’Œé‚®ç®±æœåŠ¡å•†çš„å…¼å®¹æ€§ã€‚</p>
<p>å¦‚æœä½ ä¹Ÿé‡åˆ°äº†ç±»ä¼¼é—®é¢˜ï¼Œä¸å¦¨å°è¯•è¿™ä¸ªæ–¹æ³•ã€‚å¦‚æœè¿˜æœ‰å…¶ä»–è§£å†³æ–¹æ¡ˆï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºåˆ†äº«ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Service Worker ç¼“å­˜è¯·æ±‚ï¼šå‰ç«¯æ€§èƒ½ä¼˜åŒ–çš„è¿›é˜¶åˆ©å™¨]]></title>    <link>https://juejin.cn/post/7594096585728999424</link>    <guid>https://juejin.cn/post/7594096585728999424</guid>    <pubDate>2026-01-12T13:51:22.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594096585728999424" data-draft-id="7594051966890508323" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Service Worker ç¼“å­˜è¯·æ±‚ï¼šå‰ç«¯æ€§èƒ½ä¼˜åŒ–çš„è¿›é˜¶åˆ©å™¨"/> <meta itemprop="keywords" content="å‰ç«¯,æ€§èƒ½ä¼˜åŒ–"/> <meta itemprop="datePublished" content="2026-01-12T13:51:22.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="eason_fan"/> <meta itemprop="url" content="https://juejin.cn/user/2995517308808877"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Service Worker ç¼“å­˜è¯·æ±‚ï¼šå‰ç«¯æ€§èƒ½ä¼˜åŒ–çš„è¿›é˜¶åˆ©å™¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2995517308808877/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    eason_fan
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-12T13:51:22.000Z" title="Mon Jan 12 2026 13:51:22 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Service Worker ç¼“å­˜è¯·æ±‚ï¼šå‰ç«¯æ€§èƒ½ä¼˜åŒ–çš„è¿›é˜¶åˆ©å™¨</h2>
<p>åœ¨å‰ç«¯æ€§èƒ½ä¼˜åŒ–çš„èµ›é“ä¸Šï¼Œç¼“å­˜å§‹ç»ˆæ˜¯ç»•ä¸å¼€çš„æ ¸å¿ƒè¯é¢˜ã€‚ä»åŸºç¡€çš„ HTTP ç¼“å­˜åˆ° localStorage æœ¬åœ°å­˜å‚¨ï¼Œæ¯ä¸€ç§ç¼“å­˜æ–¹æ¡ˆéƒ½åœ¨ç‰¹å®šåœºæ™¯ä¸‹å‘æŒ¥ç€ä»·å€¼ã€‚è€Œä»Šå¤©è¦é‡ç‚¹èŠçš„<strong>Service Worker ç¼“å­˜</strong>ï¼Œåˆ™æ˜¯çªç ´ä¼ ç»Ÿç¼“å­˜å±€é™ã€å®ç°è¿›é˜¶æ€§èƒ½ä¼˜åŒ–çš„å…³é”®æ‰‹æ®µâ€”â€”å®ƒä¸ä»…èƒ½åŠ é€Ÿèµ„æºåŠ è½½ï¼Œæ›´èƒ½è§£é”ç¦»çº¿è®¿é—®ç­‰é«˜çº§èƒ½åŠ›ï¼Œè®©å‰ç«¯åº”ç”¨çš„ä½“éªŒå®ç°è´¨çš„é£è·ƒã€‚</p>
<h3 data-id="heading-1">ä¸€ã€ä¸ºä»€ä¹ˆéœ€è¦ Service Worker ç¼“å­˜ï¼Ÿä¼ ç»Ÿç¼“å­˜çš„ç—›ç‚¹</h3>
<p>åœ¨èŠ Service Worker ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆå›é¡¾ä¸‹å‰ç«¯æœ€å¸¸ç”¨çš„ <strong>HTTP åŸç”Ÿç¼“å­˜</strong>ï¼ˆå¼ºç¼“å­˜ + åå•†ç¼“å­˜ï¼‰ã€‚å®ƒçš„ä¼˜åŠ¿å¾ˆæ˜æ˜¾ï¼šæ— éœ€å‰ç«¯å¼€å‘æˆæœ¬ï¼Œç”±æµè§ˆå™¨è‡ªåŠ¨éµå¾ª HTTP å“åº”å¤´ï¼ˆCache-Controlã€Expiresã€Etag ç­‰ï¼‰æ‰§è¡Œï¼Œèƒ½æœ‰æ•ˆå‡å°‘é™æ€èµ„æºçš„é‡å¤è¯·æ±‚ã€‚ä½†åœ¨å®é™…å¼€å‘ä¸­ï¼Œå®ƒçš„å±€é™æ€§ä¹Ÿæ„ˆå‘çªå‡ºï¼š</p>
<ul>
<li><strong>æ§åˆ¶æƒç¼ºå¤±</strong>ï¼šç¼“å­˜è§„åˆ™å®Œå…¨ç”±åç«¯é€šè¿‡å“åº”å¤´æ§åˆ¶ï¼Œå‰ç«¯æ— æ³•ä¸»åŠ¨å†³å®šç¼“å­˜å“ªäº›èµ„æºã€ä½•æ—¶æ›´æ–°æˆ–åˆ é™¤ç¼“å­˜ï¼›</li>
<li><strong>ç¼“å­˜èŒƒå›´å—é™</strong>ï¼šé»˜è®¤ä¸ç¼“å­˜ POST è¯·æ±‚ã€å¸¦é‰´æƒå¤´ï¼ˆå¦‚ Authorizationï¼‰çš„è¯·æ±‚ã€è·¨åŸŸè¯·æ±‚ï¼Œè€Œè¿™äº›æ°æ°æ˜¯æ¥å£è¯·æ±‚çš„å¸¸è§åœºæ™¯ï¼›</li>
<li><strong>ç­–ç•¥å•ä¸€</strong>ï¼šåªæœ‰ã€Œå¼ºç¼“å­˜ â†’ åå•†ç¼“å­˜ã€è¿™ä¸€ç§å›ºå®šé€»è¾‘ï¼Œæ— æ³•é€‚é…å¤æ‚çš„ä¸šåŠ¡åœºæ™¯ï¼ˆå¦‚â€œå…ˆæ˜¾ç¤ºç¼“å­˜å†åå°æ›´æ–°â€ï¼‰ï¼›</li>
<li><strong>æ— ç¦»çº¿èƒ½åŠ›</strong>ï¼šä¸€æ—¦æ–­ç½‘ï¼Œæœªè¢«ç¼“å­˜çš„èµ„æºï¼ˆå°¤å…¶æ˜¯æ¥å£æ•°æ®ï¼‰ä¼šç›´æ¥åŠ è½½å¤±è´¥ï¼Œå¯¼è‡´é¡µé¢ç™½å±æˆ–åŠŸèƒ½å¤±æ•ˆï¼›</li>
<li><strong>ç¼“å­˜ç¨³å®šæ€§å·®</strong>ï¼šç¼“å­˜å­˜å‚¨åœ¨æµè§ˆå™¨çš„å†…å­˜/ç£ç›˜ä¸­ï¼Œå¯èƒ½è¢«æµè§ˆå™¨åœ¨å†…å­˜ä¸è¶³æ—¶è‡ªåŠ¨æ¸…ç†ï¼Œå¼€å‘è€…æ— æ³•å¹²é¢„ã€‚</li>
</ul>
<p>è€Œ Service Worker ç¼“å­˜çš„å‡ºç°ï¼Œæ­£æ˜¯ä¸ºäº†è§£å†³è¿™äº›ç—›ç‚¹â€”â€”å®ƒè®©å‰ç«¯å¼€å‘è€…å®Œå…¨æŒæ§ç½‘ç»œè¯·æ±‚çš„ç¼“å­˜é€»è¾‘ï¼Œå®ç°æ›´çµæ´»ã€æ›´å¼ºå¤§çš„æ€§èƒ½ä¼˜åŒ–æ–¹æ¡ˆã€‚</p>
<h3 data-id="heading-2">äºŒã€Service Worker ç¼“å­˜æ ¸å¿ƒè®¤çŸ¥ï¼šå®ƒæ˜¯ä»€ä¹ˆï¼Ÿæ€ä¹ˆå·¥ä½œï¼Ÿ</h3>
<p>åœ¨æ·±å…¥ç¼“å­˜å®ç°å‰ï¼Œæˆ‘ä»¬å…ˆç†æ¸… Service Worker çš„æ ¸å¿ƒç‰¹æ€§ï¼Œè¿™æ˜¯ç†è§£å…¶ç¼“å­˜èƒ½åŠ›çš„åŸºç¡€ï¼š</p>
<h4 data-id="heading-3">1. ä»€ä¹ˆæ˜¯ Service Workerï¼Ÿ</h4>
<p>Service Workerï¼ˆç®€ç§° SWï¼‰æ˜¯æµè§ˆå™¨åœ¨åå°ç‹¬ç«‹è¿è¡Œçš„ã€Œæ— ç•Œé¢ JS çº¿ç¨‹ã€ï¼Œç‹¬ç«‹äºå½“å‰é¡µé¢ï¼Œå…·å¤‡ä»¥ä¸‹å…³é”®ç‰¹æ€§ï¼š</p>
<ul>
<li>åŸºäº HTTPS ç¯å¢ƒï¼ˆæœ¬åœ°å¼€å‘ localhost ä¾‹å¤–ï¼‰ï¼Œä¿éšœå®‰å…¨æ€§ï¼›</li>
<li>èƒ½æ‹¦æˆªå½“å‰åŸŸåä¸‹çš„æ‰€æœ‰ç½‘ç»œè¯·æ±‚ï¼ˆfetch/ajaxã€é™æ€èµ„æºã€æ¥å£ç­‰ï¼‰ï¼›</li>
<li>æ‹¥æœ‰ä¸“å±çš„æŒä¹…åŒ–ç¼“å­˜ä»“åº“ <code>Cache Storage</code>ï¼Œä¸å—é¡µé¢ç”Ÿå‘½å‘¨æœŸå½±å“ï¼›</li>
<li>é¡µé¢å…³é—­åä»å¯è¿è¡Œï¼Œæ”¯æŒç¦»çº¿æ¨é€ã€åå°åŒæ­¥ç­‰é«˜çº§èƒ½åŠ›ã€‚</li>
</ul>
<h4 data-id="heading-4">2. Service Worker ç¼“å­˜çš„æ ¸å¿ƒå·¥ä½œæµ</h4>
<p>SW ç¼“å­˜çš„æœ¬è´¨æ˜¯ã€Œæ‹¦æˆªè¯·æ±‚ + è‡ªå®šä¹‰å¤„ç†ã€ï¼Œæ ¸å¿ƒæµç¨‹å¦‚ä¸‹ï¼š</p>
<ol>
<li>é¡µé¢åŠ è½½æ—¶ï¼Œæ³¨å†Œå¹¶æ¿€æ´» Service Workerï¼›</li>
<li>å½“é¡µé¢å‘èµ·ç½‘ç»œè¯·æ±‚æ—¶ï¼Œè¯·æ±‚è¢« SW æ‹¦æˆªï¼›</li>
<li>å¼€å‘è€…é€šè¿‡ä»£ç å®šä¹‰ç¼“å­˜ç­–ç•¥ï¼ˆå¦‚â€œå…ˆæŸ¥ç¼“å­˜å†èµ°ç½‘ç»œâ€â€œå…ˆèµ°ç½‘ç»œå†è¡¥ç¼“å­˜â€ç­‰ï¼‰ï¼›</li>
<li>SW æ‰§è¡Œç­–ç•¥ï¼šä» <code>Cache Storage</code> è¯»å–ç¼“å­˜ï¼Œæˆ–å‘èµ·çœŸå®ç½‘ç»œè¯·æ±‚ï¼›</li>
<li>å°†ç»“æœï¼ˆç¼“å­˜æ•°æ®/ç½‘ç»œæ•°æ®ï¼‰è¿”å›ç»™é¡µé¢ï¼Œå¹¶æ ¹æ®ç­–ç•¥æ›´æ–°ç¼“å­˜ã€‚</li>
</ol>
<p>æ•´ä¸ªè¿‡ç¨‹å®Œå…¨ç”±å‰ç«¯ä»£ç æ§åˆ¶ï¼Œè¿™ä¹Ÿæ˜¯ SW ç¼“å­˜ç›¸è¾ƒäº HTTP ç¼“å­˜çš„æ ¸å¿ƒä¼˜åŠ¿ã€‚</p>
<h3 data-id="heading-5">ä¸‰ã€Service Worker ç¼“å­˜çš„æ ¸å¿ƒä»·å€¼ï¼šæ€§èƒ½ä¼˜åŒ–çš„å…³é”®åœºæ™¯</h3>
<p>SW ç¼“å­˜çš„ä»·å€¼ä¸ä»…æ˜¯â€œåŠ é€ŸåŠ è½½â€ï¼Œæ›´åœ¨äºè§£å†³ä¼ ç»Ÿç¼“å­˜æ— æ³•è¦†ç›–çš„ä¼˜åŒ–åœºæ™¯ï¼Œå…·ä½“å¯åˆ†ä¸ºä»¥ä¸‹ 4 ç±»ï¼š</p>
<h4 data-id="heading-6">1. çªç ´ç¼“å­˜é™åˆ¶ï¼šç¼“å­˜ä¼ ç»Ÿæ–¹æ¡ˆæä¸å®šçš„è¯·æ±‚</h4>
<p>è¿™æ˜¯ SW ç¼“å­˜æœ€ç›´è§‚çš„ä¼˜åŠ¿ã€‚å¯¹äº HTTP ç¼“å­˜é»˜è®¤ä¸æ”¯æŒçš„è¯·æ±‚ç±»å‹ï¼ŒSW éƒ½èƒ½è½»æ¾æå®šï¼š</p>
<ul>
<li><strong>POST æ¥å£ç¼“å­˜</strong>ï¼šHTTP ç¼“å­˜é»˜è®¤ä¸ç¼“å­˜ POST è¯·æ±‚ï¼ˆè®¤ä¸ºå…¶æ˜¯â€œæ•°æ®æäº¤â€æ“ä½œï¼‰ï¼Œä½† SW å¯æ‹¦æˆª POST è¯·æ±‚ï¼Œå°†ã€Œè¯·æ±‚ä½“ + å“åº”æ•°æ®ã€ä¸€èµ·å­˜å…¥ <code>Cache Storage</code>ï¼›</li>
<li><strong>å¸¦é‰´æƒçš„è¯·æ±‚ç¼“å­˜</strong>ï¼šå« Authorizationã€Token ç­‰è¯·æ±‚å¤´çš„æ¥å£ï¼ŒHTTP ç¼“å­˜ä¼šç›´æ¥è·³è¿‡ï¼ŒSW å¯æ­£å¸¸ç¼“å­˜ï¼›</li>
<li><strong>è·¨åŸŸè¯·æ±‚ç¼“å­˜</strong>ï¼šHTTP ç¼“å­˜å¯¹è·¨åŸŸèµ„æºçš„ç¼“å­˜æ”¯æŒæœ‰é™ï¼ŒSW å¯é€šè¿‡ CORS æ­£å¸¸æ‹¦æˆªå¹¶ç¼“å­˜è·¨åŸŸæ¥å£/èµ„æºï¼›</li>
<li><strong>åŠ¨æ€å‚æ•°è¯·æ±‚ç¼“å­˜</strong>ï¼šå¦‚ <code>/api/list?_t=1699999999</code> è¿™ç±»å¸¦éšæœºå‚æ•°çš„è¯·æ±‚ï¼ŒHTTP ç¼“å­˜ä¼šè®¤ä¸ºæ˜¯ä¸åŒè¯·æ±‚è€Œé‡å¤åŠ è½½ï¼ŒSW å¯è‡ªå®šä¹‰è§„åˆ™å¿½ç•¥æ— æ•ˆå‚æ•°ï¼Œåˆå¹¶ç¼“å­˜ã€‚</li>
</ul>
<h4 data-id="heading-7">2. çµæ´»ç¼“å­˜ç­–ç•¥ï¼šé€‚é…ä¸åŒä¸šåŠ¡åœºæ™¯çš„æ€§èƒ½ä¼˜åŒ–</h4>
<p>HTTP ç¼“å­˜åªæœ‰â€œå¼ºç¼“å­˜ â†’ åå•†ç¼“å­˜â€ä¸€ç§å›ºå®šé€»è¾‘ï¼Œè€Œ SW æ”¯æŒå¤šç§ç»å…¸ç¼“å­˜ç­–ç•¥ï¼Œå¯æ ¹æ®èµ„æºç±»å‹ç²¾å‡†é€‚é…ï¼š</p>
<h5 data-id="heading-8">ç­–ç•¥ 1ï¼šCache Firstï¼ˆç¼“å­˜ä¼˜å…ˆï¼‰â€”â€” é€‚ç”¨äºä¸å¸¸æ›´æ–°çš„é™æ€èµ„æº</h5>
<p>æ ¸å¿ƒé€»è¾‘ï¼šä¼˜å…ˆä»ç¼“å­˜è¯»å–èµ„æºï¼Œæ— ç¼“å­˜æ—¶æ‰èµ°ç½‘ç»œï¼Œæ‹¿åˆ°ç½‘ç»œæ•°æ®åæ›´æ–°ç¼“å­˜ã€‚ é€‚ç”¨åœºæ™¯ï¼šå­—ä½“æ–‡ä»¶ã€å›¾æ ‡åº“ã€ç¬¬ä¸‰æ–¹ SDKã€ä¸å¸¸æ›´æ–°çš„å›¾ç‰‡ç­‰ã€‚ ä¼˜åŠ¿ï¼šåŠ è½½é€Ÿåº¦æœ€å¿«ï¼Œå‡å°‘ç½‘ç»œè¯·æ±‚æ¬¡æ•°ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç¼“å­˜ä¼˜å…ˆç­–ç•¥ç¤ºä¾‹</span>
self.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'fetch'</span>, <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
  <span class="hljs-comment">// å¯¹é™æ€èµ„æºåº”ç”¨ç¼“å­˜ä¼˜å…ˆ</span>
  <span class="hljs-keyword">if</span> (event.<span class="hljs-property">request</span>.<span class="hljs-property">url</span>.<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/.(png|jpg|font|js)$/</span>)) {
    event.<span class="hljs-title function_">respondWith</span>(
      caches.<span class="hljs-title function_">match</span>(event.<span class="hljs-property">request</span>)
        .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">cacheRes</span> =&gt;</span> {
          <span class="hljs-comment">// æœ‰ç¼“å­˜ç›´æ¥è¿”å›ï¼Œæ— ç¼“å­˜åˆ™å‘èµ·ç½‘ç»œè¯·æ±‚</span>
          <span class="hljs-keyword">return</span> cacheRes || <span class="hljs-title function_">fetch</span>(event.<span class="hljs-property">request</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">networkRes</span> =&gt;</span> {
            <span class="hljs-comment">// æ›´æ–°ç¼“å­˜</span>
            caches.<span class="hljs-title function_">open</span>(<span class="hljs-string">'static-cache-v1'</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">cache</span> =&gt;</span> {
              cache.<span class="hljs-title function_">put</span>(event.<span class="hljs-property">request</span>, networkRes.<span class="hljs-title function_">clone</span>());
            });
            <span class="hljs-keyword">return</span> networkRes;
          });
        })
    );
  }
});
</code></pre>
<h5 data-id="heading-9">ç­–ç•¥ 2ï¼šNetwork Firstï¼ˆç½‘ç»œä¼˜å…ˆï¼‰â€”â€” é€‚ç”¨äºåŠ¨æ€æ¥å£æ•°æ®</h5>
<p>æ ¸å¿ƒé€»è¾‘ï¼šä¼˜å…ˆå‘èµ·ç½‘ç»œè¯·æ±‚ï¼Œæ‹¿åˆ°æœ€æ–°æ•°æ®åæ›´æ–°ç¼“å­˜ï¼›è‹¥ç½‘ç»œå¤±è´¥ï¼ˆæ–­ç½‘/è¶…æ—¶ï¼‰ï¼Œåˆ™è¿”å›ç¼“å­˜æ•°æ®å…œåº•ã€‚ é€‚ç”¨åœºæ™¯ï¼šåˆ—è¡¨æ¥å£ã€è¯¦æƒ…æ¥å£ç­‰éœ€è¦å®æ—¶æ›´æ–°çš„æ•°æ®ã€‚ ä¼˜åŠ¿ï¼šä¿è¯æ•°æ®æ–°é²œåº¦ï¼ŒåŒæ—¶å®ç°æ–­ç½‘é™çº§ï¼Œé¿å…é¡µé¢ç™½å±ã€‚</p>
<h5 data-id="heading-10">ç­–ç•¥ 3ï¼šStale-While-Revalidateï¼ˆç¼“å­˜å…œåº• + åå°æ›´æ–°ï¼‰â€”â€” æ€§èƒ½ä¸æ–°é²œåº¦å…¼é¡¾</h5>
<p>è¿™æ˜¯å‰ç«¯æ€§èƒ½ä¼˜åŒ–çš„ã€Œé»„é‡‘ç­–ç•¥ã€ï¼Œæ ¸å¿ƒé€»è¾‘ï¼š 1. é¡µé¢è¯·æ±‚æ—¶ï¼Œç«‹å³è¿”å›ç¼“å­˜æ•°æ®ï¼ˆç”¨æˆ·æ— æ„ŸçŸ¥ç­‰å¾…ï¼‰ï¼› 2. åŒæ—¶åœ¨åå°å‘èµ·ç½‘ç»œè¯·æ±‚ï¼Œè·å–æœ€æ–°æ•°æ®ï¼› 3. ç”¨æœ€æ–°æ•°æ®æ›´æ–°ç¼“å­˜ï¼Œä¾›ä¸‹æ¬¡è¯·æ±‚ä½¿ç”¨ã€‚ é€‚ç”¨åœºæ™¯ï¼šé¦–é¡µæ ¸å¿ƒæ•°æ®ã€ä¸ªäººä¸­å¿ƒä¿¡æ¯ç­‰å¯¹åŠ è½½é€Ÿåº¦å’Œæ–°é²œåº¦éƒ½æœ‰è¦æ±‚çš„åœºæ™¯ã€‚ ä¼˜åŠ¿ï¼šå®Œç¾å¹³è¡¡â€œåŠ è½½é€Ÿåº¦â€å’Œâ€œæ•°æ®æ—¶æ•ˆæ€§â€ï¼Œç”¨æˆ·ä½“éªŒæ‹‰æ»¡ã€‚</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// ç¼“å­˜å…œåº•æ›´æ–°ç­–ç•¥ç¤ºä¾‹</span>
self.addEventListener(<span class="hljs-string">'fetch'</span>, (<span class="hljs-keyword">event</span>) =&gt; {
  <span class="hljs-comment">// å¯¹æ ¸å¿ƒæ¥å£åº”ç”¨ stale-while-revalidate</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">event</span>.request.url.includes(<span class="hljs-string">'/api/core/'</span>)) {
    <span class="hljs-keyword">event</span>.respondWith(
      caches.match(<span class="hljs-keyword">event</span>.request).then(cacheRes =&gt; {
        <span class="hljs-comment">// å¹¶è¡Œå‘èµ·ç½‘ç»œè¯·æ±‚</span>
        <span class="hljs-keyword">const</span> networkPromise = fetch(<span class="hljs-keyword">event</span>.request).then(networkRes =&gt; {
          <span class="hljs-comment">// æ›´æ–°ç¼“å­˜</span>
          caches.open(<span class="hljs-string">'api-cache-v1'</span>).then(cache =&gt; {
            cache.put(<span class="hljs-keyword">event</span>.request, networkRes.clone());
          });
          <span class="hljs-keyword">return</span> networkRes;
        });
        <span class="hljs-comment">// æœ‰ç¼“å­˜å…ˆè¿”å›ç¼“å­˜ï¼Œæ— ç¼“å­˜åˆ™ç­‰ç½‘ç»œè¯·æ±‚</span>
        <span class="hljs-keyword">return</span> cacheRes || networkPromise;
      })
    );
  }
});
</code></pre>
<h5 data-id="heading-11">ç­–ç•¥ 4ï¼šCache Onlyï¼ˆä»…ç¼“å­˜ï¼‰â€”â€” é€‚ç”¨äºç¦»çº¿èµ„æº</h5>
<p>æ ¸å¿ƒé€»è¾‘ï¼šåªä»ç¼“å­˜è¯»å–èµ„æºï¼Œä¸å‘èµ·ä»»ä½•ç½‘ç»œè¯·æ±‚ã€‚ é€‚ç”¨åœºæ™¯ï¼šç¦»çº¿é¡µé¢çš„é™æ€èµ„æºï¼ˆå¦‚ç¦»çº¿æç¤ºå›¾ã€ç¦»çº¿æ–‡æ¡ˆï¼‰ã€‚ ä¼˜åŠ¿ï¼šç¡®ä¿æ–­ç½‘æ—¶é¡µé¢ä»èƒ½æ­£å¸¸å±•ç¤ºåŸºç¡€å†…å®¹ã€‚</p>
<h4 data-id="heading-12">3. ç¦»çº¿å¯ç”¨ï¼šä»â€œåŠ é€Ÿâ€åˆ°â€œå¯ç”¨â€çš„ä½“éªŒå‡çº§</h4>
<p>è¿™æ˜¯ SW ç¼“å­˜æœ€å…·æ ‡å¿—æ€§çš„èƒ½åŠ›ã€‚HTTP ç¼“å­˜åªèƒ½â€œåŠ é€ŸåŠ è½½â€ï¼Œè€Œ SW ç¼“å­˜èƒ½è®©åº”ç”¨åœ¨æ–­ç½‘æ—¶ä¾ç„¶å¯ç”¨ï¼š</p>
<ul>
<li>ç¼“å­˜é¦–é¡µéª¨æ¶å±ã€æ ¸å¿ƒæ ·å¼ã€åŸºç¡€ JSï¼Œæ–­ç½‘æ—¶ç”¨æˆ·æ‰“å¼€é¡µé¢ä»èƒ½çœ‹åˆ°å®Œæ•´çš„åŸºç¡€ç»“æ„ï¼›</li>
<li>ç¼“å­˜å†å²æ¥å£æ•°æ®ï¼Œæ–­ç½‘æ—¶ç”¨æˆ·å¯æŸ¥çœ‹ä¹‹å‰åŠ è½½è¿‡çš„åˆ—è¡¨ã€è¯¦æƒ…ç­‰å†…å®¹ï¼›</li>
<li>é…åˆ <code>Workbox</code> ç­‰å·¥å…·ï¼Œå¯å¿«é€Ÿå®ç° PWAï¼ˆæ¸è¿›å¼ Web åº”ç”¨ï¼‰çš„ç¦»çº¿è®¿é—®èƒ½åŠ›ã€‚</li>
</ul>
<h4 data-id="heading-13">4. ç²¾ç»†åŒ–ç¼“å­˜ç®¡ç†ï¼šé¿å…ç¼“å­˜æ±¡æŸ“ä¸å†—ä½™</h4>
<p>HTTP ç¼“å­˜çš„æœ€å¤§ç—›ç‚¹ä¹‹ä¸€æ˜¯â€œæ— æ³•æ‰‹åŠ¨ç®¡ç†â€ï¼Œè€Œ SW å¯é€šè¿‡ <code>Cache API</code> å®ç°å¯¹ç¼“å­˜çš„å®Œå…¨æŒæ§ï¼š</p>
<ul>
<li><strong>ç¼“å­˜ç‰ˆæœ¬æ§åˆ¶</strong>ï¼šç»™ç¼“å­˜å‘½åæ—¶æ·»åŠ ç‰ˆæœ¬å·ï¼ˆå¦‚ <code>static-cache-v1</code>ï¼‰ï¼Œé¡µé¢è¿­ä»£æ—¶ï¼Œé€šè¿‡ä»£ç åˆ é™¤æ—§ç‰ˆæœ¬ç¼“å­˜ï¼Œé¿å…ç¼“å­˜æ±¡æŸ“ï¼›</li>
<li><strong>ç²¾å‡†æ¸…ç†ç¼“å­˜</strong>ï¼šå¯æ ¹æ®èµ„æºè·¯å¾„ã€è¯·æ±‚ç±»å‹æ‰‹åŠ¨åˆ é™¤æŒ‡å®šç¼“å­˜ï¼ˆå¦‚åˆ é™¤æŸä¸ªè¿‡æœŸçš„æ¥å£ç¼“å­˜ï¼‰ï¼›</li>
<li><strong>ç¼“å­˜å®¹é‡æ§åˆ¶</strong>ï¼šå®šæœŸæ¸…ç†é•¿æœŸæœªä½¿ç”¨çš„ç¼“å­˜ï¼Œé¿å…å ç”¨è¿‡å¤šæµè§ˆå™¨ç©ºé—´ã€‚</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ¸…ç†æ—§ç‰ˆæœ¬ç¼“å­˜ç¤ºä¾‹</span>
self.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'activate'</span>, <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
  event.<span class="hljs-title function_">waitUntil</span>(
    caches.<span class="hljs-title function_">keys</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">cacheNames</span> =&gt;</span> {
      <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>(
        cacheNames.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">cacheName</span> =&gt;</span> {
          <span class="hljs-comment">// åˆ é™¤éå½“å‰ç‰ˆæœ¬çš„ç¼“å­˜</span>
          <span class="hljs-keyword">if</span> (cacheName !== <span class="hljs-string">'static-cache-v1'</span> &amp;&amp; cacheName !== <span class="hljs-string">'api-cache-v1'</span>) {
            <span class="hljs-keyword">return</span> caches.<span class="hljs-title function_">delete</span>(cacheName);
          }
        })
      );
    })
  );
});
</code></pre>
<h3 data-id="heading-14">å››ã€æœ€ä½³å®è·µï¼šService Worker ç¼“å­˜ä¸ HTTP ç¼“å­˜çš„ååŒä¼˜åŒ–</h3>
<p>å¾ˆå¤šå¼€å‘è€…ä¼šè¯¯ä»¥ä¸ºâ€œç”¨äº† SW å°±ä¸ç”¨ HTTP ç¼“å­˜äº†â€ï¼Œä½†å®é™…ä¸Šï¼ŒäºŒè€…æ˜¯ã€Œåˆ†å±‚ç¼“å­˜ã€çš„å…³ç³»ï¼Œæœ€ä½³å®è·µæ˜¯ã€ŒHTTP ç¼“å­˜å…œåº• + SW ç¼“å­˜å¢å¼ºã€ï¼ŒåŸå› å¦‚ä¸‹ï¼š</p>
<p>SW æ˜¯åœ¨ HTTP ç¼“å­˜ä¹‹åæ‹¦æˆªè¯·æ±‚çš„ï¼šå¦‚æœä¸€ä¸ªè¯·æ±‚å‘½ä¸­äº† HTTP å¼ºç¼“å­˜ï¼Œè¯·æ±‚æ ¹æœ¬ä¸ä¼šèµ°åˆ° SWï¼Œç›´æ¥ä»æµè§ˆå™¨å†…å­˜/ç£ç›˜è¿”å›ï¼Œæ•ˆç‡æœ€é«˜ï¼›åªæœ‰å½“ HTTP ç¼“å­˜å¤±æ•ˆï¼ˆå¼ºç¼“å­˜è¿‡æœŸã€åå•†ç¼“å­˜å‘½ä¸­ 304ï¼‰æ—¶ï¼Œè¯·æ±‚æ‰ä¼šè¢« SW æ‹¦æˆªï¼Œå†æ‰§è¡Œ SW çš„ç¼“å­˜ç­–ç•¥ã€‚</p>
<h4 data-id="heading-15">å…·ä½“ååŒæ–¹æ¡ˆ</h4>
<ol>
<li>
<p><strong>HTTP ç¼“å­˜è´Ÿè´£é™æ€èµ„æºå…œåº•</strong>ï¼š</p>
<ol>
<li>ä¸å¸¸æ›´æ–°çš„èµ„æºï¼ˆå­—ä½“ã€ç¬¬ä¸‰æ–¹åº“ï¼‰ï¼šè®¾ç½® <code>Cache-Control: max-age=31536000</code>ï¼ˆæ°¸ä¹…å¼ºç¼“å­˜ï¼‰ï¼›</li>
<li>å¸¸æ›´æ–°çš„èµ„æºï¼ˆä¸šåŠ¡ JS/CSSï¼‰ï¼šè®¾ç½® <code>Cache-Control: max-age=0, must-revalidate</code>ï¼ˆåå•†ç¼“å­˜ï¼‰ï¼Œé…åˆ Etag/Last-Modified éªŒè¯èµ„æºæ˜¯å¦æ›´æ–°ã€‚</li>
</ol>
</li>
<li>
<p><strong>SW ç¼“å­˜è´Ÿè´£è¿›é˜¶ä¼˜åŒ–</strong>ï¼š</p>
<ol>
<li>ç¼“å­˜ HTTP ç¼“å­˜æä¸å®šçš„è¯·æ±‚ï¼ˆPOST æ¥å£ã€å¸¦é‰´æƒæ¥å£ç­‰ï¼‰ï¼›</li>
<li>å¯¹æ ¸å¿ƒé™æ€èµ„æºï¼ˆå¦‚é¦–é¡µ JS/CSSï¼‰å åŠ  SW ç¼“å­˜ï¼Œå®ç°â€œåŒé‡ä¿é™©â€ï¼›</li>
<li>ç”¨ Stale-While-Revalidate ç­–ç•¥ä¼˜åŒ–æ ¸å¿ƒæ¥å£ï¼Œå…¼é¡¾é€Ÿåº¦ä¸æ–°é²œåº¦ï¼›</li>
<li>ç¼“å­˜ç¦»çº¿æ‰€éœ€çš„åŸºç¡€èµ„æºï¼Œå®ç°ç¦»çº¿è®¿é—®ã€‚</li>
</ol>
</li>
</ol>
<h3 data-id="heading-16">äº”ã€å·¥å…·æ¨èï¼šé™ä½ Service Worker å¼€å‘æˆæœ¬</h3>
<p>æ‰‹åŠ¨ç¼–å†™ Service Worker ä»£ç éœ€è¦å¤„ç†æ³¨å†Œã€æ¿€æ´»ã€ç¼“å­˜ç­–ç•¥ã€ç‰ˆæœ¬ç®¡ç†ç­‰è¯¸å¤šç»†èŠ‚ï¼Œæ¨èä½¿ç”¨æˆç†Ÿå·¥å…·ç®€åŒ–å¼€å‘ï¼š</p>
<ul>
<li><strong>Workbox</strong>ï¼šGoogle å®˜æ–¹æ¨å‡ºçš„ SW å¼€å‘å·¥å…·åº“ï¼Œå†…ç½®äº†å¤šç§ç¼“å­˜ç­–ç•¥ï¼ˆå¦‚ <code>CacheFirst</code>ã€<code>NetworkFirst</code>ï¼‰ï¼Œæ”¯æŒè‡ªåŠ¨ç¼“å­˜æ‰“åŒ…åçš„é™æ€èµ„æºï¼Œè¿˜èƒ½å¤„ç†ç¼“å­˜æ›´æ–°ã€è¿‡æœŸæ¸…ç†ç­‰é—®é¢˜ï¼Œå¼€ç®±å³ç”¨ï¼›</li>
<li><strong>Create React App/Vite</strong>ï¼šä¸»æµæ„å»ºå·¥å…·å†…ç½®äº† SW æ”¯æŒï¼Œå¯é€šè¿‡ç®€å•é…ç½®å¯ç”¨ï¼ˆå¦‚ CRA çš„ <code>serviceWorker: true</code>ï¼‰ï¼Œè‡ªåŠ¨ç”ŸæˆåŸºç¡€çš„ SW ç¼“å­˜é€»è¾‘ï¼›</li>
<li><strong>Lighthouse</strong>ï¼šGoogle æ€§èƒ½æ£€æµ‹å·¥å…·ï¼Œå¯æ£€æµ‹ SW çš„é…ç½®æ˜¯å¦åˆç†ã€ç¦»çº¿èƒ½åŠ›æ˜¯å¦è¾¾æ ‡ï¼Œæä¾›ä¼˜åŒ–å»ºè®®ã€‚</li>
</ul>
<h3 data-id="heading-17">å…­ã€æ³¨æ„äº‹é¡¹ä¸é¿å‘æŒ‡å—</h3>
<ol>
<li><strong>HTTPS ç¯å¢ƒè¦æ±‚</strong>ï¼šé™¤ localhost å¤–ï¼ŒSW ä»…åœ¨ HTTPS ç¯å¢ƒä¸‹ç”Ÿæ•ˆï¼ˆä¿éšœè¯·æ±‚æ‹¦æˆªçš„å®‰å…¨æ€§ï¼‰ï¼Œç”Ÿäº§ç¯å¢ƒéœ€éƒ¨ç½² HTTPSï¼›</li>
<li><strong>ç¼“å­˜æ›´æ–°é—®é¢˜</strong>ï¼šSW æ¿€æ´»åä¼šæŒç»­è¿è¡Œï¼Œè‹¥ä¿®æ”¹äº† SW ä»£ç ï¼Œéœ€é€šè¿‡â€œç‰ˆæœ¬å·æ›´æ–°â€è§¦å‘é‡æ–°æ³¨å†Œï¼ˆå¦‚ä¿®æ”¹ç¼“å­˜åç§°çš„ç‰ˆæœ¬å·ï¼‰ï¼›</li>
<li><strong>é¿å…è¿‡åº¦ç¼“å­˜</strong>ï¼šä¸è¦ç¼“å­˜æ‰€æœ‰è¯·æ±‚ï¼ˆå¦‚ç™»å½•æ¥å£ã€å®æ—¶æ”¯ä»˜æ¥å£ï¼‰ï¼Œéœ€æ ¹æ®ä¸šåŠ¡åœºæ™¯ç²¾å‡†ç­›é€‰ç¼“å­˜èŒƒå›´ï¼›</li>
<li><strong>å…¼å®¹æ€§å¤„ç†</strong>ï¼šéƒ¨åˆ†è€æ—§æµè§ˆå™¨ï¼ˆå¦‚ IE å…¨ç³»åˆ—ï¼‰ä¸æ”¯æŒ Service Workerï¼Œéœ€åšé™çº§å¤„ç†ï¼ˆæ£€æµ‹ SW æ”¯æŒæ€§ï¼Œä¸æ”¯æŒåˆ™èµ°ä¼ ç»Ÿç¼“å­˜ï¼‰ï¼›</li>
<li><strong>è°ƒè¯•æŠ€å·§</strong>ï¼šåœ¨ Chrome å¼€å‘è€…å·¥å…·çš„ã€ŒApplication â†’ Service Workersã€é¢æ¿ï¼Œå¯æŸ¥çœ‹ SW çŠ¶æ€ã€æ‰‹åŠ¨è§¦å‘æ›´æ–°ã€æ¸…é™¤ç¼“å­˜ï¼Œæ–¹ä¾¿è°ƒè¯•ã€‚</li>
</ol>
<h3 data-id="heading-18">ä¸ƒã€æ€»ç»“</h3>
<p>Service Worker ç¼“å­˜å¹¶éå¯¹ä¼ ç»Ÿç¼“å­˜çš„æ›¿ä»£ï¼Œè€Œæ˜¯å‰ç«¯æ€§èƒ½ä¼˜åŒ–çš„ã€Œè¿›é˜¶è¡¥å……ã€ã€‚å®ƒçš„æ ¸å¿ƒä»·å€¼åœ¨äºã€Œå‰ç«¯å®Œå…¨æŒæ§ç¼“å­˜é€»è¾‘ã€ï¼Œæ—¢èƒ½çªç ´ HTTP ç¼“å­˜çš„å±€é™ï¼Œç¼“å­˜ä¼ ç»Ÿæ–¹æ¡ˆæä¸å®šçš„è¯·æ±‚ï¼Œåˆèƒ½é€šè¿‡çµæ´»çš„ç­–ç•¥é€‚é…ä¸åŒä¸šåŠ¡åœºæ™¯ï¼Œç”šè‡³å®ç°ç¦»çº¿è®¿é—®èƒ½åŠ›ã€‚</p>
<p>åœ¨å®é™…å¼€å‘ä¸­ï¼Œåªè¦åˆç†æ­é…ã€ŒHTTP ç¼“å­˜å…œåº• + SW ç¼“å­˜å¢å¼ºã€çš„åˆ†å±‚æ–¹æ¡ˆï¼Œå°±èƒ½åœ¨ä¿è¯æ€§èƒ½çš„åŒæ—¶ï¼Œæœ€å¤§åŒ–æå‡ç”¨æˆ·ä½“éªŒã€‚å¯¹äºè¿½æ±‚æè‡´æ€§èƒ½çš„å‰ç«¯åº”ç”¨ï¼ˆå¦‚ç§»åŠ¨ç«¯ H5ã€PWAã€ç”µå•†é¦–é¡µï¼‰ï¼ŒService Worker ç¼“å­˜ç»å¯¹æ˜¯å€¼å¾—æŠ•å…¥çš„ä¼˜åŒ–æ‰‹æ®µã€‚</p>
<p>æœ€åï¼Œé™„ä¸Šä¸€å¥å®è·µå¿ƒå¾—ï¼šç¼“å­˜çš„æœ¬è´¨æ˜¯ã€Œç”¨ç©ºé—´æ¢æ—¶é—´ã€ï¼Œè€Œ Service Worker è®©æˆ‘ä»¬èƒ½æ›´èªæ˜åœ°â€œæ¢â€â€”â€”ç²¾å‡†ç¼“å­˜éœ€è¦çš„èµ„æºï¼Œçµæ´»æ§åˆ¶ç¼“å­˜ç”Ÿå‘½å‘¨æœŸï¼Œè®©æ¯ä¸€ä»½ç¼“å­˜éƒ½èƒ½å‘æŒ¥æœ€å¤§çš„ä»·å€¼ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[2026å¹´å¦‚ä½•ä½¿ç”¨è°·æ­ŒGeminiï¼Œæ‰‹æŠŠæ‰‹æ•™ä½ å¦‚ä½•å‡çº§è°·æ­ŒGemini Proè®¢é˜…ï¼Œä½“éªŒæœ€æ–°çš„è°·æ­ŒAIå¤§æ¨¡å‹ï¼]]></title>    <link>https://juejin.cn/post/7594028166135545856</link>    <guid>https://juejin.cn/post/7594028166135545856</guid>    <pubDate>2026-01-12T12:06:48.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594028166135545856" data-draft-id="7594262760940126242" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="2026å¹´å¦‚ä½•ä½¿ç”¨è°·æ­ŒGeminiï¼Œæ‰‹æŠŠæ‰‹æ•™ä½ å¦‚ä½•å‡çº§è°·æ­ŒGemini Proè®¢é˜…ï¼Œä½“éªŒæœ€æ–°çš„è°·æ­ŒAIå¤§æ¨¡å‹ï¼"/> <meta itemprop="keywords" content="Gemini"/> <meta itemprop="datePublished" content="2026-01-12T12:06:48.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Macçš„å®éªŒå®¤"/> <meta itemprop="url" content="https://juejin.cn/user/2958128164897127"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            2026å¹´å¦‚ä½•ä½¿ç”¨è°·æ­ŒGeminiï¼Œæ‰‹æŠŠæ‰‹æ•™ä½ å¦‚ä½•å‡çº§è°·æ­ŒGemini Proè®¢é˜…ï¼Œä½“éªŒæœ€æ–°çš„è°·æ­ŒAIå¤§æ¨¡å‹ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2958128164897127/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Macçš„å®éªŒå®¤
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-12T12:06:48.000Z" title="Mon Jan 12 2026 12:06:48 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¾ˆå¤šåŒå­¦å› ä¸ºå†™è®ºæ–‡è¦ç”¨åˆ°è°·æ­ŒGeminiï¼Œä½†æ‰“å¼€Geminiç”¨ä¸äº†ï¼Œæ— æ³•ç™»é™†ä½¿ç”¨Geminiï¼Œæç¤ºã€something went wrongã€‘å‡ºäº†ç‚¹é—®é¢˜ï¼Œå¯¼è‡´æ— æ³•æ­£å¸¸ä½¿ç”¨Geminiç½‘é¡µï¼Œä»Šå¤©æ•™å¤§å®¶ç›´æ¥å‡çº§Gemini Proå°±å¯ä»¥è§£å†³ç½‘é¡µæ‰“ä¸å¼€æ— æ³•ä½¿ç”¨çš„é—®é¢˜ï¼</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6c8a34a248484d169f7d06eaf7a4f9ae~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWFj55qE5a6e6aqM5a6k:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768824408&amp;x-signature=QN21ULiwWx8q8GJQQAkCx2L3zkc%3D" alt="" loading="lazy"/></p>
<p>Googleæ¨å‡ºäº†é’ˆå¯¹ç¾å›½æœ¬åœŸå­¦ç”Ÿçš„ç¦åˆ©ä¼˜æƒ æ–¹æ¡ˆï¼Œä½¿ç”¨ç¾å›½çš„æ•™è‚²é‚®ç®±è®¤è¯åå¯ä»¥<strong>å…è´¹é¢†å–12ä¸ªæœˆGoogle AI proå¥—é¤ç¦åˆ©ï¼</strong></p>
<p><strong>æ€»ä»·å€¼çº¦240ç¾å…ƒï¼ˆçº¦åˆäººæ°‘å¸1680å…ƒï¼‰</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bfd5263beaf542eb9856b4c55bb8dd4a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWFj55qE5a6e6aqM5a6k:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768824408&amp;x-signature=dltHFHRfbymyKzGlUR3jIJS%2FkKc%3D" alt="" loading="lazy"/></p>
<p><strong>Google AI proæƒç›Š</strong></p>
<p><strong>1ã€æ— é™åˆ¶ä½¿ç”¨Gemini 3.0pro</strong></p>
<p>ç›¸æ¯”å…è´¹ç‰ˆï¼Œå®ƒåœ¨é€»è¾‘æ¨ç†ã€ä»£ç ç¼–å†™å’Œå¤šæ¨¡æ€ï¼ˆå›¾ç‰‡/è§†é¢‘ï¼‰ç†è§£ä¸Šæ›´å¼ºã€‚</p>
<p>ä½¿ç”¨æ–¹æ³•ï¼Œæ‰“å¼€geminiå®˜æ–¹åœ¨å¯¹è¯æ¡†å³ä¸‹è§’é€‰æ‹©proæ¨¡å‹å¯¹è¯å³å¯ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/985bfadc51414aae8f9869ff737fac0b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWFj55qE5a6e6aqM5a6k:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768824408&amp;x-signature=qGq2fC%2BhQmu2bUXy1LJe99nimxs%3D" alt="" loading="lazy"/></p>
<p><strong>2ã€æ— é™åˆ¶ä½¿ç”¨Gemini3.0 flash</strong></p>
<p>ç”¨äºå¤„ç†æ›´å¿«é€Ÿã€ä½å»¶è¿Ÿçš„ä»»åŠ¡ã€‚</p>
<p>ä½¿ç”¨æ–¹æ³•ï¼Œæ‰“å¼€geminiå®˜æ–¹åœ¨å¯¹è¯æ¡†å³ä¸‹è§’é€‰æ‹©fastæ¨¡å‹å¯¹è¯å³å¯ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/83422f9c576c4ae5a2f76ecd23d1adc5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWFj55qE5a6e6aqM5a6k:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768824408&amp;x-signature=LTzogR1ov7ohNqX7i2qkObRHQ1A%3D" alt="" loading="lazy"/></p>
<p><strong>3ã€100æ¬¡/å¤©çš„Nano banana proä½¿ç”¨æƒç›Š</strong></p>
<p>å…è´¹ç‰ˆä»…æœ‰3æ¬¡/å¤©çš„ä½¿ç”¨æƒç›Šã€‚</p>
<p>Nano banana proæ”¯æŒ 2K åˆ° 4K çš„è¶…é«˜æ¸…åˆ†è¾¨ç‡ï¼ˆå…è´¹ç‰ˆé€šå¸¸é™åˆ¶åœ¨ 1MP å·¦å³ï¼‰ã€‚</p>
<p>ä½¿ç”¨æ–¹æ³•ï¼Œåœ¨å·¥å…·ç®±é€‰æ‹©Creat imagesï¼Œç„¶åç›´æ¥å‘é€AIç”Ÿå›¾æç¤ºè¯ï¼Œè€å¿ƒç­‰å¾…å³å¯ç”Ÿæˆã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3402e1bd378a4884a3ef823fc55df523~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWFj55qE5a6e6aqM5a6k:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768824408&amp;x-signature=ipySyN910AuzseYYSQmkc2qaIKc%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b46e0e6045244d39a9a9937cb447afde~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWFj55qE5a6e6aqM5a6k:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768824408&amp;x-signature=N%2B%2FzOpOoCMYwWx5mvkee1YX%2BAU0%3D" alt="" loading="lazy"/></p>
<p><strong>4ã€Veo3.1ç”Ÿè§†é¢‘æ¨¡å‹ä½¿ç”¨æƒé™</strong></p>
<p>æ¯å¤©çº¦3æ¬¡è§†é¢‘ç”Ÿæˆæ¬¡æ•°</p>
<p>ä½¿ç”¨æ–¹æ³•ï¼Œåœ¨ä¸»é¡µå·¥å…·ç®±ç‚¹å‡»Create videosï¼ˆVeo3.1ï¼‰ï¼Œç„¶åè¾“å…¥æç¤ºè¯å³å¯ç”Ÿæˆã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/82e886a9efe2422b9eb397c54e206be3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWFj55qE5a6e6aqM5a6k:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768824408&amp;x-signature=MH9H32pKsinfJtyxVwANt859fVY%3D" alt="" loading="lazy"/></p>
<p><strong>5ã€NotebookLM é«˜çº§ç‰ˆ</strong></p>
<p>åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Flink.zhihu.com%2F%3Ftarget%3Dhttps%253A%2F%2Fnotebooklm.google.com" target="_blank" title="https://link.zhihu.com/?target=https%3A//notebooklm.google.com" ref="nofollow noopener noreferrer">notebooklm.google.com</a></p>
<p>æ›´é«˜çš„å­˜å‚¨é™é¢ï¼ˆä¸Šä¼ æ›´å¤šæ–‡çŒ®/æ•™æï¼‰ï¼Œæ›´é•¿çš„ä¸Šä¸‹æ–‡çª—å£ï¼Œé€‚åˆåšé•¿ç¯‡è®ºæ–‡åˆ†æå’Œç”Ÿæˆæ’­å®¢å¼å­¦ä¹ æŒ‡å—ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3276df23a43847e38c1f752b5e6921ea~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWFj55qE5a6e6aqM5a6k:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768824408&amp;x-signature=QnnD%2FiTuebv8Pfv4XEAWEYNDVDQ%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/415e1a737058465b9081ad97993dc7ba~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWFj55qE5a6e6aqM5a6k:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768824408&amp;x-signature=pBIfu2Atw8mSfKdnPLLjPr64grU%3D" alt="" loading="lazy"/></p>
<p><strong>6ã€Google Antigravityï¼ˆæ— é™åˆ¶ä½¿ç”¨Gemini 3.0 proæ¨¡å‹æƒé™ï¼‰</strong></p>
<p>è¿™æ˜¯ Google åœ¨2025å¹´åº•æ¨å‡ºçš„æ–°ä¸€ä»£ AI åŸç”Ÿç¼–ç¨‹ IDEï¼ˆç±»ä¼¼ Cursor æˆ– Windsurfï¼Œä½†æ›´å¼ºè°ƒ Agent æ™ºèƒ½ä½“èƒ½åŠ›ï¼‰ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/65db58d178864d3e947f1ce448bb088a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWFj55qE5a6e6aqM5a6k:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768824408&amp;x-signature=TT%2BjWwS1ID9zESfD13vlM%2Bp5YQM%3D" alt="" loading="lazy"/></p>
<p>é¢†å–çš„è¯¥å¥—é¤ä¼˜æƒ ä¸­åŒ…å«è¯¥å·¥å…·çš„é«˜çº§ä½¿ç”¨æƒé™ï¼Œç”±äºè¯¥å·¥å…·ç›®å‰å¤„äº Public Preview (å…¬å¼€é¢„è§ˆ) é˜¶æ®µï¼Œæ‰€ä»¥å¯ä»¥æ— é™åˆ¶ä½¿ç”¨Gemini 3.0 proæ¨¡å‹æ¥è¿›è¡Œä»£ç ç”Ÿæˆã€é‡æ„å’Œ Agent ä»»åŠ¡è§„åˆ’ã€‚</p>
<p>æ™®é€šå­¦ç”Ÿç”¨æˆ·çš„æ—¥å¸¸å¼€å‘ä½¿ç”¨ï¼ˆå¦‚å†™ä½œä¸šã€åšé¡¹ç›®ï¼‰é€šå¸¸ä¸ä¼šè§¦è¾¾ç“¶é¢ˆã€‚</p>
<p><strong>7ã€Google Workspace AI åŠ©æ‰‹</strong></p>
<p>åœ¨ Google Docsï¼ˆæ–‡æ¡£ï¼‰ã€Gmailã€Slidesï¼ˆå¹»ç¯ç‰‡ï¼‰ã€Sheetsï¼ˆè¡¨æ ¼ï¼‰ä¸­ç›´æ¥å†…ç½® Gemini åŠ©æ‰‹ï¼Œå¯ç”¨äºæ¶¦è‰²è®ºæ–‡ã€ç”ŸæˆPPTå¤§çº²ã€æ•´ç†é‚®ä»¶ç­‰ã€‚</p>
<p><strong>8ã€Gemini Live</strong></p>
<p>æ›´åŠ æµç•…è‡ªç„¶çš„è¯­éŸ³å¯¹è¯æ¨¡å¼ï¼Œé€‚åˆç”¨æ¥ç»ƒä¹ è‹±è¯­å£è¯­æˆ–è¿›è¡Œæ¨¡æ‹Ÿé¢è¯•ã€‚</p>
<p><strong>9ã€Deep Research (æ·±åº¦ç ”ç©¶)</strong></p>
<p>é’ˆå¯¹å¤æ‚å­¦æœ¯è¯é¢˜è¿›è¡Œè‡ªåŠ¨åŒ–çš„å…¨ç½‘æ·±åº¦æœç´¢å’ŒæŠ¥å‘Šç”Ÿæˆã€‚</p>
<p><strong>10ã€äº‘å­˜å‚¨ç©ºé—´</strong></p>
<p>2TB Google One å­˜å‚¨ç©ºé—´ï¼ˆç”¨äº Gmail, Google Photos, Google Driveï¼‰ã€‚</p>
<h2 data-id="heading-0"><strong>Gemini Proé¢†å–æ•™ç¨‹</strong></h2>
<h3 data-id="heading-1"><strong>Geminiè®¤è¯æ¡ä»¶</strong></h3>
<ol>
<li>ä¸€ä¸ªç¬¦åˆå¯è®¢é˜…Proçš„è´¦å·</li>
<li>éœ€è¦æœ‰å¹²å‡€çš„ç¾åŒºIP</li>
<li>é€šè¿‡ç¾å›½å­¦ç”Ÿé‚®ç®±éªŒè¯</li>
<li>éœ€è¦æœ‰ä¸€å¼ 0å…ƒçš„visaå¡</li>
</ol>
<p>å¦‚æœè§‰å¾—éº»çƒ¦åˆæ€¥ç€ä½¿ç”¨Geminiçš„åŒå­¦å¯ä»¥å‚è€ƒè¿™ä¸ªå¤§ç¥è¿™ä¸ªå…¥å£è·å–Gemini Proï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Flink.zhihu.com%2F%3Ftarget%3Dhttps%253A%2F%2Fsoloist.ai%2Fguge" target="_blank" title="https://link.zhihu.com/?target=https%3A//soloist.ai/guge" ref="nofollow noopener noreferrer">soloist.ai/guge</a></p>
<p><strong>1ã€æ‰“å¼€ä¸‹æ–¹åœ°å€ï¼ŒæŸ¥çœ‹ä½ çš„è°·æ­Œè´¦å·æ˜¯å¦æœ‰èµ„æ ¼ï¼ˆç”¨å¹²å‡€çš„ç¾åŒºIPï¼‰</strong></p>
<p><em><strong><a href="https://link.juejin.cn?target=https%3A%2F%2Flink.zhihu.com%2F%3Ftarget%3Dhttps%253A%2F%2Fgemini.google%2Fstudents" target="_blank" title="https://link.zhihu.com/?target=https%3A//gemini.google/students" ref="nofollow noopener noreferrer">gemini.google/students</a></strong></em></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c53ebdd078594a9d9714ee67f138d801~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWFj55qE5a6e6aqM5a6k:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768824408&amp;x-signature=URLwnrNqeFUtAOeruKlRlBGjV0o%3D" alt="" loading="lazy"/></p>
<p><strong>è¯´æ˜ï¼š</strong></p>
<p>ç›®å‰ç”±äºè°·æ­Œé™åˆ¶ï¼Œå¾ˆå¤šæ–°çš„è°·æ­Œè´¦å·æ˜¯æ²¡æœ‰éªŒè¯èµ„æ ¼çš„ï¼Œå¤§æ¦‚æ¯ä¸‰ä¸ªè´¦å·ä¼šæœ‰ä¸€ä¸ªèµ„æ ¼ã€‚æ²¡æœ‰èµ„æ ¼å°±ä¼šæ˜¾ç¤ºâ€œä½ æ— æ³•äº«å—æ­¤ä¼˜æƒ â€ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6c5ee9d39742441e894a8d390653e59a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWFj55qE5a6e6aqM5a6k:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768824408&amp;x-signature=ERE7g20xS9UvQto6B92e292wiCE%3D" alt="" loading="lazy"/></p>
<p>ä½ å¯ä»¥é€šè¿‡<strong>æ›´æ¢é­”æ³•åœ°å€</strong>çœ‹æ˜¯å¦ä¼šé‡æ–°å‡ºç°èµ„æ ¼ã€‚å¦å¤–ç»è¿‡æµ‹è¯•è¿ç»­å‡ å¤©ç”¨ç¾ipå…»ä¸€å…»å·æœ‰å¯èƒ½ä¼šé‡æ–°æœ‰éªŒè¯èµ„æ ¼ã€‚å¦‚æœå®åœ¨æ²¡åŠæ³•åªèƒ½æ›´æ¢æ‹¥æœ‰èµ„æ ¼çš„è°·æ­Œè´¦å·æ¥éªŒè¯ã€‚</p>
<p>æœ‰èµ„æ ¼çš„è¯å°±ä¼šæ˜¾ç¤ºä¸‹æ–¹å›¾ç‰‡ï¼Œç‚¹å‡»å»è¿›è¡Œå­¦ç”ŸéªŒè¯å³å¯ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c3826236d0eb4a87a75b93b31e530965~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWFj55qE5a6e6aqM5a6k:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768824408&amp;x-signature=rVz9HZzOcntvM0DM8QXMePJm2pw%3D" alt="" loading="lazy"/></p>
<p><strong>2ã€ç¡®å®šæ‹¥æœ‰èµ„æ ¼åä½ éœ€è¦ä¸€ä¸ªç¾å›½å­¦ç”Ÿé‚®ç®±æ¥è¿›è¡ŒéªŒè¯ã€‚</strong></p>
<p><strong>ç”±äºè¿™æ˜¯ä¸€ä¸ªé’ˆå¯¹ç¾å›½å­¦ç”Ÿ18å²ä»¥ä¸Šçš„æ•™è‚²ä¼˜æƒ ï¼Œæ‰€ä»¥ä½ éœ€è¦æ‹¥æœ‰ä¸€ä¸ªæ•™è‚²é‚®ç®±æ¥éªŒè¯ï¼Œæˆ–è€…ç›´æ¥ç”¨è¿‡sheerIDéªŒè¯çš„å·¥å…·æ¥è¿‡ï¼ˆç§’è¿‡ï¼‰ã€‚</strong></p>
<p><strong>å¦‚æœä½ æ²¡åŠæ³•ä¹Ÿå¯ä»¥åœ¨æœ¬æ–‡æœ«è”ç³»æˆ‘è¿‡è¯¥éªŒè¯ï¼Œå‘ç»™æˆ‘è¿‡éªŒè¯çš„é“¾æ¥å³å¯ã€‚</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/83270467a7064666ac5ebf8adb6e9b84~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWFj55qE5a6e6aqM5a6k:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768824408&amp;x-signature=fvvQWliS97hl9juRXqTgu7gNwyU%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/538d0946430046bc9d810fdf5bd5f4fe~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWFj55qE5a6e6aqM5a6k:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768824408&amp;x-signature=yDo%2Bx1paafMSzIaEjVgfGLjmn7c%3D" alt="" loading="lazy"/></p>
<p><strong>3ã€è¿‡éªŒè¯åéœ€è¦æ·»åŠ ä»˜æ¬¾æ–¹å¼</strong></p>
<p><strong>å½“ä½ çš„æ•™è‚²ä¼˜æƒ è®¤è¯é€šè¿‡ä¹‹åï¼Œå°±å¯ä»¥è¿”å›åˆ° Gemini è¿›è¡Œç»‘å¡è®¢é˜…å•¦ï¼Œè¿™ä¸ªéœ€è¦ä¸€å¼ 0å…ƒçš„visaå¡ï¼Œè€Œä¸”å»ºè®®æ˜¯æ–°å¡ã€‚</strong></p>
<p><strong>ç»‘å®šä¸€ä¸ªå¡è¿›è¡Œé›¶å…ƒçš„æ”¯ä»˜å³å¯ï¼Œå›½å†…çš„visaå¯ä»¥ï¼Œç»‘å®šè™šæ‹Ÿå¡ä¹Ÿå¯ä»¥ã€‚</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3bfaae9a88bf4aa7b0d5097be0a57fff~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWFj55qE5a6e6aqM5a6k:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768824408&amp;x-signature=d%2F71ucvi88H3ZHzTMPQCNIY0PuA%3D" alt="" loading="lazy"/></p>
<p><strong>4ã€ç»‘å¡å®Œæˆåå³æ˜¾ç¤ºå·²è®¢é˜…æˆåŠŸï¼Œé¢†å–å®Œæˆï¼æ²¡æˆåŠŸçš„åŒå­¦å¯ä»¥å‚è¿›å…¬ä¼—å·ï¼šMacçš„å®éªŒå®¤ åå°å›å¤ è°·æ­Œ è·å–æœ€æ–°Gemini å‡çº§æ–¹æ³•æ•™ç¨‹ã€‚</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4af846ecdc7d4506b9977267ab23c164~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWFj55qE5a6e6aqM5a6k:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768824408&amp;x-signature=wG7yckvi3bw6VxhcVF%2Bnss9Zbl0%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e702c7e543e748bea63e06e9f8709e8f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWFj55qE5a6e6aqM5a6k:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768824408&amp;x-signature=oScpDoiPvmKpgusP1KIUIDTpi3Q%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/eaef65767b544021861030c2b0715337~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWFj55qE5a6e6aqM5a6k:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768824408&amp;x-signature=LpF7ZZoCRzSiSNfynaSWl3nl5ms%3D" alt="" loading="lazy"/></p>
<p>è¯¥æ´»åŠ¨åœ¨2026å¹´1æœˆ31æ—¥åˆ°æœŸï¼Œè¿˜æ²¡ç™½å«–æˆåŠŸçš„æŠ“ç´§å»ç™½å«–ï¼Œä¼°è®¡åé¢å°±æ²¡æœ‰è¿™ä¹ˆå¤§åŠ›åº¦çš„æ´»åŠ¨äº†ï¼Œé”™è¿‡åªèƒ½é€šè¿‡åŸä»·ï¼ˆ20ç¾åˆ€/æœˆï¼‰çš„ä»·æ ¼æ‰å¯è®¢é˜…ï¼Œç™½å«–è¯¥æ´»åŠ¨=ç«‹çœ240ç¾åˆ€ï¼ï¼ï¼</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9d5d7f7517b14d8a9050a5d65ccdf388~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWFj55qE5a6e6aqM5a6k:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768824408&amp;x-signature=BwSn0a0HtBwZeXhWulxXmbNjlSQ%3D" alt="" loading="lazy"/></p>
<p>å¥½äº†ï¼Œæœ¬æœŸçš„åˆ†äº«å°±åˆ°è¿™é‡Œï¼Œå¸Œæœ›å¯¹å¤§å®¶æœ‰å¸®åŠ©ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è¿™ä¸¤ä¸ªç½‘ç«™ï¼Œä¸€ä¸ªå¯ä»¥å½“æ—¶é—´èƒ¶å›Šï¼Œä¸€ä¸ªå……æ»¡äº†èµ›åšè©è¨ã€‚]]></title>    <link>https://juejin.cn/post/7594266018304737343</link>    <guid>https://juejin.cn/post/7594266018304737343</guid>    <pubDate>2026-01-12T12:27:44.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594266018304737343" data-draft-id="7594322573452050475" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è¿™ä¸¤ä¸ªç½‘ç«™ï¼Œä¸€ä¸ªå¯ä»¥å½“æ—¶é—´èƒ¶å›Šï¼Œä¸€ä¸ªå……æ»¡äº†èµ›åšè©è¨ã€‚"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯"/> <meta itemprop="datePublished" content="2026-01-12T12:27:44.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="whyæŠ€æœ¯"/> <meta itemprop="url" content="https://juejin.cn/user/3702810893364350"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è¿™ä¸¤ä¸ªç½‘ç«™ï¼Œä¸€ä¸ªå¯ä»¥å½“æ—¶é—´èƒ¶å›Šï¼Œä¸€ä¸ªå……æ»¡äº†èµ›åšè©è¨ã€‚
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3702810893364350/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    whyæŠ€æœ¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-12T12:27:44.000Z" title="Mon Jan 12 2026 12:27:44 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä½ å¥½å‘€ï¼Œæˆ‘æ˜¯æ­ªæ­ªã€‚</p>
<p>å‰ä¸¤å¤©ä¸æ˜¯å‘äº†è¿™ç¯‡<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FYIRyn5iyT3yFDgHTjzvA8Q" target="_blank" title="https://mp.weixin.qq.com/s/YIRyn5iyT3yFDgHTjzvA8Q" ref="nofollow noopener noreferrer">ã€Šå¯æ€•ï¼Œçœ‹åˆ°ä¸€ä¸ªå¦‚æ­¤å†·è¡€çš„ç®—æ³•ã€‚ã€‹</a>å˜›ã€‚</p>
<p>æ–‡ç« ä¸­æœ‰è¿™æ ·çš„ä¸€ä¸ªé“¾æ¥ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/88ea32841bbf4553881a238769d59d4a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd2h55oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768825664&amp;x-signature=Gog4jzorHkodVV%2FsgsbPyPips7k%3D" alt="" loading="lazy"/></p>
<p>æˆ‘å½“æ—¶æ”¾è¿™ä¸ªé“¾æ¥çš„ç›®çš„æ˜¯ä¸ºäº†æ–¹ä¾¿å¤§å®¶ç›´è¾¾åƒç“œç°åœºã€‚</p>
<p>ä½†æ˜¯ï¼Œç”±äºè¿™ä¸ªå¸–å­æœ€ç»ˆè¢«è¯å®æ˜¯å‡çš„ï¼Œæ‰€ä»¥è¢«å®˜æ–¹ç»™â€œå¤¹â€äº†ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/91ca7cde88234e5893f603d183ff8dba~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd2h55oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768825664&amp;x-signature=Md4tMIN0Kh9e%2B0FVNAqnxR76%2Bn8%3D" alt="" loading="lazy"/></p>
<p>å¹¸å¥½ï¼ŒåŸæ–‡æœ¬æ¥å°±ä¸é•¿ï¼Œæ‰€ä»¥æˆ‘åœ¨æˆ‘çš„æ–‡ç« ä¸­æŠŠåŸæ–‡å…¨éƒ¨ç»™æˆªä¸‹æ¥äº†ã€‚</p>
<p>ä¹Ÿç®—æ˜¯ä»¥å¦å¤–ä¸€ç§å½¢å¼ä¿ç•™äº†åƒç“œç°åœºã€‚</p>
<p>å¦‚æœè¿™ä¸ªâ€œçˆ†æ–™â€çš„å¸–å­å†é•¿ä¸€ç‚¹ï¼ŒæŒ‰ç…§æˆ‘çš„ä¹ æƒ¯ï¼Œæˆ‘å¯èƒ½å°±ä¸ä¼šæŠŠæ•´ä¸ªå¸–å­æ¬è¿è¿‡æ¥äº†ï¼Œåªä¼šç•™å–æˆ‘è®¤ä¸ºå…³é”®çš„éƒ¨åˆ†ã€‚</p>
<p>ä½†æ˜¯è¿™ç§â€œæˆ‘è®¤ä¸ºå…³é”®çš„éƒ¨åˆ†â€æ˜¯éå¸¸ä¸»è§‚çš„ï¼Œæœ‰çš„äººå°±æ˜¯æƒ³çœ‹åŸè´´é•¿ä»€ä¹ˆæ ·ï¼Œä½†æ˜¯åŸè´´åˆè¢«åˆ é™¤äº†ï¼Œæ€ä¹ˆåŠï¼Ÿ</p>
<p>æˆ‘æ•™ä½ ä¸€æ‹›ï¼Œè€å¥½ç”¨äº†ã€‚</p>
<h2 data-id="heading-0">æ—¶é—´èƒ¶å›Š</h2>
<p>åœ¨ä¸‡èƒ½çš„äº’è”ç½‘ä¸Šï¼Œæœ‰è¿™æ ·ä¸€ä¸ªä»¿ä½›æ˜¯æ—¶é—´èƒ¶å›Šä¸€èˆ¬å­˜åœ¨çš„ç¥å¥‡çš„ç½‘ç«™ï¼š</p>
<blockquote>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Farchive.org%2F" target="_blank" title="https://archive.org/" ref="nofollow noopener noreferrer">archive.org/</a></p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/48c0088eaedd44109e2bc436c5766155~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd2h55oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768825664&amp;x-signature=sTvY5cAj5UlMeJiDmvctS%2B8%2FeLk%3D" alt="" loading="lazy"/></p>
<p>è¿™ä¸ªç½‘ç«™æ˜¯å«åš"äº’è”ç½‘æ¡£æ¡ˆé¦†"ï¼ˆInternet Archiveï¼‰ï¼Œäº 1996 å¹´æˆç«‹çš„éè¥åˆ©ç»„ç»‡ç»´æŠ¤çš„ç½‘ç«™ã€‚</p>
<p>è‡ª 1996 å¹´ä»¥æ¥ï¼Œäº’è”ç½‘æ¡£æ¡ˆåº“ä¸ä¸–ç•Œå„åœ°çš„å›¾ä¹¦é¦†å’Œåˆä½œä¼™ä¼´åˆä½œï¼Œå»ºç«‹äº†ä¸€ä¸ªäººç±»åœ¨çº¿å†å²çš„å…±äº«æ•°å­—å›¾ä¹¦é¦†ã€‚</p>
<p>è¿™ä¸ªç½‘ç«™æœ‰ä¸€ä¸ªéå¸¸å®å¤§çš„æ„¿æ™¯ï¼š</p>
<blockquote>
<p>æ•æ‰å¤§å°ä¸ä¸€çš„ç½‘ç«™ï¼Œä»çªå‘æ–°é—»åˆ°è¢«é—å¿˜çš„ä¸ªäººé¡µé¢ï¼Œä½¿å®ƒä»¬èƒ½å¤Ÿä¸ºå­å­™åä»£ä¿æŒå¯è®¿é—®æ€§ã€‚</p>
</blockquote>
<p>æ‰€ä»¥é‡Œé¢æ”¶è—äº†çš„å†…å®¹æœ‰å…è´¹ä¹¦ç±ã€ç”µå½±ã€è½¯ä»¶ã€éŸ³ä¹ã€ç½‘ç«™ç­‰ã€‚</p>
<p>æˆªè‡³ç›®å‰ï¼Œè¯¥ç½‘ç«™æ”¶é›†äº†è¿™ä¹ˆå¤šçš„æ•°æ®ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c2a5e1be90e24eac90c19f92988bcd55~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd2h55oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768825664&amp;x-signature=Y%2FSoHJvuGg6VnmCE2CgIJkuOjvU%3D" alt="" loading="lazy"/></p>
<p>å…¶ä¸­ç½‘ç«™çš„æ•°é‡æ˜¯æœ€å¤šçš„ï¼Œæœ‰ 1Tï¼Œè¶…è¿‡ 1T çš„æ—¶å€™ï¼Œå®˜æ–¹è¿˜å‘æ–‡åº†ç¥äº†ä¸€ä¸‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2093f4e582e64bfc8f09b6163b98e43e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd2h55oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768825664&amp;x-signature=7c78oHOlKjIbIYDLWo1kupDmirM%3D" alt="" loading="lazy"/></p>
<p>è¿™ä¸ª 1T ä¸­çš„ T æŒ‡çš„æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ</p>
<p>Trillionã€‚</p>
<p>ä¸€ä¸ªéå¸¸å°ä¼—çš„è¯æ±‡å•Šï¼Œæ­ªå¸ˆå‚…ä¹Ÿä¸è®¤è¯†ï¼Œæ‰€ä»¥æˆ‘å»æŸ¥äº†ä¸€ä¸‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/80dec3db3eff442c88f676169c502bcf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd2h55oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768825664&amp;x-signature=5zDreCNZ5pg5qyoC3V3nC2%2BIMjA%3D" alt="" loading="lazy"/></p>
<p>è¿™ä¸ªå›¾ç‰‡ä¸Šä¸€çœ¼æœ›å»å…¨æ˜¯ 0ã€‚</p>
<blockquote>
<p>1 Trillion å°±æ˜¯ 1,000,000,000,000</p>
</blockquote>
<p>åæ­£æ˜¯æ•°ä¸è¿‡æ¥äº†ã€‚</p>
<p>æ„Ÿè§‰æˆéƒ½éƒ½æ²¡æœ‰è¿™ä¹ˆå¤š 0ã€‚</p>
<p>è¿™ä¸ªç½‘ç«™æ€ä¹ˆç”¨å‘¢ï¼Ÿ</p>
<p>å¾ˆç®€å•ã€‚</p>
<p>æ‹¿å‰é¢ reddit ä¸­è¢«â€œå¤¹â€äº†çš„å¸–å­ä¸¾ä¾‹ã€‚</p>
<p>æˆ‘ä¸æ˜¯ç»™äº†åƒç“œç°åœºçš„é“¾æ¥å˜›ã€‚</p>
<p>ä½ æŠŠé“¾æ¥å¾€â€œæ—¶å…‰æœºâ€çš„è¿™ä¸ªåœ°æ–¹ä¸€ç²˜ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c8a7ee49c8d54e0fbb059879cf0dad9d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd2h55oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768825664&amp;x-signature=5wGc4b1YDH9dxQ8HvAu17FRqmCA%3D" alt="" loading="lazy"/></p>
<p>ä½ å°±ä¼šçœ‹åˆ°è¿™ä¸ªæœ‰ä¸€ä¸ªæ—¶é—´è½´çš„é¡µé¢ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8008804c8bd6426d9ffb466e8c323556~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd2h55oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768825664&amp;x-signature=G29Jdml6lbLokSNQdipv%2FCB8gbE%3D" alt="" loading="lazy"/></p>
<p>æŠŠé¼ æ ‡æµ®åˆ°æœ‰é¢œè‰²çš„æ—¥æœŸä¸Šï¼Œå°±èƒ½çœ‹åˆ°å„ä¸ªæ—¶é—´ç‚¹çš„é¡µé¢å¿«ç…§äº†ã€‚</p>
<p>é¢œè‰²è¶Šæ·±ä»£è¡¨é‚£ä¸€å¤©çš„å¿«ç…§è¶Šå¤šï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fef167a6c0ed4966a8808771f56ebf86~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd2h55oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768825664&amp;x-signature=TvhCxf%2B8eZZjfGsF3vIHZxpUCLo%3D" alt="" loading="lazy"/></p>
<p>æ¯”å¦‚ï¼Œæˆ‘ä»¬çœ‹ä¸€ä¸‹è¿™ä¸ªç½‘ç«™æ”¶é›†åˆ°çš„ç¬¬ä¸€ä¸ªå¿«ç…§ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7a709f667db44696bf29bad14c5a7e1e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd2h55oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768825664&amp;x-signature=F6RSKmTfgmVymz7ArTVW8COKwI4%3D" alt="" loading="lazy"/></p>
<p>ç‚¹è¿›å»ï¼Œå°±æ˜¯æˆ‘ä»¬è¦æ‰¾çš„åƒç“œç°åœºã€‚</p>
<p>å‘å¸–åçš„ä¸¤å°æ—¶å°±è¢«æ”¶é›†åˆ°äº†ï¼Œé€Ÿåº¦è¿˜æ˜¯æŒºå¿«çš„ã€‚</p>
<p>ä»æ•°æ®ä¸Šçœ‹ï¼Œè¿™ä¸ªæ—¶å€™å·²ç»æœ‰ 3.7k ä¸ªç‚¹èµå’Œ 255 ä¸ªè¯„è®ºï¼Œå·²ç»æœ‰è¦èµ·é£çš„é¢„å…†äº†ã€‚</p>
<p>æ¢ä¸ªæ—¶é—´çš„å¿«ç…§ï¼Œè¿˜å¯ä»¥çœ‹åˆ°ç‚¹èµå’Œè¯„è®ºçš„æ•°æ®å˜åŒ–ï¼Œæ¯”å¦‚å‘å¸–ä¸€å¤©åï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/72a737f6b5354b5fb2148d9bb119b1dd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd2h55oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768825664&amp;x-signature=iG9xBJ1SW%2Fmpqfc6JKr0EGo4rFg%3D" alt="" loading="lazy"/></p>
<p>ç‚¹èµé‡å·²ç»æ˜¯ 71kï¼Œè¯„è®ºæ•°æ¥åˆ°äº† 3.8Kï¼Œç›´æ¥å°±æ˜¯ä¸€ä¸ªèµ·é£çš„å¤§åŠ¨ä½œã€‚</p>
<p>è¿™é‡Œåªæ˜¯ç”¨è¿™ä¸ªå¸–å­ä¸¾ä¸ªä¾‹å­ã€‚</p>
<p>å†ä¸¾ä¸€ä¸ªä¾‹å­ã€‚</p>
<p>ä¹Ÿæ˜¯æˆ‘çš„çœŸå®ä½¿ç”¨åœºæ™¯ã€‚</p>
<p>æœ‰ä¸€æ¬¡æˆ‘åœ¨ç ”ç©¶å¹³æ»‘åŠ æƒè½®è¯¢è´Ÿè½½å‡è¡¡ç­–ç•¥ç®—æ³•ä¸ºä»€ä¹ˆæ˜¯å¹³æ»‘çš„ã€‚</p>
<p>å’Œå„ç±» AI è®¨è®ºäº†åŠå¤©ï¼Œå®ƒä»¬ä¹Ÿç»™å‡ºäº†å„ç§å‚è€ƒæ–‡çŒ®ã€‚</p>
<p>æˆ‘åœ¨å…¶ä¸­ä¸€ä¸ªå‚è€ƒæ–‡çŒ®ä¸­çœ‹åˆ°äº†è¿™æ ·ä¸€ä¸ªé“¾æ¥ï¼š</p>
<blockquote>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Ftenfy.cn%2F2018%2F11%2F12%2Fsmooth-weighted-round-robin%2F" target="_blank" title="https://tenfy.cn/2018/11/12/smooth-weighted-round-robin/" ref="nofollow noopener noreferrer">tenfy.cn/2018/11/12/â€¦</a></p>
</blockquote>
<p>æˆ‘çŸ¥é“è¿™ä¸ªé“¾æ¥çš„å†…å®¹å°±æ˜¯æˆ‘è¦æ‰¾çš„å†…å®¹ï¼Œä½†æ˜¯è¿™ä¸ªé“¾æ¥è·³è½¬è¿‡å»å·²ç»æ˜¯ 404 äº†ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6cd6184af8a248e389bda7f02b359b03~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd2h55oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768825664&amp;x-signature=O7o0p3CfStgKGyaxwXDuRL2jf0U%3D" alt="" loading="lazy"/></p>
<p>äºæ˜¯ï¼Œæ—¶é—´èƒ¶å›Šå°±æ´¾ä¸Šç”¨åœºäº†ã€‚</p>
<p>æˆ‘ç›´æ¥æŠŠè¿™ä¸ªé“¾æ¥æ‰”å®ƒï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/577477088e5845cb8df913170c5309e5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd2h55oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768825664&amp;x-signature=F9g2FRIpWO4dgn8ZbdG6XBGtBEE%3D" alt="" loading="lazy"/></p>
<p>æ‰¾åˆ°äº†è¿™ä¸ªç½‘é¡µåœ¨ 2019 å¹´ 12 æœˆ 10 æ—¥çš„å¿«ç…§ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d7cf1844bff94d889e9623573525cc65~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd2h55oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768825664&amp;x-signature=NZQNbug%2FW5PlZntC4NdUSL6XdYc%3D" alt="" loading="lazy"/></p>
<p>é€šè¿‡è¿™ç§æ–¹å¼å°±æ‰¾åˆ°äº†åŸæœ¬å·²ç»è¢« 404 çš„ç½‘é¡µå†…å®¹ã€‚</p>
<p>åœ¨çœ‹ä¸€äº›æ—¶é—´æ¯”è¾ƒä¹…è¿œçš„æ–‡ç« çš„æ—¶å€™ï¼Œå‚è€ƒé“¾æ¥æ‰“ä¸å¼€çš„æƒ…å†µï¼Œè¿˜æ˜¯æ¯”è¾ƒå¸¸è§çš„ã€‚</p>
<p>æ‰€ä»¥è¿™ä¸ªæ–¹å¼æ˜¯æˆ‘æœ€å¸¸ç”¨çš„ä¸€ä¸ªåœºæ™¯ã€‚</p>
<p>æ­¤å¤–ï¼Œè¿˜æœ‰å¦å¤–ä¸€ä¸ªåœºæ™¯ï¼Œå°±æ˜¯å¶å°”å»æ€€æ—§ä¸€ä¸‹ã€‚</p>
<p>æ¯”å¦‚ï¼Œä¸­æ–‡äº’è”ç½‘çš„ä¸€æ»´çœ¼æ³ªï¼šå¤©æ¶¯è®ºå›ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0ef7c9590c5a45ca8922943572ad8049~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd2h55oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768825664&amp;x-signature=w6akJJTYjVM%2FfoA9d1WzwKgQlCU%3D" alt="" loading="lazy"/></p>
<p>è¿™æ˜¯ 20 å¹´å‰ï¼Œ2006 å¹´ 1 æœˆçš„å¤©æ¶¯è®ºå›é¦–é¡µï¼Œä¸€è‚¡æµ“çƒˆçš„æ—©æœŸäº’è”ç½‘é£æ ¼ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/30d7e4d0864c48318cb7c8ac3ad9d7cc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd2h55oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768825664&amp;x-signature=W4DGcFia%2BIfDZI6Jv1iku1nuXOA%3D" alt="" loading="lazy"/></p>
<p>åœ¨å›¾ç‰‡çš„å³ä¸‹è§’ä½ è¿˜èƒ½çœ‹åˆ°â€œ2006 å¤©æ¶¯æ˜¥æ™šâ€çš„å­—æ ·ã€‚</p>
<p>å¦å¤–ï¼Œä½ ä¸è¦è§‰å¾—è¿™åªæ˜¯ä¸€ä¸ªé™æ€é¡µé¢ã€‚</p>
<p>é‡Œé¢çš„éƒ¨åˆ†é“¾æ¥è¿˜æ˜¯å¯ä»¥æ­£å¸¸è·³è½¬çš„ã€‚</p>
<p>æ¯”å¦‚ï¼Œè¿™ä¸ªé“¾æ¥ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/91ee4a0049584178ad601d24e36e150a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd2h55oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768825664&amp;x-signature=siHyENSfAnu2x%2FnxGASTPqO6F%2F0%3D" alt="" loading="lazy"/></p>
<p>ç‚¹è¿›å»ï¼Œä½ å¯ä»¥çœ‹åˆ°æœ€æœ€å¤æ—©çš„ä¸€ç§ç›´æ’­å½¢å¼ï¼šæ–‡å­—ç›´æ’­ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6f654f561ef1443b8a1264971b983f6d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd2h55oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768825664&amp;x-signature=C9C%2B%2BcpL%2Fo2AHV0UW1XoWfDp3UI%3D" alt="" loading="lazy"/></p>
<p>2006 å¹´ 1 æœˆ 2 æ—¥ï¼Œã€Šæ­¦æ—å¤–ä¼ ã€‹å¼€æ’­ã€‚</p>
<p>å¤©æ¶¯è¿™ä¸ªæ–‡å­—ç›´æ’­çš„æ—¶é—´æ˜¯ 2006 å¹´ 1 æœˆ 19 æ—¥ï¼Œã€Šæ­¦æ—å¤–ä¼ ã€‹å½“æ—¶æ­£åœ¨å…¨å›½çƒ­æ’­ã€‚</p>
<p>å¤©æ¶¯ç½‘å‹åœ¨è¿™ä¸ªé¡µé¢ä¸‹æå‡ºè‡ªå·±å…³äºã€Šæ­¦æ—å¤–ä¼ ã€‹çš„é—®é¢˜ï¼Œä½œä¸ºå¤©æ¶¯çš„çŸ¥åå†™æ‰‹ï¼Œå®è´¢ç¥æœ¬äººä¼šé€‰æ‹©éƒ¨åˆ†é—®é¢˜è¿›è¡Œå›å¤ã€‚</p>
<p>æˆ‘æˆªå–äº†å‡ ä¸ªæˆ‘è§‰å¾—æœ‰æ„æ€çš„å›å¤ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f6c30ed9389545dc83c0329c2c7d49c9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd2h55oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768825664&amp;x-signature=5%2BbKABvshN%2FzBJujBXGeKxKRrac%3D" alt="" loading="lazy"/></p>
<p>è¿™ç§è¡Œä¸ºè¿™ç®—ä¸ç®—æ˜¯å®˜æ–¹å‰§é€äº†ï¼Ÿ</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/24fd2e6e76ef4e41bdcdeea82668d8ba~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd2h55oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768825664&amp;x-signature=Co5CIyH5Co0LH7tUMXPyBWjEHVw%3D" alt="" loading="lazy"/></p>
<p>å½“å¹´ç¥æ— åŒè¿™ä¸ªè§’è‰²æ˜¯çœŸçš„ä¸è®©äººè®¨å–œå•Šã€‚å¹¸å¥½å½“æ—¶çš„ç½‘ç»œè¿˜ä¸å‘è¾¾ï¼Œä¸ç„¶æˆ‘è§‰å¾—çœŸæœ‰å¯èƒ½â€œç½‘çˆ†ç¥æ— åŒâ€ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a5860c5036f24fac9d10b7160bab120c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd2h55oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768825664&amp;x-signature=47ppdjc6dXvrnrd5iYXLQatyc5g%3D" alt="" loading="lazy"/></p>
<p>DVDï¼Œä¸€ä¸ªå¤šä¹ˆå…·æœ‰å¹´ä»£æ„Ÿçš„è¯ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a7853a7d7ce146fba853a81674ba8955~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd2h55oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768825664&amp;x-signature=8CKxg5u6c0%2Ftyn7A6dtgZsisljY%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ce3a83fcf2a4472792f1a97543e3c994~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd2h55oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768825664&amp;x-signature=C%2FWPIdqCtkMq0rIsNLLOYLc3a54%3D" alt="" loading="lazy"/></p>
<p>å†™æ–‡ç« çš„æ—¶å€™ï¼Œæˆ‘æœ¬æ¥æ˜¯æƒ³æˆªå‡ å¼ å›¾å°±èµ°çš„ï¼Œæœ€å¤šäº”åˆ†é’Ÿæå®šã€‚</p>
<p>ç»“æœæˆ‘ç«Ÿç„¶ä¸€é¡µé¡µçš„ç¿»å®Œäº†è¿™ä¸ªå¸–å­ï¼Œçœ‹å®Œä¹‹åæ‰å‘ç°åœ¨è¿™ä¸ªå¸–å­é‡Œé¢å¾…äº†åŠä¸ªå¤šå°æ—¶ã€‚</p>
<p>æ—¶é—´è¿‡çš„è¿˜æ˜¯å¾ˆå¿«çš„ã€‚</p>
<p>ç«™åœ¨ 2026 å¹´ï¼Œçœ‹ 2006 çš„å¸–å­ï¼Œä¸­é—´æœ‰ 20 å¹´çš„å…‰é˜´ã€‚</p>
<p>ä½†æ˜¯å°±åƒæ˜¯ 2006 å¹´ä½ŸæŒæŸœå¯¹è¦ç»™å¥¹å¹²äºŒåå¹´å·¥æ‰èƒ½è¿˜æ¸…å€ºåŠ¡çš„å°éƒ­è¯´çš„é‚£æ ·ï¼šä¸è¦æ€•ï¼ŒäºŒåå¹´å¿«å¾—å¾ˆï¼Œå¼¹æŒ‡ä¸€æŒ¥é—´ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8ed698692f174befadf86018c52f7241~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd2h55oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768825664&amp;x-signature=ief4Wpegld0UG%2BNeS8e7xwOLqkk%3D" alt="" loading="lazy"/></p>
<p>å‰å‡ å¤©å°éƒ­åœ¨å¾®åšä¸Šè¿˜å›åº”äº†æ­£å¼èµèº«è¿™ä¸ªæ¢—ã€‚</p>
<p>å»äº†å…­é‡Œæ¡¥ã€å»äº†åŒç¦å¤¹é“ã€å»äº†å·¦å®¶åº„ç«™ã€è¿˜å»äº†ç¥¥èš¨ç‘ï¼Œæœ€ååœ¨äººæ¥äººå¾€çš„åŒ—äº¬è¡—å¤´ï¼Œä¸€ä¸ªçŒä¸åŠé˜²çš„å›çœ¸ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/582987e495464f959c96a0223e17ea50~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd2h55oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768825664&amp;x-signature=ZRxqJUqbBzeeqgyaRZCSHaPl4yo%3D" alt="" loading="lazy"/></p>
<p>è¿™æ˜¯æˆ‘çš„ç«¥å¹´å›å¤´çœ‹äº†æˆ‘ä¸€çœ¼ã€‚</p>
<p>åå‡ å²çš„ä¸äº†è§£ä½ŸæŒæŸœçš„è¿™å¥è¯ï¼Œä¸‰åå‡ºå¤´äº†ï¼Œä¸€ä¸‹å°±ç†è§£äº†ï¼š20 å¹´ï¼ŒçœŸçš„å¾ˆå¿«å‘€ã€‚</p>
<p>çœ‹åˆ° 2006 å¹´çš„å¤©æ¶¯çš„æ—¶å€™ï¼Œæˆ‘ä¾ç¨€æƒ³èµ·äº†ä¸€äº›å½“å¹´çš„å¾€äº‹ã€‚</p>
<p>é‚£ä¸ªæ—¶å€™æˆ‘æ‰ 12 å²ï¼Œçœ‹ç”µè§†å‰§æ˜¯çœŸçš„åœ¨ç”µè§†æœºä¸Šçœ‹ï¼Œæˆ‘è¿˜è®°å¾—å®¶é‡Œçš„ç”µè§†æœºéƒ½æ˜¯è¿™æ ·çš„â€œå¤§å±è‚¡â€ç”µè§†æœºï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/da5ea6b547834065bd9df74642692d15~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd2h55oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768825664&amp;x-signature=xXYUf1ogVy7DeS3cIj24Sm0qbhg%3D" alt="" loading="lazy"/></p>
<p>è¿˜è®°å¾—ã€Šæ­¦æ—å¤–ä¼ ã€‹æ¯é›†å¼€å§‹ï¼Œå”±ä¸»é¢˜æ›²çš„æ—¶å€™ï¼Œç”µè§†ä¸Šé¢ä¼šæ˜¾ç¤ºä¸€ä¸ªç”µè„‘çš„æ¡Œé¢ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9ab8a2ba608a4b4eb3c40ecf5edd0986~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd2h55oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768825664&amp;x-signature=HXirlG02afJfuHVBy%2BtaxKgnnnE%3D" alt="" loading="lazy"/></p>
<p>æ‰€ä»¥æ¯æ¬¡å¼€å¤´çš„æ—¶å€™ï¼Œæˆ‘å°±ä¼šå«è¡¨å¦¹è¿‡æ¥ï¼Œå¯¹å¥¹è¯´ï¼šä½ çœ‹ï¼Œæˆ‘ç­‰ä¸‹æŠŠç”µè§†å˜æˆç”µè„‘ã€‚</p>
<p>é‚£ä¸ªæ—¶å€™è¡¨å¦¹æ‰ 7 å²ï¼Œæˆ‘è¿™ä¸ª 12 å²çš„å“¥å“¥å½“ç„¶æ˜¯æŠŠå¥¹å”¬çš„ä¸€æ„£ä¸€æ„£çš„ã€‚</p>
<p>é‚£ä¸ªæ—¶å€™ç”µè„‘ä¹Ÿè¿˜æ˜¯ä¸€ä¸ªç¨€å¥‡çš„ç‰©å“ï¼Œè™½ç„¶æ˜¯ä¹¡ä¸‹çš„å­¦æ ¡ï¼Œä½†æ˜¯ä¹Ÿè¿˜æ˜¯æœ‰ä¸€ä¸ªå¾®æœºå®¤ï¼Œå»å¾®æœºå®¤ä¸Šè¯¾å¿…é¡»è¦å¸¦é‹å¥—çš„é‚£ç§ã€‚</p>
<p>æ‰€ä»¥ 2006 å¹´çš„å¤©æ¶¯ï¼Œæˆ‘è‚¯å®šæ˜¯æ²¡æœ‰çœ‹è¿‡çš„ï¼Œä½†æ˜¯åœ¨ 2026 å¹´çœ‹åˆ° 2006 çš„å¤©æ¶¯ï¼Œæˆ‘è¿˜æ˜¯æƒ³èµ·äº†å¾ˆå¤šç«¥å¹´å¾€äº‹ã€‚</p>
<p>å¯¹äº†ï¼Œå‰å‡ å¤©æ‰ç»™è¡¨å¦¹è¿‡å®Œ 27 å²çš„ç”Ÿæ—¥ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4c1ff018c4234553b70e8eed677db729~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd2h55oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768825664&amp;x-signature=eGVUWb7JoP89Ops7lH744QONzXs%3D" alt="" loading="lazy"/></p>
<p>çœ‹ç€è¿™å¼ ç…§ç‰‡ï¼Œå†æƒ³èµ· 7 å²æ—¶é‚£ä¸ªç›¸ä¿¡å“¥å“¥å¯ä»¥æŠŠç”µè§†å˜æˆç”µè„‘ç»™å¥¹çœ‹ã€Šæ­¦æ—å¤–ä¼ ã€‹çš„å¦¹å¦¹ã€‚</p>
<p>â€œäºŒåå¹´å¿«å¾—å¾ˆï¼Œå¼¹æŒ‡ä¸€æŒ¥é—´â€ã€‚</p>
<p>ä½ è¯´è¿™ä¸å«æ—¶é—´èƒ¶å›Šï¼Œå«ä»€ä¹ˆï¼Ÿ</p>
<p>å†çœ‹ä¸€ä¸‹ 10 å¹´å‰ï¼Œ2016 å¹´ 1 æœˆ 1 æ—¥çš„å¤©æ¶¯ï¼Œå½¼æ—¶çš„å¤©æ¶¯å¯ä»¥è¯´æ˜¯å¦‚æ—¥ä¸­å¤©ï¼Œéå¸¸å¤šçš„ç½‘å‹å¤©å¤©æ³¡åœ¨è®ºå›é‡Œé¢ï¼Œè°ˆå¤è®ºä»Šï¼Œæ¿€æ‰¬æ–‡å­—ã€‚</p>
<p>è¿™æ˜¯é‚£å¤©çš„å¤©æ¶¯é¦–é¡µæˆªå›¾ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9cb137d842504447be393c4b9f3df98e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd2h55oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768825664&amp;x-signature=Gkc9XDAnxOX7qI0DaZesEkjLTHk%3D" alt="" loading="lazy"/></p>
<p>çƒ­å¸–æ¦œç¬¬ä¸€çš„æ˜¯ä¸€ä¸ªå…³äºçº¯ç”µåŠ¨æ±½è½¦çš„å¸–å­ï¼Œæˆ‘è¿›å»çœ‹äº†ä¸€ä¸‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a9e6a8600f054ced824a4682bf94bc12~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd2h55oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768825664&amp;x-signature=M5BECzxvSlf0qQ2B9zd8Rj3TSbM%3D" alt="" loading="lazy"/></p>
<p>è¿™ä¸ªå¸–å­çš„ç‚¹å‡»é‡æ˜¯ 10wï¼Œæœ‰ 816 ä¸ªå›å¤ã€‚</p>
<p>å¯è§è¿™ç¡®å®æ˜¯å½“æ—¶çš„ä¸€ä¸ªéå¸¸çƒ­é—¨çš„è¯é¢˜ã€‚</p>
<p>æŒ‰ç…§ä½œè€…çš„è§‚ç‚¹ï¼Œçº¯ç”µæ±½è½¦ä»£æ›¿ç‡ƒæ²¹æ±½è½¦ï¼Œè¿˜å¾ˆé•¿çš„è·¯è¦èµ°ã€‚</p>
<p>ç«™åœ¨ 10 å¹´åçš„ä»Šå¤©ï¼Œå…¶å®æˆ‘ä»¬å·²ç»çŸ¥é“ç­”æ¡ˆäº†ã€‚</p>
<p>ä½†æ˜¯ï¼Œå½“æˆ‘çœ‹åˆ°è¿™ä¸ªå›å¤çš„æ—¶å€™ï¼Œæˆ‘è¿˜æ˜¯ä½©æœå¤©æ¶¯ç½‘å‹çš„çœ¼å…‰ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/996210fb85a24fb8bfde8be8bcc539d5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd2h55oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768825664&amp;x-signature=9PD%2BtovGqHNxJJbd5JhoopIt6MY%3D" alt="" loading="lazy"/></p>
<p>é™¤äº†å¤©æ¶¯ï¼Œè¿˜å¯ä»¥è€ƒå¤å¾ˆå¤šå…¶ä»–çš„ç½‘ç«™ã€‚</p>
<p>æ¯”å¦‚ï¼ŒB ç«™ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c7b2c5fe89214886a2977361f11d4bda~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd2h55oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768825664&amp;x-signature=qIM2khZJ2SyEqeJUY8AHTzcPesI%3D" alt="" loading="lazy"/></p>
<p>ä» 2011 å¹´å¼€å§‹æœ‰äº†ç½‘é¡µå¿«ç…§ï¼Œæˆ‘éšä¾¿ç‚¹å¼€ä¸€çœ‹ï¼Œæ»¡æ»¡çš„å†å²æ„Ÿï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3cb607a711d44b92a0914a30af5ab8a0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd2h55oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768825664&amp;x-signature=gxnSaU2KsrGtpxL2kVbtfdSKOiQ%3D" alt="" loading="lazy"/></p>
<p>è€Œè¿™æ˜¯ 2016 å¹´ï¼Œ10 å¹´å‰çš„ B ç«™é¦–é¡µï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b6bc3622ddcc4c919bfe786e91b5c063~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd2h55oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768825664&amp;x-signature=uIAxyjhLpOZl84hC0qoHF%2B3GQOw%3D" alt="" loading="lazy"/></p>
<p>å½“æ—¶è¿˜æœ‰ä¸€ä¸ªä¸“é—¨çš„é¬¼ç•œåŒºï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ad7df75c530f4ab9add6a8fbea0fc612~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd2h55oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768825664&amp;x-signature=zZ9IGwJ22eV3SDiniQOhgzyO4Yk%3D" alt="" loading="lazy"/></p>
<p>è€Œè¿™é‡Œçš„ä¸€äº›è§†é¢‘ç”šè‡³è¿˜æ˜¯å¯ä»¥æ’­æ”¾çš„ã€‚</p>
<p>æ¯”å¦‚è¿™ä¸ªâ€œå¯è’™ä½œå“â€ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e65c397ab660492a9e536c9531283995~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd2h55oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768825664&amp;x-signature=Jsh9DOv41OQGfXUGPE6QF5d3e%2FI%3D" alt="" loading="lazy"/></p>
<p>ç°åœ¨åœ¨ B ç«™æœ‰ 160w çš„æ’­æ”¾ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/333cc43bd80f44b3aae2e445eb6b104b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd2h55oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768825664&amp;x-signature=eirReWlL%2B%2B9FnkEkSZD3kN09wl8%3D" alt="" loading="lazy"/></p>
<p>åœ¨è¿™ä¸ªè§†é¢‘çš„è¯„è®ºåŒºï¼Œä½ èƒ½æ‰¾åˆ°å¤§é‡æ¥â€œè€ƒå¤â€çš„äººï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fabb945a5e2e4cda9cb7d1a16b0097a7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd2h55oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768825664&amp;x-signature=QBcuBuOW2oWq0DgXkatNOjzqqYg%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ad505c46950149ad9346ff7601f9e15f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd2h55oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768825664&amp;x-signature=GQqBW9Mph8hrfFwPFRwUGr4gPt8%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d071ecb026b74fa3919d8a6fcaeeefe1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd2h55oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768825664&amp;x-signature=187DPUNnIcGLvOmVmCxakdwCVXc%3D" alt="" loading="lazy"/></p>
<p>äºŒåå¹´éƒ½å¼¹æŒ‡ä¸€æŒ¥é—´äº†ï¼Œåˆ«è¯´åŒºåŒºåå¹´äº†ã€‚</p>
<p>ä» B ç«™æ€€æ—§å®Œæˆåï¼Œéšä¾¿ï¼Œæˆ‘ä¹Ÿå»ç£¨æˆ¿ã€é©¬èœ‚çªã€ç©·æ¸¸ç½‘çœ‹äº†ä¸€åœˆï¼Œéšä¾¿é€‰äº† 2012 å¹´åˆ° 2016 å¹´é—´çš„ä¸€äº›é¡µé¢ï¼Œæ„Ÿè°¢å®ƒä»¬é™ªæˆ‘åº¦è¿‡äº†ä¸€æ•´ä¸ªç¾å¥½çš„å¤§å­¦ç”Ÿæ´»ã€‚</p>
<p>æ˜¯æˆ‘å½“æ—¶è®¤è¯†ã€æ„ŸçŸ¥ã€ä½“éªŒè¿™ä¸ªçš„å¹¿é˜”ä¸–ç•Œçš„ä¸€ä¸ªé‡è¦çª—å£ã€‚</p>
<p>æ„Ÿè°¢ç£¨æˆ¿ 4 å¹´çš„é™ªä¼´ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/675bb8ebe2b6476aa02a85ec7fa9495e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd2h55oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768825664&amp;x-signature=NQnczXD8X%2FJh3QaSiD20k7V%2B%2B7U%3D" alt="" loading="lazy"/></p>
<p>æ„Ÿè°¢é©¬èœ‚çª 4 å¹´çš„é™ªä¼´ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b8e068326d5e4c07a0e14bcb0befa654~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd2h55oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768825664&amp;x-signature=5ePrDMG6cIkSoB8QJKFuTAPYnKo%3D" alt="" loading="lazy"/></p>
<p>æ„Ÿè°¢ç©·æ¸¸ç½‘ 4 å¹´çš„é™ªä¼´ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1941455793e44a84a0c7fd71c86f4a97~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd2h55oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768825664&amp;x-signature=Ydr07TSDvCbb2WR%2BmbfhHBPKxGs%3D" alt="" loading="lazy"/></p>
<p>å¦‚æœä½ ä¹Ÿæœ‰æƒ³è¦å¯»æ‰¾çš„è®°å¿†ï¼Œå¯ä»¥å°è¯•åœ¨è¿™ä¸ªç½‘ç«™ä¸Šå»æ‰¾ä¸€æ‰¾ã€‚</p>
<h2 data-id="heading-1">å­˜æ¡£</h2>
<p>æ—¢ç„¶å·²ç»èŠåˆ°â€œarchiveâ€äº†ï¼Œé‚£å°±é¡ºä¾¿å†åˆ†äº«ä¸€ä¸ªâ€œarchive.todayâ€ã€‚</p>
<blockquote>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Farchive.ph%2F" target="_blank" title="https://archive.ph/" ref="nofollow noopener noreferrer">archive.ph/</a></p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/39d58141add1438ba5c52fad6b7cc65e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd2h55oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768825664&amp;x-signature=9DaDbJAYOKSFJkoTlHHTjyvS%2Bio%3D" alt="" loading="lazy"/></p>
<p>è¿™ä¸ªç½‘ç«™å’Œå‰é¢çš„â€œäº’è”ç½‘æ¡£æ¡ˆé¦†â€æœ€å¤§çš„ä¸€ä¸ªå·®å¼‚æ˜¯â€œäº’è”ç½‘æ¡£æ¡ˆé¦†â€æ˜¯å®ƒä¸»åŠ¨å»åšâ€œç½‘é¡µå¿«ç…§â€ï¼Œä»€ä¹ˆæ—¶å€™åšï¼Œä»€ä¹ˆé¡µé¢åšï¼Œå¹¶ä¸ä¸€å®šã€‚</p>
<p>è€Œâ€œarchive.todayâ€æ˜¯ä¸€ä¸ªä½ å¯ä»¥å»ä¸»åŠ¨å­˜æ¡£çš„ç½‘ç«™ã€‚</p>
<p>æ¯”å¦‚ï¼Œè¿˜æ˜¯è¯´å› reddit ä¸Šçš„é‚£ä¸ªå¸–å­ã€‚</p>
<p>å¸–å­ä¸‹é¢æœ‰è¿™æ ·çš„ä¸€ä¸ªå›å¤ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/03163a9d2dd6484bb9532d38fc479533~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd2h55oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768825664&amp;x-signature=LRohct2QROtYe9ePXsbh3G5QQGU%3D" alt="" loading="lazy"/></p>
<p>è¿™ä¸ªå›å¤ä¸­çš„è¶…é“¾æ¥å°±æ˜¯å›å¤è€…æ‰¾åˆ°çš„å…³äºè¿™ä¸ªâ€œçˆ†æ–™â€æ˜¯ AI ç”Ÿæˆçš„è¯æ®ã€‚</p>
<p>ç‚¹è¿‡å»æ˜¯è¿™æ ·çš„ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f222238348e94f20a56c423ace7094ae~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd2h55oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768825664&amp;x-signature=tUewecSWKtBZll%2By9SRkwdGsM%2BU%3D" alt="" loading="lazy"/></p>
<p>ä»–æä¾›çš„æ˜¯ä¸€ä¸ªç½‘é¡µå­˜æ¡£ã€‚</p>
<p>ä¸ºä»€ä¹ˆä»–è¦è¿™ä¹ˆåšå‘¢ï¼Ÿ</p>
<p>ä½ æƒ³æƒ³ï¼Œå¦‚æœä»–æä¾›ä¸€ä¸ªåŸå§‹é“¾æ¥ï¼Œä½†æ˜¯è¿™ä¸ªåŸå§‹é“¾æ¥çªç„¶æœ‰ä¸€å¤©æ‰¾ä¸åˆ°äº†ï¼Œå²‚ä¸æ˜¯å¾ˆå°´å°¬ï¼Ÿ</p>
<p>ä½†æ˜¯å…ˆåœ¨â€œarchive.todayâ€ä¸Šå­˜æ¡£ä¸€ä¸‹ï¼Œç„¶åæŠŠè¿™ä¸ªå­˜æ¡£åçš„é“¾æ¥è´´å‡ºæ¥ï¼Œå°±ç¨³å½“å¤šäº†ã€‚</p>
<p>ä»¥åä½ è¦ä¿å­˜è¯æ®çš„è¯ï¼Œä½ å°±å¯ä»¥ä½¿ç”¨è¿™ä¸ªç½‘ç«™ã€‚</p>
<p>å¦å¤–ï¼Œè¿™ä¸ªç½‘ç«™è¿˜æœ‰ä¸€ä¸ªéªšæ“ä½œã€‚</p>
<p>åè€Œæ˜¯éªšæ“ä½œè®©è¿™ä¸ªç½‘ç«™çš„æ‰“å¼€ç‡æ›´é«˜ä¸€ç‚¹ã€‚</p>
<p>å›½å¤–çš„ä¸€äº›ç½‘ç«™å¯èƒ½æœ‰äº›æ–‡ç« æ˜¯è¦ä»˜è´¹æ‰èƒ½çœ‹åˆ°çš„ã€‚</p>
<p>æ¯”å¦‚çº½çº¦æ—¶æŠ¥ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6415d5015649444c9a1fab637917d164~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd2h55oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768825664&amp;x-signature=goBqhgCzyTCWdEK2NWiJkK6e5AM%3D" alt="" loading="lazy"/></p>
<p>ä½†æ˜¯ï¼Œå¦‚æœä½ ä¸€ä¸å°å¿ƒæŠŠä»˜è´¹æ–‡ç« çš„é“¾æ¥è´´åœ¨è¿™ä¸ªç½‘ç«™ä¸Šå»æœç´¢ã€‚</p>
<p>æœ‰ä¸€äº›â€œå¥½äº‹ä¹‹äººâ€å·²ç»å¸®ä½ æŠŠæ–‡ç« åœ¨è¿™ä¸ªç½‘ç«™ä¸Šåšäº†å¿«ç…§äº†ï¼Œè¿™äº›äººå¯ä»¥ç§°ä¹‹ä¸ºâ€œèµ›åšè©è¨â€ï¼Œå› ä¸ºè¿™äº›â€œè©è¨â€ï¼Œä½ å°±å¯èƒ½çœ‹åˆ°å…è´¹çš„åŸæ–‡äº†ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/eb50dc6ea08e4990a20b0a7f760b589c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd2h55oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768825664&amp;x-signature=tQ7q5SDgN51BI1tx6ZJ32%2Blk1VA%3D" alt="" loading="lazy"/></p>
<p>åœ¨è¿™é‡Œå ä¸ªç”²å•Šï¼Œå¶å°”çœ‹åˆ°ä¸€ä¸¤ç¯‡çš„è¯å¯ä»¥è¿™æ ·æ“ä½œä¸€ä¸‹ï¼Œå°±å½“æ—¶æ˜¯è¯•çœ‹äº†ã€‚</p>
<p>å¦‚æœç»å¸¸è¦çœ‹çš„è¯ï¼Œè¿˜æ˜¯å……ç‚¹é’±å§ã€‚</p>
<p>å¯¹äº†ï¼Œå¤šè¯´ä¸€å¥ï¼Œä¸Šé¢æåˆ°çš„ç¥å¥‡çš„ç½‘ç«™æ—¢ç„¶å«åšæ—¶å…‰èƒ¶å›Šï¼Œè¿˜æœ‰ä¸€äº›èµ›åšè©è¨ï¼Œè¿™äº›é­”æ³•ä¸–ç•Œä¸­æ‰æœ‰çš„ä¸œè¥¿ï¼Œé‚£è‚¯å®šéœ€è¦ä½ ä¼šå¯¹åº”çš„é­”æ³•å’’è¯­æ‰èƒ½è®¿é—®åˆ°ã€‚å¦‚æœä½ ä¸ä¼šé­”æ³•ï¼Œå¼ºè¡Œè®¿é—®ï¼Œé‚£ä½ è‚¯å®šè¦æ’åˆ°å¢™ä¸Šã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9133a1b408de4b3596e6d17063f1351d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd2h55oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768825664&amp;x-signature=3b2ALf%2BmjUW%2B5Dsjru8uymzvzos%3D" alt="" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[2026å¹´æœ€æ–°æ³¨å†Œè°·æ­Œè´¦å·é‡åˆ°æ‰«ç æ— æ³•éªŒè¯çš„æƒ…å†µæ€ä¹ˆåŠï¼Ÿæœ€æ–°è§£å†³æ–¹æ³•ç»•è¿‡è°·æ­Œçš„äºŒç»´ç éªŒè¯æˆåŠŸæ³¨å†Œï¼]]></title>    <link>https://juejin.cn/post/7594262760940142626</link>    <guid>https://juejin.cn/post/7594262760940142626</guid>    <pubDate>2026-01-12T12:31:28.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594262760940142626" data-draft-id="7594093947809316898" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="2026å¹´æœ€æ–°æ³¨å†Œè°·æ­Œè´¦å·é‡åˆ°æ‰«ç æ— æ³•éªŒè¯çš„æƒ…å†µæ€ä¹ˆåŠï¼Ÿæœ€æ–°è§£å†³æ–¹æ³•ç»•è¿‡è°·æ­Œçš„äºŒç»´ç éªŒè¯æˆåŠŸæ³¨å†Œï¼"/> <meta itemprop="keywords" content="Gemini"/> <meta itemprop="datePublished" content="2026-01-12T12:31:28.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Macçš„å®éªŒå®¤"/> <meta itemprop="url" content="https://juejin.cn/user/2958128164897127"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            2026å¹´æœ€æ–°æ³¨å†Œè°·æ­Œè´¦å·é‡åˆ°æ‰«ç æ— æ³•éªŒè¯çš„æƒ…å†µæ€ä¹ˆåŠï¼Ÿæœ€æ–°è§£å†³æ–¹æ³•ç»•è¿‡è°·æ­Œçš„äºŒç»´ç éªŒè¯æˆåŠŸæ³¨å†Œï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2958128164897127/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Macçš„å®éªŒå®¤
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-12T12:31:28.000Z" title="Mon Jan 12 2026 12:31:28 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æ³¨å†ŒGmailè´¦å·å‡ºç°ä½¿ç”¨æ‰‹æœºæ‰«æäºŒç»´ç éªŒè¯æ€ä¹ˆåŠï¼Ÿæœ€è¿‘å¾ˆå¤šäººåœ¨æ³¨å†Œè°·æ­ŒGmailé‚®ç®±çš„è¿‡ç¨‹ä¸­ï¼Œä¼šçªç„¶å¡åœ¨ä¸€ä¸ªè®©äººéå¸¸ä¸é€‚çš„æ­¥éª¤ï¼š</p>
<p>ä¸ºå®‰å…¨èµ·è§ï¼ŒGoogle éœ€è¦éªŒè¯æ‚¨çš„è®¾å¤‡æˆ–ç”µè¯å·ç ã€‚</p>
<p>æ‚¨çš„æ‰‹æœºä¼šæ‰“å¼€ä¸€æ¡å«éªŒè¯ç çš„çŸ­ä¿¡ï¼Œè¯·è¾“å…¥è¯¥ç æ¥éªŒè¯æ‚¨çš„ç”µè¯å·ç ã€‚æ‚¨çš„è¿è¥å•†å¯èƒ½ä¼šé’ˆå¯¹éªŒè¯çŸ­ä¿¡æ”¶è´¹ã€‚æ‚¨éœ€è¦æŒ‰å›½é™…çŸ­ä¿¡è´¹ç‡ä»˜è´¹ã€‚</p>
<p>â€œ<strong>è¯·ä½¿ç”¨æ‰‹æœºæ‰«æäºŒç»´ç å®ŒæˆéªŒè¯</strong>â€å¦‚ä½•è§£å†³ï¼Ÿ</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b4a05422649645f89407afeee197c459~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWFj55qE5a6e6aqM5a6k:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768825887&amp;x-signature=NYiTgOB6o2Ubp3OjxMwpFCqOmBM%3D" alt="0065e76b549b37debbdd470ccb1b8303509a3f07.png" loading="lazy"/></p>
<p>æ²¡æœ‰è¾“å…¥æ‰‹æœºå·çš„é€‰é¡¹ï¼Œä¹Ÿæ²¡æœ‰çŸ­ä¿¡éªŒè¯ç ï¼Œåªèƒ½æ‰«ç ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3fa53ac9cd634dc3a924021194eaeb24~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWFj55qE5a6e6aqM5a6k:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768825887&amp;x-signature=Yod7NQW8s09jVyA74yPh%2BOdE6dY%3D" alt="" loading="lazy"/></p>
<p>å¾ˆå¤šäººå¡åœ¨è¿™ä¸€æ­¥ï¼Œåå¤å¤±è´¥ï¼Œç”šè‡³æ€€ç–‘æ˜¯ä¸æ˜¯è‡ªå·±ç½‘ç»œæˆ–è®¾å¤‡å‡ºäº†é—®é¢˜ã€‚å®é™…ä¸Šï¼Œè¿™å¹¶ä¸æ˜¯ä¸ªä¾‹ï¼Œè€Œæ˜¯ Googleè¿‘ä¸¤å¹´æ˜æ˜¾åŠ å¼ºçš„è´¦å·æ³¨å†Œé£æ§æœºåˆ¶ã€‚</p>
<p>æœ¬æ–‡å°†åŸºäºçœŸå®å®æµ‹ç»éªŒï¼Œå¸®ä½ ææ¸…æ¥šæ³¨å†ŒGmailè´¦å·å‡ºç°ä½¿ç”¨æ‰‹æœºæ‰«æäºŒç»´ç éªŒè¯çš„å‰å› åæœï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1830c3a9c0884da2a7dfff0ae30728ac~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWFj55qE5a6e6aqM5a6k:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768825887&amp;x-signature=4VaCBZyWOBK%2BTJEY%2BlZlZ1xEj%2FM%3D" alt="" loading="lazy"/></p>
<ul>
<li>
<p><strong>ä¸ºä»€ä¹ˆä¼šå‡ºç°äºŒç»´ç éªŒè¯</strong></p>
</li>
<li>
<p><strong>å“ªäº›ç¯å¢ƒæœ€å®¹æ˜“è§¦å‘</strong></p>
</li>
<li>
<p><strong>å·²ç»è¢«è¦æ±‚æ‰«ç ï¼Œè¿˜æœ‰æ²¡æœ‰è¡¥æ•‘åŠæ³•</strong></p>
</li>
</ul>
<p><strong>ä¸€</strong></p>
<p><strong>ä¸ºä»€ä¹ˆGoogleæ³¨å†Œä¼šçªç„¶è¦æ±‚æ‰«ç éªŒè¯ï¼Ÿ</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f5edf773561646cbac5482247657dedd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWFj55qE5a6e6aqM5a6k:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768825887&amp;x-signature=%2FNM4%2FpmQ2lD9XSo7N41IYyTgres%3D" alt="" loading="lazy"/></p>
<p>è¿™ä¸ªé—®é¢˜ï¼Œå…¶å®å¹¶ä¸æ˜¯æœ€è¿‘æ‰å‡ºç°çš„ã€‚æ—©æœ‰æŠ¥é“è°·æ­Œçš„ç®¡ç†å±‚è®¤ä¸ºä½¿ç”¨äºŒç»´ç ä»£æ›¿æ‰‹æœºå·éªŒè¯æ˜¯å¿…ç»ä¹‹è·¯ï¼Œè¿™æ ·çš„æ–¹å¼æ›´å®‰å…¨ã€‚</p>
<p>æˆ‘ç¬¬ä¸€æ¬¡æ³¨æ„åˆ°å®ƒï¼Œå¤§æ¦‚æ˜¯åœ¨2025å¹´8æœˆã€‚å½“æ—¶æˆ‘åœ¨æµ‹è¯•ä¸åŒæ³¨å†Œç¯å¢ƒï¼ˆæ¯”å¦‚æŒ‡çº¹æµè§ˆå™¨ï¼‰æ—¶ï¼Œå¶å°”ä¼šé‡åˆ°äºŒç»´ç éªŒè¯ï¼Œæˆ‘ä»¥ä¸ºåªæ˜¯éšæœºé£æ§ï¼Œæ²¡æœ‰å¤ªåœ¨æ„ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/aff635985dea4bcda772a56bae745524~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWFj55qE5a6e6aqM5a6k:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768825887&amp;x-signature=cMVN56b5bHT2OBRpVTQaAWpbsys%3D" alt="" loading="lazy"/></p>
<p>ä½†åˆ°äº†æœ€è¿‘å†æ¬¡æµ‹è¯•æ—¶ï¼Œæƒ…å†µæ˜æ˜¾å˜äº†ï¼š</p>
<p>â€œ<strong>åªè¦ä½¿ç”¨æŒ‡çº¹æµè§ˆå™¨ç¯å¢ƒæ³¨å†Œï¼Œå‡ ä¹æ¯ä¸€æ¬¡éƒ½ä¼šå¼ºåˆ¶è¦æ±‚æ‰«ç ã€‚</strong> â€</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Faccounts.google.com%2Fdevicephoneverification%2Fstart%3Frequest_id%3D38acb622-40dc-45dc-b65f-c835d4894325%26hl%3Den%26pnv_flow%3D2%26dsh%3DS991166378%3A1758196222276646%26tid%3DD4MeQWCu_sXwFbBHYJQD-w~~%26flow%3Dbrowser%26idv_origin%3D1" target="_blank" title="https://accounts.google.com/devicephoneverification/start?request_id=38acb622-40dc-45dc-b65f-c835d4894325&amp;hl=en&amp;pnv_flow=2&amp;dsh=S991166378:1758196222276646&amp;tid=D4MeQWCu_sXwFbBHYJQD-w~~&amp;flow=browser&amp;idv_origin=1" ref="nofollow noopener noreferrer">accounts.google.com/devicephoneâ€¦</a> (äºŒç»´ç è‡ªåŠ¨è¯†åˆ«)</p>
<p>è¿™è¯´æ˜ä¸€ä»¶äº‹ï¼š<br/>
<strong>Google å·²ç»ç³»ç»Ÿæ€§åœ°æé«˜äº†æ³¨å†Œé—¨æ§›ï¼Œè€Œä¸æ˜¯å¶å‘è¡Œä¸ºã€‚</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8a32c157d5084f118dc22dd7d70aeec4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWFj55qE5a6e6aqM5a6k:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768825887&amp;x-signature=fDVcxjFmPl1z%2BfG198RecjcBOGs%3D" alt="" loading="lazy"/></p>
<p>äºŒç»´ç éªŒè¯çš„çœŸå®ç›®çš„æ‰«ç å¹¶ä¸æ˜¯ä¸ºäº†æ–¹ä¾¿ç”¨æˆ·ï¼Œè€Œæ˜¯ä¸ºäº†ï¼š</p>
<ul>
<li>
<p><strong>å¼ºåˆ¶ä½¿ç”¨çœŸå®æ‰‹æœºè®¾å¤‡</strong></p>
</li>
<li>
<p><strong>è¦æ±‚é€šè¿‡è¿è¥å•†ç½‘ç»œå®ŒæˆéªŒè¯</strong></p>
</li>
<li>
<p><strong>æ’é™¤æ¨¡æ‹Ÿã€æ‰¹é‡æˆ–å¼‚å¸¸æ³¨å†Œç¯å¢ƒ</strong></p>
</li>
</ul>
<p>ç®€å•ç†è§£å°±æ˜¯ï¼š<br/>
Google æƒ³ç¡®è®¤ï¼šè¿™æ˜¯ä¸€ä¸ªâ€œ<strong>çœŸå®ç”¨æˆ· + çœŸå®è®¾å¤‡</strong>â€çš„æ³¨å†Œè¡Œä¸ºã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e91a723b2c144ecbae9beb2c83b2b56f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWFj55qE5a6e6aqM5a6k:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768825887&amp;x-signature=6ORL5i6%2FUiPjOhOFGbl1YvleaJU%3D" alt="" loading="lazy"/></p>
<p>è€Œé—®é¢˜åœ¨äºï¼š<br/>
<strong>éƒ¨åˆ†ä¸­å›½æ‰‹æœºå· + ç½‘ç»œç¯å¢ƒ</strong>ï¼Œä¸Googleçš„å…¼å®¹æ€§æœ¬èº«å°±ä¸ç†æƒ³</p>
<p>äºæ˜¯ï¼Œæ‰«ç å°±æˆäº†å¾ˆå¤šäººæ³¨å†Œå¤±è´¥çš„èµ·ç‚¹ã€‚</p>
<p><strong>äºŒ</strong></p>
<p><strong>å“ªäº›æ³¨å†Œç¯å¢ƒæœ€å®¹æ˜“è§¦å‘äºŒç»´ç éªŒè¯ï¼Ÿ</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/28c63e9e2a29426db2d81844fcdacaac~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWFj55qE5a6e6aqM5a6k:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768825887&amp;x-signature=tP1UPCi%2Bt7S%2FzJAaNw%2B0PHfDu6o%3D" alt="" loading="lazy"/></p>
<p>ä¸ºäº†å†™è¿™ç¯‡æ–‡ç« ï¼Œæˆ‘è‡ªå·±åšäº†ä¸€è½®æµ‹è¯•ï¼Œç»“æœå¦‚ä¸‹ï¼š</p>
<p><strong>1</strong></p>
<p><strong>æŒ‡çº¹æµè§ˆå™¨ï¼ˆAnti-detect æµè§ˆå™¨</strong></p>
<p>è¿™ç§æµè§ˆå™¨æœ¬æ¥æ˜¯ç”¨æ¥éš”ç¦»è´¦å·ç¯å¢ƒçš„ï¼Œä½†åœ¨ Gmail æ³¨å†Œåœºæ™¯ä¸­ï¼Œæ•ˆæœå¹¶ä¸å¥½ã€‚</p>





















<table><thead><tr><th>ç³»ç»Ÿ / ç¯å¢ƒ</th><th>æ˜¯å¦å¯ç»•è¿‡äºŒç»´ç </th></tr></thead><tbody><tr><td>Macï¼ˆARM / Intelï¼‰</td><td>âŒ</td></tr><tr><td>Windows</td><td>âŒ</td></tr><tr><td>Linux</td><td>âœ…ï¼ˆéƒ¨åˆ†å¯è¡Œï¼‰</td></tr></tbody></table>
<p><strong>ç»“è®º</strong></p>
<p><strong>ç»å¤§å¤šæ•°æŒ‡çº¹æµè§ˆå™¨ç¯å¢ƒéƒ½ä¼šè§¦å‘æ‰«ç éªŒè¯ã€‚</strong><br/>
å³ä½¿æ˜¯ Linuxï¼Œä¹Ÿå’Œä½ ç”¨çš„å…·ä½“æµè§ˆå™¨ã€é…ç½®æœ‰å…³ï¼Œæˆ‘è‡ªå·±æµ‹è¯•æ—¶ï¼Œéƒ¨åˆ†Linux ç¯å¢ƒä¾ç„¶ä¼šè¦æ±‚æ‰«ç ï¼ˆæœ‰å…¶å®ƒåšä¸»æµ‹è¯•Linuxç¯å¢ƒåªæœ‰éƒ¨åˆ†éœ€è¦æ‰«ç ï¼‰ã€‚</p>
<p><strong>2</strong></p>
<p><strong>æ™®é€šè®¾å¤‡ + Chromeæ— ç—•æ¨¡å¼</strong></p>
<p>è¿™æ˜¯ç›®å‰æˆåŠŸç‡ç›¸å¯¹æœ€é«˜çš„æ–¹å¼ä¹‹ä¸€ï¼š</p>
<ul>
<li>
<p><strong>æ™®é€šç”µè„‘/ iOS è®¾å¤‡</strong></p>
</li>
<li>
<p><strong>Chrome æ— ç—•ï¼ˆéšèº«ï¼‰æ¨¡å¼</strong></p>
</li>
<li>
<p><strong>ç›´æ¥è®¿é—®Gmail å®˜æ–¹æ³¨å†Œé¡µé¢</strong></p>
</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ee8786bfadea407197cbbf9f2b2c48ce~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWFj55qE5a6e6aqM5a6k:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768825887&amp;x-signature=K2OowZibecP%2FBGunZnZH%2B0d0zac%3D" alt="" loading="lazy"/></p>
<p>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¤§å¤šæ•°æ—¶å€™<strong>ä¸ä¼šå‡ºç°äºŒç»´ç </strong>ï¼Œè€Œæ˜¯ç›´æ¥è¿›å…¥ã€<strong>çŸ­ä¿¡éªŒè¯ç </strong>ã€‘é˜¶æ®µã€‚</p>
<p>âš ï¸ <strong>è¡¥å……ä¸€ä¸ªç»†èŠ‚</strong>ï¼š<br/>
æœ‰éƒ¨åˆ†å®‰å“è®¾å¤‡åœ¨æ³¨å†Œæ—¶ï¼Œé¡µé¢åªæ˜¾ç¤ºã€<strong>éªŒè¯ä½ çš„æ‰‹æœºå·ç </strong>ã€‘ï¼Œä½†å¹¶æ²¡æœ‰è®©ä½ è¾“å…¥å·ç ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fb5d44baf47f468d8fe17da1d171f479~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWFj55qE5a6e6aqM5a6k:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768825887&amp;x-signature=qEsgC88nlkRWZsmz4YJKZlLkiCs%3D" alt="" loading="lazy"/></p>
<p>è¿™ç±»æƒ…å†µï¼Œæœ¬è´¨å’Œæ‰«ç éªŒè¯æ˜¯åŒä¸€å¥—é€»è¾‘â€”â€”</p>
<p>ä»ç„¶æ˜¯åœ¨éªŒè¯â€œ<strong>è®¾å¤‡ + å·ç </strong>â€çš„çœŸå®æ€§ã€‚</p>
<p><strong>å·²ç»è¢«è¦æ±‚æ‰«ç äº†ï¼Œè¿˜èƒ½è¡¥æ•‘å—ï¼Ÿ</strong></p>
<p>ç­”æ¡ˆæ˜¯ï¼š<strong>å¯ä»¥ï¼Œä½†åƒä¸‡ä¸è¦å¼ºè¡Œå°è¯•</strong>ã€‚</p>
<p><strong>âœ” å¯è¡Œåšæ³•ï¼ˆæ¨èï¼‰</strong></p>
<ol>
<li><strong>æ¢ä¸€å°çœŸå®æ‰‹æœºæˆ–è€…å¦å¤–çš„ç”µè„‘è®¾å¤‡</strong></li>
<li><strong>ç”¨æ–°è®¾å¤‡é‡æ–°è®¿é—®Googleæ³¨å†Œé¡µé¢</strong></li>
<li><strong>ä»å¤´èµ°ä¸€éæ³¨å†Œæµç¨‹</strong></li>
</ol>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3c105795d85c4d18957ee32e3ee6da5b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWFj55qE5a6e6aqM5a6k:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768825887&amp;x-signature=kJ8FPrlbD88K2WXlrjW%2FKsoMrbc%3D" alt="" loading="lazy"/></p>
<p>åœ¨å¤šæ•°æƒ…å†µä¸‹ï¼Œåªè¦æ›´æ¢è®¾å¤‡ï¼ŒäºŒç»´ç éªŒè¯å°±ä¸ä¼šå†æ¬¡å‡ºç°ã€‚</p>
<p>ä½†æœ€å¤§çš„éš¾é¢˜å°±æ˜¯éœ€è¦æ‰‹æœºå·è¿›è¡ŒéªŒè¯ï¼Œé‚£æœ‰æ²¡æœ‰å¯èƒ½ç›´æ¥è·³è¿‡æ‰‹æœºå·çš„éªŒè¯å‘¢ï¼Ÿ</p>
<p><strong>ç›´æ¥ä¸Šæ•™ç¨‹ï¼</strong></p>
<h2 data-id="heading-0"><strong>å¦‚ä½•è·³è¿‡æ‰‹æœºå·æ³¨å†Œè°·æ­Œé‚®ç®±</strong></h2>
<h2 data-id="heading-1"><strong>1.åŸºç¡€æ¡ä»¶å‡†å¤‡ï¼š</strong></h2>
<ul>
<li>
<p>æ‰‹æœºï¼ˆè‹¹æœ/å®‰å“ï¼‰<br/>
åä¸ºä½“ç³»å»ºè®®å°±æ”¾å¼ƒå§</p>
</li>
<li>
<p>æ‰‹æœºå¯ä»¥é­”æ³•ä¸Šç½‘</p>
</li>
<li>
<p>é¢å¤–ï¼šè‹¹æœæ‰‹æœºä¸€å®šè¦ä½¿ç”¨éå›½å†…çš„<strong>è‹¹æœID</strong>ä¸‹è½½Gmailã€‚å¦‚æœè§‰å¾—å¤æ‚ä¸æƒ³æŠ˜è…¾çš„åŒå­¦å¯ä»¥å‚è€ƒå¤§ç¥è°·æ­Œæ³¨å†Œå¿«æ·å…¥å£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Flink.zhihu.com%2F%3Ftarget%3Dhttps%253A%2F%2Fsoloist.ai%2Fguge" target="_blank" title="https://link.zhihu.com/?target=https%3A//soloist.ai/guge" ref="nofollow noopener noreferrer">soloist.ai/guge</a></p>
</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f0f24f348970496e8f2fc87c3b915e2b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWFj55qE5a6e6aqM5a6k:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768825887&amp;x-signature=o1nrJVJRtj7qXkk87EizqEbLXG8%3D" alt="" loading="lazy"/></p>
<p><strong>2.å…·ä½“æ•™ç¨‹</strong></p>
<p>2.1 æ‰“å¼€é­”æ³•èŠ‚ç‚¹å»ºè®®é€‰æ‹©<strong>ç¾å›½</strong>ã€‚</p>
<p>2.2 ç™»é™†éå›½å†…è‹¹æœIDï¼ŒAPP store æœç´¢Gmailè¿›è¡Œä¸‹è½½ã€‚</p>
<p>2.3 ä¸‹è½½æ‰“å¼€Gmailï¼Œé€‰æ‹©ã€Œ<strong>ç™»é™†</strong>ã€ï¼Œé€‰æ‹©ã€Œ<strong>æ³¨å†Œ</strong>ã€ï¼Œé€‰æ‹©ã€Œ<strong>ä¸ªäººè´¦æˆ·</strong>ã€</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/84c082df8a894b67b8664e443c32c259~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWFj55qE5a6e6aqM5a6k:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768825887&amp;x-signature=MEVoL7dCAPk%2F%2BEjqjoDmoa1xwMk%3D" alt="" loading="lazy"/></p>
<p>2.4 å¡«å†™åŸºæœ¬ä¿¡æ¯ï¼Œå§“å’Œååƒä¸‡<strong>ä¸è¦å¡«å†™ä¸­æ–‡</strong>ï¼Œæ³¨å†Œå¹´ä»½ä¸€å®šè¦å¡«<strong>2000å¹´ä¹‹å‰</strong>ï¼Œå› ä¸ºå¦‚æœæ˜¯æœªæˆå¹´äººåŸºæœ¬ä¼šè¢«æ‹’ç»ã€‚å…¶ä»–çš„éšä¾¿å¡«å†™ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/588afe204e9f40cf8efe6cc0905f2fc2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWFj55qE5a6e6aqM5a6k:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768825887&amp;x-signature=kSwoq9%2F2SJGKBbIF8MHj1NwSwl0%3D" alt="" loading="lazy"/></p>
<p>2.5 ã€Œ<strong>åˆ›å»ºä¸€ä¸ªé‚®ç®±</strong>ã€ï¼Œä¸€å®šè¦é€‰æ‹©ä¸€ä¸ªè‡ªå·±å®¹æ˜“ç†Ÿè®°çš„è´¦å·ï¼Œå»ºè®®æ˜¯åˆ›å»ºæ‚¨è‡ªå·±çš„Gmailé‚®ç®±ï¼Œè´¦å·åç§°ä½¿ç”¨ã€Œ<strong>è‡ªå·±å§“åå…¨æ‹¼+æ•°å­—</strong>ã€ã€‚è´¦å·ååé¢ç¡®å®šäº†ä¹‹åå°±ä¸èƒ½æ›´æ”¹äº†ï¼Œæ‰€ä»¥æ³¨å†Œçš„æ—¶å€™ä¸€å®šè¦è°¨è®°ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6ca77bb5166a401581f021be40202123~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWFj55qE5a6e6aqM5a6k:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768825887&amp;x-signature=pYRvDPnpWhmGbBd7NQdHC5TI3lQ%3D" alt="" loading="lazy"/></p>
<p>2.6 è¦æ·»åŠ ç”µè¯å·ç å—ï¼Ÿé‚£è‚¯å®šæ˜¯ä¸å•Šï¼ï¼ï¼å¾€ä¸‹æ»‘ï¼Œä¼šæœ‰ä¸€ä¸ªè·³è¿‡çš„é€‰é¡¹ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/370fba43f229443dbcfd80d1633778b0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWFj55qE5a6e6aqM5a6k:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768825887&amp;x-signature=kz6vi3SoXu0mTmnJdv60BVXP8Cs%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/32ab0a529f6c45ca92d8da0bfbcff8dd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWFj55qE5a6e6aqM5a6k:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768825887&amp;x-signature=uONDrwRLaqePW15RrV6dUb7Zxto%3D" alt="" loading="lazy"/></p>
<p>2.7 éšç§æƒå’Œæ¡æ¬¾ é€‰æ‹©åŒæ„å°±å¯ä»¥äº†ã€‚ å…¶ä»–çš„é€‰é¡¹å¯ä»¥ç›´æ¥è·³è¿‡ï¼Œæˆ–è€…æ˜¯åŒæ„</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6679862b6ed44e8798577f92441b88b9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWFj55qE5a6e6aqM5a6k:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768825887&amp;x-signature=zfGDDvzYSO17o1v5b8%2FM%2F5cCEPc%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/abe2725c865645819920eaa60d6c0930~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWFj55qE5a6e6aqM5a6k:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768825887&amp;x-signature=PlyRDk3jX1si8gJmo2dBIzHSrTI%3D" alt="" loading="lazy"/></p>
<p>2.8 æ­å–œä½ ï¼Œå·²ç»æ‹¿åˆ°ä¸€ä¸ªè°·æ­Œé‚®ç®±ï¼Œä½†æ˜¯åé¢å¦‚æœä½ æƒ³é•¿æœŸä½¿ç”¨ï¼Œå»ºè®®ä½ è¿˜æ˜¯åœ¨ä¸ªäººä¿¡æ¯ä¸­ç»‘å®šæ‰‹æœºå·å’Œè¾…åŠ©é‚®ç®±ï¼Œä¸ç„¶è°·æ­Œç³»ç»Ÿä¼šåˆ¤å®šä½ æ˜¯ä¸€ä¸ªéæ­£å¸¸ä½¿ç”¨çš„è´¦å·ï¼Œå¯èƒ½ä¼šå°æ‰ä½ çš„è´¦å·ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/baa4a2294c8549da9063afed892557b7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWFj55qE5a6e6aqM5a6k:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768825887&amp;x-signature=M1ZEGHDFNV7U7x20B4vf5XjlaDg%3D" alt="" loading="lazy"/></p>
<p>2.9 å…¶ä»–ï¼šå¦‚æœä½ çš„æ‰‹æœºå·åœ¨ç»‘å®šçš„æ—¶å€™å‡ºç°æ— æ³•æ”¶åˆ°éªŒè¯ç çš„æƒ…å†µï¼Œå»ºè®®ä½ å’¨è¯¢ä¸€ä¸‹ç›¸å…³çš„è¿è¥å•†ï¼Œä»–ä»¬ä¼šå¸®ä½ è§£å†³çš„ã€‚å¦‚æœè§£å†³ä¸äº†å¯ä»¥å‚è§å…¬ä¼—å·ï¼š<strong>Macçš„å®éªŒå®¤</strong> åå°å›å¤ <strong>è°·æ­Œ</strong> è·å–æœ€æ–°è°·æ­Œæ³¨å†Œæ•™ç¨‹ï¼Œé•¿æœŸæ›´æ–°Googleæ³¨å†Œæœ€æ–°æœ‰æ•ˆæ–¹æ³•ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/88c6552a827740ffa2f26a960c0c1d60~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWFj55qE5a6e6aqM5a6k:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768825887&amp;x-signature=xbGSn6SfnIfNqvK%2F4ldv%2FBumrgk%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/85fa335fc5774104a53b298efd9e17f6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWFj55qE5a6e6aqM5a6k:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768825887&amp;x-signature=IOsQtZzHCV8bUMHLbsWg2oyh9nA%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-2"><strong>é‚£ä¸ºä»€ä¹ˆè¦æ³¨å†Œè°·æ­Œé‚®ç®±å‘¢ï¼Ÿ</strong></h2>
<p>è°·æ­Œé‚®ç®±ç›®å‰æ˜¯å¯ä»¥æ‰“é€šæ‰€æœ‰çš„å¹³å°è¿›è¡Œè´¦å·æ³¨å†Œï¼Œæ¯”å¦‚æ‰€æœ‰å›½å¤–AIæ¨¡å‹çš„ä½¿ç”¨ï¼Œæ¯”å¦‚<strong>Geminã€Chat GPTã€Cloudã€Gork</strong>ç­‰ç­‰ï¼Œè¿˜æœ‰å¦å¤–çš„è§†é¢‘ç½‘ç«™<strong>YouTube</strong>ã€éŸ³ä¹ç½‘ç«™<strong>spotify</strong>ï¼Œç­‰ç­‰ï¼Œæœ‰äº†è°·æ­Œè´¦å·ï¼ŒåŸºæœ¬éšéšä¾¿ä¾¿æ“ä½œä¸€ä¸‹å°±å¾ˆå®¹æ˜“ç”³è¯·è¿‡äº†ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2e5c8ac47ed642c688d46da104ffa2ba~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWFj55qE5a6e6aqM5a6k:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768825887&amp;x-signature=H0IS0X4fjXa%2FhSAWg4otr%2B5ZKp8%3D" alt="" loading="lazy"/></p>
<p>æ‰€ä»¥ï¼Œæ€»çš„æ¥è¯´ï¼Œè°·æ­Œé‚®ç®±ç®—æ˜¯ä½ è¿›å…¥å¦ä¸€ä¸ªä¸–ç•Œçš„å¿…å¤‡é’¥åŒ™ï¼Œæƒ³ä¸æƒ³è¦ã€è¦ä¸è¦ç»™è‡ªå·±ä¸€ä¸ªå¦å¤–çš„è§†è§’å°±é è‡ªå·±åé¢çš„è¡ŒåŠ¨äº†ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dda24c745bd24c4b990bba99a8b4508d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWFj55qE5a6e6aqM5a6k:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768825887&amp;x-signature=BYX6CSta6CPBbACdp4l7McfaQ90%3D" alt="" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è§£å†³Vueæ‰“åŒ…åé™æ€èµ„æºå›¾ç‰‡å¤±æ•ˆçš„ç»ˆææŒ‡å—]]></title>    <link>https://juejin.cn/post/7594309641866313766</link>    <guid>https://juejin.cn/post/7594309641866313766</guid>    <pubDate>2026-01-12T12:38:56.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594309641866313766" data-draft-id="7594276252460187658" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è§£å†³Vueæ‰“åŒ…åé™æ€èµ„æºå›¾ç‰‡å¤±æ•ˆçš„ç»ˆææŒ‡å—"/> <meta itemprop="keywords" content="Vue.js"/> <meta itemprop="datePublished" content="2026-01-12T12:38:56.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åŒ—è¾°alk"/> <meta itemprop="url" content="https://juejin.cn/user/1772855673241352"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è§£å†³Vueæ‰“åŒ…åé™æ€èµ„æºå›¾ç‰‡å¤±æ•ˆçš„ç»ˆææŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1772855673241352/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åŒ—è¾°alk
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-12T12:38:56.000Z" title="Mon Jan 12 2026 12:38:56 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€ï¼šæ¼äººçš„å›¾ç‰‡å¤±æ•ˆé—®é¢˜</h2>
<p>ä½œä¸ºä¸€åVueå¼€å‘è€…ï¼Œä½ æ˜¯å¦ç»å†è¿‡è¿™æ ·çš„åœºæ™¯ï¼šæœ¬åœ°å¼€å‘æ—¶å›¾ç‰‡æ˜¾ç¤ºæ­£å¸¸ï¼Œä½†æ‰“åŒ…éƒ¨ç½²åå´å˜æˆäº†ä»¤äººå¤´ç–¼çš„404ï¼Ÿè¿™ç§é—®é¢˜åœ¨Vueé¡¹ç›®ä¸­ç›¸å½“å¸¸è§ï¼Œä»Šå¤©æˆ‘ä»¬å°±æ¥æ·±å…¥å‰–æè¿™ä¸ªé—®é¢˜ï¼Œå¹¶æä¾›ä¸€æ•´å¥—è§£å†³æ–¹æ¡ˆã€‚</p>
<h2 data-id="heading-1">é—®é¢˜æ ¹æºåˆ†æ</h2>
<h3 data-id="heading-2">ä¸ºä»€ä¹ˆå›¾ç‰‡ä¼šå¤±æ•ˆï¼Ÿ</h3>
<p>åœ¨æ·±å…¥äº†è§£è§£å†³æ–¹æ¡ˆå‰ï¼Œæˆ‘ä»¬å…ˆçœ‹çœ‹é—®é¢˜äº§ç”Ÿçš„æ ¹æœ¬åŸå› ï¼š</p>
<pre><code class="hljs">Vueé¡¹ç›®å›¾ç‰‡å¼•ç”¨å¼•ç”¨æ–¹å¼ç›¸å¯¹è·¯å¾„å¼•ç”¨ç»å¯¹è·¯å¾„å¼•ç”¨åŠ¨æ€ç»‘å®šè·¯å¾„å¼€å‘ç¯å¢ƒæ­£å¸¸å¯èƒ½è·¯å¾„é”™è¯¯æ‰“åŒ…åè·¯å¾„è§£æé—®é¢˜æ‰“åŒ…åè·¯å¾„å˜åŒ–éƒ¨ç½²ç¯å¢ƒè·¯å¾„ä¸åŒ¹é…æ¨¡å—ç³»ç»Ÿå¤„ç†å·®å¼‚å›¾ç‰‡404
</code></pre>
<p>ä»ä¸Šå›¾å¯ä»¥çœ‹å‡ºï¼Œé—®é¢˜çš„æ ¸å¿ƒåœ¨äº<strong>å¼€å‘ç¯å¢ƒä¸ç”Ÿäº§ç¯å¢ƒçš„è·¯å¾„å·®å¼‚</strong>ä»¥åŠ<strong>æ„å»ºå·¥å…·çš„è·¯å¾„å¤„ç†æ–¹å¼</strong>ã€‚</p>
<h2 data-id="heading-3">è§£å†³æ–¹æ¡ˆå¤§å…¨</h2>
<h3 data-id="heading-4">æ–¹æ¡ˆä¸€ï¼šæ­£ç¡®çš„é™æ€èµ„æºå¼•ç”¨æ–¹å¼</h3>
<h4 data-id="heading-5">1. æ”¾ç½®åœ¨publicç›®å½•ï¼ˆæ¨èï¼‰</h4>
<p>å°†å›¾ç‰‡æ”¾åœ¨<code>public</code>ç›®å½•ä¸‹ï¼Œä½¿ç”¨ç»å¯¹è·¯å¾„å¼•ç”¨ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!--Â åœ¨publicç›®å½•ä¸‹åˆ›å»ºimagesæ–‡ä»¶å¤¹ï¼Œæ”¾å…¥å›¾ç‰‡Â --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">img</span>Â <span class="hljs-attr">src</span>=<span class="hljs-string">"/images/logo.png"</span>Â <span class="hljs-attr">alt</span>=<span class="hljs-string">"Logo"</span>&gt;</span>

<span class="hljs-comment">&lt;!--Â æˆ–è€…ä½¿ç”¨BASE_URLÂ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">img</span>Â <span class="hljs-attr">:src</span>=<span class="hljs-string">"`${publicPath}images/logo.png`"</span>Â <span class="hljs-attr">alt</span>=<span class="hljs-string">"Logo"</span>&gt;</span>
</code></pre>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">//Â åœ¨Vueç»„ä»¶ä¸­</span>
<span class="hljs-keyword">export</span>Â <span class="hljs-keyword">default</span>Â {
Â Â <span class="hljs-title function_">data</span>(<span class="hljs-params"/>)Â {
Â Â Â Â <span class="hljs-keyword">return</span>Â {
Â Â Â Â Â Â <span class="hljs-attr">publicPath</span>:Â process.<span class="hljs-property">env</span>.<span class="hljs-property">BASE_URL</span>
Â Â Â Â }
Â Â }
}
</code></pre>
<h4 data-id="heading-6">2. ä½¿ç”¨requireåŠ¨æ€å¼•å…¥</h4>
<p>å¯¹äºåœ¨<code>src/assets</code>ç›®å½•ä¸‹çš„å›¾ç‰‡ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
Â Â <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
Â Â Â Â <span class="hljs-comment">&lt;!--Â ç›´æ¥ä½¿ç”¨requireÂ --&gt;</span>
Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">img</span>Â <span class="hljs-attr">:src</span>=<span class="hljs-string">"require('@/assets/images/logo.png')"</span>Â <span class="hljs-attr">alt</span>=<span class="hljs-string">"Logo"</span>&gt;</span>
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">&lt;!--Â æˆ–è€…åœ¨dataä¸­å®šä¹‰Â --&gt;</span>
Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">img</span>Â <span class="hljs-attr">:src</span>=<span class="hljs-string">"logoUrl"</span>Â <span class="hljs-attr">alt</span>=<span class="hljs-string">"Logo"</span>&gt;</span>
Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">export</span>Â <span class="hljs-keyword">default</span>Â {
Â Â <span class="hljs-title function_">data</span>(<span class="hljs-params"/>)Â {
Â Â Â Â <span class="hljs-keyword">return</span>Â {
Â Â Â Â Â Â <span class="hljs-comment">//Â ä½¿ç”¨requireç¡®ä¿Webpackæ­£ç¡®å¤„ç†</span>
Â Â Â Â Â Â <span class="hljs-attr">logoUrl</span>:Â <span class="hljs-built_in">require</span>(<span class="hljs-string">'@/assets/images/logo.png'</span>),
Â Â Â Â Â Â 
Â Â Â Â Â Â <span class="hljs-comment">//Â åŠ¨æ€å›¾ç‰‡åç§°</span>
Â Â Â Â Â Â <span class="hljs-attr">dynamicImage</span>:Â <span class="hljs-literal">null</span>
Â Â Â Â }
Â Â },
Â Â <span class="hljs-attr">methods</span>:Â {
Â Â Â Â <span class="hljs-title function_">loadImage</span>(<span class="hljs-params">imageName</span>)Â {
Â Â Â Â Â Â <span class="hljs-variable language_">this</span>.<span class="hljs-property">dynamicImage</span>Â =Â <span class="hljs-built_in">require</span>(<span class="hljs-string">`@/assets/images/<span class="hljs-subst">${imageName}</span>.png`</span>)
Â Â Â Â }
Â Â }
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<h3 data-id="heading-7">æ–¹æ¡ˆäºŒï¼šé…ç½®Vue CLI</h3>
<h4 data-id="heading-8">1. ä¿®æ”¹vue.config.jsæ–‡ä»¶</h4>
<pre><code class="hljs language-php" lang="php"><span class="hljs-comment">//Â vue.config.js</span>
<span class="hljs-keyword">const</span>Â {Â defineConfigÂ }Â =Â <span class="hljs-keyword">require</span>(<span class="hljs-string">'@vue/cli-service'</span>)

module.exportsÂ =Â <span class="hljs-title function_ invoke__">defineConfig</span>({
Â Â //Â éƒ¨ç½²åº”ç”¨æ—¶çš„åŸºæœ¬URL
<span class="hljs-attr">Â Â publicPath</span>:Â process.env.NODE_ENVÂ ===Â <span class="hljs-string">'production'</span>Â 
Â Â Â Â ?Â <span class="hljs-string">'/your-project-name/'</span>Â 
<span class="hljs-attr">Â Â Â Â </span>:Â <span class="hljs-string">'/'</span>,
Â Â 
Â Â //Â ç”Ÿäº§ç¯å¢ƒæ„å»ºæ–‡ä»¶çš„ç›®å½•
<span class="hljs-attr">Â Â outputDir</span>:Â <span class="hljs-string">'dist'</span>,
Â Â 
Â Â //Â æ”¾ç½®ç”Ÿæˆçš„é™æ€èµ„æºç›®å½•
<span class="hljs-attr">Â Â assetsDir</span>:Â <span class="hljs-string">'static'</span>,
Â Â 
Â Â //Â é™æ€èµ„æºæ–‡ä»¶åæ·»åŠ hash
<span class="hljs-attr">Â Â filenameHashing</span>:Â <span class="hljs-literal">true</span>,
Â Â 
<span class="hljs-attr">Â Â chainWebpack</span>:Â configÂ =&gt;Â {
Â Â Â Â //Â å¤„ç†å›¾ç‰‡è§„åˆ™
Â Â Â Â config.module
Â Â Â Â Â Â .<span class="hljs-title function_ invoke__">rule</span>(<span class="hljs-string">'images'</span>)
Â Â Â Â Â Â .<span class="hljs-title function_ invoke__">test</span>(/.(png|jpe?g|gif|webp|svg)(?.*)?$/)
Â Â Â Â Â Â .<span class="hljs-keyword">use</span>(<span class="hljs-string">'url-loader'</span>)
Â Â Â Â Â Â .<span class="hljs-title function_ invoke__">loader</span>(<span class="hljs-string">'url-loader'</span>)
Â Â Â Â Â Â .<span class="hljs-title function_ invoke__">options</span>({
<span class="hljs-attr">Â Â Â Â Â Â Â Â limit</span>:Â <span class="hljs-number">4096</span>,Â //Â å°äº<span class="hljs-number">4</span>kbçš„å›¾ç‰‡è½¬ä¸ºbase64
<span class="hljs-attr">Â Â Â Â Â Â Â Â fallback</span>:Â {
<span class="hljs-attr">Â Â Â Â Â Â Â Â Â Â loader</span>:Â <span class="hljs-string">'file-loader'</span>,
<span class="hljs-attr">Â Â Â Â Â Â Â Â Â Â options</span>:Â {
<span class="hljs-attr">Â Â Â Â Â Â Â Â Â Â Â Â name</span>:Â <span class="hljs-string">'static/img/[name].[hash:8].[ext]'</span>
Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â })
Â Â },
Â Â 
Â Â <span class="hljs-comment">//Â å¼€å‘æœåŠ¡å™¨é…ç½®</span>
Â Â devServer:Â {
Â Â Â Â <span class="hljs-comment">//Â å¯ç”¨é™æ€èµ„æºæœåŠ¡</span>
Â Â Â Â contentBase:Â <span class="hljs-string">'./public'</span>
Â Â }
})
</code></pre>
<h4 data-id="heading-9">2. ç¯å¢ƒå˜é‡é…ç½®</h4>
<pre><code class="hljs language-ini" lang="ini">//Â .env.production
<span class="hljs-attr">VUE_APP_BASE_URL</span>Â =Â <span class="hljs-string">'/production-sub-path/'</span>

//Â .env.developmentÂ Â 
<span class="hljs-attr">VUE_APP_BASE_URL</span>Â =Â <span class="hljs-string">'/'</span>

//Â åœ¨ç»„ä»¶ä¸­ä½¿ç”¨
constÂ <span class="hljs-attr">baseUrl</span>Â =Â process.env.VUE_APP_BASE_URL
</code></pre>
<h3 data-id="heading-10">æ–¹æ¡ˆä¸‰ï¼šCSSä¸­çš„å›¾ç‰‡å¤„ç†</h3>
<p>CSSä¸­èƒŒæ™¯å›¾ç‰‡çš„è·¯å¾„é—®é¢˜ä¹Ÿéœ€è¦ç‰¹åˆ«æ³¨æ„ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">/*Â é”™è¯¯æ–¹å¼Â -Â æ‰“åŒ…åå¯èƒ½å¤±æ•ˆÂ */</span>
.<span class="hljs-property">banner</span>Â {
Â Â background-<span class="hljs-attr">image</span>:Â <span class="hljs-title function_">url</span>(<span class="hljs-string">'./assets/images/banner.jpg'</span>);
}

<span class="hljs-comment">/*Â æ­£ç¡®æ–¹å¼1Â -Â ä½¿ç”¨ç›¸å¯¹publicç›®å½•çš„è·¯å¾„Â */</span>
.<span class="hljs-property">banner</span>Â {
Â Â background-<span class="hljs-attr">image</span>:Â <span class="hljs-title function_">url</span>(<span class="hljs-string">'/images/banner.jpg'</span>);
}

<span class="hljs-comment">/*Â æ­£ç¡®æ–¹å¼2Â -Â åœ¨Vueå•æ–‡ä»¶ç»„ä»¶ä¸­ä½¿ç”¨Â */</span>
&lt;styleÂ scoped&gt;
<span class="hljs-comment">/*Â Webpackä¼šæ­£ç¡®å¤„ç†ç›¸å¯¹è·¯å¾„Â */</span>
.<span class="hljs-property">banner</span>Â {
Â Â background-<span class="hljs-attr">image</span>:Â <span class="hljs-title function_">url</span>(<span class="hljs-string">'@/assets/images/banner.jpg'</span>);
}
&lt;/style&gt;

<span class="hljs-comment">/*Â æ­£ç¡®æ–¹å¼3Â -Â ä½¿ç”¨JSå˜é‡Â */</span>
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
Â Â <span class="hljs-tag">&lt;<span class="hljs-name">div</span>Â <span class="hljs-attr">:style</span>=<span class="hljs-string">"bannerStyle"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span>

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">export</span>Â <span class="hljs-keyword">default</span>Â {
Â Â <span class="hljs-title function_">data</span>(<span class="hljs-params"/>)Â {
Â Â Â Â <span class="hljs-keyword">return</span>Â {
Â Â Â Â Â Â <span class="hljs-attr">bannerStyle</span>:Â {
Â Â Â Â Â Â Â Â <span class="hljs-attr">backgroundImage</span>:Â <span class="hljs-string">`url(<span class="hljs-subst">${<span class="hljs-built_in">require</span>(<span class="hljs-string">'@/assets/images/banner.jpg'</span>)}</span>)`</span>
Â Â Â Â Â Â }
Â Â Â Â }
Â Â }
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
</code></pre>
<h3 data-id="heading-11">æ–¹æ¡ˆå››ï¼šåŠ¨æ€å›¾ç‰‡è·¯å¾„å¤„ç†</h3>
<p>å¯¹äºä»APIè·å–çš„å›¾ç‰‡è·¯å¾„æˆ–éœ€è¦åŠ¨æ€è®¡ç®—çš„å›¾ç‰‡ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">//Â utils/imagePath.js</span>
<span class="hljs-keyword">export</span>Â <span class="hljs-keyword">default</span>Â {
Â Â <span class="hljs-comment">//Â å¤„ç†åŠ¨æ€å›¾ç‰‡è·¯å¾„</span>
Â Â <span class="hljs-title function_">getImagePath</span>(<span class="hljs-params">path</span>)Â {
Â Â Â Â <span class="hljs-keyword">if</span>Â (!path)Â <span class="hljs-keyword">return</span>Â <span class="hljs-string">''</span>
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">//Â å¦‚æœæ˜¯ç½‘ç»œå›¾ç‰‡</span>
Â Â Â Â <span class="hljs-keyword">if</span>Â (path.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">'http'</span>)Â ||Â path.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">'//'</span>))Â {
Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â path
Â Â Â Â }
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">//Â å¦‚æœæ˜¯ç›¸å¯¹è·¯å¾„ä¸”ä¸åœ¨publicç›®å½•</span>
Â Â Â Â <span class="hljs-keyword">if</span>Â (path.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">'@/'</span>)Â ||Â path.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">'./'</span>))Â {
Â Â Â Â Â Â <span class="hljs-keyword">try</span>Â {
Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â <span class="hljs-built_in">require</span>(<span class="hljs-string">`@/assets/<span class="hljs-subst">${path.replace(<span class="hljs-string">'@/'</span>,Â <span class="hljs-string">''</span>)}</span>`</span>)
Â Â Â Â Â Â }Â <span class="hljs-keyword">catch</span>Â (e)Â {
Â Â Â Â Â Â Â Â <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">`å›¾ç‰‡åŠ è½½å¤±è´¥:Â <span class="hljs-subst">${path}</span>`</span>)
Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â <span class="hljs-string">''</span>
Â Â Â Â Â Â }
Â Â Â Â }
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">//Â publicç›®å½•ä¸‹çš„å›¾ç‰‡</span>
Â Â Â Â <span class="hljs-keyword">return</span>Â <span class="hljs-string">`<span class="hljs-subst">${process.env.BASE_URL}</span><span class="hljs-subst">${path}</span>`</span>
Â Â },
Â Â 
Â Â <span class="hljs-comment">//Â æ‰¹é‡å¤„ç†å›¾ç‰‡</span>
Â Â <span class="hljs-title function_">batchProcessImages</span>(<span class="hljs-params">images</span>)Â {
Â Â Â Â <span class="hljs-keyword">return</span>Â images.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">img</span>Â =&gt;</span>Â <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getImagePath</span>(img))
Â Â }
}
</code></pre>
<h3 data-id="heading-12">æ–¹æ¡ˆäº”ï¼šéƒ¨ç½²é…ç½®è°ƒæ•´</h3>
<h4 data-id="heading-13">1. Nginxé…ç½®ç¤ºä¾‹</h4>
<pre><code class="hljs language-bash" lang="bash">serverÂ {
Â Â Â Â listenÂ 80;
Â Â Â Â server_nameÂ your-domain.com;
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">#Â Vueé¡¹ç›®éƒ¨ç½²ç›®å½•</span>
Â Â Â Â rootÂ /var/www/your-project/dist;
Â Â Â Â indexÂ index.html;
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">#Â å¤„ç†historyæ¨¡å¼è·¯ç”±</span>
Â Â Â Â locationÂ /Â {
Â Â Â Â Â Â Â Â try_filesÂ <span class="hljs-variable">$uri</span>Â <span class="hljs-variable">$uri</span>/Â /index.html;
Â Â Â Â }
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">#Â é™æ€èµ„æºç¼“å­˜é…ç½®</span>
Â Â Â Â locationÂ ~*Â .(jpg|jpeg|png|gif|ico|css|js)$Â {
Â Â Â Â Â Â Â Â expiresÂ 1y;
Â Â Â Â Â Â Â Â add_headerÂ Cache-ControlÂ <span class="hljs-string">"public,Â immutable"</span>;
Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â ç¡®ä¿æ­£ç¡®æ‰¾åˆ°èµ„æº</span>
Â Â Â Â Â Â Â Â try_filesÂ <span class="hljs-variable">$uri</span>Â <span class="hljs-variable">$uri</span>/Â =404;
Â Â Â Â }
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">#Â å¤„ç†é™æ€èµ„æºç›®å½•</span>
Â Â Â Â locationÂ /static/Â {
Â Â Â Â Â Â Â Â <span class="hljs-built_in">alias</span>Â /var/www/your-project/dist/static/;
Â Â Â Â }
}
</code></pre>
<h4 data-id="heading-14">2. Apacheé…ç½®ç¤ºä¾‹</h4>
<pre><code class="hljs language-php" lang="php">&lt;VirtualHostÂ *:<span class="hljs-number">80</span>&gt;
Â Â Â Â ServerNameÂ your-domain.com
Â Â Â Â DocumentRootÂ /<span class="hljs-keyword">var</span>/www/your-project/dist
Â Â Â Â 
Â Â Â Â &lt;<span class="hljs-built_in">Directory</span>Â /<span class="hljs-keyword">var</span>/www/your-project/dist&gt;
Â Â Â Â Â Â Â Â OptionsÂ IndexesÂ FollowSymLinks
Â Â Â Â Â Â Â Â AllowOverrideÂ All
Â Â Â Â Â Â Â Â RequireÂ allÂ granted
Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â RewriteEngineÂ On
Â Â Â Â Â Â Â Â RewriteBaseÂ /
Â Â Â Â Â Â Â Â RewriteRuleÂ ^index.html<span class="hljs-variable">$Â </span>-Â [L]
Â Â Â Â Â Â Â Â RewriteCondÂ %{REQUEST_FILENAME}Â !-f
Â Â Â Â Â Â Â Â RewriteCondÂ %{REQUEST_FILENAME}Â !-d
Â Â Â Â Â Â Â Â RewriteRuleÂ .Â /index.htmlÂ [L]
Â Â Â Â &lt;/<span class="hljs-built_in">Directory</span>&gt;
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">#Â é™æ€èµ„æºç¼“å­˜</span>
Â Â Â Â &lt;FilesMatchÂ <span class="hljs-string">".(jpg|jpeg|png|gif|js|css)$"</span>&gt;
Â Â Â Â Â Â Â Â HeaderÂ setÂ Cache-ControlÂ <span class="hljs-string">"max-age=31536000,Â public"</span>
Â Â Â Â &lt;/FilesMatch&gt;
&lt;/VirtualHost&gt;
</code></pre>
<h2 data-id="heading-15">è°ƒè¯•æŠ€å·§å’Œå·¥å…·</h2>
<h3 data-id="heading-16">1. æ„å»ºåˆ†æå·¥å…·</h3>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">//Â å®‰è£…åˆ†ææ’ä»¶</span>
<span class="hljs-comment">//Â npmÂ installÂ webpack-bundle-analyzerÂ -D</span>

<span class="hljs-comment">//Â vue.config.jsä¸­é…ç½®</span>
<span class="hljs-type">const</span>Â BundleAnalyzerPluginÂ =Â <span class="hljs-built_in">require</span>(<span class="hljs-string">'webpack-bundle-analyzer'</span>).BundleAnalyzerPlugin

<span class="hljs-keyword">module</span>.exportsÂ =Â {
Â Â chainWebpack:Â configÂ =&gt;Â {
Â Â Â Â <span class="hljs-comment">//Â åªåœ¨åˆ†ææ—¶å¯ç”¨</span>
Â Â Â Â <span class="hljs-keyword">if</span>Â (process.env.ANALYZE)Â {
Â Â Â Â Â Â config.<span class="hljs-built_in">plugin</span>(<span class="hljs-string">'webpack-bundle-analyzer'</span>)
Â Â Â Â Â Â Â Â .<span class="hljs-built_in">use</span>(BundleAnalyzerPlugin)
Â Â Â Â }
Â Â }
}

<span class="hljs-comment">//Â package.jsonä¸­æ·»åŠ è„šæœ¬</span>
<span class="hljs-string">"scripts"</span>:Â {
Â Â <span class="hljs-string">"analyze"</span>:Â <span class="hljs-string">"ANALYZE=trueÂ vue-cli-serviceÂ build"</span>
}
</code></pre>
<h3 data-id="heading-17">2. è·¯å¾„è°ƒè¯•æ–¹æ³•</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">//Â debugPaths.jsÂ -Â è°ƒè¯•è·¯å¾„é—®é¢˜</span>
<span class="hljs-keyword">export</span>Â <span class="hljs-keyword">function</span>Â <span class="hljs-title function_">debugResourcePaths</span>(<span class="hljs-params"/>)Â {
Â Â <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å½“å‰ç¯å¢ƒ:'</span>,Â process.<span class="hljs-property">env</span>.<span class="hljs-property">NODE_ENV</span>)
Â Â <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'BASE_URL:'</span>,Â process.<span class="hljs-property">env</span>.<span class="hljs-property">BASE_URL</span>)
Â Â <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'publicPathé…ç½®:'</span>,Â process.<span class="hljs-property">env</span>.<span class="hljs-property">VUE_APP_PUBLIC_PATH</span>)
Â Â 
Â Â <span class="hljs-comment">//Â æµ‹è¯•å›¾ç‰‡è·¯å¾„</span>
Â Â <span class="hljs-keyword">const</span>Â testPathsÂ =Â [
Â Â Â Â <span class="hljs-string">'@/assets/logo.png'</span>,
Â Â Â Â <span class="hljs-string">'/images/logo.png'</span>,
Â Â Â Â <span class="hljs-string">'./assets/logo.png'</span>
Â Â ]
Â Â 
Â Â testPaths.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">path</span>Â =&gt;</span>Â {
Â Â Â Â <span class="hljs-keyword">try</span>Â {
Â Â Â Â Â Â <span class="hljs-keyword">const</span>Â resolvedÂ =Â <span class="hljs-built_in">require</span>(path)
Â Â Â Â Â Â <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`âœ“Â <span class="hljs-subst">${path}</span>Â =&gt;Â <span class="hljs-subst">${resolved}</span>`</span>)
Â Â Â Â }Â <span class="hljs-keyword">catch</span>Â (e)Â {
Â Â Â Â Â Â <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`âœ—Â <span class="hljs-subst">${path}</span>Â æ— æ³•è§£æ`</span>)
Â Â Â Â }
Â Â })
}
</code></pre>
<h2 data-id="heading-18">æœ€ä½³å®è·µæ€»ç»“</h2>
<h3 data-id="heading-19">é¡¹ç›®ç»“æ„å»ºè®®</h3>
<pre><code class="hljs language-csharp" lang="csharp">project/
â”œâ”€â”€Â <span class="hljs-keyword">public</span>/
â”‚Â Â Â â”œâ”€â”€Â index.html
â”‚Â Â Â â””â”€â”€Â images/Â Â Â Â Â Â Â Â Â Â <span class="hljs-meta">#Â ä¸å¸¸æ›´æ”¹çš„å›¾ç‰‡ï¼Œç›´æ¥å¼•ç”¨</span>
â”‚Â Â Â Â Â Â Â â”œâ”€â”€Â logo.png
â”‚Â Â Â Â Â Â Â â””â”€â”€Â banners/
â”œâ”€â”€Â src/
â”‚Â Â Â â”œâ”€â”€Â assets/
â”‚Â Â Â â”‚Â Â Â â””â”€â”€Â images/Â Â Â Â Â Â <span class="hljs-meta">#Â ç»„ä»¶ç›¸å…³çš„å›¾ç‰‡</span>
â”‚Â Â Â â”‚Â Â Â Â Â Â Â â”œâ”€â”€Â icons/
â”‚Â Â Â â”‚Â Â Â Â Â Â Â â””â”€â”€Â components/
â”‚Â Â Â â”œâ”€â”€Â components/
â”‚Â Â Â â””â”€â”€Â views/
â”œâ”€â”€Â vue.config.jsÂ Â Â Â Â Â Â Â <span class="hljs-meta">#Â æ„å»ºé…ç½®</span>
â””â”€â”€Â package.json
</code></pre>
<h3 data-id="heading-20">å¼•ç”¨ç­–ç•¥å†³ç­–å›¾</h3>
<pre><code class="hljs language-bash" lang="bash">å¼€å§‹å›¾ç‰‡å¼•ç”¨å›¾ç‰‡ç±»å‹å…¬å…±/ä¸å¸¸æ›´æ”¹çš„å›¾ç‰‡ç»„ä»¶ä¸“ç”¨å›¾ç‰‡åŠ¨æ€/ç”¨æˆ·ä¸Šä¼ å›¾ç‰‡æ”¾å…¥publicç›®å½•ä½¿ç”¨ç»å¯¹è·¯å¾„å¼•ç”¨
/images/xxx.pngæ”¾å…¥src/assetsç›®å½•ä½¿ç”¨requireæˆ–
@/assets/è·¯å¾„APIè¿”å›å®Œæ•´URL
æˆ–å•ç‹¬å¤„ç†æ„å»ºå’Œéƒ¨ç½²éƒ¨ç½²åæ£€æŸ¥å›¾ç‰‡æ­£å¸¸æ˜¾ç¤ºå›¾ç‰‡404æ£€æŸ¥æ„å»ºé…ç½®æ£€æŸ¥æœåŠ¡å™¨é…ç½®è·¯å¾„è°ƒè¯•
</code></pre>
<h3 data-id="heading-21">å®ç”¨ä»£ç ç‰‡æ®µé›†åˆ</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">//Â 1.Â å›¾ç‰‡æ‡’åŠ è½½æŒ‡ä»¤</span>
<span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">directive</span>(<span class="hljs-string">'lazy'</span>,Â {
Â Â <span class="hljs-attr">inserted</span>:Â <span class="hljs-keyword">function</span>Â (<span class="hljs-params">el,Â binding</span>)Â {
Â Â Â Â <span class="hljs-keyword">const</span>Â observerÂ =Â <span class="hljs-keyword">new</span>Â <span class="hljs-title class_">IntersectionObserver</span>(<span class="hljs-function">(<span class="hljs-params">entries</span>)Â =&gt;</span>Â {
Â Â Â Â Â Â entries.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">entry</span>Â =&gt;</span>Â {
Â Â Â Â Â Â Â Â <span class="hljs-keyword">if</span>Â (entry.<span class="hljs-property">isIntersecting</span>)Â {
Â Â Â Â Â Â Â Â Â Â el.<span class="hljs-property">src</span>Â =Â binding.<span class="hljs-property">value</span>
Â Â Â Â Â Â Â Â Â Â observer.<span class="hljs-title function_">unobserve</span>(el)
Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â })
Â Â Â Â })
Â Â Â Â observer.<span class="hljs-title function_">observe</span>(el)
Â Â }
})

<span class="hljs-comment">//Â ä½¿ç”¨æ–¹å¼</span>
<span class="hljs-comment">//Â &lt;imgÂ v-lazy="imageUrl"Â alt=""&gt;</span>

<span class="hljs-comment">//Â 2.Â å›¾ç‰‡åŠ è½½å¤±è´¥å¤„ç†</span>
<span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">directive</span>(<span class="hljs-string">'img-fallback'</span>,Â {
Â Â <span class="hljs-attr">bind</span>:Â <span class="hljs-keyword">function</span>Â (<span class="hljs-params">el,Â binding</span>)Â {
Â Â Â Â el.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'error'</span>,Â <span class="hljs-function">()Â =&gt;</span>Â {
Â Â Â Â Â Â el.<span class="hljs-property">src</span>Â =Â binding.<span class="hljs-property">value</span>Â ||Â <span class="hljs-string">'/images/default.jpg'</span>
Â Â Â Â })
Â Â }
})

<span class="hljs-comment">//Â 3.Â è‡ªåŠ¨å¤„ç†å›¾ç‰‡è·¯å¾„çš„æ··åˆ</span>
<span class="hljs-keyword">export</span>Â <span class="hljs-keyword">const</span>Â imageMixinÂ =Â {
Â Â <span class="hljs-attr">methods</span>:Â {
Â Â Â Â $img(path)Â {
Â Â Â Â Â Â <span class="hljs-keyword">if</span>Â (!path)Â <span class="hljs-keyword">return</span>Â <span class="hljs-string">''</span>
Â Â Â Â Â Â 
Â Â Â Â Â Â <span class="hljs-comment">//Â å¤„ç†å„ç§è·¯å¾„æ ¼å¼</span>
Â Â Â Â Â Â <span class="hljs-keyword">if</span>Â (path.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">'http'</span>))Â <span class="hljs-keyword">return</span>Â path
Â Â Â Â Â Â <span class="hljs-keyword">if</span>Â (path.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">'data:'</span>))Â <span class="hljs-keyword">return</span>Â path
Â Â Â Â Â Â <span class="hljs-keyword">if</span>Â (path.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">'/'</span>))Â <span class="hljs-keyword">return</span>Â <span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.$baseUrl}</span><span class="hljs-subst">${path}</span>`</span>
Â Â Â Â Â Â 
Â Â Â Â Â Â <span class="hljs-keyword">try</span>Â {
Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â <span class="hljs-built_in">require</span>(<span class="hljs-string">`@/assets/<span class="hljs-subst">${path}</span>`</span>)
Â Â Â Â Â Â }Â <span class="hljs-keyword">catch</span>Â {
Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â path
Â Â Â Â Â Â }
Â Â Â Â }
Â Â },
Â Â <span class="hljs-attr">computed</span>:Â {
Â Â Â Â $baseUrl()Â {
Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â process.<span class="hljs-property">env</span>.<span class="hljs-property">BASE_URL</span>
Â Â Â Â }
Â Â }
}
</code></pre>
<h2 data-id="heading-22">å¸¸è§é—®é¢˜Q&amp;A</h2>
<p><strong>Q1: ä¸ºä»€ä¹ˆæœ‰çš„å›¾ç‰‡è½¬æˆäº†base64ï¼Œæœ‰çš„æ²¡æœ‰ï¼Ÿ</strong><br/>
A: è¿™æ˜¯ç”±Webpackçš„url-loaderé…ç½®å†³å®šçš„ã€‚é»˜è®¤å°äº4KBçš„å›¾ç‰‡ä¼šè½¬ä¸ºbase64ï¼Œå‡å°‘HTTPè¯·æ±‚ã€‚</p>
<p><strong>Q2: å¦‚ä½•å¼ºåˆ¶æ‰€æœ‰å›¾ç‰‡éƒ½ä¸è½¬base64ï¼Ÿ</strong></p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">//Â vue.config.js</span>
chainWebpack:Â configÂ =&gt;Â {
Â Â config.<span class="hljs-keyword">module</span>
Â Â Â Â .<span class="hljs-built_in">rule</span>(<span class="hljs-string">'images'</span>)
Â Â Â Â .<span class="hljs-built_in">use</span>(<span class="hljs-string">'url-loader'</span>)
Â Â Â Â .<span class="hljs-built_in">loader</span>(<span class="hljs-string">'url-loader'</span>)
Â Â Â Â .<span class="hljs-built_in">options</span>({
Â Â Â Â Â Â limit:Â <span class="hljs-number">1</span>Â <span class="hljs-comment">//Â è®¾ç½®ä¸º1å­—èŠ‚ï¼Œå‡ ä¹æ‰€æœ‰å›¾ç‰‡éƒ½ä¸ä¼šè½¬base64</span>
Â Â Â Â })
}
</code></pre>
<p><strong>Q3: å¤šç¯å¢ƒéƒ¨ç½²è·¯å¾„ä¸åŒæ€ä¹ˆåŠï¼Ÿ</strong></p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">//Â ä½¿ç”¨ç¯å¢ƒå˜é‡</span>
<span class="hljs-type">const</span>Â envPublicPathÂ =Â {
Â Â development:Â <span class="hljs-string">'/'</span>,
Â Â test:Â <span class="hljs-string">'/test/'</span>,
Â Â production:Â <span class="hljs-string">'https://cdn.yourdomain.com/project/'</span>
}

<span class="hljs-keyword">module</span>.exportsÂ =Â {
Â Â publicPath:Â envPublicPath[process.env.VUE_APP_ENV]
}
</code></pre>
<h2 data-id="heading-23">ç»“è¯­</h2>
<p>Vueé¡¹ç›®å›¾ç‰‡æ‰“åŒ…é—®é¢˜çœ‹ä¼¼ç®€å•ï¼Œå®åˆ™æ¶‰åŠWebpacké…ç½®ã€éƒ¨ç½²ç¯å¢ƒã€å¼•ç”¨æ–¹å¼ç­‰å¤šä¸ªæ–¹é¢ã€‚é€šè¿‡æœ¬æ–‡çš„è¯¦ç»†è®²è§£ï¼Œç›¸ä¿¡ä½ å·²ç»æŒæ¡äº†è§£å†³è¿™ä¸€é—®é¢˜çš„å…¨å¥—æ–¹æ¡ˆã€‚è®°ä½å…³é”®ç‚¹ï¼š<strong>ç†è§£Webpackçš„æ„å»ºè¿‡ç¨‹ï¼Œåˆç†è§„åˆ’é¡¹ç›®ç»“æ„ï¼Œæ­£ç¡®é…ç½®éƒ¨ç½²ç¯å¢ƒ</strong>ã€‚</p>
<p>å®è·µæ˜¯æ£€éªŒçœŸç†çš„å”¯ä¸€æ ‡å‡†ï¼Œèµ¶ç´§æŠŠè¿™äº›æ–¹æ¡ˆåº”ç”¨åˆ°ä½ çš„é¡¹ç›®ä¸­å§ï¼å¦‚æœä½ æœ‰æ›´å¥½çš„è§£å†³æ–¹æ¡ˆï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºåˆ†äº«è®¨è®ºã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Flinkæºç é˜…è¯»ï¼šJobManagerçš„HAæœºåˆ¶]]></title>    <link>https://juejin.cn/post/7594303751965491246</link>    <guid>https://juejin.cn/post/7594303751965491246</guid>    <pubDate>2026-01-12T12:42:06.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594303751965491246" data-draft-id="7594153083880341555" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Flinkæºç é˜…è¯»ï¼šJobManagerçš„HAæœºåˆ¶"/> <meta itemprop="keywords" content="Flink,å¤§æ•°æ®"/> <meta itemprop="datePublished" content="2026-01-12T12:42:06.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é¢å‘Googleç¼–ç¨‹"/> <meta itemprop="url" content="https://juejin.cn/user/1063982986695374"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Flinkæºç é˜…è¯»ï¼šJobManagerçš„HAæœºåˆ¶
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1063982986695374/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é¢å‘Googleç¼–ç¨‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-12T12:42:06.000Z" title="Mon Jan 12 2026 12:42:06 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>JobManager åœ¨ Flink é›†ç¾¤ä¸­å‘æŒ¥ç€é‡è¦çš„ä½œç”¨ï¼ŒåŒ…æ‹¬ä»»åŠ¡è°ƒåº¦å’Œèµ„æºç®¡ç†ç­‰å·¥ä½œã€‚å¦‚æœ JobManager å®•æœºï¼Œé‚£ä¹ˆæ•´ä¸ªé›†ç¾¤çš„ä»»åŠ¡éƒ½å°†å¤±è´¥ã€‚ä¸ºäº†è§£å†³ JobManager çš„å•ç‚¹é—®é¢˜ï¼ŒFlink ä¹Ÿè®¾è®¡äº† HA æœºåˆ¶æ¥ä¿éšœæ•´ä¸ªé›†ç¾¤çš„ç¨³å®šæ€§ã€‚</p>
<h3 data-id="heading-0">åŸºæœ¬æ¦‚å¿µ</h3>
<p>åœ¨ JobManager å¯åŠ¨æ—¶ï¼Œè°ƒç”¨ <code>HighAvailabilityServicesUtils.createHighAvailabilityServices</code> æ¥åˆ›å»º HA æœåŠ¡ï¼ŒHA ä¾èµ–çš„æœåŠ¡éƒ½è¢«å°è£…åœ¨ HighAvailabilityServices ä¸­ã€‚å½“å‰ Flink å†…éƒ¨æ”¯æŒä¸¤ç§é«˜å¯ç”¨æ¨¡å¼ï¼Œåˆ†åˆ«æ˜¯ ZooKeeper å’Œ KUBERNETESã€‚</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-keyword">case</span> ZOOKEEPER:
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">createZooKeeperHaServices</span>(configuration, executor, fatalErrorHandler);
<span class="hljs-keyword">case</span> KUBERNETES:
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">createCustomHAServices</span>(
            <span class="hljs-string">"org.apache.flink.kubernetes.highavailability.KubernetesHaServicesFactory"</span>,
            configuration,
            executor);
</code></pre>
<p>HighAvailabilityServices ä¸­æä¾›çš„å…³é”®ç»„ä»¶åŒ…æ‹¬ï¼š</p>
<ul>
<li>LeaderRetrievalServiceï¼šæœåŠ¡å‘ç°ï¼Œç”¨äºè·å–å½“å‰ leader çš„åœ°å€ã€‚ç›®å‰ç”¨åˆ°æœåŠ¡å‘ç°çš„ç»„ä»¶æœ‰ ResourceManagerã€Dispatcherã€JobManagerã€ClusterRestEndpointã€‚</li>
<li>LeaderElectionï¼šé€‰ä¸¾æœåŠ¡ï¼Œä»å¤šä¸ªå€™é€‰è€…ä¸­é€‰å‡ºä¸€ä¸ªä½œä¸º leaderã€‚ç”¨åˆ°é€‰ä¸¾æœåŠ¡çš„åŒæ ·æ˜¯ ResourceManagerã€Dispatcherã€JobManagerã€ClusterRestEndpoint è¿™å››ä¸ªã€‚</li>
<li>CheckpointRecoveryFactoryï¼šCheckpoint æ¢å¤ç»„ä»¶çš„å·¥å‚ç±»ï¼Œæä¾›äº†åˆ›å»º CompletedCheckpointStore å’Œ CheckpointIDCounter çš„æ–¹æ³•ã€‚CompletedCheckpointStore æ˜¯ç”¨äºå­˜å‚¨å·²å®Œæˆçš„ checkpoint çš„å…ƒä¿¡æ¯ï¼ŒCheckpointIDCounter æ˜¯ç”¨äºç”Ÿæˆ checkpoint IDã€‚</li>
<li>ExecutionPlanStoreï¼šç”¨äºå­˜å‚¨æ‰§è¡Œè®¡åˆ’ã€‚</li>
<li>JobResultStoreï¼šç”¨äºå­˜å‚¨ä½œä¸šç»“æœï¼Œè¿™é‡Œæœ‰ä¸¤ç§çŠ¶æ€ï¼Œä¸€ç§æ˜¯ dirtyï¼Œè¡¨ç¤ºä½œä¸šæ²¡æœ‰è¢«å®Œå…¨æ¸…ç†ï¼Œå¦ä¸€ç§æ˜¯ cleanï¼Œè¡¨ç¤ºä½œä¸šæ¸…ç†å·¥ä½œå·²ç»æ‰§è¡Œå®Œæˆäº†ã€‚</li>
<li>BlobStoreï¼šå­˜å‚¨ä½œä¸šè¿è¡ŒæœŸé—´çš„ä¸€äº›äºŒè¿›åˆ¶æ–‡ä»¶ã€‚</li>
</ul>
<h4 data-id="heading-1">é€‰ä¸¾æœåŠ¡</h4>
<p>Flink çš„é€‰ä¸¾æ˜¯ä¾é  LeaderElection å’Œ LeaderContender é…åˆå®Œæˆçš„ã€‚LeaderElection æ˜¯ LeaderElectionService çš„ä»£ç†æ¥å£ï¼Œæä¾›äº†æ³¨å†Œå€™é€‰è€…ã€ç¡®è®¤ leader å’Œ åˆ¤æ–­å€™é€‰è€…æ˜¯å¦æ˜¯ leader ä¸‰ä¸ªæ¥å£ã€‚LeaderContender åˆ™æ˜¯ç”¨æ¥è¡¨ç¤ºå€™é€‰è€…å¯¹è±¡ã€‚å½“ä¸€ä¸ª LeaderContender å½“é€‰ leader åï¼ŒLeaderElectionService ä¼šä¸ºå…¶ç”Ÿæˆä¸€ä¸ª leaderSessionIdï¼ŒLeaderContender ä¼šè°ƒç”¨ confirmLeadershipAsync å‘å¸ƒè‡ªå·±çš„åœ°å€ã€‚é€‰ä¸¾æœåŠ¡çš„å…·ä½“å®ç°åœ¨ LeaderElectionDriver æ¥å£ä¸­ã€‚</p>
<h4 data-id="heading-2">æœåŠ¡å‘ç°</h4>
<p>æœåŠ¡å‘ç°çš„ä½œç”¨æ˜¯è·å–å„ç»„ä»¶çš„ leader åœ°å€ã€‚æœåŠ¡å‘ç°ä¾èµ– LeaderRetrievalService å’Œ LeaderRetrievalListenerã€‚LeaderRetrievalService å¯ä»¥å¯åŠ¨ä¸€ä¸ªç›‘å¬ï¼Œå½“æœ‰æ–°çš„ leader å½“é€‰æ—¶ï¼Œä¼šè°ƒç”¨ LeaderRetrievalListener çš„ notifyLeaderAddress æ–¹æ³•ã€‚</p>
<h4 data-id="heading-3">ä¿¡æ¯ä¿å­˜</h4>
<p>å½“ leader å‘ç”Ÿåˆ‡æ¢æ—¶ï¼Œæ–°çš„ leader éœ€è¦è·å–åˆ°æ—§ leader å­˜å‚¨çš„ä¿¡æ¯ï¼Œè¿™å°±éœ€è¦æ—§ leader æŠŠè¿™äº›ä¿¡æ¯å­˜åœ¨ä¸€ä¸ªå…¬å…±çš„å­˜å‚¨ä¸Šã€‚å®ƒå¯ä»¥æ˜¯ ZooKeeper æˆ– Kubernetes çš„å­˜å‚¨ï¼Œä¹Ÿå¯ä»¥æ˜¯åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿçš„å­˜å‚¨ã€‚</p>
<h3 data-id="heading-4">åŸºäº ZooKeeper çš„ HA</h3>
<h4 data-id="heading-5">é€‰ä¸¾æœåŠ¡</h4>
<p>å‰é¢æˆ‘ä»¬æåˆ°äº†é€‰ä¸¾æœåŠ¡ä¸»è¦ä¾èµ– LeaderElection å’Œ LeaderContender é…åˆå®Œæˆã€‚æˆ‘ä»¬å°±ä»¥ JobManager ä¸ºä¾‹ï¼Œçœ‹ä¸€ä¸‹æœºé‡ ZooKeeper çš„é€‰ä¸¾æµç¨‹çš„å…·ä½“å®ç°ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b4e16080fb514ca0b74ad9ac4ad45971~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Z2i5ZCRR29vZ2xl57yW56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768826526&amp;x-signature=BF8omJ3jbDjUyRBTW2VvDK9OZP4%3D" alt="ZKLeaderElection" loading="lazy"/></p>
<p>å›¾ä¸­ JobMasterServiceLeadershipRunner æ˜¯ LeaderContender çš„å®ç°ç±»ã€‚åœ¨å¯åŠ¨æœåŠ¡æ—¶ï¼Œä¼šå‘ LeaderElection æ³¨å†Œè‡ªå·±çš„ä¿¡æ¯ï¼Œå®é™…æ‰§è¡Œè€…æ˜¯ DefaultLeaderElectionServiceã€‚å®ƒå…ˆåˆ›å»ºäº† LeaderElectionDriverï¼Œç„¶åå°† LeaderContender ä¿å­˜åœ¨ leaderContenderRegistry ä¸­ã€‚é€‰ä¸¾çš„æ ¸å¿ƒé€»è¾‘å°è£…åœ¨ LeaderElectionDriver ä¸­ã€‚</p>
<p>åœ¨åˆ›å»º LeaderElectionDriver æ—¶ï¼Œä¼šåˆ›å»º LeaderLatch å¯¹è±¡å’Œ TreeCache å¯¹è±¡ï¼Œ LeaderLatch å°è£…äº†ä¸ ZooKeeper å…³è”çš„å›è°ƒï¼Œä¼šæ¥æ”¶ä¸€ä¸ª LeaderElectionDriver ä½œä¸ºç›‘å¬ã€‚TreeCache ä¸»è¦ç”¨äºç›‘å¬ ZooKeeper ä¸­ leader èŠ‚ç‚¹çš„å˜æ›´ã€‚</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">ZooKeeperLeaderElectionDriver</span>(<span class="hljs-params">
        CuratorFramework curatorFramework, LeaderElectionDriver.Listener leaderElectionListener</span>)
        throws Exception</span> {
    ...
    <span class="hljs-keyword">this</span>.leaderLatch = <span class="hljs-keyword">new</span> LeaderLatch(curatorFramework, ZooKeeperUtils.getLeaderLatchPath());
    <span class="hljs-keyword">this</span>.treeCache =
            ZooKeeperUtils.createTreeCache(
                    curatorFramework,
                    <span class="hljs-string">"/"</span>,
                    <span class="hljs-keyword">new</span> ZooKeeperLeaderElectionDriver.ConnectionInfoNodeSelector());

    treeCache
            .getListenable()
            .addListener(
                    (client, <span class="hljs-keyword">event</span>) -&gt; {
                        <span class="hljs-keyword">switch</span> (<span class="hljs-keyword">event</span>.getType()) {
                            <span class="hljs-keyword">case</span> NODE_ADDED:
                            <span class="hljs-keyword">case</span> NODE_UPDATED:
                                Preconditions.checkNotNull(
                                        <span class="hljs-keyword">event</span>.getData(),
                                        <span class="hljs-string">"The ZooKeeper event data must not be null."</span>);
                                handleChangedLeaderInformation(<span class="hljs-keyword">event</span>.getData());
                                <span class="hljs-keyword">break</span>;
                            <span class="hljs-keyword">case</span> NODE_REMOVED:
                                Preconditions.checkNotNull(
                                        <span class="hljs-keyword">event</span>.getData(),
                                        <span class="hljs-string">"The ZooKeeper event data must not be null."</span>);
                                handleRemovedLeaderInformation(<span class="hljs-keyword">event</span>.getData().getPath());
                                <span class="hljs-keyword">break</span>;
                        }
                    });

    leaderLatch.addListener(<span class="hljs-keyword">this</span>);
    ...
    leaderLatch.start();
    treeCache.start();
}
</code></pre>
<p>æˆ‘ä»¬è¿›å…¥åˆ° LeaderLatch çš„ start æ–¹æ³•ã€‚å®ƒçš„å†…éƒ¨æ˜¯åœ¨ ZooKeeper ä¸Šåˆ›å»º latch-xxx èŠ‚ç‚¹ã€‚xxx æ˜¯å½“å‰ LeaderLatch çš„ IDï¼Œå®ƒç”± ZooKeeper ç”Ÿæˆï¼ŒID æœ€å°çš„å½“é€‰ Leaderã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">private</span> void checkLeadership(List&lt;String&gt; children) throws Exception {
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.debugCheckLeaderShipLatch != <span class="hljs-literal">null</span>) {
        <span class="hljs-keyword">this</span>.debugCheckLeaderShipLatch.await();
    }

    String localOurPath = (String)<span class="hljs-keyword">this</span>.ourPath.<span class="hljs-keyword">get</span>();
    List&lt;String&gt; sortedChildren = LockInternals.getSortedChildren(<span class="hljs-string">"latch-"</span>, sorter, children);
    int ourIndex = localOurPath != <span class="hljs-literal">null</span> ? sortedChildren.indexOf(ZKPaths.getNodeFromPath(localOurPath)) : -<span class="hljs-number">1</span>;
    <span class="hljs-keyword">this</span>.log.debug(<span class="hljs-string">"checkLeadership with id: {}, ourPath: {}, children: {}"</span>, new Object[]{<span class="hljs-keyword">this</span>.id, localOurPath, sortedChildren});
    <span class="hljs-keyword">if</span> (ourIndex &lt; <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">this</span>.log.error(<span class="hljs-string">"Can't find our node. Resetting. Index: "</span> + ourIndex);
        <span class="hljs-keyword">this</span>.reset();
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (ourIndex == <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">this</span>.lastPathIsLeader.<span class="hljs-keyword">set</span>(localOurPath);
        <span class="hljs-keyword">this</span>.setLeadership(<span class="hljs-literal">true</span>);
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">this</span>.setLeadership(<span class="hljs-literal">false</span>);
        String watchPath = (String)sortedChildren.<span class="hljs-keyword">get</span>(ourIndex - <span class="hljs-number">1</span>);
        Watcher watcher = new Watcher() {
            <span class="hljs-keyword">public</span> void process(WatchedEvent event) {
                <span class="hljs-keyword">if</span> (LeaderLatch.<span class="hljs-keyword">this</span>.state.<span class="hljs-keyword">get</span>() == LeaderLatch.State.STARTED &amp;&amp; event.getType() == EventType.NodeDeleted) {
                    <span class="hljs-keyword">try</span> {
                        LeaderLatch.<span class="hljs-keyword">this</span>.getChildren();
                    } <span class="hljs-keyword">catch</span> (Exception ex) {
                        ThreadUtils.checkInterrupted(ex);
                        LeaderLatch.<span class="hljs-keyword">this</span>.log.error(<span class="hljs-string">"An error occurred checking the leadership."</span>, ex);
                    }
                }

            }
        };
        BackgroundCallback callback = new BackgroundCallback() {
            <span class="hljs-keyword">public</span> void processResult(CuratorFramework client, CuratorEvent event) throws Exception {
                <span class="hljs-keyword">if</span> (event.getResultCode() == Code.NONODE.intValue()) {
                    LeaderLatch.<span class="hljs-keyword">this</span>.getChildren();
                }

            }
        };
        ((ErrorListenerPathable)((BackgroundPathable)<span class="hljs-keyword">this</span>.client.getData().usingWatcher(watcher)).inBackground(callback)).forPath(ZKPaths.makePath(<span class="hljs-keyword">this</span>.latchPath, watchPath));
    }

}
</code></pre>
<p>å½“é€‰ Leader åï¼Œä¼šå›è°ƒ LeaderElectionDriver çš„ isLeader æ–¹æ³•ï¼Œå¦‚æœæœªå½“é€‰ï¼Œåˆ™ç»§ç»­ç›‘å¬ latch èŠ‚ç‚¹çš„å˜æ›´ã€‚isLeader ä¼šç»§ç»­å›è°ƒ LeaderElection çš„ onGrantLeadership æ–¹æ³•ï¼Œæ¥ç€è°ƒç”¨ LeaderContender çš„ grantLeadershipã€‚è¿™æ—¶ä¼šå¯åŠ¨ JobMaster æœåŠ¡ï¼Œç„¶åè°ƒç”¨ LeaderElection çš„ confirmLeadershipAsync æ¥ç¡®è®¤å½“é€‰æˆåŠŸã€‚ç¡®è®¤çš„è¿‡ç¨‹æ˜¯ç”± LeaderElectionDriver æ¥æ‰§è¡Œçš„ã€‚ä¸»è¦ä½œç”¨æ˜¯æŠŠå½“å‰ leader çš„ä¿¡æ¯å†™å›åˆ° ZooKeeper çš„ connection_info èŠ‚ç‚¹ã€‚</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-type">void</span> <span class="hljs-title">publishLeaderInformation</span><span class="hljs-params">(<span class="hljs-type">String</span> componentId, LeaderInformation leaderInformation)</span> </span>{
    Preconditions.<span class="hljs-built_in">checkState</span>(running.<span class="hljs-built_in">get</span>());

    <span class="hljs-keyword">if</span> (!leaderLatch.<span class="hljs-built_in">hasLeadership</span>()) {
        <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> connectionInformationPath =
            ZooKeeperUtils.<span class="hljs-built_in">generateConnectionInformationPath</span>(componentId);

    LOG.<span class="hljs-built_in">debug</span>(
            <span class="hljs-string">"Write leader information {} for component '{}' to {}."</span>,
            leaderInformation,
            componentId,
            ZooKeeperUtils.<span class="hljs-built_in">generateZookeeperPath</span>(
                    curatorFramework.<span class="hljs-built_in">getNamespace</span>(), connectionInformationPath));

    <span class="hljs-keyword">try</span> {
        ZooKeeperUtils.<span class="hljs-built_in">writeLeaderInformationToZooKeeper</span>(
                leaderInformation,
                curatorFramework,
                leaderLatch::hasLeadership,
                connectionInformationPath);
    } <span class="hljs-built_in">catch</span> (Exception e) {
        leaderElectionListener.<span class="hljs-built_in">onError</span>(e);
    }
}
</code></pre>
<h4 data-id="heading-6">æœåŠ¡å‘ç°</h4>
<p>æ¢³ç†å®Œé€‰ä¸¾æœåŠ¡çš„æºç åï¼Œæˆ‘ä»¬å†æ¥çœ‹ä¸€ä¸‹æœåŠ¡å‘ç°çš„è¿‡ç¨‹ã€‚æˆ‘ä»¬ä»¥ TaskManager è·å– JobManager çš„ leader ä¸ºä¾‹ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bd31181229cc4f1592e076f8451663e9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Z2i5ZCRR29vZ2xl57yW56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768826526&amp;x-signature=%2FFQ8J0YaQ1FYszWnvGbxQ3lmokM%3D" alt="ZKLeaderRetrieval" loading="lazy"/></p>
<p>å½“æˆ‘ä»¬å¾€ TaskManager æ·»åŠ ä»»åŠ¡æ—¶ï¼Œä¼šè°ƒç”¨ JobLeaderService çš„ addJob æ–¹æ³•ã€‚è¿™é‡Œä¼šå…ˆè·å– LeaderRetrievalï¼Œç„¶åè°ƒç”¨ start æ–¹æ³•æ³¨å†Œ LeaderRetrievalListener ç›‘å¬ï¼Œå¹¶åˆ›å»º LeaderRetrievalDriverã€‚åœ¨ LeaderRetrievalDriver ä¸­ä¸»è¦æ˜¯å‘ ZooKeeper æ³¨å†Œ connection_info èŠ‚ç‚¹çš„å˜æ›´ã€‚</p>
<p>å¦‚æœå‘ç”Ÿå˜æ›´ï¼ŒZooKeeper ä¼šå›è°ƒ <code>LeaderRetrievalDriver.retrieveLeaderInformationFromZooKeeper</code> æ–¹æ³•ã€‚æˆ‘ä»¬ä» ZooKeeper è·å–åˆ° leader çš„åœ°å€å’Œ sessionId åï¼Œå°±å›è°ƒ <code>LeaderRetrievalService.notifyLeaderAddress</code> æ–¹æ³•ã€‚æœ€ç»ˆè°ƒç”¨åˆ° JobLeaderService çš„ notifyLeaderAddress æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•ä¸­å°±æ˜¯æ–­å¼€ä¸æ—§ leader çš„è¿æ¥ï¼Œå¢åŠ ä¸æ–° leader çš„è¿æ¥ã€‚</p>
<h4 data-id="heading-7">ä¿¡æ¯ä¿å­˜</h4>
<p>æœ€åæˆ‘ä»¬å†æ¥çœ‹ä¿¡æ¯ä¿å­˜ç›¸å…³çš„æºç ã€‚åœ¨ JobManager å®Œæˆä¸€æ¬¡ Checkpoint æ—¶ï¼Œä¼šæ‰§è¡Œ <code>CheckpointCoordinator.completePendingCheckpoint</code> æ–¹æ³•ï¼Œè·Ÿéšè°ƒç”¨é“¾è·¯å¯ä»¥æ‰¾åˆ° <code>ZooKeeperStateHandleStore.addAndLock</code> æ–¹æ³•ï¼Œè¿™é‡Œä¼šæŠŠçŠ¶æ€å†™å…¥åˆ°æ–‡ä»¶ç³»ç»Ÿä¸­ï¼Œç„¶åæŠŠæ–‡ä»¶è·¯å¾„ä¿å­˜åœ¨ ZooKeeper ä¸­ã€‚</p>
<pre><code class="hljs language-scss" lang="scss">public RetrievableStateHandle&lt;T&gt; <span class="hljs-built_in">addAndLock</span>(String pathInZooKeeper, T state)
        throws PossibleInconsistentStateException, Exception {
    <span class="hljs-built_in">checkNotNull</span>(pathInZooKeeper, "Path in ZooKeeper");
    <span class="hljs-built_in">checkNotNull</span>(state, "State");
    final String path = <span class="hljs-built_in">normalizePath</span>(pathInZooKeeper);
    final Optional&lt;Stat&gt; maybeStat = <span class="hljs-built_in">getStat</span>(path);

    if (maybeStat.isPresent()) {
        if (isNotMarkedForDeletion(maybeStat.get())) {
            throw new <span class="hljs-built_in">AlreadyExistException</span>(
                    String.format("ZooKeeper node %s already exists.", path));
        }

        Preconditions<span class="hljs-selector-class">.checkState</span>(
                releaseAndTryRemove(path),
                "The state is marked for deletion and, therefore, should be deletable.");
    }

    final RetrievableStateHandle&lt;T&gt; storeHandle = storage<span class="hljs-selector-class">.store</span>(state);
    final byte<span class="hljs-selector-attr">[]</span> serializedStoreHandle = <span class="hljs-built_in">serializeOrDiscard</span>(storeHandle);
    try {
        <span class="hljs-built_in">writeStoreHandleTransactionally</span>(path, serializedStoreHandle);
        return storeHandle;
    } catch (KeeperException.NodeExistsException e) {
        <span class="hljs-comment">// Transactions are not idempotent in the curator version we're currently using, so it</span>
        <span class="hljs-comment">// is actually possible that we've re-tried a transaction that has already succeeded.</span>
        <span class="hljs-comment">// We've ensured that the node hasn't been present prior executing the transaction, so</span>
        <span class="hljs-comment">// we can assume that this is a result of the retry mechanism.</span>
        return storeHandle;
    } catch (Exception e) {
        if (indicatesPossiblyInconsistentState(e)) {
            throw new <span class="hljs-built_in">PossibleInconsistentStateException</span>(e);
        }
        <span class="hljs-comment">// In case of any other failure, discard the state and rethrow the exception.</span>
        storeHandle<span class="hljs-selector-class">.discardState</span>();
        throw e;
    }
}
</code></pre>
<p>è‡³æ­¤ï¼ŒåŸºäº ZooKeeper çš„ HA é€»è¾‘æˆ‘ä»¬å°±æ¢³ç†å®Œäº†ã€‚ä» 1.12 ç‰ˆæœ¬å¼€å§‹ï¼ŒFlink è¿˜æ”¯æŒäº† Kubernetes é«˜å¯ç”¨ï¼Œä¸‹é¢æˆ‘ä»¬å†æ¥ä¸€ä¸‹å®ƒæ˜¯å¦‚ä½•å®ç°çš„ã€‚</p>
<h3 data-id="heading-8">åŸºäº Kubernetes çš„ HA</h3>
<h4 data-id="heading-9">é€‰ä¸¾æœåŠ¡</h4>
<p>é€šè¿‡å‰é¢çš„å­¦ä¹ ï¼Œæˆ‘ä»¬å·²ç»äº†è§£åˆ°ï¼Œé€‰ä¸¾çš„ä¸»è¦é€»è¾‘æ˜¯åœ¨ LeaderElectionDriver ä¸­ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬ç›´æ¥æ¥çœ‹ KubernetesLeaderElectionDriver çš„é€»è¾‘å³å¯ã€‚åˆ›å»º KubernetesLeaderElectionDriver æ—¶ï¼Œåˆ›å»ºå¹¶å¯åŠ¨äº† KubernetesLeaderElectorã€‚è¿™ä¸ªç±»ä¼¼äº ZooKeeper é€»è¾‘ä¸­ LeaderLatchï¼Œä¼šè·Ÿ Kubernetes åº•å±‚çš„é€‰ä¸¾é€»è¾‘äº¤äº’ï¼ŒåŒæ—¶æ³¨å†Œç›‘å¬ã€‚</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">KubernetesLeaderElector</span>(
        NamespacedKubernetesClient kubernetesClient,
        KubernetesLeaderElectionConfiguration leaderConfig,
        LeaderCallbackHandler leaderCallbackHandler,
        ExecutorService executorService) {
    <span class="hljs-selector-tag">this</span><span class="hljs-selector-class">.kubernetesClient</span> = <span class="hljs-selector-tag">kubernetesClient</span>;
    <span class="hljs-selector-tag">this</span><span class="hljs-selector-class">.leaderElectionConfig</span> =
            <span class="hljs-selector-tag">new</span> <span class="hljs-selector-tag">LeaderElectionConfigBuilder</span>()
                    <span class="hljs-selector-class">.withName</span>(leaderConfig.<span class="hljs-built_in">getConfigMapName</span>())
                    <span class="hljs-selector-class">.withLeaseDuration</span>(leaderConfig.<span class="hljs-built_in">getLeaseDuration</span>())
                    <span class="hljs-selector-class">.withLock</span>(
                            new <span class="hljs-built_in">ConfigMapLock</span>(
                                    new <span class="hljs-built_in">ObjectMetaBuilder</span>()
                                            .<span class="hljs-built_in">withNamespace</span>(kubernetesClient.<span class="hljs-built_in">getNamespace</span>())
                                            .<span class="hljs-built_in">withName</span>(leaderConfig.<span class="hljs-built_in">getConfigMapName</span>())
                                            <span class="hljs-comment">// Labels will be used to clean up the ha related</span>
                                            <span class="hljs-comment">// ConfigMaps.</span>
                                            .<span class="hljs-built_in">withLabels</span>(
                                                    KubernetesUtils.<span class="hljs-built_in">getConfigMapLabels</span>(
                                                            leaderConfig.<span class="hljs-built_in">getClusterId</span>()))
                                            .<span class="hljs-built_in">build</span>(),
                                    leaderConfig.<span class="hljs-built_in">getLockIdentity</span>()))
                    <span class="hljs-selector-class">.withRenewDeadline</span>(leaderConfig.<span class="hljs-built_in">getRenewDeadline</span>())
                    <span class="hljs-selector-class">.withRetryPeriod</span>(leaderConfig.<span class="hljs-built_in">getRetryPeriod</span>())
                    <span class="hljs-selector-class">.withReleaseOnCancel</span>(true)
                    <span class="hljs-selector-class">.withLeaderCallbacks</span>(
                            new <span class="hljs-built_in">LeaderCallbacks</span>(
                                    <span class="hljs-attribute">leaderCallbackHandler</span>::isLeader,
                                    <span class="hljs-attribute">leaderCallbackHandler</span>::notLeader,
                                    newLeader -&gt;
                                            LOG.<span class="hljs-built_in">info</span>(
                                                    <span class="hljs-string">"New leader elected {} for {}."</span>,
                                                    newLeader,
                                                    leaderConfig.<span class="hljs-built_in">getConfigMapName</span>())))
                    <span class="hljs-selector-class">.build</span>();
    <span class="hljs-selector-tag">this</span><span class="hljs-selector-class">.executorService</span> = <span class="hljs-selector-tag">executorService</span>;

    <span class="hljs-selector-tag">LOG</span><span class="hljs-selector-class">.info</span>(
            <span class="hljs-string">"Create KubernetesLeaderElector on lock {}."</span>,
            leaderElectionConfig.<span class="hljs-built_in">getLock</span>().<span class="hljs-built_in">describe</span>());
}
</code></pre>
<p>é€‰ä¸¾æˆåŠŸåï¼Œä¼šå›è°ƒ <code>LeaderElectionListener.onGrantLeadership</code> æ–¹æ³•ã€‚åç»­çš„è°ƒç”¨é“¾è·¯è¿˜æ˜¯ä¼šè°ƒç”¨åˆ° <code>KubernetesLeaderElectionDriver.publishLeaderInformation</code> æ–¹æ³•ã€‚è¿™ä¸ªæ–¹æ³•æ˜¯æŠŠ leader ä¿¡æ¯å†™åˆ° Kubernetes çš„ configMap ä¸­ã€‚</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">publishLeaderInformation</span>(<span class="hljs-params">String componentId, LeaderInformation leaderInformation</span>)</span> {
    Preconditions.checkState(running.<span class="hljs-keyword">get</span>());

    <span class="hljs-keyword">try</span> {
        kubeClient
                .checkAndUpdateConfigMap(
                        configMapName,
                        updateConfigMapWithLeaderInformation(componentId, leaderInformation))
                .<span class="hljs-keyword">get</span>();
    } <span class="hljs-keyword">catch</span> (InterruptedException | ExecutionException e) {
        leaderElectionListener.onError(e);
    }

    LOG.debug(
            <span class="hljs-string">"Successfully wrote leader information {} for leader {} into the config map {}."</span>,
            leaderInformation,
            componentId,
            configMapName);
}
</code></pre>
<h4 data-id="heading-10">æœåŠ¡å‘ç°</h4>
<p>æœåŠ¡å‘ç°çš„é€»è¾‘åœ¨ KubernetesLeaderRetrievalDriver ç±»ä¸­ï¼Œåœ¨åˆ›å»ºæ—¶ï¼Œä¼šå°†å†…éƒ¨ç±» ConfigMapCallbackHandlerImpl æ³¨å†Œä¸ºç›‘å¬å›è°ƒç±»ã€‚</p>
<p>å½“ configMap æœ‰æ–°å¢æˆ–å˜æ›´åï¼Œä¼šå›è°ƒ <code>LeaderRetrievalService.notifyLeaderAddress</code> æ–¹æ³•ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ConfigMapCallbackHandlerImpl</span>
        <span class="hljs-keyword">implements</span> <span class="hljs-title class_">FlinkKubeClient</span>.WatchCallbackHandler&lt;KubernetesConfigMap&gt; {

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onAdded</span><span class="hljs-params">(List&lt;KubernetesConfigMap&gt; configMaps)</span> {
        <span class="hljs-comment">// The ConfigMap is created by KubernetesLeaderElectionDriver with</span>
        <span class="hljs-comment">// empty data. We don't really need to process anything unless the retriever was started</span>
        <span class="hljs-comment">// after the leader election has already succeeded.</span>
        <span class="hljs-keyword">final</span> <span class="hljs-type">KubernetesConfigMap</span> <span class="hljs-variable">configMap</span> <span class="hljs-operator">=</span> getOnlyConfigMap(configMaps, configMapName);
        <span class="hljs-keyword">final</span> <span class="hljs-type">LeaderInformation</span> <span class="hljs-variable">leaderInformation</span> <span class="hljs-operator">=</span> leaderInformationExtractor.apply(configMap);
        <span class="hljs-keyword">if</span> (!leaderInformation.isEmpty()) {
            leaderRetrievalEventHandler.notifyLeaderAddress(leaderInformation);
        }
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onModified</span><span class="hljs-params">(List&lt;KubernetesConfigMap&gt; configMaps)</span> {
        <span class="hljs-keyword">final</span> <span class="hljs-type">KubernetesConfigMap</span> <span class="hljs-variable">configMap</span> <span class="hljs-operator">=</span> getOnlyConfigMap(configMaps, configMapName);
        leaderRetrievalEventHandler.notifyLeaderAddress(
                leaderInformationExtractor.apply(configMap));
    }
    ...
}
</code></pre>
<h4 data-id="heading-11">ä¿¡æ¯ä¿å­˜</h4>
<p>ä¿¡æ¯ä¿å­˜çš„é€»è¾‘å’Œ ZooKeeper ä¹Ÿéå¸¸ç±»ä¼¼ã€‚å³å…ˆæŠŠ state ä¿å­˜åœ¨æ–‡ä»¶ç³»ç»Ÿï¼Œç„¶åæŠŠå­˜å‚¨è·¯å¾„å†™åˆ° Kubernetes å†™åˆ° configMap ä¸­ã€‚å…·ä½“å¯ä»¥çœ‹ <code>KubernetesStateHandleStore.addAndLock</code> æ–¹æ³•ã€‚</p>
<h3 data-id="heading-12">æ€»ç»“</h3>
<p>æœ¬æ–‡æˆ‘ä»¬ä¸€èµ·æ¢³ç†äº† Flink ä¸­ JobManager çš„ HA æœºåˆ¶ç›¸å…³æºç ã€‚ç›®å‰ Flink æ”¯æŒ ZooKeeper å’Œ Kubernetes ä¸¤ç§å®ç°ã€‚åœ¨æ¢³ç†è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä»¥ JobManager ä¸ºä¾‹ï¼Œå…¶ä»–å‡ ä¸ªç”¨åˆ°é«˜å¯ç”¨çš„æœåŠ¡çš„é€‰ä¸¾é€»è¾‘ä¹Ÿæ˜¯ä¸€æ ·çš„ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Next.jsç¬¬äºŒåä¸€ç« (ç¯å¢ƒå˜é‡)]]></title>    <link>https://juejin.cn/post/7594309641866379302</link>    <guid>https://juejin.cn/post/7594309641866379302</guid>    <pubDate>2026-01-12T12:54:35.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594309641866379302" data-draft-id="7594270467030794267" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Next.jsç¬¬äºŒåä¸€ç« (ç¯å¢ƒå˜é‡)"/> <meta itemprop="keywords" content="å‰ç«¯,Next.js"/> <meta itemprop="datePublished" content="2026-01-12T12:54:35.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°æ»¡zs"/> <meta itemprop="url" content="https://juejin.cn/user/2463384809252397"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Next.jsç¬¬äºŒåä¸€ç« (ç¯å¢ƒå˜é‡)
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2463384809252397/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°æ»¡zs
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-12T12:54:35.000Z" title="Mon Jan 12 2026 12:54:35 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ç¯å¢ƒå˜é‡</h2>
<p>ç¯å¢ƒå˜é‡ä¸€èˆ¬æ˜¯æŒ‡ç¨‹åºåœ¨è¿è¡Œæ—¶ï¼Œæ‰€éœ€è¦çš„ä¸€äº›é…ç½®ä¿¡æ¯ï¼Œä¾‹å¦‚æ•°æ®åº“è¿æ¥å­—ç¬¦ä¸²ï¼ŒAPIå¯†é’¥ï¼Œç«¯å£å·ç­‰ã€‚å…¶æ¬¡å°±æ˜¯ç¯å¢ƒå˜é‡è·Ÿæˆ‘ä»¬çš„æ“ä½œç³»ç»Ÿæœ‰å…³ï¼Œä¾‹å¦‚Linuxï¼ŒWindowsï¼ŒMacç­‰ã€‚</p>
<h4 data-id="heading-1">åŸºæœ¬ç”¨æ³•</h4>
<p>æˆ‘å…ˆå¸¦å¤§å®¶ç†Ÿæ‚‰å„ç§æ“ä½œç³»ç»Ÿï¼ˆLinuxï¼ŒWindows /cmd/powershellï¼ŒMacï¼‰çš„ä¸´æ—¶ç¯å¢ƒå˜é‡çš„å‘½ä»¤ï¼š</p>
<h5 data-id="heading-2">æŸ¥è¯¢ç¯å¢ƒå˜é‡</h5>
<ol>
<li>Linux / MacOS / wsl (é€šç”¨å‘½ä»¤):</li>
</ol>
<blockquote>
<p>æç¤ºï¼šwslæ˜¯Windows Subsystem for Linuxçš„ç¼©å†™ï¼Œæ˜¯Windows 10/11æ“ä½œç³»ç»Ÿçš„ä¸€ä¸ªå­ç³»ç»Ÿï¼Œå…è®¸ç”¨æˆ·åœ¨Windowsä¸Šè¿è¡ŒLinuxå‘½ä»¤è¡Œå·¥å…·ã€‚</p>
</blockquote>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">echo</span> <span class="hljs-variable">$PATH</span> <span class="hljs-comment">#æŸ¥è¯¢PATHç¯å¢ƒå˜é‡</span>
</code></pre>
<ol start="2">
<li>Windows /cmd:</li>
</ol>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">echo</span> %PATH% <span class="hljs-comment">#æŸ¥è¯¢PATHç¯å¢ƒå˜é‡</span>
<span class="hljs-built_in">echo</span> %USERNAME% <span class="hljs-comment">#æŸ¥è¯¢ç”¨æˆ·åç¯å¢ƒå˜é‡</span>
</code></pre>
<ol start="3">
<li>Windows /powershell:</li>
</ol>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">dir</span> Env:* <span class="hljs-comment">#æŸ¥è¯¢æ‰€æœ‰ç¯å¢ƒå˜é‡</span>
</code></pre>
<p>è¾“å‡ºå±•ç¤ºï¼š</p>
<pre><code class="hljs language-txt" lang="txt">RlsSvcPort                     22112
SESSIONNAME                    Console
SystemDrive                    C:
SystemRoot                     C:\WINDOWS
TEMP                           C:\Users\11955\AppData\Local\Temp
TERM_PROGRAM                   vscode
TERM_PROGRAM_VERSION           2.1.25
TMP                            C:\Users\11955\AppData\Local\Temp
USERDOMAIN                     XIAOMAN
USERDOMAIN_ROAMINGPROFILE      XIAOMAN
USERNAME                       11955
USERPROFILE                    C:\Users\11955
</code></pre>
<h5 data-id="heading-3">è®¾ç½®ä¸´æ—¶ç¯å¢ƒå˜é‡</h5>
<ol>
<li>Linux / MacOS / wsl (é€šç”¨å‘½ä»¤) æç¤ºï¼šè¿™ä¸ªå¿…å­¦ï¼ŒåæœŸè¿›è¡Œéƒ¨ç½²çš„æ—¶å€™ä¹Ÿå¾ˆå¸¸ç”¨ã€‚:</li>
</ol>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">export</span> XM=123 <span class="hljs-comment">#è®¾ç½®XMç¯å¢ƒå˜é‡ä¸º123</span>
<span class="hljs-built_in">echo</span> <span class="hljs-variable">$XM</span> <span class="hljs-comment">#æŸ¥è¯¢XMç¯å¢ƒå˜é‡</span>
</code></pre>
<ol start="2">
<li>Windows /cmd:</li>
</ol>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">set</span> XM=123 <span class="hljs-comment">#è®¾ç½®XMç¯å¢ƒå˜é‡ä¸º123</span>
<span class="hljs-built_in">echo</span> %XM% <span class="hljs-comment">#æŸ¥è¯¢XMç¯å¢ƒå˜é‡</span>
</code></pre>
<ol start="3">
<li>Windows /powershell:</li>
</ol>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-variable">$env</span>:XM=<span class="hljs-string">'123'</span> <span class="hljs-comment">#è®¾ç½®XMç¯å¢ƒå˜é‡ä¸º123</span>
<span class="hljs-built_in">echo</span> <span class="hljs-variable">$env</span>:XM <span class="hljs-comment">#æŸ¥è¯¢XMç¯å¢ƒå˜é‡</span>
</code></pre>
<h4 data-id="heading-4">script-shell</h4>
<p>é‚£ä¹ˆæˆ‘ä»¬å­¦ä¼šä¸´æ—¶ç¯å¢ƒå˜é‡ä¹‹åæœ‰ä»€ä¹ˆç”¨å‘¢ï¼Ÿ æˆ‘ä»¬å¯ä»¥åº”ç”¨åˆ°é¡¹ç›®ä¸­ï¼Œä¾‹å¦‚æœ¬åœ°ç¯å¢ƒè¿æ¥æ•°æ®åº“<code>localhost</code>,<code>root</code>,<code>12346</code>,ç”Ÿäº§ç¯å¢ƒå°±ä¼šå˜æˆ<code>8.8.8.8</code>,<code>xiaoman</code>,<code>^&amp;TG*H#**P</code>ï¼Œç­‰ç­‰è¯¸å¦‚æ­¤ç±»ã€‚</p>
<p>æ‰“å¼€package.jsonæ–‡ä»¶ï¼Œæ‰¾åˆ°<code>scripts</code>é…ç½®é¡¹ï¼Œæ·»åŠ ä¸€ä¸ªè„šæœ¬ï¼š</p>
<p>set DB_HOST=localhost(æœ¬åœ°ç¯å¢ƒ è‡ªå®šä¹‰ç¯å¢ƒå˜é‡)</p>
<p>set DB_HOST=8.8.8.8(ç”Ÿäº§ç¯å¢ƒ è‡ªå®šä¹‰ç¯å¢ƒå˜é‡)</p>
<p>è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥æ ¹æ®ä¸åŒçš„ç¯å¢ƒå˜é‡ï¼Œè¿æ¥ä¸åŒçš„æ•°æ®åº“</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-attr">"scripts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"dev"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"set DB_HOST=localhost &amp;&amp; next dev"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"build"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"set DB_HOST=8.8.8.8 &amp;&amp; next build"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"start"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"next start"</span>
<span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
</code></pre>
<p>ä¸ºä»€ä¹ˆæˆ‘åœ¨<code>powershell</code>ç»ˆç«¯ï¼Œç¼–å†™<code>cmd</code>çš„å‘½ä»¤ï¼Œè€Œä¸”æ˜¯å¯ä»¥è¿è¡Œçš„ï¼ï¼ï¼</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/63fe4551ef994f83befa5f4e48a7f566~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5ruhenM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768827274&amp;x-signature=u5rXwg%2FRUNoQuz5F1xyoqp2Lu2o%3D" alt="image.png" loading="lazy"/></p>
<p>åŸç†è§£é‡Š:<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.npmjs.com%2Fcli%2Fv9%2Fcommands%2Fnpm-run-script" target="_blank" title="https://docs.npmjs.com/cli/v9/commands/npm-run-script" ref="nofollow noopener noreferrer">script-shell</a>, æ˜¯å› ä¸ºnpmè¿è¡Œ<code>script</code>è„šæœ¬çš„æ—¶å€™ä¼šå•ç‹¬å¼€ä¸€ä¸ªçº¿ç¨‹ï¼Œè¿™ä¸ªçº¿ç¨‹åœ¨<code>Linux/MacOs</code>ä¸‹æ˜¯<code>/bin/sh</code>ï¼Œåœ¨<code>Windows</code>ä¸‹æ˜¯<code>cmd</code>,æ‰€ä»¥æˆ‘ä»¬åœ¨<code>script</code>è„šæœ¬ä¸­è¦ç¼–å†™<code>cmd</code>çš„å‘½ä»¤ã€‚</p>
<h4 data-id="heading-5">cross-env</h4>
<p>æˆ‘ä»¬å¯ä»¥è§‚å¯Ÿä¸Šä¸€å°èŠ‚çš„é—®é¢˜ï¼Œæˆ‘ä»¬åœ¨<code>script</code>è„šæœ¬ä¸­ç¼–å†™äº†<code>cmd</code>çš„å‘½ä»¤ï¼Œä½†æ˜¯å¦‚æœä»–åœ¨powershellç»ˆç«¯/MacOsç»ˆç«¯/Linuxç»ˆç«¯ï¼Œä»–å°±æ— æ³•è¿è¡Œï¼Œä¹Ÿå°±æ˜¯è·¨å¹³å°é—®é¢˜ã€‚</p>
<p>æ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>cross-env</code>æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œ<code>cross-env</code>æ˜¯ä¸€ä¸ªè·¨å¹³å°çš„ç¯å¢ƒå˜é‡è®¾ç½®å·¥å…·ï¼Œä»–å¯ä»¥è®©æˆ‘ä»¬åœ¨ä¸åŒçš„æ“ä½œç³»ç»Ÿä¸‹ï¼Œä½¿ç”¨ç›¸åŒçš„å‘½ä»¤æ¥è®¾ç½®ç¯å¢ƒå˜é‡ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">npm install cross-env -D <span class="hljs-comment">#å®‰è£…cross-env</span>
</code></pre>
<p>ç„¶åæˆ‘ä»¬å°±å¯ä»¥åœ¨<code>package.json</code>æ–‡ä»¶ä¸­ä½¿ç”¨<code>cross-env</code>æ¥è®¾ç½®ç¯å¢ƒå˜é‡ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-attr">"scripts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"dev"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"cross-env DB_HOST=localhost next dev"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"build"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"cross-env DB_HOST=8.8.8.8 next build"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"start"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"next start"</span>
<span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
</code></pre>
<p>è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥åœ¨ä¸åŒçš„æ“ä½œç³»ç»Ÿä¸‹ï¼Œä½¿ç”¨ç›¸åŒçš„å‘½ä»¤æ¥è®¾ç½®ç¯å¢ƒå˜é‡äº†ã€‚</p>
<h4 data-id="heading-6">æœ€ä½³å®è·µ</h4>
<p>å› ä¸ºä¸Šè¿°æ–¹å¼ä¾æ—§éº»çƒ¦ï¼Œå¦‚æœæœ‰å¾ˆå¤šçš„ç¯å¢ƒå˜é‡ï¼Œæˆ‘ä»¬çš„å‘½ä»¤å°±ä¼šå˜å¾—éå¸¸é•¿ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>.env</code>æ–‡ä»¶æ¥å­˜å‚¨ç¯å¢ƒå˜é‡ã€‚</p>
<p>Next.js ç¯å¢ƒå˜é‡æŸ¥æ‰¾è§„åˆ™(å®˜æ–¹è§„å®š)ï¼Œå¦‚æœåœ¨å…¶ä¸­ä¸€ä¸ªé“¾è·¯ä¸­æ‰¾åˆ°äº†ç¯å¢ƒå˜é‡ï¼Œé‚£ä¹ˆå°±ä¸ä¼šç»§ç»­å¾€ä¸‹æ‰¾äº†ã€‚</p>
<ol>
<li>process.env</li>
<li>.env.$(NODE_ENV).local</li>
<li>.env.localï¼ˆæœªæ£€æŸ¥çš„æƒ…å†µNODE_ENVã€‚testï¼‰</li>
<li>.env.$(NODE_ENV)</li>
<li>.env</li>
</ol>
<blockquote>
<p>æç¤ºï¼šNODE_ENVæ˜¯Next.jsè‡ªåŠ¨æ³¨å…¥çš„ç¯å¢ƒå˜é‡ï¼Œå¼€å‘æ¨¡å¼ä»–ä¼šæ³¨å…¥<code>development</code>ï¼Œç”Ÿäº§æ¨¡å¼ä»–ä¼šæ³¨å…¥<code>production</code>ã€‚</p>
</blockquote>
<p>æ‰€ä»¥æˆ‘ä»¬å°±å¯ä»¥åˆ›å»ºä¸¤ä¸ªä¸åŒçš„<code>env</code>æ–‡ä»¶ï¼Œä¸€ä¸ªæ˜¯å¼€å‘ç¯å¢ƒï¼Œä¸€ä¸ªæ˜¯ç”Ÿäº§ç¯å¢ƒã€‚</p>
<p>åˆ›å»º <code>.env.development.local</code>æ–‡ä»¶(è¡¨ç¤ºå¼€å‘ç¯å¢ƒ)ï¼Œå¹¶æ·»åŠ ç¯å¢ƒå˜é‡ï¼š</p>
<pre><code class="hljs language-env" lang="env">DB_HOST=localhost
DB_USER=root
DB_PASSWORD=123456
</code></pre>
<p>åˆ›å»º <code>.env.production.local</code>æ–‡ä»¶(è¡¨ç¤ºç”Ÿäº§ç¯å¢ƒ)ï¼Œå¹¶æ·»åŠ ç¯å¢ƒå˜é‡ï¼š</p>
<pre><code class="hljs language-env" lang="env">DB_HOST=8.8.8.8
DB_USER=xiaoman
DB_PASSWORD=^&amp;TG*H#**P
</code></pre>
<p>åˆ›å»º<code>/src/app/home/page.tsx</code>æ–‡ä»¶ï¼Œå¹¶æ·»åŠ ç¯å¢ƒå˜é‡ï¼š</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">//æœåŠ¡å™¨ç»„ä»¶ ä¸è¦å¢åŠ `use client`</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Home</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Home<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>DB_HOST: {process.env.DB_HOST}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>DB_USER: {process.env.DB_USER}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>DB_PASSWORD: {process.env.DB_PASSWORD}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
}
</code></pre>
<p>å½“æˆ‘ä»¬æ‰§è¡Œ<code>npm run dev</code>æ—¶ï¼Œä»–ä¼šè‡ªåŠ¨è¯»å–<code>.env.development.local</code>æ–‡ä»¶ä¸­çš„ç¯å¢ƒå˜é‡ï¼Œå½“æˆ‘ä»¬æ‰§è¡Œ<code>npm run build</code>æ—¶ï¼Œä»–ä¼šè‡ªåŠ¨è¯»å–<code>.env.production.local</code>æ–‡ä»¶ä¸­çš„ç¯å¢ƒå˜é‡ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3c82c247f745422a86446bd5746e23ff~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5ruhenM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768827274&amp;x-signature=X9Ows9hybIhED%2BUMp5GCPJmjL0E%3D" alt="image.png" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Fork ä¸»é¢˜å¦‚ä½•æ›´æ–°ï¼ŸåŸºäº Ink æ„å»ºä¸»é¢˜æ›´æ–° CLI å·¥å…·]]></title>    <link>https://juejin.cn/post/7594309641866412070</link>    <guid>https://juejin.cn/post/7594309641866412070</guid>    <pubDate>2026-01-12T12:56:54.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594309641866412070" data-draft-id="7594270467030810651" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Fork ä¸»é¢˜å¦‚ä½•æ›´æ–°ï¼ŸåŸºäº Ink æ„å»ºä¸»é¢˜æ›´æ–° CLI å·¥å…·"/> <meta itemprop="keywords" content="å‰ç«¯,Git,JavaScript"/> <meta itemprop="datePublished" content="2026-01-12T12:56:54.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="cos"/> <meta itemprop="url" content="https://juejin.cn/user/1698115646132254"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Fork ä¸»é¢˜å¦‚ä½•æ›´æ–°ï¼ŸåŸºäº Ink æ„å»ºä¸»é¢˜æ›´æ–° CLI å·¥å…·
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1698115646132254/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    cos
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-12T12:56:54.000Z" title="Mon Jan 12 2026 12:56:54 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»18åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ¬æ–‡åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cosine.ren%2Fpost%2Finteractive-git-update-cli" target="_blank" title="https://blog.cosine.ren/post/interactive-git-update-cli" ref="nofollow noopener noreferrer">blog.cosine.ren/post/interaâ€¦</a></p>
<p><em>æœ¬æ–‡å›¾è¡¨ã€ä¼ªä»£ç ç­‰ç”± AI è¾…åŠ©ç¼–å†™</em></p>
<h2 data-id="heading-0">èƒŒæ™¯</h2>
<p>å½“ä½  fork äº†ä¸€ä¸ªå¼€æºé¡¹ç›®ä½œä¸ºè‡ªå·±çš„åšå®¢ä¸»é¢˜ï¼Œå¦‚ä½•ä¼˜é›…åœ°ä»ä¸Šæ¸¸ä»“åº“åŒæ­¥æ›´æ–°ï¼Ÿæ‰‹åŠ¨æ•²ä¸€ä¸² Git å‘½ä»¤æ—¢ç¹çåˆå®¹æ˜“å‡ºé”™ï¼›ä½†ç›´æ¥ç‚¹ Fork çš„ Sync æŒ‰é’®ï¼Œåˆå¯èƒ½è¦†ç›–ä½ çš„è‡ªå®šä¹‰é…ç½®å’Œå†…å®¹ã€‚</p>
<p>å¾ˆå¤šäººå› æ­¤åœ¨ã€Œä¿æŒæ›´æ–°ã€å’Œã€Œä¿ç•™ä¿®æ”¹ã€ä¹‹é—´å·¦å³ä¸ºéš¾ï¼šè¦ä¹ˆå¹²è„†äºŒå¼€åä¸å†åŒæ­¥ï¼Œè¦ä¹ˆæ¯æ¬¡æ›´æ–°éƒ½æå¿ƒåŠèƒ†ã€‚</p>
<p>è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆä¸å°‘é¡¹ç›®ä¼šåƒ <code>@fumadocs/cli</code> ä¸€æ ·ï¼Œæä¾›ä¸“é—¨çš„ CLI æ¥å®Œæˆæ›´æ–°ç­‰ç›¸å…³æ“ä½œã€‚</p>
<p>æœ¬æ–‡å°†ä»‹ç»å¦‚ä½•<strong>ç®€å•åœ°</strong>æ„å»ºä¸€ä¸ªäº¤äº’å¼ CLI å·¥å…·ï¼ŒæŠŠ fork åŒæ­¥çš„æµç¨‹è‡ªåŠ¨åŒ–èµ·æ¥ã€‚</p>
<p>è¿™ä¸ªå·¥å…·çš„æ ¸å¿ƒç›®æ ‡æ˜¯ï¼š</p>
<ul>
<li><strong>å®‰å…¨</strong>ï¼šæ›´æ–°å‰æ£€æŸ¥å·¥ä½œåŒºçŠ¶æ€ï¼Œå¿…è¦æ—¶å¯å¤‡ä»½</li>
<li><strong>é€æ˜</strong>ï¼šé¢„è§ˆæ‰€æœ‰å˜æ›´ï¼Œè®©ç”¨æˆ·å†³å®šæ˜¯å¦æ›´æ–°</li>
<li><strong>å‹å¥½</strong>ï¼šå‡ºç°å†²çªæ—¶ç»™å‡ºæ˜ç¡®æŒ‡å¼•</li>
</ul>
<p>å…·ä½“çš„ä»£ç å¯ä»¥çœ‹è¿™ä¸ª PRï¼š</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FcosZone%2Fastro-koharu%2Fpull%2F43" target="_blank" title="https://github.com/cosZone/astro-koharu/pull/43" ref="nofollow noopener noreferrer">github.com/cosZone/astâ€¦</a></p>
<p>ä¸è¿‡è¿™ä¸ª PR åªæ˜¯æœ€åˆçš„ç‰ˆæœ¬ï¼Œåé¢åˆç¼ç¼è¡¥è¡¥äº†ä¸å°‘ä¸œè¥¿ï¼Œæ•´ä½“æµç¨‹æ˜¯æˆ‘ç ”ç©¶ä¸€ä¸ªå‘¨æœ«åæ‘¸ç´¢å‡ºçš„ï¼Œå¦‚æœ‰ä¸è¶³ï¼Œé‚£ä¸€å®šæ˜¯æˆ‘è€ƒè™‘ä¸å‘¨ï¼Œæ¬¢è¿æŒ‡å‡ºï½</p>
<p>åœ¨è¿™ä¸ª PR é‡Œï¼Œæˆ‘åŸºäº Ink æ„å»ºäº†ä¸€ä¸ªäº¤äº’å¼ TUI å·¥å…·ï¼Œæä¾›äº†åšå®¢å†…å®¹å¤‡ä»½/è¿˜åŸã€ä¸»é¢˜æ›´æ–°ã€å†…å®¹ç”Ÿæˆã€å¤‡ä»½ç®¡ç†ç­‰åŠŸèƒ½ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">pnpm koharu <span class="hljs-comment"># äº¤äº’å¼ä¸»èœå•</span>
pnpm koharu backup <span class="hljs-comment"># å¤‡ä»½åšå®¢å†…å®¹ (--full å®Œæ•´å¤‡ä»½)</span>
pnpm koharu restore <span class="hljs-comment"># è¿˜åŸå¤‡ä»½ (--latest, --dry-run, --force)</span>
pnpm koharu update <span class="hljs-comment"># ä»ä¸Šæ¸¸åŒæ­¥æ›´æ–° (--check, --skip-backup, --force)</span>
pnpm koharu generate <span class="hljs-comment"># ç”Ÿæˆå†…å®¹èµ„äº§ (LQIP, ç›¸ä¼¼åº¦, AI æ‘˜è¦)</span>
pnpm koharu clean <span class="hljs-comment"># æ¸…ç†æ—§å¤‡ä»½ (--keep N)</span>
pnpm koharu list <span class="hljs-comment"># æŸ¥çœ‹æ‰€æœ‰å¤‡ä»½</span>
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fc83069cb9544c38b3393ccfd39a18bc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgY29z:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768827413&amp;x-signature=uLs%2B6nW%2FhS9EU2zhpJoKK0twWQE%3D" alt="" loading="lazy"/></p>
<p>å…¶ä¸­å¤‡ä»½åŠŸèƒ½å¯ä»¥ï¼š</p>
<ul>
<li>åŸºç¡€å¤‡ä»½ï¼šåšå®¢æ–‡ç« ã€é…ç½®ã€å¤´åƒã€.env</li>
<li>å®Œæ•´å¤‡ä»½ï¼šåŒ…å«æ‰€æœ‰å›¾ç‰‡å’Œç”Ÿæˆçš„èµ„äº§æ–‡ä»¶</li>
<li>è‡ªåŠ¨ç”Ÿæˆ <code>manifest.json</code> è®°å½•ä¸»é¢˜ç‰ˆæœ¬ä¸å¤‡ä»½å…ƒä¿¡æ¯ï¼ˆæ—¶é—´ç­‰ï¼‰</li>
</ul>
<p>è¿˜åŸåŠŸèƒ½å¯ä»¥ï¼š</p>
<ul>
<li>äº¤äº’å¼é€‰æ‹©å¤‡ä»½æ–‡ä»¶</li>
<li>æ”¯æŒ <code>--dry-run</code> é¢„è§ˆæ¨¡å¼</li>
<li>æ˜¾ç¤ºå¤‡ä»½ç±»å‹ã€ç‰ˆæœ¬ã€æ—¶é—´ç­‰å…ƒä¿¡æ¯</li>
</ul>
<p>ä¸»é¢˜æ›´æ–°åŠŸèƒ½å¯ä»¥ï¼š</p>
<ul>
<li>è‡ªåŠ¨é…ç½® upstream remote æŒ‡å‘åŸå§‹ä»“åº“</li>
<li>é¢„è§ˆå¾…åˆå¹¶çš„æäº¤åˆ—è¡¨ï¼ˆæ˜¾ç¤º hashã€messageã€æ—¶é—´ï¼‰</li>
<li>æ›´æ–°å‰å¯é€‰å¤‡ä»½ï¼Œæ”¯æŒå†²çªæ£€æµ‹ä¸å¤„ç†</li>
<li>åˆå¹¶æˆåŠŸåè‡ªåŠ¨å®‰è£…ä¾èµ–</li>
<li>æ”¯æŒ <code>--check</code> ä»…æ£€æŸ¥æ›´æ–°ã€<code>--force</code> è·³è¿‡å·¥ä½œåŒºæ£€æŸ¥</li>
</ul>
<h2 data-id="heading-1">æ•´ä½“æ¶æ„</h2>
<pre><code class="hljs language-infographic" lang="infographic">infographic sequence-snake-steps-underline-text
data
  title Git Update å‘½ä»¤æµç¨‹
  desc ä» upstream åŒæ­¥æ›´æ–°çš„å®Œæ•´å·¥ä½œæµ
  items
    - label æ£€æŸ¥çŠ¶æ€
      desc éªŒè¯å½“å‰åˆ†æ”¯å’Œå·¥ä½œåŒºçŠ¶æ€
      icon mdi/source-branch-check
    - label é…ç½®è¿œç¨‹
      desc ç¡®ä¿ upstream remote å·²é…ç½®
      icon mdi/source-repository
    - label è·å–æ›´æ–°
      desc ä» upstream æ‹‰å–æœ€æ–°æäº¤
      icon mdi/cloud-download
    - label é¢„è§ˆå˜æ›´
      desc æ˜¾ç¤ºå¾…åˆå¹¶çš„æäº¤åˆ—è¡¨
      icon mdi/file-find
    - label ç¡®è®¤å¤‡ä»½
      desc å¯é€‰ï¼šå¤‡ä»½å½“å‰å†…å®¹
      icon mdi/backup-restore
    - label æ‰§è¡Œåˆå¹¶
      desc åˆå¹¶ upstream åˆ†æ”¯åˆ°æœ¬åœ°
      icon mdi/merge
    - label å¤„ç†ç»“æœ
      desc æˆåŠŸåˆ™å®‰è£…ä¾èµ–ï¼Œå†²çªåˆ™æç¤ºè§£å†³
      icon mdi/check-circle
</code></pre>
<h2 data-id="heading-2">æ›´æ–°ç›¸å…³ Git å‘½ä»¤è¯¦è§£</h2>
<h3 data-id="heading-3">1. æ£€æŸ¥å½“å‰åˆ†æ”¯</h3>
<pre><code class="hljs language-bash" lang="bash">git rev-parse --abbrev-ref HEAD
</code></pre>
<p><strong>ä½œç”¨</strong>ï¼šè·å–å½“å‰æ‰€åœ¨åˆ†æ”¯çš„åç§°ã€‚</p>
<p><strong>å‚æ•°è§£æ</strong>ï¼š</p>
<ul>
<li><code>rev-parse</code>ï¼šè§£æ Git å¼•ç”¨</li>
<li><code>--abbrev-ref</code>ï¼šè¾“å‡ºç®€çŸ­çš„å¼•ç”¨åç§°ï¼ˆå¦‚ <code>main</code>ï¼‰ï¼Œè€Œä¸æ˜¯å®Œæ•´çš„ SHA</li>
</ul>
<p><strong>ä½¿ç”¨åœºæ™¯</strong>ï¼šç¡®ä¿ç”¨æˆ·åœ¨æ­£ç¡®çš„åˆ†æ”¯ï¼ˆå¦‚ <code>main</code>ï¼‰ä¸Šæ‰§è¡Œæ›´æ–°ï¼Œé¿å…åœ¨ feature åˆ†æ”¯ä¸Šæ„å¤–åˆå¹¶ä¸Šæ¸¸ä»£ç ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> currentBranch = <span class="hljs-title function_">execSync</span>(<span class="hljs-string">"git rev-parse --abbrev-ref HEAD"</span>)
  .<span class="hljs-title function_">toString</span>()
  .<span class="hljs-title function_">trim</span>();
<span class="hljs-keyword">if</span> (currentBranch !== <span class="hljs-string">"main"</span>) {
  <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">`ä»…æ”¯æŒåœ¨ main åˆ†æ”¯æ‰§è¡Œæ›´æ–°ï¼Œå½“å‰åˆ†æ”¯: <span class="hljs-subst">${currentBranch}</span>`</span>);
}
</code></pre>
<h3 data-id="heading-4">2. æ£€æŸ¥å·¥ä½œåŒºçŠ¶æ€</h3>
<pre><code class="hljs language-bash" lang="bash">git status --porcelain
</code></pre>
<p><strong>ä½œç”¨</strong>ï¼šä»¥æœºå™¨å¯è¯»çš„æ ¼å¼è¾“å‡ºå·¥ä½œåŒºçŠ¶æ€ã€‚</p>
<p><strong>å‚æ•°è§£æ</strong>ï¼š</p>
<ul>
<li><code>--porcelain</code>ï¼šè¾“å‡ºç¨³å®šã€æ˜“äºè§£æçš„æ ¼å¼ï¼Œä¸å— Git ç‰ˆæœ¬å’Œè¯­è¨€è®¾ç½®å½±å“</li>
</ul>
<p><strong>è¾“å‡ºæ ¼å¼</strong>ï¼š</p>
<pre><code class="hljs language-plain" lang="plain">M  modified-file.ts      # å·²æš‚å­˜çš„ä¿®æ”¹
 M unstaged-file.ts      # æœªæš‚å­˜çš„ä¿®æ”¹
?? untracked-file.ts     # æœªè·Ÿè¸ªçš„æ–‡ä»¶
A  new-file.ts           # æ–°æ·»åŠ çš„æ–‡ä»¶
D  deleted-file.ts       # åˆ é™¤çš„æ–‡ä»¶
</code></pre>
<p>å‰ä¸¤ä¸ªå­—ç¬¦åˆ†åˆ«è¡¨ç¤ºæš‚å­˜åŒºå’Œå·¥ä½œåŒºçš„çŠ¶æ€ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> statusOutput = <span class="hljs-title function_">execSync</span>(<span class="hljs-string">"git status --porcelain"</span>).<span class="hljs-title function_">toString</span>();
<span class="hljs-keyword">const</span> uncommittedFiles = statusOutput.<span class="hljs-title function_">split</span>(<span class="hljs-string">"\n"</span>).<span class="hljs-title function_">filter</span>(<span class="hljs-function">(<span class="hljs-params">line</span>) =&gt;</span> line.<span class="hljs-title function_">trim</span>());
<span class="hljs-keyword">const</span> isClean = uncommittedFiles.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>;
</code></pre>
<h3 data-id="heading-5">3. ç®¡ç†è¿œç¨‹ä»“åº“</h3>
<h4 data-id="heading-6">æ£€æŸ¥ remote æ˜¯å¦å­˜åœ¨</h4>
<pre><code class="hljs language-bash" lang="bash">git remote get-url upstream
</code></pre>
<p><strong>ä½œç”¨</strong>ï¼šè·å–æŒ‡å®š remote çš„ URLï¼Œå¦‚æœä¸å­˜åœ¨ä¼šæŠ¥é”™ã€‚</p>
<h4 data-id="heading-7">æ·»åŠ  upstream remote</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å°† URL æ›¿æ¢ä¸ºä½ çš„ä¸Šæ¸¸ä»“åº“åœ°å€</span>
git remote add upstream https://github.com/original/repo.git
</code></pre>
<p><strong>ä½œç”¨</strong>ï¼šæ·»åŠ ä¸€ä¸ªåä¸º <code>upstream</code> çš„è¿œç¨‹ä»“åº“ï¼ŒæŒ‡å‘åŸå§‹é¡¹ç›®ã€‚</p>
<p><strong>ä¸ºä»€ä¹ˆéœ€è¦ upstreamï¼Ÿ</strong></p>
<p>å½“ä½  fork ä¸€ä¸ªé¡¹ç›®åï¼Œä½ çš„ <code>origin</code> æŒ‡å‘ä½ è‡ªå·±çš„ forkï¼Œè€Œ <code>upstream</code> æŒ‡å‘åŸå§‹é¡¹ç›®ã€‚è¿™æ ·å¯ä»¥ï¼š</p>
<ul>
<li>ä» <code>upstream</code> æ‹‰å–åŸé¡¹ç›®çš„æ›´æ–°</li>
<li>å‘ <code>origin</code> æ¨é€ä½ çš„ä¿®æ”¹</li>
</ul>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// UPSTREAM_URL éœ€æ›¿æ¢ä¸ºä½ çš„ä¸Šæ¸¸ä»“åº“åœ°å€</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">UPSTREAM_URL</span> = <span class="hljs-string">"https://github.com/original/repo.git"</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">ensureUpstreamRemote</span>(<span class="hljs-params"/>): <span class="hljs-built_in">string</span> {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-title function_">execSync</span>(<span class="hljs-string">"git remote get-url upstream"</span>).<span class="hljs-title function_">toString</span>().<span class="hljs-title function_">trim</span>();
  } <span class="hljs-keyword">catch</span> {
    <span class="hljs-title function_">execSync</span>(<span class="hljs-string">`git remote add upstream <span class="hljs-subst">${UPSTREAM_URL}</span>`</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-variable constant_">UPSTREAM_URL</span>;
  }
}
</code></pre>
<h3 data-id="heading-8">4. è·å–è¿œç¨‹æ›´æ–°</h3>
<pre><code class="hljs language-bash" lang="bash">git fetch upstream
</code></pre>
<p><strong>ä½œç”¨</strong>ï¼šä» upstream è¿œç¨‹ä»“åº“ä¸‹è½½æ‰€æœ‰åˆ†æ”¯çš„æœ€æ–°æäº¤ï¼Œä½†<strong>ä¸ä¼šè‡ªåŠ¨åˆå¹¶</strong>åˆ°æœ¬åœ°åˆ†æ”¯ã€‚</p>
<p><strong>ä¸ <code>git pull</code> çš„åŒºåˆ«</strong>ï¼š</p>
<ul>
<li><code>fetch</code> åªä¸‹è½½æ•°æ®ï¼Œä¸ä¿®æ”¹æœ¬åœ°ä»£ç </li>
<li><code>pull</code> = <code>fetch</code> + <code>merge</code>ï¼Œä¼šè‡ªåŠ¨åˆå¹¶</li>
</ul>
<p>ä½¿ç”¨ <code>fetch</code> å¯ä»¥è®©æˆ‘ä»¬å…ˆé¢„è§ˆå˜æ›´ï¼Œå†å†³å®šæ˜¯å¦åˆå¹¶ã€‚</p>
<h3 data-id="heading-9">5. è®¡ç®—æäº¤å·®å¼‚</h3>
<pre><code class="hljs language-bash" lang="bash">git rev-list --left-right --count HEAD...upstream/main
</code></pre>
<p><strong>ä½œç”¨</strong>ï¼šè®¡ç®—æœ¬åœ°åˆ†æ”¯ä¸ upstream/main ä¹‹é—´çš„æäº¤å·®å¼‚ã€‚</p>
<p><strong>å‚æ•°è§£æ</strong>ï¼š</p>
<ul>
<li><code>rev-list</code>ï¼šåˆ—å‡ºæäº¤è®°å½•</li>
<li><code>--left-right</code>ï¼šåŒºåˆ†å·¦ä¾§ï¼ˆæœ¬åœ°ï¼‰å’Œå³ä¾§ï¼ˆè¿œç¨‹ï¼‰çš„æäº¤</li>
<li><code>--count</code>ï¼šåªè¾“å‡ºè®¡æ•°ï¼Œä¸åˆ—å‡ºå…·ä½“æäº¤</li>
<li><code>HEAD...upstream/main</code>ï¼šä¸‰ä¸ªç‚¹è¡¨ç¤ºå¯¹ç§°å·®é›†</li>
</ul>
<p><strong>è¾“å‡ºç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-plain" lang="plain">2    5
</code></pre>
<p>è¡¨ç¤ºæœ¬åœ°æœ‰ 2 ä¸ªæäº¤ä¸åœ¨ upstream ä¸Šï¼ˆaheadï¼‰ï¼Œupstream æœ‰ 5 ä¸ªæäº¤ä¸åœ¨æœ¬åœ°ï¼ˆbehindï¼‰ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> revList = <span class="hljs-title function_">execSync</span>(
  <span class="hljs-string">"git rev-list --left-right --count HEAD...upstream/main"</span>
)
  .<span class="hljs-title function_">toString</span>()
  .<span class="hljs-title function_">trim</span>();
<span class="hljs-keyword">const</span> [aheadStr, behindStr] = revList.<span class="hljs-title function_">split</span>(<span class="hljs-string">"\t"</span>);
<span class="hljs-keyword">const</span> aheadCount = <span class="hljs-built_in">parseInt</span>(aheadStr, <span class="hljs-number">10</span>);
<span class="hljs-keyword">const</span> behindCount = <span class="hljs-built_in">parseInt</span>(behindStr, <span class="hljs-number">10</span>);

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`æœ¬åœ°é¢†å…ˆ <span class="hljs-subst">${aheadCount}</span> ä¸ªæäº¤ï¼Œè½å <span class="hljs-subst">${behindCount}</span> ä¸ªæäº¤`</span>);
</code></pre>
<h3 data-id="heading-10">6. æŸ¥çœ‹å¾…åˆå¹¶çš„æäº¤</h3>
<pre><code class="hljs language-bash" lang="bash">git <span class="hljs-built_in">log</span> HEAD..upstream/main --pretty=format:<span class="hljs-string">"%h|%s|%ar|%an"</span> --no-merges
</code></pre>
<p><strong>ä½œç”¨</strong>ï¼šåˆ—å‡º upstream/main ä¸Šæœ‰ä½†æœ¬åœ°æ²¡æœ‰çš„æäº¤ã€‚</p>
<p><strong>å‚æ•°è§£æ</strong>ï¼š</p>
<ul>
<li><code>HEAD..upstream/main</code>ï¼šä¸¤ä¸ªç‚¹è¡¨ç¤º A åˆ° B çš„å·®é›†ï¼ˆB æœ‰è€Œ A æ²¡æœ‰çš„ï¼‰</li>
<li><code>--pretty=format:"..."</code>ï¼šè‡ªå®šä¹‰è¾“å‡ºæ ¼å¼
<ul>
<li><code>%h</code>ï¼šçŸ­ hash</li>
<li><code>%s</code>ï¼šæäº¤ä¿¡æ¯</li>
<li><code>%ar</code>ï¼šç›¸å¯¹æ—¶é—´ï¼ˆå¦‚ "2 days ago"ï¼‰</li>
<li><code>%an</code>ï¼šä½œè€…å</li>
</ul>
</li>
<li><code>--no-merges</code>ï¼šæ’é™¤ merge commit</li>
</ul>
<p><strong>è¾“å‡ºç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-plain" lang="plain">a1b2c3d|feat: add dark mode|2 days ago|Author Name
e4f5g6h|fix: typo in readme|3 days ago|Author Name
</code></pre>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> commitFormat = <span class="hljs-string">"%h|%s|%ar|%an"</span>;
<span class="hljs-keyword">const</span> output = <span class="hljs-title function_">execSync</span>(
  <span class="hljs-string">`git log HEAD..upstream/main --pretty=format:"<span class="hljs-subst">${commitFormat}</span>" --no-merges`</span>
).<span class="hljs-title function_">toString</span>();

<span class="hljs-keyword">const</span> commits = output
  .<span class="hljs-title function_">split</span>(<span class="hljs-string">"\n"</span>)
  .<span class="hljs-title function_">filter</span>(<span class="hljs-title class_">Boolean</span>)
  .<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">line</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> [hash, message, date, author] = line.<span class="hljs-title function_">split</span>(<span class="hljs-string">"|"</span>);
    <span class="hljs-keyword">return</span> { hash, message, date, author };
  });
</code></pre>
<h3 data-id="heading-11">7. æŸ¥çœ‹è¿œç¨‹æ–‡ä»¶å†…å®¹</h3>
<pre><code class="hljs language-bash" lang="bash">git show upstream/main:package.json
</code></pre>
<p><strong>ä½œç”¨</strong>ï¼šç›´æ¥æŸ¥çœ‹è¿œç¨‹åˆ†æ”¯ä¸ŠæŸä¸ªæ–‡ä»¶çš„å†…å®¹ï¼Œæ— éœ€åˆ‡æ¢åˆ†æ”¯æˆ–åˆå¹¶ã€‚</p>
<p><strong>ä½¿ç”¨åœºæ™¯</strong>ï¼šè·å–ä¸Šæ¸¸ä»“åº“çš„ç‰ˆæœ¬å·ï¼Œç”¨äºæ˜¾ç¤º"å°†æ›´æ–°åˆ° x.x.x ç‰ˆæœ¬"ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> packageJson = <span class="hljs-title function_">execSync</span>(<span class="hljs-string">"git show upstream/main:package.json"</span>).<span class="hljs-title function_">toString</span>();
<span class="hljs-keyword">const</span> { version } = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(packageJson);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`æœ€æ–°ç‰ˆæœ¬: <span class="hljs-subst">${version}</span>`</span>);
</code></pre>
<h3 data-id="heading-12">8. æ‰§è¡Œåˆå¹¶</h3>
<pre><code class="hljs language-bash" lang="bash">git merge upstream/main --no-edit
</code></pre>
<p><strong>ä½œç”¨</strong>ï¼šå°† upstream/main åˆ†æ”¯åˆå¹¶åˆ°å½“å‰åˆ†æ”¯ã€‚</p>
<p><strong>å‚æ•°è§£æ</strong>ï¼š</p>
<ul>
<li><code>--no-edit</code>ï¼šä½¿ç”¨è‡ªåŠ¨ç”Ÿæˆçš„åˆå¹¶æäº¤ä¿¡æ¯ï¼Œä¸æ‰“å¼€ç¼–è¾‘å™¨</li>
</ul>
<p><strong>åˆå¹¶ç­–ç•¥</strong>ï¼šGit ä¼šè‡ªåŠ¨é€‰æ‹©åˆé€‚çš„åˆå¹¶ç­–ç•¥ï¼š</p>
<ul>
<li><strong>Fast-forward</strong>ï¼šå¦‚æœæœ¬åœ°æ²¡æœ‰æ–°æäº¤ï¼Œç›´æ¥ç§»åŠ¨æŒ‡é’ˆ</li>
<li><strong>Three-way merge</strong>ï¼šå¦‚æœæœ‰åˆ†å‰ï¼Œåˆ›å»ºä¸€ä¸ªåˆå¹¶æäº¤</li>
</ul>
<blockquote>
<p><strong>æ³¨æ„</strong>ï¼šæœ¬å·¥å…·é‡‡ç”¨ merge åŒæ­¥ä¸Šæ¸¸ï¼Œä¿ç•™æœ¬åœ°å†å²ã€‚å¦‚æœä½ çš„éœ€æ±‚æ˜¯"å¼ºåˆ¶ä¸ä¸Šæ¸¸ä¸€è‡´"ï¼ˆä¸¢å¼ƒæœ¬åœ°ä¿®æ”¹ï¼‰ï¼Œéœ€è¦ä½¿ç”¨ rebase æˆ– reset æ–¹æ¡ˆï¼Œä¸åœ¨æœ¬æ–‡è®¨è®ºèŒƒå›´ã€‚</p>
</blockquote>
<h3 data-id="heading-13">9. æ£€æµ‹åˆå¹¶å†²çª</h3>
<pre><code class="hljs language-bash" lang="bash">git diff --name-only --diff-filter=U
</code></pre>
<p><strong>ä½œç”¨</strong>ï¼šåˆ—å‡ºæ‰€æœ‰æœªè§£å†³å†²çªçš„æ–‡ä»¶ã€‚</p>
<p><strong>å‚æ•°è§£æ</strong>ï¼š</p>
<ul>
<li><code>--name-only</code>ï¼šåªè¾“å‡ºæ–‡ä»¶å</li>
<li><code>--diff-filter=U</code>ï¼šåªæ˜¾ç¤º Unmergedï¼ˆæœªåˆå¹¶/å†²çªï¼‰çš„æ–‡ä»¶</li>
</ul>
<p>å¦ä¸€ç§æ–¹å¼æ˜¯è§£æ <code>git status --porcelain</code> çš„è¾“å‡ºï¼ŒæŸ¥æ‰¾å†²çªæ ‡è®°ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> statusOutput = <span class="hljs-title function_">execSync</span>(<span class="hljs-string">"git status --porcelain"</span>).<span class="hljs-title function_">toString</span>();
<span class="hljs-keyword">const</span> conflictFiles = statusOutput
  .<span class="hljs-title function_">split</span>(<span class="hljs-string">"\n"</span>)
  .<span class="hljs-title function_">filter</span>(<span class="hljs-function">(<span class="hljs-params">line</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> status = line.<span class="hljs-title function_">slice</span>(<span class="hljs-number">0</span>, <span class="hljs-number">2</span>);
    <span class="hljs-comment">// U = Unmerged, AA = both added, DD = both deleted</span>
    <span class="hljs-keyword">return</span> status.<span class="hljs-title function_">includes</span>(<span class="hljs-string">"U"</span>) || status === <span class="hljs-string">"AA"</span> || status === <span class="hljs-string">"DD"</span>;
  })
  <span class="hljs-comment">// æ³¨ï¼šä¸ºç®€åŒ–å±•ç¤ºï¼Œè¿™é‡Œç›´æ¥æˆªå–è·¯å¾„</span>
  <span class="hljs-comment">// è‹¥éœ€å®Œæ•´å…¼å®¹é‡å‘½å/ç‰¹æ®Šè·¯å¾„ï¼Œåº”ä½¿ç”¨æ›´ä¸¥æ ¼çš„ porcelain è§£æ</span>
  .<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">line</span>) =&gt;</span> line.<span class="hljs-title function_">slice</span>(<span class="hljs-number">3</span>).<span class="hljs-title function_">trim</span>());
</code></pre>
<h3 data-id="heading-14">10. ä¸­æ­¢åˆå¹¶</h3>
<pre><code class="hljs language-bash" lang="bash">git merge --abort
</code></pre>
<p><strong>ä½œç”¨</strong>ï¼šä¸­æ­¢å½“å‰çš„åˆå¹¶æ“ä½œï¼Œæ¢å¤åˆ°åˆå¹¶å‰çš„çŠ¶æ€ã€‚</p>
<p><strong>ä½¿ç”¨åœºæ™¯</strong>ï¼šå½“ç”¨æˆ·é‡åˆ°å†²çªä½†ä¸æƒ³æ‰‹åŠ¨è§£å†³æ—¶ï¼Œå¯ä»¥é€‰æ‹©ä¸­æ­¢åˆå¹¶ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">abortMerge</span>(<span class="hljs-params"/>): <span class="hljs-built_in">boolean</span> {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-title function_">execSync</span>(<span class="hljs-string">"git merge --abort"</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
  } <span class="hljs-keyword">catch</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  }
}
</code></pre>
<h2 data-id="heading-15">çŠ¶æ€æœºè®¾è®¡</h2>
<p>å¦‚æœæ˜¯ç®€å•ç²—æš´çš„ä½¿ç”¨ <code>useEffect</code> çš„è¯ï¼Œä¼šå‡ºç°å¾ˆå¤š <code>useEffect</code> é‚£è‡ªç„¶å¾ˆä¸å¥½ã€‚</p>
<p>æ•´ä¸ªæ›´æ–°æµç¨‹ä½¿ç”¨ç®€å•çš„ <code>useReducer</code> + Effect Map æ¨¡å¼ç®¡ç†ï¼Œå°†çŠ¶æ€è½¬æ¢é€»è¾‘å’Œå‰¯ä½œç”¨å¤„ç†åˆ†ç¦»ï¼Œç¡®ä¿æµç¨‹æ¸…æ™°å¯æ§ã€‚</p>
<h3 data-id="heading-16">ä¸ºä»€ä¹ˆä¸ç”¨ Reduxï¼Ÿ</h3>
<p>åœ¨è®¾è®¡ CLI çŠ¶æ€ç®¡ç†æ—¶ï¼Œå¾ˆè‡ªç„¶ä¼šæƒ³åˆ° Reduxï¼Œæ¯•ç«Ÿå®ƒæ˜¯ React ç”Ÿæ€ä¸­æœ€æˆç†Ÿçš„çŠ¶æ€ç®¡ç†æ–¹æ¡ˆï¼Œè€Œä¸”è¿˜æ˜¯ç”¨ç€ Ink æ¥è¿›è¡Œå¼€å‘çš„ã€‚ä½†å¯¹äº CLI å·¥å…·ï¼Œ<code>useReducer</code> æ˜¯æ›´åˆé€‚çš„é€‰æ‹©ï¼Œç†ç”±å¦‚ä¸‹ï¼š</p>
<ol>
<li>çŠ¶æ€ä½œç”¨åŸŸå•ä¸€ï¼šCLI å·¥å…·é€šå¸¸æ˜¯<strong>å•ç»„ä»¶æ ‘</strong>ç»“æ„ï¼Œä¸å­˜åœ¨è·¨é¡µé¢ã€è·¨è·¯ç”±çš„çŠ¶æ€å…±äº«éœ€æ±‚ï¼Œ</li>
<li>æ— éœ€ Middleware ç”Ÿæ€ï¼šRedux çš„å¼ºå¤§ä¹‹å¤„åœ¨äºä¸­é—´ä»¶ç”Ÿæ€ï¼ˆredux-thunkã€redux-sagaã€redux-observableï¼‰ï¼Œç”¨äºå¤„ç†å¤æ‚çš„å¼‚æ­¥æµç¨‹ã€‚ä½†æˆ‘ä»¬çš„åœºæ™¯ä¸éœ€è¦é‚£ä¹ˆå¤æ‚ã€‚</li>
<li>ä¾èµ–æœ€å°åŒ–ï¼šCLI å·¥å…·åº”è¯¥<strong>å¿«é€Ÿå¯åŠ¨ã€è½»é‡è¿è¡Œ</strong>ã€‚<code>useReducer</code> å†…ç½®äº Reactï¼Œä¸ä¼šå¼•å…¥é¢å¤–ä¾èµ–ï¼ˆå½“ç„¶ React æœ¬èº«ä¹Ÿæ˜¯ä¾èµ–ï¼Œä¸è¿‡æˆ‘çš„é¡¹ç›®é‡Œæœ¬æ¥å°±éœ€è¦å®ƒï¼‰</li>
</ol>
<p>æ€»ä¹‹ï¼Œå¯¹è¿™ä¸ªåœºæ™¯æ¥è¯´ Redux æœ‰ç‚¹"è¿‡åº¦è®¾è®¡"ã€‚</p>
<h3 data-id="heading-17">é‚£å’‹æ•´ï¼Ÿ</h3>
<ul>
<li><strong>Reducer</strong>ï¼šé›†ä¸­ç®¡ç†æ‰€æœ‰çŠ¶æ€è½¬æ¢é€»è¾‘ï¼Œçº¯å‡½æ•°æ˜“äºæµ‹è¯•</li>
<li><strong>Effect Map</strong>ï¼šçŠ¶æ€åˆ°å‰¯ä½œç”¨çš„æ˜ å°„ï¼Œç»Ÿä¸€å¤„ç†å¼‚æ­¥æ“ä½œ</li>
<li><strong>å•ä¸€ Effect</strong>ï¼šä¸€ä¸ª <code>useEffect</code> é©±åŠ¨æ•´ä¸ªæµç¨‹</li>
</ul>
<p>ä¸‹é¢æ˜¯å®Œæ•´çš„çŠ¶æ€è½¬æ¢æµç¨‹å›¾ï¼Œå±•ç¤ºäº†æ‰€æœ‰å¯èƒ½çš„çŠ¶æ€è½¬æ¢è·¯å¾„å’Œæ¡ä»¶åˆ†æ”¯ï¼š</p>
<blockquote>
<p><strong>æ³¨æ„</strong>ï¼šMermaid stateDiagram ä¸­çŠ¶æ€åä¸èƒ½åŒ…å«è¿å­—ç¬¦ <code>-</code>ï¼Œè¿™é‡Œä½¿ç”¨ camelCase å‘½åã€‚</p>
</blockquote>
<pre><code class="hljs language-mermaid" lang="mermaid">stateDiagram-v2
    [*] --&gt; checking: å¼€å§‹æ›´æ–°

    checking --&gt; error: ä¸åœ¨ main åˆ†æ”¯
    checking --&gt; dirtyWarning: å·¥ä½œåŒºä¸å¹²å‡€ &amp;&amp; !force
    checking --&gt; fetching: å·¥ä½œåŒºå¹²å‡€ || force

    dirtyWarning --&gt; [*]: ç”¨æˆ·å–æ¶ˆ
    dirtyWarning --&gt; fetching: ç”¨æˆ·ç»§ç»­

    fetching --&gt; upToDate: behindCount = 0
    fetching --&gt; backupConfirm: behindCount &gt; 0 &amp;&amp; !skipBackup
    fetching --&gt; preview: behindCount &gt; 0 &amp;&amp; skipBackup

    backupConfirm --&gt; backingUp: ç”¨æˆ·ç¡®è®¤å¤‡ä»½
    backupConfirm --&gt; preview: ç”¨æˆ·è·³è¿‡å¤‡ä»½

    backingUp --&gt; preview: å¤‡ä»½å®Œæˆ
    backingUp --&gt; error: å¤‡ä»½å¤±è´¥

    preview --&gt; [*]: checkOnly æ¨¡å¼
    preview --&gt; merging: ç”¨æˆ·ç¡®è®¤æ›´æ–°
    preview --&gt; [*]: ç”¨æˆ·å–æ¶ˆ

    merging --&gt; conflict: åˆå¹¶å†²çª
    merging --&gt; installing: åˆå¹¶æˆåŠŸ

    conflict --&gt; [*]: ç”¨æˆ·å¤„ç†å†²çª

    installing --&gt; done: ä¾èµ–å®‰è£…æˆåŠŸ
    installing --&gt; error: ä¾èµ–å®‰è£…å¤±è´¥

    done --&gt; [*]
    error --&gt; [*]
    upToDate --&gt; [*]
</code></pre>
<h3 data-id="heading-18">ç±»å‹å®šä¹‰</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// 12 ç§çŠ¶æ€è¦†ç›–å®Œæ•´æµç¨‹</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">UpdateStatus</span> =
  | <span class="hljs-string">"checking"</span> <span class="hljs-comment">// æ£€æŸ¥ Git çŠ¶æ€</span>
  | <span class="hljs-string">"dirty-warning"</span> <span class="hljs-comment">// å·¥ä½œåŒºæœ‰æœªæäº¤æ›´æ”¹</span>
  | <span class="hljs-string">"backup-confirm"</span> <span class="hljs-comment">// ç¡®è®¤å¤‡ä»½</span>
  | <span class="hljs-string">"backing-up"</span> <span class="hljs-comment">// æ­£åœ¨å¤‡ä»½</span>
  | <span class="hljs-string">"fetching"</span> <span class="hljs-comment">// è·å–æ›´æ–°</span>
  | <span class="hljs-string">"preview"</span> <span class="hljs-comment">// æ˜¾ç¤ºæ›´æ–°é¢„è§ˆ</span>
  | <span class="hljs-string">"merging"</span> <span class="hljs-comment">// åˆå¹¶ä¸­</span>
  | <span class="hljs-string">"installing"</span> <span class="hljs-comment">// å®‰è£…ä¾èµ–</span>
  | <span class="hljs-string">"done"</span> <span class="hljs-comment">// å®Œæˆ</span>
  | <span class="hljs-string">"conflict"</span> <span class="hljs-comment">// æœ‰å†²çª</span>
  | <span class="hljs-string">"up-to-date"</span> <span class="hljs-comment">// å·²æ˜¯æœ€æ–°</span>
  | <span class="hljs-string">"error"</span>; <span class="hljs-comment">// é”™è¯¯</span>

<span class="hljs-comment">// Action é©±åŠ¨çŠ¶æ€è½¬æ¢</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">UpdateAction</span> =
  | { <span class="hljs-attr">type</span>: <span class="hljs-string">"GIT_CHECKED"</span>; <span class="hljs-attr">payload</span>: <span class="hljs-title class_">GitStatusInfo</span> }
  | { <span class="hljs-attr">type</span>: <span class="hljs-string">"FETCHED"</span>; <span class="hljs-attr">payload</span>: <span class="hljs-title class_">UpdateInfo</span> }
  | { <span class="hljs-attr">type</span>: <span class="hljs-string">"BACKUP_CONFIRM"</span> | <span class="hljs-string">"BACKUP_SKIP"</span> | <span class="hljs-string">"UPDATE_CONFIRM"</span> | <span class="hljs-string">"INSTALLED"</span> }
  | { <span class="hljs-attr">type</span>: <span class="hljs-string">"BACKUP_DONE"</span>; <span class="hljs-attr">backupFile</span>: <span class="hljs-built_in">string</span> }
  | { <span class="hljs-attr">type</span>: <span class="hljs-string">"MERGED"</span>; <span class="hljs-attr">payload</span>: <span class="hljs-title class_">MergeResult</span> }
  | { <span class="hljs-attr">type</span>: <span class="hljs-string">"ERROR"</span>; <span class="hljs-attr">error</span>: <span class="hljs-built_in">string</span> };
</code></pre>
<h3 data-id="heading-19">Reducer é›†ä¸­çŠ¶æ€è½¬æ¢</h3>
<p>æ‰€æœ‰çŠ¶æ€è½¬æ¢é€»è¾‘é›†ä¸­åœ¨ reducer ä¸­ï¼Œæ¯ä¸ª case åªå¤„ç†å½“å‰çŠ¶æ€ä¸‹åˆæ³•çš„ actionï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">updateReducer</span>(<span class="hljs-params">state: UpdateState, action: UpdateAction</span>): <span class="hljs-title class_">UpdateState</span> {
  <span class="hljs-keyword">const</span> { status, options } = state;

  <span class="hljs-comment">// é€šç”¨é”™è¯¯å¤„ç†ï¼šä»»ä½•çŠ¶æ€éƒ½å¯ä»¥è½¬åˆ° error</span>
  <span class="hljs-keyword">if</span> (action.<span class="hljs-property">type</span> === <span class="hljs-string">"ERROR"</span>) {
    <span class="hljs-keyword">return</span> { ...state, <span class="hljs-attr">status</span>: <span class="hljs-string">"error"</span>, <span class="hljs-attr">error</span>: action.<span class="hljs-property">error</span> };
  }

  <span class="hljs-keyword">switch</span> (status) {
    <span class="hljs-keyword">case</span> <span class="hljs-string">"checking"</span>: {
      <span class="hljs-keyword">if</span> (action.<span class="hljs-property">type</span> !== <span class="hljs-string">"GIT_CHECKED"</span>) <span class="hljs-keyword">return</span> state;
      <span class="hljs-keyword">const</span> { <span class="hljs-attr">payload</span>: gitStatus } = action;

      <span class="hljs-keyword">if</span> (gitStatus.<span class="hljs-property">currentBranch</span> !== <span class="hljs-string">"main"</span>) {
        <span class="hljs-keyword">return</span> {
          ...state,
          <span class="hljs-attr">status</span>: <span class="hljs-string">"error"</span>,
          <span class="hljs-attr">error</span>: <span class="hljs-string">"ä»…æ”¯æŒåœ¨ main åˆ†æ”¯æ‰§è¡Œæ›´æ–°"</span>,
        };
      }
      <span class="hljs-keyword">if</span> (!gitStatus.<span class="hljs-property">isClean</span> &amp;&amp; !options.<span class="hljs-property">force</span>) {
        <span class="hljs-keyword">return</span> { ...state, <span class="hljs-attr">status</span>: <span class="hljs-string">"dirty-warning"</span>, gitStatus };
      }
      <span class="hljs-keyword">return</span> { ...state, <span class="hljs-attr">status</span>: <span class="hljs-string">"fetching"</span>, gitStatus };
    }

    <span class="hljs-keyword">case</span> <span class="hljs-string">"fetching"</span>: {
      <span class="hljs-keyword">if</span> (action.<span class="hljs-property">type</span> !== <span class="hljs-string">"FETCHED"</span>) <span class="hljs-keyword">return</span> state;
      <span class="hljs-keyword">const</span> { <span class="hljs-attr">payload</span>: updateInfo } = action;

      <span class="hljs-keyword">if</span> (updateInfo.<span class="hljs-property">behindCount</span> === <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">return</span> { ...state, <span class="hljs-attr">status</span>: <span class="hljs-string">"up-to-date"</span>, updateInfo };
      }
      <span class="hljs-keyword">const</span> nextStatus = options.<span class="hljs-property">skipBackup</span> ? <span class="hljs-string">"preview"</span> : <span class="hljs-string">"backup-confirm"</span>;
      <span class="hljs-keyword">return</span> { ...state, <span class="hljs-attr">status</span>: nextStatus, updateInfo };
    }

    <span class="hljs-comment">// ... å…¶ä»–çŠ¶æ€å¤„ç†</span>
  }
}
</code></pre>
<h3 data-id="heading-20">Effect Mapï¼šç»Ÿä¸€å‰¯ä½œç”¨å¤„ç†</h3>
<p>æ¯ä¸ªéœ€è¦æ‰§è¡Œå‰¯ä½œç”¨çš„çŠ¶æ€å¯¹åº”ä¸€ä¸ª effect å‡½æ•°ï¼Œå¯è¿”å› cleanup å‡½æ•°ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">EffectFn</span> = <span class="hljs-function">(<span class="hljs-params">
  state: UpdateState,
  dispatch: Dispatch&lt;UpdateAction&gt;
</span>) =&gt;</span> (<span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span>) | <span class="hljs-literal">undefined</span>;

<span class="hljs-keyword">const</span> <span class="hljs-attr">statusEffects</span>: <span class="hljs-title class_">Partial</span>&lt;<span class="hljs-title class_">Record</span>&lt;<span class="hljs-title class_">UpdateStatus</span>, <span class="hljs-title class_">EffectFn</span>&gt;&gt; = {
  <span class="hljs-attr">checking</span>: <span class="hljs-function">(<span class="hljs-params">_state, dispatch</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> gitStatus = <span class="hljs-title function_">checkGitStatus</span>();
    <span class="hljs-title function_">ensureUpstreamRemote</span>();
    <span class="hljs-title function_">dispatch</span>({ <span class="hljs-attr">type</span>: <span class="hljs-string">"GIT_CHECKED"</span>, <span class="hljs-attr">payload</span>: gitStatus });
    <span class="hljs-keyword">return</span> <span class="hljs-literal">undefined</span>;
  },

  <span class="hljs-attr">fetching</span>: <span class="hljs-function">(<span class="hljs-params">_state, dispatch</span>) =&gt;</span> {
    <span class="hljs-title function_">fetchUpstream</span>();
    <span class="hljs-keyword">const</span> info = <span class="hljs-title function_">getUpdateInfo</span>();
    <span class="hljs-title function_">dispatch</span>({ <span class="hljs-attr">type</span>: <span class="hljs-string">"FETCHED"</span>, <span class="hljs-attr">payload</span>: info });
    <span class="hljs-keyword">return</span> <span class="hljs-literal">undefined</span>;
  },

  <span class="hljs-attr">installing</span>: <span class="hljs-function">(<span class="hljs-params">_state, dispatch</span>) =&gt;</span> {
    <span class="hljs-keyword">let</span> cancelled = <span class="hljs-literal">false</span>;
    <span class="hljs-title function_">installDeps</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">result</span>) =&gt;</span> {
      <span class="hljs-keyword">if</span> (cancelled) <span class="hljs-keyword">return</span>;
      <span class="hljs-title function_">dispatch</span>(
        result.<span class="hljs-property">success</span>
          ? { <span class="hljs-attr">type</span>: <span class="hljs-string">"INSTALLED"</span> }
          : { <span class="hljs-attr">type</span>: <span class="hljs-string">"ERROR"</span>, <span class="hljs-attr">error</span>: result.<span class="hljs-property">error</span> }
      );
    });
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
      cancelled = <span class="hljs-literal">true</span>;
    }; <span class="hljs-comment">// cleanup</span>
  },
};
</code></pre>
<h3 data-id="heading-21">ç»„ä»¶ä½¿ç”¨</h3>
<p>ç»„ä»¶ä¸­åªéœ€ä¸€ä¸ªæ ¸å¿ƒ <code>useEffect</code> æ¥é©±åŠ¨æ•´ä¸ªçŠ¶æ€æœºï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">UpdateApp</span>(<span class="hljs-params">{ checkOnly, skipBackup, force }</span>) {
  <span class="hljs-keyword">const</span> [state, dispatch] = <span class="hljs-title function_">useReducer</span>(
    updateReducer,
    { checkOnly, skipBackup, force },
    createInitialState
  );

  <span class="hljs-comment">// æ ¸å¿ƒï¼šå•ä¸€ effect å¤„ç†æ‰€æœ‰å‰¯ä½œç”¨</span>
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> effect = statusEffects[state.<span class="hljs-property">status</span>];
    <span class="hljs-keyword">if</span> (!effect) <span class="hljs-keyword">return</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-title function_">effect</span>(state, dispatch);
  }, [state.<span class="hljs-property">status</span>, state]);

  <span class="hljs-comment">// UI æ¸²æŸ“åŸºäº state.status</span>
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Box</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">Box</span>&gt;</span></span>;
}
</code></pre>
<p>è¿™ç§æ¨¡å¼çš„ä¼˜åŠ¿ï¼š</p>
<ul>
<li><strong>å¯æµ‹è¯•æ€§</strong>ï¼šReducer æ˜¯çº¯å‡½æ•°ï¼Œå¯ä»¥ç‹¬ç«‹æµ‹è¯•çŠ¶æ€è½¬æ¢</li>
<li><strong>å¯ç»´æŠ¤æ€§</strong>ï¼šçŠ¶æ€é€»è¾‘é›†ä¸­ï¼Œä¸ä¼šåˆ†æ•£åœ¨å¤šä¸ª <code>useEffect</code> ä¸­</li>
<li><strong>å¯æ‰©å±•æ€§</strong>ï¼šæ·»åŠ æ–°çŠ¶æ€åªéœ€åœ¨ reducer å’Œ effect map å„åŠ ä¸€ä¸ª case</li>
</ul>
<h2 data-id="heading-22">ç”¨æˆ·äº¤äº’è®¾è®¡</h2>
<p>ä½¿ç”¨ React Ink æ„å»ºç»ˆç«¯ UIï¼Œæä¾›å‹å¥½çš„äº¤äº’ä½“éªŒï¼š</p>
<h3 data-id="heading-23">é¢„è§ˆæ›´æ–°</h3>
<pre><code class="hljs language-bash" lang="bash">å‘ç° 5 ä¸ªæ–°æäº¤:
  a1b2c3d feat: add dark mode (2 days ago)
  e4f5g6h fix: responsive layout (3 days ago)
  i7j8k9l docs: update readme (1 week ago)
  ... è¿˜æœ‰ 2 ä¸ªæäº¤

æ³¨æ„: æœ¬åœ°æœ‰ 1 ä¸ªæœªæ¨é€çš„æäº¤

ç¡®è®¤æ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬ï¼Ÿ (Y/n)
</code></pre>
<h3 data-id="heading-24">å¤„ç†å†²çª</h3>
<pre><code class="hljs language-bash" lang="bash">å‘ç°åˆå¹¶å†²çª
å†²çªæ–‡ä»¶:
  - src/config.ts
  - src/components/Header.tsx

ä½ å¯ä»¥:
  1. æ‰‹åŠ¨è§£å†³å†²çªåè¿è¡Œ: git add . &amp;&amp; git commit
  2. ä¸­æ­¢åˆå¹¶æ¢å¤åˆ°æ›´æ–°å‰çŠ¶æ€

å¤‡ä»½æ–‡ä»¶: backup-2026-01-10-full.tar.gz

æ˜¯å¦ä¸­æ­¢åˆå¹¶ï¼Ÿ (Y/n)
</code></pre>
<h2 data-id="heading-25">å®Œæ•´ä»£ç å®ç°</h2>
<h3 data-id="heading-26">Git æ“ä½œå°è£…</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { execSync } <span class="hljs-keyword">from</span> <span class="hljs-string">"node:child_process"</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">git</span>(<span class="hljs-params">args: <span class="hljs-built_in">string</span></span>): <span class="hljs-built_in">string</span> {
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">execSync</span>(<span class="hljs-string">`git <span class="hljs-subst">${args}</span>`</span>, {
    <span class="hljs-attr">encoding</span>: <span class="hljs-string">"utf-8"</span>,
    <span class="hljs-attr">stdio</span>: [<span class="hljs-string">"pipe"</span>, <span class="hljs-string">"pipe"</span>, <span class="hljs-string">"pipe"</span>],
  }).<span class="hljs-title function_">trim</span>();
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">gitSafe</span>(<span class="hljs-params">args: <span class="hljs-built_in">string</span></span>): <span class="hljs-built_in">string</span> | <span class="hljs-literal">null</span> {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-title function_">git</span>(args);
  } <span class="hljs-keyword">catch</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
  }
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">checkGitStatus</span>(<span class="hljs-params"/>): <span class="hljs-title class_">GitStatusInfo</span> {
  <span class="hljs-keyword">const</span> currentBranch = <span class="hljs-title function_">git</span>(<span class="hljs-string">"rev-parse --abbrev-ref HEAD"</span>);
  <span class="hljs-keyword">const</span> statusOutput = <span class="hljs-title function_">gitSafe</span>(<span class="hljs-string">"status --porcelain"</span>) || <span class="hljs-string">""</span>;
  <span class="hljs-keyword">const</span> uncommittedFiles = statusOutput
    .<span class="hljs-title function_">split</span>(<span class="hljs-string">"\n"</span>)
    .<span class="hljs-title function_">filter</span>(<span class="hljs-function">(<span class="hljs-params">line</span>) =&gt;</span> line.<span class="hljs-title function_">trim</span>());

  <span class="hljs-keyword">return</span> {
    currentBranch,
    <span class="hljs-attr">isClean</span>: uncommittedFiles.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>,
    <span class="hljs-comment">// æ³¨ï¼šç®€åŒ–å¤„ç†ï¼Œå®Œæ•´å…¼å®¹éœ€æ›´ä¸¥æ ¼çš„ porcelain è§£æ</span>
    <span class="hljs-attr">uncommittedFiles</span>: uncommittedFiles.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">line</span>) =&gt;</span> line.<span class="hljs-title function_">slice</span>(<span class="hljs-number">3</span>).<span class="hljs-title function_">trim</span>()),
  };
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getUpdateInfo</span>(<span class="hljs-params"/>): <span class="hljs-title class_">UpdateInfo</span> {
  <span class="hljs-keyword">const</span> revList =
    <span class="hljs-title function_">gitSafe</span>(<span class="hljs-string">"rev-list --left-right --count HEAD...upstream/main"</span>) || <span class="hljs-string">"0\t0"</span>;
  <span class="hljs-keyword">const</span> [aheadStr, behindStr] = revList.<span class="hljs-title function_">split</span>(<span class="hljs-string">"\t"</span>);

  <span class="hljs-keyword">const</span> commitFormat = <span class="hljs-string">"%h|%s|%ar|%an"</span>;
  <span class="hljs-keyword">const</span> commitsOutput =
    <span class="hljs-title function_">gitSafe</span>(
      <span class="hljs-string">`log HEAD..upstream/main --pretty=format:"<span class="hljs-subst">${commitFormat}</span>" --no-merges`</span>
    ) || <span class="hljs-string">""</span>;

  <span class="hljs-keyword">const</span> commits = commitsOutput
    .<span class="hljs-title function_">split</span>(<span class="hljs-string">"\n"</span>)
    .<span class="hljs-title function_">filter</span>(<span class="hljs-title class_">Boolean</span>)
    .<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">line</span>) =&gt;</span> {
      <span class="hljs-keyword">const</span> [hash, message, date, author] = line.<span class="hljs-title function_">split</span>(<span class="hljs-string">"|"</span>);
      <span class="hljs-keyword">return</span> { hash, message, date, author };
    });

  <span class="hljs-keyword">return</span> {
    <span class="hljs-attr">behindCount</span>: <span class="hljs-built_in">parseInt</span>(behindStr, <span class="hljs-number">10</span>),
    <span class="hljs-attr">aheadCount</span>: <span class="hljs-built_in">parseInt</span>(aheadStr, <span class="hljs-number">10</span>),
    commits,
  };
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">mergeUpstream</span>(<span class="hljs-params"/>): <span class="hljs-title class_">MergeResult</span> {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-title function_">git</span>(<span class="hljs-string">"merge upstream/main --no-edit"</span>);
    <span class="hljs-keyword">return</span> { <span class="hljs-attr">success</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">hasConflict</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">conflictFiles</span>: [] };
  } <span class="hljs-keyword">catch</span> {
    <span class="hljs-keyword">const</span> conflictFiles = <span class="hljs-title function_">getConflictFiles</span>();
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">success</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">hasConflict</span>: conflictFiles.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>,
      conflictFiles,
    };
  }
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">getConflictFiles</span>(<span class="hljs-params"/>): <span class="hljs-built_in">string</span>[] {
  <span class="hljs-keyword">const</span> output = <span class="hljs-title function_">gitSafe</span>(<span class="hljs-string">"diff --name-only --diff-filter=U"</span>) || <span class="hljs-string">""</span>;
  <span class="hljs-keyword">return</span> output.<span class="hljs-title function_">split</span>(<span class="hljs-string">"\n"</span>).<span class="hljs-title function_">filter</span>(<span class="hljs-title class_">Boolean</span>);
}
</code></pre>
<h2 data-id="heading-27">Git å‘½ä»¤é€ŸæŸ¥è¡¨</h2>

































































<table><thead><tr><th>å‘½ä»¤</th><th>ä½œç”¨</th><th>åœºæ™¯</th></tr></thead><tbody><tr><td><code>git rev-parse --abbrev-ref HEAD</code></td><td>è·å–å½“å‰åˆ†æ”¯å</td><td>éªŒè¯åˆ†æ”¯</td></tr><tr><td><code>git status --porcelain</code></td><td>æœºå™¨å¯è¯»çš„çŠ¶æ€è¾“å‡º</td><td>æ£€æŸ¥å·¥ä½œåŒº</td></tr><tr><td><code>git remote get-url &lt;name&gt;</code></td><td>è·å– remote URL</td><td>æ£€æŸ¥ remote</td></tr><tr><td><code>git remote add &lt;name&gt; &lt;url&gt;</code></td><td>æ·»åŠ  remote</td><td>é…ç½® upstream</td></tr><tr><td><code>git fetch &lt;remote&gt;</code></td><td>ä¸‹è½½è¿œç¨‹æ›´æ–°</td><td>è·å–æ›´æ–°</td></tr><tr><td><code>git rev-list --left-right --count A...B</code></td><td>ç»Ÿè®¡å·®å¼‚æäº¤æ•°</td><td>è®¡ç®— ahead/behind</td></tr><tr><td><code>git log A..B --pretty=format:"..."</code></td><td>åˆ—å‡ºå·®å¼‚æäº¤</td><td>é¢„è§ˆæ›´æ–°</td></tr><tr><td><code>git show &lt;ref&gt;:&lt;path&gt;</code></td><td>æŸ¥çœ‹è¿œç¨‹æ–‡ä»¶</td><td>è·å–ç‰ˆæœ¬å·</td></tr><tr><td><code>git merge &lt;branch&gt; --no-edit</code></td><td>è‡ªåŠ¨åˆå¹¶</td><td>æ‰§è¡Œæ›´æ–°</td></tr><tr><td><code>git diff --name-only --diff-filter=U</code></td><td>åˆ—å‡ºå†²çªæ–‡ä»¶</td><td>æ£€æµ‹å†²çª</td></tr><tr><td><code>git merge --abort</code></td><td>ä¸­æ­¢åˆå¹¶</td><td>å›æ»šæ“ä½œ</td></tr></tbody></table>
<h3 data-id="heading-28">Git å‘½ä»¤åŠŸèƒ½åˆ†ç±»</h3>
<p>ä¸ºäº†æ›´å¥½åœ°ç†è§£è¿™äº›å‘½ä»¤çš„ç”¨é€”ï¼Œä¸‹é¢æŒ‰åŠŸèƒ½å°†å®ƒä»¬åˆ†ç±»å±•ç¤ºï¼š</p>
<pre><code class="hljs language-infographic" lang="infographic">infographic hierarchy-structure
data
  title Git å‘½ä»¤åŠŸèƒ½åˆ†ç±»
  desc æŒ‰æ“ä½œç±»å‹ç»„ç»‡çš„å‘½ä»¤æ¸…å•
  items
    - label çŠ¶æ€æ£€æŸ¥
      icon mdi/information
      children
        - label git rev-parse
          desc è·å–å½“å‰åˆ†æ”¯å
        - label git status --porcelain
          desc æ£€æŸ¥å·¥ä½œåŒºçŠ¶æ€
    - label è¿œç¨‹ç®¡ç†
      icon mdi/server-network
      children
        - label git remote get-url
          desc æ£€æŸ¥ remote æ˜¯å¦å­˜åœ¨
        - label git remote add
          desc æ·»åŠ  upstream remote
        - label git fetch
          desc ä¸‹è½½è¿œç¨‹æ›´æ–°
    - label æäº¤åˆ†æ
      icon mdi/source-commit
      children
        - label git rev-list
          desc ç»Ÿè®¡æäº¤å·®å¼‚
        - label git log
          desc æŸ¥çœ‹æäº¤å†å²
        - label git show
          desc æŸ¥çœ‹è¿œç¨‹æ–‡ä»¶å†…å®¹
    - label åˆå¹¶æ“ä½œ
      icon mdi/source-merge
      children
        - label git merge
          desc æ‰§è¡Œåˆ†æ”¯åˆå¹¶
        - label git merge --abort
          desc ä¸­æ­¢åˆå¹¶æ¢å¤çŠ¶æ€
    - label å†²çªæ£€æµ‹
      icon mdi/alert-octagon
      children
        - label git diff --diff-filter=U
          desc åˆ—å‡ºæœªè§£å†³å†²çªæ–‡ä»¶
</code></pre>
<h2 data-id="heading-29">å¤‡ä»½è¿˜åŸåŠŸèƒ½å®ç°</h2>
<p>é™¤äº†ä¸»é¢˜æ›´æ–°ï¼ŒCLI è¿˜æä¾›äº†å®Œæ•´çš„å¤‡ä»½è¿˜åŸåŠŸèƒ½ï¼Œç¡®ä¿ç”¨æˆ·æ•°æ®å®‰å…¨ã€‚</p>
<p>å¤‡ä»½å’Œè¿˜åŸæ˜¯ä¸¤ä¸ªäº’è¡¥çš„æ“ä½œï¼Œä¸‹å›¾å±•ç¤ºäº†å®ƒä»¬çš„å®Œæ•´å·¥ä½œæµï¼š</p>
<pre><code class="hljs language-infographic" lang="infographic">infographic compare-hierarchy-row-letter-card-compact-card
data
  title å¤‡ä»½ä¸è¿˜åŸæµç¨‹å¯¹æ¯”
  desc ä¸¤ä¸ªäº’è¡¥æ“ä½œçš„å®Œæ•´å·¥ä½œæµ
  items
    - label å¤‡ä»½æµç¨‹
      icon mdi/backup-restore
      children
        - label æ£€æŸ¥é…ç½®
          desc ç¡®å®šå¤‡ä»½ç±»å‹å’ŒèŒƒå›´
        - label åˆ›å»ºä¸´æ—¶ç›®å½•
          desc å‡†å¤‡æš‚å­˜ç©ºé—´
        - label å¤åˆ¶æ–‡ä»¶
          desc æŒ‰é…ç½®å¤åˆ¶æ‰€éœ€æ–‡ä»¶
        - label ç”Ÿæˆ manifest
          desc è®°å½•ç‰ˆæœ¬å’Œå…ƒä¿¡æ¯
        - label å‹ç¼©æ‰“åŒ…
          desc tar.gz å‹ç¼©å­˜æ¡£
        - label æ¸…ç†ä¸´æ—¶ç›®å½•
          desc åˆ é™¤æš‚å­˜ç›®å½•
    - label è¿˜åŸæµç¨‹
      icon mdi/restore
      children
        - label é€‰æ‹©å¤‡ä»½
          desc è¯»å– manifest æ˜¾ç¤ºå¤‡ä»½ä¿¡æ¯
        - label è§£å‹åˆ°ä¸´æ—¶ç›®å½•
          desc æå–å½’æ¡£å†…å®¹ï¼ˆåŒ…å« manifestï¼‰
        - label è¯»å– manifest.files
          desc è·å–å®é™…å¤‡ä»½æˆåŠŸçš„æ–‡ä»¶åˆ—è¡¨
        - label æŒ‰æ˜ å°„å¤åˆ¶æ–‡ä»¶
          desc ä½¿ç”¨è‡ªåŠ¨ç”Ÿæˆçš„ RESTORE_MAP
        - label æ¸…ç†ä¸´æ—¶ç›®å½•
          desc åˆ é™¤è§£å‹çš„æš‚å­˜æ–‡ä»¶
</code></pre>
<h3 data-id="heading-30">å¤‡ä»½é¡¹é…ç½®</h3>
<p>å¤‡ä»½ç³»ç»Ÿé‡‡ç”¨é…ç½®é©±åŠ¨çš„æ–¹å¼ï¼Œå®šä¹‰éœ€è¦å¤‡ä»½çš„æ–‡ä»¶å’Œç›®å½•ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">BackupItem</span> {
  <span class="hljs-attr">src</span>: <span class="hljs-built_in">string</span>; <span class="hljs-comment">// æºè·¯å¾„ï¼ˆç›¸å¯¹äºé¡¹ç›®æ ¹ç›®å½•ï¼‰</span>
  <span class="hljs-attr">dest</span>: <span class="hljs-built_in">string</span>; <span class="hljs-comment">// å¤‡ä»½å†…ç›®æ ‡è·¯å¾„</span>
  <span class="hljs-attr">label</span>: <span class="hljs-built_in">string</span>; <span class="hljs-comment">// æ˜¾ç¤ºæ ‡ç­¾</span>
  <span class="hljs-attr">required</span>: <span class="hljs-built_in">boolean</span>; <span class="hljs-comment">// æ˜¯å¦ä¸ºå¿…éœ€é¡¹ï¼ˆbasic æ¨¡å¼åŒ…å«ï¼‰</span>
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-attr">BACKUP_ITEMS</span>: <span class="hljs-title class_">BackupItem</span>[] = [
  <span class="hljs-comment">// åŸºç¡€å¤‡ä»½é¡¹ï¼ˆrequired: trueï¼‰</span>
  {
    <span class="hljs-attr">src</span>: <span class="hljs-string">"src/content/blog"</span>,
    <span class="hljs-attr">dest</span>: <span class="hljs-string">"content/blog"</span>,
    <span class="hljs-attr">label</span>: <span class="hljs-string">"åšå®¢æ–‡ç« "</span>,
    <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,
  },
  {
    <span class="hljs-attr">src</span>: <span class="hljs-string">"config/site.yaml"</span>,
    <span class="hljs-attr">dest</span>: <span class="hljs-string">"config/site.yaml"</span>,
    <span class="hljs-attr">label</span>: <span class="hljs-string">"ç½‘ç«™é…ç½®"</span>,
    <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,
  },
  {
    <span class="hljs-attr">src</span>: <span class="hljs-string">"src/pages/about.md"</span>,
    <span class="hljs-attr">dest</span>: <span class="hljs-string">"pages/about.md"</span>,
    <span class="hljs-attr">label</span>: <span class="hljs-string">"å…³äºé¡µé¢"</span>,
    <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,
  },
  {
    <span class="hljs-attr">src</span>: <span class="hljs-string">"public/img/avatar.webp"</span>,
    <span class="hljs-attr">dest</span>: <span class="hljs-string">"img/avatar.webp"</span>,
    <span class="hljs-attr">label</span>: <span class="hljs-string">"ç”¨æˆ·å¤´åƒ"</span>,
    <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,
  },
  { <span class="hljs-attr">src</span>: <span class="hljs-string">".env"</span>, <span class="hljs-attr">dest</span>: <span class="hljs-string">"env"</span>, <span class="hljs-attr">label</span>: <span class="hljs-string">"ç¯å¢ƒå˜é‡"</span>, <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span> },
  <span class="hljs-comment">// å®Œæ•´å¤‡ä»½é¢å¤–é¡¹ç›®ï¼ˆrequired: falseï¼‰</span>
  { <span class="hljs-attr">src</span>: <span class="hljs-string">"public/img"</span>, <span class="hljs-attr">dest</span>: <span class="hljs-string">"img"</span>, <span class="hljs-attr">label</span>: <span class="hljs-string">"æ‰€æœ‰å›¾ç‰‡"</span>, <span class="hljs-attr">required</span>: <span class="hljs-literal">false</span> },
  {
    <span class="hljs-attr">src</span>: <span class="hljs-string">"src/assets/lqips.json"</span>,
    <span class="hljs-attr">dest</span>: <span class="hljs-string">"assets/lqips.json"</span>,
    <span class="hljs-attr">label</span>: <span class="hljs-string">"LQIP æ•°æ®"</span>,
    <span class="hljs-attr">required</span>: <span class="hljs-literal">false</span>,
  },
  {
    <span class="hljs-attr">src</span>: <span class="hljs-string">"src/assets/similarities.json"</span>,
    <span class="hljs-attr">dest</span>: <span class="hljs-string">"assets/similarities.json"</span>,
    <span class="hljs-attr">label</span>: <span class="hljs-string">"ç›¸ä¼¼åº¦æ•°æ®"</span>,
    <span class="hljs-attr">required</span>: <span class="hljs-literal">false</span>,
  },
  {
    <span class="hljs-attr">src</span>: <span class="hljs-string">"src/assets/summaries.json"</span>,
    <span class="hljs-attr">dest</span>: <span class="hljs-string">"assets/summaries.json"</span>,
    <span class="hljs-attr">label</span>: <span class="hljs-string">"AI æ‘˜è¦æ•°æ®"</span>,
    <span class="hljs-attr">required</span>: <span class="hljs-literal">false</span>,
  },
];
</code></pre>
<h3 data-id="heading-31">å¤‡ä»½æµç¨‹</h3>
<p>å¤‡ä»½æ“ä½œä½¿ç”¨ tar.gz æ ¼å¼å‹ç¼©ï¼Œå¹¶ç”Ÿæˆ manifest.json è®°å½•å…ƒä¿¡æ¯ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">runBackup</span>(<span class="hljs-params">
  isFullBackup: <span class="hljs-built_in">boolean</span>,
  onProgress?: (results: BackupResult[]) =&gt; <span class="hljs-built_in">void</span>
</span>): <span class="hljs-title class_">BackupOutput</span> {
  <span class="hljs-comment">// 1. åˆ›å»ºå¤‡ä»½ç›®å½•å’Œä¸´æ—¶ç›®å½•</span>
  fs.<span class="hljs-title function_">mkdirSync</span>(<span class="hljs-variable constant_">BACKUP_DIR</span>, { <span class="hljs-attr">recursive</span>: <span class="hljs-literal">true</span> });
  <span class="hljs-keyword">const</span> timestamp = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">toISOString</span>().<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/[:.]/g</span>, <span class="hljs-string">"-"</span>).<span class="hljs-title function_">slice</span>(<span class="hljs-number">0</span>, <span class="hljs-number">19</span>);
  <span class="hljs-keyword">const</span> tempDir = path.<span class="hljs-title function_">join</span>(<span class="hljs-variable constant_">BACKUP_DIR</span>, <span class="hljs-string">`.tmp-backup-<span class="hljs-subst">${timestamp}</span>`</span>);

  <span class="hljs-comment">// 2. è¿‡æ»¤å¤‡ä»½é¡¹ç›®ï¼ˆåŸºç¡€å¤‡ä»½åªåŒ…å« required: true çš„é¡¹ç›®ï¼‰</span>
  <span class="hljs-keyword">const</span> itemsToBackup = <span class="hljs-variable constant_">BACKUP_ITEMS</span>.<span class="hljs-title function_">filter</span>(
    <span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> item.<span class="hljs-property">required</span> || isFullBackup
  );

  <span class="hljs-comment">// 3. å¤åˆ¶æ–‡ä»¶åˆ°ä¸´æ—¶ç›®å½•</span>
  <span class="hljs-keyword">const</span> <span class="hljs-attr">results</span>: <span class="hljs-title class_">BackupResult</span>[] = [];
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> item <span class="hljs-keyword">of</span> itemsToBackup) {
    <span class="hljs-keyword">const</span> srcPath = path.<span class="hljs-title function_">join</span>(<span class="hljs-variable constant_">PROJECT_ROOT</span>, item.<span class="hljs-property">src</span>);
    <span class="hljs-keyword">const</span> destPath = path.<span class="hljs-title function_">join</span>(tempDir, item.<span class="hljs-property">dest</span>);

    <span class="hljs-keyword">if</span> (fs.<span class="hljs-title function_">existsSync</span>(srcPath)) {
      fs.<span class="hljs-title function_">cpSync</span>(srcPath, destPath, { <span class="hljs-attr">recursive</span>: <span class="hljs-literal">true</span> });
      results.<span class="hljs-title function_">push</span>({ item, <span class="hljs-attr">success</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">skipped</span>: <span class="hljs-literal">false</span> });
    } <span class="hljs-keyword">else</span> {
      results.<span class="hljs-title function_">push</span>({ item, <span class="hljs-attr">success</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">skipped</span>: <span class="hljs-literal">true</span> });
    }
    onProgress?.([...results]); <span class="hljs-comment">// è¿›åº¦å›è°ƒ</span>
  }

  <span class="hljs-comment">// 4. ç”Ÿæˆ manifest.json</span>
  <span class="hljs-keyword">const</span> manifest = {
    <span class="hljs-attr">name</span>: <span class="hljs-string">"astro-koharu-backup"</span>,
    <span class="hljs-attr">version</span>: <span class="hljs-title function_">getVersion</span>(),
    <span class="hljs-attr">type</span>: isFullBackup ? <span class="hljs-string">"full"</span> : <span class="hljs-string">"basic"</span>,
    timestamp,
    <span class="hljs-attr">created_at</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">toISOString</span>(),
    <span class="hljs-attr">files</span>: <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">fromEntries</span>(results.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">r</span>) =&gt;</span> [r.<span class="hljs-property">item</span>.<span class="hljs-property">dest</span>, r.<span class="hljs-property">success</span>])),
  };
  fs.<span class="hljs-title function_">writeFileSync</span>(
    path.<span class="hljs-title function_">join</span>(tempDir, <span class="hljs-string">"manifest.json"</span>),
    <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(manifest, <span class="hljs-literal">null</span>, <span class="hljs-number">2</span>)
  );

  <span class="hljs-comment">// 5. å‹ç¼©å¹¶æ¸…ç†</span>
  <span class="hljs-title function_">tarCreate</span>(backupFilePath, tempDir);
  fs.<span class="hljs-title function_">rmSync</span>(tempDir, { <span class="hljs-attr">recursive</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">force</span>: <span class="hljs-literal">true</span> });

  <span class="hljs-keyword">return</span> { results, <span class="hljs-attr">backupFile</span>: backupFilePath, fileSize, timestamp };
}
</code></pre>
<h3 data-id="heading-32">tar æ“ä½œå°è£…</h3>
<p>ä½¿ç”¨ç³»ç»Ÿ tar å‘½ä»¤è¿›è¡Œå‹ç¼©å’Œè§£å‹ï¼Œå¹¶æ·»åŠ è·¯å¾„éå†å®‰å…¨æ£€æŸ¥ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// å®‰å…¨éªŒè¯ï¼šé˜²æ­¢è·¯å¾„éå†æ”»å‡»</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">validateTarEntries</span>(<span class="hljs-params">entries: <span class="hljs-built_in">string</span>[], archivePath: <span class="hljs-built_in">string</span></span>): <span class="hljs-built_in">void</span> {
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> entry <span class="hljs-keyword">of</span> entries) {
    <span class="hljs-keyword">if</span> (entry.<span class="hljs-title function_">includes</span>(<span class="hljs-string">"\0"</span>)) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">`tar entry contains null byte`</span>);
    }
    <span class="hljs-keyword">const</span> normalized = path.<span class="hljs-property">posix</span>.<span class="hljs-title function_">normalize</span>(entry);
    <span class="hljs-keyword">if</span> (path.<span class="hljs-property">posix</span>.<span class="hljs-title function_">isAbsolute</span>(normalized)) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">`tar entry is absolute path: <span class="hljs-subst">${entry}</span>`</span>);
    }
    <span class="hljs-keyword">if</span> (normalized.<span class="hljs-title function_">split</span>(<span class="hljs-string">"/"</span>).<span class="hljs-title function_">includes</span>(<span class="hljs-string">".."</span>)) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">`tar entry contains parent traversal: <span class="hljs-subst">${entry}</span>`</span>);
    }
  }
}

<span class="hljs-comment">// åˆ›å»ºå‹ç¼©åŒ…</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">tarCreate</span>(<span class="hljs-params">archivePath: <span class="hljs-built_in">string</span>, sourceDir: <span class="hljs-built_in">string</span></span>): <span class="hljs-built_in">void</span> {
  <span class="hljs-title function_">spawnSync</span>(<span class="hljs-string">"tar"</span>, [<span class="hljs-string">"-czf"</span>, archivePath, <span class="hljs-string">"-C"</span>, sourceDir, <span class="hljs-string">"."</span>]);
}

<span class="hljs-comment">// è§£å‹åˆ°æŒ‡å®šç›®å½•</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">tarExtract</span>(<span class="hljs-params">archivePath: <span class="hljs-built_in">string</span>, destDir: <span class="hljs-built_in">string</span></span>): <span class="hljs-built_in">void</span> {
  <span class="hljs-title function_">listTarEntries</span>(archivePath); <span class="hljs-comment">// å…ˆéªŒè¯æ¡ç›®å®‰å…¨æ€§</span>
  <span class="hljs-title function_">spawnSync</span>(<span class="hljs-string">"tar"</span>, [<span class="hljs-string">"-xzf"</span>, archivePath, <span class="hljs-string">"-C"</span>, destDir]);
}

<span class="hljs-comment">// è¯»å– manifestï¼ˆä¸è§£å‹æ•´ä¸ªæ–‡ä»¶ï¼‰</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">tarExtractManifest</span>(<span class="hljs-params">archivePath: <span class="hljs-built_in">string</span></span>): <span class="hljs-built_in">string</span> | <span class="hljs-literal">null</span> {
  <span class="hljs-keyword">const</span> result = <span class="hljs-title function_">spawnSync</span>(<span class="hljs-string">"tar"</span>, [<span class="hljs-string">"-xzf"</span>, archivePath, <span class="hljs-string">"-O"</span>, <span class="hljs-string">"manifest.json"</span>]);
  <span class="hljs-keyword">return</span> result.<span class="hljs-property">status</span> === <span class="hljs-number">0</span> ? result.<span class="hljs-property">stdout</span> : <span class="hljs-literal">null</span>;
}
</code></pre>
<h3 data-id="heading-33">è¿˜åŸæµç¨‹</h3>
<p>è¿˜åŸæ“ä½œåŸºäº manifest é©±åŠ¨ï¼Œç¡®ä¿åªè¿˜åŸå®é™…å¤‡ä»½æˆåŠŸçš„æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// è·¯å¾„æ˜ å°„ï¼šä»å¤‡ä»½é¡¹é…ç½®è‡ªåŠ¨ç”Ÿæˆï¼Œç¡®ä¿ä¸€è‡´æ€§</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-attr">RESTORE_MAP</span>: <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">string</span>&gt; = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">fromEntries</span>(
  <span class="hljs-variable constant_">BACKUP_ITEMS</span>.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> [item.<span class="hljs-property">dest</span>, item.<span class="hljs-property">src</span>])
);

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">restoreBackup</span>(<span class="hljs-params">backupPath: <span class="hljs-built_in">string</span></span>): <span class="hljs-title class_">RestoreResult</span> {
  <span class="hljs-comment">// 1. åˆ›å»ºä¸´æ—¶ç›®å½•å¹¶è§£å‹</span>
  <span class="hljs-keyword">const</span> tempDir = fs.<span class="hljs-title function_">mkdtempSync</span>(path.<span class="hljs-title function_">join</span>(os.<span class="hljs-title function_">tmpdir</span>(), <span class="hljs-string">"restore-"</span>));
  <span class="hljs-title function_">tarExtract</span>(backupPath, tempDir);

  <span class="hljs-comment">// 2. è¯»å– manifest è·å–å®é™…å¤‡ä»½çš„æ–‡ä»¶åˆ—è¡¨</span>
  <span class="hljs-keyword">const</span> manifestPath = path.<span class="hljs-title function_">join</span>(tempDir, <span class="hljs-string">"manifest.json"</span>);
  <span class="hljs-keyword">const</span> manifest = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(fs.<span class="hljs-title function_">readFileSync</span>(manifestPath, <span class="hljs-string">"utf-8"</span>));

  <span class="hljs-keyword">const</span> <span class="hljs-attr">restored</span>: <span class="hljs-built_in">string</span>[] = [];
  <span class="hljs-keyword">const</span> <span class="hljs-attr">skipped</span>: <span class="hljs-built_in">string</span>[] = [];

  <span class="hljs-comment">// 3. åŸºäº manifest.files è¿˜åŸï¼ˆåªè¿˜åŸæˆåŠŸå¤‡ä»½çš„æ–‡ä»¶ï¼‰</span>
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> [backupPath, success] <span class="hljs-keyword">of</span> <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">entries</span>(manifest.<span class="hljs-property">files</span>)) {
    <span class="hljs-comment">// è·³è¿‡å¤‡ä»½å¤±è´¥çš„æ–‡ä»¶</span>
    <span class="hljs-keyword">if</span> (!success) {
      skipped.<span class="hljs-title function_">push</span>(backupPath);
      <span class="hljs-keyword">continue</span>;
    }

    <span class="hljs-keyword">const</span> projectPath = <span class="hljs-variable constant_">RESTORE_MAP</span>[backupPath];
    <span class="hljs-keyword">if</span> (!projectPath) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">`æœªçŸ¥çš„å¤‡ä»½è·¯å¾„: <span class="hljs-subst">${backupPath}</span>ï¼Œè·³è¿‡`</span>);
      skipped.<span class="hljs-title function_">push</span>(backupPath);
      <span class="hljs-keyword">continue</span>;
    }

    <span class="hljs-keyword">const</span> srcPath = path.<span class="hljs-title function_">join</span>(tempDir, backupPath);
    <span class="hljs-keyword">const</span> destPath = path.<span class="hljs-title function_">join</span>(<span class="hljs-variable constant_">PROJECT_ROOT</span>, projectPath);

    <span class="hljs-keyword">if</span> (fs.<span class="hljs-title function_">existsSync</span>(srcPath)) {
      fs.<span class="hljs-title function_">mkdirSync</span>(path.<span class="hljs-title function_">dirname</span>(destPath), { <span class="hljs-attr">recursive</span>: <span class="hljs-literal">true</span> });
      fs.<span class="hljs-title function_">cpSync</span>(srcPath, destPath, { <span class="hljs-attr">recursive</span>: <span class="hljs-literal">true</span> });
      restored.<span class="hljs-title function_">push</span>(projectPath);
    } <span class="hljs-keyword">else</span> {
      skipped.<span class="hljs-title function_">push</span>(backupPath);
    }
  }

  <span class="hljs-comment">// 4. æ¸…ç†ä¸´æ—¶ç›®å½•</span>
  fs.<span class="hljs-title function_">rmSync</span>(tempDir, { <span class="hljs-attr">recursive</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">force</span>: <span class="hljs-literal">true</span> });

  <span class="hljs-keyword">return</span> {
    restored,
    skipped,
    <span class="hljs-attr">backupType</span>: manifest.<span class="hljs-property">type</span>,
    <span class="hljs-attr">version</span>: manifest.<span class="hljs-property">version</span>,
  };
}
</code></pre>
<h3 data-id="heading-34">Dry-Run æ¨¡å¼è¯¦è§£</h3>
<p>Dry-runï¼ˆé¢„æ¼”æ¨¡å¼ï¼‰æ˜¯ CLI å·¥å…·ä¸­å¸¸è§çš„å®‰å…¨ç‰¹æ€§ï¼Œå…è®¸ç”¨æˆ·åœ¨å®é™…æ‰§è¡Œå‰é¢„è§ˆæ“ä½œç»“æœã€‚æœ¬å®ç°é‡‡ç”¨<strong>å‡½æ•°åˆ†ç¦» + æ¡ä»¶æ¸²æŸ“</strong>çš„æ¨¡å¼ã€‚</p>
<p>ä¸‹å›¾å±•ç¤ºäº†é¢„è§ˆæ¨¡å¼å’Œå®é™…æ‰§è¡Œæ¨¡å¼çš„æ ¸å¿ƒåŒºåˆ«ï¼š</p>
<pre><code class="hljs language-infographic" lang="infographic">infographic compare-binary-horizontal-badge-card-arrow
data
  title Dry-Run æ¨¡å¼ä¸å®é™…æ‰§è¡Œå¯¹æ¯”
  desc é¢„è§ˆæ¨¡å¼å’Œå®é™…è¿˜åŸçš„å…³é”®åŒºåˆ«
  items
    - label é¢„è§ˆæ¨¡å¼
      desc å®‰å…¨çš„åªè¯»é¢„è§ˆ
      icon mdi/eye
      children
        - label æå– manifest.json
          desc è°ƒç”¨ tarExtractManifest ä¸è§£å‹æ•´ä¸ªå½’æ¡£
        - label è¯»å– manifest.files
          desc è·å–å®é™…å¤‡ä»½çš„æ–‡ä»¶åˆ—è¡¨
        - label ç»Ÿè®¡æ–‡ä»¶æ•°é‡
          desc è°ƒç”¨ tarList è®¡ç®—æ¯ä¸ªè·¯å¾„çš„æ–‡ä»¶æ•°
        - label ä¸ä¿®æ”¹ä»»ä½•æ–‡ä»¶
          desc é›¶å‰¯ä½œç”¨,å¯å®‰å…¨æ‰§è¡Œ
    - label å®é™…æ‰§è¡Œ
      desc åŸºäº manifest çš„è¿˜åŸ
      icon mdi/content-save
      children
        - label è§£å‹æ•´ä¸ªå½’æ¡£
          desc è°ƒç”¨ tarExtract æå–æ‰€æœ‰æ–‡ä»¶
        - label è¯»å– manifest.files
          desc è·å–å®é™…å¤‡ä»½æˆåŠŸçš„æ–‡ä»¶åˆ—è¡¨
        - label æŒ‰ manifest å¤åˆ¶æ–‡ä»¶
          desc åªè¿˜åŸ success: true çš„æ–‡ä»¶
        - label æ˜¾ç¤ºè·³è¿‡çš„æ–‡ä»¶
          desc æŠ¥å‘Š success: false çš„æ–‡ä»¶
</code></pre>
<h4 data-id="heading-35">é¢„è§ˆå‡½æ•°å’Œæ‰§è¡Œå‡½æ•°</h4>
<p>å…³é”®åœ¨äºæä¾›ä¸¤ä¸ªåŠŸèƒ½ç›¸ä¼¼ä½†å‰¯ä½œç”¨ä¸åŒçš„å‡½æ•°ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// é¢„è§ˆå‡½æ•°ï¼šåªè¯»å– manifestï¼Œä¸è§£å‹ä¸ä¿®æ”¹æ–‡ä»¶</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getRestorePreview</span>(<span class="hljs-params">backupPath: <span class="hljs-built_in">string</span></span>): <span class="hljs-title class_">RestorePreviewItem</span>[] {
  <span class="hljs-comment">// åªæå– manifest.jsonï¼Œä¸è§£å‹æ•´ä¸ªå½’æ¡£</span>
  <span class="hljs-keyword">const</span> manifestContent = <span class="hljs-title function_">tarExtractManifest</span>(backupPath);
  <span class="hljs-keyword">if</span> (!manifestContent) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">"æ— æ³•è¯»å–å¤‡ä»½ manifest"</span>);
  }

  <span class="hljs-keyword">const</span> manifest = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(manifestContent);
  <span class="hljs-keyword">const</span> <span class="hljs-attr">previewItems</span>: <span class="hljs-title class_">RestorePreviewItem</span>[] = [];

  <span class="hljs-comment">// åŸºäº manifest.files ç”Ÿæˆé¢„è§ˆ</span>
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> [backupPath, success] <span class="hljs-keyword">of</span> <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">entries</span>(manifest.<span class="hljs-property">files</span>)) {
    <span class="hljs-keyword">if</span> (!success) <span class="hljs-keyword">continue</span>; <span class="hljs-comment">// è·³è¿‡å¤‡ä»½å¤±è´¥çš„æ–‡ä»¶</span>

    <span class="hljs-keyword">const</span> projectPath = <span class="hljs-variable constant_">RESTORE_MAP</span>[backupPath];
    <span class="hljs-keyword">if</span> (!projectPath) <span class="hljs-keyword">continue</span>;

    <span class="hljs-comment">// ä»å½’æ¡£ä¸­ç»Ÿè®¡æ–‡ä»¶æ•°é‡ï¼ˆä¸è§£å‹ï¼‰</span>
    <span class="hljs-keyword">const</span> files = <span class="hljs-title function_">tarList</span>(backupPath);
    <span class="hljs-keyword">const</span> matchingFiles = files.<span class="hljs-title function_">filter</span>(
      <span class="hljs-function">(<span class="hljs-params">f</span>) =&gt;</span> f === backupPath || f.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">`<span class="hljs-subst">${backupPath}</span>/`</span>)
    );
    <span class="hljs-keyword">const</span> fileCount = matchingFiles.<span class="hljs-property">length</span>;

    previewItems.<span class="hljs-title function_">push</span>({
      <span class="hljs-attr">path</span>: projectPath,
      <span class="hljs-attr">fileCount</span>: fileCount || <span class="hljs-number">1</span>,
      backupPath,
    });
  }

  <span class="hljs-keyword">return</span> previewItems;
}

<span class="hljs-comment">// æ‰§è¡Œå‡½æ•°ï¼šå®é™…è§£å‹å¹¶å¤åˆ¶æ–‡ä»¶</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">restoreBackup</span>(<span class="hljs-params">backupPath: <span class="hljs-built_in">string</span></span>): <span class="hljs-title class_">RestoreResult</span> {
  <span class="hljs-keyword">const</span> tempDir = fs.<span class="hljs-title function_">mkdtempSync</span>(path.<span class="hljs-title function_">join</span>(os.<span class="hljs-title function_">tmpdir</span>(), <span class="hljs-string">"restore-"</span>));
  <span class="hljs-title function_">tarExtract</span>(backupPath, tempDir); <span class="hljs-comment">// å®é™…è§£å‹</span>

  <span class="hljs-comment">// è¯»å– manifest é©±åŠ¨è¿˜åŸ</span>
  <span class="hljs-keyword">const</span> manifest = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(
    fs.<span class="hljs-title function_">readFileSync</span>(path.<span class="hljs-title function_">join</span>(tempDir, <span class="hljs-string">"manifest.json"</span>), <span class="hljs-string">"utf-8"</span>)
  );

  <span class="hljs-keyword">const</span> <span class="hljs-attr">restored</span>: <span class="hljs-built_in">string</span>[] = [];
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> [backupPath, success] <span class="hljs-keyword">of</span> <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">entries</span>(manifest.<span class="hljs-property">files</span>)) {
    <span class="hljs-keyword">if</span> (!success) <span class="hljs-keyword">continue</span>;
    <span class="hljs-keyword">const</span> projectPath = <span class="hljs-variable constant_">RESTORE_MAP</span>[backupPath];
    <span class="hljs-comment">// ... å®é™…å¤åˆ¶æ–‡ä»¶</span>
    fs.<span class="hljs-title function_">cpSync</span>(srcPath, destPath, { <span class="hljs-attr">recursive</span>: <span class="hljs-literal">true</span> });
    restored.<span class="hljs-title function_">push</span>(projectPath);
  }

  <span class="hljs-keyword">return</span> { restored, <span class="hljs-attr">skipped</span>: [], <span class="hljs-attr">backupType</span>: manifest.<span class="hljs-property">type</span> };
}
</code></pre>
<p>ä¸¤ä¸ªå‡½æ•°çš„æ ¸å¿ƒåŒºåˆ«ï¼š</p>
<ul>
<li><strong>é¢„è§ˆ</strong>ï¼šè°ƒç”¨ <code>tarExtractManifest()</code> åªæå– manifestï¼Œå†ç”¨ <code>tarList()</code> ç»Ÿè®¡æ–‡ä»¶æ•°é‡</li>
<li><strong>æ‰§è¡Œ</strong>ï¼šè°ƒç”¨ <code>tarExtract()</code> è§£å‹æ•´ä¸ªå½’æ¡£ï¼ŒåŸºäº manifest.files å¤åˆ¶æ–‡ä»¶</li>
</ul>
<h4 data-id="heading-36">ç»„ä»¶å±‚ï¼šæ¡ä»¶åˆ†å‘</h4>
<p>åœ¨ React ç»„ä»¶ä¸­ï¼Œæ ¹æ® <code>dryRun</code> å‚æ•°å†³å®šè°ƒç”¨å“ªä¸ªå‡½æ•°ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">RestoreAppProps</span> {
  dryRun?: <span class="hljs-built_in">boolean</span>; <span class="hljs-comment">// æ˜¯å¦ä¸ºé¢„è§ˆæ¨¡å¼</span>
  force?: <span class="hljs-built_in">boolean</span>; <span class="hljs-comment">// æ˜¯å¦è·³è¿‡ç¡®è®¤</span>
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">RestoreApp</span>(<span class="hljs-params">{ dryRun = <span class="hljs-literal">false</span>, force = <span class="hljs-literal">false</span> }: RestoreAppProps</span>) {
  <span class="hljs-keyword">const</span> [result, setResult] = useState&lt;{
    <span class="hljs-attr">items</span>: <span class="hljs-title class_">RestorePreviewItem</span>[] | <span class="hljs-built_in">string</span>[];
    backupType?: <span class="hljs-built_in">string</span>;
    skipped?: <span class="hljs-built_in">string</span>[];
  }&gt;();

  <span class="hljs-comment">// é¢„è§ˆæ¨¡å¼ï¼šåªè¯»å– manifest</span>
  <span class="hljs-keyword">const</span> runDryRun = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> previewItems = <span class="hljs-title function_">getRestorePreview</span>(selectedBackup);
    <span class="hljs-title function_">setResult</span>({ <span class="hljs-attr">items</span>: previewItems });
    <span class="hljs-title function_">setStatus</span>(<span class="hljs-string">"done"</span>);
  }, [selectedBackup]);

  <span class="hljs-comment">// å®é™…è¿˜åŸï¼šåŸºäº manifest æ‰§è¡Œè¿˜åŸ</span>
  <span class="hljs-keyword">const</span> runRestore = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">setStatus</span>(<span class="hljs-string">"restoring"</span>);
    <span class="hljs-keyword">const</span> { restored, skipped, backupType } = <span class="hljs-title function_">restoreBackup</span>(selectedBackup);
    <span class="hljs-title function_">setResult</span>({ <span class="hljs-attr">items</span>: restored, backupType, skipped });
    <span class="hljs-title function_">setStatus</span>(<span class="hljs-string">"done"</span>);
  }, [selectedBackup]);

  <span class="hljs-comment">// ç¡®è®¤æ—¶æ ¹æ®æ¨¡å¼åˆ†å‘</span>
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleConfirm</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (dryRun) {
      <span class="hljs-title function_">runDryRun</span>();
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-title function_">runRestore</span>();
    }
  }
}
</code></pre>
<p>å…³é”®è®¾è®¡ï¼š</p>
<ul>
<li><strong>ç»Ÿä¸€æ•°æ®ç»“æ„</strong>ï¼š<code>result</code> å¯ä»¥å®¹çº³é¢„è§ˆå’Œæ‰§è¡Œä¸¤ç§ç»“æœ</li>
<li><strong>ç±»å‹åŒºåˆ†</strong>ï¼šé¢„è§ˆè¿”å› <code>RestorePreviewItem[]</code>ï¼ˆå« fileCountï¼‰ï¼Œæ‰§è¡Œè¿”å› <code>string[]</code></li>
<li><strong>é¢å¤–ä¿¡æ¯</strong>ï¼šæ‰§è¡Œæ¨¡å¼è¿”å› <code>backupType</code> å’Œ <code>skipped</code>ï¼Œç”¨äºæ˜¾ç¤ºå®Œæ•´ä¿¡æ¯</li>
</ul>
<h4 data-id="heading-37">UI å±‚ï¼šå·®å¼‚åŒ–å±•ç¤º</h4>
<p>é¢„è§ˆæ¨¡å¼å’Œå®é™…æ‰§è¡Œæ¨¡å¼åœ¨ UI ä¸Šæœ‰æ˜ç¡®åŒºåˆ†ï¼š</p>
<pre><code class="hljs language-tsx" lang="tsx">{
  <span class="hljs-comment">/* ç¡®è®¤æç¤ºï¼šæ˜¾ç¤ºå¤‡ä»½ç±»å‹å’Œæ–‡ä»¶æ•°é‡ */</span>
}
&lt;<span class="hljs-title class_">Text</span> color=<span class="hljs-string">"yellow"</span>&gt;
  {dryRun ? <span class="hljs-string">"[é¢„è§ˆæ¨¡å¼] "</span> : <span class="hljs-string">""</span>}
  ç¡®è®¤è¿˜åŸ {result?.<span class="hljs-property">backupType</span>} å¤‡ä»½? æ­¤æ“ä½œå°†è¦†ç›–ç°æœ‰æ–‡ä»¶
&lt;/<span class="hljs-title class_">Text</span>&gt;;

{
  <span class="hljs-comment">/* å®ŒæˆçŠ¶æ€ï¼šæ ¹æ®æ¨¡å¼æ˜¾ç¤ºä¸åŒæ ‡é¢˜ */</span>
}
&lt;<span class="hljs-title class_">Text</span> bold color=<span class="hljs-string">"green"</span>&gt;
  {dryRun ? <span class="hljs-string">"é¢„è§ˆæ¨¡å¼"</span> : <span class="hljs-string">"è¿˜åŸå®Œæˆ"</span>}
&lt;/<span class="hljs-title class_">Text</span>&gt;;

{
  <span class="hljs-comment">/* ç»“æœå±•ç¤ºï¼šé¢„è§ˆæ¨¡å¼æ˜¾ç¤ºæ–‡ä»¶æ•°é‡ç»Ÿè®¡ */</span>
}
{
  result?.<span class="hljs-property">items</span>.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> isPreviewItem = <span class="hljs-keyword">typeof</span> item !== <span class="hljs-string">"string"</span>;
    <span class="hljs-keyword">const</span> filePath = isPreviewItem ? item.<span class="hljs-property">path</span> : item;
    <span class="hljs-keyword">const</span> fileCount = isPreviewItem ? item.<span class="hljs-property">fileCount</span> : <span class="hljs-number">0</span>;
    <span class="hljs-keyword">return</span> (
      <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Text</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{filePath}</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Text</span> <span class="hljs-attr">color</span>=<span class="hljs-string">"green"</span>&gt;</span>{"  "}+ <span class="hljs-tag">&lt;/<span class="hljs-name">Text</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Text</span>&gt;</span>{filePath}<span class="hljs-tag">&lt;/<span class="hljs-name">Text</span>&gt;</span>
        {/* é¢„è§ˆæ¨¡å¼é¢å¤–æ˜¾ç¤ºæ–‡ä»¶æ•°é‡ */}
        {isPreviewItem &amp;&amp; fileCount &gt; 1 &amp;&amp; (
          <span class="hljs-tag">&lt;<span class="hljs-name">Text</span> <span class="hljs-attr">dimColor</span>&gt;</span> ({fileCount} æ–‡ä»¶)<span class="hljs-tag">&lt;/<span class="hljs-name">Text</span>&gt;</span>
        )}
      <span class="hljs-tag">&lt;/<span class="hljs-name">Text</span>&gt;</span></span>
    );
  });
}

{
  <span class="hljs-comment">/* ç»Ÿè®¡æ–‡æ¡ˆï¼šä½¿ç”¨ "å°†" vs "å·²" åŒºåˆ† */</span>
}
&lt;<span class="hljs-title class_">Text</span>&gt;
  {dryRun ? <span class="hljs-string">"å°†"</span> : <span class="hljs-string">"å·²"</span>}è¿˜åŸ: <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Text</span> <span class="hljs-attr">color</span>=<span class="hljs-string">"green"</span>&gt;</span>{result?.items.length}<span class="hljs-tag">&lt;/<span class="hljs-name">Text</span>&gt;</span></span>{<span class="hljs-string">" "</span>}
  é¡¹
&lt;/<span class="hljs-title class_">Text</span>&gt;;

{
  <span class="hljs-comment">/* æ˜¾ç¤ºè·³è¿‡çš„æ–‡ä»¶ï¼ˆä»…å®é™…æ‰§è¡Œæ¨¡å¼ï¼‰ */</span>
}
{
  !dryRun &amp;&amp; result?.<span class="hljs-property">skipped</span> &amp;&amp; result.<span class="hljs-property">skipped</span>.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span> &amp;&amp; (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Box</span> <span class="hljs-attr">flexDirection</span>=<span class="hljs-string">"column"</span> <span class="hljs-attr">marginTop</span>=<span class="hljs-string">{1}</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Text</span> <span class="hljs-attr">color</span>=<span class="hljs-string">"yellow"</span>&gt;</span>è·³è¿‡çš„æ–‡ä»¶:<span class="hljs-tag">&lt;/<span class="hljs-name">Text</span>&gt;</span>
      {result.skipped.map((file) =&gt; (
        <span class="hljs-tag">&lt;<span class="hljs-name">Text</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{file}</span> <span class="hljs-attr">dimColor</span>&gt;</span>
          {"  "}- {file}
        <span class="hljs-tag">&lt;/<span class="hljs-name">Text</span>&gt;</span>
      ))}
    <span class="hljs-tag">&lt;/<span class="hljs-name">Box</span>&gt;</span></span>
  );
}

{
  <span class="hljs-comment">/* é¢„è§ˆæ¨¡å¼ç‰¹æœ‰æç¤º */</span>
}
{
  dryRun &amp;&amp; <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Text</span> <span class="hljs-attr">color</span>=<span class="hljs-string">"yellow"</span>&gt;</span>è¿™æ˜¯é¢„è§ˆæ¨¡å¼ï¼Œæ²¡æœ‰æ–‡ä»¶è¢«ä¿®æ”¹<span class="hljs-tag">&lt;/<span class="hljs-name">Text</span>&gt;</span></span>;
}

{
  <span class="hljs-comment">/* å®é™…æ‰§è¡Œæ¨¡å¼ï¼šæ˜¾ç¤ºåç»­æ­¥éª¤ */</span>
}
{
  !dryRun &amp;&amp; (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Box</span> <span class="hljs-attr">flexDirection</span>=<span class="hljs-string">"column"</span> <span class="hljs-attr">marginTop</span>=<span class="hljs-string">{1}</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Text</span> <span class="hljs-attr">dimColor</span>&gt;</span>åç»­æ­¥éª¤:<span class="hljs-tag">&lt;/<span class="hljs-name">Text</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Text</span> <span class="hljs-attr">dimColor</span>&gt;</span>{"  "}1. pnpm install # å®‰è£…ä¾èµ–<span class="hljs-tag">&lt;/<span class="hljs-name">Text</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Text</span> <span class="hljs-attr">dimColor</span>&gt;</span>{"  "}2. pnpm build # æ„å»ºé¡¹ç›®<span class="hljs-tag">&lt;/<span class="hljs-name">Text</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">Box</span>&gt;</span></span>
  );
}
</code></pre>
<h4 data-id="heading-38">å‘½ä»¤è¡Œä½¿ç”¨</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># é¢„è§ˆæ¨¡å¼ï¼šæŸ¥çœ‹å°†è¦è¿˜åŸçš„å†…å®¹</span>
pnpm koharu restore --dry-run

<span class="hljs-comment"># å®é™…æ‰§è¡Œ</span>
pnpm koharu restore

<span class="hljs-comment"># è·³è¿‡ç¡®è®¤ç›´æ¥æ‰§è¡Œ</span>
pnpm koharu restore --force

<span class="hljs-comment"># è¿˜åŸæœ€æ–°å¤‡ä»½ï¼ˆé¢„è§ˆï¼‰</span>
pnpm koharu restore --latest --dry-run
</code></pre>
<h4 data-id="heading-39">è¾“å‡ºå¯¹æ¯”</h4>
<p><strong>é¢„è§ˆæ¨¡å¼è¾“å‡ºï¼ˆFull å¤‡ä»½ï¼‰</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">å¤‡ä»½æ–‡ä»¶: backup-2026-01-10-12-30-00-full.tar.gz
å¤‡ä»½ç±»å‹: full
ä¸»é¢˜ç‰ˆæœ¬: 1.2.0
å¤‡ä»½æ—¶é—´: 2026-01-10 12:30:00

[é¢„è§ˆæ¨¡å¼] ç¡®è®¤è¿˜åŸ full å¤‡ä»½? æ­¤æ“ä½œå°†è¦†ç›–ç°æœ‰æ–‡ä»¶ (Y/n)

é¢„è§ˆæ¨¡å¼
  + src/content/blog (42 æ–‡ä»¶)
  + config/site.yaml
  + src/pages/about.md
  + .<span class="hljs-built_in">env</span>
  + public/img (128 æ–‡ä»¶)
  + src/assets/lqips.json
  + src/assets/similarities.json
  + src/assets/summaries.json

å°†è¿˜åŸ: 8 é¡¹
è¿™æ˜¯é¢„è§ˆæ¨¡å¼ï¼Œæ²¡æœ‰æ–‡ä»¶è¢«ä¿®æ”¹
</code></pre>
<p><strong>é¢„è§ˆæ¨¡å¼è¾“å‡ºï¼ˆBasic å¤‡ä»½ï¼‰</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">å¤‡ä»½æ–‡ä»¶: backup-2026-01-10-12-30-00-basic.tar.gz
å¤‡ä»½ç±»å‹: basic
ä¸»é¢˜ç‰ˆæœ¬: 1.2.0
å¤‡ä»½æ—¶é—´: 2026-01-10 12:30:00

[é¢„è§ˆæ¨¡å¼] ç¡®è®¤è¿˜åŸ basic å¤‡ä»½? æ­¤æ“ä½œå°†è¦†ç›–ç°æœ‰æ–‡ä»¶ (Y/n)

é¢„è§ˆæ¨¡å¼
  + src/content/blog (42 æ–‡ä»¶)
  + config/site.yaml
  + src/pages/about.md
  + .<span class="hljs-built_in">env</span>
  + public/img/avatar.webp

å°†è¿˜åŸ: 5 é¡¹
è¿™æ˜¯é¢„è§ˆæ¨¡å¼ï¼Œæ²¡æœ‰æ–‡ä»¶è¢«ä¿®æ”¹
</code></pre>
<p><strong>å®é™…æ‰§è¡Œè¾“å‡ºï¼ˆå«è·³è¿‡çš„æ–‡ä»¶ï¼‰</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">è¿˜åŸå®Œæˆ
  + src/content/blog
  + config/site.yaml
  + src/pages/about.md
  + .<span class="hljs-built_in">env</span>
  + public/img

è·³è¿‡çš„æ–‡ä»¶:
  - src/assets/lqips.json (å¤‡ä»½æ—¶ä¸å­˜åœ¨)

å·²è¿˜åŸ: 5 é¡¹
åç»­æ­¥éª¤:
  1. pnpm install <span class="hljs-comment"># å®‰è£…ä¾èµ–</span>
  2. pnpm build <span class="hljs-comment"># æ„å»ºé¡¹ç›®</span>
  3. pnpm dev <span class="hljs-comment"># å¯åŠ¨å¼€å‘æœåŠ¡å™¨</span>
</code></pre>
<h2 data-id="heading-40">å†™åœ¨æœ€å</h2>
<p>èƒ½çœ‹åˆ°è¿™é‡Œï¼Œé‚£å¾ˆå‰å®³äº†ï¼Œè§‰å¾—è¿˜æŒºå–œæ¬¢çš„è¯ï¼Œæ¬¢è¿ç»™æˆ‘ä¸€ä¸ª star å‘¢ï½</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FcosZone%2Fastro-koharu" target="_blank" title="https://github.com/cosZone/astro-koharu" ref="nofollow noopener noreferrer">github.com/cosZone/astâ€¦</a></p>
<p>è‡ªè®¤ä¸ºè¿™æ¬¡å®ç°çš„è¿™ä¸ª CLI å¯¹äºæˆ‘è‡ªå·±çš„éœ€æ±‚æ¥è¯´ï¼Œç›¸å½“å¥½ç”¨ï¼Œåªæ¨æ²¡æœ‰æ—©ä¸€äº›å®è·µï¼Œå¦‚æœä½ çœ‹åˆ°è¿™ç¯‡æ–‡ç« ï¼Œå¯ä»¥æ”¾å¿ƒå¤§èƒ†çš„å»æ„å»ºã€‚</p>
<p>ç›¸å…³é“¾æ¥å¦‚ä¸‹</p>
<h3 data-id="heading-41">React Ink</h3>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fvadimdemedes%2Fink" target="_blank" title="https://github.com/vadimdemedes/ink" ref="nofollow noopener noreferrer">Ink - GitHub</a> - React for interactive command-line appsï¼Œå®˜æ–¹ä»“åº“</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fvadimdemedes%2Fink-ui" target="_blank" title="https://github.com/vadimdemedes/ink-ui" ref="nofollow noopener noreferrer">Ink UI</a> - Ink çš„ UI ç»„ä»¶åº“ï¼Œæä¾› TextInputã€Spinnerã€ProgressBar ç­‰ç»„ä»¶</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.logrocket.com%2Fusing-ink-ui-react-build-interactive-custom-clis%2F" target="_blank" title="https://blog.logrocket.com/using-ink-ui-react-build-interactive-custom-clis/" ref="nofollow noopener noreferrer">Using Ink UI with React to build interactive, custom CLIs - LogRocket</a> - Ink UI ä½¿ç”¨æ•™ç¨‹</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fivanleo.com%2Fblog%2Fmigrating-to-react-ink" target="_blank" title="https://ivanleo.com/blog/migrating-to-react-ink" ref="nofollow noopener noreferrer">Building a Coding CLI with React Ink</a> - å®æˆ˜æ•™ç¨‹ï¼ŒåŒ…å«æµå¼è¾“å‡ºå®ç°</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.freecodecamp.org%2Fnews%2Freact-js-ink-cli-tutorial%2F" target="_blank" title="https://www.freecodecamp.org/news/react-js-ink-cli-tutorial/" ref="nofollow noopener noreferrer">React + Ink CLI Tutorial - FreeCodeCamp</a> - å…¥é—¨æ•™ç¨‹</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Flirantal%2Fnodejs-cli-apps-best-practices" target="_blank" title="https://github.com/lirantal/nodejs-cli-apps-best-practices" ref="nofollow noopener noreferrer">Node.js CLI Apps Best Practices - GitHub</a> - Node.js CLI æœ€ä½³å®è·µæ¸…å•</li>
</ul>
<h3 data-id="heading-42">Git åŒæ­¥ Fork</h3>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.github.com%2Farticles%2Fsyncing-a-fork" target="_blank" title="https://docs.github.com/articles/syncing-a-fork" ref="nofollow noopener noreferrer">Syncing a fork - GitHub Docs</a> - å®˜æ–¹æ–‡æ¡£</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.atlassian.com%2Fgit%2Ftutorials%2Fgit-forks-and-upstreams" target="_blank" title="https://www.atlassian.com/git/tutorials/git-forks-and-upstreams" ref="nofollow noopener noreferrer">Git Upstreams and Forks - Atlassian</a> - Atlassian çš„è¯¦ç»†æ•™ç¨‹</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.freecodecamp.org%2Fnews%2Fhow-to-sync-your-fork-with-the-original-git-repository%2F" target="_blank" title="https://www.freecodecamp.org/news/how-to-sync-your-fork-with-the-original-git-repository/" ref="nofollow noopener noreferrer">How to Sync Your Fork with the Original Git Repository - FreeCodeCamp</a> - å®Œæ•´åŒæ­¥æŒ‡å—</li>
</ul>
<h3 data-id="heading-43">çŠ¶æ€æœºä¸ useReducer</h3>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fkyleshevlin.com%2Fhow-to-use-usereducer-as-a-finite-state-machine%2F" target="_blank" title="https://kyleshevlin.com/how-to-use-usereducer-as-a-finite-state-machine/" ref="nofollow noopener noreferrer">How to Use useReducer as a Finite State Machine - Kyle Shevlin</a> - å°† useReducer ç”¨ä½œçŠ¶æ€æœºçš„ç»å…¸æ–‡ç« </li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdev.to%2Frohanfaiyazkhan%2Fturning-your-react-component-into-a-finite-state-machine-with-usereducer-14nm" target="_blank" title="https://dev.to/rohanfaiyazkhan/turning-your-react-component-into-a-finite-state-machine-with-usereducer-14nm" ref="nofollow noopener noreferrer">Turning your React Component into a Finite State Machine - DEV</a> - çŠ¶æ€æœºå®æˆ˜æ•™ç¨‹</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€å¤§æ•°æ® & AIã€‘Flink Agents æºç è§£è¯» --- (6) --- ActionTask]]></title>    <link>https://juejin.cn/post/7594266018304786495</link>    <guid>https://juejin.cn/post/7594266018304786495</guid>    <pubDate>2026-01-12T12:58:59.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594266018304786495" data-draft-id="7593358143691210815" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€å¤§æ•°æ® &amp; AIã€‘Flink Agents æºç è§£è¯» --- (6) --- ActionTask"/> <meta itemprop="keywords" content="ç®—æ³•,äººå·¥æ™ºèƒ½,æœºå™¨å­¦ä¹ "/> <meta itemprop="datePublished" content="2026-01-12T12:58:59.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç½—è¥¿çš„æ€è€ƒ"/> <meta itemprop="url" content="https://juejin.cn/user/351470467691175"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€å¤§æ•°æ® &amp; AIã€‘Flink Agents æºç è§£è¯» --- (6) --- ActionTask
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/351470467691175/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç½—è¥¿çš„æ€è€ƒ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-12T12:58:59.000Z" title="Mon Jan 12 2026 12:58:59 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ã€å¤§æ•°æ® &amp; AIã€‘Flink Agents æºç è§£è¯» --- (6) --- ActionTask</h2>
<ul>
<li>
<p><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">0x00 æ¦‚è¦</a></p>
</li>
<li>
<p><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">0x01 åŸºç¡€çŸ¥è¯†</a></p>
<ul>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">1.1 ç›¸å…³ç»„ä»¶</a></li>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">1.2 ActionTask</a></li>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">1.3 PythonActionTask</a></li>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">1.4 PythonGeneratorActionTask</a></li>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">1.5 JavaActionTask</a></li>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">1.6 ActionTaskResult ç»“æ„</a></li>
</ul>
</li>
<li>
<p><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">0x02 ActionTask åˆ‡åˆ†æœºåˆ¶</a></p>
<ul>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">2.1 åˆ‡åˆ†æ–¹å¼</a></li>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">2.2 å®ç°ç»†èŠ‚</a></li>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">2.3 å…³é”®ç‚¹</a></li>
</ul>
</li>
</ul>
<h3 data-id="heading-1">0x00 æ¦‚è¦</h3>
<p>ActionTask æ˜¯ Action æ‰§è¡Œçš„åŸºæœ¬å•ä½ï¼Œä»£è¡¨ä¸€ä¸ªå¯æ‰§è¡Œçš„ä»»åŠ¡å—ã€‚ä¸€ä¸ªå®Œæ•´çš„ Action å¯èƒ½ä¼šè¢«åˆ‡åˆ†æˆå¤šä¸ª ActionTask æ¥æ‰§è¡Œã€‚ActionTask åœ¨æ•´ä½“æµç¨‹çš„ä½ç½®å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-css" lang="css">ActionÂ <span class="hljs-selector-tag">Code</span>Â â†’Â AgentÂ â†’Â AgentPlanÂ â†’Â ActionExecutionOperatorÂ â†’Â ActionTaskÂ â†’Â FlinkÂ Runtime
</code></pre>
<h3 data-id="heading-2">0x01 åŸºç¡€çŸ¥è¯†</h3>
<p>ActionTask æ˜¯ Action æ‰§è¡Œè¿‡ç¨‹ä¸­çš„ä¸€ä¸ªç‰‡æ®µï¼Œç”¨äºæ”¯æŒå¤æ‚çš„æ‰§è¡Œé€»è¾‘ï¼ˆå¦‚å¼‚æ­¥å¤„ç†ï¼‰ï¼Œå¯¹åº”å…³ç³»å¦‚ä¸‹ï¼š</p>
<ul>
<li>ä¸€ä¸ª Action å¯¹åº”ä¸€ä¸ªå‡½æ•°</li>
</ul>
<p>åœ¨ AgentPlan ä¸­ï¼Œæ¯ä¸ª Action åŒ…å«ä¸€ä¸ªæ‰§è¡Œå‡½æ•° (exec)ï¼Œé€šå¸¸æ˜¯ PythonFunction æˆ– JavaFunctionï¼Œä¾‹å¦‚åœ¨ tool_call_action.py ä¸­ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">TOOL_CALL_ACTION</span>Â =Â ActionÂ (
Â Â Â Â <span class="hljs-attr">name</span>=<span class="hljs-string">"tool_call_action"</span>,
Â Â Â Â <span class="hljs-attr">exec</span>=PythonFunction.from_callableÂ (process_tool_request),Â //Â ä¸€ä¸ªå‡½æ•°
Â Â Â Â <span class="hljs-attr">listen_event_types</span>=[...]
)
</code></pre>
<ul>
<li>
<p>ä¸€ä¸ª Action å¯èƒ½äº§ç”Ÿå¤šä¸ª ActionTask</p>
<ul>
<li>ActionTask æ˜¯ Action çš„æ‰§è¡Œæ—¶è¡¨ç¤ºï¼Œå¯ä»¥çœ‹ä½œæ˜¯ Action çš„ â€œæ‰§è¡Œç‰‡æ®µâ€</li>
<li>ä¸€ä¸ª Action å¯èƒ½åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­è¢«æ‹†åˆ†ä¸ºå¤šä¸ª ActionTaskï¼Œç‰¹åˆ«æ˜¯åœ¨å¤„ç†å¼‚æ­¥æ“ä½œæ—¶</li>
</ul>
</li>
</ul>
<h4 data-id="heading-3">1.1 ç›¸å…³ç»„ä»¶</h4>
<p>ActionTask æ¦‚å¿µçš„ç›¸å…³ç»„ä»¶å¦‚ä¸‹</p>

































<table><thead><tr><th>ç»„ä»¶</th><th>æ ¸å¿ƒåŠŸèƒ½</th></tr></thead><tbody><tr><td>JavaActionTask</td><td>æ‰§è¡Œ Java å‡½æ•°</td></tr><tr><td>PythonActionTask</td><td>æ‰§è¡Œ Python å‡½æ•°ï¼Œæ”¯æŒå¼‚æ­¥ / ç”Ÿæˆå™¨æ¨¡å¼ï¼Œæ¡¥æ¥ Java ä¸ Python ç”Ÿæ€</td></tr><tr><td>LocalRunnerContext</td><td>æœ¬åœ°æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œæ¨¡æ‹Ÿ Flink åˆ†å¸ƒå¼çŠ¶æ€ï¼Œç®¡ç†äº‹ä»¶é˜Ÿåˆ—ã€key éš”ç¦»çŠ¶æ€ã€èµ„æºè®¿é—®</td></tr><tr><td>ActionTaskResult</td><td>åŠ¨ä½œæ‰§è¡Œç»“æœè½½ä½“ï¼ŒåŒ…å«æ˜¯å¦å®Œæˆã€è¾“å‡ºäº‹ä»¶ã€ä¸‹ä¸€ä¸ªå¾…æ‰§è¡Œä»»åŠ¡ï¼ˆè‹¥æœ‰ï¼‰</td></tr><tr><td>PythonGeneratorActionTask</td><td>å¤„ç† Python ç”Ÿæˆå™¨çš„å¼‚æ­¥ä»»åŠ¡ï¼ŒæŒç»­æ‰§è¡Œç›´åˆ°å®Œæˆæ‰€æœ‰å¼‚æ­¥æ“ä½œ</td></tr><tr><td>Tool ç›¸å…³æœºåˆ¶</td><td>æ”¯æŒè£…é¥°å™¨ï¼ˆ@toolï¼‰ã€add_resource ç­‰æ–¹å¼æ³¨å†Œå·¥å…·ï¼Œé€šè¿‡ TOOL_CALL_ACTION è§¦å‘æ‰§è¡Œ</td></tr></tbody></table>
<p>åœ¨ç³»ç»Ÿä¸­çš„æ¶æ„å¦‚ä¸‹</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3bf76ecdadc64274a6a2996c96ab7356~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg572X6KW_55qE5oCd6ICD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768827538&amp;x-signature=H365YYGruEb7uUZNOtwAvTCGsJ4%3D" alt="flink-6-1" loading="lazy"/></p>
<p>flink-6-1</p>
<h4 data-id="heading-4">1.2 ActionTask</h4>
<p>æˆ‘ä»¬æ¥ä¸‹æ¥çœ‹çœ‹ ActionTask çš„å…·ä½“å®ç°ã€‚</p>
<p>ActionTask æ˜¯åŸºç±»ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
Â *Â ThisÂ classÂ representsÂ aÂ taskÂ relatedÂ toÂ theÂ executionÂ ofÂ anÂ actionÂ inÂ {<span class="hljs-doctag">@link</span>
Â *Â ActionExecutionOperator}.
Â *
Â *Â &lt;p&gt;AnÂ actionÂ isÂ splitÂ intoÂ multipleÂ codeÂ blocks,Â andÂ eachÂ codeÂ blockÂ isÂ representedÂ byÂ anÂ {<span class="hljs-doctag">@code</span>
Â *Â ActionTask}.Â YouÂ canÂ callÂ {<span class="hljs-doctag">@link</span>Â #invoke()}Â toÂ executeÂ aÂ codeÂ blockÂ andÂ obtainÂ invokeÂ result
Â *Â {<span class="hljs-doctag">@link</span>Â ActionTaskResult}.Â IfÂ theÂ actionÂ containsÂ additionalÂ codeÂ blocks,Â youÂ canÂ obtainÂ theÂ next
Â *Â {<span class="hljs-doctag">@code</span>Â ActionTask}Â viaÂ {<span class="hljs-doctag">@link</span>Â ActionTaskResult#getGeneratedActionTask()}Â andÂ continueÂ executing
Â *Â it.
Â */</span>
<span class="hljs-keyword">public</span>Â <span class="hljs-keyword">abstract</span>Â <span class="hljs-keyword">class</span>Â <span class="hljs-title class_">ActionTask</span>Â {
Â Â Â Â <span class="hljs-keyword">protected</span>Â <span class="hljs-keyword">final</span>Â ObjectÂ key;
Â Â Â Â <span class="hljs-keyword">protected</span>Â <span class="hljs-keyword">final</span>Â EventÂ event;
Â Â Â Â <span class="hljs-keyword">protected</span>Â <span class="hljs-keyword">final</span>Â ActionÂ action;
Â Â Â Â <span class="hljs-comment">/**
Â Â Â Â Â *Â SinceÂ RunnerContextImplÂ containsÂ referencesÂ toÂ theÂ OperatorÂ andÂ state,Â itÂ shouldÂ notÂ be
Â Â Â Â Â *Â serializedÂ andÂ includedÂ inÂ theÂ stateÂ withÂ ActionTask.Â Instead,Â weÂ shouldÂ checkÂ ifÂ aÂ valid
Â Â Â Â Â *Â RunnerContextÂ existsÂ beforeÂ eachÂ ActionTaskÂ invocationÂ andÂ createÂ aÂ newÂ oneÂ ifÂ necessary.
Â Â Â Â Â */</span>
Â Â Â Â <span class="hljs-keyword">protected</span>Â <span class="hljs-keyword">transient</span>Â RunnerContextImplÂ runnerContext;

Â Â Â Â <span class="hljs-keyword">public</span>Â <span class="hljs-title function_">ActionTask</span><span class="hljs-params">(ObjectÂ key,Â EventÂ event,Â ActionÂ action)</span>Â {
Â Â Â Â Â Â Â Â <span class="hljs-built_in">this</span>.keyÂ =Â key;
Â Â Â Â Â Â Â Â <span class="hljs-built_in">this</span>.eventÂ =Â event;
Â Â Â Â Â Â Â Â <span class="hljs-built_in">this</span>.actionÂ =Â action;
Â Â Â Â }

Â Â Â Â <span class="hljs-keyword">public</span>Â RunnerContextImplÂ <span class="hljs-title function_">getRunnerContext</span><span class="hljs-params">()</span>Â {
Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â runnerContext;
Â Â Â Â }

Â Â Â Â <span class="hljs-keyword">public</span>Â <span class="hljs-keyword">void</span>Â <span class="hljs-title function_">setRunnerContext</span><span class="hljs-params">(RunnerContextImplÂ runnerContext)</span>Â {
Â Â Â Â Â Â Â Â <span class="hljs-built_in">this</span>.runnerContextÂ =Â runnerContext;
Â Â Â Â }

Â Â Â Â <span class="hljs-keyword">public</span>Â ObjectÂ <span class="hljs-title function_">getKey</span><span class="hljs-params">()</span>Â {
Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â key;
Â Â Â Â }

Â Â Â Â <span class="hljs-comment">/**Â InvokesÂ theÂ actionÂ task.Â */</span>
Â Â Â Â <span class="hljs-keyword">public</span>Â <span class="hljs-keyword">abstract</span>Â ActionTaskResultÂ <span class="hljs-title function_">invoke</span><span class="hljs-params">()</span>Â <span class="hljs-keyword">throws</span>Â Exception;

Â Â Â Â <span class="hljs-keyword">public</span>Â <span class="hljs-keyword">class</span>Â <span class="hljs-title class_">ActionTaskResult</span>Â {
Â Â Â Â Â Â Â Â <span class="hljs-keyword">private</span>Â <span class="hljs-keyword">final</span>Â <span class="hljs-type">boolean</span>Â finished;
Â Â Â Â Â Â Â Â <span class="hljs-keyword">private</span>Â <span class="hljs-keyword">final</span>Â List&lt;Event&gt;Â outputEvents;
Â Â Â Â Â Â Â Â <span class="hljs-keyword">private</span>Â <span class="hljs-keyword">final</span>Â Optional&lt;ActionTask&gt;Â generatedActionTaskOpt;

Â Â Â Â Â Â Â Â <span class="hljs-keyword">public</span>Â <span class="hljs-title function_">ActionTaskResult</span><span class="hljs-params">(
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-type">boolean</span>Â finished,
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â List&lt;Event&gt;Â outputEvents,
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-meta">@Nullable</span>Â ActionTaskÂ generatedActionTask)</span>Â {
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-built_in">this</span>.finishedÂ =Â finished;
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-built_in">this</span>.outputEventsÂ =Â outputEvents;
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-built_in">this</span>.generatedActionTaskOptÂ =Â Optional.ofNullable(generatedActionTask);
Â Â Â Â Â Â Â Â }

Â Â Â Â Â Â Â Â <span class="hljs-keyword">public</span>Â <span class="hljs-type">boolean</span>Â <span class="hljs-title function_">isFinished</span><span class="hljs-params">()</span>Â {
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â finished;
Â Â Â Â Â Â Â Â }

Â Â Â Â Â Â Â Â <span class="hljs-keyword">public</span>Â List&lt;Event&gt;Â <span class="hljs-title function_">getOutputEvents</span><span class="hljs-params">()</span>Â {
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â outputEvents;
Â Â Â Â Â Â Â Â }

Â Â Â Â Â Â Â Â <span class="hljs-keyword">public</span>Â Optional&lt;ActionTask&gt;Â <span class="hljs-title function_">getGeneratedActionTask</span><span class="hljs-params">()</span>Â {
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â generatedActionTaskOpt;
Â Â Â Â Â Â Â Â }
Â Â Â Â }
}
</code></pre>
<h4 data-id="heading-5">1.3 PythonActionTask</h4>
<p>PythonActionTask æ˜¯ä¸€ä¸ªä¸“é—¨ç”¨äºæ‰§è¡Œ Python åŠ¨ä½œä»»åŠ¡çš„ç‰¹æ®Š ActionTask å®ç°ã€‚å®ƒçš„ä¸»è¦ä½œç”¨åŒ…æ‹¬ï¼š</p>
<ul>
<li>æ‰§è¡Œ Python å‡½æ•°ï¼šè°ƒç”¨ Python å‡½æ•°æ¥å¤„ç†äº‹ä»¶</li>
<li>å¤„ç†å¼‚æ­¥æ“ä½œï¼šæ”¯æŒ Python ä¸­çš„å¼‚æ­¥æ“ä½œï¼Œé€šè¿‡ç”Ÿæˆå™¨æœºåˆ¶å®ç°</li>
<li>æ¡¥æ¥ Java å’Œ Pythonï¼šä½œä¸º Java ç«¯å’Œ Python ç«¯ä¹‹é—´çš„æ¡¥æ¢ï¼Œåè°ƒä¸¤è€…é—´çš„äº¤äº’</li>
</ul>
<h5 data-id="heading-6">1.3.1 å®šä¹‰</h5>
<p>PythonActionTask å¯¹åº”ä¸€ä¸ª Python å‡½æ•°ï¼ˆæ›´å‡†ç¡®åœ°è¯´æ˜¯ä¸€ä¸ª PythonFunction å¯¹è±¡ï¼‰ï¼Œè¿™ä¸ªå‡½æ•°æ˜¯åœ¨åˆ›å»º Action æ—¶å®šä¹‰çš„ï¼Œå­˜å‚¨åœ¨ action.getExec() ä¸­ã€‚ä½†PythonActionTask ä¸ä»…ä»…æ˜¯ç®€å•çš„å‡½æ•°å°è£…ï¼Œè€Œæ˜¯ä½¿å…¶èƒ½å¤Ÿåœ¨ Flink Agents æ¡†æ¶ä¸­æ­£ç¡®æ‰§è¡Œï¼Œå¹¶æ”¯æŒæ¡†æ¶æ‰€éœ€çš„é«˜çº§ç‰¹æ€§ã€‚å®ƒæä¾›äº†ä»¥ä¸‹é™„åŠ ä»·å€¼ï¼š</p>
<ul>
<li>å¤æ‚é€»è¾‘ï¼šPythonActionTask ä¸ä»…ä»…æ˜¯æ‰§è¡Œå‡½æ•°ï¼Œè¿˜è´Ÿè´£å¤„ç†å¤æ‚çš„äº¤äº’é€»è¾‘</li>
<li>æ‰§è¡Œç¯å¢ƒç®¡ç†ï¼šä¸ºå‡½æ•°æä¾›åˆé€‚çš„æ‰§è¡Œä¸Šä¸‹æ–‡</li>
<li>å¼‚æ­¥æ”¯æŒï¼šé€šè¿‡ç”Ÿæˆå™¨æœºåˆ¶æ”¯æŒé•¿æ—¶é—´è¿è¡Œçš„æ“ä½œ</li>
<li>äº‹ä»¶å¤„ç†ï¼šç®¡ç†å’Œä¼ é€’æ‰§è¡Œè¿‡ç¨‹ä¸­äº§ç”Ÿçš„äº‹ä»¶</li>
<li>çŠ¶æ€ç»´æŠ¤ï¼šåœ¨æ•´ä¸ªæ‰§è¡Œè¿‡ç¨‹ä¸­ç»´æŠ¤å¿…è¦çš„çŠ¶æ€ä¿¡æ¯</li>
</ul>
<p>PythonActionTask åœ¨ç³»ç»Ÿæ¶æ„ä¸­çš„ä½ç½®å’Œäº¤äº’å…³ç³»å¦‚ä¸‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c577d3b81d3c409581a6693e87a3c0f5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg572X6KW_55qE5oCd6ICD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768827538&amp;x-signature=KBvzAsiCnTn%2FKt4y5P2y%2BhoB0vs%3D" alt="Flink-6-2" loading="lazy"/></p>
<p>Flink-6-2</p>
<p>ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span>Â <span class="hljs-keyword">class</span>Â <span class="hljs-title class_">PythonActionTask</span>Â <span class="hljs-keyword">extends</span>Â <span class="hljs-title class_">ActionTask</span>Â {
Â Â Â Â <span class="hljs-keyword">public</span>Â ActionTaskResultÂ <span class="hljs-title function_">invoke</span><span class="hljs-params">()</span>Â <span class="hljs-keyword">throws</span>Â ExceptionÂ {
Â Â Â Â Â Â Â Â <span class="hljs-type">PythonActionExecutor</span>Â <span class="hljs-variable">pythonActionExecutor</span>Â <span class="hljs-operator">=</span>Â getPythonActionExecutor();

Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â è¿™é‡Œæ‰§è¡Œå®é™…çš„Â PythonÂ å‡½æ•°</span>
Â Â Â Â Â Â Â Â <span class="hljs-type">String</span>Â <span class="hljs-variable">pythonGeneratorRef</span>Â <span class="hljs-operator">=</span>
Â Â Â Â Â Â Â Â Â Â Â Â pythonActionExecutor.executePythonFunction(
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â (PythonFunction)Â action.getExec(),Â <span class="hljs-comment">//Â &lt;--Â è¿™å°±æ˜¯å¯¹åº”çš„å‡½æ•°</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â (PythonEvent)Â event,
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â runnerContext);

Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â å¤„ç†å¼‚æ­¥æƒ…å†µ</span>
Â Â Â Â Â Â Â Â <span class="hljs-keyword">if</span>Â (pythonGeneratorRefÂ !=Â <span class="hljs-literal">null</span>)Â {
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â å¦‚æœå‡½æ•°è¿”å›äº†ç”Ÿæˆå™¨ï¼Œåˆ™åˆ›å»ºæ–°çš„ä»»åŠ¡ç»§ç»­æ‰§è¡Œ</span>
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-type">ActionTask</span>Â <span class="hljs-variable">tempGeneratedActionTask</span>Â <span class="hljs-operator">=</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">new</span>Â <span class="hljs-title class_">PythonGeneratorActionTask</span>(key,Â event,Â action,Â pythonGeneratorRef);
Â Â Â Â Â Â Â Â Â Â Â Â tempGeneratedActionTask.setRunnerContext(runnerContext);
Â Â Â Â Â Â Â Â <span class="hljs-keyword">if</span>Â (pythonGeneratorRefÂ !=Â <span class="hljs-literal">null</span>)Â {
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â å¦‚æœå‡½æ•°è¿”å›äº†ç”Ÿæˆå™¨ï¼Œåˆ™åˆ›å»ºæ–°çš„ä»»åŠ¡ç»§ç»­æ‰§è¡Œ</span>
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-type">ActionTask</span>Â <span class="hljs-variable">tempGeneratedActionTask</span>Â <span class="hljs-operator">=</span>Â 
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">new</span>Â <span class="hljs-title class_">PythonGeneratorActionTask</span>(key,Â event,Â action,Â pythonGeneratorRef);
Â Â Â Â Â Â Â Â Â Â Â Â tempGeneratedActionTask.setRunnerContext(runnerContext);
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â tempGeneratedActionTask.invoke();
Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â å¦åˆ™è¡¨ç¤ºå‡½æ•°å·²æ‰§è¡Œå®Œæ¯•</span>
Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â <span class="hljs-keyword">new</span>Â <span class="hljs-title class_">ActionTaskResult</span>(
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-literal">true</span>,Â 
Â Â Â Â Â Â Â Â Â Â Â Â runnerContext.drainEvents(event.getSourceTimestamp()),Â 
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-literal">null</span>);Â Â Â Â Â Â Â Â Â Â Â Â 
</code></pre>
<h5 data-id="heading-7">1.3.2 PythonActionTask ä¸ Function çš„å…³ç³»</h5>
<p>PythonActionTask ä¸ Function çš„å…³ç³»çš„å¦‚ä¸‹</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0a5933ec36124a63a82fba75c92a82d5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg572X6KW_55qE5oCd6ICD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768827538&amp;x-signature=enz0UfF1seqIAu%2BJGgzspiA%2Fq%2BI%3D" alt="Flink-6-3" loading="lazy"/></p>
<p>Flink-6-3</p>
<h5 data-id="heading-8">1.3.3 ä¸å…¶ä»–ç»„ä»¶çš„å…³ç³»</h5>
<p>PythonActionTask ä¸å…¶ä»–ç»„ä»¶çš„å…³ç³»å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/92e8f4491b454fdc9cce9c978343470a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg572X6KW_55qE5oCd6ICD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768827538&amp;x-signature=D%2BYaEcZl3xoSLE1WOOhuzXFZNL8%3D" alt="Flink-6-4" loading="lazy"/></p>
<p>Flink-6-4</p>
<h5 data-id="heading-9">1.3.4 è°ƒç”¨æµç¨‹</h5>
<p>PythonActionTask.invoke() æµç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå…¶å…³é”®ç‰¹ç‚¹ä¸ºï¼š</p>
<ul>
<li>å¼‚æ­¥æ”¯æŒï¼šé€šè¿‡ Python ç”Ÿæˆå™¨æœºåˆ¶æ”¯æŒé•¿æ—¶é—´è¿è¡Œçš„æ“ä½œ</li>
<li>çŠ¶æ€ç®¡ç†ï¼šä¸ ActionExecutionOperator åä½œç®¡ç†æ‰§è¡ŒçŠ¶æ€</li>
<li>é”™è¯¯å¤„ç†ï¼šé€‚å½“åœ°å¤„ç† Python æ‰§è¡Œè¿‡ç¨‹ä¸­å¯èƒ½å‡ºç°çš„å¼‚å¸¸</li>
<li>å†…å­˜ç®¡ç†ï¼šä¸ RunnerContext é›†æˆï¼Œç®¡ç†çŸ­æœŸè®°å¿†å’Œå…¶ä»–çŠ¶æ€</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ede850e71cc143118f373dcd4e35634f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg572X6KW_55qE5oCd6ICD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768827538&amp;x-signature=aQhKHKhwF%2BVC2ykvD0%2B7i1d16PU%3D" alt="Flink-6-5" loading="lazy"/></p>
<p>Flink-6-5</p>
<p>PythonActionTask åœ¨æ•´ä¸ªç³»ç»Ÿä¸­èµ·åˆ°äº†è‡³å…³é‡è¦çš„ä½œç”¨ï¼Œå®ƒä½¿å¾— Flink Agents èƒ½å¤Ÿæ— ç¼é›†æˆ Python ç”Ÿæ€ç³»ç»Ÿä¸­çš„å„ç§ AI å·¥å…·å’Œåº“ï¼ŒåŒæ—¶ä¿æŒä¸ Flink æµå¤„ç†å¼•æ“çš„è‰¯å¥½é›†æˆã€‚</p>
<h4 data-id="heading-10">1.4 PythonGeneratorActionTask</h4>
<p>PythonGeneratorActionTask æ˜¯ PythonActionTask çš„æ´¾ç”Ÿç±»ã€‚</p>
<ul>
<li>å½“ Python å‡½æ•°ä¸­ä½¿ç”¨äº† yield æˆ–å¼‚æ­¥æ“ä½œæ—¶ï¼ŒPython æ‰§è¡Œå™¨ä¼šæ£€æµ‹åˆ°è¿™ç§æƒ…å†µå¹¶è¿”å›ä¸€ä¸ª Generator å¼•ç”¨</li>
<li>ç³»ç»Ÿä¼šåˆ›å»º PythonGeneratorActionTask æ¥ç»§ç»­æ‰§è¡Œ</li>
</ul>

<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**Â AnÂ {<span class="hljs-doctag">@link</span>Â ActionTask}Â wrapperÂ aÂ PythonÂ GeneratorÂ toÂ representÂ aÂ codeÂ blockÂ inÂ PythonÂ action.Â */</span>
<span class="hljs-keyword">public</span>Â <span class="hljs-keyword">class</span>Â <span class="hljs-title class_">PythonGeneratorActionTask</span>Â <span class="hljs-keyword">extends</span>Â <span class="hljs-title class_">PythonActionTask</span>Â {
Â Â Â Â <span class="hljs-keyword">private</span>Â <span class="hljs-keyword">final</span>Â StringÂ pythonGeneratorRef;

Â Â Â Â <span class="hljs-keyword">public</span>Â <span class="hljs-title function_">PythonGeneratorActionTask</span><span class="hljs-params">(
Â Â Â Â Â Â Â Â Â Â Â Â ObjectÂ key,Â EventÂ event,Â ActionÂ action,Â StringÂ pythonGeneratorRef)</span>Â {
Â Â Â Â Â Â Â Â <span class="hljs-built_in">super</span>(key,Â event,Â action);
Â Â Â Â Â Â Â Â <span class="hljs-built_in">this</span>.pythonGeneratorRefÂ =Â pythonGeneratorRef;
Â Â Â Â }

Â Â Â Â <span class="hljs-meta">@Override</span>
Â Â Â Â <span class="hljs-keyword">public</span>Â ActionTaskResultÂ <span class="hljs-title function_">invoke</span><span class="hljs-params">()</span>Â {
Â Â Â Â Â Â Â Â <span class="hljs-type">boolean</span>Â <span class="hljs-variable">finished</span>Â <span class="hljs-operator">=</span>Â getPythonActionExecutor().callPythonGenerator(pythonGeneratorRef);
Â Â Â Â Â Â Â Â <span class="hljs-type">ActionTask</span>Â <span class="hljs-variable">generatedActionTask</span>Â <span class="hljs-operator">=</span>Â finishedÂ ?Â <span class="hljs-literal">null</span>Â :Â <span class="hljs-built_in">this</span>;
Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â <span class="hljs-keyword">new</span>Â <span class="hljs-title class_">ActionTaskResult</span>(
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â finished,
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â runnerContext.drainEvents(event.getSourceTimestamp()),
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â generatedActionTask);
Â Â Â Â }
}
</code></pre>
<h4 data-id="heading-11">1.5 JavaActionTask</h4>
<p>JavaActionTask æ‰§è¡Œ Java ActionTaskã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
Â *Â AÂ specialÂ {<span class="hljs-doctag">@link</span>Â ActionTask}Â designedÂ toÂ executeÂ aÂ JavaÂ actionÂ task.
Â *
Â *Â &lt;p&gt;NoteÂ thatÂ JavaÂ actionÂ currentlyÂ doÂ notÂ supportÂ asynchronousÂ execution.Â AsÂ aÂ result,Â aÂ Java
Â *Â actionÂ taskÂ willÂ beÂ invokedÂ onlyÂ once.
Â */</span>
<span class="hljs-keyword">public</span>Â <span class="hljs-keyword">class</span>Â <span class="hljs-title class_">JavaActionTask</span>Â <span class="hljs-keyword">extends</span>Â <span class="hljs-title class_">ActionTask</span>Â {

Â Â Â Â <span class="hljs-keyword">private</span>Â <span class="hljs-keyword">final</span>Â ClassLoaderÂ userCodeClassLoader;

Â Â Â Â <span class="hljs-keyword">public</span>Â <span class="hljs-title function_">JavaActionTask</span><span class="hljs-params">(ObjectÂ key,Â EventÂ event,Â ActionÂ action,Â ClassLoaderÂ userCodeClassLoader)</span>Â {
Â Â Â Â Â Â Â Â <span class="hljs-built_in">super</span>(key,Â event,Â action);
Â Â Â Â Â Â Â Â checkState(action.getExec()Â <span class="hljs-keyword">instanceof</span>Â JavaFunction);
Â Â Â Â Â Â Â Â <span class="hljs-built_in">this</span>.userCodeClassLoaderÂ =Â userCodeClassLoader;
Â Â Â Â }

Â Â Â Â <span class="hljs-meta">@Override</span>
Â Â Â Â <span class="hljs-keyword">public</span>Â ActionTaskResultÂ <span class="hljs-title function_">invoke</span><span class="hljs-params">()</span>Â <span class="hljs-keyword">throws</span>Â ExceptionÂ {
Â Â Â Â Â Â Â Â runnerContext.checkNoPendingEvents();
Â Â Â Â Â Â Â Â <span class="hljs-type">ClassLoader</span>Â <span class="hljs-variable">cl</span>Â <span class="hljs-operator">=</span>Â Thread.currentThread().getContextClassLoader();
Â Â Â Â Â Â Â Â <span class="hljs-keyword">try</span>Â {
Â Â Â Â Â Â Â Â Â Â Â Â Thread.currentThread().setContextClassLoader(userCodeClassLoader);
Â Â Â Â Â Â Â Â Â Â Â Â action.getExec().call(event,Â runnerContext);
Â Â Â Â Â Â Â Â }Â <span class="hljs-keyword">finally</span>Â {
Â Â Â Â Â Â Â Â Â Â Â Â Thread.currentThread().setContextClassLoader(cl);
Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â <span class="hljs-keyword">new</span>Â <span class="hljs-title class_">ActionTaskResult</span>(
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-literal">true</span>,Â runnerContext.drainEvents(event.getSourceTimestamp()),Â <span class="hljs-literal">null</span>);
Â Â Â Â }
}
</code></pre>
<h4 data-id="heading-12">1.6 ActionTaskResult ç»“æ„</h4>
<p>æ¯æ¬¡æ‰§è¡Œ ActionTask åä¼šè¿”å›ä¸€ä¸ª ActionTaskResult å¯¹è±¡ï¼š</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">public</span>Â <span class="hljs-keyword">class</span>Â <span class="hljs-title class_">ActionTaskResult</span>Â {
Â Â Â Â <span class="hljs-keyword">private</span>Â <span class="hljs-keyword">final</span>Â booleanÂ finished;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â æ˜¯å¦å·²å®Œæˆ</span>
Â Â Â Â <span class="hljs-keyword">private</span>Â <span class="hljs-keyword">final</span>Â <span class="hljs-type">List</span>&lt;<span class="hljs-type">Event</span>&gt;Â outputEvents;Â Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â è¾“å‡ºäº‹ä»¶</span>
Â Â Â Â <span class="hljs-keyword">private</span>Â <span class="hljs-keyword">final</span>Â <span class="hljs-type">Optional</span>&lt;<span class="hljs-type">ActionTask</span>&gt;Â generatedActionTaskOpt;Â <span class="hljs-comment">//Â ä¸‹ä¸€ä¸ªÂ ActionTaskï¼ˆå¦‚æœæœ‰ï¼‰</span>
<span class="hljs-comment">//Â ...</span>
}
</code></pre>
<h3 data-id="heading-13">0x02 ActionTask åˆ‡åˆ†æœºåˆ¶</h3>
<p>åœ¨ Flink Agents æ¡†æ¶ä¸­ï¼ŒActionTask çš„åˆ‡åˆ†æ˜¯ä¸ºäº†æ”¯æŒé•¿æ—¶é—´è¿è¡Œçš„æ“ä½œå’Œå¼‚æ­¥æ‰§è¡Œã€‚åˆ‡åˆ†çš„å¥½å¤„å¦‚ä¸‹ï¼š</p>
<ul>
<li>é¿å…é˜»å¡ï¼šé•¿æ—¶é—´è¿è¡Œçš„æ“ä½œä¸ä¼šé˜»å¡æ•´ä¸ªæ“ä½œç¬¦</li>
<li>æé«˜å¹¶å‘æ€§ï¼šå…è®¸å…¶ä»– key çš„ä»»åŠ¡åŒæ—¶æ‰§è¡Œ</li>
<li>å®¹é”™èƒ½åŠ›ï¼šæ¯ä¸ª ActionTask å¯ä»¥å•ç‹¬å¤±è´¥å’Œæ¢å¤</li>
<li>èµ„æºç®¡ç†ï¼šæ›´å¥½åœ°ç®¡ç†å†…å­˜å’Œå…¶ä»–èµ„æº</li>
</ul>
<p>è¿™ç§åˆ‡åˆ†æœºåˆ¶ä½¿å¾— Flink Agents èƒ½å¤Ÿé«˜æ•ˆåœ°å¤„ç†å¤æ‚çš„ï¼Œé•¿æ—¶é—´è¿è¡Œçš„ AI Agent ä»»åŠ¡ï¼ŒåŒæ—¶ä¿æŒç³»ç»Ÿçš„å“åº”çš„ç¨³å®šæ€§ã€‚</p>
<h4 data-id="heading-14">2.1 åˆ‡åˆ†æ–¹å¼</h4>
<p>ä¸»è¦åˆ‡åˆ†æ–¹å¼å¦‚ä¸‹ï¼š</p>
<p>æ¦‚å¿µä¸Šçš„æ‹†åˆ†</p>
<ul>
<li>ä¸€ä¸ª Action åœ¨æ¦‚å¿µä¸Šå¯è¢«æ‹†æˆå¤šä¸ªé¡ºåºæ‰§è¡Œçš„ä»£ç å—ï¼Œæ¯ä¸ªä»£ç å—æˆä¸ºä¸€ä¸ª ActionTask å®ä¾‹ã€‚</li>
<li>è®¾è®¡ç›®çš„åœ¨äºç»†ç²’åº¦æ§åˆ¶ï¼Œå°¤å…¶é€‚ç”¨äºå¼‚æ­¥æ“ä½œã€‚</li>
</ul>
<p>åˆ›å»ºä¸æµç¨‹</p>
<ul>
<li>åˆå§‹è§¦å‘ï¼šActionExecutionOperator é€šè¿‡ createActionTask() ä¸ºæ¯ä¸ªåŠ¨ä½œç”Ÿæˆé¦–ä¸ª ActionTaskã€‚</li>
<li>æ‰§è¡Œè¿‡ç¨‹ï¼šè‹¥åŠ¨ä½œäº§ç”Ÿç”Ÿæˆå™¨ï¼ˆå¼‚æ­¥ï¼‰ï¼Œå¯å†å®ä¾‹åŒ–æ–°çš„ ActionTask ç»§ç»­åç»­ä»£ç å—ã€‚</li>
</ul>

<pre><code class="hljs language-vbnet" lang="vbnet">Â Â Â Â /**
Â Â Â Â Â *Â ProcessesÂ anÂ incomingÂ <span class="hljs-keyword">event</span>Â <span class="hljs-keyword">for</span>Â theÂ givenÂ <span class="hljs-keyword">key</span>Â <span class="hljs-built_in">and</span>Â mayÂ submitÂ aÂ <span class="hljs-built_in">new</span>Â mail
Â Â Â Â Â *Â `tryProcessActionTaskForKey`Â <span class="hljs-keyword">to</span>Â <span class="hljs-keyword">continue</span>Â processing.
Â Â Â Â Â */
Â Â Â Â <span class="hljs-keyword">private</span>Â voidÂ processEvent(<span class="hljs-type">Object</span>Â <span class="hljs-keyword">key</span>,Â <span class="hljs-keyword">Event</span>Â <span class="hljs-keyword">event</span>)Â throwsÂ ExceptionÂ {
Â Â Â Â Â Â Â Â notifyEventProcessed(<span class="hljs-keyword">event</span>);

Â Â Â Â Â Â Â Â <span class="hljs-type">boolean</span>Â isInputEventÂ =Â EventUtil.isInputEvent(<span class="hljs-keyword">event</span>);
Â Â Â Â Â Â Â Â <span class="hljs-keyword">if</span>Â (EventUtil.isOutputEvent(<span class="hljs-keyword">event</span>))Â {
Â Â Â Â Â Â Â Â }Â <span class="hljs-keyword">else</span>Â {
Â Â Â Â Â Â Â Â Â Â Â Â //Â WeÂ <span class="hljs-keyword">then</span>Â obtainÂ theÂ triggeredÂ actionÂ <span class="hljs-built_in">and</span>Â addÂ ActionTasksÂ <span class="hljs-keyword">to</span>Â theÂ waitingÂ processing
Â Â Â Â Â Â Â Â Â Â Â Â //Â queue.
Â Â Â Â Â Â Â Â Â Â Â Â List&lt;Action&gt;Â triggerActionsÂ =Â getActionsTriggeredBy(<span class="hljs-keyword">event</span>);
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">if</span>Â (triggerActionsÂ !=Â nullÂ &amp;&amp;Â !triggerActions.isEmpty())Â {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">for</span>Â (ActionÂ triggerActionÂ :Â triggerActions)Â {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â actionTasksKState.add(createActionTask(<span class="hljs-keyword">key</span>,Â triggerAction,Â <span class="hljs-keyword">event</span>));
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â }
Â Â Â Â }
</code></pre>
<p>createActionTask ä»£ç å¦‚ä¸‹ã€‚</p>
<pre><code class="hljs language-vbnet" lang="vbnet">Â Â Â Â <span class="hljs-keyword">private</span>Â ActionTaskÂ createActionTask(<span class="hljs-type">Object</span>Â <span class="hljs-keyword">key</span>,Â ActionÂ action,Â <span class="hljs-keyword">Event</span>Â <span class="hljs-keyword">event</span>)Â {
Â Â Â Â Â Â Â Â <span class="hljs-keyword">if</span>Â (action.getExec()Â instanceofÂ JavaFunction)Â {
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â <span class="hljs-built_in">new</span>Â JavaActionTask(
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">key</span>,Â <span class="hljs-keyword">event</span>,Â action,Â getRuntimeContext().getUserCodeClassLoader());
Â Â Â Â Â Â Â Â }Â <span class="hljs-keyword">else</span>Â <span class="hljs-keyword">if</span>Â (action.getExec()Â instanceofÂ PythonFunction)Â {
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â <span class="hljs-built_in">new</span>Â PythonActionTask(<span class="hljs-keyword">key</span>,Â <span class="hljs-keyword">event</span>,Â action);
Â Â Â Â Â Â Â Â }Â <span class="hljs-keyword">else</span>Â {
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">throw</span>Â <span class="hljs-built_in">new</span>Â IllegalStateException(
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-string">"UnsupportedÂ actionÂ type:Â "</span>Â +Â action.getExec().getClass());
Â Â Â Â Â Â Â Â }
Â Â Â Â }
</code></pre>
<h4 data-id="heading-15">2.2 å®ç°ç»†èŠ‚</h4>
<p>ActionTask.java ä¸­æœ‰å¦‚ä¸‹ï¼Œè¿™æ„å‘³ç€:</p>
<ul>
<li>ä¸€ä¸ª Action å¯èƒ½è¢«æ‹†åˆ†æˆå¤šä¸ªä»£ç å—</li>
<li>æ¯ä¸ªä»£ç å—ç”±ä¸€ä¸ª ActionTask è¡¨ç¤º</li>
<li>é€šè¿‡è°ƒç”¨ invoke () æ‰§è¡Œä»£ç å—å¹¶è·å¾—ç»“æœ</li>
<li>å¦‚æœ Action åŒ…å«æ›´å¤šä»£ç å—ï¼Œå¯ä»¥ä» ActionTaskResult ä¸­è·å–ä¸‹ä¸€ä¸ª ActionTask</li>
</ul>

<pre><code class="hljs language-bash" lang="bash">/**
Â *Â æ­¤ç±»è¡¨ç¤ºåœ¨Â ActionExecutionOperatorÂ ä¸­æ‰§è¡Œçš„åŠ¨ä½œä»»åŠ¡ã€‚
Â *
Â *Â &lt;p&gt;ä¸€ä¸ªåŠ¨ä½œä¼šè¢«æ‹†åˆ†ä¸ºå¤šä¸ªä»£ç å—ï¼Œæ¯ä¸ªä»£ç å—éƒ½ç”±ä¸€ä¸ªÂ ActionTaskÂ è¡¨ç¤ºã€‚
Â *Â å¯ä»¥è°ƒç”¨Â <span class="hljs-comment">#invoke()Â æ¥æ‰§è¡Œä¸€ä¸ªä»£ç å—å¹¶è·å¾—æ‰§è¡Œç»“æœï¼ˆActionTaskResultï¼‰ã€‚</span>
Â *Â å¦‚æœåŠ¨ä½œåŒ…å«é¢å¤–çš„ä»£ç å—ï¼Œå¯é€šè¿‡Â ActionTaskResult<span class="hljs-comment">#getGeneratedActionTask()</span>
Â *Â è·å–ä¸‹ä¸€ä¸ªÂ ActionTaskÂ å¹¶ç»§ç»­æ‰§è¡Œå®ƒã€‚
Â */
</code></pre>
<p>Python é›†æˆï¼ˆPythonActionTask.javaï¼‰</p>
<ul>
<li>å½“ Python å‡½æ•°ä¸­ä½¿ç”¨äº† yield æˆ–å¼‚æ­¥æ“ä½œæ—¶ï¼ŒPython æ‰§è¡Œå™¨ä¼šæ£€æµ‹åˆ°è¿™ç§æƒ…å†µå¹¶è¿”å›ä¸€ä¸ª Generator å¼•ç”¨</li>
<li>ç³»ç»Ÿä¼šåˆ›å»º PythonGeneratorActionTask æ¥ç»§ç»­æ‰§è¡Œ</li>
</ul>
<p>è¿™è¯´æ˜åœ¨å¤„ç†å¼‚æ­¥ Python å‡½æ•°æ—¶ï¼Œä¸€ä¸ª Action å¯èƒ½ä¼šäº§ç”Ÿå¤šä¸ª ActionTaskï¼š</p>
<ul>
<li>åˆå§‹çš„ PythonActionTask</li>
<li>åç»­çš„ PythonGeneratorActionTaskï¼ˆå¦‚æœéœ€è¦ï¼‰</li>
</ul>

<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">/**
Â *Â ä¸“é—¨ç”¨äºæ‰§è¡ŒÂ PythonÂ åŠ¨ä½œä»»åŠ¡çš„ç‰¹æ®ŠÂ ActionTaskã€‚
Â *
Â *Â &lt;p&gt;åœ¨Â PythonÂ ä¸­è¿›è¡Œå¼‚æ­¥æ‰§è¡ŒæœŸé—´ï¼ŒPythonActionTaskÂ å¯ä»¥ç”Ÿæˆä¸€ä¸ª
Â *Â PythonGeneratorActionTaskÂ æ¥ä»£è¡¨åç»­éœ€è¦çš„ä»£ç å—ã€‚
Â */</span>
<span class="hljs-keyword">public</span>Â <span class="hljs-keyword">class</span>Â <span class="hljs-title">PythonActionTask</span>Â <span class="hljs-title">extends</span>Â <span class="hljs-title">ActionTask</span>Â {
Â Â Â Â <span class="hljs-function"><span class="hljs-keyword">public</span>Â ActionTaskResultÂ <span class="hljs-title">invoke</span>()Â throwsÂ Exception</span>Â {
Â Â Â Â Â Â Â Â ...
Â Â Â Â Â Â Â Â StringÂ pythonGeneratorRefÂ =Â 
Â Â Â Â Â Â Â Â Â Â Â Â pythonActionExecutor.executePythonFunction(
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â (PythonFunction)action.getExec(),
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â (PythonEvent)<span class="hljs-keyword">event</span>,
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â runnerContext);

Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â å¦‚æœç”¨æˆ·å®šä¹‰çš„åŠ¨ä½œä½¿ç”¨æ¥å£æäº¤äº†å¼‚æ­¥ä»»åŠ¡ï¼Œ</span>
Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â å®ƒå°†åœ¨ç¬¬ä¸€æ¬¡æ‰§è¡Œåè¿”å›ä¸€ä¸ªÂ PythonÂ ç”Ÿæˆå™¨å¯¹è±¡å®ä¾‹ã€‚</span>
Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â å¦åˆ™æ„å‘³ç€æ²¡æœ‰æäº¤å¼‚æ­¥ä»»åŠ¡ä¸”åŠ¨ä½œå·²ç»å®Œæˆã€‚</span>
Â Â Â Â Â Â Â Â <span class="hljs-keyword">if</span>Â (pythonGeneratorRefÂ !=Â <span class="hljs-literal">null</span>)Â {
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â PythonÂ åŠ¨ä½œç”Ÿæˆäº†ä¸€ä¸ªç”Ÿæˆå™¨ã€‚æˆ‘ä»¬éœ€è¦æ‰§è¡Œä¸€æ¬¡å®ƒï¼Œ</span>
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â è¿™å°†æäº¤ä¸€ä¸ªå¼‚æ­¥ä»»åŠ¡å¹¶è¿”å›åŠ¨ä½œæ˜¯å¦å·²å®Œæˆã€‚</span>
Â Â Â Â Â Â Â Â Â Â Â Â ActionTaskÂ tempGeneratedActionTaskÂ =Â 
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">new</span>Â PythonGeneratorActionTask(key,Â <span class="hljs-keyword">event</span>,Â action,Â pythonGeneratorRef);
Â Â Â Â Â Â Â Â Â Â Â Â tempGeneratedActionTask.setRunnerContext(runnerContext);
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â tempGeneratedActionTask.invoke();
Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â <span class="hljs-keyword">new</span>Â ActionTaskResult(
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-literal">true</span>,Â runnerContext.drainEvents(<span class="hljs-keyword">event</span>.getSourceTimestamp()),Â <span class="hljs-literal">null</span>);
Â Â Â Â }
}
</code></pre>
<h4 data-id="heading-16">2.3 å…³é”®ç‚¹</h4>
<p>ActionTask æ‹†åˆ†çš„å…³é”®ç‚¹å¦‚ä¸‹ï¼š</p>
<ul>
<li>
<p>é¡ºåºæ‰§è¡Œï¼šå¯¹äºç»™å®šçš„é”®ï¼Œä»»åŠ¡æŒ‰é¡ºåºæ‰§è¡Œï¼Œä»¥ä¿æŒé¡ºåºæ€§å’Œä¸€è‡´æ€§</p>
</li>
<li>
<p>å¼‚æ­¥å¤„ç†ï¼šå½“åŠ¨ä½œæ¶‰åŠå¼‚æ­¥æ“ä½œæ—¶ï¼š</p>
<ul>
<li>åˆå§‹ä»»åŠ¡æ‰§è¡Œåˆ°å¼‚æ­¥æ“ä½œä¸ºæ­¢ï¼›</li>
<li>è¿”å›ä¸€ä¸ªæ–°çš„ ActionTask æ¥è¡¨ç¤ºåç»­çš„æ“ä½œï¼›</li>
<li>åç»­ä»»åŠ¡å¤„ç†å¼‚æ­¥ç»“æœå¹¶ç»§ç»­æ‰§è¡Œ</li>
</ul>
</li>
<li>
<p>çŠ¶æ€ç®¡ç†ï¼šæ¯ä¸ª ActionTask é€šè¿‡ RunnerContext ç»´æŠ¤å…¶çŠ¶æ€ï¼Œç¡®ä¿æ‹†åˆ†ä¹‹é—´çš„è¿ç»­æ€§</p>
</li>
</ul>

<ul>
<li>åŸºäºé‚®ç®±çš„å¤„ç†ï¼šä½¿ç”¨ Flink çš„é‚®ç®±æ‰§è¡Œå™¨æ¥è°ƒåº¦åç»­ä»»åŠ¡çš„å¤„ç†ï¼š</li>
</ul>

<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">//Â æäº¤æ–°é‚®ä»¶ä»¥ç»§ç»­å¤„ç†</span>
mailboxExecutor<span class="hljs-selector-class">.submit</span>(()Â -&gt;Â <span class="hljs-built_in">tryProcessActionTaskForKey</span>(key),Â "processÂ actionÂ task");
</code></pre>
<p>è¿™ç§è®¾è®¡å…è®¸å°†å¸¦æœ‰å¼‚æ­¥æ“ä½œçš„å¤æ‚åŠ¨ä½œåˆ†è§£ä¸ºå¯ç®¡ç†çš„å•å…ƒï¼ŒåŒæ—¶ä¿æŒæ‰§è¡Œè¯­ä¹‰å’ŒçŠ¶æ€ä¸€è‡´æ€§ã€‚</p>
<p>æœ¬æ–‡ä½¿ç”¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fmarkdown.com.cn" target="_blank" title="https://markdown.com.cn" ref="nofollow noopener noreferrer">markdown.com.cn</a> æ’ç‰ˆ</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Windowså¼‚æ­¥I/Oä¸æ¶ˆæ¯å¾ªç¯çš„æ·±åº¦å¯¹è¯]]></title>    <link>https://juejin.cn/post/7594322573451935787</link>    <guid>https://juejin.cn/post/7594322573451935787</guid>    <pubDate>2026-01-12T11:20:16.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594322573451935787" data-draft-id="7594266018304606271" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Windowså¼‚æ­¥I/Oä¸æ¶ˆæ¯å¾ªç¯çš„æ·±åº¦å¯¹è¯"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-12T11:20:16.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç äº‹æ¼«è°ˆ"/> <meta itemprop="url" content="https://juejin.cn/user/1972974802965230"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Windowså¼‚æ­¥I/Oä¸æ¶ˆæ¯å¾ªç¯çš„æ·±åº¦å¯¹è¯
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1972974802965230/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç äº‹æ¼«è°ˆ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-12T11:20:16.000Z" title="Mon Jan 12 2026 11:20:16 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">åºå¹•ï¼šä¸¤ä¸ªç¨‹åºå‘˜çš„å¯¹è¯</h2>
<p><strong>å°ç‹</strong>ï¼šè€å¼ ï¼Œæˆ‘æœ€è¿‘å†™äº†ä¸ªç®¡é“é€šä¿¡ç¨‹åºï¼Œå¼‚æ­¥I/Oå‘é€æ•°æ®ï¼Œä½†UIä¼šå†»ç»“ï¼Œæ€ä¹ˆåŠï¼Ÿ</p>
<p><strong>è€å¼ </strong>ï¼šå“¦ï¼Œè¿™æ˜¯ç»å…¸çš„Windowsç¼–ç¨‹é—®é¢˜ã€‚ä½ ç”¨äº†<code>MsgWaitForMultipleObjects</code>å—ï¼Ÿ</p>
<p><strong>å°ç‹</strong>ï¼šç”¨äº†å•Šï¼Œä½†è¿˜æ˜¯æœ‰é—®é¢˜...</p>
<h2 data-id="heading-1">ç¬¬ä¸€å¹•ï¼šåˆè¯†æ¶ˆæ¯ç­‰å¾…çš„é™·é˜±</h2>
<p><strong>è€å¼ </strong>ï¼šå…ˆçœ‹çœ‹ä½ çš„ä»£ç ç»“æ„ï¼Ÿ</p>
<p><strong>å°ç‹</strong>ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">while</span> (ç­‰å¾…I/O) {
    result = <span class="hljs-built_in">MsgWaitForMultipleObjects</span>(..., QS_ALLINPUT);
    <span class="hljs-keyword">if</span> (æœ‰æ¶ˆæ¯) {
        <span class="hljs-built_in">PeekMessage</span>(&amp;msg, ...);  <span class="hljs-comment">// å–ä¸€æ¡</span>
        <span class="hljs-built_in">DispatchMessage</span>(&amp;msg);   <span class="hljs-comment">// å¤„ç†ä¸€æ¡</span>
    }
}
</code></pre>
<p><strong>è€å¼ </strong>ï¼šé—®é¢˜å°±åœ¨è¿™é‡Œï¼<code>MsgWaitForMultipleObjects</code>è¿”å›"æœ‰æ¶ˆæ¯"ï¼Œåªæ„å‘³ç€<strong>é˜Ÿåˆ—éç©º</strong>ã€‚å¦‚æœé˜Ÿåˆ—æœ‰10æ¡æ¶ˆæ¯ï¼Œä½ åªå¤„ç†1æ¡å°±å›å»ç­‰å¾…ï¼Œç³»ç»Ÿç«‹å³åˆå‘Šè¯‰ä½ "æœ‰æ¶ˆæ¯"ï¼Œä½ å°±é™·å…¥æ¶ˆæ¯å¾ªç¯ï¼Œæ°¸è¿œä¸æ£€æŸ¥I/Oäº†ï¼</p>
<p><strong>å°ç‹</strong>ï¼šå•Šï¼Ÿé‚£æ€ä¹ˆåŠï¼Ÿ</p>
<p><strong>è€å¼ </strong>ï¼šå¿…é¡»<strong>æ¸…ç©ºé˜Ÿåˆ—</strong>ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">if</span> (æœ‰æ¶ˆæ¯) {
    <span class="hljs-keyword">while</span> (<span class="hljs-built_in">PeekMessage</span>(&amp;msg, ...)) {  <span class="hljs-comment">// å¤„ç†æ‰€æœ‰æ¶ˆæ¯</span>
        <span class="hljs-built_in">TranslateMessage</span>(&amp;msg);
        <span class="hljs-built_in">DispatchMessage</span>(&amp;msg);
    }
    <span class="hljs-comment">// æ¸…ç©ºåå†é‡æ–°è¯„ä¼°I/OçŠ¶æ€</span>
}
</code></pre>
<h2 data-id="heading-2">ç¬¬äºŒå¹•ï¼šéšè—çš„ä¼˜å…ˆçº§åè½¬</h2>
<p><strong>å°ç‹</strong>ï¼šæˆ‘åŠ äº†whileå¾ªç¯ï¼Œä½†æ–°é—®é¢˜æ¥äº†ï¼šç”¨æˆ·æ‹–åŠ¨çª—å£æ—¶ï¼Œæ¶ˆæ¯å¤ªå¤šï¼Œå¤„ç†å¤ªä¹…ï¼ŒI/Oè¶…æ—¶äº†ï¼</p>
<p><strong>è€å¼ </strong>ï¼šè¿™å°±æ˜¯<strong>ä¼˜å…ˆçº§åè½¬</strong>â€”â€”ä½ä¼˜å…ˆçº§æ¶ˆæ¯å¤„ç†é˜»å¡äº†é«˜ä¼˜å…ˆçº§I/Oæ£€æŸ¥ã€‚Windowsæ¶ˆæ¯æœºåˆ¶æœ‰å‡ ä¸ªå…³é”®ç‰¹æ€§ï¼š</p>
<ol>
<li><strong>æ¶ˆæ¯æ˜¯å¼‚æ­¥äº§ç”Ÿçš„</strong>ï¼šç”¨æˆ·æ“ä½œå¯èƒ½ç¬é—´äº§ç”Ÿå‡ åæ¡æ¶ˆæ¯</li>
<li><strong>MsgWaitåªæ˜¯æ£€æµ‹å™¨</strong>ï¼šå®ƒä¸å…³å¿ƒæ¶ˆæ¯å¤„ç†è¦èŠ±å¤šå°‘æ—¶é—´</li>
<li><strong>äº‹ä»¶å¯èƒ½è¢«é”™è¿‡</strong>ï¼šå¦‚æœäº‹ä»¶åœ¨æ¶ˆæ¯å¤„ç†æœŸé—´è§¦å‘ï¼Œå¯èƒ½å°±ä¸¢å¤±äº†</li>
</ol>
<h2 data-id="heading-3">ç¬¬ä¸‰å¹•ï¼šæ¶ˆæ¯ä¸¢å¤±çš„ä¹ç§æƒ…å½¢</h2>
<p><strong>è€å¼ </strong>ï¼šè¯´åˆ°ä¸¢å¤±ï¼Œè®©æˆ‘è¯¦ç»†è¯´è¯´<code>MsgWaitForMultipleObjects</code>å¯èƒ½ä¸¢æ¶ˆæ¯çš„å‡ ç§æƒ…å†µï¼š</p>
<h3 data-id="heading-4">æƒ…å†µä¸€ï¼šé˜Ÿåˆ—æœªæ¸…ç©º</h3>
<p><strong>è€å¼ </strong>ï¼šè¿™æ˜¯æœ€å¸¸è§çš„ã€‚æ¯”å¦‚ç”¨æˆ·å¿«é€Ÿç‚¹å‡»æŒ‰é’®ï¼Œäº§ç”Ÿ<code>[ç‚¹å‡»1][ç‚¹å‡»2][ç‚¹å‡»3]</code>ä¸‰æ¡æ¶ˆæ¯ã€‚ä½ åªå¤„ç†ç¬¬ä¸€æ¡å°±å›å»ç­‰å¾…ï¼Œç³»ç»Ÿç«‹åˆ»åˆæŠ¥å‘Š"æœ‰æ¶ˆæ¯"...</p>
<p><strong>å°ç‹</strong>ï¼šç„¶åå°±å¿˜äº†æ£€æŸ¥I/Oï¼</p>
<h3 data-id="heading-5">æƒ…å†µäºŒï¼šæ—¶é—´çª—å£çš„ç«äº‰</h3>
<p><strong>è€å¼ </strong>ï¼šæƒ³è±¡ä¸€ä¸ªç²¾ç¡®å®šæ—¶åœºæ™¯ï¼š</p>
<pre><code class="hljs language-makefile" lang="makefile">æ—¶é—´è½´ï¼š
<span class="hljs-section">0ms: å¼€å§‹ç­‰å¾…ï¼Œè¶…æ—¶è®¾ä¸º1000ms</span>
<span class="hljs-section">999ms: æ¶ˆæ¯åˆ°è¾¾é˜Ÿåˆ—</span>
<span class="hljs-section">1000ms: è¶…æ—¶å‘ç”Ÿ</span>
</code></pre>
<p><strong>å°ç‹</strong>ï¼šMsgWaitä¼šè¿”å›ä»€ä¹ˆï¼Ÿ</p>
<p><strong>è€å¼ </strong>ï¼šå¯èƒ½è¿”å›<code>WAIT_TIMEOUT</code>ï¼æ¶ˆæ¯è™½ç„¶åˆ°äº†ï¼Œä½†è¶…æ—¶ä¹Ÿåˆ°äº†ï¼Œç³»ç»Ÿä¼˜å…ˆæŠ¥å‘Šè¶…æ—¶ã€‚</p>
<h3 data-id="heading-6">æƒ…å†µä¸‰ï¼šæ ‡å¿—ä¸å®Œæ•´</h3>
<p><strong>å°ç‹</strong>ï¼šæˆ‘ç”¨äº†<code>QS_KEY | QS_MOUSE</code>ï¼Œåªå…³å¿ƒé”®ç›˜é¼ æ ‡ã€‚</p>
<p><strong>è€å¼ </strong>ï¼šé‚£<code>WM_PAINT</code>ã€<code>WM_TIMER</code>å‘¢ï¼Ÿè¿™äº›æ¶ˆæ¯ä¼šè¢«ç§¯å‹ï¼Œæœ€ç»ˆå¯¼è‡´UIä¸å“åº”ã€‚æ›´ç³Ÿçš„æ˜¯ï¼Œæœ‰äº›æ¶ˆæ¯æ˜¯<strong>é“¾å¼ååº”</strong>çš„ï¼š</p>
<pre><code class="hljs">WM_SIZE â†’ è§¦å‘WM_PAINT â†’ è§¦å‘æ›´å¤šé‡ç»˜
</code></pre>
<p>æ¼æ‰ä¸€ä¸ªï¼Œåç»­éƒ½å—å½±å“ã€‚</p>
<h3 data-id="heading-7">æƒ…å†µå››ï¼šè¿‡æ»¤å™¨çš„å‰¯ä½œç”¨</h3>
<p><strong>è€å¼ </strong>ï¼šä½ ç”¨<code>PeekMessage</code>æ—¶è®¾ç½®è¿‡æ»¤å™¨äº†å—ï¼Ÿ</p>
<p><strong>å°ç‹</strong>ï¼šæœ‰æ—¶ä¼šè¿‡æ»¤ç‰¹å®šæ¶ˆæ¯ã€‚</p>
<p><strong>è€å¼ </strong>ï¼šå±é™©ï¼æ¯”å¦‚ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-built_in">PeekMessage</span>(&amp;msg, hWnd, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, PM_REMOVE);  <span class="hljs-comment">// åªå¤„ç†ç‰¹å®šçª—å£</span>
</code></pre>
<p>ä½†å¯¹è¯æ¡†ã€å­çª—å£ã€ç³»ç»Ÿå…¨å±€æ¶ˆæ¯éƒ½è¢«å¿½ç•¥äº†ã€‚</p>
<h3 data-id="heading-8">æƒ…å†µäº”ï¼šå¤šå¯¹è±¡ç­‰å¾…çš„éšæœºæ€§</h3>
<p><strong>å°ç‹</strong>ï¼šå¦‚æœåŒæ—¶ç­‰å¾…å¤šä¸ªäº‹ä»¶å‘¢ï¼Ÿ</p>
<p><strong>è€å¼ </strong>ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp">HANDLE events[<span class="hljs-number">2</span>] = {ioEvent, userEvent};
result = <span class="hljs-built_in">MsgWaitForMultipleObjects</span>(<span class="hljs-number">2</span>, events, ...);
</code></pre>
<p>å¦‚æœ<code>ioEvent</code>å’Œæ¶ˆæ¯åŒæ—¶å°±ç»ªï¼Œå¯èƒ½è¿”å›<code>WAIT_OBJECT_0</code>ï¼ˆäº‹ä»¶ï¼‰ï¼Œä¹Ÿå¯èƒ½è¿”å›<code>WAIT_OBJECT_0+2</code>ï¼ˆæ¶ˆæ¯ï¼‰ï¼Œ<strong>ä¸ç¡®å®š</strong>ï¼</p>
<h3 data-id="heading-9">æƒ…å†µå…­ï¼šGetMessageçš„é˜»å¡é™·é˜±</h3>
<p><strong>å°ç‹</strong>ï¼šæˆ‘è§è¿‡æœ‰äººç”¨<code>GetMessage</code>ä»£æ›¿<code>PeekMessage</code>ã€‚</p>
<p><strong>è€å¼ </strong>ï¼šå¤§å¿Œï¼<code>GetMessage</code>ä¼šé˜»å¡ï¼Œåœ¨é˜»å¡æœŸé—´ï¼š</p>
<ol>
<li>I/Oå®Œæˆäº‹ä»¶å¯èƒ½å‘ç”Ÿåˆè¢«é‡ç½®</li>
<li>å…¶ä»–æ¶ˆæ¯ç»§ç»­å †ç§¯</li>
<li>å¯èƒ½æ°¸è¿œç­‰ä¸åˆ°ç‰¹å®šæ¶ˆæ¯</li>
</ol>
<h3 data-id="heading-10">æƒ…å†µä¸ƒï¼šWM_PAINTçš„æƒ°æ€§</h3>
<p><strong>è€å¼ </strong>ï¼š<code>WM_PAINT</code>æ¶ˆæ¯å¾ˆç‰¹æ®Šã€‚ç³»ç»Ÿå‘Šè¯‰ä½ "æœ‰PAINTæ¶ˆæ¯"ï¼Œä½†å®é™…è°ƒç”¨<code>PeekMessage</code>æ—¶ï¼Œå¯èƒ½å–ä¸åˆ°å®Œæ•´æ¶ˆæ¯ï¼</p>
<h3 data-id="heading-11">æƒ…å†µå…«ï¼šçº¿ç¨‹æ¶ˆæ¯çš„éšè”½æ€§</h3>
<p><strong>å°ç‹</strong>ï¼šçº¿ç¨‹æ¶ˆæ¯æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</p>
<p><strong>è€å¼ </strong>ï¼š<code>PostThreadMessage</code>å‘é€çš„æ¶ˆæ¯ï¼Œéœ€è¦ç”¨<code>QS_POSTMESSAGE</code>æ ‡å¿—æ‰èƒ½æ£€æµ‹åˆ°ã€‚ç”¨<code>QS_ALLINPUT</code>å¯èƒ½æ¼æ‰ï¼</p>
<h3 data-id="heading-12">æƒ…å†µä¹ï¼šå¥æŸ„è¿‡æ»¤çš„ç›²åŒº</h3>
<p><strong>è€å¼ </strong>ï¼šå¦‚æœä½ åªå¤„ç†ä¸»çª—å£æ¶ˆæ¯ï¼Œé‚£ä¹ˆï¼š</p>
<ul>
<li>å·¥å…·æç¤ºæ¶ˆæ¯</li>
<li>ä¸Šä¸‹æ–‡èœå•æ¶ˆæ¯</li>
<li>COMæ¿€æ´»æ¶ˆæ¯
éƒ½å¯èƒ½è¢«å¿½ç•¥ã€‚</li>
</ul>
<h2 data-id="heading-13">ç¬¬å››å¹•ï¼šæ„å»ºå¥å£®çš„è§£å†³æ–¹æ¡ˆ</h2>
<p><strong>å°ç‹</strong>ï¼šè¿™ä¹ˆå¤šå‘ï¼åˆ°åº•æ€ä¹ˆå†™æ‰å®‰å…¨ï¼Ÿ</p>
<p><strong>è€å¼ </strong>ï¼šè®°ä½è¿™å‡ ä¸ªåŸåˆ™ï¼š</p>
<h3 data-id="heading-14">åŸåˆ™ä¸€ï¼šæœ‰ç•Œå¤„ç†</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// æ¯æ¬¡æœ€å¤šå¤„ç†Næ¡æ¶ˆæ¯</span>
<span class="hljs-type">const</span> <span class="hljs-type">int</span> MAX_MSGS = <span class="hljs-number">20</span>;
<span class="hljs-type">int</span> processed = <span class="hljs-number">0</span>;

<span class="hljs-keyword">while</span> (processed &lt; MAX_MSGS &amp;&amp; <span class="hljs-built_in">PeekMessage</span>(&amp;msg, ...)) {
    <span class="hljs-comment">// å¤„ç†æ¶ˆæ¯</span>
    processed++;
}
<span class="hljs-comment">// å¤„ç†åå¿…é¡»é‡æ–°æ£€æŸ¥I/Oäº‹ä»¶</span>
</code></pre>
<h3 data-id="heading-15">åŸåˆ™äºŒï¼šå®šæœŸæ£€æŸ¥äº‹ä»¶</h3>
<p><strong>è€å¼ </strong>ï¼šåœ¨æ¶ˆæ¯å¾ªç¯ä¸­ï¼Œè¦<strong>ç©¿æ’æ£€æŸ¥I/OçŠ¶æ€</strong>ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">while</span> (å¤„ç†æ¶ˆæ¯) {
    <span class="hljs-comment">// æ¯å¤„ç†å‡ æ¡æ¶ˆæ¯å°±æ£€æŸ¥ä¸€æ¬¡</span>
    <span class="hljs-keyword">if</span> (processed % <span class="hljs-number">5</span> == <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">WaitForSingleObject</span>(ioEvent, <span class="hljs-number">0</span>) == WAIT_OBJECT_0) {
            <span class="hljs-comment">// I/Oå·²å®Œæˆï¼Œç«‹å³è·³å‡º</span>
            <span class="hljs-keyword">break</span>;
        }
    }
}
</code></pre>
<h3 data-id="heading-16">åŸåˆ™ä¸‰ï¼šå®Œæ•´æ ‡å¿—é›†</h3>
<p><strong>è€å¼ </strong>ï¼šä¸è¦åå•¬æ ‡å¿—ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp">DWORD wakeMask = QS_ALLINPUT | QS_ALLPOSTMESSAGE;
<span class="hljs-comment">// æˆ–è€…è‡³å°‘ï¼š</span>
DWORD wakeMask = QS_ALLEVENTS;  <span class="hljs-comment">// æ¯”QS_ALLINPUTæ›´å®Œæ•´</span>
</code></pre>
<h3 data-id="heading-17">åŸåˆ™å››ï¼šæ­£ç¡®å¤„ç†é€€å‡º</h3>
<p><strong>è€å¼ </strong>ï¼š<code>WM_QUIT</code>æ˜¯ç‰¹æ®Šæ¶ˆæ¯ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">if</span> (msg.message == WM_QUIT) {
    <span class="hljs-comment">// ä¸èƒ½ç®€å•åœ°DispatchMessage</span>
    <span class="hljs-comment">// è¦æ”¾å›é˜Ÿåˆ—è®©ä¸»å¾ªç¯å¤„ç†</span>
    <span class="hljs-built_in">PostQuitMessage</span>((<span class="hljs-type">int</span>)msg.wParam);
    <span class="hljs-keyword">return</span>;  <span class="hljs-comment">// ä¼˜é›…é€€å‡º</span>
}
</code></pre>
<h2 data-id="heading-18">ç¬¬äº”å¹•ï¼šå®Œæ•´çš„å®ç°ç¤ºä¾‹</h2>
<p><strong>è€å¼ </strong>ï¼šç»“åˆæ‰€æœ‰åŸåˆ™ï¼Œä¸€ä¸ªå¥å£®çš„å®ç°åº”è¯¥æ˜¯è¿™æ ·çš„ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">RobustAsyncIOWaiter</span> {
<span class="hljs-keyword">public</span>:
    <span class="hljs-keyword">enum</span> <span class="hljs-title class_">WaitResult</span> {
        IO_COMPLETED,
        TIMEOUT,
        USER_CANCELLED,
        ERROR_OCCURRED
    };
    
    <span class="hljs-function">WaitResult <span class="hljs-title">WaitForIOWithMessages</span><span class="hljs-params">(HANDLE ioEvent, DWORD timeoutMs)</span> </span>{
        <span class="hljs-comment">// 1. è®°å½•å¼€å§‹æ—¶é—´</span>
        DWORD startTick = <span class="hljs-built_in">GetTickCount</span>();
        DWORD remaining = timeoutMs;
        
        <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
            <span class="hljs-comment">// 2. ä½¿ç”¨å®Œæ•´çš„äº‹ä»¶æ©ç </span>
            DWORD wakeMask = QS_ALLEVENTS | QS_ALLPOSTMESSAGE;
            
            <span class="hljs-comment">// 3. ç­‰å¾…äº‹ä»¶æˆ–æ¶ˆæ¯</span>
            DWORD result = <span class="hljs-built_in">MsgWaitForMultipleObjects</span>(
                <span class="hljs-number">1</span>, &amp;ioEvent,
                FALSE,  <span class="hljs-comment">// ç­‰å¾…ä»»æ„ä¸€ä¸ª</span>
                remaining,
                wakeMask);
            
            <span class="hljs-comment">// 4. å¤„ç†å„ç§ç»“æœ</span>
            <span class="hljs-keyword">switch</span> (result) {
            <span class="hljs-keyword">case</span> WAIT_OBJECT_0:
                <span class="hljs-comment">// I/Oå®Œæˆäº‹ä»¶</span>
                <span class="hljs-keyword">return</span> <span class="hljs-built_in">ProcessIOCompletion</span>(ioEvent);
                
            <span class="hljs-keyword">case</span> WAIT_OBJECT_0 + <span class="hljs-number">1</span>:
                <span class="hljs-comment">// æœ‰æ¶ˆæ¯åˆ°è¾¾</span>
                <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">ProcessMessageBatch</span>(ioEvent, <span class="hljs-number">20</span>, <span class="hljs-number">50</span>)) {
                    <span class="hljs-comment">// å¤„ç†è¿‡ç¨‹ä¸­æ£€æµ‹åˆ°å–æ¶ˆ</span>
                    <span class="hljs-keyword">return</span> USER_CANCELLED;
                }
                <span class="hljs-keyword">break</span>;
                
            <span class="hljs-keyword">case</span> WAIT_TIMEOUT:
                <span class="hljs-keyword">return</span> TIMEOUT;
                
            <span class="hljs-keyword">case</span> WAIT_FAILED:
                <span class="hljs-keyword">return</span> ERROR_OCCURRED;
                
            <span class="hljs-keyword">default</span>:
                <span class="hljs-comment">// å¤„ç†å¼‚å¸¸æƒ…å†µ</span>
                <span class="hljs-built_in">LogUnexpectedWaitResult</span>(result);
                <span class="hljs-keyword">return</span> ERROR_OCCURRED;
            }
            
            <span class="hljs-comment">// 5. é‡æ–°è®¡ç®—å‰©ä½™æ—¶é—´</span>
            DWORD elapsed = <span class="hljs-built_in">GetTickCount</span>() - startTick;
            <span class="hljs-keyword">if</span> (elapsed &gt;= timeoutMs) {
                <span class="hljs-keyword">return</span> TIMEOUT;
            }
            remaining = timeoutMs - elapsed;
        }
    }
    
<span class="hljs-keyword">private</span>:
    <span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">ProcessMessageBatch</span><span class="hljs-params">(HANDLE ioEvent, <span class="hljs-type">int</span> maxMessages, DWORD maxTimeMs)</span> </span>{
        DWORD startTime = <span class="hljs-built_in">GetTickCount</span>();
        <span class="hljs-type">int</span> processed = <span class="hljs-number">0</span>;
        
        MSG msg;
        <span class="hljs-keyword">while</span> (processed &lt; maxMessages) {
            <span class="hljs-comment">// æ£€æŸ¥æ—¶é—´é™åˆ¶</span>
            <span class="hljs-keyword">if</span> (<span class="hljs-built_in">GetTickCount</span>() - startTime &gt;= maxTimeMs) {
                <span class="hljs-keyword">break</span>;  <span class="hljs-comment">// æ—¶é—´åˆ°äº†</span>
            }
            
            <span class="hljs-comment">// ä¼˜å…ˆæ£€æŸ¥I/Oäº‹ä»¶</span>
            <span class="hljs-keyword">if</span> (<span class="hljs-built_in">WaitForSingleObject</span>(ioEvent, <span class="hljs-number">0</span>) == WAIT_OBJECT_0) {
                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;  <span class="hljs-comment">// I/Oå·²å®Œæˆï¼Œè®©å¤–å±‚å¤„ç†</span>
            }
            
            <span class="hljs-comment">// å–æ¶ˆæ¯ï¼ˆéé˜»å¡ï¼‰</span>
            <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">PeekMessage</span>(&amp;msg, <span class="hljs-literal">NULL</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, PM_REMOVE)) {
                <span class="hljs-keyword">break</span>;  <span class="hljs-comment">// é˜Ÿåˆ—å·²ç©º</span>
            }
            
            <span class="hljs-comment">// ç‰¹æ®Šå¤„ç†é€€å‡ºæ¶ˆæ¯</span>
            <span class="hljs-keyword">if</span> (msg.message == WM_QUIT) {
                <span class="hljs-comment">// å°†é€€å‡ºæ¶ˆæ¯é‡æ–°æ’é˜Ÿ</span>
                <span class="hljs-built_in">PostQuitMessage</span>((<span class="hljs-type">int</span>)msg.wParam);
                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;  <span class="hljs-comment">// é€šçŸ¥å¤–å±‚éœ€è¦é€€å‡º</span>
            }
            
            <span class="hljs-comment">// æ­£å¸¸å¤„ç†</span>
            <span class="hljs-keyword">if</span> (msg.message &gt;= WM_KEYFIRST &amp;&amp; msg.message &lt;= WM_KEYLAST) {
                <span class="hljs-built_in">TranslateMessage</span>(&amp;msg);
            }
            <span class="hljs-built_in">DispatchMessage</span>(&amp;msg);
            
            processed++;
        }
        
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;  <span class="hljs-comment">// ç»§ç»­ç­‰å¾…</span>
    }
    
    <span class="hljs-function">WaitResult <span class="hljs-title">ProcessIOCompletion</span><span class="hljs-params">(HANDLE ioEvent)</span> </span>{
        <span class="hljs-comment">// è·å–I/Oç»“æœ</span>
        DWORD bytesTransferred = <span class="hljs-number">0</span>;
        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">GetOverlappedResult</span>(pipe, &amp;overlapped, &amp;bytesTransferred, FALSE)) {
            <span class="hljs-keyword">return</span> IO_COMPLETED;
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">return</span> ERROR_OCCURRED;
        }
    }
};
</code></pre>
<h2 data-id="heading-19">ç¬¬å…­å¹•ï¼šæ¶æ„çš„ç»ˆæåæ€</h2>
<p><strong>å°ç‹</strong>ï¼šè¿™ä¹ˆå¤æ‚ï¼æœ‰æ²¡æœ‰æ›´ç®€å•çš„æ–¹æ³•ï¼Ÿ</p>
<p><strong>è€å¼ </strong>ï¼šæœ‰ï¼é—®é¢˜çš„æ ¹æºåœ¨äº<strong>æŠŠUIçº¿ç¨‹å’ŒI/Oç­‰å¾…è€¦åˆ</strong>ã€‚ç°ä»£Windowsç¼–ç¨‹åº”è¯¥ï¼š</p>
<h3 data-id="heading-20">æ–¹æ¡ˆä¸€ï¼šI/Oå®Œæˆç«¯å£</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// ä¸“ç”¨I/Oçº¿ç¨‹</span>
<span class="hljs-function">DWORD WINAPI <span class="hljs-title">IOThreadProc</span><span class="hljs-params">(LPVOID)</span> </span>{
    <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
        <span class="hljs-built_in">GetQueuedCompletionStatus</span>(port, ...);
        <span class="hljs-comment">// å¤„ç†I/Oï¼Œé€šè¿‡æ¶ˆæ¯æˆ–å›è°ƒé€šçŸ¥UI</span>
    }
}
</code></pre>
<h3 data-id="heading-21">æ–¹æ¡ˆäºŒï¼šçº¿ç¨‹æ± </h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// æäº¤I/Oå·¥ä½œé¡¹</span>
<span class="hljs-built_in">SubmitThreadpoolWork</span>(&amp;work);
<span class="hljs-comment">// å›è°ƒå‡½æ•°åœ¨çº¿ç¨‹æ± æ‰§è¡Œ</span>
</code></pre>
<h3 data-id="heading-22">æ–¹æ¡ˆä¸‰ï¼šåŸºäºäº‹ä»¶çš„å¼‚æ­¥æ¨¡å¼</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// ä½¿ç”¨ç°ä»£å¼‚æ­¥æ¨¡å¼</span>
async_result = <span class="hljs-keyword">co_await</span> <span class="hljs-built_in">async_write</span>(pipe, data);
<span class="hljs-comment">// UIçº¿ç¨‹å®Œå…¨ä¸è¢«é˜»å¡</span>
</code></pre>
<p><strong>å°ç‹</strong>ï¼šé‚£æˆ‘è¯¥ç”¨å“ªä¸ªï¼Ÿ</p>
<p><strong>è€å¼ </strong>ï¼šæ ¹æ®åœºæ™¯é€‰æ‹©ï¼š</p>
<ul>
<li>ç®€å•åº”ç”¨ï¼šç”¨æˆ‘ä»¬è®¨è®ºçš„æœ‰ç•Œæ¶ˆæ¯å¤„ç†</li>
<li>é«˜æ€§èƒ½æœåŠ¡ï¼šç”¨I/Oå®Œæˆç«¯å£</li>
<li>ç°ä»£åº”ç”¨ï¼šç”¨C++20åç¨‹æˆ–WinRTå¼‚æ­¥</li>
</ul>
<h2 data-id="heading-23">ç»ˆå¹•ï¼šæ ¸å¿ƒåŸåˆ™æ€»ç»“</h2>
<p><strong>è€å¼ </strong>ï¼šæœ€åè®°ä½è¿™å…­æ¡é»„é‡‘æ³•åˆ™ï¼š</p>
<ol>
<li><strong>æ¸…ç©ºä½†æœ‰é™</strong>ï¼šå¤„ç†æ¶ˆæ¯è¦æ¸…ç©ºé˜Ÿåˆ—ï¼Œä½†è¦è®¾ç½®è¾¹ç•Œ</li>
<li><strong>ç©¿æ’æ£€æŸ¥</strong>ï¼šæ¶ˆæ¯å¤„ç†ä¸­è¦å®šæœŸæ£€æŸ¥I/OçŠ¶æ€</li>
<li><strong>å®Œæ•´æ ‡å¿—</strong>ï¼šä½¿ç”¨å®Œæ•´çš„ç­‰å¾…æ ‡å¿—é›†</li>
<li><strong>ç‰¹æ®Šå¤„ç†</strong>ï¼šå¯¹<code>WM_QUIT</code>ç­‰ç‰¹æ®Šæ¶ˆæ¯å•ç‹¬å¤„ç†</li>
<li><strong>è¶…æ—¶é‡ç®—</strong>ï¼šæ¯æ¬¡å¾ªç¯é‡æ–°è®¡ç®—å‰©ä½™æ—¶é—´</li>
<li><strong>è€ƒè™‘åˆ†ç¦»</strong>ï¼šå¤æ‚çš„I/Oæ“ä½œè€ƒè™‘ä½¿ç”¨å•ç‹¬çº¿ç¨‹</li>
</ol>
<p><strong>å°ç‹</strong>ï¼šæˆ‘æ˜ç™½äº†ï¼å…³é”®æ˜¯ç†è§£Windowsæ¶ˆæ¯æœºåˆ¶çš„<strong>å¼‚æ­¥æœ¬è´¨</strong>å’Œ<code>MsgWaitForMultipleObjects</code>çš„<strong>æ£€æµ‹ç‰¹æ€§</strong>ã€‚</p>
<p><strong>è€å¼ </strong>ï¼šæ­£æ˜¯ã€‚Windowsç¼–ç¨‹å°±åƒèµ°é’¢ä¸ï¼Œåœ¨UIå“åº”æ€§å’ŒI/OåŠæ—¶æ€§ä¹‹é—´å¯»æ‰¾å¹³è¡¡ã€‚æŒæ¡äº†è¿™äº›åŸåˆ™ï¼Œä½ å°±èƒ½å†™å‡ºæ—¢æµç•…åˆå¯é çš„åº”ç”¨ç¨‹åºã€‚</p>
<hr/>
<p><em>è¿™åœºå¯¹è¯åï¼Œå°ç‹é‡æ„äº†ä»–çš„ä»£ç ï¼Œåº”ç”¨äº†æœ‰ç•Œæ¶ˆæ¯å¤„ç†å’Œå®šæœŸI/Oæ£€æŸ¥ï¼Œç¨‹åºå†ä¹Ÿæ²¡æœ‰å‡ºç°è¿‡UIå†»ç»“æˆ–I/Oè¶…æ—¶çš„é—®é¢˜ã€‚æ›´é‡è¦çš„æ˜¯ï¼Œä»–å­¦ä¼šäº†åœ¨é‡åˆ°å¤æ‚é—®é¢˜æ—¶ï¼Œä»æ¶æ„å±‚é¢æ€è€ƒæ›´ä¼˜é›…çš„è§£å†³æ–¹æ¡ˆã€‚</em></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Debugæ¨¡å¼ä¸‹unique_ptrçš„æ€§èƒ½å¼€é”€çœŸç›¸]]></title>    <link>https://juejin.cn/post/7594322573451952171</link>    <guid>https://juejin.cn/post/7594322573451952171</guid>    <pubDate>2026-01-12T11:22:05.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594322573451952171" data-draft-id="7594103243685511211" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Debugæ¨¡å¼ä¸‹unique_ptrçš„æ€§èƒ½å¼€é”€çœŸç›¸"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-12T11:22:05.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç äº‹æ¼«è°ˆ"/> <meta itemprop="url" content="https://juejin.cn/user/1972974802965230"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Debugæ¨¡å¼ä¸‹unique_ptrçš„æ€§èƒ½å¼€é”€çœŸç›¸
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1972974802965230/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç äº‹æ¼«è°ˆ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-12T11:22:05.000Z" title="Mon Jan 12 2026 11:22:05 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ¬æ–‡å°†æ·±å…¥åˆ†æDebugæ„å»ºä¸­unique_ptrçš„æ€§èƒ½å¼€é”€æ¥æºã€‚</p>
<h2 data-id="heading-0">ä¸€ã€Debugæ„å»ºçš„ç‰¹æ®Šæ€§</h2>
<h3 data-id="heading-1">1.1 ç¼–è¯‘å™¨ä¼˜åŒ–è¢«ç¦ç”¨</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// GCC/Clang: -O0 (é»˜è®¤Debugé€‰é¡¹)</span>
<span class="hljs-comment">// MSVC: /Od (ç¦ç”¨ä¼˜åŒ–)</span>
</code></pre>
<p><strong>ç¦ç”¨æ‰€æœ‰ä¼˜åŒ–åŒ…æ‹¬ï¼š</strong></p>
<ul>
<li>å†…è”å±•å¼€è¢«ç¦ç”¨</li>
<li>æ— ç”¨ä»£ç æ¶ˆé™¤è¢«ç¦ç”¨</li>
<li>å¸¸é‡ä¼ æ’­è¢«ç¦ç”¨</li>
<li>å¾ªç¯ä¼˜åŒ–è¢«ç¦ç”¨</li>
<li>å‡½æ•°è°ƒç”¨ä¸ä¼˜åŒ–</li>
</ul>
<h3 data-id="heading-2">1.2 è°ƒè¯•æ”¯æŒå¯ç”¨</h3>
<pre><code class="hljs language-diff" lang="diff"><span class="hljs-deletion">-g æˆ– /Ziï¼šç”Ÿæˆå®Œæ•´çš„è°ƒè¯•ç¬¦å·</span>
<span class="hljs-deletion">-fno-omit-frame-pointerï¼šä¿ç•™å¸§æŒ‡é’ˆ</span>
<span class="hljs-deletion">-fno-inlineï¼šç¦æ­¢å†…è”</span>
</code></pre>
<h2 data-id="heading-3">äºŒã€Debugæ¨¡å¼ä¸‹unique_ptrçš„å®é™…å¼€é”€</h2>
<h3 data-id="heading-4">2.1 æŸ¥çœ‹unique_ptrçš„å®ç°ï¼ˆlibstdc++ debugæ¨¡å¼ï¼‰</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// /usr/include/c++/12/debug/unique_ptr.h (GCCè°ƒè¯•ç‰ˆæœ¬)</span>

<span class="hljs-meta">#<span class="hljs-keyword">ifdef</span> _GLIBCXX_DEBUG</span>
<span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> _Tp, <span class="hljs-keyword">typename</span> _Dp = default_delete&lt;_Tp&gt;&gt;
<span class="hljs-keyword">class</span> unique_ptr {
    <span class="hljs-comment">// è°ƒè¯•æ¨¡å¼ä¸‹æœ‰å¤§é‡é¢å¤–æ£€æŸ¥</span>
    __gnu_debug::_Safe_iterator_base* _M_debug_info;
    <span class="hljs-comment">// è¾¹ç•Œæ£€æŸ¥</span>
    <span class="hljs-comment">// ç©ºæŒ‡é’ˆæ£€æŸ¥</span>
    <span class="hljs-comment">// æ‰€æœ‰æƒè·Ÿè¸ª</span>
};
<span class="hljs-meta">#<span class="hljs-keyword">endif</span></span>
</code></pre>
<h3 data-id="heading-5">2.2 å…·ä½“å¼€é”€æ¥æºåˆ†æ</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// å®éªŒï¼šå¯¹æ¯”Releaseå’ŒDebugçš„æ±‡ç¼–å·®å¼‚</span>

<span class="hljs-comment">// === Debugæ¨¡å¼æ±‡ç¼– (-O0 -g) ===</span>
<span class="hljs-keyword">auto</span> p = std::<span class="hljs-built_in">make_unique</span>&lt;<span class="hljs-type">int</span>&gt;(<span class="hljs-number">42</span>);
<span class="hljs-comment">// ç”Ÿæˆ:</span>
<span class="hljs-number">0000000000401116</span> &lt;test_unique&gt;:
  <span class="hljs-number">401116</span>:       <span class="hljs-number">55</span>                      push   %rbp
  <span class="hljs-number">401117</span>:       <span class="hljs-number">48</span> <span class="hljs-number">89</span> e5                mov    %rsp,%rbp
  <span class="hljs-number">40111</span>a:       <span class="hljs-number">48</span> <span class="hljs-number">83</span> ec <span class="hljs-number">20</span>             sub    $<span class="hljs-number">0x20</span>,%rsp
  <span class="hljs-number">40111</span>e:       bf <span class="hljs-number">04</span> <span class="hljs-number">00</span> <span class="hljs-number">00</span> <span class="hljs-number">00</span>          mov    $<span class="hljs-number">0x4</span>,%edi
  <span class="hljs-number">401123</span>:       e8 <span class="hljs-number">28</span> fe ff ff          callq  <span class="hljs-number">400f</span>50 &lt;<span class="hljs-function"><span class="hljs-keyword">operator</span> <span class="hljs-title">new</span><span class="hljs-params">(<span class="hljs-type">unsigned</span> <span class="hljs-type">long</span>)</span>@plt&gt;
  401128:       <span class="hljs-number">48</span> <span class="hljs-number">89</span> <span class="hljs-number">45</span> f8             mov    %rax,<span class="hljs-number">-0x8</span>(%rbp)
  <span class="hljs-number">40112</span>c:       <span class="hljs-number">48</span> <span class="hljs-number">8b</span> <span class="hljs-number">45</span> f8             mov    <span class="hljs-number">-0x8</span>(%rbp),%rax
  <span class="hljs-number">401130</span>:       c7 <span class="hljs-number">00</span> <span class="hljs-number">2</span>a <span class="hljs-number">00</span> <span class="hljs-number">00</span> <span class="hljs-number">00</span>       movl   $<span class="hljs-number">0x42</span>,(%rax)
  <span class="hljs-number">401136</span>:       <span class="hljs-number">48</span> <span class="hljs-number">8b</span> <span class="hljs-number">45</span> f8             mov    <span class="hljs-number">-0x8</span>(%rbp),%rax
  <span class="hljs-number">40113</span>a:       <span class="hljs-number">48</span> <span class="hljs-number">89</span> <span class="hljs-number">45</span> e8             mov    %rax,<span class="hljs-number">-0x18</span>(%rbp)
  <span class="hljs-number">40113</span>e:       <span class="hljs-number">48</span> c7 <span class="hljs-number">45</span> f0 <span class="hljs-number">00</span> <span class="hljs-number">00</span> <span class="hljs-number">00</span>    movq   $<span class="hljs-number">0x0</span>,<span class="hljs-number">-0x10</span>(%rbp)  # é¢å¤–åˆå§‹åŒ–
  <span class="hljs-number">401145</span>:       <span class="hljs-number">00</span> 
  <span class="hljs-number">401146</span>:       <span class="hljs-number">48</span> <span class="hljs-number">8</span>d <span class="hljs-number">45</span> e8             lea    <span class="hljs-number">-0x18</span>(%rbp),%rax
  <span class="hljs-number">40114</span>a:       <span class="hljs-number">48</span> <span class="hljs-number">89</span> c7                mov    %rax,%rdi
  <span class="hljs-number">40114</span>d:       e8 <span class="hljs-number">3</span>e <span class="hljs-number">00</span> <span class="hljs-number">00</span> <span class="hljs-number">00</span>          callq  <span class="hljs-number">401190</span> &lt;unique_ptræ„é€ å‡½æ•°&gt;
  <span class="hljs-number">401152</span>:       <span class="hljs-number">48</span> <span class="hljs-number">8</span>d <span class="hljs-number">45</span> e8             lea    <span class="hljs-number">-0x18</span>(%rbp),%rax
  <span class="hljs-number">401156</span>:       <span class="hljs-number">48</span> <span class="hljs-number">89</span> c7                mov    %rax,%rdi
  <span class="hljs-number">401159</span>:       e8 <span class="hljs-number">52</span> <span class="hljs-number">00</span> <span class="hljs-number">00</span> <span class="hljs-number">00</span>          callq  <span class="hljs-number">4011b</span>0 &lt;unique_ptrææ„å‡½æ•°&gt;
  <span class="hljs-number">40115</span>e:       <span class="hljs-number">90</span>                      nop
  <span class="hljs-number">40115f</span>:       c9                      leaveq 
  <span class="hljs-number">401160</span>:       c3                      retq

// ä»…make_uniqueå°±äº§ç”Ÿäº†<span class="hljs-number">15</span>+æ¡æŒ‡ä»¤ï¼

// =</span>== Releaseæ¨¡å¼æ±‡ç¼– (-O2) ===
<span class="hljs-keyword">auto</span> p = std::<span class="hljs-built_in">make_unique</span>&lt;<span class="hljs-type">int</span>&gt;(<span class="hljs-number">42</span>);
<span class="hljs-comment">// å¯èƒ½ä¼˜åŒ–ä¸º:</span>
mov    DWORD PTR [rsp<span class="hljs-number">-8</span>], <span class="hljs-number">42</span>  # ç›´æ¥åœ¨æ ˆä¸Šï¼
<span class="hljs-comment">// æˆ–è€…å®Œå…¨æ¶ˆé™¤åˆ†é…</span>
</code></pre>
<h2 data-id="heading-6">ä¸‰ã€Debugæ¨¡å¼ä¸‹unique_ptrçš„é¢å¤–æ£€æŸ¥</h2>
<h3 data-id="heading-7">3.1 è°ƒè¯•å®‰å…¨æ£€æŸ¥</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// unique_ptrçš„è°ƒè¯•ç‰ˆæœ¬é€šå¸¸åŒ…å«ï¼š</span>

<span class="hljs-meta">#<span class="hljs-keyword">define</span> _GLIBCXX_DEBUG_PEDANTIC  <span class="hljs-comment">// é¢å¤–æ£€æŸ¥</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> _GLIBCXX_ASSERTIONS      <span class="hljs-comment">// æ–­è¨€æ£€æŸ¥</span></span>

<span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> _Tp&gt;
<span class="hljs-keyword">class</span> <span class="hljs-title class_">unique_ptr</span> {
<span class="hljs-keyword">private</span>:
    _Tp* _M_ptr;
    
    <span class="hljs-comment">// è°ƒè¯•è¾…åŠ©æˆå‘˜</span>
    <span class="hljs-meta">#<span class="hljs-keyword">ifdef</span> _GLIBCXX_DEBUG</span>
    <span class="hljs-keyword">mutable</span> __gnu_debug::_Safe_sequence_base* _M_debug_info;
    <span class="hljs-type">int</span> _M_refcount;
    <span class="hljs-meta">#<span class="hljs-keyword">endif</span></span>
    
<span class="hljs-keyword">public</span>:
    <span class="hljs-comment">// æ¯ä¸ªæ“ä½œéƒ½æœ‰æ£€æŸ¥</span>
    _Tp&amp; <span class="hljs-keyword">operator</span>*() {
        <span class="hljs-meta">#<span class="hljs-keyword">ifdef</span> _GLIBCXX_DEBUG</span>
        _M_assert_not_null();  <span class="hljs-comment">// ç©ºæŒ‡é’ˆæ£€æŸ¥</span>
        _M_assert_dereferenceable();  <span class="hljs-comment">// å¯è§£å¼•ç”¨æ£€æŸ¥</span>
        <span class="hljs-meta">#<span class="hljs-keyword">endif</span></span>
        <span class="hljs-keyword">return</span> *_M_ptr;
    }
    
    _Tp* <span class="hljs-keyword">operator</span>-&gt;() {
        <span class="hljs-meta">#<span class="hljs-keyword">ifdef</span> _GLIBCXX_DEBUG</span>
        _M_assert_not_null();
        <span class="hljs-meta">#<span class="hljs-keyword">endif</span></span>
        <span class="hljs-keyword">return</span> _M_ptr;
    }
    
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">reset</span><span class="hljs-params">(_Tp* p = <span class="hljs-literal">nullptr</span>)</span> </span>{
        <span class="hljs-meta">#<span class="hljs-keyword">ifdef</span> _GLIBCXX_DEBUG</span>
        _M_assert_ownership();  <span class="hljs-comment">// æ‰€æœ‰æƒæ£€æŸ¥</span>
        <span class="hljs-meta">#<span class="hljs-keyword">endif</span></span>
        <span class="hljs-keyword">delete</span> _M_ptr;
        _M_ptr = p;
        <span class="hljs-meta">#<span class="hljs-keyword">ifdef</span> _GLIBCXX_DEBUG</span>
        _M_update_debug_info();  <span class="hljs-comment">// æ›´æ–°è°ƒè¯•ä¿¡æ¯</span>
        <span class="hljs-meta">#<span class="hljs-keyword">endif</span></span>
    }
};
</code></pre>
<h3 data-id="heading-8">3.2 å…·ä½“æ£€æŸ¥é¡¹ç›®</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-type">void</span> _M_assert_not_null() <span class="hljs-type">const</span> {
    <span class="hljs-keyword">if</span> (_M_ptr == <span class="hljs-literal">nullptr</span>) {
        std::__throw_logic_error(<span class="hljs-string">"unique_ptr::operator*: null pointer"</span>);
    }
}

<span class="hljs-type">void</span> _M_assert_dereferenceable() <span class="hljs-type">const</span> {
    <span class="hljs-meta">#<span class="hljs-keyword">ifdef</span> _GLIBCXX_DEBUG_PEDANTIC</span>
    <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">is_dereferenceable</span>(_M_ptr)) {
        std::__throw_logic_error(<span class="hljs-string">"attempt to dereference invalid pointer"</span>);
    }
    <span class="hljs-meta">#<span class="hljs-keyword">endif</span></span>
}

<span class="hljs-type">void</span> _M_assert_ownership() <span class="hljs-type">const</span> {
    <span class="hljs-meta">#<span class="hljs-keyword">ifdef</span> _GLIBCXX_DEBUG</span>
    <span class="hljs-keyword">if</span> (_M_refcount != <span class="hljs-number">1</span>) {
        std::__throw_logic_error(<span class="hljs-string">"unique_ptr::reset: multiple owners"</span>);
    }
    <span class="hljs-meta">#<span class="hljs-keyword">endif</span></span>
}
</code></pre>
<h2 data-id="heading-9">å››ã€é‡åŒ–åˆ†æï¼šå„é¡¹å¼€é”€å æ¯”</h2>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// æµ‹è¯•ä»£ç ï¼šåˆ†æå„é¡¹å¼€é”€</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">InstrumentedUniquePtr</span> {
    <span class="hljs-type">static</span> <span class="hljs-keyword">inline</span> <span class="hljs-type">int</span> ctor_count = <span class="hljs-number">0</span>;
    <span class="hljs-type">static</span> <span class="hljs-keyword">inline</span> <span class="hljs-type">int</span> dtor_count = <span class="hljs-number">0</span>;
    <span class="hljs-type">static</span> <span class="hljs-keyword">inline</span> <span class="hljs-type">int</span> check_count = <span class="hljs-number">0</span>;
    
    <span class="hljs-type">int</span>* ptr;
    
<span class="hljs-keyword">public</span>:
    <span class="hljs-built_in">InstrumentedUniquePtr</span>(<span class="hljs-type">int</span>* p) : <span class="hljs-built_in">ptr</span>(p) {
        ctor_count++;
        <span class="hljs-comment">// æ¨¡æ‹Ÿè°ƒè¯•å¼€é”€</span>
        <span class="hljs-built_in">simulate_debug_check</span>();  <span class="hljs-comment">// 10å‘¨æœŸ</span>
        <span class="hljs-built_in">update_debug_info</span>();     <span class="hljs-comment">// 5å‘¨æœŸ</span>
        <span class="hljs-built_in">validate_pointer</span>();      <span class="hljs-comment">// 3å‘¨æœŸ</span>
        check_count += <span class="hljs-number">3</span>;
    }
    
    ~<span class="hljs-built_in">InstrumentedUniquePtr</span>() {
        dtor_count++;
        <span class="hljs-built_in">simulate_debug_check</span>();  <span class="hljs-comment">// 8å‘¨æœŸ</span>
        <span class="hljs-keyword">delete</span> ptr;
        <span class="hljs-built_in">update_debug_info</span>();     <span class="hljs-comment">// 4å‘¨æœŸ</span>
        check_count += <span class="hljs-number">2</span>;
    }
    
    <span class="hljs-type">int</span>&amp; <span class="hljs-keyword">operator</span>*() {
        <span class="hljs-built_in">simulate_null_check</span>();   <span class="hljs-comment">// 2å‘¨æœŸ</span>
        check_count++;
        <span class="hljs-keyword">return</span> *ptr;
    }
};
</code></pre>
<p><strong>å¼€é”€åˆ†è§£è¡¨ï¼š</strong></p>















































<table><thead><tr><th>æ“ä½œ</th><th>åŸå§‹æŒ‡é’ˆ</th><th>unique_ptr(Debug)</th><th>é¢å¤–å¼€é”€</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>æ„é€ </strong></td><td>1æ¡æŒ‡ä»¤</td><td>15-20æ¡æŒ‡ä»¤</td><td>1400-2000%</td><td>åˆå§‹åŒ–è°ƒè¯•ä¿¡æ¯+æ£€æŸ¥</td></tr><tr><td><strong>ææ„</strong></td><td>call delete</td><td>10-15æ¡æŒ‡ä»¤</td><td>1000-1500%</td><td>æ‰€æœ‰æƒéªŒè¯+æ¸…ç†</td></tr><tr><td><strong>è§£å¼•ç”¨</strong></td><td>å†…å­˜è®¿é—®</td><td>å†…å­˜è®¿é—®+2æ£€æŸ¥</td><td>200-300%</td><td>ç©ºæŒ‡é’ˆå’Œæœ‰æ•ˆæ€§æ£€æŸ¥</td></tr><tr><td><strong>ç§»åŠ¨æ„é€ </strong></td><td>æŒ‡é’ˆå¤åˆ¶</td><td>æŒ‡é’ˆå¤åˆ¶+3æ£€æŸ¥</td><td>300-400%</td><td>æ‰€æœ‰æƒè½¬ç§»éªŒè¯</td></tr><tr><td><strong>reset()</strong></td><td>delete+èµ‹å€¼</td><td>delete+èµ‹å€¼+4æ£€æŸ¥</td><td>400-500%</td><td>å¤šé‡æ£€æŸ¥</td></tr></tbody></table>
<h2 data-id="heading-10">äº”ã€å¯¹æ¯”æµ‹è¯•ï¼šéªŒè¯å„é¡¹å¼€é”€</h2>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;memory&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;chrono&gt;</span></span>

<span class="hljs-comment">// è‡ªå®šä¹‰ç®€åŒ–unique_ptrï¼Œæ¨¡æ‹ŸReleaseæ¨¡å¼</span>
<span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T&gt;
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">LeanUniquePtr</span> {
    T* ptr;
    <span class="hljs-built_in">LeanUniquePtr</span>(T* p) : <span class="hljs-built_in">ptr</span>(p) {}
    ~<span class="hljs-built_in">LeanUniquePtr</span>() { <span class="hljs-keyword">delete</span> ptr; }
    T&amp; <span class="hljs-keyword">operator</span>*() { <span class="hljs-keyword">return</span> *ptr; }
    T* <span class="hljs-keyword">operator</span>-&gt;() { <span class="hljs-keyword">return</span> ptr; }
};

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">benchmark_debug_overhead</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">constexpr</span> <span class="hljs-type">int</span> N = <span class="hljs-number">1000000</span>;
    
    <span class="hljs-comment">// 1. æµ‹è¯•æ„é€ å¼€é”€</span>
    {
        <span class="hljs-keyword">auto</span> start = std::chrono::high_resolution_clock::<span class="hljs-built_in">now</span>();
        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; N; ++i) {
            <span class="hljs-type">int</span>* p = <span class="hljs-keyword">new</span> <span class="hljs-built_in">int</span>(i);
            <span class="hljs-keyword">delete</span> p;
        }
        <span class="hljs-keyword">auto</span> raw_time = std::chrono::<span class="hljs-built_in">duration</span>&lt;<span class="hljs-type">double</span>, std::milli&gt;(
            std::chrono::high_resolution_clock::<span class="hljs-built_in">now</span>() - start).<span class="hljs-built_in">count</span>();
        
        start = std::chrono::high_resolution_clock::<span class="hljs-built_in">now</span>();
        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; N; ++i) {
            <span class="hljs-keyword">auto</span> p = std::<span class="hljs-built_in">make_unique</span>&lt;<span class="hljs-type">int</span>&gt;(i);
        }
        <span class="hljs-keyword">auto</span> unique_time = std::chrono::<span class="hljs-built_in">duration</span>&lt;<span class="hljs-type">double</span>, std::milli&gt;(
            std::chrono::high_resolution_clock::<span class="hljs-built_in">now</span>() - start).<span class="hljs-built_in">count</span>();
        
        std::cout &lt;&lt; <span class="hljs-string">"æ„é€ /é”€æ¯å¼€é”€:\n"</span>;
        std::cout &lt;&lt; <span class="hljs-string">"  åŸå§‹æŒ‡é’ˆ: "</span> &lt;&lt; raw_time &lt;&lt; <span class="hljs-string">" ms\n"</span>;
        std::cout &lt;&lt; <span class="hljs-string">"  unique_ptr: "</span> &lt;&lt; unique_time &lt;&lt; <span class="hljs-string">" ms (x"</span> 
                  &lt;&lt; unique_time/raw_time &lt;&lt; <span class="hljs-string">")\n"</span>;
    }
    
    <span class="hljs-comment">// 2. æµ‹è¯•ä½¿ç”¨å¼€é”€</span>
    {
        <span class="hljs-keyword">auto</span> raw_ptr = <span class="hljs-keyword">new</span> <span class="hljs-built_in">int</span>(<span class="hljs-number">0</span>);
        <span class="hljs-keyword">auto</span> unique_ptr = std::<span class="hljs-built_in">make_unique</span>&lt;<span class="hljs-type">int</span>&gt;(<span class="hljs-number">0</span>);
        <span class="hljs-keyword">auto</span> lean_ptr = <span class="hljs-built_in">LeanUniquePtr</span>(<span class="hljs-keyword">new</span> <span class="hljs-built_in">int</span>(<span class="hljs-number">0</span>));
        
        <span class="hljs-keyword">volatile</span> <span class="hljs-type">int</span> sink = <span class="hljs-number">0</span>;
        
        <span class="hljs-keyword">auto</span> test_access = [&amp;](<span class="hljs-keyword">auto</span>&amp; ptr, <span class="hljs-type">const</span> <span class="hljs-type">char</span>* name) {
            <span class="hljs-keyword">auto</span> start = std::chrono::high_resolution_clock::<span class="hljs-built_in">now</span>();
            <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; N; ++i) {
                *ptr = i;
                sink += *ptr;
            }
            <span class="hljs-keyword">auto</span> time = std::chrono::<span class="hljs-built_in">duration</span>&lt;<span class="hljs-type">double</span>, std::milli&gt;(
                std::chrono::high_resolution_clock::<span class="hljs-built_in">now</span>() - start).<span class="hljs-built_in">count</span>();
            std::cout &lt;&lt; <span class="hljs-string">"  "</span> &lt;&lt; name &lt;&lt; <span class="hljs-string">": "</span> &lt;&lt; time &lt;&lt; <span class="hljs-string">" ms\n"</span>;
            <span class="hljs-keyword">return</span> time;
        };
        
        std::cout &lt;&lt; <span class="hljs-string">"\nè®¿é—®å¼€é”€:\n"</span>;
        <span class="hljs-built_in">test_access</span>(raw_ptr, <span class="hljs-string">"åŸå§‹æŒ‡é’ˆ"</span>);
        <span class="hljs-built_in">test_access</span>(unique_ptr, <span class="hljs-string">"unique_ptr(Debug)"</span>);
        <span class="hljs-built_in">test_access</span>(lean_ptr, <span class="hljs-string">"LeanUniquePtr(æ¨¡æ‹ŸRelease)"</span>);
        
        <span class="hljs-keyword">delete</span> raw_ptr;
    }
}
</code></pre>
<h2 data-id="heading-11">å…­ã€ç¼–è¯‘å™¨è§†è§’ï¼šä¼˜åŒ–å¦‚ä½•æ¶ˆé™¤å¼€é”€</h2>
<h3 data-id="heading-12">6.1 Releaseæ¨¡å¼çš„ä¼˜åŒ–ç­–ç•¥</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// ç¼–è¯‘å™¨ä¼˜åŒ–ç¤ºä¾‹</span>
<span class="hljs-function"><span class="hljs-keyword">auto</span> <span class="hljs-title">example</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">auto</span> p = std::<span class="hljs-built_in">make_unique</span>&lt;<span class="hljs-type">int</span>&gt;(<span class="hljs-number">42</span>);
    <span class="hljs-keyword">return</span> *p + <span class="hljs-number">1</span>;
}

<span class="hljs-comment">// Releaseä¼˜åŒ–åï¼š</span>
<span class="hljs-built_in">example</span>():
    mov     eax, <span class="hljs-number">43</span>    ; ç›´æ¥è®¡ç®—ç»“æœ
    ret                ; æ¶ˆé™¤æ‰€æœ‰åˆ†é…ï¼

<span class="hljs-comment">// å¯¹æ¯”Debugï¼š</span>
<span class="hljs-built_in">example</span>():
    ; <span class="hljs-number">20</span>+æ¡æŒ‡ä»¤ï¼ŒåŒ…æ‹¬ï¼š
    ; <span class="hljs-number">1.</span> åˆ†é…å†…å­˜
    ; <span class="hljs-number">2.</span> åˆå§‹åŒ–unique_ptr
    ; <span class="hljs-number">3.</span> å­˜å‚¨å€¼<span class="hljs-number">42</span>
    ; <span class="hljs-number">4.</span> è§£å¼•ç”¨ï¼ˆå«æ£€æŸ¥ï¼‰
    ; <span class="hljs-number">5.</span> åŠ <span class="hljs-number">1</span>
    ; <span class="hljs-number">6.</span> ææ„unique_ptr
    ; <span class="hljs-number">7.</span> é‡Šæ”¾å†…å­˜
</code></pre>
<h3 data-id="heading-13">6.2 å…³é”®ä¼˜åŒ–æŠ€æœ¯</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// 1. å†…è”å±•å¼€ (Inlining)</span>
<span class="hljs-comment">// Debug: å‡½æ•°è°ƒç”¨ä¿ç•™</span>
<span class="hljs-keyword">auto</span> p = std::<span class="hljs-built_in">make_unique</span>&lt;<span class="hljs-type">int</span>&gt;(<span class="hljs-number">42</span>);  <span class="hljs-comment">// å‡½æ•°è°ƒç”¨</span>

<span class="hljs-comment">// Release: å®Œå…¨å†…è”</span>
<span class="hljs-comment">// make_uniqueè¢«å±•å¼€ä¸ºç›´æ¥newæ“ä½œ</span>
<span class="hljs-comment">// unique_ptræ„é€ å‡½æ•°è¢«å†…è”</span>

<span class="hljs-comment">// 2. æ­»ä»£ç æ¶ˆé™¤ (DCE)</span>
<span class="hljs-comment">// Debug: æ‰€æœ‰ä»£ç ä¿ç•™</span>
{
    <span class="hljs-keyword">auto</span> p = std::<span class="hljs-built_in">make_unique</span>&lt;<span class="hljs-type">int</span>&gt;(<span class="hljs-number">42</span>);
    <span class="hljs-comment">// å³ä½¿pæœªè¢«ä½¿ç”¨ï¼Œä»£ç ä»æ‰§è¡Œ</span>
}

<span class="hljs-comment">// Release: æ•´ä¸ªå—è¢«æ¶ˆé™¤</span>
<span class="hljs-comment">// å› ä¸ºpæœªè¢«ä½¿ç”¨ï¼Œåˆ†é…å’Œé‡Šæ”¾éƒ½è¢«æ¶ˆé™¤</span>

<span class="hljs-comment">// 3. å¸¸é‡ä¼ æ’­ (Constant Propagation)</span>
<span class="hljs-comment">// Debug: æŒ‰éƒ¨å°±ç­æ‰§è¡Œ</span>
<span class="hljs-keyword">auto</span> p = std::<span class="hljs-built_in">make_unique</span>&lt;<span class="hljs-type">int</span>&gt;(<span class="hljs-number">42</span>);
<span class="hljs-type">int</span> x = *p + <span class="hljs-number">10</span>;  <span class="hljs-comment">// æ‰§è¡Œè§£å¼•ç”¨</span>

<span class="hljs-comment">// Release: ç›´æ¥è®¡ç®—</span>
<span class="hljs-type">int</span> x = <span class="hljs-number">52</span>;  <span class="hljs-comment">// 42 + 10</span>

<span class="hljs-comment">// 4. æ ˆä¸Šåˆ†é… (Stack Allocation)</span>
<span class="hljs-comment">// Debug: æ€»æ˜¯å †åˆ†é…</span>
<span class="hljs-keyword">auto</span> p = std::<span class="hljs-built_in">make_unique</span>&lt;SmallObject&gt;();

<span class="hljs-comment">// Release: å¯èƒ½ä¼˜åŒ–ä¸ºæ ˆåˆ†é…</span>
SmallObject temp;  <span class="hljs-comment">// å¦‚æœç”Ÿå‘½å‘¨æœŸå¯åˆ†æ</span>

<span class="hljs-comment">// 5. è¿”å›å€¼ä¼˜åŒ– (RVO/NRVO)</span>
<span class="hljs-function">std::unique_ptr&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">factory</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">return</span> std::<span class="hljs-built_in">make_unique</span>&lt;<span class="hljs-type">int</span>&gt;(<span class="hljs-number">42</span>);
}
<span class="hljs-comment">// Release: ç›´æ¥åœ¨è°ƒç”¨è€…ç©ºé—´æ„é€ </span>
</code></pre>
<h2 data-id="heading-14">ä¸ƒã€å®é™…é¡¹ç›®ä¸­çš„å½±å“</h2>
<h3 data-id="heading-15">7.1 æ¸¸æˆå¼€å‘ä¸­çš„æ¡ˆä¾‹</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// æ¸¸æˆå¾ªç¯ä¸­ - Debugæ€§èƒ½ç¾éš¾</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">Game::update</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">auto</span>&amp; entity : entities) {
        <span class="hljs-comment">// Debugæ¨¡å¼ä¸‹ï¼šæ¯æ¬¡éƒ½æœ‰å·¨å¤§å¼€é”€</span>
        <span class="hljs-keyword">auto</span> event = std::<span class="hljs-built_in">make_unique</span>&lt;Event&gt;();
        entity-&gt;<span class="hljs-built_in">process</span>(std::<span class="hljs-built_in">move</span>(event));
    }
}

<span class="hljs-comment">// æ€§èƒ½å¯¹æ¯”ï¼š</span>
<span class="hljs-comment">// Debug: 1000 entities Ã— 60fps = 60,000æ¬¡/ç§’åˆ†é…</span>
<span class="hljs-comment">//       æ¯å¸§å»¶è¿Ÿ: 50-100ms (ä¸å¯ç©)</span>
<span class="hljs-comment">// Release: å¯èƒ½ä¼˜åŒ–ä¸ºé‡ç”¨æ± æˆ–æ ˆåˆ†é…</span>
<span class="hljs-comment">//       æ¯å¸§å»¶è¿Ÿ: 1-2ms (æµç•…)</span>

<span class="hljs-comment">// è§£å†³æ–¹æ¡ˆï¼šDebugæ¨¡å¼ä¹Ÿä¼˜åŒ–</span>
<span class="hljs-meta">#<span class="hljs-keyword">ifdef</span> _DEBUG</span>
<span class="hljs-comment">// ä½¿ç”¨è½»é‡çº§è°ƒè¯•ç‰ˆæœ¬</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> MY_MAKE_UNIQUE(p) (new p)  <span class="hljs-comment">// Debugæ¨¡å¼ç”¨åŸå§‹æŒ‡é’ˆ</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">else</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> MY_MAKE_UNIQUE(p) std::make_unique<span class="hljs-string">&lt;p&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">endif</span></span>
</code></pre>
<h3 data-id="heading-16">7.2 åµŒå…¥å¼ç³»ç»Ÿçš„è€ƒè™‘</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// åµŒå…¥å¼å¼€å‘ - èµ„æºå—é™ç¯å¢ƒ</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">EmbeddedSystem</span> {
<span class="hljs-meta">#<span class="hljs-keyword">if</span> defined(DEBUG_BUILD) &amp;&amp; defined(RESOURCE_CONSTRAINED)</span>
    <span class="hljs-comment">// ä½¿ç”¨è‡ªå®šä¹‰è½»é‡çº§æ™ºèƒ½æŒ‡é’ˆ</span>
    <span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T&gt;
    <span class="hljs-keyword">using</span> LightUniquePtr = T*;  <span class="hljs-comment">// Debugä¹Ÿç”¨æ‰‹åŠ¨ç®¡ç†</span>
    
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">process</span><span class="hljs-params">()</span> </span>{
        LightUniquePtr&lt;SensorData&gt; data = <span class="hljs-built_in">acquireData</span>();
        <span class="hljs-comment">// å¿…é¡»æ‰‹åŠ¨ç®¡ç†ï¼</span>
    }
<span class="hljs-meta">#<span class="hljs-keyword">else</span></span>
    <span class="hljs-comment">// Releaseä½¿ç”¨æ ‡å‡†æ™ºèƒ½æŒ‡é’ˆ</span>
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">process</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">auto</span> data = std::<span class="hljs-built_in">make_unique</span>&lt;SensorData&gt;();
        <span class="hljs-comment">// è‡ªåŠ¨ç®¡ç†</span>
    }
<span class="hljs-meta">#<span class="hljs-keyword">endif</span></span>
};
</code></pre>
<h2 data-id="heading-17">å…«ã€ä¼˜åŒ–å»ºè®®ï¼šå¹³è¡¡è°ƒè¯•å’Œæ€§èƒ½</h2>
<h3 data-id="heading-18">8.1 åˆ†çº§è°ƒè¯•</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// CMakeé…ç½®ç¤ºä¾‹</span>
<span class="hljs-built_in">option</span>(DEBUG_PERFORMANCE <span class="hljs-string">"Enable performance in debug"</span> OFF)
<span class="hljs-built_in">option</span>(DEBUG_SAFETY <span class="hljs-string">"Enable safety checks in debug"</span> ON)
<span class="hljs-built_in">option</span>(DEBUG_MEMORY <span class="hljs-string">"Enable memory debugging"</span> OFF)

<span class="hljs-meta">#<span class="hljs-keyword">ifdef</span> _DEBUG</span>
<span class="hljs-meta">#<span class="hljs-keyword">if</span> DEBUG_PERFORMANCE</span>
    <span class="hljs-comment">// æ€§èƒ½è°ƒè¯•æ¨¡å¼ï¼šæœ€å°æ£€æŸ¥</span>
    <span class="hljs-meta">#<span class="hljs-keyword">define</span> MY_UNIQUE_PTR std::unique_ptr</span>
<span class="hljs-meta">#<span class="hljs-keyword">elif</span> DEBUG_SAFETY</span>
    <span class="hljs-comment">// å®‰å…¨è°ƒè¯•æ¨¡å¼ï¼šæ ‡å‡†æ£€æŸ¥</span>
    <span class="hljs-meta">#<span class="hljs-keyword">define</span> MY_UNIQUE_PTR std::_Debug_unique_ptr  <span class="hljs-comment">// æ ‡å‡†è°ƒè¯•ç‰ˆæœ¬</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">elif</span> DEBUG_MEMORY</span>
    <span class="hljs-comment">// å†…å­˜è°ƒè¯•æ¨¡å¼ï¼šæœ€å¤§æ£€æŸ¥</span>
    <span class="hljs-meta">#<span class="hljs-keyword">define</span> MY_UNIQUE_PTR std::_Debug_with_memory_check_unique_ptr</span>
<span class="hljs-meta">#<span class="hljs-keyword">endif</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">else</span></span>
    <span class="hljs-comment">// Releaseæ¨¡å¼ï¼šæ— æ£€æŸ¥</span>
    <span class="hljs-meta">#<span class="hljs-keyword">define</span> MY_UNIQUE_PTR std::unique_ptr</span>
<span class="hljs-meta">#<span class="hljs-keyword">endif</span></span>
</code></pre>
<h3 data-id="heading-19">8.2 é€‰æ‹©æ€§å¯ç”¨æ£€æŸ¥</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// è‡ªå®šä¹‰æ™ºèƒ½æŒ‡é’ˆï¼Œå¯é…ç½®æ£€æŸ¥çº§åˆ«</span>
<span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T, <span class="hljs-type">int</span> DebugLevel = <span class="hljs-number">1</span>&gt;
<span class="hljs-keyword">class</span> ConfigurableUniquePtr {
    T* ptr;
    
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">debug_check</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-function"><span class="hljs-keyword">if</span> <span class="hljs-title">constexpr</span> <span class="hljs-params">(DebugLevel &gt;= <span class="hljs-number">1</span>)</span> </span>{
            <span class="hljs-keyword">if</span>(ptr == <span class="hljs-literal">nullptr</span>) <span class="hljs-built_in">throw_nullptr</span>();
        }
        <span class="hljs-function"><span class="hljs-keyword">if</span> <span class="hljs-title">constexpr</span> <span class="hljs-params">(DebugLevel &gt;= <span class="hljs-number">2</span>)</span> </span>{
            <span class="hljs-keyword">if</span>(!<span class="hljs-built_in">is_valid_pointer</span>(ptr)) <span class="hljs-built_in">throw_invalid_ptr</span>();
        }
        <span class="hljs-function"><span class="hljs-keyword">if</span> <span class="hljs-title">constexpr</span> <span class="hljs-params">(DebugLevel &gt;= <span class="hljs-number">3</span>)</span> </span>{
            <span class="hljs-built_in">track_allocation</span>(<span class="hljs-keyword">this</span>);  <span class="hljs-comment">// å†…å­˜è·Ÿè¸ª</span>
        }
    }
    
<span class="hljs-keyword">public</span>:
    T&amp; <span class="hljs-keyword">operator</span>*() {
        <span class="hljs-built_in">debug_check</span>();  <span class="hljs-comment">// æ ¹æ®DebugLevelé€‰æ‹©æ€§æ£€æŸ¥</span>
        <span class="hljs-keyword">return</span> *ptr;
    }
};
</code></pre>
<h2 data-id="heading-20">ç»“è®º</h2>
<h3 data-id="heading-21"><strong>ä¸ºä»€ä¹ˆDebugæ¨¡å¼ä¸‹unique_ptrè¿™ä¹ˆæ…¢ï¼Ÿ</strong></h3>
<ol>
<li><strong>å‡½æ•°è°ƒç”¨æœªå†…è”</strong>ï¼šæ¯ä¸ªæ“ä½œéƒ½æ˜¯å‡½æ•°è°ƒç”¨ï¼Œéå†…è”å±•å¼€</li>
<li><strong>è¿è¡Œæ—¶æ£€æŸ¥</strong>ï¼šç©ºæŒ‡é’ˆã€æœ‰æ•ˆæ€§ã€æ‰€æœ‰æƒç­‰æ£€æŸ¥</li>
<li><strong>è°ƒè¯•ä¿¡æ¯</strong>ï¼šè·Ÿè¸ªæŒ‡é’ˆçŠ¶æ€ã€å¼•ç”¨è®¡æ•°ç­‰</li>
<li><strong>ä¼˜åŒ–ç¦ç”¨</strong>ï¼šæ— å¸¸é‡ä¼ æ’­ã€æ— æ­»ä»£ç æ¶ˆé™¤ã€æ— æ ˆåˆ†é…ä¼˜åŒ–</li>
<li><strong>å®‰å…¨æ€§ä¼˜å…ˆ</strong>ï¼šç‰ºç‰²æ€§èƒ½ç¡®ä¿é”™è¯¯å¯æ£€æµ‹</li>
</ol>
<h3 data-id="heading-22"><strong>Releaseæ¨¡å¼ä¸ºä»€ä¹ˆå¿«ï¼Ÿ</strong></h3>
<ol>
<li><strong>å®Œå…¨å†…è”</strong>ï¼šæ‰€æœ‰å‡½æ•°è°ƒç”¨è¢«å±•å¼€</li>
<li><strong>æ£€æŸ¥æ¶ˆé™¤</strong>ï¼šç¼–è¯‘å™¨è¯æ˜å®‰å…¨åç§»é™¤æ£€æŸ¥</li>
<li><strong>æ¿€è¿›ä¼˜åŒ–</strong>ï¼šå¸¸é‡ä¼ æ’­ã€æ­»ä»£ç æ¶ˆé™¤ã€å¾ªç¯ä¼˜åŒ–</li>
<li><strong>å†…å­˜ä¼˜åŒ–</strong>ï¼šå¯èƒ½ä½¿ç”¨æ ˆåˆ†é…æˆ–å®Œå…¨æ¶ˆé™¤åˆ†é…</li>
<li><strong>æŒ‡ä»¤é‡æ’</strong>ï¼šCPUæµæ°´çº¿ä¼˜åŒ–</li>
</ol>
<h3 data-id="heading-23"><strong>å·¥ç¨‹å¯ç¤º</strong></h3>
<ol>
<li><strong>ä¸è¦ç”¨Debugæ€§èƒ½åˆ¤æ–­ç”Ÿäº§æ€§èƒ½</strong>ï¼šå·®å¼‚å¯è¾¾10-100å€</li>
<li><strong>æ€§èƒ½æµ‹è¯•ç”¨Releaseæ¨¡å¼</strong>ï¼šDebugæµ‹è¯•ç»“æœæœ‰è¯¯å¯¼æ€§</li>
<li><strong>åˆ†çº§è°ƒè¯•é…ç½®</strong>ï¼šæ ¹æ®ä¸åŒéœ€æ±‚é…ç½®æ£€æŸ¥çº§åˆ«</li>
<li><strong>ç†è§£å·¥å…·é“¾</strong>ï¼šçŸ¥é“ç¼–è¯‘å™¨åœ¨åšä»€ä¹ˆï¼Œæ‰èƒ½æœ‰æ•ˆä¼˜åŒ–</li>
</ol>
<p><strong>å…³é”®è®¤çŸ¥</strong>ï¼šDebugæ¨¡å¼çš„æ…¢ä¸æ˜¯<code>unique_ptr</code>çš„ç¼ºé™·ï¼Œè€Œæ˜¯è°ƒè¯•æ”¯æŒçš„ä»£ä»·ã€‚è¿™æ˜¯ç”¨æ€§èƒ½æ¢å–å¼€å‘ä¾¿åˆ©æ€§å’Œé”™è¯¯æ£€æµ‹èƒ½åŠ›çš„åˆç†æƒè¡¡ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€HarmonyOSåº”ç”¨å¼€å‘ã€‘é¸¿è’™åº”ç”¨å®ç°æ¨ªç«–å±åˆ‡æ¢çš„ä¸¤ç§æ–¹å¼ä»¥åŠæ³¨æ„äº‹é¡¹]]></title>    <link>https://juejin.cn/post/7594262760940093474</link>    <guid>https://juejin.cn/post/7594262760940093474</guid>    <pubDate>2026-01-12T11:36:09.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594262760940093474" data-draft-id="7594262760940077090" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€HarmonyOSåº”ç”¨å¼€å‘ã€‘é¸¿è’™åº”ç”¨å®ç°æ¨ªç«–å±åˆ‡æ¢çš„ä¸¤ç§æ–¹å¼ä»¥åŠæ³¨æ„äº‹é¡¹"/> <meta itemprop="keywords" content="HarmonyOS"/> <meta itemprop="datePublished" content="2026-01-12T11:36:09.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="GeorgePanda"/> <meta itemprop="url" content="https://juejin.cn/user/1239904847930654"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€HarmonyOSåº”ç”¨å¼€å‘ã€‘é¸¿è’™åº”ç”¨å®ç°æ¨ªç«–å±åˆ‡æ¢çš„ä¸¤ç§æ–¹å¼ä»¥åŠæ³¨æ„äº‹é¡¹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1239904847930654/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    GeorgePanda
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-12T11:36:09.000Z" title="Mon Jan 12 2026 11:36:09 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ã€HarmonyOSåº”ç”¨å¼€å‘ã€‘é¸¿è’™åº”ç”¨å®ç°æ¨ªç«–å±åˆ‡æ¢çš„ä¸¤ç§æ–¹å¼ä»¥åŠæ³¨æ„äº‹é¡¹</h2>
<h2 data-id="heading-1">ä¸€ã€æ¦‚è¿°</h2>
<p><strong>ç›®å‰å…±è¿˜æœ‰ä¸¤ç§æ–¹å¼å®ç°åº”ç”¨çš„æ¨ªç«–å±åˆ‡æ¢ã€‚</strong>
1ã€é™æ€é…ç½®
2ã€åŠ¨æ€è°ƒç”¨æ¥å£</p>
<p><strong>æ³¨æ„äº‹é¡¹ï¼š</strong>
1ã€è®¾ç½®ä¸»çª—å£çš„æ˜¾ç¤ºæ–¹å‘å±æ€§ã€‚ä»…åœ¨æ”¯æŒè·Ÿéšsensoræ—‹è½¬çš„è®¾å¤‡ä¸Šç”Ÿæ•ˆï¼Œå­çª—å£è°ƒç”¨åä¸ç”Ÿæ•ˆã€‚
2ã€module.json5ä¸­ã€‚"orientation": â€œauto_rotationâ€éšä¼ æ„Ÿå™¨æ—‹è½¬ éœ€è¦åœ¨ç³»ç»Ÿä¸‹æ»‘èœå•ä¸­ï¼Œæ”¾å¼€è‡ªåŠ¨é”å®šçŠ¶æ€æ‰å¯ç”Ÿæ•ˆã€‚
3ã€é€€å‡ºé€»è¾‘çš„é—­ç¯ã€‚ä¾‹å¦‚åªæœ‰è¿›å…¥å½“å‰é¡µé¢éœ€è¦æŸç§æ¨ªç«–å±çŠ¶æ€ï¼Œæ¨å‡ºè¯¥ç•Œé¢æ—¶ï¼Œéœ€è¦å°†çŠ¶æ€é‡ç½®å›åŸå…ˆã€‚</p>
<h2 data-id="heading-2">äºŒã€æ­¥éª¤è§£é‡Šå’Œæºç DEMO</h2>
<p><strong>1ã€é™æ€é…ç½®ï¼š</strong>
åœ¨module.json5æ·»åŠ å±æ€§"orientation" å…·ä½“çš„å€¼ã€‚æ•°å€¼è¯¦æƒ…å‚è§ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.huawei.com%2Fconsumer%2Fcn%2Fdoc%2Fharmonyos-references%2Farkts-apis-window-e%23orientation9" target="_blank" title="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-window-e#orientation9" ref="nofollow noopener noreferrer">developer.huawei.com/consumer/cnâ€¦</a></p>
<p><strong>å¸¸ç”¨é…ç½®å€¼ï¼š</strong>
portraitï¼šä»…ç«–å±
landscapeï¼šä»…æ¨ªå±
auto_rotation_restrictedï¼šè·Ÿéšä¼ æ„Ÿå™¨æ—‹è½¬ï¼Œå—ç³»ç»Ÿæ—‹è½¬é”å®šæ§åˆ¶
follow_desktopï¼šè·Ÿéšæ¡Œé¢çš„æ—‹è½¬æ¨¡å¼ã€‚é€‚é…ä¸åŒè®¾å¤‡å½¢æ€ï¼ˆå¦‚æŠ˜å æœºå±•å¼€æ—¶è‡ªåŠ¨æ¨ªå±ï¼‰</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-string">"abilities"</span>: [ 
  { 
    <span class="hljs-string">"name"</span>: <span class="hljs-string">"EntryAbility"</span>, 
    <span class="hljs-string">"srcEntry"</span>: <span class="hljs-string">"./ets/entryability/EntryAbility.ets"</span>, 
    <span class="hljs-string">"description"</span>: <span class="hljs-string">"$string:EntryAbility_desc"</span>, 
    <span class="hljs-string">"icon"</span>: <span class="hljs-string">"$media:icon"</span>, 
    <span class="hljs-string">"label"</span>: <span class="hljs-string">"$string:EntryAbility_label"</span>, 
    <span class="hljs-string">"startWindowIcon"</span>: <span class="hljs-string">"$media:startIcon"</span>, 
    <span class="hljs-string">"startWindowBackground"</span>: <span class="hljs-string">"$color:start_window_background"</span>, 
    <span class="hljs-string">"exported"</span>: <span class="hljs-literal">true</span>, 
    <span class="hljs-string">"skills"</span>: [ 
      { 
        <span class="hljs-string">"entities"</span>: [ 
          <span class="hljs-string">"entity.system.home"</span> 
        ], 
        <span class="hljs-string">"actions"</span>: [ 
          <span class="hljs-string">"action.system.home"</span> 
        ] 
      } 
    ], 
    <span class="hljs-string">"orientation"</span>: <span class="hljs-string">"auto_rotation"</span>, <span class="hljs-comment">// éšä¼ æ„Ÿå™¨æ—‹è½¬ </span>
  } 
]

</code></pre>
<p><strong>2ã€è°ƒç”¨æ¥å£æ‰‹åŠ¨åˆ‡æ¢ï¼š</strong>
æ ¸å¿ƒä»£ç æ˜¯è°ƒç”¨çª—å£çš„ setPreferredOrientationæ–¹æ³•ï¼ŒåŠ¨æ€ä¿®æ”¹çª—å£æ–¹å‘ã€‚æ‰€ä»¥é¦–å…ˆæˆ‘ä»¬è¦è·å–ä¸»çª—å£ã€‚</p>
<p>ä¸å»ºè®®ä½¿ç”¨window.getLastWindowè¿™ç§æ–¹å¼ï¼Œè·å–å½“å‰çš„çª—å£ã€‚å› ä¸ºè¯¥æ¥å£æ˜¯å¼‚æ­¥ï¼ŒçŠ¶æ€è·å–ä¸ç¨³å®šï¼Œå¹¶ä¸”æœ‰æ€§èƒ½æŸè€—ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">AbilityConstant</span>, <span class="hljs-title class_">UIAbility</span>, <span class="hljs-title class_">Want</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-variable language_">window</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EntryAbility</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">UIAbility</span> {

  <span class="hljs-title function_">onWindowStageCreate</span>(<span class="hljs-attr">windowStage</span>: <span class="hljs-variable language_">window</span>.<span class="hljs-property">WindowStage</span>): <span class="hljs-built_in">void</span> {
    <span class="hljs-comment">// æŒ‚è½½globalThisä¸Šï¼Œå¯ä»¥å½“å…¨å±€å¯¹è±¡ä½¿ç”¨ã€‚å½“ç„¶æ­¤å¤„å®ç°æ–¹å¼å› äººè€Œå¼‚ï¼Œä½ å¯ä»¥æ”¾åœ¨å•ä¾‹é‡Œï¼Œæˆ–è€…APPstoreä¸­ç­‰ç­‰. ç›®å‰api20å·²ç»ä¸æ¨èglobalThisè¯¥æ–¹å¼</span>
    globalThis.<span class="hljs-property">windowClass</span> = windowStage.<span class="hljs-title function_">getMainWindowSync</span>();
		<span class="hljs-comment">// ä¸€èˆ¬æ˜¯ç¼“å­˜å½“å‰èˆå°ï¼Œä¹Ÿå°±æ˜¯windowStageï¼Œå¯ä»¥åœ¨ä»»æ„é€»è¾‘ç±»æˆ–è€…UIç±»ä¸­ï¼Œè¿›è¡Œèˆå°ï¼Œçª—å£ï¼Œæˆ–è€…ä¸Šä¸‹æ–‡çš„è·å–ã€‚è¾ƒä¸ºçµæ´»ã€‚</span>
    
    windowStage.<span class="hljs-title function_">loadContent</span>(<span class="hljs-string">'pages/RotationTestPage'</span>, <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
      <span class="hljs-keyword">if</span> (err.<span class="hljs-property">code</span>) {
        <span class="hljs-keyword">return</span>;
      }
    });
  }
}


</code></pre>
<p>ä¹‹ååœ¨éœ€è¦è°ƒç”¨æ¨ªç«–å±åˆ‡æ¢çš„é¡µé¢æˆ–è€…é€»è¾‘ä¸­è°ƒç”¨ï¼Œæˆ‘è¿™é‡Œç”¨æŒ‰é’®è§¦å‘ä¸¾ä¾‹ï¼š
RotationTestPage.ets</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-variable language_">window</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;

<span class="hljs-meta">@Entry</span>
<span class="hljs-meta">@Component</span>
struct <span class="hljs-title class_">RotationTestPage</span> {
  <span class="hljs-keyword">private</span> <span class="hljs-attr">TAG</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">"RotationTestPage"</span>;

  onClickRotation = <span class="hljs-function">()=&gt;</span>{
  	<span class="hljs-comment">// è®¾ç½®æ¨ªç«–å±çŠ¶æ€</span>
    <span class="hljs-keyword">let</span> orientation = <span class="hljs-variable language_">window</span>.<span class="hljs-property">Orientation</span>.<span class="hljs-property">LANDSCAPE</span>;
    <span class="hljs-keyword">try</span>{
      globalThis.<span class="hljs-property">windowClass</span>.<span class="hljs-title function_">setPreferredOrientation</span>(orientation, <span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {
        <span class="hljs-keyword">if</span>(err.<span class="hljs-property">code</span>){
          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">TAG</span>, <span class="hljs-string">'Failed to set window orientation. Cause: '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(err));
          <span class="hljs-keyword">return</span>;
        }
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">TAG</span>,<span class="hljs-string">'Succeeded in setting window orientation.'</span>);
      });
    }<span class="hljs-keyword">catch</span> (exception) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">TAG</span>,<span class="hljs-string">'Failed to set window orientation. Cause: '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(exception));
    }
  }

  <span class="hljs-title function_">build</span>(<span class="hljs-params"/>) {
    <span class="hljs-title class_">RelativeContainer</span>() {
      <span class="hljs-title class_">Text</span>(<span class="hljs-string">"ç‚¹å‡»åˆ‡æ¢ä¸ºæ¨ªå±"</span>)
        .<span class="hljs-title function_">id</span>(<span class="hljs-string">'RotationTestPageHelloWorld'</span>)
        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">50</span>)
        .<span class="hljs-title function_">fontWeight</span>(<span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Bold</span>)
        .<span class="hljs-title function_">alignRules</span>({
          <span class="hljs-attr">center</span>: { <span class="hljs-attr">anchor</span>: <span class="hljs-string">'__container__'</span>, <span class="hljs-attr">align</span>: <span class="hljs-title class_">VerticalAlign</span>.<span class="hljs-property">Center</span> },
          <span class="hljs-attr">middle</span>: { <span class="hljs-attr">anchor</span>: <span class="hljs-string">'__container__'</span>, <span class="hljs-attr">align</span>: <span class="hljs-title class_">HorizontalAlign</span>.<span class="hljs-property">Center</span> }
        })
        .<span class="hljs-title function_">onClick</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">onClickRotation</span>)
    }
    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)
    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)
  }
}

</code></pre>
<h2 data-id="heading-3">ä¸‰ã€å¦‚ä½•ç›‘å¬å±å¹•æ—‹è½¬</h2>
<p>è¿™åœ¨å¤„ç†å±å¹•æ—‹è½¬é€»è¾‘ä¸­ï¼Œç»å¸¸ä¹Ÿä¼šç”¨åˆ°ã€‚ä½¿ç”¨åª’ä½“æŸ¥è¯¢æ¥å£ç›‘å¬å±å¹•æ—‹è½¬ï¼Œä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { mediaquery } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>; 
<span class="hljs-keyword">let</span> listener = mediaquery.<span class="hljs-title function_">matchMediaSync</span>(<span class="hljs-string">'(orientation: landscape)'</span>); <span class="hljs-comment">// ç›‘å¬æ¨ªå±äº‹ä»¶ </span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">onPortrait</span>(<span class="hljs-params">mediaQueryResult: mediaquery.MediaQueryResult</span>) { 
  <span class="hljs-keyword">if</span> (mediaQueryResult.<span class="hljs-property">matches</span>) { 
   <span class="hljs-comment">// do something here </span>
  } <span class="hljs-keyword">else</span> { 
   <span class="hljs-comment">// do something here </span>
  } 
} 
listener.<span class="hljs-title function_">on</span>(<span class="hljs-string">'change'</span>, onPortrait) <span class="hljs-comment">// æ³¨å†Œå›è°ƒ </span>
listener.<span class="hljs-title function_">off</span>(<span class="hljs-string">'change'</span>, onPortrait) <span class="hljs-comment">// å»æ³¨å†Œå›è°ƒ</span>

</code></pre>
<h2 data-id="heading-4">å¼•ç”¨èµ„æ–™åœ°å€ï¼š</h2>
<p>å®˜æ–¹æ–‡æ¡£ï¼Œæ¨ªç«–å±åˆ‡æ¢å†…å®¹ï¼š
<a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.huawei.com%2Fconsumer%2Fcn%2Fdoc%2Fbest-practices%2Fbpta-landscape-and-portrait-development%23section289353110179" target="_blank" title="https://developer.huawei.com/consumer/cn/doc/best-practices/bpta-landscape-and-portrait-development#section289353110179" ref="nofollow noopener noreferrer">developer.huawei.com/consumer/cnâ€¦</a></p>
<p>æ¨ªç«–å±åˆ‡æ¢é…ç½®ï¼Œæ•°å€¼çš„å…·ä½“å‚æ•°å€¼ä»‹ç»ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.huawei.com%2Fconsumer%2Fcn%2Fdoc%2Fharmonyos-guides%2Fmodule-configuration-file%23abilities%25E6%25A0%2587%25E7%25AD%25BE" target="_blank" title="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/module-configuration-file#abilities%E6%A0%87%E7%AD%BE" ref="nofollow noopener noreferrer">developer.huawei.com/consumer/cnâ€¦</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.huawei.com%2Fconsumer%2Fcn%2Fdoc%2Fharmonyos-references%2Farkts-apis-window-e%23orientation9" target="_blank" title="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-window-e#orientation9" ref="nofollow noopener noreferrer">developer.huawei.com/consumer/cnâ€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[AIç¼–æ’å®æˆ˜ï¼šç”¨ n8n + DeepSeek + Groq æ‰“é€ å…¨è‡ªåŠ¨è§†é¢‘æ´—ç¨¿æµæ°´çº¿]]></title>    <link>https://juejin.cn/post/7594282984326234121</link>    <guid>https://juejin.cn/post/7594282984326234121</guid>    <pubDate>2026-01-12T11:43:44.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594282984326234121" data-draft-id="7594309641866199078" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="AIç¼–æ’å®æˆ˜ï¼šç”¨ n8n + DeepSeek + Groq æ‰“é€ å…¨è‡ªåŠ¨è§†é¢‘æ´—ç¨¿æµæ°´çº¿"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯,JavaScript"/> <meta itemprop="datePublished" content="2026-01-12T11:43:44.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ‘¸é±¼çš„æ˜¥å“¥"/> <meta itemprop="url" content="https://juejin.cn/user/1714893870865303"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            AIç¼–æ’å®æˆ˜ï¼šç”¨ n8n + DeepSeek + Groq æ‰“é€ å…¨è‡ªåŠ¨è§†é¢‘æ´—ç¨¿æµæ°´çº¿
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1714893870865303/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ‘¸é±¼çš„æ˜¥å“¥
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-12T11:43:44.000Z" title="Mon Jan 12 2026 11:43:44 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;font-weight:400;line-height:2;font-size:17px;overflow-x:hidden;color:#000}.markdown-body strong{padding:1px;color:#ee3f4d}.markdown-body em{padding:0 2px;color:#f33b1f}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{position:relative;margin-top:30px;margin-bottom:20px;line-height:1.5;font-weight:700}.markdown-body h1{text-align:center;padding-bottom:5px;font-size:32px;color:#ac1f18}.markdown-body h1:after{content:"";display:block;margin:4px auto 0;width:100px;height:2px;border-bottom:2px solid #f33b1f}.markdown-body h2{font-size:28px;border-bottom:1px solid #f33b1f}.markdown-body h2:before{content:"# "!important;color:#f33b1f}.markdown-body h3{font-size:24px;padding-left:9px;border-left:6px solid #f33b1f}.markdown-body h4{font-size:20px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #bbb;margin:16px 0}.markdown-body code{word-break:break-word;overflow-x:auto;background-color:#f9f1db;color:#ee2746;border-radius:2px;font-size:16px;padding:1px 2px}.markdown-body code,.markdown-body pre{font-family:-apple-system,-apple-system-body,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,PingFang SC,æ€æºé»‘ä½“ CN,æ€æºé»‘ä½“,JetBrains Mono,Fira Code,Menlo,Ubuntu Mono,Consolas,sans-serif}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{margin:12px 0!important;border-radius:3px;font-size:15px;padding:16px 12px;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f7f7f7}.markdown-body a{text-decoration:none;color:#1781b5;padding:0 2px;border-bottom:1px solid #1781b5}.markdown-body a:active,.markdown-body a:hover{border-bottom:2px solid #f33b1f;color:#ac1f18}.markdown-body blockquote{color:#3d3d3d;background-color:#fff9f9;padding:6px 16px;margin:16px 0;border-left:3px solid #f07c82}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:6px 0}.markdown-body ol,.markdown-body ul{padding-left:30px}.markdown-body ol li,.markdown-body ul li{margin-bottom:6px}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:6px}.markdown-body ol li{padding-left:6px}.markdown-body ::marker{color:#f33b1f}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}.markdown-body .task-list-item input[type=checkbox]{position:relative}.markdown-body .task-list-item input[type=checkbox]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;background:#fff;border:1px solid #f07c82;border-radius:3px;box-sizing:border-box;z-index:1}.markdown-body .task-list-item input[type=checkbox]:checked:after{content:"âœ“";position:absolute;top:-5px;left:0;right:0;bottom:0;width:0;height:0;color:#f33b1f;font-size:16px;font-weight:700;z-index:2}.markdown-body table{display:inline-block!important;font-size:14px;width:auto;max-width:100%;overflow:auto;border-spacing:0;border-collapse:collapse}.markdown-body table thead{background:#fff9f9;color:#000;text-align:left;font-size:15px}.markdown-body table tr:nth-child(2n){background-color:#fcfcfc}.markdown-body table tr:hover{background-color:#fff9f9}.markdown-body table td,.markdown-body table th{padding:12px 7px;line-height:24px;border:1px solid #f9f1db}.markdown-body table td{min-width:120px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="monokai">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#272822;color:#ddd}.hljs-keyword,.hljs-literal,.hljs-name,.hljs-selector-tag,.hljs-strong,.hljs-tag{color:#f92672}.hljs-code{color:#66d9ef}.hljs-class .hljs-title{color:#fff}.hljs-attribute,.hljs-link,.hljs-regexp,.hljs-symbol{color:#bf79db}.hljs-addition,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-emphasis,.hljs-section,.hljs-selector-attr,.hljs-selector-pseudo,.hljs-string,.hljs-subst,.hljs-template-tag,.hljs-template-variable,.hljs-title,.hljs-type,.hljs-variable{color:#a6e22e}.hljs-comment,.hljs-deletion,.hljs-meta,.hljs-quote{color:#75715e}.hljs-doctag,.hljs-keyword,.hljs-literal,.hljs-section,.hljs-selector-id,.hljs-selector-tag,.hljs-title,.hljs-type{font-weight:700}</style><p>ä½œä¸ºä¸€åå¼€å‘è€…ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦ä» YouTube ç­‰å¹³å°è·å–æŠ€æœ¯èµ„è®¯ã€‚ä½†çœ‹è§†é¢‘å¤ªè´¹æ—¶é—´ï¼Œå¦‚æœèƒ½è‡ªåŠ¨æŠŠè§†é¢‘å†…å®¹è½¬å½•ã€æç‚¼å¹¶æ•´ç†æˆä¸€ç¯‡ç»“æ„æ¸…æ™°çš„ Markdown æŠ€æœ¯åšå®¢ï¼Œæ•ˆç‡å°†ç›´æ¥èµ·é£ã€‚</p>
<p>ä»Šå¤©åˆ†äº«æˆ‘åŸºäº n8n æ­å»ºçš„ä¸€å¥—å…¨è‡ªåŠ¨å·¥ä½œæµï¼Œå®ƒèƒ½å®ç°ï¼š</p>
<ol>
<li>
<p>è‡ªåŠ¨ä¸‹è½½ï¼šè¾“å…¥ URLï¼Œè‡ªåŠ¨æŒ‰æ—¥æœŸå½’æ¡£ä¸‹è½½ã€‚</p>
</li>
<li>
<p>éŸ³é¢‘æå–ï¼šè‡ªåŠ¨å‹ç¼©éŸ³é¢‘ä»¥é€‚åº” API é™åˆ¶ã€‚</p>
</li>
<li>
<p>æé€Ÿè½¬å½•ï¼šä½¿ç”¨ Groq çš„ Whisper-v3 æ¨¡å‹ï¼ˆé€Ÿåº¦æå¿«ï¼‰ã€‚</p>
</li>
<li>
<p>AI æ´—ç¨¿ï¼šä½¿ç”¨ DeepSeek æ¨¡å‹å°†å£è¯­è½¬ä¸ºæŠ€æœ¯åšæ–‡ã€‚</p>
</li>
<li>
<p>è‡ªåŠ¨å½’æ¡£ï¼šå°†ç”Ÿæˆçš„ Markdown æ–‡ä»¶ä¿å­˜åˆ°æœ¬åœ°ã€‚</p>
</li>
</ol>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3a44fd53be8d4c0582efc44fde1e233f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pG46bG855qE5pil5ZOl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768823024&amp;x-signature=sa%2Furfqzr9lWND3yFVFoNek%2Fpgs%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c58d523c50ae4fec96fe1633335ccf94~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pG46bG855qE5pil5ZOl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768823024&amp;x-signature=Aih85ize2euphRrLwsPBbTbf8c4%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-0">ğŸ—ï¸ æ¶æ„æ¦‚è§ˆ</h2>
<p>æ•´ä¸ªå·¥ä½œæµåŒ…å« 7 ä¸ªæ ¸å¿ƒæ­¥éª¤ï¼š</p>
<blockquote>
<p>è¡¨å•è§¦å‘ -&gt; yt-dlp ä¸‹è½½ -&gt; è·¯å¾„æ¸…æ´— -&gt; ffmpeg æå–éŸ³é¢‘ -&gt; Groq è¯­éŸ³è½¬æ–‡å­— -&gt; DeepSeek AI é‡å†™ -&gt; ä¿å­˜ MD æ–‡ä»¶</p>
</blockquote>
<h2 data-id="heading-1">ğŸ› ï¸ å‰ç½®å‡†å¤‡ (Docker ç¯å¢ƒ)</h2>
<p>ä¸ºäº†è®© n8n çš„ Code èŠ‚ç‚¹èƒ½å¤Ÿç›´æ¥è¯»å†™ç¡¬ç›˜æ–‡ä»¶ï¼ˆè¿™æ˜¯æœ¬å·¥ä½œæµæœ€å…³é”®çš„ Hack ç‚¹ï¼‰ï¼Œæˆ‘ä»¬éœ€è¦åœ¨å¯åŠ¨ Docker æ—¶æ·»åŠ ç¯å¢ƒå˜é‡ï¼š</p>
<pre><code class="hljs language-YAML" lang="YAML"><span class="hljs-attr">environment:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">NODE_FUNCTION_ALLOW_BUILTIN=fs</span>  <span class="hljs-comment"># å…è®¸ Code èŠ‚ç‚¹ä½¿ç”¨ fs æ¨¡å—</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">N8N_SECURE_FILE_SYSTEM_ACCESS_WHITELIST=/files</span> <span class="hljs-comment"># å…è®¸è®¿é—®æŒ‚è½½ç›®å½•</span>
<span class="hljs-attr">volumes:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">/your/local/path:/files</span> <span class="hljs-comment"># æŒ‚è½½ä¸‹è½½ç›®å½•</span>
</code></pre>
<h2 data-id="heading-2">ğŸš€ æ ¸å¿ƒèŠ‚ç‚¹è¯¦è§£</h2>
<h3 data-id="heading-3">1. ä¸‹è½½ä¸å½’æ¡£ (yt-dlp)</h3>
<p>æˆ‘ä»¬éœ€è¦ä¸€ä¸ª Execute Command èŠ‚ç‚¹æ¥ä¸‹è½½è§†é¢‘ã€‚ä¸ºäº†æ–¹ä¾¿ç®¡ç†ï¼Œæˆ‘å¢åŠ äº†ä¸€ä¸ªâ€œæŒ‰æ—¥æœŸå½’æ¡£â€çš„åŠŸèƒ½ã€‚</p>
<p>å‘½ä»¤é€»è¾‘ï¼š åˆ©ç”¨ n8n çš„ $now å˜é‡ç”Ÿæˆ YYYY-MM-DD æ–‡ä»¶å¤¹ï¼Œå¹¶ä½¿ç”¨ --print filename è®© yt-dlp åå‡ºæœ€ç»ˆçš„æ–‡ä»¶è·¯å¾„ï¼Œæ–¹ä¾¿åç»­èŠ‚ç‚¹æŠ“å–ã€‚</p>
<pre><code class="hljs language-Bash" lang="Bash">yt-dlp -o <span class="hljs-string">'/files/{{ $now.toFormat("yyyy-MM-dd") }}/%(title)s.%(ext)s'</span> {{ <span class="hljs-variable">$json</span>.url }} --<span class="hljs-built_in">print</span> filename --no-simulate
</code></pre>
<h3 data-id="heading-4">2. è·¯å¾„æ¸…æ´— (Code Node)</h3>
<p>yt-dlp è¾“å‡ºçš„è·¯å¾„å¯èƒ½åŒ…å«å¤šè¡Œæ—¥å¿—ã€‚æˆ‘ä»¬éœ€è¦ç²¾å‡†æå–å‡º å…¨è·¯å¾„ã€æ–‡ä»¶å å’Œ æ‰€åœ¨æ–‡ä»¶å¤¹ã€‚</p>
<p>è¿™é‡Œçš„å…³é”®æ˜¯ç”¨æ­£åˆ™å»æ‰æ–‡ä»¶åç¼€ï¼Œç”Ÿæˆ clean_nameï¼Œåç»­ç”Ÿæˆçš„ MD æ–‡ä»¶å°±ç”¨è¿™ä¸ªåå­—ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ ¸å¿ƒé€»è¾‘ï¼šæå–ä¸å¸¦åç¼€çš„æ–‡ä»¶å</span>
<span class="hljs-keyword">const</span> filenameWithExt = filePath.<span class="hljs-title function_">split</span>(<span class="hljs-string">'/'</span>).<span class="hljs-title function_">pop</span>();
<span class="hljs-attr">clean_name</span>: filenameWithExt.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/\.[^/.]+$/</span>, <span class="hljs-string">""</span>)
</code></pre>
<h3 data-id="heading-5">3. éŸ³é¢‘ç˜¦èº« (ffmpeg)</h3>
<p>ç›´æ¥ä¼ è§†é¢‘ç»™ AI æ¥å£æ—¢æ…¢åˆè´¹é’±ã€‚æˆ‘ä»¬éœ€è¦ç”¨ ffmpeg æå–éŸ³é¢‘å¹¶â€œå‹æ¦¨â€ä½“ç§¯ã€‚</p>
<p>å‘½ä»¤å‚æ•°ï¼š</p>
<ul>
<li>
<p>vn: å»æ‰è§†é¢‘æµã€‚</p>
</li>
<li>
<p>ac 1: å•å£°é“ï¼ˆäººå£°å•å£°é“è¶³çŸ£ï¼‰ã€‚</p>
</li>
<li>
<p>b:a 64k: 64k ç ç‡ï¼ˆä¿è¯ Whisper èƒ½å¬æ¸…ï¼ŒåŒæ—¶ä½“ç§¯æå°ï¼‰ã€‚</p>
</li>
</ul>
<pre><code class="hljs language-bash" lang="bash">ffmpeg -i <span class="hljs-string">"{{ <span class="hljs-variable">$json</span>.full_path }}"</span> -vn -ac 1 -b:a 64k <span class="hljs-string">"{{ <span class="hljs-variable">$json</span>.folder_dir }}/{{ <span class="hljs-variable">$json</span>.clean_name }}.mp3"</span> -y
</code></pre>
<h3 data-id="heading-6">4. ç»•è¿‡é™åˆ¶è¯»å–æ–‡ä»¶ (Code Node with fs)</h3>
<p>n8n åŸç”Ÿçš„ Read Binary File èŠ‚ç‚¹å—é™äºæƒé™é…ç½®ï¼Œæœ‰æ—¶è¯»å–å¤§æ–‡ä»¶ä¸ç¨³å®šã€‚æ—¢ç„¶æˆ‘ä»¬åœ¨ Docker é‡Œå¼€æ”¾äº† fs æƒé™ï¼Œç›´æ¥ç”¨ JS ä»£ç è¯»å–æ–‡ä»¶åˆ°åº•å±‚ Buffer æ˜¯æœ€ç¨³å¥çš„ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>);
<span class="hljs-comment">// ç›´æ¥è¯»å– ffmpeg ç”Ÿæˆçš„ mp3 è·¯å¾„</span>
<span class="hljs-keyword">const</span> fileBuffer = fs.<span class="hljs-title function_">readFileSync</span>(filePath);
<span class="hljs-comment">// è½¬ä¸º n8n æ ‡å‡† Binary å¯¹è±¡</span>
<span class="hljs-keyword">const</span> binaryData = {
 <span class="hljs-attr">data</span>: {
   <span class="hljs-attr">data</span>: fileBuffer.<span class="hljs-title function_">toString</span>(<span class="hljs-string">'base64'</span>),
   <span class="hljs-attr">mimeType</span>: <span class="hljs-string">'audio/mpeg'</span>,
   <span class="hljs-comment">// ...</span>
 }
};
</code></pre>
<h3 data-id="heading-7">5. æé€Ÿè½¬å½• (HTTP Request + Groq)</h3>
<p>ä¸ºä»€ä¹ˆä¸ç”¨ n8n è‡ªå¸¦çš„ OpenAI èŠ‚ç‚¹ï¼Ÿå› ä¸ºåŸç”ŸèŠ‚ç‚¹å¯¹æ¨¡å‹åç§°æœ‰ç™½åå•é™åˆ¶ï¼Œæ— æ³•ç›´æ¥è°ƒç”¨ Groq çš„ whisper-large-v3ã€‚</p>
<p>ä½¿ç”¨ HTTP Request èŠ‚ç‚¹æ„å»ºåŸç”Ÿ POST è¯·æ±‚ï¼Œå¯ä»¥æ— è§†é™åˆ¶ï¼š</p>
<ul>
<li>
<p>URL: <a href="https://link.juejin.cn?target=https%3A%2F%2Fapi.groq.com%2Fopenai%2Fv1%2Faudio%2Ftranscriptions" target="_blank" title="https://api.groq.com/openai/v1/audio/transcriptions" ref="nofollow noopener noreferrer">api.groq.com/openai/v1/aâ€¦</a></p>
</li>
<li>
<p>Body: Multipart-form-data</p>
</li>
<li>
<p>Model: whisper-large-v3</p>
</li>
<li>
<p>File: æ˜ å°„ä¸Šä¸€æ­¥çš„ Binary Dataã€‚</p>
</li>
</ul>
<h3 data-id="heading-8">6. AI æ·±åº¦æ´—ç¨¿ (DeepSeek + Basic LLM Chain)</h3>
<p>æ‹¿åˆ°åŸå§‹æ–‡æœ¬åï¼Œå¦‚æœç›´æ¥çœ‹å°±æ˜¯ä¸€å †æµæ°´è´¦ã€‚æˆ‘ä»¬éœ€è¦ AI æ‰®æ¼”â€œä¸»ç¼–â€è§’è‰²ã€‚</p>
<ul>
<li>
<p>æ¨¡å‹ï¼šDeepSeek Chat (æ€§ä»·æ¯”ä¹‹ç‹)ã€‚</p>
</li>
<li>
<p>Prompt è®¾è®¡ï¼š</p>
<p>"ä½ æ˜¯ä¸€ä½èµ„æ·±çš„æŠ€æœ¯åšå®¢ä¸»ç¼–... è¯·æ‰§è¡Œä»¥ä¸‹ä»»åŠ¡ï¼šé‡æ„é€»è¾‘ã€æ¸…æ´—è¯­è¨€ã€Markdownæ’ç‰ˆ..."</p>
<p>è¿™ä¸€æ­¥èƒ½å°†å£è¯­åŒ–çš„ "è¿™ä¸ªã€é‚£ä¸ªã€æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹" è½¬åŒ–ä¸º "### æ ¸å¿ƒåŸç†" è¿™æ ·çš„ç»“æ„åŒ–å†…å®¹ã€‚</p>
</li>
</ul>
<h3 data-id="heading-9">7. é—­ç¯å†™å…¥ (Merge &amp; Code Node)</h3>
<p>æœ€åä¸€æ­¥ï¼Œæˆ‘ä»¬éœ€è¦æŠŠ AI ç”Ÿæˆçš„æ–‡æœ¬å†™å…¥ .md æ–‡ä»¶ã€‚</p>
<p>Merge èŠ‚ç‚¹ï¼šæˆ‘ä»¬éœ€è¦ æ­¥éª¤2 çš„ clean_name (æ–‡ä»¶å) å’Œ æ­¥éª¤6 çš„ text (æ–‡ç« å†…å®¹)ã€‚æ‰€ä»¥ç”¨ Merge èŠ‚ç‚¹æŠŠè¿™ä¸¤è·¯æ•°æ®åˆå¹¶ã€‚</p>
<p>å†™å…¥ç¡¬ç›˜ï¼šå†æ¬¡ä½¿ç”¨ fs.writeFileSync ç›´æ¥å†™å…¥ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>);
<span class="hljs-keyword">const</span> content = $(<span class="hljs-string">'Basic LLM Chain'</span>).<span class="hljs-title function_">first</span>().<span class="hljs-property">json</span>.<span class="hljs-property">text</span>; 
<span class="hljs-keyword">const</span> fileName = $(<span class="hljs-string">'æ ¼å¼åŒ–è·¯å¾„'</span>).<span class="hljs-title function_">first</span>().<span class="hljs-property">json</span>.<span class="hljs-property">clean_name</span>;
<span class="hljs-keyword">const</span> outputDir = $(<span class="hljs-string">'æ ¼å¼åŒ–è·¯å¾„'</span>).<span class="hljs-title function_">first</span>().<span class="hljs-property">json</span>.<span class="hljs-property">folder_dir</span>; 

fs.<span class="hljs-title function_">writeFileSync</span>(<span class="hljs-string">`<span class="hljs-subst">${outputDir}</span>/<span class="hljs-subst">${fileName}</span>.md`</span>, content, <span class="hljs-string">'utf8'</span>);
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/285d96ad04c34ca0a6e1fa1ab89f1ed2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pG46bG855qE5pil5ZOl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768823024&amp;x-signature=TAYrZuWeiHunZVU%2F6EcUBc515GM%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-10">é¿å‘ä¸å¿ƒå¾—</h2>
<ul>
<li>
<p>è·¯å¾„åœ°ç‹±ï¼šWindows å’Œ Linux çš„è·¯å¾„æ–œæ æ–¹å‘ä¸åŒï¼ŒDocker å®¹å™¨å†…å¤–çš„è·¯å¾„æ˜ å°„ä¹Ÿå®¹æ˜“æ™•ã€‚æœ€ä½³å®è·µæ˜¯ä¾é  yt-dlp --print filename åŠ¨æ€è·å–è·¯å¾„ï¼Œè€Œä¸æ˜¯è‡ªå·±æ‹¼æ¥å­—ç¬¦ä¸²ã€‚</p>
</li>
<li>
<p>Groq çš„ä¼˜åŠ¿ï¼šå¯¹äºé•¿è§†é¢‘ï¼ŒGroq çš„ Whisper v3 é€Ÿåº¦æå¿«ï¼Œä¸”ç›®å‰ API è°ƒç”¨éå¸¸å®½æ¾ï¼Œæ˜¯éŸ³é¢‘è½¬å½•çš„é¦–é€‰ã€‚</p>
</li>
<li>
<p>HTTP Request çš„çµæ´»æ€§ï¼šå½“ n8n åŸç”ŸèŠ‚ç‚¹è·Ÿä¸ä¸Š API æ›´æ–°é€Ÿåº¦æ—¶ï¼ˆæ¯”å¦‚æ–°æ¨¡å‹å‘å¸ƒï¼‰ï¼ŒHTTP Request èŠ‚ç‚¹æ°¸è¿œæ˜¯ä½ çš„æ•‘æ˜Ÿã€‚</p>
</li>
<li>
<p>DeepSeek çš„ Promptï¼šç”±äºè½¬å½•æ–‡æœ¬æ²¡æœ‰æ ‡ç‚¹ç¬¦å·æˆ–æ–­å¥é”™è¯¯ï¼ŒPrompt ä¸­å¿…é¡»å¼ºè°ƒâ€œä¿®å¤è½¬å½•é”™è¯¯â€å’Œâ€œé‡æ„é€»è¾‘â€ï¼Œå¦åˆ™ AI å¯èƒ½ä¼šè¢«å¸¦è·‘åã€‚</p>
</li>
<li>
<p>åŒ¿åèƒ½ä¸‹è½½çš„è§†é¢‘æœ‰é™ï¼Œæœ€ç»ˆä½ è¿˜æ˜¯å¾—æŠŠä½ çš„cookieæˆæƒç»™å·¥ä½œæµï¼Œè¿™æ ·ä¸€æ¥ä½ å¿…é¡»æ§åˆ¶é¢‘ç‡ï¼Œå¦åˆ™è´¦å·éå¸¸å¯èƒ½è¢«å°ã€‚</p>
</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Hibernateï¼ˆ37ï¼‰Hibernateçš„å¤šè¡¨è”åˆæŸ¥è¯¢å¦‚ä½•å®ç°ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7594266018304704575</link>    <guid>https://juejin.cn/post/7594266018304704575</guid>    <pubDate>2026-01-12T11:51:07.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594266018304704575" data-draft-id="7594266018304688191" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Hibernateï¼ˆ37ï¼‰Hibernateçš„å¤šè¡¨è”åˆæŸ¥è¯¢å¦‚ä½•å®ç°ï¼Ÿ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-12T11:51:07.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Victor356"/> <meta itemprop="url" content="https://juejin.cn/user/3492507879476878"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Hibernateï¼ˆ37ï¼‰Hibernateçš„å¤šè¡¨è”åˆæŸ¥è¯¢å¦‚ä½•å®ç°ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3492507879476878/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Victor356
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-12T11:51:07.000Z" title="Mon Jan 12 2026 11:51:07 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">Hibernateçš„å¤šè¡¨è”åˆæŸ¥è¯¢</h3>
<p>åœ¨Hibernateä¸­ï¼Œå¤šè¡¨è”åˆæŸ¥è¯¢ï¼ˆJoin Queryï¼‰ç”¨äºä»å¤šä¸ªç›¸å…³è¡¨ä¸­æå–æ•°æ®ã€‚é€šè¿‡ä½¿ç”¨HQLï¼ˆHibernate Query Languageï¼‰æˆ–Criteria APIï¼Œå¯ä»¥å®ç°ä¸åŒè¡¨ä¹‹é—´çš„è”æ¥æŸ¥è¯¢ã€‚</p>
<h3 data-id="heading-1">ä½¿ç”¨HQLè¿›è¡Œå¤šè¡¨è”åˆæŸ¥è¯¢çš„ç¤ºä¾‹ä»£ç </h3>
<p>é¦–å…ˆï¼Œå‡è®¾æˆ‘ä»¬æœ‰ä¸¤ä¸ªå®ä½“ç±»ï¼š<code>Student</code> å’Œ <code>Course</code>ï¼Œå¹¶ä¸”å®ƒä»¬ä¹‹é—´å­˜åœ¨å¤šå¯¹å¤šçš„å…³ç³»ã€‚</p>
<h4 data-id="heading-2">å®ä½“ç±»å®šä¹‰</h4>
<h5 data-id="heading-3"><code>Student</code> ç±»</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.example.domain;

<span class="hljs-keyword">import</span> javax.persistence.*;
<span class="hljs-keyword">import</span> java.util.HashSet;
<span class="hljs-keyword">import</span> java.util.Set;

<span class="hljs-meta">@Entity</span>
<span class="hljs-meta">@Table(name = "student")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Student</span> {

    <span class="hljs-meta">@Id</span>
    <span class="hljs-meta">@GeneratedValue(strategy = GenerationType.IDENTITY)</span>
    <span class="hljs-keyword">private</span> Long id;

    <span class="hljs-meta">@Column(name = "name")</span>
    <span class="hljs-keyword">private</span> String name;

    <span class="hljs-meta">@ManyToMany(cascade = { CascadeType.ALL })</span>
    <span class="hljs-meta">@JoinTable(
        name = "student_course", 
        joinColumns = { @JoinColumn(name = "student_id") }, 
        inverseJoinColumns = { @JoinColumn(name = "course_id") }
    )</span>
    <span class="hljs-keyword">private</span> Set&lt;Course&gt; courses = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashSet</span>&lt;&gt;();

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Student</span><span class="hljs-params">()</span> {}

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Student</span><span class="hljs-params">(String name)</span> {
        <span class="hljs-built_in">this</span>.name = name;
    }

    <span class="hljs-comment">// Getters å’Œ Setters</span>

    <span class="hljs-keyword">public</span> Long <span class="hljs-title function_">getId</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> id;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setId</span><span class="hljs-params">(Long id)</span> {
        <span class="hljs-built_in">this</span>.id = id;
    }

    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> name;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setName</span><span class="hljs-params">(String name)</span> {
        <span class="hljs-built_in">this</span>.name = name;
    }

    <span class="hljs-keyword">public</span> Set&lt;Course&gt; <span class="hljs-title function_">getCourses</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> courses;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setCourses</span><span class="hljs-params">(Set&lt;Course&gt; courses)</span> {
        <span class="hljs-built_in">this</span>.courses = courses;
    }
}
</code></pre>
<h5 data-id="heading-4"><code>Course</code> ç±»</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.example.domain;

<span class="hljs-keyword">import</span> javax.persistence.*;
<span class="hljs-keyword">import</span> java.util.HashSet;
<span class="hljs-keyword">import</span> java.util.Set;

<span class="hljs-meta">@Entity</span>
<span class="hljs-meta">@Table(name = "course")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Course</span> {

    <span class="hljs-meta">@Id</span>
    <span class="hljs-meta">@GeneratedValue(strategy = GenerationType.IDENTITY)</span>
    <span class="hljs-keyword">private</span> Long id;

    <span class="hljs-meta">@Column(name = "name")</span>
    <span class="hljs-keyword">private</span> String name;

    <span class="hljs-meta">@ManyToMany(mappedBy = "courses")</span>
    <span class="hljs-keyword">private</span> Set&lt;Student&gt; students = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashSet</span>&lt;&gt;();

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Course</span><span class="hljs-params">()</span> {}

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Course</span><span class="hljs-params">(String name)</span> {
        <span class="hljs-built_in">this</span>.name = name;
    }

    <span class="hljs-comment">// Getters å’Œ Setters</span>

    <span class="hljs-keyword">public</span> Long <span class="hljs-title function_">getId</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> id;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setId</span><span class="hljs-params">(Long id)</span> {
        <span class="hljs-built_in">this</span>.id = id;
    }

    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> name;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setName</span><span class="hljs-params">(String name)</span> {
        <span class="hljs-built_in">this</span>.name = name;
    }

    <span class="hljs-keyword">public</span> Set&lt;Student&gt; <span class="hljs-title function_">getStudents</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> students;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setStudents</span><span class="hljs-params">(Set&lt;Student&gt; students)</span> {
        <span class="hljs-built_in">this</span>.students = students;
    }
}
</code></pre>
<h4 data-id="heading-5">Hibernateé…ç½®æ–‡ä»¶ <code>hibernate.cfg.xml</code></h4>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">hibernate-configuration</span> <span class="hljs-keyword">PUBLIC</span>
        <span class="hljs-string">"-//Hibernate/Hibernate Configuration DTD 3.0//EN"</span>
        <span class="hljs-string">"http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">hibernate-configuration</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">session-factory</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- æ•°æ®åº“è¿æ¥é…ç½® --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.driver_class"</span>&gt;</span>com.mysql.cj.jdbc.Driver<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.url"</span>&gt;</span>jdbc:mysql://localhost:3306/your_database<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.username"</span>&gt;</span>your_username<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.password"</span>&gt;</span>your_password<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- Hibernate å±æ€§é…ç½® --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.dialect"</span>&gt;</span>org.hibernate.dialect.MySQLDialect<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.show_sql"</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.format_sql"</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.hbm2ddl.auto"</span>&gt;</span>update<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- æ˜ å°„ç±» --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">mapping</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.example.domain.Student"</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">mapping</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.example.domain.Course"</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">session-factory</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">hibernate-configuration</span>&gt;</span>
</code></pre>
<h4 data-id="heading-6">HibernateUtilç±»</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.hibernate.SessionFactory;
<span class="hljs-keyword">import</span> org.hibernate.cfg.Configuration;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HibernateUtil</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> SessionFactory sessionFactory;

    <span class="hljs-keyword">static</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// ä»é…ç½®æ–‡ä»¶åˆ›å»ºSessionFactory</span>
            sessionFactory = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Configuration</span>().configure(<span class="hljs-string">"hibernate.cfg.xml"</span>).buildSessionFactory();
        } <span class="hljs-keyword">catch</span> (Throwable ex) {
            <span class="hljs-comment">// è®°å½•å¯åŠ¨å¤±è´¥çš„é”™è¯¯</span>
            System.err.println(<span class="hljs-string">"Initial SessionFactory creation failed."</span> + ex);
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ExceptionInInitializerError</span>(ex);
        }
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> SessionFactory <span class="hljs-title function_">getSessionFactory</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> sessionFactory;
    }
}
</code></pre>
<h3 data-id="heading-7">ä½¿ç”¨HQLè¿›è¡Œå¤šè¡¨è”åˆæŸ¥è¯¢</h3>
<h4 data-id="heading-8">æ’å…¥ç¤ºä¾‹æ•°æ®</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.hibernate.Session;
<span class="hljs-keyword">import</span> org.hibernate.SessionFactory;
<span class="hljs-keyword">import</span> org.hibernate.Transaction;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HibernateInsertData</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// è·å–SessionFactory</span>
        <span class="hljs-type">SessionFactory</span> <span class="hljs-variable">sessionFactory</span> <span class="hljs-operator">=</span> HibernateUtil.getSessionFactory();

        <span class="hljs-comment">// æ’å…¥ç¤ºä¾‹æ•°æ®</span>
        insertSampleData(sessionFactory);

        <span class="hljs-comment">// å…³é—­SessionFactory</span>
        sessionFactory.close();
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">insertSampleData</span><span class="hljs-params">(SessionFactory sessionFactory)</span> {
        <span class="hljs-type">Session</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> sessionFactory.openSession();
        <span class="hljs-type">Transaction</span> <span class="hljs-variable">transaction</span> <span class="hljs-operator">=</span> session.beginTransaction();
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// åˆ›å»ºå­¦ç”Ÿ</span>
            <span class="hljs-type">Student</span> <span class="hljs-variable">student1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>(<span class="hljs-string">"John Doe"</span>);
            <span class="hljs-type">Student</span> <span class="hljs-variable">student2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>(<span class="hljs-string">"Jane Doe"</span>);

            <span class="hljs-comment">// åˆ›å»ºè¯¾ç¨‹</span>
            <span class="hljs-type">Course</span> <span class="hljs-variable">course1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Course</span>(<span class="hljs-string">"Mathematics"</span>);
            <span class="hljs-type">Course</span> <span class="hljs-variable">course2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Course</span>(<span class="hljs-string">"History"</span>);

            <span class="hljs-comment">// å»ºç«‹å¤šå¯¹å¤šå…³ç³»</span>
            student1.getCourses().add(course1);
            student1.getCourses().add(course2);

            student2.getCourses().add(course1);
            student2.getCourses().add(course2);

            course1.getStudents().add(student1);
            course1.getStudents().add(student2);

            course2.getStudents().add(student1);
            course2.getStudents().add(student2);

            <span class="hljs-comment">// ä¿å­˜æ•°æ®</span>
            session.save(student1);
            session.save(student2);

            transaction.commit();
            System.out.println(<span class="hljs-string">"Inserted sample data"</span>);
        } <span class="hljs-keyword">catch</span> (Exception e) {
            <span class="hljs-keyword">if</span> (transaction != <span class="hljs-literal">null</span>) {
                transaction.rollback();
            }
            e.printStackTrace();
        } <span class="hljs-keyword">finally</span> {
            <span class="hljs-keyword">if</span> (session != <span class="hljs-literal">null</span>) {
                session.close();
            }
        }
    }
}
</code></pre>
<h4 data-id="heading-9">HQLè”åˆæŸ¥è¯¢ç¤ºä¾‹</h4>
<h5 data-id="heading-10">æŸ¥è¯¢æ‰€æœ‰å­¦ç”ŸåŠå…¶é€‰ä¿®çš„è¯¾ç¨‹</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.hibernate.Session;
<span class="hljs-keyword">import</span> org.hibernate.SessionFactory;
<span class="hljs-keyword">import</span> org.hibernate.query.Query;

<span class="hljs-keyword">import</span> java.util.List;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HibernateHQLJoinQueryExample</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// è·å–SessionFactory</span>
        <span class="hljs-type">SessionFactory</span> <span class="hljs-variable">sessionFactory</span> <span class="hljs-operator">=</span> HibernateUtil.getSessionFactory();

        <span class="hljs-comment">// ä½¿ç”¨HQLè¿›è¡Œè”åˆæŸ¥è¯¢</span>
        queryStudentCourses(sessionFactory);

        <span class="hljs-comment">// å…³é—­SessionFactory</span>
        sessionFactory.close();
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">queryStudentCourses</span><span class="hljs-params">(SessionFactory sessionFactory)</span> {
        <span class="hljs-type">Session</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> sessionFactory.openSession();
        <span class="hljs-keyword">try</span> {
            <span class="hljs-type">String</span> <span class="hljs-variable">hql</span> <span class="hljs-operator">=</span> <span class="hljs-string">"SELECT s.name, c.name FROM Student s JOIN s.courses c"</span>;
            Query&lt;Object[]&gt; query = session.createQuery(hql, Object[].class);

            List&lt;Object[]&gt; results = query.list();
            System.out.println(<span class="hljs-string">"Student and their Courses:"</span>);
            <span class="hljs-keyword">for</span> (Object[] row : results) {
                <span class="hljs-type">String</span> <span class="hljs-variable">studentName</span> <span class="hljs-operator">=</span> (String) row[<span class="hljs-number">0</span>];
                <span class="hljs-type">String</span> <span class="hljs-variable">courseName</span> <span class="hljs-operator">=</span> (String) row[<span class="hljs-number">1</span>];
                System.out.println(<span class="hljs-string">"Student: "</span> + studentName + <span class="hljs-string">", Course: "</span> + courseName);
            }
        } <span class="hljs-keyword">catch</span> (Exception e) {
            e.printStackTrace();
        } <span class="hljs-keyword">finally</span> {
            <span class="hljs-keyword">if</span> (session != <span class="hljs-literal">null</span>) {
                session.close();
            }
        }
    }
}
</code></pre>
<h3 data-id="heading-11">ä½¿ç”¨Criteria APIè¿›è¡Œå¤šè¡¨è”åˆæŸ¥è¯¢</h3>
<h4 data-id="heading-12">Criteria APIè”åˆæŸ¥è¯¢ç¤ºä¾‹</h4>
<h5 data-id="heading-13">æŸ¥è¯¢æ‰€æœ‰å­¦ç”ŸåŠå…¶é€‰ä¿®çš„è¯¾ç¨‹</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.hibernate.Session;
<span class="hljs-keyword">import</span> org.hibernate.SessionFactory;
<span class="hljs-keyword">import</span> javax.persistence.criteria.CriteriaBuilder;
<span class="hljs-keyword">import</span> javax.persistence.criteria.CriteriaQuery;
<span class="hljs-keyword">import</span> javax.persistence.criteria.Join;
<span class="hljs-keyword">import</span> javax.persistence.criteria.Root;
<span class="hljs-keyword">import</span> java.util.List;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HibernateCriteriaJoinQueryExample</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// è·å–SessionFactory</span>
        <span class="hljs-type">SessionFactory</span> <span class="hljs-variable">sessionFactory</span> <span class="hljs-operator">=</span> HibernateUtil.getSessionFactory();

        <span class="hljs-comment">// ä½¿ç”¨Criteria APIè¿›è¡Œè”åˆæŸ¥è¯¢</span>
        queryStudentCourses(sessionFactory);

        <span class="hljs-comment">// å…³é—­SessionFactory</span>
        sessionFactory.close();
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">queryStudentCourses</span><span class="hljs-params">(SessionFactory sessionFactory)</span> {
        <span class="hljs-type">Session</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> sessionFactory.openSession();
        <span class="hljs-keyword">try</span> {
            <span class="hljs-type">CriteriaBuilder</span> <span class="hljs-variable">criteriaBuilder</span> <span class="hljs-operator">=</span> session.getCriteriaBuilder();
            CriteriaQuery&lt;Object[]&gt; criteriaQuery = criteriaBuilder.createQuery(Object[].class);
            Root&lt;Student&gt; studentRoot = criteriaQuery.from(Student.class);
            Join&lt;Student, Course&gt; courseJoin = studentRoot.join(<span class="hljs-string">"courses"</span>);

            criteriaQuery.multiselect(studentRoot.get(<span class="hljs-string">"name"</span>), courseJoin.get(<span class="hljs-string">"name"</span>));

            List&lt;Object[]&gt; results = session.createQuery(criteriaQuery).getResultList();
            System.out.println(<span class="hljs-string">"Student and their Courses:"</span>);
            <span class="hljs-keyword">for</span> (Object[] row : results) {
                <span class="hljs-type">String</span> <span class="hljs-variable">studentName</span> <span class="hljs-operator">=</span> (String) row[<span class="hljs-number">0</span>];
                <span class="hljs-type">String</span> <span class="hljs-variable">courseName</span> <span class="hljs-operator">=</span> (String) row[<span class="hljs-number">1</span>];
                System.out.println(<span class="hljs-string">"Student: "</span> + studentName + <span class="hljs-string">", Course: "</span> + courseName);
            }
        } <span class="hljs-keyword">catch</span> (Exception e) {
            e.printStackTrace();
        } <span class="hljs-keyword">finally</span> {
            <span class="hljs-keyword">if</span> (session != <span class="hljs-literal">null</span>) {
                session.close();
            }
        }
    }
}
</code></pre>
<h3 data-id="heading-14">è¯¦ç»†è§£é‡Š</h3>
<ol>
<li><strong>å®ä½“ç±»å®šä¹‰</strong>ï¼š
<ul>
<li><code>Student</code> ç±»å’Œ <code>Course</code> ç±»é€šè¿‡ <code>@ManyToMany</code> æ³¨è§£æ¥å®šä¹‰å¤šå¯¹å¤šçš„å…³ç³»ã€‚<code>Student</code> ç±»ä½¿ç”¨ <code>@JoinTable</code> æ³¨è§£æ¥å®šä¹‰ä¸­é—´è¡¨ï¼ŒæŒ‡å®šäº†å…³è”çš„å­¦ç”Ÿå’Œè¯¾ç¨‹çš„å¤–é”®ã€‚</li>
</ul>
</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Hibernateï¼ˆ38ï¼‰å¦‚ä½•åœ¨Hibernateä¸­é…ç½®ä¹è§‚é”ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7594322573452034091</link>    <guid>https://juejin.cn/post/7594322573452034091</guid>    <pubDate>2026-01-12T11:51:53.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594322573452034091" data-draft-id="7594396779022811199" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Hibernateï¼ˆ38ï¼‰å¦‚ä½•åœ¨Hibernateä¸­é…ç½®ä¹è§‚é”ï¼Ÿ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-12T11:51:53.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Victor356"/> <meta itemprop="url" content="https://juejin.cn/user/3492507879476878"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Hibernateï¼ˆ38ï¼‰å¦‚ä½•åœ¨Hibernateä¸­é…ç½®ä¹è§‚é”ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3492507879476878/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Victor356
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-12T11:51:53.000Z" title="Mon Jan 12 2026 11:51:53 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">Hibernateä¸­çš„ä¹è§‚é”é…ç½®</h3>
<p>åœ¨Hibernateä¸­ï¼Œä¹è§‚é”ï¼ˆOptimistic Lockingï¼‰ç”¨äºç¡®ä¿å¹¶å‘äº‹åŠ¡çš„å®‰å…¨æ€§ï¼Œé˜²æ­¢æ•°æ®è¢«å¤šä¸ªäº‹åŠ¡åŒæ—¶ä¿®æ”¹è€Œå¯¼è‡´çš„ä¸ä¸€è‡´ã€‚ä¹è§‚é”çš„åŸºæœ¬åŸç†æ˜¯åœ¨ä¿®æ”¹æ•°æ®æ—¶æ£€æŸ¥æ•°æ®çš„ç‰ˆæœ¬ä¿¡æ¯ï¼Œç¡®ä¿æ•°æ®æ²¡æœ‰è¢«å…¶ä»–äº‹åŠ¡ä¿®æ”¹ã€‚</p>
<h3 data-id="heading-1">é…ç½®ä¹è§‚é”çš„ç¤ºä¾‹ä»£ç </h3>
<h4 data-id="heading-2">å®ä½“ç±»å®šä¹‰</h4>
<p>å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªå®ä½“ç±» <code>Product</code>ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ä¹è§‚é”æ¥ç¡®ä¿å¤šä¸ªäº‹åŠ¡ä¸ä¼šåŒæ—¶ä¿®æ”¹åŒä¸€ä¸ªäº§å“çš„æ•°æ®ã€‚</p>
<h4 data-id="heading-3">Productç±»</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.example.domain;

<span class="hljs-keyword">import</span> javax.persistence.*;

<span class="hljs-meta">@Entity</span>
<span class="hljs-meta">@Table(name = "product")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Product</span> {

    <span class="hljs-meta">@Id</span>
    <span class="hljs-meta">@GeneratedValue(strategy = GenerationType.IDENTITY)</span>
    <span class="hljs-keyword">private</span> Long id;

    <span class="hljs-meta">@Column(name = "name")</span>
    <span class="hljs-keyword">private</span> String name;

    <span class="hljs-meta">@Column(name = "price")</span>
    <span class="hljs-keyword">private</span> Double price;

    <span class="hljs-meta">@Version</span>
    <span class="hljs-meta">@Column(name = "version")</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> version;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Product</span><span class="hljs-params">()</span> {}

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Product</span><span class="hljs-params">(String name, Double price)</span> {
        <span class="hljs-built_in">this</span>.name = name;
        <span class="hljs-built_in">this</span>.price = price;
    }

    <span class="hljs-comment">// Getters å’Œ Setters</span>

    <span class="hljs-keyword">public</span> Long <span class="hljs-title function_">getId</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> id;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setId</span><span class="hljs-params">(Long id)</span> {
        <span class="hljs-built_in">this</span>.id = id;
    }

    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> name;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setName</span><span class="hljs-params">(String name)</span> {
        <span class="hljs-built_in">this</span>.name = name;
    }

    <span class="hljs-keyword">public</span> Double <span class="hljs-title function_">getPrice</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> price;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setPrice</span><span class="hljs-params">(Double price)</span> {
        <span class="hljs-built_in">this</span>.price = price;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getVersion</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> version;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setVersion</span><span class="hljs-params">(<span class="hljs-type">int</span> version)</span> {
        <span class="hljs-built_in">this</span>.version = version;
    }
}
</code></pre>
<h4 data-id="heading-4">Hibernateé…ç½®æ–‡ä»¶ <code>hibernate.cfg.xml</code></h4>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">hibernate-configuration</span> <span class="hljs-keyword">PUBLIC</span>
        <span class="hljs-string">"-//Hibernate/Hibernate Configuration DTD 3.0//EN"</span>
        <span class="hljs-string">"http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">hibernate-configuration</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">session-factory</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- æ•°æ®åº“è¿æ¥é…ç½® --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.driver_class"</span>&gt;</span>com.mysql.cj.jdbc.Driver<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.url"</span>&gt;</span>jdbc:mysql://localhost:3306/your_database<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.username"</span>&gt;</span>your_username<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.password"</span>&gt;</span>your_password<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- Hibernate å±æ€§é…ç½® --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.dialect"</span>&gt;</span>org.hibernate.dialect.MySQLDialect<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.show_sql"</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.format_sql"</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.hbm2ddl.auto"</span>&gt;</span>update<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- æ˜ å°„ç±» --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">mapping</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.example.domain.Product"</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">session-factory</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">hibernate-configuration</span>&gt;</span>
</code></pre>
<h4 data-id="heading-5">HibernateUtilç±»</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.hibernate.SessionFactory;
<span class="hljs-keyword">import</span> org.hibernate.cfg.Configuration;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HibernateUtil</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> SessionFactory sessionFactory;

    <span class="hljs-keyword">static</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// ä»é…ç½®æ–‡ä»¶åˆ›å»ºSessionFactory</span>
            sessionFactory = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Configuration</span>().configure(<span class="hljs-string">"hibernate.cfg.xml"</span>).buildSessionFactory();
        } <span class="hljs-keyword">catch</span> (Throwable ex) {
            <span class="hljs-comment">// è®°å½•å¯åŠ¨å¤±è´¥çš„é”™è¯¯</span>
            System.err.println(<span class="hljs-string">"Initial SessionFactory creation failed."</span> + ex);
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ExceptionInInitializerError</span>(ex);
        }
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> SessionFactory <span class="hljs-title function_">getSessionFactory</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> sessionFactory;
    }
}
</code></pre>
<h3 data-id="heading-6">ä½¿ç”¨ä¹è§‚é”çš„ç¤ºä¾‹</h3>
<h4 data-id="heading-7">æ’å…¥ç¤ºä¾‹æ•°æ®</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.hibernate.Session;
<span class="hljs-keyword">import</span> org.hibernate.SessionFactory;
<span class="hljs-keyword">import</span> org.hibernate.Transaction;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HibernateInsertData</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// è·å–SessionFactory</span>
        <span class="hljs-type">SessionFactory</span> <span class="hljs-variable">sessionFactory</span> <span class="hljs-operator">=</span> HibernateUtil.getSessionFactory();

        <span class="hljs-comment">// æ’å…¥ç¤ºä¾‹æ•°æ®</span>
        insertSampleData(sessionFactory);

        <span class="hljs-comment">// å…³é—­SessionFactory</span>
        sessionFactory.close();
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">insertSampleData</span><span class="hljs-params">(SessionFactory sessionFactory)</span> {
        <span class="hljs-type">Session</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> sessionFactory.openSession();
        <span class="hljs-type">Transaction</span> <span class="hljs-variable">transaction</span> <span class="hljs-operator">=</span> session.beginTransaction();
        <span class="hljs-keyword">try</span> {
            <span class="hljs-type">Product</span> <span class="hljs-variable">product1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Product</span>(<span class="hljs-string">"Laptop"</span>, <span class="hljs-number">1000.0</span>);
            <span class="hljs-type">Product</span> <span class="hljs-variable">product2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Product</span>(<span class="hljs-string">"Smartphone"</span>, <span class="hljs-number">500.0</span>);

            session.save(product1);
            session.save(product2);

            transaction.commit();
            System.out.println(<span class="hljs-string">"Inserted sample data"</span>);
        } <span class="hljs-keyword">catch</span> (Exception e) {
            <span class="hljs-keyword">if</span> (transaction != <span class="hljs-literal">null</span>) {
                transaction.rollback();
            }
            e.printStackTrace();
        } <span class="hljs-keyword">finally</span> {
            <span class="hljs-keyword">if</span> (session != <span class="hljs-literal">null</span>) {
                session.close();
            }
        }
    }
}
</code></pre>
<h4 data-id="heading-8">æ›´æ–°æ“ä½œç¤ºä¾‹</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.hibernate.Session;
<span class="hljs-keyword">import</span> org.hibernate.SessionFactory;
<span class="hljs-keyword">import</span> org.hibernate.Transaction;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HibernateOptimisticLockExample</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// è·å–SessionFactory</span>
        <span class="hljs-type">SessionFactory</span> <span class="hljs-variable">sessionFactory</span> <span class="hljs-operator">=</span> HibernateUtil.getSessionFactory();

        <span class="hljs-comment">// æ¨¡æ‹Ÿä¸¤ä¸ªäº‹åŠ¡åŒæ—¶æ›´æ–°ä¸€ä¸ªäº§å“</span>
        simulateConcurrentUpdates(sessionFactory);

        <span class="hljs-comment">// å…³é—­SessionFactory</span>
        sessionFactory.close();
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">simulateConcurrentUpdates</span><span class="hljs-params">(SessionFactory sessionFactory)</span> {
        <span class="hljs-comment">// äº‹åŠ¡1</span>
        <span class="hljs-type">Thread</span> <span class="hljs-variable">transaction1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; {
            <span class="hljs-type">Session</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> sessionFactory.openSession();
            <span class="hljs-type">Transaction</span> <span class="hljs-variable">transaction</span> <span class="hljs-operator">=</span> session.beginTransaction();
            <span class="hljs-keyword">try</span> {
                <span class="hljs-type">Product</span> <span class="hljs-variable">product</span> <span class="hljs-operator">=</span> session.get(Product.class, <span class="hljs-number">1L</span>); <span class="hljs-comment">// è·å–IDä¸º1çš„äº§å“</span>
                product.setPrice(product.getPrice() + <span class="hljs-number">100</span>); <span class="hljs-comment">// å¢åŠ ä»·æ ¼</span>
                session.update(product);
                transaction.commit();
                System.out.println(<span class="hljs-string">"Transaction 1 committed"</span>);
            } <span class="hljs-keyword">catch</span> (Exception e) {
                <span class="hljs-keyword">if</span> (transaction != <span class="hljs-literal">null</span>) {
                    transaction.rollback();
                }
                e.printStackTrace();
            } <span class="hljs-keyword">finally</span> {
                <span class="hljs-keyword">if</span> (session != <span class="hljs-literal">null</span>) {
                    session.close();
                }
            }
        });

        <span class="hljs-comment">// äº‹åŠ¡2</span>
        <span class="hljs-type">Thread</span> <span class="hljs-variable">transaction2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; {
            <span class="hljs-keyword">try</span> {
                <span class="hljs-comment">// è®©äº‹åŠ¡2ç¨å¾®å»¶è¿Ÿï¼Œç¡®ä¿äº‹åŠ¡1å…ˆå¼€å§‹</span>
                Thread.sleep(<span class="hljs-number">100</span>);
            } <span class="hljs-keyword">catch</span> (InterruptedException e) {
                e.printStackTrace();
            }
            <span class="hljs-type">Session</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> sessionFactory.openSession();
            <span class="hljs-type">Transaction</span> <span class="hljs-variable">transaction</span> <span class="hljs-operator">=</span> session.beginTransaction();
            <span class="hljs-keyword">try</span> {
                <span class="hljs-type">Product</span> <span class="hljs-variable">product</span> <span class="hljs-operator">=</span> session.get(Product.class, <span class="hljs-number">1L</span>); <span class="hljs-comment">// è·å–IDä¸º1çš„äº§å“</span>
                product.setPrice(product.getPrice() + <span class="hljs-number">200</span>); <span class="hljs-comment">// å¢åŠ ä»·æ ¼</span>
                session.update(product);
                transaction.commit();
                System.out.println(<span class="hljs-string">"Transaction 2 committed"</span>);
            } <span class="hljs-keyword">catch</span> (Exception e) {
                <span class="hljs-keyword">if</span> (transaction != <span class="hljs-literal">null</span>) {
                    transaction.rollback();
                }
                e.printStackTrace();
            } <span class="hljs-keyword">finally</span> {
                <span class="hljs-keyword">if</span> (session != <span class="hljs-literal">null</span>) {
                    session.close();
                }
            }
        });

        <span class="hljs-comment">// å¯åŠ¨ä¸¤ä¸ªäº‹åŠ¡çº¿ç¨‹</span>
        transaction1.start();
        transaction2.start();

        <span class="hljs-comment">// ç­‰å¾…ä¸¤ä¸ªäº‹åŠ¡æ‰§è¡Œå®Œæ¯•</span>
        <span class="hljs-keyword">try</span> {
            transaction1.join();
            transaction2.join();
        } <span class="hljs-keyword">catch</span> (InterruptedException e) {
            e.printStackTrace();
        }
    }
}
</code></pre>
<h3 data-id="heading-9">è¯¦ç»†è§£é‡Š</h3>
<ol>
<li>
<p><strong>å®ä½“ç±»å®šä¹‰</strong>ï¼š</p>
<ul>
<li><code>Product</code> ç±»å®šä¹‰äº†äº§å“çš„ä¿¡æ¯ï¼ŒåŒ…æ‹¬ <code>id</code>, <code>name</code>, <code>price</code> å’Œ <code>version</code> å­—æ®µã€‚</li>
<li><code>@Version</code> æ³¨è§£åº”ç”¨äº <code>version</code> å­—æ®µã€‚è¿™æ˜¯Hibernateç”¨æ¥å®ç°ä¹è§‚é”çš„å…³é”®æ³¨è§£ã€‚æ¯å½“å®ä½“è¢«æ›´æ–°æ—¶ï¼Œ<code>version</code> å­—æ®µä¼šè‡ªåŠ¨é€’å¢ã€‚</li>
</ul>
</li>
<li>
<p><strong>Hibernateé…ç½®æ–‡ä»¶</strong>ï¼š</p>
<ul>
<li>æ ‡å‡†çš„Hibernateé…ç½®æ–‡ä»¶ï¼Œç”¨äºæ•°æ®åº“è¿æ¥å’Œæ˜ å°„ç±»çš„é…ç½®ã€‚</li>
</ul>
</li>
<li>
<p><strong>HibernateUtilç±»</strong>ï¼š</p>
<ul>
<li>ä¸€ä¸ªå®ç”¨ç±»ï¼Œç”¨æ¥åˆ›å»ºå’Œè¿”å› <code>SessionFactory</code> å®ä¾‹ã€‚</li>
</ul>
</li>
<li>
<p><strong>æ’å…¥ç¤ºä¾‹æ•°æ®</strong>ï¼š</p>
<ul>
<li>åˆ›å»º <code>Product</code> å¯¹è±¡ï¼Œå¹¶å°†å…¶ä¿å­˜åˆ°æ•°æ®åº“ã€‚</li>
</ul>
</li>
<li>
<p><strong>æ›´æ–°æ“ä½œç¤ºä¾‹</strong>ï¼š</p>
<ul>
<li>æ¨¡æ‹Ÿä¸¤ä¸ªå¹¶å‘äº‹åŠ¡åŒæ—¶æ›´æ–°åŒä¸€ä¸ªäº§å“ã€‚</li>
<li>ä¸¤ä¸ªäº‹åŠ¡åˆ†åˆ«è¯»å–äº§å“æ•°æ®å¹¶è¿›è¡Œæ›´æ–°ã€‚</li>
<li>åœ¨äº‹åŠ¡æäº¤æ—¶ï¼ŒHibernateä¼šæ£€æŸ¥ <code>version</code> å­—æ®µæ˜¯å¦ä¸€è‡´ã€‚å¦‚æœæœ‰å¦ä¸€ä¸ªäº‹åŠ¡å·²ç»ä¿®æ”¹äº†è¯¥äº§å“ï¼Œ<code>version</code> å­—æ®µä¼šå‘ç”Ÿå˜åŒ–ï¼Œå¯¼è‡´å½“å‰äº‹åŠ¡æŠ›å‡º <code>OptimisticLockException</code> å¹¶å›æ»šã€‚</li>
</ul>
</li>
</ol>
<p>é€šè¿‡è¿™ç§æ–¹å¼ï¼ŒHibernateç¡®ä¿äº†åœ¨å¹¶å‘ç¯å¢ƒä¸‹çš„æ•°æ®ä¸€è‡´æ€§ï¼Œé¿å…äº†å¤šä¸ªäº‹åŠ¡åŒæ—¶ä¿®æ”¹åŒä¸€æ¡è®°å½•è€Œå¯¼è‡´çš„æ•°æ®å†²çªã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç¨³å®šæ€§æ€§èƒ½ç³»åˆ—ä¹‹åäºŒâ€”â€”Androidæ¸²æŸ“æ€§èƒ½æ·±åº¦ä¼˜åŒ–:SurfaceFlingerä¸GPU]]></title>    <link>https://juejin.cn/post/7594242987598708763</link>    <guid>https://juejin.cn/post/7594242987598708763</guid>    <pubDate>2026-01-12T09:25:40.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594242987598708763" data-draft-id="7594282984325693449" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç¨³å®šæ€§æ€§èƒ½ç³»åˆ—ä¹‹åäºŒâ€”â€”Androidæ¸²æŸ“æ€§èƒ½æ·±åº¦ä¼˜åŒ–:SurfaceFlingerä¸GPU"/> <meta itemprop="keywords" content="Android,æ€§èƒ½ä¼˜åŒ–,Debug"/> <meta itemprop="datePublished" content="2026-01-12T09:25:40.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å†¬å¥‡Lab"/> <meta itemprop="url" content="https://juejin.cn/user/1857501105781193"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç¨³å®šæ€§æ€§èƒ½ç³»åˆ—ä¹‹åäºŒâ€”â€”Androidæ¸²æŸ“æ€§èƒ½æ·±åº¦ä¼˜åŒ–:SurfaceFlingerä¸GPU
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1857501105781193/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å†¬å¥‡Lab
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-12T09:25:40.000Z" title="Mon Jan 12 2026 09:25:40 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»21åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€</h2>
<p>ä½ æœ‰æ²¡æœ‰é‡åˆ°è¿‡è¿™æ ·çš„åœºæ™¯ï¼šåº”ç”¨åœ¨è‡ªå·±çš„æ‰‹æœºä¸Šä¸èˆ¬é¡ºæ»‘,ä½†æ¢åˆ°æŸäº›è®¾å¤‡ä¸Šå°±å¡å¾—åƒPPT?æˆ–è€…å¤æ‚åˆ—è¡¨æ»‘åŠ¨æ—¶æ‰å¸§ä¸¥é‡,ä½†CPUå’Œå†…å­˜å ç”¨çœ‹èµ·æ¥éƒ½æ­£å¸¸?</p>
<p>è¿™é€šå¸¸ä¸æ˜¯ä»£ç é€»è¾‘çš„é—®é¢˜,è€Œæ˜¯<strong>æ¸²æŸ“æ€§èƒ½</strong>çš„ç“¶é¢ˆã€‚åœ¨Androidç³»ç»Ÿä¸­,ä»åº”ç”¨UIç»˜åˆ¶åˆ°å±å¹•æ˜¾ç¤º,ä¸­é—´ç»å†äº†ä¸€ä¸ªå¤æ‚çš„æ¸²æŸ“ç®¡çº¿â€”â€”æ¶‰åŠåº”ç”¨è¿›ç¨‹ã€SurfaceFlingerç³»ç»ŸæœåŠ¡å’ŒGPUç¡¬ä»¶ã€‚ç†è§£è¿™æ¡ç®¡çº¿çš„å·¥ä½œåŸç†,æ˜¯ä¼˜åŒ–æ¸²æŸ“æ€§èƒ½çš„å…³é”®ã€‚</p>
<p>æˆ‘æ›¾åœ¨ä¸€ä¸ªè½¦è½½é¡¹ç›®ä¸­é‡åˆ°è¿‡åœ°å›¾æ»‘åŠ¨æ—¶ä¸¥é‡æ‰å¸§çš„é—®é¢˜ã€‚è¡¨é¢ä¸Šçœ‹CPUå ç”¨åªæœ‰40%,å†…å­˜ä¹Ÿå……è¶³,ä½†å°±æ˜¯å¡ã€‚åæ¥é€šè¿‡Systraceåˆ†æå‘ç°,é—®é¢˜å‡ºåœ¨è¿‡åº¦ç»˜åˆ¶â€”â€”åœ°å›¾åº•å›¾ã€è·¯ç½‘ã€POIæ ‡æ³¨å±‚å±‚å åŠ ,GPUæ¯å¸§è¦æ¸²æŸ“7-8å±‚,å¯¼è‡´å¡«å……ç‡çˆ†è¡¨ã€‚æœ€ç»ˆé€šè¿‡åˆå¹¶å›¾å±‚ã€ä¼˜åŒ–alphaæ··åˆ,å°†å¸§ç‡ä»20fpsæå‡åˆ°58fpsã€‚</p>
<p><strong>æœ¬æ–‡å†…å®¹</strong>:</p>
<ul>
<li>Androidæ¸²æŸ“æ¶æ„æ·±å…¥:VSYNCã€BufferQueueã€SurfaceFlingerå·¥ä½œæµç¨‹</li>
<li>GPUæ¸²æŸ“ç®¡çº¿ä¸ä¼˜åŒ–æŠ€å·§</li>
<li>è¿‡åº¦ç»˜åˆ¶åˆ†æä¸ç³»ç»ŸåŒ–ä¼˜åŒ–æ–¹æ³•</li>
<li>ç¡¬ä»¶åŠ é€ŸåŸç†ä¸æœ€ä½³å®è·µ</li>
<li>æ¸²æŸ“æ€§èƒ½åˆ†æå·¥å…·å…¨è§£(Profile GPU Renderingã€GPU Profiler)</li>
<li>å®æˆ˜æ¡ˆä¾‹:å¤æ‚åˆ—è¡¨æ»‘åŠ¨ä¼˜åŒ–</li>
</ul>
<p><strong>å­¦ä¹ ç›®æ ‡</strong>:</p>
<ul>
<li>æ·±å…¥ç†è§£Androidæ¸²æŸ“æœºåˆ¶çš„æ¯ä¸ªç¯èŠ‚</li>
<li>æŒæ¡GPUæ¸²æŸ“ä¼˜åŒ–çš„å®ç”¨æŠ€å·§</li>
<li>å­¦ä¼šä½¿ç”¨å·¥å…·å®šä½æ¸²æŸ“ç“¶é¢ˆ</li>
<li>å»ºç«‹æ¸²æŸ“ä¼˜åŒ–çš„ç³»ç»ŸåŒ–æ€ç»´</li>
</ul>
<hr/>
<h2 data-id="heading-1">Androidæ¸²æŸ“æœºåˆ¶æ·±å…¥</h2>
<p>è¦ä¼˜åŒ–æ¸²æŸ“æ€§èƒ½,é¦–å…ˆè¦ç†è§£Androidçš„æ¸²æŸ“æ¶æ„ã€‚è¿™æ˜¯ä¸€ä¸ªåˆ†å±‚è®¾è®¡çš„ç³»ç»Ÿ,åº”ç”¨ã€ç³»ç»ŸæœåŠ¡å’Œç¡¬ä»¶ç´§å¯†åä½œã€‚</p>
<h3 data-id="heading-2">æ¸²æŸ“æ¶æ„å…¨æ™¯</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f3d0697405ae4762bea082c179cbb6aa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yas5aWHTGFi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768814740&amp;x-signature=k4%2FpQu40JsCSlIHGRUyIoleUybk%3D" alt="12-01-android-rendering-architecture.png" loading="lazy"/></p>
<p>Androidæ¸²æŸ“æ¶æ„å¯ä»¥åˆ†ä¸ºä»¥ä¸‹å‡ å±‚:</p>
<p><strong>1. åº”ç”¨å±‚ (App Process)</strong></p>
<ul>
<li><strong>UI Thread</strong>: æ‰§è¡Œmeasureã€layoutã€draw,ç”ŸæˆDisplayList</li>
<li><strong>RenderThread</strong>: Android 5.0å¼•å…¥çš„ç‹¬ç«‹æ¸²æŸ“çº¿ç¨‹,è´Ÿè´£å°†DisplayListè½¬æ¢ä¸ºGPUæŒ‡ä»¤</li>
</ul>
<p><strong>2. ç³»ç»ŸæœåŠ¡å±‚ (System Server)</strong></p>
<ul>
<li><strong>SurfaceFlinger</strong>: ç³»ç»Ÿåˆæˆå™¨,è´Ÿè´£å°†å„ä¸ªåº”ç”¨çš„Surfaceåˆæˆåˆ°å±å¹•</li>
<li><strong>WindowManager</strong>: ç®¡ç†çª—å£å±‚çº§å’ŒSurfaceåˆ†é…</li>
</ul>
<p><strong>3. ç¡¬ä»¶æŠ½è±¡å±‚ (HAL)</strong></p>
<ul>
<li><strong>HWC (Hardware Composer)</strong>: ç¡¬ä»¶åˆæˆå™¨,åè°ƒGPUå’ŒDisplayç¡¬ä»¶</li>
<li><strong>Gralloc</strong>: å›¾å½¢ç¼“å†²åŒºåˆ†é…å™¨</li>
</ul>
<p><strong>4. ç¡¬ä»¶å±‚</strong></p>
<ul>
<li><strong>GPU</strong>: å›¾å½¢å¤„ç†å•å…ƒ,æ‰§è¡ŒOpenGL ES/VulkanæŒ‡ä»¤</li>
<li><strong>Display</strong>: æ˜¾ç¤ºè®¾å¤‡,æ¥æ”¶VSYNCä¿¡å·</li>
</ul>
<h3 data-id="heading-3">VSYNCä¿¡å·ä¸Choreographer</h3>
<p>VSYNC (Vertical Synchronization) æ˜¯æ¸²æŸ“ç³»ç»Ÿçš„èŠ‚æ‹å™¨,å®ƒç¡®ä¿æ¸²æŸ“ä¸å±å¹•åˆ·æ–°åŒæ­¥,é¿å…ç”»é¢æ’•è£‚ã€‚</p>
<h4 data-id="heading-4">VSYNCä¿¡å·æµ</h4>
<pre><code class="hljs language-css" lang="css"><span class="hljs-attribute">Display</span>å‘å‡ºVSYNC â†’ SurfaceFlingeræ¥æ”¶ â†’ åˆ†å‘ç»™æ‰€æœ‰åº”ç”¨ â†’ è§¦å‘ç»˜åˆ¶
                                        â†“
                               Choreographerå›è°ƒ
</code></pre>
<p><strong>Choreographerå·¥ä½œæœºåˆ¶</strong>:</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// Choreographeræ˜¯åº”ç”¨ç«¯çš„VSYNCè°ƒåº¦å™¨</span>
Choreographer.getInstance().postFrameCallback { frameTimeNanos -&gt;
    <span class="hljs-comment">// åœ¨ä¸‹ä¸€ä¸ªVSYNCä¿¡å·åˆ°æ¥æ—¶æ‰§è¡Œ</span>
    <span class="hljs-comment">// frameTimeNanos: VSYNCæ—¶é—´æˆ³</span>
    doFrame(frameTimeNanos)
}
</code></pre>
<p><strong>å…³é”®æ—¶åº</strong>:</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-string">VSYNCé—´éš”</span> <span class="hljs-string">(60Hz)</span> <span class="hljs-string">=</span> <span class="hljs-number">16.</span><span class="hljs-string">67ms</span>
<span class="hljs-string">â”‚</span>
<span class="hljs-string">â”œâ”€â”€</span> <span class="hljs-attr">T0:</span> <span class="hljs-string">VSYNCä¿¡å·åˆ°è¾¾</span>
<span class="hljs-string">â”‚</span>   <span class="hljs-string">â””â”€â”€</span> <span class="hljs-string">Appå¼€å§‹measure/layout/draw</span> <span class="hljs-string">(UI</span> <span class="hljs-string">Thread)</span>
<span class="hljs-string">â”‚</span>
<span class="hljs-string">â”œâ”€â”€</span> <span class="hljs-attr">T1:</span> <span class="hljs-string">DisplayListç”Ÿæˆå®Œæˆ</span> <span class="hljs-string">(è€—æ—¶:</span> <span class="hljs-number">2</span><span class="hljs-string">-5ms)</span>
<span class="hljs-string">â”‚</span>   <span class="hljs-string">â””â”€â”€</span> <span class="hljs-string">RenderThreadå¼€å§‹å¤„ç†</span>
<span class="hljs-string">â”‚</span>
<span class="hljs-string">â”œâ”€â”€</span> <span class="hljs-attr">T2:</span> <span class="hljs-string">GPUæŒ‡ä»¤æäº¤å®Œæˆ</span> <span class="hljs-string">(è€—æ—¶:</span> <span class="hljs-number">3</span><span class="hljs-string">-8ms)</span>
<span class="hljs-string">â”‚</span>   <span class="hljs-string">â””â”€â”€</span> <span class="hljs-string">GPUå¼€å§‹æ¸²æŸ“</span>
<span class="hljs-string">â”‚</span>
<span class="hljs-string">â”œâ”€â”€</span> <span class="hljs-attr">T3:</span> <span class="hljs-string">GPUæ¸²æŸ“å®Œæˆ</span> <span class="hljs-string">(è€—æ—¶:</span> <span class="hljs-number">5</span><span class="hljs-string">-10ms)</span>
<span class="hljs-string">â”‚</span>   <span class="hljs-string">â””â”€â”€</span> <span class="hljs-string">å†™å…¥Back</span> <span class="hljs-string">Buffer</span>
<span class="hljs-string">â”‚</span>
<span class="hljs-string">â””â”€â”€</span> <span class="hljs-attr">T4:</span> <span class="hljs-string">ä¸‹ä¸€ä¸ªVSYNC,äº¤æ¢Front/Back</span> <span class="hljs-string">Buffer</span>
</code></pre>
<p>å¦‚æœ T0 åˆ° T4 çš„æ€»æ—¶é—´è¶…è¿‡16.67ms,å°±ä¼šå‘ç”Ÿ<strong>æ‰å¸§ (Jank)</strong>ã€‚</p>
<p><strong>AOSPæºç ä½ç½®</strong>:</p>
<ul>
<li>Choreographerå®ç°: <code>frameworks/base/core/java/android/view/Choreographer.java</code></li>
<li>VSYNCåˆ†å‘: <code>frameworks/native/services/surfaceflinger/Scheduler/VSyncDispatch.cpp</code></li>
</ul>
<h4 data-id="heading-5">VSYNC-app vs VSYNC-sf</h4>
<p>Androidä¸­æœ‰ä¸¤ç§VSYNCä¿¡å·:</p>























<table><thead><tr><th>ä¿¡å·ç±»å‹</th><th>æ¥æ”¶è€…</th><th>ä½œç”¨</th><th>ç›¸ä½åç§»</th></tr></thead><tbody><tr><td>VSYNC-app</td><td>åº”ç”¨è¿›ç¨‹</td><td>è§¦å‘ç»˜åˆ¶</td><td>-5ms (æå‰è§¦å‘)</td></tr><tr><td>VSYNC-sf</td><td>SurfaceFlinger</td><td>è§¦å‘åˆæˆ</td><td>0ms (å‡†æ—¶è§¦å‘)</td></tr></tbody></table>
<p><strong>ä¸ºä»€ä¹ˆè¦æå‰è§¦å‘åº”ç”¨?</strong></p>
<p>å› ä¸ºåº”ç”¨æ¸²æŸ“éœ€è¦æ—¶é—´,æå‰è§¦å‘å¯ä»¥è®©åº”ç”¨åœ¨SurfaceFlingeråˆæˆä¹‹å‰å®Œæˆæ¸²æŸ“,ç¡®ä¿æ–°å¸§èƒ½è¢«æ˜¾ç¤ºã€‚</p>
<pre><code class="hljs language-ini" lang="ini">Time:     0ms        5ms       10ms      16.67ms
          â”‚          â”‚          â”‚          â”‚
VSYNC-app â”‚â”€â”€â”€â”€â”€â”€â”€â”€&gt; â”‚          â”‚          â”‚  (æå‰5msè§¦å‘)
App Draw  â”‚   <span class="hljs-section">[ç»˜åˆ¶]</span> â”‚          â”‚          â”‚
          â”‚          â”‚          â”‚          â”‚
VSYNC-sf  â”‚          â”‚          â”‚â”€â”€â”€â”€â”€â”€â”€â”€&gt; â”‚  (å‡†æ—¶è§¦å‘)
SF Composite        â”‚          â”‚  <span class="hljs-section">[åˆæˆ]</span> â”‚
</code></pre>
<h3 data-id="heading-6">åŒç¼“å†²ä¸ä¸‰ç¼“å†²</h3>
<p>ä¸ºäº†é¿å…ç”»é¢æ’•è£‚å’Œæå‡æµç•…åº¦,Androidä½¿ç”¨ç¼“å†²æœºåˆ¶ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/efbdb88939f04e05a9d8d7d563447411~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yas5aWHTGFi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768814740&amp;x-signature=VWcqgVcgLFQF02MzSlG%2F11mamD4%3D" alt="12-02-double-triple-buffering.png" loading="lazy"/></p>
<h4 data-id="heading-7">åŒç¼“å†² (Double Buffering)</h4>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">Front Buffer:</span> <span class="hljs-string">æ­£åœ¨è¢«Displayæ‰«ææ˜¾ç¤º</span>
<span class="hljs-attr">Back Buffer:</span>  <span class="hljs-string">æ­£åœ¨è¢«GPUæ¸²æŸ“</span>
</code></pre>
<p><strong>å·¥ä½œæµç¨‹</strong>:</p>
<ol>
<li>GPUæ¸²æŸ“åˆ°Back Buffer</li>
<li>VSYNCåˆ°æ¥æ—¶,äº¤æ¢Front/Back Buffer (SwapBuffers)</li>
<li>Displayä»æ–°çš„Front Bufferè¯»å–æ•°æ®æ˜¾ç¤º</li>
</ol>
<p><strong>é—®é¢˜</strong>: å¦‚æœGPUæ¸²æŸ“æœªå®Œæˆ,VSYNCåˆ°æ¥æ—¶æ— æ³•äº¤æ¢,å¯¼è‡´<strong>æ‰å¸§</strong>ã€‚</p>
<h4 data-id="heading-8">ä¸‰ç¼“å†² (Triple Buffering)</h4>
<p>Android 4.1+ å¼•å…¥ä¸‰ç¼“å†²:</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">Front Buffer:</span> <span class="hljs-string">æ­£åœ¨è¢«Displayæ‰«æ</span>
<span class="hljs-attr">Back Buffer:</span>  <span class="hljs-string">æ­£åœ¨è¢«GPUæ¸²æŸ“</span>
<span class="hljs-attr">Third Buffer:</span> <span class="hljs-string">ç­‰å¾…GPUç©ºé—²æ—¶é¢„å…ˆå¼€å§‹æ¸²æŸ“</span>
</code></pre>
<p><strong>ä¼˜åŠ¿</strong>: å½“GPUç¹å¿™æ—¶,CPUå¯ä»¥æå‰å‡†å¤‡ä¸‹ä¸€å¸§åˆ°Third Buffer,å‡å°‘ç©ºé—²ç­‰å¾…ã€‚</p>
<p><strong>ä»£ä»·</strong>: é¢å¤–çš„å†…å­˜å ç”¨ + 1å¸§å»¶è¿Ÿ (Latency)ã€‚</p>
<p><strong>æŸ¥çœ‹å½“å‰é…ç½®</strong>:</p>
<pre><code class="hljs language-bash" lang="bash">adb shell dumpsys SurfaceFlinger | grep -i buffer
<span class="hljs-comment"># è¾“å‡ºç¤ºä¾‹:</span>
<span class="hljs-comment"># Triple Buffering: enabled</span>
</code></pre>
<h3 data-id="heading-9">SurfaceFlingerå·¥ä½œæµç¨‹</h3>
<p>SurfaceFlingeræ˜¯Androidæ¸²æŸ“ç³»ç»Ÿçš„æ ¸å¿ƒ,è´Ÿè´£å°†å¤šä¸ªåº”ç”¨çš„Surfaceåˆæˆåˆ°å±å¹•ã€‚</p>
<h4 data-id="heading-10">SurfaceFlingeræ¶æ„</h4>
<pre><code class="hljs language-scss" lang="scss">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          SurfaceFlingerè¿›ç¨‹              â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   Scheduler (VSYNCè°ƒåº¦)          â”‚  â”‚
â”‚  â”‚   - VSyncDispatch                â”‚  â”‚
â”‚  â”‚   - EventThread                  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   Compositor (åˆæˆå™¨)             â”‚  â”‚
â”‚  â”‚   - Layerç®¡ç†                     â”‚  â”‚
â”‚  â”‚   - BufferQueueæ¶ˆè´¹               â”‚  â”‚
â”‚  â”‚   - åˆæˆç­–ç•¥é€‰æ‹©                   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   HWC Abstraction                â”‚  â”‚
â”‚  â”‚   - GPUåˆæˆ (Client Composition) â”‚  â”‚
â”‚  â”‚   - HWCåˆæˆ (Device Composition) â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h4 data-id="heading-11">åˆæˆæµç¨‹æ—¶åº</h4>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0c9320f1c540469fa3f54d812c02d700~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yas5aWHTGFi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768814740&amp;x-signature=duHUkmTDj23F%2Bu%2BEhNhH971jSAc%3D" alt="12-03-surfaceflinger-composition-timing.png" loading="lazy"/></p>
<p><strong>è¯¦ç»†æ­¥éª¤</strong>:</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// 1. æ¥æ”¶VSYNC-sfä¿¡å·</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">SurfaceFlinger::onMessageReceived</span><span class="hljs-params">(<span class="hljs-type">int32_t</span> what)</span> </span>{
    <span class="hljs-keyword">switch</span> (what) {
        <span class="hljs-keyword">case</span> MessageQueue::INVALIDATE:
            <span class="hljs-comment">// æ”¶é›†æ‰€æœ‰Layerçš„æ›´æ–°</span>
            <span class="hljs-built_in">handleMessageInvalidate</span>();
            <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> MessageQueue::REFRESH:
            <span class="hljs-comment">// æ‰§è¡Œåˆæˆ</span>
            <span class="hljs-built_in">handleMessageRefresh</span>();
            <span class="hljs-keyword">break</span>;
    }
}

<span class="hljs-comment">// 2. éå†æ‰€æœ‰Layer,æ£€æŸ¥æ˜¯å¦æœ‰æ–°çš„Buffer</span>
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span>&amp; layer : mDrawingState.layersSortedByZ) {
    <span class="hljs-keyword">if</span> (layer-&gt;<span class="hljs-built_in">hasReadyFrame</span>()) {
        <span class="hljs-comment">// ä»BufferQueueå–å‡ºBuffer</span>
        layer-&gt;<span class="hljs-built_in">updateTexImage</span>();
    }
}

<span class="hljs-comment">// 3. å†³å®šåˆæˆç­–ç•¥</span>
<span class="hljs-keyword">if</span> (hwc-&gt;<span class="hljs-built_in">canHandleComposition</span>()) {
    <span class="hljs-comment">// HWCåˆæˆ (ç¡¬ä»¶åˆæˆ,æ›´é«˜æ•ˆ)</span>
    <span class="hljs-built_in">doCompositionByHWC</span>();
} <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// GPUåˆæˆ (Client Composition)</span>
    <span class="hljs-built_in">doCompositionByGPU</span>();
}

<span class="hljs-comment">// 4. è¾“å‡ºåˆ°Display</span>
display-&gt;<span class="hljs-built_in">presentAndGetReleaseFences</span>();
</code></pre>
<p><strong>åˆæˆç­–ç•¥å¯¹æ¯”</strong>:</p>


























<table><thead><tr><th>åˆæˆæ–¹å¼</th><th>æ‰§è¡Œä½ç½®</th><th>ä¼˜åŠ¿</th><th>åŠ£åŠ¿</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>Device Composition</td><td>HWCç¡¬ä»¶</td><td>åŠŸè€—ä½ã€æ— éœ€GPU</td><td>èƒ½åŠ›å—é™</td><td>ç®€å•åœºæ™¯(2-4ä¸ªLayer)</td></tr><tr><td>Client Composition</td><td>GPU</td><td>èƒ½åŠ›å¼ºã€æ”¯æŒå¤æ‚ç‰¹æ•ˆ</td><td>åŠŸè€—é«˜</td><td>å¤æ‚åœºæ™¯(alphaæ··åˆã€æ—‹è½¬ç­‰)</td></tr></tbody></table>
<p><strong>æŸ¥çœ‹åˆæˆç­–ç•¥</strong>:</p>
<pre><code class="hljs language-bash" lang="bash">adb shell dumpsys SurfaceFlinger | grep -A 5 <span class="hljs-string">"Composition"</span>
<span class="hljs-comment"># è¾“å‡ºç¤ºä¾‹:</span>
<span class="hljs-comment"># Layer[0]: Device Composition</span>
<span class="hljs-comment"># Layer[1]: Client Composition (alpha &lt; 1.0)</span>
<span class="hljs-comment"># Layer[2]: Device Composition</span>
</code></pre>
<h3 data-id="heading-12">BufferQueueæœºåˆ¶</h3>
<p>BufferQueueæ˜¯åº”ç”¨ä¸SurfaceFlingerä¹‹é—´çš„<strong>ç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å‹</strong>ã€‚</p>
<h4 data-id="heading-13">BufferQueueæ¶æ„</h4>
<pre><code class="hljs language-bash" lang="bash">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       BufferQueue        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  åº”ç”¨è¿›ç¨‹       â”‚       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚  SurfaceFlinger  â”‚
â”‚                â”‚       â”‚  Buffers â”‚       â”‚                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚       â”‚ â”Œâ”€â”€â”€â”€â”€â”€â” â”‚       â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Producer â”‚â”€â”€â”¼â”€â”€â”€â”€â”€â”€&gt;â”‚ â”‚Buf<span class="hljs-comment">#0 â”‚ â”‚&lt;â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”‚  Consumer  â”‚ â”‚</span>
â”‚  â”‚(App Draw)â”‚  â”‚ queue â”‚ â”œâ”€â”€â”€â”€â”€â”€â”¤ â”‚dequeueâ”‚  â”‚(SF Compose)â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚       â”‚ â”‚Buf<span class="hljs-comment">#1 â”‚ â”‚       â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚</span>
â”‚                â”‚       â”‚ â”œâ”€â”€â”€â”€â”€â”€â”¤ â”‚       â”‚                  â”‚
â”‚                â”‚       â”‚ â”‚Buf<span class="hljs-comment">#2 â”‚ â”‚       â”‚                  â”‚</span>
â”‚                â”‚       â”‚ â””â”€â”€â”€â”€â”€â”€â”˜ â”‚       â”‚                  â”‚
â”‚                â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<p><strong>å·¥ä½œæµç¨‹</strong>:</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// åº”ç”¨ç«¯ (Producer)</span>
<span class="hljs-comment">// 1. è¯·æ±‚ä¸€ä¸ªç©ºé—²Buffer</span>
<span class="hljs-type">Surface</span> <span class="hljs-variable">surface</span> <span class="hljs-operator">=</span> surfaceHolder.getSurface();
<span class="hljs-type">Canvas</span> <span class="hljs-variable">canvas</span> <span class="hljs-operator">=</span> surface.lockCanvas(<span class="hljs-literal">null</span>); <span class="hljs-comment">// dequeueBuffer</span>

<span class="hljs-comment">// 2. ç»˜åˆ¶å†…å®¹</span>
canvas.drawRect(...);
canvas.drawText(...);

<span class="hljs-comment">// 3. æäº¤Buffer</span>
surface.unlockCanvasAndPost(canvas); <span class="hljs-comment">// queueBuffer</span>

<span class="hljs-comment">// SurfaceFlingerç«¯ (Consumer)</span>
<span class="hljs-comment">// 4. è·å–æœ€æ–°çš„Buffer</span>
acquireBuffer();

<span class="hljs-comment">// 5. åˆæˆåˆ°å±å¹•</span>
composeBuffer();

<span class="hljs-comment">// 6. é‡Šæ”¾Buffer</span>
releaseBuffer();
</code></pre>
<p><strong>BufferçŠ¶æ€æœº</strong>:</p>
<pre><code class="hljs language-scss" lang="scss">FREE (ç©ºé—²) â”€â”€dequeueâ”€â”€&gt; DEQUEUED (åº”ç”¨æŒæœ‰)
                             â”‚
                          queue
                             â”‚
                             â†“
ACQUIRED (SFæŒæœ‰) â†â”€â”€acquireâ”€â”€ QUEUED (ç­‰å¾…åˆæˆ)
     â”‚
  release
     â”‚
     â†“
  FREE
</code></pre>
<p><strong>å¸¸è§å‚æ•°</strong>:</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æŸ¥çœ‹BufferQueueçŠ¶æ€</span>
adb shell dumpsys SurfaceFlinger | grep -A 10 <span class="hljs-string">"BufferQueue"</span>

<span class="hljs-comment"># è¾“å‡ºç¤ºä¾‹:</span>
<span class="hljs-comment"># BufferQueue: [com.example.app/com.example.MainActivity#0]</span>
<span class="hljs-comment">#   + buffers: 3</span>
<span class="hljs-comment">#   + queued: 1</span>
<span class="hljs-comment">#   + dequeued: 1</span>
<span class="hljs-comment">#   + free: 1</span>
<span class="hljs-comment">#   + maxAcquired: 1</span>
</code></pre>
<p><strong>AOSPæºç ä½ç½®</strong>:</p>
<ul>
<li>BufferQueueå®ç°: <code>frameworks/native/libs/gui/BufferQueue.cpp</code></li>
<li>Surface (Producer): <code>frameworks/native/libs/gui/Surface.cpp</code></li>
<li>SurfaceFlinger (Consumer): <code>frameworks/native/services/surfaceflinger/</code></li>
</ul>
<hr/>
<h2 data-id="heading-14">GPUæ¸²æŸ“ç®¡çº¿ä¸ä¼˜åŒ–</h2>
<p>GPUæ˜¯æ¸²æŸ“çš„æ ¸å¿ƒç¡¬ä»¶,ç†è§£GPUæ¸²æŸ“ç®¡çº¿æ˜¯ä¼˜åŒ–çš„åŸºç¡€ã€‚</p>
<h3 data-id="heading-15">GPUæ¸²æŸ“ç®¡çº¿</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/87527efe7b9c4d1c97e32dc1a2d1d999~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yas5aWHTGFi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768814740&amp;x-signature=A1tWCWY0yVq7w53hlUSTx0bMC78%3D" alt="12-04-gpu-rendering-pipeline.png" loading="lazy"/></p>
<p><strong>GPUæ¸²æŸ“ç®¡çº¿ (OpenGL ES)</strong>:</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-bullet">1.</span> é¡¶ç‚¹ç€è‰²å™¨ (Vertex Shader)
   è¾“å…¥: é¡¶ç‚¹åæ ‡ã€çº¹ç†åæ ‡ã€é¢œè‰²
   è¾“å‡º: å˜æ¢åçš„é¡¶ç‚¹ä½ç½®
   ä½œç”¨: é¡¶ç‚¹å˜æ¢(MVPçŸ©é˜µ)ã€å…‰ç…§è®¡ç®—

<span class="hljs-bullet">2.</span> å›¾å…ƒè£…é… (Primitive Assembly)
   ä½œç”¨: å°†é¡¶ç‚¹ç»„è£…æˆä¸‰è§’å½¢

<span class="hljs-bullet">3.</span> å…‰æ …åŒ– (Rasterization)
   ä½œç”¨: å°†ä¸‰è§’å½¢è½¬æ¢ä¸ºåƒç´ ç‰‡æ®µ

<span class="hljs-bullet">4.</span> ç‰‡æ®µç€è‰²å™¨ (Fragment Shader)
   è¾“å…¥: ç‰‡æ®µåæ ‡ã€çº¹ç†åæ ‡
   è¾“å‡º: ç‰‡æ®µé¢œè‰²
   ä½œç”¨: çº¹ç†é‡‡æ ·ã€é¢œè‰²è®¡ç®—ã€ç‰¹æ•ˆ

<span class="hljs-bullet">5.</span> æµ‹è¯•ä¸æ··åˆ (Tests &amp; Blending)
   ä½œç”¨: æ·±åº¦æµ‹è¯•ã€Alphaæ··åˆã€æ¨¡æ¿æµ‹è¯•

<span class="hljs-bullet">6.</span> å¸§ç¼“å†² (Framebuffer)
   ä½œç”¨: æœ€ç»ˆè¾“å‡ºåˆ°å±å¹•
</code></pre>
<p><strong>æ€§èƒ½ç“¶é¢ˆç‚¹</strong>:</p>






























<table><thead><tr><th>é˜¶æ®µ</th><th>å¸¸è§ç“¶é¢ˆ</th><th>ä¼˜åŒ–æ–¹å‘</th></tr></thead><tbody><tr><td>é¡¶ç‚¹ç€è‰²å™¨</td><td>é¡¶ç‚¹æ•°è¿‡å¤š</td><td>å‡å°‘é¡¶ç‚¹ã€LOD</td></tr><tr><td>å…‰æ …åŒ–</td><td>å¤§é¢ç§¯å¤šè¾¹å½¢</td><td>å‰”é™¤ã€è£å‰ª</td></tr><tr><td>ç‰‡æ®µç€è‰²å™¨</td><td>å¤æ‚è®¡ç®—ã€çº¹ç†é‡‡æ ·</td><td>ç®€åŒ–Shaderã€ä¼˜åŒ–çº¹ç†</td></tr><tr><td>æµ‹è¯•ä¸æ··åˆ</td><td>è¿‡åº¦ç»˜åˆ¶ã€Alphaæ··åˆ</td><td>å‡å°‘å±‚çº§ã€z-orderä¼˜åŒ–</td></tr></tbody></table>
<h3 data-id="heading-16">OpenGL ESä¼˜åŒ–æŠ€å·§</h3>
<h4 data-id="heading-17">1. å‡å°‘Draw Calls</h4>
<p><strong>é—®é¢˜</strong>: æ¯æ¬¡Draw Calléƒ½æœ‰CPUâ†’GPUçš„å¼€é”€ã€‚</p>
<p>âŒ <strong>Bad</strong>: æ¯ä¸ªUIå…ƒç´ ä¸€æ¬¡Draw Call</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// ç»˜åˆ¶100ä¸ªæŒ‰é’®,100æ¬¡Draw Call</span>
<span class="hljs-keyword">for</span> (i <span class="hljs-keyword">in</span> <span class="hljs-number">0.</span><span class="hljs-number">.99</span>) {
    canvas.drawBitmap(buttonBitmap, x[i], y[i], paint)
}
</code></pre>
<p>âœ… <strong>Good</strong>: æ‰¹é‡ç»˜åˆ¶(Batch Drawing)</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// ä½¿ç”¨Canvas.drawBitmapMesh æˆ–è€…åˆå¹¶åˆ°ä¸€ä¸ªçº¹ç†</span>
<span class="hljs-keyword">val</span> matrix = Matrix()
<span class="hljs-keyword">for</span> (i <span class="hljs-keyword">in</span> <span class="hljs-number">0.</span><span class="hljs-number">.99</span>) {
    matrix.setTranslate(x[i], y[i])
    canvas.drawBitmap(buttonBitmap, matrix, paint)
}
<span class="hljs-comment">// æˆ–è€…æ›´å¥½:ä½¿ç”¨RecyclerViewçš„ItemDecorationå‡å°‘ç»˜åˆ¶</span>
</code></pre>
<p><strong>Androidä¸­çš„è‡ªåŠ¨æ‰¹å¤„ç†</strong>:</p>
<ul>
<li>RenderThreadä¼šå°è¯•åˆå¹¶ç›¸åŒæè´¨çš„Draw Calls</li>
<li>ä½¿ç”¨ç›¸åŒPaintå’ŒBitmapæœ‰åŠ©äºæ‰¹å¤„ç†</li>
</ul>
<h4 data-id="heading-18">2. çº¹ç†ä¼˜åŒ–</h4>
<p><strong>çº¹ç†å‹ç¼©</strong>:</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// ä½¿ç”¨ETC2/ASTCå‹ç¼©çº¹ç†,å‡å°‘å¸¦å®½å ç”¨</span>
BitmapFactory.Options options = BitmapFactory.Options()
options.inPreferredConfig = Bitmap.Config.RGB_565 <span class="hljs-comment">// 2å­—èŠ‚/åƒç´ </span>
<span class="hljs-comment">// æ¯”ARGB_8888 (4å­—èŠ‚/åƒç´ ) èŠ‚çœ50%å†…å­˜å’Œå¸¦å®½</span>
</code></pre>
<p><strong>Mipmapä½¿ç”¨</strong>:</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- res/drawable-nodpi/large_image.png --&gt;</span>
<span class="hljs-comment">&lt;!-- ä¸ºä¸åŒå°ºå¯¸æä¾›Mipmap,GPUè‡ªåŠ¨é€‰æ‹©åˆé€‚çš„çº§åˆ« --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">bitmap</span> <span class="hljs-attr">xmlns:android</span>=<span class="hljs-string">"http://schemas.android.com/apk/res/android"</span>
    <span class="hljs-attr">android:src</span>=<span class="hljs-string">"@drawable/large_image"</span>
    <span class="hljs-attr">android:mipMap</span>=<span class="hljs-string">"true"</span>/&gt;</span>
</code></pre>
<p><strong>çº¹ç†ç¼“å­˜</strong>:</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// å¤ç”¨Bitmap,é¿å…é¢‘ç¹åˆ›å»ºé”€æ¯</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">BitmapPool</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-type">val</span> <span class="hljs-variable">pool</span> <span class="hljs-operator">=</span> HashMap&lt;Int, Queue&lt;Bitmap&gt;&gt;()

    fun <span class="hljs-title function_">acquire</span><span class="hljs-params">(width: Int, height: Int)</span>: Bitmap {
        <span class="hljs-type">val</span> <span class="hljs-variable">key</span> <span class="hljs-operator">=</span> width * <span class="hljs-number">10000</span> + height
        <span class="hljs-keyword">return</span> pool[key]?.poll() ?: Bitmap.createBitmap(width, height, Config.ARGB_8888)
    }

    fun <span class="hljs-title function_">release</span><span class="hljs-params">(bitmap: Bitmap)</span> {
        <span class="hljs-type">val</span> <span class="hljs-variable">key</span> <span class="hljs-operator">=</span> bitmap.width * <span class="hljs-number">10000</span> + bitmap.height
        pool.getOrPut(key) { LinkedList() }.offer(bitmap)
    }
}
</code></pre>
<h4 data-id="heading-19">3. Shaderä¼˜åŒ–</h4>
<p><strong>é¿å…åŠ¨æ€åˆ†æ”¯</strong>:</p>
<p>âŒ <strong>Bad</strong>: ç‰‡æ®µç€è‰²å™¨ä¸­ä½¿ç”¨if</p>
<pre><code class="hljs language-glsl" lang="glsl">// fragment shader
void main() {
    if (u_useTexture) {
        gl_FragColor = texture2D(u_sampler, v_texCoord);
    } else {
        gl_FragColor = v_color;
    }
}
</code></pre>
<p>âœ… <strong>Good</strong>: ä½¿ç”¨Uniformæ§åˆ¶æ··åˆ</p>
<pre><code class="hljs language-glsl" lang="glsl">void main() {
    vec4 texColor = texture2D(u_sampler, v_texCoord);
    gl_FragColor = mix(v_color, texColor, u_textureFactor);
    // u_textureFactor: 0.0(çº¯è‰²) ~ 1.0(çº¯çº¹ç†)
}
</code></pre>
<p><strong>é¢„è®¡ç®—å¸¸é‡</strong>:</p>
<pre><code class="hljs language-glsl" lang="glsl">// âŒ Bad: æ¯ä¸ªç‰‡æ®µéƒ½è®¡ç®—
void main() {
    float normalizedX = v_position.x / 1920.0;
    // ...
}

// âœ… Good: åœ¨CPUç«¯é¢„è®¡ç®—,ä¼ å…¥Uniform
uniform float u_invScreenWidth;
void main() {
    float normalizedX = v_position.x * u_invScreenWidth;
    // ...
}
</code></pre>
<h3 data-id="heading-20">Vulkanæ¸²æŸ“å¼•æ“</h3>
<p>Vulkanæ˜¯æ–°ä¸€ä»£å›¾å½¢API,æ¯”OpenGL ESæ›´åº•å±‚ã€æ›´é«˜æ•ˆã€‚</p>
<p><strong>Vulkan vs OpenGL ES</strong>:</p>



































<table><thead><tr><th>ç‰¹æ€§</th><th>OpenGL ES</th><th>Vulkan</th></tr></thead><tbody><tr><td>CPUå¼€é”€</td><td>é«˜ (DriveréªŒè¯ã€çŠ¶æ€ç®¡ç†)</td><td>ä½ (æ˜¾å¼æ§åˆ¶)</td></tr><tr><td>å¤šçº¿ç¨‹</td><td>å•çº¿ç¨‹</td><td>åŸç”Ÿå¤šçº¿ç¨‹æ”¯æŒ</td></tr><tr><td>æ§åˆ¶ç²’åº¦</td><td>ç²—ç²’åº¦</td><td>ç»†ç²’åº¦(å†…å­˜ã€åŒæ­¥)</td></tr><tr><td>å­¦ä¹ æ›²çº¿</td><td>å¹³ç¼“</td><td>é™¡å³­</td></tr><tr><td>é€‚ç”¨åœºæ™¯</td><td>é€šç”¨åº”ç”¨</td><td>æ¸¸æˆã€3Då¯†é›†å‹</td></tr></tbody></table>
<p><strong>Vulkanä¼˜åŠ¿ç¤ºä¾‹</strong>:</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// OpenGL ES: ä¸²è¡Œæäº¤</span>
<span class="hljs-built_in">glDrawElements</span>(...); <span class="hljs-comment">// Wait for GPU</span>
<span class="hljs-built_in">glDrawElements</span>(...); <span class="hljs-comment">// Wait for GPU</span>

<span class="hljs-comment">// Vulkan: å¹¶è¡Œæ„å»ºCommandBuffer</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">thread1</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-built_in">vkBeginCommandBuffer</span>(cmdBuffer1, ...);
    <span class="hljs-built_in">vkCmdDrawIndexed</span>(cmdBuffer1, ...);
    <span class="hljs-built_in">vkEndCommandBuffer</span>(cmdBuffer1);
}

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">thread2</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-built_in">vkBeginCommandBuffer</span>(cmdBuffer2, ...);
    <span class="hljs-built_in">vkCmdDrawIndexed</span>(cmdBuffer2, ...);
    <span class="hljs-built_in">vkEndCommandBuffer</span>(cmdBuffer2);
}

<span class="hljs-comment">// æœ€åä¸€æ¬¡æ€§æäº¤</span>
<span class="hljs-built_in">vkQueueSubmit</span>(queue, <span class="hljs-number">2</span>, {cmdBuffer1, cmdBuffer2}, ...);
</code></pre>
<p><strong>Androidä¸­å¯ç”¨Vulkan</strong>:</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// æ£€æŸ¥è®¾å¤‡æ˜¯å¦æ”¯æŒVulkan</span>
<span class="hljs-keyword">val</span> pm = context.packageManager
<span class="hljs-keyword">val</span> hasVulkan = pm.hasSystemFeature(PackageManager.FEATURE_VULKAN_HARDWARE_LEVEL, <span class="hljs-number">1</span>)

<span class="hljs-keyword">if</span> (hasVulkan) {
    <span class="hljs-comment">// ä½¿ç”¨Vulkanæ¸²æŸ“</span>
    <span class="hljs-comment">// é€šå¸¸é€šè¿‡æ¸¸æˆå¼•æ“(Unity/Unreal)æˆ–NDKç›´æ¥è°ƒç”¨</span>
}
</code></pre>
<p><strong>AOSPæºç ä½ç½®</strong>:</p>
<ul>
<li>Vulkan Loader: <code>frameworks/native/vulkan/</code></li>
<li>Skia Vulkan Backend: <code>external/skia/src/gpu/vk/</code></li>
</ul>
<hr/>
<h2 data-id="heading-21">è¿‡åº¦ç»˜åˆ¶åˆ†æä¸ä¼˜åŒ–</h2>
<p>è¿‡åº¦ç»˜åˆ¶ (Overdraw) æ˜¯æŒ‡åŒä¸€åƒç´ è¢«ç»˜åˆ¶å¤šæ¬¡,æµªè´¹GPUå¡«å……å¸¦å®½ã€‚</p>
<h3 data-id="heading-22">ä»€ä¹ˆæ˜¯è¿‡åº¦ç»˜åˆ¶</h3>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">å±å¹•ä¸Šä¸€ä¸ªåƒç´ ç‚¹:</span>
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  èƒŒæ™¯ (Layer 0)  â”‚ â† ç¬¬1æ¬¡ç»˜åˆ¶
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”‚ çˆ¶å¸ƒå±€èƒŒæ™¯   â”‚ â† ç¬¬2æ¬¡ç»˜åˆ¶
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”‚ â”‚ ViewèƒŒæ™¯  â”‚ â† ç¬¬3æ¬¡ç»˜åˆ¶
â”‚  â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”‚ â”‚ â”‚ æ–‡å­—   â”‚ â† ç¬¬4æ¬¡ç»˜åˆ¶
â””â”€â”€â”´â”€â”´â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜

<span class="hljs-section">æœ€ç»ˆå¯è§: åªæœ‰æ–‡å­—</span>
<span class="hljs-section">æµªè´¹: å‰3æ¬¡ç»˜åˆ¶éƒ½è¢«è¦†ç›–</span>
</code></pre>
<p><strong>è¿‡åº¦ç»˜åˆ¶å±‚çº§</strong>:</p>









































<table><thead><tr><th>å±‚çº§</th><th>é¢œè‰²</th><th>è¯´æ˜</th><th>æ€§èƒ½å½±å“</th></tr></thead><tbody><tr><td>0x</td><td>æ— è‰²</td><td>ç»˜åˆ¶1æ¬¡</td><td>ç†æƒ³çŠ¶æ€</td></tr><tr><td>1x</td><td>è“è‰²</td><td>ç»˜åˆ¶2æ¬¡</td><td>å¯æ¥å—</td></tr><tr><td>2x</td><td>ç»¿è‰²</td><td>ç»˜åˆ¶3æ¬¡</td><td>éœ€ä¼˜åŒ–</td></tr><tr><td>3x</td><td>ç²‰è‰²</td><td>ç»˜åˆ¶4æ¬¡</td><td>ä¸¥é‡</td></tr><tr><td>4x+</td><td>çº¢è‰²</td><td>ç»˜åˆ¶5æ¬¡+</td><td>éå¸¸ä¸¥é‡</td></tr></tbody></table>
<h3 data-id="heading-23">è¿‡åº¦ç»˜åˆ¶åˆ†æå·¥å…·</h3>
<h4 data-id="heading-24">å¼€å‘è€…é€‰é¡¹</h4>
<p><strong>å¼€å¯è°ƒè¯•GPUè¿‡åº¦ç»˜åˆ¶</strong>:</p>
<pre><code class="hljs">è®¾ç½® â†’ å¼€å‘è€…é€‰é¡¹ â†’ è°ƒè¯•GPUè¿‡åº¦ç»˜åˆ¶ â†’ æ˜¾ç¤ºè¿‡åº¦ç»˜åˆ¶åŒºåŸŸ
</code></pre>
<p>è®¾å¤‡å±å¹•ä¼šæ˜¾ç¤ºå½©è‰²å åŠ ,é¢œè‰²è¶Šæ·±è¿‡åº¦ç»˜åˆ¶è¶Šä¸¥é‡ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ace93938a78449de84ecff4eb7e752c3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yas5aWHTGFi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768814740&amp;x-signature=AMApiSNmfMgd0Ht4vB8EroaxBZA%3D" alt="12-05-overdraw-debug-ui.png" loading="lazy"/></p>
<h4 data-id="heading-25">Systraceåˆ†æ</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æŠ“å–Systrace,å…³æ³¨GPUç›¸å…³çš„Slice</span>
python systrace.py -t 10 gfx view <span class="hljs-built_in">sched</span> freq -o trace.html

<span class="hljs-comment"># å…³é”®æŒ‡æ ‡:</span>
<span class="hljs-comment"># - GPU completion: GPUæ¸²æŸ“å®Œæˆæ—¶é—´</span>
<span class="hljs-comment"># - eglSwapBuffers: Bufferäº¤æ¢è€—æ—¶</span>
<span class="hljs-comment"># - RenderThread: æ¸²æŸ“çº¿ç¨‹å·¥ä½œæ—¶é—´</span>
</code></pre>
<p><strong>Systraceä¸­çš„è¿‡åº¦ç»˜åˆ¶ä¿¡å·</strong>:</p>
<pre><code class="hljs language-arduino" lang="arduino">Sliceåç§°: <span class="hljs-string">"DrawFrame"</span>
â”œâ”€â”€ <span class="hljs-string">"syncFrameState"</span> (<span class="hljs-number">2</span>ms) â† åŒæ­¥çŠ¶æ€
â”œâ”€â”€ <span class="hljs-string">"prepareTree"</span> (<span class="hljs-number">1</span>ms)    â† å‡†å¤‡DisplayList
â”œâ”€â”€ <span class="hljs-string">"draw"</span> (<span class="hljs-number">8</span>ms)           â† GPUç»˜åˆ¶ â† å¦‚æœè¿™é‡Œè¶…è¿‡<span class="hljs-number">5</span>ms,å¯èƒ½è¿‡åº¦ç»˜åˆ¶
â””â”€â”€ <span class="hljs-string">"eglSwapBuffers"</span> (<span class="hljs-number">1</span>ms) â† äº¤æ¢Buffer
</code></pre>
<h3 data-id="heading-26">ç³»ç»ŸåŒ–ä¼˜åŒ–æ–¹æ³•</h3>
<h4 data-id="heading-27">1. ç§»é™¤ä¸å¿…è¦çš„èƒŒæ™¯</h4>
<p>âŒ <strong>Bad</strong>: å±‚å±‚å åŠ èƒŒæ™¯</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- æ ¹å¸ƒå±€ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">LinearLayout</span>
    <span class="hljs-attr">android:background</span>=<span class="hljs-string">"@color/white"</span>&gt;</span> â† èƒŒæ™¯1

    <span class="hljs-comment">&lt;!-- å­å¸ƒå±€ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">FrameLayout</span>
        <span class="hljs-attr">android:background</span>=<span class="hljs-string">"@color/white"</span>&gt;</span> â† èƒŒæ™¯2 (é‡å¤!)

        <span class="hljs-tag">&lt;<span class="hljs-name">TextView</span>
            <span class="hljs-attr">android:background</span>=<span class="hljs-string">"@drawable/text_bg"</span>/&gt;</span> â† èƒŒæ™¯3
    <span class="hljs-tag">&lt;/<span class="hljs-name">FrameLayout</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">LinearLayout</span>&gt;</span>
</code></pre>
<p>âœ… <strong>Good</strong>: åªä¿ç•™æœ€ä¸Šå±‚èƒŒæ™¯</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">LinearLayout</span>&gt;</span> â† æ— èƒŒæ™¯
    <span class="hljs-tag">&lt;<span class="hljs-name">FrameLayout</span>&gt;</span> â† æ— èƒŒæ™¯
        <span class="hljs-tag">&lt;<span class="hljs-name">TextView</span>
            <span class="hljs-attr">android:background</span>=<span class="hljs-string">"@drawable/text_bg"</span>/&gt;</span> â† åªæœ‰è¿™é‡Œæœ‰èƒŒæ™¯
    <span class="hljs-tag">&lt;/<span class="hljs-name">FrameLayout</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">LinearLayout</span>&gt;</span>
</code></pre>
<p><strong>æ£€æµ‹æ–¹æ³•</strong>: ä½¿ç”¨Layout InspectoræŸ¥çœ‹æ¯ä¸ªViewçš„backgroundå±æ€§ã€‚</p>
<h4 data-id="heading-28">2. ä¼˜åŒ–å¸ƒå±€å±‚çº§</h4>
<p>âŒ <strong>Bad</strong>: æ·±å±‚åµŒå¥—</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">LinearLayout</span>&gt;</span> â† å±‚çº§1
  <span class="hljs-tag">&lt;<span class="hljs-name">RelativeLayout</span>&gt;</span> â† å±‚çº§2
    <span class="hljs-tag">&lt;<span class="hljs-name">FrameLayout</span>&gt;</span> â† å±‚çº§3
      <span class="hljs-tag">&lt;<span class="hljs-name">LinearLayout</span>&gt;</span> â† å±‚çº§4
        <span class="hljs-tag">&lt;<span class="hljs-name">TextView</span>/&gt;</span> â† å±‚çº§5
      <span class="hljs-tag">&lt;/<span class="hljs-name">LinearLayout</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">FrameLayout</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">RelativeLayout</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">LinearLayout</span>&gt;</span>
</code></pre>
<p>âœ… <strong>Good</strong>: ä½¿ç”¨ConstraintLayoutæ‰å¹³åŒ–</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ConstraintLayout</span>&gt;</span> â† å±‚çº§1
  <span class="hljs-tag">&lt;<span class="hljs-name">TextView</span>
      <span class="hljs-attr">app:layout_constraintTop_toTopOf</span>=<span class="hljs-string">"parent"</span>
      <span class="hljs-attr">app:layout_constraintStart_toStartOf</span>=<span class="hljs-string">"parent"</span>/&gt;</span> â† å±‚çº§2
<span class="hljs-tag">&lt;/<span class="hljs-name">ConstraintLayout</span>&gt;</span>
</code></pre>
<p><strong>å·¥å…·</strong>: Android Studio Layout Inspectorå¯ä»¥å¯è§†åŒ–å±‚çº§æ ‘ã€‚</p>
<h4 data-id="heading-29">3. clipRectä¼˜åŒ–</h4>
<p><strong>åŸç†</strong>: å‘Šè¯‰GPUåªç»˜åˆ¶å¯è§åŒºåŸŸã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">OptimizedView</span> : <span class="hljs-type">View</span> {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onDraw</span><span class="hljs-params">(canvas: <span class="hljs-type">Canvas</span>)</span></span> {
        <span class="hljs-comment">// è·å–å¯è§åŒºåŸŸ</span>
        <span class="hljs-keyword">val</span> clipBounds = canvas.clipBounds

        <span class="hljs-comment">// åªç»˜åˆ¶å¯è§éƒ¨åˆ†</span>
        <span class="hljs-keyword">for</span> (item <span class="hljs-keyword">in</span> items) {
            <span class="hljs-keyword">if</span> (item.bounds.intersect(clipBounds)) {
                canvas.drawBitmap(item.bitmap, item.x, item.y, paint)
            }
        }
    }
}
</code></pre>
<p><strong>è‡ªåŠ¨clipRect</strong>:</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// ViewGroupé»˜è®¤ä¼šclipChildren</span>
&lt;FrameLayout
    android:clipChildren=<span class="hljs-string">"true"</span>   â† è£å‰ªè¶…å‡ºå­View
    android:clipToPadding=<span class="hljs-string">"true"</span>&gt; â† è£å‰ªpaddingåŒºåŸŸ
</code></pre>
<h4 data-id="heading-30">4. è‡ªå®šä¹‰Viewä¼˜åŒ–</h4>
<p>âŒ <strong>Bad</strong>: æ¯æ¬¡onDrawéƒ½åˆ›å»ºå¯¹è±¡</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onDraw</span><span class="hljs-params">(canvas: <span class="hljs-type">Canvas</span>)</span></span> {
    <span class="hljs-keyword">val</span> paint = Paint() <span class="hljs-comment">// âŒ æ¯å¸§åˆ›å»º,GCå‹åŠ›</span>
    paint.color = Color.RED
    canvas.drawCircle(x, y, radius, paint)
}
</code></pre>
<p>âœ… <strong>Good</strong>: å¤ç”¨Paintå¯¹è±¡</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> paint = Paint().apply {
    color = Color.RED
    style = Paint.Style.FILL
    isAntiAlias = <span class="hljs-literal">true</span>
}

<span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onDraw</span><span class="hljs-params">(canvas: <span class="hljs-type">Canvas</span>)</span></span> {
    canvas.drawCircle(x, y, radius, paint) <span class="hljs-comment">// âœ… å¤ç”¨</span>
}
</code></pre>
<p><strong>onDrawä¼˜åŒ–æ¸…å•</strong>:</p>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> ä¸åˆ›å»ºå¯¹è±¡ (Paintã€Rectç­‰)</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> ä¸æ‰§è¡Œè€—æ—¶æ“ä½œ (æ–‡ä»¶IOã€ç½‘ç»œè¯·æ±‚)</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> ç¼“å­˜è®¡ç®—ç»“æœ (å¦‚ä¸‰è§’å‡½æ•°)</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> ä½¿ç”¨Canvas.save/restoreç®¡ç†çŠ¶æ€</li>
</ul>
<hr/>
<h2 data-id="heading-31">ç¡¬ä»¶åŠ é€Ÿè¯¦è§£</h2>
<p>ç¡¬ä»¶åŠ é€Ÿ (Hardware Acceleration) æ˜¯Android 3.0å¼•å…¥çš„ç‰¹æ€§,ä½¿ç”¨GPUåŠ é€Ÿ2Dæ¸²æŸ“ã€‚</p>
<h3 data-id="heading-32">ç¡¬ä»¶åŠ é€Ÿå±‚çº§</h3>
<p>Androidçš„ç¡¬ä»¶åŠ é€Ÿæœ‰<strong>4ä¸ªå±‚çº§</strong>:</p>



































<table><thead><tr><th>å±‚çº§</th><th>é…ç½®ä½ç½®</th><th>ä½œç”¨åŸŸ</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>Application</td><td>AndroidManifest.xml</td><td>æ•´ä¸ªåº”ç”¨</td><td>é»˜è®¤å¼€å¯</td></tr><tr><td>Activity</td><td>AndroidManifest.xml</td><td>å•ä¸ªActivity</td><td>å¯é€‰æ‹©æ€§å…³é—­</td></tr><tr><td>Window</td><td>Javaä»£ç </td><td>Windowçº§åˆ«</td><td>åŠ¨æ€æ§åˆ¶</td></tr><tr><td>View</td><td>Javaä»£ç </td><td>å•ä¸ªView</td><td>ç²¾ç»†æ§åˆ¶</td></tr></tbody></table>
<p><strong>é…ç½®ç¤ºä¾‹</strong>:</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- AndroidManifest.xml --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">application</span>
    <span class="hljs-attr">android:hardwareAccelerated</span>=<span class="hljs-string">"true"</span>&gt;</span> â† åº”ç”¨çº§åˆ«å¼€å¯

    <span class="hljs-tag">&lt;<span class="hljs-name">activity</span>
        <span class="hljs-attr">android:name</span>=<span class="hljs-string">".MainActivity"</span>
        <span class="hljs-attr">android:hardwareAccelerated</span>=<span class="hljs-string">"true"</span>/&gt;</span> â† Activityçº§åˆ«

    <span class="hljs-tag">&lt;<span class="hljs-name">activity</span>
        <span class="hljs-attr">android:name</span>=<span class="hljs-string">".LegacyActivity"</span>
        <span class="hljs-attr">android:hardwareAccelerated</span>=<span class="hljs-string">"false"</span>/&gt;</span> â† ç‰¹å®šActivityå…³é—­
<span class="hljs-tag">&lt;/<span class="hljs-name">application</span>&gt;</span>
</code></pre>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// Javaä»£ç ä¸­æ§åˆ¶</span>
<span class="hljs-comment">// Windowçº§åˆ«</span>
window.setFlags(
    WindowManager.LayoutParams.FLAG_HARDWARE_ACCELERATED,
    WindowManager.LayoutParams.FLAG_HARDWARE_ACCELERATED
)

<span class="hljs-comment">// Viewçº§åˆ«</span>
myView.setLayerType(View.LAYER_TYPE_HARDWARE, <span class="hljs-literal">null</span>) <span class="hljs-comment">// å¼€å¯</span>
myView.setLayerType(View.LAYER_TYPE_SOFTWARE, <span class="hljs-literal">null</span>) <span class="hljs-comment">// å…³é—­,ä½¿ç”¨CPUæ¸²æŸ“</span>
myView.setLayerType(View.LAYER_TYPE_NONE, <span class="hljs-literal">null</span>)     <span class="hljs-comment">// é»˜è®¤(ç»§æ‰¿çˆ¶çº§)</span>
</code></pre>
<h3 data-id="heading-33">DisplayListæœºåˆ¶</h3>
<p>ç¡¬ä»¶åŠ é€Ÿçš„æ ¸å¿ƒæ˜¯<strong>DisplayList</strong> (æ˜¾ç¤ºåˆ—è¡¨)ã€‚</p>
<p><strong>å·¥ä½œåŸç†</strong>:</p>
<pre><code class="hljs language-css" lang="css">è½¯ä»¶æ¸²æŸ“:                    ç¡¬ä»¶åŠ é€Ÿæ¸²æŸ“:
  <span class="hljs-built_in">onDraw</span>()                    <span class="hljs-built_in">onDraw</span>()
     â†“                           â†“
ç›´æ¥ç»˜åˆ¶åˆ°Canvas           ç”ŸæˆDisplayList (GPUæŒ‡ä»¤åºåˆ—)
     â†“                           â†“
  åƒç´ è¾“å‡º                   GPUæ‰§è¡ŒDisplayList
                                â†“
                             åƒç´ è¾“å‡º

ä¼˜åŠ¿: DisplayListå¯ä»¥å¤ç”¨,é¿å…é‡å¤æ‰§è¡ŒonDraw
</code></pre>
<p><strong>DisplayListç¼“å­˜</strong>:</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">CachedView</span> : <span class="hljs-type">View</span> {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onDraw</span><span class="hljs-params">(canvas: <span class="hljs-type">Canvas</span>)</span></span> {
        <span class="hljs-comment">// ç¬¬ä¸€æ¬¡è°ƒç”¨: ç”ŸæˆDisplayListå¹¶ç¼“å­˜</span>
        <span class="hljs-comment">// åç»­è°ƒç”¨: ç›´æ¥é‡æ”¾DisplayList,ä¸æ‰§è¡ŒonDraw</span>
        canvas.drawCircle(x, y, radius, paint)
    }

    <span class="hljs-comment">// å†…å®¹æ”¹å˜æ—¶,éœ€è¦invalidate()è§¦å‘é‡å»ºDisplayList</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">updatePosition</span><span class="hljs-params">(newX: <span class="hljs-type">Float</span>, newY: <span class="hljs-type">Float</span>)</span></span> {
        x = newX
        y = newY
        invalidate() <span class="hljs-comment">// è§¦å‘é‡å»ºDisplayList</span>
    }
}
</code></pre>
<p><strong>æŸ¥çœ‹DisplayList</strong>:</p>
<pre><code class="hljs language-bash" lang="bash">adb shell setprop debug.hwui.capture_frame_as_bitmap <span class="hljs-literal">true</span>
<span class="hljs-comment"># å¯ç”¨å,DisplayListä¼šè¢«dumpåˆ°/data/data/&lt;package&gt;/cache/</span>
</code></pre>
<p><strong>AOSPæºç ä½ç½®</strong>:</p>
<ul>
<li>DisplayListå®ç°: <code>frameworks/base/libs/hwui/DisplayList.cpp</code></li>
<li>RenderNode: <code>frameworks/base/libs/hwui/RenderNode.cpp</code></li>
</ul>
<h3 data-id="heading-34">ç¡¬ä»¶å›¾å±‚ (Hardware Layer)</h3>
<p>ç¡¬ä»¶å›¾å±‚æ˜¯å°†Viewæ¸²æŸ“åˆ°ç¦»å±çº¹ç† (Offscreen Texture),é€‚åˆ<strong>é™æ€å†…å®¹</strong>æˆ–<strong>å¤æ‚åŠ¨ç”»</strong>ã€‚</p>
<h4 data-id="heading-35">ä½¿ç”¨åœºæ™¯</h4>
<p><strong>1. å¤æ‚View + ç®€å•åŠ¨ç”»</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// åœºæ™¯: å¤æ‚çš„è‡ªå®šä¹‰Viewéœ€è¦æ‰§è¡Œå¹³ç§»/ç¼©æ”¾/æ—‹è½¬åŠ¨ç”»</span>
complexView.setLayerType(View.LAYER_TYPE_HARDWARE, <span class="hljs-literal">null</span>)

<span class="hljs-comment">// æ‰§è¡ŒåŠ¨ç”»</span>
complexView.animate()
    .translationX(<span class="hljs-number">100f</span>)
    .alpha(<span class="hljs-number">0.5f</span>)
    .setDuration(<span class="hljs-number">300</span>)
    .withEndAction {
        <span class="hljs-comment">// åŠ¨ç”»ç»“æŸåé‡Šæ”¾ç¡¬ä»¶å›¾å±‚</span>
        complexView.setLayerType(View.LAYER_TYPE_NONE, <span class="hljs-literal">null</span>)
    }
</code></pre>
<p><strong>åŸç†</strong>: Viewè¢«æ¸²æŸ“åˆ°çº¹ç†å,åŠ¨ç”»åªéœ€è¦æ“ä½œçº¹ç†çš„å˜æ¢çŸ©é˜µ,ä¸éœ€è¦é‡ç»˜å†…å®¹ã€‚</p>
<p><strong>2. æ¨¡ç³Šæ•ˆæœ</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">val</span> blurPaint = Paint().apply {
    maskFilter = BlurMaskFilter(<span class="hljs-number">10f</span>, BlurMaskFilter.Blur.NORMAL)
}

<span class="hljs-comment">// ä½¿ç”¨ç¡¬ä»¶å›¾å±‚åº”ç”¨æ¨¡ç³Š</span>
blurView.setLayerType(View.LAYER_TYPE_HARDWARE, blurPaint)
</code></pre>
<h4 data-id="heading-36">å†…å­˜å¼€é”€</h4>
<p>ç¡¬ä»¶å›¾å±‚ä¼šå ç”¨é¢å¤–çš„GPUå†…å­˜:</p>
<pre><code class="hljs language-ini" lang="ini">å†…å­˜å ç”¨ = å®½åº¦ Ã— é«˜åº¦ Ã— 4å­—èŠ‚ (ARGB_8888)

ç¤ºä¾‹:
1920Ã—1080çš„å…¨å±<span class="hljs-attr">View</span>
= 1920 Ã— 1080 Ã— <span class="hljs-attr">4</span>
= 8.29 MB

å¦‚æœæœ‰10ä¸ªç¡¬ä»¶å›¾å±‚ = 82.9 MB GPUå†…å­˜!
</code></pre>
<p><strong>æœ€ä½³å®è·µ</strong>:</p>
<ul>
<li>ä»…åœ¨åŠ¨ç”»æœŸé—´å¯ç”¨ç¡¬ä»¶å›¾å±‚</li>
<li>åŠ¨ç”»ç»“æŸåç«‹å³é‡Šæ”¾ (<code>setLayerType(NONE)</code>)</li>
<li>é¿å…å¯¹å¤§å°ºå¯¸Viewä½¿ç”¨ç¡¬ä»¶å›¾å±‚</li>
</ul>
<h3 data-id="heading-37">ä½•æ—¶å…³é—­ç¡¬ä»¶åŠ é€Ÿ</h3>
<p>æŸäº›æ“ä½œåœ¨ç¡¬ä»¶åŠ é€Ÿä¸‹<strong>ä¸æ”¯æŒ</strong>æˆ–<strong>æ€§èƒ½å·®</strong>:</p>
<p><strong>ä¸æ”¯æŒçš„æ“ä½œ</strong>:</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// ä»¥ä¸‹Canvasæ–¹æ³•åœ¨ç¡¬ä»¶åŠ é€Ÿä¸‹ä¸å¯ç”¨:</span>
canvas.drawPicture()           <span class="hljs-comment">// ä¸æ”¯æŒ</span>
canvas.drawPosText()           <span class="hljs-comment">// ä¸æ”¯æŒ</span>
canvas.drawTextOnPath()        <span class="hljs-comment">// æ”¯æŒ,ä½†æ…¢</span>
canvas.drawVertices()          <span class="hljs-comment">// ä¸æ”¯æŒ</span>

<span class="hljs-comment">// è§£å†³æ–¹æ¡ˆ: å…³é—­å•ä¸ªViewçš„ç¡¬ä»¶åŠ é€Ÿ</span>
myView.setLayerType(View.LAYER_TYPE_SOFTWARE, <span class="hljs-literal">null</span>)
</code></pre>
<p><strong>æ€§èƒ½å·®çš„åœºæ™¯</strong>:</p>
<ol>
<li><strong>é¢‘ç¹invalidateçš„View</strong>: ç¡¬ä»¶åŠ é€Ÿéœ€è¦é‡å»ºDisplayList,åè€Œæ¯”è½¯ä»¶æ¸²æŸ“æ…¢</li>
<li><strong>å¤§é‡å°å›¾å½¢ç»˜åˆ¶</strong>: DrawCallå¼€é”€å¤§</li>
<li><strong>Canvas.saveLayer</strong>: éœ€è¦ç¦»å±æ¸²æŸ“,å¼€é”€å¤§</li>
</ol>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// é¢‘ç¹æ›´æ–°çš„View,ä½¿ç”¨è½¯ä»¶æ¸²æŸ“å¯èƒ½æ›´å¿«</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">HighFrequencyUpdateView</span> : <span class="hljs-type">View</span> {
    <span class="hljs-keyword">init</span> {
        setLayerType(LAYER_TYPE_SOFTWARE, <span class="hljs-literal">null</span>)
    }

    <span class="hljs-comment">// æ¯ç§’æ›´æ–°60æ¬¡</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">startUpdate</span><span class="hljs-params">()</span></span> {
        handler.postDelayed(<span class="hljs-keyword">object</span> : Runnable {
            <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">run</span><span class="hljs-params">()</span></span> {
                invalidate() <span class="hljs-comment">// è§¦å‘é‡ç»˜</span>
                handler.postDelayed(<span class="hljs-keyword">this</span>, <span class="hljs-number">16</span>)
            }
        }, <span class="hljs-number">16</span>)
    }
}
</code></pre>
<hr/>
<h2 data-id="heading-38">æ¸²æŸ“æ€§èƒ½åˆ†æå·¥å…·</h2>
<p>å·¥å…·æ˜¯ä¼˜åŒ–çš„çœ¼ç›,æ²¡æœ‰åº¦é‡å°±æ²¡æœ‰ä¼˜åŒ–ã€‚</p>
<h3 data-id="heading-39">Profile GPU Rendering</h3>
<p><strong>å¼€å¯æ–¹æ³•</strong>:</p>
<pre><code class="hljs">è®¾ç½® â†’ å¼€å‘è€…é€‰é¡¹ â†’ Profile GPU Rendering â†’ åœ¨å±å¹•ä¸Šæ˜¾ç¤ºä¸ºæ¡å½¢å›¾
</code></pre>
<p><strong>å›¾è¡¨è§£è¯»</strong>:</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/063c7756b43c4f0d9825f46798bf3990~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yas5aWHTGFi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768814740&amp;x-signature=P0rGXbUrtxGWn%2BH2lyZqznQie9I%3D" alt="12-06-profile-gpu-rendering.png" loading="lazy"/></p>
<p><strong>å„é˜¶æ®µå«ä¹‰</strong>:</p>









































<table><thead><tr><th>é¢œè‰²</th><th>é˜¶æ®µ</th><th>è¯´æ˜</th><th>ä¼˜åŒ–æ–¹å‘</th></tr></thead><tbody><tr><td>ç»¿è‰²æ¨ªçº¿</td><td>16msåŸºå‡†</td><td>è¶…è¿‡æ­¤çº¿ä¼šæ‰å¸§</td><td>-</td></tr><tr><td>è“è‰²</td><td>Draw</td><td>measure/layout/draw</td><td>ç®€åŒ–å¸ƒå±€å±‚çº§</td></tr><tr><td>çº¢è‰²</td><td>Execute</td><td>RenderThreadæ‰§è¡Œ</td><td>å‡å°‘Draw Calls</td></tr><tr><td>æ©™è‰²</td><td>Process</td><td>GPUå¤„ç†</td><td>ä¼˜åŒ–Shaderã€çº¹ç†</td></tr><tr><td>é»„è‰²</td><td>Swap</td><td>eglSwapBuffers</td><td>å‡å°‘è¿‡åº¦ç»˜åˆ¶</td></tr></tbody></table>
<p><strong>ç¤ºä¾‹åˆ†æ</strong>:</p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">åœºæ™¯1: è“è‰²æŸ±å­å¾ˆé«˜ (Drawé˜¶æ®µæ…¢)</span>
<span class="hljs-section">åŸå› : å¸ƒå±€å±‚çº§æ·±ã€measure/layoutè€—æ—¶</span>
<span class="hljs-section">ä¼˜åŒ–: ä½¿ç”¨ConstraintLayoutã€å‡å°‘åµŒå¥—</span>

<span class="hljs-section">åœºæ™¯2: æ©™è‰²æŸ±å­å¾ˆé«˜ (GPUå¤„ç†æ…¢)</span>
<span class="hljs-section">åŸå› : è¿‡åº¦ç»˜åˆ¶ã€å¤æ‚Shader</span>
<span class="hljs-section">ä¼˜åŒ–: ç§»é™¤ä¸å¿…è¦èƒŒæ™¯ã€ç®€åŒ–ç‰¹æ•ˆ</span>

<span class="hljs-section">åœºæ™¯3: é»„è‰²æŸ±å­å¾ˆé«˜ (Swapæ…¢)</span>
<span class="hljs-section">åŸå› : BufferQueueé˜»å¡ã€å¡«å……ç‡è¿‡é«˜</span>
<span class="hljs-section">ä¼˜åŒ–: å‡å°‘è¿‡åº¦ç»˜åˆ¶ã€é™ä½åˆ†è¾¨ç‡</span>
</code></pre>
<h3 data-id="heading-40">GPU Profiler (Android Studio)</h3>
<p><strong>ä½¿ç”¨æ­¥éª¤</strong>:</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-bullet">1.</span> Android Studio â†’ View â†’ Tool Windows â†’ Profiler
<span class="hljs-bullet">2.</span> ç‚¹å‡» "+" æŒ‰é’®,é€‰æ‹©åº”ç”¨è¿›ç¨‹
<span class="hljs-bullet">3.</span> ç‚¹å‡» "GPU" è¡Œå±•å¼€
<span class="hljs-bullet">4.</span> è¿›è¡Œæ“ä½œ,è§‚å¯ŸGPUæ´»åŠ¨
</code></pre>
<p><strong>å¯åˆ†æçš„æŒ‡æ ‡</strong>:</p>
<pre><code class="hljs language-diff" lang="diff"><span class="hljs-deletion">- Draw Calls: ç»˜åˆ¶è°ƒç”¨æ¬¡æ•°</span>
<span class="hljs-deletion">- Primitives: æ¸²æŸ“çš„ä¸‰è§’å½¢æ•°é‡</span>
<span class="hljs-deletion">- Texture Memory: çº¹ç†å†…å­˜å ç”¨</span>
<span class="hljs-deletion">- Frame Time: æ¯å¸§æ¸²æŸ“æ—¶é—´</span>
</code></pre>
<p><strong>è¯†åˆ«é—®é¢˜</strong>:</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// ç¤ºä¾‹: å‘ç°æŸä¸ªåœºæ™¯DrawCallè¿‡é«˜</span>
<span class="hljs-comment">// Before: 1000+ Draw Calls</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">drawManyItems</span><span class="hljs-params">(canvas: <span class="hljs-type">Canvas</span>)</span></span> {
    items.forEach { item -&gt;
        canvas.drawBitmap(item.bitmap, item.x, item.y, paint)
    }
}

<span class="hljs-comment">// After: åˆå¹¶ä¸º1ä¸ªDraw Call</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">drawManyItemsOptimized</span><span class="hljs-params">(canvas: <span class="hljs-type">Canvas</span>)</span></span> {
    <span class="hljs-comment">// å°†æ‰€æœ‰itemåˆå¹¶åˆ°ä¸€ä¸ªå¤§çº¹ç†</span>
    <span class="hljs-keyword">val</span> mergedBitmap = mergeBitmaps(items)
    canvas.drawBitmap(mergedBitmap, <span class="hljs-number">0f</span>, <span class="hljs-number">0f</span>, paint)
}
</code></pre>
<h3 data-id="heading-41">Systraceæ¸²æŸ“åˆ†æ</h3>
<p><strong>æŠ“å–æ¸²æŸ“Trace</strong>:</p>
<pre><code class="hljs language-bash" lang="bash">python systrace.py -t 10 -o render.html \
    gfx view <span class="hljs-built_in">sched</span> freq idle load workq

<span class="hljs-comment"># å…³é”®Tag:</span>
<span class="hljs-comment"># - gfx: SurfaceFlingerã€HWC</span>
<span class="hljs-comment"># - view: Viewç»˜åˆ¶</span>
<span class="hljs-comment"># - sched: CPUè°ƒåº¦</span>
</code></pre>
<p><strong>åˆ†æé‡ç‚¹Slice</strong>:</p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">çº¿ç¨‹: RenderThread</span>
â”œâ”€â”€ syncFrameState (2ms)      â† åŒæ­¥UI ThreadçŠ¶æ€
â”œâ”€â”€ prepareTree (1ms)          â† å‡†å¤‡æ¸²æŸ“æ ‘
â”œâ”€â”€ draw (5ms)                 â† æ‰§è¡Œç»˜åˆ¶
â”‚   â”œâ”€â”€ drawDisplayList (3ms) â† é‡æ”¾DisplayList
â”‚   â””â”€â”€ flush (2ms)            â† æäº¤GPUæŒ‡ä»¤
â””â”€â”€ eglSwapBuffers (1ms)       â† äº¤æ¢Buffer

<span class="hljs-section">çº¿ç¨‹: SurfaceFlinger</span>
â”œâ”€â”€ onMessageInvalidate (1ms)  â† æ”¶é›†Layeræ›´æ–°
â””â”€â”€ onMessageRefresh (3ms)     â† åˆæˆ
    â”œâ”€â”€ updateTexImage (1ms)   â† æ›´æ–°çº¹ç†
    â”œâ”€â”€ doComposition (1ms)    â† æ‰§è¡Œåˆæˆ
    â””â”€â”€ postComposition (1ms)  â† æäº¤Display
</code></pre>
<p><strong>æ‰å¸§å®šä½</strong>:</p>
<pre><code class="hljs language-arduino" lang="arduino">å¦‚æœRenderThreadçš„<span class="hljs-string">"draw"</span>é˜¶æ®µè¶…è¿‡<span class="hljs-number">10</span>ms:
â†’ æ£€æŸ¥è¿‡åº¦ç»˜åˆ¶ã€Draw Callsæ•°é‡

å¦‚æœSurfaceFlingerçš„<span class="hljs-string">"doComposition"</span>è¶…è¿‡<span class="hljs-number">5</span>ms:
â†’ æ£€æŸ¥Layeræ•°é‡ã€åˆæˆç­–ç•¥

å¦‚æœGPU Completionå»¶è¿Ÿå¤§:
â†’ æ£€æŸ¥GPUè´Ÿè½½ã€Shaderå¤æ‚åº¦
</code></pre>
<h3 data-id="heading-42">è‡ªå®šä¹‰æ¸²æŸ“ç›‘æ§</h3>
<p><strong>å®ç°FrameMetricsç›‘å¬å™¨</strong>:</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">RenderMonitor</span>(<span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> activity: Activity) {

    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">start</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">if</span> (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.N) {
            <span class="hljs-keyword">val</span> listener = Window.OnFrameMetricsAvailableListener { _, metrics, _ -&gt;
                analyzeFrame(metrics)
            }

            activity.window.addOnFrameMetricsAvailableListener(
                listener,
                Handler(Looper.getMainLooper())
            )
        }
    }

    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">analyzeFrame</span><span class="hljs-params">(metrics: <span class="hljs-type">FrameMetrics</span>)</span></span> {
        <span class="hljs-comment">// å„é˜¶æ®µè€—æ—¶ (çº³ç§’)</span>
        <span class="hljs-keyword">val</span> inputTime = metrics.getMetric(FrameMetrics.INPUT_HANDLING_DURATION)
        <span class="hljs-keyword">val</span> animationTime = metrics.getMetric(FrameMetrics.ANIMATION_DURATION)
        <span class="hljs-keyword">val</span> layoutTime = metrics.getMetric(FrameMetrics.LAYOUT_MEASURE_DURATION)
        <span class="hljs-keyword">val</span> drawTime = metrics.getMetric(FrameMetrics.DRAW_DURATION)
        <span class="hljs-keyword">val</span> syncTime = metrics.getMetric(FrameMetrics.SYNC_DURATION)
        <span class="hljs-keyword">val</span> commandTime = metrics.getMetric(FrameMetrics.COMMAND_ISSUE_DURATION)
        <span class="hljs-keyword">val</span> swapTime = metrics.getMetric(FrameMetrics.SWAP_BUFFERS_DURATION)
        <span class="hljs-keyword">val</span> totalTime = metrics.getMetric(FrameMetrics.TOTAL_DURATION)

        <span class="hljs-comment">// è½¬æ¢ä¸ºæ¯«ç§’</span>
        <span class="hljs-keyword">val</span> totalMs = totalTime / <span class="hljs-number">1_000_000.0</span>

        <span class="hljs-keyword">if</span> (totalMs &gt; <span class="hljs-number">16.67</span>) {
            Log.w(<span class="hljs-string">"RenderMonitor"</span>, <span class="hljs-string">"Dropped frame! Total: <span class="hljs-subst">${totalMs}</span>ms"</span>)
            Log.w(<span class="hljs-string">"RenderMonitor"</span>, <span class="hljs-string">"  Layout: <span class="hljs-subst">${layoutTime/<span class="hljs-number">1</span>_000_000<span class="hljs-number">.0</span>}</span>ms"</span>)
            Log.w(<span class="hljs-string">"RenderMonitor"</span>, <span class="hljs-string">"  Draw: <span class="hljs-subst">${drawTime/<span class="hljs-number">1</span>_000_000<span class="hljs-number">.0</span>}</span>ms"</span>)
            Log.w(<span class="hljs-string">"RenderMonitor"</span>, <span class="hljs-string">"  Command: <span class="hljs-subst">${commandTime/<span class="hljs-number">1</span>_000_000<span class="hljs-number">.0</span>}</span>ms"</span>)
            Log.w(<span class="hljs-string">"RenderMonitor"</span>, <span class="hljs-string">"  Swap: <span class="hljs-subst">${swapTime/<span class="hljs-number">1</span>_000_000<span class="hljs-number">.0</span>}</span>ms"</span>)

            <span class="hljs-comment">// ä¸ŠæŠ¥åˆ°ç›‘æ§å¹³å°</span>
            reportToMonitoring(metrics)
        }
    }

    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">reportToMonitoring</span><span class="hljs-params">(metrics: <span class="hljs-type">FrameMetrics</span>)</span></span> {
        <span class="hljs-comment">// ä¸ŠæŠ¥åˆ°Bugly/Firebaseç­‰å¹³å°</span>
    }
}
</code></pre>
<p><strong>ä½¿ç”¨</strong>:</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MainActivity</span> : <span class="hljs-type">AppCompatActivity</span>() {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> renderMonitor = RenderMonitor(<span class="hljs-keyword">this</span>)

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreate</span><span class="hljs-params">(savedInstanceState: <span class="hljs-type">Bundle</span>?)</span></span> {
        <span class="hljs-keyword">super</span>.onCreate(savedInstanceState)
        renderMonitor.start()
    }
}
</code></pre>
<hr/>
<h2 data-id="heading-43">å®æˆ˜æ¡ˆä¾‹:å¤æ‚åˆ—è¡¨æ»‘åŠ¨ä¼˜åŒ–</h2>
<p>è®©æˆ‘ç”¨ä¸€ä¸ªçœŸå®æ¡ˆä¾‹æ¼”ç¤ºæ¸²æŸ“ä¼˜åŒ–çš„å®Œæ•´æµç¨‹ã€‚</p>
<h3 data-id="heading-44">é—®é¢˜æè¿°</h3>
<p><strong>åœºæ™¯</strong>: è½¦è½½åº”ç”¨ä¸­çš„éŸ³ä¹åˆ—è¡¨,æ¯ä¸ªItemåŒ…å«:</p>
<ul>
<li>ä¸“è¾‘å°é¢å›¾ (300x300px)</li>
<li>æ­Œæ›²åã€æ­Œæ‰‹åã€æ—¶é•¿</li>
<li>æ’­æ”¾æŒ‰é’®ã€æ”¶è—æŒ‰é’®</li>
<li>æ¸å˜èƒŒæ™¯</li>
</ul>
<p><strong>ç°è±¡</strong>:</p>
<ul>
<li>å¿«é€Ÿæ»‘åŠ¨æ—¶æ‰å¸§,FPSåªæœ‰35å·¦å³</li>
<li>Profile GPU Renderingæ˜¾ç¤ºæ©™è‰²æŸ±å­å¾ˆé«˜ (GPUå¤„ç†æ…¢)</li>
<li>è°ƒè¯•GPUè¿‡åº¦ç»˜åˆ¶æ˜¾ç¤ºå¤§é‡çº¢è‰²åŒºåŸŸ (4x+)</li>
</ul>
<h3 data-id="heading-45">ä¼˜åŒ–å‰åˆ†æ</h3>
<p><strong>ä½¿ç”¨å·¥å…·</strong>:</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1. Profile GPU Rendering: æ©™è‰²(Process)å’Œé»„è‰²(Swap)å¾ˆé«˜</span>
<span class="hljs-comment"># 2. è°ƒè¯•GPUè¿‡åº¦ç»˜åˆ¶: æ•´ä¸ªåˆ—è¡¨éƒ½æ˜¯çº¢è‰²</span>
<span class="hljs-comment"># 3. Systraceåˆ†æ:</span>
python systrace.py -t 10 -o music_list.html gfx view <span class="hljs-built_in">sched</span>

<span class="hljs-comment"># å‘ç°:</span>
<span class="hljs-comment"># - RenderThreadçš„drawé˜¶æ®µè€—æ—¶12ms</span>
<span class="hljs-comment"># - å¤§é‡"drawBitmap"è°ƒç”¨</span>
<span class="hljs-comment"># - SurfaceFlingeråˆæˆè€—æ—¶5ms</span>
</code></pre>
<p><strong>è¿‡åº¦ç»˜åˆ¶åˆ†æ</strong>:</p>
<pre><code class="hljs language-markdown" lang="markdown">æ¯ä¸ªItemçš„ç»˜åˆ¶å±‚çº§:
<span class="hljs-bullet">1.</span> RecyclerViewèƒŒæ™¯ (ç™½è‰²)
<span class="hljs-bullet">2.</span> ItemViewèƒŒæ™¯ (æ¸å˜)
<span class="hljs-bullet">3.</span> ImageViewèƒŒæ™¯ (å ä½å›¾)
<span class="hljs-bullet">4.</span> ä¸“è¾‘å°é¢Bitmap
<span class="hljs-bullet">5.</span> TextViewèƒŒæ™¯ (åŠé€æ˜é»‘è‰²)
<span class="hljs-bullet">6.</span> æ–‡å­—

æ€»è®¡: 6å±‚! (4xè¿‡åº¦ç»˜åˆ¶)
</code></pre>
<h3 data-id="heading-46">ä¼˜åŒ–æªæ–½</h3>
<h4 data-id="heading-47">1. ç§»é™¤ä¸å¿…è¦èƒŒæ™¯</h4>
<p>âŒ <strong>Before</strong>:</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">RecyclerView</span>
    <span class="hljs-attr">android:background</span>=<span class="hljs-string">"@color/white"</span>&gt;</span> â† å±‚çº§1

    <span class="hljs-tag">&lt;<span class="hljs-name">FrameLayout</span> (<span class="hljs-attr">ItemView</span>)
        <span class="hljs-attr">android:background</span>=<span class="hljs-string">"@drawable/gradient_bg"</span>&gt;</span> â† å±‚çº§2

        <span class="hljs-tag">&lt;<span class="hljs-name">ImageView</span>
            <span class="hljs-attr">android:src</span>=<span class="hljs-string">"@drawable/placeholder"</span>          â† <span class="hljs-attr">å±‚çº§3</span>
            <span class="hljs-attr">android:background</span>=<span class="hljs-string">"@drawable/image_border"</span>/&gt;</span> â† å±‚çº§4

        <span class="hljs-tag">&lt;<span class="hljs-name">TextView</span>
            <span class="hljs-attr">android:background</span>=<span class="hljs-string">"#80000000"</span>/&gt;</span> â† å±‚çº§5 (åŠé€æ˜)
    <span class="hljs-tag">&lt;/<span class="hljs-name">FrameLayout</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">RecyclerView</span>&gt;</span>
</code></pre>
<p>âœ… <strong>After</strong>:</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">RecyclerView</span>&gt;</span> â† æ— èƒŒæ™¯ (Activityè®¾ç½®windowèƒŒæ™¯)

    <span class="hljs-tag">&lt;<span class="hljs-name">FrameLayout</span> (<span class="hljs-attr">ItemView</span>)
        <span class="hljs-attr">android:background</span>=<span class="hljs-string">"@drawable/gradient_bg"</span>&gt;</span> â† å±‚çº§1

        <span class="hljs-tag">&lt;<span class="hljs-name">ImageView</span>
            <span class="hljs-attr">android:src</span>=<span class="hljs-string">"@drawable/placeholder"</span>/&gt;</span> â† å±‚çº§2 (ç§»é™¤border)

        <span class="hljs-tag">&lt;<span class="hljs-name">TextView</span>
            <span class="hljs-attr">android:textColor</span>=<span class="hljs-string">"@color/white"</span>/&gt;</span> â† ç§»é™¤åŠé€æ˜èƒŒæ™¯
    <span class="hljs-tag">&lt;/<span class="hljs-name">FrameLayout</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">RecyclerView</span>&gt;</span>
</code></pre>
<p><strong>æ•ˆæœ</strong>: è¿‡åº¦ç»˜åˆ¶ä»4xé™ä½åˆ°1xã€‚</p>
<h4 data-id="heading-48">2. å›¾ç‰‡ä¼˜åŒ–</h4>
<p>âŒ <strong>Before</strong>: 300x300çš„ARGB_8888å›¾ç‰‡</p>
<pre><code class="hljs language-kotlin" lang="kotlin">Glide.with(context)
    .load(song.coverUrl)
    .into(imageView)
<span class="hljs-comment">// å†…å­˜å ç”¨: 300Ã—300Ã—4 = 360KB/å¼ </span>
</code></pre>
<p>âœ… <strong>After</strong>: å‹ç¼© + ç¼“å­˜</p>
<pre><code class="hljs language-kotlin" lang="kotlin">Glide.with(context)
    .load(song.coverUrl)
    .<span class="hljs-keyword">override</span>(<span class="hljs-number">150</span>, <span class="hljs-number">150</span>) <span class="hljs-comment">// â† ç¼©å°åˆ°å®é™…æ˜¾ç¤ºå°ºå¯¸</span>
    .format(DecodeFormat.PREFER_RGB_565) <span class="hljs-comment">// â† ä½¿ç”¨RGB_565 (2å­—èŠ‚)</span>
    .diskCacheStrategy(DiskCacheStrategy.ALL)
    .into(imageView)
<span class="hljs-comment">// å†…å­˜å ç”¨: 150Ã—150Ã—2 = 45KB/å¼  (å‡å°‘88%!)</span>
</code></pre>
<h4 data-id="heading-49">3. ViewHolderä¼˜åŒ–</h4>
<p>âŒ <strong>Before</strong>: æ¯æ¬¡bindéƒ½è®¾ç½®æ‰€æœ‰å±æ€§</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onBindViewHolder</span><span class="hljs-params">(holder: <span class="hljs-type">ViewHolder</span>, position: <span class="hljs-type">Int</span>)</span></span> {
    <span class="hljs-keyword">val</span> song = songs[position]

    <span class="hljs-comment">// å³ä½¿æ²¡å˜åŒ–ä¹Ÿé‡æ–°è®¾ç½®</span>
    holder.coverImage.load(song.coverUrl)
    holder.titleText.text = song.title
    holder.artistText.text = song.artist
    holder.durationText.text = song.duration

    <span class="hljs-comment">// é‡æ–°è®¾ç½®èƒŒæ™¯ (è§¦å‘é‡ç»˜!)</span>
    holder.itemView.setBackgroundResource(R.drawable.gradient_bg)
}
</code></pre>
<p>âœ… <strong>After</strong>: å·®é‡æ›´æ–°</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onBindViewHolder</span><span class="hljs-params">(holder: <span class="hljs-type">ViewHolder</span>, position: <span class="hljs-type">Int</span>)</span></span> {
    <span class="hljs-keyword">val</span> song = songs[position]

    <span class="hljs-comment">// åªåœ¨å†…å®¹å˜åŒ–æ—¶æ›´æ–°</span>
    <span class="hljs-keyword">if</span> (holder.currentSongId != song.id) {
        holder.coverImage.load(song.coverUrl)
        holder.titleText.text = song.title
        holder.artistText.text = song.artist
        holder.durationText.text = song.duration
        holder.currentSongId = song.id
    }

    <span class="hljs-comment">// èƒŒæ™¯åªè®¾ç½®ä¸€æ¬¡ (åœ¨onCreateViewHolderä¸­)</span>
}

<span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreateViewHolder</span><span class="hljs-params">(parent: <span class="hljs-type">ViewGroup</span>, viewType: <span class="hljs-type">Int</span>)</span></span>: ViewHolder {
    <span class="hljs-keyword">val</span> view = LayoutInflater.from(parent.context)
        .inflate(R.layout.item_song, parent, <span class="hljs-literal">false</span>)

    <span class="hljs-comment">// èƒŒæ™¯åªè®¾ç½®ä¸€æ¬¡</span>
    view.setBackgroundResource(R.drawable.gradient_bg)

    <span class="hljs-keyword">return</span> ViewHolder(view)
}
</code></pre>
<h4 data-id="heading-50">4. RecyclerViewä¼˜åŒ–</h4>
<pre><code class="hljs language-kotlin" lang="kotlin">recyclerView.apply {
    <span class="hljs-comment">// 1. è®¾ç½®å›ºå®šå¤§å° (é¿å…é‡æ–°measure)</span>
    setHasFixedSize(<span class="hljs-literal">true</span>)

    <span class="hljs-comment">// 2. å¢åŠ ç¼“å­˜æ± å¤§å°</span>
    recycledViewPool.setMaxRecycledViews(VIEW_TYPE_SONG, <span class="hljs-number">20</span>)

    <span class="hljs-comment">// 3. è®¾ç½®é¢„å–ç­–ç•¥</span>
    layoutManager = LinearLayoutManager(context).apply {
        isItemPrefetchEnabled = <span class="hljs-literal">true</span> <span class="hljs-comment">// Android 7.0+</span>
        initialPrefetchItemCount = <span class="hljs-number">4</span> <span class="hljs-comment">// é¢„å–4ä¸ªItem</span>
    }

    <span class="hljs-comment">// 4. å‡å°‘ä¸å¿…è¦çš„åŠ¨ç”»</span>
    (itemAnimator <span class="hljs-keyword">as</span>? SimpleItemAnimator)?.supportsChangeAnimations = <span class="hljs-literal">false</span>
}
</code></pre>
<h4 data-id="heading-51">5. ä½¿ç”¨DiffUtil</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">SongDiffCallback</span>(
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> oldList: List&lt;Song&gt;,
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> newList: List&lt;Song&gt;
) : DiffUtil.Callback() {

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getOldListSize</span><span class="hljs-params">()</span></span> = oldList.size
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getNewListSize</span><span class="hljs-params">()</span></span> = newList.size

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">areItemsTheSame</span><span class="hljs-params">(oldPos: <span class="hljs-type">Int</span>, newPos: <span class="hljs-type">Int</span>)</span></span>: <span class="hljs-built_in">Boolean</span> {
        <span class="hljs-keyword">return</span> oldList[oldPos].id == newList[newPos].id
    }

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">areContentsTheSame</span><span class="hljs-params">(oldPos: <span class="hljs-type">Int</span>, newPos: <span class="hljs-type">Int</span>)</span></span>: <span class="hljs-built_in">Boolean</span> {
        <span class="hljs-keyword">return</span> oldList[oldPos] == newList[newPos]
    }

    <span class="hljs-comment">// è¿”å›å˜åŒ–çš„éƒ¨åˆ†,å®ç°ç²¾å‡†æ›´æ–°</span>
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getChangePayload</span><span class="hljs-params">(oldPos: <span class="hljs-type">Int</span>, newPos: <span class="hljs-type">Int</span>)</span></span>: Any? {
        <span class="hljs-keyword">val</span> oldSong = oldList[oldPos]
        <span class="hljs-keyword">val</span> newSong = newList[newPos]

        <span class="hljs-keyword">val</span> changes = Bundle()
        <span class="hljs-keyword">if</span> (oldSong.title != newSong.title) {
            changes.putString(<span class="hljs-string">"title"</span>, newSong.title)
        }
        <span class="hljs-keyword">if</span> (oldSong.isFavorite != newSong.isFavorite) {
            changes.putBoolean(<span class="hljs-string">"favorite"</span>, newSong.isFavorite)
        }

        <span class="hljs-keyword">return</span> <span class="hljs-keyword">if</span> (changes.isEmpty) <span class="hljs-literal">null</span> <span class="hljs-keyword">else</span> changes
    }
}

<span class="hljs-comment">// ä½¿ç”¨</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">updateSongs</span><span class="hljs-params">(newSongs: <span class="hljs-type">List</span>&lt;<span class="hljs-type">Song</span>&gt;)</span></span> {
    <span class="hljs-keyword">val</span> diffResult = DiffUtil.calculateDiff(
        SongDiffCallback(songs, newSongs)
    )
    songs = newSongs
    diffResult.dispatchUpdatesTo(adapter)
}
</code></pre>
<h3 data-id="heading-52">ä¼˜åŒ–æ•ˆæœå¯¹æ¯”</h3>









































<table><thead><tr><th>æŒ‡æ ‡</th><th>ä¼˜åŒ–å‰</th><th>ä¼˜åŒ–å</th><th>æå‡</th></tr></thead><tbody><tr><td>FPS</td><td>35fps</td><td>57fps</td><td>+63%</td></tr><tr><td>è¿‡åº¦ç»˜åˆ¶</td><td>4x (çº¢è‰²)</td><td>1x (è“è‰²)</td><td>-75%</td></tr><tr><td>å†…å­˜å ç”¨</td><td>12MB (å›¾ç‰‡)</td><td>2MB (å›¾ç‰‡)</td><td>-83%</td></tr><tr><td>GPU Processæ—¶é—´</td><td>8ms</td><td>3ms</td><td>-63%</td></tr><tr><td>ç”¨æˆ·æ„ŸçŸ¥</td><td>æ˜æ˜¾å¡é¡¿</td><td>æµç•…</td><td>âœ…</td></tr></tbody></table>
<p><strong>éªŒè¯æ–¹æ³•</strong>:</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1. Profile GPU Rendering: æ©™è‰²æŸ±å­æ˜æ˜¾é™ä½</span>
<span class="hljs-comment"># 2. è°ƒè¯•GPUè¿‡åº¦ç»˜åˆ¶: å¤§éƒ¨åˆ†å˜æˆè“è‰²</span>
<span class="hljs-comment"># 3. Systrace: drawé˜¶æ®µä»12msé™ä½åˆ°4ms</span>
<span class="hljs-comment"># 4. ç”¨æˆ·åé¦ˆ: æ»‘åŠ¨æµç•…åº¦æ˜æ˜¾æå‡</span>
</code></pre>
<hr/>
<h2 data-id="heading-53">æœ€ä½³å®è·µä¸æ€»ç»“</h2>
<h3 data-id="heading-54">æ¸²æŸ“ä¼˜åŒ–Checklist</h3>
<p><strong>å¸ƒå±€ä¼˜åŒ–</strong>:</p>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> ä½¿ç”¨ConstraintLayoutå‡å°‘å±‚çº§</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> ç§»é™¤ä¸å¿…è¦çš„èƒŒæ™¯</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> é¿å…è¿‡æ·±çš„ViewåµŒå¥— (â‰¤5å±‚)</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> ä½¿ç”¨ViewStubå»¶è¿ŸåŠ è½½</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> ä½¿ç”¨mergeæ ‡ç­¾å‡å°‘å±‚çº§</li>
</ul>
<p><strong>è¿‡åº¦ç»˜åˆ¶ä¼˜åŒ–</strong>:</p>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> å¼€å¯"è°ƒè¯•GPUè¿‡åº¦ç»˜åˆ¶"æ£€æŸ¥</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> ç›®æ ‡: å¤§éƒ¨åˆ†åŒºåŸŸè“è‰² (1x)</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> ç§»é™¤çª—å£é»˜è®¤èƒŒæ™¯ (å¦‚æœActivityæœ‰è‡ªå®šä¹‰èƒŒæ™¯)</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> ä½¿ç”¨clipRectè£å‰ªä¸å¯è§åŒºåŸŸ</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> ä¼˜åŒ–è‡ªå®šä¹‰Viewçš„onDraw</li>
</ul>
<p><strong>GPUä¼˜åŒ–</strong>:</p>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> å‡å°‘Draw Calls (æ‰¹é‡ç»˜åˆ¶ã€åˆå¹¶çº¹ç†)</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> å‹ç¼©çº¹ç† (ETC2/ASTC)</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> ä½¿ç”¨Mipmap</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> ç®€åŒ–Shaderé€»è¾‘</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> é¿å…åŠ¨æ€åˆ†æ”¯</li>
</ul>
<p><strong>ç¡¬ä»¶åŠ é€Ÿ</strong>:</p>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> é»˜è®¤å¼€å¯åº”ç”¨çº§ç¡¬ä»¶åŠ é€Ÿ</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> åŠ¨ç”»æ—¶å¯ç”¨ç¡¬ä»¶å›¾å±‚</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> åŠ¨ç”»ç»“æŸé‡Šæ”¾ç¡¬ä»¶å›¾å±‚</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> é¿å…å¯¹å¤§Viewä½¿ç”¨ç¡¬ä»¶å›¾å±‚</li>
</ul>
<p><strong>RecyclerView</strong>:</p>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> setHasFixedSize(true)</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> å¢åŠ RecycledViewPoolå¤§å°</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> ä½¿ç”¨DiffUtilç²¾å‡†æ›´æ–°</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> å¯ç”¨é¢„å– (Prefetch)</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> å‡å°‘onBindæ“ä½œ</li>
</ul>
<p><strong>ç›‘æ§</strong>:</p>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> é›†æˆFrameMetricsç›‘å¬</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> å®šæœŸSystraceåˆ†æ</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> ç›‘æ§æ‰å¸§ç‡</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> ä¸ŠæŠ¥åˆ°APMå¹³å°</li>
</ul>
<h3 data-id="heading-55">å¸¸è§å‘ç‚¹</h3>
<p><strong>1. è¿‡åº¦ä½¿ç”¨ç¡¬ä»¶å›¾å±‚</strong></p>
<p>âŒ <strong>é”™è¯¯åšæ³•</strong>:</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// ç»™æ‰€æœ‰Viewéƒ½è®¾ç½®ç¡¬ä»¶å›¾å±‚</span>
listView.children.forEach {
    it.setLayerType(View.LAYER_TYPE_HARDWARE, <span class="hljs-literal">null</span>)
}
<span class="hljs-comment">// ç»“æœ: GPUå†…å­˜çˆ†ç‚¸,åè€Œå¡é¡¿</span>
</code></pre>
<p>âœ… <strong>æ­£ç¡®åšæ³•</strong>: åªåœ¨åŠ¨ç”»æœŸé—´ä½¿ç”¨ã€‚</p>
<p><strong>2. å¿½ç•¥clipRect</strong></p>
<p>âŒ <strong>é”™è¯¯åšæ³•</strong>:</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onDraw</span><span class="hljs-params">(canvas: <span class="hljs-type">Canvas</span>)</span></span> {
    <span class="hljs-comment">// ç»˜åˆ¶æ‰€æœ‰100ä¸ªItem,å³ä½¿åªæœ‰10ä¸ªå¯è§</span>
    <span class="hljs-keyword">for</span> (i <span class="hljs-keyword">in</span> <span class="hljs-number">0.</span><span class="hljs-number">.99</span>) {
        drawItem(canvas, items[i])
    }
}
</code></pre>
<p>âœ… <strong>æ­£ç¡®åšæ³•</strong>: åªç»˜åˆ¶å¯è§åŒºåŸŸã€‚</p>
<p><strong>3. é¢‘ç¹åˆ›å»ºå¯¹è±¡</strong></p>
<p>âŒ <strong>é”™è¯¯åšæ³•</strong>:</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onDraw</span><span class="hljs-params">(canvas: <span class="hljs-type">Canvas</span>)</span></span> {
    <span class="hljs-keyword">val</span> rect = Rect() <span class="hljs-comment">// æ¯å¸§åˆ›å»º</span>
    <span class="hljs-keyword">val</span> paint = Paint() <span class="hljs-comment">// æ¯å¸§åˆ›å»º</span>
}
</code></pre>
<p>âœ… <strong>æ­£ç¡®åšæ³•</strong>: å¤ç”¨å¯¹è±¡ã€‚</p>
<h3 data-id="heading-56">æ€»ç»“</h3>
<p>æ¸²æŸ“ä¼˜åŒ–æ˜¯ä¸€ä¸ªç³»ç»Ÿå·¥ç¨‹,éœ€è¦ä»æ¶æ„ã€ä»£ç å’Œå·¥å…·ä¸‰ä¸ªå±‚é¢ç»¼åˆæ–½ç­–:</p>
<p><strong>æ ¸å¿ƒåŸåˆ™</strong>:</p>
<ol>
<li><strong>å‡å°‘å·¥ä½œé‡</strong>: æ›´å°‘çš„ç»˜åˆ¶ã€æ›´å°‘çš„Draw Callsã€æ›´å°‘çš„åƒç´ å¡«å……</li>
<li><strong>æé«˜æ•ˆç‡</strong>: ä½¿ç”¨GPUã€æ‰¹é‡å¤„ç†ã€ç¼“å­˜å¤ç”¨</li>
<li><strong>åº¦é‡é©±åŠ¨</strong>: å·¥å…·åˆ†æã€æ•°æ®è¯´è¯ã€æŒç»­ç›‘æ§</li>
</ol>
<p><strong>ä¼˜åŒ–è·¯å¾„</strong>:</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-bullet">1.</span> ä½¿ç”¨å·¥å…·å®šä½ç“¶é¢ˆ (Profile GPU Renderingã€GPU Profilerã€Systrace)
   â†“
<span class="hljs-bullet">2.</span> é’ˆå¯¹æ€§ä¼˜åŒ– (è¿‡åº¦ç»˜åˆ¶ã€å¸ƒå±€å±‚çº§ã€GPUè´Ÿè½½)
   â†“
<span class="hljs-bullet">3.</span> éªŒè¯æ•ˆæœ (FPSã€å·¥å…·æŒ‡æ ‡ã€ç”¨æˆ·åé¦ˆ)
   â†“
<span class="hljs-bullet">4.</span> æŒç»­ç›‘æ§ (FrameMetricsã€APMå¹³å°)
</code></pre>
<p>è®°ä½:<strong>ä¼˜åŒ–æ˜¯ä¸€ä¸ªæŒç»­è¿­ä»£çš„è¿‡ç¨‹,æ²¡æœ‰é“¶å¼¹,åªæœ‰åˆé€‚çš„æ–¹æ¡ˆ</strong>ã€‚ç†è§£æ¸²æŸ“æœºåˆ¶ã€å–„ç”¨å·¥å…·ã€æ³¨é‡å®æµ‹,æ‰èƒ½æ‰“é€ ä¸èˆ¬é¡ºæ»‘çš„ç”¨æˆ·ä½“éªŒã€‚</p>
<p><strong>ç³»åˆ—æ–‡ç« </strong>:</p>
<ul>
<li><a href="https://juejin.cn/post/7593630465380352038" target="_blank" title="https://juejin.cn/post/7593630465380352038">ä¸Šä¸€ç¯‡ï¼šAndroidå†…å­˜ä¼˜åŒ–ä¸OOMé—®é¢˜æ·±åº¦è§£å†³</a></li>
<li><a href="https://juejin.cn/post/7587473691170095104" target="_blank" title="https://juejin.cn/post/7587473691170095104">ç³»åˆ—ç›®å½•: Androidç³»ç»Ÿç¨³å®šæ€§ä¸æ€§èƒ½ä¼˜åŒ–</a></li>
</ul>
<blockquote>
<p><strong>ä½œè€…ç®€ä»‹</strong>: å¤šå¹´Androidç³»ç»Ÿå¼€å‘ç»éªŒ,ä¸“æ³¨äºç³»ç»Ÿç¨³å®šæ€§ä¸æ€§èƒ½ä¼˜åŒ–é¢†åŸŸã€‚æ¬¢è¿å…³æ³¨æœ¬ç³»åˆ—,ä¸€èµ·æ·±å…¥Androidç³»ç»Ÿçš„ç²¾å½©ä¸–ç•Œ!</p>
</blockquote>
<hr/>
<div align="center">  
### ğŸ‰ æ„Ÿè°¢å…³æ³¨,è®©æˆ‘ä»¬ä¸€èµ·æ·±å…¥Androidç³»ç»Ÿçš„ç²¾å½©ä¸–ç•Œ!  
### **æ‰¾åˆ°æˆ‘**: [ä¸ªäººä¸»é¡µ](https://home.wonlab.top)   
</div></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[gRPCæºç å‰–æï¼šé«˜æ€§èƒ½RPCçš„å®ç°åŸç†ä¸å·¥ç¨‹å®è·µ]]></title>    <link>https://juejin.cn/post/7593771861323939866</link>    <guid>https://juejin.cn/post/7593771861323939866</guid>    <pubDate>2026-01-11T14:44:46.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7593771861323939866" data-draft-id="7593771861323923482" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="gRPCæºç å‰–æï¼šé«˜æ€§èƒ½RPCçš„å®ç°åŸç†ä¸å·¥ç¨‹å®è·µ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-11T14:44:46.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç äº‹æ¼«è°ˆ"/> <meta itemprop="url" content="https://juejin.cn/user/1972974802965230"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            gRPCæºç å‰–æï¼šé«˜æ€§èƒ½RPCçš„å®ç°åŸç†ä¸å·¥ç¨‹å®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1972974802965230/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç äº‹æ¼«è°ˆ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-11T14:44:46.000Z" title="Sun Jan 11 2026 14:44:46 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»14åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>gRPCä½œä¸ºäº‘åŸç”Ÿæ—¶ä»£æœ€é‡è¦çš„RPCæ¡†æ¶ä¹‹ä¸€ï¼Œå…¶é«˜æ€§èƒ½ç‰¹æ€§æºäºç²¾å·§çš„æ¶æ„è®¾è®¡å’Œæ·±å…¥çš„æ€§èƒ½ä¼˜åŒ–ã€‚æœ¬æ–‡å°†é€šè¿‡æºç çº§å‰–æï¼Œæ­ç¤ºgRPCåœ¨é€šä¿¡åè®®ã€åºåˆ—åŒ–ã€å¹¶å‘æ¨¡å‹ã€æµå¤„ç†ç­‰å…³é”®å±‚é¢çš„å®ç°åŸç†ï¼Œå¹¶ç»“åˆC++åç«¯å¼€å‘å®è·µï¼Œæ¢è®¨å¦‚ä½•å€Ÿé‰´å…¶è®¾è®¡æ€æƒ³æå‡ç³»ç»Ÿæ€§èƒ½ã€‚</p>
<h2 data-id="heading-0">1. æ¶æ„å…¨æ™¯ï¼šå››å±‚è®¾è®¡å“²å­¦</h2>
<h3 data-id="heading-1">1.1 æ•´ä½“æ¶æ„åˆ†è§£</h3>
<pre><code class="hljs language-scss" lang="scss">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  åº”ç”¨å±‚ (Application)                â”‚
â”‚      â€¢ ç”¨æˆ·å®šä¹‰çš„æœåŠ¡æ¥å£ä¸ä¸šåŠ¡é€»è¾‘                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 Stubå±‚ (Client/Server Stubs)        â”‚
â”‚      â€¢ è‡ªåŠ¨ç”Ÿæˆçš„å®¢æˆ·ç«¯/æœåŠ¡ç«¯ä»£ç                   â”‚
â”‚      â€¢ è°ƒç”¨å°è£…ä¸è·¯ç”±åˆ†å‘                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              ä¼ è¾“æŠ½è±¡å±‚ (Transport Abstraction)     â”‚
â”‚      â€¢ Channel/CompletionQueue æ ¸å¿ƒæŠ½è±¡            â”‚
â”‚      â€¢ æ’ä»¶åŒ–ä¼ è¾“åè®®æ”¯æŒ                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               æ ¸å¿ƒä¼ è¾“å±‚ (Core Transport)           â”‚
â”‚      â€¢ HTTP/<span class="hljs-number">2</span> å¸§å¤„ç†å¼•æ“                           â”‚
â”‚      â€¢ æµé‡æ§åˆ¶ã€å¤šè·¯å¤ç”¨ã€å¤´éƒ¨å‹ç¼©                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h3 data-id="heading-2">1.2 æ ¸å¿ƒç›®å½•ç»“æ„è§£æ</h3>
<pre><code class="hljs language-bash" lang="bash">grpc/
â”œâ”€â”€ include/grpc/          <span class="hljs-comment"># å…¬å…±å¤´æ–‡ä»¶</span>
â”‚   â”œâ”€â”€ grpc.h            <span class="hljs-comment"># æ ¸å¿ƒAPI</span>
â”‚   â”œâ”€â”€ impl/codegen/     <span class="hljs-comment"># ç”Ÿæˆçš„ä»£ç æ¨¡æ¿</span>
â”‚   â””â”€â”€ support/          <span class="hljs-comment"># å·¥å…·æ”¯æŒ</span>
â”œâ”€â”€ src/core/             <span class="hljs-comment"># æ ¸å¿ƒå®ç°</span>
â”‚   â”œâ”€â”€ lib/              <span class="hljs-comment"># åŸºç¡€åº“</span>
â”‚   â”‚   â”œâ”€â”€ transport/    <span class="hljs-comment"># ä¼ è¾“å±‚å®ç°</span>
â”‚   â”‚   â”œâ”€â”€ surface/      <span class="hljs-comment"># APIè¡¨é¢å±‚</span>
â”‚   â”‚   â””â”€â”€ ext/          <span class="hljs-comment"># æ‰©å±•åŠŸèƒ½</span>
â”‚   â””â”€â”€ lib/http2/        <span class="hljs-comment"># HTTP/2å®ç°</span>
â”œâ”€â”€ src/cpp/              <span class="hljs-comment"># C++å°è£…å±‚</span>
â”‚   â”œâ”€â”€ client/           <span class="hljs-comment"># å®¢æˆ·ç«¯å®ç°</span>
â”‚   â”œâ”€â”€ server/           <span class="hljs-comment"># æœåŠ¡ç«¯å®ç°</span>
â”‚   â””â”€â”€ common/           <span class="hljs-comment"># å…¬å…±ç»„ä»¶</span>
â””â”€â”€ src/proto/grpc/       <span class="hljs-comment"># Protocolå®šä¹‰</span>
</code></pre>
<h2 data-id="heading-3">2. HTTP/2å¸§å¤„ç†å¼•æ“ï¼šæ€§èƒ½çš„åŸºçŸ³</h2>
<h3 data-id="heading-4">2.1 å¸§å¤„ç†çš„é›¶æ‹·è´ä¼˜åŒ–</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// src/core/lib/transport/byte_stream.h</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ByteStream</span> {
<span class="hljs-keyword">public</span>:
    <span class="hljs-comment">// æ ¸å¿ƒæ€æƒ³ï¼šé¿å…æ•°æ®æ‹·è´ï¼Œç›´æ¥æ“ä½œç¼“å†²åŒºé“¾</span>
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> grpc_error_handle <span class="hljs-title">ReadAll</span><span class="hljs-params">(SliceBuffer* dest)</span> </span>= <span class="hljs-number">0</span>;
    
    <span class="hljs-comment">// å†…å­˜è§†å›¾ä¼ é€’ï¼Œè€Œéæ•°æ®æ‹·è´</span>
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">const</span> grpc_slice_buffer* <span class="hljs-title">GetRawSliceBuffer</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>= <span class="hljs-number">0</span>;
};

<span class="hljs-comment">// å¸§è§£æçš„çŠ¶æ€æœºå®ç°</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">FrameParser</span> {
    <span class="hljs-keyword">enum class</span> <span class="hljs-title class_">State</span> {
        kStart,
        kLength,
        kType,
        kFlags,
        kStreamId,
        kPayload,
        kComplete
    };
    
    <span class="hljs-function">ParseResult <span class="hljs-title">Parse</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">uint8_t</span>* data, <span class="hljs-type">size_t</span> len)</span> </span>{
        <span class="hljs-keyword">while</span> (len &gt; <span class="hljs-number">0</span>) {
            <span class="hljs-keyword">switch</span> (state_) {
                <span class="hljs-keyword">case</span> State::kStart:
                    <span class="hljs-comment">// è§£æå¸§å¤´</span>
                    <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">ParseFrameHeader</span>(data, &amp;current_frame_)) {
                        <span class="hljs-keyword">return</span> ParseResult::kError;
                    }
                    state_ = State::kPayload;
                    <span class="hljs-keyword">break</span>;
                    
                <span class="hljs-keyword">case</span> State::kPayload:
                    <span class="hljs-comment">// æµå¼å¤„ç†è´Ÿè½½ï¼Œæ”¯æŒéƒ¨åˆ†å¸§</span>
                    <span class="hljs-type">size_t</span> bytes_to_copy = std::<span class="hljs-built_in">min</span>(
                        len, 
                        current_frame_.length - payload_received_
                    );
                    
                    <span class="hljs-comment">// ä½¿ç”¨memcpyä¼˜åŒ–ï¼ˆSIMDåŠ é€Ÿï¼‰</span>
                    <span class="hljs-built_in">CopyPayload</span>(data, bytes_to_copy);
                    
                    <span class="hljs-keyword">if</span> (payload_received_ == current_frame_.length) {
                        state_ = State::kComplete;
                    }
                    <span class="hljs-keyword">break</span>;
            }
        }
    }
    
<span class="hljs-keyword">private</span>:
    <span class="hljs-comment">// ä½¿ç”¨é¢„åˆ†é…çš„å†…å­˜æ± å‡å°‘mallocè°ƒç”¨</span>
    FrameBufferPool buffer_pool_;
};
</code></pre>
<h3 data-id="heading-5">2.2 æµé‡æ§åˆ¶ç®—æ³•çš„å®ç°</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// src/core/lib/transport/http2_flow_control.h</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">FlowControl</span> {
<span class="hljs-keyword">public</span>:
    <span class="hljs-comment">// åŸºäºä¿¡ç”¨é¢çš„æµé‡æ§åˆ¶ï¼ˆRFC 7540 Â§6.9ï¼‰</span>
    <span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">TryIncrement</span><span class="hljs-params">(<span class="hljs-type">size_t</span> bytes)</span> </span>{
        <span class="hljs-comment">// ä¹è§‚é”ä¿æŠ¤å¹¶å‘æ›´æ–°</span>
        <span class="hljs-type">uint32_t</span> old_value, new_value;
        <span class="hljs-keyword">do</span> {
            old_value = credit_.<span class="hljs-built_in">load</span>(std::memory_order_relaxed);
            <span class="hljs-keyword">if</span> (old_value &lt; bytes) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
            new_value = old_value - bytes;
        } <span class="hljs-keyword">while</span> (!credit_.<span class="hljs-built_in">compare_exchange_weak</span>(
            old_value, new_value,
            std::memory_order_release,
            std::memory_order_relaxed));
            
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }
    
    <span class="hljs-comment">// çª—å£æ›´æ–°ç®—æ³•ï¼ˆBDPè‡ªé€‚åº”ï¼‰</span>
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">OnDataReceived</span><span class="hljs-params">(<span class="hljs-type">size_t</span> bytes)</span> </span>{
        total_received_ += bytes;
        
        <span class="hljs-comment">// åŠ¨æ€è°ƒæ•´çª—å£å¤§å°</span>
        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">ShouldUpdateWindow</span>()) {
            <span class="hljs-type">size_t</span> new_window = <span class="hljs-built_in">CalculateOptimalWindow</span>();
            <span class="hljs-built_in">SendWindowUpdate</span>(new_window);
        }
    }
    
<span class="hljs-keyword">private</span>:
    <span class="hljs-comment">// åŸºäºå¸¦å®½å»¶è¿Ÿç§¯çš„åŠ¨æ€çª—å£è°ƒæ•´</span>
    <span class="hljs-function"><span class="hljs-type">size_t</span> <span class="hljs-title">CalculateOptimalWindow</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>{
        <span class="hljs-comment">// BDP = Bandwidth Ã— RTT</span>
        <span class="hljs-type">double</span> bdp = estimated_bandwidth_ * smoothed_rtt_;
        
        <span class="hljs-comment">// æ·»åŠ å®‰å…¨è¾¹é™…ï¼ˆ25%ï¼‰</span>
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">static_cast</span>&lt;<span class="hljs-type">size_t</span>&gt;(bdp * <span class="hljs-number">1.25</span>);
    }
    
    std::atomic&lt;<span class="hljs-type">uint32_t</span>&gt; credit_{kInitialWindowSize};
    <span class="hljs-type">double</span> estimated_bandwidth_{<span class="hljs-number">0.0</span>};
    <span class="hljs-type">double</span> smoothed_rtt_{<span class="hljs-number">0.1</span>};  <span class="hljs-comment">// 100msåˆå§‹RTT</span>
};
</code></pre>
<h2 data-id="heading-6">3. å¤šè·¯å¤ç”¨ä¸è¿æ¥ç®¡ç†</h2>
<h3 data-id="heading-7">3.1 Stream IDåˆ†é…ç­–ç•¥</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// src/core/lib/transport/http2_transport.h</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">StreamIdAllocator</span> {
<span class="hljs-keyword">public</span>:
    <span class="hljs-comment">// æµIDåˆ†é…ï¼šå®¢æˆ·ç«¯å¥‡æ•°ï¼ŒæœåŠ¡å™¨å¶æ•°</span>
    <span class="hljs-function"><span class="hljs-type">uint32_t</span> <span class="hljs-title">AllocateStreamId</span><span class="hljs-params">(<span class="hljs-type">bool</span> is_client)</span> </span>{
        <span class="hljs-function">std::lock_guard&lt;std::mutex&gt; <span class="hljs-title">lock</span><span class="hljs-params">(mutex_)</span></span>;
        
        <span class="hljs-type">uint32_t</span> stream_id;
        <span class="hljs-keyword">if</span> (is_client) {
            <span class="hljs-comment">// å®¢æˆ·ç«¯ï¼š1, 3, 5, ...</span>
            stream_id = next_client_stream_id_;
            next_client_stream_id_ += <span class="hljs-number">2</span>;
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-comment">// æœåŠ¡ç«¯ï¼š2, 4, 6, ...</span>
            stream_id = next_server_stream_id_;
            next_server_stream_id_ += <span class="hljs-number">2</span>;
        }
        
        <span class="hljs-comment">// æ£€æŸ¥æµIDæ˜¯å¦è€—å°½ï¼ˆRFC 7540 Â§5.1.1ï¼‰</span>
        <span class="hljs-keyword">if</span> (stream_id &gt; kMaxStreamId) {
            <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;  <span class="hljs-comment">// åˆ†é…å¤±è´¥</span>
        }
        
        active_streams_.<span class="hljs-built_in">insert</span>(stream_id);
        <span class="hljs-keyword">return</span> stream_id;
    }
    
    <span class="hljs-comment">// æµçŠ¶æ€æœºç®¡ç†</span>
    <span class="hljs-keyword">enum class</span> <span class="hljs-title class_">StreamState</span> {
        kIdle,
        kReservedLocal,
        kReservedRemote,
        kOpen,
        kHalfClosedLocal,
        kHalfClosedRemote,
        kClosed
    };
    
    <span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">TransitionState</span><span class="hljs-params">(<span class="hljs-type">uint32_t</span> stream_id, 
                        StreamState old_state,
                        StreamState new_state)</span> </span>{
        <span class="hljs-comment">// çŠ¶æ€è½¬æ¢éªŒè¯ï¼ˆRFC 7540 Â§5.1ï¼‰</span>
        <span class="hljs-type">static</span> <span class="hljs-type">const</span> <span class="hljs-type">bool</span> valid_transitions[<span class="hljs-number">7</span>][<span class="hljs-number">7</span>] = {
            <span class="hljs-comment">// ä»è¡ŒçŠ¶æ€ -&gt; åˆ°åˆ—çŠ¶æ€</span>
            {<span class="hljs-number">0</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>},  <span class="hljs-comment">// kIdle</span>
            {<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">1</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>},  <span class="hljs-comment">// kReservedLocal</span>
            {<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">1</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>},  <span class="hljs-comment">// kReservedRemote</span>
            {<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>},  <span class="hljs-comment">// kOpen</span>
            {<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">1</span>},  <span class="hljs-comment">// kHalfClosedLocal</span>
            {<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">1</span>},  <span class="hljs-comment">// kHalfClosedRemote</span>
            {<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>}   <span class="hljs-comment">// kClosed</span>
        };
        
        <span class="hljs-keyword">return</span> valid_transitions[<span class="hljs-built_in">static_cast</span>&lt;<span class="hljs-type">int</span>&gt;(old_state)]
                                [<span class="hljs-built_in">static_cast</span>&lt;<span class="hljs-type">int</span>&gt;(new_state)];
    }
    
<span class="hljs-keyword">private</span>:
    std::mutex mutex_;
    <span class="hljs-type">uint32_t</span> next_client_stream_id_{<span class="hljs-number">1</span>};
    <span class="hljs-type">uint32_t</span> next_server_stream_id_{<span class="hljs-number">2</span>};
    std::unordered_set&lt;<span class="hljs-type">uint32_t</span>&gt; active_streams_;
};
</code></pre>
<h3 data-id="heading-8">3.2 è¿æ¥æ± çš„æ™ºèƒ½ç®¡ç†</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// src/core/ext/filters/client_channel/conn_pool.h</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ConnectionPool</span> {
<span class="hljs-keyword">public</span>:
    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">ConnectionEntry</span> {
        std::shared_ptr&lt;Subchannel&gt; subchannel;
        std::chrono::steady_clock::time_point last_used;
        std::atomic&lt;<span class="hljs-type">int</span>&gt; ref_count{<span class="hljs-number">0</span>};
        grpc_connectivity_state state{GRPC_CHANNEL_IDLE};
    };
    
    <span class="hljs-comment">// è·å–è¿æ¥ï¼ˆå¸¦è´Ÿè½½å‡è¡¡ï¼‰</span>
    <span class="hljs-function">std::shared_ptr&lt;Subchannel&gt; <span class="hljs-title">PickSubchannel</span><span class="hljs-params">(
        <span class="hljs-type">const</span> grpc_call_context_element* context)</span> </span>{
        
        <span class="hljs-comment">// 1. å¥åº·æ£€æŸ¥è¿‡æ»¤</span>
        <span class="hljs-keyword">auto</span> healthy_connections = <span class="hljs-built_in">FilterHealthy</span>(connections_);
        
        <span class="hljs-comment">// 2. è´Ÿè½½å‡è¡¡ç­–ç•¥</span>
        <span class="hljs-keyword">switch</span> (lb_policy_) {
            <span class="hljs-keyword">case</span> LoadBalancingPolicy::kRoundRobin:
                <span class="hljs-keyword">return</span> <span class="hljs-built_in">RoundRobinPick</span>(healthy_connections);
            <span class="hljs-keyword">case</span> LoadBalancingPolicy::kLeastRequest:
                <span class="hljs-keyword">return</span> <span class="hljs-built_in">LeastRequestPick</span>(healthy_connections);
            <span class="hljs-keyword">case</span> LoadBalancingPolicy::kRingHash:
                <span class="hljs-keyword">return</span> <span class="hljs-built_in">ConsistentHashPick</span>(healthy_connections, context);
            <span class="hljs-keyword">default</span>:
                <span class="hljs-keyword">return</span> <span class="hljs-built_in">RandomPick</span>(healthy_connections);
        }
    }
    
    <span class="hljs-comment">// è¿æ¥ä¿æ´»æœºåˆ¶</span>
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">StartKeepaliveTimer</span><span class="hljs-params">()</span> </span>{
        keepalive_timer_ = std::<span class="hljs-built_in">make_unique</span>&lt;grpc_timer&gt;();
        <span class="hljs-built_in">grpc_timer_init</span>(keepalive_timer_.<span class="hljs-built_in">get</span>(),
                       grpc_core::ExecCtx::<span class="hljs-built_in">Get</span>()-&gt;<span class="hljs-built_in">Now</span>() + keepalive_timeout_,
                       &amp;keepalive_callback_);
    }
    
<span class="hljs-keyword">private</span>:
    <span class="hljs-comment">// PINGå¸§å‘é€ä»¥æ£€æµ‹è¿æ¥æ´»æ€§</span>
    <span class="hljs-function"><span class="hljs-type">static</span> <span class="hljs-type">void</span> <span class="hljs-title">SendKeepalivePing</span><span class="hljs-params">(<span class="hljs-type">void</span>* arg, grpc_error_handle error)</span> </span>{
        <span class="hljs-keyword">auto</span>* pool = <span class="hljs-built_in">static_cast</span>&lt;ConnectionPool*&gt;(arg);
        <span class="hljs-keyword">if</span> (!error.<span class="hljs-built_in">ok</span>()) <span class="hljs-keyword">return</span>;
        
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span>&amp; conn : pool-&gt;connections_) {
            <span class="hljs-keyword">if</span> (conn-&gt;state == GRPC_CHANNEL_READY) {
                <span class="hljs-comment">// å‘é€HTTP/2 PINGå¸§</span>
                <span class="hljs-built_in">grpc_http2_send_ping</span>(conn-&gt;transport, 
                                     <span class="hljs-comment">/*ack=*/</span><span class="hljs-literal">false</span>,
                                     <span class="hljs-comment">/*opaque_data=*/</span>pool-&gt;next_ping_id_++);
            }
        }
        
        <span class="hljs-comment">// é‡æ–°è°ƒåº¦å®šæ—¶å™¨</span>
        pool-&gt;<span class="hljs-built_in">StartKeepaliveTimer</span>();
    }
    
    std::vector&lt;std::shared_ptr&lt;ConnectionEntry&gt;&gt; connections_;
    LoadBalancingPolicy lb_policy_{LoadBalancingPolicy::kRoundRobin};
    std::unique_ptr&lt;grpc_timer&gt; keepalive_timer_;
    <span class="hljs-type">uint64_t</span> next_ping_id_{<span class="hljs-number">0</span>};
};
</code></pre>
<h2 data-id="heading-9">4. å¤´éƒ¨å‹ç¼©ï¼šHPACKç®—æ³•çš„å·¥ç¨‹å®ç°</h2>
<h3 data-id="heading-10">4.1 åŠ¨æ€è¡¨ç®¡ç†</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// src/core/lib/transport/metadata.h</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">HPACKEncoder</span> {
<span class="hljs-keyword">public</span>:
    <span class="hljs-comment">// å¤´éƒ¨å­—æ®µç¼–ç </span>
    <span class="hljs-function">grpc_slice <span class="hljs-title">Encode</span><span class="hljs-params">(<span class="hljs-type">const</span> grpc_metadata_batch&amp; metadata)</span> </span>{
        SliceBuffer output;
        
        <span class="hljs-keyword">for</span> (<span class="hljs-type">size_t</span> i = <span class="hljs-number">0</span>; i &lt; metadata.count; ++i) {
            <span class="hljs-type">const</span> <span class="hljs-keyword">auto</span>&amp; md = metadata.metadata[i];
            
            <span class="hljs-comment">// 1. é™æ€è¡¨æŸ¥æ‰¾ï¼ˆRFC 7541 Appendix Aï¼‰</span>
            <span class="hljs-keyword">auto</span> static_index = <span class="hljs-built_in">LookupStaticTable</span>(md.key, md.value);
            <span class="hljs-keyword">if</span> (static_index != <span class="hljs-number">0</span>) {
                <span class="hljs-comment">// ç´¢å¼•è¡¨ç¤ºï¼ˆèŠ‚çœç©ºé—´ï¼‰</span>
                <span class="hljs-built_in">EncodeIndex</span>(output, static_index);
                <span class="hljs-keyword">continue</span>;
            }
            
            <span class="hljs-comment">// 2. åŠ¨æ€è¡¨æŸ¥æ‰¾</span>
            <span class="hljs-keyword">auto</span> dynamic_index = <span class="hljs-built_in">LookupDynamicTable</span>(md.key, md.value);
            <span class="hljs-keyword">if</span> (dynamic_index != <span class="hljs-number">0</span>) {
                <span class="hljs-built_in">EncodeIndex</span>(output, 
                           kStaticTableSize + dynamic_index);
                <span class="hljs-keyword">continue</span>;
            }
            
            <span class="hljs-comment">// 3. å­—é¢é‡ç¼–ç ï¼ˆæ–°å¢æ¡ç›®ï¼‰</span>
            <span class="hljs-built_in">EncodeLiteral</span>(output, md.key, md.value);
            
            <span class="hljs-comment">// 4. æ’å…¥åŠ¨æ€è¡¨ï¼ˆLRUæ·˜æ±°ç­–ç•¥ï¼‰</span>
            <span class="hljs-built_in">InsertDynamicTable</span>(md.key, md.value);
        }
        
        <span class="hljs-keyword">return</span> output.<span class="hljs-built_in">JoinIntoSlice</span>();
    }
    
<span class="hljs-keyword">private</span>:
    <span class="hljs-comment">// åŠ¨æ€è¡¨å®ç°ä¸ºå¾ªç¯ç¼“å†²åŒº</span>
    <span class="hljs-keyword">class</span> <span class="hljs-title class_">DynamicTable</span> {
    <span class="hljs-keyword">public</span>:
        <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">Add</span><span class="hljs-params">(<span class="hljs-type">const</span> std::string&amp; name, 
                <span class="hljs-type">const</span> std::string&amp; value)</span> </span>{
            <span class="hljs-type">size_t</span> entry_size = <span class="hljs-number">32</span> + name.<span class="hljs-built_in">size</span>() + value.<span class="hljs-built_in">size</span>();
            
            <span class="hljs-comment">// è¡¨ç©ºé—´ç»´æŠ¤ï¼ˆRFC 7541 Â§4.1ï¼‰</span>
            <span class="hljs-keyword">while</span> (!entries_.<span class="hljs-built_in">empty</span>() &amp;&amp; 
                   (current_size_ + entry_size &gt; max_size_)) {
                <span class="hljs-built_in">EvictOldest</span>();
            }
            
            entries_.<span class="hljs-built_in">push_front</span>({name, value});
            current_size_ += entry_size;
            index_[name + <span class="hljs-string">":"</span> + value] = entries_.<span class="hljs-built_in">begin</span>();
        }
        
        <span class="hljs-function"><span class="hljs-type">size_t</span> <span class="hljs-title">Lookup</span><span class="hljs-params">(<span class="hljs-type">const</span> std::string&amp; name, 
                     <span class="hljs-type">const</span> std::string&amp; value)</span> <span class="hljs-type">const</span> </span>{
            <span class="hljs-keyword">auto</span> it = index_.<span class="hljs-built_in">find</span>(name + <span class="hljs-string">":"</span> + value);
            <span class="hljs-keyword">if</span> (it == index_.<span class="hljs-built_in">end</span>()) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
            
            <span class="hljs-comment">// è®¡ç®—ç´¢å¼•ï¼ˆ1-basedï¼‰</span>
            <span class="hljs-type">size_t</span> distance = std::<span class="hljs-built_in">distance</span>(entries_.<span class="hljs-built_in">begin</span>(), it-&gt;second);
            <span class="hljs-keyword">return</span> distance + <span class="hljs-number">1</span>;
        }
        
    <span class="hljs-keyword">private</span>:
        std::list&lt;TableEntry&gt; entries_;
        std::unordered_map&lt;std::string, 
                          std::list&lt;TableEntry&gt;::iterator&gt; index_;
        <span class="hljs-type">size_t</span> current_size_{<span class="hljs-number">0</span>};
        <span class="hljs-type">size_t</span> max_size_{<span class="hljs-number">4096</span>};  <span class="hljs-comment">// é»˜è®¤4KB</span>
    };
    
    DynamicTable dynamic_table_;
};
</code></pre>
<h3 data-id="heading-11">4.2 å¤´éƒ¨å­—æ®µçš„å¿«é€ŸæŸ¥æ‰¾</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// ä½¿ç”¨perfect hashingä¼˜åŒ–é™æ€è¡¨æŸ¥æ‰¾</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">StaticTable</span> {
    <span class="hljs-type">static</span> <span class="hljs-keyword">constexpr</span> <span class="hljs-type">size_t</span> kTableSize = <span class="hljs-number">61</span>;
    
    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">StaticEntry</span> {
        <span class="hljs-type">const</span> <span class="hljs-type">char</span>* name;
        <span class="hljs-type">const</span> <span class="hljs-type">char</span>* value;
        <span class="hljs-type">uint32_t</span> hash;  <span class="hljs-comment">// é¢„è®¡ç®—å“ˆå¸Œå€¼</span>
    };
    
    <span class="hljs-comment">// RFC 7541 Appendix Aå®šä¹‰çš„é™æ€è¡¨</span>
    <span class="hljs-type">static</span> <span class="hljs-type">const</span> StaticEntry kEntries[kTableSize] = {
        {<span class="hljs-string">":authority"</span>, <span class="hljs-string">""</span>, <span class="hljs-number">0x1d4d</span>},
        {<span class="hljs-string">":method"</span>, <span class="hljs-string">"GET"</span>, <span class="hljs-number">0x1d7e</span>},
        {<span class="hljs-string">":method"</span>, <span class="hljs-string">"POST"</span>, <span class="hljs-number">0x1d85</span>},
        <span class="hljs-comment">// ... å…¶ä»–61ä¸ªæ¡ç›®</span>
    };
    
    <span class="hljs-comment">// å®Œç¾å“ˆå¸Œå‡½æ•°ï¼ˆé¢„è®¡ç®—ï¼‰</span>
    <span class="hljs-function"><span class="hljs-type">static</span> <span class="hljs-type">uint16_t</span> <span class="hljs-title">PerfectHash</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">char</span>* name, 
                               <span class="hljs-type">const</span> <span class="hljs-type">char</span>* value)</span> </span>{
        <span class="hljs-type">uint32_t</span> hash = <span class="hljs-built_in">FNV1aHash</span>(name);
        hash = hash * <span class="hljs-number">31</span> + <span class="hljs-built_in">FNV1aHash</span>(value);
        <span class="hljs-keyword">return</span> (hash % kTableSize);
    }
    
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-type">static</span> <span class="hljs-type">size_t</span> <span class="hljs-title">Lookup</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">char</span>* name, <span class="hljs-type">const</span> <span class="hljs-type">char</span>* value)</span> </span>{
        <span class="hljs-type">uint16_t</span> index = <span class="hljs-built_in">PerfectHash</span>(name, value);
        
        <span class="hljs-comment">// ç›´æ¥åœ°å€è®¿é—®ï¼ˆO(1)æŸ¥æ‰¾ï¼‰</span>
        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">strcmp</span>(kEntries[index].name, name) == <span class="hljs-number">0</span> &amp;&amp;
            <span class="hljs-built_in">strcmp</span>(kEntries[index].value, value) == <span class="hljs-number">0</span>) {
            <span class="hljs-keyword">return</span> index + <span class="hljs-number">1</span>;  <span class="hljs-comment">// 1-basedç´¢å¼•</span>
        }
        
        <span class="hljs-comment">// å¤„ç†å“ˆå¸Œå†²çªï¼ˆçº¿æ€§æ¢æµ‹ï¼‰</span>
        <span class="hljs-keyword">for</span> (<span class="hljs-type">size_t</span> i = <span class="hljs-number">1</span>; i &lt; kTableSize; ++i) {
            <span class="hljs-type">size_t</span> probe_index = (index + i) % kTableSize;
            <span class="hljs-keyword">if</span> (<span class="hljs-built_in">strcmp</span>(kEntries[probe_index].name, name) == <span class="hljs-number">0</span> &amp;&amp;
                <span class="hljs-built_in">strcmp</span>(kEntries[probe_index].value, value) == <span class="hljs-number">0</span>) {
                <span class="hljs-keyword">return</span> probe_index + <span class="hljs-number">1</span>;
            }
        }
        
        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;  <span class="hljs-comment">// æœªæ‰¾åˆ°</span>
    }
};
</code></pre>
<h2 data-id="heading-12">5. åºåˆ—åŒ–ä¼˜åŒ–ï¼šProtocol Buffersçš„é«˜æ•ˆç¼–è§£ç </h2>
<h3 data-id="heading-13">5.1 é›¶æ‹·è´åºåˆ—åŒ–</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// src/core/lib/slice/slice_buffer.h</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">SerializationEngine</span> {
<span class="hljs-keyword">public</span>:
    <span class="hljs-comment">// é’ˆå¯¹å°æ¶ˆæ¯çš„å¿«é€Ÿè·¯å¾„</span>
    <span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> Message&gt;
    <span class="hljs-function">grpc_slice <span class="hljs-title">FastSerialize</span><span class="hljs-params">(<span class="hljs-type">const</span> Message&amp; msg)</span> </span>{
        <span class="hljs-type">size_t</span> size = msg.<span class="hljs-built_in">ByteSizeLong</span>();
        
        <span class="hljs-comment">// å°æ¶ˆæ¯ä¼˜åŒ–ï¼šæ ˆåˆ†é…ç¼“å†²åŒº</span>
        <span class="hljs-keyword">if</span> (size &lt;= kFastPathThreshold) {
            <span class="hljs-type">uint8_t</span> buffer[kFastPathThreshold];
            msg.<span class="hljs-built_in">SerializeToArray</span>(buffer, size);
            <span class="hljs-keyword">return</span> <span class="hljs-built_in">grpc_slice_from_copied_buffer</span>(
                <span class="hljs-built_in">reinterpret_cast</span>&lt;<span class="hljs-type">char</span>*&gt;(buffer), size);
        }
        
        <span class="hljs-comment">// å¤§æ¶ˆæ¯ï¼šä½¿ç”¨å®šåˆ¶åŒ–çš„å†…å­˜åˆ†é…å™¨</span>
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">SlowSerialize</span>(msg);
    }
    
    <span class="hljs-comment">// ä½¿ç”¨Arenaåˆ†é…å™¨å‡å°‘å†…å­˜ç¢ç‰‡</span>
    <span class="hljs-keyword">class</span> <span class="hljs-title class_">ArenaAllocator</span> : <span class="hljs-keyword">public</span> google::protobuf::Arena {
    <span class="hljs-keyword">public</span>:
        <span class="hljs-function"><span class="hljs-type">void</span>* <span class="hljs-title">AllocateAligned</span><span class="hljs-params">(<span class="hljs-type">size_t</span> size)</span> <span class="hljs-keyword">override</span> </span>{
            <span class="hljs-comment">// å¯¹é½åˆ°ç¼“å­˜è¡Œï¼ˆ64å­—èŠ‚ï¼‰</span>
            <span class="hljs-type">size_t</span> aligned_size = (size + <span class="hljs-number">63</span>) &amp; ~<span class="hljs-number">63</span>;
            
            <span class="hljs-comment">// ä»é¢„åˆ†é…çš„å†…å­˜å—ä¸­åˆ†é…</span>
            <span class="hljs-keyword">if</span> (current_block_ &amp;&amp; 
                current_block_offset_ + aligned_size &lt;= kBlockSize) {
                <span class="hljs-type">void</span>* ptr = current_block_ + current_block_offset_;
                current_block_offset_ += aligned_size;
                <span class="hljs-keyword">return</span> ptr;
            }
            
            <span class="hljs-comment">// åˆ†é…æ–°å—</span>
            <span class="hljs-built_in">AllocateNewBlock</span>();
            <span class="hljs-keyword">return</span> <span class="hljs-built_in">AllocateAligned</span>(size);
        }
        
    <span class="hljs-keyword">private</span>:
        <span class="hljs-type">static</span> <span class="hljs-keyword">constexpr</span> <span class="hljs-type">size_t</span> kBlockSize = <span class="hljs-number">8192</span>;  <span class="hljs-comment">// 8KBå—</span>
        <span class="hljs-type">uint8_t</span>* current_block_{<span class="hljs-literal">nullptr</span>};
        <span class="hljs-type">size_t</span> current_block_offset_{<span class="hljs-number">0</span>};
    };
};
</code></pre>
<h3 data-id="heading-14">5.2 å­—æ®µè®¿é—®ä¼˜åŒ–</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// ç”Ÿæˆçš„ä»£ç ä¸­çš„å†…è”ä¼˜åŒ–</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">GeneratedMessage</span> : <span class="hljs-keyword">public</span> Message {
<span class="hljs-keyword">public</span>:
    <span class="hljs-comment">// å†…è”å­—æ®µè®¿é—®å™¨</span>
    <span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">const</span> std::string&amp; <span class="hljs-title">field1</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>{
        <span class="hljs-comment">// ä½¿ç”¨ä½æ ‡è®°æ£€æµ‹å­—æ®µå­˜åœ¨æ€§</span>
        <span class="hljs-keyword">if</span> (_has_bits_[<span class="hljs-number">0</span>] &amp; <span class="hljs-number">0x00000001</span>u) {
            <span class="hljs-keyword">return</span> field1_;
        }
        <span class="hljs-keyword">return</span> google::protobuf::internal::<span class="hljs-built_in">GetEmptyString</span>();
    }
    
    <span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">void</span> <span class="hljs-title">set_field1</span><span class="hljs-params">(<span class="hljs-type">const</span> std::string&amp; value)</span> </span>{
        <span class="hljs-comment">// å†™æ—¶å¤åˆ¶ä¼˜åŒ–</span>
        <span class="hljs-keyword">if</span> (&amp;field1_ != &amp;value) {
            field1_.<span class="hljs-built_in">assign</span>(value.<span class="hljs-built_in">data</span>(), value.<span class="hljs-built_in">size</span>());
        }
        _has_bits_[<span class="hljs-number">0</span>] |= <span class="hljs-number">0x00000001</span>u;
    }
    
    <span class="hljs-comment">// é’ˆå¯¹æ ‡é‡å­—æ®µçš„ç‰¹åŒ–å¤„ç†</span>
    <span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> FieldType&gt;
    <span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">void</span> <span class="hljs-title">SetScalarField</span><span class="hljs-params">(<span class="hljs-type">int</span> field_number, FieldType value)</span> </span>{
        <span class="hljs-comment">// ä½¿ç”¨è·³è½¬è¡¨å¿«é€Ÿå®šä½å­—æ®µ</span>
        <span class="hljs-type">static</span> <span class="hljs-type">const</span> <span class="hljs-type">void</span>* jump_table[] = {
            &amp;&amp;field_1, &amp;&amp;field_2, &amp;&amp;field_3, <span class="hljs-comment">// ...</span>
        };
        
        <span class="hljs-keyword">if</span> (field_number &lt; <span class="hljs-built_in">sizeof</span>(jump_table)/<span class="hljs-built_in">sizeof</span>(<span class="hljs-type">void</span>*)) {
            <span class="hljs-keyword">goto</span> *jump_table[field_number];
        }
        
        <span class="hljs-keyword">return</span>;
        
    field_1:
        field1_ = <span class="hljs-built_in">static_cast</span>&lt;<span class="hljs-keyword">decltype</span>(field1_)&gt;(value);
        _has_bits_[<span class="hljs-number">0</span>] |= <span class="hljs-number">0x00000001</span>u;
        <span class="hljs-keyword">return</span>;
        
    <span class="hljs-comment">// ... å…¶ä»–å­—æ®µå¤„ç†</span>
    }
    
<span class="hljs-keyword">private</span>:
    <span class="hljs-comment">// ä½¿ç”¨ä½åŸŸç´§å‡‘å­˜å‚¨å¸ƒå°”æ ‡è®°</span>
    <span class="hljs-type">uint32_t</span> _has_bits_[<span class="hljs-number">2</span>];
    std::string field1_;
    <span class="hljs-comment">// ... å…¶ä»–å­—æ®µ</span>
};
</code></pre>
<h2 data-id="heading-15">6. å¹¶å‘æ¨¡å‹ï¼šCompletionQueueçš„æ·±åº¦è§£æ</h2>
<h3 data-id="heading-16">6.1 äº‹ä»¶é©±åŠ¨æ¶æ„</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// src/core/lib/surface/completion_queue.h</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">CompletionQueue</span> {
<span class="hljs-keyword">public</span>:
    <span class="hljs-comment">// æ ¸å¿ƒç­‰å¾…æ¥å£</span>
    <span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">Next</span><span class="hljs-params">(<span class="hljs-type">void</span>** tag, <span class="hljs-type">bool</span>* ok)</span> </span>{
        <span class="hljs-comment">// ä¹è§‚é”ä¼˜åŒ–ï¼šæ— äº‹ä»¶æ—¶å¿«é€Ÿè¿”å›</span>
        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">IsEmptyFastPath</span>()) {
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
        
        Event event;
        <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
            <span class="hljs-comment">// 1. ä»æœ¬åœ°ç¼“å­˜è·å–äº‹ä»¶</span>
            <span class="hljs-keyword">if</span> (<span class="hljs-built_in">PopFromCache</span>(&amp;event)) {
                *tag = event.tag;
                *ok = event.ok;
                <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
            }
            
            <span class="hljs-comment">// 2. ä»å…¨å±€é˜Ÿåˆ—è·å–ï¼ˆåŠ é”åŒºï¼‰</span>
            {
                <span class="hljs-function">std::unique_lock&lt;std::mutex&gt; <span class="hljs-title">lock</span><span class="hljs-params">(mutex_)</span></span>;
                <span class="hljs-keyword">if</span> (events_.<span class="hljs-built_in">empty</span>()) {
                    <span class="hljs-comment">// ç­‰å¾…æ¡ä»¶å˜é‡</span>
                    cv_.<span class="hljs-built_in">wait</span>(lock, [<span class="hljs-keyword">this</span>] { <span class="hljs-keyword">return</span> !events_.<span class="hljs-built_in">empty</span>(); });
                }
                event = std::<span class="hljs-built_in">move</span>(events_.<span class="hljs-built_in">front</span>());
                events_.<span class="hljs-built_in">pop_front</span>();
            }
            
            <span class="hljs-comment">// 3. äº‹ä»¶é¢„å¤„ç†</span>
            <span class="hljs-keyword">if</span> (<span class="hljs-built_in">ProcessEvent</span>(&amp;event)) {
                *tag = event.tag;
                *ok = event.ok;
                <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
            }
        }
    }
    
    <span class="hljs-comment">// å¼‚æ­¥äº‹ä»¶å‘å¸ƒï¼ˆæ— é”ä¼˜åŒ–ï¼‰</span>
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">AddEvent</span><span class="hljs-params">(<span class="hljs-type">void</span>* tag, <span class="hljs-type">bool</span> ok)</span> </span>{
        Event event{tag, ok};
        
        <span class="hljs-comment">// å°è¯•æ— é”å‘å¸ƒåˆ°æœ¬åœ°ç¼“å­˜</span>
        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">TryPushToCache</span>(event)) {
            <span class="hljs-keyword">return</span>;
        }
        
        <span class="hljs-comment">// å›é€€åˆ°åŠ é”å‘å¸ƒ</span>
        {
            <span class="hljs-function">std::lock_guard&lt;std::mutex&gt; <span class="hljs-title">lock</span><span class="hljs-params">(mutex_)</span></span>;
            events_.<span class="hljs-built_in">push_back</span>(event);
        }
        cv_.<span class="hljs-built_in">notify_one</span>();
    }
    
<span class="hljs-keyword">private</span>:
    <span class="hljs-comment">// æ¯ä¸ªçº¿ç¨‹çš„æœ¬åœ°ç¼“å­˜ï¼ˆé¿å…é”ç«äº‰ï¼‰</span>
    <span class="hljs-keyword">thread_local</span> <span class="hljs-type">static</span> std::vector&lt;Event&gt; local_cache_;
    
    std::mutex mutex_;
    std::condition_variable cv_;
    std::deque&lt;Event&gt; events_;
    
    <span class="hljs-comment">// æ‰¹å¤„ç†ä¼˜åŒ–ï¼šä¸€æ¬¡å¤„ç†å¤šä¸ªäº‹ä»¶</span>
    <span class="hljs-type">static</span> <span class="hljs-keyword">constexpr</span> <span class="hljs-type">size_t</span> kBatchSize = <span class="hljs-number">16</span>;
};
</code></pre>
<h3 data-id="heading-17">6.2 å¤šçº¿ç¨‹è°ƒåº¦ç­–ç•¥</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ThreadPool</span> {
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-keyword">explicit</span> <span class="hljs-title">ThreadPool</span><span class="hljs-params">(<span class="hljs-type">size_t</span> num_threads)</span> </span>{
        workers_.<span class="hljs-built_in">reserve</span>(num_threads);
        
        <span class="hljs-comment">// åˆ›å»ºå·¥ä½œçº¿ç¨‹</span>
        <span class="hljs-keyword">for</span> (<span class="hljs-type">size_t</span> i = <span class="hljs-number">0</span>; i &lt; num_threads; ++i) {
            workers_.<span class="hljs-built_in">emplace_back</span>([<span class="hljs-keyword">this</span>, i] {
                <span class="hljs-comment">// è®¾ç½®CPUäº²å’Œæ€§</span>
                <span class="hljs-built_in">SetThreadAffinity</span>(i % std::thread::<span class="hljs-built_in">hardware_concurrency</span>());
                
                <span class="hljs-comment">// å·¥ä½œå¾ªç¯</span>
                <span class="hljs-built_in">WorkerLoop</span>();
            });
        }
    }
    
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">WorkerLoop</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">while</span> (!stop_) {
            <span class="hljs-comment">// 1. ä¼˜å…ˆå¤„ç†é«˜ä¼˜å…ˆçº§ä»»åŠ¡</span>
            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">auto</span> task = high_priority_queue_.<span class="hljs-built_in">try_pop</span>()) {
                (*task)();
                <span class="hljs-keyword">continue</span>;
            }
            
            <span class="hljs-comment">// 2. å¤„ç†æ™®é€šä»»åŠ¡</span>
            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">auto</span> task = normal_queue_.<span class="hljs-built_in">try_pop</span>()) {
                (*task)();
                <span class="hljs-keyword">continue</span>;
            }
            
            <span class="hljs-comment">// 3. å·¥ä½œçªƒå–ï¼ˆwork stealingï¼‰</span>
            <span class="hljs-keyword">if</span> (<span class="hljs-built_in">StealWorkFromOtherThread</span>()) {
                <span class="hljs-keyword">continue</span>;
            }
            
            <span class="hljs-comment">// 4. ä¼‘çœ ç­‰å¾…</span>
            std::this_thread::<span class="hljs-built_in">yield</span>();
        }
    }
    
    <span class="hljs-comment">// å·¥ä½œçªƒå–ç®—æ³•</span>
    <span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">StealWorkFromOtherThread</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-comment">// éšæœºé€‰æ‹©å—å®³è€…çº¿ç¨‹</span>
        <span class="hljs-type">size_t</span> victim = <span class="hljs-built_in">RandomIndex</span>(workers_.<span class="hljs-built_in">size</span>());
        
        <span class="hljs-comment">// å°è¯•ä»å…¶é˜Ÿåˆ—ä¸­çªƒå–ä»»åŠ¡</span>
        <span class="hljs-keyword">if</span> (victim != <span class="hljs-built_in">GetCurrentThreadIndex</span>()) {
            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">auto</span> task = workers_[victim].queue_.<span class="hljs-built_in">try_steal</span>()) {
                (*task)();
                <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
            }
        }
        
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
    
<span class="hljs-keyword">private</span>:
    std::vector&lt;std::thread&gt; workers_;
    
    <span class="hljs-comment">// åŒç«¯é˜Ÿåˆ—æ”¯æŒå·¥ä½œçªƒå–</span>
    <span class="hljs-keyword">class</span> <span class="hljs-title class_">WorkStealingQueue</span> {
    <span class="hljs-keyword">public</span>:
        <span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">try_steal</span><span class="hljs-params">(std::function&lt;<span class="hljs-type">void</span>()&gt;&amp; task)</span> </span>{
            <span class="hljs-function">std::lock_guard&lt;std::mutex&gt; <span class="hljs-title">lock</span><span class="hljs-params">(mutex_)</span></span>;
            <span class="hljs-keyword">if</span> (tasks_.<span class="hljs-built_in">empty</span>()) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
            
            <span class="hljs-comment">// ä»é˜Ÿåˆ—å°¾éƒ¨çªƒå–ï¼ˆå‡å°‘å†²çªï¼‰</span>
            task = std::<span class="hljs-built_in">move</span>(tasks_.<span class="hljs-built_in">back</span>());
            tasks_.<span class="hljs-built_in">pop_back</span>();
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        }
        
    <span class="hljs-keyword">private</span>:
        std::deque&lt;std::function&lt;<span class="hljs-type">void</span>()&gt;&gt; tasks_;
        std::mutex mutex_;
    };
};
</code></pre>
<h2 data-id="heading-18">7. æµå¤„ç†ï¼šåŒå‘æµçš„é«˜çº§ä¼˜åŒ–</h2>
<h3 data-id="heading-19">7.1 æµé‡æ•´å½¢ä¸èƒŒå‹æ§åˆ¶</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">StreamFlowController</span> {
<span class="hljs-keyword">public</span>:
    <span class="hljs-comment">// åŸºäºä»¤ç‰Œæ¡¶çš„æµé‡æ•´å½¢</span>
    <span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">TryAcquireTokens</span><span class="hljs-params">(<span class="hljs-type">size_t</span> bytes)</span> </span>{
        <span class="hljs-keyword">auto</span> now = std::chrono::steady_clock::<span class="hljs-built_in">now</span>();
        
        <span class="hljs-comment">// è®¡ç®—æ–°å¢çš„ä»¤ç‰Œ</span>
        <span class="hljs-keyword">auto</span> elapsed = now - last_update_;
        <span class="hljs-type">size_t</span> new_tokens = <span class="hljs-built_in">static_cast</span>&lt;<span class="hljs-type">size_t</span>&gt;(
            elapsed.<span class="hljs-built_in">count</span>() * tokens_per_nanosecond_);
        
        <span class="hljs-comment">// æ›´æ–°ä»¤ç‰Œæ¡¶ï¼ˆæœ‰ä¸Šé™ï¼‰</span>
        current_tokens_ = std::<span class="hljs-built_in">min</span>(max_tokens_, 
                                  current_tokens_ + new_tokens);
        last_update_ = now;
        
        <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦æœ‰è¶³å¤Ÿä»¤ç‰Œ</span>
        <span class="hljs-keyword">if</span> (current_tokens_ &gt;= bytes) {
            current_tokens_ -= bytes;
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        }
        
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
    
    <span class="hljs-comment">// è‡ªé€‚åº”é€Ÿç‡é™åˆ¶</span>
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">AdjustRateBasedOnRTT</span><span class="hljs-params">(<span class="hljs-type">double</span> current_rtt)</span> </span>{
        <span class="hljs-comment">// ä½¿ç”¨AIMDï¼ˆåŠ æ€§å¢ä¹˜æ€§å‡ï¼‰ç®—æ³•</span>
        <span class="hljs-keyword">if</span> (current_rtt &gt; target_rtt_ * <span class="hljs-number">1.2</span>) {
            <span class="hljs-comment">// ç½‘ç»œæ‹¥å¡ï¼Œå‡å°‘é€Ÿç‡</span>
            tokens_per_nanosecond_ *= <span class="hljs-number">0.9</span>;  <span class="hljs-comment">// ä¹˜æ€§å‡</span>
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-comment">// ç½‘ç»œè‰¯å¥½ï¼Œç¼“æ…¢å¢åŠ é€Ÿç‡</span>
            tokens_per_nanosecond_ += <span class="hljs-number">0.01</span> * base_rate_;  <span class="hljs-comment">// åŠ æ€§å¢</span>
        }
        
        <span class="hljs-comment">// é™åˆ¶åœ¨åˆç†èŒƒå›´å†…</span>
        tokens_per_nanosecond_ = std::<span class="hljs-built_in">clamp</span>(
            tokens_per_nanosecond_,
            min_rate_,
            max_rate_);
    }
    
<span class="hljs-keyword">private</span>:
    <span class="hljs-type">double</span> tokens_per_nanosecond_{<span class="hljs-number">1.0</span>};
    <span class="hljs-type">size_t</span> current_tokens_{<span class="hljs-number">0</span>};
    <span class="hljs-type">size_t</span> max_tokens_{<span class="hljs-number">1024</span> * <span class="hljs-number">1024</span>};  <span class="hljs-comment">// 1MB</span>
    std::chrono::steady_clock::time_point last_update_;
    <span class="hljs-type">double</span> target_rtt_{<span class="hljs-number">0.1</span>};  <span class="hljs-comment">// 100msç›®æ ‡RTT</span>
};
</code></pre>
<h3 data-id="heading-20">7.2 æ¶ˆæ¯åˆå¹¶ä¸æ‰¹é‡å‘é€</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MessageBatcher</span> {
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">AddMessage</span><span class="hljs-params">(<span class="hljs-type">const</span> grpc_slice&amp; message)</span> </span>{
        <span class="hljs-function">std::lock_guard&lt;std::mutex&gt; <span class="hljs-title">lock</span><span class="hljs-params">(mutex_)</span></span>;
        
        <span class="hljs-comment">// æ·»åŠ åˆ°å½“å‰æ‰¹æ¬¡</span>
        current_batch_.<span class="hljs-built_in">push_back</span>(message);
        current_batch_size_ += <span class="hljs-built_in">GRPC_SLICE_LENGTH</span>(message);
        
        <span class="hljs-comment">// è§¦å‘å‘é€æ¡ä»¶</span>
        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">ShouldFlush</span>()) {
            <span class="hljs-built_in">FlushBatch</span>();
        }
    }
    
    <span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">ShouldFlush</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>{
        <span class="hljs-comment">// 1. æ‰¹æ¬¡å¤§å°è¾¾åˆ°é˜ˆå€¼</span>
        <span class="hljs-keyword">if</span> (current_batch_size_ &gt;= max_batch_size_) {
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        }
        
        <span class="hljs-comment">// 2. æ—¶é—´è¶…è¿‡æœ€å¤§ç­‰å¾…</span>
        <span class="hljs-keyword">auto</span> now = std::chrono::steady_clock::<span class="hljs-built_in">now</span>();
        <span class="hljs-keyword">if</span> (now - last_flush_time_ &gt; max_batch_delay_) {
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        }
        
        <span class="hljs-comment">// 3. ä¼˜å…ˆçº§æ¶ˆæ¯åˆ°è¾¾</span>
        <span class="hljs-keyword">if</span> (has_high_priority_message_) {
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        }
        
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
    
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">FlushBatch</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">if</span> (current_batch_.<span class="hljs-built_in">empty</span>()) <span class="hljs-keyword">return</span>;
        
        <span class="hljs-comment">// åˆå¹¶æ¶ˆæ¯ï¼ˆå‡å°‘HTTP/2å¸§å¼€é”€ï¼‰</span>
        <span class="hljs-keyword">auto</span> merged = <span class="hljs-built_in">MergeMessages</span>(current_batch_);
        
        <span class="hljs-comment">// å‘é€åˆå¹¶åçš„æ¶ˆæ¯</span>
        <span class="hljs-built_in">SendMergedMessage</span>(merged);
        
        <span class="hljs-comment">// é‡ç½®çŠ¶æ€</span>
        current_batch_.<span class="hljs-built_in">clear</span>();
        current_batch_size_ = <span class="hljs-number">0</span>;
        last_flush_time_ = std::chrono::steady_clock::<span class="hljs-built_in">now</span>();
        has_high_priority_message_ = <span class="hljs-literal">false</span>;
    }
    
<span class="hljs-keyword">private</span>:
    std::vector&lt;grpc_slice&gt; current_batch_;
    <span class="hljs-type">size_t</span> current_batch_size_{<span class="hljs-number">0</span>};
    std::chrono::steady_clock::time_point last_flush_time_;
    std::chrono::milliseconds max_batch_delay_{<span class="hljs-number">10</span>};  <span class="hljs-comment">// 10ms</span>
    <span class="hljs-type">size_t</span> max_batch_size_{<span class="hljs-number">16</span> * <span class="hljs-number">1024</span>};  <span class="hljs-comment">// 16KB</span>
    <span class="hljs-type">bool</span> has_high_priority_message_{<span class="hljs-literal">false</span>};
    std::mutex mutex_;
};
</code></pre>
<h2 data-id="heading-21">8. æ€§èƒ½è°ƒä¼˜å®æˆ˜</h2>
<h3 data-id="heading-22">8.1 å†…å­˜åˆ†é…ä¼˜åŒ–</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// å®šåˆ¶åŒ–çš„å†…å­˜åˆ†é…å™¨</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">GrpcAllocator</span> {
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-type">static</span> <span class="hljs-type">void</span>* <span class="hljs-title">Allocate</span><span class="hljs-params">(<span class="hljs-type">size_t</span> size)</span> </span>{
        <span class="hljs-comment">// å¤§å°åˆ†ç±»</span>
        <span class="hljs-keyword">if</span> (size &lt;= <span class="hljs-number">64</span>) <span class="hljs-keyword">return</span> <span class="hljs-built_in">SmallAlloc</span>(size);
        <span class="hljs-keyword">if</span> (size &lt;= <span class="hljs-number">4096</span>) <span class="hljs-keyword">return</span> <span class="hljs-built_in">MediumAlloc</span>(size);
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">LargeAlloc</span>(size);
    }
    
    <span class="hljs-function"><span class="hljs-type">static</span> <span class="hljs-type">void</span> <span class="hljs-title">Deallocate</span><span class="hljs-params">(<span class="hljs-type">void</span>* ptr, <span class="hljs-type">size_t</span> size)</span> </span>{
        <span class="hljs-comment">// è¿½è¸ªå†…å­˜ä½¿ç”¨æ¨¡å¼</span>
        <span class="hljs-built_in">RecordDeallocation</span>(size);
        
        <span class="hljs-comment">// æ ¹æ®å¤§å°é€‰æ‹©é‡Šæ”¾ç­–ç•¥</span>
        <span class="hljs-keyword">if</span> (size &lt;= <span class="hljs-number">64</span>) <span class="hljs-built_in">SmallDealloc</span>(ptr);
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (size &lt;= <span class="hljs-number">4096</span>) <span class="hljs-built_in">MediumDealloc</span>(ptr);
        <span class="hljs-keyword">else</span> <span class="hljs-built_in">LargeDealloc</span>(ptr);
    }
    
<span class="hljs-keyword">private</span>:
    <span class="hljs-comment">// å°å¯¹è±¡åˆ†é…ï¼šä½¿ç”¨çº¿ç¨‹æœ¬åœ°ç¼“å­˜</span>
    <span class="hljs-function"><span class="hljs-type">static</span> <span class="hljs-type">void</span>* <span class="hljs-title">SmallAlloc</span><span class="hljs-params">(<span class="hljs-type">size_t</span> size)</span> </span>{
        <span class="hljs-keyword">thread_local</span> <span class="hljs-type">static</span> SmallObjectCache cache;
        <span class="hljs-keyword">return</span> cache.<span class="hljs-built_in">Allocate</span>(size);
    }
    
    <span class="hljs-comment">// ä¸­å¯¹è±¡åˆ†é…ï¼šä½¿ç”¨å†…å­˜æ± </span>
    <span class="hljs-function"><span class="hljs-type">static</span> <span class="hljs-type">void</span>* <span class="hljs-title">MediumAlloc</span><span class="hljs-params">(<span class="hljs-type">size_t</span> size)</span> </span>{
        <span class="hljs-comment">// å¯¹é½åˆ°2çš„å¹‚æ¬¡æ–¹</span>
        <span class="hljs-type">size_t</span> aligned_size = <span class="hljs-built_in">PowerOfTwoCeiling</span>(size);
        <span class="hljs-keyword">return</span> medium_pools_[aligned_size].<span class="hljs-built_in">Allocate</span>();
    }
    
    <span class="hljs-comment">// å¤§å¯¹è±¡åˆ†é…ï¼šç›´æ¥ä½¿ç”¨ç³»ç»Ÿmalloc</span>
    <span class="hljs-function"><span class="hljs-type">static</span> <span class="hljs-type">void</span>* <span class="hljs-title">LargeAlloc</span><span class="hljs-params">(<span class="hljs-type">size_t</span> size)</span> </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">malloc</span>(size);
    }
    
    <span class="hljs-comment">// å¤§å°-&gt;æ± çš„æ˜ å°„</span>
    <span class="hljs-type">static</span> std::array&lt;FixedSizePool, 12&gt; medium_pools_;
};
</code></pre>
<h3 data-id="heading-23">8.2 ç¼“å­˜å‹å¥½è®¾è®¡</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">CacheAwareBuffer</span> {
<span class="hljs-keyword">public</span>:
    <span class="hljs-comment">// ç¡®ä¿æ•°æ®å¯¹é½åˆ°ç¼“å­˜è¡Œ</span>
    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">alignas</span>(<span class="hljs-number">64</span>) AlignedData {
        <span class="hljs-type">char</span> data[<span class="hljs-number">64</span>];
    };
    
    <span class="hljs-comment">// é¿å…false sharing</span>
    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">PaddedCounter</span> {
        std::atomic&lt;<span class="hljs-type">int64_t</span>&gt; value;
        <span class="hljs-type">char</span> padding[<span class="hljs-number">64</span> - <span class="hljs-built_in">sizeof</span>(std::atomic&lt;<span class="hljs-type">int64_t</span>&gt;)];
    };
    
    <span class="hljs-comment">// é¢„å–ä¼˜åŒ–</span>
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">PrefetchForRead</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">void</span>* addr)</span> </span>{
        <span class="hljs-comment">// æ ¹æ®CPUæ¶æ„é€‰æ‹©æœ€ä½³é¢„å–ç­–ç•¥</span>
<span class="hljs-meta">#<span class="hljs-keyword">ifdef</span> __x86_64__</span>
        _mm_prefetch(<span class="hljs-built_in">reinterpret_cast</span>&lt;<span class="hljs-type">const</span> <span class="hljs-type">char</span>*&gt;(addr), 
                    _MM_HINT_T0);
<span class="hljs-meta">#<span class="hljs-keyword">elif</span> defined(__aarch64__)</span>
        __builtin_prefetch(addr, <span class="hljs-number">0</span>, <span class="hljs-number">3</span>);  <span class="hljs-comment">// è¯»ï¼Œé«˜æ—¶é—´å±€éƒ¨æ€§</span>
<span class="hljs-meta">#<span class="hljs-keyword">endif</span></span>
    }
    
    <span class="hljs-comment">// æ•°æ®ç»“æ„å¸ƒå±€ä¼˜åŒ–</span>
    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">HotColdData</span> {
        <span class="hljs-comment">// çƒ­è·¯å¾„æ•°æ®ï¼ˆé¢‘ç¹è®¿é—®ï¼‰</span>
        <span class="hljs-type">uint64_t</span> hot_field1;
        <span class="hljs-type">uint64_t</span> hot_field2;
        
        <span class="hljs-comment">// å†·è·¯å¾„æ•°æ®ï¼ˆä¸å¸¸è®¿é—®ï¼‰</span>
        <span class="hljs-type">char</span> cold_data[<span class="hljs-number">256</span>];
        
        <span class="hljs-comment">// ç¡®ä¿çƒ­æ•°æ®åœ¨åŒä¸€ä¸ªç¼“å­˜è¡Œ</span>
        <span class="hljs-built_in">static_assert</span>(<span class="hljs-built_in">offsetof</span>(HotColdData, hot_field2) - 
                     <span class="hljs-built_in">offsetof</span>(HotColdData, hot_field1) == <span class="hljs-number">8</span>,
                     <span class="hljs-string">"Hot fields should be contiguous"</span>);
    };
};
</code></pre>
<h2 data-id="heading-24">9. ç›‘æ§ä¸è¯Šæ–­</h2>
<h3 data-id="heading-25">9.1 å†…ç½®æ€§èƒ½è¿½è¸ª</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">PerformanceTracer</span> {
<span class="hljs-keyword">public</span>:
    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">TracePoint</span> {
        <span class="hljs-type">const</span> <span class="hljs-type">char</span>* name;
        std::chrono::nanoseconds start_time;
        std::chrono::nanoseconds duration;
        <span class="hljs-type">uint64_t</span> stream_id;
    };
    
    <span class="hljs-comment">// ä½å¼€é”€çš„è¿½è¸ªï¼ˆä½¿ç”¨çº¿ç¨‹æœ¬åœ°å­˜å‚¨ï¼‰</span>
    <span class="hljs-keyword">class</span> <span class="hljs-title class_">ScopedTrace</span> {
    <span class="hljs-keyword">public</span>:
        <span class="hljs-built_in">ScopedTrace</span>(<span class="hljs-type">const</span> <span class="hljs-type">char</span>* name, <span class="hljs-type">uint64_t</span> stream_id) {
            <span class="hljs-keyword">if</span> (<span class="hljs-built_in">IsTracingEnabled</span>()) {
                start_ = std::chrono::steady_clock::<span class="hljs-built_in">now</span>();
                name_ = name;
                stream_id_ = stream_id;
            }
        }
        
        ~<span class="hljs-built_in">ScopedTrace</span>() {
            <span class="hljs-keyword">if</span> (<span class="hljs-built_in">IsTracingEnabled</span>()) {
                <span class="hljs-keyword">auto</span> end = std::chrono::steady_clock::<span class="hljs-built_in">now</span>();
                <span class="hljs-keyword">auto</span> duration = end - start_;
                
                <span class="hljs-comment">// è®°å½•åˆ°ç¯å½¢ç¼“å†²åŒº</span>
                <span class="hljs-built_in">RecordTrace</span>({name_, start_, duration, stream_id_});
            }
        }
        
    <span class="hljs-keyword">private</span>:
        std::chrono::steady_clock::time_point start_;
        <span class="hljs-type">const</span> <span class="hljs-type">char</span>* name_;
        <span class="hljs-type">uint64_t</span> stream_id_;
    };
    
    <span class="hljs-comment">// é‡‡æ ·ç‡æ§åˆ¶ï¼ˆé¿å…æ€§èƒ½å¼€é”€ï¼‰</span>
    <span class="hljs-function"><span class="hljs-type">static</span> <span class="hljs-type">bool</span> <span class="hljs-title">ShouldTrace</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-function"><span class="hljs-keyword">thread_local</span> <span class="hljs-type">static</span> std::mt19937 <span class="hljs-title">rng</span><span class="hljs-params">(std::random_device{}())</span></span>;
        <span class="hljs-keyword">thread_local</span> <span class="hljs-type">static</span> std::uniform_real_distribution&lt;&gt; <span class="hljs-built_in">dist</span>(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>);
        
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">dist</span>(rng) &lt; sampling_rate_;
    }
    
<span class="hljs-keyword">private</span>:
    <span class="hljs-type">static</span> <span class="hljs-keyword">constexpr</span> <span class="hljs-type">double</span> sampling_rate_{<span class="hljs-number">0.01</span>};  <span class="hljs-comment">// 1%é‡‡æ ·ç‡</span>
};
</code></pre>
<h3 data-id="heading-26">9.2 è¯¦ç»†çš„æŒ‡æ ‡æ”¶é›†</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MetricsCollector</span> {
<span class="hljs-keyword">public</span>:
    <span class="hljs-comment">// ç›´æ–¹å›¾ç»Ÿè®¡ï¼ˆç”¨äºå»¶è¿Ÿåˆ†æï¼‰</span>
    <span class="hljs-keyword">class</span> <span class="hljs-title class_">LatencyHistogram</span> {
    <span class="hljs-keyword">public</span>:
        <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">Record</span><span class="hljs-params">(<span class="hljs-type">double</span> latency_ms)</span> </span>{
            <span class="hljs-comment">// æŒ‡æ•°æ¡¶åˆ†å¸ƒï¼š1ms, 2ms, 4ms, 8ms, ...</span>
            <span class="hljs-type">size_t</span> bucket = <span class="hljs-number">0</span>;
            <span class="hljs-type">double</span> threshold = <span class="hljs-number">1.0</span>;
            <span class="hljs-keyword">while</span> (latency_ms &gt; threshold &amp;&amp; bucket &lt; buckets_.<span class="hljs-built_in">size</span>() - <span class="hljs-number">1</span>) {
                threshold *= <span class="hljs-number">2.0</span>;
                bucket++;
            }
            
            buckets_[bucket].<span class="hljs-built_in">fetch_add</span>(<span class="hljs-number">1</span>, std::memory_order_relaxed);
            total_count_.<span class="hljs-built_in">fetch_add</span>(<span class="hljs-number">1</span>, std::memory_order_relaxed);
            sum_.<span class="hljs-built_in">fetch_add</span>(latency_ms, std::memory_order_relaxed);
        }
        
        <span class="hljs-function"><span class="hljs-type">double</span> <span class="hljs-title">GetPercentile</span><span class="hljs-params">(<span class="hljs-type">double</span> p)</span> <span class="hljs-type">const</span> </span>{
            <span class="hljs-keyword">auto</span> target_count = <span class="hljs-built_in">static_cast</span>&lt;<span class="hljs-type">size_t</span>&gt;(total_count_.<span class="hljs-built_in">load</span>() * p);
            <span class="hljs-type">size_t</span> accumulated = <span class="hljs-number">0</span>;
            
            <span class="hljs-keyword">for</span> (<span class="hljs-type">size_t</span> i = <span class="hljs-number">0</span>; i &lt; buckets_.<span class="hljs-built_in">size</span>(); ++i) {
                accumulated += buckets_[i].<span class="hljs-built_in">load</span>();
                <span class="hljs-keyword">if</span> (accumulated &gt;= target_count) {
                    <span class="hljs-keyword">return</span> std::<span class="hljs-built_in">pow</span>(<span class="hljs-number">2.0</span>, i);  <span class="hljs-comment">// è¿”å›æ¡¶çš„ä¸Šç•Œ</span>
                }
            }
            
            <span class="hljs-keyword">return</span> std::<span class="hljs-built_in">pow</span>(<span class="hljs-number">2.0</span>, buckets_.<span class="hljs-built_in">size</span>() - <span class="hljs-number">1</span>);
        }
        
    <span class="hljs-keyword">private</span>:
        std::array&lt;std::atomic&lt;<span class="hljs-type">size_t</span>&gt;, <span class="hljs-number">64</span>&gt; buckets_{};
        std::atomic&lt;<span class="hljs-type">size_t</span>&gt; total_count_{<span class="hljs-number">0</span>};
        std::atomic&lt;<span class="hljs-type">double</span>&gt; sum_{<span class="hljs-number">0.0</span>};
    };
    
    <span class="hljs-comment">// å…³é”®æ€§èƒ½æŒ‡æ ‡</span>
    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">CoreMetrics</span> {
        LatencyHistogram rpc_latency;
        std::atomic&lt;<span class="hljs-type">uint64_t</span>&gt; requests_per_second{<span class="hljs-number">0</span>};
        std::atomic&lt;<span class="hljs-type">uint64_t</span>&gt; active_streams{<span class="hljs-number">0</span>};
        std::atomic&lt;<span class="hljs-type">uint64_t</span>&gt; total_bytes_sent{<span class="hljs-number">0</span>};
        std::atomic&lt;<span class="hljs-type">uint64_t</span>&gt; total_bytes_received{<span class="hljs-number">0</span>};
        
        <span class="hljs-comment">// é”™è¯¯ç»Ÿè®¡</span>
        std::array&lt;std::atomic&lt;<span class="hljs-type">uint64_t</span>&gt;, 
                  <span class="hljs-built_in">static_cast</span>&lt;<span class="hljs-type">size_t</span>&gt;(grpc_status_code::STATUS_CODE_COUNT)&gt;
                  error_counts{};
    };
    
    <span class="hljs-function"><span class="hljs-type">static</span> CoreMetrics&amp; <span class="hljs-title">GetGlobalMetrics</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-type">static</span> CoreMetrics metrics;
        <span class="hljs-keyword">return</span> metrics;
    }
};
</code></pre>
<h2 data-id="heading-27">10. æœ€ä½³å®è·µä¸æ€§èƒ½å¯¹æ¯”</h2>
<h3 data-id="heading-28">10.1 é…ç½®è°ƒä¼˜å»ºè®®</h3>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># é«˜æ€§èƒ½gRPCé…ç½®</span>
<span class="hljs-attr">channel_arguments:</span>
  <span class="hljs-comment"># è¿æ¥å‚æ•°</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">grpc.keepalive_time_ms:</span> <span class="hljs-number">10000</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">grpc.keepalive_timeout_ms:</span> <span class="hljs-number">5000</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">grpc.http2.max_pings_without_data:</span> <span class="hljs-number">0</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">grpc.http2.max_ping_strikes:</span> <span class="hljs-number">0</span>
  
  <span class="hljs-comment"># æµé‡æ§åˆ¶</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">grpc.http2.lookup_table_size:</span> <span class="hljs-number">4096</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">grpc.http2.max_frame_size:</span> <span class="hljs-number">16384</span>  <span class="hljs-comment"># 16KB</span>
  
  <span class="hljs-comment"># èµ„æºé™åˆ¶</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">grpc.max_concurrent_streams:</span> <span class="hljs-number">100</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">grpc.max_send_message_length:</span> <span class="hljs-number">4194304</span>  <span class="hljs-comment"># 4MB</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">grpc.max_receive_message_length:</span> <span class="hljs-number">4194304</span>
  
  <span class="hljs-comment"># æ€§èƒ½è°ƒä¼˜</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">grpc.enable_retries:</span> <span class="hljs-number">1</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">grpc.initial_reconnect_backoff_ms:</span> <span class="hljs-number">1000</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">grpc.max_reconnect_backoff_ms:</span> <span class="hljs-number">30000</span>
</code></pre>
<h3 data-id="heading-29">10.2 æ€§èƒ½åŸºå‡†æµ‹è¯•å¯¹æ¯”</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// åŸºå‡†æµ‹è¯•ç»“æœ</span>
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">BenchmarkResults</span> {
    <span class="hljs-comment">// ä¸åŒåœºæ™¯ä¸‹çš„QPSå¯¹æ¯”</span>
    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">Scenario</span> {
        <span class="hljs-type">const</span> <span class="hljs-type">char</span>* name;
        <span class="hljs-type">double</span> qps;
        <span class="hljs-type">double</span> latency_avg_ms;
        <span class="hljs-type">double</span> latency_p99_ms;
        <span class="hljs-type">double</span> cpu_usage;
    };
    
    <span class="hljs-type">static</span> <span class="hljs-type">const</span> Scenario scenarios[] = {
        <span class="hljs-comment">// gRPC vs å…¶ä»–RPCæ¡†æ¶</span>
        {<span class="hljs-string">"gRPC (HTTP/2)"</span>, <span class="hljs-number">125000</span>, <span class="hljs-number">1.2</span>, <span class="hljs-number">5.6</span>, <span class="hljs-number">45.2</span>},
        {<span class="hljs-string">"Thrift (TCP)"</span>, <span class="hljs-number">89000</span>, <span class="hljs-number">1.8</span>, <span class="hljs-number">8.2</span>, <span class="hljs-number">52.1</span>},
        {<span class="hljs-string">"REST/HTTP1.1"</span>, <span class="hljs-number">42000</span>, <span class="hljs-number">3.5</span>, <span class="hljs-number">15.7</span>, <span class="hljs-number">38.7</span>},
        {<span class="hljs-string">"WebSocket"</span>, <span class="hljs-number">68000</span>, <span class="hljs-number">2.1</span>, <span class="hljs-number">9.3</span>, <span class="hljs-number">48.9</span>},
        
        <span class="hljs-comment">// ä¸åŒæ¶ˆæ¯å¤§å°</span>
        {<span class="hljs-string">"gRPC 1KB"</span>, <span class="hljs-number">185000</span>, <span class="hljs-number">0.8</span>, <span class="hljs-number">3.2</span>, <span class="hljs-number">32.5</span>},
        {<span class="hljs-string">"gRPC 10KB"</span>, <span class="hljs-number">142000</span>, <span class="hljs-number">1.1</span>, <span class="hljs-number">4.8</span>, <span class="hljs-number">41.3</span>},
        {<span class="hljs-string">"gRPC 100KB"</span>, <span class="hljs-number">98000</span>, <span class="hljs-number">2.5</span>, <span class="hljs-number">9.7</span>, <span class="hljs-number">56.8</span>},
        {<span class="hljs-string">"gRPC 1MB"</span>, <span class="hljs-number">32000</span>, <span class="hljs-number">8.9</span>, <span class="hljs-number">28.4</span>, <span class="hljs-number">72.1</span>},
        
        <span class="hljs-comment">// å¹¶å‘åº¦å½±å“</span>
        {<span class="hljs-string">"gRPC 1 thread"</span>, <span class="hljs-number">45000</span>, <span class="hljs-number">0.9</span>, <span class="hljs-number">2.1</span>, <span class="hljs-number">25.3</span>},
        {<span class="hljs-string">"gRPC 4 threads"</span>, <span class="hljs-number">125000</span>, <span class="hljs-number">1.2</span>, <span class="hljs-number">5.6</span>, <span class="hljs-number">45.2</span>},
        {<span class="hljs-string">"gRPC 16 threads"</span>, <span class="hljs-number">285000</span>, <span class="hljs-number">1.8</span>, <span class="hljs-number">12.4</span>, <span class="hljs-number">68.7</span>},
        {<span class="hljs-string">"gRPC 64 threads"</span>, <span class="hljs-number">310000</span>, <span class="hljs-number">3.2</span>, <span class="hljs-number">25.8</span>, <span class="hljs-number">82.4</span>},
    };
    
    <span class="hljs-comment">// å†…å­˜ä½¿ç”¨å¯¹æ¯”</span>
    <span class="hljs-function"><span class="hljs-type">static</span> <span class="hljs-type">void</span> <span class="hljs-title">PrintMemoryUsage</span><span class="hljs-params">()</span> </span>{
        std::cout &lt;&lt; <span class="hljs-string">"Memory usage per connection:\n"</span>;
        std::cout &lt;&lt; <span class="hljs-string">"gRPC: 48KB (HTTP/2 multiplexing)\n"</span>;
        std::cout &lt;&lt; <span class="hljs-string">"HTTP/1.1: 128KB (no multiplexing)\n"</span>;
        std::cout &lt;&lt; <span class="hljs-string">"TCP raw: 32KB (no protocol overhead)\n"</span>;
    }
};
</code></pre>
<h2 data-id="heading-30">ç»“è®º</h2>
<p>gRPCçš„é«˜æ€§èƒ½æºäºå¤šä¸ªå±‚é¢çš„æ·±åº¦ä¼˜åŒ–ï¼šHTTP/2åè®®çš„é«˜æ•ˆåˆ©ç”¨ã€é›¶æ‹·è´åºåˆ—åŒ–ã€ç²¾ç»†çš„å¹¶å‘æ§åˆ¶ã€æ™ºèƒ½çš„æµé‡ç®¡ç†ä»¥åŠå†…å­˜å‹å¥½çš„æ•°æ®ç»“æ„è®¾è®¡ã€‚é€šè¿‡æºç å‰–æï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ç°ä»£RPCæ¡†æ¶ä¸ä»…æ˜¯ç®€å•å°è£…ç½‘ç»œé€šä¿¡ï¼Œè€Œæ˜¯åœ¨åè®®è®¾è®¡ã€ç³»ç»Ÿç¼–ç¨‹ã€ç®—æ³•ä¼˜åŒ–ç­‰å¤šä¸ªç»´åº¦ä¸Šçš„ç»¼åˆå·¥ç¨‹å®è·µã€‚</p>
<p>å¯¹äºC++åç«¯å¼€å‘è€…è€Œè¨€ï¼Œç†è§£gRPCçš„å®ç°åŸç†ä¸ä»…æœ‰åŠ©äºæ›´å¥½åœ°ä½¿ç”¨è¿™ä¸ªæ¡†æ¶ï¼Œæ›´é‡è¦çš„æ˜¯èƒ½å¤Ÿå€Ÿé‰´å…¶è®¾è®¡æ€æƒ³å’Œä¼˜åŒ–æŠ€å·§ï¼Œåº”ç”¨äºè‡ªå·±çš„ç³»ç»Ÿå¼€å‘ä¸­ã€‚æ— è®ºæ˜¯è¿æ¥æ± ç®¡ç†ã€æµé‡æ§åˆ¶ç®—æ³•ï¼Œè¿˜æ˜¯å†…å­˜åˆ†é…ç­–ç•¥ï¼ŒgRPCéƒ½æä¾›äº†å·¥ä¸šçº§çš„å‚è€ƒå®ç°ã€‚</p>
<p>åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œå»ºè®®æ ¹æ®å…·ä½“åœºæ™¯é€‰æ‹©åˆé€‚çš„é…ç½®å‚æ•°ï¼Œç»“åˆæ€§èƒ½ç›‘æ§æ•°æ®æŒç»­è°ƒä¼˜ï¼Œæ‰èƒ½å……åˆ†å‘æŒ¥gRPCçš„é«˜æ€§èƒ½æ½œåŠ›ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Android 14 ä¸­ AMS å¯¹è¿›ç¨‹ä¼˜å…ˆçº§çš„å®Œæ•´ç®¡æ§æœºåˆ¶]]></title>    <link>https://juejin.cn/post/7594096585728475136</link>    <guid>https://juejin.cn/post/7594096585728475136</guid>    <pubDate>2026-01-12T09:43:19.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594096585728475136" data-draft-id="7594000527509798953" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Android 14 ä¸­ AMS å¯¹è¿›ç¨‹ä¼˜å…ˆçº§çš„å®Œæ•´ç®¡æ§æœºåˆ¶"/> <meta itemprop="keywords" content="é¢è¯•"/> <meta itemprop="datePublished" content="2026-01-12T09:43:19.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ‡’çŒ«çˆ±ä¸Šé±¼"/> <meta itemprop="url" content="https://juejin.cn/user/325111174151821"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Android 14 ä¸­ AMS å¯¹è¿›ç¨‹ä¼˜å…ˆçº§çš„å®Œæ•´ç®¡æ§æœºåˆ¶
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/325111174151821/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ‡’çŒ«çˆ±ä¸Šé±¼
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-12T09:43:19.000Z" title="Mon Jan 12 2026 09:43:19 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    9
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ¬æ–‡åŸºäº <strong>android-14.0.0_r1 AOSP æºç </strong>ï¼Œå¯¹ <strong>AMSï¼ˆActivityManagerServiceï¼‰å¦‚ä½•åœ¨ Android 14 ä¸­ç®¡æ§è¿›ç¨‹ä¼˜å…ˆçº§ï¼ˆOOM ä¼˜å…ˆçº§ï¼‰</strong> è¿›è¡Œä¸€æ¬¡<strong>å®Œæ•´ã€ç³»ç»Ÿã€å¯è½æºç çš„æ€»ç»“</strong>ã€‚</p>
<p>é‡ç‚¹è¦†ç›–ï¼š</p>
<ul>
<li>AMS çš„è®¾è®¡å®šä½ä¸èŒè´£è¾¹ç•Œ</li>
<li>Activity å¯åŠ¨åå¦‚ä½•è§¦å‘è¿›ç¨‹ä¼˜å…ˆçº§é‡æ–°è¯„ä¼°</li>
<li>OomAdjuster çš„å®Œæ•´æ‰§è¡Œæµç¨‹ï¼ˆå« LSPï¼‰</li>
<li>OOM ä¼˜å…ˆçº§å¦‚ä½•æœ€ç»ˆå†™å…¥å†…æ ¸</li>
<li>ä¸€ä¸ªå®Œæ•´ã€ç¡®å®šçš„ Activity å¯åŠ¨ç¤ºä¾‹</li>
</ul>
<hr/>
<h2 data-id="heading-0">ä¸€ã€æ€»ä½“è®¾è®¡æ€æƒ³</h2>
<p>åœ¨ Android 14 ä¸­ï¼Œè¿›ç¨‹ä¼˜å…ˆçº§ç®¡æ§éµå¾ªä¸€ä¸ªæ¸…æ™°çš„åˆ†å±‚åŸåˆ™ï¼š</p>
<blockquote>
<p><strong>Activity / Window å†³å®š â€œç”¨æˆ·æ„ŸçŸ¥çš„é‡è¦æ€§â€ï¼ŒAMS è´Ÿè´£æŠŠè¿™ç§é‡è¦æ€§è½¬åŒ–ä¸ºå†…æ ¸å¯ç†è§£çš„ OOM ä¼˜å…ˆçº§ã€‚</strong></p>
</blockquote>
<p>ç³»ç»Ÿè¢«æ‹†åˆ†ä¸ºä¸‰å±‚èŒè´£ï¼š</p>

























<table><thead><tr><th>å±‚çº§</th><th>èŒè´£</th><th>å…³é”®æ¨¡å—</th></tr></thead><tbody><tr><td>UI / çŠ¶æ€å±‚</td><td>Activity æ˜¯å¦å¯è§ã€æ˜¯å¦å¯äº¤äº’</td><td>TaskFragment / ATS / ATMS</td></tr><tr><td>å†³ç­–å±‚</td><td>è¿›ç¨‹é‡è¦æ€§è¯„ä¼°ï¼ˆadj /procStateï¼‰</td><td>AMS / OomAdjuster</td></tr><tr><td>ç”Ÿæ•ˆå±‚</td><td>å†…æ ¸ OOM å‚æ•°å†™å…¥ä¸å›æ”¶</td><td>ProcessList / lmkd / Kernel</td></tr></tbody></table>
<p><strong>AMS ä¸ç®¡ç† Activity ç”Ÿå‘½å‘¨æœŸï¼Œåªç®¡ç† â€œè¿›ç¨‹åœ¨å†…å­˜å›æ”¶ä¸­çš„ç”Ÿæ­»é¡ºåºâ€ã€‚</strong></p>
<hr/>
<h2 data-id="heading-1">äºŒã€è¿›ç¨‹ä¼˜å…ˆçº§çš„æ ¸å¿ƒè¡¨ç¤ºæ–¹å¼</h2>
<p>Android ä½¿ç”¨ä¸¤å¥—çŠ¶æ€å…±åŒæè¿° â€œè¿›ç¨‹ä¼˜å…ˆçº§â€ã€‚</p>
<h3 data-id="heading-2">1ï¸âƒ£ oom_score_adjï¼ˆç»™å†…æ ¸ /lmkd ä½¿ç”¨ï¼‰</h3>
<ul>
<li>å–å€¼èŒƒå›´ï¼š<code>-1000 ~ +1000</code></li>
<li>å€¼è¶Šå° â†’ è¶Šä¸å®¹æ˜“è¢«æ€</li>
<li>æœ€ç»ˆå†™å…¥è·¯å¾„ï¼š<code>/proc/pid/oom_score_adj</code></li>
</ul>
<h3 data-id="heading-3">2ï¸âƒ£ procStateï¼ˆFramework å†…éƒ¨ä½¿ç”¨ï¼‰</h3>
<ul>
<li>
<p>ä¾‹å¦‚ï¼š</p>
<ul>
<li><code>PROCESS_STATE_TOP</code></li>
<li><code>PROCESS_STATE_VISIBLE</code></li>
<li><code>PROCESS_STATE_CACHED</code></li>
</ul>
</li>
<li>
<p>ç”¨é€”ï¼š</p>
<ul>
<li>OOM å†³ç­–</li>
<li>åå°é™åˆ¶</li>
<li>Job / Alarm ç­–ç•¥</li>
<li>è¿›ç¨‹ç»Ÿè®¡ï¼ˆProcessStatsï¼‰</li>
</ul>
</li>
</ul>
<hr/>
<h2 data-id="heading-4">ä¸‰ã€AMS ç®¡æ§è¿›ç¨‹ä¼˜å…ˆçº§çš„æ ¸å¿ƒç»„ä»¶</h2>
<p>åœ¨ Android 14 ä¸­ï¼ŒAMS å†…éƒ¨<strong>å”¯ä¸€è´Ÿè´£è¿›ç¨‹ä¼˜å…ˆçº§è®¡ç®—ä¸è°ƒæ•´çš„æ ¸å¿ƒç»„ä»¶æ˜¯</strong>ï¼šâ€©OomAdjuster</p>
<p>å…¶èŒè´£åŒ…æ‹¬ï¼š</p>
<ul>
<li>æ¥æ”¶ â€œéœ€è¦é‡æ–°è¯„ä¼°è¿›ç¨‹ä¼˜å…ˆçº§â€ çš„è¯·æ±‚</li>
<li>ç»Ÿä¸€è®¡ç®—è¿›ç¨‹çš„ <code>adj / procState</code></li>
<li>åˆ¤æ–­æ˜¯å¦éœ€è¦æŠŠç»“æœåŒæ­¥åˆ° lmkd</li>
<li>è§¦å‘åç½®çš„ç»Ÿè®¡è®°å½•ï¼ˆProcessStatsï¼‰</li>
</ul>
<hr/>
<h2 data-id="heading-5">å››ã€Activity å¯åŠ¨åè§¦å‘ AMS é‡æ–°è¯„ä¼°çš„çœŸå®æ‰§è¡Œé“¾è·¯</h2>
<p>åŸºäº android-14.0.0_r1 æºç ï¼Œ<strong>Activity å¯åŠ¨åè§¦å‘ AMS è¿›è¡Œè¿›ç¨‹ä¼˜å…ˆçº§æ›´æ–°çš„æ­£ç¡®é“¾è·¯æ˜¯</strong></p>
<pre><code class="hljs language-plaintext" lang="plaintext">TaskFragment.setResumedActivity
â†“
ActivityTaskSupervisor.updateTopResumedActivityIfNeeded
â†“
ActivityTaskManagerService.updateOomAdj
â†“
ActivityManagerInternal.LocalService.updateOomAdj
â†“
ActivityManagerService.updateOomAdjLocked
â†“
OomAdjuster.updateOomAdjLocked
</code></pre>
<h3 data-id="heading-6">å…³é”®ç»“è®º</h3>
<ul>
<li>Activity ç”Ÿå‘½å‘¨æœŸå˜åŒ– <strong>ä¸ä¼šè‡ªåŠ¨é€šçŸ¥ AMS</strong></li>
<li>ç”± <strong>ATMS åœ¨å…³é”®çŠ¶æ€å˜åŒ–æ—¶æ˜¾å¼è°ƒç”¨ <code>updateOomAdj</code></strong></li>
<li>AMS æ˜¯è¢«åŠ¨è¿›è¡Œ OOM é‡æ–°è¯„ä¼°ï¼Œè€Œéç›‘å¬ Activity ç”Ÿå‘½å‘¨æœŸ</li>
</ul>
<hr/>
<h2 data-id="heading-7">äº”ã€OomAdjuster å†…éƒ¨çš„å®Œæ•´æ‰§è¡Œæµç¨‹ï¼ˆAndroid 14ï¼‰</h2>
<h3 data-id="heading-8">1ï¸âƒ£ æ€»å…¥å£</h3>
<pre><code class="hljs language-java" lang="java">OomAdjuster.updateOomAdjLocked(...)
</code></pre>
<p>èŒè´£ï¼š</p>
<ul>
<li>åˆ¤æ–­æ›´æ–°èŒƒå›´ï¼ˆå•è¿›ç¨‹ / å…¨é‡ï¼‰</li>
<li>é˜²æ­¢é€’å½’å’Œé¢‘ç¹æŠ–åŠ¨</li>
<li>é©±åŠ¨åç»­æ‰§è¡Œæµç¨‹</li>
</ul>
<h3 data-id="heading-9">2ï¸âƒ£ è¿›å…¥ LSPï¼ˆLow-level Synchronized Pathï¼‰</h3>
<p><code>updateOomAdjLSP(...)</code>ç›®çš„ï¼š</p>
<ul>
<li>å‡å°‘ AMS å¤§é”æŒæœ‰æ—¶é—´</li>
<li>å°†è®¡ç®—é€»è¾‘ä¸æäº¤é€»è¾‘è§£è€¦</li>
</ul>
<h3 data-id="heading-10">3ï¸âƒ£ å®é™…æ‰§è¡Œè·¯å¾„</h3>
<pre><code class="hljs language-plaintext" lang="plaintext">updateOomAdjLSP
    â†“
performUpdateOomAdjLSP
    â†“
updateOomAdjInnerLSP
    â†“
computeOomAdjLSP   â† æ ¸å¿ƒç®—æ³•
</code></pre>
<h3 data-id="heading-11">4ï¸âƒ£ computeOomAdjLSPï¼šä¼˜å…ˆçº§è®¡ç®—æ ¸å¿ƒé€»è¾‘</h3>
<p>è®¡ç®—éµå¾ª â€œä»æœ€ä½å‡è®¾ä¸€è·¯æŠ¬å‡â€ çš„åŸåˆ™ï¼š</p>
<ol>
<li>
<p>é»˜è®¤å€¼ï¼š</p>
<ul>
<li>adj = CACHED_APP_ADJ</li>
<li>procState = PROCESS_STATE_CACHED_EMPTY</li>
</ul>
</li>
<li>
<p>Activity ç›¸å…³ï¼ˆæœ€é‡è¦ï¼‰ï¼š</p>
<ul>
<li>è¯»å– â WindowProcessController</li>
<li>â hasForegroundActivities() â†’ â FOREGROUND_APP_ADJ</li>
<li>â hasVisibleActivities() â†’ â VISIBLE_APP_ADJ</li>
</ul>
</li>
<li>
<p>Service ç›¸å…³ï¼š</p>
<ul>
<li>å‰å° Serviceï¼ˆFGSï¼‰</li>
<li>åå° Service</li>
</ul>
</li>
<li>
<p>ä¾èµ–ä¼ æ’­ï¼š</p>
<ul>
<li>â bindService () â†’ adj ç»§æ‰¿</li>
<li>â ContentProvider â†’ é“¾å¼ä¼ æ’­</li>
</ul>
</li>
<li>
<p>å¾—åˆ°æœ€ç»ˆç»“æœï¼š</p>
<ul>
<li>â curAdj</li>
<li>â curProcState</li>
</ul>
</li>
</ol>
<h3 data-id="heading-12">5ï¸âƒ£ æ˜¯å¦éœ€è¦çœŸæ­£ç”Ÿæ•ˆ</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// We don't need to apply the update for the process which didn't get computed</span>
<span class="hljs-keyword">if</span> (state.getCompletedAdjSeq() == mAdjSeq) {
  applyOomAdjLSP(app, doingAll, now, nowElapsed, oomAdjReason, <span class="hljs-literal">true</span>);
}
</code></pre>
<p>ä»…å½“ç»“æœå‘ç”Ÿå˜åŒ–æ—¶æ‰ç»§ç»­ã€‚</p>
<hr/>
<h2 data-id="heading-13">å…­ã€çœŸæ­£çš„ç”Ÿæ•ˆè·¯å¾„ï¼šapplyOomAdjLSP â†’ lmkd â†’ å†…æ ¸</h2>
<h3 data-id="heading-14">1ï¸âƒ£ applyOomAdjLSP</h3>
<p><code>ProcessList.setOomAdj(pid, uid, adj, procState)</code></p>
<h3 data-id="heading-15">2ï¸âƒ£ ProcessListï¼šsystem_server ä¸­çš„ lmkd ç›´æ¥å®¢æˆ·ç«¯</h3>
<p>åœ¨ android-14.0.0_r1 ä¸­ï¼š</p>
<ul>
<li>
<p>ProcessList åœ¨ system_server å¯åŠ¨æ—¶ï¼š</p>
<ul>
<li>é€šè¿‡ â LocalSocket</li>
<li>å»ºç«‹åˆ° â /dev/socket/lmkd çš„é•¿è¿æ¥</li>
</ul>
</li>
<li>
<p>ä¸ç»è¿‡ JNI / Binder</p>
</li>
<li>
<p>ç›´æ¥é€šè¿‡ socket å‘ lmkd å†™å…¥ OOM ä¿¡æ¯</p>
</li>
</ul>
<h3 data-id="heading-16">3ï¸âƒ£ socket åè®®ï¼ˆç®€åŒ–ï¼‰</h3>
<pre><code class="hljs language-plaintext" lang="plaintext">LMK_SET_PROC_ADJ
pid
uid
adj
procState
</code></pre>
<ul>
<li>äºŒè¿›åˆ¶åè®®</li>
<li>system_server â†’ lmkd</li>
</ul>
<h3 data-id="heading-17">4ï¸âƒ£ lmkd çš„èŒè´£</h3>
<ul>
<li>æ¥æ”¶ â LMK_SET_PROC_ADJ</li>
<li>æ›´æ–°å†…éƒ¨è¿›ç¨‹è¡¨</li>
<li>å”¯ä¸€å…è®¸å†™å…¥ â /proc//oom_score_adj çš„ç”¨æˆ·æ€è¿›ç¨‹</li>
</ul>
<hr/>
<h2 data-id="heading-18">ä¸ƒã€å®Œæ•´ç¤ºä¾‹ï¼šActivity å¯åŠ¨åçš„è¿›ç¨‹ä¼˜å…ˆçº§è°ƒæ•´ï¼ˆAndroid 14ï¼‰</h2>
<h3 data-id="heading-19">åœºæ™¯</h3>
<ul>
<li>åå°è¿›ç¨‹ Pï¼ˆcachedï¼‰</li>
<li>å¯åŠ¨ Activity A</li>
<li>A æˆä¸ºç”¨æˆ·å¯è§ã€å¯äº¤äº’çš„ Activity</li>
</ul>
<h3 data-id="heading-20">1ï¸âƒ£ Activity è¿›å…¥ Resume</h3>
<pre><code class="hljs language-plaintext" lang="plaintext">TaskFragment.setResumedActivity
    â†“
ActivityTaskSupervisor.updateTopResumedActivityIfNeeded
</code></pre>
<h3 data-id="heading-21">2ï¸âƒ£ ATMS è¯·æ±‚é‡æ–°è¯„ä¼° OOM</h3>
<pre><code class="hljs language-plaintext" lang="plaintext">ActivityTaskManagerService.updateOomAdj
    â†“
AMS.updateOomAdjLocked
</code></pre>
<h3 data-id="heading-22">3ï¸âƒ£ AMS å†…éƒ¨æ‰§è¡Œ</h3>
<pre><code class="hljs language-plaintext" lang="plaintext">OomAdjuster.updateOomAdjLocked
    â†“
updateOomAdjLSP
    â†“
computeOomAdjLSP
        â†’ hasForegroundActivities == true
        â†’ adj = FOREGROUND_APP_ADJ (0)
        â†’ procState = PROCESS_STATE_TOP
</code></pre>
<h3 data-id="heading-23">4ï¸âƒ£ ç”Ÿæ•ˆè·¯å¾„</h3>
<pre><code class="hljs language-plaintext" lang="plaintext">applyOomAdjLSP
    â†“
ProcessList.setOomAdj
    â†“
LocalSocket â†’ lmkd
    â†“
/proc/&lt;pid&gt;/oom_score_adj = 0
</code></pre>
<hr/>
<h2 data-id="heading-24">å…«ã€æœ€ç»ˆæ€»ç»“</h2>
<p>åœ¨ Android 14ï¼ˆandroid-14.0.0_r1ï¼‰ä¸­ï¼ŒAMS é€šè¿‡ OomAdjuster å¯¹è¿›ç¨‹ä¼˜å…ˆçº§è¿›è¡Œé›†ä¸­ç®¡æ§ï¼›Activity æˆä¸º Top Resumed åï¼Œç”± ATMS æ˜¾å¼è§¦å‘ OOM é‡æ–°è¯„ä¼°ï¼ŒOomAdjuster åœ¨ LSP è·¯å¾„ä¸­è®¡ç®—è¿›ç¨‹ adjï¼Œå¹¶ç”± ProcessList é€šè¿‡ socket ç›´æ¥é€šçŸ¥ lmkd å†™å…¥ â /proc/pid/oom_score_adjï¼Œä»è€Œå®Œæˆè¿›ç¨‹ä¼˜å…ˆçº§åœ¨å†…æ ¸ä¾§çš„æœ€ç»ˆç”Ÿæ•ˆï¼Œè€Œ ProcessStatsService ä»…æ‰¿æ‹…äº‹åç»Ÿè®¡è®°å½•çš„è§’è‰²ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[iOSæ—¥å¿—ç³»ç»Ÿè®¾è®¡]]></title>    <link>https://juejin.cn/post/7594168317214113802</link>    <guid>https://juejin.cn/post/7594168317214113802</guid>    <pubDate>2026-01-12T08:34:28.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594168317214113802" data-draft-id="7594270467029843995" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="iOSæ—¥å¿—ç³»ç»Ÿè®¾è®¡"/> <meta itemprop="keywords" content="æ¶æ„"/> <meta itemprop="datePublished" content="2026-01-12T08:34:28.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¼Ÿå…®"/> <meta itemprop="url" content="https://juejin.cn/user/1242923852630857"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            iOSæ—¥å¿—ç³»ç»Ÿè®¾è®¡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1242923852630857/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¼Ÿå…®
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-12T08:34:28.000Z" title="Mon Jan 12 2026 08:34:28 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">1 ä¸ºä»€ä¹ˆéœ€è¦æ—¥å¿—</h2>
<p>è½¯ä»¶ç³»ç»Ÿçš„è¿è¡Œè¿‡ç¨‹æœ¬è´¨ä¸Šæ˜¯ä¸å¯è§çš„ã€‚ç»å¤§å¤šæ•°è¡Œä¸ºå‘ç”Ÿåœ¨å†…å­˜ä¸çº¿ç¨‹ä¹‹ä¸­ã€‚åœ¨æœ¬æœºè°ƒè¯•é˜¶æ®µï¼Œæˆ‘ä»¬å¯ä»¥å€ŸåŠ©æ–­ç‚¹ã€å†…å­˜åˆ†æã€æ§åˆ¶å°ç­‰æ‰‹æ®µç›´æ¥è§‚å¯Ÿç³»ç»ŸçŠ¶æ€ï¼›è€Œä¸€æ—¦è¿›å…¥ç”Ÿäº§ç¯å¢ƒï¼Œè¿™äº›èƒ½åŠ›å‡ ä¹å…¨éƒ¨å¤±æ•ˆã€‚æ­¤æ—¶ï¼Œæ—¥å¿—æˆä¸º<strong>å”¯ä¸€èƒ½å¤Ÿè·¨è¶Šæ—¶é—´å’Œç©ºé—´çš„è§‚æµ‹æ‰‹æ®µ</strong>ã€‚</p>
<p>ä½†å¦‚æœè¿›ä¸€æ­¥è¿½é—®ï¼š<strong>æ—¥å¿—ç©¶ç«Ÿè§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Ÿ</strong> è¿™ä¸ªé—®é¢˜å¹¶æ²¡æœ‰é‚£ä¹ˆç®€å•ã€‚æ—¥å¿—çš„æ ¸å¿ƒä»·å€¼å¹¶ä¸åœ¨äºæ–‡æœ¬æœ¬èº«ï¼Œè€Œåœ¨äº<strong>å¯è§æ€§</strong>ã€‚å®ƒæœ€åŸºç¡€çš„ä½œç”¨ï¼Œæ˜¯è®©è¿™äº›ä¸å¯è§çš„è¡Œä¸ºâ€œæ˜¾å½±â€ã€‚ä¸€æ¬¡ç®€å•çš„æ—¥å¿—è¾“å‡ºï¼Œè‡³å°‘éšå«äº†ä¸‰ç±»ä¿¡æ¯ï¼šæ—¶é—´ã€ä½ç½®ã€æè¿°ã€‚</p>
<p>è¿™ä¹Ÿæ˜¯æˆ‘ä»¬ä¸å»ºè®®ä½¿ç”¨ç®€å• print çš„åŸå› ï¼šç»“æ„åŒ–æ—¥å¿—åœ¨æ¯æ¬¡è®°å½•æ—¶ï¼Œéƒ½ä¼šè‡ªåŠ¨æºå¸¦è¿™äº›å…³é”®ä¿¡æ¯ï¼Œä»è€Œå½¢æˆç¨³å®šã€å¯æ£€ç´¢çš„è§‚æµ‹æ•°æ®ã€‚</p>
<p>ä¹‹åå½“ç³»ç»Ÿè§„æ¨¡å˜å¤§ã€å¼‚æ­¥é€»è¾‘å¢å¤šæ—¶ï¼Œå•æ¡æ—¥å¿—å·²ç»å¾ˆéš¾è§£é‡Šé—®é¢˜ã€‚çœŸæ­£æœ‰ä»·å€¼çš„ï¼Œæ˜¯ä¸€ç»„æ—¥å¿—æ‰€å‘ˆç°å‡ºçš„<strong>å› æœå…³ç³»</strong>. åœ¨è¿™ä¸€å±‚é¢ä¸Šï¼Œæ—¥å¿—æ›´åƒæ˜¯<strong>äº‹ä»¶è¯æ®</strong>ï¼Œç”¨äºåœ¨äº‹åè¿˜åŸä¸€æ®µå·²ç»å‘ç”Ÿè¿‡çš„æ‰§è¡Œæµç¨‹ã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†ä»è¿™äº›é—®é¢˜å‡ºå‘ï¼Œé€æ­¥è®¨è®ºä¸€å¥—é¢å‘çœŸå®ç”Ÿäº§ç¯å¢ƒçš„æ—¥å¿—ä¸å¯è§‚æµ‹æ€§è®¾è®¡ã€‚</p>
<h2 data-id="heading-1">2 æ—¥å¿—ç³»ç»Ÿ</h2>
<p>å°½ç®¡æ—¥å¿—åœ¨å®è·µä¸­æ— å¤„ä¸åœ¨ï¼Œå®ƒæœ¬èº«ä»ç„¶å­˜åœ¨å¤©ç„¶å±€é™ï¼šæ—¥å¿—æ˜¯ç¦»æ•£çš„äº‹ä»¶ï¼Œè€Œä¸æ˜¯è¿ç»­çš„æµç¨‹;æ—¥å¿—å¤©ç„¶æ˜¯â€œäº‹åä¿¡æ¯â€ï¼Œè€Œä¸æ˜¯å®æ—¶çŠ¶æ€;åœ¨å®¢æˆ·ç«¯ç­‰å—é™ç¯å¢ƒä¸­, å¦‚ åº”ç”¨å¯èƒ½éšæ—¶è¢«æ€æ‰, å„ç§ç½‘ç»œæƒ…å†µä¸ç¨³å®š, éšç§ä¸å®‰å…¨é™åˆ¶ï¼Œæ—¥å¿—å¯èƒ½ä¸¢å¤±ã€ä¸å¯è·å–ã€ä¸å¯ä¸ŠæŠ¥ã€‚</p>
<p>è¿™æ„å‘³ç€ï¼Œ<strong>æ—¥å¿—å¹¶ä¸æ˜¯ç³»ç»ŸçœŸç›¸æœ¬èº«</strong>ï¼Œå®ƒåªæ˜¯æˆ‘ä»¬ç†è§£ç³»ç»Ÿçš„ä¸€ç§å·¥å…·ã€‚å½“ç³»ç»Ÿå¤æ‚åº¦ç»§ç»­æå‡ï¼Œä»…é â€œå¤šæ‰“æ—¥å¿—â€å¾€å¾€æ— æ³•è§£å†³æ ¹æœ¬é—®é¢˜ã€‚</p>
<h3 data-id="heading-2">2.1 èŒƒå›´ä¸åŠŸèƒ½</h3>
<p>è¿™æ ·æˆ‘ä»¬åº”è¯¥å‹¾å‹’å‡ºæ—¥å¿—ç³»ç»Ÿçš„ä¸€äº›è¾¹ç•ŒèŒƒå›´.</p>
<ol start="0">
<li>ä¸å¿…è¦æ±‚æ—¥å¿—çš„ã€Œç»å¯¹å¯é ä¸ŠæŠ¥ã€</li>
<li>ä¸é€šè¿‡æ—¥å¿—ä¿®å¤ã€Œç³»ç»Ÿè®¾è®¡é—®é¢˜ã€(ä¸šåŠ¡ä¾èµ–ã€ç”Ÿå‘½å‘¨æœŸã€æŒ‡è´£è½¬ç§»é”™è¯¯)</li>
<li>ä¸å°†æ—¥å¿—ç³»ç»Ÿæ¼”åŒ–æˆã€Œæ¶ˆæ¯ç³»ç»Ÿã€(ä¸æŒä¹…åŒ–ã€ä¸é€šè¿‡æ—¥å¿—å…œåº•)</li>
</ol>
<p>æ‰€ä»¥æˆ‘ä»¬é€šè¿‡è¾¹ç•ŒèŒƒå›´åŸºæœ¬ç¡®å®šäº†æˆ‘ä»¬æ—¥å¿—ç³»ç»Ÿçš„ä¸€äº›è¦æ±‚:</p>
<ul>
<li><strong>ç»“æ„åŒ–å¹¶éæ–‡æœ¬åŒ–:</strong> æ—¥å¿—é¦–å…ˆåº”è¯¥æ˜¯ç»“æ„åŒ–æ•°æ®ï¼Œè€Œä¸æ˜¯ç®€å•å­—ç¬¦ä¸²ã€‚æ–‡æœ¬åªæ˜¯è¡¨ç°å½¢å¼ï¼Œç»“æ„æ‰æ˜¯æ ¸å¿ƒä»·å€¼.æ¯æ¡æ—¥å¿—å¿…é¡»å…·å¤‡ç¨³å®šçš„æ—¶é—´ã€ä½ç½®ã€çº§åˆ«ä¸ä¸Šä¸‹æ–‡.æ—¥å¿—åº”å½“å¤©ç„¶æ”¯æŒæ£€ç´¢ã€è¿‡æ»¤ä¸å…³è”.</li>
<li><strong>æœ¬åœ°ä¼˜å…ˆ, è€Œéè¿œç«¯ä¾èµ–:</strong> æœ¬åœ°è®°å½•å¿…é¡»æ˜¯åŒæ­¥ã€ä½æˆæœ¬ã€ç¨³å®šçš„.è¿œç«¯ä¸ŠæŠ¥åªèƒ½æ˜¯ best-effort è¡Œä¸º.ç³»ç»Ÿä¸èƒ½å› ä¸ºè¿œç«¯æ—¥å¿—å¤±è´¥è€Œå½±å“ä¸»æµç¨‹</li>
</ul>
<h3 data-id="heading-3">2.2 ç³»ç»Ÿæ¶æ„</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5f068fdb33ad4f4082260d27ece05e79~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lyf5YWu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768811668&amp;x-signature=5UemdAfNElEryXGhxoWTAfXOa%2BU%3D" alt="LoggerSystemArchitectureDiagram.svg" loading="lazy"/></p>
<p>æˆ‘ä»¬åˆ»æ„é™åˆ¶äº†æ—¥å¿—ç³»ç»Ÿçš„èŒè´£èŒƒå›´ï¼Œä½¿å…¶å§‹ç»ˆä½œä¸ºä¸€ä¸ªæ—è·¯çš„ã€å¯é€€åŒ–çš„åŸºç¡€è®¾æ–½å­˜åœ¨ã€‚è¿™äº›çº¦æŸå¹¶éåŠŸèƒ½ç¼ºå¤±ï¼Œè€Œæ˜¯åç»­å®ç°èƒ½å¤Ÿä¿æŒç¨³å®šä¸å¯æ¼”è¿›çš„å‰æã€‚æ‰€æœ‰ä¾èµ–å…³ç³»å‡ä¸ºå•å‘ï¼šæ—¥å¿—ç³»ç»Ÿä¸ä¼šåå‘è°ƒç”¨ä¸šåŠ¡æ¨¡å—æˆ–åŸºç¡€è®¾æ–½ã€‚</p>
<h2 data-id="heading-4">3 æœ¬åœ°æ—¥å¿—</h2>
<p>åœ¨æ•´ä½“æ¶æ„ä¸­ï¼Œæœ¬åœ°æ—¥å¿—è¢«è§†ä¸ºæ•´ä¸ªæ—¥å¿—ç³»ç»Ÿä¸­<strong>æœ€åŸºç¡€ã€ä¹Ÿæ˜¯æœ€å¯é çš„ä¸€ç¯</strong>ã€‚æ— è®ºè¿œç«¯æ—¥å¿—æ˜¯å¦å¯ç”¨ã€ç½‘ç»œç¯å¢ƒæ˜¯å¦ç¨³å®šï¼Œæœ¬åœ°æ—¥å¿—éƒ½å¿…é¡»èƒ½å¤Ÿåœ¨ä»»ä½•æƒ…å†µä¸‹æ­£å¸¸å·¥ä½œã€‚</p>
<p>å› æ­¤ï¼Œåœ¨å®ç°å±‚é¢ï¼Œæˆ‘ä»¬é€‰æ‹©ä¼˜å…ˆæ„å»ºä¸€å¥—<strong>ç¨³å®šã€ä½æˆæœ¬ã€ç¬¦åˆå¹³å°ç‰¹æ€§çš„æœ¬åœ°æ—¥å¿—èƒ½åŠ›</strong>ï¼Œè€Œä¸æ˜¯ä»è¿œç«¯å¯¼å‡ºåæ¨æœ¬åœ°è®¾è®¡ã€‚</p>
<h3 data-id="heading-5">3.1 ä¸ºä»€ä¹ˆæ˜¯os.Logger</h3>
<p>åœ¨ iOS å¼€å‘é‡Œï¼Œprint å¾ˆç›´è§‚ï¼Œä½†å®ƒæ›´åƒè°ƒè¯•æ‰‹æ®µï¼šæ²¡æœ‰ç»“æ„ã€éš¾ä»¥æ£€ç´¢ã€æ€§èƒ½æˆæœ¬ä¸å¯é¢„æµ‹ï¼Œä¹Ÿæ— æ³•è¿›å…¥ç³»ç»Ÿæ—¥å¿—ä½“ç³»ã€‚è¿›å…¥ç”Ÿäº§ç¯å¢ƒåï¼Œè¿™äº›ç¼ºç‚¹ä¼šè¢«æ”¾å¤§ã€‚</p>
<p>os.Logger æ˜¯ç³»ç»Ÿçº§æ—¥å¿—é€šé“ï¼Œå®ƒçš„è®¾è®¡ç›®æ ‡æœ¬èº«å°±é¢å‘â€œå¯é•¿æœŸè¿è¡Œâ€çš„ç”Ÿäº§åœºæ™¯ã€‚æœ¬æ–‡ä¸­ï¼Œ<code>os.Logger</code> æŒ‡ Apple çš„ç³»ç»Ÿæ—¥å¿—å®ç°ï¼Œ<code>Logger</code> æŒ‡æœ¬æ–‡å°è£…çš„å¯¹å¤– APIã€‚æˆ‘ä»¬é€‰æ‹©å®ƒï¼Œä¸»è¦åŸºäºè¿™äº›åŸå› ï¼š</p>
<ul>
<li>ä½æˆæœ¬å†™å…¥ï¼šæ—¥å¿—è¢«æ‹†åˆ†ä¸ºé™æ€æ¨¡æ¿ä¸åŠ¨æ€å‚æ•°ï¼Œæ ¼å¼åŒ–å‘ç”Ÿåœ¨è¯»å–é˜¶æ®µï¼Œè€Œéå†™å…¥é˜¶æ®µ</li>
<li>ç³»ç»Ÿå·¥å…·é“¾ä¸€è‡´æ€§ï¼šå¤©ç„¶æ¥å…¥ Consoleã€Instruments ä¸ç³»ç»Ÿæ—¥å¿—é‡‡é›†å·¥å…·</li>
<li>éšç§ä¸åˆè§„èƒ½åŠ›ï¼šåŸç”Ÿæ”¯æŒéšç§çº§åˆ«æ§åˆ¶</li>
<li>ç»“æ„åŒ–ä¸Šä¸‹æ–‡ï¼šæ—¶é—´æˆ³ã€çº§åˆ«ã€åˆ†ç±»ã€æºç ä½ç½®å¯ä»¥ç¨³å®šä¿ç•™</li>
</ul>
<p>å› æ­¤ï¼Œæ—¥å¿—å¯ä»¥ä½œä¸ºâ€œé•¿æœŸå­˜åœ¨çš„åŸºç¡€èƒ½åŠ›â€ï¼Œåœ¨æ ¸å¿ƒè·¯å¾„ä¸­æŒç»­å¼€å¯ï¼Œè€Œä¸æ˜¯ä»…é™äºè°ƒè¯•é˜¶æ®µã€‚éœ€è¦è¯´æ˜çš„æ˜¯ï¼Œç³»ç»Ÿæ—¥å¿—åœ¨ç”Ÿäº§ç¯å¢ƒçš„è·å–ä¹Ÿå—å¹³å°æƒé™ä¸é‡‡é›†ç­–ç•¥é™åˆ¶ï¼Œæ‰€ä»¥å®ƒæ˜¯â€œæœ¬åœ°å¯é â€ï¼Œä½†å¹¶ä¸æ˜¯â€œè¿œç«¯ä¸‡èƒ½â€ã€‚</p>
<p>åœ¨ä½¿ç”¨å±‚é¢ï¼ŒLogger API ä¿æŒç®€å•ç›´æ¥ï¼š</p>
<pre><code class="hljs language-vbnet" lang="vbnet"><span class="hljs-keyword">let</span> logger = Logger(subsystem: <span class="hljs-string">"LoggerSystem"</span>)
logger.info(<span class="hljs-string">"Request started"</span>)
logger.<span class="hljs-keyword">error</span>(<span class="hljs-string">"Request failed"</span>, <span class="hljs-keyword">error</span>: <span class="hljs-keyword">error</span>)
</code></pre>
<h3 data-id="heading-6">3.2 é™„åŠ åŠŸèƒ½</h3>
<p>é™¤äº†ç³»ç»Ÿæ—¥å¿—çš„å³æ—¶å†™å…¥ï¼Œæˆ‘ä»¬è¿˜æä¾›äº†å‡ ä¸ªæœ¬åœ°è¯Šæ–­èƒ½åŠ›ï¼šé€šè¿‡ <code>LogStore</code> / <code>OSLogStore</code> è¿›è¡Œæ—¥å¿—æ£€ç´¢ï¼ˆæŒ‰æ—¶é—´ã€çº§åˆ«ã€åˆ†ç±»ï¼‰å¹¶æ”¯æŒå¯¼å‡ºä¸ºæ–‡æœ¬æˆ– JSONï¼›åŒæ—¶é›†æˆ <code>OSSignpost</code> / <code>OSSignposter</code> ä½œä¸ºæ€§èƒ½äº‹ä»¶è®°å½•æ–¹å¼ï¼Œç”¨äºè¡¡é‡å…³é”®è·¯å¾„è€—æ—¶ã€‚è¿™äº›èƒ½åŠ›ä¸è¿›å…¥ä¸»å†™å…¥è·¯å¾„ï¼Œåªåœ¨æ’æŸ¥ä¸åˆ†ææ—¶å¯ç”¨ã€‚</p>
<h2 data-id="heading-7">4 è¿œç«¯æ—¥å¿—ä¸ OpenTelemetry</h2>
<h3 data-id="heading-8">4.1 OpenTelemetry åœ¨å®¢æˆ·ç«¯æ—¥å¿—ç³»ç»Ÿä¸­çš„ä½ç½®</h3>
<p>OpenTelemetry ç”± CNCF æ‰˜ç®¡ï¼Œèµ·æºäº 2019 å¹´ OpenCensus ä¸ OpenTracing çš„åˆå¹¶ï¼Œå¹¶äº 2021 å¹´æˆä¸º CNCF é¡¶çº§é¡¹ç›®ã€‚å®ƒå¹¶ä¸æ˜¯æŸä¸€ä¸ªå…·ä½“ SDKï¼Œè€Œæ˜¯ä¸€å¥—<strong>ç”¨äºæè¿°å¯è§‚æµ‹æ€§æ•°æ®çš„å¼€æ”¾æ ‡å‡†</strong>ï¼Œå®šä¹‰äº†æ—¥å¿—ã€æŒ‡æ ‡ä¸é“¾è·¯è¿½è¸ªçš„ç»Ÿä¸€è¯­ä¹‰ä¸æ•°æ®æ¨¡å‹ï¼Œå¹¶é…å¥—ç»™å‡ºäº†æ ‡å‡†åŒ–çš„ä¼ è¾“åè®®ï¼ˆOTLPï¼‰ã€‚</p>
<p>åœ¨æœ¬ç« ä¸­ï¼Œæˆ‘ä»¬å¹¶ä¸è¯•å›¾å®Œæ•´è¦†ç›– OpenTelemetry çš„ä½“ç³»ï¼Œè€Œæ˜¯èšç„¦äºå…¶ä¸­ä¸<strong>è¿œç«¯æ—¥å¿—</strong>ç›¸å…³çš„éƒ¨åˆ†ï¼š</p>
<p><strong>æ—¥å¿—æ•°æ®åœ¨ OTel è¯­ä¹‰ä¸‹å¦‚ä½•è¢«ç»“æ„åŒ–ã€å¦‚ä½•è¢«åˆ†ç»„ã€ä»¥åŠå¦‚ä½•è¢«å¯¼å‡ºã€‚</strong></p>
<p>è®¤è¯ã€ä¸Šä¸‹æ–‡ä¼ æ’­ç­‰é—®é¢˜ä¼šæ˜¾è‘—å½±å“ç³»ç»Ÿä¾èµ–å…³ç³»ï¼Œæœ¬æ–‡åˆ»æ„å°†å…¶å»¶åï¼Œåœ¨ä¸‹ä¸€ç« å•ç‹¬è®¨è®ºã€‚</p>
<h5 data-id="heading-9">4.1.1 <strong>Remote Logger çš„æœ€å°é—­ç¯</strong></h5>
<p>ä¸‹å›¾å±•ç¤ºäº†åœ¨ OTel è¯­ä¹‰ä¸‹ï¼Œå®¢æˆ·ç«¯è¿œç«¯æ—¥å¿—é“¾è·¯çš„<strong>æœ€å°å¯ç”¨é—­ç¯</strong>ï¼š</p>
<p>è¿™ä¸€é—­ç¯çš„ç›®æ ‡å¹¶éâ€œå¯é æŠ•é€’â€ï¼Œè€Œæ˜¯åœ¨å®¢æˆ·ç«¯çº¦æŸæ¡ä»¶ä¸‹ï¼Œæä¾›ä¸€æ¡<strong>å¯æ§ã€å¯é€€åŒ–çš„æ—¥å¿—å¯¼å‡ºè·¯å¾„</strong>ã€‚</p>
<p>ä»æ•°æ®æµåŠ¨çš„è§’åº¦çœ‹ï¼Œè¿™æ¡é“¾è·¯å¯ä»¥è¢«æŠ½è±¡ä¸ºï¼š</p>
<pre><code class="hljs language-scss" lang="scss">LogRecord<span class="hljs-selector-attr">[]</span>
  â†’ LogRecordAdapter
  â†’ ResourceLogs / ScopeLogs / LogRecords
  â†’ ExportLogsServiceRequest (OTLP)
  â†’ OTLP Exporter (HTTP / gRPC)
</code></pre>
<p>åœ¨è¿™ä¸€ç»“æ„ä¹‹ä¸Šï¼Œå¯ä»¥æŒ‰éœ€å åŠ å¢å¼ºèƒ½åŠ›ï¼Œä¾‹å¦‚æ‰¹å¤„ç†ã€å¤±è´¥ç¼“å­˜æˆ–å»¶è¿Ÿè°ƒåº¦ï¼Œä½†è¿™äº›èƒ½åŠ›<strong>ä¸ä¼šæ”¹å˜æ—¥å¿—çš„åè®®è¯­ä¹‰</strong>ã€‚</p>
<h5 data-id="heading-10">4.1.2 <strong>ç»“æ„åŒ–ä¸åˆ†ç»„ï¼šä» LogRecord åˆ° OTel Logs</strong></h5>
<p>åœ¨ OTel æ¨¡å‹ä¸­ï¼ŒLogRecord ä»ç„¶æ˜¯æœ€å°çš„äº‹ä»¶å•å…ƒï¼Œç”¨äºæè¿°â€œå‘ç”Ÿäº†ä»€ä¹ˆâ€ã€‚</p>
<p>ä½†çœŸæ­£çš„ä¸Šä¼ ç»“æ„å¹¶ä¸æ˜¯ä¸€ç»„æ‰å¹³çš„æ—¥å¿—åˆ—è¡¨ï¼Œè€Œæ˜¯æŒ‰ä»¥ä¸‹å±‚çº§ç»„ç»‡ï¼š</p>
<ul>
<li><strong>ResourceLogs</strong>ï¼šæè¿°æ—¥å¿—äº§ç”Ÿçš„èµ„æºç¯å¢ƒï¼ˆè®¾å¤‡ã€ç³»ç»Ÿã€åº”ç”¨ï¼‰</li>
<li><strong>ScopeLogs</strong>ï¼šæè¿°äº§ç”Ÿæ—¥å¿—çš„é€»è¾‘ä½œç”¨åŸŸï¼ˆæ¨¡å—ã€åº“ï¼‰</li>
<li><strong>LogRecords</strong>ï¼šå…·ä½“çš„æ—¥å¿—äº‹ä»¶</li>
</ul>
<p>è¿™ä¸€åˆ†ç»„æ–¹å¼çš„æ„ä¹‰åœ¨äºï¼š</p>
<ul>
<li>é¿å…é‡å¤æºå¸¦ç¯å¢ƒä¿¡æ¯</li>
<li>æ˜ç¡®æ—¥å¿—çš„æ¥æºä¸å½’å±</li>
<li>ä¸ºåç«¯èšåˆä¸åˆ†ææä¾›ç¨³å®šç»“æ„</li>
</ul>
<p>åœ¨å®¢æˆ·ç«¯ä¾§ï¼Œè¿™ä¸€é˜¶æ®µé€šå¸¸é€šè¿‡ä¸€ä¸ª Adapter æˆ– Mapper å®Œæˆï¼Œå…¶èŒè´£åªæ˜¯<strong>è¯­ä¹‰æ˜ å°„</strong>ï¼Œè€Œéä¸šåŠ¡å¤„ç†ã€‚</p>
<h5 data-id="heading-11">4.1.3 <strong>æ‰¹å¤„ç†ä¸è°ƒåº¦ï¼šProcessor çš„èŒè´£è¾¹ç•Œ</strong></h5>
<p>åœ¨æ—¥å¿—è¢«ç»“æ„åŒ–ä¹‹åï¼Œä¸‹ä¸€æ­¥å¹¶ä¸æ˜¯ç«‹åˆ»å‘é€ï¼Œè€Œæ˜¯è¿›å…¥å¤„ç†é˜¶æ®µã€‚</p>
<p>LogRecordProcessor ä½äºè¿™ä¸€é˜¶æ®µçš„å…¥å£ä½ç½®ã€‚ä»¥ BatchLogRecordProcessor ä¸ºä¾‹ï¼Œå®ƒè´Ÿè´£ï¼š</p>
<ul>
<li>å°†å¤šæ¡æ—¥å¿—èšåˆä¸ºæ‰¹æ¬¡</li>
<li>æ§åˆ¶å‘é€é¢‘ç‡</li>
<li>é™ä½ç½‘ç»œä¸ç³»ç»Ÿè°ƒç”¨æˆæœ¬</li>
</ul>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒProcessor å±‚ä½“ç°çš„æ˜¯<strong>ç­–ç•¥ä½ç½®</strong>ï¼Œè€Œä¸æ˜¯åè®®é€»è¾‘ã€‚</p>
<p>å®ƒä¸å…³å¿ƒæ—¥å¿—å¦‚ä½•è¢«ç¼–ç ï¼Œä¹Ÿä¸å…³å¿ƒæœ€ç»ˆé€šè¿‡ä½•ç§æ–¹å¼å‘é€ï¼Œåªè´Ÿè´£å†³å®š<strong>ä»€ä¹ˆæ—¶å€™å€¼å¾—å°è¯•å¯¼å‡º</strong>ã€‚</p>
<h5 data-id="heading-12">4.1.4 <strong>å¯¼å‡ºè¾¹ç•Œï¼šExporter ä½œä¸ºåè®®é€‚é…å±‚</strong></h5>
<p>LogRecordExporter æ˜¯è¿œç«¯æ—¥å¿—é“¾è·¯ä¸­çš„<strong>åè®®è¾¹ç•Œ</strong>ã€‚</p>
<p>åœ¨è¿™ä¸€å±‚ä¸­ï¼Œç»“æ„åŒ–æ—¥å¿—ä¼šè¢«è½¬æ¢ä¸º OTLP å®šä¹‰çš„ ExportLogsServiceRequestï¼Œå¹¶é€šè¿‡å…·ä½“ä¼ è¾“æ–¹å¼å‘é€ã€‚å¸¸è§å®ç°åŒ…æ‹¬ï¼š</p>
<ul>
<li>OTLP/HTTP</li>
<li>OTLP/gRPC</li>
</ul>
<p>æ— è®ºé‡‡ç”¨å“ªç§æ–¹å¼ï¼ŒExporter çš„æ ¸å¿ƒèŒè´£éƒ½æ˜¯ä¸€è‡´çš„ï¼š</p>
<p><strong>ç¼–ç æ—¥å¿—ç»“æ„ï¼Œå¹¶å®Œæˆåè®®çº§å‘é€ã€‚</strong></p>
<p>å®ƒä¸æ„ŸçŸ¥ä¸šåŠ¡ä¸Šä¸‹æ–‡ï¼Œä¹Ÿä¸å‚ä¸é‡è¯•ç­–ç•¥ä¹‹å¤–çš„ç³»ç»Ÿå†³ç­–ã€‚</p>
<h3 data-id="heading-13">4.2 RemoteLogger æ¶æ„å›¾</h3>
<p>ä¸‹é¢è¿™å¼ å›¾æ˜¯ RemoteLogger åœ¨ OTel è¯­ä¹‰ä¸‹çš„æœ€å°é—­ç¯ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6f4671a010104b9095cb8ad63bd7b369~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lyf5YWu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768811668&amp;x-signature=S5tjRzrSJ8BTc9yP8ABnHLP0RdQ%3D" alt="RemoteSinkSystem.svg" loading="lazy"/></p>
<h2 data-id="heading-14">5 ä¸Šä¸‹æ–‡è¾¹ç•Œ</h2>
<p>ä» RemoteLogger å¼€å§‹çœŸæ­£å‘æ—¥å¿—çš„é‚£ä¸€åˆ»ï¼Œæ—¥å¿—ç³»ç»Ÿå°±ç¬¬ä¸€æ¬¡ç¢°åˆ°å¤–éƒ¨ä¾èµ–ï¼šé‰´æƒã€‚å®ƒä¸æ˜¯â€œå¯é€‰é™„åŠ é¡¹â€ï¼Œè€Œæ˜¯è¿œç«¯é“¾è·¯çš„å¿…ç»ä¹‹é—¨ã€‚</p>
<h3 data-id="heading-15">5.1 é‰´æƒ</h3>
<p>æ—¥å¿—ç«¯ç‚¹æ˜¯åŸºç¡€è®¾æ–½å…¥å£ï¼ˆinfra endpointï¼‰ï¼Œå®ƒçš„ç›®æ ‡æ˜¯<strong>æ§åˆ¶å†™å…¥æ¥æº</strong>ï¼Œè€Œä¸æ˜¯éªŒè¯ç”¨æˆ·èº«ä»½ã€‚å› æ­¤æ›´åˆç†çš„é‰´æƒæ–¹å¼æ˜¯ï¼šIP allowlistã€mTLSã€ingestion keyã€projectâ€‘level keyï¼Œé…åˆé‡‡æ ·ä¸é™æµã€‚è¿™äº›æœºåˆ¶ä¸ç”¨æˆ·æ€è§£è€¦ã€æ— éœ€åˆ·æ–°ã€ä¸å‚ä¸ä¸šåŠ¡æ§åˆ¶æµï¼Œä¸”å¤±è´¥ä¹Ÿä¸ä¼šå½±å“å®¢æˆ·ç«¯ä¸»æµç¨‹ã€‚</p>
<p>åœ¨è¿™ç§æ¨¡å‹ä¸‹ï¼Œæ—¥å¿—ç³»ç»Ÿåªåšä¸€ä»¶äº‹ï¼š<strong>æºå¸¦å·²å‡†å¤‡å¥½çš„å‡­è¯</strong>ã€‚å®ƒä¸ç»´æŠ¤é‰´æƒçŠ¶æ€ï¼Œä¹Ÿä¸è§¦å‘åˆ·æ–°ï¼Œæ›´ä¸ç­‰å¾…é‰´æƒå®Œæˆã€‚</p>
<h4 data-id="heading-16">5.1.1 å½“é‰´æƒè¢«å·å…¥ä¸šåŠ¡æµç¨‹</h4>
<p>é—®é¢˜å‘ç”Ÿåœ¨æ—¥å¿—å¤ç”¨ä¸šåŠ¡é‰´æƒä½“ç³»æ—¶ï¼šaccess token çŸ­æœŸã€é¢‘ç¹åˆ·æ–°ã€åˆ·æ–°ä¾èµ–ç½‘ç»œä¸ç”Ÿå‘½å‘¨æœŸï¼Œè€Œé‰´æƒå¤±è´¥æœ¬èº«åˆéœ€è¦è¢«è®°å½•ã€‚ç›´è§‰åšæ³•æ˜¯â€œåˆ·æ–°åé‡è¯•â€ï¼Œä½†è¿™ä¼šå½¢æˆå…¸å‹çš„ä¾èµ–å¾ªç¯ï¼š</p>
<pre><code class="hljs">Logger
  â†’ RemoteExporter
 Â  Â  â†’ AuthManager
 Â  Â  Â   â†’ RefreshToken
 Â  Â  Â  Â  Â  â†’ Network
 Â  Â  Â  Â  Â  Â   â†’ Logger
</code></pre>
<p>è¿™ä¸æ˜¯å®ç°å¤æ‚çš„é—®é¢˜ï¼Œè€Œæ˜¯ä¾èµ–æ–¹å‘é”™è¯¯çš„é—®é¢˜ï¼šæ—¥å¿—ç³»ç»Ÿä¾èµ–äº†æœ¬åº”è¢«å®ƒè§‚æµ‹çš„ç³»ç»Ÿï¼Œç›´æ¥é€ æˆ <strong>auth blind zoneï¼ˆé‰´æƒå¤±è´¥æœ¬èº«æ— æ³•è¢«è§‚æµ‹çš„åŒºåŸŸï¼‰</strong> ã€‚</p>
<p>ç°å®é‡Œï¼Œå¾ˆå¤šå›¢é˜Ÿä¸å¾—ä¸å¤ç”¨ä¸šåŠ¡é‰´æƒï¼Œä½†è¿™æ—¶å”¯ä¸€èƒ½åšçš„æ˜¯â€œéš”ç¦»å‰¯ä½œç”¨â€ï¼šä¸è§¦å‘åˆ·æ–°ã€ä¸é‡è¯•é‰´æƒã€å¤±è´¥å³ä¸¢å¼ƒï¼Œå¹¶ä¿æŒå‡­è¯åªè¯»ä¸çŸ­ç”Ÿå‘½å‘¨æœŸç¼“å­˜ã€‚è¿™æ ·åšæ— æ³•æ¶ˆç­é—®é¢˜ï¼Œå´èƒ½æŠŠä¾èµ–å¾ªç¯ç¼©åˆ°æœ€å°ã€‚</p>
<p>ç»“è®ºåªæœ‰ä¸€å¥ï¼š<strong>æ—¥å¿—ç³»ç»Ÿåªèƒ½æ¶ˆè´¹é‰´æƒç»“æœï¼Œä¸èƒ½æˆä¸ºé‰´æƒæµç¨‹çš„ä¸€éƒ¨åˆ†ã€‚</strong></p>
<h3 data-id="heading-17">5.2 Traceparent</h3>
<p>traceparent æ˜¯ W3C Trace Context æ ‡å‡†é‡Œçš„æ ¸å¿ƒå¤´éƒ¨ï¼Œç”¨äºè·¨è¿›ç¨‹ä¼ æ’­ Traceã€‚å®ƒä¸æ˜¯æ—¥å¿—ç³»ç»Ÿçš„ä¸€éƒ¨åˆ†ï¼Œè€Œæ˜¯â€œæµç¨‹ä¸Šä¸‹æ–‡â€çš„è½½ä½“ã€‚æ—¥å¿—ç³»ç»Ÿåªè´Ÿè´£æŠŠå®ƒæºå¸¦å‡ºå»ï¼Œè€Œä¸è´Ÿè´£ç”Ÿæˆã€ç»´æŠ¤æˆ–æ¨è¿›å®ƒã€‚</p>
<p>å®ƒçš„åŸºæœ¬ç»“æ„éå¸¸å›ºå®šï¼š</p>
<pre><code class="hljs language-python" lang="python">traceparent: {version}-{trace-<span class="hljs-built_in">id</span>}-{parent-<span class="hljs-built_in">id</span>}-{trace-flags}
</code></pre>
<ul>
<li><strong>version</strong>ï¼šç‰ˆæœ¬å·ï¼Œå½“å‰å¸¸è§ä¸º <code>00</code></li>
<li><strong>trace-id</strong>ï¼š16 å­—èŠ‚ï¼ˆ32 hexï¼‰çš„å…¨å±€ trace æ ‡è¯†</li>
<li><strong>parent-id</strong>ï¼š8 å­—èŠ‚ï¼ˆ16 hexï¼‰çš„å½“å‰ span æ ‡è¯†</li>
<li><strong>trace-flags</strong>ï¼šé‡‡æ ·ä¸è°ƒè¯•æ ‡è®°ï¼ˆå¦‚ <code>01</code> è¡¨ç¤ºé‡‡æ ·ï¼‰</li>
</ul>
<p>è¿™å››ä¸ªå­—æ®µå…±åŒå†³å®šâ€œè¿™æ¡æ—¥å¿—å±äºå“ªæ¡ traceã€å¤„äºå“ªä¸€æ®µ span ä¸Šä¸‹æ–‡â€ã€‚</p>
<h4 data-id="heading-18">5.2.1 æ„é€ ä¸ä¼ é€’</h4>
<p>åœ¨å®¢æˆ·ç«¯æ—¥å¿—ç³»ç»Ÿä¸­ï¼Œtraceparent åº”å½“è¢«è§†ä¸º<strong>å¤–éƒ¨ä¸Šä¸‹æ–‡</strong>ï¼š</p>
<ul>
<li>å®ƒç”±ä¸šåŠ¡æµç¨‹æˆ– tracing ç³»ç»Ÿç”Ÿæˆ</li>
<li>å®ƒéšç€è¯·æ±‚/äº‹ä»¶ç”Ÿå‘½å‘¨æœŸå˜åŒ–</li>
<li>å®ƒä¸ç”±æ—¥å¿—ç³»ç»Ÿåˆ›å»ºï¼Œä¹Ÿä¸ç”±æ—¥å¿—ç³»ç»Ÿç»´æŠ¤</li>
</ul>
<p>æ—¥å¿—ç³»ç»Ÿåªåšä¸€ä»¶äº‹ï¼šåœ¨æ—¥å¿—ç”Ÿæˆæˆ–å¯¼å‡ºæ—¶é™„å¸¦ traceparentï¼Œè®©åç«¯èƒ½å¤ŸæŠŠæ—¥å¿—ä¸ Trace å¯¹é½ã€‚</p>
<p>è¿™ä¹Ÿæ„å‘³ç€ï¼šæ—¥å¿—ç³»ç»Ÿä¸èƒ½å°è¯•â€œä¿®å¤â€ traceparentï¼Œä¹Ÿä¸èƒ½åœ¨ç¼ºå¤±æ—¶ä¼ªé€ å®ƒã€‚ç¼ºå¤±å°±ç¼ºå¤±ï¼Œä¼ªé€ ä¼šåˆ¶é€ é”™è¯¯çš„å› æœé“¾ã€‚</p>
<p>traceparent çš„æ„é€ æ¥è‡ª tracing ç³»ç»Ÿï¼ˆSDK æˆ–ä¸Šæ¸¸æœåŠ¡ï¼‰ï¼Œå®ƒä¼šåœ¨ä¸€æ¬¡è¯·æ±‚å¼€å§‹æ—¶ç”Ÿæˆæ–°çš„ trace-idï¼Œå¹¶åœ¨ span å˜åŒ–æ—¶æ›´æ–° parent-idã€‚æ—¥å¿—ç³»ç»Ÿåªéœ€åœ¨â€œç”Ÿæˆæ—¥å¿—çš„ç¬é—´â€è¯»å–å½“å‰ä¸Šä¸‹æ–‡å¹¶æºå¸¦å³å¯ã€‚</p>
<p>æ¢å¥è¯è¯´ï¼Œtraceparent çš„ç”Ÿå‘½å‘¨æœŸä¸æ—¥å¿—ç³»ç»Ÿæ— å…³ï¼Œè€Œä¸ä¸šåŠ¡æµç¨‹ä¸€è‡´ã€‚æ—¥å¿—ç³»ç»Ÿéœ€è¦å°Šé‡è¿™ä¸ªè¾¹ç•Œï¼Œå¦åˆ™å®ƒä¼šå†æ¬¡å˜æˆä¸»æµç¨‹çš„ä¸€éƒ¨åˆ†ã€‚</p>
<h3 data-id="heading-19">5.3 Context çš„è§’è‰²</h3>
<p>å¦‚æœè¯´ traceparent æ˜¯â€œå…·ä½“çš„ä¸Šä¸‹æ–‡è½½ä½“â€ï¼Œé‚£ä¹ˆ Context æ˜¯â€œä¸Šä¸‹æ–‡åœ¨ç³»ç»Ÿé‡Œçš„å®¹å™¨ä¸ä½œç”¨åŸŸâ€ã€‚å®ƒå›ç­”çš„ä¸æ˜¯â€œå­—æ®µé•¿ä»€ä¹ˆæ ·â€ï¼Œè€Œæ˜¯â€œè¿™ä»½ä¸Šä¸‹æ–‡ä»å“ªæ¥ã€åˆ°å“ªå»ã€ä½•æ—¶ç»“æŸâ€ã€‚</p>
<p>åœ¨æ—¥å¿—ç³»ç»Ÿé‡Œï¼ŒContext åªåº”å½“æ‰¿æ‹…ä¸¤ä»¶äº‹ï¼š</p>
<ol start="0">
<li><strong>æºå¸¦æµç¨‹ä¿¡æ¯</strong>ï¼Œè®©æ—¥å¿—å…·å¤‡å¯å…³è”æ€§</li>
<li><strong>é™å®šç”Ÿå‘½å‘¨æœŸ</strong>ï¼Œé¿å…ä¸Šä¸‹æ–‡åœ¨ç³»ç»Ÿå†…æ»ç•™</li>
</ol>
<p>è¿™æ„å‘³ç€ Context çš„è®¾è®¡é‡ç‚¹ä¸æ˜¯â€œå­˜ä»€ä¹ˆâ€ï¼Œè€Œæ˜¯â€œä½•æ—¶æ³¨å…¥ã€å¦‚ä½•ä¼ æ’­ã€ä½•æ—¶é‡Šæ”¾â€ã€‚</p>
<p>æ›´å®½æ³›åœ°çœ‹ï¼ŒContext çš„ç”Ÿå‘½å‘¨æœŸå…¶å®æ˜¯ä¸€ç§â€œä½œç”¨åŸŸå»ºæ¨¡â€ã€‚å®ƒæ—¢åƒ tracing é‡Œçš„ active spanï¼Œä¹Ÿåƒ DI é‡Œçš„ scopeï¼šè°è´Ÿè´£åˆ›å»ºã€è°è´Ÿè´£ç»“æŸã€è·¨çº¿ç¨‹å¦‚ä½•ç»§æ‰¿ï¼Œè¿™äº›éƒ½ä¼šç›´æ¥å†³å®š traceparent çš„ parent-id ä½•æ—¶å˜åŒ–ã€‚æ¢å¥è¯è¯´ï¼ŒContext çš„é—®é¢˜å¾€å¾€ä¸æ˜¯åè®®é—®é¢˜ï¼Œè€Œæ˜¯ä½œç”¨åŸŸä¸ç”Ÿå‘½å‘¨æœŸç­–ç•¥çš„é—®é¢˜ã€‚</p>
<p>Context æœ€éš¾çš„éƒ¨åˆ†å…¶å®æ˜¯ä½œç”¨åŸŸä¸æ³¨å…¥æ–¹å¼ï¼š</p>
<ul>
<li>å®ƒå’Œä¾èµ–æ³¨å…¥ï¼ˆDIï¼‰çš„å…³ç³»åº”è¯¥æ˜¯ä»€ä¹ˆ</li>
<li>åœ¨å¤šçº¿ç¨‹/å¼‚æ­¥åœºæ™¯ä¸­ï¼ŒContext çš„è¾¹ç•Œå¦‚ä½•å®šä¹‰</li>
<li>Context æ˜¯å¦åº”è¯¥æ˜¯æ˜¾å¼ä¼ å‚ï¼Œè¿˜æ˜¯éšå¼ç»‘å®š</li>
</ul>
<p>è¿™äº›é—®é¢˜æ²¡æœ‰ä¸€ä¸ªå®Œç¾ç­”æ¡ˆï¼Œéœ€è¦å›¢é˜Ÿç»™å‡ºæ¸…æ™°çš„å·¥ç¨‹çº¦å®šã€‚</p>
<h3 data-id="heading-20">5.4 ç»“è¯­</h3>
<p>è¿™å¥—æ—¥å¿—ç³»ç»Ÿçš„æ ¸å¿ƒä¸æ˜¯â€œæ›´å¤šæ—¥å¿—â€ï¼Œè€Œæ˜¯â€œæ­£ç¡®çš„è¾¹ç•Œâ€ï¼šæœ¬åœ°ä¼˜å…ˆã€è¿œç«¯æ—è·¯ã€ç»“æ„åŒ–å¯å…³è”ã€ä¸Šä¸‹æ–‡å¯æ§ã€‚çœŸæ­£å†³å®šç³»ç»Ÿç¨³å®šæ€§çš„ï¼Œä¸æ˜¯æŸä¸€ä¸ª APIï¼Œè€Œæ˜¯ä½ å¦‚ä½•å®šä¹‰ä¾èµ–æ–¹å‘ä¸ç”Ÿå‘½å‘¨æœŸã€‚æœ€åæƒ³ç•™ä¸‹çš„ä¸€å¥è¯æ˜¯ï¼š<strong>å¯è§‚æµ‹æ€§ä¸æ˜¯æ— é™çš„ï¼Œå®ƒæ°¸è¿œå—å¹³å°çº¦æŸã€‚</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸Šæ‰‹å®æ“ | Dense Bev èåˆä¼˜åŒ–æ–¹æ¡ˆ]]></title>    <link>https://juejin.cn/post/7594000527510437929</link>    <guid>https://juejin.cn/post/7594000527510437929</guid>    <pubDate>2026-01-12T10:26:28.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594000527510437929" data-draft-id="7594000527510421545" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸Šæ‰‹å®æ“ | Dense Bev èåˆä¼˜åŒ–æ–¹æ¡ˆ"/> <meta itemprop="keywords" content="ç®—æ³•,è‡ªåŠ¨é©¾é©¶"/> <meta itemprop="datePublished" content="2026-01-12T10:26:28.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åœ°å¹³çº¿å¼€å‘è€…"/> <meta itemprop="url" content="https://juejin.cn/user/1257497032132567"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸Šæ‰‹å®æ“ | Dense Bev èåˆä¼˜åŒ–æ–¹æ¡ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1257497032132567/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åœ°å¹³çº¿å¼€å‘è€…
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-12T10:26:28.000Z" title="Mon Jan 12 2026 10:26:28 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    5
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">1. ç®€ä»‹</h2>
<p>åœ¨è‡ªåŠ¨é©¾é©¶é¢†åŸŸï¼ŒBEV æ˜¯ä¸€ç§ä»ä¸Šæ–¹çœ‹å¯¹è±¡æˆ–åœºæ™¯çš„è§†è§’ï¼Œé€šè¿‡å¤šä¸ªä¸åŒè§†åœºçš„ä¼ æ„Ÿå™¨èåˆæˆ BEV ç‰¹å¾ï¼Œå¯ä»¥æä¾›è½¦è¾†å‘¨å›´ç¯å¢ƒçš„å®Œæ•´è§†å›¾ï¼Œä¾›ä¸‹æ¸¸ä»»åŠ¡ä½¿ç”¨ï¼Œä¾‹å¦‚éšœç¢ç‰©æ£€æµ‹ï¼Œè·¯å¾„è§„åˆ’ç­‰ã€‚</p>
<p>åŸºäº BEV çš„ç¯å¢ƒæ„ŸçŸ¥ç›®å‰ä¸»è¦æ˜¯æœ‰ä¸¤ç§æŠ€æœ¯è·¯çº¿ï¼Œä¸€ç§æ˜¯ä»¥ petr ä¸ºä»£è¡¨çš„ sparse bev æ–¹æ³•ï¼Œå®ƒçš„ä¸»è¦æ€è·¯æ˜¯é€šè¿‡ 3D ä½ç½®ç¼–ç å’Œ 2D çš„ç‰¹å¾ç›´æ¥ç”Ÿæˆèåˆç‰¹å¾ï¼Œå†ç”¨åŸºäº transformer çš„ decoder å®ç°ç¯å¢ƒæ„ŸçŸ¥ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸éœ€è¦æ˜¾å¼åœ°ç”Ÿæˆ Dense Bev ç‰¹å¾ï¼› å¦ä¸€ç§æ˜¯ä»¥ bevformer ä¸ºä»£è¡¨çš„ dense bev æ–¹æ³•ï¼Œè¯¥æ–¹æ³•åˆ©ç”¨å†…å¤–å‚ä¿¡æ¯å°† 2D ç‰¹å¾èåˆåˆ°ä¸€ä¸ª BEV ç‰¹å¾ï¼Œå†ç”¨ BEV ç‰¹å¾æ¥è¿›è¡Œåç»­çš„æ„ŸçŸ¥æˆ–è§„åˆ’ä»»åŠ¡ã€‚åŸºäº Dense Bev çš„æ–¹æ³•ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿0000000åœ°å®ç°å¤šä¼ æ„Ÿå™¨èåˆå’Œå¤šä»»åŠ¡é¢„æµ‹ï¼Œå› æ­¤åœ¨è‡ªåŠ¨é©¾é©¶é¢†åŸŸè¢«å¹¿æ³›åº”ç”¨ã€‚</p>
<p>åœ°å¹³çº¿é¢å‘æ™ºé©¾åœºæ™¯æ¨å‡ºçš„å¾ç¨‹ 6 ç³»åˆ—ï¼ˆJ6ï¼‰èŠ¯ç‰‡ï¼Œåœ¨æä¾›å¼ºå¤§ç®—åŠ›çš„åŒæ—¶å¸¦æ¥äº†æè‡´çš„æ€§ä»·æ¯”ã€‚BEVFormer æ˜¯å½“å‰çƒ­é—¨çš„è‡ªåŠ¨é©¾é©¶ç³»ç»Ÿä¸­çš„ 3D è§†è§‰æ„ŸçŸ¥ä»»åŠ¡æ¨¡å‹ï¼Œæˆ‘ä»¬åŸºäº BevFormer ä¸å¾ç¨‹ 6 èŠ¯ç‰‡ï¼Œä¼˜åŒ–äº†å¤šè§†å›¾èåˆç”Ÿæˆ Dense Bev ç‰¹å¾çš„æ–¹æ¡ˆï¼Œè¿›ä¸€æ­¥æå‡åŸºäº Dense Bev çš„ç®—æ³•æ¨ç†æ•ˆç‡ã€‚æœ¬æ–‡å°†è¯¦ç»†ä»‹ç»å‚è€ƒç®—æ³•å¯¹ BevFormer ä¸­ ViewTransformer ä¼˜åŒ–æ–¹æ³•ä»¥åŠæ¨¡å‹ç«¯ä¾§çš„è¡¨ç°ã€‚</p>
<h2 data-id="heading-1">2. æ€§èƒ½ç²¾åº¦æŒ‡æ ‡</h2>
<p><img src="http://openwrite.cn/uploads/19742/58296/e1eae5b6-9d94-4bfb-b7b2-8998ff324701.png" alt="image.png" loading="lazy"/></p>
<blockquote>
<ol>
<li>BEVFormer ä¸ºå‚è€ƒç®—æ³• V1.0 ç‰ˆæœ¬ï¼ŒBEVFormer-OPT ä¸ºä¼˜åŒ–åçš„å‚è€ƒç®—æ³• V2.0 ç‰ˆæœ¬</li>
</ol>
<p>ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.horizon.auto%2Fblog%2F10006" target="_blank" title="https://developer.horizon.auto/blog/10006" ref="nofollow noopener noreferrer">åœ°å¹³çº¿ 3D ç›®æ ‡æ£€æµ‹ Bevformer å‚è€ƒç®—æ³•-V2.0</a>ï¼‰ï¼›</p>
<ol start="2">
<li>BEVFormer-OPT ä½¿ç”¨äº† Dense Bev çš„ä¼˜åŒ–æ–¹æ¡ˆï¼›</li>
</ol>
</blockquote>
<h2 data-id="heading-2">3.ä¼˜åŒ–æ–¹æ³•ä»‹ç»</h2>
<h3 data-id="heading-3">3.1 æ•´ä½“æ¶æ„</h3>
<p>æœ¬æ–‡çš„ Dense Bev æ–¹æ¡ˆæ˜¯åŸºäº BevFormer çš„æ¨¡å‹ç»“æ„è¿›è¡Œä¼˜åŒ–è€Œæ¥ï¼Œå‚è€ƒç®—æ³• BevFormer ä»‹ç»è§<a href="https://link.juejin.cn?target=https%3A%2F%2Fauto-developer.horizon.cc%2FdeveloperForum%3FfullPath%3D%2Fhome%2Fcommunity%2Fbbsdetail%3Fbid%3D617255194813960192" target="_blank" title="https://auto-developer.horizon.cc/developerForum?fullPath=/home/community/bbsdetail?bid=617255194813960192" ref="nofollow noopener noreferrer">åœ°å¹³çº¿ 3D ç›®æ ‡æ£€æµ‹ Bevformer å‚è€ƒç®—æ³•-V1.0</a>ï¼Œ è¿™é‡Œä¸å†èµ˜è¿°ã€‚</p>
<p><img src="https://mcnsakkce4vm.feishu.cn/space/api/box/stream/download/asynccode/?code=ZDY2NWIxNTA4NjhjNDFlMTVlZTE2NTMyZmQwNzYzNmVfY1ZlenhCcmVBczBrMHJsYnNTS2RWNG5JU0pmbVlzc0ZfVG9rZW46SXh5SGJ4ZjBlb1ZwYXF4NmZsOGNEQW1YbmpiXzE3Njc3MDk0MTk6MTc2NzcxMzAxOV9WNA" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/06d2c1e8b3a04418b100014de8d66071~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Zyw5bmz57q_5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768819451&amp;x-signature=tEyiUCHgF5NPmhG0SAahlaurdcc%3D" alt="aW1hZ2U=.png" loading="lazy"/>
åœ¨ BevFormer ä¸­ï¼ŒSpatialCrossAttention æ¨¡å—æ˜¯ç”¨æ¥åšç©ºé—´èåˆçš„ï¼Œå³å°†å¤šä¸ª 2D è§†å›¾ç‰¹å¾èåˆæˆ Bev ç‰¹å¾ï¼Œç”±äºå…¬ç‰ˆçš„ BevMask ä¼šæ ¹æ®å†…å¤–å‚è¿›è¡ŒåŠ¨æ€å˜åŒ–ï¼Œè¿›è€Œå¯¼è‡´æ¨¡å‹ä¸­å‡ºç°åŠ¨æ€ Shapeï¼Œå¯¹éƒ¨ç½²éå¸¸ä¸å‹å¥½ï¼Œå› æ­¤åœ¨ V1 ç‰ˆæœ¬ä¸­æˆ‘ä»¬ç›´æ¥å»æ‰äº† BevMaskï¼Œè™½ç„¶å¯¹éƒ¨ç½²æ›´å‹å¥½äº†ï¼Œä½†æ˜¯ SpatialCrossAttention æ¨¡å—å¤šäº†å¾ˆå¤šå†—ä½™çš„è®¡ç®—å’Œ IOï¼Œå¯¹æ€§èƒ½å½±å“å¾ˆå¤§ã€‚æ•´ä½“æ¡†æ¶å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3c5c5df9a5744b3dbc67b8e02bd65c6d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Zyw5bmz57q_5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768819451&amp;x-signature=ieOsuGvddzkfQclMmUJrvCqxk%2FE%3D" alt="MQ==.png" loading="lazy"/></p>
<h3 data-id="heading-4">3.2 æ–¹æ¡ˆä¼˜åŒ–ç‚¹</h3>
<h4 data-id="heading-5">3.2.1 ä½¿ç”¨ BevMask</h4>
<p>åœ¨ä¼˜åŒ–æ–¹æ¡ˆä¸­ï¼Œæˆ‘ä»¬å¯¹å†…å¤–å‚ç”Ÿæˆ BevMask çš„åŸç†åšäº†è¯¦ç»†çš„åˆ†æï¼Œå‘ç°ï¼š</p>
<ol>
<li>å½“ç›¸æœºä¼ æ„Ÿå™¨ä½ç½®å›ºå®šæ—¶ï¼Œå†…å¤–å‚è½¬æ¢çŸ©é˜µå³å›ºå®šï¼Œè½»å¾®æŠ–åŠ¨å¯¹ BevMask å½±å“ä¸å¤§ã€‚</li>
<li>ä» BEV voxel çš„è§’åº¦æ¥çœ‹ï¼Œä¸­å¿ƒç‚¹åˆ° multi camera çš„æ˜ å°„æ˜¯ç¨€ç–çš„ï¼Œåœ¨ BevFormer å¼€æºçš„ä»£ç å’Œæ¨¡å‹ä¸­ï¼Œé»˜è®¤åˆ©ç”¨äº†è¿™ä¸ªç‰¹æ€§ï¼ŒåŠ é€Ÿè®¡ç®—è€Œä¸ä¼šå¸¦æ¥ä»»ä½•ç²¾åº¦æŸå¤±ï¼ˆä¹Ÿå°±æ˜¯ä¸Šé¢è¯´çš„ bev_maskï¼‰</li>
<li>ä» BEV pillar çš„è§’åº¦æ¥çœ‹ï¼Œé€šå¸¸æ¯ä¸ª pillar åªä¼šæ˜ å°„åˆ° 1-2 ä¸ª cameraï¼Œå¦‚ä¸Šå›¾å³ä¸Šè§’æ‰€ç¤ºã€‚</li>
</ol>
<p>åˆ©ç”¨åˆ°ä¸Šé¢çš„å‡ ä¸ªç‰¹æ€§æˆ‘ä»¬å¯ä»¥å‡å°‘ç©ºé—´èåˆæ¨¡å—çš„å¤æ‚åº¦ï¼Œä½†éœ€è¦å¼•å…¥ä¸€å¯¹ gather/scatter æ“ä½œï¼Œä»¥åŠç›¸å…³çš„ index è®¡ç®—ã€‚å³å…ˆé€šè¿‡ gather å°† bev ç©ºé—´ä¸Šçš„æœ‰æ•ˆç‚¹å–å‡ºæ¥ï¼Œè®¡ç®—å®Œç©ºé—´ç‰¹å¾èåˆåï¼Œå†ç”¨ scatter å°†å…¶è¿˜åŸåˆ° Bev ç©ºé—´å¯¹åº”çš„ä½ç½®ï¼Œç„¶åæ ¹æ®æ¯ä¸ª bevpillar çš„æœ‰æ•ˆç‚¹æ•°æ¥ç®— Bev ç©ºé—´æ¯ä¸ªç‚¹çš„å‡å€¼å³å¯ã€‚</p>
<p>æ•´ä½“æ¡†æ¶å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3fa24588598c45a993a95557de9244dd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Zyw5bmz57q_5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768819451&amp;x-signature=kUB1hOvyBu%2FmEwL%2B6tsfZMhHlZk%3D" alt="Mg==.png" loading="lazy"/></p>
<p>ä¸ºäº†èƒ½ç¼–è¯‘æˆé™æ€æ¨¡å‹ï¼Œæœ‰ 2 ä¸ªé¢å¤–éœ€è¦å…³æ³¨çš„è®¾ç½®ï¼š</p>
<ol>
<li>Bev ç©ºé—´æ˜ å°„åˆ°æ¯ä¸ª camera çš„æœ€å¤§ç‚¹æ•°ã€‚è¿™ä¸ªå¯ä»¥æ ¹æ®å†…å¤–å‚è®¡ç®—å¾—åˆ°ï¼Œä½†ä¸ºäº†åº”å¯¹ä¸€äº›æŠ–åŠ¨æƒ…å†µï¼Œå¯ä»¥é€‚å½“æ”¾å¼€ï¼Œåœ¨ Nuscenes æ•°æ®é›†ä¸Šï¼Œ50*50 å¤§å°çš„ Bevsize ä¸‹ï¼Œæˆ‘ä»¬è®¾ç½®ä¸º 20*32ã€‚ è¿™ä¸ªæ•°å­—ç›´è§‚ç†è§£å°±æ˜¯ï¼Œæœ€å¤§è§†åœºçš„ç›¸æœºåœ¨ Bev ç©ºé—´è¦†ç›–çš„åŒºåŸŸå¤§å°ã€‚</li>
<li>æ¯ä¸ª BEV pillar æ˜ å°„åˆ°çš„æœ€å¤§çš„ camera æ•°ã€‚ç›®å‰æ˜¯ä¸€ä¸ªé™æ€è®¾ç½®çš„æœ€å¤§å€¼ï¼Œå¯ä»¥æ ¹æ®æ•°æ®ç»Ÿè®¡å¾—åˆ°ï¼Œåœ¨ Nuscenes æ•°æ®é›†ä¸­ï¼Œæˆ‘ä»¬è®¾å®šä¸º 2ï¼Œ è¿™ä¸ªæ•°å­—ç›´è§‚ç†è§£å°±æ˜¯æœ‰è§†é‡é‡å çš„æœ€å¤§ camera æ•°ã€‚</li>
</ol>
<p>ä»£ç å‡åœ¨ç®—æ³•åŒ…ä½ç½®ï¼š</p>
<p>hat/models/task_modules/bevformer/attention.py</p>
<pre><code class="hljs language-Plain" lang="Plain"># å¯¹è¾“å…¥çš„Bevqueryå’Œreference_pointså–å‡ºæœ‰æ•ˆç‚¹
def rebatch_attention_inputs(
    self,
    query: Tensor,
    queries_rebatch_grid: Tensor,
    reference_points_rebatch: Tensor,
) -&gt; Tuple[Tensor, Tensor]:
    """Rebatch the attention inputs."""
    bs = query.shape[0]
    ...
    return queries_rebatch, reference_points_rebatch
 
 # å°†SpatialCrossAttentionæ¨¡å—çš„è¾“å‡ºæ˜ å°„ä¼šBevfeatä¸Šï¼Œå¹¶æ±‚å‡å€¼
def restore_outputs(
    self,
    restore_bev_grid: Tensor,
    queries_out: Tensor,
    counts: Tensor,
    bs: int,
    queries_rebatch_grid: Tensor,
):
    """Restore outputs to bev feature."""
    queries_out = queries_out.reshape(
        bs, self.num_cams, self.embed_dims, -1
    )
    ...
    return slots
</code></pre>
<h4 data-id="heading-6">3.2.2 ä½¿ç”¨ Gridsample é«˜æ•ˆå®ç° Gather å’Œ Scatter</h4>
<p>gather/scatter è¿™ä¸€å¯¹æ“ä½œåœ¨ BPU ä¸Šä¸æ˜¯å¾ˆå‹å¥½ï¼Œé€šè¿‡åˆ†æè¿™å¯¹æ“ä½œçš„ index æˆ‘ä»¬å‘ç°å¯ä»¥æ¢æˆ BPU æ›´å‹å¥½çš„æ–¹å¼ï¼Œå³ä½¿ç”¨ Gridsample æ¥å®ç°è¿™ä¸€å¯¹æ“ä½œã€‚Index åªå— camera å†…å¤–å‚çš„å½±å“ï¼Œè€Œå¾€å¾€å†…å¤–å‚çš„å˜åŒ–æ˜¯éå¸¸ä½é¢‘çš„ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠ index ç”Ÿæˆçš„é€»è¾‘æ”¾åœ¨å‰å¤„ç†ï¼ŒæŒ‰éœ€è§¦å‘è®¡ç®—ï¼Œå†æŠŠç”Ÿæˆå¥½çš„ index è½¬æ¢ä¸ºå¯¹åº” Gridsample éœ€è¦çš„ grid ä½œä¸ºæ¨¡å‹è¾“å…¥ç»™åˆ°æ¨¡å‹ï¼Œä¾› Gridsample ç®—å­ç›´æ¥ä½¿ç”¨ï¼Œä»£ç å‡åœ¨ç®—æ³•åŒ…ä½ç½®ï¼š</p>
<p>hat/models/task_modules/bevformer/view_transformer.py</p>
<ol>
<li>æ ¹æ® Gather çš„ Index è®¡ç®— Gridsample çš„ Gridï¼š</li>
</ol>
<pre><code class="hljs language-Plain" lang="Plain">bev_mask = bev_mask.permute(2, 1, 3, 0, 4).squeeze(-1)
max_len = self.virtual_bev_h * self.virtual_bev_w
queries_rebatch_grid = reference_points_cam.new_zeros(
    [B * self.numcam, self.virtual_bev_h, self.virtual_bev_w, 2]
)
...
reference_points_rebatch = (
    reference_points_cam.flatten(-2)
    .permute(1, 0, 3, 2)
    .flatten(0, 1)
    .reshape(B * self.numcam, D * 2, self.bev_h, self.bev_w)
)
</code></pre>
<ol start="2">
<li>æ ¹æ® Scatter çš„ Index è®¡ç®— Gridsample çš„ Grid å’Œ æ¯ä¸ª Bev Pillar å¯¹åº”çš„æœ‰æ•ˆç‚¹æ•°ï¼š</li>
</ol>
<pre><code class="hljs language-Plain" lang="Plain">bev_mask_ori = bev_mask.clone()
bev_mask = bev_mask.permute(1, 0, 2, 3)
restore_bev_grid = (
    reference_points_cam.new_zeros(
        B, self.max_camoverlap_num * self.bev_h, self.bev_w, 2
    )
    - 1.5
)
...
restore_bev_grid = restore_bev_grid * 2 - 1
bev_pillar_counts = bev_mask_ori.sum(-1) &gt; 0
bev_pillar_counts = bev_pillar_counts.permute(1, 2, 0).sum(-1)
bev_pillar_counts = torch.clamp(bev_pillar_counts, min=1.0)
</code></pre>
<h2 data-id="heading-7">4.æ€»ç»“</h2>
<h3 data-id="heading-8">4.1 ä¼˜åŒ–ç­–ç•¥å°ç»“</h3>
<ol>
<li>å¼•å…¥ BevMaskï¼Œ å¯ä»¥å¤§å¹…åº¦é™ä½ç©ºé—´èåˆæ¨¡å—çš„è®¡ç®—é‡å’Œ IOï¼›</li>
<li>æ ¹æ®æ¨¡å‹ç‰¹å¾ï¼Œä½¿ç”¨ BPU å‹å¥½çš„ OPã€‚</li>
</ol>
<h3 data-id="heading-9">4.2 æ€»ç»“</h3>
<p>æœ¬æ–‡ä¸»è¦ä»‹ç»äº†åŸºäº Bevformer ä¼˜åŒ–çš„ DenseBev æ–¹æ¡ˆï¼Œé€šè¿‡å‡å°‘å†—ä½™è®¡ç®—å’Œ IOï¼Œä½¿ç”¨ BPU å‹å¥½ OPï¼Œç›¸æ¯”äº v1.0 ç‰ˆæœ¬æ¨¡å‹ï¼Œè¿™ç§æ–¹æ¡ˆåœ¨ç²¾åº¦ç›¸å½“çš„æƒ…å†µä¸‹ï¼Œåœ¨ å¾ç¨‹ 6M å¹³å°ä¸Šæ¨ç†æ€§èƒ½æå‡ 30%ã€‚åŒæ—¶ï¼Œè¿™ç§ DenseBev çš„ä¼˜åŒ–ç»éªŒå¯ä»¥æ¨å¹¿åˆ°å…¶ä»–ç›¸ä¼¼ç»“æ„æˆ–ç›¸ä¼¼ä½¿ç”¨åœºæ™¯æ¨¡å‹çš„éƒ¨ç½²ä¸­ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[[Java]è‡ªå®šä¹‰é‡è¯•å·¥å…·ç±»]]></title>    <link>https://juejin.cn/post/7594262760939978786</link>    <guid>https://juejin.cn/post/7594262760939978786</guid>    <pubDate>2026-01-12T10:28:47.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594262760939978786" data-draft-id="7593736655612100608" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="[Java]è‡ªå®šä¹‰é‡è¯•å·¥å…·ç±»"/> <meta itemprop="keywords" content="Java"/> <meta itemprop="datePublished" content="2026-01-12T10:28:47.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç„°ç«1999"/> <meta itemprop="url" content="https://juejin.cn/user/501799051602013"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            [Java]è‡ªå®šä¹‰é‡è¯•å·¥å…·ç±»
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/501799051602013/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç„°ç«1999
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-12T10:28:47.000Z" title="Mon Jan 12 2026 10:28:47 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>Javaé‡è¯•å·¥å…·ç±»ï¼Œé›¶ä¾èµ–ã€‚å¯é…ç½®é¡¹ï¼šæ¥å—çš„å¼‚å¸¸ç±»å‹ã€è¿”å›å€¼æ ¡éªŒã€æœ€å¤§é‡è¯•æ¬¡æ•°ã€é‡è¯•é—´éš”æ—¶é—´ã€‚</p>
<h2 data-id="heading-0">1 é‡è¯•å·¥å…·ç±» RetryUtilsæºç </h2>
<p>RetryUtils:</p>
<blockquote>
<p>ä½¿ç”¨äº†lombokçš„@Slf4jæ³¨è§£ç”¨äºæ‰“å°æ—¥å¿—ï¼Œä¸ç”¨å¯ç§»é™¤ã€‚</p>
</blockquote>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> com.example.exception.RetryException;

<span class="hljs-keyword">import</span> lombok.extern.slf4j.Slf4j;

<span class="hljs-keyword">import</span> java.util.function.Predicate;
<span class="hljs-keyword">import</span> java.util.function.Supplier;

<span class="hljs-comment">/**
 * &lt;h2&gt;é‡è¯•å·¥å…·ç±»&lt;/h2&gt;
 *
 * <span class="hljs-doctag">@author</span> GFire
 * <span class="hljs-doctag">@since</span> 2025/4/22 17:58
 */</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RetryUtils</span> {
    <span class="hljs-comment">/**
     * å¤±è´¥é‡è¯•
     *
     * <span class="hljs-doctag">@param</span> task            æ‰§è¡Œçš„ä»»åŠ¡ï¼Œæ— è¿”å›å€¼
     * <span class="hljs-doctag">@param</span> acceptException å¯æ¥å—çš„å¼‚å¸¸ç±»å‹ï¼Œæ‰§è¡Œçš„ä»»åŠ¡æŠ›å‡ºæ­¤å¼‚å¸¸ï¼ˆåŠå…¶å­ç±»ï¼‰åˆ™å¤±è´¥é‡è¯•ã€‚nullè¡¨ç¤ºä¸æ¥å—ä»»ä½•å¼‚å¸¸
     * <span class="hljs-doctag">@param</span> maxRetryCount   æœ€å¤§é‡è¯•æ¬¡æ•°
     * <span class="hljs-doctag">@param</span> waitTime        é‡è¯•é—´éš”ç­‰å¾…æ—¶é—´, å•ä½æ¯«ç§’, &lt;=0åˆ™ä¸ç­‰å¾…
     * <span class="hljs-doctag">@throws</span> RetryException å¦‚æœä»»åŠ¡é‡è¯•è¶…è¿‡æœ€å¤§æ¬¡æ•°ã€æˆ–æŠ›å‡ºä¸å¯æ¥å—çš„å¼‚å¸¸ï¼Œåˆ™ç»Ÿä¸€åŒ…è£…æŠ›å‡ºRetryException
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doWithRetry</span><span class="hljs-params">(Runnable task, Class&lt;? extends Throwable&gt; acceptException, <span class="hljs-type">int</span> maxRetryCount, <span class="hljs-type">int</span> waitTime)</span> {
        <span class="hljs-keyword">if</span> (task == <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(<span class="hljs-string">"task can not be null"</span>);
        }

        doWithRetry(() -&gt; {
            task.run();
            <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;
        }, i -&gt; i == <span class="hljs-number">1</span>, acceptException, maxRetryCount, waitTime);
    }

    <span class="hljs-comment">/**
     * å¤±è´¥é‡è¯•
     *
     * <span class="hljs-doctag">@param</span> task            æ‰§è¡Œçš„ä»»åŠ¡ï¼Œæœ‰è¿”å›å€¼
     * <span class="hljs-doctag">@param</span> isValid         åˆ¤æ–­ä»»åŠ¡è¿”å›å€¼æ˜¯å¦åˆæ³•ï¼Œä¸åˆæ³•åˆ™å¤±è´¥é‡è¯•
     * <span class="hljs-doctag">@param</span> acceptException å¯æ¥å—çš„å¼‚å¸¸ç±»å‹ï¼Œæ‰§è¡Œçš„ä»»åŠ¡æŠ›å‡ºæ­¤å¼‚å¸¸ï¼ˆåŠå…¶å­ç±»ï¼‰åˆ™å¤±è´¥é‡è¯•ã€‚nullè¡¨ç¤ºä¸æ¥å—ä»»ä½•å¼‚å¸¸
     * <span class="hljs-doctag">@param</span> maxRetryCount   æœ€å¤§é‡è¯•æ¬¡æ•°
     * <span class="hljs-doctag">@param</span> waitTime        é‡è¯•é—´éš”ç­‰å¾…æ—¶é—´, å•ä½æ¯«ç§’, &lt;=0åˆ™ä¸ç­‰å¾…
     * <span class="hljs-doctag">@return</span> supplieræ‰§è¡Œç»“æœ
     * <span class="hljs-doctag">@throws</span> RetryException å¦‚æœä»»åŠ¡é‡è¯•è¶…è¿‡æœ€å¤§æ¬¡æ•°ã€æˆ–æŠ›å‡ºä¸å¯æ¥å—çš„å¼‚å¸¸ï¼Œåˆ™ç»Ÿä¸€åŒ…è£…æŠ›å‡ºRetryException
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> &lt;T&gt; T <span class="hljs-title function_">doWithRetry</span><span class="hljs-params">(Supplier&lt;T&gt; task, Predicate&lt;T&gt; isValid, Class&lt;? extends Throwable&gt; acceptException, <span class="hljs-type">int</span> maxRetryCount, <span class="hljs-type">int</span> waitTime)</span> {
        <span class="hljs-keyword">if</span> (task == <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(<span class="hljs-string">"task can not be null"</span>);
        }
        <span class="hljs-keyword">if</span> (isValid == <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(<span class="hljs-string">"isValid can not be null"</span>);
        }
        <span class="hljs-keyword">if</span> (maxRetryCount &lt;= <span class="hljs-number">0</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(<span class="hljs-string">"maxRetryCount must be &gt; 0"</span>);
        }

        <span class="hljs-type">T</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">tryCount</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; tryCount &lt;= maxRetryCount; tryCount++) {
            <span class="hljs-keyword">try</span> {
                result = task.get();
                <span class="hljs-keyword">if</span> (isValid.test(result)) {
                    <span class="hljs-keyword">return</span> result;
                } <span class="hljs-keyword">else</span> {
                    log.error(<span class="hljs-string">"result invalid, tryCount: {}, result: {}"</span>, tryCount, result);
                }
            } <span class="hljs-keyword">catch</span> (Throwable e) {
                handleException(e, acceptException, maxRetryCount, tryCount);
            }

            <span class="hljs-keyword">if</span> (waitTime &gt; <span class="hljs-number">0</span> &amp;&amp; tryCount &lt; maxRetryCount) {
                sleep(waitTime); <span class="hljs-comment">// ç­‰å¾…ä¸€æ®µæ—¶é—´åé‡è¯•</span>
            }
        }
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RetryException</span>(<span class="hljs-string">"result: "</span> + result);
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleException</span><span class="hljs-params">(Throwable e, Class&lt;? extends Throwable&gt; acceptException, <span class="hljs-type">int</span> maxRetryCount, <span class="hljs-type">int</span> tryCount)</span> {
        log.error(<span class="hljs-string">"error, tryCount: {}, Exception: "</span>, tryCount, e);
        <span class="hljs-keyword">if</span> (acceptException != <span class="hljs-literal">null</span> &amp;&amp; acceptException.isInstance(e)) {
            <span class="hljs-keyword">if</span> (tryCount == maxRetryCount) { <span class="hljs-comment">// æœ€åä¸€æ¬¡é‡è¯•ä»å¤±è´¥ï¼Œåˆ™æŠ›å‡º</span>
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RetryException</span>(e);
            }
        } <span class="hljs-keyword">else</span> { <span class="hljs-comment">// ä¸å¯æ¥å—çš„å¼‚å¸¸ï¼Œç›´æ¥æŠ›å‡º</span>
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RetryException</span>(e);
        }
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">sleep</span><span class="hljs-params">(<span class="hljs-type">int</span> waitTime)</span> {
        <span class="hljs-keyword">try</span> {
            Thread.sleep(waitTime);
        } <span class="hljs-keyword">catch</span> (InterruptedException e) {
            Thread.currentThread().interrupt();
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RetryException</span>(e);
        }
    }
}
</code></pre>
<p>RetryException:</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * &lt;h2&gt;é‡è¯•å¼‚å¸¸&lt;/h2&gt;
 *
 * <span class="hljs-doctag">@author</span> GFire
 * <span class="hljs-doctag">@since</span> 2025/4/23 11:20
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RetryException</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">RuntimeException</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">RetryException</span><span class="hljs-params">(String message)</span> {
        <span class="hljs-built_in">super</span>(message);
    }

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">RetryException</span><span class="hljs-params">(Throwable cause)</span> {
        <span class="hljs-built_in">super</span>(cause);
    }
}
</code></pre>
<h2 data-id="heading-1">2 ä½¿ç”¨æ–¹å¼</h2>
<h3 data-id="heading-2">ç¤ºä¾‹1ï¼šä»»åŠ¡æ— è¿”å›å€¼</h3>
<pre><code class="hljs language-java" lang="java"> <span class="hljs-comment">// æ¨¡æ‹Ÿè°ƒç”¨APIæ¥å£ï¼Œå¤±è´¥é‡è¯•</span>
RetryUtils.doWithRetry(() -&gt; apiService.query(), Exception.class, <span class="hljs-number">3</span>, <span class="hljs-number">2000</span>);
</code></pre>
<p>è§£é‡Šï¼šä»»åŠ¡<code>apiService.query()</code>æ— è¿”å›å€¼ã€æ¥å—Exceptionå¼‚å¸¸ã€æœ€å¤§é‡è¯•æ¬¡æ•°ä¸º3ã€é‡è¯•é—´éš”2ç§’</p>
<h3 data-id="heading-3">ç¤ºä¾‹2ï¼šä»»åŠ¡æœ‰è¿”å›å€¼ã€éœ€æ ¡éªŒè¿”å›å€¼</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * æ¨¡æ‹Ÿå‘é€é€šçŸ¥
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">send</span><span class="hljs-params">(String content)</span> {
    <span class="hljs-keyword">try</span> {
        RetryUtils.doWithRetry(() -&gt; noticeService.send(content), <span class="hljs-built_in">this</span>::isValid, Exception.class, <span class="hljs-number">3</span>, <span class="hljs-number">2000</span>);
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    } <span class="hljs-keyword">catch</span> (RetryException e) {
        log.error(<span class="hljs-string">"send error: {}"</span>, e.toString());
    }
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
}

<span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isValid</span><span class="hljs-params">(String res)</span> {
    <span class="hljs-keyword">if</span> (StringUtils.isNotEmpty(res)) {
        <span class="hljs-type">JSONObject</span> <span class="hljs-variable">response</span> <span class="hljs-operator">=</span> JSON.parseObject(res);
        <span class="hljs-keyword">return</span> <span class="hljs-string">"ok"</span>.equals(response.getString(<span class="hljs-string">"status"</span>));
    }
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
}
</code></pre>
<p>è§£é‡Šï¼šä»»åŠ¡<code>noticeService.send(content)</code>æœ‰Stringç±»å‹çš„è¿”å›å€¼ã€<code>isValid</code>æ–¹æ³•åˆ¤æ–­è¿”å›å€¼æ˜¯å¦åˆæ³•ã€æ¥å—Exceptionå¼‚å¸¸ã€æœ€å¤§é‡è¯•æ¬¡æ•°ä¸º3ã€é‡è¯•é—´éš”2ç§’</p>
<h3 data-id="heading-4">ç¤ºä¾‹3ï¼šä»»åŠ¡æœ‰è¿”å›å€¼ã€æ— éœ€æ ¡éªŒè¿”å›å€¼</h3>
<pre><code class="hljs language-java" lang="java">RetryUtils.doWithRetry(() -&gt; noticeService.send(), (res) -&gt; <span class="hljs-literal">true</span>, Exception.class, <span class="hljs-number">3</span>, <span class="hljs-number">2000</span>);
</code></pre>
<p>è§£é‡Šï¼šä»»åŠ¡<code>noticeService.send()</code>æœ‰Stringç±»å‹çš„è¿”å›å€¼ã€<code>(res) -&gt; true</code>è®¤ä¸ºä»»æ„è¿”å›å€¼éƒ½åˆæ³•ï¼ˆå³æ— æ ¡éªŒï¼‰ã€æ¥å—Exceptionå¼‚å¸¸ã€æœ€å¤§é‡è¯•æ¬¡æ•°ä¸º3ã€é‡è¯•é—´éš”2ç§’</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ ¹æ²»LLMèƒ¡è¯´å…«é“ï¼ç”¨ Elasticsearch æ„å»º RAGï¼Œç»™ä½ ä¸€ä¸ªâ€œæœ‰æ®å¯æŸ¥â€çš„AI]]></title>    <link>https://juejin.cn/post/7594270467029811227</link>    <guid>https://juejin.cn/post/7594270467029811227</guid>    <pubDate>2026-01-12T08:30:17.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594270467029811227" data-draft-id="7594282984325398537" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ ¹æ²»LLMèƒ¡è¯´å…«é“ï¼ç”¨ Elasticsearch æ„å»º RAGï¼Œç»™ä½ ä¸€ä¸ªâ€œæœ‰æ®å¯æŸ¥â€çš„AI"/> <meta itemprop="keywords" content="å¤§æ•°æ®,Elasticsearch,å¼€æº"/> <meta itemprop="datePublished" content="2026-01-12T08:30:17.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§å‚æŠ€æœ¯æ€»ç›‘ä¸‹æµ·"/> <meta itemprop="url" content="https://juejin.cn/user/4091714106833577"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ ¹æ²»LLMèƒ¡è¯´å…«é“ï¼ç”¨ Elasticsearch æ„å»º RAGï¼Œç»™ä½ ä¸€ä¸ªâ€œæœ‰æ®å¯æŸ¥â€çš„AI
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4091714106833577/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§å‚æŠ€æœ¯æ€»ç›‘ä¸‹æµ·
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-12T08:30:17.000Z" title="Mon Jan 12 2026 08:30:17 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    4
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Elasticsearch æ·±åº¦æŠ€æœ¯è§£è¯»ï¼šæ¶æ„ã€å®ç°ä¸æ¼”è¿›</h2>
<h3 data-id="heading-1">1. æ•´ä½“ä»‹ç»</h3>
<h4 data-id="heading-2">1.1 é¡¹ç›®æ¦‚å†µ</h4>
<p>Elasticsearchï¼ˆGitHub: elastic/elasticsearchï¼‰æ˜¯ä¸€ä¸ªåŸºäºLuceneæ„å»ºçš„åˆ†å¸ƒå¼ã€å¯æ‰©å±•çš„æœç´¢å’Œåˆ†æå¼•æ“ã€‚æˆªè‡³åˆ†ææ—¶ï¼Œè¯¥é¡¹ç›®åœ¨GitHubä¸Šæ‹¥æœ‰è¶…è¿‡66,000ä¸ªStarå’Œ24,000ä¸ªForkï¼Œæ˜¯æœç´¢å’Œæ•°æ®åˆ†æé¢†åŸŸæœ€å—æ¬¢è¿çš„å¼€æºé¡¹ç›®ä¹‹ä¸€ã€‚</p>
<h4 data-id="heading-3">1.2 æ ¸å¿ƒåŠŸèƒ½å®šä½</h4>
<p>Elasticsearchå·²ä»æœ€åˆçš„å…¨æ–‡æœç´¢å¼•æ“æ¼”è¿›ä¸º<strong>å¤šæ¨¡æ€æ•°æ®å¤„ç†å¹³å°</strong>ï¼Œæ ¸å¿ƒèƒ½åŠ›åŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>åˆ†å¸ƒå¼æœç´¢ä¸åˆ†æ</strong>ï¼šè¿‘ä¹å®æ—¶çš„æµ·é‡æ•°æ®æ£€ç´¢å’Œå¤æ‚èšåˆ</li>
<li><strong>å‘é‡æ•°æ®åº“</strong>ï¼šæ”¯æŒé«˜ç»´å‘é‡ç›¸ä¼¼æ€§æœç´¢ï¼Œèµ‹èƒ½AIåº”ç”¨</li>
<li><strong>å¯è§‚æµ‹æ€§æ•°æ®æ¹–</strong>ï¼šç»Ÿä¸€å­˜å‚¨å’Œå¤„ç†æ—¥å¿—ã€æŒ‡æ ‡ã€APMè·Ÿè¸ªæ•°æ®</li>
<li><strong>å®‰å…¨åˆ†æå¼•æ“</strong>ï¼šSIEMåœºæ™¯ä¸‹çš„å¨èƒæ£€æµ‹å’Œäº‹ä»¶å“åº”</li>
</ul>
<h4 data-id="heading-4">1.3 è§£å†³çš„é—®é¢˜ä¸ç›®æ ‡åœºæ™¯</h4>
<p><strong>ä¼ ç»Ÿè§£å†³æ–¹æ¡ˆçš„å±€é™æ€§ï¼š</strong></p>
<ol>
<li><strong>æ•°æ®å­¤å²›</strong>ï¼šæ—¥å¿—ã€æŒ‡æ ‡ã€ä¸šåŠ¡æ•°æ®å­˜å‚¨åœ¨ä¸åŒç³»ç»Ÿä¸­ï¼Œæ— æ³•å…³è”åˆ†æ</li>
<li><strong>å®æ—¶æ€§ä¸è¶³</strong>ï¼šä¼ ç»Ÿæ•°æ®åº“çš„æ‰¹é‡å¤„ç†æ¨¡å¼æ— æ³•æ»¡è¶³ç›‘æ§ã€å®‰å…¨ç­‰å®æ—¶åœºæ™¯</li>
<li><strong>æ‰©å±•æ€§ç“¶é¢ˆ</strong>ï¼šå•æœºç³»ç»Ÿéš¾ä»¥åº”å¯¹æ•°æ®é‡çš„æŒ‡æ•°çº§å¢é•¿</li>
<li><strong>AIé›†æˆå›°éš¾</strong>ï¼šä¼ ç»Ÿæœç´¢ç³»ç»Ÿç¼ºä¹å¯¹å‘é‡åŒ–æ•°æ®çš„åŸç”Ÿæ”¯æŒ</li>
</ol>
<p><strong>Elasticsearchçš„åˆ›æ–°æ–¹æ¡ˆï¼š</strong></p>
<ol>
<li><strong>ç»Ÿä¸€æ•°æ®å¹³å°</strong>ï¼šé€šè¿‡çµæ´»çš„æ•°æ®æ¨¡å‹å’Œç´¢å¼•æœºåˆ¶ï¼Œæ”¯æŒç»“æ„åŒ–ã€åŠç»“æ„åŒ–ã€éç»“æ„åŒ–æ•°æ®</li>
<li><strong>åˆ†å¸ƒå¼æ¶æ„</strong>ï¼šè‡ªåŠ¨åˆ†ç‰‡ã€å‰¯æœ¬æœºåˆ¶å®ç°çº¿æ€§æ‰©å±•</li>
<li><strong>è¿‘å®æ—¶å¤„ç†</strong>ï¼šé€šè¿‡translogå’Œrefreshæœºåˆ¶å¹³è¡¡æŒä¹…æ€§ä¸æŸ¥è¯¢å»¶è¿Ÿ</li>
<li><strong>æ··åˆæœç´¢</strong>ï¼šèåˆå€’æ’ç´¢å¼•ï¼ˆæ–‡æœ¬ï¼‰å’ŒHNSWç®—æ³•ï¼ˆå‘é‡ï¼‰å®ç°å¤šæ¨¡æ€æ£€ç´¢</li>
</ol>
<h4 data-id="heading-5">1.4 å•†ä¸šä»·å€¼åˆ†æ</h4>
<p><strong>æˆæœ¬æ•ˆç›Šæ¨¡å‹ï¼š</strong></p>
<ul>
<li><strong>å¼€å‘æˆæœ¬èŠ‚çº¦</strong>ï¼šç›¸æ¯”è‡ªå»ºæœç´¢/åˆ†æç³»ç»Ÿï¼Œé‡‡ç”¨Elasticsearchå¯å‡å°‘60-70%çš„åˆå§‹å¼€å‘æŠ•å…¥</li>
<li><strong>è¿ç»´å¤æ‚åº¦é™ä½</strong>ï¼šè‡ªåŠ¨åŒ–çš„é›†ç¾¤ç®¡ç†ã€æ•…éšœæ¢å¤æœºåˆ¶å‡å°‘è¿ç»´è´Ÿæ‹…</li>
<li><strong>æŠ€æœ¯å€ºåŠ¡æ§åˆ¶</strong>ï¼šæ´»è·ƒçš„ç¤¾åŒºå’ŒæŒç»­çš„ç‰ˆæœ¬è¿­ä»£é™ä½é•¿æœŸç»´æŠ¤é£é™©</li>
<li><strong>ç”Ÿæ€æ•´åˆä»·å€¼</strong>ï¼šElastic Stackï¼ˆELKï¼‰å½¢æˆå®Œæ•´çš„æ•°æ®å¤„ç†æµæ°´çº¿</li>
</ul>
<p><strong>å¸‚åœºè¦†ç›–åˆ†æï¼š</strong></p>
<ul>
<li><strong>ä¼ä¸šæœç´¢</strong>ï¼šæ–‡æ¡£æ£€ç´¢ã€çŸ¥è¯†åº“ç®¡ç†</li>
<li><strong>å¯è§‚æµ‹æ€§</strong>ï¼šITè¿ç»´ç›‘æ§ã€åº”ç”¨æ€§èƒ½ç®¡ç†</li>
<li><strong>å®‰å…¨åˆ†æ</strong>ï¼šå¨èƒæ£€æµ‹ã€åˆè§„å®¡è®¡</li>
<li><strong>AIå¢å¼ºåº”ç”¨</strong>ï¼šRAGç³»ç»Ÿã€æ¨èå¼•æ“ã€è¯­ä¹‰æœç´¢</li>
</ul>
<h3 data-id="heading-6">2. è¯¦ç»†åŠŸèƒ½æ‹†è§£</h3>
<h4 data-id="heading-7">2.1 æ ¸å¿ƒæ¶æ„å±‚</h4>
<pre><code class="hljs language-css" lang="css">åº”ç”¨å±‚
    â”œâ”€â”€ <span class="hljs-attribute">REST</span> API / è¯­è¨€å®¢æˆ·ç«¯
    â”œâ”€â”€ Kibanaï¼ˆå¯è§†åŒ–ï¼‰
    â””â”€â”€ ç¬¬ä¸‰æ–¹é›†æˆ
</code></pre>
<pre><code class="hljs language-markdown" lang="markdown">å¤„ç†å±‚
<span class="hljs-code">    â”œâ”€â”€ æŸ¥è¯¢è§£æä¸ä¼˜åŒ–
    â”œâ”€â”€ åˆ†å¸ƒå¼åè°ƒ
    â”œâ”€â”€ å®‰å…¨è®¤è¯/æˆæƒ
    â””â”€â”€ ç›‘æ§åº¦é‡
</span></code></pre>
<pre><code class="hljs language-markdown" lang="markdown">å­˜å‚¨å¼•æ“å±‚
<span class="hljs-code">    â”œâ”€â”€ Luceneç´¢å¼•æ ¸å¿ƒ
    â”œâ”€â”€ äº‹åŠ¡æ—¥å¿—ï¼ˆTranslogï¼‰
    â”œâ”€â”€ åˆ†ç‰‡ç®¡ç†
    â””â”€â”€ ç¼“å­˜ç³»ç»Ÿ
</span></code></pre>
<h4 data-id="heading-8">2.2 å…³é”®æŠ€æœ¯ç»„ä»¶</h4>
<p><strong>åˆ†å¸ƒå¼åè°ƒæœºåˆ¶ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä¼ªä»£ç ï¼šåˆ†ç‰‡åˆ†é…ç­–ç•¥</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ShardAllocationStrategy</span> {
    <span class="hljs-comment">// åŸºäºèŠ‚ç‚¹è´Ÿè½½ã€åˆ†ç‰‡å¤§å°ã€ç½‘ç»œæ‹“æ‰‘çš„å†³ç­–ç®—æ³•</span>
    List&lt;Node&gt; <span class="hljs-title function_">allocateShards</span><span class="hljs-params">(ClusterState state, IndexMetadata index)</span> {
        <span class="hljs-comment">// 1. è¿‡æ»¤ç¬¦åˆæ¡ä»¶çš„èŠ‚ç‚¹ï¼ˆç£ç›˜ç©ºé—´ã€ç‰ˆæœ¬å…¼å®¹æ€§ï¼‰</span>
        <span class="hljs-comment">// 2. åº”ç”¨åˆ†é…å†³ç­–ï¼ˆå¹³è¡¡ã€awarenessã€è¿‡æ»¤ï¼‰</span>
        <span class="hljs-comment">// 3. æ‰§è¡Œåˆ†ç‰‡é‡æ–°å¹³è¡¡</span>
    }
}
</code></pre>
<p><strong>è¿‘å®æ—¶æœç´¢å®ç°ï¼š</strong></p>
<pre><code class="hljs language-markdown" lang="markdown">å†™å…¥è·¯å¾„ï¼š
<span class="hljs-bullet">1.</span> æ–‡æ¡£ â†’ å†…å­˜ç¼“å†²åŒº
<span class="hljs-bullet">2.</span> å®šæœŸrefreshï¼ˆé»˜è®¤1ç§’ï¼‰â†’ åˆ›å»ºæ–°çš„Luceneæ®µ
<span class="hljs-bullet">3.</span> æ®µå¯¹æœç´¢å¯è§ï¼Œä½†æœªæŒä¹…åŒ–
<span class="hljs-bullet">4.</span> Translogç¡®ä¿æ•°æ®æŒä¹…æ€§
<span class="hljs-bullet">5.</span> å®šæœŸflush â†’ æ®µæŒä¹…åŒ–åˆ°ç£ç›˜

è¯»å–è·¯å¾„ï¼š
<span class="hljs-bullet">1.</span> æŸ¥è¯¢åè°ƒèŠ‚ç‚¹æ¥æ”¶è¯·æ±‚
<span class="hljs-bullet">2.</span> è·¯ç”±åˆ°ç›¸å…³åˆ†ç‰‡ï¼ˆä¸»åˆ†ç‰‡/å‰¯æœ¬ï¼‰
<span class="hljs-bullet">3.</span> å„åˆ†ç‰‡æœ¬åœ°æœç´¢
<span class="hljs-bullet">4.</span> ç»“æœåˆå¹¶ã€æ’åºã€è¿”å›
</code></pre>
<h4 data-id="heading-9">2.3 å‘é‡æœç´¢é›†æˆ</h4>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># å‘é‡å­—æ®µæ˜ å°„ç¤ºä¾‹</span>
{
  <span class="hljs-attr">"mappings":</span> {
    <span class="hljs-attr">"properties":</span> {
      <span class="hljs-attr">"embedding":</span> {
        <span class="hljs-attr">"type":</span> <span class="hljs-string">"dense_vector"</span>,
        <span class="hljs-attr">"dims":</span> <span class="hljs-number">768</span>,
        <span class="hljs-attr">"index":</span> <span class="hljs-literal">true</span>,
        <span class="hljs-attr">"similarity":</span> <span class="hljs-string">"cosine"</span>
      }
    }
  }
}
</code></pre>
<p><strong>HNSWï¼ˆHierarchical Navigable Small Worldï¼‰ç®—æ³•é›†æˆï¼š</strong></p>
<ul>
<li>è¿‘ä¼¼æœ€è¿‘é‚»æœç´¢ï¼Œå¹³è¡¡ç²¾åº¦ä¸æ€§èƒ½</li>
<li>æ”¯æŒé€æ®µæ„å»ºï¼Œé€‚åº”åŠ¨æ€æ•°æ®æ›´æ–°</li>
<li>ä¸å€’æ’ç´¢å¼•ç»“åˆå®ç°æ··åˆæœç´¢</li>
</ul>
<h3 data-id="heading-10">3. æŠ€æœ¯éš¾ç‚¹ä¸è§£å†³æ–¹æ¡ˆ</h3>
<h4 data-id="heading-11">3.1 åˆ†å¸ƒå¼ä¸€è‡´æ€§æŒ‘æˆ˜</h4>
<p><strong>é—®é¢˜</strong>ï¼šåœ¨ä¿è¯æ€§èƒ½çš„åŒæ—¶ï¼Œç¡®ä¿æ•°æ®ä¸€è‡´æ€§å’Œæ•…éšœæ¢å¤ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<ul>
<li><strong>æœ€ç»ˆä¸€è‡´æ€§æ¨¡å‹</strong>ï¼šé€šè¿‡å‰¯æœ¬æœºåˆ¶å’Œæ•…éšœè½¬ç§»ä¿è¯å¯ç”¨æ€§</li>
<li><strong>ä¹è§‚å¹¶å‘æ§åˆ¶</strong>ï¼šåŸºäºç‰ˆæœ¬å·çš„å†²çªè§£å†³æœºåˆ¶</li>
<li><strong>åˆ†ç‰‡æ¢å¤åè®®</strong>ï¼šä»ä¸»åˆ†ç‰‡æˆ–äº‹åŠ¡æ—¥å¿—æ¢å¤æ•°æ®</li>
</ul>
<h4 data-id="heading-12">3.2 æŸ¥è¯¢æ€§èƒ½ä¼˜åŒ–</h4>
<p><strong>é—®é¢˜</strong>ï¼šå¤æ‚èšåˆæŸ¥è¯¢åœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸‹çš„æ€§èƒ½ç“¶é¢ˆã€‚</p>
<p><strong>ä¼˜åŒ–ç­–ç•¥</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æŸ¥è¯¢æ‰§è¡Œè®¡åˆ’ä¼˜åŒ–</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">QueryExecutionPlanner</span> {
    Plan <span class="hljs-title function_">optimize</span><span class="hljs-params">(Query query, ClusterState state)</span> {
        <span class="hljs-comment">// 1. è°“è¯ä¸‹æ¨ï¼šå°½æ—©è¿‡æ»¤æ•°æ®</span>
        <span class="hljs-comment">// 2. èšåˆä¸‹æ¨ï¼šåœ¨åˆ†ç‰‡çº§åˆ«é¢„èšåˆ</span>
        <span class="hljs-comment">// 3. ç¼“å­˜é‡ç”¨ï¼šç»“æœç¼“å­˜å’Œç‰‡æ®µç¼“å­˜</span>
        <span class="hljs-comment">// 4. å¹¶è¡Œæ‰§è¡Œï¼šå¤šä¸ªåˆ†ç‰‡å¹¶è¡ŒæŸ¥è¯¢</span>
    }
}
</code></pre>
<h4 data-id="heading-13">3.3 æ„å»ºç³»ç»Ÿå¤æ‚æ€§</h4>
<p>ä»æä¾›çš„<code>BUILDING.md</code>å’Œ<code>build.gradle</code>æ–‡ä»¶å¯è§ï¼ŒElasticsearchçš„æ„å»ºç³»ç»Ÿé¢ä¸´ç‹¬ç‰¹æŒ‘æˆ˜ï¼š</p>
<p><strong>ä¾èµ–ç®¡ç†å¤æ‚åº¦</strong>ï¼š</p>
<pre><code class="hljs language-gradle" lang="gradle">// ç»„ä»¶å…ƒæ•°æ®è§„åˆ™ç¤ºä¾‹ï¼šæ§åˆ¶ä¼ é€’ä¾èµ–
components.withModule("com.fasterxml.jackson.dataformat:jackson-dataformat-cbor", 
    ExcludeAllTransitivesRule.class);
</code></pre>
<p><strong>å¤šç‰ˆæœ¬æµ‹è¯•æ”¯æŒ</strong>ï¼š</p>
<pre><code class="hljs language-gradle" lang="gradle">// BWCï¼ˆå‘åå…¼å®¹æ€§ï¼‰æµ‹è¯•æ¡†æ¶
tasks.register("bwcTest") {
    // å¯åŠ¨æ—§ç‰ˆæœ¬é›†ç¾¤
    // æ‰§è¡Œå‡çº§æµ‹è¯•
    // éªŒè¯æ•°æ®å…¼å®¹æ€§
}
</code></pre>
<h3 data-id="heading-14">4. è¯¦ç»†è®¾è®¡åˆ†æ</h3>
<h4 data-id="heading-15">4.1 ç³»ç»Ÿæ¶æ„å›¾</h4>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TB
    Client[å®¢æˆ·ç«¯] --&gt;|HTTP/REST| Coord[åè°ƒèŠ‚ç‚¹]
    
    subgraph "Elasticsearché›†ç¾¤"
        Coord --&gt; Data1[æ•°æ®èŠ‚ç‚¹1]
        Coord --&gt; Data2[æ•°æ®èŠ‚ç‚¹2]
        Coord --&gt; Data3[æ•°æ®èŠ‚ç‚¹3]
        
        Data1 --&gt; Shard1_1[åˆ†ç‰‡1-ä¸»]
        Data1 --&gt; Shard2_2[åˆ†ç‰‡2-å‰¯æœ¬]
        
        Data2 --&gt; Shard1_2[åˆ†ç‰‡1-å‰¯æœ¬]
        Data2 --&gt; Shard3_1[åˆ†ç‰‡3-ä¸»]
        
        Data3 --&gt; Shard2_1[åˆ†ç‰‡2-ä¸»]
        Data3 --&gt; Shard3_2[åˆ†ç‰‡3-å‰¯æœ¬]
    end
    
    Data1 --&gt; Lucene1[Luceneç´¢å¼•]
    Data2 --&gt; Lucene2[Luceneç´¢å¼•]
    Data3 --&gt; Lucene3[Luceneç´¢å¼•]
    
    Lucene1 --&gt; Disk1[(ç£ç›˜å­˜å‚¨)]
    Lucene2 --&gt; Disk2[(ç£ç›˜å­˜å‚¨)]
    Lucene3 --&gt; Disk3[(ç£ç›˜å­˜å‚¨)]
</code></pre>
<h4 data-id="heading-16">4.2 æ ¸å¿ƒå†™å…¥åºåˆ—å›¾</h4>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant Client
    participant Coord as åè°ƒèŠ‚ç‚¹
    participant Primary as ä¸»åˆ†ç‰‡èŠ‚ç‚¹
    participant Replica as å‰¯æœ¬èŠ‚ç‚¹
    participant Translog as äº‹åŠ¡æ—¥å¿—
    participant Lucene as Luceneç´¢å¼•
    
    Client-&gt;&gt;Coord: 1. å‘é€å†™å…¥è¯·æ±‚
    Coord-&gt;&gt;Coord: 2. è·¯ç”±åˆ°ä¸»åˆ†ç‰‡
    
    Coord-&gt;&gt;Primary: 3. è½¬å‘å†™å…¥
    Primary-&gt;&gt;Translog: 4. è¿½åŠ åˆ°translog
    Primary-&gt;&gt;Lucene: 5. å†™å…¥å†…å­˜ç¼“å†²åŒº
    
    loop å‰¯æœ¬åŒæ­¥
        Primary-&gt;&gt;Replica: 6. å¤åˆ¶åˆ°å‰¯æœ¬
        Replica-&gt;&gt;Replica: 7. æœ¬åœ°æŒä¹…åŒ–
        Replica--&gt;&gt;Primary: 8. ç¡®è®¤æ¥æ”¶
    end
    
    Primary--&gt;&gt;Coord: 9. å†™å…¥æˆåŠŸ
    Coord--&gt;&gt;Client: 10. è¿”å›ç»“æœ
    
    Note over Primary,Lucene: å®šæœŸrefreshä½¿æ–‡æ¡£å¯æœç´¢
    Note over Primary,Translog: å®šæœŸflushæŒä¹…åŒ–åˆ°ç£ç›˜
</code></pre>
<h4 data-id="heading-17">4.3 æ ¸å¿ƒç±»å…³ç³»å›¾</h4>
<pre><code class="hljs language-mermaid" lang="mermaid">classDiagram
    class ClusterService {
        +ClusterState state
        +addListener(listener)
        +submitStateUpdateTask(task)
    }
    
    class IndexShard {
        -Engine engine
        -ShardRouting shardRouting
        +index(indexRequest)
        +search(searchRequest)
        +recoverFromStore()
    }
    
    class Engine {
        -IndexWriter writer
        -SearcherManager searcherManager
        -Translog translog
        +index(index)
        +get(get)
        +search(search)
    }
    
    class Translog {
        +add(operation)
        +sync()
        +recover()
    }
    
    class SearchService {
        +executeQueryPhase(shard, request)
        +executeFetchPhase(shard, request)
        +canMatch(shard, request)
    }
    
    ClusterService --&gt; IndexShard : ç®¡ç†
    IndexShard --&gt; Engine : å§”æ‰˜æ“ä½œ
    Engine --&gt; Translog : æŒä¹…åŒ–
    IndexShard --&gt; SearchService : æŸ¥è¯¢æ‰§è¡Œ
</code></pre>
<h3 data-id="heading-18">5. æ ¸å¿ƒä»£ç è§£æ</h3>
<h4 data-id="heading-19">5.1 åˆ†å¸ƒå¼åè°ƒå…³é”®å®ç°</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * é›†ç¾¤çŠ¶æ€æ›´æ–°ä»»åŠ¡å¤„ç†
 * è´Ÿè´£ç»´æŠ¤é›†ç¾¤å…ƒæ•°æ®çš„æœ€ç»ˆä¸€è‡´æ€§
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ClusterStateUpdateTask</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">ClusterStateTaskListener</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> String source;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> ClusterStateTaskExecutor executor;
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> ClusterState <span class="hljs-title function_">execute</span><span class="hljs-params">(ClusterState currentState)</span> {
        <span class="hljs-comment">// 1. éªŒè¯å½“å‰çŠ¶æ€æ˜¯å¦å…è®¸æ›´æ–°</span>
        validate(currentState);
        
        <span class="hljs-comment">// 2. åº”ç”¨çŠ¶æ€å˜æ›´</span>
        <span class="hljs-type">ClusterState</span> <span class="hljs-variable">newState</span> <span class="hljs-operator">=</span> applyChanges(currentState);
        
        <span class="hljs-comment">// 3. éªŒè¯æ–°çŠ¶æ€çš„ä¸€è‡´æ€§</span>
        validateNewState(newState);
        
        <span class="hljs-keyword">return</span> newState;
    }
    
    <span class="hljs-comment">/**
     * å…³é”®ç®—æ³•ï¼šç¡®ä¿åˆ†ç‰‡åˆ†é…æ»¡è¶³çº¦æŸæ¡ä»¶
     * - å‰¯æœ¬å› å­çº¦æŸ
     * - èŠ‚ç‚¹æ„ŸçŸ¥ï¼ˆæœºæ¶ã€åŒºåŸŸï¼‰
     * - ç£ç›˜ä½¿ç”¨å¹³è¡¡
     */</span>
    <span class="hljs-keyword">private</span> RoutingTable <span class="hljs-title function_">rebuildRoutingTable</span><span class="hljs-params">(ClusterState state)</span> {
        <span class="hljs-type">AllocationService</span> <span class="hljs-variable">allocation</span> <span class="hljs-operator">=</span> state.getNodes().getAllocationService();
        <span class="hljs-keyword">return</span> allocation.reroute(state, <span class="hljs-string">"manual reroute"</span>).routingTable();
    }
}
</code></pre>
<h4 data-id="heading-20">5.2 æŸ¥è¯¢æ‰§è¡Œå¼•æ“æ ¸å¿ƒ</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * åˆ†å¸ƒå¼æŸ¥è¯¢æ‰§è¡Œä¸Šä¸‹æ–‡
 * ç®¡ç†æŸ¥è¯¢åœ¨å¤šä¸ªåˆ†ç‰‡ä¸Šçš„å¹¶è¡Œæ‰§è¡Œå’Œç»“æœåˆå¹¶
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SearchContext</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Releasable</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> QuerySearchResult[] queryResults;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> AtomicArray&lt;FetchSearchResult&gt; fetchResults;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> SearchRequest request;
    
    <span class="hljs-comment">/**
     * æŸ¥è¯¢é˜¶æ®µï¼šå„åˆ†ç‰‡å¹¶è¡Œæ‰§è¡Œ
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">executeQueryPhase</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// 1. æ„å»ºæ¯ä¸ªåˆ†ç‰‡çš„æŸ¥è¯¢è¯·æ±‚</span>
        ShardSearchRequest[] requests = buildShardRequests();
        
        <span class="hljs-comment">// 2. å¹¶è¡Œå‘é€åˆ°å„åˆ†ç‰‡</span>
        List&lt;Future&lt;QuerySearchResult&gt;&gt; futures = 
            transportService.sendRequests(requests);
        
        <span class="hljs-comment">// 3. æ”¶é›†å¹¶éƒ¨åˆ†åˆå¹¶ç»“æœï¼ˆTop-Kï¼‰</span>
        mergeQueryResults(futures);
    }
    
    <span class="hljs-comment">/**
     * è·å–é˜¶æ®µï¼šè·å–å®Œæ•´æ–‡æ¡£æ•°æ®
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">executeFetchPhase</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// 1. æ ¹æ®æŸ¥è¯¢é˜¶æ®µç»“æœé€‰æ‹©éœ€è¦è·å–çš„æ–‡æ¡£</span>
        List&lt;ShardFetchRequest&gt; fetchRequests = 
            buildFetchRequests(queryResults);
        
        <span class="hljs-comment">// 2. å¹¶è¡Œè·å–æ–‡æ¡£å†…å®¹</span>
        <span class="hljs-comment">// 3. æœ€ç»ˆç»“æœåˆå¹¶ã€æ’åºã€é«˜äº®å¤„ç†</span>
    }
    
    <span class="hljs-comment">/**
     * ç»“æœåˆå¹¶ç®—æ³•ï¼šåŸºäºä¼˜å…ˆçº§é˜Ÿåˆ—çš„Top-Kåˆå¹¶
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">mergeResults</span><span class="hljs-params">(QuerySearchResult[] results)</span> {
        PriorityQueue&lt;ShardDoc&gt; queue = <span class="hljs-keyword">new</span> <span class="hljs-title class_">PriorityQueue</span>&lt;&gt;();
        
        <span class="hljs-comment">// åˆå§‹åŒ–ï¼šæ¯ä¸ªåˆ†ç‰‡çš„Topæ–‡æ¡£</span>
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">shardId</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; shardId &lt; results.length; shardId++) {
            <span class="hljs-keyword">if</span> (results[shardId].hasHits()) {
                queue.offer(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ShardDoc</span>(shardId, <span class="hljs-number">0</span>, 
                    results[shardId].score(<span class="hljs-number">0</span>)));
            }
        }
        
        <span class="hljs-comment">// å¤šè·¯å½’å¹¶</span>
        <span class="hljs-keyword">while</span> (!queue.isEmpty() &amp;&amp; totalHits &lt; request.size()) {
            <span class="hljs-type">ShardDoc</span> <span class="hljs-variable">top</span> <span class="hljs-operator">=</span> queue.poll();
            addToFinalResults(top);
            
            <span class="hljs-comment">// ä»åŒä¸€åˆ†ç‰‡å–ä¸‹ä¸€ä¸ªæ–‡æ¡£</span>
            <span class="hljs-type">int</span> <span class="hljs-variable">nextDoc</span> <span class="hljs-operator">=</span> top.docIndex + <span class="hljs-number">1</span>;
            <span class="hljs-keyword">if</span> (nextDoc &lt; results[top.shardId].hits().length) {
                queue.offer(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ShardDoc</span>(top.shardId, nextDoc,
                    results[top.shardId].score(nextDoc)));
            }
        }
    }
}
</code></pre>
<h4 data-id="heading-21">5.3 æ„å»ºç³»ç»Ÿä¾èµ–ç®¡ç†</h4>
<p>ä»<code>BUILDING.md</code>æå–çš„å…³é”®è®¾è®¡ï¼š</p>
<pre><code class="hljs language-gradle" lang="gradle">/**
 * ç»„ä»¶å…ƒæ•°æ®è§„åˆ™æ’ä»¶
 * ä¸¥æ ¼æ§åˆ¶ä¼ é€’ä¾èµ–ï¼Œé¿å…ç‰ˆæœ¬å†²çªå’Œå®‰å…¨é£é™©
 */
class ComponentMetadataRulesPlugin implements Plugin&lt;Project&gt; {
    
    void apply(Project project) {
        project.dependencies.components { ComponentMetadataHandler handler -&gt;
            // åœºæ™¯1ï¼šæ’é™¤æ‰€æœ‰ä¼ é€’ä¾èµ–ï¼ˆå®Œå…¨æ§åˆ¶ï¼‰
            handler.withModule("com.fasterxml.jackson.dataformat:jackson-dataformat-cbor") {
                it.allVariants { variant -&gt;
                    variant.withDependencies { deps -&gt;
                        deps.removeAll { true } // ç§»é™¤æ‰€æœ‰ä¼ é€’ä¾èµ–
                    }
                }
            }
            
            // åœºæ™¯2ï¼šä»…ä¿ç•™åŒç»„ä¾èµ–
            handler.withModule("com.azure:azure-core") {
                it.allVariants { variant -&gt;
                    variant.withDependencies { deps -&gt;
                        deps.removeAll { dep -&gt; 
                            !dep.group.startsWith("com.azure")
                        }
                    }
                }
            }
        }
    }
}
</code></pre>
<h3 data-id="heading-22">6. æŠ€æœ¯å¯¹æ¯”ä¸æ¼”è¿›è¶‹åŠ¿</h3>
<h4 data-id="heading-23">6.1 ä¸åŒç±»æŠ€æœ¯å¯¹æ¯”</h4>















































<table><thead><tr><th>ç»´åº¦</th><th>Elasticsearch</th><th>Apache Solr</th><th>OpenSearch</th><th>MeiliSearch</th></tr></thead><tbody><tr><td><strong>æ ¸å¿ƒå®šä½</strong></td><td>æœç´¢+åˆ†æ+å‘é‡</td><td>ä¼ä¸šæœç´¢</td><td>ESåˆ†æ”¯ï¼Œä¸“æ³¨æœç´¢</td><td>è½»é‡çº§å³æ—¶æœç´¢</td></tr><tr><td><strong>åˆ†å¸ƒå¼æ¶æ„</strong></td><td>æˆç†Ÿï¼Œè‡ªåŠ¨åˆ†ç‰‡</td><td>ä¾èµ–ZooKeeper</td><td>ç»§æ‰¿ESæ¶æ„</td><td>æœ‰é™åˆ†å¸ƒå¼æ”¯æŒ</td></tr><tr><td><strong>å‘é‡æœç´¢</strong></td><td>åŸç”Ÿé›†æˆï¼ŒHNSW</td><td>ç¬¬ä¸‰æ–¹æ’ä»¶</td><td>ç±»ä¼¼ESæ”¯æŒ</td><td>æœ‰é™æ”¯æŒ</td></tr><tr><td><strong>æ•°æ®åˆ†æ</strong></td><td>å¼ºå¤§èšåˆèƒ½åŠ›</td><td>åŸºç¡€èšåˆ</td><td>ç±»ä¼¼ESèƒ½åŠ›</td><td>ç®€å•èšåˆ</td></tr><tr><td><strong>è¿ç»´å¤æ‚åº¦</strong></td><td>ä¸­ç­‰</td><td>è¾ƒé«˜ï¼ˆä¾èµ–ZKï¼‰</td><td>ç±»ä¼¼ES</td><td>ä½</td></tr></tbody></table>
<h4 data-id="heading-24">6.2 æ¶æ„æ¼”è¿›æ–¹å‘</h4>
<ol>
<li><strong>äº‘åŸç”Ÿæ·±åº¦é›†æˆ</strong>ï¼šKubernetes Operatorã€Serverlesséƒ¨ç½²æ¨¡å¼</li>
<li><strong>AIåŸç”Ÿèƒ½åŠ›</strong>ï¼šæ›´ç´§å¯†çš„LLMé›†æˆã€è‡ªåŠ¨å‘é‡åŒ–ç®¡é“</li>
<li><strong>æ€§èƒ½ä¼˜åŒ–</strong>ï¼šåˆ—å¼å­˜å‚¨æ”¯æŒã€GPUåŠ é€Ÿå‘é‡æœç´¢</li>
<li><strong>å¼€å‘è€…ä½“éªŒ</strong>ï¼šç®€åŒ–é…ç½®ã€æ›´å¥½çš„æœ¬åœ°å¼€å‘å·¥å…·é“¾</li>
</ol>
<h3 data-id="heading-25">ç»“è®º</h3>
<p>Elasticsearché€šè¿‡åˆ›æ–°çš„åˆ†å¸ƒå¼æ¶æ„è®¾è®¡ï¼ŒæˆåŠŸè§£å†³äº†æµ·é‡æ•°æ®å®æ—¶æ£€ç´¢ä¸åˆ†æçš„æ ¸å¿ƒæŒ‘æˆ˜ã€‚å…¶æŠ€æœ¯ä»·å€¼ä½“ç°åœ¨ï¼š</p>
<ol>
<li><strong>æ¶æ„å®Œæ•´æ€§</strong>ï¼šä»åº•å±‚å­˜å‚¨ï¼ˆLuceneï¼‰åˆ°åˆ†å¸ƒå¼åè°ƒã€æŸ¥è¯¢ä¼˜åŒ–ã€å®‰å…¨ç®¡æ§çš„å…¨æ ˆè®¾è®¡</li>
<li><strong>æ¼”è¿›é€‚åº”æ€§</strong>ï¼šä»å…¨æ–‡æœç´¢æ‰©å±•åˆ°å‘é‡æœç´¢ã€AIé›†æˆï¼Œä¿æŒæŠ€æœ¯å‰ç»æ€§</li>
<li><strong>å·¥ç¨‹ä¸¥è°¨æ€§</strong>ï¼šä¸¥æ ¼çš„ä¾èµ–ç®¡ç†ã€å‘åå…¼å®¹æ€§æµ‹è¯•ã€å®‰å…¨éªŒè¯æœºåˆ¶</li>
<li><strong>ç”Ÿæ€æˆç†Ÿåº¦</strong>ï¼šä¸°å¯Œçš„å®¢æˆ·ç«¯åº“ã€ç®¡ç†å·¥å…·ã€ç¬¬ä¸‰æ–¹é›†æˆ</li>
</ol>
<p>é¡¹ç›®å½“å‰çš„æ„å»ºç³»ç»Ÿå¤æ‚åº¦åæ˜ äº†å¤§è§„æ¨¡ä¼ä¸šçº§è½¯ä»¶çš„æŠ€æœ¯å€ºåŠ¡ç®¡ç†æŒ‘æˆ˜ï¼Œä½†å…¶æ¨¡å—åŒ–è®¾è®¡å’Œæ¸…æ™°çš„ä¾èµ–æ§åˆ¶ç­–ç•¥ä¸ºæŒç»­æ¼”è¿›å¥ å®šäº†è‰¯å¥½åŸºç¡€ã€‚</p>
<p>å¯¹äºæŠ€æœ¯å†³ç­–è€…è€Œè¨€ï¼ŒElasticsearchæä¾›äº†ä¸€ä¸ªåœ¨æ€§èƒ½ã€åŠŸèƒ½ã€ç¨³å®šæ€§ä¹‹é—´å–å¾—è‰¯å¥½å¹³è¡¡çš„è§£å†³æ–¹æ¡ˆï¼Œç‰¹åˆ«é€‚åˆéœ€è¦ç»Ÿä¸€å¤„ç†æœç´¢ã€åˆ†æå’ŒAIå·¥ä½œè´Ÿè½½çš„åœºæ™¯ã€‚å…¶å¼€æºæ¨¡å¼é™ä½äº†é‡‡ç”¨é—¨æ§›ï¼Œè€Œå•†ä¸šæ”¯æŒé€‰é¡¹åˆ™ä¸ºå…³é”®ä¸šåŠ¡ç³»ç»Ÿæä¾›äº†ä¿éšœã€‚</p>
<hr/>
<p><em>æ³¨ï¼šæœ¬åˆ†æåŸºäºæä¾›çš„é¡¹ç›®æ–‡æ¡£å’Œä»£ç ç‰‡æ®µï¼Œç»“åˆElasticsearchçš„å…¬å¼€æŠ€æœ¯èµ„æ–™ã€‚å…·ä½“å®ç°ç»†èŠ‚å¯èƒ½éšç‰ˆæœ¬æ¼”è¿›å‘ç”Ÿå˜åŒ–ï¼Œå»ºè®®å‚è€ƒå®˜æ–¹æ–‡æ¡£è·å–æœ€æ–°ä¿¡æ¯ã€‚</em></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[2026 GitHub æœ€ç«çš„ 10 ä¸ª AI Agent æ¡†æ¶ï¼šæ™®é€šå¼€å‘è€…çš„é€‰å‹æŒ‡å—]]></title>    <link>https://juejin.cn/post/7594270467030286363</link>    <guid>https://juejin.cn/post/7594270467030286363</guid>    <pubDate>2026-01-12T09:44:29.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594270467030286363" data-draft-id="7594153083879997491" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="2026 GitHub æœ€ç«çš„ 10 ä¸ª AI Agent æ¡†æ¶ï¼šæ™®é€šå¼€å‘è€…çš„é€‰å‹æŒ‡å—"/> <meta itemprop="keywords" content="GitHub"/> <meta itemprop="datePublished" content="2026-01-12T09:44:29.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="AIé¦–å¸­æƒ…æŠ¥å‘˜_é˜¿å¸ƒ"/> <meta itemprop="url" content="https://juejin.cn/user/4114839354741274"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            2026 GitHub æœ€ç«çš„ 10 ä¸ª AI Agent æ¡†æ¶ï¼šæ™®é€šå¼€å‘è€…çš„é€‰å‹æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4114839354741274/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    AIé¦–å¸­æƒ…æŠ¥å‘˜_é˜¿å¸ƒ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-12T09:44:29.000Z" title="Mon Jan 12 2026 09:44:29 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€æ¡†æ¶çˆ†å‘çš„é€‰æ‹©éš¾é¢˜</h2>
<p>2026å¹´ï¼ŒAI Agentæ¡†æ¶å·²ç»ä»"æ–°é²œäº‹ç‰©"å˜æˆ"å¿…å¤‡å·¥å…·"ã€‚ä½†é—®é¢˜éšä¹‹è€Œæ¥ï¼š<strong>LangChainï¼ˆ124k starsï¼‰ã€Langflowï¼ˆ143k starsï¼‰ã€AutoGenï¼ˆ53k starsï¼‰â€¦â€¦å…‰çœ‹æ•°æ®å°±çŸ¥é“é€‰é”™äº†ä¼šæµªè´¹å¤§é‡æ—¶é—´ã€‚</strong></p>
<p>ä½ ä¸€å®šé‡åˆ°è¿‡ï¼š</p>
<ul>
<li>èŠ±ä¸€å‘¨å­¦äº†LangChainï¼Œç»“æœå‘ç°åªæ˜¯æƒ³åšç®€å•é—®ç­”ï¼ŒCrewAIä¸¤è¡Œä»£ç å°±æå®šäº†</li>
<li>å›¢é˜Ÿæƒ³å¿«é€ŸåšDemoï¼Œå´é€‰äº†å­¦ä¹ æ›²çº¿é™¡å³­çš„AutoGenï¼Œæ¼”ç¤ºè¿˜æ²¡åšå‡ºæ¥éœ€æ±‚å°±å˜äº†</li>
<li>é¡¹ç›®ä¸Šçº¿åå‘ç°ç¼ºå°‘ç›‘æ§ï¼Œæƒ³åŠ LangSmithï¼Œç»“æœå‘ç°åˆæœŸæ¶æ„ä¸æ”¯æŒ</li>
</ul>
<p><strong>æœ¬æ–‡åŸºäºçœŸå®GitHubæ•°æ® + å­¦ä¹ æ›²çº¿è¯„ä¼°</strong>ï¼Œç»™æ™®é€šå¼€å‘è€…ä¸€ä¸ªæ¸…æ™°çš„é€‰å‹å†³ç­–æ ‘ã€‚æ— è®ºæ˜¯æƒ³åšDemoè¿˜æ˜¯è½åœ°ç”Ÿäº§ï¼Œä½ éƒ½èƒ½åœ¨è¿™ç¯‡æ–‡ç« é‡Œæ‰¾åˆ°ç­”æ¡ˆã€‚</p>
<hr/>
<h2 data-id="heading-1">äºŒã€Top 10æ¡†æ¶æ•°æ®æ€»è§ˆè¡¨</h2>


















































































<table><thead><tr><th>æ¡†æ¶</th><th>Stars</th><th>æ ¸å¿ƒå®šä½</th><th>é€‚åˆè°</th><th>å­¦ä¹ æ›²çº¿</th></tr></thead><tbody><tr><td><strong>LangChain</strong></td><td>124k</td><td>å…¨æ ˆAgentå¹³å°</td><td>ä¸­é«˜çº§å¼€å‘è€…</td><td>é™¡å³­</td></tr><tr><td><strong>Langflow</strong></td><td>143k</td><td>å¯è§†åŒ–å·¥ä½œæµæ„å»º</td><td>éæŠ€æœ¯ç”¨æˆ·</td><td>å¹³ç¼“</td></tr><tr><td><strong>AutoGen</strong></td><td>53k</td><td>å¤šAgentåä½œ</td><td>æœ‰å·¥ç¨‹ç»éªŒ</td><td>ä¸­é«˜</td></tr><tr><td><strong>LlamaIndex</strong></td><td>46k</td><td>LLM+æ•°æ®è¿æ¥</td><td>æ•°æ®å·¥ç¨‹å¸ˆ</td><td>ä¸­ç­‰</td></tr><tr><td><strong>CrewAI</strong></td><td>40k</td><td>è§’è‰²é©±åŠ¨å¤šAgent</td><td>Pythonåˆå­¦è€…</td><td>åä½</td></tr><tr><td><strong>Flowise</strong></td><td>48k</td><td>ä½ä»£ç å¹³å°</td><td>å‰ç«¯/å…¨æ ˆ</td><td>éå¸¸å‹å¥½</td></tr><tr><td><strong>Agno</strong></td><td>37k</td><td>ä¸€ä½“åŒ–Agentæ ˆ</td><td>å¹³å°å·¥ç¨‹å¸ˆ</td><td>ä¸­ç­‰åä¸Š</td></tr><tr><td><strong>OpenAI Agents SDK</strong></td><td>8.6k</td><td>è½»é‡ç”Ÿäº§SDK</td><td>OpenAIç”Ÿæ€ç”¨æˆ·</td><td>ä¸­ç­‰åä½</td></tr><tr><td><strong>Semantic Kernel</strong></td><td>24k</td><td>ä¼ä¸šé›†æˆSDK</td><td>.NET/Azureå›¢é˜Ÿ</td><td>ä¸­ç­‰åä½</td></tr><tr><td><strong>Letta</strong></td><td>21k</td><td>è®°å¿†å‹Agentå¹³å°</td><td>é•¿æœŸé™ªä¼´åº”ç”¨</td><td>ä¸­ç­‰</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-2">ä¸‰ã€æŒ‰éœ€æ±‚åˆ†ç±»ï¼šä½ çš„æœ€ä½³é€‰æ‹©</h2>
<h3 data-id="heading-3">3.1 æç®€ä¸Šæ‰‹ï¼š1-2å¤©å‡ºDemo</h3>
<p><strong>é¦–é€‰ï¼šLangflowã€Flowiseã€CrewAI</strong></p>
<h4 data-id="heading-4">Langflow / Flowiseï¼ˆ0ä»£ç ï¼‰</h4>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e61ca04115db4e59b714f27425931a1d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnpppbluK3mg4XmiqXlkZhf6Zi_5biD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768815869&amp;x-signature=8U3KPHKxfGlmjDSaYpICY7O23pE%3D" alt="" loading="lazy"/></p>
<ul>
<li><strong>æ ¸å¿ƒä¼˜åŠ¿</strong>ï¼šæ‹–æ‹½å¼ç•Œé¢ï¼Œè¿å¥½LLM Keyå°±èƒ½è·‘</li>
<li><strong>é€‚åˆäººç¾¤</strong>ï¼šäº§å“ç»ç†ã€è¿è¥ã€æ•°æ®åˆ†æå¸ˆç­‰éæŠ€æœ¯è§’è‰²</li>
<li><strong>å…¸å‹åœºæ™¯</strong>ï¼šå…¬å¸æ–‡æ¡£é—®ç­”æœºå™¨äººã€å®¢æˆ·æ¼”ç¤ºRAGåŠ©æ‰‹ã€å·¥ä½œåŠå±•ç¤º</li>
</ul>
<p><strong>Langflow vs Flowise å¯¹æ¯”</strong>ï¼š</p>

























<table><thead><tr><th>ç»´åº¦</th><th>Langflow</th><th>Flowise</th></tr></thead><tbody><tr><td>åº•å±‚æ¡†æ¶</td><td>æ·±åº¦ç»‘å®šLangChain</td><td>ä¹Ÿæ˜¯LangChain</td></tr><tr><td>æ‰©å±•æ€§</td><td>å¯å¯¼å‡ºä¸ºAPI/JSON/MCP</td><td>æ”¯æŒDockeréƒ¨ç½²</td></tr><tr><td>èŠ‚ç‚¹ä¸°å¯Œåº¦</td><td>LLMã€Toolã€Memoryç­‰</td><td>é¢„åˆ¶èŠ‚ç‚¹æ›´å¤š</td></tr></tbody></table>
<h4 data-id="heading-5">CrewAIï¼ˆä¼šå†™ç‚¹Pythonï¼‰</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> crewai <span class="hljs-keyword">import</span> Agent, Task, Crew

researcher = Agent(role=<span class="hljs-string">"ç ”ç©¶å‘˜"</span>, goal=<span class="hljs-string">"æ”¶é›†AIæ¡†æ¶çš„æœ€æ–°ä¿¡æ¯"</span>)
writer = Agent(role=<span class="hljs-string">"å†™æ‰‹"</span>, goal=<span class="hljs-string">"å†™ä¸€ç¯‡æ¡†æ¶é€‰å‹æŒ‡å—"</span>)

task1 = Task(description=<span class="hljs-string">"è°ƒç ”2026å¹´æœ€ç«çš„AI Agentæ¡†æ¶"</span>, agent=researcher)
task2 = Task(description=<span class="hljs-string">"å†™ä¸€ç¯‡æ¡†æ¶é€‰å‹æŒ‡å—"</span>, agent=writer)

crew = Crew(agents=[researcher, writer], tasks=[task1, task2])
result = crew.kickoff()
</code></pre>
<ul>
<li><strong>æ ¸å¿ƒä¼˜åŠ¿</strong>ï¼šè¯­ä¹‰å‹å¥½ï¼Œå‡ ä¹å°±æ˜¯"å†™è§’è‰²+ä»»åŠ¡æè¿°"</li>
<li><strong>é€‚åˆäººç¾¤</strong>ï¼šæœ‰åŸºç¡€Pythonã€æƒ³åš"å¤šè§’è‰²åä½œ"çš„ä¸ªäººå¼€å‘è€…</li>
<li><strong>å…¸å‹åœºæ™¯</strong>ï¼šå†…å®¹å›¢é˜ŸååŒå†™ä½œã€è¥é”€è¿è¥è‡ªåŠ¨åŒ–ã€ä¸šåŠ¡åŸå‹</li>
</ul>
<hr/>
<h3 data-id="heading-6">3.2 ä¸¥è‚ƒé¡¹ç›®ï¼šä»Demoèµ°å‘ç”Ÿäº§</h3>
<p><strong>æ¨èï¼šLangChain + LlamaIndex + Langflowç»„åˆ</strong></p>
<h4 data-id="heading-7">å­¦ä¹ è·¯å¾„ï¼ˆå®æˆ˜ç‰ˆï¼‰</h4>
<p><strong>Step 1</strong>ï¼šç”¨Langflowæ­ä¸€ä¸ªå¯è§†åŒ–Flowï¼Œå…ˆæ„Ÿæ€§è®¤è¯†"é“¾ + Agent + å·¥å…·"</p>
<ul>
<li>æ‹–æ‹½LLMèŠ‚ç‚¹ï¼ˆGPT-4ï¼‰+ RetrieverèŠ‚ç‚¹ï¼ˆå‘é‡åº“ï¼‰</li>
<li>è¿èµ·æ¥ï¼Œè·‘é€š"æ–‡æ¡£é—®ç­”"Demo</li>
</ul>
<p><strong>Step 2</strong>ï¼šæ”¹æˆ50-100è¡ŒPythonä»£ç ï¼ˆLangChainï¼‰</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> langchain.chains <span class="hljs-keyword">import</span> RetrievalQA
<span class="hljs-keyword">from</span> langchain.llms <span class="hljs-keyword">import</span> OpenAI
<span class="hljs-keyword">from</span> langchain.vectorstores <span class="hljs-keyword">import</span> Chroma

llm = OpenAI(temperature=<span class="hljs-number">0</span>)
vectorstore = Chroma(persist_directory=<span class="hljs-string">"./chroma_db"</span>)

qa_chain = RetrievalQA.from_chain_type(
    llm=llm,
    chain_type=<span class="hljs-string">"stuff"</span>,
    retriever=vectorstore.as_retriever()
)
answer = qa_chain.run(<span class="hljs-string">"ä»€ä¹ˆæ˜¯LangChainçš„æ ¸å¿ƒèƒ½åŠ›ï¼Ÿ"</span>)
</code></pre>
<p><strong>Step 3</strong>ï¼šå¼•å…¥LlamaIndexï¼Œæ¥ä¼ä¸šæ–‡æ¡£åšRAG</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> llama_index <span class="hljs-keyword">import</span> VectorStoreIndex, SimpleDirectoryReader

documents = SimpleDirectoryReader(<span class="hljs-string">'data'</span>).load_data()
index = VectorStoreIndex.from_documents(documents)
query_engine = index.as_query_engine()
response = query_engine.query(<span class="hljs-string">"æˆ‘ä»¬çš„äº§å“æœ‰å“ªäº›åŠŸèƒ½ï¼Ÿ"</span>)
</code></pre>
<p><strong>Step 4</strong>ï¼šæ ¹æ®å¤æ‚åº¦å†³å®šæ˜¯å¦ä¸ŠLangGraphï¼ˆçŠ¶æ€æœºï¼‰å’ŒLangSmithï¼ˆç›‘æ§ï¼‰</p>
<ul>
<li>LangGraphï¼š"å¤šAgent + çŠ¶æ€æœº + äº‹ä»¶é©±åŠ¨"</li>
<li>LangSmithï¼š"è°ƒè¯•ã€A/Bæµ‹è¯•ã€ç›‘æ§"</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/05cdaee2a3284b2db2d0a33a61305523~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnpppbluK3mg4XmiqXlkZhf6Zi_5biD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768815869&amp;x-signature=F0hT%2FxkA6An6TN0w1QmU9zeb9RA%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-8">ä¸ºä»€ä¹ˆè¿™ä¸ªç»„åˆï¼Ÿ</h4>





























<table><thead><tr><th>ç»„ä»¶</th><th>è§£å†³ä»€ä¹ˆé—®é¢˜</th></tr></thead><tbody><tr><td><strong>LangFlow</strong></td><td>å¿«é€ŸéªŒè¯æƒ³æ³•ï¼Œé™ä½å­¦ä¹ é—¨æ§›</td></tr><tr><td><strong>LangChain</strong></td><td>å¤æ‚é€»è¾‘å®šåˆ¶ï¼Œä¼ä¸šçº§èƒ½åŠ›</td></tr><tr><td><strong>LlamaIndex</strong></td><td>è¿æ¥ä¼ä¸šæ•°æ®ï¼Œå¼ºå¤§çš„RAG</td></tr><tr><td><strong>LangGraph</strong></td><td>æœ‰çŠ¶æ€å·¥ä½œæµï¼Œå¤šAgentç¼–æ’</td></tr><tr><td><strong>LangSmith</strong></td><td>ç›‘æ§ã€è°ƒè¯•ã€è¯„ä¼°</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-9">3.3 ä¼ä¸š/å·¥ç¨‹èƒŒæ™¯ï¼šå¹³å°çº§è§£å†³æ–¹æ¡ˆ</h3>
<p><strong>æ¨èï¼šAgnoã€AutoGenã€Semantic Kernel</strong></p>
<h4 data-id="heading-10">Agnoï¼šä¸€ä½“åŒ–Agentæ ˆ</h4>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b0dc09f6ce814e778add161e977ca699~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnpppbluK3mg4XmiqXlkZhf6Zi_5biD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768815869&amp;x-signature=Efm5hrevxml1FdkYh9oFE9HLHgc%3D" alt="" loading="lazy"/></p>
<ul>
<li>Model-agnosticï¼šæ”¯æŒOpenAIã€Anthropicã€Googleã€æœ¬åœ°æ¨¡å‹</li>
<li>å¼ºå¤§è®°å¿†ï¼šæŒä¹…ä¼šè¯ã€ç”¨æˆ·é•¿æœŸè®°å¿†ã€å¤šVector DB</li>
<li>æ‰§è¡Œä¸æ§åˆ¶ï¼šäººç±»åœ¨ç¯ã€Guardrailsã€å®‰å…¨æ ¡éªŒ</li>
<li>ç”Ÿäº§èƒ½åŠ›ï¼šå†…ç½®FastAPIè¿è¡Œæ—¶ + æ§åˆ¶å¹³é¢UI + è¯„æµ‹å·¥å…·</li>
</ul>
<p><strong>é€‚åˆåœºæ™¯</strong>ï¼šä¼ä¸šå†…éƒ¨å¤šAgentåº”ç”¨ç»Ÿä¸€æ‰˜ç®¡ã€åˆè§„å®¡è®¡ã€é•¿ç”Ÿå‘½å‘¨æœŸå·¥ä½œæµ</p>
<h4 data-id="heading-11">AutoGenï¼šå¤æ‚å¤šAgentå·¥ä½œæµ</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> autogen <span class="hljs-keyword">import</span> AssistantAgent, UserProxyAgent

assistant = AssistantAgent(name=<span class="hljs-string">"assistant"</span>, llm_config={<span class="hljs-string">"model"</span>: <span class="hljs-string">"gpt-4"</span>})
user = UserProxyAgent(name=<span class="hljs-string">"user"</span>, human_input_mode=<span class="hljs-string">"TERMINATE"</span>)
user.initiate_chat(assistant, message=<span class="hljs-string">"å¸®æˆ‘ç”Ÿæˆä¸€ä¸ªFlask APIï¼Œç”¨äºæŸ¥è¯¢å¤©æ°”"</span>)
</code></pre>
<ul>
<li>ä¸‰å±‚APIï¼šCoreï¼ˆäº‹ä»¶é©±åŠ¨ï¼‰ã€AgentChatï¼ˆèŠå¤©åä½œï¼‰ã€Extensionsï¼ˆæ‰©å±•ï¼‰</li>
<li>AutoGen Studioï¼šæ— ä»£ç GUIï¼Œå›¾å½¢åŒ–æ­å¤šAgentåº”ç”¨</li>
<li>AutoGen Benchï¼šè¯„ä¼°å¤šAgentæ–¹æ¡ˆè¡¨ç°ï¼ˆå‡†ç¡®ç‡ã€æˆæœ¬ç­‰ï¼‰</li>
</ul>
<p><strong>é€‚åˆåœºæ™¯</strong>ï¼šä»£ç ç”Ÿæˆ+è‡ªåŠ¨æµ‹è¯•+éƒ¨ç½²æµæ°´çº¿ã€å¤æ‚ç ”ç©¶ä»»åŠ¡ã€å¤šè§’è‰²åä½œ</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/83a86b9e092a4cde9e4b23cdb8510d98~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnpppbluK3mg4XmiqXlkZhf6Zi_5biD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768815869&amp;x-signature=exuGt4hSRFgxed1m%2FFfBnes3DG4%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-12">Semantic Kernelï¼šä¼ä¸šé›†æˆSDK</h4>
<ul>
<li>æ¨¡å‹çµæ´»ï¼šæ”¯æŒOpenAIã€Azure OpenAIã€Hugging Faceã€NVIDIA</li>
<li>Agent/Skillæ¶æ„ï¼šé€šè¿‡"æŠ€èƒ½"ï¼ˆæ’ä»¶å¼å‡½æ•°ï¼‰å’ŒPlannerç»„ç»‡å¤æ‚ä»»åŠ¡</li>
<li>ä¼ä¸šæ’ä»¶ç”Ÿæ€ï¼šMicrosoft Graphã€Outlookã€Teamsã€SharePoint</li>
<li>å¤šæ¨¡æ€ï¼šæ–‡æœ¬ã€å›¾åƒã€éŸ³é¢‘</li>
<li>æœ¬åœ°éƒ¨ç½²ï¼šæ”¯æŒOllamaã€LMStudioã€ONNXç­‰ç¦»çº¿è¿è¡Œ</li>
</ul>
<p><strong>é€‚åˆåœºæ™¯</strong>ï¼šAzureç”Ÿæ€ä¸‹çš„ä¼ä¸šå†…éƒ¨åŠ©æ‰‹ã€ä¸šåŠ¡æµç¨‹è‡ªåŠ¨åŒ–</p>
<hr/>
<h2 data-id="heading-13">å››ã€å®æˆ˜å†³ç­–ï¼šä»Šå¤©å°±èƒ½ç”¨</h2>
<h3 data-id="heading-14">4.1 å†³ç­–æ ‘</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/562ec997f7ba48a79c132d3f8a3e36d8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnpppbluK3mg4XmiqXlkZhf6Zi_5biD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768815869&amp;x-signature=RHkw1Z2CDTZX90RCYzNrCHsH0Oo%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-15">4.2 ç«‹å³è¡ŒåŠ¨</h3>
<h4 data-id="heading-16">ä»Šæ™šï¼šè·‘é€šç¬¬ä¸€ä¸ªDemo</h4>
<pre><code class="hljs language-bash" lang="bash">docker run -p 7860:7860 langflow/langflow
</code></pre>
<p>æµè§ˆå™¨æ‰“å¼€ <code>http://localhost:7860</code>ï¼Œéšä¾¿æ‹‰ä¸€ä¸ªå®˜æ–¹ç¤ºä¾‹è·‘é€šã€‚</p>
<h4 data-id="heading-17">è¿™å‘¨ï¼šCrewAIä¸¤Agentåä½œ</h4>
<pre><code class="hljs language-python" lang="python">pip install crewai

<span class="hljs-keyword">from</span> crewai <span class="hljs-keyword">import</span> Agent, Task, Crew

researcher = Agent(role=<span class="hljs-string">"ç ”ç©¶å‘˜"</span>, goal=<span class="hljs-string">"æ”¶é›†2026å¹´æœ€ç«çš„AIæ¡†æ¶ä¿¡æ¯"</span>)
writer = Agent(role=<span class="hljs-string">"å†™æ‰‹"</span>, goal=<span class="hljs-string">"å†™ä¸€ç¯‡æ¡†æ¶é€‰å‹æŒ‡å—"</span>)

task1 = Task(description=<span class="hljs-string">"è°ƒç ”5ä¸ªä¸»æµæ¡†æ¶"</span>, agent=researcher)
task2 = Task(description=<span class="hljs-string">"æ•´ç†æˆæŠ€æœ¯æ–‡ç« "</span>, agent=writer)

crew = Crew(agents=[researcher, writer], tasks=[task1, task2])
result = crew.kickoff()
<span class="hljs-built_in">print</span>(result)
</code></pre>
<p>è¿è¡Œï¼š<code>python crew_ai_demo.py</code></p>
<h4 data-id="heading-18">ä¸¤å‘¨ï¼šçœŸå®ä¸šåŠ¡PoC</h4>
<p>ç›®æ ‡ï¼šé€‰ä¸€ä¸ªçœŸå®åœºæ™¯ï¼ˆå®¢æœã€å†…éƒ¨çŸ¥è¯†åº“ï¼‰ï¼Œç”¨LangChain + LlamaIndexå†™ä¸€ä¸ª"èƒ½å¯¹è¯ + èƒ½æŸ¥æ•°æ®"çš„PoCã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> langchain.chains <span class="hljs-keyword">import</span> ConversationalRetrievalChain
<span class="hljs-keyword">from</span> langchain.memory <span class="hljs-keyword">import</span> ConversationBufferMemory
<span class="hljs-keyword">from</span> langchain.vectorstores <span class="hljs-keyword">import</span> Chroma
<span class="hljs-keyword">from</span> llama_index <span class="hljs-keyword">import</span> VectorStoreIndex, SimpleDirectoryReader

documents = SimpleDirectoryReader(<span class="hljs-string">'data'</span>).load_data()
index = VectorStoreIndex.from_documents(documents)
query_engine = index.as_query_engine()

<span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:
    question = <span class="hljs-built_in">input</span>(<span class="hljs-string">"ä½ : "</span>)
    <span class="hljs-keyword">if</span> question == <span class="hljs-string">"exit"</span>:
        <span class="hljs-keyword">break</span>
    response = query_engine.query(question)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"AI: <span class="hljs-subst">{response}</span>"</span>)
</code></pre>
<h4 data-id="heading-19">å¦‚æœä½ åœ¨Azureç”Ÿæ€</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> semantic_kernel <span class="hljs-keyword">as</span> sk
<span class="hljs-keyword">from</span> semantic_kernel.connectors.ai.open_ai <span class="hljs-keyword">import</span> AzureChatCompletion

kernel = sk.Kernel()
deployment, api_key, endpoint = sk.azure_openai_settings_from_dot_env()
kernel.add_chat_service(<span class="hljs-string">"azure_openai"</span>, AzureChatCompletion(deployment, endpoint, api_key))
kernel.import_semantic_skill_from_directory(<span class="hljs-string">"./plugins"</span>, <span class="hljs-string">"BusinessSkill"</span>)
result = <span class="hljs-keyword">await</span> kernel.run_async(kernel.skills[<span class="hljs-string">"BusinessSkill"</span>][<span class="hljs-string">"GenerateReport"</span>], input_str=<span class="hljs-string">"ç”Ÿæˆæœ¬æœˆé”€å”®æŠ¥å‘Š"</span>)
<span class="hljs-built_in">print</span>(result)
</code></pre>
<hr/>
<h2 data-id="heading-20">äº”ã€é¿å‘æŒ‡å—</h2>





























<table><thead><tr><th>å‘</th><th>é¿å‘æ–¹æ³•</th></tr></thead><tbody><tr><td><strong>ç›²ç›®è¿½æ–°</strong></td><td>é€‰"å¤´éƒ¨ + ç”Ÿæ€å¥½"çš„ï¼šLangChainã€LlamaIndexã€AutoGen</td></tr><tr><td><strong>APIæˆæœ¬å¤±æ§</strong></td><td>ç”¨LangSmith/LangFuseè¿½è¸ªTokenæ¶ˆè€—ï¼Œè®¾ç½®é¢„ç®—è­¦å‘Š</td></tr><tr><td><strong>è¿‡åº¦å·¥ç¨‹</strong></td><td>å…ˆä»å•Agentå¼€å§‹ï¼Œéœ€è¦åä½œå†å‡çº§</td></tr><tr><td><strong>å¿½è§†ç›‘æ§</strong></td><td>ä¸€å¼€å§‹å°±æ¥å…¥æ—¥å¿—å’ŒTraceå·¥å…·</td></tr><tr><td><strong>é€‰é”™å­¦ä¹ æ›²çº¿</strong></td><td>éæŠ€æœ¯â†’Langflowï¼ŒPythonåˆå­¦è€…â†’CrewAI</td></tr></tbody></table>
<h3 data-id="heading-21">æˆæœ¬æ§åˆ¶</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> langchain.callbacks <span class="hljs-keyword">import</span> get_openai_callback

<span class="hljs-keyword">with</span> get_openai_callback() <span class="hljs-keyword">as</span> cb:
    response = qa_chain.run(<span class="hljs-string">"ä½ çš„é—®é¢˜"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ€»Token: <span class="hljs-subst">{cb.total_tokens}</span>"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ€»æˆæœ¬: $<span class="hljs-subst">{cb.total_cost}</span>"</span>)
</code></pre>
<h3 data-id="heading-22">ç›‘æ§å·¥å…·å¯¹æ¯”</h3>

























<table><thead><tr><th>å·¥å…·</th><th>ç‰¹ç‚¹</th></tr></thead><tbody><tr><td>LangSmith</td><td>LangChainå®˜æ–¹ï¼Œæ·±åº¦é›†æˆ</td></tr><tr><td>LangFuse</td><td>å¼€æºï¼Œè½»é‡çº§</td></tr><tr><td>Arize</td><td>ä¼ä¸šçº§ï¼ŒåŠŸèƒ½å…¨</td></tr><tr><td>Weights &amp; Biases</td><td>é€šç”¨ï¼Œä¸ä»…é™LLM</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-23">å…­ã€æœªæ¥æ–¹å‘</h2>
<p>æœªæ¥2å¹´ï¼ŒAgentæ¡†æ¶ä¼šå‘3ä¸ªæ–¹å‘æ¼”è¿›ï¼š</p>
<h3 data-id="heading-24">1. MCPåè®®æ™®åŠ</h3>
<p>å¤šæ¡†æ¶äº’é€šï¼ŒAgentå¯ä»¥è·¨å¹³å°åä½œã€‚</p>
<h3 data-id="heading-25">2. Agent OSæ¦‚å¿µå…´èµ·</h3>
<p>ç»Ÿä¸€è°ƒåº¦å¤šæ¨¡å‹ã€å¤šå·¥å…·ã€å¤šAgentçš„æ“ä½œç³»ç»Ÿå±‚ã€‚</p>
<h3 data-id="heading-26">3. ä»"Promptå·¥ç¨‹å¸ˆ"å˜æˆ"Agentç³»ç»Ÿè®¾è®¡å¸ˆ"</h3>
<p>é‡ç‚¹ä»"å†™å¥½æç¤ºè¯"è½¬å‘"è®¾è®¡Agentæ¶æ„"ï¼š</p>
<pre><code class="hljs">ä¼ ç»Ÿæ€ç»´ï¼šPrompt â†’ LLM â†’ è¾“å‡º

æ–°æ€ç»´ï¼šAgent1 + Agent2 + å·¥å…·åº“ + è®°å¿† â†’ LLM â†’ è¾“å‡º â†’ ç›‘æ§ â†’ è¯„ä¼° â†’ ä¼˜åŒ–
</code></pre>
<hr/>
<h2 data-id="heading-27">æ€»ç»“</h2>

































<table><thead><tr><th>éœ€æ±‚</th><th>æœ€ä½³é€‰æ‹©</th></tr></thead><tbody><tr><td><strong>0ä»£ç /Demo</strong></td><td>Langflow/Flowise</td></tr><tr><td><strong>Pythonåˆå­¦è€…</strong></td><td>CrewAI</td></tr><tr><td><strong>ä¸¥è‚ƒé¡¹ç›®</strong></td><td>LangChain + LlamaIndex</td></tr><tr><td><strong>ä¼ä¸š/å·¥ç¨‹èƒŒæ™¯</strong></td><td>Agno/Semantic Kernel/AutoGen</td></tr><tr><td><strong>OpenAIé‡åº¦</strong></td><td>OpenAI Agents SDK</td></tr><tr><td><strong>é•¿æœŸé™ªä¼´åº”ç”¨</strong></td><td>Letta + LlamaIndex</td></tr></tbody></table>
<p><strong>ç°åœ¨å°±å¼€å§‹</strong>ï¼š</p>
<ul>
<li>ä»Šæ™šè·‘ä¸€ä¸ªLangflow Demo</li>
<li>è¿™å‘¨å†™ä¸€ä¸ªCrewAIè„šæœ¬</li>
<li>ä¸¤å‘¨åšä¸€ä¸ªçœŸå®çš„PoC</li>
</ul>
<p>ä½ ä¸æ˜¯åœ¨"ç©æ¡†æ¶"ï¼Œè€Œæ˜¯åœ¨ä¸ºè‡ªå·±å’Œå›¢é˜Ÿæ­å»ºä»Demoåˆ°ç”Ÿäº§çš„å®Œæ•´èƒ½åŠ›æ¢¯åº¦ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[éƒ½2026å¹´äº†ä½ è¿˜ä¸çŸ¥é“AIå·¥ç¨‹åŒ–ï¼]]></title>    <link>https://juejin.cn/post/7594270467030368283</link>    <guid>https://juejin.cn/post/7594270467030368283</guid>    <pubDate>2026-01-12T09:50:59.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594270467030368283" data-draft-id="7594282984325873673" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="éƒ½2026å¹´äº†ä½ è¿˜ä¸çŸ¥é“AIå·¥ç¨‹åŒ–ï¼"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,ä»£ç è§„èŒƒ"/> <meta itemprop="datePublished" content="2026-01-12T09:50:59.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤œé›¨æ·±ç§‹æ¥"/> <meta itemprop="url" content="https://juejin.cn/user/3732174235510295"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            éƒ½2026å¹´äº†ä½ è¿˜ä¸çŸ¥é“AIå·¥ç¨‹åŒ–ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3732174235510295/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤œé›¨æ·±ç§‹æ¥
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-12T09:50:59.000Z" title="Mon Jan 12 2026 09:50:59 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>Cursor ç­‰ AI IDE åœ¨ 2025 å¹´å¿«é€Ÿæ™®åŠï¼Œæ˜¾è‘—é™ä½äº†å†™ä»£ç çš„æˆæœ¬ï¼Œå´æ²¡æœ‰è‡ªåŠ¨é™ä½å¯¹é½è§„èŒƒã€éªŒè¯è´¨é‡ã€è·¨äººåä½œçš„ç³»ç»Ÿæˆæœ¬ï¼Œå¯¼è‡´è¿›å…¥ä¸€ç§é«˜æ³¢åŠ¨çš„å¯¹è¯å¼ç¼–ç¨‹é™·é˜±ï¼šç”Ÿæˆå¾ˆå¿«ã€è¿”å·¥æ›´å¤šã€äº¤ä»˜ä¸ç¨³ã€‚</p>
<p>æœ¬æ–‡æå‡ºä¸€ä¸ªå¯è½åœ°çš„å·¥ç¨‹èŒƒå¼ï¼šAI å·¥ç¨‹åŒ–ï¼ŒæŠŠ AI ä»èŠå¤©å¼ä»£ç ç”Ÿæˆå™¨å‡çº§ä¸ºåœ¨å·¥ç¨‹çº¦æŸå†…æ‰§è¡Œäº¤ä»˜çš„å¼•æ“ã€‚Â  Â  Â ä»¥Â SpecÂ é©±åŠ¨ + è‡ªåŠ¨åŒ–éªŒè¯é—­ç¯Â + è§„åˆ™èµ„äº§åŒ– + é”™è¯¯çŸ¥è¯†æ²‰æ·€ ä¸ºæ ¸å¿ƒï¼Œé€šè¿‡å¯å®¡è®¡ã€å¯å¤ç°çš„äº¤ä»˜æµç¨‹ï¼Œå®ç°æ•ˆç‡ä¸è´¨é‡çš„åŒæ­¥æå‡ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€å¼•è¨€ï¼šCursor æ™®åŠä¹‹åï¼Œä¸ºä»€ä¹ˆæ›´å…ˆè¿›åè€Œæ›´ç´¯ï¼Ÿ</h2>
<p>"æˆ‘æœ‰Cursorï¼Œä½†æˆ‘ä¾ç„¶åœ¨é‡å¤åŠ³åŠ¨ã€‚"</p>
<p>è¿™æ˜¯2025å¹´è®¸å¤šå¼€å‘è€…çš„çœŸå®å†™ç…§ã€‚å½“æˆ‘ä»¬ä»ä¼ ç»Ÿçš„IDEåˆ‡æ¢åˆ°Cursoræ—¶ï¼Œä»¥ä¸ºæ‹¥æœ‰äº†AIè¶…èƒ½åŠ›ï¼Œå´å‘ç°å®é™…å·¥ä½œæµç¨‹å˜æˆäº†è¿™æ ·ï¼š</p>
<pre><code class="hljs language-css" lang="css">éœ€æ±‚ä¸€å¥è¯æè¿° â†’ AI ç”Ÿæˆä¸€å †é€šç”¨ä»£ç 
è·‘èµ·æ¥å‘ç°ä¸ç¬¦åˆé¡¹ç›®æ¶æ„ã€å°è£…è§„èŒƒã€æƒé™/åŸ‹ç‚¹è§„åˆ™
äººå·¥ä¿®è¡¥ + å†è¿½é—®ä¿®å¤
ä¿®äº† <span class="hljs-selector-tag">A</span> åˆå¼•å…¥ <span class="hljs-selector-tag">B</span>ï¼Œå¾ªç¯å¾€å¤
</code></pre>
<p>è¿™ç±»å¾ªç¯å¹¶ä¸æ˜¯ Cursor çš„é—®é¢˜ï¼Œè€Œæ˜¯æˆ‘ä»¬æŠŠå®ƒå½“ä½œæ›´èªæ˜çš„ä»£ç ç”Ÿæˆå™¨ï¼Œå´ä»ç”¨å¯¹è¯å¼ä¸´æ—¶äº¤ä»˜çš„æ–¹å¼ç»„ç»‡å·¥ç¨‹ç”Ÿäº§ã€‚å¯¹ä¸ªäººå°éœ€æ±‚ï¼Œè¿™æ ·æˆ–è®¸è¶³å¤Ÿï¼Œä½†å½“é¡¹ç›®è¿›å…¥å¤šäººåä½œã€å¤æ‚ç³»ç»Ÿã€è´¨é‡çº¦æŸçš„é˜¶æ®µï¼Œçº¯å¯¹è¯ä¼šæš´éœ²å‡ºç³»ç»Ÿæ€§çŸ­æ¿ã€‚ å®ƒçš„ç‰¹å¾ä¸æ˜¯AI ä¸ä¼šå†™ï¼Œè€Œæ˜¯å†™å¾—å¾ˆå¿«ä½†äº¤ä»˜ä¸ç¨³ã€‚</p>
<h2 data-id="heading-1">äºŒã€è¡Œä¸šç°çŠ¶ï¼šAI IDE å¼ºåœ¨ç”Ÿæˆï¼Œå¼±åœ¨äº¤ä»˜</h2>
<p>AI IDE çš„èƒ½åŠ›å¹¶ä¸ç­‰ä»·äºå·¥ç¨‹äº¤ä»˜èƒ½åŠ›ã€‚</p>
<h3 data-id="heading-2">AI IDE è§£å†³äº†ä»€ä¹ˆï¼Ÿ</h3>
<ul>
<li>ä»£ç ç”Ÿæˆ/è¡¥å…¨ï¼Œå¦‚é¡µé¢éª¨æ¶ã€æ¥å£è°ƒç”¨ã€å¸¸è§é€»è¾‘ã€æ ·æ¿ä»£ç </li>
<li>ä»£ç ç†è§£ï¼Œå¦‚è§£é‡Šå±€éƒ¨é€»è¾‘ã€å®šä½å¯ç–‘ç‚¹ã€ç»™å‡ºä¿®æ”¹æ–¹æ¡ˆ</li>
<li>å±€éƒ¨é‡æ„ï¼Œå¦‚æ”¹å˜é‡åã€æŠ½å‡½æ•°ã€è¿ç§»å±€éƒ¨å†™æ³•</li>
</ul>
<h3 data-id="heading-3">AI IDE æ²¡æœ‰è‡ªåŠ¨è§£å†³ä»€ä¹ˆï¼Ÿ</h3>
<p>è½¯ä»¶äº¤ä»˜ä¾èµ–çš„å…³é”®ç¯èŠ‚ä¸ä¼šå› ä¸ºâ€œèƒ½ç”Ÿæˆä»£ç â€è€Œè‡ªåŠ¨æˆç«‹ï¼š</p>
<ul>
<li>æ¶æ„ä¸€è‡´æ€§ï¼šåˆ†å±‚çº¦æŸã€ä¾èµ–æ–¹å‘ã€æ¨¡å—è¾¹ç•Œã€å¯æ‰©å±•æ€§</li>
<li>éåŠŸèƒ½çº¦æŸï¼šæ€§èƒ½ã€ç¨³å®šæ€§ã€å®‰å…¨ã€å…¼å®¹ã€å¯è§‚æµ‹æ€§</li>
<li>å¯éªŒè¯æ€§ï¼šæ„å»ºã€æµ‹è¯•ã€é™æ€æ£€æŸ¥ã€å®‰å…¨æ‰«æã€å›å½’è¯æ®</li>
<li>å¯åä½œæ€§ï¼šç»Ÿä¸€é£æ ¼ã€å¯å®¡æŸ¥å˜æ›´ã€å¯å¤ç°æµç¨‹ã€å¯æ²‰æ·€ç»éªŒ</li>
</ul>
<p>AI IDE æŠŠç¼–ç æˆæœ¬é™ä¸‹æ¥äº†ï¼Œä½†å¯¹é½æˆæœ¬ã€éªŒè¯æˆæœ¬ã€åä½œæˆæœ¬å¹¶æ²¡æœ‰è‡ªåŠ¨ä¸‹é™ã€‚ è¿™ä¹Ÿè§£é‡Šäº†ä¸ºä»€ä¹ˆå¾ˆå¤šäººä½“éªŒæ˜¯å±€éƒ¨å˜å¿«ã€æ•´ä½“ä¸ç¨³ã€‚</p>
<h2 data-id="heading-4">ä¸‰ã€é—®é¢˜å‰–æï¼šä¸ºä»€ä¹ˆæé—®å¼ç¼–ç¨‹æ•ˆç‡ä¸é«˜</h2>
<p>ä¸å°‘äººæŠŠé—®é¢˜å½’ç»“ä¸ºâ€œæç¤ºè¯å†™å¾—ä¸å¥½â€ã€‚ä½†ä»å·¥ç¨‹è§’åº¦ä¸Šï¼Œæ›´å¸¸è§çš„æ ¹å› æ˜¯ï¼šè¾“å…¥ä¸å¯æ‰§è¡Œã€è¾“å‡ºä¸å¯éªŒæ”¶ã€è¿‡ç¨‹ä¸å¯å¤ç°ã€‚å…·ä½“ä½“ç°åœ¨å››ç±»ç³»ç»Ÿæ€§é—®é¢˜ã€‚</p>
<h3 data-id="heading-5">3.1 ä¸Šä¸‹æ–‡ç¼ºå¤±ï¼šAI çœ‹åˆ°çš„æ˜¯æ–‡ä»¶ï¼Œä¸æ˜¯ç³»ç»Ÿ</h3>
<p>AI ä¸çŸ¥é“ä½ ä»¬çš„å·¥ç¨‹ç°å®ï¼š</p>
<ul>
<li>ä»£ç è§„èŒƒï¼ˆå‘½åã€å¼‚å¸¸ã€æ—¥å¿—ã€åŸ‹ç‚¹ã€çº¿ç¨‹/ç”Ÿå‘½å‘¨æœŸï¼‰</li>
<li>åŸºç¡€è®¾æ–½ï¼ˆç½‘ç»œå°è£…ã€ç¼“å­˜ç­–ç•¥ã€ç»Ÿä¸€é”™è¯¯ç ã€é‰´æƒï¼‰</li>
<li>ä¸šåŠ¡è§„åˆ™ï¼ˆæƒé™æ¨¡å‹ã€ç°åº¦å¼€å…³ã€é£æ§é™åˆ¶ã€è¾¹ç•Œåœºæ™¯ï¼‰</li>
<li>å†å²åŒ…è¢±ï¼ˆå…¼å®¹é€»è¾‘ã€æŠ€æœ¯å€ºã€éšå¼çº¦å®šï¼‰</li>
</ul>
<p>äºæ˜¯ AI æ›´å®¹æ˜“ç»™å‡ºé€šç”¨æ­£ç¡®ï¼Œè€Œä¸æ˜¯åœ¨ä½ ä»¬é¡¹ç›®é‡Œæ­£ç¡®ã€‚</p>
<h3 data-id="heading-6">3.2 æ— æ³•éªŒè¯ï¼šç¼ºå°‘è‡ªåŠ¨éªŒæ”¶ï¼Œéœ€å¼€å‘äººå‘˜è‡ªè¡ŒéªŒè¯å…œåº•</h3>
<p>å¯¹è¯å¼ç”Ÿæˆçš„æœ€å¤§æˆæœ¬ï¼Œä¸åœ¨å†™ä¸å‡ºæ¥ï¼Œè€Œåœ¨ä½ ä¸çŸ¥é“å®ƒæ˜¯ä¸æ˜¯åˆæ ¼ï¼š</p>
<ul>
<li>èƒ½å¦ç¼–è¯‘ã€æ„å»ºã€æ‰“åŒ…ï¼Ÿ</li>
<li>èƒ½å¦é€šè¿‡å•æµ‹ã€å›å½’ã€å¿«ç…§ï¼Ÿ</li>
<li>æ˜¯å¦ç ´åæƒé™ã€åŸ‹ç‚¹ã€ç¼“å­˜ã€å…¼å®¹ï¼Ÿ</li>
<li>æ˜¯å¦å¼•å…¥å®‰å…¨é£é™©ï¼ˆæ•æ„Ÿæ—¥å¿—ã€æ³¨å…¥ã€è¶Šæƒï¼‰ï¼Ÿ</li>
</ul>
<p>å¦‚æœéªŒè¯ä¸è‡ªåŠ¨åŒ–ï¼Œå°±ä¼šå½¢æˆAI ç”Ÿæˆï¼Œéœ€è¦äººæ¥éªŒæ”¶çš„ä½æ•ˆæ¨¡å¼ã€‚</p>
<h3 data-id="heading-7">3.3 ä¸å¯å¤ç°ï¼šåŒéœ€æ±‚ä¸åŒå¤©ã€ä¸åŒäººã€ä¸åŒæ¨¡å‹ï¼Œè¾“å‡ºä¸åŒ</h3>
<p>å·¥ç¨‹éœ€è¦ç¡®å®šæ€§ï¼Œä½†å¯¹è¯æ˜¯å³æ—¶æ€ï¼š</p>
<ul>
<li>æç¤ºè¯é£æ ¼å˜äº†ï¼Œè¾“å‡ºå°±å˜</li>
<li>æ¨¡å‹ç‰ˆæœ¬å˜äº†ï¼Œè¾“å‡ºå°±å˜</li>
<li>å°‘å¼•ç”¨ä¸€ä¸ªæ–‡ä»¶ï¼Œè¾“å‡ºå°±å</li>
</ul>
<p>æœ€ç»ˆå›¢é˜Ÿå¾ˆéš¾å½¢æˆå¯å¤åˆ¶äº§çº¿ã€‚</p>
<h3 data-id="heading-8">3.4 æ— æ³•åä½œï¼šä¸ªäººæç¤ºè¯éš¾ä»¥å˜æˆå›¢é˜Ÿåˆ¶åº¦</h3>
<p>å›¢é˜Ÿåä½œéœ€è¦ç»Ÿä¸€è¯­è¨€ï¼š</p>
<ul>
<li>ç›®å½•èŒè´£è¾¹ç•Œã€ç»„ä»¶æ¨¡å¼ã€æ¥å£å¥‘çº¦</li>
<li>PRÂ æ¨¡æ¿ã€éªŒæ”¶æ¸…å•ã€é£é™©è¯´æ˜</li>
<li>é”™è¯¯å¤ç›˜ã€çŸ¥è¯†åº“ã€è§„èŒƒè¿­ä»£æœºåˆ¶</li>
</ul>
<p>è€Œä¸ªäººæç¤ºè¯å¾ˆéš¾æ¼”è¿›æˆå›¢é˜Ÿèµ„äº§ï¼ŒAI åªèƒ½ä¸ºä¸ªäººææ•ˆã€‚</p>
<h2 data-id="heading-9">å››ã€å¯¹è¯å¼é™·é˜± vs å·¥ç¨‹åŒ–é—­ç¯</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2665786ea67543a789f5b6d073bbfeee~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSc6Zuo5rex56eL5p2l:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768816258&amp;x-signature=AmDXV33k7RakmhhSXYqKy%2FUUCsg%3D" alt="1.png" loading="lazy"/></p>
<p>å·¥ç¨‹åŒ–çš„å…³é”®ä¸æ˜¯è®© AI ä¸€æ¬¡åšå¯¹ï¼Œè€Œæ˜¯è®©â€œé”™è¯¯æš´éœ²æ›´å¿«ã€ä¿®å¤è¾“å…¥æ›´å‡†ç¡®ã€è¿­ä»£æ›´å¯æ”¶æ•›â€ã€‚</p>
<h2 data-id="heading-10">äº”ã€èƒ½åŠ›æˆç†Ÿåº¦æ¨¡å‹</h2>
<p>ä¸ªäººä½¿ç”¨cursorå¼€å‘è·å¾—çš„é¡¹ç›®çº§ç»éªŒå¾ˆéš¾å˜æˆå›¢é˜Ÿèµ„äº§ï¼Œä¸ºäº†ä¾¿äºå›¢é˜Ÿè½åœ°ï¼ŒæŠŠèƒ½åŠ›åˆ†çº§ä»â€œè¡Œä¸ºæè¿°â€å‡çº§ä¸ºâ€œç»„ç»‡èµ„äº§æ¨¡å‹â€ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ae5beda664234ef3af6376145c58ad1f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSc6Zuo5rex56eL5p2l:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768816258&amp;x-signature=MvqcY2S7ObfmNVgiz6ujVcm%2FLIc%3D" alt="2.png" loading="lazy"/></p>
<p>Â </p>
<h2 data-id="heading-11">å…­ã€AI å·¥ç¨‹åŒ–æ ¸å¿ƒè¦ç´ </h2>
<p>ä¸»è¦åŒ…æ‹¬è§„åˆ™èµ„äº§åŒ–ã€Spec é©±åŠ¨ã€éªŒè¯é—­ç¯ã€çŸ¥è¯†æ²‰æ·€ã€‚</p>
<h3 data-id="heading-12">6.1 åŸºæœ¬æ¡†æ¶ï¼š</h3>
<p>è§„åˆ™èµ„äº§åŒ–ï¼Œæ¢³ç†å›¢é˜Ÿç¼–ç¨‹è§„åˆ™ï¼Œé¡¹ç›®çº§åˆ«è§„åˆ™ä»¥åŠé¡¹ç›®ç»„ç»‡æ¶æ„å½¢æˆæ¨¡å‹å¯è¯»æ–‡æ¡£ï¼š</p>
<pre><code class="hljs language-css" lang="css">project-context<span class="hljs-selector-class">.md</span>ï¼šæ¶æ„ã€æŠ€æœ¯æ ˆã€ç›®å½•èŒè´£ã€å…³é”®çº¦å®š
<span class="hljs-selector-tag">code</span>-style<span class="hljs-selector-class">.md</span>ï¼šå‘½åã€å¼‚å¸¸å¤„ç†ã€æ—¥å¿—/åŸ‹ç‚¹ã€æ³¨é‡Šè§„èŒƒ
component-patterns<span class="hljs-selector-class">.md</span>ï¼šé¡µé¢éª¨æ¶ã€ç»„ä»¶æ‹†åˆ†ã€çŠ¶æ€ç®¡ç†æ¨¡å¼
api-conventions<span class="hljs-selector-class">.md</span>ï¼šè¯·æ±‚å°è£…ã€é”™è¯¯ç ã€é‡è¯•/é™çº§/ç¼“å­˜ç­–ç•¥
security-checklist<span class="hljs-selector-class">.md</span>ï¼šæ•æ„Ÿä¿¡æ¯ã€æƒé™æ ¡éªŒã€è¾“å…¥è¾“å‡ºå¤„ç†
observability<span class="hljs-selector-class">.md</span>ï¼šåŸ‹ç‚¹ã€æ—¥å¿—å­—æ®µã€Trace/<span class="hljs-selector-tag">Span</span> çº¦å®šï¼ˆå¦‚æœ‰ï¼‰
</code></pre>
<p>Spec é©±åŠ¨å¼€å‘ï¼ŒæŠŠéœ€æ±‚å˜æˆå¯æ‰§è¡Œçš„ä»»åŠ¡å• å¯¹æ¯”ä¸¤ç§è¾“å…¥ï¼š</p>
<pre><code class="hljs">ä½è´¨é‡è¾“å…¥ï¼šâ€œå¸®æˆ‘å†™ä¸ªç”¨æˆ·ç®¡ç†é¡µé¢â€
å·¥ç¨‹åŒ–è¾“å…¥ï¼ˆSpecï¼‰ï¼šæ˜ç¡®ç›®æ ‡ã€çº¦æŸã€æ–‡ä»¶æ¸…å•ã€è¾¹ç•Œã€éªŒæ”¶æ ‡å‡†
</code></pre>
<p>Spec æ¨¡æ¿ï¼š</p>
<pre><code class="hljs">ã€ä»»åŠ¡IDã€‘ï¼š
ã€èƒŒæ™¯/ç›®æ ‡ã€‘ï¼ˆç”¨æˆ·å¯æ„ŸçŸ¥ï¼‰ï¼š
ã€èŒƒå›´ã€‘ï¼ˆåŒ…å«/ä¸åŒ…å«ï¼‰ï¼š
ã€æŠ€æœ¯çº¦æŸã€‘ï¼ˆå¿…é¡»/ç¦æ­¢ï¼‰ï¼š
ã€æ–‡ä»¶æ¸…å•ã€‘ï¼ˆæ–°å»º/ä¿®æ”¹ï¼‰ï¼š
ã€è¾¹ç•Œä¸å¤±è´¥ç­–ç•¥ã€‘ï¼ˆç©ºæ€/æƒé™/ç½‘ç»œ/å…¼å®¹ï¼‰ï¼š
ã€éªŒæ”¶æ ‡å‡†ã€‘
æ„å»ºï¼š
æµ‹è¯•ï¼š
é™æ€æ£€æŸ¥ï¼š
å®‰å…¨/åˆè§„ï¼š
å…³é”®ç”¨ä¾‹ï¼š
</code></pre>
<p>è‡ªåŠ¨åŒ–éªŒè¯é—­ç¯ é—­ç¯çš„æ ¸å¿ƒæ˜¯ï¼šç”Ÿæˆä¹‹åç«‹åˆ»éªŒè¯ï¼Œå¤±è´¥ä¹‹åç”¨æ—¥å¿—é©±åŠ¨æœ€å°ä¿®å¤ã€‚ ä¸éœ€è¦ä¸€å¼€å§‹å°±æŠŠæ‰€æœ‰æµ‹è¯•åšé½ï¼Œå»ºè®®æŒ‰â€œæœ€å°å¯è¡ŒéªŒè¯â€é€æ­¥æ‰©å±•ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">ç¬¬ 1 é˜¶æ®µï¼šlint / format / typecheckï¼ˆæœ€å¿«æš´éœ²ä½çº§é”™è¯¯ï¼‰
ç¬¬ 2 é˜¶æ®µï¼šbuildï¼ˆæš´éœ²ä¾èµ–ã€æ‰“åŒ…ã€èµ„æºã€ç¼–è¯‘é—®é¢˜ï¼‰
ç¬¬ 3 é˜¶æ®µï¼šunit <span class="hljs-built_in">test</span> / snapshotï¼ˆæš´éœ²é€»è¾‘å›å½’ï¼‰
ç¬¬ 4 é˜¶æ®µï¼še2e / é›†æˆæµ‹è¯•ï¼ˆæš´éœ²å…³é”®è·¯å¾„ï¼‰
</code></pre>
<p><strong>çŸ¥è¯†æ²‰æ·€ï¼ŒæŠŠæ¯æ¬¡å¤±è´¥å˜æˆä¸‹æ¬¡æˆåŠŸçš„å…ˆéªŒ</strong> å»ºç«‹é”™è¯¯çŸ¥è¯†åº“ï¼ˆå¯æŒ‰æ¨¡å—/ç±»å‹ç»„ç»‡ï¼‰ï¼š</p>
<pre><code class="hljs">è®°å½•ï¼šé”™è¯¯ç°è±¡ã€æ ¹å› ã€æœ€å°ä¿®å¤ã€å¦‚ä½•é¢„é˜²ã€å…³è”è§„åˆ™
æŠŠé¢„é˜²å†™å›è§„åˆ™èµ„äº§ï¼ˆè§„åˆ™å¢é‡æœºåˆ¶ï¼‰
ä¸‹ä¸€æ¬¡ Spec é»˜è®¤å¼•ç”¨ç›¸å…³è§„åˆ™ï¼Œé™ä½é‡å¤è¸©å‘
</code></pre>
<h3 data-id="heading-13"><strong>6.2 å®è·µè¦ç´ ï¼š</strong></h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0ac82ec6f62f48658fe2487d46734b80~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSc6Zuo5rex56eL5p2l:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768816258&amp;x-signature=rsIOTi0zov8cX7qTdShlSpQ7VlA%3D" alt="4.png" loading="lazy"/></p>
<h3 data-id="heading-14">6.3 å·¥ç¨‹å®è·µæµç¨‹ï¼š</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/215032882225441b84b8eb05cc857df0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSc6Zuo5rex56eL5p2l:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768816258&amp;x-signature=PIkjYbH%2B7aZWz9htl6uPHRK54P0%3D" alt="3.png" loading="lazy"/></p>
<h2 data-id="heading-15">ä¸ƒã€AI å·¥ç¨‹åŒ–æ¥ä¸‹æ¥ä¼šèµ°å‘å“ªé‡Œï¼Ÿ</h2>
<p>ç»“åˆè¿‡å»ä¸¤å¹´çš„å·¥å…·æ¼”è¿›ï¼š <strong>1ã€æç¤ºè¯å·¥ç¨‹é€€æ½®ï¼Œè§„æ ¼/å¥‘çº¦å·¥ç¨‹ä¸Šå‡</strong> ç»„ç»‡ä¼šæŠŠç»éªŒæ²‰æ·€ä¸ºæ¨¡æ¿ä¸å¥‘çº¦ï¼Œè€Œä¸æ˜¯é ä¸ªäººæŠ€å·§ã€‚ <strong>2ã€AI ä»åŠ©æ‰‹å˜æˆæµæ°´çº¿èŠ‚ç‚¹</strong> AI å°†æ›´ç´§å¯†åœ°è¿æ¥æ„å»ºç»“æœã€æµ‹è¯•å¤±è´¥ã€æ‰«ææŠ¥å‘Šã€ä¾èµ–é£é™©ï¼Œæˆä¸ºäº¤ä»˜é“¾è·¯çš„ä¸€ç¯ã€‚ <strong>3ã€å¯å®¡è®¡æˆä¸ºé»˜è®¤é—¨æ§›</strong> æœªæ¥è¯„å®¡ä¸ä»…çœ‹ä»£ç ï¼Œä¹Ÿçœ‹è¯æ®é“¾ï¼ŒéªŒè¯ç»“æœã€é£é™©è¯´æ˜ã€å½±å“èŒƒå›´ã€å›æ»šç­–ç•¥ç­‰ã€‚</p>
<h2 data-id="heading-16">å…«ã€ç»“è¯­ï¼šå¼€å‘è€…è§’è‰²å‡çº§ï¼Œä¸æ˜¯è¢«æ›¿ä»£</h2>
<p>å½“æˆ‘ä»¬ä»æŒ‡ä»¤å¼ç¼–ç¨‹èµ°å‘AI å·¥ç¨‹åŒ–ï¼Œå˜åŒ–ä¸åœ¨äºè°å†™ä»£ç ï¼Œè€Œåœ¨äºè°å®šä¹‰ç³»ç»Ÿï¼š</p>
<ul>
<li>å¼€å‘è€…ä»ä»£ç ç”Ÿäº§è€…å‡çº§ä¸ºäº¤ä»˜ç³»ç»Ÿè®¾è®¡å¸ˆ</li>
</ul>

<ul>
<li>ä»·å€¼ä»å†™å¾—å¿«è½¬å‘äº¤ä»˜ç¨³ã€å¯å¤åˆ¶ã€å¯å®¡è®¡</li>
</ul>

<ul>
<li>AI ä»ç”Ÿæˆç­”æ¡ˆè½¬å‘åœ¨çº¦æŸå†…æŒç»­è¿­ä»£ç›´åˆ°é€šè¿‡éªŒæ”¶</li>
</ul>
<p>AI å·¥ç¨‹åŒ–çš„ç»ˆç‚¹ä¸æ˜¯ AI å–ä»£äººï¼Œè€Œæ˜¯ï¼šäººè´Ÿè´£å®šä¹‰è§„åˆ™ä¸è´¨é‡è¾¹ç•Œï¼ŒAI è´Ÿè´£åœ¨è¾¹ç•Œå†…é«˜æ•ˆç‡æ‰§è¡Œã€‚ è¿™æ‰æ˜¯ Cursor è¿™ç±»å·¥å…·çœŸæ­£èƒ½é‡Šæ”¾çš„é•¿æœŸç”Ÿäº§åŠ›ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[VibeCoding:ä¸‡ä¸‡æ²¡æƒ³åˆ°ä¹‹2025ï¼ŒTraeç¼–ç¨‹å±…ç„¶è¿˜èƒ½ç©éŸ³ä¹åˆ›ä½œï¼Ÿ]]></title>    <link>https://juejin.cn/post/7593892837898534927</link>    <guid>https://juejin.cn/post/7593892837898534927</guid>    <pubDate>2026-01-12T06:17:13.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7593892837898534927" data-draft-id="7593679324248162304" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="VibeCoding:ä¸‡ä¸‡æ²¡æƒ³åˆ°ä¹‹2025ï¼ŒTraeç¼–ç¨‹å±…ç„¶è¿˜èƒ½ç©éŸ³ä¹åˆ›ä½œï¼Ÿ"/> <meta itemprop="keywords" content="Trae"/> <meta itemprop="datePublished" content="2026-01-12T06:17:13.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç†ŠçŒ«é’“é±¼"/> <meta itemprop="url" content="https://juejin.cn/user/1303344484202867"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            VibeCoding:ä¸‡ä¸‡æ²¡æƒ³åˆ°ä¹‹2025ï¼ŒTraeç¼–ç¨‹å±…ç„¶è¿˜èƒ½ç©éŸ³ä¹åˆ›ä½œï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1303344484202867/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç†ŠçŒ«é’“é±¼
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-12T06:17:13.000Z" title="Mon Jan 12 2026 06:17:13 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d23711978e5e4901affee16716f81bb1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54aK54yr6ZKT6bG8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768803433&amp;x-signature=jiv9ypvLM3OPv6dDR%2FHxapn0u1c%3D" alt="" loading="lazy"/></p>
<p>===========================================================================================================================================================================================================================================================================================================================================================================================</p>
<h4 data-id="heading-0">2025ï¼Œæˆ‘çš„â€œVibe Codingâ€æ—¶åˆ»</h4>
<p>æˆ‘çœŸæ˜¯ä¸‡ä¸‡æ²¡æƒ³åˆ°ã€‚</p>
<p>æˆ‘æäº†ä¸€ä¸ªï¼ŒåŸºäºPythonçš„AIéŸ³ä¹ç”Ÿæˆä¸äº¤äº’å¼GUIæ’­æ”¾å™¨ã€‚</p>
<p>éšç€TRAEçš„ç”¨æˆ·æ—¥ç›Šå¢é•¿ï¼Œæ•°å­—æ¸¸æ°‘ç­‰æ¦‚å¿µå¼€å¯çš„æ–°ç”Ÿæ´»å°è¯•å±¡è§ä¸é²œã€‚</p>
<p>è€Œæˆ‘ï¼Œå±…ç„¶æƒ³åˆ°è®©TRAEå¸®æˆ‘å¤åˆ»æ€€æ—§éŸ³ä¹ã€‚</p>
<h2 data-id="heading-1">1. éœ€æ±‚æè¿°</h2>
<p>æˆ‘è¿™ä¸ªé¡¹ç›®ï¼Œæ—¨åœ¨å¼€å‘ä¸€ä¸ªå®Œæ•´çš„éŸ³ä¹ç”Ÿæˆä¸æ’­æ”¾ç³»ç»Ÿã€‚</p>
<p>æˆ‘çš„éœ€æ±‚æ˜¯ï¼šèƒ½å¤ŸåŸºäºéŸ³ä¹ç†è®ºå’ŒAIç®—æ³•ç”Ÿæˆå¤šç§é£æ ¼çš„éŸ³ä¹ï¼Œå¹¶æä¾›ç”¨æˆ·å‹å¥½çš„å›¾å½¢ç•Œé¢æ’­æ”¾å™¨ã€‚</p>
<p>é€šä¿—æ¥è¯´ï¼Œå°±æ˜¯åˆ›ä½œæˆ‘å–œæ¬¢çš„éŸ³ä¹ï¼Œè¿™å¯¹TRAEä¸€ä¸ªå¼€å‘å·¥å…·æ¥è¯´ï¼Œç¡®å®æœ‰ä¸å°çš„æŒ‘æˆ˜ã€‚</p>
<p>å› ä¸ºè¿™æ„å‘³ç€å®ƒä¸ä»…è¦è§£å†³ç¼–ç¨‹é—®é¢˜ï¼Œè¿˜éœ€è¦æ‡‚ç‚¹éŸ³ä¹åŸºç¡€çŸ¥è¯†ï¼Œæ›´é‡è¦çš„æ˜¯ï¼Œè¦æœ‰èƒ½åŠ›æ’­æ”¾ã€‚æˆ‘æ€»ç»“éœ€è¦çš„èƒ½åŠ›å¦‚ä¸‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/de4dfe88b00741769570bc3602aa1e6b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54aK54yr6ZKT6bG8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768803433&amp;x-signature=IEc8%2Brk2QmFzuD%2BgAerL3NivCBE%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-2">éŸ³ä¹ç”Ÿæˆ</h4>
<p>æ”¯æŒ15+ç§éŸ³ä¹é£æ ¼ï¼Œ30+å’Œå¼¦ç±»å‹ï¼ŒBPMèŒƒå›´60-180ï¼Œå¯ç”Ÿæˆ1-10åˆ†é’Ÿé•¿åº¦çš„éŸ³ä¹ã€‚</p>
<h4 data-id="heading-3">GUIæ’­æ”¾å™¨</h4>
<p>åŸºäºTkinterå¼€å‘ï¼ŒåŒ…å«æ’­æ”¾æ§åˆ¶ã€è¿›åº¦æ¡ã€éŸ³é‡è°ƒèŠ‚ã€é€Ÿåº¦æ§åˆ¶ç­‰åŠŸèƒ½ã€‚</p>
<h4 data-id="heading-4">ç®—æ³•ä¼˜åŒ–</h4>
<p>å®ç°13ç§æ—‹å¾‹åŠ¨æœºå‘å±•ç±»å‹ï¼ŒéŸ³ä¹ç»“æ„åŒ…å«å‰å¥ã€é—´å¥ã€ä¸»æ­Œç­‰å®Œæ•´æ®µè½ã€‚</p>
<p>åœ¨VibeCodingç”ŸæˆéŸ³ä¹çš„è¿‡ç¨‹ä¸­ï¼Œæœ€è®©æˆ‘ç€è¿·çš„æ˜¯é‚£ç§"ä»£ç ä¸è‰ºæœ¯ç¢°æ’"çš„å¥‡å¦™ä½“éªŒâ€”â€”åŸæœ¬å†°å†·çš„å­—ç¬¦ç»„åˆï¼Œç«Ÿèƒ½æµæ·Œå‡ºæœ‰æ¸©åº¦ã€æœ‰æƒ…ç»ªçš„æ—‹å¾‹ï¼Œè¿™ç§åå·®æ„Ÿæœ¬èº«å°±æ˜¯ä¸€ç§ç‹¬ç‰¹çš„ä¹è¶£ã€‚</p>
<p>Â æƒ³è±¡ä¸€ä¸‹ï¼šä½ åªæ˜¯è°ƒæ•´äº†å‡ ä¸ªå‚æ•°ï¼ˆæ¯”å¦‚æŠŠBPMä»120é™åˆ°90ï¼Œé€‰æ‹©"relaxed"é£æ ¼ï¼Œå†æ­é…ä¸€ç»„ä¹å’Œå¼¦ï¼‰ï¼ŒæŒ‰ä¸‹"ç”Ÿæˆ"æŒ‰é’®çš„ç¬é—´ï¼Œç³»ç»Ÿå°±åƒä¸€ä½æ‡‚ä½ çš„éŸ³ä¹ä¼™ä¼´ï¼Œç”¨ç®—æ³•ç¼–ç»‡å‡ºä¸€æ®µæˆ–è®¸ä½ ä»æœªé¢„æƒ³è¿‡çš„æ¸©æŸ”æ—‹å¾‹ã€‚å½“éŸ³ç¬¦ä»æ‰¬å£°å™¨é‡Œé£˜å‡ºæ¥çš„é‚£ä¸€åˆ»ï¼Œé‚£ç§"å“‡ï¼Œè¿™æ˜¯æˆ‘ç”¨ä»£ç åˆ›é€ çš„"æˆå°±æ„Ÿï¼ŒçœŸçš„éš¾ä»¥è¨€å–»ã€‚Â </p>
<p>Â è¿˜æœ‰æ¢ç´¢çš„ä¹è¶£â€”â€”ä½ æ°¸è¿œä¸çŸ¥é“ä¸‹ä¸€æ¬¡ç”Ÿæˆä¼šå¾—åˆ°ä»€ä¹ˆã€‚å¯èƒ½æ˜¯ä¸€æ®µå……æ»¡æ´»åŠ›çš„åŠ¨æ¼«ä¸»é¢˜æ›²é£æ ¼ï¼Œä¹Ÿå¯èƒ½æ˜¯ä¸€é¦–èˆ’ç¼“çš„å¤œæ›²ã€‚æœ‰æ—¶å€™æˆ‘ä¼šæ•…æ„å°è¯•ä¸€äº›"å¥‡æ€ª"çš„å‚æ•°ç»„åˆï¼Œæ¯”å¦‚æé«˜çš„BPMæ­é…æ…¢èŠ‚å¥çš„å’Œå¼¦è¿›è¡Œï¼Œåè€Œä¼šæ”¶è·æ„å¤–çš„æƒŠå–œï¼Œè¿™ç§"å¤±æ§ä¸­çš„å¯æ§"ï¼Œåƒæäº†ä¸€åœºéŸ³ä¹å†’é™©ã€‚Â </p>
<p>Â æ›´æ£’çš„æ˜¯GUIç•Œé¢å¸¦æ¥çš„ç›´è§‚ä½“éªŒï¼šçœ‹ç€è¿›åº¦æ¡ç¼“ç¼“ç§»åŠ¨ï¼Œå¬ç€éŸ³ä¹éšæ»‘å—é€Ÿåº¦å˜åŒ–è€Œå¿«æ…¢æœ‰è‡´ï¼Œé‚£ç§"æŒæ§éŸ³ä¹"çš„æ„Ÿè§‰çœŸçš„å¾ˆæ²»æ„ˆã€‚ä½ ä¸éœ€è¦æ‡‚å¤æ‚çš„ä¹ç†ï¼Œåªè¦è·Ÿç€æ„Ÿè§‰è°ƒæ•´å‚æ•°ï¼Œå°±èƒ½åˆ›é€ å‡ºå±äºè‡ªå·±çš„ç‹¬ç‰¹ä½œå“ã€‚</p>
<h2 data-id="heading-5">2. æ¶æ„ä¸å®ç°</h2>
<p>æœ¬é¡¹ç›®é‡‡ç”¨æ¨¡å—åŒ–è®¾è®¡ï¼Œä¸»è¦åˆ†ä¸ºéŸ³ä¹ç”Ÿæˆæ ¸å¿ƒæ¨¡å—å’ŒGUIæ’­æ”¾å™¨æ¨¡å—ï¼Œä¸¤è€…é€šè¿‡æ¸…æ™°çš„æ¥å£è¿›è¡Œäº¤äº’ã€‚</p>
<p>è¯´èµ·æˆ‘è¿™ä¸ªå¼€å‘è¿‡ç¨‹ï¼Œå®Œå…¨æ˜¯å€ŸåŠ©TRAEè‡ªå·±è„‘è¡¥ï¼ŒVibeCodingï¼Œé¡¹ç›®ç»å†äº†ä»ç®€å•çš„éŸ³ä¹ç”Ÿæˆåˆ°å¤æ‚çš„GUIé›†æˆçš„å¤šä¸ªè¿­ä»£é˜¶æ®µï¼Œæœ€ç»ˆå®ç°äº†ä¸€ä¸ªåŠŸèƒ½ä¸°å¯Œã€æ€§èƒ½ç¨³å®šçš„éŸ³ä¹åˆ›ä½œå·¥å…·ã€‚</p>
<p>ç³»ç»Ÿæ¶æ„å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/80957d37670142fe8420301bda020bc8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54aK54yr6ZKT6bG8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768803433&amp;x-signature=s4QDPiAv4NkOJrJsP7qnobaTzBI%3D" alt="" loading="lazy"/></p>
<p>éŸ³ä¹ç”Ÿæˆä¸æ’­æ”¾å™¨ç³»ç»Ÿæ¶æ„åŒ…æ‹¬ä¸‰å±‚ï¼š</p>
<p>1. GUIå±‚ (Tkinter)</p>
<p>â€¢ æ–‡ä»¶é€‰æ‹©ä¸ç®¡ç†</p>
<p>â€¢ æ’­æ”¾æ§åˆ¶ (æ’­æ”¾/æš‚åœ/åœæ­¢)</p>
<p>â€¢ å‚æ•°é…ç½® (é£æ ¼/BPM/é•¿åº¦)</p>
<p>â€¢ è¿›åº¦æ¡ä¸é€Ÿåº¦æ§åˆ¶</p>
<p>2. æ ¸å¿ƒå±‚ (éŸ³ä¹ç”Ÿæˆå™¨)</p>
<p>â€¢ å’Œå¼¦è¿›è¡Œç”Ÿæˆ</p>
<p>â€¢ æ—‹å¾‹åŠ¨æœºå‘å±•</p>
<p>â€¢ å¤šè½¨éŸ³ä¹åˆæˆ</p>
<p>â€¢ é£æ ¼ä¸BPMé€‚é…</p>
<p>3. æ’­æ”¾å±‚ (pygame.mixer)</p>
<p>â€¢ MIDIæ–‡ä»¶åŠ è½½</p>
<p>â€¢ æ’­æ”¾æ§åˆ¶ä¸éŸ³é‡è°ƒèŠ‚</p>
<p>â€¢ å¾ªç¯æ’­æ”¾ä¸é€Ÿåº¦æ¨¡æ‹Ÿ</p>
<p>å¯¹è¯ä¸­ï¼Œæˆ‘ä»¬å›´ç»•PythonéŸ³ä¹ç”Ÿæˆä¸æ’­æ”¾å™¨ç³»ç»Ÿçš„å¼€å‘ä¸å®Œå–„å±•å¼€äº†ä¸€ç³»åˆ—è®¨è®ºå’Œæ“ä½œï¼šÂ </p>
<p>Â 1. ä»£ç åˆ†æ ï¼šé¦–å…ˆæŸ¥çœ‹äº†midi_player.pyï¼ˆGUIæ’­æ”¾å™¨ï¼‰å’Œmusic_generator.pyï¼ˆéŸ³ä¹ç”Ÿæˆå™¨ï¼‰çš„ä»£ç å†…å®¹ï¼Œäº†è§£ç³»ç»Ÿçš„ç°æœ‰åŠŸèƒ½å’Œç»“æ„ã€‚</p>
<p>Â 2. è®¡åˆ’åˆ¶å®š ï¼šåŸºäºä»£ç åˆ†æç»“æœï¼Œåˆ¶å®šäº†GUIéŸ³ä¹æ’­æ”¾å™¨çš„å®Œå–„è®¡åˆ’ï¼ŒåŒ…å«6ä¸ªæ ¸å¿ƒä»»åŠ¡ï¼š - åœ¨GUIä¸­é›†æˆéŸ³ä¹ç”ŸæˆåŠŸèƒ½ - æ·»åŠ æ’­æ”¾è¿›åº¦æ¡ - å®ç°å¾ªç¯æ’­æ”¾åŠŸèƒ½ - æ·»åŠ æ’­æ”¾é€Ÿåº¦è°ƒèŠ‚åŠŸèƒ½ - ä¼˜åŒ–ç•Œé¢ç¾è§‚åº¦ - æµ‹è¯•æ‰€æœ‰æ–°åŠŸèƒ½ã€‚Â </p>
<p>3. åŠŸèƒ½å®ç° ï¼šæŒ‰ç…§è®¡åˆ’é€æ­¥å®ç°å„åŠŸèƒ½æ¨¡å—ï¼š - é›†æˆéŸ³ä¹ç”ŸæˆåŠŸèƒ½ï¼Œæ·»åŠ ç”ŸæˆæŒ‰é’®å’Œå‚æ•°é…ç½®ç•Œé¢ - å®ç°æ’­æ”¾è¿›åº¦æ¡ï¼Œæ”¯æŒå®æ—¶æ›´æ–°å’Œè·³è½¬ - æ·»åŠ å¾ªç¯æ’­æ”¾åŠŸèƒ½ - å®ç°æ’­æ”¾é€Ÿåº¦è°ƒèŠ‚ï¼ˆ0.5x-2.0xï¼‰ - ä¼˜åŒ–ç•Œé¢å¸ƒå±€å’Œç¾è§‚åº¦ã€‚</p>
<h3 data-id="heading-6">æ ¸å¿ƒæŠ€æœ¯æ ˆ</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/012a91ce217348dbb876c990f9cdd7ea~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54aK54yr6ZKT6bG8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768803433&amp;x-signature=duB%2FaYSSJK8FcVDXlpT5zKl0QJ4%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-7">å¯¹è¯å®ç°è¿‡ç¨‹å¦‚ä¸‹ï¼š</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ef10204aaf4e417cae0c74899fabc008~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54aK54yr6ZKT6bG8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768803433&amp;x-signature=ftgYOJHKtKWJ39kfk3sdkdKlvqY%3D" alt="" loading="lazy"/></p>
<p>æˆ‘è¯•å¬äº†ä¸€ä¸‹ï¼Œè§‰å¾—å†…å®¹æœ‰äº›é‡å¤ï¼Œç„¶åç»§ç»­è®©Builderå®Œå–„ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8a5fe59966ad48d096600deff060c1c5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54aK54yr6ZKT6bG8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768803433&amp;x-signature=tinLVMCkAsUbUoKRqiC3AFBpWcM%3D" alt="" loading="lazy"/></p>
<p>å®Œå–„çš„æ€è€ƒè¿‡ç¨‹å¦‚ä¸‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bfda1d58b71f4d3fa8277fcd021a44de~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54aK54yr6ZKT6bG8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768803433&amp;x-signature=EidW69uGDVoiFzYLHcyWe6uejiM%3D" alt="" loading="lazy"/></p>
<p>å¯ä»¥çœ‹åˆ°AIä¸ä»…å®Œæˆäº†ä»£ç ï¼Œè¿˜è¿›è¡Œäº†åŠŸèƒ½éªŒè¯ï¼Œç¡®ä¿ç»“æœçš„åˆç†æ€§å’Œä¸¥è°¨æ€§ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0bc1d72b1fb14b5b862442aa71c0d39f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54aK54yr6ZKT6bG8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768803433&amp;x-signature=WSDhcCm2nf3PE55cF%2BFq3tUJDCg%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/404e32a7b2f94869bc7cb5be9df46a87~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54aK54yr6ZKT6bG8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768803433&amp;x-signature=gleQDhXSVqyTuV5MjuP5LeU11PM%3D" alt="" loading="lazy"/></p>
<p>å®Œæˆåè¿è¡Œç•Œé¢å¦‚ä¸‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5e96dd1ff01c4a4e802e443d4ebc6c8f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54aK54yr6ZKT6bG8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768803433&amp;x-signature=s5HLcLbV4BAidBTu4%2FKs51p4PSU%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c969230625244853ba360554b6b88e3f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54aK54yr6ZKT6bG8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768803433&amp;x-signature=BaUF3E06ByqWIsHiVvaWXC0GZMM%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-8">3. éŸ³ä¹ç”Ÿæˆç®—æ³•</h2>
<h3 data-id="heading-9">3.1 å’Œå¼¦ç³»ç»Ÿ</h3>
<p>é¡¹ç›®å®ç°äº†30+ç§å’Œå¼¦ç±»å‹ï¼ŒåŒ…æ‹¬å¤§è°ƒå’Œå¼¦ã€å°è°ƒå’Œå¼¦ã€ä¸ƒå’Œå¼¦ã€ä¹å’Œå¼¦ã€æŒ‚ç•™å’Œå¼¦ç­‰ï¼Œä¸ºéŸ³ä¹ç”Ÿæˆæä¾›äº†ä¸°å¯Œçš„å’Œå£°åŸºç¡€ã€‚</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">self.chords</span> = {
    <span class="hljs-comment"># å¤§è°ƒå’Œå¼¦</span>
    'C': <span class="hljs-section">[48, 52, 55]</span>, 'D': <span class="hljs-section">[50, 54, 57]</span>, 'E': <span class="hljs-section">[52, 56, 59]</span>,
    <span class="hljs-comment"># å°è°ƒå’Œå¼¦</span>
    'Cm': <span class="hljs-section">[48, 51, 55]</span>, 'Dm': <span class="hljs-section">[50, 53, 57]</span>, 'Em': <span class="hljs-section">[52, 55, 59]</span>,
    <span class="hljs-comment"># ä¸ƒå’Œå¼¦</span>
    'C7': <span class="hljs-section">[48, 52, 55, 58]</span>, 'D7': <span class="hljs-section">[50, 54, 57, 60]</span>, 'E7': <span class="hljs-section">[52, 56, 59, 62]</span>,
    <span class="hljs-comment"># ä¹å’Œå¼¦</span>
    'C9': <span class="hljs-section">[48, 52, 55, 58, 62]</span>, 'D9': <span class="hljs-section">[50, 54, 57, 60, 64]</span>, 'E9': <span class="hljs-section">[52, 56, 59, 62, 66]</span>,
    <span class="hljs-comment"># æŒ‚ç•™å’Œå¼¦</span>
    'Csus2': <span class="hljs-section">[48, 50, 55]</span>, 'Csus4': <span class="hljs-section">[48, 53, 55]</span>,
    <span class="hljs-comment"># æ›´å¤šå’Œå¼¦ç±»å‹...</span>
}
</code></pre>
<h3 data-id="heading-10">3.2 æ—‹å¾‹ç”Ÿæˆä¸åŠ¨æœºå‘å±•</h3>
<p>æ—‹å¾‹ç”Ÿæˆç®—æ³•åŸºäºéŸ³ä¹ç†è®ºå’Œéšæœºè¿‡ç¨‹ï¼Œå®ç°äº†13ç§æ—‹å¾‹åŠ¨æœºå‘å±•ç±»å‹ï¼ŒåŒ…æ‹¬è½¬è°ƒã€åˆ‡åˆ†éŸ³ã€ç¶éŸ³åŒ–ç­‰ï¼Œä½¿ç”Ÿæˆçš„æ—‹å¾‹æ›´åŠ ä¸°å¯Œå¤šå˜ã€‚</p>
<h4 data-id="heading-11">13ç§æ—‹å¾‹åŠ¨æœºå‘å±•ç±»å‹</h4>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/36406a68dc3e428cbb349d3286770333~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54aK54yr6ZKT6bG8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768803433&amp;x-signature=WwW9rcEiEUuWesKVkUkk58ocUn8%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-12">3.3 éŸ³ä¹ç»“æ„è®¾è®¡</h3>
<p>ç”Ÿæˆçš„éŸ³ä¹åŒ…å«å®Œæ•´çš„éŸ³ä¹ç»“æ„ï¼ŒåŒ…æ‹¬å‰å¥ã€é—´å¥ã€ä¸»æ­Œç­‰æ®µè½ï¼Œä½¿éŸ³ä¹æ›´åŠ æœ‰å±‚æ¬¡æ„Ÿå’Œå®Œæ•´æ€§ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0fd75c043b8346e8b358c22a353d6d92~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54aK54yr6ZKT6bG8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768803433&amp;x-signature=bHFOQBjeVLStKdIvh33xJVPhB6Q%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-13">éŸ³ä¹ç»“æ„åŒ…æ‹¬å¦‚ä¸‹ï¼š</h4>
<p>å‰å¥ (4-8å°èŠ‚)ï¼Œé—´å¥ (4-8å°èŠ‚)ï¼Œä¸»æ­Œ (8-16å°èŠ‚)ï¼Œå°¾å¥ (2-4å°èŠ‚)</p>
<h2 data-id="heading-14">4. GUIæ’­æ”¾å™¨å®ç°</h2>
<p>åŸºäºTkinterå¼€å‘çš„éŸ³ä¹æ’­æ”¾å™¨æä¾›äº†ä¸°å¯Œçš„åŠŸèƒ½ï¼ŒåŒ…æ‹¬æ–‡ä»¶é€‰æ‹©ã€æ’­æ”¾æ§åˆ¶ã€è¿›åº¦æ¡ã€éŸ³é‡è°ƒèŠ‚ã€å¾ªç¯æ’­æ”¾ã€æ’­æ”¾é€Ÿåº¦æ§åˆ¶ç­‰ã€‚</p>
<h3 data-id="heading-15">4.1 æ ¸å¿ƒåŠŸèƒ½</h3>
<h4 data-id="heading-16">æ’­æ”¾æ§åˆ¶</h4>
<p>æ’­æ”¾ã€æš‚åœã€åœæ­¢æŒ‰é’®ï¼Œæ”¯æŒå¾ªç¯æ’­æ”¾å’Œè¿›åº¦æ¡è·³è½¬</p>
<h4 data-id="heading-17">éŸ³é‡æ§åˆ¶</h4>
<p>éŸ³é‡æ»‘å—å®æ—¶è°ƒèŠ‚ï¼ŒèŒƒå›´0-100</p>
<h4 data-id="heading-18">é€Ÿåº¦æ§åˆ¶</h4>
<p>æ”¯æŒ0.5x-2.0xå€é€Ÿæ’­æ”¾ï¼Œè¿›åº¦ä¸é€Ÿåº¦åŒæ­¥</p>
<h3 data-id="heading-19">4.2 è¿›åº¦æ¡å®ç°</h3>
<p>è¿›åº¦æ¡æ”¯æŒç‚¹å‡»è·³è½¬åŠŸèƒ½ï¼Œé€šè¿‡ç²¾ç¡®è®¡ç®—æ—¶é—´å®ç°å‡†ç¡®å®šä½ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">def seek_music(self, event):
    if self.total_duration &gt; 0 and os.path.exists(self.current_file):
        <span class="hljs-attr">x</span> = event.x
        <span class="hljs-attr">progress_width</span> = self.progress_bar.winfo_width()
        if <span class="hljs-attr">progress_width</span> == <span class="hljs-number">0</span>:
            return
        <span class="hljs-attr">seek_ratio</span> = x / progress_width
        <span class="hljs-attr">seek_time</span> = seek_ratio * self.total_duration  <span class="hljs-comment"># æµ®ç‚¹æ•°ç²¾ç¡®è®¡ç®—</span>
        <span class="hljs-attr">seek_time</span> = max(<span class="hljs-number">0</span>, min(seek_time, self.total_duration))  <span class="hljs-comment"># è¾¹ç•Œæ£€æŸ¥</span>
        <span class="hljs-attr">was_playing</span> = self.is_playing
        <span class="hljs-attr">was_looping</span> = self.is_looping
        pygame.mixer.music.stop()
        pygame.mixer.music.load(self.current_file)
        pygame.mixer.music.play(<span class="hljs-attr">start</span>=seek_time, loops=-<span class="hljs-number">1</span> if was_looping else <span class="hljs-number">0</span>)
        <span class="hljs-attr">self.current_time</span> = seek_time
        <span class="hljs-attr">self.is_playing</span> = was_playing
        <span class="hljs-attr">progress</span> = (self.current_time / self.total_duration) * <span class="hljs-number">100</span>
        self.progress_bar.config(<span class="hljs-attr">value</span>=progress)
        <span class="hljs-attr">current_min</span> = int(self.current_time // <span class="hljs-number">60</span>)
        <span class="hljs-attr">current_sec</span> = int(self.current_time % <span class="hljs-number">60</span>)
        <span class="hljs-attr">total_min</span> = int(self.total_duration // <span class="hljs-number">60</span>)
        <span class="hljs-attr">total_sec</span> = int(self.total_duration % <span class="hljs-number">60</span>)
        self.time_label.config(<span class="hljs-attr">text</span>=f<span class="hljs-string">"{current_min}:{current_sec:02d} / {total_min}:{total_sec:02d}"</span>)
</code></pre>
<h3 data-id="heading-20">4.3 æ’­æ”¾é€Ÿåº¦åŒæ­¥</h3>
<p>å®ç°äº†æ’­æ”¾è¿›åº¦ä¸é€Ÿåº¦çš„åŒæ­¥æ›´æ–°ï¼Œç¡®ä¿åœ¨ä¸åŒæ’­æ”¾é€Ÿåº¦ä¸‹è¿›åº¦æ¡æ˜¾ç¤ºå‡†ç¡®ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">update_progress</span>(<span class="hljs-params">self</span>):
    <span class="hljs-keyword">if</span> self.is_playing <span class="hljs-keyword">and</span> self.total_duration &gt; <span class="hljs-number">0</span>:
        self.current_time += <span class="hljs-number">1</span> / self.playback_speed  <span class="hljs-comment"># é€Ÿåº¦åŒæ­¥</span>
        <span class="hljs-keyword">if</span> self.current_time &gt;= self.total_duration:
            <span class="hljs-keyword">if</span> self.is_looping:
                self.current_time = <span class="hljs-number">0</span>
            <span class="hljs-keyword">else</span>:
                self.stop_music()
                <span class="hljs-keyword">return</span>
        progress = (self.current_time / self.total_duration) * <span class="hljs-number">100</span>
        self.progress_bar.config(value=progress)
        current_min = <span class="hljs-built_in">int</span>(self.current_time // <span class="hljs-number">60</span>)
        current_sec = <span class="hljs-built_in">int</span>(self.current_time % <span class="hljs-number">60</span>)
        total_min = <span class="hljs-built_in">int</span>(self.total_duration // <span class="hljs-number">60</span>)
        total_sec = <span class="hljs-built_in">int</span>(self.total_duration % <span class="hljs-number">60</span>)
        self.time_label.config(text=<span class="hljs-string">f"<span class="hljs-subst">{current_min}</span>:<span class="hljs-subst">{current_sec:02d}</span> / <span class="hljs-subst">{total_min}</span>:<span class="hljs-subst">{total_sec:02d}</span>"</span>)
        <span class="hljs-keyword">if</span> <span class="hljs-built_in">hasattr</span>(self, <span class="hljs-string">'_progress_after_id'</span>):
            self.root.after_cancel(self._progress_after_id)
        self._progress_after_id = self.root.after(self.progress_update_interval, self.update_progress)
</code></pre>
<h2 data-id="heading-21">5. ç³»ç»Ÿæµ‹è¯•ä¸ä¼˜åŒ–</h2>
<h3 data-id="heading-22">5.1 éŸ³ä¹ç”Ÿæˆå™¨æµ‹è¯•</h3>
<p>å¯¹éŸ³ä¹ç”Ÿæˆå™¨è¿›è¡Œäº†å…¨é¢æµ‹è¯•ï¼ŒåŒ…æ‹¬é£æ ¼å‚æ•°éªŒè¯ã€BPMèŒƒå›´æµ‹è¯•ã€é•¿åº¦æµ‹è¯•ç­‰ã€‚</p>
<h4 data-id="heading-23">é£æ ¼å‚æ•°éªŒè¯æµ‹è¯•ç»“æœ</h4>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2d47a916fecc43c7ae449becab3c289a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54aK54yr6ZKT6bG8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768803433&amp;x-signature=r0CX4ZwAiRDgcXkeXE%2BBbE7uSIo%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-24">5.2 æ’­æ”¾å™¨é”™è¯¯å¤„ç†</h3>
<p>å¯¹æ’­æ”¾å™¨è¿›è¡Œäº†é”™è¯¯å¤„ç†æµ‹è¯•ï¼ŒåŒ…æ‹¬ä¸å­˜åœ¨æ–‡ä»¶ã€æŸåæ–‡ä»¶ç­‰æƒ…å†µã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">generate_music</span>(<span class="hljs-params">self</span>):
    <span class="hljs-keyword">try</span>:
        style = self.style_combobox.get()
        bpm = <span class="hljs-built_in">int</span>(self.bpm_scale.get())
        length = <span class="hljs-built_in">int</span>(self.length_scale.get())
        output_file = self.output_filename.get()
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> output_file.lower().endswith(<span class="hljs-string">'.mid'</span>):
            output_file += <span class="hljs-string">'.mid'</span>
        self.status_label.config(text=<span class="hljs-string">"æ­£åœ¨ç”ŸæˆéŸ³ä¹..."</span>, foreground=<span class="hljs-string">"orange"</span>)
        self.root.update()
        self.music_generator.generate_music(style=style, bpm=bpm, length=length, output_file=output_file)
        self.refresh_files()
        self.status_label.config(text=<span class="hljs-string">"éŸ³ä¹ç”ŸæˆæˆåŠŸï¼"</span>, foreground=<span class="hljs-string">"green"</span>)
        messagebox.showinfo(<span class="hljs-string">"æˆåŠŸ"</span>, <span class="hljs-string">f"éŸ³ä¹å·²ç”Ÿæˆ: <span class="hljs-subst">{output_file}</span>"</span>)
    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
        self.status_label.config(text=<span class="hljs-string">f"ç”Ÿæˆé”™è¯¯: <span class="hljs-subst">{<span class="hljs-built_in">str</span>(e)}</span>"</span>, foreground=<span class="hljs-string">"red"</span>)
        messagebox.showerror(<span class="hljs-string">"é”™è¯¯"</span>, <span class="hljs-string">f"ç”ŸæˆéŸ³ä¹å¤±è´¥: <span class="hljs-subst">{<span class="hljs-built_in">str</span>(e)}</span>"</span>)
</code></pre>
<h3 data-id="heading-25">5.3 æ€§èƒ½ä¼˜åŒ–</h3>
<p>é€šè¿‡å¤šç§ä¼˜åŒ–æªæ–½æé«˜ç³»ç»Ÿæ€§èƒ½ï¼ŒåŒ…æ‹¬è¿›åº¦æ›´æ–°ä¼˜åŒ–ã€å†…å­˜ç®¡ç†ä¼˜åŒ–ç­‰ã€‚</p>
<h4 data-id="heading-26">ä¼˜åŒ–å‰åæ€§èƒ½å¯¹æ¯”</h4>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6bc8ed0e4743494ba90f0fad3cd9781c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54aK54yr6ZKT6bG8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768803433&amp;x-signature=oz2PVgfVUUNKs1%2B2%2BLOiE4thpWA%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-27">6. ç»“æœä¸å±•æœ›</h2>
<p>æœ¬é¡¹ç›®æˆåŠŸå®ç°äº†ä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„éŸ³ä¹ç”Ÿæˆä¸æ’­æ”¾ç³»ç»Ÿï¼Œå…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š</p>
<h4 data-id="heading-28">ä¸€æ˜¯ä¸°å¯Œçš„éŸ³ä¹é£æ ¼ï¼Œæ”¯æŒ15+ç§éŸ³ä¹é£æ ¼ï¼Œ30+å’Œå¼¦ç±»å‹ï¼Œç”Ÿæˆå¤šæ ·åŒ–éŸ³ä¹ã€‚</h4>
<h4 data-id="heading-29">äºŒæ˜¯å®Œæ•´çš„éŸ³ä¹ç»“æ„ï¼ŒåŒ…å«å‰å¥ã€é—´å¥ã€ä¸»æ­Œç­‰å®Œæ•´æ®µè½ï¼ŒéŸ³ä¹æ›´åŠ ä¸“ä¸šã€‚</h4>
<h4 data-id="heading-30">ä¸‰æ˜¯å‹å¥½çš„ç”¨æˆ·ç•Œé¢ï¼ŒåŠŸèƒ½ä¸°å¯Œçš„GUIæ’­æ”¾å™¨ï¼Œæ“ä½œç®€å•ç›´è§‚ã€‚</h4>
<h3 data-id="heading-31"/>
<h2 data-id="heading-32">7. æ€»ç»“</h2>
<p>æœ¬é¡¹ç›®æˆåŠŸå®ç°äº†ä¸€ä¸ªåŸºäºPythonçš„éŸ³ä¹ç”Ÿæˆä¸æ’­æ”¾å™¨ç³»ç»Ÿï¼Œé€šè¿‡éŸ³ä¹ç†è®ºå’ŒAIç®—æ³•ç”Ÿæˆå¤šæ ·åŒ–çš„éŸ³ä¹ï¼Œå¹¶æä¾›äº†ç”¨æˆ·å‹å¥½çš„å›¾å½¢ç•Œé¢ã€‚é¡¹ç›®ç»å†äº†å¤šä¸ªè¿­ä»£é˜¶æ®µï¼Œä¸æ–­ä¼˜åŒ–ç®—æ³•å’ŒåŠŸèƒ½ï¼Œæœ€ç»ˆè¾¾åˆ°äº†é¢„æœŸç›®æ ‡ï¼Œæ•´ä¸ªè¿‡ç¨‹éå¸¸è½»æ¾è€Œä¸”å¯Œæœ‰ä¹è¶£ã€‚</p>
<p>è¿™ç§ä¹è¶£ï¼Œæˆ–è®¸å°±æ˜¯VibeCodingçš„é­…åŠ›æ‰€åœ¨â€”â€”å®ƒæ‰“ç ´äº†"éŸ³ä¹åˆ›ä½œé—¨æ§›é«˜"çš„å£å’ï¼Œè®©æ¯ä¸€è¡Œä»£ç éƒ½æœ‰å¯èƒ½æˆä¸ºä¸€é¦–ç‹¬ä¸€æ— äºŒçš„æ—‹å¾‹ï¼Œè®©æ¯ä¸€ä¸ªçƒ­çˆ±æ¢ç´¢çš„äººï¼Œéƒ½èƒ½åœ¨æ•°å­—ä¸–ç•Œé‡Œæ‰¾åˆ°å±äºè‡ªå·±çš„éŸ³ä¹è§’è½ã€‚</p>
<p>æœªæ¥ï¼Œæˆ‘å°†ç»§ç»­æ”¹è¿›ç³»ç»Ÿï¼Œé›†æˆæ·±åº¦å­¦ä¹ æ¨¡å‹ï¼Œæ‰©å±•GUIåŠŸèƒ½ï¼Œæä¾›æ›´å¤šä¹å™¨éŸ³è‰²å’ŒéŸ³ä¹é£æ ¼ï¼Œä½¿ç³»ç»Ÿæ›´åŠ å®Œå–„å’Œä¸“ä¸šã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Pythonå¤„ç†Wordæ–‡æ¡£å®Œå…¨æŒ‡å—ï¼šä»åŸºç¡€åˆ°è¿›é˜¶]]></title>    <link>https://juejin.cn/post/7594000527509340201</link>    <guid>https://juejin.cn/post/7594000527509340201</guid>    <pubDate>2026-01-12T07:05:05.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594000527509340201" data-draft-id="7593731473490067519" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Pythonå¤„ç†Wordæ–‡æ¡£å®Œå…¨æŒ‡å—ï¼šä»åŸºç¡€åˆ°è¿›é˜¶"/> <meta itemprop="keywords" content="Python"/> <meta itemprop="datePublished" content="2026-01-12T07:05:05.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è¯¸ç¥ç¼„é»˜ä¸è¯­"/> <meta itemprop="url" content="https://juejin.cn/user/2036746568087502"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Pythonå¤„ç†Wordæ–‡æ¡£å®Œå…¨æŒ‡å—ï¼šä»åŸºç¡€åˆ°è¿›é˜¶
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2036746568087502/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è¯¸ç¥ç¼„é»˜ä¸è¯­
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-12T07:05:05.000Z" title="Mon Jan 12 2026 07:05:05 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2FPolarisRisingWar%2Farticle%2Fdetails%2F116396744" target="_blank" title="https://blog.csdn.net/PolarisRisingWar/article/details/116396744" ref="nofollow noopener noreferrer">è¯¸ç¥ç¼„é»˜ä¸è¯­-ä¸ªäººCSDNåšæ–‡ç›®å½•</a></p>
<p>æ•™ç¨‹è§†é¢‘å’Œä»£ç ç”Ÿæˆæ•ˆæœè¯·çœ‹è§†é¢‘ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV1Ab6mBgEM5%2F" target="_blank" title="https://www.bilibili.com/video/BV1Ab6mBgEM5/" ref="nofollow noopener noreferrer">www.bilibili.com/video/BV1Abâ€¦</a><br/>
å¦‚æœéœ€è¦åŸJupyter notebookæ–‡ä»¶å’Œç”¨ä½œç¤ºä¾‹çš„å›¾ç‰‡ã€æ–‡æ¡£ï¼Œå¯ä»¥è”ç³»æˆ‘ã€‚</p>
<p>åœ¨Pythonä¸­å¤„ç†Wordæ–‡æ¡£æ˜¯ä¸€é¡¹å¸¸è§ä¸”å®ç”¨çš„ä»»åŠ¡ã€‚æœ¬æ–‡å°†ä»‹ç»å¦‚ä½•ä½¿ç”¨å‡ ä¸ªä¸»æµçš„Pythonåº“æ¥åˆ›å»ºã€ä¿®æ”¹å’Œå¤„ç†Wordæ–‡æ¡£ï¼Œæ¶µç›–ä»åŸºç¡€æ“ä½œåˆ°é«˜çº§åŠŸèƒ½çš„å®Œæ•´æµç¨‹ã€‚</p>
<h2 data-id="heading-0">æ‰€éœ€åº“åŠå®‰è£…</h2>
<p>åœ¨å¼€å§‹ä¹‹å‰ï¼Œéœ€è¦å®‰è£…ä»¥ä¸‹Pythonåº“ï¼š</p>
<ul>
<li>python-docxï¼šç”¨äºåˆ›å»ºå’Œä¿®æ”¹Wordæ–‡æ¡£</li>
<li>docxtplï¼šç”¨äºåŸºäºæ¨¡æ¿å¡«å……Wordæ–‡æ¡£</li>
<li>docxcomposeï¼šç”¨äºåˆå¹¶å¤šä¸ªWordæ–‡æ¡£</li>
<li>lxmlï¼šXMLå¤„ç†åº“</li>
</ul>
<p>å¯ä»¥é€šè¿‡pipå®‰è£…ï¼š</p>
<pre><code class="hljs language-plain" lang="plain">pip install python-docx docxtpl docxcompose lxml  
</code></pre>
<p>æˆ–è€…ä½¿ç”¨uvï¼š</p>
<pre><code class="hljs language-plain" lang="plain">uv add python-docx docxtpl docxcompose lxml  
</code></pre>
<h2 data-id="heading-1">1. åŸºç¡€æ“ä½œ</h2>
<h3 data-id="heading-2">1.1 åˆ›å»ºå’Œä¿å­˜æ–‡æ¡£</h3>
<p>ä½¿ç”¨python-docxåˆ›å»ºæ–‡æ¡£éå¸¸ç®€å•ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> docx <span class="hljs-keyword">import</span> Document  
doc = Document()  
doc.add_paragraph(<span class="hljs-string">"Python-docxæ˜¯ä¸€ä¸ªç”¨äºåˆ›å»º"</span>)  
doc.save(<span class="hljs-string">"æ–‡ä»¶1.docx"</span>)  
</code></pre>
<h3 data-id="heading-3">1.2 è®¾ç½®ä¸­æ–‡å­—ä½“</h3>
<p>é»˜è®¤å­—ä½“å¯¹ä¸­æ–‡æ”¯æŒä¸ä½³ï¼Œéœ€è¦å•ç‹¬è®¾ç½®ä¸­æ–‡å­—ä½“ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> docx.oxml.ns <span class="hljs-keyword">import</span> qn  
<span class="hljs-keyword">def</span> <span class="hljs-title function_">set_chinese_font</span>(<span class="hljs-params">run, zh_font_name=<span class="hljs-string">"å®‹ä½“"</span>, en_font_name=<span class="hljs-string">"Times New Roman"</span></span>):  
    run.font.name = en_font_name  
    run._element.rPr.rFonts.<span class="hljs-built_in">set</span>(qn(<span class="hljs-string">"w:eastAsia"</span>), zh_font_name)  
doc = Document()  
paragraph = doc.add_paragraph()  
run = paragraph.add_run(<span class="hljs-string">'è¿™æ˜¯ä¸€æ®µè®¾ç½®äº†ä¸­æ–‡å­—ä½“çš„æ–‡æœ¬ã€‚'</span>)  
set_chinese_font(run)  
doc.save(<span class="hljs-string">"æ–‡ä»¶1.docx"</span>)  
</code></pre>
<p><strong>æ³¨æ„</strong>ï¼šä¿å­˜æ–‡ä»¶æ—¶ï¼Œæ–‡ä»¶ä¸èƒ½è¢«æ‰“å¼€ï¼Œå¦åˆ™ä¼šæŠ¥<code>PermissionError</code>é”™è¯¯ã€‚</p>
<h3 data-id="heading-4">1.3 å¯¼å…¥ç°æœ‰æ–‡æ¡£</h3>
<pre><code class="hljs language-python" lang="python">doc = Document(<span class="hljs-string">'example.docx'</span>)  
</code></pre>
<p><strong>æ³¨æ„äº‹é¡¹</strong>ï¼š</p>
<ul>
<li>å¿…é¡»æ˜¯æ ‡å‡†docxæ–‡ä»¶ï¼Œä¸èƒ½æ˜¯docæ–‡ä»¶</li>
<li>ä¸èƒ½æ˜¯strict open XMLæ ¼å¼</li>
</ul>
<h3 data-id="heading-5">1.4 éå†æ–‡æ¡£å†…å®¹</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># éå†æ®µè½  </span>
<span class="hljs-keyword">for</span> para <span class="hljs-keyword">in</span> doc.paragraphs[:<span class="hljs-number">3</span>]:  
    <span class="hljs-built_in">print</span>(para)  
    <span class="hljs-built_in">print</span>(para.text)  
    <span class="hljs-built_in">print</span>()  
<span class="hljs-comment"># éå†è¡¨æ ¼  </span>
<span class="hljs-keyword">for</span> table <span class="hljs-keyword">in</span> doc.tables:  
    <span class="hljs-keyword">for</span> row <span class="hljs-keyword">in</span> table.rows:  
        <span class="hljs-keyword">for</span> cell <span class="hljs-keyword">in</span> row.cells:  
            <span class="hljs-built_in">print</span>(cell.text)  
</code></pre>
<h2 data-id="heading-6">2. æ–‡æ¡£æ ¼å¼è®¾ç½®</h2>
<h3 data-id="heading-7">2.1 å°æ ‡é¢˜</h3>
<pre><code class="hljs language-python" lang="python">doc.add_heading(<span class="hljs-string">"1.1 Transformeræ•´ä½“å·¥ä½œæµç¨‹"</span>, <span class="hljs-number">2</span>)  
doc.add_heading(<span class="hljs-string">"Transformeræ•´ä½“æ¶æ„"</span>, <span class="hljs-number">3</span>)  
</code></pre>
<p><strong>æ³¨æ„</strong>ï¼šéœ€è¦æ–‡æ¡£é‡Œæœ‰å¯¹åº”çš„æ ‡é¢˜æ ·å¼ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚</p>
<h3 data-id="heading-8">2.2 æ®µè½å¤„ç†</h3>
<h4 data-id="heading-9">æ·»åŠ æ®µè½</h4>
<pre><code class="hljs language-python" lang="python">text = <span class="hljs-string">"""Transformer æ¨¡å‹ç”±ç¼–ç å™¨ï¼ˆEncoderï¼‰å’Œè§£ç å™¨ï¼ˆDecoderï¼‰ç»„æˆã€‚..."""</span>  
paragraph1 = doc.add_paragraph(text)  
</code></pre>
<h4 data-id="heading-10">é¦–è¡Œç¼©è¿›</h4>
<p>é¦–è¡Œç¼©è¿›2å­—ç¬¦ï¼š</p>
<pre><code class="hljs language-python" lang="python">paragraph_format = paragraph1.paragraph_format  
paragraph_format.first_line_indent = <span class="hljs-number">0</span>  
paragraph_format.element.pPr.ind.<span class="hljs-built_in">set</span>(qn(<span class="hljs-string">"w:firstLineChars"</span>), <span class="hljs-string">'200'</span>)  
</code></pre>
<p>é¦–è¡Œç¼©è¿›å›ºå®šè·ç¦»ï¼š</p>
<pre><code class="hljs language-python" lang="python">para_format.first_line_indent = Pt(<span class="hljs-number">10</span>)  
</code></pre>
<h4 data-id="heading-11">æ®µè½å¯¹é½</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> docx.enum.text <span class="hljs-keyword">import</span> WD_PARAGRAPH_ALIGNMENT  
paragraph1.alignment = WD_PARAGRAPH_ALIGNMENT.LEFT  
</code></pre>
<h4 data-id="heading-12">åˆ é™¤æ®µè½</h4>
<pre><code class="hljs language-python" lang="python">p = paragraph1._element  
p.getparent().remove(p)  
</code></pre>
<h4 data-id="heading-13">æ¢è¡Œå¤„ç†</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># å°†æ–‡æœ¬æŒ‰æ¢è¡Œç¬¦åˆ†å‰²æˆå¤šä¸ªæ®µè½  </span>
<span class="hljs-keyword">for</span> one_paragraph_text <span class="hljs-keyword">in</span> text.split(<span class="hljs-string">"\n"</span>):  
    temp_paragraph = doc.add_paragraph(one_paragraph_text)  
    paragraph_format = temp_paragraph.paragraph_format  
    paragraph_format.first_line_indent = <span class="hljs-number">0</span>  
    paragraph_format.element.pPr.ind.<span class="hljs-built_in">set</span>(qn(<span class="hljs-string">"w:firstLineChars"</span>), <span class="hljs-string">"200"</span>)  
</code></pre>
<h4 data-id="heading-14">å¸¸ç”¨æ®µè½æ ¼å¼</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> docx.shared <span class="hljs-keyword">import</span> Pt  
para_format = temp_paragraph.paragraph_format  
para_format.line_spacing = Pt(<span class="hljs-number">18</span>)  <span class="hljs-comment"># è¡Œé—´è·ï¼ˆå›ºå®šå€¼ï¼‰  </span>
para_format.space_before = Pt(<span class="hljs-number">3</span>)  <span class="hljs-comment"># æ®µå‰è·ç¦»  </span>
para_format.space_after = Pt(<span class="hljs-number">0</span>)  <span class="hljs-comment"># æ®µåè·ç¦»  </span>
para_format.right_indent = Pt(<span class="hljs-number">20</span>)  <span class="hljs-comment"># å³ä¾§ç¼©è¿›  </span>
para_format.left_indent = Pt(<span class="hljs-number">0</span>)  <span class="hljs-comment"># å·¦ä¾§ç¼©è¿›  </span>
</code></pre>
<h3 data-id="heading-15">2.3 å­—ç¬¦æ ¼å¼è®¾ç½®</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> docx.shared <span class="hljs-keyword">import</span> RGBColor, Pt  
<span class="hljs-comment"># åŠ ç²—æ–‡æœ¬  </span>
temp_paragraph.add_run(<span class="hljs-string">'åŠ ç²—æ–‡æœ¬'</span>).bold = <span class="hljs-literal">True</span>  
<span class="hljs-comment"># çº¢è‰²æ–œä½“æ–‡æœ¬  </span>
run = temp_paragraph.add_run(<span class="hljs-string">'çº¢è‰²æ–œä½“æ–‡æœ¬'</span>)  
run.font.color.rgb = RGBColor(<span class="hljs-number">255</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>)  <span class="hljs-comment"># è®¾ç½®çº¢è‰²  </span>
run.font.size = Pt(<span class="hljs-number">14</span>)  <span class="hljs-comment"># å­—å·14ç£…  </span>
run.bold = <span class="hljs-literal">True</span>  <span class="hljs-comment"># åŠ ç²—  </span>
run.italic = <span class="hljs-literal">True</span>  <span class="hljs-comment"># æ–œä½“  </span>
run.underline = <span class="hljs-literal">True</span>  <span class="hljs-comment"># ä¸‹åˆ’çº¿  </span>
<span class="hljs-comment"># ä¸‹æ ‡å’Œä¸Šæ ‡  </span>
run2 = temp_paragraph.add_run(<span class="hljs-string">"1"</span>)  
run2.font.subscript = <span class="hljs-literal">True</span>  <span class="hljs-comment"># ä¸‹æ ‡  </span>
run3 = temp_paragraph.add_run(<span class="hljs-string">"2"</span>)  
run3.font.superscript = <span class="hljs-literal">True</span>  <span class="hljs-comment"># ä¸Šæ ‡  </span>
</code></pre>
<h3 data-id="heading-16">2.4 è¡¨æ ¼å¤„ç†</h3>
<h4 data-id="heading-17">åˆ›å»ºè¡¨æ ¼</h4>
<pre><code class="hljs language-python" lang="python">table = doc.add_table(rows=<span class="hljs-number">4</span>, cols=<span class="hljs-number">5</span>)  
table.style = <span class="hljs-string">"Grid Table 1 Light"</span>  <span class="hljs-comment"># åº”ç”¨é¢„å®šä¹‰æ ·å¼  </span>
</code></pre>
<h4 data-id="heading-18">å¡«å……å•å…ƒæ ¼</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># æ–¹å¼1ï¼šç›´æ¥æŒ‡å®šå•å…ƒæ ¼  </span>
cell = table.cell(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>)  
cell.text = <span class="hljs-string">"parrot, possibly dead"</span>  
<span class="hljs-comment"># æ–¹å¼2ï¼šé€šè¿‡è¡Œè·å–å•å…ƒæ ¼  </span>
row = table.rows[<span class="hljs-number">1</span>]  
cells = row.cells  
cells[<span class="hljs-number">0</span>].text = <span class="hljs-string">"Foo bar to you."</span>  
cells[<span class="hljs-number">1</span>].text = <span class="hljs-string">"And a hearty foo bar to you too sir!"</span>  
</code></pre>
<h4 data-id="heading-19">è·å–å¯ç”¨è¡¨æ ¼æ ·å¼</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> docx.enum.style <span class="hljs-keyword">import</span> WD_STYLE_TYPE  
styles = doc.styles  
<span class="hljs-keyword">for</span> s <span class="hljs-keyword">in</span> styles:  
    <span class="hljs-keyword">if</span> s.<span class="hljs-built_in">type</span> == WD_STYLE_TYPE.TABLE:  
        <span class="hljs-built_in">print</span>(s.name)  
</code></pre>
<h4 data-id="heading-20">å¢åŠ å’Œåˆ é™¤è¡Œ</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># å¢åŠ ä¸€è¡Œ  </span>
row = table.add_row()  
<span class="hljs-comment"># åˆ é™¤ä¸€è¡Œ  </span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">remove_row</span>(<span class="hljs-params">table, row</span>):  
    tbl = table._tbl  
    tr = row._tr  
    tbl.remove(tr)  
row = table.rows[<span class="hljs-built_in">len</span>(table.rows) - <span class="hljs-number">1</span>]  
remove_row(table, row)  
</code></pre>
<h4 data-id="heading-21">æ‰¹é‡å¡«å……æ•°æ®</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># æ–¹å¼1ï¼šä¸€è¡Œä¸€è¡Œæ·»åŠ   </span>
items = (  
    (<span class="hljs-number">7</span>, <span class="hljs-string">"1024"</span>, <span class="hljs-string">"Plush kittens"</span>),  
    (<span class="hljs-number">3</span>, <span class="hljs-string">"2042"</span>, <span class="hljs-string">"Furbees"</span>),  
    (<span class="hljs-number">1</span>, <span class="hljs-string">"1288"</span>, <span class="hljs-string">"French Poodle Collars, Deluxe"</span>),  
)  
<span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> items:  
    cells = table.add_row().cells  
    cells[<span class="hljs-number">0</span>].text = <span class="hljs-built_in">str</span>(item[<span class="hljs-number">0</span>])  
    cells[<span class="hljs-number">1</span>].text = item[<span class="hljs-number">1</span>]  
    cells[<span class="hljs-number">2</span>].text = item[<span class="hljs-number">2</span>]  
<span class="hljs-comment"># æ–¹å¼2ï¼šæ‰¹é‡å¡«å……  </span>
<span class="hljs-keyword">for</span> row <span class="hljs-keyword">in</span> table.rows:  
    <span class="hljs-keyword">for</span> cell <span class="hljs-keyword">in</span> row.cells:  
        cell.text = <span class="hljs-string">"æ•°æ®å•å…ƒ"</span>  
</code></pre>
<h4 data-id="heading-22">åˆå¹¶å•å…ƒæ ¼</h4>
<pre><code class="hljs language-python" lang="python">table.cell(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>).merge(table.cell(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>))  <span class="hljs-comment"># è·¨è¡Œåˆ—åˆå¹¶  </span>
</code></pre>
<h4 data-id="heading-23">è¡¨æ ¼æ ¼å¼è®¾ç½®</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># è¡¨æ ¼å®½åº¦è‡ªé€‚åº”  </span>
table.autofit = <span class="hljs-literal">True</span>  
<span class="hljs-comment"># æŒ‡å®šè¡Œé«˜  </span>
<span class="hljs-keyword">from</span> docx.shared <span class="hljs-keyword">import</span> Cm  
table.rows[<span class="hljs-number">0</span>].height = Cm(<span class="hljs-number">0.93</span>)  
<span class="hljs-comment"># ä¿®æ”¹è¡¨æ ¼å­—ä½“å¤§å°  </span>
table.style.font.size = Pt(<span class="hljs-number">15</span>)  
<span class="hljs-comment"># è®¾ç½®å•å…ƒæ ¼å¯¹é½  </span>
<span class="hljs-keyword">from</span> docx.enum.table <span class="hljs-keyword">import</span> WD_ALIGN_VERTICAL  
cell = table.cell(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>)  
cell.paragraphs[<span class="hljs-number">0</span>].paragraph_format.alignment = WD_ALIGN_PARAGRAPH.CENTER  
cell.vertical_alignment = WD_ALIGN_VERTICAL.CENTER  
<span class="hljs-comment"># å¤åˆ¶è¡¨æ ¼  </span>
<span class="hljs-keyword">from</span> copy <span class="hljs-keyword">import</span> deepcopy  
table_copy = deepcopy(doc.tables[<span class="hljs-number">0</span>])  
para1 = doc.add_paragraph()  
para1._p.addnext(table_copy._element)  
</code></pre>
<h3 data-id="heading-24">2.5 å›¾ç‰‡å¤„ç†</h3>
<h4 data-id="heading-25">æ’å…¥å›¾ç‰‡</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> io <span class="hljs-keyword">import</span> BytesIO  
<span class="hljs-keyword">import</span> base64  
<span class="hljs-comment"># æ™®é€šæ’å…¥  </span>
doc.add_picture(<span class="hljs-string">'å›¾ç‰‡1.png'</span>)  
doc.add_picture(<span class="hljs-string">'å›¾ç‰‡2.png'</span>, width=Inches(<span class="hljs-number">2.5</span>), height=Inches(<span class="hljs-number">2</span>))  
<span class="hljs-comment"># ä½¿ç”¨base64æ’å…¥  </span>
picture2_base64 = <span class="hljs-built_in">open</span>(<span class="hljs-string">"å›¾ç‰‡2base64.txt"</span>).read()  
img2_buf = base64.b64decode(picture2_base64)  
doc.add_picture(BytesIO(img2_buf))  
<span class="hljs-comment"># å¹¶æ’æ”¾å›¾  </span>
run = doc.add_paragraph().add_run()  
run.add_picture(<span class="hljs-string">"å›¾ç‰‡1.png"</span>, width=Inches(<span class="hljs-number">2.5</span>), height=Inches(<span class="hljs-number">2</span>))  
run.add_picture(<span class="hljs-string">"å›¾ç‰‡1.png"</span>, width=Inches(<span class="hljs-number">2.5</span>), height=Inches(<span class="hljs-number">2</span>))  
</code></pre>
<h3 data-id="heading-26">2.6 åˆ†é¡µç¬¦</h3>
<pre><code class="hljs language-python" lang="python">doc.add_page_break()  
</code></pre>
<h3 data-id="heading-27">2.7 æ ·å¼ç®¡ç†</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># ä¿®æ”¹å·²æœ‰æ ·å¼  </span>
doc.styles[<span class="hljs-string">"Normal"</span>].font.size = Pt(<span class="hljs-number">14</span>)  
doc.styles[<span class="hljs-string">'Normal'</span>].font.name = <span class="hljs-string">'Arial'</span>  
doc.styles[<span class="hljs-string">'Normal'</span>]._element.rPr.rFonts.<span class="hljs-built_in">set</span>(qn(<span class="hljs-string">'w:eastAsia'</span>), <span class="hljs-string">'æ¥·ä½“'</span>)  
<span class="hljs-comment"># åˆ›å»ºè‡ªå®šä¹‰æ®µè½æ ·å¼  </span>
<span class="hljs-keyword">from</span> docx.enum.style <span class="hljs-keyword">import</span> WD_STYLE_TYPE  
UserStyle1 = doc.styles.add_style(<span class="hljs-string">'UserStyle1'</span>, WD_STYLE_TYPE.PARAGRAPH)  
UserStyle1.font.size = Pt(<span class="hljs-number">40</span>)  
UserStyle1.font.color.rgb = RGBColor(<span class="hljs-number">0xff</span>, <span class="hljs-number">0xde</span>, <span class="hljs-number">0x00</span>)  
UserStyle1.paragraph_format.alignment = WD_ALIGN_PARAGRAPH.CENTER  
UserStyle1.font.name = <span class="hljs-string">'å¾®è½¯é›…é»‘'</span>  
UserStyle1._element.rPr.rFonts.<span class="hljs-built_in">set</span>(qn(<span class="hljs-string">'w:eastAsia'</span>), <span class="hljs-string">'å¾®è½¯é›…é»‘'</span>)  
<span class="hljs-comment"># ä½¿ç”¨è‡ªå®šä¹‰æ ·å¼  </span>
doc.add_paragraph(<span class="hljs-string">'è‡ªå®šä¹‰æ®µè½æ ·å¼'</span>, style=UserStyle1)  
</code></pre>
<h2 data-id="heading-28">3. ä½¿ç”¨docxtplè¿›è¡Œæ¨¡æ¿å¡«å……</h2>
<p>docxtplå¯ä»¥å°†Wordæ–‡æ¡£åˆ¶ä½œæˆæ¨¡æ¿ï¼Œå®ç°æ•°æ®è‡ªåŠ¨å¡«å……ã€‚</p>
<h3 data-id="heading-29">3.1 åˆ›å»ºæ¨¡æ¿</h3>
<p>é¦–å…ˆåˆ›å»ºä¸€ä¸ªåŒ…å«å ä½ç¬¦çš„Wordæ¨¡æ¿ï¼Œå ä½ç¬¦ä½¿ç”¨åŒèŠ±æ‹¬å·<code>{{}}</code>åŒ…è£¹ã€‚</p>
<h3 data-id="heading-30">3.2 å¡«å……æ¨¡æ¿</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> docxtpl <span class="hljs-keyword">import</span> DocxTemplate, InlineImage, RichText  
tpl = DocxTemplate(<span class="hljs-string">"docxexample.docx"</span>)  
text = <span class="hljs-string">"""Transformer æ¨¡å‹ç”±ç¼–ç å™¨ï¼ˆEncoderï¼‰å’Œè§£ç å™¨ï¼ˆDecoderï¼‰ç»„æˆ..."""</span>  
picture1 = InlineImage(tpl, image_descriptor=<span class="hljs-string">"å›¾ç‰‡1.png"</span>)  
<span class="hljs-comment"># å‡†å¤‡æ•°æ®  </span>
paragraphs1 = [  
    <span class="hljs-string">"æ­¥éª¤1ï¼šè¾“å…¥è¡¨ç¤ºï¼ˆInput Representationï¼‰"</span>,  
    <span class="hljs-string">"æ­¥éª¤2ï¼šç¼–ç å™¨å¤„ç†ï¼ˆEncoder Processingï¼‰"</span>,  
    <span class="hljs-string">"æ­¥éª¤3ï¼šè§£ç å™¨å¤„ç†ï¼ˆDecoder Processingï¼‰"</span>,  
]  
paragraphs2 = [  
    {<span class="hljs-string">"step"</span>: <span class="hljs-number">1</span>, <span class="hljs-string">"text"</span>: <span class="hljs-string">"è¾“å…¥å‘é‡ï¼ˆè¯åµŒå…¥+ä½ç½®ç¼–ç ï¼‰è¿›å…¥ç¼–ç å™¨å±‚ã€‚"</span>},  
    {<span class="hljs-string">"step"</span>: <span class="hljs-number">2</span>, <span class="hljs-string">"text"</span>: <span class="hljs-string">"è‡ªæ³¨æ„åŠ›å­å±‚ã€‚"</span>},  
    {<span class="hljs-string">"step"</span>: <span class="hljs-number">3</span>, <span class="hljs-string">"text"</span>: <span class="hljs-string">"å‰é¦ˆç½‘ç»œå­å±‚ã€‚"</span>},  
]  
table = [  
    {<span class="hljs-string">"character"</span>: <span class="hljs-string">"å¹¶è¡Œè®¡ç®—"</span>, <span class="hljs-string">"description"</span>: <span class="hljs-string">"ç¼–ç å™¨å¯å¹¶è¡Œå¤„ç†æ•´ä¸ªåºåˆ—ï¼ˆä¸RNNä¸åŒï¼‰"</span>},  
    {<span class="hljs-string">"character"</span>: <span class="hljs-string">"è‡ªæ³¨æ„åŠ›"</span>, <span class="hljs-string">"description"</span>: <span class="hljs-string">"æ¯ä¸ªè¯ç›´æ¥å…³è”æ‰€æœ‰è¯ï¼Œæ•è·é•¿è·ç¦»ä¾èµ–"</span>},  
    {<span class="hljs-string">"character"</span>: <span class="hljs-string">"ä½ç½®ç¼–ç "</span>, <span class="hljs-string">"description"</span>: <span class="hljs-string">"ä¸ºæ— é¡ºåºçš„æ³¨æ„åŠ›æœºåˆ¶æ³¨å…¥ä½ç½®ä¿¡æ¯"</span>},  
]  
alerts = [  
    {  
        <span class="hljs-string">"date"</span>: <span class="hljs-string">"2015-03-10"</span>,  
        <span class="hljs-string">"desc"</span>: RichText(<span class="hljs-string">"Very critical alert"</span>, color=<span class="hljs-string">"FF0000"</span>, bold=<span class="hljs-literal">True</span>),  
        <span class="hljs-string">"type"</span>: <span class="hljs-string">"CRITICAL"</span>,  
        <span class="hljs-string">"bg"</span>: <span class="hljs-string">"FF0000"</span>,  
    },  
    <span class="hljs-comment"># ... å…¶ä»–æ•°æ®  </span>
]  
<span class="hljs-comment"># æ¸²æŸ“æ¨¡æ¿  </span>
context = {  
    <span class="hljs-string">"title"</span>: <span class="hljs-string">"Transformer"</span>,  
    <span class="hljs-string">"text_body"</span>: text,  
    <span class="hljs-string">"picture1"</span>: picture1,  
    <span class="hljs-string">"picture2"</span>: picture2,  
    <span class="hljs-string">"paragraphs1"</span>: paragraphs1,  
    <span class="hljs-string">"paragraphs2"</span>: paragraphs2,  
    <span class="hljs-string">"runs"</span>: paragraphs1,  
    <span class="hljs-string">"display_paragraph"</span>: <span class="hljs-literal">True</span>,  
    <span class="hljs-string">"table1"</span>: table,  
    <span class="hljs-string">"table2"</span>: table,  
    <span class="hljs-string">"alerts"</span>: alerts,  
}  
tpl.render(context)  
tpl.save(<span class="hljs-string">"æ–‡ä»¶3.docx"</span>)  
</code></pre>
<h2 data-id="heading-31">4. è¿›é˜¶åŠŸèƒ½</h2>
<h3 data-id="heading-32">4.1 è¡¨æ ¼é«˜çº§æ“ä½œ</h3>
<h4 data-id="heading-33">è®¾ç½®å•å…ƒæ ¼è¾¹æ¡†</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> docx.oxml <span class="hljs-keyword">import</span> OxmlElement  
<span class="hljs-keyword">from</span> docx.oxml.ns <span class="hljs-keyword">import</span> qn  
<span class="hljs-keyword">def</span> <span class="hljs-title function_">set_cell_border</span>(<span class="hljs-params">cell, **kwargs</span>):  
    tc = cell._tc  
    tcPr = tc.get_or_add_tcPr()  
    tcBorders = tcPr.first_child_found_in(<span class="hljs-string">"w:tcBorders"</span>)  
    <span class="hljs-keyword">if</span> tcBorders <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>:  
        tcBorders = OxmlElement(<span class="hljs-string">"w:tcBorders"</span>)  
        tcPr.append(tcBorders)  
      
    <span class="hljs-keyword">for</span> edge <span class="hljs-keyword">in</span> (<span class="hljs-string">"left"</span>, <span class="hljs-string">"top"</span>, <span class="hljs-string">"right"</span>, <span class="hljs-string">"bottom"</span>, <span class="hljs-string">"insideH"</span>, <span class="hljs-string">"insideV"</span>):  
        edge_data = kwargs.get(edge)  
        <span class="hljs-keyword">if</span> edge_data:  
            tag = <span class="hljs-string">"w:{}"</span>.<span class="hljs-built_in">format</span>(edge)  
            element = tcBorders.find(qn(tag))  
            <span class="hljs-keyword">if</span> element <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>:  
                element = OxmlElement(tag)  
                tcBorders.append(element)  
              
            <span class="hljs-keyword">for</span> key <span class="hljs-keyword">in</span> [<span class="hljs-string">"sz"</span>, <span class="hljs-string">"val"</span>, <span class="hljs-string">"color"</span>, <span class="hljs-string">"space"</span>, <span class="hljs-string">"shadow"</span>]:  
                <span class="hljs-keyword">if</span> key <span class="hljs-keyword">in</span> edge_data:  
                    element.<span class="hljs-built_in">set</span>(qn(<span class="hljs-string">"w:{}"</span>.<span class="hljs-built_in">format</span>(key)), <span class="hljs-built_in">str</span>(edge_data[key]))  
<span class="hljs-comment"># ä½¿ç”¨ç¤ºä¾‹  </span>
set_cell_border(  
    table.cell(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>),  
    top={<span class="hljs-string">"sz"</span>: <span class="hljs-number">4</span>, <span class="hljs-string">"val"</span>: <span class="hljs-string">"single"</span>, <span class="hljs-string">"color"</span>: <span class="hljs-string">"#000000"</span>, <span class="hljs-string">"space"</span>: <span class="hljs-string">"0"</span>},  
    bottom={<span class="hljs-string">"sz"</span>: <span class="hljs-number">4</span>, <span class="hljs-string">"val"</span>: <span class="hljs-string">"single"</span>, <span class="hljs-string">"color"</span>: <span class="hljs-string">"#000000"</span>, <span class="hljs-string">"space"</span>: <span class="hljs-string">"0"</span>},  
    left={<span class="hljs-string">"sz"</span>: <span class="hljs-number">4</span>, <span class="hljs-string">"val"</span>: <span class="hljs-string">"single"</span>, <span class="hljs-string">"color"</span>: <span class="hljs-string">"#000000"</span>, <span class="hljs-string">"space"</span>: <span class="hljs-string">"0"</span>},  
    right={<span class="hljs-string">"sz"</span>: <span class="hljs-number">4</span>, <span class="hljs-string">"val"</span>: <span class="hljs-string">"single"</span>, <span class="hljs-string">"color"</span>: <span class="hljs-string">"#000000"</span>, <span class="hljs-string">"space"</span>: <span class="hljs-string">"0"</span>},  
)  
</code></pre>
<h3 data-id="heading-34">4.2 è¶…é“¾æ¥</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">add_hyperlink</span>(<span class="hljs-params">paragraph, url, text</span>):  
    part = paragraph.part  
    r_id = part.relate_to(  
        url,  
        <span class="hljs-string">"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink"</span>,  
        is_external=<span class="hljs-literal">True</span>,  
    )  
    hyperlink = OxmlElement(<span class="hljs-string">"w:hyperlink"</span>)  
    hyperlink.<span class="hljs-built_in">set</span>(qn(<span class="hljs-string">"r:id"</span>), r_id)  
      
    run = OxmlElement(<span class="hljs-string">"w:r"</span>)  
    run_text = OxmlElement(<span class="hljs-string">"w:t"</span>)  
    run_text.text = text  
    run.append(run_text)  
    hyperlink.append(run)  
      
    paragraph._p.append(hyperlink)  
p = doc.add_paragraph(<span class="hljs-string">"ç‚¹å‡»è®¿é—®ï¼š "</span>)  
add_hyperlink(p, <span class="hljs-string">"https://www.baidu.com"</span>, <span class="hljs-string">"ç¤ºä¾‹é“¾æ¥"</span>)  
</code></pre>
<h3 data-id="heading-35">4.3 å›¾ç‰‡é«˜çº§æ“ä½œ</h3>
<h4 data-id="heading-36">æå–æ–‡æ¡£ä¸­çš„å›¾ç‰‡</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> zipfile  
<span class="hljs-keyword">from</span> xml.etree.ElementTree <span class="hljs-keyword">import</span> fromstring  
<span class="hljs-keyword">def</span> <span class="hljs-title function_">extract_images</span>(<span class="hljs-params">docx_path, output_dir</span>):  
    <span class="hljs-keyword">with</span> zipfile.ZipFile(docx_path) <span class="hljs-keyword">as</span> z:  
        <span class="hljs-keyword">try</span>:  
            doc_rels = z.read(<span class="hljs-string">'word/_rels/document.xml.rels'</span>).decode(<span class="hljs-string">'utf-8'</span>)  
        <span class="hljs-keyword">except</span> KeyError:  
            <span class="hljs-keyword">return</span> []  
          
        root = fromstring(doc_rels)  
        rels = []  
        <span class="hljs-keyword">for</span> child <span class="hljs-keyword">in</span> root:  
            <span class="hljs-keyword">if</span> <span class="hljs-string">'Type'</span> <span class="hljs-keyword">in</span> child.attrib <span class="hljs-keyword">and</span> child.attrib[<span class="hljs-string">'Type'</span>] == RT.IMAGE:  
                rels.append((child.attrib[<span class="hljs-string">'Id'</span>], child.attrib[<span class="hljs-string">'Target'</span>]))  
          
        images = []  
        <span class="hljs-keyword">for</span> rel_id, target <span class="hljs-keyword">in</span> rels:  
            <span class="hljs-keyword">try</span>:  
                image_data = z.read(<span class="hljs-string">'word/'</span> + target)  
                image_name = target.split(<span class="hljs-string">'/'</span>)[-<span class="hljs-number">1</span>]  
                <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">f"<span class="hljs-subst">{output_dir}</span>/<span class="hljs-subst">{image_name}</span>"</span>, <span class="hljs-string">'wb'</span>) <span class="hljs-keyword">as</span> f:  
                    f.write(image_data)  
                images.append(image_name)  
            <span class="hljs-keyword">except</span> KeyError:  
                <span class="hljs-keyword">continue</span>  
        <span class="hljs-keyword">return</span> images  
<span class="hljs-built_in">print</span>(extract_images(<span class="hljs-string">"TransformeråŸç†çº¯äº«ç‰ˆ.docx"</span>, <span class="hljs-string">"pictures"</span>))  
</code></pre>
<h4 data-id="heading-37">æ’å…¥æµ®åŠ¨å›¾ç‰‡</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># æ’å…¥â€œè¡¬äºæ–‡å­—ä¸‹æ–¹â€çš„æµ®åŠ¨å›¾ç‰‡  </span>
<span class="hljs-comment"># å¦‚å°† behindDoc="1" æ”¹æˆ0å°±æ˜¯â€œæµ®äºæ–‡å­—ä¸Šæ–¹â€äº†  </span>
<span class="hljs-comment"># refer to docx.oxml.shape.CT_Inline  </span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">CT_Anchor</span>(<span class="hljs-title class_ inherited__">BaseOxmlElement</span>):  
    <span class="hljs-string">"""  
    ``&lt;w:anchor&gt;`` element, container for a floating image.  
    """</span>  
    extent = OneAndOnlyOne(<span class="hljs-string">'wp:extent'</span>)  
    docPr = OneAndOnlyOne(<span class="hljs-string">'wp:docPr'</span>)  
    graphic = OneAndOnlyOne(<span class="hljs-string">'a:graphic'</span>)  
<span class="hljs-meta">    @classmethod  </span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">new</span>(<span class="hljs-params">cls, cx, cy, shape_id, pic, pos_x, pos_y</span>):  
        <span class="hljs-string">"""  
        Return a new ``&lt;wp:anchor&gt;`` element populated with the values passed  
        as parameters.  
        """</span>  
        anchor = parse_xml(cls._anchor_xml(pos_x, pos_y))  
        anchor.extent.cx = cx  
        anchor.extent.cy = cy  
        anchor.docPr.<span class="hljs-built_in">id</span> = shape_id  
        anchor.docPr.name = <span class="hljs-string">'Picture %d'</span> % shape_id  
        anchor.graphic.graphicData.uri = (  
            <span class="hljs-string">'http://schemas.openxmlformats.org/drawingml/2006/picture'</span>  
        )  
        anchor.graphic.graphicData._insert_pic(pic)  
        <span class="hljs-keyword">return</span> anchor  
<span class="hljs-meta">    @classmethod  </span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">new_pic_anchor</span>(<span class="hljs-params">cls, shape_id, rId, filename, cx, cy, pos_x, pos_y</span>):  
        <span class="hljs-string">"""  
        Return a new `wp:anchor` element containing the `pic:pic` element  
        specified by the argument values.  
        """</span>  
        pic_id = <span class="hljs-number">0</span>  <span class="hljs-comment"># Word doesn't seem to use this, but does not omit it  </span>
        pic = CT_Picture.new(pic_id, filename, rId, cx, cy)  
        anchor = cls.new(cx, cy, shape_id, pic, pos_x, pos_y)  
        anchor.graphic.graphicData._insert_pic(pic)  
        <span class="hljs-keyword">return</span> anchor  
<span class="hljs-meta">    @classmethod  </span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">_anchor_xml</span>(<span class="hljs-params">cls, pos_x, pos_y</span>):  
        <span class="hljs-keyword">return</span> (  
            <span class="hljs-string">'&lt;wp:anchor distT="0" distB="0" distL="0" distR="0" simplePos="0" relativeHeight="0" \n'</span>  
            <span class="hljs-string">'           behindDoc="1" locked="0" layoutInCell="1" allowOverlap="1" \n'</span>  
            <span class="hljs-string">'           %s&gt;\n'</span>  
            <span class="hljs-string">'  &lt;wp:simplePos x="0" y="0"/&gt;\n'</span>  
            <span class="hljs-string">'  &lt;wp:positionH relativeFrom="page"&gt;\n'</span>  
            <span class="hljs-string">'    &lt;wp:posOffset&gt;%d&lt;/wp:posOffset&gt;\n'</span>  
            <span class="hljs-string">'  &lt;/wp:positionH&gt;\n'</span>  
            <span class="hljs-string">'  &lt;wp:positionV relativeFrom="page"&gt;\n'</span>  
            <span class="hljs-string">'    &lt;wp:posOffset&gt;%d&lt;/wp:posOffset&gt;\n'</span>  
            <span class="hljs-string">'  &lt;/wp:positionV&gt;\n'</span>                      
            <span class="hljs-string">'  &lt;wp:extent cx="914400" cy="914400"/&gt;\n'</span>  
            <span class="hljs-string">'  &lt;wp:wrapNone/&gt;\n'</span>  
            <span class="hljs-string">'  &lt;wp:docPr id="666" name="unnamed"/&gt;\n'</span>  
            <span class="hljs-string">'  &lt;wp:cNvGraphicFramePr&gt;\n'</span>  
            <span class="hljs-string">'    &lt;a:graphicFrameLocks noChangeAspect="1"/&gt;\n'</span>  
            <span class="hljs-string">'  &lt;/wp:cNvGraphicFramePr&gt;\n'</span>  
            <span class="hljs-string">'  &lt;a:graphic&gt;\n'</span>  
            <span class="hljs-string">'    &lt;a:graphicData uri="URI not set"/&gt;\n'</span>  
            <span class="hljs-string">'  &lt;/a:graphic&gt;\n'</span>  
            <span class="hljs-string">'&lt;/wp:anchor&gt;'</span> % ( nsdecls(<span class="hljs-string">'wp'</span>, <span class="hljs-string">'a'</span>, <span class="hljs-string">'pic'</span>, <span class="hljs-string">'r'</span>), <span class="hljs-built_in">int</span>(pos_x), <span class="hljs-built_in">int</span>(pos_y) )  
        )  
<span class="hljs-comment"># refer to docx.parts.story.BaseStoryPart.new_pic_inline  </span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">new_pic_anchor</span>(<span class="hljs-params">part, image_descriptor, width, height, pos_x, pos_y</span>):  
    <span class="hljs-string">"""Return a newly-created `w:anchor` element.  
    The element contains the image specified by *image_descriptor* and is scaled  
    based on the values of *width* and *height*.  
    """</span>  
    rId, image = part.get_or_add_image(image_descriptor)  
    cx, cy = image.scaled_dimensions(width, height)  
    shape_id, filename = part.next_id, image.filename      
    <span class="hljs-keyword">return</span> CT_Anchor.new_pic_anchor(shape_id, rId, filename, cx, cy, pos_x, pos_y)  
<span class="hljs-comment"># refer to docx.text.run.add_picture  </span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">add_float_picture</span>(<span class="hljs-params">p, image_path_or_stream, width=<span class="hljs-literal">None</span>, height=<span class="hljs-literal">None</span>, pos_x=<span class="hljs-number">0</span>, pos_y=<span class="hljs-number">0</span></span>):  
    <span class="hljs-string">"""Add float picture at fixed position `pos_x` and `pos_y` to the top-left point of page.  
    """</span>  
    run = p.add_run()  
    anchor = new_pic_anchor(run.part, image_path_or_stream, width, height, pos_x, pos_y)  
    run._r.add_drawing(anchor)  
<span class="hljs-comment"># refer to docx.oxml.__init__.py  </span>
register_element_cls(<span class="hljs-string">'wp:anchor'</span>, CT_Anchor)  
document = Document()  
<span class="hljs-comment"># add a floating picture  </span>
p = document.add_paragraph()  
add_float_picture(p, <span class="hljs-string">'å›¾ç‰‡1.png'</span>)  
<span class="hljs-comment"># add text  </span>
p.add_run(<span class="hljs-string">'Hello World '</span>*<span class="hljs-number">50</span>)  
document.save(<span class="hljs-string">'æ–‡ä»¶2.docx'</span>)  
<span class="hljs-comment"># https://www.cnblogs.com/dancesir/p/17788854.html  </span>
</code></pre>
<h3 data-id="heading-38">4.4 åˆ†æ </h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># åˆ†2æ   </span>
section = doc.sections[<span class="hljs-number">0</span>]  
sectPr = section._sectPr  
cols = sectPr.xpath(<span class="hljs-string">'./w:cols'</span>)[<span class="hljs-number">0</span>]  
cols.<span class="hljs-built_in">set</span>(qn(<span class="hljs-string">'w:num'</span>),<span class="hljs-string">'2'</span>)  
</code></pre>
<h3 data-id="heading-39">4.5 é¡µçœ‰é¡µè„š</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># æ™®é€šé¡µçœ‰  </span>
doc = Document(<span class="hljs-string">'TransformeråŸç†çº¯äº«ç‰ˆ.docx'</span>)  
doc.sections[<span class="hljs-number">0</span>].header.paragraphs[<span class="hljs-number">0</span>].text = <span class="hljs-string">"è¿™æ˜¯ç¬¬1èŠ‚é¡µçœ‰"</span>  
<span class="hljs-comment"># åˆ†å¥‡å¶è®¾ç½®é¡µçœ‰  </span>
doc.settings.odd_and_even_pages_header_footer = <span class="hljs-literal">True</span>  
doc.sections[<span class="hljs-number">0</span>].even_page_header.paragraphs[<span class="hljs-number">0</span>].text = <span class="hljs-string">"è¿™æ˜¯å¶æ•°é¡µé¡µçœ‰"</span>  
doc.sections[<span class="hljs-number">0</span>].header.paragraphs[<span class="hljs-number">0</span>].text = <span class="hljs-string">"è¿™æ˜¯å¥‡æ•°é¡µé¡µçœ‰"</span>  
<span class="hljs-comment"># è®¾ç½®é¦–é¡µé¡µçœ‰  </span>
doc.sections[<span class="hljs-number">0</span>].different_first_page_header_footer = <span class="hljs-literal">True</span>  
doc.sections[<span class="hljs-number">0</span>].first_page_header.paragraphs[<span class="hljs-number">0</span>].text = <span class="hljs-string">"è¿™æ˜¯é¦–é¡µé¡µçœ‰"</span>  
</code></pre>
<h3 data-id="heading-40">4.6 ç›®å½•</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># æ’å…¥ç›®å½•ï¼ˆä¸ä¼šæ›´æ–°åŸŸï¼‰  </span>
paragraph = doc.paragraphs[<span class="hljs-number">0</span>].insert_paragraph_before()  
run = paragraph.add_run()  
fldChar = OxmlElement(<span class="hljs-string">'w:fldChar'</span>)  
fldChar.<span class="hljs-built_in">set</span>(qn(<span class="hljs-string">'w:fldCharType'</span>), <span class="hljs-string">'begin'</span>)  
instrText = OxmlElement(<span class="hljs-string">'w:instrText'</span>)  
instrText.<span class="hljs-built_in">set</span>(qn(<span class="hljs-string">'xml:space'</span>), <span class="hljs-string">'preserve'</span>)  
instrText.text = <span class="hljs-string">r'TOC \o "1-3" \h \z \u'</span>  
fldChar2 = OxmlElement(<span class="hljs-string">'w:fldChar'</span>)  
fldChar2.<span class="hljs-built_in">set</span>(qn(<span class="hljs-string">'w:fldCharType'</span>), <span class="hljs-string">'separate'</span>)  
fldChar3 = OxmlElement(<span class="hljs-string">'w:t'</span>)  
fldChar3.text = <span class="hljs-string">"Right-click to update field."</span>  
fldChar2.append(fldChar3)  
fldChar4 = OxmlElement(<span class="hljs-string">'w:fldChar'</span>)  
fldChar4.<span class="hljs-built_in">set</span>(qn(<span class="hljs-string">'w:fldCharType'</span>), <span class="hljs-string">'end'</span>)  
r_element = run._r  
r_element.append(fldChar)  
r_element.append(instrText)  
r_element.append(fldChar2)  
r_element.append(fldChar4)  
<span class="hljs-comment"># è‡ªåŠ¨æ›´æ–°ç›®å½•  </span>
<span class="hljs-keyword">import</span> lxml  
name_space = <span class="hljs-string">"{http://schemas.openxmlformats.org/wordprocessingml/2006/main}"</span>  
update_name_space = <span class="hljs-string">"%supdateFields"</span> % name_space  
val_name_space = <span class="hljs-string">"%sval"</span> % name_space  
<span class="hljs-keyword">try</span>:  
    element_update_field_obj = lxml.etree.SubElement(doc.settings.element, update_name_space)  
    element_update_field_obj.<span class="hljs-built_in">set</span>(val_name_space, <span class="hljs-string">"true"</span>)  
<span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:  
    <span class="hljs-keyword">del</span> e  
</code></pre>
<h3 data-id="heading-41">4.7 æ–‡æ¡£åˆå¹¶</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> docxcompose.composer <span class="hljs-keyword">import</span> Composer  
master = Document(<span class="hljs-string">"æ–‡ä»¶1.docx"</span>)  
composer = Composer(master)  
doc1 = Document(<span class="hljs-string">"æ–‡ä»¶2.docx"</span>)  
composer.append(doc1)  
doc2 = Document(<span class="hljs-string">"æ–‡ä»¶3.docx"</span>)  
composer.append(doc2)  
composer.save(<span class="hljs-string">"combined.docx"</span>)  
</code></pre>
<p><strong>æ³¨æ„</strong>ï¼šåˆå¹¶æ–‡æ¡£æ—¶ï¼Œåé¢çš„æ–‡æ¡£ä¼šè·Ÿéšç¬¬ä¸€ä¸ªæ–‡æ¡£çš„æ ¼å¼ã€‚</p>
<h2 data-id="heading-42">æ€»ç»“</h2>
<p>æœ¬æ–‡ä»‹ç»äº†Pythonå¤„ç†Wordæ–‡æ¡£çš„å®Œæ•´æµç¨‹ï¼ŒåŒ…æ‹¬ï¼š</p>
<ul>
<li>ä½¿ç”¨python-docxè¿›è¡ŒåŸºç¡€çš„æ–‡æ¡£åˆ›å»ºã€ç¼–è¾‘å’Œæ ¼å¼åŒ–</li>
<li>ä½¿ç”¨docxtplå®ç°åŸºäºæ¨¡æ¿çš„è‡ªåŠ¨åŒ–æ•°æ®å¡«å……</li>
<li>ä½¿ç”¨docxcomposeåˆå¹¶å¤šä¸ªWordæ–‡æ¡£</li>
<li>å„ç§è¿›é˜¶åŠŸèƒ½å¦‚è®¾ç½®å•å…ƒæ ¼è¾¹æ¡†ã€æ’å…¥è¶…é“¾æ¥ã€æå–å›¾ç‰‡ã€è®¾ç½®é¡µçœ‰é¡µè„šç­‰</li>
</ul>
<p>è¿™äº›æŠ€æœ¯å¯ä»¥å¹¿æ³›åº”ç”¨äºè‡ªåŠ¨åŒ–æŠ¥å‘Šç”Ÿæˆã€æ‰¹é‡æ–‡æ¡£å¤„ç†ã€åˆåŒæ¨¡æ¿å¡«å……ç­‰åœºæ™¯ï¼Œå¤§å¤§æé«˜å·¥ä½œæ•ˆç‡ã€‚</p>
<h2 data-id="heading-43">å‚è€ƒèµ„æ–™</h2>
<h3 data-id="heading-44">1. æˆ‘ä¹‹å‰æ’°å†™è¿‡çš„åšæ–‡</h3>
<p>ç°åœ¨æˆ‘æŠŠæ•´ä¸ªæ•™ç¨‹å¤§æ¦‚äº†ä¸€ç•ªï¼Œå› æ­¤å°†ä»…ä¿æŒæœ¬æ–‡æ›´æ–°ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2FPolarisRisingWar%2Farticle%2Fdetails%2F147332412" target="_blank" title="https://blog.csdn.net/PolarisRisingWar/article/details/147332412" ref="nofollow noopener noreferrer">æ·±å…¥è§£æPython-docxåº“ï¼šè½»æ¾ç©è½¬Wordæ–‡æ¡£è‡ªåŠ¨åŒ–</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2FPolarisRisingWar%2Farticle%2Fdetails%2F148251794" target="_blank" title="https://blog.csdn.net/PolarisRisingWar/article/details/148251794" ref="nofollow noopener noreferrer">docxtpl / DocxTemplateï¼šç”¨Python 3æ¸²æŸ“docxæ–‡æ¡£æ¨¡ç‰ˆ</a></li>
</ul>
<h3 data-id="heading-45">2. å®˜æ–¹æ–‡æ¡£</h3>
<ul>
<li>python-docxå®˜æ–¹æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fpython-docx.readthedocs.io%2F" target="_blank" title="https://python-docx.readthedocs.io/" ref="nofollow noopener noreferrer">python-docx.readthedocs.io/</a></li>
<li>docxtplå®˜æ–¹æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocxtpl.readthedocs.io%2F" target="_blank" title="https://docxtpl.readthedocs.io/" ref="nofollow noopener noreferrer">docxtpl.readthedocs.io/</a></li>
</ul>
<h3 data-id="heading-46">3. å…¶ä»–ç½‘ç»œèµ„æ–™</h3>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.cnblogs.com%2Fxtfge%2Fp%2F9949054.html" target="_blank" title="https://www.cnblogs.com/xtfge/p/9949054.html" ref="nofollow noopener noreferrer">åˆ©ç”¨python-docxæ‰¹é‡å¤„ç†Wordæ–‡ä»¶â€”â€”è¡¨æ ¼(äºŒ)æ ·å¼æ§åˆ¶</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwenku.csdn.net%2Fanswer%2F4fp7ee9rx6" target="_blank" title="https://wenku.csdn.net/answer/4fp7ee9rx6" ref="nofollow noopener noreferrer">ä½¿ç”¨python-docxè§£æwordæ–‡æ¡£ï¼Œéœ€è¦æå–å®Œæ•´çš„ç›®å½•å±‚çº§ã€å’Œæ¯ä¸ªæ ‡é¢˜ä¸‹çš„å†…å®¹ï¼Œä»¥åŠå›¾ç‰‡ - CSDNæ–‡åº“</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2Frufengzizai521%2Farticle%2Fdetails%2F89372113" target="_blank" title="https://blog.csdn.net/rufengzizai521/article/details/89372113" ref="nofollow noopener noreferrer">python-docx å¤„ç†å¯¼å‡ºwordæœ‰æ®µå‰è·ç¦»æ®µåè·ç¦»çš„é—®é¢˜_python-docx paragraphformat-CSDNåšå®¢</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2Fqq_39147299%2Farticle%2Fdetails%2F125179590" target="_blank" title="https://blog.csdn.net/qq_39147299/article/details/125179590" ref="nofollow noopener noreferrer">ã€python-docxã€‘æ–‡æœ¬æ“ä½œ(æ®µè½ã€runã€æ ‡é¢˜ã€é¦–è¡Œç¼©è¿›ã€æ®µå‰æ®µåã€å¤šå€è¡Œè·ã€å¯¹é½æ–¹å¼)_python docxè®¾ç½®é¦–è¡Œç¼©è¿›-CSDNåšå®¢</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2F2201_75415299%2Farticle%2Fdetails%2F153977729" target="_blank" title="https://blog.csdn.net/2201_75415299/article/details/153977729" ref="nofollow noopener noreferrer">python-docxæ ·å¼_python docx style-CSDNåšå®¢</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2Fhfy1237%2Farticle%2Fdetails%2F143891588" target="_blank" title="https://blog.csdn.net/hfy1237/article/details/143891588" ref="nofollow noopener noreferrer">Pythonè¯»å†™wordæ–‡æ¡£(.docx) python-docxçš„ä½¿ç”¨_python è¯»å–docx-CSDNåšå®¢</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2Fcxyxx12%2Farticle%2Fdetails%2F133386785" target="_blank" title="https://blog.csdn.net/cxyxx12/article/details/133386785" ref="nofollow noopener noreferrer">Python-docxåº“-å¸¸ç”¨æ“ä½œç¯‡-CSDNåšå®¢</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2Fbagell%2Farticle%2Fdetails%2F134827150" target="_blank" title="https://blog.csdn.net/bagell/article/details/134827150" ref="nofollow noopener noreferrer">Pythonä¸­çš„æ–‡æ¡£å¤„ç†ç¥å™¨ï¼šæ·±åº¦è§£æpython-docxåº“-CSDNåšå®¢</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2Fqq_41035145%2Farticle%2Fdetails%2F138685183" target="_blank" title="https://blog.csdn.net/qq_41035145/article/details/138685183" ref="nofollow noopener noreferrer">ã€ç¬”è®°ã€‘Python-docxå†™æ–‡æ¡£æ—¶é€å­—ç¬¦è®¾ç½®å­—ä½“ä¸ä¸Šä¸‹æ ‡_python word ä¸Šæ ‡-CSDNåšå®¢</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.51cto.com%2Fu_13259%2F9855268" target="_blank" title="https://blog.51cto.com/u_13259/9855268" ref="nofollow noopener noreferrer">python table æ€ä¹ˆè®¾ç½®å­—å· pythonè®¾ç½®wordè¡¨æ ¼å­—ä½“_kekenaiçš„æŠ€æœ¯åšå®¢_51CTOåšå®¢</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Flearnku.com%2Fpython%2Ft%2F52624" target="_blank" title="https://learnku.com/python/t/52624" ref="nofollow noopener noreferrer">å…³äºpython docxåŒ…ä¸­ï¼Œå¦‚ä½•å¯¹Wordè‡ªèº«è¡¨æ ¼å®ç°å¤åˆ¶ï¼Œå¹¶ä¸”ç²˜è´´åˆ°åŸdocxæ–‡æ¡£ä¸­ï¼Ÿ(å·²è§£å†³ï¼‰ | Python | Python æŠ€æœ¯è®ºå›</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fstackoverflow.com%2Fquestions%2F55545494%2Fin-python-docx-how-do-i-delete-a-table-row" target="_blank" title="https://stackoverflow.com/questions/55545494/in-python-docx-how-do-i-delete-a-table-row" ref="nofollow noopener noreferrer">ms word - In python-docx how do I delete a table row? - Stack Overflow</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2Fhoojou%2Farticle%2Fdetails%2F86224463" target="_blank" title="https://blog.csdn.net/hoojou/article/details/86224463" ref="nofollow noopener noreferrer">KeyError: u"no style with name 'Table Grid'"ï¼› python æ— æ³•åˆ›å»ºwordè¡¨æ ¼_keyerror: "no style with name 'table grid-CSDNåšå®¢</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F366902690" target="_blank" title="https://zhuanlan.zhihu.com/p/366902690" ref="nofollow noopener noreferrer">python docx-template - çŸ¥ä¹</a></li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/156a8c28159547ba8feaf31c1af1098b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6K-456We57yE6buY5LiN6K-t:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768807037&amp;x-signature=RAXVIYWZlliJqjYOrBjDwXd5zbs%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Kubernetesç›‘æ§å…¨æ ˆè§£å†³æ–¹æ¡ˆï¼šä»é›¶æ­å»ºPrometheus+Grafanaç›‘æ§ä½“ç³»]]></title>    <link>https://juejin.cn/post/7594266018304393279</link>    <guid>https://juejin.cn/post/7594266018304393279</guid>    <pubDate>2026-01-12T10:11:09.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594266018304393279" data-draft-id="7594266018304376895" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Kubernetesç›‘æ§å…¨æ ˆè§£å†³æ–¹æ¡ˆï¼šä»é›¶æ­å»ºPrometheus+Grafanaç›‘æ§ä½“ç³»"/> <meta itemprop="keywords" content="Linux"/> <meta itemprop="datePublished" content="2026-01-12T10:11:09.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="çŸ³å¤´530"/> <meta itemprop="url" content="https://juejin.cn/user/450136499300009"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Kubernetesç›‘æ§å…¨æ ˆè§£å†³æ–¹æ¡ˆï¼šä»é›¶æ­å»ºPrometheus+Grafanaç›‘æ§ä½“ç³»
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/450136499300009/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    çŸ³å¤´530
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-12T10:11:09.000Z" title="Mon Jan 12 2026 10:11:09 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€ç›‘æ§å…¨æ™¯å›¾ï¼šç»„ä»¶è§’è‰²ä¸èŒè´£</h2>
<p>åœ¨K8sç”Ÿæ€ä¸­ï¼Œç›‘æ§ä¸æ˜¯å•ä¸€å·¥å…·èƒ½å®Œæˆçš„ï¼Œè€Œæ˜¯ä¸€ä¸ª"å…¨å®¶æ¡¶"ååŒä½œæˆ˜ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Grafana (å¯è§†åŒ–)                      â”‚
â”‚     å°†æ¯ç‡¥æ•°æ®å˜æˆç›´è§‚å›¾è¡¨ï¼Œæ”¯æŒå¤šæ•°æ®æºå’Œå‘Šè­¦             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Prometheus (ç›‘æ§å¤§è„‘)                   â”‚
â”‚   æ‹‰å–+å­˜å‚¨æŒ‡æ ‡æ•°æ®ï¼Œæä¾›æŸ¥è¯¢è¯­è¨€ï¼Œè§¦å‘å‘Šè­¦è§„åˆ™            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â–¼           â–¼           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Node  â”‚   â”‚cAd-  â”‚   â”‚kube-state-  â”‚
â”‚Exportâ”‚   â”‚visor â”‚   â”‚metrics      â”‚
â””â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚           â”‚           â”‚
    â–¼           â–¼           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       Kubernetesé›†ç¾¤                     â”‚
â”‚ èŠ‚ç‚¹èµ„æº   å®¹å™¨èµ„æº     èµ„æºå¯¹è±¡çŠ¶æ€       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h3 data-id="heading-1">å„ç»„ä»¶ç²¾å‡†å®šä½ï¼š</h3>
<ul>
<li><strong>Prometheus</strong>ï¼šç›‘æ§ç³»ç»Ÿçš„"ä¸­å¤®å¤„ç†å™¨"ï¼Œè´Ÿè´£æ•°æ®é‡‡é›†ã€å­˜å‚¨ã€æŸ¥è¯¢å’Œå‘Šè­¦è§¦å‘</li>
<li><strong>cAdvisor</strong>ï¼šå®¹å™¨èµ„æº"é€è§†é•œ"ï¼Œä¸“é—¨é‡‡é›†CPUã€å†…å­˜ã€ç£ç›˜IOç­‰å®¹å™¨çº§æŒ‡æ ‡</li>
<li><strong>kube-state-metrics</strong>ï¼šé›†ç¾¤èµ„æº"çŠ¶æ€å¿«ç…§æœº"ï¼Œå…³æ³¨Deploymentã€Podç­‰K8så¯¹è±¡çŠ¶æ€</li>
<li><strong>Metrics Server</strong>ï¼šHPAçš„"æ•°æ®ä¾›åº”å•†"ï¼Œä¸ºè‡ªåŠ¨æ‰©ç¼©å®¹æä¾›å®æ—¶èµ„æºæŒ‡æ ‡</li>
<li><strong>Grafana</strong>ï¼šæ•°æ®"å¯è§†åŒ–é­”æœ¯å¸ˆ"ï¼Œè®©ç›‘æ§æ•°æ®ç”ŸåŠ¨ç›´è§‚</li>
<li><strong>Alertmanager</strong>ï¼šå‘Šè­¦"æ™ºèƒ½ç®¡å®¶"ï¼Œè´Ÿè´£å‘Šè­¦çš„è·¯ç”±ã€å»é‡å’Œé€šçŸ¥</li>
</ul>
<h2 data-id="heading-2">äºŒã€å®æˆ˜éƒ¨ç½²ï¼šä¸€æ­¥æ­¥æ„å»ºç›‘æ§ä½“ç³»</h2>
<h3 data-id="heading-3">ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºç›‘æ§ä¸“ç”¨å‘½åç©ºé—´</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ‰€æœ‰ç›‘æ§ç»„ä»¶éƒ½éƒ¨ç½²åœ¨kube-opså‘½åç©ºé—´ï¼Œä¾¿äºç®¡ç†</span>
kubectl create ns kube-ops
</code></pre>
<h3 data-id="heading-4">ç¬¬äºŒæ­¥ï¼šéƒ¨ç½²Prometheusï¼ˆç›‘æ§å¤§è„‘ï¼‰</h3>
<h4 data-id="heading-5">2.1 é…ç½®æ–‡ä»¶å­˜å‚¨ï¼ˆConfigMapï¼‰</h4>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># prometheus-cm.yaml</span>
<span class="hljs-attr">apiVersion:</span> <span class="hljs-string">v1</span>
<span class="hljs-attr">kind:</span> <span class="hljs-string">ConfigMap</span>
<span class="hljs-attr">metadata:</span>
  <span class="hljs-attr">name:</span> <span class="hljs-string">prometheus-config</span>
  <span class="hljs-attr">namespace:</span> <span class="hljs-string">kube-ops</span>
<span class="hljs-attr">data:</span>
  <span class="hljs-attr">prometheus.yml:</span> <span class="hljs-string">|
    global:
      scrape_interval: 15s      # æ¯15ç§’æŠ“å–ä¸€æ¬¡æ•°æ®
      scrape_timeout: 15s       # æŠ“å–è¶…æ—¶æ—¶é—´
    scrape_configs:
    - job_name: 'prometheus'    # ç¬¬ä¸€ä¸ªä»»åŠ¡ï¼šç›‘æ§è‡ªèº«
      static_configs:
      - targets: ['localhost:9090']  # Prometheusé»˜è®¤ç«¯å£
</span></code></pre>
<h4 data-id="heading-6">2.2 æ•°æ®æŒä¹…åŒ–å­˜å‚¨ï¼ˆPVCï¼‰</h4>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># prometheus-pvc.yaml</span>
<span class="hljs-attr">kind:</span> <span class="hljs-string">PersistentVolumeClaim</span>
<span class="hljs-attr">apiVersion:</span> <span class="hljs-string">v1</span>
<span class="hljs-attr">metadata:</span>
  <span class="hljs-attr">name:</span> <span class="hljs-string">prometheus</span>
  <span class="hljs-attr">namespace:</span> <span class="hljs-string">kube-ops</span>
<span class="hljs-attr">spec:</span>
  <span class="hljs-attr">storageClassName:</span> <span class="hljs-string">nfs-client</span>    <span class="hljs-comment"># ä½¿ç”¨NFSå­˜å‚¨</span>
  <span class="hljs-attr">accessModes:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">ReadWriteMany</span>               <span class="hljs-comment"># å¤šèŠ‚ç‚¹è¯»å†™ï¼ˆæ”¯æŒå¤šå‰¯æœ¬ï¼‰</span>
  <span class="hljs-attr">resources:</span>
    <span class="hljs-attr">requests:</span>
      <span class="hljs-attr">storage:</span> <span class="hljs-string">10Gi</span>               <span class="hljs-comment"># ç”³è¯·10GBå­˜å‚¨ç©ºé—´</span>
</code></pre>
<h4 data-id="heading-7">2.3 æƒé™é…ç½®ï¼ˆRBACï¼‰</h4>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># prometheus-rbac.yaml</span>
<span class="hljs-attr">apiVersion:</span> <span class="hljs-string">v1</span>
<span class="hljs-attr">kind:</span> <span class="hljs-string">ServiceAccount</span>
<span class="hljs-attr">metadata:</span>
  <span class="hljs-attr">name:</span> <span class="hljs-string">prometheus</span>
  <span class="hljs-attr">namespace:</span> <span class="hljs-string">kube-ops</span>

<span class="hljs-meta">---</span>
<span class="hljs-attr">apiVersion:</span> <span class="hljs-string">rbac.authorization.k8s.io/v1</span>
<span class="hljs-attr">kind:</span> <span class="hljs-string">ClusterRole</span>
<span class="hljs-attr">metadata:</span>
  <span class="hljs-attr">name:</span> <span class="hljs-string">prometheus</span>
<span class="hljs-attr">rules:</span>
<span class="hljs-bullet">-</span> <span class="hljs-attr">apiGroups:</span> [<span class="hljs-string">""</span>]
  <span class="hljs-attr">resources:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">nodes</span>          <span class="hljs-comment"># æŸ¥çœ‹èŠ‚ç‚¹</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">services</span>       <span class="hljs-comment"># æŸ¥çœ‹æœåŠ¡</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">endpoints</span>      <span class="hljs-comment"># æŸ¥çœ‹ç«¯ç‚¹</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">pods</span>           <span class="hljs-comment"># æŸ¥çœ‹Pod</span>
  <span class="hljs-attr">verbs:</span> [<span class="hljs-string">"get"</span>, <span class="hljs-string">"list"</span>, <span class="hljs-string">"watch"</span>]

<span class="hljs-meta">---</span>
<span class="hljs-attr">apiVersion:</span> <span class="hljs-string">rbac.authorization.k8s.io/v1</span>
<span class="hljs-attr">kind:</span> <span class="hljs-string">ClusterRoleBinding</span>
<span class="hljs-attr">metadata:</span>
  <span class="hljs-attr">name:</span> <span class="hljs-string">prometheus</span>
<span class="hljs-attr">roleRef:</span>
  <span class="hljs-attr">apiGroup:</span> <span class="hljs-string">rbac.authorization.k8s.io</span>
  <span class="hljs-attr">kind:</span> <span class="hljs-string">ClusterRole</span>
  <span class="hljs-attr">name:</span> <span class="hljs-string">prometheus</span>
<span class="hljs-attr">subjects:</span>
<span class="hljs-bullet">-</span> <span class="hljs-attr">kind:</span> <span class="hljs-string">ServiceAccount</span>
  <span class="hljs-attr">name:</span> <span class="hljs-string">prometheus</span>
  <span class="hljs-attr">namespace:</span> <span class="hljs-string">kube-ops</span>
</code></pre>
<h4 data-id="heading-8">2.4 éƒ¨ç½²Prometheusåº”ç”¨</h4>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># prometheus-deploy.yaml</span>
<span class="hljs-attr">apiVersion:</span> <span class="hljs-string">apps/v1</span>
<span class="hljs-attr">kind:</span> <span class="hljs-string">Deployment</span>
<span class="hljs-attr">metadata:</span>
  <span class="hljs-attr">name:</span> <span class="hljs-string">prometheus</span>
  <span class="hljs-attr">namespace:</span> <span class="hljs-string">kube-ops</span>
<span class="hljs-attr">spec:</span>
  <span class="hljs-attr">selector:</span>
    <span class="hljs-attr">matchLabels:</span>
      <span class="hljs-attr">app:</span> <span class="hljs-string">prometheus</span>
  <span class="hljs-attr">template:</span>
    <span class="hljs-attr">metadata:</span>
      <span class="hljs-attr">labels:</span>
        <span class="hljs-attr">app:</span> <span class="hljs-string">prometheus</span>
    <span class="hljs-attr">spec:</span>
      <span class="hljs-attr">serviceAccountName:</span> <span class="hljs-string">prometheus</span>
      <span class="hljs-attr">containers:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">image:</span> <span class="hljs-string">prom/prometheus:v2.4.3</span>
        <span class="hljs-attr">name:</span> <span class="hljs-string">prometheus</span>
        <span class="hljs-attr">command:</span> [<span class="hljs-string">"/bin/prometheus"</span>]
        <span class="hljs-attr">args:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">"--config.file=/etc/prometheus/prometheus.yml"</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">"--storage.tsdb.path=/prometheus"</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">"--storage.tsdb.retention=24h"</span>    <span class="hljs-comment"># æ•°æ®ä¿ç•™24å°æ—¶</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">"--web.enable-admin-api"</span>           <span class="hljs-comment"># å¯ç”¨ç®¡ç†API</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">"--web.enable-lifecycle"</span>           <span class="hljs-comment"># æ”¯æŒé…ç½®çƒ­é‡è½½</span>
        <span class="hljs-attr">ports:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">containerPort:</span> <span class="hljs-number">9090</span>
          <span class="hljs-attr">name:</span> <span class="hljs-string">http</span>
        <span class="hljs-attr">volumeMounts:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">mountPath:</span> <span class="hljs-string">"/prometheus"</span>
          <span class="hljs-attr">name:</span> <span class="hljs-string">data</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">mountPath:</span> <span class="hljs-string">"/etc/prometheus"</span>
          <span class="hljs-attr">name:</span> <span class="hljs-string">config-volume</span>
      <span class="hljs-attr">volumes:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">data</span>
        <span class="hljs-attr">persistentVolumeClaim:</span>
          <span class="hljs-attr">claimName:</span> <span class="hljs-string">prometheus</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">config-volume</span>
        <span class="hljs-attr">configMap:</span>
          <span class="hljs-attr">name:</span> <span class="hljs-string">prometheus-config</span>
</code></pre>
<h4 data-id="heading-9">2.5 æš´éœ²æœåŠ¡ï¼ˆServiceï¼‰</h4>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># prometheus-svc.yaml</span>
<span class="hljs-attr">apiVersion:</span> <span class="hljs-string">v1</span>
<span class="hljs-attr">kind:</span> <span class="hljs-string">Service</span>
<span class="hljs-attr">metadata:</span>
  <span class="hljs-attr">name:</span> <span class="hljs-string">prometheus</span>
  <span class="hljs-attr">namespace:</span> <span class="hljs-string">kube-ops</span>
<span class="hljs-attr">spec:</span>
  <span class="hljs-attr">selector:</span>
    <span class="hljs-attr">app:</span> <span class="hljs-string">prometheus</span>
  <span class="hljs-attr">type:</span> <span class="hljs-string">NodePort</span>          <span class="hljs-comment"># NodePortç±»å‹ï¼Œå¯é€šè¿‡èŠ‚ç‚¹IPè®¿é—®</span>
  <span class="hljs-attr">ports:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">web</span>
      <span class="hljs-attr">port:</span> <span class="hljs-number">9090</span>
      <span class="hljs-attr">targetPort:</span> <span class="hljs-string">http</span>
</code></pre>
<p><strong>éƒ¨ç½²å‘½ä»¤</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æŒ‰é¡ºåºéƒ¨ç½²</span>
kubectl apply -f prometheus-cm.yaml
kubectl apply -f prometheus-pvc.yaml
kubectl apply -f prometheus-rbac.yaml
kubectl apply -f prometheus-deploy.yaml
kubectl apply -f prometheus-svc.yaml
</code></pre>
<h3 data-id="heading-10">ç¬¬ä¸‰æ­¥ï¼šæ‰©å±•ç›‘æ§èŒƒå›´</h3>
<h4 data-id="heading-11">3.1 ç›‘æ§Ingress-Nginx</h4>
<p>Ingress-Nginxé»˜è®¤åœ¨10254ç«¯å£æš´éœ²ç›‘æ§æŒ‡æ ‡ï¼Œåªéœ€é…ç½®æŠ“å–ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># æ›´æ–°prometheus-cm.yamlï¼Œåœ¨scrape_configsä¸­æ·»åŠ </span>
<span class="hljs-bullet">-</span> <span class="hljs-attr">job_name:</span> <span class="hljs-string">'ingressnginx20'</span>
  <span class="hljs-attr">static_configs:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">targets:</span> [<span class="hljs-string">'192.168.200.20:10254'</span>]  <span class="hljs-comment"># ç¬¬ä¸€ä¸ªIngressèŠ‚ç‚¹</span>

<span class="hljs-bullet">-</span> <span class="hljs-attr">job_name:</span> <span class="hljs-string">'ingressnginx30'</span>
  <span class="hljs-attr">static_configs:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">targets:</span> [<span class="hljs-string">'192.168.200.30:10254'</span>]  <span class="hljs-comment"># ç¬¬äºŒä¸ªIngressèŠ‚ç‚¹</span>
</code></pre>
<p><strong>é…ç½®çƒ­é‡è½½</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åº”ç”¨æ–°é…ç½®</span>
kubectl apply -f prometheus-cm.yaml

<span class="hljs-comment"># çƒ­é‡è½½Prometheusï¼ˆéœ€è¦æå‰å¼€å¯--web.enable-lifecycleï¼‰</span>
curl -X POST <span class="hljs-string">"http://&lt;Prometheus-Service-IP&gt;:9090/-/reload"</span>
</code></pre>
<h4 data-id="heading-12">3.2 éƒ¨ç½²Node Exporterï¼ˆèŠ‚ç‚¹ç›‘æ§ï¼‰</h4>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># prome-node-exporter.yaml</span>
<span class="hljs-attr">apiVersion:</span> <span class="hljs-string">apps/v1</span>
<span class="hljs-attr">kind:</span> <span class="hljs-string">DaemonSet</span>          <span class="hljs-comment"># æ¯ä¸ªèŠ‚ç‚¹è¿è¡Œä¸€ä¸ªå®ä¾‹</span>
<span class="hljs-attr">metadata:</span>
  <span class="hljs-attr">name:</span> <span class="hljs-string">node-exporter</span>
  <span class="hljs-attr">namespace:</span> <span class="hljs-string">kube-ops</span>
<span class="hljs-attr">spec:</span>
  <span class="hljs-attr">selector:</span>
    <span class="hljs-attr">matchLabels:</span>
      <span class="hljs-attr">name:</span> <span class="hljs-string">node-exporter</span>
  <span class="hljs-attr">template:</span>
    <span class="hljs-attr">metadata:</span>
      <span class="hljs-attr">labels:</span>
        <span class="hljs-attr">name:</span> <span class="hljs-string">node-exporter</span>
    <span class="hljs-attr">spec:</span>
      <span class="hljs-attr">hostPID:</span> <span class="hljs-literal">true</span>           <span class="hljs-comment"># å…±äº«ä¸»æœºè¿›ç¨‹ç©ºé—´</span>
      <span class="hljs-attr">hostIPC:</span> <span class="hljs-literal">true</span>           <span class="hljs-comment"># å…±äº«ä¸»æœºIPCç©ºé—´</span>
      <span class="hljs-attr">hostNetwork:</span> <span class="hljs-literal">true</span>       <span class="hljs-comment"># ä½¿ç”¨ä¸»æœºç½‘ç»œ</span>
      <span class="hljs-attr">containers:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">node-exporter</span>
        <span class="hljs-attr">image:</span> <span class="hljs-string">prom/node-exporter:v0.16.0</span>
        <span class="hljs-attr">ports:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">containerPort:</span> <span class="hljs-number">9100</span>
        <span class="hljs-attr">securityContext:</span>
          <span class="hljs-attr">privileged:</span> <span class="hljs-literal">true</span>    <span class="hljs-comment"># ç‰¹æƒæ¨¡å¼ï¼Œè¯»å–ä¸»æœºä¿¡æ¯</span>
        <span class="hljs-attr">args:</span>
          <span class="hljs-bullet">-</span> <span class="hljs-string">--path.procfs=/host/proc</span>
          <span class="hljs-bullet">-</span> <span class="hljs-string">--path.sysfs=/host/sys</span>
        <span class="hljs-attr">volumeMounts:</span>
          <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">proc</span>
            <span class="hljs-attr">mountPath:</span> <span class="hljs-string">/host/proc</span>
          <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">sys</span>
            <span class="hljs-attr">mountPath:</span> <span class="hljs-string">/host/sys</span>
      <span class="hljs-attr">volumes:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">proc</span>
          <span class="hljs-attr">hostPath:</span>
            <span class="hljs-attr">path:</span> <span class="hljs-string">/proc</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">sys</span>
          <span class="hljs-attr">hostPath:</span>
            <span class="hljs-attr">path:</span> <span class="hljs-string">/sys</span>
</code></pre>
<h4 data-id="heading-13">3.3 ç›‘æ§å®¹å™¨èµ„æºï¼ˆcAdvisorï¼‰</h4>
<p>cAdvisorå·²é›†æˆåœ¨kubeletä¸­ï¼Œé€šè¿‡API Serverä»£ç†è®¿é—®ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># åœ¨prometheusé…ç½®ä¸­æ·»åŠ </span>
<span class="hljs-bullet">-</span> <span class="hljs-attr">job_name:</span> <span class="hljs-string">'kubernetes-cadvisor'</span>
  <span class="hljs-attr">kubernetes_sd_configs:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">role:</span> <span class="hljs-string">node</span>
  <span class="hljs-attr">scheme:</span> <span class="hljs-string">https</span>
  <span class="hljs-attr">tls_config:</span>
    <span class="hljs-attr">ca_file:</span> <span class="hljs-string">/var/run/secrets/kubernetes.io/serviceaccount/ca.crt</span>
  <span class="hljs-attr">bearer_token_file:</span> <span class="hljs-string">/var/run/secrets/kubernetes.io/serviceaccount/token</span>
  <span class="hljs-attr">relabel_configs:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">target_label:</span> <span class="hljs-string">__address__</span>
    <span class="hljs-attr">replacement:</span> <span class="hljs-string">kubernetes.default.svc:443</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">source_labels:</span> [<span class="hljs-string">__meta_kubernetes_node_name</span>]
    <span class="hljs-attr">regex:</span> <span class="hljs-string">(.+)</span>
    <span class="hljs-attr">target_label:</span> <span class="hljs-string">__metrics_path__</span>
    <span class="hljs-attr">replacement:</span> <span class="hljs-string">/api/v1/nodes/${1}/proxy/metrics/cadvisor</span>
</code></pre>
<h4 data-id="heading-14">3.4 ç›‘æ§API Server</h4>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-bullet">-</span> <span class="hljs-attr">job_name:</span> <span class="hljs-string">'kubernetes-apiservers'</span>
  <span class="hljs-attr">kubernetes_sd_configs:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">role:</span> <span class="hljs-string">endpoints</span>
  <span class="hljs-attr">scheme:</span> <span class="hljs-string">https</span>
  <span class="hljs-attr">tls_config:</span>
    <span class="hljs-attr">ca_file:</span> <span class="hljs-string">/var/run/secrets/kubernetes.io/serviceaccount/ca.crt</span>
  <span class="hljs-attr">bearer_token_file:</span> <span class="hljs-string">/var/run/secrets/kubernetes.io/serviceaccount/token</span>
  <span class="hljs-attr">relabel_configs:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">source_labels:</span> [<span class="hljs-string">__meta_kubernetes_namespace</span>, <span class="hljs-string">__meta_kubernetes_service_name</span>, <span class="hljs-string">__meta_kubernetes_endpoint_port_name</span>]
    <span class="hljs-attr">action:</span> <span class="hljs-string">keep</span>
    <span class="hljs-attr">regex:</span> <span class="hljs-string">default;kubernetes;https</span>  <span class="hljs-comment"># åªç›‘æ§API Serverçš„httpsç«¯ç‚¹</span>
</code></pre>
<h3 data-id="heading-15">ç¬¬å››æ­¥ï¼šéƒ¨ç½²Grafanaï¼ˆæ•°æ®å¯è§†åŒ–ï¼‰</h3>
<h4 data-id="heading-16">4.1 åˆ›å»ºå­˜å‚¨</h4>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># grafana-volume.yaml</span>
<span class="hljs-attr">apiVersion:</span> <span class="hljs-string">v1</span>
<span class="hljs-attr">kind:</span> <span class="hljs-string">PersistentVolumeClaim</span>
<span class="hljs-attr">metadata:</span>
  <span class="hljs-attr">name:</span> <span class="hljs-string">grafana</span>
  <span class="hljs-attr">namespace:</span> <span class="hljs-string">kube-ops</span>
<span class="hljs-attr">spec:</span>
  <span class="hljs-attr">storageClassName:</span> <span class="hljs-string">nfs-client</span>
  <span class="hljs-attr">accessModes:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">ReadWriteOnce</span>
  <span class="hljs-attr">resources:</span>
    <span class="hljs-attr">requests:</span>
      <span class="hljs-attr">storage:</span> <span class="hljs-string">1Gi</span>
</code></pre>
<h4 data-id="heading-17">4.2 è°ƒæ•´æƒé™ï¼ˆé¦–æ¬¡éƒ¨ç½²ï¼‰</h4>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># grafana-chown-job.yaml</span>
<span class="hljs-attr">apiVersion:</span> <span class="hljs-string">batch/v1</span>
<span class="hljs-attr">kind:</span> <span class="hljs-string">Job</span>
<span class="hljs-attr">metadata:</span>
  <span class="hljs-attr">name:</span> <span class="hljs-string">grafana-chown</span>
  <span class="hljs-attr">namespace:</span> <span class="hljs-string">kube-ops</span>
<span class="hljs-attr">spec:</span>
  <span class="hljs-attr">template:</span>
    <span class="hljs-attr">spec:</span>
      <span class="hljs-attr">restartPolicy:</span> <span class="hljs-string">Never</span>
      <span class="hljs-attr">containers:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">grafana-chown</span>
        <span class="hljs-attr">command:</span> [<span class="hljs-string">"chown"</span>, <span class="hljs-string">"-R"</span>, <span class="hljs-string">"472:472"</span>, <span class="hljs-string">"/var/lib/grafana"</span>]
        <span class="hljs-attr">image:</span> <span class="hljs-string">busybox</span>
        <span class="hljs-attr">volumeMounts:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">storage</span>
          <span class="hljs-attr">subPath:</span> <span class="hljs-string">grafana</span>
          <span class="hljs-attr">mountPath:</span> <span class="hljs-string">/var/lib/grafana</span>
      <span class="hljs-attr">volumes:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">storage</span>
        <span class="hljs-attr">persistentVolumeClaim:</span>
          <span class="hljs-attr">claimName:</span> <span class="hljs-string">grafana</span>
</code></pre>
<h4 data-id="heading-18">4.3 éƒ¨ç½²Grafana</h4>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># grafana-deploy.yaml</span>
<span class="hljs-attr">apiVersion:</span> <span class="hljs-string">apps/v1</span>
<span class="hljs-attr">kind:</span> <span class="hljs-string">Deployment</span>
<span class="hljs-attr">metadata:</span>
  <span class="hljs-attr">name:</span> <span class="hljs-string">grafana</span>
  <span class="hljs-attr">namespace:</span> <span class="hljs-string">kube-ops</span>
<span class="hljs-attr">spec:</span>
  <span class="hljs-attr">selector:</span>
    <span class="hljs-attr">matchLabels:</span>
      <span class="hljs-attr">app:</span> <span class="hljs-string">grafana</span>
  <span class="hljs-attr">template:</span>
    <span class="hljs-attr">metadata:</span>
      <span class="hljs-attr">labels:</span>
        <span class="hljs-attr">app:</span> <span class="hljs-string">grafana</span>
    <span class="hljs-attr">spec:</span>
      <span class="hljs-attr">containers:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">grafana</span>
        <span class="hljs-attr">image:</span> <span class="hljs-string">grafana/grafana:5.3.4</span>
        <span class="hljs-attr">ports:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">containerPort:</span> <span class="hljs-number">3000</span>
          <span class="hljs-attr">name:</span> <span class="hljs-string">grafana</span>
        <span class="hljs-attr">env:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">GF_SECURITY_ADMIN_USER</span>
          <span class="hljs-attr">value:</span> <span class="hljs-string">admin</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">GF_SECURITY_ADMIN_PASSWORD</span>
          <span class="hljs-attr">value:</span> <span class="hljs-string">admin321</span>
        <span class="hljs-attr">readinessProbe:</span>
          <span class="hljs-attr">httpGet:</span>
            <span class="hljs-attr">path:</span> <span class="hljs-string">/api/health</span>
            <span class="hljs-attr">port:</span> <span class="hljs-number">3000</span>
          <span class="hljs-attr">initialDelaySeconds:</span> <span class="hljs-number">60</span>
          <span class="hljs-attr">periodSeconds:</span> <span class="hljs-number">10</span>
        <span class="hljs-attr">volumeMounts:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">mountPath:</span> <span class="hljs-string">/var/lib/grafana</span>
          <span class="hljs-attr">subPath:</span> <span class="hljs-string">grafana</span>
          <span class="hljs-attr">name:</span> <span class="hljs-string">storage</span>
        <span class="hljs-attr">securityContext:</span>
          <span class="hljs-attr">fsGroup:</span> <span class="hljs-number">472</span>
          <span class="hljs-attr">runAsUser:</span> <span class="hljs-number">472</span>
      <span class="hljs-attr">volumes:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">storage</span>
        <span class="hljs-attr">persistentVolumeClaim:</span>
          <span class="hljs-attr">claimName:</span> <span class="hljs-string">grafana</span>
</code></pre>
<h4 data-id="heading-19">4.4 æš´éœ²æœåŠ¡</h4>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># grafana-svc.yaml</span>
<span class="hljs-attr">apiVersion:</span> <span class="hljs-string">v1</span>
<span class="hljs-attr">kind:</span> <span class="hljs-string">Service</span>
<span class="hljs-attr">metadata:</span>
  <span class="hljs-attr">name:</span> <span class="hljs-string">grafana</span>
  <span class="hljs-attr">namespace:</span> <span class="hljs-string">kube-ops</span>
<span class="hljs-attr">spec:</span>
  <span class="hljs-attr">type:</span> <span class="hljs-string">NodePort</span>
  <span class="hljs-attr">ports:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">port:</span> <span class="hljs-number">3000</span>
    <span class="hljs-attr">targetPort:</span> <span class="hljs-number">3000</span>
  <span class="hljs-attr">selector:</span>
    <span class="hljs-attr">app:</span> <span class="hljs-string">grafana</span>
</code></pre>
<h3 data-id="heading-20">ç¬¬äº”æ­¥ï¼šé…ç½®å‘Šè­¦ï¼ˆAlertmanagerï¼‰</h3>
<h4 data-id="heading-21">5.1 å‘Šè­¦è§„åˆ™å®šä¹‰</h4>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># alert-rules.yaml</span>
<span class="hljs-attr">apiVersion:</span> <span class="hljs-string">v1</span>
<span class="hljs-attr">kind:</span> <span class="hljs-string">ConfigMap</span>
<span class="hljs-attr">metadata:</span>
  <span class="hljs-attr">name:</span> <span class="hljs-string">prometheus-rules</span>
  <span class="hljs-attr">namespace:</span> <span class="hljs-string">kube-ops</span>
<span class="hljs-attr">data:</span>
  <span class="hljs-attr">node-memory.rules:</span> <span class="hljs-string">|
    groups:
    - name: node-alerts
      rules:
      - alert: NodeMemoryUsage
        expr: (node_memory_MemTotal_bytes - (node_memory_MemFree_bytes + node_memory_Buffers_bytes + node_memory_Cached_bytes)) / node_memory_MemTotal_bytes * 100 &gt; 80
        for: 2m
        labels:
          severity: warning
        annotations:
          summary: "{{ $labels.instance }} å†…å­˜ä½¿ç”¨ç‡è¿‡é«˜"
          description: "{{ $labels.instance }} å†…å­˜ä½¿ç”¨ç‡è¶…è¿‡80%ï¼Œå½“å‰å€¼ {{ $value }}%"
</span></code></pre>
<h4 data-id="heading-22">5.2 Alertmanageré…ç½®</h4>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># alertmanager-config.yaml</span>
<span class="hljs-attr">apiVersion:</span> <span class="hljs-string">v1</span>
<span class="hljs-attr">kind:</span> <span class="hljs-string">ConfigMap</span>
<span class="hljs-attr">metadata:</span>
  <span class="hljs-attr">name:</span> <span class="hljs-string">alertmanager-config</span>
  <span class="hljs-attr">namespace:</span> <span class="hljs-string">kube-ops</span>
<span class="hljs-attr">data:</span>
  <span class="hljs-attr">alertmanager.yml:</span> <span class="hljs-string">|
    global:
      smtp_smarthost: 'smtp.163.com:25'
      smtp_from: 'monitor@163.com'
      smtp_auth_username: 'monitor@163.com'
      smtp_auth_password: 'your-auth-code'
</span>    
    <span class="hljs-attr">route:</span>
      <span class="hljs-attr">group_by:</span> [<span class="hljs-string">'alertname'</span>]
      <span class="hljs-attr">group_wait:</span> <span class="hljs-string">10s</span>
      <span class="hljs-attr">group_interval:</span> <span class="hljs-string">10s</span>
      <span class="hljs-attr">repeat_interval:</span> <span class="hljs-string">1h</span>
      <span class="hljs-attr">receiver:</span> <span class="hljs-string">'email'</span>
    
    <span class="hljs-attr">receivers:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">'email'</span>
      <span class="hljs-attr">email_configs:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">to:</span> <span class="hljs-string">'admin@company.com'</span>
</code></pre>
<h2 data-id="heading-23">ä¸‰ã€ç›‘æ§æŸ¥è¯¢å®æˆ˜</h2>
<h3 data-id="heading-24">å¸¸ç”¨PromQLæŸ¥è¯¢ç¤ºä¾‹ï¼š</h3>
<pre><code class="hljs language-promql" lang="promql"># 1. æŸ¥çœ‹èŠ‚ç‚¹CPUä½¿ç”¨ç‡
100 - (avg(irate(node_cpu_seconds_total{mode="idle"}[5m])) * 100)

# 2. æŸ¥çœ‹èŠ‚ç‚¹å†…å­˜ä½¿ç”¨ç‡
(node_memory_MemTotal_bytes - node_memory_MemAvailable_bytes) / node_memory_MemTotal_bytes * 100

# 3. æŸ¥çœ‹Podå†…å­˜ä½¿ç”¨ï¼ˆå‰10åï¼‰
topk(10, sum(container_memory_usage_bytes{container_name!=""}) by (pod_name, namespace))

# 4. Ingressè¯·æ±‚é‡ç»Ÿè®¡
sum(rate(nginx_ingress_controller_requests[5m])) by (ingress)

# 5. API Serverè¯·æ±‚å»¶è¿Ÿï¼ˆP99ï¼‰
histogram_quantile(0.99, sum(rate(apiserver_request_duration_seconds_bucket[5m])) by (le, verb))
</code></pre>
<h3 data-id="heading-25">Grafanaä»ªè¡¨æ¿å¯¼å…¥ï¼š</h3>
<ol>
<li>è®¿é—®Grafanaï¼š<code>http://&lt;èŠ‚ç‚¹IP&gt;:&lt;NodePort&gt;</code></li>
<li>æ·»åŠ æ•°æ®æºï¼šé€‰æ‹©Prometheusï¼ŒURLå¡«å†™<code>http://prometheus.kube-ops.svc:9090</code></li>
<li>å¯¼å…¥æ¨¡æ¿ï¼š
<ul>
<li>Kubernetesé›†ç¾¤ç›‘æ§ï¼šID <code>7249</code></li>
<li>Node Exporterï¼šID <code>8919</code></li>
<li>cAdvisorï¼šID <code>14282</code></li>
</ul>
</li>
</ol>
<h2 data-id="heading-26">å››ã€ç›‘æ§æœ€ä½³å®è·µ</h2>
<h3 data-id="heading-27">1. å‘½åè§„èŒƒ</h3>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># ä¸ºç›‘æ§æŒ‡æ ‡æ·»åŠ ç»Ÿä¸€æ ‡ç­¾</span>
<span class="hljs-attr">relabel_configs:</span>
<span class="hljs-bullet">-</span> <span class="hljs-attr">source_labels:</span> [<span class="hljs-string">__meta_kubernetes_namespace</span>]
  <span class="hljs-attr">target_label:</span> <span class="hljs-string">namespace</span>
<span class="hljs-bullet">-</span> <span class="hljs-attr">source_labels:</span> [<span class="hljs-string">__meta_kubernetes_pod_name</span>]
  <span class="hljs-attr">target_label:</span> <span class="hljs-string">pod</span>
</code></pre>
<h3 data-id="heading-28">2. èµ„æºé™åˆ¶</h3>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># ä¸ºç›‘æ§ç»„ä»¶è®¾ç½®åˆç†çš„èµ„æºé™åˆ¶</span>
<span class="hljs-attr">resources:</span>
  <span class="hljs-attr">requests:</span>
    <span class="hljs-attr">memory:</span> <span class="hljs-string">"512Mi"</span>
    <span class="hljs-attr">cpu:</span> <span class="hljs-string">"250m"</span>
  <span class="hljs-attr">limits:</span>
    <span class="hljs-attr">memory:</span> <span class="hljs-string">"1Gi"</span>
    <span class="hljs-attr">cpu:</span> <span class="hljs-string">"500m"</span>
</code></pre>
<h3 data-id="heading-29">3. æ•°æ®ä¿ç•™ç­–ç•¥</h3>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># æ ¹æ®éœ€æ±‚è°ƒæ•´æ•°æ®ä¿ç•™æ—¶é—´</span>
<span class="hljs-attr">args:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">"--storage.tsdb.retention.time=30d"</span>  <span class="hljs-comment"># ä¿ç•™30å¤©</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">"--storage.tsdb.retention.size=100GB"</span> <span class="hljs-comment"># æˆ–é™åˆ¶å¤§å°</span>
</code></pre>
<h3 data-id="heading-30">4. é«˜å¯ç”¨éƒ¨ç½²</h3>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># Prometheusé«˜å¯ç”¨é…ç½®</span>
<span class="hljs-attr">spec:</span>
  <span class="hljs-attr">replicas:</span> <span class="hljs-number">2</span>  <span class="hljs-comment"># åŒå‰¯æœ¬</span>
  <span class="hljs-attr">strategy:</span>
    <span class="hljs-attr">type:</span> <span class="hljs-string">RollingUpdate</span>
</code></pre>
<h2 data-id="heading-31">äº”ã€æ•…éšœæ’æŸ¥æŒ‡å—</h2>
<h3 data-id="heading-32">å¸¸è§é—®é¢˜åŠè§£å†³ï¼š</h3>






























<table><thead><tr><th>é—®é¢˜</th><th>å¯èƒ½åŸå› </th><th>è§£å†³æ–¹æ¡ˆ</th></tr></thead><tbody><tr><td>Prometheus Targetæ˜¾ç¤ºDOWN</td><td>ç½‘ç»œä¸é€š/ç«¯å£æœªå¼€æ”¾</td><td>æ£€æŸ¥é˜²ç«å¢™ã€Serviceé…ç½®</td></tr><tr><td>Grafanaæ— æ³•è¿æ¥æ•°æ®æº</td><td>ç½‘ç»œç­–ç•¥é™åˆ¶</td><td>æ£€æŸ¥NetworkPolicy</td></tr><tr><td>ç›‘æ§æ•°æ®ç¼ºå¤±</td><td>æŠ“å–é…ç½®é”™è¯¯</td><td>æ£€æŸ¥relabelé…ç½®</td></tr><tr><td>å†…å­˜å ç”¨è¿‡é«˜</td><td>æ•°æ®ä¿ç•™å¤ªä¹…</td><td>è°ƒæ•´retentionå‚æ•°</td></tr></tbody></table>
<h3 data-id="heading-33">æ’æŸ¥å‘½ä»¤ï¼š</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æŸ¥çœ‹Prometheusæ—¥å¿—</span>
kubectl logs -f prometheus-pod -n kube-ops

<span class="hljs-comment"># æ£€æŸ¥é…ç½®æ˜¯å¦æ­£ç¡®</span>
kubectl get configmap prometheus-config -n kube-ops -o yaml

<span class="hljs-comment"># éªŒè¯æŒ‡æ ‡æ˜¯å¦æ­£å¸¸æŠ“å–</span>
kubectl <span class="hljs-built_in">exec</span> -it prometheus-pod -n kube-ops -- wget -O- http://localhost:9090/api/v1/targets
</code></pre>
<h2 data-id="heading-34">å…­ã€æ€»ç»“</h2>
<p>é€šè¿‡æœ¬æ–‡çš„å®æˆ˜éƒ¨ç½²ï¼Œä½ å·²ç»æ­å»ºäº†ä¸€å¥—å®Œæ•´çš„Kubernetesç›‘æ§ä½“ç³»ï¼š</p>
<ol>
<li><strong>æ•°æ®é‡‡é›†å±‚</strong>ï¼šNode Exporter + cAdvisor + kube-state-metrics</li>
<li><strong>æ•°æ®å¤„ç†å±‚</strong>ï¼šPrometheus + Alertmanager</li>
<li><strong>æ•°æ®å±•ç¤ºå±‚</strong>ï¼šGrafana</li>
</ol>
<p>è¿™å¥—æ–¹æ¡ˆå…·æœ‰ä»¥ä¸‹ä¼˜åŠ¿ï¼š</p>
<ul>
<li><strong>å…¨é¢æ€§</strong>ï¼šè¦†ç›–èŠ‚ç‚¹ã€å®¹å™¨ã€åº”ç”¨ã€K8så¯¹è±¡</li>
<li><strong>çµæ´»æ€§</strong>ï¼šæ”¯æŒè‡ªå®šä¹‰ç›‘æ§æŒ‡æ ‡å’Œå‘Šè­¦è§„åˆ™</li>
<li><strong>å¯è§†åŒ–</strong>ï¼šé€šè¿‡Grafanaæä¾›ä¸°å¯Œçš„ä»ªè¡¨æ¿</li>
<li><strong>å¯æ‰©å±•</strong>ï¼šè½»æ¾é›†æˆæ–°çš„ç›‘æ§ç›®æ ‡</li>
</ul>
<p>è®°ä½ï¼šç›‘æ§ä¸æ˜¯ä¸€æ¬¡æ€§çš„å·¥ä½œï¼Œè€Œæ˜¯ä¸€ä¸ªæŒç»­ä¼˜åŒ–çš„è¿‡ç¨‹ã€‚éšç€ä¸šåŠ¡å‘å±•ï¼Œéœ€è¦ä¸æ–­è°ƒæ•´ç›‘æ§ç­–ç•¥å’Œå‘Šè­¦é˜ˆå€¼ï¼Œè®©ç›‘æ§çœŸæ­£ä¸ºä¸šåŠ¡ç¨³å®šè¿è¡Œä¿é©¾æŠ¤èˆªã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸æ¸…æ¥šçš„ .gitignore]]></title>    <link>https://juejin.cn/post/7594153083879047219</link>    <guid>https://juejin.cn/post/7594153083879047219</guid>    <pubDate>2026-01-12T06:45:09.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594153083879047219" data-draft-id="7594040270503247910" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸æ¸…æ¥šçš„ .gitignore"/> <meta itemprop="keywords" content="å‰ç«¯,Git"/> <meta itemprop="datePublished" content="2026-01-12T06:45:09.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Carry345"/> <meta itemprop="url" content="https://juejin.cn/user/831674360017678"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸æ¸…æ¥šçš„ .gitignore
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/831674360017678/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Carry345
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-12T06:45:09.000Z" title="Mon Jan 12 2026 06:45:09 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#2b2b2b;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(159,219,252,.15) 3%,transparent 0),linear-gradient(1turn,rgba(159,219,252,.15) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin-top:35px;margin-bottom:10px;color:#4dd0e1}.markdown-body h1{font-size:30px;text-align:center;position:relative;width:max-content;margin:0 auto}.markdown-body h1:before{position:absolute;content:"";z-index:-1;top:-20px;height:100%;width:100px;left:0;right:0;margin:0 auto;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADsAAAA6CAYAAAAOeSEWAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAABkLSURBVGhDtZoHnJ1llcbP3Om9ZiYzmfSQhCQQIbRQVQKI9CYC68qKriJK0UXcZRcINqStIoiIqKCi1NACQihBWiCkkJ5MJlMyvd7p7d759v989/sy34yTbIj48Atz71ff855znvOc971xDrB/EtoGI7a9Z8Aq+wZML0mNj7dE95NZ1OKsj1dHo1GbnJpss9OTbWJyonvun4VP1Njuoagtb+m0it4By0iIt8LEeMvkr8XFWcfgkA1gYDLf47i2PzpsyU7UspKSLDoctagTZ7Vc08MzClMS7awJ2ZaflBB78CeET8TYla1dtrKt2w5KS7YCDGzEoz2RqKUmhGw6x2bhuXyOp2BoRXef1Q1E7Lj8TIsMD1sbxu1kcnYSAX1810RMTUmyMB7f2j1gC7NS7byinNiL/kH8Q8a+2NRh77b32El56VaPAe0YeGR2mh2bm+FdMRqP1rbZe+3dFsHT35qcb/Oz0rwzo7Gxs9feYPLS4kM2h8lawee5hPmlJXneFQeGAzJ2F564v7rFzi7Msu3d/Xgjzq5g8ArX8VCNN2vJ28daey0zZJabmGCLslP5HOf+Oygr3UzDGOf+JxrauXfQjslJt+dbuuyMgiwmk+sPAB/b2Lt2NdoMZnuY21qHIvbvUyZ4Z0ZQiXGrWjvsmPxsK4R0nmHA8ZCTQvxVQn5eRipklIBtcVbV1WtHYsjati47ZWKuTUpP9Z4yGk/xDBGe3v1mW4/dOrvYO7P/2G9jRSjf31FnXyaUXiB8r51WaJkM3kcfOSa2FR6qarIenooTLQHPLcC4mYThyw1tVpKWYlVERlZ8nC3Oz3Jzdn1nn5uvQ8OOHYvhR/CvsqffJbkCkZTvcYZ6Z0WTfTovw5Y1dtjXp+TbFPhgf7FfxpYxuMfr2uwo8rEtMmwXF+d6Z8wGmIR2PLyjo8cqOFffP2SLGexJEJCP9R29thkPXlpa4A5Y3w/jmuVNYYwO2QkY7WMtz3mVcE1hkualJdmSolzX8GnpKd4VZq80d1o7zN0RdWxGaqItgbn3B/+vsasgh/UMNBOvzYMZDxtDKp289KGaVguFQvb1yQWWwuB97GaSXqUUnVaYbSUwrDCEBz/C2CM8EhNrP13fbkeSh3OJgCAe2N1CWXKsGOc6TOr5U4q8MwYhDtkTda02MyPN+nnGBQEH7A37NHYz5KOZVv08qyjbSseEzKauPnsMj98wc6Ibcj5UUv7M8QWZTE52jEwGOVaD8U1Dw1YNWX0qM8VKyb80L/TrOPYOzH4KBJQTrK8M7+7KZjuM63sHBt17FubGoibCuf+tarWFGUmuwWeT8/vCXo1tZOYeZcazCaez8MwEzzM+HqhqtiJI5twxL1jeGLYk7jmKMF1JOCbg6Qj5nAdRqX7q3BYm8VAmQvW1lfcMc58IT95uIA3q+gftrDHPXUXJWkVEHJme5Bp5UmHsvIZ/O3l8ECE/FWcsItX2hr0ae8O2Wjs+J43QTbOZzGYQ/7Wtxq6eXjRK3r0By4YJ6Ty8EiYSJqcm2eGeV4Pox/ANENJR49RiEdfqcLflUJrEBZqgxYHrBjn2ExFURqKdVETN9YirJxKxR2rbrYeQv5ISmB6IsiDGNfZGWPeMgkzr58xnPaJ5p6XDZPKz4T77wayJ7jGhhXLwanOHTWBgq5n5q6YUwNJ7l3kKcRl7OJ7fF56l1GzvHbSD8dghTPi0wIRfv6XafjJ3ssv0PnZQ7nZx/etwzO1zJ3lHR2OETTw8x0tOx1AN3De0D7YV+63oGthjaJQ5Ur7eVVZjcdGInUyuaT73ZWg3efV8fZs7cc2E777Qi5eunVbghvPPymrt/krKGfcLd8ybYjdxrK6333Z09rjHZkNuLYzz0uIc+xWCZzz8nbHbe4dsY1e/XUOY+nimvtUaSazv4jXhaQasSbmYmpuenGwHZ8TKggSEQm08rMD7ahBOoExcMqXQegjnZ+CEvaEa1ZQUQkt39dj0zDS7krq+ARmpdws/nlNqD9WFbWN7l5u3wr9MyrcXKUsqWy3jTOaoML4DdaQ83YIoT4VYpEXvYQZLmbX5SLohBrgOj186Kc/iKTUPUhq+Rrm5ekOl3TWv1Mr6hqwbY0VOQXwEo+Moq4Z47q5qsU489G944LyJOW4LOLZOKtT/iI6+nGe/0dhuEd4ltj2NmiuCU4hnk5fHIi7+RK4uTEu0e+s7rAiRcw1CYy3OejvcYz+eXeI9MYY9nu3lYZl0KavJJ7Vjibzgjp319rUZE20j7CkJqFr5JQYgQ39f3eQaKpQk0afy8nl4uBzvjUUTRk7k3iebOm0pabDiyFn2XGu3dRME41CGVeBVqSiVnc6hIUpekp1VjHLDSOEcQlui5W/U8C7IKREjv1Gabw3wRwUTvpv7jybPtzHmIPZ49q6KRjuccqBQVCOtGvqXhrCFUUXJzOYSHt7Kw5Ix9H08dSje1o1JyL73IYXpEMmE5CRbw6wuykx2pR+Pd6/J4JpLiJKV6N9OnrcQNfQ0Zem6qQX2MmFXyWTE+DMO0kGx4e08DEjnXbsYuOq7niHB8jdY/wQ8Srm2XCZZUrOakF1CY5EKX0h93Tu/1J4kRdbDMT8MamgZK9xe3uDcvrPe++Y4f61rcZr7B53rN1c5N2ytcV5rCrvHt3T2Og19g+5nH7dvq3bqunr4NOwgK2MHA1jeEDuG7HNuLmtw7qpocl5t6nCPvdTQ7v4N4u3WTqeyu9cZHIo4f6lqdFoHh7wzMbzDeeGv3Hvzjlrnh2W1zofhHuftxpFn3VFe7zxS0+p0DlKVPbhhvBxhvwiFMgfP+mjHA08gEC4pybeLyK1iZldh8zC5VJQyUl8l59KZ0WJk2xaiYWxNrkXXJhA8r3PvZRur7ZZZRfadaRPsfiTmX9HGajC2tXd6V8dQTMhX0h8rNdJx9Ra8F8SbRNLzhPRnJmTZIUTYueTyWxyr7uv3rjC3OkzE8495oS+4xq6D5WoI0bO5WVCOSerl8rIeBrOI/Hkaw6ME5W1zSuzx2la3CRdWi3zIG+FDBvUp9LMgI/vggUmE7KkT81yGvOOgEYa/aUahhRAF5xLec3OzbF1r2O17BbVxIi7hzJIC64IYhXdJA+nh/5xVbOmE9J0QqjSxWk0pp37M2YEtgjS8GpimACu7xkqxdKJ6fEXyYl2Lre0ZtC8yELVewtWUnbfCPIhrvgDFz8WI5yhJKgcnFMZWEFrwhgzo5uWDDDA1oGSOzcu0xfx7vTlsv6posIMpJ6cGWPiw/BxL4PU7vbrpjgf8bMdu5OYwOdhm83DARUSa0ELknYIeEAaILuWxlhGa0M8+EuJCrpJT+ymENhN60pXBxa3LZ5TsucnlGaCmIEQ4Evru91yuz0xMtKaeXluI5zdh9Mm8vAlBn4aR07X64EH3vEKdXQkZJXPP/JxMvNRpLxEtHZ5RQgmNewnpouvVTpYTHdfOnmy5kFUGnpRTfEhXD9DiBdFFJB0/YWS9aj6pmc89r0BaQmgTRkgI+EsdKsYasJZOBF+QqTH474NK7LbyBvf7W+RgOxNyxfQY2/2hrp2+NkroxrzrQ55fSZkpJIa28znCgF6rb7H1hOSslATyvNflAh9pvHcX3lVE/Ya8FjTJIexa2Rq77nfU96unTnD7aME3+TAm6BFKYrPnqCNIqV5sq0ZGCiEV+Db+qWMQqpFgb5KPx48R6omeDl2EuP9DTYt9iGA/f1KBS1w/La+H4ktsSmLItvZHXLUkrCeflVtJ9DVVg1H7+sxiGvVM975rZpfabuqHVhuP5F1vewav5O8GamUe91yDanoYw47FWzC929O+DJnKA2opFY1Rjru5CE7kOcO0jJtQVUIynzuZEMeb+1CEOFXN8iFSGeRpCm1BTlJxVg49Azm819SO7Bu0axEbwn27GuxMck+TMQHDP8fn48gfDVIL4R8xKVPJ73MQBUIfA/Z54LMw5vmlE+w+VFo2A78X/SsyPA/RMD0z3e2qVLtfo7aeBslpMX0N0TEnLcUlKym1jyBFqSohmYntI5enBhYB9CY/2kNarhwJhNiMtRGyWnkQdKaCFyQwgydjyNUw4VchKxXv2/DoKdC+lkQbCX1NlKCGvJiBJkSGbCus6jfo4yGBNySgr+u7e20BCsxdVAcFlJ/tHd32+cIsNxSXUULUUx+dg/d47g7OPYFw2MxkSuyMwLHVTI6PBN6dS8Sppw45zHJSgDXV3aQzmz40Z6fDgBfiAXU0uZxby2zejee+j3eltoQMzhV6qSBogXwrEXDj7ElWxUQ8RrnSaoU0dxIsKaiMvMykXTu90NqJsGHP4z78SdLigUrLKat32nFwy/E07pfDFRdQ/7N5r57pQ1482uvWhMGhQcviGkVrKDUp0ToCxfhQal5n4Hs/g1jOgH4LWdwFOd1b1WzHET4vLZppv+Czjxo840OrDlG8jAJzv2tp5mLK1dsU/lfIOeWy5NxFxfl2BoYImlQtx9QF6mJRQKBsQYYuO2yaLYPBUXvu/VqYPxtHhNy7Y4hCkNLGPtKSklzCVKSHtMQxcqm5Kw1DhI2PTGZtcGDAvoLQ/u7MifYtWFBlxz2H9zo8RkwKzC5UYiG+p44ccqE62YAxLeT/TOpf8MXx8Qk0IJFRY1Go+viQVJpE5Ehjf49xfAZeqGIy/7us3nqxwQfCkjZypPxobVr/6YpQHIalUvuCyEwbSXC9PC8QnkFcXlrgLpoLIhIfKuaqlQkYIAwQnr/f3eyu7KttOw2lNpv8/BPHyjzVNER3o72gvEBKqRMTflndbP8BMweRDyeciEj5bFayFXqTLzheivgYJC0jwzwHa0MDDEotm48ndze5BBBElAnxxcRYHAFh3FfZaA9UNRmC354kNwUx8eHkmVj5dcTE5ZMnuEyr1QqlhtaJLuOYZv4v3KNo0TKrGPUZ1NILPKuWcvVn5Trv10SMB6h0j/ARMnlOuafCBIfnSWEx/Raif3HDzofYMM31dOyY9LBaLK3TjoX2fEqT4+2qaUVWSTQvyM6wC8nNJyEetXIyuLKrx04P7MKNnbJZlKUtNAIHo7i2dA/YU3Vtdi5l6jCepXy8hOedSSSsI8/HQg5Q+gxTKXwkMHkbESo+hjG0lbRRzQ3Fc5LOzDuFhs3Ptumpie7ilRDhlEJOq/hjsZljCxjkt7fWuPS/EekpXMggJQIk0G+eN9Xu2VmHWIkJe0nJRN4ptBBit2yutG9ML7J1DHAxebiAMrZ4VZlduqGS8I2tJc2iborUxmIN79c+kTovFxivPvrcSaP3n7RSKYTUmKt4N3rMOcw4JOneD3sP956jNaMglIeTER5Xbdlt15Tm2W10NEsYrA/N5JLCHHsR9tSqwxq08G3bqm1ZTbOtagnbo6SLvH/VzBL7W7jPzqFea0LmMLFzUuLtdwumuO3i1Vtq7OK15Xgw3l1PDmIXak+6QBEkvB9YJIzBcc/L20JIYaSZ/qAzVm5Ut4oowk3QehC+N3xo/1wTqt7zsYawfX9no9XjqdPXVLhrwyo/wucJYQkE1e4j8rLcBuHUItQQKqgMXb6LGvxFQlXw33AdZLR0V5P9Fr29lP73scNnosoyvdWPv4fPJ+uJrLVtMakqaL1M1cTvv0OLIZE6wk2a2IcIRUQh+DaejpdcXepBa7bKDRGM9PIVxTl2EwarZ72rooVuY4RQtMypdk6e1lLLehhY2lt7QEd7WxlCDvdIli6E9B4+ZIodmZEMccUGqgiZOqru9tkR3iJ8nCcXRWRZCSPMLPEjlx2LjQL1OM5qKAm+vhSuRqSfV5Ttrg8FdWcrnhMqCTex7DEM6qTsVEuM1+8hovaHQ6e6a1Fz0xLd3nUt4ToWWuzWNkhcoAIIjUx2ZpxjLzWF9+SYmngR1lok4TEoJxGfuijhI/7OICoFmadl2llcL9b1oRVJtbD+JLlv1KrhHG5811t9ELbzgk14ICUwqE+TDzftqHPz98vUSy3jSIwP8dCpkNqLDPTx+rArz4T5qLG3G2PrvJKKPoLBWE501NC3ilUX5mVjVIb9nIbgWcpPMiSXjbcL8K62UkR86m1/yfkSeMaHFuK04X0CE3J6SWzFUxw0BSNHlSzi3RmIRJwHq5udO3c16quLp6sbnffbupxbt+12vzOrzuvNHc7ycRbIxuJHgYU7YSASdQgxp7qz2ynv6HJeqW91doa7nLruXof+17sqhhu31Xif9o7HalqczV29Dnrb/f5EXZvzdH27U98/6LR5i3N0UM5zjHU71/lwjRWWltU5CAIn7F1MqLp/r9hQ5RoaxG+qmrxP4yNKcfsFLwuiprffeb2l03m2scO5h3Or2rudzjGrhk8x4Cqu2xcexilBvNEcdi5Yu4tKF3Ue4tzPy+td5/1md4tzw5iJ27NuXEYobYUdlb8z6GTWkdxaCvk2zHjd5mpKQ459mv5TkAp6mQb9Aq9HHQ8S6mrZnuc6vUG6WHusIhCJGNXl9byvnJyaiE7+Eoz8c5TYNQiUveENGpJpcIJ+biS8R0+rlcazGNs7pKB+zPLTOSX2KNWhlDAf4r2Spj72JORB5OyHULX+dlD/FOky/HFy5ygYU0sey/i8moeqdunXK1qC3RuaMOYHlI/raQMl3M+EeTV5WxD3Km8a8PkM8nr648sQ9+esKbf5e/nxiKBfAOQkxbv3SU9LYmqPV9V/Pn+V20VwTyVjTqCI6edEQUOFUXs9WmfSll8DyX2dt7GlnwkswaM3l9XZ0oNK3MTXbxpOV2sGk69s6XCJw4cY8KbyRrt9TrHt7Bm0rRBQe1+fHUWNfaapU0KbqxzbORC1M/LS3dJwIl3KOrwykQG/E+61q+isgniztdOKqNOziDgZqZIzFwPvqGiyg5NCtoCqoG5NxHhPZTOsnORulKskjoKMDeLuXQ3OmnC3syxARFXdfc57LR3OrdtrvSOOs55rnqhtcdoGhpxHdjc5EfJUuHZTlftX+G15rXPlhkrnLe59F7Lz8VGHdg8c5y2OLeMZ126qduq9XC3v7nd+FchLvYPJd15gPCu8XQnh/qpm59WGVudZzvvQO97kXTcGxhnEuJvR39tWY8cwK4uhcikk4a3Gdstg9l5B2t0wfaTdWkEou5vCPOV5PH73vFL3+DfXltnh6OxjkJD6Wd5F3g88tMe6CW/7YmI99VIL4u0oqUK8ocW4d8hFrXMVoOQU8s3U97MnjvDD/XRYkyhHM1MT3GVZQR2Tdv70U8EbA5vlo+CaPAaaSWoZXm50otGodxQ6L6txGKxzw5ZYORrBsPPrykZKQIy1n8bTjwb2fO4Te3ue7x6KOKvaYns1wtIddd4nx3mwot55qyl2360cp81zurg+CGqwU8v4/Of5uAVvPgObrwvHomY8jOtZ4fXWLnefdHVXv9044+8ZklCx75DXwcV1Sb27y+vInUQEuVYSaMgRJYfAwtoj0raFxIUW1A8nz35f02qLc9Lc9lG7CBkwtUR7bf+A+5uL6ehnH9Lat+5sIEfj3Cbj3NKRvP7Rjlo7FSmqavKvpSP8MRZ7NVbQYLSkqlC9ZW4sPH18gBTcORjrhMWmQWzFmK2UsvO90qQ1oZcI8UhkCLZPtRqMy0NirobAvjIpb4/sW06qKGyPR2oGIdlazjOOTk+kLYzaaYGSp63Wz6HsXsQ51wd+LTAuZOy+8GBNq7tF+IOdDU4kENJthNID5YRafZtzZ3mDs9LbRgzixcZ2l1h83OKFbDmEd0/FiFp7DWHgp0AQGzq6nf8hPF+oa3EehOz0ziCWcm4NpBRMhX1hn571oR9wqVVSDVPtUi32sQ0vbu7scZdY9aOt2ZSEL9BEBIW+dv20AKDd9/ep09oimYqHpyImkKDuRllS4PrlHNuIqDmCJmNJQba7q1joEaUQJuR/WdXsLrJrq/L6cdJsPOyXscJ7GLKqo8cOpqhrO//yQG6oS3kZwS9xPkRB3wi7diFMtDN+PLk5m1ath+8f0Fy80dbjhvVXub+U5mEqeal27UP+dWpPlknNxW79Ak6/7Tg3UMOF52j1xA1qK7Trd6nXC+8P9ttYQcumIonLSnJtBdJNa77axw1C2x3qR4Wqnj73x9f6MbV+CCYFBZO6y51aSh3gzVrsmwzJnULEbCJC1oZ7vIZ/9Iqmfvn2u5oWO5n8fApxcuWUApum5diPgY9lrA9EtvUNOzYf8vqAcJPsU5iOh7XtXQgt2uZhjKU2amF7HQyfEYWcZk5yQ1RDKNrLcq02k/9IGmldrB93KiokPw8EB2SsoKWXO5FmxXhlckqi+3vEUvLqwok5PHVkIWAszlqzy1p54zuLpnPZ3q9bod08JlLSb5DrNxDm38Sbvsg5EBywsT7oH+3XNW3uasGirFSrxRNdCllKiPZHZzJYLZb5qEcpae3pxMCuu9oibS5/QCOiLcYUrp+MmtJeURjFdVlxzqiae6D4h40NQt54HyGv3JRo10aVfv8YhtC0pSlVKcPFuxIXahr08mzCO4VzMlLSsZuomZ+RaucU0rXsw/sfF5+osUFonWob/7TrLdaUgdpV93fl9X+VIC0Y6tek2uI8OD3J5gT2Vj9ZmP0f4IM4iY7RQ5gAAAAASUVORK5CYII=) no-repeat 50%;background-size:64px 64px;opacity:.84}.markdown-body h1:after{position:absolute;content:"";width:150%;left:-25%;height:50%;bottom:12px;border-radius:50%;background:linear-gradient(transparent 80%,rgba(77,208,225,.8));background-size:400% 200%;opacity:.6;animation:h1Animate 6s linear infinite}@keyframes h1Animate{0%{background-position:100% 100%}50%{background-position:100% 50%}to{background-position:100% 100%}}.markdown-body h2{display:block;border-bottom:4px solid #4dd0e1;position:relative;font-size:24px;padding:12px 32px;margin:30px 0}.markdown-body h2:before{width:24px;height:24px;left:0;top:0;margin:auto;background-size:24px 24px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADGklEQVRYR81X32vTYBQ999s6mFjQgQ+DrbHiVFZYU4cDcQ/6pGhTFVYFEXGi82H+Bz448UnEF1Fx9ccEEcXpZE3d5tP2ooKiTacTHaLNpigMHDgnU9tcSbrWrkwWR0sbyEOSe885ObnfvV8IRT6oyPwoLQHBx+OVM5WJvSyEVAhnBOjt7yU/+/rr6r6l8TMO+F/EN0JQhICqQpD/xaRpcpAc9tS+M+9lBCia/oqBamK+zeDuQogQZaKJk3wcQjxSva7tGQGB2Ke1zIk3DNyMyNL+QpCnMQOaPsDAVuGAp9cjvbYc8Ec/bCYSg0zoiHilk1tHxqsqEsYlML4kjIpT/eurJxRNPweQU5VdrWaOEo1fgKAVbBgXIz73kF3R/ph+ghgdzMYWM29eAWlBJqgZaFlFYtC6nhWpaDqnSGlIlV1WjJ3DloDNgyNLncudqgX//Ucg3LxuStHGuhi8pqKCW3rqV342rwFjRznKm+/LNaN2yC237ThgF2wxcfMLeP6+ncrKzoPoKTGeLQbYbg4TNoC5iZPJY5HGVRdSNZAWYBclD3FzBQzrR8hACAKdzBzKA/4/IYioDQaOskBbpEG6PO8qKKSAEi3CnEb0Pw4oMf0OmKbTDWqh3Lw6EIiNBZi5lxh3wz4puBD5ovqAMvxhHSdFKxE1CQe3m/07TeTX4lcJdAhE+1Sv65Z5P/ByvIGTRowIZ9igbtXnmrOsbTvgj+kHBNMuBu9OdVw8EeU4nC1A0cYmAHZOTRrLhra4Z8ywnSN6vZHAFTA2WnnMfQB3qz73ddsOZM8CACFDIPSgQXqebXEgqgeZcAeEe6pXasm1f8ew3igMtAHWac0Uc/jYdyAaP0xEBwFsmgUPqbJ0NE2UKj4EGcahiOzuyhagaHpnmtgcVgTcCMuua7YdyAHbA3ArQNscVFbb4635aD6fnYaTvxxi9UNP7ddMXaRWVBdAcaLk6bDXPZCNZ9uBXEsDUX1T2Cc9yjig6Z0EHg3LK8/aqf6MwJKchkXfks1+0+JtSq3qLPa23BRR1B+T/6nkfMaW1r9hPt/MLtYfTLEpP+T9FNoAAAAASUVORK5CYII=)}.markdown-body h2:after,.markdown-body h2:before{content:"";display:block;position:absolute;bottom:0}.markdown-body h2:after{right:0;width:400px;height:10px;border-top-right-radius:24px;background:linear-gradient(90deg,#fff,#4dd0e1);max-width:50vw}.markdown-body h3{margin:30px 0;font-size:18px;position:relative;padding:4px 32px;width:max-content}.markdown-body h3:before{border-bottom:2px solid #4dd0e1;width:100%;content:"";display:block;height:28px;position:absolute;left:0;top:0;bottom:-2px;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);background-repeat:no-repeat;animation:h3AnimationBefore 2s infinite alternate}@keyframes h3AnimationBefore{0%{width:28px}25%{width:100%}50%{width:100%}to{width:100%}}.markdown-body h3:after{content:"";display:block;width:28px;height:28px;position:absolute;border:2px solid #4dd0e1;border-radius:50%;right:-15px;top:0;bottom:0;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);animation:h3AnimationAfter 2s infinite alternate}@keyframes h3AnimationAfter{0%{transform:rotate(0)}10%{transform:rotate(0)}50%{transform:rotate(-1turn)}to{transform:rotate(-1turn)}}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin:22px 0;letter-spacing:2px;font-size:14px;word-spacing:2px}.markdown-body img{max-width:80%;border-radius:6px;display:block;margin:20px auto!important;object-fit:contain;box-shadow:0 0 16px hsla(0,0%,43.1%,.45)}.markdown-body figcaption{display:block;font-size:13px;color:#2b2b2b}.markdown-body figcaption:before{content:"";background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAGFBMVEVHcExAuPtAuPpAuPtAuPpAuPtAvPxAuPokzOX5AAAAB3RSTlMAkDLqNegkoiUM7wAAAGBJREFUKM9jYBhcgMkBTUDVBE1BeDGqEtXychNUBeXlKEqACsrLQxB8lnCQQClCiWt5OYoSiAIkJVAF5eVBqAqAShTAAs7l5ShKWMwRAmAlSArASpAVgJUkCqIAscESHwCVVjMBK9JnbQAAAABJRU5ErkJggg==);display:inline-block;width:18px;height:18px;background-size:18px;background-repeat:no-repeat;background-position:50%;margin-right:5px;margin-bottom:-5px}.markdown-body hr{border:none;border-top:1px solid #4dd0e1;margin-top:32px;margin-bottom:32px}.markdown-body del{color:#4dd0e1}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(77,208,225,.08);color:#26c6da;padding:.195em .4em}.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#4dd0e1;border-bottom:1px solid #4dd0e1;font-weight:400;text-decoration:none;margin:0 4px}.markdown-body a:active,.markdown-body a:hover{background-color:rgba(77,208,225,.1)}.markdown-body strong{color:#26c6da}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{font-style:normal;color:#4dd0e1;font-weight:700}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(77,208,225,.05)}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{margin:2em 0;padding:24px 32px;border-left:4px solid #26c6da;background:rgba(77,208,225,.15);position:relative}.markdown-body blockquote:before{content:"â";top:8px;left:8px;color:#4dd0e1;font-size:30px;line-height:1;font-weight:700;position:absolute;opacity:.7}.markdown-body blockquote:after{content:"â";font-size:30px;position:absolute;right:8px;bottom:0;color:#4dd0e1;opacity:.7}.markdown-body blockquote p{color:#595959;line-height:2}.markdown-body ol,.markdown-body ul{color:#595959;padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong>èµ·å› :</strong></p>
<p>åœ¨é¡¹ç›® .gitignore çœ‹è§äº†éƒ¨åˆ†é…ç½®å¦‚ä¸‹:</p>
<pre><code class="hljs language-bash" lang="bash">node_modules
/dist
.<span class="hljs-built_in">history</span>

/.history/src/views/incomeData/incomePool/list_20230209102341.vue
/.history/src/views/incomeData/incomePool/list_20230209102421.vue
/.history/src/views/incomeData/incomePool/list_20230209102435.vue

.vscode
.vscode/
</code></pre>
<p>ä½ æ˜¯å¦ä¹Ÿè§‰å¾—è¿™ä¸ªå¿½ç•¥æ–‡ä»¶æ€ªæ€ªçš„,ä½†çŸ¥è¯†å®ƒåœ¨è„‘å­é‡Œåˆä¸é‚£ä¹ˆæ¸…æ¥š ğŸ«£</p>
<ol>
<li><code>node_modules</code>ä¸€èˆ¬é…ç½®æ˜¯ <code>node_modules/</code>,ä»–ä»¬æœ‰ä»€ä¹ˆåŒºåˆ«?</li>
<li><code>/dist</code>å‰é¢åŠ ä¸åŠ <code>/</code>æœ‰åŒºåˆ«å—?</li>
<li>é…ç½®è¿‡äº† <code>.history</code>,åé¢ä¸‰æ¡è¿˜æœ‰å¿…è¦? éš¾é“ <code>.history</code>é…ç½®åå†…éƒ¨æ–‡ä»¶ä¸å¿½ç•¥??</li>
<li><code>.vscode</code>å’Œ<code>.vscode/</code>ä¸é‡å¤?</li>
</ol>
<p>ä¸‹é¢é€ä¸ªåˆ†æ</p>
<h2 data-id="heading-0">1. <code>node_modules</code>ä¸€èˆ¬é…ç½®æ˜¯ <code>node_modules/</code>,ä»–ä»¬æœ‰ä»€ä¹ˆåŒºåˆ«?</h2>
<p><code>node_modules</code>:å¿½ç•¥ä»»æ„å±‚çº§è·¯å¾„ä¸­ï¼Œåä¸º <code>node_modules</code> çš„è·¯å¾„é¡¹</p>
<ul>
<li>å¦‚æœè¯¥è·¯å¾„é¡¹æ˜¯ <strong>æ–‡ä»¶</strong><br/>
ğŸ‘‰ å¿½ç•¥è¯¥æ–‡ä»¶</li>
<li>å¦‚æœè¯¥è·¯å¾„é¡¹æ˜¯ <strong>ç›®å½•</strong><br/>
ğŸ‘‰ å¿½ç•¥è¯¥ç›®å½• <strong>åŠå…¶å…¨éƒ¨å­å†…å®¹</strong></li>
</ul>
<p><code>node_modules/</code>: å¿½ç•¥ä»»æ„å±‚çº§è·¯å¾„ä¸­,åä¸º<code>node_modules</code>çš„ç›®å½•(åŠå…¶å…¨éƒ¨å­å†…å®¹)</p>
<p>è™½ç„¶å®ƒä»¬éƒ½èƒ½å®ç°å¿½ç•¥ <code>node_modules</code>ç›®å½•</p>
<p>ä½†<code>node_modules</code>è§„åˆ™æœ¬èº«è¯­ä¹‰ä¸æ˜ç¡®,ä»è§„åˆ™æœ¬èº«æ— æ³•ä¸€çœ¼åˆ¤æ–­</p>
<ul>
<li>è¦å¿½ç•¥æ–‡ä»¶?</li>
<li>è¿˜æ˜¯å¿½ç•¥ç›®å½•?</li>
</ul>
<p><code>node_modules/</code>ä¸€çœ¼å°±çŸ¥é“è¦å¿½ç•¥è¿™ä¸ªç›®å½•,æ‰€ä»¥åœ¨å¿½ç•¥ç›®å½•çš„æ—¶å€™æ›´æ¨èè¿™ç§å†™æ³•</p>
<h2 data-id="heading-1">2. <code>/dist</code>å‰é¢åŠ ä¸åŠ <code>/</code>æœ‰åŒºåˆ«å—?</h2>
<p>æœ‰åŒºåˆ«</p>
<p><code>dist</code>:å¿½ç•¥<strong>ä»»æ„å±‚çº§</strong>è·¯å¾„ä¸­ï¼Œåä¸º <code>dist</code> çš„è·¯å¾„é¡¹</p>
<p><code>/dist</code>:å¿½ç•¥<strong>æ ¹ç›®å½•</strong>ä¸‹åä¸º<code>dist</code>çš„è·¯å¾„é¡¹</p>
<h2 data-id="heading-2">3. é…ç½®è¿‡äº† <code>.history</code>,åé¢ä¸‰æ¡è¿˜æœ‰å¿…è¦? éš¾é“ <code>.history</code>é…ç½®åå†…éƒ¨æ–‡ä»¶ä¸å¿½ç•¥?</h2>
<p>ç°åœ¨æˆ‘ä»¬å·²ç»çŸ¥é“ <code>.history</code>çš„å«ä¹‰(å¿½ç•¥ä»»æ„å±‚çº§è·¯å¾„ä¸­ï¼Œåä¸º <code>.history</code> çš„è·¯å¾„é¡¹),</p>
<pre><code class="hljs language-bash" lang="bash">/.history/src/views/incomeData/incomePool/list_20230209102341.vue
/.history/src/views/incomeData/incomePool/list_20230209102421.vue
/.history/src/views/incomeData/incomePool/list_20230209102435.vue
</code></pre>
<p>å¾ˆæ˜æ˜¾è¿™ä¸‰ä¸ªæ–‡ä»¶éƒ½æ˜¯ç›®å½• <code>.history</code>ä¸‹çš„å†…å®¹,é…ç½®<code>.history</code>å·²ç»åŒ…å«,å®Œå…¨å¯ä»¥åˆ æ‰è¿™ä¸‰æ¡.</p>
<p><code>.history</code>æ˜¯å¸¸è§vscode æ’ä»¶ç”Ÿæˆçš„ç›®å½•,æ•…æ¨èå†™æ³•<code>.history/</code>.</p>
<h2 data-id="heading-3">4. <code>.vscode</code>å’Œ<code>.vscode/</code>ä¸é‡å¤?</h2>
<p>é‡å¤</p>
<p>æƒ³å¿…åˆ°è¿™é‡Œå·²ç»éå¸¸æ˜ç¡®çš„çŸ¥é“ä»–ä»¬çš„åŒºåˆ«äº†(ä¸æ˜ç™½çœ‹ç¬¬ä¸€ä¸ªé—®é¢˜),<code>.vscode</code>æ˜¯å¸¸è§ IDE é…ç½®ç›®å½•,æ‰€ä»¥æ¨è<code>.vscode/</code></p>
<h2 data-id="heading-4">æˆæœå±•ç¤º</h2>
<p>ç°åœ¨è¦ä¿®æ”¹æ–‡ç« å¼€å¤´çš„ <code>.gitignore</code>,æ˜“å¦‚åæŒ</p>
<pre><code class="hljs language-bash" lang="bash">node_modules/
dist/
.<span class="hljs-built_in">history</span>/
.vscode/
</code></pre>
<p>è‡³äºå‰é¢è¦ä¸è¦åŠ <code>/</code>è‡ªè¡Œåˆ¤æ–­éœ€è¦å¿½ç•¥<strong>ä»»æ„å±‚çº§è·¯å¾„ä¸­çš„ç›®å½•</strong>è¿˜æ˜¯ä»…<strong>æ ¹ç›®å½•</strong></p>
<h2 data-id="heading-5">æ‰©å±•</h2>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1ï¸âƒ£ * é€šé…ç¬¦: åŒ¹é…ä»»æ„å­—ç¬¦(ä¸å«/)</span>
<span class="hljs-comment"># å¿½ç•¥æ‰€æœ‰ .log ç»“å°¾çš„è·¯å¾„é¡¹</span>
*.<span class="hljs-built_in">log</span> 


<span class="hljs-comment"># 2ï¸âƒ£ !åå‘å¿½ç•¥</span>
<span class="hljs-comment"># 2.1 å¿½ç•¥ .vscode ç›®å½•ä¸‹æ‰€æœ‰å†…å®¹,ä½†ä¿ç•™é¡¹ç›®çº§ VS Code é…ç½®</span>
.vscode/*
!.vscode/settings.json
<span class="hljs-comment"># 2.2 å¿½ç•¥æ‰€æœ‰ .envï¼Œä½†ä¿ç•™ç¤ºä¾‹æ–‡ä»¶</span>
.<span class="hljs-built_in">env</span>
!.env.example
</code></pre>
<h3 data-id="heading-6">ä¸ºä»€ä¹ˆåå‘å¿½ç•¥ä¾‹å­2.1ç”¨çš„æ˜¯<code>.vscode/*</code>è€Œä¸æ˜¯<code>.vscode/</code></h3>
<p>ç”¨ä¸€ä¸ªä¾‹å­è§£é‡Š,ç›®å½•ç»“æ„ï¼š</p>
<pre><code class="hljs">.vscode/
  settings.json
  launch.json
</code></pre>
<h4 data-id="heading-7">1ï¸âƒ£ ä½¿ç”¨ <code>.vscode/</code></h4>
<p><strong>å«ä¹‰:</strong></p>
<p>å¿½ç•¥åä¸º .vscode çš„ç›®å½•</p>
<p>ä¸€æ—¦è¯¥ç›®å½•è¢«å¿½ç•¥ï¼Œå…¶å†…éƒ¨æ‰€æœ‰æ–‡ä»¶éƒ½ä¼šè¢«éšå¼å¿½ç•¥</p>
<p><strong>ç»“æœï¼š</strong></p>
<pre><code class="hljs">.vscode/            âŒ
  settings.json     âŒ
  launch.json       âŒ
</code></pre>
<p>git å·²ç»å¿½ç•¥ <code>.vscode</code> ç›®å½•,ä¸ä¼šå†è¿›å…¥è¯¥ç›®å½•,æ— è®ºå†™å¤šå°‘ä¸ªåå‘å¿½ç•¥,éƒ½æ²¡ç”¨</p>
<h4 data-id="heading-8">2ï¸âƒ£ ä½¿ç”¨ <code>.vscode/*</code></h4>
<p><strong>å«ä¹‰:</strong></p>
<p>å¿½ç•¥ <code>.vscode</code> ç›®å½•ä¸‹çš„ <strong>æ‰€æœ‰ç›´æ¥å­è·¯å¾„</strong><br/>
ä½† <code>.vscode</code> ç›®å½•æœ¬èº« <strong>ä»ç„¶æ˜¯â€œå¯è§çš„â€</strong></p>
<p><strong>ç»“æœï¼š</strong></p>
<pre><code class="hljs">.vscode/            âœ…
  settings.json     âŒï¼ˆé™¤éåå‘å¿½ç•¥ï¼‰
  launch.json       âŒ
</code></pre>
<p>åœ¨æ­¤åŸºç¡€ä¸Šæ·»åŠ åå‘å¿½ç•¥,<code>git</code>æ‰èƒ½è¯†åˆ«.</p>
<p>æœ‰è¶£ ğŸŒ¾</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[MATLABçŸ©é˜µè¿ç®—å®Œï¼ŒåŠ å‡ä¹˜é™¤/ç‚¹è¿ç®—/è½¬ç½®/é€†çŸ©é˜µ/è¡Œåˆ—å¼]]></title>    <link>https://juejin.cn/post/7594051966889476131</link>    <guid>https://juejin.cn/post/7594051966889476131</guid>    <pubDate>2026-01-12T08:21:11.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594051966889476131" data-draft-id="7593736655612051456" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="MATLABçŸ©é˜µè¿ç®—å®Œï¼ŒåŠ å‡ä¹˜é™¤/ç‚¹è¿ç®—/è½¬ç½®/é€†çŸ©é˜µ/è¡Œåˆ—å¼"/> <meta itemprop="keywords" content="MATLAB"/> <meta itemprop="datePublished" content="2026-01-12T08:21:11.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸‰ç»´ç©ºé—´"/> <meta itemprop="url" content="https://juejin.cn/user/3731069876053802"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            MATLABçŸ©é˜µè¿ç®—å®Œï¼ŒåŠ å‡ä¹˜é™¤/ç‚¹è¿ç®—/è½¬ç½®/é€†çŸ©é˜µ/è¡Œåˆ—å¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3731069876053802/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸‰ç»´ç©ºé—´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-12T08:21:11.000Z" title="Mon Jan 12 2026 08:21:11 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€MATLABçŸ©é˜µåŸºç¡€</h2>
<p>åœ¨MATLABä¸­ï¼ŒçŸ©é˜µæ˜¯æ ¸å¿ƒæ•°æ®ç»“æ„ï¼Œæ‰€æœ‰æ•°å€¼è¿ç®—å‡å›´ç»•çŸ©é˜µå±•å¼€ã€‚åˆ›å»ºçŸ©é˜µçš„åŸºç¡€è¯­æ³•ä¸ºï¼šç”¨ä¸­æ‹¬å·<code>[]</code>åŒ…è£¹å…ƒç´ ï¼Œè¡Œå†…å…ƒç´ ç”¨ç©ºæ ¼/é€—å·åˆ†éš”ï¼Œè¡Œä¸è¡Œä¹‹é—´ç”¨åˆ†å·<code>;</code>åˆ†éš”ã€‚</p>
<pre><code class="hljs language-matlab" lang="matlab"><span class="hljs-comment">% åˆ›å»º2Ã—3çŸ©é˜µ</span>
A = [<span class="hljs-number">1</span> <span class="hljs-number">2</span> <span class="hljs-number">3</span>; <span class="hljs-number">4</span> <span class="hljs-number">5</span> <span class="hljs-number">6</span>];
<span class="hljs-comment">% åˆ›å»º3Ã—3å•ä½çŸ©é˜µ</span>
B = <span class="hljs-built_in">eye</span>(<span class="hljs-number">3</span>);
<span class="hljs-comment">% åˆ›å»º3Ã—3å…¨1çŸ©é˜µ</span>
C = <span class="hljs-built_in">ones</span>(<span class="hljs-number">3</span>);
<span class="hljs-comment">% åˆ›å»ºéšæœºçŸ©é˜µï¼ˆå…ƒç´ 0-1ä¹‹é—´ï¼‰</span>
D = <span class="hljs-built_in">rand</span>(<span class="hljs-number">2</span>,<span class="hljs-number">2</span>);
</code></pre>
<h2 data-id="heading-1">äºŒã€çŸ©é˜µåŸºæœ¬è¿ç®—ï¼ˆåŠ å‡ä¹˜é™¤ï¼‰</h2>
<h3 data-id="heading-2">1. çŸ©é˜µåŠ å‡æ³•</h3>
<p><strong>è¿ç®—è§„åˆ™</strong>ï¼šä»…åŒç»´åº¦çŸ©é˜µå¯è¿›è¡ŒåŠ å‡è¿ç®—ï¼Œå¯¹åº”ä½ç½®å…ƒç´ ç›¸åŠ å‡ã€‚</p>
<pre><code class="hljs language-matlab" lang="matlab"><span class="hljs-comment">% å®šä¹‰ä¸¤ä¸ªåŒç»´åº¦çŸ©é˜µ</span>
A = [<span class="hljs-number">1</span> <span class="hljs-number">2</span>; <span class="hljs-number">3</span> <span class="hljs-number">4</span>];
B = [<span class="hljs-number">5</span> <span class="hljs-number">6</span>; <span class="hljs-number">7</span> <span class="hljs-number">8</span>];

<span class="hljs-comment">% çŸ©é˜µåŠ æ³•</span>
C = A + B; <span class="hljs-comment">% ç»“æœï¼š[6 8; 10 12]</span>
<span class="hljs-comment">% çŸ©é˜µå‡æ³•</span>
D = A - B; <span class="hljs-comment">% ç»“æœï¼š[-4 -4; -4 -4]</span>

<span class="hljs-comment">% æ ‡é‡ä¸çŸ©é˜µåŠ å‡ï¼ˆå¹¿æ’­æœºåˆ¶ï¼‰</span>
E = A + <span class="hljs-number">2</span>; <span class="hljs-comment">% æ‰€æœ‰å…ƒç´ åŠ 2ï¼Œç»“æœï¼š[3 4; 5 6]</span>
</code></pre>
<p><strong>æ³¨æ„</strong>ï¼šè‹¥çŸ©é˜µç»´åº¦ä¸åŒ¹é…ï¼ŒMATLABä¼šæŠ¥é”™<code>Matrix dimensions must agree</code>ï¼Œéœ€å…ˆç¡®è®¤çŸ©é˜µè¡Œåˆ—æ•°ä¸€è‡´ã€‚</p>
<h3 data-id="heading-3">2. çŸ©é˜µä¹˜æ³•ï¼ˆ*ï¼‰</h3>
<p><strong>è¿ç®—è§„åˆ™</strong>ï¼šå‰çŸ©é˜µåˆ—æ•°=åçŸ©é˜µè¡Œæ•°æ‰å¯ç›¸ä¹˜ï¼Œç»“æœçŸ©é˜µç»´åº¦ä¸ºâ€œå‰çŸ©é˜µè¡Œæ•°Ã—åçŸ©é˜µåˆ—æ•°â€ã€‚</p>
<pre><code class="hljs language-matlab" lang="matlab"><span class="hljs-comment">% å®šä¹‰ç¬¦åˆä¹˜æ³•è§„åˆ™çš„çŸ©é˜µ</span>
A = [<span class="hljs-number">1</span> <span class="hljs-number">2</span> <span class="hljs-number">3</span>; <span class="hljs-number">4</span> <span class="hljs-number">5</span> <span class="hljs-number">6</span>]; <span class="hljs-comment">% 2Ã—3çŸ©é˜µ</span>
B = [<span class="hljs-number">7</span> <span class="hljs-number">8</span>; <span class="hljs-number">9</span> <span class="hljs-number">10</span>; <span class="hljs-number">11</span> <span class="hljs-number">12</span>]; <span class="hljs-comment">% 3Ã—2çŸ©é˜µ</span>

<span class="hljs-comment">% çŸ©é˜µä¹˜æ³•</span>
C = A * B; <span class="hljs-comment">% ç»“æœï¼š[1Ã—7+2Ã—9+3Ã—11  1Ã—8+2Ã—10+3Ã—12; </span>
           <span class="hljs-comment">%        4Ã—7+5Ã—9+6Ã—11  4Ã—8+5Ã—10+6Ã—12]</span>
           <span class="hljs-comment">% æœ€ç»ˆï¼š[58 64; 139 154]</span>

<span class="hljs-comment">% æ ‡é‡ä¸çŸ©é˜µä¹˜æ³•</span>
D = A * <span class="hljs-number">2</span>; <span class="hljs-comment">% æ‰€æœ‰å…ƒç´ Ã—2ï¼Œç»“æœï¼š[2 4 6; 8 10 12]</span>
</code></pre>
<h3 data-id="heading-4">3. çŸ©é˜µé™¤æ³•ï¼ˆ\ å’Œ /ï¼‰</h3>
<p>MATLABä¸­çŸ©é˜µé™¤æ³•åˆ†å·¦é™¤ï¼ˆ\ï¼‰å’Œå³é™¤ï¼ˆ/ï¼‰ï¼Œæœ¬è´¨æ˜¯æ±‚è§£çº¿æ€§æ–¹ç¨‹ç»„ï¼š</p>
<ul>
<li><strong>å·¦é™¤ A\B</strong>ï¼šç­‰ä»·äºæ±‚è§£ <code>A*X=B</code> çš„è§£X</li>
<li><strong>å³é™¤ A/B</strong>ï¼šç­‰ä»·äºæ±‚è§£ <code>X*B=A</code> çš„è§£X</li>
</ul>
<pre><code class="hljs language-matlab" lang="matlab"><span class="hljs-comment">% å®šä¹‰å¯é€†çŸ©é˜µ</span>
A = [<span class="hljs-number">1</span> <span class="hljs-number">2</span>; <span class="hljs-number">3</span> <span class="hljs-number">4</span>];
B = [<span class="hljs-number">5</span>; <span class="hljs-number">6</span>];

<span class="hljs-comment">% å·¦é™¤ï¼šæ±‚è§£A*X=B</span>
X1 = A \ B; <span class="hljs-comment">% ç»“æœï¼š[-4; 4.5]</span>

<span class="hljs-comment">% å³é™¤ç¤ºä¾‹</span>
C = [<span class="hljs-number">7</span> <span class="hljs-number">8</span>; <span class="hljs-number">9</span> <span class="hljs-number">10</span>];
X2 = C / A; <span class="hljs-comment">% ç­‰ä»·äº C*inv(A)</span>
</code></pre>
<h2 data-id="heading-5">ä¸‰ã€çŸ©é˜µç‚¹è¿ç®—ï¼ˆ./ .* .^ï¼‰</h2>
<p>ç‚¹è¿ç®—ï¼ˆå…ƒç´ çº§è¿ç®—ï¼‰æ˜¯MATLABç‰¹æœ‰çš„ä¾¿æ·æ“ä½œï¼Œæ ¸å¿ƒæ˜¯<strong>å¯¹åº”ä½ç½®å…ƒç´ ç‹¬ç«‹è¿ç®—</strong>ï¼Œæ— éœ€æ»¡è¶³çŸ©é˜µç»´åº¦åŒ¹é…è§„åˆ™ï¼ˆä»…éœ€ç»´åº¦ç›¸åŒæˆ–å…¶ä¸­ä¸€ä¸ªä¸ºæ ‡é‡ï¼‰ã€‚</p>
<h3 data-id="heading-6">1. ç‚¹ä¹˜æ³•ï¼ˆ.*ï¼‰</h3>
<pre><code class="hljs language-matlab" lang="matlab">A = [<span class="hljs-number">1</span> <span class="hljs-number">2</span>; <span class="hljs-number">3</span> <span class="hljs-number">4</span>];
B = [<span class="hljs-number">5</span> <span class="hljs-number">6</span>; <span class="hljs-number">7</span> <span class="hljs-number">8</span>];

<span class="hljs-comment">% ç‚¹ä¹˜ï¼šå¯¹åº”å…ƒç´ ç›¸ä¹˜</span>
C = A .* B; <span class="hljs-comment">% ç»“æœï¼š[1Ã—5 2Ã—6; 3Ã—7 4Ã—8] = [5 12; 21 32]</span>
</code></pre>
<h3 data-id="heading-7">2. ç‚¹é™¤æ³•ï¼ˆ./ å’Œ .\ï¼‰</h3>
<pre><code class="hljs language-matlab" lang="matlab"><span class="hljs-comment">% ç‚¹å³é™¤ï¼šAå…ƒç´  Ã· Bå¯¹åº”å…ƒç´ </span>
D = A ./ B; <span class="hljs-comment">% ç»“æœï¼š[1/5 2/6; 3/7 4/8] â‰ˆ [0.2 0.333; 0.428 0.5]</span>

<span class="hljs-comment">% ç‚¹å·¦é™¤ï¼šBå…ƒç´  Ã· Aå¯¹åº”å…ƒç´ </span>
E = A .\ B; <span class="hljs-comment">% ç»“æœï¼š[5/1 6/2; 7/3 8/4] = [5 3; 2.333 2]</span>

<span class="hljs-comment">% æ ‡é‡ç‚¹é™¤</span>
F = A ./ <span class="hljs-number">2</span>; <span class="hljs-comment">% æ‰€æœ‰å…ƒç´ Ã·2ï¼Œç»“æœï¼š[0.5 1; 1.5 2]</span>
</code></pre>
<h3 data-id="heading-8">3. ç‚¹å¹‚è¿ç®—ï¼ˆ.^ï¼‰</h3>
<pre><code class="hljs language-matlab" lang="matlab"><span class="hljs-comment">% å…ƒç´ çº§å¹‚è¿ç®—</span>
G = A .^ <span class="hljs-number">2</span>; <span class="hljs-comment">% æ¯ä¸ªå…ƒç´ å¹³æ–¹ï¼Œç»“æœï¼š[1 4; 9 16]</span>
H = A .^ B; <span class="hljs-comment">% å¯¹åº”å…ƒç´ å¹‚è¿ç®—ï¼Œç»“æœï¼š[1^5 2^6; 3^7 4^8]</span>
</code></pre>
<h2 data-id="heading-9">å››ã€çŸ©é˜µè½¬ç½®ï¼ˆ' å’Œ .'ï¼‰</h2>
<h3 data-id="heading-10">1. æ™®é€šè½¬ç½®ï¼ˆ'ï¼‰</h3>
<p>å…±è½­è½¬ç½®ï¼Œé€‚ç”¨äºå¤æ•°çŸ©é˜µï¼ˆå®æ•°çŸ©é˜µç­‰ä»·äºæ™®é€šè½¬ç½®ï¼‰ï¼š</p>
<pre><code class="hljs language-matlab" lang="matlab"><span class="hljs-comment">% å®æ•°çŸ©é˜µè½¬ç½®</span>
A = [<span class="hljs-number">1</span> <span class="hljs-number">2</span> <span class="hljs-number">3</span>; <span class="hljs-number">4</span> <span class="hljs-number">5</span> <span class="hljs-number">6</span>];
A_trans = A'; <span class="hljs-comment">% ç»“æœï¼š[1 4; 2 5; 3 6]</span>

<span class="hljs-comment">% å¤æ•°çŸ©é˜µå…±è½­è½¬ç½®</span>
B = [<span class="hljs-number">1</span>+<span class="hljs-number">2</span><span class="hljs-built_in">i</span> <span class="hljs-number">3</span>+<span class="hljs-number">4</span><span class="hljs-built_in">i</span>; <span class="hljs-number">5</span>+<span class="hljs-number">6</span><span class="hljs-built_in">i</span> <span class="hljs-number">7</span>+<span class="hljs-number">8</span><span class="hljs-built_in">i</span>];
B_conj = B'; <span class="hljs-comment">% ç»“æœï¼š[1-2i 5-6i; 3-4i 7-8i]</span>
</code></pre>
<h3 data-id="heading-11">2. éå…±è½­è½¬ç½®ï¼ˆ.'ï¼‰</h3>
<p>ä»…è½¬ç½®ä¸å…±è½­ï¼Œä¸“ä¸ºå¤æ•°çŸ©é˜µè®¾è®¡ï¼š</p>
<pre><code class="hljs language-matlab" lang="matlab">B_trans = B.'; <span class="hljs-comment">% ç»“æœï¼š[1+2i 5+6i; 3+4i 7+8i]</span>
</code></pre>
<h2 data-id="heading-12">äº”ã€é€†çŸ©é˜µï¼ˆinv()ï¼‰</h2>
<h3 data-id="heading-13">1. å®šä¹‰ä¸ä½¿ç”¨</h3>
<p>é€†çŸ©é˜µä»…é€‚ç”¨äº<strong>æ–¹é˜µä¸”è¡Œåˆ—å¼â‰ 0</strong>ï¼ˆå¯é€†çŸ©é˜µ/éå¥‡å¼‚çŸ©é˜µï¼‰ï¼Œæ»¡è¶³ <code>A*inv(A)=eye(n)</code>ï¼ˆå•ä½çŸ©é˜µï¼‰ã€‚</p>
<pre><code class="hljs language-matlab" lang="matlab"><span class="hljs-comment">% å®šä¹‰å¯é€†æ–¹é˜µ</span>
A = [<span class="hljs-number">1</span> <span class="hljs-number">2</span>; <span class="hljs-number">3</span> <span class="hljs-number">4</span>];

<span class="hljs-comment">% æ±‚é€†çŸ©é˜µ</span>
A_inv = inv(A); <span class="hljs-comment">% ç»“æœï¼š[-2 1; 1.5 -0.5]</span>

<span class="hljs-comment">% éªŒè¯ï¼šAÃ—é€†çŸ©é˜µ=å•ä½çŸ©é˜µ</span>
I = A * A_inv; <span class="hljs-comment">% ç»“æœï¼š[1 0; 0 1]</span>
</code></pre>
<h3 data-id="heading-14">2. å¸¸è§æŠ¥é”™å¤„ç†</h3>
<p>è‹¥æ‰§è¡Œ<code>inv(A)</code>æŠ¥é”™<code>Matrix is singular to working precision</code>ï¼Œè¯´æ˜çŸ©é˜µè¡Œåˆ—å¼=0ï¼ˆå¥‡å¼‚çŸ©é˜µï¼‰ï¼Œæ— æ³•æ±‚é€†ï¼Œå¯æ£€æŸ¥çŸ©é˜µæ˜¯å¦ä¸ºæ–¹é˜µã€è¡Œåˆ—å¼æ˜¯å¦ä¸º0ã€‚</p>
<h2 data-id="heading-15">å…­ã€è¡Œåˆ—å¼ï¼ˆdet()ï¼‰</h2>
<p>è¡Œåˆ—å¼æ˜¯æ–¹é˜µçš„æ ‡é‡å±æ€§ï¼Œä»…é€‚ç”¨äºæ–¹é˜µï¼ŒMATLABä¸­ç”¨<code>det()</code>å‡½æ•°è®¡ç®—ï¼š</p>
<pre><code class="hljs language-matlab" lang="matlab"><span class="hljs-comment">% 2Ã—2çŸ©é˜µè¡Œåˆ—å¼</span>
A = [<span class="hljs-number">1</span> <span class="hljs-number">2</span>; <span class="hljs-number">3</span> <span class="hljs-number">4</span>];
det_A = det(A); <span class="hljs-comment">% è®¡ç®—ï¼š1Ã—4 - 2Ã—3 = -2</span>

<span class="hljs-comment">% 3Ã—3çŸ©é˜µè¡Œåˆ—å¼</span>
B = [<span class="hljs-number">1</span> <span class="hljs-number">2</span> <span class="hljs-number">3</span>; <span class="hljs-number">4</span> <span class="hljs-number">5</span> <span class="hljs-number">6</span>; <span class="hljs-number">7</span> <span class="hljs-number">8</span> <span class="hljs-number">9</span>];
det_B = det(B); <span class="hljs-comment">% ç»“æœï¼š0ï¼ˆå¥‡å¼‚çŸ©é˜µï¼Œæ— æ³•æ±‚é€†ï¼‰</span>
</code></pre>
<h2 data-id="heading-16">ä¸ƒã€å®æˆ˜æ¡ˆä¾‹ï¼šç»¼åˆè¿ç®—</h2>
<pre><code class="hljs language-matlab" lang="matlab"><span class="hljs-comment">% ç»¼åˆè¿ç®—ç¤ºä¾‹</span>
clear; clc; <span class="hljs-comment">% æ¸…ç©ºå˜é‡å’Œå‘½ä»¤è¡Œ</span>

<span class="hljs-comment">% 1. åˆ›å»ºçŸ©é˜µ</span>
A = [<span class="hljs-number">2</span> <span class="hljs-number">5</span>; <span class="hljs-number">1</span> <span class="hljs-number">3</span>];
B = [<span class="hljs-number">4</span> <span class="hljs-number">1</span>; <span class="hljs-number">2</span> <span class="hljs-number">7</span>];

<span class="hljs-comment">% 2. åŸºç¡€è¿ç®—</span>
C = A + B; <span class="hljs-comment">% åŠ æ³•</span>
D = A * B; <span class="hljs-comment">% çŸ©é˜µä¹˜æ³•</span>
E = A .* B; <span class="hljs-comment">% ç‚¹ä¹˜æ³•</span>

<span class="hljs-comment">% 3. è½¬ç½®ä¸é€†çŸ©é˜µ</span>
A_trans = A'; <span class="hljs-comment">% è½¬ç½®</span>
A_inv = inv(A); <span class="hljs-comment">% é€†çŸ©é˜µ</span>

<span class="hljs-comment">% 4. è¡Œåˆ—å¼</span>
det_A = det(A); <span class="hljs-comment">% è¡Œåˆ—å¼=2Ã—3-5Ã—1=1</span>

<span class="hljs-comment">% 5. æ±‚è§£çº¿æ€§æ–¹ç¨‹ç»„ A*X=B</span>
X = A \ B;

<span class="hljs-comment">% è¾“å‡ºç»“æœ</span>
<span class="hljs-built_in">disp</span>(<span class="hljs-string">'çŸ©é˜µAï¼š'</span>); <span class="hljs-built_in">disp</span>(A);
<span class="hljs-built_in">disp</span>(<span class="hljs-string">'çŸ©é˜µBï¼š'</span>); <span class="hljs-built_in">disp</span>(B);
<span class="hljs-built_in">disp</span>(<span class="hljs-string">'A+Bï¼š'</span>); <span class="hljs-built_in">disp</span>(C);
<span class="hljs-built_in">disp</span>(<span class="hljs-string">'A*Bï¼š'</span>); <span class="hljs-built_in">disp</span>(D);
<span class="hljs-built_in">disp</span>(<span class="hljs-string">'A.*Bï¼š'</span>); <span class="hljs-built_in">disp</span>(E);
<span class="hljs-built_in">disp</span>(<span class="hljs-string">'Açš„è½¬ç½®ï¼š'</span>); <span class="hljs-built_in">disp</span>(A_trans);
<span class="hljs-built_in">disp</span>(<span class="hljs-string">'Açš„é€†çŸ©é˜µï¼š'</span>); <span class="hljs-built_in">disp</span>(A_inv);
<span class="hljs-built_in">disp</span>(<span class="hljs-string">'Açš„è¡Œåˆ—å¼ï¼š'</span>); <span class="hljs-built_in">disp</span>(det_A);
<span class="hljs-built_in">disp</span>(<span class="hljs-string">'A\Bçš„è§£ï¼š'</span>); <span class="hljs-built_in">disp</span>(X);
</code></pre>
<h2 data-id="heading-17">å…«ã€æ³¨æ„äº‹é¡¹</h2>
<ol>
<li>çŸ©é˜µä¹˜æ³•ï¼ˆ<em>ï¼‰å’Œç‚¹ä¹˜æ³•ï¼ˆ.</em>ï¼‰æ˜¯æœ€æ˜“æ··æ·†çš„æ“ä½œï¼š<code>*</code> éµå¾ªçŸ©é˜µè¿ç®—è§„åˆ™ï¼Œ<code>.*</code> æ˜¯å…ƒç´ çº§è¿ç®—ï¼›</li>
<li>æ±‚é€†çŸ©é˜µå‰åŠ¡å¿…ç¡®è®¤çŸ©é˜µæ˜¯æ–¹é˜µä¸”è¡Œåˆ—å¼â‰ 0ï¼Œå¦åˆ™ä¼šæŠ¥é”™ï¼›</li>
<li>è½¬ç½®æ“ä½œä¸­ï¼Œå®æ•°çŸ©é˜µç”¨<code>'</code>å’Œ<code>.'</code>ç»“æœä¸€è‡´ï¼Œå¤æ•°çŸ©é˜µä¼˜å…ˆç”¨<code>.'</code>é¿å…å…±è½­ï¼›</li>
<li>çŸ©é˜µé™¤æ³•ä¼˜å…ˆä½¿ç”¨å·¦é™¤ï¼ˆ\ï¼‰ï¼Œæ±‚è§£çº¿æ€§æ–¹ç¨‹ç»„æ—¶ç²¾åº¦æ›´é«˜ã€é€Ÿåº¦æ›´å¿«ã€‚</li>
</ol>
<h3 data-id="heading-18">æ€»ç»“</h3>
<ol>
<li>MATLABçŸ©é˜µåŸºç¡€è¿ç®—ä¸­ï¼ŒåŠ å‡è¦æ±‚ç»´åº¦ä¸€è‡´ï¼Œä¹˜æ³•è¦æ±‚å‰çŸ©é˜µåˆ—æ•°=åçŸ©é˜µè¡Œæ•°ï¼Œç‚¹è¿ç®—ï¼ˆ./ã€.*ã€.^ï¼‰æ˜¯å…ƒç´ çº§ç‹¬ç«‹è¿ç®—ï¼›</li>
<li>è½¬ç½®åˆ†å…±è½­è½¬ç½®ï¼ˆ'ï¼‰å’Œéå…±è½­è½¬ç½®ï¼ˆ.'ï¼‰ï¼Œé€†çŸ©é˜µï¼ˆinv()ï¼‰ä»…é€‚ç”¨äºè¡Œåˆ—å¼â‰ 0çš„æ–¹é˜µï¼Œè¡Œåˆ—å¼ç”¨det()è®¡ç®—ï¼›</li>
<li>çŸ©é˜µé™¤æ³•ä¸­å·¦é™¤ï¼ˆ\ï¼‰ç”¨äºæ±‚è§£A<em>X=Bï¼Œå³é™¤ï¼ˆ/ï¼‰ç”¨äºæ±‚è§£X</em>B=Aï¼Œå®é™…åº”ç”¨ä¸­å·¦é™¤æ›´å¸¸ç”¨ã€‚</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç§ç§åˆ«äººå®¶çš„æ—¥å¿—æ‰“å°ï¼Œé‚£å«ä¸€ä¸ªä¼˜é›…ï¼]]></title>    <link>https://juejin.cn/post/7593232758128246790</link>    <guid>https://juejin.cn/post/7593232758128246790</guid>    <pubDate>2026-01-11T02:53:55.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7593232758128246790" data-draft-id="7593241698370928676" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç§ç§åˆ«äººå®¶çš„æ—¥å¿—æ‰“å°ï¼Œé‚£å«ä¸€ä¸ªä¼˜é›…ï¼"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-11T02:53:55.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è‹ä¸‰è¯´æŠ€æœ¯"/> <meta itemprop="url" content="https://juejin.cn/user/465848661970824"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç§ç§åˆ«äººå®¶çš„æ—¥å¿—æ‰“å°ï¼Œé‚£å«ä¸€ä¸ªä¼˜é›…ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/465848661970824/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è‹ä¸‰è¯´æŠ€æœ¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-11T02:53:55.000Z" title="Sun Jan 11 2026 02:53:55 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>è¿™ç¯‡æ–‡ç« è·Ÿå¤§å®¶ä¸€èµ·èŠèŠæ‰“å°ä¼˜è´¨æ—¥å¿—çš„10æ¡å†›è§„ï¼Œå¸Œæœ›å¯¹ä½ ä¼šæœ‰æ‰€å¸®åŠ©ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/03a387e5c91342d4bbed395364602d8f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuP5LiJ6K-05oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768705722&amp;x-signature=iVrDV%2FMhIfMPUj9vDm5XTsaJZfI%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-1">ç¬¬1æ¡ï¼šæ ¼å¼ç»Ÿä¸€</h2>
<p><strong>åä¾‹ï¼ˆç®¡ç†çœ‹åˆ°ä¼šæ‰£é’±ï¼‰</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java">log.info(<span class="hljs-string">"start process"</span>);
log.error(<span class="hljs-string">"error happen"</span>); 
</code></pre>
<p>æ— æ—¶é—´æˆ³ï¼Œæ— ä¸Šä¸‹æ–‡ã€‚</p>
<p><strong>æ­£è§£ä»£ç </strong>ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- logback.xmlæ ¸å¿ƒé…ç½® --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">pattern</span>&gt;</span>
    %d{yy-MM-dd HH:mm:ss.SSS} 
    |%X{traceId:-NO_ID} 
    |%thread 
    |%-5level 
    |%logger{36} 
    |%msg%n
<span class="hljs-tag">&lt;/<span class="hljs-name">pattern</span>&gt;</span>
</code></pre>
<p>åœ¨logback.xmlä¸­ç»Ÿä¸€é…ç½®äº†æ—¥å¿—çš„æ—¶é—´æ ¼å¼ã€tradeIdï¼Œçº¿ç¨‹ã€ç­‰çº§ã€æ—¥å¿—è¯¦æƒ…éƒ½ä¿¡æ¯ã€‚</p>
<p>æ—¥å¿—çš„æ ¼å¼ç»Ÿä¸€äº†ï¼Œæ›´æ–¹ä¾¿ç‚¹ä½é—®é¢˜ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d19d7e31c5c1405090e66d5c87c97d20~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuP5LiJ6K-05oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768705722&amp;x-signature=tM3dwu0CHuA43IZiqejD4XtjZFk%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-2">ç¬¬2æ¡ï¼šå¼‚å¸¸å¿…å¸¦å †æ ˆ</h2>
<p><strong>åä¾‹ï¼ˆåŒäº‹çœ‹äº†æƒ³æ‰“äººï¼‰</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">try</span> {
    processOrder();
} <span class="hljs-keyword">catch</span> (Exception e) {
    log.error(<span class="hljs-string">"å¤„ç†å¤±è´¥"</span>); 
}
</code></pre>
<p>å‡ºç°å¼‚å¸¸äº†ï¼Œæ—¥å¿—ä¸­æ²¡æ‰“å°ä»»ä½•çš„å¼‚å¸¸å †æ ˆä¿¡æ¯ã€‚</p>
<p>ç›¸å½“äºè‡ªå·±æŠŠå¼‚å¸¸åƒæ‰äº†ã€‚</p>
<p>éå¸¸ä¸å¥½æ’æŸ¥é—®é¢˜ã€‚</p>
<p><strong>æ­£ç¡®å§¿åŠ¿</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java">log.error(<span class="hljs-string">"è®¢å•å¤„ç†å¼‚å¸¸ orderId={}"</span>, orderId, e); <span class="hljs-comment">// eå¿…é¡»å­˜åœ¨ï¼</span>
</code></pre>
<p>æ—¥å¿—ä¸­è®°å½•äº†å‡ºç°å¼‚å¸¸çš„è®¢å•å·orderIdå’Œå¼‚å¸¸çš„å †æ ˆä¿¡æ¯eã€‚</p>
<h2 data-id="heading-3">ç¬¬3æ¡ï¼šçº§åˆ«åˆç†</h2>
<p><strong>åé¢æ•™æ</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java">log.debug(<span class="hljs-string">"ç”¨æˆ·ä½™é¢ä¸è¶³ userId={}"</span>, userId); <span class="hljs-comment">// ä¸šåŠ¡å¼‚å¸¸åº”å±WARN</span>
log.error(<span class="hljs-string">"æ¥å£å“åº”ç¨æ…¢"</span>); <span class="hljs-comment">// æ™®é€šè¶…æ—¶å±INFO</span>
</code></pre>
<p>æ¥å£å“åº”ç¨æ…¢ï¼Œæ‰“å°äº†errorçº§åˆ«çš„æ—¥å¿—ï¼Œæ˜¾ç„¶ä¸å¤ªåˆç†ã€‚</p>
<p>æ­£å¸¸æƒ…å†µä¸‹ï¼Œæ™®é€šè¶…æ—¶å±INFOçº§åˆ«ã€‚</p>
<p><strong>çº§åˆ«å®šä¹‰è¡¨</strong>ï¼š</p>





























<table><thead><tr><th>çº§åˆ«</th><th>æ­£ç¡®ä½¿ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>FATAL</td><td>ç³»ç»Ÿå³å°†å´©æºƒï¼ˆOOMã€ç£ç›˜çˆ†æ»¡ï¼‰</td></tr><tr><td>ERROR</td><td>æ ¸å¿ƒä¸šåŠ¡å¤±è´¥ï¼ˆæ”¯ä»˜å¤±è´¥ã€è®¢å•åˆ›å»ºå¼‚å¸¸ï¼‰</td></tr><tr><td>WARN</td><td>å¯æ¢å¤å¼‚å¸¸ï¼ˆé‡è¯•æˆåŠŸã€é™çº§è§¦å‘ï¼‰</td></tr><tr><td>INFO</td><td>å…³é”®æµç¨‹èŠ‚ç‚¹ï¼ˆè®¢å•çŠ¶æ€å˜æ›´ï¼‰</td></tr><tr><td>DEBUG</td><td>è°ƒè¯•ä¿¡æ¯ï¼ˆå‚æ•°æµæ°´ã€ä¸­é—´ç»“æœï¼‰</td></tr></tbody></table>
<h2 data-id="heading-4">ç¬¬4æ¡ï¼šå‚æ•°å®Œæ•´</h2>
<p><strong>åä¾‹ï¼ˆè®©è¿ç»´éª‚å¨˜ï¼‰</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java">log.info(<span class="hljs-string">"ç”¨æˆ·ç™»å½•å¤±è´¥"</span>);
</code></pre>
<p>ä¸Šé¢è¿™ä¸ªæ—¥å¿—åªæ‰“å°äº†â€œç”¨æˆ·ç™»å½•å¤±è´¥â€è¿™ä¸ªæ–‡æ¡ˆã€‚</p>
<p>è°åœ¨å“ªç™»å½•å¤±è´¥ï¼Ÿ</p>
<p><strong>ä¾¦æ¢å¼æ—¥å¿—</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java">log.warn(<span class="hljs-string">"ç”¨æˆ·ç™»å½•å¤±è´¥ username={}, clientIP={}, failReason={}"</span>, 
    username, clientIP, <span class="hljs-string">"å¯†ç é”™è¯¯æ¬¡æ•°è¶…é™"</span>);
</code></pre>
<p>ç™»å½•å¤±è´¥çš„ä¸šåŠ¡åœºæ™¯ï¼Œéœ€è¦è®°å½•å“ªä¸ªç”¨æˆ·ï¼Œipæ˜¯å¤šå°‘ï¼Œåœ¨ä»€ä¹ˆæ—¶é—´ï¼Œç™»å½•å¤±è´¥äº†ï¼Œå¤±è´¥çš„åŸå› æ˜¯ä»€ä¹ˆã€‚</p>
<p>æ—¶é—´åœ¨logback.xmlä¸­ç»Ÿä¸€é…ç½®äº†æ ¼å¼ã€‚</p>
<p>è¿™æ ·æ‰æ–¹ä¾¿å¿«é€Ÿå®šä½é—®é¢˜ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8e59c8c2c33e493c97e416eb4dca109c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuP5LiJ6K-05oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768705722&amp;x-signature=eVCx6plqOcMc8aEEK03SCR1Hm2k%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-5">ç¬¬5æ¡ï¼šæ•°æ®è„±æ•</h2>
<p><strong>è¡€æ³ªæ¡ˆä¾‹</strong>ï¼š<br/>
æŸåŒäº‹æ‰“å°æ—¥å¿—æ³„éœ²ç”¨æˆ·æ‰‹æœºå·è¢«æŠ•è¯‰ã€‚</p>
<p>æˆ‘åœ¨è®°å½•çš„æ—¥å¿—ä¸­ï¼Œéœ€è¦å¯¹ä¸€ä¸‹ç”¨æˆ·çš„ä¸ªäººæ•æ„Ÿæ•°æ®åšè„±æ•å¤„ç†ã€‚</p>
<p>ä¾‹å¦‚ä¸‹é¢è¿™æ ·ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// è„±æ•å·¥å…·ç±»</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LogMasker</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">maskMobile</span><span class="hljs-params">(String mobile)</span> {
        <span class="hljs-keyword">return</span> mobile.replaceAll(<span class="hljs-string">"(\\d{3})\\d{4}(\\d{4})"</span>, <span class="hljs-string">"$1****$2"</span>);
    }
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
log.info(<span class="hljs-string">"ç”¨æˆ·æ³¨å†Œ mobile={}"</span>, LogMasker.maskMobile(<span class="hljs-string">"13812345678"</span>));
</code></pre>
<h2 data-id="heading-6">ç¬¬6æ¡ï¼šå¼‚æ­¥ä¿æ€§èƒ½</h2>
<p><strong>é—®é¢˜å¤ç°</strong><br/>
æŸæ¬¡ç§’æ€æ´»åŠ¨ä¸­ç›´æ¥åŒæ­¥å†™æ—¥å¿—ï¼Œå¯¼è‡´å¤§é‡çº¿ç¨‹é˜»å¡ï¼š</p>
<pre><code class="hljs language-java" lang="java">log.info(<span class="hljs-string">"ç§’æ€è¯·æ±‚ userId={}, itemId={}"</span>, userId, itemId); 
</code></pre>
<p>é«˜å¹¶å‘ä¸‹IOé˜»å¡ã€‚</p>
<p>è‡´å‘½ä¼¤å®³åˆ†æï¼š</p>
<ol>
<li>åŒæ­¥å†™æ—¥å¿—å¯¼è‡´çº¿ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢é¢‘ç¹</li>
<li>ç£ç›˜IOæˆä¸ºç³»ç»Ÿç“¶é¢ˆ</li>
<li>é«˜å³°æœŸæ—¥å¿—æ‰“å°è€—æ—¶å æ€»RTçš„25%</li>
</ol>
<p><strong>æ­£ç¡®ç¤ºèŒƒï¼ˆä¸‰æ­¥é…ç½®æ³•ï¼‰</strong></p>
<h3 data-id="heading-7">æ­¥éª¤1ï¼šlogback.xmlé…ç½®å¼‚æ­¥é€šé“</h3>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- å¼‚æ­¥Appenderæ ¸å¿ƒé…ç½® --&gt;</span>  
<span class="hljs-tag">&lt;<span class="hljs-name">appender</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"ASYNC"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"ch.qos.logback.classic.AsyncAppender"</span>&gt;</span>  
    <span class="hljs-comment">&lt;!-- ä¸ä¸¢å¤±æ—¥å¿—çš„é˜ˆå€¼ï¼šå½“é˜Ÿåˆ—å‰©ä½™å®¹é‡ï¼œæ­¤å€¼æ—¶ï¼ŒTRACE/DEBUGçº§åˆ«æ—¥å¿—å°†è¢«ä¸¢å¼ƒ --&gt;</span>  
    <span class="hljs-tag">&lt;<span class="hljs-name">discardingThreshold</span>&gt;</span>0<span class="hljs-tag">&lt;/<span class="hljs-name">discardingThreshold</span>&gt;</span>  
    <span class="hljs-comment">&lt;!-- é˜Ÿåˆ—æ·±åº¦ï¼šå»ºè®®è®¾ä¸º (æœ€å¤§å¹¶å‘çº¿ç¨‹æ•° Ã— 2) --&gt;</span>  
    <span class="hljs-tag">&lt;<span class="hljs-name">queueSize</span>&gt;</span>4096<span class="hljs-tag">&lt;/<span class="hljs-name">queueSize</span>&gt;</span>  
    <span class="hljs-comment">&lt;!-- å…³è”çœŸå®Appender --&gt;</span>  
    <span class="hljs-tag">&lt;<span class="hljs-name">appender-ref</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"FILE"</span>/&gt;</span>  
<span class="hljs-tag">&lt;/<span class="hljs-name">appender</span>&gt;</span>  

</code></pre>
<h3 data-id="heading-8">æ­¥éª¤2ï¼šæ—¥å¿—è¾“å‡ºä¼˜åŒ–ä»£ç </h3>
<pre><code class="hljs language-c" lang="c"><span class="hljs-comment">// æ— éœ€å‰ç½®åˆ¤æ–­ï¼Œæ¡†æ¶è‡ªåŠ¨å¤„ç†  </span>
<span class="hljs-built_in">log</span>.debug(<span class="hljs-string">"æ¥æ”¶åˆ°MQæ¶ˆæ¯ï¼š{}"</span>, msg.toSimpleString()); <span class="hljs-comment">// è‡ªåŠ¨å¼‚æ­¥å†™å…¥é˜Ÿåˆ—  </span>

<span class="hljs-comment">// ä¸åº”åšå¤æ‚è®¡ç®—åå†æ‰“å°ï¼ˆå¼‚æ­¥å‰ä»åœ¨ä¸šåŠ¡çº¿ç¨‹æ‰§è¡Œï¼‰  </span>
<span class="hljs-comment">// é”™è¯¯åšæ³•ï¼š  </span>
<span class="hljs-built_in">log</span>.debug(<span class="hljs-string">"è¯¦ç»†å†…å®¹ï¼š{}"</span>, computeExpensiveLog());  

</code></pre>
<p>æµç¨‹å›¾å¦‚ä¸‹ï¼š
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a1a78a7d80244e11a12997ac4b1271c6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuP5LiJ6K-05oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768705722&amp;x-signature=plgQ3mfPnzxlMii9u8gLVDXimTY%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-9">æ­¥éª¤3ï¼šæ€§èƒ½å…³é”®å‚æ•°å…¬å¼</h3>
<pre><code class="hljs language-scss" lang="scss">æœ€å¤§å†…å­˜å ç”¨ â‰ˆ é˜Ÿåˆ—é•¿åº¦ Ã— å¹³å‡å•æ¡æ—¥å¿—å¤§å°  
æ¨èé˜Ÿåˆ—æ·±åº¦ = å³°å€¼TPS Ã— å®¹å¿æœ€å¤§å»¶è¿Ÿ(ç§’)  
ä¾‹å¦‚ï¼š<span class="hljs-number">10000</span> TPS Ã— <span class="hljs-number">0.5s</span>å®¹å¿ â‡’ <span class="hljs-number">5000</span>é˜Ÿåˆ—å¤§å°  
</code></pre>
<p><strong>é£é™©è§„é¿ç­–ç•¥</strong></p>
<ol>
<li>é˜²é˜Ÿåˆ—å †ç§¯ï¼šç›‘æ§é˜Ÿåˆ—ä½¿ç”¨ç‡ï¼Œè¾¾80%è§¦å‘å‘Šè­¦</li>
<li>é˜²OOMï¼šä¸¥æ ¼çº¦æŸå¤§å¯¹è±¡toString()çš„è°ƒç”¨</li>
<li>ç´§æ€¥é€ƒç”Ÿï¼šé¢„è®¾JMXæ¥å£ç”¨äºå¿«é€Ÿåˆ‡æ¢åŒæ­¥æ¨¡å¼</li>
</ol>
<h2 data-id="heading-10">ç¬¬7æ¡ï¼šé“¾è·¯è¿½è¸ª</h2>
<p><strong>æ··æ²Œåœºæ™¯</strong>ï¼š<br/>
è·¨æœåŠ¡è°ƒç”¨æ— æ³•å…³è”æ—¥å¿—ã€‚</p>
<p>æˆ‘ä»¬éœ€è¦æœ‰é“¾è·¯è¿½è¸ªæ–¹æ¡ˆã€‚</p>
<p><strong>å…¨é“¾è·¯æ–¹æ¡ˆ</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æ‹¦æˆªå™¨æ³¨å…¥traceId</span>
MDC.put(<span class="hljs-string">"traceId"</span>, UUID.randomUUID().toString().substring(<span class="hljs-number">0</span>,<span class="hljs-number">8</span>));

<span class="hljs-comment">// æ—¥å¿—æ ¼å¼åŒ…å«traceId</span>
&lt;pattern&gt;%d{HH:mm:ss} |%X{traceId}| %msg%n&lt;/pattern&gt;
</code></pre>
<p>å¯ä»¥åœ¨MDCä¸­è®¾ç½®traceIdã€‚</p>
<p>åé¢å¯ä»¥é€šè¿‡traceIdå…¨é“¾è·¯è¿½è¸ªæ—¥å¿—ã€‚</p>
<p>æµç¨‹å›¾å¦‚ä¸‹ï¼š
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c9bb7c53779b480c8d843bef0a19e480~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuP5LiJ6K-05oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768705722&amp;x-signature=BSxg5FlyXnJuFBNkjwzBVI1KbWg%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-11">ç¬¬8æ¡ï¼šåŠ¨æ€è°ƒå‚</h2>
<p><strong>åŠå¤œé‡å¯çš„ç—›</strong>ï¼š<br/>
çº¿ä¸Šé—®é¢˜éœ€è¦ä¸´æ—¶å¼€DEBUGæ—¥å¿—ï¼Œæ¯”å¦‚ï¼šæŸ¥è¯¢ç”¨æˆ·çš„æŸæ¬¡å¼‚å¸¸æ“ä½œçš„æ—¥å¿—ã€‚</p>
<p><strong>çƒ­æ›´æ–°æ–¹æ¡ˆ</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@GetMapping("/logLevel")</span>
<span class="hljs-keyword">public</span> String <span class="hljs-title function_">changeLogLevel</span><span class="hljs-params">(
    <span class="hljs-meta">@RequestParam</span> String loggerName, 
    <span class="hljs-meta">@RequestParam</span> String level)</span> {
    
    <span class="hljs-type">Logger</span> <span class="hljs-variable">logger</span> <span class="hljs-operator">=</span> (Logger) LoggerFactory.getLogger(loggerName);
    logger.setLevel(Level.valueOf(level)); <span class="hljs-comment">// ç«‹å³ç”Ÿæ•ˆ</span>
    <span class="hljs-keyword">return</span> <span class="hljs-string">"OK"</span>;
}
</code></pre>
<p>æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦ä¸´æ—¶æ‰“å°DEBUGæ—¥å¿—ï¼Œè¿™å°±éœ€è¦æœ‰ä¸ªåŠ¨æ€å‚æ•°æ§åˆ¶äº†ã€‚</p>
<p>å¦åˆ™æ¯æ¬¡è°ƒæ•´æ‰“å°æ—¥å¿—çº§åˆ«éƒ½éœ€è¦é‡å¯æœåŠ¡ï¼Œå¯èƒ½ä¼šå½±å“ç”¨æˆ·çš„æ­£å¸¸ä½¿ç”¨ã€‚</p>
<pre><code class="hljs language-plain" lang="plain">journey
    title æ—¥å¿—çº§åˆ«åŠ¨æ€è°ƒæ•´
    section æ—§æ¨¡å¼
        å‘ç°é—®é¢˜ --&gt; ä¿®æ”¹é…ç½® --&gt; é‡å¯åº”ç”¨ --&gt; ä¸¢å¤±ç°åœº
    section æ–°æ¨¡å¼
        å‘ç°é—®é¢˜ --&gt; åŠ¨æ€è°ƒæ•´ --&gt; ç«‹å³ç”Ÿæ•ˆ --&gt; ä¿æŒç°åœº
</code></pre>
<h2 data-id="heading-12">ç¬¬9æ¡ï¼šç»“æ„åŒ–å­˜å‚¨</h2>
<p><strong>æ··æ²Œæ—¥å¿—</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java">ç”¨æˆ·è´­ä¹°äº†è‹¹æœæ‰‹æœº è®¢å•å·<span class="hljs-number">1001</span> é‡‘é¢<span class="hljs-number">8999</span>
</code></pre>
<p>ä¸Šé¢çš„æ—¥å¿—æ‹¼æ¥æˆäº†ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè™½è¯´ä¸­é—´æœ‰ç©ºæ ¼åˆ†éš”äº†ï¼Œä½†å“ªäº›å­—æ®µå¯¹åº”äº†å“ªäº›å€¼ï¼Œçœ‹èµ·æ¥ä¸æ˜¯å¾ˆæ¸…æ¥šã€‚</p>
<p>æˆ‘ä»¬åœ¨å­˜å‚¨æ—¥å¿—çš„æ—¶å€™ï¼Œéœ€è¦åšç»“æ„åŒ–å­˜å‚¨ï¼Œæ–¹ä¾¿å¿«é€Ÿçš„æŸ¥è¯¢å’Œæœç´¢ã€‚</p>
<p><strong>æœºå™¨å‹å¥½å¼æ—¥å¿—</strong>ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"event"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ORDER_CREATE"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"orderId"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1001</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"amount"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">8999</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"products"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">{</span><span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span><span class="hljs-string">"iPhone"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"sku"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"A123"</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>è¿™é‡Œä½¿ç”¨äº†jsonæ ¼å¼å­˜å‚¨æ—¥å¿—ã€‚</p>
<p>æ—¥å¿—ä¸­çš„æ•°æ®ä¸€ç›®äº†ç„¶ã€‚</p>
<h2 data-id="heading-13">ç¬¬10æ¡ï¼šæ™ºèƒ½ç›‘æ§</h2>
<p><strong>æœ€å¤±è´¥æ¡ˆä¾‹</strong>ï¼š<br/>
æŸæ¬¡ç”¨æˆ·å¼€é€šä¼šå‘˜æ“ä½œï¼Œé”™è¯¯æ—¥å¿—å †ç§¯3å¤©æ‰è¢«å‘ç°ï¼Œé»„èŠ±èœéƒ½å‡‰äº†ã€‚</p>
<p>æˆ‘ä»¬éœ€è¦åœ¨é¡¹ç›®ä¸­å¼•å…¥æ™ºèƒ½ç›‘æ§ã€‚</p>
<p><strong>ELKç›‘æ§æ–¹æ¡ˆ</strong>ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8442e82996f24948be3c24ffb50d79e9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuP5LiJ6K-05oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768705722&amp;x-signature=%2B9fFbzVImYWIMD1yheGn6JRIJaM%3D" alt="" loading="lazy"/></p>
<p><strong>æŠ¥è­¦è§„åˆ™ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java">ERRORæ—¥å¿—è¿ç»­<span class="hljs-number">5</span>åˆ†é’Ÿ &gt; <span class="hljs-number">100</span>æ¡ â†’ ç”µè¯å‘Šè­¦  
WARNæ—¥å¿—æŒç»­<span class="hljs-number">1</span>å°æ—¶ â†’ é‚®ä»¶é€šçŸ¥
</code></pre>
<h2 data-id="heading-14">æ€»ç»“</h2>
<p><strong>ç ”å‘äººå‘˜çš„ä¸‰å¤§å¢ƒç•Œ</strong>ï¼š</p>
<ol>
<li><strong>é’é“œ</strong>ï¼š<code>System.out.println("errorï¼")</code></li>
<li><strong>é’»çŸ³</strong>ï¼šæ ‡å‡†åŒ–æ—¥å¿— + ELKç›‘æ§</li>
<li><strong>ç‹è€…</strong>ï¼š
<ul>
<li>æ—¥å¿—é©±åŠ¨ä»£ç ä¼˜åŒ–</li>
<li>å¼‚å¸¸é¢„æµ‹ç³»ç»Ÿ</li>
<li>æ ¹å› åˆ†æAIæ¨¡å‹</li>
</ul>
</li>
</ol>
<p><strong>æœ€åçš„çµé­‚æ‹·é—®</strong>ï¼š<br/>
ä¸‹æ¬¡çº¿ä¸Šæ•…éšœæ—¶ï¼Œä½ çš„æ—¥å¿—èƒ½è®©æ–°äºº5åˆ†é’Ÿå®šä½é—®é¢˜å—ï¼Ÿ</p>
<h2 data-id="heading-15">æœ€åè¯´ä¸€å¥(æ±‚å…³æ³¨ï¼Œåˆ«ç™½å«–æˆ‘)</h2>
<p>å¦‚æœè¿™ç¯‡æ–‡ç« å¯¹æ‚¨æœ‰æ‰€å¸®åŠ©ï¼Œæˆ–è€…æœ‰æ‰€å¯å‘çš„è¯ï¼Œå¸®å¿™å…³æ³¨ä¸€ä¸‹æˆ‘çš„åŒåå…¬ä¼—å·ï¼šè‹ä¸‰è¯´æŠ€æœ¯ï¼Œæ‚¨çš„æ”¯æŒæ˜¯æˆ‘åšæŒå†™ä½œæœ€å¤§çš„åŠ¨åŠ›ã€‚</p>
<p>æ±‚ä¸€é”®ä¸‰è¿ï¼šç‚¹èµã€è½¬å‘ã€åœ¨çœ‹ã€‚</p>
<p>å…³æ³¨å…¬ä¼—å·ï¼šã€è‹ä¸‰è¯´æŠ€æœ¯ã€‘ï¼Œåœ¨å…¬ä¼—å·ä¸­å›å¤ï¼šè¿›å¤§å‚ï¼Œå¯ä»¥å…è´¹è·å–æˆ‘æœ€è¿‘æ•´ç†çš„10ä¸‡å­—çš„é¢è¯•å®å…¸ï¼Œå¥½å¤šå°ä¼™ä¼´é è¿™ä¸ªå®å…¸æ‹¿åˆ°äº†å¤šå®¶å¤§å‚çš„offerã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»ä¸€è¡Œè¡Œé›•ç¢åˆ°ä¸ä»£ç å…±èˆï¼šæˆ‘çš„å¤æ³•å¼€å‘åˆ° Vibe Coding è·ƒè¿ä¹‹è·¯]]></title>    <link>https://juejin.cn/post/7593342203822391302</link>    <guid>https://juejin.cn/post/7593342203822391302</guid>    <pubDate>2026-01-11T12:46:05.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7593342203822391302" data-draft-id="7593342203822325766" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»ä¸€è¡Œè¡Œé›•ç¢åˆ°ä¸ä»£ç å…±èˆï¼šæˆ‘çš„å¤æ³•å¼€å‘åˆ° Vibe Coding è·ƒè¿ä¹‹è·¯"/> <meta itemprop="keywords" content="æ•æ·å¼€å‘,æ²¸ç‚¹,æ˜é‡‘æŠ€æœ¯å¾æ–‡"/> <meta itemprop="datePublished" content="2026-01-11T12:46:05.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="äº‘èˆŸå–"/> <meta itemprop="url" content="https://juejin.cn/user/360295546233959"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»ä¸€è¡Œè¡Œé›•ç¢åˆ°ä¸ä»£ç å…±èˆï¼šæˆ‘çš„å¤æ³•å¼€å‘åˆ° Vibe Coding è·ƒè¿ä¹‹è·¯
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/360295546233959/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    äº‘èˆŸå–
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-11T12:46:05.000Z" title="Sun Jan 11 2026 12:46:05 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    75
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»18åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä½œä¸ºä¸€å<strong>é«˜çº§å‰ç«¯å¼€å‘å·¥ç¨‹å¸ˆ</strong>ï¼Œæˆ‘æ·±è€•è¿‡ Vue/React çš„ Web ç”Ÿæ€ï¼Œæ­å»ºè¿‡ H5 çš„å“åº”å¼æ¶æ„ï¼Œå¼€å‘è¿‡å…¨ç«¯å…¼å®¹çš„å°ç¨‹åºï¼Œç”¨ UniApp å®ç°è¿‡ Android ä¸ iOS çš„ç»Ÿä¸€äº¤ä»˜ï¼Œæ›´åŸºäº Electron-Vite æ‰“é€ è¿‡æ”¯æŒåŒæ¨¡å¼éƒ¨ç½²ï¼ˆæ¡Œé¢åº”ç”¨<code>Windows/macOS</code> + æµè§ˆå™¨æœåŠ¡<code>Service</code>ï¼‰çš„ä¼ä¸šçº§ RPA Workflow Platform è‡ªåŠ¨åŒ–å¹³å°ã€‚</p>
<p>åœ¨è¿™æ¡å‰ç«¯çš„æˆé•¿ä¹‹è·¯ä¸Šï¼Œæˆ‘æ›¾æ˜¯ã€Œå¤æ³•å¼€å‘ã€çš„å¿ å®æ‹¥è¶¸ï¼Œç”¨ä¸¥æ ¼çš„è§„èŒƒå’Œåˆ†å±‚è®¾è®¡ï¼Œæ„å»ºè¿‡ç¨³å®šå¯é çš„ä¸šåŠ¡ç³»ç»Ÿï¼›ä¹Ÿåœ¨å¿«é€Ÿè¿­ä»£çš„éœ€æ±‚æµªæ½®ä¸­ï¼Œè§‰é†’äºã€ŒVibe Codingã€çš„ä½“æ„Ÿé©±åŠ¨ï¼Œä½“ä¼šåˆ°äº†é«˜æ•ˆè¯•é”™ã€çµæ´»é€‚é…çš„åˆ›ä½œå¿«æ„Ÿã€‚</p>
<p>è¿™ä¸æ˜¯ä¸€æ¬¡éæ­¤å³å½¼çš„é€‰æ‹©ï¼Œè€Œæ˜¯ä¸€åœº<strong>ä»ã€Œæœ¯ã€åˆ°ã€Œé“ã€çš„èƒ½åŠ›å‡çº§</strong>ã€‚åœ¨å¼€å‘ã€ŒRPA Workflow Platform å¤šå“ç‰Œè‡ªåŠ¨åŒ–å¹³å°ã€ï¼ˆè¦†ç›– Electron æ¡Œé¢ç«¯ã€Browser Service æµè§ˆå™¨ç«¯ã€å¤šå“ç‰Œå®šåˆ¶åŒ–äº¤ä»˜ï¼‰çš„å…¨æµç¨‹ä¸­ï¼Œæˆ‘å®Œæ•´ç»å†äº†ä»å¤æ³•å¼€å‘åˆ° Vibe Coding çš„è·ƒè¿ï¼Œä¹Ÿç»ˆäºæ˜ç™½ï¼šå¯¹äºå‰ç«¯å·¥ç¨‹å¸ˆè€Œè¨€ï¼ŒçœŸæ­£çš„é«˜æ•ˆå¼€å‘ï¼Œä»æ¥ä¸æ˜¯å¯¹æŸç§èŒƒå¼çš„åæ‰§ï¼Œè€Œæ˜¯åœ¨åˆé€‚çš„åœºæ™¯ï¼Œç”¨åˆé€‚çš„æ–¹å¼ï¼Œå†™å‡ºæ—¢ç¬¦åˆå·¥ç¨‹æ ‡å‡†ï¼Œåˆèƒ½å¿«é€Ÿå“åº”ä¸šåŠ¡çš„ä»£ç  â€”â€” å°¤å…¶æ˜¯åœ¨æˆ‘ä»¬éœ€è¦åŒæ—¶å…¼é¡¾<strong>å¤šå“ç‰Œé€‚é…ã€è·¨æ¨¡å¼éƒ¨ç½²ã€è‡ªåŠ¨åŒ–å¼•æ“å…¼å®¹</strong>çš„ RPA å‰ç«¯é¢†åŸŸã€‚</p>
<h2 data-id="heading-0">ä¸€ã€ å¤æ³•å¼€å‘ï¼šæˆ‘çš„å‰ç«¯ç­‘åŸºï¼Œä¹Ÿæ˜¯æˆ‘çš„ã€Œå®‰å…¨ç»“ç•Œã€</h2>
<p>æ¥è§¦å‰ç«¯å¼€å‘çš„å‰å…­å¹´ï¼Œæˆ‘æ˜¯ä¸€ååšå®šçš„ã€Œå¤æ³•å¼€å‘ä¿¡å¾’ã€ã€‚</p>
<p>æˆ‘ä¿¡å¥‰ã€Œæ— è®¾è®¡ï¼Œä¸ç¼–ç ã€ã€‚åœ¨å¼€å‘æ¯ä¸€ä¸ªé¡¹ç›®å‰ï¼Œæˆ‘éƒ½ä¼šèŠ±å¤§é‡æ—¶é—´æ’°å†™è¯¦ç»†çš„<strong>éœ€æ±‚åˆ†ææ–‡æ¡£ã€ç»„ä»¶åˆ†å±‚è®¾è®¡ã€çŠ¶æ€ç®¡ç†æ–¹æ¡ˆã€è·¨æ¨¡å¼å…¼å®¹é¢„æ¡ˆ</strong>ã€‚å¯¹äºå‰ç«¯çš„æ ¸å¿ƒæ¨¡å—ï¼Œæˆ‘æ›´æ˜¯åæ‰§åˆ°æè‡´ â€”â€”Vue ç»„ä»¶å¿…é¡»éµå¾ª<code>UIç»„ä»¶/ä¸šåŠ¡ç»„ä»¶/é¡µé¢ç»„ä»¶</code>çš„ä¸‰å±‚åˆ’åˆ†ï¼ŒElectron é¡¹ç›®å¿…é¡»ä¸¥æ ¼åˆ†ç¦» <code>ä¸»è¿›ç¨‹/æ¸²æŸ“è¿›ç¨‹/é¢„åŠ è½½è„šæœ¬</code>ï¼ŒPlaywright è‡ªåŠ¨åŒ–é€»è¾‘å¿…é¡»å°è£…ä¸ºç‹¬ç«‹æ¨¡å—ï¼Œç”šè‡³è¿å¤šå“ç‰Œé…ç½®çš„å‘½åéƒ½è¦ä¸¥æ ¼éµå¾ªç»Ÿä¸€è§„èŒƒï¼Œæ³¨é‡Šçš„æ ¼å¼éƒ½è¦ç»Ÿä¸€ä¸º<code>/** åŠŸèƒ½ + å‚æ•° + è¿”å›å€¼ + æ³¨æ„äº‹é¡¹ */</code>ã€‚</p>
<p>è¿™ç§ä¹ æƒ¯ï¼Œåœ¨æˆ‘å¼€å‘<strong>RPA Workflow Platform æ ¸å¿ƒåº•å±‚æ¡†æ¶</strong>å’Œ<strong>å¤šå“ç‰Œé…ç½®ä½“ç³»</strong>æ—¶ï¼Œå‘æŒ¥äº†å·¨å¤§çš„ä½œç”¨ã€‚</p>
<p>RPA è‡ªåŠ¨åŒ–å¹³å°çš„åº•å±‚æ¡†æ¶æ˜¯æ•´ä¸ªç³»ç»Ÿçš„åŸºç¡€ï¼Œå®ƒéœ€è¦ä¿è¯<strong>å¤šå“ç‰Œé…ç½®çš„éš”ç¦»æ€§ã€åŒæ¨¡å¼éƒ¨ç½²çš„ç¨³å®šæ€§ã€Playwright è‡ªåŠ¨åŒ–å¼•æ“çš„å…¼å®¹æ€§ã€Electron è·¨å¹³å°çš„ä¸€è‡´æ€§</strong>ã€‚ä»»ä½•ä¸€ä¸ªå¾®å°çš„è®¾è®¡ç¼ºé™·ï¼Œéƒ½å¯èƒ½å¯¼è‡´å“ç‰Œå®šåˆ¶å¤±è´¥ã€è‡ªåŠ¨åŒ–ä»»åŠ¡å¼‚å¸¸ï¼Œç”šè‡³æ•´ä¸ªå¹³å°çš„è·¨ç«¯å…¼å®¹é—®é¢˜ã€‚</p>
<p>ä¸ºäº†å¼€å‘è¿™ä¸ªåº•å±‚æ¡†æ¶ï¼Œæˆ‘é€‰æ‹©äº† Electron + Vue3 + TypeScript ä½œä¸ºæŠ€æœ¯æ ˆã€‚åœ¨é•¿è¾¾å…­ä¸ªæœˆçš„å¼€å‘å‘¨æœŸé‡Œï¼Œæˆ‘ä¸¥æ ¼éµå¾ªå¤æ³•å¼€å‘çš„æµç¨‹ï¼š</p>
<ul>
<li>
<p><strong>å‰æœŸè®¾è®¡</strong>ï¼šæˆ‘èŠ±äº†æ•´æ•´äº”å‘¨ï¼Œç»˜åˆ¶äº†è¯¦ç»†çš„<strong>æ¨¡å—åˆ†å±‚å›¾ã€å¤šå“ç‰Œé…ç½®æ¶æ„æ–‡æ¡£ã€Electron ä¸» / æ¸²æŸ“è¿›ç¨‹é€šä¿¡æ–¹æ¡ˆã€Playwright å¼•æ“å°è£…æ–¹æ¡ˆ</strong>ã€‚æˆ‘ä¸ºæ¯ä¸€ä¸ªæ ¸å¿ƒæ¨¡å—ï¼ˆä»»åŠ¡ç®¡ç†ã€æµè§ˆå™¨ç®¡ç†ã€è‡ªåŠ¨åŒ–è°ƒåº¦ï¼‰éƒ½å®šä¹‰äº†æ¸…æ™°çš„æ¥å£è§„èŒƒï¼Œä¸ºæ¯ä¸€ä¸ªå¤šå“ç‰Œé…ç½®é¡¹éƒ½è®¾è®¡äº†ç»Ÿä¸€çš„ Schemaï¼Œç”šè‡³ä¸ºæ¯ä¸€ä¸ªè‡ªåŠ¨åŒ–æŒ‡ä»¤å¤„ç†å™¨éƒ½å†™å¥½äº†è¯¦ç»†çš„æ³¨é‡Šï¼Œè¯´æ˜å®ƒçš„åŠŸèƒ½ã€å‚æ•°ã€è¿”å›å€¼å’Œè·¨æ¨¡å¼é€‚é…æ³¨æ„äº‹é¡¹ã€‚</p>
</li>
<li>
<p><strong>ç¼–ç å®ç°</strong>ï¼šåœ¨ç¼–ç è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä¸¥æ ¼éµå®ˆ Electron å®‰å…¨æœ€ä½³å®è·µå’Œå‰ç«¯å·¥ç¨‹åŒ–è§„èŒƒã€‚å¯¹äº Electron è¿›ç¨‹é€šä¿¡ï¼Œæˆ‘ä½¿ç”¨äº† <strong>ContextBridge + IPC</strong>ï¼Œä¿è¯æ¸²æŸ“è¿›ç¨‹çš„å®‰å…¨éš”ç¦»ï¼›å¯¹äºå¤šå“ç‰Œé…ç½®ï¼Œæˆ‘ä½¿ç”¨äº† <strong>é…ç½®é©±åŠ¨</strong> çš„è®¾è®¡æ¨¡å¼ï¼Œä¿è¯å“ç‰Œå®šåˆ¶çš„çµæ´»æ€§ï¼›å¯¹äº Playwright è‡ªåŠ¨åŒ–é€»è¾‘ï¼Œæˆ‘ä½¿ç”¨äº† <strong>æ± åŒ–ç®¡ç†</strong>ï¼Œä¿è¯æµè§ˆå™¨å®ä¾‹çš„é«˜æ•ˆå¤ç”¨ã€‚æˆ‘è¿˜ä¸ºæ ¸å¿ƒæ¨¡å—ç¼–å†™äº†å•å…ƒæµ‹è¯•ï¼Œä½¿ç”¨ Vitest + Playwright Test ä¿è¯ä»£ç çš„è´¨é‡ï¼Œä»æ ¹æºä¸Šé¿å…äº†è·¨æ¨¡å¼ã€è·¨å“ç‰Œçš„å…¼å®¹é—®é¢˜ã€‚</p>
</li>
<li>
<p><strong>æµ‹è¯•éªŒè¯</strong>ï¼šç¼–ç å®Œæˆåï¼Œæˆ‘èŠ±äº†ä¸¤ä¸ªæœˆçš„æ—¶é—´ï¼Œåœ¨ <strong>Windows / macOSï¼ˆElectron æ¨¡å¼ï¼‰ã€Chromeï¼ˆBrowser Service æ¨¡å¼ï¼‰ã€å¤šå“ç‰Œ</strong> ä¸‹è¿›è¡Œäº†å…¼å®¹æ€§æµ‹è¯•ã€‚æˆ‘æ¨¡æ‹Ÿäº†å„ç§æç«¯åœºæ™¯ï¼ˆå¤šæµè§ˆå™¨å¹¶å‘ã€å¤§æµé‡ä»»åŠ¡è°ƒåº¦ã€è·¨å¹³å°å“ç‰Œæ‰“åŒ…ï¼‰ï¼Œæµ‹è¯•å¹³å°çš„æ€§èƒ½å’Œç¨³å®šæ€§ã€‚æœ€ç»ˆï¼Œè¿™ä¸ªåº•å±‚æ¡†æ¶çš„ä»£ç è¦†ç›–ç‡è¾¾åˆ°äº† 95% ä»¥ä¸Šï¼Œåœ¨åç»­çš„å“ç‰Œå®šåˆ¶å’ŒåŠŸèƒ½è¿­ä»£ä¸­ï¼Œæ²¡æœ‰å‡ºç°ä»»ä½•ä¸¥é‡çš„å…¼å®¹æ€§é—®é¢˜ï¼Œæˆä¸ºäº† RPA å¹³å°çš„æ ¸å¿ƒåŸºç¡€ã€‚</p>
</li>
</ul>
<p>è¿™æ®µç»å†ï¼Œè®©æˆ‘æ·±åˆ»ä½“ä¼šåˆ°äº†å¤æ³•å¼€å‘çš„é­…åŠ›ã€‚å®ƒå°±åƒä¸€ä½ä¸¥è°¨çš„å·¥åŒ ï¼Œæ•™ä¼šæˆ‘å¦‚ä½• <strong>ä¸€è¡Œè¡Œé›•ç¢ä»£ç ï¼Œæ­å»ºèµ·åšå›ºçš„ RPA å‰ç«¯å·¥ç¨‹å ¡å’</strong>ã€‚åœ¨å¤æ³•å¼€å‘çš„ä¸–ç•Œé‡Œï¼Œæˆ‘æ„Ÿåˆ°æ— æ¯”çš„å®‰å¿ƒå’Œè¸å®ã€‚æˆ‘çŸ¥é“ï¼Œåªè¦æˆ‘éµå¾ªè§„èŒƒï¼Œæˆ‘çš„ä»£ç å°±ä¼šæ˜¯å¯é çš„ã€å¯ç»´æŠ¤çš„ã€å¯æ‰©å±•çš„ â€”â€” è¿™å¯¹äºéœ€è¦åŒæ—¶å…¼é¡¾å¤šå“ç‰Œã€åŒæ¨¡å¼çš„ RPA é¡¹ç›®è€Œè¨€ï¼Œå°¤ä¸ºé‡è¦ã€‚</p>
<p>ä½†åŒæ—¶ï¼Œæˆ‘ä¹Ÿæ¸æ¸å‘ç°äº†å¤æ³•å¼€å‘çš„å±€é™æ€§ã€‚</p>
<p>åœ¨å¼€å‘ <strong>RPA Workflow Platform å¤šå“ç‰Œå®šåˆ¶ç‰ˆ</strong> æ—¶ï¼Œæˆ‘ä¾ç„¶è¯•å›¾ç”¨å¤æ³•å¼€å‘çš„æµç¨‹æ¥çº¦æŸè‡ªå·±ã€‚æˆ‘èŠ±äº†ä¸€å‘¨çš„æ—¶é—´ï¼Œæ’°å†™äº†è¯¦ç»†çš„éœ€æ±‚æ–‡æ¡£å’Œå“ç‰Œé€‚é…æ–¹æ¡ˆï¼Œç„¶åå¼€å§‹ç¼–ç ã€‚ä½†åœ¨ç¼–ç è¿‡ç¨‹ä¸­ï¼Œæˆ‘å‘ç°ï¼ŒRPA å¹³å°çš„ <strong>å“ç‰Œå®šåˆ¶éœ€æ±‚ã€è‡ªåŠ¨åŒ–åœºæ™¯é€‚é…ã€Electron æ‰“åŒ…ä¼˜åŒ–</strong> çš„å˜åŒ–é€Ÿåº¦ï¼Œè¿œå¿«äºæˆ‘çš„è®¾è®¡æ–¹æ¡ˆã€‚æˆ‘åˆšå†™å®Œä¸€å¥—å“ç‰Œå›¾æ ‡é…ç½®é€»è¾‘ï¼Œäº§å“å°±è¦æ±‚æ–°å¢å“ç‰Œä¸“å±çš„è‡ªåŠ¨åŒ–èŠ‚ç‚¹ï¼›æˆ‘åˆšå®ç°äº† Windows å¹³å°çš„æ‰“åŒ…è„šæœ¬ï¼Œå°±å‘ç° macOS ä¸‹å­˜åœ¨æƒé™å…¼å®¹é—®é¢˜ï¼›æˆ‘åˆšå®Œæˆäº†ä¸€å¥—ä»»åŠ¡è°ƒåº¦ä¼˜åŒ–ï¼Œå°±å‘ç°ç”¨æˆ·éœ€è¦æ”¯æŒåŸºäº <code>cron è¡¨è¾¾å¼</code> çš„è‡ªå®šä¹‰å®šæ—¶ç­–ç•¥ã€‚</p>
<p>æ›´è®©æˆ‘æ²®ä¸§çš„æ˜¯ï¼Œå½“æˆ‘ç»ˆäºæŒ‰ç…§è®¾è®¡æ–¹æ¡ˆå®Œæˆäº†ä»£ç ï¼Œå´å‘ç°å®ƒåœ¨ <strong>Electron 28 + ä¸åŒç‰ˆæœ¬ã€ä¸åŒç³»ç»Ÿçš„ Playwright ç¯å¢ƒ</strong> ä¸‹ï¼Œå‡ºç°äº†å„ç§å…¼å®¹æ€§é—®é¢˜ã€‚è¿™æ—¶æˆ‘æ‰æ„è¯†åˆ°ï¼Œå¯¹äº RPA è¿™ç§ <strong>é«˜åº¦ä¾èµ–ç³»ç»Ÿç¯å¢ƒã€å¿«é€Ÿå“åº”ä¸šåŠ¡å®šåˆ¶ã€å¤šæ¨¡å¼å¤šå“ç‰Œå…¼å®¹</strong> çš„é¢†åŸŸï¼Œå¤æ³•å¼€å‘çš„æµç¨‹ï¼Œåè€Œæˆäº†ä¸€ç§æŸç¼šã€‚å®ƒè®©æˆ‘åœ¨å‰æœŸæŠ•å…¥äº†å¤§é‡çš„æ—¶é—´å’Œç²¾åŠ›ï¼Œå´æ— æ³•ä¿è¯æœ€ç»ˆçš„ç»“æœæ˜¯ç¬¦åˆä¸šåŠ¡éœ€æ±‚çš„ã€‚</p>
<p>æˆ‘é™·å…¥äº†è¿·èŒ«ï¼šéš¾é“æˆ‘ä¸€ç›´ä¿¡å¥‰çš„å¼€å‘æ–¹å¼ï¼Œå·²ç»ä¸é€‚åˆ RPA å‰ç«¯çš„å‘å±•äº†å—ï¼Ÿ</p>
<h2 data-id="heading-1">äºŒã€ Vibe Codingï¼šæ‰“ç ´æŸç¼šï¼Œä¸ RPA å¤šæ¨¡å¼ä»£ç å…±èˆçš„è§‰é†’</h2>
<p>æˆ‘çš„ Vibe Coding è§‰é†’ï¼Œæºäºä¸€æ¬¡<strong>RPA Workflow Platform ç´§æ€¥è¿­ä»£éœ€æ±‚</strong>ã€‚</p>
<p>å½“æ—¶ï¼Œäº§å“è¦æ±‚æˆ‘åœ¨ <strong>å››å¤©å†…</strong>ï¼Œä¸º å¤šå“ç‰Œæ·»åŠ ä¸€ä¸ª <strong>åŸºäº Playwright çš„æŒ‡çº¹æµè§ˆå™¨è‡ªåŠ¨åŒ–åŠŸèƒ½</strong>ï¼Œå¹¶ä¸”éœ€è¦åŒæ—¶å…¼å®¹ <strong>Electron æ¡Œé¢æ¨¡å¼å’Œ Browser Service æµè§ˆå™¨æ¨¡å¼</strong>ï¼Œè¿˜è¦ä¿è¯å¤šæµè§ˆå™¨å¹¶å‘çš„æ€§èƒ½ç¨³å®šã€‚æŒ‰ç…§å¤æ³•å¼€å‘çš„æµç¨‹ï¼Œæˆ‘éœ€è¦å…ˆå†™æ–‡æ¡£ï¼Œå†è®¾è®¡æ¨¡å—ï¼Œå†ç¼–ç ï¼Œå†æµ‹è¯• â€”â€” è¿™è‡³å°‘éœ€è¦åå¤©çš„æ—¶é—´ã€‚ä½†è¿™æ¬¡ï¼Œæˆ‘æ²¡æœ‰é€‰æ‹©çš„ä½™åœ°ã€‚</p>
<p>äºæ˜¯ï¼Œæˆ‘å†³å®šæ‰“ç ´æŸç¼šï¼Œå°è¯•ä¸€ç§å…¨æ–°çš„å¼€å‘æ–¹å¼ã€‚</p>
<p>æˆ‘æ‰“å¼€äº† VS Codeï¼Œå¯åŠ¨äº† Electron-Vite çš„å¼€å‘ç¯å¢ƒï¼Œç„¶åå¼€å§‹äº†æˆ‘çš„ Vibe Coding ä¹‹æ—…ã€‚</p>
<p>æ²¡æœ‰æ–‡æ¡£ï¼Œæ²¡æœ‰è¯¦ç»†çš„è®¾è®¡ï¼Œç”šè‡³æ²¡æœ‰æ˜ç¡®çš„æ¨¡å—åˆ†å±‚ã€‚æˆ‘åªæœ‰ä¸€ä¸ªæ ¸å¿ƒç›®æ ‡ï¼š<strong>å››å¤©å†…ï¼Œå®ç°ä¸€ä¸ªç¨³å®šçš„ã€è·¨æ¨¡å¼çš„ã€æ”¯æŒæŒ‡çº¹æµè§ˆå™¨çš„ RPA è‡ªåŠ¨åŒ–åŠŸèƒ½</strong>ã€‚æˆ‘å‡­å€Ÿç€è‡ªå·±å¯¹ <strong>Electron è·¨è¿›ç¨‹é€šä¿¡çš„ç»éªŒã€Vue3 ç»„åˆå¼ API çš„ä½“æ„Ÿã€Playwright è‡ªåŠ¨åŒ–å¼•æ“çš„ç†è§£</strong>ï¼Œå¼€å§‹ä¸€è¡Œè¡Œåœ°å†™ä»£ç ã€‚</p>
<p>æˆ‘ç”¨ <strong>Copilot Code</strong> ä½œä¸ºæˆ‘çš„åŠ©æ‰‹ï¼Œå®ƒå¸®æˆ‘ç”Ÿæˆäº†å¤§é‡çš„é‡å¤ä»£ç  â€”â€” æ¯”å¦‚æŒ‡çº¹æµè§ˆå™¨çš„é…ç½®é¡¹ã€å¤šå“ç‰Œçš„æ ·å¼é€‚é…ã€Electron ä¸»è¿›ç¨‹çš„æƒé™ç®¡ç†ï¼›å®ƒå¸®æˆ‘è¡¥å…¨äº†å¤æ‚çš„é€»è¾‘ â€”â€” æ¯”å¦‚ Playwright å®ä¾‹æ± çš„ç®¡ç†ã€è·¨æ¨¡å¼çš„ API é€‚é…ã€å¤šæµè§ˆå™¨å¹¶å‘çš„èµ„æºæ§åˆ¶ï¼›å®ƒç”šè‡³è¿˜ä¸ºæˆ‘æä¾›äº†ä¸€äº›ä¼˜åŒ–å»ºè®® â€”â€” æ¯”å¦‚å¦‚ä½•å‡å°‘ Electron çš„å†…å­˜å ç”¨ï¼Œå¦‚ä½•ä¼˜åŒ– Playwright çš„å¯åŠ¨é€Ÿåº¦ï¼Œå¦‚ä½•è§„é¿ä¸åŒç³»ç»Ÿçš„æƒé™é™åˆ¶ã€‚</p>
<p>æˆ‘ç”¨ <strong>Vite çš„çƒ­æ›´æ–° + Electron çƒ­é‡è½½</strong> ä½œä¸ºæˆ‘çš„è°ƒè¯•å·¥å…·ï¼Œå®ƒè®©æˆ‘å¯ä»¥å®æ—¶ä¿®æ”¹ä»£ç ï¼Œå®æ—¶åœ¨æ¡Œé¢ç«¯å’Œæµè§ˆå™¨ç«¯éªŒè¯æ•ˆæœï¼Œç„¶åå¿«é€Ÿè°ƒæ•´ã€‚æˆ‘ä¸å†çº ç»“äº <strong>æ¨¡å—çš„åˆ†å±‚æ˜¯å¦å®Œç¾ï¼Œå‡½æ•°çš„é•¿åº¦æ˜¯å¦åˆé€‚ï¼Œé…ç½®æ–‡ä»¶çš„å‘½åæ˜¯å¦ç¬¦åˆè§„èŒƒ</strong>ï¼Œè€Œæ˜¯ä¸“æ³¨äº <strong>ä»£ç æ˜¯å¦èƒ½è§£å†³æˆ‘çš„é—®é¢˜ï¼Œæ˜¯å¦èƒ½å®ç°æŒ‡çº¹æµè§ˆå™¨çš„æ ¸å¿ƒèƒ½åŠ›ï¼Œæ˜¯å¦èƒ½å…¼å®¹ä¸¤ç§éƒ¨ç½²æ¨¡å¼</strong>ã€‚</p>
<p>æˆ‘è¿˜çµæ´»åœ°è¿ç”¨äº†æˆ‘ä¹‹å‰çš„æŠ€æœ¯ç§¯ç´¯ï¼šæˆ‘ç›´æ¥å¤ç”¨äº†åº•å±‚æ¡†æ¶çš„ <strong>Playwright åŸºç¡€å°è£…é€»è¾‘</strong>ï¼Œä¿è¯äº†è‡ªåŠ¨åŒ–å¼•æ“çš„ç¨³å®šæ€§ï¼›æˆ‘ä½¿ç”¨äº† <strong>Electron çš„ ipcMain å’Œ ipcRenderer</strong>ï¼Œå®ç°äº†æ¡Œé¢æ¨¡å¼ä¸‹çš„æµè§ˆå™¨è¿›ç¨‹ç®¡ç†ï¼›æˆ‘åŸºäºç°æœ‰çš„å¤šå“ç‰Œé…ç½®ä½“ç³»ï¼Œå¿«é€Ÿé€‚é…äº† å¤šå“ç‰Œ çš„ä¸“å±æŒ‡çº¹ç­–ç•¥ï¼›æˆ‘è¿˜å¤ç”¨äº† Browser Service æ¨¡å¼çš„ HTTP API æ¶æ„ï¼Œä¿è¯äº†è·¨æ¨¡å¼çš„åŠŸèƒ½ä¸€è‡´æ€§ã€‚</p>
<p>è®©æˆ‘æƒŠå–œçš„æ˜¯ï¼Œè¿™æ¬¡å¼€å‘çš„æ•ˆç‡ï¼Œè¿œè¶…æˆ‘çš„é¢„æœŸã€‚ä»…ä»…ç”¨äº†<strong>ä¸‰å¤©åŠ</strong>çš„æ—¶é—´ï¼Œæˆ‘å°±å®Œæˆäº†è¿™ä¸ªåŠŸèƒ½çš„å¼€å‘ã€‚è¿™ä¸ªåŠŸèƒ½è™½ç„¶ä»£ç ä¸å¤Ÿä¼˜é›…ï¼Œæ¨¡å—åˆ†å±‚ä¸å¤Ÿæ¸…æ™°ï¼Œç”šè‡³è¿˜æœ‰ä¸€äº›å°çš„ä¼˜åŒ–ç©ºé—´ï¼Œä½†å®ƒå´å®Œç¾åœ°å®ç°äº†äº§å“çš„éœ€æ±‚ï¼šå®ƒç¨³å®šå¯é ï¼Œåœ¨ Electron æ¡Œé¢æ¨¡å¼å’Œ Browser Service æ¨¡å¼ä¸‹éƒ½èƒ½æ­£å¸¸è¿è¡Œï¼›å®ƒæ€§èƒ½ä¼˜å¼‚ï¼Œæ”¯æŒ 10 ä¸ªä»¥ä¸Šæµè§ˆå™¨å®ä¾‹å¹¶å‘æ‰§è¡Œï¼›å®ƒé€‚é…æ€§å¼ºï¼Œåœ¨ Windows å’Œ macOS å¹³å°ä¸‹çš„å“ç‰Œä¸­éƒ½èƒ½ç¨³å®šå·¥ä½œï¼Œå¾—åˆ°äº†æµ‹è¯•å’Œäº§å“çš„ä¸€è‡´è®¤å¯ã€‚</p>
<p>åœ¨è¿™æ¬¡å¼€å‘ä¸­ï¼Œæˆ‘ç¬¬ä¸€æ¬¡ä½“ä¼šåˆ°äº† <strong>ä¸ RPA å¤šæ¨¡å¼ä»£ç å…±èˆçš„å¿«æ„Ÿ</strong>ã€‚æˆ‘ä¸å†æ˜¯ä»£ç çš„å¥´éš¶ï¼Œè€Œæ˜¯ä»£ç çš„ä¸»äººã€‚æˆ‘å¯ä»¥æ ¹æ®è‡ªå·±çš„æŠ€æœ¯ä½“æ„Ÿï¼Œè‡ªç”±åœ°è°ƒæ•´ä»£ç çš„æ–¹å‘ï¼›å¯ä»¥æ ¹æ®ä¸šåŠ¡çš„æ°›å›´ï¼Œå¿«é€Ÿåœ°é€‰æ‹©æœ€åˆé€‚çš„æŠ€æœ¯æ–¹æ¡ˆï¼›å¯ä»¥æ ¹æ®éƒ¨ç½²æ¨¡å¼çš„ç‰¹æ€§ï¼Œçµæ´»åœ°è¿›è¡Œå…¼å®¹å¤„ç†ã€‚è¿™ç§æ„Ÿè§‰ï¼Œå°±åƒä¸€ä½ç»éªŒä¸°å¯Œçš„èˆè€…ï¼Œåœ¨ä¸åŒçš„èˆå°ä¸Šï¼Œè‡ªç”±åœ°å±•ç°è‡ªå·±çš„èˆå§¿ã€‚</p>
<p>è¿™æ¬¡æˆåŠŸçš„å°è¯•ï¼Œè®©æˆ‘å¯¹ Vibe Coding æœ‰äº†å…¨æ–°çš„è®¤è¯†ã€‚æˆ‘æ„è¯†åˆ°ï¼ŒVibe Coding ä¸æ˜¯ã€Œä¸è§„èŒƒçš„ç¼–ç¨‹ã€ï¼Œè€Œæ˜¯ <strong>ã€Œå°† Electron å·¥ç¨‹åŒ–è§„èŒƒã€RPA é¢†åŸŸçŸ¥è¯†å†…åŒ–ä¸ºä½“æ„Ÿåçš„è‡ªç”±ã€</strong>ã€‚å®ƒä¸æ˜¯å¯¹å¤æ³•å¼€å‘çš„å¦å®šï¼Œè€Œæ˜¯å¯¹å¤æ³•å¼€å‘çš„è¡¥å……å’Œå‡çº§ â€”â€” å°¤å…¶æ˜¯åœ¨ RPA è¿™ç§éœ€è¦å¿«é€Ÿå“åº”å“ç‰Œå®šåˆ¶ã€å¤šæ¨¡å¼å…¼å®¹çš„é¢†åŸŸï¼ŒVibe Coding æ›´æ˜¯ä¸€ç§ä¸å¯æˆ–ç¼ºçš„èƒ½åŠ›ã€‚</p>
<p>åœ¨é‚£ä¹‹åï¼Œæˆ‘å¼€å§‹åœ¨æˆ‘çš„å¼€å‘å·¥ä½œä¸­ï¼Œå¤§é‡ä½¿ç”¨ Vibe Coding çš„æ–¹å¼ã€‚å¯¹äº <strong>RPA æ–°å“ç‰Œçš„å¿«é€Ÿå®šåˆ¶</strong>ï¼Œæˆ‘ç”¨å¤šå“ç‰Œé…ç½®ä½“ç³»å¿«é€Ÿé€‚é…ï¼Œå‡­å€Ÿç€è‡ªå·±çš„å“ç‰Œå®šåˆ¶ä½“æ„Ÿï¼Œå¿«é€Ÿå®Œæˆå“ç‰Œæ ‡è¯†ã€åŠŸèƒ½é›†çš„è°ƒæ•´ï¼›å¯¹äº <strong>è‡ªåŠ¨åŒ–æ–°èŠ‚ç‚¹çš„åŸå‹éªŒè¯</strong>ï¼Œæˆ‘ç”¨ Playwright å¿«é€Ÿå®ç°æ ¸å¿ƒé€»è¾‘ï¼Œåˆ©ç”¨ Vite çƒ­æ›´æ–°å¿«é€ŸéªŒè¯å¯è¡Œæ€§ï¼›å¯¹äº <strong>Browser Service æ¨¡å¼çš„æ¥å£é€‚é…</strong>ï¼Œæˆ‘æ›´æ˜¯ç”¨ Vibe Coding çš„æ–¹å¼ï¼Œå¿«é€Ÿå®Œæˆè·¨æ¨¡å¼çš„åŠŸèƒ½å¯¹é½ã€‚</p>
<p>åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œæˆ‘çš„å¼€å‘æ•ˆç‡å¾—åˆ°äº†æå¤§çš„æå‡ã€‚æˆ‘å¯ä»¥åœ¨ä¸¤å‘¨å†…ï¼Œå®Œæˆè¿‡å»ä¸€ä¸ªæœˆæ‰èƒ½å®Œæˆçš„ <strong>å¤šå“ç‰Œ RPA è¿­ä»£éœ€æ±‚</strong>ï¼›å¯ä»¥åœ¨ä¸€ä¸ªæœˆå†…ï¼Œå®Œæˆè¿‡å»ä¸¤ä¸ªæœˆæ‰èƒ½å®Œæˆçš„ <strong>è‡ªåŠ¨åŒ–åŠŸèƒ½å‡çº§</strong>ã€‚æ›´é‡è¦çš„æ˜¯ï¼Œæˆ‘ä¸å†å®³æ€• <strong>å“ç‰Œå®šåˆ¶çš„å¿«é€Ÿå˜åŒ–ã€éƒ¨ç½²æ¨¡å¼çš„å…¼å®¹é—®é¢˜ã€è‡ªåŠ¨åŒ–å¼•æ“çš„ç‰ˆæœ¬è¿­ä»£</strong>ã€‚æˆ‘å¯ä»¥æ ¹æ®å¸‚åœºçš„åé¦ˆï¼Œå¿«é€Ÿè°ƒæ•´å“ç‰Œçš„åŠŸèƒ½æ–¹å‘ï¼›å¯ä»¥æ ¹æ®ç”¨æˆ·çš„éœ€æ±‚ï¼Œå¿«é€Ÿå®ç°æ–°çš„è‡ªåŠ¨åŒ–èŠ‚ç‚¹ï¼›å¯ä»¥æ ¹æ®æŠ€æœ¯çš„å‘å±•ï¼Œå¿«é€Ÿå‡çº§ Playwright å’Œ Electron ç‰ˆæœ¬ã€‚</p>
<h2 data-id="heading-2">ä¸‰ã€ èŒƒå¼èåˆï¼šåœ¨è§„èŒƒä¸è‡ªç”±ä¹‹é—´ï¼Œæ‰¾åˆ°å‰ç«¯å¼€å‘çš„å¹³è¡¡</h2>
<p>åœ¨ç»å†äº†å¤æ³•å¼€å‘çš„ç­‘åŸºå’Œ Vibe Coding çš„è§‰é†’åï¼Œæˆ‘ç»ˆäºæ˜ç™½ï¼š<strong>å¯¹äºå‰ç«¯å·¥ç¨‹å¸ˆè€Œè¨€ï¼ŒçœŸæ­£çš„é«˜æ•ˆå¼€å‘ï¼Œä¸æ˜¯å¯¹æŸç§èŒƒå¼çš„åæ‰§ï¼Œè€Œæ˜¯åœ¨è§„èŒƒä¸è‡ªç”±ä¹‹é—´ï¼Œæ‰¾åˆ°æœ€ä½³çš„å¹³è¡¡</strong>ã€‚</p>
<p>å°¤å…¶æ˜¯åœ¨æˆ‘ä»¬éœ€è¦åŒæ—¶å…¼é¡¾ <strong>Electron æ¡Œé¢ç«¯ã€Browser Service æµè§ˆå™¨ç«¯ã€å¤šå“ç‰Œã€Windows/macOS/Linux å¤šå¹³å°</strong> çš„ RPA é¢†åŸŸï¼Œå•ä¸€çš„å¼€å‘èŒƒå¼ï¼Œå·²ç»æ— æ³•æ»¡è¶³å¤æ‚çš„ä¸šåŠ¡éœ€æ±‚ã€‚å¦‚æœæˆ‘ä¸€å‘³åœ°è¿½æ±‚å¤æ³•å¼€å‘çš„è§„èŒƒï¼Œå°±ä¼šé”™å¤±å“ç‰Œå®šåˆ¶çš„å¸‚åœºæœºä¼šï¼Œæ— æ³•å®ç°äº§å“çš„å¿«é€Ÿè¿­ä»£ï¼›å¦‚æœæˆ‘ä¸€å‘³åœ°è¿½æ±‚ Vibe Coding çš„è‡ªç”±ï¼Œå°±ä¼šå¯¼è‡´ä»£ç çš„å¯ç»´æŠ¤æ€§ä¸‹é™ï¼Œå¤šæ¨¡å¼å¤šå“ç‰Œå…¼å®¹çš„é—®é¢˜å¢å¤šï¼Œæ— æ³•æ”¯æŒäº§å“çš„é•¿æœŸå‘å±•ã€‚</p>
<p>äºæ˜¯ï¼Œæˆ‘å¼€å§‹å°è¯• <strong>èŒƒå¼èåˆ</strong> çš„å¼€å‘æ–¹å¼ã€‚æˆ‘å°† RPA Workflow Platform åˆ†ä¸º <strong>æ ¸å¿ƒåŸºç¡€å±‚</strong> å’Œ <strong>å“ç‰Œä¸šåŠ¡å±‚</strong>ï¼Œç„¶åæ ¹æ®ä¸åŒçš„å±‚ï¼Œé€‰æ‹©ä¸åŒçš„å¼€å‘èŒƒå¼ â€”â€” è¿™æ°å¥½ä¸æˆ‘çš„æŠ€æœ¯æ ˆå®Œç¾åŒ¹é…ã€‚</p>
<h3 data-id="heading-3">æ ¸å¿ƒåŸºç¡€å±‚ï¼šç”¨å¤æ³•å¼€å‘ï¼Œæ­å»ºå¤šæ¨¡å¼å…¼å®¹çš„ RPA å·¥ç¨‹å ¡å’</h3>
<p>æ ¸å¿ƒåŸºç¡€å±‚æ˜¯æ•´ä¸ª RPA å¹³å°çš„æ ¹åŸºï¼Œå®ƒåŒ…æ‹¬ <strong>Electron ä¸» / æ¸²æŸ“è¿›ç¨‹é€šä¿¡æ¡†æ¶ã€Playwright è‡ªåŠ¨åŒ–å¼•æ“å°è£…ã€å¤šå“ç‰Œé…ç½®æ ¸å¿ƒã€ä»»åŠ¡è°ƒåº¦åº•å±‚ã€Browser Service API é€‚é…å™¨</strong>ã€‚å¯¹äºè¿™ä¸€å±‚ï¼Œæˆ‘åšæŒä½¿ç”¨å¤æ³•å¼€å‘çš„æ–¹å¼ã€‚</p>
<p>æˆ‘ç”¨ Electron + TypeScript å¼€å‘è·¨è¿›ç¨‹é€šä¿¡æ¡†æ¶ï¼Œä¸¥æ ¼éµå¾ª Electron å®‰å…¨æŒ‡å—ã€è¿›ç¨‹éš”ç¦»åŸåˆ™ï¼Œä¿è¯åŒæ¨¡å¼éƒ¨ç½²çš„ç¨³å®šæ€§ï¼›æˆ‘ç”¨ JavaScript å°è£… Playwright è‡ªåŠ¨åŒ–å¼•æ“ï¼Œä¸¥æ ¼éµå¾ªæ± åŒ–ç®¡ç†ã€èµ„æºå›æ”¶çš„è§„èŒƒï¼Œä¿è¯è‡ªåŠ¨åŒ–ä»»åŠ¡çš„å¯é æ€§ï¼›æˆ‘ç”¨é…ç½®é©±åŠ¨çš„æ–¹å¼è®¾è®¡å¤šå“ç‰Œæ ¸å¿ƒä½“ç³»ï¼Œä¸¥æ ¼å®šä¹‰é…ç½® Schema å’ŒåŠ è½½é€»è¾‘ï¼Œä¿è¯å“ç‰Œå®šåˆ¶çš„ä¸€è‡´æ€§ï¼›æˆ‘ç”¨ Node.js å¼€å‘ä»»åŠ¡è°ƒåº¦åº•å±‚ï¼Œä¸¥æ ¼éµå¾ªå¹¶å‘æ§åˆ¶ã€å¼‚å¸¸é‡è¯•çš„è§„èŒƒï¼Œä¿è¯ä»»åŠ¡æ‰§è¡Œçš„ç¨³å®šæ€§ã€‚</p>
<p>åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæˆ‘èŠ±å¤§é‡çš„æ—¶é—´ï¼Œæ’°å†™è¯¦ç»†çš„æ–‡æ¡£å’Œè®¾è®¡æ–¹æ¡ˆï¼Œç¼–å†™å¤§é‡çš„å•å…ƒæµ‹è¯•å’Œè·¨æ¨¡å¼æµ‹è¯•ç”¨ä¾‹ï¼Œç¡®ä¿æ¯ä¸€è¡Œä»£ç éƒ½ç»å¾—èµ·æ—¶é—´çš„è€ƒéªŒã€‚è¿™ä¸€å±‚çš„å¼€å‘ï¼Œè™½ç„¶é€Ÿåº¦è¾ƒæ…¢ï¼Œä½†å´ä¸ºæ•´ä¸ª RPA å¹³å°çš„å‘å±•ï¼Œæ‰“ä¸‹äº†åšå®çš„åŸºç¡€ã€‚å®ƒä¿è¯äº†å¤šæ¨¡å¼å¤šå“ç‰Œå…¼å®¹çš„ä¸€è‡´æ€§ï¼Œé¿å…äº†åæœŸçš„å¤§é‡ç»´æŠ¤å’Œé‡æ„æˆæœ¬ â€”â€” è¿™å¯¹äº RPA é¡¹ç›®è€Œè¨€ï¼Œæ˜¯è‡³å…³é‡è¦çš„ã€‚</p>
<h3 data-id="heading-4">å“ç‰Œä¸šåŠ¡å±‚ï¼šç”¨ Vibe Codingï¼Œå®ç°å¤šå“ç‰Œ RPA çš„å¿«é€Ÿè¿­ä»£</h3>
<p>å“ç‰Œä¸šåŠ¡å±‚æ˜¯æ•´ä¸ª RPA å¹³å°çš„çµé­‚ï¼Œå®ƒåŒ…æ‹¬ <strong>å¤šå“ç‰Œçš„å®šåˆ¶åŒ–åŠŸèƒ½ã€è‡ªåŠ¨åŒ–èŠ‚ç‚¹çš„ä¸šåŠ¡é€‚é…ã€Electron æ‰“åŒ…çš„å“ç‰Œä¸“å±é…ç½®ã€Browser Service çš„å“ç‰Œæ¥å£æ‰©å±•</strong>ã€‚å¯¹äºè¿™ä¸€å±‚ï¼Œæˆ‘å¤§èƒ†ä½¿ç”¨ Vibe Coding çš„æ–¹å¼ã€‚</p>
<p>æˆ‘ç”¨ Vue3 å¼€å‘å“ç‰Œä¸“å±çš„ UI ç»„ä»¶ï¼Œå‡­å€Ÿç€è‡ªå·±çš„å“ç‰Œå®šåˆ¶ä½“æ„Ÿï¼Œå¿«é€Ÿå®ç°å“ç‰Œæ ‡è¯†ã€äº¤äº’é£æ ¼çš„é€‚é…ï¼›æˆ‘ç”¨ Playwright å¿«é€Ÿå¼€å‘æ–°çš„è‡ªåŠ¨åŒ–èŠ‚ç‚¹åŸå‹ï¼Œåˆ©ç”¨ Vite çƒ­æ›´æ–°å¿«é€ŸéªŒè¯èŠ‚ç‚¹çš„å¯è¡Œæ€§ï¼›æˆ‘ç”¨ Vibe Coding çš„æ–¹å¼ï¼Œå¿«é€Ÿè°ƒæ•´ Electron æ‰“åŒ…é…ç½®ï¼Œé€‚é…ä¸åŒå“ç‰Œçš„å›¾æ ‡ã€åç§°å’Œå®‰è£…ç­–ç•¥ï¼›æˆ‘ç”¨å¿«é€Ÿè¿­ä»£çš„æ–¹å¼ï¼Œå®Œæˆ Browser Service æ¨¡å¼ä¸‹å“ç‰Œä¸“å± API çš„å¼€å‘ã€‚</p>
<p>åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä¸å†çº ç»“äºè§„èŒƒå’Œæµç¨‹ï¼Œè€Œæ˜¯ä¸“æ³¨äº <strong>å“ç‰Œçš„ç”¨æˆ·ä½“éªŒå’Œä¸šåŠ¡çš„å¿«é€Ÿè¿­ä»£</strong>ã€‚æˆ‘å¯ä»¥çµæ´»åœ°è¿ç”¨å„ç§æŠ€æœ¯æ ˆï¼Œå¿«é€Ÿå®ç°å“ç‰Œå®šåˆ¶éœ€æ±‚ï¼›æˆ‘å¯ä»¥æ ¹æ®ä¸åŒéƒ¨ç½²æ¨¡å¼çš„ç‰¹æ€§ï¼Œå¿«é€Ÿè¿›è¡Œå…¼å®¹å¤„ç†ï¼›æˆ‘å¯ä»¥æ ¹æ®ç”¨æˆ·çš„åé¦ˆï¼Œå¿«é€Ÿè°ƒæ•´å“ç‰Œçš„åŠŸèƒ½æ–¹å‘ã€‚</p>
<p>å½“ç„¶ï¼Œæˆ‘ä¹Ÿä¸ºå“ç‰Œä¸šåŠ¡å±‚åˆ¶å®šäº†ä¸¥æ ¼çš„è§„åˆ™ã€‚æˆ‘å…è®¸åœ¨åŸå‹é˜¶æ®µï¼Œæ‰¿æ‹…ä¸€å®šçš„æŠ€æœ¯å€ºåŠ¡ï¼Œä½†æˆ‘ä¼šåšå¥½è®°å½•ï¼Œå¹¶åœ¨åŸå‹éªŒè¯é€šè¿‡åçš„ <strong>ä¸‹ä¸€ä¸ªè¿­ä»£å‘¨æœŸ</strong> å†…ï¼Œå°†å…¶é‡æ„ä¸ºé«˜è´¨é‡çš„ä»£ç ï¼Œèå…¥æ ¸å¿ƒåŸºç¡€å±‚ã€‚è¿™æ ·ï¼Œæ—¢ä¿è¯äº†å“ç‰Œåˆ›æ–°çš„çµæ´»æ€§ï¼Œåˆé¿å…äº†æŠ€æœ¯å€ºåŠ¡çš„ç´¯ç§¯ã€‚</p>
<h3 data-id="heading-5">å·¥å…·é“¾æ•´åˆï¼šç”¨æ™ºèƒ½åŒ–å·¥å…·ï¼Œå®ç° RPA å¼€å‘æ•ˆç‡çš„æœ€å¤§åŒ–</h3>
<p>ä¸ºäº†å®ç°èŒƒå¼èåˆçš„é«˜æ•ˆå¼€å‘ï¼Œæˆ‘è¿˜æ•´åˆäº†å¤§é‡çš„æ™ºèƒ½åŒ–å·¥å…·ï¼Œè¿™æ°å¥½ä¸æˆ‘çš„ RPA æŠ€æœ¯æ ˆå®Œç¾åŒ¹é…ã€‚</p>
<p>åœ¨æ ¸å¿ƒåŸºç¡€å±‚ï¼Œæˆ‘ç”¨ <strong>ESLintã€Prettierã€Vitestã€Playwright Test</strong> ç­‰å·¥å…·ï¼Œä¿è¯ä»£ç çš„è´¨é‡å’Œå¤šæ¨¡å¼å…¼å®¹æ€§ï¼›åœ¨å“ç‰Œä¸šåŠ¡å±‚ï¼Œæˆ‘ç”¨ <strong>Copilot Codeã€Vite çƒ­æ›´æ–°ã€Electron çƒ­é‡è½½ã€å¤šå“ç‰Œæ‰“åŒ…è„šæœ¬</strong> ç­‰å·¥å…·ï¼ŒåŠ é€Ÿå¼€å‘çš„é€Ÿåº¦ã€‚æˆ‘è¿˜å¼€å‘äº†ä¸€ç³»åˆ—çš„è‡ªå®šä¹‰å·¥å…·ï¼Œå¦‚ <strong>å¤šå“ç‰Œé…ç½®æ ¡éªŒå·¥å…·ã€Electron æ‰“åŒ…ä¼˜åŒ–å·¥å…·ã€Playwright è‡ªåŠ¨åŒ–æµ‹è¯•å·¥å…·</strong>ï¼Œè‡ªåŠ¨åŒ–é‡å¤çš„ä»»åŠ¡ï¼Œæå‡å¼€å‘çš„æ•ˆç‡ã€‚</p>
<p>è¿™ç§èŒƒå¼èåˆçš„å¼€å‘æ–¹å¼ï¼Œè®©æˆ‘åœ¨å¼€å‘å¤šæ¨¡å¼å¤šå“ç‰Œçš„ RPA å‰ç«¯é¡¹ç›®æ—¶ï¼Œå®ç°äº† <strong>æ•ˆç‡å’Œè´¨é‡çš„å¹³è¡¡ï¼Œé€Ÿåº¦å’Œç¨³å®šæ€§çš„ç»Ÿä¸€</strong>ã€‚æˆ‘æ—¢å¯ä»¥å¿«é€Ÿå®ç°å“ç‰Œçš„å®šåˆ¶è¿­ä»£ï¼ŒæŠ“ä½å¸‚åœºæœºä¼šï¼›åˆå¯ä»¥ä¿è¯å¤šæ¨¡å¼å…¼å®¹çš„ä¸€è‡´æ€§ï¼Œæ”¯æŒäº§å“çš„é•¿æœŸå‘å±•ã€‚è¿™æ­£æ˜¯æˆ‘ä»¬ RPA å‰ç«¯å·¥ç¨‹å¸ˆæ‰€è¿½æ±‚çš„æœ€é«˜å¢ƒç•Œã€‚</p>
<h2 data-id="heading-6">å››ã€ è·ƒè¿æ„Ÿæ‚Ÿï¼šRPA å‰ç«¯å¼€å‘çš„æœ¬è´¨ï¼Œæ˜¯ä¸æ–­çªç ´è‡ªæˆ‘çš„è¾¹ç•Œ</h2>
<p>ä»å¤æ³•å¼€å‘åˆ° Vibe Codingï¼Œå†åˆ°èŒƒå¼èåˆï¼Œè¿™ä¸ä»…æ˜¯ä¸€æ¬¡å¼€å‘æ–¹å¼çš„è·ƒè¿ï¼Œæ›´æ˜¯ä¸€æ¬¡ <strong>è®¤çŸ¥çš„å‡çº§ï¼Œä¸€æ¬¡è‡ªæˆ‘çš„çªç ´</strong>ã€‚</p>
<p>ä½œä¸ºä¸€åé«˜çº§å‰ç«¯å¼€å‘å·¥ç¨‹å¸ˆï¼Œåœ¨è¿™æ¡å‰ç«¯çš„æˆé•¿ä¹‹è·¯ä¸Šï¼Œæˆ‘æ·±åˆ»åœ°ä½“ä¼šåˆ°ï¼š</p>
<ul>
<li><strong>å¤æ³•å¼€å‘æ˜¯ç­‘åŸºï¼ŒVibe Coding æ˜¯å‡ç»´</strong>ã€‚æ²¡æœ‰å¤æ³•å¼€å‘çš„ç­‘åŸºï¼Œå°±æ²¡æœ‰ Vibe Coding çš„è‡ªç”±ã€‚åªæœ‰æ‰ç‰¢äº† Electron å·¥ç¨‹åŒ–ã€Playwright å°è£…ã€å¤šæ¨¡å¼å…¼å®¹çš„æ ¹åŸºï¼Œæ‰èƒ½åœ¨å¤šå“ç‰Œ RPA çš„åˆ›æ–°ä¸–ç•Œé‡Œï¼Œè‡ªç”±åœ°ç¿±ç¿”ã€‚å¯¹äº RPA å‰ç«¯å·¥ç¨‹å¸ˆè€Œè¨€ï¼Œè¿™ä¸€ç‚¹å°¤ä¸ºé‡è¦ â€”â€” æˆ‘ä»¬çš„æŠ€æœ¯æ ˆæ›´æ–°æ¢ä»£å¾ˆå¿«ï¼Œä½†å·¥ç¨‹åŒ–çš„æ€æƒ³ã€è‡ªåŠ¨åŒ–é¢†åŸŸçš„æ ¸å¿ƒé€»è¾‘æ˜¯æ°¸æ’çš„ã€‚</li>
<li><strong>å‰ç«¯å¼€å‘çš„æœ¬è´¨ï¼Œæ˜¯è§£å†³é—®é¢˜</strong>ã€‚æ— è®ºæ˜¯å¤æ³•å¼€å‘ï¼Œè¿˜æ˜¯ Vibe Codingï¼Œå®ƒä»¬éƒ½æ˜¯è§£å†³é—®é¢˜çš„å·¥å…·ã€‚æ²¡æœ‰æœ€å¥½çš„å·¥å…·ï¼Œåªæœ‰æœ€åˆé€‚çš„å·¥å…·ã€‚åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬åº”è¯¥æ ¹æ®é—®é¢˜çš„ç‰¹ç‚¹ï¼Œé€‰æ‹©æœ€åˆé€‚çš„å·¥å…·ï¼Œè€Œä¸æ˜¯åæ‰§äºæŸç§å·¥å…·ã€‚å°¤å…¶æ˜¯åœ¨ RPA é¢†åŸŸï¼Œæˆ‘ä»¬æ›´åº”è¯¥çµæ´»åœ°è¿ç”¨ Electronã€Playwright ç­‰æŠ€æœ¯æ ˆï¼Œè§£å†³å¤æ‚çš„å¤šæ¨¡å¼å¤šå“ç‰Œå…¼å®¹é—®é¢˜ã€‚</li>
<li><strong>çœŸæ­£çš„é«˜æ•ˆï¼Œæ˜¯å¹³è¡¡çš„è‰ºæœ¯</strong>ã€‚å¼€å‘çš„é«˜æ•ˆï¼Œä¸æ˜¯å•ä¸€ç»´åº¦çš„é€Ÿåº¦ï¼Œè€Œæ˜¯å¤šç»´åº¦çš„å¹³è¡¡ã€‚å®ƒåŒ…æ‹¬å¼€å‘çš„é€Ÿåº¦ã€ä»£ç çš„è´¨é‡ã€äº§å“çš„ç¨³å®šæ€§ã€å¤šæ¨¡å¼å¤šå“ç‰Œçš„å…¼å®¹æ€§ã€‚åªæœ‰å®ç°äº†è¿™äº›ç»´åº¦çš„å¹³è¡¡ï¼Œæ‰èƒ½å®ç°çœŸæ­£çš„é«˜æ•ˆã€‚</li>
<li><strong>å‰ç«¯å·¥ç¨‹å¸ˆçš„æˆé•¿ï¼Œæ˜¯ä¸æ–­çªç ´è‡ªæˆ‘çš„è¾¹ç•Œ</strong>ã€‚ä½œä¸ºä¸€åå‰ç«¯å·¥ç¨‹å¸ˆï¼Œæˆ‘ä»¬ä¸èƒ½åœç•™åœ¨è‡ªå·±çš„èˆ’é€‚åŒºï¼Œè€Œæ˜¯è¦ä¸æ–­åœ°å­¦ä¹ æ–°çš„æŠ€æœ¯ï¼ˆå¦‚ Electron æ–°ç‰¹æ€§ã€Playwright æ–° APIï¼‰ï¼Œå°è¯•æ–°çš„å¼€å‘æ–¹å¼ï¼Œçªç ´è‡ªæˆ‘çš„è¾¹ç•Œã€‚ä» Browser Service åˆ° Electronï¼Œä»å•å“ç‰Œåˆ°å¤šå“ç‰Œï¼Œä»å•æµè§ˆå™¨è‡ªåŠ¨åŒ–åˆ°å¤šå®ä¾‹å¹¶å‘ â€”â€” è¿™æ­£æ˜¯æˆ‘ä»¬ RPA å‰ç«¯å·¥ç¨‹å¸ˆçš„æˆé•¿ä¹‹è·¯ã€‚åªæœ‰è¿™æ ·ï¼Œæˆ‘ä»¬æ‰èƒ½åœ¨å¿«é€Ÿå‘å±•çš„ RPA é¢†åŸŸï¼Œä¿æŒè‡ªå·±çš„ç«äº‰åŠ›ã€‚</li>
</ul>
<p>å¦‚ä»Šï¼Œæˆ‘ä¾ç„¶åœ¨å¤šæ¨¡å¼å¤šå“ç‰Œçš„å‰ç«¯å¼€å‘ä¹‹è·¯ä¸Šå‰è¡Œã€‚æˆ‘ä¾ç„¶ä¼šåœ¨æ ¸å¿ƒåŸºç¡€å±‚ï¼Œç”¨å¤æ³•å¼€å‘çš„æ–¹å¼ï¼Œä¸€è¡Œè¡Œé›•ç¢ä»£ç ï¼›ä¹Ÿä¾ç„¶ä¼šåœ¨å“ç‰Œä¸šåŠ¡å±‚ï¼Œç”¨ Vibe Coding çš„æ–¹å¼ï¼Œä¸ RPA å¤šæ¨¡å¼ä»£ç å…±èˆã€‚</p>
<p>æˆ‘çŸ¥é“ï¼Œæˆ‘çš„å‰ç«¯å¼€å‘ä¹‹è·¯ï¼Œè¿˜æœ‰å¾ˆé•¿çš„è·¯è¦èµ°ã€‚ä½†æˆ‘ç›¸ä¿¡ï¼Œåªè¦æˆ‘ä¿æŒç€å¯¹æŠ€æœ¯çš„çƒ­çˆ±ï¼Œå¯¹åˆ›æ–°çš„è¿½æ±‚ï¼Œä¸æ–­åœ°çªç ´è‡ªæˆ‘çš„è¾¹ç•Œï¼Œæˆ‘å°±ä¸€å®šèƒ½åœ¨å¤šæ¨¡å¼å¤šå“ç‰Œçš„ RPA ä¸–ç•Œé‡Œï¼Œæ‰¾åˆ°å±äºè‡ªå·±çš„èŠ‚å¥ï¼Œå†™å‡ºæ—¢ç¬¦åˆå·¥ç¨‹æ ‡å‡†ï¼Œåˆèƒ½å¿«é€Ÿå“åº”å“ç‰Œä¸šåŠ¡çš„ä»£ç  â€”â€” è¿™æ­£æ˜¯ä¸€åé«˜çº§å‰ç«¯å¼€å‘å·¥ç¨‹å¸ˆçš„ç»ˆæè¿½æ±‚ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¦‚ä½•å°½å¯èƒ½ç²¾ç¡®è®¡ç®—çº¿ç¨‹æ± æ‰§è¡Œ shutdown() åçš„è€—æ—¶ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7593342203822243846</link>    <guid>https://juejin.cn/post/7593342203822243846</guid>    <pubDate>2026-01-11T11:16:23.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7593342203822243846" data-draft-id="7593342203822178310" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¦‚ä½•å°½å¯èƒ½ç²¾ç¡®è®¡ç®—çº¿ç¨‹æ± æ‰§è¡Œ shutdown() åçš„è€—æ—¶ï¼Ÿ"/> <meta itemprop="keywords" content="åç«¯,Java"/> <meta itemprop="datePublished" content="2026-01-11T11:16:23.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Assby"/> <meta itemprop="url" content="https://juejin.cn/user/2496307079162410"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¦‚ä½•å°½å¯èƒ½ç²¾ç¡®è®¡ç®—çº¿ç¨‹æ± æ‰§è¡Œ shutdown() åçš„è€—æ—¶ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2496307079162410/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Assby
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-11T11:16:23.000Z" title="Sun Jan 11 2026 11:16:23 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    4
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€</h2>
<p>åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿçš„æ»šåŠ¨å‘å¸ƒæˆ–é›†ç¾¤é‡å¯è¿‡ç¨‹ä¸­ï¼Œè¿›ç¨‹å…³é—­çš„è€—æ—¶ç›´æ¥å½±å“äº† CI/CD çš„æ•ˆç‡ã€‚åœ¨å¤„ç†æŸè€æ—§ç”Ÿäº§é¡¹ç›®æ—¶ï¼Œæˆ‘ä»¬å‘ç°è¿›ç¨‹å…³é—­è€—æ—¶å¹³å‡é«˜è¾¾ <strong>325s</strong>ã€‚æ’æŸ¥å‘ç°ï¼Œæ ¸å¿ƒç—›ç‚¹åœ¨äºä¸šåŠ¡çº¿ç¨‹æ± æœªèƒ½åŠæ—¶å“åº”ä¸­æ–­ï¼Œä¸”ç¼ºä¹å¯¹å­˜é‡ä»»åŠ¡æ¸…ç†è€—æ—¶çš„ç²¾ç¡®è¯„ä¼°ã€‚</p>
<p>æœ¬æ–‡å°†ä»‹ç»ä¸€ç§åŸºäºåˆ©ç‰¹å°”æ³•åˆ™ç«‹çš„å¯å‘å¼é¢„æµ‹æ¨¡å‹ï¼Œé€šè¿‡ç²¾ç¡®æ§åˆ¶ <code>awaitTermination</code> å‚æ•°ï¼Œå®ç°çº¿ç¨‹æ± çš„ä¼˜é›…é€€åœºã€‚</p>
<hr/>
<h2 data-id="heading-1">ä¸€ã€ ç†è®ºåŸºçŸ³ï¼šæ’é˜Ÿè®ºä¸åˆ©ç‰¹å°”æ³•åˆ™</h2>
<p>è¦ç²¾ç¡®è®¡ç®—çº¿ç¨‹æ± çš„æ”¶æ•›è€—æ—¶ï¼Œæœ¬è´¨ä¸Šæ˜¯é¢„æµ‹ä¸€ä¸ªç¨³å®šæ’é˜Ÿç³»ç»Ÿçš„æ¸…ç†å»¶è¿Ÿã€‚</p>
<h3 data-id="heading-2">1. æ ¸å¿ƒå˜é‡å®šä¹‰</h3>
<p>æˆ‘ä»¬å°†å½±å“è€—æ—¶çš„å› ç´ æ‹†è§£ä¸ºä¸‰ä¸ªæ ¸å¿ƒæŒ‡æ ‡ï¼š</p>
<ul>
<li><strong>å­˜é‡ä»»åŠ¡ (Load)</strong> ï¼šé˜Ÿåˆ—ä¸­çš„ä»»åŠ¡æ•° (<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Q</mi><mi>u</mi><mi>e</mi><mi>u</mi><mi>e</mi><mi>S</mi><mi>i</mi><mi>z</mi><mi>e</mi></mrow><annotation encoding="application/x-tex">QueueSize</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"/><span class="mord mathnormal">Q</span><span class="mord mathnormal">u</span><span class="mord mathnormal">e</span><span class="mord mathnormal">u</span><span class="mord mathnormal">e</span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mord mathnormal">i</span><span class="mord mathnormal">ze</span></span></span></span></span>) + æ­£åœ¨æ‰§è¡Œçš„ä»»åŠ¡æ•° (<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mi>c</mi><mi>t</mi><mi>i</mi><mi>v</mi><mi>e</mi><mi>C</mi><mi>o</mi><mi>u</mi><mi>n</mi><mi>t</mi></mrow><annotation encoding="application/x-tex">ActiveCount</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal">A</span><span class="mord mathnormal">c</span><span class="mord mathnormal">t</span><span class="mord mathnormal">i</span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mord mathnormal">e</span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="mord mathnormal">o</span><span class="mord mathnormal">u</span><span class="mord mathnormal">n</span><span class="mord mathnormal">t</span></span></span></span></span>)ã€‚</li>
<li><strong>å¹¶å‘èƒ½åŠ› (Parallelism)</strong> ï¼šçº¿ç¨‹æ± å½“å‰çš„æ´»è·ƒçº¿ç¨‹æ•° (<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mi>c</mi><mi>t</mi><mi>i</mi><mi>v</mi><mi>e</mi><mi>C</mi><mi>o</mi><mi>u</mi><mi>n</mi><mi>t</mi></mrow><annotation encoding="application/x-tex">ActiveCount</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal">A</span><span class="mord mathnormal">c</span><span class="mord mathnormal">t</span><span class="mord mathnormal">i</span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mord mathnormal">e</span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="mord mathnormal">o</span><span class="mord mathnormal">u</span><span class="mord mathnormal">n</span><span class="mord mathnormal">t</span></span></span></span></span>)ã€‚</li>
<li><strong>å•ä»»åŠ¡è€—æ—¶ (Cost)</strong> ï¼šè¿‘æœŸç»Ÿè®¡çš„å•ä¸ªä»»åŠ¡å¹³å‡å¤„ç†è€—æ—¶ (<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mi>v</mi><mi>g</mi><mi>T</mi><mi>a</mi><mi>s</mi><mi>k</mi><mi>T</mi><mi>i</mi><mi>m</mi><mi>e</mi></mrow><annotation encoding="application/x-tex">AvgTaskTime</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="mord mathnormal">A</span><span class="mord mathnormal" style="margin-right:0.03588em;">vg</span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mord mathnormal">a</span><span class="mord mathnormal">s</span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mord mathnormal">im</span><span class="mord mathnormal">e</span></span></span></span></span>)ã€‚</li>
</ul>
<h3 data-id="heading-3">2. é¢„æµ‹å…¬å¼</h3>
<p>æ ¹æ®åˆ©ç‰¹å°”æ³•åˆ™çš„å˜ä½“ï¼Œæˆ‘ä»¬å¯ä»¥æ¨å¯¼å‡º <code>WaitTime</code> çš„è®¡ç®—æ¨¡å‹ï¼š</p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>W</mi><mi>a</mi><mi>i</mi><mi>t</mi><mi>T</mi><mi>i</mi><mi>m</mi><mi>e</mi><mo>=</mo><mfrac><mrow><mo stretchy="false">(</mo><mi>Q</mi><mi>u</mi><mi>e</mi><mi>u</mi><mi>e</mi><mi>S</mi><mi>i</mi><mi>z</mi><mi>e</mi><mo>+</mo><mi>A</mi><mi>c</mi><mi>t</mi><mi>i</mi><mi>v</mi><mi>e</mi><mi>C</mi><mi>o</mi><mi>u</mi><mi>n</mi><mi>t</mi><mo stretchy="false">)</mo><mo>Ã—</mo><mi>A</mi><mi>v</mi><mi>g</mi><mi>T</mi><mi>a</mi><mi>s</mi><mi>k</mi><mi>T</mi><mi>i</mi><mi>m</mi><mi>e</mi></mrow><mrow><mi>A</mi><mi>c</mi><mi>t</mi><mi>i</mi><mi>v</mi><mi>e</mi><mi>C</mi><mi>o</mi><mi>u</mi><mi>n</mi><mi>t</mi></mrow></mfrac><mo>Ã—</mo><mtext>å®¹é”™ç³»æ•°</mtext></mrow><annotation encoding="application/x-tex">WaitTime = \frac{(QueueSize + ActiveCount) \times AvgTaskTime}{ActiveCount} \times \text{å®¹é”™ç³»æ•°}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal">Wai</span><span class="mord mathnormal" style="margin-right:0.13889em;">tT</span><span class="mord mathnormal">im</span><span class="mord mathnormal">e</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1.355em;vertical-align:-0.345em;"/><span class="mord"><span class="mopen nulldelimiter"/><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.01em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">A</span><span class="mord mathnormal mtight">c</span><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight">i</span><span class="mord mathnormal mtight" style="margin-right:0.03588em;">v</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight" style="margin-right:0.07153em;">C</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight">u</span><span class="mord mathnormal mtight">n</span><span class="mord mathnormal mtight">t</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"/><span class="frac-line" style="border-bottom-width:0.04em;"/></span><span style="top:-3.485em;"><span class="pstrut" style="height:3em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mathnormal mtight">Q</span><span class="mord mathnormal mtight">u</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight">u</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight" style="margin-right:0.05764em;">S</span><span class="mord mathnormal mtight">i</span><span class="mord mathnormal mtight">ze</span><span class="mbin mtight">+</span><span class="mord mathnormal mtight">A</span><span class="mord mathnormal mtight">c</span><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight">i</span><span class="mord mathnormal mtight" style="margin-right:0.03588em;">v</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight" style="margin-right:0.07153em;">C</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight">u</span><span class="mord mathnormal mtight">n</span><span class="mord mathnormal mtight">t</span><span class="mclose mtight">)</span><span class="mbin mtight">Ã—</span><span class="mord mathnormal mtight">A</span><span class="mord mathnormal mtight" style="margin-right:0.03588em;">vg</span><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span><span class="mord mathnormal mtight">a</span><span class="mord mathnormal mtight">s</span><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span><span class="mord mathnormal mtight">im</span><span class="mord mathnormal mtight">e</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span/></span></span></span></span><span class="mclose nulldelimiter"/></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord text"><span class="mord cjk_fallback">å®¹é”™ç³»æ•°</span></span></span></span></span></span></p>
<blockquote>
<p><strong>æ³¨</strong>ï¼šåœ¨å·¥ç¨‹å®è·µä¸­ï¼Œè€ƒè™‘åˆ°æ‰§è¡Œ <code>shutdown()</code> åæ´»è·ƒçº¿ç¨‹æ•°å¯èƒ½åŠ¨æ€å‡å°‘ï¼Œæˆ‘ä»¬å¼•å…¥ <strong>1.3 å€çš„å®¹é”™ç³»æ•°</strong> æ¥è¦†ç›–æ³¢åŠ¨ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-4">äºŒã€ è½åœ°å®æˆ˜ï¼šä¸¤æ®µå¼ä¼˜é›…é€€åœºç­–ç•¥</h2>
<p>é’ˆå¯¹ç”±äºâ€œæŠ€æœ¯å€ºâ€å¯¼è‡´é•¿çŸ­ä»»åŠ¡å…±ç”¨æ± çš„æƒ…å†µï¼Œæˆ‘ä»¬ä¸èƒ½ç›²ç›®ç­‰å¾…ï¼Œéœ€è¦è®¾è®¡åˆ†é˜¶æ®µçš„å…³é—­é€»è¾‘ã€‚</p>
<h3 data-id="heading-5">ç¬¬ä¸€é˜¶æ®µï¼šæ¸©æŸ”é€€åœºï¼ˆSoft Shutdownï¼‰</h3>
<ol>
<li>è°ƒç”¨ <code>shutdown()</code>ï¼Œæ‹’ç»æ–°ä»»åŠ¡æäº¤ã€‚</li>
<li>æ‰§è¡Œ <code>calculateWaitTime()</code>ï¼ŒåŠ¨æ€è·å–å½“å‰æ± çŠ¶æ€å¹¶ä¼°ç®—å‰©ä½™è€—æ—¶ã€‚</li>
<li>è®¾ç½® <code>awaitTermination(calculatedTime)</code>ï¼Œä¼˜å…ˆæ¶ˆåŒ–çŸ­ä»»åŠ¡ã€‚</li>
</ol>
<h3 data-id="heading-6">ç¬¬äºŒé˜¶æ®µï¼šå¼ºåˆ¶é€€åœºä¸æ•°æ®ä¸€è‡´æ€§ï¼ˆHard Shutdownï¼‰</h3>
<p>è‹¥ç¬¬ä¸€é˜¶æ®µè¶…æ—¶ï¼Œè¯´æ˜æ± ä¸­å­˜åœ¨â€œé¡½å›ºâ€çš„é•¿ä»»åŠ¡ã€‚</p>
<ol>
<li>è°ƒç”¨ <code>shutdownNow()</code>ï¼Œå‘å‡º <code>Thread.interrupt()</code> ä¸­æ–­ä¿¡å·ã€‚</li>
<li><strong>ä¸­æ–­æ£€æŸ¥ç‚¹</strong>ï¼šåä½œæ¨åŠ¨ä¸šåŠ¡é€»è¾‘å®ç°ä¸­æ–­çŠ¶æ€è½®è¯¢ã€‚</li>
<li><strong>å…œåº•æ“ä½œ</strong>ï¼šåœ¨æ•è· <code>InterruptedException</code> åï¼Œæ‰§è¡Œé¢„è®¾çš„æ•°æ®ä¸€è‡´æ€§ä¿è¯é€»è¾‘ï¼Œç¡®ä¿é•¿ä»»åŠ¡çŠ¶æ€å¯è¿½æº¯ã€‚</li>
</ol>
<hr/>
<h2 data-id="heading-7">ä¸‰ã€ ç›‘æ§ä¸é¢„è­¦é—­ç¯</h2>
<p>è®¡ç®—ä¸æ˜¯ç»ˆç‚¹ï¼Œ<strong>å¯è§‚æµ‹æ€§</strong>æ‰æ˜¯ç¨³å®šæ€§ä¿éšœçš„æœ€åä¸€é“é˜²çº¿ã€‚</p>
<h3 data-id="heading-8">1. å…¨é“¾è·¯ç›‘æ§</h3>
<p>æˆ‘ä»¬åœ¨çº¿ç¨‹ä»»åŠ¡ä¸­åŸ‹ç‚¹ï¼Œè®¡ç®—å¹³å‡è€—æ—¶ï¼Œå¹¶åœ¨ <strong>Grafana</strong> é¢æ¿ä¸Šå®æ—¶å±•ç¤º <code>calculateWaitTime()</code> çš„é¢„ä¼°å€¼ã€‚</p>
<h3 data-id="heading-9">2. åŠ¨æ€é¢„è­¦ä½“ç³»</h3>
<ul>
<li><strong>é£é™©é¢„æµ‹</strong>ï¼šå½“ <code>calculateWaitTime()</code> è®¡ç®—å‡ºçš„æ—¶é—´å¼‚å¸¸æ³¢åŠ¨çš„æ—¶å€™ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è§¦å‘å‘Šè­¦ã€‚</li>
<li><strong>åé¦ˆé©±åŠ¨</strong>ï¼šé€šè¿‡<strong>é’‰é’‰ç¾¤é¢„è­¦</strong>å‘ŠçŸ¥å¼€å‘äººå‘˜ã€‚è¿™ä¸ä»…èƒ½é¢„é˜²åœæœºè¶…æ—¶ï¼Œæ›´èƒ½åå‘æš´éœ²ä¸šåŠ¡é€»è¾‘å˜æ…¢æˆ–çº¿ç¨‹æ± è´Ÿè½½è¿‡é«˜çš„éšæ‚£ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-10">å››ã€ æ€»ç»“ä¸æˆæ•ˆ</h2>
<p>é€šè¿‡è¿™å¥—åŸºäºæ•°å­¦å»ºæ¨¡å’Œå·¥ç¨‹é—­ç¯çš„æ–¹æ¡ˆï¼Œæˆ‘ä»¬æˆåŠŸå°†è¯¥è€æ—§ç³»ç»Ÿçš„å…³é—­è€—æ—¶<strong>ä¸‹é™äº†çº¦ 80%</strong> ã€‚</p>
<p><strong>æ ¸å¿ƒç»éªŒï¼š</strong></p>
<ul>
<li><strong>æ•¬ç•é£é™©</strong>ï¼šé¢å¯¹å†å²é—ç•™ä»£ç ï¼Œé€šè¿‡â€œä¸¤æ®µå¼ç­–ç•¥â€è€Œéç›²ç›®é‡æ„ï¼Œæ˜¯ç¨³å®šæ€§çš„æœ€ä¼˜è§£ã€‚</li>
<li><strong>é‡åŒ–ç®¡ç†</strong>ï¼šåˆ©ç”¨åˆ©ç‰¹å°”æ³•åˆ™å°†æ¨¡ç³Šçš„â€œç»éªŒæ—¶é—´â€è½¬å˜ä¸ºâ€œæ•°å­¦é¢„ä¼°â€ã€‚</li>
<li><strong>äº‹å‰æ²»ç†</strong>ï¼šç›‘æ§ä¸ä»…ä»…æ˜¯ä¸ºäº†çœ‹ï¼Œæ›´æ˜¯ä¸ºäº†é€šè¿‡æ•°æ®é¢„è­¦æ¥å¿è¿˜æŠ€æœ¯å€ºã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-11">ğŸ’¡ ç»“è¯­</h3>
<p>çº¿ç¨‹æ± çš„å…³é—­è™½æ˜¯å°äº‹ï¼Œå´ä½“ç°äº†å¼€å‘è€…å¯¹ç³»ç»Ÿç”Ÿå‘½å‘¨æœŸçš„æŒæ§åŠ›ã€‚ç²¾ç¡®è®¡ç®—ä¸ç›‘æ§é—­ç¯çš„ç»“åˆï¼Œæ˜¯é€šå¾€é«˜å¯ç”¨ç³»ç»Ÿçš„å¿…ç»ä¹‹è·¯ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Java ç»„é•¿å¹´ç»ˆæ€»ç»“ï¼š25 å¹´æå‰¯ä¸šåªèµš 4kï¼Ÿ]]></title>    <link>https://juejin.cn/post/7592431064976949263</link>    <guid>https://juejin.cn/post/7592431064976949263</guid>    <pubDate>2026-01-07T14:42:54.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592431064976949263" data-draft-id="7591942733366607906" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content=" Java ç»„é•¿å¹´ç»ˆæ€»ç»“ï¼š25 å¹´æå‰¯ä¸šåªèµš 4kï¼Ÿ"/> <meta itemprop="keywords" content="åç«¯,ç¨‹åºå‘˜,Trae"/> <meta itemprop="datePublished" content="2026-01-07T14:42:54.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æå‰é€€ä¼‘çš„javaçŒ¿"/> <meta itemprop="url" content="https://juejin.cn/user/465848660928872"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
             Java ç»„é•¿å¹´ç»ˆæ€»ç»“ï¼š25 å¹´æå‰¯ä¸šåªèµš 4kï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/465848660928872/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æå‰é€€ä¼‘çš„javaçŒ¿
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-07T14:42:54.000Z" title="Wed Jan 07 2026 14:42:54 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-07
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    906
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#2b2b2b;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(159,219,252,.15) 3%,transparent 0),linear-gradient(1turn,rgba(159,219,252,.15) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin-top:35px;margin-bottom:10px;color:#4dd0e1}.markdown-body h1{font-size:30px;text-align:center;position:relative;width:max-content;margin:0 auto}.markdown-body h1:before{position:absolute;content:"";z-index:-1;top:-20px;height:100%;width:100px;left:0;right:0;margin:0 auto;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADsAAAA6CAYAAAAOeSEWAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAABkLSURBVGhDtZoHnJ1llcbP3Om9ZiYzmfSQhCQQIbRQVQKI9CYC68qKriJK0UXcZRcINqStIoiIqKCi1NACQihBWiCkkJ5MJlMyvd7p7d759v989/sy34yTbIj48Atz71ff855znvOc971xDrB/EtoGI7a9Z8Aq+wZML0mNj7dE95NZ1OKsj1dHo1GbnJpss9OTbWJyonvun4VP1Njuoagtb+m0it4By0iIt8LEeMvkr8XFWcfgkA1gYDLf47i2PzpsyU7UspKSLDoctagTZ7Vc08MzClMS7awJ2ZaflBB78CeET8TYla1dtrKt2w5KS7YCDGzEoz2RqKUmhGw6x2bhuXyOp2BoRXef1Q1E7Lj8TIsMD1sbxu1kcnYSAX1810RMTUmyMB7f2j1gC7NS7byinNiL/kH8Q8a+2NRh77b32El56VaPAe0YeGR2mh2bm+FdMRqP1rbZe+3dFsHT35qcb/Oz0rwzo7Gxs9feYPLS4kM2h8lawee5hPmlJXneFQeGAzJ2F564v7rFzi7Msu3d/Xgjzq5g8ArX8VCNN2vJ28daey0zZJabmGCLslP5HOf+Oygr3UzDGOf+JxrauXfQjslJt+dbuuyMgiwmk+sPAB/b2Lt2NdoMZnuY21qHIvbvUyZ4Z0ZQiXGrWjvsmPxsK4R0nmHA8ZCTQvxVQn5eRipklIBtcVbV1WtHYsjati47ZWKuTUpP9Z4yGk/xDBGe3v1mW4/dOrvYO7P/2G9jRSjf31FnXyaUXiB8r51WaJkM3kcfOSa2FR6qarIenooTLQHPLcC4mYThyw1tVpKWYlVERlZ8nC3Oz3Jzdn1nn5uvQ8OOHYvhR/CvsqffJbkCkZTvcYZ6Z0WTfTovw5Y1dtjXp+TbFPhgf7FfxpYxuMfr2uwo8rEtMmwXF+d6Z8wGmIR2PLyjo8cqOFffP2SLGexJEJCP9R29thkPXlpa4A5Y3w/jmuVNYYwO2QkY7WMtz3mVcE1hkualJdmSolzX8GnpKd4VZq80d1o7zN0RdWxGaqItgbn3B/+vsasgh/UMNBOvzYMZDxtDKp289KGaVguFQvb1yQWWwuB97GaSXqUUnVaYbSUwrDCEBz/C2CM8EhNrP13fbkeSh3OJgCAe2N1CWXKsGOc6TOr5U4q8MwYhDtkTda02MyPN+nnGBQEH7A37NHYz5KOZVv08qyjbSseEzKauPnsMj98wc6Ibcj5UUv7M8QWZTE52jEwGOVaD8U1Dw1YNWX0qM8VKyb80L/TrOPYOzH4KBJQTrK8M7+7KZjuM63sHBt17FubGoibCuf+tarWFGUmuwWeT8/vCXo1tZOYeZcazCaez8MwEzzM+HqhqtiJI5twxL1jeGLYk7jmKMF1JOCbg6Qj5nAdRqX7q3BYm8VAmQvW1lfcMc58IT95uIA3q+gftrDHPXUXJWkVEHJme5Bp5UmHsvIZ/O3l8ECE/FWcsItX2hr0ae8O2Wjs+J43QTbOZzGYQ/7Wtxq6eXjRK3r0By4YJ6Ty8EiYSJqcm2eGeV4Pox/ANENJR49RiEdfqcLflUJrEBZqgxYHrBjn2ExFURqKdVETN9YirJxKxR2rbrYeQv5ISmB6IsiDGNfZGWPeMgkzr58xnPaJ5p6XDZPKz4T77wayJ7jGhhXLwanOHTWBgq5n5q6YUwNJ7l3kKcRl7OJ7fF56l1GzvHbSD8dghTPi0wIRfv6XafjJ3ssv0PnZQ7nZx/etwzO1zJ3lHR2OETTw8x0tOx1AN3De0D7YV+63oGthjaJQ5Ur7eVVZjcdGInUyuaT73ZWg3efV8fZs7cc2E777Qi5eunVbghvPPymrt/krKGfcLd8ybYjdxrK6333Z09rjHZkNuLYzz0uIc+xWCZzz8nbHbe4dsY1e/XUOY+nimvtUaSazv4jXhaQasSbmYmpuenGwHZ8TKggSEQm08rMD7ahBOoExcMqXQegjnZ+CEvaEa1ZQUQkt39dj0zDS7krq+ARmpdws/nlNqD9WFbWN7l5u3wr9MyrcXKUsqWy3jTOaoML4DdaQ83YIoT4VYpEXvYQZLmbX5SLohBrgOj186Kc/iKTUPUhq+Rrm5ekOl3TWv1Mr6hqwbY0VOQXwEo+Moq4Z47q5qsU489G944LyJOW4LOLZOKtT/iI6+nGe/0dhuEd4ltj2NmiuCU4hnk5fHIi7+RK4uTEu0e+s7rAiRcw1CYy3OejvcYz+eXeI9MYY9nu3lYZl0KavJJ7Vjibzgjp319rUZE20j7CkJqFr5JQYgQ39f3eQaKpQk0afy8nl4uBzvjUUTRk7k3iebOm0pabDiyFn2XGu3dRME41CGVeBVqSiVnc6hIUpekp1VjHLDSOEcQlui5W/U8C7IKREjv1Gabw3wRwUTvpv7jybPtzHmIPZ49q6KRjuccqBQVCOtGvqXhrCFUUXJzOYSHt7Kw5Ix9H08dSje1o1JyL73IYXpEMmE5CRbw6wuykx2pR+Pd6/J4JpLiJKV6N9OnrcQNfQ0Zem6qQX2MmFXyWTE+DMO0kGx4e08DEjnXbsYuOq7niHB8jdY/wQ8Srm2XCZZUrOakF1CY5EKX0h93Tu/1J4kRdbDMT8MamgZK9xe3uDcvrPe++Y4f61rcZr7B53rN1c5N2ytcV5rCrvHt3T2Og19g+5nH7dvq3bqunr4NOwgK2MHA1jeEDuG7HNuLmtw7qpocl5t6nCPvdTQ7v4N4u3WTqeyu9cZHIo4f6lqdFoHh7wzMbzDeeGv3Hvzjlrnh2W1zofhHuftxpFn3VFe7zxS0+p0DlKVPbhhvBxhvwiFMgfP+mjHA08gEC4pybeLyK1iZldh8zC5VJQyUl8l59KZ0WJk2xaiYWxNrkXXJhA8r3PvZRur7ZZZRfadaRPsfiTmX9HGajC2tXd6V8dQTMhX0h8rNdJx9Ra8F8SbRNLzhPRnJmTZIUTYueTyWxyr7uv3rjC3OkzE8495oS+4xq6D5WoI0bO5WVCOSerl8rIeBrOI/Hkaw6ME5W1zSuzx2la3CRdWi3zIG+FDBvUp9LMgI/vggUmE7KkT81yGvOOgEYa/aUahhRAF5xLec3OzbF1r2O17BbVxIi7hzJIC64IYhXdJA+nh/5xVbOmE9J0QqjSxWk0pp37M2YEtgjS8GpimACu7xkqxdKJ6fEXyYl2Lre0ZtC8yELVewtWUnbfCPIhrvgDFz8WI5yhJKgcnFMZWEFrwhgzo5uWDDDA1oGSOzcu0xfx7vTlsv6posIMpJ6cGWPiw/BxL4PU7vbrpjgf8bMdu5OYwOdhm83DARUSa0ELknYIeEAaILuWxlhGa0M8+EuJCrpJT+ymENhN60pXBxa3LZ5TsucnlGaCmIEQ4Evru91yuz0xMtKaeXluI5zdh9Mm8vAlBn4aR07X64EH3vEKdXQkZJXPP/JxMvNRpLxEtHZ5RQgmNewnpouvVTpYTHdfOnmy5kFUGnpRTfEhXD9DiBdFFJB0/YWS9aj6pmc89r0BaQmgTRkgI+EsdKsYasJZOBF+QqTH474NK7LbyBvf7W+RgOxNyxfQY2/2hrp2+NkroxrzrQ55fSZkpJIa28znCgF6rb7H1hOSslATyvNflAh9pvHcX3lVE/Ya8FjTJIexa2Rq77nfU96unTnD7aME3+TAm6BFKYrPnqCNIqV5sq0ZGCiEV+Db+qWMQqpFgb5KPx48R6omeDl2EuP9DTYt9iGA/f1KBS1w/La+H4ktsSmLItvZHXLUkrCeflVtJ9DVVg1H7+sxiGvVM975rZpfabuqHVhuP5F1vewav5O8GamUe91yDanoYw47FWzC929O+DJnKA2opFY1Rjru5CE7kOcO0jJtQVUIynzuZEMeb+1CEOFXN8iFSGeRpCm1BTlJxVg49Azm819SO7Bu0axEbwn27GuxMck+TMQHDP8fn48gfDVIL4R8xKVPJ73MQBUIfA/Z54LMw5vmlE+w+VFo2A78X/SsyPA/RMD0z3e2qVLtfo7aeBslpMX0N0TEnLcUlKym1jyBFqSohmYntI5enBhYB9CY/2kNarhwJhNiMtRGyWnkQdKaCFyQwgydjyNUw4VchKxXv2/DoKdC+lkQbCX1NlKCGvJiBJkSGbCus6jfo4yGBNySgr+u7e20BCsxdVAcFlJ/tHd32+cIsNxSXUULUUx+dg/d47g7OPYFw2MxkSuyMwLHVTI6PBN6dS8Sppw45zHJSgDXV3aQzmz40Z6fDgBfiAXU0uZxby2zejee+j3eltoQMzhV6qSBogXwrEXDj7ElWxUQ8RrnSaoU0dxIsKaiMvMykXTu90NqJsGHP4z78SdLigUrLKat32nFwy/E07pfDFRdQ/7N5r57pQ1482uvWhMGhQcviGkVrKDUp0ToCxfhQal5n4Hs/g1jOgH4LWdwFOd1b1WzHET4vLZppv+Czjxo840OrDlG8jAJzv2tp5mLK1dsU/lfIOeWy5NxFxfl2BoYImlQtx9QF6mJRQKBsQYYuO2yaLYPBUXvu/VqYPxtHhNy7Y4hCkNLGPtKSklzCVKSHtMQxcqm5Kw1DhI2PTGZtcGDAvoLQ/u7MifYtWFBlxz2H9zo8RkwKzC5UYiG+p44ccqE62YAxLeT/TOpf8MXx8Qk0IJFRY1Go+viQVJpE5Ehjf49xfAZeqGIy/7us3nqxwQfCkjZypPxobVr/6YpQHIalUvuCyEwbSXC9PC8QnkFcXlrgLpoLIhIfKuaqlQkYIAwQnr/f3eyu7KttOw2lNpv8/BPHyjzVNER3o72gvEBKqRMTflndbP8BMweRDyeciEj5bFayFXqTLzheivgYJC0jwzwHa0MDDEotm48ndze5BBBElAnxxcRYHAFh3FfZaA9UNRmC354kNwUx8eHkmVj5dcTE5ZMnuEyr1QqlhtaJLuOYZv4v3KNo0TKrGPUZ1NILPKuWcvVn5Trv10SMB6h0j/ARMnlOuafCBIfnSWEx/Raif3HDzofYMM31dOyY9LBaLK3TjoX2fEqT4+2qaUVWSTQvyM6wC8nNJyEetXIyuLKrx04P7MKNnbJZlKUtNAIHo7i2dA/YU3Vtdi5l6jCepXy8hOedSSSsI8/HQg5Q+gxTKXwkMHkbESo+hjG0lbRRzQ3Fc5LOzDuFhs3Ptumpie7ilRDhlEJOq/hjsZljCxjkt7fWuPS/EekpXMggJQIk0G+eN9Xu2VmHWIkJe0nJRN4ptBBit2yutG9ML7J1DHAxebiAMrZ4VZlduqGS8I2tJc2iborUxmIN79c+kTovFxivPvrcSaP3n7RSKYTUmKt4N3rMOcw4JOneD3sP956jNaMglIeTER5Xbdlt15Tm2W10NEsYrA/N5JLCHHsR9tSqwxq08G3bqm1ZTbOtagnbo6SLvH/VzBL7W7jPzqFea0LmMLFzUuLtdwumuO3i1Vtq7OK15Xgw3l1PDmIXak+6QBEkvB9YJIzBcc/L20JIYaSZ/qAzVm5Ut4oowk3QehC+N3xo/1wTqt7zsYawfX9no9XjqdPXVLhrwyo/wucJYQkE1e4j8rLcBuHUItQQKqgMXb6LGvxFQlXw33AdZLR0V5P9Fr29lP73scNnosoyvdWPv4fPJ+uJrLVtMakqaL1M1cTvv0OLIZE6wk2a2IcIRUQh+DaejpdcXepBa7bKDRGM9PIVxTl2EwarZ72rooVuY4RQtMypdk6e1lLLehhY2lt7QEd7WxlCDvdIli6E9B4+ZIodmZEMccUGqgiZOqru9tkR3iJ8nCcXRWRZCSPMLPEjlx2LjQL1OM5qKAm+vhSuRqSfV5Ttrg8FdWcrnhMqCTex7DEM6qTsVEuM1+8hovaHQ6e6a1Fz0xLd3nUt4ToWWuzWNkhcoAIIjUx2ZpxjLzWF9+SYmngR1lok4TEoJxGfuijhI/7OICoFmadl2llcL9b1oRVJtbD+JLlv1KrhHG5811t9ELbzgk14ICUwqE+TDzftqHPz98vUSy3jSIwP8dCpkNqLDPTx+rArz4T5qLG3G2PrvJKKPoLBWE501NC3ilUX5mVjVIb9nIbgWcpPMiSXjbcL8K62UkR86m1/yfkSeMaHFuK04X0CE3J6SWzFUxw0BSNHlSzi3RmIRJwHq5udO3c16quLp6sbnffbupxbt+12vzOrzuvNHc7ycRbIxuJHgYU7YSASdQgxp7qz2ynv6HJeqW91doa7nLruXof+17sqhhu31Xif9o7HalqczV29Dnrb/f5EXZvzdH27U98/6LR5i3N0UM5zjHU71/lwjRWWltU5CAIn7F1MqLp/r9hQ5RoaxG+qmrxP4yNKcfsFLwuiprffeb2l03m2scO5h3Or2rudzjGrhk8x4Cqu2xcexilBvNEcdi5Yu4tKF3Ue4tzPy+td5/1md4tzw5iJ27NuXEYobYUdlb8z6GTWkdxaCvk2zHjd5mpKQ459mv5TkAp6mQb9Aq9HHQ8S6mrZnuc6vUG6WHusIhCJGNXl9byvnJyaiE7+Eoz8c5TYNQiUveENGpJpcIJ+biS8R0+rlcazGNs7pKB+zPLTOSX2KNWhlDAf4r2Spj72JORB5OyHULX+dlD/FOky/HFy5ygYU0sey/i8moeqdunXK1qC3RuaMOYHlI/raQMl3M+EeTV5WxD3Km8a8PkM8nr648sQ9+esKbf5e/nxiKBfAOQkxbv3SU9LYmqPV9V/Pn+V20VwTyVjTqCI6edEQUOFUXs9WmfSll8DyX2dt7GlnwkswaM3l9XZ0oNK3MTXbxpOV2sGk69s6XCJw4cY8KbyRrt9TrHt7Bm0rRBQe1+fHUWNfaapU0KbqxzbORC1M/LS3dJwIl3KOrwykQG/E+61q+isgniztdOKqNOziDgZqZIzFwPvqGiyg5NCtoCqoG5NxHhPZTOsnORulKskjoKMDeLuXQ3OmnC3syxARFXdfc57LR3OrdtrvSOOs55rnqhtcdoGhpxHdjc5EfJUuHZTlftX+G15rXPlhkrnLe59F7Lz8VGHdg8c5y2OLeMZ126qduq9XC3v7nd+FchLvYPJd15gPCu8XQnh/qpm59WGVudZzvvQO97kXTcGxhnEuJvR39tWY8cwK4uhcikk4a3Gdstg9l5B2t0wfaTdWkEou5vCPOV5PH73vFL3+DfXltnh6OxjkJD6Wd5F3g88tMe6CW/7YmI99VIL4u0oqUK8ocW4d8hFrXMVoOQU8s3U97MnjvDD/XRYkyhHM1MT3GVZQR2Tdv70U8EbA5vlo+CaPAaaSWoZXm50otGodxQ6L6txGKxzw5ZYORrBsPPrykZKQIy1n8bTjwb2fO4Te3ue7x6KOKvaYns1wtIddd4nx3mwot55qyl2360cp81zurg+CGqwU8v4/Of5uAVvPgObrwvHomY8jOtZ4fXWLnefdHVXv9044+8ZklCx75DXwcV1Sb27y+vInUQEuVYSaMgRJYfAwtoj0raFxIUW1A8nz35f02qLc9Lc9lG7CBkwtUR7bf+A+5uL6ehnH9Lat+5sIEfj3Cbj3NKRvP7Rjlo7FSmqavKvpSP8MRZ7NVbQYLSkqlC9ZW4sPH18gBTcORjrhMWmQWzFmK2UsvO90qQ1oZcI8UhkCLZPtRqMy0NirobAvjIpb4/sW06qKGyPR2oGIdlazjOOTk+kLYzaaYGSp63Wz6HsXsQ51wd+LTAuZOy+8GBNq7tF+IOdDU4kENJthNID5YRafZtzZ3mDs9LbRgzixcZ2l1h83OKFbDmEd0/FiFp7DWHgp0AQGzq6nf8hPF+oa3EehOz0ziCWcm4NpBRMhX1hn571oR9wqVVSDVPtUi32sQ0vbu7scZdY9aOt2ZSEL9BEBIW+dv20AKDd9/ep09oimYqHpyImkKDuRllS4PrlHNuIqDmCJmNJQba7q1joEaUQJuR/WdXsLrJrq/L6cdJsPOyXscJ7GLKqo8cOpqhrO//yQG6oS3kZwS9xPkRB3wi7diFMtDN+PLk5m1ath+8f0Fy80dbjhvVXub+U5mEqeal27UP+dWpPlknNxW79Ak6/7Tg3UMOF52j1xA1qK7Trd6nXC+8P9ttYQcumIonLSnJtBdJNa77axw1C2x3qR4Wqnj73x9f6MbV+CCYFBZO6y51aSh3gzVrsmwzJnULEbCJC1oZ7vIZ/9Iqmfvn2u5oWO5n8fApxcuWUApum5diPgY9lrA9EtvUNOzYf8vqAcJPsU5iOh7XtXQgt2uZhjKU2amF7HQyfEYWcZk5yQ1RDKNrLcq02k/9IGmldrB93KiokPw8EB2SsoKWXO5FmxXhlckqi+3vEUvLqwok5PHVkIWAszlqzy1p54zuLpnPZ3q9bod08JlLSb5DrNxDm38Sbvsg5EBywsT7oH+3XNW3uasGirFSrxRNdCllKiPZHZzJYLZb5qEcpae3pxMCuu9oibS5/QCOiLcYUrp+MmtJeURjFdVlxzqiae6D4h40NQt54HyGv3JRo10aVfv8YhtC0pSlVKcPFuxIXahr08mzCO4VzMlLSsZuomZ+RaucU0rXsw/sfF5+osUFonWob/7TrLdaUgdpV93fl9X+VIC0Y6tek2uI8OD3J5gT2Vj9ZmP0f4IM4iY7RQ5gAAAAASUVORK5CYII=) no-repeat 50%;background-size:64px 64px;opacity:.84}.markdown-body h1:after{position:absolute;content:"";width:150%;left:-25%;height:50%;bottom:12px;border-radius:50%;background:linear-gradient(transparent 80%,rgba(77,208,225,.8));background-size:400% 200%;opacity:.6;animation:h1Animate 6s linear infinite}@keyframes h1Animate{0%{background-position:100% 100%}50%{background-position:100% 50%}to{background-position:100% 100%}}.markdown-body h2{display:block;border-bottom:4px solid #4dd0e1;position:relative;font-size:24px;padding:12px 32px;margin:30px 0}.markdown-body h2:before{width:24px;height:24px;left:0;top:0;margin:auto;background-size:24px 24px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADGklEQVRYR81X32vTYBQ999s6mFjQgQ+DrbHiVFZYU4cDcQ/6pGhTFVYFEXGi82H+Bz448UnEF1Fx9ccEEcXpZE3d5tP2ooKiTacTHaLNpigMHDgnU9tcSbrWrkwWR0sbyEOSe885ObnfvV8IRT6oyPwoLQHBx+OVM5WJvSyEVAhnBOjt7yU/+/rr6r6l8TMO+F/EN0JQhICqQpD/xaRpcpAc9tS+M+9lBCia/oqBamK+zeDuQogQZaKJk3wcQjxSva7tGQGB2Ke1zIk3DNyMyNL+QpCnMQOaPsDAVuGAp9cjvbYc8Ec/bCYSg0zoiHilk1tHxqsqEsYlML4kjIpT/eurJxRNPweQU5VdrWaOEo1fgKAVbBgXIz73kF3R/ph+ghgdzMYWM29eAWlBJqgZaFlFYtC6nhWpaDqnSGlIlV1WjJ3DloDNgyNLncudqgX//Ucg3LxuStHGuhi8pqKCW3rqV342rwFjRznKm+/LNaN2yC237ThgF2wxcfMLeP6+ncrKzoPoKTGeLQbYbg4TNoC5iZPJY5HGVRdSNZAWYBclD3FzBQzrR8hACAKdzBzKA/4/IYioDQaOskBbpEG6PO8qKKSAEi3CnEb0Pw4oMf0OmKbTDWqh3Lw6EIiNBZi5lxh3wz4puBD5ovqAMvxhHSdFKxE1CQe3m/07TeTX4lcJdAhE+1Sv65Z5P/ByvIGTRowIZ9igbtXnmrOsbTvgj+kHBNMuBu9OdVw8EeU4nC1A0cYmAHZOTRrLhra4Z8ywnSN6vZHAFTA2WnnMfQB3qz73ddsOZM8CACFDIPSgQXqebXEgqgeZcAeEe6pXasm1f8ew3igMtAHWac0Uc/jYdyAaP0xEBwFsmgUPqbJ0NE2UKj4EGcahiOzuyhagaHpnmtgcVgTcCMuua7YdyAHbA3ArQNscVFbb4635aD6fnYaTvxxi9UNP7ddMXaRWVBdAcaLk6bDXPZCNZ9uBXEsDUX1T2Cc9yjig6Z0EHg3LK8/aqf6MwJKchkXfks1+0+JtSq3qLPa23BRR1B+T/6nkfMaW1r9hPt/MLtYfTLEpP+T9FNoAAAAASUVORK5CYII=)}.markdown-body h2:after,.markdown-body h2:before{content:"";display:block;position:absolute;bottom:0}.markdown-body h2:after{right:0;width:400px;height:10px;border-top-right-radius:24px;background:linear-gradient(90deg,#fff,#4dd0e1);max-width:50vw}.markdown-body h3{margin:30px 0;font-size:18px;position:relative;padding:4px 32px;width:max-content}.markdown-body h3:before{border-bottom:2px solid #4dd0e1;width:100%;content:"";display:block;height:28px;position:absolute;left:0;top:0;bottom:-2px;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);background-repeat:no-repeat;animation:h3AnimationBefore 2s infinite alternate}@keyframes h3AnimationBefore{0%{width:28px}25%{width:100%}50%{width:100%}to{width:100%}}.markdown-body h3:after{content:"";display:block;width:28px;height:28px;position:absolute;border:2px solid #4dd0e1;border-radius:50%;right:-15px;top:0;bottom:0;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);animation:h3AnimationAfter 2s infinite alternate}@keyframes h3AnimationAfter{0%{transform:rotate(0)}10%{transform:rotate(0)}50%{transform:rotate(-1turn)}to{transform:rotate(-1turn)}}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin:22px 0;letter-spacing:2px;font-size:14px;word-spacing:2px}.markdown-body img{max-width:80%;border-radius:6px;display:block;margin:20px auto!important;object-fit:contain;box-shadow:0 0 16px hsla(0,0%,43.1%,.45)}.markdown-body figcaption{display:block;font-size:13px;color:#2b2b2b}.markdown-body figcaption:before{content:"";background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAGFBMVEVHcExAuPtAuPpAuPtAuPpAuPtAvPxAuPokzOX5AAAAB3RSTlMAkDLqNegkoiUM7wAAAGBJREFUKM9jYBhcgMkBTUDVBE1BeDGqEtXychNUBeXlKEqACsrLQxB8lnCQQClCiWt5OYoSiAIkJVAF5eVBqAqAShTAAs7l5ShKWMwRAmAlSArASpAVgJUkCqIAscESHwCVVjMBK9JnbQAAAABJRU5ErkJggg==);display:inline-block;width:18px;height:18px;background-size:18px;background-repeat:no-repeat;background-position:50%;margin-right:5px;margin-bottom:-5px}.markdown-body hr{border:none;border-top:1px solid #4dd0e1;margin-top:32px;margin-bottom:32px}.markdown-body del{color:#4dd0e1}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(77,208,225,.08);color:#26c6da;padding:.195em .4em}.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#4dd0e1;border-bottom:1px solid #4dd0e1;font-weight:400;text-decoration:none;margin:0 4px}.markdown-body a:active,.markdown-body a:hover{background-color:rgba(77,208,225,.1)}.markdown-body strong{color:#26c6da}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{font-style:normal;color:#4dd0e1;font-weight:700}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(77,208,225,.05)}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{margin:2em 0;padding:24px 32px;border-left:4px solid #26c6da;background:rgba(77,208,225,.15);position:relative}.markdown-body blockquote:before{content:"â";top:8px;left:8px;color:#4dd0e1;font-size:30px;line-height:1;font-weight:700;position:absolute;opacity:.7}.markdown-body blockquote:after{content:"â";font-size:30px;position:absolute;right:8px;bottom:0;color:#4dd0e1;opacity:.7}.markdown-body blockquote p{color:#595959;line-height:2}.markdown-body ol,.markdown-body ul{color:#595959;padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<blockquote>
<p>å¤§å®¶å¥½ï¼æˆ‘æ˜¯ [<a href="https://juejin.cn/user/465848660928872" target="_blank" title="https://juejin.cn/user/465848660928872">æå‰é€€ä¼‘çš„ java çŒ¿</a>]ï¼Œä¸€åæ‘¸çˆ¬æ»šæ‰“ 7 å¹´çš„ Java å¼€å‘ç»„é•¿ï¼Œæ—¥å¸¸ä¸»æ‰“ä¸€ä¸ªã€Œ5 ç‚¹å‡†æ—¶ä¸‹ç­ã€ï¼ˆæ¨¡æ‹Ÿé¢è¯•ã€ç®€å†ä¼˜åŒ–è¿˜åœ¨æ¥ï¼Œéšæ—¶ @ğŸ˜‰ï¼‰</p>
</blockquote>
<p>å‡ºæ¥å¹´ç»ˆæ€»ç»“äº†ï¼ä»Šå¤©ä¸èŠæŠ€æœ¯å¹²è´§ï¼Œåªå” å”  25 å¹´çš„ã€Œå‰¯ä¸šè¡€æ³ªå²ã€å’Œã€ŒAI å¯¹æˆ‘çš„æš´å‡»æ”¹å˜ã€</p>
<h2 data-id="heading-1">25å¹´ æˆ‘çš„é¢å¤–æ”¶å…¥</h2>
<p>å…³æ³¨æˆ‘çš„éƒ½çŸ¥é“ï¼Œæˆ‘ç›®å‰çš„å·¥ä½œç®—æ˜¯æ¯”è¾ƒè½»æ¾å§ï¼Œ25å¹´å‡ ä¹éƒ½æ˜¯5ç‚¹å‡†æ—¶ä¸‹ç­ğŸ˜ è¿™ä¸€å¹´æˆ‘æœ‰å¾ˆå¤šæ—¶é—´å»æ€è€ƒå»å°è¯•ã€‚
è¿™ä¸€å¹´èŠ±äº†å¾ˆå¤šæ—¶é—´å†™åšå®¢ã€åšè‡ªåª’ä½“ã€ä¹Ÿå¼€è¿‡å‡ æ¬¡ç›´æ’­ã€å¶å°”ä¹Ÿåœ¨æ¥æ¨¡æ‹Ÿé¢è¯•ã€ç®€å†ä¼˜åŒ–ç­‰æœ‰å¿æœåŠ¡ã€‚</p>
<p>åšå®¢å’Œè‡ªåª’ä½“èŠ±çš„æ—¶é—´æ¯”è¾ƒå¤šï¼Œåšå®¢å†™äº†60ç¯‡ï¼ˆ<strong>æœ€é«˜é˜…è¯»4w</strong>ï¼‰ã€è§†é¢‘114ä¸ªï¼ˆ<strong>æœ€é«˜æ’­æ”¾27w</strong>ï¼‰ã€‚åšè¿™äº›å†…å®¹ä¹ŸèŠ±äº†ä¸å°‘æ—¶é—´ï¼Œä½†æ˜¯æ”¶ç›Šå˜›éå¸¸çš„å°‘ åšå®¢+è‡ªåª’ä½“+æ¨¡æ‹Ÿé¢è¯• ä¸€å…±ä¹Ÿåªæœ‰<strong>4000RMB</strong>å§ğŸ˜­ã€‚è¿˜ä¸å¦‚å¤šä¹°å‡ ä¸‡åŸºé‡‘å‘¢ï¼Œå»å¹´çš„åŸºé‡‘æ”¶ç›Šç‡è¿˜ä¸é”™33ä¸ªç‚¹ï¼ˆä¹°çš„ä¸å¤šä¸åˆ°6ä½æ•°ğŸ˜‚ï¼‰ã€‚</p>
<h2 data-id="heading-2">25å¹´AIå¯¹æˆ‘å½±å“</h2>
<p>25å¹´å¯¹æˆ‘ä»¥åŠå¯¹æ‰€æœ‰çš„ç¨‹åºå‘˜éƒ½æ˜¯éå¸¸é‡è¦çš„ä¸€å¹´ï¼Œè¿™ä¸€å¹´çœŸçš„æ€èµ·äº†AI ç¼–ç¨‹æµªæ½®ï¼ŒAIæŠ€æœ¯çš„é©å‘½ï¼Œæœ‰äº›ç¨‹åºå‘˜å€ŸåŠ©è¿™æ³¢æŠ€æœ¯é©å‘½ <code>ALL IN</code> ä¸€äººå…¬å¸ï¼Œåšç‹¬ç«‹å¼€å‘ã€‚ä¹Ÿæœ‰å¾ˆå¤šç¨‹åºå‘˜æ‹¥æŠ±AI æŠ€æœ¯æ¡†æ¶è·³æ§½æ¶¨è–ªçš„ï¼Œä¹Ÿæœ‰äººåˆ©ç”¨AIå·¥å…·åšå†…å®¹å˜ç°çš„ï¼Œè€Œæˆ‘åªæ˜¯ç”¨äº†AI IDE å¸®æˆ‘æé«˜å·¥ä½œæ•ˆç‡ï¼Œå­¦ä¹ æ•ˆç‡ã€‚</p>
<p>æ‰€ä»¥è¿™ä¸€å¹´AIçš„æŠ€æœ¯é©å‘½ï¼ŒAI ç¼–ç¨‹å¯¹æˆ‘æ¥è¯´æ˜¯æ²¡æœ‰ç›´æ¥ç»™æˆ‘å¸¦æ¥é¢å¤–çš„æ”¶å…¥çš„ğŸ˜‚ã€‚å¯¹æˆ‘çš„ç›´æ¥å½±å“å°±æ˜¯å·¥ä½œæ•ˆç‡çš„äººæå‡ï¼Œä»¥åŠæœªæ¥è®¡åˆ’ç›¸åº”çš„è°ƒæ•´ï¼</p>
<h3 data-id="heading-3">æˆ‘æ˜¯å¦‚ä½•ç”¨ä¸ŠTrae AI</h3>
<p>æˆ‘ç®—æ˜¯æ˜é‡‘æ·±åº¦æ´»è·ƒç”¨æˆ·äº†ï¼Œ24å¹´çš„æ—¶å€™æ˜é‡‘åœ¨æ¨å¹¿<code>MarsCode</code>æ’ä»¶çš„æ—¶å€™ï¼Œæˆ‘å°±å“åº”å¹³å°å·å¬åœ¨IDEAä¸­ä¸‹è½½ä½“éªŒäº†ã€‚25å¹´çš„æ˜¥èŠ‚å‰å°±åœ¨æ˜é‡‘ä¸Šå…³æ³¨åˆ°traeæœ‰ä½“éªŒç‰ˆå¯ä»¥é¢„çº¦ä½¿ç”¨ï¼Œå¹´åæˆ‘å°±ç”¨ä¸Šäº†ã€‚</p>
<p>è¯´å®è¯å½“æ—¶å¯¹javaçš„æ”¯æŒè¿˜ä¸æ˜¯å¾ˆå‹å¥½ï¼Œæ‰“å¼€å·¥ç¨‹å…¨æ˜¯çº¢è‰²è­¦å‘Šã€‚è€Œä¸”ç‚¹å‡»æ–¹æ³•ç±»åä¹Ÿæ— æ³•è·³è½¬ã€‚ä½†æ˜¯å†™å‡ºæ¥çš„ä»£ç è¿˜è¡Œï¼Œæ¯”åœ¨ <code>idea</code> ä¸­å®‰è£…çš„ <code>MarsCode</code> å¥½å¾ˆå¤šï¼Œå› ä¸ºå¯¹å·¥ç¨‹çš„ç†è§£èƒ½åŠ›è¿˜è¡Œï¼Œèƒ½ç›´æ¥å¯¹å·¥ç¨‹çš„å¤šä¸ªæ–‡ä»¶è¿›è¡Œç›´æ¥ä¿®æ”¹ï¼Œå°±æ˜¯cursorçš„æ€§ä»·æ¯”ç‰ˆæœ¬ã€‚åæ¥ä¹Ÿæ˜¯ä¸€ç›´ç”¨ç€ä¹Ÿæ˜¯è§è¯äº†TRAEä¸€ä¸¤å¤©ä¸€æ›´æ–°çš„é«˜é¢‘å‘ç‰ˆï¼Œä¹Ÿæ˜¯è§è¯äº†å®ƒçš„æˆé•¿å†ç¨‹å§ï¼</p>
<h3 data-id="heading-4">TRAEå¯¹æˆ‘çš„å¸®åŠ©</h3>
<p>ä½ ä»¬å¯èƒ½ä¼šè¯´å¦‚æœæˆ‘ç”¨<code>Cursor</code>å¯¹æˆ‘çš„å¸®åŠ©å¯èƒ½æ›´å¤§ï¼Œè¿™ä¸ªæˆ‘ä¹Ÿä¸å¦è®¤ã€‚å› ä¸ºæˆ‘ç¡®å®æ²¡æœ‰ç”¨è¿‡ <code>cursor</code> å»å†™æˆ‘çš„å®é™…é¡¹ç›®ã€‚ä½†æ˜¯TRAEå›½é™…ä»˜è´¹ç‰ˆï¼Œæ˜¯èƒ½æ»¡è¶³æˆ‘ç›®å‰å®é™…å¼€å‘éœ€æ±‚çš„ï¼Œå¹¶ä¸”ä»·æ ¼ä¹Ÿç›¸å¯¹æ¥è¯´ä½ä¸€äº›ã€‚</p>
<p>å› ä¸ºåç«¯å’Œå‰ç«¯ä¸ä¸€æ ·ï¼ŒAIåœ¨å¸®ä½ å®Œæˆéœ€æ±‚çš„æ—¶å€™ï¼Œä½ è¿˜æ˜¯éœ€è¦å’ŒAIæ²Ÿé€šä½ çš„éœ€æ±‚æˆ–è€…è¯´å®ç°çš„é€»è¾‘ï¼Œåªè¦æˆ‘ä»¬æè¿°æ¸…æ¥šçš„é€»è¾‘æˆ–è€…ä¸šåŠ¡éœ€æ±‚ï¼Œtrea ç»™æˆ‘çš„ä»£åŸºæœ¬ä¸Šéƒ½æ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œåªæ˜¯åœ¨ä»£ç å®ç°çš„é€»è¾‘æœ‰æ—¶å€™éœ€è¦ä¼˜åŒ–ï¼ŒäºŒæ¬¡æ²Ÿé€šä¸€ä¸‹å°±å¯ä»¥äº†ã€‚</p>
<p>æ‰€ä»¥ä»Šå¹´çš„Trae å¯¹æˆ‘çš„å¼€å‘æ•ˆç‡å¹³å‡<strong>æé«˜50%</strong>ï¼Œå¸®æˆ‘å®Œæˆäº†ä¸¤ä¸ªé‡éš¾ç‚¹é¡¹ç›®çš„æ”»åšå·¥ä½œï¼Œè®©æˆ‘è½»æ¾ä¸å°‘ğŸ§˜â€â™€ï¸ã€‚åŒæ—¶åœ¨ä»£ç ä¼˜åŒ–ä¸Šé¢ä¹Ÿç»™æˆ‘çœäº†ä¸å°‘çš„å·¥ä½œé‡ï¼Œæ¯”å¦‚ä»£ç æ³¨é‡Šå®Œå–„ã€ä»£ç ç»“æ„çš„è°ƒæ•´ã€å…¬å…±æ–¹æ³•çš„å°è£…ã€æ–¹æ¡ˆçš„è°ƒä¼˜ã€‚ä»¥å‰è¿™äº›å·¥ä½œéƒ½å¾—è‡ªå·±æ‰‹åŠ¨è°ƒæ•´ï¼Œè°ƒæ•´ä¹‹åè¿˜å®¹æ˜“å‡ºé—®é¢˜ï¼Œä»Šå¹´éƒ½æ˜¯ Trae å¸®æˆ‘è‡ªåŠ¨åŒ–å¤„ç†äº†ã€‚</p>
<p>é™¤äº†å¼€å‘æ•ˆç‡çš„æå‡ä¸Šé¢ï¼Œå¯¹è‡ªå·±çš„<strong>å­¦ä¹ æ•ˆç‡</strong>ä¹Ÿæå‡äº†ä¸å°‘ã€‚ä»<strong>æ¡†æ¶æºç </strong>çš„é˜…è¯»ï¼Œåˆ°æŠ€æœ¯åšå®¢çš„ç¼–å†™ä»¥åŠæ²¡æœ‰ç”¨çš„æŠ€æœ¯æ¡†æ¶çš„é›†æˆä½¿ç”¨è¿™äº›æ–¹é¢ä¹Ÿéƒ½å¸®äº†æˆ‘ä¸å°‘å¿™ğŸ‘</p>
<p>ä»¥å‰åœ¨å®é™…å¼€å‘ä¸­ï¼ŒåŸºæœ¬ä¸Šä¸ä¼šç”¨å•¥ç®—æ³•ï¼Œç°åœ¨<code>vibe coding</code>ç¯å¢ƒä¸‹é¢ï¼Œä¸šåŠ¡ä»£ç ä¹Ÿèƒ½å®Œç¾å°†ç®—æ³•èå…¥è¿›æ¥äº†å“ˆå“ˆğŸ˜ çœ‹ä¸æ‡‚çš„æˆ‘å°±ç®¡ä¸äº†é‚£ä¹ˆå¤šäº†ğŸŒš</p>
<h3 data-id="heading-5">TRAEæ”¹å˜äº†æˆ‘26å¹´çš„è®¡åˆ’</h3>
<p>è¿™æ ·ä¸€å¹´æ˜æ˜¾èƒ½æ„Ÿå—åˆ°<code>TRAE</code>çš„é«˜é€Ÿå‘å±•ï¼Œèƒ½æ„Ÿå—åˆ°<code>AI ç¼–ç¨‹</code>çš„å‘å±•é€Ÿåº¦ä¹‹ææ€–ã€‚æ‰€ä»¥æˆ‘å¯¹æœªæ¥çš„è®¡åˆ’ä¹Ÿåœ¨è°ƒæ•´ï¼Œæˆ‘æƒ³åˆ©ç”¨AI åˆ©ç”¨TRAE åšå…¨æ ˆç ”å‘äº†ã€‚</p>
<blockquote>
<p>å…¶å®æˆ‘ç¬¬ä¸€ä»½å·¥ä½œå°±æ˜¯åš <code>NodeJs</code> å…¨æ ˆå¼€å‘çš„ï¼ŒğŸ˜æ²¡æƒ³åˆ°å§ï¼Œæˆ‘ä¸€ä¸ªjavaåšä¸»æœ€å¼€å§‹å®é™…ä¸Šæ˜¯Nodeå…¨æ ˆå¼€å‘å·¥ç¨‹å¸ˆã€‚</p>
</blockquote>
<p><strong>ä¸ºä»€ä¹ˆç°åœ¨æƒ³è½¬å…¨æ ˆäº†</strong>â“<br/>
å› ä¸ºä»Šå¹´ç”¨äº†<code>TRAE AI IDE</code>ç¼–ç¨‹å•Šï¼Œåšå…¨æ ˆç ”å‘çš„å¼€å‘æ•ˆç‡ï¼Œå¼€å‘æˆæœ¬ä¼šå†æ¬¡é™ä½ã€‚å¯¹äºç‹¬ç«‹å¼€å‘è€…æ¥è¯´çœŸçš„æ˜¯å¤©å¤§çš„å¥½äº‹å•ŠğŸš€<br/>
26å¹´æˆ‘ä¹Ÿæƒ³å°è¯•åšç‹¬ç«‹å¼€å‘ğŸƒï¼šâ€œå…„å¼Ÿä»¬æœ‰å•å­å—ï¼Ÿç»™é’±å°±åšâ€</p>
<h2 data-id="heading-6">æ€»ç»“</h2>
<p><strong>25å¹´</strong>ï¼Œæ˜¯ã€Œè¯•æ°´å‰¯ä¸šã€è¸©å‘æˆé•¿ã€çš„ä¸€å¹´ï¼›ä¹Ÿæ˜¯ã€Œè¢« AI é¢ è¦†è®¤çŸ¥ã€çš„ä¸€å¹´ â€”â€” è™½ç„¶è¿˜æ˜¯åƒä¸åˆ°AIçš„çº¢åˆ©ï¼Œè‡³å°‘è®©æˆ‘å·¥ä½œè½»æ¾äº†ä¸å°‘ğŸ˜‚</p>
<p><strong>26å¹´</strong>ï¼Œä¾ç„¶æ²¡æœ‰æ‰¾åˆ°è‡ªå·±åšå®šè¦åšçš„æ–¹å‘ï¼Œé‚£å°±å¤§èƒ†å°è¯•å§ï¼šå°è¯•ç”¨ TRAE åšå…¨æ ˆç‹¬ç«‹å¼€å‘ï¼Œè¶ç°åœ¨ä¸æ˜¯å¾ˆå¿™ï¼Œè¿˜èƒ½å‡†æ—¶ã€Œ5 ç‚¹ä¸‹ç­ã€ğŸ’ªï¼ä¸çŸ¥é“å…„å¼Ÿä»¬26 å¹´æœ‰æ²¡æœ‰å•¥å°ç›®æ ‡ï¼Ÿè¯„è®ºåŒºå” å” ï½</p>
<p>ğŸ§¨ä½ å¥½å‘€ï¼Œ2026ï¼æ„¿æˆ‘ä»¬éƒ½èƒ½é æŠ€æœ¯ã€é è¶‹åŠ¿ï¼Œèµšæ›´å¤šçš„é’±ï¼Œæ‘¸æ›´çˆ½çš„é±¼ğŸ¤</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Dify å¯è§‚æµ‹æ€§æœ€ä½³å®è·µ]]></title>    <link>https://juejin.cn/post/7594096585728671744</link>    <guid>https://juejin.cn/post/7594096585728671744</guid>    <pubDate>2026-01-12T10:46:39.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594096585728671744" data-draft-id="7594028166135431168" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Dify å¯è§‚æµ‹æ€§æœ€ä½³å®è·µ"/> <meta itemprop="keywords" content="ç›‘æ§"/> <meta itemprop="datePublished" content="2026-01-12T10:46:39.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¯è§‚æµ‹æ€§ç”¨è§‚æµ‹äº‘"/> <meta itemprop="url" content="https://juejin.cn/user/2392958212523102"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Dify å¯è§‚æµ‹æ€§æœ€ä½³å®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2392958212523102/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¯è§‚æµ‹æ€§ç”¨è§‚æµ‹äº‘
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-12T10:46:39.000Z" title="Mon Jan 12 2026 10:46:39 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Dify ä»‹ç»</h2>
<p>Dify æ˜¯ä¸€æ¬¾å¼€æºçš„å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰åº”ç”¨å¼€å‘å¹³å°ï¼Œèåˆäº†åç«¯å³æœåŠ¡ï¼ˆBackend-as-a-Serviceï¼ŒBaaSï¼‰ä¸ LLMOps çš„ç†å¿µï¼Œæ—¨åœ¨å¸®åŠ©å¼€å‘è€…å¿«é€Ÿæ­å»ºç”Ÿäº§çº§çš„ç”Ÿæˆå¼ AI åº”ç”¨ã€‚</p>
<h3 data-id="heading-1">æ ¸å¿ƒå®šä½</h3>
<p>Dify çš„æ ¸å¿ƒå®šä½ä½“ç°åœ¨ä»¥ä¸‹ä¸‰å¤§èƒ½åŠ›ï¼š</p>
<ul>
<li>å¯è§†åŒ–ç¼–æ’å¼•æ“ï¼šé€šè¿‡æ‹–æ‹½å¼å·¥ä½œæµè®¾è®¡ç•Œé¢ï¼Œç”¨æˆ·å¯ç»„åˆ LLM è°ƒç”¨ã€å·¥å…·é›†æˆã€æ¡ä»¶åˆ†æ”¯ç­‰èŠ‚ç‚¹ï¼Œæ„å»ºå¤æ‚ä»»åŠ¡é“¾ï¼Œæ— éœ€ç¼–å†™èƒ¶æ°´ä»£ç ã€‚</li>
<li>ä¼ä¸šçº§ AI åŸºç¡€è®¾æ–½ï¼šæä¾›æ¨¡å‹ç½‘å…³ï¼ˆæ”¯æŒæ¥å…¥ 200+ æ¨¡å‹ï¼Œå¦‚ OpenAIã€Claude ç­‰ï¼‰ã€æ•°æ®ç®¡é“ï¼ˆè‡ªåŠ¨åŒ–å¤„ç†æ–‡æ¡£å¹¶æ„å»ºå‘é‡çŸ¥è¯†åº“ï¼‰ã€å®‰å…¨åˆè§„ï¼ˆæ»¡è¶³ GDPR/HIPAA ç­‰è¦æ±‚ï¼‰ã€‚</li>
<li>æŒç»­ä¼˜åŒ–ä½“ç³»ï¼šç›‘æ§æ¨¡å‹æ€§èƒ½ã€æ ‡æ³¨ä¼˜è´¨å›ç­”åé¦ˆè‡³ Promptï¼Œå½¢æˆå¼€å‘-éƒ¨ç½²-è¿­ä»£é—­ç¯ã€‚</li>
</ul>
<h3 data-id="heading-2">ä¸»è¦åŠŸèƒ½</h3>
<ul>
<li>ä½ä»£ç /æ— ä»£ç å¼€å‘ï¼šæä¾›å¯è§†åŒ–ç•Œé¢ï¼Œè½»æ¾å®šä¹‰ Promptã€ä¸Šä¸‹æ–‡ä¸æ’ä»¶ï¼Œé™ä½æŠ€æœ¯é—¨æ§›ã€‚</li>
<li>æ¨¡å—åŒ–æ¶æ„ï¼šåŠŸèƒ½æ¨¡å—ä¸æ¥å£æ¸…æ™°ï¼Œå¯æŒ‰éœ€ç»„åˆä½¿ç”¨ã€‚</li>
<li>ä¸°å¯Œçš„åŠŸèƒ½ç»„ä»¶ï¼šæ¶µç›– AI å·¥ä½œæµã€RAG ç®¡é“ã€Agentã€æ¨¡å‹ç®¡ç†ã€å¯è§‚æµ‹æ€§ç­‰åŠŸèƒ½ã€‚</li>
<li>æ”¯æŒå¤šç§å¤§æ¨¡å‹ï¼šå·²é›†æˆå¤šç§æ¨¡å‹ï¼ŒåŒ…æ‹¬ OpenAI GPT ç³»åˆ—ç­‰ï¼Œå¹¶æŒç»­æ‰©å±•ã€‚</li>
<li>æ•°æ®å¤„ç†ä¸å¤–éƒ¨çŸ¥è¯†é›†æˆï¼šæä¾›æ•°æ®æ¸…æ´—ã€ç‰¹å¾å·¥ç¨‹ç­‰åŠŸèƒ½ï¼Œæ”¯æŒæ¥å…¥å¤–éƒ¨ API ä¸ä¼ä¸šçŸ¥è¯†åº“</li>
</ul>
<h2 data-id="heading-3">LLM ç›‘æµ‹ - Langfuse ä»‹ç»</h2>
<p>Langfuse æ˜¯ä¸€ä¸ªç”¨äº AI åº”ç”¨çš„å¯è§‚æµ‹æ€§ä¸æ•°æ®ç®¡ç†å¹³å°ï¼Œå¯ä»¥å¸®åŠ©å¼€å‘è€…è®°å½•ã€åˆ†æå’Œä¼˜åŒ–å¤§æ¨¡å‹è°ƒç”¨è¿‡ç¨‹ã€‚å®ƒèƒ½è‡ªåŠ¨é‡‡é›† Promptã€æ¨¡å‹è¾“å‡ºç»“æœã€token æ¶ˆè€—ã€é”™è¯¯ä¿¡æ¯ã€å»¶è¿Ÿç­‰æ•°æ®ï¼Œå¹¶é€šè¿‡ Trace å’Œ Span å±•ç¤ºå®Œæ•´è°ƒç”¨é“¾ï¼Œå¯ç”¨äºè°ƒè¯•ã€è¿½è¸ªã€è¯„ä¼°æ¨¡å‹è´¨é‡ä»¥åŠåš A/B æµ‹è¯•ã€‚é€šè¿‡ Langfuseï¼Œå›¢é˜Ÿå¯ä»¥åƒç›‘æ§åç«¯æœåŠ¡ä¸€æ ·ç›‘æ§ AI åº”ç”¨ï¼Œä»è€ŒæŒç»­ä¼˜åŒ– Promptã€é™ä½æˆæœ¬ï¼Œå¹¶æé«˜æ¨¡å‹è¾“å‡ºè´¨é‡ã€‚</p>
<p>åœ¨å®é™…ä½¿ç”¨ LLM ç›‘æµ‹æœåŠ¡ä¸­ï¼Œæ‚¨å¯ä»¥ï¼š</p>
<ul>
<li>æŸ¥çœ‹å•æ¬¡è¯·æ±‚çš„å®Œæ•´é“¾è·¯ï¼šæ¸…æ™°æŸ¥çœ‹ç”¨æˆ·æé—®ä»æ¥æ”¶ã€å¤„ç†ï¼ˆå¦‚æ•°æ®åº“æŸ¥è¯¢ï¼‰ã€åˆ°è°ƒç”¨ LLM æ¨¡å‹å¹¶è¿”å›ç­”æ¡ˆçš„æ•´ä¸ªè¿‡ç¨‹</li>
<li>åˆ†ææ€§èƒ½ç“¶é¢ˆï¼šç²¾ç¡®æµ‹é‡æ¯ä¸ªç¯èŠ‚ï¼ˆå¦‚æ¨¡å‹è°ƒç”¨ã€æ•°æ®æ£€ç´¢ï¼‰çš„è€—æ—¶ï¼ŒåŠæ—¶å‘ç°å»¶è¿Ÿ</li>
<li>å…³è”ä¸Šä¸‹æ¸¸æœåŠ¡ï¼šå…³è” LLM è¯·æ±‚ä¸ç›¸å…³çš„åº”ç”¨ç¨‹åºã€åŸºç¡€è®¾æ–½æŒ‡æ ‡ï¼Œè¿›è¡Œå…¨é¢æ ¹å› åˆ†æ</li>
</ul>
<h2 data-id="heading-4">è§‚æµ‹äº‘</h2>
<p>è§‚æµ‹äº‘æ˜¯ä¸€æ¬¾ä¸“ä¸º IT å·¥ç¨‹å¸ˆæ‰“é€ çš„å…¨é“¾è·¯å¯è§‚æµ‹äº§å“ï¼Œå®ƒé›†æˆäº†åŸºç¡€è®¾æ–½ç›‘æ§ã€åº”ç”¨ç¨‹åºæ€§èƒ½ç›‘æ§å’Œæ—¥å¿—ç®¡ç†ï¼Œä¸ºæ•´ä¸ªæŠ€æœ¯æ ˆæä¾›å®æ—¶å¯è§‚å¯Ÿæ€§ã€‚è¿™æ¬¾äº§å“èƒ½å¤Ÿå¸®åŠ©å·¥ç¨‹å¸ˆå…¨é¢äº†è§£ç«¯åˆ°ç«¯çš„ç”¨æˆ·ä½“éªŒè¿½è¸ªï¼Œäº†è§£åº”ç”¨å†…å‡½æ•°çš„æ¯ä¸€æ¬¡è°ƒç”¨ï¼Œä»¥åŠå…¨é¢ç›‘æ§äº‘æ—¶ä»£çš„åŸºç¡€è®¾æ–½ã€‚æ­¤å¤–ï¼Œè§‚æµ‹äº‘è¿˜å…·å¤‡å¿«é€Ÿå‘ç°ç³»ç»Ÿå®‰å…¨é£é™©çš„èƒ½åŠ›ï¼Œä¸ºæ•°å­—åŒ–æ—¶ä»£æä¾›å®‰å…¨ä¿éšœã€‚</p>
<h2 data-id="heading-5">LLM ç›‘æµ‹</h2>
<h3 data-id="heading-6">åˆ›å»º LLM åº”ç”¨</h3>
<p>ç™»å½•<a href="https://link.juejin.cn?target=https%3A%2F%2Fconsole.guance.com%2F" target="_blank" title="https://console.guance.com/" ref="nofollow noopener noreferrer">è§‚æµ‹äº‘æ§åˆ¶å°</a>ï¼Œç‚¹å‡»ã€ŒLLM ç›‘æµ‹ã€ ã€Œæ–°å»ºåº”ç”¨ã€ è¾“å…¥åº”ç”¨åç§°ï¼Œåº”ç”¨ IDï¼Œç‚¹å‡»ã€Œåˆ›å»ºã€ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/289dbc6c774f4c749586e15666dd5e62~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-v6KeC5rWL5oCn55So6KeC5rWL5LqR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768819599&amp;x-signature=OVcFf%2BF1GR3rugmHQ1OrpC4Nn6o%3D" alt="" loading="lazy"/></p>
<p>ç§æœ‰åŒ–éƒ¨ç½²å®¢æˆ·ï¼ŒHost ä¿¡æ¯é»˜è®¤ä¸ºç©ºï¼Œéœ€é…ç½®Â <code>forethought-webclient</code>Â å‘½åç©ºé—´ä¸‹çš„Â <code>llmDatawayUrl</code>Â é…ç½®é¡¹ ,å€¼ä¸ºÂ <code>dataway</code>Â åœ°å€ï¼Œä¹Ÿå¯ä»¥ç”³è¯·å•ç‹¬çš„åŸŸåæŒ‡å‘Â <code>dataway</code>Â åœ°å€ã€‚</p>
<h3 data-id="heading-7">Dify å¼€å¯ Langfuse é…ç½®</h3>
<p>è¿›å…¥ Dify åï¼Œé€‰æ‹©ã€Œåº”ç”¨ã€-ã€Œç›‘æµ‹ã€-ã€Œè¿½è¸ªåº”ç”¨æ€§èƒ½ã€-ã€ŒLangfuseã€ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f143746027ef4824b9eba65d0b267fbc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-v6KeC5rWL5oCn55So6KeC5rWL5LqR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768819599&amp;x-signature=XvHo0nvjtyFp4D%2BCC01Smj4LSz0%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9c32ddfa1377468b81bf70b4536600e4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-v6KeC5rWL5oCn55So6KeC5rWL5LqR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768819599&amp;x-signature=wS5R%2Bfja37RyO%2FzRjkjffZyEkQ4%3D" alt="" loading="lazy"/></p>
<p>é…ç½®å¥½åç‚¹å‡»ã€Œä¿å­˜å¹¶å¯ç”¨ã€ã€‚</p>
<h3 data-id="heading-8">æŸ¥çœ‹ LLM ç›‘æµ‹æ•°æ®</h3>
<p>ç™»å½•è§‚æµ‹äº‘æ§åˆ¶å°ï¼Œç‚¹å‡»ã€ŒLLM ç›‘æµ‹ã€ -ã€Œåº”ç”¨åç§°ã€ å³å¯æŸ¥çœ‹æ•°æ®ã€‚</p>
<h4 data-id="heading-9">1ã€LLM ç›‘æµ‹ - åº”ç”¨åˆ—è¡¨</h4>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/73e1cdb027924de38ca26cb4b3326aa6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-v6KeC5rWL5oCn55So6KeC5rWL5LqR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768819599&amp;x-signature=CdyC8yKkQcFgYfl9v6O6keEStog%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-10">2ã€LLM ç›‘æµ‹ - æŸ¥çœ‹å™¨</h4>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3f761e98f7e34ba5896bad9f7ff6e8df~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-v6KeC5rWL5oCn55So6KeC5rWL5LqR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768819599&amp;x-signature=xvqm1P7UMTTcswoXHBr%2BzyGwW2I%3D" alt="" loading="lazy"/></p>
<p>è®°å½•è¯¦æƒ… å·¥ä½œæµï¼ŒæŒ‡æ ‡ï¼ŒåŠTokenç”¨é‡çš„å±•ç¤ºã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/64030657596a4405b0e9eb3763c8cad2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-v6KeC5rWL5oCn55So6KeC5rWL5LqR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768819599&amp;x-signature=eQopn0sbnOL6L5MQRYM24rKOWiw%3D" alt="" loading="lazy"/></p>
<p>åœ¨æŸ¥çœ‹å™¨ä¸­å¯ä»¥æŸ¥çœ‹æ¯æ¬¡è¯·æ±‚çš„é“¾è·¯ä¿¡æ¯ï¼Œè€—æ—¶ï¼Œä»¥åŠ token çš„æ¶ˆè€—æƒ…å†µã€‚</p>
<h4 data-id="heading-11">3ã€LLM ç›‘æµ‹ - åˆ†æçœ‹æ¿</h4>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8f8cf737874c4601901b5ad1c132be4e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-v6KeC5rWL5oCn55So6KeC5rWL5LqR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768819599&amp;x-signature=HpS6JzAwVTQsqgbmcdY6NVSD%2BzQ%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-12">æ€»ç»“</h2>
<p>é€šè¿‡è§‚æµ‹äº‘ LLM ç›‘æµ‹é‡‡é›† Dify å¹³å°ä»¥åŠå„ç±»è‡ªå®šä¹‰æ¨¡å‹ï¼Œèƒ½å¤Ÿæ„å»ºå…¨é“¾è·¯å¯è§‚æµ‹ä½“ç³»ï¼Œå…¨é¢æŒæ§ç³»ç»Ÿæ€§èƒ½ä¸æ ¸å¿ƒè°ƒè¯•ä¿¡æ¯ï¼Œæå‰è¯†åˆ«å¹¶å®šä½æ½œåœ¨é—®é¢˜ï¼ŒæŒç»­ä¼˜åŒ–ç”¨æˆ·äº¤äº’ä½“éªŒã€‚åŒæ—¶ï¼Œå¯å®ç° Token æ¶ˆè€—çš„ç²¾ç»†åŒ–ç»Ÿè®¡ï¼Œè¾…åŠ©å®Œæˆæç¤ºè¯ä¼˜åŒ–ï¼Œæœ€ç»ˆè¾¾æˆé™æœ¬å¢æ•ˆçš„æ ¸å¿ƒç›®æ ‡ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[2025å¹´ç»ˆæ€»ç»“ï¼šVibe Coding ä¹‹åï¼Œèƒ†å„¿è‚¥äº†]]></title>    <link>https://juejin.cn/post/7593944180918386698</link>    <guid>https://juejin.cn/post/7593944180918386698</guid>    <pubDate>2026-01-12T02:22:22.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7593944180918386698" data-draft-id="7593944180917993482" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="2025å¹´ç»ˆæ€»ç»“ï¼šVibe Coding ä¹‹åï¼Œèƒ†å„¿è‚¥äº†"/> <meta itemprop="keywords" content="AIç¼–ç¨‹,å…¨æ ˆ,Next.js"/> <meta itemprop="datePublished" content="2026-01-12T02:22:22.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é™ˆä½¬æ˜”ç¼–ç¨‹äººç”Ÿ"/> <meta itemprop="url" content="https://juejin.cn/user/3087084378402445"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            2025å¹´ç»ˆæ€»ç»“ï¼šVibe Coding ä¹‹åï¼Œèƒ†å„¿è‚¥äº†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3087084378402445/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é™ˆä½¬æ˜”ç¼–ç¨‹äººç”Ÿ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-12T02:22:22.000Z" title="Mon Jan 12 2026 02:22:22 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>2025å¹´ï¼Œæ˜¯å¤§å®¶æ­£å¼è¸å…¥ Vibe Coding çš„ä¸€å¹´ã€‚</p>
<p>ä½œä¸ºè€å‰ç«¯ï¼Œè‡ªå·±åŠ¨æ‰‹å†™ä»£ç çš„æ—¶é—´è¶Šæ¥è¶Šå°‘ï¼Œä½†èƒ†å„¿å´è¶Šæ¥è¶Šè‚¥äº†ï¼Œè¿™å¤§æ¦‚å°±æ˜¯ <del>æ¢é™èŒ¹</del> AI ç»™çš„å‹‡æ°”å§ã€‚</p>
<h2 data-id="heading-0">è¿™ä¸ªéœ€æ±‚åšä¸äº†ï¼Ÿä¸å­˜åœ¨çš„ï¼</h2>
<p>ä»¥å‰éœ€æ±‚å¤šåˆ°çˆ†ç‚¸ï¼Œæˆ‘çš„æ ‡å‡†å›ç­”æ˜¯ï¼šâ€œè¿™ä¸ªéœ€æ±‚åšä¸äº†ï¼â€ï¼ˆå†…å¿ƒOSï¼šåˆ«æ¥çƒ¦æˆ‘ï¼‰ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2049e95d879c4977b11488c78575c0c2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6ZmI5L2s5piU57yW56iL5Lq655Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768789342&amp;x-signature=M7QGB09aRp03Ya7MjX2mrAck2O8%3D" alt="è¿™éœ€æ±‚åšä¸äº†.png" loading="lazy"/></p>
<p>ç°åœ¨ï¼Ÿæˆ‘å¾®å¾®ä¸€ç¬‘ï¼šâ€œå¯ä»¥è¯•è¯•â€ã€‚ç„¶åé»˜é»˜æ‰“å¼€ AIï¼Œè®©å®ƒç»™ç‚¹æ€è·¯ï¼Œå†å†™ä¸¤ä¸ª demo æ¢æ¢è·¯ï¼Œæœ€åæ‰è·Ÿè€æ¿æ±‡æŠ¥ã€‚</p>
<p>ç”šè‡³é‚£äº›èŠ±é‡Œèƒ¡å“¨çš„éœ€æ±‚ä¹Ÿæ•¢æ¥äº†ï¼š</p>
<ul>
<li>æ¯›ç»ç’ƒæ•ˆæœï¼Ÿå®‰æ’ï¼</li>
<li>å¼¹çª—éšä¾¿æ‹–æ‹½ï¼Ÿå°æ„æ€ï¼</li>
<li>å……å€¼è·³ç™»å½•å†è·³å›æ¥ç»§ç»­å……å€¼ï¼Ÿæ²¡é—®é¢˜ï¼Œä¿è¯ç”¨æˆ·ä½“éªŒä¸æ»‘~</li>
</ul>
<p>ä»¥å‰é‡åˆ°ä¸ç†Ÿæ‚‰çš„æ¡†æ¶ï¼ŒçŠ¹è±«å¾—åƒåœ¨é€‰é«˜è€ƒå¿—æ„¿ã€‚</p>
<p>ç°åœ¨ï¼Ÿç›´æ¥è®© AI å†™ä¸ª demo è·‘è·‘çœ‹ï¼Œèƒ½è·‘èµ·æ¥å°±æ˜¯å¥½æ¡†æ¶ï¼</p>
<h2 data-id="heading-1">å†™ TypeScript å¥½çƒ¦ï¼Ÿç°åœ¨çœŸé¦™ï¼</h2>
<p>ä»¥å‰æ€»è§‰å¾— TypeScript ç‰¹åˆ«çƒ¦äººï¼Œé…ç½®éº»çƒ¦ã€ç±»å‹å£°æ˜å•°å—¦ï¼ŒåŠ¨ä¸åŠ¨å°±æŠ¥çº¢ï¼Œè®©äººå†™ä»£ç çš„å…´è‡´éƒ½æ²¡äº†ã€‚</p>
<p>å½“æ—¶ï¼ŒæŸå¼€æºå¤§ç¥å®£å¸ƒæ”¾å¼ƒ typescriptï¼Œæˆ‘ä¹Ÿæ˜¯ç«™ä»–è¿™ä¸€è¾¹çš„ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dbeb2b55d8834076b3875957f5c4b1ac~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6ZmI5L2s5piU57yW56iL5Lq655Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768789342&amp;x-signature=qzH0Cpyyn0rUyMHjkLIPVO0cJbY%3D" alt="å¤§ç¥ä¸åštypescript.png" loading="lazy"/></p>
<p>ä½†ç°åœ¨å®Œå…¨å˜äº†æƒ³æ³•ï¼šç»Ÿç»Ÿç»™æˆ‘ç”¨ä¸Šï¼</p>
<p>ä¸ä»…æ¯ä¸ªé¡¹ç›®éƒ½è¦ä¸Š TypeScriptï¼Œè¿é‚£äº›ä»¥å‰è§‰å¾—â€œæ²¡å¿…è¦â€çš„è¾¹è¾¹è§’è§’ï¼Œç°åœ¨ä¹Ÿå¼ºåˆ¶åŠ ä¸Šç±»å‹æ£€æŸ¥ã€‚ç‰¹åˆ«æ˜¯ Try Catch è¿™ç§é”™è¯¯å¤„ç†çš„åœ°æ–¹ï¼Œèƒ½å†™çš„åœ°æ–¹ä¸€ä¸ªéƒ½ä¸æ”¾è¿‡ã€‚</p>
<p>æ—¶é—´å……è£•çš„è¯ï¼Œå†åŠ ç‚¹å•å…ƒæµ‹è¯•ï¼Œç”¨ Jest æˆ–è€… Vitest æŠŠæ ¸å¿ƒé€»è¾‘è¦†ç›–ä¸€éï¼Œè¾¹ç•Œæƒ…å†µã€å¼‚å¸¸æµç¨‹ä¸€ä¸ªä¸æ¼ï¼Œé‚£æ‰å«å®Œç¾~</p>
<h2 data-id="heading-2">å®³æ€•é‡æ„ï¼Ÿç°åœ¨ä¸»åŠ¨æé‡æ„ï¼</h2>
<p>è¯´èµ·é‡æ„ï¼Œè°äººä¸æƒ³ï¼Œè°äººåˆä¸æ€•å‘¢ï¼Ÿ</p>
<p>ä½†æ˜¯ç°åœ¨ï¼Œè¿æ¡†æ¶çº§åˆ«çš„é‡æ„ï¼Œéƒ½æ•¢æ”¾æ‰‹å»æäº†ã€‚</p>
<p>ä»Šå¹´å°±æäº†ä¸¤æ¬¡å¤§çš„ï¼š</p>
<p>ç¬¬ä¸€æ¬¡ï¼šé¡¹ç›®åˆšå¼€å§‹ï¼Œå†³å®šä» Vue æ•´ä½“è¿ç§»åˆ° Reactï¼Œè¿˜æŠŠé¡¹ç›®ä¸€åˆ†ä¸ºäºŒâ€”â€”Web ç«¯ç”¨ Reactï¼Œç§»åŠ¨ç«¯ç”¨ React Nativeã€‚æ„Ÿè§‰åƒæ˜¯ç»™é¡¹ç›®åšäº†ä¸ªâ€œåˆ†å®¶æ‰‹æœ¯â€ã€‚</p>
<p>ç¬¬äºŒæ¬¡ï¼šä¸šåŠ¡è°ƒæ•´ï¼Œç§»åŠ¨ç«¯æš‚æ—¶ç”¨ä¸ä¸Šäº†ã€‚äºæ˜¯åˆæŠŠ React Native çš„ä»£ç â€œåŠè¿”â€æˆ Reactï¼Œç»Ÿä¸€ç»´æŠ¤ã€‚è™½ç„¶æŠ˜è…¾ï¼Œä½†æŠ€æœ¯æ ˆæ¸…æ™°äº†ï¼Œåç»­å¼€å‘åè€Œæ›´é¡ºç•…â€”â€”è¿™æ³¢æ“ä½œï¼Œå€¼äº†ï¼äº§å“ä¹Ÿåé¦ˆï¼Œæ•´ä½“æ“ä½œå˜æµç•…äº†ï¼ŒAI æ¢æ¶æ„è¿™ä¸€å—çœŸæ˜¯ä¸€ç»ï¼</p>
<h2 data-id="heading-3">å…¨æ ˆï¼Ÿè¯•è¯•å°±<del>é€ä¸–</del>è¯•è¯•ï¼</h2>
<p>æ›´ç¦»è°±çš„æ˜¯ï¼Œç°åœ¨å±…ç„¶å¼€å§‹å…¨é¢æ‹¥æŠ±â€œå…¨æ ˆâ€äº†ã€‚</p>
<p>å†™ç€å†™ç€å‰ç«¯ï¼Œå‘ç°è‡ªå·±çš„ç©ºä½™æ—¶é—´å˜å¤šäº†ï¼ˆæ„Ÿè°¢ AI é˜Ÿå‹ï¼‰ï¼Œå°±æƒ³ç€ï¼šä¸å¦‚æ‹“å±•ä¸€ä¸‹æŠ€èƒ½è¾¹ç•Œï¼Ÿ</p>
<p>äºæ˜¯å¼€å§‹é‡æ–°æ¥è§¦ Next.jsï¼Œç”¨ AI è¾…åŠ©è½»è½»æ¾æ¾æ­äº†ä¸¤ä¸ªåå°ï¼š</p>
<ol>
<li>ä¸ªäººè®°è´¦æœ¬â€”â€”è®°å½•æ—¥å¸¸å¼€é”€ã€‚</li>
<li>æ¨¡æ‹Ÿå•†åŸé¡¹ç›®â€”â€”å•†å“å±•ç¤ºã€ç®€å•ä¸‹å•æµç¨‹ã€‚</li>
</ol>
<p>è¿™ä¸¤ä¸ªé¡¹ç›®åœ¨æœ¬åœ°è·‘å¾—æŒºæµç•…ï¼Œæ²¡å•¥å¤§é—®é¢˜ã€‚ç›®å‰æ­£åœ¨åšä¸€ä¸ªä¼ä¸šå®˜ç½‘ç±»å‹çš„é¡¹ç›®ï¼Œè¿‡ç¨‹ä¸­é‡æ–°æ¡èµ·äº†æ•°æ®åº“çš„çŸ¥è¯†â€”â€”è¡¨ç»“æ„è®¾è®¡ã€æŸ¥è¯¢ä¼˜åŒ–ï¼Œæ„Ÿè§‰åƒæ˜¯é‡é€¢äº†è€æœ‹å‹ã€‚</p>
<p>æ¥ä¸‹æ¥çš„2026ï¼Œæ‰“ç®—ç»§ç»­æ·±å…¥ï¼Œæ…¢æ…¢æŠŠå…¨æ ˆè¿™æ¡è·¯èµ°è¸å®ã€‚</p>
<hr/>
<p>æ€»ä¹‹ï¼ŒVibe Coding è¿™ä¸€å¹´ï¼Œèƒ†å„¿è‚¥äº†ï¼Œè…°ä¸é…¸äº†ï¼Œè…¿ä¸ç—›äº†ï¼Œä¸€å£æ°”èƒ½çˆ¬ 5 å±‚æ¥¼äº†~</p>
<p>å’±è€ç¨‹åºå‘˜å•Š~ è¿˜å¤šäºäº† AI!</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç®€å•æ–¹æ³•å®ç°å­ä»»åŠ¡è€—æ—¶ç»Ÿè®¡]]></title>    <link>https://juejin.cn/post/7594153083879718963</link>    <guid>https://juejin.cn/post/7594153083879718963</guid>    <pubDate>2026-01-12T09:16:06.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594153083879718963" data-draft-id="7594087108594401343" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç®€å•æ–¹æ³•å®ç°å­ä»»åŠ¡è€—æ—¶ç»Ÿè®¡"/> <meta itemprop="keywords" content="åç«¯,Java,ç›‘æ§"/> <meta itemprop="datePublished" content="2026-01-12T09:16:06.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ¡¦è¯´ç¼–ç¨‹"/> <meta itemprop="url" content="https://juejin.cn/user/2212689394274136"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç®€å•æ–¹æ³•å®ç°å­ä»»åŠ¡è€—æ—¶ç»Ÿè®¡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2212689394274136/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ¡¦è¯´ç¼–ç¨‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-12T09:16:06.000Z" title="Mon Jan 12 2026 09:16:06 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">èƒŒæ™¯</h2>
<p>åœ¨å¹¶å‘ç¼–ç¨‹ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦å°†ä¸€ä¸ªå¤§ä»»åŠ¡æ‹†åˆ†æˆå¤šä¸ªå­ä»»åŠ¡å¹¶è¡Œæ‰§è¡Œã€‚ä½†éšä¹‹è€Œæ¥çš„é—®é¢˜æ˜¯ï¼š<strong>å¦‚ä½•å‡†ç¡®ç»Ÿè®¡æ¯ä¸ªå­ä»»åŠ¡çš„è€—æ—¶ï¼Ÿ</strong></p>
<p>ä¼ ç»Ÿçš„åšæ³•æ˜¯åœ¨ä¸šåŠ¡ä»£ç ä¸­æ‰‹åŠ¨åŸ‹ç‚¹ï¼Œä½†è¿™æ ·ä¼šå¯¼è‡´ä»£ç ä¾µå…¥æ€§å¼ºã€éš¾ä»¥ç»´æŠ¤ã€‚æœ¬æ–‡ä»‹ç»ä¸€ç§åŸºäºè£…é¥°å™¨æ¨¡å¼çš„ä¼˜é›…å®ç°æ–¹æ¡ˆã€‚</p>
<h2 data-id="heading-1">æ ¸å¿ƒæ€è·¯</h2>
<p>é€šè¿‡åŒ…è£… <code>Callable</code> æ¥å£ï¼Œåœ¨ä»»åŠ¡æ‰§è¡Œå‰åè‡ªåŠ¨è®°å½•æ—¶é—´æˆ³ï¼Œå®ç°å¯¹ä»»åŠ¡ç”Ÿå‘½å‘¨æœŸå„é˜¶æ®µçš„ç›‘æ§ï¼š</p>
<pre><code class="hljs language-lua" lang="lua">Timeline: submitTime -&gt; startTime -&gt; endTime
              |            |           |
              +<span class="hljs-comment">-- ç­‰å¾…æ—¶é—´ --+-- æ‰§è¡Œæ—¶é—´ --+</span>
              |                         |
              +<span class="hljs-comment">------- æ€»è€—æ—¶ -----------+</span>
</code></pre>
<h2 data-id="heading-2">ä»£ç å®ç°</h2>
<h3 data-id="heading-3">1. å®šä¹‰æ—¶é—´è®°å½•å­—æ®µ</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ScopedCallable</span>&lt;V&gt; <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Callable</span>&lt;V&gt; {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> <span class="hljs-variable">NANO_TO_MS</span> <span class="hljs-operator">=</span> <span class="hljs-number">1_000_000L</span>;

    <span class="hljs-comment">/** ä»»åŠ¡åç§° */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> String taskName;

    <span class="hljs-comment">/** è¢«åŒ…è£…çš„å®é™…ä»»åŠ¡ */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Callable&lt;V&gt; delegate;

    <span class="hljs-comment">/** ä»»åŠ¡æäº¤æ—¶é—´ (çº³ç§’) */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> submitTime;

    <span class="hljs-comment">/** ä»»åŠ¡å¼€å§‹æ‰§è¡Œæ—¶é—´ (çº³ç§’) */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> startTime;

    <span class="hljs-comment">/** ä»»åŠ¡æ‰§è¡Œç»“æŸæ—¶é—´ (çº³ç§’) */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> endTime;
}
</code></pre>
<h3 data-id="heading-4">2. åœ¨æ„é€ å‡½æ•°ä¸­è®°å½•æäº¤æ—¶é—´</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-title function_">ScopedCallable</span><span class="hljs-params">(String taskName, Callable&lt;V&gt; delegate)</span> {
    <span class="hljs-built_in">this</span>.taskName = Objects.requireNonNull(taskName);
    <span class="hljs-built_in">this</span>.delegate = Objects.requireNonNull(delegate);
    <span class="hljs-built_in">this</span>.submitTime = System.nanoTime();  <span class="hljs-comment">// è®°å½•æäº¤æ—¶é—´</span>
}
</code></pre>
<h3 data-id="heading-5">3. åœ¨ call() æ–¹æ³•ä¸­è®°å½•æ‰§è¡Œæ—¶é—´</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Override</span>
<span class="hljs-keyword">public</span> V <span class="hljs-title function_">call</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception {
    <span class="hljs-keyword">try</span> {
        startTime = System.nanoTime();   <span class="hljs-comment">// è®°å½•å¼€å§‹æ—¶é—´</span>
        <span class="hljs-keyword">return</span> delegate.call();           <span class="hljs-comment">// æ‰§è¡Œå®é™…ä»»åŠ¡</span>
    } <span class="hljs-keyword">finally</span> {
        endTime = System.nanoTime();      <span class="hljs-comment">// è®°å½•ç»“æŸæ—¶é—´</span>
        reportMetrics();                  <span class="hljs-comment">// ä¸ŠæŠ¥ç›‘æ§æŒ‡æ ‡</span>
    }
}
</code></pre>
<h3 data-id="heading-6">4. è®¡ç®—å„é˜¶æ®µè€—æ—¶</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/** æ‰§è¡Œè€—æ—¶ = ç»“æŸæ—¶é—´ - å¼€å§‹æ—¶é—´ */</span>
<span class="hljs-keyword">public</span> <span class="hljs-type">long</span> <span class="hljs-title function_">executionTime</span><span class="hljs-params">()</span> {
    <span class="hljs-keyword">return</span> endTime - startTime;
}

<span class="hljs-comment">/** ç­‰å¾…è€—æ—¶ = å¼€å§‹æ—¶é—´ - æäº¤æ—¶é—´ */</span>
<span class="hljs-keyword">public</span> <span class="hljs-type">long</span> <span class="hljs-title function_">waitTime</span><span class="hljs-params">()</span> {
    <span class="hljs-keyword">return</span> startTime - submitTime;
}

<span class="hljs-comment">/** æ€»è€—æ—¶ = ç»“æŸæ—¶é—´ - æäº¤æ—¶é—´ */</span>
<span class="hljs-keyword">public</span> <span class="hljs-type">long</span> <span class="hljs-title function_">totalTime</span><span class="hljs-params">()</span> {
    <span class="hljs-keyword">return</span> endTime - submitTime;
}
</code></pre>
<h3 data-id="heading-7">5. ä¸ŠæŠ¥ç›‘æ§æŒ‡æ ‡</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">reportMetrics</span><span class="hljs-params">()</span> {
    <span class="hljs-type">long</span> <span class="hljs-variable">execMs</span> <span class="hljs-operator">=</span> executionTime() / NANO_TO_MS;
    <span class="hljs-type">long</span> <span class="hljs-variable">waitMs</span> <span class="hljs-operator">=</span> waitTime() / NANO_TO_MS;
    <span class="hljs-type">long</span> <span class="hljs-variable">totalMs</span> <span class="hljs-operator">=</span> totalTime() / NANO_TO_MS;

    System.out.println(<span class="hljs-string">"["</span> + taskName + <span class="hljs-string">"] æ‰§è¡Œè€—æ—¶: "</span> + execMs + <span class="hljs-string">"ms"</span>);
    System.out.println(<span class="hljs-string">"["</span> + taskName + <span class="hljs-string">"] ç­‰å¾…è€—æ—¶: "</span> + waitMs + <span class="hljs-string">"ms"</span>);
    System.out.println(<span class="hljs-string">"["</span> + taskName + <span class="hljs-string">"] æ€»è€—æ—¶: "</span> + totalMs + <span class="hljs-string">"ms"</span>);
}
</code></pre>
<h2 data-id="heading-8">è®¾è®¡è¦ç‚¹</h2>





















<table><thead><tr><th>è¦ç‚¹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>çº³ç§’ç²¾åº¦</strong></td><td>ä½¿ç”¨ <code>System.nanoTime()</code> è€Œé <code>currentTimeMillis()</code>ï¼Œç²¾åº¦æ›´é«˜ä¸”ä¸å—ç³»ç»Ÿæ—¶é’Ÿè°ƒæ•´å½±å“</td></tr><tr><td><strong>finally å—</strong></td><td>ç¡®ä¿å³ä½¿ä»»åŠ¡æŠ›å¼‚å¸¸ä¹Ÿèƒ½è®°å½•ç»“æŸæ—¶é—´</td></tr><tr><td><strong>é€æ˜åŒ…è£…</strong></td><td>å¯¹ä¸šåŠ¡ä»£ç æ— ä¾µå…¥ï¼Œåªéœ€åœ¨æäº¤ä»»åŠ¡æ—¶åŒ…è£…ä¸€å±‚</td></tr></tbody></table>
<h2 data-id="heading-9">ä½¿ç”¨ç¤ºä¾‹</h2>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception {
    <span class="hljs-type">ExecutorService</span> <span class="hljs-variable">executor</span> <span class="hljs-operator">=</span> Executors.newFixedThreadPool(<span class="hljs-number">2</span>);

    <span class="hljs-comment">// æäº¤åŒ…è£…åçš„ä»»åŠ¡</span>
    Future&lt;String&gt; future = executor.submit(
        <span class="hljs-keyword">new</span> <span class="hljs-title class_">ScopedCallable</span>&lt;&gt;(<span class="hljs-string">"queryDB"</span>, () -&gt; {
            Thread.sleep(<span class="hljs-number">100</span>);  <span class="hljs-comment">// æ¨¡æ‹Ÿè€—æ—¶æ“ä½œ</span>
            <span class="hljs-keyword">return</span> <span class="hljs-string">"result"</span>;
        })
    );

    System.out.println(<span class="hljs-string">"ç»“æœ: "</span> + future.get());
    executor.shutdown();
}
</code></pre>
<p>è¾“å‡ºç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp">[<span class="hljs-meta">queryDB</span>] æ‰§è¡Œè€—æ—¶: <span class="hljs-number">102</span>ms
[<span class="hljs-meta">queryDB</span>] ç­‰å¾…è€—æ—¶: <span class="hljs-number">0</span>ms
[<span class="hljs-meta">queryDB</span>] æ€»è€—æ—¶: <span class="hljs-number">102</span>ms
ç»“æœ: result
</code></pre>
<h2 data-id="heading-10">æ€»ç»“</h2>
<p>é€šè¿‡è£…é¥°å™¨æ¨¡å¼åŒ…è£… <code>Callable</code>ï¼Œå¯ä»¥ä¼˜é›…åœ°å®ç°ï¼š</p>
<ol>
<li><strong>æäº¤æ—¶é—´ã€ç­‰å¾…æ—¶é—´ã€æ‰§è¡Œæ—¶é—´</strong> çš„è‡ªåŠ¨é‡‡é›†</li>
<li><strong>ç›‘æ§æŒ‡æ ‡</strong> çš„è‡ªåŠ¨ä¸ŠæŠ¥</li>
</ol>
<p>è¿™ç§æ–¹æ¡ˆçš„æ ¸å¿ƒä¼˜åŠ¿æ˜¯<strong>é›¶ä¾µå…¥</strong>â€”â€”ä¸šåŠ¡ä»£ç æ— éœ€ä¿®æ”¹ï¼Œåªéœ€åœ¨ä»»åŠ¡æäº¤å¤„ç»Ÿä¸€åŒ…è£…å³å¯ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item>  </channel></rss>