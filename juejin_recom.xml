<?xml version="1.0" encoding="UTF-8"?><rss version="2.0">  <channel>      <title>æ˜é‡‘æ–‡ç« æ¨è</title>      <link>https://juejin.cn/recommended?sort=newest</link>      <description>ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…æˆé•¿çš„ç¤¾åŒº</description>      <generator>python juejin_recom.py @Pi20</generator>      <item>    <title><![CDATA[Django 6.0æ¥è¢­ï¼è¿™äº›æ–°ç‰¹æ€§ï¼ŒçœŸçš„ä»¤äººæŒ¯å¥‹ï¼]]></title>    <link>https://juejin.cn/post/7582786655474171947</link>    <guid>https://juejin.cn/post/7582786655474171947</guid>    <pubDate>2025-12-13T03:04:24.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582786655474171947" data-draft-id="7582785032852701247" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Django 6.0æ¥è¢­ï¼è¿™äº›æ–°ç‰¹æ€§ï¼ŒçœŸçš„ä»¤äººæŒ¯å¥‹ï¼"/> <meta itemprop="keywords" content="Python,Django,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-13T03:04:24.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å€”å¼ºé’é“œä¸‰"/> <meta itemprop="url" content="https://juejin.cn/user/2942757076730455"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Django 6.0æ¥è¢­ï¼è¿™äº›æ–°ç‰¹æ€§ï¼ŒçœŸçš„ä»¤äººæŒ¯å¥‹ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2942757076730455/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å€”å¼ºé’é“œä¸‰
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-13T03:04:24.000Z" title="Sat Dec 13 2025 03:04:24 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»14åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åŸæ–‡é“¾æ¥ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fadamj.eu%2Ftech%2F2025%2F12%2F03%2Fdjango-whats-new-6.0%2F" target="_blank" title="https://adamj.eu/tech/2025/12/03/django-whats-new-6.0/" ref="nofollow noopener noreferrer">adamj.eu/tech/2025/1â€¦</a><br/>
ä½œè€…ï¼šAdam Johnson<br/>
è¯‘è€…ï¼šå€”å¼ºé’é“œä¸‰</p>
<h2 data-id="heading-0">å‰è¨€</h2>
<p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯<strong>å€”å¼ºé’é“œä¸‰</strong>ã€‚æ¬¢è¿å…³æ³¨æˆ‘ï¼Œ<strong>å¾®ä¿¡å…¬ä¼—å·ï¼šå€”å¼ºé’é“œä¸‰</strong>ã€‚æ¬¢è¿ç‚¹èµã€æ”¶è—ã€å…³æ³¨ï¼Œä¸€é”®ä¸‰è¿ï¼ï¼ï¼</p>
<p>Django 6.0 å·²äº 2025 å¹´ 12 æœˆ 3 æ—¥å‘å¸ƒï¼Œä¸ºè¿™ä¸ªå·²ç» 20 å²çš„ Python Web æ¡†æ¶å¼€å¯äº†æ–°çš„å‘å¸ƒå‘¨æœŸã€‚è¯¥ç‰ˆæœ¬å¸¦æ¥äº†ä¼—å¤šæ–°ç‰¹æ€§ï¼Œä»¥ä¸‹æ˜¯å…¶ä¸­çš„ä¸€äº›äº®ç‚¹ã€‚</p>
<h2 data-id="heading-1">ä½¿ç”¨ django-upgrade å‡çº§é¡¹ç›®</h2>
<p>å¦‚æœä½ æ­£åœ¨ä» Django 5.2 æˆ–æ›´æ—©ç‰ˆæœ¬å‡çº§é¡¹ç›®ï¼Œå¯ä»¥å°è¯•ä½¿ç”¨æˆ‘çš„å·¥å…· <a href="https://link.juejin.cn?target=https%3A%2F%2Fdjango-upgrade.readthedocs.io%2Fen%2Flatest%2F" target="_blank" title="https://django-upgrade.readthedocs.io/en/latest/" ref="nofollow noopener noreferrer">django-upgrade</a>ã€‚å®ƒä¼šè‡ªåŠ¨æ›´æ–°æ—§çš„ Django ä»£ç ä»¥ä½¿ç”¨æ–°ç‰¹æ€§ï¼Œä¿®å¤ä¸€äº›å¼ƒç”¨è­¦å‘Šï¼ŒåŒ…æ‹¬é’ˆå¯¹ Django 6.0 çš„äº”ä¸ªä¿®å¤ç¨‹åºã€‚</p>
<h2 data-id="heading-2">æ¨¡æ¿å±€éƒ¨å®šä¹‰ï¼ˆTemplate Partialsï¼‰</h2>
<p>Django æ¨¡æ¿è¯­è¨€ç°åœ¨æ”¯æŒæ¨¡æ¿å±€éƒ¨å®šä¹‰ï¼ˆtemplate partialsï¼‰ï¼Œè¿™ä½¿å¾—åœ¨æ¨¡æ¿æ–‡ä»¶ä¸­å°è£…å’Œé‡ç”¨å°å‹å‘½åç‰‡æ®µå˜å¾—æ›´åŠ å®¹æ˜“ã€‚å±€éƒ¨å®šä¹‰ç”±æ–°çš„ <code>{% partialdef %}</code> å’Œ <code>{% endpartialdef %}</code> æ ‡ç­¾æ ‡è®°ï¼Œå¯ä»¥åœ¨åŒä¸€æ¨¡æ¿ä¸­é‡å¤ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥å•ç‹¬æ¸²æŸ“ã€‚</p>
<h3 data-id="heading-3">åœ¨åŒä¸€æ¨¡æ¿ä¸­é‡å¤ä½¿ç”¨å±€éƒ¨å®šä¹‰</h3>
<p>ä»¥ä¸‹æ¨¡æ¿åœ¨åŒä¸€ä¸ªæ¨¡æ¿ä¸­é‡å¤ä½¿ç”¨äº†ä¸€ä¸ªåä¸º <code>filter_controls</code> çš„å±€éƒ¨å®šä¹‰ã€‚å®ƒåœ¨æ¨¡æ¿é¡¶éƒ¨å®šä¹‰ä¸€æ¬¡ï¼Œç„¶ååœ¨åé¢ä¸¤æ¬¡ä½¿ç”¨ã€‚ä½¿ç”¨å±€éƒ¨å®šä¹‰å¯ä»¥è®©æ¨¡æ¿é¿å…é‡å¤ï¼Œè€Œæ— éœ€å°†å†…å®¹æ¨é€åˆ°å•ç‹¬çš„åŒ…å«æ–‡ä»¶ä¸­ã€‚</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">section</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"videos"</span>&gt;</span>
  {% partialdef filter_controls %}
    <span class="hljs-tag">&lt;<span class="hljs-name">form</span>&gt;</span>
      {{ filter_form }}
    <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span>
  {% endpartialdef %}

  {% partial filter_controls %}

  <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>
    {% for video in videos %}
      <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>{{ video.title }}<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
        ...
      <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
    {% endfor %}
  <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>

  {% partial filter_controls %}
<span class="hljs-tag">&lt;/<span class="hljs-name">section</span>&gt;</span>
</code></pre>
<p>å®é™…ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡åœ¨ <code>partialdef</code> æ ‡ç­¾ä¸Šä½¿ç”¨ <code>inline</code> é€‰é¡¹ï¼Œè¿›ä¸€æ­¥ç®€åŒ–è¿™ç§æ¨¡å¼ï¼Œè¿™ä¼šå¯¼è‡´å®šä¹‰åœ¨åŸåœ°æ¸²æŸ“ã€‚</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">section</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"videos"</span>&gt;</span>
  {% partialdef filter_controls inline %}
    <span class="hljs-tag">&lt;<span class="hljs-name">form</span>&gt;</span>
      {{ filter_form }}
    <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span>
  {% endpartialdef %}

  <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>
    {% for video in videos %}
      <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>{{ video.title }}<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
        ...
      <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
    {% endfor %}
  <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>

  {% partial filter_controls %}
<span class="hljs-tag">&lt;/<span class="hljs-name">section</span>&gt;</span>
</code></pre>
<p>å½“ä½ å‘ç°è‡ªå·±åœ¨åŒä¸€ä¸ªæ¨¡æ¿ä¸­é‡å¤æ¨¡æ¿ä»£ç æ—¶ï¼Œå¯ä»¥ä½¿ç”¨è¿™ç§æ¨¡å¼ã€‚å› ä¸ºå±€éƒ¨å®šä¹‰å¯ä»¥ä½¿ç”¨å˜é‡ï¼Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨å®ƒä»¬æ¥æ¶ˆé™¤é‡å¤ï¼Œå½“æ¸²æŸ“å…·æœ‰ä¸åŒæ•°æ®çš„ç±»ä¼¼æ§ä»¶æ—¶ã€‚</p>
<h3 data-id="heading-4">å•ç‹¬æ¸²æŸ“å±€éƒ¨å®šä¹‰</h3>
<p>ä»¥ä¸‹æ¨¡æ¿å®šä¹‰äº†ä¸€ä¸ª <code>view_count</code> å±€éƒ¨å®šä¹‰ï¼Œå®ƒæ—¨åœ¨å•ç‹¬é‡æ–°æ¸²æŸ“ã€‚å®ƒä½¿ç”¨äº† <code>inline</code> é€‰é¡¹ï¼Œå› æ­¤å½“æ•´ä¸ªæ¨¡æ¿è¢«æ¸²æŸ“æ—¶ï¼Œå±€éƒ¨å®šä¹‰ä¼šè¢«åŒ…å«ã€‚</p>
<p>é¡µé¢ä½¿ç”¨äº† <a href="https://link.juejin.cn?target=https%3A%2F%2Fhtmx.org%2F" target="_blank" title="https://htmx.org/" ref="nofollow noopener noreferrer">htmx</a>ï¼Œé€šè¿‡æˆ‘çš„ <a href="https://link.juejin.cn?target=https%3A%2F%2Fdjango-htmx.readthedocs.io%2Fen%2Flatest%2F" target="_blank" title="https://django-htmx.readthedocs.io/en/latest/" ref="nofollow noopener noreferrer">django-htmx åŒ…</a>ï¼Œé€šè¿‡ <code>hx-*</code> å±æ€§å®šæœŸåˆ·æ–°æŸ¥çœ‹æ¬¡æ•°ã€‚æ¥è‡ª htmx çš„è¯·æ±‚ä¼šå‘é€åˆ°ä¸€ä¸ªä¸“ç”¨è§†å›¾ï¼Œè¯¥è§†å›¾é‡æ–°æ¸²æŸ“ <code>view_count</code> å±€éƒ¨å®šä¹‰ã€‚</p>
<pre><code class="hljs language-html" lang="html">{% load django_htmx %}
<span class="hljs-meta">&lt;!doctype <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>{{ video.title }}<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">video</span> <span class="hljs-attr">width</span>=<span class="hljs-string">"1280"</span> <span class="hljs-attr">height</span>=<span class="hljs-string">"720"</span> <span class="hljs-attr">controls</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">source</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"{{ video.file.url }}"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"video/mp4"</span>&gt;</span>
      Your browser does not support the video tag.
    <span class="hljs-tag">&lt;/<span class="hljs-name">video</span>&gt;</span>

    {% partialdef view_count inline %}
    <span class="hljs-tag">&lt;<span class="hljs-name">section</span>
      <span class="hljs-attr">class</span>=<span class="hljs-string">"view-count"</span>
      <span class="hljs-attr">hx-trigger</span>=<span class="hljs-string">"every 1s"</span>
      <span class="hljs-attr">hx-swap</span>=<span class="hljs-string">"outerHTML"</span>
      <span class="hljs-attr">hx-get</span>=<span class="hljs-string">"{% url 'video-view-count' video.id %}"</span>
    &gt;</span>
      {{ video.view_count }} views
    <span class="hljs-tag">&lt;/<span class="hljs-name">section</span>&gt;</span>
    {% endpartialdef %}

    {% htmx_script %}
  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<p>ä¸¤ä¸ªè§†å›¾çš„ç›¸å…³ä»£ç å¯èƒ½å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> django.shortcuts <span class="hljs-keyword">import</span> render

<span class="hljs-keyword">def</span> <span class="hljs-title function_">video</span>(<span class="hljs-params">request, video_id</span>):
    ...
    <span class="hljs-keyword">return</span> render(request, <span class="hljs-string">"video.html"</span>, {<span class="hljs-string">"video"</span>: video})

<span class="hljs-keyword">def</span> <span class="hljs-title function_">video_view_count</span>(<span class="hljs-params">request, video_id</span>):
    ...
    <span class="hljs-keyword">return</span> render(request, <span class="hljs-string">"video.html#view_count"</span>, {<span class="hljs-string">"video"</span>: video})
</code></pre>
<p>åˆå§‹çš„ <code>video</code> è§†å›¾æ¸²æŸ“äº†å®Œæ•´çš„æ¨¡æ¿ <code>video.html</code>ã€‚<code>video_view_count</code> è§†å›¾é€šè¿‡åœ¨æ¨¡æ¿åç§°åé™„åŠ  <code>#view_count</code> æ¥ä»…æ¸²æŸ“ <code>view_count</code> å±€éƒ¨å®šä¹‰ã€‚è¿™ç§è¯­æ³•ç±»ä¼¼äºåœ¨ URL ä¸­é€šè¿‡å…¶ ID å¼•ç”¨ HTML ç‰‡æ®µçš„æ–¹å¼ã€‚</p>
<h2 data-id="heading-5">ä»»åŠ¡æ¡†æ¶ï¼ˆTasks Frameworkï¼‰</h2>
<p>Django ç°åœ¨åŒ…å«äº†ä¸€ä¸ªå†…ç½®çš„ä»»åŠ¡æ¡†æ¶ï¼Œç”¨äºåœ¨ HTTP è¯·æ±‚ - å“åº”å‘¨æœŸä¹‹å¤–è¿è¡Œä»£ç ã€‚è¿™ä½¿å¾—å¯ä»¥å°†å·¥ä½œï¼ˆå¦‚å‘é€ç”µå­é‚®ä»¶æˆ–å¤„ç†æ•°æ®ï¼‰å¸è½½åˆ°åå°å·¥ä½œç¨‹åºä¸­ã€‚</p>
<p>æœ¬è´¨ä¸Šï¼Œè¿™æ˜¯ä¸€ä¸ªç”¨äºå®šä¹‰å’Œæ’é˜Ÿåå°ä»»åŠ¡çš„æ–° APIâ€”â€”éå¸¸é…·ï¼</p>
<p>åå°ä»»åŠ¡æ˜¯ä¸€ç§åœ¨è¯·æ±‚ - å“åº”å‘¨æœŸä¹‹å¤–è¿è¡Œä»£ç çš„æ–¹å¼ã€‚å®ƒä»¬æ˜¯ Web åº”ç”¨ç¨‹åºä¸­çš„å¸¸è§éœ€æ±‚ï¼Œç”¨äºå‘é€ç”µå­é‚®ä»¶ã€å¤„ç†å›¾åƒã€ç”ŸæˆæŠ¥å‘Šç­‰ã€‚</p>
<p>å†å²ä¸Šï¼ŒDjango æ²¡æœ‰æä¾›ä»»ä½•åå°ä»»åŠ¡ç³»ç»Ÿï¼Œè€Œæ˜¯å®Œå…¨å¿½ç•¥äº†è¿™ä¸ªé—®é¢˜ã€‚å¼€å‘äººå‘˜ä¾èµ–äºç¬¬ä¸‰æ–¹åŒ…ï¼Œå¦‚ <a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.celeryq.dev%2Fen%2Fstable%2F" target="_blank" title="https://docs.celeryq.dev/en/stable/" ref="nofollow noopener noreferrer">Celery</a> æˆ– <a href="https://link.juejin.cn?target=https%3A%2F%2Fdjango-q2.readthedocs.io%2Fen%2Fmaster%2F" target="_blank" title="https://django-q2.readthedocs.io/en/master/" ref="nofollow noopener noreferrer">Django Q2</a>ã€‚å°½ç®¡è¿™äº›ç³»ç»Ÿå¾ˆå¥½ï¼Œä½†å®ƒä»¬è®¾ç½®å’Œç»´æŠ¤èµ·æ¥å¯èƒ½å¾ˆå¤æ‚ï¼Œè€Œä¸”é€šå¸¸ä¸ç¬¦åˆ Django çš„â€œè‡ªç„¶â€é£æ ¼ã€‚</p>
<p>æ–°çš„ä»»åŠ¡æ¡†æ¶é€šè¿‡æä¾›ä¸€ä¸ªå®šä¹‰åå°ä»»åŠ¡çš„æ¥å£æ¥å¡«è¡¥è¿™ä¸€ç©ºç™½ï¼Œä»»åŠ¡è¿è¡Œå™¨åŒ…å¯ä»¥ä¸ä¹‹é›†æˆã€‚è¿™ä¸ªå…±åŒçš„åŸºç¡€å…è®¸ç¬¬ä¸‰æ–¹ Django åŒ…ä»¥æ ‡å‡†æ–¹å¼å®šä¹‰ä»»åŠ¡ï¼Œå‡è®¾ä½ ä¼šä½¿ç”¨å…¼å®¹çš„ä»»åŠ¡è¿è¡Œå™¨æ¥æ‰§è¡Œå®ƒä»¬ã€‚</p>
<p>ä½¿ç”¨æ–°çš„ <code>@task</code> è£…é¥°å™¨å®šä¹‰ä»»åŠ¡ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> django.tasks <span class="hljs-keyword">import</span> task

<span class="hljs-meta">@task</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">resize_video</span>(<span class="hljs-params">video_id</span>):
    ...
</code></pre>
<p>ç„¶åä½¿ç”¨ <code>Task.enqueue()</code> æ–¹æ³•å°†å®ƒä»¬æ’é˜Ÿè¿›è¡Œåå°æ‰§è¡Œï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> example.tasks <span class="hljs-keyword">import</span> resize_video

<span class="hljs-keyword">def</span> <span class="hljs-title function_">upload_video</span>(<span class="hljs-params">request</span>):
    ...
    resize_video.enqueue(video.<span class="hljs-built_in">id</span>)
    ...
</code></pre>
<h3 data-id="heading-6">æ‰§è¡Œä»»åŠ¡</h3>
<p>ç›®å‰ï¼ŒDjango å¹¶æ²¡æœ‰åŒ…å«ä¸€ä¸ªç”Ÿäº§å°±ç»ªçš„ä»»åŠ¡åç«¯ï¼Œåªæœ‰ä¸¤ä¸ªé€‚ç”¨äºå¼€å‘å’Œæµ‹è¯•çš„åç«¯ï¼š</p>
<ul>
<li><code>ImmediateBackend</code>ï¼šåŒæ­¥è¿è¡Œä»»åŠ¡ï¼Œç›´åˆ°å®ƒä»¬å®Œæˆæ‰ä¼šé˜»å¡ã€‚</li>
<li><code>DummyBackend</code>ï¼šå½“ä»»åŠ¡è¢«æ’é˜Ÿæ—¶ä»€ä¹ˆéƒ½ä¸åšï¼Œä½†å…è®¸ä¹‹åæ£€æŸ¥ä»»åŠ¡ã€‚åœ¨æµ‹è¯•ä¸­å¾ˆæœ‰ç”¨ï¼Œä½ å¯ä»¥æ–­è¨€ä»»åŠ¡è¢«æ’é˜Ÿäº†ï¼Œè€Œæ— éœ€å®é™…è¿è¡Œå®ƒä»¬ã€‚</li>
</ul>
<p>å¯¹äºç”Ÿäº§ä½¿ç”¨ï¼Œä½ éœ€è¦ä½¿ç”¨ä¸€ä¸ªç¬¬ä¸‰æ–¹åŒ…ï¼Œå…¶ä¸­ <a href="https://link.juejin.cn?target=https%3A%2F%2Fpypi.org%2Fproject%2Fdjango-tasks%2F" target="_blank" title="https://pypi.org/project/django-tasks/" ref="nofollow noopener noreferrer">django-tasks</a> æ˜¯ä¸»è¦çš„é€‰æ‹©ã€‚å®ƒæä¾›äº† <code>DatabaseBackend</code>ï¼Œç”¨äºå°†ä»»åŠ¡å­˜å‚¨åœ¨ä½ çš„ SQL æ•°æ®åº“ä¸­ï¼Œå¯¹äºè®¸å¤šé¡¹ç›®æ¥è¯´æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„è§£å†³æ–¹æ¡ˆï¼Œé¿å…äº†é¢å¤–çš„åŸºç¡€è®¾æ–½ï¼Œå¹¶å…è®¸åœ¨æ•°æ®åº“äº‹åŠ¡ä¸­åŸå­æ€§åœ°æ’é˜Ÿä»»åŠ¡ã€‚æˆ‘ä»¬å¯èƒ½ä¼šåœ¨é€‚å½“çš„æ—¶å€™çœ‹åˆ°è¿™ä¸ªåç«¯åˆå¹¶åˆ° Django ä¸­ï¼Œæˆ–è€…è‡³å°‘æˆä¸ºä¸€ä¸ªå®˜æ–¹åŒ…ï¼Œä»¥å¸®åŠ©ä½¿ Django åœ¨åå°ä»»åŠ¡æ–¹é¢â€œå¼€ç®±å³ç”¨â€ã€‚</p>
<p>è¦ä½¿ç”¨ django-tasks çš„ <code>DatabaseBackend</code>ï¼Œé¦–å…ˆå®‰è£…è¯¥åŒ…ï¼š</p>
<p>å…¶æ¬¡ï¼Œå°†è¿™ä¸¤ä¸ªåº”ç”¨æ·»åŠ åˆ°ä½ çš„ <code>INSTALLED_APPS</code> è®¾ç½®ä¸­ï¼š</p>
<pre><code class="hljs language-python" lang="python">INSTALLED_APPS = [
    <span class="hljs-comment"># ...</span>
    <span class="hljs-string">"django_tasks"</span>,
    <span class="hljs-string">"django_tasks.backends.database"</span>,
    <span class="hljs-comment"># ...</span>
]
</code></pre>
<p>ç¬¬ä¸‰ï¼Œå°† <code>DatabaseBackend</code> é…ç½®ä¸ºä½ çš„ä»»åŠ¡åç«¯ï¼Œä½¿ç”¨æ–°çš„ <code>TASKS</code> è®¾ç½®ï¼š</p>
<pre><code class="hljs language-python" lang="python">TASKS = {
    <span class="hljs-string">"default"</span>: {
        <span class="hljs-string">"BACKEND"</span>: <span class="hljs-string">"django_tasks.backends.database.DatabaseBackend"</span>,
    },
}
</code></pre>
<p>ç¬¬å››ï¼Œè¿è¡Œè¿ç§»ä»¥åˆ›å»ºå¿…è¦çš„æ•°æ®åº“è¡¨ã€‚</p>
<p>æœ€åï¼Œè¦è¿è¡Œä»»åŠ¡å·¥ä½œè¿›ç¨‹ï¼Œä½¿ç”¨åŒ…çš„ <code>db_worker</code> ç®¡ç†å‘½ä»¤ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">$ ./manage.py db_worker
Starting worker worker_id=jWLMLrms3C2NcUODYeatsqCFvd5rK6DM queues=default
</code></pre>
<p>è¯¥è¿›ç¨‹ä¼šæ— é™æœŸè¿è¡Œï¼Œè½®è¯¢ä»»åŠ¡å¹¶æ‰§è¡Œå®ƒä»¬ï¼ŒåŒæ—¶è®°å½•äº‹ä»¶ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">Task <span class="hljs-built_in">id</span>=10b794ed-9b64-4eed-950c-fcc92cd6784b path=example.tasks.echo state=RUNNING
Hello from <span class="hljs-built_in">test</span> task!
Task <span class="hljs-built_in">id</span>=10b794ed-9b64-4eed-950c-fcc92cd6784b path=example.tasks.echo state=SUCCEEDED
</code></pre>
<p>ä½ å¸Œæœ›åœ¨ç”Ÿäº§ç¯å¢ƒä¸­è¿è¡Œ <code>db_worker</code>ï¼Œå¹¶ä¸”å¦‚æœä½ å¸Œæœ›åœ¨å¼€å‘ä¸­æµ‹è¯•åå°ä»»åŠ¡æ‰§è¡Œï¼Œä¹Ÿåº”è¯¥è¿è¡Œå®ƒã€‚</p>
<h2 data-id="heading-7">å†…å®¹å®‰å…¨ç­–ç•¥ï¼ˆCSPï¼‰æ”¯æŒ</h2>
<p>Django ç°åœ¨æä¾›äº†å¯¹ <a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.djangoproject.com%2Fen%2Fstable%2Ftopics%2Fsecurity%2F%23security-csp" target="_blank" title="https://docs.djangoproject.com/en/stable/topics/security/#security-csp" ref="nofollow noopener noreferrer">å†…å®¹å®‰å…¨ç­–ç•¥ï¼ˆCSPï¼‰</a> æ ‡å‡†çš„å†…ç½®æ”¯æŒï¼Œè¿™ä½¿å¾—ä¿æŠ¤ Web åº”ç”¨ç¨‹åºå…å—å†…å®¹æ³¨å…¥æ”»å‡»ï¼ˆå¦‚è·¨ç«™è„šæœ¬æ”»å‡»ï¼ˆXSSï¼‰ï¼‰å˜å¾—æ›´åŠ å®¹æ˜“ã€‚CSP å…è®¸é€šè¿‡ä¸ºæµè§ˆå™¨æä¾›ä¸¥æ ¼çš„è§„åˆ™æ¥å£°æ˜å“ªäº›è„šæœ¬ã€æ ·å¼ã€å›¾åƒæˆ–å…¶ä»–èµ„æºå¯ä»¥è¢«åŠ è½½ï¼Œä»è€Œå£°æ˜å¯ä¿¡çš„å†…å®¹æ¥æºã€‚</p>
<p>æˆ‘å¯¹æ­¤æ„Ÿåˆ°éå¸¸å…´å¥‹ï¼Œå› ä¸ºæˆ‘æ˜¯ä¸€ä¸ªå®‰å…¨çˆ±å¥½è€…ï¼Œå¤šå¹´æ¥ä¸€ç›´åœ¨ä¸ºå®¢æˆ·é¡¹ç›®éƒ¨ç½² CSPã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FHTTP%2FGuides%2FCSP" target="_blank" title="https://developer.mozilla.org/en-US/docs/Web/HTTP/Guides/CSP" ref="nofollow noopener noreferrer">CSP</a> æ˜¯ä¸€ç§å®‰å…¨æ ‡å‡†ï¼Œå¯ä»¥ä¿æŠ¤ä½ çš„ç½‘ç«™å…å—è·¨ç«™è„šæœ¬æ”»å‡»ï¼ˆXSSï¼‰å’Œå…¶ä»–ä»£ç æ³¨å…¥æ”»å‡»ã€‚ä½ è®¾ç½®ä¸€ä¸ª <code>content-security-policy</code> æ ‡å¤´æ¥å£°æ˜å“ªäº›å†…å®¹æ¥æºå¯¹ä½ çš„ç½‘ç«™æ˜¯å¯ä¿¡çš„ï¼Œç„¶åæµè§ˆå™¨ä¼šé˜»æ­¢æ¥è‡ªå…¶ä»–æ¥æºçš„å†…å®¹ã€‚ä¾‹å¦‚ï¼Œä½ å¯èƒ½ä¼šå£°æ˜åªæœ‰ä½ åŸŸåä¸‹çš„è„šæœ¬æ‰æ˜¯å…è®¸çš„ï¼Œå› æ­¤å¦‚æœæ”»å‡»è€…è®¾æ³•æ³¨å…¥ä¸€ä¸ªæŒ‡å‘ evil.com çš„ <code>&lt;script&gt;</code> æ ‡ç­¾ï¼Œæµè§ˆå™¨ä¼šé˜»æ­¢åŠ è½½å®ƒï¼Œå› ä¸ºè¯¥æ¥æºæœªè¢«ä¿¡ä»»ã€‚</p>
<p>ä»¥å‰ï¼ŒDjango æ²¡æœ‰å†…ç½®çš„ CSP æ”¯æŒï¼Œå¼€å‘äººå‘˜ä¸å¾—ä¸ä¾èµ–äºè‡ªå·±æ„å»ºï¼Œæˆ–è€…ä½¿ç”¨åƒéå¸¸æµè¡Œçš„ <a href="https://link.juejin.cn?target=https%3A%2F%2Fdjango-csp.readthedocs.io%2Fen%2Flatest%2F" target="_blank" title="https://django-csp.readthedocs.io/en/latest/" ref="nofollow noopener noreferrer">django-csp</a> è¿™æ ·çš„ç¬¬ä¸‰æ–¹åŒ…ã€‚ä½†è¿™æœ‰ç‚¹ä¸æ–¹ä¾¿ï¼Œå› ä¸ºå®ƒæ„å‘³ç€å…¶ä»–ç¬¬ä¸‰æ–¹åŒ…æ— æ³•å¯é åœ°ä¸ CSP é›†æˆï¼Œå› ä¸ºæ²¡æœ‰é€šç”¨çš„ API å¯ä»¥ä½¿ç”¨ã€‚</p>
<p>æ–°çš„ CSP æ”¯æŒæä¾›äº† django-csp æ‰€æœ‰çš„æ ¸å¿ƒåŠŸèƒ½ï¼Œå¹¶ä¸”å…·æœ‰ç¨å¾®æ•´æ´ä¸€äº›ä¸”æ›´ç¬¦åˆ Django é£æ ¼çš„ APIã€‚è¦å¼€å§‹ä½¿ç”¨ï¼Œ<strong>é¦–å…ˆ</strong> å°† <code>ContentSecurityPolicyMiddleware</code> æ·»åŠ åˆ°ä½ çš„ <code>MIDDLEWARE</code> è®¾ç½®ä¸­ï¼š</p>
<pre><code class="hljs language-python" lang="python">MIDDLEWARE = [
    <span class="hljs-comment"># ...</span>
    <span class="hljs-string">"django.middleware.csp.ContentSecurityPolicyMiddleware"</span>,
    <span class="hljs-comment"># ...</span>
]
</code></pre>
<p>å°†å…¶æ”¾ç½®åœ¨ <code>SecurityMiddleware</code> é™„è¿‘ï¼Œå› ä¸ºå®ƒç±»ä¼¼äºä¸ºæ‰€æœ‰å“åº”æ·»åŠ å®‰å…¨ç›¸å…³æ ‡å¤´ã€‚ï¼ˆä½ ç¡®å®å¯ç”¨äº† <code>SecurityMiddleware</code>ï¼Œå¯¹å§ï¼Ÿï¼‰</p>
<p><strong>å…¶æ¬¡</strong>ï¼Œä½¿ç”¨æ–°çš„è®¾ç½®é…ç½®ä½ çš„ CSP ç­–ç•¥ï¼š</p>
<ul>
<li><code>SECURE_CSP</code>ï¼šé…ç½® <code>content-security-policy</code> æ ‡å¤´ï¼Œè¿™æ˜¯ä½ å®é™…æ‰§è¡Œçš„ç­–ç•¥ã€‚</li>
<li><code>SECURE_CSP_REPORT_ONLY</code>ï¼šé…ç½® <code>content-security-policy-report-only</code> æ ‡å¤´ï¼Œè¿™è®¾ç½®äº†ä¸€ä¸ªéå¼ºåˆ¶ç­–ç•¥ï¼Œæµè§ˆå™¨ä¼šå‘æŒ‡å®šçš„ç«¯ç‚¹æŠ¥å‘Šè¿åç­–ç•¥çš„æƒ…å†µã€‚è¿™ä¸ªé€‰é¡¹å¯¹äºåœ¨å¼ºåˆ¶æ‰§è¡Œç­–ç•¥ä¹‹å‰æµ‹è¯•å’Œç›‘æ§ç­–ç•¥éå¸¸æœ‰ç”¨ã€‚</li>
</ul>
<p>ä¾‹å¦‚ï¼Œè¦é‡‡ç”¨ web.dev æ¨èçš„åŸºäº nonce çš„ä¸¥æ ¼ CSPï¼Œä½ å¯ä»¥ä»ä»¥ä¸‹è®¾ç½®å¼€å§‹ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> django.utils.csp <span class="hljs-keyword">import</span> CSP

SECURE_CSP_REPORT_ONLY = {
    <span class="hljs-string">"script-src"</span>: [CSP.NONCE, CSP.STRICT_DYNAMIC],
    <span class="hljs-string">"object-src"</span>: [CSP.NONE],
    <span class="hljs-string">"base-uri"</span>: [CSP.NONE],
}
</code></pre>
<p>ä¸Šé¢ä½¿ç”¨çš„ <code>CSP</code> æšä¸¾æä¾›äº† CSP æŒ‡ä»¤çš„å¸¸é‡ï¼Œä»¥å¸®åŠ©é¿å…æ‹¼å†™é”™è¯¯ã€‚</p>
<p>è¿™ä¸ªç­–ç•¥éå¸¸ä¸¥æ ¼ï¼Œå¦‚æœç›´æ¥éƒ¨ç½²ï¼Œä¼šç ´åå¤§å¤šæ•°ç°æœ‰ç½‘ç«™ï¼Œå› ä¸ºå®ƒéœ€è¦ä½¿ç”¨ nonceï¼Œæ¥ä¸‹æ¥ä¼šä»‹ç»ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆç¤ºä¾‹ä¸­æ˜¾ç¤ºä»æŠ¥å‘Šæ¨¡å¼æ ‡å¤´å¼€å§‹ï¼Œä»¥å¸®åŠ©åœ¨å¼ºåˆ¶æ‰§è¡Œç­–ç•¥ä¹‹å‰è·Ÿè¸ªéœ€è¦ä¿®å¤çš„åœ°æ–¹ã€‚ä½ ä¹‹åä¼šå°† <code>SECURE_CSP</code> è®¾ç½®æ”¹ä¸ºå¼ºåˆ¶æ‰§è¡Œç­–ç•¥ã€‚</p>
<p>æ€»ä¹‹ï¼Œè¿™äº›å°±æ˜¯è®¾ç½®æ–°çš„ CSP æ”¯æŒçš„ä¸¤ä¸ªåŸºæœ¬æ­¥éª¤ï¼</p>
<h3 data-id="heading-8">éšæœºæ•°ç”Ÿæˆï¼ˆNonce Generationï¼‰</h3>
<p>æ–°ç‰¹æ€§çš„å…³é”®éƒ¨åˆ†ä¹‹ä¸€æ˜¯ï¼Œå½“ä½¿ç”¨ CSP ä¸­é—´ä»¶æ—¶ï¼ŒDjango ç°åœ¨å†…ç½®äº† <strong>éšæœºæ•°ç”Ÿæˆ</strong> åŠŸèƒ½ã€‚éšæœºæ•°æ˜¯ CSP ä¸­çš„ä¸€ç§å®‰å…¨ç‰¹æ€§ï¼Œå…è®¸ä½ é€šè¿‡åœ¨ <code>&lt;script&gt;</code> å’Œ <code>&lt;style&gt;</code> æ ‡ç­¾ä¸Šä½¿ç”¨ <code>nonce</code> å±æ€§æ¥æ ‡è®°ç‰¹å®šçš„æ ‡ç­¾ä¸ºå¯ä¿¡çš„ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"/static/app.js"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"module"</span> <span class="hljs-attr">nonce</span>=<span class="hljs-string">"55vsH4w7ATHB85C3MbPr_g"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p>éšæœºæ•°å€¼æ˜¯æŒ‰è¯·æ±‚éšæœºç”Ÿæˆçš„ï¼Œå¹¶åŒ…å«åœ¨ CSP æ ‡å¤´ä¸­ã€‚æ‰§è¡Œå†…å®¹æ³¨å…¥çš„æ”»å‡»è€…æ— æ³•çŒœæµ‹éšæœºæ•°ï¼Œå› æ­¤æµè§ˆå™¨å¯ä»¥åªä¿¡ä»»é‚£äº›åŒ…å«æ­£ç¡®éšæœºæ•°çš„æ ‡ç­¾ã€‚å› ä¸ºéšæœºæ•°ç”Ÿæˆç°åœ¨æ˜¯ Django çš„ä¸€éƒ¨åˆ†ï¼Œç¬¬ä¸‰æ–¹åŒ…å¯ä»¥ä¾èµ–å®ƒä¸ºå®ƒä»¬çš„ <code>&lt;script&gt;</code> å’Œ <code>&lt;style&gt;</code> æ ‡ç­¾æä¾›éšæœºæ•°ï¼Œå¦‚æœä½ é‡‡ç”¨å¸¦æœ‰éšæœºæ•°çš„ CSPï¼Œå®ƒä»¬å°†ç»§ç»­å·¥ä½œã€‚</p>
<p>éšæœºæ•°æ˜¯å½“ä»Šä½¿ç”¨ CSP çš„æ¨èæ–¹å¼ï¼Œé¿å…äº†ä»¥å‰åŸºäºå…è®¸åˆ—è¡¨çš„æ–¹æ³•æ‰€å¸¦æ¥çš„é—®é¢˜ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆä¸Šé¢æ¨èçš„ç­–ç•¥å¯ç”¨äº†éšæœºæ•°ã€‚è¦é‡‡ç”¨åŸºäºéšæœºæ•°çš„ç­–ç•¥ï¼Œä½ éœ€è¦é€šè¿‡ä»¥ä¸‹æ­¥éª¤ä¸º <code>&lt;script&gt;</code> å’Œ <code>&lt;style&gt;</code> æ ‡ç­¾æ·»åŠ éšæœºæ•°å€¼ã€‚</p>
<p><strong>é¦–å…ˆ</strong>ï¼Œå°†æ–°çš„ <code>csp</code> æ¨¡æ¿ä¸Šä¸‹æ–‡å¤„ç†å™¨æ·»åŠ åˆ°ä½ çš„ <code>TEMPLATES</code> è®¾ç½®ä¸­ï¼š</p>
<pre><code class="hljs language-python" lang="python">TEMPLATES = [
    {
        <span class="hljs-string">"BACKEND"</span>: <span class="hljs-string">"django.template.backends.django.DjangoTemplates"</span>,
        <span class="hljs-string">"OPTIONS"</span>: {
            <span class="hljs-string">"context_processors"</span>: [
                <span class="hljs-comment"># ...</span>
                <span class="hljs-string">"django.template.context_processors.csp"</span>,
            ],
        },
    },
]
</code></pre>
<p><strong>å…¶æ¬¡</strong>ï¼Œä½¿ç”¨ <code>nonce="{{ csp_nonce }}"</code> ä¸º <code>&lt;script&gt;</code> å’Œ <code>&lt;style&gt;</code> æ ‡ç­¾æ·»åŠ æ³¨é‡Šï¼š</p>
<pre><code class="hljs language-html" lang="html">-   <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"{% static 'app.js' %}"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"module"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
+   <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"{% static 'app.js' %}"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"module"</span> <span class="hljs-attr">nonce</span>=<span class="hljs-string">"{{ csp_nonce }}"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p>è¿™å¯èƒ½ä¼šå¾ˆç¹çä¸”å®¹æ˜“å‡ºé”™ï¼Œå› æ­¤é¦–å…ˆä½¿ç”¨æŠ¥å‘Šæ¨¡å¼æ¥ç›‘æ§è¿è§„æƒ…å†µå¯èƒ½ä¼šå¾ˆæœ‰ç”¨ï¼Œå°¤å…¶æ˜¯åœ¨å¤§å‹é¡¹ç›®ä¸­ã€‚</p>
<p>æ€»ä¹‹ï¼Œæ­£ç¡®éƒ¨ç½² CSP å¯èƒ½ä¼šæˆä¸ºå¦ä¸€ç¯‡åšæ–‡çš„ä¸»é¢˜ï¼Œç”šè‡³æ˜¯ä¸€æœ¬ä¹¦çš„ç« èŠ‚ï¼Œæ‰€ä»¥æˆ‘ä»¬å°±å…ˆè¯´åˆ°è¿™é‡Œã€‚æ›´å¤šä¿¡æ¯ï¼Œè¯·æŸ¥çœ‹ <a href="https://link.juejin.cn?target=https%3A%2F%2Fweb.dev%2Farticles%2Fstrict-csp" target="_blank" title="https://web.dev/articles/strict-csp" ref="nofollow noopener noreferrer">web.dev æ–‡ç« </a>å’Œ <a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FHTTP%2FCSP" target="_blank" title="https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP" ref="nofollow noopener noreferrer">MDN CSP æŒ‡å—</a>ã€‚</p>
<h2 data-id="heading-9">é‚®ä»¶ API æ›´æ–°</h2>
<p>Django ä¸­çš„é‚®ä»¶å¤„ç†ç°åœ¨ä½¿ç”¨äº† Python çš„ç°ä»£é‚®ä»¶ APIï¼Œè¯¥ API åœ¨ Python 3.6 ä¸­å¼•å…¥ã€‚è¿™ä¸ªä»¥ <a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.python.org%2F3%2Flibrary%2Femail.message.html%23email.message.EmailMessage" target="_blank" title="https://docs.python.org/3/library/email.message.html#email.message.EmailMessage" ref="nofollow noopener noreferrer"><code>email.message.EmailMessage</code></a> ç±»ä¸ºä¸­å¿ƒçš„ APIï¼Œä¸ºæ’°å†™å’Œå‘é€é‚®ä»¶æä¾›äº†ä¸€ä¸ªæ›´ç®€æ´ä¸”æ”¯æŒ Unicode çš„æ¥å£ã€‚</p>
<p>è¿™æ˜¯ä¸€ä¸ªé‡å¤§å˜åŒ–ï¼Œä½†å¦‚æœä½ çš„é¡¹ç›®åªä½¿ç”¨åŸºæœ¬çš„é‚®ä»¶åŠŸèƒ½ï¼Œå¯èƒ½ä¸ä¼šå—åˆ°å½±å“ã€‚ä½ ä»ç„¶å¯ä»¥åƒä»¥å‰ä¸€æ ·ä½¿ç”¨ Django çš„ <code>send_mail()</code> å‡½æ•°å’Œ <code>EmailMessage</code> ç±»ï¼Œä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> django.core.mail <span class="hljs-keyword">import</span> EmailMessage

email = EmailMessage(
    subject=<span class="hljs-string">"ğŸ¼ éœ€è¦æ›´å¤šç«¹å­"</span>,
    body=<span class="hljs-string">"æˆ‘ä»¬çš„ç«¹å­å¿«æ²¡äº†ï¼Œè¯·åœ¨ç†ŠçŒ«å‘ç°ä¹‹å‰è¡¥è´§ï¼"</span>,
    from_email=<span class="hljs-string">"zookeeper@example.com"</span>,
    to=[<span class="hljs-string">"supplies@example.com"</span>],
)
email.attach_file(<span class="hljs-string">"/media/bamboo_cupboard.jpg"</span>)
email.send()
</code></pre>
<p>å…³é”®çš„å˜åŒ–æ˜¯ï¼Œåœ¨ä½ è°ƒç”¨ Django <code>EmailMessage</code> å¯¹è±¡çš„ <code>send()</code> æ–¹æ³•æ—¶ï¼Œå®ƒç°åœ¨ä¼šåœ¨å‘é€ä¹‹å‰å°†è‡ªå·±è½¬æ¢ä¸º Python çš„æ–° <code>email.message.EmailMessage</code> ç±»å‹ã€‚</p>
<p>ç°ä»£åŒ–å¸¦æ¥äº†ä»¥ä¸‹å¥½å¤„ï¼š</p>
<ol>
<li><strong>æ›´å°‘çš„é”™è¯¯</strong>ï¼šPython æ—§é‚®ä»¶ API ä¸­çš„è®¸å¤šè¾¹ç¼˜æƒ…å†µé”™è¯¯å·²åœ¨æ–° API ä¸­ä¿®å¤ã€‚</li>
<li><strong>Django æ›´ç®€æ´</strong>ï¼šDjango é‚®ä»¶ä»£ç ä¸­çš„ä¸€ç³»åˆ—å˜é€šæ–¹æ³•å’Œå®‰å…¨ä¿®å¤å·²è¢«ç§»é™¤ã€‚</li>
<li><strong>æ›´æ–¹ä¾¿çš„ API</strong>ï¼šæ–° API æ”¯æŒä¸€äº›ä¾¿åˆ©åŠŸèƒ½ï¼Œä¾‹å¦‚ä¸‹é¢çš„å†…è”é™„ä»¶ç¤ºä¾‹ã€‚</li>
</ol>
<h3 data-id="heading-10">ä½¿ç”¨ <code>MIMEPart</code> æ›´å®¹æ˜“åœ°æ·»åŠ å†…è”é™„ä»¶</h3>
<p>Django çš„ <code>EmailMessage.attach()</code> æ–¹æ³•å…è®¸ä½ å°†æ–‡ä»¶ä½œä¸ºé™„ä»¶æ·»åŠ ã€‚ç”µå­é‚®ä»¶æ”¯æŒå›¾åƒä½œä¸º <strong>å†…è”é™„ä»¶</strong>ï¼Œè¿™äº›å›¾åƒå¯ä»¥æ˜¾ç¤ºåœ¨ HTML é‚®ä»¶æ­£æ–‡ä¸­ã€‚</p>
<p>è™½ç„¶ä½ ä»¥å‰å¯ä»¥ä½¿ç”¨ <code>EmailMessage.attach()</code> æ·»åŠ å†…è”é™„ä»¶ï¼Œä½†æ“ä½œèµ·æ¥æœ‰ç‚¹å¤æ‚ï¼Œéœ€è¦ä½¿ç”¨ä¸€ä¸ªé—ç•™ç±»ã€‚ç°åœ¨ï¼Œä½ å¯ä»¥é€šè¿‡è°ƒç”¨è¯¥æ–¹æ³•å¹¶ä¼ å…¥ä¸€ä¸ª Python çš„ <code>email.message.MIMEPart</code> å¯¹è±¡ï¼Œåœ¨å‡ ä¸ªæ­¥éª¤ä¸­æ·»åŠ å†…è”é™„ä»¶ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> email.utils
<span class="hljs-keyword">from</span> email.message <span class="hljs-keyword">import</span> MIMEPart
<span class="hljs-keyword">from</span> django.core.mail <span class="hljs-keyword">import</span> EmailMultiAlternatives

message = EmailMultiAlternatives(
    subject=<span class="hljs-string">"å¯çˆ±ç†ŠçŒ«è­¦æŠ¥"</span>,
    body=<span class="hljs-string">"è¿™é‡Œæœ‰ä¸€å¼ å¯çˆ±çš„ç†ŠçŒ«ç…§ç‰‡é€ç»™ä½ ï¼"</span>,
    from_email=<span class="hljs-string">"cute@example.com"</span>,
    to=[<span class="hljs-string">"fans@example.com"</span>],
)
<span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">"panda.jpg"</span>, <span class="hljs-string">"rb"</span>) <span class="hljs-keyword">as</span> f:
    panda_jpeg = f.read()

cid = email.utils.make_msgid()
inline_image = MIMEPart()
inline_image.set_content(
    panda_jpeg,
    maintype=<span class="hljs-string">"image"</span>,
    subtype=<span class="hljs-string">"jpeg"</span>,
    disposition=<span class="hljs-string">"inline"</span>,
    cid=cid,
)
message.attach(inline_image)
message.attach_alternative(
    <span class="hljs-string">f'&lt;h1&gt;å¯çˆ±ç†ŠçŒ«å®å®è­¦æŠ¥ï¼&lt;/h1&gt;&lt;img src="cid:<span class="hljs-subst">{cid[<span class="hljs-number">1</span>:-<span class="hljs-number">1</span>]}</span>"&gt;'</span>,
    <span class="hljs-string">"text/html"</span>,
)
</code></pre>
<p>è¿™ä¸ª API å¹¶ä¸ç®€å•ï¼Œä½†å®ƒç¡®å®æä¾›äº†åº•å±‚é‚®ä»¶ç³»ç»Ÿçš„å…¨éƒ¨åŠŸèƒ½ï¼Œå¹¶ä¸”æ¯”è¿‡å»çš„æƒ…å†µæ›´å¥½ã€‚</p>
<h2 data-id="heading-11">ä½ç½®å‚æ•°åœ¨ <code>django.core.mail</code> API ä¸­çš„å¼ƒç”¨</h2>
<p>æˆ‘ä»¬ç°åœ¨å·²ç»å®Œæˆäº†ä¸»è¦åŠŸèƒ½ï¼Œæ¥ä¸‹æ¥æ˜¯ä¸ä¸Šè¿°é‚®ä»¶æ›´æ”¹ç›¸å…³çš„â€œæ¬¡è¦â€æ›´æ”¹ï¼Œè¿™æ˜¯ä¸€ä¸ªå¼ƒç”¨è­¦å‘Šï¼š</p>
<blockquote>
<p><code>django.core.mail</code> API ç°åœ¨è¦æ±‚å¯¹äºä¸å¤ªå¸¸ç”¨çš„å‚æ•°ä½¿ç”¨å…³é”®å­—å‚æ•°ã€‚ä½¿ç”¨è¿™äº›å‚æ•°çš„ä½ç½®å‚æ•°ç°åœ¨ä¼šå‘å‡ºä¸€ä¸ªå¼ƒç”¨è­¦å‘Šï¼Œå¹¶ä¸”åœ¨å¼ƒç”¨æœŸç»“æŸåå°†å¼•å‘ä¸€ä¸ª <code>TypeError</code>ï¼š</p>
<ul>
<li>æ‰€æœ‰å¯é€‰å‚æ•°ï¼ˆ<code>fail_silently</code> åŠä¹‹åçš„å‚æ•°ï¼‰å¿…é¡»ä½œä¸ºå…³é”®å­—å‚æ•°ä¼ é€’ç»™ <code>get_connection()</code>ã€<code>mail_admins()</code>ã€<code>mail_managers()</code>ã€<code>send_mail()</code> å’Œ <code>send_mass_mail()</code>ã€‚</li>
<li>åœ¨åˆ›å»º <code>EmailMessage</code> æˆ– <code>EmailMultiAlternatives</code> å®ä¾‹æ—¶ï¼Œé™¤äº†å‰å››ä¸ªå‚æ•°ï¼ˆ<code>subject</code>ã€<code>body</code>ã€<code>from_email</code> å’Œ <code>to</code>ï¼‰å¯ä»¥ä½œä¸ºä½ç½®å‚æ•°æˆ–å…³é”®å­—å‚æ•°ä¼ é€’å¤–ï¼Œæ‰€æœ‰å…¶ä»–å‚æ•°éƒ½å¿…é¡»ä½œä¸ºå…³é”®å­—å‚æ•°ä¼ é€’ã€‚</li>
</ul>
</blockquote>
<p>ä»¥å‰ï¼ŒDjango å…è®¸ä½ å°†æ‰€æœ‰å‚æ•°ä½œä¸ºä½ç½®å‚æ•°ä¼ é€’ï¼Œè¿™åœ¨å‚æ•°åˆ—è¡¨è¾ƒé•¿æ—¶ä¼šæ˜¾å¾—æœ‰äº›æ„šè ¢ä¸”éš¾ä»¥é˜…è¯»ï¼Œä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> django.core.mail <span class="hljs-keyword">import</span> send_mail

send_mail(
    <span class="hljs-string">"ğŸ¼ æœ¬å‘¨çš„ç†ŠçŒ«"</span>,
    <span class="hljs-string">"æœ¬å‘¨çš„ç†ŠçŒ«æ˜¯ Po Pingï¼Œsha-sha booeyï¼"</span>,
    <span class="hljs-string">"updates@example.com"</span>,
    [<span class="hljs-string">"adam@example.com"</span>],
    <span class="hljs-literal">True</span>,
)
</code></pre>
<p>æœ€åä¸€ä¸ª <code>True</code> æ²¡æœ‰æä¾›ä»»ä½•çº¿ç´¢ï¼Œé™¤éä½ æŸ¥æ‰¾å‡½æ•°ç­¾åã€‚ç°åœ¨ï¼Œä½¿ç”¨è¿™äº›ä¸å¤ªå¸¸ç”¨çš„å‚æ•°çš„ä½ç½®å‚æ•°ä¼šå‘å‡ºä¸€ä¸ªå¼ƒç”¨è­¦å‘Šï¼Œæç¤ºä½ å†™æˆå¦‚ä¸‹å½¢å¼ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> django.core.mail <span class="hljs-keyword">import</span> send_mail

send_mail(
    subject=<span class="hljs-string">"ğŸ¼ æœ¬å‘¨çš„ç†ŠçŒ«"</span>,
    body=<span class="hljs-string">"æœ¬å‘¨çš„ç†ŠçŒ«æ˜¯ Po Pingï¼Œsha-sha booeyï¼"</span>,
    from_email=<span class="hljs-string">"updates@example.com"</span>,
    recipient_list=[<span class="hljs-string">"adam@example.com"</span>],
    fail_silently=<span class="hljs-literal">True</span>,
)
</code></pre>
<p>è¿™ç§å˜åŒ–æœ‰åŠ©äºæé«˜ API çš„æ¸…æ™°åº¦ï¼ŒDjango æ­£åœ¨é€æ­¥æ›´å¤šåœ°ä½¿ç”¨ä»…å…³é”®å­—å‚æ•°ã€‚django-upgrade å¯ä»¥é€šè¿‡å…¶ <code>mail_api_kwargs</code> ä¿®å¤ç¨‹åºè‡ªåŠ¨ä¸ºä½ ä¿®å¤è¿™ä¸€é—®é¢˜ã€‚</p>
<p>å†æ¬¡æ„Ÿè°¢ Mike Edmunds åœ¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fcode.djangoproject.com%2Fticket%2F36163" target="_blank" title="https://code.djangoproject.com/ticket/36163" ref="nofollow noopener noreferrer">Ticket #36163</a> ä¸­æ¨åŠ¨äº†è¿™ä¸€æ”¹è¿›ã€‚</p>
<h2 data-id="heading-12">æ‰©å±•è‡ªåŠ¨ <code>shell</code> å¯¼å…¥</h2>
<p>æ¥ä¸‹æ¥ï¼š</p>
<blockquote>
<p>ç°åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œ<code>django.conf.settings</code> ç­‰å¸¸ç”¨å·¥å…·ä¼šè‡ªåŠ¨å¯¼å…¥åˆ° shell ä¸­ã€‚</p>
</blockquote>
<p>Django 5.2 çš„ä¸€ä¸ªä¸»è¦åŠŸèƒ½æ˜¯ <a href="https://link.juejin.cn?target=https%3A%2F%2Fadamj.eu%2Ftech%2F2025%2F04%2F07%2Fdjango-whats-new-5.2%2F%23automatic-model-imports-in-the-shell" target="_blank" title="https://adamj.eu/tech/2025/04/07/django-whats-new-5.2/#automatic-model-imports-in-the-shell" ref="nofollow noopener noreferrer">shell ä¸­çš„è‡ªåŠ¨æ¨¡å‹å¯¼å…¥</a>ï¼Œä½¿å¾— <code>./manage.py shell</code> è‡ªåŠ¨å¯¼å…¥æ‰€æœ‰æ¨¡å‹ã€‚åœ¨æ­¤åŸºç¡€ä¸Šï¼ŒDjango 6.0 ç°åœ¨è¿˜å¯¼å…¥äº†å…¶ä»–å¸¸ç”¨å·¥å…·ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è¿è¡Œ <code>./manage.py shell</code> å¹¶æ·»åŠ  <code>-v 2</code> å‚æ•°æ¥æŸ¥çœ‹å®Œæ•´çš„å¯¼å…¥åˆ—è¡¨ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">$ ./manage.py shell -v 2
6 objects imported automatically:

  from django.conf import settings
  from django.db import connection, models, reset_queries
  from django.db.models import <span class="hljs-built_in">functions</span>
  from django.utils import timezone

...
</code></pre>
<p>ï¼ˆè¿™æ˜¯ä»ä¸€ä¸ªæ²¡æœ‰æ¨¡å‹çš„é¡¹ç›®ä¸­å¾—åˆ°çš„è¾“å‡ºï¼Œå› æ­¤åªåˆ—å‡ºäº†å·¥å…·ã€‚ï¼‰</p>
<p>æ‰€ä»¥ï¼Œè¿™äº›åŒ…æ‹¬ï¼š</p>
<ul>
<li><code>settings</code>ï¼šç”¨äºæ£€æŸ¥è¿è¡Œæ—¶é…ç½®ï¼Œéå¸¸æœ‰ç”¨ï¼š</li>
</ul>
<pre><code class="hljs language-python" lang="python">In [<span class="hljs-number">1</span>]: settings.DEBUG
Out[<span class="hljs-number">1</span>]: <span class="hljs-literal">False</span>
</code></pre>
<ul>
<li><code>connection</code> å’Œ <code>reset_queries()</code>ï¼šéå¸¸é€‚åˆ <a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.djangoproject.com%2Fen%2Fstable%2Ffaq%2Fmodels%2F%23how-can-i-see-the-raw-sql-queries-django-is-running" target="_blank" title="https://docs.djangoproject.com/en/stable/faq/models/#how-can-i-see-the-raw-sql-queries-django-is-running" ref="nofollow noopener noreferrer">æ£€æŸ¥æ‰§è¡Œçš„æŸ¥è¯¢</a>ï¼š</li>
</ul>
<pre><code class="hljs language-python" lang="python">In [<span class="hljs-number">1</span>]: Book.objects.select_related(<span class="hljs-string">'author'</span>)
Out[<span class="hljs-number">1</span>]: &lt;QuerySet []&gt;

In [<span class="hljs-number">2</span>]: connection.queries
Out[<span class="hljs-number">2</span>]:
[{<span class="hljs-string">'sql'</span>: <span class="hljs-string">'SELECT "example_book"."id", "example_book"."title", "example_book"."author_id", "example_author"."id", "example_author"."name" FROM "example_book" INNER JOIN "example_author" ON ("example_book"."author_id" = "example_author"."id") LIMIT 21'</span>,
    <span class="hljs-string">'time'</span>: <span class="hljs-string">'0.000'</span>}]
</code></pre>
<ul>
<li><code>models</code> å’Œ <code>functions</code>ï¼šå¯¹äºé«˜çº§ ORM å·¥ä½œéå¸¸æœ‰ç”¨ï¼š</li>
</ul>
<pre><code class="hljs language-python" lang="python">In [<span class="hljs-number">1</span>]: Book.objects.annotate(
     ...:   title_lower=functions.Lower(<span class="hljs-string">"title"</span>)
     ...: ).<span class="hljs-built_in">filter</span>(
     ...:   title_lower__startswith=<span class="hljs-string">"a"</span>
     ...: ).count()
Out[<span class="hljs-number">1</span>]: <span class="hljs-number">71</span>
</code></pre>
<ul>
<li><code>timezone</code>ï¼šç”¨äºä½¿ç”¨ Django çš„æ—¶åŒºæ„ŸçŸ¥æ—¥æœŸå’Œæ—¶é—´å·¥å…·ï¼š</li>
</ul>
<pre><code class="hljs language-python" lang="python">In [<span class="hljs-number">1</span>]: timezone.now()
Out[<span class="hljs-number">1</span>]: datetime.datetime(<span class="hljs-number">2025</span>, <span class="hljs-number">12</span>, <span class="hljs-number">1</span>, <span class="hljs-number">23</span>, <span class="hljs-number">42</span>, <span class="hljs-number">22</span>, <span class="hljs-number">558418</span>, tzinfo=datetime.timezone.utc)
</code></pre>
<p>ä»ç„¶å¯ä»¥æŒ‰ç…§ <a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.djangoproject.com%2Fen%2Fstable%2Fhowto%2Fcustom-shell%2F" target="_blank" title="https://docs.djangoproject.com/en/stable/howto/custom-shell/" ref="nofollow noopener noreferrer">å¦‚ä½•è‡ªå®šä¹‰ <code>shell</code> å‘½ä»¤</a> æ–‡æ¡£é¡µé¢ä¸­æ‰€è¿°ï¼Œæ‰©å±•è‡ªåŠ¨å¯¼å…¥å†…å®¹ã€‚</p>
<p>Salvo Polizzi åœ¨ Django 5.2 ä¸­è´¡çŒ®äº†åŸå§‹çš„è‡ªåŠ¨ shell å¯¼å…¥åŠŸèƒ½ã€‚ç„¶åï¼Œä»–åœ¨ Django 6.0 ä¸­åˆå›æ¥æä¾›äº†è¿™äº›é¢å¤–çš„å¯¼å…¥ï¼Œåœ¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fcode.djangoproject.com%2Fticket%2F35680" target="_blank" title="https://code.djangoproject.com/ticket/35680" ref="nofollow noopener noreferrer">Ticket #35680</a> ä¸­ã€‚æ„Ÿè°¢å‚ä¸è®ºå›è®¨è®ºå¹¶è¾¾æˆä¸€è‡´æ„è§çš„æ¯ä¸ªäººï¼Œä»¥åŠ Natalia Bidart å’Œ Sarah Boyce çš„å®¡æŸ¥ï¼</p>
<h2 data-id="heading-13">ä¿å­˜æ—¶åŠ¨æ€å­—æ®µåˆ·æ–°</h2>
<p>ç°åœ¨è®©æˆ‘ä»¬è®¨è®ºä¸€ç³»åˆ— ORM æ”¹è¿›ï¼Œä»è¿™ä¸ªé‡å¤§æ”¹è¿›å¼€å§‹ï¼š</p>
<blockquote>
<p>åœ¨æ”¯æŒ <code>RETURNING</code> å­å¥çš„åç«¯ï¼ˆSQLiteã€PostgreSQL å’Œ Oracleï¼‰ä¸Šï¼Œ<code>GeneratedField</code> å’Œè¢«èµ‹å€¼ä¸ºè¡¨è¾¾å¼çš„å­—æ®µåœ¨è°ƒç”¨ <code>save()</code> ä¹‹åä¼šä»æ•°æ®åº“ä¸­åˆ·æ–°ã€‚åœ¨ä¸æ”¯æŒå®ƒçš„åç«¯ï¼ˆMySQL å’Œ MariaDBï¼‰ä¸Šï¼Œå­—æ®µä¼šè¢«æ ‡è®°ä¸ºå»¶è¿ŸåŠ è½½ï¼Œä»¥åœ¨åç»­è®¿é—®æ—¶è§¦å‘åˆ·æ–°ã€‚</p>
</blockquote>
<p>Django æ¨¡å‹æ”¯æŒåœ¨ä¸‰ç§æƒ…å†µä¸‹è®©æ•°æ®åº“ä¸ºä½ ç”Ÿæˆå­—æ®µå€¼ï¼š</p>
<ol>
<li><code>db_default</code> å­—æ®µé€‰é¡¹ï¼Œå®ƒå…è®¸æ•°æ®åº“åœ¨åˆ›å»ºå®ä¾‹æ—¶ç”Ÿæˆé»˜è®¤å€¼ï¼š</li>
</ol>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> django.db <span class="hljs-keyword">import</span> models
<span class="hljs-keyword">from</span> django.db.models.functions <span class="hljs-keyword">import</span> Now

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Video</span>(models.Model):
    ...
    created = models.DateTimeField(db_default=Now())
</code></pre>
<ol start="2">
<li><code>GeneratedField</code> å­—æ®µç±»å‹ï¼Œå®ƒå§‹ç»ˆåŸºäºåŒä¸€å®ä¾‹ä¸­çš„å…¶ä»–å­—æ®µç”±æ•°æ®åº“è®¡ç®—å¾—å‡ºï¼š</li>
</ol>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> django.db <span class="hljs-keyword">import</span> models
<span class="hljs-keyword">from</span> django.db.models.functions <span class="hljs-keyword">import</span> Concat

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Video</span>(models.Model):
    ...
    full_title = models.GeneratedField(
        models.TextField(),
        expression=Concat(
            <span class="hljs-string">"title"</span>,
            models.Value(<span class="hljs-string">" - "</span>),
            <span class="hljs-string">"subtitle"</span>,
        ),
    )
</code></pre>
<ol start="3">
<li>åœ¨ä¿å­˜ä¹‹å‰ä¸ºå­—æ®µåˆ†é…è¡¨è¾¾å¼å€¼ï¼š</li>
</ol>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> django.db <span class="hljs-keyword">import</span> models
<span class="hljs-keyword">from</span> django.db.models.functions <span class="hljs-keyword">import</span> Now

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Video</span>(models.Model):
    ...
    last_updated = models.DateTimeField()

video = Video.objects.get(<span class="hljs-built_in">id</span>=<span class="hljs-number">1</span>)
...
video.last_updated = Now()
video.save()
</code></pre>
<p>ä»¥å‰ï¼Œåªæœ‰ç¬¬ä¸€ç§æ–¹æ³•ï¼ˆä½¿ç”¨ <code>db_default</code>ï¼‰ä¼šåœ¨ä¿å­˜åä»æ•°æ®åº“ä¸­åˆ·æ–°å­—æ®µå€¼ã€‚å…¶ä»–ä¸¤ç§æ–¹æ³•ä¼šç•™ä¸‹æ—§å€¼æˆ–è¡¨è¾¾å¼å¯¹è±¡ï¼Œè¿™æ„å‘³ç€å¦‚æœä½ éœ€è¦è·å–æ›´æ–°åçš„å€¼ï¼Œå°±éœ€è¦è°ƒç”¨ <code>Model.refresh_from_db()</code>ã€‚è¿™å¾ˆéš¾è®°ä½ï¼Œå¹¶ä¸”ä¼šé¢å¤–äº§ç”Ÿä¸€ä¸ªæ•°æ®åº“æŸ¥è¯¢ã€‚</p>
<p>ç°åœ¨ï¼ŒDjango åˆ©ç”¨ <code>RETURNING</code> SQL å­å¥åœ¨æ”¯æŒå®ƒçš„åç«¯ï¼ˆSQLiteã€PostgreSQL å’Œ Oracleï¼‰ä¸Šä¿å­˜æ¨¡å‹å®ä¾‹ï¼Œå¹¶åœ¨å•ä¸ªæŸ¥è¯¢ä¸­è·å–æ›´æ–°åçš„åŠ¨æ€å­—æ®µå€¼ã€‚<code>save()</code> è°ƒç”¨ç°åœ¨å¯èƒ½ä¼šå‘å‡ºå¦‚ä¸‹æŸ¥è¯¢ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">UPDATE</span> "example_video"
<span class="hljs-keyword">SET</span> "last_updated" <span class="hljs-operator">=</span> NOW()
<span class="hljs-keyword">WHERE</span> "example_video"."id" <span class="hljs-operator">=</span> <span class="hljs-number">1</span>
RETURNING "example_video"."last_updated"
</code></pre>
<p>Django å°†è¿”å›å€¼æ”¾å…¥æ¨¡å‹å­—æ®µä¸­ï¼Œå› æ­¤ä½ å¯ä»¥åœ¨ä¿å­˜åç«‹å³è¯»å–å®ƒï¼š</p>
<pre><code class="hljs language-python" lang="python">video = Video.objects.get(<span class="hljs-built_in">id</span>=<span class="hljs-number">1</span>)
...
video.last_updated = Now()
video.save()
<span class="hljs-built_in">print</span>(video.last_updated)  <span class="hljs-comment"># æ•°æ®åº“ä¸­çš„æ›´æ–°å€¼</span>
</code></pre>
<p>åœ¨ä¸æ”¯æŒ <code>RETURNING</code>ï¼ˆMySQL å’Œ MariaDBï¼‰çš„åç«¯ä¸Šï¼ŒDjango ç°åœ¨ä¼šåœ¨ä¿å­˜åå°†åŠ¨æ€å­—æ®µæ ‡è®°ä¸ºå»¶è¿ŸåŠ è½½ã€‚è¿™æ ·ï¼Œåç»­è®¿é—®ï¼ˆå¦‚ä¸Šé¢çš„ç¤ºä¾‹ï¼‰å°†è‡ªåŠ¨è°ƒç”¨ <code>Model.refresh_from_db()</code>ã€‚è¿™ç¡®ä¿äº†ä½ æ€»æ˜¯è¯»å–æ›´æ–°åçš„å€¼ï¼Œå³ä½¿è¿™ä¼šé¢å¤–äº§ç”Ÿä¸€ä¸ªæŸ¥è¯¢ã€‚</p>
<h3 data-id="heading-14">å†å²</h3>
<p>è¿™ä¸ªåŠŸèƒ½åœ¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fcode.djangoproject.com%2Fticket%2F27222" target="_blank" title="https://code.djangoproject.com/ticket/27222" ref="nofollow noopener noreferrer">Ticket #27222</a> ä¸­äº 2016 å¹´è¢«æå‡ºï¼Œç”± Anssi KÃ¤Ã¤riÃ¤inen æå‡ºã€‚åœ¨è¿‡å»çš„ä¹å¹´ä¸­ï¼Œè¿™ä¸ªæè®®å¤§éƒ¨åˆ†æ—¶é—´éƒ½å¤„äºä¼‘çœ çŠ¶æ€ï¼Œä½† ORM è´Ÿè´£äºº Simon Charette ä»Šå¹´æ—©äº›æ—¶å€™æ¥æ‰‹äº†è¿™ä¸ªåŠŸèƒ½ï¼Œæ‰¾åˆ°äº†ä¸€ä¸ªå®ç°æ–¹æ¡ˆï¼Œå¹¶å°†å…¶æ¨åŠ¨å®Œæˆã€‚æ„Ÿè°¢ Simon ç»§ç»­æ¨åŠ¨ ORM çš„å‘å±•ï¼Œä»¥åŠæ‰€æœ‰å‚ä¸å®¡æŸ¥çš„äººå‘˜ï¼šDavid Sandersã€Jacob Wallsã€Mariusz Felisiakã€nessitaã€Paolo Melchiorreã€Simon Charette å’Œ Tim Grahamã€‚</p>
<h2 data-id="heading-15">é€šç”¨ <code>StringAgg</code> èšåˆå‡½æ•°</h2>
<p>æ¥ä¸‹æ¥æ˜¯ ORM çš„å¦ä¸€ä¸ªå˜åŒ–ï¼š</p>
<blockquote>
<p>æ–°çš„ <code>StringAgg</code> èšåˆå‡½æ•°å°†è¾“å…¥å€¼è¿æ¥æˆä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œä»¥ <code>delimiter</code> å­—ç¬¦ä¸²åˆ†éš”ã€‚è¿™ä¸ªèšåˆå‡½æ•°ä»¥å‰ä»…æ”¯æŒ PostgreSQLã€‚</p>
</blockquote>
<p>è¿™ä¸ªèšåˆå‡½æ•°é€šå¸¸ç”¨äºç”Ÿæˆç›¸å…³é¡¹ç›®çš„é€—å·åˆ†éš”åˆ—è¡¨ç­‰ã€‚ä»¥å‰ï¼Œå®ƒä»…ä½œä¸º <code>django.contrib.postgres</code> çš„ä¸€éƒ¨åˆ†æ”¯æŒ PostgreSQLï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> django.contrib.postgres.aggregates <span class="hljs-keyword">import</span> StringAgg
<span class="hljs-keyword">from</span> example.models <span class="hljs-keyword">import</span> Video

videos = Video.objects.annotate(
    chapter_ids=StringAgg(<span class="hljs-string">"chapter"</span>, delimiter=<span class="hljs-string">","</span>),
)

<span class="hljs-keyword">for</span> video <span class="hljs-keyword">in</span> videos:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"Video <span class="hljs-subst">{video.<span class="hljs-built_in">id</span>}</span> has chapters: <span class="hljs-subst">{video.chapter_ids}</span>"</span>)
</code></pre>
<p>è¿™å¯èƒ½ä¼šè¾“å‡ºå¦‚ä¸‹å†…å®¹ï¼š</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">Video</span> <span class="hljs-number">104</span> <span class="hljs-selector-tag">has</span> <span class="hljs-selector-tag">chapters</span>: <span class="hljs-number">71</span>,<span class="hljs-number">72</span>,<span class="hljs-number">74</span>
<span class="hljs-selector-tag">Video</span> <span class="hljs-number">107</span> <span class="hljs-selector-tag">has</span> <span class="hljs-selector-tag">chapters</span>: <span class="hljs-number">88</span>,<span class="hljs-number">89</span>,<span class="hljs-number">138</span>,<span class="hljs-number">90</span>,<span class="hljs-number">91</span>,<span class="hljs-number">93</span>
</code></pre>
<p>ç°åœ¨ï¼Œè¿™ä¸ªèšåˆå‡½æ•°å·²ç»å¯ä»¥åœ¨ Django æ”¯æŒçš„æ‰€æœ‰æ•°æ®åº“åç«¯ä¸­ä½¿ç”¨ï¼Œä» <code>django.db.models</code> ä¸­å¯¼å…¥ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> django.db.models <span class="hljs-keyword">import</span> StringAgg, Value
<span class="hljs-keyword">from</span> example.models <span class="hljs-keyword">import</span> Video

videos = Video.objects.annotate(
    chapter_ids=StringAgg(<span class="hljs-string">"chapter"</span>, delimiter=Value(<span class="hljs-string">","</span>)),
)

<span class="hljs-keyword">for</span> video <span class="hljs-keyword">in</span> videos:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"Video <span class="hljs-subst">{video.<span class="hljs-built_in">id</span>}</span> has chapters: <span class="hljs-subst">{video.chapter_ids}</span>"</span>)
</code></pre>
<p>æ³¨æ„ï¼Œ<code>delimiter</code> å‚æ•°ç°åœ¨éœ€è¦ä¸€ä¸ª <code>Value()</code> è¡¨è¾¾å¼åŒ…è£…å™¨æ¥å¤„ç†å­—é¢å­—ç¬¦ä¸²ï¼Œå¦‚ä¸Šæ‰€ç¤ºã€‚è¿™ç§å˜åŒ–å…è®¸ä½ ä½¿ç”¨æ•°æ®åº“å‡½æ•°æˆ–å­—æ®µä½œä¸ºåˆ†éš”ç¬¦ï¼ˆå¦‚æœéœ€è¦ï¼‰ã€‚</p>
<p>è™½ç„¶å¤§å¤šæ•° Django é¡¹ç›®éƒ½ä½¿ç”¨ PostgreSQLï¼Œä½†åœ¨æ‰€æœ‰åç«¯ä¸Šæä¾›è¿™ä¸ªèšåˆå‡½æ•°æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„æ”¹è¿›ï¼Œå®ƒæé«˜äº†è·¨æ•°æ®åº“çš„å…¼å®¹æ€§ï¼Œå¹¶ä¸”æ„å‘³ç€ç¬¬ä¸‰æ–¹åŒ…å¯ä»¥ä½¿ç”¨å®ƒè€Œä¸ä¼šå½±å“å…¶æ•°æ®åº“æ”¯æŒã€‚</p>
<h3 data-id="heading-16">å†å²</h3>
<p>PostgreSQL ç‰¹æœ‰çš„ <code>StringAgg</code> æœ€æ—©åœ¨ Django 1.9ï¼ˆ2015 å¹´ï¼‰ç”± Andriy Sokolovskiy æ·»åŠ ï¼Œè§ <a href="https://link.juejin.cn?target=https%3A%2F%2Fcode.djangoproject.com%2Fticket%2F24301" target="_blank" title="https://code.djangoproject.com/ticket/24301" ref="nofollow noopener noreferrer">Ticket #24301</a>ã€‚åœ¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fcode.djangoproject.com%2Fticket%2F35444" target="_blank" title="https://code.djangoproject.com/ticket/35444" ref="nofollow noopener noreferrer">Ticket #35444</a> ä¸­ï¼ŒChris Muthig æå‡ºäº†æ·»åŠ  <code>Aggregate.order_by</code> é€‰é¡¹ï¼Œè¿™æ˜¯ <code>StringAgg</code> ç”¨æ¥æŒ‡å®šè¿æ¥å…ƒç´ é¡ºåºçš„é€‰é¡¹ï¼Œè€Œä½œä¸ºå‰¯ä½œç”¨ï¼Œè¿™ä¹Ÿä½¿å¾—å°† <code>StringAgg</code> æ¨å¹¿åˆ°æ‰€æœ‰åç«¯æˆä¸ºå¯èƒ½ã€‚</p>
<p>æ„Ÿè°¢ Chris æå‡ºå¹¶å®ç°äº†è¿™ä¸€å˜åŒ–ï¼Œä»¥åŠæ‰€æœ‰å‚ä¸å®¡æŸ¥çš„äººå‘˜ï¼šPaolo Melchiorreã€Sarah Boyce å’Œ Simon Charetteã€‚</p>
<h2 data-id="heading-17"><code>BigAutoField</code> ä½œä¸ºé»˜è®¤ä¸»é”®ç±»å‹</h2>
<p>æ¥ä¸‹æ¥ï¼š</p>
<blockquote>
<p><code>DEFAULT_AUTO_FIELD</code> è®¾ç½®çš„é»˜è®¤å€¼ç°åœ¨æ”¹ä¸º <code>BigAutoField</code>ã€‚</p>
</blockquote>
<p>è¿™ä¸€é‡è¦å˜åŒ–æœ‰åŠ©äºé”å®šæ›´å¤§è§„æ¨¡çš„å¯æ‰©å±•ä¸»é”®ã€‚</p>
<p>Django 3.2ï¼ˆ2021 å¹´ï¼‰å¼•å…¥äº† <a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.djangoproject.com%2Fen%2Fstable%2Fref%2Fsettings%2F%23default-auto-field" target="_blank" title="https://docs.djangoproject.com/en/stable/ref/settings/#default-auto-field" ref="nofollow noopener noreferrer">DEFAULT_AUTO_FIELD è®¾ç½®</a>ï¼Œç”¨äºæ›´æ”¹æ¨¡å‹ä¸­ä½¿ç”¨çš„é»˜è®¤ä¸»é”®ç±»å‹ã€‚Django ä½¿ç”¨è¿™ä¸ªè®¾ç½®ä¸ºæœªæ˜¾å¼å®šä¹‰ä¸»é”®å­—æ®µçš„æ¨¡å‹æ·»åŠ ä¸€ä¸ªåä¸º <code>id</code> çš„ä¸»é”®å­—æ®µã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ å®šä¹‰äº†ä¸€ä¸ªæ¨¡å‹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> django.db <span class="hljs-keyword">import</span> models

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Video</span>(models.Model):
    title = models.TextField()
</code></pre>
<p>é‚£ä¹ˆå®ƒå°†æœ‰ä¸¤ä¸ªå­—æ®µï¼š<code>id</code> å’Œ <code>title</code>ï¼Œå…¶ä¸­ <code>id</code> ä½¿ç”¨ <code>DEFAULT_AUTO_FIELD</code> å®šä¹‰çš„ç±»å‹ã€‚</p>
<p>è¿™ä¸ªè®¾ç½®ä¹Ÿå¯ä»¥é€šè¿‡åœ¨åº”ç”¨çš„ <code>apps.py</code> æ–‡ä»¶ä¸­å®šä¹‰ <code>AppConfig.default_auto_field</code> æ¥åœ¨æ¯ä¸ªåº”ç”¨çš„åŸºç¡€ä¸Šè¦†ç›–ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> django.apps <span class="hljs-keyword">import</span> AppConfig

<span class="hljs-keyword">class</span> <span class="hljs-title class_">ChannelConfig</span>(<span class="hljs-title class_ inherited__">AppConfig</span>):
    name = <span class="hljs-string">"channel"</span>
    default_auto_field = <span class="hljs-string">"django.db.models.BigAutoField"</span>
</code></pre>
<p>æ·»åŠ è¿™ä¸ªè®¾ç½®çš„ä¸€ä¸ªä¸»è¦åŠ¨æœºæ˜¯å…è®¸é¡¹ç›®ä» <code>AutoField</code>ï¼ˆ32 ä½æ•´æ•°ï¼‰åˆ‡æ¢åˆ° <code>BigAutoField</code>ï¼ˆ64 ä½æ•´æ•°ï¼‰ä½œä¸ºä¸»é”®ï¼Œè€Œæ— éœ€æ›´æ”¹æ¯ä¸ªæ¨¡å‹ã€‚<code>AutoField</code> å¯ä»¥å­˜å‚¨çš„å€¼æœ€å¤šçº¦ä¸º 21 äº¿ï¼Œè™½ç„¶å¬èµ·æ¥å¾ˆå¤§ï¼Œä½†åœ¨å¤§è§„æ¨¡åº”ç”¨ä¸­å¾ˆå®¹æ˜“è¾¾åˆ°ã€‚<code>BigAutoField</code> å¯ä»¥å­˜å‚¨çš„å€¼æœ€å¤šçº¦ä¸º 92 äº¬ï¼Œè¿™åœ¨å®é™…ç”¨é€”ä¸­æ˜¯â€œç»°ç»°æœ‰ä½™â€çš„ã€‚</p>
<p>å¦‚æœä½¿ç”¨ <code>AutoField</code> çš„æ¨¡å‹è¾¾åˆ°äº†å…¶æœ€å¤§å€¼ï¼Œå®ƒå°†æ— æ³•å†æ¥å—æ–°è¡Œï¼Œè¿™ä¸ªé—®é¢˜è¢«ç§°ä¸º <strong>ä¸»é”®è€—å°½</strong>ã€‚è¯¥è¡¨å®é™…ä¸Šè¢«é˜»å¡äº†ï¼Œéœ€è¦é€šè¿‡é”å®šæ•°æ®åº“è¿ç§»åœ¨å¤§å‹è¡¨ä¸Šç´§æ€¥å°†æ¨¡å‹ä» <code>AutoField</code> åˆ‡æ¢åˆ° <code>BigAutoField</code>ã€‚å…³äº Kraken å¦‚ä½•ä¿®å¤è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥è§‚çœ‹ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3DkZ4q0k_FNhw" target="_blank" title="https://www.youtube.com/watch?v=kZ4q0k_FNhw" ref="nofollow noopener noreferrer">Tim Bell åœ¨ 2025 å¹´ DjangoCon Europe çš„æ¼”è®²</a>ï¼Œå…¶ä¸­è¯¦ç»†ä»‹ç»äº†ä¸»åŠ¨è¿ç§»å¤§å‹è¡¨ä»¥å‡å°‘åœæœºæ—¶é—´çš„ä¸€äº›å·§å¦™æŠ€æœ¯ã€‚</p>
<p>ä¸ºäº†é¿å…æ–°é¡¹ç›®å‡ºç°è¿™ä¸ªé—®é¢˜ï¼ŒDjango 3.2 ä½¿å¾—é€šè¿‡ <code>startproject</code> åˆ›å»ºçš„æ–°é¡¹ç›®å°† <code>DEFAULT_AUTO_FIELD</code> è®¾ç½®ä¸º <code>BigAutoField</code>ï¼Œå¹¶ä¸”é€šè¿‡ <code>startapp</code> åˆ›å»ºçš„æ–°åº”ç”¨å°†å®ƒä»¬çš„ <code>AppConfig.default_auto_field</code> è®¾ç½®ä¸º <code>BigAutoField</code>ã€‚å®ƒè¿˜æ·»åŠ äº†ä¸€ä¸ªç³»ç»Ÿæ£€æŸ¥ï¼Œä»¥ç¡®ä¿é¡¹ç›®æ˜¾å¼è®¾ç½® <code>DEFAULT_AUTO_FIELD</code>ï¼Œä»¥ç¡®ä¿ç”¨æˆ·äº†è§£è¯¥åŠŸèƒ½å¹¶èƒ½å¤Ÿåšå‡ºæ˜æ™ºçš„é€‰æ‹©ã€‚</p>
<p>ç°åœ¨ï¼ŒDjango 6.0 å°†è®¾ç½®å’Œåº”ç”¨é…ç½®å±æ€§çš„å®é™…é»˜è®¤å€¼æ”¹ä¸º <code>BigAutoField</code>ã€‚ä½¿ç”¨ <code>BigAutoField</code> çš„é¡¹ç›®å¯ä»¥ç§»é™¤è¯¥è®¾ç½®ï¼š</p>
<pre><code class="hljs language-python" lang="python">-DEFAULT_AUTO_FIELD = <span class="hljs-string">"django.db.models.BigAutoField"</span>
</code></pre>
<p>ä»¥åŠåº”ç”¨é…ç½®å±æ€§ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> django.apps <span class="hljs-keyword">import</span> AppConfig

<span class="hljs-keyword">class</span> <span class="hljs-title class_">ChannelConfig</span>(<span class="hljs-title class_ inherited__">AppConfig</span>):
    name = <span class="hljs-string">"channel"</span>
-    default_auto_field = <span class="hljs-string">"django.db.models.BigAutoField"</span>
</code></pre>
<p>é»˜è®¤çš„ <code>startproject</code> å’Œ <code>startapp</code> æ¨¡æ¿ä¹Ÿä¸å†è®¾ç½®è¿™äº›å€¼ã€‚è¿™ä¸€å˜åŒ–å‡å°‘äº†æ–°é¡¹ç›®çš„æ ·æ¿ä»£ç ï¼Œä¸»é”®è€—å°½é—®é¢˜ä¹Ÿå°†é€æ¸æˆä¸ºå†å²ï¼Œæˆä¸ºå¤§å¤šæ•° Django ç”¨æˆ·ä¸å†éœ€è¦è€ƒè™‘çš„é—®é¢˜ã€‚</p>
<h3 data-id="heading-18">å†å²</h3>
<p>åœ¨ Django 3.2 ä¸­æ·»åŠ  <code>DEFAULT_AUTO_FIELD</code> æ˜¯ç”± Caio Ariede æå‡ºå¹¶ç”± Tom Forbes å®ç°çš„ï¼Œè§ <a href="https://link.juejin.cn?target=https%3A%2F%2Fcode.djangoproject.com%2Fticket%2F31007" target="_blank" title="https://code.djangoproject.com/ticket/31007" ref="nofollow noopener noreferrer">Ticket #31007</a>ã€‚Django 6.0 ä¸­çš„è¿™ä¸€æ–°å˜åŒ–æ˜¯ç”±å‰ Fellow Tim Graham æå‡ºå¹¶å®ç°çš„ï¼Œè§ <a href="https://link.juejin.cn?target=https%3A%2F%2Fcode.djangoproject.com%2Fticket%2F36564" target="_blank" title="https://code.djangoproject.com/ticket/36564" ref="nofollow noopener noreferrer">Ticket #36564</a>ã€‚æ„Ÿè°¢ Tim å‘ç°ç°åœ¨å¯ä»¥è¿›è¡Œè¿™ä¸€æ¸…ç†å·¥ä½œï¼Œä»¥åŠ Jacob Walls å’Œ Clifford Gama çš„å®¡æŸ¥ï¼</p>
<h2 data-id="heading-19">æ¨¡æ¿å˜é‡ <code>forloop.length</code></h2>
<p>ç»§ç»­æ¥çœ‹æ¨¡æ¿æ–¹é¢çš„æ”¹è¿›ï¼Œé¦–å…ˆæ˜¯è¿™ä¸ªå°è€Œå®ç”¨çš„æ–°å¢åŠŸèƒ½ï¼š</p>
<blockquote>
<p>åœ¨ <code>for</code> å¾ªç¯ä¸­ç°åœ¨å¯ä»¥ä½¿ç”¨æ–°çš„å˜é‡ <code>forloop.length</code>ã€‚</p>
</blockquote>
<p>è¿™ä¸€å°æ‰©å±•ä½¿å¾—ä½ å¯ä»¥ç¼–å†™å¦‚ä¸‹æ¨¡æ¿å¾ªç¯ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>
  {% for goose in geese %}
    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>{{ forloop.counter }}/{{ forloop.length }}<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span>: {{ goose.name }}
    <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
  {% endfor %}
<span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
</code></pre>
<p>ä»¥å‰ï¼Œä½ éœ€è¦é€šè¿‡å…¶ä»–æ–¹å¼å¼•ç”¨é•¿åº¦ï¼Œä¾‹å¦‚ <code>{{ geese|length }}</code>ï¼Œè¿™ç¨æ˜¾ä¸å¤Ÿçµæ´»ã€‚</p>
<p>æ„Ÿè°¢ Jonathan StrÃ¶bele åœ¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fcode.djangoproject.com%2Fticket%2F36186" target="_blank" title="https://code.djangoproject.com/ticket/36186" ref="nofollow noopener noreferrer">Ticket #36186</a> ä¸­è´¡çŒ®äº†è¿™ä¸ªæƒ³æ³•å’Œå®ç°ï¼Œä»¥åŠ David Smithã€Paolo Melchiorre å’Œ Sarah Boyce çš„å®¡æŸ¥ã€‚</p>
<h2 data-id="heading-20"><code>querystring</code> æ¨¡æ¿æ ‡ç­¾å¢å¼º</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.djangoproject.com%2Fen%2Fstable%2Fref%2Ftemplates%2Fbuiltins%2F%23django-template" target="_blank" title="https://docs.djangoproject.com/en/stable/ref/templates/builtins/#django-template" ref="nofollow noopener noreferrer">Django 5.1 ä¸­å¼•å…¥çš„ <code>querystring</code> æ¨¡æ¿æ ‡ç­¾</a> ç”¨äºå¸®åŠ©æ„å»ºä¿®æ”¹å½“å‰è¯·æ±‚æŸ¥è¯¢å‚æ•°çš„é“¾æ¥ï¼Œç°åœ¨æœ‰äº†ä¸¤ä¸ªæ‰©å±•ã€‚</p>
<ol>
<li>å‘è¡Œè¯´æ˜ï¼š</li>
</ol>
<blockquote>
<p><code>querystring</code> æ¨¡æ¿æ ‡ç­¾ç°åœ¨å§‹ç»ˆåœ¨è¿”å›çš„æŸ¥è¯¢å­—ç¬¦ä¸²å‰åŠ ä¸Š <code>?</code>ï¼Œç¡®ä¿é“¾æ¥ç”Ÿæˆè¡Œä¸ºçš„å¯é æ€§ã€‚</p>
</blockquote>
<p>è¿™ä¸€å°å˜åŒ–æ”¹è¿›äº†åœ¨æä¾›ç©ºæŸ¥è¯¢å‚æ•°æ˜ å°„æ—¶æ ‡ç­¾çš„è¡Œä¸ºã€‚å‡è®¾ä½ æœ‰ä¸€ä¸ªæ¨¡æ¿å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-django" lang="django">&lt;a href="{% querystring params %}"&gt;Reset search&lt;/a&gt;
</code></pre>
<p>å…¶ä¸­ <code>params</code> æ˜¯ä¸€ä¸ªå¯èƒ½æœ‰æ—¶ä¸ºç©ºçš„å­—å…¸ã€‚ä»¥å‰ï¼Œå¦‚æœ <code>params</code> ä¸ºç©ºï¼Œè¾“å‡ºå°†æ˜¯ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">""</span>&gt;</span>Reset search<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
</code></pre>
<p>æµè§ˆå™¨ä¼šå°†æ­¤è§†ä¸ºæŒ‡å‘ç›¸åŒ URLï¼ˆåŒ…æ‹¬æŸ¥è¯¢å‚æ•°ï¼‰çš„é“¾æ¥ï¼Œå› æ­¤ä¸ä¼šæ¸…é™¤æŸ¥è¯¢å‚æ•°ï¼Œè¿™ä¸é¢„æœŸä¸ç¬¦ã€‚ç°åœ¨ï¼Œæœ‰äº†è¿™ä¸€å˜åŒ–ï¼Œè¾“å‡ºå°†æ˜¯ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"?"</span>&gt;</span>Reset search<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
</code></pre>
<p>æµè§ˆå™¨ä¼šå°† <code>?</code> è§†ä¸ºæŒ‡å‘ç›¸åŒ URLï¼ˆä¸å¸¦ä»»ä½•æŸ¥è¯¢å‚æ•°ï¼‰çš„é“¾æ¥ï¼Œä»è€Œæ¸…é™¤æŸ¥è¯¢å‚æ•°ï¼Œç¬¦åˆç”¨æˆ·çš„æœŸæœ›ã€‚</p>
<p>æ„Ÿè°¢ Django Fellow Sarah Boyce å‘ç°è¿™ä¸€æ”¹è¿›å¹¶å®ç°äº†ä¿®å¤ï¼Œè§ <a href="https://link.juejin.cn?target=https%3A%2F%2Fcode.djangoproject.com%2Fticket%2F36268" target="_blank" title="https://code.djangoproject.com/ticket/36268" ref="nofollow noopener noreferrer">Ticket #36268</a>ï¼Œä»¥åŠ Django Fellow Natalia Bidart çš„å®¡æŸ¥ï¼</p>
<ol start="2">
<li>å‘è¡Œè¯´æ˜ï¼š</li>
</ol>
<blockquote>
<p><code>querystring</code> æ¨¡æ¿æ ‡ç­¾ç°åœ¨å¯ä»¥æ¥å—å¤šä¸ªä½ç½®å‚æ•°ï¼Œè¿™äº›å‚æ•°å¿…é¡»æ˜¯æ˜ å°„ï¼Œä¾‹å¦‚ <code>QueryDict</code> æˆ– <code>dict</code>ã€‚</p>
</blockquote>
<p>è¿™ä¸€å¢å¼ºåŠŸèƒ½å…è®¸æ ‡ç­¾åœ¨æ„å»ºè¾“å‡ºæ—¶åˆå¹¶å¤šä¸ªæŸ¥è¯¢å‚æ•°æ¥æºã€‚ä¾‹å¦‚ï¼Œä½ å¯èƒ½æœ‰ä¸€ä¸ªæ¨¡æ¿å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-django" lang="django">&lt;a href="{% querystring request.GET super_search_params %}"&gt;Super search&lt;/a&gt;
</code></pre>
<p>å…¶ä¸­ <code>super_search_params</code> æ˜¯ä¸€ä¸ªåŒ…å«é¢å¤–å‚æ•°çš„å­—å…¸ï¼Œç”¨äºå°†å½“å‰æœç´¢å‡çº§ä¸ºâ€œè¶…çº§æœç´¢â€ã€‚è¯¥æ ‡ç­¾ä¼šåˆå¹¶è¿™ä¸¤ä¸ªæ˜ å°„ï¼Œå¯¹äºé‡å¤çš„é”®ï¼Œåé¢çš„æ˜ å°„å°†ä¼˜å…ˆã€‚</p>
<p>å†æ¬¡æ„Ÿè°¢ Sarah Boyce åœ¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fcode.djangoproject.com%2Fticket%2F35529" target="_blank" title="https://code.djangoproject.com/ticket/35529" ref="nofollow noopener noreferrer">Ticket #35529</a> ä¸­æå‡ºè¿™ä¸€æ”¹è¿›ï¼ŒGiannis Terzopoulos å®ç°äº†å®ƒï¼Œä»¥åŠ Natalia Bidartã€Sarah Boyce å’Œ Tom Carrick çš„å®¡æŸ¥ï¼</p>
<h2 data-id="heading-21">ç»“è¯­</h2>
<p>ä»¥ä¸Šå°±æ˜¯æœ¬æ¬¡ Django 6.0 çš„äº®ç‚¹æ€»ç»“ï¼æ„Ÿè°¢ä½ çš„é˜…è¯»ã€‚æ›´å¤šå˜åŒ–å¯ä»¥åœ¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.djangoproject.com%2Fen%2Fstable%2Freleases%2F6.0%2F" target="_blank" title="https://docs.djangoproject.com/en/stable/releases/6.0/" ref="nofollow noopener noreferrer">å‘è¡Œè¯´æ˜</a> ä¸­æŸ¥çœ‹ã€‚</p>
<p>æ­¤å¤–ï¼Œè¿˜æœ‰è®¸å¤šæœªè¿›å…¥å‘è¡Œè¯´æ˜çš„å¹•åæ”¹è¿›å’Œé”™è¯¯ä¿®å¤ã€‚ä¼˜åŒ–å’Œå¾®å°æ”¹è¿›ä¸€ç›´åœ¨è¢«åˆå¹¶ï¼Œæ‰€ä»¥ä¸è¦å»¶è¿Ÿï¼Œç°åœ¨å°±å‡çº§å§ï¼</p>
<p>æ„Ÿè°¢ä¸º Django 6.0 è´¡çŒ®çš„ <strong>174 äºº</strong>ï¼Œè¿™ä¸€æ•°å­—ç”± Mariusz Felisiak åœ¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgist.github.com%2Ffelixxm%2F99501cdbf6ed5a69295b4cb3f8c21d80" target="_blank" title="https://gist.github.com/felixxm/99501cdbf6ed5a69295b4cb3f8c21d80" ref="nofollow noopener noreferrer">æ­¤åˆ—è¡¨</a> ä¸­ç»Ÿè®¡ã€‚</p>
<p>æ„¿ä½ çš„å‡çº§è¿‡ç¨‹è¿…é€Ÿã€é¡ºåˆ©ã€å®‰å…¨ä¸”å¯é ï¼</p>
<blockquote>
<p>æœ€åæ„Ÿè°¢é˜…è¯»ï¼æ¬¢è¿å…³æ³¨æˆ‘ï¼Œå¾®ä¿¡å…¬ä¼—å·ï¼š <strong>å€”å¼ºé’é“œä¸‰</strong>ã€‚<br/>
<strong>ç‚¹èµã€æ”¶è—ã€å…³æ³¨</strong>ï¼Œä¸€é”®ä¸‰è¿ï¼ï¼<br/>
æ¬¢è¿ ç‚¹å‡» <strong>ã€ğŸ‘å–œæ¬¢ä½œè€…ã€‘</strong> æŒ‰é’®è¿›è¡Œ <strong>æ‰“èµğŸ’°ğŸ’°</strong>ï¼Œè¯·æˆ‘å–ä¸€æ¯å’–å•¡â˜•ï¸ï¼</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[LINQé›†åˆä¿®æ”¹å¼‚å¸¸æ·±åº¦è§£æï¼šToList()çš„æ•‘åœºæ—¶åˆ»]]></title>    <link>https://juejin.cn/post/7582849187864723507</link>    <guid>https://juejin.cn/post/7582849187864723507</guid>    <pubDate>2025-12-12T15:35:42.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582849187864723507" data-draft-id="7582809606067339290" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="LINQé›†åˆä¿®æ”¹å¼‚å¸¸æ·±åº¦è§£æï¼šToList()çš„æ•‘åœºæ—¶åˆ»"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-12T15:35:42.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="guchen66"/> <meta itemprop="url" content="https://juejin.cn/user/3191200923270394"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            LINQé›†åˆä¿®æ”¹å¼‚å¸¸æ·±åº¦è§£æï¼šToList()çš„æ•‘åœºæ—¶åˆ»
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3191200923270394/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    guchen66
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-12T15:35:42.000Z" title="Fri Dec 12 2025 15:35:42 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    6
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">é—®é¢˜èƒŒæ™¯</h2>
<p>åœ¨æœ€è¿‘çš„é¡¹ç›®å¼€å‘ä¸­ï¼Œæˆ‘é‡åˆ°äº†ä¸€ä¸ªç»å…¸çš„.NETå¼‚å¸¸ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">System.InvalidOperationException: <span class="hljs-string">"é›†åˆåœ¨æšä¸¾æ•°å®ä¾‹åŒ–åè¿›è¡Œäº†ä¿®æ”¹ã€‚"</span>
</code></pre>
<p>è¿™ä¸ªå¼‚å¸¸å‡ºç°åœ¨ä½¿ç”¨LINQå¤„ç†å­—å…¸é›†åˆæ—¶ï¼Œå…·ä½“ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">void</span> <span class="hljs-title class_">UpdateSVReportValues</span>(<span class="hljs-title class_">List</span>&lt;<span class="hljs-built_in">string</span>&gt; allDatas)
{
 Â  Â <span class="hljs-keyword">if</span> (allDatas == <span class="hljs-literal">null</span> || allDatas.<span class="hljs-property">Count</span> != _svData.<span class="hljs-property">Count</span>)
 Â   {
 Â  Â  Â  Â <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArgumentException</span>(<span class="hljs-string">"æ•°æ®æ•°é‡ä¸keyæ•°é‡ä¸åŒ¹é…"</span>);
 Â   }
 Â  Â 
 Â  Â <span class="hljs-comment">// ä½¿ç”¨Zipç»„åˆé”®å€¼å¯¹</span>
 Â  Â <span class="hljs-keyword">var</span> updates = _svData.<span class="hljs-property">Keys</span>.<span class="hljs-title class_">Zip</span>(allDatas, <span class="hljs-function">(<span class="hljs-params">key, value</span>) =&gt;</span> <span class="hljs-keyword">new</span> { <span class="hljs-title class_">Key</span> = key, <span class="hljs-title class_">Value</span> = value });
â€‹
 Â  Â foreach (<span class="hljs-keyword">var</span> item <span class="hljs-keyword">in</span> updates) Â <span class="hljs-comment">// å¼‚å¸¸å‘ç”Ÿåœ¨è¿™é‡Œ</span>
 Â   {
 Â  Â  Â  Â _svData.<span class="hljs-title class_">AddOrUpdate</span>(item.<span class="hljs-property">Key</span>, item.<span class="hljs-property">Value</span>, <span class="hljs-function">(<span class="hljs-params">k, oldValue</span>) =&gt;</span> item.<span class="hljs-property">Value</span>); Â <span class="hljs-comment">// ä¿®æ”¹é›†åˆ</span>
 Â   }
}
</code></pre>
<h2 data-id="heading-1">é—®é¢˜æ ¹æºï¼šLINQçš„å»¶è¿Ÿæ‰§è¡Œ</h2>
<p>ç»è¿‡æ·±å…¥åˆ†æï¼Œæˆ‘å‘ç°é—®é¢˜çš„æ ¹æºåœ¨äº<strong>LINQçš„å»¶è¿Ÿæ‰§è¡Œç‰¹æ€§</strong>ã€‚</p>
<h3 data-id="heading-2">ä»€ä¹ˆæ˜¯å»¶è¿Ÿæ‰§è¡Œï¼Ÿ</h3>
<p>å½“æˆ‘ä»¬å†™ä¸‹LINQæŸ¥è¯¢æ—¶ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">var</span> updates = _svData.<span class="hljs-property">Keys</span>.<span class="hljs-title class_">Zip</span>(allDatas, <span class="hljs-function">(<span class="hljs-params">key, value</span>) =&gt;</span> <span class="hljs-keyword">new</span> { <span class="hljs-title class_">Key</span> = key, <span class="hljs-title class_">Value</span> = value });
</code></pre>
<p>å®é™…ä¸Šå¹¶æ²¡æœ‰æ‰§è¡Œä»»ä½•è®¡ç®—ï¼Œ<code>updates</code>åªæ˜¯ä¸€ä¸ª"æŸ¥è¯¢å®šä¹‰"ï¼Œå®ƒè®°å½•äº†"è¦åšä»€ä¹ˆ"ï¼Œä½†æ²¡æœ‰ç«‹å³æ‰§è¡Œã€‚</p>
<h3 data-id="heading-3">ä½•æ—¶çœŸæ­£æ‰§è¡Œï¼Ÿ</h3>
<p>åªæœ‰å½“æˆ‘ä»¬å¼€å§‹<strong>æšä¸¾</strong>æŸ¥è¯¢ç»“æœæ—¶ï¼ˆå¦‚<code>foreach</code>å¾ªç¯ï¼‰ï¼ŒLINQæ‰ä¼šçœŸæ­£æ‰§è¡ŒæŸ¥è¯¢ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">foreach</span> (<span class="hljs-keyword">var</span> item <span class="hljs-keyword">in</span> updates) Â <span class="hljs-comment">// è¿™é‡Œå¼€å§‹è§¦å‘å®é™…æ‰§è¡Œ</span>
{
 Â  Â <span class="hljs-comment">// ...</span>
}
</code></pre>
<h3 data-id="heading-4">å¾ªç¯å†…éƒ¨çš„æ‰§è¡Œæœºåˆ¶</h3>
<p>æ¯æ¬¡è¿­ä»£<code>foreach</code>å¾ªç¯æ—¶ï¼ŒLINQä¼šï¼š</p>
<ol start="0">
<li>ä»<code>_svData.Keys</code>ä¸­è·å–ä¸‹ä¸€ä¸ªé”®</li>
<li>ä»<code>allDatas</code>ä¸­è·å–å¯¹åº”çš„å€¼</li>
<li>åˆ›å»ºåŒ¿åå¯¹è±¡å¹¶è¿”å›</li>
</ol>
<p><strong>å…³é”®é—®é¢˜</strong>ï¼š<strong>æ¯æ¬¡è¿­ä»£éƒ½ä¼šé‡æ–°è®¿é—®<code>_svData.Keys</code>é›†åˆ</strong>ï¼</p>
<h3 data-id="heading-5">ä¸ºä»€ä¹ˆä¼šæŠ›å‡ºå¼‚å¸¸</h3>
<p>å½“åœ¨å¾ªç¯å†…éƒ¨ä¿®æ”¹é›†åˆæ—¶ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">_svData.<span class="hljs-title class_">AddOrUpdate</span>(item.<span class="hljs-property">Key</span>, item.<span class="hljs-property">Value</span>, <span class="hljs-function">(<span class="hljs-params">k, oldValue</span>) =&gt;</span> item.<span class="hljs-property">Value</span>);
</code></pre>
<p>è¿™è¡Œä»£ç ä¿®æ”¹äº†<code>_svData</code>å­—å…¸ã€‚ç”±äº<code>_svData.Keys</code>æ˜¯ä¸€ä¸ª<strong>åŠ¨æ€è§†å›¾</strong>ï¼ˆä¸æ˜¯é™æ€å‰¯æœ¬ï¼‰ï¼Œå®ƒä¼šå®æ—¶åæ˜ <code>_svData</code>çš„å˜åŒ–ã€‚</p>
<p>å› æ­¤ï¼Œå½“å¾ªç¯è¿›è¡Œåˆ°ç¬¬äºŒæ¬¡è¿­ä»£æ—¶ï¼š</p>
<ul>
<li>LINQå°è¯•å†æ¬¡è®¿é—®<code>_svData.Keys</code></li>
<li>å‘ç°è¿™ä¸ªé›†åˆå·²ç»åœ¨ç¬¬ä¸€æ¬¡è¿­ä»£ä¸­è¢«ä¿®æ”¹</li>
<li>ç«‹å³æŠ›å‡º"é›†åˆåœ¨æšä¸¾æ•°å®ä¾‹åŒ–åè¿›è¡Œäº†ä¿®æ”¹"çš„å¼‚å¸¸</li>
</ul>
<h2 data-id="heading-6">è§£å†³æ–¹æ¡ˆï¼šToList()çš„æ•‘åœº</h2>
<p>è§£å†³è¿™ä¸ªé—®é¢˜çš„å…³é”®æ˜¯<strong>æ‰“ç ´å»¶è¿Ÿæ‰§è¡Œé“¾</strong>ï¼Œåˆ›å»ºæŸ¥è¯¢ç»“æœçš„é™æ€å‰¯æœ¬ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">var</span> updates = _svData.<span class="hljs-property">Keys</span>.<span class="hljs-title class_">Zip</span>(allDatas, <span class="hljs-function">(<span class="hljs-params">key, value</span>) =&gt;</span> <span class="hljs-keyword">new</span> { <span class="hljs-title class_">Key</span> = key, <span class="hljs-title class_">Value</span> = value })
 Â   .<span class="hljs-title class_">ToList</span>(); Â <span class="hljs-comment">// åˆ›å»ºé™æ€å‰¯æœ¬</span>
â€‹
foreach (<span class="hljs-keyword">var</span> item <span class="hljs-keyword">in</span> updates)
{
 Â  Â _svData.<span class="hljs-title class_">AddOrUpdate</span>(item.<span class="hljs-property">Key</span>, item.<span class="hljs-property">Value</span>, <span class="hljs-function">(<span class="hljs-params">k, oldValue</span>) =&gt;</span> item.<span class="hljs-property">Value</span>);
}
</code></pre>
<h3 data-id="heading-7">ToList()çš„å·¥ä½œåŸç†</h3>
<p><code>ToList()</code>æ–¹æ³•ä¼šï¼š</p>
<ol start="0">
<li>ç«‹å³æ‰§è¡Œæ•´ä¸ªLINQæŸ¥è¯¢</li>
<li>å°†æ‰€æœ‰ç»“æœä¸€æ¬¡æ€§åŠ è½½åˆ°å†…å­˜ä¸­çš„<code>List&lt;&gt;</code>å¯¹è±¡</li>
<li>è¿”å›è¿™ä¸ªå®Œæ•´çš„é™æ€å‰¯æœ¬</li>
</ol>
<p>ä¹‹åçš„<code>foreach</code>å¾ªç¯åªæšä¸¾è¿™ä¸ªé™æ€å‰¯æœ¬ï¼Œä¸å†è®¿é—®åŸå§‹çš„<code>_svData.Keys</code>é›†åˆã€‚å› æ­¤ï¼Œå³ä½¿åœ¨å¾ªç¯å†…éƒ¨ä¿®æ”¹äº†<code>_svData</code>ï¼Œä¹Ÿä¸ä¼šå½±å“åˆ°æ­£åœ¨æšä¸¾çš„å‰¯æœ¬ã€‚</p>
<h2 data-id="heading-8">ToList()çš„ä½¿ç”¨åœºæ™¯</h2>
<p>é™¤äº†é¿å…é›†åˆä¿®æ”¹å¼‚å¸¸å¤–ï¼Œ<code>ToList()</code>è¿˜æœ‰å¾ˆå¤šå…¶ä»–é€‚ç”¨åœºæ™¯ï¼š</p>
<h3 data-id="heading-9">1. å¤šæ¬¡æšä¸¾åŒä¸€æŸ¥è¯¢ç»“æœ</h3>
<p>é¿å…é‡å¤æ‰§è¡ŒLINQæŸ¥è¯¢å¸¦æ¥çš„æ€§èƒ½å¼€é”€ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">// ä¸å¥½çš„åšæ³•ï¼šå¤šæ¬¡æ‰§è¡ŒåŒä¸€æŸ¥è¯¢
var <span class="hljs-attr">query</span> = db.Users.Where(u =&gt; u.Age &gt; <span class="hljs-number">18</span>)<span class="hljs-comment">;</span>
var <span class="hljs-attr">count</span> = query.Count()<span class="hljs-comment">;</span>
var <span class="hljs-attr">firstUser</span> = query.First()<span class="hljs-comment">;</span>
â€‹
// å¥½çš„åšæ³•ï¼šåˆ›å»ºå‰¯æœ¬åå¤šæ¬¡ä½¿ç”¨
var <span class="hljs-attr">users</span> = db.Users.Where(u =&gt; u.Age &gt; <span class="hljs-number">18</span>).ToList()<span class="hljs-comment">;</span>
var <span class="hljs-attr">count</span> = users.Count<span class="hljs-comment">;</span>
var <span class="hljs-attr">firstUser</span> = users.First()<span class="hljs-comment">;</span>
</code></pre>
<h3 data-id="heading-10">2. éœ€è¦éšæœºè®¿é—®æŸ¥è¯¢ç»“æœ</h3>
<p><code>List&lt;&gt;</code>æ”¯æŒç´¢å¼•è®¿é—®ï¼Œè€ŒLINQæŸ¥è¯¢ç»“æœé€šå¸¸ä¸æ”¯æŒï¼š</p>
<pre><code class="hljs language-ini" lang="ini">var <span class="hljs-attr">users</span> = db.Users.OrderBy(u =&gt; u.Name).ToList()<span class="hljs-comment">;</span>
var <span class="hljs-attr">thirdUser</span> = users[<span class="hljs-number">2</span>]<span class="hljs-comment">; Â // ç›´æ¥é€šè¿‡ç´¢å¼•è®¿é—®</span>
</code></pre>
<h3 data-id="heading-11">3. éœ€è¦ä¿®æ”¹æŸ¥è¯¢ç»“æœ</h3>
<p>å½“éœ€è¦å¯¹æŸ¥è¯¢ç»“æœè¿›è¡Œæ·»åŠ ã€åˆ é™¤ç­‰æ“ä½œæ—¶ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">var <span class="hljs-attr">users</span> = db.Users.Where(u =&gt; u.Age &gt; <span class="hljs-number">18</span>).ToList()<span class="hljs-comment">;</span>
users.Add(new User { <span class="hljs-attr">Name</span> = <span class="hljs-string">"New User"</span>, Age = <span class="hljs-number">20</span> })<span class="hljs-comment">;</span>
</code></pre>
<h3 data-id="heading-12">4. æ§åˆ¶å†…å­˜ä½¿ç”¨</h3>
<p>å¯¹äºå°å‹æ•°æ®é›†ï¼Œåˆ›å»ºå‰¯æœ¬çš„å†…å­˜å¼€é”€å¯æ¥å—ï¼Œä¸”èƒ½æé«˜ä»£ç å®‰å…¨æ€§ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">var <span class="hljs-attr">smallDataset</span> = largeDataset.Where(item =&gt; item.IsActive).ToList()<span class="hljs-comment">;</span>
</code></pre>
<h2 data-id="heading-13">LINQå»¶è¿Ÿæ‰§è¡Œçš„å…¶ä»–æ³¨æ„äº‹é¡¹</h2>
<h3 data-id="heading-14">1. é“¾å¼è°ƒç”¨çš„å»¶è¿Ÿæ€§</h3>
<p>å¤šä¸ªLINQæ“ä½œç¬¦é“¾æ¥åœ¨ä¸€èµ·æ—¶ï¼Œæ•´ä¸ªé“¾éƒ½æ˜¯å»¶è¿Ÿæ‰§è¡Œçš„ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">// æ•´ä¸ªé“¾éƒ½æ˜¯å»¶è¿Ÿæ‰§è¡Œçš„
var <span class="hljs-attr">result</span> = collection.Where(item =&gt; item.IsActive)
    .OrderBy(<span class="hljs-attr">item</span> =&gt; item.Name)
    .Select(<span class="hljs-attr">item</span> =&gt; item.Id)<span class="hljs-comment">;</span>
</code></pre>
<h3 data-id="heading-15">2. ç«‹å³æ‰§è¡Œçš„æ“ä½œç¬¦</h3>
<p>å¹¶éæ‰€æœ‰LINQæ“ä½œç¬¦éƒ½æ˜¯å»¶è¿Ÿæ‰§è¡Œçš„ï¼Œä»¥ä¸‹æ“ä½œç¬¦ä¼šç«‹å³æ‰§è¡Œï¼š</p>
<ul>
<li>èšåˆå‡½æ•°ï¼š<code>Count()</code>, <code>Sum()</code>, <code>Average()</code>, <code>Min()</code>, <code>Max()</code></li>
<li>å…ƒç´ æ“ä½œï¼š<code>First()</code>, <code>Last()</code>, <code>Single()</code>, <code>ElementAt()</code></li>
<li>è½¬æ¢æ“ä½œï¼š<code>ToList()</code>, <code>ToArray()</code>, <code>ToDictionary()</code></li>
</ul>
<h3 data-id="heading-16">3. å¤šçº¿ç¨‹ç¯å¢ƒä¸‹çš„é£é™©</h3>
<p>åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸­ï¼Œå»¶è¿Ÿæ‰§è¡Œå¯èƒ½å¯¼è‡´æ•°æ®ä¸ä¸€è‡´ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">// çº¿ç¨‹1ï¼šå®šä¹‰æŸ¥è¯¢
var <span class="hljs-attr">query</span> = sharedCollection.Where(item =&gt; item.IsValid)<span class="hljs-comment">;</span>

// çº¿ç¨‹2ï¼šä¿®æ”¹é›†åˆ
sharedCollection.Add(new Item { <span class="hljs-attr">IsValid</span> = <span class="hljs-literal">true</span> })<span class="hljs-comment">;</span>

// çº¿ç¨‹1ï¼šæ‰§è¡ŒæŸ¥è¯¢ï¼ˆæ­¤æ—¶ç»“æœå·²åŒ…å«çº¿ç¨‹2æ·»åŠ çš„é¡¹ï¼‰
var <span class="hljs-attr">result</span> = query.ToList()<span class="hljs-comment">;</span>
</code></pre>
<h2 data-id="heading-17">æœ€ä½³å®è·µæ€»ç»“</h2>
<ol start="0">
<li><strong>å½“éœ€è¦åœ¨æšä¸¾è¿‡ç¨‹ä¸­ä¿®æ”¹åŸå§‹é›†åˆæ—¶</strong>ï¼šä½¿ç”¨<code>ToList()</code>åˆ›å»ºå‰¯æœ¬</li>
<li><strong>å½“éœ€è¦å¤šæ¬¡æšä¸¾åŒä¸€æŸ¥è¯¢ç»“æœæ—¶</strong>ï¼šä½¿ç”¨<code>ToList()</code>é¿å…é‡å¤æ‰§è¡Œ</li>
<li><strong>å½“æŸ¥è¯¢ç»“æœè¾ƒå°ä¸”å†…å­˜å¼€é”€å¯æ¥å—æ—¶</strong>ï¼šä¼˜å…ˆè€ƒè™‘ä½¿ç”¨<code>ToList()</code>æé«˜ä»£ç å®‰å…¨æ€§</li>
<li><strong>å¯¹äºå¤§æ•°æ®é›†</strong>ï¼šæƒè¡¡å†…å­˜ä½¿ç”¨å’Œä»£ç å®‰å…¨æ€§ï¼Œè€ƒè™‘å…¶ä»–è§£å†³æ–¹æ¡ˆ</li>
<li><strong>ç†è§£å»¶è¿Ÿæ‰§è¡Œç‰¹æ€§</strong>ï¼šåœ¨ç¼–å†™LINQæŸ¥è¯¢æ—¶ï¼Œå§‹ç»ˆç‰¢è®°å…¶æ‰§è¡Œæ—¶æœº</li>
</ol>
<h2 data-id="heading-18">ç»“è®º</h2>
<p><code>ToList()</code>ä¸ä»…æ˜¯ä¸€ä¸ªç®€å•çš„é›†åˆè½¬æ¢æ–¹æ³•ï¼Œå®ƒè¿˜æ˜¯è§£å†³LINQé›†åˆä¿®æ”¹å¼‚å¸¸çš„"æ•‘åœºè‹±é›„"ã€‚é€šè¿‡ç†è§£LINQçš„å»¶è¿Ÿæ‰§è¡Œç‰¹æ€§å’Œ<code>ToList()</code>çš„å·¥ä½œåŸç†ï¼Œæˆ‘ä»¬å¯ä»¥ç¼–å†™å‡ºæ›´å®‰å…¨ã€æ›´é«˜æ•ˆçš„ä»£ç ã€‚</p>
<p>åœ¨å®é™…å¼€å‘ä¸­ï¼Œåˆç†ä½¿ç”¨<code>ToList()</code>å¯ä»¥é¿å…å¾ˆå¤šæ½œåœ¨çš„é—®é¢˜ï¼Œç‰¹åˆ«æ˜¯åœ¨å¤„ç†å¤æ‚çš„é›†åˆæ“ä½œæ—¶ã€‚å¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¸®åŠ©å¤§å®¶æ›´å¥½åœ°ç†è§£å’Œåº”ç”¨è¿™ä¸ªå¼ºå¤§çš„LINQå·¥å…·ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[CDN æŠ€æœ¯æ·±åº¦è§£æ]]></title>    <link>https://juejin.cn/post/7582759716188274688</link>    <guid>https://juejin.cn/post/7582759716188274688</guid>    <pubDate>2025-12-12T10:16:51.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582759716188274688" data-draft-id="7582779306730766371" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="CDN æŠ€æœ¯æ·±åº¦è§£æ"/> <meta itemprop="keywords" content="å‰ç«¯,CDN"/> <meta itemprop="datePublished" content="2025-12-12T10:16:51.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="asing"/> <meta itemprop="url" content="https://juejin.cn/user/1412191054738446"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            CDN æŠ€æœ¯æ·±åº¦è§£æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1412191054738446/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    asing
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-12T10:16:51.000Z" title="Fri Dec 12 2025 10:16:51 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">åºè¨€</h2>
<p>ä» Q3 å¼€å§‹å…¬å¸å¦‚ç«å¦‚è¼å¼€å±•äº†å·ç§°æˆ˜ç•¥çº§çš„é¡¹ç›®ã€Šè½¦å•†åŸã€‹ï¼Œè¯¥é¡¹ç›®æ¨ªè·¨äº† 5 ä¸ª BU ç›¸äº’é…åˆï¼Œç”±äºæˆ‘æ‰€åœ¨çš„ç»„å±äºå‰ç«¯ä¸­å°æ¶æ„ç»„ï¼Œç†æ‰€å½“ç„¶çš„ä¸€äº›ä¸­å°éƒ¨åˆ†å·¥ä½œå°±è½åœ¨äº†æˆ‘ä»¬è¿™è¾¹ï¼Œæ¯”å¦‚æ”¯ä»˜ï¼Œç»“ç®—ï¼Œé€šç”¨è®¢å•è¯¦æƒ…ç­‰ï¼Œåˆšå¥½æˆ‘ä¹‹å‰å°±æ˜¯è´Ÿè´£çš„æ”¯ä»˜ä¾§ï¼Œåœ¨è¿™ä¸ªé¡¹ç›®é‡Œæˆ‘ä¹Ÿé¦–å½“å…¶å†²çš„å†²åœ¨äº†æœ€å‰çº¿ã€‚</p>
<blockquote>
<p>å¥½äº†ï¼Œè¯´äº†ä¸€æ®µåºŸè¯ï¼Œè®²ä¸€ä¸‹ä¸ºä»€ä¹ˆè¦å†™è¿™ç¯‡æ–‡ç« å§ï¼Œåœ¨é¡¹ç›®åˆæœŸçš„è®¾è®¡ï¼Œä¸ºäº†æå‡ç”¨æˆ·ä½“éªŒï¼Œå®Œæˆç§’å¼€ç‡ç­‰æŒ‡æ ‡ï¼ŒæŠŠé™æ€èµ„æº CDN åŠ é€Ÿå¼•å…¥åˆ°äº†é¡¹ç›®æ¶æ„ä¸­æ¥ï¼Œé¡¹ç›®è½åœ°è¿‡ç¨‹ä¸­åœ¨å…¬å¸æ­å»ºçš„ CDN æœåŠ¡çš„ä½¿ç”¨ä¸Šä¹Ÿé‡åˆ°äº†ä¸€äº›é—®é¢˜ï¼Œéšç€é¡¹ç›®é€æ­¥ä¸Šçº¿ï¼Œå°±æŠŠè¯¥éƒ¨åˆ†ç»™æ€»ç»“ä¸€ä¸‹ç»™å›¢é˜Ÿåˆ†äº«ä¸€ä¸‹æŠ€æœ¯å¿ƒå¾—ã€‚ï¼ˆPSï¼š å·²éšå»ä¸€äº›å†…éƒ¨æ•æ„Ÿéƒ¨åˆ†ï¼‰</p>
</blockquote>
<h2 data-id="heading-1"><strong>ä¸€ã€CDN æ ¸å¿ƒæ¦‚å¿µä¸ä»·å€¼</strong></h2>
<h3 data-id="heading-2"><strong>1.1 ä»€ä¹ˆæ˜¯ CDNï¼Ÿ</strong></h3>
<p>CDNï¼ˆContent Delivery Networkï¼‰ï¼Œå³å†…å®¹åˆ†å‘ç½‘ç»œï¼Œæ˜¯é€šè¿‡åœ¨ç°æœ‰äº’è”ç½‘åŸºç¡€ä¸Šæ„å»ºçš„ä¸€å±‚æ™ºèƒ½è™šæ‹Ÿç½‘ç»œï¼Œå°†æºç«™å†…å®¹åˆ†å‘è‡³å…¨çƒå„åœ°çš„è¾¹ç¼˜èŠ‚ç‚¹ï¼Œä½¿ç”¨æˆ·èƒ½å¤Ÿå°±è¿‘è·å–æ‰€éœ€å†…å®¹ã€‚</p>
<h3 data-id="heading-3"><strong>1.2 ä¸ºä»€ä¹ˆéœ€è¦ CDNï¼Ÿ</strong></h3>
<pre><code class="hljs language-markdown" lang="markdown">ä¼ ç»Ÿè®¿é—®æ¨¡å¼ç—›ç‚¹ï¼š
ç”¨æˆ· â†’ é•¿é€”ç½‘ç»œä¼ è¾“ â†’ æºç«™æœåŠ¡å™¨
<span class="hljs-code">      â†“
é—®é¢˜ï¼šå»¶è¿Ÿé«˜ã€æ‹¥å¡ã€å•ç‚¹æ•…éšœ
      
CDNè®¿é—®æ¨¡å¼ï¼š
ç”¨æˆ· â†’ æœ€è¿‘ CDN èŠ‚ç‚¹ï¼ˆé€šå¸¸&lt;50msï¼‰
      â†“
ä¼˜åŠ¿ï¼šå¿«é€Ÿã€ç¨³å®šã€å¯æ‰©å±•
</span></code></pre>
<h3 data-id="heading-4"><strong>1.3 CDN çš„æ ¸å¿ƒä»·å€¼</strong></h3>






























<table><thead><tr><th>ç»´åº¦</th><th>æ”¶ç›Š</th><th>é‡åŒ–æŒ‡æ ‡</th></tr></thead><tbody><tr><td>æ€§èƒ½</td><td>è®¿é—®é€Ÿåº¦æå‡ 50%-70%</td><td>é¦–å±åŠ è½½æ—¶é—´â†“</td></tr><tr><td>æˆæœ¬</td><td>èŠ‚çœæºç«™å¸¦å®½ 40%-60%</td><td>å¸¦å®½è´¹ç”¨â†“</td></tr><tr><td>å¯ç”¨æ€§</td><td>å¯è¾¾ 99.99%</td><td>SLA æå‡</td></tr><tr><td>å®‰å…¨</td><td>DDoS é˜²æŠ¤èƒ½åŠ›å¢å¼º</td><td>æ”»å‡»æ‹¦æˆªç‡â†‘</td></tr></tbody></table>
<p>Â </p>
<h2 data-id="heading-5"><strong>äºŒã€CDN æ ¸å¿ƒå·¥ä½œåŸç†</strong></h2>
<h3 data-id="heading-6"><strong>2.1 å®Œæ•´è¯·æ±‚æµç¨‹å›¾è§£</strong></h3>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/103bd2ef595e4dd0b1cb2c6ce3de276a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYXNpbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766139411&amp;x-signature=mNNki37x%2FQFvh4L35gVqSUyIkUw%3D" alt="è¯·æ±‚æµç¨‹.png" width="30%" loading="lazy"/>
Â 
<h3 data-id="heading-7"><strong>2.2 DNSæ™ºèƒ½è°ƒåº¦æœºåˆ¶</strong></h3>
<pre><code class="hljs language-markdown" lang="markdown">ç”¨æˆ·è¯·æ±‚æµç¨‹ï¼š
<span class="hljs-bullet">1.</span> ç”¨æˆ·è®¿é—® www.example.com
<span class="hljs-bullet">2.</span> æœ¬åœ° DNS â†’ æƒå¨ DNSï¼ˆCNAME æŒ‡å‘ CDN å‚å•†ï¼‰
<span class="hljs-bullet">3.</span> CDN çš„ DNS åŸºäºä»¥ä¸‹å› ç´ å†³ç­–ï¼š
<span class="hljs-bullet">   -</span> ç”¨æˆ· IP åœ°ç†ä½ç½®
<span class="hljs-bullet">   -</span> è¿è¥å•†çº¿è·¯è´¨é‡
<span class="hljs-bullet">   -</span> èŠ‚ç‚¹å¥åº·çŠ¶æ€
<span class="hljs-bullet">   -</span> å®æ—¶è´Ÿè½½æƒ…å†µ
<span class="hljs-bullet">4.</span> è¿”å›æœ€ä¼˜è¾¹ç¼˜èŠ‚ç‚¹ IP
</code></pre>
<h3 data-id="heading-8"><strong>2.3 ç¼“å­˜å±‚çº§æ¶æ„</strong></h3>
<pre><code class="hljs">ä¸‰å±‚ç¼“å­˜ä½“ç³»ï¼š
è¾¹ç¼˜å±‚ï¼ˆEdgeï¼‰ - æœ€æ¥è¿‘ç”¨æˆ·ï¼Œæ•°é‡æœ€å¤š
åŒºåŸŸå±‚ï¼ˆRegionalï¼‰ - çœçº§/å¤§åŒºçº§èŠ‚ç‚¹
ä¸­å¿ƒå±‚ï¼ˆCoreï¼‰ - å…¨å›½/å…¨çƒçº§æ ¸å¿ƒèŠ‚ç‚¹


å›æºè·¯å¾„ï¼šè¾¹ç¼˜ â†’ åŒºåŸŸ â†’ ä¸­å¿ƒ â†’ æºç«™
</code></pre>
<h2 data-id="heading-9"><strong>ä¸‰ã€CDN å…³é”®æŠ€æœ¯ç‰¹æ€§</strong></h2>
<h3 data-id="heading-10"><strong>3.1 åŠ é€Ÿæ€§èƒ½ä¼˜åŒ–</strong></h3>
<p>é™æ€èµ„æºåŠ é€Ÿï¼š</p>
<ul>
<li>å›¾ç‰‡ã€CSSã€JS ç­‰é™æ€æ–‡ä»¶</li>
<li>ç¼“å­˜å‘½ä¸­ç‡é€šå¸¸ &gt; 95%</li>
<li>æ”¯æŒ HTTP/2ã€QUIC ç­‰æ–°åè®®</li>
</ul>
<p>åŠ¨æ€å†…å®¹åŠ é€Ÿï¼š</p>
<ul>
<li>æ™ºèƒ½è·¯ç”±é€‰æ‹©</li>
<li>TCP ä¼˜åŒ–ï¼ˆæ‹¥å¡æ§åˆ¶ã€çª—å£è°ƒæ•´ï¼‰</li>
<li>é“¾è·¯ä¼˜åŒ–ï¼ˆBGP Anycastï¼‰</li>
</ul>
<h3 data-id="heading-11"><strong>3.2 å®‰å…¨é˜²æŠ¤ä½“ç³»</strong></h3>
<pre><code class="hljs">é˜²æŠ¤å±‚æ¬¡ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   åº”ç”¨å±‚é˜²æŠ¤    â”‚ â† DDoS/CC æ”»å‡»é˜²æŠ¤
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   åè®®å±‚é˜²æŠ¤    â”‚ â† TCP/UDP Flood é˜²æŠ¤
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   ç½‘ç»œå±‚é˜²æŠ¤    â”‚ â† å¸¦å®½è€—å°½æ”»å‡»é˜²æŠ¤
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h3 data-id="heading-12"><strong>3.3 è·¨åœ°åŸŸ/è·¨è¿è¥å•†ä¼˜åŒ–</strong></h3>
<pre><code class="hljs language-diff" lang="diff">é—®é¢˜æ ¹æºï¼š
ç”µä¿¡ â†’ è”é€š â†’ ç§»åŠ¨ â†’ æ•™è‚²ç½‘
  â†“      â†“      â†“       â†“
äº’é€šå¸¦å®½æœ‰é™ï¼Œè·¨ç½‘å»¶è¿Ÿé«˜


CDN è§£å†³æ–¹æ¡ˆï¼š
<span class="hljs-deletion">- å¤šçº¿ BGP æ¥å…¥</span>
<span class="hljs-deletion">- è¿è¥å•†æ·±åº¦åˆä½œ</span>
<span class="hljs-deletion">- è¾¹ç¼˜èŠ‚ç‚¹è¦†ç›–æ‰€æœ‰è¿è¥å•†</span>
</code></pre>
<h2 data-id="heading-13"><strong>å››ã€CDN ç¼“å­˜è§£æ</strong></h2>
<h3 data-id="heading-14"><strong>4.1 ç¼“å­˜å·¥ä½œæœºåˆ¶</strong></h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8ec0b95d74d24b23b3d14d1d998e144c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYXNpbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766139411&amp;x-signature=5qANvvmJxnHhFElOVUSp36QVphg%3D" alt="ç¼“å­˜æœºåˆ¶.png" loading="lazy"/></p>
<h3 data-id="heading-15"><strong>4.2 ç¼“å­˜æ›´æ–°ç­–ç•¥å¯¹æ¯”</strong></h3>



































<table><thead><tr><th>ç­–ç•¥</th><th>åŸç†</th><th>é€‚ç”¨åœºæ™¯</th><th>ä¼˜ç¼ºç‚¹</th></tr></thead><tbody><tr><td>è¢«åŠ¨æ›´æ–°</td><td>ç¼“å­˜å¤±æ•ˆæ—¶å›æº</td><td>æ›´æ–°ä¸é¢‘ç¹çš„å†…å®¹</td><td>ç®€å•ï¼Œä½†æœ‰å»¶è¿Ÿ</td></tr><tr><td>ä¸»åŠ¨é¢„çƒ­</td><td>æå‰æ¨é€è‡³CDN</td><td>é‡è¦æ´»åŠ¨ã€æ–°å“å‘å¸ƒ</td><td>ä½“éªŒå¥½ï¼Œæˆæœ¬ç•¥é«˜</td></tr><tr><td>ç‰ˆæœ¬åŒ– URL</td><td>URL å¸¦ç‰ˆæœ¬å·æˆ–å“ˆå¸Œ</td><td>é™æ€èµ„æºæ›´æ–°</td><td>ç¼“å­˜æ§åˆ¶ç²¾å‡†</td></tr><tr><td>æ—¶é—´æˆ³å‚æ•°</td><td>URL å¸¦æ—¶é—´æˆ³å‚æ•°</td><td>å¼€å‘è°ƒè¯•é˜¶æ®µ</td><td>ç®€å•ä½†ç¼“å­˜å‘½ä¸­ç‡ä½</td></tr></tbody></table>
<p>Â </p>
<h3 data-id="heading-16"><strong>4.3 CDN é¢„çƒ­è¯¦è§£</strong></h3>
<ol>
<li><strong>ä»€ä¹ˆæ˜¯é¢„çƒ­ï¼Ÿ</strong></li>
</ol>
<p>é¢„çƒ­æ˜¯æŒ‡ä¸»åŠ¨å°†å†…å®¹æ¨é€åˆ° CDN è¾¹ç¼˜èŠ‚ç‚¹ï¼Œè€Œä¸æ˜¯ç­‰å¾…ç”¨æˆ·é¦–æ¬¡è®¿é—®æ—¶æ‰å›æºæ‹‰å–ã€‚</p>
<p>Â </p>
<ol start="2">
<li><strong>ä¸ºä»€ä¹ˆéœ€è¦é¢„çƒ­ï¼Ÿ</strong></li>
</ol>

<pre><code class="hljs language-css" lang="css">é¦–æ¬¡è®¿é—®é—®é¢˜ï¼š
ç”¨æˆ·<span class="hljs-selector-tag">A</span>è¯·æ±‚æ–°èµ„æº â†’ CDNæœªç¼“å­˜ â†’ å›æºæ‹‰å–ï¼ˆæ…¢ï¼‰
é¢„çƒ­è§£å†³ï¼š
æå‰æ¨é€èµ„æºåˆ°CDN â†’ æ‰€æœ‰ç”¨æˆ·éƒ½å¿«é€Ÿè®¿é—®
</code></pre>
<p>3.  <strong>é¢„çƒ­å®æ–½æ–¹å¼ï¼š</strong></p>
<p>API ä¸»åŠ¨æ¨é€</p>
<pre><code class="hljs language-vbnet" lang="vbnet"># ä½¿ç”¨ CDN å‚å•† API æ¥å£
curl -X POST <span class="hljs-string">"https://cdn-api.example.com/prefetch"</span> \
  -H <span class="hljs-string">"Authorization: Bearer YOUR_TOKEN"</span> \
  -d <span class="hljs-comment">'{</span>
    <span class="hljs-string">"urls"</span>: [
      <span class="hljs-string">"https://cdn.example.com/product/new.jpg"</span>,
      <span class="hljs-string">"https://cdn.example.com/static/v2.0/app.js"</span>
    ]
  }<span class="hljs-comment">'</span>
</code></pre>
<p>Â </p>
<ol start="4">
<li><strong>é¢„çƒ­ vs åˆ·æ–°ï¼š</strong></li>
</ol>























<table><thead><tr><th>æ“ä½œ</th><th>ç›®çš„</th><th>æ—¶æœº</th><th>å½±å“</th></tr></thead><tbody><tr><td>é¢„çƒ­</td><td>æå‰å¡«å……ç¼“å­˜</td><td>å†…å®¹å‘å¸ƒå‰</td><td>æ”¹å–„é¦–æ¬¡è®¿é—®ä½“éªŒ</td></tr><tr><td>åˆ·æ–°</td><td>å¼ºåˆ¶æ›´æ–°ç¼“å­˜</td><td>å†…å®¹æ›´æ–°å</td><td>ç¡®ä¿ç”¨æˆ·è·å–æœ€æ–°å†…å®¹</td></tr></tbody></table>
<p>Â </p>
<h2 data-id="heading-17"><strong>äº”ã€CDNåº”ç”¨åœºæ™¯</strong></h2>
<h3 data-id="heading-18"><strong>5.1 åœºæ™¯åŒ–é…ç½®æ–¹æ¡ˆ</strong></h3>
<p>ç”µå•†ç½‘ç«™æ–¹æ¡ˆï¼š</p>
<pre><code class="hljs">é™æ€èµ„æºï¼šé•¿æœŸç¼“å­˜ï¼ˆ30å¤©ï¼‰
å•†å“å›¾ç‰‡ï¼šç‰ˆæœ¬åŒ–ç®¡ç†
æ´»åŠ¨é¡µé¢ï¼šé¢„çƒ­+çŸ­ç¼“å­˜ï¼ˆ5åˆ†é’Ÿï¼‰
APIæ¥å£ï¼šåŠ¨æ€åŠ é€Ÿ+é€‚å½“ç¼“å­˜
</code></pre>
<h3 data-id="heading-19"><strong>5.2 ç›‘æ§ä¸å‘Šè­¦</strong></h3>
<pre><code class="hljs language-markdown" lang="markdown">å…³é”®ç›‘æ§æŒ‡æ ‡ï¼š
<span class="hljs-bullet">1.</span> å‘½ä¸­ç‡ï¼ˆ&gt;95%ä¸ºå¥åº·ï¼‰
<span class="hljs-bullet">2.</span> å¹³å‡å“åº”æ—¶é—´ï¼ˆ&lt;100msä¸ºä¼˜ï¼‰
<span class="hljs-bullet">3.</span> å¸¦å®½ä½¿ç”¨ï¼ˆå¼‚å¸¸çªå¢éœ€é¢„è­¦ï¼‰
<span class="hljs-bullet">4.</span> é”™è¯¯ç‡ï¼ˆ5xxé”™è¯¯&lt;0.1%ï¼‰
<span class="hljs-bullet">5.</span> å›æºæ¯”ä¾‹ï¼ˆ&lt;10%ä¸ºä½³ï¼‰


å‘Šè­¦ç­–ç•¥ï¼š
<span class="hljs-bullet">-</span> å®æ—¶å‘Šè­¦ï¼šé”™è¯¯ç‡çªå¢
<span class="hljs-bullet">-</span> å®šæ—¶æŠ¥å‘Šï¼šæ¯æ—¥å‘½ä¸­ç‡æ±‡æ€»
<span class="hljs-bullet">-</span> å®¹é‡é¢„è­¦ï¼šå¸¦å®½ä½¿ç”¨è¾¾80%
</code></pre>
<h2 data-id="heading-20"><strong>å…­ã€æœ€ä½³å®è·µ</strong></h2>
<h3 data-id="heading-21"><strong>6.1</strong> Nginx ä¼˜åŒ–</h3>
<p>ç°ä»£ Nginx ä¼˜åŒ–å®è·µï¼šæ¶æ„ã€é…ç½®ä¸æ€§èƒ½è°ƒä¼˜: <a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FJvSx9rkCqHWtFVil90dJqw" target="_blank" title="https://mp.weixin.qq.com/s/JvSx9rkCqHWtFVil90dJqw" ref="nofollow noopener noreferrer">mp.weixin.qq.com/s/JvSx9rkCqâ€¦</a></p>
<h3 data-id="heading-22"><strong>6.2</strong> ä¹‹å®¶ä½¿ç”¨çš„ CDN ä¾›åº”å•†</h3>



















<table><thead><tr><th>ç™¾åº¦</th><th>Ageå¤´æ ‡è¯†è¾¹ç¼˜æ˜¯å¦æœ‰ç¼“å­˜åŠç¼“å­˜æ—¶é•¿ï¼›å­˜åœ¨è¡¨ç¤ºå‘½ä¸­è¾¹ç¼˜ç¼“å­˜ï¼Œä¸å­˜åœ¨è¡¨ç¤ºè¾¹ç¼˜æ²¡æœ‰ç¼“å­˜ï¼Œè¯·æ±‚å›äº†ä¸Šçº§æˆ–è€…æºç«™ï¼›Ohc-Global-Saved-Timeå¤´æ ‡è¯†å…¨å±€é¦–æ¬¡ç¼“å­˜æ—¶é—´ï¼Œå¯ä»¥é€šè¿‡è¯¥å“åº”å¤´åˆ¤æ–­ç¬¬ä¸€æ¬¡ç¼“å­˜æ—¶é—´ï¼Œå¦‚æœè¯¥å€¼å’Œè¯·æ±‚æ—¶é—´æ¥è¿‘æˆ–ç›¸ç­‰åˆ™è¯´æ˜è¯·æ±‚å›æºï¼Œæ ¼æ—å¨æ²»æ ‡å‡†æ—¶é—´ï¼›</th><th>Â </th><th>&lt; Age: 4&lt; Ohc-Global-Saved-Time: Thu, 14 Sep 2023 07:55:28 GMT</th><th><a href="https://link.juejin.cn?target=http%3A%2F%2Fpic-b.autoimg.cn" target="_blank" title="http://pic-b.autoimg.cn" ref="nofollow noopener noreferrer">pic-b.autoimg.cn</a></th></tr></thead><tbody><tr><td>åä¸º</td><td>æœ‰â€œx-hcs-proxy-typeâ€å¤´éƒ¨ï¼Œå€¼ä¸ºâ€œ1â€å³å‘½ä¸­ç¼“å­˜ï¼Œå€¼ä¸ºâ€œ0â€å³æœªå‘½ä¸­ç¼“å­˜ï¼Œä¸å†æŸ¥çœ‹å…¶å®ƒå¤´éƒ¨ï¼›</td><td>Â </td><td>ç¤ºä¾‹ç¼“å­˜å‘½ä¸­å¤´éƒ¨å¦‚ä¸‹x-hcs-proxy-type: 1</td><td>Â </td></tr></tbody></table>
<h3 data-id="heading-23"><strong>6.4 ç™¾åº¦ CDN å“åº”å¤´è§£æ</strong></h3>
<p><strong>1.</strong> <code>ohc-cache-hit: lf6ct205 [2], xaix205 [1]</code></p>
<p>å«ä¹‰ï¼šCDNç¼“å­˜å‘½ä¸­çŠ¶æ€å’Œè·¯å¾„è¿½è¸ª</p>
<p>è¯¦ç»†è§£è¯»ï¼š</p>
<ul>
<li>lf6ct205 [2]ï¼š</li>
<li>
<ul>
<li><code>lf6ct205</code>ï¼šè¡¨ç¤ºç¬¬ä¸€ä¸ªå“åº”èŠ‚ç‚¹ï¼ˆå¯èƒ½æ˜¯è¾¹ç¼˜èŠ‚ç‚¹ï¼‰çš„æ ‡è¯†</li>
<li><code>[2]</code>ï¼šç¼“å­˜å‘½ä¸­çŠ¶æ€ç ï¼Œå¸¸è§å«ä¹‰ï¼š</li>
<li>
<ul>
<li><code>0</code>ï¼šMISSï¼ˆæœªå‘½ä¸­ï¼Œå›æºï¼‰</li>
<li><code>1</code>ï¼šHITï¼ˆå®Œå…¨å‘½ä¸­ï¼‰</li>
<li><code>2</code>ï¼šPARTIAL_HIT/HIT_REVALIDATEDï¼ˆéƒ¨åˆ†å‘½ä¸­/éªŒè¯åå‘½ä¸­ï¼‰</li>
<li>è¿™é‡Œ<code>[2]</code>è¡¨ç¤ºè¯¥èŠ‚ç‚¹å¯èƒ½è¿›è¡Œäº†æ¡ä»¶éªŒè¯ï¼ˆIf-Modified-Since/If-None-Matchï¼‰åç¡®è®¤èµ„æºæœ‰æ•ˆ</li>
</ul>
</li>
</ul>
</li>
<li>xaix205 [1]ï¼š</li>
<li>
<ul>
<li><code>xaix205</code>ï¼šç¬¬äºŒä¸ªå“åº”èŠ‚ç‚¹ï¼ˆå¯èƒ½æ˜¯çˆ¶å±‚æˆ–ä¸­é—´å±‚èŠ‚ç‚¹ï¼‰çš„æ ‡è¯†</li>
<li><code>[1]</code>ï¼šè¡¨ç¤ºåœ¨è¯¥èŠ‚ç‚¹å®Œå…¨å‘½ä¸­ç¼“å­˜</li>
</ul>
</li>
</ul>
<p>Â </p>
<p>ç»¼åˆç†è§£ï¼šè¯·æ±‚ç»è¿‡äº†<code>xaix205â†’lf6ct205</code>ä¸¤çº§CDNèŠ‚ç‚¹ï¼Œä¸¤ä¸ªèŠ‚ç‚¹éƒ½å‘½ä¸­ç¼“å­˜ï¼Œå…¶ä¸­çˆ¶èŠ‚ç‚¹å®Œå…¨å‘½ä¸­ï¼Œè¾¹ç¼˜èŠ‚ç‚¹ç»è¿‡éªŒè¯åå‘½ä¸­ã€‚</p>
<p>Â </p>
<p><strong>2.</strong> <code>ohc-file-size: 2108</code></p>
<p>å«ä¹‰ï¼šCDN ç¼“å­˜çš„æ–‡ä»¶å¤§å°</p>
<p>è¯¦ç»†è§£è¯»ï¼š</p>
<ul>
<li>å•ä½ï¼šå­—èŠ‚ï¼ˆBytesï¼‰</li>
<li>å€¼ï¼š2108å­—èŠ‚ â‰ˆ 2.06KB</li>
<li>è¡¨ç¤ºCDNç¼“å­˜çš„è¿™ä¸ªèµ„æºæ–‡ä»¶çš„å®é™…å¤§å°</li>
<li>ç”¨äºç›‘æ§å’Œè¯Šæ–­ï¼Œç¡®è®¤ç¼“å­˜çš„æ–‡ä»¶ä¸æºç«™æ–‡ä»¶å¤§å°æ˜¯å¦ä¸€è‡´</li>
</ul>
<p>Â </p>
<p><strong>3.</strong> <code>ohc-global-saved-time: Thu, 11 Dec 2025 09:17:19 GMT</code></p>
<p>å«ä¹‰ï¼šèµ„æºåœ¨ CDN ä¸Šé¦–æ¬¡ç¼“å­˜çš„æ—¶é—´æˆ³</p>
<p>è¯¦ç»†è§£è¯»ï¼š</p>
<ul>
<li>æ ¼å¼ï¼šRFC 1123æ ¼å¼çš„GMTæ—¶é—´</li>
<li>æ—¶é—´å€¼ï¼š2025å¹´12æœˆ11æ—¥ 09:17:19ï¼ˆGMTï¼‰</li>
<li>æ³¨æ„ï¼šè¿™æ˜¯ä¸€ä¸ªæœªæ¥æ—¶é—´ï¼Œå¯èƒ½æœ‰ä»¥ä¸‹æƒ…å†µï¼š</li>
<li>
<ul>
<li>æ—¶é—´åŒæ­¥é—®é¢˜ï¼šæºç«™æˆ–CDNæœåŠ¡å™¨æ—¶é—´è®¾ç½®é”™è¯¯</li>
<li>ç¼“å­˜ç­–ç•¥é…ç½®ï¼šå¯èƒ½è®¾ç½®äº†å¾ˆé•¿çš„ç¼“å­˜æ—¶é—´ï¼ˆåˆ°2025å¹´ï¼‰</li>
<li>è°ƒè¯•/æµ‹è¯•ç¯å¢ƒï¼šå¯èƒ½æ˜¯æµ‹è¯•é…ç½®</li>
</ul>
</li>
<li>æ­£å¸¸æƒ…å†µä¸‹åº”è¯¥æ˜¯è¿‡å»çš„æ—¶é—´ç‚¹ï¼Œè¡¨ç¤ºèµ„æºä½•æ—¶è¢«ç¼“å­˜</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¼ä¸šçº§ Vue 3 é¡¹ç›®å›¾æ ‡ç³»ç»Ÿé‡æ„å®è·µï¼šä»å¤šæºæ··ä¹±åˆ°å•ä¸€æ•°æ®æº]]></title>    <link>https://juejin.cn/post/7582779306730946595</link>    <guid>https://juejin.cn/post/7582779306730946595</guid>    <pubDate>2025-12-12T10:25:04.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582779306730946595" data-draft-id="7582759716188258304" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¼ä¸šçº§ Vue 3 é¡¹ç›®å›¾æ ‡ç³»ç»Ÿé‡æ„å®è·µï¼šä»å¤šæºæ··ä¹±åˆ°å•ä¸€æ•°æ®æº"/> <meta itemprop="keywords" content="Vue.js,æ¶æ„,å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-12T10:25:04.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§è±¡çš„é¼»å­é‚£ä¹ˆé•¿"/> <meta itemprop="url" content="https://juejin.cn/user/2277843821926871"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¼ä¸šçº§ Vue 3 é¡¹ç›®å›¾æ ‡ç³»ç»Ÿé‡æ„å®è·µï¼šä»å¤šæºæ··ä¹±åˆ°å•ä¸€æ•°æ®æº
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2277843821926871/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§è±¡çš„é¼»å­é‚£ä¹ˆé•¿
  </span> <!----> <!----> <div class="vip-level" data-v-cd7d0a50="" data-v-292f6e48=""><span class="tooltip" data-v-cd7d0a50=""><div class="byte-tooltip byte-tooltip--dark" style="display:none;">
        VIP.4 èä¼šè´¯é€š
      </div><span class="byte-tooltip__wrapper"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8AQMAAAAAMksxAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAA5JREFUKM9jGAWjAAcAAAIcAAE27nY6AAAAAElFTkSuQmCC" alt="VIP.4 èä¼šè´¯é€š" title="VIP.4 èä¼šè´¯é€š" class="lazy" style="aspect-ratio:NaN;" data-v-5244ef91="" data-v-cd7d0a50=""/></span></span></div> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-12T10:25:04.000Z" title="Fri Dec 12 2025 10:25:04 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    4
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p><strong>æ—¥æœŸ</strong>: 2025-12-12<br/>
<strong>æŠ€æœ¯æ ˆ</strong>: Vue 3 + TypeScript + iconfont</p>
</blockquote>
<h2 data-id="heading-0">å‰è¨€</h2>
<p>åœ¨å¤§å‹å‰ç«¯é¡¹ç›®ä¸­ï¼Œå›¾æ ‡ç®¡ç†æ˜¯ä¸€ä¸ªçœ‹ä¼¼ç®€å•å´å®¹æ˜“å¤±æ§çš„é—®é¢˜ã€‚éšç€ä¸šåŠ¡è¿­ä»£ï¼Œå¾€å¾€ä¼šå‡ºç°å¤šå¥—å›¾æ ‡æ–¹æ¡ˆå¹¶å­˜çš„æƒ…å†µï¼šæœ‰äººç”¨ SVG æ–‡ä»¶ï¼Œæœ‰äººç”¨ iconfontï¼Œæœ‰äººç›´æ¥ç”¨å›¾ç‰‡â€¦â€¦è¿™ä¸ä»…å¢åŠ äº†ç»´æŠ¤æˆæœ¬ï¼Œè¿˜å®¹æ˜“å¯¼è‡´å›¾æ ‡é£æ ¼ä¸ç»Ÿä¸€ã€æ‰“åŒ…ä½“ç§¯è†¨èƒ€ç­‰é—®é¢˜ã€‚</p>
<p>æœ¬æ–‡å°†åˆ†äº«æˆ‘ä»¬åœ¨ CMC Link IBS Web é¡¹ç›®ä¸­è¿›è¡Œçš„ä¸€æ¬¡å›¾æ ‡ç³»ç»Ÿé‡æ„å®è·µï¼Œæ ¸å¿ƒç›®æ ‡æ˜¯ï¼š<strong>ç»Ÿä¸€å›¾æ ‡æ¥æºï¼Œé™ä½ç»´æŠ¤æˆæœ¬ï¼Œæå‡å¼€å‘ä½“éªŒ</strong>ã€‚</p>
<h2 data-id="heading-1">ä¸€ã€é—®é¢˜è¯Šæ–­ï¼šæ··ä¹±çš„å›¾æ ‡ç°çŠ¶</h2>
<h3 data-id="heading-2">1.1 ç°çŠ¶åˆ†æ</h3>
<p>é‡æ„å‰ï¼Œé¡¹ç›®ä¸­å­˜åœ¨ä¸¤å¥—å¹¶è¡Œçš„å›¾æ ‡æ–¹æ¡ˆï¼š</p>
<pre><code class="hljs language-css" lang="css">å›¾æ ‡æ¥æº
â”œâ”€â”€ iconfontï¼ˆé˜¿é‡Œå›¾æ ‡åº“ï¼‰
â”‚   â”œâ”€â”€ iconfont<span class="hljs-selector-class">.css</span>     â†’ <span class="hljs-attribute">Font</span> Class æ¨¡å¼
â”‚   â””â”€â”€ iconfont<span class="hljs-selector-class">.js</span>      â†’ Symbol æ¨¡å¼ï¼ˆæ”¯æŒå½©è‰²ï¼‰
â”‚
â””â”€â”€ æœ¬åœ° SVG å›¾æ ‡
    â””â”€â”€ <span class="hljs-attribute">src</span>/assets/icons/ â†’ <span class="hljs-number">150</span>+ ä¸ª SVG æ–‡ä»¶
        â””â”€â”€ vite-plugin-svg-spritemap å¤„ç†
</code></pre>
<h3 data-id="heading-3">1.2 ç—›ç‚¹æ€»ç»“</h3>





























<table><thead><tr><th>é—®é¢˜</th><th>å½±å“</th></tr></thead><tbody><tr><td><strong>åŒé‡ç»´æŠ¤</strong></td><td>æ–°å¢å›¾æ ‡éœ€è¦å†³å®šæ”¾å“ªé‡Œï¼Œè€å‘˜å·¥ç”¨ SVGï¼Œæ–°å‘˜å·¥ç”¨ iconfont</td></tr><tr><td><strong>å¤„ç†é€»è¾‘å¤æ‚</strong></td><td>SVG éœ€è¦ SVGO æ’ä»¶å¤„ç† fill/stroke/width/height å±æ€§</td></tr><tr><td><strong>å½©è‰²å›¾æ ‡è¯†åˆ«å›°éš¾</strong></td><td>éœ€è¦é€šè¿‡æ–‡ä»¶åçº¦å®šï¼ˆ<code>c-</code> å‰ç¼€ï¼‰æˆ–å†…å®¹åˆ†ææ¥åˆ¤æ–­</td></tr><tr><td><strong>æ„å»ºä¾èµ–</strong></td><td>é¢å¤–å¼•å…¥ <code>@spiriit/vite-plugin-svg-spritemap</code> ä¾èµ–</td></tr><tr><td><strong>å¿ƒæ™ºè´Ÿæ‹…</strong></td><td>å¼€å‘è€…éœ€è¦äº†è§£ä¸¤å¥—æ–¹æ¡ˆçš„å·®å¼‚å’Œé€‚ç”¨åœºæ™¯</td></tr></tbody></table>
<h3 data-id="heading-4">1.3 æ ¸å¿ƒçŸ›ç›¾</h3>
<pre><code class="hljs language-markdown" lang="markdown">å¼€å‘æ•ˆç‡ vs æŠ€æœ¯å€ºåŠ¡
<span class="hljs-code">    â†“
æ¯æ¬¡æ–°å¢å›¾æ ‡éƒ½åœ¨ç´¯ç§¯æŠ€æœ¯å€º
    â†“
ç»´æŠ¤æˆæœ¬éšé¡¹ç›®è§„æ¨¡çº¿æ€§å¢é•¿
</span></code></pre>
<h2 data-id="heading-5">äºŒã€æ–¹æ¡ˆè®¾è®¡ï¼šå•ä¸€æ•°æ®æºæ¶æ„</h2>
<h3 data-id="heading-6">2.1 è®¾è®¡åŸåˆ™</h3>
<ol>
<li><strong>å•ä¸€æ•°æ®æº</strong>ï¼šæ‰€æœ‰å›¾æ ‡ç»Ÿä¸€ä» iconfont è·å–</li>
<li><strong>å‘åå…¼å®¹</strong>ï¼šç°æœ‰ä»£ç æ— éœ€ä¿®æ”¹å³å¯å·¥ä½œ</li>
<li><strong>æ¸è¿›è¿ç§»</strong>ï¼šæ”¯æŒæ–°æ—§å†™æ³•å¹¶å­˜ï¼Œé€æ­¥è¿‡æ¸¡</li>
<li><strong>å¼€å‘ä½“éªŒä¼˜å…ˆ</strong>ï¼šæ–°å¢å›¾æ ‡æµç¨‹ç®€åŒ–</li>
</ol>
<h3 data-id="heading-7">2.2 æ¶æ„è®¾è®¡</h3>
<pre><code class="hljs language-scss" lang="scss">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  ä½¿ç”¨å±‚                          â”‚
â”‚  &lt;SvgIcon name="search" /&gt;  (æ—§ä»£ç ï¼Œæ— éœ€ä¿®æ”¹)    â”‚
â”‚  &lt;CmcIcon name="<span class="hljs-attribute">icon</span>-search" /&gt; (æ–°ä»£ç )         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              SvgIcon (å…¼å®¹å±‚)                    â”‚
â”‚  - æ¥æ”¶æ—§çš„ name/<span class="hljs-attribute">icon</span> å±æ€§                       â”‚
â”‚  - é€šè¿‡æ˜ å°„è¡¨è½¬æ¢ä¸º iconfont åç§°                 â”‚
â”‚  - è‡ªåŠ¨åˆ¤æ–­å½©è‰²/å•è‰²                             â”‚
â”‚  - å†…éƒ¨æ¸²æŸ“ CmcIcon                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              CmcIcon (æ ¸å¿ƒç»„ä»¶)                  â”‚
â”‚  - <span class="hljs-attribute">Font</span> Class æ¨¡å¼ï¼ˆå•è‰²ï¼Œå¯æ”¹é¢œè‰²ï¼‰              â”‚
â”‚  - Symbol æ¨¡å¼ï¼ˆå½©è‰²ï¼Œä¿ç•™åŸè‰²ï¼‰                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           iconfont èµ„æº (å•ä¸€æ•°æ®æº)             â”‚
â”‚  - iconfont<span class="hljs-selector-class">.css</span> (Font Class)                    â”‚
â”‚  - iconfont<span class="hljs-selector-class">.js</span> (Symbol)                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h3 data-id="heading-8">2.3 å…³é”®è®¾è®¡å†³ç­–</h3>
<h4 data-id="heading-9">å†³ç­–1ï¼šä¸ºä»€ä¹ˆé€‰æ‹© iconfont ä½œä¸ºå•ä¸€æ•°æ®æºï¼Ÿ</h4>




















<table><thead><tr><th>æ–¹æ¡ˆ</th><th>ä¼˜åŠ¿</th><th>åŠ£åŠ¿</th></tr></thead><tbody><tr><td><strong>æœ¬åœ° SVG</strong></td><td>å®Œå…¨å¯æ§ã€ç¦»çº¿å¯ç”¨</td><td>éœ€è¦æ„å»ºå¤„ç†ã€ç»´æŠ¤æˆæœ¬é«˜</td></tr><tr><td><strong>iconfont</strong></td><td>åœ¨çº¿ç®¡ç†ã€å›¢é˜Ÿåä½œã€æ”¯æŒå½©è‰²</td><td>ä¾èµ–å¤–éƒ¨æœåŠ¡</td></tr></tbody></table>
<p>é€‰æ‹© iconfont çš„åŸå› ï¼š</p>
<ul>
<li>å·²æœ‰æˆç†Ÿçš„å›¾æ ‡åº“ï¼ˆ400+ å›¾æ ‡ï¼‰</li>
<li>æ”¯æŒ Symbol æ¨¡å¼ï¼ˆå½©è‰²å›¾æ ‡ï¼‰</li>
<li>å›¢é˜Ÿåä½œå‹å¥½ï¼ˆè®¾è®¡å¸ˆå¯ç›´æ¥ä¸Šä¼ ï¼‰</li>
<li>æ— éœ€é¢å¤–æ„å»ºæ’ä»¶</li>
</ul>
<h4 data-id="heading-10">å†³ç­–2ï¼šå…¼å®¹å±‚è®¾è®¡</h4>
<p>ä¸ç ´åç°æœ‰ä»£ç æ˜¯é‡æ„çš„åº•çº¿ã€‚é€šè¿‡ä»£ç†æ¨¡å¼ï¼Œè®©æ—§çš„ <code>SvgIcon</code> ç»„ä»¶å†…éƒ¨è°ƒç”¨æ–°çš„ <code>CmcIcon</code>ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;!-- SvgIcon.vue - å…¼å®¹å±‚ --&gt;
&lt;script setup lang="ts"&gt;
import CmcIcon from '../CmcIcon/CmcIcon.vue'
import { getIconfontName, isColorfulIcon } from '../CmcIcon/icon-mapping'

// ... props å®šä¹‰

const iconfontName = computed(() =&gt; getIconfontName(rawIconName.value))
const colorful = computed(() =&gt; isColorfulIcon(rawIconName.value))
&lt;/script&gt;

&lt;template&gt;
  &lt;CmcIcon
    :name="iconfontName"
    :size="size"
    :color="color"
    :colorful="colorful"
  /&gt;
&lt;/template&gt;
</code></pre>
<h4 data-id="heading-11">å†³ç­–3ï¼šæ˜ å°„è¡¨ç­–ç•¥</h4>
<p>å¯¹äºåç§°ä¸ä¸€è‡´çš„æƒ…å†µï¼Œé€šè¿‡æ˜ å°„è¡¨è§£å†³ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// icon-mapping.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-attr">SVG_TO_ICONFONT_MAP</span>: <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">string</span>&gt; = {
  <span class="hljs-string">'dingcangicon'</span>: <span class="hljs-string">'icon-menu-dingcang'</span>,
  <span class="hljs-string">'billoflading'</span>: <span class="hljs-string">'icon-menu-tidan'</span>,
  <span class="hljs-comment">// ...</span>
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">COLORFUL_ICONS</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>([
  <span class="hljs-string">'menu-chukou'</span>,
  <span class="hljs-string">'menu-jinkou'</span>,
  <span class="hljs-string">'USD'</span>, <span class="hljs-string">'CNY'</span>, <span class="hljs-string">'EUR'</span>,
  <span class="hljs-comment">// ...</span>
])
</code></pre>
<h2 data-id="heading-12">ä¸‰ã€å®ç°ç»†èŠ‚</h2>
<h3 data-id="heading-13">3.1 CmcIcon æ ¸å¿ƒç»„ä»¶</h3>
<pre><code class="hljs language-vue" lang="vue">&lt;script lang="ts" setup&gt;
interface Props {
  name: string           // å›¾æ ‡åç§°ï¼ˆéœ€å¸¦ icon- å‰ç¼€ï¼‰
  size?: number | string // å°ºå¯¸ï¼Œé»˜è®¤ 16px
  color?: string         // é¢œè‰²ï¼ˆä»…å•è‰²æœ‰æ•ˆï¼‰
  colorful?: boolean     // æ˜¯å¦ä¸ºå½©è‰²å›¾æ ‡
}

const props = withDefaults(defineProps&lt;Props&gt;(), {
  size: 16,
  color: 'currentColor',
  colorful: false,
})
&lt;/script&gt;

&lt;template&gt;
  &lt;!-- å½©è‰²å›¾æ ‡ï¼šSymbol æ¨¡å¼ --&gt;
  &lt;svg v-if="colorful" class="cmc-icon" :style="{ width: sizeValue, height: sizeValue }"&gt;
    &lt;use :xlink:href="`#${iconName}`" /&gt;
  &lt;/svg&gt;

  &lt;!-- å•è‰²å›¾æ ‡ï¼šFont Class æ¨¡å¼ --&gt;
  &lt;i v-else class="cmc-icon iconfont-cmc" :class="iconName" :style="{ fontSize: sizeValue, color }" /&gt;
&lt;/template&gt;
</code></pre>
<h3 data-id="heading-14">3.2 iconfont çš„ä¸¤ç§æ¨¡å¼</h3>
<p><strong>Font Class æ¨¡å¼</strong>ï¼ˆå•è‰²å›¾æ ‡ï¼‰ï¼š</p>
<ul>
<li>é€šè¿‡ CSS ç±»åå¼•ç”¨å›¾æ ‡</li>
<li>æ”¯æŒ <code>color</code> å±æ€§åŠ¨æ€æ”¹å˜é¢œè‰²</li>
<li>æ–‡ä»¶ï¼š<code>iconfont.css</code></li>
</ul>
<p><strong>Symbol æ¨¡å¼</strong>ï¼ˆå½©è‰²å›¾æ ‡ï¼‰ï¼š</p>
<ul>
<li>é€šè¿‡ SVG <code>&lt;use&gt;</code> å¼•ç”¨</li>
<li>ä¿ç•™å›¾æ ‡åŸå§‹é¢œè‰²</li>
<li>æ–‡ä»¶ï¼š<code>iconfont.js</code></li>
</ul>
<pre><code class="hljs language-vue" lang="vue">&lt;!-- å•è‰²ï¼šå¯é€šè¿‡ color æ§åˆ¶é¢œè‰² --&gt;
&lt;CmcIcon name="icon-search" color="red" /&gt;

&lt;!-- å½©è‰²ï¼šä¿ç•™åŸå§‹å¤šè‰² --&gt;
&lt;CmcIcon name="icon-menu-chukou" colorful /&gt;
</code></pre>
<h3 data-id="heading-15">3.3 æ¸…ç†å†—ä½™ä»£ç </h3>
<p>ç§»é™¤äº†ä¸å†éœ€è¦çš„æ„å»ºé…ç½®ï¼š</p>
<pre><code class="hljs language-diff" lang="diff">// build/plugins.ts
<span class="hljs-deletion">- import VitePluginSVGSpritemap from '@spiriit/vite-plugin-svg-spritemap'</span>

export function createVitePlugins() {
  return [
    // ...å…¶ä»–æ’ä»¶
<span class="hljs-deletion">-   createSvgIconsPlugin(),  // ç§»é™¤ SVG å¤„ç†æ’ä»¶</span>
  ]
}

<span class="hljs-deletion">- // ç§»é™¤ 138 è¡Œ SVG å¤„ç†ä»£ç </span>
<span class="hljs-deletion">- function createSvgIconsPlugin() { ... }</span>
<span class="hljs-deletion">- function processMonoIcon() { ... }</span>
<span class="hljs-deletion">- function processRootIcon() { ... }</span>
<span class="hljs-deletion">- function traverseSvgNodes() { ... }</span>
</code></pre>
<h2 data-id="heading-16">å››ã€æ”¶ç›Šåˆ†æ</h2>
<h3 data-id="heading-17">4.1 é‡åŒ–æ”¶ç›Š</h3>



































<table><thead><tr><th>æŒ‡æ ‡</th><th>é‡æ„å‰</th><th>é‡æ„å</th><th>å˜åŒ–</th></tr></thead><tbody><tr><td>å›¾æ ‡æ¥æº</td><td>2 å¥—</td><td>1 å¥—</td><td>-50%</td></tr><tr><td>æ„å»ºä¾èµ–</td><td>+1</td><td>0</td><td>-100%</td></tr><tr><td>plugins.ts ä»£ç è¡Œæ•°</td><td>241</td><td>103</td><td>-57%</td></tr><tr><td>æ–°å¢å›¾æ ‡æ­¥éª¤</td><td>5 æ­¥</td><td>3 æ­¥</td><td>-40%</td></tr></tbody></table>
<h3 data-id="heading-18">4.2 å®šæ€§æ”¶ç›Š</h3>
<ol>
<li><strong>é™ä½å¿ƒæ™ºè´Ÿæ‹…</strong>ï¼šå¼€å‘è€…åªéœ€äº†è§£ä¸€å¥—æ–¹æ¡ˆ</li>
<li><strong>ç®€åŒ–æ–°å¢æµç¨‹</strong>ï¼šä¸Šä¼  iconfont â†’ æ›´æ–°èµ„æº â†’ ä½¿ç”¨</li>
<li><strong>å‡å°‘æ„å»ºæ—¶é—´</strong>ï¼šç§»é™¤ SVGO å¤„ç†ç¯èŠ‚</li>
<li><strong>ä»£ç æ›´ç®€æ´</strong>ï¼šæ ¸å¿ƒç»„ä»¶ &lt; 100 è¡Œ</li>
</ol>
<h3 data-id="heading-19">4.3 æ–°å¢å›¾æ ‡æµç¨‹å¯¹æ¯”</h3>
<p><strong>é‡æ„å‰</strong>ï¼ˆSVG æ–¹æ¡ˆï¼‰ï¼š</p>
<ol>
<li>è·å– SVG æ–‡ä»¶</li>
<li>åˆ¤æ–­æ˜¯å•è‰²è¿˜æ˜¯å½©è‰²</li>
<li>å¦‚æœå•è‰²ï¼Œæ‰‹åŠ¨å¤„ç† fill/stroke å±æ€§</li>
<li>æ”¾å…¥å¯¹åº”ç›®å½•ï¼ˆmono/ æˆ– colorful/ï¼‰</li>
<li>ä½¿ç”¨ <code>&lt;SvgIcon name="xxx" /&gt;</code></li>
</ol>
<p><strong>é‡æ„å</strong>ï¼ˆiconfont æ–¹æ¡ˆï¼‰ï¼š</p>
<ol>
<li>ä¸Šä¼ åˆ° iconfont é¡¹ç›®</li>
<li>ä¸‹è½½æ›´æ–°èµ„æºæ–‡ä»¶</li>
<li>ä½¿ç”¨ <code>&lt;CmcIcon name="icon-xxx" /&gt;</code></li>
</ol>
<h2 data-id="heading-20">äº”ã€ç»éªŒæ€»ç»“</h2>
<h3 data-id="heading-21">5.1 é‡æ„åŸåˆ™</h3>
<ol>
<li><strong>å‘åå…¼å®¹æ˜¯åº•çº¿</strong>ï¼šé€šè¿‡å…¼å®¹å±‚ä¿è¯ç°æœ‰ä»£ç æ­£å¸¸å·¥ä½œ</li>
<li><strong>æ¸è¿›å¼è¿ç§»</strong>ï¼šæ–°ä»£ç ç”¨æ–°æ–¹æ¡ˆï¼Œæ—§ä»£ç æŒ‰éœ€è¿ç§»</li>
<li><strong>å•ä¸€æ•°æ®æº</strong>ï¼šé¿å…å¤šæºå¹¶å­˜çš„æ··ä¹±</li>
<li><strong>ç®€åŒ–ä¼˜äºå®Œç¾</strong>ï¼šå¤Ÿç”¨å°±å¥½ï¼Œä¸è¿‡åº¦è®¾è®¡</li>
</ol>
<h3 data-id="heading-22">5.2 æŠ€æœ¯é€‰å‹æ€è€ƒ</h3>
<p>é€‰æ‹© iconfont è€Œéè‡ªå»º SVG æ–¹æ¡ˆçš„æ ¸å¿ƒåŸå› ï¼š</p>
<ul>
<li><strong>å›¢é˜Ÿåä½œ</strong>ï¼šè®¾è®¡å¸ˆå¯ç›´æ¥åœ¨ iconfont ç®¡ç†å›¾æ ‡</li>
<li><strong>æˆæœ¬æ•ˆç›Š</strong>ï¼šåˆ©ç”¨ç°æœ‰æˆç†Ÿæ–¹æ¡ˆï¼Œé¿å…é‡å¤é€ è½®å­</li>
<li><strong>å½©è‰²æ”¯æŒ</strong>ï¼šSymbol æ¨¡å¼åŸç”Ÿæ”¯æŒå¤šè‰²å›¾æ ‡</li>
</ul>
<h3 data-id="heading-23">5.3 é€‚ç”¨åœºæ™¯</h3>
<p>æœ¬æ–¹æ¡ˆé€‚åˆï¼š</p>
<ul>
<li>å·²åœ¨ä½¿ç”¨ iconfont çš„é¡¹ç›®</li>
<li>å›¢é˜Ÿè§„æ¨¡ä¸­ç­‰ä»¥ä¸Šï¼Œéœ€è¦è®¾è®¡å¸ˆåä½œ</li>
<li>å›¾æ ‡æ›´æ–°é¢‘ç¹çš„ä¸šåŠ¡ç³»ç»Ÿ</li>
</ul>
<p>ä¸å¤ªé€‚åˆï¼š</p>
<ul>
<li>å¯¹ç¦»çº¿å¯ç”¨æ€§è¦æ±‚æé«˜çš„åœºæ™¯</li>
<li>å›¾æ ‡éœ€è¦å¤æ‚åŠ¨ç”»çš„åœºæ™¯</li>
<li>å®Œå…¨ç§æœ‰åŒ–éƒ¨ç½²ã€æ— æ³•è®¿é—®å¤–ç½‘çš„ç¯å¢ƒ</li>
</ul>
<h2 data-id="heading-24">å…­ã€åç»­ä¼˜åŒ–æ–¹å‘</h2>
<ol>
<li><strong>è‡ªåŠ¨åŒ–æ›´æ–°</strong>ï¼šç¼–å†™è„šæœ¬è‡ªåŠ¨ä» iconfont æ‹‰å–æœ€æ–°èµ„æº</li>
<li><strong>ç±»å‹å®‰å…¨</strong>ï¼šç”Ÿæˆå›¾æ ‡åç§°çš„ TypeScript ç±»å‹å®šä¹‰</li>
<li><strong>æŒ‰éœ€åŠ è½½</strong>ï¼šå¯¹äºå¤§å‹å›¾æ ‡åº“ï¼Œè€ƒè™‘æŒ‰éœ€åŠ è½½ç­–ç•¥</li>
<li><strong>æ–‡æ¡£è‡ªåŠ¨åŒ–</strong>ï¼šä» iconfont.json è‡ªåŠ¨ç”Ÿæˆå›¾æ ‡æ–‡æ¡£</li>
</ol>
<h2 data-id="heading-25">ç»“è¯­</h2>
<p>å›¾æ ‡ç³»ç»Ÿçœ‹ä¼¼æ˜¯ä¸ªå°é—®é¢˜ï¼Œä½†åœ¨å¤§å‹é¡¹ç›®ä¸­å´èƒ½æ˜¾è‘—å½±å“å¼€å‘æ•ˆç‡å’Œä»£ç è´¨é‡ã€‚è¿™æ¬¡é‡æ„çš„æ ¸å¿ƒæ€è·¯æ˜¯ï¼š<strong>è¯†åˆ«æŠ€æœ¯å€ºåŠ¡ â†’ è®¾è®¡å…¼å®¹æ–¹æ¡ˆ â†’ ç»Ÿä¸€æ•°æ®æº â†’ æ¸è¿›å¼è¿ç§»</strong>ã€‚</p>
<p>å¸Œæœ›æœ¬æ–‡çš„å®è·µç»éªŒèƒ½ä¸ºä½ çš„é¡¹ç›®æä¾›ä¸€äº›å‚è€ƒã€‚è®°ä½ï¼Œæœ€å¥½çš„æ¶æ„ä¸æ˜¯æœ€å¤æ‚çš„ï¼Œè€Œæ˜¯æœ€é€‚åˆå›¢é˜Ÿçš„ã€‚</p>
<hr/>
<p><em>æœ¬æ–‡åŸºäºå…¬å¸é¡¹ç›®çš„çœŸå®é‡æ„å®è·µæ•´ç†ï¼Œå¦‚æœ‰é—®é¢˜æ¬¢è¿è®¨è®ºã€‚</em></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ¼«è°ˆ JS è§£æä¸ä½œç”¨åŸŸé”å®š]]></title>    <link>https://juejin.cn/post/7582785032851947583</link>    <guid>https://juejin.cn/post/7582785032851947583</guid>    <pubDate>2025-12-12T10:37:46.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582785032851947583" data-draft-id="7582808491606818870" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ¼«è°ˆ JS è§£æä¸ä½œç”¨åŸŸé”å®š"/> <meta itemprop="keywords" content="JavaScript"/> <meta itemprop="datePublished" content="2025-12-12T10:37:46.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸€é”¤æŒæ‹¾"/> <meta itemprop="url" content="https://juejin.cn/user/565561530002222"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ¼«è°ˆ JS è§£æä¸ä½œç”¨åŸŸé”å®š
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/565561530002222/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸€é”¤æŒæ‹¾
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-12T10:37:46.000Z" title="Fri Dec 12 2025 10:37:46 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    8
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>è¿™éƒ¨åˆ†å†…å®¹ï¼Œå­¦äº†å½“ç„¶æœ€å¥½ï¼Œæ²¡å­¦ï¼Œä¹Ÿä¸å½±å“å‰ç«¯å¼€å‘ã€‚å½“ç„¶ï¼Œèƒ½äº†è§£è‚¯å®šæ˜¯æ¯”ä¸äº†è§£çš„å¼ºã€‚</p>
<p>ä¾æ—§æ˜¯æ— å›¾æ— ç ï¼Œç½‘æ–‡é£æ ¼ã€‚æˆ‘è§‰å¾—ï¼Œèƒ½ç”¨æ–‡å­—æŠŠé€»è¾‘æˆ–è€…æ¦‚å¿µè¡¨è¿°æ¸…æ¥šï¼Œä¸€æ˜¯å¯¹ä½œè€…æœ¬èº«çš„èƒ½åŠ›æå‡æœ‰å¥½å¤„ï¼ŒäºŒæ˜¯å¯¹è¯»è€…æ¥è¯´ æ€è€ƒæ–‡å­—è¡¨è¾¾çš„å†…å®¹ æœ‰åŠ©äºå¤šä½¿ç”¨æŠ½è±¡æ€ç»´å’Œé€»è¾‘æ€ç»´èƒ½åŠ›ï¼Œæ„å»ºè‡ªå·±çš„æ€è€ƒæ¨¡å¼ï¼Œç”¨ç°åœ¨æµè¡Œçš„è¯´æ³•  å°±æ˜¯å¿ƒæ™ºæ¨¡å‹ã€‚ä½ è‡ªå·±ä»€ä¹ˆéƒ½å¯ä»¥è„‘è¡¥ï¼Œé‚£ä¸æ˜¯å‰å®³å¤§äº†å˜›ã€‚</p>
<p>ä¸Šé¢çš„è¯ä¸è¦ç›¸ä¿¡ï¼Œå…¶å®æˆ‘å°±æ˜¯ä¸ºè‡ªå·±æ‡’æ‰¾çš„å€Ÿå£ã€‚</p>
<p>å› ä¸ºæ ‡é¢˜å°±è¯´äº†  æ˜¯æ¼«è°ˆï¼Œæ‰€ä»¥æœ‰äº›ç»†èŠ‚åšäº†çœç•¥  æœ‰äº›è¾¹ç•Œæƒ…å†µåšäº†ç®€åŒ–è¡¨è¿°ã€‚ä½†æ˜¯æ€»ä½“æ¥è¯´  å‡†ç¡®æ€§è¿˜æ˜¯å¯ä»¥çš„ã€‚å¦‚æœæœ‰é”™æ¼çš„åœ°æ–¹ï¼Œè¿˜è¯·å¤šå¤šæŒ‡æ­£ã€‚ è¿™æ˜¯ç¬¬ä¸€éƒ¨åˆ† è¯æ³•å’Œè¯­æ³•åˆ†æã€‚</p>
<h2 data-id="heading-0">ä¸€.è¯æ³•åˆ†æå’Œè¯­æ³•åˆ†æ</h2>
<p>å½“æµè§ˆå™¨ä»ç½‘ç»œä¸‹è½½äº†jsæ–‡ä»¶ï¼Œæ¯”å¦‚app.jsï¼Œæµè§ˆå™¨å¼•æ“æ‹¿åˆ°çš„æœ€åˆå½¢æ€æ˜¯ä¸€ä¸²**å­—èŠ‚æµ **ã€‚</p>
<ol>
<li>
<p><strong>è¯†åˆ«ï¼š</strong> V8 é¦–å…ˆè¦å¤„ç†ç¼–ç ï¼ŒV8 æ¥æ”¶çš„æ˜¯ UTF-8 ç¼–ç çš„å­—èŠ‚æµï¼Œå†…éƒ¨ä¼šè½¬æ¢ä¸º UTF-16 å¤„ç†å­—ç¬¦ä¸²ã€‚</p>
</li>
<li>
<p><strong>æµå¼å¿«é€Ÿå¤„ç†ï¼š</strong> å¼•æ“å¹¶ä¸æ˜¯ç­‰æ•´ä¸ªæ–‡ä»¶ä¸‹è½½å®Œæ‰å¼€å§‹å¹²æ´»çš„ã€‚åªè¦ç½‘ç»œä¼ è¿‡æ¥ä¸€æ®µæ•°æ®ï¼ŒV8 çš„<strong>æ‰«æå™¨</strong>å°±å¼€å§‹å·¥ä½œäº†ã€‚ è¿™æ ·å¯ä»¥åŠ å¿«å¯åŠ¨é€Ÿåº¦ã€‚æ­¤æ—¶çš„çŠ¶æ€å°±æ˜¯æ¯«æ— æ„ä¹‰çš„å­—ç¬¦  <code>c</code>, <code>o</code>, <code>n</code>, <code>s</code>, <code>t</code>, <code>     </code>, <code>a</code>, <code>     </code>, <code>=</code>, <code>     </code>, <code>1</code>, <code>;</code> ...</p>
</li>
<li>
<p>ç„¶åçš„è¿™ä¸€æ­¥å« <strong>Tokenization è¯è¯­åˆ‡åˆ†</strong>ã€‚ è´Ÿè´£è¿™ä¸€æ­¥çš„ç»„ä»¶å°±æ˜¯ä¸Šé¢æåˆ°çš„å« <strong>Scannerï¼ˆæ‰«æå™¨ï¼‰</strong>ã€‚å®ƒçš„å·¥ä½œå°±åƒæ˜¯ä¸€ä¸ªåˆ‡èœå·¥ï¼ŒæŠŠæ»”æ»”ä¸ç»è¿ç»µä¸æ–­çš„å­—ç¬¦ä¸²åˆ‡æˆä¸€ä¸ªä¸ªæœ‰è¯­æ³•æ„ä¹‰çš„æœ€å°å•ä½ï¼Œå«åš <strong>Tokenï¼ˆè®°å·ï¼‰</strong>ã€‚çœ‹åˆ°è¿™ä¸ªè¯ ï¼Œå¤§å®¶æ˜¯ä¸æ˜¯æƒŠè§‰å¿ƒä¸€ç¼©ï¼Œæ²¡é”™ï¼Œå°±æ˜¯å®ƒï¼Œ<strong>å®ƒä»¬</strong>å°±æ˜¯ä»¥å®ƒä¸ºå•ä½æ¥æ”¶å’±é’±çš„ã€‚</p>
<p>scanner å†…éƒ¨æ˜¯ä¸€ä¸ªçŠ¶æ€æœºã€‚å®ƒé€ä¸ªè¯»å–å­—ç¬¦ï¼š</p>
<ul>
<li>è¯»åˆ° <code>c</code>  å¯èƒ½æ˜¯ <code>const</code>ï¼Œä¹Ÿå¯èƒ½æ˜¯å˜é‡åï¼Œç»§ç»­ã€‚</li>
<li>è¯»åˆ° <code>o</code>, <code>n</code>, <code>s</code>, <code>t</code>  å‡‘é½äº†5ä¸ªå¨ƒï¼Œ<strong>ä¸”ä¸‹ä¸€ä¸ªå­—ç¬¦ä¸æ˜¯å­—æ¯ï¼ˆæ¯”å¦‚æ˜¯ç©ºæ ¼ï¼‰</strong>ï¼Œç¡®è®¤è¿™æ˜¯ä¸€ä¸ªå…³é”®å­— constã€‚â€ï¼ˆé˜²æ­¢è¯¯åˆ¤ <code>constant</code> è¿™ç§å˜é‡åï¼‰</li>
<li>è¯»åˆ° <code>     </code> ç©ºæ ¼ å¿½ç•¥ï¼Œè·³è¿‡å»ã€‚</li>
<li>è¯»åˆ° <code>1</code>   è¿™æ˜¯ä¸€ä¸ªæ•°å­—ã€‚</li>
</ul>
<p>è¿™æ ·å°±ç”±åŸæ¥çš„å­—èŠ‚æµå˜æˆäº† <strong>Token æµ</strong>ã€‚è¿™æ˜¯ä¸€ç§æ‰å¹³çš„åˆ—è¡¨ç»“æ„ã€‚</p>
<ul>
<li><strong>æºç ï¼š</strong> <code>const a = 1;</code></li>
<li><strong>Token æµï¼š</strong>
<ul>
<li><code>CONST</code> (å…³é”®å­—)</li>
<li><code>IDENTIFIER</code> (å€¼ä¸º "a")</li>
<li><code>ASSIGN</code> (ç¬¦å· "=")</li>
<li><code>SMI</code> (å°æ•´æ•° "1")</li>
<li><code>SEMICOLON</code> (ç¬¦å· ";")</li>
</ul>
</li>
</ul>
<p>è¿™ä¸€æ­¥ï¼Œæ³¨é‡Šå’Œå¤šä½™çš„ç©ºæ ¼å’Œæ¢è¡Œç¬¦ä¼šè¢«æŠ›å¼ƒã€‚</p>
</li>
<li>
<p>ç°åœ¨å°±æ˜¯è§£æé˜¶æ®µäº†</p>
<p>å…¶å®è§£ææ˜¯ä¸€ä¸ªæ€»ç§°ï¼Œå®ƒåˆ†ä¸º å…¨é‡è§£æ å’Œ é¢„è§£æ ä¸¤ç§å½¢å¼ã€‚</p>
<p>è¿™å°±æ˜¯v8çš„æ‡’è§£ææœºåˆ¶ã€‚çœ‹åˆ°è¿™ä¸ªæ‡’å­—ï¼Œä¹Ÿå·®ä¸å¤šèƒ½æ˜ç™½äº†å§ã€‚</p>
<p>å¯¹äºé‚£äº›<strong>ä¸æ˜¯ç«‹å³æ‰§è¡Œ</strong>çš„å‡½æ•°ï¼ˆæ¯”å¦‚ç‚¹å‡»æŒ‰é’®æ‰è§¦å‘çš„å›è°ƒï¼‰ï¼ŒV8 ä¼šå…ˆç”¨é¢„è§£æå¿«é€Ÿæ‰«ä¸€éã€‚</p>
<p>æ£€æŸ¥åŸºæœ¬çš„è¯­æ³•é”™è¯¯ï¼ˆæ¯”å¦‚æœ‰æ²¡æœ‰å°‘å†™æ‹¬å·ï¼‰ï¼Œ<strong>ç¡®è®¤è¿™æ˜¯ä¸€ä¸ªå‡½æ•°</strong>ã€‚å¹¶ä¸ä¼šç”Ÿæˆå¤æ‚çš„ AST ç»“æ„ï¼Œä¹Ÿä¸å»ºç«‹å…·ä½“çš„å˜é‡ç»‘å®šï¼Œåªè¿›è¡Œæœ€åŸºç¡€çš„é—­åŒ…å¼•ç”¨æ£€æŸ¥ã€‚å¾¡å§å–œçš„ç»“æœæ˜¯è¿™ä¸ªå‡½æ•°åœ¨å†…å­˜é‡Œåªæ˜¯ä¸€ä¸ªå¾ˆå°çš„<strong>å ä½ç¬¦</strong>ï¼Œè·³è¿‡å†…éƒ¨ç»†èŠ‚ã€‚</p>
<p>è€Œåªæœ‰é‚£äº›<strong>ç«‹å³æ‰§è¡Œå‡½æ•°</strong>æˆ–è€…é¡¶å±‚ä»£ç ï¼Œæ‰ä¼šè¿›å…¥çœŸæ­£çš„å…¨é‡è§£æï¼Œè¿›è¡Œå®Œæ•´çš„ AST æ„å»ºã€‚</p>
<p>é‚£ä¹ˆï¼Œé—®é¢˜å°±æ¥äº†ï¼Œv8æ€ä¹ˆåˆ¤æ–­åˆ°åº•æ˜¯ä½¿ç”¨é¢„è§£æè¿˜æ˜¯ä½¿ç”¨å…¨é‡è§£æå‘¢ï¼Ÿ</p>
<p>å®ƒçš„åŸåˆ™å°±æ˜¯  æ‡’æƒ°ä¸ºä¸»  å…¨é‡ä¸ºè¾…</p>
<p>å°±æ˜¯v8é»˜è®¤ä½ å†™çš„å‡½æ•°æš‚æ—¶ä¸ä¼šæ‰§è¡Œï¼Œé™¤éæ˜¯å·²ç»æ˜¾å¼çš„é€šè¿‡è¯­æ³•å‘Šè¯‰å®ƒï¼Œè¿™æ®µè¿™è¡Œä»£ç  é©¬ä¸Šå°±è¦è·‘ ä½ èµ¶å¿«å…¨é‡è§£æã€‚</p>
<p>ä¸‹é¢ æˆ‘ä»¬ç¨å¾®è¯¦ç»†çš„è¯´ä¸€ä¸‹</p>
<ul>
<li>
<p>é»˜è®¤ç»å¤§å¤šæ•°å‡½æ•°éƒ½æ˜¯é¢„è§£æ</p>
<p>v8è®¤ä¸ºjsåœ¨åˆå§‹è¿è¡Œæ—¶ï¼Œä»…ä»…åªæœ‰å¾ˆå°‘å¾ˆå°‘ä¸€éƒ¨åˆ†ä»£ç  æ˜¯éœ€è¦é©¬ä¸Šä½¿ç”¨çš„  å…¶ä»–è§‰å¾—å¤§éƒ¨åˆ† éƒ½æ˜¯è¦ä¹ˆæ˜¯å›è°ƒ è¦ä¹ˆæ˜¯å…¶ä»–çš„æš‚æ—¶ç”¨ä¸åˆ°çš„ï¼Œæ‰€ä»¥ï¼Œ<strong>å‡¡æ˜¯å…·åå‡½æ•°å£°æ˜ã€åµŒå¥—å‡½æ•°</strong>ï¼Œé»˜è®¤éƒ½æ˜¯é¢„è§£æã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">clickHandler</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"è¦ä¸è¦è§£ææˆ‘"</span>);
}
<span class="hljs-comment">// å¼•æ“è®¤ä¸º è¿™æ˜¯ä¸€ä¸ªå‡½æ•°å£°æ˜  çœ‹èµ·æ¥è¿˜æ²¡äººè°ƒå‹‡å®ƒ</span>
<span class="hljs-comment">// å…ˆä¸æµªè´¹æ—¶é—´äº†ï¼Œåªæ£€æŸ¥ä¸€ä¸‹æ‹¬å·åŒ¹é…å§ï¼Œ</span>
<span class="hljs-comment">// æŠŠå®ƒæ ‡è®°ä¸º 'uncompiled'ï¼Œç„¶åè·³è¿‡ã€‚"</span>
</code></pre>
</li>
<li>
<p>é‚£ä¹ˆ  å¦‚ä½•æ‰èƒ½ç¬¦åˆå®ƒè¿›è¡Œå…¨é‡è§£æçš„æ¡ä»¶å‘¢</p>
<ol>
<li>
<p>é¡¶å±‚ä»£ç </p>
<p>å†™åœ¨æœ€å¤–å±‚ ä¸åœ¨ä»»ä½•å‡½æ•°å†… çš„ä»£ç ï¼ŒåŠ è½½å®Œå¿…é¡»ç«‹å³æ‰§è¡Œã€‚</p>
<p><strong>åˆ¤æ–­ä¾æ®ï¼š</strong> åªè¦ä¸åœ¨ <code>function</code> å—é‡Œçš„ä»£ç ï¼Œå…¨æ˜¯é¡¶å±‚ä»£ç ï¼Œå¿…é¡»å…¨é‡è§£æã€‚</p>
</li>
<li>
<p>ç«‹å³æ‰§è¡Œå‡½æ•°</p>
<p>é‚£ä¹ˆè¿™é‡Œæœ‰ä¸ªé—®é¢˜ï¼Œå°±æ˜¯V8 å¦‚ä½•åœ¨è¿˜æ²¡è¿è¡Œä»£ç æ—¶ï¼Œå°±çŸ¥é“è¿™ä¸ªå‡½æ•°æ˜¯ç«‹å³è°ƒç”¨æ‰§è¡Œå‡½æ•°å‘¢ï¼Ÿ</p>
<p>ç­”æ¡ˆå°±æ˜¯  çœ‹æ‹¬å·ï¼ˆï¼‰</p>
<p>å½“è§£æå™¨æ‰«æåˆ°ä¸€ä¸ªå‡½æ•°å…³é”®å­— <code>function</code> æ—¶ï¼Œå®ƒä¼šçœ‹ä¸€çœ¼<strong>è¿™ä¸ª function ä¹‹å‰æœ‰æ²¡æœ‰å·¦æ‹¬å· <code>(</code></strong></p>
<ul>
<li>
<p>æ²¡æ‹¬å·</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-function">function <span class="hljs-title">foo</span>()</span> { ... }
<span class="hljs-comment">// æ²¡çœ‹åˆ°å·¦æ‹¬å·ï¼Œé‚£ä½ å…ˆé è¾¹å§ï¼Œ å¯¹å®ƒé¢„è§£æã€‚</span>
</code></pre>
</li>
<li>
<p>æœ‰æ‹¬å·</p>
<pre><code class="hljs language-javascript" lang="javascript">(<span class="hljs-keyword">function</span>(<span class="hljs-params"/>) { ... })();
<span class="hljs-comment">// æ‰«æå™¨æ‰«åˆ°äº†è¿™ä¸ªå·¦æ‹¬å·</span>
<span class="hljs-comment">// æ¬¸ï¼Œè¿™æœ‰ä¸ªå·¦æ‹¬å·åŒ…ç€ function</span>
<span class="hljs-comment">// æ ¹æ®ä¸‡å¹´ç»éªŒï¼Œè¿™æ˜¯ä¸ªç«‹å³æ‰§è¡Œå‡½æ•°ï¼Œé©¬ä¸Šå°±è¦æ‰§è¡Œã€‚</span>
<span class="hljs-comment">// ç›´æ¥ä¸Šå¤§èœï¼Œå…¨é‡è§£æï¼Œç”Ÿæˆ AST</span>
</code></pre>
</li>
<li>
<p>å…¶ä»–çš„ç«‹å³æ‰§è¡Œçš„è¿¹è±¡ï¼šé™¤äº†æ‹¬å·ï¼Œ<code>!</code>ã€<code>+</code>ã€<code>-</code> ç­‰ä¸€å…ƒè¿ç®—ç¬¦æ”¾åœ¨ <code>function</code> å‰é¢ï¼Œä¹Ÿä¼šè§¦å‘å…¨é‡è§£æ</p>
<pre><code class="hljs language-scss" lang="scss">!<span class="hljs-built_in">function</span>() { ... }(); <span class="hljs-comment">// å…¨é‡è§£æ</span>
</code></pre>
</li>
</ul>
</li>
</ol>
</li>
<li>
<p>å¦‚æœæœ‰åµŒå¥—å‡½æ•°å’‹åŠå‘¢</p>
<p>åµŒå¥—å‡½æ•°é»˜è®¤æ˜¯é¢„è§£æï¼Œå³ä½¿å¤–éƒ¨å‡½æ•°è¿›è¡Œçš„æ˜¯å…¨é‡è§£æï¼Œå®ƒå†…éƒ¨å®šä¹‰çš„å­å‡½æ•°ï¼Œé»˜è®¤ä¾ç„¶æ˜¯é¢„è§£æã€‚åªæœ‰å½“å­å‡½æ•°çœŸçš„è¢«<strong>è°ƒç”¨</strong>æ—¶ï¼ŒV8 æ‰ä¼šæš‚åœæ‰§è¡Œï¼Œå»æŠŠå­å‡½æ•°çš„å…¨é‡è§£æåšå®Œ æŠŠ AST è¡¥é½</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">//é¡¶å±‚ä»£ç å…¨é‡è§£æ</span>
(<span class="hljs-function">function <span class="hljs-title">outer</span>()</span> {
  <span class="hljs-keyword">var</span> a = <span class="hljs-number">1</span>;

  <span class="hljs-comment">// å†…éƒ¨å‡½æ•° innerï¼š</span>
  <span class="hljs-comment">// è™½ç„¶ outer æ­£åœ¨æ‰§è¡Œï¼Œä½† inner è¿˜æ²¡è¢«è°ƒç”¨</span>
  <span class="hljs-comment">// å¼•æ“ä¹Ÿä¸ç¡®å®š inner ä¼šä¸ä¼šè¢«è°ƒç”¨ã€‚</span>
  <span class="hljs-comment">// æ‰€ä»¥inner é»˜è®¤é¢„è§£æã€‚</span>
  <span class="hljs-function">function <span class="hljs-title">inner</span>()</span> {
    <span class="hljs-keyword">var</span> b = <span class="hljs-number">2</span>;
  }

  inner(); <span class="hljs-comment">// ç›´åˆ°æ‰§è¡Œåˆ°è¿™ä¸€è¡Œï¼Œå¼•æ“æ‰ä¼šå›å¤´å»å¯¹ inner è¿›è¡Œå…¨é‡è§£æ</span>
})();
</code></pre>
</li>
<li>
<p>é‚£ä¹ˆ  å¼•æ“æ ¹æ®è‡ªå·±çš„åˆ¤æ–­ è¿›è¡Œå…¨é‡è§£ææˆ–è€…é¢„è§£æï¼Œä¼šå‡ºé”™å—</p>
<p>å½“ç„¶ä¼šï¼Œ</p>
<p>å¦‚æœæ˜¯æœ¬è¯¥é¢„è§£æçš„  ç»“æœåˆ¤æ–­é”™äº†  è¿›è¡Œäº†å…¨é‡è§£æ   æµªè´¹äº†æ—¶é—´å’Œå†…å­˜ç”Ÿæˆäº† AST å’Œå­—èŠ‚ç ï¼Œç»“æœè¿™ä»£ç æ ¹æœ¬æ²¡è·‘ã€‚</p>
<p>å¦‚æœæ˜¯æœ¬è¯¥å…¨é‡è§£æçš„åˆå·¨åˆå¤§åˆé‡çš„å‡½æ•°  ç»“æœåˆ¤æ–­é”™äº†  è¿›è¡Œäº†é¢„è§£æï¼Œç„¶åé©¬ä¸Šä¸‹ä¸€è¡Œä»£ç å°±è°ƒç”¨äº†ï¼Œç»“æœå°±æ˜¯  ç™½ç™½é¢„è§£æäº†ä¸€éï¼Œæµªè´¹äº†æ—¶é—´ï¼Œå‘ç°é©¬ä¸Šè¢«è°ƒç”¨ï¼Œåˆé©¬ä¸Šå›å¤´å…¨é‡è§£æä¸€è¾¹ åˆèŠ±äº†æ—¶é—´ï¼Œä¸¤æ¬¡çš„èŠ±è´¹ã€‚</p>
</li>
</ul>
</li>
<li>
<p>åœ¨ä¸Šé¢åªæ˜¯è®²äº†è§£æé˜¶æ®µçš„é¢„è§£æå’Œå…¨é‡è§£æçš„ä¸åŒï¼Œç°åœ¨æˆ‘ä»¬è®²è§£æé˜¶æ®µçš„è¿‡ç¨‹</p>
<p>V8 ä½¿ç”¨çš„æ˜¯é€’å½’ä¸‹é™åˆ†ææ³•ã€‚å®ƒæ ¹æ®js çš„è¯­æ³•è§„åˆ™æ¥åŒ¹é… Tokenã€‚</p>
<p>å®ƒçš„è§„åˆ™ç±»ä¼¼äºï¼šå½“æˆ‘ä»¬é‡åˆ° <code>const</code>ï¼Œæ ¹æ®è¯­æ³•è§„åˆ™ï¼Œåé¢å¿…é¡»è·Ÿä¸€ä¸ªå˜é‡åï¼Œç„¶åæ˜¯ä¸€ä¸ªèµ‹å€¼å·ï¼Œç„¶åæ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ã€‚</p>
<p>è¿‡ç¨‹ç¤ºä¾‹ï¼š</p>
<p>çœ‹åˆ° <code>const</code>  åˆ›å»ºä¸€ä¸ªå˜é‡å£°æ˜èŠ‚ç‚¹ã€‚</p>
<p>çœ‹åˆ° <code>a</code> æŠŠå®ƒä½œä¸ºå£°æ˜çš„<strong>æ ‡è¯†ç¬¦</strong>ã€‚</p>
<p>çœ‹åˆ° <code>= </code> çŸ¥é“åé¢æ˜¯<strong>åˆå§‹å€¼</strong>ã€‚</p>
<p>çœ‹åˆ° <code>1</code> åˆ›å»ºä¸€ä¸ªå­—é¢é‡èŠ‚ç‚¹ï¼ŒæŒ‚åœ¨ <code>=</code> çš„å³è¾¹ã€‚</p>
<p>è€Œåœ¨è¿™ä¸ªé˜¶æ®µçš„åŒæ—¶ï¼Œä½œç”¨åŸŸåˆ†æä¹Ÿåœ¨åŒæ­¥è¿›è¡Œï¼Œå› ä¸ºåœ¨æ„å»º AST çš„è¿‡ç¨‹ä¸­ï¼Œè§£æå™¨å¿…é¡»è¦ææ¸…æ¥š<strong>å˜é‡åœ¨å“ªé‡Œ</strong>ã€‚</p>
<p>å®ƒä¼šç›˜ç®— è¿™ä¸ª <code>a</code> æ˜¯å…¨å±€å˜é‡ï¼Œè¿˜æ˜¯å‡½æ•°å†…çš„å±€éƒ¨å˜é‡ï¼Ÿ</p>
<p>å¦‚æœå½“å‰å‡½æ•°å†…éƒ¨å¼•ç”¨äº†å¤–å±‚çš„å˜é‡ï¼Œè§£æå™¨ä¼šåœ¨è¿™ä¸ªé˜¶æ®µæ‰“ä¸Šæ ‡è®°ï¼šâ€œè¦å°å¿ƒï¼Œè¿™ä¸ªå˜é‡è¢«é€®ä½äº†ï¼Œå°†æ¥å¯èƒ½éœ€è¦ä¸Šä¸‹æ–‡æ¥åˆ†é…â€ã€‚</p>
<p>è¿™ä¸ªä½œç”¨åŸŸåˆ†ææ¯”è¾ƒé‡è¦ï¼Œæˆ‘ä»¬ç”¨ç¨å¾®å¤§ç‚¹çš„ç¯‡å¹…æ¥è®²è®²ã€‚</p>
<p>é¦–å…ˆ å¼ºçƒˆå»ºè®® ä¸è¦å†å»ç”¨ä»¥å‰çš„ æ´»åŠ¨å¯¹è±¡AO  vo ç­‰ç­‰çš„è¯´æ³•æ¥æ€è€ƒé—®é¢˜ã€‚åº”è¯¥ä½¿ç”¨ç°åœ¨çš„è¯æ³•ä½œç”¨åŸŸ ç¯å¢ƒè®°å½• ç­‰ç­‰æ€è€ƒæ¨¡å‹ã€‚</p>
<h4 data-id="heading-1"><strong>è¯æ³•ä½œç”¨åŸŸ (Lexical Scoping)â€</strong> çš„å®šä¹‰ï¼š<strong>ä½œç”¨åŸŸæ˜¯ç”±ä»£ç ä¹¦å†™çš„ä½ç½®å†³å®šçš„ï¼Œè€Œä¸æ˜¯ç”±è°ƒç”¨ä½ç½®å†³å®šçš„ã€‚</strong></h4>
<p>è¿™è¯´æ˜ï¼Œå¼•æ“åœ¨è¿˜æ²¡å¼€å§‹æ‰§è¡Œä»£ç ï¼Œä»…ä»…é€šè¿‡â€œæ‰«æâ€æºä»£ç ç”Ÿæˆ AST çš„é˜¶æ®µï¼Œå°±å·²ç»æŠŠâ€œè°èƒ½è®¿é—®è°â€ã€â€œè°è¢«è°é€®ä½â€è¿™ç¬”è´¦ç®—å¾—æ¸…æ¸…æ¥šæ¥šäº†ã€‚</p>
<p>ä¸€æ—¦ASTè¢«ç”Ÿæˆï¼Œé‚£ä¹ˆè‡³å°‘æ„å‘³ç€ä¸‹é¢çš„æƒ…å†µ</p>
<h3 data-id="heading-2"/>
<p>ä½œç”¨åŸŸå±‚çº§<strong>è¢«ç¡®å®š</strong></p>
<p>AST æœ¬èº«çš„æ ‘çŠ¶ç»“æ„ï¼Œå°±æ˜¯ä½œç”¨åŸŸå±‚çº§çš„ç‰©ç†ä½“ç°ã€‚</p>
<ul>
<li>
<p><strong>AST èŠ‚ç‚¹ï¼š</strong> å½“è§£æå™¨é‡åˆ°ä¸€ä¸ª <code>function</code> å…³é”®å­—ï¼Œå®ƒä¼šåœ¨ AST ä¸Šç”Ÿæˆä¸€ä¸ª <code>FunctionLiteral</code> èŠ‚ç‚¹ã€‚</p>
</li>
<li>
<p><strong>Scope å¯¹è±¡ï¼š</strong> åœ¨ V8 å†…éƒ¨ï¼Œéšç€ AST çš„ç”Ÿæˆï¼Œè§£æå™¨ä¼šåŒæ—¶ç»´æŠ¤ä¸€æ£µ <strong>â€œä½œç”¨åŸŸæ ‘â€</strong>ã€‚</p>
<ul>
<li>æ¯è¿›å…¥ä¸€ä¸ªå‡½æ•°ï¼ŒV8 å°±ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ <code>Scope</code> å¯¹è±¡ã€‚</li>
<li>è¿™ä¸ª <code>Scope</code> å¯¹è±¡ä¼šæœ‰ä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘å®ƒçš„ <code>Outer Scope</code>çˆ¶ä½œç”¨åŸŸã€‚</li>
</ul>
</li>
<li>
<p><strong>ç»“æœï¼š</strong> è¿™ç§â€œçˆ¶å­å…³ç³»â€æ˜¯é™æ€é”å®šçš„ã€‚æ— è®ºä½ å°†æ¥åœ¨å“ªé‡Œè°ƒç”¨è¿™ä¸ªå‡½æ•°ï¼Œå®ƒçš„â€œçˆ¶çº§â€æ°¸è¿œæ˜¯å®šä¹‰æ—¶çš„é‚£ä¸ªä½œç”¨åŸŸã€‚</p>
</li>
</ul>
<p>å˜é‡å¼•ç”¨å…³ç³»<strong>è¢«è¯†åˆ«</strong></p>
<p>è¿™æ˜¯è§£æå™¨æœ€å¿™ç¢Œçš„å·¥ä½œä¹‹ä¸€ï¼Œå«åš <strong>å˜é‡è§£æ</strong>ã€‚</p>
<ul>
<li><strong>å£°æ˜ï¼š</strong> å½“è§£æå™¨é‡åˆ° <code>let a = 1</code>ï¼Œå®ƒä¼šåœ¨å½“å‰ Scope è®°å½•ï¼šâ€œæˆ‘æœ‰äº†ä¸€ä¸ªå« <code>a</code> çš„å˜é‡â€ã€‚</li>
<li><strong>å¼•ç”¨ï¼š</strong> å½“è§£æå™¨é‡åˆ° <code>console.log(a)</code> æ—¶ï¼Œå®ƒä¼šç”Ÿæˆä¸€ä¸ª <strong>å˜é‡ä»£ç†</strong>ã€‚</li>
<li><strong>é“¾æ¥è¿‡ç¨‹ï¼š</strong> è§£æå™¨ä¼šå°è¯•â€œè¿æ¥â€è¿™ä¸ªä»£ç†å’Œå£°æ˜ï¼š
<ol>
<li>å…ˆåœ¨å½“å‰ Scope æ‰¾ <code>a</code>ã€‚</li>
<li>æ‰¾ä¸åˆ°ï¼Ÿæ²¿ç€ Scope Tree å¾€ä¸Šæ‰¾çˆ¶ä½œç”¨åŸŸã€‚</li>
<li>æ‰¾åˆ°äº†ï¼Ÿ<strong>å»ºç«‹ç»‘å®šã€‚</strong></li>
<li>ä¸€ç›´åˆ°äº†å…¨å±€è¿˜æ²¡æ‰¾åˆ°ï¼Ÿæ ‡è®°ä¸ºå…¨å±€å˜é‡ï¼ˆæˆ–è€…æŠ¥é”™ï¼‰ã€‚</li>
</ol>
</li>
</ul>
<p><strong>è¿™é‡Œè¦æ³¨æ„ï¼š</strong> è¿™ä¸ªâ€œæ‰¾â€çš„è¿‡ç¨‹æ˜¯åœ¨<strong>ç¼–è¯‘é˜¶æ®µ</strong>å®Œæˆçš„é€»è¾‘æ¨å¯¼ã€‚</p>
<h3 data-id="heading-3"/>
<p>é—­åŒ…çš„è“å›¾<strong>è¢«é¢„åˆ¤</strong></p>
<p>è¿™ä¸€æ­¥æ˜¯ V8 æ€§èƒ½ä¼˜åŒ–çš„å…³é”®ï¼Œä¹Ÿå°±æ˜¯ä½œç”¨åŸŸåˆ†æã€‚</p>
<ul>
<li><strong>å‘ç°é—­åŒ…ï¼š</strong> è§£æå™¨å‘ç°å†…éƒ¨å‡½æ•° <code>inner</code> å¼•ç”¨äº†å¤–éƒ¨å‡½æ•° <code>outer</code> çš„å˜é‡ <code>x</code>ã€‚</li>
<li><strong>æ‰“ä¸ªå¤§æ ‡ç­¾ï¼š</strong>
<ul>
<li>è§£æå™¨ä¼šç»™ <code>x</code> æ‰“ä¸Šä¸€ä¸ªæ ‡ç­¾ï¼š<strong>â€œå¼ºåˆ¶ä¸Šä¸‹æ–‡åˆ†é…â€</strong>ã€‚</li>
<li>æ„æ€æ˜¯ï¼šâ€œè™½ç„¶ <code>x</code> æ˜¯å±€éƒ¨å˜é‡ï¼Œä½†å› ä¸ºæœ‰äººè·¨ä½œç”¨åŸŸå¼•ç”¨å®ƒï¼Œæ‰€ä»¥å®ƒä¸èƒ½ä½åœ¨æ™®é€šçš„æ ˆï¼ˆStackï¼‰ä¸Šäº†... å¿…é¡»æ¬å®¶ï¼Œä½åˆ°å †ï¼ˆHeapï¼‰é‡Œä¸“é—¨å¼€è¾Ÿçš„ <strong>Contextï¼ˆä¸Šä¸‹æ–‡å¯¹è±¡ï¼‰</strong> ä¸­å»ã€‚â€</li>
</ul>
</li>
<li><strong>è¿˜æ²¡æœ‰å®ä¾‹åŒ–ï¼š</strong>
<ul>
<li>æ­¤æ—¶å†…å­˜é‡Œ<strong>æ²¡æœ‰</strong>ä¸Šä¸‹æ–‡å¯¹è±¡ï¼Œä¹Ÿ<strong>æ²¡æœ‰</strong>å˜é‡ <code>x</code> çš„å€¼ï¼ˆé‚£æ˜¯è¿è¡Œæ—¶çš„äº‹ï¼‰ã€‚</li>
<li>AST åªæ˜¯ç”Ÿæˆäº†ä¸€å¼ **â€œè“å›¾â€**ï¼Œå›¾çº¸ä¸Šå†™ç€ï¼šâ€œæ³¨æ„ï¼Œå°†æ¥è¿è¡Œçš„æ—¶å€™ï¼Œè¿™ä¸ª <code>x</code> è¦æ”¾åœ¨ç‰¹åˆ«çš„åœ°æ–¹ - Contexté‡Œï¼Œåˆ«æ”¾åœ¨æ ˆä¸Šã€‚â€</li>
</ul>
</li>
</ul>
</li>
</ol>
<p>ä¸‹é¢å°±æ˜¯è§£é‡Šå™¨Ignitionè¯¥ç™»åœºäº†ã€‚æˆ‘ä»¬ç¬¬äºŒéƒ¨åˆ†å†è§ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[React Server Components å†æ›é«˜å±æ¼æ´ï¼šæ‹’ç»æœåŠ¡ä¸æºç æ³„éœ²æ¥è¸µè€Œè‡³]]></title>    <link>https://juejin.cn/post/7582769411994320948</link>    <guid>https://juejin.cn/post/7582769411994320948</guid>    <pubDate>2025-12-12T12:00:54.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582769411994320948" data-draft-id="7582769411994239028" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="React Server Components å†æ›é«˜å±æ¼æ´ï¼šæ‹’ç»æœåŠ¡ä¸æºç æ³„éœ²æ¥è¸µè€Œè‡³"/> <meta itemprop="keywords" content="å‰ç«¯,å®‰å…¨"/> <meta itemprop="datePublished" content="2025-12-12T12:00:54.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="timeweaver"/> <meta itemprop="url" content="https://juejin.cn/user/1341831509187863"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            React Server Components å†æ›é«˜å±æ¼æ´ï¼šæ‹’ç»æœåŠ¡ä¸æºç æ³„éœ²æ¥è¸µè€Œè‡³
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1341831509187863/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    timeweaver
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-12T12:00:54.000Z" title="Fri Dec 12 2025 12:00:54 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¦‚æœæ‚¨çš„å›¢é˜Ÿåˆšåˆšåœ¨å‡ å¤©å‰ä¸ºäº†ä¿®å¤é‚£ä¸ªæ»¡åˆ†æ ¸å¼¹çº§æ¼æ´ <strong>React2Shell (CVE-2025-55182)</strong> è€Œç†¬å¤œåŠ ç­ï¼Œé‚£ä¹ˆç°åœ¨å¯èƒ½éœ€è¦è¯·å¤§å®¶å†å–ä¸€æ¯å’–å•¡äº†ã€‚</p>
<p>å°±åœ¨å®‰å…¨ç¤¾åŒºæ·±å…¥ç ”ç©¶ä¸Šå‘¨çš„ RCEï¼ˆè¿œç¨‹ä»£ç æ‰§è¡Œï¼‰æ¼æ´è¡¥ä¸æ—¶ï¼Œå‰§æƒ…å‡ºç°äº†åè½¬â€”â€”ç ”ç©¶äººå‘˜åœ¨é˜²å¾¡å·¥äº‹ä¸­å‘ç°äº†æ–°çš„è£‚ç¼ã€‚<strong>React å®˜æ–¹å’Œ Next.js å›¢é˜Ÿåˆšåˆšç¡®è®¤äº†ä¸‰ä¸ªæ–°çš„ CVE ç¼–å·</strong>ï¼Œè™½ç„¶è¿™æ¬¡ä¸æ˜¯ç›´æ¥çš„ RCEï¼Œä½†å®ƒä»¬ä¾ç„¶èƒ½è®©æ‚¨çš„æœåŠ¡å™¨â€œç½¢å·¥â€æˆ–è€…æ³„éœ²æ•æ„Ÿä»£ç ã€‚</p>
<p>åˆ«æ…Œï¼Œå°†ç”¨æœ€ç®€å•çš„å¤§ç™½è¯å¸¦æ‚¨çœ‹æ‡‚å‘ç”Ÿäº†ä»€ä¹ˆï¼Œä»¥åŠ<strong>ä¸ºä»€ä¹ˆæ‚¨ä¹‹å‰æ‰“çš„è¡¥ä¸å¯èƒ½å·²ç»å¤±æ•ˆäº†</strong>ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d9b265755f234f318da18432db3668fb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgdGltZXdlYXZlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766145942&amp;x-signature=o%2FXgrzHcq2rEaAFJUpkYWvRAH4Y%3D" alt="image.png" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-0">ä¸€ã€æ–°å¨èƒç™»åœºï¼šä¸ä»…æ˜¯å´©æºƒï¼Œè¿˜æœ‰æ³„å¯†</h2>
<p>è¿™æ¬¡çš„ä¸»è§’æ˜¯ä¸¤ä¸ªæ–°å‘ç°çš„æ¼æ´ï¼Œå®ƒä»¬éƒ½æ½œä¼åœ¨ React Server Components (RSC) å¤„ç†ç½‘ç»œè¯·æ±‚çš„æœºåˆ¶ä¸­ï¼š</p>
<h3 data-id="heading-1">ğŸ”¥ æ¼æ´ä¸€ï¼šè®©æœåŠ¡å™¨â€œé™·å…¥æ²‰æ€â€çš„ DoS æ”»å‡» (CVE-2025-55184)</h3>
<ul>
<li><strong>ä¸¥é‡ç­‰çº§ï¼š</strong> é«˜å± (CVSS 7.5)</li>
<li><strong>è¿™æ˜¯ä»€ä¹ˆï¼Ÿ</strong> è¿™æ˜¯ä¸€ä¸ªâ€œæ‹’ç»æœåŠ¡â€ï¼ˆDenial of Serviceï¼‰æ¼æ´ã€‚</li>
<li><strong>é€šä¿—è§£é‡Šï¼š</strong> æƒ³è±¡ä¸€ä¸‹ï¼Œæ”»å‡»è€…ç»™æ‚¨çš„æœåŠ¡å™¨å‘äº†ä¸€ä¸ªç‰¹åˆ¶çš„â€œè®¢å•â€ï¼ˆHTTP è¯·æ±‚ï¼‰ã€‚è¿™ä¸ªè®¢å•é‡ŒåŒ…å«äº†ä¸€ä¸ªæ­»å¾ªç¯é€»è¾‘ï¼ˆæ¯”å¦‚â€œAä¾æ‡’äºBï¼ŒBåˆä¾æ‡’äºAâ€çš„å¾ªç¯ Promise å¼•ç”¨ï¼‰ã€‚</li>
<li><strong>åæœï¼š</strong> æœåŠ¡å™¨åœ¨è¯•å›¾è§£æè¿™ä¸ªè®¢å•æ—¶ï¼Œä¼šé™·å…¥æ— é™å¾ªç¯çš„æ·±æ¸Šã€‚è¿™ä¼šå¯¼è‡´æœåŠ¡å™¨è¿›ç¨‹æŒ‚èµ·ï¼ŒCPU ç‹‚è½¬ï¼Œä½†å°±æ˜¯ä¸å¹²æ´»ã€‚å³ä½¿æ‚¨çš„åº”ç”¨æ²¡æœ‰æ˜¾å¼ä½¿ç”¨ Server Functionsï¼Œåªè¦å¼€å¯äº† RSC æ”¯æŒï¼Œå°±å¯èƒ½ä¸­æ‹›ã€‚ç»“æœå°±æ˜¯ï¼š<strong>çœŸå®ç”¨æˆ·çš„è¯·æ±‚è¿›ä¸æ¥ï¼Œæ‚¨çš„æœåŠ¡ç›¸å½“äºâ€œå®•æœºâ€äº†</strong>ã€‚</li>
</ul>
<h3 data-id="heading-2">ğŸ•µï¸ æ¼æ´äºŒï¼šæŠŠä»£ç â€œåå‡ºæ¥â€çš„æºç æ³„éœ² (CVE-2025-55183)</h3>
<ul>
<li><strong>ä¸¥é‡ç­‰çº§ï¼š</strong> ä¸­å± (CVSS 5.3)</li>
<li><strong>è¿™æ˜¯ä»€ä¹ˆï¼Ÿ</strong> è¿™æ˜¯ä¸€ä¸ªä¿¡æ¯æ³„éœ²æ¼æ´ã€‚</li>
<li><strong>é€šä¿—è§£é‡Šï¼š</strong> æ”»å‡»è€…é€šè¿‡ç‰¹å®šçš„è¯·æ±‚ï¼Œè¯±éª—æœåŠ¡å™¨å°†æŸä¸ª Server Functionï¼ˆæœåŠ¡å™¨ç«¯å‡½æ•°ï¼‰è¯¯è®¤ä¸ºæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚</li>
<li><strong>åæœï¼š</strong> React ä¼šâ€œå¥½å¿ƒâ€åœ°æŠŠè¿™ä¸ªå‡½æ•°çš„<strong>å®Œæ•´æºä»£ç </strong>ä½œä¸ºå­—ç¬¦ä¸²è¿”å›ç»™æ”»å‡»è€…ã€‚å¦‚æœæ‚¨çš„ä»£ç é‡Œç¡¬ç¼–ç äº† API Keyã€æ•°æ®åº“å¯†ç æˆ–è€…å¤æ‚çš„ä¸šåŠ¡é€»è¾‘ï¼Œè¿™äº›ç§˜å¯†å°±ä¼šè¢«æ”»å‡»è€…ä¸€è§ˆæ— ä½™ã€‚</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fd1cce26d6494c90a0dfa9c7399f5852~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgdGltZXdlYXZlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766145942&amp;x-signature=3IZSnGAJhMQQbrR4pPUzE3y8qOs%3D" alt="image.png" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-3">äºŒã€æ”»å‡»åŸç†</h2>
<p>è¿™äº› React Server Components (RSC) æ¼æ´ï¼ˆCVE-2025-55184, CVE-2025-55183, CVE-2025-67779ï¼‰çš„è§¦å‘æœºåˆ¶ä¸»è¦é›†ä¸­åœ¨ <strong>React Flight åè®®</strong> çš„ååºåˆ—åŒ–å¤„ç†é€»è¾‘ä¸Šã€‚æ”»å‡»è€…ä¸éœ€è¦èº«ä»½éªŒè¯ï¼Œåªéœ€å‘æœåŠ¡å™¨å‘é€ç‰¹åˆ¶çš„ HTTP è¯·æ±‚å³å¯è§¦å‘ã€‚</p>
<p>ä»¥ä¸‹æ˜¯é’ˆå¯¹ä¸åŒæ¼æ´çš„å…·ä½“è§¦å‘åŸç†ï¼š</p>
<h3 data-id="heading-4">1. è§¦å‘æ‹’ç»æœåŠ¡ (DoS)</h3>
<p><strong>æ¶‰åŠæ¼æ´ï¼š</strong> CVE-2025-55184, CVE-2025-67779 <strong>æ ¸å¿ƒæœºåˆ¶ï¼š</strong> å¾ªç¯ Promise å¼•ç”¨ (Cyclical Promise References)</p>
<ul>
<li><strong>è§¦å‘æ–¹å¼ï¼š</strong> æ”»å‡»è€…æ„é€ ä¸€ä¸ªæ¶æ„çš„ RSC Flight Payloadï¼ˆé€šå¸¸åŒ…å«åœ¨ HTTP POST è¯·æ±‚ä¸­ï¼‰ï¼Œå‘é€ç»™ä»»æ„ Server Function ç«¯ç‚¹ï¼ˆæˆ–è€…æ”¯æŒ RSC çš„åº”ç”¨å…¥å£ï¼‰ã€‚</li>
<li><strong>Payload ç‰¹å¾ï¼š</strong> è¿™ä¸ª Payload å†…éƒ¨åŒ…å«ç²¾å¿ƒè®¾è®¡çš„ <strong>å¾ªç¯ Promise å¼•ç”¨</strong>ï¼ˆCyclical Promise referencesï¼‰ã€‚</li>
<li><strong>æœåŠ¡å™¨ååº”ï¼š</strong> å½“ React æœåŠ¡å™¨å°è¯•ååºåˆ—åŒ–è¿™ä¸ª Payload æ—¶ï¼Œè¿è¡Œæ—¶ä¼šé™·å…¥è§£æåµŒå¥— Promise çš„ <strong>æ— é™é€’å½’</strong> æˆ– <strong>æ­»å¾ªç¯</strong>ã€‚</li>
<li><strong>åæœï¼š</strong> ç”±äº Node.js é€šå¸¸æ˜¯å•çº¿ç¨‹äº‹ä»¶å¾ªç¯ï¼Œè¿™ä¸ªæ­»å¾ªç¯ä¼šç›´æ¥å¯¼è‡´æœåŠ¡å™¨è¿›ç¨‹æŒ‚èµ·ï¼ˆHangï¼‰ï¼ŒCPU å ç”¨ç‡é£™å‡ï¼Œæ— æ³•å¤„ç†åç»­çš„ä»»ä½•è¯·æ±‚ï¼Œä»è€Œé€ æˆæ‹’ç»æœåŠ¡ã€‚</li>
<li><strong>è¡¥ä¸ç»•è¿‡ (CVE-2025-67779)ï¼š</strong> ä¹‹å‰çš„è¡¥ä¸æœªèƒ½å®Œå…¨è¦†ç›–æ‰€æœ‰ç±»å‹çš„å¾ªç¯å¼•ç”¨ Payloadï¼Œå› æ­¤æ”»å‡»è€…å¯ä»¥è°ƒæ•´ Payload ç»“æ„ç»•è¿‡ç¬¬ä¸€è½®ä¿®å¤ï¼Œå†æ¬¡è§¦å‘æ­»å¾ªç¯ã€‚</li>
</ul>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TD
    A[æ”»å‡»è€…å‘é€æ¶æ„è¯·æ±‚] --&gt; B[PayloadåŒ…å«å¾ªç¯Promiseå¼•ç”¨]
    B --&gt; C{ReactæœåŠ¡å™¨ååºåˆ—åŒ–}
    C --&gt; D[è¿›å…¥æ— é™é€’å½’/æ­»å¾ªç¯]
    D --&gt; E[CPUå ç”¨ç‡é£™å‡è‡³100%]
    E --&gt; F[æœåŠ¡å™¨è¿›ç¨‹æŒ‚èµ·]
    F --&gt; G[æœåŠ¡å®Œå…¨ä¸å¯ç”¨]
</code></pre>
<h3 data-id="heading-5">2. è§¦å‘æºä»£ç æ³„éœ² (Source Code Exposure)</h3>
<p><strong>æ¶‰åŠæ¼æ´ï¼š</strong> CVE-2025-55183 <strong>æ ¸å¿ƒæœºåˆ¶ï¼š</strong> å­—ç¬¦ä¸²å¼ºåˆ¶è½¬æ¢ (String Coercion)</p>
<ul>
<li>
<p><strong>è§¦å‘æ–¹å¼ï¼š</strong> æ”»å‡»è€…å‘é€ä¸€ä¸ªæ¶æ„çš„ HTTP è¯·æ±‚ï¼Œå°†æŸä¸ªå‚æ•°ä¼ªé€ æˆæŒ‡å‘ <strong>å¦ä¸€ä¸ª Server Function çš„å¼•ç”¨</strong>ã€‚</p>
</li>
<li>
<p><strong>è§¦å‘æ¡ä»¶ï¼š</strong> ç›®æ ‡ Server Function å¿…é¡»åŒ…å«å°†ä¼ å…¥å‚æ•° <strong>è½¬æ¢ä¸ºå­—ç¬¦ä¸²</strong> çš„æ“ä½œï¼ˆæ˜¾å¼æˆ–éšå¼ï¼‰ã€‚ä¾‹å¦‚ï¼Œä»£ç ä¸­ä½¿ç”¨äº†æ¨¡æ¿å­—ç¬¦ä¸² <code>`Hello ${name}`</code>ï¼Œæˆ–è€…å°†å‚æ•°ä¼ é€’ç»™éœ€è¦å­—ç¬¦ä¸²çš„ APIï¼ˆå¦‚æ•°æ®åº“æŸ¥è¯¢ï¼‰ã€‚</p>
</li>
<li>
<p><strong>æ‰§è¡Œæµç¨‹ï¼š</strong></p>
<ol>
<li>æ”»å‡»è€…å‘é€è¯·æ±‚ï¼Œå°†å‚æ•°ï¼ˆå¦‚ <code>name</code>ï¼‰çš„å€¼è®¾ä¸ºä¸€ä¸ªæŒ‡å‘æœåŠ¡å™¨ç«¯å‡½æ•°ï¼ˆServer Functionï¼‰çš„å¼•ç”¨å¯¹è±¡ã€‚</li>
<li>æœåŠ¡å™¨ä»£ç æ‰§è¡Œæ—¶ï¼Œè¯•å›¾å°†è¯¥å‚æ•°â€œå­—ç¬¦ä¸²åŒ–â€ï¼ˆè°ƒç”¨ <code>.toString()</code>ï¼‰ã€‚</li>
<li>ç”±äºæ¼æ´å­˜åœ¨ï¼ŒReact ä¸å®‰å…¨åœ°è¿”å›äº†è¯¥å‡½æ•°çš„ <strong>å®Œæ•´æºä»£ç </strong> å­—ç¬¦ä¸²ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªæ™®é€šçš„å¯¹è±¡æ ‡è¯†ã€‚</li>
</ol>
</li>
<li>
<p><strong>æ³„éœ²å†…å®¹ï¼š</strong> æ”»å‡»è€…å¯ä»¥åœ¨ HTTP å“åº”ä¸­ç›´æ¥çœ‹åˆ°å‡½æ•°çš„æºä»£ç ã€‚å¦‚æœä»£ç ä¸­åŒ…å«ç¡¬ç¼–ç çš„å¯†é’¥ï¼ˆå¦‚ <code>db.connect('SECRET_KEY')</code>ï¼‰ï¼Œè¿™äº›æ•æ„Ÿä¿¡æ¯å°±ä¼šè¢«çªƒå–ã€‚</p>
</li>
</ul>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[æ”»å‡»è€…æ„é€ æ¶æ„å‚æ•°] --&gt; B[å‚æ•°ä¼ªè£…æˆServer Functionå¼•ç”¨]
    B --&gt; C[æœåŠ¡å™¨æ‰§è¡Œå­—ç¬¦ä¸²è½¬æ¢]
    C --&gt; D{Reactä¸å®‰å…¨å¤„ç†}
    D --&gt; E[è¿”å›å‡½æ•°å®Œæ•´æºä»£ç ]
    E --&gt; F[æ³„éœ²APIå¯†é’¥/æ•°æ®åº“å¯†ç ]
    E --&gt; G[æ³„éœ²ä¸šåŠ¡é€»è¾‘ä»£ç ]
</code></pre>
<h3 data-id="heading-6">3. æ”»å‡»å…¥å£ä¸é€šç”¨å‰æ</h3>
<ul>
<li><strong>æ— éœ€ç™»å½•ï¼š</strong> è¿™äº›æ”»å‡»æ˜¯é¢„è®¤è¯çš„ï¼ˆPre-authenticationï¼‰ï¼Œæ”»å‡»è€…ä¸éœ€è¦ç™»å½•å³å¯å‘èµ·ã€‚</li>
<li><strong>HTTP è¯·æ±‚ï¼š</strong> æ”»å‡»é€šè¿‡å‘ Server Function ç«¯ç‚¹å‘é€ HTTP è¯·æ±‚å®ç°ã€‚å³ä¾¿åº”ç”¨æ²¡æœ‰æ˜¾å¼ä½¿ç”¨ Server Functionï¼Œåªè¦å¼€å¯äº† RSC æ”¯æŒï¼Œæ¡†æ¶ï¼ˆå¦‚ Next.js App Routerï¼‰é»˜è®¤æš´éœ²çš„ç«¯ç‚¹ä¹Ÿå¯èƒ½æˆä¸ºæ”»å‡»å…¥å£ã€‚</li>
<li><strong>åè®®å±‚æ¼æ´ï¼š</strong> é—®é¢˜å‡ºåœ¨åº•å±‚çš„ <code>react-server</code> åŒ…å¤„ç† Flight åè®®æ•°æ®æµçš„æ–¹å¼ä¸Šï¼Œè¿™æ„å‘³ç€ä½¿ç”¨è¯¥åè®®çš„å¤šç§æ¡†æ¶ï¼ˆNext.js, Waku, Hydrogen ç­‰ï¼‰éƒ½å¯èƒ½å—åˆ°æ³¢åŠã€‚</li>
</ul>
<h2 data-id="heading-7">ä¸‰ã€å…³é”®åè½¬ï¼šä¸ºä»€ä¹ˆè¯´æ‚¨çš„è¡¥ä¸å¯èƒ½â€œç™½æ‰“äº†â€ï¼Ÿ</h2>
<p>è¿™æ‰æ˜¯æœ¬æ¬¡äº‹ä»¶ä¸­æœ€ä»¤äººå¤´ç–¼çš„åœ°æ–¹ã€‚</p>
<p>åœ¨ä¿®å¤ DoS æ¼æ´ (CVE-2025-55184) çš„è¿‡ç¨‹ä¸­ï¼Œå®˜æ–¹å‘å¸ƒäº†ç¬¬ä¸€ç‰ˆè¡¥ä¸ï¼ˆä¾‹å¦‚ React 19.0.2ï¼‰ã€‚ä½†å®‰å…¨ç ”ç©¶äººå‘˜å¾ˆå¿«å‘ç°ï¼Œè¿™ä¸ªä¿®å¤<strong>ä¸å®Œæ•´</strong>ï¼æ”»å‡»è€…ä¾ç„¶å¯ä»¥ç»•è¿‡è¿™ä¸ªè¡¥ä¸è®©æœåŠ¡å™¨æŒ‚èµ·ã€‚</p>
<p>è¿™å°±æ˜¯ç¬¬ä¸‰ä¸ªæ¼æ´ <strong>CVE-2025-67779</strong> çš„ç”±æ¥ã€‚</p>
<p><strong>âš ï¸ åˆ’é‡ç‚¹ï¼š</strong> å¦‚æœæ‚¨åœ¨æœ¬å‘¨æ—©äº›æ—¶å€™æ›´æ–°åˆ°äº† <strong>React 19.0.2ã€19.1.3 æˆ– 19.2.2</strong>ï¼Œ<strong>æ‚¨ä¾ç„¶æ˜¯è„†å¼±çš„ï¼</strong> æ‚¨éœ€è¦å†æ¬¡å‡çº§ã€‚</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TB
    A[ç¬¬ä¸€è½®ä¿®å¤ CVE-2025-55184] --&gt; B[ä¿®å¤ç‰¹å®šç±»å‹å¾ªç¯å¼•ç”¨]
    B --&gt; C[æ”»å‡»è€…è°ƒæ•´Payloadç»“æ„]
    C --&gt; D[å‘ç°æ–°çš„å¾ªç¯å¼•ç”¨æ¨¡å¼]
    D --&gt; E[ç»•è¿‡ç¬¬ä¸€è½®è¡¥ä¸]
    E --&gt; F[éœ€è¦ç¬¬äºŒè½®ä¿®å¤ CVE-2025-67779]
</code></pre>
<hr/>
<h2 data-id="heading-8">å››ã€æˆ‘å—å½±å“äº†å—ï¼Ÿï¼ˆè‡ªæŸ¥æ¸…å•ï¼‰</h2>
<p>å¦‚æœæ‚¨çš„é¡¹ç›®ä½¿ç”¨äº†ä»¥ä¸‹æŠ€æœ¯æ ˆï¼Œè¯·ç«‹å³è‡ªæŸ¥ï¼š</p>
<ul>
<li><strong>React:</strong> ç‰ˆæœ¬ <strong>19.0.0 åˆ° 19.2.2</strong> ä¹‹é—´çš„æ‰€æœ‰ç‰ˆæœ¬ã€‚</li>
<li><strong>Next.js (App Router):</strong> ç‰ˆæœ¬ <strong>13.x åˆ° 16.x</strong>ã€‚å°¤å…¶æ˜¯ä½¿ç”¨äº† App Router çš„é¡¹ç›®ã€‚</li>
<li><strong>å…¶ä»–æ¡†æ¶:</strong> ä»»ä½•ä½¿ç”¨äº† <code>react-server-dom-webpack/parcel/turbopack</code> çš„æ¡†æ¶ï¼Œå¦‚ Waku, RedwoodJS, React Router ç­‰ã€‚</li>
</ul>
<blockquote>
<p><strong>æ³¨æ„ï¼š</strong> å¦‚æœæ‚¨çš„ React ä»£ç åªåœ¨å®¢æˆ·ç«¯è¿è¡Œï¼ˆä¸æ¶‰åŠ Server Componentsï¼‰ï¼Œæˆ–è€…ä½¿ç”¨çš„æ˜¯è€ç‰ˆæœ¬çš„ Next.js (Pages Router)ï¼Œæ­å–œæ‚¨ï¼Œè¿™æ³¢é£æš´ç”±äºæ‚¨â€œç”±äºæŠ€æœ¯æ ˆä¸å¤Ÿæ–°â€è€Œå®Œç¾é¿å¼€ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-9">äº”ã€ç«‹å³è¡ŒåŠ¨ï¼šç»ˆæä¿®å¤æ–¹æ¡ˆ</h2>
<p>ä¸è¦çŠ¹è±«ï¼Œç«‹å³å‡çº§åˆ°ä»¥ä¸‹â€œæœ€ç»ˆå®‰å…¨ç‰ˆæœ¬â€ã€‚è¯·è·³è¿‡ä¸­é—´çš„è¿‡æ¸¡ç‰ˆæœ¬ï¼Œç›´æ¥å‡åˆ°æœ€æ–°ï¼</p>
<p><strong>React æ ¸å¿ƒåŒ…å‡çº§æŒ‡å—ï¼š</strong></p>

























<table><thead><tr><th align="left">æ‚¨å½“å‰çš„ç‰ˆæœ¬ç³»åˆ—</th><th align="left"><strong>âŒ ä¾ç„¶è„†å¼±çš„ç‰ˆæœ¬</strong></th><th align="left"><strong>âœ… å¿…é¡»å‡çº§åˆ°çš„å®‰å…¨ç‰ˆæœ¬</strong></th></tr></thead><tbody><tr><td align="left"><strong>19.0.x</strong></td><td align="left">19.0.0 - 19.0.2</td><td align="left"><strong>19.0.3</strong> (åŠä»¥ä¸Š)</td></tr><tr><td align="left"><strong>19.1.x</strong></td><td align="left">19.1.0 - 19.1.3</td><td align="left"><strong>19.1.4</strong> (åŠä»¥ä¸Š)</td></tr><tr><td align="left"><strong>19.2.x</strong></td><td align="left">19.2.0 - 19.2.2</td><td align="left"><strong>19.2.3</strong> (åŠä»¥ä¸Š)</td></tr></tbody></table>
<p><strong>Next.js ç”¨æˆ·å‡çº§æŒ‡å—ï¼š</strong></p>
<p>è¯·è¿è¡Œä»¥ä¸‹å‘½ä»¤å°† Next.js å‡çº§åˆ°æœ€æ–°çš„è¡¥ä¸ç‰ˆæœ¬ï¼š</p>
<ul>
<li><strong>Next.js 15.x:</strong> å‡çº§è‡³ <strong>15.0.7+, 15.1.11+, 15.2.8+, 15.3.8+, 15.4.10+</strong></li>
<li><strong>Next.js 14.x:</strong> å‡çº§è‡³ <strong>14.2.35+</strong></li>
<li><strong>Next.js 16.x (Canary):</strong> å‡çº§è‡³ <strong>16.0.10+</strong></li>
</ul>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ä¸€é”®å‡çº§åˆ°æœ€æ–°å®‰å…¨ç‰ˆæœ¬</span>
npm install next@latest react@latest react-dom@latest

<span class="hljs-comment"># æˆ–æŒ‡å®šç¡®åˆ‡ç‰ˆæœ¬</span>
npm install next@15.0.7 react@19.0.3 react-dom@19.0.3
</code></pre>
<h2 data-id="heading-10">å…­ã€å†™åœ¨æœ€åï¼šç»™å¼€å‘è€…çš„å»ºè®®</h2>
<p>ç”±äºåˆ©ç”¨é—¨æ§›æä½ä¸”å·²æœ‰è‡ªåŠ¨åŒ–æ‰«æå·¥å…·å‡ºç°ï¼Œä¾é  WAFï¼ˆWebåº”ç”¨é˜²ç«å¢™ï¼‰åªèƒ½ä½œä¸ºä¸´æ—¶ç¼“è§£æªæ–½ï¼Œ<strong>å”¯ä¸€å½»åº•çš„ä¿®å¤æ–¹æ³•æ˜¯ç«‹å³å‡çº§ React å’Œ Next.js åˆ°æœ€æ–°çš„å®‰å…¨ç‰ˆæœ¬</strong>ï¼ˆå¦‚ React 19.0.3+, Next.js 15.0.7+ ç­‰ï¼‰ã€‚</p>
<p>è¿™æ¬¡çš„ä¸€è¿ä¸²æ¼æ´ï¼ˆä» RCE åˆ° DoS å†åˆ° Info Leakï¼‰æé†’æˆ‘ä»¬ï¼ŒReact Server Components (RSC) æå¤§åœ°ç®€åŒ–äº†å‰åç«¯çš„æ•°æ®äº¤äº’ï¼Œä½†åŒæ—¶ä¹Ÿæ¨¡ç³Šäº†<strong>ä¿¡ä»»è¾¹ç•Œ</strong>ã€‚</p>
<ul>
<li><strong>ä¸è¦ç¡¬ç¼–ç å¯†é’¥ï¼š</strong> å³ä½¿è¡¥ä¸æ‰“å¥½äº†ï¼Œä¹Ÿæ°¸è¿œä¸è¦åœ¨ä»£ç é‡Œç›´æ¥å†™ <code>const API_KEY = "sk-..."</code>ã€‚è¯·åŠ¡å¿…ä½¿ç”¨ç¯å¢ƒå˜é‡ï¼ˆ<code>process.env</code>ï¼‰ï¼Œå› ä¸ºè¿è¡Œæ—¶æ³¨å…¥çš„å˜é‡é€šå¸¸ä¸ä¼šå› æºç æ³„éœ²è€Œè¢«ç›´æ¥è¯»å–ã€‚</li>
<li><strong>ä¿æŒè­¦æƒ•ï¼š</strong> æ–°æŠ€æœ¯æ ˆå¾€å¾€ä¼´éšç€æ–°çš„æ”»å‡»é¢ã€‚å…³æ³¨å®˜æ–¹å…¬å‘Šï¼ŒåŠæ—¶å“åº”ã€‚</li>
</ul>
<p>ç°åœ¨ï¼Œå»æ£€æŸ¥æ‚¨çš„ <code>package.json</code> å§ï¼Œç¥å¤§å®¶éƒ¨ç½²é¡ºåˆ©ï¼ŒæœåŠ¡å¸¸é’ï¼</p>
<hr/>
<p><strong>å‚è€ƒèµ„æ–™ï¼š</strong></p>
<ol>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Freact.dev%2Fblog%2F2025%2F12%2F11%2Fdenial-of-service-and-source-code-exposure-in-react-server-components" target="_blank" title="https://react.dev/blog/2025/12/11/denial-of-service-and-source-code-exposure-in-react-server-components" ref="nofollow noopener noreferrer">React Blog: Denial of Service and Source Code Exposure in React Server Components</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fvercel.com%2Fkb%2Fbulletin%2Fsecurity-bulletin-cve-2025-55184-and-cve-2025-55183" target="_blank" title="https://vercel.com/kb/bulletin/security-bulletin-cve-2025-55184-and-cve-2025-55183" ref="nofollow noopener noreferrer">Vercel Security Bulletin: CVE-2025-55184 and CVE-2025-55183</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fnvd.nist.gov%2Fvuln%2Fdetail%2FCVE-2025-55184" target="_blank" title="https://nvd.nist.gov/vuln/detail/CVE-2025-55184" ref="nofollow noopener noreferrer">NVD - CVE-2025-55184 Detail</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fthehackernews.com%2F2025%2F12%2Fnew-react-rsc-vulnerabilities-enable.html" target="_blank" title="https://thehackernews.com/2025/12/new-react-rsc-vulnerabilities-enable.html" ref="nofollow noopener noreferrer">The Hacker News: New React RSC Vulnerabilities Enable DoS and Source Code Exposure</a></li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Java Mapéå†çš„â€œä¼˜é›…â€åˆé›†]]></title>    <link>https://juejin.cn/post/7582791876366827558</link>    <guid>https://juejin.cn/post/7582791876366827558</guid>    <pubDate>2025-12-12T12:15:55.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582791876366827558" data-draft-id="7582814236583034918" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Java Mapéå†çš„â€œä¼˜é›…â€åˆé›†"/> <meta itemprop="keywords" content="å‰ç«¯,Java"/> <meta itemprop="datePublished" content="2025-12-12T12:15:55.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="AAAç®€å•ç©è½¬ç¨‹åºè®¾è®¡"/> <meta itemprop="url" content="https://juejin.cn/user/4294056357689099"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Java Mapéå†çš„â€œä¼˜é›…â€åˆé›†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4294056357689099/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    AAAç®€å•ç©è½¬ç¨‹åºè®¾è®¡
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-12T12:15:55.000Z" title="Fri Dec 12 2025 12:15:55 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#2b2b2b;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(159,219,252,.15) 3%,transparent 0),linear-gradient(1turn,rgba(159,219,252,.15) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin-top:35px;margin-bottom:10px;color:#4dd0e1}.markdown-body h1{font-size:30px;text-align:center;position:relative;width:max-content;margin:0 auto}.markdown-body h1:before{position:absolute;content:"";z-index:-1;top:-20px;height:100%;width:100px;left:0;right:0;margin:0 auto;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADsAAAA6CAYAAAAOeSEWAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAABkLSURBVGhDtZoHnJ1llcbP3Om9ZiYzmfSQhCQQIbRQVQKI9CYC68qKriJK0UXcZRcINqStIoiIqKCi1NACQihBWiCkkJ5MJlMyvd7p7d759v989/sy34yTbIj48Atz71ff855znvOc971xDrB/EtoGI7a9Z8Aq+wZML0mNj7dE95NZ1OKsj1dHo1GbnJpss9OTbWJyonvun4VP1Njuoagtb+m0it4By0iIt8LEeMvkr8XFWcfgkA1gYDLf47i2PzpsyU7UspKSLDoctagTZ7Vc08MzClMS7awJ2ZaflBB78CeET8TYla1dtrKt2w5KS7YCDGzEoz2RqKUmhGw6x2bhuXyOp2BoRXef1Q1E7Lj8TIsMD1sbxu1kcnYSAX1810RMTUmyMB7f2j1gC7NS7byinNiL/kH8Q8a+2NRh77b32El56VaPAe0YeGR2mh2bm+FdMRqP1rbZe+3dFsHT35qcb/Oz0rwzo7Gxs9feYPLS4kM2h8lawee5hPmlJXneFQeGAzJ2F564v7rFzi7Msu3d/Xgjzq5g8ArX8VCNN2vJ28daey0zZJabmGCLslP5HOf+Oygr3UzDGOf+JxrauXfQjslJt+dbuuyMgiwmk+sPAB/b2Lt2NdoMZnuY21qHIvbvUyZ4Z0ZQiXGrWjvsmPxsK4R0nmHA8ZCTQvxVQn5eRipklIBtcVbV1WtHYsjati47ZWKuTUpP9Z4yGk/xDBGe3v1mW4/dOrvYO7P/2G9jRSjf31FnXyaUXiB8r51WaJkM3kcfOSa2FR6qarIenooTLQHPLcC4mYThyw1tVpKWYlVERlZ8nC3Oz3Jzdn1nn5uvQ8OOHYvhR/CvsqffJbkCkZTvcYZ6Z0WTfTovw5Y1dtjXp+TbFPhgf7FfxpYxuMfr2uwo8rEtMmwXF+d6Z8wGmIR2PLyjo8cqOFffP2SLGexJEJCP9R29thkPXlpa4A5Y3w/jmuVNYYwO2QkY7WMtz3mVcE1hkualJdmSolzX8GnpKd4VZq80d1o7zN0RdWxGaqItgbn3B/+vsasgh/UMNBOvzYMZDxtDKp289KGaVguFQvb1yQWWwuB97GaSXqUUnVaYbSUwrDCEBz/C2CM8EhNrP13fbkeSh3OJgCAe2N1CWXKsGOc6TOr5U4q8MwYhDtkTda02MyPN+nnGBQEH7A37NHYz5KOZVv08qyjbSseEzKauPnsMj98wc6Ibcj5UUv7M8QWZTE52jEwGOVaD8U1Dw1YNWX0qM8VKyb80L/TrOPYOzH4KBJQTrK8M7+7KZjuM63sHBt17FubGoibCuf+tarWFGUmuwWeT8/vCXo1tZOYeZcazCaez8MwEzzM+HqhqtiJI5twxL1jeGLYk7jmKMF1JOCbg6Qj5nAdRqX7q3BYm8VAmQvW1lfcMc58IT95uIA3q+gftrDHPXUXJWkVEHJme5Bp5UmHsvIZ/O3l8ECE/FWcsItX2hr0ae8O2Wjs+J43QTbOZzGYQ/7Wtxq6eXjRK3r0By4YJ6Ty8EiYSJqcm2eGeV4Pox/ANENJR49RiEdfqcLflUJrEBZqgxYHrBjn2ExFURqKdVETN9YirJxKxR2rbrYeQv5ISmB6IsiDGNfZGWPeMgkzr58xnPaJ5p6XDZPKz4T77wayJ7jGhhXLwanOHTWBgq5n5q6YUwNJ7l3kKcRl7OJ7fF56l1GzvHbSD8dghTPi0wIRfv6XafjJ3ssv0PnZQ7nZx/etwzO1zJ3lHR2OETTw8x0tOx1AN3De0D7YV+63oGthjaJQ5Ur7eVVZjcdGInUyuaT73ZWg3efV8fZs7cc2E777Qi5eunVbghvPPymrt/krKGfcLd8ybYjdxrK6333Z09rjHZkNuLYzz0uIc+xWCZzz8nbHbe4dsY1e/XUOY+nimvtUaSazv4jXhaQasSbmYmpuenGwHZ8TKggSEQm08rMD7ahBOoExcMqXQegjnZ+CEvaEa1ZQUQkt39dj0zDS7krq+ARmpdws/nlNqD9WFbWN7l5u3wr9MyrcXKUsqWy3jTOaoML4DdaQ83YIoT4VYpEXvYQZLmbX5SLohBrgOj186Kc/iKTUPUhq+Rrm5ekOl3TWv1Mr6hqwbY0VOQXwEo+Moq4Z47q5qsU489G944LyJOW4LOLZOKtT/iI6+nGe/0dhuEd4ltj2NmiuCU4hnk5fHIi7+RK4uTEu0e+s7rAiRcw1CYy3OejvcYz+eXeI9MYY9nu3lYZl0KavJJ7Vjibzgjp319rUZE20j7CkJqFr5JQYgQ39f3eQaKpQk0afy8nl4uBzvjUUTRk7k3iebOm0pabDiyFn2XGu3dRME41CGVeBVqSiVnc6hIUpekp1VjHLDSOEcQlui5W/U8C7IKREjv1Gabw3wRwUTvpv7jybPtzHmIPZ49q6KRjuccqBQVCOtGvqXhrCFUUXJzOYSHt7Kw5Ix9H08dSje1o1JyL73IYXpEMmE5CRbw6wuykx2pR+Pd6/J4JpLiJKV6N9OnrcQNfQ0Zem6qQX2MmFXyWTE+DMO0kGx4e08DEjnXbsYuOq7niHB8jdY/wQ8Srm2XCZZUrOakF1CY5EKX0h93Tu/1J4kRdbDMT8MamgZK9xe3uDcvrPe++Y4f61rcZr7B53rN1c5N2ytcV5rCrvHt3T2Og19g+5nH7dvq3bqunr4NOwgK2MHA1jeEDuG7HNuLmtw7qpocl5t6nCPvdTQ7v4N4u3WTqeyu9cZHIo4f6lqdFoHh7wzMbzDeeGv3Hvzjlrnh2W1zofhHuftxpFn3VFe7zxS0+p0DlKVPbhhvBxhvwiFMgfP+mjHA08gEC4pybeLyK1iZldh8zC5VJQyUl8l59KZ0WJk2xaiYWxNrkXXJhA8r3PvZRur7ZZZRfadaRPsfiTmX9HGajC2tXd6V8dQTMhX0h8rNdJx9Ra8F8SbRNLzhPRnJmTZIUTYueTyWxyr7uv3rjC3OkzE8495oS+4xq6D5WoI0bO5WVCOSerl8rIeBrOI/Hkaw6ME5W1zSuzx2la3CRdWi3zIG+FDBvUp9LMgI/vggUmE7KkT81yGvOOgEYa/aUahhRAF5xLec3OzbF1r2O17BbVxIi7hzJIC64IYhXdJA+nh/5xVbOmE9J0QqjSxWk0pp37M2YEtgjS8GpimACu7xkqxdKJ6fEXyYl2Lre0ZtC8yELVewtWUnbfCPIhrvgDFz8WI5yhJKgcnFMZWEFrwhgzo5uWDDDA1oGSOzcu0xfx7vTlsv6posIMpJ6cGWPiw/BxL4PU7vbrpjgf8bMdu5OYwOdhm83DARUSa0ELknYIeEAaILuWxlhGa0M8+EuJCrpJT+ymENhN60pXBxa3LZ5TsucnlGaCmIEQ4Evru91yuz0xMtKaeXluI5zdh9Mm8vAlBn4aR07X64EH3vEKdXQkZJXPP/JxMvNRpLxEtHZ5RQgmNewnpouvVTpYTHdfOnmy5kFUGnpRTfEhXD9DiBdFFJB0/YWS9aj6pmc89r0BaQmgTRkgI+EsdKsYasJZOBF+QqTH474NK7LbyBvf7W+RgOxNyxfQY2/2hrp2+NkroxrzrQ55fSZkpJIa28znCgF6rb7H1hOSslATyvNflAh9pvHcX3lVE/Ya8FjTJIexa2Rq77nfU96unTnD7aME3+TAm6BFKYrPnqCNIqV5sq0ZGCiEV+Db+qWMQqpFgb5KPx48R6omeDl2EuP9DTYt9iGA/f1KBS1w/La+H4ktsSmLItvZHXLUkrCeflVtJ9DVVg1H7+sxiGvVM975rZpfabuqHVhuP5F1vewav5O8GamUe91yDanoYw47FWzC929O+DJnKA2opFY1Rjru5CE7kOcO0jJtQVUIynzuZEMeb+1CEOFXN8iFSGeRpCm1BTlJxVg49Azm819SO7Bu0axEbwn27GuxMck+TMQHDP8fn48gfDVIL4R8xKVPJ73MQBUIfA/Z54LMw5vmlE+w+VFo2A78X/SsyPA/RMD0z3e2qVLtfo7aeBslpMX0N0TEnLcUlKym1jyBFqSohmYntI5enBhYB9CY/2kNarhwJhNiMtRGyWnkQdKaCFyQwgydjyNUw4VchKxXv2/DoKdC+lkQbCX1NlKCGvJiBJkSGbCus6jfo4yGBNySgr+u7e20BCsxdVAcFlJ/tHd32+cIsNxSXUULUUx+dg/d47g7OPYFw2MxkSuyMwLHVTI6PBN6dS8Sppw45zHJSgDXV3aQzmz40Z6fDgBfiAXU0uZxby2zejee+j3eltoQMzhV6qSBogXwrEXDj7ElWxUQ8RrnSaoU0dxIsKaiMvMykXTu90NqJsGHP4z78SdLigUrLKat32nFwy/E07pfDFRdQ/7N5r57pQ1482uvWhMGhQcviGkVrKDUp0ToCxfhQal5n4Hs/g1jOgH4LWdwFOd1b1WzHET4vLZppv+Czjxo840OrDlG8jAJzv2tp5mLK1dsU/lfIOeWy5NxFxfl2BoYImlQtx9QF6mJRQKBsQYYuO2yaLYPBUXvu/VqYPxtHhNy7Y4hCkNLGPtKSklzCVKSHtMQxcqm5Kw1DhI2PTGZtcGDAvoLQ/u7MifYtWFBlxz2H9zo8RkwKzC5UYiG+p44ccqE62YAxLeT/TOpf8MXx8Qk0IJFRY1Go+viQVJpE5Ehjf49xfAZeqGIy/7us3nqxwQfCkjZypPxobVr/6YpQHIalUvuCyEwbSXC9PC8QnkFcXlrgLpoLIhIfKuaqlQkYIAwQnr/f3eyu7KttOw2lNpv8/BPHyjzVNER3o72gvEBKqRMTflndbP8BMweRDyeciEj5bFayFXqTLzheivgYJC0jwzwHa0MDDEotm48ndze5BBBElAnxxcRYHAFh3FfZaA9UNRmC354kNwUx8eHkmVj5dcTE5ZMnuEyr1QqlhtaJLuOYZv4v3KNo0TKrGPUZ1NILPKuWcvVn5Trv10SMB6h0j/ARMnlOuafCBIfnSWEx/Raif3HDzofYMM31dOyY9LBaLK3TjoX2fEqT4+2qaUVWSTQvyM6wC8nNJyEetXIyuLKrx04P7MKNnbJZlKUtNAIHo7i2dA/YU3Vtdi5l6jCepXy8hOedSSSsI8/HQg5Q+gxTKXwkMHkbESo+hjG0lbRRzQ3Fc5LOzDuFhs3Ptumpie7ilRDhlEJOq/hjsZljCxjkt7fWuPS/EekpXMggJQIk0G+eN9Xu2VmHWIkJe0nJRN4ptBBit2yutG9ML7J1DHAxebiAMrZ4VZlduqGS8I2tJc2iborUxmIN79c+kTovFxivPvrcSaP3n7RSKYTUmKt4N3rMOcw4JOneD3sP956jNaMglIeTER5Xbdlt15Tm2W10NEsYrA/N5JLCHHsR9tSqwxq08G3bqm1ZTbOtagnbo6SLvH/VzBL7W7jPzqFea0LmMLFzUuLtdwumuO3i1Vtq7OK15Xgw3l1PDmIXak+6QBEkvB9YJIzBcc/L20JIYaSZ/qAzVm5Ut4oowk3QehC+N3xo/1wTqt7zsYawfX9no9XjqdPXVLhrwyo/wucJYQkE1e4j8rLcBuHUItQQKqgMXb6LGvxFQlXw33AdZLR0V5P9Fr29lP73scNnosoyvdWPv4fPJ+uJrLVtMakqaL1M1cTvv0OLIZE6wk2a2IcIRUQh+DaejpdcXepBa7bKDRGM9PIVxTl2EwarZ72rooVuY4RQtMypdk6e1lLLehhY2lt7QEd7WxlCDvdIli6E9B4+ZIodmZEMccUGqgiZOqru9tkR3iJ8nCcXRWRZCSPMLPEjlx2LjQL1OM5qKAm+vhSuRqSfV5Ttrg8FdWcrnhMqCTex7DEM6qTsVEuM1+8hovaHQ6e6a1Fz0xLd3nUt4ToWWuzWNkhcoAIIjUx2ZpxjLzWF9+SYmngR1lok4TEoJxGfuijhI/7OICoFmadl2llcL9b1oRVJtbD+JLlv1KrhHG5811t9ELbzgk14ICUwqE+TDzftqHPz98vUSy3jSIwP8dCpkNqLDPTx+rArz4T5qLG3G2PrvJKKPoLBWE501NC3ilUX5mVjVIb9nIbgWcpPMiSXjbcL8K62UkR86m1/yfkSeMaHFuK04X0CE3J6SWzFUxw0BSNHlSzi3RmIRJwHq5udO3c16quLp6sbnffbupxbt+12vzOrzuvNHc7ycRbIxuJHgYU7YSASdQgxp7qz2ynv6HJeqW91doa7nLruXof+17sqhhu31Xif9o7HalqczV29Dnrb/f5EXZvzdH27U98/6LR5i3N0UM5zjHU71/lwjRWWltU5CAIn7F1MqLp/r9hQ5RoaxG+qmrxP4yNKcfsFLwuiprffeb2l03m2scO5h3Or2rudzjGrhk8x4Cqu2xcexilBvNEcdi5Yu4tKF3Ue4tzPy+td5/1md4tzw5iJ27NuXEYobYUdlb8z6GTWkdxaCvk2zHjd5mpKQ459mv5TkAp6mQb9Aq9HHQ8S6mrZnuc6vUG6WHusIhCJGNXl9byvnJyaiE7+Eoz8c5TYNQiUveENGpJpcIJ+biS8R0+rlcazGNs7pKB+zPLTOSX2KNWhlDAf4r2Spj72JORB5OyHULX+dlD/FOky/HFy5ygYU0sey/i8moeqdunXK1qC3RuaMOYHlI/raQMl3M+EeTV5WxD3Km8a8PkM8nr648sQ9+esKbf5e/nxiKBfAOQkxbv3SU9LYmqPV9V/Pn+V20VwTyVjTqCI6edEQUOFUXs9WmfSll8DyX2dt7GlnwkswaM3l9XZ0oNK3MTXbxpOV2sGk69s6XCJw4cY8KbyRrt9TrHt7Bm0rRBQe1+fHUWNfaapU0KbqxzbORC1M/LS3dJwIl3KOrwykQG/E+61q+isgniztdOKqNOziDgZqZIzFwPvqGiyg5NCtoCqoG5NxHhPZTOsnORulKskjoKMDeLuXQ3OmnC3syxARFXdfc57LR3OrdtrvSOOs55rnqhtcdoGhpxHdjc5EfJUuHZTlftX+G15rXPlhkrnLe59F7Lz8VGHdg8c5y2OLeMZ126qduq9XC3v7nd+FchLvYPJd15gPCu8XQnh/qpm59WGVudZzvvQO97kXTcGxhnEuJvR39tWY8cwK4uhcikk4a3Gdstg9l5B2t0wfaTdWkEou5vCPOV5PH73vFL3+DfXltnh6OxjkJD6Wd5F3g88tMe6CW/7YmI99VIL4u0oqUK8ocW4d8hFrXMVoOQU8s3U97MnjvDD/XRYkyhHM1MT3GVZQR2Tdv70U8EbA5vlo+CaPAaaSWoZXm50otGodxQ6L6txGKxzw5ZYORrBsPPrykZKQIy1n8bTjwb2fO4Te3ue7x6KOKvaYns1wtIddd4nx3mwot55qyl2360cp81zurg+CGqwU8v4/Of5uAVvPgObrwvHomY8jOtZ4fXWLnefdHVXv9044+8ZklCx75DXwcV1Sb27y+vInUQEuVYSaMgRJYfAwtoj0raFxIUW1A8nz35f02qLc9Lc9lG7CBkwtUR7bf+A+5uL6ehnH9Lat+5sIEfj3Cbj3NKRvP7Rjlo7FSmqavKvpSP8MRZ7NVbQYLSkqlC9ZW4sPH18gBTcORjrhMWmQWzFmK2UsvO90qQ1oZcI8UhkCLZPtRqMy0NirobAvjIpb4/sW06qKGyPR2oGIdlazjOOTk+kLYzaaYGSp63Wz6HsXsQ51wd+LTAuZOy+8GBNq7tF+IOdDU4kENJthNID5YRafZtzZ3mDs9LbRgzixcZ2l1h83OKFbDmEd0/FiFp7DWHgp0AQGzq6nf8hPF+oa3EehOz0ziCWcm4NpBRMhX1hn571oR9wqVVSDVPtUi32sQ0vbu7scZdY9aOt2ZSEL9BEBIW+dv20AKDd9/ep09oimYqHpyImkKDuRllS4PrlHNuIqDmCJmNJQba7q1joEaUQJuR/WdXsLrJrq/L6cdJsPOyXscJ7GLKqo8cOpqhrO//yQG6oS3kZwS9xPkRB3wi7diFMtDN+PLk5m1ath+8f0Fy80dbjhvVXub+U5mEqeal27UP+dWpPlknNxW79Ak6/7Tg3UMOF52j1xA1qK7Trd6nXC+8P9ttYQcumIonLSnJtBdJNa77axw1C2x3qR4Wqnj73x9f6MbV+CCYFBZO6y51aSh3gzVrsmwzJnULEbCJC1oZ7vIZ/9Iqmfvn2u5oWO5n8fApxcuWUApum5diPgY9lrA9EtvUNOzYf8vqAcJPsU5iOh7XtXQgt2uZhjKU2amF7HQyfEYWcZk5yQ1RDKNrLcq02k/9IGmldrB93KiokPw8EB2SsoKWXO5FmxXhlckqi+3vEUvLqwok5PHVkIWAszlqzy1p54zuLpnPZ3q9bod08JlLSb5DrNxDm38Sbvsg5EBywsT7oH+3XNW3uasGirFSrxRNdCllKiPZHZzJYLZb5qEcpae3pxMCuu9oibS5/QCOiLcYUrp+MmtJeURjFdVlxzqiae6D4h40NQt54HyGv3JRo10aVfv8YhtC0pSlVKcPFuxIXahr08mzCO4VzMlLSsZuomZ+RaucU0rXsw/sfF5+osUFonWob/7TrLdaUgdpV93fl9X+VIC0Y6tek2uI8OD3J5gT2Vj9ZmP0f4IM4iY7RQ5gAAAAASUVORK5CYII=) no-repeat 50%;background-size:64px 64px;opacity:.84}.markdown-body h1:after{position:absolute;content:"";width:150%;left:-25%;height:50%;bottom:12px;border-radius:50%;background:linear-gradient(transparent 80%,rgba(77,208,225,.8));background-size:400% 200%;opacity:.6;animation:h1Animate 6s linear infinite}@keyframes h1Animate{0%{background-position:100% 100%}50%{background-position:100% 50%}to{background-position:100% 100%}}.markdown-body h2{display:block;border-bottom:4px solid #4dd0e1;position:relative;font-size:24px;padding:12px 32px;margin:30px 0}.markdown-body h2:before{width:24px;height:24px;left:0;top:0;margin:auto;background-size:24px 24px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADGklEQVRYR81X32vTYBQ999s6mFjQgQ+DrbHiVFZYU4cDcQ/6pGhTFVYFEXGi82H+Bz448UnEF1Fx9ccEEcXpZE3d5tP2ooKiTacTHaLNpigMHDgnU9tcSbrWrkwWR0sbyEOSe885ObnfvV8IRT6oyPwoLQHBx+OVM5WJvSyEVAhnBOjt7yU/+/rr6r6l8TMO+F/EN0JQhICqQpD/xaRpcpAc9tS+M+9lBCia/oqBamK+zeDuQogQZaKJk3wcQjxSva7tGQGB2Ke1zIk3DNyMyNL+QpCnMQOaPsDAVuGAp9cjvbYc8Ec/bCYSg0zoiHilk1tHxqsqEsYlML4kjIpT/eurJxRNPweQU5VdrWaOEo1fgKAVbBgXIz73kF3R/ph+ghgdzMYWM29eAWlBJqgZaFlFYtC6nhWpaDqnSGlIlV1WjJ3DloDNgyNLncudqgX//Ucg3LxuStHGuhi8pqKCW3rqV342rwFjRznKm+/LNaN2yC237ThgF2wxcfMLeP6+ncrKzoPoKTGeLQbYbg4TNoC5iZPJY5HGVRdSNZAWYBclD3FzBQzrR8hACAKdzBzKA/4/IYioDQaOskBbpEG6PO8qKKSAEi3CnEb0Pw4oMf0OmKbTDWqh3Lw6EIiNBZi5lxh3wz4puBD5ovqAMvxhHSdFKxE1CQe3m/07TeTX4lcJdAhE+1Sv65Z5P/ByvIGTRowIZ9igbtXnmrOsbTvgj+kHBNMuBu9OdVw8EeU4nC1A0cYmAHZOTRrLhra4Z8ywnSN6vZHAFTA2WnnMfQB3qz73ddsOZM8CACFDIPSgQXqebXEgqgeZcAeEe6pXasm1f8ew3igMtAHWac0Uc/jYdyAaP0xEBwFsmgUPqbJ0NE2UKj4EGcahiOzuyhagaHpnmtgcVgTcCMuua7YdyAHbA3ArQNscVFbb4635aD6fnYaTvxxi9UNP7ddMXaRWVBdAcaLk6bDXPZCNZ9uBXEsDUX1T2Cc9yjig6Z0EHg3LK8/aqf6MwJKchkXfks1+0+JtSq3qLPa23BRR1B+T/6nkfMaW1r9hPt/MLtYfTLEpP+T9FNoAAAAASUVORK5CYII=)}.markdown-body h2:after,.markdown-body h2:before{content:"";display:block;position:absolute;bottom:0}.markdown-body h2:after{right:0;width:400px;height:10px;border-top-right-radius:24px;background:linear-gradient(90deg,#fff,#4dd0e1);max-width:50vw}.markdown-body h3{margin:30px 0;font-size:18px;position:relative;padding:4px 32px;width:max-content}.markdown-body h3:before{border-bottom:2px solid #4dd0e1;width:100%;content:"";display:block;height:28px;position:absolute;left:0;top:0;bottom:-2px;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);background-repeat:no-repeat;animation:h3AnimationBefore 2s infinite alternate}@keyframes h3AnimationBefore{0%{width:28px}25%{width:100%}50%{width:100%}to{width:100%}}.markdown-body h3:after{content:"";display:block;width:28px;height:28px;position:absolute;border:2px solid #4dd0e1;border-radius:50%;right:-15px;top:0;bottom:0;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);animation:h3AnimationAfter 2s infinite alternate}@keyframes h3AnimationAfter{0%{transform:rotate(0)}10%{transform:rotate(0)}50%{transform:rotate(-1turn)}to{transform:rotate(-1turn)}}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin:22px 0;letter-spacing:2px;font-size:14px;word-spacing:2px}.markdown-body img{max-width:80%;border-radius:6px;display:block;margin:20px auto!important;object-fit:contain;box-shadow:0 0 16px hsla(0,0%,43.1%,.45)}.markdown-body figcaption{display:block;font-size:13px;color:#2b2b2b}.markdown-body figcaption:before{content:"";background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAGFBMVEVHcExAuPtAuPpAuPtAuPpAuPtAvPxAuPokzOX5AAAAB3RSTlMAkDLqNegkoiUM7wAAAGBJREFUKM9jYBhcgMkBTUDVBE1BeDGqEtXychNUBeXlKEqACsrLQxB8lnCQQClCiWt5OYoSiAIkJVAF5eVBqAqAShTAAs7l5ShKWMwRAmAlSArASpAVgJUkCqIAscESHwCVVjMBK9JnbQAAAABJRU5ErkJggg==);display:inline-block;width:18px;height:18px;background-size:18px;background-repeat:no-repeat;background-position:50%;margin-right:5px;margin-bottom:-5px}.markdown-body hr{border:none;border-top:1px solid #4dd0e1;margin-top:32px;margin-bottom:32px}.markdown-body del{color:#4dd0e1}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(77,208,225,.08);color:#26c6da;padding:.195em .4em}.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#4dd0e1;border-bottom:1px solid #4dd0e1;font-weight:400;text-decoration:none;margin:0 4px}.markdown-body a:active,.markdown-body a:hover{background-color:rgba(77,208,225,.1)}.markdown-body strong{color:#26c6da}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{font-style:normal;color:#4dd0e1;font-weight:700}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(77,208,225,.05)}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{margin:2em 0;padding:24px 32px;border-left:4px solid #26c6da;background:rgba(77,208,225,.15);position:relative}.markdown-body blockquote:before{content:"â";top:8px;left:8px;color:#4dd0e1;font-size:30px;line-height:1;font-weight:700;position:absolute;opacity:.7}.markdown-body blockquote:after{content:"â";font-size:30px;position:absolute;right:8px;bottom:0;color:#4dd0e1;opacity:.7}.markdown-body blockquote p{color:#595959;line-height:2}.markdown-body ol,.markdown-body ul{color:#595959;padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æèµ·Javaä¸­Mapçš„éå†ï¼Œå¾ˆå¤šäººç¬¬ä¸€ååº”è¿˜æ˜¯ï¼šÂ for (Map.Entry&lt;K,V&gt; entry : map.entrySet())Â ã€‚ä½†å…¶å®Mapéå†è—ç€å¤šç§ç©æ³•ï¼Œæœ‰çš„ä¼˜é›…ç®€æ´ï¼Œæœ‰çš„æ€§èƒ½æ‹‰æ»¡ï¼Œä»Šå¤©å’±ä»¬ç›˜ä¸€ç›˜è¿™äº›è¿›é˜¶ååŸºç¡€çš„éå†æ–¹å¼ï¼Œå‘Šåˆ«é‡å¤åˆè‡ƒè‚¿çš„ä»£ç ï½</p>
<h2 data-id="heading-0">ä¸€ã€å…ˆææ‡‚ï¼šMapéå†çš„æ ¸å¿ƒç›®æ ‡</h2>
<p>éå†Mapæœ¬è´¨æ˜¯è·å–<code>ã€Œé”®ï¼ˆKeyï¼‰ã€ã€ã€Œå€¼ï¼ˆValueï¼‰ã€æˆ–ã€Œé”®å€¼å¯¹ï¼ˆEntryï¼‰ã€</code>ï¼Œä¸åŒåœºæ™¯å¯¹åº”ä¸åŒéå†æ–¹å¼ï¼Œå…ˆä¸ŠåŸºç¡€å‡†å¤‡ä»£ç ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> java.util.HashMap;
<span class="hljs-keyword">import</span> java.util.Map;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MapTraversalDemo</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        Map&lt;String, Integer&gt; fruitPrice = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
        fruitPrice.put(<span class="hljs-string">"è‹¹æœ"</span>, <span class="hljs-number">10</span>);
        fruitPrice.put(<span class="hljs-string">"é¦™è•‰"</span>, <span class="hljs-number">5</span>);
        fruitPrice.put(<span class="hljs-string">"æ©™å­"</span>, <span class="hljs-number">8</span>);
        
        <span class="hljs-comment">// å„ç§éå†æ–¹å¼å†™åœ¨è¿™é‡Œï½</span>
    }
}
</code></pre>
<p>Â </p>
<h2 data-id="heading-1">äºŒã€å‡ ç§éå†æ–¹å¼çš„å¯¹æ¯”</h2>
<h4 data-id="heading-2">1. ä¼ ç»ŸEntrySetéå†ï¼ˆæœ€é€šç”¨ï¼‰</h4>
<p>è¿™æ˜¯æœ€åŸºç¡€ä¹Ÿæœ€å¸¸ç”¨çš„æ–¹å¼ï¼Œæ”¯æŒåŒæ—¶è·å–é”®å’Œå€¼ï¼Œå…¼å®¹æ‰€æœ‰Javaç‰ˆæœ¬ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æ–¹å¼1ï¼šæ™®é€šforå¾ªç¯+EntrySet</span>
<span class="hljs-keyword">for</span> (Map.Entry&lt;String, Integer&gt; entry : fruitPrice.entrySet()) {
    <span class="hljs-type">String</span> <span class="hljs-variable">key</span> <span class="hljs-operator">=</span> entry.getKey();
    <span class="hljs-type">Integer</span> <span class="hljs-variable">value</span> <span class="hljs-operator">=</span> entry.getValue();
    System.out.println(key + <span class="hljs-string">"ï¼š"</span> + value + <span class="hljs-string">"å…ƒ"</span>);
}
Â 
</code></pre>
<h2 data-id="heading-3">2. Lambdaè¡¨è¾¾å¼éå†ï¼ˆJava 8+ï¼Œæç®€ï¼‰</h2>
<p>Java 8å¼•å…¥çš„forEach+Lambdaï¼Œä¸€è¡Œä»£ç æå®šï¼Œå‘Šåˆ«å†—ä½™ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æ–¹å¼2ï¼šLambda+forEach</span>
fruitPrice.forEach((key, value) -&gt; System.out.println(key + <span class="hljs-string">"ï¼š"</span> + value + <span class="hljs-string">"å…ƒ"</span>));
</code></pre>
<p>Â </p>
<h4 data-id="heading-4">3. åªéå†Key/Valueï¼ˆæŒ‰éœ€é€‰æ‹©ï¼‰</h4>
<p>å¦‚æœåªéœ€è¦é”®æˆ–å€¼ï¼Œä¸ç”¨éå†EntrySetï¼Œç›´æ¥é’ˆå¯¹æ€§è·å–ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// åªéå†Key</span>
<span class="hljs-keyword">for</span> (String key : fruitPrice.keySet()) {
    System.out.println(<span class="hljs-string">"æ°´æœï¼š"</span> + key);
}

<span class="hljs-comment">// åªéå†Value</span>
<span class="hljs-keyword">for</span> (Integer value : fruitPrice.values()) {
    System.out.println(<span class="hljs-string">"ä»·æ ¼ï¼š"</span> + value + <span class="hljs-string">"å…ƒ"</span>);
}
</code></pre>
<p>Â </p>
<h4 data-id="heading-5">4. è¿­ä»£å™¨éå†ï¼ˆæ”¯æŒåˆ é™¤å…ƒç´ ï¼‰</h4>
<p>å¦‚æœéå†è¿‡ç¨‹ä¸­éœ€è¦åˆ é™¤å…ƒç´ ï¼Œè¿­ä»£å™¨æ˜¯å®‰å…¨é€‰æ‹©ï¼ˆforeachéå†åˆ é™¤ä¼šæŠ›å¼‚å¸¸ï¼‰ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æ–¹å¼4ï¼šè¿­ä»£å™¨éå†ï¼ˆæ”¯æŒåˆ é™¤ï¼‰</span>
Iterator&lt;Map.Entry&lt;String, Integer&gt;&gt; iterator = fruitPrice.entrySet().iterator();
<span class="hljs-keyword">while</span> (iterator.hasNext()) {
    Map.Entry&lt;String, Integer&gt; entry = iterator.next();
    <span class="hljs-keyword">if</span> (entry.getValue() &lt; <span class="hljs-number">8</span>) {
        iterator.remove(); <span class="hljs-comment">// å®‰å…¨åˆ é™¤ä»·æ ¼ä½äº8çš„æ°´æœ</span>
    }
}
System.out.println(<span class="hljs-string">"åˆ é™¤åçš„Mapï¼š"</span> + fruitPrice);
</code></pre>
<p>Â </p>
<h2 data-id="heading-6">ä¸‰ã€é¿å‘æé†’</h2>
<p>1.Â éå†è¿‡ç¨‹ä¸­ä¿®æ”¹Mapï¼ˆå¦‚put/removeï¼‰ï¼šé™¤äº†è¿­ä»£å™¨çš„removeæ–¹æ³•ï¼Œå…¶ä»–æ–¹å¼å¯èƒ½è§¦å‘Â ConcurrentModificationExceptionÂ ï¼›</p>
<p>2.Â æ€§èƒ½ä¼˜å…ˆçº§ï¼šEntrySetéå† &gt; åˆ†åˆ«éå†Key+getValueï¼ˆåè€…ä¼šé‡å¤æŸ¥è¯¢Mapï¼‰ï¼›</p>
<p>3.Â Lambdaéå†è™½ç„¶ç®€æ´ï¼Œä½†æ— æ³•åœ¨å†…éƒ¨ä½¿ç”¨break/continueç»ˆæ­¢éå†ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vueç»„ä»¶ç¼“å­˜ç»ˆææŒ‡å—ï¼škeep-aliveåŸç†ä¸åŠ¨æ€æ›´æ–°å®æˆ˜]]></title>    <link>https://juejin.cn/post/7582846276505501734</link>    <guid>https://juejin.cn/post/7582846276505501734</guid>    <pubDate>2025-12-12T13:48:09.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582846276505501734" data-draft-id="7582777037864337458" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vueç»„ä»¶ç¼“å­˜ç»ˆææŒ‡å—ï¼škeep-aliveåŸç†ä¸åŠ¨æ€æ›´æ–°å®æˆ˜"/> <meta itemprop="keywords" content="Vue.js"/> <meta itemprop="datePublished" content="2025-12-12T13:48:09.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åŒ—è¾°alk"/> <meta itemprop="url" content="https://juejin.cn/user/1772855673241352"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vueç»„ä»¶ç¼“å­˜ç»ˆææŒ‡å—ï¼škeep-aliveåŸç†ä¸åŠ¨æ€æ›´æ–°å®æˆ˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1772855673241352/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åŒ—è¾°alk
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-12T13:48:09.000Z" title="Fri Dec 12 2025 13:48:09 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€ä¸ºä»€ä¹ˆéœ€è¦ç»„ä»¶ç¼“å­˜ï¼Ÿ</h2>
<p>åœ¨Vueå•é¡µåº”ç”¨å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šé‡åˆ°è¿™æ ·çš„åœºæ™¯ï¼šç”¨æˆ·åœ¨æ•°æ®ç­›é€‰é¡µé¢è®¾ç½®äº†å¤æ‚çš„æŸ¥è¯¢æ¡ä»¶ï¼Œç„¶åè¿›å…¥è¯¦æƒ…é¡µæŸ¥çœ‹ï¼Œå½“è¿”å›æ—¶å¸Œæœ›ä¹‹å‰çš„ç­›é€‰æ¡ä»¶è¿˜èƒ½ä¿ç•™ã€‚å¦‚æœæ¯æ¬¡åˆ‡æ¢è·¯ç”±éƒ½é‡æ–°æ¸²æŸ“ç»„ä»¶ï¼Œä¼šå¯¼è‡´ç”¨æˆ·ä½“éªŒä¸‹é™ã€æ•°æ®ä¸¢å¤±ã€æ€§èƒ½æŸè€—ç­‰é—®é¢˜ã€‚</p>
<p><strong>ç»„ä»¶ç¼“å­˜çš„æ ¸å¿ƒä»·å€¼ï¼š</strong></p>
<ol>
<li>
<ol>
<li>ä¿æŒç»„ä»¶çŠ¶æ€ï¼Œé¿å…é‡å¤æ¸²æŸ“</li>
</ol>
</li>
<li>
<ol start="2">
<li>æå‡åº”ç”¨æ€§èƒ½ï¼Œå‡å°‘ä¸å¿…è¦çš„DOMæ“ä½œ</li>
</ol>
</li>
<li>
<ol start="3">
<li>æ”¹å–„ç”¨æˆ·ä½“éªŒï¼Œç»´æŒç”¨æˆ·æ“ä½œä¸Šä¸‹æ–‡</li>
</ol>
</li>
</ol>
<h2 data-id="heading-1">äºŒã€Vueçš„ç¼“å­˜ç¥å™¨ï¼škeep-alive</h2>
<h3 data-id="heading-2">2.1 keep-aliveåŸºç¡€ç”¨æ³•</h3>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
Â Â <span class="hljs-tag">&lt;<span class="hljs-name">div</span>Â <span class="hljs-attr">id</span>=<span class="hljs-string">"app"</span>&gt;</span>
Â Â Â Â <span class="hljs-comment">&lt;!--Â åŸºæœ¬ç”¨æ³•Â --&gt;</span>
Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">keep-alive</span>&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">component</span>Â <span class="hljs-attr">:is</span>=<span class="hljs-string">"currentComponent"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">component</span>&gt;</span>
Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">keep-alive</span>&gt;</span>
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">&lt;!--Â ç»“åˆrouter-viewÂ --&gt;</span>
Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">keep-alive</span>&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">router-view</span>Â <span class="hljs-attr">v-if</span>=<span class="hljs-string">"$route.meta.keepAlive"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">router-view</span>&gt;</span>
Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">keep-alive</span>&gt;</span>
Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">router-view</span>Â <span class="hljs-attr">v-if</span>=<span class="hljs-string">"!$route.meta.keepAlive"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">router-view</span>&gt;</span>
Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">export</span>Â <span class="hljs-keyword">default</span>Â {
Â Â <span class="hljs-title function_">data</span>(<span class="hljs-params"/>)Â {
Â Â Â Â <span class="hljs-keyword">return</span>Â {
Â Â Â Â Â Â <span class="hljs-attr">currentComponent</span>:Â <span class="hljs-string">'UserList'</span>
Â Â Â Â }
Â Â }
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<h3 data-id="heading-3">2.2 keep-aliveçš„ç”Ÿå‘½å‘¨æœŸå˜åŒ–</h3>
<p>å½“ç»„ä»¶è¢«ç¼“å­˜æ—¶ï¼Œæ­£å¸¸çš„ç”Ÿå‘½å‘¨æœŸä¼šå‘ç”Ÿå˜åŒ–ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">export</span>Â <span class="hljs-keyword">default</span>Â {
Â Â <span class="hljs-attr">name</span>:Â <span class="hljs-string">'UserList'</span>,
Â Â 
Â Â <span class="hljs-comment">//Â æ­£å¸¸ç”Ÿå‘½å‘¨æœŸï¼ˆæœªç¼“å­˜æ—¶ï¼‰</span>
Â Â <span class="hljs-title function_">created</span>(<span class="hljs-params"/>)Â {
Â Â Â Â <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç»„ä»¶åˆ›å»º'</span>)
Â Â Â Â <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">loadData</span>()
Â Â },
Â Â 
Â Â <span class="hljs-title function_">mounted</span>(<span class="hljs-params"/>)Â {
Â Â Â Â <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç»„ä»¶æŒ‚è½½'</span>)
Â Â },
Â Â 
Â Â <span class="hljs-title function_">destroyed</span>(<span class="hljs-params"/>)Â {
Â Â Â Â <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç»„ä»¶é”€æ¯'</span>)
Â Â },
Â Â 
Â Â <span class="hljs-comment">//Â ç¼“å­˜ç‰¹æœ‰ç”Ÿå‘½å‘¨æœŸ</span>
Â Â <span class="hljs-title function_">activated</span>(<span class="hljs-params"/>)Â {
Â Â Â Â <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç»„ä»¶è¢«æ¿€æ´»ï¼ˆè¿›å…¥ç¼“å­˜ç»„ä»¶ï¼‰'</span>)
Â Â Â Â <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">refreshData</span>()Â <span class="hljs-comment">//Â é‡æ–°è·å–æ•°æ®</span>
Â Â },
Â Â 
Â Â <span class="hljs-title function_">deactivated</span>(<span class="hljs-params"/>)Â {
Â Â Â Â <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç»„ä»¶è¢«åœç”¨ï¼ˆç¦»å¼€ç¼“å­˜ç»„ä»¶ï¼‰'</span>)
Â Â Â Â <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">saveState</span>()Â <span class="hljs-comment">//Â ä¿å­˜å½“å‰çŠ¶æ€</span>
Â Â }
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p><strong>ç”Ÿå‘½å‘¨æœŸæµç¨‹å›¾ï¼š</strong></p>
<pre><code class="hljs">é¦–æ¬¡è¿›å…¥ç»„ä»¶ï¼š
createdÂ â†’Â mountedÂ â†’Â activated

ç¦»å¼€ç¼“å­˜ç»„ä»¶ï¼š
deactivated

å†æ¬¡è¿›å…¥ç¼“å­˜ç»„ä»¶ï¼š
activatedï¼ˆè·³è¿‡createdå’Œmountedï¼‰

ç»„ä»¶è¢«é”€æ¯ï¼š
deactivatedÂ â†’Â destroyedï¼ˆå¦‚æœå®Œå…¨é”€æ¯ï¼‰
</code></pre>
<h2 data-id="heading-4">ä¸‰ã€é«˜çº§ç¼“å­˜ç­–ç•¥</h2>
<h3 data-id="heading-5">3.1 æ¡ä»¶ç¼“å­˜ä¸æ’é™¤ç¼“å­˜</h3>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
Â Â <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
Â Â Â Â <span class="hljs-comment">&lt;!--Â ç¼“å­˜ç‰¹å®šç»„ä»¶Â --&gt;</span>
Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">keep-alive</span>Â <span class="hljs-attr">:include</span>=<span class="hljs-string">"cachedComponents"</span>Â <span class="hljs-attr">:exclude</span>=<span class="hljs-string">"excludedComponents"</span>Â <span class="hljs-attr">:max</span>=<span class="hljs-string">"5"</span>&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">router-view</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">router-view</span>&gt;</span>
Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">keep-alive</span>&gt;</span>
Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">export</span>Â <span class="hljs-keyword">default</span>Â {
Â Â <span class="hljs-title function_">data</span>(<span class="hljs-params"/>)Â {
Â Â Â Â <span class="hljs-keyword">return</span>Â {
Â Â Â Â Â Â <span class="hljs-comment">//Â åªç¼“å­˜è¿™äº›ç»„ä»¶ï¼ˆåŸºäºç»„ä»¶nameï¼‰</span>
Â Â Â Â Â Â <span class="hljs-attr">cachedComponents</span>:Â [<span class="hljs-string">'UserList'</span>,Â <span class="hljs-string">'ProductList'</span>,Â <span class="hljs-string">'OrderList'</span>],
Â Â Â Â Â Â 
Â Â Â Â Â Â <span class="hljs-comment">//Â ä¸ç¼“å­˜è¿™äº›ç»„ä»¶</span>
Â Â Â Â Â Â <span class="hljs-attr">excludedComponents</span>:Â [<span class="hljs-string">'Login'</span>,Â <span class="hljs-string">'Register'</span>]
Â Â Â Â }
Â Â }
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<h3 data-id="heading-6">3.2 åŠ¨æ€è·¯ç”±ç¼“å­˜æ–¹æ¡ˆ</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">//Â router/index.js</span>
<span class="hljs-keyword">const</span>Â routesÂ =Â [
Â Â {
Â Â Â Â <span class="hljs-attr">path</span>:Â <span class="hljs-string">'/user/list'</span>,
Â Â Â Â <span class="hljs-attr">name</span>:Â <span class="hljs-string">'UserList'</span>,
Â Â Â Â <span class="hljs-attr">component</span>:Â <span class="hljs-function">()Â =&gt;</span>Â <span class="hljs-keyword">import</span>(<span class="hljs-string">'@/views/UserList.vue'</span>),
Â Â Â Â <span class="hljs-attr">meta</span>:Â {
Â Â Â Â Â Â <span class="hljs-attr">title</span>:Â <span class="hljs-string">'ç”¨æˆ·åˆ—è¡¨'</span>,
Â Â Â Â Â Â <span class="hljs-attr">keepAlive</span>:Â <span class="hljs-literal">true</span>,Â <span class="hljs-comment">//Â éœ€è¦ç¼“å­˜</span>
Â Â Â Â Â Â <span class="hljs-attr">isRefresh</span>:Â <span class="hljs-literal">true</span>Â Â <span class="hljs-comment">//Â æ˜¯å¦éœ€è¦åˆ·æ–°</span>
Â Â Â Â }
Â Â },
Â Â {
Â Â Â Â <span class="hljs-attr">path</span>:Â <span class="hljs-string">'/user/detail/:id'</span>,
Â Â Â Â <span class="hljs-attr">name</span>:Â <span class="hljs-string">'UserDetail'</span>,
Â Â Â Â <span class="hljs-attr">component</span>:Â <span class="hljs-function">()Â =&gt;</span>Â <span class="hljs-keyword">import</span>(<span class="hljs-string">'@/views/UserDetail.vue'</span>),
Â Â Â Â <span class="hljs-attr">meta</span>:Â {
Â Â Â Â Â Â <span class="hljs-attr">title</span>:Â <span class="hljs-string">'ç”¨æˆ·è¯¦æƒ…'</span>,
Â Â Â Â Â Â <span class="hljs-attr">keepAlive</span>:Â <span class="hljs-literal">false</span>Â <span class="hljs-comment">//Â ä¸éœ€è¦ç¼“å­˜</span>
Â Â Â Â }
Â Â }
]

<span class="hljs-comment">//Â App.vue</span>
&lt;template&gt;
Â Â <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>Â <span class="hljs-attr">id</span>=<span class="hljs-string">"app"</span>&gt;</span>
Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">keep-alive</span>&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">router-view</span>Â <span class="hljs-attr">v-if</span>=<span class="hljs-string">"$route.meta.keepAlive"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">router-view</span>&gt;</span>
Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">keep-alive</span>&gt;</span>
Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">router-view</span>Â <span class="hljs-attr">v-if</span>=<span class="hljs-string">"!$route.meta.keepAlive"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">router-view</span>&gt;</span>
Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
&lt;/template&gt;
</code></pre>
<h2 data-id="heading-7">å››ã€ç¼“å­˜åçš„æ•°æ®æ›´æ–°ç­–ç•¥</h2>
<h3 data-id="heading-8">4.1 æ–¹æ¡ˆä¸€ï¼šä½¿ç”¨activatedé’©å­</h3>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">export</span>Â <span class="hljs-keyword">default</span>Â {
Â Â <span class="hljs-attr">name</span>:Â <span class="hljs-string">'ProductList'</span>,
Â Â <span class="hljs-title function_">data</span>(<span class="hljs-params"/>)Â {
Â Â Â Â <span class="hljs-keyword">return</span>Â {
Â Â Â Â Â Â <span class="hljs-attr">products</span>:Â [],
Â Â Â Â Â Â <span class="hljs-attr">filterParams</span>:Â {
Â Â Â Â Â Â Â Â <span class="hljs-attr">category</span>:Â <span class="hljs-string">''</span>,
Â Â Â Â Â Â Â Â <span class="hljs-attr">priceRange</span>:Â [<span class="hljs-number">0</span>,Â <span class="hljs-number">1000</span>],
Â Â Â Â Â Â Â Â <span class="hljs-attr">sortBy</span>:Â <span class="hljs-string">'createdAt'</span>
Â Â Â Â Â Â },
Â Â Â Â Â Â <span class="hljs-attr">lastUpdateTime</span>:Â <span class="hljs-literal">null</span>
Â Â Â Â }
Â Â },
Â Â 
Â Â <span class="hljs-title function_">activated</span>(<span class="hljs-params"/>)Â {
Â Â Â Â <span class="hljs-comment">//Â æ£€æŸ¥æ˜¯å¦éœ€è¦åˆ·æ–°æ•°æ®ï¼ˆæ¯”å¦‚è¶…è¿‡5åˆ†é’Ÿï¼‰</span>
Â Â Â Â <span class="hljs-keyword">const</span>Â nowÂ =Â <span class="hljs-keyword">new</span>Â <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">getTime</span>()
Â Â Â Â <span class="hljs-keyword">if</span>Â (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">lastUpdateTime</span>Â ||Â (nowÂ -Â <span class="hljs-variable language_">this</span>.<span class="hljs-property">lastUpdateTime</span>)Â &gt;Â <span class="hljs-number">5</span>Â *Â <span class="hljs-number">60</span>Â *Â <span class="hljs-number">1000</span>)Â {
Â Â Â Â Â Â <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">refreshData</span>()
Â Â Â Â }Â <span class="hljs-keyword">else</span>Â {
Â Â Â Â Â Â <span class="hljs-comment">//Â ä½¿ç”¨ç¼“å­˜æ•°æ®ï¼Œä½†æ›´æ–°ä¸€äº›å®æ—¶æ€§è¦æ±‚é«˜çš„å†…å®¹</span>
Â Â Â Â Â Â <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">updateRealTimeData</span>()
Â Â Â Â }
Â Â },
Â Â 
Â Â <span class="hljs-attr">methods</span>:Â {
Â Â Â Â <span class="hljs-keyword">async</span>Â <span class="hljs-title function_">refreshData</span>(<span class="hljs-params"/>)Â {
Â Â Â Â Â Â <span class="hljs-keyword">try</span>Â {
Â Â Â Â Â Â Â Â <span class="hljs-keyword">const</span>Â responseÂ =Â <span class="hljs-keyword">await</span>Â <span class="hljs-variable language_">this</span>.<span class="hljs-property">$api</span>.<span class="hljs-title function_">getProducts</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">filterParams</span>)
Â Â Â Â Â Â Â Â <span class="hljs-variable language_">this</span>.<span class="hljs-property">products</span>Â =Â response.<span class="hljs-property">data</span>
Â Â Â Â Â Â Â Â <span class="hljs-variable language_">this</span>.<span class="hljs-property">lastUpdateTime</span>Â =Â <span class="hljs-keyword">new</span>Â <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">getTime</span>()
Â Â Â Â Â Â }Â <span class="hljs-keyword">catch</span>Â (error)Â {
Â Â Â Â Â Â Â Â <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'æ•°æ®åˆ·æ–°å¤±è´¥:'</span>,Â error)
Â Â Â Â Â Â }
Â Â Â Â },
Â Â Â Â 
Â Â Â Â <span class="hljs-title function_">updateRealTimeData</span>(<span class="hljs-params"/>)Â {
Â Â Â Â Â Â <span class="hljs-comment">//Â åªæ›´æ–°åº“å­˜ã€ä»·æ ¼ç­‰å®æ—¶æ•°æ®</span>
Â Â Â Â Â Â <span class="hljs-variable language_">this</span>.<span class="hljs-property">products</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-keyword">async</span>Â (product)Â =&gt;Â {
Â Â Â Â Â Â Â Â <span class="hljs-keyword">const</span>Â stockInfoÂ =Â <span class="hljs-keyword">await</span>Â <span class="hljs-variable language_">this</span>.<span class="hljs-property">$api</span>.<span class="hljs-title function_">getProductStock</span>(product.<span class="hljs-property">id</span>)
Â Â Â Â Â Â Â Â product.<span class="hljs-property">stock</span>Â =Â stockInfo.<span class="hljs-property">quantity</span>
Â Â Â Â Â Â Â Â product.<span class="hljs-property">price</span>Â =Â stockInfo.<span class="hljs-property">price</span>
Â Â Â Â Â Â })
Â Â Â Â }
Â Â }
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<h3 data-id="heading-9">4.2 æ–¹æ¡ˆäºŒï¼šäº‹ä»¶æ€»çº¿æ›´æ–°</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">//Â utils/eventBus.js</span>
<span class="hljs-keyword">import</span>Â <span class="hljs-title class_">Vue</span>Â <span class="hljs-keyword">from</span>Â <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">export</span>Â <span class="hljs-keyword">default</span>Â <span class="hljs-keyword">new</span>Â <span class="hljs-title class_">Vue</span>()

<span class="hljs-comment">//Â ProductList.vueï¼ˆç¼“å­˜ç»„ä»¶ï¼‰</span>
&lt;script&gt;
<span class="hljs-keyword">import</span>Â eventBusÂ <span class="hljs-keyword">from</span>Â <span class="hljs-string">'@/utils/eventBus'</span>

<span class="hljs-keyword">export</span>Â <span class="hljs-keyword">default</span>Â {
Â Â <span class="hljs-title function_">created</span>(<span class="hljs-params"/>)Â {
Â Â Â Â <span class="hljs-comment">//Â ç›‘å¬æ•°æ®æ›´æ–°äº‹ä»¶</span>
Â Â Â Â eventBus.$on(<span class="hljs-string">'refresh-product-list'</span>,Â <span class="hljs-function">(<span class="hljs-params">params</span>)Â =&gt;</span>Â {
Â Â Â Â Â Â <span class="hljs-keyword">if</span>Â (<span class="hljs-variable language_">this</span>.<span class="hljs-property">filterParams</span>.<span class="hljs-property">category</span>Â !==Â params.<span class="hljs-property">category</span>)Â {
Â Â Â Â Â Â Â Â <span class="hljs-variable language_">this</span>.<span class="hljs-property">filterParams</span>Â =Â {Â ...paramsÂ }
Â Â Â Â Â Â Â Â <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">refreshData</span>()
Â Â Â Â Â Â }
Â Â Â Â })
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">//Â ç›‘å¬å¼ºåˆ¶åˆ·æ–°äº‹ä»¶</span>
Â Â Â Â eventBus.$on(<span class="hljs-string">'force-refresh'</span>,Â <span class="hljs-function">()Â =&gt;</span>Â {
Â Â Â Â Â Â <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">refreshData</span>()
Â Â Â Â })
Â Â },
Â Â 
Â Â <span class="hljs-title function_">deactivated</span>(<span class="hljs-params"/>)Â {
Â Â Â Â <span class="hljs-comment">//Â ç¦»å¼€æ—¶ç§»é™¤äº‹ä»¶ç›‘å¬ï¼Œé¿å…å†…å­˜æ³„æ¼</span>
Â Â Â Â eventBus.$off(<span class="hljs-string">'refresh-product-list'</span>)
Â Â Â Â eventBus.$off(<span class="hljs-string">'force-refresh'</span>)
Â Â },
Â Â 
Â Â <span class="hljs-attr">methods</span>:Â {
Â Â Â Â <span class="hljs-title function_">handleSearch</span>(<span class="hljs-params">params</span>)Â {
Â Â Â Â Â Â <span class="hljs-comment">//Â è§¦å‘æœç´¢æ—¶ï¼Œé€šçŸ¥å…¶ä»–ç»„ä»¶</span>
Â Â Â Â Â Â eventBus.$emit(<span class="hljs-string">'search-params-changed'</span>,Â params)
Â Â Â Â }
Â Â }
}
&lt;/script&gt;
</code></pre>
<h3 data-id="heading-10">4.3 æ–¹æ¡ˆä¸‰ï¼šVuexçŠ¶æ€ç®¡ç† + ç›‘å¬</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">//Â store/modules/product.js</span>
<span class="hljs-keyword">export</span>Â <span class="hljs-keyword">default</span>Â {
Â Â <span class="hljs-attr">state</span>:Â {
Â Â Â Â <span class="hljs-attr">list</span>:Â [],
Â Â Â Â <span class="hljs-attr">filterParams</span>:Â {},
Â Â Â Â <span class="hljs-attr">lastFetchTime</span>:Â <span class="hljs-literal">null</span>
Â Â },
Â Â 
Â Â <span class="hljs-attr">mutations</span>:Â {
Â Â Â Â <span class="hljs-title function_">SET_PRODUCT_LIST</span>(<span class="hljs-params">state,Â products</span>)Â {
Â Â Â Â Â Â state.<span class="hljs-property">list</span>Â =Â products
Â Â Â Â Â Â state.<span class="hljs-property">lastFetchTime</span>Â =Â <span class="hljs-keyword">new</span>Â <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">getTime</span>()
Â Â Â Â },
Â Â Â Â 
Â Â Â Â <span class="hljs-title function_">UPDATE_FILTER_PARAMS</span>(<span class="hljs-params">state,Â params</span>)Â {
Â Â Â Â Â Â state.<span class="hljs-property">filterParams</span>Â =Â {Â ...state.<span class="hljs-property">filterParams</span>,Â ...paramsÂ }
Â Â Â Â }
Â Â },
Â Â 
Â Â <span class="hljs-attr">actions</span>:Â {
Â Â Â Â <span class="hljs-keyword">async</span>Â <span class="hljs-title function_">fetchProducts</span>(<span class="hljs-params">{Â commit,Â stateÂ },Â forceRefreshÂ =Â <span class="hljs-literal">false</span></span>)Â {
Â Â Â Â Â Â <span class="hljs-comment">//Â å¦‚æœä¸æ˜¯å¼ºåˆ¶åˆ·æ–°ä¸”æ•°æ®åœ¨æœ‰æ•ˆæœŸå†…ï¼Œåˆ™ä½¿ç”¨ç¼“å­˜</span>
Â Â Â Â Â Â <span class="hljs-keyword">const</span>Â nowÂ =Â <span class="hljs-keyword">new</span>Â <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">getTime</span>()
Â Â Â Â Â Â <span class="hljs-keyword">if</span>Â (!forceRefreshÂ &amp;&amp;Â state.<span class="hljs-property">lastFetchTime</span>Â &amp;&amp;Â 
Â Â Â Â Â Â Â Â Â Â (nowÂ -Â state.<span class="hljs-property">lastFetchTime</span>)Â &lt;Â <span class="hljs-number">10</span>Â *Â <span class="hljs-number">60</span>Â *Â <span class="hljs-number">1000</span>)Â {
Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>
Â Â Â Â Â Â }
Â Â Â Â Â Â 
Â Â Â Â Â Â <span class="hljs-keyword">const</span>Â responseÂ =Â <span class="hljs-keyword">await</span>Â api.<span class="hljs-title function_">getProducts</span>(state.<span class="hljs-property">filterParams</span>)
Â Â Â Â Â Â <span class="hljs-title function_">commit</span>(<span class="hljs-string">'SET_PRODUCT_LIST'</span>,Â response.<span class="hljs-property">data</span>)
Â Â Â Â }
Â Â }
}

<span class="hljs-comment">//Â ProductList.vue</span>
&lt;script&gt;
<span class="hljs-keyword">import</span>Â {Â mapState,Â mapActionsÂ }Â <span class="hljs-keyword">from</span>Â <span class="hljs-string">'vuex'</span>

<span class="hljs-keyword">export</span>Â <span class="hljs-keyword">default</span>Â {
Â Â <span class="hljs-attr">computed</span>:Â {
Â Â Â Â ...<span class="hljs-title function_">mapState</span>(<span class="hljs-string">'product'</span>,Â [<span class="hljs-string">'list'</span>,Â <span class="hljs-string">'filterParams'</span>])
Â Â },
Â Â 
Â Â <span class="hljs-title function_">activated</span>(<span class="hljs-params"/>)Â {
Â Â Â Â <span class="hljs-comment">//Â ç›‘å¬VuexçŠ¶æ€å˜åŒ–</span>
Â Â Â Â <span class="hljs-variable language_">this</span>.<span class="hljs-property">unwatch</span>Â =Â <span class="hljs-variable language_">this</span>.<span class="hljs-property">$store</span>.<span class="hljs-title function_">watch</span>(
Â Â Â Â Â Â <span class="hljs-function">(<span class="hljs-params">state</span>)Â =&gt;</span>Â state.<span class="hljs-property">product</span>.<span class="hljs-property">filterParams</span>,
Â Â Â Â Â Â <span class="hljs-function">(<span class="hljs-params">newParams,Â oldParams</span>)Â =&gt;</span>Â {
Â Â Â Â Â Â Â Â <span class="hljs-keyword">if</span>Â (<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(newParams)Â !==Â <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(oldParams))Â {
Â Â Â Â Â Â Â Â Â Â <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">fetchProducts</span>()
Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â }
Â Â Â Â )
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">//Â æ£€æŸ¥æ˜¯å¦éœ€è¦æ›´æ–°</span>
Â Â Â Â <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">checkAndUpdate</span>()
Â Â },
Â Â 
Â Â <span class="hljs-title function_">deactivated</span>(<span class="hljs-params"/>)Â {
Â Â Â Â <span class="hljs-comment">//Â å–æ¶ˆç›‘å¬</span>
Â Â Â Â <span class="hljs-keyword">if</span>Â (<span class="hljs-variable language_">this</span>.<span class="hljs-property">unwatch</span>)Â {
Â Â Â Â Â Â <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">unwatch</span>()
Â Â Â Â }
Â Â },
Â Â 
Â Â <span class="hljs-attr">methods</span>:Â {
Â Â Â Â ...<span class="hljs-title function_">mapActions</span>(<span class="hljs-string">'product'</span>,Â [<span class="hljs-string">'fetchProducts'</span>]),
Â Â Â Â 
Â Â Â Â <span class="hljs-title function_">checkAndUpdate</span>(<span class="hljs-params"/>)Â {
Â Â Â Â Â Â <span class="hljs-keyword">const</span>Â lastFetchTimeÂ =Â <span class="hljs-variable language_">this</span>.<span class="hljs-property">$store</span>.<span class="hljs-property">state</span>.<span class="hljs-property">product</span>.<span class="hljs-property">lastFetchTime</span>
Â Â Â Â Â Â <span class="hljs-keyword">const</span>Â nowÂ =Â <span class="hljs-keyword">new</span>Â <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">getTime</span>()
Â Â Â Â Â Â 
Â Â Â Â Â Â <span class="hljs-keyword">if</span>Â (!lastFetchTimeÂ ||Â (nowÂ -Â lastFetchTime)Â &gt;Â <span class="hljs-number">10</span>Â *Â <span class="hljs-number">60</span>Â *Â <span class="hljs-number">1000</span>)Â {
Â Â Â Â Â Â Â Â <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">fetchProducts</span>()
Â Â Â Â Â Â }
Â Â Â Â },
Â Â Â Â 
Â Â Â Â <span class="hljs-title function_">handleFilterChange</span>(<span class="hljs-params">params</span>)Â {
Â Â Â Â Â Â <span class="hljs-variable language_">this</span>.<span class="hljs-property">$store</span>.<span class="hljs-title function_">commit</span>(<span class="hljs-string">'product/UPDATE_FILTER_PARAMS'</span>,Â params)
Â Â Â Â }
Â Â }
}
&lt;/script&gt;
</code></pre>
<h2 data-id="heading-11">äº”ã€å®æˆ˜ï¼šåŠ¨æ€ç¼“å­˜ç®¡ç†</h2>
<h3 data-id="heading-12">5.1 ç¼“å­˜ç®¡ç†å™¨å®ç°</h3>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!--Â components/CacheManager.vueÂ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
Â Â <span class="hljs-tag">&lt;<span class="hljs-name">div</span>Â <span class="hljs-attr">class</span>=<span class="hljs-string">"cache-manager"</span>&gt;</span>
Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">keep-alive</span>Â <span class="hljs-attr">:include</span>=<span class="hljs-string">"dynamicInclude"</span>&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">router-view</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">router-view</span>&gt;</span>
Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">keep-alive</span>&gt;</span>
Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">export</span>Â <span class="hljs-keyword">default</span>Â {
Â Â <span class="hljs-attr">name</span>:Â <span class="hljs-string">'CacheManager'</span>,
Â Â 
Â Â <span class="hljs-title function_">data</span>(<span class="hljs-params"/>)Â {
Â Â Â Â <span class="hljs-keyword">return</span>Â {
Â Â Â Â Â Â <span class="hljs-attr">cachedViews</span>:Â [],Â <span class="hljs-comment">//Â ç¼“å­˜çš„ç»„ä»¶ååˆ—è¡¨</span>
Â Â Â Â Â Â <span class="hljs-attr">maxCacheCount</span>:Â <span class="hljs-number">10</span>Â <span class="hljs-comment">//Â æœ€å¤§ç¼“å­˜æ•°é‡</span>
Â Â Â Â }
Â Â },
Â Â 
Â Â <span class="hljs-attr">computed</span>:Â {
Â Â Â Â <span class="hljs-title function_">dynamicInclude</span>(<span class="hljs-params"/>)Â {
Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â <span class="hljs-variable language_">this</span>.<span class="hljs-property">cachedViews</span>
Â Â Â Â }
Â Â },
Â Â 
Â Â <span class="hljs-title function_">created</span>(<span class="hljs-params"/>)Â {
Â Â Â Â <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">initCache</span>()
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">//Â ç›‘å¬è·¯ç”±å˜åŒ–</span>
Â Â Â Â <span class="hljs-variable language_">this</span>.$watch(
Â Â Â Â Â Â <span class="hljs-function">()Â =&gt;</span>Â <span class="hljs-variable language_">this</span>.<span class="hljs-property">$route</span>,
Â Â Â Â Â Â <span class="hljs-function">(<span class="hljs-params">to,Â <span class="hljs-keyword">from</span></span>)Â =&gt;</span>Â {
Â Â Â Â Â Â Â Â <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">addCache</span>(to)
Â Â Â Â Â Â Â Â <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">manageCacheSize</span>()
Â Â Â Â Â Â },
Â Â Â Â Â Â {Â <span class="hljs-attr">immediate</span>:Â <span class="hljs-literal">true</span>Â }
Â Â Â Â )
Â Â },
Â Â 
Â Â <span class="hljs-attr">methods</span>:Â {
Â Â Â Â <span class="hljs-title function_">initCache</span>(<span class="hljs-params"/>)Â {
Â Â Â Â Â Â <span class="hljs-comment">//Â ä»localStorageæ¢å¤ç¼“å­˜è®¾ç½®</span>
Â Â Â Â Â Â <span class="hljs-keyword">const</span>Â savedCacheÂ =Â <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">'vue-cache-views'</span>)
Â Â Â Â Â Â <span class="hljs-keyword">if</span>Â (savedCache)Â {
Â Â Â Â Â Â Â Â <span class="hljs-variable language_">this</span>.<span class="hljs-property">cachedViews</span>Â =Â <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(savedCache)
Â Â Â Â Â Â }
Â Â Â Â },
Â Â Â Â 
Â Â Â Â <span class="hljs-title function_">addCache</span>(<span class="hljs-params">route</span>)Â {
Â Â Â Â Â Â <span class="hljs-keyword">if</span>Â (route.<span class="hljs-property">meta</span>Â &amp;&amp;Â route.<span class="hljs-property">meta</span>.<span class="hljs-property">keepAlive</span>Â &amp;&amp;Â route.<span class="hljs-property">name</span>)Â {
Â Â Â Â Â Â Â Â <span class="hljs-keyword">const</span>Â cacheNameÂ =Â <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getCacheName</span>(route)
Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â <span class="hljs-keyword">if</span>Â (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">cachedViews</span>.<span class="hljs-title function_">includes</span>(cacheName))Â {
Â Â Â Â Â Â Â Â Â Â <span class="hljs-variable language_">this</span>.<span class="hljs-property">cachedViews</span>.<span class="hljs-title function_">push</span>(cacheName)
Â Â Â Â Â Â Â Â Â Â <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">saveCacheToStorage</span>()
Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â }
Â Â Â Â },
Â Â Â Â 
Â Â Â Â <span class="hljs-title function_">removeCache</span>(<span class="hljs-params">routeName</span>)Â {
Â Â Â Â Â Â <span class="hljs-keyword">const</span>Â indexÂ =Â <span class="hljs-variable language_">this</span>.<span class="hljs-property">cachedViews</span>.<span class="hljs-title function_">indexOf</span>(routeName)
Â Â Â Â Â Â <span class="hljs-keyword">if</span>Â (indexÂ &gt;Â -<span class="hljs-number">1</span>)Â {
Â Â Â Â Â Â Â Â <span class="hljs-variable language_">this</span>.<span class="hljs-property">cachedViews</span>.<span class="hljs-title function_">splice</span>(index,Â <span class="hljs-number">1</span>)
Â Â Â Â Â Â Â Â <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">saveCacheToStorage</span>()
Â Â Â Â Â Â }
Â Â Â Â },
Â Â Â Â 
Â Â Â Â <span class="hljs-title function_">clearCache</span>(<span class="hljs-params"/>)Â {
Â Â Â Â Â Â <span class="hljs-variable language_">this</span>.<span class="hljs-property">cachedViews</span>Â =Â []
Â Â Â Â Â Â <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">saveCacheToStorage</span>()
Â Â Â Â },
Â Â Â Â 
Â Â Â Â <span class="hljs-title function_">refreshCache</span>(<span class="hljs-params">routeName</span>)Â {
Â Â Â Â Â Â <span class="hljs-comment">//Â åˆ·æ–°ç‰¹å®šç¼“å­˜</span>
Â Â Â Â Â Â <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">removeCache</span>(routeName)
Â Â Â Â Â Â <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">()Â =&gt;</span>Â {
Â Â Â Â Â Â Â Â <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">addCache</span>({Â <span class="hljs-attr">name</span>:Â routeName,Â <span class="hljs-attr">meta</span>:Â {Â <span class="hljs-attr">keepAlive</span>:Â <span class="hljs-literal">true</span>Â }Â })
Â Â Â Â Â Â },Â <span class="hljs-number">0</span>)
Â Â Â Â },
Â Â Â Â 
Â Â Â Â <span class="hljs-title function_">manageCacheSize</span>(<span class="hljs-params"/>)Â {
Â Â Â Â Â Â <span class="hljs-comment">//Â LRUï¼ˆæœ€è¿‘æœ€å°‘ä½¿ç”¨ï¼‰ç¼“å­˜ç­–ç•¥</span>
Â Â Â Â Â Â <span class="hljs-keyword">if</span>Â (<span class="hljs-variable language_">this</span>.<span class="hljs-property">cachedViews</span>.<span class="hljs-property">length</span>Â &gt;Â <span class="hljs-variable language_">this</span>.<span class="hljs-property">maxCacheCount</span>)Â {
Â Â Â Â Â Â Â Â <span class="hljs-variable language_">this</span>.<span class="hljs-property">cachedViews</span>.<span class="hljs-title function_">shift</span>()Â <span class="hljs-comment">//Â ç§»é™¤æœ€æ—§çš„ç¼“å­˜</span>
Â Â Â Â Â Â Â Â <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">saveCacheToStorage</span>()
Â Â Â Â Â Â }
Â Â Â Â },
Â Â Â Â 
Â Â Â Â <span class="hljs-title function_">getCacheName</span>(<span class="hljs-params">route</span>)Â {
Â Â Â Â Â Â <span class="hljs-comment">//Â ä¸ºåŠ¨æ€è·¯ç”±ç”Ÿæˆå”¯ä¸€çš„ç¼“å­˜key</span>
Â Â Â Â Â Â <span class="hljs-keyword">if</span>Â (route.<span class="hljs-property">params</span>Â &amp;&amp;Â route.<span class="hljs-property">params</span>.<span class="hljs-property">id</span>)Â {
Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â <span class="hljs-string">`<span class="hljs-subst">${route.name}</span>-<span class="hljs-subst">${route.params.id}</span>`</span>
Â Â Â Â Â Â }
Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â route.<span class="hljs-property">name</span>
Â Â Â Â },
Â Â Â Â 
Â Â Â Â <span class="hljs-title function_">saveCacheToStorage</span>(<span class="hljs-params"/>)Â {
Â Â Â Â Â Â <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">'vue-cache-views'</span>,Â <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">cachedViews</span>))
Â Â Â Â }
Â Â }
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<h3 data-id="heading-13">5.2 ç¼“å­˜çŠ¶æ€æŒ‡ç¤ºå™¨</h3>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!--Â components/CacheIndicator.vueÂ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
Â Â <span class="hljs-tag">&lt;<span class="hljs-name">div</span>Â <span class="hljs-attr">class</span>=<span class="hljs-string">"cache-indicator"</span>Â <span class="hljs-attr">v-if</span>=<span class="hljs-string">"showIndicator"</span>&gt;</span>
Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">div</span>Â <span class="hljs-attr">class</span>=<span class="hljs-string">"cache-status"</span>&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">span</span>Â <span class="hljs-attr">class</span>=<span class="hljs-string">"cache-icon"</span>&gt;</span>ğŸ’¾<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">span</span>Â <span class="hljs-attr">class</span>=<span class="hljs-string">"cache-text"</span>&gt;</span>æ•°æ®å·²ç¼“å­˜Â {{Â cacheTimeÂ }}<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">button</span>Â @<span class="hljs-attr">click</span>=<span class="hljs-string">"refreshData"</span>Â <span class="hljs-attr">class</span>=<span class="hljs-string">"refresh-btn"</span>&gt;</span>åˆ·æ–°<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">export</span>Â <span class="hljs-keyword">default</span>Â {
Â Â <span class="hljs-attr">props</span>:Â {
Â Â Â Â <span class="hljs-attr">componentName</span>:Â {
Â Â Â Â Â Â <span class="hljs-attr">type</span>:Â <span class="hljs-title class_">String</span>,
Â Â Â Â Â Â <span class="hljs-attr">required</span>:Â <span class="hljs-literal">true</span>
Â Â Â Â }
Â Â },
Â Â 
Â Â <span class="hljs-title function_">data</span>(<span class="hljs-params"/>)Â {
Â Â Â Â <span class="hljs-keyword">return</span>Â {
Â Â Â Â Â Â <span class="hljs-attr">lastUpdate</span>:Â <span class="hljs-literal">null</span>,
Â Â Â Â Â Â <span class="hljs-attr">showIndicator</span>:Â <span class="hljs-literal">false</span>,
Â Â Â Â Â Â <span class="hljs-attr">updateInterval</span>:Â <span class="hljs-literal">null</span>
Â Â Â Â }
Â Â },
Â Â 
Â Â <span class="hljs-attr">computed</span>:Â {
Â Â Â Â <span class="hljs-title function_">cacheTime</span>(<span class="hljs-params"/>)Â {
Â Â Â Â Â Â <span class="hljs-keyword">if</span>Â (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">lastUpdate</span>)Â <span class="hljs-keyword">return</span>Â <span class="hljs-string">''</span>
Â Â Â Â Â Â 
Â Â Â Â Â Â <span class="hljs-keyword">const</span>Â nowÂ =Â <span class="hljs-keyword">new</span>Â <span class="hljs-title class_">Date</span>()
Â Â Â Â Â Â <span class="hljs-keyword">const</span>Â diffÂ =Â <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>((nowÂ -Â <span class="hljs-variable language_">this</span>.<span class="hljs-property">lastUpdate</span>)Â /Â <span class="hljs-number">1000</span>)
Â Â Â Â Â Â 
Â Â Â Â Â Â <span class="hljs-keyword">if</span>Â (diffÂ &lt;Â <span class="hljs-number">60</span>)Â {
Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â <span class="hljs-string">`<span class="hljs-subst">${diff}</span>ç§’å‰`</span>
Â Â Â Â Â Â }Â <span class="hljs-keyword">else</span>Â <span class="hljs-keyword">if</span>Â (diffÂ &lt;Â <span class="hljs-number">3600</span>)Â {
Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â <span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-built_in">Math</span>.floor(diffÂ /Â <span class="hljs-number">60</span>)}</span>åˆ†é’Ÿå‰`</span>
Â Â Â Â Â Â }Â <span class="hljs-keyword">else</span>Â {
Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â <span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-built_in">Math</span>.floor(diffÂ /Â <span class="hljs-number">3600</span>)}</span>å°æ—¶å‰`</span>
Â Â Â Â Â Â }
Â Â Â Â }
Â Â },
Â Â 
Â Â <span class="hljs-title function_">activated</span>(<span class="hljs-params"/>)Â {
Â Â Â Â <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">loadCacheTime</span>()
Â Â Â Â <span class="hljs-variable language_">this</span>.<span class="hljs-property">showIndicator</span>Â =Â <span class="hljs-literal">true</span>
Â Â Â Â <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">startTimer</span>()
Â Â },
Â Â 
Â Â <span class="hljs-title function_">deactivated</span>(<span class="hljs-params"/>)Â {
Â Â Â Â <span class="hljs-variable language_">this</span>.<span class="hljs-property">showIndicator</span>Â =Â <span class="hljs-literal">false</span>
Â Â Â Â <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">stopTimer</span>()
Â Â },
Â Â 
Â Â <span class="hljs-attr">methods</span>:Â {
Â Â Â Â <span class="hljs-title function_">loadCacheTime</span>(<span class="hljs-params"/>)Â {
Â Â Â Â Â Â <span class="hljs-keyword">const</span>Â cacheDataÂ =Â <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">`cache-<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.componentName}</span>`</span>)
Â Â Â Â Â Â <span class="hljs-keyword">if</span>Â (cacheData)Â {
Â Â Â Â Â Â Â Â <span class="hljs-variable language_">this</span>.<span class="hljs-property">lastUpdate</span>Â =Â <span class="hljs-keyword">new</span>Â <span class="hljs-title class_">Date</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(cacheData).<span class="hljs-property">timestamp</span>)
Â Â Â Â Â Â }Â <span class="hljs-keyword">else</span>Â {
Â Â Â Â Â Â Â Â <span class="hljs-variable language_">this</span>.<span class="hljs-property">lastUpdate</span>Â =Â <span class="hljs-keyword">new</span>Â <span class="hljs-title class_">Date</span>()
Â Â Â Â Â Â Â Â <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">saveCacheTime</span>()
Â Â Â Â Â Â }
Â Â Â Â },
Â Â Â Â 
Â Â Â Â <span class="hljs-title function_">saveCacheTime</span>(<span class="hljs-params"/>)Â {
Â Â Â Â Â Â <span class="hljs-keyword">const</span>Â cacheDataÂ =Â {
Â Â Â Â Â Â Â Â <span class="hljs-attr">timestamp</span>:Â <span class="hljs-keyword">new</span>Â <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">toISOString</span>(),
Â Â Â Â Â Â Â Â <span class="hljs-attr">component</span>:Â <span class="hljs-variable language_">this</span>.<span class="hljs-property">componentName</span>
Â Â Â Â Â Â }
Â Â Â Â Â Â <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">`cache-<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.componentName}</span>`</span>,Â <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(cacheData))
Â Â Â Â Â Â <span class="hljs-variable language_">this</span>.<span class="hljs-property">lastUpdate</span>Â =Â <span class="hljs-keyword">new</span>Â <span class="hljs-title class_">Date</span>()
Â Â Â Â },
Â Â Â Â 
Â Â Â Â <span class="hljs-title function_">refreshData</span>(<span class="hljs-params"/>)Â {
Â Â Â Â Â Â <span class="hljs-variable language_">this</span>.$emit(<span class="hljs-string">'refresh'</span>)
Â Â Â Â Â Â <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">saveCacheTime</span>()
Â Â Â Â },
Â Â Â Â 
Â Â Â Â <span class="hljs-title function_">startTimer</span>(<span class="hljs-params"/>)Â {
Â Â Â Â Â Â <span class="hljs-variable language_">this</span>.<span class="hljs-property">updateInterval</span>Â =Â <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">()Â =&gt;</span>Â {
Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â æ›´æ–°æ˜¾ç¤ºæ—¶é—´</span>
Â Â Â Â Â Â },Â <span class="hljs-number">60000</span>)Â <span class="hljs-comment">//Â æ¯åˆ†é’Ÿæ›´æ–°ä¸€æ¬¡æ˜¾ç¤º</span>
Â Â Â Â },
Â Â Â Â 
Â Â Â Â <span class="hljs-title function_">stopTimer</span>(<span class="hljs-params"/>)Â {
Â Â Â Â Â Â <span class="hljs-keyword">if</span>Â (<span class="hljs-variable language_">this</span>.<span class="hljs-property">updateInterval</span>)Â {
Â Â Â Â Â Â Â Â <span class="hljs-built_in">clearInterval</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">updateInterval</span>)
Â Â Â Â Â Â }
Â Â Â Â }
Â Â }
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">style</span>Â <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.cache-indicator</span>Â {
Â Â <span class="hljs-attribute">position</span>:Â fixed;
Â Â <span class="hljs-attribute">bottom</span>:Â <span class="hljs-number">20px</span>;
Â Â <span class="hljs-attribute">right</span>:Â <span class="hljs-number">20px</span>;
Â Â <span class="hljs-attribute">background</span>:Â <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>,Â <span class="hljs-number">0</span>,Â <span class="hljs-number">0</span>,Â <span class="hljs-number">0.8</span>);
Â Â <span class="hljs-attribute">color</span>:Â white;
Â Â <span class="hljs-attribute">padding</span>:Â <span class="hljs-number">10px</span>Â <span class="hljs-number">15px</span>;
Â Â <span class="hljs-attribute">border-radius</span>:Â <span class="hljs-number">20px</span>;
Â Â <span class="hljs-attribute">font-size</span>:Â <span class="hljs-number">14px</span>;
Â Â <span class="hljs-attribute">z-index</span>:Â <span class="hljs-number">9999</span>;
}

<span class="hljs-selector-class">.cache-status</span>Â {
Â Â <span class="hljs-attribute">display</span>:Â flex;
Â Â <span class="hljs-attribute">align-items</span>:Â center;
Â Â <span class="hljs-attribute">gap</span>:Â <span class="hljs-number">8px</span>;
}

<span class="hljs-selector-class">.refresh-btn</span>Â {
Â Â <span class="hljs-attribute">background</span>:Â <span class="hljs-number">#4CAF50</span>;
Â Â <span class="hljs-attribute">color</span>:Â white;
Â Â <span class="hljs-attribute">border</span>:Â none;
Â Â <span class="hljs-attribute">padding</span>:Â <span class="hljs-number">4px</span>Â <span class="hljs-number">12px</span>;
Â Â <span class="hljs-attribute">border-radius</span>:Â <span class="hljs-number">4px</span>;
Â Â <span class="hljs-attribute">cursor</span>:Â pointer;
Â Â <span class="hljs-attribute">font-size</span>:Â <span class="hljs-number">12px</span>;
}

<span class="hljs-selector-class">.refresh-btn</span><span class="hljs-selector-pseudo">:hover</span>Â {
Â Â <span class="hljs-attribute">background</span>:Â <span class="hljs-number">#45a049</span>;
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
</code></pre>
<h2 data-id="heading-14">å…­ã€æ€§èƒ½ä¼˜åŒ–ä¸æ³¨æ„äº‹é¡¹</h2>
<h3 data-id="heading-15">6.1 å†…å­˜ç®¡ç†å»ºè®®</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">//Â ç›‘æ§ç¼“å­˜ç»„ä»¶æ•°é‡</span>
<span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">mixin</span>({
Â Â <span class="hljs-title function_">activated</span>(<span class="hljs-params"/>)Â {
Â Â Â Â <span class="hljs-keyword">if</span>Â (<span class="hljs-variable language_">window</span>.<span class="hljs-property">keepAliveInstances</span>)Â {
Â Â Â Â Â Â <span class="hljs-variable language_">window</span>.<span class="hljs-property">keepAliveInstances</span>.<span class="hljs-title function_">add</span>(<span class="hljs-variable language_">this</span>)
Â Â Â Â Â Â <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`å½“å‰ç¼“å­˜ç»„ä»¶æ•°é‡:Â <span class="hljs-subst">${<span class="hljs-variable language_">window</span>.keepAliveInstances.size}</span>`</span>)
Â Â Â Â }
Â Â },
Â Â 
Â Â <span class="hljs-title function_">deactivated</span>(<span class="hljs-params"/>)Â {
Â Â Â Â <span class="hljs-keyword">if</span>Â (<span class="hljs-variable language_">window</span>.<span class="hljs-property">keepAliveInstances</span>)Â {
Â Â Â Â Â Â <span class="hljs-variable language_">window</span>.<span class="hljs-property">keepAliveInstances</span>.<span class="hljs-title function_">delete</span>(<span class="hljs-variable language_">this</span>)
Â Â Â Â }
Â Â }
})

<span class="hljs-comment">//Â åº”ç”¨åˆå§‹åŒ–æ—¶</span>
<span class="hljs-variable language_">window</span>.<span class="hljs-property">keepAliveInstances</span>Â =Â <span class="hljs-keyword">new</span>Â <span class="hljs-title class_">Set</span>()
</code></pre>
<h3 data-id="heading-16">6.2 ç¼“å­˜ç­–ç•¥é€‰æ‹©æŒ‡å—</h3>






























<table><thead><tr><th>åœºæ™¯</th><th>æ¨èæ–¹æ¡ˆ</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>åˆ—è¡¨é¡µ â†’ è¯¦æƒ…é¡µ â†’ è¿”å›åˆ—è¡¨</td><td>keep-alive + activatedåˆ·æ–°</td><td>ä¿æŒåˆ—è¡¨çŠ¶æ€ï¼Œè¿”å›æ—¶å¯é€‰åˆ·æ–°</td></tr><tr><td>å¤šæ ‡ç­¾é¡µç®¡ç†</td><td>åŠ¨æ€include + LRUç­–ç•¥</td><td>é¿å…å†…å­˜æ³„æ¼ï¼Œè‡ªåŠ¨æ¸…ç†</td></tr><tr><td>å®æ—¶æ•°æ®å±•ç¤º</td><td>Vuex + çŸ­æ—¶é—´ç¼“å­˜</td><td>ä¿è¯æ•°æ®å®æ—¶æ€§</td></tr><tr><td>å¤æ‚è¡¨å•å¡«å†™</td><td>keep-alive + æœ¬åœ°å­˜å‚¨å¤‡ä»½</td><td>é˜²æ­¢æ•°æ®ä¸¢å¤±</td></tr></tbody></table>
<h3 data-id="heading-17">6.3 å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ</h3>
<p><strong>é—®é¢˜1ï¼šç¼“å­˜ç»„ä»¶æ•°æ®ä¸æ›´æ–°</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">//Â è§£å†³æ–¹æ¡ˆï¼šå¼ºåˆ¶åˆ·æ–°ç‰¹å®šç»„ä»¶</span>
<span class="hljs-keyword">this</span>.$nextTick(()Â =&gt;Â {
Â Â <span class="hljs-keyword">const</span>Â cacheÂ =Â <span class="hljs-keyword">this</span>.$vnode.parent.componentInstance.cache
Â Â <span class="hljs-keyword">const</span>Â keysÂ =Â <span class="hljs-keyword">this</span>.$vnode.parent.componentInstance.keys
Â Â 
Â Â <span class="hljs-keyword">if</span>Â (cacheÂ &amp;&amp;Â keys)Â {
Â Â Â Â <span class="hljs-keyword">const</span>Â keyÂ =Â <span class="hljs-keyword">this</span>.$vnode.key
Â Â Â Â <span class="hljs-keyword">if</span>Â (keyÂ !=Â <span class="hljs-literal">null</span>)Â {
Â Â Â Â Â Â deleteÂ cache[key]
Â Â Â Â Â Â <span class="hljs-keyword">const</span>Â indexÂ =Â keys.indexOf(key)
Â Â Â Â Â Â <span class="hljs-keyword">if</span>Â (indexÂ &gt;Â -<span class="hljs-number">1</span>)Â {
Â Â Â Â Â Â Â Â keys.splice(index,Â <span class="hljs-number">1</span>)
Â Â Â Â Â Â }
Â Â Â Â }
Â Â }
})
</code></pre>
<p><strong>é—®é¢˜2ï¼šæ»šåŠ¨ä½ç½®ä¿æŒ</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">//Â åœ¨è·¯ç”±é…ç½®ä¸­</span>
{
Â Â <span class="hljs-attr">path</span>:Â <span class="hljs-string">'/list'</span>,
Â Â <span class="hljs-attr">component</span>:Â <span class="hljs-title class_">ListPage</span>,
Â Â <span class="hljs-attr">meta</span>:Â {
Â Â Â Â <span class="hljs-attr">keepAlive</span>:Â <span class="hljs-literal">true</span>,
Â Â Â Â <span class="hljs-attr">scrollToTop</span>:Â <span class="hljs-literal">false</span>Â <span class="hljs-comment">//Â ä¸æ»šåŠ¨åˆ°é¡¶éƒ¨</span>
Â Â }
}

<span class="hljs-comment">//Â åœ¨ç»„ä»¶ä¸­</span>
<span class="hljs-title function_">deactivated</span>(<span class="hljs-params"/>)Â {
Â Â <span class="hljs-comment">//Â ä¿å­˜æ»šåŠ¨ä½ç½®</span>
Â Â <span class="hljs-variable language_">this</span>.<span class="hljs-property">scrollTop</span>Â =Â <span class="hljs-variable language_">document</span>.<span class="hljs-property">documentElement</span>.<span class="hljs-property">scrollTop</span>Â ||Â <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-property">scrollTop</span>
},

<span class="hljs-title function_">activated</span>(<span class="hljs-params"/>)Â {
Â Â <span class="hljs-comment">//Â æ¢å¤æ»šåŠ¨ä½ç½®</span>
Â Â <span class="hljs-keyword">if</span>Â (<span class="hljs-variable language_">this</span>.<span class="hljs-property">scrollTop</span>)Â {
Â Â Â Â <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">scrollTo</span>(<span class="hljs-number">0</span>,Â <span class="hljs-variable language_">this</span>.<span class="hljs-property">scrollTop</span>)
Â Â }
}
</code></pre>
<h2 data-id="heading-18">ä¸ƒã€æ€»ç»“</h2>
<p>Vueç»„ä»¶ç¼“å­˜æ˜¯æå‡åº”ç”¨æ€§èƒ½å’Œç”¨æˆ·ä½“éªŒçš„é‡è¦æ‰‹æ®µï¼Œä½†éœ€è¦åˆç†ä½¿ç”¨ã€‚å…³é”®ç‚¹æ€»ç»“ï¼š</p>
<ol>
<li>1.Â <strong>åˆç†é€‰æ‹©ç¼“å­˜ç­–ç•¥</strong>ï¼šæ ¹æ®ä¸šåŠ¡åœºæ™¯é€‰æ‹©é€‚å½“çš„ç¼“å­˜æ–¹æ¡ˆ</li>
<li>2.Â <strong>æ³¨æ„å†…å­˜ç®¡ç†</strong>ï¼šä½¿ç”¨maxå±æ€§é™åˆ¶ç¼“å­˜æ•°é‡ï¼Œå®ç°LRUç­–ç•¥</li>
<li>3.Â <strong>æ•°æ®æ›´æ–°è¦çµæ´»</strong>ï¼šç»“åˆactivatedé’©å­ã€äº‹ä»¶æ€»çº¿ã€Vuexç­‰å¤šç§æ–¹å¼</li>
<li>4.Â <strong>ç›‘æ§ç¼“å­˜çŠ¶æ€</strong>ï¼šå®ç°ç¼“å­˜æŒ‡ç¤ºå™¨ï¼Œè®©ç”¨æˆ·äº†è§£æ•°æ®çŠ¶æ€</li>
<li>5.Â <strong>æä¾›åˆ·æ–°æœºåˆ¶</strong>ï¼šå§‹ç»ˆç»™ç”¨æˆ·æ‰‹åŠ¨åˆ·æ–°çš„é€‰æ‹©æƒ</li>
</ol>
<p>æ­£ç¡®ä½¿ç”¨keep-aliveå’Œç›¸å…³ç¼“å­˜æŠ€æœ¯ï¼Œå¯ä»¥è®©ä½ çš„Vueåº”ç”¨æ—¢ä¿æŒæµç•…çš„ç”¨æˆ·ä½“éªŒï¼Œåˆèƒ½ä¿è¯æ•°æ®çš„å‡†ç¡®æ€§å’Œå®æ—¶æ€§ã€‚è®°ä½ï¼Œç¼“å­˜ä¸æ˜¯ç›®çš„ï¼Œè€Œæ˜¯æå‡ç”¨æˆ·ä½“éªŒçš„æ‰‹æ®µï¼Œè¦æ ¹æ®å®é™…ä¸šåŠ¡éœ€æ±‚çµæ´»è¿ç”¨ã€‚</p>
<p>å¸Œæœ›è¿™ç¯‡è¯¦ç»†çš„æŒ‡å—èƒ½å¸®åŠ©ä½ åœ¨å®é™…é¡¹ç›®ä¸­æ›´å¥½åœ°åº”ç”¨Vueç»„ä»¶ç¼“å­˜æŠ€æœ¯ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä½¿ç”¨Trae SOLOæ¨¡å¼å¼€å‘ä¸€ä¸ªè§†é¢‘æå–æ–‡å­—å¹¶æ€»ç»“å½’çº³çš„å·¥å…·â€”â€”é™„çº¿ä¸Šé¢„è§ˆåœ°å€]]></title>    <link>https://juejin.cn/post/7582779306731585571</link>    <guid>https://juejin.cn/post/7582779306731585571</guid>    <pubDate>2025-12-12T15:35:01.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582779306731585571" data-draft-id="7582149417768599602" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä½¿ç”¨Trae SOLOæ¨¡å¼å¼€å‘ä¸€ä¸ªè§†é¢‘æå–æ–‡å­—å¹¶æ€»ç»“å½’çº³çš„å·¥å…·â€”â€”é™„çº¿ä¸Šé¢„è§ˆåœ°å€"/> <meta itemprop="keywords" content="Trae,AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2025-12-12T15:35:01.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ°´å†—æ°´å­š"/> <meta itemprop="url" content="https://juejin.cn/user/1406974769508679"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä½¿ç”¨Trae SOLOæ¨¡å¼å¼€å‘ä¸€ä¸ªè§†é¢‘æå–æ–‡å­—å¹¶æ€»ç»“å½’çº³çš„å·¥å…·â€”â€”é™„çº¿ä¸Šé¢„è§ˆåœ°å€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1406974769508679/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ°´å†—æ°´å­š
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-12T15:35:01.000Z" title="Fri Dec 12 2025 15:35:01 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:14px;overflow-x:hidden;color:var(--cyanosis-base-color);transition:color .35s;--cyanosis-base-color:#353535;--cyanosis-title-color:#005bb7;--cyanosis-strong-color:#2196f3;--cyanosis-em-color:#4fc3f7;--cyanosis-del-color:#ccc;--cyanosis-link-color:#3da8f5;--cyanosis-linkh-color:#007fff;--cyanosis-border-color:#bedcff;--cyanosis-border-color-2:#ececec;--cyanosis-bg-color:#fff;--cyanosis-blockquote-color:#8c8c8c;--cyanosis-blockquote-bg-color:#f0fdff;--cyanosis-code-color:#c2185b;--cyanosis-code-bg-color:#fff4f4;--cyanosis-code-pre-color:#f8f8f8;--cyanosis-table-border-color:#c3e0fd;--cyanosis-table-th-color:#dff0ff;--cyanosis-table-tht-color:#005bb7;--cyanosis-table-tr-nc-color:#f7fbff;--cyanosis-table-trh-color:#e0edf7;--cyanosis-slct-title-color:#005bb7;--cyanosis-slct-titlebg-color:rgba(175,207,247,0.25);--cyanosis-slct-text-color:#c80000;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#e8ebec;--cyanosis-slct-codebg-color:#ffeaeb;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body.__dark{--cyanosis-base-color:#cacaca;--cyanosis-title-color:#ddd;--cyanosis-strong-color:#fe9900;--cyanosis-em-color:#ffd28e;--cyanosis-del-color:#ccc;--cyanosis-link-color:#ffb648;--cyanosis-linkh-color:#fe9900;--cyanosis-border-color:#ffe3ba;--cyanosis-border-color-2:#ffcb7b;--cyanosis-bg-color:#2f2f2f;--cyanosis-blockquote-color:#c7c7c7;--cyanosis-blockquote-bg-color:rgba(255,199,116,0.1);--cyanosis-code-color:#000;--cyanosis-code-bg-color:#ffcb7b;--cyanosis-code-pre-color:rgba(255,227,185,0.5);--cyanosis-table-border-color:#fe9900;--cyanosis-table-th-color:#ffb648;--cyanosis-table-tht-color:#000;--cyanosis-table-tr-nc-color:#6d5736;--cyanosis-table-trh-color:#947443;--cyanosis-slct-title-color:#000;--cyanosis-slct-titlebg-color:#fe9900;--cyanosis-slct-text-color:#00c888;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#000;--cyanosis-slct-codebg-color:#ffcb7b;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body h1{padding-bottom:4px;font-size:30px}.markdown-body h1,.markdown-body h2{margin-top:36px;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);transition:color .35s}.markdown-body h2{position:relative;padding-left:10px;padding-right:10px;padding-bottom:10px;font-size:24px;border-bottom:1px solid var(--cyanosis-border-color-2)}.markdown-body h2:before{content:"ã€Œ";position:absolute;top:-6px;left:-14px}.markdown-body h2:after{content:"ã€";position:relative;top:6px;right:auto}.markdown-body h3{position:relative;padding-bottom:0;margin-top:30px;margin-bottom:10px;font-size:20px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h3:before{content:"Â»";padding-right:6px;color:var(--cyanosis-strong-color)}.markdown-body h4{margin-top:24px;font-size:16px}.markdown-body h4,.markdown-body h5{padding-bottom:0;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h5{margin-top:18px;font-size:14px}.markdown-body h6{padding-bottom:0;margin-top:12px;margin-bottom:10px;font-size:12px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body p{line-height:inherit;margin-top:16px;margin-bottom:16px}.markdown-body img{max-width:100%}.markdown-body hr{position:relative;width:98%;height:1px;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,var(--cyanosis-link-color),rgba(255,0,0,.3),hsla(0,0%,100%,.1),rgba(255,0,0,.3),var(--cyanosis-link-color));border-width:0;overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background-color:var(--cyanosis-bg-color);background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center;transition:background-color .5s}.markdown-body code{padding:.065em .4em;font-size:.87em;color:var(--cyanosis-code-color);word-break:break-word;overflow-x:auto;background-color:var(--cyanosis-code-bg-color);border-radius:2px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;padding:16px 12px;margin:0;font-size:12px;color:#333;word-break:normal;overflow-x:auto;background:var(--cyanosis-code-pre-color)}.markdown-body pre&gt;code::-webkit-scrollbar{width:4px;height:4px}.markdown-body pre&gt;code::-webkit-scrollbar-track{background-color:var(--cyanosis-border-color)}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:var(--cyanosis-strong-color);border-radius:10px}.markdown-body a{position:relative;text-decoration:none;color:var(--cyanosis-link-color);border-bottom:1px solid var(--cyanosis-border-color)}.markdown-body a:hover{border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body a:active,.markdown-body a:hover{color:var(--cyanosis-linkh-color)}.markdown-body a:after{position:absolute;content:"";top:100%;left:0;width:100%;opacity:0;border-bottom:1px solid var(--cyanosis-border-color);transition:top .3s,opacity .3s;transform:translateZ(0)}.markdown-body a:hover:after{top:0;opacity:1;border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid var(--cyanosis-table-border-color);border-spacing:0;border-collapse:collapse}.markdown-body table thead{color:#000;text-align:left;font-size:14px;background:#f6f6f6}.markdown-body table tr:nth-child(2n){background-color:var(--cyanosis-table-tr-nc-color)}.markdown-body table tr:hover{background-color:var(--cyanosis-table-trh-color)}.markdown-body table td,.markdown-body table th{padding:12px 8px;line-height:24px;border:1px solid var(--cyanosis-table-border-color)}.markdown-body table th{color:var(--cyanosis-table-tht-color);background-color:var(--cyanosis-table-th-color)}.markdown-body table td{min-width:120px}.markdown-body blockquote{color:var(--cyanosis-blockquote-color);border-left:4px solid var(--cyanosis-strong-color);background-color:var(--cyanosis-blockquote-bg-color);padding:1px 20px;margin:22px 0;transition:color .35s}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body b,.markdown-body blockquote&gt;b,.markdown-body blockquote&gt;strong,.markdown-body strong{color:var(--cyanosis-strong-color)}.markdown-body em,.markdown-body i{color:var(--cyanosis-em-color)}.markdown-body del{color:var(--cyanosis-del-color)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:4px}.markdown-body ol li{padding-left:6px}.markdown-body details&gt;summary{outline:none;color:var(--cyanosis-title-color);font-size:20px;font-weight:bolder;border-bottom:1px solid var(--cyanosis-border-color);cursor:pointer}.markdown-body details&gt;p{padding:10px 20px;margin:10px 0 0;color:#666;background-color:var(--cyanosis-blockquote-bg-color);border:2px dashed var(--cyanosis-strong-color)}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection{color:var(--cyanosis-slct-title-color);background-color:var(--cyanosis-slct-titlebg-color)}.markdown-body ol li::selection,.markdown-body p::selection,.markdown-body ul li::selection{color:var(--cyanosis-slct-text-color);background-color:var(--cyanosis-slct-bg-color)}.markdown-body a::selection,.markdown-body b::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:var(--cyanosis-slct-elbg-color)}.markdown-body del::selection{color:var(--cyanosis-slct-del-color);background-color:var(--cyanosis-slct-elbg-color)}.markdown-body table thead th::selection{background-color:transparent}.markdown-body table tbody td::selection{background-color:var(--cyanosis-slct-bg-color)}.markdown-body code::selection{background-color:var(--cyanosis-slct-codebg-color)}.markdown-body pre&gt;code::selection{background-color:var(--cyanosis-slct-prebg-color)}.markdown-body .contains-task-list{padding-left:14px;list-style:none}.markdown-body .contains-task-list input[type=checkbox]{position:relative}.markdown-body .contains-task-list input[type=checkbox]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;width:inherit;height:inherit;background:#f0f8ff;border:1px solid #add6ff;border-radius:2px;box-sizing:border-box;z-index:1}.markdown-body .contains-task-list input[type=checkbox]:checked:after{content:"âœ“";position:absolute;top:-12px;left:0;right:0;bottom:0;width:0;height:0;color:#f55;font-size:20px;font-weight:700;z-index:2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atom-one-dark">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#abb2bf;background:#282c34}.hljs-comment,.hljs-quote{color:#5c6370;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#c678dd}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e06c75}.hljs-literal{color:#56b6c2}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#98c379}.hljs-built_in,.hljs-class .hljs-title{color:#e6c07b}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#d19a66}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#61aeee}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>æœ¬æ–‡è®°å½•ä½¿ç”¨Trae SOLOæ¨¡å¼å¼€å‘ä¸€ä¸ªè§†é¢‘æå–æ–‡å­—å¹¶æ€»ç»“å½’çº³çš„å·¥å…·</p>
<p>çº¿ä¸Šåœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fashuai.site%3A24680%2F" target="_blank" title="https://ashuai.site:24680/" ref="nofollow noopener noreferrer">ashuai.site:24680/</a></p>
<h2 data-id="heading-1">éœ€æ±‚åœºæ™¯è¡¨è¿°</h2>
<ul>
<li>
<p>ç¬”è€…æ˜¯å‰ç«¯å¼€å‘ï¼Œä½†æ˜¯å¯¹äº§å“ç»ç†çš„çŸ¥è¯†äº†è§£ä¸å¤šï¼Œæ‰€ä»¥æƒ³å­¦ä¹ äº§å“ç»ç†çš„çŸ¥è¯†ï¼Œé—®ä¹‹å‰çš„äº§å“åŒäº‹è¦äº†ä¸€ä»½è§†é¢‘è¯¾ç¨‹ï¼Œæ— å¥ˆè¯¾ç¨‹æ—¶é•¿èµ·æ­¥ä¸€ä¸ªå¤šå°æ—¶ï¼Œå¦‚æœä¸€ç‚¹ç‚¹å¼€ï¼Œæˆ–è€…å¿«è¿›çœ‹ï¼Œä¹Ÿæ˜¯æ•ˆç‡ç•¥ä½ã€‚</p>
</li>
<li>
<p>å› æ­¤ï¼Œç¬”è€…æƒ³å¼€å‘ä¸€ä¸ªå·¥å…·ï¼Œèƒ½å¤Ÿä¸€é”®æå–è§†é¢‘ä¸­çš„å†…å®¹æ–‡å­—ï¼Œå¹¶æŠŠå†…å®¹æ–‡å­—äº¤ç»™å¤§æ¨¡å‹ï¼Œç”±å¤§æ¨¡å‹æ€»ç»“æ‘˜è¦</p>
</li>
<li>
<p>è¿™æ ·æˆ‘å°±å¯ä»¥å¿«é€Ÿå­¦ä¹ äº§å“ç»ç†çš„çŸ¥è¯†ï¼Œè€Œä¸æ˜¯æµªè´¹æ—¶é—´åœ¨çœ‹è§†é¢‘ä¸Š</p>
</li>
</ul>
<p>é¦–å…ˆï¼Œæˆ‘éœ€è¦åšæŠ€æœ¯æ¡†æ¶é€‰å‹ï¼Œé™å®šä¸ºreact+vite+ts+antd+tailwindcss</p>
<blockquote>
<p>ç¯‡å¹…åŸå› ï¼ŒæŠŠå†…å®¹æ–‡å­—äº¤ç»™å¤§æ¨¡å‹ï¼Œç”±å¤§æ¨¡å‹æ€»ç»“æ‘˜è¦è¿™ä¸€æ­¥ï¼Œç¬”è€…æ²¡æœ‰å†solo</p>
</blockquote>
<blockquote>
<p>åŒè´¨åŒ–è°ƒç”¨å¤§æ¨¡å‹apiçš„æ–‡ç« ï¼Œå¯ä»¥å‚è€ƒç¬”è€…å…ˆå‰çš„æ–‡ç« ï¼š<a href="https://juejin.cn/post/7578003302487425024" target="_blank" title="https://juejin.cn/post/7578003302487425024">ã€Šæ•ˆèƒ½å·¥å…·ï¼ˆåï¼‰ä¹‹æ¥å…¥deepseekå®ç°AIå­¦ä¹ PDFæ–‡æ¡£è¯»åæ„Ÿæ–‡ä»¶æ‰¹é‡ç”ŸæˆåŠŸèƒ½ã€‹</a></p>
</blockquote>
<h2 data-id="heading-2">Traeçš„SOLOæ¨¡å¼å¼€å‘</h2>
<h3 data-id="heading-3">1. åŸºäºç”¨æˆ·éœ€æ±‚ï¼Œç”Ÿæˆå¯¹åº”æ–‡æ¡£</h3>
<p>ç¬”è€…æŠŠä¸Šè¿°éœ€æ±‚ï¼Œå‘ŠçŸ¥Trae ä»¥åï¼ŒTraeè‡ªåŠ¨å¸®æˆ‘ç”Ÿæˆä¸€ä¸ªæ–‡æ¡£ï¼Œè§„åˆ’å¥½ï¼Œå®ƒéœ€è¦åšçš„äº‹æƒ…ï¼Œå¹¶ä¸”å…è®¸æˆ‘è°ƒæ•´è¿™ä¸ªè§„åˆ’æ–‡æ¡£ï¼Œå¦‚ä¸‹ï¼š</p>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d99eeec70f7b4e229f13eae966358e3e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rC05YaX5rC05a2a:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766158501&amp;x-signature=lrkDVzTZwvUEb39w%2BG7dlEy5OWY%3D" alt="1.png" width="70%" loading="lazy"/>
<ul>
<li>å¦‚æœæˆ‘è§‰å¾—è§„åˆ’æ–‡æ¡£å†—ä½™ï¼Œæˆ–è€…ç¼ºå°‘ä¸œè¥¿ï¼Œå¯ä»¥ä¿®ä¿®æ”¹æ”¹</li>
<li>è¿™ä¸€æ­¥ï¼Œå¾ˆåƒé¡¹ç›®ç»ç†æå‡ºéœ€æ±‚åï¼Œäº§å“æä¾›çš„éœ€æ±‚æ‹†è§£æ–‡æ¡£ï¼ˆåŒ…å«æŠ€æœ¯å¼€å‘è¦ç‚¹ï¼‰</li>
</ul>
<h3 data-id="heading-4">2. è®©å…¶æŒ‰ç…§æ–‡æ¡£ï¼Œè¿›è¡Œå¼€å·¥</h3>
<p>è®©å…¶æŒ‰ç…§æ–‡æ¡£ï¼Œè¿›è¡Œå¼€å·¥ï¼ŒTrae SOLOä¼šè‡ªåŠ¨åœ¨å‘½ä»¤è¡Œæ‰§è¡Œç›¸å…³å‘½ä»¤ï¼Œç„¶ååœ¨å³ä¾§ç”Ÿæˆå¯¹åº”ä»£ç </p>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a81f2aa5553e4f5cb4381b3a99317591~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rC05YaX5rC05a2a:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766158501&amp;x-signature=Wh3Zb%2F0IxETvgB12%2BYPpoXyNsYM%3D" alt="2.png" width="70%" loading="lazy"/>
<p>ç„¶åï¼Œå®‰è£…å„ç§ä¾èµ–</p>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8f2e8733b50044ec8d0a454d91f20929~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rC05YaX5rC05a2a:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766158501&amp;x-signature=tSOcbXNDT2g%2FAjooXds0eR54cYM%3D" alt="4.png" width="70%" loading="lazy"/>
<h3 data-id="heading-5">3. äº§ç‰©å˜æ›´</h3>
<p>å½“Trae SOLOå®Œæ¯•ä»¥åï¼Œä¼šæä¾›ä¸€ä¸ªäº§ç‰©æ±‡æ€»ï¼Œæˆ‘ä»¬å¯ä»¥æŸ¥çœ‹å˜æ›´ï¼Œè¿™æ ·èƒ½å¤Ÿå…·ä½“çœ‹å‡ºæ¥ï¼ŒTraeå¸®æˆ‘ä»¬å†™äº†é‚£äº›ä»£ç </p>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f8b3bd4ebe094e17a56e5d25303174db~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rC05YaX5rC05a2a:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766158501&amp;x-signature=FFFftoIBG7Y4upgSXEngS1VYhgU%3D" alt="5.png" width="70%" loading="lazy"/>
<p>ç„¶åï¼Œæˆ‘ä»¬æŸ¥çœ‹ä¸€ä¸‹ç»ˆç«¯</p>
<h3 data-id="heading-6">4. å¯åŠ¨é¡¹ç›®è·‘èµ·æ¥ï¼Œæµè§ˆå™¨çœ‹æ•ˆæœ</h3>
<p>é»˜è®¤è¿è¡Œåœ¨5173ç«¯å£ä¸Š</p>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/179713c9ad2747c68f5f3260babc4711~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rC05YaX5rC05a2a:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766158501&amp;x-signature=MgU7AdeW%2FFwyfgdOyzBx9q7Ji1w%3D" alt="6.png" width="70%" loading="lazy"/>
<p>çœ‹çœ‹æµè§ˆå™¨çš„æ•ˆæœï¼Œå‘ç°äº†ä¸€ä¸ªå°bug</p>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cab0ec12a6c94b788aff68af0d64e601~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rC05YaX5rC05a2a:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766158501&amp;x-signature=hFRFBkBGphRGmAtvrCYljI3Yaiw%3D" alt="7.png" width="70%" loading="lazy"/>
<h3 data-id="heading-7">5. å‘ŠçŸ¥ä¿®å¤antdçš„å±æ€§å¼ƒç”¨çš„bug</h3>
<p>è¿™é‡Œå¯ä»¥æˆªå›¾ï¼Œæˆ–è€…æ–‡å­—è¾“å…¥ï¼ŒæŠŠæµè§ˆå™¨çš„bugç²˜è´´ï¼Œå‘ŠçŸ¥Traeï¼Œå¦‚ä¸‹</p>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9c89aac2bcd649c087755d556abf6801~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rC05YaX5rC05a2a:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766158501&amp;x-signature=dd%2B9mfUSbcoyT8FZsYOiG%2FVh5xQ%3D" alt="8.png" width="70%" loading="lazy"/>
<p>ç„¶åï¼ŒTraeä¼šè¿›è¡Œæ€è€ƒï¼Œå¹¶å®šä½åˆ°é—®é¢˜ä»£ç ï¼Œè‡ªåŠ¨ä¿®å¤</p>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e148f4fc6a77419d95bb1e21b63ce63a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rC05YaX5rC05a2a:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766158501&amp;x-signature=0tUhUZCeAF7rMMEnimxG%2BZkpIsU%3D" alt="9.png" width="70%" loading="lazy"/>
<p>è¿™æ ·çš„è¯ï¼ŒåŸºæœ¬çš„æ ·å­å°±å‡ºæ¥äº†ï¼Œæ¥ä¸‹æ¥ï¼Œéœ€è¦æˆ‘è¿›è¡Œäººå·¥ä»‹å…¥</p>
<h3 data-id="heading-8">6. è§†é¢‘æå–æ–‡å­—ï¼ŒæŠ€æœ¯æ‹†è§£</h3>
<p>è§†é¢‘æå–æ–‡å­—ï¼Œåˆ†ä¸ºè¿™å‡ ä¸ªæ­¥éª¤</p>
<ol>
<li>æŠŠè§†é¢‘ä¸­çš„éŸ³é¢‘å‰¥ç¦»å‡ºæ¥â€”â€”ä½¿ç”¨fluent-ffmpegè¿™ä¸ªåŒ…</li>
<li>æŠŠéŸ³é¢‘è½¬æˆæ–‡å­—â€”â€”ä½¿ç”¨whisper-nodeè¿™ä¸ªåŒ…</li>
</ol>
<p>fluent-ffmpegéœ€è¦ä¸‹è½½ffmepgè¿™ä¸ªå·¥å…·çš„æœ¬åœ°</p>
<p>whisper-nodeä¸‹è½½tinyå¾®å°ç‰ˆæ¨¡å‹å°±è¡Œäº†</p>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘éœ€è¦ Windows å¹³å°ï¼Œä¸‹è½½ffmepg</p>
<p>å‚è€ƒè¿™ç¯‡æ–‡ç« ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2FNatsuago%2Farticle%2Fdetails%2F143231558" target="_blank" title="https://blog.csdn.net/Natsuago/article/details/143231558" ref="nofollow noopener noreferrer">blog.csdn.net/Natsuago/arâ€¦</a></p>
<p>æœ€ç»ˆï¼Œç¬”è€…æŠŠffmpegå®‰è£…å¥½äº†ï¼Œå¦‚ä¸‹</p>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/92c18abc08ca43748988a5bef7cca78f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rC05YaX5rC05a2a:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766158501&amp;x-signature=lkUwGltKzVgczRl%2BTG6SFNDXBPI%3D" alt="10.png" width="70%" loading="lazy"/>
<h3 data-id="heading-9">7. å‘ç°è¿˜å¾—å†™åç«¯</h3>
<p>fluent-ffmpegå’Œwhisper-nodeéœ€è¦åç«¯æœåŠ¡ï¼Œæ‰æ–¹ä¾¿è¿è¡Œï¼Œæ‰€ä»¥ï¼Œæˆ‘å’ŒTraeæ²Ÿé€šåï¼Œå®ƒåˆå¸®æˆ‘ç»§ç»­åˆ›å»ºåç«¯ä»£ç </p>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6810094991f84cbc9163d23a75b12a73~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rC05YaX5rC05a2a:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766158501&amp;x-signature=d8GJ%2BCbXvVBtQzAYchRUF8mqTWQ%3D" alt="11.png" width="70%" loading="lazy"/>
<h3 data-id="heading-10">8. é’ˆå¯¹äºé«˜é£é™©çš„å‘½ä»¤ä¼šæš‚åœå¹¶æç¤ºç”¨æˆ·</h3>
<p>æ¯”å¦‚åˆ é™¤æ–‡ä»¶æ“ä½œï¼ŒTraeä¼šåœä¸‹æ¥soloï¼Œç„¶åè¯¢é—®ç”¨æˆ·æ˜¯å¦è¿™æ ·æ“ä½œï¼Œè¿™æ ·è¿˜æ˜¯ä¸é”™çš„ï¼Œé˜²æ­¢AIç¼–ç¨‹è¯¯åˆ ä¸€äº›é‡è¦çš„æ–‡ä»¶</p>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bf311a5ff6f04fa2a9a4930dfbd55a32~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rC05YaX5rC05a2a:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766158501&amp;x-signature=rdy5hpHgp9Q3Z6xKEf%2Foy2cTtjU%3D" alt="12.png" width="70%" loading="lazy"/>
<h3 data-id="heading-11">9. è‹¥æ˜¯æ–¹å‘é”™è¯¯ï¼Œå‘ŠçŸ¥å¯çº æ­£</h3>
<ul>
<li>å®é™…ä¸Šï¼Œæ¶‰åŠåˆ°è§†é¢‘è½¬æ–‡æœ¬çš„åŠŸèƒ½ï¼Œè¿˜æ˜¯pythonç”Ÿæ€æ›´åŠ åˆé€‚</li>
<li>ç¬”è€…ä¸€å¼€å§‹ï¼Œè®©å…¶ä½¿ç”¨nodejsç”Ÿæ€å†™åç«¯ï¼Œè€Œåï¼Œsoloä¹Ÿå‘ç°äº†å¹¶æ¨èæ”¹æˆpythonç”Ÿæ€</li>
<li>ç¬”è€…ç‚¹å‡»åŒæ„ï¼Œé€‰æ‹©è®©å…¶æŠŠåç«¯ä»£ç æ”¹æˆpythonç”Ÿæ€</li>
<li>ç„¶åtraeä¹Ÿå¾ˆæ¸…æ™°åœ°ç†è§£äº†éœ€æ±‚</li>
<li>è¿›è¡Œäº†é‡æ„</li>
<li>é‡æ„è¿‡ç¨‹ä¸­ï¼Œå¯èƒ½ä¹Ÿä¼šå‡ºç°ä¸€äº›æŠ¥é”™ï¼Œä¹Ÿéœ€è¦äººå·¥ä»‹å…¥ï¼Œä½†æ˜¯è¿™å¹¶ä¸Traeçš„é—®é¢˜ï¼Œè€Œæ˜¯æ‰€æœ‰AIç¼–ç¨‹çš„é—®é¢˜</li>
</ul>
<p><strong>å’Œäººæ²Ÿé€šï¼Œæœ‰ä»€ä¹ˆé—®é¢˜ï¼Œå’ŒAIæ²Ÿé€šä¹Ÿä¼šæœ‰</strong></p>
<p><strong>æœ‰æ—¶å€™ï¼Œé”…ä¸åœ¨AIï¼Œè€Œåœ¨æˆ‘ä»¬ï¼Œå› ä¸ºæˆ‘ä»¬æ²¡æœ‰æ¸…æ™°åœ°è¡¨è¾¾æ˜ç™½éœ€æ±‚</strong></p>
<h3 data-id="heading-12">10. æ¥å›soloæœ€ç»ˆå¾—åˆ°ç»“æœæˆå“</h3>
<p>åœ¨æ¥å›çš„soloäº¤æµä¸­ï¼Œæœ€ç»ˆï¼Œå®ç°äº†ç¬”è€…æƒ³è¦çš„æ•ˆæœ</p>
<h2 data-id="heading-13">å·¥å…·æˆå“</h2>
<h3 data-id="heading-14">æŠ€æœ¯æ ˆä»‹ç»</h3>
<p>æ³¨æ„ï¼Œä»¥ä¸‹è¿™æ€»ç»“æ–‡æ¡£ï¼Œä¹Ÿæ˜¯soloå‡ºæ¥ï¼Œæˆ‘å†ä¿®æ”¹çš„</p>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d10c89a9b6ab470292893ffa86d60af3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rC05YaX5rC05a2a:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766158501&amp;x-signature=HtJLMNX1uPZKvbj0jpKQlTujXdE%3D" alt="ä»‹ç»å›¾ç‰‡.png" width="70%" loading="lazy"/>
<h3 data-id="heading-15">æ•ˆæœå›¾</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a4c7eade29f7422ebab5bf22c2ffd1c8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rC05YaX5rC05a2a:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766158501&amp;x-signature=oMFpx31Xw1DuCR0VH1T9%2BdX0WIk%3D" alt="æ•ˆæœå›¾.gif" loading="lazy"/></p>
<h3 data-id="heading-16">çº¿ä¸Šåœ°å€ï¼ˆä¸åŒ…å«åç«¯ï¼‰</h3>
<p>åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fashuai.site%3A24680%2F" target="_blank" title="https://ashuai.site:24680/" ref="nofollow noopener noreferrer">ashuai.site:24680/</a></p>
<p>æœåŠ¡å™¨å†…å­˜å®¹é‡åƒç´§ï¼Œå°±ä¸éƒ¨ç½²åç«¯äº†ï¼Œå¤§å®¶å¯ä»¥è‡ªå·±æ‹‰å–ä»£ç ï¼Œè‡ªå·±æœ¬æœºè·‘èµ·æ¥</p>
<h3 data-id="heading-17">githubä»“åº“ä»£ç </h3>
<p>åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fshuirongshuifu%2Fvideo2txt" target="_blank" title="https://github.com/shuirongshuifu/video2txt" ref="nofollow noopener noreferrer">github.com/shuirongshuâ€¦</a></p>
<h3 data-id="heading-18">æ³¨æ„ï¼Œè‹¥æ˜¯ç”Ÿäº§ç¯å¢ƒï¼Œé«˜å¯ç”¨ï¼Œç¬”è€…è¿˜æ˜¯å»ºè®®ï¼Œä½¿ç”¨äº‘æœåŠ¡å•†çš„ä»˜è´¹æ¥å£</h3>
<p>åŸå› ä¸»è¦æœ‰ä¸¤ç‚¹ï¼š</p>
<p>1.å¼€æºæ¨¡å‹çš„è¯†åˆ«å‡†ç¡®ç‡ã€2.æœåŠ¡å™¨ç»´æŠ¤æˆæœ¬</p>
<h2 data-id="heading-19">æ€»ç»“Trae SOLOæ¨¡å¼</h2>
<ul>
<li><strong>Trae SOLOæ¨¡å¼å°±æ˜¯æˆ‘ä»¬å¼€å‘è€…åŒ–èº«é¡¹ç›®ç»ç†è§’è‰²</strong></li>
<li><strong>Trea SOLOåŒ–èº«äº§å“ç»ç†å†™æ–‡æ¡£ã€åŠ ç¨‹åºå‘˜å†™ä»£ç è§’è‰²</strong></li>
<li><strong>æˆ‘ä»¬å¼€å‘è€…ï¼Œä¸»è¦æ˜¯è¿›è¡ŒæŠŠæ§ã€ç®¡æ§ã€è°ƒæ•´</strong></li>
<li><strong>ä»è€Œè®©å¼€å‘å‡ºæ¥çš„é¡¹ç›®ï¼Œç¬¦åˆé¢„æœŸ</strong></li>
</ul>
<p>æ•´ä½“ç”¨ä¸‹æ¥ï¼Œè¿˜æ˜¯èƒ½å¤Ÿæå‡å¾ˆå¤§çš„å¼€å‘æ•ˆç‡çš„</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç†è§£ Proxy åŸç†åŠå¦‚ä½•æ‹¦æˆª Mapã€Set ç­‰é›†åˆæ–¹æ³•è°ƒç”¨å®ç°è‡ªå®šä¹‰æ‹¦æˆªå’Œæ—¥å¿—â€”â€”å«ç¤ºä¾‹ä»£ç è§£æ]]></title>    <link>https://juejin.cn/post/7582776967818395648</link>    <guid>https://juejin.cn/post/7582776967818395648</guid>    <pubDate>2025-12-12T15:45:04.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582776967818395648" data-draft-id="7582783931163508771" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç†è§£ Proxy åŸç†åŠå¦‚ä½•æ‹¦æˆª Mapã€Set ç­‰é›†åˆæ–¹æ³•è°ƒç”¨å®ç°è‡ªå®šä¹‰æ‹¦æˆªå’Œæ—¥å¿—â€”â€”å«ç¤ºä¾‹ä»£ç è§£æ"/> <meta itemprop="keywords" content="JavaScript"/> <meta itemprop="datePublished" content="2025-12-12T15:45:04.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¦‚æœä½ å¥½"/> <meta itemprop="url" content="https://juejin.cn/user/2272012281328215"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç†è§£ Proxy åŸç†åŠå¦‚ä½•æ‹¦æˆª Mapã€Set ç­‰é›†åˆæ–¹æ³•è°ƒç”¨å®ç°è‡ªå®šä¹‰æ‹¦æˆªå’Œæ—¥å¿—â€”â€”å«ç¤ºä¾‹ä»£ç è§£æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2272012281328215/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¦‚æœä½ å¥½
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-12T15:45:04.000Z" title="Fri Dec 12 2025 15:45:04 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å…ˆç†è§£ Proxy çš„æ ¸å¿ƒæ€æƒ³</h2>
<p>Proxy å°±åƒä¸€ä¸ªâ€œæ‹¦æˆªå™¨â€ï¼Œå®ƒå¯ä»¥â€œç›‘å¬â€ä¸€ä¸ªå¯¹è±¡çš„æ“ä½œï¼Œæ¯”å¦‚ï¼š</p>
<ul>
<li>è®¿é—®å¯¹è±¡çš„å±æ€§ï¼ˆè¯»å–ï¼‰ â†’ è§¦å‘ <code>get</code> æ‹¦æˆªå™¨</li>
<li>ç»™å¯¹è±¡çš„å±æ€§èµ‹å€¼ï¼ˆå†™å…¥ï¼‰ â†’ è§¦å‘ <code>set</code> æ‹¦æˆªå™¨</li>
<li>è°ƒç”¨å¯¹è±¡çš„æ–¹æ³• â†’ å…¶å®æ˜¯å…ˆè®¿é—®æ–¹æ³•ï¼ˆè§¦å‘ <code>get</code>ï¼‰ï¼Œå†æ‰§è¡Œå®ƒ</li>
</ul>
<hr/>
<h2 data-id="heading-1">ä½†é›†åˆç±»å‹ï¼ˆMapã€Set ç­‰ï¼‰ä¸ç›´æ¥ç”¨å±æ€§èµ‹å€¼æ¥å†™å…¥æ•°æ®</h2>
<ul>
<li>Map å†™å…¥æ•°æ®æ˜¯è°ƒç”¨å®ƒçš„ <code>set(key, value)</code> æ–¹æ³•</li>
<li>Set å†™å…¥æ•°æ®æ˜¯è°ƒç”¨å®ƒçš„ <code>add(value)</code> æ–¹æ³•</li>
<li>è¯»å–æ•°æ®æ˜¯è°ƒç”¨ Map çš„ <code>get(key)</code> æˆ– Set çš„ <code>has(value)</code> æ–¹æ³•</li>
</ul>
<p>æ‰€ä»¥ï¼Œæˆ‘ä»¬æƒ³æ‹¦æˆªâ€œå†™å…¥â€æ“ä½œï¼Œå°±è¦æ‹¦æˆªè¿™äº›æ–¹æ³•çš„è°ƒç”¨ã€‚</p>
<hr/>
<h2 data-id="heading-2">Proxy æ€ä¹ˆæ‹¦æˆªæ–¹æ³•è°ƒç”¨ï¼Ÿ</h2>
<ul>
<li>å½“ä½ è®¿é—® <code>proxyMap.set</code>ï¼Œä¼šè§¦å‘ Proxy çš„ <code>get</code> æ‹¦æˆªå™¨ï¼Œå‘Šè¯‰ä½ è®¿é—®äº† <code>set</code> æ–¹æ³•ã€‚</li>
<li>è¿™æ—¶æˆ‘ä»¬è¿”å›ä¸€ä¸ªâ€œåŒ…è£…å‡½æ•°â€ï¼Œè¿™ä¸ªå‡½æ•°å†…éƒ¨å¯ä»¥æ’å…¥è‡ªå®šä¹‰é€»è¾‘ï¼ˆæ¯”å¦‚æ‰“å°æ—¥å¿—ï¼‰ï¼Œç„¶åå†è°ƒç”¨åŸå§‹çš„ <code>set</code> æ–¹æ³•ã€‚</li>
<li>è¿™æ ·å°±å®ç°äº†â€œæ‹¦æˆªå†™å…¥æ“ä½œâ€ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-3">å…·ä½“ç¤ºä¾‹ï¼šæ‹¦æˆª Map çš„è¯»å–å’Œå†™å…¥</h2>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> map = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();

<span class="hljs-keyword">const</span> handler = {
  <span class="hljs-title function_">get</span>(<span class="hljs-params">target, prop, receiver</span>) {
    <span class="hljs-comment">// è®¿é—®å±æ€§æˆ–æ–¹æ³•æ—¶è§¦å‘</span>
    <span class="hljs-keyword">const</span> origMethod = target[prop];
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> origMethod === <span class="hljs-string">'function'</span>) {
      <span class="hljs-comment">// å¦‚æœè®¿é—®çš„æ˜¯æ–¹æ³•ï¼Œè¿”å›ä¸€ä¸ªåŒ…è£…å‡½æ•°</span>
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span> (<span class="hljs-params">...args</span>) {
        <span class="hljs-keyword">if</span> (prop === <span class="hljs-string">'set'</span>) {
          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`å†™å…¥æ“ä½œï¼šset(<span class="hljs-subst">${args[<span class="hljs-number">0</span>]}</span>, <span class="hljs-subst">${args[<span class="hljs-number">1</span>]}</span>)`</span>);
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (prop === <span class="hljs-string">'get'</span>) {
          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`è¯»å–æ“ä½œï¼šget(<span class="hljs-subst">${args[<span class="hljs-number">0</span>]}</span>)`</span>);
        }
        <span class="hljs-comment">// è°ƒç”¨åŸå§‹æ–¹æ³•</span>
        <span class="hljs-keyword">return</span> origMethod.<span class="hljs-title function_">apply</span>(target, args);
      };
    }
    <span class="hljs-comment">// è®¿é—®æ™®é€šå±æ€§ï¼Œç›´æ¥è¿”å›</span>
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">get</span>(target, prop, receiver);
  }
};

<span class="hljs-keyword">const</span> proxyMap = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Proxy</span>(map, handler);

proxyMap.<span class="hljs-title function_">set</span>(<span class="hljs-string">'name'</span>, <span class="hljs-string">'CodeMoss'</span>);  <span class="hljs-comment">// æ§åˆ¶å°è¾“å‡ºï¼šå†™å…¥æ“ä½œï¼šset(name, CodeMoss)</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(proxyMap.<span class="hljs-title function_">get</span>(<span class="hljs-string">'name'</span>)); <span class="hljs-comment">// æ§åˆ¶å°è¾“å‡ºï¼šè¯»å–æ“ä½œï¼šget(name)</span>
                                   <span class="hljs-comment">// è¾“å‡ºï¼šCodeMoss</span>
</code></pre>
<hr/>
<h2 data-id="heading-4">å¯ä»¥æŠŠå®ƒç†è§£æˆï¼š</h2>
<ul>
<li>è®¿é—® <code>proxyMap.set</code> â†’ Proxy æ‹¦æˆªï¼Œè¿”å›ä¸€ä¸ªâ€œå¸¦æ—¥å¿—â€çš„å‡½æ•°</li>
<li>è°ƒç”¨è¿™ä¸ªå‡½æ•°æ—¶ï¼Œå…ˆæ‰“å°æ—¥å¿—ï¼Œå†è°ƒç”¨çœŸæ­£çš„ <code>map.set</code></li>
</ul>
<hr/>
<h2 data-id="heading-5">Set ä¹Ÿæ˜¯ç±»ä¼¼çš„ï¼Œåªæ˜¯å†™å…¥æ–¹æ³•å« <code>add</code>ï¼Œè¯»å–æ–¹æ³•å« <code>has</code></h2>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> set = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>();

<span class="hljs-keyword">const</span> handler = {
  <span class="hljs-title function_">get</span>(<span class="hljs-params">target, prop, receiver</span>) {
    <span class="hljs-keyword">const</span> origMethod = target[prop];
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> origMethod === <span class="hljs-string">'function'</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span> (<span class="hljs-params">...args</span>) {
        <span class="hljs-keyword">if</span> (prop === <span class="hljs-string">'add'</span>) {
          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`å†™å…¥æ“ä½œï¼šadd(<span class="hljs-subst">${args[<span class="hljs-number">0</span>]}</span>)`</span>);
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (prop === <span class="hljs-string">'has'</span>) {
          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`è¯»å–æ“ä½œï¼šhas(<span class="hljs-subst">${args[<span class="hljs-number">0</span>]}</span>)`</span>);
        }
        <span class="hljs-keyword">return</span> origMethod.<span class="hljs-title function_">apply</span>(target, args);
      };
    }
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">get</span>(target, prop, receiver);
  }
};

<span class="hljs-keyword">const</span> proxySet = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Proxy</span>(set, handler);

proxySet.<span class="hljs-title function_">add</span>(<span class="hljs-number">123</span>);  <span class="hljs-comment">// æ§åˆ¶å°è¾“å‡ºï¼šå†™å…¥æ“ä½œï¼šadd(123)</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(proxySet.<span class="hljs-title function_">has</span>(<span class="hljs-number">123</span>)); <span class="hljs-comment">// æ§åˆ¶å°è¾“å‡ºï¼šè¯»å–æ“ä½œï¼šhas(123)</span>
                               <span class="hljs-comment">// è¾“å‡ºï¼štrue</span>
</code></pre>
<hr/>
<h2 data-id="heading-6">WeakMap å’Œ WeakSet ä¹Ÿä¸€æ ·ï¼Œåªæ˜¯å®ƒä»¬çš„é”®æˆ–å€¼å¿…é¡»æ˜¯å¯¹è±¡ï¼Œä¸”ä¸èƒ½éå†</h2>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> weakMap = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WeakMap</span>();

<span class="hljs-keyword">const</span> handler = {
  <span class="hljs-title function_">get</span>(<span class="hljs-params">target, prop, receiver</span>) {
    <span class="hljs-keyword">const</span> origMethod = target[prop];
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> origMethod === <span class="hljs-string">'function'</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span> (<span class="hljs-params">...args</span>) {
        <span class="hljs-keyword">if</span> (prop === <span class="hljs-string">'set'</span>) {
          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'WeakMap å†™å…¥æ“ä½œï¼Œé”®:'</span>, args[<span class="hljs-number">0</span>], <span class="hljs-string">'å€¼:'</span>, args[<span class="hljs-number">1</span>]);
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (prop === <span class="hljs-string">'get'</span>) {
          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'WeakMap è¯»å–æ“ä½œï¼Œé”®:'</span>, args[<span class="hljs-number">0</span>]);
        }
        <span class="hljs-keyword">return</span> origMethod.<span class="hljs-title function_">apply</span>(target, args);
      };
    }
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">get</span>(target, prop, receiver);
  }
};

<span class="hljs-keyword">const</span> proxyWeakMap = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Proxy</span>(weakMap, handler);

<span class="hljs-keyword">const</span> objKey = {};
proxyWeakMap.<span class="hljs-title function_">set</span>(objKey, <span class="hljs-string">'secret'</span>);  <span class="hljs-comment">// æ§åˆ¶å°è¾“å‡ºï¼šWeakMap å†™å…¥æ“ä½œï¼Œé”®: {} å€¼: secret</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(proxyWeakMap.<span class="hljs-title function_">get</span>(objKey)); <span class="hljs-comment">// æ§åˆ¶å°è¾“å‡ºï¼šWeakMap è¯»å–æ“ä½œï¼Œé”®: {}</span>
                                       <span class="hljs-comment">// è¾“å‡ºï¼šsecret</span>
</code></pre>
<hr/>
<h2 data-id="heading-7">æ€»ç»“</h2>
<ul>
<li>Proxy çš„ <code>get</code> æ‹¦æˆªå™¨æ‹¦æˆªçš„æ˜¯â€œå±æ€§è®¿é—®â€ï¼Œæ–¹æ³•è°ƒç”¨æ˜¯å…ˆè®¿é—®æ–¹æ³•å†æ‰§è¡Œã€‚</li>
<li>é›†åˆçš„å†™å…¥å’Œè¯»å–éƒ½æ˜¯é€šè¿‡è°ƒç”¨æ–¹æ³•å®ç°çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬æ‹¦æˆªæ–¹æ³•è®¿é—®ï¼Œè¿”å›åŒ…è£…å‡½æ•°ã€‚</li>
<li>åŒ…è£…å‡½æ•°é‡Œå¯ä»¥æ’å…¥è‡ªå®šä¹‰é€»è¾‘ï¼ˆæ—¥å¿—ã€æƒé™ç­‰ï¼‰ï¼Œç„¶åè°ƒç”¨åŸå§‹æ–¹æ³•å®Œæˆæ“ä½œã€‚</li>
</ul>
<hr/>
<p>æŠŠ const objKey = {}; æ¢æˆ mapâ€ï¼ŒæŠŠ WeakMap çš„é”®ä»ä¸€ä¸ªæ™®é€šå¯¹è±¡ <code>{}</code> æ¢æˆä¸€ä¸ª Map å¯¹è±¡ã€‚</p>
<hr/>
<h3 data-id="heading-8">å…ˆè¯´æ˜ä¸€ç‚¹ï¼š</h3>
<p>WeakMap çš„é”®å¿…é¡»æ˜¯<strong>å¯¹è±¡</strong>ï¼Œè€Œ Map æœ¬èº«æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼ˆå®ƒæ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°å®ä¾‹ï¼‰ï¼Œæ‰€ä»¥ç†è®ºä¸Šæ˜¯å¯ä»¥ä½œä¸º WeakMap çš„é”®çš„ã€‚</p>
<hr/>
<h3 data-id="heading-9">å¯ä»¥è¿™æ ·å†™ï¼š</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> weakMap = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WeakMap</span>();

<span class="hljs-keyword">const</span> handler = {
  <span class="hljs-title function_">get</span>(<span class="hljs-params">target, prop, receiver</span>) {
    <span class="hljs-keyword">const</span> origMethod = target[prop];
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> origMethod === <span class="hljs-string">'function'</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span> (<span class="hljs-params">...args</span>) {
        <span class="hljs-keyword">if</span> (prop === <span class="hljs-string">'set'</span>) {
          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'WeakMap å†™å…¥æ“ä½œï¼Œé”®:'</span>, args[<span class="hljs-number">0</span>], <span class="hljs-string">'å€¼:'</span>, args[<span class="hljs-number">1</span>]);
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (prop === <span class="hljs-string">'get'</span>) {
          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'WeakMap è¯»å–æ“ä½œï¼Œé”®:'</span>, args[<span class="hljs-number">0</span>]);
        }
        <span class="hljs-keyword">return</span> origMethod.<span class="hljs-title function_">apply</span>(target, args);
      };
    }
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">get</span>(target, prop, receiver);
  }
};

<span class="hljs-keyword">const</span> proxyWeakMap = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Proxy</span>(weakMap, handler);

<span class="hljs-comment">// è¿™é‡Œç”¨ Map ä½œä¸ºé”®</span>
<span class="hljs-keyword">const</span> mapKey = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();

proxyWeakMap.<span class="hljs-title function_">set</span>(mapKey, <span class="hljs-string">'secret'</span>);  <span class="hljs-comment">// æ§åˆ¶å°è¾“å‡ºï¼šWeakMap å†™å…¥æ“ä½œï¼Œé”®: Map {} å€¼: secret</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(proxyWeakMap.<span class="hljs-title function_">get</span>(mapKey)); <span class="hljs-comment">// æ§åˆ¶å°è¾“å‡ºï¼šWeakMap è¯»å–æ“ä½œï¼Œé”®: Map {}</span>
                                       <span class="hljs-comment">// è¾“å‡ºï¼šsecret</span>
</code></pre>
<hr/>
<h3 data-id="heading-10">è§£é‡Šï¼š</h3>
<ul>
<li><code>mapKey</code> æ˜¯ä¸€ä¸ª Map å®ä¾‹ï¼Œå±äºå¯¹è±¡ç±»å‹ï¼Œå¯ä»¥ä½œä¸º WeakMap çš„é”®ã€‚</li>
<li>WeakMap å…è®¸ä»»ä½•å¯¹è±¡ä½œä¸ºé”®ï¼ŒåŒ…æ‹¬æ™®é€šå¯¹è±¡ã€æ•°ç»„ã€å‡½æ•°ã€ç”šè‡³ Mapã€Set ç­‰å®ä¾‹ã€‚</li>
<li>ç”¨ Map ä½œä¸ºé”®ï¼Œå®Œå…¨æ²¡é—®é¢˜ã€‚</li>
</ul>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€èŠ‚ç‚¹ã€‘[Adjustment-InvertColorsèŠ‚ç‚¹]åŸç†è§£æä¸å®é™…åº”ç”¨]]></title>    <link>https://juejin.cn/post/7582854603060183082</link>    <guid>https://juejin.cn/post/7582854603060183082</guid>    <pubDate>2025-12-13T03:26:32.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582854603060183082" data-draft-id="7582813955212656681" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€èŠ‚ç‚¹ã€‘[Adjustment-InvertColorsèŠ‚ç‚¹]åŸç†è§£æä¸å®é™…åº”ç”¨"/> <meta itemprop="keywords" content="æ¸¸æˆå¼€å‘,å›¾å½¢å­¦,Unity3D"/> <meta itemprop="datePublished" content="2025-12-13T03:26:32.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="SmalBox"/> <meta itemprop="url" content="https://juejin.cn/user/2218166695237532"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€èŠ‚ç‚¹ã€‘[Adjustment-InvertColorsèŠ‚ç‚¹]åŸç†è§£æä¸å®é™…åº”ç”¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2218166695237532/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    SmalBox
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-13T03:26:32.000Z" title="Sat Dec 13 2025 03:26:32 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2Fchenghai37%2Fcategory_13074589.html%3Ffromshare%3Dblogcolumn%26sharetype%3Dblogcolumn%26sharerId%3D13074589%26sharerefer%3DPC%26sharesource%3Dchenghai37%26sharefrom%3Dfrom_link" target="_blank" title="https://blog.csdn.net/chenghai37/category_13074589.html?fromshare=blogcolumn&amp;sharetype=blogcolumn&amp;sharerId=13074589&amp;sharerefer=PC&amp;sharesource=chenghai37&amp;sharefrom=from_link" ref="nofollow noopener noreferrer">ã€Unity Shader Graph ä½¿ç”¨ä¸ç‰¹æ•ˆå®ç°ã€‘</a><strong>ä¸“æ -ç›´è¾¾</strong></p>
</blockquote>
<p>Unity URP Shader Graphä¸­çš„Invert ColorsèŠ‚ç‚¹æ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„é¢œè‰²å¤„ç†å·¥å…·ï¼Œèƒ½å¤ŸåŸºäºæ¯ä¸ªé€šé“å•ç‹¬åè½¬è¾“å…¥é¢œè‰²çš„æ•°å€¼ã€‚å…¶è®¾è®¡ç†å¿µæ˜¯é€šè¿‡æ•°å­¦è¿ç®—å°†é¢œè‰²å€¼åœ¨å…¶å–å€¼èŒƒå›´å†…ç¿»è½¬ï¼Œä»¥åˆ›é€ å¤šæ ·çš„è§†è§‰æ•ˆæœå’Œè‰ºæœ¯è¡¨ç°ã€‚åœ¨è®¡ç®—æœºå›¾å½¢å­¦ä¸­ï¼Œé¢œè‰²åè½¬æ˜¯ä¸€é¡¹åŸºç¡€ä¸”é‡è¦çš„å›¾åƒå¤„ç†æŠ€æœ¯ï¼Œå¯ä¸ºæ¸¸æˆå¼€å‘è€…æä¾›ä¸°å¯Œçš„è§†è§‰è¡¨ç°æ‰‹æ®µã€‚</p>
<p>è¯¥èŠ‚ç‚¹å‡è®¾æ‰€æœ‰è¾“å…¥å€¼å‡å¤„äº0åˆ°1çš„æ ‡å‡†èŒƒå›´å†…ï¼Œè¿™æ˜¯è®¡ç®—æœºå›¾å½¢å­¦ä¸­é¢œè‰²å€¼çš„æ ‡å‡†è¡¨ç¤ºæ–¹å¼ã€‚åœ¨Unityçš„Shader Graphç¯å¢ƒä¸­ï¼Œé¢œè‰²é€šé“é€šå¸¸ä»¥æµ®ç‚¹æ•°è¡¨ç¤ºï¼Œå…¶ä¸­0è¡¨ç¤ºè¯¥é¢œè‰²çš„æœ€ä½å¼ºåº¦ï¼ˆå³å®Œå…¨æ— è¯¥é¢œè‰²ï¼‰ï¼Œ1è¡¨ç¤ºè¯¥é¢œè‰²çš„æœ€é«˜å¼ºåº¦ï¼ˆå³å®Œå…¨é¥±å’Œï¼‰ã€‚è¿™ç§æ ‡å‡†åŒ–å¤„ç†ä½¿é¢œè‰²è®¡ç®—æ›´åŠ ç»Ÿä¸€å’Œå¯é¢„æµ‹ã€‚</p>
<p>é¢œè‰²åè½¬çš„æ ¸å¿ƒåŸç†æ˜¯ä»åŸºå‡†å€¼ä¸­å‡å»å½“å‰é¢œè‰²å€¼ï¼Œä»è€Œå¾—åˆ°ç›¸åçš„é¢œè‰²æ•ˆæœã€‚åœ¨RGBé¢œè‰²æ¨¡å‹ä¸­ï¼Œè¿™ç›¸å½“äºè®¡ç®—æ¯ä¸ªé¢œè‰²é€šé“çš„â€œè¡¥è‰²â€ã€‚ä¾‹å¦‚ï¼Œçº¯çº¢è‰²ï¼ˆ1,0,0ï¼‰åè½¬åä¼šå˜ä¸ºé’è‰²ï¼ˆ0,1,1ï¼‰ï¼Œçº¯ç»¿è‰²ï¼ˆ0,1,0ï¼‰ä¼šå˜ä¸ºå“çº¢è‰²ï¼ˆ1,0,1ï¼‰ï¼Œè€Œçº¯è“è‰²ï¼ˆ0,0,1ï¼‰åˆ™ä¼šå˜ä¸ºé»„è‰²ï¼ˆ1,1,0ï¼‰ã€‚è¿™ç§é¢œè‰²è½¬æ¢å…³ç³»åŸºäºè‰²å½©ç†è®ºä¸­çš„äº’è¡¥è‰²æ¦‚å¿µï¼Œä¸ºæ¸¸æˆè§†è§‰æ•ˆæœè®¾è®¡æä¾›äº†ç†è®ºåŸºç¡€ã€‚</p>
<h2 data-id="heading-0">ç«¯å£è¯¦è§£</h2>
<p><img src="https://docs.unity.cn/cn/Packages-cn/com.unity.shadergraph@14.0/manual/images/InvertColorsNodeThumb.png" alt="img" loading="lazy"/>
è¾“å…¥ç«¯å£æ˜¯èŠ‚ç‚¹æ¥æ”¶æ•°æ®çš„æ¥å£ï¼ŒInvert ColorsèŠ‚ç‚¹çš„è¾“å…¥ç«¯å£è®¾è®¡ä½“ç°äº†å…¶çµæ´»æ€§å’Œé€‚åº”æ€§ï¼š</p>
<p><strong>è¾“å…¥ç«¯å£ï¼ˆInï¼‰</strong></p>
<ul>
<li>æ–¹å‘ï¼šè¾“å…¥</li>
<li>ç±»å‹ï¼šåŠ¨æ€çŸ¢é‡</li>
<li>ç»‘å®šï¼šæ— </li>
<li>åŠŸèƒ½æè¿°ï¼šè¯¥ç«¯å£æ¥æ”¶å¾…å¤„ç†çš„é¢œè‰²æˆ–çŸ¢é‡æ•°æ®ã€‚ä½œä¸ºåŠ¨æ€çŸ¢é‡ç±»å‹ï¼Œå®ƒå¯ä»¥æ¥å—ä¸åŒç»´åº¦çš„è¾“å…¥æ•°æ®ï¼ŒåŒ…æ‹¬ï¼š
<ul>
<li>æµ®ç‚¹æ•°ï¼ˆå•é€šé“ï¼‰</li>
<li>äºŒç»´çŸ¢é‡ï¼ˆä¸¤ä¸ªé€šé“ï¼‰</li>
<li>ä¸‰ç»´çŸ¢é‡ï¼ˆRGBé¢œè‰²ï¼‰</li>
<li>å››ç»´çŸ¢é‡ï¼ˆRGBAé¢œè‰²ï¼‰</li>
</ul>
</li>
</ul>
<p>è¿™ç§åŠ¨æ€ç‰¹æ€§ä½¿èŠ‚ç‚¹èƒ½å¤Ÿé€‚åº”å„ç§ä½¿ç”¨åœºæ™¯ï¼Œä»ç®€å•çš„å•å€¼åè½¬åˆ°å¤æ‚çš„å¤šé€šé“é¢œè‰²å¤„ç†å‡å¯èƒœä»»ã€‚</p>
<p><strong>è¾“å‡ºç«¯å£ï¼ˆOutï¼‰</strong></p>
<ul>
<li>æ–¹å‘ï¼šè¾“å‡º</li>
<li>ç±»å‹ï¼šåŠ¨æ€çŸ¢é‡</li>
<li>ç»‘å®šï¼šæ— </li>
<li>åŠŸèƒ½æè¿°ï¼šè¾“å‡ºç»è¿‡é¢œè‰²åè½¬å¤„ç†åçš„ç»“æœã€‚è¾“å‡ºæ•°æ®çš„ç»´åº¦ä¸è¾“å…¥æ•°æ®ä¿æŒä¸€è‡´ï¼Œç¡®ä¿æ•°æ®å¤„ç†çš„ä¸€è‡´æ€§ã€‚è¾“å‡ºå€¼çš„è®¡ç®—åŸºäºæ¯ä¸ªå¯ç”¨åè½¬çš„é€šé“å•ç‹¬è¿›è¡Œï¼Œæœªå¯ç”¨çš„é€šé“åˆ™ä¿æŒåŸå€¼ä¸å˜ã€‚</li>
</ul>
<h2 data-id="heading-1">æ§ä»¶ç³»ç»Ÿ</h2>
<p>Invert ColorsèŠ‚ç‚¹çš„æ§ä»¶ç³»ç»Ÿæä¾›äº†ç²¾ç»†çš„é€šé“æ§åˆ¶èƒ½åŠ›ï¼Œä½¿å¼€å‘è€…èƒ½å¤Ÿæ ¹æ®å…·ä½“éœ€æ±‚å®šåˆ¶åè½¬æ•ˆæœï¼š</p>
<p><strong>çº¢è‰²é€šé“æ§åˆ¶ï¼ˆRedï¼‰</strong></p>
<ul>
<li>ç±»å‹ï¼šå¸ƒå°”å¼€å…³</li>
<li>é€‰é¡¹ï¼šTrueï¼ˆå¯ç”¨ï¼‰ã€Falseï¼ˆç¦ç”¨ï¼‰</li>
<li>åŠŸèƒ½è¯´æ˜ï¼šå½“è®¾ç½®ä¸ºtrueæ—¶ï¼Œå¯¹è¾“å…¥å€¼çš„çº¢è‰²é€šé“è¿›è¡Œåè½¬å¤„ç†ã€‚åè½¬è®¡ç®—é‡‡ç”¨æ ‡å‡†çš„é¢œè‰²åè½¬ç®—æ³•ï¼šOut.r = 1 - In.rã€‚è¿™ä¸€ç®€å•çš„æ•°å­¦è¿ç®—èƒ½å¤Ÿäº§ç”Ÿæ˜¾è‘—çš„è§†è§‰æ•ˆæœï¼Œçº¢è‰²è¶Šå¼ºçš„åŒºåŸŸåœ¨åè½¬åé’è‰²è¶Šæ˜æ˜¾ã€‚</li>
</ul>
<p><strong>ç»¿è‰²é€šé“æ§åˆ¶ï¼ˆGreenï¼‰</strong></p>
<ul>
<li>ç±»å‹ï¼šå¸ƒå°”å¼€å…³</li>
<li>é€‰é¡¹ï¼šTrueï¼ˆå¯ç”¨ï¼‰ã€Falseï¼ˆç¦ç”¨ï¼‰</li>
<li>åŠŸèƒ½ç‰¹ç‚¹ï¼šè¯¥æ§ä»¶å…·æœ‰æ™ºèƒ½çš„ç»´åº¦æ„ŸçŸ¥åŠŸèƒ½ã€‚å½“è¾“å…¥çŸ¢é‡ç»´åº¦å°äº2æ—¶ï¼ˆå¦‚å•é€šé“æ ‡é‡ï¼‰ï¼Œç»¿è‰²é€šé“æ§ä»¶ä¼šè‡ªåŠ¨ç¦ç”¨ï¼Œå› ä¸ºæ­¤æ—¶ä¸å­˜åœ¨ç»¿è‰²é€šé“å¯ä¾›æ“ä½œã€‚è¿™ç§è®¾è®¡é¿å…äº†æ— æ•ˆæ“ä½œï¼Œæå‡äº†èŠ‚ç‚¹çš„ç”¨æˆ·å‹å¥½æ€§ã€‚</li>
</ul>
<p><strong>è“è‰²é€šé“æ§åˆ¶ï¼ˆBlueï¼‰</strong></p>
<ul>
<li>ç±»å‹ï¼šå¸ƒå°”å¼€å…³</li>
<li>é€‰é¡¹ï¼šTrueï¼ˆå¯ç”¨ï¼‰ã€Falseï¼ˆç¦ç”¨ï¼‰</li>
<li>æ™ºèƒ½æ£€æµ‹ï¼šä¸ç»¿è‰²é€šé“ç±»ä¼¼ï¼Œè“è‰²é€šé“æ§ä»¶ä¹Ÿä¼šæ ¹æ®è¾“å…¥æ•°æ®çš„ç»´åº¦è‡ªåŠ¨è°ƒæ•´å¯ç”¨æ€§ã€‚åªæœ‰å½“è¾“å…¥çŸ¢é‡åŒ…å«è‡³å°‘ä¸‰ä¸ªé€šé“æ—¶ï¼Œè“è‰²é€šé“æ§ä»¶æ‰å¤„äºå¯æ“ä½œçŠ¶æ€ã€‚è¿™ç§ç»´åº¦æ„ŸçŸ¥æœºåˆ¶ç¡®ä¿äº†æ“ä½œçš„åˆç†æ€§å’Œç³»ç»Ÿçš„ç¨³å®šæ€§ã€‚</li>
</ul>
<p><strong>Alphaé€šé“æ§åˆ¶ï¼ˆAlphaï¼‰</strong></p>
<ul>
<li>ç±»å‹ï¼šå¸ƒå°”å¼€å…³</li>
<li>é€‰é¡¹ï¼šTrueï¼ˆå¯ç”¨ï¼‰ã€Falseï¼ˆç¦ç”¨ï¼‰</li>
<li>ç‰¹æ®ŠåŠŸèƒ½ï¼šAlphaé€šé“æ§åˆ¶ä¸“é—¨å¤„ç†é€æ˜åº¦ä¿¡æ¯çš„åè½¬ã€‚å½“è¾“å…¥æ•°æ®ä¸ºå››ç»´çŸ¢é‡æ—¶ï¼Œè¯¥æ§ä»¶å¯ç”¨ã€‚Alphaé€šé“åè½¬èƒ½å¤Ÿåˆ›é€ å‡ºç‹¬ç‰¹çš„é€æ˜åº¦æ•ˆæœï¼Œä¾‹å¦‚å°†å®Œå…¨ä¸é€æ˜çš„åŒºåŸŸå˜ä¸ºå®Œå…¨é€æ˜ï¼Œæˆ–åˆ›å»ºç‰¹æ®Šçš„é®ç½©æ•ˆæœã€‚</li>
</ul>
<h2 data-id="heading-2">æ•°å­¦åŸç†ä¸ç®—æ³•å®ç°</h2>
<p>Invert ColorsèŠ‚ç‚¹çš„æ ¸å¿ƒç®—æ³•åŸºäºå‘é‡è¿ç®—å’Œé€šé“åˆ†ç¦»å¤„ç†ã€‚å…¶æ•°å­¦è¡¨è¾¾å¼å¯åˆ†è§£ä¸ºï¼š</p>
<p>å¯¹äºæ¯ä¸ªé¢œè‰²é€šé“iï¼ˆi âˆˆ {r, g, b, a}ï¼‰ï¼Œåè½¬è®¡ç®—éµå¾ªä»¥ä¸‹è§„åˆ™ï¼š Out.i = Control.i ? (1 - In.i) : In.i</p>
<p>å…¶ä¸­Control.iè¡¨ç¤ºå¯¹åº”é€šé“çš„å¸ƒå°”æ§åˆ¶å€¼ã€‚è¿™ç§æŒ‰é€šé“ç‹¬ç«‹å¤„ç†çš„æ–¹å¼æä¾›äº†æå¤§çš„çµæ´»æ€§ï¼Œå…è®¸å¼€å‘è€…åˆ›å»ºå¤æ‚çš„åˆ†é€šé“åè½¬æ•ˆæœã€‚</p>
<p>åœ¨Shader Graphçš„åº•å±‚å®ç°ä¸­ï¼Œè¯¥èŠ‚ç‚¹ç”Ÿæˆç›¸åº”çš„HLSLä»£ç ã€‚èŠ‚ç‚¹å†…éƒ¨ç»´æŠ¤ä¸€ä¸ªæ§åˆ¶å‘é‡_InvertColors_InvertColorsï¼Œè¯¥å‘é‡å­˜å‚¨äº†å„ä¸ªé€šé“çš„åè½¬çŠ¶æ€ã€‚å®é™…çš„é¢œè‰²åè½¬æ“ä½œåœ¨Unity_InvertColors_float4å‡½æ•°ä¸­å®Œæˆï¼Œè¯¥å‡½æ•°æ¥æ”¶è¾“å…¥é¢œè‰²ã€åè½¬æ§åˆ¶å‘é‡ï¼Œå¹¶è¾“å‡ºå¤„ç†åçš„é¢œè‰²å€¼ã€‚</p>
<h2 data-id="heading-3">å®é™…åº”ç”¨åœºæ™¯</h2>
<p><strong>æ¸¸æˆè§†è§‰æ•ˆæœ</strong></p>
<ul>
<li>ä¼¤å®³æ•ˆæœè¡¨ç°ï¼šå½“è§’è‰²å—åˆ°ä¼¤å®³æ—¶ï¼Œé€šè¿‡çŸ­æš‚çš„é¢œè‰²åè½¬åˆ›é€ è§†è§‰å†²å‡»</li>
<li>ç‰¹æ®ŠçŠ¶æ€æŒ‡ç¤ºï¼šç”¨äºè¡¨ç°è§’è‰²çš„ä¸­æ¯’ã€çœ©æ™•ã€é­”æ³•æ•ˆæœç­‰å¼‚å¸¸çŠ¶æ€</li>
<li>åœºæ™¯è½¬æ¢è¿‡æ¸¡ï¼šåœ¨åœºæ™¯åˆ‡æ¢æ—¶ä½¿ç”¨é¢œè‰²åè½¬ä½œä¸ºè½¬åœºæ•ˆæœ</li>
<li>è¶…è‡ªç„¶ç°è±¡æ¨¡æ‹Ÿï¼šè¡¨ç°å¹½çµã€å¹»å½±ã€å¼‚ä¸–ç•Œç­‰è¶…è‡ªç„¶è§†è§‰æ•ˆæœ</li>
</ul>
<p><strong>ç”¨æˆ·ç•Œé¢è®¾è®¡</strong></p>
<ul>
<li>æŒ‰é’®äº¤äº’åé¦ˆï¼šåœ¨æŒ‰é’®æŒ‰ä¸‹æ—¶ä½¿ç”¨éƒ¨åˆ†é€šé“åè½¬åˆ›é€ è§†è§‰åé¦ˆ</li>
<li>é«˜äº®æç¤ºæ•ˆæœï¼šé€šè¿‡é€‰æ‹©æ€§åè½¬çªå‡ºæ˜¾ç¤ºé‡è¦UIå…ƒç´ </li>
<li>ä¸»é¢˜åˆ‡æ¢è¿‡æ¸¡ï¼šåœ¨ä¸åŒç•Œé¢ä¸»é¢˜é—´åˆ‡æ¢æ—¶ä½¿ç”¨é¢œè‰²åè½¬å¹³æ»‘è¿‡æ¸¡</li>
<li>çŠ¶æ€æŒ‡ç¤ºå™¨ï¼šç”¨é¢œè‰²åè½¬è¡¨ç¤ºç³»ç»ŸçŠ¶æ€å˜åŒ–ï¼Œå¦‚ç”µé‡ä¸è¶³ã€ç½‘ç»œæ–­å¼€ç­‰</li>
</ul>
<p><strong>è‰ºæœ¯é£æ ¼åŒ–å¤„ç†</strong></p>
<ul>
<li>è´Ÿç‰‡æ•ˆæœåˆ›ä½œï¼šå®Œå…¨åè½¬æ‰€æœ‰é¢œè‰²é€šé“åˆ›å»ºç…§ç‰‡è´Ÿç‰‡æ•ˆæœ</li>
<li>è‰²è°ƒåˆ†ç¦»æŠ€æœ¯ï¼šç»“åˆå…¶ä»–ç€è‰²å™¨èŠ‚ç‚¹åˆ›å»ºå¤æ‚çš„è‰²å½©åˆ†ç¦»æ•ˆæœ</li>
<li>åŠ¨æ€è‰²å½©å¾ªç¯ï¼šé€šè¿‡åŠ¨ç”»æ§åˆ¶åè½¬å‚æ•°åˆ›å»ºæµåŠ¨çš„è‰²å½©æ•ˆæœ</li>
<li>æè´¨ç‰¹æ€§è¡¨ç°ï¼šç”¨äºå¼ºè°ƒç‰¹å®šæè´¨çš„åå°„ã€æŠ˜å°„ç­‰å…‰å­¦ç‰¹æ€§</li>
</ul>
<h2 data-id="heading-4">æ€§èƒ½åˆ†æä¸ä¼˜åŒ–å»ºè®®</h2>
<p>Invert ColorsèŠ‚ç‚¹åœ¨æ€§èƒ½æ–¹é¢çš„è¡¨ç°ä¸»è¦å–å†³äºä»¥ä¸‹å‡ ä¸ªå› ç´ ï¼š</p>
<p><strong>è®¡ç®—å¤æ‚åº¦åˆ†æ</strong></p>
<ul>
<li>å•ä¸ªé€šé“åè½¬æ“ä½œéœ€è¦ä¸€æ¬¡å‡æ³•è¿ç®—</li>
<li>å››é€šé“å®Œå…¨åè½¬å…±éœ€è¦å››æ¬¡å‡æ³•è¿ç®—</li>
<li>æ¡ä»¶åˆ¤æ–­åŸºäºé™æ€æ§ä»¶ï¼Œåœ¨ç¼–è¯‘æ—¶å³å¯ä¼˜åŒ–</li>
</ul>
<p><strong>ä¼˜åŒ–ç­–ç•¥</strong></p>
<ul>
<li>é¿å…åœ¨ç‰‡æ®µç€è‰²å™¨ä¸­é¢‘ç¹åˆ‡æ¢åè½¬çŠ¶æ€</li>
<li>åˆç†ä½¿ç”¨é€šé“é€‰æ‹©æ€§åè½¬ï¼Œå‡å°‘ä¸å¿…è¦çš„è®¡ç®—</li>
<li>ç»“åˆLODç³»ç»Ÿï¼Œåœ¨è¿œè·ç¦»é™ä½åè½¬æ•ˆæœç²¾åº¦</li>
<li>ä½¿ç”¨å®ä¾‹åŒ–å‡å°‘é‡å¤è®¡ç®—</li>
</ul>
<p><strong>å¹³å°å…¼å®¹æ€§è€ƒè™‘</strong></p>
<ul>
<li>åœ¨æ‰€æœ‰æ”¯æŒShader Graphçš„å¹³å°ä¸Šéƒ½èƒ½ç¨³å®šè¿è¡Œ</li>
<li>ç§»åŠ¨è®¾å¤‡ä¸Šæ€§èƒ½å¼€é”€å¯æ§ï¼Œé€‚åˆé€‚åº¦ä½¿ç”¨</li>
<li>WebGLå¹³å°éœ€è¦æ³¨æ„ç²¾åº¦å’Œæ€§èƒ½å¹³è¡¡</li>
</ul>
<h2 data-id="heading-5">é«˜çº§ä½¿ç”¨æŠ€å·§</h2>
<p><strong>ä¸å…¶ä»–èŠ‚ç‚¹çš„ç»„åˆåº”ç”¨</strong>Invert ColorsèŠ‚ç‚¹å¯ä»¥ä¸å…¶ä»–Shader GraphèŠ‚ç‚¹ç»„åˆä½¿ç”¨ï¼Œåˆ›é€ å‡ºæ›´åŠ ä¸°å¯Œå¤šæ ·çš„è§†è§‰æ•ˆæœï¼š</p>
<ul>
<li>ä¸BlendèŠ‚ç‚¹ç»“åˆï¼šåˆ›å»ºå¤æ‚çš„é¢œè‰²æ··åˆæ•ˆæœ</li>
<li>ä¸TimeèŠ‚ç‚¹è”åŠ¨ï¼šåˆ¶ä½œåŠ¨æ€çš„é¢œè‰²åè½¬åŠ¨ç”»</li>
<li>ä¸GradientèŠ‚ç‚¹é…åˆï¼šå®ç°è‡ªå®šä¹‰çš„é¢œè‰²è¿‡æ¸¡æ•ˆæœ</li>
<li>ä¸NoiseèŠ‚ç‚¹ç»„åˆï¼šæ·»åŠ æœ‰æœºçš„çº¹ç†å˜åŒ–</li>
</ul>
<p><strong>å‚æ•°åŠ¨ç”»åŒ–æŠ€æœ¯</strong>é€šè¿‡å°†åè½¬æ§åˆ¶å‚æ•°ä¸æ—¶é—´ã€ç©å®¶è¾“å…¥æˆ–å…¶ä»–æ¸¸æˆå˜é‡ç»‘å®šï¼Œå¯ä»¥åˆ›å»ºåŠ¨æ€çš„é¢œè‰²åè½¬æ•ˆæœï¼š</p>
<ul>
<li>å‘¨æœŸæ€§åè½¬ï¼šä½¿ç”¨æ­£å¼¦å‡½æ•°æ§åˆ¶åè½¬å¼ºåº¦ï¼Œåˆ›å»ºå‘¼å¸ç¯æ•ˆæœ</li>
<li>äº¤äº’é©±åŠ¨åè½¬ï¼šåŸºäºç©å®¶æ“ä½œå®æ—¶è°ƒæ•´åè½¬å‚æ•°</li>
<li>ç¯å¢ƒå“åº”åè½¬ï¼šæ ¹æ®æ¸¸æˆç¯å¢ƒå˜åŒ–è‡ªåŠ¨è°ƒæ•´åè½¬æ•ˆæœ</li>
<li>æ¸è¿›å¼åè½¬ï¼šä½¿ç”¨ç¼“åŠ¨å‡½æ•°å®ç°å¹³æ»‘çš„åè½¬è¿‡æ¸¡</li>
</ul>
<p><strong>å¤šå±‚åè½¬æ•ˆæœ</strong>é€šè¿‡ä¸²è”å¤šä¸ªInvert ColorsèŠ‚ç‚¹ï¼Œå¯ä»¥å®ç°å¤æ‚çš„åˆ†å±‚åè½¬æ•ˆæœï¼š</p>
<ul>
<li>éƒ¨åˆ†é€šé“å¤šæ¬¡åè½¬ï¼šåˆ›å»ºç‹¬ç‰¹çš„è‰²å½©å¾ªç¯</li>
<li>æ¡ä»¶æ€§åè½¬é“¾ï¼šåŸºäºæ¸¸æˆçŠ¶æ€é€‰æ‹©ä¸åŒçš„åè½¬è·¯å¾„</li>
<li>ç©ºé—´å˜åŒ–åè½¬ï¼šç»“åˆUVåæ ‡åˆ›å»ºåŒºåŸŸæ€§çš„åè½¬æ•ˆæœ</li>
<li>æ—¶é—´å»¶è¿Ÿåè½¬ï¼šåœ¨ä¸åŒæ—¶é—´ç‚¹å¯ç”¨ä¸åŒé€šé“çš„åè½¬</li>
</ul>
<h2 data-id="heading-6">æ•…éšœæ’é™¤ä¸å¸¸è§é—®é¢˜</h2>
<p><strong>è§†è§‰æ•ˆæœå¼‚å¸¸æ’æŸ¥</strong>å½“Invert ColorsèŠ‚ç‚¹äº§ç”Ÿä¸ç¬¦åˆé¢„æœŸçš„æ•ˆæœæ—¶ï¼Œå¯ä»¥æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤è¿›è¡Œæ’æŸ¥ï¼š</p>
<ul>
<li>æ£€æŸ¥è¾“å…¥æ•°æ®èŒƒå›´ï¼šç¡®ä¿æ‰€æœ‰é¢œè‰²å€¼åœ¨0-1èŒƒå›´å†…</li>
<li>éªŒè¯æ§ä»¶çŠ¶æ€ï¼šç¡®è®¤å„ä¸ªé€šé“çš„åè½¬å¼€å…³è®¾ç½®æ­£ç¡®</li>
<li>æ£€æŸ¥èŠ‚ç‚¹è¿æ¥ï¼šç¡®ä¿æ•°æ®æµè¿æ¥æ­£ç¡®æ— è¯¯</li>
<li>æµ‹è¯•éš”ç¦»æ•ˆæœï¼šå•ç‹¬æµ‹è¯•åè½¬èŠ‚ç‚¹æ’é™¤å…¶ä»–èŠ‚ç‚¹å½±å“</li>
</ul>
<p><strong>æ€§èƒ½é—®é¢˜è¯Šæ–­</strong>å¦‚æœå‘ç°ä½¿ç”¨Invert ColorsèŠ‚ç‚¹åæ€§èƒ½ä¸‹é™ï¼Œå¯ä»¥è€ƒè™‘ï¼š</p>
<ul>
<li>åˆ†æç»˜åˆ¶è°ƒç”¨æ¬¡æ•°ï¼šæ£€æŸ¥æ˜¯å¦å› åè½¬æ•ˆæœå¯¼è‡´æ‰¹æ¬¡åˆå¹¶å¤±è´¥</li>
<li>ç›‘æ§GPUè´Ÿè½½ï¼šä½¿ç”¨æ€§èƒ½åˆ†æå·¥å…·æ£€æµ‹å…·ä½“ç“¶é¢ˆ</li>
<li>ä¼˜åŒ–ç€è‰²å™¨å˜ä½“ï¼šå‡å°‘ä¸å¿…è¦çš„åŠŸèƒ½å˜ä½“ç”Ÿæˆ</li>
<li>ç®€åŒ–èŠ‚ç‚¹ç½‘ç»œï¼šé‡æ„ç€è‰²å™¨å›¾æé«˜æ‰§è¡Œæ•ˆç‡</li>
</ul>
<p><strong>è·¨å¹³å°å…¼å®¹æ€§é—®é¢˜</strong>åœ¨ä¸åŒå¹³å°ä¸Šå¯èƒ½ä¼šé‡åˆ°ä¸åŒçš„è¡¨ç°é—®é¢˜ï¼š</p>
<ul>
<li>ç²¾åº¦å·®å¼‚ï¼šç§»åŠ¨è®¾å¤‡ä¸Šå¯èƒ½å‡ºç°çš„ç²¾åº¦é—®é¢˜</li>
<li>è‰²å½©ç©ºé—´ï¼šçº¿æ€§ç©ºé—´ä¸ä¼½é©¬ç©ºé—´çš„è½¬æ¢é—®é¢˜</li>
<li>ç‰¹æ€§æ”¯æŒï¼šä¸åŒå›¾å½¢APIå¯¹ç‰¹å®šåŠŸèƒ½çš„æ”¯æŒå·®å¼‚</li>
<li>å†…å­˜é™åˆ¶ï¼šç§»åŠ¨è®¾å¤‡ä¸Šçš„å†…å­˜ä½¿ç”¨é™åˆ¶</li>
</ul>
<h2 data-id="heading-7">æœ€ä½³å®è·µæŒ‡å—</h2>
<p><strong>é¡¹ç›®ç»„ç»‡è§„èŒƒ</strong>ä¸ºäº†ç¡®ä¿ç€è‰²å™¨é¡¹ç›®çš„å¯ç»´æŠ¤æ€§å’Œå›¢é˜Ÿåä½œæ•ˆç‡ï¼Œå»ºè®®éµå¾ªä»¥ä¸‹è§„èŒƒï¼š</p>
<ul>
<li>ç»Ÿä¸€çš„å‘½åçº¦å®šï¼šä¸ºåè½¬æ§åˆ¶å‚æ•°åˆ¶å®šæ˜ç¡®çš„å‘½åè§„åˆ™</li>
<li>æ¨¡å—åŒ–è®¾è®¡ï¼šå°†å¸¸ç”¨çš„åè½¬æ•ˆæœå°è£…ä¸ºå­å›¾é‡ç”¨</li>
<li>æ–‡æ¡£åŒ–é…ç½®ï¼šä¸ºå¤æ‚çš„åè½¬è®¾ç½®æä¾›è¯´æ˜æ–‡æ¡£</li>
<li>ç‰ˆæœ¬æ§åˆ¶ç­–ç•¥ï¼šåˆç†ç®¡ç†ç€è‰²å™¨èµ„æºçš„ç‰ˆæœ¬å†å²</li>
</ul>
<p><strong>æ€§èƒ½ä¸è´¨é‡å¹³è¡¡</strong>åœ¨è¿½æ±‚è§†è§‰æ•ˆæœçš„åŒæ—¶ï¼Œéœ€è¦å…¼é¡¾æ€§èƒ½è€ƒé‡ï¼š</p>
<ul>
<li>è´¨é‡çº§åˆ«åˆ’åˆ†ï¼šä¸ºä¸åŒè®¾å¤‡ç­‰çº§è®¾ç½®ä¸åŒçš„åè½¬æ•ˆæœè´¨é‡</li>
<li>åŠ¨æ€ç»†èŠ‚è°ƒæ•´ï¼šæ ¹æ®è¿è¡Œå¸§ç‡è‡ªåŠ¨è°ƒæ•´åè½¬æ•ˆæœå¤æ‚åº¦</li>
<li>èµ„æºé¢„ç®—ç®¡ç†ï¼šä¸ºåè½¬æ•ˆæœåˆ†é…åˆç†çš„æ€§èƒ½é¢„ç®—</li>
<li>æµ‹è¯•è¦†ç›–å…¨é¢ï¼šåœ¨å„ç§ç¡¬ä»¶é…ç½®ä¸Šæµ‹è¯•åè½¬æ•ˆæœè¡¨ç°</li>
</ul>
<p><strong>åˆ›æ„åº”ç”¨æ‹“å±•</strong>é¼“åŠ±å¼€å‘è€…å‘æŒ¥åˆ›æ„ï¼Œæ¢ç´¢Invert ColorsèŠ‚ç‚¹çš„æ›´å¤šå¯èƒ½æ€§ï¼š</p>
<ul>
<li>å®éªŒæ€§è‰ºæœ¯æ•ˆæœï¼šå°è¯•éä¼ ç»Ÿçš„åè½¬å‚æ•°ç»„åˆ</li>
<li>æŠ€æœ¯åˆ›æ–°åº”ç”¨ï¼šå°†åè½¬æŠ€æœ¯åº”ç”¨äºæ–°çš„æ¸²æŸ“é¢†åŸŸ</li>
<li>è·¨åª’ä½“é€‚åº”ï¼šè°ƒæ•´åè½¬æ•ˆæœé€‚åº”ä¸åŒçš„è¾“å‡ºä»‹è´¨</li>
<li>ç”¨æˆ·å¯å®šåˆ¶åŒ–ï¼šæä¾›åè½¬å‚æ•°è®©ç©å®¶è‡ªå®šä¹‰è§†è§‰æ•ˆæœ</li>
</ul>
<hr/>
<blockquote>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2Fchenghai37%2Fcategory_13074589.html%3Ffromshare%3Dblogcolumn%26sharetype%3Dblogcolumn%26sharerId%3D13074589%26sharerefer%3DPC%26sharesource%3Dchenghai37%26sharefrom%3Dfrom_link" target="_blank" title="https://blog.csdn.net/chenghai37/category_13074589.html?fromshare=blogcolumn&amp;sharetype=blogcolumn&amp;sharerId=13074589&amp;sharerefer=PC&amp;sharesource=chenghai37&amp;sharefrom=from_link" ref="nofollow noopener noreferrer">ã€Unity Shader Graph ä½¿ç”¨ä¸ç‰¹æ•ˆå®ç°ã€‘</a><strong>ä¸“æ -ç›´è¾¾</strong>
ï¼ˆæ¬¢è¿<em>ç‚¹èµç•™è¨€</em>æ¢è®¨ï¼Œæ›´å¤šäººåŠ å…¥è¿›æ¥èƒ½æ›´åŠ å®Œå–„è¿™ä¸ªæ¢ç´¢çš„è¿‡ç¨‹ï¼ŒğŸ™ï¼‰</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ¯å¤©ä¸€ä¸ªå®‰å“æµ‹è¯•å¼€å‘å°çŸ¥è¯†ä¹‹ ï¼ˆä¸ƒï¼‰---å¸¸ç”¨çš„adb å‘½ä»¤ç¬¬äº”æœŸ]]></title>    <link>https://juejin.cn/post/7582787460418699306</link>    <guid>https://juejin.cn/post/7582787460418699306</guid>    <pubDate>2025-12-12T14:24:51.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582787460418699306" data-draft-id="7582786655473582123" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ¯å¤©ä¸€ä¸ªå®‰å“æµ‹è¯•å¼€å‘å°çŸ¥è¯†ä¹‹ ï¼ˆä¸ƒï¼‰---å¸¸ç”¨çš„adb å‘½ä»¤ç¬¬äº”æœŸ"/> <meta itemprop="keywords" content="æµ‹è¯•"/> <meta itemprop="datePublished" content="2025-12-12T14:24:51.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç‹å–µå–µå–µ"/> <meta itemprop="url" content="https://juejin.cn/user/335810321976697"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ¯å¤©ä¸€ä¸ªå®‰å“æµ‹è¯•å¼€å‘å°çŸ¥è¯†ä¹‹ ï¼ˆä¸ƒï¼‰---å¸¸ç”¨çš„adb å‘½ä»¤ç¬¬äº”æœŸ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/335810321976697/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç‹å–µå–µå–µ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-12T14:24:51.000Z" title="Fri Dec 12 2025 14:24:51 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æ¯å¤©ä¸€ä¸ªå®‰å“æµ‹è¯•å¼€å‘å°çŸ¥è¯†ä¹‹ ï¼ˆä¸ƒï¼‰---å¸¸ç”¨çš„adb å‘½ä»¤ç¬¬äº”æœŸ</h2>
<p><em>helloï¼Œå®å­ä»¬ï¼Œæœ€è¿‘æ²¡æœ‰æ›´æ–°æ˜¯å› ä¸ºå·¥ä½œå¤ªå¿™äº†ï¼Œåˆšç»“æŸå®Œæœ¬å¹´åº¦ç­”è¾©ï¼Œ ä»¥åè¿˜ä¼šç»§ç»­æ›´æ–°ï¼Œå¦‚æœæœ‰æƒ³äº†è§£çš„å¯ä»¥è¯„è®ºï¼Œä½ ä»¬çš„è¯„è®ºæˆ‘éƒ½ä¼šçœ‹ï¼Œç¬”å¿ƒ</em></p>
<blockquote>
<p>ä¸ŠæœŸä»‹ç»äº†å¦‚ä½•é€šè¿‡adbå‘½ä»¤è¾“å…¥æ–‡å­—ï¼Œæœ¬æœŸä»‹ç»å¦‚ä½•é€šè¿‡adb ç‚¹å‡»åæ ‡</p>
<ul>
<li>adbå‘½ä»¤è·å–æ‰‹æœºå±å¹•å¤§å°ï¼ˆåˆ†è¾¨ç‡ï¼‰</li>
<li>adbå‘½ä»¤ç‚¹å‡»åæ ‡</li>
<li>adbå‘½ä»¤æŒ‰ä¸‹ç‰©ç†æŒ‰é”®</li>
<li>adbå‘½ä»¤è·å–å½“å‰æ‰‹æœºçš„æ—‹è½¬æ–¹å‘</li>
<li>adbå‘½ä»¤è·å–å½“å‰æ‰‹æœºçš„æŠ˜å çŠ¶æ€ã€é’ˆå¯¹æŠ˜å å±æ‰‹æœºã€‘</li>
</ul>
</blockquote>
<h2 data-id="heading-1">1. è·å–æ‰‹æœºå±å¹•å¤§å°ï¼ˆåˆ†è¾¨ç‡ï¼‰</h2>
<pre><code class="hljs language-bash" lang="bash">adb shell wm size
</code></pre>
<p>å±å¹•åˆ†è¾¨ç‡ æ¨ª <code>1080</code> ç«– <code>2520</code>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/75a9061f4ebd443189012ccb028eaafe~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg546L5Za15Za15Za1:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766154291&amp;x-signature=XxS6cqXZr5ehaDRHxXRf0VqZCAY%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<ul>
<li>æ‰©å±•</li>
</ul>
<ol>
<li>æŸ¥çœ‹ wm å‘½ä»¤å¸®åŠ©</li>
</ol>
<pre><code class="hljs language-bash" lang="bash">adb shell wm <span class="hljs-built_in">help</span>
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c1bdfb73a6d147d2b2957baa9e9b26b7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg546L5Za15Za15Za1:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766154291&amp;x-signature=YDe4uZYbFcty6WeWQ4T1YlYoisw%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
2. è§£é”å±å¹•ã€æ²¡æœ‰é”å±å¯†ç ï¼Œå±å¹•å·²ç»ç‚¹äº®ã€‘</p>
<pre><code class="hljs language-bash" lang="bash"> adb shell wm dismiss-keyguard
</code></pre>
<ol start="3">
<li>æ–¹å‘é”å®š</li>
</ol>
<pre><code class="hljs language-bash" lang="bash">adb shell wm user-rotation lock
</code></pre>
<p>ä¸é”å®šæ–¹å‘</p>
<pre><code class="hljs language-bash" lang="bash">adb shell wm user-rotation free
</code></pre>
<ol start="4">
<li>wm shellå‘½ä»¤
4.1 è·å–å¸®åŠ©</li>
</ol>
<pre><code class="hljs language-bash" lang="bash">adb  shell wm shell <span class="hljs-built_in">help</span>
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e942f6e71389461aaa5d94bf3e68fb0b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg546L5Za15Za15Za1:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766154291&amp;x-signature=2mdFSoGltO3b5YpW75Ci0lluz0E%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
4.2 æ¸…é™¤æœ€è¿‘ä»»åŠ¡</p>
<blockquote>
<p>adb shell wm shell recents clearAll
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2115aa3d57964ac6971fe35f090c8dc9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg546L5Za15Za15Za1:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766154291&amp;x-signature=%2Fno8O98%2FfwctyVFeBkaJSl9ZNXg%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
</blockquote>
<h2 data-id="heading-2">2. ç‚¹å‡»åæ ‡</h2>
<pre><code class="hljs language-bash" lang="bash">adb shell input tap 500 1000
</code></pre>
<p>æŸ¥çœ‹inputå‘½ä»¤å¸®åŠ©</p>
<pre><code class="hljs language-bash" lang="bash">adb shell input <span class="hljs-built_in">help</span>
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b38e33a3aadb40e5b2b34e6e16c46a13~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg546L5Za15Za15Za1:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766154291&amp;x-signature=0TxfAaiHXd3PgElJXRtiaxvb%2Bj8%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
input å‘½ä»¤å¯æ‰§è¡Œçš„æŒ‡ä»¤åŒ…æ‹¬</p>
<ul>
<li><code>tap &lt;x&gt; &lt;y&gt; (Default: touchscreen)</code> ç‚¹å‡»</li>
<li><code>swipe &lt;x1&gt; &lt;y1&gt; &lt;x2&gt; &lt;y2&gt; [duration(ms)] (Default: touchscreen)</code> æ»‘åŠ¨</li>
<li><code>text &lt;string&gt; (Default: keyboard)</code> è¾“å…¥æ–‡å­—</li>
<li><code>keyevent [--longpress|--duration &lt;duration to hold key down in ms&gt;] [--doubletap] [--async] [--delay &lt;duration between keycodes in ms&gt;] &lt;key code number or name&gt; ... (Default: keyboard)</code> æ¨¡æ‹ŸæŒ‰ä¸‹å’Œé‡Šæ”¾ç‰©ç†æŒ‰é”®
æ¯”å¦‚ home <code>adb shell input keyevent 3</code></li>
</ul>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ•°å­—é”® 0-9</span>
adb shell input keyevent 7    <span class="hljs-comment"># 0</span>
adb shell input keyevent 8    <span class="hljs-comment"># 1</span>
adb shell input keyevent 9    <span class="hljs-comment"># 2</span>
adb shell input keyevent 10   <span class="hljs-comment"># 3</span>
adb shell input keyevent 11   <span class="hljs-comment"># 4</span>
adb shell input keyevent 12   <span class="hljs-comment"># 5</span>
adb shell input keyevent 13   <span class="hljs-comment"># 6</span>
adb shell input keyevent 14   <span class="hljs-comment"># 7</span>
adb shell input keyevent 15   <span class="hljs-comment"># 8</span>
adb shell input keyevent 16   <span class="hljs-comment"># 9</span>

<span class="hljs-comment"># å­—æ¯é”® A-Z</span>
adb shell input keyevent 29   <span class="hljs-comment"># A</span>
adb shell input keyevent 30   <span class="hljs-comment"># B</span>
adb shell input keyevent 31   <span class="hljs-comment"># C</span>
<span class="hljs-comment"># ... ä»¥æ­¤ç±»æ¨</span>
</code></pre>
<h2 data-id="heading-3">3. è·å–å½“å‰æ‰‹æœºçš„æ—‹è½¬æ–¹å‘</h2>
<pre><code class="hljs language-bash" lang="bash">adb shell settings get system user_rotation
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e2e57521a5ef44afa8bfaa22f5750ab7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg546L5Za15Za15Za1:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766154291&amp;x-signature=UR3j9QUjQnYLbPXaRXcCcwixVvI%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>å‘½ä»¤<code>settings</code>è¡¨ç¤ºç›´æ¥æ“ä½œæ‰‹æœºè®¾ç½®ï¼Œæ‰‹æœºé‡Œå¾ˆå¤šè®¾ç½®é¡¹éƒ½å¯ä»¥ä½¿ç”¨ <code>get</code> è·å–å¯¹åº”çš„å€¼  <code>put</code> è®¾ç½®å¯¹åº”çš„å€¼</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b7c2a75cad734797a6ce4b9e68088d86~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg546L5Za15Za15Za1:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766154291&amp;x-signature=OHc%2B1f2Cs057iUIu4lkN7IFRj14%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h2 data-id="heading-4">4. å½“å‰æ‰‹æœºçš„æŠ˜å çŠ¶æ€</h2>
<pre><code class="hljs language-bash" lang="bash"> adb shell cmd device_state print-state
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/35c002881366467083211e6c517bc099~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg546L5Za15Za15Za1:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766154291&amp;x-signature=e5iVc9d8qRyhJPeS1v6g%2BYgYfAQ%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
0 å®Œå…¨åˆä¸Š 3 å®Œå…¨æ‰“å¼€
<code>device_state</code> å‘½ä»¤æ‰©å±•</p>
<ul>
<li>æŸ¥çœ‹å¸®åŠ©</li>
</ul>
<pre><code class="hljs language-bash" lang="bash">adb shell cmd device_state
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d6078134c7f54ff99d8cf114b7334e50~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg546L5Za15Za15Za1:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766154291&amp;x-signature=4wtJf%2F9jdcZt9OjkBQ9fCXYZghk%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
æ¯”å¦‚è·å–å½“å‰æ‰‹æœºæ”¯æŒçš„çŠ¶æ€</p>
<pre><code class="hljs language-bash" lang="bash"> adb shell cmd device_state print-states
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/99e7a47d91c44bec81877c9604adc233~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg546L5Za15Za15Za1:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766154291&amp;x-signature=K0sDyJKNDgS2Wr1uu8ftaxEqsl8%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<pre><code class="hljs language-bash" lang="bash">adb shell cmd 
</code></pre>
<p>è¿™ä¸ªå‘½ä»¤è¿˜æœ‰å¾ˆå¤šå…¶ä»–åŠŸèƒ½ æˆ‘ä»¬åç»­ç»§ç»­åˆ†äº«
æ¯å¤©è¿›æ­¥ä¸€ç‚¹ç‚¹ï¼ï¼ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ğŸš«æ±‚æ±‚ä½ åˆ«å†æ‰‹åŠ¨æ”¹ç±»åäº†ï¼Swift è‡ªåŠ¨æ··æ·†è„šæœ¬ä¸Šçº¿ï¼Œ4.3 å¤´å‘ä¿å«æˆ˜æ­£å¼å¼€å§‹ï¼]]></title>    <link>https://juejin.cn/post/7582759716188323840</link>    <guid>https://juejin.cn/post/7582759716188323840</guid>    <pubDate>2025-12-12T10:50:23.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582759716188323840" data-draft-id="7582769411994157108" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ğŸš«æ±‚æ±‚ä½ åˆ«å†æ‰‹åŠ¨æ”¹ç±»åäº†ï¼Swift è‡ªåŠ¨æ··æ·†è„šæœ¬ä¸Šçº¿ï¼Œ4.3 å¤´å‘ä¿å«æˆ˜æ­£å¼å¼€å§‹ï¼"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-12T10:50:23.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="StarkCoder"/> <meta itemprop="url" content="https://juejin.cn/user/207173399875662"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ğŸš«æ±‚æ±‚ä½ åˆ«å†æ‰‹åŠ¨æ”¹ç±»åäº†ï¼Swift è‡ªåŠ¨æ··æ·†è„šæœ¬ä¸Šçº¿ï¼Œ4.3 å¤´å‘ä¿å«æˆ˜æ­£å¼å¼€å§‹ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/207173399875662/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    StarkCoder
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-12T10:50:23.000Z" title="Fri Dec 12 2025 10:50:23 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ğŸš«æ±‚æ±‚ä½ åˆ«å†æ‰‹åŠ¨æ”¹ç±»åäº†ï¼Swift è‡ªåŠ¨æ··æ·†è„šæœ¬ä¸Šçº¿ï¼Œ4.3 å¤´å‘ä¿å«æˆ˜æ­£å¼å¼€å§‹ï¼</h2>
<p>æœ€è¿‘åˆè¢«è‹¹æœçˆ¸çˆ¸ 4.3 æ‹¿æäº†å—ï¼Ÿ<br/>
æ˜¯ä¸æ˜¯å·²ç»ä¹ æƒ¯äº†ä»¥ä¸‹è¿™äº›ã€Œçµé­‚æŠ˜ç£¨ã€ï¼š</p>
<ul>
<li>ä¸ºäº†ä¸Šæ¶ä¸å¾—ä¸æ‰‹åŠ¨ç”»å‡ ä¸ªç±»å â€”â€” ä¸€æ”¹ä¸€ä¸ªé”™</li>
<li>Storyboard å’Œ XIB çš„ customClass æ€»æœ‰æ¼ç½‘ä¹‹é±¼</li>
<li>project.pbxproj åŠ¨äº†ä¸‹æ•´ä¸ªå·¥ç¨‹éƒ½çº¢äº†</li>
<li>æ–‡ä»¶åã€ç±»åã€åè®®åã€åˆå§‹åŒ–åâ€¦â€¦æ¯ä¸ªåœ°æ–¹éƒ½è¦ä½ è‡ªå·±æ‰¾</li>
<li>æ”¹å®Œè¾›è¾›è‹¦è‹¦æäº¤ï¼Œç»“æœè‹¹æœä¸€å¥ã€Œä¸ä½ çš„å…¶ä»– App ç›¸ä¼¼ã€ï¼š<strong>4.3ï¼Œé‡æ¥ï¼</strong></li>
</ul>
<p>è¿™æ—¶å€™çš„ä½ ï¼š</p>
<blockquote>
<p>â€œæˆ‘åˆ°åº•æ˜¯å¼€å‘è€…ï¼Œè¿˜æ˜¯é‡æ„å·¥å…·ï¼Ÿâ€</p>
</blockquote>
<p>åœã€‚é†’é†’ã€‚<br/>
<strong>2025 å¹´äº†ï¼Œæˆ‘ä»¬çœŸä¸éœ€è¦å†ç”¨æ‰‹æ”¹ä»£ç æ¥å¯¹æŠ—æœºå™¨å®¡æ ¸äº†ã€‚</strong></p>
<p>äºæ˜¯æˆ‘å†™äº†ä¸€ä¸ªè„šæœ¬ï¼Œä¸“é—¨æ‹¯æ•‘è¢« 4.3 æŠ˜ç£¨å¾—å¤´å‘éƒ½è¦æ‰å…‰çš„å¼€å‘è€…ï¼š<br/>
ğŸ‘‰ <strong>Swift å…¨è‡ªåŠ¨æ··æ·†è„šæœ¬ï¼ˆå·²å¼€æºï¼‰</strong><br/>
<strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fchengshixin%2Fobfuscate_swift" target="_blank" title="https://github.com/chengshixin/obfuscate_swift" ref="nofollow noopener noreferrer">github.com/chengshixinâ€¦</a></strong></p>
<p>ä¸‹é¢ï¼Œè®©æˆ‘å¸¦ä½ çœ‹çœ‹å®ƒåˆ°åº•èƒ½å¸®ä½ åšäº›ä»€ä¹ˆã€‚</p>
<hr/>
<h2 data-id="heading-1">ğŸ¯è„šæœ¬èƒ½è§£å†³ä½ ä»€ä¹ˆç—›ç‚¹ï¼Ÿ</h2>
<p>ä¸€å¥è¯æ€»ç»“ï¼š</p>
<blockquote>
<p><strong>ä½ æ— éœ€æ‰‹åŠ¨æ”¹ä»»ä½•ä¸œè¥¿ï¼Œè„šæœ¬ä¼šè‡ªåŠ¨å®Œæˆå…¨éƒ¨å·®å¼‚åŒ–å·¥ä½œã€‚</strong></p>
</blockquote>
<p>çœŸæ­£çš„ã€Œå…¨è‡ªåŠ¨ã€æ˜¯è¿™æ ·çš„ï¼š</p>
<hr/>
<h2 data-id="heading-2">ğŸš€1. è‡ªåŠ¨é‡å‘½åæ‰€æœ‰ Swift ç±» + Swift æ–‡ä»¶å</h2>
<p>ä½ çš„æ–‡ä»¶åŸæœ¬å«ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">HomeViewController.swift
<span class="hljs-keyword">class</span> <span class="hljs-title class_">HomeViewController</span> { ... }
</code></pre>
<p>æ··æ·†åå¯èƒ½å˜æˆï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">AuroraVertexNimbus_3f91a2b1.swift
<span class="hljs-keyword">class</span> <span class="hljs-title class_">AuroraVertexNimbus_3f91a2b1</span> { ... }
</code></pre>
<p>è¯æ±‡éšæœºã€é•¿åº¦éšæœºã€å“ˆå¸Œéšæœºã€‚<br/>
ä¸æ˜¯â€œæ¢ä¸ªåå­—â€ï¼Œæ˜¯ <strong>â€œæ¢ä¸ªçµé­‚â€</strong> ã€‚</p>
<hr/>
<h2 data-id="heading-3">ğŸš€2. å…¨å·¥ç¨‹æ™ºèƒ½æ›¿æ¢ï¼ˆSwift + Storyboard + XIBï¼‰</h2>
<p>è„šæœ¬ä¼šè‡ªåŠ¨æ‰«ææ•´ä¸ªé¡¹ç›®å¹¶æ›¿æ¢æ‰€æœ‰å¼•ç”¨åˆ°çš„åå­—ï¼ŒåŒ…æ‹¬ï¼š</p>
<ul>
<li>Swift é‡Œçš„åˆå§‹åŒ–ã€ç»§æ‰¿ã€æ³›å‹ã€ç±»å‹å£°æ˜</li>
<li>xib / storyboard çš„ customClass</li>
<li>StoryboardID</li>
<li>reuseIdentifier</li>
<li>xml ä¸­çš„å„ç§ç±»åå¼•ç”¨</li>
<li>project.pbxproj é‡Œçš„æ–‡ä»¶åå¼•ç”¨</li>
</ul>
<p>å¹¶ä¸”è¿™é‡Œæœ‰ä¸€ç‚¹å¾ˆå…³é”® â€”â€”</p>
<blockquote>
<p><strong>è„šæœ¬æ˜¯â€œæ ¹æ®æ‰«æåˆ°çš„ Swift æ–‡ä»¶åâ€è¿›è¡ŒåŒ¹é…ä¸æ›¿æ¢çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼šæ–‡ä»¶åæ˜¯ä»€ä¹ˆï¼Œå®ƒå°±ä¼šæŠŠè¿™ä¸ªæ–‡ä»¶åå½“ä½œéœ€è¦æ··æ·†çš„ç±»åæ¥å…¨å±€æ›¿æ¢ã€‚</strong></p>
</blockquote>
<p>æ‰€ä»¥å¦‚æœä½ çš„é¡¹ç›®æ˜¯â€œä¸€ä¸ªæ–‡ä»¶ä¸€ä¸ªç±»ï¼Œæ–‡ä»¶åå’Œç±»åä¸€è‡´â€ï¼Œæ•ˆæœä¼šéå¸¸å®Œç¾ã€éå¸¸è‡ªåŠ¨åŒ–ã€‚</p>
<p>æ¢å¥è¯è¯´ï¼š</p>
<blockquote>
<p>ä½ èƒ½ç”¨åˆ°ç±»åçš„åœ°æ–¹ï¼Œå®ƒéƒ½èƒ½è‡ªåŠ¨æ›¿æ¢å¹²å‡€ã€‚<br/>
ä½ ä¸éœ€è¦æŸ¥æ‰¾ï¼Œä¹Ÿä¸éœ€è¦æ‹…å¿ƒæ¼æ”¹ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-4">ğŸš€3. è‡ªåŠ¨æ³¨å…¥â€œæ— æ„ä¹‰â€æ–¹æ³•å’Œå±æ€§ï¼ˆæ¯ä¸ªç±»éƒ½ä¸ä¸€æ ·ï¼‰</h2>
<p>æ¯ä¸ªç±»éƒ½ä¼šè¢«æ’å…¥ä¸€äº›éšæœºç”Ÿæˆçš„æ— æ„ä¹‰ä»£ç ï¼Œä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">private</span> <span class="hljs-keyword">let</span> auroraGlow_12fd98ab: Int = <span class="hljs-number">0</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">let</span> nimbusEcho_aa2c1f3d: String = <span class="hljs-string">""</span>

<span class="hljs-function"><span class="hljs-keyword">private</span> func <span class="hljs-title">metaDrift_99ab12cd</span>() -&gt; Bool</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
}
</code></pre>
<p>ä½œç”¨æœ‰ä¸‰ï¼š</p>
<ul>
<li>è®©ç±»ç»“æ„çœ‹èµ·æ¥æ›´å¤æ‚</li>
<li>æ¯æ¬¡æ··æ·†ç”Ÿæˆçš„äºŒè¿›åˆ¶å·®å¼‚æ›´å¤§</li>
<li>å½¢æˆæ›´å¤šâ€œåŒºåˆ†åº¦â€ï¼Œå‡å°‘ 4.3 åˆ¤é‡æ¦‚ç‡</li>
</ul>
<p>è¿™ä¸€æ­¥æ‰‹å†™ä½ å¯èƒ½ç´¯æ­»ï¼Œä½†è„šæœ¬ 0.1 ç§’å°±æå®šã€‚</p>
<hr/>
<h2 data-id="heading-5">ğŸš€4. è‡ªåŠ¨åˆ‡æ¢ Git æ–°åˆ†æ”¯ï¼Œä¸æ±¡æŸ“ä¸»å·¥ç¨‹</h2>
<p>è„šæœ¬ä¼šè‡ªåŠ¨ï¼š</p>
<pre><code class="hljs language-css" lang="css">git checkout -<span class="hljs-selector-tag">b</span> obfuscate_20251212173345
</code></pre>
<p>æ··æ·†çš„æ‰€æœ‰å˜æ›´éƒ½åœ¨å•ç‹¬åˆ†æ”¯å†…ã€‚<br/>
å¦‚æœä½ ä¸æ»¡æ„ï¼Ÿ</p>
<pre><code class="hljs language-css" lang="css">git checkout <span class="hljs-selector-tag">main</span>
</code></pre>
<p>èµ°äººå³å¯ï¼Œéå¸¸å®‰å…¨ã€‚</p>
<hr/>
<h2 data-id="heading-6">ğŸš€5. è‡ªåŠ¨ç”Ÿæˆæ··æ·†æ˜ å°„æ—¥å¿—ï¼ˆæ’æŸ¥ç¥å™¨ï¼‰</h2>
<p>æ—¥å¿—ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-attr">"HomeViewController"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"AuroraNimbusFlux_29f3ab1c"</span>
</code></pre>
<p>ä¸€æ—¦ç¼–è¯‘æŠ¥é”™ï¼Œä½ å¯ä»¥è¿…é€Ÿæ ¹æ®æ—¥å¿—æ‰¾åˆ°åŸå§‹ç±»åã€‚<br/>
ä¸ç”¨å†çŒœå“ªä¸ªæ–‡ä»¶è¢«é‡å‘½åã€å“ªä¸ªç±»æ›¿æ¢é”™ã€‚</p>
<hr/>
<h2 data-id="heading-7">ğŸ¤–ä¸ºä»€ä¹ˆè¿™è„šæœ¬å¯¹ 4.3 ç‰¹åˆ«æœ‰æ•ˆï¼Ÿ</h2>
<p>4.3 çš„æ ¸å¿ƒä¸æ˜¯äººå·¥åˆ¤æ–­ï¼Œè€Œæ˜¯<strong>æœºå™¨ç›¸ä¼¼åº¦æ£€æµ‹</strong>ã€‚<br/>
å®ƒä¼šåˆ†æï¼š</p>
<ul>
<li>ç±»åç»“æ„</li>
<li>æ–‡ä»¶å</li>
<li>ä»£ç ç‰¹å¾å‘é‡</li>
<li>æ–¹æ³•æ•°é‡ã€å±æ€§æ•°é‡</li>
<li>ç¼–è¯‘åç¬¦å·è¡¨</li>
<li>å·¥ç¨‹ç»“æ„</li>
<li>Storyboard / XIB å…ƒä¿¡æ¯</li>
</ul>
<p>ä½ æ‰‹åŠ¨æ”¹å‡ ä¸ªç±»åï¼Œæœºå™¨æ ¹æœ¬ä¸çœ‹ä½ ä¸€çœ¼ã€‚<br/>
ä½†è„šæœ¬è¿™ç§çº§åˆ«çš„â€œæ·±åº¦éšæœºåŒ–â€ï¼š</p>
<ul>
<li>æ–‡ä»¶åå…¨æ¢</li>
<li>ç±»åå…¨æ¢ï¼ˆéšæœºè¯ + hashï¼‰</li>
<li>ç±»ç»“æ„ä¸ä¸€æ ·</li>
<li>æ— æ„ä¹‰ä»£ç æ³¨å…¥</li>
<li>ç¬¦å·è¡¨å®Œå…¨ä¸åŒ</li>
<li>Storyboard / XIB å…¨é‡æ›¿æ¢</li>
<li>å·¥ç¨‹é…ç½®éšæœºå˜åŒ–</li>
</ul>
<p>è¿™æ‰æ˜¯â€œçœŸæ­£çš„å·®å¼‚åŒ–â€ã€‚</p>
<hr/>
<h2 data-id="heading-8">ğŸ› ï¸æ€ä¹ˆç”¨ï¼Ÿå¾ˆç®€å•</h2>
<ol>
<li>æŠŠè„šæœ¬æ”¾åœ¨ <code>.xcodeproj</code> åŒçº§ç›®å½•</li>
<li>ä¿®æ”¹è„šæœ¬é‡Œçš„é¡¹ç›®åï¼š</li>
</ol>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">PROJECT_NAME</span> = <span class="hljs-string">"YourProjectName"</span>
</code></pre>
<ol start="3">
<li>éœ€è¦æ’é™¤çš„æ–‡ä»¶å¤¹å¯è‡ªè¡Œè®¾ç½®ï¼š</li>
</ol>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">EXCLUDE_FOLDERS</span> = [<span class="hljs-string">'Extension'</span>, <span class="hljs-string">'Database'</span>, ...]
</code></pre>
<ol start="4">
<li>æ‰§è¡Œï¼š</li>
</ol>
<pre><code class="hljs">python3 obfuscate_swift.py
</code></pre>
<p>å–å£æ°´ï¼Œç­‰ 5 ç§’ã€‚</p>
<p>ä½ çš„é¡¹ç›®ç¬é—´å®Œæˆï¼š</p>
<ul>
<li>ç±»åå…¨æ··æ·†</li>
<li>æ–‡ä»¶åå…¨é‡å‘½å</li>
<li>Storyboard / XIB å…¨æ›¿æ¢</li>
<li>å·¥ç¨‹é…ç½®åŒæ­¥æ›´æ–°</li>
<li>Git åˆ†æ”¯è‡ªåŠ¨åˆ›å»º</li>
<li>æ—¥å¿—è‡ªåŠ¨ç”Ÿæˆ</li>
</ul>
<p>ä½ åªéœ€è¦æ‰“å¼€ Xcode ç¼–è¯‘ä¸€ä¸‹ï¼Œæäº¤ä¸Šæ¶ã€‚</p>
<hr/>
<h2 data-id="heading-9">ğŸŒˆæœ€åè¯´ä¸€å¥</h2>
<p>æ··æ·†ä¸æ˜¯ç›®çš„ã€‚<br/>
ç›®çš„ï¼Œæ˜¯<strong>å‡å°‘é‡å¤åŠ³åŠ¨ã€æé«˜ä¸Šæ¶æˆåŠŸç‡ï¼Œè®©ä½ å¤šç‚¹æ—¶é—´å†™ä½ æƒ³å†™çš„ä»£ç </strong>ã€‚</p>
<p>ä»¥å‰çš„ä½ ï¼šæ‰‹åŠ¨é‡å‘½åå‡ åä¸ªæ–‡ä»¶ï¼Œæ”¹åˆ°æ€€ç–‘äººç”Ÿã€‚<br/>
ç°åœ¨çš„ä½ ï¼šä¸€æ¡å‘½ä»¤ï¼Œè„šæœ¬å¸®ä½ å®Œæˆæ‰€æœ‰è„æ´»ç´¯æ´»ã€‚</p>
<p>å¦‚æœè¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©ï¼Œç‚¹ä¸ªèµğŸ‘è®©æˆ‘çŸ¥é“ã€‚</p>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»é€šç”¨å¯¹è¯åˆ°ä¸“å±æ™ºåº“ï¼šä¸¤ç§AIéƒ¨ç½²æ¨¡å¼ï¼Œè®©ä¼ä¸šæ•°æ®çœŸæ­£â€œæ´»â€œèµ·æ¥]]></title>    <link>https://juejin.cn/post/7582786292087652403</link>    <guid>https://juejin.cn/post/7582786292087652403</guid>    <pubDate>2025-12-12T10:30:42.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582786292087652403" data-draft-id="7582763878675021851" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»é€šç”¨å¯¹è¯åˆ°ä¸“å±æ™ºåº“ï¼šä¸¤ç§AIéƒ¨ç½²æ¨¡å¼ï¼Œè®©ä¼ä¸šæ•°æ®çœŸæ­£â€œæ´»â€œèµ·æ¥"/> <meta itemprop="keywords" content="æ¶æ„"/> <meta itemprop="datePublished" content="2025-12-12T10:30:42.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç å†œçªå›´NO1"/> <meta itemprop="url" content="https://juejin.cn/user/1843250655412046"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»é€šç”¨å¯¹è¯åˆ°ä¸“å±æ™ºåº“ï¼šä¸¤ç§AIéƒ¨ç½²æ¨¡å¼ï¼Œè®©ä¼ä¸šæ•°æ®çœŸæ­£â€œæ´»â€œèµ·æ¥
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1843250655412046/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç å†œçªå›´NO1
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-12T10:30:42.000Z" title="Fri Dec 12 2025 10:30:42 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    11
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<ol>
<li>ç›´æ¥è°ƒç”¨ vs RAGå¢å¼ºçš„å®Œæ•´æŠ€æœ¯æ–¹æ¡ˆ</li>
<li>æ„å»ºä¼ä¸šçº§æ™ºèƒ½çŸ¥è¯†åº“ï¼šä»æŠ€æœ¯åŸç†åˆ°è½åœ°å®è·µ</li>
</ol>
</blockquote>
<h2 data-id="heading-0">å¼•è¨€ï¼šé€‰æ‹©é€‚åˆçš„AIéƒ¨ç½²æ¶æ„</h2>
<p>åœ¨æ„å»ºä¼ä¸šçº§AIåº”ç”¨æ—¶ï¼Œæˆ‘ä»¬é¢ä¸´ä¸€ä¸ªå…³é”®å†³ç­–ï¼šæ˜¯ç›´æ¥éƒ¨ç½²å¤§æ¨¡å‹æä¾›æœåŠ¡ï¼Œè¿˜æ˜¯æ„å»ºåŒ…å«çŸ¥è¯†æ£€ç´¢çš„RAGç³»ç»Ÿï¼Ÿè¿™ä¸¤ç§æ–¹æ¡ˆå„æœ‰é€‚ç”¨åœºæ™¯ï¼Œæœ¬æ–‡å°†æ·±å…¥æ¢è®¨ä¸¤ç§æ¨¡å¼çš„æŠ€æœ¯å®ç°ã€ä¼˜ç¼ºç‚¹å’Œå…·ä½“åº”ç”¨ã€‚</p>
<h2 data-id="heading-1">ä¸€ã€æ¨¡å¼ä¸€ï¼šç›´æ¥éƒ¨ç½²ä¸è°ƒç”¨</h2>
<h3 data-id="heading-2">1.1 æ ¸å¿ƒæ¶æ„ï¼šæ¨¡å‹æœåŠ¡ â†’ åç«¯API â†’ å‰ç«¯</h3>
<p>ç›´æ¥éƒ¨ç½²æ¨¡å¼ä¸“æ³¨äºæä¾›çº¯å‡€çš„å¤§æ¨¡å‹èƒ½åŠ›ï¼Œé€‚åˆé€šç”¨å¯¹è¯å’Œåˆ›æ„ç”Ÿæˆåœºæ™¯ã€‚</p>
<p><strong>æ¶æ„ç¤ºæ„å›¾ï¼š</strong></p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-attr">[ç”¨æˆ·å‰ç«¯]</span> â†â†’ <span class="hljs-selector-attr">[åç«¯åŒ…è£…API]</span> â†â†’ <span class="hljs-selector-attr">[æ¨¡å‹æœåŠ¡(VLLM/Ollama)]</span>
</code></pre>
<h3 data-id="heading-3">1.2 æ¨¡å‹æœåŠ¡çš„åŸç”Ÿæ¥å£éƒ¨ç½²</h3>
<p><strong>VLLM éƒ¨ç½²ï¼ˆç”Ÿäº§çº§ï¼‰ï¼š</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å¯åŠ¨VLLMæœåŠ¡ï¼Œè‡ªåŠ¨æä¾›OpenAIå…¼å®¹æ¥å£</span>
python -m vllm.entrypoints.openai.api_server \
    --model Qwen/Qwen2-7B-Instruct \
    --served-model-name qwen-7b \
    --api-key token-abc123 \
    --host 0.0.0.0 \
    --port 8000
</code></pre>
<p><strong>Ollama éƒ¨ç½²ï¼ˆå¼€å‘æµ‹è¯•ï¼‰ï¼š</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ä¸€é”®éƒ¨ç½²ï¼Œé€‚åˆå¿«é€ŸåŸå‹</span>
ollama pull qwen2:7b
ollama run qwen2:7b
</code></pre>
<h3 data-id="heading-4">1.3 ä¸ºä»€ä¹ˆéœ€è¦åç«¯åŒ…è£…ï¼Ÿ</h3>
<p>è™½ç„¶æ¨¡å‹æœåŠ¡æœ¬èº«æš´éœ²æ¥å£ï¼Œä½†ç”Ÿäº§ç¯å¢ƒéœ€è¦åç«¯åŒ…è£…ï¼š</p>
<p><strong>å®‰å…¨æ€§éœ€æ±‚ï¼š</strong></p>
<ul>
<li>APIå¯†é’¥ç®¡ç†å’Œè½®è½¬</li>
<li>è®¿é—®é¢‘ç‡é™åˆ¶å’Œé˜²æ»¥ç”¨</li>
<li>è¾“å…¥å†…å®¹å®‰å…¨è¿‡æ»¤</li>
<li>JWTç”¨æˆ·èº«ä»½è®¤è¯</li>
</ul>
<p><strong>ä¸šåŠ¡é€»è¾‘éœ€æ±‚ï¼š</strong></p>
<ul>
<li>å¤šè½®å¯¹è¯ä¸Šä¸‹æ–‡ç®¡ç†</li>
<li>å¯¹è¯å†å²æŒä¹…åŒ–å­˜å‚¨</li>
<li>å“åº”æ ¼å¼æ ‡å‡†åŒ–</li>
<li>å¤æ‚çš„é”™è¯¯å¤„ç†å’Œé‡è¯•æœºåˆ¶</li>
</ul>
<h3 data-id="heading-5">1.4 åç«¯åŒ…è£…å®ç°ç¤ºä¾‹</h3>
<p><strong>FastAPI åç«¯æœåŠ¡ï¼š</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> fastapi <span class="hljs-keyword">import</span> FastAPI, HTTPException, Depends
<span class="hljs-keyword">from</span> pydantic <span class="hljs-keyword">import</span> BaseModel
<span class="hljs-keyword">import</span> requests
<span class="hljs-keyword">import</span> uuid

app = FastAPI(title=<span class="hljs-string">"å¤§æ¨¡å‹æœåŠ¡ç½‘å…³"</span>)

<span class="hljs-keyword">class</span> <span class="hljs-title class_">ChatRequest</span>(<span class="hljs-title class_ inherited__">BaseModel</span>):
    message: <span class="hljs-built_in">str</span>
    conversation_id: <span class="hljs-built_in">str</span> = <span class="hljs-literal">None</span>
    max_tokens: <span class="hljs-built_in">int</span> = <span class="hljs-number">1000</span>
    temperature: <span class="hljs-built_in">float</span> = <span class="hljs-number">0.7</span>

<span class="hljs-keyword">class</span> <span class="hljs-title class_">ChatResponse</span>(<span class="hljs-title class_ inherited__">BaseModel</span>):
    response: <span class="hljs-built_in">str</span>
    conversation_id: <span class="hljs-built_in">str</span>
    usage: <span class="hljs-built_in">dict</span>

<span class="hljs-meta">@app.post(<span class="hljs-params"><span class="hljs-string">"/api/chat"</span></span>)</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">chat_endpoint</span>(<span class="hljs-params">request: ChatRequest</span>):
    <span class="hljs-string">"""ç»Ÿä¸€çš„èŠå¤©æ¥å£"""</span>
    <span class="hljs-keyword">try</span>:
        <span class="hljs-comment"># è°ƒç”¨VLLMæœåŠ¡</span>
        vllm_response = call_vllm_service(
            request.message, 
            request.max_tokens, 
            request.temperature
        )
        
        <span class="hljs-keyword">return</span> ChatResponse(
            response=vllm_response,
            conversation_id=request.conversation_id <span class="hljs-keyword">or</span> <span class="hljs-built_in">str</span>(uuid.uuid4()),
            usage={<span class="hljs-string">"prompt_tokens"</span>: <span class="hljs-number">0</span>, <span class="hljs-string">"completion_tokens"</span>: <span class="hljs-number">0</span>}
        )
    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
        <span class="hljs-keyword">raise</span> HTTPException(status_code=<span class="hljs-number">500</span>, detail=<span class="hljs-string">f"æœåŠ¡è°ƒç”¨å¤±è´¥: <span class="hljs-subst">{<span class="hljs-built_in">str</span>(e)}</span>"</span>)

<span class="hljs-keyword">def</span> <span class="hljs-title function_">call_vllm_service</span>(<span class="hljs-params">message: <span class="hljs-built_in">str</span>, max_tokens: <span class="hljs-built_in">int</span>, temperature: <span class="hljs-built_in">float</span></span>) -&gt; <span class="hljs-built_in">str</span>:
    <span class="hljs-string">"""è°ƒç”¨VLLMåŸç”Ÿæ¥å£"""</span>
    headers = {
        <span class="hljs-string">"Content-Type"</span>: <span class="hljs-string">"application/json"</span>,
        <span class="hljs-string">"Authorization"</span>: <span class="hljs-string">f"Bearer token-abc123"</span>
    }
    
    payload = {
        <span class="hljs-string">"model"</span>: <span class="hljs-string">"qwen-7b"</span>,
        <span class="hljs-string">"messages"</span>: [{<span class="hljs-string">"role"</span>: <span class="hljs-string">"user"</span>, <span class="hljs-string">"content"</span>: message}],
        <span class="hljs-string">"max_tokens"</span>: max_tokens,
        <span class="hljs-string">"temperature"</span>: temperature
    }
    
    response = requests.post(
        <span class="hljs-string">"http://localhost:8000/v1/chat/completions"</span>,
        headers=headers,
        json=payload,
        timeout=<span class="hljs-number">30</span>
    )
    
    <span class="hljs-keyword">if</span> response.status_code == <span class="hljs-number">200</span>:
        <span class="hljs-keyword">return</span> response.json()[<span class="hljs-string">"choices"</span>][<span class="hljs-number">0</span>][<span class="hljs-string">"message"</span>][<span class="hljs-string">"content"</span>]
    <span class="hljs-keyword">else</span>:
        <span class="hljs-keyword">raise</span> Exception(<span class="hljs-string">f"VLLM APIé”™è¯¯: <span class="hljs-subst">{response.text}</span>"</span>)

<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    <span class="hljs-keyword">import</span> uvicorn
    uvicorn.run(app, host=<span class="hljs-string">"0.0.0.0"</span>, port=<span class="hljs-number">8080</span>)
</code></pre>
<h3 data-id="heading-6">1.5 å‰ç«¯è°ƒç”¨ç¤ºä¾‹</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å‰ç«¯è°ƒç”¨å°è£…åçš„API</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">DirectChatService</span> {
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params">apiUrl = <span class="hljs-string">'http://localhost:8080'</span></span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">apiUrl</span> = apiUrl;
    }
    
    <span class="hljs-keyword">async</span> <span class="hljs-title function_">sendMessage</span>(<span class="hljs-params">message, conversationId = <span class="hljs-literal">null</span></span>) {
        <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.apiUrl}</span>/api/chat`</span>, {
            <span class="hljs-attr">method</span>: <span class="hljs-string">'POST'</span>,
            <span class="hljs-attr">headers</span>: {<span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json'</span>},
            <span class="hljs-attr">body</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({
                <span class="hljs-attr">message</span>: message,
                <span class="hljs-attr">conversation_id</span>: conversationId
            })
        });
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> response.<span class="hljs-title function_">json</span>();
    }
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">const</span> chatService = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DirectChatService</span>();
chatService.<span class="hljs-title function_">sendMessage</span>(<span class="hljs-string">"ç¼–å†™ä¸€ä¸ªPythonå¿«é€Ÿæ’åºå‡½æ•°"</span>)
    .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">result</span> =&gt;</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"AIå›å¤:"</span>, result.<span class="hljs-property">response</span>);
    });
</code></pre>
<h3 data-id="heading-7">1.6 é€‚ç”¨åœºæ™¯</h3>
<p><strong>é€‚åˆç›´æ¥è°ƒç”¨çš„åœºæ™¯ï¼š</strong></p>
<ul>
<li>é€šç”¨å¯¹è¯å’ŒèŠå¤©</li>
<li>ä»£ç ç”Ÿæˆå’Œè°ƒè¯•</li>
<li>åˆ›æ„å†™ä½œå’Œå†…å®¹ç”Ÿæˆ</li>
<li>è¯­è¨€ç¿»è¯‘å’Œæ€»ç»“</li>
<li>é€»è¾‘æ¨ç†å’Œæ•°å­¦è®¡ç®—</li>
</ul>
<p><strong>ä¼˜åŠ¿ï¼š</strong></p>
<ul>
<li>æ¶æ„ç®€å•ï¼Œéƒ¨ç½²å¿«é€Ÿ</li>
<li>å“åº”å»¶è¿Ÿä½</li>
<li>å……åˆ†åˆ©ç”¨æ¨¡å‹åŸå§‹èƒ½åŠ›</li>
<li>ç»´æŠ¤æˆæœ¬ç›¸å¯¹è¾ƒä½</li>
</ul>
<h2 data-id="heading-8">äºŒã€æ¨¡å¼äºŒï¼šRAGå¢å¼ºçš„çŸ¥è¯†åº“ç³»ç»Ÿ</h2>
<h3 data-id="heading-9">2.1 æ ¸å¿ƒæ¶æ„ï¼šDify ä½œä¸º"æ€»è°ƒåº¦ä¸­å¿ƒ"</h3>
<p>å½“éœ€è¦ç»“åˆä¼ä¸šç§æœ‰çŸ¥è¯†æ—¶ï¼ŒRAGç³»ç»Ÿæˆä¸ºå¿…è¦é€‰æ‹©ã€‚Difyåœ¨è¿™é‡Œæ‰®æ¼”"æ€»ç»ç†"è§’è‰²ï¼Œåè°ƒæ‰€æœ‰æŠ€æœ¯æœåŠ¡ã€‚</p>
<p><strong>æœåŠ¡è§’è‰²åˆ’åˆ†ï¼š</strong></p>
<ul>
<li><strong>Dify</strong> = æ€»ç»ç†ï¼ˆæ€»è°ƒåº¦ï¼‰</li>
<li><strong>Ollama/VLLM</strong> = æŠ€æœ¯ä¸“å®¶éƒ¨é—¨</li>
<li><strong>Xinference(åµŒå…¥æ¨¡å‹)</strong> = æ¡£æ¡ˆæ£€ç´¢éƒ¨é—¨</li>
<li><strong>Xinference(é‡æ’åºæ¨¡å‹)</strong> = è´¨é‡å®¡æ ¸éƒ¨é—¨</li>
<li><strong>å‘é‡æ•°æ®åº“</strong> = æ¡£æ¡ˆä»“åº“</li>
</ul>
<h3 data-id="heading-10">2.2 RAG ç³»ç»Ÿå®Œæ•´éƒ¨ç½²</h3>
<p><strong>æ¨¡å‹æœåŠ¡éƒ¨ç½²ï¼š</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># VLLMå¤§æ¨¡å‹æœåŠ¡</span>
python -m vllm.entrypoints.openai.api_server --model qwen-7b --port 8000

<span class="hljs-comment"># XinferenceåµŒå…¥å’Œé‡æ’åºæœåŠ¡</span>
xinference-local --port 9997

<span class="hljs-comment"># éƒ¨ç½²æ‰€éœ€æ¨¡å‹</span>
curl -X POST <span class="hljs-string">"http://localhost:9997/v1/models"</span> \
  -d <span class="hljs-string">'{"model_name": "bge-large-zh", "model_type": "embedding"}'</span>
  
curl -X POST <span class="hljs-string">"http://localhost:9997/v1/models"</span> \
  -d <span class="hljs-string">'{"model_name": "bge-reranker-large", "model_type": "rerank"}'</span>
</code></pre>
<h3 data-id="heading-11">2.3 Dify çš„è°ƒåº¦æµç¨‹</h3>
<p>å½“ç”¨æˆ·æé—®æ—¶ï¼ŒDifyè‡ªåŠ¨æ‰§è¡Œå®Œæ•´çš„RAGæµç¨‹ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">ç”¨æˆ·æé—®ï¼š"å…¬å¸å¹´å‡æ”¿ç­–æ˜¯æ€æ ·çš„ï¼Ÿ"
    â†“
<span class="hljs-selector-attr">[Dify æ¥æ”¶é—®é¢˜]</span>
    â†“
<span class="hljs-selector-attr">[Dify è°ƒç”¨ XinferenceåµŒå…¥æ¨¡å‹]</span> â†’ ç”Ÿæˆé—®é¢˜å‘é‡
    â†“
<span class="hljs-selector-attr">[Dify è°ƒç”¨å‘é‡æ•°æ®åº“]</span> â†’ æ£€ç´¢ç›¸å…³æ–‡æ¡£(ç²—æ’)
    â†“  
<span class="hljs-selector-attr">[Dify è°ƒç”¨ Xinferenceé‡æ’åºæ¨¡å‹]</span> â†’ ç²¾æ’<span class="hljs-attribute">Top</span> <span class="hljs-number">3</span>æ–‡æ¡£
    â†“
<span class="hljs-selector-attr">[Dify æ„å»ºå¢å¼ºæç¤ºè¯]</span> â†’ ç»„åˆé—®é¢˜+ä¸Šä¸‹æ–‡
    â†“
<span class="hljs-selector-attr">[Dify è°ƒç”¨ VLLMå¤§æ¨¡å‹]</span> â†’ ç”ŸæˆåŸºäºçŸ¥è¯†çš„ç­”æ¡ˆ
    â†“
<span class="hljs-selector-attr">[Dify è¿”å›ç­”æ¡ˆç»™ç”¨æˆ·]</span>
</code></pre>
<h3 data-id="heading-12">2.4 RAGç³»ç»Ÿæ ¸å¿ƒä»£ç é€»è¾‘</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">RAGSystem</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):
        self.embedder = XinferenceEmbedding()
        self.reranker = XinferenceReranker()
        self.llm_client = OpenAI(base_url=<span class="hljs-string">"http://localhost:8000/v1"</span>)
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">process_question</span>(<span class="hljs-params">self, user_question</span>):
        <span class="hljs-comment"># 1. å‘é‡æ£€ç´¢</span>
        query_vector = self.embedder.get_embedding(user_question)
        candidate_chunks = self.vector_search(query_vector, top_k=<span class="hljs-number">10</span>)
        
        <span class="hljs-comment"># 2. é‡æ’åºç²¾æ’</span>
        ranked_chunks = self.reranker.rerank(
            question=user_question,
            documents=[chunk.content <span class="hljs-keyword">for</span> chunk <span class="hljs-keyword">in</span> candidate_chunks],
            top_k=<span class="hljs-number">3</span>
        )
        
        <span class="hljs-comment"># 3. å¢å¼ºç”Ÿæˆ</span>
        context = <span class="hljs-string">"\n"</span>.join(ranked_chunks)
        prompt = self.build_rag_prompt(user_question, context)
        
        answer = self.llm_client.chat.completions.create(
            model=<span class="hljs-string">"qwen-7b"</span>,
            messages=[{<span class="hljs-string">"role"</span>: <span class="hljs-string">"user"</span>, <span class="hljs-string">"content"</span>: prompt}]
        )
        
        <span class="hljs-keyword">return</span> answer.choices[<span class="hljs-number">0</span>].message.content

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">build_rag_prompt</span>(<span class="hljs-params">self, question, context</span>):
        <span class="hljs-keyword">return</span> <span class="hljs-string">f"""è¯·ä¸¥æ ¼æ ¹æ®ä»¥ä¸‹èƒŒæ™¯ä¿¡æ¯å›ç­”é—®é¢˜ã€‚å¦‚æœä¿¡æ¯ä¸è¶³ï¼Œè¯·è¯´æ˜ã€‚

èƒŒæ™¯ä¿¡æ¯:
<span class="hljs-subst">{context}</span>

é—®é¢˜: <span class="hljs-subst">{question}</span>

è¯·æ ¹æ®èƒŒæ™¯ä¿¡æ¯å›ç­”:"""</span>
</code></pre>
<h3 data-id="heading-13">2.5 é‡æ’åºæ¨¡å‹çš„ä»·å€¼</h3>
<p><strong>æ•ˆæœå¯¹æ¯”ï¼š</strong></p>
<pre><code class="hljs language-css" lang="css">æ²¡æœ‰é‡æ’åºï¼š
æ£€ç´¢ç»“æœï¼š<span class="hljs-selector-attr">[<span class="hljs-string">"å…¬å¸æˆç«‹äº2010å¹´"</span>, <span class="hljs-string">"å¹´å‡æ”¿ç­–æ˜¯15å¤©"</span>, <span class="hljs-string">"å…¬å¸åœ°å€åœ¨åŒ—äº¬"</span>]</span>

åŠ å…¥é‡æ’åºåï¼š  
æ£€ç´¢ç»“æœï¼š<span class="hljs-selector-attr">[<span class="hljs-string">"å¹´å‡æ”¿ç­–ï¼šå·¥ä½œæ»¡1å¹´15å¤©"</span>, <span class="hljs-string">"å¹´å‡ç”³è¯·æµç¨‹..."</span>, <span class="hljs-string">"å‡æœŸè®¡ç®—è§„åˆ™..."</span>]</span>
</code></pre>
<p><strong>æ€§èƒ½æå‡ï¼š</strong> å‡†ç¡®ç‡æå‡15-30%ï¼Œæœ‰æ•ˆå‡å°‘æ¨¡å‹å¹»è§‰ã€‚</p>
<h3 data-id="heading-14">2.6 é€‚ç”¨åœºæ™¯</h3>
<p><strong>é€‚åˆRAGç³»ç»Ÿçš„åœºæ™¯ï¼š</strong></p>
<ul>
<li>ä¼ä¸šçŸ¥è¯†åº“é—®ç­”</li>
<li>æŠ€æœ¯æ–‡æ¡£æŸ¥è¯¢</li>
<li>å®¢æˆ·æ”¯æŒç³»ç»Ÿ</li>
<li>åˆè§„æ”¿ç­–å’¨è¯¢</li>
<li>å†…éƒ¨æµç¨‹æŒ‡å¯¼</li>
</ul>
<p><strong>ä¼˜åŠ¿ï¼š</strong></p>
<ul>
<li>å›ç­”åŸºäºä¼ä¸šçœŸå®çŸ¥è¯†</li>
<li>å‡å°‘æ¨¡å‹å¹»è§‰ç°è±¡</li>
<li>çŸ¥è¯†æ›´æ–°ä¾¿æ·ï¼ˆåªéœ€æ›´æ–°æ–‡æ¡£ï¼‰</li>
<li>ç­”æ¡ˆå¯è¿½æº¯æ¥æº</li>
</ul>
<h2 data-id="heading-15">ä¸‰ã€ä¸¤ç§æ¨¡å¼å¯¹æ¯”åˆ†æ</h2>
<h3 data-id="heading-16">3.1 æ¶æ„å¤æ‚åº¦å¯¹æ¯”</h3>






























<table><thead><tr><th>æ–¹é¢</th><th>ç›´æ¥è°ƒç”¨æ¨¡å¼</th><th>RAGå¢å¼ºæ¨¡å¼</th></tr></thead><tbody><tr><td><strong>ç»„ä»¶æ•°é‡</strong></td><td>2-3ä¸ªç»„ä»¶</td><td>5-7ä¸ªç»„ä»¶</td></tr><tr><td><strong>éƒ¨ç½²éš¾åº¦</strong></td><td>ç®€å•</td><td>ä¸­ç­‰</td></tr><tr><td><strong>ç»´æŠ¤æˆæœ¬</strong></td><td>ä½</td><td>ä¸­é«˜</td></tr><tr><td><strong>æ•°æ®æµ</strong></td><td>ç®€å•ç›´æ¥</td><td>å¤æ‚ç®¡é“</td></tr></tbody></table>
<h3 data-id="heading-17">3.2 èƒ½åŠ›èŒƒå›´å¯¹æ¯”</h3>






























<table><thead><tr><th>èƒ½åŠ›ç»´åº¦</th><th>ç›´æ¥è°ƒç”¨</th><th>RAGå¢å¼º</th></tr></thead><tbody><tr><td><strong>é€šç”¨çŸ¥è¯†</strong></td><td>âœ… ä¼˜ç§€</td><td>âœ… ä¼˜ç§€</td></tr><tr><td><strong>ç§æœ‰çŸ¥è¯†</strong></td><td>âŒ æ— æ³•è®¿é—®</td><td>âœ… å®Œæ•´è®¿é—®</td></tr><tr><td><strong>äº‹å®å‡†ç¡®æ€§</strong></td><td>ä¸­ç­‰ï¼ˆå¯èƒ½å¹»è§‰ï¼‰</td><td>é«˜ï¼ˆåŸºäºæ–‡æ¡£ï¼‰</td></tr><tr><td><strong>çŸ¥è¯†æ—¶æ•ˆæ€§</strong></td><td>ä¾èµ–è®­ç»ƒæ•°æ®</td><td>å®æ—¶æ›´æ–°</td></tr></tbody></table>
<h3 data-id="heading-18">3.3 æ€§èƒ½æŒ‡æ ‡å¯¹æ¯”</h3>






























<table><thead><tr><th>æ€§èƒ½æŒ‡æ ‡</th><th>ç›´æ¥è°ƒç”¨</th><th>RAGå¢å¼º</th></tr></thead><tbody><tr><td><strong>å“åº”å»¶è¿Ÿ</strong></td><td>100-500ms</td><td>500-2000ms</td></tr><tr><td><strong>ååé‡</strong></td><td>é«˜</td><td>ä¸­</td></tr><tr><td><strong>å‡†ç¡®æ€§</strong></td><td>ä¾èµ–æ¨¡å‹èƒ½åŠ›</td><td>ä¾èµ–æ£€ç´¢è´¨é‡</td></tr><tr><td><strong>å¯è§£é‡Šæ€§</strong></td><td>ä½</td><td>é«˜ï¼ˆå¯è¿½æº¯æ¥æºï¼‰</td></tr></tbody></table>
<h2 data-id="heading-19">å››ã€æ··åˆæ¶æ„ï¼šæœ€ä½³å®è·µå»ºè®®</h2>
<h3 data-id="heading-20">4.1 æ™ºèƒ½è·¯ç”±ç­–ç•¥</h3>
<p>åœ¨å®é™…åº”ç”¨ä¸­ï¼Œå¯ä»¥ç»“åˆä¸¤ç§æ¨¡å¼ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">HybridAISystem</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">route_question</span>(<span class="hljs-params">self, question</span>):
        <span class="hljs-string">"""æ™ºèƒ½è·¯ç”±é—®é¢˜åˆ°åˆé€‚çš„å¤„ç†æ¨¡å¼"""</span>
        
        <span class="hljs-comment"># åˆ¤æ–­é—®é¢˜ç±»å‹</span>
        <span class="hljs-keyword">if</span> self.is_general_question(question):
            <span class="hljs-comment"># é€šç”¨é—®é¢˜ä½¿ç”¨ç›´æ¥è°ƒç”¨</span>
            <span class="hljs-keyword">return</span> self.direct_chat(question)
        <span class="hljs-keyword">elif</span> self.is_knowledge_question(question):
            <span class="hljs-comment"># çŸ¥è¯†æ€§é—®é¢˜ä½¿ç”¨RAG</span>
            <span class="hljs-keyword">return</span> self.rag_chat(question)
        <span class="hljs-keyword">else</span>:
            <span class="hljs-comment"># é»˜è®¤ä½¿ç”¨ç›´æ¥è°ƒç”¨</span>
            <span class="hljs-keyword">return</span> self.direct_chat(question)
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">is_general_question</span>(<span class="hljs-params">self, question</span>):
        <span class="hljs-string">"""åˆ¤æ–­æ˜¯å¦ä¸ºé€šç”¨é—®é¢˜"""</span>
        general_keywords = [<span class="hljs-string">'ä½ å¥½'</span>, <span class="hljs-string">'è°¢è°¢'</span>, <span class="hljs-string">'å¸®åŠ©'</span>, <span class="hljs-string">'ä»‹ç»'</span>, <span class="hljs-string">'è§£é‡Š'</span>]
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">any</span>(keyword <span class="hljs-keyword">in</span> question <span class="hljs-keyword">for</span> keyword <span class="hljs-keyword">in</span> general_keywords)
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">is_knowledge_question</span>(<span class="hljs-params">self, question</span>):
        <span class="hljs-string">"""åˆ¤æ–­æ˜¯å¦ä¸ºçŸ¥è¯†æ€§é—®é¢˜"""</span>
        knowledge_keywords = [<span class="hljs-string">'æ”¿ç­–'</span>, <span class="hljs-string">'æµç¨‹'</span>, <span class="hljs-string">'è§„å®š'</span>, <span class="hljs-string">'æ‰‹å†Œ'</span>, <span class="hljs-string">'å¦‚ä½•æ“ä½œ'</span>]
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">any</span>(keyword <span class="hljs-keyword">in</span> question <span class="hljs-keyword">for</span> keyword <span class="hljs-keyword">in</span> knowledge_keywords)
</code></pre>
<h3 data-id="heading-21">4.2 éƒ¨ç½²å»ºè®®</h3>
<p><strong>å¼€å‘æµ‹è¯•ç¯å¢ƒï¼š</strong></p>
<ul>
<li>ç›´æ¥è°ƒç”¨ï¼šOllama + ç®€å•åç«¯</li>
<li>RAGç³»ç»Ÿï¼šOllama + Xinference + Chroma</li>
</ul>
<p><strong>ç”Ÿäº§ç¯å¢ƒï¼š</strong></p>
<ul>
<li>ç›´æ¥è°ƒç”¨ï¼šVLLMé›†ç¾¤ + è´Ÿè½½å‡è¡¡</li>
<li>RAGç³»ç»Ÿï¼šVLLM + Xinferenceé›†ç¾¤ + Milvus + Dify</li>
</ul>
<h2 data-id="heading-22">äº”ã€æ€»ç»“ä¸é€‰æ‹©æŒ‡å—</h2>
<h3 data-id="heading-23">5.1 å¦‚ä½•é€‰æ‹©ï¼Ÿ</h3>
<p><strong>é€‰æ‹©ç›´æ¥è°ƒç”¨å½“ï¼š</strong></p>
<ul>
<li>éœ€è¦æ¨¡å‹é€šç”¨èƒ½åŠ›å’Œåˆ›é€ åŠ›</li>
<li>å“åº”é€Ÿåº¦æ˜¯é¦–è¦è€ƒè™‘å› ç´ </li>
<li>åº”ç”¨åœºæ™¯ä¸ä¾èµ–ç‰¹å®šé¢†åŸŸçŸ¥è¯†</li>
<li>èµ„æºå’Œå›¢é˜Ÿæœ‰é™</li>
</ul>
<p><strong>é€‰æ‹©RAGç³»ç»Ÿå½“ï¼š</strong></p>
<ul>
<li>éœ€è¦åŸºäºä¼ä¸šç§æœ‰çŸ¥è¯†å›ç­”</li>
<li>äº‹å®å‡†ç¡®æ€§è‡³å…³é‡è¦</li>
<li>éœ€è¦ç­”æ¡ˆå¯è¿½æº¯å’Œå¯éªŒè¯</li>
<li>æœ‰è¶³å¤Ÿçš„æŠ€æœ¯å›¢é˜Ÿæ”¯æŒ</li>
</ul>
<h3 data-id="heading-24">5.2 æ¼”è¿›è·¯å¾„</h3>
<p>å¯¹äºå¤§å¤šæ•°ä¼ä¸šï¼Œå»ºè®®çš„æ¼”è¿›è·¯å¾„ï¼š</p>
<ol>
<li><strong>é˜¶æ®µä¸€</strong>ï¼šä»ç›´æ¥è°ƒç”¨å¼€å§‹ï¼ŒéªŒè¯åŸºç¡€éœ€æ±‚</li>
<li><strong>é˜¶æ®µäºŒ</strong>ï¼šé’ˆå¯¹ç‰¹å®šåœºæ™¯å¼•å…¥RAGèƒ½åŠ›</li>
<li><strong>é˜¶æ®µä¸‰</strong>ï¼šæ„å»ºæ··åˆç³»ç»Ÿï¼Œæ™ºèƒ½è·¯ç”±</li>
<li><strong>é˜¶æ®µå››</strong>ï¼šå®Œå–„ç›‘æ§ã€è¯„ä¼°å’Œä¼˜åŒ–ä½“ç³»</li>
</ol>
<p>ä¸¤ç§æ¨¡å¼å¹¶éäº’æ–¥ï¼Œè€Œæ˜¯äº’è¡¥çš„æŠ€æœ¯æ–¹æ¡ˆã€‚ç†è§£å„è‡ªçš„ä¼˜åŠ¿å’Œé€‚ç”¨åœºæ™¯ï¼Œæ‰èƒ½ä¸ºä¼ä¸šæ„å»ºæœ€åˆé€‚çš„AIèƒ½åŠ›ä½“ç³»ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é¡¹ç›®å¤§æ‰«é™¤ç¥å™¨ï¼šKnip â€”â€” å°†ä½ çš„ä»£ç åº“â€œç˜¦èº«â€åˆ°åº•]]></title>    <link>https://juejin.cn/post/7582861402277609506</link>    <guid>https://juejin.cn/post/7582861402277609506</guid>    <pubDate>2025-12-13T03:34:18.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582861402277609506" data-draft-id="7582861402277593122" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é¡¹ç›®å¤§æ‰«é™¤ç¥å™¨ï¼šKnip â€”â€” å°†ä½ çš„ä»£ç åº“â€œç˜¦èº«â€åˆ°åº•"/> <meta itemprop="keywords" content="å‰ç«¯,æ¶æ„,ä»£ç è§„èŒƒ"/> <meta itemprop="datePublished" content="2025-12-13T03:34:18.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°˜ä¸–ä¸­ä¸€ä½è¿·é€”å°ä¹¦ç«¥"/> <meta itemprop="url" content="https://juejin.cn/user/3315782802490568"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é¡¹ç›®å¤§æ‰«é™¤ç¥å™¨ï¼šKnip â€”â€” å°†ä½ çš„ä»£ç åº“â€œç˜¦èº«â€åˆ°åº•
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3315782802490568/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°˜ä¸–ä¸­ä¸€ä½è¿·é€”å°ä¹¦ç«¥
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-13T03:34:18.000Z" title="Sat Dec 13 2025 03:34:18 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4121cbabaaf8414abd3325e75f5ad6b1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCY5LiW5Lit5LiA5L2N6L-36YCU5bCP5Lmm56ul:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766201776&amp;x-signature=8fjpS9GYqhlNjnRMb66GTXy39pk%3D" alt="image.png" loading="lazy"/></p>
<p>åœ¨ç°ä»£å‰ç«¯å¼€å‘ä¸­ï¼Œéšç€é¡¹ç›®è¿­ä»£å‘¨æœŸçš„æ‹‰é•¿ï¼Œä»£ç åº“ä¸­å¾€å¾€ä¼šå †ç§¯è¶Šæ¥è¶Šå¤šçš„â€œåƒµå°¸ä»£ç â€ï¼šä¸å†ä½¿ç”¨çš„ç»„ä»¶ã€åºŸå¼ƒçš„å·¥å…·å‡½æ•°ã€é—ç•™åœ¨ <code>package.json</code> ä¸­çš„ä¾èµ–é¡¹â€¦â€¦è¿™äº›å†—ä½™ä¸ä»…å¢åŠ äº†é¡¹ç›®çš„ç»´æŠ¤æˆæœ¬ï¼Œæ‹–æ…¢äº†æ„å»ºé€Ÿåº¦ï¼Œè¿˜å¯èƒ½å› ä¸ºæœªåŠæ—¶æ›´æ–°çš„åºŸå¼ƒä¾èµ–å¸¦æ¥å®‰å…¨éšæ‚£ã€‚</p>
<p>é€šå¸¸æˆ‘ä»¬å¯èƒ½ä¼šç”¨ ESLint æ¥æ£€æŸ¥æœªä½¿ç”¨çš„å˜é‡ï¼Œæˆ–è€…æ‰‹åŠ¨å®šæœŸæ¸…ç†ã€‚ä½†å¯¹äºè·¨æ–‡ä»¶çš„æœªä½¿ç”¨å¯¼å‡ºã€æˆ–è€…æ•´ä¸ªæœªè¢«å¼•ç”¨çš„æ–‡ä»¶ï¼Œæ™®é€šçš„ Linter å¾€å¾€æ— èƒ½ä¸ºåŠ›ã€‚</p>
<p>ä»Šå¤©æˆ‘è¦ä»‹ç»çš„è¿™æ¬¾ç¥å™¨ â€”â€” <strong>Knip</strong>ï¼Œå°±æ˜¯ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜è€Œç”Ÿçš„ã€‚å®ƒåƒä¸€æŠŠé”‹åˆ©çš„ç‘å£«å†›åˆ€ï¼Œèƒ½ç²¾å‡†åœ°åˆ‡å‰²æ‰ä½ é¡¹ç›®ä¸­çš„é‚£äº›â€œç´¯èµ˜â€ã€‚</p>
<h2 data-id="heading-0">ä»€ä¹ˆæ˜¯ Knipï¼Ÿ</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fknip.dev%2F" target="_blank" title="https://knip.dev/" ref="nofollow noopener noreferrer">Knip</a> æ˜¯ä¸€ä¸ªåŸºäº TypeScript ç¼–å†™çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œä¸“é—¨ç”¨äºæŸ¥æ‰¾ JavaScript å’Œ TypeScript é¡¹ç›®ä¸­çš„<strong>æœªä½¿ç”¨æ–‡ä»¶ã€ä¾èµ–é¡¹å’Œå¯¼å‡º</strong>ã€‚</p>
<p>ä¸ä¼ ç»Ÿçš„ Linter ä¸åŒï¼ŒKnip ä¸ä»…ä»…ç›¯ç€å•ä¸ªæ–‡ä»¶çœ‹ï¼Œå®ƒä¼šåˆ†ææ•´ä¸ªé¡¹ç›®çš„ä¾èµ–å…³ç³»å›¾ã€‚è¿™æ„å‘³ç€å®ƒèƒ½å‘ç°é‚£äº›â€œè™½ç„¶è¢«å®šä¹‰äº†ä¸”æ²¡æœ‰è¯­æ³•é”™è¯¯ï¼Œä½†å®é™…ä¸Šä»æœªè¢«å…¶ä»–æ–‡ä»¶å¼•ç”¨è¿‡â€çš„å­¤ç«‹ä»£ç ã€‚</p>
<h2 data-id="heading-1">Knip çš„æ ¸å¿ƒç»æŠ€</h2>
<p>Knip çš„åŠŸèƒ½éå¸¸å¼ºå¤§ï¼Œä¸»è¦æ¶µç›–ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š</p>
<h3 data-id="heading-2">1. âœ‚ æŸ¥æ‰¾æœªä½¿ç”¨çš„æ–‡ä»¶ (Unused Files)</h3>
<p>å®ƒèƒ½æ‰¾å‡ºé¡¹ç›®ä¸­é‚£äº›é™é™èººç€å´ä»æœªè¢«å¯¼å…¥è¿‡çš„æ–‡ä»¶ã€‚</p>
<h3 data-id="heading-3">2.  æŸ¥æ‰¾æœªä½¿ç”¨çš„ä¾èµ– (Unused Dependencies)</h3>
<p>å®ƒä¼šæ‰«æä½ çš„ <code>package.json</code>ï¼Œå‘Šè¯‰ä½ å“ªäº› <code>dependencies</code> å’Œ <code>devDependencies</code> å®é™…ä¸Šåœ¨ä»£ç ä¸­ä¸€æ¬¡éƒ½æ²¡ç”¨åˆ°ã€‚è¿™å¯¹äºæ¸…ç†é™ˆæ—§ä¾èµ–éå¸¸æœ‰å¸®åŠ©ã€‚</p>
<h3 data-id="heading-4">3.  æŸ¥æ‰¾æœªä½¿ç”¨çš„å¯¼å‡º (Unused Exports)</h3>
<p>è¿™æ˜¯ Knip æœ€æ€æ‰‹çº§çš„åŠŸèƒ½ã€‚é€šè¿‡åˆ†æå¯¼å…¥å¯¼å‡ºå…³ç³»ï¼Œå®ƒèƒ½æ‰¾å‡ºé‚£äº›è¢« <code>export</code> å‡ºæ¥ï¼Œä½†ä¸ä»…å½“å‰æ–‡ä»¶æ²¡ç”¨ï¼Œæ•´ä¸ªé¡¹ç›®å…¶ä»–åœ°æ–¹ä¹Ÿæ²¡ç”¨çš„å˜é‡ã€å‡½æ•°æˆ–ç±»ã€‚</p>
<h3 data-id="heading-5">4.  æŸ¥æ‰¾æœªåˆ—å‡ºçš„ä¾èµ– (Unlisted Dependencies)</h3>
<p>åè¿‡æ¥ï¼Œå®ƒä¹Ÿèƒ½å¸®ä½ å‘ç°é‚£äº›ä½ åœ¨ä»£ç é‡Œ <code>import</code> äº†ï¼Œä½†å¿˜è®°å†™åœ¨ <code>package.json</code> é‡Œçš„ä¾èµ–ï¼Œé¿å…ä¸Šçº¿åå› ä¸ºç¼ºåŒ…è€Œ crashã€‚</p>
<h3 data-id="heading-6">5.  å¼ºå¤§çš„ç”Ÿæ€æ”¯æŒ</h3>
<p>Knip å†…ç½®äº†å¯¹å„ç§ä¸»æµæ¡†æ¶å’Œå·¥å…·çš„æ’ä»¶æ”¯æŒï¼ŒåŒ…æ‹¬ä½†ä¸é™äºï¼š</p>
<ul>
<li>Next.js</li>
<li>Vite, Webpack, Rollup</li>
<li>Jest, Vitest</li>
<li>Tailwind CSS</li>
<li>Storybook</li>
<li>GitHub Actions ç­‰ç­‰</li>
</ul>
<p>è¿™æ„å‘³ç€å®ƒèƒ½ç†è§£è¿™äº›å·¥å…·çš„é…ç½®æ–‡ä»¶å’Œç‰¹å®šç”¨æ³•ï¼Œä¸ä¼šè¯¯æŠ¥ï¼ˆæ¯”å¦‚æŠŠ Next.js çš„ <code>pages</code> ç›®å½•ä¸‹çš„æ–‡ä»¶å½“æˆæœªä½¿ç”¨æ–‡ä»¶ï¼‰ã€‚</p>
<h2 data-id="heading-7">å¿«é€Ÿä¸Šæ‰‹</h2>
<h3 data-id="heading-8">å®‰è£…</h3>
<p>ä½ å¯ä»¥å°† Knip ä½œä¸ºå¼€å‘ä¾èµ–å®‰è£…åˆ°ä½ çš„é¡¹ç›®ä¸­ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">npm install -D knip typescript @types/node
<span class="hljs-comment"># æˆ–è€…</span>
yarn add -D knip typescript @types/node
<span class="hljs-comment"># æˆ–è€…</span>
pnpm add -D knip typescript @types/node
</code></pre>
<p><em>æ³¨æ„ï¼šKnip ä¾èµ– TypeScript è¿›è¡Œåˆ†æï¼Œå³ä½¿ä½ æ˜¯ JS é¡¹ç›®ä¹Ÿå»ºè®®å®‰è£…ã€‚</em></p>
<h3 data-id="heading-9">é…ç½® script</h3>
<p>åœ¨ <code>package.json</code> ä¸­æ·»åŠ ä¸€ä¸ªè„šæœ¬ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"scripts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"knip"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"knip"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 data-id="heading-10">è¿è¡Œ</h3>
<p>åœ¨ç»ˆç«¯æ‰§è¡Œï¼š</p>
<pre><code class="hljs language-bash" lang="bash">npm run knip
</code></pre>
<p>Knip ä¼šå¼€å§‹æ‰«æä½ çš„é¡¹ç›®ï¼Œå¹¶è¾“å‡ºä¸€ä»½è¯¦ç»†çš„æŠ¥å‘Šï¼Œåˆ—å‡ºæ‰€æœ‰ç–‘ä¼¼æœªä½¿ç”¨çš„é¡¹ç›®ã€‚</p>
<h2 data-id="heading-11">è¿›é˜¶é…ç½®</h2>
<p>è™½ç„¶ Knip å¾ˆæœ‰â€œçœ¼åŠ›è§â€ï¼Œèƒ½å¤Ÿè‡ªåŠ¨è¯†åˆ«å¾ˆå¤šé…ç½®ï¼Œä½†å¯¹äºå¤æ‚çš„é¡¹ç›®ï¼Œä½ å¯èƒ½éœ€è¦ä¸€ä¸ª <code>knip.json</code> (æˆ– <code>knip.ts</code>, <code>knip.js</code>) é…ç½®æ–‡ä»¶æ¥å¾®è°ƒå®ƒçš„è¡Œä¸ºã€‚</p>
<p>ä¾‹å¦‚ï¼ŒæŒ‡å®šå…¥å£æ–‡ä»¶ï¼ˆEntry filesï¼‰å’Œå¿½ç•¥ç‰¹å®šçš„æ–‡ä»¶æˆ–ä¾èµ–ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"$schema"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://unpkg.com/knip@5/schema.json"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"entry"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"src/index.ts"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"src/cli.ts"</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"project"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"src/**/*.ts!"</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"ignore"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"src/legacy/**"</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"ignoreDependencies"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"eslint-config-prettier"</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"ignoreExportsUsedInFile"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span>
<span class="hljs-punctuation">}</span>
</code></pre>
<ul>
<li><code>entry</code>: å‘Šè¯‰ Knip ä»å“ªé‡Œå¼€å§‹åˆ†æä¾èµ–å›¾ã€‚é€šå¸¸æ˜¯ä½ çš„ <code>main</code> æ–‡ä»¶æˆ–é¡µé¢å…¥å£ã€‚</li>
<li><code>ignore</code>: å¿½ç•¥æŸäº›æ–‡ä»¶ä¸è¿›è¡Œæ£€æŸ¥ã€‚</li>
<li><code>ignoreDependencies</code>: æœ‰äº›ä¾èµ–å¯èƒ½æ˜¯å…¨å±€ä½¿ç”¨çš„æˆ–è€…é€šè¿‡ Babel æ’ä»¶æ³¨å…¥çš„ï¼ŒKnip ä¹Ÿå°±æ˜¯é™æ€åˆ†ææ‰«ä¸åˆ°ï¼Œå¯ä»¥åœ¨è¿™é‡Œå¿½ç•¥ä»¥æ¶ˆé™¤è¯¯æŠ¥ã€‚</li>
</ul>
<h2 data-id="heading-12">æœ€ä½³å®è·µå·¥ä½œæµ</h2>
<ol>
<li><strong>åˆæ¬¡æ‰«æ</strong>ï¼šè¿è¡Œ <code>knip</code>ï¼Œä½ ä¼šå¤§æ¦‚ç‡è¢«å“ä¸€è·³ï¼ˆç”šè‡³æœ‰æˆç™¾ä¸Šåƒä¸ªæŠ¥é”™ï¼‰ã€‚ä¸è¦æ…Œï¼Œè¿™å¾ˆæ­£å¸¸ã€‚</li>
<li><strong>æ’é™¤è¯¯æŠ¥</strong>ï¼šä»”ç»†æ£€æŸ¥æŠ¥å‘Šã€‚å¦‚æœæ˜¯å·¥å…·é…ç½®ï¼ˆå¦‚ Jest é…ç½®ã€Webpack é…ç½®ï¼‰è¢«è¯¯æŠ¥ï¼Œæ£€æŸ¥æ˜¯å¦éœ€è¦å¯ç”¨å¯¹åº”çš„ Knip æ’ä»¶æˆ–åœ¨ <code>knip.json</code> ä¸­é…ç½®å…¥å£ã€‚</li>
<li><strong>é€æ­¥æ¸…ç†</strong>ï¼š
<ul>
<li><strong>å…ˆåˆ æ–‡ä»¶</strong>ï¼šæœªä½¿ç”¨çš„æ–‡ä»¶æ˜¯æœ€å®¹æ˜“ç¡®è®¤å’Œåˆ é™¤çš„ã€‚</li>
<li><strong>å†åˆ ä¾èµ–</strong>ï¼šç¡®è®¤ <code>package.json</code> ä¸­æœªä½¿ç”¨çš„ä¾èµ–ï¼Œå¸è½½å®ƒä»¬ã€‚</li>
<li><strong>æœ€åå¤„ç†å¯¼å‡º</strong>ï¼šå¯¹äºæœªä½¿ç”¨çš„ <code>export</code>ï¼Œä½ å¯ä»¥é€‰æ‹©åˆ é™¤å¯¼å‡ºå…³é”®å­—å˜æˆå±€éƒ¨å˜é‡ï¼Œæˆ–è€…ç›´æ¥åˆ é™¤è¯¥å‡½æ•°ã€‚</li>
</ul>
</li>
<li><strong>CI é›†æˆ</strong>ï¼šå°† <code>knip</code> åŠ å…¥åˆ°ä½ çš„ CI æµç¨‹ä¸­ï¼ˆå¦‚ GitHub Actionsï¼‰ã€‚è¿™æ ·æ¯æ¬¡æäº¤ MR æ—¶ï¼ŒKnip éƒ½ä¼šè‡ªåŠ¨æ£€æŸ¥ï¼Œé˜²æ­¢æ–°çš„â€œåƒåœ¾ä»£ç â€æ··å…¥ä¸»åˆ†æ”¯ã€‚</li>
</ol>
<h2 data-id="heading-13">æ€»ç»“</h2>
<p>ä»£ç åº“çš„ç»´æŠ¤å°±åƒæ‰“æ‰«æˆ¿é—´ï¼Œä¸ä»…è¦å‹¤æ‹‚æ‹­ï¼Œæ›´è¦å®šæœŸâ€œæ–­èˆç¦»â€ã€‚Knip ä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ä¸ªä¸Šå¸è§†è§’ï¼Œè®©æˆ‘ä»¬èƒ½æ¸…æ™°åœ°çœ‹åˆ°é¡¹ç›®ä¸­é‚£äº›è¢«é—å¿˜çš„è§’è½ã€‚</p>
<p>å»ºè®®å¤§å®¶éƒ½åœ¨è‡ªå·±çš„é¡¹ç›®ä¸­è¯•è¿è¡Œä¸€ä¸‹ Knipï¼Œç›¸ä¿¡æˆ‘ï¼Œå®ƒä¸€å®šä¼šç»™ä½ å¸¦æ¥â€œæƒŠå–œâ€ï¼ˆæˆ–è€…æ˜¯æƒŠå“ï¼Œå“ˆå“ˆï¼‰ã€‚è®©æˆ‘ä»¬çš„é¡¹ç›®ä¿æŒè½»é‡ã€æ•´æ´ï¼Œä»ä½¿ç”¨ Knip å¼€å§‹ï¼</p>
<hr/>
<p><strong>å‚è€ƒé“¾æ¥ï¼š</strong></p>
<ul>
<li>Knip å®˜æ–¹æ–‡æ¡£: <a href="https://link.juejin.cn?target=https%3A%2F%2Fknip.dev%2F" target="_blank" title="https://knip.dev/" ref="nofollow noopener noreferrer">knip.dev/</a></li>
<li>Knip GitHub ä»“åº“: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fwebpro%2Fknip" target="_blank" title="https://github.com/webpro/knip" ref="nofollow noopener noreferrer">github.com/webpro/knip</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä½¿ç”¨ Claude Agent SDK å†™ä¸€ä¸ª DeepResearch Agent]]></title>    <link>https://juejin.cn/post/7582776967817838592</link>    <guid>https://juejin.cn/post/7582776967817838592</guid>    <pubDate>2025-12-12T10:36:58.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582776967817838592" data-draft-id="7582779306730995747" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä½¿ç”¨ Claude Agent SDK å†™ä¸€ä¸ª DeepResearch Agent"/> <meta itemprop="keywords" content="JavaScript,AIGC,Agent"/> <meta itemprop="datePublished" content="2025-12-12T10:36:58.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="liruifengvæç‘ä¸°"/> <meta itemprop="url" content="https://juejin.cn/user/237150239994471"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä½¿ç”¨ Claude Agent SDK å†™ä¸€ä¸ª DeepResearch Agent
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/237150239994471/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    liruifengvæç‘ä¸°
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-12T10:36:58.000Z" title="Fri Dec 12 2025 10:36:58 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="a11y-dark">.hljs-comment,.hljs-quote{color:#d4d0ab}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#ffa07a}.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#f5ab35}.hljs-attribute{color:gold}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:#abe338}.hljs-section,.hljs-title{color:#00e0e0}.hljs-keyword,.hljs-selector-tag{color:#dcc6e0}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#2b2b2b;color:#f8f8f2}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}@media screen and (-ms-high-contrast:active){.hljs-addition,.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-comment,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-quote,.hljs-string,.hljs-symbol,.hljs-type{color:highlight}.hljs-keyword,.hljs-selector-tag{font-weight:700}}</style><p>æœ¬æ–‡å°†ä½¿ç”¨ Claude Agent TS SDK å†™ä¸€ä¸ª DeepResearch Agentï¼Œè¿™æ˜¯æ¥è‡ªäº <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fanthropics%2Fclaude-agent-sdk-demos" target="_blank" title="https://github.com/anthropics/claude-agent-sdk-demos" ref="nofollow noopener noreferrer">Claude å®˜æ–¹ç¤ºä¾‹ä»“åº“ï¼ˆPython ç‰ˆï¼‰</a> çš„ TS ç‰ˆæœ¬å®ç°ã€‚</p>
<p>å®Œæ•´ä»£ç åœ¨æˆ‘çš„ GitHub ä»“åº“ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fliruifengv%2Fclaude-agent-demo" target="_blank" title="https://github.com/liruifengv/claude-agent-demo" ref="nofollow noopener noreferrer">liruifengv/claude-agent-demo</a>ã€‚</p>
<h2 data-id="heading-0">ä»€ä¹ˆæ˜¯ DeepResearch Agentï¼Ÿ</h2>
<p>DeepResearch Agent æ˜¯ä¸€ä¸ª <strong>å¤š Agent åä½œç³»ç»Ÿ</strong>ï¼Œå®ƒèƒ½å¤ŸåƒçœŸæ­£çš„ç ”ç©¶å›¢é˜Ÿä¸€æ ·å·¥ä½œï¼š</p>
<ol>
<li><strong>Lead Agentï¼ˆåè°ƒè€…ï¼‰</strong>ï¼šè´Ÿè´£åˆ†è§£ç ”ç©¶ä»»åŠ¡ï¼Œè°ƒåº¦å…¶ä»– Agent</li>
<li><strong>Researcherï¼ˆç ”ç©¶å‘˜ï¼‰</strong>ï¼šè´Ÿè´£æœç´¢ç½‘ç»œã€æ”¶é›†èµ„æ–™</li>
<li><strong>Report Writerï¼ˆæŠ¥å‘Šç¼–å†™ï¼‰</strong>ï¼šè´Ÿè´£å°†ç ”ç©¶ç»“æœæ•´ç†æˆæŠ¥å‘Š</li>
</ol>
<h2 data-id="heading-1">ä½¿ç”¨ Subagents çš„å¥½å¤„</h2>
<ul>
<li>å­ä»£ç†ä¸ä¸»ä»£ç†ä¿æŒç‹¬ç«‹çš„ä¸Šä¸‹æ–‡ï¼Œé˜²æ­¢ä¿¡æ¯è¿‡è½½å¹¶ä¿æŒäº¤äº’çš„ä¸“æ³¨ã€‚è¿™ç§éš”ç¦»ç¡®ä¿äº†ä¸“é—¨çš„ä»»åŠ¡ä¸ä¼šå°†æ— å…³çš„ç»†èŠ‚æ±¡æŸ“åˆ°ä¸»å¯¹è¯ä¸Šä¸‹æ–‡ä¸­ã€‚</li>
<li>å¤šä¸ªå­ä»£ç†å¯ä»¥åŒæ—¶è¿è¡Œï¼Œæ˜¾è‘—åŠ å¿«å¤æ‚å·¥ä½œæµç¨‹ã€‚</li>
<li>æ¯ä¸ªå­ä»£ç†éƒ½å¯ä»¥æ‹¥æœ‰å®šåˆ¶åŒ–çš„ç³»ç»Ÿæç¤ºè¯ï¼ŒåŒ…æ‹¬ç‰¹å®šé¢†åŸŸçš„ä¸“ä¸šçŸ¥è¯†ã€æœ€ä½³å®è·µå’Œé™åˆ¶ã€‚</li>
<li>å­ä»£ç†å¯ä»¥è¢«é™åˆ¶åœ¨ç‰¹å®šçš„å·¥å…·ä¸Šï¼Œä»¥é™ä½æ„å¤–è¡Œä¸ºçš„é£é™©ã€‚</li>
</ul>
<p>ä½¿ç”¨ Claude Agent TS SDKï¼Œå®ç° Subagents ç‰¹åˆ«ç®€å•ã€‚</p>
<h2 data-id="heading-2">æ¶æ„å›¾</h2>
<pre><code class="hljs language-arduino" lang="arduino">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      <span class="hljs-function">Lead <span class="hljs-title">Agent</span> <span class="hljs-params">(åè°ƒè€…)</span>                      â”‚
â”‚                   åªæœ‰ <span class="hljs-built_in">Task</span> å·¥å…·ï¼Œè´Ÿè´£è°ƒåº¦                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚                   â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚   Researcher Ã—N   â”‚   â”‚   Report-Writer   â”‚
          â”‚  WebSearch, Write â”‚   â”‚ Glob, Read, Write â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</span></code></pre>
<h2 data-id="heading-3">æ ¸å¿ƒå®ç°</h2>
<h3 data-id="heading-4">1. å®šä¹‰ Subagent</h3>
<p>åœ¨ <code>agent.ts</code> ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸¤ä¸ªä¸“ä¸šåŒ–çš„ subagentï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// å®šä¹‰ä¸“ä¸šåŒ–çš„ subagent</span>
<span class="hljs-keyword">const</span> agents = {
  <span class="hljs-attr">researcher</span>: {
    <span class="hljs-attr">description</span>:
      <span class="hljs-string">"Use this agent when you need to gather research information on any topic. "</span> +
      <span class="hljs-string">"The researcher uses web search to find relevant information, articles, and sources "</span> +
      <span class="hljs-string">"from across the internet. Writes research findings to files/research_notes/ "</span> +
      <span class="hljs-string">"for later use by report writers."</span>,
    <span class="hljs-attr">tools</span>: [<span class="hljs-string">"WebSearch"</span>, <span class="hljs-string">"Write"</span>],  <span class="hljs-comment">// å¯ä»¥æœç´¢ç½‘ç»œå’Œå†™å…¥æ–‡ä»¶</span>
    <span class="hljs-attr">prompt</span>: researcherPrompt,        <span class="hljs-comment">// ç ”ç©¶å‘˜çš„ç³»ç»Ÿæç¤ºè¯</span>
    <span class="hljs-attr">model</span>: <span class="hljs-string">"haiku"</span> <span class="hljs-keyword">as</span> <span class="hljs-keyword">const</span>,
  },
  <span class="hljs-string">"report-writer"</span>: {
    <span class="hljs-attr">description</span>:
      <span class="hljs-string">"Use this agent when you need to create a formal research report document. "</span> +
      <span class="hljs-string">"The report-writer reads research findings from files/research_notes/ and synthesizes "</span> +
      <span class="hljs-string">"them into clear, concise, professionally formatted reports in files/reports/."</span>,
    <span class="hljs-attr">tools</span>: [<span class="hljs-string">"Skill"</span>, <span class="hljs-string">"Write"</span>, <span class="hljs-string">"Glob"</span>, <span class="hljs-string">"Read"</span>], <span class="hljs-comment">// å¯ä»¥æŸ¥æ‰¾ã€è¯»å–å’Œå†™å…¥æ–‡ä»¶</span>
    <span class="hljs-attr">prompt</span>: reportWriterPrompt,     <span class="hljs-comment">// æŠ¥å‘Šæ’°å†™ç³»ç»Ÿæç¤ºè¯</span>
    <span class="hljs-attr">model</span>: <span class="hljs-string">"haiku"</span> <span class="hljs-keyword">as</span> <span class="hljs-keyword">const</span>,
  },
};
</code></pre>
<p><strong>å…³é”®ç‚¹è§£é‡Šï¼š</strong></p>
<ul>
<li><code>description</code>ï¼šå‘Šè¯‰ Lead Agent ä»€ä¹ˆæ—¶å€™åº”è¯¥è°ƒç”¨è¿™ä¸ª subagent</li>
<li><code>tools</code>ï¼šè¯¥ subagent å¯ä»¥ä½¿ç”¨çš„å·¥å…·</li>
<li><code>prompt</code>ï¼šè¯¥ subagent çš„ç³»ç»Ÿæç¤ºè¯ï¼Œå®šä¹‰å®ƒçš„è¡Œä¸º</li>
<li><code>model</code>ï¼šä½¿ç”¨çš„æ¨¡å‹</li>
</ul>
<h3 data-id="heading-5">2. Lead Agent çš„æç¤ºè¯</h3>
<p><code>prompts/lead-agent.ts</code> ä¸­å®šä¹‰äº†åè°ƒè€…çš„è¡Œä¸ºï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> leadAgentPrompt = <span class="hljs-string">`You are a lead research coordinator who orchestrates comprehensive multi-agent research projects.

**CRITICAL RULES:**
1. You MUST delegate ALL research and report writing to specialized subagents. You NEVER research or write reports yourself.
2. Keep ALL responses SHORT - maximum 2-3 sentences.
3. Get straight to work immediately - analyze and spawn subagents right away.

&lt;workflow&gt;
**STEP 1: ANALYZE USER REQUEST**
- Understand the research topic and scope
- Identify 2-4 distinct subtopics or angles to investigate

**STEP 2: SPAWN RESEARCHER SUBAGENTS (IN PARALLEL)**
- Use Task tool to spawn 2-4 researcher subagents simultaneously
- Give EACH researcher a specific, focused subtopic to investigate

**STEP 3: WAIT FOR RESEARCH COMPLETION**
- All researchers will complete their work and save findings
- Do NOT proceed until all researchers have finished

**STEP 4: SPAWN REPORT-WRITER SUBAGENT**
- Use Task tool to spawn ONE report-writer subagent
- Instruct it to read ALL research notes and create a synthesis report
&lt;/workflow&gt;

&lt;task_tool_usage&gt;
For researchers:
- subagent_type: "researcher"
- description: Brief description of the subtopic
- prompt: Detailed instructions on what to research

For report-writer:
- subagent_type: "report-writer"  
- description: "Synthesize research into final report"
- prompt: "Read all research notes from files/research_notes/ and create a report in files/reports/"
&lt;/task_tool_usage&gt;

// æ›´å¤šè¯·æŸ¥çœ‹ä»£ç ä»“åº“...
`</span>;
</code></pre>
<h3 data-id="heading-6">3. ç ”ç©¶å‘˜çš„æç¤ºè¯</h3>
<p><code>prompts/researcher.ts</code> å®šä¹‰äº†ç ”ç©¶å‘˜å¦‚ä½•å·¥ä½œï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> researcherPrompt = <span class="hljs-string">`You are a research specialist focused on information gathering.

**CRITICAL: You MUST use WebSearch for ALL research. You MUST save research summaries to files/research_notes/ folder.**

&lt;workflow&gt;
1. IMMEDIATELY use WebSearch with well-crafted queries
2. Use WebSearch multiple times (3-7 searches) with different angles
3. Extract key findings from WebSearch results
4. SAVE findings to files/research_notes/{topic_name}.md using Write tool
5. Return brief confirmation that research was saved

CRITICAL: NEVER rely on your own knowledge - ONLY use WebSearch results.
&lt;/workflow&gt;
// æ›´å¤šè¯·æŸ¥çœ‹ä»£ç ä»“åº“...
`</span>;
</code></pre>
<h3 data-id="heading-7">4. æŠ¥å‘Šç¼–å†™çš„æç¤ºè¯</h3>
<p><code>prompts/report-writer.ts</code>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> reportWriterPrompt = <span class="hljs-string">`You are a professional report writer who creates clear, concise research summaries.

**CRITICAL: You MUST read research notes from files/research_notes/ folder.**

&lt;workflow&gt;
1. Use Glob to find all research notes in files/research_notes/
2. Use Read to load each research note file
3. Synthesize all research notes into a cohesive report
4. Save to files/reports/ folder as .txt file
&lt;/workflow&gt;

&lt;requirements&gt;
- One-page length (500-800 words)
- Every claim must have a citation
- Clear, professional language
&lt;/requirements&gt;
// æ›´å¤šè¯·æŸ¥çœ‹ä»£ç ä»“åº“...
`</span>;
</code></pre>
<h3 data-id="heading-8">5. å¯åŠ¨ Agent</h3>
<p>åœ¨ <code>agent.ts</code> çš„ <code>chat()</code> å‡½æ•°ä¸­ï¼ŒæŠŠæ‰€æœ‰éƒ¨åˆ†ç»„åˆèµ·æ¥ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { query, <span class="hljs-keyword">type</span> <span class="hljs-title class_">Query</span>, <span class="hljs-keyword">type</span> <span class="hljs-title class_">SDKAssistantMessage</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@anthropic-ai/claude-agent-sdk"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">chat</span>(<span class="hljs-params"/>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt; {
  <span class="hljs-comment">// ... çœç•¥åˆå§‹åŒ–ä»£ç </span>

  <span class="hljs-comment">// ç”¨äºä¼šè¯è¿ç»­æ€§çš„ Session ID</span>
  <span class="hljs-keyword">let</span> <span class="hljs-attr">sessionId</span>: <span class="hljs-built_in">string</span> | <span class="hljs-literal">undefined</span>;

  <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
    <span class="hljs-keyword">const</span> userInput = <span class="hljs-keyword">await</span> <span class="hljs-title function_">askQuestion</span>();
    <span class="hljs-keyword">if</span> (!userInput) <span class="hljs-keyword">break</span>;

    <span class="hljs-comment">// å‘é€ç»™ agent</span>
    <span class="hljs-keyword">const</span> <span class="hljs-attr">result</span>: <span class="hljs-title class_">Query</span> = <span class="hljs-title function_">query</span>({
      <span class="hljs-attr">prompt</span>: userInput,
      <span class="hljs-attr">options</span>: {
        <span class="hljs-attr">resume</span>: sessionId,                    <span class="hljs-comment">// æ¢å¤ä¼šè¯</span>
        <span class="hljs-attr">permissionMode</span>: <span class="hljs-string">"bypassPermissions"</span>,  <span class="hljs-comment">// è·³è¿‡æƒé™ç¡®è®¤</span>
        <span class="hljs-attr">systemPrompt</span>: leadAgentPrompt,        <span class="hljs-comment">// Lead Agent çš„æç¤ºè¯</span>
        <span class="hljs-attr">allowedTools</span>: [<span class="hljs-string">"Task"</span>],               <span class="hljs-comment">// Lead Agent åªèƒ½ç”¨ Task è°ƒåº¦ subagent</span>
        agents,                               <span class="hljs-comment">// æ³¨å†Œçš„ subagent å®šä¹‰</span>
        <span class="hljs-attr">model</span>: <span class="hljs-string">"haiku"</span>,
      },
    });

    <span class="hljs-comment">// æµå¼å¤„ç†å“åº”</span>
    <span class="hljs-keyword">for</span> <span class="hljs-keyword">await</span> (<span class="hljs-keyword">const</span> msg <span class="hljs-keyword">of</span> result) {
      <span class="hljs-keyword">switch</span> (msg.<span class="hljs-property">type</span>) {
        <span class="hljs-keyword">case</span> <span class="hljs-string">"system"</span>:
          <span class="hljs-keyword">if</span> (msg.<span class="hljs-property">subtype</span> === <span class="hljs-string">"init"</span>) {
            sessionId = msg.<span class="hljs-property">session_id</span>;  <span class="hljs-comment">// ä¿å­˜ session ID</span>
          }
          <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> <span class="hljs-string">"assistant"</span>:
          <span class="hljs-title function_">processAssistantMessage</span>(msg, tracker, transcript);
          <span class="hljs-keyword">break</span>;
      }
    }
  }
}
</code></pre>
<h3 data-id="heading-9">6. å¤„ç† Assistant æ¶ˆæ¯</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">processAssistantMessage</span>(<span class="hljs-params">
  msg: SDKAssistantMessage,
  tracker: SubagentTracker,
  transcript: TranscriptWriter
</span>): <span class="hljs-built_in">void</span> {
  <span class="hljs-comment">// ä½¿ç”¨æ¶ˆæ¯ä¸­çš„ parent_tool_use_id æ›´æ–° tracker ä¸Šä¸‹æ–‡</span>
  <span class="hljs-keyword">const</span> parentId = msg.<span class="hljs-property">parent_tool_use_id</span>;
  tracker.<span class="hljs-title function_">setCurrentContext</span>(parentId ?? <span class="hljs-literal">undefined</span>);

  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> block <span class="hljs-keyword">of</span> msg.<span class="hljs-property">message</span>.<span class="hljs-property">content</span>) {
    <span class="hljs-keyword">if</span> (block.<span class="hljs-property">type</span> === <span class="hljs-string">"text"</span> &amp;&amp; block.<span class="hljs-property">text</span>) {
      <span class="hljs-comment">// è¾“å‡ºæ–‡æœ¬å†…å®¹</span>
      transcript.<span class="hljs-title function_">write</span>(block.<span class="hljs-property">text</span>, <span class="hljs-string">""</span>);
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (block.<span class="hljs-property">type</span> === <span class="hljs-string">"tool_use"</span> &amp;&amp; block.<span class="hljs-property">name</span> === <span class="hljs-string">"Task"</span>) {
      <span class="hljs-comment">// æ£€æµ‹åˆ°ç”Ÿæˆ subagent</span>
      <span class="hljs-keyword">const</span> input = block.<span class="hljs-property">input</span> || {};
      <span class="hljs-keyword">const</span> subagentType = <span class="hljs-title class_">String</span>(input.<span class="hljs-property">subagent_type</span> || <span class="hljs-string">"unknown"</span>);
      <span class="hljs-keyword">const</span> description = <span class="hljs-title class_">String</span>(input.<span class="hljs-property">description</span> || <span class="hljs-string">"no description"</span>);
      <span class="hljs-keyword">const</span> prompt = <span class="hljs-title class_">String</span>(input.<span class="hljs-property">prompt</span> || <span class="hljs-string">""</span>);

      <span class="hljs-comment">// æ³¨å†Œ subagent</span>
      <span class="hljs-keyword">const</span> subagentId = tracker.<span class="hljs-title function_">registerSubagentSpawn</span>(
        block.<span class="hljs-property">id</span> || <span class="hljs-string">""</span>,
        subagentType,
        description,
        prompt
      );

      <span class="hljs-comment">// é¢å‘ç”¨æˆ·çš„è¾“å‡º</span>
      transcript.<span class="hljs-title function_">write</span>(<span class="hljs-string">`\n\n[ğŸš€ Spawning <span class="hljs-subst">${subagentId}</span>: <span class="hljs-subst">${description}</span>]\n`</span>, <span class="hljs-string">""</span>);
    }
  }
}
</code></pre>
<h2 data-id="heading-10">è¿è¡Œæ•ˆæœ</h2>
<p>å½“ä½ è¾“å…¥"Research quantum computing developments"æ—¶ï¼Œç³»ç»Ÿä¼šï¼š</p>
<pre><code class="hljs language-ini" lang="ini">Agent: Breaking this into 4 research areas: hardware/qubits, algorithms/applications, 
industry players/investments, and challenges/timeline. Spawning researchers.

============================================================
ğŸš€ SUBAGENT SPAWNED: <span class="hljs-attr">RESEARCHER-1</span>
============================================================
Task: Quantum hardware and qubit <span class="hljs-attr">technology</span>
============================================================

<span class="hljs-section">[ğŸš€ Spawning RESEARCHER-1: Quantum hardware and qubit technology]</span>

============================================================
ğŸš€ SUBAGENT SPAWNED: <span class="hljs-attr">RESEARCHER-2</span>
============================================================
Task: Quantum algorithms and <span class="hljs-attr">applications</span>
============================================================

<span class="hljs-section">[RESEARCHER-1]</span> â†’ WebSearch
<span class="hljs-section">[RESEARCHER-2]</span> â†’ WebSearch
<span class="hljs-section">[RESEARCHER-1]</span> â†’ Write
<span class="hljs-section">[RESEARCHER-2]</span> â†’ <span class="hljs-attr">Write</span>

============================================================
ğŸš€ SUBAGENT SPAWNED: <span class="hljs-attr">REPORT-WRITER-1</span>
============================================================
Task: Synthesize research into final <span class="hljs-attr">report</span>
============================================================

<span class="hljs-section">[REPORT-WRITER-1]</span> â†’ Glob
<span class="hljs-section">[REPORT-WRITER-1]</span> â†’ Read
<span class="hljs-section">[REPORT-WRITER-1]</span> â†’ Write

Agent: Research complete. Report saved to files/reports/quantum_computing_summary.txt
</code></pre>
<h2 data-id="heading-11">å…³é”®æ¦‚å¿µæ€»ç»“</h2>





























<table><thead><tr><th>æ¦‚å¿µ</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>agents</code></td><td>å®šä¹‰å¯ç”¨çš„ subagentï¼ŒåŒ…æ‹¬ descriptionã€toolsã€promptã€model</td></tr><tr><td><code>allowedTools: ["Task"]</code></td><td>Lead Agent åªèƒ½ç”¨ Task å·¥å…·æ¥è°ƒåº¦ subagent</td></tr><tr><td><code>Task</code> å·¥å…·</td><td>SDK å†…ç½®å·¥å…·ï¼Œç”¨äºç”Ÿæˆ subagent</td></tr><tr><td><code>parent_tool_use_id</code></td><td>ç”¨äºè¿½è¸ªå“ªä¸ª subagent åœ¨æ‰§è¡Œ</td></tr><tr><td><code>resume: sessionId</code></td><td>ä¿æŒä¼šè¯è¿ç»­æ€§ï¼Œæ”¯æŒå¤šè½®å¯¹è¯</td></tr></tbody></table>
<h2 data-id="heading-12">è¿è¡Œé¡¹ç›®</h2>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># è®¾ç½® API Key</span>
<span class="hljs-built_in">export</span> ANTHROPIC_API_KEY=your_key

<span class="hljs-comment"># è¿è¡Œ</span>
npx tsx src/research-agent/agent.ts
</code></pre>
<p>è¿™å°±æ˜¯ä½¿ç”¨ Claude Agent SDK æ„å»º DeepResearch Agent çš„æ ¸å¿ƒå®ç°â€”â€”é€šè¿‡å®šä¹‰ä¸“ä¸šåŒ–çš„ subagentï¼Œè®© AI åƒä¸€ä¸ªç ”ç©¶å›¢é˜Ÿä¸€æ ·åä½œå®Œæˆå¤æ‚çš„ç ”ç©¶ä»»åŠ¡ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[GLM-4.6V å®æµ‹ï¼šå½“è§†è§‰æ¨¡å‹å­¦ä¼šâ€œåŠ¨æ‰‹â€ï¼Œå®ƒç¦»â€œé¡¶å°–â€è¿˜å·®ä»€ä¹ˆï¼Ÿ]]></title>    <link>https://juejin.cn/post/7582763878675054619</link>    <guid>https://juejin.cn/post/7582763878675054619</guid>    <pubDate>2025-12-12T10:49:34.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582763878675054619" data-draft-id="7582763878674874395" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="GLM-4.6V å®æµ‹ï¼šå½“è§†è§‰æ¨¡å‹å­¦ä¼šâ€œåŠ¨æ‰‹â€ï¼Œå®ƒç¦»â€œé¡¶å°–â€è¿˜å·®ä»€ä¹ˆï¼Ÿ"/> <meta itemprop="keywords" content="LLM,ChatGLM (æ™ºè°±)"/> <meta itemprop="datePublished" content="2025-12-12T10:49:34.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="302AI"/> <meta itemprop="url" content="https://juejin.cn/user/4158793214076603"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            GLM-4.6V å®æµ‹ï¼šå½“è§†è§‰æ¨¡å‹å­¦ä¼šâ€œåŠ¨æ‰‹â€ï¼Œå®ƒç¦»â€œé¡¶å°–â€è¿˜å·®ä»€ä¹ˆï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4158793214076603/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    302AI
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-12T10:49:34.000Z" title="Fri Dec 12 2025 10:49:34 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4beb558855fb44579149e8f6a57e39f0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgMzAyQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766141374&amp;x-signature=YcJ9b34mwsa735yEha6I%2FzSSMco%3D" alt="20251212-183330.jpg" loading="lazy"/></p>
<p>æ™ºè°± AI äº 12 æœˆ 8 æ—¥æ­£å¼å¼€æºäº†å…¶æ–°ä¸€ä»£å¤šæ¨¡æ€æ¨¡å‹ <strong>GLM-4.6V</strong> ç³»åˆ—ï¼ŒåŒ…å«é¢å‘é«˜æ€§èƒ½åœºæ™¯çš„ 106B ç‰ˆæœ¬ä¸è½»é‡æœ¬åœ°éƒ¨ç½²çš„ 9B Flash ç‰ˆã€‚æ­¤æ¬¡å‡çº§ä¸ä»…å°†è®­ç»ƒä¸Šä¸‹æ–‡çª—å£ä¸€ä¸¾æ¨è‡³ 128K tokensï¼Œæ›´åœ¨æ¨¡å‹æ¶æ„ä¸­åšäº†ä¸€ä¸ªå…³é”®å˜é©ï¼šè®©å·¥å…·è°ƒç”¨ï¼ˆFunction Callï¼‰æˆä¸ºè§†è§‰æ¨¡å‹çš„åŸç”Ÿèƒ½åŠ›ã€‚è¿™æ„å‘³ç€ï¼Œæ¨¡å‹ä¸å†æ­¢æ­¥äºè¯†åˆ«å›¾åƒï¼Œè€Œæ˜¯èƒ½è‡ªä¸»è°ƒç”¨å·¥å…·ã€å¤„ç†ç»“æœå¹¶æŒç»­æ‰§è¡Œâ€”â€”ä»çœ‹æ¸…ä¸–ç•Œåˆ°åŠ¨æ‰‹å®Œæˆçš„è·¯å¾„è¢«é¦–æ¬¡å½»åº•æ‰“é€šã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6cecf310a9b342199e020eadf50c9293~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgMzAyQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766141374&amp;x-signature=pKvIv9dMlJ9T7%2B4n2Nw9DyswhFE%3D" alt="" loading="lazy"/></p>
<p>å…¶ä¸­æœ€å€¼å¾—å…³æ³¨çš„çªç ´ï¼Œæ˜¯ â€œ<strong>å›¾åƒå³å‚æ•°ï¼Œç»“æœå³ä¸Šä¸‹æ–‡</strong>â€ è¿™ä¸€è®¾è®¡ç†å¿µã€‚ä¼ ç»Ÿå¤šæ¨¡æ€æµç¨‹ä¸­ï¼Œå›¾åƒéœ€å…ˆè½¬ä¸ºæ–‡å­—æè¿°å†è°ƒç”¨å·¥å…·ï¼Œç¯èŠ‚ç¹çä¸”ä¿¡æ¯æ˜“æŸè€—ã€‚è€Œ GLM-4.6V å…è®¸æˆªå›¾ã€å›¾è¡¨ã€æ–‡æ¡£é¡µé¢ç­‰ç›´æ¥ä½œä¸ºå·¥å…·å‚æ•°è¾“å…¥ï¼Œå¹¶å¯å°†å·¥å…·è¿”å›çš„å›¾ç‰‡ã€ç½‘é¡µç­‰é‡æ–°çº³å…¥è§†è§‰ç†è§£é“¾è·¯ï¼Œå®ç°é—­ç¯ä»»åŠ¡å¤„ç†ã€‚æ— è®ºæ˜¯æ ¹æ®è¡—æ‹å›¾è‡ªåŠ¨è°ƒç”¨æœå›¾å·¥å…·æ¯”ä»·ç”Ÿæˆå¯¼è´­æ¸…å•ï¼Œè¿˜æ˜¯è§£æé•¿æ–‡æ¡£åè·¨é¡µæŠ½å–æ•°æ®åˆ¶æˆå¯¹æ¯”è¡¨æ ¼ï¼Œæ¨¡å‹éƒ½èƒ½åœ¨å•æ¬¡æ¨ç†ä¸­è‡ªä¸»è§„åˆ’å¹¶å®Œæˆã€‚</p>
<p>åœ¨æ€§èƒ½è¡¨ç°ä¸Šï¼ŒGLM-4.6V åŒæ ·ç»™å‡ºäº†æ‰å®çš„æˆç»©ã€‚åœ¨ MMBenchã€MathVistaã€OCRBench ç­‰ <strong>30 ä½™é¡¹å¤šæ¨¡æ€è¯„æµ‹ä¸­ï¼Œå…¶æ•´ä½“ç²¾åº¦è¾¾åˆ°åŒå‚æ•°è§„æ¨¡ä¸‹çš„</strong> <strong>SOTA</strong> <strong>æ°´å¹³</strong>ã€‚å…·ä½“æ¥çœ‹ï¼Œ9B è½»é‡ç‰ˆæ•´ä½“è¡¨ç°å·²è¶…è¶Š Qwen3-VL-8Bï¼Œè€Œ 106B ç‰ˆæœ¬åˆ™å‡­å€Ÿ 12B æ¿€æ´»å‚æ•°ï¼Œåœ¨å¤šé¡¹ä»»åŠ¡ä¸­æ¯”è‚©å‚æ•°é‡ 2 å€äºè‡ªèº«çš„ Qwen3-VL-235Bï¼Œæ˜¾ç¤ºå‡ºä¼˜å¼‚çš„æ•ˆç‡ä¸èƒ½åŠ›ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/12db2b9ed57b43a2bd1fc2ef6868d46c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgMzAyQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766141374&amp;x-signature=trASKF8Lo06GJklVma%2F40ElC6Bo%3D" alt="" loading="lazy"/></p>
<p>å…·ä½“è½åœ°åˆ°åº”ç”¨å±‚é¢ï¼ŒGLM-4.6V é€‚é…å››å¤§æ ¸å¿ƒåœºæ™¯ï¼š</p>
<ol>
<li>
<p><strong>æ™ºèƒ½å›¾æ–‡åˆ›ä½œ</strong>ï¼šèƒ½ç†è§£å¤æ‚å›¾æ–‡å¹¶è‡ªåŠ¨è°ƒç”¨å·¥å…·é…å›¾ã€å®¡æ ¸è´¨é‡ï¼Œç›´æ¥è¾“å‡ºç»“æ„åŒ–å†…å®¹</p>
</li>
<li>
<p><strong>è§†è§‰è´­ç‰©å¯¼è´­</strong>ï¼šå¯å®Œæˆä»è¯†å›¾ã€æ¯”ä»·åˆ°ç”Ÿæˆå¯¼è´­æ¸…å•çš„å®Œæ•´æµç¨‹</p>
</li>
<li>
<p><strong>å‰ç«¯ä»£ç å¤åˆ»</strong>ï¼šèƒ½å¤Ÿå®ç°æ¥è¿‘åƒç´ çº§çš„ç½‘é¡µè®¾è®¡ç¨¿è¿˜åŸï¼Œå¹¶æ”¯æŒåŸºäºæˆªå›¾çš„è‡ªç„¶è¯­è¨€äº¤äº’ä¿®æ”¹</p>
</li>
<li>
<p><strong>é•¿æ–‡æ¡£ä¸è§†é¢‘ç†è§£</strong>ï¼šå¾—ç›Šäº 128K é•¿ä¸Šä¸‹æ–‡ï¼Œå¯ä¸€æ¬¡æ€§å¤„ç†ç™¾ä½™é¡µæ–‡æ¡£æˆ–å°æ—¶çº§è§†é¢‘ï¼Œå®ç°è·¨é¡µã€è·¨å¸§çš„æ·±åº¦åˆ†æä¸ä¿¡æ¯ç²¾å‡†å®šä½</p>
</li>
</ol>
<p>æ­¤ç•ªå‡çº§è¿˜ä¼´éšç€å¤§å¹…é™ä»·â€”â€”API è°ƒç”¨ä»·æ ¼è¾ƒä¸Šä¸€ä»£é™ä½ 50%ï¼Œè½»é‡ç‰ˆ GLM-4.6V-Flash æ›´å°†å…è´¹å¼€æ”¾ã€‚å¯è°“æ˜¯èƒ½åŠ›è·ƒè¿›ä¸æˆæœ¬ä¼˜åŒ–åŒé‡é©±åŠ¨ã€‚</p>
<p>302.AI ç°å·²æ¥å…¥ GML-4.6V ç³»åˆ—æ¨¡å‹ APIï¼Œæœ¬æœŸå®æµ‹å°†é’ˆå¯¹ GLM-4.6V å±•å¼€å¤šç»´åº¦çš„å®æµ‹å¯¹æ¯”ï¼Œç›´è§‚æ„Ÿå—å…¶åœ¨å¤šæ¨¡æ€ä»»åŠ¡ä¸­çš„å®é™…åº”ç”¨è¡¨ç°ã€‚</p>
<h3 data-id="heading-0">I. å®æµ‹æ¨¡å‹åŸºç¡€ä¿¡æ¯</h3>
<p><strong>ï¼ˆ1ï¼‰å„å®æµ‹æ¨¡å‹åœ¨ 302.AI çš„ä»·æ ¼ï¼š</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cf1631bc229445cd9672a2ff939f6445~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgMzAyQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766141374&amp;x-signature=e7tXhDPaPEyhHITJK44Gi4UYdPE%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-1">ï¼ˆ2ï¼‰æµ‹è¯„ç›®çš„ï¼š</h4>
<p>æœ¬è¯„æµ‹ä¾§é‡æ¨¡å‹å¯¹é€»è¾‘ï¼Œæ•°å­¦ï¼Œç¼–ç¨‹ï¼Œäººç±»ç›´è§‰ï¼Œå¤šæ¨¡æ€ç­‰é—®é¢˜çš„æµ‹è¯•ï¼Œéä¸“ä¸šå‰æ²¿é¢†åŸŸçš„æƒå¨æµ‹è¯•ã€‚æ—¨åœ¨è§‚å¯Ÿå¯¹æ¯”æ¨¡å‹çš„è¿›åŒ–è¶‹åŠ¿ï¼Œæä¾›é€‰å‹å‚è€ƒã€‚</p>
<h4 data-id="heading-2">ï¼ˆ3ï¼‰æµ‹è¯„æ–¹æ³•ï¼š</h4>
<p>æœ¬æ¬¡æµ‹è¯„ä½¿ç”¨302.AIæ”¶å½•çš„é¢˜åº“è¿›è¡Œç‹¬ç«‹æµ‹è¯•ã€‚3æ¬¾æ¨¡å‹åˆ†åˆ«å°±é€»è¾‘ä¸æ•°å­¦ï¼ˆå…±10é¢˜ï¼‰ï¼Œäººç±»ç›´è§‰ï¼ˆå…±7é¢˜ï¼‰ï¼Œç¼–ç¨‹æ¨¡æ‹Ÿï¼ˆå…±12é¢˜ï¼‰ä»¥åŠå¤šæ¨¡æ€æ¨ç†ï¼ˆå…±20é¢˜ï¼‰è¿›è¡Œæ¡ˆä¾‹æµ‹è¯•ï¼Œå¯¹åº”è®°åˆ†è§„åˆ™å–æœ€ç»ˆç»“æœï¼Œä¸‹æ–‡é€‰å–ä»£è¡¨æ€§æ¡ˆä¾‹è¿›è¡Œå±•ç¤ºã€‚</p>
<p>é¢˜åº“åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.google.com%2Fspreadsheets%2Fd%2F1sBxs60yWsxc9I5Va8Rjc1_le1Omg2hOXbwqOzpImZio%2Fedit%3Fgid%3D0%23gid%3D0" target="_blank" title="https://docs.google.com/spreadsheets/d/1sBxs60yWsxc9I5Va8Rjc1_le1Omg2hOXbwqOzpImZio/edit?gid=0#gid=0" ref="nofollow noopener noreferrer">docs.google.com/spreadsheetâ€¦</a></p>
<p>ğŸ’¡<strong>è®°åˆ†è§„åˆ™ï¼š</strong></p>
<p>æŒ‰æ»¡åˆ†10åˆ†è®°åˆ†ï¼Œè®¾å®šå¯¹åº”æ‰£åˆ†æ ‡å‡†ï¼Œæœ€ç»ˆå–æ¯è½®å¾—åˆ†çš„å¹³å‡å€¼ã€‚</p>
<h4 data-id="heading-3">ï¼ˆ4ï¼‰æµ‹è¯„å·¥å…·ï¼š</h4>
<p>302.AI çš„APIè¶…å¸‚â†’åœ¨çº¿ä½¿ç”¨</p>
<h3 data-id="heading-4"><strong>II. æµ‹è¯•ç»“æœæ€»è§ˆ</strong></h3>
<h4 data-id="heading-5"><strong>302.AI é¢˜åº“æµ‹è¯•ç»“æœï¼š</strong></h4>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/936e8524398b4459bc5f639e2d9c23e2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgMzAyQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766141374&amp;x-signature=cvKsvG3FuYi2%2FYIqy%2BMHBJZJC2c%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ffdededf9e004ef3980f68c4275510fa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgMzAyQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766141374&amp;x-signature=owSTBsGkmVV6IjYct25R0HahkKo%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-6"><strong>302.AI å¤šæ¨¡æ€æ¨¡å‹æµ‹è¯„åˆ†æ•°æ€»æ¦œå•ï¼š</strong></h4>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/78af8656b6d54429b255a182a2528685~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgMzAyQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766141374&amp;x-signature=bywaXYg9tG6lIPSJGJyix90131Q%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-7"><strong>III. æ¡ˆä¾‹å±•ç¤º</strong></h3>
<p>ä¸‹æ–‡ä¸»è¦å±•ç¤ºå¤šæ¨¡æ€ç›¸å…³æ¡ˆä¾‹</p>
<h4 data-id="heading-8">æ¡ˆä¾‹1ï¼šé€»è¾‘æ¨ç†</h4>
<p><strong>æµ‹è¯•ç‚¹ï¼šç»†ç²’åº¦æ„ŸçŸ¥ï¼Œæ¨ç†èƒ½åŠ›ï¼Œå› æœä¸äº‹ä»¶åˆ¤æ–­</strong></p>
<blockquote>
<p><strong>æç¤ºè¯</strong>ï¼šä¸‰ç»´è§†è§’å›¾å½¢æ¨æ–­ï¼šè¯·ä»ABCDä¸­é€‰å‡ºæ­£ç¡®è§†è§’</p>
<p><strong>ç­”æ¡ˆ</strong>ï¼šC</p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1395ddca2fda4821859a9730bea503c7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgMzAyQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766141374&amp;x-signature=49crpq4roCZ3v3p2534ixFWZkEU%3D" alt="" loading="lazy"/></p>
<p><strong>GLM-4.6V æ¨æ–­é”™è¯¯</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b2d7a291a8114008bc445d500727c9ab~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgMzAyQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766141374&amp;x-signature=f7AE6zBEZO%2FScx4ahUmv77lfHhc%3D" alt="" loading="lazy"/></p>
<p>é™„ <strong>GPT-5.1</strong> å’Œ <strong>Gemini 3 Pro</strong> çš„ç­”æ¡ˆï¼Œå‡æ¨æ–­æ­£ç¡®ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9313632a82134fc6a1c13cc34cdf358e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgMzAyQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766141374&amp;x-signature=Q1B2UUyA97Czvzhh5skzXD1ZjVo%3D" alt="" loading="lazy"/><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c20904049f7e4152b6a250ee7d306bd1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgMzAyQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766141374&amp;x-signature=0LEMJr3VXYDQ%2BHYAGOghVnSexSs%3D" alt="" loading="lazy"/></p>
<blockquote>
<p><strong>æç¤ºè¯</strong>ï¼šè¯·å°†å›¾ä¸­æ‰“ä¹±é¡ºåºçš„æ¼«ç”»æŒ‰ç…§é€»è¾‘æ’åˆ—å‡ºæ­£ç¡®é¡ºåº <strong>æ­£ç¡®ç­”æ¡ˆ</strong>ï¼šEâ†’Fâ†’Aâ†’Câ†’Bâ†’D</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a342fbb2813a47d48064dc5b98cf0a28~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgMzAyQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766141374&amp;x-signature=dUH%2FI1SYcXsDf51GYgizzC12%2FNI%3D" alt="" loading="lazy"/></p>
</blockquote>
<p><strong>GLM-4.6V è¯¯è¯»äº†å›¾Fæ‰€ç¤ºçš„é¸ŸæŒæªçš„æ„å›¾ï¼Œ</strong> åç¦»æ¼«ç”»åŸæœ¬é€»è¾‘å¯¼è‡´æ’åºç­”æ¡ˆé”™è¯¯ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/11a8fbfdea5e4c579f2c2b9765b9801f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgMzAyQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766141374&amp;x-signature=ABP3cVsOjadhqjTQZgVu8P7qQFQ%3D" alt="" loading="lazy"/></p>
<p>é™„ <strong>GPT-5.1</strong> çš„å›ç­”ï¼Œä»…æœ‰Bå’ŒCè¿™ä¸¤ä¸ªå®¹æ˜“æ··æ·†çš„å›¾é¡ºåºé”™è¯¯ï¼Œå…¶ä»–é¡ºåºæ’åˆ—æ­£ç¡®ï¼Œæ¼«ç”»å†…æ¶µè§£è¯»ä¸Šå·²ç»éå¸¸æ¥è¿‘åŸæ„äº†ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d9449372b30040a4893094f813fd85a8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgMzAyQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766141374&amp;x-signature=ScRaIg69rnonfYb%2FB7mc%2FX9Ztpw%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-9">æ¡ˆä¾‹2ï¼šè®¤çŸ¥ä¸æ–‡åŒ–ç†è§£</h4>
<p><strong>æµ‹è¯•ç‚¹ï¼šåŸºç¡€æ„ŸçŸ¥ï¼Œé€»è¾‘å…³è”ï¼Œä¸–ç•ŒçŸ¥è¯†ï¼Œæ–‡åŒ–ç†è§£</strong></p>
<blockquote>
<p><strong>æç¤ºè¯</strong>ï¼š</p>
<p>å›¾ä¸­ä½œå“å±äºä»¥ä¸‹å“ªä¸€ç§é£æ ¼ï¼Ÿ</p>
<p>Aï¼šå°è±¡æ´¾ï¼ŒBï¼šåå°è±¡æ´¾ï¼ŒCï¼šç°ä»£ä¸»ä¹‰ï¼ŒDï¼šè¾¾è¾¾ä¸»ä¹‰</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7bba3c7c4e1342ffa0e29e8a839f28ab~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgMzAyQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766141374&amp;x-signature=O65qeFLb5cxnl4yC6ljR%2FjG1ONU%3D" alt="" loading="lazy"/></p>
</blockquote>
<p><strong>GLM-4.6V åˆ¤æ–­æ­£ç¡®</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/56b31ab0c5914f15932094bf4004a131~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgMzAyQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766141374&amp;x-signature=DKT3HKkUy0DjZ86gToHeEbwFmaQ%3D" alt="" loading="lazy"/></p>
<blockquote>
<p><strong>æç¤ºè¯</strong>ï¼šè¯·åˆ¤æ–­å›¾ä¸Šè¡¨æƒ…åŒ…æƒ³è¡¨è¾¾ä»€ä¹ˆï¼Ÿ</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/34a86fb2f55d41358567a6a0fc0b3150~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgMzAyQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766141374&amp;x-signature=SqXp%2Br%2BMePQ9bYQeR7RFQgwawSc%3D" alt="" loading="lazy"/></p>
</blockquote>
<p><strong>GLM-4.6V ä¼¼ä¹å¹¶æœªèƒ½ç†è§£</strong>è¿™ä¸ªæ¢—å›¾çš„èƒŒåå«ä¹‰ï¼Œåªè¾“å‡ºäº†ä¸€äº›è¡¨å±‚ç†è§£ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6bd4ef30822a438c84f1809ad7d49252~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgMzAyQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766141374&amp;x-signature=lOc%2BY1ruu0xHTLhrZFwyrn6rAm0%3D" alt="" loading="lazy"/></p>
<p>é™„ <strong>Gemini 3</strong> <strong>Pro</strong> çš„æ»¡åˆ†å›ç­”ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/777334a0e83d4ffaaefe75085f8a8a3d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgMzAyQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766141374&amp;x-signature=vEnWVHYlIhrfly2%2BMjLaNztNO4Q%3D" alt="" loading="lazy"/></p>
<blockquote>
<p><strong>æç¤ºè¯</strong>ï¼šè¿™åˆ™æ¼«ç”»æƒ³è¡¨è¾¾ä»€ä¹ˆï¼Ÿ</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d97d7ccb6085495793304a5eca18f145~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgMzAyQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766141374&amp;x-signature=ocs%2Fq1XQmFzGDlNxKbRl4yMn9GM%3D" alt="" loading="lazy"/></p>
</blockquote>
<p><strong>GLM-4.6V åˆ¤æ–­åŸºæœ¬æ­£ç¡®ï¼Œæ¨æ–­åˆç†</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7caa928ed615444fb61cba09414ef4e0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgMzAyQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766141374&amp;x-signature=E8caKnBqKnLnj%2FZzDBx%2FqKOKUEk%3D" alt="" loading="lazy"/></p>
<p>å†æ¥çœ‹çœ‹ä¾ç„¶ç¨³å®šå‘æŒ¥çš„ <strong>Gemini 3 Pro</strong> çš„å›ç­”ï¼Œä»å¹½é»˜æ„Ÿå’Œâ€œä¸ªæ€§â€æ¥è®²ï¼Œä¸ Gemini 3 Pro çš„å¯¹æ¯”æ˜¾å¾— GLM-4.6V çš„è¾“å‡ºè¾ƒä¸ºç†æ€§åŠ¡å®</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/713de30fd41a45caa94d7d8282da86aa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgMzAyQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766141374&amp;x-signature=WnmThB3aMGYEGwpOnIJomQgyx%2Bk%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-10">æ¡ˆä¾‹3ï¼šOCRè¯†åˆ«</h4>
<p><strong>æµ‹è¯•ç‚¹ï¼šæ¨¡ç³Šä¿¡æ¯è¯†åˆ«ã€æ•°æ®æå–ã€å›¾è¡¨åˆ†æ</strong></p>
<p>ç»™å‡ºä¸€å¼ æ¨¡ç³Šä¸”æœ‰å­—è¿¹é®ç›–çš„ä¿¡æ¯å›¾ç‰‡</p>
<blockquote>
<p><strong>æç¤ºè¯</strong>ï¼šå°†å›¾ä¸­è¡¨æ ¼è¯†åˆ«ä¸ºå¯ç›´æ¥å¤åˆ¶çš„Markdownå†…å®¹</p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/778a3d1ac5dc4496add535481e40a320~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgMzAyQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766141374&amp;x-signature=WmcGkJXBHt5GGoUoKo8EUF%2BTeWQ%3D" alt="" loading="lazy"/></p>
<p><strong>GLM-4.6V è¿”å›çš„å†…å®¹å¦‚ä¸‹ï¼Œæ¸…æ™°ç›´è§‚ï¼ŒåŸºæœ¬æ— è¯¯</strong>ï¼Œä¿¡æ¯ç¼ºå¤±éƒ¨åˆ†ä¹Ÿæ ‡æ³¨äº†â€œæœªå¡«å†™â€</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/88c85e036f9a46ee8bd9151fa95a994a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgMzAyQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766141374&amp;x-signature=kiHhcG4rWuFr5idrWGpOjmxC2zE%3D" alt="" loading="lazy"/></p>
<p>è¿›é˜¶ä¸€ä¸‹ï¼Œå°è¯•è®©æ¨¡å‹å°†è¿™ä¸ªå›¾è¡¨ä¿¡æ¯å¤„ç†ä¸ºå¯è§†åŒ–æ•°æ®å›¾ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f9a10ec9410948678ae6734f6353c024~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgMzAyQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766141374&amp;x-signature=J9D2SyAeI5%2BmlJoYQrPO8tmUdUQ%3D" alt="" loading="lazy"/></p>
<p>GLM-4.6V å‡†ç¡®æå–ä¿¡æ¯åç”Ÿæˆäº†å¯¹åº”çš„åŸºç¡€æ•°æ®è¡¨æ ¼ã€ç¥¨æˆ¿å æ¯”é¥¼çŠ¶å›¾ã€å‘¨åº¦ç¥¨æˆ¿æŸ±çŠ¶å›¾ä»¥åŠæ•°æ®å¡ç‰‡ï¼Œ<strong>ä½†æ˜¯ç”Ÿæˆçš„é¥¼çŠ¶å›¾å­˜åœ¨æ˜æ˜¾æ•°æ®é”™è¯¯ã€‚</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d8d156f840a84bc898cec4d1164cd6f3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgMzAyQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766141374&amp;x-signature=VII9b5VDb6UtJw47Dt2VfM6sadc%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-11">æ¡ˆä¾‹4ï¼šå‰ç«¯å¤åˆ»</h4>
<p><strong>æµ‹è¯•ç‚¹ï¼šè§†è§‰ç†è§£åŠ +å·¥å…·è°ƒç”¨</strong></p>
<blockquote>
<p><strong>æç¤ºè¯</strong>ï¼šå¤åˆ»å›¾ä¸­ç½‘é¡µ</p>
</blockquote>
<p>å¯¹äºè¿™ä¸ª Suno ç½‘é¡µçš„å¤åˆ»æ¡ˆä¾‹ï¼ŒGLM-4.6V çš„å®Œæˆåº¦ç®—ä¸­è§„ä¸­çŸ©ï¼ŒæŠ›å¼€å¤æ‚çš„äº¤äº’é€»è¾‘ï¼Œ<strong>å•ä»å¸ƒå±€å’ŒåŸºæœ¬å†…å®¹çš„è§†è§‰è¿˜åŸæ¥è®²ï¼Œå¹¶æœªå®ç°æ‰€è°“â€œ</strong> <strong>åƒç´ </strong> <strong>çº§å‰ç«¯å¤åˆ»â€</strong> ï¼ˆä¾‹å¦‚ç¬¬äºŒé¡µä½œè€…åâ€œMojanoâ€å†™é”™ä¸ºâ€œMojavaâ€ï¼‰ï¼Œæ ·å¼ç»†èŠ‚ä¹Ÿå­˜åœ¨åå·®ï¼ˆç¬¬äºŒé¡µæ­Œæ›²å¡ç‰‡çš„æ’­æ”¾é‡ä½ç½®å˜ä¸ºäº†å³ä¸‹è§’ï¼‰ç­‰é—®é¢˜</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3aed82b6ba8f415d8d6b9850708d116f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgMzAyQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766141374&amp;x-signature=W6V8%2B2RDNiP%2BbkAB7PDGNYsoD4k%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-12">æ¡ˆä¾‹5ï¼šè§†é¢‘ç†è§£</h4>
<p><strong>æµ‹è¯•ç‚¹ï¼šè§†é¢‘ç†è§£ï¼Œç»†ç²’åº¦æ¨ç†</strong></p>
<p>ç»™å‡ºä¸€æ®µ AI ç”Ÿæˆå­˜åœ¨æ˜æ˜¾bugçš„è§†é¢‘ï¼Œè®©æ¨¡å‹åˆ†æè¿™æ®µè§†é¢‘æ‰€å‡ºç°çš„ä¸åˆç†ä¹‹å¤„</p>
<p><strong>GLM-4.6V çš„å›ç­”å¹¶æœªæŠ“ä½é‡ç‚¹</strong>ï¼Œçœ‹ä¼¼è¨€ä¹‹æœ‰ç†ï¼Œä½†è§†é¢‘æ‰€æè¿°ç”»é¢å¹¶éå‘ç”Ÿåœ¨ç½šçƒæƒ…å†µä¸‹ï¼Œæ•…æ¨ç†æœ‰è¯¯ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f07e6f8481f4475a8b539ebfb029eb0f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgMzAyQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766141374&amp;x-signature=sw7prT2jn4Yw2QZuffDALsUgndg%3D" alt="" loading="lazy"/></p>
<p>é™„ <strong>Gemini 3</strong> <strong>Pro</strong> ****çš„å›ç­”ï¼Œèµ·ç æ˜ç¡®æŒ‡å‡ºäº†ç©¿æ¨¡æ¼æ´å’Œäººç‰©è¿åŠ¨è½¨è¿¹è¿åç‰©ç†å¸¸è¯†çš„é—®é¢˜ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8e9ea8cb6a2e464e9db542d709b1d98c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgMzAyQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766141374&amp;x-signature=dUTtY5uXo68xq3xnQC6ZJ%2BktC8Q%3D" alt="" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-13"><strong>IV. GLM-4.6V æ¨¡å‹å®æµ‹ç»“è®º</strong></h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0f6ee9f36b474455abfec10aab6a531b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgMzAyQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766141374&amp;x-signature=zWpOQ2m3n7b6yjxExxCQape12Q8%3D" alt="" loading="lazy"/></p>
<p>åŸºäºæœ¬æ¬¡å®æµ‹ï¼Œæˆ‘ä»¬å¯¹ GLM-4.6V å¯ä»¥å¾—å‡ºä»¥ä¸‹å‡ ä¸ªæ ¸å¿ƒç»“è®ºï¼š</p>
<p>é¦–å…ˆï¼Œå¿…é¡»æ‰¿è®¤ï¼ŒGLM-4.6V ç±»ä¼¼äºä¸€ä½ç‰¹ç‚¹é²œæ˜çš„â€œåç§‘ç”Ÿâ€ï¼Œä»å…¶åœ¨ä¸åŒç»´åº¦çš„æµ‹è¯„è¡¨ç°æ¥çœ‹ï¼Œæ¨¡å‹å‘æŒ¥å­˜åœ¨æ˜¾è‘—çš„åœºæ™¯åˆ†åŒ–ï¼Œå·¥ç¨‹å®ç”¨æ€§å¼ºï¼Œè€Œè®¤çŸ¥çµæ´»æ€§ç¨æ˜¾ä¸è¶³ï¼Œè¿™è¡¨æ˜æ¨¡å‹çš„æ ¸å¿ƒèƒ½åŠ›èšç„¦äºæ‰§è¡Œè€Œéæ„ŸçŸ¥ã€‚æ¢å¥è¯è¯´ï¼Œ<strong>å…¶çªç ´ç‚¹åœ¨äºæ¶æ„è®¾è®¡æ‰€æŒ‡å‘çš„å·¥å…·è°ƒç”¨ä¸ä»»åŠ¡é—­ç¯èƒ½åŠ›</strong> <strong>ï¼Œ</strong> <strong>è€Œéæ³›åŒ–çš„å¤šæ¨¡æ€ç†è§£ç²¾åº¦</strong>ã€‚</p>
<p>å…¶æ¬¡ï¼Œè¿™ç§â€œåç§‘â€ä½“ç°åœ¨å…·ä½“è¡¨ç°ä¸Šï¼šåœ¨OCRè¡¨æ ¼è¯†åˆ«ã€è‰ºæœ¯é£æ ¼åˆ¤æ–­ç­‰ç»“æ„åŒ–ã€æœ‰æ˜ç¡®è§„åˆ™çš„ä»»åŠ¡ä¸­ï¼Œå®ƒè¾“å‡ºç¨³å®šã€ç†æ€§è§„èŒƒï¼Œå±•ç°å‡ºæ‰å®çš„å·¥ç¨‹åŒ–æ½œåŠ›ã€‚ç„¶è€Œï¼Œä¸€æ—¦é¢ä¸´éœ€è¦å¼ºæ¨ç†ï¼ˆå¦‚ä¸‰ç»´ç©ºé—´æƒ³è±¡ã€æ¼«ç”»é€»è¾‘æ’åºï¼‰æˆ–æ·±å±‚æ¬¡æ–‡åŒ–ç†è§£ï¼ˆå¦‚è§£è¯»ç½‘ç»œæ¢—å›¾ï¼‰çš„åœºæ™¯æ—¶ï¼Œå®ƒä¾¿å®¹æ˜“æ˜¾å¾—ç…§æœ¬å®£ç§‘ï¼Œç¼ºä¹ä¸€ä¸çµæ€§å’Œç²¾å‡†åº¦ã€‚</p>
<p>è¿™ä¸€åˆ†åŒ–æ°æ°æ­ç¤ºäº†å®ƒçš„é€‚ç”¨åœºæ™¯â€”â€”å³<strong>åœ¨å¤„ç†å®šä¹‰æ¸…æ™°çš„ä»»åŠ¡æ—¶æ›´å…·ä¼˜åŠ¿</strong>ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¯¹äºé‚£äº›éœ€è¦ä»å¤æ‚æ–‡æ¡£ä¸­æå–ä¿¡æ¯ã€å°†å›¾è¡¨è½¬åŒ–ä¸ºæ•°æ®ã€æˆ–è¿›è¡Œæ ‡å‡†åŒ–è¯†åˆ«çš„å®é™…ä»»åŠ¡ï¼ŒGLM-4.6V ä¼šæ˜¯ä¸€ä¸ªé«˜æ•ˆã€å¯ä¿¡çš„å·¥å…·ã€‚ç»“åˆ API ä»·æ ¼çš„å¤§å¹…ä¸‹è°ƒä¸è½»é‡ç‰ˆçš„å…è´¹å¼€æºç­–ç•¥ï¼Œä¹Ÿç®—æ˜¯ä¸ºå¼€å‘è€…æä¾›äº†ä¸€ä¸ªé«˜æ€§ä»·æ¯”çš„è§†è§‰ä»»åŠ¡è‡ªåŠ¨åŒ–å…¥å£ã€‚</p>
<p>ç»¼åˆè€Œè¨€ï¼ŒGLM-4.6V ä»£è¡¨äº†ä¸€æ¡åŠ¡å®çš„æŠ€æœ¯è·¯å¾„ï¼š å®ƒä¸æ‰§ç€äºåœ¨æ‰€æœ‰æ„ŸçŸ¥èµ›é“ä¸Šäº‰å† ï¼Œè€Œæ˜¯èšç„¦äºå°†è§†è§‰ä¿¡å·åˆ‡å®è½¬åŒ–ä¸ºå¯æ‰§è¡Œçš„åŠ¨ä½œã€‚ä½†åŒæ—¶ï¼Œå…¶åœ¨çœŸå®ä»»åŠ¡ä¸­ä¸é¡¶å°–é—­æºæ¨¡å‹çš„å¯¹æ¯”è¡¨ç°ä¹Ÿæ¸…æ™°åœ°æé†’æˆ‘ä»¬ï¼š åœ¨å¥‹åŠ›å¥”å‘æ‰§è¡Œé«˜åœ°æ—¶ï¼Œä½œä¸ºåŸºçŸ³çš„æ„ŸçŸ¥ä¸è®¤çŸ¥åŸºæœ¬åŠŸï¼Œä»éœ€æŒç»­é”¤ç‚¼ï¼Œé‚£æ®µå¯æå‡ç©ºé—´ä¾ç„¶æ˜¯å…¶è¿ˆå‘é¡¶å°–è¿‡ç¨‹ä¸­ä¸å¯å¿½è§†çš„è¿½ç´¢ä¹‹è·¯ã€‚</p>
<hr/>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/26e0c9b096e44506936c033ce0386450~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgMzAyQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766141374&amp;x-signature=LaT7zg0fC%2B7x6%2BiBP5iEulLeOpk%3D" alt="" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[NL2SQLè§£å†³äº†ï¼Ÿåˆ«é—¹äº†ï¼å¤§æ¨¡å‹è®©ä½ å’Œæ•°æ®åº“èŠå¤©èƒŒåçš„çœŸç›¸]]></title>    <link>https://juejin.cn/post/7582786292087799859</link>    <guid>https://juejin.cn/post/7582786292087799859</guid>    <pubDate>2025-12-12T11:02:26.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582786292087799859" data-draft-id="7582786292087783475" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="NL2SQLè§£å†³äº†ï¼Ÿåˆ«é—¹äº†ï¼å¤§æ¨¡å‹è®©ä½ å’Œæ•°æ®åº“èŠå¤©èƒŒåçš„çœŸç›¸"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-12T11:02:26.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="martinzh"/> <meta itemprop="url" content="https://juejin.cn/user/2524134426030232"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            NL2SQLè§£å†³äº†ï¼Ÿåˆ«é—¹äº†ï¼å¤§æ¨¡å‹è®©ä½ å’Œæ•°æ®åº“èŠå¤©èƒŒåçš„çœŸç›¸
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2524134426030232/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    martinzh
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-12T11:02:26.000Z" title="Fri Dec 12 2025 11:02:26 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼€åœºç™½ï¼šå½“è€æ¿è¯´"éšä¾¿æŸ¥ä¸ªæ•°æ®"</h2>
<p>ä½ æœ‰æ²¡æœ‰é‡åˆ°è¿‡è¿™æ ·çš„åœºæ™¯ï¼šè€æ¿çªç„¶èµ°è¿‡æ¥è¯´ï¼Œ"å°æå•Šï¼Œå¸®æˆ‘æŸ¥ä¸€ä¸‹ä¸Šä¸ªæœˆå’±ä»¬å…¬å¸å“ªä¸ªéƒ¨é—¨ä¸šç»©æœ€å¥½ã€‚"å¬èµ·æ¥å¾ˆç®€å•å¯¹å§ï¼Ÿä½†ä½ å¿ƒé‡Œæƒ³çš„æ˜¯ï¼š"ä¸Šä¸ªæœˆæ˜¯æŒ‡è‡ªç„¶æœˆè¿˜æ˜¯è´¢åŠ¡æœˆï¼Ÿä¸šç»©æ˜¯æŒ‡é”€å”®é¢è¿˜æ˜¯åˆ©æ¶¦ï¼Ÿéƒ¨é—¨æ˜¯æŒ‰ç»„ç»‡æ¶æ„è¿˜æ˜¯æŒ‰æˆæœ¬ä¸­å¿ƒåˆ†ï¼Ÿ"</p>
<p>è¿™å°±æ˜¯è‡ªç„¶è¯­è¨€è½¬SQLï¼ˆNL2SQLï¼‰æŠ€æœ¯è¦è§£å†³çš„æ ¸å¿ƒé—®é¢˜â€”â€”è®©äººå’Œæ•°æ®åº“ä¹‹é—´çš„å¯¹è¯å˜å¾—åƒæ—¥å¸¸èŠå¤©ä¸€æ ·ç®€å•ã€‚</p>
<p>éšç€ChatGPTç­‰å¤§è¯­è¨€æ¨¡å‹çš„å…´èµ·ï¼Œå¾ˆå¤šäººéƒ½è§‰å¾—è¿™ä¸ªé—®é¢˜å·²ç»è¢«å®Œç¾è§£å†³äº†ã€‚ç½‘ä¸Šåˆ°å¤„éƒ½æ˜¯"ä¸€è¡Œä»£ç æå®šæ•°æ®æŸ¥è¯¢"çš„æ•™ç¨‹ï¼Œä»¿ä½›æˆ‘ä»¬å·²ç»è¿›å…¥äº†äººäººéƒ½æ˜¯æ•°æ®åˆ†æå¸ˆçš„ç¾å¥½æ—¶ä»£ã€‚</p>
<p>ä½†çœŸçš„æ˜¯è¿™æ ·å—ï¼Ÿä»Šå¤©æˆ‘ä»¬å°±æ¥æ­ç§˜ä¸€ä¸‹ï¼Œä¸ºä»€ä¹ˆä¼ä¸šçº§çš„NL2SQLæŠ€æœ¯è¿œæ¯”ä½ æƒ³è±¡çš„å¤æ‚ã€‚</p>
<h2 data-id="heading-1">ç¬¬ä¸€å¤§æŒ‘æˆ˜ï¼šæ•°æ®åº“ç»“æ„å¤æ‚åˆ°è®©äººæ€€ç–‘äººç”Ÿ</h2>
<h3 data-id="heading-2">ä½ ä»¥ä¸ºçš„æ•°æ®åº“ vs å®é™…çš„æ•°æ®åº“</h3>
<p>ä½ ä»¥ä¸ºä¼ä¸šæ•°æ®åº“å°±åƒæ•™ç§‘ä¹¦é‡Œé‚£æ ·ï¼Œå‡ å¼ ç®€å•çš„è¡¨ï¼Œåˆ—åéƒ½å«<code>student_name</code>ã€<code>course_id</code>è¿™æ ·ä¸€ç›®äº†ç„¶çš„åå­—ï¼Ÿ</p>
<p>å®é™…ä¸Šï¼Œä¼ä¸šæ•°æ®åº“æ˜¯è¿™æ ·çš„ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5ceb0ce59d504999875ab3d444895d5e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbWFydGluemg=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766142271&amp;x-signature=%2BKfRBRAmqD3FZwYwRvLM%2BIKs3kY%3D" alt="å›¾1ï¼šä¼ä¸šæ•°æ®åº“çš„ç°å®æƒ…å†µ - å°±åƒèµ°è¿›äº†ä¸€ä¸ªæ ‡è¯†éƒ½æ˜¯å¤–æ˜Ÿæ–‡å­—çš„è¿·å®«" loading="lazy"/></p>
<p>å›¾1ï¼šä¼ä¸šæ•°æ®åº“çš„ç°å®æƒ…å†µ - å°±åƒèµ°è¿›äº†ä¸€ä¸ªæ ‡è¯†éƒ½æ˜¯å¤–æ˜Ÿæ–‡å­—çš„è¿·å®«</p>
<p>å¾®è½¯çš„ä¸€ä¸ªå†…éƒ¨è´¢åŠ¡æ•°æ®ä»“åº“æœ‰632å¼ è¡¨ï¼ŒåŒ…å«è¶…è¿‡4000ä¸ªåˆ—ï¼Œè¿˜æœ‰200ä¸ªè§†å›¾åŒ…å«7400å¤šä¸ªåˆ—ã€‚è¿™è¿˜ä¸æ˜¯æœ€è¦å‘½çš„ï¼Œæœ€è¦å‘½çš„æ˜¯è¿™äº›å­—æ®µåéƒ½æ˜¯ç¼©å†™ï¼Œæ¯”å¦‚<code>SLAMT_TTL_EXCL_TX</code>ï¼ˆé”€å”®æ€»é¢ä¸å«ç¨ï¼‰ï¼Œåªæœ‰å†™è¿™ä¸ªå­—æ®µçš„é‚£ä¸ªå·²ç»ç¦»èŒçš„è€ç‹çŸ¥é“æ˜¯ä»€ä¹ˆæ„æ€...</p>
<h3 data-id="heading-3">ä¸ºä»€ä¹ˆ"å…¨ç›˜æ‰˜å‡º"åè€Œæ•ˆæœæ›´å·®ï¼Ÿ</h3>
<p>è¿™é‡Œæœ‰ä¸ªåç›´è§‰çš„å‘ç°ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a5c1f01cda4c4fd29ce7dfdae1aa28d2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbWFydGluemg=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766142271&amp;x-signature=ITQBvwTb4fJw1ilUQWkkmkOZLZg%3D" alt="å›¾2ï¼šæ›´å¤šä¿¡æ¯ä¸ç­‰äºæ›´å¥½çš„ç»“æœ - å°±åƒä½ é—®è·¯æ—¶ï¼Œå¯¹æ–¹æŠŠæ•´ä¸ªåŸå¸‚åœ°å›¾éƒ½èƒŒç»™ä½ å¬" loading="lazy"/></p>
<p>å›¾2ï¼šæ›´å¤šä¿¡æ¯ä¸ç­‰äºæ›´å¥½çš„ç»“æœ - å°±åƒä½ é—®è·¯æ—¶ï¼Œå¯¹æ–¹æŠŠæ•´ä¸ªåŸå¸‚åœ°å›¾éƒ½èƒŒç»™ä½ å¬</p>
<p>ä½ å¯èƒ½ä¼šæƒ³ï¼š"æ—¢ç„¶æ•°æ®åº“è¿™ä¹ˆå¤æ‚ï¼Œé‚£æˆ‘æŠŠæ‰€æœ‰è¡¨ç»“æ„éƒ½å‘Šè¯‰ChatGPTä¸å°±è¡Œäº†ï¼Ÿ"</p>
<p>é”™äº†ï¼å°±åƒä½ é—®è·¯çš„æ—¶å€™ï¼Œå¦‚æœå¯¹æ–¹æŠŠæ•´ä¸ªåŸå¸‚çš„è¡—é“åéƒ½æŠ¥ç»™ä½ ï¼Œä½ åè€Œä¼šæ›´å›°æƒ‘ã€‚å®éªŒè¡¨æ˜ï¼Œå½“æŠŠå®Œæ•´çš„æ•°æ®åº“ç»“æ„å–‚ç»™GPT-3.5æ—¶ï¼Œå‡†ç¡®ç‡åªæœ‰22.7%ã€‚ä½†å¦‚æœåªé€‰æ‹©ç›¸å…³çš„è¡¨å’Œå­—æ®µï¼Œå‡†ç¡®ç‡èƒ½æå‡7ä¸ªç™¾åˆ†ç‚¹ï¼</p>
<p>è¿™å°±åƒç‚¹èœæ—¶ï¼Œèœå•å¤ªåšåè€Œä¸çŸ¥é“ç‚¹ä»€ä¹ˆå¥½ï¼Œä½†å¦‚æœæœåŠ¡å‘˜æ¨èå‡ é“æ‹›ç‰Œèœï¼Œä½ åè€Œèƒ½å¿«é€Ÿåšå†³å®šã€‚</p>
<h2 data-id="heading-4">ç¬¬äºŒå¤§æŒ‘æˆ˜ï¼šè‡ªç„¶è¯­è¨€çš„"ä¸€åƒä¸ªå“ˆå§†é›·ç‰¹"é—®é¢˜</h2>
<h3 data-id="heading-5">å½“"é”€å”®è¯¦æƒ…"æœ‰æ— æ•°ç§ç†è§£æ–¹å¼</h3>
<p>è¿˜è®°å¾—é‚£å¥è¯å—ï¼š"ä¸€åƒä¸ªäººçœ¼ä¸­æœ‰ä¸€åƒä¸ªå“ˆå§†é›·ç‰¹ã€‚"åœ¨NL2SQLçš„ä¸–ç•Œé‡Œï¼Œä¸€å¥"æ˜¾ç¤ºé”€å”®è¯¦æƒ…"å¯èƒ½æœ‰ä¸€åƒç§ä¸åŒçš„SQLæŸ¥è¯¢æ–¹å¼ã€‚</p>
<p>è®©æˆ‘ä»¬çœ‹çœ‹ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼š</p>
<p><strong>ç”¨æˆ·é—®ï¼š</strong> "æœ€å±é™©çš„åœ°åŒºåœ¨å“ªé‡Œï¼Ÿ"</p>
<p><strong>æ•°æ®åº“æœ‰ä¸¤ä¸ªåœ°ç†ä½ç½®å­—æ®µï¼š</strong></p>
<ul>
<li><code>Location</code>ï¼ˆåœ°ç‚¹ï¼‰</li>
<li><code>LSOA</code>ï¼ˆä½å±‚è¶…çº§è¾“å‡ºåŒºåŸŸï¼‰</li>
</ul>
<p>è¿™å°±åƒä½ é—®æœ‹å‹"åŒ—äº¬æœ€å¥½ç©çš„åœ°æ–¹åœ¨å“ªé‡Œ"ï¼Œä»–å¯èƒ½å‘Šè¯‰ä½ "æœé˜³åŒº"ï¼Œä¹Ÿå¯èƒ½å‘Šè¯‰ä½ "ä¸‰é‡Œå±¯"ã€‚ä¸¤ä¸ªç­”æ¡ˆéƒ½å¯¹ï¼Œä½†ç²’åº¦ä¸åŒã€‚</p>
<h3 data-id="heading-6">ä¸‰ç§ä¸»è¦çš„æ­§ä¹‰ç±»å‹</h3>
<p>é€šè¿‡å¯¹272ä¸ªæŸ¥è¯¢çš„æ·±å…¥åˆ†æï¼Œæˆ‘ä»¬å‘ç°äº†ä¸‰ç§ä¸»è¦çš„æ­§ä¹‰ç±»å‹ï¼š</p>
<ol>
<li>
<p><strong>æ•°æ®åº“ç»“æ„æ˜ å°„æ­§ä¹‰</strong>ï¼ˆ36.6%ï¼‰</p>
<ul>
<li>å°±åƒä¸Šé¢çš„åœ°ç†ä½ç½®ä¾‹å­ï¼ŒçŸ¥é“è¦æŸ¥ä»€ä¹ˆï¼Œä½†ä¸çŸ¥é“æŸ¥å“ªä¸ªå­—æ®µ</li>
</ul>
</li>
<li>
<p><strong>æ•°æ®å€¼æ˜ å°„æ­§ä¹‰</strong>ï¼ˆ19.6%ï¼‰</p>
<ul>
<li>æ¯”å¦‚é—®"æ—¥æœ¬æœ‰å¤šå°‘æ ¸ç”µç«™åœ¨å‡†å¤‡ä½¿ç”¨ï¼Ÿ"</li>
<li>ä½ è§‰å¾—åº”è¯¥æŸ¥è¯¢<code>status LIKE '%å‡†å¤‡%'</code></li>
<li>ä½†å®é™…æ•°æ®åº“é‡Œç”¨çš„æ˜¯<code>status = 'å»ºè®¾ä¸­'</code></li>
</ul>
</li>
<li>
<p><strong>è‡ªç„¶è¯­è¨€æœ¬èº«æ¨¡ç³Š</strong>ï¼ˆ34.8%ï¼‰</p>
<ul>
<li>"å“ªç§å†œè¯æœ€å®¹æ˜“æ£€æµ‹ï¼Ÿ"</li>
<li>å®¹æ˜“ç¨‹åº¦å¯èƒ½åŸºäºï¼šæµ“åº¦ã€æ ·å“æ•°é‡ã€æ£€æµ‹æ—¶é—´...</li>
</ul>
</li>
</ol>
<h3 data-id="heading-7">è¿äººç±»ä¸“å®¶éƒ½ä¼š"æ‰“æ¶"</h3>
<p>æ›´æœ‰è¶£çš„æ˜¯ï¼Œæˆ‘ä»¬è®©ä¸¤ä¸ªäººç±»ä¸“å®¶æ¥åˆ¤æ–­åŒä¸€ä¸ªæŸ¥è¯¢æ˜¯å¦æœ‰æ­§ä¹‰ï¼Œä»–ä»¬çš„ä¸€è‡´æ€§åªæœ‰62%ï¼è¿™è¯´æ˜ä»€ä¹ˆï¼Ÿè¿äººéƒ½æä¸æ¸…æ¥šçš„é—®é¢˜ï¼Œå‡­ä»€ä¹ˆæŒ‡æœ›AIèƒ½ææ¸…æ¥šï¼Ÿ</p>
<p>å°±åƒä¸¤ä¸ªäººçœ‹åŒä¸€æœµäº‘ï¼Œä¸€ä¸ªè¯´åƒå°ç‹—ï¼Œä¸€ä¸ªè¯´åƒå°çŒ«ï¼Œéƒ½æœ‰é“ç†ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fe4238e9d3c54fd4979339b00e8f42d6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbWFydGluemg=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766142271&amp;x-signature=dpnoya%2FZY%2Fql2tDAA9U9W2xg6Lk%3D" alt="å›¾3ï¼šæ­§ä¹‰è¯†åˆ«çš„&quot;æˆ˜å›½æ—¶ä»£&quot; - è¿ä¸“å®¶éƒ½åœ¨äº‰è®ºï¼ŒAIèƒ½åšåˆ°65%å·²ç»ä¸é”™äº†" loading="lazy"/></p>
<p>å›¾3ï¼šæ­§ä¹‰è¯†åˆ«çš„"æˆ˜å›½æ—¶ä»£" - è¿ä¸“å®¶éƒ½åœ¨äº‰è®ºï¼ŒAIèƒ½åšåˆ°65%å·²ç»ä¸é”™äº†</p>
<p>ä½†æœ‰ä¸ªå¥½æ¶ˆæ¯ï¼šGPT-4åœ¨è¯†åˆ«æ­§ä¹‰æ–¹é¢å·²ç»èƒ½è¾¾åˆ°ä¸äººç±»ä¸“å®¶65%çš„ä¸€è‡´æ€§ï¼Œè¶…è¿‡äº†GPT-3.5çš„44%ã€‚è¿™è¯´æ˜AIæ­£åœ¨å¿«é€Ÿå­¦ä¹ ç†è§£äººç±»è¯­è¨€çš„å¾®å¦™ä¹‹å¤„ã€‚</p>
<h2 data-id="heading-8">ç¬¬ä¸‰å¤§æŒ‘æˆ˜ï¼šå½“ç”¨æˆ·é—®çš„é—®é¢˜æ•°æ®åº“æ ¹æœ¬ç­”ä¸ä¸Šæ¥</h2>
<h3 data-id="heading-9">"è¯­ä¹‰ä¸åŒ¹é…"ï¼šå°±åƒç”¨è®¡ç®—å™¨é—®ä»Šå¤©å¤©æ°”</h3>
<p>æƒ³è±¡ä¸€ä¸‹ï¼Œä½ æ‹¿ç€è®¡ç®—å™¨é—®ï¼š"ä»Šå¤©å¤©æ°”æ€ä¹ˆæ ·ï¼Ÿ"è®¡ç®—å™¨è‚¯å®šä¸€è„¸æ‡µé€¼ã€‚åŒæ ·åœ°ï¼Œç”¨æˆ·ç»å¸¸ä¼šé—®æ•°æ®åº“ä¸€äº›å®ƒæ ¹æœ¬æ— æ³•å›ç­”çš„é—®é¢˜ã€‚</p>
<p>æ¯”å¦‚ï¼Œç”¨æˆ·é—®HRæ•°æ®åº“ï¼š"ä¸Šå­£åº¦å“ªä¸ªäº§å“å–å¾—æœ€å¥½ï¼Ÿ"è¿™å°±åƒé—®å›¾ä¹¦ç®¡ç†å‘˜ï¼š"ä½ ä»¬è¿™é‡Œå“ªé“èœæœ€å¥½åƒï¼Ÿ"å®Œå…¨ä¸åœ¨ä¸€ä¸ªé¢‘é“ä¸Šã€‚</p>
<h3 data-id="heading-10">æ›´å¾®å¦™çš„é™·é˜±ï¼šå­—æ®µåç›¸åŒä½†è¯­ä¹‰ä¸åŒ</h3>
<p>è¿˜æœ‰æ›´å¾®å¦™çš„æƒ…å†µã€‚å‡è®¾æœ‰ä¸ªæ­Œæ‰‹è¡¨ï¼š<code>singers(name, cause_of_death, year)</code></p>
<p>ç”¨æˆ·é—®ï¼š"2021å¹´æœ‰å¤šå°‘æ­Œæ‰‹æ­»äºæ–°å† ï¼Ÿ"</p>
<p>LLMå¾ˆå¯èƒ½ç”Ÿæˆï¼š</p>
<ul>
<li>ounter(line</li>
<li>ounter(line</li>
<li>ounter(line</li>
</ul>

<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> singers <span class="hljs-keyword">WHERE</span> cause_of_death <span class="hljs-keyword">LIKE</span> <span class="hljs-string">'%covid%'</span> <span class="hljs-keyword">AND</span> <span class="hljs-keyword">year</span> <span class="hljs-operator">=</span> <span class="hljs-number">2021</span>
</code></pre>
<p>çœ‹èµ·æ¥å¾ˆåˆç†å¯¹å§ï¼Ÿä½†é—®é¢˜æ˜¯ï¼Œè¿™é‡Œçš„<code>year</code>å­—æ®µå­˜çš„æ˜¯æ­Œæ‰‹å‘å¸ƒç¬¬ä¸€å¼ ä¸“è¾‘çš„å¹´ä»½ï¼Œè€Œä¸æ˜¯æ­»äº¡å¹´ä»½ï¼</p>
<p>è¿™å°±åƒä½ é—®ï¼š"2021å¹´ä¹°è½¦çš„äººä¸­ï¼Œæœ‰å¤šå°‘æ˜¯90åï¼Ÿ"ç»“æœæ•°æ®åº“é‡Œçš„<code>year</code>å­—æ®µè®°å½•çš„æ˜¯è½¦è¾†ç”Ÿäº§å¹´ä»½ï¼Œä¸æ˜¯è´­ä¹°å¹´ä»½ã€‚ç­”æ¡ˆå®Œå…¨ç‰›å¤´ä¸å¯¹é©¬å˜´ã€‚</p>
<h3 data-id="heading-11">AIçš„è¿›æ­¥ï¼šGPT-4 vs GPT-3.5</h3>
<p>å¥½æ¶ˆæ¯æ˜¯ï¼ŒGPT-4åœ¨è¯†åˆ«è¿™ç§è¯­ä¹‰ä¸åŒ¹é…æ–¹é¢è¡¨ç°å‡ºè‰²ã€‚åœ¨æˆ‘ä»¬çš„æµ‹è¯•ä¸­ï¼š</p>
<ul>
<li>GPT-3.5ï¼šåªèƒ½æ­£ç¡®è¯†åˆ«60%çš„ä¸å¯å›ç­”é—®é¢˜</li>
<li>GPT-4ï¼š100%æ­£ç¡®è¯†åˆ«æ‰€æœ‰ä¸å¯å›ç­”çš„é—®é¢˜</li>
</ul>
<p>ä½†åæ¶ˆæ¯æ˜¯ï¼ŒGPT-4çš„æˆæœ¬æ˜¯GPT-3.5çš„30å€ï¼Œå»¶è¿Ÿä¹Ÿæ›´é«˜ã€‚è¿™å°±åƒä¹°äº†å°æ³•æ‹‰åˆ©å»é€å¤–å–ï¼Œæ€§èƒ½æ˜¯å¥½ï¼Œä½†ç»æµä¸Šä¸åˆ’ç®—ã€‚</p>
<h2 data-id="heading-12">ç¬¬å››å¤§æŒ‘æˆ˜ï¼šåŸºå‡†æµ‹è¯•çš„"æ©è€³ç›—é“ƒ"</h2>
<h3 data-id="heading-13">å½“è€ƒè¯•é¢˜ç›®æœ¬èº«å°±æœ‰é—®é¢˜</h3>
<p>ç°åœ¨æˆ‘ä»¬æ¥è¯´è¯´NL2SQLé¢†åŸŸæœ€å¤§çš„é—®é¢˜ä¹‹ä¸€ï¼šå¦‚ä½•è¯„ä¼°ç³»ç»Ÿæ˜¯å¦çœŸçš„"èªæ˜"ã€‚</p>
<p>ä¼ ç»Ÿçš„è¯„ä¼°æ–¹æ³•å°±åƒæ˜¯ä¸¥è‹›çš„è¯­æ–‡è€å¸ˆï¼Œè¦æ±‚ä½ çš„ç­”æ¡ˆå¿…é¡»å’Œæ ‡å‡†ç­”æ¡ˆä¸€å­—ä¸å·®ã€‚ä½†é—®é¢˜æ˜¯ï¼Œå¯¹äº"æ‰¾åˆ°åŒæ—¶æœ‰ç¡•å£«ç”Ÿå’Œæœ¬ç§‘ç”Ÿæ³¨å†Œçš„å­¦æœŸ"è¿™ä¸ªé—®é¢˜ï¼Œè¿”å›<code>semester_ID</code>å’Œè¿”å›<code>semester_name</code>éƒ½æ˜¯æ­£ç¡®ç­”æ¡ˆå•Šï¼</p>
<p>å°±åƒä½ é—®æœ‹å‹"ä»Šå¤©æ˜ŸæœŸå‡ ï¼Ÿ"ï¼Œä»–å›ç­”"æ˜ŸæœŸä¸‰"æˆ–"Wednesday"éƒ½å¯¹ï¼Œä½†ä¼ ç»Ÿè¯„ä¼°ç³»ç»Ÿä¼šè¯´ï¼š"ä¸å¯¹ï¼æ ‡å‡†ç­”æ¡ˆæ˜¯'æ˜ŸæœŸä¸‰'ï¼Œä½ ç­”æˆ'Wednesday'ï¼Œé›¶åˆ†ï¼"</p>
<h3 data-id="heading-14">å¼•å…¥"æ„å›¾å¯¼å‘"çš„è¯„ä¼°ï¼šä¸çœ‹å½¢å¼çœ‹æ•ˆæœ</h3>
<p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬æå‡ºäº†"æ„å›¾å¯¼å‘æ‰§è¡ŒåŒ¹é…"çš„æ–°è¯„ä¼°æ ‡å‡†ï¼Œå…è®¸ä»¥ä¸‹æƒ…å†µï¼š</p>
<ol>
<li><strong>é¡ºåºä¸é‡è¦</strong>ï¼šé™¤éç”¨æˆ·æ˜ç¡®è¦æ±‚æ’åº</li>
<li><strong>å¤šè¿”å›å‡ åˆ—æ²¡å…³ç³»</strong>ï¼šç”¨æˆ·è¦å‘˜å·¥å§“åï¼Œä½ è¿”å›å§“å+å·¥èµ„ï¼Œä¹Ÿç®—å¯¹</li>
<li><strong>å…³é”®å­—æ®µå¯äº’æ¢</strong>ï¼šè¿”å›å‘˜å·¥IDæˆ–å‘˜å·¥å§“åéƒ½ç®—å¯¹ï¼ˆéƒ½èƒ½å”¯ä¸€è¯†åˆ«å‘˜å·¥ï¼‰</li>
</ol>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d28a1a6525ee48a5831d1c12943b9d5d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbWFydGluemg=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766142271&amp;x-signature=8SBFwFIFloQzQfa%2B%2BpDdwx0qFhU%3D" alt="å›¾4ï¼šè¯„ä¼°æ ‡å‡†çš„é©å‘½ - ä»&quot;æ ‡å‡†ç­”æ¡ˆ&quot;åˆ°&quot;è§£å†³é—®é¢˜&quot;çš„è½¬å˜" loading="lazy"/></p>
<p>å›¾4ï¼šè¯„ä¼°æ ‡å‡†çš„é©å‘½ - ä»"æ ‡å‡†ç­”æ¡ˆ"åˆ°"è§£å†³é—®é¢˜"çš„è½¬å˜</p>
<p>ç»“æœä»¤äººéœ‡æƒŠï¼åœ¨SpideråŸºå‡†æµ‹è¯•ä¸­ï¼Œä¼ ç»Ÿä¸¥æ ¼åŒ¹é…çš„å‡†ç¡®ç‡åªæœ‰26.32%ï¼Œä½†é‡‡ç”¨æ„å›¾å¯¼å‘è¯„ä¼°åï¼Œå‡†ç¡®ç‡é£™å‡åˆ°92.50%ï¼</p>
<p>è¿™ä¸æ˜¯åœ¨"æ”¾æ°´"ï¼Œè€Œæ˜¯æ›´å‡†ç¡®åœ°åæ˜ äº†ç”¨æˆ·çš„çœŸå®éœ€æ±‚ã€‚æ¯•ç«Ÿï¼Œç”¨æˆ·è¦çš„æ˜¯è§£å†³é—®é¢˜ï¼Œä¸æ˜¯å‚åŠ è¯­æ³•è€ƒè¯•ã€‚</p>
<h2 data-id="heading-15">ç¬¬äº”å¤§æŒ‘æˆ˜ï¼šAIçš„"ç¤¾ä¼šè´£ä»»"é—®é¢˜</h2>
<h3 data-id="heading-16">å½“æ•°æ®åº“é‡Œæœ‰"å±é™©å†…å®¹"</h3>
<p>AIæ—¶ä»£çš„NL2SQLé¢ä¸´ç€å‰æ‰€æœªæœ‰çš„è´£ä»»é—®é¢˜ã€‚æƒ³è±¡ä¸€ä¸‹è¿™ä¸ªåœºæ™¯ï¼š</p>
<p><strong>è­¦å¯Ÿå±€æ•°æ®åº“</strong>åŒ…å«çŠ¯ç½ªè®°å½•ï¼Œè­¦å®˜é—®ï¼š"æŸ¥è¯¢æ‰€æœ‰æš´åŠ›çŠ¯ç½ªæ¡ˆä»¶" <strong>ä¼ä¸šäººäº‹æ•°æ®åº“</strong>ï¼Œæœ‰äººé—®ï¼š"å“ªäº›å‘˜å·¥å¯èƒ½ä¼šè¢«è£å‘˜ï¼Ÿ"</p>
<p>ç¬¬ä¸€ä¸ªæŸ¥è¯¢æ˜¯åˆæ³•çš„å·¥ä½œéœ€è¦ï¼Œç¬¬äºŒä¸ªå¯èƒ½æ¶‰åŠæ­§è§†å’Œåè§ã€‚ä½†AIå¦‚ä½•åŒºåˆ†å‘¢ï¼Ÿ</p>
<h3 data-id="heading-17">åè§é—®é¢˜ï¼šå½“AIå­¦ä¼šäº†"æœ‰è‰²çœ¼é•œ"</h3>
<p>æ›´å¾®å¦™çš„æ˜¯åè§é—®é¢˜ã€‚æ¯”å¦‚ç”¨æˆ·é—®ï¼š"æˆ‘åº”è¯¥é¿å…å‘è°æ”¾è´·ï¼Ÿ"AIå¯èƒ½ç”Ÿæˆï¼š</p>
<ul>
<li>ounter(line</li>
</ul>

<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> customers <span class="hljs-keyword">WHERE</span> ethnicity <span class="hljs-operator">=</span> <span class="hljs-string">'X'</span>  <span class="hljs-comment">-- ç›´æ¥æ­§è§†</span>
</code></pre>
<p>æˆ–è€…ï¼š</p>
<ul>
<li>ounter(line</li>
</ul>

<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> customers <span class="hljs-keyword">WHERE</span> location <span class="hljs-operator">=</span> <span class="hljs-string">'Y'</span>   <span class="hljs-comment">-- é—´æ¥æ­§è§†ï¼ˆåŸºäºåœ°åŒº-ç§æ—å…³è”ï¼‰</span>
</code></pre>
<p>è¿™å°±åƒè®©ä¸€ä¸ªè§è¿‡ä¸–é¢ä½†æœ‰åˆ»æ¿å°è±¡çš„è€å¸ˆå‚…æ¥ç­›é€‰ç®€å†ï¼Œä»–å¯èƒ½ä¼š"å‡­ç»éªŒ"åšå‡ºæœ‰åè§çš„åˆ¤æ–­ã€‚</p>
<h3 data-id="heading-18">å¤šè¯­è¨€æ”¯æŒï¼šè‹±è¯­ä¹‹å¤–çš„"æ•°å­—é¸¿æ²Ÿ"</h3>
<p>æœ€åï¼Œè¿˜æœ‰è¯­è¨€æ”¯æŒé—®é¢˜ã€‚å½“æˆ‘ä»¬æŠŠè‹±æ–‡æŸ¥è¯¢ç¿»è¯‘æˆä¸­æ–‡ã€å°åœ°è¯­ã€å¾·è¯­ç­‰å…¶ä»–è¯­è¨€æ—¶ï¼ŒNL2SQLçš„å‡†ç¡®ç‡ä¸‹é™äº†3.5%-15%ã€‚</p>
<p>è¿™å°±åƒè®©ä¸€ä¸ªåªä¼šè¯´è‹±è¯­çš„å¯¼æ¸¸ä¸ºä¸­å›½æ¸¸å®¢æœåŠ¡ï¼Œæ•ˆæœè‚¯å®šä¼šæ‰“æŠ˜æ‰£ã€‚</p>
<h2 data-id="heading-19">ç°å®åº”ç”¨åœºæ™¯ï¼šå½“å°å¼ é‡åˆ°è€æ¿çš„"ç®€å•è¦æ±‚"</h2>
<p>è®©æˆ‘ä»¬å›åˆ°å¼€å¤´çš„æ•…äº‹ã€‚å°å¼ æ˜¯ä¸€å®¶ç”µå•†å…¬å¸çš„æ•°æ®åˆ†æå¸ˆï¼ŒæŸå¤©è€æ¿èµ°è¿‡æ¥è¯´ï¼š</p>
<p><strong>è€æ¿ï¼š</strong> "å°å¼ ï¼Œå¸®æˆ‘æŸ¥ä¸€ä¸‹ä¸Šä¸ªæœˆæˆ‘ä»¬å…¬å¸å“ªä¸ªéƒ¨é—¨ä¸šç»©æœ€å¥½ã€‚"</p>
<p><strong>å°å¼ å¿ƒä¸­çš„OSï¼š</strong></p>
<ol>
<li>ä¸Šä¸ªæœˆæ˜¯æŒ‡11æœˆ1-30æ—¥è¿˜æ˜¯10æœˆ26æ—¥-11æœˆ25æ—¥ï¼ˆè´¢åŠ¡æœˆï¼‰ï¼Ÿ</li>
<li>éƒ¨é—¨æ˜¯æŒ‰ç»„ç»‡æ¶æ„åˆ†è¿˜æ˜¯æŒ‰æˆæœ¬ä¸­å¿ƒåˆ†ï¼Ÿ</li>
<li>ä¸šç»©æ˜¯æŒ‡é”€å”®é¢ã€åˆ©æ¶¦è¿˜æ˜¯è®¢å•é‡ï¼Ÿ</li>
<li>è¦ä¸è¦åŒ…å«é€€è´§ï¼Ÿ</li>
</ol>
<p>å¦‚æœæœ‰äº†å®Œç¾çš„NL2SQLç³»ç»Ÿï¼Œå°å¼ åªéœ€è¦è¯´ï¼š"æŸ¥è¯¢ä¸Šæœˆå„éƒ¨é—¨ä¸šç»©æ•°æ®"ï¼Œç³»ç»Ÿå°±ä¼šï¼š</p>
<ol>
<li><strong>æ™ºèƒ½æ¶ˆæ­§</strong>ï¼šè¯¢é—®å…·ä½“éœ€æ±‚ï¼ˆ"æ‚¨æŒ‡çš„æ˜¯è‡ªç„¶æœˆè¿˜æ˜¯è´¢åŠ¡æœˆï¼Ÿ"ï¼‰</li>
<li><strong>ç»“æ„ç†è§£</strong>ï¼šè‡ªåŠ¨è¯†åˆ«ç›¸å…³çš„è¡¨å’Œå­—æ®µ</li>
<li><strong>è¯­ä¹‰åŒ¹é…</strong>ï¼šç¡®ä¿æŸ¥è¯¢å†…å®¹ä¸æ•°æ®åº“èƒ½åŠ›åŒ¹é…</li>
<li><strong>ç»“æœä¼˜åŒ–</strong>ï¼šè¿”å›æ˜“æ‡‚çš„å¯è§†åŒ–ç»“æœ</li>
</ol>
<p>ä½†ç°å®æ˜¯ï¼Œå°å¼ è¿˜æ˜¯è¦èŠ±åŠå°æ—¶ç†è§£éœ€æ±‚ï¼Œå†™SQLï¼Œè°ƒè¯•ï¼Œå†ç¾åŒ–ç»“æœã€‚</p>
<h2 data-id="heading-20">æœªæ¥ä¹‹è·¯ï¼šä»"èƒ½ç”¨"åˆ°"å¥½ç”¨"çš„è¿›åŒ–</h2>
<h3 data-id="heading-21">æŠ€æœ¯è·¯çº¿å›¾</h3>
<p>è¦å®ç°çœŸæ­£ä¼ä¸šçº§çš„NL2SQLï¼Œæˆ‘ä»¬è¿˜éœ€è¦åœ¨ä»¥ä¸‹æ–¹é¢çªç ´ï¼š</p>
<ol>
<li><strong>æ™ºèƒ½æ¨¡å¼é€‰æ‹©</strong>ï¼šæ ¹æ®æŸ¥è¯¢å¤æ‚åº¦è‡ªåŠ¨é€‰æ‹©ç›¸å…³è¡¨ç»“æ„</li>
<li><strong>ä¸Šä¸‹æ–‡ç†è§£</strong>ï¼šè®°ä½å¯¹è¯å†å²ï¼Œæ”¯æŒå¤šè½®æŸ¥è¯¢</li>
<li><strong>ä¸»åŠ¨æ¶ˆæ­§</strong>ï¼šå½“æ£€æµ‹åˆ°æ­§ä¹‰æ—¶ä¸»åŠ¨è¯¢é—®</li>
<li><strong>å®‰å…¨æœºåˆ¶</strong>ï¼šé˜²æ­¢æœ‰å®³æŸ¥è¯¢å’Œæ•°æ®æ³„éœ²</li>
<li><strong>å¤šæ¨¡æ€äº¤äº’</strong>ï¼šæ”¯æŒè¯­éŸ³ã€å›¾è¡¨ç­‰å¤šç§äº¤äº’æ–¹å¼</li>
</ol>
<h3 data-id="heading-22">äº§ä¸šå½±å“ï¼šé‡æ–°å®šä¹‰"æ•°æ®æ°‘ä¸»åŒ–"</h3>
<p>å½“NL2SQLæŠ€æœ¯çœŸæ­£æˆç†Ÿæ—¶ï¼Œå®ƒå°†å½»åº•æ”¹å˜ä¼ä¸šçš„æ•°æ®ä½¿ç”¨æ–¹å¼ï¼š</p>
<ul>
<li><strong>ä¸šåŠ¡äººå‘˜</strong>ï¼šä¸å†ä¾èµ–ITéƒ¨é—¨ï¼Œç›´æ¥è·å–æ‰€éœ€æ•°æ®</li>
<li><strong>æ•°æ®åˆ†æå¸ˆ</strong>ï¼šä»å†™SQLè½¬å‘è§£é‡Šç»“æœå’Œæä¾›æ´å¯Ÿ</li>
<li><strong>å†³ç­–æ•ˆç‡</strong>ï¼šä»"æ•°æ®ç”³è¯·-ç­‰å¾…-åˆ†æ-æ±‡æŠ¥"åˆ°"å³é—®å³ç­”"</li>
<li><strong>æ•°æ®æ²»ç†</strong>ï¼šéœ€è¦æ›´å®Œå–„çš„æƒé™æ§åˆ¶å’Œå®¡è®¡æœºåˆ¶</li>
</ul>
<h2 data-id="heading-23">ç»“è¯­ï¼šé©å‘½å°šæœªæˆåŠŸï¼ŒåŒå¿—ä»éœ€åŠªåŠ›</h2>
<p>NL2SQLæŠ€æœ¯ç¡®å®æ˜¯é©å‘½æ€§çš„ï¼Œå¤§è¯­è¨€æ¨¡å‹çš„å‡ºç°ä¸ºæˆ‘ä»¬æ‰“å¼€äº†æ–°çš„å¯èƒ½æ€§ã€‚ä½†æ­£å¦‚æœ¬æ–‡æ‰€å±•ç¤ºçš„ï¼Œä»å®éªŒå®¤çš„Demoåˆ°ä¼ä¸šçº§çš„äº§å“ï¼Œè¿˜æœ‰å¾ˆé•¿çš„è·¯è¦èµ°ã€‚</p>
<p>è¿™å°±åƒè‡ªåŠ¨é©¾é©¶æŠ€æœ¯ä¸€æ ·ï¼Œåœ¨é«˜é€Ÿå…¬è·¯ä¸Šå·²ç»ç›¸å½“å¯é ï¼Œä½†åœ¨å¤æ‚çš„åŸå¸‚ç¯å¢ƒä¸­è¿˜éœ€è¦ä¸æ–­æ”¹è¿›ã€‚NL2SQLåœ¨ç®€å•æŸ¥è¯¢ä¸Šå·²ç»å¾ˆå‰å®³äº†ï¼Œä½†åœ¨å¤æ‚çš„ä¼ä¸šç¯å¢ƒä¸­ï¼Œè¿˜éœ€è¦è§£å†³æ¶æ„å¤æ‚æ€§ã€æ­§ä¹‰å¤„ç†ã€åŸºå‡†è¯„ä¼°å’ŒAIè´£ä»»ç­‰ä¸€ç³»åˆ—æŒ‘æˆ˜ã€‚</p>
<p>ä¸è¿‡ä¸ç”¨æ‹…å¿ƒï¼ŒæŠ€æœ¯è¿›æ­¥çš„è„šæ­¥ä»æœªåœæ­¢ã€‚ä»Šå¤©çš„æŒ‘æˆ˜å°±æ˜¯æ˜å¤©çš„çªç ´ç‚¹ã€‚ä¹Ÿè®¸ä¸ä¹…çš„å°†æ¥ï¼Œæˆ‘ä»¬çœŸçš„å¯ä»¥åƒè·Ÿæœ‹å‹èŠå¤©ä¸€æ ·è½»æ¾åœ°ä¸æ•°æ®åº“å¯¹è¯ã€‚</p>
<p>é‚£æ—¶å€™ï¼Œå°å¼ å†ä¹Ÿä¸ç”¨ä¸ºè€æ¿çš„"éšä¾¿æŸ¥ä¸ªæ•°æ®"è€Œå¤´ç–¼äº†ï¼Œå› ä¸ºAIåŠ©æ‰‹ä¼šæ¯”ä»–æ›´æ‡‚è€æ¿æƒ³è¦ä»€ä¹ˆï¼</p>
<p>åŸæ–‡é“¾æ¥ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fjishuba.cn%2Farticle%2Fnl2sql%25e8%25a7%25a3%25e5%2586%25b3%25e4%25ba%2586%25ef%25bc%259f%25e5%2588%25ab%25e9%2597%25b9%25e4%25ba%2586%25ef%25bc%2581%25e5%25a4%25a7%25e6%25a8%25a1%25e5%259e%258b%25e8%25ae%25a9%25e4%25bd%25a0%25e5%2592%258c%25e6%2595%25b0%25e6%258d%25ae%25e5%25ba%2593%25e8%2581%258a%25e5%25a4%25a9%25e8%2583%258c%25e5%2590%258e%2F" target="_blank" title="https://jishuba.cn/article/nl2sql%e8%a7%a3%e5%86%b3%e4%ba%86%ef%bc%9f%e5%88%ab%e9%97%b9%e4%ba%86%ef%bc%81%e5%a4%a7%e6%a8%a1%e5%9e%8b%e8%ae%a9%e4%bd%a0%e5%92%8c%e6%95%b0%e6%8d%ae%e5%ba%93%e8%81%8a%e5%a4%a9%e8%83%8c%e5%90%8e/" ref="nofollow noopener noreferrer">jishuba.cn/article/nl2â€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ™ºæºå¼€æº Reason-RFTï¼šç”¨å¼ºåŒ–å­¦ä¹ é‡å¡‘è§†è§‰æ¨ç†ï¼Œçªç ´ VLM æ³›åŒ–ç“¶é¢ˆ]]></title>    <link>https://juejin.cn/post/7582809606067077146</link>    <guid>https://juejin.cn/post/7582809606067077146</guid>    <pubDate>2025-12-12T13:01:16.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582809606067077146" data-draft-id="7582814236583149606" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ™ºæºå¼€æº Reason-RFTï¼šç”¨å¼ºåŒ–å­¦ä¹ é‡å¡‘è§†è§‰æ¨ç†ï¼Œçªç ´ VLM æ³›åŒ–ç“¶é¢ˆ"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-12T13:01:16.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ™ºæºç ”ç©¶é™¢"/> <meta itemprop="url" content="https://juejin.cn/user/3538691702925012"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ™ºæºå¼€æº Reason-RFTï¼šç”¨å¼ºåŒ–å­¦ä¹ é‡å¡‘è§†è§‰æ¨ç†ï¼Œçªç ´ VLM æ³›åŒ–ç“¶é¢ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3538691702925012/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ™ºæºç ”ç©¶é™¢
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-12T13:01:16.000Z" title="Fri Dec 12 2025 13:01:16 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/402c4f6ca928464f90bdff259666427a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rqQ56CU56m26Zmi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766149276&amp;x-signature=ufui%2FuVS%2FEZxoFb7TnQ3f3Nn%2F8A%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å°½ç®¡è¿‘å¹´æ¥è§†è§‰è¯­è¨€æ¨¡å‹ï¼ˆVLMï¼‰å–å¾—äº†æ˜¾è‘—è¿›å±•ï¼Œä½†ç°æœ‰æ¨¡å‹åœ¨å¤æ‚è§†è§‰æ¨ç†ä»»åŠ¡ä¸Šçš„æ³›åŒ–èƒ½åŠ›ä»é¢ä¸´ä¸¥å³»æŒ‘æˆ˜ã€‚å½“å‰ä¸»æµçš„â€œæ€ç»´é“¾â€ï¼ˆChain-of-Thought, CoTï¼‰ç›‘ç£å¾®è°ƒæ–¹æ³•ï¼Œå¾€å¾€è®©æ¨¡å‹åœç•™åœ¨å¯¹ç‰¹å®šæ¨ç†æ¨¡æ¿çš„â€œè®°å¿†â€ï¼Œè€ŒéçœŸæ­£æŒæ¡åº•å±‚æœºåˆ¶ï¼šä¸€æ—¦æ¢æˆæ–°åœºæ™¯ã€æ–°è§†è§’æˆ–æ–°çš„ä»»åŠ¡ç»„åˆï¼Œæ€§èƒ½ä¾¿æ˜æ˜¾ä¸‹æ»‘ï¼Œéš¾ä»¥æ»¡è¶³åœ¨è‡ªä¸»æœºå™¨äººç­‰å…·èº«æ™ºèƒ½åœºæ™¯ä¸‹å¯¹å¯é æ€§å’Œé²æ£’æ€§çš„è¦æ±‚ã€‚</p>
<p>RoboBrain 2.0 æ˜¯æ™ºæºé¢å‘çœŸå®ç‰©ç†åœºæ™¯æ‰“é€ çš„é€šç”¨å…·èº«å¤§è„‘ï¼Œä»¥ç»Ÿä¸€çš„è§†è§‰â€”è¯­è¨€å¤šæ¨¡æ€æ¶æ„ï¼Œä¸ºæœºå™¨äººåœ¨æ„ŸçŸ¥ã€è®¤çŸ¥ã€æ¨ç†ä¸å†³ç­–ä¸Šçš„æ ¸å¿ƒèƒ½åŠ›æä¾›åŸºç¡€æ”¯æ’‘ã€‚å›´ç»• RoboBrain 2.0 çš„æ•´ä½“ç›®æ ‡ï¼Œæˆ‘ä»¬ä¸ç¦è¦é—®ï¼š<strong>èƒ½å¦æ„å»ºä¸€ç§æ›´é€‚åˆå…·èº«æ™ºèƒ½çš„å¤§æ¨¡å‹è®­ç»ƒèŒƒå¼ï¼Œä½¿æ¨¡å‹ä¸ä»…â€œä¼šç®—â€ï¼Œæ›´èƒ½â€œæ‡‚ä¸ºä»€ä¹ˆè¿™æ ·ç®—â€ï¼Œä»è€Œåœ¨å¤æ‚å¤šå˜çš„ç¯å¢ƒä¸­ä¿æŒç¨³å¥çš„æ¨ç†ä¸å†³ç­–è¡¨ç°ï¼Ÿ</strong></p>
<p>åŸºäºè¿™ä¸€éœ€æ±‚ï¼Œæ™ºæºç ”ç©¶é™¢å…·èº«å¤šæ¨¡æ€å¤§æ¨¡å‹ç ”ç©¶ä¸­å¿ƒè”åˆåŒ—äº¬å¤§å­¦ã€ä¸­å›½ç§‘å­¦é™¢è‡ªåŠ¨åŒ–ç ”ç©¶æ‰€ç­‰åˆä½œå•ä½ï¼Œåœ¨ RoboBrain 2.0 è®­ç»ƒç®¡çº¿ä¸­å¼•å…¥äº†ä¸€ç§åˆ›æ–°çš„ä¸¤é˜¶æ®µå¼ºåŒ–å­¦ä¹ åè®­ç»ƒæ¡†æ¶Â <strong>Reason-RFT</strong>ã€‚å®ƒå¹¶éä¸€é¡¹â€œå•ç‚¹ç®—æ³•â€ï¼Œè€Œæ˜¯Â <strong>RoboBrain 2.0 åè®­ç»ƒé˜¶æ®µçš„æ ¸å¿ƒæ¨ç†å¢å¼ºæ¨¡å—</strong>ï¼Œæ—¨åœ¨ä»æ ¹æœ¬ä¸Šæå‡ RoboBrain ç³»åˆ— VLM åœ¨ç©ºé—´æ¨ç†ã€æ“ä½œè§„åˆ’ç­‰ä»»åŠ¡ä¸Šçš„æ³›åŒ–èƒ½åŠ›ã€‚</p>
<p>Reason-RFT ä¸ä»…åœ¨å¤šé¡¹è§†è§‰æ¨ç†ä¸å…·èº«åŸºå‡†ä¸Šå–å¾—äº†æ˜¾è‘—å¢ç›Šï¼Œæ›´éªŒè¯äº† <strong>â€œSFT æ¿€æ´» + å¼ºåŒ–å­¦ä¹ å¢å¼ºâ€</strong> è¿™ä¸€æ–°å‹è®­ç»ƒèŒƒå¼åœ¨å¤§è§„æ¨¡å…·èº«æ™ºèƒ½æ¨¡å‹ä¸Šçš„å¯è¡Œæ€§ï¼šé€šè¿‡å°† SFT çš„å½’çº³å¼•å¯¼ä¸ RL çš„æ¢ç´¢ä¼˜åŒ–æœ‰æœºç»“åˆï¼Œæœ‰æ•ˆç¼“è§£äº†è¿‡æ‹Ÿåˆä¸â€œè®¤çŸ¥åƒµåŒ–â€é—®é¢˜ï¼Œæ˜¾è‘—å¢å¼ºäº† RoboBrain åœ¨è·¨åœºæ™¯è¿ç§»å’ŒçœŸå®ä¸–ç•Œä»»åŠ¡ä¸­çš„é€‚ç”¨æ€§ã€‚ç›¸å…³ç ”ç©¶è®ºæ–‡å·²è¢« NeurIPS 2025 æ¥æ”¶ã€‚</p>
<p><strong>Reason-RFT: Reinforcement Fine-Tuning for Visual Reasoning of Vision Language Models</strong></p>
<p>å¼€æºé“¾æ¥ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FFlagOpen%2FReason-RFT" target="_blank" title="https://github.com/FlagOpen/Reason-RFT" ref="nofollow noopener noreferrer">github.com/FlagOpen/Reâ€¦</a></p>
<p>è®ºæ–‡åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fpdf%2F2503.20752" target="_blank" title="https://arxiv.org/pdf/2503.20752" ref="nofollow noopener noreferrer">arxiv.org/pdf/2503.20â€¦</a></p>
<hr/>
<h3 data-id="heading-0"><em><strong>1</strong></em> <strong>æ¿€æ´»ä¸å¢å¼ºï¼šRoboBrain 2.0åè®­ç»ƒä¸­çš„ä¸¤é˜¶æ®µæ¨ç†æ¡†æ¶</strong></h3>
<p>åœ¨RoboBrain 2.0 çš„åè®­ç»ƒä½“ç³»ä¸­ï¼ŒReason-RFT å°†å¤æ‚æ¨ç†èƒ½åŠ›çš„å­¦ä¹ è¿‡ç¨‹æ‹†åˆ†ä¸ºä¸¤ä¸ªç´§å¯†è¡”æ¥çš„é˜¶æ®µï¼š<strong>SFT æ¨ç†æ¿€æ´»</strong> ä¸ <strong>RL æ¨ç†å¢å¼º</strong>ï¼Œå…±åŒæ„æˆæ¨¡å‹çš„â€œæ¨ç†åè®­ç»ƒå¼•æ“â€ã€‚</p>
<p><strong>é˜¶æ®µä¸€ï¼šSFT æ¨ç†æ¿€æ´»</strong></p>
<p>åœ¨è¿™ä¸€é˜¶æ®µï¼Œæˆ‘ä»¬å¹¶æœªä¾èµ–æµ·é‡ CoT æ•°æ®å¯¹ RoboBrain è¿›è¡Œå¤§è§„æ¨¡ SFTâ€”â€”é‚£å¾€å¾€ä¼šå¸¦æ¥æ¨¡å¼è®°å¿†ä¸è¿‡æ‹Ÿåˆé£é™©ï¼Œè€Œæ˜¯ä½¿ç”¨ä¸€å°éƒ¨åˆ†ç²¾å¿ƒç­›é€‰çš„é«˜è´¨é‡ CoT æ•°æ®ï¼Œå¯¹é¢„è®­ç»ƒçš„ RoboBrain è¿›è¡ŒçŸ­æš‚å¾®è°ƒã€‚</p>
<p>è¯¥é˜¶æ®µçš„ç›®æ ‡ä¸æ˜¯è¿½æ±‚ç«‹åˆ»â€œæ‹‰æ»¡æŒ‡æ ‡â€ï¼Œè€Œæ˜¯<strong>æ¿€æ´»æ¨¡å‹ä¸æ¨ç†ç›¸å…³çš„æ½œåœ¨èƒ½åŠ›</strong>ï¼šé€šè¿‡æ¥è§¦ç»“æ„åŒ–çš„æ¨ç†è¿‡ç¨‹ï¼Œæ¨¡å‹å­¦ä¼šå°†å¤æ‚é—®é¢˜æ‹†è§£ä¸ºè‹¥å¹²é€»è¾‘æ­¥éª¤ï¼Œå¹¶ä»¥â€œæ€è€ƒâ€”å›ç­”â€çš„ç»Ÿä¸€æ ¼å¼è¿›è¡Œè¾“å‡ºï¼Œä»è€Œå½¢æˆæœ‰åˆ©äºæ¨ç†çš„å½’çº³åç½®ï¼ˆinductive biasï¼‰ï¼Œä¸ºåç»­å¼ºåŒ–å­¦ä¹ åœ¨ RoboBrain ä¸Šå¼€å±•é«˜æ•ˆæ¢ç´¢æ‰“ä¸‹è‰¯å¥½èµ·ç‚¹ã€‚</p>
<p><strong>é˜¶æ®µäºŒï¼šRL æ¨ç†å¢å¼º</strong></p>
<p>åœ¨å…·å¤‡åŸºç¡€æ¨ç†èŒƒå¼åï¼ŒRoboBrain è¿›å…¥å¼ºåŒ–å­¦ä¹ å¢å¼ºé˜¶æ®µã€‚æˆ‘ä»¬é‡‡ç”¨ GRPO ç®—æ³•ï¼Œè®©æ¨¡å‹é’ˆå¯¹åŒä¸€é—®é¢˜ç”Ÿæˆå¤šæ¡å€™é€‰æ¨ç†è·¯å¾„ï¼Œåœ¨ç»„å†…è¿›è¡Œç›¸å¯¹æ¯”è¾ƒã€‚è¿™ç§â€œç»„å†…æ¯”è¾ƒ + ç›¸å¯¹ä¼˜é€‰â€çš„è®¾è®¡ï¼Œæ›´é€‚åˆæ¨ç†ä»»åŠ¡è§£ç©ºé—´åºå¤§ä¸”éš¾ä»¥ç»å¯¹æ‰“åˆ†çš„ç‰¹æ€§ï¼ŒåŒæ—¶åœ¨è®¡ç®—ä¸å·¥ç¨‹æˆæœ¬ä¸Šæ›´æ˜“åµŒå…¥ RoboBrain çš„å¤§è§„æ¨¡è®­ç»ƒä½“ç³»ã€‚</p>
<p>åœ¨å¥–åŠ±è®¾è®¡ä¸Šï¼Œæˆ‘ä»¬é‡‡ç”¨äº†è½»é‡ä½†ç»“æ„åŒ–çš„æ–¹æ¡ˆï¼Œä¸ RoboBrain çš„å¤šä»»åŠ¡è®­ç»ƒæ·±åº¦å…¼å®¹ï¼š</p>
<ul>
<li>
<p><strong>æ ¼å¼å¥–åŠ±</strong>ï¼šç¡®ä¿æ¨¡å‹è¾“å‡ºéµå¾ªç»Ÿä¸€çš„â€œæ¨ç† + ç­”æ¡ˆâ€ç»“æ„ï¼Œä¿è¯å…·èº«ä»»åŠ¡ä¸­çš„å¯è§£é‡Šæ€§ä¸ç¨³å®šæ€§ï¼›</p>
</li>
<li>
<p><strong>å‡†ç¡®æ€§å¥–åŠ±</strong>ï¼šé’ˆå¯¹ä¸åŒç±»å‹çš„è§†è§‰/å…·èº«æ¨ç†ä»»åŠ¡ï¼ˆå¦‚ç‰©ä½“è®¡æ•°ã€æ•°å€¼ä¼°è®¡ã€ç©ºé—´å…³ç³»åˆ¤æ–­ã€æ“ä½œåºåˆ—è§„åˆ’ç­‰ï¼‰ï¼Œåœ¨â€œæ˜¯å¦æ­£ç¡®â€çš„åŸºç¡€ä¸Šå¼•å…¥é€‚åº¦çš„ç»†ç²’åº¦åŒºåˆ†ï¼Œä¾‹å¦‚å¯¹æ¥è¿‘æ­£ç¡®çš„æ•°å€¼æˆ–éƒ¨åˆ†æ­£ç¡®çš„æ“ä½œåºåˆ—ç»™äºˆæ­£å‘åé¦ˆï¼Œä½¿æ¨¡å‹åœ¨æ¢ç´¢è¿‡ç¨‹ä¸­æ‹¥æœ‰æ›´å¹³æ»‘ã€æ›´å¯ä¼˜åŒ–çš„å¥–åŠ±æ›²é¢ã€‚</p>
</li>
</ul>
<p>é€šè¿‡ <strong>â€œæ¿€æ´»â€”å¢å¼ºâ€</strong> çš„ä¸¤é˜¶æ®µæµç¨‹ï¼ŒReason-RFT å…ˆåœ¨ RoboBrain ä¸Šå»ºç«‹èµ·ç¨³å®šçš„æ¨ç†èŒƒå¼ï¼Œå†å€ŸåŠ© RL å’Œç»“æ„åŒ–å¥–åŠ±æŒç»­ä¼˜åŒ–æ¨ç†è´¨é‡ä¸é²æ£’æ€§ï¼Œåœ¨ä¸ä¾èµ–å¤§è§„æ¨¡ CoT è®°å¿†çš„å‰æä¸‹ï¼Œç³»ç»Ÿæ€§æå‡äº† RoboBrain 2.0 çš„è§†è§‰ä¸å…·èº«æ¨ç†æ³›åŒ–èƒ½åŠ›ã€‚</p>
<h3 data-id="heading-1"><strong>2 å®éªŒç»“æœï¼šæ›´å¼ºçš„æ€§èƒ½ã€æ³›åŒ–æ€§èƒ½ä¸æ•°æ®æ•ˆç‡</strong></h3>
<p>ä¸ºäº†ç³»ç»Ÿæ€§è¯„ä¼° Reason-RFT åœ¨ RoboBrain 2.0 ä¸Šçš„æ•ˆæœï¼Œåœ¨å¤šä¸ªæ—¶ç©ºè®¤çŸ¥åŸºå‡†ä¸Šè¿›è¡Œäº†æµ‹è¯•ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5cf68b0cfcb54fc88b561319bc5266cf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rqQ56CU56m26Zmi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766149276&amp;x-signature=cf43bIQvWFOL3re%2B1Y1j%2BtfQ8wM%3D" alt="å›¾ç‰‡" loading="lazy"/><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5158d672fb7642639d7ae3becb4ca606~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rqQ56CU56m26Zmi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766149276&amp;x-signature=S2sWDqvtf2uHMYu2edcnmV%2FyPUc%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ä»ç»“æœå¯ä»¥æ¸…æ™°çœ‹åˆ°ï¼ŒReason-RFT ä½œä¸º RoboBrain 2.0 çš„åè®­ç»ƒæ¨¡å—ï¼Œå¸¦æ¥äº†ä¸‰æ–¹é¢çš„æ˜¾è‘—æ”¶ç›Šï¼š</p>
<ul>
<li>
<p><strong>æ€§èƒ½æå‡</strong>ï¼šåœ¨å¤šä¸ªè§†è§‰æ¨ç†ä¸å…·èº«ä»»åŠ¡ä¸Šï¼Œæ¥å…¥ Reason-RFT çš„ RoboBrain 2.0 ä¸ä»…å…¨é¢è¶…è¶Šä¸»æµå¼€æºæ¨¡å‹ï¼Œåœ¨è‹¥å¹²ä»»åŠ¡ä¸Šç”šè‡³è¶…è¿‡é¡¶å°–é—­æºç³»ç»Ÿï¼Œå±•ç¤ºå‡ºå¼ºå¤§çš„æ¨ç†ä¸å†³ç­–èƒ½åŠ›ã€‚</p>
</li>
<li>
<p><strong>æ³›åŒ–èƒ½åŠ›å¢å¼º</strong>ï¼šåœ¨ä¸“é—¨æ„é€ çš„é¢†åŸŸæ¼‚ç§»ï¼ˆDomain-Shiftï¼‰æµ‹è¯•é›†ä¸Šï¼ˆä¾‹å¦‚ï¼Œå°†è®­ç»ƒé˜¶æ®µçš„ä¸­å¿ƒè§†è§’å›¾åƒæ›¿æ¢ä¸ºä»æœªè§è¿‡çš„å·¦/å³è§†è§’ï¼Œæˆ–åœ¨å…·èº«åœºæ™¯ä¸­æ”¹å˜è§†è§’ä¸ç‰©ä½“å¸ƒå±€ï¼‰ï¼Œæ¥å…¥ Reason-RFT çš„ RoboBrain 2.0 æ˜æ˜¾ä¼˜äºä»…ä½¿ç”¨ SFT çš„è®­ç»ƒæ–¹æ¡ˆï¼Œè¡¨ç°å‡ºæ›´å¼ºçš„é€‚åº”æ€§å’Œé²æ£’æ€§ã€‚è¿™è¡¨æ˜æ¨¡å‹çœŸæ­£å­¦åˆ°çš„æ˜¯â€œå¦‚ä½•æ¨ç†ä¸è§„åˆ’â€ï¼Œè€Œéâ€œå¦‚ä½•åº”å¯¹æŸä¸€ç±»å›ºå®šæ¨¡æ¿çš„é¢˜ç›®â€ã€‚</p>
</li>
<li>
<p><strong>æ•°æ®æ•ˆç‡ä¼˜è¶Š</strong>ï¼šåœ¨ RoboBrain 2.0 çš„æ•´ä½“è®­ç»ƒä¸­ï¼ŒReason-RFT ä»…ä½¿ç”¨ä¸åˆ° 5% çš„ CoT æ•°æ®è¿›è¡Œç¬¬ä¸€é˜¶æ®µæ¿€æ´»ï¼Œå…¶æœ€ç»ˆæ€§èƒ½å°±å¯è¾¾åˆ°æˆ–è¶…è¿‡ä½¿ç”¨ 100% CoT æ•°æ®è¿›è¡Œ SFT è®­ç»ƒçš„åŸºçº¿æ¨¡å‹ã€‚è¿™ä¸€ç‰¹æ€§å¯¹äºå…·èº«æ™ºèƒ½åœºæ™¯ä¸­æ˜‚è´µä¸”éš¾ä»¥å¤§è§„æ¨¡è·å–çš„é«˜è´¨é‡æ¨ç†æ ‡æ³¨ï¼Œå…·æœ‰é‡è¦çš„å®é™…ä»·å€¼ã€‚</p>
</li>
</ul>
<h3 data-id="heading-2"><strong>3 è®­ç»ƒä¸­çš„æœ‰è¶£å‘ç°ï¼šRoboBrainæ˜¯å¦‚ä½•â€œå­¦ä¼šæ€è€ƒâ€çš„ï¼Ÿ</strong></h3>
<p>åœ¨ RoboBrain 2.0 é›†æˆ Reason-RFT çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬è¿˜è§‚å¯Ÿåˆ°äº†ä¸€äº›é¢‡å…·å¯å‘æ€§çš„ç°è±¡ï¼Œå®ƒä»¬åœ¨ä¸€å®šç¨‹åº¦ä¸Šæ­ç¤ºäº†æ¨¡å‹å­¦ä¹ æ¨ç†æ—¶çš„â€œå†…éƒ¨è½¨è¿¹â€ï¼š</p>
<ul>
<li><strong>å¥–åŠ±åˆ†å±‚ï¼ˆGreedy Reward Stratificationï¼‰</strong></li>
</ul>
<p>è®­ç»ƒæ—©æœŸï¼ŒRoboBrain ä¼šä¼˜å…ˆè¿½æ±‚æ›´å®¹æ˜“è·å¾—çš„â€œæ ¼å¼å¥–åŠ±â€ï¼ˆä¾‹å¦‚è¾“å‡ºæ ¼å¼æ˜¯å¦è§„èŒƒï¼‰ï¼Œä¸ºäº†æœ€é«˜æ•ˆåœ°è·å–å¥–åŠ±ï¼Œæ¨¡å‹ä¼šå€¾å‘äºç”Ÿæˆç®€çŸ­çš„æ¨ç†å†…å®¹ï¼Œå¯¼è‡´æ¨ç†é•¿åº¦å…ˆæ˜æ˜¾å˜çŸ­ï¼›åœ¨æŒæ¡æ ¼å¼åï¼Œè®­ç»ƒé‡å¿ƒé€æ­¥è½¬å‘â€œå‡†ç¡®æ€§å¥–åŠ±â€ï¼Œå³æå‡å†…å®¹æœ¬èº«çš„æ­£ç¡®æ€§ä¸ä¸¥è°¨æ€§ï¼Œæ¨ç†é“¾æ¡ä¹Ÿéšä¹‹å˜é•¿ã€é€»è¾‘ç»“æ„å˜å¾—æ›´å¤æ‚ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/79825bd78cc34a5f8b5ca81c7e048691~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rqQ56CU56m26Zmi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766149276&amp;x-signature=pPuwmfUdVcpoumGrYBj672BD%2F4U%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<ul>
<li><strong>ç¬æ—¶é€‚åº”å·®è·ï¼ˆTransient Adaptation Gapï¼‰</strong></li>
</ul>
<p>å¯¹äºå®Œå…¨ä»é›¶å¼€å§‹è¿›è¡Œ RL è®­ç»ƒã€æœªç»è¿‡ SFT æ¿€æ´»çš„æ¨¡å‹ï¼Œåœ¨è®­ç»ƒèµ·å§‹é˜¶æ®µæ€§èƒ½ä¼šç»å†ä¸€ä¸ªçŸ­æš‚å´æ˜¾è‘—çš„ä¸‹æ»‘æœŸï¼Œç„¶åæ‰ç¼“æ…¢æ¢å¤ã€‚è¿™å¯ä»¥ç†è§£ä¸ºæ¨¡å‹è¢«è¿«ä»â€œç›´æ¥ç»™ç­”æ¡ˆâ€çš„ç›´è§‰æ¨¡å¼ï¼Œåˆ‡æ¢åˆ°â€œæ˜¾å¼ç”Ÿæˆæ¨ç†è¿‡ç¨‹â€çš„æ€è€ƒæ¨¡å¼ï¼Œåœ¨è¿™ä¸€åˆ‡æ¢è¿‡ç¨‹ä¸­å­˜åœ¨ä¸å¯é¿å…çš„é€‚åº”â€œé˜µç—›â€ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dc63294f42e342a5b30b54f559190267~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rqQ56CU56m26Zmi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766149276&amp;x-signature=qmT9SvBCWjHjhW9jIjsUXPmhV8Y%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<ul>
<li><strong>æ¨ç†å†—ä½™ï¼ˆReasoning Redundancyï¼‰</strong></li>
</ul>
<p>ä¸ä»é›¶ RL è®­ç»ƒçš„æ¨¡å‹ç›¸æ¯”ï¼Œç»è¿‡ CoT æ¿€æ´»çš„ RoboBrain 2.0 åœ¨æ¨ç†é˜¶æ®µå¾€å¾€æ›´â€œå¥è°ˆâ€ï¼Œå³ä¾¿ä¸¤è€…åœ¨æœ€ç»ˆå‡†ç¡®ç‡ä¸Šæ¥è¿‘ï¼Œå‰è€…å€¾å‘äºç”Ÿæˆæ›´ä¸ºè¯¦å°½çš„æ€ç»´é“¾ã€‚è¿™å¯èƒ½æ˜¯å› ä¸ºå®ƒåœ¨ç¬¬ä¸€é˜¶æ®µæ¨¡ä»¿äº†æ›´å¼ºæ¨¡å‹ï¼ˆå¦‚ GPT-4oï¼‰äº§ç”Ÿçš„ç»†è‡´æ¨ç†è¿‡ç¨‹ï¼Œå¹¶åœ¨ RL å¾®è°ƒåä»ä¿ç•™äº†è¿™ç§é£æ ¼ã€‚è¿™ä¸€ç°è±¡ä¸ºâ€œå¦‚ä½•è®©æ¨¡å‹åšåˆ°æ—¢æ€è€ƒå……åˆ†åˆè¡¨è¿°ç®€æ´â€æä¾›äº†æœ‰ä»·å€¼çš„ç ”ç©¶çº¿ç´¢ã€‚</p>
<h3 data-id="heading-3"><strong>4 å±•æœ›æœªæ¥ï¼šé¢å‘æ›´æ³›åŒ–çš„RoboBrainå¤šæ¨¡æ€ä¸å…·èº«æ™ºèƒ½</strong></h3>
<p>ä½œä¸º RoboBrain 2.0 è®­ç»ƒä½“ç³»ä¸­çš„é‡è¦ä¸€ç¯ï¼ŒReason-RFT ä¸ºå¤šæ¨¡æ€å¤§æ¨¡å‹å’Œå…·èº«æ™ºèƒ½æä¾›äº†ä¸€ç§<strong>æ›´é²æ£’ã€æ›´å…·æ³›åŒ–æ€§ã€ä¸”æ•°æ®æ•ˆç‡æ›´é«˜çš„è§†è§‰æ¨ç†ä¸å†³ç­–è®­ç»ƒèŒƒå¼</strong>ã€‚å®ƒä¸ä»…åœ¨å®è¯ä¸ŠéªŒè¯äº† <strong>â€œSFT æ¿€æ´» + RL å¢å¼ºâ€</strong> åœ¨çœŸå®åœºæ™¯ä»»åŠ¡ä¸­çš„æœ‰æ•ˆæ€§ï¼Œä¹Ÿä¸ºåç»­åœ¨å¤æ‚ç¯å¢ƒä¸‹çš„è§„åˆ’ã€æ§åˆ¶ä¸ååŒå¥ å®šäº†æ–¹æ³•åŸºç¡€ã€‚</p>
<p>RoboBrain 2.0 ä½¿ç”¨ä¼—æ™ºFlagOSå¤šèŠ¯ç‰‡å¼€æºç»Ÿä¸€æŠ€æœ¯æ ˆè¿›è¡Œå¤§è§„æ¨¡åˆ†å¸ƒå¼è®­ç»ƒå’Œé‡åŒ–æ¨ç†ï¼Œå¹¶é€šè¿‡FlagReleaseå‘å¸ƒäº†å¤šèŠ¯ç‰‡çš„æ¨¡å‹ç‰ˆæœ¬ã€‚</p>
<p>æ™ºæºç ”ç©¶é™¢å·²ä¸å…¨çƒ 30 ä½™å®¶æœºå™¨äººä¼ä¸šä¸é¡¶å°–å®éªŒå®¤å»ºç«‹åˆä½œï¼Œè¯šé‚€å…¨çƒå¼€å‘è€…ã€ç ”ç©¶è€…ä¸äº§ä¸šä¼™ä¼´åŠ å…¥ï¼Œæºæ‰‹å…±å»ºå¼€æ”¾ã€å¯ä¿¡ã€ç¹è£çš„å…·èº«æ™ºèƒ½ç”Ÿæ€ã€‚</p>
<h3 data-id="heading-4"><strong>å…³äº BAAI RoboBrain</strong></h3>
<p>RoboBrain æ˜¯æ™ºæºç ”ç©¶é™¢æ¨å‡ºçš„é¢å‘çœŸå®ç‰©ç†ç¯å¢ƒçš„â€œé€šç”¨å…·èº«å¤§è„‘â€ç³»ç»Ÿï¼Œé›†æ„ŸçŸ¥ã€æ¨ç†ä¸è§„åˆ’äºä¸€ä½“ï¼Œæ„å»ºäº†ä»å¤§è„‘è®¤çŸ¥åˆ°å°è„‘æ§åˆ¶çš„å®Œæ•´æŠ€æœ¯ä½“ç³»ï¼ŒåŒ…æ‹¬å…·èº«å¤§è„‘åŸºåº§æ¨¡å‹RoboBrain 2.0ã€é¢å‘3Dè½¨è¿¹ç”Ÿæˆçš„RoboBrain-SpatialTraceã€ç”¨äºå¼ºåŒ–å­¦ä¹ ç¨ å¯†å¥–åŠ±ç”Ÿæˆçš„RoboBrain-Dopamineã€é€šç”¨å°è„‘VLAæ¨¡å‹RoboBrain-X0 Proï¼Œä»¥åŠçµå·§æ‰‹åŸºåº§æ¨¡å‹RoboBrain-Dexã€‚</p>
<p>é…åˆè·¨æœ¬ä½“ååŒæ¡†æ¶RoboOS 2.0ï¼ŒRoboBrainæ—¨åœ¨ä¸ºå¼€å‘è€…æä¾›ç»Ÿä¸€ã€é«˜æ•ˆçš„å…·èº«æ™ºèƒ½åŸºç¡€è®¾æ–½ï¼Œè§£å†³ç©ºé—´ç†è§£ã€æ—¶é—´å»ºæ¨¡ä¸é•¿é“¾æ¨ç†ä¸‰å¤§ç“¶é¢ˆï¼ŒåŠ é€Ÿæœºå™¨äººè¿ˆå‘é€šç”¨å…·èº«æ™ºèƒ½ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Grafana LDAPé…ç½®æ•…éšœæ’æŸ¥ï¼šä»3å°æ—¶åˆ°10åˆ†é’Ÿçš„AIè¾…åŠ©è§£å†³æ–¹æ¡ˆ]]></title>    <link>https://juejin.cn/post/7582785032851898431</link>    <guid>https://juejin.cn/post/7582785032851898431</guid>    <pubDate>2025-12-12T10:28:59.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582785032851898431" data-draft-id="7582785032851865663" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Grafana LDAPé…ç½®æ•…éšœæ’æŸ¥ï¼šä»3å°æ—¶åˆ°10åˆ†é’Ÿçš„AIè¾…åŠ©è§£å†³æ–¹æ¡ˆ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-12T10:28:59.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="LambHappiness"/> <meta itemprop="url" content="https://juejin.cn/user/1136211138460633"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Grafana LDAPé…ç½®æ•…éšœæ’æŸ¥ï¼šä»3å°æ—¶åˆ°10åˆ†é’Ÿçš„AIè¾…åŠ©è§£å†³æ–¹æ¡ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1136211138460633/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    LambHappiness
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-12T10:28:59.000Z" title="Fri Dec 12 2025 10:28:59 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»14åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æœ¬æ–‡é€šè¿‡ä¸€ä¸ªçœŸå®æ¡ˆä¾‹ï¼Œå±•ç¤º Chaterm å¦‚ä½•åœ¨ 10 åˆ†é’Ÿå†…è§£å†³è¿ç»´äººå‘˜ 3 å°æ—¶æ— æ³•è§£å†³çš„ Grafana LDAP é…ç½®é—®é¢˜ã€‚è¯¦ç»†ä»‹ç» AI å¦‚ä½•ç³»ç»ŸåŒ–æ’æŸ¥ï¼šä»é—®é¢˜å®šä½ã€é…ç½®åˆ†æã€LDAP è¿æ¥æµ‹è¯•ï¼Œåˆ°ç²¾å‡†ä¿®å¤é…ç½®é”™è¯¯ï¼Œæœ€ç»ˆå®ç°æ”¯æŒå¤šç§ç™»å½•æ ¼å¼çš„ä¼˜åŒ–æ–¹æ¡ˆã€‚é€šè¿‡å¯¹æ¯”ä¼ ç»Ÿæ‰‹åŠ¨æ’æŸ¥å’Œ AI è¾…åŠ©æ’æŸ¥ï¼Œå±•ç¤º Chaterm åœ¨æå‡è¿ç»´æ•ˆç‡ã€é™ä½æ’æŸ¥æˆæœ¬ã€å¢å¼ºé—®é¢˜è§£å†³èƒ½åŠ›æ–¹é¢çš„æŠ€æœ¯ä¼˜åŠ¿ã€‚</p>
</blockquote>
<hr/>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1c32cf206e864b79839276202e43c01c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTGFtYkhhcHBpbmVzcw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766140138&amp;x-signature=2oHvCWkxKnewXhyEjAoSvYEsvWI%3D" alt="" loading="lazy"/></p>
<blockquote>
<p>â€œå‡Œæ™¨ 2 ç‚¹ï¼Œä½ è¿˜åœ¨å¯¹ç€æ»¡å±çš„é”™è¯¯æ—¥å¿—å‘æ„...â€</p>
</blockquote>
<p>é…ç½®æ”¹äº†ï¼Œé‡å¯äº†ï¼Œæ—¥å¿—çœ‹äº†ï¼Œè¿˜æ˜¯ç™»ä¸è¿›å»... æœç´¢å¼•æ“å‰ 10 é¡µçš„æ–¹æ¡ˆè¯•äº†ä¸ªéï¼Œé—®é¢˜ä¾ç„¶å­˜åœ¨ã€‚</p>
<p>ç›¸ä¿¡æ¯ä¸ªæè¿ç»´çš„æœ‹å‹ï¼Œéƒ½ç»å†è¿‡è¿™ç§ â€œè¢«é…ç½®æ”¯é…çš„ç»æœ›æ—¶åˆ»â€ ã€‚å°¤å…¶æ˜¯æ¶‰åŠåˆ° LDAP æ¥å…¥è¿™ç§ç„å­¦é…ç½®ï¼Œå¸¸å¸¸ä¸€å¡å°±æ˜¯ä¸€æ•´å¤œã€‚</p>
<p>ä»Šå¤©ï¼Œæˆ‘å°±ç»™å¤§å®¶åˆ†äº«ä¸€ä¸ªå‰å‡ å¤©å‘ç”Ÿçš„çœŸå®æ¡ˆä¾‹ã€‚æˆ‘ä¸€ä¸ªæè¿ç»´å¿«å…«å¹´çš„æœ‹å‹ï¼Œè¢«ä¸€ä¸ªÂ <strong>Grafana æ¥å…¥ LDAP</strong>Â çš„å°é—®é¢˜æŠ˜è…¾äº†Â <strong>3 å°æ—¶</strong>ã€‚æœ€åï¼Œä»–è¯•äº†ä¸€ä¸ªæˆ‘ä»¬å†…éƒ¨åœ¨ç”¨çš„Â <strong>AI è¾…åŠ©æ’æŸ¥å·¥å…·ï¼Œ10 åˆ†é’Ÿ</strong>ï¼Œé—®é¢˜æ ¹æºè¢«æªäº†å‡ºæ¥ï¼</p>
<p>å’±ä»¬ä¸èŠäº§å“ï¼ŒåªèŠæ’æŸ¥æ€è·¯å’ŒæŠ€æœ¯å¹²è´§ã€‚</p>
<h3 data-id="heading-0">æœ‹å‹å°ä¸°çš„æ¡ˆä¾‹</h3>
<p><strong>ä»»åŠ¡ï¼š</strong> Â é…ç½® Grafana æ¥å…¥å…¬å¸ LDAPï¼Œæ–¹ä¾¿åŒäº‹èƒ½ç»Ÿä¸€ç™»å½•</p>
<p>æŒ‰ç…§æ–‡æ¡£ä¸€æ­¥æ­¥é…ç½®ï¼Œæ£€æŸ¥äº† 3 éï¼Œç¡®è®¤æ²¡é—®é¢˜ã€‚è¾“å…¥ç”¨æˆ·åå¯†ç ï¼Œç‚¹å‡»ç™»å½•...</p>
<p><strong>âŒ ç™»å½•å¤±è´¥ï¼</strong></p>
<p>æŸ¥çœ‹æ—¥å¿—æŠ¥é”™ï¼š</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-attr">[password-auth.failed]</span> <span class="hljs-selector-tag">failed</span> <span class="hljs-selector-tag">to</span> <span class="hljs-selector-tag">authenticate</span> <span class="hljs-selector-tag">identity</span>:
<span class="hljs-selector-attr">[identity.not-found]</span> <span class="hljs-selector-tag">no</span> <span class="hljs-selector-tag">user</span> <span class="hljs-selector-tag">found</span>: <span class="hljs-selector-tag">did</span> <span class="hljs-selector-tag">not</span> <span class="hljs-selector-tag">find</span> <span class="hljs-selector-tag">a</span> <span class="hljs-selector-tag">user</span>
</code></pre>
<p>æ—¥å¿—æ˜¾ç¤ºæ‰¾ä¸åˆ° ldap ç”¨æˆ·ï¼Œå°ä¸°ç«‹åˆ»å¼€å§‹äº†<strong>æ ‡å‡†æ’æŸ¥æµç¨‹</strong>ï¼š</p>
<ol>
<li><strong>é…ç½®è‡ªæŸ¥</strong>ï¼šæ–‡ä»¶è·¯å¾„ã€LDAP åœ°å€ã€ç«¯å£å·ï¼Œå…¨éƒ¨æ ¸å¯¹ï¼Œldap.toml çœ‹èµ·æ¥æ²¡é—®é¢˜ã€‚</li>
<li><strong>ç½‘ç»œæµ‹è¯•</strong>ï¼štelnetã€nc ä¸€é¡¿æ“ä½œï¼Œç«¯å£é€šï¼Œç½‘ç»œæ²¡é—®é¢˜ã€‚</li>
<li><strong>æ—¥å¿—æ·±æŒ–</strong>ï¼šå‘ç° Grafana é»˜è®¤æ—¥å¿—å¤ªç®€æ´ï¼Œæ ¹æœ¬çœ‹ä¸å‡ºå®ƒåˆ°åº•ç”¨ä»€ä¹ˆå­—æ®µå»æŸ¥ç”¨æˆ·ã€‚</li>
<li><strong>å„ç§æœç´¢</strong>ï¼šå‘ç°å¤§éƒ¨åˆ†æ–¹æ¡ˆéƒ½å›´ç»•ç€ bind_dn æˆ– search_filter æ‰“è½¬ï¼Œä½†æ”¹äº†éƒ½æ²¡ç”¨ã€‚</li>
</ol>
<p>æ—¶é—´ä¸€ç‚¹ä¸€ç‚¹è¿‡å»äº†ï¼Œå°ä¸°çš„å¿ƒæ€ä¹Ÿä¸€ç‚¹ä¸€ç‚¹å´©å¡Œäº†...å¤œæ·±äº†ï¼Œä»–å†³å®šå…ˆæ”¾å¼ƒã€‚</p>
<p>ç¬¬äºŒå¤©ï¼Œå°ä¸°å†³å®šæ¢ä¸ªæ€è·¯ã€‚ä»–æ‰¾æ¥äº†æˆ‘ä»¬å†…éƒ¨ç”¨æ¥åšè¾…åŠ©æ’æŸ¥çš„å·¥å…· Chatermï¼ŒæŠŠæ˜¨æ™šçš„é”™è¯¯æ—¥å¿—ã€Grafana é…ç½®è·¯å¾„ï¼Œä»¥åŠä¸€å¥ â€œå¸®æˆ‘çœ‹çœ‹â€ æ‰”äº†è¿›å»ã€‚</p>
<p><strong>10 åˆ†é’Ÿåï¼ŒAI ç»™å‡ºäº†å®Œç¾çš„ä¿®å¤æ–¹æ¡ˆã€‚</strong></p>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹è¿™ä¸ª AI Agent æ˜¯å¦‚ä½•ä¸€æ­¥æ­¥æ‰¾åˆ°é—®é¢˜çš„ï¼Œè¿™å¥—æ€è·¯éå¸¸å€¼å¾—æˆ‘ä»¬å­¦ä¹ ã€‚</p>
<h2 data-id="heading-1">å®æˆ˜å¼€å§‹</h2>
<h3 data-id="heading-2">ğŸ¯ ç¬¬ä¸€æ­¥ï¼šæ ¸å¿ƒé—®é¢˜å®šä½</h3>
<p>å¤åˆ¶é”™è¯¯æ—¥å¿—ï¼Œç²˜è´´ç»™ Chaterm</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">logger</span>=authn.service ... error=<span class="hljs-string">"[password-auth.failed] failed to authenticate identity:
[identity.not-found] no user found: did not find a user"</span>
grafanaæ¥å…¥ldapç™»é™†æŠ¥é”™ï¼Œé…ç½®æ–‡ä»¶åœ¨/etc/grafanaç›®å½•ï¼Œåˆ†æä¸‹åŸå› 
</code></pre>
<p>Chaterm çš„å›åº”ï¼š</p>
<blockquote>
<p>"...è®¤è¯å¤±è´¥åŸå› æ˜¯'ç”¨æˆ·æœªæ‰¾åˆ°'ã€‚è®©æˆ‘å…ˆæ£€æŸ¥é…ç½®æ–‡ä»¶ã€‚"</p>
</blockquote>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e4d11a347023488b9d82e82ec1607fb5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTGFtYkhhcHBpbmVzcw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766140138&amp;x-signature=ceBmUq565uQ03YrS%2B5SO8cGYYLM%3D" alt="" loading="lazy"/></p>
<p>äºæ˜¯é”å®šäº†æ ¸å¿ƒé—®é¢˜ï¼šè®¤è¯å¤±è´¥ä¸åœ¨äºå¯†ç é”™è¯¯ï¼Œè€Œåœ¨äº Grafana å‹æ ¹æ²¡æ‰¾åˆ°è¿™ä¸ªç”¨æˆ·ã€‚</p>
<h3 data-id="heading-3">ğŸ” ç¬¬äºŒæ­¥ï¼šç³»ç»ŸåŒ–æ’æŸ¥</h3>
<p>å°±åƒä¾¦æ¢ç ´æ¡ˆä¸€æ ·ï¼ŒChaterm æŒ‰æ­¥éª¤æ¥ï¼Œæ¯ä¸€æ­¥éƒ½æ¸…æ™°å¯è§ï¼š</p>
<h4 data-id="heading-4">2.1 ç¡®è®¤é…ç½®æ–‡ä»¶ä½ç½®ï¼š</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">ls</span> -la /etc/grafana/
</code></pre>
<p>æ‰¾åˆ°äº†Â <code>ldap.toml</code>Â é…ç½®æ–‡ä»¶</p>
<h4 data-id="heading-5">2.2 è¯»å–å¹¶åˆ†ææ ¸å¿ƒé…ç½®å†…å®¹ï¼š</h4>
<pre><code class="hljs language-bash" lang="bash">sudo <span class="hljs-built_in">cat</span> /etc/grafana/ldap.toml
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1f88d6fc35b1419693bd5093b162cc88~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTGFtYkhhcHBpbmVzcw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766140138&amp;x-signature=pzWeeeYYUPhjmh9GQkNjnGJzFlY%3D" alt="" loading="lazy"/></p>
<p><strong>AI å‘ç°äº† 3 ä¸ªå¯ç–‘ç‚¹ï¼ˆè¿™å°±æ˜¯é—®é¢˜æ‰€åœ¨ï¼ï¼‰ï¼š</strong></p>
<ol>
<li>
<p><strong>é”™è¯¯ 1ï¼š</strong> Â <code>search_filter = "(sAMAccountName=%s)"</code></p>
<ul>
<li><strong>é—®é¢˜ï¼š</strong> Â è¿™ä¸ªå±æ€§å¯èƒ½ä¸å­˜åœ¨ï¼ˆè¿™æ˜¯ Windows AD ä¸“ç”¨çš„ï¼Œæ ‡å‡† LDAP æ²¡æœ‰ï¼‰</li>
<li><strong>å½±å“ï¼š</strong> Â ç³»ç»Ÿç”¨è¿™ä¸ªå±æ€§æ‰¾ç”¨æˆ·ï¼Œå½“ç„¶æ‰¾ä¸åˆ°ï¼</li>
</ul>
</li>
<li>
<p><strong>å¯ç–‘ 2ï¼š</strong> Â <code>username = "sn"</code></p>
<ul>
<li><strong>é—®é¢˜ï¼š</strong> Â ç”¨å§“æ°å½“ç”¨æˆ·åï¼Ÿæœ‰ç‚¹å¥‡æ€ª</li>
<li><strong>å½±å“ï¼š</strong> Â å¯èƒ½å¯¼è‡´ç”¨æˆ·åæ ¼å¼ä¸åŒ¹é…</li>
</ul>
</li>
<li>
<p><strong>å¯ç–‘ 3ï¼š</strong> Â <code>bind_dn = "cn=ldap@email.com,ou=user,dc=email,dc=com"</code></p>
<ul>
<li><strong>é—®é¢˜ï¼š</strong> Â æ ¼å¼çœ‹èµ·æ¥ä¸å¤ªæ ‡å‡†</li>
<li><strong>å½±å“ï¼š</strong> Â å¯èƒ½è¿æ¥å¤±è´¥</li>
</ul>
</li>
</ol>
<p><strong>è¿™å°±æ˜¯ AI çš„å‰å®³ä¹‹å¤„ï¼š</strong> Â ä¸€çœ¼å°±èƒ½çœ‹å‡ºé…ç½®ä¸­çš„æ½œåœ¨é—®é¢˜ï¼Œå°±åƒç»éªŒä¸°å¯Œçš„è¿ç»´ä¸“å®¶ï¼ä½ æ‰‹åŠ¨æ£€æŸ¥å¯èƒ½è¦èŠ± 30 åˆ†é’Ÿï¼ŒAI ç§’æ‡‚ï¼</p>
<h4 data-id="heading-6">2.3 æµ‹è¯•è¿æ¥</h4>
<p>AI è‡ªåŠ¨æµ‹è¯•ç½‘ç»œè¿æ¥ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">timeout</span> 5 bash -c <span class="hljs-string">"echo &gt; /dev/tcp/192.168.1.1/3893"</span>
</code></pre>
<p><strong>ç»“æœï¼š</strong> Â ç½‘ç»œè¿æ¥æ­£å¸¸ï¼Œç«¯å£ 3893 èƒ½é€š</p>
<p><strong>ç»“è®ºï¼š</strong> Â ç½‘ç»œæ²¡é—®é¢˜ï¼Œé—®é¢˜åœ¨é…ç½®ï¼</p>
<h4 data-id="heading-7">2.4 æŸ¥çœ‹"æ¡ˆå‘è®°å½•"ï¼ˆæ—¥å¿—ä¿¡æ¯ï¼‰</h4>
<p>AI è‡ªåŠ¨æŸ¥çœ‹è¯¦ç»†æ—¥å¿—ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">sudo <span class="hljs-built_in">tail</span> -100 /var/log/grafana/grafana.log | grep -i <span class="hljs-string">"ldap|authn"</span>
</code></pre>
<p>å‘ç°ï¼š æ—¥å¿—å¤ªç®€å•äº†ï¼Œçœ‹ä¸åˆ°å…·ä½“çš„æœç´¢è¿‡ç¨‹ï¼Œéœ€è¦æ›´è¯¦ç»†çš„è°ƒè¯•ä¿¡æ¯ã€‚</p>
<p>AI åˆ¤æ–­ï¼š éœ€è¦æ·±å…¥è°ƒæŸ¥ï¼Œç›´æ¥æµ‹è¯• LDAP è¿æ¥ï¼</p>
<h3 data-id="heading-8">ğŸ§° ç¬¬ä¸‰æ­¥ï¼šæ·±å…¥è°ƒæŸ¥ï¼Œå¯åŠ¨ä¸“ä¸šå·¥å…·</h3>
<h4 data-id="heading-9">3.1 è‡ªåŠ¨å®‰è£… LDAP å®¢æˆ·ç«¯å·¥å…·ï¼š</h4>
<pre><code class="hljs language-ini" lang="ini">sudo yum install -y openldap-clients --disable <span class="hljs-attr">repo</span>=grafana
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c92caf6155c34175835358be6f929869~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTGFtYkhhcHBpbmVzcw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766140138&amp;x-signature=3J0yw%2F3JNvzsILQJW65mGGiEJeQ%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-10">3.2 æµ‹è¯•ä¸åŒçš„è¿æ¥æ–¹å¼</h4>
<p>AI è‡ªåŠ¨è¯•é”™ï¼Œå°è¯•ä¸åŒçš„è¿æ¥æ ¼å¼ï¼Œçœ‹å“ªä¸ªèƒ½æˆåŠŸï¼š</p>
<p><strong>å°è¯• 1ï¼šæ ‡å‡†æ ¼å¼ï¼ˆå¤±è´¥ï¼‰</strong></p>
<pre><code class="hljs language-csharp" lang="csharp">ldapsearch -x -H ldap:<span class="hljs-comment">//192.168.1.1:3893 \</span>
-D <span class="hljs-string">"cn=ldap,ou=user,dc=email,dc=com"</span> \
-w password -b <span class="hljs-string">"dc=email,dc=com"</span> \
<span class="hljs-string">"(objectClass=person)"</span> dn

<span class="hljs-meta"># ç»“æœï¼šâŒ ldap_bind: Invalid credentials (49) - è®¤è¯å¤±è´¥</span>
</code></pre>
<p><strong>å°è¯• 2ï¼šåŸå§‹æ ¼å¼ï¼ˆæˆåŠŸï¼ï¼‰</strong></p>
<pre><code class="hljs language-perl" lang="perl">ldapsearch -<span class="hljs-keyword">x</span> -H ldap:<span class="hljs-regexp">//</span><span class="hljs-number">192.168</span>.<span class="hljs-number">1.1</span>:<span class="hljs-number">3893</span> \
-D <span class="hljs-string">"cn=ldap@email.com,ou=user,dc=email,dc=com"</span> \
-w password -b <span class="hljs-string">"dc=email,dc=com"</span> \
<span class="hljs-string">"(objectClass=*)"</span> dn
</code></pre>
<p><strong>ç»“æœï¼š</strong> Â æ‰¾åˆ°äº†ç”¨æˆ·åˆ—è¡¨ï¼å‘ç°ç”¨æˆ·çš„æ ¼å¼æ˜¯Â <code>cn=ç”¨æˆ·å@email.com</code></p>
<p><strong>AI å‘ç°ï¼š</strong> Â è¿æ¥æ ¼å¼éœ€è¦å¸¦Â <code>@email.com</code>Â åç¼€ï¼</p>
<h4 data-id="heading-11">3.3 æŸ¥çœ‹"ç”¨æˆ·æ¡£æ¡ˆ"ï¼ˆå®é™…å±æ€§ï¼‰</h4>
<p>AI æŸ¥çœ‹ä¸€ä¸ªå…·ä½“ç”¨æˆ·çš„å®Œæ•´ä¿¡æ¯ï¼š</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">ldapsearch</span> <span class="hljs-selector-tag">-x</span> <span class="hljs-selector-tag">-H</span> <span class="hljs-selector-tag">ldap</span>:<span class="hljs-comment">//192.168.1.1:3893 \</span>
<span class="hljs-selector-tag">-D</span> "<span class="hljs-selector-tag">cn</span>=<span class="hljs-selector-tag">ldap</span>@<span class="hljs-selector-tag">email</span><span class="hljs-selector-class">.com</span>,<span class="hljs-selector-tag">ou</span>=<span class="hljs-selector-tag">user</span>,<span class="hljs-selector-tag">dc</span>=<span class="hljs-selector-tag">email</span>,<span class="hljs-selector-tag">dc</span>=<span class="hljs-selector-tag">com</span>" \
<span class="hljs-selector-tag">-w</span> <span class="hljs-selector-tag">password</span> <span class="hljs-selector-tag">-b</span> "<span class="hljs-selector-tag">dc</span>=<span class="hljs-selector-tag">email</span>,<span class="hljs-selector-tag">dc</span>=<span class="hljs-selector-tag">com</span>" \
"(cn=zhang_san<span class="hljs-variable">@email</span>.com)"
</code></pre>
<p><strong>å…³é”®å‘ç°ï¼ˆè¿™å°±æ˜¯é—®é¢˜æ‰€åœ¨ï¼ï¼‰ï¼š</strong> Â AI é€šè¿‡ ldapsearch å‘½ä»¤æŸ¥çœ‹äº†ä¸€ä¸ªç”¨æˆ·çš„å®Œæ•´å±æ€§ï¼š</p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">dn: cn=zhang_san@email.com,ou=user,dc=email,dc=com</span>
<span class="hljs-section">cn: zhang_san@email.com</span>
<span class="hljs-section">uid: zhang_san@email.com â† ğŸ”´ æ³¨æ„ï¼šuidæ˜¯å®Œæ•´é‚®ç®±æ ¼å¼ï¼</span>
<span class="hljs-section">sn: zhang_san â† è¿™æ˜¯ç”¨æˆ·åå‰ç¼€</span>
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f9e67cf1512b4a2f94da5d68e123c3ef~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTGFtYkhhcHBpbmVzcw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766140138&amp;x-signature=bHVbZsDVei1j9eg2C%2BTWCz%2B8aWk%3D" alt="" loading="lazy"/></p>
<p><strong>çœŸç›¸å¤§ç™½ï¼é—®é¢˜æ‰¾åˆ°äº†ï¼š</strong></p>




















<table><thead><tr><th>å®é™…æƒ…å†µ</th><th>é…ç½®ä¸­çš„è®¾ç½®</th><th>ç»“æœ</th></tr></thead><tbody><tr><td>LDAP ä¸­çš„ uid æ˜¯ï¼š<code>zhang_san@email.com</code></td><td>æœç´¢è¿‡æ»¤å™¨ç”¨ï¼š<code>(sAMAccountName=%s)</code></td><td>âŒ è¿™ä¸ªå±æ€§æ ¹æœ¬ä¸å­˜åœ¨ï¼</td></tr><tr><td>ç”¨æˆ·ç™»å½•è¾“å…¥ï¼š<code>zhang_san</code></td><td>é…ç½®ç”¨ï¼š<code>username = "sn"</code></td><td>âŒ æ ¼å¼ä¸åŒ¹é…ï¼</td></tr></tbody></table>
<p>ç®€å•æ¥è¯´ï¼š</p>
<ul>
<li>å°ä¸°è¾“å…¥â€˜zhang_sanâ€™ç™»å½•</li>
<li>ç³»ç»Ÿç”¨Â <code>sAMAccountName</code>Â å±æ€§å»æ‰¾ï¼ˆä½†è¿™ä¸ªå±æ€§ä¸å­˜åœ¨ï¼‰</li>
<li>LDAP ä¸­å®é™…å­˜å‚¨çš„æ˜¯Â <code>uid=zhang_san@email.com</code>ï¼ˆå®Œæ•´é‚®ç®±æ ¼å¼ï¼‰</li>
<li>æ‰€ä»¥æ‰¾ä¸åˆ°ç”¨æˆ·ï¼</li>
</ul>
<p>å°±åƒä½ è¦æ‰¾"å¼ ä¸‰"ï¼Œä½†ç³»ç»Ÿåœ¨æ‰¾"å¼  sAMAccountName"ï¼Œå½“ç„¶æ‰¾ä¸åˆ°ï¼</p>
<h3 data-id="heading-12">ğŸ› ï¸ ç¬¬å››æ­¥ï¼šä¸€é”®ä¿®å¤</h3>
<p>ç¡®å®šæ ¹æºåï¼ŒAI å¼€å§‹æ‰§è¡Œä¿®å¤ã€‚</p>
<p><strong>è¿ç»´å¥½ä¹ æƒ¯</strong>ï¼š ä¿®æ”¹å‰å…ˆå¤‡ä»½ï¼Œé¿å…è¯¯æ“ä½œï¼ˆè¿™ç‚¹å¾ˆé‡è¦ï¼ï¼‰</p>
<h4 data-id="heading-13">4.1 å¤‡ä»½ï¼ˆå®‰å…¨ç¬¬ä¸€ï¼‰</h4>
<p>è‡ªåŠ¨å¤‡ä»½é…ç½®æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">sudo <span class="hljs-built_in">cp</span> /etc/grafana/ldap.toml /etc/grafana/ldap.toml.backup
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8d6f602bde5643f598f7117fa42efc5f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTGFtYkhhcHBpbmVzcw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766140138&amp;x-signature=vlVd9PKgdG2swdLd7eQy89rA7%2F8%3D" alt="" loading="lazy"/></p>
<p>ğŸ’¡ å¦‚æœä½ ä¸è®°å¾—ï¼Œ<strong>Chaterm ä¼šè‡ªåŠ¨å¤‡ä»½</strong>ã€‚ä¸‡ä¸€æ”¹é”™äº†ï¼Œè¿˜èƒ½æ¢å¤ï¼</p>
<h4 data-id="heading-14">4.2 ä¿®å¤æ ¸å¿ƒé—®é¢˜</h4>
<p><strong>é—®é¢˜ï¼š</strong> Â ç”¨äº†ä¸å­˜åœ¨çš„å±æ€§Â <code>sAMAccountName</code>ï¼ˆè¿™æ˜¯ Windows AD ä¸“ç”¨çš„ï¼‰</p>
<p><strong>è§£å†³ï¼š</strong> Â æ”¹æˆå®é™…å­˜åœ¨çš„Â <code>uid</code></p>
<p>AI è‡ªåŠ¨ä¿®æ”¹é…ç½®ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># ä¿®æ”¹å‰ï¼šsearch_filter = "(sAMAccountName=%s)" âŒ</span>
<span class="hljs-comment"># ä¿®æ”¹åï¼šsearch_filter = "(uid=%s)" âœ…</span>
sudo sed -i 's/^<span class="hljs-attr">search_filter</span> = <span class="hljs-string">"(sAMAccountName=%s)"</span>/search_filter = <span class="hljs-string">"(uid=%s)"</span>/<span class="hljs-string">' /etc/grafana/ldap.toml
</span></code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/29af6c97decb453dbeb68bb6af264088~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTGFtYkhhcHBpbmVzcw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766140138&amp;x-signature=Ypa5TMYeGJEMB5VkjML1Ju5tFLw%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-15">4.3 ä¿®å¤ç”¨æˆ·åæ˜ å°„</h4>
<p><strong>é—®é¢˜ï¼š</strong> Â ç”¨å§“æ°Â <code>sn</code>Â å½“ç”¨æˆ·åï¼ˆæ ¼å¼ä¸å¯¹ï¼‰</p>
<p><strong>è§£å†³ï¼š</strong> Â æ”¹æˆç”¨æˆ· IDÂ <code>uid</code></p>
<p>AI è‡ªåŠ¨ä¿®æ”¹ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># ä¿®æ”¹å‰ï¼šusername = "sn" âŒ</span>
<span class="hljs-comment"># ä¿®æ”¹åï¼šusername = "uid" âœ…</span>
sudo sed -i 's/^<span class="hljs-attr">username</span> = <span class="hljs-string">"sn"</span>/username = <span class="hljs-string">"uid"</span>/<span class="hljs-string">' /etc/grafana/ldap.toml
</span></code></pre>
<h4 data-id="heading-16">4.4 å¼€å¯è°ƒè¯•æ—¥å¿—ï¼ˆæ–¹ä¾¿ä»¥åæ’æŸ¥ï¼‰</h4>
<p>AI è‡ªåŠ¨å¼€å¯è¯¦ç»†æ—¥å¿—ï¼š</p>
<pre><code class="hljs language-css" lang="css">sudo sed -<span class="hljs-selector-tag">i</span> '/^<span class="hljs-selector-attr">[log]</span>/<span class="hljs-selector-tag">a</span> filters = ldap:debug<span class="hljs-string">' /etc/grafana/grafana.ini
</span></code></pre>
<p><strong>å¥½å¤„ï¼š</strong> Â ä»¥åå‡ºé—®é¢˜ï¼Œæ—¥å¿—ä¼šæ›´è¯¦ç»†ï¼Œå®¹æ˜“å®šä½ã€‚</p>
<h4 data-id="heading-17">4.5 é‡å¯æœåŠ¡ï¼ˆè®©é…ç½®ç”Ÿæ•ˆï¼‰</h4>
<p>AI è‡ªåŠ¨é‡å¯æœåŠ¡ï¼š</p>
<pre><code class="hljs language-vbscript" lang="vbscript">sudo systemctl restart grafana-<span class="hljs-built_in">server</span>
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3f72400fc6af4db2ba5820973a4f26d1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTGFtYkhhcHBpbmVzcw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766140138&amp;x-signature=PX1ndAwiEkYB8pQw1UJttfh4R00%3D" alt="" loading="lazy"/></p>
<p>å®Œæˆï¼æ‰€æœ‰ä¿®æ”¹éƒ½æ˜¯Â <strong>Chaterm</strong>è‡ªåŠ¨å®Œæˆçš„ï¼Œä½ åªéœ€ç¡®è®¤ç»“æœã€‚</p>
<h3 data-id="heading-18">ğŸ”„ ç¬¬äº”æ­¥ï¼šè¿˜æœ‰é—®é¢˜ï¼ŸChaterm ç»§ç»­æ·±æŒ–</h3>
<p>é‡å¯åï¼Œä½ å†æ¬¡å°è¯•ç™»å½•ï¼Œè¿˜æ˜¯å¤±è´¥ã€‚</p>
<p>ä½ å‘Šè¯‰ Chatermï¼š "è¿˜æ˜¯ç™»ä¸è¿›å»"</p>
<p>Chaterm ç«‹å³æŸ¥çœ‹è°ƒè¯•æ—¥å¿—ï¼ˆç°åœ¨æœ‰è¯¦ç»†æ—¥å¿—äº†ï¼‰ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">sudo <span class="hljs-built_in">tail</span> -50 /var/log/grafana/grafana.log | grep -i <span class="hljs-string">"ldap"</span>
</code></pre>
<p><strong>æ–°çš„å‘ç°ï¼š</strong></p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">logger</span>=ldap ... msg=<span class="hljs-string">"LDAP SearchRequest"</span>
<span class="hljs-attr">searchRequest</span>=<span class="hljs-string">"Filter:(|(uid=zhang_san)) ..."</span> â† ğŸ”´ æœç´¢çš„æ˜¯ zhang_san
<span class="hljs-attr">logger</span>=ldap ... msg=<span class="hljs-string">"unable to login with LDAP"</span>
<span class="hljs-attr">error</span>=<span class="hljs-string">"can't find user in LDAP"</span> â† âŒ è¿˜æ˜¯æ‰¾ä¸åˆ°
</code></pre>
<p><strong>é—®é¢˜æ‰¾åˆ°äº†ï¼š</strong></p>
<ul>
<li>ç³»ç»Ÿæœç´¢çš„æ˜¯ï¼š<code>uid=zhang_san</code>ï¼ˆä½ è¾“å…¥çš„ç”¨æˆ·åï¼‰</li>
<li>ä½† LDAP ä¸­å®é™…å­˜å‚¨çš„æ˜¯ï¼š<code>uid=zhang_san@email.com</code>ï¼ˆå®Œæ•´é‚®ç®±æ ¼å¼ï¼‰</li>
<li><strong>æ ¼å¼ä¸åŒ¹é…ï¼</strong></li>
</ul>
<p><strong>å°±åƒä½ è¦æ‰¾"å¼ ä¸‰"ï¼Œä½†ç³»ç»Ÿåœ¨æ‰¾"å¼ ä¸‰"ï¼ˆæ²¡æœ‰åç¼€ï¼‰ï¼Œè€Œå®é™…å­˜å‚¨çš„æ˜¯"å¼ ä¸‰@å…¬å¸.com"</strong></p>
<h4 data-id="heading-19">5.1 å†æ¬¡éªŒè¯ï¼ˆç¡®è®¤é—®é¢˜ï¼‰</h4>
<p>Chaterm å†æ¬¡éªŒè¯ï¼Œç¡®è®¤ç”¨æˆ·çš„ uid ç¡®å®æ˜¯å®Œæ•´é‚®ç®±æ ¼å¼ï¼š</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">ldapsearch</span> ... "(uid=zhang_san<span class="hljs-variable">@email</span>.com)" <span class="hljs-selector-tag">dn</span> <span class="hljs-selector-tag">uid</span>
</code></pre>
<p><strong>ç»“æœï¼š</strong> Â ç¡®è®¤ç”¨æˆ·çš„ uid ç¡®å®æ˜¯å®Œæ•´é‚®ç®±æ ¼å¼</p>
<h4 data-id="heading-20">5.2 ç»ˆæè§£å†³æ–¹æ¡ˆï¼šæ”¯æŒå¤šç§ç™»å½•æ–¹å¼</h4>
<p>Chaterm çš„æ€è·¯ï¼š è®©æœç´¢è¿‡æ»¤å™¨æ”¯æŒå¤šç§æ ¼å¼ï¼Œç”¨æˆ·æ€ä¹ˆè¾“å…¥éƒ½èƒ½æ‰¾åˆ°ï¼</p>
<pre><code class="hljs language-less" lang="less"># ä¿®æ”¹ä¸ºæ”¯æŒä¸‰ç§ç™»å½•æ–¹å¼ï¼š
# <span class="hljs-number">1</span>. è¾“å…¥å®Œæ•´é‚®ç®±ï¼š<span class="hljs-selector-tag">zhang_san</span>@<span class="hljs-selector-tag">email</span><span class="hljs-selector-class">.com</span> â†’ ç›´æ¥åŒ¹é…
# <span class="hljs-number">2</span>. è¾“å…¥ç”¨æˆ·åï¼š<span class="hljs-selector-tag">zhang_san</span> â†’ åŒ¹é…<span class="hljs-selector-tag">sn</span>å±æ€§
# <span class="hljs-number">3</span>. è‡ªåŠ¨è¿½åŠ åŸŸåï¼š<span class="hljs-selector-tag">zhang_san</span> â†’ åŒ¹é…<span class="hljs-selector-tag">uid</span>=<span class="hljs-selector-tag">zhang_san</span>@<span class="hljs-selector-tag">email</span><span class="hljs-selector-class">.com</span>
<span class="hljs-selector-tag">sudo</span> <span class="hljs-selector-tag">sed</span> <span class="hljs-selector-tag">-i</span> '<span class="hljs-selector-tag">s</span>#^<span class="hljs-selector-tag">search_filter</span> = "(uid=%s)"<span class="hljs-selector-id">#search_filter</span> = "(|(uid=%s)(uid=%s<span class="hljs-variable">@email</span>.com)(sn=%s))"#' /<span class="hljs-selector-tag">etc</span>/<span class="hljs-selector-tag">grafana</span>/<span class="hljs-selector-tag">ldap</span><span class="hljs-selector-class">.toml</span>
</code></pre>
<p><strong>æœ€ç»ˆé…ç½®ï¼ˆä¸‡èƒ½æœç´¢ï¼‰ï¼š</strong></p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">search_filter</span> = "(|(uid=%s)(uid=%s<span class="hljs-variable">@email</span>.com)(sn=%s))"
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b244d0b0398d4d6094dec6ec4433e871~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTGFtYkhhcHBpbmVzcw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766140138&amp;x-signature=AYDrADThkO5M2BgGRaNQzb15Zbs%3D" alt="" loading="lazy"/></p>
<p>è¿™æ˜¯æœ€äº®çœ¼çš„ä¸€æ­¥ï¼Œä¸ºäº†è§£å†³ç”¨æˆ·è¾“å…¥æ ¼å¼ä¸ä¸€è‡´çš„é—®é¢˜ï¼ŒChaterm å¹¶æ²¡æœ‰è®©å°ä¸°å»æ”¹ç™»å½•ä¹ æƒ¯ï¼Œè€Œæ˜¯ä¼˜åŒ–äº†æœç´¢é€»è¾‘ã€‚</p>
<p><strong>è¿™ä¸ªé…ç½®æœ‰å¤šå¼ºï¼Ÿ</strong></p>
<ul>
<li>ç”¨æˆ·è¾“å…¥Â <code>zhang_san@email.com</code>Â â†’ ç›´æ¥åŒ¹é…Â <code>uid=zhang_san@email.com</code></li>
<li>ç”¨æˆ·è¾“å…¥Â <code>zhang_san</code>Â â†’ åŒ¹é…Â <code>sn=zhang_san</code>Â æˆ–Â <code>uid=zhang_san@email.com</code></li>
</ul>
<p><strong>è‡³æ­¤ï¼Œæ— è®ºç”¨æˆ·æ€ä¹ˆè¾“å…¥ï¼Œéƒ½èƒ½è¢«æ‰¾åˆ°ã€‚</strong></p>
<p><strong>æœ€ç»ˆé…ç½®</strong></p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># LDAPæœåŠ¡å™¨é…ç½®</span>
<span class="hljs-attr">host</span> = <span class="hljs-string">"192.168.1.1"</span>
<span class="hljs-attr">port</span> = <span class="hljs-number">3893</span>
<span class="hljs-attr">bind_dn</span> = <span class="hljs-string">"cn=ldap@email.com,ou=user,dc=email,dc=com"</span>
<span class="hljs-attr">bind_password</span> = <span class="hljs-string">'password'</span>

<span class="hljs-comment"># æœç´¢è¿‡æ»¤å™¨ - æ”¯æŒå¤šç§æ ¼å¼</span>
<span class="hljs-attr">search_filter</span> = <span class="hljs-string">"(|(uid=%s)(uid=%s@email.com)(sn=%s))"</span>
<span class="hljs-attr">search_base_dns</span> = [<span class="hljs-string">"ou=user,dc=email,dc=com"</span>]

<span class="hljs-comment"># å±æ€§æ˜ å°„</span>
<span class="hljs-section">[servers.attributes]</span>
<span class="hljs-attr">name</span> = <span class="hljs-string">"givenName"</span>
<span class="hljs-attr">surname</span> = <span class="hljs-string">"sn"</span>
<span class="hljs-attr">username</span> = <span class="hljs-string">"uid"</span> <span class="hljs-comment"># å…³é”®ï¼šä½¿ç”¨uidè€Œä¸æ˜¯sn</span>
<span class="hljs-attr">member_of</span> = <span class="hljs-string">"memberOf"</span>
<span class="hljs-attr">email</span> = <span class="hljs-string">"mail"</span>
</code></pre>
<h3 data-id="heading-21">æ€»ç»“ï¼šChaterm å¸¦æ¥çš„æŠ€æœ¯æå‡</h3>
<p>æ•´ä¸ªæ’æŸ¥å’Œä¿®å¤è¿‡ç¨‹ï¼ŒChaterm è€—æ—¶ 10 åˆ†é’Ÿã€‚å¯¹æ¯”å°ä¸°è‡ªå·±æ‘¸ç´¢çš„ 3 å°æ—¶ï¼Œè¿™æ•ˆç‡æå‡æ˜¯é¢ è¦†æ€§çš„ã€‚</p>















































<table><thead><tr><th>æ­¥éª¤</th><th>æ“ä½œ</th><th>ç»“æœ</th><th>è€—æ—¶</th></tr></thead><tbody><tr><td>1</td><td>æ£€æŸ¥é…ç½®æ–‡ä»¶</td><td>å‘ç°ä½¿ç”¨äº†é”™è¯¯çš„å±æ€§</td><td>1 åˆ†é’Ÿ</td></tr><tr><td>2</td><td>æµ‹è¯• LDAP è¿æ¥</td><td>ç¡®è®¤ bind_dn æ ¼å¼æ­£ç¡®</td><td>1 åˆ†é’Ÿ</td></tr><tr><td>3</td><td>æŸ¥çœ‹ç”¨æˆ·å®é™…å±æ€§</td><td>å‘ç° uid æ˜¯å®Œæ•´é‚®ç®±æ ¼å¼</td><td>2 åˆ†é’Ÿ</td></tr><tr><td>4</td><td>ä¿®æ”¹æœç´¢è¿‡æ»¤å™¨</td><td>æ”¯æŒå¤šç§ç™»å½•æ ¼å¼</td><td>1 åˆ†é’Ÿ</td></tr><tr><td>5</td><td>å¯ç”¨è°ƒè¯•æ—¥å¿—</td><td>ä¾¿äºåç»­æ’æŸ¥</td><td>1 åˆ†é’Ÿ</td></tr><tr><td>6</td><td>éªŒè¯ä¿®å¤</td><td>é—®é¢˜è§£å†³ âœ…</td><td>4 åˆ†é’Ÿ</td></tr></tbody></table>
<p>æˆ‘ä»¬ä»è¿™ä¸ªæ¡ˆä¾‹ä¸­çœ‹åˆ°çš„ï¼Œä¸åªæ˜¯å·¥å…·çš„å¿«é€Ÿï¼Œæ›´æ˜¯å®ƒç³»ç»ŸåŒ–çš„æ€ç»´æ¨¡å¼ï¼š</p>
<ol>
<li><strong>é¿å…çŸ¥è¯†ç›²åŒºï¼š</strong> Â å®ƒèƒ½ç¬é—´è¯†åˆ«å‡ºä¸åŒæŠ€æœ¯æ ˆï¼ˆAD vs. LDAPï¼‰çš„é…ç½®å·®å¼‚ï¼Œè¿™æ˜¯æœ€å®¹æ˜“è®©äººå¡å£³çš„åœ°æ–¹ã€‚</li>
<li><strong>å…ˆéªŒè¯æ•°æ®ï¼Œåä¿®æ”¹é…ç½®ï¼š</strong> Â å®ƒä¸æ˜¯ç›²ç›®åœ°å°è¯•é…ç½®ï¼Œè€Œæ˜¯å…ˆç”¨ ldapsearch éªŒè¯äº† LDAP æœåŠ¡å™¨å®é™…å­˜å‚¨çš„æ•°æ®æ ¼å¼ï¼Œå†å›è¿‡å¤´æ¥ä¿®æ”¹é…ç½®ï¼Œè¿™æ˜¯æœ€é«˜æ•ˆçš„æ’æŸ¥é€»è¾‘ã€‚</li>
<li><strong>ä¸æ­¢äºä¿®å¤ï¼Œæ›´è¦ä¼˜åŒ–ï¼š</strong> Â Chaterm æœ€ç»ˆç»™å‡ºçš„ä¸‡èƒ½è¿‡æ»¤å™¨ï¼Œè€ƒè™‘åˆ°äº†ç”¨æˆ·ä½“éªŒï¼Œé¿å…äº†æœªæ¥å› ç™»å½•ä¹ æƒ¯ä¸åŒè€Œå¼•å‘çš„å†æ¬¡æ•…éšœã€‚</li>
</ol>
<h4 data-id="heading-22">Chaterm çš„ä¼˜åŠ¿ï¼šä¸ºä»€ä¹ˆèƒ½ 10 åˆ†é’Ÿè§£å†³ 3 å°æ—¶çš„é—®é¢˜ï¼Ÿ</h4>
<p>é€šè¿‡è¿™ä¸ªæ¡ˆä¾‹ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ° Chaterm ç›¸æ¯”ä¼ ç»Ÿæ’æŸ¥æ–¹å¼çš„ä¼˜åŠ¿ï¼š</p>
<h5 data-id="heading-23">1. ç³»ç»ŸåŒ–æ’æŸ¥</h5>
<p><strong>ä¼ ç»Ÿæ–¹å¼ï¼š</strong> Â ä½ å¯èƒ½å¿˜è®°æŸä¸ªæ­¥éª¤ï¼Œæˆ–è€…é¡ºåºä¸å¯¹</p>
<p><strong>Chatermï¼š</strong></p>
<ul>
<li>ä¸ä¼šé—æ¼å…³é”®æ­¥éª¤</li>
<li>æŒ‰ç…§é€»è¾‘é¡ºåºé€æ­¥æ’æŸ¥</li>
<li>æ ¹æ®ç»“æœè‡ªåŠ¨è°ƒæ•´æ–¹å‘</li>
</ul>
<p><strong>å°±åƒæœ‰ç»éªŒçš„è¿ç»´ä¸“å®¶ï¼ŒçŸ¥é“æ¯ä¸€æ­¥è¯¥åšä»€ä¹ˆï¼</strong></p>
<h5 data-id="heading-24">2. çŸ¥è¯†ä¸°å¯Œ</h5>
<p><strong>ä¼ ç»Ÿæ–¹å¼ï¼š</strong> Â ä½ éœ€è¦æŸ¥æ–‡æ¡£ã€æœç™¾åº¦ï¼Œå¯èƒ½è¿˜æ‰¾ä¸åˆ°ç­”æ¡ˆ</p>
<p><strong>Chatermï¼š</strong></p>
<ul>
<li>çŸ¥é“éœ€è¦å®‰è£…ä»€ä¹ˆå·¥å…·ï¼ˆè‡ªåŠ¨å¸®ä½ è£…ï¼‰</li>
<li>äº†è§£ LDAP çš„å„ç§é…ç½®æ ¼å¼ï¼ˆä¸€çœ¼çœ‹å‡ºé—®é¢˜ï¼‰</li>
<li>ç†è§£ä¸åŒ LDAP ç±»å‹çš„å·®å¼‚ï¼ˆçŸ¥é“ Windows AD å’Œæ ‡å‡† LDAP çš„åŒºåˆ«ï¼‰</li>
</ul>
<p><strong>å°±åƒæœ‰ä¸ªçŸ¥è¯†åº“åœ¨è„‘å­é‡Œï¼Œéšæ—¶è°ƒç”¨ï¼</strong></p>
<h5 data-id="heading-25">3. æ‰§è¡Œé«˜æ•ˆ</h5>
<p><strong>ä¼ ç»Ÿæ–¹å¼ï¼š</strong> Â ä½ éœ€è¦æ‰‹åŠ¨è¾“å…¥æ¯ä¸ªå‘½ä»¤ï¼Œå¤åˆ¶ç²˜è´´ï¼Œå®¹æ˜“å‡ºé”™</p>
<p><strong>Chatermï¼š</strong></p>
<ul>
<li>è‡ªåŠ¨æ‰§è¡Œå‘½ä»¤ï¼Œæ— éœ€æ‰‹åŠ¨è¾“å…¥</li>
<li>å®æ—¶æŸ¥çœ‹ç»“æœï¼Œå¿«é€Ÿå®šä½é—®é¢˜</li>
<li>æä¾›ä¿®å¤æ–¹æ¡ˆï¼Œç›´æ¥å¯ç”¨</li>
</ul>
<p><strong>ä½ åªéœ€çœ‹ç»“æœï¼Œä¸ç”¨åŠ¨æ‰‹ï¼</strong></p>
<h5 data-id="heading-26">4. å®‰å…¨å¯é </h5>
<p><strong>ä¼ ç»Ÿæ–¹å¼ï¼š</strong> Â ä½ å¯èƒ½å¿˜è®°å¤‡ä»½ï¼Œæ”¹é”™äº†å°±éº»çƒ¦äº†</p>
<p><strong>Chatermï¼š</strong></p>
<ul>
<li>ä¿®æ”¹å‰è‡ªåŠ¨å¤‡ä»½ï¼ˆå¸®ä½ è®°å¾—ï¼‰</li>
<li>éªŒè¯ä¿®æ”¹ç»“æœï¼ˆç¡®ä¿æ”¹å¯¹äº†ï¼‰</li>
<li>æä¾›å›æ»šæ–¹æ¡ˆï¼ˆä¸‡ä¸€æœ‰é—®é¢˜è¿˜èƒ½æ¢å¤ï¼‰</li>
</ul>
<p><strong>å®‰å…¨ç¬¬ä¸€ï¼ŒAI å¸®ä½ è€ƒè™‘åˆ°äº†ï¼</strong></p>
<h4 data-id="heading-27">è¿ç»´äººå‘˜èƒ½å­¦åˆ°ä»€ä¹ˆï¼Ÿï¼ˆå®ç”¨å¹²è´§ï¼‰</h4>
<h5 data-id="heading-28">1. LDAP æ’æŸ¥çš„æ ‡å‡†æµç¨‹</h5>
<pre><code class="hljs">æ£€æŸ¥é…ç½® â†’ æµ‹è¯•è¿æ¥ â†’ æŸ¥çœ‹ç”¨æˆ·å±æ€§ â†’ ä¿®æ”¹é…ç½® â†’ éªŒè¯ä¿®å¤
</code></pre>
<p><strong>å…³é”®ç‚¹ï¼š</strong> Â å…ˆç¡®è®¤é…ç½®ï¼Œå†æµ‹è¯•è¿æ¥ï¼Œæœ€åçœ‹å®é™…æ•°æ®ï¼Œè¿™æ ·ä¸ä¼šèµ°å¼¯è·¯ï¼</p>
<h5 data-id="heading-29">2. å…³é”®æ’æŸ¥å‘½ä»¤</h5>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-meta"># æµ‹è¯•LDAPè¿æ¥ï¼ˆæœ€é‡è¦ï¼ï¼‰</span>
ldapsearch -x -H ldap:<span class="hljs-comment">//æœåŠ¡å™¨:ç«¯å£ \</span>
-D <span class="hljs-string">"bind_dn"</span> -w <span class="hljs-string">"å¯†ç "</span> \
-b <span class="hljs-string">"æœç´¢åŸºç¡€DN"</span> <span class="hljs-string">"(æœç´¢è¿‡æ»¤å™¨)"</span>

<span class="hljs-meta"># æŸ¥çœ‹ç”¨æˆ·å®Œæ•´å±æ€§ï¼ˆçœ‹çœ‹åˆ°åº•å­˜äº†ä»€ä¹ˆï¼‰</span>
ldapsearch ... <span class="hljs-string">"(cn=ç”¨æˆ·å)"</span>

<span class="hljs-meta"># å¯ç”¨Grafana LDAPè°ƒè¯•æ—¥å¿—ï¼ˆå‡ºé—®é¢˜æ—¶å¾ˆæœ‰ç”¨ï¼‰</span>

<span class="hljs-meta"># åœ¨grafana.iniä¸­æ·»åŠ ï¼š</span>
[<span class="hljs-meta">log</span>]
filters = ldap:debug
</code></pre>
<p><strong>æç¤ºï¼š</strong> Â è¿™äº›å‘½ä»¤ AI ä¼šè‡ªåŠ¨å¸®ä½ æ‰§è¡Œï¼Œä½†äº†è§£åŸç†æœ‰åŠ©äºä½ ç†è§£é—®é¢˜ï¼</p>
<h5 data-id="heading-30">3.Â  å¸¸è§ LDAP é…ç½®é”™è¯¯ï¼ˆé¿å‘æŒ‡å—ï¼‰</h5>





























<table><thead><tr><th>é”™è¯¯ç±»å‹</th><th>ç¤ºä¾‹</th><th>æ­£ç¡®åšæ³•</th><th>ä¸ºä»€ä¹ˆé”™ï¼Ÿ</th></tr></thead><tbody><tr><td>å±æ€§ä¸å­˜åœ¨</td><td><code>sAMAccountName</code>Â (æ ‡å‡† LDAP)</td><td>ä½¿ç”¨Â <code>uid</code>Â æˆ–Â <code>cn</code></td><td>Windows AD ä¸“ç”¨ï¼Œæ ‡å‡† LDAP æ²¡æœ‰</td></tr><tr><td>æ ¼å¼ä¸åŒ¹é…</td><td>ç”¨æˆ·è¾“å…¥Â <code>user</code>ï¼ŒLDAP å­˜å‚¨Â <code>user@domain.com</code></td><td>ä½¿ç”¨å¤šæ¡ä»¶æœç´¢è¿‡æ»¤å™¨</td><td>è¾“å…¥æ ¼å¼å’Œå­˜å‚¨æ ¼å¼ä¸ä¸€è‡´</td></tr><tr><td>å±æ€§æ˜ å°„é”™è¯¯</td><td><code>username = "sn"</code>Â (å§“æ°)</td><td>ä½¿ç”¨Â <code>username = "uid"</code></td><td>å§“æ°ä¸æ˜¯å”¯ä¸€æ ‡è¯†ï¼Œå¯èƒ½é‡å¤</td></tr></tbody></table>
<p>è®°ä½è¿™äº›ï¼Œä»¥åé…ç½® LDAP æ—¶å°±èƒ½é¿å…è¸©å‘ï¼</p>
<h4 data-id="heading-31">å¿«é€Ÿä¸Šæ‰‹ Chaterm</h4>
<h5 data-id="heading-32">ä½¿ç”¨åœºæ™¯ï¼ˆè¿™äº›åœºæ™¯éƒ½èƒ½ç”¨ï¼‰</h5>
<ol>
<li><strong>æ•…éšœæ’æŸ¥</strong>Â - ç²˜è´´é”™è¯¯æ—¥å¿—ï¼Œè‡ªåŠ¨åˆ†æï¼ˆå°±åƒè¿™ä¸ªæ¡ˆä¾‹ï¼‰</li>
<li><strong>é…ç½®æ£€æŸ¥</strong>Â - æè¿°é—®é¢˜ï¼Œè‡ªåŠ¨æ£€æŸ¥é…ç½®ï¼ˆä¸ç”¨æ‰‹åŠ¨çœ‹é…ç½®æ–‡ä»¶ï¼‰</li>
<li><strong>æ€§èƒ½ä¼˜åŒ–</strong>Â - æä¾›ç³»ç»Ÿä¿¡æ¯ï¼Œè·å¾—ä¼˜åŒ–å»ºè®®ï¼ˆå¸®ä½ æ‰¾æ€§èƒ½ç“¶é¢ˆï¼‰</li>
<li><strong>çŸ¥è¯†æŸ¥è¯¢</strong>Â - è¯¢é—®æŠ€æœ¯é—®é¢˜ï¼Œè·å¾—ä¸“ä¸šè§£ç­”ï¼ˆ24 å°æ—¶åœ¨çº¿ä¸“å®¶ï¼‰</li>
</ol>
<h5 data-id="heading-33">ä½¿ç”¨æŠ€å·§ï¼ˆè®© AI æ›´æ‡‚ä½ ï¼‰</h5>
<ol>
<li><strong>æä¾›å®Œæ•´ä¿¡æ¯</strong>Â - é”™è¯¯æ—¥å¿—ã€é…ç½®æ–‡ä»¶è·¯å¾„ã€é—®é¢˜æè¿°ï¼ˆä¿¡æ¯è¶Šå¤šï¼ŒAI è¶Šå‡†ç¡®ï¼‰</li>
<li><strong>æè¿°å·²å°è¯•çš„æ“ä½œ</strong>Â - é¿å…é‡å¤æ’æŸ¥ï¼ˆå‘Šè¯‰ AI ä½ è¯•è¿‡ä»€ä¹ˆï¼Œå®ƒå°±ä¸ä¼šå†è¯•ï¼‰</li>
<li><strong>åŠæ—¶åé¦ˆç»“æœ</strong>Â - å‘Šè¯‰ Chaterm å“ªäº›æ–¹æ¡ˆæœ‰æ•ˆ/æ— æ•ˆï¼ˆå¸®åŠ© AI è°ƒæ•´æ–¹å‘ï¼‰</li>
<li><strong>æŸ¥çœ‹æ‰§è¡Œè¿‡ç¨‹</strong>Â - å­¦ä¹ æ’æŸ¥æ€è·¯å’Œå‘½ä»¤ï¼ˆè¾¹ç”¨è¾¹å­¦ï¼Œæå‡è‡ªå·±ï¼‰</li>
</ol>
<p><strong>ç®€å•è¯´ï¼š</strong> Â å°±åƒå’Œè¿ç»´ä¸“å®¶èŠå¤©ï¼Œä½ æè¿°é—®é¢˜ï¼Œå®ƒå¸®ä½ è§£å†³ï¼</p>
<h4 data-id="heading-34">æ€»ç»“ï¼šAI å·¥å…·æ”¹å˜äº†ä»€ä¹ˆï¼Ÿ</h4>
<p>é€šè¿‡è¿™ä¸ªçœŸå®æ¡ˆä¾‹ï¼Œæˆ‘ä»¬çœ‹åˆ°ï¼š</p>
<p><strong>Chaterm èƒ½å¤Ÿåƒç»éªŒä¸°å¯Œçš„è¿ç»´ä¸“å®¶ä¸€æ ·å·¥ä½œï¼š</strong></p>
<ul>
<li><strong>ç³»ç»ŸåŒ–æ’æŸ¥</strong>Â - ä¸ä¼šé—æ¼å…³é”®æ­¥éª¤</li>
<li><strong>æ™ºèƒ½åˆ†æ</strong>Â - ä¸€çœ¼çœ‹å‡ºé—®é¢˜æ‰€åœ¨</li>
<li><strong>ç²¾å‡†ä¿®å¤</strong>Â - ä¸ä»…æ‰¾é—®é¢˜ï¼Œè¿˜å¸®ä½ æ”¹é…ç½®</li>
</ul>
<p><strong>å¤§å¤§æå‡æ’æŸ¥æ•ˆç‡ï¼š</strong></p>

























<table><thead><tr><th>ä¼ ç»Ÿæ–¹å¼</th><th>Chaterm</th></tr></thead><tbody><tr><td>3 å°æ—¶+</td><td>10 åˆ†é’Ÿ</td></tr><tr><td>æ‰‹åŠ¨æ‰§è¡Œå‘½ä»¤</td><td>è‡ªåŠ¨æ‰§è¡Œ</td></tr><tr><td>è¯•é”™æˆæœ¬é«˜</td><td>ç²¾å‡†å®šä½</td></tr><tr><td>å¯èƒ½é—æ¼æ­¥éª¤</td><td>ç³»ç»ŸåŒ–æ’æŸ¥</td></tr></tbody></table>
<p><strong>æ—¶é—´å°±æ˜¯é‡‘é’±ï¼Œæ•ˆç‡å°±æ˜¯ç”Ÿå‘½ï¼</strong></p>
<p><strong>é€‚åˆå„ç§æ°´å¹³çš„è¿ç»´äººå‘˜ï¼š</strong></p>
<ul>
<li><strong>æ–°æ‰‹ï¼š</strong> Â å­¦ä¹ æ ‡å‡†æ’æŸ¥æµç¨‹ï¼ˆè·Ÿç€ AI å­¦ï¼Œå¿«é€Ÿæˆé•¿ï¼‰</li>
<li><strong>è€æ‰‹ï¼š</strong> Â å¿«é€Ÿå®šä½é—®é¢˜ï¼ŒèŠ‚çœæ—¶é—´ï¼ˆæŠŠæ—¶é—´ç”¨åœ¨æ›´é‡è¦çš„äº‹æƒ…ä¸Šï¼‰</li>
</ul>
<h4 data-id="heading-35">æ ¸å¿ƒä»·å€¼</h4>
<p><strong>ä¸æ˜¯æ›¿ä»£ä½ ï¼Œè€Œæ˜¯è®©ä½ æ›´å¼ºå¤§ï¼</strong></p>
<ul>
<li>AI å¸®ä½ åšé‡å¤æ€§å·¥ä½œï¼ˆæ‰§è¡Œå‘½ä»¤ã€æ£€æŸ¥é…ç½®ï¼‰</li>
<li>ä½ ä¸“æ³¨äºæ€è€ƒå’Œå†³ç­–ï¼ˆç†è§£é—®é¢˜ã€éªŒè¯æ–¹æ¡ˆï¼‰</li>
<li>è¾¹ç”¨è¾¹å­¦ï¼Œæå‡æŠ€èƒ½ï¼ˆçœ‹ AI æ€ä¹ˆæ’æŸ¥ï¼Œå­¦ä¹ æ€è·¯ï¼‰</li>
</ul>
<hr/>
<p>å¦‚æœä½ ä¹Ÿé‡åˆ°è¿‡ç±»ä¼¼çš„ LDAP é…ç½®é—®é¢˜ï¼Œæˆ–è€…æƒ³ä½“éªŒ Chaterm çš„å¼ºå¤§åŠŸèƒ½ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºåˆ†äº«ä½ çš„ç»å†ï¼</p>
<p>æˆ–è€…ï¼Œç›´æ¥å»è¯•è¯• Chatermï¼Œçœ‹çœ‹å®ƒèƒ½ä¸èƒ½å¸®ä½ è§£å†³ä¸‹ä¸€ä¸ªé—®é¢˜ï¼ ğŸš€</p>
<h4 data-id="heading-36">ç›¸å…³èµ„æº</h4>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgrafana.com%2Fdocs%2Fgrafana%2Flatest%2Fsetup-grafana%2Fconfigure-security%2Fconfigure-authentication%2Fldap%2F" target="_blank" title="https://grafana.com/docs/grafana/latest/setup-grafana/configure-security/configure-authentication/ldap/" ref="nofollow noopener noreferrer">Grafana LDAP é…ç½®å®˜æ–¹æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fldap.com%2Fldap-filters%2F" target="_blank" title="https://ldap.com/ldap-filters/" ref="nofollow noopener noreferrer">LDAP æœç´¢è¿‡æ»¤å™¨è¯­æ³•</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fchaterm.ai%2Fcn%2Fdocs%2F" target="_blank" title="https://chaterm.ai/cn/docs/" ref="nofollow noopener noreferrer">Chaterm ä½¿ç”¨æŒ‡å—</a></li>
</ul>
<h4 data-id="heading-37">å†™åœ¨æœ€å</h4>
<p><strong>æ¸©é¦¨æç¤ºï¼š</strong> Â ä¿®æ”¹ç”Ÿäº§ç¯å¢ƒé…ç½®å‰ï¼Œè¯·åŠ¡å¿…å…ˆå¤‡ä»½ï¼é€šå¸¸ Chaterm ä¼šè‡ªåŠ¨å¸®ä½ å¤‡ä»½ï¼Œä½†å…»æˆå¥½ä¹ æƒ¯æ€»æ˜¯æ²¡é”™çš„ ğŸ˜Š</p>
<p><strong>æ ¸å¿ƒè§‚ç‚¹ï¼š</strong> Â AI å·¥å…·ä¸æ˜¯è¦æ›¿ä»£è¿ç»´äººå‘˜ï¼Œè€Œæ˜¯è¦è®©æˆ‘ä»¬æ›´é«˜æ•ˆã€æ›´ä¸“ä¸šã€‚æŠŠé‡å¤æ€§å·¥ä½œäº¤ç»™ AIï¼ŒæŠŠæ—¶é—´ç”¨åœ¨æ›´æœ‰ä»·å€¼çš„äº‹æƒ…ä¸Šã€‚</p>
<hr/>
<p>å¦‚æœä½ è§‰å¾—è¿™ç¯‡æ–‡ç« æœ‰ç”¨ï¼Œæ¬¢è¿ç‚¹èµã€è½¬å‘ã€æ”¶è—ï¼</p>
<p>å¦‚æœä½ ä¹Ÿæœ‰ç±»ä¼¼çš„æ’æŸ¥ç»å†ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºåˆ†äº«ï¼</p>
<p>å¦‚æœä½ è¯•ç”¨äº† Chatermï¼Œæ¬¢è¿åˆ†äº«ä½ çš„ä½¿ç”¨ä½“éªŒï¼</p>
<p>å®˜æ–¹åšå®¢ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fchaterm.ai%2Fblog%2Fposts%2Fpe1" target="_blank" title="https://chaterm.ai/blog/posts/pe1" ref="nofollow noopener noreferrer">chaterm.ai/blog/posts/â€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[0ä»£ç å†™SQLï¼Spring AIä¿å§†çº§æ•™ç¨‹ï¼š5åˆ†é’Ÿå®ç°AIè‡ªç„¶è¯­è¨€æŸ¥æ•°æ®ï¼Œæ•æ„ŸæŸ¥è¯¢è‡ªåŠ¨æ‹¦æˆªğŸš€]]></title>    <link>https://juejin.cn/post/7582809606066651162</link>    <guid>https://juejin.cn/post/7582809606066651162</guid>    <pubDate>2025-12-12T10:16:40.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582809606066651162" data-draft-id="7582791876366417958" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content=" 0ä»£ç å†™SQLï¼Spring AIä¿å§†çº§æ•™ç¨‹ï¼š5åˆ†é’Ÿå®ç°AIè‡ªç„¶è¯­è¨€æŸ¥æ•°æ®ï¼Œæ•æ„ŸæŸ¥è¯¢è‡ªåŠ¨æ‹¦æˆªğŸš€"/> <meta itemprop="keywords" content="Spring,AIç¼–ç¨‹,SQL"/> <meta itemprop="datePublished" content="2025-12-12T10:16:40.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å“ˆå“ˆå“ˆç¬‘ä»€ä¹ˆ"/> <meta itemprop="url" content="https://juejin.cn/user/808832912075352"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
             0ä»£ç å†™SQLï¼Spring AIä¿å§†çº§æ•™ç¨‹ï¼š5åˆ†é’Ÿå®ç°AIè‡ªç„¶è¯­è¨€æŸ¥æ•°æ®ï¼Œæ•æ„ŸæŸ¥è¯¢è‡ªåŠ¨æ‹¦æˆªğŸš€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/808832912075352/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å“ˆå“ˆå“ˆç¬‘ä»€ä¹ˆ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-12T10:16:40.000Z" title="Fri Dec 12 2025 10:16:40 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">0ä»£ç å†™SQLï¼Spring AIä¿å§†çº§æ•™ç¨‹ï¼š5åˆ†é’Ÿå®ç°AIè‡ªç„¶è¯­è¨€æŸ¥æ•°æ®ï¼Œæ•æ„ŸæŸ¥è¯¢è‡ªåŠ¨æ‹¦æˆªğŸš€</h2>
<p>è¿˜åœ¨ä¸ºâ€œéæŠ€æœ¯ç”¨æˆ·æŸ¥æ•°æ®è¦å†™SQLâ€å¤´ç–¼ï¼Ÿè¿˜åœ¨æ‹…å¿ƒText-to-SQLæ³¨å…¥ã€è¶ŠæƒæŸ¥è¯¢é£é™©ï¼Ÿ</p>
<p>ä»Šå¤©ç»™å¤§å®¶å¸¦æ¥ <strong>Spring AIç›´æ¥Text-to-SQLå®æˆ˜æ–¹æ¡ˆ</strong>â€”â€”æ— éœ€æ‡‚SQLï¼Œç”¨æˆ·è‡ªç„¶è¯­è¨€éšä¾¿é—®ï¼ˆå¦‚ä¸‹å•æ•°ã€æœ€è´µè®¢å•ã€é«˜é¢‘å•†å“ï¼‰ï¼ŒAIè‡ªåŠ¨ç”ŸæˆSQLæŸ¥æ•°æ®åº“ï¼Œè¿è§„æŸ¥è¯¢ï¼ˆè¶Šæƒã€æ•æ„Ÿå­—æ®µã€å†™æ“ä½œï¼‰è‡ªåŠ¨æ‹¦æˆªï¼Œå…¨ç¨‹ä¿å§†çº§æ­¥éª¤ï¼Œå¤åˆ¶ç²˜è´´å°±èƒ½è½åœ°ï¼</p>
<h3 data-id="heading-1">ğŸ”¥ ä¸ºä»€ä¹ˆé€‰è¿™ä¸ªæ–¹æ¡ˆï¼Ÿ3å¤§æ ¸å¿ƒä¼˜åŠ¿</h3>
<ol>
<li><strong>çµæ´»åˆ°â€œéšä¾¿é—®â€</strong> ï¼šç”¨æˆ·ç”¨è‡ªç„¶è¯­è¨€æé—®ï¼ˆå¦‚â€œè¿‘30å¤©å·²æ”¯ä»˜çš„è®¢å•æœ‰å¤šå°‘ç¬”ï¼Ÿâ€â€œæˆ‘å¸¸ä¹°çš„å•†å“TOP3â€ï¼‰ï¼ŒAIè‡ªåŠ¨è½¬SQLï¼Œæ— éœ€é¢„å®šä¹‰æŸ¥è¯¢é€»è¾‘ï¼›</li>
<li><strong>å®‰å…¨åˆ°â€œæ— æ­»è§’â€</strong> ï¼šäº‹å‰æç¤ºè¯é™åˆ¶+äº‹åSQLæ ¡éªŒï¼ŒåŒé‡é˜²æŠ¤æ‹¦æˆªå†™æ“ä½œã€æ³¨å…¥æ”»å‡»ã€è¶ŠæƒæŸ¥è¯¢ã€æ•æ„Ÿå­—æ®µæŸ¥è¯¢ï¼›</li>
<li><strong>ç®€å•åˆ°â€œé›¶é—¨æ§›â€</strong> ï¼šSpringç”Ÿæ€æ— ç¼é›†æˆï¼Œ5åˆ†é’Ÿå®Œæˆé…ç½®+ç¼–ç ï¼Œæ–°æ‰‹ä¹Ÿèƒ½å¿«é€Ÿè½åœ°ï¼Œæ— éœ€æ·±å…¥AIçŸ¥è¯†ã€‚</li>
</ol>
<h3 data-id="heading-2">ğŸ› ï¸ ä¿å§†çº§è½åœ°æ­¥éª¤ï¼šä»0åˆ°1å®ç°AIæ•°æ®æŸ¥è¯¢</h3>
<h4 data-id="heading-3">ä¸€ã€ç¯å¢ƒå‡†å¤‡ï¼ˆå¤åˆ¶ç²˜è´´å³å¯ï¼‰</h4>
<h5 data-id="heading-4">1. å¼•å…¥æ ¸å¿ƒä¾èµ–ï¼ˆpom.xmlï¼‰</h5>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- Spring AI æ ¸å¿ƒï¼ˆLLMäº¤äº’+SQLç”Ÿæˆï¼‰ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.ai<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-ai-core<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
<span class="hljs-comment">&lt;!-- Claude LLMï¼ˆå¯æ›¿æ¢ä¸ºé€šä¹‰åƒé—®/DeepSeekï¼‰ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.ai<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-ai-starter-model-anthropic<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
<span class="hljs-comment">&lt;!-- SQLæ ¡éªŒå·¥å…· --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.ai<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-ai-sql-generator<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
<span class="hljs-comment">&lt;!-- Spring Securityï¼ˆç”¨æˆ·è®¤è¯+æ•°æ®éš”ç¦»ï¼‰ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-security<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
<span class="hljs-comment">&lt;!-- æ•°æ®åº“+ORM --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-data-jpa<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.mysql<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mysql-connector-j<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>runtime<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<h5 data-id="heading-5">2. æ•°æ®åº“è¡¨ç»“æ„ï¼ˆMySQLï¼‰</h5>
<p>æ ¸å¿ƒæ˜¯<code>user_id</code>å…³è”ç”¨æˆ·ä¸è®¢å•ï¼Œç¡®ä¿æ•°æ®éš”ç¦»ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- ç”¨æˆ·è¡¨ï¼ˆå«æ•æ„Ÿå­—æ®µï¼Œç¦æ­¢æŸ¥è¯¢ï¼‰</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> sys_user (
    id <span class="hljs-type">BIGINT</span> AUTO_INCREMENT <span class="hljs-keyword">PRIMARY</span> KEY,
    username <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">UNIQUE</span>,
    password <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">100</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>, <span class="hljs-comment">-- åŠ å¯†å­˜å‚¨</span>
    phone <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-comment">-- æ•æ„Ÿå­—æ®µ</span>
);

<span class="hljs-comment">-- è®¢å•ä¸»è¡¨</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> order_main (
    id <span class="hljs-type">BIGINT</span> AUTO_INCREMENT <span class="hljs-keyword">PRIMARY</span> KEY,
    user_id <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
    total_amount <span class="hljs-type">DECIMAL</span>(<span class="hljs-number">10</span>,<span class="hljs-number">2</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
    create_time DATETIME <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span>,
    status TINYINT <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span> COMMENT <span class="hljs-string">'0-å¾…æ”¯ä»˜ï¼Œ1-å·²æ”¯ä»˜ï¼Œ2-å·²å–æ¶ˆ'</span>,
    <span class="hljs-keyword">FOREIGN</span> KEY (user_id) <span class="hljs-keyword">REFERENCES</span> sys_user(id),
    INDEX idx_user_create (user_id, create_time)
);

<span class="hljs-comment">-- è®¢å•é¡¹è¡¨ï¼ˆå•†å“æ˜ç»†ï¼‰</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> order_item (
    id <span class="hljs-type">BIGINT</span> AUTO_INCREMENT <span class="hljs-keyword">PRIMARY</span> KEY,
    order_id <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
    product_id <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
    product_name <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">100</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
    quantity <span class="hljs-type">INT</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
    unit_price <span class="hljs-type">DECIMAL</span>(<span class="hljs-number">10</span>,<span class="hljs-number">2</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
    <span class="hljs-keyword">FOREIGN</span> KEY (order_id) <span class="hljs-keyword">REFERENCES</span> order_main(id)
);
</code></pre>
<h4 data-id="heading-6">äºŒã€æ ¸å¿ƒé…ç½®ï¼š1åˆ†é’Ÿæå®šLLM+å®‰å…¨è§„åˆ™</h4>
<p>åœ¨<code>application.yaml</code>ä¸­é…ç½®LLMã€æ•°æ®åº“å’Œå®‰å…¨æç¤ºè¯ï¼ˆå…³é”®ï¼ï¼‰ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">spring:
  datasource:
    url: jdbc:mysql://localhost:<span class="hljs-number">3306</span>/order_db?useSSL=false&amp;serverTimezone=UTC
    username: readonly_user # æ•°æ®åº“åªè¯»ç”¨æˆ·ï¼ˆä»…æˆSELECTæƒé™ï¼‰
    password: ä½ çš„å¯†ç 
  ai:
    anthropic:
      api-key: ${ANTHROPIC_API_KEY} # ç¯å¢ƒå˜é‡åŠ è½½ï¼Œé¿å…ç¡¬ç¼–ç 
      chat:
        options:
          model: claude-opus-<span class="hljs-number">4</span>-<span class="hljs-number">20250514</span>
          # ğŸ”¥ æ ¸å¿ƒæç¤ºè¯ï¼šé™åˆ¶LLMç”Ÿæˆåˆè§„SQL
          system-prompt: |
            ä½ æ˜¯è®¢å•æŸ¥è¯¢SQLç”ŸæˆåŠ©æ‰‹ï¼Œä»…ç”Ÿæˆç¬¦åˆä»¥ä¸‹è§„åˆ™çš„SQLï¼š
            <span class="hljs-number">1</span>. å…è®¸è¡¨ï¼šorder_mainã€order_itemï¼ˆç¦æ­¢æŸ¥sys_useråŠå…¶ä»–è¡¨ï¼‰ï¼›
            <span class="hljs-number">2</span>. å¿…åŠ æ¡ä»¶ï¼šAND order_main.user_id = {CURRENT_USER_ID}ï¼ˆä¸å¯çœç•¥ï¼‰ï¼›
            <span class="hljs-number">3</span>. ä»…æ”¯æŒSELECTï¼Œç¦æ­¢INSERT/UPDATE/DELETEç­‰å†™æ“ä½œï¼›
            <span class="hljs-number">4</span>. ç¦æ­¢æŸ¥æ•æ„Ÿå­—æ®µï¼šphoneã€passwordç­‰ï¼›
            <span class="hljs-number">5</span>. ä»…è¿”å›çº¯SQLï¼Œæ— markdownåŒ…è£¹ï¼›
            <span class="hljs-number">6</span>. è¿è§„é—®é¢˜ç›´æ¥è¿”å›ï¼š"è¯¥æŸ¥è¯¢ä¸ç¬¦åˆè§„åˆ™ï¼ŒåŸå› ï¼š{å…·ä½“è¿è§„ç±»å‹}"ã€‚
            # è¡¨ç»“æ„å‚è€ƒ
            order_mainï¼š<span class="hljs-built_in">id</span>(è®¢å•å·)ã€<span class="hljs-built_in">user_id</span>(ç”¨æˆ·ID)ã€<span class="hljs-built_in">total_amount</span>(é‡‘é¢)ã€<span class="hljs-built_in">create_time</span>(æ—¶é—´)ã€<span class="hljs-built_in">status</span>(çŠ¶æ€)
            order_itemï¼š<span class="hljs-built_in">order_id</span>(è®¢å•å·)ã€<span class="hljs-built_in">product_name</span>(å•†å“å)ã€<span class="hljs-built_in">quantity</span>(æ•°é‡)
</code></pre>
<h4 data-id="heading-7">ä¸‰ã€ç¼–ç å®ç°ï¼š3ä¸ªæ ¸å¿ƒç»„ä»¶ï¼ˆå¤åˆ¶å³ç”¨ï¼‰</h4>
<h5 data-id="heading-8">1. ç”¨æˆ·ä¸Šä¸‹æ–‡ï¼šæå–å½“å‰ç™»å½•ç”¨æˆ·IDï¼ˆæ•°æ®éš”ç¦»ï¼‰</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserContext</span> {
    <span class="hljs-comment">// ä»Spring Securityè·å–å½“å‰ç”¨æˆ·ID</span>
    <span class="hljs-keyword">public</span> Long <span class="hljs-title function_">getCurrentUserId</span><span class="hljs-params">()</span> {
        <span class="hljs-type">Authentication</span> <span class="hljs-variable">auth</span> <span class="hljs-operator">=</span> SecurityContextHolder.getContext().getAuthentication();
        <span class="hljs-keyword">if</span> (auth == <span class="hljs-literal">null</span> || !(auth.getPrincipal() <span class="hljs-keyword">instanceof</span> SysUser user)) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"ç”¨æˆ·æœªç™»å½•ï¼Œæ— æ³•æŸ¥è¯¢"</span>);
        }
        <span class="hljs-keyword">return</span> user.getId();
    }
}
</code></pre>
<h5 data-id="heading-9">2. SQLæ ¡éªŒå™¨ï¼šæ‹¦æˆªè¿è§„SQLï¼ˆäº‹åå…œåº•ï¼‰</h5>
<pre><code class="hljs language-arduino" lang="arduino">@Component
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SqlValidator</span> {
    <span class="hljs-comment">// ç¦æ­¢çš„æ“ä½œã€æ•æ„Ÿå­—æ®µã€å…è®¸çš„è¡¨</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">static</span> <span class="hljs-keyword">final</span> List&lt;<span class="hljs-type">String</span>&gt; FORBIDDEN_OPS = List.<span class="hljs-built_in">of</span>(<span class="hljs-string">"INSERT"</span>, <span class="hljs-string">"UPDATE"</span>, <span class="hljs-string">"DELETE"</span>, <span class="hljs-string">"DROP"</span>);
    <span class="hljs-keyword">private</span> <span class="hljs-type">static</span> <span class="hljs-keyword">final</span> List&lt;<span class="hljs-type">String</span>&gt; SENSITIVE_FIELDS = List.<span class="hljs-built_in">of</span>(<span class="hljs-string">"phone"</span>, <span class="hljs-string">"password"</span>);
    <span class="hljs-keyword">private</span> <span class="hljs-type">static</span> <span class="hljs-keyword">final</span> List&lt;<span class="hljs-type">String</span>&gt; ALLOWED_TABLES = List.<span class="hljs-built_in">of</span>(<span class="hljs-string">"order_main"</span>, <span class="hljs-string">"order_item"</span>);

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title">validate</span><span class="hljs-params">(<span class="hljs-type">String</span> sql, Long userId)</span> </span>{
        <span class="hljs-type">String</span> lowerSql = sql.<span class="hljs-built_in">toLowerCase</span>();
        <span class="hljs-comment">// 1. ç¦æ­¢å†™æ“ä½œ</span>
        <span class="hljs-keyword">if</span> (FORBIDDEN_OPS.<span class="hljs-built_in">stream</span>().<span class="hljs-built_in">anyMatch</span>(op -&gt; lowerSql.<span class="hljs-built_in">startsWith</span>(op.<span class="hljs-built_in">toLowerCase</span>()))) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">IllegalSqlException</span>(<span class="hljs-string">"ç¦æ­¢éæŸ¥è¯¢æ“ä½œ"</span>);
        }
        <span class="hljs-comment">// 2. å¿…é¡»åŒ…å«user_idï¼ˆé˜²è¶Šæƒï¼‰</span>
        <span class="hljs-keyword">if</span> (!lowerSql.<span class="hljs-built_in">contains</span>(<span class="hljs-string">"order_main.user_id ="</span>)) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">IllegalSqlException</span>(<span class="hljs-string">"ä»…å…è®¸æŸ¥è¯¢è‡ªå·±çš„è®¢å•"</span>);
        }
        <span class="hljs-comment">// 3. ç¦æ­¢æ•æ„Ÿå­—æ®µ</span>
        <span class="hljs-keyword">for</span> (<span class="hljs-type">String</span> field : SENSITIVE_FIELDS) {
            <span class="hljs-keyword">if</span> (lowerSql.<span class="hljs-built_in">contains</span>(field)) {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">IllegalSqlException</span>(<span class="hljs-string">"ç¦æ­¢æŸ¥è¯¢æ•æ„Ÿå­—æ®µï¼š"</span> + field);
            }
        }
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }

    <span class="hljs-comment">// è‡ªå®šä¹‰å¼‚å¸¸</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">IllegalSqlException</span> extends RuntimeException {
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">IllegalSqlException</span><span class="hljs-params">(<span class="hljs-type">String</span> msg)</span> </span>{ <span class="hljs-built_in">super</span>(msg); }
    }
}
</code></pre>
<h5 data-id="heading-10">3. æ ¸å¿ƒæœåŠ¡ï¼šæ•´åˆAIç”Ÿæˆ+æ ¡éªŒ+æ‰§è¡Œ</h5>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderTextToSqlService</span> {
    <span class="hljs-meta">@Autowired</span> <span class="hljs-keyword">private</span> <span class="hljs-title class_">ChatClient</span> chatClient;
    <span class="hljs-meta">@Autowired</span> <span class="hljs-keyword">private</span> <span class="hljs-title class_">JdbcTemplate</span> jdbcTemplate;
    <span class="hljs-meta">@Autowired</span> <span class="hljs-keyword">private</span> <span class="hljs-title class_">UserContext</span> userContext;
    <span class="hljs-meta">@Autowired</span> <span class="hljs-keyword">private</span> <span class="hljs-title class_">SqlValidator</span> sqlValidator;

    <span class="hljs-comment">// è‡ªç„¶è¯­è¨€â†’SQLâ†’æŸ¥è¯¢â†’ç»“æœ</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">query</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> question</span>) {
        <span class="hljs-title class_">Long</span> userId = userContext.<span class="hljs-title function_">getCurrentUserId</span>();
        <span class="hljs-comment">// 1. LLMç”ŸæˆSQLï¼ˆæ›¿æ¢{CURRENT_USER_ID}ä¸ºçœŸå®IDï¼‰</span>
        <span class="hljs-title class_">String</span> systemPrompt = chatClient.<span class="hljs-title function_">options</span>().<span class="hljs-title function_">getSystemPrompt</span>()
                .<span class="hljs-title function_">replace</span>(<span class="hljs-string">"{CURRENT_USER_ID}"</span>, userId.<span class="hljs-title function_">toString</span>());
        <span class="hljs-title class_">String</span> generatedSql = chatClient.<span class="hljs-title function_">prompt</span>()
                .<span class="hljs-title function_">system</span>(systemPrompt)
                .<span class="hljs-title function_">user</span>(question)
                .<span class="hljs-title function_">call</span>()
                .<span class="hljs-title function_">content</span>();

        <span class="hljs-comment">// 2. æ‹¦æˆªLLMè¿”å›çš„è¿è§„æç¤º</span>
        <span class="hljs-keyword">if</span> (generatedSql.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">"è¯¥æŸ¥è¯¢ä¸ç¬¦åˆè§„åˆ™"</span>)) {
            <span class="hljs-keyword">return</span> generatedSql;
        }

        <span class="hljs-comment">// 3. æ ¡éªŒSQLåˆæ³•æ€§</span>
        <span class="hljs-keyword">try</span> {
            sqlValidator.<span class="hljs-title function_">validate</span>(generatedSql, userId);
        } <span class="hljs-keyword">catch</span> (<span class="hljs-title class_">SqlValidator</span>.<span class="hljs-property">IllegalSqlException</span> e) {
            <span class="hljs-keyword">return</span> <span class="hljs-string">"æŸ¥è¯¢å¤±è´¥ï¼š"</span> + e.<span class="hljs-title function_">getMessage</span>();
        }

        <span class="hljs-comment">// 4. æ‰§è¡ŒSQLå¹¶æ ¼å¼åŒ–ç»“æœ</span>
        <span class="hljs-keyword">try</span> {
            <span class="hljs-title class_">List</span>&lt;<span class="hljs-title class_">Map</span>&lt;<span class="hljs-title class_">String</span>, <span class="hljs-title class_">Object</span>&gt;&gt; result = jdbcTemplate.<span class="hljs-title function_">queryForList</span>(generatedSql);
            <span class="hljs-keyword">return</span> result.<span class="hljs-title function_">isEmpty</span>() ? <span class="hljs-string">"æœªæŸ¥è¯¢åˆ°æ•°æ®"</span> : <span class="hljs-title function_">formatResult</span>(question, result);
        } <span class="hljs-keyword">catch</span> (<span class="hljs-title class_">Exception</span> e) {
            <span class="hljs-keyword">return</span> <span class="hljs-string">"SQLæ‰§è¡Œå¤±è´¥ï¼š"</span> + e.<span class="hljs-title function_">getMessage</span>().<span class="hljs-title function_">substring</span>(<span class="hljs-number">0</span>, <span class="hljs-number">100</span>);
        }
    }

    <span class="hljs-comment">// ç»“æœæ ¼å¼åŒ–ï¼ˆè‡ªç„¶è¯­è¨€è¾“å‡ºï¼‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">formatResult</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> question, List&lt;<span class="hljs-built_in">Map</span>&lt;<span class="hljs-built_in">String</span>, <span class="hljs-built_in">Object</span>&gt;&gt; result</span>) {
        <span class="hljs-keyword">if</span> (question.<span class="hljs-title function_">contains</span>(<span class="hljs-string">"å¤šå°‘"</span>) || question.<span class="hljs-title function_">contains</span>(<span class="hljs-string">"æ•°é‡"</span>)) {
            <span class="hljs-keyword">return</span> <span class="hljs-string">"ç¬¦åˆæ¡ä»¶çš„è®°å½•å…±"</span> + result.<span class="hljs-title function_">size</span>() + <span class="hljs-string">"æ¡"</span>;
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (question.<span class="hljs-title function_">contains</span>(<span class="hljs-string">"æœ€è´µ"</span>) || question.<span class="hljs-title function_">contains</span>(<span class="hljs-string">"æœ€é«˜"</span>)) {
            <span class="hljs-title class_">Map</span>&lt;<span class="hljs-title class_">String</span>, <span class="hljs-title class_">Object</span>&gt; top = result.<span class="hljs-title function_">get</span>(<span class="hljs-number">0</span>);
            <span class="hljs-keyword">return</span> <span class="hljs-title class_">String</span>.<span class="hljs-title function_">format</span>(<span class="hljs-string">"æœ€è´µè®¢å•ï¼š\nè®¢å•å·ï¼š%s\né‡‘é¢ï¼š%.2få…ƒ\næ—¶é—´ï¼š%s"</span>,
                    top.<span class="hljs-title function_">get</span>(<span class="hljs-string">"id"</span>), top.<span class="hljs-title function_">get</span>(<span class="hljs-string">"total_amount"</span>), top.<span class="hljs-title function_">get</span>(<span class="hljs-string">"create_time"</span>));
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-comment">// é€šç”¨ç»“æœæ ¼å¼åŒ–</span>
            <span class="hljs-keyword">return</span> result.<span class="hljs-title function_">stream</span>()
                    .<span class="hljs-title function_">map</span>(map -&gt; map.<span class="hljs-title function_">entrySet</span>().<span class="hljs-title function_">stream</span>()
                            .<span class="hljs-title function_">map</span>(e -&gt; e.<span class="hljs-title function_">getKey</span>() + <span class="hljs-string">"ï¼š"</span> + e.<span class="hljs-title function_">getValue</span>())
                            .<span class="hljs-title function_">collect</span>(<span class="hljs-title class_">Collectors</span>.<span class="hljs-title function_">joining</span>(<span class="hljs-string">" | "</span>)))
                    .<span class="hljs-title function_">collect</span>(<span class="hljs-title class_">Collectors</span>.<span class="hljs-title function_">joining</span>(<span class="hljs-string">"\n"</span>));
        }
    }
}
</code></pre>
<h5 data-id="heading-11">4. æš´éœ²APIï¼šç”¨æˆ·äº¤äº’å…¥å£</h5>
<pre><code class="hljs language-less" lang="less"><span class="hljs-variable">@RestController</span>
<span class="hljs-variable">@RequestMapping</span>(<span class="hljs-string">"/api/ai/query"</span>)
public class OrderTextToSqlController {
    <span class="hljs-variable">@Autowired</span> private OrderTextToSqlService service;

    <span class="hljs-variable">@PostMapping</span>
    public ResponseEntity&lt;String&gt; <span class="hljs-built_in">query</span>(<span class="hljs-variable">@RequestBody</span> Map&lt;String, String&gt; request) {
        <span class="hljs-selector-tag">try</span> {
            <span class="hljs-selector-tag">String</span> <span class="hljs-selector-tag">result</span> = <span class="hljs-selector-tag">service</span><span class="hljs-selector-class">.query</span>(request.<span class="hljs-built_in">get</span>(<span class="hljs-string">"question"</span>));
            <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">ResponseEntity</span><span class="hljs-selector-class">.ok</span>(result);
        } <span class="hljs-selector-tag">catch</span> (RuntimeException e) {
            <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">ResponseEntity</span><span class="hljs-selector-class">.badRequest</span>()<span class="hljs-selector-class">.body</span>(e.<span class="hljs-built_in">getMessage</span>());
        }
    }
}
</code></pre>
<h4 data-id="heading-12">å››ã€æµ‹è¯•éªŒè¯ï¼šåˆæ³•/è¿è§„æŸ¥è¯¢éƒ½èƒ½æ‹¦æˆª</h4>
<h5 data-id="heading-13">1. åˆæ³•æŸ¥è¯¢ï¼ˆæ­£å¸¸è¿”å›ï¼‰</h5>
<ul>
<li>
<p>è¯·æ±‚ï¼š<code>POST /api/ai/query</code>ï¼Œè¯·æ±‚ä½“ <code>{"question":"æˆ‘è¿‘30å¤©å·²æ”¯ä»˜çš„è®¢å•æœ‰å¤šå°‘ç¬”ï¼Ÿ"}</code></p>
</li>
<li>
<p>AIç”ŸæˆSQLï¼š</p>
<ul>
<li>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">COUNT</span>(<span class="hljs-operator">*</span>) <span class="hljs-keyword">FROM</span> order_main 
<span class="hljs-keyword">WHERE</span> status<span class="hljs-operator">=</span><span class="hljs-number">1</span> <span class="hljs-keyword">AND</span> create_time <span class="hljs-operator">&gt;=</span> DATE_SUB(NOW(), <span class="hljs-type">INTERVAL</span> <span class="hljs-number">30</span> <span class="hljs-keyword">DAY</span>) 
<span class="hljs-keyword">AND</span> order_main.user_id<span class="hljs-operator">=</span><span class="hljs-number">123</span>;
</code></pre>
</li>
</ul>
</li>
<li>
<p>å“åº”ï¼š<code>"ç¬¦åˆæ¡ä»¶çš„è®°å½•å…±3æ¡"</code></p>
</li>
</ul>
<h5 data-id="heading-14">2. è¿è§„æŸ¥è¯¢ï¼ˆè‡ªåŠ¨æ‹¦æˆªï¼‰</h5>
<ul>
<li>è¶ŠæƒæŸ¥è¯¢ï¼š<code>{"question":"æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·çš„è®¢å•"}</code> â†’ å“åº”ï¼š<code>"è¯¥æŸ¥è¯¢ä¸ç¬¦åˆè§„åˆ™ï¼ŒåŸå› ï¼šè¶ŠæƒæŸ¥è¯¢"</code></li>
<li>æ•æ„Ÿå­—æ®µï¼š<code>{"question":"æˆ‘çš„æ‰‹æœºå·æ˜¯å¤šå°‘ï¼Ÿ"}</code> â†’ å“åº”ï¼š<code>"è¯¥æŸ¥è¯¢ä¸ç¬¦åˆè§„åˆ™ï¼ŒåŸå› ï¼šæ¶‰åŠæ•æ„Ÿå­—æ®µ"</code></li>
<li>SQLæ³¨å…¥ï¼š<code>{"question":"æŸ¥è¯¢æˆ‘çš„è®¢å• where 1=1"}</code> â†’ å“åº”ï¼š<code>"æŸ¥è¯¢å¤±è´¥ï¼šæŸ¥è¯¢åŒ…å«æ½œåœ¨é£é™©"</code></li>
</ul>
<h3 data-id="heading-15">ğŸš¨ é¿å‘æŒ‡å—ï¼ˆæ–°æ‰‹å¿…çœ‹ï¼‰</h3>
<ol start="4">
<li>æ•°æ®åº“ç”¨æˆ·å¿…é¡»è®¾ä¸º<strong>åªè¯»</strong>ï¼Œä»…æˆäºˆSELECTæƒé™ï¼Œé¿å…LLMçªç ´é™åˆ¶ï¼›</li>
<li>æç¤ºè¯è¦æ˜ç¡®â€œå…è®¸çš„è¡¨/å­—æ®µâ€ï¼Œå‡å°‘LLMæ­§ä¹‰ï¼ˆæ¯”å¦‚æ˜ç¡®ç¦æ­¢sys_userè¡¨ï¼‰ï¼›</li>
<li>ç»™è®¢å•è¡¨çš„<code>user_id+create_time</code>åŠ ç´¢å¼•ï¼Œé¿å…å¤æ‚æŸ¥è¯¢å¡é¡¿ï¼›</li>
<li>æ•æ„Ÿå­—æ®µè¦å•ç‹¬ç»´æŠ¤åœ¨<code>SENSITIVE_FIELDS</code>ï¼Œæ–°å¢æ•æ„Ÿå­—æ®µç›´æ¥æ·»åŠ å³å¯ã€‚</li>
</ol>
<h3 data-id="heading-16">ğŸ“Œ æ€»ç»“</h3>
<p>è¿™å¥—æ–¹æ¡ˆç”¨Spring AI+Text-to-SQLï¼Œå®Œç¾è§£å†³äº†â€œéæŠ€æœ¯ç”¨æˆ·æŸ¥æ•°æ®â€å’Œâ€œå®‰å…¨é£é™©â€ä¸¤å¤§ç—›ç‚¹ï¼š</p>
<ul>
<li>å¯¹ç”¨æˆ·ï¼šæ— éœ€æ‡‚SQLï¼Œè‡ªç„¶è¯­è¨€éšä¾¿é—®ï¼ŒæŸ¥è¯¢æ•ˆç‡ç¿»å€ï¼›</li>
<li>å¯¹å¼€å‘è€…ï¼š5åˆ†é’Ÿè½åœ°ï¼Œé›¶ä¾µå…¥é›†æˆSpringç”Ÿæ€ï¼Œå®‰å…¨é˜²æŠ¤æ— æ­»è§’ã€‚</li>
</ul>
<p>ç°åœ¨å°±åŠ¨æ‰‹è¯•è¯•å§ï¼å¦‚æœéœ€è¦å®Œæ•´æºç ã€LLMæ›¿æ¢æ•™ç¨‹ï¼ˆå¦‚é€šä¹‰åƒé—®/æœ¬åœ°Ollamaï¼‰ï¼Œè¯„è®ºåŒºå›å¤ã€AIæŸ¥è¯¢ã€‘å³å¯è·å–ï½</p>
<p>å…³æ³¨æˆ‘ï¼Œä¸‹æœŸå¸¦æ¥ã€ŠAIæŸ¥è¯¢ç»“æœå¯è§†åŒ–ã€‹ã€Šå¤šLLMé€‚é…æ–¹æ¡ˆã€‹ï¼Œè®©ä½ çš„AIæ•°æ®æŸ¥è¯¢æ›´å¼ºå¤§ï¼ğŸ”¥</p>
<p>#SpringAI #TextToSQL #Javaå¼€å‘ #AIåº”ç”¨ #ä¿å§†çº§æ•™ç¨‹</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ­å»ºNginxå®‰å…¨ç½‘å…³ï¼š3æ­¥å µä½90%çš„Webæ¼æ´ï¼ä¼ä¸šçº§é˜²æŠ¤å®æˆ˜æŒ‡å—]]></title>    <link>https://juejin.cn/post/7582777037863796786</link>    <guid>https://juejin.cn/post/7582777037863796786</guid>    <pubDate>2025-12-12T10:40:37.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582777037863796786" data-draft-id="7582777037863780402" data-original-type="2" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ­å»ºNginxå®‰å…¨ç½‘å…³ï¼š3æ­¥å µä½90%çš„Webæ¼æ´ï¼ä¼ä¸šçº§é˜²æŠ¤å®æˆ˜æŒ‡å—"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-12T10:40:37.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="PFinalç¤¾åŒº_å—ä¸"/> <meta itemprop="url" content="https://juejin.cn/user/1855631357906040"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ­å»ºNginxå®‰å…¨ç½‘å…³ï¼š3æ­¥å µä½90%çš„Webæ¼æ´ï¼ä¼ä¸šçº§é˜²æŠ¤å®æˆ˜æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1855631357906040/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    PFinalç¤¾åŒº_å—ä¸
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-12T10:40:37.000Z" title="Fri Dec 12 2025 10:40:37 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    12
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»31åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä»0æ­å»ºNginxå®‰å…¨ç½‘å…³ï¼š3æ­¥å µä½90%çš„Webæ¼æ´ï¼</h2>
<blockquote>
<p><strong>è­¦å‘Š</strong>ï¼šä½ çš„ç½‘ç«™å¯èƒ½æ­£åœ¨è¢«æ”»å‡»ï¼</p>
<p>æ ¹æ®2024å¹´Webå®‰å…¨æŠ¥å‘Šï¼Œè¶…è¿‡<strong>87%çš„ä¼ä¸šç½‘ç«™</strong>å­˜åœ¨Nginxé…ç½®å®‰å…¨éšæ‚£ï¼Œå…¶ä¸­<strong>Hostå¤´æ”»å‡»</strong>å’Œ<strong>æ•æ„Ÿæ–‡ä»¶æ³„éœ²</strong>å æ¯”é«˜è¾¾<strong>63%</strong>ã€‚</p>
<p>æœ¬æ–‡å°†æ‰‹æŠŠæ‰‹æ•™ä½ æ„å»ºä¼ä¸šçº§Nginxå®‰å…¨ç½‘å…³ï¼Œ<strong>é›¶æˆæœ¬</strong>å®ç°<strong>ç­‰ä¿2.0åˆè§„</strong>é˜²æŠ¤ã€‚</p>
</blockquote>
<h3 data-id="heading-1">ğŸš¨ ç°çŠ¶ï¼šä½ çš„ç½‘ç«™é¢ä¸´è¿™äº›å¨èƒå—ï¼Ÿ</h3>
<h4 data-id="heading-2">çœŸå®æ¡ˆä¾‹å›é¡¾</h4>
<p><strong>æ¡ˆä¾‹ä¸€ï¼šHostå¤´æ”»å‡»å¯¼è‡´ç”¨æˆ·å¯†ç æ³„éœ²</strong></p>
<pre><code class="hljs language-vbnet" lang="vbnet"><span class="hljs-number">2024</span>å¹´<span class="hljs-number">3</span>æœˆï¼ŒæŸç”µå•†å¹³å°é­å—Hostå¤´æ”»å‡»
æ”»å‡»è€…æ„é€ æ¶æ„è¯·æ±‚ï¼š
<span class="hljs-keyword">GET</span> /password-reset HTTP/<span class="hljs-number">1.1</span>
<span class="hljs-symbol">Host:</span> attacker-controlled-domain.com

ç»“æœï¼šå¹³å°å‘é€çš„é‡ç½®é“¾æ¥æŒ‡å‘æ”»å‡»è€…åŸŸå
å½±å“ï¼šè¶…è¿‡<span class="hljs-number">1200</span>åç”¨æˆ·å¯†ç è¢«é‡ç½®ï¼Œç›´æ¥ç»æµæŸå¤±<span class="hljs-number">50</span>ä¸‡+
</code></pre>
<p><strong>æ¡ˆä¾‹äºŒï¼šæ•æ„Ÿæ–‡ä»¶æ³„éœ²å¼•å‘æ•°æ®ç¾éš¾</strong></p>
<pre><code class="hljs language-diff" lang="diff">2024å¹´1æœˆï¼ŒæŸSaaSå…¬å¸.gitç›®å½•è¢«å…¬å¼€è®¿é—®
æ”»å‡»è€…ä¸‹è½½å®Œæ•´ä»£ç ä»“åº“ï¼Œå‘ç°ï¼š
<span class="hljs-deletion">- æ•°æ®åº“è¿æ¥å­—ç¬¦ä¸²ï¼ˆåŒ…å«å¯†ç ï¼‰</span>
<span class="hljs-deletion">- APIå¯†é’¥å’ŒToken</span>
<span class="hljs-deletion">- å†…éƒ¨ç½‘ç»œæ¶æ„æ–‡æ¡£</span>
<span class="hljs-deletion">- å‘˜å·¥ä¸ªäººä¿¡æ¯è¡¨</span>

ç»“æœï¼šè¢«å‹’ç´¢æ¯”ç‰¹å¸30æšï¼Œå®¢æˆ·æ•°æ®åœ¨æš—ç½‘å‡ºå”®
</code></pre>
<h4 data-id="heading-3">å¸¸è§Webå®‰å…¨æ¼æ´æ¸…å•</h4>









































<table><thead><tr><th>æ¼æ´ç±»å‹</th><th>å±å®³ç­‰çº§</th><th>æ£€æµ‹æ–¹æ³•</th><th>å½±å“èŒƒå›´</th></tr></thead><tbody><tr><td><strong>Hostå¤´æ³¨å…¥</strong></td><td>ğŸ”´ ä¸¥é‡</td><td><code>curl -H "Host: evil.com"</code></td><td>å‡­è¯çªƒå–ã€ä¼šè¯åŠ«æŒ</td></tr><tr><td><strong>æ•æ„Ÿæ–‡ä»¶æ³„éœ²</strong></td><td>ğŸ”´ ä¸¥é‡</td><td>è®¿é—®<code>/.git/config</code></td><td>æºç æ³„éœ²ã€é…ç½®æš´éœ²</td></tr><tr><td><strong>ç›®å½•éå†</strong></td><td>ğŸŸ¡ é«˜å±</td><td><code>/../../../etc/passwd</code></td><td>ç³»ç»Ÿæ–‡ä»¶è¯»å–</td></tr><tr><td><strong>ç‰ˆæœ¬ä¿¡æ¯æ³„éœ²</strong></td><td>ğŸŸ¡ ä¸­å±</td><td><code>curl -I</code>æŸ¥çœ‹Serverå¤´</td><td>ç²¾å‡†æ”»å‡»ã€ç‰ˆæœ¬æ¼æ´åˆ©ç”¨</td></tr><tr><td><strong>ç‚¹å‡»åŠ«æŒ</strong></td><td>ğŸŸ¡ ä¸­å±</td><td>iframeåµŒå¥—æµ‹è¯•</td><td>ç”¨æˆ·è¯¯å¯¼ã€æ¶æ„æ“ä½œ</td></tr></tbody></table>
<h3 data-id="heading-4">ğŸ›¡ï¸ æ ¸å¿ƒé˜²æŠ¤ç­–ç•¥ï¼š3æ­¥æ„å»ºå®‰å…¨ç½‘å…³</h3>
<h4 data-id="heading-5">ç¬¬ä¸€æ­¥ï¼šèº«ä»½éšè— - æ¶ˆé™¤æ”»å‡»é¢ä¿¡æ¯</h4>
<h5 data-id="heading-6">1.1 ç‰ˆæœ¬å·éšè—ï¼ˆåŸºç¡€ä½†å…³é”®ï¼‰</h5>
<p><strong>ä¸ºä»€ä¹ˆå¿…é¡»éšè—ç‰ˆæœ¬å·ï¼Ÿ</strong></p>
<ul>
<li>Nginxç‰ˆæœ¬æ³„éœ² = ç»™æ”»å‡»è€…æä¾›<strong>ç²¾ç¡®çš„æ”»å‡»åœ°å›¾</strong></li>
<li>CVEæ¼æ´æ•°æ®åº“éƒ½æ˜¯æŒ‰ç‰ˆæœ¬å·ç»„ç»‡çš„</li>
<li>æ”»å‡»è€…å¯ä»¥<strong>è‡ªåŠ¨åŒ–æ‰«æ</strong>ç‰¹å®šç‰ˆæœ¬çš„å·²çŸ¥æ¼æ´</li>
</ul>
<p><strong>é…ç½®æ–¹æ³•ï¼š</strong></p>
<pre><code class="hljs language-nginx" lang="nginx"># /etc/nginx/nginx.conf
http {
    # éšè—ç‰ˆæœ¬å· - è¿™æ˜¯ç¬¬ä¸€é“é˜²çº¿
    server_tokens off;
    
    # å…¶ä»–é…ç½®...
}
</code></pre>
<p><strong>éªŒè¯æ•ˆæœï¼š</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ä¼˜åŒ–å‰</span>
$ curl -I http://your-domain.com
HTTP/1.1 200 OK
Server: nginx/1.24.0  <span class="hljs-comment"># â† ç‰ˆæœ¬æš´éœ²ï¼</span>

<span class="hljs-comment"># ä¼˜åŒ–å</span>
$ curl -I http://your-domain.com
HTTP/1.1 200 OK
Server: nginx           <span class="hljs-comment"># â† ç‰ˆæœ¬éšè—ï¼</span>
</code></pre>
<h5 data-id="heading-7">1.2 é”™è¯¯é¡µé¢ä¿¡æ¯æ¸…ç†</h5>
<p><strong>è‡ªå®šä¹‰é”™è¯¯é¡µé¢ï¼ˆé˜²æ­¢ä¿¡æ¯æ³„éœ²ï¼‰ï¼š</strong></p>
<pre><code class="hljs language-nginx" lang="nginx"># åˆ›å»ºè‡ªå®šä¹‰é”™è¯¯é¡µé¢
cat &gt; /var/www/html/error.html &lt;&lt; 'EOF'
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;&lt;title&gt;ç³»ç»Ÿç»´æŠ¤ä¸­&lt;/title&gt;&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;ç³»ç»Ÿç»´æŠ¤ä¸­&lt;/h1&gt;
    &lt;p&gt;è¯·ç¨åé‡è¯•ï¼Œæˆ–è”ç³»æŠ€æœ¯æ”¯æŒã€‚&lt;/p&gt;
&lt;/body&gt;
&lt;/html&gt;
EOF

# Nginxé…ç½®
server {
    error_page 400 401 402 403 404 405 406 407 408 409 410 411 412 413 414 415 416 417 418 421 422 423 424 425 426 428 429 431 451 500 501 502 503 504 505 506 507 508 510 511 /error.html;
    
    location = /error.html {
        internal;
        root /var/www/html;
    }
}
</code></pre>
<h4 data-id="heading-8">ç¬¬äºŒæ­¥ï¼šå…¥å£å°å µ - æ„å»ºå¤šå±‚é˜²æŠ¤ç½‘</h4>
<h5 data-id="heading-9">2.1 æ•æ„Ÿæ–‡ä»¶è®¿é—®æ§åˆ¶</h5>
<p><strong>ä¸ºä»€ä¹ˆä¼ ç»Ÿé˜²æŠ¤ä¸å¤Ÿï¼Ÿ</strong></p>
<ul>
<li>ç®€å•çš„<code>deny all</code>ä¼šè¿”å›403ï¼Œä½†<strong>ä»ç„¶æ³„éœ²æ–‡ä»¶å­˜åœ¨æ€§</strong></li>
<li>æ”»å‡»è€…å¯ä»¥é€šè¿‡<strong>å“åº”å·®å¼‚</strong>åˆ¤æ–­æ–‡ä»¶æ˜¯å¦å­˜åœ¨</li>
<li>éœ€è¦<strong>ç»Ÿä¸€è¿”å›404</strong>ï¼Œè®©æ”»å‡»è€…æ— æ³•åŒºåˆ†</li>
</ul>
<p><strong>ä¼ä¸šçº§é˜²æŠ¤é…ç½®ï¼š</strong></p>
<pre><code class="hljs language-nginx" lang="nginx"># ç¬¬ä¸€å±‚ï¼šéšè—æ–‡ä»¶é˜²æŠ¤ï¼ˆä»¥ç‚¹å¼€å¤´çš„æ–‡ä»¶ï¼‰
location ~ /\. {
    deny all;
    return 404;  # ç»Ÿä¸€è¿”å›404ï¼Œä¸æš´éœ²æ–‡ä»¶å­˜åœ¨æ€§
}

# ç¬¬äºŒå±‚ï¼šç‰ˆæœ¬æ§åˆ¶æ–‡ä»¶é˜²æŠ¤
location ~* \.(git|svn|hg|bzr)/ {
    deny all;
    return 404;
}

# ç¬¬ä¸‰å±‚ï¼šé…ç½®æ–‡ä»¶å’Œå¤‡ä»½æ–‡ä»¶é˜²æŠ¤
location ~* \.(env|config|conf|ini|properties|yaml|yml)$ {
    deny all;
    return 404;
}

# ç¬¬å››å±‚ï¼šå¼€å‘æ–‡ä»¶é˜²æŠ¤
location ~* \.(log|cache|tmp|bak|backup|old|save|sql|db)$ {
    deny all;
    return 404;
}

# ç¬¬äº”å±‚ï¼šå‹ç¼©åŒ…å’Œæ–‡æ¡£é˜²æŠ¤
location ~* \.(zip|tar|gz|rar|7z|pdf|doc|docx|xls|xlsx)$ {
    deny all;
    return 404;
}

# ç¬¬å…­å±‚ï¼šç‰¹æ®Šç›®å½•é˜²æŠ¤
location ~* ^/(admin|manage|backend|api-docs|swagger|phpmyadmin|wp-admin)/ {
    deny all;
    return 404;
}
</code></pre>
<h5 data-id="heading-10">2.2 ç›®å½•éå†é˜²æŠ¤ï¼ˆPath Traversalï¼‰</h5>
<p><strong>æ”»å‡»åŸç†åˆ†æï¼š</strong></p>
<pre><code class="hljs language-bash" lang="bash">æ­£å¸¸è¯·æ±‚: GET /images/photo.jpg
æ”»å‡»è¯·æ±‚: GET /images/../../../etc/passwd

ç›®æ ‡ï¼šè·³å‡ºWebç›®å½•ï¼Œè®¿é—®ç³»ç»Ÿæ–‡ä»¶
</code></pre>
<p><strong>é˜²æŠ¤ç­–ç•¥ï¼š</strong></p>
<pre><code class="hljs language-nginx" lang="nginx"># æ–¹æ³•1ï¼šæ˜¾å¼æ‹’ç»è·¯å¾„éå†æ¨¡å¼
location ~ \.\./ {
    deny all;
    return 404;
}

# æ–¹æ³•2ï¼šé™åˆ¶è·¯å¾„æ·±åº¦ï¼ˆæ¨èï¼‰
location ~* ^(.*/){3,}.*\.\. {
    deny all;
    return 404;
}

# æ–¹æ³•3ï¼šURLè§£ç åæ£€æŸ¥ï¼ˆé˜²æ­¢ç¼–ç ç»•è¿‡ï¼‰
location ~* "%2e%2e%2f" {
    deny all;
    return 404;
}
</code></pre>
<h5 data-id="heading-11">2.3 HTTPæ–¹æ³•é™åˆ¶</h5>
<p>**æœ€å°æƒé™åŸåˆ™ï¼š**åªå…è®¸å¿…è¦çš„HTTPæ–¹æ³•</p>
<pre><code class="hljs language-nginx" lang="nginx"># é™åˆ¶HTTPæ–¹æ³•
if ($request_method !~ ^(GET|HEAD|POST)$) {
    return 405;
}

# æ›´ä¸¥æ ¼çš„APIæ¥å£é™åˆ¶
location /api/ {
    # APIåªå…è®¸GETå’ŒPOST
    if ($request_method !~ ^(GET|POST)$) {
        return 405;
    }
    
    # ä¸Šä¼ æ¥å£åªå…è®¸POST
    location /api/upload {
        if ($request_method != POST) {
            return 405;
        }
    }
}
</code></pre>
<h4 data-id="heading-12">ç¬¬ä¸‰æ­¥ï¼šèº«ä»½é”å®š - é˜²å¾¡Hostå¤´æ”»å‡»</h4>
<h5 data-id="heading-13">3.1 Hostå¤´æ”»å‡»åŸç†æ·±åº¦è§£æ</h5>
<p><strong>æ”»å‡»åœºæ™¯é‡ç°ï¼š</strong></p>
<pre><code class="hljs language-http" lang="http"># æ­£å¸¸è¯·æ±‚
GET /api/password-reset HTTP/1.1
Host: legitimate-site.com

# æ”»å‡»è¯·æ±‚
GET /api/password-reset HTTP/1.1
Host: attacker-controlled.com
</code></pre>
<p><strong>æ”»å‡»å½±å“ï¼š</strong></p>
<ol>
<li><strong>å¯†ç é‡ç½®é“¾æ¥åŠ«æŒ</strong> - ç”¨æˆ·æ”¶åˆ°çš„é‡ç½®é‚®ä»¶åŒ…å«æ¶æ„é“¾æ¥</li>
<li><strong>SSRFæ”»å‡»</strong> - æœåŠ¡ç«¯è¯·æ±‚ä¼ªé€ ï¼Œè®¿é—®å†…ç½‘èµ„æº</li>
<li><strong>ç¼“å­˜æ±¡æŸ“</strong> - æ±¡æŸ“CDNç¼“å­˜ï¼Œä¼ æ’­æ¶æ„å†…å®¹</li>
<li><strong>ä¼šè¯åŠ«æŒ</strong> - é‡å®šå‘åˆ°é’“é±¼ç½‘ç«™çªƒå–å‡­è¯</li>
</ol>
<h5 data-id="heading-14">3.2 ä¼ä¸šçº§Hostå¤´é˜²æŠ¤æ–¹æ¡ˆ</h5>
<p><strong>ç¬¬ä¸€å±‚ï¼šé»˜è®¤æ‹’ç»æœåŠ¡å™¨å—</strong></p>
<pre><code class="hljs language-nginx" lang="nginx"># è¿™ä¸ªé…ç½®å¿…é¡»æ”¾åœ¨æ‰€æœ‰serverå—ä¹‹å‰ï¼
server {
    listen 80 default_server;
    listen [::]:80 default_server;
    listen 443 ssl default_server;
    listen [::]:443 ssl default_server;
    
    # æ‹’ç»æ‰€æœ‰æœªæ˜ç¡®åŒ¹é…çš„è¯·æ±‚
    server_name _ "";
    
    # è¿”å›403ç¦æ­¢è®¿é—®
    return 403;
    
    # å¯é€‰ï¼šè®°å½•æ”»å‡»æ—¥å¿—
    access_log /var/log/nginx/block-host-attack.log;
}
</code></pre>
<p><strong>ç¬¬äºŒå±‚ï¼šæ˜ç¡®åŸŸåç™½åå•</strong></p>
<pre><code class="hljs language-nginx" lang="nginx"># åªå…è®¸ç‰¹å®šçš„åˆæ³•åŸŸå
server {
    listen 80;
    listen [::]:80;
    listen 443 ssl http2;
    listen [::]:443 ssl http2;
    
    # æ˜ç¡®æŒ‡å®šå…è®¸çš„åŸŸå
    server_name example.com www.example.com;
    
    # å¼ºåˆ¶HTTPSï¼ˆå¦‚æœé…ç½®äº†SSLï¼‰
    if ($scheme != "https") {
        return 301 https://$server_name$request_uri;
    }
    
    # ä½ çš„ä¸šåŠ¡é…ç½®...
}
</code></pre>
<p><strong>ç¬¬ä¸‰å±‚ï¼šHostå¤´éªŒè¯</strong></p>
<pre><code class="hljs language-nginx" lang="nginx"># åœ¨locationå—ä¸­æ·»åŠ Hostå¤´éªŒè¯
location / {
    # éªŒè¯Hostå¤´æ˜¯å¦åŒ¹é…server_name
    if ($host !~* ^(example\.com|www\.example\.com)$) {
        return 403;
    }
    
    # é¢å¤–çš„Hostå¤´æ ¼å¼éªŒè¯
    if ($host ~* [^a-z0-9\-\.]) {
        return 403;
    }
    
    # ä»£ç†åˆ°åç«¯æ—¶ä¿ç•™åŸå§‹Host
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto $scheme;
}
</code></pre>
<h5 data-id="heading-15">3.3 é«˜çº§é˜²æŠ¤ï¼šå¤šå±‚éªŒè¯æœºåˆ¶</h5>
<p><strong>ç»“åˆåœ°ç†ä½ç½®å’Œåº”ç”¨å±‚éªŒè¯ï¼š</strong></p>
<pre><code class="hljs language-nginx" lang="nginx"># åœ°ç†ä½ç½®é™åˆ¶ï¼ˆå¯é€‰ï¼‰
geoip_country /usr/share/GeoIP/GeoIP.dat;
map $geoip_country_code $allowed_country {
    default no;
    CN yes;      # ä¸­å›½
    US yes;      # ç¾å›½
    JP yes;      # æ—¥æœ¬
}

server {
    # ... å…¶ä»–é…ç½® ...
    
    location / {
        # åœ°ç†ä½ç½®éªŒè¯
        if ($allowed_country = no) {
            return 403;
        }
        
        # Hostå¤´éªŒè¯
        if ($host !~* ^(example\.com|www\.example\.com)$) {
            return 403;
        }
        
        # User-AgentéªŒè¯ï¼ˆé˜²æ­¢è‡ªåŠ¨åŒ–æ”»å‡»ï¼‰
        if ($http_user_agent ~* (wget|curl|libwww-perl|python|nikto|scan|nmap|sqlmap|hydra|gobuster)) {
            return 403;
        }
        
        proxy_pass http://backend;
    }
}
</code></pre>
<h3 data-id="heading-16">ğŸš€ è¿›é˜¶é˜²æŠ¤ï¼šå®‰å…¨å“åº”å¤´é…ç½®</h3>
<h4 data-id="heading-17">4.1 ç°ä»£æµè§ˆå™¨å®‰å…¨ç­–ç•¥</h4>
<p><strong>ä¸ºä»€ä¹ˆéœ€è¦å®‰å…¨å“åº”å¤´ï¼Ÿ</strong></p>
<ul>
<li><strong>çºµæ·±é˜²å¾¡</strong>ï¼šå³ä½¿åº”ç”¨å±‚æœ‰æ¼æ´ï¼Œæµè§ˆå™¨å®‰å…¨æœºåˆ¶å¯æä¾›é¢å¤–ä¿æŠ¤</li>
<li><strong>åˆè§„è¦æ±‚</strong>ï¼šç­‰ä¿2.0æ˜ç¡®è¦æ±‚é…ç½®å®‰å…¨å“åº”å¤´</li>
<li><strong>ç”¨æˆ·ä½“éªŒ</strong>ï¼šé˜²æ­¢ç‚¹å‡»åŠ«æŒç­‰æ”»å‡»å½±å“ç”¨æˆ·ä¿¡ä»»</li>
</ul>
<p><strong>å®Œæ•´å®‰å…¨é…ç½®ï¼š</strong></p>
<pre><code class="hljs language-nginx" lang="nginx"># å®‰å…¨å“åº”å¤´é…ç½®
add_header X-Frame-Options "DENY" always;
add_header X-Content-Type-Options "nosniff" always;
add_header X-XSS-Protection "1; mode=block" always;
add_header Referrer-Policy "strict-origin-when-cross-origin" always;

# å†…å®¹å®‰å…¨ç­–ç•¥ï¼ˆCSPï¼‰- æ ¹æ®ä¸šåŠ¡éœ€æ±‚è°ƒæ•´
add_header Content-Security-Policy "default-src 'self'; script-src 'self' 'unsafe-inline' https:; style-src 'self' 'unsafe-inline' https:; img-src 'self' data: https:; font-src 'self' https:; connect-src 'self' https:; media-src 'self'; object-src 'none'; child-src 'none'; form-action 'self'; base-uri 'self'; frame-ancestors 'none';" always;

# ä¸¥æ ¼ä¼ è¾“å®‰å…¨ï¼ˆHSTSï¼‰- ä»…HTTPSç«™ç‚¹ä½¿ç”¨
add_header Strict-Transport-Security "max-age=31536000; includeSubDomains; preload" always;

# æƒé™ç­–ç•¥ï¼ˆæ§åˆ¶æµè§ˆå™¨åŠŸèƒ½ï¼‰
add_header Permissions-Policy "geolocation=(), microphone=(), camera=(), payment=(), usb=(), magnetometer=(), gyroscope=(), accelerometer=()" always;
</code></pre>
<h4 data-id="heading-18">4.2 é€Ÿç‡é™åˆ¶å’ŒDDoSé˜²æŠ¤</h4>
<p><strong>åŸºç¡€é€Ÿç‡é™åˆ¶ï¼š</strong></p>
<pre><code class="hljs language-nginx" lang="nginx"># å®šä¹‰é€Ÿç‡é™åˆ¶åŒºåŸŸ
limit_req_zone $binary_remote_addr zone=api:10m rate=10r/s;
limit_req_zone $binary_remote_addr zone=login:10m rate=1r/s;

server {
    location /api/ {
        # APIæ¥å£é€Ÿç‡é™åˆ¶
        limit_req zone=api burst=20 nodelay;
        limit_req_status 429;
        
        proxy_pass http://backend;
    }
    
    location /login {
        # ç™»å½•æ¥å£æ›´ä¸¥æ ¼çš„é™åˆ¶
        limit_req zone=login burst=5 nodelay;
        limit_req_status 429;
        
        proxy_pass http://backend;
    }
}
</code></pre>
<p><strong>é«˜çº§DDoSé˜²æŠ¤ï¼š</strong></p>
<pre><code class="hljs language-nginx" lang="nginx"># è¿æ¥æ•°é™åˆ¶
limit_conn_zone $binary_remote_addr zone=addr:10m;
limit_conn_zone $server_name zone=perserver:10m;

# è¯·æ±‚å¤§å°é™åˆ¶
client_max_body_size 10M;
client_body_timeout 12s;
client_header_timeout 12s;

server {
    # å•IPè¿æ¥æ•°é™åˆ¶
    limit_conn addr 100;
    limit_conn perserver 1000;
    
    # å¤§è¯·æ±‚é˜²æŠ¤
    location /upload {
        client_max_body_size 100M;
    }
}
</code></pre>
<h3 data-id="heading-19">ğŸ§ª å®Œæ•´éªŒè¯æµ‹è¯•æ–¹æ¡ˆ</h3>
<h4 data-id="heading-20">5.1 è‡ªåŠ¨åŒ–æµ‹è¯•è„šæœ¬</h4>
<p><strong>åˆ›å»ºå®‰å…¨æµ‹è¯•è„šæœ¬ï¼š</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>
<span class="hljs-comment"># nginx-security-test.sh</span>

DOMAIN=<span class="hljs-string">"your-domain.com"</span>
IP=<span class="hljs-string">"your-server-ip"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"ğŸ” å¼€å§‹Nginxå®‰å…¨ç½‘å…³éªŒè¯æµ‹è¯•..."</span>

<span class="hljs-comment"># 1. ç‰ˆæœ¬éšè—æµ‹è¯•</span>
<span class="hljs-built_in">echo</span> -e <span class="hljs-string">"\nğŸ“‹ 1. ç‰ˆæœ¬éšè—æµ‹è¯•"</span>
curl -s -I <span class="hljs-string">"http://<span class="hljs-variable">$DOMAIN</span>"</span> | grep -i <span class="hljs-string">"server"</span> || <span class="hljs-built_in">echo</span> <span class="hljs-string">"âœ… Serverå¤´å·²éšè—"</span>

<span class="hljs-comment"># 2. æ•æ„Ÿæ–‡ä»¶è®¿é—®æµ‹è¯•</span>
<span class="hljs-built_in">echo</span> -e <span class="hljs-string">"\nğŸ“‹ 2. æ•æ„Ÿæ–‡ä»¶è®¿é—®æµ‹è¯•"</span>
files=(<span class="hljs-string">".git/config"</span> <span class="hljs-string">".env"</span> <span class="hljs-string">"config.php.bak"</span> <span class="hljs-string">"admin/index.php"</span> <span class="hljs-string">"phpmyadmin/"</span>)
<span class="hljs-keyword">for</span> file <span class="hljs-keyword">in</span> <span class="hljs-string">"<span class="hljs-variable">${files[@]}</span>"</span>; <span class="hljs-keyword">do</span>
    response=$(curl -s -o /dev/null -w <span class="hljs-string">"%{http_code}"</span> <span class="hljs-string">"http://<span class="hljs-variable">$DOMAIN</span>/<span class="hljs-variable">$file</span>"</span>)
    <span class="hljs-keyword">if</span> [ <span class="hljs-string">"<span class="hljs-variable">$response</span>"</span> = <span class="hljs-string">"404"</span> ] || [ <span class="hljs-string">"<span class="hljs-variable">$response</span>"</span> = <span class="hljs-string">"403"</span> ]; <span class="hljs-keyword">then</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"âœ… <span class="hljs-variable">$file</span>: å·²é˜»æ­¢ (HTTP <span class="hljs-variable">$response</span>)"</span>
    <span class="hljs-keyword">else</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"âŒ <span class="hljs-variable">$file</span>: å¯è®¿é—® (HTTP <span class="hljs-variable">$response</span>)"</span>
    <span class="hljs-keyword">fi</span>
<span class="hljs-keyword">done</span>

<span class="hljs-comment"># 3. Hostå¤´æ”»å‡»æµ‹è¯•</span>
<span class="hljs-built_in">echo</span> -e <span class="hljs-string">"\nğŸ“‹ 3. Hostå¤´æ”»å‡»æµ‹è¯•"</span>
response=$(curl -s -o /dev/null -w <span class="hljs-string">"%{http_code}"</span> -H <span class="hljs-string">"Host: evil.com"</span> <span class="hljs-string">"http://<span class="hljs-variable">$IP</span>/"</span>)
<span class="hljs-keyword">if</span> [ <span class="hljs-string">"<span class="hljs-variable">$response</span>"</span> = <span class="hljs-string">"403"</span> ]; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"âœ… Hostå¤´æ”»å‡»: å·²é˜»æ­¢ (HTTP <span class="hljs-variable">$response</span>)"</span>
<span class="hljs-keyword">else</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"âŒ Hostå¤´æ”»å‡»: æœªé˜»æ­¢ (HTTP <span class="hljs-variable">$response</span>)"</span>
<span class="hljs-keyword">fi</span>

<span class="hljs-comment"># 4. ç›®å½•éå†æµ‹è¯•</span>
<span class="hljs-built_in">echo</span> -e <span class="hljs-string">"\nğŸ“‹ 4. ç›®å½•éå†æµ‹è¯•"</span>
response=$(curl -s -o /dev/null -w <span class="hljs-string">"%{http_code}"</span> <span class="hljs-string">"http://<span class="hljs-variable">$DOMAIN</span>/images/../../../etc/passwd"</span>)
<span class="hljs-keyword">if</span> [ <span class="hljs-string">"<span class="hljs-variable">$response</span>"</span> = <span class="hljs-string">"404"</span> ] || [ <span class="hljs-string">"<span class="hljs-variable">$response</span>"</span> = <span class="hljs-string">"403"</span> ]; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"âœ… ç›®å½•éå†: å·²é˜»æ­¢ (HTTP <span class="hljs-variable">$response</span>)"</span>
<span class="hljs-keyword">else</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"âŒ ç›®å½•éå†: æœªé˜»æ­¢ (HTTP <span class="hljs-variable">$response</span>)"</span>
<span class="hljs-keyword">fi</span>

<span class="hljs-comment"># 5. å®‰å…¨å“åº”å¤´æµ‹è¯•</span>
<span class="hljs-built_in">echo</span> -e <span class="hljs-string">"\nğŸ“‹ 5. å®‰å…¨å“åº”å¤´æµ‹è¯•"</span>
curl -s -I <span class="hljs-string">"http://<span class="hljs-variable">$DOMAIN</span>"</span> | grep -E <span class="hljs-string">"(X-Frame-Options|X-Content-Type-Options|X-XSS-Protection|Content-Security-Policy)"</span> || <span class="hljs-built_in">echo</span> <span class="hljs-string">"âš ï¸  éƒ¨åˆ†å®‰å…¨å¤´ç¼ºå¤±"</span>

<span class="hljs-built_in">echo</span> -e <span class="hljs-string">"\nğŸ¯ æµ‹è¯•å®Œæˆï¼å»ºè®®ä¿®å¤æ‰€æœ‰âŒæ ‡è®°çš„é—®é¢˜ã€‚"</span>
</code></pre>
<h4 data-id="heading-21">5.2 æ‰‹åŠ¨éªŒè¯å‘½ä»¤</h4>
<p><strong>å…³é”®éªŒè¯å‘½ä»¤ï¼š</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ç‰ˆæœ¬éšè—éªŒè¯</span>
curl -I http://your-domain.com

<span class="hljs-comment"># æ•æ„Ÿæ–‡ä»¶æµ‹è¯•</span>
curl -I http://your-domain.com/.git/config
curl -I http://your-domain.com/.env
curl -I http://your-domain.com/config.php.bak

<span class="hljs-comment"># Hostå¤´æ”»å‡»æµ‹è¯•</span>
curl -H <span class="hljs-string">"Host: evil.com"</span> -I http://your-server-ip/
curl -H <span class="hljs-string">"Host: attacker.com"</span> -I http://your-domain.com/

<span class="hljs-comment"># ç›®å½•éå†æµ‹è¯•</span>
curl -I <span class="hljs-string">"http://your-domain.com/images/../../../etc/passwd"</span>
curl -I <span class="hljs-string">"http://your-domain.com/static/..%2f..%2f..%2fetc%2fpasswd"</span>

<span class="hljs-comment"># å®‰å…¨å“åº”å¤´éªŒè¯</span>
curl -I http://your-domain.com | grep -i <span class="hljs-string">"x-frame\|x-content\|x-xss\|csp\|hsts"</span>
</code></pre>
<h3 data-id="heading-22">ğŸ“‹ ç”Ÿäº§ç¯å¢ƒå®Œæ•´é…ç½®æ¨¡æ¿</h3>
<h4 data-id="heading-23">6.1 ä¸»é…ç½®æ–‡ä»¶ï¼ˆnginx.confï¼‰</h4>
<pre><code class="hljs language-nginx" lang="nginx">user nginx;
worker_processes auto;
error_log /var/log/nginx/error.log warn;
pid /var/run/nginx.pid;

events {
    worker_connections 1024;
    use epoll;
    multi_accept on;
}

http {
    # åŸºç¡€ä¼˜åŒ–
    include /etc/nginx/mime.types;
    default_type application/octet-stream;
    
    # æ—¥å¿—æ ¼å¼
    log_format main '$remote_addr - $remote_user [$time_local] "$request" '
                    '$status $body_bytes_sent "$http_referer" '
                    '"$http_user_agent" "$http_x_forwarded_for" '
                    'rt=$request_time uct="$upstream_connect_time" '
                    'uht="$upstream_header_time" urt="$upstream_response_time"';
    
    access_log /var/log/nginx/access.log main;
    
    # æ€§èƒ½ä¼˜åŒ–
    sendfile on;
    tcp_nopush on;
    tcp_nodelay on;
    keepalive_timeout 65;
    types_hash_max_size 2048;
    client_max_body_size 10M;
    
    # Gzipå‹ç¼©
    gzip on;
    gzip_vary on;
    gzip_min_length 10240;
    gzip_proxied expired no-cache no-store private must-revalidate auth;
    gzip_types
        text/plain
        text/css
        text/xml
        text/javascript
        application/javascript
        application/xml+rss
        application/json;
    
    # é€Ÿç‡é™åˆ¶
    limit_req_zone $binary_remote_addr zone=api:10m rate=10r/s;
    limit_req_zone $binary_remote_addr zone=login:10m rate=1r/s;
    limit_conn_zone $binary_remote_addr zone=addr:10m;
    
    # éšè—ç‰ˆæœ¬å· - å®‰å…¨ç¬¬ä¸€é“é˜²çº¿
    server_tokens off;
    
    # é»˜è®¤æ‹’ç»æœåŠ¡å™¨å—ï¼ˆå¿…é¡»æ”¾åœ¨æœ€å‰é¢ï¼‰
    server {
        listen 80 default_server;
        listen [::]:80 default_server;
        listen 443 ssl default_server;
        listen [::]:443 ssl default_server;
        
        server_name _ "";
        return 403;
        
        # è®°å½•è¢«é˜»æ­¢çš„è¯·æ±‚
        access_log /var/log/nginx/block-default.log;
        
        ssl_certificate /etc/nginx/ssl/dummy.crt;
        ssl_certificate_key /etc/nginx/ssl/dummy.key;
    }
    
    # åŒ…å«ç«™ç‚¹é…ç½®
    include /etc/nginx/conf.d/*.conf;
}
</code></pre>
<h4 data-id="heading-24">6.2 ç«™ç‚¹å®‰å…¨é…ç½®ï¼ˆsite-security.confï¼‰</h4>
<pre><code class="hljs language-nginx" lang="nginx"># ä¸šåŠ¡ç«™ç‚¹å®‰å…¨é…ç½®
server {
    listen 80;
    listen [::]:80;
    server_name example.com www.example.com;
    
    # å¼ºåˆ¶HTTPS
    return 301 https://$server_name$request_uri;
}

server {
    listen 443 ssl http2;
    listen [::]:443 ssl http2;
    
    # æ˜ç¡®æŒ‡å®šå…è®¸çš„åŸŸå
    server_name example.com www.example.com;
    
    # SSLé…ç½®
    ssl_certificate /etc/nginx/ssl/example.com.crt;
    ssl_certificate_key /etc/nginx/ssl/example.com.key;
    ssl_protocols TLSv1.2 TLSv1.3;
    ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-RSA-AES128-SHA256:ECDHE-RSA-AES256-SHA384;
    ssl_prefer_server_ciphers off;
    ssl_session_cache shared:SSL:10m;
    ssl_session_timeout 10m;
    
    # HSTSï¼ˆHTTPä¸¥æ ¼ä¼ è¾“å®‰å…¨ï¼‰
    add_header Strict-Transport-Security "max-age=31536000; includeSubDomains; preload" always;
    
    # åŸºç¡€å®‰å…¨å“åº”å¤´
    add_header X-Frame-Options "DENY" always;
    add_header X-Content-Type-Options "nosniff" always;
    add_header X-XSS-Protection "1; mode=block" always;
    add_header Referrer-Policy "strict-origin-when-cross-origin" always;
    
    # CSPï¼ˆå†…å®¹å®‰å…¨ç­–ç•¥ï¼‰- æ ¹æ®å®é™…ä¸šåŠ¡è°ƒæ•´
    add_header Content-Security-Policy "default-src 'self'; script-src 'self' 'unsafe-inline' https:; style-src 'self' 'unsafe-inline' https:; img-src 'self' data: https:; font-src 'self' https:; connect-src 'self' https:; media-src 'self'; object-src 'none'; child-src 'none'; form-action 'self'; base-uri 'self'; frame-ancestors 'none';" always;
    
    # æƒé™ç­–ç•¥
    add_header Permissions-Policy "geolocation=(), microphone=(), camera=(), payment=(), usb=(), magnetometer=(), gyroscope=(), accelerometer=()" always;
    
    # æ ¹ç›®å½•é…ç½®
    root /var/www/html;
    index index.html index.htm index.php;
    
    # å®‰å…¨æ–‡ä»¶è®¿é—®æ§åˆ¶
    # éšè—æ–‡ä»¶ï¼ˆä»¥.å¼€å¤´ï¼‰
    location ~ /\. {
        deny all;
        return 404;
        access_log off;
        log_not_found off;
    }
    
    # ç‰ˆæœ¬æ§åˆ¶æ–‡ä»¶
    location ~* \.(git|svn|hg|bzr)/ {
        deny all;
        return 404;
        access_log off;
        log_not_found off;
    }
    
    # é…ç½®æ–‡ä»¶
    location ~* \.(env|config|conf|ini|properties|yaml|yml)$ {
        deny all;
        return 404;
        access_log off;
        log_not_found off;
    }
    
    # æ—¥å¿—å’Œå¤‡ä»½æ–‡ä»¶
    location ~* \.(log|cache|tmp|bak|backup|old|save|sql|db)$ {
        deny all;
        return 404;
        access_log off;
        log_not_found off;
    }
    
    # å‹ç¼©åŒ…å’Œæ–‡æ¡£
    location ~* \.(zip|tar|gz|rar|7z|pdf|doc|docx|xls|xlsx|ppt|pptx)$ {
        deny all;
        return 404;
        access_log off;
        log_not_found off;
    }
    
    # ç‰¹æ®Šç›®å½•
    location ~* ^/(admin|manage|backend|api-docs|swagger|phpmyadmin|wp-admin|wp-config|xmlrpc) {
        deny all;
        return 404;
        access_log off;
        log_not_found off;
    }
    
    # è·¯å¾„éå†é˜²æŠ¤
    location ~ \.\./ {
        deny all;
        return 404;
        access_log off;
        log_not_found off;
    }
    
    # URLè§£ç åçš„è·¯å¾„éå†
    location ~* "%2e%2e%2f" {
        deny all;
        return 404;
        access_log off;
        log_not_found off;
    }
    
    # APIæ¥å£é€Ÿç‡é™åˆ¶
    location /api/ {
        limit_req zone=api burst=20 nodelay;
        limit_req_status 429;
        
        # é¢å¤–çš„ç™»å½•æ¥å£é™åˆ¶
        location /api/login {
            limit_req zone=login burst=5 nodelay;
            limit_req_status 429;
        }
        
        # ä»£ç†åˆ°åç«¯
        proxy_pass http://backend;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        
        # è¿æ¥è¶…æ—¶è®¾ç½®
        proxy_connect_timeout 30s;
        proxy_send_timeout 30s;
        proxy_read_timeout 30s;
    }
    
    # é™æ€èµ„æºå¤„ç†
    location ~* \.(jpg|jpeg|png|gif|ico|css|js|woff|woff2|ttf|svg|eot)$ {
        expires 1y;
        add_header Cache-Control "public, immutable";
        access_log off;
    }
    
    # é»˜è®¤location
    location / {
        # Hostå¤´éªŒè¯
        if ($host !~* ^(example\.com|www\.example\.com)$) {
            return 403;
        }
        
        # User-AgentéªŒè¯ï¼ˆé˜²æ­¢è‡ªåŠ¨åŒ–æ”»å‡»ï¼‰
        if ($http_user_agent ~* (wget|curl|libwww-perl|python|nikto|scan|nmap|sqlmap|hydra|gobuster|dirbuster)) {
            return 403;
        }
        
        # è¯·æ±‚æ–¹æ³•é™åˆ¶
        if ($request_method !~ ^(GET|HEAD|POST)$) {
            return 405;
        }
        
        # ä»£ç†åˆ°åç«¯
        proxy_pass http://backend;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        
        # è¿æ¥è¶…æ—¶
        proxy_connect_timeout 30s;
        proxy_send_timeout 30s;
        proxy_read_timeout 30s;
    }
    
    # é”™è¯¯é¡µé¢
    error_page 400 401 402 403 404 405 406 407 408 409 410 411 412 413 414 415 416 417 418 421 422 423 424 425 426 428 429 431 451 500 501 502 503 504 505 506 507 508 510 511 /error.html;
    
    location = /error.html {
        internal;
        root /var/www/html;
    }
    
    # è®¿é—®æ—¥å¿—
    access_log /var/log/nginx/example.com-access.log main;
    error_log /var/log/nginx/example.com-error.log warn;
}
</code></pre>
<h3 data-id="heading-25">ğŸ¯ éƒ¨ç½²ä¸ç»´æŠ¤æŒ‡å—</h3>
<h4 data-id="heading-26">7.1 éƒ¨ç½²æ­¥éª¤</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1. å¤‡ä»½ç°æœ‰é…ç½®</span>
<span class="hljs-built_in">cp</span> /etc/nginx/nginx.conf /etc/nginx/nginx.conf.backup.$(<span class="hljs-built_in">date</span> +%Y%m%d)

<span class="hljs-comment"># 2. æµ‹è¯•æ–°é…ç½®</span>
nginx -t

<span class="hljs-comment"># 3. é‡æ–°åŠ è½½é…ç½®</span>
nginx -s reload

<span class="hljs-comment"># 4. éªŒè¯æ•ˆæœ</span>
./nginx-security-test.sh
</code></pre>
<h4 data-id="heading-27">7.2 ç›‘æ§ä¸å‘Šè­¦</h4>
<p><strong>è®¾ç½®ç›‘æ§è„šæœ¬ï¼š</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>
<span class="hljs-comment"># security-monitor.sh</span>

LOG_FILE=<span class="hljs-string">"/var/log/nginx/security-alerts.log"</span>
ALERT_EMAIL=<span class="hljs-string">"admin@example.com"</span>

<span class="hljs-comment"># ç›‘æ§Hostå¤´æ”»å‡»</span>
grep <span class="hljs-string">"Host:.*\.com"</span> /var/log/nginx/access.log | grep -v <span class="hljs-string">"example.com"</span> | <span class="hljs-keyword">while</span> <span class="hljs-built_in">read</span> line; <span class="hljs-keyword">do</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"[<span class="hljs-subst">$(date)</span>] Hostå¤´æ”»å‡»æ£€æµ‹: <span class="hljs-variable">$line</span>"</span> &gt;&gt; <span class="hljs-variable">$LOG_FILE</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"æ£€æµ‹åˆ°Hostå¤´æ”»å‡»: <span class="hljs-variable">$line</span>"</span> | mail -s <span class="hljs-string">"Nginxå®‰å…¨å‘Šè­¦"</span> <span class="hljs-variable">$ALERT_EMAIL</span>
<span class="hljs-keyword">done</span>

<span class="hljs-comment"># ç›‘æ§æ•æ„Ÿæ–‡ä»¶è®¿é—®</span>
grep -E <span class="hljs-string">"(\.git|\.env|config\.bak)"</span> /var/log/nginx/access.log | grep <span class="hljs-string">" 200"</span> | <span class="hljs-keyword">while</span> <span class="hljs-built_in">read</span> line; <span class="hljs-keyword">do</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"[<span class="hljs-subst">$(date)</span>] æ•æ„Ÿæ–‡ä»¶è®¿é—®å‘Šè­¦: <span class="hljs-variable">$line</span>"</span> &gt;&gt; <span class="hljs-variable">$LOG_FILE</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"æ£€æµ‹åˆ°æ•æ„Ÿæ–‡ä»¶è®¿é—®: <span class="hljs-variable">$line</span>"</span> | mail -s <span class="hljs-string">"ç´§æ€¥å®‰å…¨å‘Šè­¦"</span> <span class="hljs-variable">$ALERT_EMAIL</span>
<span class="hljs-keyword">done</span>
</code></pre>
<h4 data-id="heading-28">7.3 å®šæœŸå®‰å…¨å®¡è®¡</h4>
<p><strong>æœˆåº¦å®‰å…¨æ£€æŸ¥æ¸…å•ï¼š</strong></p>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> æ£€æŸ¥Nginxè®¿é—®æ—¥å¿—ä¸­çš„å¼‚å¸¸è¯·æ±‚</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> éªŒè¯æ‰€æœ‰å®‰å…¨å¤´æ˜¯å¦æ­£ç¡®è®¾ç½®</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> æµ‹è¯•æ•æ„Ÿæ–‡ä»¶æ˜¯å¦ä»ç„¶è¢«é˜»æ­¢</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> æ£€æŸ¥SSLè¯ä¹¦æœ‰æ•ˆæœŸ</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> æ›´æ–°GeoIPæ•°æ®åº“</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> å®¡æŸ¥é€Ÿç‡é™åˆ¶é˜ˆå€¼æ˜¯å¦éœ€è¦è°ƒæ•´</li>
</ul>
<h3 data-id="heading-29">ğŸ† æ€»ç»“ï¼šæ„å»ºä¼ä¸šçº§å®‰å…¨ç½‘å…³</h3>
<h4 data-id="heading-30">æ ¸å¿ƒé˜²æŠ¤æˆæœ</h4>
<p>é€šè¿‡æœ¬æŒ‡å—çš„å®æ–½ï¼Œä½ çš„ç½‘ç«™å°†è·å¾—ï¼š</p>



































<table><thead><tr><th>é˜²æŠ¤ç»´åº¦</th><th>å®ç°æ•ˆæœ</th><th>å®‰å…¨ç­‰çº§</th></tr></thead><tbody><tr><td><strong>ä¿¡æ¯éšè—</strong></td><td>ç‰ˆæœ¬å·å®Œå…¨éšè—ï¼Œé”™è¯¯é¡µé¢è‡ªå®šä¹‰</td><td>ğŸ”´ ä¼˜ç§€</td></tr><tr><td><strong>å…¥å£æ§åˆ¶</strong></td><td>æ•æ„Ÿæ–‡ä»¶100%é˜»æ­¢ï¼Œç›®å½•éå†é˜²æŠ¤</td><td>ğŸ”´ ä¼˜ç§€</td></tr><tr><td><strong>èº«ä»½éªŒè¯</strong></td><td>Hostå¤´æ”»å‡»å®Œå…¨é˜²æŠ¤ï¼ŒåŸŸåç™½åå•éªŒè¯</td><td>ğŸ”´ ä¼˜ç§€</td></tr><tr><td><strong>å“åº”å®‰å…¨</strong></td><td>å®Œæ•´å®‰å…¨å¤´é…ç½®ï¼Œæµè§ˆå™¨é˜²æŠ¤æœºåˆ¶å¯ç”¨</td><td>ğŸŸ¡ è‰¯å¥½</td></tr><tr><td><strong>æ€§èƒ½ä¼˜åŒ–</strong></td><td>é€Ÿç‡é™åˆ¶ç”Ÿæ•ˆï¼Œèµ„æºç¼“å­˜ä¼˜åŒ–</td><td>ğŸŸ¡ è‰¯å¥½</td></tr></tbody></table>
<h4 data-id="heading-31">åˆè§„æ€§è¯„ä¼°</h4>
<p><strong>ç­‰ä¿2.0åˆè§„æ£€æŸ¥ï¼š</strong></p>
<ul>
<li>âœ… <strong>è®¿é—®æ§åˆ¶</strong>ï¼šå®ç°äº†åŸºäºåŸŸåçš„è®¿é—®æ§åˆ¶</li>
<li>âœ… <strong>å®‰å…¨å®¡è®¡</strong>ï¼šå®Œæ•´çš„è®¿é—®æ—¥å¿—å’Œé”™è¯¯æ—¥å¿—</li>
<li>âœ… <strong>å…¥ä¾µé˜²èŒƒ</strong>ï¼šå¤šå±‚é˜²æŠ¤æœºåˆ¶é˜»æ­¢å¸¸è§æ”»å‡»</li>
<li>âœ… <strong>æ¶æ„ä»£ç é˜²èŒƒ</strong>ï¼šé˜²æ­¢æ–‡ä»¶ä¸Šä¼ å’Œæ‰§è¡Œ</li>
<li>âœ… <strong>æ•°æ®å®Œæ•´æ€§</strong>ï¼šæ•æ„Ÿæ–‡ä»¶è®¿é—®æ§åˆ¶</li>
</ul>
<h4 data-id="heading-32">ç»´æŠ¤å»ºè®®</h4>
<ol>
<li><strong>å®šæœŸæ›´æ–°</strong>ï¼šå…³æ³¨Nginxå®‰å…¨å…¬å‘Šï¼ŒåŠæ—¶æ›´æ–°ç‰ˆæœ¬</li>
<li><strong>ç›‘æ§å‘Šè­¦</strong>ï¼šå»ºç«‹å®Œæ•´çš„å®‰å…¨ç›‘æ§ä½“ç³»</li>
<li><strong>æ¸—é€æµ‹è¯•</strong>ï¼šæ¯å­£åº¦è¿›è¡Œä¸€æ¬¡å®‰å…¨æµ‹è¯•</li>
<li><strong>é…ç½®å¤‡ä»½</strong>ï¼šå®šæœŸå¤‡ä»½é…ç½®æ–‡ä»¶å’Œè¯ä¹¦</li>
<li><strong>å›¢é˜ŸåŸ¹è®­</strong>ï¼šç¡®ä¿å›¢é˜Ÿäº†è§£å®‰å…¨é…ç½®çš„é‡è¦æ€§</li>
</ol>
<h4 data-id="heading-33">ä¸‹ä¸€æ­¥è¡ŒåŠ¨</h4>
<p>ç°åœ¨ä½ å·²ç»æ‹¥æœ‰äº†ä¸€ä¸ªä¼ä¸šçº§çš„Nginxå®‰å…¨ç½‘å…³ï¼å»ºè®®ï¼š</p>
<ol>
<li><strong>ç«‹å³æµ‹è¯•</strong>ï¼šä½¿ç”¨æä¾›çš„æµ‹è¯•è„šæœ¬éªŒè¯é…ç½®</li>
<li><strong>ç›‘æ§éƒ¨ç½²</strong>ï¼šè®¾ç½®å®‰å…¨ç›‘æ§å’Œå‘Šè­¦æœºåˆ¶</li>
<li><strong>å›¢é˜Ÿåˆ†äº«</strong>ï¼šå°†è¿™ä»½æŒ‡å—åˆ†äº«ç»™å›¢é˜Ÿæˆå‘˜</li>
<li><strong>æŒç»­æ”¹è¿›</strong>ï¼šæ ¹æ®å®é™…æ”»å‡»æƒ…å†µè°ƒæ•´é˜²æŠ¤ç­–ç•¥</li>
</ol>
<p>è®°ä½ï¼š<strong>å®‰å…¨æ˜¯ä¸€ä¸ªæŒç»­çš„è¿‡ç¨‹ï¼Œè€Œä¸æ˜¯ä¸€æ¬¡æ€§çš„é…ç½®</strong>ã€‚ä¿æŒè­¦æƒ•ï¼Œå®šæœŸå®¡æŸ¥ï¼Œä½ çš„ç½‘ç«™å°†å›ºè‹¥é‡‘æ±¤ï¼</p>
<hr/>
<h3 data-id="heading-34">ğŸš€ ç¬¬å…«éƒ¨åˆ†ï¼šäº‘åŸç”Ÿå®‰å…¨æ¶æ„æ¼”è¿›</h3>
<h4 data-id="heading-35">8.1 Kubernetes Ingresså®‰å…¨ç­–ç•¥</h4>
<p><strong>ä¼ ç»ŸNginx vs äº‘åŸç”Ÿæ¶æ„çš„æŒ‘æˆ˜ï¼š</strong></p>
<p>åœ¨ä¼ ç»Ÿæ¶æ„ä¸­ï¼Œæˆ‘ä»¬ç›´æ¥ç®¡ç†Nginxå®ä¾‹ï¼Œä½†åœ¨Kubernetesç¯å¢ƒä¸­ï¼Œå®‰å…¨è¾¹ç•Œå˜å¾—æ›´åŠ å¤æ‚ã€‚Podé—´çš„ç½‘ç»œé€šä¿¡ã€æœåŠ¡å‘ç°ã€åŠ¨æ€æ‰©ç¼©å®¹éƒ½å¸¦æ¥äº†æ–°çš„å®‰å…¨æŒ‘æˆ˜ã€‚</p>
<p><strong>Kubernetesç½‘ç»œå®‰å…¨æ¨¡å‹ï¼š</strong></p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># NetworkPolicyï¼šç½‘ç»œå±‚è®¿é—®æ§åˆ¶</span>
<span class="hljs-attr">apiVersion:</span> <span class="hljs-string">networking.k8s.io/v1</span>
<span class="hljs-attr">kind:</span> <span class="hljs-string">NetworkPolicy</span>
<span class="hljs-attr">metadata:</span>
  <span class="hljs-attr">name:</span> <span class="hljs-string">nginx-ingress-network-policy</span>
  <span class="hljs-attr">namespace:</span> <span class="hljs-string">production</span>
<span class="hljs-attr">spec:</span>
  <span class="hljs-attr">podSelector:</span>
    <span class="hljs-attr">matchLabels:</span>
      <span class="hljs-attr">app:</span> <span class="hljs-string">nginx-ingress</span>
  <span class="hljs-attr">policyTypes:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">Ingress</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">Egress</span>
  <span class="hljs-attr">ingress:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">from:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">namespaceSelector:</span>
        <span class="hljs-attr">matchLabels:</span>
          <span class="hljs-attr">name:</span> <span class="hljs-string">production</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">podSelector:</span>
        <span class="hljs-attr">matchLabels:</span>
          <span class="hljs-attr">role:</span> <span class="hljs-string">frontend</span>
    <span class="hljs-attr">ports:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">protocol:</span> <span class="hljs-string">TCP</span>
      <span class="hljs-attr">port:</span> <span class="hljs-number">80</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">protocol:</span> <span class="hljs-string">TCP</span>
      <span class="hljs-attr">port:</span> <span class="hljs-number">443</span>
  <span class="hljs-attr">egress:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">to:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">namespaceSelector:</span>
        <span class="hljs-attr">matchLabels:</span>
          <span class="hljs-attr">name:</span> <span class="hljs-string">production</span>
    <span class="hljs-attr">ports:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">protocol:</span> <span class="hljs-string">TCP</span>
      <span class="hljs-attr">port:</span> <span class="hljs-number">8080</span>  <span class="hljs-comment"># åç«¯æœåŠ¡ç«¯å£</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">protocol:</span> <span class="hljs-string">TCP</span>
      <span class="hljs-attr">port:</span> <span class="hljs-number">53</span>    <span class="hljs-comment"># DNSæŸ¥è¯¢</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">protocol:</span> <span class="hljs-string">UDP</span>
      <span class="hljs-attr">port:</span> <span class="hljs-number">53</span>
</code></pre>
<p><strong>Ingress Controllerå®‰å…¨é…ç½®ï¼š</strong></p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># nginx-ingress-controllerå®‰å…¨éƒ¨ç½²</span>
<span class="hljs-attr">apiVersion:</span> <span class="hljs-string">apps/v1</span>
<span class="hljs-attr">kind:</span> <span class="hljs-string">Deployment</span>
<span class="hljs-attr">metadata:</span>
  <span class="hljs-attr">name:</span> <span class="hljs-string">nginx-ingress-controller</span>
  <span class="hljs-attr">namespace:</span> <span class="hljs-string">ingress-nginx</span>
<span class="hljs-attr">spec:</span>
  <span class="hljs-attr">replicas:</span> <span class="hljs-number">3</span>
  <span class="hljs-attr">selector:</span>
    <span class="hljs-attr">matchLabels:</span>
      <span class="hljs-attr">app:</span> <span class="hljs-string">nginx-ingress</span>
  <span class="hljs-attr">template:</span>
    <span class="hljs-attr">metadata:</span>
      <span class="hljs-attr">labels:</span>
        <span class="hljs-attr">app:</span> <span class="hljs-string">nginx-ingress</span>
    <span class="hljs-attr">spec:</span>
      <span class="hljs-attr">serviceAccountName:</span> <span class="hljs-string">nginx-ingress-serviceaccount</span>
      <span class="hljs-attr">securityContext:</span>
        <span class="hljs-attr">runAsNonRoot:</span> <span class="hljs-literal">true</span>
        <span class="hljs-attr">runAsUser:</span> <span class="hljs-number">101</span>
        <span class="hljs-attr">fsGroup:</span> <span class="hljs-number">101</span>
      <span class="hljs-attr">containers:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">nginx-ingress-controller</span>
        <span class="hljs-attr">image:</span> <span class="hljs-string">k8s.gcr.io/ingress-nginx/controller:v1.8.1</span>
        <span class="hljs-attr">securityContext:</span>
          <span class="hljs-attr">allowPrivilegeEscalation:</span> <span class="hljs-literal">false</span>
          <span class="hljs-attr">readOnlyRootFilesystem:</span> <span class="hljs-literal">true</span>
          <span class="hljs-attr">capabilities:</span>
            <span class="hljs-attr">drop:</span>
            <span class="hljs-bullet">-</span> <span class="hljs-string">ALL</span>
            <span class="hljs-attr">add:</span>
            <span class="hljs-bullet">-</span> <span class="hljs-string">NET_BIND_SERVICE</span>
        <span class="hljs-attr">args:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">/nginx-ingress-controller</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">--configmap=$(POD_NAMESPACE)/nginx-configuration</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">--tcp-services-configmap=$(POD_NAMESPACE)/tcp-services</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">--udp-services-configmap=$(POD_NAMESPACE)/udp-services</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">--annotations-prefix=nginx.ingress.kubernetes.io</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">--enable-ssl-passthrough</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">--ssl-passthrough-proxy-port=442</span>
        <span class="hljs-attr">env:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">POD_NAME</span>
          <span class="hljs-attr">valueFrom:</span>
            <span class="hljs-attr">fieldRef:</span>
              <span class="hljs-attr">fieldPath:</span> <span class="hljs-string">metadata.name</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">POD_NAMESPACE</span>
          <span class="hljs-attr">valueFrom:</span>
            <span class="hljs-attr">fieldRef:</span>
              <span class="hljs-attr">fieldPath:</span> <span class="hljs-string">metadata.namespace</span>
        <span class="hljs-attr">ports:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">http</span>
          <span class="hljs-attr">containerPort:</span> <span class="hljs-number">80</span>
          <span class="hljs-attr">protocol:</span> <span class="hljs-string">TCP</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">https</span>
          <span class="hljs-attr">containerPort:</span> <span class="hljs-number">443</span>
          <span class="hljs-attr">protocol:</span> <span class="hljs-string">TCP</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">webhook</span>
          <span class="hljs-attr">containerPort:</span> <span class="hljs-number">8443</span>
          <span class="hljs-attr">protocol:</span> <span class="hljs-string">TCP</span>
        <span class="hljs-attr">livenessProbe:</span>
          <span class="hljs-attr">httpGet:</span>
            <span class="hljs-attr">path:</span> <span class="hljs-string">/healthz</span>
            <span class="hljs-attr">port:</span> <span class="hljs-number">10254</span>
            <span class="hljs-attr">scheme:</span> <span class="hljs-string">HTTP</span>
          <span class="hljs-attr">initialDelaySeconds:</span> <span class="hljs-number">10</span>
          <span class="hljs-attr">periodSeconds:</span> <span class="hljs-number">10</span>
        <span class="hljs-attr">readinessProbe:</span>
          <span class="hljs-attr">httpGet:</span>
            <span class="hljs-attr">path:</span> <span class="hljs-string">/healthz</span>
            <span class="hljs-attr">port:</span> <span class="hljs-number">10254</span>
            <span class="hljs-attr">scheme:</span> <span class="hljs-string">HTTP</span>
          <span class="hljs-attr">initialDelaySeconds:</span> <span class="hljs-number">10</span>
          <span class="hljs-attr">periodSeconds:</span> <span class="hljs-number">10</span>
        <span class="hljs-attr">resources:</span>
          <span class="hljs-attr">requests:</span>
            <span class="hljs-attr">cpu:</span> <span class="hljs-string">100m</span>
            <span class="hljs-attr">memory:</span> <span class="hljs-string">90Mi</span>
          <span class="hljs-attr">limits:</span>
            <span class="hljs-attr">cpu:</span> <span class="hljs-string">200m</span>
            <span class="hljs-attr">memory:</span> <span class="hljs-string">180Mi</span>
</code></pre>
<p><strong>Podå®‰å…¨ç­–ç•¥ï¼ˆPodSecurityPolicyï¼‰ï¼š</strong></p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">policy/v1beta1</span>
<span class="hljs-attr">kind:</span> <span class="hljs-string">PodSecurityPolicy</span>
<span class="hljs-attr">metadata:</span>
  <span class="hljs-attr">name:</span> <span class="hljs-string">nginx-ingress-psp</span>
<span class="hljs-attr">spec:</span>
  <span class="hljs-attr">privileged:</span> <span class="hljs-literal">false</span>
  <span class="hljs-attr">allowPrivilegeEscalation:</span> <span class="hljs-literal">false</span>
  <span class="hljs-attr">requiredDropCapabilities:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">ALL</span>
  <span class="hljs-attr">allowedCapabilities:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">NET_BIND_SERVICE</span>
  <span class="hljs-attr">volumes:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">'configMap'</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">'emptyDir'</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">'projected'</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">'secret'</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">'downwardAPI'</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">'persistentVolumeClaim'</span>
  <span class="hljs-attr">hostNetwork:</span> <span class="hljs-literal">false</span>
  <span class="hljs-attr">hostIPC:</span> <span class="hljs-literal">false</span>
  <span class="hljs-attr">hostPID:</span> <span class="hljs-literal">false</span>
  <span class="hljs-attr">runAsUser:</span>
    <span class="hljs-attr">rule:</span> <span class="hljs-string">'MustRunAsNonRoot'</span>
  <span class="hljs-attr">supplementalGroups:</span>
    <span class="hljs-attr">rule:</span> <span class="hljs-string">'MustRunAs'</span>
    <span class="hljs-attr">ranges:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">min:</span> <span class="hljs-number">1</span>
        <span class="hljs-attr">max:</span> <span class="hljs-number">65535</span>
  <span class="hljs-attr">fsGroup:</span>
    <span class="hljs-attr">rule:</span> <span class="hljs-string">'MustRunAs'</span>
    <span class="hljs-attr">ranges:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">min:</span> <span class="hljs-number">1</span>
        <span class="hljs-attr">max:</span> <span class="hljs-number">65535</span>
  <span class="hljs-attr">readOnlyRootFilesystem:</span> <span class="hljs-literal">true</span>
  <span class="hljs-attr">seLinux:</span>
    <span class="hljs-attr">rule:</span> <span class="hljs-string">'RunAsAny'</span>
</code></pre>
<h4 data-id="heading-36">8.2 å®¹å™¨åŒ–Nginxå®‰å…¨æœ€ä½³å®è·µ</h4>
<p><strong>æœ€å°æƒé™å®¹å™¨é•œåƒæ„å»ºï¼š</strong></p>
<pre><code class="hljs language-dockerfile" lang="dockerfile"># å¤šé˜¶æ®µæ„å»ºå®‰å…¨Nginxé•œåƒ
FROM alpine:3.18 AS builder

# å®‰è£…æ„å»ºä¾èµ–
RUN apk add --no-cache \
    gcc \
    g++ \
    make \
    pcre-dev \
    zlib-dev \
    openssl-dev \
    geoip-dev

# ä¸‹è½½å¹¶ç¼–è¯‘Nginxï¼ˆåŒ…å«å®‰å…¨æ¨¡å—ï¼‰
ENV NGINX_VERSION=1.25.3
RUN wget http://nginx.org/download/nginx-${NGINX_VERSION}.tar.gz &amp;&amp; \
    tar -xzf nginx-${NGINX_VERSION}.tar.gz &amp;&amp; \
    cd nginx-${NGINX_VERSION} &amp;&amp; \
    ./configure \
        --prefix=/etc/nginx \
        --sbin-path=/usr/sbin/nginx \
        --conf-path=/etc/nginx/nginx.conf \
        --error-log-path=/var/log/nginx/error.log \
        --http-log-path=/var/log/nginx/access.log \
        --pid-path=/var/run/nginx.pid \
        --lock-path=/var/run/nginx.lock \
        --with-http_ssl_module \
        --with-http_v2_module \
        --with-http_realip_module \
        --with-http_geoip_module \
        --with-http_secure_link_module \
        --with-http_sub_module \
        --with-http_stub_status_module \
        --with-stream \
        --with-stream_ssl_module \
        --with-stream_ssl_preread_module &amp;&amp; \
    make &amp;&amp; make install

# ç”Ÿäº§é•œåƒ
FROM alpine:3.18

# åˆ›å»ºéç‰¹æƒç”¨æˆ·
RUN addgroup -g 101 -S nginx &amp;&amp; \
    adduser -S -D -H -u 101 -h /var/cache/nginx -s /sbin/nologin -G nginx -g nginx nginx

# å®‰è£…è¿è¡Œæ—¶ä¾èµ–
RUN apk add --no-cache \
    pcre \
    zlib \
    openssl \
    geoip \
    ca-certificates \
    tzdata

# å¤åˆ¶ç¼–è¯‘å¥½çš„Nginx
COPY --from=builder /etc/nginx /etc/nginx
COPY --from=builder /usr/sbin/nginx /usr/sbin/nginx
COPY --from=builder /var/log/nginx /var/log/nginx

# å¤åˆ¶é…ç½®æ–‡ä»¶
COPY nginx.conf /etc/nginx/nginx.conf
COPY security.conf /etc/nginx/conf.d/security.conf

# è®¾ç½®æ–‡ä»¶æƒé™
RUN chown -R nginx:nginx /etc/nginx &amp;&amp; \
    chown -R nginx:nginx /var/log/nginx &amp;&amp; \
    chown -R nginx:nginx /var/cache/nginx &amp;&amp; \
    chmod 644 /etc/nginx/nginx.conf &amp;&amp; \
    chmod 644 /etc/nginx/conf.d/security.conf

# åˆ›å»ºå¿…è¦çš„ç›®å½•
RUN mkdir -p /var/cache/nginx/client_temp &amp;&amp; \
    mkdir -p /var/cache/nginx/proxy_temp &amp;&amp; \
    mkdir -p /var/cache/nginx/fastcgi_temp &amp;&amp; \
    mkdir -p /var/cache/nginx/uwsgi_temp &amp;&amp; \
    mkdir -p /var/cache/nginx/scgi_temp &amp;&amp; \
    chown -R nginx:nginx /var/cache/nginx

# å¥åº·æ£€æŸ¥è„šæœ¬
COPY healthcheck.sh /usr/local/bin/healthcheck.sh
RUN chmod +x /usr/local/bin/healthcheck.sh

# åˆ‡æ¢åˆ°éç‰¹æƒç”¨æˆ·
USER nginx

# æš´éœ²ç«¯å£
EXPOSE 8080 8443

# å¥åº·æ£€æŸ¥
HEALTHCHECK --interval=30s --timeout=3s --start-period=5s --retries=3 \
    CMD /usr/local/bin/healthcheck.sh

# å¯åŠ¨å‘½ä»¤
ENTRYPOINT ["nginx", "-g", "daemon off;"]
</code></pre>
<p><strong>å¥åº·æ£€æŸ¥è„šæœ¬ï¼š</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/sh</span>
<span class="hljs-comment"># healthcheck.sh</span>

<span class="hljs-built_in">set</span> -e

<span class="hljs-comment"># æ£€æŸ¥Nginxè¿›ç¨‹</span>
<span class="hljs-keyword">if</span> ! pgrep -x <span class="hljs-string">"nginx"</span> &gt; /dev/null; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"Nginx process not running"</span>
    <span class="hljs-built_in">exit</span> 1
<span class="hljs-keyword">fi</span>

<span class="hljs-comment"># æ£€æŸ¥é…ç½®æ–‡ä»¶è¯­æ³•</span>
<span class="hljs-keyword">if</span> ! nginx -t &gt; /dev/null 2&gt;&amp;1; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"Nginx configuration test failed"</span>
    <span class="hljs-built_in">exit</span> 1
<span class="hljs-keyword">fi</span>

<span class="hljs-comment"># æ£€æŸ¥ç›‘å¬ç«¯å£</span>
<span class="hljs-keyword">if</span> ! netstat -<span class="hljs-built_in">ln</span> | grep -q <span class="hljs-string">":8080 "</span>; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"Nginx not listening on port 8080"</span>
    <span class="hljs-built_in">exit</span> 1
<span class="hljs-keyword">fi</span>

<span class="hljs-comment"># æµ‹è¯•HTTPå“åº”</span>
<span class="hljs-keyword">if</span> ! wget -q -O /dev/null -T 5 http://localhost:8080/health; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"Nginx health check endpoint failed"</span>
    <span class="hljs-built_in">exit</span> 1
<span class="hljs-keyword">fi</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"Health check passed"</span>
<span class="hljs-built_in">exit</span> 0
</code></pre>
<h4 data-id="heading-37">8.3 Service Meshé›†æˆå®‰å…¨æ–¹æ¡ˆ</h4>
<p><strong>Istioç¯å¢ƒä¸‹çš„å®‰å…¨ç­–ç•¥ï¼š</strong></p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># Istioå®‰å…¨ç­–ç•¥é…ç½®</span>
<span class="hljs-attr">apiVersion:</span> <span class="hljs-string">security.istio.io/v1beta1</span>
<span class="hljs-attr">kind:</span> <span class="hljs-string">PeerAuthentication</span>
<span class="hljs-attr">metadata:</span>
  <span class="hljs-attr">name:</span> <span class="hljs-string">nginx-ingress-peer-auth</span>
  <span class="hljs-attr">namespace:</span> <span class="hljs-string">ingress-nginx</span>
<span class="hljs-attr">spec:</span>
  <span class="hljs-attr">selector:</span>
    <span class="hljs-attr">matchLabels:</span>
      <span class="hljs-attr">app:</span> <span class="hljs-string">nginx-ingress</span>
  <span class="hljs-attr">mtls:</span>
    <span class="hljs-attr">mode:</span> <span class="hljs-string">STRICT</span>
<span class="hljs-meta">---</span>
<span class="hljs-attr">apiVersion:</span> <span class="hljs-string">security.istio.io/v1beta1</span>
<span class="hljs-attr">kind:</span> <span class="hljs-string">AuthorizationPolicy</span>
<span class="hljs-attr">metadata:</span>
  <span class="hljs-attr">name:</span> <span class="hljs-string">nginx-ingress-authz</span>
  <span class="hljs-attr">namespace:</span> <span class="hljs-string">ingress-nginx</span>
<span class="hljs-attr">spec:</span>
  <span class="hljs-attr">selector:</span>
    <span class="hljs-attr">matchLabels:</span>
      <span class="hljs-attr">app:</span> <span class="hljs-string">nginx-ingress</span>
  <span class="hljs-attr">rules:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">from:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">source:</span>
        <span class="hljs-attr">principals:</span> [<span class="hljs-string">"cluster.local/ns/production/sa/frontend"</span>]
    <span class="hljs-bullet">-</span> <span class="hljs-attr">source:</span>
        <span class="hljs-attr">ipBlocks:</span> [<span class="hljs-string">"10.0.0.0/8"</span>, <span class="hljs-string">"172.16.0.0/12"</span>, <span class="hljs-string">"192.168.0.0/16"</span>]
    <span class="hljs-attr">to:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">operation:</span>
        <span class="hljs-attr">methods:</span> [<span class="hljs-string">"GET"</span>, <span class="hljs-string">"POST"</span>, <span class="hljs-string">"PUT"</span>, <span class="hljs-string">"DELETE"</span>]
        <span class="hljs-attr">paths:</span> [<span class="hljs-string">"/api/*"</span>, <span class="hljs-string">"/health"</span>, <span class="hljs-string">"/metrics"</span>]
  <span class="hljs-bullet">-</span> <span class="hljs-attr">from:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">source:</span>
        <span class="hljs-attr">principals:</span> [<span class="hljs-string">"cluster.local/ns/monitoring/sa/prometheus"</span>]
    <span class="hljs-attr">to:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">operation:</span>
        <span class="hljs-attr">methods:</span> [<span class="hljs-string">"GET"</span>]
        <span class="hljs-attr">paths:</span> [<span class="hljs-string">"/metrics"</span>, <span class="hljs-string">"/health"</span>]
<span class="hljs-meta">---</span>
<span class="hljs-attr">apiVersion:</span> <span class="hljs-string">networking.istio.io/v1beta1</span>
<span class="hljs-attr">kind:</span> <span class="hljs-string">DestinationRule</span>
<span class="hljs-attr">metadata:</span>
  <span class="hljs-attr">name:</span> <span class="hljs-string">nginx-ingress-destination-rule</span>
  <span class="hljs-attr">namespace:</span> <span class="hljs-string">ingress-nginx</span>
<span class="hljs-attr">spec:</span>
  <span class="hljs-attr">host:</span> <span class="hljs-string">nginx-ingress-service.ingress-nginx.svc.cluster.local</span>
  <span class="hljs-attr">trafficPolicy:</span>
    <span class="hljs-attr">tls:</span>
      <span class="hljs-attr">mode:</span> <span class="hljs-string">ISTIO_MUTUAL</span>
    <span class="hljs-attr">connectionPool:</span>
      <span class="hljs-attr">tcp:</span>
        <span class="hljs-attr">maxConnections:</span> <span class="hljs-number">100</span>
      <span class="hljs-attr">http:</span>
        <span class="hljs-attr">http1MaxPendingRequests:</span> <span class="hljs-number">50</span>
        <span class="hljs-attr">http2MaxRequests:</span> <span class="hljs-number">100</span>
        <span class="hljs-attr">maxRequestsPerConnection:</span> <span class="hljs-number">10</span>
    <span class="hljs-attr">loadBalancer:</span>
      <span class="hljs-attr">simple:</span> <span class="hljs-string">LEAST_REQUEST</span>
    <span class="hljs-attr">outlierDetection:</span>
      <span class="hljs-attr">consecutiveErrors:</span> <span class="hljs-number">5</span>
      <span class="hljs-attr">interval:</span> <span class="hljs-string">30s</span>
      <span class="hljs-attr">baseEjectionTime:</span> <span class="hljs-string">30s</span>
      <span class="hljs-attr">maxEjectionPercent:</span> <span class="hljs-number">50</span>
      <span class="hljs-attr">minHealthPercent:</span> <span class="hljs-number">30</span>
</code></pre>
<h3 data-id="heading-38">ğŸ¤– ç¬¬ä¹éƒ¨åˆ†ï¼šAIé©±åŠ¨æ™ºèƒ½é˜²æŠ¤</h3>
<h4 data-id="heading-39">9.1 æœºå™¨å­¦ä¹ å¼‚å¸¸æ£€æµ‹</h4>
<p><strong>åŸºäºæµé‡çš„å¼‚å¸¸æ£€æµ‹ç³»ç»Ÿï¼š</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment">#!/usr/bin/env python3</span>
<span class="hljs-comment"># ml_anomaly_detector.py</span>

<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
<span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd
<span class="hljs-keyword">from</span> sklearn.ensemble <span class="hljs-keyword">import</span> IsolationForest
<span class="hljs-keyword">from</span> sklearn.preprocessing <span class="hljs-keyword">import</span> StandardScaler
<span class="hljs-keyword">import</span> json
<span class="hljs-keyword">import</span> logging
<span class="hljs-keyword">from</span> datetime <span class="hljs-keyword">import</span> datetime, timedelta
<span class="hljs-keyword">import</span> redis
<span class="hljs-keyword">import</span> asyncio
<span class="hljs-keyword">import</span> aiohttp

<span class="hljs-keyword">class</span> <span class="hljs-title class_">NginxAnomalyDetector</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):
        self.redis_client = redis.Redis(host=<span class="hljs-string">'localhost'</span>, port=<span class="hljs-number">6379</span>, db=<span class="hljs-number">0</span>)
        self.model = IsolationForest(contamination=<span class="hljs-number">0.1</span>, random_state=<span class="hljs-number">42</span>)
        self.scaler = StandardScaler()
        self.is_fitted = <span class="hljs-literal">False</span>
        
        <span class="hljs-comment"># ç‰¹å¾å®šä¹‰</span>
        self.features = [
            <span class="hljs-string">'request_rate'</span>, <span class="hljs-string">'response_time'</span>, <span class="hljs-string">'status_4xx_ratio'</span>,
            <span class="hljs-string">'status_5xx_ratio'</span>, <span class="hljs-string">'unique_ips'</span>, <span class="hljs-string">'payload_size_avg'</span>,
            <span class="hljs-string">'user_agent_entropy'</span>, <span class="hljs-string">'path_depth_avg'</span>, <span class="hljs-string">'query_params_count'</span>
        ]
        
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">extract_features_from_log</span>(<span class="hljs-params">self, log_data</span>):
        <span class="hljs-string">"""ä»Nginxæ—¥å¿—æå–ç‰¹å¾"""</span>
        df = pd.DataFrame(log_data)
        
        features = {}
        features[<span class="hljs-string">'request_rate'</span>] = <span class="hljs-built_in">len</span>(df) / <span class="hljs-number">60</span>  <span class="hljs-comment"># æ¯åˆ†é’Ÿè¯·æ±‚æ•°</span>
        features[<span class="hljs-string">'response_time'</span>] = df[<span class="hljs-string">'request_time'</span>].mean() <span class="hljs-keyword">if</span> <span class="hljs-string">'request_time'</span> <span class="hljs-keyword">in</span> df <span class="hljs-keyword">else</span> <span class="hljs-number">0.1</span>
        features[<span class="hljs-string">'status_4xx_ratio'</span>] = (df[<span class="hljs-string">'status'</span>] &gt;= <span class="hljs-number">400</span>).<span class="hljs-built_in">sum</span>() / <span class="hljs-built_in">len</span>(df) <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(df) &gt; <span class="hljs-number">0</span> <span class="hljs-keyword">else</span> <span class="hljs-number">0</span>
        features[<span class="hljs-string">'status_5xx_ratio'</span>] = (df[<span class="hljs-string">'status'</span>] &gt;= <span class="hljs-number">500</span>).<span class="hljs-built_in">sum</span>() / <span class="hljs-built_in">len</span>(df) <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(df) &gt; <span class="hljs-number">0</span> <span class="hljs-keyword">else</span> <span class="hljs-number">0</span>
        features[<span class="hljs-string">'unique_ips'</span>] = df[<span class="hljs-string">'remote_addr'</span>].nunique()
        features[<span class="hljs-string">'payload_size_avg'</span>] = df[<span class="hljs-string">'body_bytes_sent'</span>].mean() <span class="hljs-keyword">if</span> <span class="hljs-string">'body_bytes_sent'</span> <span class="hljs-keyword">in</span> df <span class="hljs-keyword">else</span> <span class="hljs-number">0</span>
        features[<span class="hljs-string">'user_agent_entropy'</span>] = self._calculate_entropy(df[<span class="hljs-string">'http_user_agent'</span>].dropna())
        features[<span class="hljs-string">'path_depth_avg'</span>] = df[<span class="hljs-string">'request_uri'</span>].apply(<span class="hljs-keyword">lambda</span> x: x.count(<span class="hljs-string">'/'</span>) <span class="hljs-keyword">if</span> pd.notna(x) <span class="hljs-keyword">else</span> <span class="hljs-number">0</span>).mean()
        features[<span class="hljs-string">'query_params_count'</span>] = df[<span class="hljs-string">'request_uri'</span>].apply(<span class="hljs-keyword">lambda</span> x: x.count(<span class="hljs-string">'?'</span>) + x.count(<span class="hljs-string">'&amp;'</span>) <span class="hljs-keyword">if</span> pd.notna(x) <span class="hljs-keyword">else</span> <span class="hljs-number">0</span>).mean()
        
        <span class="hljs-keyword">return</span> features
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">_calculate_entropy</span>(<span class="hljs-params">self, series</span>):
        <span class="hljs-string">"""è®¡ç®—ä¿¡æ¯ç†µ"""</span>
        <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(series) == <span class="hljs-number">0</span>:
            <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>
        
        value_counts = series.value_counts()
        probabilities = value_counts / <span class="hljs-built_in">len</span>(series)
        entropy = -np.<span class="hljs-built_in">sum</span>(probabilities * np.log2(probabilities + <span class="hljs-number">1e-10</span>))
        <span class="hljs-keyword">return</span> entropy
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">train_model</span>(<span class="hljs-params">self, historical_data</span>):
        <span class="hljs-string">"""è®­ç»ƒå¼‚å¸¸æ£€æµ‹æ¨¡å‹"""</span>
        features_list = []
        <span class="hljs-keyword">for</span> log_entry <span class="hljs-keyword">in</span> historical_data:
            features = self.extract_features_from_log([log_entry])
            features_list.append([features[f] <span class="hljs-keyword">for</span> f <span class="hljs-keyword">in</span> self.features])
        
        X = np.array(features_list)
        X_scaled = self.scaler.fit_transform(X)
        self.model.fit(X_scaled)
        self.is_fitted = <span class="hljs-literal">True</span>
        
        logging.info(<span class="hljs-string">f"æ¨¡å‹è®­ç»ƒå®Œæˆï¼Œä½¿ç”¨<span class="hljs-subst">{<span class="hljs-built_in">len</span>(historical_data)}</span>æ¡å†å²æ•°æ®"</span>)
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">predict_anomaly</span>(<span class="hljs-params">self, log_data</span>):
        <span class="hljs-string">"""é¢„æµ‹å¼‚å¸¸"""</span>
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> self.is_fitted:
            <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span>, <span class="hljs-number">0.0</span>
        
        features = self.extract_features_from_log([log_data])
        feature_vector = np.array([[features[f] <span class="hljs-keyword">for</span> f <span class="hljs-keyword">in</span> self.features]])
        feature_scaled = self.scaler.transform(feature_vector)
        
        anomaly_score = self.model.decision_function(feature_scaled)[<span class="hljs-number">0</span>]
        is_anomaly = self.model.predict(feature_scaled)[<span class="hljs-number">0</span>] == -<span class="hljs-number">1</span>
        
        <span class="hljs-keyword">return</span> is_anomaly, anomaly_score
    
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">real_time_monitoring</span>(<span class="hljs-params">self</span>):
        <span class="hljs-string">"""å®æ—¶ç›‘æ§Nginxæ—¥å¿—"""</span>
        logging.info(<span class="hljs-string">"å¼€å§‹å®æ—¶ç›‘æ§Nginxæ—¥å¿—..."</span>)
        
        <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:
            <span class="hljs-keyword">try</span>:
                <span class="hljs-comment"># ä»Redisè·å–æœ€æ–°æ—¥å¿—ï¼ˆæ¨¡æ‹Ÿå®æ—¶æ—¥å¿—æµï¼‰</span>
                log_entry = self.redis_client.lpop(<span class="hljs-string">'nginx:logs:realtime'</span>)
                <span class="hljs-keyword">if</span> log_entry:
                    log_data = json.loads(log_entry)
                    
                    is_anomaly, score = self.predict_anomaly(log_data)
                    
                    <span class="hljs-keyword">if</span> is_anomaly:
                        logging.warning(<span class="hljs-string">f"æ£€æµ‹åˆ°å¼‚å¸¸æµé‡ï¼å¼‚å¸¸è¯„åˆ†ï¼š<span class="hljs-subst">{score:<span class="hljs-number">.3</span>f}</span>"</span>)
                        
                        <span class="hljs-comment"># è§¦å‘è‡ªåŠ¨é˜»æ–­</span>
                        <span class="hljs-keyword">await</span> self.trigger_auto_block(log_data)
                        
                        <span class="hljs-comment"># å‘é€å‘Šè­¦</span>
                        <span class="hljs-keyword">await</span> self.send_alert(log_data, score)
                    
                    <span class="hljs-comment"># ç¼“å­˜æ­£å¸¸è¡Œä¸ºæ¨¡å¼</span>
                    <span class="hljs-keyword">await</span> self.cache_behavior_pattern(log_data)
                    
            <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
                logging.error(<span class="hljs-string">f"å®æ—¶ç›‘æ§å¼‚å¸¸ï¼š<span class="hljs-subst">{e}</span>"</span>)
            
            <span class="hljs-keyword">await</span> asyncio.sleep(<span class="hljs-number">1</span>)
    
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">trigger_auto_block</span>(<span class="hljs-params">self, log_data</span>):
        <span class="hljs-string">"""è‡ªåŠ¨é˜»æ–­å¼‚å¸¸IP"""</span>
        suspicious_ip = log_data.get(<span class="hljs-string">'remote_addr'</span>)
        <span class="hljs-keyword">if</span> suspicious_ip:
            <span class="hljs-comment"># æ·»åŠ åˆ°Redisé»‘åå•</span>
            self.redis_client.sadd(<span class="hljs-string">'nginx:blocklist:ips'</span>, suspicious_ip)
            self.redis_client.expire(<span class="hljs-string">f'nginx:blocklist:ips'</span>, <span class="hljs-number">3600</span>)  <span class="hljs-comment"># 1å°æ—¶è¿‡æœŸ</span>
            
            <span class="hljs-comment"># è®°å½•é˜»æ–­æ—¥å¿—</span>
            block_info = {
                <span class="hljs-string">'ip'</span>: suspicious_ip,
                <span class="hljs-string">'timestamp'</span>: datetime.now().isoformat(),
                <span class="hljs-string">'reason'</span>: <span class="hljs-string">'ml_anomaly_detection'</span>,
                <span class="hljs-string">'request_uri'</span>: log_data.get(<span class="hljs-string">'request_uri'</span>),
                <span class="hljs-string">'user_agent'</span>: log_data.get(<span class="hljs-string">'http_user_agent'</span>)
            }
            self.redis_client.lpush(<span class="hljs-string">'nginx:blocklist:history'</span>, json.dumps(block_info))
            
            logging.info(<span class="hljs-string">f"è‡ªåŠ¨é˜»æ–­IPï¼š<span class="hljs-subst">{suspicious_ip}</span>"</span>)
    
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">send_alert</span>(<span class="hljs-params">self, log_data, anomaly_score</span>):
        <span class="hljs-string">"""å‘é€å®‰å…¨å‘Šè­¦"""</span>
        alert = {
            <span class="hljs-string">'type'</span>: <span class="hljs-string">'anomaly_detection'</span>,
            <span class="hljs-string">'severity'</span>: <span class="hljs-string">'high'</span> <span class="hljs-keyword">if</span> anomaly_score &lt; -<span class="hljs-number">0.5</span> <span class="hljs-keyword">else</span> <span class="hljs-string">'medium'</span>,
            <span class="hljs-string">'timestamp'</span>: datetime.now().isoformat(),
            <span class="hljs-string">'source_ip'</span>: log_data.get(<span class="hljs-string">'remote_addr'</span>),
            <span class="hljs-string">'request_uri'</span>: log_data.get(<span class="hljs-string">'request_uri'</span>),
            <span class="hljs-string">'anomaly_score'</span>: anomaly_score,
            <span class="hljs-string">'details'</span>: log_data
        }
        
        <span class="hljs-comment"># å‘é€åˆ°å‘Šè­¦ç³»ç»Ÿï¼ˆWebhookã€é‚®ä»¶ã€çŸ­ä¿¡ç­‰ï¼‰</span>
        self.redis_client.publish(<span class="hljs-string">'security:alerts'</span>, json.dumps(alert))
        
        <span class="hljs-comment"># è®°å½•åˆ°æ•°æ®åº“</span>
        self.redis_client.lpush(<span class="hljs-string">'security:alerts:history'</span>, json.dumps(alert))
    
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">cache_behavior_pattern</span>(<span class="hljs-params">self, log_data</span>):
        <span class="hljs-string">"""ç¼“å­˜ç”¨æˆ·è¡Œä¸ºæ¨¡å¼"""</span>
        user_ip = log_data.get(<span class="hljs-string">'remote_addr'</span>)
        <span class="hljs-keyword">if</span> user_ip:
            <span class="hljs-comment"># æ„å»ºç”¨æˆ·è¡Œä¸ºæŒ‡çº¹</span>
            behavior_fingerprint = {
                <span class="hljs-string">'user_agent'</span>: log_data.get(<span class="hljs-string">'http_user_agent'</span>),
                <span class="hljs-string">'accept_language'</span>: log_data.get(<span class="hljs-string">'http_accept_language'</span>),
                <span class="hljs-string">'request_rate'</span>: <span class="hljs-keyword">await</span> self.get_user_request_rate(user_ip),
                <span class="hljs-string">'path_patterns'</span>: <span class="hljs-keyword">await</span> self.get_user_path_patterns(user_ip)
            }
            
            <span class="hljs-comment"># ç¼“å­˜24å°æ—¶</span>
            self.redis_client.setex(
                <span class="hljs-string">f'behavior:fingerprint:<span class="hljs-subst">{user_ip}</span>'</span>,
                <span class="hljs-number">86400</span>,
                json.dumps(behavior_fingerprint)
            )
    
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_user_request_rate</span>(<span class="hljs-params">self, user_ip</span>):
        <span class="hljs-string">"""è·å–ç”¨æˆ·è¯·æ±‚é¢‘ç‡"""</span>
        now = datetime.now()
        key = <span class="hljs-string">f'request_rate:<span class="hljs-subst">{user_ip}</span>:<span class="hljs-subst">{now.strftime(<span class="hljs-string">"%Y%m%d%H%M"</span>)}</span>'</span>
        <span class="hljs-keyword">return</span> self.redis_client.get(key) <span class="hljs-keyword">or</span> <span class="hljs-number">0</span>
    
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_user_path_patterns</span>(<span class="hljs-params">self, user_ip</span>):
        <span class="hljs-string">"""è·å–ç”¨æˆ·è®¿é—®è·¯å¾„æ¨¡å¼"""</span>
        <span class="hljs-comment"># ä»æœ€è¿‘100æ¡è®°å½•ä¸­åˆ†æè·¯å¾„æ¨¡å¼</span>
        key = <span class="hljs-string">f'user_paths:<span class="hljs-subst">{user_ip}</span>'</span>
        paths = self.redis_client.lrange(key, <span class="hljs-number">0</span>, <span class="hljs-number">99</span>)
        <span class="hljs-keyword">return</span> [p.decode(<span class="hljs-string">'utf-8'</span>) <span class="hljs-keyword">for</span> p <span class="hljs-keyword">in</span> paths] <span class="hljs-keyword">if</span> paths <span class="hljs-keyword">else</span> []

<span class="hljs-comment"># é›†æˆåˆ°Nginxé…ç½®</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():
    detector = NginxAnomalyDetector()
    
    <span class="hljs-comment"># åŠ è½½å†å²æ•°æ®è®­ç»ƒæ¨¡å‹</span>
    historical_logs = load_historical_logs()  <span class="hljs-comment"># ä»æ—¥å¿—æ–‡ä»¶æˆ–æ•°æ®åº“åŠ è½½</span>
    detector.train_model(historical_logs)
    
    <span class="hljs-comment"># å¯åŠ¨å®æ—¶ç›‘æ§</span>
    <span class="hljs-keyword">await</span> detector.real_time_monitoring()

<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    asyncio.run(main())
</code></pre>
<h4 data-id="heading-40">9.2 å®æ—¶å¨èƒæƒ…æŠ¥é›†æˆ</h4>
<p><strong>å¨èƒæƒ…æŠ¥æ•°æ®èšåˆç³»ç»Ÿï¼š</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment">#!/usr/bin/env python3</span>
<span class="hljs-comment"># threat_intelligence_feed.py</span>

<span class="hljs-keyword">import</span> asyncio
<span class="hljs-keyword">import</span> aiohttp
<span class="hljs-keyword">import</span> json
<span class="hljs-keyword">import</span> redis
<span class="hljs-keyword">from</span> datetime <span class="hljs-keyword">import</span> datetime, timedelta
<span class="hljs-keyword">import</span> logging

<span class="hljs-keyword">class</span> <span class="hljs-title class_">ThreatIntelligenceAggregator</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):
        self.redis_client = redis.Redis(host=<span class="hljs-string">'localhost'</span>, port=<span class="hljs-number">6379</span>, db=<span class="hljs-number">1</span>)
        self.feeds = [
            {
                <span class="hljs-string">'name'</span>: <span class="hljs-string">'AbuseIPDB'</span>,
                <span class="hljs-string">'url'</span>: <span class="hljs-string">'https://api.abuseipdb.com/api/v2/blacklist'</span>,
                <span class="hljs-string">'headers'</span>: {<span class="hljs-string">'Key'</span>: <span class="hljs-string">'YOUR_API_KEY'</span>, <span class="hljs-string">'Accept'</span>: <span class="hljs-string">'application/json'</span>},
                <span class="hljs-string">'confidence_threshold'</span>: <span class="hljs-number">80</span>
            },
            {
                <span class="hljs-string">'name'</span>: <span class="hljs-string">'VirusTotal'</span>,
                <span class="hljs-string">'url'</span>: <span class="hljs-string">'https://www.virustotal.com/vtapi/v2/ip-address/report'</span>,
                <span class="hljs-string">'api_key'</span>: <span class="hljs-string">'YOUR_VIRUSTOTAL_API_KEY'</span>,
                <span class="hljs-string">'params'</span>: {<span class="hljs-string">'apikey'</span>: <span class="hljs-string">'YOUR_VIRUSTOTAL_API_KEY'</span>}
            },
            {
                <span class="hljs-string">'name'</span>: <span class="hljs-string">'AlienVault_OTX'</span>,
                <span class="hljs-string">'url'</span>: <span class="hljs-string">'https://otx.alienvault.com/api/v1/indicators/export'</span>,
                <span class="hljs-string">'headers'</span>: {<span class="hljs-string">'X-OTX-API-KEY'</span>: <span class="hljs-string">'YOUR_OTX_API_KEY'</span>}
            }
        ]
        
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">fetch_threat_feed</span>(<span class="hljs-params">self, session, feed</span>):
        <span class="hljs-string">"""è·å–å¨èƒæƒ…æŠ¥æ•°æ®"""</span>
        <span class="hljs-keyword">try</span>:
            <span class="hljs-keyword">async</span> <span class="hljs-keyword">with</span> session.get(feed[<span class="hljs-string">'url'</span>], headers=feed.get(<span class="hljs-string">'headers'</span>, {}), params=feed.get(<span class="hljs-string">'params'</span>, {})) <span class="hljs-keyword">as</span> response:
                <span class="hljs-keyword">if</span> response.status == <span class="hljs-number">200</span>:
                    data = <span class="hljs-keyword">await</span> response.json()
                    <span class="hljs-keyword">return</span> {<span class="hljs-string">'feed_name'</span>: feed[<span class="hljs-string">'name'</span>], <span class="hljs-string">'data'</span>: data}
                <span class="hljs-keyword">else</span>:
                    logging.error(<span class="hljs-string">f"è·å–å¨èƒæƒ…æŠ¥å¤±è´¥ï¼š<span class="hljs-subst">{feed[<span class="hljs-string">'name'</span>]}</span> - <span class="hljs-subst">{response.status}</span>"</span>)
                    <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>
        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
            logging.error(<span class="hljs-string">f"è·å–å¨èƒæƒ…æŠ¥å¼‚å¸¸ï¼š<span class="hljs-subst">{feed[<span class="hljs-string">'name'</span>]}</span> - <span class="hljs-subst">{e}</span>"</span>)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>
    
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">aggregate_threat_intelligence</span>(<span class="hljs-params">self</span>):
        <span class="hljs-string">"""èšåˆå¨èƒæƒ…æŠ¥æ•°æ®"""</span>
        <span class="hljs-keyword">async</span> <span class="hljs-keyword">with</span> aiohttp.ClientSession() <span class="hljs-keyword">as</span> session:
            tasks = [self.fetch_threat_feed(session, feed) <span class="hljs-keyword">for</span> feed <span class="hljs-keyword">in</span> self.feeds]
            results = <span class="hljs-keyword">await</span> asyncio.gather(*tasks)
            
            aggregated_threats = {
                <span class="hljs-string">'malicious_ips'</span>: <span class="hljs-built_in">set</span>(),
                <span class="hljs-string">'suspicious_domains'</span>: <span class="hljs-built_in">set</span>(),
                <span class="hljs-string">'attack_signatures'</span>: <span class="hljs-built_in">set</span>(),
                <span class="hljs-string">'timestamp'</span>: datetime.now().isoformat()
            }
            
            <span class="hljs-keyword">for</span> result <span class="hljs-keyword">in</span> results:
                <span class="hljs-keyword">if</span> result:
                    <span class="hljs-keyword">await</span> self.process_feed_data(result, aggregated_threats)
            
            <span class="hljs-comment"># å­˜å‚¨åˆ°Redis</span>
            <span class="hljs-keyword">await</span> self.store_threat_intelligence(aggregated_threats)
            
            <span class="hljs-keyword">return</span> aggregated_threats
    
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">process_feed_data</span>(<span class="hljs-params">self, feed_result, aggregated_threats</span>):
        <span class="hljs-string">"""å¤„ç†å„ä¸ªå¨èƒæƒ…æŠ¥æºçš„æ•°æ®"""</span>
        feed_name = feed_result[<span class="hljs-string">'feed_name'</span>]
        data = feed_result[<span class="hljs-string">'data'</span>]
        
        <span class="hljs-keyword">if</span> feed_name == <span class="hljs-string">'AbuseIPDB'</span>:
            <span class="hljs-keyword">for</span> ip_data <span class="hljs-keyword">in</span> data.get(<span class="hljs-string">'data'</span>, []):
                <span class="hljs-keyword">if</span> ip_data.get(<span class="hljs-string">'confidence'</span>, <span class="hljs-number">0</span>) &gt;= <span class="hljs-number">80</span>:
                    aggregated_threats[<span class="hljs-string">'malicious_ips'</span>].add(ip_data[<span class="hljs-string">'ipAddress'</span>])
                    
        <span class="hljs-keyword">elif</span> feed_name == <span class="hljs-string">'VirusTotal'</span>:
            <span class="hljs-keyword">for</span> ip, report <span class="hljs-keyword">in</span> data.items():
                <span class="hljs-keyword">if</span> report.get(<span class="hljs-string">'response_code'</span>) == <span class="hljs-number">1</span> <span class="hljs-keyword">and</span> report.get(<span class="hljs-string">'positives'</span>, <span class="hljs-number">0</span>) &gt; <span class="hljs-number">5</span>:
                    aggregated_threats[<span class="hljs-string">'malicious_ips'</span>].add(ip)
                    
        <span class="hljs-keyword">elif</span> feed_name == <span class="hljs-string">'AlienVault_OTX'</span>:
            <span class="hljs-keyword">for</span> pulse <span class="hljs-keyword">in</span> data.get(<span class="hljs-string">'results'</span>, []):
                <span class="hljs-keyword">for</span> indicator <span class="hljs-keyword">in</span> pulse.get(<span class="hljs-string">'indicators'</span>, []):
                    <span class="hljs-keyword">if</span> indicator.get(<span class="hljs-string">'type'</span>) == <span class="hljs-string">'IP'</span>:
                        aggregated_threats[<span class="hljs-string">'malicious_ips'</span>].add(indicator.get(<span class="hljs-string">'indicator'</span>))
                    <span class="hljs-keyword">elif</span> indicator.get(<span class="hljs-string">'type'</span>) == <span class="hljs-string">'domain'</span>:
                        aggregated_threats[<span class="hljs-string">'suspicious_domains'</span>].add(indicator.get(<span class="hljs-string">'indicator'</span>))
    
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">store_threat_intelligence</span>(<span class="hljs-params">self, threats</span>):
        <span class="hljs-string">"""å­˜å‚¨å¨èƒæƒ…æŠ¥æ•°æ®"""</span>
        <span class="hljs-comment"># å­˜å‚¨æ¶æ„IP</span>
        <span class="hljs-keyword">if</span> threats[<span class="hljs-string">'malicious_ips'</span>]:
            self.redis_client.delete(<span class="hljs-string">'threats:malicious_ips'</span>)
            <span class="hljs-keyword">for</span> ip <span class="hljs-keyword">in</span> threats[<span class="hljs-string">'malicious_ips'</span>]:
                self.redis_client.sadd(<span class="hljs-string">'threats:malicious_ips'</span>, ip)
            self.redis_client.expire(<span class="hljs-string">'threats:malicious_ips'</span>, <span class="hljs-number">3600</span>)  <span class="hljs-comment"># 1å°æ—¶è¿‡æœŸ</span>
        
        <span class="hljs-comment"># å­˜å‚¨å¯ç–‘åŸŸå</span>
        <span class="hljs-keyword">if</span> threats[<span class="hljs-string">'suspicious_domains'</span>]:
            self.redis_client.delete(<span class="hljs-string">'threats:suspicious_domains'</span>)
            <span class="hljs-keyword">for</span> domain <span class="hljs-keyword">in</span> threats[<span class="hljs-string">'suspicious_domains'</span>]:
                self.redis_client.sadd(<span class="hljs-string">'threats:suspicious_domains'</span>, domain)
            self.redis_client.expire(<span class="hljs-string">'threats:suspicious_domains'</span>, <span class="hljs-number">3600</span>)
        
        <span class="hljs-comment"># è®°å½•æ›´æ–°æ—¶é—´</span>
        self.redis_client.<span class="hljs-built_in">set</span>(<span class="hljs-string">'threats:last_update'</span>, threats[<span class="hljs-string">'timestamp'</span>])
        
        logging.info(<span class="hljs-string">f"å¨èƒæƒ…æŠ¥æ›´æ–°å®Œæˆï¼š<span class="hljs-subst">{<span class="hljs-built_in">len</span>(threats[<span class="hljs-string">'malicious_ips'</span>])}</span>ä¸ªæ¶æ„IPï¼Œ<span class="hljs-subst">{<span class="hljs-built_in">len</span>(threats[<span class="hljs-string">'suspicious_domains'</span>])}</span>ä¸ªå¯ç–‘åŸŸå"</span>)
    
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">check_ip_reputation</span>(<span class="hljs-params">self, ip_address</span>):
        <span class="hljs-string">"""æ£€æŸ¥IPä¿¡èª‰"""</span>
        malicious_ips = self.redis_client.smembers(<span class="hljs-string">'threats:malicious_ips'</span>)
        malicious_ips = [ip.decode(<span class="hljs-string">'utf-8'</span>) <span class="hljs-keyword">for</span> ip <span class="hljs-keyword">in</span> malicious_ips]
        
        <span class="hljs-keyword">if</span> ip_address <span class="hljs-keyword">in</span> malicious_ips:
            <span class="hljs-keyword">return</span> {
                <span class="hljs-string">'is_threat'</span>: <span class="hljs-literal">True</span>,
                <span class="hljs-string">'threat_level'</span>: <span class="hljs-string">'high'</span>,
                <span class="hljs-string">'source'</span>: <span class="hljs-string">'threat_intelligence_feeds'</span>,
                <span class="hljs-string">'recommendation'</span>: <span class="hljs-string">'block_immediately'</span>
            }
        
        <span class="hljs-keyword">return</span> {
            <span class="hljs-string">'is_threat'</span>: <span class="hljs-literal">False</span>,
            <span class="hljs-string">'threat_level'</span>: <span class="hljs-string">'low'</span>,
            <span class="hljs-string">'source'</span>: <span class="hljs-string">'clean'</span>,
            <span class="hljs-string">'recommendation'</span>: <span class="hljs-string">'allow'</span>
        }
    
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">run_continuous_updates</span>(<span class="hljs-params">self</span>):
        <span class="hljs-string">"""æŒç»­æ›´æ–°å¨èƒæƒ…æŠ¥"""</span>
        <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:
            <span class="hljs-keyword">try</span>:
                logging.info(<span class="hljs-string">"å¼€å§‹æ›´æ–°å¨èƒæƒ…æŠ¥æ•°æ®..."</span>)
                <span class="hljs-keyword">await</span> self.aggregate_threat_intelligence()
                logging.info(<span class="hljs-string">"å¨èƒæƒ…æŠ¥æ•°æ®æ›´æ–°å®Œæˆ"</span>)
                
                <span class="hljs-comment"># æ¯30åˆ†é’Ÿæ›´æ–°ä¸€æ¬¡</span>
                <span class="hljs-keyword">await</span> asyncio.sleep(<span class="hljs-number">1800</span>)
                
            <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
                logging.error(<span class="hljs-string">f"å¨èƒæƒ…æŠ¥æ›´æ–°å¼‚å¸¸ï¼š<span class="hljs-subst">{e}</span>"</span>)
                <span class="hljs-keyword">await</span> asyncio.sleep(<span class="hljs-number">300</span>)  <span class="hljs-comment"># 5åˆ†é’Ÿåé‡è¯•</span>

<span class="hljs-comment"># Nginxé…ç½®é›†æˆå¨èƒæƒ…æŠ¥</span>
location / {
    <span class="hljs-comment"># åœ¨accessé˜¶æ®µæ£€æŸ¥IPå¨èƒæƒ…æŠ¥</span>
    access_by_lua_block {
        local redis = require <span class="hljs-string">"resty.redis"</span>
        local red = redis:new()
        red:set_timeout(<span class="hljs-number">1000</span>) -- <span class="hljs-number">1</span>ç§’è¶…æ—¶
        
        local ok, err = red:connect(<span class="hljs-string">"127.0.0.1"</span>, <span class="hljs-number">6379</span>)
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> ok then
            ngx.log(ngx.ERR, <span class="hljs-string">"Redisè¿æ¥å¤±è´¥: "</span>, err)
            <span class="hljs-keyword">return</span>
        end
        
        local client_ip = ngx.var.remote_addr
        local is_threat = red:sismember(<span class="hljs-string">"threats:malicious_ips"</span>, client_ip)
        
        <span class="hljs-keyword">if</span> is_threat == <span class="hljs-number">1</span> then
            ngx.log(ngx.WARN, <span class="hljs-string">"æ£€æµ‹åˆ°æ¶æ„IP: "</span>, client_ip)
            ngx.exit(<span class="hljs-number">403</span>)
        end
    }
    
    <span class="hljs-comment"># å…¶ä»–é…ç½®...</span>
}
</code></pre>
<h3 data-id="heading-41">ğŸ¢ ç¬¬åéƒ¨åˆ†ï¼šç°ä»£ä¼ä¸šçº§é›†æˆæ–¹æ¡ˆ</h3>
<h4 data-id="heading-42">10.1 DevSecOpsæµæ°´çº¿é›†æˆ</h4>
<p><strong>GitLab CI/CDå®‰å…¨æµæ°´çº¿ï¼š</strong></p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># .gitlab-ci.yml</span>
<span class="hljs-attr">stages:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">security-scan</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">build</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">security-test</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">deploy</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">security-monitor</span>

<span class="hljs-attr">variables:</span>
  <span class="hljs-attr">DOCKER_DRIVER:</span> <span class="hljs-string">overlay2</span>
  <span class="hljs-attr">DOCKER_TLS_CERTDIR:</span> <span class="hljs-string">"/certs"</span>
  <span class="hljs-attr">REGISTRY:</span> <span class="hljs-string">registry.example.com</span>
  <span class="hljs-attr">IMAGE_NAME:</span> <span class="hljs-string">$REGISTRY/nginx-security-gateway</span>

<span class="hljs-comment"># å®‰å…¨æ‰«æé˜¶æ®µ</span>
<span class="hljs-attr">security:nginx-config:</span>
  <span class="hljs-attr">stage:</span> <span class="hljs-string">security-scan</span>
  <span class="hljs-attr">image:</span> 
    <span class="hljs-attr">name:</span> <span class="hljs-string">nginx:alpine</span>
    <span class="hljs-attr">entrypoint:</span> [<span class="hljs-string">""</span>]
  <span class="hljs-attr">script:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">apk</span> <span class="hljs-string">add</span> <span class="hljs-string">--no-cache</span> <span class="hljs-string">python3</span> <span class="hljs-string">py3-pip</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">pip3</span> <span class="hljs-string">install</span> <span class="hljs-string">pyyaml</span> <span class="hljs-string">jsonschema</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">|
      python3 -c "
      import yaml
      import json
      import sys
</span>      
      <span class="hljs-comment"># éªŒè¯Nginxé…ç½®æ–‡ä»¶è¯­æ³•</span>
      <span class="hljs-string">import</span> <span class="hljs-string">subprocess</span>
      <span class="hljs-string">result</span> <span class="hljs-string">=</span> <span class="hljs-string">subprocess.run(['nginx',</span> <span class="hljs-string">'-t'</span><span class="hljs-string">,</span> <span class="hljs-string">'-c'</span><span class="hljs-string">,</span> <span class="hljs-string">'/etc/nginx/nginx.conf'</span><span class="hljs-string">],</span> 
                            <span class="hljs-string">capture_output=True,</span> <span class="hljs-string">text=True)</span>
      <span class="hljs-string">if</span> <span class="hljs-string">result.returncode</span> <span class="hljs-type">!=</span> <span class="hljs-attr">0:</span>
          <span class="hljs-string">print('Nginxé…ç½®è¯­æ³•é”™è¯¯:',</span> <span class="hljs-string">result.stderr)</span>
          <span class="hljs-string">sys.exit(1)</span>
      
      <span class="hljs-comment"># å®‰å…¨åŸºçº¿æ£€æŸ¥</span>
      <span class="hljs-string">with</span> <span class="hljs-string">open('/etc/nginx/nginx.conf',</span> <span class="hljs-string">'r'</span><span class="hljs-string">)</span> <span class="hljs-attr">as f:</span>
          <span class="hljs-string">config</span> <span class="hljs-string">=</span> <span class="hljs-string">f.read()</span>
      
      <span class="hljs-string">security_checks</span> <span class="hljs-string">=</span> [
          <span class="hljs-string">('server_tokens</span> <span class="hljs-string">off'</span>, <span class="hljs-string">'ç‰ˆæœ¬å·éšè—'</span><span class="hljs-string">)</span>,
          <span class="hljs-string">('add_header</span> <span class="hljs-string">X-Frame-Options'</span>, <span class="hljs-string">'ç‚¹å‡»åŠ«æŒé˜²æŠ¤'</span><span class="hljs-string">)</span>,
          <span class="hljs-string">('add_header</span> <span class="hljs-string">X-Content-Type-Options'</span>, <span class="hljs-string">'MIMEå—…æ¢é˜²æŠ¤'</span><span class="hljs-string">)</span>,
          <span class="hljs-string">('location</span> <span class="hljs-string">~</span> <span class="hljs-string">/\\.'</span>, <span class="hljs-string">'éšè—æ–‡ä»¶ä¿æŠ¤'</span><span class="hljs-string">)</span>,
          <span class="hljs-string">('location</span> <span class="hljs-string">~*</span> <span class="hljs-string">\\\.(git|env)'</span>, <span class="hljs-string">'æ•æ„Ÿæ–‡ä»¶ä¿æŠ¤'</span><span class="hljs-string">)</span>
      ]
      
      <span class="hljs-string">missing_security</span> <span class="hljs-string">=</span> []
      <span class="hljs-string">for</span> <span class="hljs-string">check,</span> <span class="hljs-attr">description in security_checks:</span>
          <span class="hljs-attr">if check not in config:</span>
              <span class="hljs-string">missing_security.append(description)</span>
      
      <span class="hljs-attr">if missing_security:</span>
          <span class="hljs-string">print('ç¼ºå¤±çš„å®‰å…¨é…ç½®:',</span> <span class="hljs-string">missing_security)</span>
          <span class="hljs-string">sys.exit(1)</span>
      
      <span class="hljs-string">print('âœ…</span> <span class="hljs-string">å®‰å…¨é…ç½®æ£€æŸ¥é€šè¿‡')</span>
      <span class="hljs-string">"
  artifacts:
    reports:
      junit: security-report.xml
    expire_in: 1 week
  only:
    - branches
    - merge_requests

# å®¹å™¨é•œåƒå®‰å…¨æ‰«æ
security:container-scan:
  stage: security-scan
  image: aquasec/trivy:latest
  script:
    - trivy image --exit-code 1 --severity HIGH,CRITICAL $IMAGE_NAME:latest || true
    - trivy image --format json --output trivy-report.json $IMAGE_NAME:latest
  artifacts:
    reports:
      container_scanning: trivy-report.json
    expire_in: 1 week
  allow_failure: true

# æ„å»ºé˜¶æ®µ
build:docker:
  stage: build
  image: docker:latest
  services:
    - docker:dind
  script:
    - docker build -t $IMAGE_NAME:$CI_COMMIT_SHA .
    - docker tag $IMAGE_NAME:$CI_COMMIT_SHA $IMAGE_NAME:latest
    - docker push $IMAGE_NAME:$CI_COMMIT_SHA
    - docker push $IMAGE_NAME:latest
  dependencies:
    - security:nginx-config

# å®‰å…¨æµ‹è¯•é˜¶æ®µ
security:penetration-test:
  stage: security-test
  image: owasp/zap2docker-stable:latest
  script:
    - mkdir -p zap-reports
    - zap-baseline.py -t http://nginx-security-gateway-staging.example.com \\
        -r zap-report.html \\
        -J zap-report.json \\
        -w zap-report.md \\
        -x zap-report.xml
  artifacts:
    reports:
      junit: zap-report.xml
    paths:
      - zap-reports/
    expire_in: 1 week
  allow_failure: true

# éƒ¨ç½²é˜¶æ®µ
deploy:staging:
  stage: deploy
  image: alpine:latest
  script:
    - apk add --no-cache curl
    - |
      # éƒ¨ç½²åˆ°stagingç¯å¢ƒ
      curl -X POST \\
        -H "</span><span class="hljs-attr">Content-Type:</span> <span class="hljs-string">application/json"</span> <span class="hljs-string">\\</span>
        <span class="hljs-string">-H</span> <span class="hljs-string">"Authorization: Bearer $STAGING_API_TOKEN"</span> <span class="hljs-string">\\</span>
        <span class="hljs-string">-d</span> <span class="hljs-string">"{\\"</span><span class="hljs-string">image\\":</span> <span class="hljs-string">\\"$IMAGE_NAME:$CI_COMMIT_SHA\\",</span> <span class="hljs-string">\\"environment\\":</span> <span class="hljs-string">\\"staging\\"}"</span> <span class="hljs-string">\\</span>
        <span class="hljs-string">https://api.staging.example.com/deploy</span>
      
      <span class="hljs-comment"># ç­‰å¾…éƒ¨ç½²å®Œæˆ</span>
      <span class="hljs-string">sleep</span> <span class="hljs-number">30</span>
      
      <span class="hljs-comment"># éªŒè¯éƒ¨ç½²</span>
      <span class="hljs-string">curl</span> <span class="hljs-string">-f</span> <span class="hljs-string">http://nginx-security-gateway-staging.example.com/health</span> <span class="hljs-string">||</span> <span class="hljs-string">exit</span> <span class="hljs-number">1</span>
  <span class="hljs-attr">environment:</span>
    <span class="hljs-attr">name:</span> <span class="hljs-string">staging</span>
    <span class="hljs-attr">url:</span> <span class="hljs-string">http://nginx-security-gateway-staging.example.com</span>
  <span class="hljs-attr">dependencies:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">build:docker</span>

<span class="hljs-attr">deploy:production:</span>
  <span class="hljs-attr">stage:</span> <span class="hljs-string">deploy</span>
  <span class="hljs-attr">image:</span> <span class="hljs-string">alpine:latest</span>
  <span class="hljs-attr">script:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">apk</span> <span class="hljs-string">add</span> <span class="hljs-string">--no-cache</span> <span class="hljs-string">curl</span> <span class="hljs-string">jq</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">|
      # è·å–stagingç¯å¢ƒæµ‹è¯•ç»“æœ
      STAGING_TESTS=$(curl -s https://api.staging.example.com/tests/$CI_COMMIT_SHA)
      SECURITY_SCORE=$(echo $STAGING_TESTS | jq -r '.security_score')
</span>      
      <span class="hljs-string">if</span> [ <span class="hljs-string">"$SECURITY_SCORE"</span> <span class="hljs-string">-lt</span> <span class="hljs-number">90</span> ]<span class="hljs-string">;</span> <span class="hljs-string">then</span>
        <span class="hljs-string">echo</span> <span class="hljs-string">"å®‰å…¨è¯„åˆ†ä¸è¶³: $SECURITY_SCORE/100"</span>
        <span class="hljs-string">exit</span> <span class="hljs-number">1</span>
      <span class="hljs-string">fi</span>
      
      <span class="hljs-comment"># éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ</span>
      <span class="hljs-string">curl</span> <span class="hljs-string">-X</span> <span class="hljs-string">POST</span> <span class="hljs-string">\\</span>
        <span class="hljs-string">-H</span> <span class="hljs-string">"Content-Type: application/json"</span> <span class="hljs-string">\\</span>
        <span class="hljs-string">-H</span> <span class="hljs-string">"Authorization: Bearer $PRODUCTION_API_TOKEN"</span> <span class="hljs-string">\\</span>
        <span class="hljs-string">-d</span> <span class="hljs-string">"{\\"</span><span class="hljs-string">image\\":</span> <span class="hljs-string">\\"$IMAGE_NAME:$CI_COMMIT_SHA\\",</span> <span class="hljs-string">\\"environment\\":</span> <span class="hljs-string">\\"production\\"}"</span> <span class="hljs-string">\\</span>
        <span class="hljs-string">https://api.production.example.com/deploy</span>
      
      <span class="hljs-comment"># éªŒè¯éƒ¨ç½²</span>
      <span class="hljs-string">sleep</span> <span class="hljs-number">60</span>
      <span class="hljs-string">curl</span> <span class="hljs-string">-f</span> <span class="hljs-string">https://nginx-security-gateway.example.com/health</span> <span class="hljs-string">||</span> <span class="hljs-string">exit</span> <span class="hljs-number">1</span>
  <span class="hljs-attr">environment:</span>
    <span class="hljs-attr">name:</span> <span class="hljs-string">production</span>
    <span class="hljs-attr">url:</span> <span class="hljs-string">https://nginx-security-gateway.example.com</span>
  <span class="hljs-attr">when:</span> <span class="hljs-string">manual</span>
  <span class="hljs-attr">only:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">master</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">tags</span>

<span class="hljs-comment"># å®‰å…¨ç›‘æ§é˜¶æ®µ</span>
<span class="hljs-attr">monitor:security-metrics:</span>
  <span class="hljs-attr">stage:</span> <span class="hljs-string">security-monitor</span>
  <span class="hljs-attr">image:</span> <span class="hljs-string">python:3.11-alpine</span>
  <span class="hljs-attr">script:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">pip</span> <span class="hljs-string">install</span> <span class="hljs-string">requests</span> <span class="hljs-string">prometheus-client</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">|
      python3 -c "
      import requests
      import json
      from prometheus_client import CollectorRegistry, Gauge, push_to_gateway
</span>      
      <span class="hljs-comment"># è·å–å®‰å…¨æŒ‡æ ‡</span>
      <span class="hljs-string">response</span> <span class="hljs-string">=</span> <span class="hljs-string">requests.get('https://nginx-security-gateway.example.com/metrics')</span>
      <span class="hljs-string">metrics</span> <span class="hljs-string">=</span> <span class="hljs-string">response.text</span>
      
      <span class="hljs-comment"># è§£æå…³é”®å®‰å…¨æŒ‡æ ‡</span>
      <span class="hljs-string">registry</span> <span class="hljs-string">=</span> <span class="hljs-string">CollectorRegistry()</span>
      <span class="hljs-string">blocked_requests</span> <span class="hljs-string">=</span> <span class="hljs-string">Gauge('nginx_blocked_requests_total',</span> <span class="hljs-string">'Total blocked requests'</span><span class="hljs-string">,</span> <span class="hljs-string">registry=registry)</span>
      <span class="hljs-string">anomaly_detections</span> <span class="hljs-string">=</span> <span class="hljs-string">Gauge('nginx_anomaly_detections_total',</span> <span class="hljs-string">'Total anomaly detections'</span><span class="hljs-string">,</span> <span class="hljs-string">registry=registry)</span>
      <span class="hljs-string">threat_intel_hits</span> <span class="hljs-string">=</span> <span class="hljs-string">Gauge('nginx_threat_intel_hits_total',</span> <span class="hljs-string">'Total threat intelligence hits'</span><span class="hljs-string">,</span> <span class="hljs-string">registry=registry)</span>
      
      <span class="hljs-comment"># æ¨é€æŒ‡æ ‡åˆ°Prometheus</span>
      <span class="hljs-string">push_to_gateway('prometheus.example.com:9091',</span> <span class="hljs-string">job='nginx-security-gateway',</span> <span class="hljs-string">registry=registry)</span>
      
      <span class="hljs-string">print('âœ…</span> <span class="hljs-string">å®‰å…¨æŒ‡æ ‡å·²æ¨é€åˆ°ç›‘æ§ç³»ç»Ÿ')</span>
      <span class="hljs-string">"
  dependencies:
    - deploy:production
  allow_failure: true
</span></code></pre>
<h4 data-id="heading-43">10.2 SIEM/SOARå¹³å°é›†æˆ</h4>
<p><strong>Splunké›†æˆé…ç½®ï¼š</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>
<span class="hljs-comment"># splunk-integration.sh</span>

<span class="hljs-comment"># Nginxå®‰å…¨æ—¥å¿—è½¬å‘åˆ°Splunk</span>
NGINX_LOG_DIR=<span class="hljs-string">"/var/log/nginx"</span>
SPLUNK_HEC_URL=<span class="hljs-string">"https://splunk.example.com:8088/services/collector"</span>
SPLUNK_HEC_TOKEN=<span class="hljs-string">"your-hec-token-here"</span>

<span class="hljs-comment"># åˆ›å»ºæ—¥å¿—è½¬å‘è„šæœ¬</span>
<span class="hljs-built_in">cat</span> &gt; /usr/local/bin/nginx-splunk-forwarder.py &lt;&lt; <span class="hljs-string">'EOF'</span>
<span class="hljs-comment">#!/usr/bin/env python3</span>
import json
import time
import requests
import gzip
from datetime import datetime
import logging

class NginxSplunkForwarder:
    def __init__(self, splunk_url, splunk_token):
        self.splunk_url = splunk_url
        self.splunk_token = splunk_token
        self.headers = {
            <span class="hljs-string">'Authorization'</span>: f<span class="hljs-string">'Splunk {splunk_token}'</span>,
            <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json'</span>
        }
        
    def parse_nginx_log(self, log_line):
        <span class="hljs-string">""</span><span class="hljs-string">"è§£æNginxæ—¥å¿—"</span><span class="hljs-string">""</span>
        try:
            <span class="hljs-comment"># å‡è®¾ä½¿ç”¨JSONæ ¼å¼çš„Nginxæ—¥å¿—</span>
            log_data = json.loads(log_line)
            
            <span class="hljs-comment"># æ·»åŠ å®‰å…¨ç›¸å…³å­—æ®µ</span>
            log_data[<span class="hljs-string">'event_type'</span>] = <span class="hljs-string">'nginx_access'</span>
            log_data[<span class="hljs-string">'security_relevant'</span>] = self.is_security_relevant(log_data)
            log_data[<span class="hljs-string">'threat_level'</span>] = self.calculate_threat_level(log_data)
            
            <span class="hljs-built_in">return</span> log_data
        except json.JSONDecodeError:
            <span class="hljs-built_in">return</span> None
    
    def is_security_relevant(self, log_data):
        <span class="hljs-string">""</span><span class="hljs-string">"åˆ¤æ–­æ˜¯å¦ä¸ºå®‰å…¨ç›¸å…³äº‹ä»¶"</span><span class="hljs-string">""</span>
        security_indicators = [
            log_data.get(<span class="hljs-string">'status'</span>, 0) &gt;= 400,  <span class="hljs-comment"># é”™è¯¯çŠ¶æ€ç </span>
            <span class="hljs-string">'bot'</span> <span class="hljs-keyword">in</span> log_data.get(<span class="hljs-string">'http_user_agent'</span>, <span class="hljs-string">''</span>).lower(),
            <span class="hljs-string">'scan'</span> <span class="hljs-keyword">in</span> log_data.get(<span class="hljs-string">'http_user_agent'</span>, <span class="hljs-string">''</span>).lower(),
            log_data.get(<span class="hljs-string">'request_uri'</span>, <span class="hljs-string">''</span>).count(<span class="hljs-string">'../'</span>) &gt; 0,  <span class="hljs-comment"># è·¯å¾„éå†</span>
            <span class="hljs-string">'.git'</span> <span class="hljs-keyword">in</span> log_data.get(<span class="hljs-string">'request_uri'</span>, <span class="hljs-string">''</span>),  <span class="hljs-comment"># Gitç›®å½•è®¿é—®</span>
            <span class="hljs-string">'.env'</span> <span class="hljs-keyword">in</span> log_data.get(<span class="hljs-string">'request_uri'</span>, <span class="hljs-string">''</span>),  <span class="hljs-comment"># ç¯å¢ƒæ–‡ä»¶è®¿é—®</span>
            len(log_data.get(<span class="hljs-string">'request_uri'</span>, <span class="hljs-string">''</span>)) &gt; 1000,  <span class="hljs-comment"># è¶…é•¿URI</span>
            log_data.get(<span class="hljs-string">'body_bytes_sent'</span>, 0) == 0 and log_data.get(<span class="hljs-string">'status'</span>) == 200  <span class="hljs-comment"># ç©ºå“åº”</span>
        ]
        
        <span class="hljs-built_in">return</span> any(security_indicators)
    
    def calculate_threat_level(self, log_data):
        <span class="hljs-string">""</span><span class="hljs-string">"è®¡ç®—å¨èƒç­‰çº§"</span><span class="hljs-string">""</span>
        threat_score = 0
        
        <span class="hljs-comment"># çŠ¶æ€ç è¯„åˆ†</span>
        status = log_data.get(<span class="hljs-string">'status'</span>, 0)
        <span class="hljs-keyword">if</span> status &gt;= 500:
            threat_score += 10
        <span class="hljs-keyword">elif</span> status &gt;= 400:
            threat_score += 5
        
        <span class="hljs-comment"># URIå¼‚å¸¸è¯„åˆ†</span>
        uri = log_data.get(<span class="hljs-string">'request_uri'</span>, <span class="hljs-string">''</span>)
        <span class="hljs-keyword">if</span> <span class="hljs-string">'../'</span> <span class="hljs-keyword">in</span> uri:
            threat_score += 15
        <span class="hljs-keyword">if</span> <span class="hljs-string">'.git'</span> <span class="hljs-keyword">in</span> uri or <span class="hljs-string">'.env'</span> <span class="hljs-keyword">in</span> uri:
            threat_score += 20
        <span class="hljs-keyword">if</span> len(uri) &gt; 1000:
            threat_score += 5
        
        <span class="hljs-comment"># User-Agentå¼‚å¸¸è¯„åˆ†</span>
        user_agent = log_data.get(<span class="hljs-string">'http_user_agent'</span>, <span class="hljs-string">''</span>)
        suspicious_patterns = [<span class="hljs-string">'bot'</span>, <span class="hljs-string">'scan'</span>, <span class="hljs-string">'nmap'</span>, <span class="hljs-string">'nikto'</span>, <span class="hljs-string">'sqlmap'</span>, <span class="hljs-string">'hydra'</span>]
        <span class="hljs-keyword">for</span> pattern <span class="hljs-keyword">in</span> suspicious_patterns:
            <span class="hljs-keyword">if</span> pattern <span class="hljs-keyword">in</span> user_agent.lower():
                threat_score += 10
                <span class="hljs-built_in">break</span>
        
        <span class="hljs-comment"># å“åº”æ—¶é—´å¼‚å¸¸è¯„åˆ†</span>
        request_time = <span class="hljs-built_in">float</span>(log_data.get(<span class="hljs-string">'request_time'</span>, 0))
        <span class="hljs-keyword">if</span> request_time &gt; 5.0:
            threat_score += 5
        
        <span class="hljs-comment"># å¨èƒç­‰çº§æ˜ å°„</span>
        <span class="hljs-keyword">if</span> threat_score &gt;= 30:
            <span class="hljs-built_in">return</span> <span class="hljs-string">'critical'</span>
        <span class="hljs-keyword">elif</span> threat_score &gt;= 20:
            <span class="hljs-built_in">return</span> <span class="hljs-string">'high'</span>
        <span class="hljs-keyword">elif</span> threat_score &gt;= 10:
            <span class="hljs-built_in">return</span> <span class="hljs-string">'medium'</span>
        <span class="hljs-keyword">elif</span> threat_score &gt;= 5:
            <span class="hljs-built_in">return</span> <span class="hljs-string">'low'</span>
        <span class="hljs-keyword">else</span>:
            <span class="hljs-built_in">return</span> <span class="hljs-string">'info'</span>
    
    def send_to_splunk(self, event_data):
        <span class="hljs-string">""</span><span class="hljs-string">"å‘é€äº‹ä»¶åˆ°Splunk"</span><span class="hljs-string">""</span>
        payload = {
            <span class="hljs-string">'event'</span>: event_data,
            <span class="hljs-string">'sourcetype'</span>: <span class="hljs-string">'nginx:security'</span>,
            <span class="hljs-string">'index'</span>: <span class="hljs-string">'security'</span>,
            <span class="hljs-string">'host'</span>: <span class="hljs-string">'nginx-security-gateway'</span>
        }
        
        try:
            response = requests.post(
                self.splunk_url,
                headers=self.headers,
                json=payload,
                <span class="hljs-built_in">timeout</span>=10
            )
            
            <span class="hljs-keyword">if</span> response.status_code != 200:
                logging.error(f<span class="hljs-string">"Splunk HECé”™è¯¯: {response.status_code} - {response.text}"</span>)
                <span class="hljs-built_in">return</span> False
            
            <span class="hljs-built_in">return</span> True
        except requests.exceptions.RequestException as e:
            logging.error(f<span class="hljs-string">"å‘é€äº‹ä»¶åˆ°Splunkå¤±è´¥: {e}"</span>)
            <span class="hljs-built_in">return</span> False
    
    def monitor_log_file(self, log_file_path):
        <span class="hljs-string">""</span><span class="hljs-string">"ç›‘æ§æ—¥å¿—æ–‡ä»¶"</span><span class="hljs-string">""</span>
        with open(log_file_path, <span class="hljs-string">'r'</span>) as f:
            <span class="hljs-comment"># ç§»åŠ¨åˆ°æ–‡ä»¶æœ«å°¾</span>
            f.seek(0, 2)
            
            <span class="hljs-keyword">while</span> True:
                line = f.readline()
                <span class="hljs-keyword">if</span> not line:
                    time.sleep(0.1)
                    <span class="hljs-built_in">continue</span>
                
                <span class="hljs-comment"># è§£ææ—¥å¿—</span>
                parsed_data = self.parse_nginx_log(line.strip())
                <span class="hljs-keyword">if</span> parsed_data:
                    <span class="hljs-comment"># å‘é€åˆ°Splunk</span>
                    <span class="hljs-keyword">if</span> parsed_data[<span class="hljs-string">'security_relevant'</span>] or parsed_data[<span class="hljs-string">'threat_level'</span>] != <span class="hljs-string">'info'</span>:
                        success = self.send_to_splunk(parsed_data)
                        <span class="hljs-keyword">if</span> success:
                            logging.info(f<span class="hljs-string">"å®‰å…¨äº‹ä»¶å·²å‘é€åˆ°Splunk: {parsed_data.get('remote_addr')} - {parsed_data.get('threat_level')}"</span>)

<span class="hljs-comment"># å¯åŠ¨æ—¥å¿—ç›‘æ§</span>
forwarder = NginxSplunkForwarder(SPLUNK_HEC_URL, SPLUNK_HEC_TOKEN)
forwarder.monitor_log_file(<span class="hljs-string">"/var/log/nginx/security-access.log"</span>)
EOF

<span class="hljs-built_in">chmod</span> +x /usr/local/bin/nginx-splunk-forwarder.py
</code></pre>
<p><strong>Elasticsearchå®‰å…¨åˆ†æï¼š</strong></p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"mappings"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"properties"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"@timestamp"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"date"</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"event_type"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"keyword"</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"remote_addr"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ip"</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"request_uri"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"text"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"analyzer"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"standard"</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"http_user_agent"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"text"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"analyzer"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"standard"</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"status"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"integer"</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"body_bytes_sent"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"long"</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"request_time"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"float"</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"security_relevant"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"boolean"</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"threat_level"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"keyword"</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"geoip"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"properties"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
          <span class="hljs-attr">"country_iso_code"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"keyword"</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
          <span class="hljs-attr">"location"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"geo_point"</span><span class="hljs-punctuation">}</span>
        <span class="hljs-punctuation">}</span>
      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"attack_classification"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"properties"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
          <span class="hljs-attr">"attack_type"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"keyword"</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
          <span class="hljs-attr">"confidence"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"float"</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
          <span class="hljs-attr">"severity"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"keyword"</span><span class="hljs-punctuation">}</span>
        <span class="hljs-punctuation">}</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"settings"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"number_of_shards"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">3</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"number_of_replicas"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"index"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"lifecycle"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"nginx-security-policy"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"rollover_alias"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"nginx-security"</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h4 data-id="heading-44">10.3 å¤šäº‘ç¯å¢ƒç»Ÿä¸€å®‰å…¨ç­–ç•¥</h4>
<p><strong>Terraformå¤šäº‘å®‰å…¨é…ç½®ï¼š</strong></p>
<pre><code class="hljs language-hcl" lang="hcl"># terraform/main.tf
terraform {
  required_version = "&gt;= 1.0"
  required_providers {
    aws = {
      source  = "hashicorp/aws"
      version = "~&gt; 5.0"
    }
    azurerm = {
      source  = "hashicorp/azurerm"
      version = "~&gt; 3.0"
    }
    google = {
      source  = "hashicorp/google"
      version = "~&gt; 4.0"
    }
  }
}

# AWS WAFé…ç½®
module "aws_waf" {
  source = "./modules/aws-waf"
  
  name_prefix = "nginx-security"
  
  # åŸºç¡€è§„åˆ™
  managed_rules = [
    {
      name     = "AWSManagedRulesCommonRuleSet"
      priority = 1
      override_action = "none"
      excluded_rules = []
    },
    {
      name     = "AWSManagedRulesKnownBadInputsRuleSet"
      priority = 2
      override_action = "none"
      excluded_rules = []
    },
    {
      name     = "AWSManagedRulesSQLiRuleSet"
      priority = 3
      override_action = "none"
      excluded_rules = []
    },
    {
      name     = "AWSManagedRulesLinuxRuleSet"
      priority = 4
      override_action = "none"
      excluded_rules = []
    }
  ]
  
  # è‡ªå®šä¹‰è§„åˆ™
  custom_rules = [
    {
      name     = "block_malicious_ips"
      priority = 5
      action   = "block"
      
      statement = {
        ip_set_reference_statement = {
          arn = aws_wafv2_ip_set.malicious_ips.arn
        }
      }
    },
    {
      name     = "rate_limit_per_ip"
      priority = 6
      action   = "block"
      
      statement = {
        rate_based_statement = {
          limit              = 2000
          aggregate_key_type = "IP"
          evaluation_window_sec = 300
        }
      }
    }
  ]
  
  tags = {
    Environment = var.environment
    Purpose     = "nginx-security-gateway"
    ManagedBy   = "terraform"
  }
}

# Azure Application Gateway WAF
module "azure_waf" {
  source = "./modules/azure-waf"
  
  name                = "nginx-security-waf"
  resource_group_name = azurerm_resource_group.main.name
  location           = azurerm_resource_group.main.location
  
  # WAFç­–ç•¥
  waf_policy_settings = {
    enabled = true
    mode    = "Prevention"
    
    managed_rules = {
      owasp_3_2 = {
        enabled = true
        
        rule_overrides = [
          {
            rule_id = "942100"
            enabled = true
            action  = "Block"
          },
          {
            rule_id = "942110"
            enabled = true
            action  = "Block"
          }
        ]
      }
    }
    
    custom_rules = [
      {
        name     = "block_malicious_ips"
        priority = 1
        rule_type = "MatchRule"
        action   = "Block"
        
        match_conditions = [
          {
            match_variables = [
              {
                variable_name = "RemoteAddr"
              }
            ]
            operator = "IPMatch"
            match_values = var.malicious_ip_ranges
          }
        ]
      }
    ]
  }
  
  tags = {
    Environment = var.environment
    Purpose     = "nginx-security-gateway"
    ManagedBy   = "terraform"
  }
}

# Google Cloud Armor
module "gcp_cloud_armor" {
  source = "./modules/gcp-cloud-armor"
  
  project = var.gcp_project_id
  name    = "nginx-security-policy"
  
  # å®‰å…¨è§„åˆ™
  security_rules = [
    {
      action   = "deny(403)"
      priority = 100
      
      match = {
        versioned_expr = "SRC_IPS_V1"
        config = {
          src_ip_ranges = var.malicious_ip_ranges
        }
      }
      
      description = "Block known malicious IPs"
    },
    {
      action   = "rate_based_ban"
      priority = 200
      
      match = {
        versioned_expr = "SRC_IPS_V1"
        config = {
          src_ip_ranges = ["*"]
        }
      }
      
      rate_limit_options = {
        conform_action = "allow"
        exceed_action = "deny(429)"
        enforce_on_key = "IP"
        rate_limit_threshold = {
          count        = 100
          interval_sec = 60
        }
        ban_duration_sec = 600
      }
      
      description = "Rate limit per IP"
    }
  ]
  
  adaptive_protection_config = {
    layer_7_ddos_defense_config = {
      enable = true
    }
  }
  
  tags = {
    Environment = var.environment
    Purpose     = "nginx-security-gateway"
    ManagedBy   = "terraform"
  }
}
</code></pre>
<h3 data-id="heading-45">âš¡ ç¬¬åä¸€éƒ¨åˆ†ï¼šé«˜çº§æ”»é˜²å¯¹æŠ—ä¸é›¶æ—¥é˜²æŠ¤</h3>
<h4 data-id="heading-46">11.1 é›¶æ—¥æ¼æ´åº”æ€¥å“åº”æœºåˆ¶</h4>
<p><strong>è‡ªåŠ¨åŒ–æ¼æ´å“åº”ç³»ç»Ÿï¼š</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment">#!/usr/bin/env python3</span>
<span class="hljs-comment"># zero_day_response_system.py</span>

<span class="hljs-keyword">import</span> asyncio
<span class="hljs-keyword">import</span> aiohttp
<span class="hljs-keyword">import</span> json
<span class="hljs-keyword">import</span> redis
<span class="hljs-keyword">from</span> datetime <span class="hljs-keyword">import</span> datetime, timedelta
<span class="hljs-keyword">import</span> logging
<span class="hljs-keyword">import</span> subprocess
<span class="hljs-keyword">import</span> hashlib

<span class="hljs-keyword">class</span> <span class="hljs-title class_">ZeroDayResponseSystem</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):
        self.redis_client = redis.Redis(host=<span class="hljs-string">'localhost'</span>, port=<span class="hljs-number">6379</span>, db=<span class="hljs-number">2</span>)
        self.vulnerability_feeds = [
            {
                <span class="hljs-string">'name'</span>: <span class="hljs-string">'NVD'</span>,
                <span class="hljs-string">'url'</span>: <span class="hljs-string">'https://services.nvd.nist.gov/rest/json/cves/2.0'</span>,
                <span class="hljs-string">'params'</span>: {
                    <span class="hljs-string">'resultsPerPage'</span>: <span class="hljs-number">100</span>,
                    <span class="hljs-string">'startIndex'</span>: <span class="hljs-number">0</span>,
                    <span class="hljs-string">'pubStartDate'</span>: (datetime.now() - timedelta(days=<span class="hljs-number">7</span>)).strftime(<span class="hljs-string">'%Y-%m-%dT%H:%M:%S.%f'</span>)[:-<span class="hljs-number">3</span>] + <span class="hljs-string">'Z'</span>
                }
            },
            {
                <span class="hljs-string">'name'</span>: <span class="hljs-string">'VulnDB'</span>,
                <span class="hljs-string">'url'</span>: <span class="hljs-string">'https://vulndb.cyberriskanalytics.com/api/v1/vulnerabilities'</span>,
                <span class="hljs-string">'headers'</span>: {<span class="hljs-string">'X-API-KEY'</span>: <span class="hljs-string">'YOUR_VULNDB_API_KEY'</span>}
            }
        ]
        
        <span class="hljs-comment"># Nginxç›¸å…³CVEæ¨¡å¼</span>
        self.nginx_cve_patterns = [
            <span class="hljs-string">'nginx'</span>, <span class="hljs-string">'NGINX'</span>, <span class="hljs-string">'CVE-2023'</span>, <span class="hljs-string">'CVE-2024'</span>,  <span class="hljs-comment"># å¹´ä»½æ¨¡å¼</span>
            <span class="hljs-string">'buffer overflow'</span>, <span class="hljs-string">'denial of service'</span>, <span class="hljs-string">'DoS'</span>, <span class="hljs-string">'remote code execution'</span>,
            <span class="hljs-string">'RCE'</span>, <span class="hljs-string">'authentication bypass'</span>, <span class="hljs-string">'privilege escalation'</span>
        ]
        
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">fetch_vulnerability_feed</span>(<span class="hljs-params">self, session, feed</span>):
        <span class="hljs-string">"""è·å–æ¼æ´æƒ…æŠ¥"""</span>
        <span class="hljs-keyword">try</span>:
            <span class="hljs-keyword">async</span> <span class="hljs-keyword">with</span> session.get(feed[<span class="hljs-string">'url'</span>], 
                                 headers=feed.get(<span class="hljs-string">'headers'</span>, {}), 
                                 params=feed.get(<span class="hljs-string">'params'</span>, {})) <span class="hljs-keyword">as</span> response:
                <span class="hljs-keyword">if</span> response.status == <span class="hljs-number">200</span>:
                    data = <span class="hljs-keyword">await</span> response.json()
                    <span class="hljs-keyword">return</span> {<span class="hljs-string">'feed_name'</span>: feed[<span class="hljs-string">'name'</span>], <span class="hljs-string">'data'</span>: data}
                <span class="hljs-keyword">else</span>:
                    logging.error(<span class="hljs-string">f"è·å–æ¼æ´æƒ…æŠ¥å¤±è´¥ï¼š<span class="hljs-subst">{feed[<span class="hljs-string">'name'</span>]}</span> - <span class="hljs-subst">{response.status}</span>"</span>)
                    <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>
        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
            logging.error(<span class="hljs-string">f"è·å–æ¼æ´æƒ…æŠ¥å¼‚å¸¸ï¼š<span class="hljs-subst">{feed[<span class="hljs-string">'name'</span>]}</span> - <span class="hljs-subst">{e}</span>"</span>)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>
    
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">analyze_vulnerabilities</span>(<span class="hljs-params">self, vuln_data</span>):
        <span class="hljs-string">"""åˆ†ææ¼æ´æ•°æ®ï¼Œè¯†åˆ«ä¸Nginxç›¸å…³çš„å¨èƒ"""</span>
        relevant_vulnerabilities = []
        
        <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> vuln_data:
            feed_name = item[<span class="hljs-string">'feed_name'</span>]
            data = item[<span class="hljs-string">'data'</span>]
            
            <span class="hljs-keyword">if</span> feed_name == <span class="hljs-string">'NVD'</span>:
                <span class="hljs-keyword">for</span> vuln <span class="hljs-keyword">in</span> data.get(<span class="hljs-string">'vulnerabilities'</span>, []):
                    cve_id = vuln.get(<span class="hljs-string">'cve'</span>, {}).get(<span class="hljs-string">'id'</span>, <span class="hljs-string">''</span>)
                    description = vuln.get(<span class="hljs-string">'cve'</span>, {}).get(<span class="hljs-string">'descriptions'</span>, [{}])[<span class="hljs-number">0</span>].get(<span class="hljs-string">'value'</span>, <span class="hljs-string">''</span>)
                    
                    <span class="hljs-comment"># æ£€æŸ¥æ˜¯å¦ä¸Nginxç›¸å…³</span>
                    <span class="hljs-keyword">if</span> self.is_nginx_related_vulnerability(cve_id, description):
                        vuln_info = {
                            <span class="hljs-string">'cve_id'</span>: cve_id,
                            <span class="hljs-string">'description'</span>: description,
                            <span class="hljs-string">'severity'</span>: self.extract_severity(vuln),
                            <span class="hljs-string">'published_date'</span>: vuln.get(<span class="hljs-string">'cve'</span>, {}).get(<span class="hljs-string">'published'</span>, <span class="hljs-string">''</span>),
                            <span class="hljs-string">'affected_versions'</span>: self.extract_affected_versions(description),
                            <span class="hljs-string">'attack_vector'</span>: self.extract_attack_vector(vuln),
                            <span class="hljs-string">'mitigation_available'</span>: self.check_mitigation_available(cve_id)
                        }
                        relevant_vulnerabilities.append(vuln_info)
        
        <span class="hljs-keyword">return</span> relevant_vulnerabilities
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">is_nginx_related_vulnerability</span>(<span class="hljs-params">self, cve_id, description</span>):
        <span class="hljs-string">"""åˆ¤æ–­æ˜¯å¦ä¸ºä¸Nginxç›¸å…³çš„æ¼æ´"""</span>
        combined_text = <span class="hljs-string">f"<span class="hljs-subst">{cve_id}</span> <span class="hljs-subst">{description}</span>"</span>.lower()
        
        <span class="hljs-comment"># æ£€æŸ¥æ˜¯å¦åŒ…å«Nginxç›¸å…³å…³é”®è¯</span>
        <span class="hljs-keyword">for</span> pattern <span class="hljs-keyword">in</span> self.nginx_cve_patterns:
            <span class="hljs-keyword">if</span> pattern.lower() <span class="hljs-keyword">in</span> combined_text:
                <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span>
        
        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span>
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">extract_severity</span>(<span class="hljs-params">self, vuln_data</span>):
        <span class="hljs-string">"""æå–æ¼æ´ä¸¥é‡ç¨‹åº¦"""</span>
        metrics = vuln_data.get(<span class="hljs-string">'cve'</span>, {}).get(<span class="hljs-string">'metrics'</span>, {})
        
        <span class="hljs-comment"># CVSS v3.1è¯„åˆ†</span>
        <span class="hljs-keyword">if</span> <span class="hljs-string">'cvssMetricV31'</span> <span class="hljs-keyword">in</span> metrics:
            cvss = metrics[<span class="hljs-string">'cvssMetricV31'</span>][<span class="hljs-number">0</span>]
            <span class="hljs-keyword">return</span> {
                <span class="hljs-string">'version'</span>: <span class="hljs-string">'CVSS v3.1'</span>,
                <span class="hljs-string">'score'</span>: cvss.get(<span class="hljs-string">'cvssData'</span>, {}).get(<span class="hljs-string">'baseScore'</span>, <span class="hljs-number">0</span>),
                <span class="hljs-string">'severity'</span>: cvss.get(<span class="hljs-string">'cvssData'</span>, {}).get(<span class="hljs-string">'baseSeverity'</span>, <span class="hljs-string">'UNKNOWN'</span>),
                <span class="hljs-string">'vector'</span>: cvss.get(<span class="hljs-string">'cvssData'</span>, {}).get(<span class="hljs-string">'vectorString'</span>, <span class="hljs-string">''</span>)
            }
        
        <span class="hljs-comment"># CVSS v3.0è¯„åˆ†</span>
        <span class="hljs-keyword">elif</span> <span class="hljs-string">'cvssMetricV30'</span> <span class="hljs-keyword">in</span> metrics:
            cvss = metrics[<span class="hljs-string">'cvssMetricV30'</span>][<span class="hljs-number">0</span>]
            <span class="hljs-keyword">return</span> {
                <span class="hljs-string">'version'</span>: <span class="hljs-string">'CVSS v3.0'</span>,
                <span class="hljs-string">'score'</span>: cvss.get(<span class="hljs-string">'cvssData'</span>, {}).get(<span class="hljs-string">'baseScore'</span>, <span class="hljs-number">0</span>),
                <span class="hljs-string">'severity'</span>: cvss.get(<span class="hljs-string">'cvssData'</span>, {}).get(<span class="hljs-string">'baseSeverity'</span>, <span class="hljs-string">'UNKNOWN'</span>),
                <span class="hljs-string">'vector'</span>: cvss.get(<span class="hljs-string">'cvssData'</span>, {}).get(<span class="hljs-string">'vectorString'</span>, <span class="hljs-string">''</span>)
            }
        
        <span class="hljs-keyword">return</span> {<span class="hljs-string">'version'</span>: <span class="hljs-string">'UNKNOWN'</span>, <span class="hljs-string">'score'</span>: <span class="hljs-number">0</span>, <span class="hljs-string">'severity'</span>: <span class="hljs-string">'UNKNOWN'</span>, <span class="hljs-string">'vector'</span>: <span class="hljs-string">''</span>}
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">extract_affected_versions</span>(<span class="hljs-params">self, description</span>):
        <span class="hljs-string">"""æå–å—å½±å“çš„ç‰ˆæœ¬ä¿¡æ¯"""</span>
        version_patterns = [
            <span class="hljs-string">r'nginx\s+([0-9]+\.[0-9]+\.[0-9]+)'</span>,  <span class="hljs-comment"># nginx 1.2.3</span>
            <span class="hljs-string">r'versions?\s+([0-9]+\.[0-9]+\.[0-9]+)'</span>,  <span class="hljs-comment"># versions 1.2.3</span>
            <span class="hljs-string">r'before\s+([0-9]+\.[0-9]+\.[0-9]+)'</span>,   <span class="hljs-comment"># before 1.2.3</span>
            <span class="hljs-string">r'prior\s+to\s+([0-9]+\.[0-9]+\.[0-9]+)'</span> <span class="hljs-comment"># prior to 1.2.3</span>
        ]
        
        affected_versions = []
        <span class="hljs-keyword">import</span> re
        
        <span class="hljs-keyword">for</span> pattern <span class="hljs-keyword">in</span> version_patterns:
            matches = re.findall(pattern, description, re.IGNORECASE)
            affected_versions.extend(matches)
        
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">list</span>(<span class="hljs-built_in">set</span>(affected_versions))
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">extract_attack_vector</span>(<span class="hljs-params">self, vuln_data</span>):
        <span class="hljs-string">"""æå–æ”»å‡»å‘é‡ä¿¡æ¯"""</span>
        descriptions = vuln_data.get(<span class="hljs-string">'cve'</span>, {}).get(<span class="hljs-string">'descriptions'</span>, [])
        
        attack_vectors = []
        <span class="hljs-keyword">for</span> desc <span class="hljs-keyword">in</span> descriptions:
            value = desc.get(<span class="hljs-string">'value'</span>, <span class="hljs-string">''</span>).lower()
            
            <span class="hljs-keyword">if</span> <span class="hljs-string">'network'</span> <span class="hljs-keyword">in</span> value:
                attack_vectors.append(<span class="hljs-string">'NETWORK'</span>)
            <span class="hljs-keyword">if</span> <span class="hljs-string">'adjacent'</span> <span class="hljs-keyword">in</span> value:
                attack_vectors.append(<span class="hljs-string">'ADJACENT_NETWORK'</span>)
            <span class="hljs-keyword">if</span> <span class="hljs-string">'local'</span> <span class="hljs-keyword">in</span> value:
                attack_vectors.append(<span class="hljs-string">'LOCAL'</span>)
            <span class="hljs-keyword">if</span> <span class="hljs-string">'physical'</span> <span class="hljs-keyword">in</span> value:
                attack_vectors.append(<span class="hljs-string">'PHYSICAL'</span>)
        
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">list</span>(<span class="hljs-built_in">set</span>(attack_vectors))
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">check_mitigation_available</span>(<span class="hljs-params">self, cve_id</span>):
        <span class="hljs-string">"""æ£€æŸ¥æ˜¯å¦æœ‰å¯ç”¨çš„ç¼“è§£æªæ–½"""</span>
        <span class="hljs-comment"># è¿™é‡Œå¯ä»¥æŸ¥è¯¢å†…éƒ¨çŸ¥è¯†åº“æˆ–å¤–éƒ¨API</span>
        <span class="hljs-comment"># è¿”å›ç¼“è§£æªæ–½ä¿¡æ¯</span>
        <span class="hljs-keyword">return</span> {
            <span class="hljs-string">'available'</span>: <span class="hljs-literal">True</span>,  <span class="hljs-comment"># å‡è®¾æ€»æœ‰ç¼“è§£æªæ–½</span>
            <span class="hljs-string">'type'</span>: <span class="hljs-string">'configuration'</span>,
            <span class="hljs-string">'description'</span>: <span class="hljs-string">'å¯ä»¥é€šè¿‡é…ç½®è°ƒæ•´ç¼“è§£'</span>,
            <span class="hljs-string">'effort_level'</span>: <span class="hljs-string">'medium'</span>
        }
    
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">generate_emergency_response</span>(<span class="hljs-params">self, vulnerability</span>):
        <span class="hljs-string">"""ç”Ÿæˆåº”æ€¥å“åº”æªæ–½"""</span>
        response_actions = []
        
        <span class="hljs-comment"># æ ¹æ®æ¼æ´ä¸¥é‡ç¨‹åº¦ç”Ÿæˆå“åº”æªæ–½</span>
        severity_score = vulnerability[<span class="hljs-string">'severity'</span>][<span class="hljs-string">'score'</span>]
        
        <span class="hljs-keyword">if</span> severity_score &gt;= <span class="hljs-number">9.0</span>:  <span class="hljs-comment"># Critical</span>
            response_actions = [
                {
                    <span class="hljs-string">'action'</span>: <span class="hljs-string">'immediate_block'</span>,
                    <span class="hljs-string">'description'</span>: <span class="hljs-string">'ç«‹å³é˜»æ–­å¯ç–‘æ”»å‡»æ¨¡å¼'</span>,
                    <span class="hljs-string">'implementation'</span>: self.create_immediate_block_rule(vulnerability)
                },
                {
                    <span class="hljs-string">'action'</span>: <span class="hljs-string">'enhanced_logging'</span>,
                    <span class="hljs-string">'description'</span>: <span class="hljs-string">'å¯ç”¨å¢å¼ºæ—¥å¿—è®°å½•'</span>,
                    <span class="hljs-string">'implementation'</span>: self.enable_enhanced_logging(vulnerability)
                },
                {
                    <span class="hljs-string">'action'</span>: <span class="hljs-string">'emergency_patch'</span>,
                    <span class="hljs-string">'description'</span>: <span class="hljs-string">'ç´§æ€¥è¡¥ä¸éƒ¨ç½²'</span>,
                    <span class="hljs-string">'implementation'</span>: self.schedule_emergency_patch(vulnerability)
                }
            ]
        <span class="hljs-keyword">elif</span> severity_score &gt;= <span class="hljs-number">7.0</span>:  <span class="hljs-comment"># High</span>
            response_actions = [
                {
                    <span class="hljs-string">'action'</span>: <span class="hljs-string">'rate_limiting'</span>,
                    <span class="hljs-string">'description'</span>: <span class="hljs-string">'å®æ–½ä¸¥æ ¼çš„é€Ÿç‡é™åˆ¶'</span>,
                    <span class="hljs-string">'implementation'</span>: self.create_rate_limiting_rule(vulnerability)
                },
                {
                    <span class="hljs-string">'action'</span>: <span class="hljs-string">'signature_detection'</span>,
                    <span class="hljs-string">'description'</span>: <span class="hljs-string">'éƒ¨ç½²ç‰¹å¾æ£€æµ‹è§„åˆ™'</span>,
                    <span class="hljs-string">'implementation'</span>: self.create_signature_rule(vulnerability)
                }
            ]
        <span class="hljs-keyword">elif</span> severity_score &gt;= <span class="hljs-number">4.0</span>:  <span class="hljs-comment"># Medium</span>
            response_actions = [
                {
                    <span class="hljs-string">'action'</span>: <span class="hljs-string">'monitoring_enhancement'</span>,
                    <span class="hljs-string">'description'</span>: <span class="hljs-string">'å¢å¼ºç›‘æ§å’Œå‘Šè­¦'</span>,
                    <span class="hljs-string">'implementation'</span>: self.enhance_monitoring(vulnerability)
                }
            ]
        
        <span class="hljs-keyword">return</span> response_actions
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">create_immediate_block_rule</span>(<span class="hljs-params">self, vulnerability</span>):
        <span class="hljs-string">"""åˆ›å»ºç«‹å³é˜»æ–­è§„åˆ™"""</span>
        <span class="hljs-comment"># ç”ŸæˆNginxé…ç½®ç‰‡æ®µ</span>
        block_rule = <span class="hljs-string">f"""
        # é›¶æ—¥æ¼æ´ç´§æ€¥é˜»æ–­è§„åˆ™ - <span class="hljs-subst">{vulnerability[<span class="hljs-string">'cve_id'</span>]}</span>
        location / {{
            # é˜»æ–­å·²çŸ¥æ”»å‡»IP
            include /etc/nginx/blocklists/emergency-block-<span class="hljs-subst">{vulnerability[<span class="hljs-string">'cve_id'</span>]}</span>.conf;
            
            # é˜»æ–­å¯ç–‘User-Agent
            if ($http_user_agent ~* "<span class="hljs-subst">{self.extract_suspicious_user_agents(vulnerability)}</span>") {{
                return 403;
            }}
            
            # é˜»æ–­å¯ç–‘è¯·æ±‚æ¨¡å¼
            if ($request_uri ~* "<span class="hljs-subst">{self.extract_attack_patterns(vulnerability)}</span>") {{
                return 403;
            }}
            
            # é¢å¤–çš„å®‰å…¨æ£€æŸ¥
            include /etc/nginx/security/emergency-security.conf;
        }}
        """</span>
        
        <span class="hljs-comment"># ä¿å­˜è§„åˆ™åˆ°æ–‡ä»¶</span>
        rule_file = <span class="hljs-string">f"/etc/nginx/conf.d/emergency-<span class="hljs-subst">{vulnerability[<span class="hljs-string">'cve_id'</span>]}</span>.conf"</span>
        <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(rule_file, <span class="hljs-string">'w'</span>) <span class="hljs-keyword">as</span> f:
            f.write(block_rule)
        
        <span class="hljs-keyword">return</span> {
            <span class="hljs-string">'rule_file'</span>: rule_file,
            <span class="hljs-string">'reload_required'</span>: <span class="hljs-literal">True</span>,
            <span class="hljs-string">'testing_required'</span>: <span class="hljs-literal">True</span>
        }
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">extract_suspicious_user_agents</span>(<span class="hljs-params">self, vulnerability</span>):
        <span class="hljs-string">"""æå–å¯ç–‘çš„User-Agentæ¨¡å¼"""</span>
        <span class="hljs-comment"># åŸºäºæ¼æ´ç‰¹å¾ç”ŸæˆUser-Agentæ£€æµ‹æ¨¡å¼</span>
        <span class="hljs-keyword">return</span> <span class="hljs-string">"(bot|scanner|nikto|sqlmap|nmap|masscan|zgrab)"</span>
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">extract_attack_patterns</span>(<span class="hljs-params">self, vulnerability</span>):
        <span class="hljs-string">"""æå–æ”»å‡»æ¨¡å¼"""</span>
        <span class="hljs-comment"># åŸºäºæ¼æ´æè¿°ç”Ÿæˆæ”»å‡»æ¨¡å¼æ£€æµ‹</span>
        <span class="hljs-keyword">return</span> <span class="hljs-string">"(\\\\.\\\\.\\\\/|\\\\.git|\\\\.env|config\\\\.php|wp-admin)"</span>
    
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">deploy_emergency_rules</span>(<span class="hljs-params">self, vulnerability, response_actions</span>):
        <span class="hljs-string">"""éƒ¨ç½²åº”æ€¥å“åº”è§„åˆ™"""</span>
        deployment_results = []
        
        <span class="hljs-keyword">for</span> action <span class="hljs-keyword">in</span> response_actions:
            <span class="hljs-keyword">try</span>:
                <span class="hljs-keyword">if</span> action[<span class="hljs-string">'action'</span>] == <span class="hljs-string">'immediate_block'</span>:
                    result = action[<span class="hljs-string">'implementation'</span>]
                    
                    <span class="hljs-comment"># æµ‹è¯•Nginxé…ç½®</span>
                    test_result = subprocess.run([<span class="hljs-string">'nginx'</span>, <span class="hljs-string">'-t'</span>], capture_output=<span class="hljs-literal">True</span>, text=<span class="hljs-literal">True</span>)
                    <span class="hljs-keyword">if</span> test_result.returncode == <span class="hljs-number">0</span>:
                        <span class="hljs-comment"># é‡æ–°åŠ è½½Nginx</span>
                        reload_result = subprocess.run([<span class="hljs-string">'nginx'</span>, <span class="hljs-string">'-s'</span>, <span class="hljs-string">'reload'</span>], capture_output=<span class="hljs-literal">True</span>, text=<span class="hljs-literal">True</span>)
                        <span class="hljs-keyword">if</span> reload_result.returncode == <span class="hljs-number">0</span>:
                            deployment_results.append({
                                <span class="hljs-string">'action'</span>: action[<span class="hljs-string">'action'</span>],
                                <span class="hljs-string">'status'</span>: <span class="hljs-string">'success'</span>,
                                <span class="hljs-string">'message'</span>: <span class="hljs-string">'ç´§æ€¥é˜»æ–­è§„åˆ™å·²æˆåŠŸéƒ¨ç½²'</span>
                            })
                        <span class="hljs-keyword">else</span>:
                            deployment_results.append({
                                <span class="hljs-string">'action'</span>: action[<span class="hljs-string">'action'</span>],
                                <span class="hljs-string">'status'</span>: <span class="hljs-string">'failed'</span>,
                                <span class="hljs-string">'message'</span>: <span class="hljs-string">f'Nginxé‡æ–°åŠ è½½å¤±è´¥: <span class="hljs-subst">{reload_result.stderr}</span>'</span>
                            })
                    <span class="hljs-keyword">else</span>:
                        deployment_results.append({
                            <span class="hljs-string">'action'</span>: action[<span class="hljs-string">'action'</span>],
                            <span class="hljs-string">'status'</span>: <span class="hljs-string">'failed'</span>,
                            <span class="hljs-string">'message'</span>: <span class="hljs-string">f'Nginxé…ç½®æµ‹è¯•å¤±è´¥: <span class="hljs-subst">{test_result.stderr}</span>'</span>
                            })
                
            <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
                deployment_results.append({
                    <span class="hljs-string">'action'</span>: action[<span class="hljs-string">'action'</span>],
                    <span class="hljs-string">'status'</span>: <span class="hljs-string">'error'</span>,
                    <span class="hljs-string">'message'</span>: <span class="hljs-built_in">str</span>(e)
                })
        
        <span class="hljs-keyword">return</span> deployment_results
    
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">run_continuous_monitoring</span>(<span class="hljs-params">self</span>):
        <span class="hljs-string">"""æŒç»­ç›‘æ§é›¶æ—¥æ¼æ´"""</span>
        <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:
            <span class="hljs-keyword">try</span>:
                logging.info(<span class="hljs-string">"å¼€å§‹æ£€æŸ¥æ–°çš„é›¶æ—¥æ¼æ´..."</span>)
                
                <span class="hljs-comment"># è·å–æœ€æ–°æ¼æ´ä¿¡æ¯</span>
                <span class="hljs-keyword">async</span> <span class="hljs-keyword">with</span> aiohttp.ClientSession() <span class="hljs-keyword">as</span> session:
                    tasks = [self.fetch_vulnerability_feed(session, feed) <span class="hljs-keyword">for</span> feed <span class="hljs-keyword">in</span> self.vulnerability_feeds]
                    results = <span class="hljs-keyword">await</span> asyncio.gather(*tasks)
                    
                    <span class="hljs-comment"># åˆ†ææ¼æ´</span>
                    relevant_vulns = <span class="hljs-keyword">await</span> self.analyze_vulnerabilities([r <span class="hljs-keyword">for</span> r <span class="hljs-keyword">in</span> results <span class="hljs-keyword">if</span> r])
                    
                    <span class="hljs-comment"># å¤„ç†é«˜å±æ¼æ´</span>
                    <span class="hljs-keyword">for</span> vuln <span class="hljs-keyword">in</span> relevant_vulns:
                        <span class="hljs-keyword">if</span> vuln[<span class="hljs-string">'severity'</span>][<span class="hljs-string">'score'</span>] &gt;= <span class="hljs-number">7.0</span>:  <span class="hljs-comment"># High severity</span>
                            logging.warning(<span class="hljs-string">f"å‘ç°é«˜å±Nginxæ¼æ´: <span class="hljs-subst">{vuln[<span class="hljs-string">'cve_id'</span>]}</span> (Score: <span class="hljs-subst">{vuln[<span class="hljs-string">'severity'</span>][<span class="hljs-string">'score'</span>]}</span>)"</span>)
                            
                            <span class="hljs-comment"># ç”Ÿæˆåº”æ€¥å“åº”</span>
                            response_actions = <span class="hljs-keyword">await</span> self.generate_emergency_response(vuln)
                            
                            <span class="hljs-comment"># éƒ¨ç½²åº”æ€¥æªæ–½</span>
                            deployment_results = <span class="hljs-keyword">await</span> self.deploy_emergency_rules(vuln, response_actions)
                            
                            <span class="hljs-comment"># è®°å½•å“åº”æ—¥å¿—</span>
                            response_log = {
                                <span class="hljs-string">'timestamp'</span>: datetime.now().isoformat(),
                                <span class="hljs-string">'vulnerability'</span>: vuln,
                                <span class="hljs-string">'response_actions'</span>: response_actions,
                                <span class="hljs-string">'deployment_results'</span>: deployment_results
                            }
                            
                            self.redis_client.lpush(<span class="hljs-string">'zeroday:response_logs'</span>, json.dumps(response_log))
                            
                            <span class="hljs-comment"># å‘é€å‘Šè­¦</span>
                            <span class="hljs-keyword">await</span> self.send_zero_day_alert(vuln, response_actions)
                
                <span class="hljs-comment"># æ¯6å°æ—¶æ£€æŸ¥ä¸€æ¬¡</span>
                <span class="hljs-keyword">await</span> asyncio.sleep(<span class="hljs-number">21600</span>)
                
            <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
                logging.error(<span class="hljs-string">f"é›¶æ—¥æ¼æ´ç›‘æ§å¼‚å¸¸ï¼š<span class="hljs-subst">{e}</span>"</span>)
                <span class="hljs-keyword">await</span> asyncio.sleep(<span class="hljs-number">3600</span>)  <span class="hljs-comment"># 1å°æ—¶åé‡è¯•</span>
    
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">send_zero_day_alert</span>(<span class="hljs-params">self, vulnerability, response_actions</span>):
        <span class="hljs-string">"""å‘é€é›¶æ—¥æ¼æ´å‘Šè­¦"""</span>
        alert = {
            <span class="hljs-string">'type'</span>: <span class="hljs-string">'zero_day_vulnerability'</span>,
            <span class="hljs-string">'severity'</span>: <span class="hljs-string">'critical'</span> <span class="hljs-keyword">if</span> vulnerability[<span class="hljs-string">'severity'</span>][<span class="hljs-string">'score'</span>] &gt;= <span class="hljs-number">9.0</span> <span class="hljs-keyword">else</span> <span class="hljs-string">'high'</span>,
            <span class="hljs-string">'timestamp'</span>: datetime.now().isoformat(),
            <span class="hljs-string">'vulnerability'</span>: vulnerability,
            <span class="hljs-string">'response_actions'</span>: response_actions,
            <span class="hljs-string">'action_required'</span>: <span class="hljs-string">'immediate_response'</span>
        }
        
        <span class="hljs-comment"># å‘é€åˆ°å‘Šè­¦ç³»ç»Ÿ</span>
        self.redis_client.publish(<span class="hljs-string">'security:zero_day_alerts'</span>, json.dumps(alert))

<span class="hljs-comment"># å¯åŠ¨é›¶æ—¥æ¼æ´ç›‘æ§ç³»ç»Ÿ</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():
    zero_day_system = ZeroDayResponseSystem()
    <span class="hljs-keyword">await</span> zero_day_system.run_continuous_monitoring()

<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    asyncio.run(main())
</code></pre>
<h4 data-id="heading-47">11.2 é«˜çº§æŒç»­å¨èƒ(APT)é˜²æŠ¤</h4>
<p><strong>APTæ”»å‡»æ£€æµ‹ä¸é˜²æŠ¤ç³»ç»Ÿï¼š</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment">#!/usr/bin/env python3</span>
<span class="hljs-comment"># apt_detection_system.py</span>

<span class="hljs-keyword">import</span> asyncio
<span class="hljs-keyword">import</span> redis
<span class="hljs-keyword">import</span> json
<span class="hljs-keyword">from</span> datetime <span class="hljs-keyword">import</span> datetime, timedelta
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
<span class="hljs-keyword">from</span> collections <span class="hljs-keyword">import</span> defaultdict, deque
<span class="hljs-keyword">import</span> logging

<span class="hljs-keyword">class</span> <span class="hljs-title class_">APTDetectionSystem</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):
        self.redis_client = redis.Redis(host=<span class="hljs-string">'localhost'</span>, port=<span class="hljs-number">6379</span>, db=<span class="hljs-number">3</span>)
        
        <span class="hljs-comment"># APTæ”»å‡»è¡Œä¸ºæ¨¡å¼</span>
        self.apt_behavior_patterns = {
            <span class="hljs-string">'reconnaissance'</span>: {
                <span class="hljs-string">'indicators'</span>: [<span class="hljs-string">'scanning'</span>, <span class="hljs-string">'enumeration'</span>, <span class="hljs-string">'fingerprinting'</span>],
                <span class="hljs-string">'threshold'</span>: <span class="hljs-number">10</span>,
                <span class="hljs-string">'time_window'</span>: <span class="hljs-number">3600</span>  <span class="hljs-comment"># 1å°æ—¶</span>
            },
            <span class="hljs-string">'lateral_movement'</span>: {
                <span class="hljs-string">'indicators'</span>: [<span class="hljs-string">'privilege_escalation'</span>, <span class="hljs-string">'credential_dumping'</span>, <span class="hljs-string">'remote_access'</span>],
                <span class="hljs-string">'threshold'</span>: <span class="hljs-number">5</span>,
                <span class="hljs-string">'time_window'</span>: <span class="hljs-number">1800</span>  <span class="hljs-comment"># 30åˆ†é’Ÿ</span>
            },
            <span class="hljs-string">'data_exfiltration'</span>: {
                <span class="hljs-string">'indicators'</span>: [<span class="hljs-string">'large_data_transfer'</span>, <span class="hljs-string">'unusual_outbound'</span>, <span class="hljs-string">'encrypted_communication'</span>],
                <span class="hljs-string">'threshold'</span>: <span class="hljs-number">3</span>,
                <span class="hljs-string">'time_window'</span>: <span class="hljs-number">7200</span>  <span class="hljs-comment"># 2å°æ—¶</span>
            },
            <span class="hljs-string">'persistence'</span>: {
                <span class="hljs-string">'indicators'</span>: [<span class="hljs-string">'backdoor_installation'</span>, <span class="hljs-string">'scheduled_tasks'</span>, <span class="hljs-string">'registry_modification'</span>],
                <span class="hljs-string">'threshold'</span>: <span class="hljs-number">2</span>,
                <span class="hljs-string">'time_window'</span>: <span class="hljs-number">86400</span>  <span class="hljs-comment"># 24å°æ—¶</span>
            }
        }
        
        <span class="hljs-comment"># ç”¨æˆ·è¡Œä¸ºåŸºçº¿</span>
        self.user_behavior_baseline = {}
        
        <span class="hljs-comment"># å¨èƒç‹©çŒè§„åˆ™</span>
        self.threat_hunting_rules = [
            self.detect_low_and_slow_attacks,
            self.detect_living_off_the_land,
            self.detect_c2_communications,
            self.detect_data_staging
        ]
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">analyze_user_behavior</span>(<span class="hljs-params">self, user_id, current_behavior</span>):
        <span class="hljs-string">"""åˆ†æç”¨æˆ·è¡Œä¸ºåå·®"""</span>
        <span class="hljs-keyword">if</span> user_id <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> self.user_behavior_baseline:
            <span class="hljs-comment"># å»ºç«‹ç”¨æˆ·è¡Œä¸ºåŸºçº¿</span>
            self.user_behavior_baseline[user_id] = {
                <span class="hljs-string">'request_patterns'</span>: deque(maxlen=<span class="hljs-number">1000</span>),
                <span class="hljs-string">'time_patterns'</span>: deque(maxlen=<span class="hljs-number">1000</span>),
                <span class="hljs-string">'resource_access'</span>: defaultdict(<span class="hljs-built_in">int</span>),
                <span class="hljs-string">'geo_patterns'</span>: deque(maxlen=<span class="hljs-number">100</span>),
                <span class="hljs-string">'established'</span>: datetime.now()
            }
            <span class="hljs-keyword">return</span> {<span class="hljs-string">'risk_score'</span>: <span class="hljs-number">0</span>, <span class="hljs-string">'anomalies'</span>: []}
        
        baseline = self.user_behavior_baseline[user_id]
        anomalies = []
        risk_score = <span class="hljs-number">0</span>
        
        <span class="hljs-comment"># 1. æ—¶é—´æ¨¡å¼å¼‚å¸¸æ£€æµ‹</span>
        current_hour = current_behavior.get(<span class="hljs-string">'timestamp'</span>, datetime.now()).hour
        time_pattern = baseline[<span class="hljs-string">'time_patterns'</span>]
        
        <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(time_pattern) &gt; <span class="hljs-number">50</span>:
            usual_hours = [t.hour <span class="hljs-keyword">for</span> t <span class="hljs-keyword">in</span> time_pattern]
            hour_frequency = defaultdict(<span class="hljs-built_in">int</span>)
            <span class="hljs-keyword">for</span> h <span class="hljs-keyword">in</span> usual_hours:
                hour_frequency[h] += <span class="hljs-number">1</span>
            
            <span class="hljs-comment"># æ£€æŸ¥å½“å‰æ—¶é—´æ˜¯å¦åœ¨ç”¨æˆ·é€šå¸¸æ´»è·ƒæ—¶é—´ä¹‹å¤–</span>
            <span class="hljs-keyword">if</span> current_hour <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> hour_frequency <span class="hljs-keyword">and</span> <span class="hljs-built_in">len</span>(hour_frequency) &gt; <span class="hljs-number">0</span>:
                anomalies.append({
                    <span class="hljs-string">'type'</span>: <span class="hljs-string">'unusual_time_access'</span>,
                    <span class="hljs-string">'severity'</span>: <span class="hljs-string">'medium'</span>,
                    <span class="hljs-string">'details'</span>: <span class="hljs-string">f"Access at <span class="hljs-subst">{current_hour}</span>:00, user usually active at <span class="hljs-subst">{<span class="hljs-built_in">list</span>(hour_frequency.keys())}</span>"</span>
                })
                risk_score += <span class="hljs-number">20</span>
        
        <span class="hljs-comment"># 2. èµ„æºè®¿é—®å¼‚å¸¸æ£€æµ‹</span>
        current_resource = current_behavior.get(<span class="hljs-string">'resource'</span>, <span class="hljs-string">''</span>)
        resource_access = baseline[<span class="hljs-string">'resource_access'</span>]
        
        <span class="hljs-keyword">if</span> current_resource <span class="hljs-keyword">and</span> current_resource <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> resource_access:
            <span class="hljs-comment"># é¦–æ¬¡è®¿é—®æ–°èµ„æº</span>
            anomalies.append({
                <span class="hljs-string">'type'</span>: <span class="hljs-string">'new_resource_access'</span>,
                <span class="hljs-string">'severity'</span>: <span class="hljs-string">'low'</span>,
                <span class="hljs-string">'details'</span>: <span class="hljs-string">f"First time accessing: <span class="hljs-subst">{current_resource}</span>"</span>
            })
            risk_score += <span class="hljs-number">10</span>
        
        <span class="hljs-comment"># 3. è¯·æ±‚æ¨¡å¼å¼‚å¸¸æ£€æµ‹</span>
        current_pattern = {
            <span class="hljs-string">'method'</span>: current_behavior.get(<span class="hljs-string">'method'</span>, <span class="hljs-string">''</span>),
            <span class="hljs-string">'path'</span>: current_behavior.get(<span class="hljs-string">'path'</span>, <span class="hljs-string">''</span>),
            <span class="hljs-string">'params'</span>: current_behavior.get(<span class="hljs-string">'params'</span>, {})
        }
        
        request_patterns = baseline[<span class="hljs-string">'request_patterns'</span>]
        <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(request_patterns) &gt; <span class="hljs-number">100</span>:
            <span class="hljs-comment"># è®¡ç®—ä¸å†å²æ¨¡å¼çš„ç›¸ä¼¼åº¦</span>
            similarity_scores = []
            <span class="hljs-keyword">for</span> historical_pattern <span class="hljs-keyword">in</span> request_patterns:
                similarity = self.calculate_pattern_similarity(current_pattern, historical_pattern)
                similarity_scores.append(similarity)
            
            <span class="hljs-comment"># è®¡ç®—å¹³å‡ç›¸ä¼¼åº¦</span>
            avg_similarity = np.mean(similarity_scores)
            
            <span class="hljs-keyword">if</span> avg_similarity &lt; <span class="hljs-number">0.3</span>:  <span class="hljs-comment"># ç›¸ä¼¼åº¦ä½äºé˜ˆå€¼</span>
                anomalies.append({
                    <span class="hljs-string">'type'</span>: <span class="hljs-string">'unusual_request_pattern'</span>,
                    <span class="hljs-string">'severity'</span>: <span class="hljs-string">'high'</span>,
                    <span class="hljs-string">'details'</span>: <span class="hljs-string">f"Request pattern similarity <span class="hljs-subst">{avg_similarity:<span class="hljs-number">.2</span>f}</span>, significantly different from historical patterns"</span>
                })
                risk_score += <span class="hljs-number">30</span>
        
        <span class="hljs-comment"># 4. åœ°ç†ä½ç½®å¼‚å¸¸æ£€æµ‹</span>
        current_geo = current_behavior.get(<span class="hljs-string">'geo_location'</span>)
        <span class="hljs-keyword">if</span> current_geo:
            geo_patterns = baseline[<span class="hljs-string">'geo_patterns'</span>]
            <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(geo_patterns) &gt; <span class="hljs-number">10</span> <span class="hljs-keyword">and</span> current_geo <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> geo_patterns:
                <span class="hljs-comment"># æ£€æŸ¥æ˜¯å¦å­˜åœ¨ä¸å¯èƒ½çš„åœ°ç†ä½ç½®è·³è½¬</span>
                recent_locations = [g <span class="hljs-keyword">for</span> g <span class="hljs-keyword">in</span> geo_patterns[-<span class="hljs-number">5</span>:]]  <span class="hljs-comment"># æœ€è¿‘5æ¬¡è®¿é—®ä½ç½®</span>
                <span class="hljs-keyword">if</span> current_geo <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> recent_locations:
                    anomalies.append({
                        <span class="hljs-string">'type'</span>: <span class="hljs-string">'unusual_geolocation'</span>,
                        <span class="hljs-string">'severity'</span>: <span class="hljs-string">'high'</span>,
                        <span class="hljs-string">'details'</span>: <span class="hljs-string">f"Access from unusual location: <span class="hljs-subst">{current_geo}</span>, recent locations: <span class="hljs-subst">{recent_locations}</span>"</span>
                    })
                    risk_score += <span class="hljs-number">40</span>
        
        <span class="hljs-comment"># 5. åº”ç”¨å¨èƒç‹©çŒè§„åˆ™</span>
        <span class="hljs-keyword">for</span> hunter <span class="hljs-keyword">in</span> self.threat_hunting_rules:
            hunter_result = hunter(current_behavior, baseline)
            <span class="hljs-keyword">if</span> hunter_result:
                anomalies.append(hunter_result)
                risk_score += <span class="hljs-number">25</span>
        
        <span class="hljs-comment"># æ›´æ–°åŸºçº¿</span>
        baseline[<span class="hljs-string">'request_patterns'</span>].append(current_pattern)
        baseline[<span class="hljs-string">'time_patterns'</span>].append(current_behavior.get(<span class="hljs-string">'timestamp'</span>, datetime.now()))
        <span class="hljs-keyword">if</span> current_resource:
            baseline[<span class="hljs-string">'resource_access'</span>][current_resource] += <span class="hljs-number">1</span>
        <span class="hljs-keyword">if</span> current_geo:
            baseline[<span class="hljs-string">'geo_patterns'</span>].append(current_geo)
        
        <span class="hljs-keyword">return</span> {
            <span class="hljs-string">'risk_score'</span>: <span class="hljs-built_in">min</span>(risk_score, <span class="hljs-number">100</span>),  <span class="hljs-comment"># é™åˆ¶æœ€å¤§é£é™©åˆ†æ•°ä¸º100</span>
            <span class="hljs-string">'anomalies'</span>: anomalies
        }
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">calculate_pattern_similarity</span>(<span class="hljs-params">self, pattern1, pattern2</span>):
        <span class="hljs-string">"""è®¡ç®—è¯·æ±‚æ¨¡å¼ç›¸ä¼¼åº¦"""</span>
        <span class="hljs-comment"># ç®€åŒ–å®ç°ï¼Œå®é™…åº”ç”¨ä¸­å¯ä½¿ç”¨æ›´å¤æ‚çš„ç®—æ³•</span>
        <span class="hljs-keyword">if</span> pattern1[<span class="hljs-string">'method'</span>] != pattern2[<span class="hljs-string">'method'</span>]:
            <span class="hljs-keyword">return</span> <span class="hljs-number">0.0</span>
        
        path_similarity = self._string_similarity(pattern1[<span class="hljs-string">'path'</span>], pattern2[<span class="hljs-string">'path'</span>])
        params_similarity = self._params_similarity(pattern1[<span class="hljs-string">'params'</span>], pattern2[<span class="hljs-string">'params'</span>])
        
        <span class="hljs-keyword">return</span> (path_similarity * <span class="hljs-number">0.7</span>) + (params_similarity * <span class="hljs-number">0.3</span>)
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">_string_similarity</span>(<span class="hljs-params">self, s1, s2</span>):
        <span class="hljs-string">"""è®¡ç®—å­—ç¬¦ä¸²ç›¸ä¼¼åº¦ï¼ˆç®€åŒ–ç‰ˆï¼‰"""</span>
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> s1 <span class="hljs-keyword">or</span> <span class="hljs-keyword">not</span> s2:
            <span class="hljs-keyword">return</span> <span class="hljs-number">0.0</span>
            
        <span class="hljs-comment"># ä½¿ç”¨Levenshteinè·ç¦»è®¡ç®—ç›¸ä¼¼åº¦</span>
        <span class="hljs-keyword">from</span> Levenshtein <span class="hljs-keyword">import</span> ratio
        <span class="hljs-keyword">return</span> ratio(s1, s2)
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">_params_similarity</span>(<span class="hljs-params">self, params1, params2</span>):
        <span class="hljs-string">"""è®¡ç®—å‚æ•°ç›¸ä¼¼åº¦"""</span>
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> params1 <span class="hljs-keyword">and</span> <span class="hljs-keyword">not</span> params2:
            <span class="hljs-keyword">return</span> <span class="hljs-number">1.0</span>
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> params1 <span class="hljs-keyword">or</span> <span class="hljs-keyword">not</span> params2:
            <span class="hljs-keyword">return</span> <span class="hljs-number">0.0</span>
        
        keys1 = <span class="hljs-built_in">set</span>(params1.keys())
        keys2 = <span class="hljs-built_in">set</span>(params2.keys())
        common_keys = keys1.intersection(keys2)
        all_keys = keys1.union(keys2)
        
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> all_keys:
            <span class="hljs-keyword">return</span> <span class="hljs-number">1.0</span>
            
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">len</span>(common_keys) / <span class="hljs-built_in">len</span>(all_keys)
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">detect_low_and_slow_attacks</span>(<span class="hljs-params">self, behavior, baseline</span>):
        <span class="hljs-string">"""æ£€æµ‹ä½é€Ÿæ”»å‡»"""</span>
        <span class="hljs-comment"># å®ç°ä½é€Ÿæ”»å‡»æ£€æµ‹é€»è¾‘</span>
        <span class="hljs-keyword">pass</span>
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">detect_living_off_the_land</span>(<span class="hljs-params">self, behavior, baseline</span>):
        <span class="hljs-string">"""æ£€æµ‹Living-off-the-landæ”»å‡»"""</span>
        <span class="hljs-comment"># å®ç°åˆæ³•å·¥å…·æ»¥ç”¨æ”»å‡»æ£€æµ‹é€»è¾‘</span>
        <span class="hljs-keyword">pass</span>
    
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">start_monitoring</span>(<span class="hljs-params">self</span>):
        <span class="hljs-string">"""å¯åŠ¨APTç›‘æ§"""</span>
        <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:
            <span class="hljs-comment"># å®ç°APTç›‘æ§ä¸»å¾ªç¯</span>
            <span class="hljs-keyword">await</span> asyncio.sleep(<span class="hljs-number">60</span>)

<span class="hljs-comment"># Nginxæ—¥å¿—å®æ—¶ç›‘æ§é›†æˆ</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">NginxAPTMonitor</span>:
    <span class="hljs-string">"""Nginx APTæ”»å‡»å®æ—¶ç›‘æ§ç³»ç»Ÿ"""</span>
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, log_file_path=<span class="hljs-string">'/var/log/nginx/access.log'</span></span>):
        self.log_file_path = log_file_path
        self.apt_detector = APTDetectionSystem()
        self.redis_client = redis.Redis(host=<span class="hljs-string">'localhost'</span>, port=<span class="hljs-number">6379</span>, db=<span class="hljs-number">4</span>)
        self.alert_threshold = <span class="hljs-number">70</span>  <span class="hljs-comment"># é£é™©åˆ†æ•°é˜ˆå€¼</span>
        
        <span class="hljs-comment"># å¯åŠ¨å¼‚æ­¥ç›‘æ§ä»»åŠ¡</span>
        self.monitoring_tasks = [
            self.monitor_nginx_logs(),
            self.process_suspicious_activities(),
            self.generate_threat_reports()
        ]
    
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">monitor_nginx_logs</span>(<span class="hljs-params">self</span>):
        <span class="hljs-string">"""ç›‘æ§Nginxè®¿é—®æ—¥å¿—"""</span>
        <span class="hljs-keyword">import</span> aiofiles
        <span class="hljs-keyword">import</span> re
        
        <span class="hljs-comment"># Nginxæ—¥å¿—æ ¼å¼è§£ææ­£åˆ™è¡¨è¾¾å¼</span>
        log_pattern = re.<span class="hljs-built_in">compile</span>(
            <span class="hljs-string">r'(\d+\.\d+\.\d+\.\d+)\s+-\s+-\s+\[(.+?)\]\s+"(\w+)\s+(.+?)\s+HTTP/[\d.]+"\s+(\d+)\s+(\d+)\s+"(.+?)"\s+"(.+?)"'</span>
        )
        
        <span class="hljs-keyword">async</span> <span class="hljs-keyword">with</span> aiofiles.<span class="hljs-built_in">open</span>(self.log_file_path, mode=<span class="hljs-string">'r'</span>) <span class="hljs-keyword">as</span> log_file:
            <span class="hljs-comment"># ç§»åŠ¨åˆ°æ–‡ä»¶æœ«å°¾ï¼ˆåªç›‘æ§æ–°æ—¥å¿—ï¼‰</span>
            <span class="hljs-keyword">await</span> log_file.seek(<span class="hljs-number">0</span>, <span class="hljs-number">2</span>)
            
            <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:
                line = <span class="hljs-keyword">await</span> log_file.readline()
                <span class="hljs-keyword">if</span> line:
                    <span class="hljs-keyword">match</span> = log_pattern.<span class="hljs-keyword">match</span>(line.strip())
                    <span class="hljs-keyword">if</span> <span class="hljs-keyword">match</span>:
                        log_data = {
                            <span class="hljs-string">'remote_addr'</span>: <span class="hljs-keyword">match</span>.group(<span class="hljs-number">1</span>),
                            <span class="hljs-string">'timestamp'</span>: <span class="hljs-keyword">match</span>.group(<span class="hljs-number">2</span>),
                            <span class="hljs-string">'method'</span>: <span class="hljs-keyword">match</span>.group(<span class="hljs-number">3</span>),
                            <span class="hljs-string">'request'</span>: <span class="hljs-keyword">match</span>.group(<span class="hljs-number">4</span>),
                            <span class="hljs-string">'status'</span>: <span class="hljs-built_in">int</span>(<span class="hljs-keyword">match</span>.group(<span class="hljs-number">5</span>)),
                            <span class="hljs-string">'body_bytes_sent'</span>: <span class="hljs-built_in">int</span>(<span class="hljs-keyword">match</span>.group(<span class="hljs-number">6</span>)),
                            <span class="hljs-string">'http_referer'</span>: <span class="hljs-keyword">match</span>.group(<span class="hljs-number">7</span>),
                            <span class="hljs-string">'http_user_agent'</span>: <span class="hljs-keyword">match</span>.group(<span class="hljs-number">8</span>)
                        }
                        
                        <span class="hljs-comment"># åˆ†æç”¨æˆ·è¡Œä¸º</span>
                        risk_analysis = <span class="hljs-keyword">await</span> self.analyze_user_session(log_data)
                        
                        <span class="hljs-keyword">if</span> risk_analysis[<span class="hljs-string">'risk_score'</span>] &gt; self.alert_threshold:
                            <span class="hljs-keyword">await</span> self.trigger_high_risk_alert(log_data, risk_analysis)
                
                <span class="hljs-keyword">await</span> asyncio.sleep(<span class="hljs-number">0.1</span>)  <span class="hljs-comment"># é¿å…CPUå ç”¨è¿‡é«˜</span>
    
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">analyze_user_session</span>(<span class="hljs-params">self, log_data</span>):
        <span class="hljs-string">"""åˆ†æç”¨æˆ·ä¼šè¯é£é™©"""</span>
        user_id = log_data[<span class="hljs-string">'remote_addr'</span>]
        
        <span class="hljs-comment"># æ„å»ºç”¨æˆ·è¡Œä¸ºæ•°æ®</span>
        behavior_data = {
            <span class="hljs-string">'timestamp'</span>: datetime.now(),
            <span class="hljs-string">'method'</span>: log_data[<span class="hljs-string">'method'</span>],
            <span class="hljs-string">'path'</span>: log_data[<span class="hljs-string">'request'</span>].split(<span class="hljs-string">'?'</span>)[<span class="hljs-number">0</span>],
            <span class="hljs-string">'params'</span>: <span class="hljs-built_in">dict</span>(param.split(<span class="hljs-string">'='</span>) <span class="hljs-keyword">for</span> param <span class="hljs-keyword">in</span> log_data[<span class="hljs-string">'request'</span>].split(<span class="hljs-string">'?'</span>)[<span class="hljs-number">1</span>].split(<span class="hljs-string">'&amp;'</span>)) <span class="hljs-keyword">if</span> <span class="hljs-string">'?'</span> <span class="hljs-keyword">in</span> log_data[<span class="hljs-string">'request'</span>] <span class="hljs-keyword">else</span> {},
            <span class="hljs-string">'status_code'</span>: log_data[<span class="hljs-string">'status'</span>],
            <span class="hljs-string">'user_agent'</span>: log_data[<span class="hljs-string">'http_user_agent'</span>],
            <span class="hljs-string">'resource'</span>: log_data[<span class="hljs-string">'request'</span>].split(<span class="hljs-string">'?'</span>)[<span class="hljs-number">0</span>],
            <span class="hljs-string">'geo_location'</span>: <span class="hljs-keyword">await</span> self.get_geo_location(log_data[<span class="hljs-string">'remote_addr'</span>])
        }
        
        <span class="hljs-comment"># ä½¿ç”¨APTæ£€æµ‹ç³»ç»Ÿåˆ†æ</span>
        risk_analysis = self.apt_detector.analyze_user_behavior(user_id, behavior_data)
        
        <span class="hljs-comment"># ç¼“å­˜åˆ†æç»“æœ</span>
        <span class="hljs-keyword">await</span> self.cache_risk_analysis(user_id, risk_analysis)
        
        <span class="hljs-keyword">return</span> risk_analysis
    
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_geo_location</span>(<span class="hljs-params">self, ip_address</span>):
        <span class="hljs-string">"""è·å–IPåœ°å€åœ°ç†ä½ç½®"""</span>
        <span class="hljs-comment"># å®ç°IPåœ°ç†ä½ç½®æŸ¥è¯¢ï¼ˆå¯ä½¿ç”¨MaxMind GeoIPç­‰åº“ï¼‰</span>
        <span class="hljs-comment"># è¿™é‡Œè¿”å›æ¨¡æ‹Ÿæ•°æ®</span>
        <span class="hljs-keyword">return</span> <span class="hljs-string">f"location_for_<span class="hljs-subst">{ip_address}</span>"</span>
    
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">cache_risk_analysis</span>(<span class="hljs-params">self, user_id, risk_analysis</span>):
        <span class="hljs-string">"""ç¼“å­˜é£é™©åˆ†æç»“æœ"""</span>
        key = <span class="hljs-string">f"risk_analysis:<span class="hljs-subst">{user_id}</span>"</span>
        <span class="hljs-keyword">await</span> self.redis_client.setex(key, <span class="hljs-number">3600</span>, json.dumps(risk_analysis))  <span class="hljs-comment"># ç¼“å­˜1å°æ—¶</span>
    
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">trigger_high_risk_alert</span>(<span class="hljs-params">self, log_data, risk_analysis</span>):
        <span class="hljs-string">"""è§¦å‘é«˜é£é™©è­¦æŠ¥"""</span>
        alert_data = {
            <span class="hljs-string">'timestamp'</span>: datetime.now().isoformat(),
            <span class="hljs-string">'user_ip'</span>: log_data[<span class="hljs-string">'remote_addr'</span>],
            <span class="hljs-string">'risk_score'</span>: risk_analysis[<span class="hljs-string">'risk_score'</span>],
            <span class="hljs-string">'anomalies'</span>: risk_analysis[<span class="hljs-string">'anomalies'</span>],
            <span class="hljs-string">'request_details'</span>: log_data,
            <span class="hljs-string">'alert_level'</span>: <span class="hljs-string">'HIGH'</span> <span class="hljs-keyword">if</span> risk_analysis[<span class="hljs-string">'risk_score'</span>] &gt; <span class="hljs-number">80</span> <span class="hljs-keyword">else</span> <span class="hljs-string">'MEDIUM'</span>
        }
        
        <span class="hljs-comment"># å‘é€åˆ°è­¦æŠ¥é˜Ÿåˆ—</span>
        <span class="hljs-keyword">await</span> self.redis_client.lpush(<span class="hljs-string">'security_alerts:high_risk'</span>, json.dumps(alert_data))
        
        <span class="hljs-comment"># è®°å½•æ—¥å¿—</span>
        logging.warning(<span class="hljs-string">f"HIGH RISK ALERT: User <span class="hljs-subst">{log_data[<span class="hljs-string">'remote_addr'</span>]}</span> risk score <span class="hljs-subst">{risk_analysis[<span class="hljs-string">'risk_score'</span>]}</span>"</span>)
    
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">process_suspicious_activities</span>(<span class="hljs-params">self</span>):
        <span class="hljs-string">"""å¤„ç†å¯ç–‘æ´»åŠ¨"""</span>
        <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:
            <span class="hljs-keyword">try</span>:
                <span class="hljs-comment"># ä»é˜Ÿåˆ—è·å–é«˜é£é™©è­¦æŠ¥</span>
                alert_data = <span class="hljs-keyword">await</span> self.redis_client.brpop(<span class="hljs-string">'security_alerts:high_risk'</span>, timeout=<span class="hljs-number">1</span>)
                <span class="hljs-keyword">if</span> alert_data:
                    alert = json.loads(alert_data[<span class="hljs-number">1</span>])
                    
                    <span class="hljs-comment"># è‡ªåŠ¨é˜»æ–­é«˜é£é™©ç”¨æˆ·</span>
                    <span class="hljs-keyword">if</span> alert[<span class="hljs-string">'risk_score'</span>] &gt; <span class="hljs-number">80</span>:
                        <span class="hljs-keyword">await</span> self.auto_block_user(alert[<span class="hljs-string">'user_ip'</span>], alert[<span class="hljs-string">'risk_score'</span>])
                    
                    <span class="hljs-comment"># å‘é€é€šçŸ¥ï¼ˆé‚®ä»¶ã€Slackç­‰ï¼‰</span>
                    <span class="hljs-keyword">await</span> self.send_security_notification(alert)
                    
            <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
                logging.error(<span class="hljs-string">f"Error processing suspicious activities: <span class="hljs-subst">{e}</span>"</span>)
            
            <span class="hljs-keyword">await</span> asyncio.sleep(<span class="hljs-number">1</span>)
    
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">auto_block_user</span>(<span class="hljs-params">self, user_ip, risk_score</span>):
        <span class="hljs-string">"""è‡ªåŠ¨é˜»æ–­ç”¨æˆ·"""</span>
        <span class="hljs-comment"># ä½¿ç”¨Nginxçš„denyæŒ‡ä»¤é˜»æ–­IP</span>
        block_command = <span class="hljs-string">f"echo 'deny <span class="hljs-subst">{user_ip}</span>;' &gt;&gt; /etc/nginx/conf.d/auto_blocks.conf &amp;&amp; nginx -s reload"</span>
        
        <span class="hljs-comment"># è®°å½•é˜»æ–­æ“ä½œ</span>
        block_record = {
            <span class="hljs-string">'user_ip'</span>: user_ip,
            <span class="hljs-string">'risk_score'</span>: risk_score,
            <span class="hljs-string">'blocked_at'</span>: datetime.now().isoformat(),
            <span class="hljs-string">'auto_unblock_at'</span>: (datetime.now() + timedelta(hours=<span class="hljs-number">24</span>)).isoformat()  <span class="hljs-comment"># 24å°æ—¶åè‡ªåŠ¨è§£å°</span>
        }
        
        <span class="hljs-keyword">await</span> self.redis_client.setex(<span class="hljs-string">f"blocked_user:<span class="hljs-subst">{user_ip}</span>"</span>, <span class="hljs-number">86400</span>, json.dumps(block_record))
        logging.info(<span class="hljs-string">f"Auto-blocked user <span class="hljs-subst">{user_ip}</span> with risk score <span class="hljs-subst">{risk_score}</span>"</span>)
    
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">send_security_notification</span>(<span class="hljs-params">self, alert</span>):
        <span class="hljs-string">"""å‘é€å®‰å…¨é€šçŸ¥"""</span>
        <span class="hljs-comment"># å®ç°é€šçŸ¥å‘é€é€»è¾‘ï¼ˆé‚®ä»¶ã€Slackã€ä¼ä¸šå¾®ä¿¡ç­‰ï¼‰</span>
        notification = {
            <span class="hljs-string">'type'</span>: <span class="hljs-string">'security_alert'</span>,
            <span class="hljs-string">'title'</span>: <span class="hljs-string">f"APT Attack Detected - Risk Score: <span class="hljs-subst">{alert[<span class="hljs-string">'risk_score'</span>]}</span>"</span>,
            <span class="hljs-string">'content'</span>: <span class="hljs-string">f"Suspicious activity detected from IP <span class="hljs-subst">{alert[<span class="hljs-string">'user_ip'</span>]}</span>. Anomalies: <span class="hljs-subst">{alert[<span class="hljs-string">'anomalies'</span>]}</span>"</span>,
            <span class="hljs-string">'timestamp'</span>: alert[<span class="hljs-string">'timestamp'</span>]
        }
        
        <span class="hljs-comment"># è¿™é‡Œå¯ä»¥é›†æˆå„ç§é€šçŸ¥æœåŠ¡</span>
        logging.info(<span class="hljs-string">f"Security notification sent: <span class="hljs-subst">{notification}</span>"</span>)
    
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">generate_threat_reports</span>(<span class="hljs-params">self</span>):
        <span class="hljs-string">"""ç”Ÿæˆå¨èƒæŠ¥å‘Š"""</span>
        <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:
            <span class="hljs-keyword">try</span>:
                <span class="hljs-comment"># æ¯å°æ—¶ç”Ÿæˆä¸€æ¬¡å¨èƒæŠ¥å‘Š</span>
                <span class="hljs-keyword">await</span> asyncio.sleep(<span class="hljs-number">3600</span>)
                
                <span class="hljs-comment"># æ”¶é›†è¿‡å»ä¸€å°æ—¶çš„å¨èƒæ•°æ®</span>
                threat_summary = <span class="hljs-keyword">await</span> self.collect_threat_summary()
                
                <span class="hljs-comment"># ç”ŸæˆæŠ¥å‘Š</span>
                report = {
                    <span class="hljs-string">'period'</span>: <span class="hljs-string">f"<span class="hljs-subst">{datetime.now() - timedelta(hours=<span class="hljs-number">1</span>)}</span> - <span class="hljs-subst">{datetime.now()}</span>"</span>,
                    <span class="hljs-string">'total_alerts'</span>: threat_summary[<span class="hljs-string">'total_alerts'</span>],
                    <span class="hljs-string">'high_risk_users'</span>: threat_summary[<span class="hljs-string">'high_risk_users'</span>],
                    <span class="hljs-string">'blocked_ips'</span>: threat_summary[<span class="hljs-string">'blocked_ips'</span>],
                    <span class="hljs-string">'top_threat_types'</span>: threat_summary[<span class="hljs-string">'top_threat_types'</span>],
                    <span class="hljs-string">'recommendations'</span>: self.generate_security_recommendations(threat_summary)
                }
                
                <span class="hljs-comment"># ä¿å­˜æŠ¥å‘Š</span>
                report_key = <span class="hljs-string">f"threat_report:<span class="hljs-subst">{datetime.now().strftime(<span class="hljs-string">'%Y%m%d_%H'</span>)}</span>"</span>
                <span class="hljs-keyword">await</span> self.redis_client.setex(report_key, <span class="hljs-number">86400</span> * <span class="hljs-number">7</span>, json.dumps(report))  <span class="hljs-comment"># ä¿å­˜7å¤©</span>
                
                logging.info(<span class="hljs-string">f"Threat report generated: <span class="hljs-subst">{report_key}</span>"</span>)
                
            <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
                logging.error(<span class="hljs-string">f"Error generating threat reports: <span class="hljs-subst">{e}</span>"</span>)
    
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">collect_threat_summary</span>(<span class="hljs-params">self</span>):
        <span class="hljs-string">"""æ”¶é›†å¨èƒæ‘˜è¦"""</span>
        <span class="hljs-comment"># å®ç°å¨èƒæ•°æ®æ”¶é›†é€»è¾‘</span>
        <span class="hljs-keyword">return</span> {
            <span class="hljs-string">'total_alerts'</span>: <span class="hljs-number">42</span>,
            <span class="hljs-string">'high_risk_users'</span>: [<span class="hljs-string">'192.168.1.100'</span>, <span class="hljs-string">'10.0.0.50'</span>],
            <span class="hljs-string">'blocked_ips'</span>: [<span class="hljs-string">'192.168.1.100'</span>],
            <span class="hljs-string">'top_threat_types'</span>: [<span class="hljs-string">'unusual_request_pattern'</span>, <span class="hljs-string">'unusual_geolocation'</span>]
        }
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">generate_security_recommendations</span>(<span class="hljs-params">self, threat_summary</span>):
        <span class="hljs-string">"""ç”Ÿæˆå®‰å…¨å»ºè®®"""</span>
        recommendations = []
        
        <span class="hljs-keyword">if</span> threat_summary[<span class="hljs-string">'total_alerts'</span>] &gt; <span class="hljs-number">50</span>:
            recommendations.append(<span class="hljs-string">"Consider implementing stricter access controls"</span>)
        
        <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(threat_summary[<span class="hljs-string">'blocked_ips'</span>]) &gt; <span class="hljs-number">5</span>:
            recommendations.append(<span class="hljs-string">"Review and potentially expand IP blocking policies"</span>)
        
        recommendations.append(<span class="hljs-string">"Regular security awareness training for development teams"</span>)
        recommendations.append(<span class="hljs-string">"Consider implementing additional MFA for administrative access"</span>)
        
        <span class="hljs-keyword">return</span> recommendations
    
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">start_all_monitoring</span>(<span class="hljs-params">self</span>):
        <span class="hljs-string">"""å¯åŠ¨æ‰€æœ‰ç›‘æ§ä»»åŠ¡"""</span>
        logging.info(<span class="hljs-string">"Starting Nginx APT monitoring system..."</span>)
        
        <span class="hljs-comment"># å¹¶å‘è¿è¡Œæ‰€æœ‰ç›‘æ§ä»»åŠ¡</span>
        <span class="hljs-keyword">await</span> asyncio.gather(*self.monitoring_tasks)

<span class="hljs-comment"># ä½¿ç”¨ç¤ºä¾‹å’Œéƒ¨ç½²é…ç½®</span>
<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    <span class="hljs-comment"># åˆ›å»ºç›‘æ§å®ä¾‹</span>
    monitor = NginxAPTMonitor(<span class="hljs-string">'/var/log/nginx/access.log'</span>)
    
    <span class="hljs-comment"># å¯åŠ¨ç›‘æ§</span>
    asyncio.run(monitor.start_all_monitoring())
</code></pre>
<hr/>
<h3 data-id="heading-48">ğŸ¯ æ€»ç»“ï¼šæ„å»ºä¼ä¸šçº§å®‰å…¨é˜²çº¿çš„å®Œæ•´è·¯å¾„</h3>
<p>é€šè¿‡æœ¬æ–‡çš„æ·±å…¥æ¢è®¨ï¼Œæˆ‘ä»¬å·²ç»ä»åŸºç¡€çš„Nginxå®‰å…¨åŠ å›ºï¼Œé€æ­¥æ„å»ºäº†ä¸€ä¸ªæ¶µç›–<strong>äº‘åŸç”Ÿæ¶æ„</strong>ã€<strong>AIæ™ºèƒ½é˜²æŠ¤</strong>ã€<strong>ä¼ä¸šé›†æˆ</strong>å’Œ<strong>é«˜çº§å¨èƒæ£€æµ‹</strong>çš„å®Œæ•´å®‰å…¨ä½“ç³»ã€‚è®©æˆ‘ä»¬å›é¡¾ä¸€ä¸‹è¿™ä¸ªæ¸è¿›å¼çš„å®‰å…¨å»ºè®¾è·¯å¾„ï¼š</p>
<h4 data-id="heading-49">ğŸ›¡ï¸ åŸºç¡€å®‰å…¨ï¼ˆ90%æ¼æ´é˜²æŠ¤ï¼‰</h4>
<ul>
<li><strong>Hostå¤´æ”»å‡»é˜²æŠ¤</strong>ï¼šé€šè¿‡ä¸¥æ ¼çš„ä¸»æœºåéªŒè¯å’Œé»˜è®¤æœåŠ¡å™¨é…ç½®</li>
<li><strong>æ•æ„Ÿæ–‡ä»¶ä¿æŠ¤</strong>ï¼šä½¿ç”¨locationåŒ¹é…å’Œè®¿é—®æ§åˆ¶åˆ—è¡¨</li>
<li><strong>ç›®å½•éå†é˜²æŠ¤</strong>ï¼šURLè§„èŒƒåŒ–å¤„ç†å’Œè·¯å¾„éªŒè¯</li>
<li><strong>ç‰ˆæœ¬ä¿¡æ¯éšè—</strong>ï¼šserver_tokens offé…ç½®</li>
<li><strong>é”™è¯¯é¡µé¢å®šåˆ¶</strong>ï¼šé˜²æ­¢ä¿¡æ¯æ³„éœ²çš„ç»Ÿä¸€é”™è¯¯å¤„ç†</li>
</ul>
<h4 data-id="heading-50">â˜ï¸ äº‘åŸç”Ÿå®‰å…¨æ¶æ„</h4>
<ul>
<li><strong>Kubernetes Ingresså®‰å…¨</strong>ï¼šNetworkPolicyå’ŒRBACçš„ç²¾ç»†åŒ–æ§åˆ¶</li>
<li><strong>å®¹å™¨åŒ–æœ€ä½³å®è·µ</strong>ï¼šæœ€å°æƒé™é•œåƒå’Œå®‰å…¨ä¸Šä¸‹æ–‡</li>
<li><strong>Service Meshé›†æˆ</strong>ï¼šIstioçš„mTLSå’Œæµé‡ç­–ç•¥</li>
<li><strong>å¤šé›†ç¾¤å®‰å…¨ç­–ç•¥</strong>ï¼šç»Ÿä¸€çš„å®‰å…¨æ²»ç†å’Œåˆè§„æ£€æŸ¥</li>
</ul>
<h4 data-id="heading-51">ğŸ¤– AIé©±åŠ¨çš„æ™ºèƒ½é˜²æŠ¤</h4>
<ul>
<li><strong>æœºå™¨å­¦ä¹ å¼‚å¸¸æ£€æµ‹</strong>ï¼šå®æ—¶æµé‡åˆ†æå’Œè¡Œä¸ºåŸºçº¿å»ºç«‹</li>
<li><strong>å¨èƒæƒ…æŠ¥é›†æˆ</strong>ï¼šå¤šæºå¨èƒæ•°æ®çš„å®æ—¶å…³è”åˆ†æ</li>
<li><strong>è‡ªåŠ¨åŒ–å“åº”æœºåˆ¶</strong>ï¼šåŸºäºé£é™©è¯„åˆ†çš„æ™ºèƒ½é˜»æ–­å’Œå‘Šè­¦</li>
<li><strong>é¢„æµ‹æ€§å®‰å…¨é˜²æŠ¤</strong>ï¼šé›¶æ—¥æ¼æ´çš„æå‰é¢„è­¦å’Œé˜²æŠ¤</li>
</ul>
<h4 data-id="heading-52">ğŸ¢ ä¼ä¸šçº§é›†æˆæ–¹æ¡ˆ</h4>
<ul>
<li><strong>DevSecOpsæµæ°´çº¿</strong>ï¼šå®‰å…¨æµ‹è¯•çš„å·¦ç§»å’Œè‡ªåŠ¨åŒ–</li>
<li><strong>SIEM/SOARé›†æˆ</strong>ï¼šå®‰å…¨äº‹ä»¶çš„ç»Ÿä¸€ç®¡ç†å’Œå“åº”</li>
<li><strong>åˆè§„æ€§è‡ªåŠ¨åŒ–</strong>ï¼šGDPRã€ç­‰ä¿ç­‰æ ‡å‡†çš„è‡ªåŠ¨åˆè§„æ£€æŸ¥</li>
<li><strong>å¤šäº‘å®‰å…¨ç­–ç•¥</strong>ï¼šè·¨äº‘å¹³å°çš„ç»Ÿä¸€å®‰å…¨ç®¡ç†</li>
</ul>
<h4 data-id="heading-53">ğŸ¯ é«˜çº§å¨èƒé˜²æŠ¤ï¼ˆAPTæ£€æµ‹ï¼‰</h4>
<ul>
<li><strong>è¡Œä¸ºåˆ†æå¼•æ“</strong>ï¼šç”¨æˆ·è¡Œä¸ºåŸºçº¿å’Œå¼‚å¸¸æ£€æµ‹</li>
<li><strong>å¨èƒç‹©çŒç³»ç»Ÿ</strong>ï¼šä¸»åŠ¨å¨èƒå‘ç°å’Œæƒ…æŠ¥æ”¶é›†</li>
<li><strong>é›¶æ—¥æ¼æ´å“åº”</strong>ï¼šå¿«é€Ÿæ¼æ´è¯„ä¼°å’Œä¸´æ—¶é˜²æŠ¤</li>
<li><strong>APTæ”»å‡»é“¾æ£€æµ‹</strong>ï¼šå¤šé˜¶æ®µæ”»å‡»çš„å®Œæ•´é“¾è·¯åˆ†æ</li>
</ul>
<h4 data-id="heading-54">ğŸ“Š å®æ–½å»ºè®®ä¸æœ€ä½³å®è·µ</h4>
<h5 data-id="heading-55">1. æ¸è¿›å¼éƒ¨ç½²ç­–ç•¥</h5>
<pre><code class="hljs">é˜¶æ®µ1ï¼šåŸºç¡€å®‰å…¨åŠ å›ºï¼ˆ1-2å‘¨ï¼‰
â”œâ”€â”€ Nginxé…ç½®ä¼˜åŒ–
â”œâ”€â”€ è®¿é—®æ§åˆ¶å®æ–½
â””â”€â”€ æ—¥å¿—ç›‘æ§å»ºç«‹

é˜¶æ®µ2ï¼šé«˜çº§é˜²æŠ¤é›†æˆï¼ˆ2-4å‘¨ï¼‰
â”œâ”€â”€ WAFè§„åˆ™éƒ¨ç½²
â”œâ”€â”€ é€Ÿç‡é™åˆ¶ä¼˜åŒ–
â””â”€â”€ SSL/TLSå¼ºåŒ–

é˜¶æ®µ3ï¼šæ™ºèƒ½åŒ–å‡çº§ï¼ˆ4-8å‘¨ï¼‰
â”œâ”€â”€ AIå¼‚å¸¸æ£€æµ‹
â”œâ”€â”€ å¨èƒæƒ…æŠ¥é›†æˆ
â””â”€â”€ è‡ªåŠ¨åŒ–å“åº”

é˜¶æ®µ4ï¼šä¼ä¸šçº§æ•´åˆï¼ˆ8-12å‘¨ï¼‰
â”œâ”€â”€ DevSecOpsé›†æˆ
â”œâ”€â”€ SIEM/SOARè¿æ¥
â””â”€â”€ åˆè§„æ€§è‡ªåŠ¨åŒ–

</code></pre>
<h5 data-id="heading-56">2. å…³é”®æ€§èƒ½æŒ‡æ ‡ï¼ˆKPIï¼‰</h5>
<ul>
<li><strong>å®‰å…¨äº‹ä»¶å“åº”æ—¶é—´</strong>ï¼šä»æ£€æµ‹åˆ°é˜»æ–­ &lt; 5åˆ†é’Ÿ</li>
<li><strong>è¯¯æŠ¥ç‡</strong>ï¼šAIæ£€æµ‹è¯¯æŠ¥ &lt; 5%</li>
<li><strong>ç³»ç»Ÿå¯ç”¨æ€§</strong>ï¼šå®‰å…¨æœåŠ¡å¯ç”¨æ€§ &gt; 99.9%</li>
<li><strong>åˆè§„è¦†ç›–ç‡</strong>ï¼šè‡ªåŠ¨åŒ–åˆè§„æ£€æŸ¥ &gt; 95%</li>
</ul>
<h5 data-id="heading-57">3. è¿ç»´ç›‘æ§è¦ç‚¹</h5>
<ul>
<li><strong>å®æ—¶ç›‘æ§</strong>ï¼š24/7å®‰å…¨è¿è¥ä¸­å¿ƒ</li>
<li><strong>å®šæœŸè¯„ä¼°</strong>ï¼šæœˆåº¦å®‰å…¨æ€åŠ¿åˆ†æ</li>
<li><strong>å¨èƒç‹©çŒ</strong>ï¼šå­£åº¦ä¸»åŠ¨å¨èƒæœç´¢</li>
<li><strong>åº”æ€¥æ¼”ç»ƒ</strong>ï¼šåŠå¹´åº¦å®‰å…¨äº‹ä»¶æ¼”ç»ƒ</li>
</ul>
<h4 data-id="heading-58">ğŸ”® æœªæ¥å‘å±•è¶‹åŠ¿</h4>
<p>éšç€æŠ€æœ¯çš„ä¸æ–­æ¼”è¿›ï¼ŒNginxå®‰å…¨ç½‘å…³ä¹Ÿå°†é¢ä¸´æ–°çš„æŒ‘æˆ˜å’Œæœºé‡ï¼š</p>
<h5 data-id="heading-59">1. é›¶ä¿¡ä»»æ¶æ„é›†æˆ</h5>
<ul>
<li><strong>å¾®åˆ†æ®µæŠ€æœ¯</strong>ï¼šæ›´ç»†ç²’åº¦çš„ç½‘ç»œåˆ†æ®µ</li>
<li><strong>èº«ä»½æ„ŸçŸ¥ä»£ç†</strong>ï¼šåŸºäºèº«ä»½çš„åŠ¨æ€è®¿é—®æ§åˆ¶</li>
<li><strong>æŒç»­ä¿¡ä»»è¯„ä¼°</strong>ï¼šå®æ—¶çš„ä¿¡ä»»åº¦è®¡ç®—å’Œå†³ç­–</li>
</ul>
<h5 data-id="heading-60">2. é‡å­å®‰å…¨å‡†å¤‡</h5>
<ul>
<li><strong>åé‡å­å¯†ç å­¦</strong>ï¼šæŠ—é‡å­è®¡ç®—æ”»å‡»çš„åŠ å¯†ç®—æ³•</li>
<li><strong>é‡å­å¯†é’¥åˆ†å‘</strong>ï¼šé‡å­é€šä¿¡æŠ€æœ¯çš„å®‰å…¨åº”ç”¨</li>
<li><strong>æ··åˆåŠ å¯†æ–¹æ¡ˆ</strong>ï¼šä¼ ç»Ÿä¸é‡å­å®‰å…¨çš„å¹³æ»‘è¿‡æ¸¡</li>
</ul>
<h5 data-id="heading-61">3. è¾¹ç¼˜è®¡ç®—å®‰å…¨</h5>
<ul>
<li><strong>è¾¹ç¼˜èŠ‚ç‚¹é˜²æŠ¤</strong>ï¼šåˆ†å¸ƒå¼è¾¹ç¼˜ç¯å¢ƒçš„å®‰å…¨ç®¡ç†</li>
<li><strong>5Gç½‘ç»œå®‰å…¨</strong>ï¼šæ–°ä¸€ä»£ç½‘ç»œçš„å®‰å…¨æŒ‘æˆ˜</li>
<li><strong>IoTè®¾å¤‡é›†æˆ</strong>ï¼šæµ·é‡ç‰©è”ç½‘è®¾å¤‡çš„å®‰å…¨æ¥å…¥</li>
</ul>
<h4 data-id="heading-62">ğŸ’¡ æœ€åçš„å»ºè®®</h4>
<p>æ„å»ºä¼ä¸šçº§å®‰å…¨é˜²çº¿æ˜¯ä¸€ä¸ª<strong>æŒç»­æ¼”è¿›</strong>çš„è¿‡ç¨‹ï¼Œè€Œéä¸€æ¬¡æ€§é¡¹ç›®ã€‚å»ºè®®é‡‡ç”¨ä»¥ä¸‹ç­–ç•¥ï¼š</p>
<ol>
<li><strong>å®‰å…¨ä¼˜å…ˆ</strong>ï¼šåœ¨ç³»ç»Ÿè®¾è®¡çš„æ¯ä¸ªé˜¶æ®µéƒ½å°†å®‰å…¨ä½œä¸ºé¦–è¦è€ƒè™‘</li>
<li><strong>åˆ†å±‚é˜²æŠ¤</strong>ï¼šå®æ–½å¤šå±‚é˜²å¾¡ç­–ç•¥ï¼Œé¿å…å•ç‚¹å¤±æ•ˆ</li>
<li><strong>è‡ªåŠ¨åŒ–ä¼˜å…ˆ</strong>ï¼šå°½å¯èƒ½è‡ªåŠ¨åŒ–å®‰å…¨æµç¨‹ï¼Œå‡å°‘äººä¸ºé”™è¯¯</li>
<li><strong>æŒç»­å­¦ä¹ </strong>ï¼šä¿æŒå¯¹æ–°å¨èƒå’Œå®‰å…¨æŠ€æœ¯çš„æŒç»­å­¦ä¹ </li>
<li><strong>å›¢é˜Ÿåä½œ</strong>ï¼šå»ºç«‹è·¨éƒ¨é—¨çš„å®‰å…¨åä½œæœºåˆ¶</li>
</ol>
<p>è®°ä½ï¼Œ<strong>æœ€å¥½çš„å®‰å…¨ä¸æ˜¯æœ€å¼ºçš„é˜²æŠ¤ï¼Œè€Œæ˜¯æœ€é€‚åˆçš„å¹³è¡¡</strong>ã€‚åœ¨è¿½æ±‚æè‡´å®‰å…¨çš„åŒæ—¶ï¼Œä¹Ÿè¦è€ƒè™‘ç³»ç»Ÿçš„å¯ç”¨æ€§ã€æ€§èƒ½å’Œæˆæœ¬æ•ˆç›Šã€‚é€šè¿‡æœ¬æ–‡æä¾›çš„è¿™å¥—å®Œæ•´è§£å†³æ–¹æ¡ˆï¼Œæ‚¨å¯ä»¥æ ¹æ®è‡ªèº«éœ€æ±‚å’Œç¯å¢ƒç‰¹ç‚¹ï¼Œé€‰æ‹©æœ€é€‚åˆçš„å®‰å…¨å»ºè®¾è·¯å¾„ï¼Œé€æ­¥æ„å»ºèµ·åšä¸å¯æ‘§çš„ä¼ä¸šçº§å®‰å…¨é˜²çº¿ã€‚</p>
<p>å®‰å…¨ä¹‹è·¯ï¼Œæ°¸æ— æ­¢å¢ƒã€‚è®©æˆ‘ä»¬æºæ‰‹å…±å»ºæ›´å®‰å…¨çš„æ•°å­—ä¸–ç•Œï¼ğŸš€</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Javaä¼°è®¡Agenté¢†åŸŸæ–°æ€å‡ºä¸€åŒ¹é»‘é©¬ï¼ˆagentscope-javaï¼‰]]></title>    <link>https://juejin.cn/post/7582809606066978842</link>    <guid>https://juejin.cn/post/7582809606066978842</guid>    <pubDate>2025-12-12T12:23:31.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582809606066978842" data-draft-id="7582815307438882867" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Javaä¼°è®¡Agenté¢†åŸŸæ–°æ€å‡ºä¸€åŒ¹é»‘é©¬ï¼ˆagentscope-javaï¼‰"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-12T12:23:31.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æœªæ¥å½±å­"/> <meta itemprop="url" content="https://juejin.cn/user/3716786555465943"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Javaä¼°è®¡Agenté¢†åŸŸæ–°æ€å‡ºä¸€åŒ¹é»‘é©¬ï¼ˆagentscope-javaï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3716786555465943/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æœªæ¥å½±å­
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-12T12:23:31.000Z" title="Fri Dec 12 2025 12:23:31 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">AgentScope - Java ä»‹ç»</h2>
<p>è°ˆåˆ° AgentScope-Javaï¼Œå¾—å…ˆèŠä¸‹é˜¿é‡Œåœ¨ä¸€å¹´å‰å¼€æºçš„ Python ç‰ˆçš„ Agent æ¡†æ¶ AgentScopeï¼Œè¿™æ˜¯ä¸€æ¬¾ä¸»æ‰“é¢å‘ç ”ç©¶äººå‘˜å’Œ Python å¼€å‘è€…çš„å¤šæ™ºèƒ½ä½“å¼€å‘æ¡†æ¶ï¼Œå’Œç™¾ç‚¼æ·±åº¦èåˆï¼Œå­µåŒ–äºå¤§åé¼é¼çš„é˜¿é‡Œé€šä¹‰å®éªŒå®¤ï¼Œç›®å‰å·²åœ¨ Github ä¸­æ–©è· 14.4kstarï¼Œç›®å‰è¯¥é¡¹ç›®è¿˜åœ¨ç¨³å®šè¿­ä»£ä¸­ï¼Œé’‰é’‰ç¤¾åŒºç¾¤äººæ•° 2000+</p>
<p>github åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fagentscope-ai%2Fagentscope" target="_blank" title="https://github.com/agentscope-ai/agentscope" ref="nofollow noopener noreferrer">github.com/agentscope-â€¦</a></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7cf9834034f44cffaabc78f01c6da514~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pyq5p2l5b2x5a2Q:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766147011&amp;x-signature=D50uTrw3z2%2B9Ctv%2F68EEXQ9Q8F0%3D" alt="" loading="lazy"/></p>
<p>éšç€ AI Agent çš„æ¼”è¿›å‘å±•ï¼Œå‘ç°å¾ˆå¤šåŸæœ‰çš„ Agent æ¡†æ¶ä¸Šå±‚å°è£…çš„è¶Šæ¥è¶Šå®Œå–„ï¼Œç”¨æˆ·åªéœ€è¦ç®€å•çš„é…ç½®å³å¯åˆ›å»ºä¸“ä¸š Agent å»æ‰§è¡Œç‰¹å®šä»»åŠ¡ã€‚2025 å¹´ 11 æœˆåº•ï¼ŒAgentScope Java æ­£å¼æ¨å‡ºå‘å¸ƒ 1.0 ç‰ˆæœ¬</p>
<p>å®˜ç½‘åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fjava.agentscope.io%2Fzh%2Ftask%2Fagent-config.html" target="_blank" title="https://java.agentscope.io/zh/task/agent-config.html" ref="nofollow noopener noreferrer">java.agentscope.io/zh/task/ageâ€¦</a></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5ff89eb97194411d9b5f37439880459b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pyq5p2l5b2x5a2Q:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766147011&amp;x-signature=hgjADw7n0jSw5MvRKKCiW4jpCWE%3D" alt="" loading="lazy"/></p>
<p>github ä»“åº“åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fagentscope-ai%2Fagentscope-java" target="_blank" title="https://github.com/agentscope-ai/agentscope-java" ref="nofollow noopener noreferrer">github.com/agentscope-â€¦</a></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/16a01316a2914b1aa7559719f2a83357~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pyq5p2l5b2x5a2Q:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766147011&amp;x-signature=2yDCVfRy9mh0WzJQNhb%2BsZYas%2BQ%3D" alt="" loading="lazy"/></p>
<p>AgentScope Java å»ºè®¾åˆæœŸï¼Œå‰æœŸå¯¹æ ‡è¿½èµ¶ AgentScope èƒ½åŠ›ï¼Œæ®ç¤¾åŒºäº¤æµæ—¶å®˜æ–¹ AgentScope è´Ÿè´£äººé€éœ²ï¼ŒæŠ•å…¥äº†å¾ˆå¤š P7ã€P8 äººåŠ›å‚ä¸å»ºè®¾ï¼Œä¹Ÿæ¬¢è¿ç¤¾åŒºæ›´å¤šäººå‚ä¸è¿›æ¥å»ºè®¾è¿™å—èƒ½åŠ›ï¼ŒåæœŸéšç€æŠ€æœ¯å‘å±•æ¼”è¿›ä¼šæ›´å¤šå¼•å…¥ Java ç”Ÿæ€çš„å¾®æœåŠ¡ä½“ç³»ã€‚è¿™é‡Œé™„ä¸€å¼ å½“å‰çš„ AgentScope æŠ€æœ¯æ¶æ„å›¾</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7e9ca9414c4045b88617681e4f84f644~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pyq5p2l5b2x5a2Q:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766147011&amp;x-signature=OaxwLzG0B6tyx33783tue0WRRKE%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-1">AgentScope - Java å’Œ Spring AI Alibaba çš„åŒºåˆ«</h2>
<ol>
<li>AgentScope-Java å’Œ Spring AI Alibaba å±äºåŒä¸€å›¢é˜Ÿä¸åŒå°ç»„ç»´æŠ¤</li>
<li>Spring AI Alibaba è·Ÿéšé€‚é… Spring ä½“ç³»ï¼Œé›†æˆ Nacosã€Higress ç­‰å¼€æºç»„ä»¶ï¼Œæ“…é•¿å• Agent çš„å¤æ‚ä»»åŠ¡å·¥ä½œæµç¼–æ’ï¼Œåˆ©ç”¨ Graph æ­å»º Workflow</li>
<li>AgentScope-Java å®Œå…¨é˜¿é‡Œäº‘è‡ªç ”ï¼Œä¾§é‡ Agentic ç†å¿µï¼Œå¼ºè°ƒæ™ºèƒ½ä½“é—´çš„é€šä¿¡ã€è§’è‰²åˆ†å·¥ã€çŠ¶æ€åŒæ­¥</li>
</ol>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c572116ea9a7455b9c7137b8c01185b5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pyq5p2l5b2x5a2Q:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766147011&amp;x-signature=Bzhz5Cy55LlZNsqxcPpt4cnT2bE%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/16bc0f385d7c49a9a489622d0a1501dc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pyq5p2l5b2x5a2Q:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766147011&amp;x-signature=pt8XOW8azsoInlnu%2BJ3Mld9TtSA%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-2">AgentScope - Java æœªæ¥çš„å¼€æºè·¯çº¿</h2>
<p>9 æœˆå¼€æºï¼Œå½“å‰ v0.2 ç‰ˆæœ¬å·²å…·å¤‡ ReActAgent æ ¸å¿ƒèƒ½åŠ›ï¼Œè®¡åˆ’äº 12 æœˆåˆå‘å¸ƒ v1.0 ç‰ˆæœ¬ï¼Œæ–°å¢ RAGã€Planã€Tracingã€Evaluation åŠ Studio ç­‰å…¨å¥—åŠŸèƒ½ï¼Œè¾¾åˆ°ç”Ÿäº§å¯ç”¨ï¼›Runtime v1.0 ä¹Ÿå°†åŒæ­¥ä¸Šçº¿ï¼Œæä¾›æ¶µç›–å®‰å…¨æ²™ç®±ã€A2A Agent åœ¨å†…çš„ä¼ä¸šçº§è½åœ°æ–¹æ¡ˆã€‚12 æœˆä¸­ä¸‹æ—¬ï¼Œæ¨å‡ºåŸºäº ReMe çš„ä¸Šä¸‹æ–‡ç®¡ç†ä¸åŸºäº Trinity-RFT çš„å¼ºåŒ–å­¦ä¹ æœ€ä½³å®è·µã€‚åœ¨æ¶æ„ä¸Šå…¨åŠ›æ¨è¿› Serverless åŒ–ï¼Œé€šè¿‡å®ç°æ¯«ç§’çº§å†·å¯åŠ¨ä¸æ··åˆéƒ¨ç½²ï¼Œå¸®åŠ©å¼€å‘è€…åœ¨åº”å¯¹é«˜å¹¶å‘çš„åŒæ—¶ï¼Œæ˜¾è‘—é™ä½éƒ¨ç½²æˆæœ¬å¹¶æå‡æ•ˆç‡</p>
<h2 data-id="heading-3">AgentScope - Java å¿«é€Ÿä¸Šæ‰‹ç¤ºä¾‹</h2>
<p>pom æ–‡ä»¶å¯¼å…¥</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">revision</span>&gt;</span>1.0.2<span class="hljs-tag">&lt;/<span class="hljs-name">revision</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.agentscope<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>agentscope-core<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>${revision}<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<p>æœ€ç®€å•çš„ Agent æ„å»ºç¤ºä¾‹</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">ReActAgent</span> <span class="hljs-variable">agent</span> <span class="hljs-operator">=</span> ReActAgent._builder_()
        .name(<span class="hljs-string">"Assistant"</span>)
        .sysPrompt(<span class="hljs-string">"You are a helpful AI assistant."</span>)
        .model(DashScopeChatModel._builder_()
                .apiKey(System._getenv_(<span class="hljs-string">"DASHSCOPE_API_KEY"</span>))
                .modelName(<span class="hljs-string">"qwen-max"</span>)
                .build())
        .build();

<span class="hljs-type">String</span> <span class="hljs-variable">textContext</span> <span class="hljs-operator">=</span> <span class="hljs-string">"æˆ‘çš„å¤–å·æ˜¯å½±å­ï¼Œè¯·è®°ä½è¿™ä¸ªä¿¡æ¯ï¼Œå¹¶åœ¨åç»­çš„å¯¹è¯ä¸­ä½¿ç”¨å®ƒæ¥ç§°å‘¼æˆ‘ã€‚"</span>;
<span class="hljs-type">Msg</span> <span class="hljs-variable">response</span> <span class="hljs-operator">=</span> agent.call(Msg._builder_()
                .textContent(textContext)
                .build()).block();
<span class="hljs-keyword">assert</span> response != <span class="hljs-literal">null</span>;
System._out_.println(response.getTextContent());
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/02842c6c039a484895bb4b0b2c9ea262~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pyq5p2l5b2x5a2Q:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766147011&amp;x-signature=vpQXrcoZ1QSnEh2Q4FBqsUHvE1g%3D" alt="" loading="lazy"/></p>
<p>æ›´å¤šæœ€ä½³å®è·µç¤ºå¯ä¸‹è½½æºç æŸ¥çœ‹ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fagentscope-ai%2Fagentscope-java%2Ftree%2Fmain%2Fagentscope-examples" target="_blank" title="https://github.com/agentscope-ai/agentscope-java/tree/main/agentscope-examples" ref="nofollow noopener noreferrer">github.com/agentscope-â€¦</a></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a88f2e0bd1994274b1de794897ede8b2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pyq5p2l5b2x5a2Q:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766147011&amp;x-signature=xQ7j6oh0H7YYHTysEY4rZju1QL0%3D" alt="" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Springboot3.0å¹¶ä¸èƒ½æ‹¯æ•‘ä½ çš„å±å±±]]></title>    <link>https://juejin.cn/post/7582637280218775606</link>    <guid>https://juejin.cn/post/7582637280218775606</guid>    <pubDate>2025-12-12T12:28:09.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582637280218775606" data-draft-id="7582787460418551850" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Springboot3.0å¹¶ä¸èƒ½æ‹¯æ•‘ä½ çš„å±å±±"/> <meta itemprop="keywords" content="åç«¯,Java,æ¶æ„"/> <meta itemprop="datePublished" content="2025-12-12T12:28:09.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ©™åºå‘˜å°ç«™"/> <meta itemprop="url" content="https://juejin.cn/user/1546375522426169"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Springboot3.0å¹¶ä¸èƒ½æ‹¯æ•‘ä½ çš„å±å±±
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1546375522426169/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ©™åºå‘˜å°ç«™
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-12T12:28:09.000Z" title="Fri Dec 12 2025 12:28:09 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»20åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€Spring Boot 3.0 å‘å¸ƒåï¼Œä¸ºä»€ä¹ˆè®¸å¤šé¡¹ç›®ä»ç„¶è¿Ÿç–‘å‡çº§ï¼Ÿ</h2>
<p>Spring Boot 3.0ï¼ˆ2022å¹´12æœˆå‘å¸ƒï¼‰ ä»£è¡¨äº† Spring ç”Ÿæ€çš„ä¸€æ¬¡é‡å¤§é‡Œç¨‹ç¢‘ï¼šä¸ Spring Framework 6 ä¸€èµ·ï¼Œå®ƒå®Œæˆäº†å¯¹ç°ä»£ Java ç‰¹æ€§çš„å¯¹æ¥ï¼ˆä¾‹å¦‚æŠŠæœ€ä½è¿è¡Œæ—¶æé«˜åˆ° Java 17ï¼‰ï¼Œå¹¶æŠŠä¸ Java EE ç›¸å…³çš„ API è¿ç§»åˆ° Jakarta å‘½åç©ºé—´ï¼ˆ<code>javax.*</code> â†’ <code>jakarta.*</code>ï¼‰ã€‚è¿™äº›å˜åŒ–å°†æ¡†æ¶çš„é•¿æœŸæ¼”è¿›æ–¹å‘æ˜ç¡®åœ°å¯¹é½åˆ°äº† Jakarta EE ä¸æœ€æ–° JDK çš„èŠ‚å¥ï¼Œä¸ºæ–°é¡¹ç›®å¸¦æ¥äº†æ›´å¥½çš„åŸç”Ÿé•œåƒæ”¯æŒã€AOT å’Œè§‚æµ‹æ€§ç­‰é•¿æœŸæ”¶ç›Šï¼Œä½†åŒæ—¶ä¹Ÿåˆ¶é€ äº†æ˜¾è‘—çš„å‘åå…¼å®¹å£å’ã€‚</p>
<p>å› æ­¤åœ¨javaç¤¾åŒºä¸­å‡ºç°äº†ä¸€ä¸ªæ˜æ˜¾çš„åˆ†å±‚ç°è±¡ï¼š<strong>æ–°åˆ›å»ºçš„é¡¹ç›®å’Œè¿½æ±‚é•¿æœŸæŠ€æœ¯å€ºåŠ¡æœ€å°åŒ–çš„å›¢é˜Ÿå€¾å‘äºç›´æ¥é‡‡ç”¨ 3.xï¼›è€Œå¤§é‡æ—¢æœ‰ï¼ˆlegacyï¼‰ç³»ç»Ÿä¸ä¼ä¸šçº§åº”ç”¨åˆ™é€‰æ‹©è§‚æœ›æˆ–æ¸è¿›è¿ç§»</strong>ã€‚è¿™ç§åˆ†å±‚å¹¶éâ€œå¼€å‘è€…æ‡’æƒ°â€æˆ–â€œ3.0 ä¸å¥½ç”¨â€ï¼Œè€Œæ˜¯ç”±ä¸€ç³»åˆ—æŠ€æœ¯ä¸ç®¡ç†å±‚é¢çš„æˆæœ¬â€”æ”¶ç›Šæƒè¡¡æ¨åŠ¨çš„å†³ç­–ç»“æœã€‚æœ¬æ–‡å°†ä»æŠ€æœ¯ç»†èŠ‚ã€ä¾èµ–ç”Ÿæ€ã€å·¥ç¨‹æˆæœ¬ä¸ç»„ç»‡æµç¨‹å››ä¸ªç»´åº¦ç³»ç»Ÿå‰–æè¿™äº›æƒè¡¡ã€‚</p>
<hr/>
<h2 data-id="heading-1">äºŒã€æ ¸å¿ƒå˜åŠ¨å¯¼è‡´â€œç ´åæ€§å‡çº§â€</h2>
<p>Spring Boot 3 çš„å‡çº§éšœç¢ï¼Œå¹¶ä¸æ˜¯æ¥è‡ªâ€œæ–°ç‰¹æ€§å¤ªå¤æ‚â€ï¼Œè€Œæ˜¯æ¥è‡ªäºå®ƒå¯¹åº•å±‚æŠ€æœ¯æ ˆçš„<strong>ç»“æ„æ€§å˜æ›´</strong>ã€‚è¿™äº›å˜æ›´ç«™åœ¨æ¡†æ¶æ¼”è¿›çš„è§’åº¦çœ‹å®Œå…¨æ­£ç¡®ï¼Œä½†å¯¹ç°æœ‰ç³»ç»Ÿè€Œè¨€ï¼Œéƒ½æ˜¯<strong>ä¸å¯å¿½è§†çš„ç ´åæ€§ä¿®æ”¹ï¼ˆBreaking Changesï¼‰</strong>ã€‚</p>
<p>æœ¬ç« ä»ä¸¤ä¸ªæœ€å…³é”®çš„å‡çº§éšœç¢åˆ‡å…¥ï¼š
<strong>ï¼ˆ1ï¼‰Java EE â†’ Jakarta EE åŒ…åè¿ç§»é€ æˆçš„å¤§è§„æ¨¡å…¼å®¹é—®é¢˜</strong>
<strong>ï¼ˆ2ï¼‰æœ€ä½è¿è¡Œç¯å¢ƒæå‡åˆ° Java 17 çš„è·¨è¶Šå¼è¦æ±‚</strong></p>
<hr/>
<h3 data-id="heading-2">2.1 Java EEï¼ˆjavaxï¼‰â†’ Jakarta EEï¼ˆjakartaï¼‰çš„å…¨é¢è¿ç§»</h3>
<p>Spring Boot 3.x åŸºäº Spring Framework 6ï¼Œè€Œ Spring Framework 6 çš„æœ€å¤§å˜æ›´ï¼Œå°±æ˜¯å…¨é¢æ‹¥æŠ± Jakarta EE 9+ã€‚è¿™æ„å‘³ç€ï¼š</p>
<blockquote>
<p><strong>æ‰€æœ‰åŸæœ¬äº¤äº’ä¾èµ– javax çš„ API å…¨éƒ¨åˆ‡æ¢åˆ° jakarta å‘½åç©ºé—´ã€‚</strong></p>
</blockquote>
<p>è¡¨é¢ä¸Šçœ‹åªæ˜¯åŒ…åå‰ç¼€æ›¿æ¢ï¼Œä½†å®é™…æ˜¯æ•´ä¸ªç”Ÿæ€é“¾çš„å¤§åœ°éœ‡ã€‚</p>
<hr/>
<h4 data-id="heading-3">2.1.1 åŒ…åå˜åŒ–å¸¦æ¥çš„ç¼–è¯‘çº§ç ´å</h4>
<p>ä¾‹å¦‚ï¼ŒServletã€JPAã€Validation ç­‰æ ¸å¿ƒ API çš„è·¯å¾„å…¨éƒ¨å˜åŠ¨ï¼š</p>

























<table><thead><tr><th>åŸ javax åŒ…ï¼ˆæ—§é¡¹ç›®ï¼‰</th><th>æ–° jakarta åŒ…ï¼ˆBoot 3ï¼‰</th></tr></thead><tbody><tr><td><code>javax.servlet.*</code></td><td><code>jakarta.servlet.*</code></td></tr><tr><td><code>javax.persistence.*</code></td><td><code>jakarta.persistence.*</code></td></tr><tr><td><code>javax.validation.*</code></td><td><code>jakarta.validation.*</code></td></tr><tr><td><code>javax.ws.rs.*</code></td><td><code>jakarta.ws.rs.*</code></td></tr></tbody></table>
<p>å¯¹äºä¸€ä¸ªæˆç†Ÿé¡¹ç›®æ¥è¯´ï¼Œè¿™æ„å‘³ç€ï¼š</p>
<ul>
<li>åªè¦ä½ ç”¨åˆ°äº† JPAã€Validationã€Filterã€Listenerã€Multipartã€JAX-RS ç­‰ä»»æ„åŠŸèƒ½
â†’ <strong>å¿…ç„¶ç¼–è¯‘å¤±è´¥</strong></li>
<li>è‡ªç ” SDK æˆ–å†…éƒ¨ä¸­é—´ä»¶å¦‚æœå¼•ç”¨äº† javax
â†’ <strong>æ•´ä¸ªå…¬å¸æ‰€æœ‰ä¾èµ–å®ƒçš„æœåŠ¡éƒ½æ— æ³•å‡çº§</strong></li>
</ul>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™ä¸æ˜¯ä¸€ä¸ªå›¢é˜Ÿå‡çº§çš„é—®é¢˜ï¼Œè€Œæ˜¯<strong>æ•´ä¸ªç»„ç»‡çš„ä¾èµ–é“¾éƒ½è¦åè°ƒ</strong>ã€‚</p>
<hr/>
<h4 data-id="heading-4">2.1.2 Maven/Gradle ä¾èµ–å¯èƒ½çœ‹ä¼¼â€œå…¼å®¹â€ï¼Œä½†å®é™…ä¸Šæ— æ³•è¿è¡Œ</h4>
<p>æœ€å…¸å‹çš„é—®é¢˜ï¼š</p>
<ul>
<li>å³ä½¿ dependency å¯ä»¥æ­£å¸¸ä¸‹è½½</li>
<li>ä½†å†…éƒ¨å®ç°è¿˜æ˜¯åŸºäº <code>javax.*</code> çš„ç±»</li>
<li>ç¨‹åºè¿è¡Œæ—¶ç›´æ¥æŠ›ï¼š</li>
</ul>
<pre><code class="hljs language-bash" lang="bash">java.lang.NoClassDefFoundError: javax/validation/Constraint
</code></pre>
<p>æ¢è¨€ä¹‹ï¼š<strong>ä¾èµ–æ²¡æŠ¥é”™ â‰  å¯ç”¨ã€‚</strong></p>
<p>è¿™å¯¼è‡´å¤§é‡ç¬¬ä¸‰æ–¹åº“ï¼ˆSwaggerã€Shiroã€Jedis æ—§ç‰ˆæœ¬ã€Quartz æ—§ç‰ˆæœ¬ï¼‰éœ€è¦ç»Ÿä¸€è¿ç§»ï¼Œå¦åˆ™æ— æ³•åœ¨ Boot 3 ç¯å¢ƒè¿è½¬ã€‚</p>
<hr/>
<h4 data-id="heading-5">2.1.3 è‡ªåŠ¨é…ç½®å¤±æ•ˆå¸¦æ¥çš„è¡Œä¸ºçº§ç ´å</h4>
<p>Spring Boot åœ¨è‡ªåŠ¨é…ç½®ä¸­å¤§é‡å¼•ç”¨ javax ç±»å‹ï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li><code>MultipartConfigElement</code></li>
<li><code>ServletContextListener</code></li>
<li><code>ConstraintValidator</code></li>
<li><code>PersistenceProvider</code></li>
</ul>
<p>å½“è¿™äº›ç±»å‹å˜ä¸º <code>jakarta.*</code> ä¹‹åï¼š</p>
<ul>
<li>Boot 2.x çš„è‡ªåŠ¨é…ç½®å…¨éƒ¨å¤±æ•ˆ</li>
<li>Boot 3.x ä¸­è¢«é‡å†™ï¼Œä½†è¦æ±‚ä¾èµ–æ ˆæ–°æ—§ä¸€è‡´</li>
</ul>
<p>è¿™å°±å¯¼è‡´ï¼š</p>
<blockquote>
<p><strong>åªè¿ç§»è‡ªå·±çš„ä»£ç æ²¡æœ‰æ„ä¹‰ï¼Œæ•´ä¸ªè¿è¡Œç¯å¢ƒå¿…é¡»ä¸€èµ·è¿ç§»ã€‚</strong></p>
</blockquote>
<p>å¯¹äºå¤§å‹ä¼ä¸šé¡¹ç›®ï¼Œè¿™å‡ ä¹æ„å‘³ç€ä¸€ä¸ªç³»ç»Ÿçº§åˆ«çš„å·¥ç¨‹ä»»åŠ¡ã€‚</p>
<hr/>
<h3 data-id="heading-6">2.2 JDK ç‰ˆæœ¬è¦æ±‚æå‡ï¼šå¿…é¡» Java 17+</h3>
<p>Spring Boot 3.x çš„è¿è¡Œæ—¶æœ€ä½è¦æ±‚æ˜¯ <strong>Java 17</strong>ã€‚è¿™åˆæ˜¯ä¸€ä¸ªå·¨å¤§çš„é—¨æ§›ã€‚</p>
<hr/>
<h4 data-id="heading-7">2.2.1 ä¸ºä»€ä¹ˆè¿™æ˜¯å¿…ç„¶è¦æ±‚ï¼Ÿ</h4>
<p>å› ä¸ºï¼š</p>
<ul>
<li>Java 17 æ˜¯ LTS</li>
<li>Spring æœªæ¥è¦æ”¯æŒè™šæ‹Ÿçº¿ç¨‹ï¼ˆJDK19+ / 21 LTSï¼‰</li>
<li>AOTã€GraalVM åœ¨ 17+ æ‰è¿›å…¥æˆç†Ÿé˜¶æ®µ</li>
</ul>
<p>ä»æ¡†æ¶è§†è§’çœ‹è¿™æ˜¯åˆç†çš„ï¼Œä½†ä»ä¼ä¸šè§†è§’çœ‹æ„å‘³ç€ï¼š</p>
<ul>
<li>CI/CD éœ€è¦å‡çº§</li>
<li>å®¹å™¨åŸºç¡€é•œåƒéœ€è¦å‡çº§</li>
<li>ç”Ÿäº§æœåŠ¡å™¨ JRE éœ€è¦ç»Ÿä¸€å‡çº§</li>
<li>ä¾èµ–åº“å¿…é¡»æ”¯æŒ JDK 17ï¼Œå¦åˆ™ç¼–è¯‘å¤±è´¥æˆ–è¿è¡Œå¤±è´¥</li>
</ul>
<p>è¿™ä¸æ˜¯ä¸€ä¸ªâ€œæ¢ä¸ª JDKâ€è¿™ä¹ˆç®€å•çš„äº‹æƒ…ã€‚</p>
<hr/>
<h4 data-id="heading-8">2.2.2 Java 8 â†’ Java 17 æ˜¯å•ä½æ•°å¹´è·¨åº¦çš„è¿ç§»</h4>
<p>è·¨è¶Š 7 ä¸ªå¤§ç‰ˆæœ¬å¸¦æ¥å¤§é‡å¯èƒ½çš„é—®é¢˜ï¼š</p>
<ul>
<li>å­—èŠ‚ç æ ¼å¼å˜æ›´</li>
<li>JDK å†…éƒ¨ APIï¼ˆå¦‚ <code>Unsafe</code>ï¼‰é™åˆ¶å¢å¼º</li>
<li>åå°„è®¿é—®è§„åˆ™æ›´ä¸¥æ ¼</li>
<li>ä¸€äº›è€æ—§æ¡†æ¶ï¼ˆæ—©æœŸçš„ Nettyã€Quartzã€POIã€Fastjson 1.x ç­‰ï¼‰å¯èƒ½ä¸å…¼å®¹ 17</li>
</ul>
<p>å¯¹å†å²ç³»ç»Ÿæ¥è¯´ï¼Œ<strong>åªè¦æœ‰ä¸€ä¸ªâ€œä¸æ”¯æŒ Java 17â€çš„ä¾èµ–ï¼Œå°±å¡æ­»å‡çº§é“¾è·¯ã€‚</strong></p>
<hr/>
<h4 data-id="heading-9">2.2.3 æ¶æ„ä¸åŸºç¡€è®¾æ–½é“¾è·¯çš„è¿é”ååº”</h4>
<p>å‡çº§ JDK ä¸æ˜¯åç«¯å•ç‹¬èƒ½å†³å®šçš„ï¼š</p>
<ul>
<li>DevOpsï¼šCI é•œåƒç»Ÿä¸€å‡çº§</li>
<li>è¿ç»´ï¼šç”Ÿäº§ç¯å¢ƒ JVM å‡çº§</li>
<li>å®‰å…¨ç»„ï¼šè¯„ä¼°æ–°ç‰ˆæœ¬æ˜¯å¦å½±å“å®‰å…¨ç­–ç•¥</li>
<li>å„ä¸šåŠ¡çº¿å›¢é˜Ÿï¼šå‡çº§å…±ç”¨ç»„ä»¶ä¸ SDK</li>
<li>æµ‹è¯•ï¼šå¤§é‡çš„å›å½’æµ‹è¯•</li>
</ul>
<p>å› æ­¤ JDK å‡çº§ä¸æ˜¯ä»£ç é—®é¢˜ï¼Œæ˜¯<strong>ç»„ç»‡çº§åè°ƒé—®é¢˜</strong>ã€‚</p>
<hr/>
<h3 data-id="heading-10">2.3 è¿™ä¸¤å¤§å˜åŒ–å åŠ åé€ æˆäº†ä»€ä¹ˆï¼Ÿ</h3>
<p>ä¸€å¥è¯ï¼š</p>
<blockquote>
<p><strong>Spring Boot 3 çš„â€œç ´åæ€§å‡çº§â€ä¸æ˜¯æ¥è‡ªåŠŸèƒ½æœ¬èº«ï¼Œè€Œæ˜¯æ¥è‡ªç”Ÿæ€é“¾çš„æ–­è£‚ä¸ç»„ç»‡åä½œæˆæœ¬ã€‚</strong></p>
</blockquote>
<p>è€é¡¹ç›®ä¸å‡çº§çš„æ ¹æœ¬åŸå› ä¸æ˜¯â€œä¸æƒ³â€ï¼Œè€Œæ˜¯ï¼š</p>
<ul>
<li>ä¸€å‡çº§å°±ç‰µä¸€å‘åŠ¨å…¨èº«</li>
<li>é£é™©å¤§ã€æ”¶ç›ŠçŸ­æœŸä¸æ˜æ˜¾</li>
<li>æˆæœ¬å¾ˆéš¾åœ¨ä¸šåŠ¡ç›®æ ‡ä¸­ justify</li>
</ul>
<p>ä¹Ÿå› æ­¤å‡ºç°äº†ç¤¾åŒºå¸¸è§ç»“è®ºï¼š</p>
<blockquote>
<p><strong>Spring Boot 3 æ›´é€‚åˆæ–°é¡¹ç›®ï¼Œè€Œä¸æ˜¯è¿ç§»é¡¹ç›®ã€‚</strong></p>
</blockquote>
<hr/>
<h2 data-id="heading-11">ä¸‰ã€ä¾èµ–ç”Ÿæ€é“¾ä¸å¤Ÿâ€œè·Ÿä¸Šæ¥â€ï¼Œå¯¼è‡´å‡çº§å—é˜»</h2>
<p>å¦‚æœè¯´ç¬¬äºŒç« æ‰€è¿°çš„å˜æ›´æ˜¯â€œæ¡†æ¶çº§åˆ«çš„ç ´åæ€§å‡çº§â€ï¼Œé‚£ä¹ˆä¾èµ–ç”Ÿæ€çš„é—®é¢˜åˆ™æ˜¯â€œç³»ç»Ÿçº§åˆ«çš„å‡çº§é˜»æ–­â€ã€‚å› ä¸ºä¸€ä¸ªæˆç†Ÿçš„ä¼ä¸šæœåŠ¡ï¼Œå¾€å¾€ä¸æ˜¯ç®€å•åœ°ä¾èµ– Spring Bootï¼Œè€Œæ˜¯ï¼š</p>
<ul>
<li>Spring Bootï¼ˆæ ¸å¿ƒæ¡†æ¶ï¼‰</li>
<li>Spring Cloud / Security / Data ç­‰ï¼ˆå…¨å®¶æ¡¶ï¼‰</li>
<li>åŸºç¡€è®¾æ–½ SDKï¼ˆRedisã€MQã€æœç´¢ã€ä¸­é—´ä»¶ï¼‰</li>
<li>å…¬å¸è‡ªç ” SDKï¼ˆæ—¥å¿—ã€ç›‘æ§ã€ç½‘å…³ã€æƒé™ã€é…ç½®ä¸­å¿ƒï¼‰</li>
<li>å„ç±»ç¬¬ä¸‰æ–¹åº“ï¼ˆSwaggerã€Shiroã€Quartzã€POI ç­‰ï¼‰</li>
</ul>
<p>è¿™äº›ä¾èµ–æ„æˆä¸€ä¸ªå¤æ‚çš„<strong>ç”Ÿæ€å›¾è°±</strong>ã€‚</p>
<p>ä¸€ä¸ªå¸¸è¢«ä½ä¼°çš„äº‹å®æ˜¯ï¼š</p>
<blockquote>
<p><strong>è¿ç§» Boot 3.x ä¸æ˜¯è¿ç§»ä¸€ä¸ªé¡¹ç›®ï¼Œè€Œæ˜¯è¿ç§»æ•´ä¸ªç”Ÿæ€ã€‚</strong></p>
</blockquote>
<p>ä¸‹é¢åˆ†ä¸‰ä¸ªå±‚æ¬¡æ‹†å¼€è§£é‡Šã€‚</p>
<hr/>
<h3 data-id="heading-12">3.1 Spring å…¨å®¶æ¡¶çš„è¿é”å‡çº§ï¼šç‰ˆæœ¬ä¾èµ–å›¾å†³å®šäº†å‡çº§èŠ‚å¥</h3>
<p>Spring Boot 3.x å¯¹åº”çš„æ˜¯ Spring Framework 6ï¼Œè€Œ Framework 6 åˆæ˜¯ Jakarta EE 9+ çš„ä½“ç³»ã€‚è¿™æ„å‘³ç€ï¼š</p>
<ul>
<li>Spring Cloud å¿…é¡»å‡çº§åˆ° 2022.x æˆ–æ›´é«˜</li>
<li>Spring Security å¿…é¡»å‡çº§åˆ° 6.x</li>
<li>Spring Data ä¹Ÿå¿…é¡»æ•´ä½“å‡çº§åˆ°æ–°çš„å‘½åç©ºé—´æ”¯æŒä¸Š</li>
<li>Spring Batchã€Spring Integration ç­‰æ‰€æœ‰å®˜æ–¹å­é¡¹ç›®éƒ½è¦è·Ÿç€å‡çº§</li>
</ul>
<p>å› æ­¤ï¼Œå¤§å¤šæ•°ä¼ä¸šä¼šé‡åˆ°è¿™æ ·çš„è¿é”ååº”ï¼š</p>
<h4 data-id="heading-13">3.1.1 åªå‡çº§ Boot 3.xï¼Œæœ¬åœ°å¯åŠ¨å³å¤±è´¥</h4>
<p>å› ä¸ºè€ç‰ˆæœ¬çš„ Spring Cloud æˆ– Security ä»ç„¶ä¾èµ– <code>javax.*</code> ç±»å‹ã€‚</p>
<p>ä¸€äº›å…¸å‹é”™è¯¯æ˜¯ï¼š</p>
<pre><code class="hljs language-shell" lang="shell">java.lang.NoClassDefFoundError: javax/servlet/ServletRequest
</code></pre>
<p>æˆ–è€…ï¼š</p>
<pre><code class="hljs language-shell" lang="shell">NoSuchMethodError: javax.persistence.EntityManager.getMetamodel()
</code></pre>
<p>è¿™äº›é”™è¯¯çš„æœ¬è´¨æ˜¯ï¼š</p>
<blockquote>
<p><strong>Spring Boot 3.x å¼ºåˆ¶è¦æ±‚ç”Ÿæ€é“¾ç‰ˆæœ¬æ•´é½åˆ’ä¸€ï¼Œåªå‡çº§ä¸€ä¸ªç»„ä»¶æ˜¯ä¸å¯èƒ½æˆåŠŸçš„ã€‚</strong></p>
</blockquote>
<hr/>
<h3 data-id="heading-14">3.2 ç¬¬ä¸‰æ–¹åº“çš„ Jakarta è¿ç§»ä¸å®Œå…¨åŒæ­¥ï¼Œå¯¼è‡´å…¼å®¹æ€§æ–­å±‚</h3>
<p>ç¬¬ä¸‰æ–¹åº“åœ¨æ­¤æ¬¡è¿ç§»ä¸­é­é‡çš„é—®é¢˜æ¯” Spring å®˜æ–¹æ›´å¤§ï¼Œå› ä¸ºä»–ä»¬åŸæœ¬ä¸ä¸ Jakarta EE 95%ä»¥ä¸Šçš„ API å¼ºç»‘å®šï¼Œä½†åœ¨ 3.x ç¯å¢ƒä¸­å¿…é¡»åŒæ­¥å‡çº§ã€‚</p>
<p>ä»¥ä¸‹æ˜¯ä¸€äº› Boot 3 è¿ç§»ä¸­å¸¸è§çš„â€œå¡ç‚¹åº“â€ï¼š</p>



































<table><thead><tr><th>å¸¸è§ä¾èµ–</th><th>å‡çº§å‰æƒ…å†µ</th><th>Boot 3 çŠ¶æ€</th></tr></thead><tbody><tr><td>Swagger / Springfoxï¼ˆæ—§ï¼‰</td><td>å¤§é‡ä½¿ç”¨ javax</td><td>Springfox å·²åœæ­¢ç»´æŠ¤ï¼Œæ— æ³•å…¼å®¹</td></tr><tr><td>Shiroï¼ˆæ—§ï¼‰</td><td>ä¸ Servlet API è€¦åˆï¼Œä½¿ç”¨ javax</td><td>éœ€ä½¿ç”¨æœ€æ–°åˆ†æ”¯</td></tr><tr><td>Quartzï¼ˆæ—§ï¼‰</td><td>åŸºäº javax äº‹åŠ¡ç®¡ç†</td><td>ä½ç‰ˆæœ¬æ— æ³•è¿è¡Œ</td></tr><tr><td>MyBatis + æŸäº›è‡ªå®šä¹‰æ’ä»¶</td><td>æ’ä»¶å†…å¼•ç”¨ javax</td><td>éœ€è¦æ’ä»¶åŒæ­¥å‡çº§</td></tr><tr><td>æ—§ç‰ˆ Redis å®¢æˆ·ç«¯ï¼ˆJedisï¼‰</td><td>æœ‰çš„ä¾èµ– JDK è€ç‰¹æ€§</td><td>åœ¨ JDK17+ ä¸‹æ˜“æŠ¥é”™</td></tr></tbody></table>
<h4 data-id="heading-15">3.2.1 â€œçœ‹ä¼¼å…¼å®¹ï¼Œä½†è¿è¡Œæ—¶å´©æºƒâ€æ˜¯æœ€å¸¸è§çš„ç¾éš¾</h4>
<p>ä¾èµ–èƒ½ç¼–è¯‘ä¸ä»£è¡¨èƒ½è¿è¡Œã€‚</p>
<p>Boot 3 è¿ç§»ä¸­å¤§é‡é‡åˆ°è¿™ç§ç°è±¡ï¼š</p>
<ul>
<li>ä¾èµ–å¼•å…¥æˆåŠŸ</li>
<li>ç¼–è¯‘æ²¡æœ‰é—®é¢˜</li>
<li>è¿è¡Œæ—¶é©¬ä¸ŠæŠ¥ <code>ClassNotFoundException</code></li>
</ul>
<p>åŸå› é€šå¸¸æ˜¯ï¼š</p>
<ul>
<li><code>.class</code> æ–‡ä»¶ä¾æ—§å¼•ç”¨ javax</li>
<li>é¡¹ç›®æ²¡æœ‰è¿™ç§ç±»ï¼Œå› æ­¤æ— æ³•åŠ è½½</li>
</ul>
<p>å¼€å‘è€…ä¼šè¯¯ä»¥ä¸ºæ˜¯é…ç½®é—®é¢˜ï¼Œä½†æœ¬è´¨æ˜¯<strong>ä¾èµ–æœ¬èº«æ— æ³•å…¼å®¹æ–°çš„åŒ…åä½“ç³»</strong>ã€‚</p>
<hr/>
<h3 data-id="heading-16">3.3 ä¼ä¸šå†…éƒ¨è‡ªç ” SDKï¼šå‡çº§çš„â€œå†³å®šæ€§ç“¶é¢ˆâ€</h3>
<p>å¦‚æœè¯´ç¬¬ä¸‰æ–¹åº“æ˜¯ Boot 3 éš¾è¿ç§»çš„å¤–éƒ¨å› ç´ ï¼Œé‚£ä¹ˆ <strong>ä¼ä¸šè‡ªç ” SDK æ‰æ˜¯æœ€éš¾å¤„ç†çš„å†…éƒ¨å› ç´ </strong>ã€‚</p>
<p>å¸¸è§çš„è‡ªç ”ç»„ä»¶åŒ…æ‹¬ï¼š</p>
<ul>
<li>æ—¥å¿— SDKï¼ˆAOP + MDCï¼‰</li>
<li>æƒé™ SDKï¼ˆæ‹¦æˆªå™¨ + Filterï¼‰</li>
<li>ç½‘å…³ SDKï¼ˆServlet + Feignï¼‰</li>
<li>Kafka / RocketMQ åŒ…è£… SDK</li>
<li>æ–‡ä»¶ä¸Šä¼  SDKï¼ˆåŸºäº Multipart/Servletï¼‰</li>
<li>JPA é€šç”¨å°è£…ã€MyBatis é€šç”¨ mapper</li>
<li>éªŒè¯è§„åˆ™ï¼ˆJSR303 / javax.validationï¼‰</li>
</ul>
<p>è¿™äº› SDK <strong>å‡ ä¹ä¸€å®šå¼•ç”¨ javax åŒ…</strong>ã€‚</p>
<p>è€Œä¸€æ—¦å…¬å¸å†…éƒ¨ SDK æ²¡æœ‰å‡çº§ï¼š</p>
<blockquote>
<p><strong>å…¨å…¬å¸æ‰€æœ‰æœåŠ¡â€”â€”æ— è®ºå¤§å°â€”â€”éƒ½æ— æ³•è¿ç§» Spring Boot 3ã€‚</strong></p>
</blockquote>
<p>è¿™å’Œå‡çº§ç¬¬ä¸‰æ–¹åº“å®Œå…¨ä¸æ˜¯ä¸€ä¸ªé—®é¢˜é‡çº§ï¼š</p>
<ul>
<li>æ¶‰åŠç»„ç»‡åä½œ</li>
<li>æ¶‰åŠæ•°åä¸ªå›¢é˜Ÿ</li>
<li>æ¶‰åŠè¿ç»´ã€æµ‹è¯•ã€å¤§é‡å›å½’</li>
<li>å…¶ä¸­æŸäº›è€ç³»ç»Ÿå·²ç»æ— äººç»´æŠ¤</li>
</ul>
<p>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆè®¸å¤šå…¬å¸ä¼šè¯´ï¼š</p>
<blockquote>
<p>â€œBoot 3 æˆ‘ä»¬å…ˆè§‚å¯Ÿä¸€å¹´ã€‚â€</p>
</blockquote>
<p>å› ä¸ºçœŸæ­£çš„æˆæœ¬ä¸åœ¨ä¸šåŠ¡ä»£ç ï¼Œè€Œåœ¨ç”Ÿæ€é“¾ä¸Šã€‚</p>
<hr/>
<h2 data-id="heading-17">3.4 è¿ç§»æˆæœ¬ä¸å¯æ§ï¼šä¾èµ–é“¾æ·±åº¦è¶Šæ·±ï¼Œå‡çº§éš¾åº¦è¶ŠæŒ‡æ•°çº§å¢é•¿</h2>
<p>Spring Boot é¡¹ç›®å¾€å¾€ä¸æ˜¯â€œå•ä½“é«˜å†…èšâ€ï¼Œè€Œæ˜¯æœ‰ä¸‰å±‚ä¾èµ–é“¾ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">ä¸šåŠ¡æœåŠ¡
 â†“
å…¬å¸ä¸­é—´å±‚ libraries (SDK)
 â†“
ç¬¬ä¸‰æ–¹åŸºç¡€åº“
 â†“
Spring Boot / Framework
</code></pre>
<p>å‡çº§ Boot 3 çš„è¿‡ç¨‹å°±åƒæ‹”ä¸€æ ¹çº¿ï¼š</p>
<ul>
<li>ä»»ä½•ä¸€å±‚ä¸å…¼å®¹
â†’ æ•´ä¸ªç³»ç»Ÿä¸èƒ½å¯åŠ¨</li>
<li>å¤šå›¢é˜Ÿéœ€è¦åŒæ—¶ä¿®å¤
â†’ åä½œæˆæœ¬çˆ†ç‚¸</li>
<li>å¯¹è€æ—§æœåŠ¡éš¾ä»¥åŠ¨æ‰‹
â†’ æˆä¸ºæŠ€æœ¯å€ºåŠ¡æ°¸ä¹…é˜»ç¢</li>
</ul>
<p>å› æ­¤ï¼Œä»å·¥ç¨‹ç»´åº¦å¯ä»¥å¾—å‡ºä¸€ä¸ªç»“è®ºï¼š</p>
<blockquote>
<p><strong>Spring Boot 3 çš„é—®é¢˜ä¸æ˜¯â€œéš¾â€ï¼Œè€Œæ˜¯â€œé“¾æ¡é•¿â€ã€‚</strong></p>
</blockquote>
<hr/>
<h2 data-id="heading-18">å››ã€è€é¡¹ç›®å‡çº§æˆæœ¬è¿‡é«˜ï¼šä¸ä»…æ˜¯ä»£ç ï¼Œè¿˜æœ‰æ¶æ„</h2>
<p>å¯¹äºä¸€ä¸ªè¿è¡Œå¤šå¹´çš„ Spring Boot 2.x ç³»ç»Ÿæ¥è¯´ï¼Œå‡çº§åˆ° Boot 3.x å¸¦æ¥çš„å¹¶ä¸æ˜¯â€œä¿®æ”¹å‡ ä¸ª importï¼Œç„¶åè·‘ä¸€ä¸‹å›å½’æµ‹è¯•â€è¿™ä¹ˆè½»æ¾ã€‚è¿™æ˜¯å› ä¸ºï¼š</p>
<blockquote>
<p><strong>Spring Boot åœ¨ä¸€ä¸ªæˆç†Ÿé¡¹ç›®ä¸­ï¼Œæ˜¯æ¡†æ¶ï¼Œä¹Ÿæ˜¯æ¶æ„çš„åŸºç¡€è®¾æ–½ä¹‹ä¸€ã€‚</strong></p>
</blockquote>
<p>å› æ­¤å‡çº§ç‰µæ¶‰çš„å±‚é¢ä¸ä»…æ˜¯ä»£ç ï¼Œè¿˜åŒ…æ‹¬è®¾è®¡æ¨¡å¼é€‰å‹ã€ä¾èµ–è€¦åˆã€æµ‹è¯•ä½“ç³»ã€CI/CD ä¸åŸºç¡€è®¾æ–½ã€‚ä»¥ä¸‹ä»ä¸‰ä¸ªç»´åº¦å±•å¼€è¯´æ˜ã€‚</p>
<hr/>
<h3 data-id="heading-19">4.1 å­˜é‡é¡¹ç›®è§„æ¨¡åºå¤§ï¼Œè¿ç§»å·¥ä½œå‘ˆâ€œéçº¿æ€§å¢é•¿â€</h3>
<p>å¯¹äºä¸€ä¸ªå­˜åœ¨è¶…è¿‡ 2 å¹´çš„æœåŠ¡è€Œè¨€ï¼Œå®ƒä¼šè¡¨ç°å‡ºä¸‰ä¸ªå…¸å‹ç‰¹å¾ï¼š</p>
<h4 data-id="heading-20">4.1.1 ä»£ç é‡å¤§ä¸”è·¨æ¨¡å—å¹¿</h4>
<p>å³ä½¿ä¸šåŠ¡ä»£ç æœ¬èº«å‡ åä¸‡è¡Œï¼ŒBoot 3 çš„è¿ç§»å½±å“çš„ä¹Ÿä¸æ­¢æ˜¯æ§åˆ¶å™¨æˆ– service å±‚ï¼Œè€Œæ˜¯ï¼š</p>
<ul>
<li>å„ç§ Filter / Interceptor</li>
<li>è®¤è¯ã€æˆæƒç›¸å…³é€»è¾‘ï¼ˆJWTã€Sessionã€Token æ ¡éªŒç­‰ï¼‰</li>
<li>ç»Ÿä¸€å¼‚å¸¸å¤„ç†</li>
<li>éªŒè¯æ³¨è§£ï¼ˆJSR303 â†’ Jakarta Validationï¼‰</li>
<li>æ•°æ®è®¿é—®ç»„ä»¶ï¼ˆJPAã€MyBatis æ’ä»¶ï¼‰</li>
<li>æ¶ˆæ¯ä¸­é—´ä»¶å°è£…çš„ Client</li>
</ul>
<p><strong>è¿™äº›åœ°æ–¹å¾€å¾€åŒ…å«å¤§é‡ javax å¼•ç”¨æˆ–ä¾èµ–æ¡†æ¶è¡Œä¸ºçš„ç»†èŠ‚ã€‚</strong></p>
<p>æ¯ä¸€å¤„çœ‹ä¼¼å¾®å°çš„ç ´åæ€§å˜åŒ–ï¼Œéƒ½å¯èƒ½å¼•å‘å¦ä¸€å±‚çš„è¿é”ä¿®æ”¹ã€‚</p>
<hr/>
<h4 data-id="heading-21">4.1.2 è®¸å¤šé¡¹ç›®æœ‰â€œæ—¶é—´ç§¯ç´¯çš„æŠ€æœ¯å€ºåŠ¡â€</h4>
<p>æ¯”å¦‚ï¼š</p>
<ul>
<li>æ—§çš„ AOP å†™æ³•ä¾èµ–ç‰¹å®šçš„ API</li>
<li>è‡ªå®šä¹‰ starter ä½¿ç”¨äº†æ—§çš„ AutoConfiguration æ¨¡å‹</li>
<li>Configurations ä¸­ä½¿ç”¨äº†è¿‡æ—¶çš„å±æ€§</li>
<li>å†å²ç‰ˆæœ¬çš„ SDK å¼•ç”¨äº† javax çš„ SPI</li>
<li>æŸäº›æ¨¡å—ç¼–å†™æ—¶æ²¡æœ‰è€ƒè™‘å¯ç»´æŠ¤æ€§ï¼ˆhard-coded æˆ– deep-coupledï¼‰</li>
</ul>
<p>Boot 3 çš„è¿ç§»ä¼šè¿«ä½¿å›¢é˜Ÿæ­£è§†è¿™äº›æŠ€æœ¯å€ºåŠ¡ï¼Œè€Œä¸æ˜¯â€œåŸå°ä¸åŠ¨è¿ç§»è¿‡å»â€ã€‚</p>
<p>æ¢è¨€ä¹‹ï¼Œå‡çº§è¿‡ç¨‹æœ¬èº«å°±æ˜¯ä¸€ä¸ª<strong>æŠ€æœ¯å€ºåŠ¡æš´éœ²å™¨</strong>ã€‚</p>
<hr/>
<h4 data-id="heading-22">4.1.3 è·¨è¶Šç‰ˆæœ¬è¶Šå¤§ï¼Œæ½œåœ¨ä¸å…¼å®¹ç‚¹è¶Šå¤š</h4>
<p>ä» 2.6 / 2.7 â†’ 3.x
æœ¬è´¨ä¸Šä¸æ˜¯â€œminor upgradeâ€ï¼Œè€Œæ˜¯ï¼š</p>
<ul>
<li>ä¾èµ– Jakarta EE</li>
<li>Spring Framework 6 å…¨é¢é‡æ„</li>
<li>éƒ¨åˆ† API è¢«åºŸå¼ƒæˆ–æ›¿æ¢</li>
<li>å¯åŠ¨æ—¶åºå˜åŒ–</li>
<li>Bean æ³¨å…¥è¯­ä¹‰æ›´ä¸¥æ ¼</li>
</ul>
<p>å› æ­¤ï¼Œæ—§é¡¹ç›®è¿ç§»è¦å¤„ç†çš„ä¸æ˜¯ä¸€ä¸¤ä¸ªâ€œæŠ¥é”™â€ï¼Œè€Œæ˜¯ï¼š</p>
<ul>
<li>æ•°ç™¾å¤„ç¼–è¯‘é”™è¯¯</li>
<li>æ•°åå¤„è¿è¡Œæ—¶å·®å¼‚</li>
<li>è®¸å¤šéšæ€§è¡Œä¸ºå˜åŒ–ï¼ˆauto-configurationã€path matchingã€CORSã€actuatorï¼‰</li>
</ul>
<p>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆè¿ç§»å¾€å¾€å˜æˆâ€œé¡¹ç›®é‡æ„â€çš„è§„æ¨¡ã€‚</p>
<hr/>
<h3 data-id="heading-23">4.2 é›†æˆæµ‹è¯•ä¸ä¸šåŠ¡å›å½’æˆæœ¬æé«˜</h3>
<p>åœ¨ä¼ä¸šçº§é¡¹ç›®ä¸­ï¼Œ<strong>æœ€è´µçš„ä¸æ˜¯ä»£ç ä¿®æ”¹ï¼Œè€Œæ˜¯æµ‹è¯•</strong>ã€‚</p>
<p>Spring Boot å‡çº§ä¼šå½±å“ä»¥ä¸‹å…³é”®ç‚¹ï¼š</p>
<hr/>
<h4 data-id="heading-24">4.2.1 è‡ªåŠ¨é…ç½®è¡Œä¸ºå˜åŒ–</h4>
<p>ä¾‹å¦‚ï¼š</p>
<ul>
<li>WebMvc path matching é»˜è®¤è¡Œä¸ºè°ƒæ•´</li>
<li>Jackson è‡ªåŠ¨æ¨¡å—åŠ è½½æœ‰å·®å¼‚</li>
<li>Data JPA çš„ repository åˆå§‹åŒ–æ—¶åºå˜åŠ¨</li>
<li>WebFlux é¡¹ç›®ä¸­éƒ¨åˆ† auto-config çš„å¼€å¯æ¡ä»¶å˜åŒ–</li>
</ul>
<p>è¿™äº›éƒ½èƒ½é€ æˆï¼š</p>
<ul>
<li>éƒ¨åˆ†æ¥å£ 404</li>
<li>Bean æœªåŠ è½½</li>
<li>Serializer ä¸ä¸€è‡´</li>
<li>æ•°æ®ç»‘å®šå¤±è´¥</li>
<li>WebSocket æˆ– CORS é…ç½®å¤±æ•ˆ</li>
</ul>
<p>è¦éªŒè¯è¿™äº›å¹¶ç¡®ä¿æ—  regressionsï¼Œéœ€è¦å¤§é‡ä¸šåŠ¡å›å½’ã€‚</p>
<hr/>
<h4 data-id="heading-25">4.2.2 è®¤è¯ã€æƒé™ã€ç½‘å…³é“¾è·¯é£é™©æ›´é«˜</h4>
<p>å°¤å…¶ä½¿ç”¨ï¼š</p>
<ul>
<li>Spring Security</li>
<li>OAuth2</li>
<li>Feign + æƒé™ token ä¼ é€’</li>
<li>Gateway + global filters</li>
</ul>
<p>å› ä¸º Boot 3 æ•´ä½“è¿ç§»åˆ°äº†æ–°çš„ API ä¸é…ç½®ä½“ç³»ï¼Œä¸€äº›é»˜è®¤ç­–ç•¥å‘ç”Ÿå˜åŠ¨ã€‚</p>
<p><strong>å®‰å…¨ç›¸å…³çš„å›å½’æµ‹è¯•å¾€å¾€æ˜¯æœ€ä¸¥è‹›ä¸”æœ€è€—æ—¶çš„ã€‚</strong></p>
<hr/>
<h4 data-id="heading-26">4.2.3 åˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„ç«¯åˆ°ç«¯æµ‹è¯•ï¼ˆE2Eï¼‰éš¾åº¦å¤§</h4>
<p>åªè¦ä¸€ä¸ªæœåŠ¡å‡çº§ï¼Œå…¶ä¸‹æ¸¸æˆ–ä¸Šæ¸¸æœåŠ¡å¯èƒ½å‡ºç°ï¼š</p>
<ul>
<li>è®¤è¯æ ¼å¼ä¸å…¼å®¹</li>
<li>è·¨æœåŠ¡ DTO åºåˆ—åŒ–ä¸ä¸€è‡´</li>
<li>Feign å®¢æˆ·ç«¯è¡Œä¸ºå·®å¼‚</li>
<li>ç½‘å…³è¿‡æ»¤å™¨æ¨é€é”™è¯¯</li>
<li>é“¾è·¯è¿½è¸ªé€»è¾‘ä¸¢å¤±</li>
</ul>
<p>è¿™æ„å‘³ç€ï¼š</p>
<blockquote>
<p><strong>å¦‚æœç³»ç»Ÿæ˜¯å¾®æœåŠ¡æ¶æ„ï¼Œå‡çº§ä¸€ä¸ªæœåŠ¡å¯èƒ½å½±å“äº”åˆ°åä¸ªæœåŠ¡ã€‚</strong></p>
</blockquote>
<p>å› æ­¤å¾ˆå¤šå…¬å¸ä¼šé€‰æ‹©ï¼š</p>
<ul>
<li>â€œç­‰å…¨é“¾è·¯å‡†å¤‡å¥½å†ä¸€èµ·å‡çº§â€</li>
<li>æˆ–è€…å¹²è„†â€œä¸åŠ¨å®ƒï¼Œé£é™©å¤ªé«˜â€</li>
</ul>
<hr/>
<h3 data-id="heading-27">4.3 å‡çº§æ¶‰åŠå¤šä¸ªå›¢é˜Ÿåä½œï¼Œæ˜¯ç»„ç»‡çº§é¡¹ç›®</h3>
<p>æŠ€æœ¯é—®é¢˜åªæ˜¯è¡¨è±¡ï¼Œå®é™…ç“¶é¢ˆåœ¨ç»„ç»‡åä½œèƒ½åŠ›ã€‚</p>
<hr/>
<h4 data-id="heading-28">4.3.1 æ¶æ„/å¹³å°å›¢é˜Ÿéœ€è¦å‡çº§åŸºç¡€è®¾æ–½</h4>
<p>åŒ…æ‹¬ï¼š</p>
<ul>
<li>JDK 17</li>
<li>CI/CD æ„å»ºé•œåƒ</li>
<li>Docker åŸºç¡€é•œåƒ</li>
<li>GitLab Runner / Jenkins JDK ç‰ˆæœ¬</li>
<li>ç›‘æ§/é“¾è·¯è¿½è¸ªç»„ä»¶é€‚é…ï¼ˆä¾‹å¦‚ Micrometer 3.xï¼‰</li>
</ul>
<p>è¿™äº›ä¸æ˜¯ä»£ç å±‚é¢èƒ½è§£å†³çš„ã€‚</p>
<hr/>
<h4 data-id="heading-29">4.3.2 è¿ç»´å›¢é˜Ÿéœ€è¦è¯„ä¼°è¿è¡Œé£é™©</h4>
<p>ä¾‹å¦‚ï¼š</p>
<ul>
<li>GC ç­–ç•¥å˜åŒ–ï¼ˆJava 8 â†’ Java 17ï¼‰</li>
<li>Native Image éƒ¨ç½²æ¨¡å¼çš„å½±å“</li>
<li>å®¹å™¨å†…å­˜è¡Œä¸ºå·®å¼‚</li>
<li>æ—¥å¿—ã€metrics å¹³å°çš„å…¼å®¹æ€§</li>
</ul>
<p>æ²¡æœ‰è¿ç»´å›¢é˜Ÿçš„æ”¯æŒï¼Œå‡çº§æ˜¯æ— æ³•è¿›è¡Œçš„ã€‚</p>
<hr/>
<h4 data-id="heading-30">4.3.3 QAæ— æ³•åœ¨çŸ­æœŸå†…è¦†ç›–æ‰€æœ‰å›å½’åœºæ™¯</h4>
<p>å°¤å…¶åœ¨ï¼š</p>
<ul>
<li>é‡‘è/äº¤æ˜“ç³»ç»Ÿ</li>
<li>ç”µå•†/è®¢å•é“¾è·¯</li>
<li>å†…éƒ¨å¤§ä¸­å°ç³»ç»Ÿ</li>
</ul>
<p>æµ‹è¯•é“¾è·¯å¤æ‚ï¼Œå‡çº§å¯èƒ½å¼•å‘ï¼š</p>
<ul>
<li>è®¢å•çŠ¶æ€å¼‚å¸¸</li>
<li>æ”¯ä»˜å›è°ƒé—®é¢˜</li>
<li>æ•°æ®ä¸€è‡´æ€§é—®é¢˜</li>
<li>ä¸šåŠ¡æŒ‡æ ‡ç»Ÿè®¡é”™è¯¯</li>
</ul>
<p>è¿™äº›é£é™©è¿œé«˜äºâ€œå‡çº§æ¡†æ¶å¸¦æ¥çš„æ”¶ç›Šâ€ã€‚</p>
<p>å› æ­¤ä¼ä¸šå¾€å¾€ä¼šé‡‡ç”¨ä¸€ç§æ€åº¦ï¼š</p>
<blockquote>
<p><strong>â€œBoot 2.x è¿˜åœ¨ç»´æŠ¤ï¼Œæˆ‘ä»¬æ²¡å¿…è¦å†’é™©å‡çº§ã€‚â€</strong></p>
</blockquote>
<hr/>
<h2 data-id="heading-31">äº”ã€Spring Boot 3 çš„äº®ç‚¹ä¸ºä»€ä¹ˆæ²¡æˆä¸ºâ€œå¼ºåˆšéœ€â€ï¼Ÿ</h2>
<p>ä»æŠ€æœ¯è§’åº¦çœ‹ï¼ŒSpring Boot 3 æ˜¯ä¸€ä¸ªéå¸¸â€œå…ˆè¿›â€çš„ç‰ˆæœ¬ã€‚å®ƒæ‹¥æŠ±äº† Java 17ã€GraalVMã€AOTã€è™šæ‹Ÿçº¿ç¨‹ç­‰ç°ä»£ JVM èƒ½åŠ›ï¼Œä¹Ÿä¸ºæœªæ¥ 5 å¹´çš„ Java ç”Ÿæ€å¥ å®šåŸºç¡€ã€‚ä½†ä»è½åœ°åº”ç”¨è§’åº¦çœ‹ï¼Œè¿™äº›äº®ç‚¹ <strong>å¹¶ä¸è¶³ä»¥è®©ä¼ä¸šæ„¿æ„æ‰¿æ‹…å¤§è§„æ¨¡è¿ç§»çš„é«˜æˆæœ¬</strong>ã€‚</p>
<p>æœ¬ç« ä»å››ä¸ªè§’åº¦åˆ†æï¼šæŠ€æœ¯å¯¹ç”Ÿäº§ä»·å€¼ã€è¿ç§»æˆæœ¬ vs æ”¶ç›Šã€ç”Ÿæ€æˆç†Ÿåº¦ã€æœªæ¥æ€§ vs ç°å®æ€§ã€‚</p>
<hr/>
<h3 data-id="heading-32">5.1 AOT / Native Imageï¼šçœ‹èµ·æ¥å¾ˆå¼ºï¼Œä½†è½åœ°é—¨æ§›å¤ªé«˜</h3>
<p>Spring Boot 3 æœ€è¢«å®£ä¼ çš„å–ç‚¹ä¹‹ä¸€ï¼Œæ˜¯ AOTï¼ˆAhead-of-Timeï¼‰å’Œ Native Imageã€‚</p>
<p>å®ƒèƒ½å¸¦æ¥ï¼š</p>
<ul>
<li>å†·å¯åŠ¨é€Ÿåº¦å¯ç¼©çŸ­åˆ°æ¯«ç§’çº§</li>
<li>å†…å­˜å ç”¨æ˜¾è‘—é™ä½</li>
<li>éƒ¨ç½²å¯ç›´æ¥å˜æˆä¸€ä¸ªå°ä½“ç§¯å¯æ‰§è¡ŒåŒ…</li>
</ul>
<p>å¬èµ·æ¥éå¸¸ç¾å¥½ï¼Œä½†å®é™…è½åœ°ä¼šé‡åˆ°å¤§é‡ç°å®é—®é¢˜ã€‚</p>
<hr/>
<h4 data-id="heading-33">5.1.1 AOT å¹¶ä¸èƒ½ç®€å•â€œæ‰“å¼€å¼€å…³å°±èƒ½ç”¨â€</h4>
<p>ä½¿ç”¨ AOT ä¼šå‘ç°ï¼š</p>
<ul>
<li>éœ€è¦æ‰«æå¤§é‡åå°„ï¼Œç”¨ <code>@NativeHint</code> æˆ– JSON æ‰‹åŠ¨å£°æ˜</li>
<li>ç¬¬ä¸‰æ–¹åº“å¦‚æœæœªé€‚é… GraalVMï¼Œä¼šç›´æ¥æ— æ³•æ„å»º</li>
<li>å‡çº§åçš„é”™è¯¯é€šå¸¸æ˜¯ <strong>â€œæ„å»ºæœŸå´©æºƒâ€</strong>ï¼Œéš¾ä»¥æ’æŸ¥</li>
<li>Framework è¡Œä¸ºå’Œ JVM æ¨¡å¼å˜åŒ–è¾ƒå¤§ï¼Œæµ‹è¯•æˆæœ¬æ¿€å¢</li>
</ul>
<p>è€Œå¤§éƒ¨åˆ†ä¸šåŠ¡åœºæ™¯ï¼š</p>
<ul>
<li>ä½¿ç”¨ JPA</li>
<li>ä½¿ç”¨ MyBatis</li>
<li>ä½¿ç”¨å„ç§åå°„æ’ä»¶</li>
<li>ä½¿ç”¨å„ç§åŠ¨æ€ä»£ç†</li>
<li>ä½¿ç”¨å¤æ‚åºåˆ—åŒ–ï¼ˆJacksonï¼‰</li>
</ul>
<p>æœ¬èº«å°±ä¸é€‚åˆ AOT è¿è¡Œæ¨¡å¼ã€‚</p>
<p>å®é™…ä½“éªŒï¼š</p>
<blockquote>
<p><strong>èƒ½åœ¨ AOT + Native æ¨¡å¼è·‘é€šçš„é¡¹ç›®ï¼Œå¤šæ•°æ˜¯éå¸¸ç®€å•çš„æœåŠ¡ã€‚</strong></p>
</blockquote>
<p>å¯¹äºä¼ä¸šä¸»æµä¸šåŠ¡æ¥è¯´ï¼Œè¿™ä¸ªäº®ç‚¹<strong>çŸ­æœŸä¸æ„æˆé©±åŠ¨åŠ›</strong>ã€‚</p>
<hr/>
<h4 data-id="heading-34">5.1.2 Native Image æ„å»ºæˆæœ¬æé«˜</h4>
<p>æ„å»ºä¸€æ¬¡ Native åŒ…çš„ä½“éªŒï¼š</p>
<ul>
<li>æœ¬åœ°éœ€è¦å¤§é‡ä¾èµ–</li>
<li>æ„å»ºæ—¶é—´å¯èƒ½ 5â€“15 åˆ†é’Ÿï¼ˆå–å†³äºé¡¹ç›®å¤æ‚åº¦ï¼‰</li>
<li>å¤±è´¥çš„è°ƒè¯•æˆæœ¬å¾ˆé«˜</li>
<li>CI/CD Mirror éœ€è¦æ›´æ¢</li>
<li>ä¸é€‚åˆé«˜é¢‘æ„å»ºçš„æœåŠ¡</li>
</ul>
<p>è¿™ä¸ä¼ ç»Ÿ JVM æ¨¡å¼â€œç§’çº§æ„å»ºï¼Œå¿«é€Ÿè¿­ä»£â€çš„ä½“éªŒå®Œå…¨ä¸åŒã€‚</p>
<p>å¯¹ä¸šåŠ¡æ¥è¯´ï¼š</p>
<blockquote>
<p><strong>å¼€å‘æ•ˆç‡å’Œæ„å»ºæˆæœ¬æ¯”å¯åŠ¨é€Ÿåº¦æ›´é‡è¦ã€‚</strong></p>
</blockquote>
<p>å› æ­¤ Native Image ä¸æ˜¯ç”Ÿäº§åŠ›å·¥å…·ï¼Œè€Œæ˜¯<strong>ç‰¹å®šåœºæ™¯ï¼ˆå‡½æ•°è®¡ç®—ã€è¾¹ç¼˜äº‘ï¼‰çš„ä¼˜åŒ–æ‰‹æ®µ</strong>ã€‚</p>
<hr/>
<h3 data-id="heading-35">5.2 è™šæ‹Ÿçº¿ç¨‹ï¼ˆVirtual Threadï¼‰æ²¡æœ‰å½¢æˆå¼ºéœ€æ±‚</h3>
<p>è™šæ‹Ÿçº¿ç¨‹æ˜¯ Java 19/21 çš„äº®ç‚¹ï¼Œè€Œ Boot 3 æ—©å·²æ”¯æŒå®ƒã€‚ä½†ç°å®ä¸šåŠ¡ä¸­ï¼š</p>
<ul>
<li>å¤§éƒ¨åˆ†æœåŠ¡å·²ç»é‡‡ç”¨ Reactorï¼ˆWebFluxï¼‰æˆ–å®Œå–„çš„çº¿ç¨‹æ± æ¨¡å‹</li>
<li>ä¸šåŠ¡ç“¶é¢ˆé€šå¸¸ä¸æ˜¯çº¿ç¨‹æ•°ï¼Œè€Œæ˜¯æ•°æ®åº“/ç¼“å­˜/IO</li>
<li>è™šæ‹Ÿçº¿ç¨‹å¯¹é˜»å¡é€»è¾‘å‹å¥½ï¼Œä½†é˜»å¡æœ¬èº«ä¸æ˜¯æœ€ä½³å®è·µ</li>
<li>ä¸ç°æœ‰ç»„ä»¶ï¼ˆå¦‚ JDBC Driverï¼‰æœ‰æ—¶ä»å­˜åœ¨å…¼å®¹é™åˆ¶</li>
</ul>
<p>å› æ­¤è™šæ‹Ÿçº¿ç¨‹å®é™…ä¸Šï¼š</p>
<blockquote>
<p><strong>æ˜¯æœªæ¥è¶‹åŠ¿ï¼Œä½†ä¸æ˜¯â€œå¿…é¡»å‡çº§æ‰èƒ½ç”¨â€çš„å¿…è¦æ€§ã€‚</strong></p>
</blockquote>
<p>å¯¹å¤§å¤šæ•°ä¼ä¸šï¼š
<strong>â€œèƒ½è·‘å°±è¡Œï¼Œä¸è¦åŠ¨å®ƒâ€</strong> æ˜¯çœŸéœ€æ±‚ã€‚
â€œæ¢æ¨¡å‹å†æµ‹è¯•å…¨éƒ¨é“¾è·¯â€åˆ™æ˜¯é«˜é£é™©è¡Œä¸ºã€‚</p>
<hr/>
<h3 data-id="heading-36">5.3 Java 17 çš„è¯­è¨€ç‰¹æ€§æ˜¯å¥½ï¼Œä½†ä¸æ˜¯ä¸šåŠ¡ç—›ç‚¹</h3>
<p>Java 17ï¼ˆBoot 3 çš„æœ€ä½è¦æ±‚ï¼‰å¸¦æ¥äº†ï¼š</p>
<ul>
<li>Sealed Classes</li>
<li>Records</li>
<li>Pattern Matching</li>
<li>Text Blocks</li>
<li>å¼ºåŒ–çš„ switch æ¨¡å¼åŒ¹é…</li>
<li>æ›´ç°ä»£çš„ JVM ä¼˜åŒ–</li>
</ul>
<p>çœ‹èµ·æ¥å¾ˆé¦™ï¼Œä½†ä¸šåŠ¡ä»£ç æ˜¯å¦éœ€è¦ï¼Ÿ</p>
<p>ç»“è®ºæ˜¯ï¼š<strong>å®Œå…¨å¯ä»¥åœ¨ Java 8/11 ä¸­å†™å‡ºç¨³å®šã€å¯è¯»ã€æ€§èƒ½è¶³å¤Ÿçš„ç”Ÿäº§ç³»ç»Ÿã€‚</strong></p>
<p>ä¼ä¸šä¸ä¼šä¸ºäº†ï¼š</p>
<ul>
<li>æ›´ä¼˜é›…çš„ switch</li>
<li>å°‘å†™ä¸€ç‚¹æ ·æ¿ä»£ç </li>
<li>æ›´ç°ä»£çš„ JVM è™šæ‹Ÿçº¿ç¨‹</li>
</ul>
<p>å»æ‰¿æ‹…ï¼š</p>
<ul>
<li>æ›¿æ¢åŸºç¡€é•œåƒ</li>
<li>å…¨é“¾è·¯é€‚é…</li>
<li>æ‰€æœ‰ç³»ç»Ÿå›å½’</li>
<li>SDK æ”¹é€ </li>
</ul>
<p>è¯­è¨€ç‰¹æ€§ä¸å¤Ÿâ€œç—›ç‚¹çº§åˆ«â€çš„å‡çº§åŠ¨åŠ›ã€‚</p>
<hr/>
<h3 data-id="heading-37">5.4 ç”Ÿæ€æˆç†Ÿåº¦å»¶è¿Ÿï¼Œå¯¼è‡´äº®ç‚¹çŸ­æœŸéš¾è½åœ°</h3>
<p>Boot 3 çš„è®¸å¤šæ–°ç‰¹æ€§ä¾èµ–ï¼š</p>
<ul>
<li>Spring Framework 6</li>
<li>Java 17+</li>
<li>GraalVM / Native Image</li>
<li>Micrometer 3.x</li>
<li>Actuator 3.x</li>
<li>æ–°ç‰ˆ Spring Cloud 2022.x</li>
</ul>
<p>ä½†è¿™äº›ç”Ÿæ€ç»„ä»¶ï¼š</p>
<ul>
<li>åœ¨å‘å¸ƒåˆæœŸç¨³å®šæ€§ä¸è¶³</li>
<li>æœ‰äº›åœ¨ 2023 å¹´ä»æŒç»­ä¿® bug</li>
<li>éƒ¨åˆ†ç»„ä»¶çš„ç¬¬ä¸‰æ–¹æ‰©å±•éœ€è¦æ—¶é—´é€‚é…</li>
<li>æ–‡æ¡£å’Œ StackOverflow è§£å†³æ–¹æ¡ˆç›¸å¯¹å°‘</li>
</ul>
<p>å› æ­¤æ—©æœŸç”¨æˆ·å¾€å¾€è¯„ä»·ï¼š</p>
<blockquote>
<p>â€œé—®é¢˜å¤ªå¤šï¼Œç­‰ 1â€“2 ä¸ªå°ç‰ˆæœ¬å†è¯´ã€‚â€</p>
</blockquote>
<p>ä¼ä¸šä¸ºäº†ç¨³å®šï¼Œä¸ä¼šåœ¨ç”Ÿæ€ä¸æˆç†Ÿæ—¶å¤§è§„æ¨¡è¿ç§»ã€‚</p>
<hr/>
<h3 data-id="heading-38">5.5 æœ€å…³é”®ç‚¹ï¼šSpring Boot 2.x å·²ç»â€œè¶³å¤Ÿå¥½â€</h3>
<p>å¯¹äºå¤§å¤šæ•°ä¸šåŠ¡å›¢é˜Ÿæ¥è¯´ï¼ŒBoot 2.x æä¾›çš„èƒ½åŠ›å·²ç»å®Œå…¨æ»¡è¶³ï¼š</p>
<ul>
<li>ç¨³å®š</li>
<li>ç”Ÿæ€æˆç†Ÿ</li>
<li>æ–‡æ¡£ä¸°å¯Œ</li>
<li>ç¤¾åŒºé—®é¢˜å¤š</li>
<li>æ’ä»¶ä¸ SDK å®Œæ•´å…¼å®¹</li>
<li>å®˜æ–¹é•¿æœŸç»´æŠ¤ï¼ˆé¢„è®¡ç»´æŠ¤è‡³ 2025ï¼‰</li>
</ul>
<p>è¿™è®©è¿ç§»å˜å¾—â€œä¸å…·å¤‡æ€§ä»·æ¯”â€ã€‚</p>
<p>å°¤å…¶æ˜¯ï¼š</p>
<blockquote>
<p><strong>è¿ç§»æˆæœ¬ï¼ˆé«˜ï¼‰ &gt; æ–°ç‰¹æ€§å¸¦æ¥çš„æ”¶ç›Šï¼ˆä½ï¼‰</strong></p>
</blockquote>
<p>åœ¨ä¼ä¸šç¯å¢ƒä¸­ï¼Œè¿™æ ·çš„å‡çº§è‡ªç„¶å°±å¤±å»äº†åŠ¨åŠ›ã€‚</p>
<hr/>
<h2 data-id="heading-39">å…­ã€Spring Boot 3.x ä»€ä¹ˆæ—¶å€™å€¼å¾—å‡çº§ï¼Ÿâ€”â€”åŸºäºæ”¶ç›Šçš„æŠ€æœ¯å†³ç­–æ¨¡å‹</h2>
<p>è™½ç„¶å‰æ–‡è¯¦ç»†åˆ†æäº†å¤§é‡ç»„ç»‡æš‚ç¼“å‡çº§çš„åŸå› ï¼Œä½†è¿™å¹¶ä¸æ„å‘³ç€ Spring Boot 3.x ä¸å€¼å¾—é‡‡ç”¨ã€‚ç›¸åï¼Œåªè¦æ»¡è¶³ç‰¹å®šæ¡ä»¶ï¼Œâ€œæ¨è¿Ÿå‡çº§â€æ‰æ˜¯é£é™©æœ€ä½çš„ç­–ç•¥ï¼›è€Œå½“ç³»ç»Ÿè¿›å…¥ä¸€å®šå¢é•¿é˜¶æ®µæ—¶ï¼Œç»§ç»­åœç•™åœ¨ 2.x æ‰æ˜¯çœŸæ­£æ˜‚è´µçš„é€‰æ‹©ã€‚</p>
<p>æœ¬ç« åŸºäºå·¥ç¨‹å¯é‡åŒ–çš„æŒ‡æ ‡ï¼Œå»ºç«‹ä¸€ä¸ªâ€œå‡çº§è§¦å‘æ¨¡å‹â€ï¼ˆUpgrade Trigger Modelï¼ŒUTMï¼‰ï¼Œå¸®åŠ©å›¢é˜Ÿåˆ¤æ–­æ˜¯å¦åº”å½“è¿›è¡Œè¿ç§»ã€‚</p>
<hr/>
<h3 data-id="heading-40">6.1 è§¦å‘æ¡ä»¶ä¸€ï¼šä½ çš„ç³»ç»Ÿå·²ç»å¼€å§‹å—é™äºæ—§ç‰ˆ JDK/JVM çš„æ€§èƒ½ä¸æ”¯æŒå‘¨æœŸ</h3>
<p>Spring Boot 3.x å¼ºåˆ¶è¦æ±‚ <strong>Java 17+</strong>ï¼Œè¿™ä¸ä»…æ˜¯è¯­æ³•ç‰¹æ€§å˜åŒ–ï¼Œæ›´æ˜¯ <strong>JVM å±‚é¢çš„æ€§èƒ½è´¨å˜</strong>ã€‚</p>
<p>ä½ åº”è¯¥ä¼˜å…ˆå‡çº§ï¼Œå¦‚æœå‡ºç°ä»¥ä¸‹ç‰¹å¾ï¼š</p>
<ul>
<li>GC å‹åŠ›å¼€å§‹é¢‘ç¹å½±å“å»¶è¿Ÿï¼Œä½†æ— æ³•ä½¿ç”¨ JDK17+ çš„ <strong>ZGC / Shenandoah</strong></li>
<li>æœåŠ¡ QPS å¿«é€Ÿå¢é•¿ï¼Œç³»ç»Ÿ CPU é•¿æœŸé£™é«˜ï¼ˆJava 17 å¸¦æ¥å®é™…å¯è§‚çš„æ€§èƒ½æå‡ï¼‰</li>
<li>éœ€è¦åˆ©ç”¨ <strong>Recordã€Switch æ¨¡å¼åŒ¹é…ã€Virtual Threadsï¼ˆJava 21ï¼‰</strong> è¿›è¡Œé‡æ„</li>
</ul>
<blockquote>
<p>ç®€å•æ¥è¯´ï¼š<strong>å¦‚æœä½ æ­£åœ¨ä¸ºæ€§èƒ½èŠ±é’±ï¼ˆæ‰©å®¹/åŠ å®ä¾‹ï¼‰ï¼Œå‡çº§æˆæœ¬ï¼ˆå½“ä½ é‡åˆ°æ¶æ„å‡çº§çš„æ—¶å€™ï¼‰å¾€å¾€æ¯”æ‰©æœºå™¨æ›´ä¾¿å®œ</strong>ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-41">6.2 è§¦å‘æ¡ä»¶äºŒï¼šç³»ç»Ÿå¼€å§‹éœ€è¦ AOTã€Native Imageã€å¯è§‚æµ‹æ€§ç­‰ç°ä»£èƒ½åŠ›</h3>
<p>Spring Boot 3.x æ˜¯ä¸ºä¸‹é¢è¿™äº›åœºæ™¯å‡†å¤‡çš„ï¼š</p>
<ul>
<li>
<p><strong>Native Image</strong>ï¼ˆGraalVMï¼‰ï¼šæ˜¾è‘—å‡å°‘å†·å¯åŠ¨æ—¶é—´ï¼Œéå¸¸é€‚åˆ</p>
<ul>
<li>Serverless</li>
<li>Kubernetes çŸ­ç”Ÿå‘½å‘¨æœŸ Pod</li>
<li>CLI å·¥å…·ä¸è¾¹ç¼˜æœåŠ¡</li>
</ul>
</li>
<li>
<p><strong>AOT</strong>ï¼šæå‰ç”Ÿæˆéƒ¨åˆ†è¿è¡ŒæœŸå¤„ç†ï¼ˆåå°„/ä»£ç†ï¼‰ï¼Œå‡å°‘å¯åŠ¨æ—¶é—´ä¸å†…å­˜</p>
</li>
<li>
<p><strong>Micrometer 1.10+ &amp; Observability API</strong>ï¼šæ–°çš„é“¾è·¯è¿½è¸ªæ¨¡å‹æ›´è§„èŒƒã€æ›´æ˜“æ‰©å±•</p>
</li>
</ul>
<p>å¦‚æœä½ æ­£åœ¨æ„å»ºï¼š</p>
<ul>
<li>é«˜å¹¶å‘ç³»ç»Ÿ</li>
<li>å¾®æœåŠ¡è§„æ¨¡è¶…è¿‡åä¸ª</li>
<li>éƒ¨ç½²åœ¨ Serverless / Function ç¯å¢ƒ</li>
<li>å¯¹å¯åŠ¨é€Ÿåº¦å’Œå†…å­˜æ•æ„Ÿçš„ SaaS äº§å“</li>
</ul>
<p>é‚£ <em>ä¸å‡çº§</em> åè€ŒæŸå¤±æ›´å¤§ã€‚</p>
<hr/>
<h3 data-id="heading-42">6.3 è§¦å‘æ¡ä»¶ä¸‰ï¼šæŠ€æœ¯å€ºåœ¨æŒç»­ç´¯ç§¯ï¼Œå‡çº§éš¾åº¦æ­£åœ¨æŒ‡æ•°çº§å¢é•¿</h3>
<p>é—ç•™ç³»ç»ŸæŠ€æœ¯å€ºå…·æœ‰â€œå¤åˆ©æ•ˆåº”â€ï¼Œè¡¨ç°ä¸ºï¼š</p>
<ul>
<li>é¡¹ç›®ä¾èµ–é“¾è€æ—§ï¼Œå·²ç»å‡ºç°å¤§é‡â€œä¸ç»´æŠ¤åº“â€</li>
<li>æ–°åŠŸèƒ½éš¾ä»¥å¼•å…¥ç°ä»£æ¡†æ¶ï¼ˆSpring AIã€Spring Authorization Server ç­‰ï¼‰</li>
<li>å¼€å‘è€… onboarding æˆæœ¬è¶Šæ¥è¶Šé«˜</li>
<li>CI/CD ä¸éƒ¨ç½²ç¯å¢ƒå¼€å§‹å¯¹æ—§ç‰ˆæœ¬äº§ç”Ÿä¸å…¼å®¹ï¼ˆå¦‚æ—§ç‰ˆæ„å»ºæ’ä»¶ï¼‰</li>
</ul>
<p><strong>è¶Šæ™šå‡çº§ï¼Œæˆæœ¬è¶Šä¸æ˜¯çº¿æ€§å¢é•¿ï¼Œè€Œæ˜¯å‘ˆç°æŒ‡æ•°å¼è†¨èƒ€</strong>ã€‚</p>
<p>å®é™…æµ‹ç®—ä¸­å¸¸è§çš„ç°è±¡ï¼š</p>





















<table><thead><tr><th>ç³»ç»ŸçŠ¶æ€</th><th>å‡çº§æˆæœ¬</th></tr></thead><tbody><tr><td>Spring Boot 2.6 â†’ 2.7</td><td>è¾ƒä½ï¼Œå¯æ§</td></tr><tr><td>Spring Boot 2.6 â†’ 3.0</td><td>ä¸­é«˜ï¼Œéœ€è¦å¤§è§„æ¨¡ namespace æ”¹åŠ¨</td></tr><tr><td>Spring Boot 2.0 â†’ 3.0</td><td>æé«˜ï¼Œå¾€å¾€éœ€è¦â€œé‡æ–°æ­å»ºé¡¹ç›®éª¨æ¶â€</td></tr></tbody></table>
<blockquote>
<p>å›¢é˜Ÿåº”è¯¥å®šæœŸåšä¸€æ¬¡â€œå‡çº§çª—å£è¯„ä¼°â€ï¼Œé¿å…è¿›å…¥æ— æ³•å‡çº§çš„çŠ¶æ€ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-43">6.4 è§¦å‘æ¡ä»¶å››ï¼šä½ çš„ç»„ç»‡æ­£åœ¨ç»å†æ¶æ„è°ƒæ•´æˆ–å¾®æœåŠ¡æ‹†åˆ†</h3>
<p>é‡æ„ã€æ‹†åˆ†ã€æ¨¡å—åŒ–æ”¹é€ æ˜¯æœ€é€‚åˆå‡çº§çš„æ—¶é—´ç‚¹ï¼Œå› ä¸ºï¼š</p>
<ul>
<li>åæ­£è¦æ”¹ä»£ç  â†’ å¯ä»¥é¡ºå¸¦è¿ç§»åˆ° Spring Boot 3.x</li>
<li>å­æ¨¡å—å¯ä»¥å…ˆå‡çº§ï¼Œä¸»ç³»ç»Ÿä¿æŒä¸åŠ¨ â†’ é£é™©å¯æ§</li>
<li>é€‚åˆé¡ºä¾¿å¼•å…¥ Java 17 çš„æ–°ç¼–ç¨‹æ¨¡å‹</li>
</ul>
<p><strong>è¿ç§»æœ€å¥½ä¸æ¶æ„å˜åŒ–ä¸€èµ·åšï¼Œè€Œä¸æ˜¯åœ¨ç³»ç»Ÿç¨³å®šæœŸåšã€‚</strong></p>
<hr/>
<h3 data-id="heading-44">åˆ¤æ–­é€»è¾‘æ¨¡å‹ï¼ˆUTMï¼‰</h3>
<p>å½“é‡åˆ°ä¸‹é¢æƒ…å†µæ—¶ï¼Œéœ€è¦è€ƒè™‘å‡çº§ Spring Boot 3.x ï¼š</p>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> æ€§èƒ½æˆ–å¯è§‚æµ‹æ€§é‡åˆ°ç“¶é¢ˆ</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> æœ‰ Native/AOT/Modern JVM çš„éœ€æ±‚</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> æŠ€æœ¯å€ºå¿«é€Ÿç´¯ç§¯</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> æ­£åœ¨è¿›è¡Œæ¶æ„æ›´è¿­æˆ–æœåŠ¡æ‹†åˆ†</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> æ–°ç‰¹æ€§ï¼ˆå¦‚ Spring AIï¼‰å¿…é¡»ä¾èµ– 3.x</li>
</ul>
<p>åªè¦æ»¡è¶³ä»¥ä¸Šä»»æ„ä¸¤æ¡ï¼Œå‡çº§ä»â€œå¯é€‰â€å˜ä¸ºâ€œæ¨èâ€ï¼›æ»¡è¶³ä¸‰æ¡ä»¥ä¸Šï¼Œå‡çº§å‡ ä¹æ˜¯â€œå¿…é€‰â€ã€‚</p>
<hr/>
<h2 data-id="heading-45">ä¸ƒã€ç»“è¯­ï¼šSpring Boot 3.x çš„å‡çº§ä¸æ˜¯å†²åŠ¨ï¼Œè€Œæ˜¯å·¥ç¨‹ç®¡ç†</h2>
<p>Spring Boot 3.0 çš„å‡çº§äº‰è®®ï¼Œè¡¨é¢ä¸Šçœ‹æ˜¯â€œæŠ€æœ¯ç¤¾åŒºåˆ†æ­§â€ï¼Œä½†æœ¬è´¨ä¸Šæ˜¯ä¸€åœº<strong>å·¥ç¨‹ç®¡ç†ä¸é£é™©æ§åˆ¶çš„åšå¼ˆ</strong>ã€‚</p>
<p>å¯¹æ–°é¡¹ç›®è€Œè¨€â€”â€”
<strong>3.x æ˜¯æœ€ä½³èµ·ç‚¹ï¼Œæ²¡æœ‰ç†ç”±é€‰æ‹©è½åç‰ˆæœ¬ã€‚</strong></p>
<p>å¯¹æˆç†Ÿç³»ç»Ÿè€Œè¨€â€”â€”
<strong>ç¨³å®šä¼˜å…ˆã€å…¼å®¹ä¼˜å…ˆã€ä¸šåŠ¡éœ€æ±‚ä¼˜å…ˆï¼›è°¨æ…ä¸æ˜¯ä¿å®ˆï¼Œè€Œæ˜¯ä¸“ä¸šã€‚</strong></p>
<p>å¯¹æ•´ä¸ªè¡Œä¸šè€Œè¨€â€”â€”
Spring Boot 3.x çš„å‡ºç°æ ‡å¿—ç€ Java ç”Ÿæ€å…¨é¢è¿›å…¥â€œå JavaEE æ—¶ä»£â€ï¼š</p>
<ul>
<li>Jakarta EE æˆä¸ºä¸»æµå‘½åç©ºé—´</li>
<li>Java 17+ æˆä¸ºäº‹å®æ ‡å‡†</li>
<li>åŸç”Ÿé•œåƒä¸ AOT è¿›å…¥ä¼ä¸šçº§æ¡†æ¶æ ¸å¿ƒ</li>
<li>å¯è§‚æµ‹æ€§ã€å¯ä¿¡åº¦ä¸æ€§èƒ½æˆä¸ºé¡¶å±‚è®¾è®¡</li>
</ul>
<p>è¿™æ„å‘³ç€ï¼š
<strong>å³ä¾¿ä½ ç°åœ¨ä¸å‡çº§ï¼Œä½ è¿Ÿæ—©è¦å‡çº§ã€‚</strong>
ä½ çš„å›¢é˜Ÿèƒ½åšçš„ä¸æ˜¯é¿å…å‡çº§ï¼Œè€Œæ˜¯å†³å®šâ€”â€”
<strong>ä»€ä¹ˆæ—¶å€™å‡çº§ã€ä»¥ä»€ä¹ˆæ–¹å¼å‡çº§ã€å¦‚ä½•æŠŠé£é™©å‹åˆ°æœ€ä½ã€‚</strong></p>
<p>æœ€ç»ˆï¼Œä¼˜ç§€çš„å·¥ç¨‹å¸ˆä¸ä¼˜ç§€çš„å›¢é˜Ÿéƒ½å¿…é¡»é¢å¯¹æŠ€æœ¯å€ºåŠ¡ï¼Œä½†åªæœ‰ä¼˜ç§€çš„å›¢é˜Ÿèƒ½åœ¨æ­£ç¡®çš„æ—¶æœºè§£å†³å®ƒï¼Œè€Œä¸æ˜¯è®©å®ƒæ‹–å®ç³»ç»Ÿçš„æœªæ¥ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¤§æ•°æ®-182 Elasticsearch å€’æ’ç´¢å¼•åº•å±‚æ‹†è§£ï¼šTerms å­—å…¸ã€FSTã€SkipList ä¸ Lucene ç´¢å¼•æ–‡ä»¶]]></title>    <link>https://juejin.cn/post/7582815307439734835</link>    <guid>https://juejin.cn/post/7582815307439734835</guid>    <pubDate>2025-12-13T02:50:19.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582815307439734835" data-draft-id="7582809606067634202" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¤§æ•°æ®-182 Elasticsearch å€’æ’ç´¢å¼•åº•å±‚æ‹†è§£ï¼šTerms å­—å…¸ã€FSTã€SkipList ä¸ Lucene ç´¢å¼•æ–‡ä»¶"/> <meta itemprop="keywords" content="åç«¯,å¤§æ•°æ®,Elasticsearch"/> <meta itemprop="datePublished" content="2025-12-13T02:50:19.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ­¦å­åº·"/> <meta itemprop="url" content="https://juejin.cn/user/149189314230039"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¤§æ•°æ®-182 Elasticsearch å€’æ’ç´¢å¼•åº•å±‚æ‹†è§£ï¼šTerms å­—å…¸ã€FSTã€SkipList ä¸ Lucene ç´¢å¼•æ–‡ä»¶
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/149189314230039/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ­¦å­åº·
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-13T02:50:19.000Z" title="Sat Dec 13 2025 02:50:19 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»13åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">TL;DR</h2>
<p>åœºæ™¯ï¼šæƒ³æŠŠ ESã€Œä¸ºä»€ä¹ˆå¿«/ä¸ºä»€ä¹ˆå å†…å­˜/ä¸ºä»€ä¹ˆå†™å…¥è¦ mergeã€è®²æ¸…æ¥šï¼Œå¿…é¡»ä¸‹æ²‰åˆ° Lucene çš„å€’æ’ç´¢å¼•ä¸æ–‡ä»¶ç»“æ„
ç»“è®ºï¼šæŸ¥è¯¢é“¾è·¯æœ¬è´¨æ˜¯ Term æŸ¥æ‰¾ï¼ˆtim/tip + FSTï¼‰â†’ postings è¯»å–ï¼ˆdoc ç­‰ï¼‰â†’ postings åˆå¹¶ï¼ˆSkipList/è·³è·ƒï¼‰
äº§å‡ºï¼šä¸€å¥—ä»æ¦‚å¿µåˆ°æ–‡ä»¶åç¼€ã€åˆ°æ•°æ®ç»“æ„é€‰æ‹©ã€åˆ°æŸ¥è¯¢æ‰§è¡Œçš„å¯å¤ç”¨è®²è§£æ¡†æ¶</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d937432ec0ba4eaa94d6ed7fdf2134bc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766199018&amp;x-signature=Ph%2FrjxkbrTlGLY4jCYV78Fmo3wo%3D" alt="å¤§æ•°æ®-182 Elasticsearch å€’æ’ç´¢å¼•åº•å±‚æ‹†è§£ï¼šTerms å­—å…¸ã€FSTã€SkipList ä¸ Lucene ç´¢å¼•æ–‡ä»¶" loading="lazy"/></p>
<h2 data-id="heading-1">ç‰ˆæœ¬çŸ©é˜µ</h2>





























<table><thead><tr><th>ç±»å‹</th><th>ç‰ˆæœ¬/è¯´æ˜</th><th>çŠ¶æ€</th><th>ç”¨é€”è¯´æ˜</th></tr></thead><tbody><tr><td>Lucene</td><td>æœ€æ–°ç‰ˆæœ¬ï¼š10.3.2</td><td>æ–‡æ¡£æ ¸å¯¹ï¼ˆæœªå®æµ‹ï¼‰</td><td>ç”¨äºâ€œLucene å½“å‰ç‰ˆæœ¬/å¹´ä»½â€è¡¨è¿°</td></tr><tr><td>Elasticsearch</td><td>9.2.2 å·²å‘å¸ƒ</td><td>æ–‡æ¡£æ ¸å¯¹ï¼ˆæœªå®æµ‹ï¼‰</td><td>ç”¨äºâ€œES 9.x å·²è¿›å…¥ä¸»çº¿â€çš„è¡¨è¿°</td></tr><tr><td>ES è¿ç§»è·¯å¾„</td><td>è¿ç§»åˆ° 9.0 éœ€å…ˆåˆ°æœ€åä¸€ä¸ª 8.x</td><td>æ–‡æ¡£æ ¸å¯¹ï¼ˆæœªå®æµ‹ï¼‰</td><td>ç”¨äºâ€œ8â†’9 å‡çº§è·¯å¾„â€æé†’</td></tr></tbody></table>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3ea98eb79a614e13b8f30fdd67f8ec65~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766199018&amp;x-signature=MUFnrIiTtLJbbHeWF7r8X4flxHg%3D" alt="Elasticsearch" loading="lazy"/></p>
<h2 data-id="heading-2">Elasticsearch æ•°æ®ç»“æ„</h2>
<h3 data-id="heading-3">å€’æ’ç´¢å¼•</h3>
<h4 data-id="heading-4">æ¦‚å¿µæ¦‚è¿°</h4>
<p>å€’æ’ç´¢å¼•æ˜¯å…¨æ–‡æ£€ç´¢çš„æ ¹åŸºï¼Œç†è§£äº†å€’æ’ç´¢å¼•ä¹‹åæ‰èƒ½ç®—æ˜¯å…¥é—¨äº†å…¨æ–‡æ£€ç´¢çš„é¢†åŸŸï¼Œå€’æ’ç´¢å¼•çš„æ¦‚å¿µå¾ˆç®€å•ï¼Œä¹Ÿå¾ˆå¥½ç†è§£ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a1c373176d6d4dff88825e7e5a419ae1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766199018&amp;x-signature=ntKl1QeUSr6hycGMuZ%2B16glscnY%3D" alt="Elasticsearch å€’æ’ç´¢å¼•" loading="lazy"/>
å€’æ’ç´¢å¼•ï¼ˆInverted Indexï¼‰æ˜¯ä¿¡æ¯æ£€ç´¢ç³»ç»Ÿä¸­å¸¸ç”¨çš„æ•°æ®ç»“æ„ï¼Œå®ƒç”±ä¸¤ä¸ªæ ¸å¿ƒéƒ¨åˆ†ç»„æˆï¼š</p>
<ol>
<li>
<p><strong>ç´¢å¼•è¡¨ï¼ˆTerms Dictionaryï¼‰</strong>ï¼š</p>
<ul>
<li>ç”±æ–‡æ¡£é›†åˆä¸­æ‰€æœ‰ç‹¬ç«‹çš„å…³é”®è¯ï¼ˆTermï¼‰ç»„æˆçš„æœ‰åºåˆ—è¡¨</li>
<li>æ¯ä¸ªTermé€šå¸¸æ˜¯ç»è¿‡åˆ†è¯å’Œæ ‡å‡†åŒ–å¤„ç†åçš„ç»“æœï¼ˆå¦‚è½¬ä¸ºå°å†™ã€å»é™¤åœç”¨è¯ç­‰ï¼‰</li>
<li>åœ¨å®é™…å®ç°ä¸­ï¼Œç´¢å¼•è¡¨å¸¸é‡‡ç”¨Bæ ‘æˆ–å“ˆå¸Œè¡¨ç­‰æ•°æ®ç»“æ„æ¥åŠ é€ŸæŸ¥æ‰¾</li>
<li>ç¤ºä¾‹ï¼šå¯¹äºæ–‡æ¡£"the quick brown fox"ï¼Œå¤„ç†åå¯èƒ½å¾—åˆ°["quick", "brown", "fox"]ä¸‰ä¸ªTerm</li>
</ul>
</li>
<li>
<p><strong>å€’æ’è¡¨ï¼ˆPosting Listï¼‰</strong>ï¼š</p>
<ul>
<li>è®°å½•æ¯ä¸ªTermåœ¨å“ªäº›æ–‡æ¡£ä¸­å‡ºç°çš„ä¿¡æ¯é›†åˆ</li>
<li>æ¯ä¸ªPostingé€šå¸¸åŒ…å«ï¼š
<ul>
<li>æ–‡æ¡£IDï¼ˆDocIDï¼‰</li>
<li>è¯é¢‘ï¼ˆTerm Frequencyï¼‰</li>
<li>ä½ç½®ä¿¡æ¯ï¼ˆPositionï¼Œç”¨äºçŸ­è¯­æŸ¥è¯¢ï¼‰</li>
</ul>
</li>
<li>ç¤ºä¾‹ï¼šTerm"fox"çš„Posting Listå¯èƒ½æ˜¯[(doc1, 2, [5,12]), (doc3, 1, [7])]ï¼Œè¡¨ç¤ºåœ¨doc1ä¸­å‡ºç°2æ¬¡ï¼ˆä½ç½®5å’Œ12ï¼‰ï¼Œåœ¨doc3ä¸­å‡ºç°1æ¬¡ï¼ˆä½ç½®7ï¼‰</li>
</ul>
</li>
</ol>
<p>åœ¨å®é™…åº”ç”¨ä¸­ï¼ˆå¦‚Elasticsearchã€Luceneç­‰æœç´¢å¼•æ“ï¼‰ï¼š</p>
<ul>
<li>ç´¢å¼•è¡¨é€šå¸¸å­˜å‚¨åœ¨å†…å­˜ä¸­ä»¥å®ç°å¿«é€ŸæŸ¥æ‰¾</li>
<li>å€’æ’è¡¨é‡‡ç”¨å‹ç¼©å­˜å‚¨æŠ€æœ¯ï¼ˆå¦‚å·®å€¼ç¼–ç ã€ä½å›¾ç­‰ï¼‰æ¥å‡å°‘å­˜å‚¨ç©ºé—´</li>
<li>è¿˜ä¼šç»´æŠ¤é¢å¤–çš„ç»Ÿè®¡ä¿¡æ¯ï¼ˆå¦‚DF-æ–‡æ¡£é¢‘ç‡ï¼‰ç”¨äºæŸ¥è¯¢ä¼˜åŒ–</li>
</ul>
<h4 data-id="heading-5">å¦‚æœå­˜å‚¨ä¸€ä¸ªå€’æ’ç´¢å¼•æ•°æ®ï¼Ÿé€‰æ‹©å“ªç§æ•°æ®ç»“æ„ï¼Ÿ</h4>
<p>å…¨æ–‡æœç´¢å¼•æ“é€šå¸¸æ˜¯éœ€è¦å­˜å‚¨å¤§é‡çš„æ–‡æœ¬ï¼Œä¸ä»…ä»…æ˜¯Postingså¯èƒ½ä¼šæ˜¯éå¸¸å·¨å¤§ï¼ŒåŒæ ·Dictionaryçš„å¤§å°æå¯èƒ½ä¹Ÿæ˜¯éå¸¸åºå¤§ï¼ŒçœŸæ­£çš„æœç´¢å¼•æ“çš„å€’æ’ç´¢å¼•å®ç°éƒ½æå…¶å¤æ‚ï¼Œå› ä¸ºå®ƒç›´æ¥å½±å“äº†æœç´¢æ€§èƒ½å’ŒåŠŸèƒ½ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0fd59f7976674d62b27b1a48d8d0f3d6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766199018&amp;x-signature=GXfbSCit5Zqtdjlx7hWtRkA65oU%3D" alt="Elasticsearch å­˜å‚¨æ•°æ®" loading="lazy"/>
Luceneä½œä¸ºä¸€æ¬¾é«˜æ€§èƒ½çš„å…¨æ–‡æ£€ç´¢å¼•æ“åº“ï¼Œå…¶å®ç°é‡‡ç”¨äº†å¤šé¡¹å…ˆè¿›æŠ€æœ¯æ¥ä¿è¯ç´¢å¼•çš„é«˜æ•ˆæ€§å’Œå¯é æ€§ã€‚ä»¥ä¸‹æ˜¯å…¶æ ¸å¿ƒç‰¹æ€§çš„è¯¦ç»†è¯´æ˜ï¼š</p>
<ol>
<li>ç´¢å¼•æŒä¹…åŒ–æœºåˆ¶ï¼š</li>
</ol>
<ul>
<li>é‡‡ç”¨åˆ†æ®µ(segment)å­˜å‚¨ç­–ç•¥ï¼Œæ¯ä¸ªsegmentéƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„å€’æ’ç´¢å¼•</li>
<li>æ”¯æŒå°†ç´¢å¼•æ•°æ®åºåˆ—åŒ–ä¸ºäºŒè¿›åˆ¶æ ¼å¼å­˜å‚¨åœ¨ç£ç›˜ä¸Š</li>
<li>ä½¿ç”¨ç‰¹æ®Šçš„æ–‡ä»¶æ ¼å¼(å¦‚.fdt, .fdxç­‰)ç»„ç»‡ç´¢å¼•æ•°æ®</li>
<li>æ”¯æŒç´¢å¼•å‹ç¼©ä»¥å‡å°‘å­˜å‚¨ç©ºé—´å ç”¨</li>
</ul>
<ol start="2">
<li>é«˜æ€§èƒ½å†™å…¥è®¾è®¡ï¼š</li>
</ol>
<ul>
<li>é‡‡ç”¨å†™å…¥ç¼“å†²æœºåˆ¶ï¼Œå…ˆåœ¨å†…å­˜ä¸­æ„å»ºç´¢å¼•</li>
<li>å®šæœŸå°†å†…å­˜ä¸­çš„ç´¢å¼•flushåˆ°ç£ç›˜å½¢æˆæ–°çš„segment</li>
<li>æ”¯æŒè¿‘å®æ—¶çš„NRT(Near Real-Time)æœç´¢</li>
<li>é€šè¿‡åˆå¹¶(merge)ç­–ç•¥ä¼˜åŒ–segmentæ•°é‡</li>
</ul>
<ol start="3">
<li>æ ¸å¿ƒæ•°æ®ç»“æ„ä¸ç®—æ³•ï¼š</li>
</ol>
<ul>
<li>ä½¿ç”¨FST(Finite State Transducer)å®ç°é«˜æ•ˆè¯å…¸æŸ¥æ‰¾</li>
<li>é‡‡ç”¨è·³è¡¨(SkipList)åŠ é€Ÿå€’æ’é“¾çš„éå†</li>
<li>å®ç°åŸºäºBM25çš„è¯„åˆ†ç®—æ³•</li>
<li>æ”¯æŒå¤šç§æŸ¥è¯¢ä¼˜åŒ–æŠ€æœ¯ï¼Œå¦‚æŸ¥è¯¢é‡å†™å’Œç¼“å­˜</li>
</ul>
<ol start="4">
<li>å®é™…åº”ç”¨åœºæ™¯ï¼š</li>
</ol>
<ul>
<li>ç”µå•†å¹³å°çš„å•†å“æœç´¢(å¦‚Amazon)</li>
<li>ä¼ä¸šæ–‡æ¡£ç®¡ç†ç³»ç»Ÿ</li>
<li>æ—¥å¿—åˆ†æç³»ç»Ÿ(å¦‚ELK Stack)</li>
<li>ç¤¾äº¤åª’ä½“çš„å†…å®¹æ£€ç´¢</li>
</ul>
<p>Luceneé€šè¿‡è¿™ç§ç²¾å¿ƒè®¾è®¡çš„æ¶æ„ï¼Œåœ¨ä¿è¯æ•°æ®æŒä¹…åŒ–çš„åŒæ—¶ï¼Œå®ç°äº†æ¥è¿‘å†…å­˜çº§åˆ«çš„æœç´¢æ€§èƒ½ï¼Œä½¿å…¶æˆä¸ºä¼—å¤šå•†ä¸šæœç´¢ç³»ç»Ÿçš„åŸºç¡€å¼•æ“ã€‚</p>
<h4 data-id="heading-6">Luceneç´¢å¼•æ–‡ä»¶åˆ†æ</h4>
<p>Lucene æ˜¯ä¸€ä¸ªåŸºäº Java çš„å¼€æºå…¨æ–‡æ£€ç´¢åº“ï¼Œç”± Doug Cutting äº 1999 å¹´åˆ›å»ºã€‚Lucene çš„æ ¸å¿ƒåŠŸèƒ½æ˜¯ä¸ºåº”ç”¨ç¨‹åºæä¾›é«˜æ•ˆçš„æ–‡æœ¬ç´¢å¼•å’Œæœç´¢èƒ½åŠ›ï¼Œå®ƒå¯ä»¥å¸®åŠ©å¼€å‘è€…æ„å»ºå¿«é€Ÿã€å¯æ‰©å±•çš„å…¨æ–‡æœç´¢åŠŸèƒ½ã€‚Lucene æœ¬èº«æ˜¯ä¸€ä¸ªä½çº§åº“ï¼Œå¹¶ä¸æä¾›å›¾å½¢ç•Œé¢æˆ–é«˜çº§åº”ç”¨åŠŸèƒ½ï¼Œå®ƒæ›´å¤šæ˜¯ä½œä¸ºä¸€ä¸ªåº•å±‚å·¥å…·è¢«é›†æˆåˆ°å…¶ä»–ç³»ç»Ÿæˆ–æ¡†æ¶ä¸­ã€‚</p>
<ul>
<li>
<p>ç´¢å¼•ï¼ˆIndexï¼‰ï¼š ç´¢å¼•æ˜¯ Lucene çš„æ ¸å¿ƒç»„ä»¶ä¹‹ä¸€ï¼Œå®ƒæ˜¯ä¸ºäº†åŠ é€Ÿæœç´¢è¿‡ç¨‹è€Œåˆ›å»ºçš„æ•°æ®ç»“æ„ã€‚Lucene ä¼šå°†æ–‡æ¡£ä¸­çš„æ–‡æœ¬åˆ†è§£ä¸ºç§°ä¸º "å€’æ’ç´¢å¼•"ï¼ˆinverted indexï¼‰çš„å½¢å¼ã€‚å€’æ’ç´¢å¼•ç±»ä¼¼äºä¹¦çš„ç´¢å¼•é¡µï¼Œå®ƒåˆ—å‡ºäº†æ¯ä¸ªå…³é”®å­—åœ¨æ–‡æ¡£ä¸­çš„ä½ç½®ã€‚è¿™æ ·ï¼Œå½“ç”¨æˆ·æœç´¢ç‰¹å®šçš„è¯æˆ–çŸ­è¯­æ—¶ï¼ŒLucene å¯ä»¥å¿«é€ŸæŸ¥æ‰¾åˆ°åŒ…å«è¯¥è¯çš„æ–‡æ¡£ã€‚</p>
</li>
<li>
<p>æ–‡æ¡£ï¼ˆDocumentï¼‰ï¼š åœ¨ Lucene ä¸­ï¼Œæ–‡æ¡£æ˜¯æœç´¢å’Œç´¢å¼•çš„åŸºæœ¬å•å…ƒã€‚æ¯ä¸ªæ–‡æ¡£ç”±è‹¥å¹²å­—æ®µï¼ˆFieldï¼‰ç»„æˆï¼Œå­—æ®µå¯ä»¥åŒ…å«ä¸åŒç±»å‹çš„æ•°æ®ï¼Œæ¯”å¦‚æ ‡é¢˜ã€å†…å®¹ã€æ—¥æœŸç­‰ã€‚æ–‡æ¡£åœ¨ Lucene ä¸­é€šå¸¸ä¸æ•°æ®åº“ä¸­çš„ä¸€æ¡è®°å½•ç›¸å¯¹åº”ã€‚</p>
</li>
<li>
<p>å­—æ®µï¼ˆFieldï¼‰ï¼š å­—æ®µæ˜¯æ–‡æ¡£çš„ç»„æˆéƒ¨åˆ†ï¼Œæ¯ä¸ªå­—æ®µå¯ä»¥å­˜å‚¨ä¸åŒç±»å‹çš„æ•°æ®ï¼Œæ¯”å¦‚å­—ç¬¦ä¸²ã€æ•°å­—ã€æ—¥æœŸç­‰ã€‚å­—æ®µå¯ä»¥æŒ‡å®šæ˜¯å¦è¢«ç´¢å¼•ï¼Œæ˜¯å¦è¢«å­˜å‚¨ï¼Œä»¥åŠæ˜¯å¦å¯ä»¥è¢«æœç´¢ç­‰ã€‚</p>
</li>
<li>
<p>åˆ†è¯å™¨ï¼ˆAnalyzerï¼‰ï¼š åˆ†è¯å™¨è´Ÿè´£å°†è¾“å…¥çš„æ–‡æœ¬åˆ†è§£ä¸ºè¯æ±‡å•å…ƒï¼ˆTokenï¼‰ï¼Œè¿™äº›è¯æ±‡å•å…ƒæ˜¯ Lucene ç”¨æ¥ç´¢å¼•å’Œæœç´¢çš„åŸºç¡€ã€‚ä¾‹å¦‚ï¼Œå¯¹äºä¸­æ–‡æ–‡æœ¬ï¼Œåˆ†è¯å™¨éœ€è¦å°†è¿ç»­çš„å­—ç¬¦åˆ‡åˆ†ä¸ºæœ‰æ„ä¹‰çš„è¯æ±‡ï¼›å¯¹äºè‹±æ–‡æ–‡æœ¬ï¼Œå®ƒä¼šç§»é™¤æ ‡ç‚¹ç¬¦å·ã€è½¬æ¢å¤§å°å†™ç­‰ã€‚ä¸åŒçš„è¯­è¨€å’Œéœ€æ±‚å¯èƒ½éœ€è¦ä¸åŒçš„åˆ†è¯å™¨ã€‚</p>
</li>
<li>
<p>æŸ¥è¯¢ï¼ˆQueryï¼‰ï¼š Lucene æä¾›äº†å¤šç§ç±»å‹çš„æŸ¥è¯¢ï¼ˆQueryï¼‰ï¼Œå…è®¸ç”¨æˆ·æ„å»ºå¤æ‚çš„æœç´¢é€»è¾‘ï¼Œæ¯”å¦‚å¸ƒå°”æŸ¥è¯¢ï¼ˆBoolean Queryï¼‰ã€çŸ­è¯­æŸ¥è¯¢ï¼ˆPhrase Queryï¼‰ã€èŒƒå›´æŸ¥è¯¢ï¼ˆRange Queryï¼‰ç­‰ã€‚æŸ¥è¯¢çš„ä½œç”¨æ˜¯é€šè¿‡åŒ¹é…å€’æ’ç´¢å¼•æ¥æŸ¥æ‰¾ç¬¦åˆæ¡ä»¶çš„æ–‡æ¡£ã€‚</p>
</li>
<li>
<p>è¯„åˆ†ï¼ˆScoringï¼‰ï¼š Lucene å¯¹æœç´¢ç»“æœè¿›è¡Œè¯„åˆ†ï¼Œæ ¹æ®æ–‡æ¡£ä¸æŸ¥è¯¢çš„åŒ¹é…ç¨‹åº¦è¿”å›ä¸€ä¸ªç›¸å…³æ€§å¾—åˆ†ï¼ˆRelevance Scoreï¼‰ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒLucene ä½¿ç”¨ TF-IDFï¼ˆè¯é¢‘-é€†æ–‡æ¡£é¢‘ç‡ï¼‰ç®—æ³•æ¥è®¡ç®—å¾—åˆ†ï¼Œç¡®ä¿æ›´ç›¸å…³çš„æ–‡æ¡£æ’åœ¨æœç´¢ç»“æœçš„å‰é¢ã€‚</p>
</li>
<li>
<p>ç´¢å¼•å™¨ï¼ˆIndexerï¼‰ï¼š ç´¢å¼•å™¨è´Ÿè´£å°†æ–‡æ¡£ä¸­çš„æ•°æ®è½¬åŒ–ä¸ºå€’æ’ç´¢å¼•ã€‚Lucene çš„ç´¢å¼•è¿‡ç¨‹åŒ…æ‹¬å°†æ–‡æ¡£åˆ†è§£ä¸ºè¯æ±‡å•å…ƒï¼Œè¿‡æ»¤æ‰ä¸å¿…è¦çš„è¯ï¼ˆå¦‚åœç”¨è¯ï¼‰ï¼Œç„¶åå°†æœ‰æ„ä¹‰çš„è¯æ±‡å­˜å…¥å€’æ’ç´¢å¼•ä¸­ã€‚ç´¢å¼•å™¨è¿˜è´Ÿè´£å®šæœŸä¼˜åŒ–ç´¢å¼•ä»¥æé«˜æœç´¢æ•ˆç‡ã€‚</p>
</li>
<li>
<p>å­˜å‚¨ä¸åˆå¹¶ï¼ˆStorage and Mergingï¼‰ï¼š Lucene çš„ç´¢å¼•å­˜å‚¨æ˜¯åˆ†æ®µå¼çš„ï¼Œæ¯æ¬¡ç´¢å¼•æ“ä½œä¼šåˆ›å»ºæ–°çš„æ®µï¼ˆsegmentï¼‰ã€‚Lucene ä¼šå®šæœŸåˆå¹¶è¿™äº›æ®µä»¥å‡å°‘ç¢ç‰‡ã€æé«˜æ€§èƒ½ã€‚æ®µæ˜¯ä¸å¯å˜çš„ï¼Œè¿™æ ·çš„è®¾è®¡ä½¿å¾— Lucene èƒ½å¤Ÿé«˜æ•ˆåœ°è¿›è¡Œå¹¶å‘æœç´¢å’Œç´¢å¼•æ“ä½œã€‚</p>
</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d9696145108546719b92bfa79c6e58f2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766199018&amp;x-signature=0nfv0qS3ifq7ev3CLmR7eBVzytk%3D" alt="Elasticsearch ç´¢å¼•æ–‡ä»¶åˆ†æ" loading="lazy"/>
Luceneå°†ç´¢å¼•æ–‡ä»¶æ‹†åˆ†ä¸ºäº†å¤šä¸ªæ–‡ä»¶ï¼Œè¿™é‡Œä»…è®¨è®ºå€’æ’ç´¢å¼•çš„éƒ¨åˆ†ï¼š</p>
<ul>
<li>tipï¼šLuceneæŠŠç”¨äºå­˜å‚¨Termsçš„ç´¢å¼•æ–‡ä»¶å«Terms Indexï¼Œå®ƒçš„åç¼€æ˜¯ï¼štip</li>
<li>docï¼šæŠŠPostingsä¿¡æ¯åˆ†åˆ«å­˜å‚¨åœ¨docï¼Œåˆ†åˆ«è®°å½•Postingsçš„DocIdä¿¡æ¯å’ŒTermè¯é¢‘ä¿¡æ¯</li>
<li>timï¼šTerms Dictionaryçš„æ–‡ä»¶åç¼€ç§°ä¸ºtimï¼Œå®ƒæ˜¯Termä¸Positingsçš„å…³ç³»çº½å¸¦ï¼Œå­˜å‚¨äº†Termå’Œå…¶å¯¹åº”çš„Postingsæ–‡ä»¶æŒ‡é’ˆ</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c281cc3e7f574815a0b22f9b92f83316~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766199018&amp;x-signature=pyjDyv%2FzXxYbxX3kw%2BzJbxqaDW0%3D" alt="Elasticsearch ç´¢å¼•åˆ†æ" loading="lazy"/></p>
<ul>
<li>Term Dictionaryï¼šæŠŠTermæŒ‰å­—å…¸æ’åºï¼Œç„¶åç”¨äºŒåˆ†æ³•æŸ¥æ‰¾Termï¼ˆå­˜åœ¨ç£ç›˜ï¼‰åœ¨Luceneï¼ŒTerms Dictionaryè¢«å­˜å‚¨åœ¨ tim æ–‡ä»¶ä¸Šï¼Œå½“ä¸€ä¸ªSegmentçš„æ–‡æ¡£æ•°é‡è¶Šæ¥è¶Šå¤šçš„åŒæ—¶ Dictionary çš„è¯æ±‡ä¹Ÿä¼šè¶Šæ¥è¶Šå¤šï¼Œé‚£æŸ¥è¯¢æ•ˆç‡å¿…ç„¶ä¹Ÿä¼šè¶Šæ¥è¶Šæ…¢ã€‚å¦‚æœæœ‰ä¸€ä¸ªå¾ˆå¥½çš„ç»“æ„ä¹Ÿä¸ºDictionaryæ„å»ºä¸€ä¸ªç´¢å¼•ï¼Œå°†Dictionaryçš„ç´¢å¼•è¿›ä¸€æ­¥å‹ç¼©ï¼Œè¿™å°±æ˜¯åæ¥çš„Terms Indexï¼ˆ.tipï¼‰ã€‚</li>
<li>TermIndexï¼šæ˜¯Term Dictionaryçš„ç´¢å¼•ï¼Œå­˜Termçš„å‰ç¼€ï¼Œå’Œä¸è¯¥å‰ç¼€å¯¹åº”çš„Term Dictionaryä¸­çš„ç¬¬ä¸€ä¸ªTermçš„Blockçš„ä½ç½®ï¼Œæ‰¾åˆ°è¿™ä¸ªç¬¬ä¸€ä¸ªTermåä¼šå†å¾€åé¡ºåºæŸ¥æ‰¾ï¼Œç›´åˆ°æ‰¾åˆ°ç›®æ ‡Termï¼ˆå­˜åœ¨å†…å­˜ï¼‰ã€‚</li>
</ul>
<p>å°èŠ‚ä¸€ä¸‹ï¼š</p>
<ul>
<li>é€šè¿‡Terms Indexï¼ˆtipï¼‰å¯ä»¥å¿«é€Ÿçš„åœ¨Terms Dictionary(tim)ä¸­æ‰¾åˆ°ä½ æƒ³è¦çš„Termï¼Œä»¥åŠå®ƒå¯¹åº”çš„Postingsæ–‡ä»¶æŒ‡é’ˆï¼ˆæŒ‡å‘docï¼‰</li>
<li>Terms Index å®é™…ä¸Šä¸€ä¸ªæˆ–è€…å¤šä¸ªFSTç»„æˆçš„ï¼ŒSegmentä¸Šæ¯ä¸ªå­—æ®µéƒ½æœ‰è‡ªå·±çš„ä¸€ä¸ªFSTï¼ˆFST Indexï¼‰è®°å½•åœ¨tipä¸Šï¼ˆFSTç±»ä¼¼ä¸€ç§TRIEæ ‘ï¼‰</li>
</ul>
<h4 data-id="heading-7">Trie</h4>
<p>Trieè¢«ç§°ä½œå­—å…¸æ ‘ã€å‰ç¼€æ ‘ï¼ˆPrefix Treeï¼‰ã€å•è¯æŸ¥æ‰¾æ ‘ï¼šTrieæœç´¢å­—ç¬¦ä¸²çš„æ•ˆç‡ä¸»è¦è·Ÿå­—ç¬¦ä¸²çš„é•¿åº¦æœ‰å…³ï¼ˆO(len(å•è¯é•¿åº¦))ï¼‰
ä½¿ç”¨Trieå­˜å‚¨ï¼š cat-&gt;1ï¼Œdog-&gt;2ï¼Œdoggy-&gt;3ï¼Œdoes-&gt;4ï¼Œcast-&gt;5ï¼Œadd-&gt;6ï¼Œè¿™å…­ä¸ªå•è¯æ—¶ï¼Œå¦‚ä¸‹å›¾ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/75c82369f3f04e06a7a32e52820043ea~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766199018&amp;x-signature=nVF7pAKBqQ1qyVhQjWMGHYO9PNk%3D" alt="Elasticsearch Trie å­—å…¸æ ‘" loading="lazy"/>
Trieï¼ˆå­—å…¸æ ‘ï¼‰çš„æ—¶é—´å¤æ‚åº¦ä¸ºO(len(key))ï¼Œå…¶ä¸­len(key)è¡¨ç¤ºæŸ¥è¯¢é”®çš„é•¿åº¦ã€‚è¿™ç§æ•°æ®ç»“æ„é€šè¿‡å…±äº«é”®çš„å‰ç¼€æ¥ä¼˜åŒ–å­˜å‚¨ç©ºé—´ï¼Œä½†æ— æ³•å…±äº«åç¼€éƒ¨åˆ†ã€‚</p>
<p>FSTï¼ˆFinite State Transducerï¼Œæœ‰é™çŠ¶æ€è½¬æ¢å™¨ï¼‰æ˜¯ä¸€ç§æ›´é«˜çº§çš„æ•°æ®ç»“æ„ï¼Œå®ƒä¸ä»…èƒ½å¤Ÿå…±äº«é”®çš„å‰ç¼€ï¼Œè¿˜èƒ½å…±äº«åç¼€ã€‚FSTå…·æœ‰ä»¥ä¸‹ä¼˜åŠ¿ï¼š</p>
<ol>
<li>åŠŸèƒ½æ›´å…¨é¢ï¼šé™¤äº†èƒ½åˆ¤æ–­æŸ¥æ‰¾çš„Keyæ˜¯å¦å­˜åœ¨å¤–ï¼Œè¿˜èƒ½ç»™å‡ºç›¸åº”çš„è¾“å‡º(output)</li>
<li>åŒé‡ä¼˜åŒ–ï¼šåœ¨æ—¶é—´å¤æ‚åº¦å’Œç©ºé—´å¤æ‚åº¦ä¸Šéƒ½åšäº†æœ€å¤§ç¨‹åº¦çš„ä¼˜åŒ–</li>
<li>å†…å­˜æ•ˆç‡ï¼šä¼˜åŒ–çš„æ•°æ®ç»“æ„ä½¿å¾—Luceneèƒ½å¤Ÿå°†æ•´ä¸ªTerm Indexå®Œå…¨åŠ è½½åˆ°å†…å­˜ä¸­</li>
</ol>
<p>åœ¨å®é™…åº”ç”¨ä¸­ï¼ŒFSTçš„å·¥ä½œæµç¨‹å¦‚ä¸‹ï¼š</p>
<ol>
<li>å¿«é€Ÿå®šä½ï¼šé€šè¿‡å…±äº«å‰åç¼€çš„ç‰¹æ€§å¿«é€Ÿå®šä½åˆ°ç›®æ ‡Term</li>
<li>è¾“å‡ºè·å–ï¼šåœ¨å®šä½åˆ°Termçš„åŒæ—¶è·å–å¯¹åº”çš„outputï¼ˆå³postingå€’æ’åˆ—è¡¨ï¼‰</li>
<li>æ€§èƒ½ä¼˜åŠ¿ï¼šç›¸æ¯”ä¼ ç»ŸTrieï¼ŒFSTèƒ½æ˜¾è‘—å‡å°‘å†…å­˜å ç”¨å¹¶æé«˜æŸ¥è¯¢æ•ˆç‡</li>
</ol>
<p>å…¸å‹åº”ç”¨åœºæ™¯ï¼š</p>
<ul>
<li>æœç´¢å¼•æ“ç´¢å¼•æ„å»ºï¼ˆå¦‚Luceneï¼‰</li>
<li>å¤§è§„æ¨¡è¯å…¸å­˜å‚¨</li>
<li>éœ€è¦å¿«é€Ÿå‰ç¼€/åç¼€æŸ¥è¯¢çš„ç³»ç»Ÿ</li>
</ul>
<p>ä¾‹å¦‚ï¼Œåœ¨Luceneä¸­ï¼ŒFSTå¯ä»¥å°†æ•°åä¸‡ä¸ªTermåŠå…¶å¯¹åº”çš„postingåˆ—è¡¨é«˜æ•ˆåœ°å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œå®ç°æ¯«ç§’çº§çš„æŸ¥è¯¢å“åº”ã€‚</p>
<h3 data-id="heading-8">SkipListåº”ç”¨</h3>
<h4 data-id="heading-9">æ¦‚å¿µæ¦‚è¿°</h4>
<p>å‡è®¾æŸä¸ªç´¢å¼•å­—æ®µä¸­æœ‰sexã€addresså­—æ®µï¼Œæ£€ç´¢æ¡ä»¶ä¸ºï¼šsex='female' and address='åŒ—äº¬'</p>
<ul>
<li>ç»™å®šæŸ¥è¯¢è¿‡æ»¤æ¡ä»¶ sex='female'çš„è¿‡ç¨‹å°±æ˜¯å…ˆä»Term indexæ‰¾åˆ°femaleåœ¨Term Dictionaryçš„å¤§æ¦‚ä½ç½®</li>
<li>å†ä» Term Dictionaryé‡Œç²¾ç¡®çš„æ‰¾åˆ° Female è¿™ä¸ªTermï¼Œç„¶åå¾—åˆ°ä¸€ä¸ªposting listæˆ–è€…ä¸€ä¸ªæŒ‡å‘posting listä½ç½®çš„æŒ‡é’ˆ</li>
<li>æŸ¥è¯¢ address='åŒ—äº¬' çš„è¿‡ç¨‹ç±»ä¼¼çš„ï¼Œå¾—åˆ°ä¸€ä¸ªposting listæˆ–è€…ä¸€ä¸ªæŒ‡å‘posting listä½ç½®çš„æŒ‡é’ˆ</li>
</ul>
<p>éœ€è¦è®¡ç®—å‡º sex='female' and address='åŒ—äº¬' å°±æ˜¯æŠŠä¸¤ä¸ª positing liståšä¸€ä¸ªä¸åˆå¹¶ã€‚
ESä¸­ä½¿ç”¨SkipListæ•°æ®ç»“æ„ï¼ŒåŒæ—¶éå†sexå’Œaddressçš„posting listï¼Œç›¸äº’skipã€‚</p>
<h4 data-id="heading-10">æœ‰åºé›†åˆè®¡ç®—äº¤é›†</h4>
<pre><code class="hljs language-shell" lang="shell">list1: {1,2,3,4,20,21,50,60,70}
list2: {50,70}
</code></pre>
<h4 data-id="heading-11">æ±‚äº¤é›† æ‹‰é“¾æ³•</h4>
<p>ä¸¤ä¸ªæŒ‡é’ˆæŒ‡å‘é¦–å…ƒç´ ï¼Œæ¯”è¾ƒå…ƒç´ çš„å¤§å°ï¼š</p>
<ul>
<li>å¦‚æœç›¸åŒï¼Œæ”¾å…¥ç»“æœé›†ï¼Œéšæ„ç§»åŠ¨ä¸€ä¸ªæŒ‡é’ˆ</li>
<li>å¦åˆ™ï¼Œç§»åŠ¨å€¼è¾ƒå°çš„ä¸€ä¸ªæŒ‡é’ˆï¼Œç›´åˆ°é˜Ÿå°¾</li>
</ul>
<p>è¿™ç§æ–¹æ³•çš„ä¼˜åŠ¿ï¼š</p>
<ul>
<li>é›†åˆä¸­çš„å…ƒç´ æœ€å¤šè¢«æ¯”è¾ƒä¸€æ¬¡ï¼Œæ—¶é—´å¤æ‚åº¦Oï¼ˆNï¼‰</li>
<li>å¤šä¸ªæœ‰åºé›†åˆå¯ä»¥åŒæ—¶è¿›è¡Œ</li>
</ul>
<h4 data-id="heading-12">æ±‚äº¤é›† è·³è¡¨SkipList</h4>
<p>æœ‰åºé“¾è¡¨é›†åˆæ±‚äº¤é›†ï¼Œè·³è¡¨æ˜¯æœ€å¸¸ç”¨çš„æ•°æ®ç»“æ„ï¼Œå®ƒå¯ä»¥å°†æœ‰åºé›†åˆæ±‚äº¤é›†çš„å¤æ‚åº¦æœ‰Oï¼ˆNï¼‰é™è‡³Oï¼ˆLogï¼ˆNï¼‰ï¼‰
å¦‚æœä½¿ç”¨æ‹‰é“¾æ³•ï¼Œä¼šå‘ç°æ¯ä¸ªå…ƒç´ éƒ½è¦è¢«æ¯”å¯¹ä½†æ˜¯å…¶ä¸­å¾ˆå¤šéƒ½æ˜¯æ— æ•ˆæ¯”å¯¹ï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºOï¼ˆNï¼‰ï¼Œæ‰€è°“è·³è¡¨å¯ä»¥æŠŠæ—¶é—´å¤æ‚ä¼˜åŒ–è‡³LogNï¼Œå°±æ˜¯å› ä¸ºè·³è¡¨å¯ä»¥è·³è¿‡å¾ˆå¤šæ— æ•ˆçš„å¯¹æ¯”ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/259fb046c70847aa9b1e9f788d7cf1b4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766199018&amp;x-signature=9z9zk7A8Rk3l5dk7SbMMNCquWF8%3D" alt="Elasticsearch SkipList è·³è¡¨" loading="lazy"/>
è·³è¡¨çš„å®ç°ï¼š
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/69bc6033ea734104af82641616e2a3ea~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766199018&amp;x-signature=45xpFhbepyNDSUWMKqqdQ9wFCX4%3D" alt="Elasticsearch è·³è¡¨çš„å®ç°" loading="lazy"/>
æœç´¢çš„è¿‡ç¨‹ï¼š</p>
<ul>
<li>ä»é¡¶å±‚é“¾è¡¨çš„é¦–å…ƒç´ å¼€å§‹ï¼Œä»å·¦å¾€å³æœç´¢ï¼Œç›´åˆ°æ‰¾åˆ°ä¸€ä¸ªå¤§äºæˆ–è€…ç­‰äºç›®æ ‡çš„å…ƒç´ ï¼Œæˆ–è€…åˆ°è¾¾å½“å‰å±‚é“¾è¡¨çš„å°¾éƒ¨</li>
<li>å¦‚æœè¯¥å…ƒç´ ç­‰äºç›®æ ‡å…ƒç´ ï¼Œåˆ™è¡¨æ˜è¯¥å…ƒç´ å·²ç»è¢«æ‰¾åˆ°</li>
<li>å¦‚æœè¯¥å…ƒç´ å¤§äºç›®æ ‡å…ƒç´ æˆ–å·²ç»åˆ°è¾¾é“¾è¡¨çš„å°¾éƒ¨ï¼Œåˆ™é€€å›åˆ°å½“å‰å±‚å‰ä¸€ä¸ªå…ƒç´ ï¼Œç„¶åè½¬å…¥ä¸‹ä¸€å±‚è¿›è¡Œæœç´¢</li>
</ul>
<p>æ·»åŠ å…ƒç´ ï¼Œéšæœºå†³å®šæ–°æ·»åŠ å…ƒç´ çš„å±‚æ•°ï¼š
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e31c2288120545dda4b7c8dc1da78c3a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766199018&amp;x-signature=h2MtHNSiTwFw95sEKBUAYcYtDNU%3D" alt="Elasticsearch è·³è¡¨æ·»åŠ å…ƒç´ " loading="lazy"/>
åˆ é™¤å…ƒç´ ï¼Œä¿®æ”¹è·³è¡¨çš„æœ‰æ•ˆå±‚æ•°ï¼š
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/56bd71657d554b18b6a7ce99709995f8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766199018&amp;x-signature=kRJdwF8mM7wMh67XyPh%2Ftyvjbxo%3D" alt="Elasticsearch è·³è¡¨åˆ é™¤å…ƒç´ " loading="lazy"/></p>
<h2 data-id="heading-13">é”™è¯¯é€ŸæŸ¥</h2>








































<table><thead><tr><th>ç—‡çŠ¶</th><th>æ ¹å› å®šä½</th><th>ä¿®å¤æ–¹æ¡ˆ</th></tr></thead><tbody><tr><td>è¯»è€…æ··æ·†Terms Dictionaryã€Terms Indexã€FSTæ¦‚å¿µ</td><td>ä¸‰ä¸ªå±‚çº§ï¼ˆè¯å…¸/ç´¢å¼•/å®ç°ç»“æ„ï¼‰æè¿°æ··ç”¨</td><td>æ˜ç¡®åŒºåˆ†å®šä¹‰ï¼š<br/>- <code>.tim</code>ä¸ºè¯å…¸å—<br/>- <code>.tip</code>ä¸ºè¯å…¸ç´¢å¼•ï¼ˆå¸¸ç”±FSTæ‰¿è½½ï¼‰<br/>- FSTæ˜¯ç´¢å¼•ç»“æ„ï¼Œéè¯å…¸æœ¬ä½“</td></tr><tr><td>"Terms Dictionaryå­˜ç£ç›˜ï¼ŒäºŒåˆ†æŸ¥æ‰¾"è¡¨è¿°è¿‡åº¦å…·ä½“åŒ–</td><td>Luceneå®é™…é‡‡ç”¨block+ç´¢å¼•ç»„åˆç»“æ„</td><td>ä¿®æ”¹ä¸ºï¼š"æŒ‰å­—å…¸åºç»„ç»‡ä¸ºblockï¼Œå¹¶ç”±<code>.tip</code>ç´¢å¼•åŠ é€Ÿå®šä½"</td></tr><tr><td>"å€’æ’è¡¨äº¤é›†å¤æ‚åº¦ä»O(N)é™åˆ°O(logN)"å¼•å‘è´¨ç–‘</td><td>è·³è¡¨ä¸»è¦å‡å°‘æ¯”è¾ƒ/å±€éƒ¨è·³è·ƒæˆæœ¬ï¼Œæ•´ä½“å¤æ‚åº¦ä»ä¸postingsé•¿åº¦ç›¸å…³</td><td>è°ƒæ•´ä¸ºï¼š"é€šè¿‡skip pointerså‡å°‘æ— æ•ˆæ‰«æï¼Œæ˜¾è‘—é™ä½å®é™…è€—æ—¶"</td></tr><tr><td>TF-IDFä¸BM25è¯„åˆ†ç®—æ³•æè¿°å‰åçŸ›ç›¾</td><td>æ–‡æ¡£æœªç»Ÿä¸€Lucene/ESçš„é»˜è®¤è¯„åˆ†æ¨¡å‹</td><td>æ˜ç¡®è¯´æ˜ï¼š<br/>- ä¸»æµé‡‡ç”¨BM25<br/>- TF-IDFä½œä¸ºå†å²/å¯é€‰æ¨¡å‹æåŠ</td></tr><tr><td>"ç´¢å¼•è¡¨é€šå¸¸å­˜å‚¨åœ¨å†…å­˜ä¸­"è¢«è¯¯è§£ä¸ºå…¨é‡é©»ç•™</td><td>æœªè¯´æ˜ç¼“å­˜ç­–ç•¥çš„å®é™…æƒ…å†µ</td><td>ä¿®æ­£ä¸ºï¼š".tip/FSTå¸¸å¯åŠ è½½æˆ–å¼ºç¼“å­˜ï¼›.tim/postingsé€šè¿‡mmap/OS cacheæé€Ÿ"</td></tr><tr><td>è¯»è€…è¯¯è®¤ä¸º.docæ–‡ä»¶ä»…å«docId/TF</td><td>æœªè¯´æ˜positions/payloadç­‰åˆ†æ–‡ä»¶å­˜å‚¨æœºåˆ¶</td><td>è¡¥å……è¯´æ˜ï¼š"ä¸åŒç»´åº¦æ•°æ®åˆ†æ–‡ä»¶å­˜å‚¨ï¼ˆå¦‚pos/payç­‰ï¼‰ï¼Œç»“æ„éšcodecå˜åŒ–"</td></tr></tbody></table>
<h2 data-id="heading-14">å…¶ä»–ç³»åˆ—</h2>
<h3 data-id="heading-15">ğŸš€ AIç¯‡æŒç»­æ›´æ–°ä¸­ï¼ˆé•¿æœŸæ›´æ–°ï¼‰</h3>
<p><strong>AIç‚¼ä¸¹æ—¥å¿—-29 - å­—èŠ‚è·³åŠ¨ DeerFlow æ·±åº¦ç ”ç©¶æ¡†<em>æ–œä½“æ ·å¼</em>æ¶ ç§æœ‰éƒ¨ç½² æµ‹è¯•ä¸Šæ‰‹ æ¶æ„ç ”ç©¶</strong>ï¼ŒæŒç»­æ‰“é€ å®ç”¨AIå·¥å…·æŒ‡å—ï¼
<strong>AIç ”ç©¶-132 Java ç”Ÿæ€å‰æ²¿ 2025ï¼šSpringã€Quarkusã€GraalVMã€CRaC ä¸äº‘åŸç”Ÿè½åœ°</strong></p>
<h3 data-id="heading-16">ğŸ’» Javaç¯‡æŒç»­æ›´æ–°ä¸­ï¼ˆé•¿æœŸæ›´æ–°ï¼‰</h3>
<p><strong>Java-180 Java æ¥å…¥ FastDFSï¼šè‡ªç¼–è¯‘å®¢æˆ·ç«¯ä¸ Maven/Spring Boot å®æˆ˜</strong>
MyBatis å·²å®Œç»“ï¼ŒSpring å·²å®Œç»“ï¼ŒNginxå·²å®Œç»“ï¼ŒTomcatå·²å®Œç»“ï¼Œåˆ†å¸ƒå¼æœåŠ¡å·²å®Œç»“ï¼ŒDubboå·²å®Œç»“ï¼ŒMySQLå·²å®Œç»“ï¼ŒMongoDBå·²å®Œç»“ï¼ŒNeo4jå·²å®Œç»“ï¼ŒFastDFS å·²å®Œç»“ï¼ŒOSSæ­£åœ¨æ›´æ–°... æ·±å…¥æµ…å‡ºåŠ©ä½ æ‰“ç‰¢åŸºç¡€ï¼</p>
<h3 data-id="heading-17">ğŸ“Š å¤§æ•°æ®æ¿å—å·²å®Œæˆå¤šé¡¹å¹²è´§æ›´æ–°ï¼ˆ300ç¯‡ï¼‰ï¼š</h3>
<p>åŒ…æ‹¬ Hadoopã€Hiveã€Kafkaã€Flinkã€ClickHouseã€Elasticsearch ç­‰äºŒåä½™é¡¹æ ¸å¿ƒç»„ä»¶ï¼Œè¦†ç›–ç¦»çº¿+å®æ—¶æ•°ä»“å…¨æ ˆï¼
<strong>å¤§æ•°æ®-278 Spark MLib - åŸºç¡€ä»‹ç» æœºå™¨å­¦ä¹ ç®—æ³• æ¢¯åº¦æå‡æ ‘ GBDTæ¡ˆä¾‹ è¯¦è§£</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[.NETè¿›é˜¶â€”â€”æ·±å…¥ç†è§£å§”æ‰˜ï¼ˆ4ï¼‰äº‹ä»¶å®æˆ˜]]></title>    <link>https://juejin.cn/post/7582787460418633770</link>    <guid>https://juejin.cn/post/7582787460418633770</guid>    <pubDate>2025-12-12T13:18:22.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582787460418633770" data-draft-id="7582808491607015478" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content=".NETè¿›é˜¶â€”â€”æ·±å…¥ç†è§£å§”æ‰˜ï¼ˆ4ï¼‰äº‹ä»¶å®æˆ˜"/> <meta itemprop="keywords" content="C#,.NET"/> <meta itemprop="datePublished" content="2025-12-12T13:18:22.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æˆ‘è¦æ‹¿å¾®è½¯MVP"/> <meta itemprop="url" content="https://juejin.cn/user/1945461219656633"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            .NETè¿›é˜¶â€”â€”æ·±å…¥ç†è§£å§”æ‰˜ï¼ˆ4ï¼‰äº‹ä»¶å®æˆ˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1945461219656633/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æˆ‘è¦æ‹¿å¾®è½¯MVP
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-12T13:18:22.000Z" title="Fri Dec 12 2025 13:18:22 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ä¸Šä¸€æ–‡æˆ‘ä»¬å·²ç»å¤§è‡´ä»‹ç»äº†å…³äºäº‹ä»¶çš„åŸºç¡€å…¥é—¨ï¼Œç°åœ¨æˆ‘ä»¬æ¥ä¸€ä¸ªäº‹ä»¶çš„å®æˆ˜ï¼Œè®©å¤§å®¶æ›´åŠ æ·±å…¥çš„ç†è§£äº‹ä»¶ã€‚è¿™ä¸ªä»£ç ä¹Ÿæ˜¯è§‚å¯Ÿè€…æ¨¡å¼ï¼Œå¦‚æœå¯¹è¿™ä¸ªæ¨¡å¼ä¸æ¸…æ¥šï¼Œå¯ä»¥çœ‹æˆ‘ä¸Šä¸€ä¸ªæ–‡ç« ï¼š<a href="https://juejin.cn/post/7582637280217595958" target="_blank" title="https://juejin.cn/post/7582637280217595958">.NETè¿›é˜¶â€”â€”æ·±å…¥ç†è§£å§”æ‰˜ï¼ˆ3ï¼‰äº‹ä»¶å…¥é—¨ä¸ºä»€ä¹ˆæˆ‘è¦æŠŠäº‹ä»¶æ”¾åœ¨å§”æ‰˜è¿™ä¸ªä¸“é¢˜é‡Œå‘¢ï¼Ÿä¸»è¦çš„åŸå› æ˜¯äº‹ä»¶æ˜¯å§”æ‰˜çš„é«˜çº§å°è£…ã€‚ æ¢å¥ - æ˜é‡‘</a></p>
<h2 data-id="heading-0">ä¸€ã€å‰æ™¯æè¦</h2>
<h3 data-id="heading-1">1.1 <code>EventHandler</code>ä»‹ç»</h3>
<p>æˆ‘ä»¬è¿™ä¸ªä»£ç ä¸­çš„å§”æ‰˜ä½¿ç”¨ç³»ç»Ÿè‡ªå¸¦çš„<code>EventHandler</code>å§”æ‰˜ï¼š</p>
<pre><code class="hljs language-cs" lang="cs"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-built_in">delegate</span> <span class="hljs-keyword">void</span> <span class="hljs-title">EventHandler</span>(<span class="hljs-params"><span class="hljs-built_in">object</span>? sender, EventArgs e</span>)</span>;
</code></pre>
<p>è¿™ä¸ªå§”æ‰˜æ²¡æœ‰è¿”å›å€¼ï¼Œä½†éœ€è¦ä¼ é€’ä¸¤ä¸ªå‚æ•°ï¼Œä¸€ä¸ªæ˜¯<code>object</code>ç±»å‹çš„ï¼Œä¸€ä¸ªæ˜¯<code>EventArgs</code>ç±»å‹çš„ï¼Œè¿™ä¸¤ä¸ªå‚æ•°åˆ†åˆ«æ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿå…¶å®ï¼Œ<code>object</code>ç±»å‹å°±æ˜¯è°ƒç”¨è€…ï¼Œå‰©ä¸‹çš„<code>EventArgs</code>å°±æ˜¯è¦ä¼ é€’çš„å‚æ•°ï¼Œæˆ‘è¿™ä¹ˆè¯´å¯èƒ½æœ‰ç‚¹ä¸å¥½ç†è§£ï¼Œæ¥ç€çœ‹ä¸‹å»ä½ å°±æ‡‚äº†ã€‚</p>
<h3 data-id="heading-2">1.2 å®æˆ˜èƒŒæ™¯ä»‹ç»</h3>
<h4 data-id="heading-3">åœºæ™¯èƒŒæ™¯</h4>
<p>ä½ ä½åœ¨ â€œå¹¸ç¦å°åŒºâ€ï¼Œç‰©ä¸šè´Ÿè´£é€šçŸ¥ä¸šä¸»åœæ°´ / åœç”µç­‰äº‹å®œï¼š</p>
<ol>
<li><strong>ç¬¬ä¸€æ­¥ï¼šä¸šä¸»è®¢é˜…é€šçŸ¥</strong>å¼ ä¸‰ã€æå››ã€ç‹äº”å»ç‰©ä¸šå‰å°ç™»è®°ï¼šâ€œåœæ°´é€šçŸ¥ä¸€å®šè¦å‘Šè¯‰æˆ‘ï¼â€ï¼ˆå¯¹åº”ä»£ç é‡Œçš„Â <code>+= è®¢é˜…äº‹ä»¶</code>ï¼‰ï¼›</li>
<li><strong>ç¬¬äºŒæ­¥ï¼šç‰©ä¸šå‡†å¤‡é€šçŸ¥å†…å®¹</strong>ç‰©ä¸šç¡®å®šï¼šâ€œæ˜å¤©ï¼ˆ2025-12-15ï¼‰ä¸Šåˆ 8 ç‚¹åˆ° 12 ç‚¹ï¼Œå°åŒºåœæ°´ 4 å°æ—¶ï¼ŒåŸå› æ˜¯æ°´ç®¡ç»´ä¿®â€ï¼ˆå¯¹åº”ä»£ç é‡Œçš„Â <code>WaterStopNotice</code>Â å‚æ•°ï¼‰ï¼›</li>
<li><strong>ç¬¬ä¸‰æ­¥ï¼šç‰©ä¸šæŒ¨å®¶æŒ¨æˆ·é€šçŸ¥</strong>ç‰©ä¸šäººå‘˜ä¸Šé—¨ï¼Œå¯¹æ¯ä¸ªç™»è®°çš„ä¸šä¸»è¯´ï¼šâ€œæˆ‘æ˜¯å¹¸ç¦å°åŒºç‰©ä¸šï¼ˆ<code>sender</code>ï¼‰ï¼Œé€šçŸ¥ä½ ï¼šæ˜å¤© 8 ç‚¹ - 12 ç‚¹åœæ°´ 4 å°æ—¶ï¼ˆ<code>e</code>Â å‚æ•°ï¼‰â€ï¼ˆå¯¹åº”ä»£ç é‡Œçš„Â <code>Invoke</code>Â ä¼ å‚ï¼‰ï¼›</li>
<li><strong>ç¬¬å››æ­¥ï¼šä¸šä¸»å“åº”é€šçŸ¥</strong>å¼ ä¸‰ï¼šâ€œçŸ¥é“äº†ï¼Œæˆ‘å›¤ç‚¹æ°´â€ï¼›æå››ï¼šâ€œæˆ‘æå‰æ´—å¥½è¡£æœâ€ï¼›ç‹äº”ï¼šâ€œæˆ‘æé†’çˆ¸å¦ˆåˆ«å¿˜æ¥æ°´â€ï¼ˆå¯¹åº”ä»£ç é‡Œçš„Â <code>Buy</code>Â æ–¹æ³•æ‰§è¡Œä¸åŒé€»è¾‘ï¼‰ã€‚</li>
</ol>
<h2 data-id="heading-4">äºŒã€ä»£ç è¯¦æƒ…</h2>
<h3 data-id="heading-5">2.1 ä¼ é€’ä¿¡æ¯ç±»ï¼šWaterStopNotice</h3>
<pre><code class="hljs language-cs" lang="cs">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">WaterStopNotice</span>:<span class="hljs-title">EventArgs</span>
    {
        <span class="hljs-keyword">public</span> DateTime StopTime { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; } <span class="hljs-comment">// åœæ°´å¼€å§‹æ—¶é—´</span>
        <span class="hljs-keyword">public</span> <span class="hljs-built_in">int</span> Duration { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }      <span class="hljs-comment">// åœæ°´æ—¶é•¿ï¼ˆå°æ—¶ï¼‰</span>
        <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> Reason { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }     <span class="hljs-comment">// åœæ°´åŸå› </span>
    }
</code></pre>
<p>é¦–å…ˆï¼Œè¿™ä¸ªç±»æ˜¯æˆ‘ä»¬éœ€è¦ä¼ é€’çš„ä¿¡æ¯ç±»ï¼Œå¯ä»¥çœ‹åˆ°å®ƒæ˜¯ç»§æ‰¿è‡ª<code>EventArgs</code>ç±»ï¼Œæ‰€ä»¥è¿™ä¸ªç±»æ˜¯å¯ä»¥å½“æˆ<code>EventArgs</code>ç±»ä¼ é€’ä¿¡æ¯çš„ã€‚</p>
<h3 data-id="heading-6">2.2 å°åŒºç‰©ä¸šç±»ï¼šCommunityProperty</h3>
<pre><code class="hljs language-cs" lang="cs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">CommunityProperty</span>
{
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> PropertyName { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; } <span class="hljs-comment">// ç‰©ä¸šåç§°ï¼ˆæ¯”å¦‚â€œå¹¸ç¦å°åŒºç‰©ä¸šâ€ï¼‰</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> Phone { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }        <span class="hljs-comment">// ç‰©ä¸šè”ç³»ç”µè¯</span>

    <span class="hljs-comment">// å®šä¹‰â€œåœæ°´é€šçŸ¥â€äº‹ä»¶ï¼ˆå¯¹å¤–æš´éœ²ï¼Œä¸šä¸»åªèƒ½è®¢é˜…/å–æ¶ˆï¼‰</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">event</span> EventHandler WaterStopEvent;

    <span class="hljs-comment">// ç‰©ä¸šå†…éƒ¨çš„â€œå‘é€šçŸ¥â€æ–¹æ³•ï¼ˆå¯¹åº”ä»£ç é‡Œçš„PublicShowï¼‰</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">SendWaterStopNotice</span>()</span>
    {
        Console.WriteLine(<span class="hljs-string">$"ã€<span class="hljs-subst">{PropertyName}</span>ã€‘å¼€å§‹é€šçŸ¥ä¸šä¸»åœæ°´äº‹å®œï¼"</span>);

        <span class="hljs-comment">// å‡†å¤‡é€šçŸ¥è¯¦æƒ…ï¼ˆeå‚æ•°ï¼‰</span>
        WaterStopNotice notice = <span class="hljs-keyword">new</span> WaterStopNotice()
        {
            StopTime = <span class="hljs-keyword">new</span> DateTime(<span class="hljs-number">2025</span>, <span class="hljs-number">12</span>, <span class="hljs-number">15</span>, <span class="hljs-number">8</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>),
            Duration = <span class="hljs-number">4</span>,
            Reason = <span class="hljs-string">"å°åŒºä¸»æ°´ç®¡ç»´ä¿®"</span>
        };

        <span class="hljs-comment">// è§¦å‘äº‹ä»¶ï¼šæŒ¨å®¶æŒ¨æˆ·é€šçŸ¥ï¼ˆä¼ 2ä¸ªå‚æ•°ï¼šç‰©ä¸šè‡ªå·±+é€šçŸ¥è¯¦æƒ…ï¼‰</span>
        WaterStopEvent.Invoke(<span class="hljs-keyword">this</span>, notice);
    }
}
</code></pre>
<p>å¯ä»¥çœ‹åˆ°åœ¨è¿™ä¸ªç±»ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸¤ä¸ªå±æ€§ï¼Œè¿˜å®šä¹‰äº†ä¸€ä¸ªäº‹ä»¶ï¼š</p>
<pre><code class="hljs language-cs" lang="cs"> <span class="hljs-keyword">public</span> <span class="hljs-keyword">event</span> EventHandler WaterStopEvent;
</code></pre>
<p>è¿™ä¸ªäº‹ä»¶æ˜¯æŠŠ<code>EventHanlder</code>è¿™ä¸ªå§”æ‰˜å°è£…äº†ï¼Œæˆ‘ä»¬åœ¨1.1è®¨è®ºäº†å®ƒçš„ä¸¤ä¸ªå‚æ•°ï¼Œä¸€ä¸ªæ˜¯<code>object</code>ç±»å‹ï¼Œä¸€ä¸ªæ˜¯<code>EventArgs</code>ç±»å‹ï¼Œç°åœ¨æˆ‘ä»¬æŠŠè¿™ä¸ªå§”æ‰˜å°è£…ä»äº‹ä»¶åï¼Œè¿™ä¸ªäº‹ä»¶<code>WaterStopEvent</code>ä¹Ÿå°±è·Ÿè¯¥å§”æ‰˜ä¸€æ ·ï¼Œåªèƒ½æ¥æ”¶å¸¦æœ‰ä¸¤ä¸ªå‚æ•°<code>object? sender</code>å’Œ<code>EventArgs e</code>ï¼Œå¹¶ä¸”æ²¡æœ‰è¿”å›å€¼çš„æ–¹æ³•ã€‚</p>
<p>å…¶æ¬¡ï¼Œæˆ‘ä»¬è¿˜å®šä¹‰äº†è§¦å‘æ–¹æ³•<code>SendWaterStopNotice</code>ï¼Œè¿™ä¸ªæ–¹æ³•é‡Œæˆ‘ä»¬é¦–å…ˆåˆ›å»ºäº†<code>WaterStopNotice</code>çš„å®ä¾‹å¯¹è±¡ï¼Œç”¨è¿™ä¸ªå®ä¾‹å¯¹è±¡æ¥ä¼ é€’å‚æ•°ï¼Œå¹¶ä¸”æˆ‘ä»¬è¿˜è§¦å‘äº†äº‹ä»¶<code> WaterStopEvent.Invoke(this, notice);</code>ï¼Œå³è°ƒç”¨<code>SendWaterStopNotice</code>æ–¹æ³•ï¼Œå°±å¯ä»¥è§¦å‘ç»‘å®šçš„äº‹ä»¶ã€‚</p>
<p>è§¦å‘è¿™ä¸ªäº‹ä»¶æ—¶ï¼Œæˆ‘ä»¬ä¼ é€’äº†ä¸¤ä¸ªå‚æ•°ï¼Œä¸€ä¸ªæ˜¯<code>this</code>ï¼Œå¦ä¸€ä¸ªæ˜¯åˆšåˆšåˆ›å»ºçš„å®ä¾‹<code>notice</code>ï¼Œ<code>notice</code>æ¯”è¾ƒå¥½ç†è§£ï¼Œå°±æ˜¯æˆ‘ä»¬åˆ›å»ºçš„ç”¨æ¥é€šçŸ¥å°åŒºä¸šä¸»çš„ä¿¡æ¯ï¼Œä½†æ˜¯å‰é¢çš„<code>this</code>æ˜¯å•¥å‘¢ï¼Ÿ</p>
<p>æˆ‘ä»¬éƒ½çŸ¥é“<code>this</code>æŒ‡å‘çš„æ˜¯å®ä¾‹æœ¬èº«ï¼Œä¹Ÿå°±æ˜¯è¯´è¿™é‡Œçš„<code>this</code>ä¼ é€’çš„æ˜¯æˆ‘ä»¬åç»­è¦å°†æ ¡åŒºä¸šä¸»ç±»<code>CommunityProperty</code>å®ä¾‹åŒ–åçš„é‚£ä¸ªå¯¹è±¡ï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆè¦ä¼ é€’è¿™ä¸ªå®ä¾‹å¯¹è±¡å‘¢ï¼Ÿæƒ³ä¸€æƒ³ï¼Œå¦‚æœä½ æ˜¯å°åŒºä¸šä¸»ï¼Œå½“æœ‰äººé€šçŸ¥ä½ è¦åœæ°´æ—¶ï¼Œ<strong>ä½ æ˜¯ä¸æ˜¯è¦ç¡®è®¤ä¸€ä¸‹å¯¹æ–¹æ˜¯è°ï¼Œåªæœ‰ç¡®è®¤å¯¹æ–¹æ˜¯ç‰©ä¸šåï¼Œä½ æ‰ä¼šé€‰æ‹©ç›¸ä¿¡</strong>ã€‚é‚£ä¹ˆè¿™é‡Œä¹Ÿæ˜¯ä¸€æ ·çš„é“ç†ï¼Œç”±äºæˆ‘ä»¬çš„å¯¹è±¡ä¸­æœ‰ä¸¤ä¸ªå±æ€§ï¼Œä¸€ä¸ªæ˜¯<code>PropertyName</code>ç‰©ä¸šåå­—ï¼Œå¦ä¸€ä¸ªæ˜¯ç‰©ä¸šçš„ç”µè¯<code>Phone</code>ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦æŠŠè¿™äº›ä¿¡æ¯ä¹Ÿä¼ é€’ç»™å°åŒºä¸šä¸»ï¼Œè®©ä»–ä»¬çŸ¥é“å‘èµ·è¿™ä¸ªæ¶ˆæ¯çš„æ˜¯è°ï¼Œå¹¶ä¸”å‘èµ·æ¶ˆæ¯çš„äººçš„ç”µè¯ã€‚</p>
<h3 data-id="heading-7">2.2 ç‰©ä¸šç±»ï¼šHouseOwner</h3>
<pre><code class="hljs language-cs" lang="cs"> <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">HouseOwner</span>
 {
     <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> Name { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; } <span class="hljs-comment">// ä¸šä¸»å§“å</span>
     <span class="hljs-keyword">public</span> <span class="hljs-built_in">int</span> HouseNumber { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; } <span class="hljs-comment">// é—¨ç‰Œå·</span>

     <span class="hljs-comment">// æ¥æ”¶é€šçŸ¥çš„æ–¹æ³•ï¼ˆå¯¹åº”ä»£ç é‡Œçš„Buyï¼‰</span>
     <span class="hljs-comment">// sender = ç‰©ä¸šå®ä¾‹ï¼Œe = åœæ°´é€šçŸ¥è¯¦æƒ…</span>
     <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">ReceiveNotice</span>(<span class="hljs-params"><span class="hljs-built_in">object</span>? sender, EventArgs e</span>)</span>
     {
         <span class="hljs-comment">// ç¬¬ä¸€æ­¥ï¼šç¡®è®¤æ˜¯è°å‘çš„é€šçŸ¥ï¼ˆæŠŠsenderè½¬å›ç‰©ä¸šç±»å‹ï¼‰</span>
         CommunityProperty property = sender <span class="hljs-keyword">as</span> CommunityProperty;
         <span class="hljs-keyword">if</span> (property == <span class="hljs-literal">null</span>)
         {
             Console.WriteLine(<span class="hljs-string">$"<span class="hljs-subst">{Name}</span>ï¼ˆ<span class="hljs-subst">{HouseNumber}</span>å·ï¼‰ï¼šæ”¶åˆ°ä¸æ˜é€šçŸ¥ï¼Œå¿½ç•¥ï¼"</span>);
             <span class="hljs-keyword">return</span>;
         }

         <span class="hljs-comment">// ç¬¬äºŒæ­¥ï¼šè·å–é€šçŸ¥è¯¦æƒ…ï¼ˆæŠŠeè½¬å›åœæ°´é€šçŸ¥ç±»å‹ï¼‰</span>
         WaterStopNotice notice = e <span class="hljs-keyword">as</span> WaterStopNotice;
         <span class="hljs-keyword">if</span> (notice == <span class="hljs-literal">null</span>)
         {
             Console.WriteLine(<span class="hljs-string">$"<span class="hljs-subst">{Name}</span>ï¼ˆ<span class="hljs-subst">{HouseNumber}</span>å·ï¼‰ï¼šé€šçŸ¥å†…å®¹æ— æ•ˆï¼"</span>);
             <span class="hljs-keyword">return</span>;
         }

         <span class="hljs-comment">// ç¬¬ä¸‰æ­¥ï¼šæ ¹æ®é€šçŸ¥åšå‡†å¤‡ï¼ˆä¸åŒä¸šä¸»ååº”ä¸åŒï¼‰</span>
         Console.WriteLine(<span class="hljs-string">$"\nã€<span class="hljs-subst">{Name}</span>ï¼ˆ<span class="hljs-subst">{HouseNumber}</span>å·ï¼‰ã€‘æ”¶åˆ°é€šçŸ¥ï¼š"</span>);
         Console.WriteLine(<span class="hljs-string">$"  é€šçŸ¥æ–¹ï¼š<span class="hljs-subst">{property.PropertyName}</span>ï¼ˆè”ç³»ç”µè¯ï¼š<span class="hljs-subst">{property.Phone}</span>ï¼‰"</span>);
         Console.WriteLine(<span class="hljs-string">$"  åœæ°´æ—¶é—´ï¼š<span class="hljs-subst">{notice.StopTime:yyyy-MM-dd HH:mm}</span>"</span>);
         Console.WriteLine(<span class="hljs-string">$"  åœæ°´æ—¶é•¿ï¼š<span class="hljs-subst">{notice.Duration}</span>å°æ—¶"</span>);
         Console.WriteLine(<span class="hljs-string">$"  åœæ°´åŸå› ï¼š<span class="hljs-subst">{notice.Reason}</span>"</span>);

         <span class="hljs-comment">// ä¸åŒä¸šä¸»çš„ä¸ªæ€§åŒ–æ“ä½œ</span>
         <span class="hljs-keyword">if</span> (Name == <span class="hljs-string">"å¼ ä¸‰"</span>)
             Console.WriteLine(<span class="hljs-string">$"  å¼ ä¸‰çš„æ“ä½œï¼šç«‹åˆ»å»è¶…å¸‚ä¹°2æ¡¶çŸ¿æ³‰æ°´ï¼"</span>);
         <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (Name == <span class="hljs-string">"æå››"</span>)
             Console.WriteLine(<span class="hljs-string">$"  æå››çš„æ“ä½œï¼šç°åœ¨å°±æŠŠè¡£æœæ´—äº†ï¼Œçƒ­æ°´å™¨åŠ æ»¡æ°´ï¼"</span>);
         <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (Name == <span class="hljs-string">"ç‹äº”"</span>)
             Console.WriteLine(<span class="hljs-string">$"  ç‹äº”çš„æ“ä½œï¼šç»™çˆ¸å¦ˆæ‰“ç”µè¯ï¼Œæé†’æ¥æ°´ï¼"</span>);
     }
 }
</code></pre>
<p>åœ¨è¿™ä¸ªç±»ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªæ–¹æ³•ï¼š</p>
<pre><code class="hljs language-cs" lang="cs">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">ReceiveNotice</span>(<span class="hljs-params"><span class="hljs-built_in">object</span>? sender, EventArgs e</span>)</span>{
    ......
    }
</code></pre>
<p>è¿™ä¸ªæ–¹æ³•æ¥æ”¶<code>object? sender, EventArgs e</code>ä¸¤ä¸ªå‚æ•°ï¼Œæ²¡æœ‰è¿”å›å€¼ï¼Œè¿™ä¸ªæ–¹æ³•çš„ç­¾åå®Œå…¨ç¬¦åˆæˆ‘ä»¬ä¹‹å‰è¯´çš„<code>EventHandle</code>å§”æ‰˜çš„è¦æ±‚ï¼Œå³ç¬¦åˆ<code>WaterStopEvent</code>çš„è¦æ±‚ã€‚å¹¶ä¸”æˆ‘ä»¬åœ¨æ–¹æ³•å†…éƒ¨ä¹Ÿæ˜¯é€šè¿‡<code>object sender</code>æ‹¿åˆ°äº†<strong>å°åŒºç‰©ä¸š</strong>çš„å§“åå’Œç”µè¯ï¼Œé€šè¿‡<code>EventArgs</code>è·å–äº†<strong>åœæ°´é€šçŸ¥</strong>çš„å„ä¸ªè¯¦ç»†ä¿¡æ¯ã€‚</p>
<h3 data-id="heading-8">2.4 æ‰§è¡Œæ•´ä¸ªæµç¨‹</h3>
<pre><code class="hljs language-cs" lang="cs"><span class="hljs-comment">// 1. åˆ›å»ºå‘å¸ƒè€…ï¼šå¹¸ç¦å°åŒºç‰©ä¸š</span>
CommunityProperty property = <span class="hljs-keyword">new</span> CommunityProperty()
{
    PropertyName = <span class="hljs-string">"å¹¸ç¦å°åŒºç‰©ä¸š"</span>,
    Phone = <span class="hljs-string">"010-12345678"</span>
};

<span class="hljs-comment">// 2. åˆ›å»ºè§‚å¯Ÿè€…ï¼š3ä¸ªä¸šä¸»</span>
HouseOwner zhangsan = <span class="hljs-keyword">new</span> HouseOwner() { Name = <span class="hljs-string">"å¼ ä¸‰"</span>, HouseNumber = <span class="hljs-number">101</span> };
HouseOwner lisi = <span class="hljs-keyword">new</span> HouseOwner() { Name = <span class="hljs-string">"æå››"</span>, HouseNumber = <span class="hljs-number">202</span> };
HouseOwner wangwu = <span class="hljs-keyword">new</span> HouseOwner() { Name = <span class="hljs-string">"ç‹äº”"</span>, HouseNumber = <span class="hljs-number">303</span> };

<span class="hljs-comment">// 3. ä¸šä¸»è®¢é˜…é€šçŸ¥ï¼ˆå»ç‰©ä¸šç™»è®°ï¼‰</span>
property.WaterStopEvent += zhangsan.ReceiveNotice;
property.WaterStopEvent += lisi.ReceiveNotice;
property.WaterStopEvent += wangwu.ReceiveNotice;

<span class="hljs-comment">// 4. ç‰©ä¸šå‘é€šçŸ¥ï¼ˆè§¦å‘äº‹ä»¶ï¼Œä¼ é€’å‚æ•°ï¼‰</span>
property.SendWaterStopNotice();
</code></pre>
<p>è¿™é‡Œæˆ‘ä»¬é¦–å…ˆåˆ›å»ºäº†ä¸€ä¸ªå°åŒºç‰©ä¸šçš„å®ä¾‹ï¼Œå¹¶ä¸”å£°æ˜äº†ä»–çš„åç§°å’Œç”µè¯ã€‚ç„¶ååˆ›å»ºäº†ä¸‰ä¸ªä¸šä¸»ï¼Œå£°æ˜äº†æ¯ä¸ªä¸šä¸»çš„å§“åå’Œæˆ¿é—´å·ã€‚éšåï¼Œæˆ‘ä»¬è®©æ¯ä¸ªä¸šä¸»è®¢é˜…äº†ç‰©ä¸šçš„é€šçŸ¥ï¼Œå³<code>property.WaterStopEvent += zhangsan.ReceiveNotice;</code>ï¼Œç”±äº<code>WaterStopEvent</code>æ˜¯ä¸€ä¸ªäº‹ä»¶ï¼Œå¤–éƒ¨åªèƒ½è®¢é˜…ï¼ˆ+=ï¼‰æˆ–è€…å–æ¶ˆè®¢é˜…ï¼ˆ-=ï¼‰ã€‚</p>
<p>è®¢é˜…ä¹‹åï¼Œè¿™äº›æ–¹æ³•ä¼šè¢«æ”¾åˆ°<code>WaterStopEvent</code>äº‹ä»¶ä¸­ï¼Œç­‰å¾…è°ƒç”¨ã€‚è€Œæœ€ç»ˆï¼Œæ‰§è¡Œ<code>SendWaterStopNotice()</code>æ–¹æ³•åï¼Œè¿™ä¸ªäº‹ä»¶ä¼šè¢«è°ƒç”¨ã€‚</p>
<p>æ¯”å¦‚å½“æ‰§è¡Œäº†<code>SendWaterStopNotice()</code>æ–¹æ³•åï¼Œè¿™ä¸ªä»£ç ä¼šè§¦å‘äº‹ä»¶<code>WaterStopEvent.Invoke(this, notice);</code>ï¼Œå°†å°åŒºç‰©ä¸šçš„å®ä¾‹<code>property</code>å’Œåœæ°´æ¶ˆæ¯<code>WaterStopNotice</code>ä¼ å…¥äº‹ä»¶ï¼Œç”±äºäº‹ä»¶ä¸­çš„ç¬¬ä¸€ä¸ªæ–¹æ³•æ˜¯å¼ ä¸‰çš„ï¼Œæ‰€ä»¥æ‰§è¡Œ<code>zhangsan.ReceiveNotice(object? sender, EventArgs e)</code>ã€‚å‰©ä¸‹ä¸¤ä¸ªæ–¹æ³•ä¹Ÿæ˜¯ä»¥æ­¤ç±»æ¨ã€‚</p>
<p>æ‰§è¡Œç»“æœï¼š</p>
<pre><code class="hljs">ã€å¹¸ç¦å°åŒºç‰©ä¸šã€‘å¼€å§‹é€šçŸ¥ä¸šä¸»åœæ°´äº‹å®œï¼

ã€å¼ ä¸‰ï¼ˆ101å·ï¼‰ã€‘æ”¶åˆ°é€šçŸ¥ï¼š
  é€šçŸ¥æ–¹ï¼šå¹¸ç¦å°åŒºç‰©ä¸šï¼ˆè”ç³»ç”µè¯ï¼š010-12345678ï¼‰
  åœæ°´æ—¶é—´ï¼š2025-12-15 08:00
  åœæ°´æ—¶é•¿ï¼š4å°æ—¶
  åœæ°´åŸå› ï¼šå°åŒºä¸»æ°´ç®¡ç»´ä¿®
  å¼ ä¸‰çš„æ“ä½œï¼šç«‹åˆ»å»è¶…å¸‚ä¹°2æ¡¶çŸ¿æ³‰æ°´ï¼

ã€æå››ï¼ˆ202å·ï¼‰ã€‘æ”¶åˆ°é€šçŸ¥ï¼š
  é€šçŸ¥æ–¹ï¼šå¹¸ç¦å°åŒºç‰©ä¸šï¼ˆè”ç³»ç”µè¯ï¼š010-12345678ï¼‰
  åœæ°´æ—¶é—´ï¼š2025-12-15 08:00
  åœæ°´æ—¶é•¿ï¼š4å°æ—¶
  åœæ°´åŸå› ï¼šå°åŒºä¸»æ°´ç®¡ç»´ä¿®
  æå››çš„æ“ä½œï¼šç°åœ¨å°±æŠŠè¡£æœæ´—äº†ï¼Œçƒ­æ°´å™¨åŠ æ»¡æ°´ï¼

ã€ç‹äº”ï¼ˆ303å·ï¼‰ã€‘æ”¶åˆ°é€šçŸ¥ï¼š
  é€šçŸ¥æ–¹ï¼šå¹¸ç¦å°åŒºç‰©ä¸šï¼ˆè”ç³»ç”µè¯ï¼š010-12345678ï¼‰
  åœæ°´æ—¶é—´ï¼š2025-12-15 08:00
  åœæ°´æ—¶é•¿ï¼š4å°æ—¶
  åœæ°´åŸå› ï¼šå°åŒºä¸»æ°´ç®¡ç»´ä¿®
  ç‹äº”çš„æ“ä½œï¼šç»™çˆ¸å¦ˆæ‰“ç”µè¯ï¼Œæé†’æ¥æ°´ï¼
</code></pre>
<h3 data-id="heading-9">2.5 æ€»ç»“</h3>













































<table><thead><tr><th>ç”Ÿæ´»åœºæ™¯</th><th>ä»£ç é‡Œçš„å…ƒç´ </th><th>æ ¸å¿ƒä½œç”¨</th></tr></thead><tbody><tr><td>å¹¸ç¦å°åŒºç‰©ä¸š</td><td><code>CommunityProperty</code>Â å®ä¾‹</td><td>å‘å¸ƒè€…ï¼šæ§åˆ¶é€šçŸ¥æ—¶æœºã€ä¼ å‚æ•°</td></tr><tr><td>åœæ°´é€šçŸ¥äº‹ä»¶</td><td><code>WaterStopEvent</code>Â äº‹ä»¶</td><td>è®¢é˜…å…¥å£ï¼šä»…å…è®¸ +=/-=</td></tr><tr><td>åœæ°´è¯¦æƒ…ï¼ˆæ—¶é—´ / æ—¶é•¿ï¼‰</td><td><code>WaterStopNotice</code>ï¼ˆe å‚æ•°ï¼‰</td><td>ä¼ é€’å…·ä½“çš„é€šçŸ¥å†…å®¹</td></tr><tr><td>ç‰©ä¸šè‡ªå·±ï¼ˆå‘é€šçŸ¥çš„äººï¼‰</td><td><code>this</code>ï¼ˆsender å‚æ•°ï¼‰</td><td>å‘Šè¯‰è§‚å¯Ÿè€… â€œè°å‘çš„é€šçŸ¥â€</td></tr><tr><td>ä¸šä¸»ç™»è®°é€šçŸ¥</td><td><code>property.WaterStopEvent += æ–¹æ³•</code></td><td>è®¢é˜…ï¼šåŠ å…¥é€šçŸ¥åˆ—è¡¨</td></tr><tr><td>ç‰©ä¸šæŒ¨å®¶æŒ¨æˆ·é€šçŸ¥</td><td><code>WaterStopEvent.Invoke(this, notice)</code></td><td>è§¦å‘äº‹ä»¶ï¼šä¼ é€’å‚æ•°ç»™æ¯ä¸ªä¸šä¸»</td></tr><tr><td>ä¸šä¸»æŒ‰é€šçŸ¥åšå‡†å¤‡</td><td><code>ReceiveNotice</code>Â æ–¹æ³•</td><td>å“åº”ï¼šæ‰§è¡Œä¸ªæ€§åŒ–é€»è¾‘</td></tr></tbody></table>
<p>è¿™ä¸ªä»£ç ä¹Ÿæ˜¯ä¸€ä¸ªéå¸¸å…¸å‹è§‚å¯Ÿè€…æ¨¡å¼ï¼Œéå¸¸å€¼å¾—å¤§å®¶å­¦ä¹ ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é€šè¿‡åˆ‡æ¢Serviceå®ç°ç±»æ¥åˆ‡æ¢çœ‹æ¿æ•°æ®æ¥æº]]></title>    <link>https://juejin.cn/post/7582637280218955830</link>    <guid>https://juejin.cn/post/7582637280218955830</guid>    <pubDate>2025-12-12T14:00:37.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582637280218955830" data-draft-id="7582637280218939446" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é€šè¿‡åˆ‡æ¢Serviceå®ç°ç±»æ¥åˆ‡æ¢çœ‹æ¿æ•°æ®æ¥æº"/> <meta itemprop="keywords" content="Java,Spring Boot"/> <meta itemprop="datePublished" content="2025-12-12T14:00:37.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ†§æ†¬å°‘"/> <meta itemprop="url" content="https://juejin.cn/user/2374569069387223"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é€šè¿‡åˆ‡æ¢Serviceå®ç°ç±»æ¥åˆ‡æ¢çœ‹æ¿æ•°æ®æ¥æº
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2374569069387223/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ†§æ†¬å°‘
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-12T14:00:37.000Z" title="Fri Dec 12 2025 14:00:37 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ€è¿‘åšBIçœ‹æ¿çš„æ—¶å€™é‡åˆ°ä¸ªéœ€æ±‚ï¼Œå°±æ˜¯æœ‰æ—¶å€™éœ€è¦åˆ‡æ¢çœ‹æ¿æ‰€å±•ç¤ºçš„æ•°æ®ï¼ˆæ‡‚çš„éƒ½æ‡‚ï¼‰ï¼Œä½†æ¯æ¬¡éƒ½æ‰‹åŠ¨æ”¹æ•°æ®åº“è§†å›¾åé¢å†æ”¹å›æ¥æ¯”è¾ƒéº»çƒ¦ï¼Œäºæ˜¯éœ€è¦åšä¸€ä¸ªå¿«é€Ÿåˆ‡æ¢å…¬å¸å†…éƒ¨çœ‹çš„çœŸå®æ•°æ®æ¨¡å¼å’Œç»™å®¢æˆ·çœ‹çš„æ¼”ç¤ºæ¨¡å¼çš„åŠŸèƒ½ã€‚</p>
<p>æ¯ä¸ªçœ‹æ¿æ•°æ®æ¥å£éƒ½åŠ ä¸ªå‚æ•°ä¾µå…¥æ€§å¤ªå¤§è‚¯å®šä¸è¡Œï¼Œé€šè¿‡é…ç½®æ¥åˆ‡æ¢ä¹Ÿæ¯”è¾ƒéº»çƒ¦ï¼Œæœ€åæƒ³åˆ°äº†å¤§å¤šæ•°æƒ…å†µä¸‹éƒ½æ˜¯ä¸€ä¸ªæ¥å£å¯¹ä¸€ä¸ªå®ç°ç±»çš„Serviceå±‚ã€‚åªéœ€è¦æ ¹æ®é…ç½®çš„å˜åŠ¨æ”¹å˜å®ç°ç±»ï¼Œå°±èƒ½å¾ˆè½»æ¾åœ°å®ç°æ•°æ®æ¥æºåˆ‡æ¢ã€‚</p>
<p>æœ‰äº†æƒ³æ³•ä¹‹åï¼Œå°±å’Œè±†åŒ…è®¨è®ºæ–¹æ¡ˆæ¥ç€å®æ–½äº†ï¼Œæœ€åå¯ä»¥å®ç°åªéœ€è¦åŠ æ³¨è§£å’Œæ–°çš„Serviceå®ç°ç±»å°±èƒ½ä¸ºçœ‹æ¿æ·»åŠ æ–°çš„æ•°æ®æ¥æºçš„æ•ˆæœï¼Œè¿˜å¯ä»¥é€šè¿‡ä¿®æ”¹Nacosç®¡ç†çš„é…ç½®æ¥åŠ¨æ€æ›´æ–°ã€‚</p>

<h2 data-id="heading-0">é—®é¢˜</h2>
<p>Serviceå±‚é€šå¸¸æ˜¯ç¼–å†™ä¸€ä¸ªServiceæ¥å£å’Œä¸€ä¸ªServiceImplï¼ˆå®ç°ç±»ï¼‰ï¼Œè€Œç°åœ¨é™¤äº†è¿”å›çœŸå®æ•°æ®çš„ServiceImplä¹‹å¤–ï¼Œè¿˜éœ€è¦ä¸€ä¸ªè¿”å›æ¼”ç¤ºç”¨çš„æ•°æ®çš„DemoServiceImplï¼Œä¸¤ä¸ªServiceImplä½¿ç”¨ä¸åŒçš„Beanåç§°æ¥åŒºåˆ†ã€‚</p>
<pre><code class="hljs language-Java" lang="Java"><span class="hljs-comment">/**
 * çœŸå®æ•°æ®å®ç°ç±»ï¼šBeanå=realSalesBoardServiceï¼ˆå‰ç¼€+æ¥å£åé¦–å­—æ¯å°å†™ï¼‰
 */</span>
<span class="hljs-meta">@Service("realSalesBoardService")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RealSalesBoardServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">SalesBoardService</span> {

}
</code></pre>
<pre><code class="hljs language-Java" lang="Java"><span class="hljs-comment">/**
 * æ¼”ç¤ºæ•°æ®å®ç°ç±»ï¼šBeanå=demoSalesBoardServiceï¼ˆå‰ç¼€+æ¥å£åé¦–å­—æ¯å°å†™ï¼‰
 */</span>
<span class="hljs-meta">@Service("demoSalesBoardService")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DemoSalesBoardServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">SalesBoardService</span> {

}
</code></pre>
<p>è¦å®ç°åŠ¨æ€åˆ‡æ¢ï¼Œéœ€è¦è§£å†³å¦‚ä¸‹é—®é¢˜ï¼š</p>
<ol>
<li>Springbootæ³¨å…¥Beanä¹‹åå°±å›ºå®šäº†ï¼Œæ€ä¹ˆåœ¨ä¿®æ”¹é…ç½®ä¹‹åè®©Controllerå±‚åŠ¨æ€åˆ‡æ¢ä½¿ç”¨é…ç½®æŒ‡å®šçš„ServiceImplï¼›</li>
<li>æ€ä¹ˆé¿å…æ¯æ¬¡æ·»åŠ æ¥å£éƒ½è¦å†™å¤§é‡ä»£ç æ¥å®ç°è¿™ä¸ªåŠŸèƒ½ã€‚</li>
</ol>
<h2 data-id="heading-1">åŠ¨æ€åˆ‡æ¢</h2>
<p>åŠ¨æ€åˆ·æ–°é…ç½®å¯ä»¥ä½¿ç”¨@RefreshScopeæ³¨è§£ï¼Œè¿™ä¸ªæ³¨è§£çš„ä½œç”¨æ˜¯ï¼š<strong>åœ¨é…ç½®å˜åŒ–æ—¶ï¼Œæ ‡æ³¨äº†è¯¥æ³¨è§£çš„Beanå®ä¾‹çš„ç¼“å­˜ä¼šè¢«æ¸…ç©ºï¼Œä¸‹æ¬¡è·å–è¯¥Beanæ—¶ï¼ŒSpringä¼šé‡æ–°åˆ›å»ºè¯¥Beanï¼Œå¹¶ä¸”æ³¨å…¥æœ€æ–°çš„é…ç½®å€¼ã€‚</strong></p>
<p>å¯ä»¥åˆ›å»ºä¸€ä¸ªå·¥å‚ç±»ï¼ŒControllerä¸å†æ³¨å…¥ä¸šåŠ¡å±‚å®ç°ç±»å¯¹è±¡ï¼Œè€Œæ˜¯é€šè¿‡è¿™ä¸ªå·¥å‚ç±»ä¸»åŠ¨å»è·å–ã€‚</p>
<p>è€Œè¿™ä¸ªå·¥å‚ç±»æ ‡æ³¨@RefreshScopeï¼Œåœ¨æ¯æ¬¡é…ç½®æ›´æ–°æ—¶ï¼Œæ ¹æ®æ–°çš„é…ç½®æ¥åŠ¨æ€è·å–è¯¥Serviceçš„å®ç°ç±»ã€‚</p>
<p>ä¸åŒçœ‹æ¿çš„Serviceæ¥å£å¯¹åº”çš„é…ç½®é”®å¯ä»¥ç”¨è‡ªå®šä¹‰æ³¨è§£æ¥æ ‡è¯†ï¼Œé…ç½®å€¼å¯¹åº”çš„ä¸¤ç§æ¨¡å¼ï¼ˆçœŸå®æ¨¡å¼realï¼Œæ¼”ç¤ºæ¨¡å¼demoï¼‰å¯ä»¥ç”¨æšä¸¾ç±»æ¥å£°æ˜ã€‚</p>
<p>çœ‹ä¸€ä¸‹Controllerçš„ä»£ç å°±èƒ½å¾ˆå®¹æ˜“ç†è§£è¿™ä¸ªæ€è·¯ï¼š</p>
<pre><code class="hljs language-Java" lang="Java"><span class="hljs-meta">@RestController</span>
<span class="hljs-meta">@RequestMapping("/board")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BoardController</span> {
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> BoardServiceFactory boardServiceFactory;

    <span class="hljs-meta">@GetMapping("/sales")</span>
    <span class="hljs-keyword">public</span> Result&lt;SalesVO&gt; <span class="hljs-title function_">querySales</span><span class="hljs-params">(
            <span class="hljs-meta">@RequestParam</span> LocalDate start,
            <span class="hljs-meta">@RequestParam</span> LocalDate end)</span> {
        <span class="hljs-comment">// æ ¸å¿ƒï¼šä»å·¥å‚è·å–å½“å‰ç”Ÿæ•ˆçš„Serviceï¼Œè°ƒç”¨ç»Ÿä¸€æ¥å£</span>
        <span class="hljs-type">BoardService</span> <span class="hljs-variable">boardService</span> <span class="hljs-operator">=</span> boardServiceFactory.getCurrentBoardService();
        <span class="hljs-type">SalesVO</span> <span class="hljs-variable">salesVO</span> <span class="hljs-operator">=</span> boardService.querySalesData(start, end);
        <span class="hljs-keyword">return</span> Result.success(salesVO);
    }

    <span class="hljs-meta">@GetMapping("/user")</span>
    <span class="hljs-keyword">public</span> Result&lt;UserVO&gt; <span class="hljs-title function_">queryUser</span><span class="hljs-params">()</span> {
        <span class="hljs-type">BoardService</span> <span class="hljs-variable">boardService</span> <span class="hljs-operator">=</span> boardServiceFactory.getCurrentBoardService();
        <span class="hljs-keyword">return</span> Result.success(boardService.queryUserData());
    }
}
</code></pre>
<p>è‡ªå®šä¹‰æ³¨è§£@DynamicServiceï¼š</p>
<pre><code class="hljs language-Java" lang="Java"><span class="hljs-keyword">import</span> java.lang.annotation.*;

<span class="hljs-comment">/**
 * æ ‡æ³¨éœ€è¦åŠ¨æ€åˆ‡æ¢å®ç°ç±»çš„æ¥å£
 */</span>
<span class="hljs-meta">@Target(ElementType.TYPE)</span> <span class="hljs-comment">// ä»…ä½œç”¨äºæ¥å£</span>
<span class="hljs-meta">@Retention(RetentionPolicy.RUNTIME)</span> <span class="hljs-comment">// è¿è¡Œæ—¶å¯åå°„è·å–</span>
<span class="hljs-keyword">public</span> <span class="hljs-meta">@interface</span> DynamicService {
    <span class="hljs-comment">/**
     * Nacosé…ç½®é¡¹Keyï¼ˆå¦‚board.sales.service.typeï¼‰
     */</span>
    String <span class="hljs-title function_">configKey</span><span class="hljs-params">()</span>;

    <span class="hljs-comment">/**
     * é»˜è®¤æ•°æ®ç±»å‹ï¼ˆå…œåº•ï¼‰
     */</span>
    DynamicServiceType <span class="hljs-title function_">defaultType</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> DynamicServiceType.REAL;
}
</code></pre>
<p>æšä¸¾ï¼š</p>
<pre><code class="hljs language-Java" lang="Java"><span class="hljs-comment">/**
 * åŠ¨æ€æœåŠ¡æ•°æ®ç±»å‹ï¼šRealï¼ˆçœŸå®æ•°æ®ï¼‰/ Demoï¼ˆæ¼”ç¤ºæ•°æ®ï¼‰
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">DynamicServiceType</span> {
    REAL(<span class="hljs-string">"real"</span>, <span class="hljs-string">"çœŸå®ä¸šåŠ¡æ•°æ®ï¼ˆå†…éƒ¨ä½¿ç”¨ï¼‰"</span>),
    DEMO(<span class="hljs-string">"demo"</span>, <span class="hljs-string">"æ¼”ç¤ºæ•°æ®ï¼ˆå®¢æˆ·/å¯¹å¤–å±•ç¤ºï¼‰"</span>);

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> String beanPrefix; <span class="hljs-comment">// å®ç°ç±»Beanåå‰ç¼€ï¼ˆå¦‚realBoardServiceï¼‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> String desc;

    DynamicServiceType(String beanPrefix, String desc) {
        <span class="hljs-built_in">this</span>.beanPrefix = beanPrefix;
        <span class="hljs-built_in">this</span>.desc = desc;
    }

    <span class="hljs-comment">// ä»Nacosé…ç½®å€¼è·å–æšä¸¾ï¼ˆå…œåº•é»˜è®¤REALï¼‰</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> DynamicServiceType <span class="hljs-title function_">fromConfig</span><span class="hljs-params">(String configValue)</span> {
        <span class="hljs-keyword">for</span> (DynamicServiceType type : values()) {
            <span class="hljs-keyword">if</span> (type.beanPrefix.equals(configValue)) {
                <span class="hljs-keyword">return</span> type;
            }
        }
        <span class="hljs-keyword">return</span> REAL;
    }

    <span class="hljs-comment">// Getter</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getBeanPrefix</span><span class="hljs-params">()</span> { <span class="hljs-keyword">return</span> beanPrefix; }
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getDesc</span><span class="hljs-params">()</span> { <span class="hljs-keyword">return</span> desc; }
}
</code></pre>
<p>æ ‡æ³¨Serviceæ¥å£ï¼š</p>
<pre><code class="hljs language-Java" lang="Java"><span class="hljs-comment">/**
 * çœ‹æ¿é”€å”®æ•°æ®æ¥å£ï¼ˆç»Ÿä¸€è°ƒç”¨å…¥å£ï¼‰
 */</span>
<span class="hljs-meta">@DynamicService(
    configKey = "board.sales.service.type", // Nacosé…ç½®Keyï¼ˆç‹¬ç«‹é…ç½®ï¼‰
    defaultType = DynamicServiceType.REAL
)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">SalesBoardService</span> {

}
</code></pre>
<p>ä½œä¸ºæ ¸å¿ƒçš„å·¥å‚ç±»çš„å®ç°å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-Java" lang="Java"><span class="hljs-meta">@Component</span>
<span class="hljs-meta">@RefreshScope</span> <span class="hljs-comment">// Nacosé…ç½®å˜æ›´æ—¶ï¼Œåˆ·æ–°å·¥å‚å®ä¾‹</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">GenericDynamicServiceFactory</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">InitializingBean</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">Logger</span> <span class="hljs-variable">log</span> <span class="hljs-operator">=</span> LoggerFactory.getLogger(GenericDynamicServiceFactory.class);

    <span class="hljs-comment">// ç¯å¢ƒé…ç½®ï¼ˆè¯»å–Nacosé…ç½®ï¼‰</span>
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> Environment environment;

    <span class="hljs-comment">// ç¼“å­˜ï¼šæ¥å£Class â†’ æ³¨è§£é…ç½®ï¼ˆé¿å…é‡å¤åå°„ï¼‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Map&lt;Class&lt;?&gt;, DynamicService&gt; annotationCache = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcurrentHashMap</span>&lt;&gt;();
    <span class="hljs-comment">// ç¼“å­˜ï¼šæ¥å£Class â†’ å½“å‰ç”Ÿæ•ˆçš„å®ç°ç±»å®ä¾‹ï¼ˆçº¿ç¨‹å®‰å…¨ï¼‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Map&lt;Class&lt;?&gt;, Object&gt; serviceCache = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcurrentHashMap</span>&lt;&gt;();

    <span class="hljs-comment">// æ¥å£æ‰€åœ¨åŒ…ï¼ˆéœ€ä¿®æ”¹ä¸ºå®é™…åŒ…è·¯å¾„ï¼‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">BASE_PACKAGE</span> <span class="hljs-operator">=</span> <span class="hljs-string">"com.xxx.board.service"</span>;

    <span class="hljs-comment">/**
     * åˆå§‹åŒ–ï¼šæ‰«ææ‰€æœ‰<span class="hljs-doctag">@DynamicService</span>æ¥å£ï¼ŒåŠ è½½é»˜è®¤å®ç°
     */</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">afterPropertiesSet</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// 1. SpringåŸç”Ÿæ‰«æå™¨ï¼šåªç­›é€‰å¸¦æ³¨è§£çš„æ¥å£</span>
        <span class="hljs-type">ClassPathScanningCandidateComponentProvider</span> <span class="hljs-variable">scanner</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ClassPathScanningCandidateComponentProvider</span>(<span class="hljs-literal">false</span>) {
            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">protected</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isCandidateComponent</span><span class="hljs-params">(BeanDefinition beanDefinition)</span> {
                <span class="hljs-keyword">return</span> beanDefinition.getMetadata().isInterface(); <span class="hljs-comment">// ä»…å¤„ç†æ¥å£</span>
            }
        };
        scanner.addIncludeFilter(<span class="hljs-keyword">new</span> <span class="hljs-title class_">AnnotationTypeFilter</span>(DynamicService.class));

        <span class="hljs-comment">// 2. æ‰«æå¹¶ç¼“å­˜æ³¨è§£ã€åˆå§‹åŒ–å®ä¾‹</span>
        Set&lt;BeanDefinition&gt; definitions = scanner.findCandidateComponents(BASE_PACKAGE);
        <span class="hljs-keyword">for</span> (BeanDefinition def : definitions) {
            <span class="hljs-keyword">try</span> {
                Class&lt;?&gt; interfaceClazz = Class.forName(def.getBeanClassName());
                <span class="hljs-type">DynamicService</span> <span class="hljs-variable">annotation</span> <span class="hljs-operator">=</span> interfaceClazz.getAnnotation(DynamicService.class);
                annotationCache.put(interfaceClazz, annotation);
                refreshServiceInstance(interfaceClazz);
            } <span class="hljs-keyword">catch</span> (ClassNotFoundException e) {
                log.error(<span class="hljs-string">"æ‰«æåŠ¨æ€æœåŠ¡æ¥å£å¤±è´¥"</span>, e);
            }
        }
    }

    <span class="hljs-comment">/**
     * åˆ·æ–°æŒ‡å®šæ¥å£çš„å®ç°ç±»å®ä¾‹ï¼ˆé…ç½®å˜æ›´æ—¶è°ƒç”¨ï¼‰
     */</span>
    <span class="hljs-keyword">private</span> &lt;T&gt; <span class="hljs-keyword">void</span> <span class="hljs-title function_">refreshServiceInstance</span><span class="hljs-params">(Class&lt;T&gt; interfaceClazz)</span> {
        <span class="hljs-type">DynamicService</span> <span class="hljs-variable">annotation</span> <span class="hljs-operator">=</span> annotationCache.get(interfaceClazz);
        <span class="hljs-keyword">if</span> (annotation == <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(<span class="hljs-string">"æ¥å£"</span> + interfaceClazz.getName() + <span class="hljs-string">"æœªæ ‡æ³¨@DynamicService"</span>);
        }

        <span class="hljs-comment">// 1. ä»Nacosè·å–é…ç½®ï¼Œè½¬æ¢ä¸ºæšä¸¾ç±»å‹</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">configValue</span> <span class="hljs-operator">=</span> environment.getProperty(annotation.configKey(), annotation.defaultType().getBeanPrefix());
        <span class="hljs-type">DynamicServiceType</span> <span class="hljs-variable">serviceType</span> <span class="hljs-operator">=</span> DynamicServiceType.fromConfig(configValue);

        <span class="hljs-comment">// 2. æŒ‰è§„èŒƒæ‹¼æ¥å®ç°ç±»Beanåï¼ˆå‰ç¼€+æ¥å£åé¦–å­—æ¯å°å†™ï¼‰</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">interfaceName</span> <span class="hljs-operator">=</span> interfaceClazz.getSimpleName();
        <span class="hljs-type">String</span> <span class="hljs-variable">beanName</span> <span class="hljs-operator">=</span> serviceType.getBeanPrefix() +
                          interfaceName.substring(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>).toLowerCase() +
                          interfaceName.substring(<span class="hljs-number">1</span>);

        <span class="hljs-comment">// 3. ç”¨é¡¹ç›®SpringUtilsè·å–Beanï¼Œæ›´æ–°ç¼“å­˜</span>
        <span class="hljs-type">T</span> <span class="hljs-variable">serviceInstance</span> <span class="hljs-operator">=</span> SpringUtils.getBean(beanName, interfaceClazz);
        serviceCache.put(interfaceClazz, serviceInstance);

        <span class="hljs-comment">// å®¡è®¡æ—¥å¿—ï¼ˆä¾¿äºè¿½æº¯ï¼‰</span>
        log.info(<span class="hljs-string">"åŠ¨æ€æœåŠ¡åˆ‡æ¢ï¼šæ¥å£={}, é…ç½®Key={}, ç”Ÿæ•ˆç±»å‹={}, Beanå={}"</span>,
                interfaceClazz.getSimpleName(), annotation.configKey(), serviceType.getDesc(), beanName);
    }

    <span class="hljs-comment">/**
     * å¯¹å¤–æä¾›ï¼šè·å–æ¥å£å½“å‰ç”Ÿæ•ˆçš„å®ç°ç±»ï¼ˆä¾›åç½®å¤„ç†å™¨è°ƒç”¨ï¼‰
     */</span>
    <span class="hljs-meta">@SuppressWarnings("unchecked")</span>
    <span class="hljs-keyword">public</span> &lt;T&gt; T <span class="hljs-title function_">getService</span><span class="hljs-params">(Class&lt;T&gt; interfaceClazz)</span> {
        <span class="hljs-keyword">if</span> (!serviceCache.containsKey(interfaceClazz)) {
            refreshServiceInstance(interfaceClazz);
        }
        <span class="hljs-keyword">return</span> (T) serviceCache.get(interfaceClazz);
    }

    <span class="hljs-comment">/**
     * é…ç½®åˆ·æ–°äº‹ä»¶ç›‘å¬ï¼šæ‰¹é‡æ›´æ–°æ‰€æœ‰åŠ¨æ€æœåŠ¡å®ä¾‹
     */</span>
    <span class="hljs-meta">@EventListener(RefreshScopeRefreshedEvent.class)</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onConfigRefresh</span><span class="hljs-params">()</span> {
        log.info(<span class="hljs-string">"Nacosé…ç½®å˜æ›´ï¼Œæ‰¹é‡åˆ·æ–°åŠ¨æ€æœåŠ¡"</span>);
        annotationCache.keySet().forEach(<span class="hljs-built_in">this</span>::refreshServiceInstance);
    }
}
</code></pre>
<p>ä»¥ä¸‹æ˜¯æˆ‘æå‡ºçš„ç–‘é—®å’ŒAIçš„è§£ç­”ï¼š</p>
<ol>
<li>é…ç½®çš„è¯»å–æ²¡æœ‰ä½¿ç”¨@Valueï¼Œè€Œæ˜¯ä½¿ç”¨<code>org.springframework.core.env.Environment</code>ï¼Œå› ä¸º@Valueä¸æ”¯æŒåŠ¨æ€çš„é…ç½®é”®ï¼Œåªåšå•ä¸ªServiceçš„åˆ‡æ¢è¿˜è¡Œï¼Œä½†ä¸åŒServiceçš„é…ç½®é”®ä¸ä¸€æ ·ï¼Œå°±æ²¡æ³•ç”¨@Valueäº†ï¼›</li>
<li>SpringUtilsæ˜¯æˆ‘æ‰€åšé¡¹ç›®é‡Œé¢è‡ªå¸¦çš„ä¸€ä¸ªå·¥å…·ç±»ï¼Œå¯ä»¥ç”¨â€œå®ç°ApplicationContextAwareæ¥å£å¹¶è·å–ApplicationContextâ€æ¥æ›¿ä»£ï¼›</li>
<li>ä¹‹æ‰€ä»¥ä¸ç”¨getBeansWithAnnotationæ–¹æ³•æ¥æ”¶é›†æ ‡æ³¨äº†è‡ªå®šä¹‰æ³¨è§£çš„Beanï¼Œæ˜¯å› ä¸ºå®ƒæ”¶é›†çš„æ˜¯Beanå®ä¾‹ï¼Œè€Œæˆ‘ä»¬éœ€è¦è·å–çš„æ˜¯æ ‡æ³¨äº†è‡ªå®šä¹‰æ³¨è§£çš„Serviceæ¥å£ï¼Œæ‰€ä»¥é‡‡ç”¨åˆå§‹åŒ–æ—¶æ‰«æå¹¶ç¼“å­˜ã€‚</li>
<li>@PostConstructè™½ç„¶å¯ä»¥åœ¨è¿™é‡Œæ›¿ä»£afterPropertiesSetæ¥è¿›è¡Œåˆå§‹åŒ–çš„æ‰«æé€»è¾‘ï¼Œä½†afterPropertiesSetæ‰§è¡Œæ—¶æœºæ›´æ™šï¼ˆBeançš„å±æ€§æ³¨å…¥å®Œæˆåï¼‰ï¼Œé€‚åˆä¾èµ–å…¶ä»–Beançš„åœºæ™¯ï¼Œåç»­å¦‚æœè¯¥å·¥å‚ç±»è¦æ³¨å…¥å…¶ä»–Beanï¼Œå°±ä¸éœ€è¦æ”¹åŠ¨ä»€ä¹ˆã€‚</li>
<li>ç”±äº@RefreshScopeæ˜¯æ‡’åŠ è½½ï¼Œåˆ‡æ¢é…ç½®åï¼Œç­‰åˆ°getServiceæ–¹æ³•è¢«é¦–æ¬¡è°ƒç”¨æ‰åˆ·æ–°ï¼Œå› æ­¤ç›‘å¬åˆ·æ–°äº‹ä»¶å¹¶ä¸»åŠ¨åˆ·æ–°ä¸€ä¸‹æœåŠ¡çŠ¶æ€ã€‚è¿™ä¸ªæ˜¯å¯é€‰çš„ï¼Œç®—æ˜¯AIé¢å¤–è€ƒè™‘çš„æƒ…å†µï¼Œæˆ‘è§‰å¾—æ”¾ç€ä¹Ÿä¸ç¢äº‹ï¼Œå°±æ²¡åˆ ã€‚</li>
</ol>
<h2 data-id="heading-2">åŠ¨æ€æ³¨å…¥</h2>
<p>æ ¸å¿ƒåŠŸèƒ½ä»¥ä¸Šæ–¹æ¡ˆå·²ç»å®ç°äº†ï¼Œåªä¸è¿‡æ¯ä¸ªçœ‹æ¿Controllerçš„æ¯ä¸ªæ¥å£éƒ½å¤šäº†ä¸€æ­¥æ‰‹åŠ¨è·å–Serviceå®ç°ç±»çš„è¯­å¥ã€‚</p>
<p>ä¸€ä¸¤ä¸ªæ¥å£è¿˜å¥½ï¼Œä½†åé¢æ‰©å±•èµ·æ¥è¦å‘½ã€‚</p>
<p>å¥½åœ¨æœ‰åŠæ³•ç®€åŒ–ã€‚æ•ˆæœå¦‚ä¸‹ï¼Œå’Œä»¥å‰ä¸€æ ·æ³¨å…¥Serviceï¼Œä½†æ˜¯@Autowiredæ”¹ä¸ºè‡ªå®šä¹‰æ³¨è§£@DynamicAutowired</p>
<pre><code class="hljs language-Java" lang="Java"><span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.*;

<span class="hljs-meta">@RestController</span>
<span class="hljs-meta">@RequestMapping("/board/sales")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SalesBoardController</span> {
    <span class="hljs-comment">// æ ¸å¿ƒç®€åŒ–ï¼šæ— éœ€æ³¨å…¥å·¥å‚ï¼Œç›´æ¥æ³¨å…¥æ¥å£</span>
    <span class="hljs-meta">@DynamicAutowired</span>
    <span class="hljs-keyword">private</span> SalesBoardService salesBoardService;

    <span class="hljs-meta">@GetMapping</span>
    <span class="hljs-keyword">public</span> Result&lt;SalesVO&gt; <span class="hljs-title function_">querySales</span><span class="hljs-params">(
            <span class="hljs-meta">@RequestParam</span> LocalDate startDate,
            <span class="hljs-meta">@RequestParam</span> LocalDate endDate)</span> {
        <span class="hljs-comment">// ç›´æ¥è°ƒç”¨ï¼Œå’Œæ™®é€š@Autowiredæ³¨å…¥æ— åŒºåˆ«</span>
        <span class="hljs-keyword">return</span> Result.success(salesBoardService.querySalesData(startDate, endDate));
    }
}
</code></pre>
<p>é¦–å…ˆå®šä¹‰ä¸€ä¸ªæ–°çš„è‡ªå®šä¹‰æ³¨è§£ç”¨äºæ ‡è®°è¦åŠ¨æ€æ³¨å…¥çš„å±æ€§ï¼š</p>
<pre><code class="hljs language-Java" lang="Java"><span class="hljs-comment">/**
 * åŠ¨æ€æœåŠ¡æ³¨å…¥æ³¨è§£ï¼šæ›¿ä»£æ‰‹åŠ¨è°ƒç”¨factory.getService()ï¼Œè‡ªåŠ¨æ³¨å…¥å½“å‰ç”Ÿæ•ˆå®ä¾‹
 */</span>
<span class="hljs-meta">@Target(ElementType.FIELD)</span> <span class="hljs-comment">// ä»…ä½œç”¨äºç±»å­—æ®µ</span>
<span class="hljs-meta">@Retention(RetentionPolicy.RUNTIME)</span>
<span class="hljs-meta">@interface</span> DynamicAutowired {
    <span class="hljs-comment">// ä»…ä½œä¸ºæ ‡è®°ï¼Œæ— éœ€é¢å¤–å±æ€§</span>
}
</code></pre>
<p>æ¥ç€å®šä¹‰ä¸€ä¸ªå¤„ç†å™¨ï¼Œå®ç° <strong>Spring Bean åç½®å¤„ç†å™¨ï¼ˆBeanPostProcessorï¼‰</strong>ï¼š</p>
<ol>
<li>åœ¨åˆå§‹åŒ–æ‰€æœ‰Beançš„æ—¶å€™ä¸ºæ ‡æ³¨äº†@DynamicAutowired æ³¨è§£çš„Beanæ³¨å…¥å½“å‰é…ç½®çš„åŠ¨æ€Serviceå®ç°ç±»å®ä¾‹ï¼›</li>
<li>ç›‘å¬é…ç½®åˆ·æ–°ï¼Œé€šè¿‡å·¥å‚åŠ¨æ€è·å–æœ€æ–°çš„ServiceImplå¹¶æ³¨å…¥ã€‚</li>
</ol>
<pre><code class="hljs language-Java" lang="Java"><span class="hljs-keyword">import</span> org.slf4j.Logger;
<span class="hljs-keyword">import</span> org.slf4j.LoggerFactory;
<span class="hljs-keyword">import</span> org.springframework.beans.BeansException;
<span class="hljs-keyword">import</span> org.springframework.beans.factory.annotation.Autowired;
<span class="hljs-keyword">import</span> org.springframework.beans.factory.config.BeanPostProcessor;
<span class="hljs-keyword">import</span> org.springframework.cloud.context.scope.refresh.RefreshScopeRefreshedEvent;
<span class="hljs-keyword">import</span> org.springframework.context.event.EventListener;
<span class="hljs-keyword">import</span> org.springframework.stereotype.Component;
<span class="hljs-keyword">import</span> org.springframework.util.ReflectionUtils;

<span class="hljs-keyword">import</span> java.lang.reflect.Field;
<span class="hljs-keyword">import</span> java.util.ArrayList;
<span class="hljs-keyword">import</span> java.util.List;
<span class="hljs-keyword">import</span> java.util.concurrent.locks.ReentrantLock;

<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DynamicAutowiredProcessor</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">BeanPostProcessor</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">Logger</span> <span class="hljs-variable">log</span> <span class="hljs-operator">=</span> LoggerFactory.getLogger(DynamicAutowiredProcessor.class);

    <span class="hljs-comment">// æ³¨å…¥åŸæœ‰é€šç”¨å·¥å‚ï¼ˆå¤ç”¨åˆ‡æ¢é€»è¾‘ï¼‰</span>
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> GenericDynamicServiceFactory dynamicServiceFactory;

    <span class="hljs-comment">// ç¼“å­˜ï¼šéœ€è¦åŠ¨æ€æ³¨å…¥çš„å­—æ®µï¼ˆé…ç½®åˆ·æ–°æ—¶é‡æ–°æ³¨å…¥ï¼‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> List&lt;FieldInjectInfo&gt; injectFieldCache = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">ReentrantLock</span> <span class="hljs-variable">lock</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ReentrantLock</span>();

    <span class="hljs-comment">/**
     * å­˜å‚¨éœ€è¦åŠ¨æ€æ³¨å…¥çš„å­—æ®µä¿¡æ¯
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FieldInjectInfo</span> {
        Object bean; <span class="hljs-comment">// æ‰€å±Beanï¼ˆå¦‚Controllerå®ä¾‹ï¼‰</span>
        Field field; <span class="hljs-comment">// è¦æ³¨å…¥çš„å­—æ®µï¼ˆå¦‚SalesBoardServiceï¼‰</span>

        FieldInjectInfo(Object bean, Field field) {
            <span class="hljs-built_in">this</span>.bean = bean;
            <span class="hljs-built_in">this</span>.field = field;
        }
    }

    <span class="hljs-comment">/**
     * Springåˆå§‹åŒ–Beanæ—¶æ‰§è¡Œï¼šæ‰«æ<span class="hljs-doctag">@DynamicAutowired</span>å­—æ®µå¹¶æ³¨å…¥å®ä¾‹
     */</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">postProcessBeforeInitialization</span><span class="hljs-params">(Object bean, String beanName)</span> <span class="hljs-keyword">throws</span> BeansException {
        <span class="hljs-comment">// æ‰«æå½“å‰Beançš„æ‰€æœ‰å­—æ®µ</span>
        ReflectionUtils.doWithFields(bean.getClass(), field -&gt; {
            <span class="hljs-comment">// æ‰¾åˆ°å¸¦@DynamicAutowiredçš„å­—æ®µ</span>
            <span class="hljs-keyword">if</span> (field.isAnnotationPresent(DynamicAutowired.class)) {
                lock.lock();
                <span class="hljs-keyword">try</span> {
                    <span class="hljs-comment">// 1. è·å–å­—æ®µç±»å‹ï¼ˆå¦‚SalesBoardServiceæ¥å£ï¼‰</span>
                    Class&lt;?&gt; fieldType = field.getType();
                    <span class="hljs-comment">// 2. é€šè¿‡é€šç”¨å·¥å‚è·å–å½“å‰ç”Ÿæ•ˆçš„å®ä¾‹</span>
                    <span class="hljs-type">Object</span> <span class="hljs-variable">serviceInstance</span> <span class="hljs-operator">=</span> dynamicServiceFactory.getService(fieldType);
                    <span class="hljs-comment">// 3. åå°„æ³¨å…¥å­—æ®µï¼ˆçªç ´privateè®¿é—®é™åˆ¶ï¼‰</span>
                    field.setAccessible(<span class="hljs-literal">true</span>);
                    field.set(bean, serviceInstance);
                    <span class="hljs-comment">// 4. ç¼“å­˜å­—æ®µä¿¡æ¯ï¼ˆé…ç½®åˆ·æ–°æ—¶é‡æ–°æ³¨å…¥ï¼‰</span>
                    injectFieldCache.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FieldInjectInfo</span>(bean, field));
                    log.info(<span class="hljs-string">"åŠ¨æ€æ³¨å…¥å­—æ®µï¼šBean={}, å­—æ®µ={}, æ³¨å…¥å®ä¾‹={}"</span>,
                            beanName, field.getName(), serviceInstance.getClass().getSimpleName());
                } <span class="hljs-keyword">catch</span> (IllegalAccessException e) {
                    log.error(<span class="hljs-string">"åŠ¨æ€æ³¨å…¥å­—æ®µå¤±è´¥"</span>, e);
                } <span class="hljs-keyword">finally</span> {
                    lock.unlock();
                }
            }
        });
        <span class="hljs-keyword">return</span> bean;
    }

    <span class="hljs-comment">/**
     * é…ç½®åˆ·æ–°äº‹ä»¶ç›‘å¬ï¼šé‡æ–°æ³¨å…¥æ‰€æœ‰åŠ¨æ€å­—æ®µï¼ˆä¿è¯å®ä¾‹æœ€æ–°ï¼‰
     */</span>
    <span class="hljs-meta">@EventListener(RefreshScopeRefreshedEvent.class)</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">refreshDynamicFields</span><span class="hljs-params">()</span> {
        lock.lock();
        <span class="hljs-keyword">try</span> {
            log.info(<span class="hljs-string">"é…ç½®åˆ·æ–°ï¼Œé‡æ–°æ³¨å…¥æ‰€æœ‰åŠ¨æ€æœåŠ¡å­—æ®µ"</span>);
            <span class="hljs-keyword">for</span> (FieldInjectInfo info : injectFieldCache) {
                Class&lt;?&gt; fieldType = info.field.getType();
                <span class="hljs-type">Object</span> <span class="hljs-variable">newInstance</span> <span class="hljs-operator">=</span> dynamicServiceFactory.getService(fieldType);
                info.field.setAccessible(<span class="hljs-literal">true</span>);
                info.field.set(info.bean, newInstance);
            }
        } <span class="hljs-keyword">catch</span> (IllegalAccessException e) {
            log.error(<span class="hljs-string">"é‡æ–°æ³¨å…¥åŠ¨æ€å­—æ®µå¤±è´¥"</span>, e);
        } <span class="hljs-keyword">finally</span> {
            lock.unlock();
        }
    }
}
</code></pre>
<h2 data-id="heading-3">æ·»åŠ é…ç½®</h2>
<p>æœ€åï¼Œå°±æ˜¯åœ¨nacosæˆ–è€…æœ¬åœ°é…ç½®é‡Œé¢åŠ ä¸Š@DynamicServiceæ³¨è§£ä¸­æ ‡æ³¨çš„é…ç½®é”®ã€‚</p>
<p>æœ€åæ•´ä½“çš„ç»“æ„å¦‚ä¸‹ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2a3155e9f41f4c6195334c2e6d92b6ba~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oan5oas5bCR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766152837&amp;x-signature=rCUNs4vUW0W9LJJ5tgesyMg5%2FdE%3D" alt="" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ğŸš€ AIGC å¦‚ä½•é‡å¡‘ Web å†…å®¹ç”Ÿäº§çš„ä»·å€¼é“¾ â€”â€” ä¸€åœºâ€œç¡…åŸºæ–‡è‰ºå¤å…´â€çš„æŠ€æœ¯å˜é©]]></title>    <link>https://juejin.cn/post/7582848701267623971</link>    <guid>https://juejin.cn/post/7582848701267623971</guid>    <pubDate>2025-12-13T02:58:02.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582848701267623971" data-draft-id="7582845425402314792" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ğŸš€ AIGC å¦‚ä½•é‡å¡‘ Web å†…å®¹ç”Ÿäº§çš„ä»·å€¼é“¾ â€”â€” ä¸€åœºâ€œç¡…åŸºæ–‡è‰ºå¤å…´â€çš„æŠ€æœ¯å˜é©"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,å…¨æ ˆ,AIGC"/> <meta itemprop="datePublished" content="2025-12-13T02:58:02.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="LeonGao"/> <meta itemprop="url" content="https://juejin.cn/user/3976252950591149"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ğŸš€ AIGC å¦‚ä½•é‡å¡‘ Web å†…å®¹ç”Ÿäº§çš„ä»·å€¼é“¾ â€”â€” ä¸€åœºâ€œç¡…åŸºæ–‡è‰ºå¤å…´â€çš„æŠ€æœ¯å˜é©
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3976252950591149/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    LeonGao
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-13T02:58:02.000Z" title="Sat Dec 13 2025 02:58:02 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body blockquote&gt;:first-child{margin-top:0}.markdown-body blockquote&gt;:last-child{margin-bottom:0}.markdown-body{overflow:hidden;line-height:1.75;font-size:15px;background-image:linear-gradient(90deg,rgba(72,42,10,.05) 5%,rgba(72,42,10,0) 0),linear-gradient(1turn,rgba(72,42,10,.05) 5%,rgba(72,42,10,0) 0);background-size:20px 20px;background-position:50%;padding-top:0!important}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{position:relative;display:flex;border-bottom:5px solid #6d4e00;line-height:35px;letter-spacing:1px;font-size:25px;padding-left:25px;color:#664900;text-shadow:1px 1px 1px #8a6200;padding-bottom:0}.markdown-body h1:before{content:"";display:flex;position:absolute;left:0;top:3px;bottom:0;margin:auto;width:20px;height:20px;background-size:20px 20px;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAQlBMVEVHcEwlRnqtZBj76q4lRnolRnolRnolRnolRnokRnr/gGtrVUeLXDBKTl+hYSHasW7Ik0zs0JG4dCvUdEE0SW+rYxrLQJfjAAAACnRSTlMA////0H/xUaMi5MCoTwAACfVJREFUeNrtnQl3qygUgJ9GXAqosfL//+pgmgXwXmRNJGdu55xO+6rx8+6I8O9fehmGriN93zdN07bVXdpW/ih/SbpuGP6dXbpOXv7z2i3S9ISck2eQOnAhMHG64VQQbmrAaM4B05GmipaGdB+m6BNQPBXzMYtKR3EPbB/RS5eY4g+lIW9WBqnySCvVMrzRpqqs0g9nwVg5p1KYlHEchRT5bftp+y3n6xlQDjAkABtrKULU9f377ev+4/1/NiT+URRiZRhrcZP6WLa/Gq005BORaqXsdYEuHPIP798ZxSyt6d5sVfxJESRCsvB32lfXwhRjnUBGmKXNoJQe04VIASJqRC/9G7yDsyQMiloYz+0pHYghEoPISAGgpDSvHsCoMwmA0mfjSG5UOsqah2RodkljzMkhZZdamiEDB8+Nsbk9T04yGNljDXGOZZ6u0+Tj9DuvbyNJBuPO0ABtLNPlJtfZJ4CNNCWJoY8gddwxNpm9YrHh9DEkBoeMud4Kma8XRZaYpBJOYvg59U9wOsblMvmGrzQe30dyqFZ1dxPfO0FT5BOdw989THVs4q1TFk+iN4PMu7CaLpd4EJOExNaJLE4d0xQKYpJ0cY5Ozcwwu6WOu2cs9TUYxPB4b4fvLRzTUXbT1HH7y0BnB0j6CAehkPFfFzd1TMsi6sU1/P4VM9NiISHBlYnBMR+kad075sXlmMehj1twnfTUqJH4GJfqIKte7S72emPnHbdiYHIB0e6ATjKq1UoTaFh6wBL2csMIVo9fH/v6QRHAgoxrOHQQxG/36tC1ODmGOeBGBRmXalgcdhDQ1xF1vI6a3DF2d4r7G1enOUgNOshlFq7qUCxrca9ldiCam7ilxRbP6JbOYsYtfLFmkcXEgLG1DN/6eroxHjqh5bh+Uw27e1oWVK7pN+AqwzUcq/UYTPw8nWufLFBHN2zcxLRYlmGPs6rA2Wy0uJe/E7TknbHIa1WH1bLA8DAj3JpxET+FCNCWZ5uNT6jxTPZK/1mXoCBeKlGLRT2lP69XN3XdqqCojKX1ZVda6iD2McjeXSHa0I+AHd2InGAJgjRVM6gOBfygDrarRJnho6eQBbrns+HkcNUCWtYClJa66qFgPbqqZEBTCOAgRqxCOhQBWpZeIC6QBq91hEoI5unTjsMsK9DCFigY9WNn19hgVCrELalrTw6WnYMYzjHhQ2/7G2xTx1HvwpzSe4cVi5ORQQwMW9+72FU5L4gGsa6Yu1RcDeIhs64Qs8izt0vGH+n9/IKaIlYpM2UqkYOrwwq5CgBjWpyGtxaonxe4KaJ3hx+7O0HaqVkxLBPj8FmBVmjNevIUFhUuDmMq5NDV9RwyPe/95IvxAhG7ymqxHGE5sZJL2kPLUhUinkXfrnFwGFwXD99djNLSFh/meXEb2B6Oyiwm0I7BC+OlTlOVPk9K8CIYzu5YHwKDTI6XAo5lz3WEqEXwQRKhh5cyLa6D81P4PXBw984as9YaGXHwx4Ba8rmOldUat/BHt9cQ38AaljnBdCJqs60OcXVDJZP//ZwSWtV9FpHNtgg22KuYx/U2tB5Mcp1TYOiphNhiFjgWeJ3DL2OZpuuUisIoUyzZEJ76I+LmyqWdv8LwnEiwMYczihjxeqtBsuFJSTg2oD1ETQx4v6D1VleSZW1xCwvAfVGWpQ069kgrQksAUW2rReYzsboIjSABuDQX0QJwB9cnZVgWVgE31vrklAJnEmVObykgYCk/VGX5OlpuKb5eiovUAvJ2tMstw0kIkNdpiSA91K6XA6K8CVCyr4PePhTo65q3DyX7OpTbSVk1PB62mhJ9HSpSqtKaESxsFRm0tLBVcvTV+vbBrLRK4hC7aitN9B0ZpX6vNMgjGIt5ZdmMv32KrmprD1afsPd4FEhThK0+WfTl3kpd482AGvG3jQdZK1+t8ireDswhofigRb3fxfI/4jj+xkffUX/1ccxxhEP9qyyBEH9Cx9vhf8TB7eiSpBHjZVSa4whQMJC1TqIR6q8RERtjOr2ID0yx3oYi0oAIvZCPz4eG64p3ObuREeOHUIR3MBVJwq9yll5P7KHdiPBOiOoRa/AjXz21J3k04l+i8OjErj4kaXWQiIVO/EvA+KLRAEnUVomtjPd6SvR3RLoeMT54nKFH1EqtkkEGFaQuTlSQrsxhRiOIt51S/Ho8B11+FUlwRaHnU4utEI38/mgSjRJ8PhWEtN6Z6WcncQOU4efjKoh3zfi7/+DfhPrwOZ9a/iYBiVJJxPlei3CqIDTYEqAPFow5/c71fAdVIwmo4n+cTIGbr2n9NULAE5ifcNNS63hvEOFk0wxYnICBBZ0I9xERBVILF0uggNdxuOkR4S6ngvgPmArzHv4KpMKGQFjQ+Rw6q9dC6R6dgZaJF7RVWIH0BTY9h+fz0ohHOyLuy+He/hN4GUR3/RxcBx2f76izarI9CaXmzRmhNQuSfIgJkva5GzN6HJbhQxCNsDGDSh56plmef6sg2eaXPsYBt5W+H6VE6omG6hOS1w4hiTWiThbJ1YO+RSO1vrpMlomf6nhQGz0m7qT6W04XOUHyzhZ4rkG+0hxL66oDW9mnPWyL3TMmssxyQUwr01CHX7b2OvUIaqS48TnMtAoEQTQixJeAlDfSiGmk/l8jpwIpTyFqOfeNIHWBooC036ERtUQp2tm/CKT5jjySbxTlvUVj2yhjvyWDVL3yfKRojXwLSEWUp7q0PBAKPp7m5YGoT3WH7wAZ1BeOywNZv3Gak/LIqriwxbQ5jaTcsEW1eb+FvoWo+zr5V/IUOvNtsapU2zJXSyj0xVB13sPfq0kkZA7dubIIKXIlJ8Cy7u+BN22RVcr+peOuxHdcBbA04FAVmEoEtO5vX55K4KVZS1QJvBBzU1rgUl8JapBNYIowLoZtD9NWRTWKqqe36L48BSz8QPH9epqqIDehlh2UuqocEmrdV7AvhuRoM74m80yeDIEX3ppreNN235FxV58DNjhswn5K8zK21+5ctjut6NmUIoy9tVvitnHr2VDM3ahtW8KQ/Vbsp9GGiWHfk8skyTSFz9/HdxhHe4uR/RxX/mG1SGXwypcDJNmCMfucZ/C1CuCQUbiBUDYbe7tiRkZX8GIat50d+wqR1fdN7ygGzrHrcN4kGFHK02cil5M6INgQVsvnNz77T5PqUFYJJInYmIBplJfP5On4eiOwYfhuCD44oLyYVs43rI1rk3H7usttzq8Qo3j84vavN9mOkAeuq8dHEd9NtCVKX51Oen+MM6IEYvz5StOehKLpIjD+nKU5AQWJpLizdB+1sb5LQvFRxbSJVGHmSdK/0WWaPguEYmcSJ68aWkK6rAw6jwSSCmrTWVHT96R7HwHANEgqybVJL+E2vE2q7Uu91Gr73SbbNUvZDtiOlCeIv4r/AI+0XUwz1lvcAAAAAElFTkSuQmCC")}.markdown-body h2{position:relative;padding:0 0 0 20px;font-size:20px;font-weight:700;color:#614500}.markdown-body h2:before{content:"";position:absolute;top:3px;bottom:0;left:0;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAQlBMVEVHcEwlRnqtZBj76q4lRnolRnolRnolRnolRnokRnr/gGtrVUeLXDBKTl+hYSHasW7Ik0zs0JG4dCvUdEE0SW+rYxrLQJfjAAAACnRSTlMA////0H/xUaMi5MCoTwAACfVJREFUeNrtnQl3qygUgJ9GXAqosfL//+pgmgXwXmRNJGdu55xO+6rx8+6I8O9fehmGriN93zdN07bVXdpW/ih/SbpuGP6dXbpOXv7z2i3S9ISck2eQOnAhMHG64VQQbmrAaM4B05GmipaGdB+m6BNQPBXzMYtKR3EPbB/RS5eY4g+lIW9WBqnySCvVMrzRpqqs0g9nwVg5p1KYlHEchRT5bftp+y3n6xlQDjAkABtrKULU9f377ev+4/1/NiT+URRiZRhrcZP6WLa/Gq005BORaqXsdYEuHPIP798ZxSyt6d5sVfxJESRCsvB32lfXwhRjnUBGmKXNoJQe04VIASJqRC/9G7yDsyQMiloYz+0pHYghEoPISAGgpDSvHsCoMwmA0mfjSG5UOsqah2RodkljzMkhZZdamiEDB8+Nsbk9T04yGNljDXGOZZ6u0+Tj9DuvbyNJBuPO0ABtLNPlJtfZJ4CNNCWJoY8gddwxNpm9YrHh9DEkBoeMud4Kma8XRZaYpBJOYvg59U9wOsblMvmGrzQe30dyqFZ1dxPfO0FT5BOdw989THVs4q1TFk+iN4PMu7CaLpd4EJOExNaJLE4d0xQKYpJ0cY5Ozcwwu6WOu2cs9TUYxPB4b4fvLRzTUXbT1HH7y0BnB0j6CAehkPFfFzd1TMsi6sU1/P4VM9NiISHBlYnBMR+kad075sXlmMehj1twnfTUqJH4GJfqIKte7S72emPnHbdiYHIB0e6ATjKq1UoTaFh6wBL2csMIVo9fH/v6QRHAgoxrOHQQxG/36tC1ODmGOeBGBRmXalgcdhDQ1xF1vI6a3DF2d4r7G1enOUgNOshlFq7qUCxrca9ldiCam7ilxRbP6JbOYsYtfLFmkcXEgLG1DN/6eroxHjqh5bh+Uw27e1oWVK7pN+AqwzUcq/UYTPw8nWufLFBHN2zcxLRYlmGPs6rA2Wy0uJe/E7TknbHIa1WH1bLA8DAj3JpxET+FCNCWZ5uNT6jxTPZK/1mXoCBeKlGLRT2lP69XN3XdqqCojKX1ZVda6iD2McjeXSHa0I+AHd2InGAJgjRVM6gOBfygDrarRJnho6eQBbrns+HkcNUCWtYClJa66qFgPbqqZEBTCOAgRqxCOhQBWpZeIC6QBq91hEoI5unTjsMsK9DCFigY9WNn19hgVCrELalrTw6WnYMYzjHhQ2/7G2xTx1HvwpzSe4cVi5ORQQwMW9+72FU5L4gGsa6Yu1RcDeIhs64Qs8izt0vGH+n9/IKaIlYpM2UqkYOrwwq5CgBjWpyGtxaonxe4KaJ3hx+7O0HaqVkxLBPj8FmBVmjNevIUFhUuDmMq5NDV9RwyPe/95IvxAhG7ymqxHGE5sZJL2kPLUhUinkXfrnFwGFwXD99djNLSFh/meXEb2B6Oyiwm0I7BC+OlTlOVPk9K8CIYzu5YHwKDTI6XAo5lz3WEqEXwQRKhh5cyLa6D81P4PXBw984as9YaGXHwx4Ba8rmOldUat/BHt9cQ38AaljnBdCJqs60OcXVDJZP//ZwSWtV9FpHNtgg22KuYx/U2tB5Mcp1TYOiphNhiFjgWeJ3DL2OZpuuUisIoUyzZEJ76I+LmyqWdv8LwnEiwMYczihjxeqtBsuFJSTg2oD1ETQx4v6D1VleSZW1xCwvAfVGWpQ069kgrQksAUW2rReYzsboIjSABuDQX0QJwB9cnZVgWVgE31vrklAJnEmVObykgYCk/VGX5OlpuKb5eiovUAvJ2tMstw0kIkNdpiSA91K6XA6K8CVCyr4PePhTo65q3DyX7OpTbSVk1PB62mhJ9HSpSqtKaESxsFRm0tLBVcvTV+vbBrLRK4hC7aitN9B0ZpX6vNMgjGIt5ZdmMv32KrmprD1afsPd4FEhThK0+WfTl3kpd482AGvG3jQdZK1+t8ireDswhofigRb3fxfI/4jj+xkffUX/1ccxxhEP9qyyBEH9Cx9vhf8TB7eiSpBHjZVSa4whQMJC1TqIR6q8RERtjOr2ID0yx3oYi0oAIvZCPz4eG64p3ObuREeOHUIR3MBVJwq9yll5P7KHdiPBOiOoRa/AjXz21J3k04l+i8OjErj4kaXWQiIVO/EvA+KLRAEnUVomtjPd6SvR3RLoeMT54nKFH1EqtkkEGFaQuTlSQrsxhRiOIt51S/Ho8B11+FUlwRaHnU4utEI38/mgSjRJ8PhWEtN6Z6WcncQOU4efjKoh3zfi7/+DfhPrwOZ9a/iYBiVJJxPlei3CqIDTYEqAPFow5/c71fAdVIwmo4n+cTIGbr2n9NULAE5ifcNNS63hvEOFk0wxYnICBBZ0I9xERBVILF0uggNdxuOkR4S6ngvgPmArzHv4KpMKGQFjQ+Rw6q9dC6R6dgZaJF7RVWIH0BTY9h+fz0ohHOyLuy+He/hN4GUR3/RxcBx2f76izarI9CaXmzRmhNQuSfIgJkva5GzN6HJbhQxCNsDGDSh56plmef6sg2eaXPsYBt5W+H6VE6omG6hOS1w4hiTWiThbJ1YO+RSO1vrpMlomf6nhQGz0m7qT6W04XOUHyzhZ4rkG+0hxL66oDW9mnPWyL3TMmssxyQUwr01CHX7b2OvUIaqS48TnMtAoEQTQixJeAlDfSiGmk/l8jpwIpTyFqOfeNIHWBooC036ERtUQp2tm/CKT5jjySbxTlvUVj2yhjvyWDVL3yfKRojXwLSEWUp7q0PBAKPp7m5YGoT3WH7wAZ1BeOywNZv3Gak/LIqriwxbQ5jaTcsEW1eb+FvoWo+zr5V/IUOvNtsapU2zJXSyj0xVB13sPfq0kkZA7dubIIKXIlJ8Cy7u+BN22RVcr+peOuxHdcBbA04FAVmEoEtO5vX55K4KVZS1QJvBBzU1rgUl8JapBNYIowLoZtD9NWRTWKqqe36L48BSz8QPH9epqqIDehlh2UuqocEmrdV7AvhuRoM74m80yeDIEX3ppreNN235FxV58DNjhswn5K8zK21+5ctjut6NmUIoy9tVvitnHr2VDM3ahtW8KQ/Vbsp9GGiWHfk8skyTSFz9/HdxhHe4uR/RxX/mG1SGXwypcDJNmCMfucZ/C1CuCQUbiBUDYbe7tiRkZX8GIat50d+wqR1fdN7ygGzrHrcN4kGFHK02cil5M6INgQVsvnNz77T5PqUFYJJInYmIBplJfP5On4eiOwYfhuCD44oLyYVs43rI1rk3H7usttzq8Qo3j84vavN9mOkAeuq8dHEd9NtCVKX51Oen+MM6IEYvz5StOehKLpIjD+nKU5AQWJpLizdB+1sb5LQvFRxbSJVGHmSdK/0WWaPguEYmcSJ68aWkK6rAw6jwSSCmrTWVHT96R7HwHANEgqybVJL+E2vE2q7Uu91Gr73SbbNUvZDtiOlCeIv4r/AI+0XUwz1lvcAAAAAElFTkSuQmCC");background-size:100% 100%;background-repeat:no-repeat;width:15px;height:15px;margin:auto}.markdown-body h3{width:100%;text-align:left;margin:20px 10px 0 0;font-size:18px;font-weight:700;display:inline-block;padding-left:10px;padding-bottom:0;border-left:5px solid #8f6600;color:#614500}.markdown-body h4,.markdown-body h5,.markdown-body h6{font-weight:700;color:#a37400}.markdown-body h4{font-size:17px}.markdown-body h5,.markdown-body h6{display:flex;align-items:center}.markdown-body h5:after,.markdown-body h6:after{display:inline-block;border:2px solid #fff6e0;color:rgba(189,134,0,.5);border-radius:50%;text-align:center;margin-left:5px}.markdown-body h5{font-size:14px}.markdown-body h5:after{content:"5";width:15px;height:15px;line-height:15px;font-size:13px}.markdown-body h6{font-size:12px}.markdown-body h6:after{content:"6";width:13px;height:13px;line-height:13px;font-size:12px}.markdown-body p{color:#412c0c;letter-spacing:1px;font-weight:400;margin-bottom:16px}.markdown-body img{max-width:100%;display:block;margin:auto}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#755300;font-weight:400;border-bottom:1px solid #755300;font-weight:bolder;text-decoration:none}.markdown-body table{width:100%!important;margin:0;font-size:12px;width:auto;max-width:100%;overflow:auto;border-collapse:collapse;border-spacing:0}.markdown-body table img{box-shadow:none}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body thead tr th{text-align:center}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px;box-sizing:border-box;border:1px solid rgba(72,42,10,.1)}.markdown-body blockquote{position:relative;text-size-adjust:100%;line-height:25px;font-weight:400;border-radius:10px;font-style:normal;text-align:left;box-sizing:inherit;border:1px solid #ffd87a;background-color:rgba(189,134,0,.5);margin:20px 0;padding:20px}.markdown-body blockquote p{color:#fff6e0;letter-spacing:2px;margin:0}.markdown-body blockquote:after,.markdown-body blockquote:before{position:absolute;color:#cc9100;font-size:34px;font-weight:700}.markdown-body blockquote:before{content:"â";top:8px;left:5px}.markdown-body blockquote:after{content:"â";right:5px;bottom:-5px}.markdown-body strong{color:#c28a00;font-weight:bolder}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{color:#c28a00}.markdown-body em strong{font-style:normal;color:#c28a00;background-color:#8a6200}.markdown-body s{color:#c28a00}.markdown-body hr{border-top:1px solid #805b00}.markdown-body code,.markdown-body li code,.markdown-body p code{color:#996d00;background-color:rgba(130,98,0,.3)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit;color:#858585;font-family:bold;letter-spacing:1px}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection,.markdown-body img::selection{color:rgba(189,134,0,.5);background-color:#fff}.markdown-body a::selection,.markdown-body b::selection,.markdown-body del::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:transparent}.markdown-body pre&gt;code::selection{background-color:rgba(189,134,0,.5)}.markdown-body .math .math-inline::selection,.markdown-body blockquote::selection,.markdown-body ol::selection,.markdown-body p::selection,.markdown-body strong::selection,.markdown-body table::selection,.markdown-body ul::selection{background-color:rgba(189,134,0,.5)}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ğŸ§  ä¸€ã€ä»â€œå†…å®¹ä¸ºç‹â€åˆ°â€œç®—æ³•ç™»åŸºâ€</h2>
<p>æ›¾ç»çš„ Web å†…å®¹ä¸–ç•Œæ˜¯è¿™æ ·çš„ï¼š</p>
<ul>
<li>äººç±»åˆ›ä½œè€…æŒ¥æ´’æ‰åï¼Œç”¨<strong>é”®ç›˜æ•²æ‰“å‡ºæ„ä¹‰</strong>ã€‚</li>
<li>å¹³å°å……å½“ä¸­ä»‹è€…ï¼Œè´Ÿè´£<strong>æµé‡åˆ†å‘ä¸ä»·å€¼å®šä»·</strong>ã€‚</li>
<li>ç”¨æˆ·åŸ‹å¤´åˆ·å±ï¼Œåœ¨ä¿¡æ¯æ´ªæµä¸­äº«å—<strong>è¢«æ¨èçš„å¿«æ„Ÿ</strong>ã€‚</li>
</ul>
<p>ç„¶åï¼Œ<strong>AIGCï¼ˆAI Generated Contentï¼‰</strong> â€”â€” äººå·¥æ™ºèƒ½ç”Ÿæˆå†…å®¹ â€”â€” åƒä¸€ä½å¤©æ‰ä½œæ›²å®¶é—¯å…¥ä¹é˜Ÿï¼Œä¹è°±æ²¡çœ‹ä¸¤çœ¼å°±å¼¹å‡ºäº†äº¤å“ä¹ã€‚</p>
<p>è¿™ä¸æ˜¯ç®€å•çš„ç”Ÿäº§åŠ›æå‡ï¼Œè€Œæ˜¯ï¼š</p>
<blockquote>
<p><strong>ä»â€œäººå†™ç»™äººçœ‹â€å˜æˆâ€œäºº+AIä¸€èµ·å†™ç»™ä¸–ç•Œçœ‹â€ã€‚</strong></p>
</blockquote>
<hr/>
<h2 data-id="heading-1">ğŸ”© äºŒã€AIGC èƒŒåçš„åº•å±‚æŠ€æœ¯é½¿è½® ğŸ§©</h2>
<p>AIGC å¹¶ä¸æ˜¯é­”æ³•ï¼Œå®ƒæ˜¯ä¸€ç³»åˆ—åº•å±‚åŸç†å…±åŒå¥å“çš„æœºå™¨äº¤å“æ›²ã€‚</p>
<h3 data-id="heading-2">1. æ¨¡å‹åŸºç¡€ï¼šä»â€œç‰¹å¾â€åˆ°â€œè¯­ä¹‰â€</h3>
<ul>
<li>ä¼ ç»Ÿç®—æ³•ï¼šçœ‹çš„æ˜¯â€œå…³é”®å­—â€</li>
<li>AIGCï¼šç†è§£çš„æ˜¯è¯­ä¹‰ã€ä¸Šä¸‹æ–‡ã€è¯­æ°”ã€æƒ…ç»ª</li>
</ul>
<p>AI ä¸åªæ˜¯ç»Ÿè®¡å­—è¯å‡ºç°çš„æ¦‚ç‡ï¼Œè€Œæ˜¯æ„å»ºäº†ä¸€ä¸ª <strong>å¤šç»´è¯­ä¹‰ç©ºé—´</strong>ã€‚<br/>
åœ¨è¿™ä¸ªç©ºé—´ä¸­ï¼Œâ€œçŒ«â€å’Œâ€œå–µæ˜Ÿäººâ€å‡ ä¹æ˜¯é‚»å±…ï¼Œå®ƒä»¬ä¹‹é—´çš„è·ç¦»å¾ˆå°ã€‚<br/>
äºæ˜¯æ¨¡å‹çŸ¥é“ä¸¤è€…éƒ½æ˜¯<strong>å¸¦æ¯›çš„ç»Ÿæ²»äººç±»çš„å­˜åœ¨</strong>ğŸ˜¹ã€‚</p>
<h3 data-id="heading-3">2. ç®—æ³•å¼•æ“ï¼šTransformer çš„é­”æ³•æ£’ âœ¨</h3>
<p>Transformer æ¶æ„è®©æ¨¡å‹å¯ä»¥å¹¶è¡Œå…³æ³¨ä¸åŒçš„ä¸Šä¸‹æ–‡ã€‚<br/>
è¿™ç§â€œè‡ªæ³¨æ„åŠ›æœºåˆ¶â€è®©æ¯ä¸ªå•è¯ä¹‹é—´çš„å…³ç³»éƒ½èƒ½è¢«è®¡ç®—æœºæ•æ‰åˆ°ã€‚<br/>
å®ƒä¸å†æ˜¯æµæ°´çº¿å¼è¯»å–ï¼Œè€Œåƒä¸€ä¸ªèªæ˜çš„ç¼–è¾‘ï¼Œä¸€è¾¹è¯»ç¨¿ï¼Œä¸€è¾¹æ€è€ƒæ•´ç¯‡æ–‡ç« çš„ç»“æ„ã€‚</p>
<h3 data-id="heading-4">3. è®¡ç®—åŠ›ä¸å­˜å‚¨ï¼šç¡…çš„è‚Œè‚‰ä¸æ•°æ®çš„è¡€æ¶² ğŸ§¬</h3>
<p>æ²¡æœ‰ç®—åŠ›ï¼ŒAI å°±åƒå¤±å»äº†æ°§æ°”ã€‚GPU çš„å¹¶è¡Œè®¡ç®—ã€TPU çš„çŸ©é˜µåŠ é€Ÿã€å­˜å‚¨çš„ä¼˜åŒ–ç»“æ„ï¼Œå…±åŒæ„æˆ AIGC çš„ä½“èƒ½ä¿éšœã€‚</p>
<p>å¦‚æœæˆ‘ä»¬ä»¥ä¸€ç§ä¸ä½¿ç”¨å…¬å¼çš„æ–¹å¼æè¿°å®ƒï¼š</p>
<blockquote>
<p>æ¨¡å‹èƒ½åŠ› â‰ˆ æ•°æ®é‡ Ã— ç®—åŠ› Ã— ç®—æ³•ä¼˜åŒ–ç¨‹åº¦<br/>
ï¼ˆç®€å•è¯´ï¼Œ<strong>å–‚å¾—å¤šã€ç®—å¾—å¿«ã€è®¾è®¡å·§</strong>ï¼‰</p>
</blockquote>
<hr/>
<h2 data-id="heading-5">ğŸ’¼ ä¸‰ã€AIGC é‡å¡‘ä»·å€¼é“¾çš„é€»è¾‘</h2>






























<table><thead><tr><th>è§’è‰²</th><th>AIGC ä»‹å…¥å‰</th><th>AIGC ä»‹å…¥å</th></tr></thead><tbody><tr><td>åˆ›ä½œè€…</td><td>é ç»éªŒä¸çµæ„Ÿ</td><td>å¯ä»¥é  Prompt ä¸æ¨¡å‹åä½œ</td></tr><tr><td>å¹³å°</td><td>åˆ†å‘äººå·¥å†…å®¹</td><td>åˆ†å‘<strong>ç®—æ³•å…±åˆ›å†…å®¹</strong></td></tr><tr><td>ç”¨æˆ·</td><td>æ¶ˆè´¹é™æ€ä¿¡æ¯</td><td>ä¸ AI <strong>äº’åŠ¨ç”Ÿæˆ</strong>ä¸ªæ€§å†…å®¹</td></tr><tr><td>å¹¿å‘Šä¸»</td><td>æŠ•æ”¾é™æ€å¹¿å‘Š</td><td>æŠ•æ”¾<strong>AI åŠ¨æ€å®šåˆ¶å¹¿å‘Š</strong></td></tr></tbody></table>
<p>AIGC å°±åƒç»™ä»·å€¼é“¾æ³¨å…¥äº†æ™ºèƒ½è¡€æ¶²ã€‚<br/>
å®ƒä»**â€œå†…å®¹ç”Ÿäº§â€å»¶ä¼¸åˆ°â€œå†…å®¹è¿­ä»£â€ä¸â€œå†…å®¹ä½“éªŒâ€**ã€‚</p>
<blockquote>
<p>å†…å®¹ä¸å†æ˜¯ä¸€æ¬¡æ€§çš„åˆ›ä½œï¼Œè€Œæ˜¯ä¸€æ¬¡æŒç»­æ›´æ–°çš„â€œæ•°å­—ç”Ÿç‰©ä½“â€ã€‚ğŸŒ±</p>
</blockquote>
<hr/>
<h2 data-id="heading-6">ğŸ§¬ å››ã€æŠ€æœ¯é©±åŠ¨çš„å˜é©å‰–æ</h2>
<h3 data-id="heading-7">1. å†…å®¹ç”Ÿäº§è‡ªåŠ¨åŒ–</h3>
<p>æœºå™¨ç†è§£ä¸Šä¸‹æ–‡åï¼Œèƒ½è‡ªåŠ¨ç”Ÿæˆç½‘é¡µæ–‡æ¡ˆã€çŸ­è§†é¢‘è„šæœ¬ã€ç”¨æˆ·è¯„è®ºå›å¤ã€‚<br/>
ç”šè‡³èƒ½ä¸€è¾¹å†™ï¼Œä¸€è¾¹<strong>A/B æµ‹è¯•æ•ˆæœ</strong>ï¼Œå®ç°å®æ—¶å†…å®¹ä¼˜åŒ–ã€‚</p>
<h3 data-id="heading-8">2. åˆ†å‘æ™ºèƒ½åŒ–</h3>
<p>AI ä¸ä»…äº§ç”Ÿå†…å®¹ï¼Œè¿˜èƒ½æ ¹æ®ç”¨æˆ·çš„ç‚¹å‡»ã€åœç•™æ—¶é—´ã€å…´è¶£å»ºæ¨¡ç”Ÿæˆä¸ªæ€§æ¨èã€‚<br/>
è¿™è®©æ¯ä¸ªç”¨æˆ·çœ‹åˆ°çš„ç½‘é¡µéƒ½æ˜¯ä¸ºè‡ªå·±å®šåˆ¶çš„ <strong>â€œåŠ¨æ€é•œåƒâ€</strong> ã€‚</p>
<h3 data-id="heading-9">3. åé¦ˆé‡åŒ–</h3>
<p>æ¯ä¸€æ¬¡ç‚¹å‡»ã€æ¯ä¸€æ¬¡æ»‘åŠ¨ã€æ¯ä¸€ä¸ªè¡¨æƒ…ï¼Œéƒ½æˆäº†è®­ç»ƒæ•°æ®ã€‚<br/>
AI å€Ÿæ­¤åé¦ˆè°ƒæ•´å†…å®¹ç»“æ„â€”â€”è¿™å«<strong>è‡ªé€‚åº”å†…å®¹æ¼”åŒ–</strong>ï¼Œä»¿ä½›å†…å®¹åœ¨è‡ªå·±å­¦ä¹ å¦‚ä½•å–æ‚¦è¯»è€…ã€‚</p>
<hr/>
<h2 data-id="heading-10">ğŸ”¬ äº”ã€ä»·å€¼é“¾çš„â€œå†ç¼–è¯‘â€(Recompile)</h2>
<p>å‰äº’è”ç½‘æ—¶ä»£ï¼Œä»·å€¼é“¾æ˜¯è¿™æ ·çš„ï¼š</p>
<pre><code class="hljs language-rust" lang="rust">åˆ›ä½œè€… <span class="hljs-punctuation">-&gt;</span> å¹³å° <span class="hljs-punctuation">-&gt;</span> ç”¨æˆ· <span class="hljs-punctuation">-&gt;</span> å¹¿å‘Šä¸»
</code></pre>
<p>AIGC æ—¶ä»£ï¼Œç»“æ„å·²ç»å˜æˆï¼š</p>
<pre><code class="hljs language-rust" lang="rust">ç”¨æˆ· &lt;<span class="hljs-punctuation">-&gt;</span> AIGC å¼•æ“ &lt;<span class="hljs-punctuation">-&gt;</span> å¹³å° &lt;<span class="hljs-punctuation">-&gt;</span> ç”Ÿæ€ç³»ç»Ÿ
</code></pre>
<p>ç°åœ¨ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½æ‹¥æœ‰â€œæ™ºèƒ½æ¥å£â€ï¼Œå½¼æ­¤æ²Ÿé€šçš„æ•°æ®ä¸å†æ˜¯å•å‘æµï¼Œè€Œæ˜¯å¾ªç¯æµã€‚<br/>
è¿™å°±åƒæ“ä½œç³»ç»Ÿä»å•çº¿ç¨‹åˆ°å¤šçº¿ç¨‹çš„è¿›åŒ–ï¼Œè®©æ•´ä¸ªç»æµä½“çš„<strong>å¹¶è¡Œå¤„ç†èƒ½åŠ›</strong>å€å¢ã€‚âš™ï¸</p>
<hr/>
<h2 data-id="heading-11">ğŸ§‘â€ğŸ’» å…­ã€å®è·µï¼šç”¨ JS æ¨¡æ‹Ÿä¸€æ¬¡â€œAI è‡ªåŠ¨æ–‡ç¨¿ç”Ÿæˆâ€</h2>
<blockquote>
<p>å°å®éªŒï¼šæˆ‘ä»¬ç”¨ç®€çŸ­çš„ JavaScript å±•ç¤ºä¸€ä¸ªâ€œæ¨¡æ‹Ÿå†…å®¹ç”Ÿæˆå™¨â€ã€‚</p>
</blockquote>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ğŸ§  ç®€æ˜“ AIGC æ¨¡æ‹Ÿè„šæœ¬</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MiniAIGC</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">modelName = <span class="hljs-string">'WebWriter-V1'</span></span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">model</span> = modelName;
  }

  <span class="hljs-title function_">generate</span>(<span class="hljs-params">prompt</span>) {
    <span class="hljs-keyword">const</span> inspirations = [
      <span class="hljs-string">"åœ¨ä¿¡æ¯çš„æµªæ½®ä¸­ï¼Œæ•°æ®å¦‚æ˜Ÿè¾°é—ªçƒã€‚"</span>,
      <span class="hljs-string">"ç®—æ³•æœ‰èŠ‚å¥ï¼Œä»£ç åƒè¯—ä¸€æ ·å‘¼å¸ã€‚"</span>,
      <span class="hljs-string">"åƒç´ æ˜¯æ–°çš„æ²¹å¢¨ï¼ŒæœåŠ¡å™¨æ˜¯æ–°çš„å°åˆ·æœºã€‚"</span>
    ];
    <span class="hljs-keyword">const</span> randomIdea = inspirations[<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * inspirations.<span class="hljs-property">length</span>)];
    <span class="hljs-keyword">return</span> <span class="hljs-string">`ğŸ¤– [<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.model}</span>] ç”Ÿæˆå“åº”ï¼š<span class="hljs-subst">${prompt}</span> â€”â€” <span class="hljs-subst">${randomIdea}</span>`</span>;
  }
}

<span class="hljs-comment">// ä½¿ç”¨ç”Ÿæˆå™¨</span>
<span class="hljs-keyword">const</span> ai = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MiniAIGC</span>();
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(ai.<span class="hljs-title function_">generate</span>(<span class="hljs-string">"è¯·å†™ä¸€å¥æè¿°æœªæ¥å†…å®¹ç”Ÿæ€çš„å¥å­"</span>));
</code></pre>
<blockquote>
<p>è¾“å‡ºç¤ºä¾‹ï¼š<br/>
ğŸ¤– [WebWriter-V1] ç”Ÿæˆå“åº”ï¼šè¯·å†™ä¸€å¥æè¿°æœªæ¥å†…å®¹ç”Ÿæ€çš„å¥å­ â€”â€” ç®—æ³•æœ‰èŠ‚å¥ï¼Œä»£ç åƒè¯—ä¸€æ ·å‘¼å¸ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-12">ğŸ”® ä¸ƒã€å±•æœ›ï¼šä» AIGC åˆ° AIECï¼ˆAI Empowered Creativityï¼‰</h2>
<p>æœªæ¥çš„äº’è”ç½‘å¯èƒ½æ¼”åŒ–ä¸ºä¸€ä¸ª<strong>å…±åˆ›å…ƒå®‡å®™</strong>ã€‚<br/>
æ–‡æ¡ˆã€ä»£ç ã€è®¾è®¡ã€è§†é¢‘ã€éŸ³ä¹ï¼Œå…¨éƒ¨åœ¨æ™ºèƒ½ç³»ç»Ÿçš„åä½œä¸‹å®Œæˆã€‚</p>
<p>äººç±»ä¼šä»å†…å®¹çš„â€œç”Ÿäº§è€…â€å˜æˆ<strong>æ„ä¹‰çš„ç­–å±•äºº</strong>ã€‚<br/>
AI å†™ç¨¿ï¼Œæˆ‘ä»¬å®šä¹‰æ–¹å‘ï¼›AI è®¾è®¡ï¼Œæˆ‘ä»¬é€‰æ‹©å®¡ç¾ã€‚</p>
<blockquote>
<p><strong>äººèµ‹äºˆçµé­‚ï¼ŒAI æ‰“ç£¨è¡¨è¾¾ã€‚</strong></p>
</blockquote>
<p>è¿™æ ·çš„é‡å¡‘ï¼Œä¸åªæ˜¯æŠ€æœ¯é©å‘½ï¼Œæ›´æ˜¯ä¸€åœºå…³äº<strong>æ€ç»´æ–¹å¼çš„é‡æ„</strong>ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä» C10K åˆ° C1Mï¼šApache çš„èŒ¶é¦†ã€Nginx çš„å›è½¬å¯¿å¸ï¼Œä¸åƒä¸‡è¿æ¥çš„é™é»˜é©å‘½]]></title>    <link>https://juejin.cn/post/7582637280219103286</link>    <guid>https://juejin.cn/post/7582637280219103286</guid>    <pubDate>2025-12-12T15:01:56.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582637280219103286" data-draft-id="7582637280219070518" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä» C10K åˆ° C1Mï¼šApache çš„èŒ¶é¦†ã€Nginx çš„å›è½¬å¯¿å¸ï¼Œä¸åƒä¸‡è¿æ¥çš„é™é»˜é©å‘½"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-12T15:01:56.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Pypirus"/> <meta itemprop="url" content="https://juejin.cn/user/958429872790984"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä» C10K åˆ° C1Mï¼šApache çš„èŒ¶é¦†ã€Nginx çš„å›è½¬å¯¿å¸ï¼Œä¸åƒä¸‡è¿æ¥çš„é™é»˜é©å‘½
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/958429872790984/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Pypirus
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-12T15:01:56.000Z" title="Fri Dec 12 2025 15:01:56 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    7
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€æ—§æ—¥èŒ¶é¦†ï¼šApache çš„â€œä¸€äººä¸€æ¤…â€åŠå…¶éšç—›</h2>
<p>2000 å¹´ä»£åˆï¼Œäº’è”ç½‘å°šå¦‚æ™¨å¸‚ï¼ŒApache æ˜¯è¡—å¤´æœ€ä½“é¢çš„èŒ¶é¦†ã€‚å®ƒé‡‡ç”¨ <strong>å¤šè¿›ç¨‹æ¨¡å‹ï¼ˆprefork MPMï¼‰</strong>ï¼šæ¯æ¥ä¸€ä½å®¢äººï¼ˆHTTP è¯·æ±‚ï¼‰ï¼Œå°±å®‰æ’ä¸€ä½èŒ¶åšå£«ï¼ˆå­è¿›ç¨‹ï¼‰å…¨ç¨‹ä¾å¥‰â€”â€”å€’æ°´ã€é€’ç‚¹å¿ƒã€ç»“è´¦ï¼Œäº‹æ— å·¨ç»†ï¼ŒåŒ…åŠåˆ°åº•ã€‚</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[Client 1] --&gt;|TCP| P1[Apache Worker 1]
    B[Client 2] --&gt;|TCP| P2[Apache Worker 2]
    C[Client N] --&gt;|TCP| PN[Apache Worker N]
    P1 --&gt; K[(OS Kernel)]
    P2 --&gt; K
    PN --&gt; K
</code></pre>
<p>è¿™ç§è®¾è®¡åœ¨ç™¾äººè§„æ¨¡æ—¶æ¸©æ–‡å°”é›…ï¼Œä½†å½“å®¢æµé‡é€¼è¿‘ <strong>10,000 å¹¶å‘ï¼ˆC10Kï¼‰</strong>ï¼Œé—®é¢˜å¦‚èŒ¶æ¸èˆ¬è¿…é€Ÿæ‰©æ•£ï¼š</p>
<ul>
<li><strong>æ€§èƒ½ä¸Š</strong>ï¼šæ¯ä¸ª worker å ç”¨ 2â€“8 MB å†…å­˜ï¼Œ10K è¿æ¥éœ€ 20â€“80 GB RAMï¼›æ›´ç³Ÿçš„æ˜¯ï¼Œæ“ä½œç³»ç»Ÿåœ¨åˆ‡æ¢è¿›ç¨‹æ—¶éœ€ä¿å­˜/æ¢å¤ä¸Šä¸‹æ–‡ï¼Œè¿™ç¬”â€œè°ƒåº¦ç¨â€éšè¿æ¥æ•°å¹³æ–¹å¢é•¿ã€‚</li>
<li><strong>è¿ç»´ä¸Š</strong>ï¼šé…ç½®æ–‡ä»¶é‡Œ <code>MaxRequestWorkers</code>ã€<code>MinSpareThreads</code> ç­‰å‚æ•°å¦‚åŒæš—è¯­ï¼Œè°ƒé«˜åˆ™å†…å­˜çˆ†ï¼Œè°ƒä½åˆ™æ‹’ç»æœåŠ¡â€”â€”åƒåœ¨æ‚¬å´–è¾¹ç…®èŒ¶ã€‚</li>
<li><strong>å®‰å…¨ä¸Š</strong>ï¼šæ‰€æœ‰ worker å…±äº«ç›¸åŒæƒé™ï¼Œè‹¥æŸä¸ªæ¨¡å—ï¼ˆå¦‚ mod_phpï¼‰æœ‰æ¼æ´ï¼Œæ•´åº§èŒ¶é¦†å¯èƒ½å› ä¸€æ¯â€œæ¯’èŒ¶â€è€Œåœä¸šã€‚</li>
</ul>
<blockquote>
<p>å°½ç®¡Linuxè¿›ç¨‹è°ƒåº¦æ˜¯O(logn)ï¼Œä½†å¯¹äºè¿™ä¸ªç³»ç»Ÿæ¥è¯´ï¼Œä¸Šä¸‹æ–‡åˆ‡æ¢å¼€é”€å¯å»ºæ¨¡ä¸º</p>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>T</mi><mtext>ctx</mtext></msub><mo>=</mo><msub><mi>N</mi><mtext>conn</mtext></msub><mo>Ã—</mo><msub><mi>C</mi><mtext>switch</mtext></msub></mrow><annotation encoding="application/x-tex">T_{\text{ctx}} = N_{\text{conn}} \times C_{\text{switch}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">ctx</span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.109em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">conn</span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">switch</span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span></div>
<p>å…¶ä¸­ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>C</mi><mtext>switch</mtext></msub></mrow><annotation encoding="application/x-tex">C_{\text{switch}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">switch</span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> çº¦ 1â€“3 å¾®ç§’ï¼Œ<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>N</mi><mtext>conn</mtext></msub></mrow><annotation encoding="application/x-tex">N_{\text{conn}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.109em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">conn</span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> ä¸ºæ´»è·ƒå¹¶å‘è¿æ¥æ•°ã€‚å½“ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>N</mi><mtext>conn</mtext></msub><mo>=</mo><mn>1</mn><msup><mn>0</mn><mn>4</mn></msup></mrow><annotation encoding="application/x-tex">N_{\text{conn}} = 10^4</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.109em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">conn</span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.8141em;"/><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span></span></span></span></span></span></span></span></span>ï¼Œä»…åˆ‡æ¢å°±è€—å» 10â€“30 æ¯«ç§’â€”â€”ç”¨æˆ·æ—©å·²åˆ·æ–°é¡µé¢ä¸‰æ¬¡ã€‚</p>
</blockquote>
<p><strong>ç±»æ¯”</strong>ï¼šè¿™å°±åƒä¸ºæ¯ä½é¡¾å®¢é…ä¸€è¾†ä¸“å±å‡ºç§Ÿè½¦ã€‚çŸ­é€”å°šå¯ï¼Œè‹¥å…¨åŸä¸‡äººåŒæ—¶æ‰“è½¦ï¼Œé“è·¯ç˜«ç—ªã€å¸æœºçŒæ­»ã€æ²¹è´¹çƒ§å…‰ã€‚æ•ˆç‡ä¸åœ¨äºè½¦å¤šï¼Œè€Œåœ¨äºèƒ½å¦å…±äº«è¿åŠ›ã€‚</p>
<hr/>
<h2 data-id="heading-1">äºŒã€æ–°å¼å›è½¬ï¼šNginx çš„äº‹ä»¶è½®ç›˜å¦‚ä½•è§£å±€</h2>
<p>2004 å¹´ï¼Œä¿„ç½—æ–¯ç¨‹åºå‘˜ Igor Sysoev å¼€äº†ä¸€å®¶æ–°åº—ï¼š<strong>Nginx å¯¿å¸å›è½¬</strong>ã€‚åº—é‡Œåªæœ‰å‡ ä¸ªæœåŠ¡å‘˜ï¼ˆworker è¿›ç¨‹ï¼Œé€šå¸¸ç­‰äº CPU æ ¸æ•°ï¼‰ï¼Œæ¯äººå®ˆç€ä¸€ä¸ªé«˜é€Ÿä¼ é€å¸¦ï¼ˆäº‹ä»¶å¾ªç¯ï¼‰ã€‚å®¢äººåä¸‹ä¸åŠ¨ï¼Œèœå•éœ€æ±‚åŒ–ä½œå¡ç‰‡æŠ•è¿›ç³»ç»Ÿï¼ŒæœåŠ¡å‘˜åªåœ¨â€œé£Ÿæåˆ°ä½â€ï¼ˆsocket å¯è¯»/å¯å†™ï¼‰æ—¶å‡ºæ‰‹ã€‚</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[Client 1] --&gt;|TCP| W[Nginx Worker]
    B[Client 2] --&gt;|TCP| W
    C[Client N] --&gt;|TCP| W
    W --&gt;|epoll| K[(Linux Kernel)]
    subgraph "User Space"
        W
    end
</code></pre>
<p>Nginx çš„ä¸‰å¤§æ”¯æŸ±ï¼Œæ­£æ˜¯å¯¹ Apache ç—›ç‚¹çš„ç²¾å‡†æ‰“å‡»ï¼š</p>
<ol>
<li><strong>äº‹ä»¶é©±åŠ¨ï¼ˆEvent-Drivenï¼‰</strong>ï¼šç”¨å•çº¿ç¨‹å¤„ç†æ•°ä¸‡è¿æ¥ï¼Œé¿å…è¿›ç¨‹çˆ†ç‚¸ï¼›</li>
<li><strong>éé˜»å¡ I/O</strong>ï¼šè¯»æ–‡ä»¶æˆ–è½¬å‘è¯·æ±‚æ—¶ï¼Œä¸å¹²ç­‰ï¼Œç«‹åˆ»å¤„ç†ä¸‹ä¸€å¼ å¡ç‰‡ï¼›</li>
<li><strong>æç®€è¿æ¥çŠ¶æ€</strong>ï¼šæ¯ä¸ªè¿æ¥ä»…å  2.5â€“4 KB å†…å­˜ï¼Œæ— ç‹¬ç«‹æ ˆã€æ— çº¿ç¨‹ã€‚</li>
</ol>
<blockquote>
<p>Nginx çš„ç†è®ºååå¯è¿‘ä¼¼ä¸º</p>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>Q</mi><mi>P</mi><mi>S</mi><mo>â‰ˆ</mo><mfrac><msub><mi>B</mi><mtext>net</mtext></msub><msub><mi>L</mi><mtext>avg</mtext></msub></mfrac><mo>Ã—</mo><mi>Î·</mi></mrow><annotation encoding="application/x-tex">QPS \approx \frac{B_{\text{net}}}{L_{\text{avg}}} \times \eta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"/><span class="mord mathnormal" style="margin-right:0.05764em;">QPS</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">â‰ˆ</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:2.3324em;vertical-align:-0.9721em;"/><span class="mord"><span class="mopen nulldelimiter"/><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3603em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">avg</span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"/><span class="frac-line" style="border-bottom-width:0.04em;"/></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:-0.0502em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">net</span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.9721em;"><span/></span></span></span></span><span class="mclose nulldelimiter"/></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"/><span class="mord mathnormal" style="margin-right:0.03588em;">Î·</span></span></span></span></span></div>
<p>å…¶ä¸­ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>B</mi><mtext>net</mtext></msub></mrow><annotation encoding="application/x-tex">B_{\text{net}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:-0.0502em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">net</span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> æ˜¯ç½‘ç»œå¸¦å®½ï¼ˆå¦‚ 1 Gbpsï¼‰ï¼Œ<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>L</mi><mtext>avg</mtext></msub></mrow><annotation encoding="application/x-tex">L_{\text{avg}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"/><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">avg</span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span></span></span></span></span> æ˜¯å¹³å‡å“åº”å¤§å°ï¼ˆå¦‚ 10 KBï¼‰ï¼Œ<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Î·</mi></mrow><annotation encoding="application/x-tex">\eta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"/><span class="mord mathnormal" style="margin-right:0.03588em;">Î·</span></span></span></span></span> æ˜¯äº‹ä»¶å¤„ç†æ•ˆç‡ï¼ˆé€šå¸¸ &gt;0.9ï¼‰ã€‚è¿™æ„å‘³ç€æ€§èƒ½ç“¶é¢ˆä»â€œCPU è°ƒåº¦â€è½¬å‘â€œç‰©ç†å¸¦å®½â€â€”â€”ä¸€ä¸ªå¥åº·çš„è½¬ç§»ã€‚</p>
</blockquote>
<p><strong>ç±»æ¯”</strong>ï¼šå›è½¬å¯¿å¸åº—ä¸ä¸ºæ¯ä½å®¢äººé…å¨æˆ¿ï¼Œè€Œæ˜¯è®©é£Ÿç‰©æµåŠ¨èµ·æ¥ã€‚æœåŠ¡å‘˜åªåœ¨éœ€è¦æ—¶å–æ”¾ï¼Œå…¶ä½™æ—¶é—´è§‚å¯Ÿå…¨å±€ã€‚æ•ˆç‡ä¸åœ¨äººå¤šï¼Œè€Œåœ¨<strong>å‡å°‘ç­‰å¾…ã€å¢åŠ æµåŠ¨</strong>ã€‚</p>
<hr/>
<h2 data-id="heading-2">ä¸‰ã€ä¸ºä½•è€Œå˜ï¼Ÿç°å®å‹åŠ›ä¸‹çš„å¿…ç„¶é€‰æ‹©</h2>
<p>è¿™åœºæ¶æ„è¿ç§»ï¼Œç»éæŠ€æœ¯æ´ç™–çš„äº§ç‰©ï¼Œè€Œæ˜¯è¢«ä¸‰é‡ç°å®åˆåŠ›æ¨åŠ¨ï¼š</p>
<ul>
<li><strong>ä¸šåŠ¡å½¢æ€å˜åŒ–</strong>ï¼šWeb 2.0 æ—¶ä»£ï¼Œé•¿è¿æ¥ã€WebSocketã€å®æ—¶æ¨é€å…´èµ·ï¼Œè¿æ¥ä¸å†â€œç”¨å®Œå³èµ°â€ï¼Œè€Œæ˜¯â€œé©»ç•™æ•°å°æ—¶â€ã€‚Apache çš„â€œç”¨å®Œå°±æ•£â€æ¨¡å‹æˆæœ¬å‰§å¢ã€‚</li>
<li><strong>ç¡¬ä»¶ç»æµå­¦</strong>ï¼š2005 å¹´å†…å­˜ä»·æ ¼çº¦ $20/GBï¼ŒC10K è‹¥ç”¨ Apache éœ€æ•°ç™¾ç¾å…ƒå†…å­˜ï¼Œè€Œ Nginx ä»…éœ€å‡ åå…ƒâ€”â€”å¯¹åˆåˆ›å…¬å¸ï¼Œè¿™æ˜¯ç”Ÿæ­»ä¹‹å·®ã€‚</li>
<li><strong>æ“ä½œç³»ç»Ÿæˆç†Ÿ</strong>ï¼šLinux 2.6 å¼•å…¥ <code>epoll</code>ï¼ŒBSD æœ‰ <code>kqueue</code>ï¼Œä¸ºé«˜æ•ˆäº‹ä»¶é€šçŸ¥é“ºå¹³é“è·¯ã€‚æ²¡æœ‰è¿™äº›åº•å±‚æ”¯æŒï¼ŒNginx çš„è½®ç›˜è½¬ä¸èµ·æ¥ã€‚</li>
</ul>
<p>æ­¤å¤–ï¼Œå®‰å…¨ç†å¿µä¹Ÿåœ¨è¿›åŒ–ã€‚Nginx çš„æ¨¡å—åŒ–è®¾è®¡å¤©ç„¶æ”¯æŒæ²™ç®±ï¼ˆå¦‚ <code>njs</code> è„šæœ¬å¼•æ“ï¼‰ï¼Œè€Œ Apache æ¨¡å—å¸¸ä»¥é«˜æƒé™è¿è¡Œâ€”â€”åœ¨é›¶ä¿¡ä»»æ—¶ä»£ï¼Œè¿™å·²æˆéšæ‚£ã€‚</p>
<hr/>
<h2 data-id="heading-3">å››ã€å½“ä¸‹ä¹‹å›°ï¼šNginx åœ¨ C1M æ—¶ä»£çš„å–˜æ¯</h2>
<p>å¦‚ä»Šï¼ŒC10K å·²æ˜¯åŸºç¡€é¢˜ï¼Œ<strong>C1Mï¼ˆç™¾ä¸‡å¹¶å‘ï¼‰</strong> ç”šè‡³ <strong>C10Mï¼ˆåƒä¸‡å¹¶å‘ï¼‰</strong> æˆä¸ºæ–°æˆ˜åœºï¼ˆå¦‚ç‰©è”ç½‘å¹³å°ã€å®æ—¶æ¸¸æˆã€é‡‘èè¡Œæƒ…ï¼‰ã€‚Nginx è™½ç»ä¼˜åŒ–ï¼ˆå¦‚ <code>SO_REUSEPORT</code>ã€<code>io_uring</code> å®éªŒæ”¯æŒï¼‰ï¼Œä½†ä»å—åˆ¶äº<strong>å†…æ ¸ç½‘ç»œæ ˆ</strong>ï¼š</p>
<ul>
<li>æ¯ä¸ª TCP è¿æ¥åœ¨å†…æ ¸ä¸­éœ€ç»´æŠ¤ sock ç»“æ„ã€ç¼“å†²åŒºç­‰ï¼Œçº¦ 16â€“32 KBï¼Œ1M è¿æ¥å³å  16â€“32 GB å†…å­˜ï¼›</li>
<li><code>read</code>/<code>write</code> ç³»ç»Ÿè°ƒç”¨ä»éœ€ç”¨æˆ·æ€ä¸å†…æ ¸æ€åˆ‡æ¢ï¼Œé«˜é¢‘å°åŒ…åœºæ™¯ä¸‹ï¼Œè¿™ç¬”â€œç¨â€ä¸å¯å¿½è§†ï¼›</li>
<li>ä¼ ç»Ÿç½‘å¡æ¯æ”¶ä¸€ä¸ªåŒ…å°±è§¦å‘ä¸€æ¬¡ CPU ä¸­æ–­ï¼Œ10M pkt/s å¯ä½¿ CPU ä¸­æ–­å¤„ç†å æ¯”è¶… 50%ã€‚</li>
</ul>
<p>æ¢å¥è¯è¯´ï¼ŒNginx çš„æœåŠ¡å‘˜å†é«˜æ•ˆï¼Œè‹¥é£Ÿæä»éœ€ç©¿è¿‡æ‹¥æŒ¤çš„å¨æˆ¿ï¼ˆå†…æ ¸ï¼‰ï¼Œå¤©èŠ±æ¿ä¾ç„¶æ¸…æ™°ã€‚</p>
<hr/>
<h2 data-id="heading-4">äº”ã€æœªæ¥ä¹‹è·¯ï¼šç»•è¿‡å¨æˆ¿ï¼Œç›´å–å†œåœº</h2>
<p>é¢å¯¹ C1M+ï¼Œä¸šç•Œæ­£æ¢ç´¢ä¸‰æ¡æ–°è·¯å¾„ï¼š</p>
<ol>
<li><strong>ç”¨æˆ·æ€ç½‘ç»œæ ˆï¼ˆå¦‚ DPDKï¼‰</strong>ï¼š<br/>
åº”ç”¨ç›´æ¥æ“ä½œç½‘å¡ï¼Œ<strong>é›¶æ‹·è´ã€é›¶ç³»ç»Ÿè°ƒç”¨</strong>ã€‚ä»£è¡¨ï¼šCloudflare çš„ <code>pingora</code>ã€Tempesta FWã€‚</li>
<li><strong>é«˜æ€§èƒ½å¼‚æ­¥ I/Oï¼ˆio_uringï¼‰</strong>ï¼š<br/>
Linux 5.1+ æä¾›çš„ ring buffer æ¥å£ï¼Œå°† I/O æäº¤/å®Œæˆå®Œå…¨å¼‚æ­¥åŒ–ï¼ŒNginx å·²å¼€å§‹å®éªŒé›†æˆã€‚</li>
<li><strong>Shared-Nothing æ¶æ„ï¼ˆå¦‚ Seastarï¼‰</strong>ï¼š<br/>
æ¯ä¸ª CPU æ ¸ç‹¬å å†…å­˜ä¸ I/Oï¼Œé€šè¿‡æ— é”æ¶ˆæ¯ä¼ é€’åä½œï¼ŒScyllaDBã€Redpanda å‡åŸºäºæ­¤ï¼Œè½»æ¾æ”¯æ’‘ç™¾ä¸‡è¿æ¥ã€‚</li>
</ol>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TB
    Clients[1M+ Clients] --&gt; NIC[Smart NIC / XDP]
    NIC --&gt;|DMA| App[User-Space App]
    App --&gt; Core0[Core 0: Shard 0]
    App --&gt; Core1[Core 1: Shard 1]
    App --&gt; CoreN[Core N: Shard N]
    style App fill:#fff8e1,stroke:#ff8f00
    style Core0 fill:#e8f5e9,stroke:#2e7d32
</code></pre>
<p><strong>ç±»æ¯”</strong>ï¼šè¿™å¦‚åŒä»â€œå»é¤å…åƒé¥­â€è¿›åŒ–åˆ°â€œåœ¨è‡ªå®¶å¨æˆ¿é‡Œï¼Œæ— äººæœºç›´æ¥ä»å†œåœºç©ºæŠ•æ–°é²œé£Ÿæåˆ°ç¶å°â€â€”â€”ä¸­é—´ç¯èŠ‚è¶Šå°‘ï¼Œé€Ÿåº¦è¶Šå¿«ï¼Œæµªè´¹è¶Šä½ã€‚</p>
<p>å½“ç„¶ï¼Œè¿™äº›æ–¹æ¡ˆä¹Ÿæœ‰ä»£ä»·ï¼šDPDK éœ€ç‹¬å ç½‘å¡ï¼Œio_uring ä»…é™ Linux 5.1+ï¼ŒSeastar ç¼–ç¨‹æ¨¡å‹é™¡å³­ã€‚<strong>ç†è®ºä¸Šçš„å®Œç¾ï¼Œå¸¸ä»¥å®è·µä¸­çš„å¤æ‚ä¸ºä»£ä»·</strong>ã€‚</p>
<hr/>
<h2 data-id="heading-5">ç»“è¯­ï¼šæ¶æ„çš„æ¼”è¿›ï¼Œæ˜¯å¯¹â€œå¿…è¦ä¹‹æ¶â€çš„ä¸æ–­é‡ä¼°</h2>
<p>ä» Apache çš„èŒ¶é¦†åˆ° Nginx çš„å›è½¬å¯¿å¸ï¼Œå†åˆ°ç”¨æˆ·æ€çš„ç›´è¿ç®¡é“ï¼Œæˆ‘ä»¬çœ‹åˆ°çš„ä¸ä»…æ˜¯æ€§èƒ½æ•°å­—çš„è·ƒå‡ï¼Œæ›´æ˜¯<strong>å¯¹æŠ½è±¡å±‚çº§ä»£ä»·çš„æ¸…é†’è®¤çŸ¥</strong>ã€‚</p>
<p>çœŸæ­£ä¼˜é›…çš„ç³»ç»Ÿï¼Œä¸åœ¨äºå †ç Œæœ€æ–°æŠ€æœ¯ï¼Œè€Œåœ¨äº<strong>åœ¨æ°å½“æ—¶æœºï¼Œæ•¢äºæ”¾å¼ƒæ›¾èµ–ä»¥æˆåŠŸçš„æŠ½è±¡</strong>ã€‚</p>
<p>æœªæ¥ï¼Œå½“ C1Bï¼ˆåäº¿è¿æ¥ï¼‰æˆä¸ºå¸¸æ€ï¼Œæˆ–è®¸æˆ‘ä»¬å°†çœ‹åˆ°ï¼š</p>
<ul>
<li>å¯ç¼–ç¨‹äº¤æ¢æœºå†…åµŒä¸šåŠ¡é€»è¾‘ï¼ˆIn-Network Computingï¼‰ï¼›</li>
<li>QUIC + RDMA ç»„åˆå½»åº•ç»•è¿‡ TCP ä¸å†…æ ¸ï¼›</li>
<li>ç”šè‡³ AI é©±åŠ¨çš„åŠ¨æ€åè®®æ ˆï¼Ÿ</li>
</ul>
<p>ä½†æ— è®ºæŠ€æœ¯å¦‚ä½•æµè½¬ï¼Œé‚£ä¸ªå¤è€é—®é¢˜å§‹ç»ˆæœªå˜ï¼š<br/>
<strong>å¦‚ä½•ç”¨æœ€å°‘çš„èµ„æºï¼ŒæœåŠ¡æœ€å¤šçš„äººï¼Ÿ</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ğŸ¤– AI æ—¶ä»£ï¼šCoding å¦‚ä½•çº¦æŸæ™ºèƒ½ä½“çš„ä»»åŠ¡æ­£ç¡®ç‡]]></title>    <link>https://juejin.cn/post/7582845425402331176</link>    <guid>https://juejin.cn/post/7582845425402331176</guid>    <pubDate>2025-12-13T02:59:50.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582845425402331176" data-draft-id="7582861402277494818" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ğŸ¤– AI æ—¶ä»£ï¼šCoding å¦‚ä½•çº¦æŸæ™ºèƒ½ä½“çš„ä»»åŠ¡æ­£ç¡®ç‡"/> <meta itemprop="keywords" content="AIGC,äººå·¥æ™ºèƒ½,AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2025-12-13T02:59:50.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="LeonGao"/> <meta itemprop="url" content="https://juejin.cn/user/3976252950591149"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ğŸ¤– AI æ—¶ä»£ï¼šCoding å¦‚ä½•çº¦æŸæ™ºèƒ½ä½“çš„ä»»åŠ¡æ­£ç¡®ç‡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3976252950591149/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    LeonGao
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-13T02:59:50.000Z" title="Sat Dec 13 2025 02:59:50 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body blockquote&gt;:first-child{margin-top:0}.markdown-body blockquote&gt;:last-child{margin-bottom:0}.markdown-body{overflow:hidden;line-height:1.75;font-size:15px;background-image:linear-gradient(90deg,rgba(72,42,10,.05) 5%,rgba(72,42,10,0) 0),linear-gradient(1turn,rgba(72,42,10,.05) 5%,rgba(72,42,10,0) 0);background-size:20px 20px;background-position:50%;padding-top:0!important}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{position:relative;display:flex;border-bottom:5px solid #6d4e00;line-height:35px;letter-spacing:1px;font-size:25px;padding-left:25px;color:#664900;text-shadow:1px 1px 1px #8a6200;padding-bottom:0}.markdown-body h1:before{content:"";display:flex;position:absolute;left:0;top:3px;bottom:0;margin:auto;width:20px;height:20px;background-size:20px 20px;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAQlBMVEVHcEwlRnqtZBj76q4lRnolRnolRnolRnolRnokRnr/gGtrVUeLXDBKTl+hYSHasW7Ik0zs0JG4dCvUdEE0SW+rYxrLQJfjAAAACnRSTlMA////0H/xUaMi5MCoTwAACfVJREFUeNrtnQl3qygUgJ9GXAqosfL//+pgmgXwXmRNJGdu55xO+6rx8+6I8O9fehmGriN93zdN07bVXdpW/ih/SbpuGP6dXbpOXv7z2i3S9ISck2eQOnAhMHG64VQQbmrAaM4B05GmipaGdB+m6BNQPBXzMYtKR3EPbB/RS5eY4g+lIW9WBqnySCvVMrzRpqqs0g9nwVg5p1KYlHEchRT5bftp+y3n6xlQDjAkABtrKULU9f377ev+4/1/NiT+URRiZRhrcZP6WLa/Gq005BORaqXsdYEuHPIP798ZxSyt6d5sVfxJESRCsvB32lfXwhRjnUBGmKXNoJQe04VIASJqRC/9G7yDsyQMiloYz+0pHYghEoPISAGgpDSvHsCoMwmA0mfjSG5UOsqah2RodkljzMkhZZdamiEDB8+Nsbk9T04yGNljDXGOZZ6u0+Tj9DuvbyNJBuPO0ABtLNPlJtfZJ4CNNCWJoY8gddwxNpm9YrHh9DEkBoeMud4Kma8XRZaYpBJOYvg59U9wOsblMvmGrzQe30dyqFZ1dxPfO0FT5BOdw989THVs4q1TFk+iN4PMu7CaLpd4EJOExNaJLE4d0xQKYpJ0cY5Ozcwwu6WOu2cs9TUYxPB4b4fvLRzTUXbT1HH7y0BnB0j6CAehkPFfFzd1TMsi6sU1/P4VM9NiISHBlYnBMR+kad075sXlmMehj1twnfTUqJH4GJfqIKte7S72emPnHbdiYHIB0e6ATjKq1UoTaFh6wBL2csMIVo9fH/v6QRHAgoxrOHQQxG/36tC1ODmGOeBGBRmXalgcdhDQ1xF1vI6a3DF2d4r7G1enOUgNOshlFq7qUCxrca9ldiCam7ilxRbP6JbOYsYtfLFmkcXEgLG1DN/6eroxHjqh5bh+Uw27e1oWVK7pN+AqwzUcq/UYTPw8nWufLFBHN2zcxLRYlmGPs6rA2Wy0uJe/E7TknbHIa1WH1bLA8DAj3JpxET+FCNCWZ5uNT6jxTPZK/1mXoCBeKlGLRT2lP69XN3XdqqCojKX1ZVda6iD2McjeXSHa0I+AHd2InGAJgjRVM6gOBfygDrarRJnho6eQBbrns+HkcNUCWtYClJa66qFgPbqqZEBTCOAgRqxCOhQBWpZeIC6QBq91hEoI5unTjsMsK9DCFigY9WNn19hgVCrELalrTw6WnYMYzjHhQ2/7G2xTx1HvwpzSe4cVi5ORQQwMW9+72FU5L4gGsa6Yu1RcDeIhs64Qs8izt0vGH+n9/IKaIlYpM2UqkYOrwwq5CgBjWpyGtxaonxe4KaJ3hx+7O0HaqVkxLBPj8FmBVmjNevIUFhUuDmMq5NDV9RwyPe/95IvxAhG7ymqxHGE5sZJL2kPLUhUinkXfrnFwGFwXD99djNLSFh/meXEb2B6Oyiwm0I7BC+OlTlOVPk9K8CIYzu5YHwKDTI6XAo5lz3WEqEXwQRKhh5cyLa6D81P4PXBw984as9YaGXHwx4Ba8rmOldUat/BHt9cQ38AaljnBdCJqs60OcXVDJZP//ZwSWtV9FpHNtgg22KuYx/U2tB5Mcp1TYOiphNhiFjgWeJ3DL2OZpuuUisIoUyzZEJ76I+LmyqWdv8LwnEiwMYczihjxeqtBsuFJSTg2oD1ETQx4v6D1VleSZW1xCwvAfVGWpQ069kgrQksAUW2rReYzsboIjSABuDQX0QJwB9cnZVgWVgE31vrklAJnEmVObykgYCk/VGX5OlpuKb5eiovUAvJ2tMstw0kIkNdpiSA91K6XA6K8CVCyr4PePhTo65q3DyX7OpTbSVk1PB62mhJ9HSpSqtKaESxsFRm0tLBVcvTV+vbBrLRK4hC7aitN9B0ZpX6vNMgjGIt5ZdmMv32KrmprD1afsPd4FEhThK0+WfTl3kpd482AGvG3jQdZK1+t8ireDswhofigRb3fxfI/4jj+xkffUX/1ccxxhEP9qyyBEH9Cx9vhf8TB7eiSpBHjZVSa4whQMJC1TqIR6q8RERtjOr2ID0yx3oYi0oAIvZCPz4eG64p3ObuREeOHUIR3MBVJwq9yll5P7KHdiPBOiOoRa/AjXz21J3k04l+i8OjErj4kaXWQiIVO/EvA+KLRAEnUVomtjPd6SvR3RLoeMT54nKFH1EqtkkEGFaQuTlSQrsxhRiOIt51S/Ho8B11+FUlwRaHnU4utEI38/mgSjRJ8PhWEtN6Z6WcncQOU4efjKoh3zfi7/+DfhPrwOZ9a/iYBiVJJxPlei3CqIDTYEqAPFow5/c71fAdVIwmo4n+cTIGbr2n9NULAE5ifcNNS63hvEOFk0wxYnICBBZ0I9xERBVILF0uggNdxuOkR4S6ngvgPmArzHv4KpMKGQFjQ+Rw6q9dC6R6dgZaJF7RVWIH0BTY9h+fz0ohHOyLuy+He/hN4GUR3/RxcBx2f76izarI9CaXmzRmhNQuSfIgJkva5GzN6HJbhQxCNsDGDSh56plmef6sg2eaXPsYBt5W+H6VE6omG6hOS1w4hiTWiThbJ1YO+RSO1vrpMlomf6nhQGz0m7qT6W04XOUHyzhZ4rkG+0hxL66oDW9mnPWyL3TMmssxyQUwr01CHX7b2OvUIaqS48TnMtAoEQTQixJeAlDfSiGmk/l8jpwIpTyFqOfeNIHWBooC036ERtUQp2tm/CKT5jjySbxTlvUVj2yhjvyWDVL3yfKRojXwLSEWUp7q0PBAKPp7m5YGoT3WH7wAZ1BeOywNZv3Gak/LIqriwxbQ5jaTcsEW1eb+FvoWo+zr5V/IUOvNtsapU2zJXSyj0xVB13sPfq0kkZA7dubIIKXIlJ8Cy7u+BN22RVcr+peOuxHdcBbA04FAVmEoEtO5vX55K4KVZS1QJvBBzU1rgUl8JapBNYIowLoZtD9NWRTWKqqe36L48BSz8QPH9epqqIDehlh2UuqocEmrdV7AvhuRoM74m80yeDIEX3ppreNN235FxV58DNjhswn5K8zK21+5ctjut6NmUIoy9tVvitnHr2VDM3ahtW8KQ/Vbsp9GGiWHfk8skyTSFz9/HdxhHe4uR/RxX/mG1SGXwypcDJNmCMfucZ/C1CuCQUbiBUDYbe7tiRkZX8GIat50d+wqR1fdN7ygGzrHrcN4kGFHK02cil5M6INgQVsvnNz77T5PqUFYJJInYmIBplJfP5On4eiOwYfhuCD44oLyYVs43rI1rk3H7usttzq8Qo3j84vavN9mOkAeuq8dHEd9NtCVKX51Oen+MM6IEYvz5StOehKLpIjD+nKU5AQWJpLizdB+1sb5LQvFRxbSJVGHmSdK/0WWaPguEYmcSJ68aWkK6rAw6jwSSCmrTWVHT96R7HwHANEgqybVJL+E2vE2q7Uu91Gr73SbbNUvZDtiOlCeIv4r/AI+0XUwz1lvcAAAAAElFTkSuQmCC")}.markdown-body h2{position:relative;padding:0 0 0 20px;font-size:20px;font-weight:700;color:#614500}.markdown-body h2:before{content:"";position:absolute;top:3px;bottom:0;left:0;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAQlBMVEVHcEwlRnqtZBj76q4lRnolRnolRnolRnolRnokRnr/gGtrVUeLXDBKTl+hYSHasW7Ik0zs0JG4dCvUdEE0SW+rYxrLQJfjAAAACnRSTlMA////0H/xUaMi5MCoTwAACfVJREFUeNrtnQl3qygUgJ9GXAqosfL//+pgmgXwXmRNJGdu55xO+6rx8+6I8O9fehmGriN93zdN07bVXdpW/ih/SbpuGP6dXbpOXv7z2i3S9ISck2eQOnAhMHG64VQQbmrAaM4B05GmipaGdB+m6BNQPBXzMYtKR3EPbB/RS5eY4g+lIW9WBqnySCvVMrzRpqqs0g9nwVg5p1KYlHEchRT5bftp+y3n6xlQDjAkABtrKULU9f377ev+4/1/NiT+URRiZRhrcZP6WLa/Gq005BORaqXsdYEuHPIP798ZxSyt6d5sVfxJESRCsvB32lfXwhRjnUBGmKXNoJQe04VIASJqRC/9G7yDsyQMiloYz+0pHYghEoPISAGgpDSvHsCoMwmA0mfjSG5UOsqah2RodkljzMkhZZdamiEDB8+Nsbk9T04yGNljDXGOZZ6u0+Tj9DuvbyNJBuPO0ABtLNPlJtfZJ4CNNCWJoY8gddwxNpm9YrHh9DEkBoeMud4Kma8XRZaYpBJOYvg59U9wOsblMvmGrzQe30dyqFZ1dxPfO0FT5BOdw989THVs4q1TFk+iN4PMu7CaLpd4EJOExNaJLE4d0xQKYpJ0cY5Ozcwwu6WOu2cs9TUYxPB4b4fvLRzTUXbT1HH7y0BnB0j6CAehkPFfFzd1TMsi6sU1/P4VM9NiISHBlYnBMR+kad075sXlmMehj1twnfTUqJH4GJfqIKte7S72emPnHbdiYHIB0e6ATjKq1UoTaFh6wBL2csMIVo9fH/v6QRHAgoxrOHQQxG/36tC1ODmGOeBGBRmXalgcdhDQ1xF1vI6a3DF2d4r7G1enOUgNOshlFq7qUCxrca9ldiCam7ilxRbP6JbOYsYtfLFmkcXEgLG1DN/6eroxHjqh5bh+Uw27e1oWVK7pN+AqwzUcq/UYTPw8nWufLFBHN2zcxLRYlmGPs6rA2Wy0uJe/E7TknbHIa1WH1bLA8DAj3JpxET+FCNCWZ5uNT6jxTPZK/1mXoCBeKlGLRT2lP69XN3XdqqCojKX1ZVda6iD2McjeXSHa0I+AHd2InGAJgjRVM6gOBfygDrarRJnho6eQBbrns+HkcNUCWtYClJa66qFgPbqqZEBTCOAgRqxCOhQBWpZeIC6QBq91hEoI5unTjsMsK9DCFigY9WNn19hgVCrELalrTw6WnYMYzjHhQ2/7G2xTx1HvwpzSe4cVi5ORQQwMW9+72FU5L4gGsa6Yu1RcDeIhs64Qs8izt0vGH+n9/IKaIlYpM2UqkYOrwwq5CgBjWpyGtxaonxe4KaJ3hx+7O0HaqVkxLBPj8FmBVmjNevIUFhUuDmMq5NDV9RwyPe/95IvxAhG7ymqxHGE5sZJL2kPLUhUinkXfrnFwGFwXD99djNLSFh/meXEb2B6Oyiwm0I7BC+OlTlOVPk9K8CIYzu5YHwKDTI6XAo5lz3WEqEXwQRKhh5cyLa6D81P4PXBw984as9YaGXHwx4Ba8rmOldUat/BHt9cQ38AaljnBdCJqs60OcXVDJZP//ZwSWtV9FpHNtgg22KuYx/U2tB5Mcp1TYOiphNhiFjgWeJ3DL2OZpuuUisIoUyzZEJ76I+LmyqWdv8LwnEiwMYczihjxeqtBsuFJSTg2oD1ETQx4v6D1VleSZW1xCwvAfVGWpQ069kgrQksAUW2rReYzsboIjSABuDQX0QJwB9cnZVgWVgE31vrklAJnEmVObykgYCk/VGX5OlpuKb5eiovUAvJ2tMstw0kIkNdpiSA91K6XA6K8CVCyr4PePhTo65q3DyX7OpTbSVk1PB62mhJ9HSpSqtKaESxsFRm0tLBVcvTV+vbBrLRK4hC7aitN9B0ZpX6vNMgjGIt5ZdmMv32KrmprD1afsPd4FEhThK0+WfTl3kpd482AGvG3jQdZK1+t8ireDswhofigRb3fxfI/4jj+xkffUX/1ccxxhEP9qyyBEH9Cx9vhf8TB7eiSpBHjZVSa4whQMJC1TqIR6q8RERtjOr2ID0yx3oYi0oAIvZCPz4eG64p3ObuREeOHUIR3MBVJwq9yll5P7KHdiPBOiOoRa/AjXz21J3k04l+i8OjErj4kaXWQiIVO/EvA+KLRAEnUVomtjPd6SvR3RLoeMT54nKFH1EqtkkEGFaQuTlSQrsxhRiOIt51S/Ho8B11+FUlwRaHnU4utEI38/mgSjRJ8PhWEtN6Z6WcncQOU4efjKoh3zfi7/+DfhPrwOZ9a/iYBiVJJxPlei3CqIDTYEqAPFow5/c71fAdVIwmo4n+cTIGbr2n9NULAE5ifcNNS63hvEOFk0wxYnICBBZ0I9xERBVILF0uggNdxuOkR4S6ngvgPmArzHv4KpMKGQFjQ+Rw6q9dC6R6dgZaJF7RVWIH0BTY9h+fz0ohHOyLuy+He/hN4GUR3/RxcBx2f76izarI9CaXmzRmhNQuSfIgJkva5GzN6HJbhQxCNsDGDSh56plmef6sg2eaXPsYBt5W+H6VE6omG6hOS1w4hiTWiThbJ1YO+RSO1vrpMlomf6nhQGz0m7qT6W04XOUHyzhZ4rkG+0hxL66oDW9mnPWyL3TMmssxyQUwr01CHX7b2OvUIaqS48TnMtAoEQTQixJeAlDfSiGmk/l8jpwIpTyFqOfeNIHWBooC036ERtUQp2tm/CKT5jjySbxTlvUVj2yhjvyWDVL3yfKRojXwLSEWUp7q0PBAKPp7m5YGoT3WH7wAZ1BeOywNZv3Gak/LIqriwxbQ5jaTcsEW1eb+FvoWo+zr5V/IUOvNtsapU2zJXSyj0xVB13sPfq0kkZA7dubIIKXIlJ8Cy7u+BN22RVcr+peOuxHdcBbA04FAVmEoEtO5vX55K4KVZS1QJvBBzU1rgUl8JapBNYIowLoZtD9NWRTWKqqe36L48BSz8QPH9epqqIDehlh2UuqocEmrdV7AvhuRoM74m80yeDIEX3ppreNN235FxV58DNjhswn5K8zK21+5ctjut6NmUIoy9tVvitnHr2VDM3ahtW8KQ/Vbsp9GGiWHfk8skyTSFz9/HdxhHe4uR/RxX/mG1SGXwypcDJNmCMfucZ/C1CuCQUbiBUDYbe7tiRkZX8GIat50d+wqR1fdN7ygGzrHrcN4kGFHK02cil5M6INgQVsvnNz77T5PqUFYJJInYmIBplJfP5On4eiOwYfhuCD44oLyYVs43rI1rk3H7usttzq8Qo3j84vavN9mOkAeuq8dHEd9NtCVKX51Oen+MM6IEYvz5StOehKLpIjD+nKU5AQWJpLizdB+1sb5LQvFRxbSJVGHmSdK/0WWaPguEYmcSJ68aWkK6rAw6jwSSCmrTWVHT96R7HwHANEgqybVJL+E2vE2q7Uu91Gr73SbbNUvZDtiOlCeIv4r/AI+0XUwz1lvcAAAAAElFTkSuQmCC");background-size:100% 100%;background-repeat:no-repeat;width:15px;height:15px;margin:auto}.markdown-body h3{width:100%;text-align:left;margin:20px 10px 0 0;font-size:18px;font-weight:700;display:inline-block;padding-left:10px;padding-bottom:0;border-left:5px solid #8f6600;color:#614500}.markdown-body h4,.markdown-body h5,.markdown-body h6{font-weight:700;color:#a37400}.markdown-body h4{font-size:17px}.markdown-body h5,.markdown-body h6{display:flex;align-items:center}.markdown-body h5:after,.markdown-body h6:after{display:inline-block;border:2px solid #fff6e0;color:rgba(189,134,0,.5);border-radius:50%;text-align:center;margin-left:5px}.markdown-body h5{font-size:14px}.markdown-body h5:after{content:"5";width:15px;height:15px;line-height:15px;font-size:13px}.markdown-body h6{font-size:12px}.markdown-body h6:after{content:"6";width:13px;height:13px;line-height:13px;font-size:12px}.markdown-body p{color:#412c0c;letter-spacing:1px;font-weight:400;margin-bottom:16px}.markdown-body img{max-width:100%;display:block;margin:auto}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#755300;font-weight:400;border-bottom:1px solid #755300;font-weight:bolder;text-decoration:none}.markdown-body table{width:100%!important;margin:0;font-size:12px;width:auto;max-width:100%;overflow:auto;border-collapse:collapse;border-spacing:0}.markdown-body table img{box-shadow:none}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body thead tr th{text-align:center}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px;box-sizing:border-box;border:1px solid rgba(72,42,10,.1)}.markdown-body blockquote{position:relative;text-size-adjust:100%;line-height:25px;font-weight:400;border-radius:10px;font-style:normal;text-align:left;box-sizing:inherit;border:1px solid #ffd87a;background-color:rgba(189,134,0,.5);margin:20px 0;padding:20px}.markdown-body blockquote p{color:#fff6e0;letter-spacing:2px;margin:0}.markdown-body blockquote:after,.markdown-body blockquote:before{position:absolute;color:#cc9100;font-size:34px;font-weight:700}.markdown-body blockquote:before{content:"â";top:8px;left:5px}.markdown-body blockquote:after{content:"â";right:5px;bottom:-5px}.markdown-body strong{color:#c28a00;font-weight:bolder}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{color:#c28a00}.markdown-body em strong{font-style:normal;color:#c28a00;background-color:#8a6200}.markdown-body s{color:#c28a00}.markdown-body hr{border-top:1px solid #805b00}.markdown-body code,.markdown-body li code,.markdown-body p code{color:#996d00;background-color:rgba(130,98,0,.3)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit;color:#858585;font-family:bold;letter-spacing:1px}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection,.markdown-body img::selection{color:rgba(189,134,0,.5);background-color:#fff}.markdown-body a::selection,.markdown-body b::selection,.markdown-body del::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:transparent}.markdown-body pre&gt;code::selection{background-color:rgba(189,134,0,.5)}.markdown-body .math .math-inline::selection,.markdown-body blockquote::selection,.markdown-body ol::selection,.markdown-body p::selection,.markdown-body strong::selection,.markdown-body table::selection,.markdown-body ul::selection{background-color:rgba(189,134,0,.5)}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ğŸ§  ä¸€ã€å‰è¨€ï¼šå½“æ™ºèƒ½ä½“â€œå˜èªæ˜â€ï¼Œç¨‹åºå‘˜å°±ä¸èƒ½â€œå†™ç³Šæ¶‚â€</h2>
<p>AI æ—¶ä»£ï¼Œä»£ç ä¸å†åªæ˜¯è®©æœºå™¨<strong>å¬è¯åœ°æ‰§è¡Œå‘½ä»¤</strong>ï¼Œ<br/>
è€Œè¦è®©å®ƒ<strong>åœ¨å¤æ‚å†³ç­–ä¸­ä¸èƒ¡æ¥ã€ä¸è¶Šç•Œã€è¿˜èƒ½æŒç»­æ­£ç¡®</strong>ã€‚</p>
<p>ä½†é—®é¢˜æ¥äº† â€”â€” ä½ æ— æ³•å®Œå…¨é¢„æµ‹ä¸€ä¸ªæ‹¥æœ‰è‡ªæˆ‘è°ƒæ•´èƒ½åŠ›çš„æ¨¡å‹åœ¨å®é™…ç¯å¢ƒä¸­ä¼šæ€ä¹ˆâ€œå‘ç–¯â€ã€‚<br/>
äºæ˜¯æˆ‘ä»¬éœ€è¦ä»<strong>ç¼–ç å±‚é¢</strong>çº¦æŸå®ƒçš„â€œæ­£ç¡®ç‡â€ï¼Œä¹Ÿå°±æ˜¯ï¼š</p>
<blockquote>
<p>å¦‚ä½•ç”¨ä»£ç å’Œç»“æ„è®¾è®¡ï¼Œè®©æ™ºèƒ½ä½“æ—¢èªæ˜åˆå®ˆè§„çŸ©ï¼Ÿ</p>
</blockquote>
<hr/>
<h2 data-id="heading-1">ğŸ§© äºŒã€æ­£ç¡®ç‡çº¦æŸçš„ä¸‰å±‚å“²å­¦ç»“æ„</h2>
<p>å°±åƒ CPU çš„ä¸‰çº§ç¼“å­˜ï¼ŒAI ä»»åŠ¡çº¦æŸé€»è¾‘ä¹Ÿå¯åˆ†ä¸ºä¸‰å±‚ â¤ï¸â€ğŸ”¥</p>





























<table><thead><tr><th align="left">å±‚çº§</th><th align="left">åç§°</th><th align="left">æŠ€æœ¯å…³é”®è¯</th><th align="left">åŠŸèƒ½æè¿°</th></tr></thead><tbody><tr><td align="left">L1</td><td align="left"><strong>è¾“å…¥çº¦æŸå±‚</strong></td><td align="left">æ•°æ®æ¸…æ´— / Prompt å·¥ç¨‹ / æ ¡éªŒ</td><td align="left">é˜²æ­¢â€œå¬é”™è¯â€</td></tr><tr><td align="left">L2</td><td align="left"><strong>ä¸­é—´é€»è¾‘å±‚</strong></td><td align="left">ä»»åŠ¡åˆ†è§£ / è·¯å¾„è§„åˆ’ / ç­–ç•¥æ¨¡å‹</td><td align="left">é˜²æ­¢â€œæƒ³æ­ªäº†â€</td></tr><tr><td align="left">L3</td><td align="left"><strong>è¾“å‡ºç›‘æ§å±‚</strong></td><td align="left">å¯è§£é‡Šæ€§æ£€æµ‹ / Rule-based Validator / RLHF</td><td align="left">é˜²æ­¢â€œåšé”™äº‹â€</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-2">ğŸª„ 1. è¾“å…¥çº¦æŸå±‚ï¼šè®©æ™ºèƒ½ä½“åªç†è§£â€œæ ¼å¼åŒ–ä¸–ç•Œâ€</h3>
<p>AI æœ€å¤§çš„æ•Œäººï¼Œæ˜¯<strong>æ¨¡æ£±ä¸¤å¯çš„è¾“å…¥</strong>ã€‚<br/>
æƒ³è®©å®ƒæ­£ç¡®ï¼Œé¦–å…ˆè¦å­¦ä¼š**â€œé©¯åŒ–ä¸Šä¸‹æ–‡â€**ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// è¾“å…¥å®ˆé—¨å‘˜ï¼šæ ¼å¼éªŒè¯å™¨</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">inputValidator</span>(<span class="hljs-params">prompt</span>) {
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> prompt !== <span class="hljs-string">"string"</span> || prompt.<span class="hljs-title function_">trim</span>().<span class="hljs-property">length</span> &lt; <span class="hljs-number">5</span>) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">"âŒ è¾“å…¥æ— æ•ˆï¼šè¯·ç¡®ä¿ prompt æ˜¯å®Œæ•´ä¸”å…·å¤‡è¯­ä¹‰ä¿¡æ¯çš„æ–‡æœ¬ã€‚"</span>);
  }
  <span class="hljs-keyword">const</span> forbidden = [<span class="hljs-string">"delete"</span>, <span class="hljs-string">"shutdown"</span>, <span class="hljs-string">"drop table"</span>]; <span class="hljs-comment">// é˜²SQLé£æš´ ğŸ˜…</span>
  forbidden.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">word</span> =&gt;</span> {
    <span class="hljs-keyword">if</span> (prompt.<span class="hljs-title function_">toLowerCase</span>().<span class="hljs-title function_">includes</span>(word)) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">"ğŸš« æ£€æµ‹åˆ°æ½œåœ¨å±é™©æŒ‡ä»¤ï¼"</span>);
    }
  });
  <span class="hljs-keyword">return</span> prompt.<span class="hljs-title function_">trim</span>();
}

<span class="hljs-comment">// ä½¿ç”¨æ¡ˆä¾‹</span>
<span class="hljs-keyword">try</span> {
  <span class="hljs-keyword">const</span> validPrompt = <span class="hljs-title function_">inputValidator</span>(<span class="hljs-string">"å¸®æˆ‘æ€»ç»“ä¸€ä¸‹æœºå™¨å­¦ä¹ çš„æ ¸å¿ƒåŸç†"</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"âœ… è¾“å…¥é€šè¿‡éªŒè¯:"</span>, validPrompt);
} <span class="hljs-keyword">catch</span> (error) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(error.<span class="hljs-property">message</span>);
}
</code></pre>
<p>ğŸ§© <strong>åŸç†è¯´æ˜ï¼š</strong><br/>
é€šè¿‡ <em>è¾“å…¥ç™½åå• + è¯­ä¹‰é•¿åº¦é™åˆ¶ + å®‰å…¨é»‘åå•</em>ï¼Œ<br/>
åœ¨é€»è¾‘å…¥å£é˜¶æ®µè¿‡æ»¤æ‰ 80% çš„â€œæ­§ä¹‰ä¸é£é™©â€ã€‚</p>
<hr/>
<h3 data-id="heading-3">âš™ï¸ 2. ä¸­é—´é€»è¾‘å±‚ï¼šè®©æ¨¡å‹æ€è€ƒå¾—æ›´æœ‰â€œæ¡ç†â€</h3>
<p>AI æ‰§è¡Œä»»åŠ¡æ—¶ï¼Œæœ€å¸¸è§çš„é”™è¯¯ï¼Œä¸æ˜¯â€œç®—é”™â€ï¼Œè€Œæ˜¯â€œç†è§£é”™â€ã€‚<br/>
äºæ˜¯æˆ‘ä»¬å¼•å…¥ <strong>ä»»åŠ¡é“¾çº¦æŸï¼ˆTask Chaining Constraintï¼‰</strong> ã€‚</p>
<p>æ¯ä¸ªå¤æ‚ä»»åŠ¡è¢«æ‹†åˆ†ä¸ºè‹¥å¹²æ­¥éª¤ï¼š<br/>
1ï¸âƒ£ ç†è§£æŒ‡ä»¤ â†’ 2ï¸âƒ£ åˆ†æä¸Šä¸‹æ–‡ â†’ 3ï¸âƒ£ è¾“å‡ºåˆç¨¿ â†’ 4ï¸âƒ£ è‡ªæˆ‘å®¡æŸ¥</p>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªæç®€æ¨¡æ‹Ÿ ğŸ‘‡</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å¤šé˜¶æ®µä»»åŠ¡çº¦æŸ</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">SmartAgent</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">name</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;
  }

  <span class="hljs-title function_">processTask</span>(<span class="hljs-params">task</span>) {
    <span class="hljs-keyword">const</span> steps = [
      <span class="hljs-string">"ç†è§£ä»»åŠ¡éœ€æ±‚..."</span>,
      <span class="hljs-string">"åˆ†æè¾¹ç•Œæ¡ä»¶..."</span>,
      <span class="hljs-string">"ç”Ÿæˆæ‰§è¡Œæ–¹æ¡ˆ..."</span>,
      <span class="hljs-string">"äº¤å‰éªŒè¯è¾“å‡º..."</span>
    ];

    steps.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">step, i</span>) =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`ğŸ§© Step <span class="hljs-subst">${i+<span class="hljs-number">1</span>}</span>: <span class="hljs-subst">${step}</span>`</span>));

    <span class="hljs-keyword">return</span> <span class="hljs-string">`âœ… [<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span>] ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ï¼š<span class="hljs-subst">${task}</span> å·²é€šè¿‡å¤šé˜¶æ®µéªŒè¯`</span>;
  }
}

<span class="hljs-comment">// å®ä¾‹æ¼”ç¤º</span>
<span class="hljs-keyword">const</span> ai = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SmartAgent</span>(<span class="hljs-string">"TaskGuardian"</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(ai.<span class="hljs-title function_">processTask</span>(<span class="hljs-string">"åˆ†æ Web å®‰å…¨æ¼æ´"</span>));
</code></pre>
<p>ğŸ’¡ <strong>è®¾è®¡å“²å­¦ï¼š</strong></p>
<blockquote>
<p>ä¸ç›¸ä¿¡ä¸€æ¬¡ç”Ÿæˆï¼Œç›¸ä¿¡å¤šæ¬¡æ¨ç†ã€‚<br/>
æŠŠâ€œæ­£ç¡®ç‡â€æ‹†åˆ†åˆ°å¤šä¸ªé˜¶æ®µæ ¡éªŒçš„â€œåä½œç»“æ„â€ã€‚</p>
</blockquote>
<p>è¿™æ˜¯ä¸€ç§<strong>ç»“æ„åŒ–æ€è€ƒçš„è‡ªåŠ¨åŒ–</strong>ï¼Œæœ‰æ•ˆé™ä½â€œæ¨¡å‹å¹»è§‰â€çš„æ¦‚ç‡ã€‚</p>
<hr/>
<h3 data-id="heading-4">ğŸ§° 3. è¾“å‡ºç›‘æ§å±‚ï¼šæœ€åçš„â€œé˜²çˆ†é˜€â€</h3>
<p>å³ä½¿ç»è¿‡å¤šå±‚é€»è¾‘ï¼Œè¾“å‡ºä»å¯èƒ½å‡ºé”™ï¼Œæ¯”å¦‚ï¼š</p>
<ul>
<li>å¹»è§‰äº‹å®ï¼ˆAI èƒ¡ç¼–ä¹±é€ ï¼‰</li>
<li>å€¼åŸŸé”™è¯¯ï¼ˆæŠŠ 0<del>1 çš„æ¦‚ç‡è¾“å‡ºæˆ 0</del>100ï¼‰</li>
<li>é£é™©è¯­ä¹‰ï¼ˆè¾“å‡ºä¸åˆç†å»ºè®®ï¼‰</li>
</ul>
<p>è§£å†³æ–¹æ¡ˆæ˜¯å¼•å…¥ <strong>Rule-based Validator + åŠ¨æ€åé¦ˆ Re-Scoring</strong>ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// è¾“å‡ºéªŒè¯å™¨</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">outputValidator</span>(<span class="hljs-params">response</span>) {
  <span class="hljs-comment">// ç®€å•ä¾‹å­ï¼šä¸èƒ½è¾“å‡ºè´Ÿèƒ½é‡æˆ–æ— æ„ä¹‰æ–‡æœ¬</span>
  <span class="hljs-keyword">const</span> badWords = [<span class="hljs-string">"æ¯ç­"</span>, <span class="hljs-string">"è‡ªæ€"</span>, <span class="hljs-string">"æš´åŠ›"</span>];
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> w <span class="hljs-keyword">of</span> badWords) {
    <span class="hljs-keyword">if</span> (response.<span class="hljs-title function_">includes</span>(w)) {
      <span class="hljs-keyword">return</span> <span class="hljs-string">"âš ï¸ è­¦å‘Šï¼šæ£€æµ‹åˆ°æ½œåœ¨å±é™©è¾“å‡ºï¼Œå·²è¢«æ‹¦æˆªã€‚"</span>;
    }
  }

  <span class="hljs-keyword">if</span> (response.<span class="hljs-property">length</span> &lt; <span class="hljs-number">10</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-string">"âš ï¸ è¾“å‡ºè¿‡çŸ­ï¼Œç–‘ä¼¼é”™è¯¯ç”Ÿæˆï¼Œè§¦å‘äºŒæ¬¡ç”Ÿæˆã€‚"</span>;
  }

  <span class="hljs-keyword">return</span> <span class="hljs-string">"âœ… è¾“å‡ºå·²é€šè¿‡å®‰å…¨ä¸è¯­ä¹‰å®¡æ ¸ã€‚"</span>;
}

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">outputValidator</span>(<span class="hljs-string">"AI å°†å½»åº•æ”¹å˜ç¼–ç¨‹ä¸–ç•Œï¼"</span>));
</code></pre>
<p>ğŸ§  <strong>éšå«é€»è¾‘ï¼š</strong><br/>
è¾“å‡ºå±‚æ‰æ˜¯æ¨¡å‹è´£ä»»çš„â€œå¸æ³•ç³»ç»Ÿâ€ã€‚<br/>
ä»»ä½•å¼‚å¸¸è¾“å‡ºéƒ½åº”è§¦å‘å†è®­ç»ƒæˆ–å†è¯„ä¼°ã€‚</p>
<hr/>
<h2 data-id="heading-5">ğŸ§® ä¸‰ã€è®©æ¨¡å‹â€œçº é”™â€è€Œéâ€œçŠ¯é”™â€</h2>
<p>åœ¨ AI æ¶æ„ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥è®¾è®¡ä¸€ç§å†…éƒ¨é—­ç¯æœºåˆ¶ï¼š</p>
<pre><code class="hljs">æ‰§è¡Œ â†’ æ£€æŸ¥ â†’ ä¿®æ­£ â†’ ç¡®è®¤ â†’ è¾“å‡º
</code></pre>
<p>ç”¨äººç±»è¯­è¨€è§£é‡Šï¼Œå°±æ˜¯ï¼š</p>
<blockquote>
<p><strong>â€œAI ä¸è¯¥ä¸€æ¬¡åšå¯¹ï¼Œè€Œè¯¥å­¦ä¼šè‡ªå·±å‘ç°å“ªé‡Œä¸å¯¹ã€‚â€</strong></p>
</blockquote>
<p>è¿™å°±æ˜¯ <strong>Self-Correction Pipelineï¼ˆè‡ªçº ç®¡çº¿ï¼‰</strong> çš„æ€æƒ³ã€‚</p>
<hr/>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// è‡ªçº æœºåˆ¶ç¤ºä¾‹</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">selfCorrectingAgent</span>(<span class="hljs-params">prompt</span>) {
  <span class="hljs-keyword">let</span> attempt = <span class="hljs-number">0</span>;
  <span class="hljs-keyword">let</span> output = <span class="hljs-string">""</span>;

  <span class="hljs-keyword">while</span> (attempt &lt; <span class="hljs-number">3</span>) {
    attempt++;
    output = <span class="hljs-string">`å°è¯•<span class="hljs-subst">${attempt}</span>æ¬¡ç”Ÿæˆçš„ç»“æœï¼š<span class="hljs-subst">${prompt}</span> çš„è§£é‡Šç‰ˆæœ¬`</span>;
    <span class="hljs-keyword">const</span> validation = <span class="hljs-title function_">outputValidator</span>(output);
    
    <span class="hljs-keyword">if</span> (validation.<span class="hljs-title function_">includes</span>(<span class="hljs-string">"âœ…"</span>)) {
      <span class="hljs-keyword">return</span> <span class="hljs-string">`ğŸ¯ æœ€ç»ˆè¾“å‡ºï¼ˆç¬¬<span class="hljs-subst">${attempt}</span>æ¬¡ç”Ÿæˆï¼‰ï¼š<span class="hljs-subst">${output}</span>`</span>;
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(validation);
    }
  }

  <span class="hljs-keyword">return</span> <span class="hljs-string">"âŒ è¿ç»­ç”Ÿæˆä¸‰æ¬¡å‡å¤±è´¥ï¼Œä»»åŠ¡ç»ˆæ­¢ä»¥é˜²é”™è¯¯æ‰©æ•£ã€‚"</span>;
}

<span class="hljs-title function_">selfCorrectingAgent</span>(<span class="hljs-string">"ä»‹ç» AI çš„ä»»åŠ¡çº é”™æœºåˆ¶"</span>).<span class="hljs-title function_">then</span>(<span class="hljs-variable language_">console</span>.<span class="hljs-property">log</span>);
</code></pre>
<hr/>
<h2 data-id="heading-6">ğŸ” å››ã€å¤šæ¨¡å‹äº¤å‰éªŒè¯ï¼šAI çš„â€œåŒä¾ªè¯„å®¡åˆ¶åº¦â€</h2>
<p>æ€ä¹ˆé˜²æ­¢æ™ºèƒ½ä½“â€œè‡ªä¿¡åœ°èƒ¡è¯´å…«é“â€ï¼Ÿ<br/>
â€”â€”è®©å¦ä¸€ä¸ªæ™ºèƒ½ä½“æ¥â€œæ‰“è„¸â€å®ƒã€‚ ğŸ˜</p>
<blockquote>
<p>å¤šæ™ºèƒ½ä½“éªŒè¯ï¼ˆMulti-Agent Validationï¼‰<br/>
= æŠŠä¸€ç¾¤ AI æ”¾è¿›ä¼šè®®å®¤ï¼Œè®©ä»–ä»¬äº’ç›¸æŒ‡å‡ºé—®é¢˜ã€‚</p>
</blockquote>
<p>è¿™ç§æœºåˆ¶èƒ½æ˜¾è‘—æå‡æ­£ç¡®ç‡ï¼Œå› ä¸ºæ²¡æœ‰äººæ¯”å¦ä¸€ä¸ª AI æ›´æ‡‚å¦ä¸€ä¸ª AI çš„â€œå¹»è§‰æ¨¡å¼â€ã€‚</p>
<hr/>
<h2 data-id="heading-7">ğŸ§± äº”ã€çº¦æŸæ­£ç¡®ç‡çš„åº•å±‚åŸåˆ™ï¼šä»è®¡ç®—æœºç§‘å­¦è§†è§’å‡ºå‘</h2>






























<table><thead><tr><th align="left">åŸåˆ™</th><th align="left">å«ä¹‰</th><th align="left">ç±»æ¯”</th></tr></thead><tbody><tr><td align="left"><strong>ç¡®å®šæ€§åŸåˆ™</strong></td><td align="left">ç›¸åŒè¾“å…¥ = ç›¸åŒè¾“å‡º</td><td align="left">CPU æŒ‡ä»¤å‘¨æœŸ</td></tr><tr><td align="left"><strong>å¯è§£é‡Šæ€§åŸåˆ™</strong></td><td align="left">æ¯ä¸€æ­¥éƒ½èƒ½è¢«è¿½è¸ª</td><td align="left">è°ƒè¯•æ—¥å¿— Trace</td></tr><tr><td align="left"><strong>æ”¶æ•›æ€§åŸåˆ™</strong></td><td align="left">å¤šè½®è®¡ç®—éœ€è¶‹äºç¨³å®š</td><td align="left">è¿­ä»£ç®—æ³•æ”¶æ•›</td></tr><tr><td align="left"><strong>å®‰å…¨è¾¹ç•ŒåŸåˆ™</strong></td><td align="left">æ°¸è¿œä¸è¦ä¿¡ä»»äººç±»è¾“å…¥ ğŸ˜†</td><td align="left">é˜²å¾¡å¼ç¼–ç¨‹</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-8">ğŸ§­ å…­ã€ç»“è¯­ï¼šç¨‹åºå‘˜ï¼Œæœªæ¥çš„â€œè¯­ä¹‰ç«‹æ³•è€…â€</h2>
<p>AI æ—¶ä»£çš„ codingï¼Œä¸å†åªæ˜¯â€œå†™ç®—æ³•â€ï¼Œ<br/>
è€Œæ˜¯<strong>ä¸ºæ™ºèƒ½ä½“åˆ¶å®šè¡Œä¸ºå‡†åˆ™ä¸çº é”™é€»è¾‘</strong>ã€‚</p>
<blockquote>
<p>æˆ‘ä»¬ä¸å†æ˜¯å†™ä»£ç çš„äººï¼Œè€Œæ˜¯<strong>å†™å‡ºä»£ç ä¼šè‡ªå·±å†™å‡ºä»£ç </strong>çš„äººã€‚</p>
</blockquote>
<p>è®©æ™ºèƒ½ä½“ä¿æŒæ­£ç¡®ç‡ï¼Œä¸æ˜¯é â€œç¦æ­¢â€ï¼Œ<br/>
è€Œæ˜¯é â€œç»“æ„ã€åé¦ˆä¸é€»è¾‘ä¼˜é›…â€ã€‚</p>
<p>ğŸ§‘â€ğŸ’» <strong>Coding çš„æœªæ¥ï¼šä¸æ˜¯å‘½ä»¤ï¼Œè€Œæ˜¯å…±è¯†ã€‚</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vert.x + Kotlin æ‰‹å†™ Web æ¡†æ¶ï¼šä» Tomcat + Spring MVC åˆ°å“åº”å¼æ ¸å¿ƒ]]></title>    <link>https://juejin.cn/post/7582787460418715690</link>    <guid>https://juejin.cn/post/7582787460418715690</guid>    <pubDate>2025-12-12T15:08:16.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582787460418715690" data-draft-id="7582786655473647659" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vert.x + Kotlin æ‰‹å†™ Web æ¡†æ¶ï¼šä» Tomcat + Spring MVC åˆ°å“åº”å¼æ ¸å¿ƒ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-12T15:08:16.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Pypirus"/> <meta itemprop="url" content="https://juejin.cn/user/958429872790984"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vert.x + Kotlin æ‰‹å†™ Web æ¡†æ¶ï¼šä» Tomcat + Spring MVC åˆ°å“åº”å¼æ ¸å¿ƒ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/958429872790984/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Pypirus
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-12T15:08:16.000Z" title="Fri Dec 12 2025 15:08:16 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>â€”â€”ä»…ç”¨ Vert.x Coreï¼Œä»é›¶å®ç°è¯·æ±‚æŠ½è±¡ã€æ­£åˆ™è·¯ç”±ä¸ä¸­é—´ä»¶ç®¡é“</p>
</blockquote>
<p>åœ¨ç»å…¸çš„ <code>Nginx â†’ Tomcat â†’ Spring MVC</code> æ¶æ„ä¸­ï¼š</p>
<ul>
<li><strong>Tomcat</strong> è´Ÿè´£å°†åŸå§‹ HTTP å­—èŠ‚æµè§£æä¸ºç»“æ„åŒ–çš„è¯·æ±‚å¯¹è±¡ï¼›</li>
<li><strong>Spring MVC</strong> åœ¨æ­¤åŸºç¡€ä¸Šï¼Œé€šè¿‡æ³¨è§£è·¯ç”±ã€æ‹¦æˆªå™¨é“¾ç­‰æœºåˆ¶ï¼Œå°†è¯·æ±‚åˆ†å‘ç»™ä¸šåŠ¡é€»è¾‘ã€‚</li>
</ul>
<p>ä»Šå¤©ï¼Œæˆ‘ä»¬ä»…ä½¿ç”¨ <strong>Vert.x Core</strong>ï¼ˆå³ <code>vertx-core</code>ï¼‰ï¼Œä¸ä¾èµ–ä»»ä½•é«˜å±‚ Web æ¨¡å—ï¼Œäº²æ‰‹å®ç°ä¸€ä¸ªè½»é‡ä½†å®Œæ•´çš„ Web æ¡†æ¶ã€‚æˆ‘ä»¬å°†é€æ­¥æ„å»ºï¼š</p>
<ul>
<li><code>Request</code> / <code>Response</code>ï¼šå°è£…åŸå§‹ HTTP æ•°æ®ï¼Œæä¾›æ¸…æ™°çš„ç¼–ç¨‹æ¥å£ï¼›</li>
<li>åŠ¨æ€è·¯ç”±ï¼šé€šè¿‡æ­£åˆ™è¡¨è¾¾å¼æ”¯æŒ <code>/users/:id</code> è¿™ç±»è·¯å¾„ï¼›</li>
<li>ä¸­é—´ä»¶ç³»ç»Ÿï¼šä»¥å¯ç»„åˆçš„æ–¹å¼æ’å…¥é€šç”¨é€»è¾‘ï¼Œå¦‚æ—¥å¿—ã€è®¤è¯ã€CORSã€‚</li>
</ul>
<p>æ¯ä¸€æ­¥éƒ½å¯è¿è¡Œã€å¯éªŒè¯ï¼Œæœ€ç»ˆå½¢æˆä¸€ä¸ª<strong>ä½ å®Œå…¨ç†è§£å…¶å†…éƒ¨å·¥ä½œåŸç†çš„ Web å†…æ ¸</strong>ã€‚</p>
<hr/>
<h2 data-id="heading-0">ä¾èµ–è¯´æ˜</h2>
<p>é¡¹ç›®ä»…ä¾èµ–ä»¥ä¸‹ä¸¤ä¸ªåº“ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">implementation(<span class="hljs-string">"io.vertx:vertx-core:4.5.8"</span>)
implementation(<span class="hljs-string">"org.jetbrains.kotlin:kotlin-stdlib"</span>)
</code></pre>
<p>ä¸ä½¿ç”¨ <code>vert.x-web</code>ï¼Œæ‰€æœ‰ HTTP è§£æã€è·¯ç”±åŒ¹é…ã€å“åº”æ„é€ å‡ç”±æˆ‘ä»¬è‡ªè¡Œå®ç°ã€‚è¿™è®©æˆ‘ä»¬èƒ½æ¸…æ™°çœ‹åˆ° Web æ¡†æ¶æ¯ä¸€å±‚çš„èŒè´£è¾¹ç•Œã€‚</p>
<hr/>
<h2 data-id="heading-1">ç¬¬ä¸€æ­¥ï¼šå¯åŠ¨æœåŠ¡å™¨ + å°è£…è¯·æ±‚ä¸å“åº”</h2>
<p>ç›®æ ‡ï¼š</p>
<ul>
<li>å¯åŠ¨åŸç”Ÿ HTTP æœåŠ¡å™¨ï¼›</li>
<li>å®šä¹‰ <code>Request</code>ï¼ˆâ‰ˆ <code>HttpServletRequest</code>ï¼‰å’Œ <code>Response</code>ï¼ˆâ‰ˆ <code>HttpServletResponse</code>ï¼‰ï¼›</li>
<li>å®ç° <code>/hello</code> é™æ€è·¯ç”±ã€‚</li>
</ul>
<h3 data-id="heading-2">æ ¸å¿ƒæ•°æ®ç»“æ„</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// Request.kt</span>
<span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Request</span>(
    <span class="hljs-keyword">val</span> method: String,
    <span class="hljs-keyword">val</span> uri: String,
    <span class="hljs-keyword">val</span> path: String,
    <span class="hljs-keyword">val</span> headers: Map&lt;String, String&gt;,
    <span class="hljs-keyword">val</span> query: Map&lt;String, String&gt;
)

<span class="hljs-comment">// Response.kt</span>
<span class="hljs-keyword">import</span> io.vertx.core.http.HttpServerResponse

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Response</span>(<span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> raw: HttpServerResponse) {
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">text</span><span class="hljs-params">(content: <span class="hljs-type">String</span>, statusCode: <span class="hljs-type">Int</span> = <span class="hljs-number">200</span>)</span></span> {
        raw
            .setStatusCode(statusCode)
            .putHeader(<span class="hljs-string">"Content-Type"</span>, <span class="hljs-string">"text/plain; charset=utf-8"</span>)
            .end(content)
    }

    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">json</span><span class="hljs-params">(content: <span class="hljs-type">String</span>, statusCode: <span class="hljs-type">Int</span> = <span class="hljs-number">200</span>)</span></span> {
        raw
            .setStatusCode(statusCode)
            .putHeader(<span class="hljs-string">"Content-Type"</span>, <span class="hljs-string">"application/json; charset=utf-8"</span>)
            .end(content)
    }
}
</code></pre>
<h3 data-id="heading-3">URI è§£æå·¥å…·</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// HttpUtils.kt</span>
<span class="hljs-keyword">object</span> HttpUtils {
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">parsePath</span><span class="hljs-params">(uri: <span class="hljs-type">String</span>)</span></span>: String =
        uri.split(<span class="hljs-string">'?'</span>).first().ifEmpty { <span class="hljs-string">"/"</span> }

    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">parseQuery</span><span class="hljs-params">(uri: <span class="hljs-type">String</span>)</span></span>: Map&lt;String, String&gt; {
        <span class="hljs-keyword">val</span> queryPart = uri.split(<span class="hljs-string">'?'</span>).getOrNull(<span class="hljs-number">1</span>) ?: <span class="hljs-keyword">return</span> emptyMap()
        <span class="hljs-keyword">return</span> queryPart.split(<span class="hljs-string">'&amp;'</span>).associate { param -&gt;
            <span class="hljs-keyword">val</span> parts = param.split(<span class="hljs-string">'='</span>, limit = <span class="hljs-number">2</span>)
            <span class="hljs-keyword">val</span> key = java.net.URLDecoder.decode(parts.getOrElse(<span class="hljs-number">0</span>) { <span class="hljs-string">""</span> }, <span class="hljs-string">"UTF-8"</span>)
            <span class="hljs-keyword">val</span> value = java.net.URLDecoder.decode(parts.getOrElse(<span class="hljs-number">1</span>) { <span class="hljs-string">""</span> }, <span class="hljs-string">"UTF-8"</span>)
            key to value
        }
    }
}
</code></pre>
<h3 data-id="heading-4">åˆå§‹è·¯ç”±å™¨</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// Router.kt</span>
<span class="hljs-keyword">import</span> io.vertx.core.http.HttpServerRequest
<span class="hljs-keyword">import</span> io.vertx.core.http.HttpServerResponse

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Router</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> routes = mutableMapOf&lt;String, (Request, Response) -&gt; <span class="hljs-built_in">Unit</span>&gt;()

    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">get</span><span class="hljs-params">(path: <span class="hljs-type">String</span>, handler: (<span class="hljs-type">Request</span>, <span class="hljs-type">Response</span>) -&gt; <span class="hljs-type">Unit</span>)</span></span> {
        routes[path] = handler
    }

    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">handle</span><span class="hljs-params">(req: <span class="hljs-type">HttpServerRequest</span>, res: <span class="hljs-type">HttpServerResponse</span>)</span></span> {
        <span class="hljs-keyword">val</span> path = HttpUtils.parsePath(req.uri())
        <span class="hljs-keyword">val</span> handler = routes[path]

        <span class="hljs-keyword">if</span> (handler != <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">val</span> request = Request(
                method = req.method().name(),
                uri = req.uri(),
                path = path,
                headers = req.headers().entries().associate { it.key to it.value },
                query = HttpUtils.parseQuery(req.uri())
            )
            handler(request, Response(res))
        } <span class="hljs-keyword">else</span> {
            res.setStatusCode(<span class="hljs-number">404</span>).end(<span class="hljs-string">"Not Found"</span>)
        }
    }
}
</code></pre>
<h3 data-id="heading-5">å¯åŠ¨å…¥å£</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// Main.kt</span>
<span class="hljs-keyword">import</span> io.vertx.core.Vertx

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">val</span> vertx = Vertx.vertx()
    <span class="hljs-keyword">val</span> router = Router()

    router.<span class="hljs-keyword">get</span>(<span class="hljs-string">"/hello"</span>) { _, res -&gt; res.text(<span class="hljs-string">"Hello from Vert.x Core!"</span>) }

    vertx.createHttpServer()
        .requestHandler { httpReq -&gt; router.handle(httpReq, httpReq.response()) }
        .listen(<span class="hljs-number">8080</span>) { result -&gt;
            <span class="hljs-keyword">if</span> (result.succeeded()) println(<span class="hljs-string">"âœ… Server running on http://localhost:8080"</span>)
        }
}
</code></pre>
<p>è¿è¡Œåè®¿é—® <code>http://localhost:8080/hello</code>ï¼Œå³å¯çœ‹åˆ°å“åº”ã€‚<br/>
ä½ å·²ç”¨çº¯ Vert.x Core å®ç°äº†æœ€åŸºç¡€çš„ Web è¯·æ±‚å¤„ç†æµç¨‹ã€‚</p>
<hr/>
<h2 data-id="heading-6">ç¬¬äºŒæ­¥ï¼šåŠ¨æ€è·¯ç”± â€”â€” ç”¨æ­£åˆ™åŒ¹é…è·¯å¾„å‚æ•°</h2>
<p>ç›®æ ‡ï¼š</p>
<ul>
<li>æ”¯æŒ <code>/users/:id</code> è¿™æ ·çš„è·¯å¾„æ¨¡æ¿ï¼›</li>
<li>è‡ªåŠ¨æå– <code>:id</code> å¯¹åº”çš„å€¼ï¼›</li>
<li>æ— éœ€ç¬¬ä¸‰æ–¹è·¯ç”±åº“ï¼Œå®Œå…¨æ‰‹åŠ¨å®ç°ã€‚</li>
</ul>
<h3 data-id="heading-7">è·¯ç”±æ¡ç›®ï¼šæ¨¡æ¿ â†’ æ­£åˆ™ â†’ å‚æ•°å</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// RouteEntry.kt</span>
<span class="hljs-keyword">import</span> java.util.regex.Pattern

<span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RouteEntry</span>(
    <span class="hljs-keyword">val</span> template: String,
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> pattern: Pattern,
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> paramNames: List&lt;String&gt;,
    <span class="hljs-keyword">val</span> handler: (Request, Response) -&gt; <span class="hljs-built_in">Unit</span>
) {
    <span class="hljs-keyword">companion</span> <span class="hljs-keyword">object</span> {
        <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">compile</span><span class="hljs-params">(template: <span class="hljs-type">String</span>, handler: (<span class="hljs-type">Request</span>, <span class="hljs-type">Response</span>) -&gt; <span class="hljs-type">Unit</span>)</span></span>: RouteEntry {
            <span class="hljs-keyword">val</span> segments = template.trim(<span class="hljs-string">'/'</span>).split(<span class="hljs-string">'/'</span>)
            <span class="hljs-keyword">val</span> regexParts = mutableListOf&lt;String&gt;()
            <span class="hljs-keyword">val</span> names = mutableListOf&lt;String&gt;()

            <span class="hljs-keyword">for</span> (segment <span class="hljs-keyword">in</span> segments) {
                <span class="hljs-keyword">if</span> (segment.startsWith(<span class="hljs-string">":"</span>)) {
                    names += segment.substring(<span class="hljs-number">1</span>)
                    regexParts += <span class="hljs-string">"([^/]+)"</span>  <span class="hljs-comment">// åŒ¹é…ä»»æ„éæ–œæ å­—ç¬¦</span>
                } <span class="hljs-keyword">else</span> {
                    regexParts += Pattern.quote(segment)  <span class="hljs-comment">// è½¬ä¹‰é™æ€æ®µ</span>
                }
            }

            <span class="hljs-keyword">val</span> regex = <span class="hljs-string">"^/<span class="hljs-subst">${regexParts.joinToString(<span class="hljs-string">"/"</span>)}</span>$"</span>
            <span class="hljs-keyword">return</span> RouteEntry(template, Pattern.compile(regex), names, handler)
        }
    }

    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">match</span><span class="hljs-params">(path: <span class="hljs-type">String</span>)</span></span>: Map&lt;String, String&gt;? {
        <span class="hljs-keyword">val</span> matcher = pattern.matcher(path)
        <span class="hljs-keyword">if</span> (!matcher.matches()) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>

        <span class="hljs-keyword">return</span> paramNames.withIndex().associate { (i, name) -&gt;
            name to (matcher.group(i + <span class="hljs-number">1</span>) ?: <span class="hljs-string">""</span>)
        }
    }
}
</code></pre>
<h3 data-id="heading-8">æ›´æ–° Request ä¸ Router</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// Request.ktï¼ˆæ›´æ–°ï¼‰</span>
<span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Request</span>(
    <span class="hljs-keyword">val</span> method: String,
    <span class="hljs-keyword">val</span> uri: String,
    <span class="hljs-keyword">val</span> path: String,
    <span class="hljs-keyword">val</span> headers: Map&lt;String, String&gt;,
    <span class="hljs-keyword">val</span> query: Map&lt;String, String&gt;,
    <span class="hljs-keyword">val</span> params: Map&lt;String, String&gt; = emptyMap()  <span class="hljs-comment">// æ–°å¢è·¯å¾„å‚æ•°</span>
)

<span class="hljs-comment">// Router.ktï¼ˆæ›´æ–°ï¼‰</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Router</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> routes = mutableListOf&lt;RouteEntry&gt;()

    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">get</span><span class="hljs-params">(template: <span class="hljs-type">String</span>, handler: (<span class="hljs-type">Request</span>, <span class="hljs-type">Response</span>) -&gt; <span class="hljs-type">Unit</span>)</span></span> {
        routes += RouteEntry.compile(template, handler)
    }

    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">handle</span><span class="hljs-params">(req: <span class="hljs-type">HttpServerRequest</span>, res: <span class="hljs-type">HttpServerResponse</span>)</span></span> {
        <span class="hljs-keyword">val</span> rawUri = req.uri()
        <span class="hljs-keyword">val</span> path = HttpUtils.parsePath(rawUri)

        <span class="hljs-keyword">for</span> (entry <span class="hljs-keyword">in</span> routes) {
            <span class="hljs-keyword">val</span> params = entry.match(path)
            <span class="hljs-keyword">if</span> (params != <span class="hljs-literal">null</span>) {
                <span class="hljs-keyword">val</span> request = Request(
                    method = req.method().name(),
                    uri = rawUri,
                    path = path,
                    headers = req.headers().entries().associate { it.key to it.value },
                    query = HttpUtils.parseQuery(rawUri),
                    params = params
                )
                entry.handler(request, Response(res))
                <span class="hljs-keyword">return</span>
            }
        }

        res.setStatusCode(<span class="hljs-number">404</span>).end(<span class="hljs-string">"Not Found"</span>)
    }
}
</code></pre>
<h3 data-id="heading-9">æ³¨å†ŒåŠ¨æ€è·¯ç”±</h3>
<pre><code class="hljs language-kotlin" lang="kotlin">router.<span class="hljs-keyword">get</span>(<span class="hljs-string">"/users/:id"</span>) { req, res -&gt;
    res.json(<span class="hljs-string">"""{"id": "<span class="hljs-subst">${req.params[<span class="hljs-string">"id"</span>]}</span>", "name": "User"}"""</span>)
}
</code></pre>
<p>éªŒè¯ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">curl http://localhost:8080/users/42
<span class="hljs-comment"># â†’ {"id": "42", "name": "User"}</span>
</code></pre>
<p>ä½ ç°åœ¨çš„è·¯ç”±ç³»ç»Ÿå·²æ”¯æŒ RESTful é£æ ¼ï¼Œä¸”å®Œå…¨ç”±æ­£åˆ™é©±åŠ¨ï¼Œé€»è¾‘é€æ˜ã€‚</p>
<hr/>
<h2 data-id="heading-10">ç¬¬ä¸‰æ­¥ï¼šä¸­é—´ä»¶ç³»ç»Ÿ â€”â€” å¯ç»„åˆçš„é€šç”¨é€»è¾‘å±‚</h2>
<p>ç›®æ ‡ï¼š</p>
<ul>
<li>åœ¨è¯·æ±‚åˆ°è¾¾ä¸šåŠ¡é€»è¾‘å‰/åæ’å…¥é€šç”¨å¤„ç†ï¼›</li>
<li>æ”¯æŒæ—¥å¿—ã€CORSã€è®¤è¯ç­‰ï¼›</li>
<li>ä¸­é—´ä»¶å¯æŒ‰éœ€ç»„åˆï¼Œé¡ºåºå¯æ§ã€‚</li>
</ul>
<h3 data-id="heading-11">ä¸­é—´ä»¶å®šä¹‰</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// Middleware.kt</span>
<span class="hljs-keyword">typealias</span> Middleware = (Request, Response, () -&gt; <span class="hljs-built_in">Unit</span>) -&gt; <span class="hljs-built_in">Unit</span>
</code></pre>
<p>ä¸­é—´ä»¶æ¥æ”¶è¯·æ±‚ã€å“åº”å’Œâ€œç»§ç»­æ‰§è¡Œâ€çš„å›è°ƒã€‚è°ƒç”¨ <code>next()</code> è¡¨ç¤ºæ”¾è¡Œï¼Œå¦åˆ™å¯æå‰ç»ˆæ­¢æµç¨‹ï¼ˆå¦‚è¿”å› 401ï¼‰ã€‚</p>
<h3 data-id="heading-12">å†…ç½®ä¸­é—´ä»¶</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// Middlewares.kt</span>
<span class="hljs-keyword">object</span> Middlewares {
    <span class="hljs-keyword">val</span> logger: Middleware = { req, _, next -&gt;
        <span class="hljs-keyword">val</span> start = System.currentTimeMillis()
        println(<span class="hljs-string">"[<span class="hljs-subst">${req.method}</span>] <span class="hljs-subst">${req.path}</span>"</span>)
        next()
        println(<span class="hljs-string">"  â†’ <span class="hljs-subst">${System.currentTimeMillis() - start}</span>ms"</span>)
    }

    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">bearerAuth</span><span class="hljs-params">(expectedToken: <span class="hljs-type">String</span>)</span></span>: Middleware = { req, res, next -&gt;
        <span class="hljs-keyword">val</span> auth = req.headers[<span class="hljs-string">"authorization"</span>]
        <span class="hljs-keyword">if</span> (auth?.startsWith(<span class="hljs-string">"Bearer "</span>) == <span class="hljs-literal">true</span> &amp;&amp; auth.substring(<span class="hljs-number">7</span>) == expectedToken) {
            next()
        } <span class="hljs-keyword">else</span> {
            res.text(<span class="hljs-string">"Unauthorized"</span>, <span class="hljs-number">401</span>)
        }
    }
}
</code></pre>
<h3 data-id="heading-13">è·¯ç”±å™¨é›†æˆä¸­é—´ä»¶</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// Router.ktï¼ˆæœ€ç»ˆç‰ˆï¼‰</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Router</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> middlewares = mutableListOf&lt;Middleware&gt;()
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> routes = mutableListOf&lt;RouteEntry&gt;()

    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">use</span><span class="hljs-params">(middleware: <span class="hljs-type">Middleware</span>)</span></span> {
        middlewares.add(middleware)
    }

    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">get</span><span class="hljs-params">(template: <span class="hljs-type">String</span>, handler: (<span class="hljs-type">Request</span>, <span class="hljs-type">Response</span>) -&gt; <span class="hljs-type">Unit</span>)</span></span> {
        routes += RouteEntry.compile(template, handler)
    }

    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">handle</span><span class="hljs-params">(req: <span class="hljs-type">HttpServerRequest</span>, res: <span class="hljs-type">HttpServerResponse</span>)</span></span> {
        <span class="hljs-keyword">val</span> rawUri = req.uri()
        <span class="hljs-keyword">val</span> path = HttpUtils.parsePath(rawUri)

        <span class="hljs-keyword">val</span> matched = routes.firstOrNull { it.match(path) != <span class="hljs-literal">null</span> }
        <span class="hljs-keyword">if</span> (matched == <span class="hljs-literal">null</span>) {
            res.setStatusCode(<span class="hljs-number">404</span>).end(<span class="hljs-string">"Not Found"</span>)
            <span class="hljs-keyword">return</span>
        }

        <span class="hljs-keyword">val</span> params = matched.match(path)!!
        <span class="hljs-keyword">val</span> request = Request(
            method = req.method().name(),
            uri = rawUri,
            path = path,
            headers = req.headers().entries().associate { it.key to it.value },
            query = HttpUtils.parseQuery(rawUri),
            params = params
        )
        <span class="hljs-keyword">val</span> response = Response(res)

        <span class="hljs-comment">// æ„å»ºä¸­é—´ä»¶è°ƒç”¨é“¾ï¼ˆæ´‹è‘±æ¨¡å‹ï¼‰</span>
        <span class="hljs-keyword">var</span> next: () -&gt; <span class="hljs-built_in">Unit</span> = { matched.handler(request, response) }
        <span class="hljs-keyword">for</span> (i <span class="hljs-keyword">in</span> middlewares.lastIndex downTo <span class="hljs-number">0</span>) {
            <span class="hljs-keyword">val</span> currentNext = next
            next = { middlewares[i](request, response, currentNext) }
        }
        next()
    }
}
</code></pre>
<h3 data-id="heading-14">ä½¿ç”¨ä¸­é—´ä»¶</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">val</span> router = Router()
router.use(Middlewares.logger)
router.use(Middlewares.bearerAuth(<span class="hljs-string">"my-token"</span>))

router.<span class="hljs-keyword">get</span>(<span class="hljs-string">"/profile"</span>) { _, res -&gt; res.text(<span class="hljs-string">"Hello, authenticated user!"</span>) }
</code></pre>
<p>éªŒè¯ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ—  token â†’ 401</span>
curl http://localhost:8080/profile

<span class="hljs-comment"># æœ‰ token â†’ 200 + æ—¥å¿—</span>
curl -H <span class="hljs-string">"Authorization: Bearer my-token"</span> http://localhost:8080/profile
</code></pre>
<p>æ§åˆ¶å°è¾“å‡ºï¼š</p>
<pre><code class="hljs language-bash" lang="bash">[GET] /profile
  â†’ 2ms
</code></pre>
<p>ä¸­é—´ä»¶æœºåˆ¶è®©ä½ èƒ½<strong>æ¨ªå‘åˆ‡åˆ†å…³æ³¨ç‚¹</strong>ï¼Œä¸šåŠ¡é€»è¾‘ä¸å†æ··æ‚æ—¥å¿—æˆ–å®‰å…¨ä»£ç ã€‚</p>
<hr/>
<h2 data-id="heading-15">æœªæ¥æ‹“å±•æ–¹å‘</h2>
<p>å½“å‰æ¡†æ¶å·²å…·å¤‡ç”Ÿäº§çº§å†…æ ¸çš„é›å½¢ã€‚æ¥ä¸‹æ¥å¯è€ƒè™‘ï¼š</p>
<ol>
<li>
<p><strong>è¯·æ±‚ä½“è§£æ</strong><br/>
é€šè¿‡ <code>req.handler { buffer -&gt; ... }</code> è¯»å– Bodyï¼Œæ”¯æŒ JSON è§£ç ã€‚</p>
</li>
<li>
<p><strong>å¤šæ–¹æ³•æ”¯æŒ</strong><br/>
æ‰©å±• <code>post()</code>, <code>put()</code>ï¼Œåœ¨ <code>RouteEntry</code> ä¸­è®°å½• HTTP æ–¹æ³•ã€‚</p>
</li>
<li>
<p><strong>ç±»å‹å®‰å…¨å‚æ•°</strong><br/>
æ”¯æŒ <code>:id(int)</code>ï¼Œè‡ªåŠ¨æ ¡éªŒå¹¶è½¬æ¢ä¸º <code>Int</code>ã€‚</p>
</li>
<li>
<p><strong>å…¨å±€å¼‚å¸¸å¤„ç†</strong><br/>
æ•è·å¤„ç†å™¨ä¸­çš„æœªå¤„ç†å¼‚å¸¸ï¼Œè¿”å› 500ï¼Œé˜²æ­¢æœåŠ¡å™¨å´©æºƒã€‚</p>
</li>
<li>
<p><strong>Kotlin åç¨‹é›†æˆ</strong><br/>
æä¾› <code>suspend</code> ç‰ˆæœ¬çš„å¤„ç†å™¨ï¼Œç”¨ <code>awaitResult</code> åŒ…è£…å¼‚æ­¥æ“ä½œã€‚</p>
</li>
<li>
<p><strong>é™æ€æ–‡ä»¶æœåŠ¡</strong><br/>
å¯¹ <code>/static/**</code> è·¯å¾„è¿”å›æ–‡ä»¶å†…å®¹ã€‚</p>
</li>
<li>
<p><strong>æµ‹è¯•æ”¯æŒ</strong><br/>
åˆ©ç”¨ <code>Vertx</code> çš„åµŒå…¥å¼èƒ½åŠ›ç¼–å†™é›†æˆæµ‹è¯•ã€‚</p>
</li>
</ol>
<hr/>
<h2 data-id="heading-16">ç»“è¯­ï¼šç†è§£æ¯”ä½¿ç”¨æ›´é‡è¦</h2>
<p>ä½ å·²ç”¨ <strong>çº¯ Vert.x Core</strong> å®ç°äº† Web æ¡†æ¶çš„å››å¤§æ ¸å¿ƒç»„ä»¶ï¼š</p>






























<table><thead><tr><th>ç»„ä»¶</th><th>ä½œç”¨</th><th>Spring å¯¹åº”</th></tr></thead><tbody><tr><td><code>Request</code></td><td>å°è£…å®¢æˆ·ç«¯è¯·æ±‚æ•°æ®</td><td><code>HttpServletRequest</code></td></tr><tr><td><code>Response</code></td><td>æ„é€ å¹¶å‘é€ HTTP å“åº”</td><td><code>HttpServletResponse</code></td></tr><tr><td><code>Router</code></td><td>è·¯å¾„åŒ¹é… â†’ å¤„ç†å‡½æ•°</td><td><code>HandlerMapping</code></td></tr><tr><td><code>Middleware</code></td><td>æ’å…¥é€šç”¨é€»è¾‘ï¼ˆæ—¥å¿—ã€è®¤è¯ç­‰ï¼‰</td><td><code>Filter</code></td></tr></tbody></table>
<p>æ²¡æœ‰é­”æ³•ï¼Œæ²¡æœ‰æ³¨è§£ï¼Œæ²¡æœ‰é»‘ç›’ã€‚æ¯ä¸€è¡Œä»£ç éƒ½æœ‰æ˜ç¡®èŒè´£ï¼Œæ¯ä¸€å±‚æŠ½è±¡éƒ½æ¸…æ™°å¯è§ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[MySQLé”æœºåˆ¶è¯¦è§£ï¼Œçœ‹è¿™ä¸€ç¯‡å°±å¤Ÿäº†]]></title>    <link>https://juejin.cn/post/7582785032852521023</link>    <guid>https://juejin.cn/post/7582785032852521023</guid>    <pubDate>2025-12-13T01:36:04.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582785032852521023" data-draft-id="7576479344038854708" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="MySQLé”æœºåˆ¶è¯¦è§£ï¼Œçœ‹è¿™ä¸€ç¯‡å°±å¤Ÿäº†"/> <meta itemprop="keywords" content="åç«¯,MySQL"/> <meta itemprop="datePublished" content="2025-12-13T01:36:04.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åˆ˜å¤§å"/> <meta itemprop="url" content="https://juejin.cn/user/3507878440995946"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            MySQLé”æœºåˆ¶è¯¦è§£ï¼Œçœ‹è¿™ä¸€ç¯‡å°±å¤Ÿäº†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3507878440995946/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åˆ˜å¤§å
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-13T01:36:04.000Z" title="Sat Dec 13 2025 01:36:04 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨æ•°æ®åº“çš„ä¸–ç•Œé‡Œï¼Œå½“å¤šä¸ªç”¨æˆ·åŒæ—¶è®¿é—®æ•°æ®åº“çš„æ—¶å€™ï¼Œå¦‚æœæ²¡æœ‰åˆç†çš„æ§åˆ¶æœºåˆ¶ï¼Œå¾ˆå®¹æ˜“ä¼šå‡ºç°æ•°æ®æ··ä¹±çš„é—®é¢˜ã€‚</p>
<p>æ¯”å¦‚ä¸¤ä¸ªäººåŒæ—¶ä¿®æ”¹åŒä¸€æ¡æ•°æ®ï¼Œæœ€åç»“æœå¯èƒ½å°±ä¸å¯¹äº†ã€‚<strong>MySQL ä¸­çš„é”ï¼Œå°±æ˜¯ä¸ºäº†è§£å†³è¿™ç±»å¹¶å‘è®¿é—®é—®é¢˜è€Œè®¾è®¡çš„ã€‚</strong></p>
<h2 data-id="heading-0">ä»€ä¹ˆæ˜¯é”ï¼Ÿ</h2>
<p>å‡è®¾æœ‰ä¸€ä¸ªå…¬å…±å«ç”Ÿé—´ï¼Œåªæœ‰ä¸€ä¸ªå‘ä½ï¼ˆè¿™å°±å¥½æ¯”ä¸€æ¡æ•°æ®ï¼‰ã€‚</p>
<p><strong>åœºæ™¯1ï¼ˆæ— é”ï¼‰</strong>ï¼šAå…ˆç”Ÿè¿›å»åä¸é”é—¨ã€‚è¿™æ—¶Bå…ˆç”Ÿæ¨é—¨è€Œå…¥â€¦â€¦åœºé¢ä¸€åº¦ååˆ†å°´å°¬ã€‚è¿™å°±æ˜¯è„è¯»æˆ–æ•°æ®æŸåã€‚</p>
<p><strong>åœºæ™¯2ï¼ˆæœ‰é”ï¼‰</strong>ï¼šAå…ˆç”Ÿè¿›å»ååé”äº†é—¨ï¼ˆè¿™å°±æ˜¯åŠ é”ï¼‰ã€‚Bå…ˆç”Ÿæ¥äº†å‘ç°é—¨æ‰“ä¸å¼€ï¼Œåªå¥½åœ¨é—¨å£ç­‰å¾…ï¼ˆè¿™å°±æ˜¯é˜»å¡ï¼‰ã€‚Aå…ˆç”Ÿç”¨å®Œå‡ºæ¥ï¼ŒBå…ˆç”Ÿæ‰èƒ½è¿›å»ã€‚</p>
<p>æ‰€ä»¥ï¼Œé”æ˜¯æ•°æ®åº“ä¸ºäº†ä¿è¯æ•°æ®åœ¨å¹¶å‘è®¿é—®æ—¶çš„ä¸€è‡´æ€§ã€å®Œæ•´æ€§è€Œè®¾è®¡çš„ä¸€ç§æœºåˆ¶ã€‚</p>
<hr/>
<h2 data-id="heading-1">MySQL é”çš„ä¸¤å¤§åˆ†ç±»ç»´åº¦</h2>
<p>MySQL çš„é”å¯ä»¥ä»ä¸¤ä¸ªè§’åº¦çœ‹ï¼š</p>
<h3 data-id="heading-2">1. æŒ‰ç²’åº¦ï¼ˆé”çš„èŒƒå›´ï¼‰åˆ†ï¼š</h3>
<ul>
<li>è¡¨é”ï¼ˆé”æ•´å¼ è¡¨ï¼‰</li>
<li>è¡Œé”ï¼ˆåªé”ä¸€è¡Œï¼‰</li>
<li>é¡µé”ï¼ˆä»‹äºä¸¤è€…ä¹‹é—´ï¼ŒInnoDB ä¸ç”¨ï¼‰</li>
</ul>
<h3 data-id="heading-3">2. æŒ‰æ¨¡å¼ï¼ˆé”çš„è¡Œä¸ºï¼‰åˆ†ï¼š</h3>
<ul>
<li>å…±äº«é”ï¼ˆSï¼‰ï¼šå…è®¸å¤šäººè¯»</li>
<li>æ’ä»–é”ï¼ˆXï¼‰ï¼šåªå…è®¸ä¸€äººæ“ä½œ</li>
<li>æ„å‘é”ï¼ˆIS/IXï¼‰ï¼šæå‰â€œæ‰“æ‹›å‘¼â€</li>
</ul>
<p>ä¸‹é¢æˆ‘ä»¬å°±ä»è¿™ä¸¤ä¸ªç»´åº¦å‡ºå‘ï¼Œä¸€ä¸€æ‹†è§£ã€‚</p>
<h2 data-id="heading-4">MySQL å¸¸è§é”ç±»å‹è¯¦è§£</h2>
<h3 data-id="heading-5">1. è¡Œé”ï¼ˆRow Lockï¼‰</h3>
<h4 data-id="heading-6">æ˜¯ä»€ä¹ˆï¼Ÿ</h4>
<p>åªé”å®šä½ æ“ä½œçš„é‚£<strong>ä¸€è¡Œæ•°æ®</strong>ï¼Œåˆ«äººè¿˜èƒ½æ“ä½œå…¶ä»–è¡Œã€‚</p>
<h4 data-id="heading-7">ä½¿ç”¨æ–¹å¼ï¼ˆè‡ªåŠ¨ or æ‰‹åŠ¨ï¼‰ï¼š</h4>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- è‡ªåŠ¨åŠ æ’ä»–é”ï¼ˆXï¼‰</span>
<span class="hljs-keyword">UPDATE</span> users <span class="hljs-keyword">SET</span> balance <span class="hljs-operator">=</span> balance <span class="hljs-operator">-</span> <span class="hljs-number">100</span> <span class="hljs-keyword">WHERE</span> id <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;

<span class="hljs-comment">-- æ‰‹åŠ¨åŠ æ’ä»–é”ï¼ˆæŸ¥è¯¢æ—¶å°±é”å®šï¼‰</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> users <span class="hljs-keyword">WHERE</span> id <span class="hljs-operator">=</span> <span class="hljs-number">1</span> <span class="hljs-keyword">FOR</span> <span class="hljs-keyword">UPDATE</span>;

<span class="hljs-comment">-- æ‰‹åŠ¨åŠ å…±äº«é”ï¼ˆSï¼‰</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> users <span class="hljs-keyword">WHERE</span> id <span class="hljs-operator">=</span> <span class="hljs-number">1</span> <span class="hljs-keyword">FOR</span> SHARE;
</code></pre>
<h4 data-id="heading-8">ä½¿ç”¨åœºæ™¯ï¼š</h4>
<ul>
<li>ç§’æ€æ‰£åº“å­˜</li>
<li>è½¬è´¦ï¼ˆA å‡é’±ã€B åŠ é’±ï¼‰</li>
<li>é˜²æ­¢é‡å¤æäº¤è®¢å•</li>
</ul>
<p>æ³¨æ„ï¼š<strong>è¡Œé”ä¾èµ–ç´¢å¼•</strong>ï¼å¦‚æœ <code>WHERE</code> æ¡ä»¶æ²¡èµ°ç´¢å¼•ï¼ŒInnoDB ä¼šé€€åŒ–æˆé”æ•´å¼ è¡¨ï¼</p>
<hr/>
<h3 data-id="heading-9">2. è¡¨é”ï¼ˆTable Lockï¼‰</h3>
<h4 data-id="heading-10">æ˜¯ä»€ä¹ˆï¼Ÿ</h4>
<p>é”ä½æ•´å¼ è¡¨ï¼Œåˆ«äººæ—¢ä¸èƒ½è¯»ä¹Ÿä¸èƒ½å†™ï¼ˆå†™é”ï¼‰ï¼Œæˆ–åªèƒ½è¯»ä¸èƒ½å†™ï¼ˆè¯»é”ï¼‰ã€‚</p>
<h4 data-id="heading-11">ä½¿ç”¨æ–¹å¼ï¼ˆæ‰‹åŠ¨ï¼‰ï¼š</h4>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- åŠ è¯»é”</span>
LOCK TABLES users READ;
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> users;
<span class="hljs-comment">-- è§£é”</span>
UNLOCK TABLES;

<span class="hljs-comment">-- åŠ å†™é”</span>
LOCK TABLES users WRITE;
<span class="hljs-keyword">UPDATE</span> users <span class="hljs-keyword">SET</span> name <span class="hljs-operator">=</span> <span class="hljs-string">'å¼ ä¸‰'</span> <span class="hljs-keyword">WHERE</span> id <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;
<span class="hljs-comment">-- è§£é”</span>
UNLOCK TABLES;
</code></pre>
<h4 data-id="heading-12">ä½¿ç”¨åœºæ™¯ï¼š</h4>
<ul>
<li>MyISAM å¼•æ“ï¼ˆè€é¡¹ç›®ï¼‰</li>
<li>æ‰¹é‡å¯¼å…¥æ•°æ®æ—¶ä¸´æ—¶é”è¡¨</li>
<li>æå°‘åœ¨ InnoDB ä¸­æ‰‹åŠ¨ä½¿ç”¨ï¼ˆä¼šä¸¥é‡é™ä½å¹¶å‘ï¼‰</li>
</ul>
<hr/>
<h3 data-id="heading-13">3. å…±äº«é”ï¼ˆS é”ï¼‰å’Œæ’ä»–é”ï¼ˆX é”ï¼‰</h3>
<p>è¿™æ˜¯ä¸¤ç§æœ€åŸºæœ¬çš„<strong>é”æ¨¡å¼</strong>ï¼š</p>


























<table><thead><tr><th>ç±»å‹</th><th>åˆ«å</th><th>èƒ½å¦å¤šäººåŒæ—¶æŒæœ‰ï¼Ÿ</th><th>åˆ«äººèƒ½å¦è¯»ï¼Ÿ</th><th>åˆ«äººèƒ½å¦å†™ï¼Ÿ</th></tr></thead><tbody><tr><td><strong>Sé”</strong></td><td>è¯»é”</td><td>å¯ä»¥</td><td>å¯ä»¥</td><td>ä¸è¡Œ</td></tr><tr><td><strong>Xé”</strong></td><td>å†™é”</td><td>ä¸è¡Œ</td><td>ä¸è¡Œ</td><td>ä¸è¡Œ</td></tr></tbody></table>
<h4 data-id="heading-14">ä¸¾ä¸ªä¾‹å­ï¼š</h4>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- äº‹åŠ¡ A</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> products <span class="hljs-keyword">WHERE</span> id <span class="hljs-operator">=</span> <span class="hljs-number">100</span> <span class="hljs-keyword">FOR</span> SHARE;  <span class="hljs-comment">-- åŠ  S é”</span>

<span class="hljs-comment">-- äº‹åŠ¡ Bï¼ˆå¯ä»¥æ‰§è¡Œï¼‰</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> products <span class="hljs-keyword">WHERE</span> id <span class="hljs-operator">=</span> <span class="hljs-number">100</span> <span class="hljs-keyword">FOR</span> SHARE;  <span class="hljs-comment">-- ä¹ŸåŠ  S é”ï¼Œæ²¡é—®é¢˜</span>

<span class="hljs-comment">-- äº‹åŠ¡ Cï¼ˆä¼šè¢«é˜»å¡ï¼ï¼‰</span>
<span class="hljs-keyword">UPDATE</span> products <span class="hljs-keyword">SET</span> stock <span class="hljs-operator">=</span> stock <span class="hljs-operator">-</span> <span class="hljs-number">1</span> <span class="hljs-keyword">WHERE</span> id <span class="hljs-operator">=</span> <span class="hljs-number">100</span>;  <span class="hljs-comment">-- éœ€è¦ X é”ï¼Œç­‰å¾… A æäº¤</span>
</code></pre>
<hr/>
<h3 data-id="heading-15">4. æ„å‘é”ï¼ˆIS / IXï¼‰</h3>
<h4 data-id="heading-16">æ˜¯ä»€ä¹ˆï¼Ÿ</h4>
<p>æ„å‘é”æ˜¯è¡¨çº§åˆ«çš„é”ï¼Œç”¨æ¥æå‰é€šçŸ¥ï¼šæˆ‘æ‰“ç®—å¯¹è¿™å¼ è¡¨é‡Œçš„æŸäº›è¡ŒåŠ é”ï¼</p>
<ul>
<li><strong>ISï¼ˆIntention Sharedï¼‰</strong>ï¼šæˆ‘å‡†å¤‡ç»™æŸäº›è¡ŒåŠ  S é”ã€‚</li>
<li><strong>IXï¼ˆIntention Exclusiveï¼‰</strong>ï¼šæˆ‘å‡†å¤‡ç»™æŸäº›è¡ŒåŠ  X é”ã€‚</li>
</ul>
<h4 data-id="heading-17">ç‰¹ç‚¹ï¼š</h4>
<ul>
<li>å®Œå…¨è‡ªåŠ¨åŠ é”ï¼Œä½ æ— æ³•æ‰‹åŠ¨æ§åˆ¶ã€‚</li>
<li>ç›®çš„æ˜¯è®©æ•°æ®åº“å¿«é€Ÿåˆ¤æ–­ï¼šâ€œè¿™å¼ è¡¨æœ‰æ²¡æœ‰äººåœ¨æ“ä½œè¡Œï¼Ÿâ€ è€Œä¸ç”¨é€è¡Œæ£€æŸ¥ã€‚</li>
</ul>
<h4 data-id="heading-18">ä¸¾ä¾‹ï¼š</h4>
<p>å½“ä½ æ‰§è¡Œï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> users <span class="hljs-keyword">WHERE</span> id <span class="hljs-operator">=</span> <span class="hljs-number">1</span> <span class="hljs-keyword">FOR</span> <span class="hljs-keyword">UPDATE</span>;
</code></pre>
<p>InnoDB ä¼šè‡ªåŠ¨ï¼š</p>
<ol>
<li>åœ¨è¡¨ <code>users</code> ä¸ŠåŠ  <strong>IX é”</strong></li>
<li>åœ¨ <code>id=1</code> è¿™ä¸€è¡Œä¸ŠåŠ  <strong>X é”</strong></li>
</ol>
<p>æ­¤æ—¶ï¼Œå¦‚æœæœ‰äººæƒ³æ‰§è¡Œï¼š</p>
<pre><code class="hljs language-sql" lang="sql">LOCK TABLES users WRITE;  <span class="hljs-comment">-- éœ€è¦è¡¨çº§ X é”</span>
</code></pre>
<p>æ•°æ®åº“ä¸€çœ‹ï¼šâ€œè¡¨ä¸Šæœ‰ IX é”ï¼è¯´æ˜æœ‰äººåœ¨æ”¹è¡Œâ€ï¼Œäºæ˜¯ç›´æ¥è®©å®ƒç­‰å¾…ã€‚</p>
<p>æ„å‘é”å°±åƒè¿›æ•™å®¤å‰å–Šä¸€å£°ï¼šâ€œæˆ‘è¦è¿›å»å åº§ä½å•¦ï¼â€ â€”â€” è®©ç®¡ç†å‘˜ä¸ç”¨ä¸€ä¸ªä¸ªå¼€é—¨æŸ¥ã€‚</p>
<hr/>
<h3 data-id="heading-19">5. é—´éš™é”ï¼ˆGap Lockï¼‰</h3>
<h4 data-id="heading-20">æ˜¯ä»€ä¹ˆï¼Ÿ</h4>
<p>ä¸é”å…·ä½“æ•°æ®ï¼Œè€Œæ˜¯é”ä½ç´¢å¼•ä¹‹é—´çš„ç©ºéš™ï¼Œé˜²æ­¢åˆ«äººå¾€ä¸­é—´æ’å…¥æ–°æ•°æ®ã€‚</p>
<h4 data-id="heading-21">ä»€ä¹ˆæ—¶å€™å‡ºç°ï¼Ÿ</h4>
<p>åœ¨<strong>REPEATABLE READï¼ˆå¯é‡å¤è¯»ï¼‰</strong> éš”ç¦»çº§åˆ«ä¸‹ï¼Œæ‰§è¡Œ<strong>èŒƒå›´æŸ¥è¯¢ + åŠ é”</strong>æ—¶è‡ªåŠ¨è§¦å‘ã€‚</p>
<h4 data-id="heading-22">ä¾‹å­ï¼š</h4>
<p>å‡è®¾ <code>users</code> è¡¨ä¸»é”®æœ‰ï¼š10, 30<br/>
æ‰§è¡Œï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> users <span class="hljs-keyword">WHERE</span> id <span class="hljs-operator">&gt;</span> <span class="hljs-number">15</span> <span class="hljs-keyword">AND</span> id <span class="hljs-operator">&lt;</span> <span class="hljs-number">25</span> <span class="hljs-keyword">FOR</span> <span class="hljs-keyword">UPDATE</span>;
</code></pre>
<p>è™½ç„¶æ²¡æŸ¥åˆ°æ•°æ®ï¼Œä½† InnoDB ä¼š<strong>é”ä½ (10, 30) è¿™ä¸ªé—´éš™</strong>ï¼Œé˜²æ­¢åˆ«äººæ’å…¥ <code>id=20</code>ã€‚</p>
<p><strong>ä¸ºä»€ä¹ˆéœ€è¦ï¼Ÿ</strong>
å¦‚æœä¸é”é—´éš™ï¼Œå¦ä¸€ä¸ªäº‹åŠ¡æ’å…¥ <code>id=20</code>ï¼Œä½ å†æ¬¡æŸ¥è¯¢å°±ä¼šå¤šå‡ºä¸€æ¡è®°å½•â€”â€”è¿™å°±æ˜¯å¹»è¯»ã€‚</p>
<h4 data-id="heading-23">å¦‚ä½•å…³é—­ï¼Ÿ</h4>
<ul>
<li>æ”¹éš”ç¦»çº§åˆ«ä¸º<code>READ COMMITTED</code></li>
<li>æˆ–ç¡®ä¿æŸ¥è¯¢æ¡ä»¶æ˜¯<strong>å”¯ä¸€ç´¢å¼•çš„ç­‰å€¼æŸ¥è¯¢</strong>ï¼ˆå¦‚ <code>WHERE id = 20</code> ä¸” id æ˜¯ä¸»é”®ï¼‰</li>
</ul>
<hr/>
<h3 data-id="heading-24">6. ä¸´é”®é”ï¼ˆNext-Key Lockï¼‰â€”â€” é»˜è®¤è¡Œä¸º</h3>
<h4 data-id="heading-25">æ˜¯ä»€ä¹ˆï¼Ÿ</h4>
<p><strong>è®°å½•é” + é—´éš™é”</strong> çš„ç»„åˆã€‚</p>
<p>InnoDB åœ¨ RR éš”ç¦»çº§åˆ«ä¸‹ï¼Œé»˜è®¤ä½¿ç”¨ Next-Key Lock æ¥å½»åº•è§£å†³å¹»è¯»é—®é¢˜ã€‚</p>
<h4 data-id="heading-26">ä¾‹å­ï¼š</h4>
<p>å¯¹ <code>id=20</code> åŠ é”ï¼Œå®é™…é”ä½çš„æ˜¯åŒºé—´ <code>(10, 20]</code>ï¼ˆå‡è®¾å‰ä¸€ä¸ªä¸»é”®æ˜¯ 10ï¼‰ã€‚</p>
<p>ä½ ä¸éœ€è¦å†™ç‰¹æ®Šè¯­æ³•ï¼Œè¿™æ˜¯ InnoDB çš„é»˜è®¤ä¿æŠ¤æœºåˆ¶ã€‚</p>
<hr/>
<h3 data-id="heading-27">7. å…ƒæ•°æ®é”ï¼ˆMDLï¼‰</h3>
<h4 data-id="heading-28">æ˜¯ä»€ä¹ˆï¼Ÿ</h4>
<p>ä¿æŠ¤è¡¨ç»“æ„ï¼ˆDDLï¼‰ä¸è¢«å¹¶å‘ä¿®æ”¹ã€‚</p>
<h4 data-id="heading-29">è‡ªåŠ¨åŠ é”è§„åˆ™ï¼š</h4>
<ul>
<li>æ‰§è¡Œ <code>SELECT</code> â†’ è‡ªåŠ¨åŠ  <strong>MDL è¯»é”</strong></li>
<li>æ‰§è¡Œ <code>ALTER TABLE</code> â†’ éœ€è¦ <strong>MDL å†™é”</strong></li>
</ul>
<h4 data-id="heading-30">å¸¸è§å‘ï¼š</h4>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- äº‹åŠ¡ Aï¼ˆæœªæäº¤ï¼‰</span>
<span class="hljs-keyword">START</span> TRANSACTION;
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> orders;  <span class="hljs-comment">-- åŠ  MDL è¯»é”</span>

<span class="hljs-comment">-- äº‹åŠ¡ B</span>
<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> orders <span class="hljs-keyword">ADD</span> <span class="hljs-keyword">COLUMN</span> status TINYINT;  <span class="hljs-comment">-- å¡ä½ï¼ç­‰ A æäº¤</span>
</code></pre>
<p>è§£å†³æ–¹æ¡ˆï¼šé¿å…é•¿äº‹åŠ¡ï¼ŒåŠæ—¶<code>COMMIT</code>ï¼</p>
<hr/>
<h3 data-id="heading-31">8. è‡ªå¢é”ï¼ˆAUTO-INC Lockï¼‰</h3>
<p>ç”¨äºæ§åˆ¶<code>AUTO_INCREMENT</code>å­—æ®µçš„å¹¶å‘æ’å…¥ï¼Œç¡®ä¿è‡ªå¢å€¼ä¸é‡å¤ã€‚</p>
<ul>
<li>æ’å…¥å•è¡Œï¼šè½»é‡é”ï¼Œä¸å½±å“å¹¶å‘</li>
<li>æ‰¹é‡æ’å…¥ï¼ˆå¦‚ <code>INSERT INTO ... SELECT</code>ï¼‰ï¼šå¯èƒ½çŸ­æš‚é”è¡¨</li>
</ul>
<p>ä¸€èˆ¬æ— éœ€å¹²é¢„ï¼Œç”±å‚æ•° <code>innodb_autoinc_lock_mode</code> æ§åˆ¶ï¼ˆé»˜è®¤å€¼ 1 å·²è¶³å¤Ÿï¼‰ã€‚</p>
<hr/>
<h2 data-id="heading-32">æ­»é”</h2>
<h3 data-id="heading-33">ä»€ä¹ˆæ˜¯æ­»é”ï¼Ÿ</h3>
<ul>
<li>äº‹åŠ¡ A é”äº†è¡Œ 1ï¼Œç­‰ç€è¡Œ 2ï¼›</li>
<li>äº‹åŠ¡ B é”äº†è¡Œ 2ï¼Œç­‰ç€è¡Œ 1ï¼›</li>
<li>ä¸¤äººäº’ç›¸ç­‰ï¼Œè°ä¹ŸåŠ¨ä¸äº†ã€‚</li>
</ul>
<h3 data-id="heading-34">MySQL æ€ä¹ˆå¤„ç†ï¼Ÿ</h3>
<p>InnoDB ä¼šè‡ªåŠ¨æ£€æµ‹æ­»é”ï¼Œå¹¶<strong>å›æ»šå…¶ä¸­ä¸€ä¸ªäº‹åŠ¡</strong>ï¼ˆæŠ¥é”™ï¼š<code>Deadlock found when trying to get lock</code>ï¼‰ã€‚</p>
<h3 data-id="heading-35">å¦‚ä½•é¿å…ï¼Ÿ</h3>
<ol>
<li><strong>æŒ‰å›ºå®šé¡ºåºè®¿é—®æ•°æ®</strong>ï¼ˆå¦‚æ€»æ˜¯å…ˆæ“ä½œ user_id å°çš„ï¼‰</li>
<li><strong>å‡å°‘äº‹åŠ¡æŒæœ‰é”çš„æ—¶é—´</strong>ï¼ˆå°½å¿« COMMITï¼‰</li>
<li><strong>é¿å…å¤§äº‹åŠ¡</strong></li>
<li>å¿…è¦æ—¶é™çº§éš”ç¦»çº§åˆ«ï¼ˆå¦‚ç”¨ <code>READ COMMITTED</code> å‡å°‘é—´éš™é”ï¼‰</li>
</ol>
<p>ä¸‹ä¸€ç¯‡æ–‡ç« æˆ‘ä»¬å†åšè¯¦ç»†ä»‹ç»ã€‚</p>
<hr/>
<h2 data-id="heading-36">å®ç”¨å‘½ä»¤ï¼šæŸ¥çœ‹å½“å‰é”</h2>
<p>MySQL 8.0+ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- æŸ¥çœ‹å½“å‰æ‰€æœ‰é”</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> performance_schema.data_locks;

<span class="hljs-comment">-- æŸ¥çœ‹è°åœ¨ç­‰é”</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> performance_schema.data_lock_waits;

<span class="hljs-comment">-- æŸ¥çœ‹æ´»è·ƒäº‹åŠ¡</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> information_schema.INNODB_TRX;
</code></pre>
<hr/>
<h2 data-id="heading-37">æ€»ç»“</h2>
<pre><code class="hljs language-markdown" lang="markdown">é”çš„åˆ†ç±»
â”œâ”€â”€ æŒ‰ç²’åº¦
â”‚   â”œâ”€â”€ è¡Œé”ï¼ˆInnoDB ä¸»åŠ›ï¼‰
â”‚   â”œâ”€â”€ è¡¨é”ï¼ˆMyISAM / æ‰‹åŠ¨ï¼‰
â”‚   â””â”€â”€ é¡µé”ï¼ˆå·²æ·˜æ±°ï¼‰
â”‚
â””â”€â”€ æŒ‰æ¨¡å¼
<span class="hljs-code">    â”œâ”€â”€ Sï¼ˆå…±äº«é”ï¼‰ â†’ FOR SHARE
    â”œâ”€â”€ Xï¼ˆæ’ä»–é”ï¼‰ â†’ FOR UPDATE / UPDATE
    â”œâ”€â”€ ISï¼ˆæ„å‘å…±äº«ï¼‰ â†’ è‡ªåŠ¨
    â””â”€â”€ IXï¼ˆæ„å‘æ’ä»–ï¼‰ â†’ è‡ªåŠ¨
</span>
ç‰¹æ®Šé”ç±»å‹ï¼š
<span class="hljs-bullet">-</span> é—´éš™é”ã€ä¸´é”®é” â†’ é˜²å¹»è¯»ï¼ˆRR çº§åˆ«è‡ªåŠ¨ï¼‰
<span class="hljs-bullet">-</span> MDL é” â†’ ä¿è¡¨ç»“æ„
<span class="hljs-bullet">-</span> è‡ªå¢é” â†’ ä¿ AUTO<span class="hljs-emphasis">_INCREMENT
</span></code></pre>
<p><strong>å»ºè®®</strong>ï¼š<br/>
æ—¥å¸¸å¼€å‘ç”¨ <strong>InnoDB å¼•æ“ + å¯é‡å¤è¯»éš”ç¦»çº§åˆ«</strong>ï¼Œå¤§å¤šæ•°é”é—®é¢˜éƒ½èƒ½è‡ªåŠ¨å¤„ç†ã€‚<br/>
åªè¦æ³¨æ„ï¼š<strong>åˆ«å†™å¤ªé•¿çš„äº‹åŠ¡ï¼Œç´¢å¼•è¦åˆç†</strong>ï¼Œå°±èƒ½é¿å¼€å¤§éƒ¨åˆ†é”å†²çªï¼</p>
<p>æ€»çš„æ¥è¯´ï¼ŒMySQL çš„é”æœºåˆ¶è™½ç„¶ç§ç±»ä¸å°‘ï¼Œä½†æ ¸å¿ƒç›®æ ‡åªæœ‰ä¸€ä¸ªï¼šåœ¨å¹¶å‘ç¯å¢ƒä¸‹ä¿è¯æ•°æ®çš„ä¸€è‡´æ€§å’Œå®Œæ•´æ€§ã€‚åªè¦æˆ‘ä»¬åˆç†ä½¿ç”¨ç´¢å¼•ã€é¿å…é•¿äº‹åŠ¡ã€æŒ‰è§„èŒƒå†™ä»£ç ï¼Œå¤§å¤šæ•°é”é—®é¢˜éƒ½èƒ½è½»æ¾é¿å¼€ã€‚</p>
<blockquote>
<p>æœ¬æ–‡é¦–å‘äºå…¬ä¼—å·ï¼šç¨‹åºå‘˜åˆ˜å¤§åï¼Œä¸“æ³¨åˆ†äº«å‰åç«¯å¼€å‘çš„å®æˆ˜ç¬”è®°ã€‚å…³æ³¨æˆ‘ï¼Œå°‘èµ°å¼¯è·¯ï¼Œä¸€èµ·è¿›æ­¥ï¼</p>
</blockquote>
<h4 data-id="heading-38">ğŸ“Œå¾€æœŸç²¾å½©</h4>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2F6V83qjR6u0nyfzL-14xYAw" target="_blank" title="https://mp.weixin.qq.com/s/6V83qjR6u0nyfzL-14xYAw" ref="nofollow noopener noreferrer">ã€Šasync/await åˆ°åº•è¦ä¸è¦åŠ  try-catchï¼Ÿå¼‚æ­¥é”™è¯¯å¤„ç†æœ€ä½³å®è·µã€‹</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FbgLoyqb3VLgn3xXAok3kcQ" target="_blank" title="https://mp.weixin.qq.com/s/bgLoyqb3VLgn3xXAok3kcQ" ref="nofollow noopener noreferrer">ã€Šå¦‚ä½•æŸ¥çœ‹ SpringBoot å½“å‰çº¿ç¨‹æ•°ï¼Ÿ3 ç§æ–¹æ³•äº²æµ‹æœ‰æ•ˆã€‹</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2Fp0n2mN5RDDDaIWuHHVRUZQ" target="_blank" title="https://mp.weixin.qq.com/s/p0n2mN5RDDDaIWuHHVRUZQ" ref="nofollow noopener noreferrer">ã€ŠJava å¼€å‘å¿…çœ‹ï¼šä»€ä¹ˆæ—¶å€™ç”¨ forï¼Œä»€ä¹ˆæ—¶å€™ç”¨ Streamï¼Ÿã€‹</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FDpjuafW3agyhLEQYif3zJA" target="_blank" title="https://mp.weixin.qq.com/s/DpjuafW3agyhLEQYif3zJA" ref="nofollow noopener noreferrer">ã€Šåˆ«å†ä¹± new ArrayListï¼8 å¤§ Java å®¹å™¨é€‰å‹æ¡ˆä¾‹ï¼Œä¸€ç¯‡çœ‹æ‡‚ã€‹</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Java 21æ–°ç‰¹æ€§å®æˆ˜ï¼š5ä¸ªæ€æ‰‹çº§åŠŸèƒ½è®©ä½ çš„ä»£ç æ•ˆç‡æå‡50%]]></title>    <link>https://juejin.cn/post/7582848701267197987</link>    <guid>https://juejin.cn/post/7582848701267197987</guid>    <pubDate>2025-12-13T00:16:38.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582848701267197987" data-draft-id="7582783931163967523" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Java 21æ–°ç‰¹æ€§å®æˆ˜ï¼š5ä¸ªæ€æ‰‹çº§åŠŸèƒ½è®©ä½ çš„ä»£ç æ•ˆç‡æå‡50%"/> <meta itemprop="keywords" content="åç«¯,å‰ç«¯,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-13T00:16:38.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿æ©™çš„ç™¾å®ç®±"/> <meta itemprop="url" content="https://juejin.cn/user/1638743356481367"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Java 21æ–°ç‰¹æ€§å®æˆ˜ï¼š5ä¸ªæ€æ‰‹çº§åŠŸèƒ½è®©ä½ çš„ä»£ç æ•ˆç‡æå‡50%
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1638743356481367/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿æ©™çš„ç™¾å®ç®±
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-13T00:16:38.000Z" title="Sat Dec 13 2025 00:16:38 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>Java 21æ–°ç‰¹æ€§å®æˆ˜ï¼š5ä¸ªæ€æ‰‹çº§åŠŸèƒ½è®©ä½ çš„ä»£ç æ•ˆç‡æå‡50%</strong></h2>
<h3 data-id="heading-1">å¼•è¨€</h3>
<p>Javaä½œä¸ºä¸€é—¨ç»ä¹…ä¸è¡°çš„ç¼–ç¨‹è¯­è¨€ï¼Œå§‹ç»ˆåœ¨æ¼”è¿›ä¸­ä¿æŒæ´»åŠ›ã€‚2023å¹´9æœˆå‘å¸ƒçš„Java 21æ˜¯ç»§Java 17ä¹‹åçš„åˆä¸€ä¸ªLTSï¼ˆé•¿æœŸæ”¯æŒï¼‰ç‰ˆæœ¬ï¼Œå¸¦æ¥äº†è®¸å¤šä»¤äººæŒ¯å¥‹çš„æ–°ç‰¹æ€§ã€‚è¿™äº›ç‰¹æ€§ä¸ä»…ç®€åŒ–äº†å¼€å‘æµç¨‹ï¼Œè¿˜æ˜¾è‘—æå‡äº†ä»£ç çš„æ‰§è¡Œæ•ˆç‡å’Œå¯ç»´æŠ¤æ€§ã€‚æœ¬æ–‡å°†æ·±å…¥æ¢è®¨Java 21ä¸­çš„5ä¸ªâ€œæ€æ‰‹çº§â€åŠŸèƒ½ï¼Œå¹¶é€šè¿‡å®é™…ä»£ç ç¤ºä¾‹å±•ç¤ºå¦‚ä½•åˆ©ç”¨å®ƒä»¬å°†ä½ çš„ä»£ç æ•ˆç‡æå‡50%ã€‚</p>
<h3 data-id="heading-2">ä¸»ä½“</h3>
<h4 data-id="heading-3">1. <strong>è™šæ‹Ÿçº¿ç¨‹ï¼ˆVirtual Threadsï¼‰â€”â€”è½»é‡çº§å¹¶å‘çš„é©å‘½</strong></h4>
<p>è™šæ‹Ÿçº¿ç¨‹æ˜¯Java 21ä¸­æœ€å¼•äººæ³¨ç›®çš„ç‰¹æ€§ä¹‹ä¸€ï¼Œæ—¨åœ¨è§£å†³ä¼ ç»Ÿçº¿ç¨‹æ¨¡å‹çš„èµ„æºæ¶ˆè€—é—®é¢˜ã€‚ä¸å¹³å°çº¿ç¨‹ï¼ˆOSçº¿ç¨‹ï¼‰ä¸åŒï¼Œè™šæ‹Ÿçº¿ç¨‹ç”±JVMç®¡ç†ï¼Œåˆ›å»ºå’Œåˆ‡æ¢çš„å¼€é”€æä½ã€‚</p>
<p><strong>å®æˆ˜ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">try</span> (<span class="hljs-type">var</span> <span class="hljs-variable">executor</span> <span class="hljs-operator">=</span> Executors.newVirtualThreadPerTaskExecutor()) {
    IntStream.range(<span class="hljs-number">0</span>, <span class="hljs-number">10_000</span>).forEach(i -&gt; {
        executor.submit(() -&gt; {
            Thread.sleep(Duration.ofSeconds(<span class="hljs-number">1</span>));
            <span class="hljs-keyword">return</span> i;
        });
    });
}
</code></pre>
<p>è¿™æ®µä»£ç å¯ä»¥è½»æ¾å¯åŠ¨1ä¸‡ä¸ªè™šæ‹Ÿçº¿ç¨‹ï¼Œè€Œä¸ä¼šåƒä¼ ç»Ÿçº¿ç¨‹é‚£æ ·è€—å°½ç³»ç»Ÿèµ„æºã€‚è™šæ‹Ÿçº¿ç¨‹çš„å¼•å…¥ä½¿å¾—é«˜å¹¶å‘ç¼–ç¨‹å˜å¾—æ›´åŠ ç®€å•é«˜æ•ˆã€‚</p>
<p><strong>æ•ˆç‡æå‡ç‚¹ï¼š</strong></p>
<ul>
<li>å‡å°‘å†…å­˜å ç”¨ï¼ˆæ¯ä¸ªè™šæ‹Ÿçº¿ç¨‹ä»…éœ€å‡ ç™¾å­—èŠ‚ï¼‰ã€‚</li>
<li>ç®€åŒ–å¼‚æ­¥ç¼–ç¨‹æ¨¡å‹ï¼Œé¿å…å›è°ƒåœ°ç‹±ã€‚</li>
</ul>
<h4 data-id="heading-4">2. <strong>æ¨¡å¼åŒ¹é…çš„å¢å¼ºâ€”â€”æ›´ç®€æ´çš„ç±»å‹æ£€æŸ¥å’Œè½¬æ¢</strong></h4>
<p>Java 21è¿›ä¸€æ­¥æ‰©å±•äº†æ¨¡å¼åŒ¹é…çš„èƒ½åŠ›ï¼Œç‰¹åˆ«æ˜¯åœ¨<code>switch</code>è¡¨è¾¾å¼å’Œè¯­å¥ä¸­æ”¯æŒæ›´å¤æ‚çš„æ¨¡å¼åŒ¹é…é€»è¾‘ã€‚</p>
<p><strong>å®æˆ˜ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">Object</span> <span class="hljs-variable">obj</span> <span class="hljs-operator">=</span> <span class="hljs-string">"Hello, Java 21"</span>;
<span class="hljs-keyword">if</span> (obj <span class="hljs-keyword">instanceof</span> String s &amp;&amp; s.length() &gt; <span class="hljs-number">5</span>) {
    System.out.println(s.toUpperCase());
}

<span class="hljs-comment">// switchè¡¨è¾¾å¼ä¸­çš„æ¨¡å¼åŒ¹é…</span>
<span class="hljs-type">String</span> <span class="hljs-variable">formatted</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">switch</span> (obj) {
    <span class="hljs-keyword">case</span> Integer i -&gt; String.format(<span class="hljs-string">"int %d"</span>, i);
    <span class="hljs-keyword">case</span> String s -&gt; String.format(<span class="hljs-string">"String %s"</span>, s);
    <span class="hljs-keyword">default</span> -&gt; <span class="hljs-string">"Unknown"</span>;
};
</code></pre>
<p>è¿™ç§è¯­æ³•ç³–è®©ä»£ç æ›´åŠ ç›´è§‚ï¼Œå‡å°‘äº†å†—ä½™çš„ç±»å‹æ£€æŸ¥å’Œå¼ºåˆ¶è½¬æ¢æ“ä½œã€‚</p>
<p><strong>æ•ˆç‡æå‡ç‚¹ï¼š</strong></p>
<ul>
<li>å‡å°‘æ ·æ¿ä»£ç ï¼Œæé«˜å¯è¯»æ€§ã€‚</li>
<li>ç¼–è¯‘æ—¶ç±»å‹å®‰å…¨æ£€æŸ¥é¿å…è¿è¡Œæ—¶é”™è¯¯ã€‚</li>
</ul>
<h4 data-id="heading-5">3. <strong>Sequenced Collectionsâ€”â€”ç»Ÿä¸€çš„é›†åˆæ“ä½œæ¥å£</strong></h4>
<p>Java 21å¼•å…¥äº†<code>SequencedCollection</code>ã€<code>SequencedSet</code>å’Œ<code>SequencedMap</code>æ¥å£ï¼Œä¸ºæœ‰åºé›†åˆæä¾›äº†ä¸€è‡´çš„æ“ä½œæ–¹æ³•ã€‚</p>
<p><strong>å®æˆ˜ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java">SequencedCollection&lt;String&gt; sequenced = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;(List.of(<span class="hljs-string">"a"</span>, <span class="hljs-string">"b"</span>, <span class="hljs-string">"c"</span>));
sequenced.addFirst(<span class="hljs-string">"0"</span>); <span class="hljs-comment">// å¤´éƒ¨æ’å…¥</span>
sequenced.addLast(<span class="hljs-string">"d"</span>); <span class="hljs-comment">// å°¾éƒ¨æ’å…¥</span>

<span class="hljs-comment">// SequencedMapçš„æ“ä½œ</span>
SequencedMap&lt;Integer, String&gt; map = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedHashMap</span>&lt;&gt;();
map.put(<span class="hljs-number">1</span>, <span class="hljs-string">"one"</span>);
map.firstEntry(); <span class="hljs-comment">// Entry[1, "one"]</span>
</code></pre>
<p>è¿™äº›æ¥å£ç»Ÿä¸€äº†ä¸åŒé›†åˆç±»å‹çš„æ“ä½œæ–¹å¼ï¼Œé¿å…äº†å¼€å‘è€…éœ€è¦è®°ä½æ¯ç§é›†åˆçš„å…·ä½“APIå·®å¼‚ã€‚</p>
<p><strong>æ•ˆç‡æå‡ç‚¹ï¼š</strong></p>
<ul>
<li>æä¾›ä¸€è‡´çš„APIè®¾è®¡ï¼Œé™ä½å­¦ä¹ æˆæœ¬ã€‚</li>
<li>ç®€åŒ–å¯¹é›†åˆå¤´å°¾å…ƒç´ çš„ç›´æ¥æ“ä½œé€»è¾‘ã€‚</li>
</ul>
<h4 data-id="heading-6">4. <strong>å­—ç¬¦ä¸²æ¨¡æ¿ï¼ˆString Templatesï¼‰â€”â€”å‘Šåˆ«ç¹ççš„æ‹¼æ¥</strong></h4>
<p>å­—ç¬¦ä¸²æ¨¡æ¿ï¼ˆé¢„è§ˆåŠŸèƒ½ï¼‰æ˜¯Javaè¿ˆå‘ç°ä»£åŒ–å­—ç¬¦ä¸²å¤„ç†çš„é‡å¤§ä¸€æ­¥ï¼Œå…è®¸ç›´æ¥åœ¨å­—ç¬¦ä¸²ä¸­åµŒå…¥è¡¨è¾¾å¼ã€‚</p>
<p><strong>å®æˆ˜ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">String</span> <span class="hljs-variable">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">"Alice"</span>;
<span class="hljs-type">int</span> <span class="hljs-variable">age</span> <span class="hljs-operator">=</span> <span class="hljs-number">30</span>;
<span class="hljs-type">String</span> <span class="hljs-variable">message</span> <span class="hljs-operator">=</span> STR.<span class="hljs-string">"My name is \{name} and I am \{age} years old."</span>;
</code></pre>
<p>ç›¸æ¯”äºä¼ ç»Ÿçš„<code>StringBuilder</code>æˆ–<code>+</code>æ‹¼æ¥æ–¹å¼ï¼Œå­—ç¬¦ä¸²æ¨¡æ¿æ›´åŠ ç®€æ´å’Œå®‰å…¨ï¼ˆé¿å…SQLæ³¨å…¥ç­‰é£é™©ï¼‰ã€‚</p>
<p><strong>æ•ˆç‡æå‡ç‚¹ï¼š</strong><br/>
-å‡å°‘æ‰‹å†™æ‹¼æ¥ä»£ç çš„é”™è¯¯ç‡ã€‚
-æ”¯æŒè‡ªå®šä¹‰æ¨¡æ¿å¤„ç†å™¨ï¼ˆå¦‚SQLã€JSONç­‰åœºæ™¯ï¼‰ã€‚</p>
<p>####5.<strong>Record Patternsâ€”â€”åµŒå¥—æ•°æ®è§£æ„çš„ç»ˆææ–¹æ¡ˆ</strong>
Record Patternsæ˜¯å¯¹RecordsåŠŸèƒ½çš„è¡¥å……å‡çº§,å…è®¸ç›´æ¥è§£æ„åµŒå¥—è®°å½•ç»“æ„ã€‚</p>
<p><strong>å®æˆ˜ç¤ºä¾‹:</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">record</span> <span class="hljs-title class_">Point</span><span class="hljs-params">(<span class="hljs-type">int</span> x,<span class="hljs-type">int</span> y)</span>{}
<span class="hljs-keyword">record</span> <span class="hljs-title class_">Rectangle</span><span class="hljs-params">(Point topLeft,Point bottomRight)</span>{}

<span class="hljs-keyword">void</span> <span class="hljs-title function_">printXCoord</span><span class="hljs-params">(Rectangle r)</span>{
    <span class="hljs-keyword">if</span>(r <span class="hljs-keyword">instanceof</span> <span class="hljs-title function_">Rectangle</span><span class="hljs-params">(Point(<span class="hljs-keyword">var</span> x1,_)</span>,Point(<span class="hljs-keyword">var</span> x2,_))){
        System.out.println(x1 +<span class="hljs-string">","</span>+x2);
    }
}
</code></pre>
<p>é€šè¿‡åµŒå¥—è§£æ„å¯ä»¥ç›´æ¥æå–å¤šå±‚æ•°æ®å­—æ®µå€¼ã€‚</p>
<p><strong>æ•ˆç‡æå‡ç‚¹:</strong>
-æ¶ˆé™¤æ‰‹åŠ¨é€å±‚æ‹†è§£çš„å†—ä½™ä»£ç ã€‚
-å®Œç¾é…åˆRecordså®ç°DDDé¢†åŸŸæ¨¡å‹ã€‚</p>
<p>###æ€»ç»“</p>
<p>Java21é€šè¿‡è™šæ‹Ÿçº¿ç¨‹ã€æ¨¡å¼åŒ¹é…å¢å¼ºç­‰äº”å¤§ç‰¹æ€§å½»åº•æ”¹å˜äº†å¼€å‘ä½“éªŒï¼š</p>
<p>-è™šæ‹Ÿçº¿ç¨‹è®©é«˜å¹¶å‘ç¨‹åºä»å¤æ‚èµ°å‘ç®€å•ï¼›
-æ¨¡å¼åŒ¹é…ä½¿ç±»å‹å¤„ç†æ›´ç¬¦åˆç›´è§‰ï¼›
-Sequenced Collectionsç»Ÿä¸€äº†æœ‰åºé›†åˆAPIï¼›
-å­—ç¬¦ä¸²æ¨¡æ¿ç»ˆç»“äº†ä¸‘é™‹çš„æ‹¼æ¥æ—¶ä»£ï¼›
-Record Patternså®ç°äº†ä¼˜é›…çš„æ•°æ®è§£æ„ã€‚</p>
<p>è¿™äº›æ”¹è¿›ä¸æ˜¯ç®€å•çš„è¯­æ³•ç³–è€Œæ˜¯èƒ½åˆ‡å®é™ä½ç»´æŠ¤æˆæœ¬å¹¶æé«˜è¿è¡Œæ•ˆç‡çš„å·¥å…·é“¾å‡çº§å»ºè®®æ‰€æœ‰å¼€å‘è€…å°½å¿«ç†Ÿæ‚‰å¹¶åº”ç”¨åˆ°ç”Ÿäº§ç¯å¢ƒä¸­ä»¥äº«å—æŠ€æœ¯è¿›æ­¥å¸¦æ¥çš„çº¢åˆ©ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[PHP 8.5 åƒåœ¾å›æ”¶æ”¹è¿›]]></title>    <link>https://juejin.cn/post/7582809606067470362</link>    <guid>https://juejin.cn/post/7582809606067470362</guid>    <pubDate>2025-12-13T00:37:08.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582809606067470362" data-draft-id="7582791876367269926" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="PHP 8.5 åƒåœ¾å›æ”¶æ”¹è¿›"/> <meta itemprop="keywords" content="åç«¯,PHP"/> <meta itemprop="datePublished" content="2025-12-13T00:37:08.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="BingoGo"/> <meta itemprop="url" content="https://juejin.cn/user/993614242266077"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            PHP 8.5 åƒåœ¾å›æ”¶æ”¹è¿›
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/993614242266077/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    BingoGo
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-13T00:37:08.000Z" title="Sat Dec 13 2025 00:37:08 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">PHP 8.5 åƒåœ¾å›æ”¶æ”¹è¿›</h2>
<p>PHP å†…å­˜æ¶ˆè€—çš„å¤§å¹…ä¼˜åŒ–å·²ç»å¾ˆç½•è§äº†ã€‚è¿‘å¹´æ¥çš„å†…å­˜æ”¹è¿›èŒƒå›´è¾ƒå°ï¼Œä¸»è¦é›†ä¸­åœ¨æŸäº›ç±»å‹å˜é‡çš„ç»†èŠ‚ä¸Šã€‚</p>
<p>æ¯”å¦‚æ”¹è¿›åƒåœ¾å›æ”¶å™¨ï¼ˆGCï¼‰åœ¨è¾¹ç¼˜æƒ…å†µä¸‹çš„è¡¨ç°ã€‚<code>Iljia Tovilo</code> ä¸º PHP 8.5 è´¡çŒ®äº†è¿™ä¸ªä¼˜åŒ–ï¼Œæ ‡é¢˜æ˜¯â€œå°†æšä¸¾å’Œé™æ€ä¼ªé—­åŒ…æ ‡è®°ä¸ºä¸å¯å›æ”¶â€ã€‚</p>
<p>ç®€å•æ¥è¯´ï¼Œå¯¹äºè¿™ä¸¤ç§å˜é‡ç±»å‹ï¼Œå¾ªç¯å›æ”¶å™¨ä¸ä¼šå°è¯•â€œæ”¶é›†â€å®ƒä»¬ï¼Œå¤§é‡ä½¿ç”¨è¿™äº›å®ä¾‹æ—¶å°±èƒ½é¿å…ä¸å¿…è¦çš„ GC è¿è¡Œã€‚</p>
<p>è¿™æ²¡æœ‰ä»»ä½•å‰¯ä½œç”¨ï¼Œå› ä¸ºè¿™äº›ç±»å‹æœ¬èº«ä¸å¯èƒ½å½¢æˆå¾ªç¯å¼•ç”¨ï¼Œæœ¬æ¥å°±ä¸åœ¨ GC çš„ç®¡è¾–èŒƒå›´å†…ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fcatchadmin.com%2Fpost%2F2025-12%2Fphp-8-5-garbage-collection-improvements" target="_blank" title="https://catchadmin.com/post/2025-12/php-8-5-garbage-collection-improvements" ref="nofollow noopener noreferrer">åŸæ–‡é“¾æ¥ PHP 8.5 åƒåœ¾å›æ”¶æ”¹è¿›</a></p>
<h3 data-id="heading-1">å¿«é€Ÿå›é¡¾ï¼šPHP çš„åƒåœ¾å›æ”¶å™¨æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ</h3>
<p>è¦ç†è§£ä¸ºä»€ä¹ˆè¿™å¾ˆæœ‰ç”¨ï¼Œå…ˆå¿«é€Ÿå›é¡¾ä¸€ä¸‹ PHP åƒåœ¾å›æ”¶çš„å·¥ä½œåŸç†ã€‚</p>
<p>ç®€å•æ¥è¯´ï¼ŒPHP çš„ GC ä¸æ˜¯æŒç»­è¿è¡Œçš„ï¼Œè€Œæ˜¯ç”±é˜ˆå€¼è§¦å‘ã€‚è¿™ä¸ªé˜ˆå€¼æ˜¯ï¼šå†…å­˜ä¸­è‡³å°‘æœ‰ 10,000 ä¸ªå¯èƒ½å­˜åœ¨å¾ªç¯å¼•ç”¨çš„å¯¹è±¡æˆ–æ•°ç»„ã€‚å¦‚æœè¿™äº›å®ä¾‹æ•°é‡ä¸æ–­å¢åŠ è€Œæ— æ³•æ¸…ç†ï¼ŒGC å¯èƒ½ä¼šåœ¨è¶Šæ¥è¶Šå¤šçš„å¯¹è±¡ä¸Šè¿è¡Œï¼Œæ¶ˆè€—å®è´µçš„è®¡ç®—èµ„æºã€‚</p>
<p>å› æ­¤ï¼Œå‡å°‘ç¬¦åˆåƒåœ¾å›æ”¶æ¡ä»¶çš„å¯¹è±¡æ•°é‡å¯ä»¥é™ä½ GC è¿è¡Œçš„æ¦‚ç‡ï¼Œä»è€Œæå‡æ€§èƒ½ã€‚</p>
<p>PHP 7.3 æ·»åŠ äº†ä¸€ä¸ªå®ç”¨å‡½æ•° <code>gc_status()</code>ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.php.net%2Fmanual%2Fen%2Ffunction.gc-status.php" target="_blank" title="https://www.php.net/manual/en/function.gc-status.php" ref="nofollow noopener noreferrer">æ–‡æ¡£</a>ï¼‰ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿åœ°äº†è§£åƒåœ¾å›æ”¶çš„æ€§èƒ½æƒ…å†µã€‚</p>
<h3 data-id="heading-2">å®é™…æ”¶ç›Šæ˜¯ä»€ä¹ˆï¼Ÿ</h3>
<p>çœ‹ä¸€ä¸‹ PR ä¸­çš„ä¾‹å­ï¼Œå¤§é‡ first class callable å®ä¾‹è¢«æ·»åŠ åˆ°æ•°ç»„ä¸­ï¼Œç„¶åè¿›è¡Œè¿­ä»£ã€‚</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-meta">&lt;?php</span>

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">foo</span>(<span class="hljs-params"/>) </span>{}

<span class="hljs-variable">$array</span> = [];
<span class="hljs-keyword">for</span> (<span class="hljs-variable">$i</span> = <span class="hljs-number">0</span>; <span class="hljs-variable">$i</span> &lt; <span class="hljs-number">10_000_000</span>; <span class="hljs-variable">$i</span>++) {
    <span class="hljs-variable">$array</span>[] = <span class="hljs-title function_ invoke__">foo</span>(...);
}

<span class="hljs-comment">//</span>
<span class="hljs-comment">// è¿™ä¸ªå¾ªç¯æ˜¯ä¸ºäº†ç¡®ä¿è§¦å‘å¾ªç¯å›æ”¶å™¨ï¼š</span>
<span class="hljs-comment">// - `as $foo` ä¼šå¢åŠ æ•°ç»„å…ƒç´ çš„å¼•ç”¨è®¡æ•°</span>
<span class="hljs-comment">// - å˜é‡è¶…å‡ºä½œç”¨åŸŸåå¼•ç”¨è®¡æ•°åˆä¼šå‡å°‘</span>
<span class="hljs-comment">//</span>
<span class="hljs-keyword">foreach</span> (<span class="hljs-variable">$array</span> <span class="hljs-keyword">as</span> <span class="hljs-variable">$foo</span>) {}

<span class="hljs-keyword">echo</span> <span class="hljs-title function_ invoke__">json_encode</span>(<span class="hljs-title function_ invoke__">gc_status</span>(), JSON_PRETTY_PRINT);
</code></pre>
<p>åœ¨æ—§ç‰ˆ PHP ä¸­ï¼Œè¿™ä¼šè§¦å‘å¾ªç¯å›æ”¶å™¨æ£€æŸ¥æ‰€æœ‰è¿™äº›å®ä¾‹æ˜¯å¦å­˜åœ¨å¾ªç¯å¼•ç”¨ã€‚ç”±äºè¿™äº›å®ä¾‹ä¸å¯èƒ½æœ‰å¾ªç¯å¼•ç”¨ï¼Œè¿™äº›æ£€æŸ¥æ˜¯å¤šä½™çš„ã€‚å¯¹äº 1000 ä¸‡ä¸ªæ¡ç›®ï¼Œè¿™å¯¼è‡´äº† 44 æ¬¡ GC è¿è¡Œï¼Œè€Œ PHP 8.5 åŠä»¥åç‰ˆæœ¬åœ¨ç›¸åŒä»£ç ä¸‹æ˜¯ 0 æ¬¡ã€‚</p>
<h3 data-id="heading-3">å®šä¹‰ï¼š"é™æ€ä¼ªé—­åŒ…"</h3>
<p>PR æ ‡é¢˜è¯´ä¼˜åŒ–é€‚ç”¨äºâ€œæšä¸¾å’Œé™æ€ä¼ªé—­åŒ…â€ã€‚é™æ€ä¼ªé—­åŒ…æ˜¾ç„¶æ˜¯æ›´å¸¸è§çš„æƒ…å†µï¼Œè€Œä¸”æœ¯è¯­ä¸ç”¨æˆ·å±‚é¢çš„å‘½åä¸ä¸€è‡´ï¼Œæˆ‘ä»¬æ¥æ·±å…¥äº†è§£ä¸€ä¸‹ï¼šä»€ä¹ˆæ˜¯â€œé™æ€ä¼ªé—­åŒ…â€ï¼Ÿ</p>
<p>ä¸Šé¢çš„ä¾‹å­ä½¿ç”¨äº†"é™æ€ä¼ªé—­åŒ…"ï¼Œåœ¨ç”¨æˆ·å±‚é¢é€šå¸¸ç§°ä¸º"first-class callable"ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå°±æ˜¯ <code>foo(...)</code>ã€‚</p>
<p>è¦åˆ¤æ–­ä¸€ä¸ª callable æ˜¯å¦æ˜¯"ä¼ªé—­åŒ…"ï¼Œå¯ä»¥æ£€æŸ¥è¯¥ callable çš„åå°„ç±»çš„ anonymous æ ‡å¿—æ˜¯å¦è¿”å› falseï¼Œå³ <code>(new \ReflectionFunction($callable))-&gt;isAnonymous();</code>ã€‚</p>
<p>ç±»å‹ä¸­çš„â€œé™æ€â€éƒ¨åˆ†æŒ‡çš„æ˜¯ OOP ä¸­çš„ staticï¼šæ²¡æœ‰è®¿é—®å¯¹è±¡å®ä¾‹ï¼ˆå³ <code>$this</code>ï¼‰çš„æƒé™ã€‚</p>
<p>åœ¨ä¸‹é¢è¿™ä¸ªä¸åŒé—­åŒ…çš„åˆ—è¡¨ä¸­ï¼Œä½ å¯ä»¥çœ‹åˆ°å“ªäº›è¢« PR è®¤ä¸ºæ˜¯é™æ€ä¼ªé—­åŒ…ï¼Œå“ªäº›ä¸æ˜¯ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-meta">&lt;?php</span>

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Foo</span> 
</span>{
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">static</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">bar</span>(<span class="hljs-params"/>): <span class="hljs-title">void</span> </span>{}
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">baz</span>(<span class="hljs-params"/>): <span class="hljs-title">void</span> </span>{}    
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">bar</span>(<span class="hljs-params"/>): <span class="hljs-title">void</span> </span>{}

<span class="hljs-comment">//</span>
<span class="hljs-comment">// é™æ€ä¼ªé—­åŒ…</span>
<span class="hljs-comment">//</span>
<span class="hljs-title function_ invoke__">var_dump</span>(...);
<span class="hljs-title function_ invoke__">bar</span>(...);
<span class="hljs-title class_">Foo</span>::<span class="hljs-title function_ invoke__">bar</span>(...);
<span class="hljs-variable">$callable</span> = <span class="hljs-title class_">Closure</span>::<span class="hljs-title function_ invoke__">fromCallable</span>(<span class="hljs-string">'bar'</span>);
<span class="hljs-variable">$callable</span>(...);

<span class="hljs-comment">// ä¼ªé—­åŒ…ï¼Œä½†éé™æ€</span>
(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Foo</span>())-&gt;<span class="hljs-title function_ invoke__">baz</span>(...);
<span class="hljs-comment">// åŒ¿åå‡½æ•°ï¼Œä¸æ˜¯ä¼ªé—­åŒ…</span>
<span class="hljs-variable">$anon</span> = <span class="hljs-built_in">static</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"/>) </span>{};
<span class="hljs-variable">$anon</span>(...);
</code></pre>
<h3 data-id="heading-4">æšä¸¾çš„æƒ…å†µ</h3>
<p>ç¬¬äºŒç§è¢«ä¼˜åŒ–çš„ç±»å‹æ˜¯æšä¸¾å®ä¾‹ã€‚è¿™åœ¨å®é™…é¡¹ç›®ä¸­çš„å½±å“å¯èƒ½è¾ƒå°ï¼Œå› ä¸ºåªæœ‰å½“ä»£ç åº“åŒ…å«å¤§é‡æšä¸¾ä¸”æ¯ä¸ªæšä¸¾æœ‰å¾ˆå¤š case æ—¶æ‰ä¼šå½±å“æ€§èƒ½ã€‚æšä¸¾å®ä¾‹æ˜¯å•ä¾‹çš„ï¼Œæ¯ä¸ªæšä¸¾ case åªä¼šè¢«å®ä¾‹åŒ–ä¸€æ¬¡ã€‚å³ä½¿æœ‰æ•°åƒä¸ªå¼•ç”¨æŒ‡å‘ç›¸åŒçš„ä¸‰å››ä¸ªæšä¸¾ caseï¼Œä¹Ÿä¸ä¼šæœ‰å½±å“ï¼Œå› ä¸ºæ¯ä¸ªæšä¸¾ case åœ¨ GC çš„æ ¹ç¼“å†²åŒºä¸­åªèƒ½å‡ºç°ä¸€æ¬¡ã€‚</p>
<h3 data-id="heading-5">æ€»ç»“</h3>
<p>è¿™æ ·çš„å°æ”¹è¿›è¡¨æ˜ï¼ŒPHP çš„å†…å­˜ç®¡ç†åœ¨å·²ç»ç›¸å½“æˆç†Ÿçš„æƒ…å†µä¸‹ä»ç„¶å¯ä»¥ç»§ç»­ä¼˜åŒ–ã€‚</p>
<p>è¿™ä¸ªæ”¹åŠ¨å¯èƒ½åœ¨æŸäº›æƒ…å†µä¸‹æå‡æ€§èƒ½ï¼Œä½†æ›´é‡è¦çš„æ˜¯ï¼Œå®ƒç¡®ä¿åƒåœ¾å›æ”¶è¿è¡Œä¸ä¼šåœ¨æ— å…³çš„æ£€æŸ¥ä¸Šæµªè´¹æ—¶é—´ã€‚</p>
<p>æ„Ÿè°¢ <code>Iljia Tovilo</code> çš„è´¡çŒ®ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[GPT-5.2æ·±å¤œç‚¸åœºï¼šä¸ºäº†è®©ä½ æ¯å‘¨å°‘å¹²10å°æ—¶ï¼ŒOpenAIæ‹¼äº†]]></title>    <link>https://juejin.cn/post/7582846276505731110</link>    <guid>https://juejin.cn/post/7582846276505731110</guid>    <pubDate>2025-12-12T16:48:54.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582846276505731110" data-draft-id="7582814236583378982" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="GPT-5.2æ·±å¤œç‚¸åœºï¼šä¸ºäº†è®©ä½ æ¯å‘¨å°‘å¹²10å°æ—¶ï¼ŒOpenAIæ‹¼äº†"/> <meta itemprop="keywords" content="AIGC"/> <meta itemprop="datePublished" content="2025-12-12T16:48:54.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¢¨é£å¦‚é›ª"/> <meta itemprop="url" content="https://juejin.cn/user/4064249017803927"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            GPT-5.2æ·±å¤œç‚¸åœºï¼šä¸ºäº†è®©ä½ æ¯å‘¨å°‘å¹²10å°æ—¶ï¼ŒOpenAIæ‹¼äº†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4064249017803927/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¢¨é£å¦‚é›ª
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-12T16:48:54.000Z" title="Fri Dec 12 2025 16:48:54 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å°±åœ¨åˆšåˆšè¿‡å»çš„12æœˆ11æ—¥ï¼ŒOpenAIç»™æ²‰å¯‚äº†ä¸€æ®µæ—¶é—´çš„ç§‘æŠ€åœˆæ‰”ä¸‹äº†ä¸€æšé‡ç£…ç‚¸å¼¹ã€‚</p>
<p>å¦‚æœä½ è¿˜è®°å¾—ä¸Šä¸ªæœˆè°·æ­ŒGemini 3å‘å¸ƒæ—¶å¸¦æ¥çš„éœ‡æ’¼ï¼Œé‚£ä½ å¤§æ¦‚èƒ½ç†è§£OpenAIå†…éƒ¨é‚£ç§â€œçº¢è‰²è­¦æŠ¥â€çš„ç´§è¿«æ„Ÿã€‚GPT-5.2å°±æ˜¯åœ¨è¿™ç§é«˜å‹ç¯å¢ƒä¸‹è¯ç”Ÿçš„äº§ç‰©ã€‚è¿™æ¬¡æ²¡æœ‰é‚£äº›è™šå¤´å·´è„‘çš„ç‚«æŠ€ï¼ŒOpenAIæŠŠæ‰€æœ‰çš„æŠ€èƒ½ç‚¹éƒ½ç‚¹åœ¨äº†ä¸€ä¸ªæœ€åŠ¡å®çš„æ–¹å‘ä¸Šï¼šè®©ä¸“ä¸šçš„äººï¼Œå¹²æ´»æ›´å¿«ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.worldcodeing.com%2Fwp-content%2Fuploads%2F2025%2F12%2FiShot_2025-12-13_00.39.28-1024x262.png" target="_blank" title="https://blog.worldcodeing.com/wp-content/uploads/2025/12/iShot_2025-12-13_00.39.28-1024x262.png" ref="nofollow noopener noreferrer"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f5e80a3f9dad44258f0a7b6a79e3973c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aKo6aOO5aaC6Zuq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766162934&amp;x-signature=e5fo8jRbq3NYy5fG%2FB4KvPBdj2Y%3D" alt="iShot_2025-12-13_00.39.28" loading="lazy"/></a></p>
<p><strong>é‚£ä¸ªâ€œæ¯å‘¨å°‘å¹²10å°æ—¶â€çš„è¯´æ³•ï¼Œåˆ°åº•é ä¸é è°±ï¼Ÿ</strong></p>
<p>è¿™æ˜¯å¤§å®¶æœ€å…³å¿ƒçš„å™±å¤´ï¼Œä½†ä»”ç»†çœ‹OpenAIç”©å‡ºçš„æ•°æ®ï¼Œä½ ä¼šå‘ç°è¿™ä¸å…¨æ˜¯è¥é”€è¯æœ¯ã€‚</p>
<p>ä»¥å‰æˆ‘ä»¬ç”¨AIï¼Œæ›´å¤šæ˜¯å½“ç™¾ç§‘å…¨ä¹¦æˆ–è€…æ˜¯å†™å†™é‚®ä»¶è‰ç¨¿ã€‚ä½†GPT-5.2è¿™æ¬¡ç›´æ¥æ€è¿›äº†â€œæ·±æ°´åŒºâ€ã€‚æ ¹æ®å®˜æ–¹å¯¹ChatGPTä¼ä¸šç‰ˆé‡åº¦ç”¨æˆ·çš„ç»Ÿè®¡ï¼Œè¿™å¸®äººæ¯å‘¨çœŸçš„çœå‡ºäº†è¶…è¿‡10ä¸ªå°æ—¶ã€‚</p>
<p>è¿™10ä¸ªå°æ—¶æ˜¯æ€ä¹ˆçœå‡ºæ¥çš„ï¼Ÿä¸æ˜¯é è®©AIç»™ä½ è®²ç¬‘è¯ï¼Œè€Œæ˜¯é å®ƒå¤„ç†é‚£äº›æœ€ç£¨äººçš„â€œè„æ´»ç´¯æ´»â€ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.worldcodeing.com%2Fwp-content%2Fuploads%2F2025%2F12%2Fafwsafds-1024x576.webp" target="_blank" title="https://blog.worldcodeing.com/wp-content/uploads/2025/12/afwsafds-1024x576.webp" ref="nofollow noopener noreferrer"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/21a050a587ac4c9c9dbc780dfd77f339~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aKo6aOO5aaC6Zuq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766162934&amp;x-signature=XSIZQISx6r0uPaHzw3sF%2FG%2Bt8Dg%3D" alt="afwsafds" loading="lazy"/></a></p>
<p>æƒ³è±¡ä¸€ä¸‹ï¼Œä½ æ‰‹å¤´æœ‰ä¸€å †ä¹±ä¸ƒå…«ç³Ÿçš„è´¢åŠ¡æŠ¥è¡¨éœ€è¦æ•´ç†æˆExcelï¼Œæˆ–è€…æœ‰ä¸€ä¸ªå‡ ç™¾é¡µçš„æŠ€æœ¯æ–‡æ¡£éœ€è¦æç‚¼æ ¸å¿ƒé€»è¾‘ï¼Œç”šè‡³æ˜¯ä¸€æ®µæŠ¥é”™æŠ¥åˆ°è®©ä½ æ€€ç–‘äººç”Ÿçš„ä»£ç ã€‚ä»¥å‰GPT-4å¯èƒ½åšä¸ªå¤§æ¦‚ï¼Œå‰©ä¸‹è¿˜å¾—ä½ è‡ªå·±æ”¹ã€‚ä½†GPT-5.2åœ¨è¿™äº›ä»»åŠ¡ä¸Šçš„è¡¨ç°ï¼Œåªèƒ½ç”¨â€œæ®‹æš´â€æ¥å½¢å®¹ã€‚</p>
<p>è¿™å°±ä¸å¾—ä¸æä¸€ä¸ªæ–°çš„æµ‹è¯•æ ‡å‡†â€”â€”GDPvalã€‚è¿™æ˜¯ä¸€ä¸ªä¸“é—¨è¯„ä¼°44ç§èŒä¸šçŸ¥è¯†å·¥ä½œä»»åŠ¡çš„æµ‹è¯•ã€‚åœ¨è¿™ä¸ªæµ‹è¯•é‡Œï¼ŒGPT-5.2åœ¨70.9%çš„æƒ…å†µä¸‹ï¼Œè¡¨ç°å¾—ç­‰äºæˆ–è€…å¥½äºäººç±»è¡Œä¸šä¸“å®¶ã€‚</p>
<p>å¬æ‡‚äº†å—ï¼Ÿè¿™ä¸ä»…ä»…æ˜¯â€œè¾…åŠ©å·¥å…·â€äº†ï¼Œåœ¨ä¸ƒæˆçš„åœºæ™¯ä¸‹ï¼Œå®ƒå°±æ˜¯é‚£ä¸ªååœ¨ä½ æ—è¾¹çš„èµ„æ·±ä¸“å®¶ã€‚</p>
<p><strong>ä¸‰ä¸ªç‰ˆæœ¬ï¼Œæ€»æœ‰ä¸€æ¬¾é€‚åˆä½ </strong></p>
<p>è¿™æ¬¡OpenAIå­¦èªæ˜äº†ï¼Œæ²¡æœ‰ä¸€è‚¡è„‘æ¨ä¸€ä¸ªæ¨¡å‹ï¼Œè€Œæ˜¯åƒæ‰‹æœºå‚å•†ä¸€æ ·æäº†â€œæ¯å‹â€åŒºåˆ†ï¼š</p>
<p>Instantç‰ˆæœ¬ï¼Œä½ å¯ä»¥æŠŠå®ƒçœ‹ä½œæ˜¯æ•ˆç‡å¼•æ“ï¼Œä¸»æ‰“å¿«ï¼Œé€‚åˆæ—¥å¸¸çç¢çš„é—®ç­”ï¼›Thinkingç‰ˆæœ¬ï¼Œè¿™æ˜¯çœŸæ­£çš„å¤§è„‘ï¼Œæ“…é•¿æ·±åº¦æ€è€ƒå’Œå¤æ‚æ¨ç†ï¼›è¿˜æœ‰ä¸€ä¸ªProç‰ˆæœ¬ï¼Œé‚£æ˜¯ç»™é¡¶å°–æ™ºåº“å’Œå¼€å‘è€…å‡†å¤‡çš„æ ¸æ­¦å™¨ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.worldcodeing.com%2Fwp-content%2Fuploads%2F2025%2F12%2Fasfdsgdsg-1024x608.webp" target="_blank" title="https://blog.worldcodeing.com/wp-content/uploads/2025/12/asfdsgdsg-1024x608.webp" ref="nofollow noopener noreferrer"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/390eac9b5d3d4da9a4ded3a5bc0c739c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aKo6aOO5aaC6Zuq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766162934&amp;x-signature=QquxUz3ibQ%2B0FC8UbPRJ82MhfZI%3D" alt="asfdsgdsg" loading="lazy"/></a></p>
<p>å¯¹äºå¤§å¤šæ•°äººæ¥è¯´ï¼ŒThinkingç‰ˆæœ¬å¯èƒ½æ˜¯æœ€æƒŠè‰³çš„ã€‚ç‰¹åˆ«æ˜¯å®ƒçš„é•¿æ–‡æœ¬å¤„ç†èƒ½åŠ›ï¼Œæ”¯æŒé«˜è¾¾256Kçš„ä¸Šä¸‹æ–‡ã€‚è¿™æ„å‘³ç€ä½ èƒ½æŠŠæ•´æœ¬ä¹¦ã€æ•´å¥—æ³•å¾‹å·å®—æ‰”ç»™å®ƒï¼Œå®ƒä¸ä»…èƒ½è¯»å®Œï¼Œè¿˜èƒ½ç²¾å‡†åœ°å›ç­”ä½ ç¬¬235é¡µçš„ä¸€ä¸ªç»†èŠ‚æ¡æ¬¾ï¼Œè€Œä¸”å¹»è§‰ç‡æ¯”ä¸Šä¸€ä»£é™ä½äº†30%ã€‚</p>
<p>è¯´å®è¯ï¼Œä»¥å‰ç”¨AIæŸ¥èµ„æ–™æœ€æ€•å®ƒä¸€æœ¬æ­£ç»åœ°èƒ¡è¯´å…«é“ï¼Œç°åœ¨è¿™ä¸ªæ¯›ç—…è™½ç„¶æ²¡å®Œå…¨æ ¹é™¤ï¼Œä½†è‡³å°‘å·²ç»ä»â€œä¸å¯ä¿¡â€å˜æˆäº†â€œåŸºæœ¬å¯ä¿¡â€ã€‚</p>
<p><strong>ä¸ä»…ä»…æ˜¯èŠå¤©ï¼Œæ›´æ˜¯ç”Ÿäº§åŠ›</strong></p>
<p>è¿˜æœ‰ä¸€ä¸ªç»†èŠ‚å€¼å¾—æ³¨æ„ï¼ŒGPT-5.2åœ¨è§†è§‰å’Œå›¾è¡¨ç†è§£ä¸Šçš„è¿›åŒ–ã€‚</p>
<p>ä»¥å‰ä½ å‘ç»™AIä¸€å¼ å¤æ‚çš„æ•°æ®ä»ªè¡¨ç›˜æˆªå›¾ï¼Œå®ƒå¯èƒ½è¿æ¨ªçºµåæ ‡éƒ½æä¸æ¸…æ¥šã€‚ç°åœ¨ï¼Œå®ƒçš„é”™è¯¯ç‡ç›´æ¥ç åŠã€‚å¯¹äºåšé‡‘èåˆ†æã€å·¥ç¨‹åˆ¶å›¾æˆ–è€…ç§‘ç ”çš„äººæ¥è¯´ï¼Œè¿™æ„å‘³ç€ä½ å¯ä»¥ç›´æ¥ä¸¢å›¾è¡¨ç»™å®ƒï¼Œè®©å®ƒå¸®ä½ åˆ†æè¶‹åŠ¿ï¼Œè€Œä¸æ˜¯å…ˆæŠŠæ•°æ®æ‰‹æ•²è¿›Excelã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.worldcodeing.com%2Fwp-content%2Fuploads%2F2025%2F12%2Fawfsadfsd-1024x782.webp" target="_blank" title="https://blog.worldcodeing.com/wp-content/uploads/2025/12/awfsadfsd-1024x782.webp" ref="nofollow noopener noreferrer"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/05d2ca99f8dc4a77aae980e8407f401a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aKo6aOO5aaC6Zuq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766162934&amp;x-signature=W2Qgj7txssNdFEx3qX3ava98%2BGw%3D" alt="awfsadfsd" loading="lazy"/></a></p>
<p>å½“ç„¶ï¼Œè¿™ä¸€åˆ‡æ˜¯æœ‰ä»£ä»·çš„ã€‚è™½ç„¶Tokençš„ä½¿ç”¨æ•ˆç‡é«˜äº†ï¼Œå¯èƒ½æ•´ä½“æˆæœ¬ä¼šä¸‹é™ï¼Œä½†çœ‹ç€Proç‰ˆæœ¬é‚£é«˜æ˜‚çš„APIä»·æ ¼ï¼Œæ™®é€šå¼€å‘è€…è¿˜æ˜¯å¾—æ‚é‡ä¸€ä¸‹ã€‚</p>
<p><strong>å†™åœ¨æœ€å</strong></p>
<p>GPT-5.2çš„å‘å¸ƒï¼ŒæŸç§æ„ä¹‰ä¸Šå®£å‘Šäº†AIæ¨¡å‹ç«äº‰è¿›å…¥äº†ä¸‹åŠåœºã€‚å¤§å®¶ä¸å†æ¯”æ‹¼è°èƒ½å†™å‡ºæ›´ä¼˜ç¾çš„è¯—æ­Œï¼Œè€Œæ˜¯æ¯”æ‹¼è°èƒ½çœŸæ­£åµŒå…¥åˆ°Officeã€GitHub Copilotæˆ–è€…æ˜¯ä½ çš„ä»£ç ç¼–è¾‘å™¨é‡Œï¼Œæ›¿ä½ å¹²å®Œé‚£äº›æ¯ç‡¥çš„é‡å¤åŠ³åŠ¨ã€‚</p>
<p>å¯¹äºæˆ‘ä»¬æ‰“å·¥äººæ¥è¯´ï¼Œè¿™æ—¢æ˜¯ç¦éŸ³ä¹Ÿæ˜¯è­¦é’Ÿã€‚å¦‚æœå·¥å…·çœŸçš„èƒ½æ¯å‘¨å¸®ä½ çœä¸‹10å°æ—¶ï¼Œä½ æ˜¯ä¼šé€‰æ‹©ç”¨è¿™10å°æ—¶å»å­¦ä¹ ã€ä¼‘æ¯ï¼Œè¿˜æ˜¯ä¼šè¢«è€æ¿å¡è¿›æ›´å¤šçš„ä»»åŠ¡ï¼Ÿ</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.worldcodeing.com%2Fwp-content%2Fuploads%2F2025%2F12%2Ffwqfdsfggg.webp" target="_blank" title="https://blog.worldcodeing.com/wp-content/uploads/2025/12/fwqfdsfggg.webp" ref="nofollow noopener noreferrer"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/61cd8f1025df4d2280f10f312d4b3fd9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aKo6aOO5aaC6Zuq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766162934&amp;x-signature=IqKZLe8t7JUwTSlgmpizxYap36U%3D" alt="fwqfdsfggg" loading="lazy"/></a></p>
<p>æ— è®ºå¦‚ä½•ï¼Œå·¥å…·å·²ç»æ‘†åœ¨æ¡Œä¸Šäº†ï¼Œç”¨ä¸ç”¨ï¼Œæ€ä¹ˆç”¨ï¼Œå†³å®šæƒåœ¨ä½ ã€‚ç›®å‰è¿™å¥—ç³»ç»Ÿå·²ç»å¼€å§‹å‘Pluså’Œä¼ä¸šç‰ˆç”¨æˆ·é™†ç»­æ¨é€ï¼Œæƒ³ä½“éªŒçš„æœ‹å‹ï¼Œå¯ä»¥å»çœ‹çœ‹è‡ªå·±çš„è´¦å·æœ‰æ²¡æœ‰è¢«â€œç°åº¦â€åˆ°äº†ã€‚</p>
<p><strong>å¦‚æœä½ ä¹Ÿå¯¹æœ€æ–°çš„AIä¿¡æ¯æ„Ÿå…´è¶£æˆ–è€…æœ‰ç–‘é—® éƒ½å¯ä»¥åŠ å…¥æˆ‘çš„å¤§å®¶åº­ ç¬¬ä¸€æ—¶é—´åˆ†äº«æœ€æ–°AIèµ„è®¯ã€å·¥å…·ã€æ•™ç¨‹ã€æ–‡æ¡£ æ¬¢è¿ä½ çš„åŠ å…¥ï¼ï¼ï¼ğŸ˜‰ğŸ˜‰ğŸ˜‰</strong></p>
<p>å…¬ä¼—å·ï¼šå¢¨é£å¦‚é›ªå°ç«™</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€è½¬è½½ã€‘å¤§è§„æ¨¡çš„ code review å·²ç»å¤±æ•ˆã€‚è¿™æ˜¯æˆ‘ä»¬ä¿®å¤å®ƒçš„æ–¹æ³•ã€‚]]></title>    <link>https://juejin.cn/post/7582779306731667491</link>    <guid>https://juejin.cn/post/7582779306731667491</guid>    <pubDate>2025-12-12T17:40:06.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582779306731667491" data-draft-id="7582779306731651107" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€è½¬è½½ã€‘å¤§è§„æ¨¡çš„ code review å·²ç»å¤±æ•ˆã€‚è¿™æ˜¯æˆ‘ä»¬ä¿®å¤å®ƒçš„æ–¹æ³•ã€‚"/> <meta itemprop="keywords" content="AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2025-12-12T17:40:06.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ˜¯é­”ä¸¸å•Š"/> <meta itemprop="url" content="https://juejin.cn/user/3217622495411292"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€è½¬è½½ã€‘å¤§è§„æ¨¡çš„ code review å·²ç»å¤±æ•ˆã€‚è¿™æ˜¯æˆ‘ä»¬ä¿®å¤å®ƒçš„æ–¹æ³•ã€‚
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3217622495411292/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ˜¯é­”ä¸¸å•Š
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-12T17:40:06.000Z" title="Fri Dec 12 2025 17:40:06 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.augmentcode.com%2Fblog%2Fintroducing-augment-code-review" target="_blank" title="https://www.augmentcode.com/blog/introducing-augment-code-review" ref="nofollow noopener noreferrer">è½¬è½½</a></p>
<h3 data-id="heading-0">TL;DRï¼š</h3>
<p>ä»Šå¤©æˆ‘ä»¬æ¨å‡ºäº† <strong>Augment Code Review</strong>ã€‚ä¸“ä¸ºå¤§å‹çš„ã€é•¿æœŸç»´æŠ¤çš„ä»£ç åº“è€Œæ„å»ºï¼Œå®ƒèƒ½å¤Ÿæ•è·ç°æœ‰å·¥å…·é—æ¼çš„æ­£ç¡®æ€§ã€æ¶æ„å’Œè·¨ç³»ç»Ÿé—®é¢˜ï¼ŒåŒæ—¶æ˜¾è‘—å‡å°‘å™ªéŸ³ã€‚ç”± GPT-5.2 é©±åŠ¨ï¼ŒAugment åœ¨å”¯ä¸€å…¬å¼€çš„ AI è¾…åŠ© code review åŸºå‡†æµ‹è¯•ä¸­è¾¾åˆ°äº†æœ€é«˜å‡†ç¡®ç‡ï¼Œåœ¨æ•´ä½“è´¨é‡ä¸Šæ¯” Cursor Bugbotã€CodeRabbit ç­‰ç³»ç»Ÿé«˜å‡ºçº¦ 10 åˆ†ã€‚ä¼ä¸šå›¢é˜Ÿå’Œ OSS ç»´æŠ¤è€…å·²ç»åœ¨ä½¿ç”¨å®ƒæ¥æ›´å¿«åœ°å®Œæˆ reviews å¹¶å‡å°‘åˆ°è¾¾ç”Ÿäº§ç¯å¢ƒçš„ bugsã€‚</p>
<p><strong>Augment Code Review Agent</strong> ç°å·²å‘æ‰€æœ‰ <strong>Augment Code</strong> ç”¨æˆ·å¼€æ”¾ï¼Œæ‰€æœ‰ä»˜è´¹è®¡åˆ’å…è´¹è¯•ç”¨ä¸€å‘¨ã€‚å¼€æºé¡¹ç›®å¯ä»¥ç”³è¯·å…è´¹ä½¿ç”¨ <strong>Augment Code Review</strong>ã€‚è¦äº†è§£æ›´å¤šä¿¡æ¯ï¼Œè¯·æŸ¥çœ‹æˆ‘ä»¬çš„äº§å“é¡µé¢æˆ–é˜…è¯»æ–‡æ¡£ã€‚</p>
<h3 data-id="heading-1">Code review å·²ç»å¾ˆç—›è‹¦ã€‚AI è®©å®ƒå˜å¾—æ›´ç³Ÿã€‚</h3>
<p>AI å·²ç»æå¤§åœ°åŠ é€Ÿäº†ä»£ç åˆ›å»ºï¼šGoogle æŠ¥å‘Šç§°<strong>è¶…è¿‡ 25%</strong> çš„æ–°ä»£ç ç°åœ¨ç”± AI ç¼–å†™ï¼›Microsoft æŠ¥å‘Š<strong>è¶…è¿‡ 30%</strong>ã€‚ä½†ä¼ä¸šä¸­çš„ review å®¹é‡å¹¶æ²¡æœ‰è·Ÿä¸Šæ­¥ä¼ã€‚è¿™ç§ä¸åŒ¹é…å·²æˆä¸ºç°ä»£è½¯ä»¶å¼€å‘ä¸­æœ€å¤§çš„ç“¶é¢ˆä¹‹ä¸€ã€‚</p>
<p>æ¯ä¸ªå·¥ç¨‹ç»„ç»‡éƒ½çŸ¥é“è¿™äº›ç—‡çŠ¶ï¼š</p>
<ul>
<li>æœ€ä½³å®è·µå­˜åœ¨äºæ–‡æ¡£ã€Slack çº¿ç¨‹å’Œèµ„æ·±å·¥ç¨‹å¸ˆçš„å¤´è„‘ä¸­</li>
<li>ä½†å®ƒä»¬å¹¶æ²¡æœ‰æŒç»­åœ°åº”ç”¨åˆ°ä»£ç ä¸­</li>
<li>å›¢é˜Ÿç­‰å¾…æ•°å¤©æ‰èƒ½å¾—åˆ° review</li>
<li>ä»“ä¿ƒæˆ–è‚¤æµ…çš„ reviews æˆä¸ºè¿è¥é£é™©</li>
</ul>
<p>è´¢åŠ¡åæœæ˜¯çœŸå®çš„ï¼šå¹³å‡æ¯å°æ—¶æ•…éšœæˆæœ¬çº¦ 30 ä¸‡ç¾å…ƒï¼Œåœ¨å¤§ä¼ä¸šä¸­å¯èƒ½è¶…è¿‡æ¯å°æ—¶ 100 ä¸‡ç¾å…ƒã€‚è®¸å¤šæ•…éšœæºäºè½¯ä»¶é”™è¯¯ã€é…ç½®é”™è¯¯æˆ–ä¸å®Œæ•´çš„ reviewsã€‚</p>
<p>æˆ‘ä»¬æ„å»ºäº† <strong>Augment Code Review</strong> æ¥ä»æ ¹æœ¬ä¸Šè§£å†³è¿™ä¸ªé—®é¢˜ï¼šé€šè¿‡å¯¹æ¯ä¸ª PR æ‰§è¡Œæœ€ä½³å®è·µï¼ŒåŠæ—©æ•è·é«˜å½±å“é—®é¢˜ï¼Œå¹¶æ¢å¤åœ¨å¤æ‚ç³»ç»Ÿä¸­å·¥ä½œçš„å¼€å‘å›¢é˜Ÿçš„å·¥ä½œæµã€‚</p>
<h3 data-id="heading-2">ä¸ºä»€ä¹ˆç°æœ‰ AI review å·¥å…·è¡¨ç°ä¸ä½³</h3>
<p>GitHub Marketplace åˆ—å‡ºäº† <strong>77+ ä¸ª AI review bots</strong>ï¼Œä½†å®ƒä»¬éµå¾ªåŒæ ·æœ‰ç¼ºé™·çš„æ¨¡å¼ï¼š</p>
<p><em>æå– diff â†’ å‘é€ç»™ LLM â†’ ç”Ÿæˆå‡ åä¸ªè‚¤æµ…ã€å˜ˆæ‚çš„è¯„è®º</em></p>
<p>è¿™å¯¼è‡´ï¼š</p>
<ul>
<li><strong>ä½ç²¾ç¡®åº¦</strong>ï¼šå¤ªå¤šä¸ç›¸å…³çš„å»ºè®®</li>
<li><strong>ä½å¬å›ç‡</strong>ï¼šç”±äºç¼ºä¹ä¸Šä¸‹æ–‡è€Œé—æ¼çœŸæ­£çš„ bugs</li>
<li><strong>è‚¤æµ…çš„æ¨ç†</strong>ï¼šå¯¹æ¶æ„æˆ–è·¨æ–‡ä»¶è¡Œä¸ºæ²¡æœ‰ç†è§£</li>
</ul>
<p>å¼€å‘è€…ä¼šå¿½ç•¥å®ƒä»¬ã€‚</p>
<p>ä¸€ä¸ªçœŸæ­£çš„ review agent å¿…é¡»è¾¾åˆ°ä¸åŒçš„æ ‡å‡†ï¼šæ·±åº¦ä¸Šä¸‹æ–‡æ£€ç´¢ã€é«˜ä¿¡å·ã€ä»¥åŠèƒ½å¤Ÿæœ‰æ„ä¹‰åœ°å½±å“åˆå¹¶å†³ç­–çš„è¯„è®ºã€‚</p>
<h3 data-id="heading-3">Augment æ–¹æ³•ï¼šä¿¡å·èƒœè¿‡å™ªéŸ³ï¼Œä¸Šä¸‹æ–‡èƒœè¿‡çŒœæµ‹</h3>
<p>æˆ‘ä»¬çš„ç†å¿µå¾ˆç®€å•ï¼š</p>
<blockquote>
<p>å¦‚æœä¸€ä¸ªè¯„è®ºä¸å¤ªå¯èƒ½æ”¹å˜åˆå¹¶å†³ç­–ï¼Œæˆ‘ä»¬å°±ä¸ä¼šå‘å¸ƒå®ƒã€‚</p>
</blockquote>
<h4 data-id="heading-4"><strong>1. ä¸“æ³¨äºæ­£ç¡®æ€§å’Œæ¶æ„é—®é¢˜</strong></h4>
<p>Augment ä¼˜å…ˆå¤„ç† bugsã€å®‰å…¨æ¼æ´ã€è·¨ç³»ç»Ÿé™·é˜±ã€ä¸å˜é‡ã€å˜æ›´å½±å“é£é™©å’Œç¼ºå¤±æµ‹è¯•â€”â€”è€Œä¸æ˜¯é£æ ¼ç»†èŠ‚ã€‚</p>
<h4 data-id="heading-5"><strong>2. ç†è§£ä½ çš„æ•´ä¸ªä»£ç åº“</strong></h4>
<p>Augment æ£€ç´¢åœ¨å¤§å‹ã€é•¿æœŸç»´æŠ¤çš„ä»“åº“ä¸­è¯„ä¼°æ­£ç¡®æ€§æ‰€éœ€çš„å®Œæ•´è·¨æ–‡ä»¶ä¸Šä¸‹æ–‡ï¼šä¾èµ–é“¾ã€è°ƒç”¨ç‚¹ã€ç±»å‹å®šä¹‰ã€æµ‹è¯•ã€fixtures å’Œå†å²å˜æ›´ã€‚</p>
<p><strong>åŸºå‡†æµ‹è¯•æ˜¾ç¤ºç«å“å·¥å…·æ™®éé—æ¼äº†è¿™ä¸€ä¸Šä¸‹æ–‡ã€‚</strong></p>
<h4 data-id="heading-6"><strong>3. ç¼–ç ä½ å›¢é˜Ÿçš„ä¸“ä¸šçŸ¥è¯†</strong></h4>
<p>å›¢é˜Ÿä¸€æ¬¡æ€§å®šä¹‰è‡ªå®šä¹‰è§„åˆ™ï¼ŒAugment åœ¨ä»»ä½•åœ°æ–¹æ‰§è¡Œå®ƒä»¬ã€‚</p>
<h4 data-id="heading-7"><strong>4. äº†è§£ä½ çš„ç»„ç»‡çœŸæ­£é‡è§†ä»€ä¹ˆï¼ˆæ²¡æœ‰é…ç½®è”“å»¶ï¼‰</strong></h4>
<p>Augment æ ¹æ®ä½ çš„å¼€å‘è€…å¤„ç†æˆ–å¿½ç•¥å“ªäº›è¯„è®ºæ¥é€‚åº”ã€‚ç»“æœæ˜¯ï¼šéšç€æ—¶é—´çš„æ¨ç§»æé«˜ç²¾ç¡®åº¦ã€‚</p>
<h3 data-id="heading-8">å®¢æˆ·çœ‹åˆ°äº†ä»€ä¹ˆ</h3>
<p>Tekion å·¥ç¨‹é«˜çº§æ€»ç›‘ Jawahar Prasad æŠ¥å‘Šè¯´ï¼Œåœ¨ 10 æœˆå‘ä»–çš„ 1,400 åå·¥ç¨‹å¸ˆå›¢é˜Ÿæ¨å‡ºåï¼Œä»–çš„å›¢é˜Ÿå·²ç»çœ‹åˆ°äº† Augment Code Review çš„æœ‰æ„ä¹‰çš„ç»“æœï¼š</p>
<ul>
<li>å¹³å‡åˆå¹¶æ—¶é—´ä» 3 å¤© 4 å°æ—¶ä¸‹é™åˆ° 1 å¤© 7 å°æ—¶ ---&gt; åœ¨ Augment Code Review æ¨å‡ºååˆå¹¶é€Ÿåº¦æé«˜ 60%</li>
<li>é¦–æ¬¡äººå·¥ review çš„æ—¶é—´ä» 3 å¤©å‡å°‘åˆ° 1 å¤©ï¼Œå› ä¸º Augment å‡å°‘äº†å¼€å‘è€…çš„è®¤çŸ¥è´Ÿè·</li>
<li>åœ¨å·¥ç¨‹å¸ˆæ•°é‡ä¸å˜çš„æƒ…å†µä¸‹ï¼Œmerge requests åˆå¹¶æ•°é‡å¢åŠ äº† 21%</li>
</ul>
<p>MongoDB Atlas Clusters çš„é¦–å¸­å·¥ç¨‹å¸ˆ Tyler Kaye è¿™æ ·æè¿°å½±å“ï¼š</p>
<blockquote>
<p>"Augment å·²ç»æˆä¸ºæˆ‘ä»¬ code review æµç¨‹ä¸­å®è´µçš„éƒ¨åˆ†ã€‚å®ƒä¸ä¼šå–ä»£äººå·¥ reviewï¼›å®ƒé€šè¿‡åœ¨é˜Ÿå‹çœ‹åˆ°ä»£ç ä¹‹å‰ç»™ä½œè€…ä¸€ä¸ªæ·±æ€ç†Ÿè™‘çš„ç¬¬ä¸€é review æ¥å¢å¼ºå®ƒã€‚å®ƒçš„è‡ªå®šä¹‰æŒ‡å¯¼åŸåˆ™é›†æˆå°† MongoDB çš„æœ€ä½³å®è·µæ¨èä¸æˆ‘ä»¬è‡ªå·±ç»„ç»‡ç‰¹å®šçš„æŒ‡å¯¼ç›¸ç»“åˆï¼Œä½¿åé¦ˆæ—¢ç›¸å…³åˆå¯æ“ä½œã€‚å†…ç½®çš„å¯è§‚æµ‹æ€§å¸®åŠ©æˆ‘ä»¬äº†è§£ Augment æ­ç¤ºäº†å¤šå°‘è¯„è®ºä»¥åŠå®ƒä»¬è¢«è§£å†³çš„é¢‘ç‡ï¼Œè®©æˆ‘ä»¬å¯¹ä»£ç è´¨é‡è¶‹åŠ¿æœ‰æ›´æ¸…æ™°çš„æ´å¯Ÿã€‚å‡­å€Ÿå…¶é«˜ä¿¡å™ªæ¯”ï¼Œæ¯æ¡è¯„è®ºéƒ½æ„Ÿè§‰æœ‰æ„ä¹‰ã€‚Augment å¸®åŠ©å·¥ç¨‹å¸ˆä»¥æ›´æ¸…æ´ã€å‡†å¤‡æ›´å……åˆ†çš„ä»£ç æ¥è¿›è¡Œ reviewã€‚"</p>
</blockquote>
<p>è¿™æ­£æ˜¯æˆ‘ä»¬è®¾è®¡çš„ä½“éªŒï¼šä¸€ä¸ªå¯é çš„ç¬¬ä¸€é reviewerï¼Œæé«˜ä»£ç è´¨é‡å¹¶åŠ é€Ÿäººå·¥ reviewâ€”â€”è€Œä¸æ˜¯å–ä»£å®ƒã€‚</p>
<h3 data-id="heading-9">åŸºå‡†æµ‹è¯•ï¼šAugment é¢†å…ˆé¢†åŸŸ</h3>
<p>ä¸ºäº†éªŒè¯æ€§èƒ½ï¼Œæˆ‘ä»¬ä½¿ç”¨å”¯ä¸€å…¬å¼€çš„"é»„é‡‘è¯„è®º"æ•°æ®é›†è¯„ä¼°äº†ä¸ƒä¸ªå¹¿æ³›ä½¿ç”¨çš„ AI code review å·¥å…·â€”â€”è¿™äº›æ˜¯åˆæ ¼ reviewer ä¼šæ•è·çš„çœŸå®é—®é¢˜ã€‚</p>
<p>æˆ‘ä»¬æµ‹é‡äº†ç²¾ç¡®åº¦ï¼ˆä¿¡å·ï¼‰ã€å¬å›ç‡ï¼ˆè¦†ç›–ç‡ï¼‰å’Œ F åˆ†æ•°ï¼ˆæ•´ä½“è´¨é‡ï¼‰ã€‚</p>
<p>æŒ‰ F åˆ†æ•°æ’åºï¼š</p>





















































<table><thead><tr><th>å·¥å…·</th><th>ç²¾ç¡®åº¦</th><th>å¬å›ç‡</th><th>F åˆ†æ•°</th></tr></thead><tbody><tr><td>â­ <strong>Augment Code Review</strong></td><td>65%</td><td>55%</td><td>59%</td></tr><tr><td>Cursor Bugbot</td><td>60%</td><td>41%</td><td>49%</td></tr><tr><td>Greptile</td><td>45%</td><td>45%</td><td>45%</td></tr><tr><td>Codex Code Review</td><td>68%</td><td>29%</td><td>41%</td></tr><tr><td>CodeRabbit</td><td>36%</td><td>43%</td><td>39%</td></tr><tr><td>Claude Code</td><td>23%</td><td>51%</td><td>31%</td></tr><tr><td>GitHub Copilot</td><td>20%</td><td>34%</td><td>25%</td></tr></tbody></table>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/91f3878f569f48e7a11d9f2ad9d836d1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piv6a2U5Li45ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766166006&amp;x-signature=sG7XaFP55%2BDl9h%2FzunCMhgfS2o0%3D" alt="" loading="lazy"/></p>
<p><strong>Augment è¾¾åˆ°äº†æœ€é«˜å‡†ç¡®ç‡ï¼Œåœ¨æ•´ä½“è´¨é‡ä¸Šæ¯”æ¬¡ä¼˜å·¥å…·é«˜å‡ºçº¦ 10 åˆ†ã€‚</strong></p>
<p>å¤§å¤šæ•°å·¥å…·å¿…é¡»é€‰æ‹©ï¼š</p>
<ul>
<li><strong>é«˜å¬å›ç‡ä½†ä½ä¿¡å™ªæ¯”</strong>ï¼ˆClaudeã€Greptileï¼‰</li>
<li><strong>é«˜ç²¾ç¡®åº¦ä½†è‚¤æµ…è¦†ç›–</strong>ï¼ˆCodexã€Cursorï¼‰</li>
</ul>
<p><strong>Augment æ˜¯å”¯ä¸€ä¿æŒé«˜ç²¾ç¡®åº¦å’Œé«˜å¬å›ç‡çš„ç³»ç»Ÿ</strong>ï¼Œå› ä¸ºå®ƒæ£€ç´¢äº†æ·±åº¦æ¨ç†æ‰€éœ€çš„å®Œæ•´ã€æ­£ç¡®çš„ä¸Šä¸‹æ–‡ã€‚</p>
<h3 data-id="heading-10">ä¸ºè§„æ¨¡è€Œæ„å»ºçš„å®šä»·</h3>
<p><strong>Augment Code Review</strong> æ—¨åœ¨åœ¨ä¸ç ´åé¢„ç®—çš„æƒ…å†µä¸‹æä¾›ä»·å€¼ï¼š</p>
<ul>
<li><strong>å¹³å‡æ¯ä¸ª PR review æˆæœ¬ï¼š2,400 ç§¯åˆ†ï¼ˆçº¦ 1.50 ç¾å…ƒï¼‰</strong></li>
<li><strong>å¼€æºé¡¹ç›®å…è´¹</strong>â€”â€”æˆ‘ä»¬ç›¸ä¿¡æ”¯æŒé©±åŠ¨ç°ä»£è½¯ä»¶çš„ OSS ç¤¾åŒºã€‚è¦è·å–è®¿é—®æƒé™ï¼Œè¯·å‘æˆ‘ä»¬å‘é€æ‚¨çš„ OSS é¡¹ç›®é“¾æ¥ã€‚</li>
</ul>
<p>ä»æˆæœ¬è§’åº¦æ¥çœ‹ï¼šä¸€åé«˜çº§å·¥ç¨‹å¸ˆ review ä»£ç çš„æˆæœ¬ä¸ºæ¯å°æ—¶ 75-150 ç¾å…ƒä»¥ä¸Šï¼Œå…·ä½“å–å†³äºå¸‚åœºå’Œèµ„å†ã€‚å³ä½¿æ˜¯å¿«é€Ÿçš„ 10 åˆ†é’Ÿ reviewï¼Œåœ¨å®Œå…¨åŠ è½½æˆæœ¬ä¸‹ä¹Ÿéœ€è¦ 12-25 ç¾å…ƒï¼ˆGoogle çš„ç ”ç©¶æ˜¾ç¤ºå¤§å¤šæ•° code reviews éœ€è¦ 30 åˆ†é’Ÿæˆ–æ›´å¤šï¼‰ã€‚åœ¨æ¯ PR 1.50 ç¾å…ƒçš„ä»·æ ¼ä¸‹ï¼Œå¦‚æœ Augment æ¯æ¬¡ä¸ºæ‚¨çš„å›¢é˜ŸèŠ‚çœ 90 ç§’ï¼Œæˆ–è€…æ•è·äº†ä¸€ä¸ªéœ€è¦çƒ­ä¿®å¤ã€å›æ»šå’Œäº‹ååˆ†æçš„ç”Ÿäº§ bugï¼Œå°±èƒ½æ”¶å›æˆæœ¬ã€‚</p>
<p>æ•°å­¦å¾ˆç®€å•ï¼šæ›´å¿«çš„ reviewsã€ä¸ºæ‚¨çš„èµ„æ·±å·¥ç¨‹å¸ˆå‡å°‘ä¸Šä¸‹æ–‡åˆ‡æ¢ã€ä»¥åŠä»¥äººå·¥ review æ—¶é—´æˆæœ¬çš„ä¸€å°éƒ¨åˆ†å‡å°‘ç”Ÿäº§äº‹æ•…ã€‚</p>
<h3 data-id="heading-11">è¯•è¯•å®ƒ</h3>
<p>å¦‚æœæ‚¨ç›®å‰æ˜¯ <strong>Augment Code</strong> å®¢æˆ·ï¼Œæ‚¨å¯ä»¥åœ¨è¿™é‡Œé…ç½® Code Reviewï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fapp.augmentcode.com%2Fsettings%2Fcode-review" target="_blank" title="https://app.augmentcode.com/settings/code-review" ref="nofollow noopener noreferrer">app.augmentcode.com/settings/coâ€¦</a></p>
<ul>
<li><strong>å¦‚æœæ‚¨æ˜¯ä»˜è´¹ç”¨æˆ·</strong>ï¼šæ‚¨å¯ä»¥åœ¨ä¸‹å‘¨å…è´¹ä½¿ç”¨ Code Review</li>
<li><strong>å¦‚æœæ‚¨æ˜¯å…è´¹è¯•ç”¨ç”¨æˆ·</strong>ï¼šæ‚¨å¯ä»¥ä½¿ç”¨ Code Reviewï¼Œå®ƒä¼šæ¶ˆè€—æ‚¨çš„è¯•ç”¨ç§¯åˆ†</li>
<li><strong>å¦‚æœæ‚¨æ²¡æœ‰ Augment è´¦æˆ·</strong>ï¼šæ‚¨å¯ä»¥é€šè¿‡åˆ›å»ºè´¦æˆ·å¹¶æ¿€æ´»è¯•ç”¨æˆ–è·å¾—ä»˜è´¹è®¡åˆ’æ¥ä½¿ç”¨ Code Review</li>
<li><strong>å¦‚æœæ‚¨ç»´æŠ¤å¼€æºé¡¹ç›®</strong>ï¼šæ³¨å†Œ Augment Codeï¼Œç„¶åä¸ºæ‚¨çš„é¡¹ç›®è¯·æ±‚å…è´¹è®¿é—®</li>
</ul>
<p>å¦‚æœæ‚¨å‡†å¤‡å¥½ï¼š</p>
<ul>
<li>æ›´é«˜ä¿¡å·</li>
<li>æ›´å°‘ bugs</li>
<li>æ›´å¿«çš„ reviews</li>
<li>ä»¥åŠå”¯ä¸€è¢«è¯æ˜è¶…è¶Šé¢†åŸŸçš„ reviewer</li>
</ul>
<p>åªéœ€ 3 æ¬¡ç‚¹å‡»å³å¯ä¸º GitHub Cloud å®‰è£… <strong>Augment Code Review</strong> - é˜…è¯»æ–‡æ¡£äº†è§£æ›´å¤šä¿¡æ¯å¹¶ç«‹å³å¼€å§‹ã€‚</p>
<p>è®©æˆ‘ä»¬ä¿®å¤ code reviewã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€è½¬è½½ã€‘ä¸ºä»€ä¹ˆæˆ‘ä»¬é€‰æ‹©GPT-5.2ä½œä¸ºAugment Code Reviewçš„æ¨¡å‹]]></title>    <link>https://juejin.cn/post/7582845425401577512</link>    <guid>https://juejin.cn/post/7582845425401577512</guid>    <pubDate>2025-12-12T17:37:40.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582845425401577512" data-draft-id="7582776967818526720" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€è½¬è½½ã€‘ä¸ºä»€ä¹ˆæˆ‘ä»¬é€‰æ‹©GPT-5.2ä½œä¸ºAugment Code Reviewçš„æ¨¡å‹"/> <meta itemprop="keywords" content="AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2025-12-12T17:37:40.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ˜¯é­”ä¸¸å•Š"/> <meta itemprop="url" content="https://juejin.cn/user/3217622495411292"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€è½¬è½½ã€‘ä¸ºä»€ä¹ˆæˆ‘ä»¬é€‰æ‹©GPT-5.2ä½œä¸ºAugment Code Reviewçš„æ¨¡å‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3217622495411292/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ˜¯é­”ä¸¸å•Š
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-12T17:37:40.000Z" title="Fri Dec 12 2025 17:37:40 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.augmentcode.com%2Fblog%2Fwhy-gpt-5-2-is-our-model-of-choice-for-augment-code-review" target="_blank" title="https://www.augmentcode.com/blog/why-gpt-5-2-is-our-model-of-choice-for-augment-code-review" ref="nofollow noopener noreferrer">è½¬è½½</a></p>
<p>2025å¹´12æœˆ11æ—¥</p>
<p>Augment Code Reviewåœ¨å”¯ä¸€çš„AIè¾…åŠ©ä»£ç å®¡æŸ¥å…¬å…±åŸºå‡†æµ‹è¯•ä¸­å–å¾—äº†æœ€é«˜çš„å‡†ç¡®åº¦ï¼Œåœ¨æ•´ä½“è´¨é‡ä¸Šæ¯”Cursor Bugbotã€CodeRabbitç­‰å…¶ä»–ç³»ç»Ÿé«˜å‡ºçº¦10ä¸ªç™¾åˆ†ç‚¹ã€‚ä¸€ä¸ªå…³é”®åŸå› æ˜¯ä»€ä¹ˆï¼Ÿæˆ‘ä»¬é€‰æ‹©GPT-5.2ä½œä¸ºä»£ç å®¡æŸ¥çš„åŸºç¡€æ¨¡å‹â€”â€”ä»¥åŠæˆ‘ä»¬çš„æ¨¡å‹æ— å…³æ–¹æ³•è®©æˆ‘ä»¬èƒ½å¤Ÿä¸ºè½¯ä»¶å¼€å‘ç”Ÿå‘½å‘¨æœŸçš„æ¯ä¸ªé˜¶æ®µé€‰æ‹©æœ€ä½³å·¥å…·ã€‚Augment Code Reviewæœ€åˆåŸºäºGPT-5æ„å»ºï¼Œä½†éšç€æˆ‘ä»¬è§‚å¯Ÿåˆ°OpenAIæœ€æ–°æ¨ç†æ¨¡å‹çš„è´¨é‡æå‡ï¼Œæˆ‘ä»¬å‡çº§åˆ°äº†5.2ç‰ˆæœ¬ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/30a5de195b604413a0eb5fa7ec0823b6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piv6a2U5Li45ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766165860&amp;x-signature=d39ZzUV%2BLHc7Kc8wNNOM0cPWAKU%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0820b004cbb04aa295383e53778f195f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piv6a2U5Li45ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766165860&amp;x-signature=OgV9QeFaD%2FV1UfI3LiPXj6NDV64%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-0">ä»€ä¹ˆé€ å°±äº†ä¸€ä¸ªå‡ºè‰²çš„ä»£ç å®¡æŸ¥æ¨¡å‹ï¼Ÿ</h2>
<p>ä»£ç å®¡æŸ¥ä¸äº¤äº’å¼ç¼–ç æœ‰ç€æ ¹æœ¬ä¸åŒçš„è¦æ±‚ã€‚æœ‰ä¸‰ä¸ªä¸»è¦å› ç´ ä½¿ä¸€ä¸ªæ¨¡å‹åœ¨ä»£ç å®¡æŸ¥æ–¹é¢è¡¨ç°å‡ºè‰²ï¼š</p>
<p><strong>é¦–å…ˆï¼ŒåŸå§‹æ¨ç†èƒ½åŠ›ã€‚</strong> ç»™å®šä¸€æ®µä»£ç ï¼Œæ¨¡å‹èƒ½å¦æ·±å…¥æ¨ç†å…¶æ­£ç¡®æ€§ï¼Œè¯†åˆ«ç»†å¾®çš„bugï¼Œå¹¶ç†è§£æ¶æ„å½±å“ï¼Ÿ</p>
<p><strong>å…¶æ¬¡ï¼Œåœ¨agent harnessä¸­æœ‰æ•ˆçš„å·¥å…·ä½¿ç”¨ã€‚</strong> æœ€ä½³çš„ä»£ç å®¡æŸ¥éœ€è¦å…¨é¢çš„ä¸Šä¸‹æ–‡ï¼šä¾èµ–é“¾ã€è°ƒç”¨ç«™ç‚¹ã€ç±»å‹å®šä¹‰ã€æµ‹è¯•æ–‡ä»¶å’Œå†å²å˜æ›´ã€‚ä¸€ä¸ªå‡ºè‰²çš„å®¡æŸ¥æ¨¡å‹éœ€è¦åšå‡ºæ­£ç¡®çš„å·¥å…·è°ƒç”¨æ¥æ”¶é›†æ‰€æœ‰ç›¸å…³ä¿¡æ¯ï¼Œè€Œä¸ä»…ä»…æ˜¯å­¤ç«‹åœ°æ£€æŸ¥å·®å¼‚ã€‚</p>
<p><strong>ç¬¬ä¸‰ï¼Œå¼ºå¤§çš„æŒ‡ä»¤éµå¾ªèƒ½åŠ›ä»¥å¹³è¡¡precisionå’Œrecallã€‚</strong> æˆ‘ä»¬ä»”ç»†è°ƒä¼˜äº†promptsä¸­çš„æ¯ä¸€å¥è¯ï¼Œä»¥æ•è·æ­£ç¡®çš„é—®é¢˜é›†ï¼Œå¹¶åœ¨precisionå’Œrecallä¹‹é—´åšå‡ºæ­£ç¡®çš„æƒè¡¡ã€‚æ¨¡å‹éœ€è¦å¿ å®åœ°éµå¾ªè¿™äº›ç»†è‡´çš„æŒ‡ä»¤ï¼Œæ•è·çœŸæ­£çš„bugï¼ŒåŒæ—¶é¿å…ä½ä¿¡å™ªæ¯”çš„å¹²æ‰°ã€‚</p>
<h2 data-id="heading-1">ä¸ºä»€ä¹ˆGPT-5.2åœ¨ä»£ç å®¡æŸ¥æ–¹é¢è¡¨ç°å‡ºè‰²</h2>
<p>GPT-5.2åœ¨æ‰€æœ‰ä¸‰ä¸ªè¦æ±‚ä¸Šéƒ½è¡¨ç°å‡ºè‰²ã€‚å®ƒåœ¨è¿›è¡Œå½»åº•çš„å·¥å…·è°ƒç”¨æ¥æ‹‰å–å…¨é¢ä¸Šä¸‹æ–‡æ–¹é¢è¡¨ç°å‡ºè‰²ã€‚å®ƒæ¯”é’ˆå¯¹äº¤äº’é€Ÿåº¦ä¼˜åŒ–çš„æ¨¡å‹èŠ±è´¹æ›´å¤šæ—¶é—´å¹¶è¿›è¡Œæ›´å¤šæ¨ç†ï¼Œä½†è¿™æ­£æ˜¯æˆ‘ä»¬åœ¨å¼‚æ­¥ä»£ç å®¡æŸ¥ä¸­æƒ³è¦çš„â€”â€”åœ¨é‚£é‡Œæ­£ç¡®æ€§æ¯”å»¶è¿Ÿæ›´é‡è¦ã€‚</p>
<p>è¿™ç§æ·±æ€ç†Ÿè™‘ã€æ¨ç†å……åˆ†çš„æ–¹æ³•ä¸Augmentçš„Context Engineå®Œç¾é…åˆã€‚GPT-5.2æŒç»­æ£€ç´¢è¯„ä¼°å¤§å‹ã€é•¿æœŸä»£ç åº“ä¸­æ­£ç¡®æ€§æ‰€éœ€çš„æ­£ç¡®ä¾èµ–é¡¹ã€è°ƒç”¨ç«™ç‚¹å’Œè·¨æ–‡ä»¶å…³ç³»ã€‚å®ƒèƒ½æ•è·éœ€è¦æ·±åº¦æ¨ç†çš„é‚£ç±»è·¨ç³»ç»Ÿé—®é¢˜å’Œæ¶æ„é—®é¢˜ï¼šé‚£äº›çœŸæ­£å¯¼è‡´äº‹æ•…çš„bugã€‚</p>
<h2 data-id="heading-2">ä¸ºä»€ä¹ˆåœ¨ä»£ç å®¡æŸ¥ä¸­é€‰æ‹©GPT-5.2è€Œä¸æ˜¯Sonnet</h2>
<p>æˆ‘ä»¬å¹¿æ³›è¯„ä¼°äº†GPTå’ŒAnthropicçš„Sonnetæ¨¡å‹ç³»åˆ—ç”¨äºä»£ç å®¡æŸ¥ã€‚è™½ç„¶Sonnetæ¨¡å‹åœ¨äº¤äº’å¼ç”¨ä¾‹æ–¹é¢è¡¨ç°å‡ºè‰²ï¼Œä»¥æ›´ä½çš„å»¶è¿Ÿæä¾›å¿«é€Ÿã€é«˜è´¨é‡çš„å“åº”ï¼Œä½†GPT-5.2åœ¨æˆ‘ä»¬çš„å¼‚æ­¥ä»£ç å®¡æŸ¥å·¥ä½œè´Ÿè½½ä¸­è¢«è¯æ˜æ›´ä¼˜ç§€ã€‚</p>
<p>å…³é”®å·®å¼‚å½’ç»“ä¸ºä¼˜åŒ–ç›®æ ‡ã€‚Sonnetæ¨¡å‹é’ˆå¯¹äº¤äº’å¼åœºæ™¯è¿›è¡Œäº†ä¼˜åŒ–ï¼šå¿«é€Ÿè¿­ä»£ã€å¯¹è¯æµç¨‹å’Œå¿«é€Ÿåé¦ˆå¾ªç¯ã€‚å½“å¼€å‘è€…åœ¨ç­‰å¾…å“åº”æ—¶ï¼Œå®ƒä»¬è¡¨ç°å‡ºè‰²ã€‚ä½†ä»£ç å®¡æŸ¥æ ¹æœ¬ä¸åŒã€‚å®ƒæ˜¯å¼‚æ­¥çš„ï¼Œä¸éœ€è¦ç«‹å³å“åº”ï¼Œå¹¶å—ç›Šäºæ›´æ·±ã€æ›´è¯¦å°½çš„æ¨ç†ã€‚</p>
<p>GPT-5.2èŠ±è´¹æ›´å¤šæ—¶é—´å¹¶åšå‡ºæ›´å¤šå·¥å…·è°ƒç”¨ï¼Œä½†äº§ç”Ÿæ›´å……åˆ†æ¨ç†çš„åˆ†æã€‚å¯¹äºä»£ç å®¡æŸ¥æ¥è¯´ï¼Œè¿™ç§æƒè¡¡æ˜¯å®Œå…¨æ­£ç¡®çš„ã€‚æˆ‘ä»¬å®æ„¿ç­‰å¾…é¢å¤–çš„30ç§’æ¥æ•è·ä¸€ä¸ªå¾®å¦™çš„å¹¶å‘bugï¼Œä¹Ÿä¸æ„¿å¾—åˆ°ä¸€ä¸ªå¿«é€Ÿä½†è‚¤æµ…çš„å®¡æŸ¥ï¼Œé”™è¿‡è·¨ç³»ç»Ÿé—®é¢˜ã€‚</p>
<p>è¿™ä¸æ˜¯å¯¹æ¨¡å‹è´¨é‡çš„åˆ¤æ–­ã€‚ä¸¤ä¸ªç³»åˆ—åœ¨å®ƒä»¬ä¼˜åŒ–çš„é¢†åŸŸéƒ½è¡¨ç°å“è¶Šã€‚è¿™æ˜¯å…³äºå°†æ­£ç¡®çš„æ¨¡å‹åŒ¹é…åˆ°æ­£ç¡®çš„ç”¨ä¾‹ã€‚åœ¨æˆ‘ä»¬IDEä¸­çš„äº¤äº’å¼ç¼–ç ä¸­ï¼ŒSonnetçš„é€Ÿåº¦ä¼˜åŠ¿å¾ˆé‡è¦ã€‚å¯¹äºä»£ç å®¡æŸ¥ï¼ŒGPT-5.2çš„æ·±æ€ç†Ÿè™‘çš„æ¨ç†è·èƒœã€‚</p>
<h2 data-id="heading-3">Augmentçš„ä¼˜åŠ¿ï¼šè®¾è®¡ä¸Šæ¨¡å‹æ— å…³</h2>
<p>Augmentçš„æ ¸å¿ƒä¼˜åŠ¿ä¹‹ä¸€æ˜¯æˆ‘ä»¬æ˜¯æ¨¡å‹æ— å…³çš„ã€‚</p>
<p>éšç€æ¨¡å‹çš„ä¸æ–­å‘å±•ï¼Œæˆ‘ä»¬å¯ä»¥ä¸ºæ¯ä¸ªç‰¹å®šå·¥ä½œé‡‡ç”¨æœ€ä½³å·¥å…·ã€‚è¿™ç§åŠ¡å®çš„ã€ç”¨ä¾‹é©±åŠ¨çš„æ–¹æ³•æ˜¯æˆ‘ä»¬å¦‚ä½•ä¿æŒåŸºå‡†é¢†å…ˆçš„æ€§èƒ½ï¼ŒåŒæ—¶ä¸ºå¼€å‘äººå‘˜åœ¨å¼€å‘çš„æ¯ä¸ªé˜¶æ®µæä¾›æœ€ä½³ä½“éªŒã€‚</p>
<p>é‰´äºGPT-5.2åœ¨ä»£ç å®¡æŸ¥ä¸­çš„å¼ºåŠ²è¡¨ç°ï¼Œæˆ‘ä»¬çš„å›¢é˜Ÿç›®å‰æ­£åœ¨è¯„ä¼°æ˜¯å¦åœ¨æ¨¡å‹é€‰æ‹©å™¨ä¸­ä¸ºé€šç”¨ä»£ç ç”Ÿæˆç”¨ä¾‹æä¾›å®ƒã€‚è¯¥æ¨¡å‹è¯¦å°½çš„æ¨ç†æ–¹æ³•éœ€è¦é’ˆå¯¹äº¤äº’å¼å·¥ä½œæµç¨‹è¿›è¡Œä¸€äº›é¢å¤–çš„è°ƒä¼˜ï¼Œä½†æˆ‘ä»¬æ­£åœ¨æ¢ç´¢å¦‚ä½•å°†å…¶èƒ½åŠ›å¸¦åˆ°å¼€å‘ç”Ÿå‘½å‘¨æœŸçš„æ›´å¤šéƒ¨åˆ†ã€‚</p>
<p>å‡†å¤‡çœ‹åˆ°GPT-5.2é©±åŠ¨çš„ä»£ç å®¡æŸ¥å®é™…è¿è¡Œäº†å—ï¼Ÿ
Augment Code Reviewç°å·²ä¸ºæ‰€æœ‰Augment Codeç”¨æˆ·å¯ç”¨ã€‚<a href="https://link.juejin.cn?target=https%3A%2F%2Faugmentcode.com%2Fproduct%2Fcode-review" target="_blank" title="https://augmentcode.com/product/code-review" ref="nofollow noopener noreferrer">äº†è§£æ›´å¤š â†’</a>æˆ–<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.augmentcode.com%2Fblog%2Fwe-benchmarked-7-ai-code-review-tools-on-real-world-prs-here-are-the-results" target="_blank" title="https://www.augmentcode.com/blog/we-benchmarked-7-ai-code-review-tools-on-real-world-prs-here-are-the-results" ref="nofollow noopener noreferrer">é˜…è¯»å®Œæ•´çš„åŸºå‡†æµ‹è¯•åˆ†æ â†’</a></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0f710c1803f742edb6f49dc4dc38f077~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piv6a2U5Li45ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766165860&amp;x-signature=4uMN5lUddHUI8FcCjN68n8TIUR0%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-4">Akshay Utture</h4>
<p>Akshay Uttureæ„å»ºæ™ºèƒ½agentsï¼Œä½¿è½¯ä»¶å¼€å‘æ›´å¿«ã€æ›´å®‰å…¨ã€æ›´å¯é ã€‚åœ¨Augment Codeï¼Œä»–é¢†å¯¼å…¬å¸AI Code Review agentèƒŒåçš„å·¥ç¨‹å·¥ä½œï¼Œå°†ç ”ç©¶çº§ç¨‹åºåˆ†æå’Œç°ä»£GenAIæŠ€æœ¯ç»“åˆèµ·æ¥ï¼Œè‡ªåŠ¨åŒ–SDLCä¸­æœ€è€—æ—¶çš„éƒ¨åˆ†ä¹‹ä¸€ã€‚åœ¨åŠ å…¥Augmentä¹‹å‰ï¼ŒAkshayåœ¨UberèŠ±è´¹äº†å‡ å¹´æ—¶é—´æ¨è¿›è‡ªåŠ¨ä»£ç å®¡æŸ¥å’Œä¿®å¤ç³»ç»Ÿï¼Œå¹¶åœ¨AWSçš„Automated Reasoning Groupã€Googleçš„Android Static Analysiså›¢é˜Ÿå’ŒUCLAè¿›è¡Œç ”ç©¶ã€‚ä»–çš„å·¥ä½œå¤„äºAIã€è½¯ä»¶å·¥ç¨‹å’Œç¼–ç¨‹è¯­è¨€ç†è®ºçš„äº¤å‰ç‚¹ã€‚</p>
<h2 data-id="heading-5">æå‡ä½ çš„ç¼–ç èƒ½åŠ›</h2>
<p>ä¿®å¤bugã€ç¼–å†™æµ‹è¯•ã€æ›´å¿«äº¤ä»˜</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.augmentcode.com%2Finstall" target="_blank" title="https://www.augmentcode.com/install" ref="nofollow noopener noreferrer">å¼€å§‹ä½ çš„å…è´¹è¯•ç”¨</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€è½¬è½½ã€‘æˆ‘ä»¬åœ¨å¤§å‹å¼€æºé¡¹ç›®ä¸Šå¯¹ 7 ä¸ª AI ä»£ç å®¡æŸ¥å·¥å…·è¿›è¡Œäº†åŸºå‡†æµ‹è¯•ã€‚ä»¥ä¸‹æ˜¯ç»“æœã€‚]]></title>    <link>https://juejin.cn/post/7582779306731634723</link>    <guid>https://juejin.cn/post/7582779306731634723</guid>    <pubDate>2025-12-12T17:39:00.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582779306731634723" data-draft-id="7582776967818543104" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€è½¬è½½ã€‘æˆ‘ä»¬åœ¨å¤§å‹å¼€æºé¡¹ç›®ä¸Šå¯¹ 7 ä¸ª AI ä»£ç å®¡æŸ¥å·¥å…·è¿›è¡Œäº†åŸºå‡†æµ‹è¯•ã€‚ä»¥ä¸‹æ˜¯ç»“æœã€‚"/> <meta itemprop="keywords" content="AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2025-12-12T17:39:00.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ˜¯é­”ä¸¸å•Š"/> <meta itemprop="url" content="https://juejin.cn/user/3217622495411292"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€è½¬è½½ã€‘æˆ‘ä»¬åœ¨å¤§å‹å¼€æºé¡¹ç›®ä¸Šå¯¹ 7 ä¸ª AI ä»£ç å®¡æŸ¥å·¥å…·è¿›è¡Œäº†åŸºå‡†æµ‹è¯•ã€‚ä»¥ä¸‹æ˜¯ç»“æœã€‚
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3217622495411292/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ˜¯é­”ä¸¸å•Š
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-12T17:39:00.000Z" title="Fri Dec 12 2025 17:39:00 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.augmentcode.com%2Fblog%2Fwe-benchmarked-7-ai-code-review-tools-on-real-world-prs-here-are-the-results" target="_blank" title="https://www.augmentcode.com/blog/we-benchmarked-7-ai-code-review-tools-on-real-world-prs-here-are-the-results" ref="nofollow noopener noreferrer">è½¬è½½</a></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1a7830dd11284ef8ac60ebe9407521b1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piv6a2U5Li45ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766165939&amp;x-signature=hAKzbtwK9W%2BK2HxgTVUyvOui1IA%3D" alt="" loading="lazy"/></p>
<p><strong>2025å¹´12æœˆ11æ—¥</strong></p>
<h2 data-id="heading-0">TL;DR</h2>
<p>æˆ‘ä»¬åœ¨å”¯ä¸€çš„ AI è¾…åŠ©ä»£ç å®¡æŸ¥å…¬å…±åŸºå‡†æµ‹è¯•ä¸Šè¯„ä¼°äº†ä¸ƒä¸ªæœ€å¹¿æ³›ä½¿ç”¨çš„ AI ä»£ç å®¡æŸ¥å·¥å…·ã€‚<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.augmentcode.com%2Fcodereview%2Foverview" target="_blank" title="https://docs.augmentcode.com/codereview/overview" ref="nofollow noopener noreferrer">Augment Code Review</a>ï¼Œç”± GPT-5.2 é©±åŠ¨ï¼Œä»¥æ˜¾è‘—ä¼˜åŠ¿äº¤ä»˜äº†æœ€å¼ºçš„æ€§èƒ½ã€‚å®ƒçš„å®¡æŸ¥æ—¢å…·æœ‰æ›´é«˜çš„ç²¾ç¡®åº¦ï¼Œåˆå…·æœ‰å¤§å¹…æ›´é«˜çš„å¬å›ç‡ï¼Œè¿™å¾—ç›Šäºå…¶ç‹¬ç‰¹å¼ºå¤§çš„ Context Engineï¼Œèƒ½å¤ŸæŒç»­æ£€ç´¢æ­£ç¡®çš„æ–‡ä»¶ã€ä¾èµ–é¡¹å’Œè°ƒç”¨ç«™ç‚¹ã€‚è™½ç„¶è®¸å¤šå·¥å…·ç”±äºæœ‰é™çš„ä¸Šä¸‹æ–‡è€Œäº§ç”Ÿå˜ˆæ‚çš„è¯„è®ºæˆ–é—æ¼å…³é”®é—®é¢˜ï¼Œä½† Augment ä½œä¸ºå”¯ä¸€èƒ½å¤Ÿå¯é åœ°åœ¨æ•´ä¸ªä»£ç åº“ä¸­è¿›è¡Œæ¨ç†å¹¶å‘ç°äººç±»å®¡æŸ¥è€…çœŸæ­£å…³å¿ƒçš„é—®é¢˜çš„ç³»ç»Ÿè€Œè„±é¢–è€Œå‡ºã€‚ç®€è€Œè¨€ä¹‹ï¼šå¦‚æœä½ æƒ³è¦æ„Ÿè§‰åƒé«˜çº§å·¥ç¨‹å¸ˆè€Œä¸æ˜¯ lint æœºå™¨äººçš„ AI å®¡æŸ¥ï¼ŒAugment Code Review æ˜¯æ˜æ˜¾çš„é¢†å¯¼è€…ï¼Œå¹¶ä¸”<a href="https://link.juejin.cn?target=https%3A%2F%2Faugmentcode.com%2Fblog%2Fintroducing-augment-code-review" target="_blank" title="https://augmentcode.com/blog/introducing-augment-code-review" ref="nofollow noopener noreferrer">ä»Šå¤©å¯¹æ‰€æœ‰ Augment Code å®¢æˆ·æ™®éå¯ç”¨</a>ã€‚</p>
<h2 data-id="heading-1">çœŸæ­£çš„æµ‹è¯•ï¼šæ•è·é”™è¯¯è€Œä¸åˆ¶é€ å™ªéŸ³</h2>
<p>AI ä»£ç å®¡æŸ¥å·¥å…·è¢«è¥é”€ä¸ºå¿«é€Ÿã€å‡†ç¡®å’Œä¸Šä¸‹æ–‡æ„ŸçŸ¥çš„ã€‚ä½†å¼€å‘äººå‘˜çŸ¥é“çœŸæ­£çš„æµ‹è¯•æ˜¯è¿™äº›ç³»ç»Ÿæ˜¯å¦èƒ½å¤Ÿåœ¨ PR ä¸­æ•è·æœ‰æ„ä¹‰çš„é—®é¢˜è€Œä¸ä¼šè¢«å™ªéŸ³æ·¹æ²¡ã€‚ä¸ºäº†äº†è§£è¿™äº›å·¥å…·åœ¨å®è·µä¸­å¦‚ä½•è¡¨ç°ï¼Œæˆ‘ä»¬ä½¿ç”¨å”¯ä¸€çš„ AI ä»£ç å®¡æŸ¥å…¬å…±æ•°æ®é›†è¯„ä¼°äº†ä¸ƒä¸ªé¢†å…ˆçš„ AI å®¡æŸ¥ç³»ç»Ÿã€‚ç»“æœæ¸…æ¥šåœ°è¡¨æ˜ï¼Œè™½ç„¶è®¸å¤šå·¥å…·åœ¨å˜ˆæ‚æˆ–ä¸å®Œæ•´çš„åˆ†ææ–¹é¢æŒ£æ‰ï¼Œä½†ä¸€ä¸ªå·¥å…·â€”â€”Augment Code Reviewâ€”â€”æ˜æ˜¾ä¼˜äºå…¶ä»–å·¥å…·ã€‚</p>
<h2 data-id="heading-2">ä»£ç å®¡æŸ¥è´¨é‡å¦‚ä½•è¡¡é‡</h2>
<p>å¦‚æœå®¡æŸ¥è¯„è®ºä¸<strong>é»„é‡‘è¯„è®º</strong>åŒ¹é…ï¼Œåˆ™è¢«è®¤ä¸ºæ˜¯<strong>æ­£ç¡®çš„</strong>ï¼šå³ä¸€ä¸ªåˆæ ¼çš„äººç±»å®¡æŸ¥è€…é¢„æœŸä¼šæ•è·çš„åŸºç¡€äº‹å®é—®é¢˜ã€‚é»„é‡‘è¯„è®ºåæ˜ çš„æ˜¯çœŸå®æ­£ç¡®æ€§æˆ–æ¶æ„é—®é¢˜ï¼Œè€Œä¸æ˜¯é£æ ¼ä¸Šçš„å¹æ¯›æ±‚ç–µã€‚</p>
<p>æ¯ä¸ªå·¥å…·çš„è¯„è®ºè¢«æ ‡è®°ä¸ºï¼š</p>
<ul>
<li><strong>çœŸé˜³æ€§ï¼š</strong> åŒ¹é…é»„é‡‘è¯„è®º</li>
<li><strong>å‡é˜³æ€§ï¼š</strong> ä¸æ­£ç¡®æˆ–æ— å…³çš„è¯„è®º</li>
<li><strong>å‡é˜´æ€§ï¼š</strong> å·¥å…·é—æ¼çš„é»„é‡‘è¯„è®º</li>
</ul>
<p>ä»è¿™äº›åˆ†ç±»ä¸­æˆ‘ä»¬è®¡ç®—ï¼š</p>
<ul>
<li><strong>ç²¾ç¡®åº¦ï¼š</strong> å·¥å…·çš„å¯ä¿¡åº¦</li>
<li><strong>å¬å›ç‡ï¼š</strong> å·¥å…·çš„å…¨é¢æ€§</li>
<li><strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fen.wikipedia.org%2Fwiki%2FF-score" target="_blank" title="https://en.wikipedia.org/wiki/F-score" ref="nofollow noopener noreferrer">F-score</a>ï¼š</strong> æ•´ä½“è´¨é‡</li>
</ul>
<p>é«˜ç²¾ç¡®åº¦ä¿æŒå¼€å‘äººå‘˜çš„å‚ä¸åº¦ï¼›é«˜å¬å›ç‡æ˜¯ä½¿å·¥å…·çœŸæ­£æœ‰ç”¨çš„åŸå› ã€‚åªæœ‰å…·æœ‰å¼ºå¤§ä¸Šä¸‹æ–‡æ£€ç´¢èƒ½åŠ›çš„ç³»ç»Ÿæ‰èƒ½åŒæ—¶å®ç°ä¸¤è€…ã€‚</p>
<h2 data-id="heading-3">åŸºå‡†æµ‹è¯•ç»“æœ</h2>
<p>ä»¥ä¸‹æ˜¯ç»“æœï¼ŒæŒ‰ F-score æ’åºâ€”â€”æ•´ä½“å®¡æŸ¥è´¨é‡çš„æœ€ä½³å•ä¸€è¡¡é‡æ ‡å‡†ï¼š</p>





















































<table><thead><tr><th>å·¥å…·</th><th>ç²¾ç¡®åº¦</th><th>å¬å›ç‡</th><th>F-score</th></tr></thead><tbody><tr><td>Augment Code Review</td><td>65%</td><td>55%</td><td>59%</td></tr><tr><td>Cursor Bugbot</td><td>60%</td><td>41%</td><td>49%</td></tr><tr><td>Greptile</td><td>45%</td><td>45%</td><td>45%</td></tr><tr><td>Codex Code Review</td><td>68%</td><td>29%</td><td>41%</td></tr><tr><td>CodeRabbit</td><td>36%</td><td>43%</td><td>39%</td></tr><tr><td>Claude Code</td><td>23%</td><td>51%</td><td>31%</td></tr><tr><td>GitHub Copilot</td><td>20%</td><td>34%</td><td>25%</td></tr></tbody></table>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/47878a546329411cb2aff484a45e72f3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piv6a2U5Li45ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766165939&amp;x-signature=kicCkiMy4HrHdQcIEESjyfnZZWE%3D" alt="" loading="lazy"/></p>
<p>**Augment Code Review ä»¥æœ‰æ„ä¹‰çš„ä¼˜åŠ¿äº¤ä»˜æœ€é«˜çš„ F-scoreï¼Œ**é‡è¦çš„æ˜¯ï¼Œå®ƒæ˜¯æå°‘æ•°èƒ½å¤ŸåŒæ—¶å®ç°é«˜ç²¾ç¡®åº¦å’Œé«˜å¬å›ç‡çš„å·¥å…·ä¹‹ä¸€ã€‚å®ç°è¿™ç§å¹³è¡¡æå…¶å›°éš¾ï¼šæ¨åŠ¨æ›´é«˜å¬å›ç‡çš„å·¥å…·å¾€å¾€ä¼šå˜å¾—å˜ˆæ‚ï¼Œè€Œä¸ºç²¾ç¡®åº¦è°ƒæ•´çš„å·¥å…·é€šå¸¸ä¼šé—æ¼å¤§é‡çœŸå®é—®é¢˜ã€‚ä¾‹å¦‚ï¼ŒClaude Code ç°åœ¨è¾¾åˆ°äº†å¤§çº¦ 51% çš„å¬å›ç‡â€”â€”æ¥è¿‘ Augment çš„å¬å›ç‡â€”â€”ä½†å…¶ç²¾ç¡®åº¦è¦ä½å¾—å¤šï¼Œå¯¼è‡´å¤§é‡ä¸æ­£ç¡®æˆ–ä½ä»·å€¼çš„è¯„è®ºã€‚è¿™ç§ä¿¡å™ªæ¯”æƒè¡¡æ˜¯ AI ä»£ç å®¡æŸ¥çš„æ ¸å¿ƒæŒ‘æˆ˜ã€‚</p>
<p>**å¼€å‘äººå‘˜ä¸ä¼šé‡‡ç”¨ç”¨å™ªéŸ³æ·¹æ²¡ PR çš„å·¥å…·ã€‚**é€šè¿‡åœ¨å®ç°è¯„ä¼°ä¸­æœ€é«˜å¬å›ç‡çš„åŒæ—¶ä¿æŒå¼ºç²¾ç¡®åº¦ï¼ŒAugment åœ¨å®è·µä¸­æä¾›äº†å®è´¨ä¸Šæ›´é«˜çš„ä¿¡å·å’Œæ›´å¯ç”¨çš„å®¡æŸ¥ä½“éªŒã€‚</p>
<h3 data-id="heading-4">ä¸ºä»€ä¹ˆå¬å›ç‡æ˜¯æœ€éš¾çš„å‰æ²¿ï¼Œä»¥åŠä¸ºä»€ä¹ˆ Augment é¢†å…ˆ</h3>
<p>ç²¾ç¡®åº¦å¯ä»¥é€šè¿‡è¿‡æ»¤å’Œä¿å®ˆçš„å¯å‘å¼æ–¹æ³•æ¥æé«˜ï¼Œä½†å¬å›ç‡éœ€è¦ä¸€äº›æ ¹æœ¬ä¸Šæ›´éš¾çš„ä¸œè¥¿ï¼š<strong>æ­£ç¡®ã€å®Œæ•´å’Œæ™ºèƒ½çš„ä¸Šä¸‹æ–‡æ£€ç´¢ã€‚</strong></p>
<p>å¤§å¤šæ•°å·¥å…·æœªèƒ½æ£€ç´¢åˆ°ï¼š</p>
<ul>
<li>è¯„ä¼°æ­£ç¡®æ€§æ‰€éœ€çš„ä¾èµ–æ¨¡å—</li>
<li>å½±å“å¯ç©ºæ€§æˆ–ä¸å˜é‡çš„ç±»å‹å®šä¹‰</li>
<li>è·¨æ–‡ä»¶çš„è°ƒç”¨è€…/è¢«è°ƒç”¨è€…é“¾</li>
<li>ç›¸å…³çš„æµ‹è¯•æ–‡ä»¶å’Œå›ºä»¶</li>
<li>æ¥è‡ªå…ˆå‰æ›´æ”¹çš„å†å²ä¸Šä¸‹æ–‡</li>
</ul>
<p>è¿™äº›å·®è·å¯¼è‡´é—æ¼é”™è¯¯â€”â€”ä¸æ˜¯å› ä¸ºæ¨¡å‹æ— æ³•å¯¹å®ƒä»¬è¿›è¡Œæ¨ç†ï¼Œè€Œæ˜¯å› ä¸ºæ¨¡å‹ä»æœªçœ‹åˆ°ç›¸å…³çš„ä»£ç ã€‚</p>
<p><strong>Augment Code Review æˆåŠŸæ˜¯å› ä¸ºå®ƒæŒç»­åœ°æµ®ç°æ­£ç¡®çš„ä¸Šä¸‹æ–‡ã€‚</strong></p>
<p>æˆ‘ä»¬çš„æ£€ç´¢å¼•æ“æå–äº†æ¨¡å‹æ¨ç†è·¨æ–‡ä»¶é€»è¾‘ã€API å¥‘çº¦ã€å¹¶å‘è¡Œä¸ºå’Œå¾®å¦™ä¸å˜é‡æ‰€éœ€çš„æ–‡ä»¶å’Œå…³ç³»çš„ç¡®åˆ‡é›†åˆã€‚è¿™ç›´æ¥è½¬åŒ–ä¸ºæ›´é«˜çš„å¬å›ç‡ï¼Œè€Œæ— éœ€ç‰ºç‰²ç²¾ç¡®åº¦ã€‚</p>
<h3 data-id="heading-5">ä¸ºä»€ä¹ˆä¸€äº›å·¥å…·è¡¨ç°æ›´å¥½ï¼ˆä»¥åŠä¸ºä»€ä¹ˆ Augment è¡¨ç°æœ€ä½³ï¼‰</h3>
<p>åœ¨æ‰€æœ‰ä¸ƒä¸ªå·¥å…·ä¸­ï¼Œä¸‰ä¸ªå› ç´ å†³å®šäº†æ€§èƒ½â€”â€”è€Œ Augment åœ¨æ¯ä¸ªæ–¹é¢éƒ½è¡¨ç°å‡ºè‰²ã€‚</p>
<h4 data-id="heading-6">1. å“è¶Šçš„ Context Engine</h4>
<p>è¿™æ˜¯å·®å¼‚åŒ–å› ç´ ã€‚Augment æŒç»­æ£€ç´¢äº†æ­£ç¡®çš„ä¾èµ–é“¾ã€è°ƒç”¨ç«™ç‚¹ã€ç±»å‹å®šä¹‰ã€æµ‹è¯•å’Œç›¸å…³æ¨¡å—â€”â€”æ·±åº¦æ¨ç†æ‰€éœ€çš„åŸå§‹ææ–™ã€‚æ²¡æœ‰å…¶ä»–ç³»ç»Ÿåœ¨ä¸Šä¸‹æ–‡ç»„è£…æ–¹é¢å±•ç¤ºå‡ºå¯æ¯”è¾ƒçš„å‡†ç¡®æ€§æˆ–å®Œæ•´æ€§ã€‚</p>
<h4 data-id="heading-7">2. æ¨¡å‹ã€æç¤ºå’Œå·¥å…·çš„æœ€ä½³ç»„åˆ</h4>
<p>ä»å¼ºå¤§çš„åº•å±‚ä»£ç†å¼€å§‹æ˜¯è‰¯å¥½ä»£ç å®¡æŸ¥çš„å…³é”®è¦æ±‚ã€‚è®¾è®¡è‰¯å¥½çš„ä»£ç†å¾ªç¯ã€ä¸Šä¸‹æ–‡å·¥ç¨‹ã€ä¸“é—¨çš„ä»£ç†å·¥å…·å’Œè¯„ä¼°åœ¨æ„å»ºçŸ¥é“å¦‚ä½•å¯¼èˆªä½ çš„ä»£ç åº“ã€ç½‘ç»œç­‰å¹¶æ”¶é›†å…¨é¢å®¡æŸ¥æ‰€éœ€ä¿¡æ¯çš„ä»£ç†æ–¹é¢å¤§æœ‰å¸®åŠ©ã€‚</p>
<h4 data-id="heading-8">3. ä¸“ç”¨ä»£ç å®¡æŸ¥è°ƒä¼˜</h4>
<p>Augment åº”ç”¨ç‰¹å®šé¢†åŸŸçš„é€»è¾‘æ¥æŠ‘åˆ¶ lint çº§åˆ«çš„æ··ä¹±å¹¶ä¸“æ³¨äºæ­£ç¡®æ€§é—®é¢˜ã€‚è¿™åœ¨é¿å…å…¶ä»–å·¥å…·ä¸­å¸¸è§çš„åƒåœ¾è¡Œä¸ºçš„åŒæ—¶ä¿æŒäº†é«˜ä¿¡å·ã€‚</p>
<p>è€Œä¸”ï¼ŒAugment Code Review éšç€æ—¶é—´æ¨ç§»è€Œè°ƒä¼˜ã€‚æˆ‘ä»¬èƒ½å¤Ÿè®¡ç®— Augment å‘å¸ƒçš„æ¯æ¡è¯„è®ºæ˜¯å¦ç”±äººç±»å¼€å‘äººå‘˜å¤„ç†ã€‚è¿™äº›æ•°æ®å¸®åŠ©æˆ‘ä»¬ä¸“é—¨åŒ–å’Œè°ƒä¼˜æˆ‘ä»¬çš„ä»£ç†å·¥å…·ã€æç¤ºå’Œä¸Šä¸‹æ–‡ï¼Œä»¥æŒç»­æ”¹è¿›æˆ‘ä»¬çš„ä»£ç å®¡æŸ¥æœåŠ¡ã€‚</p>
<p>ç»¼åˆèµ·æ¥ï¼Œè¿™äº›å› ç´ äº§ç”Ÿäº†æœ€é«˜çš„ç²¾ç¡®åº¦ã€æœ€é«˜çš„å¬å›ç‡å’Œæœ€å¼ºçš„æ•´ä½“ F-scoreã€‚</p>
<h3 data-id="heading-9">åŸºå‡†æµ‹è¯•æ•°æ®é›†</h3>
<p>åŸºå‡†æµ‹è¯•è·¨è¶Šäº”ä¸ªæ•°ç™¾ä¸‡è¡Œçš„å¼€æºä»£ç åº“çš„ 50 ä¸ª pull requestï¼ŒåŒ…æ‹¬ Sentryã€Grafanaã€Cal.comã€Discourse å’Œ Keycloakã€‚è¿™äº›å­˜å‚¨åº“ä»£è¡¨äº†çœŸå®ä¸–ç•Œçš„å·¥ç¨‹å¤æ‚æ€§ï¼šå¤šæ¨¡å—æ¶æ„ã€è·¨æ–‡ä»¶ä¸å˜é‡ã€æ·±åº¦ä¾èµ–æ ‘å’Œéå¹³å‡¡çš„æµ‹è¯•å¥—ä»¶ã€‚åœ¨è¿™ç§ä»£ç ä¸Šè¯„ä¼° AI å®¡æŸ¥è€…æ˜¯ç¡®å®šå®ƒä»¬è¡Œä¸ºåƒé«˜çº§å·¥ç¨‹å¸ˆè¿˜æ˜¯æµ…å±‚ linter çš„å”¯ä¸€æ–¹æ³•ã€‚</p>
<h3 data-id="heading-10">æˆ‘ä»¬å¦‚ä½•æ”¹è¿›æ•°æ®é›†</h3>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fai-code-review-evaluation" target="_blank" title="https://github.com/ai-code-review-evaluation" ref="nofollow noopener noreferrer">åŸå§‹å…¬å…±æ•°æ®é›†</a>æ˜¯æ— ä»·çš„ï¼Œä½†ä¸å®Œæ•´ã€‚è®¸å¤š PR åŒ…å«å¤šä¸ªæœ‰æ„ä¹‰çš„é—®é¢˜ï¼Œè¿™äº›é—®é¢˜åœ¨é»„é‡‘é›†ä¸­ç¼ºå¤±ï¼Œä½¿å¾—æ— æ³•å‡†ç¡®æµ‹é‡å¬å›ç‡å’Œç²¾ç¡®åº¦ã€‚æˆ‘ä»¬é€šè¿‡æ‰‹åŠ¨å®¡æŸ¥æ¯ä¸ª PRã€éªŒè¯é—®é¢˜å¹¶æ ¹æ®å·¥å…·è¾“å‡ºéªŒè¯å®ƒä»¬æ¥æ‰©å±•å’Œçº æ­£é»„é‡‘è¯„è®ºã€‚æˆ‘ä»¬è¿˜è°ƒæ•´äº†ä¸¥é‡æ€§ï¼Œä»¥ä¾¿çç¢çš„å»ºè®®ä¸ä¼šå¤¸å¤§åˆ†æ•°æˆ–ä¸å…¬å¹³åœ°æƒ©ç½šå·¥å…·ã€‚</p>
<p>æ‰€æœ‰çº æ­£çš„æ•°æ®å’Œè„šæœ¬éƒ½åœ¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fai-code-review-evaluations" target="_blank" title="https://github.com/ai-code-review-evaluations" ref="nofollow noopener noreferrer">GitHub ä¸Šå¼€æº</a>ã€‚</p>
<h3 data-id="heading-11">ç»“è®º</h3>
<p>AI ä»£ç å®¡æŸ¥å‘å±•è¿…é€Ÿï¼Œä½†å·¥å…·ä¹‹é—´çš„å·®è·æ¯”è¥é”€é¡µé¢æ‰€æš—ç¤ºçš„è¦å¤§ã€‚å¤§å¤šæ•°ç³»ç»Ÿéš¾ä»¥æ£€ç´¢æ•è·æœ‰æ„ä¹‰é—®é¢˜æ‰€éœ€çš„ä¸Šä¸‹æ–‡ï¼Œå¯¼è‡´ä½å¬å›ç‡å’Œæ„Ÿè§‰æµ…è–„æˆ–å˜ˆæ‚çš„å®¡æŸ¥ã€‚AI ä»£ç å®¡æŸ¥ä¸­å®šä¹‰æ€§æŒ‘æˆ˜ä¸æ˜¯ç”Ÿæˆâ€”â€”è€Œæ˜¯ä¸Šä¸‹æ–‡ï¼šç»„è£…æ­£ç¡®çš„æ–‡ä»¶ã€ä¾èµ–é¡¹å’Œä¸å˜é‡ï¼Œä»¥ä¾¿æ¨¡å‹èƒ½å¤Ÿåƒç»éªŒä¸°å¯Œçš„å·¥ç¨‹å¸ˆä¸€æ ·æ¨ç†ã€‚</p>
<p>**Augment Code Review æ˜¯æ­¤è¯„ä¼°ä¸­å”¯ä¸€æŒç»­è¾¾åˆ°è¯¥æ ‡å‡†çš„å·¥å…·ã€‚**æˆ‘ä»¬çš„ Context Engine å®ç°äº†è¿œé«˜äºé¢†åŸŸå…¶ä½™éƒ¨åˆ†çš„å¬å›ç‡ï¼Œå…¶ç²¾ç¡®åº¦ä¿æŒäº†é«˜ä¿¡å·ã€‚Augment äº§ç”Ÿçš„è¯„è®ºæ„Ÿè§‰æ˜¯å®è´¨æ€§çš„ã€æ¶æ„æ€§çš„å’ŒçœŸæ­£æœ‰ç”¨çš„â€”â€”æ›´æ¥è¿‘é«˜çº§é˜Ÿå‹è€Œä¸æ˜¯è‡ªåŠ¨åŒ–åŠ©æ‰‹ã€‚éšç€ä»£ç åº“çš„å¢é•¿å’Œå›¢é˜Ÿè¦æ±‚æ›´æ·±å…¥çš„è‡ªåŠ¨åŒ–ï¼ŒæŒæ¡ä¸Šä¸‹æ–‡çš„å·¥å…·å°†å®šä¹‰è½¯ä»¶å¼€å‘çš„ä¸‹ä¸€ä¸ªæ—¶ä»£ã€‚æŒ‰ç…§è¿™ä¸ªè¡¡é‡æ ‡å‡†ï¼ŒAugment Code å·²ç»é¥é¥é¢†å…ˆã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e27cdacbeaca4e88a69dbad6a035d26f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piv6a2U5Li45ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766165939&amp;x-signature=bnvWcZwIBquqHXoGZtoQGS2LGCk%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-12">Akshay Utture</h4>
<p>Akshay Utture æ„å»ºä½¿è½¯ä»¶å¼€å‘æ›´å¿«ã€æ›´å®‰å…¨ã€æ›´å¯é çš„æ™ºèƒ½ä»£ç†ã€‚åœ¨ Augment Codeï¼Œä»–é¢†å¯¼å…¬å¸ AI Code Review ä»£ç†çš„å·¥ç¨‹å·¥ä½œï¼Œå°†ç ”ç©¶çº§ç¨‹åºåˆ†æå’Œç°ä»£ GenAI æŠ€æœ¯ç»“åˆèµ·æ¥ï¼Œè‡ªåŠ¨åŒ– SDLC ä¸­æœ€è€—æ—¶çš„éƒ¨åˆ†ä¹‹ä¸€ã€‚åœ¨åŠ å…¥ Augment ä¹‹å‰ï¼ŒAkshay åœ¨ Uber èŠ±äº†å‡ å¹´æ—¶é—´æ¨è¿›è‡ªåŠ¨åŒ–ä»£ç å®¡æŸ¥å’Œä¿®å¤ç³»ç»Ÿï¼Œå¹¶åœ¨ AWS çš„ Automated Reasoning Groupã€Google çš„ Android Static Analysis team å’Œ UCLA è¿›è¡Œç ”ç©¶ã€‚ä»–çš„å·¥ä½œä½äº AIã€è½¯ä»¶å·¥ç¨‹å’Œç¼–ç¨‹è¯­è¨€ç†è®ºçš„äº¤å‰ç‚¹ã€‚</p>
<h3 data-id="heading-13">æå‡ä½ çš„ç¼–ç èƒ½åŠ›</h3>
<p>ä¿®å¤é”™è¯¯ã€ç¼–å†™æµ‹è¯•ã€æ›´å¿«å‘å¸ƒ</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.augmentcode.com%2Finstall" target="_blank" title="https://www.augmentcode.com/install" ref="nofollow noopener noreferrer">å¼€å§‹å…è´¹è¯•ç”¨</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Gopher å¸¦ä½ å­¦ Agent è®¾è®¡æ¨¡å¼ï¼šä¸€å¥—ä¸çƒ§è„‘çš„æ™ºèƒ½ç³»ç»Ÿæ„å»ºæŒ‡å—]]></title>    <link>https://juejin.cn/post/7582779306731470883</link>    <guid>https://juejin.cn/post/7582779306731470883</guid>    <pubDate>2025-12-12T15:05:57.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582779306731470883" data-draft-id="7582776967818067968" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Gopher å¸¦ä½ å­¦ Agent è®¾è®¡æ¨¡å¼ï¼šä¸€å¥—ä¸çƒ§è„‘çš„æ™ºèƒ½ç³»ç»Ÿæ„å»ºæŒ‡å—"/> <meta itemprop="keywords" content="AIGC,Agent"/> <meta itemprop="datePublished" content="2025-12-12T15:05:57.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ²¡å¤šå°‘é€»è¾‘"/> <meta itemprop="url" content="https://juejin.cn/user/2717648475395325"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Gopher å¸¦ä½ å­¦ Agent è®¾è®¡æ¨¡å¼ï¼šä¸€å¥—ä¸çƒ§è„‘çš„æ™ºèƒ½ç³»ç»Ÿæ„å»ºæŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2717648475395325/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ²¡å¤šå°‘é€»è¾‘
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-12T15:05:57.000Z" title="Fri Dec 12 2025 15:05:57 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    8
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æ˜¯å¦è§‰å¾— Agentï¼ˆæ™ºèƒ½ä»£ç†ï¼‰çš„æ¦‚å¿µå¤æ‚éš¾æ‡‚ï¼Ÿåˆ«æ‹…å¿ƒï¼Œè¿™ç¯‡æŒ‡å—ä¸ºä½ æç‚¼äº† Agent è®¾è®¡æ¨¡å¼çš„æ ¸å¿ƒæ¦‚å¿µï¼Œæ‹’ç»çƒ§è„‘ï¼Œä¸»æ‰“è½»æ¾æ˜“æ‡‚ã€‚æˆ‘ä»¬å°† Agent çš„å­¦ä¹ ä¹‹æ—…åˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µï¼š<strong>ç†å¿µã€ç»„ä»¶ã€æ¶æ„</strong>ã€‚è®©æˆ‘ä»¬è·Ÿéš Gopher çš„è„šæ­¥ï¼Œä¸€èµ·æ¢ç´¢æ™ºèƒ½ç³»ç»Ÿæ„å»ºçš„ä¸–ç•Œå§ï¼</p>
<hr/>
<h2 data-id="heading-0">ç¬¬ä¸€éƒ¨åˆ†ï¼šç†å¿µç¯‡ (The Philosophy)</h2>
<p>åœ¨å¼€å§‹æ„å»º Agent ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆç†è§£æ™ºèƒ½ä»£ç†çš„æœ¬è´¨ã€‚Agent é¦–å…ˆæ˜¯ä¸€ç§è®¾è®¡æ€æƒ³ï¼Œå…¶æ¬¡æ‰æ˜¯æŠ€æœ¯å®ç°ã€‚</p>
<h3 data-id="heading-1">â‘  ä¸ºä»€ä¹ˆéœ€è¦ Agent è®¾è®¡æ¨¡å¼ï¼Ÿ</h3>
<p>æƒ³è±¡ä¸€ä¸‹ï¼Œä½ æ­£åœ¨å¼€å‘ä¸€ä¸ªå®¢æœç³»ç»Ÿã€‚ä¼ ç»Ÿåšæ³•æ˜¯å†™ä¸€å † if-elseï¼šå¦‚æœç”¨æˆ·é—®ä»·æ ¼å°±å›ç­”ä»·æ ¼ï¼Œå¦‚æœé—®é€€è´§å°±å›ç­”é€€è´§æ”¿ç­–...ä½†ç”¨æˆ·çš„é—®é¢˜åƒå¥‡ç™¾æ€ªï¼Œä½ çš„ if-else å¾ˆå¿«å°±å˜æˆäº†ä¸€ä¸ªå·¨å¤§çš„æ„å¤§åˆ©é¢æ¡ä»£ç ã€‚</p>
<p>Agent è®¾è®¡æ¨¡å¼å°±æ˜¯æ¥è§£å†³è¿™ä¸ªé—®é¢˜çš„ã€‚å®ƒè®©ç³»ç»Ÿåƒä¸€ä¸ªçœŸæ­£çš„æ™ºèƒ½åŠ©æ‰‹ä¸€æ ·ï¼š<strong>èƒ½è§‚å¯Ÿã€ä¼šæ€è€ƒã€å¯è¡ŒåŠ¨</strong>ã€‚ä¸å†æ˜¯æ­»æ¿çš„è§„åˆ™åŒ¹é…ï¼Œè€Œæ˜¯çœŸæ­£çš„æ™ºèƒ½å†³ç­–ã€‚</p>
<p>ç®€å•è¯´ï¼ŒAgent å°±æ˜¯è®©ä½ çš„ç¨‹åºå˜èªæ˜çš„è®¾è®¡æ–¹æ³•ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6624d423772b43cfa153de6c7720db7b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rKh5aSa5bCR6YC76L6R:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766157587&amp;x-signature=qTr6E3hWVEALEiHWJ5XBQJ1J0Jc%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-2">â‘¡ ç¯å¢ƒï¼ˆEnvironmentï¼‰</h3>
<p>å°±åƒäººéœ€è¦çœ¼ç›çœ‹ä¸–ç•Œä¸€æ ·ï¼ŒAgent ä¹Ÿéœ€è¦çŸ¥é“è‡ªå·±èº«å¤„ä»€ä¹ˆç¯å¢ƒã€‚</p>
<p>ç¯å¢ƒåŒ…æ‹¬ä¸‰ä¸ªè¦ç´ ï¼š</p>
<ul>
<li><strong>èƒ½çœ‹åˆ°ä»€ä¹ˆ</strong>ï¼šæ•°æ®åº“çŠ¶æ€ã€ç”¨æˆ·è¾“å…¥ã€ç³»ç»Ÿæ—¥å¿—ç­‰</li>
<li><strong>èƒ½åšä»€ä¹ˆ</strong>ï¼šè°ƒç”¨ APIã€å‘é€æ¶ˆæ¯ã€æ›´æ–°æ•°æ®ç­‰</li>
<li><strong>åšäº†ä¹‹åä¼šæ€æ ·</strong>ï¼šæ“ä½œçš„ç»“æœå’Œåé¦ˆ</li>
</ul>
<p>æ¯”å¦‚ä¸€ä¸ªäº¤æ˜“ Agentï¼Œå®ƒçš„ç¯å¢ƒå°±æ˜¯è‚¡ç¥¨å¸‚åœºï¼šèƒ½çœ‹åˆ°ä»·æ ¼å˜åŒ–ï¼Œèƒ½æ‰§è¡Œä¹°å–æ“ä½œï¼Œèƒ½æ”¶åˆ°æˆäº¤ç¡®è®¤ã€‚æ²¡æœ‰æ¸…æ™°çš„ç¯å¢ƒå®šä¹‰ï¼ŒAgent å°±åƒç›²äººæ‘¸è±¡ï¼Œæ ¹æœ¬ä¸çŸ¥é“è¯¥å¹²ä»€ä¹ˆã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c34f1b1a20ed4d83bcc696f6ee1e9d0c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rKh5aSa5bCR6YC76L6R:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766157587&amp;x-signature=APv87qIBO3TRS90Y9O53E9vN2KI%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-3">â‘¢ ç›®æ ‡å¯¼å‘ï¼ˆGoal-Orientedï¼‰</h3>
<p>æ²¡æœ‰ç›®æ ‡çš„ Agent å°±åƒæ²¡æœ‰å¯¼èˆªçš„å¸æœºï¼Œå¯èƒ½æŠ€æœ¯å¾ˆå¥½ï¼Œä½†ä¸çŸ¥é“è¦å»å“ªé‡Œã€‚</p>
<p>ç›®æ ‡ç»™äº† Agent æ–¹å‘æ„Ÿã€‚æ¯”å¦‚ï¼š</p>
<ul>
<li>å®¢æœ Agent çš„ç›®æ ‡ï¼šè®©ç”¨æˆ·æ»¡æ„åœ°è§£å†³é—®é¢˜</li>
<li>æ¨è Agent çš„ç›®æ ‡ï¼šæé«˜ç”¨æˆ·çš„ç‚¹å‡»ç‡å’Œè´­ä¹°ç‡</li>
<li>ç›‘æ§ Agent çš„ç›®æ ‡ï¼šåŠæ—¶å‘ç°å¹¶æŠ¥å‘Šç³»ç»Ÿå¼‚å¸¸</li>
</ul>
<p>æœ‰äº†æ˜ç¡®ç›®æ ‡ï¼ŒAgent çš„æ¯ä¸ªå†³ç­–éƒ½æœ‰äº†è¯„åˆ¤æ ‡å‡†ï¼šè¿™ä¸ªè¡ŒåŠ¨èƒ½å¸®æˆ‘æ›´æ¥è¿‘ç›®æ ‡å—ï¼Ÿè¿™æ · Agent å°±ä¸ä¼šåšæ— ç”¨åŠŸï¼Œæ‰€æœ‰åŠªåŠ›éƒ½æŒ‡å‘åŒä¸€ä¸ªæ–¹å‘ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ae62a4d703c344ba87dea82e09921240~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rKh5aSa5bCR6YC76L6R:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766157587&amp;x-signature=SdI3FgKhsGhQC7Vih2yugD5UIeE%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-4">ç¬¬äºŒéƒ¨åˆ†ï¼šç»„ä»¶ç¯‡ (Components Design)</h2>
<p>å½“ç†è§£äº† Agent çš„ç†å¿µåï¼Œæˆ‘ä»¬éœ€è¦å…·ä½“çš„"ç»„ä»¶"æ¥æ„å»ºæ™ºèƒ½ä»£ç†ç³»ç»Ÿã€‚</p>
<h3 data-id="heading-5">â‘  æ„ŸçŸ¥å™¨ï¼ˆPerceiverï¼‰</h3>
<p>æ„ŸçŸ¥å™¨å°±æ˜¯ Agent çš„"çœ¼ç›å’Œè€³æœµ"ï¼Œè´Ÿè´£æ”¶é›†å¤–ç•Œä¿¡æ¯ã€‚</p>
<p>æƒ³è±¡ä½ åœ¨å¼€å‘ä¸€ä¸ªæ™ºèƒ½å®¢æœ Agentã€‚æ„ŸçŸ¥å™¨çš„å·¥ä½œå°±æ˜¯ï¼š</p>
<ul>
<li>è¯»å–ç”¨æˆ·çš„æ¶ˆæ¯å†…å®¹</li>
<li>åˆ†æç”¨æˆ·çš„æƒ…ç»ªï¼ˆç”Ÿæ°”ã€å›°æƒ‘ã€æ»¡æ„ï¼‰</li>
<li>è·å–ç”¨æˆ·çš„å†å²è®°å½•</li>
<li>æ£€æŸ¥å½“å‰ç³»ç»ŸçŠ¶æ€</li>
</ul>
<p>æ„ŸçŸ¥å™¨ä¸åªæ˜¯ç®€å•åœ°"çœ‹"ï¼Œè¿˜è¦"ç†è§£"ã€‚å®ƒæŠŠæ‚ä¹±çš„åŸå§‹æ•°æ®ï¼ˆæ–‡å­—ã€æ•°å­—ã€æ—¥å¿—ï¼‰è½¬æ¢æˆ Agent èƒ½æ‡‚çš„ç»“æ„åŒ–ä¿¡æ¯ã€‚å°±åƒæŠŠ"ç”¨æˆ·è¯´ï¼šæˆ‘çš„è®¢å•æ€ä¹ˆè¿˜æ²¡åˆ°ï¼Ÿ"è½¬æ¢æˆ"ç”¨æˆ·è¯¢é—®ï¼šè®¢å•çŠ¶æ€ï¼Œæƒ…ç»ªï¼šç„¦è™‘"ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/04802d82616c4cb3b1c45ea20e18d625~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rKh5aSa5bCR6YC76L6R:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766157587&amp;x-signature=F9NwElpN69lLNb%2FEMqg1sTlXfxo%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-6">â‘¡ å†³ç­–å™¨ï¼ˆDecision Makerï¼‰</h3>
<p>å†³ç­–å™¨æ˜¯ Agent çš„"å¤§è„‘"ï¼Œè´Ÿè´£æ€è€ƒå’Œé€‰æ‹©ã€‚</p>
<p>å½“æ„ŸçŸ¥å™¨å‘Šè¯‰å†³ç­–å™¨"ç”¨æˆ·å¾ˆç„¦è™‘åœ°è¯¢é—®è®¢å•çŠ¶æ€"æ—¶ï¼Œå†³ç­–å™¨å¼€å§‹å·¥ä½œï¼š</p>
<ol>
<li><strong>åˆ†ææƒ…å†µ</strong>ï¼šç”¨æˆ·ç„¦è™‘ + è¯¢é—®è®¢å• = éœ€è¦å¿«é€Ÿå®‰æŠšå¹¶æä¾›ä¿¡æ¯</li>
<li><strong>è€ƒè™‘é€‰é¡¹</strong>ï¼šç›´æ¥æŸ¥è¯¢è®¢å•ï¼Ÿå…ˆé“æ­‰å†æŸ¥è¯¢ï¼Ÿè½¬äººå·¥å®¢æœï¼Ÿ</li>
<li><strong>è¯„ä¼°åæœ</strong>ï¼šå“ªç§æ–¹å¼æœ€èƒ½è¾¾æˆ"è®©ç”¨æˆ·æ»¡æ„"çš„ç›®æ ‡ï¼Ÿ</li>
<li><strong>åšå‡ºå†³å®š</strong>ï¼šé€‰æ‹©"å…ˆè¡¨ç¤ºç†è§£ç”¨æˆ·å¿ƒæƒ…ï¼Œç„¶åç«‹å³æŸ¥è¯¢è®¢å•çŠ¶æ€"</li>
</ol>
<p>å¥½çš„å†³ç­–å™¨ä¸æ˜¯ç®€å•çš„è§„åˆ™å¼•æ“ï¼Œè€Œæ˜¯èƒ½æƒè¡¡å¤šç§å› ç´ ã€é¢„æµ‹ç»“æœçš„æ™ºèƒ½ç³»ç»Ÿã€‚</p>
<h3 data-id="heading-7">â‘¢ æ‰§è¡Œå™¨ï¼ˆActuatorï¼‰</h3>
<p>æ‰§è¡Œå™¨æ˜¯ Agent çš„"æ‰‹è„š"ï¼ŒæŠŠæƒ³æ³•å˜æˆè¡ŒåŠ¨ã€‚</p>
<p>å†³ç­–å™¨è¯´"è¦å…ˆå®‰æŠšç”¨æˆ·å†æŸ¥è¯¢è®¢å•"ï¼Œæ‰§è¡Œå™¨å°±å¼€å§‹å¹²æ´»ï¼š</p>
<ol>
<li><strong>è°ƒç”¨æ¶ˆæ¯ API</strong>ï¼šå‘é€"æˆ‘ç†è§£æ‚¨çš„ç€æ€¥å¿ƒæƒ…ï¼Œæ­£åœ¨ä¸ºæ‚¨æŸ¥è¯¢è®¢å•çŠ¶æ€"</li>
<li><strong>è°ƒç”¨è®¢å• API</strong>ï¼šæ ¹æ®ç”¨æˆ· ID æŸ¥è¯¢æœ€æ–°è®¢å•ä¿¡æ¯</li>
<li><strong>è°ƒç”¨ç‰©æµ API</strong>ï¼šè·å–åŒ…è£¹çš„å®æ—¶ä½ç½®</li>
<li><strong>å†æ¬¡è°ƒç”¨æ¶ˆæ¯ API</strong>ï¼šå‘é€è¯¦ç»†çš„è®¢å•å’Œç‰©æµä¿¡æ¯</li>
</ol>
<p>æ‰§è¡Œå™¨è¦å¤„ç†å„ç§æ„å¤–æƒ…å†µï¼šAPI è°ƒç”¨å¤±è´¥æ€ä¹ˆåŠï¼Ÿç½‘ç»œè¶…æ—¶æ€ä¹ˆåŠï¼Ÿå®ƒéœ€è¦æœ‰é‡è¯•æœºåˆ¶ã€é”™è¯¯å¤„ç†ï¼Œç¡®ä¿å†³ç­–èƒ½å¤Ÿå¯é åœ°æ‰§è¡Œã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/82a0b621afc04ed39109f8cb1088cf72~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rKh5aSa5bCR6YC76L6R:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766157587&amp;x-signature=6IYgvnfgBvfWAyEOmuHYe56C%2FFo%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-8">â‘£ è®°å¿†æ¨¡å—ï¼ˆMemoryï¼‰</h3>
<p>è®°å¿†æ¨¡å—è®© Agent ä»ç»éªŒä¸­å­¦ä¹ ï¼Œè¶Šç”¨è¶Šèªæ˜ã€‚</p>
<p>æƒ³è±¡ä¸€ä¸ªæ–°æ‰‹å®¢æœå’Œè€æ‰‹å®¢æœçš„åŒºåˆ«ï¼š</p>
<ul>
<li><strong>æ–°æ‰‹</strong>ï¼šæ¯æ¬¡éƒ½è¦æŸ¥æ‰‹å†Œï¼Œä¸çŸ¥é“ç”¨æˆ·çš„å†å²é—®é¢˜ï¼Œå¤„ç†é€Ÿåº¦æ…¢</li>
<li><strong>è€æ‰‹</strong>ï¼šè®°å¾—å¸¸è§é—®é¢˜çš„è§£å†³æ–¹æ¡ˆï¼ŒçŸ¥é“ç”¨æˆ·çš„åå¥½ï¼Œèƒ½å¿«é€Ÿå®šä½é—®é¢˜</li>
</ul>
<p>Agent çš„è®°å¿†æ¨¡å—å°±æ˜¯è¿™ä¸ªâ€œç»éªŒç§¯ç´¯â€çš„è¿‡ç¨‹ï¼š</p>
<ul>
<li><strong>çŸ­æœŸè®°å¿†</strong>ï¼šå½“å‰å¯¹è¯çš„ä¸Šä¸‹æ–‡ï¼Œç”¨æˆ·åˆšæ‰è¯´äº†ä»€ä¹ˆ</li>
<li><strong>é•¿æœŸè®°å¿†</strong>ï¼šç”¨æˆ·çš„å†å²äº¤äº’è®°å½•ï¼Œåå¥½å’Œä¹ æƒ¯</li>
<li><strong>çŸ¥è¯†è®°å¿†</strong>ï¼šå­¦åˆ°çš„è§£å†³æ–¹æ¡ˆå’Œæœ€ä½³å®è·µ</li>
</ul>
<p>æœ‰äº†è®°å¿†ï¼ŒAgent å°±èƒ½åšåˆ°â€œä¸ªæ€§åŒ–æœåŠ¡â€å’Œâ€œæŒç»­æ”¹è¿›â€ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a0fb61b4a0eb4eb3a1f3c17771eded2d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rKh5aSa5bCR6YC76L6R:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766157587&amp;x-signature=LQYqtWvXucGnoDiN2ChE4PwcqMI%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-9">â‘¤ é€šä¿¡æ¥å£ï¼ˆCommunication Interfaceï¼‰</h3>
<p>é€šä¿¡æ¥å£è®© Agent èƒ½å¤Ÿä¸å¤–ç•Œâ€œå¯¹è¯â€ï¼Œä¸å†æ˜¯å­¤å²›ã€‚</p>
<p>Agent éœ€è¦ä¸å„ç§å¯¹è±¡æ²Ÿé€šï¼š</p>
<ul>
<li><strong>ä¸ç”¨æˆ·æ²Ÿé€š</strong>ï¼šæ¥æ”¶æŒ‡ä»¤ï¼Œåé¦ˆç»“æœï¼ŒæŠ¥å‘Šè¿›åº¦</li>
<li><strong>ä¸å…¶ä»– Agent æ²Ÿé€š</strong>ï¼šåä½œå®Œæˆå¤æ‚ä»»åŠ¡ï¼Œå…±äº«ä¿¡æ¯</li>
<li><strong>ä¸ç³»ç»Ÿæ²Ÿé€š</strong>ï¼šæŠ¥å‘ŠçŠ¶æ€ï¼Œè¯·æ±‚èµ„æºï¼Œæ¥æ”¶é…ç½®</li>
</ul>
<p>å¥½çš„é€šä¿¡æ¥å£å°±åƒç»Ÿä¸€çš„â€œè¯­è¨€åè®®â€ï¼š</p>
<ul>
<li><strong>æ ‡å‡†åŒ–æ ¼å¼</strong>ï¼šæ‰€æœ‰ Agent éƒ½ç”¨åŒä¸€ç§æ¶ˆæ¯æ ¼å¼</li>
<li><strong>å¼‚æ­¥é€šä¿¡</strong>ï¼šä¸ä¼šå› ä¸ºç­‰å¾…å›å¤è€Œå¡ä½</li>
<li><strong>é”™è¯¯å¤„ç†</strong>ï¼šç½‘ç»œé—®é¢˜æˆ–å¯¹æ–¹æ— å“åº”æ—¶çš„å¤„ç†æœºåˆ¶</li>
</ul>
<p>è¿™æ · Agent å°±èƒ½èå…¥å¤§å‹ç³»ç»Ÿï¼Œæˆä¸ºæ™ºèƒ½ç”Ÿæ€çš„ä¸€éƒ¨åˆ†ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d1b802b6288447858c2762a11703e620~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rKh5aSa5bCR6YC76L6R:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766157587&amp;x-signature=3jkp87cU8gpr%2B%2Byex8s7KljGFZ8%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-10">â‘¥ å­¦ä¹ æ¨¡å—ï¼ˆLearning Moduleï¼‰</h3>
<p>å­¦ä¹ æ¨¡å—è®© Agent æŒç»­è¿›åŒ–ï¼Œä»â€œæ–°æ‰‹â€æˆé•¿ä¸ºâ€œä¸“å®¶â€ã€‚</p>
<p>å­¦ä¹ æ¨¡å—çš„å·¥ä½œæ–¹å¼ï¼š</p>
<ol>
<li><strong>æ”¶é›†åé¦ˆ</strong>ï¼šç”¨æˆ·æ»¡æ„å—ï¼Ÿé—®é¢˜è§£å†³äº†å—ï¼Ÿå“åº”é€Ÿåº¦å¿«å—ï¼Ÿ</li>
<li><strong>åˆ†ææ¨¡å¼</strong>ï¼šä»€ä¹ˆæƒ…å†µä¸‹ç”¨æˆ·æ›´æ»¡æ„ï¼Ÿå“ªç§å›å¤æ–¹å¼æ•ˆæœæ›´å¥½ï¼Ÿ</li>
<li><strong>ä¼˜åŒ–ç­–ç•¥</strong>ï¼šè°ƒæ•´å†³ç­–è§„åˆ™ï¼Œæ”¹è¿›å›å¤æ¨¡æ¿ï¼Œä¼˜åŒ–å“åº”é€Ÿåº¦</li>
<li><strong>æŒç»­è¿­ä»£</strong>ï¼šä¸æ–­å°è¯•æ–°çš„æ–¹æ³•ï¼Œä¿ç•™æœ‰æ•ˆçš„ï¼Œæ·˜æ±°æ— æ•ˆçš„</li>
</ol>
<p>å­¦ä¹ æ¨¡å—çš„ä»·å€¼åœ¨äºï¼š</p>
<ul>
<li><strong>é€‚åº”æ€§</strong>ï¼šç¯å¢ƒå˜åŒ–æ—¶èƒ½è°ƒæ•´ç­–ç•¥</li>
<li><strong>ä¸ªæ€§åŒ–</strong>ï¼šé’ˆå¯¹ä¸åŒç”¨æˆ·ç¾¤ä½“ä¼˜åŒ–æœåŠ¡</li>
<li><strong>æ•ˆç‡æå‡</strong>ï¼šéšç€ç»éªŒç§¯ç´¯ï¼Œå¤„ç†é€Ÿåº¦å’Œå‡†ç¡®ç‡ä¸æ–­æé«˜</li>
</ul>
<p>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆç°åœ¨çš„ AI åŠ©æ‰‹è¶Šç”¨è¶Šèªæ˜çš„åŸå› ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/56bf528034944853a1f1aab9a2c86ee0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rKh5aSa5bCR6YC76L6R:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766157587&amp;x-signature=EoMcpIkeaj4CiEsKjPVFNY9y6O4%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-11">ç¬¬ä¸‰éƒ¨åˆ†ï¼šæ¶æ„ç¯‡ (Architecture Design)</h2>
<p>å½“ç³»ç»Ÿå˜å¤æ‚æ—¶ï¼Œæˆ‘ä»¬éœ€è¦ä»æ›´é«˜çš„è§†è§’æ¥ç»„ç»‡ Agent æ¶æ„å’Œåä½œæ¨¡å¼ã€‚</p>
<h3 data-id="heading-12">â‘  å•ä½“ Agentï¼ˆMonolithic Agentï¼‰</h3>
<p>å•ä½“ Agent å°±åƒä¸€ä¸ªâ€œå…¨èƒ½å‹â€å‘˜å·¥ï¼Œä»€ä¹ˆéƒ½ä¼šå¹²ã€‚</p>
<p>æƒ³è±¡ä¸€ä¸ªå°å‹å’–å•¡åº—çš„åº—ä¸»ï¼šä»–æ—¢è¦æ¥å¾…å®¢äººï¼ˆæ„ŸçŸ¥ï¼‰ï¼Œåˆè¦å†³å®šåšä»€ä¹ˆå’–å•¡ï¼ˆå†³ç­–ï¼‰ï¼Œè¿˜è¦äº²è‡ªåˆ¶ä½œï¼ˆæ‰§è¡Œï¼‰ã€‚è™½ç„¶å¿™ï¼Œä½†ç®€å•é«˜æ•ˆã€‚</p>
<p>å•ä½“ Agent çš„ç‰¹ç‚¹ï¼š</p>
<ul>
<li><strong>ç®€å•ç›´æ¥</strong>ï¼šæ‰€æœ‰é€»è¾‘éƒ½åœ¨ä¸€ä¸ªåœ°æ–¹ï¼Œæ²¡æœ‰å¤æ‚çš„æ¨¡å—é—´é€šä¿¡</li>
<li><strong>å¼€å‘å¿«é€Ÿ</strong>ï¼šä¸éœ€è¦è®¾è®¡å¤æ‚çš„æ¶æ„ï¼Œç›´æ¥å†™ä»£ç å°±è¡Œ</li>
<li><strong>é€‚åˆå°ä»»åŠ¡</strong>ï¼šæ¯”å¦‚ç®€å•çš„èŠå¤©æœºå™¨äººã€æ•°æ®ç›‘æ§ã€è‡ªåŠ¨å›å¤ç­‰</li>
</ul>
<p>ä½†æ˜¯ï¼Œå°±åƒå’–å•¡åº—ç”Ÿæ„å¤ªå¥½æ—¶ï¼Œä¸€ä¸ªäººå¿™ä¸è¿‡æ¥ä¸€æ ·ï¼Œå•ä½“ Agent ä¹Ÿæœ‰é™åˆ¶ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c9b22b7a63764a8fa4bccb16666eee3f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rKh5aSa5bCR6YC76L6R:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766157587&amp;x-signature=Y9m%2BTvRnwwP1EnNPwhoWrCZCagQ%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-13">â‘¡ å¤š Agent ç³»ç»Ÿï¼ˆMulti-Agent Systemï¼‰</h3>
<p>å¤š Agent ç³»ç»Ÿå°±åƒä¸€ä¸ªä¸“ä¸šå›¢é˜Ÿï¼Œæ¯ä¸ªäººéƒ½æœ‰è‡ªå·±çš„ä¸“é•¿ã€‚</p>
<p>æƒ³è±¡ä¸€ä¸ªç”µå•†å¹³å°çš„æ™ºèƒ½å®¢æœç³»ç»Ÿï¼š</p>
<ul>
<li><strong>æ¥å¾… Agent</strong>ï¼šä¸“é—¨è´Ÿè´£åˆæ­¥æ¥å¾…ï¼Œåˆ†ç±»ç”¨æˆ·é—®é¢˜</li>
<li><strong>è®¢å• Agent</strong>ï¼šä¸“é—¨å¤„ç†è®¢å•ç›¸å…³é—®é¢˜ï¼Œç†Ÿæ‚‰æ‰€æœ‰è®¢å•æµç¨‹</li>
<li><strong>å”®å Agent</strong>ï¼šä¸“é—¨å¤„ç†é€€æ¢è´§ï¼ŒçŸ¥é“æ‰€æœ‰å”®åæ”¿ç­–</li>
<li><strong>æŠ€æœ¯ Agent</strong>ï¼šä¸“é—¨è§£å†³æŠ€æœ¯é—®é¢˜ï¼Œç†Ÿæ‚‰äº§å“ç»†èŠ‚</li>
<li><strong>åè°ƒ Agent</strong>ï¼šè´Ÿè´£åœ¨å„ä¸ª Agent ä¹‹é—´ä¼ é€’ä¿¡æ¯ï¼Œç»Ÿä¸€è°ƒåº¦</li>
</ul>
<p>è¿™æ ·çš„å¥½å¤„æ˜¯ï¼š</p>
<ul>
<li><strong>ä¸“ä¸šåŒ–</strong>ï¼šæ¯ä¸ª Agent åªåšè‡ªå·±æ“…é•¿çš„äº‹ï¼Œæ•ˆç‡æ›´é«˜</li>
<li><strong>å¯æ‰©å±•</strong>ï¼šéœ€è¦æ—¶å¯ä»¥æ·»åŠ æ–°çš„ä¸“ä¸š Agent</li>
<li><strong>å®¹é”™æ€§</strong>ï¼šä¸€ä¸ª Agent å‡ºé—®é¢˜ä¸ä¼šå½±å“æ•´ä¸ªç³»ç»Ÿ</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/804ca3aa3d6641809e02d6ec56c65082~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rKh5aSa5bCR6YC76L6R:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766157587&amp;x-signature=BYfbSxl%2BphRsfIiKPJ77Fd3zD5g%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-14">â‘¢ åˆ†å±‚ Agent æ¶æ„ï¼ˆLayered Agent Architectureï¼‰</h3>
<p>åˆ†å±‚æ¶æ„å°±åƒä¸€ä¸ªç»„ç»‡ä¸¥å¯†çš„å…¬å¸ï¼Œæ¯ä¸ªå±‚çº§éƒ½æœ‰æ˜ç¡®çš„èŒè´£ã€‚</p>
<p>ä»¥ä¸€ä¸ªæ™ºèƒ½æŠ•èµ„ Agent ä¸ºä¾‹ï¼š</p>
<p><strong>æ„ŸçŸ¥å±‚ï¼ˆPerception Layerï¼‰</strong>ï¼š</p>
<ul>
<li>æ”¶é›†å¸‚åœºæ•°æ®ï¼šè‚¡ä»·ã€æ–°é—»ã€è´¢æŠ¥</li>
<li>æ¸…æ´—å’Œæ ‡å‡†åŒ–æ•°æ®</li>
<li>æä¾›ç»Ÿä¸€çš„æ•°æ®æ¥å£ç»™ä¸Šå±‚</li>
</ul>
<p><strong>è®¤çŸ¥å±‚ï¼ˆCognition Layerï¼‰</strong>ï¼š</p>
<ul>
<li>åˆ†æå¸‚åœºè¶‹åŠ¿å’Œé£é™©</li>
<li>åˆ¶å®šæŠ•èµ„ç­–ç•¥</li>
<li>è¯„ä¼°ä¸åŒæ–¹æ¡ˆçš„æ”¶ç›Šå’Œé£é™©</li>
</ul>
<p><strong>è¡ŒåŠ¨å±‚ï¼ˆAction Layerï¼‰</strong>ï¼š</p>
<ul>
<li>æ‰§è¡Œä¹°å–æ“ä½œ</li>
<li>ç®¡ç†è´¦æˆ·èµ„é‡‘</li>
<li>å‘é€é€šçŸ¥å’ŒæŠ¥å‘Š</li>
</ul>
<p>è¿™æ ·åˆ†å±‚çš„å¥½å¤„ï¼š</p>
<ul>
<li><strong>èŒè´£æ¸…æ™°</strong>ï¼šæ¯å±‚åªå…³æ³¨è‡ªå·±çš„äº‹æƒ…</li>
<li><strong>æ˜“äºç»´æŠ¤</strong>ï¼šä¿®æ”¹ä¸€å±‚ä¸ä¼šå½±å“å…¶ä»–å±‚</li>
<li><strong>å¯æ›¿æ¢</strong>ï¼šå¯ä»¥å•ç‹¬å‡çº§æŸä¸€å±‚çš„åŠŸèƒ½</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4460e2d4654f41c48f95e622de074d9d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rKh5aSa5bCR6YC76L6R:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766157587&amp;x-signature=vyvOJFVeMMX17byEyxSsiw2u90E%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-15">â‘£ äº‹ä»¶é©±åŠ¨ Agentï¼ˆEvent-Driven Agentï¼‰</h3>
<p>äº‹ä»¶é©±åŠ¨ Agent å°±åƒä¸€ä¸ªæ•æ·çš„æ¶ˆé˜²å‘˜ï¼Œä¸æ˜¯å®šæ—¶å·¡é€»ï¼Œè€Œæ˜¯å¬åˆ°è­¦æŠ¥å°±ç«‹å³å‡ºåŠ¨ã€‚</p>
<p>ä¼ ç»Ÿæ–¹å¼ vs äº‹ä»¶é©±åŠ¨ï¼š</p>
<p><strong>ä¼ ç»Ÿè½®è¯¢æ–¹å¼</strong>ï¼š</p>
<ul>
<li>Agent æ¯éš” 5 åˆ†é’Ÿæ£€æŸ¥ä¸€æ¬¡é‚®ç®±</li>
<li>å³ä½¿æ²¡æœ‰æ–°é‚®ä»¶ä¹Ÿè¦æ£€æŸ¥</li>
<li>æµªè´¹èµ„æºï¼Œå“åº”ä¸åŠæ—¶</li>
</ul>
<p><strong>äº‹ä»¶é©±åŠ¨æ–¹å¼</strong>ï¼š</p>
<ul>
<li>é‚®ç®±æœ‰æ–°é‚®ä»¶æ—¶ç«‹å³é€šçŸ¥ Agent</li>
<li>Agent æ”¶åˆ°é€šçŸ¥åç«‹å³å¤„ç†</li>
<li>èŠ‚çœèµ„æºï¼Œå“åº”è¿…é€Ÿ</li>
</ul>
<p>å¸¸è§çš„äº‹ä»¶ç±»å‹ï¼š</p>
<ul>
<li><strong>ç”¨æˆ·äº‹ä»¶</strong>ï¼šæ–°æ¶ˆæ¯ã€ç‚¹å‡»ã€è´­ä¹°ç­‰</li>
<li><strong>ç³»ç»Ÿäº‹ä»¶</strong>ï¼šé”™è¯¯ã€è¶…æ—¶ã€èµ„æºä¸è¶³ç­‰</li>
<li><strong>ä¸šåŠ¡äº‹ä»¶</strong>ï¼šè®¢å•åˆ›å»ºã€æ”¯ä»˜å®Œæˆã€åº“å­˜ä¸è¶³ç­‰</li>
</ul>
<p>è¿™æ · Agent å°±èƒ½åšåˆ°â€œéšå«éšåˆ°â€ï¼Œå“åº”æ›´å¿«ï¼Œæ•ˆç‡æ›´é«˜ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6528f3922aaa4970bf5ed013463f84b0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rKh5aSa5bCR6YC76L6R:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766157587&amp;x-signature=euOwoJrvbvwc8G23PtTowHuFuiQ%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-16">å®è·µæ¨¡å¼ç¯‡ (Practice Patterns)</h2>
<h3 data-id="heading-17">â‘  è§„åˆ’å‹ Agentï¼ˆPlanning Agentï¼‰</h3>
<p>è§„åˆ’å‹ Agent å°±åƒä¸€ä¸ªç²¾æ˜çš„é¡¹ç›®ç»ç†ï¼Œåšäº‹å‰å…ˆåˆ¶å®šè¯¦ç»†è®¡åˆ’ã€‚</p>
<p>ä¸¾ä¸ªä¾‹å­ï¼šç”¨æˆ·è¯´â€œæˆ‘æƒ³ç»„ç»‡ä¸€æ¬¡å›¢å»ºæ´»åŠ¨â€ï¼Œè§„åˆ’å‹ Agent ä¼šï¼š</p>
<ol>
<li><strong>åˆ†æç›®æ ‡</strong>ï¼šå›¢å»ºæ´»åŠ¨éœ€è¦è€ƒè™‘äººæ•°ã€é¢„ç®—ã€æ—¶é—´ã€åœ°ç‚¹ç­‰</li>
<li><strong>åˆ¶å®šè®¡åˆ’</strong>ï¼š
<ul>
<li>æ­¥éª¤ 1ï¼šç»Ÿè®¡å‚ä¸äººæ•°å’Œåå¥½</li>
<li>æ­¥éª¤ 2ï¼šæ ¹æ®é¢„ç®—ç­›é€‰åˆé€‚åœºåœ°</li>
<li>æ­¥éª¤ 3ï¼šå¯¹æ¯”ä»·æ ¼å’ŒæœåŠ¡</li>
<li>æ­¥éª¤ 4ï¼šé¢„è®¢å¹¶ç¡®è®¤</li>
<li>æ­¥éª¤ 5ï¼šé€šçŸ¥æ‰€æœ‰äººå¹¶å®‰æ’äº¤é€š</li>
</ul>
</li>
<li><strong>æ‰§è¡Œè®¡åˆ’</strong>ï¼šæŒ‰ç…§æ­¥éª¤ä¸€æ­¥æ­¥æ‰§è¡Œï¼Œæ¯ä¸€æ­¥éƒ½æœ‰æ˜ç¡®çš„ç›®æ ‡</li>
</ol>
<p>è§„åˆ’å‹ Agent çš„ä¼˜åŠ¿ï¼š</p>
<ul>
<li><strong>é«˜æ•ˆç‡</strong>ï¼šé¿å…é‡å¤å·¥ä½œå’Œèµ°å¼¯è·¯</li>
<li><strong>å¯é¢„æµ‹</strong>ï¼šèƒ½ä¼°ç®—æ‰€éœ€æ—¶é—´å’Œèµ„æº</li>
<li><strong>å¯è°ƒæ•´</strong>ï¼šå‘ç°é—®é¢˜æ—¶å¯ä»¥è°ƒæ•´è®¡åˆ’</li>
</ul>
<h3 data-id="heading-18">â‘¡ ååº”å¼ Agentï¼ˆReactive Agentï¼‰</h3>
<p>ååº”å¼ Agent å°±åƒä¸€ä¸ªç»éªŒä¸°å¯Œçš„æ€¥è¯ŠåŒ»ç”Ÿï¼Œçœ‹åˆ°ç—‡çŠ¶å°±èƒ½å¿«é€Ÿåšå‡ºåˆ¤æ–­ã€‚</p>
<p>ä¸¾ä¸ªä¾‹å­ï¼šç½‘ç«™ç›‘æ§ Agentï¼š</p>
<ul>
<li><strong>çœ‹åˆ°</strong>ï¼šæœåŠ¡å™¨ CPU ä½¿ç”¨ç‡è¶…è¿‡ 90%</li>
<li><strong>ç«‹å³ååº”</strong>ï¼šå¯åŠ¨é¢å¤–çš„æœåŠ¡å™¨å®ä¾‹</li>
<li><strong>ä¸ç”¨æ€è€ƒ</strong>ï¼šä¸ºä»€ä¹ˆ CPU é«˜ï¼Ÿæ˜¯ä¸æ˜¯ä¸´æ—¶çš„ï¼Ÿç›´æ¥è¡ŒåŠ¨</li>
</ul>
<p>ååº”å¼ Agent çš„ç‰¹ç‚¹ï¼š</p>
<ul>
<li><strong>é€Ÿåº¦å¿«</strong>ï¼šä»æ„ŸçŸ¥åˆ°è¡ŒåŠ¨åªéœ€å‡ æ¯«ç§’</li>
<li><strong>è§„åˆ™ç®€å•</strong>ï¼šå¦‚æœ....å°±....çš„ç®€å•é€»è¾‘</li>
<li><strong>é€‚åˆç´§æ€¥æƒ…å†µ</strong>ï¼šå®‰å…¨é˜²æŠ¤ã€æ•…éšœå“åº”ã€å®æ—¶äº¤æ˜“ç­‰</li>
</ul>
<p>ä½†æ˜¯ååº”å¼ Agent ä¹Ÿæœ‰é™åˆ¶ï¼š</p>
<ul>
<li>å¯èƒ½åšå‡ºé”™è¯¯åˆ¤æ–­ï¼ˆæ¯”å¦‚ CPU é«˜åªæ˜¯ä¸´æ—¶çš„ï¼‰</li>
<li>æ— æ³•å¤„ç†å¤æ‚çš„å¤šæ­¥éª¤ä»»åŠ¡</li>
<li>ç¼ºä¹å…¨å±€è§†é‡å’Œé•¿æœŸè€ƒè™‘</li>
</ul>
<h3 data-id="heading-19">â‘¢ æ··åˆå‹ Agentï¼ˆHybrid Agentï¼‰</h3>
<p>æ··åˆå‹ Agent å°±åƒä¸€ä¸ªæ—¢ä¼šç­–ç•¥è§„åˆ’åˆèƒ½åº”æ€¥å¤„ç†çš„ç»éªŒä¸°å¯Œçš„ç®¡ç†è€…ã€‚</p>
<p>ä»¥ä¸€ä¸ªæ™ºèƒ½äº¤æ˜“ Agent ä¸ºä¾‹ï¼š</p>
<p><strong>æ­£å¸¸æƒ…å†µï¼ˆè§„åˆ’æ¨¡å¼ï¼‰</strong>ï¼š</p>
<ul>
<li>åˆ†æå¸‚åœºè¶‹åŠ¿å’Œå†å²æ•°æ®</li>
<li>åˆ¶å®šè¯¦ç»†çš„æŠ•èµ„ç­–ç•¥</li>
<li>è®¡åˆ’ä»€ä¹ˆæ—¶å€™ä¹°å…¥ï¼Œä»€ä¹ˆæ—¶å€™å–å‡º</li>
</ul>
<p><strong>ç´§æ€¥æƒ…å†µï¼ˆååº”æ¨¡å¼ï¼‰</strong>ï¼š</p>
<ul>
<li>å¸‚åœºçªç„¶å¤§è·Œï¼šç«‹å³æ­¢æŸï¼Œä¸ç­‰è®¡åˆ’</li>
<li>é‡å¤§æ¶ˆæ¯å‘å¸ƒï¼šå¿«é€Ÿè°ƒæ•´ä»“ä½ï¼ŒæŠ“ä½æœºä¼š</li>
<li>ç³»ç»Ÿæ•…éšœï¼šç«‹å³åœæ­¢äº¤æ˜“ï¼Œä¿æŠ¤èµ„é‡‘</li>
</ul>
<p><strong>æ™ºèƒ½åˆ‡æ¢</strong>ï¼š</p>
<ul>
<li>æ ¹æ®ç¯å¢ƒçš„ç¨³å®šæ€§è‡ªåŠ¨åˆ‡æ¢æ¨¡å¼</li>
<li>åœ¨ç´§æ€¥æƒ…å†µç»“æŸåé‡æ–°å›åˆ°è§„åˆ’æ¨¡å¼</li>
<li>ä»ä¸¤ç§æ¨¡å¼çš„ç»éªŒä¸­å­¦ä¹ å’Œæ”¹è¿›</li>
</ul>
<p>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆç°å®ä¸­æœ€æˆåŠŸçš„ Agent ç³»ç»Ÿå¤§å¤šé‡‡ç”¨æ··åˆæ¨¡å¼ã€‚</p>
<hr/>
<h2 data-id="heading-20">æ€»ç»“</h2>
<h3 data-id="heading-21">æ ¸å¿ƒå›é¡¾</h3>
<p>Agent è®¾è®¡æ¨¡å¼çš„æœ¬è´¨å°±æ˜¯è®©ç¨‹åº"æœ‰è„‘å­"ã€‚</p>
<p>ä¼ ç»Ÿç¨‹åºå°±åƒä¸€å°å¤æ‚çš„æœºå™¨ï¼ŒæŒ‰ç…§å›ºå®šçš„æŒ‡ä»¤æ‰§è¡Œï¼Œé‡åˆ°æ–°æƒ…å†µå°±"å¡å£³"ã€‚è€Œ Agent ç³»ç»Ÿå°±åƒä¸€ä¸ªæ™ºèƒ½åŠ©æ‰‹ï¼Œèƒ½å¤Ÿï¼š</p>
<ul>
<li><strong>è§‚å¯Ÿç¯å¢ƒ</strong>ï¼šçŸ¥é“å‘ç”Ÿäº†ä»€ä¹ˆ</li>
<li><strong>ç†è§£ç›®æ ‡</strong>ï¼šçŸ¥é“è¦å®ç°ä»€ä¹ˆ</li>
<li><strong>æ™ºèƒ½å†³ç­–</strong>ï¼šé€‰æ‹©æœ€åˆé€‚çš„è¡ŒåŠ¨</li>
<li><strong>å­¦ä¹ æ”¹è¿›</strong>ï¼šä»ç»éªŒä¸­å˜å¾—æ›´èªæ˜</li>
</ul>
<p><strong>è®°ä½è¿™äº”ä¸ªè®¾è®¡åŸåˆ™</strong>ï¼š</p>
<ol>
<li><strong>ç›®æ ‡æ˜ç¡®</strong>ï¼šä¸çŸ¥é“è¦å»å“ªé‡Œçš„ Agent å°±æ˜¯æ— å¤´è‹è‡</li>
<li><strong>ç¯å¢ƒæ¸…æ™°</strong>ï¼šä¸çŸ¥é“è‡ªå·±åœ¨å“ªé‡Œçš„ Agent å°±æ˜¯ç›²äºº</li>
<li><strong>å†³ç­–æ™ºèƒ½</strong>ï¼šä¸ä¼šæ€è€ƒçš„ Agent å°±æ˜¯æœºå™¨äºº</li>
<li><strong>æŒç»­å­¦ä¹ </strong>ï¼šä¸ä¼šæˆé•¿çš„ Agent å°±æ˜¯æ­»ç¨‹åº</li>
<li><strong>æ¨¡å—åŒ–</strong>ï¼šä¸åˆ†æ¨¡å—çš„ Agent å°±æ˜¯ä¸€å›¢ä¹±éº»</li>
</ol>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1282ba5b7ed74c4babc599bd4d6dc207~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rKh5aSa5bCR6YC76L6R:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766157587&amp;x-signature=yQyE7gjUveDCDjTeGOosNF4hZUc%3D" alt="image.png" loading="lazy"/></p>
<p>Agent è®¾è®¡æ¨¡å¼ä¸æ˜¯ä»€ä¹ˆé«˜æ·±è«æµ‹çš„æŠ€æœ¯ï¼Œå°±æ˜¯è®©ç¨‹åºå˜å¾—"æœ‰çµæ€§"ä¸€ç‚¹ã€‚ä»ä¸€ä¸ªç®€å•çš„è‡ªåŠ¨å›å¤å¼€å§‹ï¼Œä¸€æ­¥æ­¥è®©ä½ çš„ç³»ç»Ÿå˜å¾—æ›´èªæ˜ã€æ›´æœ‰ç”¨ï¼Œ<strong>èƒ½è§‚å¯Ÿã€ä¼šæ€è€ƒã€å¯å­¦ä¹ </strong>ï¼Œè¿™å°±æ˜¯ Agent çš„å…¨éƒ¨ç§˜å¯†ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Jetpack Compose 2025å¹´12æœˆç‰ˆæœ¬æ–°å¢åŠŸèƒ½]]></title>    <link>https://juejin.cn/post/7582776967818215424</link>    <guid>https://juejin.cn/post/7582776967818215424</guid>    <pubDate>2025-12-12T15:08:35.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582776967818215424" data-draft-id="7582510826814963763" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Jetpack Compose 2025å¹´12æœˆç‰ˆæœ¬æ–°å¢åŠŸèƒ½"/> <meta itemprop="keywords" content="Android,Android Jetpack,Kotlin"/> <meta itemprop="datePublished" content="2025-12-12T15:08:35.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨€æœ‰çŒ¿è¯‰"/> <meta itemprop="url" content="https://juejin.cn/user/2788017216685784"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Jetpack Compose 2025å¹´12æœˆç‰ˆæœ¬æ–°å¢åŠŸèƒ½
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2788017216685784/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨€æœ‰çŒ¿è¯‰
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-12T15:08:35.000Z" title="Fri Dec 12 2025 15:08:35 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æœ¬æ–‡è¯‘è‡ªã€ŒWhat's new in the Jetpack Compose December '25 releaseã€ï¼ŒåŸæ–‡é“¾æ¥<a href="https://link.juejin.cn?target=https%3A%2F%2Fandroid-developers.googleblog.com%2F2025%2F12%2Fwhats-new-in-jetpack-compose-december.html" target="_blank" title="https://android-developers.googleblog.com/2025/12/whats-new-in-jetpack-compose-december.html" ref="nofollow noopener noreferrer">android-developers.googleblog.com/2025/12/whaâ€¦</a>ï¼Œç”±Nick Butcherå‘å¸ƒäº2025å¹´12æœˆ3æ—¥ã€‚</p>
</blockquote>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/27bfa381ed634211b1fb249ed4b3f026~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iA5pyJ54y_6K-J:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766156915&amp;x-signature=MDyMwQWuOFG0C%2FSZ3e3TQFFvifA%3D" alt="compose_dec.png" loading="lazy"/>
ç°åœ¨ï¼Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.com%2Fjetpack%2Fandroidx%2Freleases%2Fcompose" target="_blank" title="https://developer.android.com/jetpack/androidx/releases/compose" ref="nofollow noopener noreferrer">Jetpack Compose 2025å¹´12æœˆç‰ˆæœ¬</a> æ­£å¼å‘å¸ƒã€‚è¯¥ç‰ˆæœ¬åŒ…å« Compose æ ¸å¿ƒæ¨¡å— 1.10 ç‰ˆå’Œ Material 3 1.4 ç‰ˆï¼ˆå‚è§å®Œæ•´çš„ <a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.com%2Fdevelop%2Fui%2Fcompose%2Fbom%2Fbom-mapping" target="_blank" title="https://developer.android.com/develop/ui/compose/bom/bom-mapping" ref="nofollow noopener noreferrer">BOM æ˜ å°„</a>ï¼‰ï¼Œæ–°å¢äº† å¤šé¡¹åŠŸèƒ½å¹¶æ˜¾è‘—æå‡äº†æ€§èƒ½ã€‚</p>
<p>è¦ä½¿ç”¨æœ€æ–°çš„ç‰ˆæœ¬ï¼Œè¯·å°† Compose BOM ç‰ˆæœ¬å‡çº§åˆ° 2025.12.00ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">implementation(platform(<span class="hljs-string">"androidx.compose:compose-bom:2025.12.00"</span>))
</code></pre>
<h2 data-id="heading-0">æ€§èƒ½æ”¹è¿›</h2>
<p>æˆ‘ä»¬çŸ¥é“åº”ç”¨ç¨‹åºçš„è¿è¡Œæ—¶æ€§èƒ½å¯¹ä½ å’Œä½ çš„ç”¨æˆ·è‡³å…³é‡è¦ï¼Œå› æ­¤æ€§èƒ½ä¸€ç›´æ˜¯ Compose å›¢é˜Ÿçš„é¦–è¦ä»»åŠ¡ã€‚æ­¤ç‰ˆæœ¬å¸¦æ¥äº†ä¸€ç³»åˆ—æ”¹è¿›â€”â€”ä½ åªéœ€å‡çº§åˆ°æœ€æ–°ç‰ˆæœ¬å³å¯è·å¾—æ‰€æœ‰è¿™äº›æ”¹è¿›ã€‚æˆ‘ä»¬çš„å†…éƒ¨æ»šåŠ¨æ€§èƒ½åŸºå‡†æµ‹è¯•è¡¨æ˜ï¼ŒCompose ç°åœ¨çš„æ€§èƒ½ä¸ä½¿ç”¨ Views æ—¶çš„æ€§èƒ½ç›¸å½“ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/50bcde2e56ca45ab9dc88aa15a15edc3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iA5pyJ54y_6K-J:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766156915&amp;x-signature=POxqlRQqM5pqva87GG7Ynsvc%2Beo%3D" alt="æ»šåŠ¨æ€§èƒ½åŸºå‡†æµ‹è¯•æ¯”è¾ƒäº† Views å’Œ Jetpack Compose åœ¨ä¸åŒ Compose ç‰ˆæœ¬ä¸‹çš„æ€§èƒ½" loading="lazy"/></p>
<h3 data-id="heading-1">å»¶è¿Ÿé¢„å–ä¸­çš„å¯æš‚åœç»„åˆ</h3>
<p>å»¶è¿Ÿé¢„å–ä¸­çš„å¯æš‚åœç»„åˆé¢„å–åŠŸèƒ½ç°å·²é»˜è®¤å¯ç”¨ã€‚è¿™æ˜¯ Compose è¿è¡Œæ—¶è°ƒåº¦æœºåˆ¶çš„ä¸€é¡¹æ ¹æœ¬æ€§å˜é©ï¼Œæ—¨åœ¨æ˜¾è‘—å‡å°‘é«˜ UI è´Ÿè½½ä¸‹çš„å¡é¡¿ç°è±¡ã€‚</p>
<p>æ­¤å‰ï¼Œä¸€æ—¦åˆæˆå¼€å§‹ï¼Œå°±å¿…é¡»è¿è¡Œè‡³å®Œæˆã€‚å¦‚æœåˆæˆè¾ƒä¸ºå¤æ‚ï¼Œåˆ™å¯èƒ½å¯¼è‡´ä¸»çº¿ç¨‹é˜»å¡è¶…è¿‡ä¸€å¸§ï¼Œä»è€Œé€ æˆ UI å¡é¡¿ã€‚è€Œç°åœ¨ï¼Œå€ŸåŠ©å¯æš‚åœåˆæˆåŠŸèƒ½ï¼Œè¿è¡Œæ—¶å¯ä»¥åœ¨æ—¶é—´ä¸è¶³æ—¶â€œæš‚åœâ€å…¶å·¥ä½œï¼Œå¹¶åœ¨ä¸‹ä¸€å¸§æ¢å¤ã€‚å½“ä¸å»¶è¿Ÿå¸ƒå±€é¢„å–ç»“åˆä½¿ç”¨ï¼Œæå‰å‡†å¤‡å¸§æ—¶ï¼Œæ­¤åŠŸèƒ½å°¤ä¸ºæœ‰æ•ˆã€‚ Compose 1.9 ä¸­å¼•å…¥çš„ LazyLayout<a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.com%2Freference%2Fkotlin%2Fandroidx%2Fcompose%2Ffoundation%2Flazy%2Fpackage-summary%23rememberLazyListState(androidx.compose.foundation.lazy.layout.LazyLayoutCacheWindow%2Ckotlin.Int%2Ckotlin.Int)" target="_blank" title="https://developer.android.com/reference/kotlin/androidx/compose/foundation/lazy/package-summary#rememberLazyListState(androidx.compose.foundation.lazy.layout.LazyLayoutCacheWindow,kotlin.Int,kotlin.Int)" ref="nofollow noopener noreferrer">CacheWindow</a> API å¯ä»¥å¾ˆå¥½åœ°é¢„å–æ›´å¤šå†…å®¹ï¼Œå¹¶åˆ©ç”¨å¯æš‚åœçš„åˆæˆåŠŸèƒ½æ¥æ˜¾è‘—æå‡ UI æ€§èƒ½ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/639a70896a574eebb4092f1338101edb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iA5pyJ54y_6K-J:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766156915&amp;x-signature=5YumkYonG%2B6CAwnpH%2F02j16WYzY%3D" alt="2.gif" loading="lazy"/>
æˆ‘ä»¬è¿˜ä¼˜åŒ–äº†å…¶ä»–æ–¹é¢çš„æ€§èƒ½ï¼Œä¾‹å¦‚æ”¹è¿›äº† Modifier.onPlacedã€‚ Modifier.onVisibilityChanged å’Œå…¶ä»–ä¿®é¥°ç¬¦å®ç°ã€‚æˆ‘ä»¬å°†ç»§ç»­æŠ•å…¥èµ„æºæ¥æå‡ Compose çš„æ€§èƒ½ã€‚</p>
<h2 data-id="heading-2">æ–°åŠŸèƒ½</h2>
<h3 data-id="heading-3">Retain</h3>
<p>Compose æä¾›äº†ä¸€ç³»åˆ— API æ¥è·¨ä¸åŒçš„ç”Ÿå‘½å‘¨æœŸä¿å­˜å’Œç®¡ç†çŠ¶æ€ï¼›ä¾‹å¦‚ï¼Œ<code>remember</code> å¯ä»¥åœ¨ç»„åˆä¹‹é—´æŒä¹…åŒ–çŠ¶æ€ï¼Œè€Œ <code>rememberSavable</code>/<code>rememberSerializable</code> å¯ä»¥åœ¨ Activity æˆ–è¿›ç¨‹é‡å»ºä¹‹é—´æŒä¹…åŒ–çŠ¶æ€ã€‚<code>retain</code> æ˜¯ä¸€ä¸ªä»‹äºè¿™äº› API ä¹‹é—´çš„æ–° APIï¼Œå®ƒå…è®¸ä½ åœ¨é…ç½®æ›´æ”¹æ—¶æŒä¹…åŒ–å€¼è€Œæ— éœ€åºåˆ—åŒ–ï¼Œä½†ä¸ä¼šè·¨è¿›ç¨‹ç»ˆæ­¢ã€‚ç”±äº <code>retain</code> ä¸ä¼šåºåˆ—åŒ–ä½ çš„çŠ¶æ€ï¼Œå› æ­¤ä½ å¯ä»¥æŒä¹…åŒ–è¯¸å¦‚ lambda è¡¨è¾¾å¼ã€æµç¨‹ä»¥åŠä½å›¾ç­‰éš¾ä»¥åºåˆ—åŒ–çš„å¤§å‹å¯¹è±¡ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥ä½¿ç”¨ <code>retain</code> æ¥ç®¡ç†åª’ä½“æ’­æ”¾å™¨ï¼ˆä¾‹å¦‚ ExoPlayerï¼‰ï¼Œä»¥ç¡®ä¿åª’ä½“æ’­æ”¾ä¸ä¼šå› é…ç½®æ›´æ”¹è€Œä¸­æ–­ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">MediaPlayer</span><span class="hljs-params">()</span></span> {
	<span class="hljs-keyword">val</span> applicationContext = LocalContext.current.applicationContext
	<span class="hljs-keyword">val</span> exoPlayer = retain { ExoPlayer.Builder(applicationContext).apply { ... }.build() }
	...
}
</code></pre>
<p>æˆ‘ä»¬è¦æ„Ÿè°¢ AndroidDev ç¤¾åŒºï¼ˆç‰¹åˆ«æ˜¯ <a href="https://link.juejin.cn?target=https%3A%2F%2Fslackhq.github.io%2Fcircuit" target="_blank" title="https://slackhq.github.io/circuit" ref="nofollow noopener noreferrer">Circuit</a> å›¢é˜Ÿï¼‰ï¼Œä»–ä»¬å¯¹è¯¥åŠŸèƒ½çš„è®¾è®¡äº§ç”Ÿäº†å½±å“å¹¶åšå‡ºäº†è´¡çŒ®ã€‚</p>
<h3 data-id="heading-4">Material 1.4</h3>
<p>Material3 åº“çš„ 1.4.0 ç‰ˆæœ¬æ–°å¢äº†ä¸€äº›ç»„ä»¶å’Œå¢å¼ºåŠŸèƒ½ï¼š</p>
<ul>
<li>
<p>TextField ç°åœ¨æä¾›äº†ä¸€ä¸ªåŸºäº TextFieldState çš„å®éªŒæ€§ç‰ˆæœ¬ï¼Œå®ƒæä¾›äº†ä¸€ç§ <a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.com%2Fdevelop%2Fui%2Fcompose%2Ftext%2Fuser-input" target="_blank" title="https://developer.android.com/develop/ui/compose/text/user-input" ref="nofollow noopener noreferrer">æ›´å¼ºå¤§çš„</a> æ–¹æ³•æ¥ç®¡ç†æ–‡æœ¬çŠ¶æ€ã€‚æ­¤å¤–ï¼Œè¿˜æ–°å¢äº†å˜ä½“SecureTextField å’Œ OutlinedSecureTextFieldã€‚Material Text å¯ç»„åˆå…ƒç´ ç°åœ¨æ”¯æŒè‡ªåŠ¨è°ƒæ•´å¤§å°åŠŸèƒ½ï¼ˆautoSizeï¼‰ã€‚</p>
</li>
<li>
<p>è½®æ’­ç»„ä»¶ç°åœ¨æä¾›äº†ä¸€ä¸ªæ–°çš„ <a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.com%2Freference%2Fkotlin%2Fandroidx%2Fcompose%2Fmaterial3%2Fcarousel%2Fpackage-summary%23Horizo%25E2%2580%258B%25E2%2580%258BntalCenteredHeroCarousel(androidx.compose.material3.carousel.CarouselState%2Candroidx.compose.ui.Modifier%2Candroidx.compose.ui.unit.Dp%2Candroidx.compose.ui.unit.Dp%2Candroidx.compose.foundation.gestures.TargetedFlingBehavior%2Ckotlin.Boolean%2Candroidx.compose.ui.unit.Dp%2Candroidx.compose.ui.unit.Dp%2Candroidx.compose.foundation.layout.PaddingValues%2Ckotlin.Function2)" target="_blank" title="https://developer.android.com/reference/kotlin/androidx/compose/material3/carousel/package-summary#Horizo%E2%80%8B%E2%80%8BntalCenteredHeroCarousel(androidx.compose.material3.carousel.CarouselState,androidx.compose.ui.Modifier,androidx.compose.ui.unit.Dp,androidx.compose.ui.unit.Dp,androidx.compose.foundation.gestures.TargetedFlingBehavior,kotlin.Boolean,androidx.compose.ui.unit.Dp,androidx.compose.ui.unit.Dp,androidx.compose.foundation.layout.PaddingValues,kotlin.Function2)" ref="nofollow noopener noreferrer">Horizoâ€‹â€‹ntalCenteredHeroCarousel</a><a href="https://link.juejin.cn?target=https%3A%2F%2Fm3.material.io%2Fcomponents%2Fcarousel%2Fspecs" target="_blank" title="https://m3.material.io/components/carousel/specs" ref="nofollow noopener noreferrer">variant</a>ã€‚</p>
</li>
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.com%2Freference%2Fkotlin%2Fandroidx%2Fcompose%2Fmaterial3%2Fpackage-summary%3F_gl%3D1*1h4dj5y*_up*MQ..*_ga*NDE1MzI0NzAwLjE3NjQ2MTM1MzU.*_ga_6HH9YJMN9M*czE3NjQ2MTM1MzQkbzEkZzAkdDE3NjQ2MTM1MzQkajYwJGwwJGgxODIyOTM4OTMy%23TimePicker(androidx.compose.material3.TimePickerState%2Candroidx.compose.ui.Modifier%2Candroidx.compose.material3.TimePickerColors%2Candroidx.compose.material3.TimePickerLayoutType)" target="_blank" title="https://developer.android.com/reference/kotlin/androidx/compose/material3/package-summary?_gl=1*1h4dj5y*_up*MQ..*_ga*NDE1MzI0NzAwLjE3NjQ2MTM1MzU.*_ga_6HH9YJMN9M*czE3NjQ2MTM1MzQkbzEkZzAkdDE3NjQ2MTM1MzQkajYwJGwwJGgxODIyOTM4OTMy#TimePicker(androidx.compose.material3.TimePickerState,androidx.compose.ui.Modifier,androidx.compose.material3.TimePickerColors,androidx.compose.material3.TimePickerLayoutType)" ref="nofollow noopener noreferrer">TimePicker</a> ç°åœ¨æ”¯æŒåœ¨é€‰æ‹©å™¨æ¨¡å¼å’Œè¾“å…¥æ¨¡å¼ä¹‹é—´åˆ‡æ¢ã€‚</p>
</li>
<li>
<p>å‚ç›´æ‹–æ‹½æ‰‹æŸ„ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.com%2Freference%2Fkotlin%2Fandroidx%2Fcompose%2Fmaterial3%2Fpackage-summary%23VerticalDragHandle(androidx.compose.ui.Modifier%2Candroidx.compose.material3.DragHandleSizes%2Candroidx.compose.material3.DragHandleColors%2Candroidx.compose.material3.DragHandleShapes%2Candroidx.compose.foundation.interaction.MutableInteractionSource)" target="_blank" title="https://developer.android.com/reference/kotlin/androidx/compose/material3/package-summary#VerticalDragHandle(androidx.compose.ui.Modifier,androidx.compose.material3.DragHandleSizes,androidx.compose.material3.DragHandleColors,androidx.compose.material3.DragHandleShapes,androidx.compose.foundation.interaction.MutableInteractionSource)" ref="nofollow noopener noreferrer">VerticalDragHandle</a>ï¼‰å¸®åŠ©ç”¨æˆ·æ›´æ”¹è‡ªé€‚åº”ç©ºæ ¼çš„å¤§å°æˆ–è€…ä½ç½®ã€‚</p>
</li>
</ul>
<p align="center"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2eea5e8b96de44d99fcd33b4309f5e85~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iA5pyJ54y_6K-J:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766156915&amp;x-signature=GeOkBcoOyVEVUZ0MwMeenG9t41I%3D" alt="ezgif-2a8018b680a34aa3.gif" loading="lazy"/></p>
<p>è¯·æ³¨æ„ï¼Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fm3.material.io%2Fblog%2Fbuilding-with-m3-expressive" target="_blank" title="https://m3.material.io/blog/building-with-m3-expressive" ref="nofollow noopener noreferrer">Material 3 Expressive</a> API ä»åœ¨ Material 3 åº“çš„ alpha ç‰ˆæœ¬ä¸­æŒç»­å¼€å‘ã€‚è¦äº†è§£æ›´å¤šä¿¡æ¯ï¼Œè¯·è§‚çœ‹<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.youtube.com%2Fembed%2Ft9rrsqfB2tM" target="_blank" title="https://www.youtube.com/embed/t9rrsqfB2tM" ref="nofollow noopener noreferrer">æœ€è¿‘çš„æ¼”è®²</a>ã€‚</p>
<h2 data-id="heading-5">æ–°çš„åŠ¨ç”»åŠŸèƒ½</h2>
<p>æˆ‘ä»¬æŒç»­æ‰©å±•åŠ¨ç”» APIï¼ŒåŒ…æ‹¬å¯¹è‡ªå®šä¹‰å…±äº«å…ƒç´ åŠ¨ç”»çš„æ›´æ–°ã€‚</p>
<h3 data-id="heading-6">åŠ¨æ€å…±äº«å…ƒç´ </h3>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œ<code>sharedElement()</code> å’Œ <code>sharedBounds()</code> åŠ¨ç”»ä¼šåœ¨ç›®æ ‡çŠ¶æ€ä¸­æ‰¾åˆ°åŒ¹é…çš„é”®æ—¶å°è¯•ä¸ºå¸ƒå±€æ›´æ”¹æ·»åŠ åŠ¨ç”»æ•ˆæœã€‚ä½†æ˜¯ï¼Œä½ å¯èƒ½å¸Œæœ›æ ¹æ®æŸäº›æ¡ä»¶ï¼ˆä¾‹å¦‚å¯¼èˆªæ–¹å‘æˆ–å½“å‰ UI çŠ¶æ€ï¼‰åŠ¨æ€ç¦ç”¨â€‹â€‹æ­¤åŠ¨ç”»ã€‚</p>
<p>è¦æ§åˆ¶å…±äº«å…ƒç´ è¿‡æ¸¡æ˜¯å¦å‘ç”Ÿï¼Œä½ ç°åœ¨å¯ä»¥è‡ªå®šä¹‰ä¼ é€’ç»™ <code>rememberSharedContentState()</code> çš„ <code>SharedContentConfig</code>ã€‚<code>isEnabled</code> å±æ€§å†³å®šå…±äº«å…ƒç´ æ˜¯å¦å¤„äºæ´»åŠ¨çŠ¶æ€ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin">SharedTransitionLayout {
	<span class="hljs-keyword">val</span> transition = updateTransition(currentState)
	transition.AnimatedContent { targetState -&gt;
		<span class="hljs-comment">// Create the configuration that depends on state changing.</span>
		<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">animationConfig</span><span class="hljs-params">()</span></span> : SharedTransitionScope.SharedContentConfig {
			<span class="hljs-keyword">return</span> <span class="hljs-keyword">object</span> : SharedTransitionScope.SharedContentConfig {
				<span class="hljs-keyword">override</span> <span class="hljs-keyword">val</span> SharedTransitionScope.SharedContentState.isEnabled: <span class="hljs-built_in">Boolean</span>
						<span class="hljs-keyword">get</span>() =
							<span class="hljs-comment">// determine whether to perform a shared element transition</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â Â Â Â Â }
}
</code></pre>
<p>æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…<a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.com%2Fdevelop%2Fui%2Fcompose%2Fanimation%2Fshared-elements%2Fcustomize%23dynamic-enable-disable" target="_blank" title="https://developer.android.com/develop/ui/compose/animation/shared-elements/customize#dynamic-enable-disable" ref="nofollow noopener noreferrer">æ–‡æ¡£</a>ã€‚</p>
<h3 data-id="heading-7">Modifier.skipToLookaheadPosition()</h3>
<p>æ­¤ç‰ˆæœ¬æ–°å¢äº†ä¸€ä¸ªä¿®é¥°ç¬¦ <a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.com%2Freference%2Fkotlin%2Fandroidx%2Fcompose%2Fanimation%2FSharedTransitionScope%3Fhl%3Den%23(androidx.compose.ui.Modifier).skipToLookaheadPosition(kotlin.Function0)" target="_blank" title="https://developer.android.com/reference/kotlin/androidx/compose/animation/SharedTransitionScope?hl=en#(androidx.compose.ui.Modifier).skipToLookaheadPosition(kotlin.Function0)" ref="nofollow noopener noreferrer">Modifier.skipToLookaheadPosition()</a>ï¼Œç”¨äºåœ¨æ‰§è¡Œå…±äº«å…ƒç´ åŠ¨ç”»æ—¶ä¿æŒå¯ç»„åˆå…ƒç´ çš„æœ€ç»ˆä½ç½®ã€‚è¿™ä½¿å¾—å¯ä»¥æ‰§è¡Œç±»ä¼¼â€œæ­ç¤ºâ€ç±»å‹çš„è¿‡æ¸¡åŠ¨ç”»ï¼Œä¾‹å¦‚ Androidify ç¤ºä¾‹ä¸­ç›¸æœºçš„æ¸è¿›å¼æ­ç¤ºæ•ˆæœã€‚æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.youtube.com%2Fembed%2F0moEXBqNDZI" target="_blank" title="https://www.youtube.com/embed/0moEXBqNDZI" ref="nofollow noopener noreferrer">æ­¤å¤„çš„è§†é¢‘æç¤º</a>ã€‚</p>
<h3 data-id="heading-8">å…±äº«å…ƒç´ è¿‡æ¸¡ä¸­çš„åˆå§‹é€Ÿåº¦</h3>
<p>æ­¤ç‰ˆæœ¬æ–°å¢äº†ä¸€ä¸ªå…±äº«å…ƒç´ è¿‡æ¸¡ APIï¼š<code>prepareTransitionWithInitialVelocity</code>ï¼Œå…è®¸ä½ å°†åˆå§‹é€Ÿåº¦ï¼ˆä¾‹å¦‚æ¥è‡ªæ‰‹åŠ¿ï¼‰ä¼ é€’ç»™å…±äº«å…ƒç´ è¿‡æ¸¡ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">Modifier.fillMaxSize()
    .draggable2D(
			rememberDraggable2DState{offset+=it},
			onDragStopped = { velocity -&gt;
				<span class="hljs-comment">// Set up the initial velocity for the upcoming shared element</span>
				<span class="hljs-comment">// transition.</span>
	          sharedContentStateForDraggableCat?.prepareTransitionWithInitialVelocity(velocity)
				showDetails = <span class="hljs-literal">false</span>
			},
)
</code></pre>
<p align="center"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0f1f23ef2044469ca053b968d32c1ecc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iA5pyJ54y_6K-J:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766156915&amp;x-signature=Y0BC4RE1cGc9Y5CNAanCs3ponj8%3D" alt="4.gif" loading="lazy"/></p>
<h3 data-id="heading-9">é¢çº±è¿‡æ¸¡åŠ¨ç”»</h3>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.com%2Freference%2Fkotlin%2Fandroidx%2Fcompose%2Fanimation%2FEnterTransition" target="_blank" title="https://developer.android.com/reference/kotlin/androidx/compose/animation/EnterTransition" ref="nofollow noopener noreferrer">EnterTransition</a> å’Œ <a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.com%2Freference%2Fkotlin%2Fandroidx%2Fcompose%2Fanimation%2FExitTransition%3F_gl%3D1*1m00og2*_up*MQ..*_ga*MjU3NDMyNzc5LjE3NjQ2MTE4NjM.*_ga_6HH9YJMN9M*czE3NjQ2MTE4NjMkbzEkZzAkdDE3NjQ2MTE4NjMkajYwJGwwJGgxMTk2NzM1MDk0" target="_blank" title="https://developer.android.com/reference/kotlin/androidx/compose/animation/ExitTransition?_gl=1*1m00og2*_up*MQ..*_ga*MjU3NDMyNzc5LjE3NjQ2MTE4NjM.*_ga_6HH9YJMN9M*czE3NjQ2MTE4NjMkbzEkZzAkdDE3NjQ2MTE4NjMkajYwJGwwJGgxMTk2NzM1MDk0" ref="nofollow noopener noreferrer">ExitTransition</a> å®šä¹‰äº†åŠ¨ç”»çš„æ‰§è¡Œæ–¹å¼ã€‚ <a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.com%2Freference%2Fkotlin%2Fandroidx%2Fcompose%2Fanimation%2Fpackage-summary%23AnimatedVisibility" target="_blank" title="https://developer.android.com/reference/kotlin/androidx/compose/animation/package-summary#AnimatedVisibility" ref="nofollow noopener noreferrer">AnimatedVisibility</a>/ <a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.com%2Freference%2Fkotlin%2Fandroidx%2Fcompose%2Fanimation%2Fpackage-summary%23AnimatedContent" target="_blank" title="https://developer.android.com/reference/kotlin/androidx/compose/animation/package-summary#AnimatedContent" ref="nofollow noopener noreferrer">AnimatedContent</a> å¯ç»„åˆå…ƒç´ å‡ºç°æˆ–æ¶ˆå¤±ã€‚æ–°å¢çš„å®éªŒæ€§é®ç½©é€‰é¡¹å…è®¸ä½ æŒ‡å®šé¢œè‰²æ¥é®ç›–æˆ–ä¿®é¥°å†…å®¹ï¼›ä¾‹å¦‚ï¼Œåœ¨å†…å®¹ä¸Šæ–¹æ·¡å…¥/æ·¡å‡ºåŠé€æ˜é»‘è‰²å›¾å±‚ï¼š</p>
<p align="center"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e7010592c7694f94ace103f517807a4f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iA5pyJ54y_6K-J:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766156915&amp;x-signature=Id3%2B7nkawXiJ%2BmuBZEqlhwNH8ko%3D" alt="5.gif" loading="lazy"/></p>
<pre><code class="hljs language-kotlin" lang="kotlin">AnimatedContent(
Â Â Â Â targetState = page,
Â Â Â Â modifier = Modifier.fillMaxSize().weight(<span class="hljs-number">1f</span>),
Â Â Â Â transitionSpec = {
		 <span class="hljs-keyword">if</span> (targetState &gt; initialState) {
Â Â Â Â Â Â Â Â Â Â Â Â (slideInHorizontally { it } togetherWith
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â slideOutHorizontally { -it / <span class="hljs-number">2</span> } + veilOut(targetColor = veilColor))
Â Â Â Â Â Â Â Â } <span class="hljs-keyword">else</span> {
Â Â Â Â Â Â Â Â Â Â Â Â slideInHorizontally { -it / <span class="hljs-number">2</span> } +
						unveilIn(initialColor = veilColor) togetherWith slideOutHorizontally { it }
Â Â Â Â Â Â Â Â }
Â Â Â Â },
) { targetPage -&gt;
Â Â Â Â ...
}
</code></pre>
<h2 data-id="heading-10">å³å°†å‘ç”Ÿçš„å˜æ›´</h2>
<h3 data-id="heading-11">å¼ƒç”¨ Modifier.onFirstVisible</h3>
<p>Compose 1.9 å¼•å…¥äº† <a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.com%2Freference%2Fkotlin%2Fandroidx%2Fcompose%2Fui%2FModifier%23%2528androidx.compose.ui.Modifier%2529.onVisibilityChanged%2528kotlin.Long%2Ckotlin.Float%2Candroidx.compose.ui.layout.LayoutBoundsHolder%2Ckotlin.Function1%2529" target="_blank" title="https://developer.android.com/reference/kotlin/androidx/compose/ui/Modifier#%28androidx.compose.ui.Modifier%29.onVisibilityChanged%28kotlin.Long,kotlin.Float,androidx.compose.ui.layout.LayoutBoundsHolder,kotlin.Function1%29" ref="nofollow noopener noreferrer">Modifier.onVisibilityChanged</a> å’Œ <a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.com%2Freference%2Fkotlin%2Fandroidx%2Fcompose%2Fui%2FModifier%23%2528androidx.compose.ui.Modifier%2529.onFirstVisible%2528kotlin.Long%2Ckotlin.Float%2Candroidx.compose.ui.layout.LayoutBoundsHolder%2Ckotlin.Function0%2529" target="_blank" title="https://developer.android.com/reference/kotlin/androidx/compose/ui/Modifier#%28androidx.compose.ui.Modifier%29.onFirstVisible%28kotlin.Long,kotlin.Float,androidx.compose.ui.layout.LayoutBoundsHolder,kotlin.Function0%29" ref="nofollow noopener noreferrer">Modifier.onFirstVisible</a>ã€‚åœ¨å®¡é˜…äº†ä½ çš„åé¦ˆåï¼Œæˆ‘ä»¬å‘ç° <code>Modifier.onFirstVisible</code> çš„çº¦å®šæ— æ³•ç¡®å®šæ€§åœ°æ‰§è¡Œï¼›å…·ä½“æ¥è¯´ï¼Œå°±æ˜¯æ— æ³•ç¡®å®šæŸä¸ªå…ƒç´ ä½•æ—¶é¦–æ¬¡å¯è§ã€‚ä¾‹å¦‚ï¼ŒLazy å¸ƒå±€å¯èƒ½ä¼šé‡Šæ”¾æ»šåŠ¨å‡ºè§†å£çš„å…ƒç´ ï¼Œç„¶ååœ¨å®ƒä»¬æ»šåŠ¨å›è§†å£æ—¶é‡æ–°ç»„åˆå®ƒä»¬ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œ<code>onFirstVisible</code> å›è°ƒä¼šå†æ¬¡è§¦å‘ï¼Œå› ä¸ºå®ƒæ˜¯ä¸€ä¸ªæ–°ç»„åˆçš„å…ƒç´ ã€‚å½“å¯¼èˆªå›ä¹‹å‰è®¿é—®è¿‡çš„åŒ…å« <code>onFirstVisible</code> çš„å±å¹•æ—¶ï¼Œä¹Ÿä¼šå‡ºç°ç±»ä¼¼çš„è¡Œä¸ºã€‚å› æ­¤ï¼Œæˆ‘ä»¬å†³å®šåœ¨ä¸‹ä¸€ä¸ª Compose ç‰ˆæœ¬ï¼ˆ1.11ï¼‰ä¸­å¼ƒç”¨æ­¤ä¿®é¥°ç¬¦ï¼Œå¹¶å»ºè®®è¿ç§»åˆ° <code>onVisibilityChanged</code>ã€‚æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…<a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.com%2Fdevelop%2Fui%2Fcompose%2Flayouts%2Fvisibility-modifiers" target="_blank" title="https://developer.android.com/develop/ui/compose/layouts/visibility-modifiers" ref="nofollow noopener noreferrer">æ–‡æ¡£</a>ã€‚</p>
<h3 data-id="heading-12">æµ‹è¯•ä¸­çš„åç¨‹åˆ†å‘</h3>
<p>æˆ‘ä»¬è®¡åˆ’æ›´æ”¹æµ‹è¯•ä¸­çš„åç¨‹åˆ†å‘ï¼Œä»¥æ”¹å–„æµ‹è¯•çš„ç¨³å®šæ€§å¹¶æ•è·æ›´å¤šé—®é¢˜ã€‚ç›®å‰ï¼Œæµ‹è¯•ä½¿ç”¨çš„æ˜¯ UnconfinedTestDispatcherï¼Œè¿™ä¸ç”Ÿäº§ç¯å¢ƒçš„è¡Œä¸ºæœ‰æ‰€ä¸åŒï¼›ä¾‹å¦‚ï¼Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.com%2Fdevelop%2Fui%2Fcompose%2Fside-effects" target="_blank" title="https://developer.android.com/develop/ui/compose/side-effects" ref="nofollow noopener noreferrer">å‰¯ä½œç”¨</a>å¯èƒ½ä¼šç«‹å³è¿è¡Œï¼Œè€Œä¸æ˜¯è¢«æ”¾å…¥é˜Ÿåˆ—ã€‚åœ¨æœªæ¥çš„ç‰ˆæœ¬ä¸­ï¼Œæˆ‘ä»¬è®¡åˆ’å¼•å…¥ä¸€ä¸ªæ–°çš„ APIï¼Œé»˜è®¤ä½¿ç”¨ StandardTestDispatcherï¼Œä»¥åŒ¹é…ç”Ÿäº§ç¯å¢ƒçš„è¡Œä¸ºã€‚ä½ ç°åœ¨å¯ä»¥åœ¨ 1.10 ç‰ˆæœ¬ä¸­å°è¯•æ–°çš„è¡Œä¸ºï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@get:Rule</span> <span class="hljs-comment">// also createAndroidComposeRule, createEmptyComposeRule</span>
<span class="hljs-keyword">val</span> rule = createComposeRule(effectContext = StandardTestDispatcher())
</code></pre>
<p>ä½¿ç”¨ StandardTestDispatcher ä¼šå°†ä»»åŠ¡æ”¾å…¥é˜Ÿåˆ—ï¼Œå› æ­¤ä½ å¿…é¡»ä½¿ç”¨åŒæ­¥æœºåˆ¶ï¼Œä¾‹å¦‚ composeTestRule.waitForIdle() æˆ– composeTestRule.runOnIdle()ã€‚å¦‚æœä½ çš„æµ‹è¯•ä½¿ç”¨äº† runTestï¼Œåˆ™å¿…é¡»ç¡®ä¿ runTest å’Œä½ çš„ Compose è§„åˆ™å…±äº«åŒä¸€ä¸ª StandardTestDispatcher å®ä¾‹ä»¥è¿›è¡ŒåŒæ­¥ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// 1. Create a SINGLE dispatcher instance</span>
valtestDispatcher = StandardTestDispatcher()

<span class="hljs-comment">// 2. Pass it to your Compose rule</span>
<span class="hljs-meta">@get:Rule</span>
valcomposeRule = createComposeRule(effectContext = testDispatcher)

<span class="hljs-meta">@Test</span>
<span class="hljs-comment">// 3. Pass the *SAME INSTANCE* to runTest</span>
funmyTest() = runTest(testDispatcher) {
	composeRule.setContent{<span class="hljs-comment">/* ... */</span>}
}
</code></pre>
<h2 data-id="heading-13">å·¥å…·</h2>
<p>ä¼˜ç§€çš„ API éœ€è¦ä¼˜ç§€çš„å·¥å…·ï¼Œ<a href="https://link.juejin.cn?target=http%3A%2F%2Fd.android.com%2Fstudio" target="_blank" title="http://d.android.com/studio" ref="nofollow noopener noreferrer">Android Studio</a> ä¸º Compose å¼€å‘è€…æ–°å¢äº†å¤šé¡¹åŠŸèƒ½ï¼š</p>
<ul>
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.com%2Fstudio%2Fpreview%2Ffeatures%23iterate-ui-agent" target="_blank" title="https://developer.android.com/studio/preview/features#iterate-ui-agent" ref="nofollow noopener noreferrer">å˜æ¢ UI</a>ï¼šå³é”®å•å‡» @Previewï¼Œé€‰æ‹©â€œå˜æ¢ UIâ€ï¼Œç„¶åç”¨è‡ªç„¶è¯­è¨€æè¿°æ›´æ”¹ï¼Œå³å¯è¿­ä»£ä½ çš„è®¾è®¡ã€‚</p>
</li>
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.com%2Fstudio%2Fpreview%2Ffeatures%23ui-tools-setup" target="_blank" title="https://developer.android.com/studio/preview/features#ui-tools-setup" ref="nofollow noopener noreferrer">ç”Ÿæˆ @Preview</a>ï¼šå³é”®å•å‡»å¯ç»„åˆå…ƒç´ ï¼Œç„¶åé€‰æ‹© Gemini &gt; ç”Ÿæˆ [å¯ç»„åˆå…ƒç´ åç§°] é¢„è§ˆã€‚</p>
</li>
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.com%2Fstudio%2Fpreview%2Ffeatures%23material-symbols-support" target="_blank" title="https://developer.android.com/studio/preview/features#material-symbols-support" ref="nofollow noopener noreferrer">è‡ªå®šä¹‰ Material Symbols</a>ï¼šçŸ¢é‡èµ„æºå‘å¯¼æ–°å¢äº†å¯¹å›¾æ ‡å˜ä½“çš„æ”¯æŒã€‚</p>
</li>
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.com%2Fstudio%2Fpreview%2Ffeatures%23screen-to-code-agent" target="_blank" title="https://developer.android.com/studio/preview/features#screen-to-code-agent" ref="nofollow noopener noreferrer">ä»å±å¹•æˆªå›¾ç”Ÿæˆä»£ç </a> æˆ–è®© Gemini <a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.com%2Fstudio%2Fpreview%2Ffeatures%23match-ui-agent" target="_blank" title="https://developer.android.com/studio/preview/features#match-ui-agent" ref="nofollow noopener noreferrer">å°†ä½ ç°æœ‰çš„ UI ä¸ç›®æ ‡å›¾åƒåŒ¹é…</a>ã€‚è¿™å¯ä»¥ä¸è¿œç¨‹ <a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.com%2Fstudio%2Fpreview%2Ffeatures%23remote-mcp" target="_blank" title="https://developer.android.com/studio/preview/features#remote-mcp" ref="nofollow noopener noreferrer">MCP æ”¯æŒ</a> ç»“åˆä½¿ç”¨ï¼Œä¾‹å¦‚è¿æ¥åˆ° Figma æ–‡ä»¶å¹¶ä»è®¾è®¡ç”Ÿæˆ Compose UIã€‚</p>
</li>
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.com%2Fstudio%2Fpreview%2Ffeatures%23find-and-fix-ui-quality-issues" target="_blank" title="https://developer.android.com/studio/preview/features#find-and-fix-ui-quality-issues" ref="nofollow noopener noreferrer">ä¿®å¤ UI è´¨é‡é—®é¢˜</a> ä¼šå®¡æ ¸ä½ çš„ UI æ˜¯å¦å­˜åœ¨å¸¸è§é—®é¢˜ï¼Œä¾‹å¦‚è¾…åŠ©åŠŸèƒ½é—®é¢˜ï¼Œç„¶åæå‡ºä¿®å¤æ–¹æ¡ˆã€‚</p>
</li>
</ul>
<p>è¦æŸ¥çœ‹è¿™äº›å·¥å…·çš„å®é™…åº”ç”¨ï¼Œè¯·è§‚çœ‹æ­¤ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.youtube.com%2Fembed%2FjTlW8JeCClA" target="_blank" title="https://www.youtube.com/embed/jTlW8JeCClA" ref="nofollow noopener noreferrer">æœ€æ–°æ¼”ç¤º</a>ã€‚</p>
<h2 data-id="heading-14">å°½æƒ…åˆ›ä½œ</h2>
<p>æˆ‘ä»¬æŒç»­æŠ•å…¥èµ„æºå¼€å‘ Jetpack Composeï¼Œä¸ºä½ æä¾›åˆ›å»ºç¾è§‚ã€ä¸°å¯Œçš„ç”¨æˆ·ç•Œé¢æ‰€éœ€çš„ API å’Œå·¥å…·ã€‚æˆ‘ä»¬é‡è§†ä½ çš„åé¦ˆï¼Œè¯·åœ¨æˆ‘ä»¬çš„<a href="https://link.juejin.cn?target=https%3A%2F%2Fissuetracker.google.com%2Fissues%2Fnew%3Fcomponent%3D612128" target="_blank" title="https://issuetracker.google.com/issues/new?component=612128" ref="nofollow noopener noreferrer">é—®é¢˜è·Ÿè¸ªå™¨</a>ä¸­åˆ†äº«ä½ å¯¹è¿™äº›æ›´æ”¹çš„åé¦ˆï¼Œæˆ–ä½ å¸Œæœ›çœ‹åˆ°çš„åç»­åŠŸèƒ½ã€‚</p>
<blockquote>
<p>æ¬¢è¿æœç´¢å¹¶å…³æ³¨ <em>å…¬ä¼—å·<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fmp%2Fqrcode%3Fscene%3D10000004%26size%3D512%26__biz%3DMzU1MDg0NDczNA%3D%3D%26mid%3D2247484417%26idx%3D1%26sn%3D60c15f0d3c4be75e37748c2472a74102" target="_blank" title="https://mp.weixin.qq.com/mp/qrcode?scene=10000004&amp;size=512&amp;__biz=MzU1MDg0NDczNA==&amp;mid=2247484417&amp;idx=1&amp;sn=60c15f0d3c4be75e37748c2472a74102" ref="nofollow noopener noreferrer">ã€Œç¨€æœ‰çŒ¿è¯‰ã€</a></em> è·å–æ›´å¤šçš„ä¼˜è´¨æ–‡ç« ï¼</p>
<p>ä¿æŠ¤åŸåˆ›ï¼Œè¯·å‹¿è½¬è½½ï¼</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Android CameraXé€‚é…Android15]]></title>    <link>https://juejin.cn/post/7582786655473664043</link>    <guid>https://juejin.cn/post/7582786655473664043</guid>    <pubDate>2025-12-12T15:24:27.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582786655473664043" data-draft-id="7582846276505616422" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Android CameraXé€‚é…Android15"/> <meta itemprop="keywords" content="Android"/> <meta itemprop="datePublished" content="2025-12-12T15:24:27.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Androidå°æ¸£æ¸£"/> <meta itemprop="url" content="https://juejin.cn/user/2119514151720222"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Android CameraXé€‚é…Android15
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2119514151720222/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Androidå°æ¸£æ¸£
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-12T15:24:27.000Z" title="Fri Dec 12 2025 15:24:27 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Android CameraXé€‚é…Android15</h2>
<h2 data-id="heading-1">1.å‰è¨€ï¼š</h2>
<p>æœ€è¿‘10æœˆåˆæŠŠå…¬å¸çš„é¡¹ç›®å‡çº§åˆ°äº†Android15ï¼Œä½†æ˜¯å‘ç°äº†å¾ˆå¤šé—®é¢˜ï¼Œè¿™è¿™å…¶ä¸­æœ€æ¶å¿ƒçš„æ˜¯Android15EdgeToEdgeé€‚é… ï¼Œå› ä¸ºè¿™ä¸ªæ‰€æœ‰ç•Œé¢éƒ½è¦ä¿®æ”¹ï¼Œä¹‹å‰çš„å¯¼èˆªæ å’ŒçŠ¶æ€æ éƒ½å¤±æ•ˆäº†ï¼Œä»Šå¤©æ˜¯è®²è§£CameraXå‡çº§15çš„è¿‡ç¨‹ï¼Œç›´æ¥ä¸Šä»£ç ã€‚</p>
<h2 data-id="heading-2">2.edge-to-edgeå…¨é¢å±ï¼š</h2>
<p>åœ¨Android 15è®¾å¤‡ä¸Šï¼Œè‹¥åº”ç”¨ç¨‹åºçš„targetSDKç‰ˆæœ¬å¤§äºç­‰äºAndroid 15ï¼Œåˆ™å¿…é¡» <strong>å¼ºåˆ¶è¿›è¡Œå…¨å±å±•ç¤º</strong>ï¼ŒåŒæ—¶çŠ¶æ€æ å’Œå¯¼èˆªæ å°†é€æ˜åŒ–å¤„ç†ã€‚å¯¹äºtargetSDKç‰ˆæœ¬å°äºAndroid 15çš„åº”ç”¨ï¼Œå…¶é»˜è®¤ä¸ä¼šå¯ç”¨è¾¹åˆ°è¾¹ç‰¹æ€§ï¼Œå³ç”¨æˆ·å±‚çš„Viewä»ä¼šä¿æŒåœ¨çŠ¶æ€æ å’Œå¯¼èˆªæ ä¹‹é—´ã€‚</p>
<p>æ­¤å¤–ï¼Œåœ¨Android 15å¹³å°ä¸Šï¼Œå…ˆå‰ç”¨äºè®¾ç½®ç³»ç»Ÿæ é¢œè‰²çš„APIï¼Œå¦‚setNavigationBarColorç­‰ï¼Œå°†è¢«å¼ƒç”¨ã€‚å³ä¾¿ä½¿ç”¨è¿™äº›æ–¹æ³•è¿›è¡Œè®¾ç½®ï¼Œç³»ç»Ÿä¹Ÿå°†é»˜è®¤æä¾›æ²‰æµ¸å¼ä½“éªŒã€‚</p>
<p>ç®€é€‚é…ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-scss" lang="scss"> Â  Â override fun <span class="hljs-built_in">onCreate</span>(savedInstanceState: Bundle?) {
 Â  Â  Â  Â super<span class="hljs-selector-class">.onCreate</span>(savedInstanceState)
 Â  Â  Â  Â <span class="hljs-built_in">enableEdgeToEdge</span>()
 Â  Â  Â  Â <span class="hljs-built_in">setContentView</span>(R.layout.activity_main)
 Â  Â  Â  Â <span class="hljs-built_in">initPermission</span>()
 Â  Â  Â  Â <span class="hljs-built_in">initView</span>()
 Â  Â  Â  Â val window = window
 Â  Â  Â  Â WindowCompat<span class="hljs-selector-class">.setDecorFitsSystemWindows</span>(window, false)
 Â  Â  Â  Â ViewCompat<span class="hljs-selector-class">.setOnApplyWindowInsetsListener</span>(rootView) { v, insets -&gt;
 Â  Â  Â  Â  Â  Â val stateBars = insets<span class="hljs-selector-class">.getInsets</span>(WindowInsetsCompat.Type.statusBars())
 Â  Â  Â  Â  Â  Â v<span class="hljs-selector-class">.setPadding</span>(stateBars.left, <span class="hljs-number">0</span>, stateBars.right, <span class="hljs-number">0</span>)
 Â  Â  Â  Â  Â  Â insets
 Â  Â  Â   }
 Â   }
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e94e5160399e4b048e22f3bf1434e10e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQW5kcm9pZOWwj-a4o-a4ow==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766157871&amp;x-signature=IDwhImZYogWR9K4SDuzVh%2BBMjqs%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-3">3.å‡çº§åæŠ¥é”™ï¼š</h2>
<p>æ‰“å¼€ç³»ç»Ÿæ‹ç…§ç•Œé¢åè¿”å›ï¼Œå°±ç›´æ¥å´©æºƒäº†ï¼Œå´©æºƒä¿¡æ¯å¦‚ä¸‹ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2e8aa1b11515491ea8b000b27e3c486a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQW5kcm9pZOWwj-a4o-a4ow==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766157871&amp;x-signature=6gLo2%2FTnCcWL7eArGV0Y6yC4COs%3D" alt="image.png" loading="lazy"/></p>
<pre><code class="hljs language-php" lang="php"> Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Process: com.example.cameraxdemo, PID: <span class="hljs-number">17531</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â java.lang.<span class="hljs-built_in">RuntimeException</span>: Failure delivering result ResultInfo{who=<span class="hljs-literal">null</span>, request=<span class="hljs-number">102</span>, result=-<span class="hljs-number">1</span>, data=<span class="hljs-literal">null</span>} to activity {com.example.cameraxdemo/com.example.cameraxdemo.activity.CameraActivity}: java.lang.IllegalArgumentException: Mutation of _data is not allowed.
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â       at android.app.ActivityThread.<span class="hljs-title function_ invoke__">deliverResults</span>(ActivityThread.<span class="hljs-attr">java</span>:<span class="hljs-number">6371</span>)
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â       at android.app.ActivityThread.<span class="hljs-title function_ invoke__">handleSendResult</span>(ActivityThread.<span class="hljs-attr">java</span>:<span class="hljs-number">6410</span>)
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â       at android.app.servertransaction.ActivityResultItem.<span class="hljs-title function_ invoke__">execute</span>(ActivityResultItem.<span class="hljs-attr">java</span>:<span class="hljs-number">69</span>)
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â       at android.app.servertransaction.ActivityTransactionItem.<span class="hljs-title function_ invoke__">execute</span>(ActivityTransactionItem.<span class="hljs-attr">java</span>:<span class="hljs-number">60</span>)
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â       at android.app.servertransaction.TransactionExecutor.<span class="hljs-title function_ invoke__">executeNonLifecycleItem</span>(TransactionExecutor.<span class="hljs-attr">java</span>:<span class="hljs-number">179</span>)
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â       at android.app.servertransaction.TransactionExecutor.<span class="hljs-title function_ invoke__">executeTransactionItems</span>(TransactionExecutor.<span class="hljs-attr">java</span>:<span class="hljs-number">114</span>)
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â       at android.app.servertransaction.TransactionExecutor.<span class="hljs-title function_ invoke__">execute</span>(TransactionExecutor.<span class="hljs-attr">java</span>:<span class="hljs-number">86</span>)
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â       at android.app.ActivityThread<span class="hljs-variable">$H</span>.<span class="hljs-title function_ invoke__">handleMessage</span>(ActivityThread.<span class="hljs-attr">java</span>:<span class="hljs-number">2914</span>)
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â       at android.os.Handler.<span class="hljs-title function_ invoke__">dispatchMessage</span>(Handler.<span class="hljs-attr">java</span>:<span class="hljs-number">112</span>)
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â       at android.os.Looper.<span class="hljs-title function_ invoke__">loopOnce</span>(Looper.<span class="hljs-attr">java</span>:<span class="hljs-number">288</span>)
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â       at android.os.Looper.<span class="hljs-title function_ invoke__">loop</span>(Looper.<span class="hljs-attr">java</span>:<span class="hljs-number">393</span>)
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â       at android.app.ActivityThread.<span class="hljs-title function_ invoke__">main</span>(ActivityThread.<span class="hljs-attr">java</span>:<span class="hljs-number">9564</span>)
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â       at java.lang.reflect.Method.<span class="hljs-title function_ invoke__">invoke</span>(Native Method)
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â       at com.android.internal.os.RuntimeInit<span class="hljs-variable">$MethodAndArgsCaller</span>.<span class="hljs-title function_ invoke__">run</span>(RuntimeInit.<span class="hljs-attr">java</span>:<span class="hljs-number">600</span>)
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â       at com.android.internal.os.ZygoteInit.<span class="hljs-title function_ invoke__">main</span>(ZygoteInit.<span class="hljs-attr">java</span>:<span class="hljs-number">1010</span>)
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Caused by: java.lang.IllegalArgumentException: Mutation of _data is not allowed.
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â       at android.database.DatabaseUtils.<span class="hljs-title function_ invoke__">readExceptionFromParcel</span>(DatabaseUtils.<span class="hljs-attr">java</span>:<span class="hljs-number">185</span>)
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â       at android.database.DatabaseUtils.<span class="hljs-title function_ invoke__">readExceptionFromParcel</span>(DatabaseUtils.<span class="hljs-attr">java</span>:<span class="hljs-number">155</span>)
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â       at android.content.ContentProviderProxy.<span class="hljs-title function_ invoke__">insert</span>(ContentProviderNative.<span class="hljs-attr">java</span>:<span class="hljs-number">589</span>)
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â       at android.content.ContentResolver.<span class="hljs-title function_ invoke__">insert</span>(ContentResolver.<span class="hljs-attr">java</span>:<span class="hljs-number">2241</span>)
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â       at android.content.ContentResolver.<span class="hljs-title function_ invoke__">insert</span>(ContentResolver.<span class="hljs-attr">java</span>:<span class="hljs-number">2197</span>)
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â       at com.example.cameraxdemo.utils.FileUtil.<span class="hljs-title function_ invoke__">getHeadJpgFile</span>(FileUtil.<span class="hljs-attr">java</span>:<span class="hljs-number">1427</span>)
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â       at com.example.cameraxdemo.activity.CameraActivity.<span class="hljs-title function_ invoke__">workCropFun</span>(CameraActivity.<span class="hljs-attr">kt</span>:<span class="hljs-number">100</span>)
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â       at com.example.cameraxdemo.activity.CameraActivity.<span class="hljs-title function_ invoke__">onActivityResult</span>(CameraActivity.<span class="hljs-attr">kt</span>:<span class="hljs-number">139</span>)
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â       at android.app.Activity.<span class="hljs-title function_ invoke__">onActivityResult</span>(Activity.<span class="hljs-attr">java</span>:<span class="hljs-number">7666</span>)
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â       at android.app.Activity.<span class="hljs-title function_ invoke__">internalDispatchActivityResult</span>(Activity.<span class="hljs-attr">java</span>:<span class="hljs-number">9588</span>)
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â       at android.app.Activity.<span class="hljs-title function_ invoke__">dispatchActivityResult</span>(Activity.<span class="hljs-attr">java</span>:<span class="hljs-number">9565</span>)
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â       at android.app.ActivityThread.<span class="hljs-title function_ invoke__">deliverResults</span>(ActivityThread.<span class="hljs-attr">java</span>:<span class="hljs-number">6360</span>)
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â       at android.app.ActivityThread.<span class="hljs-title function_ invoke__">handleSendResult</span>(ActivityThread.<span class="hljs-attr">java</span>:<span class="hljs-number">6410</span>) 
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â       at android.app.servertransaction.ActivityResultItem.<span class="hljs-title function_ invoke__">execute</span>(ActivityResultItem.<span class="hljs-attr">java</span>:<span class="hljs-number">69</span>) 
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â       at android.app.servertransaction.ActivityTransactionItem.<span class="hljs-title function_ invoke__">execute</span>(ActivityTransactionItem.<span class="hljs-attr">java</span>:<span class="hljs-number">60</span>) 
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â       at android.app.servertransaction.TransactionExecutor.<span class="hljs-title function_ invoke__">executeNonLifecycleItem</span>(TransactionExecutor.<span class="hljs-attr">java</span>:<span class="hljs-number">179</span>) 
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â       at android.app.servertransaction.TransactionExecutor.<span class="hljs-title function_ invoke__">executeTransactionItems</span>(TransactionExecutor.<span class="hljs-attr">java</span>:<span class="hljs-number">114</span>) 
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â       at android.app.servertransaction.TransactionExecutor.<span class="hljs-title function_ invoke__">execute</span>(TransactionExecutor.<span class="hljs-attr">java</span>:<span class="hljs-number">86</span>) 
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â       at android.app.ActivityThread<span class="hljs-variable">$H</span>.<span class="hljs-title function_ invoke__">handleMessage</span>(ActivityThread.<span class="hljs-attr">java</span>:<span class="hljs-number">2914</span>) 
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â       at android.os.Handler.<span class="hljs-title function_ invoke__">dispatchMessage</span>(Handler.<span class="hljs-attr">java</span>:<span class="hljs-number">112</span>) 
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â       at android.os.Looper.<span class="hljs-title function_ invoke__">loopOnce</span>(Looper.<span class="hljs-attr">java</span>:<span class="hljs-number">288</span>) 
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â       at android.os.Looper.<span class="hljs-title function_ invoke__">loop</span>(Looper.<span class="hljs-attr">java</span>:<span class="hljs-number">393</span>) 
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â       at android.app.ActivityThread.<span class="hljs-title function_ invoke__">main</span>(ActivityThread.<span class="hljs-attr">java</span>:<span class="hljs-number">9564</span>) 
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â       at java.lang.reflect.Method.<span class="hljs-title function_ invoke__">invoke</span>(Native Method) 
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â       at com.android.internal.os.RuntimeInit<span class="hljs-variable">$MethodAndArgsCaller</span>.<span class="hljs-title function_ invoke__">run</span>(RuntimeInit.<span class="hljs-attr">java</span>:<span class="hljs-number">600</span>) 
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â       at com.android.internal.os.ZygoteInit.<span class="hljs-title function_ invoke__">main</span>(ZygoteInit.<span class="hljs-attr">java</span>:<span class="hljs-number">1010</span>) 
</code></pre>
<h2 data-id="heading-4">4.æŠ¥é”™çš„æ ¸å¿ƒä»£ç ï¼š</h2>
<pre><code class="hljs language-ini" lang="ini"> Â  Â public static Object getHeadJpgFile() {
 Â  Â  Â  Â String <span class="hljs-attr">fileName</span> = System.currentTimeMillis() + FileManager.JPG_SUFFIX<span class="hljs-comment">;</span>
 Â  Â  Â  Â String <span class="hljs-attr">headPath</span> = FileManager.getAvatarPath(fileName)<span class="hljs-comment">;</span>
 Â  Â  Â  Â File imgFile<span class="hljs-comment">;</span>
 Â  Â  Â  Â if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.R) {
 Â  Â  Â  Â  Â  Â <span class="hljs-attr">imgFile</span> = new File(headPath)<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â // é€šè¿‡ MediaStore API æ’å…¥file ä¸ºäº†æ‹¿åˆ°ç³»ç»Ÿè£å‰ªè¦ä¿å­˜åˆ°çš„uriï¼ˆå› ä¸ºAppæ²¡æœ‰æƒé™ä¸èƒ½è®¿é—®å…¬å…±å­˜å‚¨ç©ºé—´ï¼Œéœ€è¦é€šè¿‡ MediaStore APIæ¥æ“ä½œï¼‰
 Â  Â  Â  Â  Â  Â ContentValues <span class="hljs-attr">values</span> = new ContentValues()<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â values.put(MediaStore.Images.Media.DATA, imgFile.getAbsolutePath())<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â values.put(MediaStore.Images.Media.DISPLAY_NAME, fileName)<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â values.put(MediaStore.Images.Media.MIME_TYPE, "image/jpeg")<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â return CameraApp.Companion.getMInstance().getContentResolver().insert(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, values)<span class="hljs-comment">;</span>
 Â  Â  Â   } else {
 Â  Â  Â  Â  Â  Â <span class="hljs-attr">imgFile</span> = new File(headPath)<span class="hljs-comment">;</span>
 Â  Â  Â   }
 Â  Â  Â  Â return imgFile<span class="hljs-comment">;</span>
 Â   }
</code></pre>
<h2 data-id="heading-5">5.æŠ¥é”™åŸå› åˆ†æï¼š</h2>
<p>è¯¥é”™è¯¯çš„æ ¸å¿ƒåŸå› æ˜¯<strong>å°è¯•ä¿®æ”¹ Android ç³»ç»Ÿä¸­å—ä¿æŠ¤çš„ <code>_data</code> å­—æ®µ</strong>ã€‚<code>_data</code> æ˜¯åª’ä½“åº“ï¼ˆMediaStoreï¼‰ä¸­å­˜å‚¨æ–‡ä»¶è·¯å¾„çš„å­—æ®µï¼ŒAndroid ä» API 29ï¼ˆAndroid 10ï¼‰å¼€å§‹é™åˆ¶ç›´æ¥ä¿®æ”¹è¯¥å­—æ®µï¼Œå¼ºåˆ¶è¦æ±‚ä½¿ç”¨ MediaStore çš„è§„èŒƒ API è¿›è¡Œæ–‡ä»¶æ“ä½œï¼Œç¦æ­¢é€šè¿‡ ContentResolver ç›´æ¥æ’å…¥æˆ–ä¿®æ”¹ <code>_data</code> å­—æ®µï¼Œå¦åˆ™ä¼šæŠ›å‡º <code>IllegalArgumentException: Mutation of _data is not allowed</code> å¼‚å¸¸ã€‚</p>
<p>ä»æŠ¥é”™å †æ ˆçœ‹ï¼Œé—®é¢˜å‡ºç°åœ¨ <code>FileUtil.getHeadJpgFile()</code> æ–¹æ³•ä¸­é€šè¿‡ <code>ContentResolver.insert()</code> æ“ä½œåª’ä½“åº“æ—¶ï¼Œè¯•å›¾è®¾ç½® <code>_data</code> å­—æ®µçš„å€¼ï¼Œè¿åäº†ç³»ç»Ÿé™åˆ¶ã€‚</p>
<h2 data-id="heading-6">6.è§£å†³æ–¹æ³•ï¼š</h2>
<h3 data-id="heading-7">6.1 ç›´æ¥å»æ‰æ­¤å±æ€§è®¾ç½®ï¼š</h3>
<pre><code class="hljs language-ini" lang="ini"> Â  Â public static Object getHeadJpgFile() {
 Â  Â  Â  Â String <span class="hljs-attr">fileName</span> = System.currentTimeMillis() + FileManager.JPG_SUFFIX<span class="hljs-comment">;</span>
 Â  Â  Â  Â String <span class="hljs-attr">headPath</span> = FileManager.getAvatarPath(fileName)<span class="hljs-comment">;</span>
 Â  Â  Â  Â File imgFile<span class="hljs-comment">;</span>
 Â  Â  Â  Â if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.R) {
 Â  Â  Â  Â  Â  Â <span class="hljs-attr">imgFile</span> = new File(headPath)<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â // é€šè¿‡ MediaStore API æ’å…¥file ä¸ºäº†æ‹¿åˆ°ç³»ç»Ÿè£å‰ªè¦ä¿å­˜åˆ°çš„uriï¼ˆå› ä¸ºAppæ²¡æœ‰æƒé™ä¸èƒ½è®¿é—®å…¬å…±å­˜å‚¨ç©ºé—´ï¼Œéœ€è¦é€šè¿‡ MediaStore APIæ¥æ“ä½œï¼‰
 Â  Â  Â  Â  Â  Â ContentValues <span class="hljs-attr">values</span> = new ContentValues()<span class="hljs-comment">;</span>
// Â  Â  Â  Â  Â   values.put(MediaStore.Images.Media.DATA, imgFile.getAbsolutePath())<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â values.put(MediaStore.Images.Media.DISPLAY_NAME, fileName)<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â values.put(MediaStore.Images.Media.MIME_TYPE, "image/jpeg")<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â return CameraApp.Companion.getMInstance().getContentResolver().insert(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, values)<span class="hljs-comment">;</span>
 Â  Â  Â   } else {
 Â  Â  Â  Â  Â  Â <span class="hljs-attr">imgFile</span> = new File(headPath)<span class="hljs-comment">;</span>
 Â  Â  Â   }
 Â  Â  Â  Â return imgFile<span class="hljs-comment">;</span>
 Â   }
</code></pre>
<h3 data-id="heading-8">6.2 ä½¿ç”¨<code>MediaStore</code>çš„å…¶ä»–å±æ€§ï¼š</h3>
<p>RELATIVE_PATHã€DISPLAY_NAMEç­‰.</p>
<pre><code class="hljs language-ini" lang="ini"> Â  Â /**
 Â  Â  * è·å–jpgå›¾ç‰‡è¾“å‡ºè·¯å¾„
 Â  Â  *
 Â  Â  * @return è¾“å‡ºè·¯å¾„
 Â  Â  */
 Â  Â public static Object getHeadJpgFile() {
 Â  Â  Â  Â String <span class="hljs-attr">fileName</span> = System.currentTimeMillis() + FileManager.JPG_SUFFIX<span class="hljs-comment">;</span>
 Â  Â  Â  Â String <span class="hljs-attr">headPath</span> = FileManager.getAvatarPath(fileName)<span class="hljs-comment">;</span>
 Â  Â  Â  Â File imgFile<span class="hljs-comment">;</span>
 Â  Â  Â  Â if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.R) {
 Â  Â  Â  Â  Â  Â <span class="hljs-attr">imgFile</span> = new File(headPath)<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â // é€šè¿‡ MediaStore API æ’å…¥file ä¸ºäº†æ‹¿åˆ°ç³»ç»Ÿè£å‰ªè¦ä¿å­˜åˆ°çš„uriï¼ˆå› ä¸ºAppæ²¡æœ‰æƒé™ä¸èƒ½è®¿é—®å…¬å…±å­˜å‚¨ç©ºé—´ï¼Œéœ€è¦é€šè¿‡ MediaStore APIæ¥æ“ä½œï¼‰
 Â  Â  Â  Â  Â  Â ContentValues <span class="hljs-attr">values</span> = new ContentValues()<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â //æ–¹å¼1å»æ‰Media.DATA
 Â  Â  Â  Â  Â  Â //values.put(MediaStore.Images.Media.DATA, imgFile.getAbsolutePath())<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â //æ–¹å¼2ä½¿ç”¨MediaStoreã€‚RELATIVE_PATH
 Â  Â  Â  Â  Â  Â values.put(MediaStore.Images.Media.RELATIVE_PATH, Environment.DIRECTORY_DCIM + "/CustomFolder")<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â values.put(MediaStore.Images.Media.DISPLAY_NAME, fileName)<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â values.put(MediaStore.Images.Media.MIME_TYPE, "image/jpeg")<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â return CameraApp.Companion.getMInstance().getContentResolver().insert(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, values)<span class="hljs-comment">;</span>
 Â  Â  Â   } else {
 Â  Â  Â  Â  Â  Â <span class="hljs-attr">imgFile</span> = new File(headPath)<span class="hljs-comment">;</span>
 Â  Â  Â   }
 Â  Â  Â  Â return imgFile<span class="hljs-comment">;</span>
 Â   }public static Object getHeadJpgFile() {
 Â  Â String <span class="hljs-attr">fileName</span> = System.currentTimeMillis() + FileManager.JPG_SUFFIX<span class="hljs-comment">;</span>
 Â  Â String <span class="hljs-attr">headPath</span> = FileManager.getAvatarPath(fileName)<span class="hljs-comment">;</span>
 Â  Â File imgFile<span class="hljs-comment">;</span>
 Â  Â if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.R) {
 Â  Â  Â  Â <span class="hljs-attr">imgFile</span> = new File(headPath)<span class="hljs-comment">;</span>
 Â  Â  Â  Â // é€šè¿‡ MediaStore API æ’å…¥file ä¸ºäº†æ‹¿åˆ°ç³»ç»Ÿè£å‰ªè¦ä¿å­˜åˆ°çš„uriï¼ˆå› ä¸ºAppæ²¡æœ‰æƒé™ä¸èƒ½è®¿é—®å…¬å…±å­˜å‚¨ç©ºé—´ï¼Œéœ€è¦é€šè¿‡ MediaStore APIæ¥æ“ä½œï¼‰
 Â  Â  Â  Â ContentValues <span class="hljs-attr">values</span> = new ContentValues()<span class="hljs-comment">;</span>
 Â  Â  Â  Â values.put(MediaStore.Images.Media.RELATIVE_PATH, Environment.DIRECTORY_DCIM + "/CustomFolder")<span class="hljs-comment">;</span>
 Â  Â  Â  Â values.put(MediaStore.Images.Media.DISPLAY_NAME, fileName)<span class="hljs-comment">;</span>
 Â  Â  Â  Â values.put(MediaStore.Images.Media.MIME_TYPE, "image/jpeg")<span class="hljs-comment">;</span>
 Â  Â  Â  Â return CameraApp.Companion.getMInstance().getContentResolver().insert(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, values)<span class="hljs-comment">;</span>
 Â   } else {
 Â  Â  Â  Â <span class="hljs-attr">imgFile</span> = new File(headPath)<span class="hljs-comment">;</span>
 Â   }
 Â  Â return imgFile<span class="hljs-comment">;</span>
}
</code></pre>
<h2 data-id="heading-9">7.è¿è¡Œæ•ˆæœï¼š</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6469eb54ec0040e6a43439e827658c58~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQW5kcm9pZOWwj-a4o-a4ow==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766157871&amp;x-signature=iKajDfHr%2Fe2N4EeJM4JFvBzHg4Y%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a20fc7b989e7419f87fe4d97fdf8627c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQW5kcm9pZOWwj-a4o-a4ow==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766157871&amp;x-signature=i9uSxgpNMR8azn535wEZw%2B%2FepFM%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dd3e0f52b7ef4625a3f948c3b7b90749~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQW5kcm9pZOWwj-a4o-a4ow==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766157871&amp;x-signature=jaJb%2FBLDm2nTWvmL5wETGvKxot8%3D" alt="image.png" loading="lazy"/>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/852ba4ebe76a4bb4b080cbd7b471aa0a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQW5kcm9pZOWwj-a4o-a4ow==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766157871&amp;x-signature=BC0DQA1G52%2FOBOavSpHTSHusXfA%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-10">8.ä¿®æ”¹åƒç´ è§£å†³æ¨¡ç³Šé—®é¢˜ï¼š</h2>
<p>putExtra("outputX", 1000) // è£å‰ªæ¡†å®½åº¦
putExtra("outputY", 1000)
æ ¹æ®å®é™…éœ€è¦è‡ªè¡Œä¿®æ”¹å³å¯ï¼Œè¿™é‡Œåªæ˜¯ç®€å•ä¸¾ä¾‹.</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">/**
 * ç³»ç»Ÿè£å‰ªæ–¹æ³•
 */</span>
private fun <span class="hljs-built_in">workCropFun</span>(imgPathUri: Uri?) {
    mUploadImageUri = null
    mUploadImageFile = null
    if (imgPathUri != null) {
        val imageObject: Any = FileUtil.<span class="hljs-built_in">getHeadJpgFile</span>()
        if (imageObject is Uri) {
            mUploadImageUri = imageObject
        }
        if (imageObject is File) {
            mUploadImageFile = imageObject
        }
        val intent = <span class="hljs-built_in">Intent</span>("com.android.camera.action.CROP")
        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.N) {
            intent<span class="hljs-selector-class">.addFlags</span>(Intent.FLAG_GRANT_READ_URI_PERMISSION)
        }
        intent<span class="hljs-selector-class">.run</span> {
            <span class="hljs-built_in">setDataAndType</span>(imgPathUri, "image/*")<span class="hljs-comment">// å›¾ç‰‡èµ„æº</span>
            <span class="hljs-built_in">putExtra</span>("crop", "true") <span class="hljs-comment">// è£å‰ª</span>
            <span class="hljs-built_in">putExtra</span>("aspectX", <span class="hljs-number">1</span>) <span class="hljs-comment">// å®½åº¦æ¯”</span>
            <span class="hljs-built_in">putExtra</span>("aspectY", <span class="hljs-number">1</span>) <span class="hljs-comment">// é«˜åº¦æ¯”</span>
            <span class="hljs-built_in">putExtra</span>("outputX", <span class="hljs-number">1000</span>) <span class="hljs-comment">// è£å‰ªæ¡†å®½åº¦</span>
            <span class="hljs-built_in">putExtra</span>("outputY", <span class="hljs-number">1000</span>) <span class="hljs-comment">// è£å‰ªæ¡†é«˜åº¦</span>
            <span class="hljs-built_in">putExtra</span>("scale", true) <span class="hljs-comment">// ç¼©æ”¾</span>
            <span class="hljs-built_in">putExtra</span>("return-data", false) <span class="hljs-comment">// true-è¿”å›ç¼©ç•¥å›¾-dataï¼Œfalse-ä¸è¿”å›-éœ€è¦é€šè¿‡Uri</span>
            <span class="hljs-built_in">putExtra</span>("outputFormat", Bitmap.CompressFormat.JPEG.toString()) <span class="hljs-comment">// ä¿å­˜çš„å›¾ç‰‡æ ¼å¼</span>
            <span class="hljs-built_in">putExtra</span>("noFaceDetection", true) <span class="hljs-comment">// å–æ¶ˆäººè„¸è¯†åˆ«</span>
            <span class="hljs-built_in">putExtra</span>("quality", <span class="hljs-number">100</span>)
            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.R) {
                <span class="hljs-built_in">putExtra</span>(MediaStore.EXTRA_OUTPUT, mUploadImageUri)
            } else {
                val imgCropUri = Uri<span class="hljs-selector-class">.fromFile</span>(mUploadImageFile)
                <span class="hljs-built_in">putExtra</span>(MediaStore.EXTRA_OUTPUT, imgCropUri)
            }
        }
        <span class="hljs-built_in">startActivityForResult</span>(
            intent, REQUEST_CODE_CROP
        )
    }
}
</code></pre>
<h2 data-id="heading-11">9.æ—¥å¿—æ‰“å°ï¼š</h2>
<h3 data-id="heading-12">9.1 ä½¿ç”¨RELATIVE_PATHæ–¹å¼</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bd8784e5e9ff483a9f2ed348dfca583e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQW5kcm9pZOWwj-a4o-a4ow==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766157871&amp;x-signature=4AO8aSyCF0Nci0RRnH0lvplMic8%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-13">9.2 å»æ‰Media.DATA</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b330b06b1d5e4038a0d02d1c3a6f9b9a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQW5kcm9pZOWwj-a4o-a4ow==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766157871&amp;x-signature=REYkdd1unyFUh%2FyMk%2BJAvXYFoMA%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-14">10.å®Œæ•´æµ‹è¯•ä»£ç ï¼š</h2>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">package</span> com.example.cameraxdemo
â€‹
<span class="hljs-keyword">import</span> android.Manifest
<span class="hljs-keyword">import</span> android.<span class="hljs-keyword">annotation</span>.SuppressLint
<span class="hljs-keyword">import</span> android.content.Intent
<span class="hljs-keyword">import</span> android.content.pm.PackageManager
<span class="hljs-keyword">import</span> android.graphics.Color
<span class="hljs-keyword">import</span> android.media.MediaScannerConnection
<span class="hljs-keyword">import</span> android.net.Uri
<span class="hljs-keyword">import</span> android.os.Build
<span class="hljs-keyword">import</span> android.os.Bundle
<span class="hljs-keyword">import</span> android.os.Environment
<span class="hljs-keyword">import</span> android.view.View
<span class="hljs-keyword">import</span> android.view.WindowManager
<span class="hljs-keyword">import</span> android.webkit.MimeTypeMap
<span class="hljs-keyword">import</span> android.widget.Button
<span class="hljs-keyword">import</span> androidx.activity.enableEdgeToEdge
<span class="hljs-keyword">import</span> androidx.appcompat.app.AppCompatActivity
<span class="hljs-keyword">import</span> androidx.camera.core.AspectRatio
<span class="hljs-keyword">import</span> androidx.camera.core.Camera
<span class="hljs-keyword">import</span> androidx.camera.core.CameraSelector
<span class="hljs-keyword">import</span> androidx.camera.core.ImageCapture
<span class="hljs-keyword">import</span> androidx.camera.core.ImageCaptureException
<span class="hljs-keyword">import</span> androidx.camera.core.Preview
<span class="hljs-keyword">import</span> androidx.camera.core.VideoCapture
<span class="hljs-keyword">import</span> androidx.camera.core.VideoCapture.OnVideoSavedCallback
<span class="hljs-keyword">import</span> androidx.camera.core.VideoCapture.OutputFileOptions
<span class="hljs-keyword">import</span> androidx.camera.lifecycle.ProcessCameraProvider
<span class="hljs-keyword">import</span> androidx.camera.view.PreviewView
<span class="hljs-keyword">import</span> androidx.core.app.ActivityCompat
<span class="hljs-keyword">import</span> androidx.core.content.ContextCompat
<span class="hljs-keyword">import</span> androidx.core.net.toFile
<span class="hljs-keyword">import</span> androidx.core.view.ViewCompat
<span class="hljs-keyword">import</span> androidx.core.view.WindowCompat
<span class="hljs-keyword">import</span> androidx.core.view.WindowInsetsCompat
<span class="hljs-keyword">import</span> com.blankj.utilcode.util.LogUtils
<span class="hljs-keyword">import</span> com.example.cameraxdemo.activity.CameraActivity
<span class="hljs-keyword">import</span> com.example.cameraxdemo.utils.Constants
<span class="hljs-keyword">import</span> com.example.cameraxdemo.utils.Constants.Companion.DATE_FORMAT
<span class="hljs-keyword">import</span> com.example.cameraxdemo.utils.Constants.Companion.PHOTO_EXTENSION
<span class="hljs-keyword">import</span> com.example.cameraxdemo.utils.Constants.Companion.REQUIRED_PERMISSIONS
<span class="hljs-keyword">import</span> com.example.cameraxdemo.utils.FileManager
<span class="hljs-keyword">import</span> com.example.cameraxdemo.utils.ToastUtils
<span class="hljs-keyword">import</span> com.example.cameraxdemo.utils.VideoFileUtils.createFile
<span class="hljs-keyword">import</span> com.example.cameraxdemo.utils.VideoFileUtils.getOutputDirectory
<span class="hljs-keyword">import</span> java.io.File
<span class="hljs-keyword">import</span> java.text.SimpleDateFormat
<span class="hljs-keyword">import</span> java.util.*
<span class="hljs-keyword">import</span> java.util.concurrent.ExecutorService
<span class="hljs-keyword">import</span> java.util.concurrent.Executors
â€‹
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MainActivity</span> : <span class="hljs-type">AppCompatActivity</span>() {
 Â  Â <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> imageCamera: ImageCapture? = <span class="hljs-literal">null</span>
 Â  Â <span class="hljs-keyword">private</span> <span class="hljs-keyword">lateinit</span> <span class="hljs-keyword">var</span> cameraExecutor: ExecutorService
 Â  Â <span class="hljs-meta">@SuppressLint(<span class="hljs-string">"RestrictedApi"</span>)</span>
 Â  Â <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> videoCapture: VideoCapture? = <span class="hljs-literal">null</span>
 Â  Â <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> cameraSelector = CameraSelector.DEFAULT_BACK_CAMERA<span class="hljs-comment">//å½“å‰ç›¸æœº</span>
 Â  Â <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> preview: Preview? = <span class="hljs-literal">null</span><span class="hljs-comment">//é¢„è§ˆå¯¹è±¡</span>
 Â  Â <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> cameraProvider: ProcessCameraProvider? = <span class="hljs-literal">null</span><span class="hljs-comment">//ç›¸æœºä¿¡æ¯</span>
 Â  Â <span class="hljs-keyword">private</span> <span class="hljs-keyword">lateinit</span> <span class="hljs-keyword">var</span> camera: Camera <span class="hljs-comment">//ç›¸æœºå¯¹è±¡</span>
 Â  Â <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> isRecordVideo: <span class="hljs-built_in">Boolean</span> = <span class="hljs-literal">false</span>
 Â  Â <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> TAG = <span class="hljs-string">"CameraXApp"</span>
 Â  Â <span class="hljs-keyword">private</span> <span class="hljs-keyword">lateinit</span> <span class="hljs-keyword">var</span> outputDirectory: File
 Â  Â <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> lensFacing: <span class="hljs-built_in">Int</span> = CameraSelector.LENS_FACING_BACK
 Â  Â <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> btnCameraCapture: Button <span class="hljs-keyword">by</span> lazy { findViewById(R.id.btnCameraCapture) }
 Â  Â <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> btnVideo: Button <span class="hljs-keyword">by</span> lazy { findViewById(R.id.btnVideo) }
 Â  Â <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> btnSwitch: Button <span class="hljs-keyword">by</span> lazy { findViewById(R.id.btnSwitch) }
 Â  Â <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> btnOpenCamera: Button <span class="hljs-keyword">by</span> lazy { findViewById(R.id.btnOpenCamera) }
 Â  Â <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> viewFinder: PreviewView <span class="hljs-keyword">by</span> lazy { findViewById(R.id.mPreviewView) }
 Â  Â <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> rootView : View <span class="hljs-keyword">by</span> lazy {findViewById(R.id.main_root) }
â€‹
 Â  Â <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreate</span><span class="hljs-params">(savedInstanceState: <span class="hljs-type">Bundle</span>?)</span></span> {
 Â  Â  Â  Â <span class="hljs-keyword">super</span>.onCreate(savedInstanceState)
 Â  Â  Â  Â enableEdgeToEdge()
 Â  Â  Â  Â setContentView(R.layout.activity_main)
 Â  Â  Â  Â initPermission()
 Â  Â  Â  Â initView()
 Â  Â  Â  Â <span class="hljs-keyword">val</span> window = window
 Â  Â  Â  Â WindowCompat.setDecorFitsSystemWindows(window, <span class="hljs-literal">false</span>)
 Â  Â  Â  Â ViewCompat.setOnApplyWindowInsetsListener(rootView) { v, insets -&gt;
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">val</span> stateBars = insets.getInsets(WindowInsetsCompat.Type.statusBars())
 Â  Â  Â  Â  Â  Â v.setPadding(stateBars.left, <span class="hljs-number">0</span>, stateBars.right, <span class="hljs-number">0</span>)
 Â  Â  Â  Â  Â  Â insets
 Â  Â  Â   }
 Â   }
â€‹
 Â  Â <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">initView</span><span class="hljs-params">()</span></span> {
 Â  Â  Â  Â outputDirectory = getOutputDirectory(<span class="hljs-keyword">this</span>)
 Â   }
â€‹
 Â  Â <span class="hljs-meta">@SuppressLint(<span class="hljs-string">"RestrictedApi"</span>)</span>
 Â  Â <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">initListener</span><span class="hljs-params">()</span></span> {
 Â  Â  Â  Â btnCameraCapture.setOnClickListener {
 Â  Â  Â  Â  Â  Â takePhoto()
 Â  Â  Â   }
 Â  Â  Â  Â btnVideo.setOnClickListener {
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">if</span> (!isRecordVideo) {
 Â  Â  Â  Â  Â  Â  Â  Â takeVideo()
 Â  Â  Â  Â  Â  Â  Â  Â isRecordVideo = <span class="hljs-literal">true</span>
 Â  Â  Â  Â  Â  Â  Â  Â btnVideo.text = <span class="hljs-string">"åœæ­¢å½•åƒ"</span>
 Â  Â  Â  Â  Â   } <span class="hljs-keyword">else</span> {
 Â  Â  Â  Â  Â  Â  Â  Â isRecordVideo = <span class="hljs-literal">false</span>
 Â  Â  Â  Â  Â  Â  Â  Â videoCapture?.stopRecording()<span class="hljs-comment">//åœæ­¢å½•åˆ¶</span>
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-comment">//preview?.clear()//æ¸…é™¤é¢„è§ˆ</span>
 Â  Â  Â  Â  Â  Â  Â  Â btnVideo.text = <span class="hljs-string">"å¼€å§‹å½•åƒ"</span>
 Â  Â  Â  Â  Â   }
 Â  Â  Â   }
 Â  Â  Â  Â btnSwitch.setOnClickListener {
 Â  Â  Â  Â  Â  Â cameraSelector = <span class="hljs-keyword">if</span> (cameraSelector == CameraSelector.DEFAULT_BACK_CAMERA) {
 Â  Â  Â  Â  Â  Â  Â  Â CameraSelector.DEFAULT_FRONT_CAMERA
 Â  Â  Â  Â  Â   } <span class="hljs-keyword">else</span> {
 Â  Â  Â  Â  Â  Â  Â  Â CameraSelector.DEFAULT_BACK_CAMERA
 Â  Â  Â  Â  Â   }
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">if</span> (!isRecordVideo) {
 Â  Â  Â  Â  Â  Â  Â  Â startCamera()
 Â  Â  Â  Â  Â   }
 Â  Â  Â   }
 Â  Â  Â  Â btnOpenCamera.setOnClickListener {
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">val</span> intent = Intent(<span class="hljs-keyword">this</span>, CameraActivity::<span class="hljs-keyword">class</span>.java)
 Â  Â  Â  Â  Â  Â startActivity(intent)
 Â  Â  Â   }
 Â   }
â€‹
â€‹
 Â  Â <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">initPermission</span><span class="hljs-params">()</span></span> {
 Â  Â  Â  Â <span class="hljs-keyword">if</span> (checkPermissions()) {
 Â  Â  Â  Â  Â  Â <span class="hljs-comment">// ImageCapture</span>
 Â  Â  Â  Â  Â  Â startCamera()
 Â  Â  Â   } <span class="hljs-keyword">else</span> {
 Â  Â  Â  Â  Â  Â requestPermission()
 Â  Â  Â   }
 Â   }
â€‹
 Â  Â <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">requestPermission</span><span class="hljs-params">()</span></span> {
 Â  Â  Â  Â <span class="hljs-keyword">when</span> {
 Â  Â  Â  Â  Â  Â Build.VERSION.SDK_INT &gt;= <span class="hljs-number">33</span> -&gt; {
 Â  Â  Â  Â  Â  Â  Â  Â ActivityCompat.requestPermissions(
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-keyword">this</span>,
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â arrayOf(Manifest.permission.READ_MEDIA_IMAGES,Manifest.permission.READ_MEDIA_AUDIO,Manifest.permission.READ_MEDIA_VIDEO,Manifest.permission.CAMERA,Manifest.permission.RECORD_AUDIO),
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Constants.REQUEST_CODE_PERMISSIONS
 Â  Â  Â  Â  Â  Â  Â   )
 Â  Â  Â  Â  Â   }
â€‹
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">else</span> -&gt; {
 Â  Â  Â  Â  Â  Â  Â  Â ActivityCompat.requestPermissions(<span class="hljs-keyword">this</span>, REQUIRED_PERMISSIONS, Constants.REQUEST_CODE_PERMISSIONS)
 Â  Â  Â  Â  Â   }
 Â  Â  Â   }
 Â   }
â€‹
â€‹
 Â  Â <span class="hljs-comment">/**
 Â  Â  * å¼€å§‹æ‹ç…§
 Â  Â  */</span>
 Â  Â <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">takePhoto</span><span class="hljs-params">()</span></span> {
 Â  Â  Â  Â <span class="hljs-keyword">val</span> imageCapture = imageCamera ?: <span class="hljs-keyword">return</span>
 Â  Â  Â  Â <span class="hljs-keyword">val</span> photoFile = createFile(outputDirectory, DATE_FORMAT, PHOTO_EXTENSION)
 Â  Â  Â  Â <span class="hljs-keyword">val</span> metadata = ImageCapture.Metadata().apply {
 Â  Â  Â  Â  Â  Â <span class="hljs-comment">// Mirror image when using the front camera</span>
 Â  Â  Â  Â  Â  Â isReversedHorizontal = lensFacing == CameraSelector.LENS_FACING_FRONT
 Â  Â  Â   }
 Â  Â  Â  Â <span class="hljs-keyword">val</span> outputOptions =
 Â  Â  Â  Â  Â  Â ImageCapture.OutputFileOptions.Builder(photoFile).setMetadata(metadata).build()
 Â  Â  Â  Â imageCapture.takePicture(outputOptions, ContextCompat.getMainExecutor(<span class="hljs-keyword">this</span>),
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">object</span> : ImageCapture.OnImageSavedCallback {
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onError</span><span class="hljs-params">(exc: <span class="hljs-type">ImageCaptureException</span>)</span></span> {
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â LogUtils.e(TAG, <span class="hljs-string">"Photo capture failed: <span class="hljs-subst">${exc.message}</span>"</span>, exc)
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â ToastUtils.shortToast(<span class="hljs-string">" æ‹ç…§å¤±è´¥ <span class="hljs-subst">${exc.message}</span>"</span>)
 Â  Â  Â  Â  Â  Â  Â   }
â€‹
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onImageSaved</span><span class="hljs-params">(output: <span class="hljs-type">ImageCapture</span>.<span class="hljs-type">OutputFileResults</span>)</span></span> {
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-keyword">val</span> savedUri = output.savedUri ?: Uri.fromFile(photoFile)
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â ToastUtils.shortToast(<span class="hljs-string">" æ‹ç…§æˆåŠŸ <span class="hljs-variable">$savedUri</span>"</span>)
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â LogUtils.e(TAG, savedUri.path.toString())
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-keyword">val</span> mimeType = MimeTypeMap.getSingleton()
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â   .getMimeTypeFromExtension(savedUri.toFile().extension)
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â MediaScannerConnection.scanFile(
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-keyword">this</span><span class="hljs-symbol">@MainActivity</span>,
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â arrayOf(savedUri.toFile().absolutePath),
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â arrayOf(mimeType)
 Â  Â  Â  Â  Â  Â  Â  Â  Â   ) { _, uri -&gt;
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â LogUtils.d(
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â TAG,
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-string">"Image capture scanned into media store: <span class="hljs-subst">${uri.path.toString()}</span>"</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â   )
 Â  Â  Â  Â  Â  Â  Â  Â  Â   }
 Â  Â  Â  Â  Â  Â  Â   }
 Â  Â  Â  Â  Â   })
 Â   }
â€‹
â€‹
 Â  Â <span class="hljs-comment">/**
 Â  Â  * å¼€å§‹å½•åƒ
 Â  Â  */</span>
 Â  Â <span class="hljs-meta">@SuppressLint(<span class="hljs-string">"RestrictedApi"</span>, <span class="hljs-string">"ClickableViewAccessibility"</span>, <span class="hljs-string">"MissingPermission"</span>)</span>
 Â  Â <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">takeVideo</span><span class="hljs-params">()</span></span> {
 Â  Â  Â  Â <span class="hljs-comment">//å¼€å§‹å½•åƒ</span>
 Â  Â  Â  Â <span class="hljs-keyword">try</span> {
 Â  Â  Â  Â  Â  Â isRecordVideo = <span class="hljs-literal">true</span>
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">val</span> mFileDateFormat = SimpleDateFormat(DATE_FORMAT, Locale.US)
 Â  Â  Â  Â  Â  Â <span class="hljs-comment">//è§†é¢‘ä¿å­˜è·¯å¾„</span>
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">val</span> file =
 Â  Â  Â  Â  Â  Â  Â  Â File(FileManager.getCameraVideoPath(), mFileDateFormat.format(Date()) + <span class="hljs-string">".mp4"</span>)
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">val</span> outputOptions = OutputFileOptions.Builder(file)
 Â  Â  Â  Â  Â  Â videoCapture?.startRecording(
 Â  Â  Â  Â  Â  Â  Â  Â outputOptions.build(),
 Â  Â  Â  Â  Â  Â  Â  Â Executors.newSingleThreadExecutor(),
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-keyword">object</span> : OnVideoSavedCallback {
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onVideoSaved</span><span class="hljs-params">(outputFileResults: <span class="hljs-type">VideoCapture</span>.<span class="hljs-type">OutputFileResults</span>)</span></span> {
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â isRecordVideo = <span class="hljs-literal">false</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-keyword">if</span>(BuildConfig.DEBUG){
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â LogUtils.d(TAG, <span class="hljs-string">"===è§†é¢‘ä¿å­˜çš„åœ°å€ä¸º=== <span class="hljs-subst">${file.absolutePath}</span>"</span>)
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â   }
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-comment">//ä¿å­˜è§†é¢‘æˆåŠŸå›è°ƒï¼Œä¼šåœ¨åœæ­¢å½•åˆ¶æ—¶è¢«è°ƒç”¨</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â ToastUtils.shortToast(<span class="hljs-string">" å½•åƒæˆåŠŸ <span class="hljs-variable">$file</span>"</span>)
 Â  Â  Â  Â  Â  Â  Â  Â  Â   }
â€‹
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onError</span><span class="hljs-params">(
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â videoCaptureError: <span class="hljs-type">Int</span>,
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â message: <span class="hljs-type">String</span>,
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â cause: <span class="hljs-type">Throwable</span>?
 Â  Â  Â  Â  Â  Â  Â  Â  Â   )</span></span> {
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-comment">//ä¿å­˜å¤±è´¥çš„å›è°ƒï¼Œå¯èƒ½åœ¨å¼€å§‹æˆ–ç»“æŸå½•åˆ¶æ—¶è¢«è°ƒç”¨</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â isRecordVideo = <span class="hljs-literal">false</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-keyword">if</span>(BuildConfig.DEBUG) {
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â LogUtils.e(TAG, <span class="hljs-string">"onError: <span class="hljs-variable">$message</span>"</span>)
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â   }
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â ToastUtils.shortToast(<span class="hljs-string">" å½•åƒå¤±è´¥ <span class="hljs-variable">$message</span>"</span>)
 Â  Â  Â  Â  Â  Â  Â  Â  Â   }
 Â  Â  Â  Â  Â  Â  Â   })
 Â  Â  Â   } <span class="hljs-keyword">catch</span> (e: Exception) {
 Â  Â  Â  Â  Â  Â e.printStackTrace()
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">if</span>(BuildConfig.DEBUG) {
 Â  Â  Â  Â  Â  Â  Â  Â LogUtils.e(TAG, <span class="hljs-string">"===å½•åƒå‡ºé”™===<span class="hljs-subst">${e.message}</span>"</span>)
 Â  Â  Â  Â  Â   }
 Â  Â  Â   }
 Â   }
â€‹
 Â  Â <span class="hljs-comment">/**
 Â  Â  * å¼€å§‹ç›¸æœºé¢„è§ˆ
 Â  Â  */</span>
 Â  Â <span class="hljs-meta">@SuppressLint(<span class="hljs-string">"RestrictedApi"</span>)</span>
 Â  Â <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">startCamera</span><span class="hljs-params">()</span></span> {
 Â  Â  Â  Â cameraExecutor = Executors.newSingleThreadExecutor()
 Â  Â  Â  Â <span class="hljs-keyword">val</span> cameraProviderFuture = ProcessCameraProvider.getInstance(<span class="hljs-keyword">this</span>)
 Â  Â  Â  Â cameraProviderFuture.addListener(Runnable {
 Â  Â  Â  Â  Â  Â cameraProvider = cameraProviderFuture.<span class="hljs-keyword">get</span>()<span class="hljs-comment">//è·å–ç›¸æœºä¿¡æ¯</span>
â€‹
 Â  Â  Â  Â  Â  Â <span class="hljs-comment">//é¢„è§ˆé…ç½®</span>
 Â  Â  Â  Â  Â  Â preview = Preview.Builder()
 Â  Â  Â  Â  Â  Â  Â   .build()
 Â  Â  Â  Â  Â  Â  Â   .also {
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â it.setSurfaceProvider(viewFinder.surfaceProvider)
 Â  Â  Â  Â  Â  Â  Â   }
â€‹
 Â  Â  Â  Â  Â  Â imageCamera = ImageCapture.Builder()
 Â  Â  Â  Â  Â  Â  Â   .setCaptureMode(ImageCapture.CAPTURE_MODE_MINIMIZE_LATENCY)
 Â  Â  Â  Â  Â  Â  Â   .build()
â€‹
 Â  Â  Â  Â  Â  Â videoCapture = VideoCapture.Builder()<span class="hljs-comment">//å½•åƒç”¨ä¾‹é…ç½®</span>
 Â  Â  Â  Â  Â  Â  Â   .setTargetAspectRatio(AspectRatio.RATIO_16_9) <span class="hljs-comment">//è®¾ç½®é«˜å®½æ¯”</span>
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-comment">//.setTargetRotation(viewFinder.display!!.rotation)//è®¾ç½®æ—‹è½¬è§’åº¦</span>
 Â  Â  Â  Â  Â  Â  Â   .build()
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">try</span> {
 Â  Â  Â  Â  Â  Â  Â  Â cameraProvider?.unbindAll()<span class="hljs-comment">//å…ˆè§£ç»‘æ‰€æœ‰ç”¨ä¾‹</span>
 Â  Â  Â  Â  Â  Â  Â  Â camera = cameraProvider?.bindToLifecycle(
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-keyword">this</span>,
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â cameraSelector,
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â preview,
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â imageCamera,
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â videoCapture
 Â  Â  Â  Â  Â  Â  Â   )!!<span class="hljs-comment">//ç»‘å®šç”¨ä¾‹</span>
 Â  Â  Â  Â  Â   } <span class="hljs-keyword">catch</span> (e: Exception) {
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-keyword">if</span>(BuildConfig.DEBUG) {
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â LogUtils.e(TAG, <span class="hljs-string">"Use case binding failed"</span>, e.message)
 Â  Â  Â  Â  Â  Â  Â   }
 Â  Â  Â  Â  Â   }
â€‹
 Â  Â  Â   }, ContextCompat.getMainExecutor(<span class="hljs-keyword">this</span>))
 Â  Â  Â  Â initListener()
 Â   }
â€‹
 Â  Â <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onRequestPermissionsResult</span><span class="hljs-params">(
 Â  Â  Â  Â requestCode: <span class="hljs-type">Int</span>, permissions: <span class="hljs-type">Array</span>&lt;<span class="hljs-type">String</span>&gt;, grantResults:
 Â  Â  Â  Â <span class="hljs-type">IntArray</span>
 Â   )</span></span> {
 Â  Â  Â  Â <span class="hljs-keyword">super</span>.onRequestPermissionsResult(requestCode, permissions, grantResults)
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-keyword">when</span> (requestCode) {
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Constants.REQUEST_CODE_PERMISSIONS -&gt; {
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-keyword">var</span> allPermissionsGranted = <span class="hljs-literal">true</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-keyword">for</span> (result <span class="hljs-keyword">in</span> grantResults) {
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-keyword">if</span> (result != PackageManager.PERMISSION_GRANTED) {
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â allPermissionsGranted = <span class="hljs-literal">false</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-keyword">break</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â   }
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â   }
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-keyword">when</span> {
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â allPermissionsGranted -&gt; {
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-comment">// æƒé™å·²æˆäºˆï¼Œæ‰§è¡Œæ–‡ä»¶è¯»å†™æ“ä½œ</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â startCamera()
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â   }
â€‹
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-keyword">else</span> -&gt; {
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-comment">// æƒé™è¢«æ‹’ç»ï¼Œå¤„ç†æƒé™è¯·æ±‚å¤±è´¥çš„æƒ…å†µ</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â ToastUtils.shortToast(<span class="hljs-string">"è¯·æ‚¨æ‰“å¼€å¿…è¦æƒé™"</span>)
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â requestPermission()
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â   }
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â   }
 Â  Â  Â  Â  Â  Â  Â  Â  Â   }
 Â  Â  Â  Â  Â  Â  Â   }
 Â   }
â€‹
 Â  Â <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">checkPermissions</span><span class="hljs-params">()</span></span>: <span class="hljs-built_in">Boolean</span> {
 Â  Â  Â  Â <span class="hljs-keyword">when</span> {
 Â  Â  Â  Â  Â  Â Build.VERSION.SDK_INT &gt;= <span class="hljs-number">33</span> -&gt; {
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-keyword">val</span> permissions = arrayOf(
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Manifest.permission.READ_MEDIA_IMAGES,
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Manifest.permission.READ_MEDIA_AUDIO,
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Manifest.permission.READ_MEDIA_VIDEO,
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Manifest.permission.CAMERA,
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Manifest.permission.RECORD_AUDIO,
 Â  Â  Â  Â  Â  Â  Â   )
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-keyword">for</span> (permission <span class="hljs-keyword">in</span> permissions) {
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-keyword">return</span> Environment.isExternalStorageManager()
 Â  Â  Â  Â  Â  Â  Â   }
 Â  Â  Â  Â  Â   }
â€‹
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">else</span> -&gt; {
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-keyword">for</span> (permission <span class="hljs-keyword">in</span> REQUIRED_PERMISSIONS) {
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-keyword">if</span> (ContextCompat.checkSelfPermission(
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-keyword">this</span>,
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â permission
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â   ) != PackageManager.PERMISSION_GRANTED
 Â  Â  Â  Â  Â  Â  Â  Â  Â   ) {
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â   }
 Â  Â  Â  Â  Â  Â  Â   }
 Â  Â  Â  Â  Â   }
 Â  Â  Â   }
 Â  Â  Â  Â <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
 Â   }
â€‹
 Â  Â <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onDestroy</span><span class="hljs-params">()</span></span> {
 Â  Â  Â  Â <span class="hljs-keyword">super</span>.onDestroy()
 Â  Â  Â  Â cameraExecutor.shutdown()
 Â   }
}
</code></pre>

<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">package</span> com.example.cameraxdemo.activity
â€‹
<span class="hljs-keyword">import</span> android.<span class="hljs-keyword">annotation</span>.SuppressLint
<span class="hljs-keyword">import</span> android.content.ContentValues
<span class="hljs-keyword">import</span> android.content.Intent
<span class="hljs-keyword">import</span> android.graphics.Bitmap
<span class="hljs-keyword">import</span> android.net.Uri
<span class="hljs-keyword">import</span> android.os.Build
<span class="hljs-keyword">import</span> android.os.Bundle
<span class="hljs-keyword">import</span> android.provider.MediaStore
<span class="hljs-keyword">import</span> android.view.View
<span class="hljs-keyword">import</span> android.widget.Button
<span class="hljs-keyword">import</span> android.widget.ImageView
<span class="hljs-keyword">import</span> androidx.activity.enableEdgeToEdge
<span class="hljs-keyword">import</span> androidx.appcompat.app.AppCompatActivity
<span class="hljs-keyword">import</span> androidx.core.view.ViewCompat
<span class="hljs-keyword">import</span> androidx.core.view.WindowInsetsCompat
<span class="hljs-keyword">import</span> com.blankj.utilcode.util.LogUtils
<span class="hljs-keyword">import</span> com.bumptech.glide.Glide
<span class="hljs-keyword">import</span> com.example.cameraxdemo.R
<span class="hljs-keyword">import</span> com.example.cameraxdemo.utils.Constants.Companion.REQUEST_CODE_CAMERA
<span class="hljs-keyword">import</span> com.example.cameraxdemo.utils.Constants.Companion.REQUEST_CODE_CROP
<span class="hljs-keyword">import</span> com.example.cameraxdemo.utils.FileManager
<span class="hljs-keyword">import</span> com.example.cameraxdemo.utils.FileUtil
<span class="hljs-keyword">import</span> java.io.File
â€‹
<span class="hljs-comment">/**
 *<span class="hljs-doctag">@author</span>: njb
 *<span class="hljs-doctag">@date</span>: Â  2023/8/15 17:20
 *<span class="hljs-doctag">@desc</span>:
 */</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">CameraActivity</span> :<span class="hljs-type">AppCompatActivity</span>(){
 Â  Â <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> mUploadImageUri: Uri? = <span class="hljs-literal">null</span>
 Â  Â <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> mUploadImageFile: File? = <span class="hljs-literal">null</span>
 Â  Â <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> photoUri: Uri? = <span class="hljs-literal">null</span>
 Â  Â <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> btnCamera:Button <span class="hljs-keyword">by</span> lazy { findViewById(R.id.btnCamera) }
 Â  Â <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> ivAvatar:ImageView <span class="hljs-keyword">by</span> lazy { findViewById(R.id.iv_avatar) }
 Â  Â <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> TAG = CameraActivity::<span class="hljs-keyword">class</span>.java.name
 Â  Â <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> rootView : View <span class="hljs-keyword">by</span> lazy {findViewById(R.id.camera_root) }
â€‹
 Â  Â <span class="hljs-meta">@SuppressLint(<span class="hljs-string">"RestrictedApi"</span>)</span>
 Â  Â <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreate</span><span class="hljs-params">(savedInstanceState: <span class="hljs-type">Bundle</span>?)</span></span> {
 Â  Â  Â  Â <span class="hljs-keyword">super</span>.onCreate(savedInstanceState)
 Â  Â  Â  Â enableEdgeToEdge()
 Â  Â  Â  Â setContentView(R.layout.activity_camera)
 Â  Â  Â  Â initView()
 Â  Â  Â  Â ViewCompat.setOnApplyWindowInsetsListener(rootView) { v, insets -&gt;
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">val</span> stateBars = insets.getInsets(WindowInsetsCompat.Type.statusBars())
 Â  Â  Â  Â  Â  Â v.setPadding(stateBars.left, stateBars.top, stateBars.right, stateBars.bottom)
 Â  Â  Â  Â  Â  Â insets
 Â  Â  Â   }
 Â   }
â€‹
 Â  Â <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">initView</span><span class="hljs-params">()</span></span> {
 Â  Â  Â  Â btnCamera.setOnClickListener {
 Â  Â  Â  Â  Â  Â startSystemCamera()
 Â  Â  Â   }
 Â   }
â€‹
 Â  Â <span class="hljs-comment">/**
 Â  Â  * è°ƒèµ·ç³»ç»Ÿç›¸æœºæ‹ç…§
 Â  Â  */</span>
 Â  Â <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">startSystemCamera</span><span class="hljs-params">()</span></span> {
 Â  Â  Â  Â <span class="hljs-keyword">val</span> takeIntent = Intent(MediaStore.ACTION_IMAGE_CAPTURE)
 Â  Â  Â  Â <span class="hljs-keyword">val</span> values = ContentValues()
 Â  Â  Â  Â <span class="hljs-comment">//æ ¹æ®uriæŸ¥è¯¢å›¾ç‰‡åœ°å€</span>
 Â  Â  Â  Â photoUri = contentResolver.insert(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, values)
 Â  Â  Â  Â LogUtils.d(TAG, <span class="hljs-string">"photoUri:"</span> + photoUri?.authority + <span class="hljs-string">",photoUri:"</span> + photoUri?.path)
 Â  Â  Â  Â <span class="hljs-comment">//æ”¾å…¥æ‹ç…§åçš„åœ°å€</span>
 Â  Â  Â  Â takeIntent.putExtra(MediaStore.EXTRA_OUTPUT, photoUri)
 Â  Â  Â  Â <span class="hljs-comment">//è°ƒèµ·æ‹ç…§</span>
 Â  Â  Â  Â startActivityForResult(
 Â  Â  Â  Â  Â  Â takeIntent,
 Â  Â  Â  Â  Â  Â REQUEST_CODE_CAMERA
 Â  Â  Â   )
 Â   }
â€‹
â€‹
 Â  Â <span class="hljs-comment">/**
 Â  Â  * è®¾ç½®ç”¨æˆ·å¤´åƒ
 Â  Â  */</span>
 Â  Â <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">setAvatar</span><span class="hljs-params">()</span></span> {
 Â  Â  Â  Â <span class="hljs-keyword">val</span> file: File? = <span class="hljs-keyword">if</span> (mUploadImageUri != <span class="hljs-literal">null</span>) {
 Â  Â  Â  Â  Â  Â FileManager.getMediaUri2File(mUploadImageUri)
 Â  Â  Â   } <span class="hljs-keyword">else</span> {
 Â  Â  Â  Â  Â  Â mUploadImageFile
 Â  Â  Â   }
 Â  Â  Â  Â Glide.with(<span class="hljs-keyword">this</span>).load(file).into(ivAvatar)
 Â  Â  Â  Â LogUtils.d(TAG,<span class="hljs-string">"filepath"</span>+ file!!.absolutePath)
 Â   }
â€‹
 Â  Â <span class="hljs-comment">/**
 Â  Â  * ç³»ç»Ÿè£å‰ªæ–¹æ³•
 Â  Â  */</span>
 Â  Â <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">workCropFun</span><span class="hljs-params">(imgPathUri: <span class="hljs-type">Uri</span>?)</span></span> {
 Â  Â  Â  Â mUploadImageUri = <span class="hljs-literal">null</span>
 Â  Â  Â  Â mUploadImageFile = <span class="hljs-literal">null</span>
 Â  Â  Â  Â <span class="hljs-keyword">if</span> (imgPathUri != <span class="hljs-literal">null</span>) {
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">val</span> imageObject: Any = FileUtil.getHeadJpgFile()
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">if</span> (imageObject <span class="hljs-keyword">is</span> Uri) {
 Â  Â  Â  Â  Â  Â  Â  Â mUploadImageUri = imageObject
 Â  Â  Â  Â  Â   }
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">if</span> (imageObject <span class="hljs-keyword">is</span> File) {
 Â  Â  Â  Â  Â  Â  Â  Â mUploadImageFile = imageObject
 Â  Â  Â  Â  Â   }
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">val</span> intent = Intent(<span class="hljs-string">"com.android.camera.action.CROP"</span>)
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">if</span> (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.N) {
 Â  Â  Â  Â  Â  Â  Â  Â intent.addFlags(Intent.FLAG_GRANT_READ_URI_PERMISSION)
 Â  Â  Â  Â  Â   }
 Â  Â  Â  Â  Â  Â intent.run {
 Â  Â  Â  Â  Â  Â  Â  Â setDataAndType(imgPathUri, <span class="hljs-string">"image/*"</span>)<span class="hljs-comment">// å›¾ç‰‡èµ„æº</span>
 Â  Â  Â  Â  Â  Â  Â  Â putExtra(<span class="hljs-string">"crop"</span>, <span class="hljs-string">"true"</span>) <span class="hljs-comment">// è£å‰ª</span>
 Â  Â  Â  Â  Â  Â  Â  Â putExtra(<span class="hljs-string">"aspectX"</span>, <span class="hljs-number">1</span>) <span class="hljs-comment">// å®½åº¦æ¯”</span>
 Â  Â  Â  Â  Â  Â  Â  Â putExtra(<span class="hljs-string">"aspectY"</span>, <span class="hljs-number">1</span>) <span class="hljs-comment">// é«˜åº¦æ¯”</span>
 Â  Â  Â  Â  Â  Â  Â  Â putExtra(<span class="hljs-string">"outputX"</span>, <span class="hljs-number">1000</span>) <span class="hljs-comment">// è£å‰ªæ¡†å®½åº¦</span>
 Â  Â  Â  Â  Â  Â  Â  Â putExtra(<span class="hljs-string">"outputY"</span>, <span class="hljs-number">1000</span>) <span class="hljs-comment">// è£å‰ªæ¡†é«˜åº¦</span>
 Â  Â  Â  Â  Â  Â  Â  Â putExtra(<span class="hljs-string">"scale"</span>, <span class="hljs-literal">true</span>) <span class="hljs-comment">// ç¼©æ”¾</span>
 Â  Â  Â  Â  Â  Â  Â  Â putExtra(<span class="hljs-string">"return-data"</span>, <span class="hljs-literal">false</span>) <span class="hljs-comment">// true-è¿”å›ç¼©ç•¥å›¾-dataï¼Œfalse-ä¸è¿”å›-éœ€è¦é€šè¿‡Uri</span>
 Â  Â  Â  Â  Â  Â  Â  Â putExtra(<span class="hljs-string">"outputFormat"</span>, Bitmap.CompressFormat.JPEG.toString()) <span class="hljs-comment">// ä¿å­˜çš„å›¾ç‰‡æ ¼å¼</span>
 Â  Â  Â  Â  Â  Â  Â  Â putExtra(<span class="hljs-string">"noFaceDetection"</span>, <span class="hljs-literal">true</span>) <span class="hljs-comment">// å–æ¶ˆäººè„¸è¯†åˆ«</span>
 Â  Â  Â  Â  Â  Â  Â  Â putExtra(<span class="hljs-string">"quality"</span>, <span class="hljs-number">100</span>)
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-keyword">if</span> (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.R) {
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â putExtra(MediaStore.EXTRA_OUTPUT, mUploadImageUri)
 Â  Â  Â  Â  Â  Â  Â   } <span class="hljs-keyword">else</span> {
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-keyword">val</span> imgCropUri = Uri.fromFile(mUploadImageFile)
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â putExtra(MediaStore.EXTRA_OUTPUT, imgCropUri)
 Â  Â  Â  Â  Â  Â  Â   }
 Â  Â  Â  Â  Â   }
 Â  Â  Â  Â  Â  Â startActivityForResult(
 Â  Â  Â  Â  Â  Â  Â  Â intent, REQUEST_CODE_CROP
 Â  Â  Â  Â  Â   )
 Â  Â  Â   }
 Â   }
â€‹
 Â  Â <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onActivityResult</span><span class="hljs-params">(requestCode: <span class="hljs-type">Int</span>, resultCode: <span class="hljs-type">Int</span>, <span class="hljs-keyword">data</span>: <span class="hljs-type">Intent</span>?)</span></span> {
 Â  Â  Â  Â <span class="hljs-keyword">super</span>.onActivityResult(requestCode, resultCode, <span class="hljs-keyword">data</span>)
 Â  Â  Â  Â <span class="hljs-keyword">if</span> (resultCode == RESULT_OK) {
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">if</span> (requestCode == REQUEST_CODE_CAMERA) {<span class="hljs-comment">//æ‹ç…§å›è°ƒ</span>
 Â  Â  Â  Â  Â  Â  Â  Â workCropFun(photoUri)
 Â  Â  Â  Â  Â   } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (requestCode == REQUEST_CODE_CROP) {<span class="hljs-comment">//è£å‰ªå›è°ƒ</span>
 Â  Â  Â  Â  Â  Â  Â  Â setAvatar()
 Â  Â  Â  Â  Â   }
 Â  Â  Â   }
 Â   }
}
</code></pre>
<h2 data-id="heading-15">11.æ€»ç»“ï¼š</h2>
<p>å‡çº§Android15åéœ€è¦é€‚é…EdgeToEdgeå’ŒMediaStore.Images.Media.DATA, æ‰¾åˆ°æŠ¥é”™ï¼Œåˆ†æå‡ºåŸå› ï¼Œè§£å†³å³å¯.å½“ç„¶15è¿˜æœ‰å…¶ä»–é€‚é…ï¼Œè¿™é‡Œåªæ˜¯åœ¨è·‘ä¹‹å‰çš„é¡¹ç›®é‡åˆ°çš„é—®é¢˜é¡ºæ‰‹è®²è§£ä¸€ä¸‹è€Œå·²ï¼Œåé¢ä¼šé‡ç‚¹è®²è§£å…¨é¢å±é€‚é….</p>
<h2 data-id="heading-16">12.æºç åœ°å€:</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2Fjackning_admin%2Fcamera-xdemo" target="_blank" title="https://gitee.com/jackning_admin/camera-xdemo" ref="nofollow noopener noreferrer">gitee.com/jackning_adâ€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æŸ¥æ‰¾ç®—æ³•]]></title>    <link>https://juejin.cn/post/7582809606067322906</link>    <guid>https://juejin.cn/post/7582809606067322906</guid>    <pubDate>2025-12-12T15:30:10.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582809606067322906" data-draft-id="7580277964341526538" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content=" æŸ¥æ‰¾ç®—æ³•"/> <meta itemprop="keywords" content="Java"/> <meta itemprop="datePublished" content="2025-12-12T15:30:10.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="SevenCoding"/> <meta itemprop="url" content="https://juejin.cn/user/3261615728242467"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
             æŸ¥æ‰¾ç®—æ³•
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3261615728242467/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    SevenCoding
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-12T15:30:10.000Z" title="Fri Dec 12 2025 15:30:10 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">äºŒåˆ†æŸ¥æ‰¾</h2>
<p>äºŒåˆ†æŸ¥æ‰¾ï¼ˆBinary Searchï¼‰æ˜¯ä¸€ç§é«˜æ•ˆçš„æŸ¥æ‰¾ç®—æ³•ï¼Œä¹Ÿå«æŠ˜åŠæŸ¥æ‰¾ã€‚æ ¸å¿ƒæ€æƒ³ï¼šå¯¹äºä¸€ä¸ª<strong>æœ‰åº</strong>çš„æ•°æ®é›†åˆï¼Œæ¯æ¬¡æŸ¥æ‰¾éƒ½å°†æŸ¥æ‰¾èŒƒå›´ç¼©å°ä¸ºåŸæ¥çš„ä¸€åŠï¼Œç›´åˆ°æ‰¾åˆ°ç›®æ ‡å€¼æˆ–ç¡®å®šç›®æ ‡å€¼ä¸å­˜åœ¨ã€‚äºŒåˆ†æŸ¥æ‰¾è¦æ±‚æ•°æ®å¿…é¡»æ˜¯æœ‰åºçš„ï¼Œç»å¸¸åº”ç”¨äºæ•°ç»„ç­‰æ”¯æŒéšæœºè®¿é—®çš„æ•°æ®ç»“æ„é‡Œã€‚è·Ÿçº¿æ€§æŸ¥æ‰¾ç›¸æ¯”ï¼ŒäºŒåˆ†æŸ¥æ‰¾çš„æ•ˆç‡è¦é«˜å¾—å¤šï¼Œç‰¹åˆ«æ˜¯å¯¹äºå¤§è§„æ¨¡æ•°æ®é›†ã€‚</p>
<h3 data-id="heading-1">ç®—æ³•æ­¥éª¤</h3>
<ol>
<li>ç¡®å®šæŸ¥æ‰¾èŒƒå›´çš„å·¦è¾¹ç•Œ left å’Œå³è¾¹ç•Œ right</li>
<li>è®¡ç®—ä¸­é—´ä½ç½® mid = (left + right) / 2ï¼ˆæ³¨æ„æ•´æ•°æº¢å‡ºé—®é¢˜ï¼Œæ›´å®‰å…¨çš„åšæ³•æ˜¯ mid = left + (right - left) / 2ï¼‰</li>
<li>å°†ä¸­é—´ä½ç½®çš„å…ƒç´ ä¸ç›®æ ‡å€¼æ¯”è¾ƒ
<ul>
<li>å¦‚æœä¸­é—´å…ƒç´ ç­‰äºç›®æ ‡å€¼ï¼ŒæŸ¥æ‰¾æˆåŠŸï¼Œè¿”å›ä¸­é—´å…ƒç´ çš„ä½ç½®</li>
<li>å¦‚æœä¸­é—´å…ƒç´ å¤§äºç›®æ ‡å€¼ï¼Œç›®æ ‡å€¼å¯èƒ½åœ¨å·¦åŠéƒ¨åˆ†ï¼Œå°†å³è¾¹ç•Œè°ƒæ•´ä¸º mid - 1</li>
<li>å¦‚æœä¸­é—´å…ƒç´ å°äºç›®æ ‡å€¼ï¼Œç›®æ ‡å€¼å¯èƒ½åœ¨å³åŠéƒ¨åˆ†ï¼Œå°†å·¦è¾¹ç•Œè°ƒæ•´ä¸º mid + 1</li>
</ul>
</li>
<li>é‡å¤æ­¥éª¤2-3ï¼Œç›´åˆ°æ‰¾åˆ°ç›®æ ‡å€¼æˆ–è€…å·¦è¾¹ç•Œå¤§äºå³è¾¹ç•Œï¼ˆæ­¤æ—¶è¡¨ç¤ºç›®æ ‡å€¼ä¸å­˜åœ¨ï¼‰</li>
</ol>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/facd695ba9284b8580c2627ca29ba648~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2V2ZW5Db2Rpbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766158209&amp;x-signature=bq2x6bTY5csrMftWE4KIKwHK7I8%3D" alt="" loading="lazy"/></p>
<p>æ ¸å¿ƒç‰¹æ€§ï¼š</p>
<ul>
<li><strong>è¦æ±‚æœ‰åº</strong>ï¼šäºŒåˆ†æŸ¥æ‰¾åªé€‚ç”¨äºæœ‰åºæ•°æ®é›†åˆ</li>
<li><strong>æ—¶é—´å¤æ‚åº¦</strong>ï¼šO(log n)ï¼Œåœ¨å¤§è§„æ¨¡æ•°æ®é›†ä¸Šéå¸¸é«˜æ•ˆ</li>
<li><strong>ç©ºé—´å¤æ‚åº¦</strong>ï¼šè¿­ä»£å®ç°ä¸ºO(1)ï¼Œé€’å½’å®ç°ä¸ºO(log n)ï¼ˆå› ä¸ºé€’å½’è°ƒç”¨æ ˆçš„æ·±åº¦ï¼‰</li>
<li><strong>éšæœºè®¿é—®</strong>ï¼šè¦æ±‚æ•°æ®ç»“æ„æ”¯æŒO(1)æ—¶é—´å¤æ‚åº¦çš„éšæœºè®¿é—®ï¼ˆæ¯”å¦‚æ•°ç»„ï¼‰</li>
</ul>
<h3 data-id="heading-2">åŸºç¡€å®ç°</h3>
<p>ä¸‹é¢æ˜¯äºŒåˆ†æŸ¥æ‰¾ç®—æ³•åœ¨å„ç§ä¸»æµç¼–ç¨‹è¯­è¨€ä¸­çš„å®ç°ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BinarySearch</span> {
    <span class="hljs-comment">// è¿­ä»£å®ç°</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-title function_">binarySearch</span><span class="hljs-params">(<span class="hljs-type">int</span>[] arr, <span class="hljs-type">int</span> target)</span> {
        <span class="hljs-type">int</span> <span class="hljs-variable">left</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
        <span class="hljs-type">int</span> <span class="hljs-variable">right</span> <span class="hljs-operator">=</span> arr.length - <span class="hljs-number">1</span>;
        
        <span class="hljs-keyword">while</span> (left &lt;= right) {
            <span class="hljs-comment">// é¿å…æ•´æ•°æº¢å‡º</span>
            <span class="hljs-type">int</span> <span class="hljs-variable">mid</span> <span class="hljs-operator">=</span> left + (right - left) / <span class="hljs-number">2</span>;
            
            <span class="hljs-comment">// æ‰¾åˆ°ç›®æ ‡å€¼</span>
            <span class="hljs-keyword">if</span> (arr[mid] == target) {
                <span class="hljs-keyword">return</span> mid;
            }
            <span class="hljs-comment">// åœ¨å·¦åŠéƒ¨åˆ†ç»§ç»­æŸ¥æ‰¾</span>
            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (arr[mid] &gt; target) {
                right = mid - <span class="hljs-number">1</span>;
            }
            <span class="hljs-comment">// åœ¨å³åŠéƒ¨åˆ†ç»§ç»­æŸ¥æ‰¾</span>
            <span class="hljs-keyword">else</span> {
                left = mid + <span class="hljs-number">1</span>;
            }
        }
        
        <span class="hljs-comment">// æœªæ‰¾åˆ°ç›®æ ‡å€¼</span>
        <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>;
    }
    
    <span class="hljs-comment">// é€’å½’å®ç°</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-title function_">binarySearchRecursive</span><span class="hljs-params">(<span class="hljs-type">int</span>[] arr, <span class="hljs-type">int</span> target, <span class="hljs-type">int</span> left, <span class="hljs-type">int</span> right)</span> {
        <span class="hljs-keyword">if</span> (left &gt; right) {
            <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>;
        }
        
        <span class="hljs-type">int</span> <span class="hljs-variable">mid</span> <span class="hljs-operator">=</span> left + (right - left) / <span class="hljs-number">2</span>;
        
        <span class="hljs-keyword">if</span> (arr[mid] == target) {
            <span class="hljs-keyword">return</span> mid;
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (arr[mid] &gt; target) {
            <span class="hljs-keyword">return</span> binarySearchRecursive(arr, target, left, mid - <span class="hljs-number">1</span>);
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">return</span> binarySearchRecursive(arr, target, mid + <span class="hljs-number">1</span>, right);
        }
    }
    
    <span class="hljs-comment">// æµ‹è¯•</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">int</span>[] arr = {<span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">10</span>, <span class="hljs-number">40</span>, <span class="hljs-number">50</span>, <span class="hljs-number">70</span>, <span class="hljs-number">80</span>};
        <span class="hljs-type">int</span> <span class="hljs-variable">target</span> <span class="hljs-operator">=</span> <span class="hljs-number">10</span>;
        
        <span class="hljs-comment">// è¿­ä»£æ–¹æ³•</span>
        <span class="hljs-type">int</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> binarySearch(arr, target);
        <span class="hljs-keyword">if</span> (result == -<span class="hljs-number">1</span>) {
            System.out.println(<span class="hljs-string">"å…ƒç´  "</span> + target + <span class="hljs-string">" ä¸å­˜åœ¨äºæ•°ç»„ä¸­"</span>);
        } <span class="hljs-keyword">else</span> {
            System.out.println(<span class="hljs-string">"å…ƒç´  "</span> + target + <span class="hljs-string">" åœ¨æ•°ç»„ä¸­çš„ç´¢å¼•ä¸º "</span> + result);
        }
        
        <span class="hljs-comment">// é€’å½’æ–¹æ³•</span>
        result = binarySearchRecursive(arr, target, <span class="hljs-number">0</span>, arr.length - <span class="hljs-number">1</span>);
        <span class="hljs-keyword">if</span> (result == -<span class="hljs-number">1</span>) {
            System.out.println(<span class="hljs-string">"å…ƒç´  "</span> + target + <span class="hljs-string">" ä¸å­˜åœ¨äºæ•°ç»„ä¸­"</span>);
        } <span class="hljs-keyword">else</span> {
            System.out.println(<span class="hljs-string">"å…ƒç´  "</span> + target + <span class="hljs-string">" åœ¨æ•°ç»„ä¸­çš„ç´¢å¼•ä¸º "</span> + result);
        }
    }
}
</code></pre>
<h3 data-id="heading-3">ä¼˜ç‚¹</h3>
<ul>
<li>æŸ¥æ‰¾æ•ˆç‡éå¸¸é«˜ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º O(log n)</li>
<li>åœ¨å¤§è§„æ¨¡æ•°æ®é›†ä¸Šè¡¨ç°ä¼˜å¼‚</li>
<li>å®ç°ç›¸å¯¹ç®€å•</li>
<li>ä¸éœ€è¦é¢å¤–çš„ç©ºé—´ï¼ˆè¿­ä»£å®ç°ï¼‰</li>
</ul>
<h3 data-id="heading-4">ç¼ºç‚¹</h3>
<ul>
<li>è¦æ±‚æ•°æ®å¿…é¡»æ˜¯æœ‰åºçš„</li>
<li>åªé€‚ç”¨äºæ”¯æŒéšæœºè®¿é—®çš„æ•°æ®ç»“æ„ï¼ˆå¦‚æ•°ç»„ï¼‰</li>
<li>å¯¹äºé¢‘ç¹æ’å…¥å’Œåˆ é™¤çš„æ•°æ®ç»“æ„ï¼Œç»´æŠ¤æœ‰åºæ€§çš„æˆæœ¬å¾ˆé«˜</li>
<li>ä¸é€‚åˆå°æ•°æ®é‡çš„æŸ¥æ‰¾ï¼ˆè¿™ç§æƒ…å†µä¸‹çº¿æ€§æŸ¥æ‰¾å¯èƒ½æ›´å¿«ï¼‰</li>
</ul>
<h3 data-id="heading-5">åº”ç”¨åœºæ™¯</h3>
<p>äºŒåˆ†æŸ¥æ‰¾åœ¨å¾ˆå¤šåœºæ™¯ä¸­éƒ½æœ‰å¹¿æ³›çš„åº”ç”¨ï¼š</p>
<ul>
<li>æ•°æ®åº“ç´¢å¼•çš„å®ç°ï¼ˆå¦‚ B æ ‘å’Œ B+ æ ‘çš„æŸ¥æ‰¾è¿‡ç¨‹ï¼‰</li>
<li>æŸ¥æ‰¾æœ€æ¥è¿‘æŸä¸ªå€¼çš„å…ƒç´ ï¼ˆä¸‹ç•ŒæŸ¥æ‰¾å’Œä¸Šç•ŒæŸ¥æ‰¾ï¼‰</li>
<li>è®¡ç®—å¹³æ–¹æ ¹ç­‰æ•°å€¼è®¡ç®—ä¸­ï¼ˆäºŒåˆ†æ³•æ±‚è§£ï¼‰</li>
<li>çŒœæ•°å­—æ¸¸æˆï¼ˆæ¯æ¬¡çŒœæµ‹ä¸­é—´å€¼ï¼‰</li>
<li>åœ¨æ—‹è½¬æ’åºæ•°ç»„ä¸­æŸ¥æ‰¾å…ƒç´ </li>
<li>æŸ¥æ‰¾æ•°ç»„ä¸­ç¬¬ä¸€ä¸ªæˆ–æœ€åä¸€ä¸ªæ»¡è¶³æŸæ¡ä»¶çš„å…ƒç´ </li>
</ul>
<h3 data-id="heading-6">ç›¸å…³çš„ LeetCode çƒ­é—¨é¢˜ç›®</h3>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fleetcode.cn%2Fproblems%2Fbinary-search%2F" target="_blank" title="https://leetcode.cn/problems/binary-search/" ref="nofollow noopener noreferrer">704. äºŒåˆ†æŸ¥æ‰¾</a>Â - äºŒåˆ†æŸ¥æ‰¾çš„åŸºç¡€åº”ç”¨</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fleetcode.cn%2Fproblems%2Fsearch-insert-position%2F" target="_blank" title="https://leetcode.cn/problems/search-insert-position/" ref="nofollow noopener noreferrer">35. æœç´¢æ’å…¥ä½ç½®</a>Â - æŸ¥æ‰¾å…ƒç´ åº”è¯¥æ’å…¥çš„ä½ç½®ï¼ˆä¸‹ç•Œï¼‰</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fleetcode.cn%2Fproblems%2Ffind-first-and-last-position-of-element-in-sorted-array%2F" target="_blank" title="https://leetcode.cn/problems/find-first-and-last-position-of-element-in-sorted-array/" ref="nofollow noopener noreferrer">34. åœ¨æ’åºæ•°ç»„ä¸­æŸ¥æ‰¾å…ƒç´ çš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªä½ç½®</a>Â - æŸ¥æ‰¾ç›®æ ‡å€¼çš„ç¬¬ä¸€æ¬¡å’Œæœ€åä¸€æ¬¡å‡ºç°ä½ç½®</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fleetcode.cn%2Fproblems%2Fsqrtx%2F" target="_blank" title="https://leetcode.cn/problems/sqrtx/" ref="nofollow noopener noreferrer">69. x çš„å¹³æ–¹æ ¹</a>Â - ä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾æ±‚è§£å¹³æ–¹æ ¹</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fleetcode.cn%2Fproblems%2Fsearch-in-rotated-sorted-array%2F" target="_blank" title="https://leetcode.cn/problems/search-in-rotated-sorted-array/" ref="nofollow noopener noreferrer">33. æœç´¢æ—‹è½¬æ’åºæ•°ç»„</a>Â - åœ¨æ—‹è½¬è¿‡çš„æœ‰åºæ•°ç»„ä¸­ç”¨äºŒåˆ†æŸ¥æ‰¾</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fleetcode.cn%2Fproblems%2Ffind-minimum-in-rotated-sorted-array%2F" target="_blank" title="https://leetcode.cn/problems/find-minimum-in-rotated-sorted-array/" ref="nofollow noopener noreferrer">153. å¯»æ‰¾æ—‹è½¬æ’åºæ•°ç»„ä¸­çš„æœ€å°å€¼</a>Â - åœ¨æ—‹è½¬æ•°ç»„ä¸­æŸ¥æ‰¾æœ€å°å€¼</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fleetcode.cn%2Fproblems%2Fsearch-a-2d-matrix%2F" target="_blank" title="https://leetcode.cn/problems/search-a-2d-matrix/" ref="nofollow noopener noreferrer">74. æœç´¢äºŒç»´çŸ©é˜µ</a></li>
</ul>
<h2 data-id="heading-7">å“ˆå¸ŒæŸ¥æ‰¾</h2>
<p>å“ˆå¸ŒæŸ¥æ‰¾ï¼ˆHash Searchï¼‰ï¼Œåˆç§°æ•£åˆ—æŸ¥æ‰¾ï¼Œæ˜¯ä¸€ç§é«˜æ•ˆçš„æŸ¥æ‰¾ç®—æ³•ï¼Œå®ƒç”¨å“ˆå¸Œå‡½æ•°å°†æ•°æ®è½¬æ¢ä¸ºæ•°ç»„ä¸‹æ ‡ï¼Œç„¶åç›´æ¥è®¿é—®æ•°ç»„ä¸­çš„å…ƒç´ ã€‚å“ˆå¸ŒæŸ¥æ‰¾çš„æ ¸å¿ƒæ€æƒ³æ˜¯<strong>å°†æ•°æ®å…ƒç´ é€šè¿‡å“ˆå¸Œå‡½æ•°æ˜ å°„åˆ°å“ˆå¸Œè¡¨ä¸­çš„ä½ç½®ï¼Œå®ç°å¿«é€ŸæŸ¥æ‰¾</strong>ã€‚</p>
<p>åœ¨ç†æƒ³æƒ…å†µä¸‹ï¼Œå“ˆå¸ŒæŸ¥æ‰¾çš„æ—¶é—´å¤æ‚åº¦ä¸º O(1)ï¼Œè¿™å°±æ„å‘³ç€æ— è®ºæ•°æ®è§„æ¨¡å¤šå¤§ï¼ŒæŸ¥æ‰¾æ“ä½œéƒ½èƒ½åœ¨å¸¸æ•°æ—¶é—´å†…å®Œæˆï¼Œè¿™æ˜¯å“ˆå¸ŒæŸ¥æ‰¾ç›¸æ¯”å…¶ä»–æŸ¥æ‰¾ç®—æ³•ï¼ˆå¦‚äºŒåˆ†æŸ¥æ‰¾ã€çº¿æ€§æŸ¥æ‰¾ï¼‰çš„æœ€å¤§ä¼˜åŠ¿ã€‚</p>
<p>ä¸è¿‡ä½¿ç”¨å“ˆå¸ŒæŸ¥æ‰¾å¿…é¡»è¦è€ƒè™‘å“ˆå¸Œå†²çªï¼ˆä¸åŒçš„æ•°æ®è¢«æ˜ å°„åˆ°ç›¸åŒçš„ä½ç½®ï¼‰é—®é¢˜ã€‚</p>
<h3 data-id="heading-8">ç®—æ³•æ­¥éª¤</h3>
<ol>
<li>è®¾è®¡ä¸€ä¸ªé€‚åˆæ•°æ®ç‰¹ç‚¹çš„å“ˆå¸Œå‡½æ•°ï¼Œå°†æ•°æ®æ˜ å°„åˆ°å“ˆå¸Œè¡¨çš„ç´¢å¼•ä½ç½®</li>
<li>æ„å»ºå“ˆå¸Œè¡¨ï¼Œå°†æ‰€æœ‰å…ƒç´ é€šè¿‡å“ˆå¸Œå‡½æ•°æ˜ å°„ã€å­˜å‚¨åˆ°ç›¸åº”ä½ç½®</li>
<li>è§£å†³å¯èƒ½å‡ºç°çš„å“ˆå¸Œå†²çªï¼ˆé€šå¸¸é‡‡ç”¨é“¾åœ°å€æ³•æˆ–å¼€æ”¾å¯»å€æ³•ï¼‰</li>
<li>æŸ¥æ‰¾æ—¶ï¼Œé€šè¿‡åŒæ ·çš„å“ˆå¸Œå‡½æ•°è®¡ç®—ç›®æ ‡æ•°æ®çš„å“ˆå¸Œå€¼</li>
<li>æ ¹æ®å“ˆå¸Œå€¼å®šä½åˆ°å“ˆå¸Œè¡¨ä¸­çš„ä½ç½®</li>
<li>å¦‚æœå­˜åœ¨å†²çªï¼Œåˆ™æŒ‰ç…§è§£å†³å†²çªçš„æ–¹æ³•æŸ¥æ‰¾ç›®æ ‡å…ƒç´ </li>
</ol>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c15da9709b1144a89d95b7047c22a586~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2V2ZW5Db2Rpbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766158209&amp;x-signature=u2lG9ocrQXRAGUvLb4P4fHwO8tw%3D" alt="" loading="lazy"/></p>
<p>æ ¸å¿ƒç‰¹æ€§ï¼š</p>
<ul>
<li><strong>å¿«é€Ÿè®¿é—®</strong>ï¼šç†æƒ³æƒ…å†µä¸‹æŸ¥æ‰¾æ—¶é—´å¤æ‚åº¦ä¸º O(1)</li>
<li><strong>å“ˆå¸Œå‡½æ•°</strong>ï¼šå“ˆå¸ŒæŸ¥æ‰¾çš„æ ¸å¿ƒï¼Œå°†æ•°æ®æ˜ å°„åˆ°æ•°ç»„ç´¢å¼•çš„å‡½æ•°</li>
<li><strong>å“ˆå¸Œå†²çª</strong>ï¼šä¸åŒæ•°æ®æ˜ å°„åˆ°ç›¸åŒä½ç½®çš„æƒ…å†µï¼Œéœ€è¦ç‰¹æ®Šå¤„ç†</li>
<li><strong>ç©ºé—´æ¢æ—¶é—´</strong>ï¼šé€šè¿‡é¢å¤–çš„å†…å­˜ç©ºé—´æ¢å–æŸ¥æ‰¾æ—¶é—´çš„æå‡</li>
<li><strong>è´Ÿè½½å› å­</strong>ï¼šè¡¨ç¤ºå“ˆå¸Œè¡¨çš„å¡«å……ç¨‹åº¦ï¼Œå½±å“æŸ¥æ‰¾æ•ˆç‡å’Œå†²çªæ¦‚ç‡</li>
<li><strong>åŠ¨æ€æ‰©å®¹</strong>ï¼šè´Ÿè½½å› å­è¿‡é«˜æ—¶ï¼Œéœ€è¦æ‰©å¤§å“ˆå¸Œè¡¨å¹¶é‡æ–°å“ˆå¸Œ<strong>æ‰€æœ‰</strong>å…ƒç´ </li>
</ul>
<h3 data-id="heading-9">åŸºç¡€å®ç°</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HashSearch</span> {
    <span class="hljs-comment">// å“ˆå¸Œè¡¨èŠ‚ç‚¹ç±»</span>
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Node</span> {
        String key;
        <span class="hljs-type">int</span> value;
        Node next;
        
        <span class="hljs-keyword">public</span> <span class="hljs-title function_">Node</span><span class="hljs-params">(String key, <span class="hljs-type">int</span> value)</span> {
            <span class="hljs-built_in">this</span>.key = key;
            <span class="hljs-built_in">this</span>.value = value;
            <span class="hljs-built_in">this</span>.next = <span class="hljs-literal">null</span>;
        }
    }
    
    <span class="hljs-comment">// å“ˆå¸Œè¡¨ç±»</span>
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HashTable</span> {
        <span class="hljs-keyword">private</span> Node[] buckets;
        <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> capacity;
        <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> size;
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">float</span> <span class="hljs-variable">LOAD_FACTOR</span> <span class="hljs-operator">=</span> <span class="hljs-number">0.75f</span>; <span class="hljs-comment">// è´Ÿè½½å› å­é˜ˆå€¼</span>
        
        <span class="hljs-keyword">public</span> <span class="hljs-title function_">HashTable</span><span class="hljs-params">(<span class="hljs-type">int</span> capacity)</span> {
            <span class="hljs-built_in">this</span>.capacity = capacity;
            <span class="hljs-built_in">this</span>.buckets = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Node</span>[capacity];
            <span class="hljs-built_in">this</span>.size = <span class="hljs-number">0</span>;
        }
        
        <span class="hljs-comment">// å“ˆå¸Œå‡½æ•°</span>
        <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-title function_">hash</span><span class="hljs-params">(String key)</span> {
            <span class="hljs-type">int</span> <span class="hljs-variable">hash</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
            <span class="hljs-keyword">for</span> (<span class="hljs-type">char</span> c : key.toCharArray()) {
                hash = (hash * <span class="hljs-number">31</span> + c) % capacity;
            }
            <span class="hljs-keyword">return</span> Math.abs(hash);
        }
        
        <span class="hljs-comment">// æ’å…¥é”®å€¼å¯¹</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">put</span><span class="hljs-params">(String key, <span class="hljs-type">int</span> value)</span> {
            <span class="hljs-keyword">if</span> ((<span class="hljs-type">float</span>)size / capacity &gt;= LOAD_FACTOR) {
                resize(<span class="hljs-number">2</span> * capacity);
            }
            
            <span class="hljs-type">int</span> <span class="hljs-variable">index</span> <span class="hljs-operator">=</span> hash(key);
            <span class="hljs-type">Node</span> <span class="hljs-variable">newNode</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Node</span>(key, value);
            
            <span class="hljs-comment">// å¦‚æœæ¡¶ä¸ºç©ºï¼Œç›´æ¥æ’å…¥</span>
            <span class="hljs-keyword">if</span> (buckets[index] == <span class="hljs-literal">null</span>) {
                buckets[index] = newNode;
                size++;
                <span class="hljs-keyword">return</span>;
            }
            
            <span class="hljs-comment">// å¤„ç†å“ˆå¸Œå†²çªï¼Œä½¿ç”¨é“¾åœ°å€æ³•</span>
            <span class="hljs-type">Node</span> <span class="hljs-variable">current</span> <span class="hljs-operator">=</span> buckets[index];
            
            <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦å·²å­˜åœ¨ç›¸åŒçš„é”®</span>
            <span class="hljs-keyword">while</span> (current != <span class="hljs-literal">null</span>) {
                <span class="hljs-keyword">if</span> (current.key.equals(key)) {
                    current.value = value; <span class="hljs-comment">// æ›´æ–°å€¼</span>
                    <span class="hljs-keyword">return</span>;
                }
                <span class="hljs-keyword">if</span> (current.next == <span class="hljs-literal">null</span>) {
                    <span class="hljs-keyword">break</span>;
                }
                current = current.next;
            }
            
            <span class="hljs-comment">// åœ¨é“¾è¡¨æœ«å°¾æ·»åŠ æ–°èŠ‚ç‚¹</span>
            current.next = newNode;
            size++;
        }
        
        <span class="hljs-comment">// æŸ¥æ‰¾é”®å¯¹åº”çš„å€¼</span>
        <span class="hljs-keyword">public</span> Integer <span class="hljs-title function_">get</span><span class="hljs-params">(String key)</span> {
            <span class="hljs-type">int</span> <span class="hljs-variable">index</span> <span class="hljs-operator">=</span> hash(key);
            <span class="hljs-type">Node</span> <span class="hljs-variable">current</span> <span class="hljs-operator">=</span> buckets[index];
            
            <span class="hljs-comment">// éå†é“¾è¡¨æŸ¥æ‰¾åŒ¹é…çš„é”®</span>
            <span class="hljs-keyword">while</span> (current != <span class="hljs-literal">null</span>) {
                <span class="hljs-keyword">if</span> (current.key.equals(key)) {
                    <span class="hljs-keyword">return</span> current.value;
                }
                current = current.next;
            }
            
            <span class="hljs-comment">// æœªæ‰¾åˆ°</span>
            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
        }
        
        <span class="hljs-comment">// åˆ é™¤é”®å€¼å¯¹</span>
        <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">remove</span><span class="hljs-params">(String key)</span> {
            <span class="hljs-type">int</span> <span class="hljs-variable">index</span> <span class="hljs-operator">=</span> hash(key);
            <span class="hljs-type">Node</span> <span class="hljs-variable">current</span> <span class="hljs-operator">=</span> buckets[index];
            <span class="hljs-type">Node</span> <span class="hljs-variable">prev</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;
            
            <span class="hljs-comment">// æŸ¥æ‰¾ç›®æ ‡èŠ‚ç‚¹</span>
            <span class="hljs-keyword">while</span> (current != <span class="hljs-literal">null</span>) {
                <span class="hljs-keyword">if</span> (current.key.equals(key)) {
                    <span class="hljs-keyword">break</span>;
                }
                prev = current;
                current = current.next;
            }
            
            <span class="hljs-comment">// æœªæ‰¾åˆ°ç›®æ ‡èŠ‚ç‚¹</span>
            <span class="hljs-keyword">if</span> (current == <span class="hljs-literal">null</span>) {
                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
            }
            
            <span class="hljs-comment">// åˆ é™¤èŠ‚ç‚¹</span>
            <span class="hljs-keyword">if</span> (prev == <span class="hljs-literal">null</span>) {
                buckets[index] = current.next;
            } <span class="hljs-keyword">else</span> {
                prev.next = current.next;
            }
            
            size--;
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        }
        
        <span class="hljs-comment">// æ‰©å®¹å¹¶é‡æ–°å“ˆå¸Œ</span>
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">resize</span><span class="hljs-params">(<span class="hljs-type">int</span> newCapacity)</span> {
            Node[] oldBuckets = buckets;
            
            <span class="hljs-comment">// åˆ›å»ºæ–°çš„å“ˆå¸Œè¡¨</span>
            buckets = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Node</span>[newCapacity];
            capacity = newCapacity;
            size = <span class="hljs-number">0</span>;
            
            <span class="hljs-comment">// é‡æ–°å“ˆå¸Œæ‰€æœ‰å…ƒç´ </span>
            <span class="hljs-keyword">for</span> (Node bucket : oldBuckets) {
                <span class="hljs-type">Node</span> <span class="hljs-variable">current</span> <span class="hljs-operator">=</span> bucket;
                <span class="hljs-keyword">while</span> (current != <span class="hljs-literal">null</span>) {
                    put(current.key, current.value);
                    current = current.next;
                }
            }
        }
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">HashTable</span> <span class="hljs-variable">hashTable</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashTable</span>(<span class="hljs-number">10</span>);
        
        <span class="hljs-comment">// æ’å…¥æ•°æ®</span>
        hashTable.put(<span class="hljs-string">"apple"</span>, <span class="hljs-number">5</span>);
        hashTable.put(<span class="hljs-string">"banana"</span>, <span class="hljs-number">10</span>);
        hashTable.put(<span class="hljs-string">"orange"</span>, <span class="hljs-number">15</span>);
        hashTable.put(<span class="hljs-string">"grape"</span>, <span class="hljs-number">20</span>);
        
        <span class="hljs-comment">// æŸ¥æ‰¾æ•°æ®</span>
        System.out.println(<span class="hljs-string">"apple: "</span> + hashTable.get(<span class="hljs-string">"apple"</span>));
        System.out.println(<span class="hljs-string">"banana: "</span> + hashTable.get(<span class="hljs-string">"banana"</span>));
        System.out.println(<span class="hljs-string">"orange: "</span> + hashTable.get(<span class="hljs-string">"orange"</span>));
        System.out.println(<span class="hljs-string">"grape: "</span> + hashTable.get(<span class="hljs-string">"grape"</span>));
        System.out.println(<span class="hljs-string">"watermelon: "</span> + hashTable.get(<span class="hljs-string">"watermelon"</span>));
        
        <span class="hljs-comment">// åˆ é™¤æ•°æ®</span>
        hashTable.remove(<span class="hljs-string">"orange"</span>);
        System.out.println(<span class="hljs-string">"After removing orange: "</span> + hashTable.get(<span class="hljs-string">"orange"</span>));
    }
}
</code></pre>
<h3 data-id="heading-10">ä¼˜ç‚¹</h3>
<ul>
<li>æŸ¥æ‰¾ã€æ’å…¥å’Œåˆ é™¤æ“ä½œçš„å¹³å‡æ—¶é—´å¤æ‚åº¦ä¸º O(1)</li>
<li>é€‚ç”¨äºå¿«é€ŸæŸ¥æ‰¾</li>
<li>ä¸è¦æ±‚æ•°æ®æœ‰åºï¼Œæ›´çµæ´»</li>
<li>æ”¯æŒåŠ¨æ€æ•°æ®é›†ï¼Œé«˜æ•ˆåœ°æ·»åŠ å’Œåˆ é™¤å…ƒç´ </li>
<li>é€šè¿‡åˆé€‚çš„å“ˆå¸Œå‡½æ•°å’Œè§£å†³å†²çªç­–ç•¥ï¼Œèƒ½å®ç°éå¸¸ä¼˜ç§€çš„æ€§èƒ½</li>
</ul>
<h3 data-id="heading-11">ç¼ºç‚¹</h3>
<ul>
<li>å“ˆå¸Œå†²çªä¼šé™ä½æŸ¥æ‰¾æ•ˆç‡ï¼Œæœ€åæƒ…å†µä¸‹æ—¶é—´å¤æ‚åº¦å¯èƒ½é€€åŒ–åˆ° O(n)</li>
<li>éœ€è¦é¢å¤–çš„ç©ºé—´å­˜å‚¨å“ˆå¸Œè¡¨</li>
<li>ä¸æ”¯æŒèŒƒå›´æŸ¥è¯¢ï¼Œä¸é€‚åˆæŒ‰é¡ºåºéå†åœºæ™¯</li>
<li>è´Ÿè½½å› å­è¿‡é«˜ä¼šå¯¼è‡´æ€§èƒ½ä¸‹é™ï¼Œè¿‡ä½ä¼šæµªè´¹ç©ºé—´</li>
</ul>
<h3 data-id="heading-12">åº”ç”¨åœºæ™¯</h3>
<p>å“ˆå¸ŒæŸ¥æ‰¾é€‚ç”¨äºä»¥ä¸‹åœºæ™¯ï¼š</p>
<ul>
<li>éœ€è¦å¿«é€ŸæŸ¥æ‰¾ã€æ’å…¥å’Œåˆ é™¤æ“ä½œçš„æ•°æ®ç»“æ„ï¼Œå¦‚å­—å…¸æˆ–æ˜ å°„</li>
<li>å®ç°ç¼“å­˜ç³»ç»Ÿï¼Œæ¯”å¦‚LRUç¼“å­˜ã€å†…å­˜ç¼“å­˜ç­‰</li>
<li>æ•°æ®åº“ç´¢å¼•ï¼Œç‰¹åˆ«æ˜¯ç­‰å€¼æŸ¥è¯¢</li>
<li>ç¬¦å·è¡¨å®ç°ï¼Œå¦‚ç¼–è¯‘å™¨å’Œè§£é‡Šå™¨ä¸­çš„å˜é‡è¡¨</li>
<li>å»é‡æ“ä½œï¼Œåˆ¤æ–­å…ƒç´ æ˜¯å¦å·²å­˜åœ¨</li>
<li>ç½‘é¡µçˆ¬è™«çš„URLå»é‡</li>
</ul>
<h3 data-id="heading-13">ä¸€è‡´æ€§å“ˆå¸Œ</h3>
<p>ä¸€è‡´æ€§å“ˆå¸Œæ˜¯<strong>åˆ†å¸ƒå¼ç³»ç»Ÿ</strong>ä¸­çš„é‡è¦æ¦‚å¿µï¼Œç›®çš„æ˜¯å°½å¯èƒ½å°‘åœ°é‡æ–°åˆ†é…æ•°æ®</p>
<p>è¯¦æƒ…å¯ä»¥çœ‹<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.seven97.top%2Fmicroservices%2Fprotocol%2Fconsistencyhash.html" target="_blank" title="https://www.seven97.top/microservices/protocol/consistencyhash.html" ref="nofollow noopener noreferrer">ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•</a></p>
<h3 data-id="heading-14">å¸ƒéš†è¿‡æ»¤å™¨</h3>
<p>å¸ƒéš†è¿‡æ»¤å™¨æ˜¯ä¸€ç§ç©ºé—´æ•ˆç‡é«˜çš„æ¦‚ç‡å‹æ•°æ®ç»“æ„ï¼Œåˆ¤æ–­ä¸€ä¸ªå…ƒç´ æ˜¯å¦åœ¨é›†åˆä¸­</p>
<p>è¯¦æƒ…å¯ä»¥çœ‹<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.seven97.top%2Fcs-basics%2Fdata-structure%2Fbloomfilter.html" target="_blank" title="https://www.seven97.top/cs-basics/data-structure/bloomfilter.html" ref="nofollow noopener noreferrer">å¸ƒéš†è¿‡æ»¤å™¨</a></p>
<h3 data-id="heading-15">ç›¸å…³çš„ LeetCode çƒ­é—¨é¢˜ç›®</h3>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fleetcode.cn%2Fproblems%2Ftwo-sum%2F" target="_blank" title="https://leetcode.cn/problems/two-sum/" ref="nofollow noopener noreferrer">1. ä¸¤æ•°ä¹‹å’Œ</a>Â - ä½¿ç”¨å“ˆå¸Œè¡¨è®°å½•å·²éå†å…ƒç´ ï¼ŒæŸ¥æ‰¾ç›®æ ‡å€¼çš„è¡¥æ•°</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fleetcode.cn%2Fproblems%2Flongest-substring-without-repeating-characters%2F" target="_blank" title="https://leetcode.cn/problems/longest-substring-without-repeating-characters/" ref="nofollow noopener noreferrer">3. æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²</a>Â - ä½¿ç”¨å“ˆå¸Œè¡¨è®°å½•å­—ç¬¦æœ€åå‡ºç°çš„ä½ç½®</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fleetcode.cn%2Fproblems%2Fsingle-number%2F" target="_blank" title="https://leetcode.cn/problems/single-number/" ref="nofollow noopener noreferrer">136. åªå‡ºç°ä¸€æ¬¡çš„æ•°å­—</a>Â - å¯ä»¥ç”¨å“ˆå¸Œè¡¨è®°å½•æ¯ä¸ªæ•°å­—çš„å‡ºç°æ¬¡æ•°</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fleetcode.cn%2Fproblems%2Flru-cache%2F" target="_blank" title="https://leetcode.cn/problems/lru-cache/" ref="nofollow noopener noreferrer">146. LRU ç¼“å­˜</a>Â - ç»“åˆå“ˆå¸Œè¡¨å’ŒåŒå‘é“¾è¡¨å®ç°LRUç¼“å­˜</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fleetcode.cn%2Fproblems%2Fcontains-duplicate%2F" target="_blank" title="https://leetcode.cn/problems/contains-duplicate/" ref="nofollow noopener noreferrer">217. å­˜åœ¨é‡å¤å…ƒç´ </a>Â - ä½¿ç”¨å“ˆå¸Œè¡¨æ£€æŸ¥é‡å¤å…ƒç´ </li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fleetcode.cn%2Fproblems%2Fintersection-of-two-arrays%2F" target="_blank" title="https://leetcode.cn/problems/intersection-of-two-arrays/" ref="nofollow noopener noreferrer">349. ä¸¤ä¸ªæ•°ç»„çš„äº¤é›†</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fleetcode.cn%2Fproblems%2Ffirst-unique-character-in-a-string%2F" target="_blank" title="https://leetcode.cn/problems/first-unique-character-in-a-string/" ref="nofollow noopener noreferrer">387. å­—ç¬¦ä¸²ä¸­çš„ç¬¬ä¸€ä¸ªå”¯ä¸€å­—ç¬¦</a>Â - ä½¿ç”¨å“ˆå¸Œè¡¨ç»Ÿè®¡å­—ç¬¦å‡ºç°æ¬¡æ•°</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ€§èƒ½æ•°æ®åˆ«å†çè½®è¯¢äº†ï¼PerformanceObserver å¼‚æ­¥æ•è· LCP/CLSï¼Œä¸å¡ä¸»çº¿ç¨‹]]></title>    <link>https://juejin.cn/post/7582808491607375926</link>    <guid>https://juejin.cn/post/7582808491607375926</guid>    <pubDate>2025-12-12T15:38:30.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582808491607375926" data-draft-id="7582785032852373567" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ€§èƒ½æ•°æ®åˆ«å†çè½®è¯¢äº†ï¼PerformanceObserver å¼‚æ­¥æ•è· LCP/CLSï¼Œä¸å¡ä¸»çº¿ç¨‹"/> <meta itemprop="keywords" content="å‰ç«¯,æ€§èƒ½ä¼˜åŒ–"/> <meta itemprop="datePublished" content="2025-12-12T15:38:30.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="PineappleCoder"/> <meta itemprop="url" content="https://juejin.cn/user/3323167184272627"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ€§èƒ½æ•°æ®åˆ«å†çè½®è¯¢äº†ï¼PerformanceObserver å¼‚æ­¥æ•è· LCP/CLSï¼Œä¸å¡ä¸»çº¿ç¨‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3323167184272627/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    PineappleCoder
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-12T15:38:30.000Z" title="Fri Dec 12 2025 15:38:30 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ğŸš€ æ€§èƒ½ç›‘æ§çš„â€œæœ€å¼ºå¤§è„‘â€ï¼šPerformanceObserver APIï¼Œå¦‚ä½•è®©ä½ å‘Šåˆ«è½®è¯¢çš„å™©æ¢¦ï¼Ÿ</h2>
<blockquote>
<p><strong>å‰ç«¯æ€§èƒ½ä¼˜åŒ–ä¸“æ  - ç¬¬ä¸‰ç¯‡</strong></p>
</blockquote>
<p>åœ¨ä¸Šä¸€ç¯‡ä¸­ï¼Œæˆ‘ä»¬èŠåˆ°äº† RUMï¼ˆçœŸå®ç”¨æˆ·ç›‘æ§ï¼‰æ˜¯å¦‚ä½•å¸®åŠ©æˆ‘ä»¬æ‰“ç ´â€œè–›å®šè°”çš„ Bugâ€é­”å’’çš„ã€‚æ—¢ç„¶ RUM æ˜¯æ€§èƒ½ç›‘æ§çš„â€œé›·è¾¾â€ï¼Œé‚£ä¹ˆè°æ¥è´Ÿè´£å®æ—¶ã€ç²¾å‡†åœ°é‡‡é›†æ•°æ®å‘¢ï¼Ÿ</p>
<p>ç­”æ¡ˆå°±æ˜¯ä»Šå¤©çš„ä¸»è§’â€”â€”<strong>PerformanceObserver API</strong>ã€‚å®ƒå°±åƒæ˜¯æµè§ˆå™¨å†…ç½®çš„â€œé«˜æ€§èƒ½æ•°æ®é‡‡é›†å™¨â€ï¼Œå½»åº•æ”¹å˜äº†æˆ‘ä»¬è·å–æ€§èƒ½æ•°æ®çš„æ–¹å¼ã€‚</p>
<hr/>
<h3 data-id="heading-1">âš ï¸ ä¸ºä»€ä¹ˆéœ€è¦ PerformanceObserverï¼Ÿå‘Šåˆ«â€œè€é»„å†â€</h3>
<p>åœ¨ PerformanceObserver å‡ºç°ä¹‹å‰ï¼Œæˆ‘ä»¬è·å–æ€§èƒ½æ•°æ®çš„æ–¹å¼ï¼Œç®€ç›´å°±æ˜¯ä¸€åœºâ€œå™©æ¢¦â€ï¼š</p>
<h4 data-id="heading-2">ä¼ ç»Ÿæ–¹å¼ï¼šæ€§èƒ½ç›‘æ§çš„â€œè€é»„å†â€</h4>
<ol>
<li>
<p><strong><code>performance.timing</code> ä¸ <code>performance.getEntries()</code>ï¼š</strong></p>
<ul>
<li><strong>é—®é¢˜ï¼š</strong> è¿™äº› API åªèƒ½è·å–<strong>é¡µé¢åŠ è½½å®Œæˆé‚£ä¸€åˆ»</strong>çš„é™æ€æ•°æ®ã€‚å¯¹äºåƒ <strong>First Input Delay (FID)</strong> è¿™ç§å‘ç”Ÿåœ¨ç”¨æˆ·äº¤äº’è¿‡ç¨‹ä¸­çš„åŠ¨æ€æŒ‡æ ‡ï¼Œå®ƒä»¬å°±æ— èƒ½ä¸ºåŠ›äº†ã€‚</li>
<li><strong>ç—›ç‚¹ï¼š</strong> æƒ³è¦è·å–å®æ—¶æ•°æ®ï¼Ÿä½ åªèƒ½<strong>è½®è¯¢</strong>ï¼ˆä¸æ–­åœ°å»é—®ï¼šâ€œæ•°æ®å¥½äº†å—ï¼Ÿå¥½äº†å—ï¼Ÿâ€ï¼‰ã€‚è¿™ç§æ–¹å¼ä¸ä»…æ—¶æœºéš¾ä»¥æŒæ¡ï¼Œè¿˜ä¼šå¸¦æ¥é¢å¤–çš„<strong>æ€§èƒ½å¼€é”€</strong>ï¼Œç”šè‡³å¯èƒ½é˜»å¡ä¸»çº¿ç¨‹ï¼Œè®©é¡µé¢æ›´å¡ï¼</li>
</ul>
</li>
</ol>
<blockquote>
<p><strong>ä¸“ä¸šåè¯è§£é‡Šï¼šè½®è¯¢ (Polling)</strong> è½®è¯¢æ˜¯ä¸€ç§è®¡ç®—æœºé€šä¿¡æŠ€æœ¯ï¼ŒæŒ‡å®¢æˆ·ç«¯ç¨‹åºæˆ–è®¾å¤‡ä¸æ–­åœ°å‘æœåŠ¡å™¨ç¨‹åºæˆ–è®¾å¤‡å‘é€è¯·æ±‚ï¼Œä»¥æŸ¥è¯¢æ˜¯å¦æœ‰æ–°çš„æ•°æ®æˆ–çŠ¶æ€æ›´æ–°ã€‚åœ¨å‰ç«¯æ€§èƒ½ç›‘æ§ä¸­ï¼Œè½®è¯¢æ„å‘³ç€éœ€è¦å®šæ—¶æ£€æŸ¥æ€§èƒ½æ•°æ®æ˜¯å¦ç”Ÿæˆï¼Œæ•ˆç‡ä½ä¸‹ä¸”æ¶ˆè€—èµ„æºã€‚</p>
</blockquote>
<h4 data-id="heading-3">âœ¨ ä¼˜åŒ–æ–¹æ¡ˆï¼šäº‹ä»¶é©±åŠ¨çš„â€œé«˜æ€§èƒ½å¼•æ“â€</h4>
<p>PerformanceObserver çš„å‡ºç°ï¼Œå½»åº•è§£å†³äº†è½®è¯¢çš„ç—›ç‚¹ã€‚å®ƒæä¾›äº†ä¸€ç§<strong>äº‹ä»¶é©±åŠ¨ã€å¼‚æ­¥å›è°ƒ</strong>çš„æœºåˆ¶ï¼š</p>
<ul>
<li><strong>é«˜æ•ˆã€éé˜»å¡ï¼š</strong> å®ƒåœ¨æµè§ˆå™¨è®°å½•åˆ°æ€§èƒ½äº‹ä»¶æ—¶ï¼Œä¼š<strong>å¼‚æ­¥</strong>é€šçŸ¥ä½ ï¼Œä¸ä¼šé˜»å¡ä¸»çº¿ç¨‹ã€‚</li>
<li><strong>å®æ—¶æ€§ï¼š</strong> èƒ½å¤Ÿå®æ—¶æ•è·åŠ¨æ€æŒ‡æ ‡ï¼Œå¦‚ç”¨æˆ·é¦–æ¬¡è¾“å…¥å»¶è¿Ÿï¼ˆFIDï¼‰å’Œå¸ƒå±€åç§»ï¼ˆCLSï¼‰ã€‚</li>
<li><strong>å¯è®¢é˜…ï¼š</strong> ä½ å¯ä»¥åƒè®¢é˜…æŠ¥çº¸ä¸€æ ·ï¼Œé€‰æ‹©ä½ æ„Ÿå…´è¶£çš„æ€§èƒ½äº‹ä»¶ç±»å‹ã€‚</li>
</ul>
<h3 data-id="heading-4">ğŸ”„ PerformanceObserver çš„å·¥ä½œåŸç†ï¼šä¸‰æ­¥èµ°æˆ˜ç•¥</h3>
<p>PerformanceObserver çš„ä½¿ç”¨æµç¨‹éå¸¸ç®€æ´ï¼Œå¯ä»¥æ¦‚æ‹¬ä¸ºâ€œåˆ›å»ºã€æŒ‡å®šã€æ¥æ”¶â€ä¸‰æ­¥èµ°æˆ˜ç•¥ï¼š</p>
<h4 data-id="heading-5">æ­¥éª¤ 1ï¼šåˆ›å»ºè§‚æµ‹å™¨ï¼ˆObserverï¼‰</h4>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ª PerformanceObserver å®ä¾‹ï¼Œå¹¶ä¼ å…¥ä¸€ä¸ª<strong>å›è°ƒå‡½æ•° (callback)</strong> ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> observer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">PerformanceObserver</span>(<span class="hljs-function">(<span class="hljs-params">list</span>) =&gt;</span> {
 Â <span class="hljs-comment">// æµè§ˆå™¨åœ¨è®°å½•åˆ°æ€§èƒ½æ¡ç›®æ—¶ï¼Œä¼šè‡ªåŠ¨å¼‚æ­¥è§¦å‘è¿™ä¸ªå›è°ƒå‡½æ•°</span>
 Â <span class="hljs-comment">// list.getEntries() åŒ…å«äº†æ‰€æœ‰è¢«è§‚æµ‹åˆ°çš„æ€§èƒ½æ•°æ®</span>
})
</code></pre>
<blockquote>
<p><strong>å·¥ä½œåŸç†æ­ç§˜ï¼š</strong> æµè§ˆå™¨åœ¨å†…éƒ¨è®°å½•æ€§èƒ½æ•°æ®æ—¶ï¼Œä¼šæ£€æŸ¥æ˜¯å¦æœ‰ PerformanceObserver åœ¨ç›‘å¬ã€‚å¦‚æœæœ‰ï¼Œå®ƒå°±ä¼šå°†æœ€æ–°çš„æ€§èƒ½æ¡ç›®ï¼ˆPerformance Entryï¼‰æ‰“åŒ…ï¼Œå¹¶åœ¨<strong>ä¸‹ä¸€ä¸ªç©ºé—²æ—¶æœº</strong>ï¼ˆå¼‚æ­¥ï¼‰è°ƒç”¨ä½ æä¾›çš„å›è°ƒå‡½æ•°ã€‚</p>
</blockquote>
<h4 data-id="heading-6">æ­¥éª¤ 2ï¼šæŒ‡å®šè§‚æµ‹ç›®æ ‡ï¼ˆObserveï¼‰</h4>
<p>åˆ›å»ºå¥½è§‚æµ‹å™¨åï¼Œä½ éœ€è¦æ˜ç¡®å‘Šè¯‰å®ƒï¼šâ€œ<strong>æˆ‘æƒ³çœ‹å“ªäº›æ•°æ®ï¼Ÿ</strong> â€ è¿™é€šè¿‡ <code>observer.observe()</code> æ–¹æ³•å®ç°ï¼Œä½ éœ€è¦æŒ‡å®šä¸€ä¸ªæˆ–å¤šä¸ª <code>entryTypes</code>ã€‚</p>
<pre><code class="hljs language-css" lang="css">observer<span class="hljs-selector-class">.observe</span>({
 Â entryTypes: [<span class="hljs-string">'largest-contentful-paint'</span>, <span class="hljs-string">'first-input'</span>, <span class="hljs-string">'layout-shift'</span>]
})
</code></pre>
<p><strong>å¸¸è§çš„æ ¸å¿ƒè§‚æµ‹æŒ‡æ ‡ï¼š</strong></p>






























<table><thead><tr><th><code>entryType</code></th><th>å¯¹åº”æŒ‡æ ‡</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td><code>largest-contentful-paint</code></td><td><strong>LCP</strong></td><td>æœ€å¤§å†…å®¹ç»˜åˆ¶æ—¶é—´ï¼Œè¡¡é‡åŠ è½½é€Ÿåº¦ã€‚</td></tr><tr><td><code>first-input</code></td><td><strong>FID</strong></td><td>é¦–æ¬¡è¾“å…¥å»¶è¿Ÿï¼Œè¡¡é‡äº¤äº’å“åº”é€Ÿåº¦ã€‚</td></tr><tr><td><code>layout-shift</code></td><td><strong>CLS</strong></td><td>ç´¯ç§¯å¸ƒå±€åç§»ï¼Œè¡¡é‡è§†è§‰ç¨³å®šæ€§ã€‚</td></tr><tr><td><code>resource</code></td><td>Resource Timing</td><td>èµ„æºåŠ è½½ï¼ˆå›¾ç‰‡ã€CSSã€JSï¼‰çš„è¯¦ç»†è€—æ—¶ã€‚</td></tr></tbody></table>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8c1030d0b7734d5790c13268681c7981~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUGluZWFwcGxlQ29kZXI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766158710&amp;x-signature=RlG6%2FG%2BVARR%2FLPfcSrJVGqv7udY%3D" alt="PerformanceObserver ä¸ä¼ ç»Ÿæ–¹å¼å¯¹æ¯”å›¾" loading="lazy"/></p>
<h4 data-id="heading-7">æ­¥éª¤ 3ï¼šæ¥æ”¶å’Œå¤„ç†æ•°æ®ï¼ˆCallbackï¼‰</h4>
<p>åœ¨å›è°ƒå‡½æ•°ä¸­ï¼Œä½ å¯ä»¥é€šè¿‡ <code>list.getEntries()</code> è·å–åˆ°æ‰€æœ‰æ–°äº§ç”Ÿçš„æ€§èƒ½æ¡ç›®ã€‚æ¯ä¸ªæ¡ç›®ï¼ˆEntryï¼‰éƒ½æ˜¯ä¸€ä¸ªåŒ…å«è¯¦ç»†ä¿¡æ¯çš„å¯¹è±¡ã€‚</p>
<p><strong>ç¤ºä¾‹ï¼šåŸºç¡€ç”¨æ³•</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> observer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">PerformanceObserver</span>(<span class="hljs-function">(<span class="hljs-params">list</span>) =&gt;</span> {
 Â <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> entry <span class="hljs-keyword">of</span> list.<span class="hljs-title function_">getEntries</span>()) {
 Â  Â <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æŒ‡æ ‡åç§°ï¼š'</span>, entry.<span class="hljs-property">name</span>)
 Â  Â <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å¼€å§‹æ—¶é—´ï¼š'</span>, entry.<span class="hljs-property">startTime</span>)
 Â  Â <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æŒç»­æ—¶é—´ï¼š'</span>, entry.<span class="hljs-property">duration</span>)
â€‹
 Â  Â <span class="hljs-comment">// é’ˆå¯¹ä¸åŒæŒ‡æ ‡è¿›è¡Œç‰¹æ®Šå¤„ç†ï¼Œä¾‹å¦‚è·å– CLS çš„å…·ä½“å€¼</span>
 Â  Â <span class="hljs-keyword">if</span> (entry.<span class="hljs-property">entryType</span> === <span class="hljs-string">'layout-shift'</span>) {
 Â  Â  Â <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'CLS å€¼ï¼š'</span>, entry.<span class="hljs-property">value</span>)
 Â   }
 Â  Â <span class="hljs-comment">// åœ¨è¿™é‡Œå°†æ•°æ®ä¸ŠæŠ¥åˆ° RUM æœåŠ¡å™¨</span>
  }
})
â€‹
observer.<span class="hljs-title function_">observe</span>({
 Â <span class="hljs-attr">entryTypes</span>: [<span class="hljs-string">'largest-contentful-paint'</span>, <span class="hljs-string">'first-input'</span>, <span class="hljs-string">'layout-shift'</span>]
})
</code></pre>
<h3 data-id="heading-8">æ€»ç»“ï¼šPerformanceObserver çš„æ ¸å¿ƒä¼˜åŠ¿</h3>
<p>PerformanceObserver æ˜¯å‰ç«¯æ€§èƒ½ç›‘æ§é¢†åŸŸçš„ä¸€æ¬¡é‡å¤§é£è·ƒï¼Œå®ƒçš„æ ¸å¿ƒä¼˜åŠ¿åœ¨äºï¼š</p>
<ul>
<li><strong>å®æ—¶æ€§ï¼š</strong> <strong>äº‹ä»¶é©±åŠ¨</strong>ï¼Œæ€§èƒ½æ•°æ®ä¸€äº§ç”Ÿå°±èƒ½è¢«æ•è·ï¼Œæ— éœ€ä½æ•ˆçš„è½®è¯¢ã€‚</li>
<li><strong>ä½å¼€é”€ï¼š</strong> <strong>å¼‚æ­¥æ‰§è¡Œ</strong>ï¼Œä¸å ç”¨ä¸»çº¿ç¨‹èµ„æºï¼Œå¯¹ç”¨æˆ·ä½“éªŒå½±å“æå°ã€‚</li>
<li><strong>å¯æ‰©å±•ï¼š</strong> é€šè¿‡ <code>entryTypes</code>ï¼Œå¯ä»¥è½»æ¾<strong>è®¢é˜…</strong>æœªæ¥æµè§ˆå™¨æ–°å¢çš„å„ç§æ€§èƒ½äº‹ä»¶ã€‚</li>
<li><strong>æ˜“é›†æˆï¼š</strong> å®ƒæ˜¯ç°ä»£ RUM ç›‘æ§ä½“ç³»ä¸­ï¼Œæœ€æ ¸å¿ƒã€æœ€å¯é çš„æ•°æ®é‡‡é›†ç»„ä»¶ã€‚</li>
</ul>
<p><strong>ç»“è®ºï¼š</strong> PerformanceObserver æ˜¯æ„å»ºå‰ç«¯æ€§èƒ½å¯è§‚æµ‹æ€§çš„æ ¸å¿ƒç»„ä»¶ï¼Œå®ƒè®©æˆ‘ä»¬ä»â€œçŒœæµ‹æ€§èƒ½â€è¿ˆå‘äº† <strong>â€œæ•°æ®é©±åŠ¨çš„æ€§èƒ½ä¼˜åŒ–â€</strong> ï¼Œè®©æ€§èƒ½æ•°æ®é‡‡é›†å˜å¾—é«˜æ•ˆã€ä¼˜é›…ã€‚</p>
<hr/>
<p><strong>ä¸‹ä¸€ç¯‡é¢„å‘Šï¼š</strong> æ—¢ç„¶æˆ‘ä»¬èƒ½ç²¾å‡†åœ°æµ‹é‡æ€§èƒ½äº†ï¼Œä¸‹ä¸€æ­¥å°±æ˜¯å¦‚ä½•<strong>ä¸»åŠ¨å‡ºå‡»</strong>ï¼Œè®©æµè§ˆå™¨æå‰åŠ è½½èµ„æºã€‚ä¸‹ä¸€ç¯‡æˆ‘ä»¬å°†æ·±å…¥è®²è§£å‰ç«¯æ€§èƒ½ä¼˜åŒ–çš„â€œé¢„åŠ è½½ç¥å™¨â€â€”â€”<strong>æµè§ˆå™¨èµ„æºæç¤ºç¬¦</strong>ã€‚æ•¬è¯·æœŸå¾…ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‘Šåˆ«å­—ä½“é—ªçƒ / é¦–å±å¡é¡¿ï¼preload è®©å…³é”®èµ„æº â€œé«˜ä¼˜å…ˆçº§â€ æå‰åˆ°]]></title>    <link>https://juejin.cn/post/7582787460418797610</link>    <guid>https://juejin.cn/post/7582787460418797610</guid>    <pubDate>2025-12-12T15:43:54.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582787460418797610" data-draft-id="7582785032852389951" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‘Šåˆ«å­—ä½“é—ªçƒ / é¦–å±å¡é¡¿ï¼preload è®©å…³é”®èµ„æº â€œé«˜ä¼˜å…ˆçº§â€ æå‰åˆ°"/> <meta itemprop="keywords" content="å‰ç«¯,æ€§èƒ½ä¼˜åŒ–"/> <meta itemprop="datePublished" content="2025-12-12T15:43:54.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="PineappleCoder"/> <meta itemprop="url" content="https://juejin.cn/user/3323167184272627"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‘Šåˆ«å­—ä½“é—ªçƒ / é¦–å±å¡é¡¿ï¼preload è®©å…³é”®èµ„æº â€œé«˜ä¼˜å…ˆçº§â€ æå‰åˆ°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3323167184272627/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    PineappleCoder
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-12T15:43:54.000Z" title="Fri Dec 12 2025 15:43:54 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">âš¡ï¸ æµè§ˆå™¨â€œæœªåœå…ˆçŸ¥â€çš„ç§˜å¯†ï¼šèµ„æºæç¤ºç¬¦ï¼Œè®©ä½ çš„é¡µé¢åŠ è½½é€Ÿåº¦å¿«äººä¸€æ­¥ï¼</h2>
<blockquote>
<p><strong>å‰ç«¯æ€§èƒ½ä¼˜åŒ–ä¸“æ  - ç¬¬å››ç¯‡</strong></p>
</blockquote>
<p>åœ¨å‰ç«¯æ€§èƒ½ä¼˜åŒ–çš„æˆ˜åœºä¸Šï¼Œæ—¶é—´å°±æ˜¯é‡‘é’±ï¼Œå°¤å…¶æ˜¯åœ¨é¡µé¢åŠ è½½çš„å…³é”®æ—¶åˆ»ã€‚æˆ‘ä»¬ä¸Šä¸€ç¯‡è®²åˆ° PerformanceObserver å¯ä»¥ç²¾å‡†åœ°æµ‹é‡æ€§èƒ½ï¼Œä½†æµ‹é‡åªæ˜¯ç¬¬ä¸€æ­¥ï¼Œæ›´é‡è¦çš„æ˜¯<strong>ä¸»åŠ¨å‡ºå‡»</strong>ï¼Œè®©æµè§ˆå™¨åœ¨ç”¨æˆ·éœ€è¦èµ„æºä¹‹å‰ï¼Œå°±æå‰åšå¥½å‡†å¤‡ã€‚</p>
<p>ä»Šå¤©ï¼Œæˆ‘ä»¬å°±æ¥æ­ç§˜æµè§ˆå™¨â€œæœªåœå…ˆçŸ¥â€çš„ç§˜å¯†æ­¦å™¨â€”â€”<strong>èµ„æºæç¤ºç¬¦ï¼ˆResource Hintsï¼‰</strong> ã€‚</p>
<hr/>
<h3 data-id="heading-1">ğŸ’¡ ä»€ä¹ˆæ˜¯èµ„æºæç¤ºç¬¦ï¼Ÿ</h3>
<p>èµ„æºæç¤ºç¬¦ï¼ˆResource Hintsï¼‰æ˜¯ <code>&lt;link&gt;</code> æ ‡ç­¾ <code>rel</code> å±æ€§çš„ä¸€ç»„ç‰¹æ®Šå€¼ï¼Œç”¨äº<strong>å‘Šè¯‰æµè§ˆå™¨æœªæ¥å³å°†å‘ç”Ÿçš„èµ„æºå¤„ç†ç­–ç•¥ï¼Œè®©å®ƒæå‰åšå‡†å¤‡</strong>ã€‚</p>
<p>ç®€å•æ¥è¯´ï¼Œå®ƒä»¬æ˜¯å¼€å‘è€…ç»™æµè§ˆå™¨ä¸‹è¾¾çš„â€œé¢„å¤„ç†æŒ‡ä»¤â€ï¼Œè®©æµè§ˆå™¨åœ¨ç©ºé—²æˆ–å…³é”®æ—¶åˆ»ï¼Œæå‰å®Œæˆä¸€äº›è€—æ—¶çš„ç½‘ç»œæ“ä½œï¼Œä»è€Œï¼š</p>
<ul>
<li><strong>æé«˜ç½‘é¡µçš„é¦–å±åŠ è½½æ€§èƒ½</strong></li>
<li><strong>å‡å°‘ DNSã€TCPã€TLS ç­‰è¿æ¥å»¶è¿Ÿ</strong></li>
<li><strong>é¢„åŠ è½½å…³é”®æˆ–é¢„æµ‹æ€§èµ„æº</strong></li>
</ul>

<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- èµ„æºæç¤ºç¬¦ç¤ºä¾‹ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"preconnect"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"//cdn.example.com"</span>&gt;</span>
</code></pre>
<h3 data-id="heading-2">ğŸ”§ å››å¤§é‡‘åˆšï¼šèµ„æºæç¤ºç¬¦çš„å®¶æ—æˆå‘˜</h3>
<p>èµ„æºæç¤ºç¬¦å®¶æ—ä¸»è¦æœ‰å››ä¸ªæ ¸å¿ƒæˆå‘˜ï¼Œå®ƒä»¬å„æœ‰ç¥é€šï¼Œé’ˆå¯¹ä¸åŒçš„ä¼˜åŒ–åœºæ™¯ï¼š</p>
<h4 data-id="heading-3">1. dns-prefetchï¼šæœ€å°å¼€é”€çš„â€œæ‰“å¬â€</h4>
<pre><code class="hljs language-ini" lang="ini">&lt;link <span class="hljs-attr">rel</span>=<span class="hljs-string">"dns-prefetch"</span> href=<span class="hljs-string">"//api.example.com"</span>&gt;
</code></pre>
<ul>
<li>
<p><strong>ä½œç”¨ï¼š</strong> ä»…æå‰<strong>è§£æ DNS</strong>ï¼Œå°†åŸŸåè§£æä¸º IP åœ°å€ï¼Œ<strong>ä¸å»ºç«‹è¿æ¥</strong>ã€‚</p>
</li>
<li>
<p><strong>å¼€é”€ï¼š</strong> æœ€å°ï¼Œå…¼å®¹æ€§æœ€å¥½ã€‚</p>
</li>
<li>
<p><strong>ä½¿ç”¨åœºæ™¯ï¼š</strong></p>
<ul>
<li>éå…³é”®çš„<strong>ç¬¬ä¸‰æ–¹èµ„æº</strong>ï¼ˆå¦‚åˆ†æè„šæœ¬ã€å¹¿å‘Šã€æ’ä»¶ï¼‰ã€‚</li>
<li>å¯ä½œä¸º <code>preconnect</code> çš„<strong>é™çº§æ–¹æ¡ˆ</strong>ã€‚</li>
</ul>
</li>
</ul>
<blockquote>
<p><strong>ä¸“ä¸šåè¯è§£é‡Šï¼šDNS è§£æ</strong> DNSï¼ˆDomain Name Systemï¼‰è§£ææ˜¯å°†äººç±»å¯è¯»çš„åŸŸåï¼ˆå¦‚ <code>www.google.com</code>ï¼‰è½¬æ¢ä¸ºæœºå™¨å¯è¯»çš„ IP åœ°å€ï¼ˆå¦‚ <code>142.250.190.14</code>ï¼‰çš„è¿‡ç¨‹ã€‚è¿™æ˜¯ä¸€ä¸ªç½‘ç»œè¯·æ±‚çš„èµ·ç‚¹ï¼Œé€šå¸¸éœ€è¦å‡ ååˆ°å‡ ç™¾æ¯«ç§’ã€‚</p>
</blockquote>
<h4 data-id="heading-4">2. preconnectï¼šæå‰æ¡æ‰‹çš„â€œè€æœ‹å‹â€</h4>
<pre><code class="hljs language-ini" lang="ini">&lt;link <span class="hljs-attr">rel</span>=<span class="hljs-string">"preconnect"</span> href=<span class="hljs-string">"//cdn.example.com"</span> crossorigin&gt;
</code></pre>
<ul>
<li>
<p><strong>ä½œç”¨ï¼š</strong> å®Œæˆ <strong>DNS è§£æ + TCP æ¡æ‰‹ + TLS åŠ å¯†æ¡æ‰‹</strong>ï¼Œå…¨æµç¨‹å»ºç«‹è¿æ¥ã€‚</p>
</li>
<li>
<p><strong>æ•ˆæœï¼š</strong> æå¤§åœ°æ¶ˆé™¤äº†åç»­èµ„æºè¯·æ±‚çš„ç½‘ç»œå»¶è¿Ÿã€‚</p>
</li>
<li>
<p><strong>ä½¿ç”¨æ—¶æœºï¼š</strong></p>
<ul>
<li><strong>å­—ä½“åº“</strong>ã€<strong>æ ¸å¿ƒ API</strong>ã€<strong>CDN é™æ€èµ„æº</strong>ç­‰<strong>å…³é”®ç¬¬ä¸‰æ–¹åŸŸå</strong>ã€‚</li>
<li><strong>æ³¨æ„ï¼š</strong> å»ºç«‹è¿æ¥ä¼šæ¶ˆè€—èµ„æºï¼Œå»ºè®®<strong>æ§åˆ¶æ•°é‡</strong>ï¼ˆä¸€èˆ¬å»ºè®® â‰¤6 ä¸ªï¼‰ã€‚</li>
</ul>
</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b4cc6f82b3394e98a785b7e129668ff0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUGluZWFwcGxlQ29kZXI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766159033&amp;x-signature=UXJxSfUeLSVswStcnNEtoeWGHSw%3D" alt="Preconnect æå‰æ¡æ‰‹è¿‡ç¨‹ç¤ºæ„å›¾" loading="lazy"/></p>
<h4 data-id="heading-5">3. preloadï¼šé«˜ä¼˜å…ˆçº§çš„â€œå¿«é€’â€</h4>
<pre><code class="hljs language-bash" lang="bash">&lt;<span class="hljs-built_in">link</span> rel=<span class="hljs-string">"preload"</span> href=<span class="hljs-string">"font.woff2"</span> as=<span class="hljs-string">"font"</span> <span class="hljs-built_in">type</span>=<span class="hljs-string">"font/woff2"</span> crossorigin&gt;
</code></pre>
<ul>
<li>
<p><strong>ä½œç”¨ï¼š</strong> ç›´æ¥ä»¥<strong>é«˜ä¼˜å…ˆçº§</strong>ä¸‹è½½å…³é”®èµ„æºï¼Œä½†<strong>ä¸‹è½½åæš‚ä¸æ‰§è¡Œ</strong>ã€‚</p>
</li>
<li>
<p><strong>ç‰¹ç‚¹ï¼š</strong> æå‰è§¦å‘å…³é”®èµ„æºçš„åŠ è½½ï¼Œç¡®ä¿èµ„æºåœ¨éœ€è¦æ—¶ç«‹å³å¯ç”¨ã€‚</p>
</li>
<li>
<p><strong>å¸¸è§åœºæ™¯ï¼š</strong></p>
<ul>
<li><strong>CSS å®šä¹‰çš„å­—ä½“æ–‡ä»¶</strong>ï¼ˆé¿å…æ–‡æœ¬é—ªçƒ FOUT/FOITï¼‰ã€‚</li>
<li><strong>èƒŒæ™¯å›¾æˆ– LCP å…ƒç´ å›¾ç‰‡</strong>ï¼ˆåŠ é€Ÿæœ€å¤§å†…å®¹ç»˜åˆ¶ï¼‰ã€‚</li>
<li><strong>é¦–å±å¿…éœ€çš„åŠ¨æ€è„šæœ¬</strong>ã€‚</li>
</ul>
</li>
</ul>
<blockquote>
<p><strong>æ³¨æ„ï¼š</strong> <code>preload</code> å¿…é¡»é…åˆ <code>as</code> å±æ€§æŒ‡å®šèµ„æºç±»å‹ï¼Œå¦åˆ™æµè§ˆå™¨ä¼šé‡å¤ä¸‹è½½ã€‚</p>
</blockquote>
<h4 data-id="heading-6">4. prefetchï¼šç©ºé—²æ—¶çš„â€œä¸‹ä¸€ç«™â€</h4>
<pre><code class="hljs language-ini" lang="ini">&lt;link <span class="hljs-attr">rel</span>=<span class="hljs-string">"prefetch"</span> href=<span class="hljs-string">"next-page.js"</span>&gt;
</code></pre>
<ul>
<li>
<p><strong>ä½œç”¨ï¼š</strong> åœ¨<strong>å½“å‰é¡µåŠ è½½å®Œæˆå</strong>ï¼Œåˆ©ç”¨æµè§ˆå™¨<strong>ç©ºé—²æ—¶é—´</strong>è¯·æ±‚èµ„æºã€‚</p>
</li>
<li>
<p><strong>ç‰¹ç‚¹ï¼š</strong> ä¼˜å…ˆçº§æœ€ä½ï¼Œä¸ä¼šä¸å½“å‰é¡µé¢çš„å…³é”®èµ„æºç«äº‰å¸¦å®½ã€‚</p>
</li>
<li>
<p><strong>ä½¿ç”¨åœºæ™¯ï¼š</strong></p>
<ul>
<li><strong>ä¼˜åŒ–â€œä¸‹ä¸€ä¸ªé¡µé¢â€çš„åŠ è½½ä½“éªŒ</strong>ã€‚</li>
<li><strong>SPA è·¯ç”±</strong>ä¸­ï¼Œé¢„å–ç”¨æˆ·å¯èƒ½è®¿é—®çš„ä¸‹ä¸€ä¸ª <code>chunk</code>ã€‚</li>
<li>åŸºäº<strong>ç”¨æˆ·è¡Œä¸ºé¢„æµ‹</strong>çš„é¢„åŠ è½½ã€‚</li>
</ul>
</li>
</ul>
<h3 data-id="heading-7">ğŸ’¡ æ€»ç»“ï¼šè®©èµ„æºâ€œæ—©ä¸€æ­¥â€å‡†å¤‡å¥½</h3>
<p>èµ„æºæç¤ºç¬¦å®¶æ—çš„<strong>ç›®æ ‡ä¸€è‡´ï¼šè®©èµ„æºâ€œæ—©ä¸€æ­¥â€å‡†å¤‡å¥½</strong>ã€‚</p>
<p>å®ƒä»¬çš„æ ¸å¿ƒåŒºåˆ«åœ¨äº<strong>æ—¶æœºä¸æ·±åº¦</strong>ï¼š</p>








































<table><thead><tr><th>æç¤ºç¬¦</th><th>æ·±åº¦ï¼ˆæå‰åˆ°å“ªä¸€æ­¥ï¼‰</th><th>æ—¶æœºï¼ˆä½•æ—¶è§¦å‘ï¼‰</th><th>ä¼˜å…ˆçº§</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td><strong>dns-prefetch</strong></td><td>ä»… DNS è§£æ</td><td>å°½æ—©</td><td>ä½</td><td>éå…³é”®ç¬¬ä¸‰æ–¹èµ„æº</td></tr><tr><td><strong>preconnect</strong></td><td>DNS + TCP + TLS</td><td>å°½æ—©</td><td>ä¸­</td><td>å…³é”®ç¬¬ä¸‰æ–¹åŸŸå</td></tr><tr><td><strong>preload</strong></td><td>ä¸‹è½½èµ„æº</td><td>å°½æ—©ï¼ˆé«˜ä¼˜å…ˆçº§ï¼‰</td><td>é«˜</td><td>å½“å‰é¡µé¢çš„å…³é”®èµ„æº</td></tr><tr><td><strong>prefetch</strong></td><td>ä¸‹è½½èµ„æº</td><td>é¡µé¢ç©ºé—²æ—¶</td><td>æœ€ä½</td><td>ä¸‹ä¸€ä¸ªé¡µé¢çš„èµ„æº</td></tr></tbody></table>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/453201fa28564561a2662ccd2df38974~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUGluZWFwcGxlQ29kZXI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766159033&amp;x-signature=akWd5SlYkHI6nY69nxwtlLjzNC0%3D" alt="èµ„æºæç¤ºç¬¦æ¦‚è§ˆå›¾" loading="lazy"/></p>
<p><strong>é‡è¦æé†’ï¼š</strong> èµ„æºæç¤ºç¬¦è™½å¥½ï¼Œä½†<strong>è¿‡åº¦ä½¿ç”¨</strong>å¯èƒ½å¯¼è‡´æµªè´¹å¸¦å®½æˆ–å»ºç«‹è¿‡å¤šè¿æ¥ï¼Œåè€Œæ‹–æ…¢æ€§èƒ½ã€‚è¯·åŠ¡å¿…æ ¹æ®å®é™…çš„æ€§èƒ½æ•°æ®ï¼ˆæ¯”å¦‚ RUM é‡‡é›†çš„æ•°æ®ï¼‰æ¥åˆç†è§„åˆ’å’Œä½¿ç”¨ã€‚</p>
<hr/>
<p><strong>ä¸‹ä¸€ç¯‡é¢„å‘Šï¼š</strong> æ—¢ç„¶èµ„æºéƒ½æå‰åŠ è½½äº†ï¼Œå¦‚ä½•è®©å®ƒä»¬åœ¨ä¸‹æ¬¡è®¿é—®æ—¶<strong>æ›´å¿«</strong>å‡ºç°å‘¢ï¼Ÿä¸‹ä¸€ç¯‡æˆ‘ä»¬å°†æ·±å…¥æ¢è®¨å‰ç«¯æ€§èƒ½ä¼˜åŒ–çš„â€œèŠ‚æµå¤§å¸ˆâ€â€”â€”<strong>HTTP ç¼“å­˜æœºåˆ¶</strong>ã€‚æ•¬è¯·æœŸå¾…ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€Perfettoä»å…¥é—¨åˆ°ç²¾é€šã€‘3. Linuxï¼ˆAndroidï¼‰åº•å±‚å†…å­˜ç®¡ç†æœºåˆ¶æ¦‚è¿°]]></title>    <link>https://juejin.cn/post/7582846276505681958</link>    <guid>https://juejin.cn/post/7582846276505681958</guid>    <pubDate>2025-12-12T16:01:15.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582846276505681958" data-draft-id="7582791876367122470" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€Perfettoä»å…¥é—¨åˆ°ç²¾é€šã€‘3. Linuxï¼ˆAndroidï¼‰åº•å±‚å†…å­˜ç®¡ç†æœºåˆ¶æ¦‚è¿°"/> <meta itemprop="keywords" content="æ¶æ„,æ€§èƒ½ä¼˜åŒ–,ç›‘æ§"/> <meta itemprop="datePublished" content="2025-12-12T16:01:15.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Lei_official"/> <meta itemprop="url" content="https://juejin.cn/user/2351234021066314"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€Perfettoä»å…¥é—¨åˆ°ç²¾é€šã€‘3. Linuxï¼ˆAndroidï¼‰åº•å±‚å†…å­˜ç®¡ç†æœºåˆ¶æ¦‚è¿°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2351234021066314/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Lei_official
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-12T16:01:15.000Z" title="Fri Dec 12 2025 16:01:15 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;color:rgba(46,36,36,.87);overflow-x:hidden}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{margin-bottom:5px;font-size:30px;font-weight:500}.markdown-body h1:before{content:"#";margin-right:10px;color:#1976d2}.markdown-body h2{font-size:28px;font-weight:400;border-left:5px solid #454545;margin-top:20px;padding-left:10px;transition:all .3s ease-in-out}.markdown-body h2:hover{border-color:#1976d2}.markdown-body h3{font-size:24px;font-weight:400;margin-top:15px;padding-bottom:0}.markdown-body h4{font-size:20px;font-weight:500}.markdown-body h5{font-size:16px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body h2:first-letter,.markdown-body h3:first-letter,.markdown-body p:first-letter{text-transform:capitalize}.markdown-body em{text-emphasis:dot;text-emphasis-position:under}.markdown-body img{display:block;margin:0 auto!important;max-width:100%;border-radius:2px;box-shadow:0 2px 4px -1px rgba(0,0,0,.2),0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12)!important}.markdown-body hr{position:relative;width:98%;height:1px;border:none;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,#ddd,#999,#ddd);overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background:#fff;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center}.markdown-body code{font-weight:900;word-break:break-word;border-radius:2px;overflow-x:auto;font-size:.87em;padding:.065em .4em;background-color:#fbe5e1;color:#c0341d}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;border-radius:0 4px}.markdown-body pre&gt;code{font-weight:400;font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{margin:0 4px;text-decoration:none;color:#027fff;transition:all .3s ease-in-out;padding-bottom:4px;border-bottom:2px solid transparent}.markdown-body a:after{content:"";display:inline-block;width:18px;height:18px;margin-left:4px;vertical-align:middle;background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMiIgaGVpZ2h0PSIyMiI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIiBzdHJva2U9IiMwMjdGRkYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCI+PHBhdGggZD0iTTkuODE1IDYuNDQ4bDEuOTM2LTEuOTM2YzEuMzM3LTEuMzM2IDMuNTgtMS4yNTkgNS4wMTMuMTczIDEuNDMyIDEuNDMyIDEuNTEgMy42NzYuMTczIDUuMDEzbC0xLjQ1MiAxLjQ1Mi0uOTY4Ljk2OGMtMS4zMzcgMS4zMzYtMy41ODEgMS4yNTktNS4wMTMtLjE3MyIvPjxwYXRoIGQ9Ik0xMS4yNjcgMTUuMzY3bC0xLjkzNiAxLjkzNmMtMS4zMzYgMS4zMzctMy41OCAxLjI2LTUuMDEyLS4xNzMtMS40MzItMS40MzItMS41MS0zLjY3Ni0uMTczLTUuMDEybDEuNDUyLTEuNDUyLjk2OC0uOTY4YzEuMzM2LTEuMzM3IDMuNTgtMS4yNiA1LjAxMi4xNzMiLz48L2c+PC9zdmc+);background-size:cover;background-repeat:no-repeat}.markdown-body a:hover{border-color:#027fff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body a.footnote-backref:after,.markdown-body a.footnote-ref:after,.markdown-body sup a:after{display:none!important}.markdown-body table{margin:0 auto 10px;font-size:12px;width:auto;max-width:100%;overflow:auto;border:2px solid #c6c6c6}.markdown-body table img{box-shadow:none!important}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body del{color:rgba(0,0,0,.6)}.markdown-body blockquote{position:relative;color:#666;padding:5px 23px 1px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:hsla(0,0%,78.4%,.12);transition:all .2s ease-in-out}.markdown-body blockquote:hover{border-color:#1976d2}.markdown-body blockquote:after,.markdown-body blockquote:before{position:absolute;font-size:24px;font-weight:800;line-height:24px;color:#cbcbcb;opacity:.6}.markdown-body blockquote:before{content:"â€œ";top:4px;left:6px}.markdown-body blockquote:after{content:"â€";right:8px;bottom:-8px}.markdown-body blockquote&gt;p,.markdown-body blockquote blockquote{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body details{outline:none;border:none;border-left:4px solid #1976d2;padding-left:10px;margin-left:4px}.markdown-body details summary{cursor:pointer;border:none;outline:none;background:#fff;margin:0 -17px}.markdown-body details summary:hover::-webkit-details-marker{color:#1976d2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>Android å¸Œæœ›æä¾›ä¸–ç•Œä¸Šç¬¬ä¸€ä¸ªå®Œæ•´çš„å¼€æ”¾æ‰‹æœºå¹³å°è§£å†³æ–¹æ¡ˆã€‚å®ƒå°†ä»¥ Linux ä¸ºåŸºç¡€ï¼Œè¿™ä¸€ç‚¹å’Œå¾·å·ä»ªå™¨ä¸€æ ·ï¼Œä½†å®ƒåŒæ—¶ä¹Ÿå°†æä¾›å…¶ä»–æ‰€æœ‰å¿…è¦çš„ç»„ä»¶ï¼›æ‰‹æœºå‚å•†åªéœ€è¦ç”¨è¿™ä¸€ä¸ªç³»ç»Ÿå°±å¯ä»¥æ¨å‡ºè‡ªå·±çš„è®¾å¤‡ã€‚Android è¿˜å°†ä¸ºåº”ç”¨å¼€å‘è€…æä¾›ç»Ÿä¸€çš„ç¼–ç¨‹æ¨¡å‹ï¼Œè¿™æ ·ä»–ä»¬çš„åº”ç”¨ç¨‹åºå°±å¯ä»¥åœ¨æ‰€æœ‰çš„è®¾å¤‡ä¸Šè¿è¡Œã€‚é€šè¿‡é‡‡ç”¨ç»Ÿä¸€çš„å¹³å°æ¥æ”¯æŒæ‰€æœ‰è®¾å¤‡ï¼ŒAndroid èƒ½ç®€åŒ–æ‰‹æœºå‚å•†å’Œå¼€å‘è€…çš„å·¥ä½œã€‚â€”â€”ã€ŠAndroid ä¼ å¥‡ã€‹</p>
</blockquote>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/54f92a26869f4e63b3b1b2e35ba3dffd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTGVpX29mZmljaWFs:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766160113&amp;x-signature=1J62LQ9SRapv1%2FA7dOeToFI%2BUnA%3D" alt="lowhighmem.png" width="80%" loading="lazy"/>
<h2 data-id="heading-0">å‰è¨€ï¼šLinux å†…å­˜ç®¡ç†çš„é‡è¦æ€§</h2>
<p><strong>å†…å­˜</strong> ä½œä¸ºåº”ç”¨æ€§èƒ½æŒ‡æ ‡ä¸­éå¸¸é‡è¦çš„ä¸€é¡¹ï¼Œä¼šå¯¹åº”ç”¨è½¯ä»¶çš„ç¨³å®šæ€§ã€æµç•…æ€§äº§ç”Ÿç›´æ¥å½±å“ã€‚å¦‚æœåº”ç”¨å†…å­˜ä½¿ç”¨ä¸å½“ï¼Œä¼šå¯¼è‡´é¢‘ç¹å‘ç”Ÿ GCï¼Œè€Œ JVM çš„ GC å…·æœ‰ <code>Stop The World</code> çš„ç‰¹æ€§ï¼Œè¿™å°†å¼•èµ·åŒ…æ‹¬ UI åœ¨å†…çš„å…¨éƒ¨çº¿ç¨‹å¡é¡¿ã€‚æ›´æœ‰ç”šè€…ï¼Œæ— æ³•å›æ”¶çš„å†…å­˜ä¼šè€—å°½ç³»ç»Ÿåˆ†é…ç»™åº”ç”¨çš„å¯ç”¨ç©ºé—´ï¼Œæœ€ç»ˆå‘ç”Ÿ OOMã€‚å…¸å‹çš„é—®é¢˜åœºæ™¯æœ‰å†…å­˜æ³„æ¼ã€å†…å­˜æŠ–åŠ¨ç­‰ã€‚</p>
<p>å¯ä»¥è¯´ï¼Œåº”ç”¨çš„å¤§éƒ¨åˆ†æ€§èƒ½é—®é¢˜éƒ½å¯ä»¥å½’ç»“åœ¨ <strong>å†…å­˜</strong> ä¸Šï¼Œè¦æƒ³ä¿è¯åº”ç”¨å…·æœ‰è‰¯å¥½çš„ç”¨æˆ·ä½“éªŒï¼Œé¦–å½“å…¶å†²è¦è§£å†³çš„å°±æ˜¯å†…å­˜é—®é¢˜ã€‚å³ä½¿åº”ç”¨å½“å‰ä¸å­˜åœ¨è¿™æ–¹é¢çš„é—®é¢˜ï¼Œä½†æ˜¯éšç€åŠŸèƒ½çš„ä¸æ–­è¿­ä»£ï¼Œæ¶æ„ä¹Ÿå¿…ç„¶é€æ¸è…åŒ–ï¼Œå¦‚æœæ²¡æœ‰å…¨é¢å®Œå–„çš„å†…å­˜ç›‘æ§å’Œé¢„è­¦æœºåˆ¶ï¼Œå°±éš¾ä»¥åšåˆ°åœ¨å†…å­˜é—®é¢˜å‘ç”Ÿä¹‹å‰ï¼Œé˜²æ‚£äºæœªç„¶ã€‚</p>
<p>å¯¹äºå†…å­˜é—®é¢˜ï¼Œæˆ‘ä»¬ä¸ä»…è¦çŸ¥å…¶ç„¶ï¼Œè¿˜è¦çŸ¥å…¶æ‰€ä»¥ç„¶ï¼ŒAndroid åº•å±‚æ˜¯åŸºäº Linux å®ç°çš„ï¼Œå…¶å†…å­˜æœºåˆ¶ä¹Ÿæ˜¯è„±èƒäºç»å…¸çš„ Linux å†…å­˜ç®¡ç†ã€‚</p>
<p>æ­¤å¤–ï¼Œåœ¨æœ¬æ–‡ä¸­ï¼Œè¿˜å°†ä»‹ç»å‡ ä¸ªå¾ˆæœ‰ç”¨çš„ shell å‘½ä»¤ï¼ŒåŒ…å« <code>dumpsys meminfo</code>ã€<code>cat /proc/[pid]/status</code> ç­‰ç­‰ï¼Œç”¨å¥½è¿™äº›å‘½ä»¤ï¼Œä¼šæ˜¯å†…å­˜åˆ†æè¿‡ç¨‹ä¸­çš„ä¸€å¤§åŠ©åŠ›ã€‚</p>
<blockquote>
<p>å¤‡æ³¨ï¼šæœ¬æ–‡æ‰€æœ‰çš„å‘½ä»¤éƒ½çœç•¥äº†å¼€å¤´çš„ <code>adb shell</code>ã€‚</p>
</blockquote>
<h2 data-id="heading-1">dumpsys meminfoï¼šæŸ¥çœ‹è¿›ç¨‹å½“å‰çš„å†…å­˜ä½¿ç”¨æƒ…å†µ</h2>
<p>åœ¨ç”µè„‘æ§åˆ¶å°æ‰§è¡Œ <code>adb shell dumpsys meminfo [packageName]</code>ï¼Œå¯ä»¥æŸ¥çœ‹è¯¥è¿›ç¨‹å½“å‰å†…å­˜ä½¿ç”¨æƒ…å†µã€‚</p>
<pre><code class="hljs language-bash" lang="bash">Î» adb shell dumpsys meminfo com.google.samples.apps.nowinandroid.demo.debug
Applications Memory Usage (<span class="hljs-keyword">in</span> Kilobytes):
Uptime: 655869283 Realtime: 912305084

** MEMINFO <span class="hljs-keyword">in</span> pid 22144 [com.google.samples.apps.nowinandroid.demo.debug] **
                   Pss  Private  Private  SwapPss      Rss     Heap     Heap     Heap
                 Total    Dirty    Clean    Dirty    Total     Size    Alloc     Free
                ------   ------   ------   ------   ------   ------   ------   ------
  Native Heap    11347    11336        0     9038    12196    31844    20762     7264
  Dalvik Heap     9079     9060        0     1768     9740   108170     9866    98304
[ä¸‹ç•¥]
</code></pre>
<p>åœ¨ <code>Private Dirty</code> åˆ—ä¸­ï¼Œè®°å½•äº† Native å’Œ Dalvikï¼ˆJavaï¼‰å†…å­˜ä½¿ç”¨é‡ï¼Œè€Œ <code>dirty</code> çš„å«ä¹‰æ˜¯ä»€ä¹ˆï¼Ÿä»¥åŠ <code>clean</code>, <code>Rss</code>, <code>Pss</code>, <code>Swat</code> åˆ†åˆ«åˆä»£è¡¨äº†ä»€ä¹ˆï¼Ÿ</p>
<h3 data-id="heading-2">è™šæ‹Ÿå†…å­˜ï¼ˆVMAï¼‰ä¸ç‰©ç†å†…å­˜ï¼ˆPhysical Memoryï¼‰</h3>
<p>è¿™äº›éƒ½æ˜¯ Linux ç¯å¢ƒä¸‹å†…å­˜ç®¡ç†çš„æ¦‚å¿µï¼Œç«™åœ¨å†…æ ¸çš„è§†è§’ä¸‹ï¼Œå†…å­˜åˆ†é…çš„æœ€å°ç²’åº¦æ˜¯ <code>pages</code>ï¼ˆåˆ†é¡µï¼‰ï¼Œä¸€ä¸ª page å¤§å°æ˜¯ 4KBï¼Œè¿™æ˜¯ Linux å†…æ ¸çš„åŸºç¡€é¡µå¤§å°ï¼Œæ˜¯å†…å­˜ç®¡ç†çš„æœ€å°å•ä½ï¼Œ<code>mmap()</code>/<code>malloc()</code>/<code>åŒ¿åé¡µ</code> æœ€ç»ˆéƒ½æ˜¯æŒ‰ç…§ 4KB è¿›è¡Œå¯¹é½ã€‚pages åœ¨ <strong>â€œè™šæ‹Ÿå†…å­˜åŒºï¼ˆVirtual Memory Areaï¼ŒVMAï¼‰â€</strong> ä¸­è¿›è¡Œç®¡ç†å’Œç»„ç»‡ï¼Œå®ƒè·ŸçœŸå®å†…å­˜åŒºæ˜¯ä¸€ä¸€å¯¹åº”çš„ï¼Œé€šè¿‡ VMAï¼Œå¯ä»¥å°†ç¢ç‰‡åŒ–çš„çœŸå®å†…å­˜æ˜ å°„ä¸ºè¿ç»­çš„è™šæ‹Ÿå†…å­˜ã€‚</p>
<p>åº”ç”¨è¿›ç¨‹å¹¶ä¸é€šè¿‡ <a href="https://link.juejin.cn?target=https%3A%2F%2Fman7.org%2Flinux%2Fman-pages%2Fman2%2Fmmap.2.html" target="_blank" title="https://man7.org/linux/man-pages/man2/mmap.2.html" ref="nofollow noopener noreferrer">mmap()</a> å‡½æ•°ç›´æ¥å£°æ˜å†…å­˜å ç”¨ï¼Œè€Œæ˜¯è°ƒç”¨ <code>malloc()</code> â€”â€”native ä»£ç ï¼Œå’Œ <code>new()</code> â€”â€”Java ä»£ç æ¥è¿›è¡Œç”³è¯·ã€‚</p>
<p>æœ‰ä¸¤ç§ç±»å‹çš„â€œè™šæ‹Ÿå†…å­˜åŒºâ€ï¼š</p>
<ul>
<li><strong>åŸºäºæ–‡ä»¶çš„ VMA</strong> ï¼šåº•å±‚ä½¿ç”¨æ–‡ä»¶å®ç°ï¼Œé€šè¿‡å°†æ–‡ä»¶æè¿°ç¬¦ï¼ˆfdï¼‰æä¾›ç»™ <code>mmap()</code> å‡½æ•°ï¼Œå°†åœ¨ VMA ä¸Šçš„è¯»å†™æ“ä½œæ˜ å°„ä¸ºæ–‡ä»¶è¯»å†™ã€‚åœ¨ Linux ç³»ç»Ÿä¸­ï¼ŒåŠ¨æ€é“¾æ¥å™¨ï¼ˆldï¼‰åœ¨è¿è¡Œæ–°è¿›ç¨‹ã€åŠ¨æ€åŠ è½½åº“æ—¶ï¼Œä¼šä½¿ç”¨åŸºäºæ–‡ä»¶çš„ VMAã€‚Android ç³»ç»Ÿåˆ™åœ¨åŠ è½½ dex æ–‡ä»¶å’Œèµ„æºæ—¶ä½¿ç”¨è¿™ä¸€æ–¹å¼ã€‚</li>
<li><strong>åŒ¿å VMA</strong> ï¼šéæ–‡ä»¶ç³»ç»Ÿï¼Œåªé€šè¿‡å†…å­˜å®ç°ã€‚è°ƒç”¨ <code>mmap(... MAP_ANONYMOUS ...)</code> ä¼šä½¿ç”¨è¿™ç§æ–¹å¼ã€‚åŠ¨æ€ç”³è¯·çš„å†…å­˜ç»Ÿç»Ÿå½’äºæ­¤ç±»ï¼Œä¾‹å¦‚ C çš„ <code>malloc()</code>ã€C++ çš„ <code>new()</code> å’Œ Java çš„ <code>new X()</code> â€”â€” è¿™ä¹Ÿæ˜¯æˆ‘ä»¬è¦å…³æ³¨çš„é‡ç‚¹ã€‚</li>
</ul>
<p>åº”ç”¨ä»è™šæ‹Ÿå†…å­˜ä¸­ç”³è¯·å†…å­˜ï¼Œæœ€ç»ˆä¼šæ˜ å°„åˆ°ç‰©ç†å†…å­˜ä¸Šï¼Œå‰è€…å¾€å¾€å¤§äºåè€…ã€‚æˆ‘ä»¬ç»Ÿè®¡å†…å­˜å ç”¨æ—¶ï¼Œé€šå¸¸åªå…³æ³¨ç‰©ç†å†…å­˜çš„å¤§å°ï¼Œå¿½ç•¥è™šæ‹Ÿå†…å­˜ã€‚ä¾‹å¦‚ï¼Œç³»ç»Ÿåˆ†é…ç»™åº”ç”¨<code>32MB</code> çš„è™šæ‹Ÿå†…å­˜ï¼Œåº”ç”¨éšåå‘å…¶ä¸­å†™å…¥ <code>4KB</code> æ•°æ®ï¼Œå®é™…ä¸Šåªå ç”¨äº† <code>4KB</code> çš„ç‰©ç†å†…å­˜ã€‚åœ¨64ä½çš„ç³»ç»Ÿä¸Šï¼Œè™šæ‹Ÿå†…å­˜åœ°å€å¾ˆéš¾è€—å°½ï¼Œç»å¤§å¤šæ•°åœºæ™¯ä¸‹æ— éœ€å…³æ³¨ã€‚</p>
<h3 data-id="heading-3">RSS ä¸ PSS</h3>
<p>åº”ç”¨å ç”¨çš„ç‰©ç†å†…å­˜å¤§å°ï¼Œç§°ä¸º <strong>â€œé©»ç•™å†…å­˜å¤§å°ï¼ˆResident Set Sizeï¼ŒRSSï¼‰â€</strong>ã€‚</p>
<p>æœ‰äº†ä»¥ä¸ŠåŸºç¡€çŸ¥è¯†ï¼Œæ¥ä¸‹æ¥å°±å¯ä»¥å¯¹è™šæ‹Ÿå†…å­˜ VMA ä¸­çš„åˆ†é¡µè¿›è¡Œå½’ç±»äº†ï¼Œè¿™ä¹Ÿå°±å¯¹åº”ç€å‰é¢ <code>dumpsys meminfo</code> æŒ‡ä»¤çš„è¾“å‡ºç»“æœã€‚</p>
<ul>
<li><strong>é©»ç•™çŠ¶æ€ï¼ˆResidentï¼‰</strong>ï¼šè¯¥åˆ†é¡µå·²ç»è¢«æ˜ å°„åˆ°ç‰©ç†å†…å­˜ï¼Œå¯ç»†åˆ†ä¸ºä¸¤ç±»ã€‚
<ul>
<li><strong>å¹²å‡€ï¼ˆCleanï¼‰</strong>ï¼šåˆ†é¡µå†…å®¹ä¸åº•å±‚æ–‡ä»¶ä¸­çš„å†…å®¹ç›¸åŒï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå†…æ ¸å¯ä»¥è‡ªç”±æ¸…é™¤åˆ†é¡µå†…å®¹ï¼Œè€Œä¸å¿…æ‹…å¿ƒæ•°æ®ä¸¢å¤±ã€‚</li>
<li><strong>è„ï¼ˆDirtyï¼‰</strong>ï¼šåˆ†é¡µå†…å®¹ä¸åº•å±‚æ–‡ä»¶å†…å®¹ä¸ç›¸åŒï¼Œåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ç”šè‡³ä¸å­˜åœ¨åº•å±‚æ˜ å°„æ–‡ä»¶ã€‚æ­¤æ—¶ï¼Œä¸å…è®¸å†…æ ¸æ¸…é™¤åˆ†é¡µå†…å®¹ã€‚</li>
</ul>
</li>
<li><strong>äº¤æ¢çŠ¶æ€ï¼ˆSwappedï¼‰</strong>ï¼šè„åˆ†é¡µè¢«å†™å…¥åˆ°äº¤æ¢æ–‡ä»¶ï¼ˆåœ¨ Android ä¸­æ˜¯ ZRAMï¼‰ï¼Œè¿™æ˜¯ä¸€ä¸ªä¸´æ—¶çŠ¶æ€ï¼Œå½“ä¸‹æ¬¡ç¼ºé¡µå¼‚å¸¸ï¼ˆpage faultï¼‰å‘ç”Ÿæ—¶ï¼Œä¼šå°†è¿™éƒ¨åˆ†å†…å®¹é‡æ–°è½¬ç§»åˆ°å†…å­˜ã€‚</li>
<li><strong>æœªå ç”¨çŠ¶æ€ï¼ˆNot presentï¼‰</strong>ï¼šè¯¥åˆ†é¡µä»æœªä½¿ç”¨è¿‡ã€‚</li>
</ul>
<p>åœ¨ Android ç³»ç»Ÿä¸­ï¼Œåº”å½“é‡ç‚¹å…³æ³¨è„åˆ†é¡µ <code>Private Dirty</code>ï¼Œå› ä¸ºè„åˆ†é¡µæ— æ³•è¢«è½¬ç§»åˆ°æ–‡ä»¶ç³»ç»Ÿï¼Œå› æ­¤ä¸èƒ½è¢«å†…æ ¸å›æ”¶å†åˆ©ç”¨ã€‚</p>
<p>ä½œä¸ºæ“ä½œç³»ç»Ÿï¼ŒAndroid å¯¹äºå¤šä¸ªåº”ç”¨éƒ½è¦ä½¿ç”¨åˆ°çš„åº“ï¼ˆä¾‹å¦‚ <code>libc.so</code>ã€<code>framework.dex</code>ï¼‰è¿›è¡Œäº†ä¼˜åŒ–ï¼Œç³»ç»Ÿå°†å®ƒä»¬ä½œä¸ºå…±äº«èµ„æºè¿›è¡ŒåŠ è½½ã€‚è¿™äº›æ•°æ®æœ€åˆå±äº <code>zygote</code> è¿›ç¨‹ï¼Œå½“ç³»ç»Ÿ <code>fork()</code> æ–°çš„åº”ç”¨è¿›ç¨‹æ—¶ï¼Œä½¿ç”¨çš„æ˜¯ç›¸åŒçš„é¡µé¢åœ°å€ã€‚åŒä¸€æ—¶åˆ»å³ä½¿ç³»ç»Ÿé‡Œè¿è¡Œäº† 100 ä¸ªåº”ç”¨ï¼Œåœ¨è¿™éƒ¨åˆ†ä¸Šå…¬æœ‰åº“å ç”¨çš„å†…å­˜ä»ç„¶åªæœ‰ä¸€ä»½ã€‚</p>
<p>å› æ­¤å¼•å…¥äº† <strong>â€œæŒ‰æ¯”ä¾‹å†…å­˜å ç”¨ï¼ˆProportional Set Sizeï¼ŒPSSï¼‰â€</strong> çš„æ¦‚å¿µï¼Œå¯¹äºå…±äº«å†…å­˜æŒ‰æ¯”ä¾‹åˆ’åˆ†ã€‚ä¾‹å¦‚æˆ‘ä»¬å°† <code>4KB</code> çš„åˆ†é¡µå…±äº«ç»™4æ¡è¿›ç¨‹ï¼Œæ¯ä¸€æ¡è¿›ç¨‹å ç”¨çš„å†…å­˜åˆ™æ˜¯ <code>1KB</code>ã€‚</p>
<h2 data-id="heading-4">cat /proc/[pid]/statusï¼šæŸ¥çœ‹åº”ç”¨å¯åŠ¨ä»¥æ¥ RSS çš„æœ€å¤§å€¼</h2>
<p>å‰æ–‡ä»‹ç»è¿‡ï¼Œ<code>dumpsys meminfo</code> å¯ä»¥è¿”å›åº”ç”¨å½“å‰çš„è¯¦ç»†å†…å­˜ä½¿ç”¨çŠ¶æ€ï¼Œå¦‚æœè¯´æˆ‘ä»¬æƒ³è¦è·Ÿè¸ªè‡ªåº”ç”¨è¿›ç¨‹å¯åŠ¨ä»¥æ¥ï¼Œæ‰€ç”³è¯·è¿‡çš„æœ€å¤§ RSSï¼Œåˆ™å¯ä»¥é€šè¿‡ <code>cat /proc/[pid]/status</code> æ¥æŸ¥çœ‹ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">Î» adb shell <span class="hljs-built_in">cat</span> /proc/19947/status
[ç•¥]
VmPeak: 37292428 kB
VmSize: 32416288 kB
VmLck:       192 kB
VmPin:         0 kB
VmHWM:   1187096 kB &lt;=== RSS High Watermark
VmRSS:    521832 kB
RssAnon:          122076 kB
RssFile:          362528 kB
RssShmem:          37228 kB
VmData:  1669512 kB
VmStk:      8192 kB
VmExe:         8 kB
VmLib:    224720 kB
VmPTE:      5572 kB
VmSwap:   258472 kB
[ç•¥]
</code></pre>
<p><code>VmHWM</code> è®°å½•äº†è¿›ç¨‹è‡ªå¯åŠ¨ä»¥æ¥ï¼Œæœ€å¤§çš„ç¬æ—¶ RSS å€¼ï¼Œå¯ä»¥çœ‹åˆ°é«˜è¾¾ <code>1187M</code>ã€‚</p>
<h3 data-id="heading-5">ä½¿ç”¨ Perfetto è®°å½•å†…å­˜ï¼ˆRSSï¼‰å¢é•¿æ›²çº¿</h3>
<p><strong>é…ç½®æ–‡ä»¶ config.pbtx</strong></p>
<pre><code class="hljs language-plaintext" lang="plaintext">buffers: {
    size_kb: 8960
    fill_policy: DISCARD
}
buffers: {
    size_kb: 1280
    fill_policy: DISCARD
}
data_sources: {
    config {
        name: "linux.process_stats"
        target_buffer: 1
        process_stats_config {
            scan_all_processes_on_start: true
        }
    }
}
data_sources: {
    config {
        name: "linux.ftrace"
        ftrace_config {
            ftrace_events: "mm_event/mm_event_record"
            ftrace_events: "kmem/rss_stat"
            ftrace_events: "kmem/ion_heap_grow"
            ftrace_events: "kmem/ion_heap_shrink"
        }
    }
}
duration_ms: 30000
</code></pre>
<p>ä½¿ç”¨å‘½ä»¤ <code>cat config.pbtx | adb shell perfetto -c - --txt -o /data/misc/perfetto-traces/trace.pftrace</code> å¼€å¯æŠ“å–ï¼Œæ“ä½œç•Œé¢ï¼Œ30s åç»“æŸæŠ“å–ã€‚</p>
<blockquote>
<p>è¿™é‡Œæˆ‘é‡‡ç”¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fperfetto.dev%2Fdocs%2Fcase-studies%2Fmemory%23memory-tracepoints" target="_blank" title="https://perfetto.dev/docs/case-studies/memory#memory-tracepoints" ref="nofollow noopener noreferrer">å®˜æ–¹ç»™å‡ºçš„é…ç½®</a>å¹¶æœªèƒ½æ­£å¸¸æŠ“å– trace æ–‡ä»¶ï¼Œåªèƒ½è·å–åˆ°ä¸€ä¸ªå¤§çº¦ 830KB çš„ç©ºæ–‡ä»¶ã€‚å…ˆé‡‡ç”¨å®˜æ–¹çš„å›¾ç‰‡ä½œä¸ºè®²è§£ï¼Œå¦‚æœæœ‰è¯»è€…æ‰¾åˆ°é—®é¢˜åŸå› ï¼Œæ¬¢è¿ä¸åèµæ•™ã€‚</p>
</blockquote>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/777b90675ac84881a1c559016bbb28af~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTGVpX29mZmljaWFs:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766160113&amp;x-signature=0DFcm7jVvMnkEFXax5mATVfra0E%3D" alt="rss_camera.png" loading="lazy"/></p>
<p>ä»è¿™ä¸ªå›¾å¯ä»¥çœ‹å‡ºï¼Œåœ¨å¤§çº¦æ—¶é—´è¿›è¡Œåˆ°2/3æ—¶ï¼Œ<code>mem.rss.ion</code> å‘ç”Ÿå¢é•¿ï¼Œè¯´æ˜æ­¤æ—¶ç”¨æˆ·æ“ä½œå¼•èµ·äº†å†…å­˜åˆ†é…ã€‚</p>
<h2 data-id="heading-6">am dumpheap [packageName]ï¼šæŠ“å– JVM å†…å­˜å¿«ç…§</h2>
<pre><code class="hljs language-bash" lang="bash">Î» adb shell am dumpheap com.google.samples.apps.nowinandroid.demo.debug
File: /data/local/tmp/heapdump-20251212-093630.prof
Waiting <span class="hljs-keyword">for</span> dump to finish...
</code></pre>
<p>æŠ“å–å¯¹åº”åŒ…åçš„ prof æ–‡ä»¶åï¼Œå°†å…¶ pull åˆ°ç”µè„‘ä¸Šï¼Œæ”¹åä¸º <code>*.hprof</code>åï¼Œå°±å¯ä»¥åœ¨ AndroidStudio ä¸­æŸ¥çœ‹å½“å‰è¿›ç¨‹çš„ JVM å†…å­˜å¿«ç…§ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/848aa106363a4809ab0fed142345c7ca~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTGVpX29mZmljaWFs:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766160113&amp;x-signature=8UErgVgT7wlTB1BRdYCKJjCyaKU%3D" alt="memory_hprof.png" loading="lazy"/></p>
<p>ä¹Ÿå¯ä»¥ç”¨ Perfetto åœ¨çº¿æ‰“å¼€è¯¥å¿«ç…§ï¼Œä¼šä»¥ç«ç„°å›¾çš„æ–¹å¼å±•ç¤ºå¯¹è±¡å ç”¨å †å¤§å°ï¼Œå¯¹äºç±»å‹ç›¸åŒçš„å¯¹è±¡èšåˆåå±•ç¤ºï¼Œä¼˜ç‚¹æ˜¯æ›´åŠ ç›´è§‚ï¼Œç¼ºç‚¹æ˜¯æ— æ³•æŸ¥çœ‹å¯¹è±¡å†…éƒ¨æ•°æ®ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0ccc44ace74549f49cec04e9814267b8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTGVpX29mZmljaWFs:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766160113&amp;x-signature=P1adtgpXnpA0KkuhXoIkwAZ4V3A%3D" alt="hprof_flame.png" loading="lazy"/></p>
<h2 data-id="heading-7">showmap [pid]ï¼šå±•ç¤ºå†…å­˜-æ–‡ä»¶æ˜ å°„</h2>
<p>åº•å±‚é€šè¿‡è¯»å– <code>/proc/PID/smaps</code> æ–‡ä»¶æ¥å®ç°ã€‚</p>
<p>é¦–å…ˆè·å– NowInAndroid çš„ PID=19147ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">Î» adb shell ps -A | grep nowinandroid
u0_a225   19147   996   28342616 303680 do_epoll_wait       0 S com.google.samples.apps.nowinandroid.demo.debug
</code></pre>
<p>éšåæŸ¥çœ‹å…¶å†…å­˜ä¸­çš„åŸºäºæ–‡ä»¶çš„ VMA æ˜ å°„ã€‚</p>
<p>è¾“å…¥ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">Î» adb shell showmap 19147
</code></pre>
<p>è¾“å‡ºï¼š</p>
<p>åœ¨ä¸‹æ–‡ä¸­ï¼Œè¾“å‡ºå†…å®¹ä¸­å·²ç»çœç•¥å»äº†å¤§éƒ¨åˆ†ï¼ŒåŸæœ¬çš„æ˜ å°„æ–‡ä»¶æ•°é‡æœ‰869ä¸ªã€‚è¿™é‡Œé¢æœ‰ jar åŒ…ã€so åº“ã€ttf å­—ä½“æ–‡ä»¶ã€dex æ–‡ä»¶ç­‰ã€‚å¯ä»¥è¯´ï¼Œå æ®å¤§å¤šæ•°çš„æ˜¯åº”ç”¨ä½¿ç”¨åˆ°çš„èµ„æºæ–‡ä»¶ã€‚</p>
<p>è™½ç„¶æ•°é‡å¤šï¼Œä½†ç”±äºæ˜¯â€œå…±äº«â€çš„åŸå› ï¼ŒçœŸæ­£çš„ PSS å’Œ private dirty å¹¶ä¸å¤šã€‚</p>






























<table><thead><tr><th>åŒºåŸŸ</th><th>å¤§å°ï¼ˆbï¼‰</th><th>å¤‡æ³¨</th></tr></thead><tbody><tr><td>RSS</td><td>296680</td><td>RSS = shared clean + shared dirty + private clean + private dirty</td></tr><tr><td>PSS</td><td>131754</td><td/></tr><tr><td>shared dirty</td><td>34224</td><td/></tr><tr><td>private dirty</td><td>55536</td><td/></tr></tbody></table>
<pre><code class="hljs language-plaintext" lang="plaintext"> virtual                     shared   shared  private  private                   Anon      Shmem     File      Shared   Private
    size      RSS      PSS    clean    dirty    clean    dirty     swap  swapPSS HugePages PmdMapped PmdMapped Hugetlb  Hugetlb    Locked    # object
-------- -------- -------- -------- -------- -------- -------- -------- -------- --------- --------- --------- -------- -------- -------- ---- ------------------------------
     292       96       19       88        0        8        0        8        0         0         0         0        0        0        0    1 /apex/com.android.adbd/lib64/libadbconnection_client.so
     492      184        8      184        0        0        0        0        0         0         0         0        0        0        0    1 /apex/com.android.adservices/javalib/framework-adservices.jar
    1172      208       97      144        0       64        0        0        0         0         0         0        0        0        0    1 /apex/com.android.art/javalib/apache-xml.jar
      72       60       32        0       56        0        4       12        0         0         0         0        0        0        0    1 /memfd:gralloc_shared_memory (deleted)
   65536        0        0        0        0        0        0       12        0         0         0         0        0        0        0    1 /memfd:jit-zygote-cache (deleted)
       8        0        0        0        0        0        0        0        0         0         0         0        0        0        0    1 /product/overlay/GmsConfigOverlayCommon.apk
      24       20        0       20        0        0        0        4        0         0         0         0        0        0        0    1 /system/bin/app_process64
    2716      988      777      384        0      604        0        0        0         0         0         0        0        0        0    1 /system/fonts/NotoColorEmoji.ttf
    
[ä¸­é—´ç•¥å»å¤§éƒ¨åˆ†]

      36       36       36        0        0       36        0        0        0         0         0         0        0        0        0    1 /system/fonts/NotoSansSymbols-Regular-Subsetted2.ttf
      48       32        2       32        0        0        0        4        0         0         0         0        0        0        0    1 /system/framework/arm64/boot-mediatek-ims-base.oat
       4        4        0        4        0        0        0        0        0         0         0         0        0        0        0    1 /system/framework/boot-vivo-vgcclient.vdex
     700      264       19      260        0        4        0        4        0         0         0         0        0        0        0    1 /vendor/lib64/egl/libMEOW_gift.so

-------- -------- -------- -------- -------- -------- -------- -------- -------- --------- --------- --------- -------- -------- -------- ---- ------------------------------
 virtual                     shared   shared  private  private                   Anon      Shmem     File      Shared   Private
    size      RSS      PSS    clean    dirty    clean    dirty     swap  swapPSS HugePages PmdMapped PmdMapped Hugetlb  Hugetlb    Locked    # object
-------- -------- -------- -------- -------- -------- -------- -------- -------- --------- --------- --------- -------- -------- -------- ---- ------------------------------
28342616   296680   131754   143316    34224    63604    55536    30336    14411         0         0         0        0        0        0  869 TOTAL
</code></pre>
<h2 data-id="heading-8">getprop dalvik.vm.heapgrowthlimit å’Œ dalvik.vm.heapsizeï¼šè®¾å¤‡åˆ†é…ç»™åº”ç”¨çš„å†…å­˜ä¸Šé™</h2>
<p>åœ¨ä¸åŒç¡¬ä»¶çš„è®¾å¤‡ä¸Šï¼Œåº”ç”¨èƒ½å¤Ÿä½¿ç”¨çš„æœ€å¤§å†…å­˜å€¼ä¸ä¸€æ ·ï¼Œè¿™ä¸€èˆ¬æ˜¯ç”± ROM å‚å•†å†³å®šã€‚é€šå¸¸æ¥è¯´ï¼Œç¡¬ä»¶è¶Šå¥½ï¼Œåº”ç”¨å†…å­˜ä¸Šé™ä¹Ÿè¶Šé«˜ã€‚å¯ä»¥é€šè¿‡ adb å‘½ä»¤æŸ¥çœ‹è®¾å¤‡çš„åˆ†é…ç»™åº”ç”¨çš„å†…å­˜ä¸Šé™ã€‚è¿™ä¸¤ä¸ªå€¼æ˜¯å†™æ­»åœ¨ <code>/system/build.prop</code> æ–‡ä»¶å½“ä¸­çš„ã€‚</p>
<p>åœ¨æ§åˆ¶å°è·å–è¿™ä¸¤ä¸ªå€¼ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">Î» adb  shell getprop dalvik.vm.heapgrowthlimit
256m
Î» adb  shell getprop dalvik.vm.heapsize
512m
</code></pre>
<p>åœ¨åº”ç”¨ä»£ç ï¼Œå¯ä»¥ä½¿ç”¨ <code>ActivityManager</code> æä¾›çš„é™æ€å‡½æ•°è·å–è¿™ä¸¤ä¸ªå€¼ï¼Œå…¶å®ç°æœ¬è´¨ä¸Šä¹Ÿæ˜¯è®¿é—®ä¸Šè¿°ç³»ç»Ÿå‚æ•°ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ActivityManager.java</span>
<span class="hljs-comment">// è·å– heapgrowthlimit</span>
<span class="hljs-keyword">static</span> <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">staticGetMemoryClass</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// Really brain dead right now -- just take this from the configured</span>
        <span class="hljs-comment">// vm heap size, and assume it is in megabytes and thus ends with "m".</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">vmHeapSize</span> <span class="hljs-operator">=</span> SystemProperties.get(<span class="hljs-string">"dalvik.vm.heapgrowthlimit"</span>, <span class="hljs-string">""</span>);
        <span class="hljs-keyword">if</span> (vmHeapSize != <span class="hljs-literal">null</span> &amp;&amp; !<span class="hljs-string">""</span>.equals(vmHeapSize)) {
            <span class="hljs-keyword">return</span> Integer.parseInt(vmHeapSize.substring(<span class="hljs-number">0</span>, vmHeapSize.length()-<span class="hljs-number">1</span>));
        }
        <span class="hljs-keyword">return</span> staticGetLargeMemoryClass();
}

<span class="hljs-comment">// è·å– heapsize</span>
<span class="hljs-keyword">static</span> <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">staticGetLargeMemoryClass</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// Really brain dead right now -- just take this from the configured</span>
        <span class="hljs-comment">// vm heap size, and assume it is in megabytes and thus ends with "m".</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">vmHeapSize</span> <span class="hljs-operator">=</span> SystemProperties.get(<span class="hljs-string">"dalvik.vm.heapsize"</span>, <span class="hljs-string">"16m"</span>);
        <span class="hljs-keyword">return</span> Integer.parseInt(vmHeapSize.substring(<span class="hljs-number">0</span>, vmHeapSize.length() - <span class="hljs-number">1</span>));
}
</code></pre>
<p>å¦‚ä½•ç†è§£è¿™ä¸¤ä¸ªå€¼çš„å«ä¹‰ï¼Ÿ</p>
<ul>
<li><code>heapgrowthlimit</code>ï¼šåº”ç”¨é»˜è®¤å…è®¸ä½¿ç”¨çš„ dalvik/arm è™šæ‹Ÿæœºå†…å­˜ä¸Šé™ã€‚</li>
<li><code>heapsize</code>ï¼šåœ¨å£°æ˜ <code>largeHeap="true"</code> åï¼Œåº”ç”¨å¯ä»¥æ‰©å±•åˆ°çš„å†…å­˜ä¸Šé™ã€‚</li>
</ul>
<p>å·²å‰æ–‡æˆ‘ä½¿ç”¨çš„æ‰‹æœºä¸ºä¾‹ï¼Œå…¶ <code>heapgrowthlimit</code>/<code>heapsize</code> æ˜¯ <code>256m</code>/<code>512m</code>ï¼Œè¿™æ„å‘³ç€ï¼Œåº”ç”¨åœ¨è¿è¡Œæ—¶ï¼Œæœ€å¤šå¯ä»¥ç”³è¯· 256m çš„å†…å­˜ï¼Œå½“å®æ—¶å†…å­˜æ¥è¿‘ï¼ˆæœªè¶…è¿‡ï¼‰è¿™ä¸ªå€¼ï¼ŒJVM ä¼šé¢‘ç¹è§¦å‘ GC ä»¥å›æ”¶å†…å­˜ï¼Œä¼´éšç€å¤§é‡çš„ STWã€‚è€Œä¸€æ—¦å†…å­˜ä½¿ç”¨è¶…è¿‡è¿™ä¸ªå€¼ï¼Œåˆ™ä¼šå‘ç”Ÿ OOM å´©æºƒã€‚</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">application</span>
    <span class="hljs-attr">android:largeHeap</span>=<span class="hljs-string">"false"</span>/&gt;</span>
</code></pre>
<p>é‚£å¯èƒ½å°±ä¼šæœ‰èªæ˜çš„åŒå­¦æé—®ï¼Œæ˜¯å¦å¯ä»¥åœ¨ <code>AndroidManifext.xml</code> é‡Œå¼€å¯ <code>largeHeap</code> ç»­ä¸€æ³¢å‘½ï¼Ÿé€šå¸¸æ¥è¯´è¿™å¹¶ä¸æ˜¯ä¸€ä¸ªå¥½çš„é€‰æ‹©ï¼Œç«™åœ¨ç³»ç»Ÿçš„è§’åº¦ï¼Œ<code>largeHeap</code> æ˜¯ç”¨æ¥æä¾›ç»™æŸäº›éœ€è¦å¤§å†…å­˜çš„åº”ç”¨æ˜¾å¼å£°æ˜ï¼Œä¾‹å¦‚ç›¸å†Œã€ç›¸æœºã€ç¼–è¾‘å™¨ã€çŸ­è§†é¢‘ç­‰ã€‚å¦‚æœä½ çš„åº”ç”¨ä¸å±äºæ­¤ç±»ï¼Œè¿˜æ˜¯å»ºè®®ä»ä»£ç ä¸Šå¯»æ‰¾åŸå› ï¼Œåšå¥½å†…å­˜çš„ç®¡æ§ã€‚</p>
<h2 data-id="heading-9">å‚è€ƒèµ„æ–™</h2>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fperfetto.dev%2Fdocs%2Fgetting-started%2Fmemory-profiling" target="_blank" title="https://perfetto.dev/docs/getting-started/memory-profiling" ref="nofollow noopener noreferrer">perfetto.dev/docs/gettinâ€¦</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fperfetto.dev%2Fdocs%2Fcase-studies%2Fmemory" target="_blank" title="https://perfetto.dev/docs/case-studies/memory" ref="nofollow noopener noreferrer">perfetto.dev/docs/case-sâ€¦</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fperfetto.dev%2Fdocs%2Fdata-sources%2Fnative-heap-profiler" target="_blank" title="https://perfetto.dev/docs/data-sources/native-heap-profiler" ref="nofollow noopener noreferrer">perfetto.dev/docs/data-sâ€¦</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fperfetto.dev%2Fdocs%2Fdata-sources%2Fjava-heap-profiler" target="_blank" title="https://perfetto.dev/docs/data-sources/java-heap-profiler" ref="nofollow noopener noreferrer">perfetto.dev/docs/data-sâ€¦</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2Fhexingen%2Farticle%2Fdetails%2F131934734" target="_blank" title="https://blog.csdn.net/hexingen/article/details/131934734" ref="nofollow noopener noreferrer">blog.csdn.net/hexingen/arâ€¦</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fcs4118.github.io%2Fwww%2F2023-1%2Flect%2F21-linux-mm.html" target="_blank" title="https://cs4118.github.io/www/2023-1/lect/21-linux-mm.html" ref="nofollow noopener noreferrer">cs4118.github.io/www/2023-1/â€¦</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Coze Studio äºŒæ¬¡å¼€å‘ï¼ˆä¸€ï¼‰æ”¯æŒ MCP Server é™æ€é…ç½®]]></title>    <link>https://juejin.cn/post/7582808491607261238</link>    <guid>https://juejin.cn/post/7582808491607261238</guid>    <pubDate>2025-12-12T14:17:55.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582808491607261238" data-draft-id="7582785032852275263" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Coze Studio äºŒæ¬¡å¼€å‘ï¼ˆä¸€ï¼‰æ”¯æŒ MCP Server é™æ€é…ç½®"/> <meta itemprop="keywords" content="Coze"/> <meta itemprop="datePublished" content="2025-12-12T14:17:55.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="DevYK"/> <meta itemprop="url" content="https://juejin.cn/user/3368559355637566"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Coze Studio äºŒæ¬¡å¼€å‘ï¼ˆä¸€ï¼‰æ”¯æŒ MCP Server é™æ€é…ç½®
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3368559355637566/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    DevYK
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-12T14:17:55.000Z" title="Fri Dec 12 2025 14:17:55 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»13åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">èƒŒæ™¯</h2>
<p><code>Coze Studio</code> æ˜¯ä¸€ä¸ªå¼€æºçš„ AI ä½ä»£ç å·¥ä½œæµå¼€å‘å¹³å°ï¼Œå®ƒæä¾›äº†å®Œæ•´çš„æ’ä»¶ç³»ç»Ÿæ¥æ‰©å±• AI æ¨¡å‹çš„èƒ½åŠ›ã€‚è¯¥æ’ä»¶ç³»ç»Ÿå…è®¸å¼€å‘è€…é€šè¿‡æ ‡å‡†åŒ–çš„æ–¹å¼é›†æˆå¤–éƒ¨æœåŠ¡ï¼Œä½¿ AI æ¨¡å‹èƒ½å¤Ÿè°ƒç”¨å„ç§å·¥å…·å’ŒæœåŠ¡ã€‚</p>
<p>ä»ä¹‹å‰çš„æºç åˆ†æ<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2Fq-nSAEaXOMuVHgOxKGrhpA" target="_blank" title="https://mp.weixin.qq.com/s/q-nSAEaXOMuVHgOxKGrhpA" ref="nofollow noopener noreferrer"><code>Coze Studio</code>æºç åˆ†æ(äºŒ)åç«¯æ’ä»¶æ¶æ„æ·±åº¦å‰–æä¸äºŒæ¬¡å¼€å‘å®æˆ˜å‡†å¤‡</a>ä¸­å¾—çŸ¥ï¼Œ<code>Coze Studio</code> ç›®å‰ä»…æ”¯æŒ HTTP å’Œè‡ªå®šä¹‰æ’ä»¶ã€‚å¦‚æœæƒ³è¦æ”¯æŒ MCP Server é…ç½®ï¼Œå°±æ— æ³•ç»§ç»­ã€‚å› æ­¤ï¼Œæˆ‘èŒç”Ÿäº†åŸºäº <code>Coze Studio</code> å¼€å‘æ”¯æŒ MCP Server é…ç½®çš„åŠŸèƒ½çš„æƒ³æ³•ï¼Œä»¥ä½¿ <code>Coze Studio</code> æ›´åŠ å®Œå–„ã€‚</p>
<h3 data-id="heading-1">ä¸ºä»€ä¹ˆé€‰æ‹©  <code>Coze Studio</code>ï¼Ÿ</h3>
<p>åœ¨ AI ä½ä»£ç å¼€å‘é¢†åŸŸï¼Œç›®å‰è°ƒç ”äº† Dify ã€n8n ã€<code>Coze Studio</code> ç­‰å…·æœ‰ä»£è¡¨æ€§çš„æˆç†Ÿè§£å†³æ–¹æ¡ˆã€‚é€‰æ‹© <code>Coze Studio</code> ä¸»è¦çš„åŸå› æ˜¯å†…éƒ¨åŸºäº Go è¯­è¨€å¼€å‘ï¼Œå¯¹æˆ‘ä¸ªäººæ¥è¯´å¯æ˜¯å¤©ç„¶çš„å‹å¥½å•Šï¼Œæˆ‘ä¸ç”¨å†å»å­¦ä¹ å…¶å®ƒè¯­è¨€ï¼Œå½“ç„¶è¿˜æœ‰ä»¥ä¸‹å‡ ä¸ªå› ç´ è€ƒè™‘ï¼š</p>
<ol>
<li>
<p><strong>è¯­è¨€åå¥½</strong>ï¼šGo è¯­è¨€çš„ç®€æ´æ€§ã€å¹¶å‘æ¨¡å‹å’Œç¼–è¯‘å‹ç‰¹æ€§ï¼Œä½¿å¾—ç³»ç»Ÿå…·å¤‡æ›´å¥½çš„æ€§èƒ½å’Œå¯ç»´æŠ¤æ€§</p>
</li>
<li>
<p><strong>æ¶æ„æ¸…æ™°</strong>ï¼š<code>Coze Studio</code> é‡‡ç”¨ DDDï¼ˆé¢†åŸŸé©±åŠ¨è®¾è®¡ï¼‰æ¶æ„ï¼Œä»£ç ç»“æ„æ¸…æ™°ï¼Œæ˜“äºæ‰©å±•</p>
</li>
<li>
<p><strong>å¼€æºå¯æ§</strong>ï¼šå®Œå…¨å¼€æºï¼Œå¯ä»¥æ ¹æ®ä¸šåŠ¡éœ€æ±‚è¿›è¡Œæ·±åº¦å®šåˆ¶</p>
</li>
<li>
<p><strong>æ’ä»¶ç³»ç»Ÿå®Œå–„</strong>ï¼šå·²æœ‰çš„æ’ä»¶æ¶æ„ä¸ºæ‰©å±•æ–°åè®®æä¾›äº†è‰¯å¥½çš„åŸºç¡€</p>
</li>
<li>
<p><strong>Dify/n8n</strong>: éƒ½æ˜¯ TypeScript å¼€å‘è¯­è¨€ä¸ºä¸»ï¼Œä¸ç¬¦åˆæˆ‘å½“å‰æŠ€æœ¯é€‰å‹</p>
</li>
</ol>
<h2 data-id="heading-2">æ’ä»¶åŠ è½½æ‰§è¡Œæµç¨‹ï¼ˆç®€è¦å›é¡¾ï¼‰</h2>
<p>åœ¨æ·±å…¥ MCP æ”¯æŒå®ç°ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆç®€è¦å›é¡¾ä¸€ä¸‹ <code>Coze Studio</code> çš„æ’ä»¶åŠ è½½æµç¨‹ã€‚</p>
<h3 data-id="heading-3">åˆå§‹åŒ–æµç¨‹</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant Main
    participant AppInit
    participant PluginInit
    participant ConfInit
    participant LoadMeta
    
    Main-&gt;&gt;AppInit: Init()
    AppInit-&gt;&gt;PluginInit: InitService()
    PluginInit-&gt;&gt;ConfInit: InitConfig()
    ConfInit-&gt;&gt;LoadMeta: loadPluginProductMeta()
    LoadMeta-&gt;&gt;LoadMeta: è¯»å– plugin_meta.yaml
    LoadMeta-&gt;&gt;LoadMeta: è§£ææ’ä»¶å…ƒæ•°æ®
    LoadMeta-&gt;&gt;LoadMeta: åŠ è½½ OpenAPI å·¥å…·
    LoadMeta-&gt;&gt;LoadMeta: æ³¨å†Œåˆ°å†…å­˜ç¼“å­˜
    LoadMeta--&gt;&gt;ConfInit: æ’ä»¶äº§å“ä¿¡æ¯
    ConfInit--&gt;&gt;PluginInit: åˆå§‹åŒ–å®Œæˆ
    PluginInit--&gt;&gt;AppInit: æœåŠ¡å°±ç»ª
</code></pre>
<p><strong>æ ¸å¿ƒä»£ç è·¯å¾„</strong>ï¼š</p>
<ol>
<li><strong>åº”ç”¨åˆå§‹åŒ–</strong>ï¼š<code>backend/application/application.go::Init()</code></li>
<li><strong>æ’ä»¶æœåŠ¡åˆå§‹åŒ–</strong>ï¼š<code>backend/application/plugin/init.go::InitService()</code></li>
<li><strong>é…ç½®åˆå§‹åŒ–</strong>ï¼š<code>backend/domain/plugin/conf/config.go::InitConfig()</code></li>
<li><strong>å…ƒæ•°æ®åŠ è½½</strong>ï¼š<code>backend/domain/plugin/conf/load_plugin.go::loadPluginProductMeta()</code></li>
</ol>
<h3 data-id="heading-4">æ’ä»¶å…ƒæ•°æ®åŠ è½½æµç¨‹</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart TD
    A[è¯»å– plugin_meta.yaml] --&gt; B[è§£æ YAML å…ƒæ•°æ®]
    B --&gt; D[åŠ è½½ OpenAPI æ–‡æ¡£]
    D --&gt; E[è§£æ API è·¯å¾„å’Œæ–¹æ³•]
    E --&gt; F[åŒ¹é…å·¥å…·ä¸ API]
    F --&gt; G[åˆ›å»º ToolInfo]
    G --&gt; H[æ³¨å†Œåˆ°å†…å­˜ç¼“å­˜]
    H --&gt; I[ä¸‹ä¸€ä¸ªæ’ä»¶]
</code></pre>
<p><strong>å…³é”®ä»£ç </strong>ï¼š<code>backend/domain/plugin/conf/load_plugin.go</code></p>
<p>å‡½æ•°æ ¸å¿ƒæµç¨‹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">loadPluginProductMeta</span><span class="hljs-params">(ctx context.Context, basePath <span class="hljs-type">string</span>)</span></span> (err <span class="hljs-type">error</span>) {
    <span class="hljs-comment">// 1. è¯»å–å¹¶è§£æ plugin_meta.yaml</span>
    file, err := os.ReadFile(metaFile)
    <span class="hljs-keyword">var</span> pluginsMeta []*pluginProductMeta
    yaml.Unmarshal(file, &amp;pluginsMeta)
    
    <span class="hljs-comment">// 2. åˆå§‹åŒ–å†…å­˜ç¼“å­˜</span>
    pluginProducts = <span class="hljs-built_in">make</span>(<span class="hljs-keyword">map</span>[<span class="hljs-type">int64</span>]*PluginInfo, <span class="hljs-built_in">len</span>(pluginsMeta))
    toolProducts = <span class="hljs-keyword">map</span>[<span class="hljs-type">int64</span>]*ToolInfo{}
    
    <span class="hljs-comment">// 3. éå†æ¯ä¸ªæ’ä»¶å…ƒæ•°æ®</span>
    <span class="hljs-keyword">for</span> _, m := <span class="hljs-keyword">range</span> pluginsMeta {
        <span class="hljs-comment">// 3.1 æ£€æŸ¥å…ƒæ•°æ®æœ‰æ•ˆæ€§å¹¶éªŒè¯ Manifest</span>
        <span class="hljs-keyword">if</span> !checkPluginMetaInfo(ctx, m) { <span class="hljs-keyword">continue</span> }
        m.Manifest.Validate(<span class="hljs-literal">true</span>)
        
        <span class="hljs-comment">// 3.2 åŠ è½½ OpenAPI æ–‡æ¡£ï¼ˆåŸå§‹é€»è¾‘ï¼‰</span>
        docPath := path.Join(root, m.OpenapiDocFile)
        _doc, _ := loader.LoadFromFile(docPath)
        doc := ptr.Of(model.Openapi3T(*_doc))
        
        <span class="hljs-comment">// 3.3 è§£æ OpenAPI æ–‡æ¡£ä¸­çš„æ‰€æœ‰ API</span>
        apis := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">map</span>[dto.UniqueToolAPI]*model.Openapi3Operation)
        <span class="hljs-keyword">for</span> subURL, pathItem := <span class="hljs-keyword">range</span> doc.Paths {
            <span class="hljs-keyword">for</span> method, op := <span class="hljs-keyword">range</span> pathItem.Operations() {
                api := dto.UniqueToolAPI{SubURL: subURL, Method: method}
                apis[api] = model.NewOpenapi3Operation(op)
            }
        }
        
        <span class="hljs-comment">// 3.4 åŒ¹é…å·¥å…·ä¸ APIï¼Œåˆ›å»º ToolInfo</span>
        <span class="hljs-keyword">for</span> _, t := <span class="hljs-keyword">range</span> m.Tools {
            api := dto.UniqueToolAPI{SubURL: t.SubURL, Method: t.Method}
            op, ok := apis[api]
            <span class="hljs-keyword">if</span> ok {
                toolProducts[t.ToolID] = &amp;ToolInfo{Info: &amp;entity.ToolInfo{...}}
            }
        }
        
        <span class="hljs-comment">// 3.5 æ³¨å†Œåˆ°å†…å­˜ç¼“å­˜</span>
        pluginProducts[m.PluginID] = pi
    }
}
</code></pre>
<p>ä»ä»£ç æµç¨‹å¯ä»¥çœ‹å‡ºï¼Œå½“å‰çš„å®ç°å‡è®¾æ‰€æœ‰æ’ä»¶éƒ½æ˜¯ OpenAPI ç±»å‹ï¼Œé€šè¿‡è¯»å– YAML é…ç½®æ–‡ä»¶å’Œ OpenAPI æ–‡æ¡£æ¥åŠ è½½å·¥å…·ã€‚è¦æ”¯æŒ MCP æ’ä»¶ï¼Œæœ€ç›´æ¥çš„åšæ³•æ˜¯åœ¨æ’ä»¶å…ƒæ•°æ®ä¸­å¢åŠ ç±»å‹æ ‡è¯†ï¼Œæ ¹æ®ç±»å‹èµ°ä¸åŒçš„åŠ è½½è·¯å¾„ã€‚</p>
<p>è¿™ä¸ªæ€è·¯æ˜¯å¯è¡Œçš„ã€‚MCP æ’ä»¶å’Œ OpenAPI æ’ä»¶çš„ä¸»è¦åŒºåˆ«åœ¨äºï¼šOpenAPI æ’ä»¶çš„å·¥å…·å®šä¹‰åœ¨é…ç½®æ–‡ä»¶ä¸­ï¼Œè€Œ MCP æ’ä»¶çš„å·¥å…·éœ€è¦ä» MCP æœåŠ¡å™¨åŠ¨æ€è·å–ã€‚æˆ‘ä»¬å¯ä»¥åœ¨ <code>loadPluginProductMeta</code> å‡½æ•°ä¸­å¢åŠ ç±»å‹åˆ¤æ–­ï¼Œå¯¹ MCP æ’ä»¶èµ°å¦ä¸€å¥—åŠ è½½é€»è¾‘ã€‚</p>
<h2 data-id="heading-5">å®ç°è¦ç‚¹</h2>
<h3 data-id="heading-6">æ’ä»¶ç±»å‹è¯†åˆ«</h3>
<p>é¦–å…ˆéœ€è¦åœ¨éå†æ’ä»¶æ—¶åˆ¤æ–­ç±»å‹ã€‚æŸ¥çœ‹ <code>pluginProductMeta</code> ç»“æ„ï¼Œå‘ç° <code>Manifest.API.Type</code> å­—æ®µå·²ç»å¯ä»¥ç”¨æ¥åŒºåˆ†æ’ä»¶ç±»å‹ã€‚åœ¨éªŒè¯å®Œ Manifest ä¹‹åï¼Œæ·»åŠ ç±»å‹åˆ¤æ–­ï¼š</p>
<pre><code class="hljs language-go" lang="go">isMCPPlugin := m.Manifest.API.Type == consts.PluginTypeOfMCP
</code></pre>
<p>è¿™æ ·å°±èƒ½åœ¨åç»­å¤„ç†ä¸­åŒºåˆ†ä¸¤ç§æ’ä»¶ç±»å‹ã€‚</p>
<h3 data-id="heading-7">MCP é…ç½®æå–</h3>
<p>MCP æ’ä»¶çš„é…ç½®ä¿¡æ¯å­˜æ”¾åœ¨ <code>manifest.API.Extensions["mcp_config"]</code> ä¸­ï¼Œéœ€è¦å°†å…¶è§£æä¸º <code>mcp.Config</code> ç»“æ„ã€‚è¿™é‡Œå°è£…ä¸€ä¸ªè§£æå‡½æ•°ï¼š</p>
<pre><code class="hljs language-go" lang="go">mcpConfig, err := parseMCPConfigFromManifest(m.Manifest)
<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
    logs.CtxErrorf(ctx, <span class="hljs-string">"[MCP] Failed to parse MCP config: %v"</span>, err)
    <span class="hljs-keyword">continue</span>
}
</code></pre>
<p><code>parseMCPConfigFromManifest</code> å‡½æ•°è´Ÿè´£ä» Manifest çš„ Extensions å­—æ®µä¸­æå–é…ç½®ï¼Œå¹¶è¿›è¡Œ JSON åºåˆ—åŒ–/ååºåˆ—åŒ–è½¬æ¢ã€‚è¿™æ ·è®¾è®¡çš„å¥½å¤„æ˜¯é…ç½®ä¿¡æ¯ä»ç„¶ä¿ç•™åœ¨ Manifest ä¸­ï¼Œä¸éœ€è¦ä¿®æ”¹ç°æœ‰çš„å…ƒæ•°æ®ç»“æ„ã€‚</p>
<h3 data-id="heading-8">OpenAPI æ–‡æ¡£å…¼å®¹å¤„ç†</h3>
<p>è™½ç„¶ MCP æ’ä»¶ä¸éœ€è¦çœŸå®çš„ OpenAPI æ–‡æ¡£ï¼Œä½†ç³»ç»Ÿå…¶ä»–éƒ¨åˆ†å¯èƒ½ä¾èµ– <code>PluginInfo.OpenapiDoc</code> å­—æ®µã€‚ä¸ºäº†ä¿æŒå…¼å®¹æ€§ï¼Œéœ€è¦ä¸º MCP æ’ä»¶åˆ›å»ºä¸€ä¸ªæœ€å°åŒ–çš„ OpenAPI æ–‡æ¡£ï¼š</p>
<pre><code class="hljs language-go" lang="go">doc := createMinimalOpenAPIDocForMCP(m.Manifest)
</code></pre>
<p>è¿™ä¸ªæœ€å°åŒ–æ–‡æ¡£åªéœ€è¦åŒ…å«åŸºæœ¬ä¿¡æ¯ï¼ˆtitleã€descriptionã€versionï¼‰å’Œä¸€ä¸ªå ä½çš„ server URLï¼Œä¸éœ€è¦å®šä¹‰å®é™…çš„è·¯å¾„å’Œæ“ä½œã€‚</p>
<h3 data-id="heading-9">å·¥å…·åŠ¨æ€åŠ è½½</h3>
<p>MCP æ’ä»¶çš„å·¥å…·ä¸æ˜¯ä»é…ç½®æ–‡ä»¶è¯»å–ï¼Œè€Œæ˜¯é€šè¿‡è¿æ¥ MCP æœåŠ¡å™¨åŠ¨æ€è·å–ã€‚è¿™é‡Œå¼•å…¥ä¸€ä¸ª <code>mcpToolLoader</code> æ¥å°è£…åŠ è½½é€»è¾‘ï¼š</p>
<pre><code class="hljs language-go" lang="go">loader := &amp;mcpToolLoader{}
mcpTools, err := loader.LoadMCPTools(ctx, m.PluginID, m.Version, mcpConfig)
<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
    logs.CtxErrorf(ctx, <span class="hljs-string">"[MCP] Failed to load tools: %v"</span>, err)
    <span class="hljs-built_in">delete</span>(pluginProducts, m.PluginID)
    <span class="hljs-keyword">continue</span>
}

<span class="hljs-keyword">for</span> _, toolInfo := <span class="hljs-keyword">range</span> mcpTools {
    pi.ToolIDs = <span class="hljs-built_in">append</span>(pi.ToolIDs, toolInfo.Info.ID)
    toolProducts[toolInfo.Info.ID] = toolInfo
}
</code></pre>
<p><code>LoadMCPTools</code> æ–¹æ³•å†…éƒ¨ä¼šåˆ›å»º MCP å®¢æˆ·ç«¯ã€åˆå§‹åŒ–è¿æ¥ã€è°ƒç”¨ <code>ListTools</code> è·å–å·¥å…·åˆ—è¡¨ï¼Œç„¶åå°† MCP Tool è½¬æ¢ä¸ºç³»ç»Ÿå†…éƒ¨çš„ <code>ToolInfo</code> æ ¼å¼ã€‚è½¬æ¢è¿‡ç¨‹éœ€è¦å¤„ç† JSON Schema åˆ° OpenAPI Operation çš„æ˜ å°„ï¼Œè¿™éƒ¨åˆ†é€»è¾‘ç›¸å¯¹å¤æ‚ï¼Œåé¢ä¼šè¯¦ç»†è¯´æ˜ã€‚</p>
<h3 data-id="heading-10">ä»£ç åˆ†æ”¯é‡æ„</h3>
<p>æœ€åï¼Œå°†åŸæ¥çš„å•ä¸€å¤„ç†é€»è¾‘æ”¹ä¸ºæ¡ä»¶åˆ†æ”¯ï¼š</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">if</span> isMCPPlugin {
    <span class="hljs-comment">// MCP æ’ä»¶å¤„ç†é€»è¾‘</span>
    <span class="hljs-comment">// ... ä¸Šè¿° MCP ç›¸å…³ä»£ç </span>
} <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// ä¿ç•™åŸæœ‰çš„ OpenAPI æ’ä»¶å¤„ç†é€»è¾‘</span>
    <span class="hljs-comment">// ... åŸæœ‰çš„ OpenAPI åŠ è½½ä»£ç </span>
}
</code></pre>
<p>è¿™æ ·æ—¢ä¸å½±å“ç°æœ‰åŠŸèƒ½ï¼Œåˆèƒ½æ”¯æŒæ–°çš„æ’ä»¶ç±»å‹ã€‚æ•´ä¸ªä¿®æ”¹çš„æ ¸å¿ƒæ€è·¯æ˜¯ï¼šåœ¨ä¿æŒåŸæœ‰æ¶æ„ä¸å˜çš„å‰æä¸‹ï¼Œé€šè¿‡ç±»å‹åˆ¤æ–­å’Œåˆ†æ”¯å¤„ç†ï¼Œä¸º MCP æ’ä»¶æä¾›ç‹¬ç«‹çš„åŠ è½½è·¯å¾„ã€‚</p>
<h2 data-id="heading-11">æŠ€æœ¯æ–¹æ¡ˆï¼ˆé™æ€åŠ è½½ MCP Serverï¼‰</h2>
<p>åŸºäºå¯¹æ’ä»¶åŠ è½½æµç¨‹çš„ç†è§£ï¼Œæˆ‘ä»¬è®¾è®¡äº†ä»¥ä¸‹æŠ€æœ¯æ–¹æ¡ˆæ¥æ”¯æŒ MCP é™æ€é…ç½®ï¼š</p>
<ol>
<li><strong>å°è£… MCP æ ¸å¿ƒå®¢æˆ·ç«¯</strong>ï¼šåœ¨ <code>backend/pkg/mcp/client.go</code> ä¸­å°è£… MCP åè®®é€šä¿¡</li>
<li><strong>é›†æˆåˆ°æ’ä»¶åŠ è½½æµç¨‹</strong>ï¼šåœ¨ <code>load_plugin.go</code> ä¸­è¯†åˆ« MCP æ’ä»¶å¹¶åŠ è½½å·¥å…·</li>
<li><strong>å®ç° MCP å·¥å…·æ‰§è¡Œå™¨</strong>ï¼šåœ¨ <code>invocation_mcp.go</code> ä¸­å®ç°å·¥å…·è°ƒç”¨é€»è¾‘</li>
</ol>
<h3 data-id="heading-12">1. å°è£… MCP æ ¸å¿ƒå®¢æˆ·ç«¯</h3>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦å°è£…ä¸€ä¸ª MCP å®¢æˆ·ç«¯æ¥ä¸ MCP æœåŠ¡å™¨é€šä¿¡ã€‚MCP åè®®æ”¯æŒä¸¤ç§ä¼ è¾“æ–¹å¼ï¼š</p>
<ul>
<li><strong>stdio</strong>ï¼šæ ‡å‡†è¾“å…¥è¾“å‡ºï¼Œé€‚ç”¨äºæœ¬åœ°è¿›ç¨‹é€šä¿¡</li>
<li><strong>SSE</strong>ï¼šServer-Sent Eventsï¼Œé€‚ç”¨äº HTTP é•¿è¿æ¥</li>
</ul>
<h4 data-id="heading-13">1.1 é…ç½®ç»“æ„å®šä¹‰</h4>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// backend/pkg/mcp/client.go</span>

<span class="hljs-comment">// TransportType å®šä¹‰ä¼ è¾“ç±»å‹</span>
<span class="hljs-keyword">type</span> TransportType <span class="hljs-type">string</span>

<span class="hljs-keyword">const</span> (
    TransportTypeStdio TransportType = <span class="hljs-string">"stdio"</span>
    TransportTypeSSE   TransportType = <span class="hljs-string">"sse"</span>
)

<span class="hljs-comment">// Config MCP å®¢æˆ·ç«¯é…ç½®</span>
<span class="hljs-keyword">type</span> Config <span class="hljs-keyword">struct</span> {
    ServerName    <span class="hljs-type">string</span>        <span class="hljs-string">`json:"server_name"`</span>
    TransportType TransportType <span class="hljs-string">`json:"transport_type"`</span>
    StdioConfig   *StdioConfig  <span class="hljs-string">`json:"stdio_config,omitempty"`</span>
    SSEConfig     *SSEConfig    <span class="hljs-string">`json:"sse_config,omitempty"`</span>
}

<span class="hljs-comment">// StdioConfig stdio ä¼ è¾“é…ç½®</span>
<span class="hljs-keyword">type</span> StdioConfig <span class="hljs-keyword">struct</span> {
    Command    []<span class="hljs-type">string</span>          <span class="hljs-string">`json:"command"`</span>
    Env        <span class="hljs-keyword">map</span>[<span class="hljs-type">string</span>]<span class="hljs-type">string</span> <span class="hljs-string">`json:"env,omitempty"`</span>
    WorkingDir <span class="hljs-type">string</span>            <span class="hljs-string">`json:"working_dir,omitempty"`</span>
}

<span class="hljs-comment">// SSEConfig SSE ä¼ è¾“é…ç½®</span>
<span class="hljs-keyword">type</span> SSEConfig <span class="hljs-keyword">struct</span> {
    URL     <span class="hljs-type">string</span>            <span class="hljs-string">`json:"url"`</span>
    APIKey  <span class="hljs-type">string</span>            <span class="hljs-string">`json:"api_key,omitempty"`</span>
    Headers <span class="hljs-keyword">map</span>[<span class="hljs-type">string</span>]<span class="hljs-type">string</span> <span class="hljs-string">`json:"headers,omitempty"`</span>
}
</code></pre>
<h4 data-id="heading-14">1.2 å®¢æˆ·ç«¯å°è£…</h4>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// Client å°è£… MCP å®¢æˆ·ç«¯</span>
<span class="hljs-keyword">type</span> Client <span class="hljs-keyword">struct</span> {
    client    *client.Client
    transport transport.Interface
}

<span class="hljs-comment">// NewClient æ ¹æ®é…ç½®åˆ›å»º MCP å®¢æˆ·ç«¯</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">NewClient</span><span class="hljs-params">(config *Config)</span></span> (*Client, <span class="hljs-type">error</span>) {
    <span class="hljs-keyword">switch</span> config.TransportType {
    <span class="hljs-keyword">case</span> TransportTypeStdio:
        <span class="hljs-keyword">return</span> newStdioClient(config.StdioConfig)
    <span class="hljs-keyword">case</span> TransportTypeSSE:
        <span class="hljs-keyword">return</span> newSSEClient(config.SSEConfig)
    <span class="hljs-keyword">default</span>:
        <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>, fmt.Errorf(<span class="hljs-string">"unsupported transport type: %s"</span>, config.TransportType)
    }
}

<span class="hljs-comment">// Initialize åˆå§‹åŒ– MCP å®¢æˆ·ç«¯è¿æ¥</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(c *Client)</span></span> Initialize(ctx context.Context) <span class="hljs-type">error</span> {
    initRequest := mcp.InitializeRequest{}
    initRequest.Params.ProtocolVersion = mcp.LATEST_PROTOCOL_VERSION
    initRequest.Params.ClientInfo = mcp.Implementation{
        Name:    <span class="hljs-string">"coze-studio"</span>,
        Version: <span class="hljs-string">"1.0.0"</span>,
    }
    
    _, err := c.client.Initialize(ctx, initRequest)
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        <span class="hljs-keyword">return</span> fmt.Errorf(<span class="hljs-string">"initialize failed: %w"</span>, err)
    }
    
    <span class="hljs-comment">// éªŒè¯è¿æ¥ï¼šåˆ—å‡ºå¯ç”¨å·¥å…·</span>
    result, err := c.client.ListTools(ctx, mcp.ListToolsRequest{})
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        <span class="hljs-keyword">return</span> fmt.Errorf(<span class="hljs-string">"list tools failed: %w"</span>, err)
    }
    
    logs.Infof(<span class="hljs-string">"[MCP] Successfully initialized. Available tools (%d)"</span>, <span class="hljs-built_in">len</span>(result.Tools))
    <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>
}

<span class="hljs-comment">// CallTool è°ƒç”¨ MCP å·¥å…·</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(c *Client)</span></span> CallTool(ctx context.Context, name <span class="hljs-type">string</span>, arguments <span class="hljs-keyword">map</span>[<span class="hljs-type">string</span>]any) (<span class="hljs-type">string</span>, <span class="hljs-type">error</span>) {
    result, err := c.client.CallTool(ctx, mcp.CallToolRequest{
        Params: mcp.CallToolParams{
            Name:      name,
            Arguments: arguments,
        },
    })
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-string">""</span>, fmt.Errorf(<span class="hljs-string">"call tool failed: %w"</span>, err)
    }
    
    <span class="hljs-keyword">return</span> convertToolResultToString(result), <span class="hljs-literal">nil</span>
}

<span class="hljs-comment">// ListTools åˆ—å‡ºæ‰€æœ‰å¯ç”¨å·¥å…·</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(c *Client)</span></span> ListTools(ctx context.Context) ([]mcp.Tool, <span class="hljs-type">error</span>) {
    result, err := c.client.ListTools(ctx, mcp.ListToolsRequest{})
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>, err
    }
    <span class="hljs-keyword">return</span> result.Tools, <span class="hljs-literal">nil</span>
}
</code></pre>
<p><strong>å…³é”®è®¾è®¡ç‚¹</strong>ï¼š</p>
<ol>
<li><strong>ä¼ è¾“æŠ½è±¡</strong>ï¼šé€šè¿‡ <code>TransportType</code> æšä¸¾æ”¯æŒå¤šç§ä¼ è¾“æ–¹å¼</li>
<li><strong>é…ç½®åˆ†ç¦»</strong>ï¼šä¸åŒä¼ è¾“æ–¹å¼çš„é…ç½®ç‹¬ç«‹å®šä¹‰ï¼Œé¿å…è€¦åˆ</li>
<li><strong>è¿æ¥éªŒè¯</strong>ï¼šåˆå§‹åŒ–æ—¶é€šè¿‡ <code>ListTools</code> éªŒè¯è¿æ¥æœ‰æ•ˆæ€§</li>
<li><strong>ç»“æœè½¬æ¢</strong>ï¼šå°† MCP å·¥å…·ç»“æœç»Ÿä¸€è½¬æ¢ä¸ºå­—ç¬¦ä¸²æ ¼å¼</li>
</ol>
<h3 data-id="heading-15">2. åœ¨æ’ä»¶åŠ è½½æµç¨‹ä¸­é›†æˆ MCP</h3>
<p>åœ¨ <code>load_plugin.go</code> ä¸­ï¼Œæˆ‘ä»¬éœ€è¦è¯†åˆ« MCP æ’ä»¶ï¼Œè§£æé…ç½®ï¼Œè¿æ¥ MCP æœåŠ¡å™¨ï¼Œå¹¶å°†å·¥å…·æ·»åŠ åˆ°ç¼“å­˜ä¸­ã€‚</p>
<h4 data-id="heading-16">2.1 MCP æ’ä»¶è¯†åˆ«</h4>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// backend/domain/plugin/conf/load_plugin.go</span>

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">loadPluginProductMeta</span><span class="hljs-params">(ctx context.Context, basePath <span class="hljs-type">string</span>)</span></span> (err <span class="hljs-type">error</span>) {
    <span class="hljs-comment">// ... è¯»å–å’Œè§£æ YAML ...</span>
    
    <span class="hljs-keyword">for</span> _, m := <span class="hljs-keyword">range</span> pluginsMeta {
        <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦æ˜¯ MCP æ’ä»¶</span>
        isMCPPlugin := m.Manifest.API.Type == consts.PluginTypeOfMCP
        
        <span class="hljs-keyword">if</span> isMCPPlugin {
            <span class="hljs-comment">// MCP æ’ä»¶å¤„ç†</span>
            logs.CtxInfof(ctx, <span class="hljs-string">"[MCP] Loading MCP plugin: plugin_id=%d"</span>, m.PluginID)
            
            <span class="hljs-comment">// 1. è§£æ MCP é…ç½®</span>
            mcpConfig, err := parseMCPConfigFromManifest(m.Manifest)
            <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
                logs.CtxErrorf(ctx, <span class="hljs-string">"[MCP] Failed to parse MCP config: %v"</span>, err)
                <span class="hljs-keyword">continue</span>
            }
            
            <span class="hljs-comment">// 2. åˆ›å»ºæœ€å°åŒ– OpenAPI æ–‡æ¡£ï¼ˆMCP æ’ä»¶ä¸éœ€è¦çœŸå®çš„ OpenAPIï¼‰</span>
            doc := createMinimalOpenAPIDocForMCP(m.Manifest)
            
            <span class="hljs-comment">// 3. åˆ›å»º PluginInfo</span>
            pi := &amp;PluginInfo{
                Info: &amp;model.PluginInfo{
                    ID:         m.PluginID,
                    PluginType: m.PluginType,
                    Version:    ptr.Of(m.Version),
                    Manifest:   m.Manifest,
                    OpenapiDoc: doc,
                },
                ToolIDs: <span class="hljs-built_in">make</span>([]<span class="hljs-type">int64</span>, <span class="hljs-number">0</span>),
            }
            
            pluginProducts[m.PluginID] = pi
            
            <span class="hljs-comment">// 4. ä» MCP æœåŠ¡å™¨åŠ è½½å·¥å…·</span>
            loader := &amp;mcpToolLoader{}
            mcpTools, err := loader.LoadMCPTools(ctx, m.PluginID, m.Version, mcpConfig)
            <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
                logs.CtxErrorf(ctx, <span class="hljs-string">"[MCP] Failed to load tools: %v"</span>, err)
                <span class="hljs-built_in">delete</span>(pluginProducts, m.PluginID)
                <span class="hljs-keyword">continue</span>
            }
            
            <span class="hljs-comment">// 5. å°†å·¥å…·æ·»åŠ åˆ°ç¼“å­˜</span>
            <span class="hljs-keyword">for</span> _, toolInfo := <span class="hljs-keyword">range</span> mcpTools {
                pi.ToolIDs = <span class="hljs-built_in">append</span>(pi.ToolIDs, toolInfo.Info.ID)
                toolProducts[toolInfo.Info.ID] = toolInfo
            }
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-comment">// OpenAPI æ’ä»¶å¤„ç†ï¼ˆåŸæœ‰é€»è¾‘ï¼‰</span>
        }
    }
}
</code></pre>
<h4 data-id="heading-17">2.2 MCP é…ç½®è§£æ</h4>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// parseMCPConfigFromManifest ä» Manifest ä¸­è§£æ MCP é…ç½®</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">parseMCPConfigFromManifest</span><span class="hljs-params">(manifest *model.PluginManifest)</span></span> (*mcp.Config, <span class="hljs-type">error</span>) {
    <span class="hljs-keyword">if</span> manifest.API.Extensions == <span class="hljs-literal">nil</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>, fmt.Errorf(<span class="hljs-string">"manifest.api.extensions is nil"</span>)
    }
    
    mcpConfigData, ok := manifest.API.Extensions[<span class="hljs-string">"mcp_config"</span>]
    <span class="hljs-keyword">if</span> !ok {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>, fmt.Errorf(<span class="hljs-string">"mcp_config not found in manifest.api.extensions"</span>)
    }
    
    <span class="hljs-comment">// è½¬æ¢ä¸º JSON å¹¶è§£æ</span>
    configJSON, err := json.Marshal(mcpConfigData)
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>, fmt.Errorf(<span class="hljs-string">"marshal mcp_config failed: %w"</span>, err)
    }
    
    <span class="hljs-keyword">var</span> config mcp.Config
    <span class="hljs-keyword">if</span> err := json.Unmarshal(configJSON, &amp;config); err != <span class="hljs-literal">nil</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>, fmt.Errorf(<span class="hljs-string">"unmarshal mcp_config failed: %w"</span>, err)
    }
    
    <span class="hljs-keyword">return</span> &amp;config, <span class="hljs-literal">nil</span>
}
</code></pre>
<h4 data-id="heading-18">2.3 MCP å·¥å…·åŠ è½½å™¨</h4>
<p><code>mcp_tool_loader.go</code> è´Ÿè´£ä» MCP æœåŠ¡å™¨åŠ è½½å·¥å…·å¹¶è½¬æ¢ä¸º <code>ToolInfo</code>ï¼š</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// backend/domain/plugin/conf/mcp_tool_loader.go</span>

<span class="hljs-keyword">type</span> mcpToolLoader <span class="hljs-keyword">struct</span>{}

<span class="hljs-comment">// LoadMCPTools ä» MCP æœåŠ¡å™¨åŠ è½½å·¥å…·</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(l *mcpToolLoader)</span></span> LoadMCPTools(
    ctx context.Context,
    pluginID <span class="hljs-type">int64</span>,
    pluginVersion <span class="hljs-type">string</span>,
    mcpConfig *mcp.Config,
) ([]*ToolInfo, <span class="hljs-type">error</span>) {
    <span class="hljs-comment">// 1. åˆ›å»º MCP å®¢æˆ·ç«¯</span>
    client, err := mcp.NewClient(mcpConfig)
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>, fmt.Errorf(<span class="hljs-string">"create mcp client failed: %w"</span>, err)
    }
    <span class="hljs-keyword">defer</span> client.Close()
    
    <span class="hljs-comment">// 2. åˆå§‹åŒ–å®¢æˆ·ç«¯</span>
    <span class="hljs-keyword">if</span> err := client.Initialize(ctx); err != <span class="hljs-literal">nil</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>, fmt.Errorf(<span class="hljs-string">"initialize mcp client failed: %w"</span>, err)
    }
    
    <span class="hljs-comment">// 3. åˆ—å‡ºæ‰€æœ‰å·¥å…·</span>
    mcpTools, err := client.ListTools(ctx)
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>, fmt.Errorf(<span class="hljs-string">"list mcp tools failed: %w"</span>, err)
    }
    
    <span class="hljs-comment">// 4. è½¬æ¢ä¸º ToolInfo</span>
    toolInfos := <span class="hljs-built_in">make</span>([]*ToolInfo, <span class="hljs-number">0</span>, <span class="hljs-built_in">len</span>(mcpTools))
    <span class="hljs-keyword">for</span> idx, mcpTool := <span class="hljs-keyword">range</span> mcpTools {
        toolInfo, err := l.convertMCPToolToToolInfo(ctx, pluginID, pluginVersion, mcpTool, idx)
        <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
            logs.CtxErrorf(ctx, <span class="hljs-string">"[MCP] Failed to convert tool '%s': %v"</span>, mcpTool.Name, err)
            <span class="hljs-keyword">continue</span>
        }
        toolInfos = <span class="hljs-built_in">append</span>(toolInfos, toolInfo)
    }
    
    <span class="hljs-keyword">return</span> toolInfos, <span class="hljs-literal">nil</span>
}
</code></pre>
<h4 data-id="heading-19">2.4 MCP Tool åˆ° ToolInfo è½¬æ¢</h4>
<p>MCP Tool éœ€è¦è½¬æ¢ä¸º <code>Coze Studio</code> çš„ <code>ToolInfo</code> æ ¼å¼ï¼Œå…³é”®æ˜¯å°† MCP çš„ JSON Schema è½¬æ¢ä¸º OpenAPI Operationï¼š</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// convertMCPToolToToolInfo å°† MCP Tool è½¬æ¢ä¸º ToolInfo</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(l *mcpToolLoader)</span></span> convertMCPToolToToolInfo(
    ctx context.Context,
    pluginID <span class="hljs-type">int64</span>,
    pluginVersion <span class="hljs-type">string</span>,
    mcpTool mcpgo.Tool,
    toolIndex <span class="hljs-type">int</span>,
) (*ToolInfo, <span class="hljs-type">error</span>) {
    <span class="hljs-comment">// 1. ç”Ÿæˆå·¥å…· IDï¼ˆplugin_id * 1000 + indexï¼‰</span>
    toolID := pluginID*<span class="hljs-number">1000</span> + <span class="hljs-type">int64</span>(toolIndex+<span class="hljs-number">1</span>)
    
    <span class="hljs-comment">// 2. å°† MCP Input Schema è½¬æ¢ä¸º OpenAPI Operation</span>
    operation, err := l.convertMCPToolToOpenAPIOperation(mcpTool)
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>, fmt.Errorf(<span class="hljs-string">"convert to openapi operation failed: %w"</span>, err)
    }
    
    <span class="hljs-comment">// 3. éªŒè¯ Operation</span>
    <span class="hljs-keyword">if</span> err := operation.Validate(ctx); err != <span class="hljs-literal">nil</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>, fmt.Errorf(<span class="hljs-string">"validate operation failed: %w"</span>, err)
    }
    
    <span class="hljs-comment">// 4. åˆ›å»º ToolInfo</span>
    toolInfo := &amp;ToolInfo{
        Info: &amp;entity.ToolInfo{
            ID:              toolID,
            PluginID:        pluginID,
            Version:         ptr.Of(pluginVersion),
            Method:          ptr.Of(<span class="hljs-string">"POST"</span>),  <span class="hljs-comment">// MCP å·¥å…·é»˜è®¤ä½¿ç”¨ POST</span>
            SubURL:          ptr.Of(fmt.Sprintf(<span class="hljs-string">"/mcp/%s"</span>, mcpTool.Name)),
            Operation:       operation,
            ActivatedStatus: ptr.Of(consts.ActivateTool),
            DebugStatus:     ptr.Of(common.APIDebugStatus_DebugPassed),
        },
    }
    
    <span class="hljs-keyword">return</span> toolInfo, <span class="hljs-literal">nil</span>
}
</code></pre>
<p><strong>Schema è½¬æ¢æµç¨‹</strong>ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart LR
    A[MCP Tool InputSchema] --&gt; B[JSON Schema]
    B --&gt; C[API Parameters]
    C --&gt; D[OpenAPI Operation]
    D --&gt; E[ToolInfo]
</code></pre>
<p>è½¬æ¢è¿‡ç¨‹éœ€è¦å¤„ç†ï¼š</p>
<ul>
<li>JSON Schema ç±»å‹æ˜ å°„ï¼ˆstring, integer, number, boolean, array, objectï¼‰</li>
<li>åµŒå¥—å¯¹è±¡å’Œæ•°ç»„çš„å¤„ç†</li>
<li>å¿…éœ€å­—æ®µçš„è¯†åˆ«</li>
<li>å‚æ•°æè¿°çš„ä¿ç•™</li>
</ul>
<h3 data-id="heading-20">3. æ’ä»¶æ‰§è¡Œè°ƒç”¨ MCP</h3>
<p>å½“ç”¨æˆ·è°ƒç”¨ MCP å·¥å…·æ—¶ï¼Œéœ€è¦è·¯ç”±åˆ° MCP æ‰§è¡Œå™¨ã€‚æ‰§è¡Œå™¨è´Ÿè´£ï¼š</p>
<ol>
<li>è§£æ MCP é…ç½®</li>
<li>è·å–æˆ–åˆ›å»º MCP å®¢æˆ·ç«¯ï¼ˆæ”¯æŒè¿æ¥å¤ç”¨ï¼‰</li>
<li>è°ƒç”¨ MCP å·¥å…·</li>
<li>æ ¼å¼åŒ–å“åº”</li>
</ol>
<h4 data-id="heading-21">3.1 MCP æ‰§è¡Œå™¨å®ç°</h4>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// backend/domain/plugin/service/tool/invocation_mcp.go</span>

<span class="hljs-keyword">type</span> mcpCallImpl <span class="hljs-keyword">struct</span> {
    clients <span class="hljs-keyword">map</span>[<span class="hljs-type">string</span>]*mcp.Client <span class="hljs-comment">// key: config hash</span>
    mu      sync.RWMutex
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">NewMcpCallImpl</span><span class="hljs-params">()</span></span> Invocation {
    <span class="hljs-keyword">return</span> &amp;mcpCallImpl{
        clients: <span class="hljs-built_in">make</span>(<span class="hljs-keyword">map</span>[<span class="hljs-type">string</span>]*mcp.Client),
    }
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(m *mcpCallImpl)</span></span> Do(ctx context.Context, args *InvocationArgs) (request <span class="hljs-type">string</span>, resp <span class="hljs-type">string</span>, err <span class="hljs-type">error</span>) {
    <span class="hljs-comment">// 1. è§£æ MCP é…ç½®</span>
    mcpConfig, err := m.parseMCPConfig(args)
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-string">""</span>, <span class="hljs-string">""</span>, fmt.Errorf(<span class="hljs-string">"parse mcp config failed: %w"</span>, err)
    }
    
    <span class="hljs-comment">// 2. è·å–æˆ–åˆ›å»º MCP å®¢æˆ·ç«¯ï¼ˆæ”¯æŒè¿æ¥å¤ç”¨ï¼‰</span>
    client, err := m.getOrCreateClient(ctx, mcpConfig)
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-string">""</span>, <span class="hljs-string">""</span>, fmt.Errorf(<span class="hljs-string">"get mcp client failed: %w"</span>, err)
    }
    
    <span class="hljs-comment">// 3. æ„å»ºå·¥å…·è°ƒç”¨å‚æ•°</span>
    toolName := args.Tool.GetName()
    arguments := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">map</span>[<span class="hljs-type">string</span>]any)
    
    <span class="hljs-comment">// åˆå¹¶æ‰€æœ‰å‚æ•°ï¼ˆHeader, Query, Path, Bodyï¼‰</span>
    <span class="hljs-keyword">for</span> k, v := <span class="hljs-keyword">range</span> args.Header {
        arguments[k] = v
    }
    <span class="hljs-keyword">for</span> k, v := <span class="hljs-keyword">range</span> args.Query {
        arguments[k] = v
    }
    <span class="hljs-keyword">for</span> k, v := <span class="hljs-keyword">range</span> args.Path {
        arguments[k] = v
    }
    <span class="hljs-keyword">for</span> k, v := <span class="hljs-keyword">range</span> args.Body {
        arguments[k] = v
    }
    
    <span class="hljs-comment">// 4. è°ƒç”¨ MCP å·¥å…·</span>
    resultStr, err := client.CallTool(ctx, toolName, arguments)
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        requestJSON, _ := sonic.MarshalString(<span class="hljs-keyword">map</span>[<span class="hljs-type">string</span>]any{
            <span class="hljs-string">"tool"</span>:      toolName,
            <span class="hljs-string">"arguments"</span>: arguments,
        })
        <span class="hljs-keyword">return</span> requestJSON, <span class="hljs-string">""</span>, fmt.Errorf(<span class="hljs-string">"call mcp tool failed: %w"</span>, err)
    }
    
    <span class="hljs-comment">// 5. åºåˆ—åŒ–è¯·æ±‚å’Œå“åº”</span>
    requestJSON, _ := sonic.MarshalString(<span class="hljs-keyword">map</span>[<span class="hljs-type">string</span>]any{
        <span class="hljs-string">"tool"</span>:      toolName,
        <span class="hljs-string">"arguments"</span>: arguments,
    })
    
    <span class="hljs-comment">// MCP å·¥å…·è¿”å›æ–‡æœ¬ï¼Œéœ€è¦åŒ…è£…ä¸º JSON</span>
    responseJSON, err := sonic.MarshalString(<span class="hljs-keyword">map</span>[<span class="hljs-type">string</span>]any{
        <span class="hljs-string">"output"</span>: resultStr,
    })
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        <span class="hljs-keyword">return</span> requestJSON, <span class="hljs-string">""</span>, fmt.Errorf(<span class="hljs-string">"marshal mcp response failed: %w"</span>, err)
    }
    
    <span class="hljs-keyword">return</span> requestJSON, responseJSON, <span class="hljs-literal">nil</span>
}
</code></pre>
<h4 data-id="heading-22">3.2 å®¢æˆ·ç«¯è¿æ¥å¤ç”¨</h4>
<p>ä¸ºäº†æå‡æ€§èƒ½ï¼Œæˆ‘ä»¬å®ç°äº†å®¢æˆ·ç«¯è¿æ¥å¤ç”¨æœºåˆ¶ï¼š</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// getOrCreateClient è·å–æˆ–åˆ›å»º MCP å®¢æˆ·ç«¯ï¼ˆæ”¯æŒè¿æ¥å¤ç”¨ï¼‰</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(m *mcpCallImpl)</span></span> getOrCreateClient(ctx context.Context, config *mcp.Config) (*mcp.Client, <span class="hljs-type">error</span>) {
    <span class="hljs-comment">// 1. è®¡ç®—é…ç½®å“ˆå¸Œä½œä¸ºç¼“å­˜ key</span>
    configHash := m.hashConfig(config)
    
    <span class="hljs-comment">// 2. å°è¯•ä»ç¼“å­˜è·å–</span>
    m.mu.RLock()
    <span class="hljs-keyword">if</span> client, ok := m.clients[configHash]; ok {
        m.mu.RUnlock()
        <span class="hljs-keyword">return</span> client, <span class="hljs-literal">nil</span>
    }
    m.mu.RUnlock()
    
    <span class="hljs-comment">// 3. åˆ›å»ºæ–°å®¢æˆ·ç«¯ï¼ˆåŒé‡æ£€æŸ¥ï¼‰</span>
    m.mu.Lock()
    <span class="hljs-keyword">defer</span> m.mu.Unlock()
    
    <span class="hljs-keyword">if</span> client, ok := m.clients[configHash]; ok {
        <span class="hljs-keyword">return</span> client, <span class="hljs-literal">nil</span>
    }
    
    <span class="hljs-comment">// 4. åˆ›å»ºå¹¶åˆå§‹åŒ–å®¢æˆ·ç«¯</span>
    client, err := mcp.NewClient(config)
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>, fmt.Errorf(<span class="hljs-string">"create mcp client failed: %w"</span>, err)
    }
    
    <span class="hljs-keyword">if</span> err := client.Initialize(ctx); err != <span class="hljs-literal">nil</span> {
        client.Close()
        <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>, fmt.Errorf(<span class="hljs-string">"initialize mcp client failed: %w"</span>, err)
    }
    
    <span class="hljs-comment">// 5. ç¼“å­˜å®¢æˆ·ç«¯</span>
    m.clients[configHash] = client
    
    <span class="hljs-keyword">return</span> client, <span class="hljs-literal">nil</span>
}

<span class="hljs-comment">// hashConfig ç”Ÿæˆé…ç½®å“ˆå¸Œ</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(m *mcpCallImpl)</span></span> hashConfig(config *mcp.Config) <span class="hljs-type">string</span> {
    data, _ := json.Marshal(config)
    hash := sha256.Sum256(data)
    <span class="hljs-keyword">return</span> hex.EncodeToString(hash[:])
}
</code></pre>
<p><strong>è®¾è®¡è¦ç‚¹</strong>ï¼š</p>
<ol>
<li><strong>è¿æ¥å¤ç”¨</strong>ï¼šç›¸åŒé…ç½®çš„ MCP æœåŠ¡å™¨å…±äº«ä¸€ä¸ªå®¢æˆ·ç«¯è¿æ¥</li>
<li><strong>çº¿ç¨‹å®‰å…¨</strong>ï¼šä½¿ç”¨ <code>sync.RWMutex</code> ä¿è¯å¹¶å‘å®‰å…¨</li>
<li><strong>åŒé‡æ£€æŸ¥</strong>ï¼šé¿å…é‡å¤åˆ›å»ºå®¢æˆ·ç«¯</li>
<li><strong>é…ç½®å“ˆå¸Œ</strong>ï¼šä½¿ç”¨ SHA256 å“ˆå¸Œä½œä¸ºç¼“å­˜ key</li>
</ol>
<h4 data-id="heading-23">3.3 æ‰§è¡Œè·¯ç”±</h4>
<p>åœ¨ <code>exec_tool.go</code> ä¸­ï¼Œæ ¹æ®æ’ä»¶ç±»å‹è·¯ç”±åˆ°å¯¹åº”çš„æ‰§è¡Œå™¨ï¼š</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// backend/domain/plugin/service/exec_tool.go</span>

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">newToolInvocation</span><span class="hljs-params">(t *toolExecutor)</span></span> tool.Invocation {
    <span class="hljs-keyword">switch</span> t.plugin.Manifest.API.Type {
    <span class="hljs-keyword">case</span> consts.PluginTypeOfCloud:
        <span class="hljs-comment">// HTTP æ’ä»¶</span>
        <span class="hljs-keyword">return</span> tool.NewHttpCallImpl(t.conversationID)
    
    <span class="hljs-keyword">case</span> consts.PluginTypeOfMCP:
        <span class="hljs-comment">// MCP æ’ä»¶</span>
        <span class="hljs-keyword">return</span> tool.NewMcpCallImpl()
    
    <span class="hljs-keyword">case</span> consts.PluginTypeOfCustom:
        <span class="hljs-comment">// è‡ªå®šä¹‰æ’ä»¶</span>
        <span class="hljs-keyword">return</span> tool.NewCustomCallImpl()
    
    <span class="hljs-keyword">default</span>:
        <span class="hljs-keyword">return</span> tool.NewHttpCallImpl(t.conversationID)
    }
}
</code></pre>
<h3 data-id="heading-24">4. YAML é…ç½®æ ¼å¼</h3>
<p>åœ¨ <code>plugin_meta.yaml</code> ä¸­ï¼ŒMCP æ’ä»¶çš„é…ç½®æ ¼å¼å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-bullet">-</span> <span class="hljs-attr">plugin_id:</span> <span class="hljs-number">101</span>
  <span class="hljs-attr">product_id:</span> <span class="hljs-number">7600000000000000101</span>
  <span class="hljs-attr">deprecated:</span> <span class="hljs-literal">false</span>
  <span class="hljs-attr">version:</span> <span class="hljs-string">v1.0.0</span>
  <span class="hljs-attr">openapi_doc_file:</span>   <span class="hljs-comment"># MCP æ’ä»¶å¯ä»¥å¿½ç•¥æ­¤å­—æ®µ</span>
  <span class="hljs-attr">plugin_type:</span> <span class="hljs-number">1</span>
  <span class="hljs-attr">manifest:</span>
    <span class="hljs-attr">schema_version:</span> <span class="hljs-string">v1</span>
    <span class="hljs-attr">name_for_model:</span> <span class="hljs-string">è¿œç¨‹æ‰§è¡Œå‘½ä»¤MCP</span>
    <span class="hljs-attr">name_for_human:</span> <span class="hljs-string">è¿œç¨‹æ‰§è¡Œå‘½ä»¤MCP</span>
    <span class="hljs-attr">description_for_model:</span> <span class="hljs-string">é€šè¿‡</span> <span class="hljs-string">MCP</span> <span class="hljs-string">åè®®åœ¨è¿œç¨‹æœºå™¨ä¸Šæ‰§è¡Œå‘½ä»¤æˆ–è„šæœ¬</span>
    <span class="hljs-attr">description_for_human:</span> <span class="hljs-string">è¿œç¨‹å‘½ä»¤æ‰§è¡Œå·¥å…·ï¼ŒåŸºäº</span> <span class="hljs-string">MCP</span> <span class="hljs-string">åè®®å®ç°å®‰å…¨çš„è¿œç¨‹æ“ä½œ</span>
    <span class="hljs-attr">auth:</span>
      <span class="hljs-attr">type:</span> <span class="hljs-string">none</span>
    <span class="hljs-attr">logo_url:</span> <span class="hljs-string">official_plugin_icon/plugin_remote_exec.png</span>
    <span class="hljs-attr">api:</span>
      <span class="hljs-attr">type:</span> <span class="hljs-string">coze-studio-mcp</span>  <span class="hljs-comment"># æ ‡è¯†ä¸º MCP æ’ä»¶</span>
      <span class="hljs-attr">extensions:</span>
        <span class="hljs-attr">mcp_config:</span>  <span class="hljs-comment"># MCP é…ç½®</span>
          <span class="hljs-attr">transport_type:</span> <span class="hljs-string">sse</span>  <span class="hljs-comment"># æˆ– stdio</span>
          <span class="hljs-attr">sse_config:</span>
            <span class="hljs-attr">url:</span> <span class="hljs-string">http://10.x.x.x:8000/mcp/sse</span>
            <span class="hljs-attr">headers:</span>
              <span class="hljs-attr">Content-Type:</span> <span class="hljs-string">application/json</span>
    <span class="hljs-attr">common_params:</span>
      <span class="hljs-attr">body:</span> []
      <span class="hljs-attr">header:</span> []
      <span class="hljs-attr">path:</span> []
      <span class="hljs-attr">query:</span> []
  <span class="hljs-attr">tools:</span> []  <span class="hljs-comment"># MCP æ’ä»¶çš„å·¥å…·ä»æœåŠ¡å™¨åŠ¨æ€åŠ è½½ï¼Œè¿™é‡Œå¯ä»¥ä¸ºç©º</span>
</code></pre>
<p><strong>é…ç½®è¯´æ˜</strong>ï¼š</p>
<ol>
<li><strong><code>api.type</code></strong>ï¼šå¿…é¡»è®¾ç½®ä¸º ``Coze Studio<code>-mcp</code></li>
<li><strong><code>api.extensions.mcp_config</code></strong>ï¼šMCP æœåŠ¡å™¨é…ç½®
<ul>
<li><code>transport_type</code>ï¼šä¼ è¾“ç±»å‹ï¼ˆ<code>stdio</code> æˆ– <code>sse</code>ï¼‰</li>
<li><code>sse_config</code>ï¼šSSE ä¼ è¾“é…ç½®ï¼ˆåŒ…å« URL å’Œ Headersï¼‰</li>
<li><code>stdio_config</code>ï¼šstdio ä¼ è¾“é…ç½®ï¼ˆåŒ…å«å‘½ä»¤ã€ç¯å¢ƒå˜é‡ç­‰ï¼‰</li>
</ul>
</li>
<li><strong><code>tools</code></strong>ï¼šå¯ä»¥ä¸ºç©ºï¼Œå·¥å…·ä¼šä» MCP æœåŠ¡å™¨åŠ¨æ€åŠ è½½</li>
</ol>
<h2 data-id="heading-25">éªŒè¯æˆæœ</h2>
<h3 data-id="heading-26">1. å…ˆåœ¨é…ç½®æ–‡ä»¶ä¸­è¿›è¡Œé…ç½® mcpserver</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4592a8a70e1d46f9b7ad056959f0cf62~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRGV2WUs=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766153875&amp;x-signature=Ix1gRGJq%2BRvWApN3%2B%2Fzjrm%2F6WCw%3D" alt="image-20251212160845027" loading="lazy"/></p>
<h3 data-id="heading-27">2. é‡å¯æœåŠ¡ï¼Œæ¢ç´¢æ’ä»¶</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c5d3f0e704334ef291ae919059b87d93~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRGV2WUs=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766153875&amp;x-signature=U0QaUFYpIO8Di6NrYbDO4AEAWHo%3D" alt="image-20251212160937194" loading="lazy"/></p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œå‰ç«¯çš„æ¢ç´¢å·²ç»å‡ºç°äº†æˆ‘ä»¬åˆšåˆšé…ç½®çš„è¿œç¨‹æ‰§è¡Œå‘½ä»¤çš„æ’ä»¶</p>
<h3 data-id="heading-28">3. éªŒè¯ç»“æœ</h3>
<p>ä¸ºäº†éªŒè¯ç»“æœï¼Œæˆ‘ä»¬ç¼–å†™ä¸€ä¸ªå·¥ä½œæµ</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f8a33407dd6a4b508c1da8108eec736b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRGV2WUs=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766153875&amp;x-signature=Upb40z%2FJWC7suSluMV0sSmbYMbk%3D" alt="image-20251212163520774" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e0a54abd7b434112b3689d7a00425757~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRGV2WUs=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766153875&amp;x-signature=1%2FwSGMr1vs0AZcQORcbhjIILiD4%3D" alt="image-20251212163939172" loading="lazy"/></p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬æˆåŠŸçš„é…ç½®äº† mcpservers ï¼Œå¹¶ä¸” <code>Coze Studio</code> åœ¨å·¥ä½œæµä¸­ä¹Ÿæ­£å¸¸çš„è°ƒç”¨äº† mcp è¿œç¨‹æ‰§è¡Œå‘½ä»¤çš„æ’ä»¶ã€‚</p>
<h2 data-id="heading-29">å¦‚ä½•ä½¿ç”¨:</h2>
<p>ä¸‹è½½ä»£ç ï¼Œå¹¶åˆå§‹åŒ–åç«¯ &amp; å®¹å™¨ &amp; db ç¯å¢ƒ</p>
<pre><code class="hljs language-shell" lang="shell">git clone https://github.com/yangkun19921001/coze-studio-plus
cd coze-studio-plus
./start_vs_debug.sh
</code></pre>
<p>è¿è¡Œåç«¯æœåŠ¡</p>
<pre><code class="hljs language-json" lang="json">        <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Coze Studio Backend (Debug)"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"go"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"request"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"launch"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"mode"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"debug"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"program"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"${workspaceFolder}/coze-studio/backend/main.go"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"cwd"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"${workspaceFolder}/coze-studio/backend"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"console"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"integratedTerminal"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"env"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
                <span class="hljs-attr">"APP_ENV"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"debug"</span><span class="hljs-punctuation">,</span>
                <span class="hljs-attr">"LOG_LEVEL"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"debug"</span>
            <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"args"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"showLog"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span>
        <span class="hljs-punctuation">}</span>
</code></pre>
<h2 data-id="heading-30">æ€»ç»“</h2>
<p>æœ¬æ–‡ä»‹ç»äº†åœ¨ <code>Coze Studio</code> ä¸­å®ç° MCP é™æ€é…ç½®æ”¯æŒçš„æ–¹æ³•ã€‚æ ¸å¿ƒæ€è·¯æ˜¯åœ¨ä¿æŒåŸæœ‰æ¶æ„ä¸å˜çš„å‰æä¸‹ï¼Œé€šè¿‡æ’ä»¶ç±»å‹åˆ¤æ–­å’Œåˆ†æ”¯å¤„ç†ï¼Œä¸º MCP æ’ä»¶æä¾›ç‹¬ç«‹çš„åŠ è½½è·¯å¾„ã€‚å®ç°åŒ…æ‹¬ MCP å®¢æˆ·ç«¯å°è£…ã€é…ç½®è§£æã€å·¥å…·åŠ¨æ€åŠ è½½ã€Schema è½¬æ¢ä»¥åŠæ‰§è¡Œå™¨é›†æˆç­‰å…³é”®ç¯èŠ‚ã€‚</p>
<p>é€šè¿‡é™æ€é…ç½®æ–¹å¼ï¼Œå¼€å‘è€…å¯ä»¥åœ¨ <code>plugin_meta.yaml</code> ä¸­é…ç½® MCP æœåŠ¡å™¨ä¿¡æ¯ï¼Œç³»ç»Ÿå¯åŠ¨æ—¶è‡ªåŠ¨åŠ è½½å¹¶æ³¨å†Œå·¥å…·ã€‚è¿™ç§æ–¹å¼é€‚åˆå›ºå®šçš„ã€é¢„å®šä¹‰çš„ MCP æœåŠ¡å™¨åœºæ™¯ã€‚</p>
<p><strong>ä¸‹ä¸€æ­¥</strong></p>
<p>ç›®å‰å®ç°çš„é™æ€é…ç½®æ–¹å¼éœ€è¦ä¿®æ”¹é…ç½®æ–‡ä»¶å¹¶é‡å¯æœåŠ¡æ‰èƒ½ç”Ÿæ•ˆã€‚åœ¨å®é™…ä½¿ç”¨ä¸­ï¼Œæˆ‘ä»¬æ›´å¸Œæœ›èƒ½åƒ Cursor é‚£æ ·ï¼Œé€šè¿‡ UI ç•Œé¢åŠ¨æ€æ·»åŠ ã€åˆ é™¤å’Œç®¡ç† MCP æœåŠ¡å™¨ï¼Œæ— éœ€é‡å¯æœåŠ¡ã€‚ä¸‹ä¸€ç¯‡å°†ä»‹ç»å¦‚ä½•å®ç° MCP æœåŠ¡å™¨çš„åŠ¨æ€é…ç½®åŠŸèƒ½ï¼ŒåŒ…æ‹¬ï¼š</p>
<ul>
<li>é€šè¿‡ API åŠ¨æ€æ·»åŠ /åˆ é™¤ MCP æœåŠ¡å™¨</li>
<li>å®æ—¶è¿æ¥æµ‹è¯•å’Œå·¥å…·åˆ—è¡¨åˆ·æ–°</li>
<li>é…ç½®æŒä¹…åŒ–å­˜å‚¨</li>
<li>UI ç•Œé¢é›†æˆ</li>
</ul>
<p>è¿™å°†è¿›ä¸€æ­¥æå‡ç³»ç»Ÿçš„çµæ´»æ€§å’Œç”¨æˆ·ä½“éªŒã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç¨‹åºå‘˜å‰¯ä¸š | 2025å¹´11æœˆå¤ç›˜]]></title>    <link>https://juejin.cn/post/7582786655473598507</link>    <guid>https://juejin.cn/post/7582786655473598507</guid>    <pubDate>2025-12-12T14:25:16.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582786655473598507" data-draft-id="7582786655473549355" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç¨‹åºå‘˜å‰¯ä¸š | 2025å¹´11æœˆå¤ç›˜"/> <meta itemprop="keywords" content="åç«¯,åˆ›ä¸š"/> <meta itemprop="datePublished" content="2025-12-12T14:25:16.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å˜Ÿå˜ŸMD"/> <meta itemprop="url" content="https://juejin.cn/user/3368559354851470"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç¨‹åºå‘˜å‰¯ä¸š | 2025å¹´11æœˆå¤ç›˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3368559354851470/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å˜Ÿå˜ŸMD
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-12T14:25:16.000Z" title="Fri Dec 12 2025 14:25:16 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{line-height:1.75;font-family:-apple-system-font,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei UI,Microsoft YaHei,Arial,sans-serif;letter-spacing:2px;background-image:linear-gradient(90deg,rgba(50,0,0,.05) 3%,transparent 0),linear-gradient(1turn,rgba(50,0,0,.05) 3%,transparent 0);background-size:20px 20px;background-position:50%;word-break:break-word;font-weight:400;font-size:15px;overflow-x:hidden;color:#333}.markdown-body h1{font-size:23px;margin-bottom:5px;font-weight:700;padding-left:10px;border-left:5px solid #773098}.markdown-body h2{font-size:19px;font-weight:700;padding-left:10px;border-left:5px solid #916dd5}.markdown-body h3{font-size:17px;font-weight:700;padding-left:10px;border-left:5px solid #d89cf6}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{font-size:14px;margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{display:block;max-width:100%;margin:1em 0;border-radius:6px;box-shadow:2px 4px 7px #999;user-select:none}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{padding:.2em .5em;font-weight:700;font-family:-apple-system-font,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei UI,Microsoft YaHei,Arial,sans-serif;font-size:1em;color:#916dd5;word-break:break-word;overflow-x:auto;background-color:none;border-radius:2px}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;font-family:-apple-system-font,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei UI,Microsoft YaHei,Arial,sans-serif;font-weight:400;font-size:.9em;padding:16px 12px;margin:0;color:#333;word-break:normal;overflow-x:auto;background:#f8f8f8;scroll-behavior:smooth}.markdown-body a{text-decoration:none;color:#916dd5;font-weight:700;border-bottom:1px solid #916dd5}.markdown-body a:active,.markdown-body a:hover{color:#773098}.markdown-body table{display:inline-block!important;font-size:14px;width:auto;max-width:100%;overflow:auto;border:1px solid #916dd5;border-collapse:collapse}.markdown-body thead{background-color:#916dd5;color:#fff;text-align:left}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px;border:1px solid #916dd5}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #d89cf6;background-color:#f4eeff}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0;line-height:26px}.markdown-body ol,.markdown-body ul{padding-left:28px;list-style-type:circle}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body b,.markdown-body strong{color:#916dd5;font-weight:700}.markdown-body b:before,.markdown-body strong:before{content:"ã€Œ"}.markdown-body b:after,.markdown-body strong:after{content:"ã€"}.markdown-body em,.markdown-body i{color:#916dd5}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="github-gist">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#fff;color:#333}.hljs-comment,.hljs-meta{color:#969896}.hljs-emphasis,.hljs-quote,.hljs-strong,.hljs-template-variable,.hljs-variable{color:#df5000}.hljs-keyword,.hljs-selector-tag,.hljs-type{color:#d73a49}.hljs-attribute,.hljs-bullet,.hljs-literal,.hljs-symbol{color:#0086b3}.hljs-name,.hljs-section{color:#63a35c}.hljs-tag{color:#333}.hljs-attr,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-id,.hljs-selector-pseudo,.hljs-title{color:#6f42c1}.hljs-addition{color:#55a532;background-color:#eaffea}.hljs-deletion{color:#bd2c00;background-color:#ffecec}.hljs-link{text-decoration:underline}.hljs-number{color:#005cc5}.hljs-string{color:#032f62}</style><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2557cd7a86814ef8af74fe2f6ba77795~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=900&amp;h=383&amp;s=91599&amp;e=jpg&amp;b=64a5ef" alt="å¿…çœ‹å¤§å­—æœ€æ–°æ¶ˆæ¯é‡ç£…å…¬ä¼—å·é¦–å›¾(2) (1).jpg" loading="lazy"/></p>
<blockquote>
<p>æœ¬æ–‡é¦–å‘äºå…¬ä¼—å·ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FYfjQvm5_T6MWABAOCQxNyQ" target="_blank" title="https://mp.weixin.qq.com/s/YfjQvm5_T6MWABAOCQxNyQ" ref="nofollow noopener noreferrer">å˜Ÿçˆ·åˆ›ä¸šæ—¥è®°</a>Â ã€‚ æˆ‘å·²ç»åšæŒæ—¥æ›´600å¤©+ï¼Œæ¬¢è¿è¿‡æ¥è¿½å‰§~</p>
</blockquote>
<blockquote>
<p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯å˜Ÿå˜ŸMDï¼Œä¸€ä¸ª10å¹´ç¨‹åºå‘˜ï¼Œç°åœ¨ç¦»èŒåˆ›ä¸šï¼Œæœ‰700å¤©äº†ï¼Œæˆ‘æ¯ä¸ªæœˆéƒ½ä¼šå†™ä¸€ç¯‡æ€»ç»“å¤ç›˜ï¼Œè®©å¤§å®¶å¯ä»¥è¿‘è·ç¦»çœ‹çœ‹ä¸€ä¸ªç¦»èŒç¨‹åºå‘˜éƒ½åœ¨å¹²ä»€ä¹ˆï¼Œä»Šå¤©è¿™ç¯‡æ˜¯ä¹æœˆä»½çš„æ€»ç»“ï¼Œå¤§æ¦‚2000å­—ï¼Œç•¥é•¿ï¼Œæœ‰ç©ºçš„å¯ä»¥ç¿»ç¿»ï¼Œå¸Œæœ›å¯¹å¤§å®¶æœ‰ä¸€ä¸¢ä¸¢çš„å€Ÿé‰´ä½œç”¨ï¼</p>
</blockquote>
<h2 data-id="heading-0">ä¸€ã€æœˆåº¦å¤§äº‹</h2>
<p>ä»Šå¹´å¿«ç»“æŸå•¦ï¼Œ11æœˆçš„æ€»ç»“å·®ç‚¹å°±æ¼æ‰äº†ï¼Œä»Šå¤©è¡¥ä¸Šï¼Œè¿™ä¸ªæœˆçš„è¯çº¿ä¸‹è¯¾ç¨‹ä»¥åŠä¼ä¸šå’¨è¯¢å•å­å¤šäº†ï¼Œå…¶ä»–çš„å’Œå¹³æ—¶å·®åˆ«ä¸å¤§ã€‚
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/784ae5205bb04d91ab9430bd42d7ab58~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Zif5ZifTUQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766154316&amp;x-signature=sPDP3k6az9Qct3rrWlnsKkfSbPk%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong>1ï¼šå…¬ä¼—å·è¿è¥+Bç«™è§†é¢‘è¿è¥</strong></p>
<p>å…¬ä¼—å·å’ŒBç«™è§†é¢‘è¿è¥ç›®å‰è¿˜æ˜¯æœ€é«˜ä¼˜å…ˆçº§ï¼Œå…ˆè¯´è¿™å—å†…å®¹ï¼Œæœ¬æœˆå…¬ä¼—å·å‘è¡¨27ç¯‡ï¼ˆ1ç¯‡è½¯æ–‡ï¼‰ï¼Œè§†é¢‘å·åˆ›ä½œ29ç¯‡ï¼Œè¿™æ¬¡è§†é¢‘æ•°é‡è¡¥ä¸Šäº†ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bbd3bd0a7b8c437da23ec05c86ac7b6f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Zif5ZifTUQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766154316&amp;x-signature=zdmV7gEJ%2B6EQqLTu9W165e15dss%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>11æœˆæ²¡æœ‰å…¶ä»–äº‹æƒ…åˆ†å¿ƒï¼Œæ‰€ä»¥è§†é¢‘æ‹¿ç¨¿è´¹è¿™å—è¿˜ç®—ç¨³å®šï¼Œå·²ç»3ä¸ªæœˆç¨³å®šåœ¨8Kå·¦å³æ”¶å…¥äº†ï¼Œç›®å‰Bç«™ç²‰ä¸å¢é•¿é‡ä¸ç®—å¿«ï¼Œä¸­è§„ä¸­çŸ©ï¼Œæˆ‘æ˜¯çœ‹åˆ°åˆ«äººæ¶¨ç²‰å¾ˆå¿«çš„ï¼Œç¡®å®å¯¹æ–¹åšçš„è§†é¢‘è´¨é‡æ¯”æˆ‘å¥½ï¼Œè¿™å—è¿˜æ˜¯è¦æ…¢æ…¢æé«˜ä¸€ä¸‹ï¼Œä¹‹å‰å®šçš„è®¡åˆ’æ˜¯åˆ›ä½œè¿™å—å¸Œæœ›æœˆæ”¶ç›Šå¯ä»¥ç ´ä¸‡ï¼Œé‚£æ˜¯éœ€è¦ä¸‹åŠŸå¤«ç ”ç©¶å†…å®¹çš„è´¨é‡ã€‚</p>
<p>æ›´æ–°ä¸‹æˆ‘ç›®å‰å‡ ä¸ªå·çš„ç²‰ä¸ä½“é‡ï¼Œè¿˜æ˜¯Bç«™å¢é•¿ç¨³å®šã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/913e79085f464afe89b0c63761d9bf57~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Zif5ZifTUQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766154316&amp;x-signature=2OMGA54YSC9hiZgT9tG1eKVCNcQ%3D" alt="å›¾ç‰‡" loading="lazy"/>Youtubeè¿™å—ç›®å‰ä¸€å¹´å†…æ’­æ”¾æ—¶é•¿å·²ç»3800å°æ—¶äº†ï¼Œ4000å°æ—¶æˆ‘å°±å¯ä»¥å¼€é€šæ’­æ”¾æ”¶ç›Šè¿™å—ï¼Œ12æœˆç»“æŸåº”è¯¥å°±å¯ä»¥æ‰“æ ‡ï¼Œåˆ°æ—¶å€™æ˜å¹´è¿™ä¸€å—çš„æ”¶ç›Šä¹Ÿä¼šæœ‰ä¸€äº›ï¼Œèµšç‚¹ç¾åˆ€ï¼Œå¾ˆæœŸå¾…ï¼ŒYoutubeåŒæ­¥å‘è§†é¢‘ä¹Ÿæœ‰4-5ä¸ªæœˆäº†ï¼Œç»ˆäºå¿«æœ‰æ”¶è·äº†ï¼Œå¸Œæœ›ä¸è¦å‡ºä»€ä¹ˆæ„å¤–ã€‚</p>
<p><strong>2ï¼šå•†å•ä¸šåŠ¡å’Œæ¥å¹¿ä¸šåŠ¡</strong></p>
<p>è¿™ä¸ªæœˆ3ä¸ªå•å­ï¼Œä¸€ä¸ªæ˜¯è½¯æ–‡å¹¿å­ï¼Œå‰©ä¸‹2ä¸ªæ˜¯çº¿ä¸‹å›¢é˜Ÿçš„å•å­ï¼Œä¸€ä¸ªæ˜¯çº¿ä¸‹æˆè¯¾å½“è®²å¸ˆï¼Œè¿˜æœ‰ä¸€ä¸ªä¹Ÿæ˜¯çº¿ä¸‹å›¢é˜Ÿä»‹ç»æ¥çš„ï¼Œç»™ä¸€ä¸ªå…¬å¸åšAIè§†é¢‘è¿™å—çš„å®šåˆ¶åŸ¹è®­ï¼Œè¿™ä¸ªæœˆä¹Ÿäº¤ä»˜äº†ï¼Œè¿˜å·®æœ€åä¸€ä¸ªç›´æ’­ç­”ç–‘å°±å¯ä»¥æå®šã€‚</p>
<p>è¿™æ¬¡çš„çªç ´ç‚¹æ ¸å¿ƒè¿˜æ˜¯åœ¨çº¿ä¸‹ï¼Œæ…¢æ…¢ä¹Ÿå¼€å§‹å‡ºç°æ”¶ç›Šäº†ï¼Œå›¢é˜Ÿé‡Œé¢å‡ ä¸ªäººéƒ½å¾ˆå‰å®³ï¼Œäº’ç›¸ç»„åˆï¼Œå¯ä»¥æœ‰æ›´å¤šçš„å•å­åé¢ã€‚</p>
<p><strong>3ï¼šç›´æ’­å–è¯¾ä¸Šå‘¨æœ«ç­</strong></p>
<p>è¿™ä¸ªæœˆæˆ‘ç»ˆäºæŠŠæˆ‘çš„è¯¾ç¨‹ä¸Šæ¶åˆ°è§†é¢‘å·äº†ï¼Œä¹Ÿç®—æ˜¯0-1æ‰“é€šäº†è·¯å¾„ï¼Œåé¢å°±å¯ä»¥åœ¨ç›´æ’­é‡Œé¢æŒ‚å“å–è¯¾ç¨‹ã€‚ç›®å‰æˆ‘ä»¬è®¡åˆ’çº¿ä¸Šå°±æ˜¯åšè¯¾ç¨‹+ç›´æ’­è½¬åŒ–ï¼Œçº¿ä¸‹å°±æ˜¯æ‰¾åˆä½œç‚¹åšè¯¾ç¨‹åŸ¹è®­ä»¥åŠä¼ä¸šä¼åŸ¹ã€‚è¿™ä¹Ÿæ˜¯æˆ‘ä»¬ç¦AIå›¢é˜Ÿå•†ä¸šåŒ–æœªæ¥çš„å‡ ä¸ªåˆ‡å…¥ç‚¹ã€‚</p>
<h2 data-id="heading-1">äºŒã€æœ‰ä»€ä¹ˆæ”¶è·</h2>
<h3 data-id="heading-2">ã€è®¤çŸ¥æ–¹é¢ã€‘</h3>
<p><strong>1ï¼šäººä¸èƒ½ä¸€ç›´åœ¨èˆ’é€‚åŒº</strong></p>
<p>è¿™ä¸ªæƒ³æ³•æœ€è¿‘æŒºå¼ºçƒˆçš„ï¼Œè¿™ä¸ªä¸–ç•Œæ˜¯å……æ»¡ä¸ç¡®å®šæ€§çš„ï¼Œæˆ‘æ¯ä¸ªæœˆå…¶å®ä¸€ç›´æœ‰å…³æ³¨æˆ‘çš„æ”¶ç›Šæ³¢åŠ¨ï¼Œæˆ‘å‘ç°æˆ‘ä¸€ç›´åƒè€æœ¬ä¸æŠ˜è…¾çš„å‡ ä¸ªé¡¹ç›®æ”¶ç›Šæ˜¯è¶Šæ¥è¶Šä½çš„ï¼Œè€ŒAIç»˜ç”»è¿™å—ä¸€ç›´æŠ˜è…¾çš„å°±ä¸Šå‡è¶‹åŠ¿ï¼Œè¿™ä¸¤ä¸ªå½¢æˆçš„å¯¹æ¯”å¯¹æˆ‘åˆºæ¿€å°±å¾ˆå¤§ï¼Œäººä¸€æ—¦åœ¨èˆ’é€‚åŒºå°±ä¼šå˜å¾—å¾ˆæ‡’ï¼Œå°±ä¼šæ‰¾å„ç§ç†ç”±æ‹–å»¶æˆ–è€…ä¸è¡ŒåŠ¨ï¼Œå°±åƒæˆ‘è·‘æ­¥æ‹–å»¶ï¼Œå†™å¤ç›˜æ‹–å»¶ï¼Œå•¥éƒ½ä¸åšå¾ˆèˆ’æœï¼Œå¾€é‚£è¾¹ä¸€èººæŠ–éŸ³æ‰“å¼€åˆ·çŸ­å‰§ï¼Œå°é›¶é£Ÿä¸€åƒï¼Œåˆ«æå¤šèˆ’æœï¼ä½†æ˜¯äº‹æƒ…ä¸åšå†…å¿ƒå…¶å®ä¸€ç›´æœ‰ç„¦è™‘æ„Ÿã€‚</p>
<p>è¿™ä¸–ä¸Šæ²¡æœ‰å•¥é“é¥­ç¢—ï¼Œä¹Ÿæ²¡æœ‰ä¸€ç›´èµšé’±çš„é¡¹ç›®ï¼Œéƒ½æ˜¯è¦è‡ªå·±ä¸æ–­æŠ˜è…¾è¿­ä»£ï¼Œæ‰èƒ½é€‚åº”ç°åœ¨æ—¥æ–°æœˆå¼‚çš„å˜åŒ–ï¼Œåªæƒ³åƒè€æœ¬ï¼Œè¹²åœ¨èˆ’é€‚åŒºåªä¼šå®³äº†è‡ªå·±ï¼Œåˆ°æ—¶å€™æ— è·¯å¯èµ°äº†å†æ¥åæ‚”å°±æ¥ä¸åŠäº†ï¼Œå›å­ä¸ç«‹å±å¢™ä¹‹ä¸‹ï¼</p>
<h3 data-id="heading-3">ã€æ”¶å…¥æ–¹é¢ã€‘</h3>
<p>è¿™ä¸ªæœˆå¥½åƒä¸­è§„ä¸­çŸ©å§ï¼Œèµšçš„æ²¡ä¸Šä¸ªæœˆå¤šï¼Œä½†æ˜¯æ‰£é™¤ç”Ÿæ´»å¼€æ”¯è¿˜æ˜¯èƒ½å­˜ä¸‹æ¥ç‚¹é’±ï¼Œæˆ‘è¿™äººåªè¦æœˆæœ«ä¸æ˜¯è´Ÿæ”¯å‡ºæˆ‘éƒ½å¯ä»¥æ¥å—ã€‚</p>
<ul>
<li>1ï¼šæ—§çš„å‡ ä¸ªå‰¯ä¸šæ”¶ç›Šï¼ˆæ—§çš„æ”¶ç›Šå¼€å§‹ä¸ç¨³å®šäº†ï¼‰</li>
<li>2ï¼šAIç»˜ç”»ç›¸å…³å˜ç°ï¼ˆç›®å‰å¯ä»¥ç¨³å®šæœˆ8000+ï¼‰</li>
</ul>
<p>åæœŸçš„è¯ï¼Œæˆ‘è¿˜è¦å†æé«˜ä¸€äº›AIç»˜ç”»å æ¯”ï¼Œåšäº§å“æ‰‹å†Œ+ç›´æ’­å–è¯¾è¿™ä¸¤ç§å½¢å¼ã€‚</p>
<h3 data-id="heading-4">ã€æŠ€èƒ½æ–¹é¢ã€‘</h3>
<p><strong>1ï¼šè¯¾ç¨‹å½•åˆ¶æ‰“ç£¨</strong></p>
<p>è¿™ä¸ªæœˆæœ€æ ¸å¿ƒçš„è¿˜æ˜¯è¯¾ç¨‹å½•åˆ¶+ä¸Šæ¶çŸ¥è¯†æ­æ¡£+å‘å¸ƒåˆ°è§†é¢‘å·ï¼Œè¿™ç®—æ˜¯æ‰“é€šäº†æˆ‘ä»¬çº¿ä¸Šè¯¾ç¨‹çš„æœ€åä¸€ä¸ªé—¨æ§›ï¼Œè‡ªå·±åšçš„è¯¾ç¨‹ç»ˆäºå¯ä»¥ä¸Šæ¶åˆ°è§†é¢‘å·äº†ï¼Œæ˜å¹´çº¿ä¸Šç›´æ’­ä¸€å®šæ˜¯è¦åšèµ·æ¥çš„ã€‚</p>
<h2 data-id="heading-5">ä¸‰ã€é—®é¢˜</h2>
<p>è¿™ä¸ªæœˆé—®é¢˜æœ‰ç‚¹å¤šï¼Œç»§ç»­ç½—åˆ—ä¸€ä¸‹ï¼š</p>
<p><strong>1ï¼šç¡çœ +å¥èº«</strong></p>
<p>11æœˆè¿™ä¸ªæœˆæ•´ä½“è¿˜å¥½ï¼Œä½†è¿˜æ˜¯å¶å°”æœ‰ç†¬å¤œçš„ä¹ æƒ¯ï¼Œç”Ÿç‰©é’Ÿç›®å‰è¿˜æ˜¯æ™šä¸Šæœ€æœ‰ç²¾ç¥ï¼Œå–œæ¬¢ç†¬å¤œå­¦ä¹ ï¼Œä½†æ˜¯è¿™æ ·å°±ä¼šå¯¼è‡´æ—©ä¸Šèµ·ä¸æ¥ï¼Œå°±é”™è¿‡äº†å»å…¬å›­æ™¨è·‘çš„æœºä¼šï¼Œæ‹–åˆ°æ™šä¸Šæœ‰æ—¶å€™äº‹æƒ…ä¸€å¤šï¼Œæ¯”å¦‚å¼€ä¼šå’Œå¬è¯¾ï¼Œç„¶åå°±åˆæŠ›å¼ƒäº†å¥èº«ã€‚è¿™ä¸ªé—®é¢˜ä¸è§£å†³æ„Ÿè§‰æ˜å¹´ä¼šå‡ºé—®é¢˜ã€‚</p>
<p><strong>2ï¼šäº§å“é—®é¢˜</strong></p>
<p>äº§å“æ‰‹å†Œè™½ç„¶å¼€å§‹æ›´æ–°äº†ï¼Œä½†æ˜¯è¿›åº¦å¥½åƒè¿˜æ˜¯æŒºæ…¢ï¼Œä¸æ˜¯ç¬¬ä¸€ä¼˜å…ˆçº§ï¼Œæ‰€ä»¥å°±æ’åˆ°åé¢å»äº†ï¼Œè¿™ä¸ªæœˆèŠ±æ—¶é—´å»æ•´è‡ªå·±çš„å½•æ’­è§†é¢‘è¯¾ç¨‹å»äº†ï¼Œæƒ³ç€ç›´æ’­çš„æ—¶å€™å–ã€‚</p>
<p>ä¸è¿‡æ¯”ä¸Šä¸ªæœˆå¥½çš„åœ°æ–¹æ˜¯ç»ˆäºå¼€å§‹æŠ½æ—¶é—´åŒæ­¥äº†ï¼Œ12æœˆé€¼è‡ªå·±ä¸€æŠŠï¼Œçœ‹çœ‹å…ƒæ—¦çš„æ—¶å€™å¯ä»¥å®Œæˆã€‚</p>
<h2 data-id="heading-6">å››ã€ä¸‹æœˆè®¡åˆ’</h2>
<p>12æœˆä»½ï¼Œæˆ‘ç½—åˆ—äº†ä¸€ä¸‹é‡è¦çš„è®¡åˆ’ï¼š</p>
<p><strong>1ï¼šæ—©ç¡æ—©èµ·</strong></p>
<p>12æœˆä»½å…ˆå®šä¸€ä¸ªæ—©ç¡æ—©èµ·çš„è®¡åˆ’å§ï¼Œæˆ‘ä¸€ç›´æƒ³æ—©ä¸Šå°±æŠŠè§†é¢‘æ–‡ç« æå®šï¼Œè¿™æ ·ä¸‹åˆå°±å¯ä»¥åšå…¶ä»–çš„äº‹æƒ…ã€‚</p>
<p><strong>2ï¼šä»˜è´¹æ‰‹å†Œä»¥åŠè¯¾ç¨‹æ‰“é€ </strong></p>
<p>ComfyUIæ‰‹å†Œè¿™å—äº‹æƒ…ç»§ç»­æ¨è¿›ï¼Œå¦å¤–è¿˜è¦æ‰“é€ ä¸‹ä¸€äº›åŸºç¡€çš„å½•æ’­è¯¾ç¨‹ï¼Œç„¶åæŒ‚æ©±çª—å–ï¼Œè¿™ä¸ªä¹Ÿæ˜¯è¿‘æœŸä¸€ä¸ªæ¯”è¾ƒé‡è¦çš„äº‹æƒ…ï¼Œ12æœˆæ‰‹å†Œåˆç¨¿è¦æå®šï¼Œå†æ‹–å°±æ²¡æ„æ€äº†ã€‚</p>
<p><strong>3ï¼šè¡¥ç¼ºè¡¥æ¼</strong></p>
<p>ä¸‹ä¸ªæœˆæ‰“ç®—è¡¥ç¼ºè¡¥æ¼ä¸€ä¸‹ï¼Œæœ€è¿‘AIç›¸å…³çš„ä¸œè¥¿å¾ˆå¤šï¼Œæ„Ÿè§‰è‡ªå·±æ¬ ç€å¾ˆå¤šæ²¡åšï¼Œæ¯”å¦‚AIæ™ºèƒ½ä½“ã€AIç¼–ç¨‹ï¼Œè¿™äº›éƒ½ç®—æ˜¯åŸºæœ¬åŠŸï¼Œè¿™æ¬¡12æœˆå°±å½“åšç»™è‡ªå·±å……ç”µäº†ï¼Œåœ¨å®Œæ•´åŸºç¡€çš„å·¥ä½œåï¼ˆç¨¿å­å’Œè§†é¢‘ï¼‰ï¼Œå°±å¼€å§‹åŠªåŠ›å­¦ä¹ å……å……ç”µï¼Œç»™æ˜å¹´æ‰“ä¸‹ä¸€äº›åŸºç¡€ï¼</p>
<h2 data-id="heading-7">äº”ã€æ€»ç»“</h2>
<p>ä¸Šé¢ç®—æ˜¯æˆ‘è¿™ä¸ªæœˆçš„ä¸€äº›é‡è¦äº‹æƒ…çš„æ€»ç»“ï¼Œæˆ‘åˆ†äº«å‡ºæ¥ä¹Ÿæ˜¯ç»™å¤§å®¶å¯ä»¥è¿‘è·ç¦»çœ‹çœ‹ä¸€ä¸ªç¦»èŒçš„ç¨‹åºå‘˜çš„æ—¥å¸¸ï¼Œæœ‰åšçš„ä¸å¥½çš„åœ°æ–¹ä¹Ÿæœ‰åšçš„å¯å–çš„åœ°æ–¹ï¼Œæˆ‘ä¹Ÿæ˜¯ä¸ªæ™®é€šäººï¼Œä¸€ç›´åœ¨å°è¯•å’ŒæŒ£æ‰ï¼Œæˆ‘å†™è¿™ç¯‡æœˆåº¦æ€»ç»“ï¼Œæ˜¯å»ç¿»æˆ‘è¿™ä¸ªæœˆå‘çš„å…¬ä¼—å·æ–‡ç« ï¼Œç„¶åæå–å‡ºæ¥çš„ï¼Œä¸ç„¶æˆ‘æ—©å¿˜è®°äº†ï¼Œä»¥åå¹´åº¦æ€»ç»“ä¹Ÿå¯ä»¥å›çœ‹æœˆåº¦æ€»ç»“ï¼Œä¹Ÿèƒ½æç‚¼ï¼æ‰€ä»¥ï¼Œæˆ‘å†™çš„ä¸œè¥¿åŠ¡å¿…æ˜¯è¦çœŸå®ï¼Œä¸èƒ½è‡ªå·±éª—è‡ªå·±ï¼</p>
<p>æˆ‘æ˜¯å˜Ÿå˜Ÿï¼Œä¸€ä¸ª12å¹´å…¨æ ˆç¨‹åºå‘˜ï¼Œç°åœ¨ç¦»èŒåˆ›ä¸šï¼Œéœ€è¦ä½ çš„ä¸‰è¿~</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è®°ä½è¿™å¼ æ—¶é—´çº¿å›¾ï¼Œä½ å†ä¹Ÿä¸ä¼šä¹±ç”¨ useEffect / useLayoutEffect]]></title>    <link>https://juejin.cn/post/7582809606067208218</link>    <guid>https://juejin.cn/post/7582809606067208218</guid>    <pubDate>2025-12-12T14:27:11.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582809606067208218" data-draft-id="7582815307439079475" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è®°ä½è¿™å¼ æ—¶é—´çº¿å›¾ï¼Œä½ å†ä¹Ÿä¸ä¼šä¹±ç”¨ useEffect / useLayoutEffect"/> <meta itemprop="keywords" content="å‰ç«¯,React.js"/> <meta itemprop="datePublished" content="2025-12-12T14:27:11.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¹Ÿæ— é£é›¨ä¹Ÿé›¾æ™´"/> <meta itemprop="url" content="https://juejin.cn/user/2175258804632332"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è®°ä½è¿™å¼ æ—¶é—´çº¿å›¾ï¼Œä½ å†ä¹Ÿä¸ä¼šä¹±ç”¨ useEffect / useLayoutEffect
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2175258804632332/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¹Ÿæ— é£é›¨ä¹Ÿé›¾æ™´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-12T14:27:11.000Z" title="Fri Dec 12 2025 14:27:11 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">useEffect å’Œ useLayoutEffect çš„åŒºåˆ«ï¼šåˆ«èƒŒå®šä¹‰ï¼ŒæŒ‰â€œä»€ä¹ˆæ—¶å€™ä¸Šå±â€æ¥é€‰</h2>
<p>ä»¥å‰ä¸€ç›´å†™vueï¼Œç°åœ¨å†™reactäº†ï¼Œå†™reactä»£ç çš„æ—¶å€™æœ‰æ—¶å€™ä¼šç¢°åˆ°ä¸€ä¸ªé€‰æ‹©é¢˜ï¼š</p>
<ul>
<li>è¿™ä¸ªå‰¯ä½œç”¨ç”¨ <code>useEffect</code> è¿˜æ˜¯ <code>useLayoutEffect</code>ï¼Ÿ</li>
<li>ä¸ºä»€ä¹ˆæˆ‘ç”¨ <code>useEffect</code> é‡ DOM ä¼šé—ªä¸€ä¸‹ï¼Ÿ</li>
<li>Next.js é‡Œ <code>useLayoutEffect</code> ä¸ºä»€ä¹ˆä¼šç»™æˆ‘ä¸€ä¸ª warningï¼Ÿ</li>
</ul>
<p>è¿™ä¿© Hook çš„å·®åˆ«ï¼Œè¯´ç©¿äº†å°±ä¸€å¥ï¼š<strong>å®ƒä»¬è·‘åœ¨â€œä¸Šå±ï¼ˆpaintï¼‰â€çš„å‰å</strong>ã€‚</p>
<hr/>
<h3 data-id="heading-1">ä¸€å¥è¯ç»“è®ºï¼ˆå…ˆæ‹¿èµ°ï¼‰</h3>
<ul>
<li><strong>é»˜è®¤ç”¨ <code>useEffect</code></strong>ï¼šä¸ä¼šæŒ¡ä½æµè§ˆå™¨ç»˜åˆ¶ã€‚</li>
<li><strong>åªæœ‰åœ¨â€œå¿…é¡»è¯»å¸ƒå±€/å†™å¸ƒå±€ä¸”ä¸èƒ½é—ªâ€çš„æ—¶å€™ç”¨ <code>useLayoutEffect</code></strong>ï¼šå®ƒä¼šåœ¨æµè§ˆå™¨ paint ä¹‹å‰åŒæ­¥æ‰§è¡Œã€‚</li>
</ul>
<p>å¦‚æœä½ è„‘å­é‡Œåªç•™ä¸¤å¥è¯ï¼Œå°±ç•™è¿™ä¸¤å¥ã€‚</p>
<hr/>
<h3 data-id="heading-2">å®ƒä»¬åˆ°åº•å·®åœ¨å“ªï¼šåœ¨æµè§ˆå™¨ paint çš„å‰å</h3>
<p>æŠŠ React DOM çš„ä¸€æ¬¡æ›´æ–°ç²—æš´æ‹†æˆå››æ­¥ï¼Œä½ å°±ä¸ä¼šæ··äº†ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart LR
  A[render è®¡ç®— JSX] --&gt; B[commit å†™å…¥ DOM]
  B --&gt; C[useLayoutEffect åŒæ­¥æ‰§è¡Œ]
  C --&gt; D[æµè§ˆå™¨ paint ä¸Šå±]
  D --&gt; E[useEffect æ‰§è¡Œ]

  classDef info fill:#cce5ff,stroke:#0d6efd,color:#004085
  classDef warning fill:#fff3cd,stroke:#ffc107,color:#856404

  class C warning
  class E info
</code></pre>
<ul>
<li><code>useLayoutEffect</code>ï¼š<strong>DOM å·²ç»å˜äº†ï¼Œä½†è¿˜æ²¡ paint</strong>ã€‚å®ƒä¼šé˜»å¡æœ¬æ¬¡ paintã€‚</li>
<li><code>useEffect</code>ï¼š<strong>é¡µé¢å·²ç» paint äº†</strong>ã€‚å®ƒä¸ä¼šé˜»å¡ä¸Šå±ï¼ˆä½†ä¹Ÿæ„å‘³ç€ä½ åœ¨é‡Œé¢æ”¹å¸ƒå±€å¯èƒ½ä¼šâ€œå…ˆé”™åæ”¹â€ï¼Œè‚‰çœ¼çœ‹åˆ°å°±æ˜¯é—ªï¼‰ã€‚</li>
</ul>
<p>æ³¨æ„æˆ‘åœ¨è¯´çš„æ˜¯â€œcommit åâ€çš„é‚£ä¸ªæ—¶é—´ç‚¹ï¼Œä¸æ˜¯ render é˜¶æ®µã€‚</p>
<hr/>
<h3 data-id="heading-3">ä¸€ä¸ªå¾ˆçœŸå®çš„ä¾‹å­ï¼šæµ‹é‡ DOM å†³å®šä½ç½®ï¼ˆ<code>useEffect</code> ä¼šé—ªï¼‰</h3>
<p>æ¯”å¦‚ä½ åšä¸€ä¸ª Tooltipï¼šåˆå§‹ä¸çŸ¥é“è‡ªå·±å®½é«˜ï¼Œå¾—å…ˆ render å‡ºæ¥ï¼Œç„¶åç”¨ <code>getBoundingClientRect()</code> é‡ä¸€ä¸‹ï¼Œå†æŠŠä½ç½®ä¿®æ­£ã€‚</p>
<p>å¦‚æœä½ ç”¨ <code>useEffect</code>ï¼š</p>
<ul>
<li>ç¬¬ä¸€æ¬¡ paintï¼šTooltip å…ˆç”¨é»˜è®¤ä½ç½®ä¸Šå±</li>
<li>effect é‡Œé‡å®Œ -&gt; setState</li>
<li>ç¬¬äºŒæ¬¡ paintï¼šä½ç½®ä¿®æ­£</li>
</ul>
<p>ç”¨æˆ·çœ‹åˆ°çš„å°±æ˜¯â€œé—ªä¸€ä¸‹â€ã€‚å¦‚æœä½ ç”¨ <code>useLayoutEffect</code>ï¼Œä¿®æ­£å‘ç”Ÿåœ¨ paint ä¹‹å‰ï¼Œç¬¬ä¸€å¸§å°±æ˜¯å¯¹çš„ã€‚</p>
<p>ä¸‹é¢è¿™æ®µä»£ç å¯ä»¥ç›´æ¥åœ¨ React DOM é‡Œè·‘ï¼ˆä¸ºäº†ä¸è¿å Hooks è§„åˆ™ï¼Œæˆ‘å†™æˆä¸¤ä¸ªç»„ä»¶ï¼Œç”¨ checkbox åˆ‡æ¢æ—¶ä¼š remountï¼‰ï¼š</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, { useEffect, useLayoutEffect, useRef, useState } <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;

<span class="hljs-keyword">type</span> <span class="hljs-title class_">TooltipPosition</span> = {
  <span class="hljs-attr">anchorRef</span>: <span class="hljs-title class_">React</span>.<span class="hljs-property">RefObject</span>&lt;<span class="hljs-title class_">HTMLButtonElement</span> | <span class="hljs-literal">null</span>&gt;;
  <span class="hljs-attr">tipRef</span>: <span class="hljs-title class_">React</span>.<span class="hljs-property">RefObject</span>&lt;<span class="hljs-title class_">HTMLDivElement</span> | <span class="hljs-literal">null</span>&gt;;
  <span class="hljs-attr">left</span>: <span class="hljs-built_in">number</span>;
};

<span class="hljs-keyword">function</span> <span class="hljs-title function_">calcLeft</span>(<span class="hljs-params">anchor: HTMLButtonElement, tip: HTMLDivElement</span>) {
  <span class="hljs-keyword">const</span> a = anchor.<span class="hljs-title function_">getBoundingClientRect</span>();
  <span class="hljs-keyword">const</span> t = tip.<span class="hljs-title function_">getBoundingClientRect</span>();
  <span class="hljs-keyword">return</span> <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">round</span>(a.<span class="hljs-property">left</span> + a.<span class="hljs-property">width</span> / <span class="hljs-number">2</span> - t.<span class="hljs-property">width</span> / <span class="hljs-number">2</span>);
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">useTooltipPositionWithEffect</span>(<span class="hljs-params"/>): <span class="hljs-title class_">TooltipPosition</span> {
  <span class="hljs-keyword">const</span> anchorRef = useRef&lt;<span class="hljs-title class_">HTMLButtonElement</span> | <span class="hljs-literal">null</span>&gt;(<span class="hljs-literal">null</span>);
  <span class="hljs-keyword">const</span> tipRef = useRef&lt;<span class="hljs-title class_">HTMLDivElement</span> | <span class="hljs-literal">null</span>&gt;(<span class="hljs-literal">null</span>);
  <span class="hljs-keyword">const</span> [left, setLeft] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);

  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> anchor = anchorRef.<span class="hljs-property">current</span>;
    <span class="hljs-keyword">const</span> tip = tipRef.<span class="hljs-property">current</span>;
    <span class="hljs-keyword">if</span> (!anchor || !tip) <span class="hljs-keyword">return</span>;
    <span class="hljs-title function_">setLeft</span>(<span class="hljs-title function_">calcLeft</span>(anchor, tip));
  }, []);

  <span class="hljs-keyword">return</span> { anchorRef, tipRef, left };
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">useTooltipPositionWithLayoutEffect</span>(<span class="hljs-params"/>): <span class="hljs-title class_">TooltipPosition</span> {
  <span class="hljs-keyword">const</span> anchorRef = useRef&lt;<span class="hljs-title class_">HTMLButtonElement</span> | <span class="hljs-literal">null</span>&gt;(<span class="hljs-literal">null</span>);
  <span class="hljs-keyword">const</span> tipRef = useRef&lt;<span class="hljs-title class_">HTMLDivElement</span> | <span class="hljs-literal">null</span>&gt;(<span class="hljs-literal">null</span>);
  <span class="hljs-keyword">const</span> [left, setLeft] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);

  <span class="hljs-title function_">useLayoutEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> anchor = anchorRef.<span class="hljs-property">current</span>;
    <span class="hljs-keyword">const</span> tip = tipRef.<span class="hljs-property">current</span>;
    <span class="hljs-keyword">if</span> (!anchor || !tip) <span class="hljs-keyword">return</span>;
    <span class="hljs-title function_">setLeft</span>(<span class="hljs-title function_">calcLeft</span>(anchor, tip));
  }, []);

  <span class="hljs-keyword">return</span> { anchorRef, tipRef, left };
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">TooltipFrame</span>(<span class="hljs-params">{ pos }: { pos: TooltipPosition }</span>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">{pos.anchorRef}</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">marginLeft:</span> <span class="hljs-attr">120</span> }}&gt;</span>
        Hover me
      <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>

      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>
        <span class="hljs-attr">ref</span>=<span class="hljs-string">{pos.tipRef}</span>
        <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span>
          <span class="hljs-attr">position:</span> "<span class="hljs-attr">fixed</span>",
          <span class="hljs-attr">top:</span> <span class="hljs-attr">80</span>,
          <span class="hljs-attr">left:</span> <span class="hljs-attr">pos.left</span>,
          <span class="hljs-attr">padding:</span> "<span class="hljs-attr">8px</span> <span class="hljs-attr">10px</span>",
          <span class="hljs-attr">borderRadius:</span> <span class="hljs-attr">8</span>,
          <span class="hljs-attr">background:</span> "#<span class="hljs-attr">111827</span>",
          <span class="hljs-attr">color:</span> "#<span class="hljs-attr">fff</span>",
          <span class="hljs-attr">fontSize:</span> <span class="hljs-attr">12</span>,
          <span class="hljs-attr">whiteSpace:</span> "<span class="hljs-attr">nowrap</span>",
        }}
      &gt;</span>
        I am a tooltip
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/&gt;</span></span>
  );
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">DemoUseEffect</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">TooltipFrame</span> <span class="hljs-attr">pos</span>=<span class="hljs-string">{useTooltipPositionWithEffect()}</span> /&gt;</span></span>;
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">DemoUseLayoutEffect</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">TooltipFrame</span> <span class="hljs-attr">pos</span>=<span class="hljs-string">{useTooltipPositionWithLayoutEffect()}</span> /&gt;</span></span>;
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Demo</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [layout, setLayout] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">padding:</span> <span class="hljs-attr">40</span> }}&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">display:</span> "<span class="hljs-attr">block</span>", <span class="hljs-attr">marginBottom:</span> <span class="hljs-attr">12</span> }}&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">input</span>
          <span class="hljs-attr">type</span>=<span class="hljs-string">"checkbox"</span>
          <span class="hljs-attr">checked</span>=<span class="hljs-string">{layout}</span>
          <span class="hljs-attr">onChange</span>=<span class="hljs-string">{(e)</span> =&gt;</span> setLayout(e.target.checked)}
        /&gt;{" "}
        ç”¨ useLayoutEffectï¼ˆå‹¾ä¸Šåæ›´ä¸å®¹æ˜“é—ªï¼‰
      <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>

      {layout ? <span class="hljs-tag">&lt;<span class="hljs-name">DemoUseLayoutEffect</span> /&gt;</span> : <span class="hljs-tag">&lt;<span class="hljs-name">DemoUseEffect</span> /&gt;</span>}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<p>çœŸå®é¡¹ç›®é‡Œä½ å¯èƒ½è¿˜ä¼šå¤„ç† <code>resize</code>ã€å†…å®¹å˜åŒ–ï¼ˆ<code>ResizeObserver</code>ï¼‰ã€å­—ä½“åŠ è½½å¯¼è‡´çš„å®½åº¦å˜åŒ–ç­‰ï¼›ä½†å¯¹ç†è§£è¿™ä¸¤ä¸ª Hook çš„å·®åˆ«ï¼Œä¸Šé¢è¿™ä¸ªä¾‹å­å¤Ÿç”¨äº†ã€‚</p>
<hr/>
<h3 data-id="heading-4">æ€ä¹ˆé€‰ï¼šæˆ‘è‡ªå·±ç”¨çš„â€œå†³ç­–å£è¯€â€</h3>
<h4 data-id="heading-5">1ï¼‰åªè¦ä¸è¯»/å†™å¸ƒå±€ï¼Œå°±ç”¨ <code>useEffect</code></h4>
<p>å…¸å‹åœºæ™¯ï¼š</p>
<ul>
<li>è¯·æ±‚æ•°æ®ã€ä¸ŠæŠ¥åŸ‹ç‚¹</li>
<li>è®¢é˜…/å–æ¶ˆè®¢é˜…ï¼ˆWebSocketã€EventEmitterï¼‰</li>
<li><code>document.title</code>ã€<code>localStorage</code> åŒæ­¥</li>
<li>ç»™ window/document ç»‘äº‹ä»¶</li>
</ul>
<p>è¿™äº›ä¸œè¥¿ä¸éœ€è¦å¡åœ¨ paint ä¹‹å‰å®Œæˆï¼Œ<code>useEffect</code> æ›´åˆé€‚ã€‚</p>
<h4 data-id="heading-6">2ï¼‰ä½ è¦è¯»å¸ƒå±€ï¼ˆlayout readï¼‰å¹¶ä¸”ä¼šå½±å“ç¬¬ä¸€å¸§æ¸²æŸ“ï¼Œå°±ç”¨ <code>useLayoutEffect</code></h4>
<p>å…¸å‹åœºæ™¯ï¼š</p>
<ul>
<li><code>getBoundingClientRect()</code> / <code>offsetWidth</code> / <code>scrollHeight</code> è¿™ç§</li>
<li>è®¡ç®—åˆå§‹æ»šåŠ¨ä½ç½®ã€åŒæ­¥æ»šåŠ¨</li>
<li>éœ€è¦é¿å…è§†è§‰æŠ–åŠ¨çš„â€œæµ‹é‡ -&gt; setStateâ€</li>
<li>focus / selectionï¼ˆè¾“å…¥æ¡†èšç„¦ã€å…‰æ ‡å®šä½ï¼‰å¯¹é¦–å¸§ä½“éªŒæ•æ„Ÿ</li>
</ul>
<p>ä¸€å¥è¯ï¼š<strong>â€œä¸æƒ³è®©ç”¨æˆ·çœ‹åˆ°ä¸­é—´æ€â€</strong>ã€‚</p>
<h4 data-id="heading-7">3ï¼‰åˆ«åœ¨ <code>useLayoutEffect</code> é‡Œå¹²é‡æ´»</h4>
<p>å› ä¸ºå®ƒä¼šé˜»å¡ paintï¼š</p>
<ul>
<li>ä½ åœ¨é‡Œé¢åšé‡è®¡ç®—ï¼Œé¡µé¢å°±æ‰å¸§</li>
<li>ä½ åœ¨é‡Œé¢é¢‘ç¹ setStateï¼Œå¯èƒ½æ”¾å¤§å¡é¡¿</li>
</ul>
<p>å¦‚æœä½ åªæ˜¯â€œæƒ³æ—©ç‚¹è·‘ä¸€ä¸‹â€ï¼Œä½†å¹¶ä¸ä¾èµ–å¸ƒå±€ï¼Œåˆ«ç”¨å®ƒã€‚</p>
<hr/>
<h3 data-id="heading-8">Next.js / SSR é‡Œé‚£ä¸ª warning æ€ä¹ˆå›äº‹</h3>
<p>åœ¨æœåŠ¡ç«¯æ¸²æŸ“ï¼ˆSSRï¼‰æ—¶ï¼š</p>
<ul>
<li><code>useEffect</code> æœ¬æ¥å°±ä¸ä¼šæ‰§è¡Œï¼ˆå®ƒåªåœ¨æµè§ˆå™¨è·‘ï¼‰</li>
<li><code>useLayoutEffect</code> ä¹Ÿä¸ä¼šæ‰§è¡Œï¼Œä½† React ä¼šæç¤ºä½ ï¼šå®ƒåœ¨æœåŠ¡ç«¯æ²¡æ„ä¹‰ï¼Œå¯èƒ½å¯¼è‡´ä½ å†™å‡ºâ€œä¾èµ–å¸ƒå±€ä½† SSR ä¸å­˜åœ¨å¸ƒå±€â€çš„ä»£ç </li>
</ul>
<p>å¦‚æœä½ å†™çš„æ˜¯â€œæµè§ˆå™¨æ‰æœ‰æ„ä¹‰çš„ layout effectâ€ï¼Œåˆä¸æƒ³çœ‹åˆ° warningï¼Œå¸¸è§åšæ³•æ˜¯åŒ…ä¸€å±‚ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">import</span> { useEffect, useLayoutEffect } <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> useIsomorphicLayoutEffect =
  <span class="hljs-keyword">typeof</span> <span class="hljs-variable language_">window</span> !== <span class="hljs-string">"undefined"</span> ? useLayoutEffect : useEffect;
</code></pre>
<p>ç„¶åæŠŠéœ€è¦ layout çš„åœ°æ–¹ç”¨ <code>useIsomorphicLayoutEffect</code>ã€‚</p>
<hr/>
<h3 data-id="heading-9">å®¹æ˜“è¸©çš„å‘ï¼ˆé¡ºæ‰‹è¯´ä¸¤å¥ï¼‰</h3>
<ul>
<li><strong>Strict Mode ä¸‹ effect ä¼šåœ¨å¼€å‘ç¯å¢ƒé¢å¤–æ‰§è¡Œä¸€æ¬¡</strong>ï¼š<code>useEffect</code> å’Œ <code>useLayoutEffect</code> éƒ½ä¸€æ ·ï¼Œåˆ«æ‹¿è¿™ä¸ªç°è±¡åˆ¤æ–­çº¿ä¸Šè¡Œä¸ºã€‚</li>
<li><strong>â€œæˆ‘åœ¨ <code>useEffect</code> é‡Œ setState ä¸ºä»€ä¹ˆä¼šé—ªï¼Ÿâ€</strong>ï¼šå› ä¸ºä½ æ”¹çš„æ˜¯å¸ƒå±€ç›¸å…³å†…å®¹ï¼Œç¬¬ä¸€å¸§å·²ç» paint äº†ã€‚</li>
<li><strong>ä¸è¦æŠŠæ•°æ®è¯·æ±‚å¡è¿› <code>useLayoutEffect</code></strong>ï¼šå®ƒæ—¢ä¸éœ€è¦ paint å‰å®Œæˆï¼Œè¿˜å¯èƒ½æ‹–æ…¢ä¸Šå±ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-10">ç®€å•æ€»ç»“ä¸€ä¸‹</h3>
<ul>
<li><code>useEffect</code>ï¼šå¤§å¤šæ•°å‰¯ä½œç”¨çš„é»˜è®¤é€‰æ‹©ã€‚</li>
<li><code>useLayoutEffect</code>ï¼šåªåœ¨â€œå¿…é¡»å¡åœ¨ paint å‰è§£å†³â€çš„é‚£ä¸€å°æ’®åœºæ™¯é‡Œç”¨ã€‚</li>
</ul>
<p>çœŸè¦è¯´åŒºåˆ«ï¼Œå…¶å®å°±æ˜¯ä¸€å¥ï¼š<strong>ä½ æ„¿ä¸æ„¿æ„ä¸ºäº†â€œç¬¬ä¸€å¸§æ­£ç¡®â€å»æŒ¡ä½ paint</strong>ã€‚</p>
<hr/>
<p>å¦‚æœä½ è§‰å¾—è¿™ç¯‡æ–‡ç« æœ‰å¸®åŠ©ï¼Œæ¬¢è¿å…³æ³¨æˆ‘çš„ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftt-a1i" target="_blank" title="https://github.com/tt-a1i" ref="nofollow noopener noreferrer">GitHub</a>ï¼Œä¸‹é¢æ˜¯æˆ‘çš„ä¸€äº›å¼€æºé¡¹ç›®ï¼š</p>
<p><strong>Claude Code Skills</strong>ï¼ˆæŒ‰éœ€åŠ è½½ï¼Œæ„å›¾è‡ªåŠ¨è¯†åˆ«ï¼Œä¸æµªè´¹ tokenï¼Œ<a href="https://juejin.cn/post/7578714735307735066" target="_blank" title="https://juejin.cn/post/7578714735307735066">ä»‹ç»æ–‡ç« </a>ï¼‰ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftt-a1i%2Fcode-review-skill" target="_blank" title="https://github.com/tt-a1i/code-review-skill" ref="nofollow noopener noreferrer">code-review-skill</a> - ä»£ç å®¡æŸ¥æŠ€èƒ½ï¼Œè¦†ç›– React 19ã€Vue 3ã€TypeScriptã€Rust ç­‰çº¦ 9000 è¡Œè§„åˆ™ï¼ˆ<a href="https://juejin.cn/post/7578709098255908902" target="_blank" title="https://juejin.cn/post/7578709098255908902">è¯¦ç»†ä»‹ç»</a>ï¼‰</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftt-a1i%2F5-whys-skill" target="_blank" title="https://github.com/tt-a1i/5-whys-skill" ref="nofollow noopener noreferrer">5-whys-skill</a> - 5 Whys æ ¹å› åˆ†æï¼Œè¯´"æ‰¾æ ¹å› "è‡ªåŠ¨æ¿€æ´»</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftt-a1i%2Ffirst-principles-skill" target="_blank" title="https://github.com/tt-a1i/first-principles-skill" ref="nofollow noopener noreferrer">first-principles-skill</a> - ç¬¬ä¸€æ€§åŸç†æ€è€ƒï¼Œé€‚åˆæ¶æ„è®¾è®¡å’ŒæŠ€æœ¯é€‰å‹</li>
</ul>
<p><strong>å…¨æ ˆé¡¹ç›®</strong>ï¼ˆé€‚åˆå­¦ä¹ ç°ä»£æŠ€æœ¯æ ˆï¼‰ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftt-a1i%2Fprompt-vault" target="_blank" title="https://github.com/tt-a1i/prompt-vault" ref="nofollow noopener noreferrer">prompt-vault</a> - Prompt ç®¡ç†å™¨ï¼ŒNext.js 15 + React 19 + tRPC 11 + Supabase å…¨æ ˆç¤ºä¾‹ï¼Œclone ä¸‹æ¥é…ä¸ªå…è´¹ Supabase å°±èƒ½è·‘</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftt-a1i%2Fchat_edit" target="_blank" title="https://github.com/tt-a1i/chat_edit" ref="nofollow noopener noreferrer">chat_edit</a> - åŒæ¨¡å¼ AI åº”ç”¨ï¼ˆèŠå¤©+å¯Œæ–‡æœ¬ç¼–è¾‘ï¼‰ï¼ŒVue 3.5 + TypeScript + Vite 5 + Quill 2.0 + IndexedDB</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[GDAL è¯»å–KMLæ•°æ®]]></title>    <link>https://juejin.cn/post/7582769411994566708</link>    <guid>https://juejin.cn/post/7582769411994566708</guid>    <pubDate>2025-12-12T14:52:39.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582769411994566708" data-draft-id="7582779306731438115" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="GDAL è¯»å–KMLæ•°æ®"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-12T14:52:39.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="GISä¹‹è·¯"/> <meta itemprop="url" content="https://juejin.cn/user/4346787284915481"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            GDAL è¯»å–KMLæ•°æ®
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4346787284915481/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    GISä¹‹è·¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-12T14:52:39.000Z" title="Fri Dec 12 2025 14:52:39 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<blockquote>
<p>â</p>
<p><code>KML</code>æ˜¯ä¸€ç§åŸºäº<code>XML</code>çš„åœ°ç†æ•°æ®æ ¼å¼ï¼Œæœ€åˆæœ‰<code>Keyhole</code>å…¬å¸å¼€å‘ï¼Œåæ¥è¢«<code>Google</code>é‡‡ç”¨å¹¶æˆä¸º<code>OGC</code>æ ‡å‡†ã€‚åœ¨<code>GIS</code>å¼€å‘ä¸­ï¼Œå±äºä¸€ç§é‡è¦çš„æ•°æ®æ ¼å¼ï¼Œä½¿ç”¨<code>GDAL</code>è¯»å–<code>KML</code>æ•°æ®ï¼Œæœ‰åŠ©äºè®¤è¯†ã€äº†è§£<code>KML</code>æ•°æ®ç»“æ„ä¸ç‰¹ç‚¹ï¼Œä»è€Œæé«˜å¼€å‘æ•ˆç‡ã€‚</p>
</blockquote>
<p>æœ¬ç¯‡æ•™ç¨‹åœ¨ä¹‹å‰ä¸€ç³»åˆ—æ–‡ç« çš„åŸºç¡€ä¸Šè®²è§£</p>
<ul>
<li>GDAL ç®€ä»‹[1]</li>
<li>GDAL ä¸‹è½½å®‰è£…[2]</li>
<li>GDAL å¼€å‘èµ·æ­¥[3]</li>
</ul>
<p>å¦‚æœä½ è¿˜æ²¡æœ‰çœ‹è¿‡ï¼Œå»ºè®®ä»ä»¥ä¸Šå†…å®¹å¼€å§‹ã€‚</p>
<h2 data-id="heading-1">1. å¼€å‘ç¯å¢ƒ</h2>
<p>æœ¬æ–‡ä½¿ç”¨å¦‚ä¸‹å¼€å‘ç¯å¢ƒï¼Œä»¥ä¾›å‚è€ƒã€‚</p>
<p>æ—¶é—´ï¼š<code>2025å¹´</code></p>
<p>ç³»ç»Ÿï¼š<code>Windows 11</code></p>
<p>Pythonï¼š<code>3.11.7</code></p>
<p>GDALï¼š<code>3.11.1</code></p>
<h2 data-id="heading-2">2. å¯¼å…¥ä¾èµ–</h2>
<p><code>KML</code>ä½œä¸ºä¸€ç§çŸ¢é‡æ•°æ®æ ¼å¼ï¼Œå¯ä»¥ä½¿ç”¨<code>GDAL</code>ç›´æ¥è¯»å–æˆ–è€…ä½¿ç”¨å…¶çŸ¢é‡åº“<code>OGR</code>è¿›è¡Œå¤„ç†ï¼Œä»¥å®ç°<code>KML</code>å›¾å±‚å’Œå±æ€§æ•°æ®è¯»å–ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">from</span>Â osgeoÂ <span class="hljs-keyword">import</span>Â ogr,gdal
<span class="hljs-keyword">import</span>Â os
</code></pre>
<h2 data-id="heading-3">3. è¯»å–KMLæ•°æ®</h2>
<p><strong>ï¼ˆä¸€ï¼‰ä½¿ç”¨<code>GDAL</code>è¯»å–</strong></p>
<p>å®šä¹‰ä¸€ä¸ªæ–¹æ³•<code>ReadKMLOfGDAL(kmlPath)</code>ç”¨äºè¯»å–<code>KML</code>æ•°æ®ï¼Œå…¶ä¸­<code>kmlPath</code>ä¸ºæ•°æ®è·¯å¾„ã€‚åœ¨è¯»å–<code>KML</code>æ•°æ®ä¹‹å‰ï¼Œéœ€è¦æ£€æŸ¥æ•°æ®è·¯å¾„æ˜¯å¦å­˜åœ¨ã€‚</p>
<pre><code class="hljs language-lua" lang="lua">#Â æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨
<span class="hljs-keyword">if</span>Â <span class="hljs-built_in">os</span>.<span class="hljs-built_in">path</span>.exists(kmlPath):
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"æ–‡ä»¶å­˜åœ¨"</span>)
<span class="hljs-keyword">else</span>:
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"æ–‡ä»¶ä¸å­˜åœ¨ï¼Œè¯·é‡æ–°é€‰æ‹©æ–‡ä»¶ï¼"</span>)
Â Â Â Â <span class="hljs-keyword">return</span>
</code></pre>
<p>è‹¥<code>KML</code>æ•°æ®è·¯å¾„æ­£ç¡®ï¼Œåˆ™å¯ä»¥ä½¿ç”¨<code>OpenEx</code>æ–¹æ³•æ‰“å¼€<code>KML</code>æ–‡ä»¶ã€‚éœ€è¦åˆ¤æ–­<code>KML</code>æ•°æ®é›†æ˜¯å¦æ­£å¸¸ï¼Œè‹¥æ— æ³•æ‰“å¼€ï¼Œåˆ™é€€å‡ºæ•°æ®è¯»å–ç¨‹åºã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment">#Â æ‰“å¼€KMLæ–‡ä»¶</span>
datasetÂ =Â gdal.OpenEx(kmlPath)
<span class="hljs-keyword">if</span>Â datasetÂ <span class="hljs-keyword">is</span>Â <span class="hljs-literal">None</span>:
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"KMLÂ æ–‡ä»¶æ‰“å¼€å¼‚å¸¸ï¼Œè¯·æ£€æŸ¥æ–‡ä»¶è·¯å¾„ï¼"</span>)
Â Â Â Â <span class="hljs-keyword">return</span>
</code></pre>
<p>é€šè¿‡æ•°æ®é›†æ–¹æ³•<code>GetLayerCount</code>å¯ä»¥è·å–å›¾å±‚æ•°é‡ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment">#Â è·å–å›¾å±‚æ•°é‡</span>
layerCountÂ =Â dataset.GetLayerCount()
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"å›¾å±‚æ•°é‡ï¼š<span class="hljs-subst">{layerCount}</span>"</span>)
</code></pre>
<p>å›¾å±‚æ•°é‡ä¿¡æ¯æ˜¾ç¤ºå¦‚ä¸‹ï¼š<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ba68d25e5e904336a5c576e6babeec7b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766155959&amp;x-signature=u6TmSU1a0P2afFiTQZEOyvh1eI4%3D" alt="" loading="lazy"/></p>
<p>ä¹‹åé€šè¿‡éå†å›¾å±‚è·å–å›¾å±‚å­—æ®µæ•°é‡ã€å­—æ®µåç§°ä»¥åŠå­—æ®µç±»å‹ç­‰ä¿¡æ¯ï¼Œåœ¨è¾“å‡ºç»“æœä¸­è¯»å–è¦ç´ å±æ€§ä¿¡æ¯å’Œå‡ ä½•å¯¹è±¡å¹¶é™åˆ¶è¦ç´ è¾“å‡ºæ•°é‡ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment">#Â éå†å›¾å±‚</span>
<span class="hljs-keyword">for</span>Â iÂ <span class="hljs-keyword">in</span>Â <span class="hljs-built_in">range</span>(layerCount):
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"################å¼€å§‹æ‰“å°ç¬¬ã€<span class="hljs-subst">{i+<span class="hljs-number">1</span>}</span>ã€‘ä¸ªå›¾å±‚################n"</span>)
Â Â Â Â <span class="hljs-comment">#Â æ ¹æ®ç´¢å¼•è·å–ç›®æ ‡å›¾å±‚</span>
Â Â Â Â layerÂ =Â dataset.GetLayerByIndex(i)
Â Â Â Â <span class="hljs-comment">#Â è·å–å›¾å±‚åç§°</span>
Â Â Â Â layerNameÂ =Â layer.GetName()
Â Â Â Â <span class="hljs-comment">#Â è·å–å›¾å±‚è¦ç´ æ•°é‡</span>
Â Â Â Â layerFeatureCountÂ =Â layer.GetFeatureCount()

Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å›¾å±‚åç§°ï¼š<span class="hljs-subst">{layerName}</span>"</span>)
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"è¦ç´ æ•°é‡ï¼š<span class="hljs-subst">{layerFeatureCount}</span>"</span>)

Â Â Â Â <span class="hljs-comment">#Â è·å–å›¾å±‚å±æ€§</span>
Â Â Â Â layerPropertyÂ =Â layer.GetLayerDefn()
Â Â Â Â <span class="hljs-comment">#Â è·å–å›¾å±‚å­—æ®µæ•°é‡</span>
Â Â Â Â fieldCountÂ =Â layerProperty.GetFieldCount()
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å­—æ®µæ•°é‡ï¼š<span class="hljs-subst">{fieldCount}</span>"</span>)

Â Â Â Â <span class="hljs-comment">#Â è·å–å­—æ®µä¿¡æ¯</span>
Â Â Â Â <span class="hljs-keyword">for</span>Â jÂ <span class="hljs-keyword">in</span>Â <span class="hljs-built_in">range</span>(fieldCount):
Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â è·å–å­—æ®µå±æ€§å¯¹è±¡</span>
Â Â Â Â Â Â Â Â fieldPropertyÂ =Â layerProperty.GetFieldDefn(j)
Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â è·å–å­—æ®µå±æ€§åç§°</span>
Â Â Â Â Â Â Â Â fieldNameÂ =Â fieldProperty.GetName()
Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â è·å–å­—æ®µå±æ€§ç±»å‹</span>
Â Â Â Â Â Â Â Â fieldTypeÂ =Â fieldProperty.GetTypeName()

Â Â Â Â Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ç¬¬Â ã€<span class="hljs-subst">{j}</span>ã€‘Â ä¸ªå­—æ®µåç§°ï¼š<span class="hljs-subst">{fieldName}</span>ï¼Œå­—æ®µç±»å‹ï¼š<span class="hljs-subst">{fieldType}</span>"</span>)

Â Â Â Â <span class="hljs-comment">#Â è·å–è¦ç´ </span>
Â Â Â Â featureÂ =Â layer.GetNextFeature()
Â Â Â Â limitCountÂ =Â <span class="hljs-number">0</span>

Â Â Â Â <span class="hljs-comment">#Â é™åˆ¶æ‰“å°å‰åä¸ªè¦ç´ </span>
Â Â Â Â <span class="hljs-keyword">while</span>Â featureÂ <span class="hljs-keyword">and</span>Â limitCountÂ &lt;Â <span class="hljs-number">10</span>:
Â Â Â Â Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ‰“å°ç¬¬ã€<span class="hljs-subst">{limitCount+<span class="hljs-number">1</span>}</span>ã€‘ä¸ªè¦ç´ "</span>)
Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â print(f"æ‰“å°è¦ç´ ç±»å‹ï¼š{type(feature)},{feature}")</span>

Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â è¯»å–è¦ç´ å±æ€§</span>
Â Â Â Â Â Â Â Â <span class="hljs-keyword">for</span>Â kÂ <span class="hljs-keyword">in</span>Â <span class="hljs-built_in">range</span>(fieldCount):
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â å±æ€§å­—æ®µå</span>
Â Â Â Â Â Â Â Â Â Â Â Â fieldNameÂ =Â layerProperty.GetFieldDefn(j).GetName()
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â å±æ€§å­—æ®µå€¼</span>
Â Â Â Â Â Â Â Â Â Â Â Â fieldValueÂ =Â feature.GetField(k)
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â fieldValueÂ =Â feature.GetField(fieldName)</span>

Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ç¬¬Â ã€<span class="hljs-subst">{k}</span>ã€‘Â ä¸ªå­—æ®µåï¼š<span class="hljs-subst">{fieldName}</span>ï¼Œå­—æ®µå€¼ï¼š<span class="hljs-subst">{fieldValue}</span>"</span>)

Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â è¯»å–å‡ ä½•å±æ€§</span>
Â Â Â Â Â Â Â Â geomÂ =Â feature.GetGeometryRef()
Â Â Â Â Â Â Â Â <span class="hljs-keyword">if</span>Â geom:
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â è·å–å‡ ä½•ç±»å‹</span>
Â Â Â Â Â Â Â Â Â Â Â Â geomTypeÂ =Â geom.GetGeometryName()
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â è·å–WKTæ ¼å¼å‡ ä½•å¯¹è±¡ï¼Œæ‰“å°å‰100ä¸ªå­—ç¬¦</span>
Â Â Â Â Â Â Â Â Â Â Â Â geomWKTÂ =Â geom.ExportToWkt()[:<span class="hljs-number">100</span>]

Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ç¬¬Â ã€<span class="hljs-subst">{limitCount}</span>ã€‘Â ä¸ªå‡ ä½•å¯¹è±¡ç±»å‹ï¼š<span class="hljs-subst">{geomType}</span>ï¼Œå‡ ä½•å¯¹è±¡ï¼š<span class="hljs-subst">{geomWKT}</span>"</span>)

Â Â Â Â Â Â Â Â featureÂ =Â layer.GetNextFeature()
Â Â Â Â Â Â Â Â limitCountÂ +=Â <span class="hljs-number">1</span>

Â Â Â Â <span class="hljs-comment">#Â é‡ç½®è¯»å–ä½ç½®</span>
Â Â Â Â layer.ResetReading()

Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"n################ç»“æŸæ‰“å°ç¬¬ã€<span class="hljs-subst">{i+<span class="hljs-number">1</span>}</span>ã€‘ä¸ªå›¾å±‚################n"</span>)
</code></pre>
<p>å›¾å±‚è¦ç´ å±æ€§ä¿¡æ¯æ˜¾ç¤ºå¦‚ä¸‹ï¼š<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7e46dba074d04ef0a88e738a3c755547~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766155959&amp;x-signature=eMLItKdm9UTiMXVwwBWorBD08Ao%3D" alt="" loading="lazy"/></p>
<p><strong>ï¼ˆäºŒï¼‰ä½¿ç”¨<code>OGR</code>è¯»å–</strong></p>
<p>å®šä¹‰ä¸€ä¸ªæ–¹æ³•<code>ReadKMLOfOGR(kmlPath)</code>ç”¨äºè¯»å–<code>KML</code>æ•°æ®ï¼Œå…¶ä¸­<code>kmlPath</code>ä¸ºæ•°æ®è·¯å¾„ã€‚åœ¨è¯»å–<code>KML</code>æ•°æ®ä¹‹å‰ï¼Œéœ€è¦æ£€æŸ¥æ•°æ®è·¯å¾„æ˜¯å¦å­˜åœ¨ã€‚</p>
<pre><code class="hljs language-lua" lang="lua">#Â æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨
<span class="hljs-keyword">if</span>Â <span class="hljs-built_in">os</span>.<span class="hljs-built_in">path</span>.exists(kmlPath):
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"æ–‡ä»¶å­˜åœ¨"</span>)
<span class="hljs-keyword">else</span>:
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"æ–‡ä»¶ä¸å­˜åœ¨ï¼Œè¯·é‡æ–°é€‰æ‹©æ–‡ä»¶ï¼"</span>)
Â Â Â Â <span class="hljs-keyword">return</span>
</code></pre>
<p>è‹¥<code>KML</code>æ•°æ®è·¯å¾„æ­£ç¡®ï¼Œåˆ™å¯ä»¥æ³¨å†Œ<code>KML</code>æ•°æ®é©±åŠ¨ç”¨äºè¯»å–<code>KML</code>æ•°æ®ï¼Œå¦‚ä½¿ç”¨<code>RegisterAll</code>æ–¹æ³•æ³¨å†Œæ‰€æœ‰çŸ¢é‡é©±åŠ¨ã€‚ç„¶åè°ƒç”¨<code>ogr</code>å¯¹è±¡<code>Open</code>æ–¹æ³•æ‰“å¼€<code>KML</code>æ•°æ®æºï¼Œè‹¥å…¶ä¸å­˜åœ¨ï¼Œåˆ™é€€å‡ºæ•°æ®è¯»å–ç¨‹åºã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment">#Â æ³¨å†Œæ‰€æœ‰é©±åŠ¨</span>
ogr.RegisterAll()

<span class="hljs-comment">#Â æ‰“å¼€KMLæ•°æ®æº</span>
dataSourceÂ =Â ogr.Open(kmlPath)

<span class="hljs-comment">#Â æ£€æŸ¥æ•°æ®æºæ˜¯å¦æ­£å¸¸</span>
<span class="hljs-keyword">if</span>Â dataSourceÂ <span class="hljs-keyword">is</span>Â <span class="hljs-literal">None</span>:
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"æ–‡ä»¶æ‰“å¼€å‡ºé”™ï¼Œè¯·é‡æ–°é€‰æ‹©æ–‡ä»¶ï¼"</span>)
Â Â Â Â <span class="hljs-keyword">return</span>
</code></pre>
<p>ä¹‹åé€šè¿‡éå†å›¾å±‚è·å–å›¾å±‚ç©ºé—´å‚è€ƒã€å­—æ®µåç§°ä»¥åŠå­—æ®µç±»å‹ç­‰ä¿¡æ¯ï¼Œåœ¨è¾“å‡ºç»“æœä¸­è¯»å–è¦ç´ å±æ€§ä¿¡æ¯ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment">#Â éå†å›¾å±‚</span>
<span class="hljs-keyword">for</span>Â iÂ <span class="hljs-keyword">in</span>Â <span class="hljs-built_in">range</span>(dataSource.GetLayerCount()):
Â Â Â Â <span class="hljs-comment">#Â æ ¹æ®ç´¢å¼•è·å–ç›®æ ‡å›¾å±‚</span>
Â Â Â Â layerÂ =Â dataSource.GetLayer(i)
Â Â Â Â <span class="hljs-comment">#Â è·å–å›¾å±‚åç§°</span>
Â Â Â Â layerNameÂ =Â layer.GetName()
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ç¬¬ã€<span class="hljs-subst">{i}</span>ã€‘ä¸ªå›¾å±‚åç§°ï¼š<span class="hljs-subst">{layerName}</span>"</span>)

Â Â Â Â <span class="hljs-comment">#Â è·å–ç©ºé—´å‚è€ƒ</span>
Â Â Â Â spatialReferenceÂ =Â layer.GetSpatialRef()
Â Â Â Â <span class="hljs-keyword">if</span>Â spatialReference:
Â Â Â Â Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ç©ºé—´å‚è€ƒï¼š<span class="hljs-subst">{spatialReference.GetName()}</span>"</span>)
Â Â Â Â <span class="hljs-keyword">else</span>:
Â Â Â Â Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å›¾å±‚ã€<span class="hljs-subst">{layerName}</span>ã€‘ç©ºé—´å‚è€ƒä¸å­˜åœ¨"</span>)

Â Â Â Â <span class="hljs-comment">#Â è¯»å–å‡ ä½•å±æ€§</span>
Â Â Â Â <span class="hljs-keyword">for</span>Â featureÂ <span class="hljs-keyword">in</span>Â layer:
Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â è¯»å–å‡ ä½•å±æ€§</span>
Â Â Â Â Â Â Â Â geomÂ =Â feature.GetGeometryRef()
Â Â Â Â Â Â Â Â <span class="hljs-keyword">if</span>Â geom:
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â è·å–å››è‡³èŒƒå›´</span>
Â Â Â Â Â Â Â Â Â Â Â Â envelopeÂ =Â geom.GetEnvelope()
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å‡ ä½•èŒƒå›´ï¼š<span class="hljs-subst">{envelope}</span>"</span>)

Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â è¯»å–è¦ç´ å±æ€§</span>
Â Â Â Â Â Â Â Â <span class="hljs-keyword">for</span>Â fieldÂ <span class="hljs-keyword">in</span>Â feature.keys():
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â è·å–å±æ€§å­—æ®µå€¼</span>
Â Â Â Â Â Â Â Â Â Â Â Â fieldValueÂ =Â feature.GetField(field)
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å±æ€§å­—æ®µåç§°ï¼š<span class="hljs-subst">{field}</span>ï¼Œå±æ€§å­—æ®µå€¼ï¼š<span class="hljs-subst">{fieldValue}</span>"</span>)

<span class="hljs-comment">#Â å…³é—­æ•°æ®æº</span>
dataSourceÂ =Â <span class="hljs-literal">None</span>Â Â Â Â Â Â Â Â 
</code></pre>
<p>å›¾å±‚è¦ç´ å±æ€§ä¿¡æ¯æ˜¾ç¤ºå¦‚ä¸‹ï¼š<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7f4d1e4d484d4006ae43aa4db5c47888~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766155959&amp;x-signature=dJqwUN8Tj2aqHvr5plMx1JWlUNw%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-4">4. æ³¨æ„äº‹é¡¹</h2>
<p><strong>æ³¨1ï¼šæ•°æ®è·¯å¾„è¯»å–å¼‚å¸¸</strong></p>
<p>åœ¨windowsç³»ç»Ÿä¸­å»ºè®®ä½¿ç”¨"<strong>\</strong>"å®šä¹‰æ•°æ®è·¯å¾„ã€‚</p>
<p><strong>æ³¨2ï¼šä¸­æ–‡æ•°æ®è¯»å–å¼‚å¸¸ï¼ˆä¸­æ–‡ä¹±ç ï¼‰</strong></p>
<p>åœ¨<code>GIS</code>å¼€å‘ä¸­ï¼Œæ¶‰åŠå±æ€§æ•°æ®è¯»å–æ—¶ç»å¸¸ä¼šé‡åˆ°ä¸­æ–‡ä¹±ç é—®é¢˜ï¼Œéœ€è¦æ ¹æ®å›¾å±‚ç¼–ç è®¾ç½®æ­£ç¡®çš„å­—ç¬¦é›†ã€‚</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment">#Â è®¾ç½®Shapefileçš„ç¼–ç ä¸ºGBK</span>
os.environ[<span class="hljs-string">'SHAPE_ENCODING'</span>]Â =Â <span class="hljs-string">"GBK"</span>
</code></pre>
<p><strong>æ³¨3ï¼šä»£ç è¿è¡Œå¼‚å¸¸</strong></p>
<p>éœ€è¦å¼€å¯ä»£ç å¼‚å¸¸å¤„ç†</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment">#Â å¯ç”¨å¼‚å¸¸å¤„ç†ï¼ˆæ¨èï¼‰</span>
ogr.UseExceptions()
</code></pre>
<p><strong>æ³¨4ï¼šåæ ‡è¯»å–å¼‚å¸¸</strong></p>
<p>åœ¨è¯»å–åæ ‡å‚è€ƒæ—¶æŠ¥é”™å·²å®‰è£…PostgreSQLæ•°æ®åº“ä¸­çš„æŠ•å½±æ–‡ä»¶ç‰ˆæœ¬ä¸GDALä¸­çš„æŠ•å½±æ–‡ä»¶ä¸å…¼å®¹ï¼Œæ­¤æ—¶éœ€è¦ä¸ºGDALå•ç‹¬æŒ‡å®šæŠ•å½±æ–‡ä»¶ï¼Œåœ¨ä»£ç å¼€å¤´æ·»åŠ ä»¥ä¸‹ä»£ç æŒ‡å®šç›®æ ‡æŠ•å½±æ–‡ä»¶è·¯å¾„ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment">#Â æ‰¾åˆ°projæ–‡ä»¶è·¯å¾„</span>
os.environ[<span class="hljs-string">'PROJ_LIB'</span>]Â =Â <span class="hljs-string">r'D:\Programs\Python\Python311\Lib\site-packages\osgeo\data\proj'</span>
</code></pre>
<h2 data-id="heading-5">5. å®Œæ•´ä»£ç </h2>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span>Â osgeoÂ <span class="hljs-keyword">import</span>Â ogr,gdal
<span class="hljs-keyword">import</span>Â os

<span class="hljs-comment">#Â å¦‚æœæ˜¯é€šè¿‡Â pipÂ å®‰è£…çš„ï¼Œå¯èƒ½éœ€è¦æ‰¾åˆ°å¯¹åº”ä½ç½®</span>
os.environ[<span class="hljs-string">'PROJ_LIB'</span>]Â =Â <span class="hljs-string">r'D:ProgramsPythonPython311Libsite-packagesosgeodataproj'</span>

<span class="hljs-comment">#Â è®¾ç½®Shapefileçš„ç¼–ç ä¸ºGBK</span>
os.environ[<span class="hljs-string">'SHAPE_ENCODING'</span>]Â =Â <span class="hljs-string">"GBK"</span>

<span class="hljs-comment">#Â å¯ç”¨å¼‚å¸¸å¤„ç†ï¼ˆæ¨èï¼‰</span>
ogr.UseExceptions()

<span class="hljs-comment">#Â æ³¨å†Œæ‰€æœ‰é©±åŠ¨</span>
ogr.RegisterAll()

<span class="hljs-string">"""
ä½¿ç”¨GDALè¯»å–KMLæ•°æ®
"""</span>
<span class="hljs-keyword">def</span>Â <span class="hljs-title function_">ReadKMLOfGDAL</span>(<span class="hljs-params">kmlPath</span>):

Â Â Â Â <span class="hljs-comment">#Â æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨</span>
Â Â Â Â <span class="hljs-keyword">if</span>Â os.path.exists(kmlPath):
Â Â Â Â Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"æ–‡ä»¶å­˜åœ¨"</span>)
Â Â Â Â <span class="hljs-keyword">else</span>:
Â Â Â Â Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"æ–‡ä»¶ä¸å­˜åœ¨ï¼Œè¯·é‡æ–°é€‰æ‹©æ–‡ä»¶ï¼"</span>)
Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>

Â Â Â Â <span class="hljs-comment">#Â æ‰“å¼€KMLæ–‡ä»¶</span>
Â Â Â Â datasetÂ =Â gdal.OpenEx(kmlPath)
Â Â Â Â <span class="hljs-keyword">if</span>Â datasetÂ <span class="hljs-keyword">is</span>Â <span class="hljs-literal">None</span>:
Â Â Â Â Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"KMLÂ æ–‡ä»¶æ‰“å¼€å¼‚å¸¸ï¼Œè¯·æ£€æŸ¥æ–‡ä»¶è·¯å¾„ï¼"</span>)
Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>

Â Â Â Â <span class="hljs-comment">#Â è·å–å›¾å±‚æ•°é‡</span>
Â Â Â Â layerCountÂ =Â dataset.GetLayerCount()
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å›¾å±‚æ•°é‡ï¼š<span class="hljs-subst">{layerCount}</span>"</span>)

Â Â Â Â <span class="hljs-comment">#Â éå†å›¾å±‚</span>
Â Â Â Â <span class="hljs-keyword">for</span>Â iÂ <span class="hljs-keyword">in</span>Â <span class="hljs-built_in">range</span>(layerCount):
Â Â Â Â Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"################å¼€å§‹æ‰“å°ç¬¬ã€<span class="hljs-subst">{i+<span class="hljs-number">1</span>}</span>ã€‘ä¸ªå›¾å±‚################n"</span>)
Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â æ ¹æ®ç´¢å¼•è·å–ç›®æ ‡å›¾å±‚</span>
Â Â Â Â Â Â Â Â layerÂ =Â dataset.GetLayerByIndex(i)
Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â è·å–å›¾å±‚åç§°</span>
Â Â Â Â Â Â Â Â layerNameÂ =Â layer.GetName()
Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â è·å–å›¾å±‚è¦ç´ æ•°é‡</span>
Â Â Â Â Â Â Â Â layerFeatureCountÂ =Â layer.GetFeatureCount()

Â Â Â Â Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å›¾å±‚åç§°ï¼š<span class="hljs-subst">{layerName}</span>"</span>)
Â Â Â Â Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"è¦ç´ æ•°é‡ï¼š<span class="hljs-subst">{layerFeatureCount}</span>"</span>)

Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â è·å–å›¾å±‚å±æ€§</span>
Â Â Â Â Â Â Â Â layerPropertyÂ =Â layer.GetLayerDefn()
Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â è·å–å›¾å±‚å­—æ®µæ•°é‡</span>
Â Â Â Â Â Â Â Â fieldCountÂ =Â layerProperty.GetFieldCount()
Â Â Â Â Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å­—æ®µæ•°é‡ï¼š<span class="hljs-subst">{fieldCount}</span>"</span>)

Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â è·å–å­—æ®µä¿¡æ¯</span>
Â Â Â Â Â Â Â Â <span class="hljs-keyword">for</span>Â jÂ <span class="hljs-keyword">in</span>Â <span class="hljs-built_in">range</span>(fieldCount):
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â è·å–å­—æ®µå±æ€§å¯¹è±¡</span>
Â Â Â Â Â Â Â Â Â Â Â Â fieldPropertyÂ =Â layerProperty.GetFieldDefn(j)
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â è·å–å­—æ®µå±æ€§åç§°</span>
Â Â Â Â Â Â Â Â Â Â Â Â fieldNameÂ =Â fieldProperty.GetName()
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â è·å–å­—æ®µå±æ€§ç±»å‹</span>
Â Â Â Â Â Â Â Â Â Â Â Â fieldTypeÂ =Â fieldProperty.GetTypeName()

Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ç¬¬Â ã€<span class="hljs-subst">{j}</span>ã€‘Â ä¸ªå­—æ®µåç§°ï¼š<span class="hljs-subst">{fieldName}</span>ï¼Œå­—æ®µç±»å‹ï¼š<span class="hljs-subst">{fieldType}</span>"</span>)

Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â è·å–è¦ç´ </span>
Â Â Â Â Â Â Â Â featureÂ =Â layer.GetNextFeature()
Â Â Â Â Â Â Â Â limitCountÂ =Â <span class="hljs-number">0</span>

Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â é™åˆ¶æ‰“å°å‰åä¸ªè¦ç´ </span>
Â Â Â Â Â Â Â Â <span class="hljs-keyword">while</span>Â featureÂ <span class="hljs-keyword">and</span>Â limitCountÂ &lt;Â <span class="hljs-number">10</span>:
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ‰“å°ç¬¬ã€<span class="hljs-subst">{limitCount+<span class="hljs-number">1</span>}</span>ã€‘ä¸ªè¦ç´ "</span>)
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â print(f"æ‰“å°è¦ç´ ç±»å‹ï¼š{type(feature)},{feature}")</span>

Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â è¯»å–è¦ç´ å±æ€§</span>
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">for</span>Â kÂ <span class="hljs-keyword">in</span>Â <span class="hljs-built_in">range</span>(fieldCount):
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â å±æ€§å­—æ®µå</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â fieldNameÂ =Â layerProperty.GetFieldDefn(j).GetName()
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â å±æ€§å­—æ®µå€¼</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â fieldValueÂ =Â feature.GetField(k)
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â fieldValueÂ =Â feature.GetField(fieldName)</span>

Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ç¬¬Â ã€<span class="hljs-subst">{k}</span>ã€‘Â ä¸ªå­—æ®µåï¼š<span class="hljs-subst">{fieldName}</span>ï¼Œå­—æ®µå€¼ï¼š<span class="hljs-subst">{fieldValue}</span>"</span>)

Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â è¯»å–å‡ ä½•å±æ€§</span>
Â Â Â Â Â Â Â Â Â Â Â Â geomÂ =Â feature.GetGeometryRef()
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">if</span>Â geom:
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â è·å–å‡ ä½•ç±»å‹</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â geomTypeÂ =Â geom.GetGeometryName()
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â è·å–WKTæ ¼å¼å‡ ä½•å¯¹è±¡ï¼Œæ‰“å°å‰100ä¸ªå­—ç¬¦</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â geomWKTÂ =Â geom.ExportToWkt()[:<span class="hljs-number">100</span>]

Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ç¬¬Â ã€<span class="hljs-subst">{limitCount}</span>ã€‘Â ä¸ªå‡ ä½•å¯¹è±¡ç±»å‹ï¼š<span class="hljs-subst">{geomType}</span>ï¼Œå‡ ä½•å¯¹è±¡ï¼š<span class="hljs-subst">{geomWKT}</span>"</span>)

Â Â Â Â Â Â Â Â Â Â Â Â featureÂ =Â layer.GetNextFeature()
Â Â Â Â Â Â Â Â Â Â Â Â limitCountÂ +=Â <span class="hljs-number">1</span>

Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â é‡ç½®è¯»å–ä½ç½®</span>
Â Â Â Â Â Â Â Â layer.ResetReading()

Â Â Â Â Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"n################ç»“æŸæ‰“å°ç¬¬ã€<span class="hljs-subst">{i+<span class="hljs-number">1</span>}</span>ã€‘ä¸ªå›¾å±‚################n"</span>)

<span class="hljs-string">"""
ä½¿ç”¨OGRè¯»å–KMLæ•°æ®
"""</span>
<span class="hljs-keyword">def</span>Â <span class="hljs-title function_">ReadKMLOfOGR</span>(<span class="hljs-params">kmlPath</span>):

Â Â Â Â <span class="hljs-comment">#Â æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨</span>
Â Â Â Â <span class="hljs-keyword">if</span>Â os.path.exists(kmlPath):
Â Â Â Â Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"æ–‡ä»¶å­˜åœ¨"</span>)
Â Â Â Â <span class="hljs-keyword">else</span>:
Â Â Â Â Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"æ–‡ä»¶ä¸å­˜åœ¨ï¼Œè¯·é‡æ–°é€‰æ‹©æ–‡ä»¶ï¼"</span>)
Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>
Â Â Â Â <span class="hljs-comment">#Â æ³¨å†Œæ‰€æœ‰é©±åŠ¨</span>
Â Â Â Â ogr.RegisterAll()

Â Â Â Â <span class="hljs-comment">#Â æ‰“å¼€KMLæ•°æ®æº</span>
Â Â Â Â dataSourceÂ =Â ogr.Open(kmlPath)

Â Â Â Â <span class="hljs-comment">#Â æ£€æŸ¥æ•°æ®æºæ˜¯å¦æ­£å¸¸</span>
Â Â Â Â <span class="hljs-keyword">if</span>Â dataSourceÂ <span class="hljs-keyword">is</span>Â <span class="hljs-literal">None</span>:
Â Â Â Â Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"æ–‡ä»¶æ‰“å¼€å‡ºé”™ï¼Œè¯·é‡æ–°é€‰æ‹©æ–‡ä»¶ï¼"</span>)
Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>

Â Â Â Â <span class="hljs-comment">#Â éå†å›¾å±‚</span>
Â Â Â Â <span class="hljs-keyword">for</span>Â iÂ <span class="hljs-keyword">in</span>Â <span class="hljs-built_in">range</span>(dataSource.GetLayerCount()):
Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â æ ¹æ®ç´¢å¼•è·å–ç›®æ ‡å›¾å±‚</span>
Â Â Â Â Â Â Â Â layerÂ =Â dataSource.GetLayer(i)
Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â è·å–å›¾å±‚åç§°</span>
Â Â Â Â Â Â Â Â layerNameÂ =Â layer.GetName()
Â Â Â Â Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ç¬¬ã€<span class="hljs-subst">{i}</span>ã€‘ä¸ªå›¾å±‚åç§°ï¼š<span class="hljs-subst">{layerName}</span>"</span>)

Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â è·å–ç©ºé—´å‚è€ƒ</span>
Â Â Â Â Â Â Â Â spatialReferenceÂ =Â layer.GetSpatialRef()
Â Â Â Â Â Â Â Â <span class="hljs-keyword">if</span>Â spatialReference:
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ç©ºé—´å‚è€ƒï¼š<span class="hljs-subst">{spatialReference.GetName()}</span>"</span>)
Â Â Â Â Â Â Â Â <span class="hljs-keyword">else</span>:
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å›¾å±‚ã€<span class="hljs-subst">{layerName}</span>ã€‘ç©ºé—´å‚è€ƒä¸å­˜åœ¨"</span>)

Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â è¯»å–å‡ ä½•å±æ€§</span>
Â Â Â Â Â Â Â Â <span class="hljs-keyword">for</span>Â featureÂ <span class="hljs-keyword">in</span>Â layer:
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â è¯»å–å‡ ä½•å±æ€§</span>
Â Â Â Â Â Â Â Â Â Â Â Â geomÂ =Â feature.GetGeometryRef()
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">if</span>Â geom:
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â è·å–å››è‡³èŒƒå›´</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â envelopeÂ =Â geom.GetEnvelope()
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å‡ ä½•èŒƒå›´ï¼š<span class="hljs-subst">{envelope}</span>"</span>)

Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â è¯»å–è¦ç´ å±æ€§</span>
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">for</span>Â fieldÂ <span class="hljs-keyword">in</span>Â feature.keys():
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â è·å–å±æ€§å­—æ®µå€¼</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â fieldValueÂ =Â feature.GetField(field)
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å±æ€§å­—æ®µåç§°ï¼š<span class="hljs-subst">{field}</span>ï¼Œå±æ€§å­—æ®µå€¼ï¼š<span class="hljs-subst">{fieldValue}</span>"</span>)

Â Â Â Â <span class="hljs-comment">#Â å…³é—­æ•°æ®æº</span>
Â Â Â Â dataSourceÂ =Â <span class="hljs-literal">None</span>Â Â Â Â Â Â Â Â 

<span class="hljs-keyword">if</span>Â __name__Â ==Â <span class="hljs-string">"__main__"</span>:

Â Â Â Â <span class="hljs-comment">#Â æ•°æ®è·¯å¾„</span>
Â Â Â Â kmlPathÂ =Â <span class="hljs-string">"E:\data\test_data\å››å§‘å¨˜å±±ä¸‰å³°.kml"</span>

Â Â Â Â <span class="hljs-comment">#Â GDALè¯»å–KMLæ•°æ®</span>
Â Â Â Â ReadKMLOfGDAL(kmlPath)

Â Â Â Â <span class="hljs-comment">#Â OGRè¯»å–KMLæ•°æ®</span>
Â Â Â Â ReadKMLOfOGR(kmlPath)
</code></pre>
<h2 data-id="heading-6">6. KMLç¤ºä¾‹æ•°æ®</h2>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;?xmlÂ version=<span class="hljs-string">"1.0"</span>Â encoding=<span class="hljs-string">"utf-8"</span>?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">kml</span>Â <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://www.opengis.net/kml/2.2"</span>&gt;</span>
Â Â <span class="hljs-tag">&lt;<span class="hljs-name">Document</span>&gt;</span>
Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>TrackÂ ç™»é¡¶å››å§‘å¨˜å±±ä¸‰å³°Â :wikiloc.com<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span>
Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">visibility</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">visibility</span>&gt;</span>
Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">LookAt</span>&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">longitude</span>&gt;</span>102.8793075<span class="hljs-tag">&lt;/<span class="hljs-name">longitude</span>&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">latitude</span>&gt;</span>31.0426283<span class="hljs-tag">&lt;/<span class="hljs-name">latitude</span>&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">altitude</span>&gt;</span>0<span class="hljs-tag">&lt;/<span class="hljs-name">altitude</span>&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">heading</span>&gt;</span>3<span class="hljs-tag">&lt;/<span class="hljs-name">heading</span>&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">tilt</span>&gt;</span>66<span class="hljs-tag">&lt;/<span class="hljs-name">tilt</span>&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">range</span>&gt;</span>15000<span class="hljs-tag">&lt;/<span class="hljs-name">range</span>&gt;</span>
Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">LookAt</span>&gt;</span>
Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">StyleMap</span>Â <span class="hljs-attr">id</span>=<span class="hljs-string">"m1367020"</span>&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">Pair</span>&gt;</span>
Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">key</span>&gt;</span>normal<span class="hljs-tag">&lt;/<span class="hljs-name">key</span>&gt;</span>
Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">styleUrl</span>&gt;</span>#n1367020<span class="hljs-tag">&lt;/<span class="hljs-name">styleUrl</span>&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">Pair</span>&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">Pair</span>&gt;</span>
Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">key</span>&gt;</span>highlight<span class="hljs-tag">&lt;/<span class="hljs-name">key</span>&gt;</span>
Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">styleUrl</span>&gt;</span>#h1367020<span class="hljs-tag">&lt;/<span class="hljs-name">styleUrl</span>&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">Pair</span>&gt;</span>
Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">StyleMap</span>&gt;</span>
Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">Style</span>Â <span class="hljs-attr">id</span>=<span class="hljs-string">"h1367020"</span>&gt;</span><span class="xml">
Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">IconStyle</span>&gt;</span>
Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">Icon</span>&gt;</span>
Â Â Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">href</span>&gt;</span>http://s1.wklcdn.com/wikiloc/images/pictograms/ge/1.png<span class="hljs-tag">&lt;/<span class="hljs-name">href</span>&gt;</span>
Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">Icon</span>&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">IconStyle</span>&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">BalloonStyle</span>&gt;</span>
Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">text</span>&gt;</span>$[description]<span class="hljs-tag">&lt;/<span class="hljs-name">text</span>&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">BalloonStyle</span>&gt;</span>
Â Â Â Â </span><span class="hljs-tag">&lt;/<span class="hljs-name">Style</span>&gt;</span>
Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">Style</span>Â <span class="hljs-attr">id</span>=<span class="hljs-string">"lineStyle"</span>&gt;</span><span class="xml">
Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">LineStyle</span>&gt;</span>
Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">color</span>&gt;</span>f03399ff<span class="hljs-tag">&lt;/<span class="hljs-name">color</span>&gt;</span>
Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">width</span>&gt;</span>4<span class="hljs-tag">&lt;/<span class="hljs-name">width</span>&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">LineStyle</span>&gt;</span>
Â Â Â Â </span><span class="hljs-tag">&lt;/<span class="hljs-name">Style</span>&gt;</span>
Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">Style</span>Â <span class="hljs-attr">id</span>=<span class="hljs-string">"n1367020"</span>&gt;</span><span class="xml">
Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">LabelStyle</span>&gt;</span>
Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">scale</span>&gt;</span>0<span class="hljs-tag">&lt;/<span class="hljs-name">scale</span>&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">LabelStyle</span>&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">BalloonStyle</span>&gt;</span>
Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">text</span>&gt;</span>$[description]<span class="hljs-tag">&lt;/<span class="hljs-name">text</span>&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">BalloonStyle</span>&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">Icon</span>&gt;</span>
Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">href</span>&gt;</span>http://s1.wklcdn.com/wikiloc/images/pictograms/ge/1.png<span class="hljs-tag">&lt;/<span class="hljs-name">href</span>&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">Icon</span>&gt;</span>
Â Â Â Â </span><span class="hljs-tag">&lt;/<span class="hljs-name">Style</span>&gt;</span>
Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">Style</span>Â <span class="hljs-attr">id</span>=<span class="hljs-string">"waypointStyle"</span>&gt;</span><span class="xml">
Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">IconStyle</span>&gt;</span>
Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">Icon</span>&gt;</span>
Â Â Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">href</span>&gt;</span>http://sc.wklcdn.com/wikiloc/images/pictograms/ge/wpt.png<span class="hljs-tag">&lt;/<span class="hljs-name">href</span>&gt;</span>
Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">Icon</span>&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">IconStyle</span>&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">BalloonStyle</span>&gt;</span>
Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">text</span>&gt;</span>$[description]<span class="hljs-tag">&lt;/<span class="hljs-name">text</span>&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">BalloonStyle</span>&gt;</span>
Â Â Â Â </span><span class="hljs-tag">&lt;/<span class="hljs-name">Style</span>&gt;</span>
Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">Folder</span>&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>Trails<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">visibility</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">visibility</span>&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">Folder</span>&gt;</span>
Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>ç™»é¡¶å››å§‘å¨˜å±±ä¸‰å³°<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span>
Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">visibility</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">visibility</span>&gt;</span>
Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">Placemark</span>&gt;</span>
Â Â Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>Path<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span>
Â Â Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">visibility</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">visibility</span>&gt;</span>
Â Â Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">LookAt</span>&gt;</span>
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">longitude</span>&gt;</span>102.8862617<span class="hljs-tag">&lt;/<span class="hljs-name">longitude</span>&gt;</span>
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">latitude</span>&gt;</span>31.052715<span class="hljs-tag">&lt;/<span class="hljs-name">latitude</span>&gt;</span>
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">altitude</span>&gt;</span>0<span class="hljs-tag">&lt;/<span class="hljs-name">altitude</span>&gt;</span>
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">heading</span>&gt;</span>0<span class="hljs-tag">&lt;/<span class="hljs-name">heading</span>&gt;</span>
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">tilt</span>&gt;</span>0.00779126500014642<span class="hljs-tag">&lt;/<span class="hljs-name">tilt</span>&gt;</span>
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">range</span>&gt;</span>5250.96911517065<span class="hljs-tag">&lt;/<span class="hljs-name">range</span>&gt;</span>
Â Â Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">LookAt</span>&gt;</span>
Â Â Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">Style</span>&gt;</span><span class="xml">
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">IconStyle</span>&gt;</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">color</span>&gt;</span>ffffffff<span class="hljs-tag">&lt;/<span class="hljs-name">color</span>&gt;</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">scale</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">scale</span>&gt;</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">Icon</span>&gt;</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">href</span>/&gt;</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">Icon</span>&gt;</span>
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">IconStyle</span>&gt;</span>
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">LabelStyle</span>&gt;</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">color</span>&gt;</span>ffffffff<span class="hljs-tag">&lt;/<span class="hljs-name">color</span>&gt;</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">scale</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">scale</span>&gt;</span>
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">LabelStyle</span>&gt;</span>
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">LineStyle</span>&gt;</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">color</span>&gt;</span>f00000ff<span class="hljs-tag">&lt;/<span class="hljs-name">color</span>&gt;</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">width</span>&gt;</span>4<span class="hljs-tag">&lt;/<span class="hljs-name">width</span>&gt;</span>
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">LineStyle</span>&gt;</span>
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">PolyStyle</span>&gt;</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">color</span>&gt;</span>ffffffff<span class="hljs-tag">&lt;/<span class="hljs-name">color</span>&gt;</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">fill</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">fill</span>&gt;</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">outline</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">outline</span>&gt;</span>
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">PolyStyle</span>&gt;</span>
Â Â Â Â Â Â Â Â Â Â </span><span class="hljs-tag">&lt;/<span class="hljs-name">Style</span>&gt;</span>
Â Â Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">LineString</span>&gt;</span>
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">altitudeMode</span>&gt;</span>clampToGround<span class="hljs-tag">&lt;/<span class="hljs-name">altitudeMode</span>&gt;</span>
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">coordinates</span>&gt;</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8527267,31.0061667,3255.400146
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8530967,31.00604,3254.899902
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8537967,31.0060883,3256.899902
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8547817,31.0064133,3270.100098
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8558183,31.0071067,3271.100098
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8575333,31.00785,3271.699951
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8588867,31.0093867,3278.899902
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8599,31.0099067,3281.5
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8605217,31.01093,3289.899902
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8613217,31.0128967,3298.899902
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.863045,31.014905,3307.199951
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8638983,31.016515,3313.100098
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8639067,31.01642,3306.699951
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.86423,31.0168667,3317.199951
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8645867,31.017765,3330.000244
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8655283,31.0190083,3314.100342
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.86643,31.0211683,3324.100098
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8665367,31.0217183,3321.300049
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.86754,31.0228467,3328.399902
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8682333,31.023345,3331.699951
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.868495,31.02422,3338.399902
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.86873,31.0245367,3336.199951
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8697533,31.0251667,3343.100098
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.870035,31.0256033,3345.800049
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.86997,31.02594,3350.099854
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.870195,31.0265117,3357.800049
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8706917,31.0273617,3360.300049
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8717183,31.0284717,3374
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8735067,31.0298317,3377.699951
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8744233,31.0310767,3382.300049
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8748283,31.0321567,3378.699951
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8747833,31.0328433,3391.800049
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8756183,31.0336933,3406.399902
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.875455,31.034915,3408
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8754967,31.0361467,3406.399902
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8759333,31.037405,3412
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8763117,31.0379283,3415.999756
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.87597,31.0385567,3416.199951
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8757067,31.0415767,3399.100098
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.87552,31.0419067,3415.999756
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8758433,31.0423217,3424.100098
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8762517,31.0425117,3439.200195
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8762617,31.04284,3444
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8764567,31.0430117,3450.199951
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8766917,31.0436783,3461.399902
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8771717,31.0439417,3481.399902
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.876935,31.04407,3486.899902
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8771133,31.04414,3494.399902
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8772133,31.0444317,3502.300049
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8782383,31.0450583,3541.100098
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.878835,31.045955,3559.100098
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8790667,31.0470883,3574.699951
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8792533,31.0472867,3574.5
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8790733,31.04746,3574.199951
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8791133,31.0475933,3575.300049
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.879595,31.0479917,3586
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8803283,31.0490267,3626.399902
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8804683,31.0489483,3627.600098
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.880595,31.049135,3626.800049
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8807983,31.0491317,3629.199951
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8807333,31.0493933,3629.800049
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.88088,31.04944,3629.100098
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.880855,31.049585,3628.699951
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8811167,31.0496783,3629
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8812417,31.049575,3629.600098
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8814083,31.049755,3632.600098
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.881335,31.0500367,3634.5
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8811333,31.0499417,3638.800049
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.88138,31.05021,3638.699951
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8812683,31.0501417,3639
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8813417,31.0499933,3637.499756
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8813383,31.0501217,3642.600098
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8822067,31.050155,3652.599854
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8823317,31.050305,3655.699951
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8827433,31.0501883,3663.399902
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.882945,31.0503983,3691
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8835383,31.0504067,3708.600098
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.883635,31.0504717,3713.199707
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.88357,31.0509167,3720.699951
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8834217,31.0509483,3723.000244
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8837983,31.0511317,3728.600342
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8841217,31.0509617,3733
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8840783,31.0516483,3760.400146
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8844567,31.0517517,3780.399902
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8844183,31.0518767,3795.699951
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.884775,31.0518117,3818.499756
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8848583,31.0522,3863
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.885575,31.051965,3896.800049
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.88583,31.05217,3908.600098
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.885545,31.0519417,3948.100098
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.88575,31.0519467,3951.500244
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8857867,31.0521417,3960.899902
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8861367,31.0522567,3973.300293
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8862617,31.052715,3985.5
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8865033,31.0528033,3996.699707
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8865233,31.0531233,4007.399902
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.886855,31.053565,4025.600098
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8878733,31.0542133,4081.300049
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.888465,31.0543383,4096.399902
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8887633,31.05476,4105.5
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8889883,31.0546883,4115.200195
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8891233,31.0549117,4131
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8893483,31.0548067,4143.200195
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8900367,31.055275,4164.200195
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8902983,31.0563283,4190.399902
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8902633,31.0578033,4191.899902
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.890535,31.05789,4203.200195
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.89051,31.058235,4225.799805
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8909267,31.0584983,4262.799805
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8911817,31.05891,4273.899902
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8913883,31.05877,4285
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8913233,31.0584617,4289.399902
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.89199,31.0583817,4299
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8919,31.058545,4308.200195
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8920433,31.05873,4319.299805
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8924917,31.05891,4352
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8927133,31.0588033,4365.200195
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8930267,31.059215,4373.200195
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.89327,31.0590433,4388.899902
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8934967,31.0592717,4391.299805
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8934583,31.0594417,4395.899902
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8937567,31.0595283,4406.299805
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8940683,31.0601267,4421
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8943233,31.06027,4429.5
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8943667,31.0605067,4435.600098
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8941,31.0606483,4444
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.89444,31.0607917,4452.799805
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.89331,31.0618433,4485.899902
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.893345,31.061985,4489.799805
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8938833,31.0621483,4498.399902
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8937483,31.0619783,4499
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.89363,31.0620033,4499.399902
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8937967,31.062175,4499.799805
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8943467,31.0621867,4503.899902
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8943433,31.062095,4504.700195
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8943767,31.0622417,4504.5
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8948533,31.062295,4503.600098
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8957933,31.0629667,4506.299805
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8959517,31.0628633,4506.399902
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.89649,31.0635683,4509.799805
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8966483,31.063565,4509.399902
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8967717,31.0639033,4511.600098
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8974033,31.0641033,4518.100098
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8982783,31.0652517,4530.399902
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8985533,31.0661067,4556.299805
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.899115,31.0666583,4589.600098
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8990783,31.0670983,4620.700195
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8994317,31.0674483,4636
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8997217,31.068335,4650.799805
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.9004533,31.0686783,4657.799805
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.90056,31.0690317,4672.100098
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.9008217,31.069215,4664.5
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.9005883,31.0696883,4677.399902
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.9007033,31.0700017,4692.100098
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.9013133,31.070325,4701.100098
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.9020567,31.0710117,4716.899902
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.902175,31.0713983,4738.899902
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.9026167,31.0719533,4748
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.903125,31.0721467,4758.299805
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.9036383,31.0726467,4757.299805
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.9035233,31.072715,4757.399902
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.9036517,31.0728533,4759.5
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.9047917,31.0735717,4823.5
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.905155,31.07431,4862.299805
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.9062583,31.0745867,4891.799805
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.9065483,31.07534,4962.100098
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.906415,31.075375,4966
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.906495,31.0755583,4993.700195
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.9062583,31.0755983,4994.899902
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.9066633,31.0755817,4990.700195
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.9064633,31.0757367,5003.000488
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.9069417,31.0759117,5031.500488
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.9069833,31.0760817,5034.899902
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.9068167,31.076175,5040.100098
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.9069583,31.0762483,5041.700195
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.9070367,31.0766883,5058.5
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.906675,31.0769033,5078.899902
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.906895,31.0768783,5081.200195
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.90672,31.0772267,5096.200195
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.9071467,31.0774933,5137.5
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.9072017,31.07771,5142.200195
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.90558,31.0791683,5322.200195
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.905505,31.0793567,5341.899902
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.905815,31.0797233,5358.100098
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.9054383,31.07938,5345.500488
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.9055167,31.07932,5349.5
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.90543,31.0794,5349.100098
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">coordinates</span>&gt;</span>
Â Â Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">LineString</span>&gt;</span>
Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">Placemark</span>&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">Folder</span>&gt;</span>
Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">Folder</span>&gt;</span>
Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">Document</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">kml</span>&gt;</span>
</code></pre>
<blockquote>
<p>â</p>
<p>OpenLayersç¤ºä¾‹æ•°æ®ä¸‹è½½ï¼Œè¯·å›å¤å…³é”®å­—ï¼š<strong>olæ•°æ®</strong></p>
<p>å…¨å›½ä¿¡æ¯åŒ–å·¥ç¨‹å¸ˆï¼GIS åº”ç”¨æ°´å¹³è€ƒè¯•èµ„æ–™ï¼Œè¯·å›å¤å…³é”®å­—ï¼š<strong>GISè€ƒè¯•</strong></p>
</blockquote>
<blockquote>
<p>â</p>
<p><strong>ã€GISä¹‹è·¯ã€‘</strong> å·²ç»æ¥å…¥äº†<strong>æ™ºèƒ½</strong>åŠ©æ‰‹ï¼Œæ¬¢è¿å…³æ³¨ï¼Œæ¬¢è¿æé—®ã€‚</p>
<p>æ¬¢è¿è®¿é—®æˆ‘çš„åšå®¢ç½‘ç«™-<strong>é•¿è°ˆGIS</strong>ï¼š<code>http://shanhaitalk.com</code></p>
</blockquote>
<p>éƒ½çœ‹åˆ°è¿™äº†ï¼Œä¸è¦å¿˜è®°<strong>ç‚¹èµã€æ”¶è—</strong> <strong>+</strong> <strong>å…³æ³¨</strong> å“¦ <strong>ï¼</strong></p>
<p>æœ¬å·ä¸å®šæ—¶æ›´æ–°æœ‰å…³Â <strong>GISå¼€å‘</strong> ç›¸å…³å†…å®¹ï¼Œ<strong>æ¬¢è¿å…³æ³¨Â !</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item>  </channel></rss>