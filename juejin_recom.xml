<?xml version="1.0" encoding="UTF-8"?><rss version="2.0">  <channel>      <title>æ˜é‡‘æ–‡ç« æ¨è</title>      <link>https://juejin.cn/recommended?sort=newest</link>      <description>ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…æˆé•¿çš„ç¤¾åŒº</description>      <generator>python juejin_recom.py @Pi20</generator>      <item>    <title><![CDATA[0210_1 SFC SPI/QSPI æ¨¡å¼æ·±åº¦åˆ†æ]]></title>    <link>https://juejin.cn/post/7604697194794565642</link>    <guid>https://juejin.cn/post/7604697194794565642</guid>    <pubDate>2026-02-09T17:29:50.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604697194794565642" data-draft-id="7604690250363682825" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="0210_1  SFC SPI/QSPI æ¨¡å¼æ·±åº¦åˆ†æ"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-02-09T17:29:50.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ly77777"/> <meta itemprop="url" content="https://juejin.cn/user/3775071381890170"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            0210_1  SFC SPI/QSPI æ¨¡å¼æ·±åº¦åˆ†æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3775071381890170/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ly77777
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-09T17:29:50.000Z" title="Mon Feb 09 2026 17:29:50 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    11
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»31åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">FBB_WS63 SFC SPI/QSPI æ¨¡å¼æ·±åº¦åˆ†æ</h2>
<h3 data-id="heading-1">ğŸ“‹ ç›®å½•</h3>
<ol>
<li><a href="#spi-vs-qspi-%E6%A8%A1%E5%BC%8F%E5%AF%B9%E6%AF%94" title="#spi-vs-qspi-%E6%A8%A1%E5%BC%8F%E5%AF%B9%E6%AF%94">SPI vs QSPI æ¨¡å¼å¯¹æ¯”</a></li>
<li><a href="#gpio-pin-%E6%98%A0%E5%B0%84" title="#gpio-pin-%E6%98%A0%E5%B0%84">GPIO Pin æ˜ å°„</a></li>
<li><a href="#%E7%BC%96%E8%AF%91%E9%85%8D%E7%BD%AE%E5%BC%80%E5%85%B3" title="#%E7%BC%96%E8%AF%91%E9%85%8D%E7%BD%AE%E5%BC%80%E5%85%B3">ç¼–è¯‘é…ç½®å¼€å…³</a></li>
<li><a href="#gpio-%E9%87%8D%E6%96%B0%E5%B8%83%E7%BA%BF%E4%BF%AE%E6%94%B9%E6%B8%85%E5%8D%95" title="#gpio-%E9%87%8D%E6%96%B0%E5%B8%83%E7%BA%BF%E4%BF%AE%E6%94%B9%E6%B8%85%E5%8D%95">GPIO é‡æ–°å¸ƒçº¿ä¿®æ”¹æ¸…å•</a></li>
<li><a href="#%E4%BB%A3%E7%A0%81%E8%B7%AF%E5%BE%84%E6%B1%87%E6%80%BB" title="#%E4%BB%A3%E7%A0%81%E8%B7%AF%E5%BE%84%E6%B1%87%E6%80%BB">ä»£ç è·¯å¾„æ±‡æ€»</a></li>
</ol>
<hr/>
<h3 data-id="heading-2">1ï¸âƒ£ SPI vs QSPI æ¨¡å¼å¯¹æ¯”</h3>
<h4 data-id="heading-3">ğŸ“Š æ¨¡å¼æ¦‚è§ˆ</h4>








































<table><thead><tr><th>ç‰¹æ€§</th><th>SPI æ¨¡å¼</th><th>QSPI æ¨¡å¼</th></tr></thead><tbody><tr><td><strong>é€šè®¯æ¨¡å¼</strong></td><td>æ ‡å‡† SPI</td><td>å››çº¿ SPI</td></tr><tr><td><strong>GPIO pin æ•°é‡</strong></td><td>4 æ¡</td><td>6 æ¡</td></tr><tr><td><strong>æ•°æ®çº¿</strong></td><td>MOSI(1çº¿) + MISO(1çº¿)</td><td>IO0 + IO1 + IO2 + IO3(4çº¿)</td></tr><tr><td><strong>ä¼ è¾“é€Ÿåº¦</strong></td><td>æ­£å¸¸</td><td>4x æ›´å¿«</td></tr><tr><td><strong>åº”ç”¨åœºæ™¯</strong></td><td>é€šç”¨ Flash</td><td>é«˜é€Ÿ Flashã€å­˜å‚¨å™¨</td></tr><tr><td><strong>Flash æ”¯æŒ</strong></td><td>æ‰€æœ‰ç°ä»£ Flash</td><td>å¤§å¤šæ•°æ–°å‹ Flash</td></tr></tbody></table>
<h4 data-id="heading-4">ğŸ”Œ ä¸¤ç§æ¨¡å¼çš„ GPIO éœ€æ±‚å¯¹æ¯”</h4>
<h5 data-id="heading-5">SPI æ¨¡å¼ï¼ˆæ ‡å‡†4çº¿ï¼‰</h5>
<pre><code class="hljs language-scss" lang="scss">â”Œâ”€â”€â”€ SFC ç¡¬ä»¶æ¨¡å— â”€â”€â”€â”
â”‚ WS63 SFC æ§åˆ¶å™¨    â”‚
â”‚ (<span class="hljs-number">0</span>x48000000)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â”œâ”€â†’ GPIO_19 (SFC_CLK)    - æ—¶é’Ÿä¿¡å·ï¼ŒCLK
        â”œâ”€â†’ GPIO_20 (SFC_CSN)    - ç‰‡é€‰ä¿¡å·ï¼ŒCSï¼ˆä½æœ‰æ•ˆï¼‰
        â”œâ”€â†’ GPIO_21 (SFC_IO0)    - æ•°æ®çº¿ <span class="hljs-number">0</span>ï¼ŒMOSIï¼ˆMaster Outï¼‰
        â””â”€â†’ GPIO_22 (SFC_IO1)    - æ•°æ®çº¿ <span class="hljs-number">1</span>ï¼ŒMISOï¼ˆMaster Inï¼‰
</code></pre>
<h5 data-id="heading-6">QSPI æ¨¡å¼ï¼ˆå››çº¿å¢å¼ºï¼‰</h5>
<pre><code class="hljs language-scss" lang="scss">â”Œâ”€â”€â”€ SFC ç¡¬ä»¶æ¨¡å— â”€â”€â”€â”
â”‚ WS63 SFC æ§åˆ¶å™¨    â”‚
â”‚ (<span class="hljs-number">0</span>x48000000)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â”œâ”€â†’ GPIO_19 (SFC_CLK)    - æ—¶é’Ÿä¿¡å·
        â”œâ”€â†’ GPIO_20 (SFC_CSN)    - ç‰‡é€‰ä¿¡å·
        â”œâ”€â†’ GPIO_21 (SFC_IO0)    - æ•°æ®çº¿ <span class="hljs-number">0</span>ï¼ŒMOSI
        â”œâ”€â†’ GPIO_22 (SFC_IO1)    - æ•°æ®çº¿ <span class="hljs-number">1</span>ï¼ŒMISO
        â”œâ”€â†’ GPIO_23 (SFC_IO2)    - æ•°æ®çº¿ <span class="hljs-number">2</span>ï¼ŒWPï¼ˆå†™ä¿æŠ¤ï¼Œä½æœ‰æ•ˆï¼‰
        â””â”€â†’ GPIO_24 (SFC_IO3)    - æ•°æ®çº¿ <span class="hljs-number">3</span>ï¼ŒHOLDï¼ˆä¿æŒï¼Œä½æœ‰æ•ˆï¼‰
</code></pre>
<h4 data-id="heading-7">ğŸ“Œ å…³é”®å·®å¼‚è¯´æ˜</h4>





















































<table><thead><tr><th>é¡¹ç›®</th><th>SPI æ¨¡å¼</th><th>QSPI æ¨¡å¼</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>CLK</strong></td><td>GPIO_19</td><td>GPIO_19</td><td>å§‹ç»ˆéœ€è¦ï¼ˆç¡¬å›ºå®šï¼‰</td></tr><tr><td><strong>CSN</strong></td><td>GPIO_20</td><td>GPIO_20</td><td>å§‹ç»ˆéœ€è¦ï¼ˆç¡¬å›ºå®šï¼‰</td></tr><tr><td><strong>MOSI(IO0)</strong></td><td>GPIO_21</td><td>GPIO_21</td><td>å§‹ç»ˆéœ€è¦ï¼ˆç¡¬å›ºå®šï¼‰</td></tr><tr><td><strong>MISO(IO1)</strong></td><td>GPIO_22</td><td>GPIO_22</td><td>å§‹ç»ˆéœ€è¦ï¼ˆç¡¬å›ºå®šï¼‰</td></tr><tr><td><strong>WP(IO2)</strong></td><td>âŒ ä¸éœ€è¦</td><td>GPIO_23</td><td>âš ï¸ QSPI å¿…éœ€</td></tr><tr><td><strong>HOLD(IO3)</strong></td><td>âŒ ä¸éœ€è¦</td><td>GPIO_24</td><td>âš ï¸ QSPI å¿…éœ€</td></tr><tr><td><strong>æ€» Pin æ•°</strong></td><td><strong>4</strong></td><td><strong>6</strong></td><td>+2 pin</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-8">2ï¸âƒ£ GPIO Pin æ˜ å°„</h3>
<h4 data-id="heading-9">ğŸ¯ GPIO Pin å®šä¹‰ä½ç½®</h4>
<h5 data-id="heading-10"><strong>æ–‡ä»¶ 1</strong>ï¼š<a href="https://link.juejin.cn?target=src%2Fdrivers%2Fchips%2Fws63%2Finclude%2Fplatform_core_rom.h" target="_blank" title="src/drivers/chips/ws63/include/platform_core_rom.h" ref="nofollow noopener noreferrer">src/drivers/chips/ws63/include/platform_core_rom.h</a></h5>
<p><strong>ä½ç½®</strong>ï¼šç¬¬ 50-54 è¡Œ</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-keyword">typedef</span> <span class="hljs-class"><span class="hljs-keyword">enum</span> {</span>
    GPIO_00 = <span class="hljs-number">0</span>,
    <span class="hljs-comment">// ... GPIO_01 åˆ° GPIO_18 ...</span>
    GPIO_18 = <span class="hljs-number">18</span>,
    SFC_CLK = <span class="hljs-number">19</span>,      <span class="hljs-comment">// âœ… Flash æ—¶é’Ÿ</span>
    SFC_CSN = <span class="hljs-number">20</span>,      <span class="hljs-comment">// âœ… ç‰‡é€‰ï¼ˆCS#ï¼‰</span>
    SFC_IO0 = <span class="hljs-number">21</span>,      <span class="hljs-comment">// âœ… MOSI æ•°æ®çº¿ 0</span>
    SFC_IO1 = <span class="hljs-number">22</span>,      <span class="hljs-comment">// âœ… MISO æ•°æ®çº¿ 1</span>
    SFC_IO2 = <span class="hljs-number">23</span>,      <span class="hljs-comment">// âš ï¸  æ•°æ®çº¿ 2ï¼ˆWPï¼Œä»… QSPIï¼‰</span>
    SFC_IO3 = <span class="hljs-number">24</span>,      <span class="hljs-comment">// âš ï¸  æ•°æ®çº¿ 3ï¼ˆHOLDï¼Œä»… QSPIï¼‰</span>
    PIN_NONE = <span class="hljs-number">25</span>,
} <span class="hljs-type">pin_t</span>;
</code></pre>
<p><strong>è¯´æ˜</strong>ï¼š</p>
<ul>
<li>è¿™äº›æ˜¯ <strong>enum æšä¸¾å®šä¹‰</strong>ï¼Œæ˜ å°„åˆ°å…·ä½“çš„ GPIO å·ï¼ˆ19-24ï¼‰</li>
<li>GPIO_19-22 æ˜¯ç¡¬ä»¶å›ºå®šåˆ†é…çš„ SFC å¼•è„š</li>
<li>GPIO_23-24 æ˜¯å¯é€‰çš„ QSPI æ‰©å±•å¼•è„š</li>
<li><strong>è¿™æ˜¯ç¡¬ä»¶çº§åˆ«çš„å›ºå®šè¿æ¥</strong>ï¼Œä¸èƒ½æ”¹å˜</li>
</ul>
<hr/>
<h5 data-id="heading-11"><strong>æ–‡ä»¶ 2</strong>ï¼š<a href="https://link.juejin.cn?target=src%2Fdrivers%2Fchips%2Fws63%2Fporting%2Fsoc%2Fsoc_porting.c" target="_blank" title="src/drivers/chips/ws63/porting/soc/soc_porting.c" ref="nofollow noopener noreferrer">src/drivers/chips/ws63/porting/soc/soc_porting.c</a></h5>
<p><strong>ä½ç½®</strong>ï¼šç¬¬ 64-79 è¡Œ</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-comment">// PAD å¯„å­˜å™¨åœ°å€ï¼ˆç¡¬ä»¶ Pad Controlï¼‰</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> PAD_SFC_CLK_CTRL  0x4400d868    <span class="hljs-comment">// GPIO_19 çš„ Pad æ§åˆ¶å¯„å­˜å™¨</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> PAD_SFC_CSN_CTRL  0x4400d86C    <span class="hljs-comment">// GPIO_20 çš„ Pad æ§åˆ¶å¯„å­˜å™¨</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> PAD_SFC_IO0_CTRL  0x4400d870    <span class="hljs-comment">// GPIO_21 çš„ Pad æ§åˆ¶å¯„å­˜å™¨</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> PAD_SFC_IO1_CTRL  0x4400d874    <span class="hljs-comment">// GPIO_22 çš„ Pad æ§åˆ¶å¯„å­˜å™¨</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> PAD_SFC_IO2_CTRL  0x4400d878    <span class="hljs-comment">// GPIO_23 çš„ Pad æ§åˆ¶å¯„å­˜å™¨ï¼ˆQSPIï¼‰</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> PAD_SFC_IO3_CTRL  0x4400d87C    <span class="hljs-comment">// GPIO_24 çš„ Pad æ§åˆ¶å¯„å­˜å™¨ï¼ˆQSPIï¼‰</span></span>

<span class="hljs-comment">// é©±åŠ¨å¼ºåº¦ (Drive Strength) è®¾ç½®</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> SFC_CLK_DS_VALUE      0x3       <span class="hljs-comment">// CLK é©±åŠ¨å¼ºåº¦</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> SFC_CSN_DS_VALUE      0x2       <span class="hljs-comment">// CSN é©±åŠ¨å¼ºåº¦</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> SFC_DATA_DS_VALUE     0x2       <span class="hljs-comment">// æ•°æ®çº¿é©±åŠ¨å¼ºåº¦</span></span>

<span class="hljs-type">void</span> <span class="hljs-title function_">config_sfc_ctrl_ds</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span>
{
    reg_setbits(PAD_SFC_CLK_CTRL, <span class="hljs-number">0</span>, POS_4, DTRL_DS_LEN, SFC_CLK_DS_VALUE);
    reg_setbits(PAD_SFC_CSN_CTRL, <span class="hljs-number">0</span>, POS_4, DTRL_DS_LEN, SFC_CSN_DS_VALUE);
    reg_setbits(PAD_SFC_IO0_CTRL, <span class="hljs-number">0</span>, POS_4, DTRL_DS_LEN, SFC_DATA_DS_VALUE);
    reg_setbits(PAD_SFC_IO1_CTRL, <span class="hljs-number">0</span>, POS_4, DTRL_DS_LEN, SFC_DATA_DS_VALUE);
    reg_setbits(PAD_SFC_IO2_CTRL, <span class="hljs-number">0</span>, POS_4, DTRL_DS_LEN, SFC_DATA_DS_VALUE);
    reg_setbits(PAD_SFC_IO3_CTRL, <span class="hljs-number">0</span>, POS_4, DTRL_DS_LEN, SFC_DATA_DS_VALUE);
}
</code></pre>
<p><strong>è¯´æ˜</strong>ï¼š</p>
<ul>
<li>è¿™æ˜¯èŠ¯ç‰‡ Pad æ§åˆ¶çš„ç¡¬ä»¶å¯„å­˜å™¨åœ°å€</li>
<li>é…ç½®äº†æ¯æ¡çº¿çš„é©±åŠ¨å¼ºåº¦ï¼ˆDrive Strengthï¼‰</li>
<li>è¿™äº›åœ°å€æ˜¯èŠ¯ç‰‡çº§åˆ«çš„å›ºå®šå€¼ï¼ˆSOC çº§åˆ«ï¼‰</li>
<li><strong>ä¸å»ºè®®ä¿®æ”¹è¿™äº›åœ°å€</strong>ï¼Œé™¤éç¡¬ä»¶é‡æ–°è®¾è®¡</li>
</ul>
<hr/>
<h5 data-id="heading-12"><strong>æ–‡ä»¶ 3</strong>ï¼š<a href="https://link.juejin.cn?target=src%2Fdrivers%2Fdrivers%2Fhal%2Fpinmux%2Fws63%2Fhal_pinctrl_ws63.c" target="_blank" title="src/drivers/drivers/hal/pinmux/ws63/hal_pinctrl_ws63.c" ref="nofollow noopener noreferrer">src/drivers/drivers/hal/pinmux/ws63/hal_pinctrl_ws63.c</a></h5>
<p><strong>ä½ç½®</strong>ï¼šç¬¬ 20-27 è¡Œï¼ˆåŸºåœ°å€å®šä¹‰ï¼‰ã€ç¬¬ 109-140 è¡Œï¼ˆpin é…ç½®ç»„ï¼‰</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-meta">#<span class="hljs-keyword">define</span> HAL_IO_CFG_BASE_ADDR            0x4400D000</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> HAL_PIN_GPIO_SEL_START_OFFSET   0x000</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> HAL_PIN_UART_SEL_START_OFFSET   0x03C</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> HAL_PIN_GPIO_CTRL_START_OFFSET  0x800</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> HAL_PIN_SFC_CTRL_START_OFFSET   0x868  <span class="hljs-comment">// âœ… SFC pin æ§åˆ¶èµ·å§‹åœ°å€</span></span>

<span class="hljs-meta">#<span class="hljs-keyword">define</span> HAL_PIN_GPIO_SEL_START_ADDR     (HAL_IO_CFG_BASE_ADDR + HAL_PIN_GPIO_SEL_START_OFFSET)</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> HAL_PIN_UART_SEL_START_ADDR     (HAL_IO_CFG_BASE_ADDR + HAL_PIN_UART_SEL_START_OFFSET)</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> HAL_PIN_GPIO_CTRL_START_ADDR    (HAL_IO_CFG_BASE_ADDR + HAL_PIN_GPIO_CTRL_START_OFFSET)</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> HAL_PIN_SFC_CTRL_START_ADDR     (HAL_IO_CFG_BASE_ADDR + HAL_PIN_SFC_CTRL_START_OFFSET)</span>
</code></pre>
<p><strong>Pin é…ç½®ç»„ï¼ˆç¬¬ 109-140 è¡Œï¼‰</strong>ï¼š</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-type">static</span> <span class="hljs-type">hal_pin_config_group_t</span> <span class="hljs-type">const</span> g_pin_pull_map[] = {
    {
        GPIO_00,
        GPIO_14,
        HAL_PIN_GPIO_CTRL_START_ADDR,
        <span class="hljs-comment">// ... GPIO_00~14 çš„ä¸Šæ‹‰/ä¸‹æ‹‰é…ç½® ...</span>
    },
    {
        SFC_CLK,                          <span class="hljs-comment">// GPIO_19</span>
        SFC_IO3,                          <span class="hljs-comment">// GPIO_24</span>
        HAL_PIN_SFC_CTRL_START_ADDR,      <span class="hljs-comment">// 0x4400D868</span>
        HAL_PIN_CONFIG_PER_NUM,
        HAL_PIN_PULL_START_BIT,
        HAL_PIN_PULL_BITS_NUM
    }
};

<span class="hljs-type">static</span> <span class="hljs-type">hal_pin_config_group_t</span> <span class="hljs-type">const</span> g_pin_ds_map[] = {
    {
        GPIO_00,
        GPIO_14,
        HAL_PIN_GPIO_CTRL_START_ADDR,
        <span class="hljs-comment">// ... GPIO_00~14 çš„é©±åŠ¨å¼ºåº¦é…ç½® ...</span>
    },
    {
        SFC_CLK,                          <span class="hljs-comment">// GPIO_19</span>
        SFC_IO3,                          <span class="hljs-comment">// GPIO_24</span>
        HAL_PIN_SFC_CTRL_START_ADDR,      <span class="hljs-comment">// 0x4400D868</span>
        HAL_PIN_CONFIG_PER_NUM,
        HAL_PIN_DS_START_BIT,
        HAL_PIN_DS_BITS_NUM
    }
};

<span class="hljs-comment">// IEï¼ˆè¾“å…¥ä½¿èƒ½ï¼‰é…ç½®</span>
<span class="hljs-type">static</span> <span class="hljs-type">hal_pin_config_group_t</span> <span class="hljs-type">const</span> g_pin_ie_map[] = {
    {
        SFC_CLK,      <span class="hljs-comment">// GPIO_19</span>
        SFC_IO3,      <span class="hljs-comment">// GPIO_24</span>
        HAL_PIN_SFC_CTRL_START_ADDR,
        <span class="hljs-comment">// ...</span>
    }
};

<span class="hljs-comment">// STï¼ˆSchmitt Triggerï¼‰é…ç½®</span>
<span class="hljs-type">static</span> <span class="hljs-type">hal_pin_config_group_t</span> <span class="hljs-type">const</span> g_pin_st_map[] = {
    {
        SFC_CLK,      <span class="hljs-comment">// GPIO_19</span>
        SFC_IO3,      <span class="hljs-comment">// GPIO_24</span>
        HAL_PIN_SFC_CTRL_START_ADDR,
        <span class="hljs-comment">// ...</span>
    }
};
</code></pre>
<p><strong>è¯´æ˜</strong>ï¼š</p>
<ul>
<li>å®šä¹‰äº† SFC çš„ pin æ§åˆ¶å¯„å­˜å™¨åŸºåœ°å€</li>
<li>GPIO_19-24 éƒ½ç»Ÿä¸€åœ¨ <code>HAL_PIN_SFC_CTRL_START_ADDR</code> é…ç½®ç»„ä¸­</li>
<li>é…ç½®é¡¹åŒ…æ‹¬ï¼šä¸Šæ‹‰/ä¸‹æ‹‰ã€é©±åŠ¨å¼ºåº¦ã€è¾“å…¥ä½¿èƒ½ã€æ–½å¯†ç‰¹è§¦å‘å™¨</li>
</ul>
<hr/>
<h4 data-id="heading-13">ğŸ”„ GPIO Pin ä½¿ç”¨æµç¨‹</h4>
<pre><code class="hljs language-scss" lang="scss">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç¡¬å¯åŠ¨/çƒ§å½•ï¼ˆBootLoaderï¼‰                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ <span class="hljs-number">1</span>. SFC ç¡¬ä»¶è‡ªåŠ¨ä½¿ç”¨ GPIO_19-<span class="hljs-number">22</span>ï¼ˆSPI æ¨¡å¼ï¼‰        â”‚
â”‚ <span class="hljs-number">2</span>. soc_porting<span class="hljs-selector-class">.c</span> é…ç½® Pad é©±åŠ¨å¼ºåº¦                 â”‚
â”‚    â””â”€ <span class="hljs-built_in">config_sfc_ctrl_ds</span>()                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ åº”ç”¨å¯åŠ¨ï¼ˆAPP é˜¶æ®µï¼‰                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ <span class="hljs-number">1</span>. sfc<span class="hljs-selector-class">.c</span> è°ƒç”¨ <span class="hljs-built_in">hal_sfc_init</span>()                       â”‚
â”‚ <span class="hljs-number">2</span>. hal_pinctrl_ws63<span class="hljs-selector-class">.c</span> é…ç½® pin å±æ€§                â”‚
â”‚    â””â”€ æ‹‰é«˜/æ‹‰ä½ã€é©±åŠ¨å¼ºåº¦ç­‰                       â”‚
â”‚ <span class="hljs-number">3</span>. SFC é©±åŠ¨åˆå§‹åŒ–å®Œæˆ                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<hr/>
<h3 data-id="heading-14">3ï¸âƒ£ ç¼–è¯‘é…ç½®å¼€å…³</h3>
<h4 data-id="heading-15">ğŸ“š Kconfig é…ç½®æ–‡ä»¶ä½ç½®</h4>
<h5 data-id="heading-16"><strong>æ–‡ä»¶ 1</strong>ï¼š<a href="https://link.juejin.cn?target=src%2Fdrivers%2Fdrivers%2FKconfig" target="_blank" title="src/drivers/drivers/Kconfig" ref="nofollow noopener noreferrer">src/drivers/drivers/Kconfig</a></h5>
<p><strong>ä½ç½®</strong>ï¼šç¬¬ 387-403 è¡Œ</p>
<pre><code class="hljs language-kconfig" lang="kconfig">config DRIVER_SUPPORT_SFC
    bool
    prompt "SFC"
    default y
    help
        This option means support SFC.

if DRIVER_SUPPORT_SFC
menu "SFC Configuration"
    comment "Config  SFC"
    osource "drivers/drivers/driver/sfc/Kconfig"
    osource "drivers/drivers/hal/sfc/Kconfig"
endmenu
endif

config DRIVER_SUPPORT_SPI
    bool
    prompt "SPI"
    default n
    help
        This option means support SPI.

if DRIVER_SUPPORT_SPI
menu "SPI Configuration"
    comment "Config SPI"
    osource "drivers/drivers/driver/spi/Kconfig"
    osource "drivers/drivers/hal/spi/Kconfig"
endmenu
endif
</code></pre>
<p><strong>è¯´æ˜</strong>ï¼š</p>
<ul>
<li><code>CONFIG_DRIVER_SUPPORT_SFC</code> - SFC é©±åŠ¨æ€»å¼€å…³ï¼ˆ<strong>é»˜è®¤å¯ç”¨</strong>ï¼‰</li>
<li><code>CONFIG_DRIVER_SUPPORT_SPI</code> - é€šç”¨ SPI é©±åŠ¨æ€»å¼€å…³ï¼ˆ<strong>é»˜è®¤ç¦ç”¨</strong>ï¼‰</li>
<li><strong>å…³é”®ç‚¹</strong>ï¼šSFC å’Œ SPI æ˜¯åˆ†åˆ«çš„é©±åŠ¨ï¼Œä¸ä¼šç›´æ¥å†²çª</li>
</ul>
<hr/>
<h5 data-id="heading-17"><strong>æ–‡ä»¶ 2</strong>ï¼š<a href="https://link.juejin.cn?target=src%2Fdrivers%2Fchips%2Fws63%2From%2Fdrivers%2Fdrivers%2Fdriver%2Fsfc%2FKconfig" target="_blank" title="src/drivers/chips/ws63/rom/drivers/drivers/driver/sfc/Kconfig" ref="nofollow noopener noreferrer">src/drivers/chips/ws63/rom/drivers/drivers/driver/sfc/Kconfig</a></h5>
<p><strong>ä½ç½®</strong>ï¼šå®Œæ•´å†…å®¹</p>
<pre><code class="hljs language-kconfig" lang="kconfig">#===============================================================================
# @brief    Kconfig file.
# Copyright (c) HiSilicon (Shanghai) Technologies Co., Ltd. 2022-2022. All rights reserved.
#===============================================================================
config SFC_SUPPORT_DMA
    bool
    prompt "SFC Support DMA"
    default y
    depends on DRIVER_SUPPORT_SFC

config SFC_ALLOW_ERASE_WRITEBACK
    bool
    prompt "Allows Erase at Any Address, needs 4KB RAM at least"
    default n
    depends on DRIVER_SUPPORT_SFC

config SFC_ALREADY_INIT
    bool
    prompt "SFC has been inited, need not to set reg in init/deinit func."
    default n
    depends on DRIVER_SUPPORT_SFC
</code></pre>
<p><strong>SFC ç›¸å…³é…ç½®</strong>ï¼š</p>





























<table><thead><tr><th>é…ç½®é¡¹</th><th>è¯´æ˜</th><th>é»˜è®¤å€¼</th><th>ç”¨é€”</th></tr></thead><tbody><tr><td><code>CONFIG_SFC_SUPPORT_DMA</code></td><td>å¯ç”¨ DMA ä¼ è¾“</td><td><code>y</code>ï¼ˆå¯ç”¨ï¼‰</td><td>æé«˜ä¼ è¾“é€Ÿåº¦</td></tr><tr><td><code>CONFIG_SFC_ALLOW_ERASE_WRITEBACK</code></td><td>å…è®¸ä»»æ„åœ°å€æ“¦é™¤</td><td><code>n</code>ï¼ˆç¦ç”¨ï¼‰</td><td>éœ€è¦é¢å¤– 4KB RAM</td></tr><tr><td><code>CONFIG_SFC_ALREADY_INIT</code></td><td>Skip åˆå§‹åŒ–</td><td><code>n</code>ï¼ˆç¦ç”¨ï¼‰</td><td>BootLoader å·²åˆå§‹åŒ–æ—¶</td></tr></tbody></table>
<p><strong>âš ï¸ é‡è¦</strong>ï¼š</p>
<ul>
<li><strong>è¿™äº›é…ç½®ä¸­æ²¡æœ‰ QSPI/SPI æ¨¡å¼é€‰æ‹©å¼€å…³</strong></li>
<li><strong>QSPI æ¨¡å¼æ˜¯ç”± Flash èŠ¯ç‰‡æœ¬èº«å†³å®šçš„</strong>ï¼ˆFlash æ”¯æŒ QSPI å°±è‡ªåŠ¨å¯ç”¨ï¼‰</li>
</ul>
<hr/>
<h5 data-id="heading-18"><strong>æ–‡ä»¶ 3</strong>ï¼š<a href="https://link.juejin.cn?target=src%2Fapplication%2Fsamples%2Fperipheral%2Fspi%2FKconfig" target="_blank" title="src/application/samples/peripheral/spi/Kconfig" ref="nofollow noopener noreferrer">src/application/samples/peripheral/spi/Kconfig</a></h5>
<p><strong>ä½ç½®</strong>ï¼šç¬¬ 49-77 è¡Œï¼ˆSPI Master QSPI æ”¯æŒï¼‰</p>
<pre><code class="hljs language-kconfig" lang="kconfig">config SPI_MASTER_SUPPORT_QSPI
    bool
    prompt "SPI master support QSPI."
    depends on SAMPLE_SUPPORT_SPI_MASTER
    default n

config SPI_MASTER_D3_PIN_MODE
    int
    prompt "Choose QSPI master D3 pin mode."
    depends on SPI_MASTER_SUPPORT_QSPI
    default 1

config SPI_MASTER_D2_PIN_MODE
    int
    prompt "Choose QSPI master D2 pin mode."
    depends on SPI_MASTER_SUPPORT_QSPI
    default 1

config SPI_MASTER_D3_PIN
    int
    prompt "Choose QSPI master D3 pin."
    depends on SPI_MASTER_SUPPORT_QSPI
    default 40

config SPI_MASTER_D2_PIN
    int
    prompt "Choose QSPI master D2 pin."
    depends on SPI_MASTER_SUPPORT_QSPI
    default 41
</code></pre>
<p><strong>è¯´æ˜</strong>ï¼š</p>
<ul>
<li>è¿™æ˜¯ <strong>é€šç”¨ SPI æ¨¡å—</strong>ï¼ˆä¸æ˜¯ SFCï¼‰çš„ QSPI é…ç½®</li>
<li>æ”¯æŒç”¨æˆ·è‡ªå®šä¹‰ D2/D3 pinï¼ˆGPIO_40ã€GPIO_41 ç­‰ï¼‰</li>
<li><strong>è¿™ä¸å½±å“ SFC çš„ GPIO_23-24</strong></li>
</ul>
<hr/>
<h4 data-id="heading-19">ğŸ“Š å½“å‰é¡¹ç›®é…ç½®çŠ¶æ€</h4>
<h5 data-id="heading-20"><strong>æ–‡ä»¶</strong>ï¼š<a href="https://link.juejin.cn?target=src%2Fbuild%2Fconfig%2Ftarget_config%2Fws63%2Fmenuconfig%2Facore%2Fws63_liteos_app.config" target="_blank" title="src/build/config/target_config/ws63/menuconfig/acore/ws63_liteos_app.config" ref="nofollow noopener noreferrer">src/build/config/target_config/ws63/menuconfig/acore/ws63_liteos_app.config</a></h5>
<p><strong>ä½ç½®</strong>ï¼šç¬¬ 357-383 è¡Œ</p>
<pre><code class="hljs language-config" lang="config">#
# SFC Configuration
#

#
# Config  SFC
#
# CONFIG_SFC_SUPPORT_DMA is not set
# CONFIG_SFC_ALLOW_ERASE_WRITEBACK is not set
# CONFIG_SFC_ALREADY_INIT is not set
# CONFIG_SFC_SUPPORT_LPM is not set
# CONFIG_SFC_SUPPORT_SFC_LOCK is not set
# CONFIG_SFC_SUPPORT_DATA_CACHE is not set
# CONFIG_SFC_SUPPORT_RWE_INDEPENDENT is not set
# CONFIG_SFC_SUPPORT_WRITE_PROTECT is not set
# CONFIG_SFC_USE_CUSTOMIZED_DEVICE_INFO is not set
# CONFIG_SFC_DEBUG is not set
# end of SFC Configuration

CONFIG_DRIVER_SUPPORT_SPI=y

#
# SPI Configuration
#

#
# Config SPI
#
# CONFIG_SPI_SUPPORT_MASTER is not set
# CONFIG_SPI_SUPPORT_SLAVE is not set
# CONFIG_SPI_SUPPORT_DMA is not set
# CONFIG_SPI_SUPPORT_INTERRUPT is not set
# CONFIG_SPI_SUPPORT_CONCURRENCY is not set
# CONFIG_SPI_SUPPORT_LOOPBACK is not set
# CONFIG_SPI_SUPPORT_CRC is not set
</code></pre>
<p><strong>å½“å‰é…ç½®åˆ†æ</strong>ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">âœ… å¯ç”¨çš„é…ç½®ï¼š
   â””â”€ CONFIG_DRIVER_SUPPORT_SFC=y         ï¼ˆSFC é©±åŠ¨å¯ç”¨ï¼‰
   â””â”€ CONFIG_DRIVER_SUPPORT_SPI=y         ï¼ˆ<span class="hljs-built_in">SPI</span> é©±åŠ¨å¯ç”¨ï¼‰

âŒ ç¦ç”¨çš„é…ç½®ï¼š
   â””â”€ CONFIG_SFC_SUPPORT_DMA              ï¼ˆDMA ç¦ç”¨ - ä»…å¯„å­˜å™¨æ¨¡å¼ï¼‰
   â””â”€ CONFIG_SPI_SUPPORT_MASTER           ï¼ˆé€šç”¨ <span class="hljs-built_in">SPI</span> Master ç¦ç”¨ï¼‰
   â””â”€ CONFIG_SPI_SUPPORT_SLAVE            ï¼ˆé€šç”¨ <span class="hljs-built_in">SPI</span> Slave ç¦ç”¨ï¼‰
   â””â”€ CONFIG_SPI_SUPPORT_DMA              ï¼ˆ<span class="hljs-built_in">SPI</span> DMA ç¦ç”¨ï¼‰

âš ï¸  å…³é”®å‘ç°ï¼š
   â€¢ SFC æ²¡æœ‰æ˜¾å¼çš„ <span class="hljs-built_in">SPI</span>/QSPI æ¨¡å¼å¼€å…³
   â€¢ QSPI æ¨¡å¼ç”± Flash èŠ¯ç‰‡è‡ªåŠ¨æ£€æµ‹å’Œå¯ç”¨
   â€¢ å½“å‰ä½¿ç”¨çš„æ˜¯å¯„å­˜å™¨æ¨¡å¼ï¼ˆé DMAï¼‰ï¼Œè¾ƒä½æ•ˆç‡
</code></pre>
<hr/>
<h4 data-id="heading-21">ğŸ” æ¨¡å¼é…ç½®å†³ç­–æµç¨‹</h4>
<pre><code class="hljs language-arduino" lang="arduino">ç¡¬ä»¶æ£€æµ‹ Flash èŠ¯ç‰‡
        â”‚
        â”œâ”€â†’ è¯†åˆ« Flash ID
        â”‚   â””â”€ sfc.c line <span class="hljs-number">151</span>
        â”‚       <span class="hljs-built_in">build_cmds</span>(flash_id, ...)
        â”‚
        â””â”€â†’ æŸ¥è¯¢ Flash æ”¯æŒçš„æ¨¡å¼
            â””â”€ flash_config_info.c
                <span class="hljs-type">flash_spi_info_t</span> ä¸­çš„ quad_mode

            â”œâ”€ quad_mode != <span class="hljs-literal">NULL</span>
            â”‚  â””â”€â†’ æ­¤ Flash æ”¯æŒ QSPI
            â”‚      â”œâ”€ è‡ªåŠ¨å¯ç”¨ GPIO_23<span class="hljs-number">-24</span>
            â”‚      â””â”€ é…ç½® QSPI æŒ‡ä»¤
            â”‚
            â””â”€ quad_mode == <span class="hljs-literal">NULL</span>
               â””â”€â†’ æ­¤ Flash ä»…æ”¯æŒ <span class="hljs-built_in">SPI</span>
                   â”œâ”€ ä»…ä½¿ç”¨ GPIO_19<span class="hljs-number">-22</span>
                   â””â”€ é…ç½® <span class="hljs-built_in">SPI</span> æŒ‡ä»¤
</code></pre>
<hr/>
<h3 data-id="heading-22">4ï¸âƒ£ GPIO é‡æ–°å¸ƒçº¿ä¿®æ”¹æ¸…å•</h3>
<h4 data-id="heading-23">âš ï¸ ç¡¬ä»¶GPIOå›ºå®šæ€§è­¦å‘Š</h4>
<pre><code class="hljs language-markdown" lang="markdown">âŒ ã€ä¸å¯ä¿®æ”¹ã€‘ç¡¬ä»¶å›ºå®šçš„ GPIO æ˜ å°„ï¼š

<span class="hljs-code">    GPIO_19 â†â†’ SFC_CLKï¼ˆç¡¬çº¿è¿æ¥ï¼‰
    GPIO_20 â†â†’ SFC_CSNï¼ˆç¡¬çº¿è¿æ¥ï¼‰
    GPIO_21 â†â†’ SFC_IO0/MOSIï¼ˆç¡¬çº¿è¿æ¥ï¼‰
    GPIO_22 â†â†’ SFC_IO1/MISOï¼ˆç¡¬çº¿è¿æ¥ï¼‰
    GPIO_23 â†â†’ SFC_IO2/WPï¼ˆç¡¬çº¿è¿æ¥ï¼‰
    GPIO_24 â†â†’ SFC_IO3/HOLDï¼ˆç¡¬çº¿è¿æ¥ï¼‰
</span>
è¿™äº›æ˜¯èŠ¯ç‰‡è®¾è®¡é˜¶æ®µçš„ç¡¬è¿æ¥ï¼Œæ— æ³•é€šè¿‡è½¯ä»¶ä¿®æ”¹ã€‚
</code></pre>
<h4 data-id="heading-24">ğŸ“ è‹¥<strong>ç¡¬ä»¶é‡æ–°è®¾è®¡</strong>éœ€è¦ä¿®æ”¹GPIO</h4>
<p><strong>å‡è®¾æ–°ç¡¬ä»¶ä½¿ç”¨äº†ä¸åŒçš„ GPIO å¼•è„š</strong>ï¼Œéœ€è¦ä¿®æ”¹ä»¥ä¸‹ä½ç½®ï¼š</p>
<h5 data-id="heading-25"><strong>1ï¸âƒ£ platform_core_rom.h</strong></h5>
<p><strong>æ–‡ä»¶ä½ç½®</strong>ï¼š<a href="https://link.juejin.cn?target=src%2Fdrivers%2Fchips%2Fws63%2Finclude%2Fplatform_core_rom.h" target="_blank" title="src/drivers/chips/ws63/include/platform_core_rom.h" ref="nofollow noopener noreferrer">src/drivers/chips/ws63/include/platform_core_rom.h</a></p>
<p><strong>åŸå†…å®¹</strong>ï¼ˆç¬¬ 50-54 è¡Œï¼‰ï¼š</p>
<pre><code class="hljs language-c" lang="c">SFC_CLK = <span class="hljs-number">19</span>,
SFC_CSN = <span class="hljs-number">20</span>,
SFC_IO0 = <span class="hljs-number">21</span>,
SFC_IO1 = <span class="hljs-number">22</span>,
SFC_IO2 = <span class="hljs-number">23</span>,
SFC_IO3 = <span class="hljs-number">24</span>,
</code></pre>
<p><strong>ä¿®æ”¹ç¤ºä¾‹</strong>ï¼ˆå‡è®¾æ–°ç¡¬ä»¶ç”¨ä¸åŒ GPIOï¼‰ï¼š</p>
<pre><code class="hljs language-c" lang="c">SFC_CLK = <span class="hljs-number">25</span>,    <span class="hljs-comment">// æ”¹ä¸º GPIO_25</span>
SFC_CSN = <span class="hljs-number">26</span>,    <span class="hljs-comment">// æ”¹ä¸º GPIO_26</span>
SFC_IO0 = <span class="hljs-number">27</span>,    <span class="hljs-comment">// æ”¹ä¸º GPIO_27</span>
SFC_IO1 = <span class="hljs-number">28</span>,    <span class="hljs-comment">// æ”¹ä¸º GPIO_28</span>
SFC_IO2 = <span class="hljs-number">29</span>,    <span class="hljs-comment">// æ”¹ä¸º GPIO_29ï¼ˆQSPIï¼‰</span>
SFC_IO3 = <span class="hljs-number">30</span>,    <span class="hljs-comment">// æ”¹ä¸º GPIO_30ï¼ˆQSPIï¼‰</span>
</code></pre>
<p><strong>ä¿®æ”¹æ­¥éª¤</strong>ï¼š</p>
<ol>
<li>ç¡®å®šæ–°çš„ GPIO å·ï¼ˆéœ€è¦ç¡¬ä»¶åŸç†å›¾ç¡®è®¤ï¼‰</li>
<li>ä¿®æ”¹ enum ä¸­çš„æ•°å€¼</li>
<li>ç¡®ä¿æ–° GPIO å·åœ¨æœ‰æ•ˆèŒƒå›´å†…ï¼ˆ0-45 ä»¥å†…ï¼‰</li>
</ol>
<hr/>
<h5 data-id="heading-26"><strong>2ï¸âƒ£ soc_porting.cï¼ˆPad æ§åˆ¶å¯„å­˜å™¨åœ°å€ï¼‰</strong></h5>
<p><strong>æ–‡ä»¶ä½ç½®</strong>ï¼š<a href="https://link.juejin.cn?target=src%2Fdrivers%2Fchips%2Fws63%2Fporting%2Fsoc%2Fsoc_porting.c" target="_blank" title="src/drivers/chips/ws63/porting/soc/soc_porting.c" ref="nofollow noopener noreferrer">src/drivers/chips/ws63/porting/soc/soc_porting.c</a></p>
<p><strong>åŸå†…å®¹</strong>ï¼ˆç¬¬ 64-67 è¡Œï¼‰ï¼š</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-meta">#<span class="hljs-keyword">define</span> PAD_SFC_CLK_CTRL   0x4400d868</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> PAD_SFC_CSN_CTRL   0x4400d86C</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> PAD_SFC_IO0_CTRL   0x4400d870</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> PAD_SFC_IO1_CTRL   0x4400d874</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> PAD_SFC_IO2_CTRL   0x4400d878</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> PAD_SFC_IO3_CTRL   0x4400d87C</span>
</code></pre>
<p><strong>ä¿®æ”¹è¯´æ˜</strong>ï¼š</p>
<ul>
<li>è¿™äº›å¯„å­˜å™¨åœ°å€æ¥è‡ª <strong>WS63 èŠ¯ç‰‡è®¾è®¡æ–‡æ¡£</strong></li>
<li>æ¯ä¸ªæ–° GPIO å·å¯¹åº”æ–°çš„å¯„å­˜å™¨åœ°å€</li>
<li><strong>éœ€è¦æŸ¥é˜… WS63 æ•°æ®æ‰‹å†Œ</strong>è·å–æ–°åœ°å€</li>
</ul>
<p><strong>ä¿®æ”¹ç¤ºä¾‹</strong>ï¼ˆå‡è®¾æ–° GPIO çš„ Pad åœ°å€ï¼‰ï¼š</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-meta">#<span class="hljs-keyword">define</span> PAD_SFC_CLK_CTRL   0x4400d880    <span class="hljs-comment">// æ–°åœ°å€</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> PAD_SFC_CSN_CTRL   0x4400d884</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> PAD_SFC_IO0_CTRL   0x4400d888</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> PAD_SFC_IO1_CTRL   0x4400d88C</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> PAD_SFC_IO2_CTRL   0x4400d890</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> PAD_SFC_IO3_CTRL   0x4400d894</span>
</code></pre>
<hr/>
<h5 data-id="heading-27"><strong>3ï¸âƒ£ hal_pinctrl_ws63.c</strong></h5>
<p><strong>æ–‡ä»¶ä½ç½®</strong>ï¼š<a href="https://link.juejin.cn?target=src%2Fdrivers%2Fdrivers%2Fhal%2Fpinmux%2Fws63%2Fhal_pinctrl_ws63.c" target="_blank" title="src/drivers/drivers/hal/pinmux/ws63/hal_pinctrl_ws63.c" ref="nofollow noopener noreferrer">src/drivers/drivers/hal/pinmux/ws63/hal_pinctrl_ws63.c</a></p>
<p><strong>åŸå†…å®¹</strong>ï¼ˆç¬¬ 109-140 è¡Œï¼‰ï¼š</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-type">static</span> <span class="hljs-type">hal_pin_config_group_t</span> <span class="hljs-type">const</span> g_pin_pull_map[] = {
    {
        GPIO_00,
        GPIO_14,
        <span class="hljs-comment">// ... GPIO_00~14 ...</span>
    },
    {
        SFC_CLK,    <span class="hljs-comment">// = 19</span>
        SFC_IO3,    <span class="hljs-comment">// = 24</span>
        HAL_PIN_SFC_CTRL_START_ADDR,
        <span class="hljs-comment">// ...</span>
    }
};
</code></pre>
<p><strong>ä¿®æ”¹è¯´æ˜</strong>ï¼š</p>
<ul>
<li>å¦‚æœæ–° GPIO å·ä»åœ¨è¿ç»­èŒƒå›´å†…ï¼ˆå¦‚ 25-30ï¼‰ï¼Œåªéœ€ä¿®æ”¹ begin å’Œ end</li>
<li>å¦‚æœåˆ†æ•£åœ¨ä¸åŒèŒƒå›´ï¼Œå¯èƒ½éœ€è¦æ–°å¢é…ç½®ç»„</li>
</ul>
<p><strong>ä¿®æ”¹ç¤ºä¾‹</strong>ï¼ˆå‡è®¾æ–° GPIO ä¸º 25-30ï¼‰ï¼š</p>
<pre><code class="hljs language-c" lang="c">{
    SFC_CLK,        <span class="hljs-comment">// æ–°å®šä¹‰ä¸º GPIO_25</span>
    SFC_IO3,        <span class="hljs-comment">// æ–°å®šä¹‰ä¸º GPIO_30</span>
    HAL_PIN_SFC_CTRL_START_ADDR,  <span class="hljs-comment">// ä½¿ç”¨æ–°çš„åŸºåœ°å€</span>
    HAL_PIN_CONFIG_PER_NUM,
    HAL_PIN_PULL_START_BIT,
    HAL_PIN_PULL_BITS_NUM
}
</code></pre>
<hr/>
<h4 data-id="heading-28">ğŸš« Kconfig ä¸­<strong>æ— éœ€ä¿®æ”¹</strong>çš„å†…å®¹</h4>
<pre><code class="hljs language-bash" lang="bash">âœ… Kconfig æ–‡ä»¶ï¼š
   â€¢ src/drivers/drivers/Kconfig
   â€¢ src/drivers/chips/ws63/rom/drivers/drivers/driver/sfc/Kconfig
   â€¢ src/application/samples/peripheral/spi/Kconfig

ä¸ºä»€ä¹ˆï¼Ÿ
   â”œâ”€ GPIO pin å·ä¸åœ¨ Kconfig ä¸­ç¡¬ç¼–ç 
   â”œâ”€ Kconfig åªæ§åˆ¶åŠŸèƒ½å¯ç”¨/ç¦ç”¨å¼€å…³
   â””â”€ Pin æ˜ å°„åœ¨æºä»£ç ä¸­å®šä¹‰ï¼Œä¸åœ¨é…ç½®ä¸­
</code></pre>
<hr/>
<h4 data-id="heading-29">âœ… å®Œæ•´ä¿®æ”¹æ£€æŸ¥æ¸…å•</h4>
<h5 data-id="heading-30">å¦‚æœåªæ˜¯æ™®é€šé¡¹ç›®ï¼ˆä¸æ”¹ç¡¬ä»¶GPIOï¼‰ï¼š</h5>
<pre><code class="hljs">âœ… æ£€æŸ¥é¡¹ï¼š
   â˜ ç¡®è®¤å½“å‰ GPIO_19-24 åœ¨ç¡¬ä»¶ä¸Šè¿æ¥æ­£ç¡®
   â˜ æ£€æŸ¥åŸç†å›¾ä¸­ Flash pin çš„ç‰©ç†è¿æ¥
   â˜ éªŒè¯ç”µæºå’Œ GND è¿æ¥
   â˜ ç¡®ä¿ Flash èŠ¯ç‰‡è§„æ ¼ä¹¦ä¸­æ”¯æŒå½“å‰å›ºä»¶
   
âŒ æ— éœ€ä¿®æ”¹ä»»ä½•ä»£ç 
</code></pre>
<h5 data-id="heading-31">å¦‚æœéœ€è¦ç¡¬ä»¶gpioé‡æ–°å¸ƒçº¿ï¼š</h5>
<pre><code class="hljs language-markdown" lang="markdown">âœ… ä¿®æ”¹æ­¥éª¤ï¼š
<span class="hljs-bullet">   1.</span> è·å–ç¡¬ä»¶åŸç†å›¾
<span class="hljs-bullet">   2.</span> ç¡®å®šæ–° GPIO å·å’Œ Pad å¯„å­˜å™¨åœ°å€
<span class="hljs-bullet">   3.</span> ä¿®æ”¹ platform<span class="hljs-emphasis">_core_</span>rom.hï¼ˆGPIO å·ï¼‰
<span class="hljs-bullet">   4.</span> ä¿®æ”¹ soc<span class="hljs-emphasis">_porting.cï¼ˆPad æ§åˆ¶åœ°å€ï¼‰
   5. ä¿®æ”¹ hal_</span>pinctrl<span class="hljs-emphasis">_ws63.cï¼ˆpin é…ç½®èŒƒå›´ï¼‰
   6. ç¼–è¯‘éªŒè¯
   7. çƒ§å½• BootLoader æ‰§è¡Œåˆå§‹åŒ–

ğŸ”§ å·¥å…·éœ€æ±‚ï¼š
   â€¢ WS63 æ•°æ®æ‰‹å†Œï¼ˆè·å– Pad åœ°å€ï¼‰
   â€¢ FlashTool é‡æ–°çƒ§å½• BootLoader
   â€¢ ç¡¬ä»¶æµ‹è¯•å·¥å…·ï¼ˆç¤ºæ³¢å™¨ã€é€»è¾‘åˆ†æä»ªï¼‰
</span></code></pre>
<hr/>
<h3 data-id="heading-32">5ï¸âƒ£ ä»£ç è·¯å¾„æ±‡æ€»</h3>
<h4 data-id="heading-33">ğŸ“ æ–‡ä»¶ç»“æ„å›¾</h4>
<pre><code class="hljs language-erlang" lang="erlang">fbb_ws63-master/
â”œâ”€â”€ src/drivers/
â”‚   â”œâ”€â”€ chips/ws63/
â”‚   â”‚   â”œâ”€â”€ include/
â”‚   â”‚   â”‚   â”œâ”€â”€ platform_core_rom.h                â­ GPIO æšä¸¾å®šä¹‰
â”‚   â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚   â”œâ”€â”€ porting/
â”‚   â”‚   â”‚   â”œâ”€â”€ soc/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ soc_porting.c                 â­ Pad å¯„å­˜å™¨åœ°å€
â”‚   â”‚   â”‚   â”œâ”€â”€ sfc/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ sfc_porting.h                 ğŸ“‹ SFC é…ç½®ç»“æ„ä½“
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ porting/
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ sfc_porting.c             â­ SFC å¯„å­˜å™¨åŸºåœ°å€
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ driver/
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ sfc.c                     ğŸ’» SFC é©±åŠ¨æ ¸å¿ƒ
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ flash_config/
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ flash_config_info.c       ğŸ“Š Flash èŠ¯ç‰‡é…ç½®
â”‚   â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ drivers/
â”‚   â”‚   â”œâ”€â”€ hal/
â”‚   â”‚   â”‚   â”œâ”€â”€ pinmux/ws63/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ hal_pinctrl_ws63.c            â­ Pin æ§åˆ¶é…ç½®
â”‚   â”‚   â”‚   â”œâ”€â”€ sfc/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ hal_sfc_v150.c               ğŸ’» SFC HAL å±‚
â”‚   â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚   â”œâ”€â”€ Kconfig                               ğŸ“ é©±åŠ¨é…ç½®å¼€å…³
â”‚   â”‚   â””â”€â”€ ...
â”‚   â””â”€â”€ ...
â”œâ”€â”€ src/application/
â”‚   â””â”€â”€ samples/
â”‚       â””â”€â”€ peripheral/
â”‚           â”œâ”€â”€ spi/
â”‚           â”‚   â”œâ”€â”€ Kconfig                       ğŸ“ SPI é…ç½®å¼€å…³
â”‚           â”‚   â””â”€â”€ spi_master_demo.c             ğŸ“œ SPI Master ç¤ºä¾‹
â”‚           â””â”€â”€ sfc/
â”‚               â””â”€â”€ sfc_demo.c                    ğŸ“œ SFC ä½¿ç”¨ç¤ºä¾‹
â”œâ”€â”€ src/build/
â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â””â”€â”€ target_config/ws63/menuconfig/acore/
â”‚   â”‚       â”œâ”€â”€ ws63_liteos_app.config            âš™ï¸  APP é…ç½®
â”‚   â”‚       â”œâ”€â”€ ws63_flashboot.config             âš™ï¸  BootLoader é…ç½®
â”‚   â”‚       â””â”€â”€ ws63_liteos_testsuite.config      âš™ï¸  æµ‹è¯•å¥—ä»¶é…ç½®
â”‚   â””â”€â”€ ...
â””â”€â”€ ...
</code></pre>
<hr/>
<h4 data-id="heading-34">ğŸ”‘ æ ¸å¿ƒæ–‡ä»¶è¯¦è§£</h4>


















































































<table><thead><tr><th>#</th><th>æ–‡ä»¶å</th><th>è·¯å¾„</th><th>åŠŸèƒ½</th><th>ä¿®æ”¹é¢‘ç‡</th></tr></thead><tbody><tr><td>1</td><td><strong>platform_core_rom.h</strong></td><td><code>src/drivers/chips/ws63/include/</code></td><td>GPIO æšä¸¾å®šä¹‰ï¼ˆGPIO_19-24ï¼‰</td><td>ğŸ”´ æå°‘ä¿®æ”¹</td></tr><tr><td>2</td><td><strong>soc_porting.c</strong></td><td><code>src/drivers/chips/ws63/porting/soc/</code></td><td>Pad å¯„å­˜å™¨åœ°å€ &amp; é©±åŠ¨å¼ºåº¦é…ç½®</td><td>ğŸ”´ æå°‘ä¿®æ”¹</td></tr><tr><td>3</td><td><strong>hal_pinctrl_ws63.c</strong></td><td><code>src/drivers/drivers/hal/pinmux/ws63/</code></td><td>Pin æ§åˆ¶é…ç½®æ˜ å°„è¡¨</td><td>ğŸŸ¡ å¦‚æœæ”¹GPIO</td></tr><tr><td>4</td><td><strong>sfc_porting.h</strong></td><td><code>src/drivers/chips/ws63/porting/sfc/</code></td><td>SFC é…ç½®ç»“æ„ä½“å®šä¹‰</td><td>ğŸŸ¢ å¯é…ç½®</td></tr><tr><td>5</td><td><strong>sfc_porting.c</strong></td><td><code>src/drivers/chips/ws63/porting/sfc/porting/</code></td><td>SFC å¯„å­˜å™¨åŸºåœ°å€</td><td>ğŸ”´ å›ºå®š</td></tr><tr><td>6</td><td><strong>sfc.c</strong></td><td><code>src/drivers/chips/ws63/porting/sfc/driver/</code></td><td>SFC é©±åŠ¨å®ç°</td><td>ğŸŸ¢ æŒ‰éœ€é…ç½®</td></tr><tr><td>7</td><td><strong>flash_config_info.c</strong></td><td><code>src/drivers/chips/ws63/porting/sfc/flash_config/</code></td><td>Flash èŠ¯ç‰‡æ•°æ®åº“</td><td>ğŸŸ¢ æ–°èŠ¯ç‰‡éœ€æ·»åŠ </td></tr><tr><td>8</td><td><strong>hal_sfc_v150.c</strong></td><td><code>src/drivers/drivers/hal/sfc/</code></td><td>SFC ç¡¬ä»¶æŠ½è±¡å±‚</td><td>ğŸ”´ æå°‘ä¿®æ”¹</td></tr><tr><td>9</td><td><strong>Kconfig</strong></td><td><code>src/drivers/drivers/</code></td><td>é©±åŠ¨åŠŸèƒ½å¼€å…³</td><td>ğŸŸ¡ æŒ‰é¡¹ç›®éœ€æ±‚</td></tr><tr><td>10</td><td><strong>.config</strong></td><td><code>src/build/config/target_config/ws63/</code></td><td>å½“å‰ç¼–è¯‘é…ç½®</td><td>ğŸŸ¢ é¢‘ç¹ä¿®æ”¹</td></tr></tbody></table>
<p><strong>å›¾ä¾‹</strong>ï¼š</p>
<ul>
<li>ğŸ”´ çº¢è‰²ï¼šç¡¬ä»¶å›ºå®šï¼Œæå°‘æ”¹åŠ¨</li>
<li>ğŸŸ¡ é»„è‰²ï¼šç‰¹å®šåœºæ™¯ä¿®æ”¹</li>
<li>ğŸŸ¢ ç»¿è‰²ï¼šå¸¸è§„é…ç½®å’Œå®šåˆ¶</li>
</ul>
<hr/>
<h4 data-id="heading-35">ğŸ” åŠŸèƒ½è¿½è¸ª</h4>
<h5 data-id="heading-36"><strong>"å¦‚ä½•å¯ç”¨ QSPI æ¨¡å¼ï¼Ÿ"è¿½è¸ª</strong></h5>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-bullet">1.</span> ç¡¬ä»¶æ£€æµ‹é˜¶æ®µ
   â””â”€ sfc.c:151
<span class="hljs-code">       uapi_sfc_init() å…¥å£
           â†“
       build_cmds(flash_id, ...)
           â†“
</span>
<span class="hljs-bullet">2.</span> Flash èŠ¯ç‰‡æŸ¥è¯¢
   â””â”€ flash<span class="hljs-emphasis">_config_</span>info.c
<span class="hljs-code">       æŸ¥è¯¢ flash_spi_info_t æ•°ç»„
       æ‰¾åˆ°åŒ¹é…çš„ flash_id
           â†“
</span>
<span class="hljs-bullet">3.</span> æ¨¡å¼è‡ªåŠ¨é€‰æ‹©
   â””â”€ sfc.c:67
<span class="hljs-code">       if (spi_info-&gt;quad_mode != NULL)
           â”œâ”€ QSPI æ”¯æŒ
           â”‚  â”œâ”€ è‡ªåŠ¨å¯ç”¨ GPIO_23-24
           â”‚  â”œâ”€ åŠ è½½ QSPI æŒ‡ä»¤åºåˆ—
           â”‚  â””â”€ é…ç½® Quad SPI æ¨¡å¼
           â””â”€ SPI ä»…æ”¯æŒ
              â”œâ”€ ä»…ä½¿ç”¨ GPIO_19-22
              â”œâ”€ åŠ è½½ SPI æŒ‡ä»¤
              â””â”€ é…ç½®æ ‡å‡† SPI æ¨¡å¼
</span>
<span class="hljs-bullet">4.</span> HAL å±‚åˆå§‹åŒ–
   â””â”€ hal<span class="hljs-emphasis">_sfc_</span>v150.c
<span class="hljs-code">       hal_sfc_init()
       æ ¹æ® quad_mode å‚æ•°é…ç½®ç¡¬ä»¶
           â†“
</span>
<span class="hljs-bullet">5.</span> å®Œæˆ
   â””â”€ é©±åŠ¨è‡ªåŠ¨è¿è¡Œäºæœ€ä¼˜æ¨¡å¼
</code></pre>
<hr/>
<h5 data-id="heading-37"><strong>"å¦‚ä½•ä¿®æ”¹ Flash é…ç½®ï¼Ÿ"è¿½è¸ª</strong></h5>
<pre><code class="hljs language-ini" lang="ini">1. æ‰¾åˆ°ä½¿ç”¨çš„ Flash èŠ¯ç‰‡å‹å·
   â””â”€ ç¡¬ä»¶åŸç†å›¾ â†’ Flash èŠ¯ç‰‡æ‰‹å†Œ

2. æ£€æŸ¥ flash_config_info.c
   â””â”€ æŸ¥æ‰¾å¯¹åº”çš„ FLASH_XXX ID å®šä¹‰
       æ˜¯å¦å­˜åœ¨è¯¥èŠ¯ç‰‡é…ç½®

3. å¦‚æœå·²æœ‰é…ç½®
   â””â”€ sfc.c ä¼šè‡ªåŠ¨ä½¿ç”¨
   â””â”€ æ— éœ€ä¿®æ”¹ä»£ç 

4. å¦‚æœæ— è¯¥é…ç½®
   â””â”€ flash_config_info.c
       ä»¿ç…§ç°æœ‰æ ¼å¼æ·»åŠ è¯¥ Flash é…ç½®
           â”œâ”€ .<span class="hljs-attr">chip_id</span> = <span class="hljs-number">0</span>xXXXXXX
           â”œâ”€ .read_cmds<span class="hljs-section">[]</span> = { ... }
           â”œâ”€ .write_cmds<span class="hljs-section">[]</span> = { ... }
           â”œâ”€ .erase_cmds<span class="hljs-section">[]</span> = { ... }
           â””â”€ .<span class="hljs-attr">quad_mode</span> = &amp;cmd_seq  (å¦‚æœæ”¯æŒ)

5. é‡æ–°ç¼–è¯‘çƒ§å½•
</code></pre>
<hr/>
<h4 data-id="heading-38">ğŸ¯ å¿«é€ŸæŸ¥æ‰¾è¡¨</h4>
<p><strong>æˆ‘æƒ³è¦é…ç½®...</strong></p>

































































<table><thead><tr><th>éœ€æ±‚</th><th>æ–‡ä»¶</th><th>è¡Œå·</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>æŸ¥çœ‹ GPIO å®šä¹‰</td><td>platform_core_rom.h</td><td>50-54</td><td>enum GPIO ç¼–å·</td></tr><tr><td>æ”¹å˜ GPIO å·</td><td>platform_core_rom.h</td><td>50-54</td><td>ä¿®æ”¹æšä¸¾å€¼</td></tr><tr><td>è°ƒæ•´é©±åŠ¨å¼ºåº¦</td><td>soc_porting.c</td><td>70-71</td><td>SFC_CLK_DS_VALUE ç­‰</td></tr><tr><td>å¯ç”¨ DMA</td><td>Kconfig</td><td>é…ç½®èœå•</td><td>CONFIG_SFC_SUPPORT_DMA</td></tr><tr><td>æ·»åŠ æ–° Flash</td><td>flash_config_info.c</td><td>å…¨æ–‡</td><td>ä»¿ç…§ç°æœ‰æ¡ç›®æ·»åŠ </td></tr><tr><td>å¯ç”¨ Quad æ¨¡å¼</td><td>è‡ªåŠ¨</td><td>-</td><td>Flash è‡ªåŠ¨æ£€æµ‹</td></tr><tr><td>æŸ¥çœ‹ SFC åˆå§‹åŒ–</td><td>sfc.c</td><td>145-170</td><td>uapi_sfc_init() å‡½æ•°</td></tr><tr><td>æŸ¥çœ‹ Pin é…ç½®</td><td>hal_pinctrl_ws63.c</td><td>109-140</td><td>g_pin_xxx_map æ•°ç»„</td></tr><tr><td>ç¦ç”¨ SFC</td><td>Kconfig</td><td>é©±åŠ¨èœå•</td><td>CONFIG_DRIVER_SUPPORT_SFC</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-39">ğŸ“ æ€»ç»“å¯¹æ¯”è¡¨</h3>
<h4 data-id="heading-40">SPI vs QSPI æ¨¡å¼ï¼šç¡¬ä»¶è§†è§’</h4>
<pre><code class="hljs language-scss" lang="scss">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç‰¹æ€§         â”‚ SPI æ¨¡å¼        â”‚ QSPI æ¨¡å¼       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ GPIO pin     â”‚ GPIO_19~<span class="hljs-number">22</span>      â”‚ GPIO_19~<span class="hljs-number">24</span>      â”‚
â”‚ æ€»æ•°         â”‚ <span class="hljs-number">4</span> æ¡            â”‚ <span class="hljs-number">6</span> æ¡            â”‚
â”‚ CLK          â”‚ GPIO_19         â”‚ GPIO_19         â”‚
â”‚ CSN          â”‚ GPIO_20         â”‚ GPIO_20         â”‚
â”‚ <span class="hljs-built_in">MOSI</span>(IO0)    â”‚ GPIO_21         â”‚ GPIO_21         â”‚
â”‚ <span class="hljs-built_in">MISO</span>(IO1)    â”‚ GPIO_22         â”‚ GPIO_22         â”‚
â”‚ <span class="hljs-built_in">WP</span>(IO2)      â”‚ âŒ ä¸éœ€è¦       â”‚ GPIO_23         â”‚
â”‚ <span class="hljs-built_in">HOLD</span>(IO3)    â”‚ âŒ ä¸éœ€è¦       â”‚ GPIO_24         â”‚
â”‚ é©±åŠ¨å¼ºåº¦     â”‚ åœ¨ soc_porting<span class="hljs-selector-class">.c</span> ä¸­é…ç½® | åŒå·¦   â”‚
â”‚ Pad å¯„å­˜å™¨   â”‚ <span class="hljs-number">0</span>x4400d868-<span class="hljs-number">74</span>   â”‚ <span class="hljs-number">0</span>x4400d868-<span class="hljs-number">7</span>C   â”‚
â”‚ æ•°æ®çº¿æ•°     â”‚ <span class="hljs-number">1</span>(æ”¶) + <span class="hljs-number">1</span>(å‘)   â”‚ <span class="hljs-number">4</span> çº¿åŒå‘        â”‚
â”‚ ä¼ è¾“é€Ÿç‡     â”‚ åŸºçº¿            â”‚ ~<span class="hljs-number">4</span>x å¿«é€Ÿ        â”‚
â”‚ Pin é…ç½®æ–‡ä»¶ â”‚ hal_pinctrl_ws63<span class="hljs-selector-class">.c</span> ï¼ˆç»Ÿä¸€ï¼‰       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h4 data-id="heading-41">ç¼–è¯‘é…ç½®ï¼šå½“å‰é¡¹ç›®çŠ¶æ€</h4>
<pre><code class="hljs language-ini" lang="ini">â”œâ”€ <span class="hljs-attr">CONFIG_DRIVER_SUPPORT_SFC</span>=y       âœ… SFC é©±åŠ¨å¯ç”¨
â”œâ”€ <span class="hljs-attr">CONFIG_DRIVER_SUPPORT_SPI</span>=y       âœ… é€šç”¨ SPI å¯ç”¨ï¼ˆä½†æ—  Masterï¼‰
â”œâ”€ CONFIG_SFC_SUPPORT_DMA æœªè®¾       âŒ ç¦ç”¨ DMAï¼ˆä½æ€§èƒ½ï¼‰
â”‚
â””â”€ å½“å‰æ¨¡å¼è‡ªåŠ¨æ£€æµ‹ï¼š
    Flash æ”¯æŒ QUAD â†’ è‡ªåŠ¨å¯ç”¨ QSPIï¼ˆGPIO_19-24ï¼‰
    Flash ä»…æ”¯æŒ SPI â†’ ä½¿ç”¨ SPI æ¨¡å¼ï¼ˆGPIO_19-22ï¼‰
</code></pre>
<h4 data-id="heading-42">ä¿®æ”¹éœ€æ±‚æ¸…å•</h4>
<pre><code class="hljs language-arduino" lang="arduino">åœºæ™¯ <span class="hljs-number">1</span>ï¼šä»…ä½¿ç”¨ç°æœ‰ç¡¬ä»¶ï¼ˆGPIO_19<span class="hljs-number">-24</span>ï¼‰
   ä¿®æ”¹æ–‡ä»¶ï¼šæ— 
   é‡ç¼–è¯‘ï¼šä»…éœ€æ›´æ–° .configï¼ˆå¦‚å¯ç”¨ DMAï¼‰
   
åœºæ™¯ <span class="hljs-number">2</span>ï¼šæ›´æ¢ä¸åŒ Flash èŠ¯ç‰‡ï¼ˆåŒ GPIOï¼‰
   ä¿®æ”¹æ–‡ä»¶ï¼šå¯èƒ½éœ€è¦ flash_config_info.c
   é‡ç¼–è¯‘ï¼šä»…é©±åŠ¨ä»£ç 
   
åœºæ™¯ <span class="hljs-number">3</span>ï¼šé‡æ–°è®¾è®¡ç¡¬ä»¶ï¼ˆä¸åŒ GPIOï¼‰
   ä¿®æ”¹æ–‡ä»¶ï¼š
      âœï¸  platform_core_rom.hï¼ˆGPIO æšä¸¾ï¼‰
      âœï¸  soc_porting.cï¼ˆPad åœ°å€ï¼‰
      âœï¸  hal_pinctrl_ws63.cï¼ˆPin é…ç½®ï¼‰
   é‡ç¼–è¯‘ï¼šæ•´ä¸ªé©±åŠ¨ + BootLoader
   çƒ§å½•ï¼šé‡æ–°åˆå§‹åŒ–ç¡¬ä»¶
</code></pre>
<hr/>
<h3 data-id="heading-43">ğŸ“š å‚è€ƒèµ„æº</h3>






























<table><thead><tr><th>èµ„æº</th><th>ä½ç½®</th><th>ç”¨é€”</th></tr></thead><tbody><tr><td><strong>WS63 æ•°æ®æ‰‹å†Œ</strong></td><td>ï¼ˆç¡¬ä»¶æ–‡æ¡£ï¼‰</td><td>Pad åœ°å€ã€GPIO å®šä¹‰</td></tr><tr><td><strong>GPIO_LITTLEFS_ANALYSIS.md</strong></td><td>é¡¹ç›®æ ¹ç›®å½•</td><td>GPIO é…ç½®è¯¦è§£</td></tr><tr><td><strong>SFC_GPIO_PIN_MAPPING.md</strong></td><td>AI/ æ–‡ä»¶å¤¹</td><td>Pin æ˜ å°„å‚è€ƒ</td></tr><tr><td><strong>NOR_FLASH_CONFIG_PARAMETER_GUIDE.md</strong></td><td>AI/ æ–‡ä»¶å¤¹</td><td>Flash é…ç½®æŒ‡å—</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-44">â“ å¸¸è§é—®é¢˜è§£ç­”</h3>
<h4 data-id="heading-45">Q1ï¼šèƒ½å¦æ”¹å˜ GPIO_19-24 çš„å¼•è„šå·ï¼Ÿ</h4>
<p><strong>A</strong>ï¼šä¸èƒ½ã€‚è¿™æ˜¯ç¡¬ä»¶çº§åˆ«çš„å›ºå®šè¿æ¥ã€‚SFC ç¡¬ä»¶å†…éƒ¨å·²ç›´æ¥è¿æ¥åˆ°è¿™äº› GPIOï¼Œæ”¹éœ€è¦é‡æ–°è®¾è®¡èŠ¯ç‰‡ã€‚</p>
<h4 data-id="heading-46">Q2ï¼šSPI å’Œ QSPI æ˜¯å¦å¯ä»¥åŒæ—¶å¯ç”¨ï¼Ÿ</h4>
<p><strong>A</strong>ï¼šåœ¨ SFC é©±åŠ¨ä¸­ï¼ŒFlash è‡ªåŠ¨é€‰æ‹©ä¸€ç§æ¨¡å¼ã€‚ä½†é€šç”¨ SPI æ¨¡å—å¯ç‹¬ç«‹ä½¿ç”¨ä¸åŒ GPIOï¼ˆå¦‚ GPIO_40-41ï¼‰ï¼Œä¸ SFC æ— å†²çªã€‚</p>
<h4 data-id="heading-47">Q3ï¼šä¸ºä»€ä¹ˆé…ç½®ä¸­æ²¡æœ‰ QSPI å¼€å…³ï¼Ÿ</h4>
<p><strong>A</strong>ï¼šå› ä¸º QSPI æ¨¡å¼ç”± Flash èŠ¯ç‰‡å†³å®šã€‚SFC é©±åŠ¨è‡ªåŠ¨æ£€æµ‹ Flash æ˜¯å¦æ”¯æŒ Quad æ¨¡å¼ï¼Œæ— éœ€æ‰‹åŠ¨å¼€å…³ã€‚</p>
<h4 data-id="heading-48">Q4ï¼šä¿®æ”¹äº† GPIO å®šä¹‰åç¼–è¯‘ä¸è¿‡æ€ä¹ˆåŠï¼Ÿ</h4>
<p><strong>A</strong>ï¼š</p>
<ol>
<li>æ£€æŸ¥æ–° GPIO å·æ˜¯å¦è¶…å‡ºæœ‰æ•ˆèŒƒå›´ï¼ˆ0-45ï¼‰</li>
<li>æ›´æ–°æ‰€æœ‰æ¶‰åŠçš„æ–‡ä»¶ï¼ˆplatform_core_rom.hã€soc_porting.cã€hal_pinctrl_ws63.cï¼‰</li>
<li>æ¸…ç†ç¼–è¯‘ç¼“å­˜ï¼š<code>rm -rf src/build/cmake_build</code></li>
<li>é‡æ–°ç¼–è¯‘</li>
</ol>
<h4 data-id="heading-49">Q5ï¼šGPIO_23-24 å¯ä»¥ç”¨äºå…¶ä»–åŠŸèƒ½å—ï¼Ÿ</h4>
<p><strong>A</strong>ï¼šå¦‚æœ Flash ä¸æ”¯æŒ QSPIï¼Œè¿™ä¸¤ä¸ª GPIO ç†è®ºä¸Šå¯å¤ç”¨ã€‚ä½†ä¸å»ºè®®ï¼š</p>
<ul>
<li>ç¡¬ä»¶è®¾è®¡é€šå¸¸å·²è¿æ¥åˆ° Flash</li>
<li>ä¼šä½¿ä»£ç ç»´æŠ¤å¤æ‚åŒ–</li>
<li>å¯ç”¨çš„ GPIO æœ‰å…¶ä»–é€‰é¡¹ï¼ˆGPIO_0-18, GPIO_25+ï¼‰</li>
</ul>
<hr/>
<p><strong>æ–‡æ¡£æ›´æ–°æ—¶é—´</strong>ï¼š2025-02 | <strong>FBB_WS63 ç‰ˆæœ¬</strong>ï¼šæœ€æ–° | <strong>é€‚ç”¨èŒƒå›´</strong>ï¼šSPI/QSPI é…ç½®</p>
<p>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”--â€”â€”â€”â€”â€”â€”</p>
<h2 data-id="heading-50">FBB_WS63 SFC GPIO ä¿®æ”¹ä»£ç ç¤ºä¾‹</h2>
<h3 data-id="heading-51">ğŸ¯ ä½¿ç”¨åœºæ™¯ï¼šå‡è®¾éœ€è¦æ”¹å˜ GPIO æ˜ å°„</h3>
<p>å‡å®šåŸç¡¬ä»¶ä½¿ç”¨ GPIO_19-24ï¼Œç°åœ¨éœ€è¦æ”¹ä¸º GPIO_25-30ï¼ˆä»…ä½œç¤ºä¾‹ï¼‰</p>
<hr/>
<h3 data-id="heading-52">æ¨¡æ¿ 1ï¼šplatform_core_rom.h ä¿®æ”¹ç¤ºä¾‹</h3>
<h4 data-id="heading-53">åŸå§‹ä»£ç </h4>
<p><strong>æ–‡ä»¶</strong>ï¼š<code>src/drivers/chips/ws63/include/platform_core_rom.h</code>
<strong>è¡Œå·</strong>ï¼š45-60</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-comment">/**
 * @brief Definition of pin.
 */</span>
<span class="hljs-keyword">typedef</span> <span class="hljs-class"><span class="hljs-keyword">enum</span> {</span>
    GPIO_00 = <span class="hljs-number">0</span>,
    GPIO_01 = <span class="hljs-number">1</span>,
    GPIO_02 = <span class="hljs-number">2</span>,
    GPIO_03 = <span class="hljs-number">3</span>,
    GPIO_04 = <span class="hljs-number">4</span>,
    GPIO_05 = <span class="hljs-number">5</span>,
    GPIO_06 = <span class="hljs-number">6</span>,
    GPIO_07 = <span class="hljs-number">7</span>,
    GPIO_08 = <span class="hljs-number">8</span>,
    GPIO_09 = <span class="hljs-number">9</span>,
    GPIO_10 = <span class="hljs-number">10</span>,
    GPIO_11 = <span class="hljs-number">11</span>,
    GPIO_12 = <span class="hljs-number">12</span>,
    GPIO_13 = <span class="hljs-number">13</span>,
    GPIO_14 = <span class="hljs-number">14</span>,
    GPIO_15 = <span class="hljs-number">15</span>,
    GPIO_16 = <span class="hljs-number">16</span>,
    GPIO_17 = <span class="hljs-number">17</span>,
    GPIO_18 = <span class="hljs-number">18</span>,
    SFC_CLK = <span class="hljs-number">19</span>,      <span class="hljs-comment">// â† åŸå€¼</span>
    SFC_CSN = <span class="hljs-number">20</span>,      <span class="hljs-comment">// â† åŸå€¼</span>
    SFC_IO0 = <span class="hljs-number">21</span>,      <span class="hljs-comment">// â† åŸå€¼</span>
    SFC_IO1 = <span class="hljs-number">22</span>,      <span class="hljs-comment">// â† åŸå€¼</span>
    SFC_IO2 = <span class="hljs-number">23</span>,      <span class="hljs-comment">// â† åŸå€¼</span>
    SFC_IO3 = <span class="hljs-number">24</span>,      <span class="hljs-comment">// â† åŸå€¼</span>
    PIN_NONE = <span class="hljs-number">25</span>, <span class="hljs-comment">// used as invalid/unused PIN number</span>
} <span class="hljs-type">pin_t</span>;
</code></pre>
<h4 data-id="heading-54">ä¿®æ”¹åçš„ä»£ç </h4>
<pre><code class="hljs language-c" lang="c"><span class="hljs-comment">/**
 * @brief Definition of pin.
 */</span>
<span class="hljs-keyword">typedef</span> <span class="hljs-class"><span class="hljs-keyword">enum</span> {</span>
    GPIO_00 = <span class="hljs-number">0</span>,
    GPIO_01 = <span class="hljs-number">1</span>,
    GPIO_02 = <span class="hljs-number">2</span>,
    GPIO_03 = <span class="hljs-number">3</span>,
    GPIO_04 = <span class="hljs-number">4</span>,
    GPIO_05 = <span class="hljs-number">5</span>,
    GPIO_06 = <span class="hljs-number">6</span>,
    GPIO_07 = <span class="hljs-number">7</span>,
    GPIO_08 = <span class="hljs-number">8</span>,
    GPIO_09 = <span class="hljs-number">9</span>,
    GPIO_10 = <span class="hljs-number">10</span>,
    GPIO_11 = <span class="hljs-number">11</span>,
    GPIO_12 = <span class="hljs-number">12</span>,
    GPIO_13 = <span class="hljs-number">13</span>,
    GPIO_14 = <span class="hljs-number">14</span>,
    GPIO_15 = <span class="hljs-number">15</span>,
    GPIO_16 = <span class="hljs-number">16</span>,
    GPIO_17 = <span class="hljs-number">17</span>,
    GPIO_18 = <span class="hljs-number">18</span>,
    GPIO_19 = <span class="hljs-number">19</span>,      <span class="hljs-comment">// ç°åœ¨ä½œä¸ºæ™®é€š GPIO</span>
    GPIO_20 = <span class="hljs-number">20</span>,      <span class="hljs-comment">// ç°åœ¨ä½œä¸ºæ™®é€š GPIO</span>
    GPIO_21 = <span class="hljs-number">21</span>,      <span class="hljs-comment">// ç°åœ¨ä½œä¸ºæ™®é€š GPIO</span>
    GPIO_22 = <span class="hljs-number">22</span>,      <span class="hljs-comment">// ç°åœ¨ä½œä¸ºæ™®é€š GPIO</span>
    GPIO_23 = <span class="hljs-number">23</span>,      <span class="hljs-comment">// ç°åœ¨ä½œä¸ºæ™®é€š GPIO</span>
    GPIO_24 = <span class="hljs-number">24</span>,      <span class="hljs-comment">// ç°åœ¨ä½œä¸ºæ™®é€š GPIO</span>
    SFC_CLK = <span class="hljs-number">25</span>,      <span class="hljs-comment">// â† æ–°å€¼ï¼ˆæ”¹åˆ° GPIO_25ï¼‰</span>
    SFC_CSN = <span class="hljs-number">26</span>,      <span class="hljs-comment">// â† æ–°å€¼ï¼ˆæ”¹åˆ° GPIO_26ï¼‰</span>
    SFC_IO0 = <span class="hljs-number">27</span>,      <span class="hljs-comment">// â† æ–°å€¼ï¼ˆæ”¹åˆ° GPIO_27ï¼‰</span>
    SFC_IO1 = <span class="hljs-number">28</span>,      <span class="hljs-comment">// â† æ–°å€¼ï¼ˆæ”¹åˆ° GPIO_28ï¼‰</span>
    SFC_IO2 = <span class="hljs-number">29</span>,      <span class="hljs-comment">// â† æ–°å€¼ï¼ˆæ”¹åˆ° GPIO_29ï¼‰</span>
    SFC_IO3 = <span class="hljs-number">30</span>,      <span class="hljs-comment">// â† æ–°å€¼ï¼ˆæ”¹åˆ° GPIO_30ï¼‰</span>
    PIN_NONE = <span class="hljs-number">31</span>,     <span class="hljs-comment">// æ›´æ–°ä¸º 31ï¼ˆä¹‹å‰çš„ PIN_NONE å€¼ä¹Ÿè¦é¡ºå»¶ï¼‰</span>
} <span class="hljs-type">pin_t</span>;

<span class="hljs-meta">#<span class="hljs-keyword">define</span> PIN_MAX_NUMBER PIN_NONE  <span class="hljs-comment">// ä¿ç•™è¿™ä¸€è¡Œ</span></span>
</code></pre>
<h4 data-id="heading-55">ä¿®æ”¹è¦ç‚¹</h4>
<pre><code class="hljs">âœï¸  æ”¹åŠ¨æ¸…å•ï¼š
   â˜ SFC_CLK ä» 19 æ”¹ä¸º 25
   â˜ SFC_CSN ä» 20 æ”¹ä¸º 26
   â˜ SFC_IO0 ä» 21 æ”¹ä¸º 27
   â˜ SFC_IO1 ä» 22 æ”¹ä¸º 28
   â˜ SFC_IO2 ä» 23 æ”¹ä¸º 29
   â˜ SFC_IO3 ä» 24 æ”¹ä¸º 30
   â˜ PIN_NONE ä» 25 æ”¹ä¸º 31
   â˜ æ·»åŠ  GPIO_19-24 çš„æ™®é€šå®šä¹‰ï¼ˆå¯é€‰ï¼‰
</code></pre>
<hr/>
<h3 data-id="heading-56">æ¨¡æ¿ 2ï¼šsoc_porting.c ä¿®æ”¹ç¤ºä¾‹</h3>
<h4 data-id="heading-57">åŸå§‹ä»£ç </h4>
<p><strong>æ–‡ä»¶</strong>ï¼š<code>src/drivers/chips/ws63/porting/soc/soc_porting.c</code>
<strong>è¡Œå·</strong>ï¼š64-79</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-meta">#<span class="hljs-keyword">define</span> PAD_SFC_CLK_CTRL  0x4400d868    <span class="hljs-comment">// GPIO_19</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> PAD_SFC_CSN_CTRL  0x4400d86C    <span class="hljs-comment">// GPIO_20</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> PAD_SFC_IO0_CTRL  0x4400d870    <span class="hljs-comment">// GPIO_21</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> PAD_SFC_IO1_CTRL  0x4400d874    <span class="hljs-comment">// GPIO_22</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> PAD_SFC_IO2_CTRL  0x4400d878    <span class="hljs-comment">// GPIO_23</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> PAD_SFC_IO3_CTRL  0x4400d87C    <span class="hljs-comment">// GPIO_24</span></span>

<span class="hljs-meta">#<span class="hljs-keyword">define</span> SFC_CLK_DS_VALUE  0x3</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> SFC_CSN_DS_VALUE  0x2</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> SFC_DATA_DS_VALUE 0x2</span>

<span class="hljs-type">void</span> <span class="hljs-title function_">config_sfc_ctrl_ds</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span>
{
    reg_setbits(PAD_SFC_CLK_CTRL, <span class="hljs-number">0</span>, POS_4, DTRL_DS_LEN, SFC_CLK_DS_VALUE);
    reg_setbits(PAD_SFC_CSN_CTRL, <span class="hljs-number">0</span>, POS_4, DTRL_DS_LEN, SFC_CSN_DS_VALUE);
    reg_setbits(PAD_SFC_IO0_CTRL, <span class="hljs-number">0</span>, POS_4, DTRL_DS_LEN, SFC_DATA_DS_VALUE);
    reg_setbits(PAD_SFC_IO1_CTRL, <span class="hljs-number">0</span>, POS_4, DTRL_DS_LEN, SFC_DATA_DS_VALUE);
    reg_setbits(PAD_SFC_IO2_CTRL, <span class="hljs-number">0</span>, POS_4, DTRL_DS_LEN, SFC_DATA_DS_VALUE);
    reg_setbits(PAD_SFC_IO3_CTRL, <span class="hljs-number">0</span>, POS_4, DTRL_DS_LEN, SFC_DATA_DS_VALUE);
}
</code></pre>
<h4 data-id="heading-58">ä¿®æ”¹åçš„ä»£ç </h4>
<p><strong>âš ï¸ å…³é”®</strong>ï¼šéœ€è¦ä» WS63 æ•°æ®æ‰‹å†ŒæŸ¥è¯¢æ–° GPIO å¯¹åº”çš„ Pad æ§åˆ¶å¯„å­˜å™¨åœ°å€</p>
<p>å‡è®¾æ–°åœ°å€ä» 0x4400d880 å¼€å§‹ï¼ˆæŒ‰é¡ºåºé€’å¢ 0x4ï¼‰ï¼š</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-comment">// æ–° GPIO çš„ Pad æ§åˆ¶å¯„å­˜å™¨åœ°å€ï¼ˆéœ€ä»èŠ¯ç‰‡æ‰‹å†ŒæŸ¥è¯¢ï¼‰</span>
<span class="hljs-comment">// GPIO_25 â†’ GPIO_30 çš„ Pad åœ°å€ï¼ˆå‡è®¾ï¼‰</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> PAD_SFC_CLK_CTRL  0x4400d880    <span class="hljs-comment">// GPIO_25 å¯¹åº”çš„ Pad åœ°å€</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> PAD_SFC_CSN_CTRL  0x4400d884    <span class="hljs-comment">// GPIO_26 å¯¹åº”çš„ Pad åœ°å€</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> PAD_SFC_IO0_CTRL  0x4400d888    <span class="hljs-comment">// GPIO_27 å¯¹åº”çš„ Pad åœ°å€</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> PAD_SFC_IO1_CTRL  0x4400d88C    <span class="hljs-comment">// GPIO_28 å¯¹åº”çš„ Pad åœ°å€</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> PAD_SFC_IO2_CTRL  0x4400d890    <span class="hljs-comment">// GPIO_29 å¯¹åº”çš„ Pad åœ°å€</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> PAD_SFC_IO3_CTRL  0x4400d894    <span class="hljs-comment">// GPIO_30 å¯¹åº”çš„ Pad åœ°å€</span></span>

<span class="hljs-comment">// é©±åŠ¨å¼ºåº¦å€¼ä¿æŒä¸å˜ï¼ˆé™¤ééœ€è¦å¾®è°ƒï¼‰</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> SFC_CLK_DS_VALUE  0x3           <span class="hljs-comment">// æ—¶é’Ÿå¼ºé©±åŠ¨</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> SFC_CSN_DS_VALUE  0x2           <span class="hljs-comment">// ç‰‡é€‰ä¸­ç­‰é©±åŠ¨</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> SFC_DATA_DS_VALUE 0x2           <span class="hljs-comment">// æ•°æ®çº¿ä¸­ç­‰é©±åŠ¨</span></span>

<span class="hljs-type">void</span> <span class="hljs-title function_">config_sfc_ctrl_ds</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span>
{
    <span class="hljs-comment">// é…ç½®é€»è¾‘å®Œå…¨ç›¸åŒï¼Œåªæ˜¯ä½¿ç”¨äº†æ–°çš„å¯„å­˜å™¨åœ°å€</span>
    reg_setbits(PAD_SFC_CLK_CTRL, <span class="hljs-number">0</span>, POS_4, DTRL_DS_LEN, SFC_CLK_DS_VALUE);
    reg_setbits(PAD_SFC_CSN_CTRL, <span class="hljs-number">0</span>, POS_4, DTRL_DS_LEN, SFC_CSN_DS_VALUE);
    reg_setbits(PAD_SFC_IO0_CTRL, <span class="hljs-number">0</span>, POS_4, DTRL_DS_LEN, SFC_DATA_DS_VALUE);
    reg_setbits(PAD_SFC_IO1_CTRL, <span class="hljs-number">0</span>, POS_4, DTRL_DS_LEN, SFC_DATA_DS_VALUE);
    reg_setbits(PAD_SFC_IO2_CTRL, <span class="hljs-number">0</span>, POS_4, DTRL_DS_LEN, SFC_DATA_DS_VALUE);
    reg_setbits(PAD_SFC_IO3_CTRL, <span class="hljs-number">0</span>, POS_4, DTRL_DS_LEN, SFC_DATA_DS_VALUE);
}
</code></pre>
<h4 data-id="heading-59">ä¿®æ”¹è¦ç‚¹</h4>
<pre><code class="hljs language-scss" lang="scss">âœï¸  æ”¹åŠ¨æ¸…å•ï¼š
   â˜ PAD_SFC_CLK_CTRL åœ°å€æ›´æ–°ï¼ˆä»èŠ¯ç‰‡æ‰‹å†ŒæŸ¥è¡¨ï¼‰
   â˜ PAD_SFC_CSN_CTRL åœ°å€æ›´æ–°
   â˜ PAD_SFC_IO0_CTRL åœ°å€æ›´æ–°
   â˜ PAD_SFC_IO1_CTRL åœ°å€æ›´æ–°
   â˜ PAD_SFC_IO2_CTRL åœ°å€æ›´æ–°
   â˜ PAD_SFC_IO3_CTRL åœ°å€æ›´æ–°
   â˜ é©±åŠ¨å¼ºåº¦å€¼ä¿æŒæˆ–å¾®è°ƒï¼ˆå¯é€‰ï¼‰
   â˜ <span class="hljs-built_in">config_sfc_ctrl_ds</span>() å‡½æ•°é€»è¾‘ä¸å˜

âš ï¸  é‡è¦ï¼š
   â€¢ æ‰€æœ‰åœ°å€éƒ½å¿…é¡»ä» WS63 æ•°æ®æ‰‹å†ŒæŸ¥è¯¢
   â€¢ åœ°å€é€šå¸¸æ˜¯æŒ‰é¡ºåºæ’åˆ—ï¼Œé—´éš” <span class="hljs-number">0</span>x4 å­—èŠ‚
   â€¢ åŠ¡å¿…ç¡®ä¿åœ°å€å‡†ç¡®æ— è¯¯
</code></pre>
<hr/>
<h3 data-id="heading-60">æ¨¡æ¿ 3ï¼šhal_pinctrl_ws63.c ä¿®æ”¹ç¤ºä¾‹</h3>
<h4 data-id="heading-61">åŸå§‹ä»£ç </h4>
<p><strong>æ–‡ä»¶</strong>ï¼š<code>src/drivers/drivers/hal/pinmux/ws63/hal_pinctrl_ws63.c</code>
<strong>è¡Œå·</strong>ï¼š93-140</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-type">static</span> <span class="hljs-type">hal_pin_config_group_t</span> <span class="hljs-type">const</span> g_pin_mode_map[] = {
    {
        GPIO_00,
        GPIO_14,
        HAL_PIN_GPIO_SEL_START_ADDR,
        HAL_PIN_CONFIG_PER_NUM,
        HAL_PIN_GPIO_SEL_START_BIT,
        HAL_PIN_GPIO_SEL_BITS_NUM
    },
    {
        GPIO_15,
        GPIO_18,
        HAL_PIN_UART_SEL_START_ADDR,
        HAL_PIN_CONFIG_PER_NUM,
        HAL_PIN_UART_SEL_START_BIT,
        HAL_PIN_UART_SEL_BITS_NUM
    }
    <span class="hljs-comment">// âš ï¸ åŸæ¥æ²¡æœ‰ SFC_CLK çš„æ¡ç›®</span>
};

<span class="hljs-type">static</span> <span class="hljs-type">hal_pin_config_group_t</span> <span class="hljs-type">const</span> g_pin_pull_map[] = {
    {
        GPIO_00,
        GPIO_14,
        HAL_PIN_GPIO_CTRL_START_ADDR,
        HAL_PIN_CONFIG_PER_NUM,
        HAL_PIN_PULL_START_BIT,
        HAL_PIN_PULL_BITS_NUM
    },
    {
        SFC_CLK,        <span class="hljs-comment">// = 19ï¼ˆåŸå€¼ï¼‰</span>
        SFC_IO3,        <span class="hljs-comment">// = 24ï¼ˆåŸå€¼ï¼‰</span>
        HAL_PIN_SFC_CTRL_START_ADDR,
        HAL_PIN_CONFIG_PER_NUM,
        HAL_PIN_PULL_START_BIT,
        HAL_PIN_PULL_BITS_NUM
    }
};

<span class="hljs-type">static</span> <span class="hljs-type">hal_pin_config_group_t</span> <span class="hljs-type">const</span> g_pin_ds_map[] = {
    {
        GPIO_00,
        GPIO_14,
        HAL_PIN_GPIO_CTRL_START_ADDR,
        HAL_PIN_CONFIG_PER_NUM,
        HAL_PIN_DS_START_BIT,
        HAL_PIN_DS_BITS_NUM
    },
    {
        SFC_CLK,        <span class="hljs-comment">// = 19ï¼ˆåŸå€¼ï¼‰</span>
        SFC_IO3,        <span class="hljs-comment">// = 24ï¼ˆåŸå€¼ï¼‰</span>
        HAL_PIN_SFC_CTRL_START_ADDR,
        HAL_PIN_CONFIG_PER_NUM,
        HAL_PIN_DS_START_BIT,
        HAL_PIN_DS_BITS_NUM
    }
};

<span class="hljs-meta">#<span class="hljs-keyword">if</span> defined(CONFIG_PINCTRL_SUPPORT_IE)</span>
<span class="hljs-type">static</span> <span class="hljs-type">hal_pin_config_group_t</span> <span class="hljs-type">const</span> g_pin_ie_map[] = {
    {
        GPIO_00,
        GPIO_18,
        HAL_PIN_GPIO_CTRL_START_ADDR,
        HAL_PIN_CONFIG_PER_NUM,
        HAL_PIN_IE_START_BIT,
        HAL_PIN_IE_BITS_NUM
    },
    {
        SFC_CLK,        <span class="hljs-comment">// = 19ï¼ˆåŸå€¼ï¼‰</span>
        SFC_IO3,        <span class="hljs-comment">// = 24ï¼ˆåŸå€¼ï¼‰</span>
        HAL_PIN_SFC_CTRL_START_ADDR,
        HAL_PIN_CONFIG_PER_NUM,
        HAL_PIN_IE_START_BIT,
        HAL_PIN_IE_BITS_NUM
    }
};
<span class="hljs-meta">#<span class="hljs-keyword">endif</span></span>

<span class="hljs-meta">#<span class="hljs-keyword">if</span> defined(CONFIG_PINCTRL_SUPPORT_ST)</span>
<span class="hljs-type">static</span> <span class="hljs-type">hal_pin_config_group_t</span> <span class="hljs-type">const</span> g_pin_st_map[] = {
    {
        GPIO_00,
        GPIO_18,
        HAL_PIN_GPIO_CTRL_START_ADDR,
        HAL_PIN_CONFIG_PER_NUM,
        HAL_PIN_ST_START_BIT,
        HAL_PIN_ST_BITS_NUM
    },
    {
        SFC_CLK,        <span class="hljs-comment">// = 19ï¼ˆåŸå€¼ï¼‰</span>
        SFC_IO3,        <span class="hljs-comment">// = 24ï¼ˆåŸå€¼ï¼‰</span>
        HAL_PIN_SFC_CTRL_START_ADDR,
        HAL_PIN_CONFIG_PER_NUM,
        HAL_PIN_ST_START_BIT,
        HAL_PIN_ST_BITS_NUM
    }
};
<span class="hljs-meta">#<span class="hljs-keyword">endif</span></span>
</code></pre>
<h4 data-id="heading-62">ä¿®æ”¹åçš„ä»£ç </h4>
<p><strong>å‡è®¾æ–°çš„ SFC GPIO ä¸º GPIO_25-30ï¼Œä»åœ¨è¿ç»­èŒƒå›´å†…</strong>ï¼š</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-type">static</span> <span class="hljs-type">hal_pin_config_group_t</span> <span class="hljs-type">const</span> g_pin_mode_map[] = {
    {
        GPIO_00,
        GPIO_14,
        HAL_PIN_GPIO_SEL_START_ADDR,
        HAL_PIN_CONFIG_PER_NUM,
        HAL_PIN_GPIO_SEL_START_BIT,
        HAL_PIN_GPIO_SEL_BITS_NUM
    },
    {
        GPIO_15,
        GPIO_18,
        HAL_PIN_UART_SEL_START_ADDR,
        HAL_PIN_CONFIG_PER_NUM,
        HAL_PIN_UART_SEL_START_BIT,
        HAL_PIN_UART_SEL_BITS_NUM
    }
    <span class="hljs-comment">// SFC çš„ GPIO_25-30 å¯èƒ½ä¸éœ€è¦åœ¨ mode_map ä¸­é…ç½®</span>
};

<span class="hljs-type">static</span> <span class="hljs-type">hal_pin_config_group_t</span> <span class="hljs-type">const</span> g_pin_pull_map[] = {
    {
        GPIO_00,
        GPIO_14,
        HAL_PIN_GPIO_CTRL_START_ADDR,
        HAL_PIN_CONFIG_PER_NUM,
        HAL_PIN_PULL_START_BIT,
        HAL_PIN_PULL_BITS_NUM
    },
    {
        SFC_CLK,        <span class="hljs-comment">// ç°åœ¨ç­‰äº 25ï¼ˆæ–°å€¼ä» platform_core_rom.h è‡ªåŠ¨è·å¾—ï¼‰</span>
        SFC_IO3,        <span class="hljs-comment">// ç°åœ¨ç­‰äº 30ï¼ˆæ–°å€¼ä» platform_core_rom.h è‡ªåŠ¨è·å¾—ï¼‰</span>
        HAL_PIN_SFC_CTRL_START_ADDR,  <span class="hljs-comment">// è¿™ä¸ªåœ°å€å¯èƒ½ä¹Ÿéœ€è¦æ›´æ–°</span>
        HAL_PIN_CONFIG_PER_NUM,
        HAL_PIN_PULL_START_BIT,
        HAL_PIN_PULL_BITS_NUM
    }
};

<span class="hljs-type">static</span> <span class="hljs-type">hal_pin_config_group_t</span> <span class="hljs-type">const</span> g_pin_ds_map[] = {
    {
        GPIO_00,
        GPIO_14,
        HAL_PIN_GPIO_CTRL_START_ADDR,
        HAL_PIN_CONFIG_PER_NUM,
        HAL_PIN_DS_START_BIT,
        HAL_PIN_DS_BITS_NUM
    },
    {
        SFC_CLK,        <span class="hljs-comment">// è‡ªåŠ¨ä» enum è·å–æ–°å€¼ 25</span>
        SFC_IO3,        <span class="hljs-comment">// è‡ªåŠ¨ä» enum è·å–æ–°å€¼ 30</span>
        HAL_PIN_SFC_CTRL_START_ADDR,  <span class="hljs-comment">// å¯èƒ½éœ€è¦æ›´æ–°</span>
        HAL_PIN_CONFIG_PER_NUM,
        HAL_PIN_DS_START_BIT,
        HAL_PIN_DS_BITS_NUM
    }
};

<span class="hljs-meta">#<span class="hljs-keyword">if</span> defined(CONFIG_PINCTRL_SUPPORT_IE)</span>
<span class="hljs-type">static</span> <span class="hljs-type">hal_pin_config_group_t</span> <span class="hljs-type">const</span> g_pin_ie_map[] = {
    {
        GPIO_00,
        GPIO_18,
        HAL_PIN_GPIO_CTRL_START_ADDR,
        HAL_PIN_CONFIG_PER_NUM,
        HAL_PIN_IE_START_BIT,
        HAL_PIN_IE_BITS_NUM
    },
    {
        SFC_CLK,        <span class="hljs-comment">// è‡ªåŠ¨è·å–æ–°å€¼ 25</span>
        SFC_IO3,        <span class="hljs-comment">// è‡ªåŠ¨è·å–æ–°å€¼ 30</span>
        HAL_PIN_SFC_CTRL_START_ADDR,  <span class="hljs-comment">// å¯èƒ½éœ€è¦æ›´æ–°</span>
        HAL_PIN_CONFIG_PER_NUM,
        HAL_PIN_IE_START_BIT,
        HAL_PIN_IE_BITS_NUM
    }
};
<span class="hljs-meta">#<span class="hljs-keyword">endif</span></span>

<span class="hljs-meta">#<span class="hljs-keyword">if</span> defined(CONFIG_PINCTRL_SUPPORT_ST)</span>
<span class="hljs-type">static</span> <span class="hljs-type">hal_pin_config_group_t</span> <span class="hljs-type">const</span> g_pin_st_map[] = {
    {
        GPIO_00,
        GPIO_18,
        HAL_PIN_GPIO_CTRL_START_ADDR,
        HAL_PIN_CONFIG_PER_NUM,
        HAL_PIN_ST_START_BIT,
        HAL_PIN_ST_BITS_NUM
    },
    {
        SFC_CLK,        <span class="hljs-comment">// è‡ªåŠ¨è·å–æ–°å€¼ 25</span>
        SFC_IO3,        <span class="hljs-comment">// è‡ªåŠ¨è·å–æ–°å€¼ 30</span>
        HAL_PIN_SFC_CTRL_START_ADDR,  <span class="hljs-comment">// å¯èƒ½éœ€è¦æ›´æ–°</span>
        HAL_PIN_CONFIG_PER_NUM,
        HAL_PIN_ST_START_BIT,
        HAL_PIN_ST_BITS_NUM
    }
};
<span class="hljs-meta">#<span class="hljs-keyword">endif</span></span>
</code></pre>
<h4 data-id="heading-63">ä¿®æ”¹è¯´æ˜</h4>
<p><strong>å…³é”®è¦ç‚¹</strong>ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">â˜‘ï¸  è‡ªåŠ¨é€‚é…ï¼š
   â€¢ ç”±äºä½¿ç”¨äº† SFC_CLK å’Œ SFC_IO3 çš„æšä¸¾å
   â€¢ platform_core_rom.h æ”¹äº†åè‡ªåŠ¨åº”ç”¨
   â€¢ hal_pinctrl_ws63.c ä¸­ç”¨æšä¸¾åçš„åœ°æ–¹è‡ªåŠ¨æ›´æ–°

âŒ éœ€è¦æ‰‹åŠ¨æ”¹çš„ï¼š
   â€¢ HAL_PIN_SFC_CTRL_START_ADDR
   â€¢ æ‰€æœ‰ GPIO é…ç½®ç»„çš„æ•°æ®ç»“æ„èŒƒå›´

âœï¸  æ”¹åŠ¨æ–¹å¼ï¼š
   æ–¹æ¡ˆ Aï¼ˆæœ€ç®€å•ï¼‰ï¼š
      â€¢ åªæ”¹ platform_core_rom.h ä¸­çš„ <span class="hljs-keyword">enum</span>
      â€¢ å¦‚æœæ–° GPIO èŒƒå›´ä»ç„¶è¿ç»­ï¼Œå…¶ä»–æ–‡ä»¶å¯èƒ½æ— éœ€æ”¹
      
   æ–¹æ¡ˆ Bï¼ˆå½»åº•ï¼‰ï¼š
      â€¢ æ”¹ platform_core_rom.hï¼ˆ<span class="hljs-keyword">enum</span>ï¼‰
      â€¢ æ”¹ soc_porting.cï¼ˆPad åœ°å€ï¼‰
      â€¢ æ”¹ hal_pinctrl_ws63.cï¼ˆé…ç½®ç»„ï¼‰
      â€¢ æ”¹ HAL_PIN_SFC_CTRL_START_OFFSET åŸºåœ°å€
</code></pre>
<hr/>
<h3 data-id="heading-64">æ¨¡æ¿ 4ï¼šHAL_PIN_SFC_CTRL_START_OFFSET åŸºåœ°å€æ›´æ–°</h3>
<h4 data-id="heading-65">åŸå§‹å®šä¹‰</h4>
<p><strong>æ–‡ä»¶</strong>ï¼š<code>src/drivers/drivers/hal/pinmux/ws63/hal_pinctrl_ws63.c</code>
<strong>è¡Œå·</strong>ï¼š20-27</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-meta">#<span class="hljs-keyword">define</span> HAL_IO_CFG_BASE_ADDR            0x4400D000</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> HAL_PIN_GPIO_SEL_START_OFFSET   0x000</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> HAL_PIN_UART_SEL_START_OFFSET   0x03C</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> HAL_PIN_GPIO_CTRL_START_OFFSET  0x800</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> HAL_PIN_SFC_CTRL_START_OFFSET   0x868    <span class="hljs-comment">// â† åŸå€¼ï¼ˆç”¨äº GPIO_19-24ï¼‰</span></span>

<span class="hljs-meta">#<span class="hljs-keyword">define</span> HAL_PIN_GPIO_SEL_START_ADDR     (HAL_IO_CFG_BASE_ADDR + HAL_PIN_GPIO_SEL_START_OFFSET)</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> HAL_PIN_UART_SEL_START_ADDR     (HAL_IO_CFG_BASE_ADDR + HAL_PIN_UART_SEL_START_OFFSET)</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> HAL_PIN_GPIO_CTRL_START_ADDR    (HAL_IO_CFG_BASE_ADDR + HAL_PIN_GPIO_CTRL_START_OFFSET)</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> HAL_PIN_SFC_CTRL_START_ADDR     (HAL_IO_CFG_BASE_ADDR + HAL_PIN_SFC_CTRL_START_OFFSET)</span>
</code></pre>
<h4 data-id="heading-66">ä¿®æ”¹åï¼ˆå¦‚æœ GPIO æ”¹åˆ° 25-30ï¼‰</h4>
<pre><code class="hljs language-c" lang="c"><span class="hljs-meta">#<span class="hljs-keyword">define</span> HAL_IO_CFG_BASE_ADDR            0x4400D000</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> HAL_PIN_GPIO_SEL_START_OFFSET   0x000</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> HAL_PIN_UART_SEL_START_OFFSET   0x03C</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> HAL_PIN_GPIO_CTRL_START_OFFSET  0x800</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> HAL_PIN_SFC_CTRL_START_OFFSET   0x880    <span class="hljs-comment">// â† æ–°å€¼ï¼ˆä»èŠ¯ç‰‡æ‰‹å†ŒæŸ¥è¯¢ï¼‰</span></span>

<span class="hljs-meta">#<span class="hljs-keyword">define</span> HAL_PIN_GPIO_SEL_START_ADDR     (HAL_IO_CFG_BASE_ADDR + HAL_PIN_GPIO_SEL_START_OFFSET)</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> HAL_PIN_UART_SEL_START_ADDR     (HAL_IO_CFG_BASE_ADDR + HAL_PIN_UART_SEL_START_OFFSET)</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> HAL_PIN_GPIO_CTRL_START_ADDR    (HAL_IO_CFG_BASE_ADDR + HAL_PIN_GPIO_CTRL_START_OFFSET)</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> HAL_PIN_SFC_CTRL_START_ADDR     (HAL_IO_CFG_BASE_ADDR + HAL_PIN_SFC_CTRL_START_OFFSET)</span>
</code></pre>
<hr/>
<h3 data-id="heading-67">æ¨¡æ¿ 5ï¼šflash_config_info.c æ·»åŠ æ–° Flash</h3>
<h4 data-id="heading-68">åœºæ™¯ï¼šæ·»åŠ æ–°çš„ Flash èŠ¯ç‰‡ï¼ˆå¦‚ GD25Q256ï¼‰</h4>
<h4 data-id="heading-69">åŸæœ‰ Flash æ¡ç›®ç¤ºä¾‹</h4>
<pre><code class="hljs language-c" lang="c"><span class="hljs-meta">#<span class="hljs-keyword">define</span> FLASH_GD25Q32           0x1640C8</span>

<span class="hljs-comment">// ... åœ¨æŸä¸ªæ•°ç»„ä¸­ ...</span>
{
    .chip_id = FLASH_GD25Q32,
    .chip_size = <span class="hljs-number">0x400000</span>,                <span class="hljs-comment">// 4MB</span>
    .read_cmds = {
        {
            .cmd = <span class="hljs-number">0x0B</span>, .cmd_support = <span class="hljs-number">1</span>,
            .addr_len = SPI_ADDR_LEN_24, .addr_support = <span class="hljs-number">1</span>,
            .dummy_cycles = <span class="hljs-number">1</span>,
            .cmd_type = STANDARD_READ, .size = <span class="hljs-number">0x04</span>
        },
        <span class="hljs-comment">// ... å…¶ä»–è¯»å‘½ä»¤ ...</span>
    },
    .read_cmd_num = <span class="hljs-number">3</span>,
    .write_cmds = { ... },
    .write_cmd_num = <span class="hljs-number">2</span>,
    .erase_cmds = { ... },
    .erase_cmd_num = <span class="hljs-number">4</span>,
    .quad_mode = &amp;gd25_quad_mode_cmd,      <span class="hljs-comment">// QSPI æ”¯æŒ</span>
},
</code></pre>
<h4 data-id="heading-70">æ–°å¢ Flash GD25Q256</h4>
<pre><code class="hljs language-c" lang="c"><span class="hljs-comment">// 1. é¦–å…ˆæ·»åŠ  Flash ID å®šä¹‰ï¼ˆåœ¨å®å®šä¹‰éƒ¨åˆ†ï¼‰</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> FLASH_GD25Q256          0x1940C8    <span class="hljs-comment">// 256Mbit</span></span>

<span class="hljs-comment">// 2. å®šä¹‰ QSPI æ¨¡å¼çš„ä½¿èƒ½å‘½ä»¤ï¼ˆå¦‚æœæ”¯æŒ Quadï¼‰</span>
<span class="hljs-type">static</span> <span class="hljs-type">flash_cmd_execute_t</span> gd25q256_quad_mode_cmd = {
    {
        .cmd = <span class="hljs-number">0x35</span>,                        <span class="hljs-comment">// å†™çŠ¶æ€å¯„å­˜å™¨ 2</span>
        .cmd_support = <span class="hljs-number">1</span>,
        .addr_support = <span class="hljs-number">0</span>,
        .dummy_cycles = <span class="hljs-number">0</span>,
        .cmd_type = FLASH_CMD_WRITE,
        .size = <span class="hljs-number">1</span>,
    },
    {
        .cmd = <span class="hljs-number">0x15</span>,                        <span class="hljs-comment">// è¯»çŠ¶æ€å¯„å­˜å™¨ 2</span>
        .cmd_support = <span class="hljs-number">1</span>,
        .addr_support = <span class="hljs-number">0</span>,
        .dummy_cycles = <span class="hljs-number">0</span>,
        .cmd_type = FLASH_CMD_READ,
        .size = <span class="hljs-number">1</span>,
    },
    {
        .cmd_support = <span class="hljs-number">0</span>,                   <span class="hljs-comment">// å…¶ä»–å‘½ä»¤å¯é€‰</span>
    }
};

<span class="hljs-comment">// 3. åœ¨ Flash é…ç½®æ•°ç»„ä¸­è¿½åŠ æ–°æ¡ç›®</span>
{
    .chip_id = FLASH_GD25Q256,
    .chip_size = <span class="hljs-number">0x2000000</span>,                 <span class="hljs-comment">// 32MBï¼ˆ256Mbitï¼‰</span>
    .read_cmds = {
        {
            .cmd = <span class="hljs-number">0x0B</span>,                    <span class="hljs-comment">// Standard Read</span>
            .cmd_support = <span class="hljs-number">1</span>,
            .addr_len = SPI_ADDR_LEN_24,
            .addr_support = <span class="hljs-number">1</span>,
            .dummy_cycles = <span class="hljs-number">1</span>,
            .cmd_type = STANDARD_READ,
            .size = <span class="hljs-number">0x04</span>
        },
        {
            .cmd = <span class="hljs-number">0x3B</span>,                    <span class="hljs-comment">// Fast Read</span>
            .cmd_support = <span class="hljs-number">1</span>,
            .addr_len = SPI_ADDR_LEN_24,
            .addr_support = <span class="hljs-number">1</span>,
            .dummy_cycles = <span class="hljs-number">1</span>,
            .cmd_type = STANDARD_READ,
            .size = <span class="hljs-number">0x04</span>
        },
        {
            .cmd = <span class="hljs-number">0xEB</span>,                    <span class="hljs-comment">// Quad Fast Read</span>
            .cmd_support = <span class="hljs-number">1</span>,
            .addr_len = SPI_ADDR_LEN_24,
            .addr_support = <span class="hljs-number">1</span>,
            .dummy_cycles = <span class="hljs-number">3</span>,
            .cmd_type = QUAD_READ,
            .size = <span class="hljs-number">0x04</span>
        },
    },
    .read_cmd_num = <span class="hljs-number">3</span>,
    .write_cmds = {
        {
            .cmd = <span class="hljs-number">0x02</span>,                    <span class="hljs-comment">// Page Program</span>
            .cmd_support = <span class="hljs-number">1</span>,
            .addr_len = SPI_ADDR_LEN_24,
            .addr_support = <span class="hljs-number">1</span>,
            .dummy_cycles = <span class="hljs-number">0</span>,
            .cmd_type = PAGE_PROGRAM,
            .size = <span class="hljs-number">256</span>
        },
        {
            .cmd = <span class="hljs-number">0x32</span>,                    <span class="hljs-comment">// Quad Page Program</span>
            .cmd_support = <span class="hljs-number">1</span>,
            .addr_len = SPI_ADDR_LEN_24,
            .addr_support = <span class="hljs-number">1</span>,
            .dummy_cycles = <span class="hljs-number">0</span>,
            .cmd_type = PAGE_PROGRAM,
            .size = <span class="hljs-number">256</span>
        },
    },
    .write_cmd_num = <span class="hljs-number">2</span>,
    .erase_cmds = {
        {
            .cmd = <span class="hljs-number">0x20</span>,                    <span class="hljs-comment">// Sector Erase (4KB)</span>
            .cmd_support = <span class="hljs-number">1</span>,
            .addr_support = <span class="hljs-number">1</span>,
            .cmd_type = ERASE_SECTOR,
            .size = <span class="hljs-number">0x1000</span>
        },
        {
            .cmd = <span class="hljs-number">0x52</span>,                    <span class="hljs-comment">// 32KB Erase</span>
            .cmd_support = <span class="hljs-number">1</span>,
            .addr_support = <span class="hljs-number">1</span>,
            .cmd_type = ERASE_32K,
            .size = <span class="hljs-number">0x8000</span>
        },
        {
            .cmd = <span class="hljs-number">0xD8</span>,                    <span class="hljs-comment">// 64KB Erase (Block)</span>
            .cmd_support = <span class="hljs-number">1</span>,
            .addr_support = <span class="hljs-number">1</span>,
            .cmd_type = ERASE_BLOCK,
            .size = <span class="hljs-number">0x10000</span>
        },
        {
            .cmd = <span class="hljs-number">0xC7</span>,                    <span class="hljs-comment">// Chip Erase</span>
            .cmd_support = <span class="hljs-number">1</span>,
            .addr_support = <span class="hljs-number">0</span>,
            .cmd_type = ERASE_CHIP,
            .size = <span class="hljs-number">0x2000000</span>                <span class="hljs-comment">// å…¨å®¹é‡</span>
        },
    },
    .erase_cmd_num = <span class="hljs-number">4</span>,
    .quad_mode = &amp;gd25q256_quad_mode_cmd,   <span class="hljs-comment">// æ”¯æŒ QSPI</span>
},
</code></pre>
<h4 data-id="heading-71">ä¿®æ”¹æ¸…å•</h4>
<pre><code class="hljs language-arduino" lang="arduino">â˜‘ï¸  æ·»åŠ  Flash çš„æ­¥éª¤ï¼š
   <span class="hljs-number">1.</span> ä» Flash æ•°æ®æ‰‹å†Œè·å–ï¼š
      â–¡ Flash IDï¼ˆ<span class="hljs-number">3</span> å­—èŠ‚ï¼‰
      â–¡ å®¹é‡ï¼ˆ<span class="hljs-type">byte</span>ï¼‰
      â–¡ å„ç§è¯»å‘½ä»¤çš„ opcode
      â–¡ ç¼–ç¨‹å‘½ä»¤ opcode
      â–¡ æ“¦é™¤å‘½ä»¤ opcodeï¼ˆé€šå¸¸ <span class="hljs-number">4</span> ç§ï¼‰
      â–¡ QSPI ä½¿èƒ½åºåˆ—ï¼ˆå¦‚æ”¯æŒï¼‰
      
   <span class="hljs-number">2.</span> ä¿®æ”¹ flash_config_info.cï¼š
      â–¡ æ·»åŠ  <span class="hljs-meta">#<span class="hljs-keyword">define</span> FLASH_XXXXX ID</span>
      â–¡ å¦‚æœæ”¯æŒ QSPIï¼Œå®šä¹‰ quad_mode ç»“æ„
      â–¡ åˆ›å»º <span class="hljs-type">flash_spi_info_t</span> æ¡ç›®
      â–¡ å¡«å……è¯»/å†™/æ“¦å‘½ä»¤æ•°ç»„
      
   <span class="hljs-number">3.</span> ç¼–è¯‘éªŒè¯ï¼š
      â–¡ å›ºä»¶ç¼–è¯‘æˆåŠŸ
      â–¡ çƒ§å½•å¹¶æµ‹è¯• Flash è¯†åˆ«
      â–¡ éªŒè¯ <span class="hljs-built_in">SPI</span> æ¨¡å¼è¯»å†™
      â–¡ éªŒè¯ QSPI æ¨¡å¼è¯»å†™ï¼ˆå¦‚æ”¯æŒï¼‰
</code></pre>
<hr/>
<h3 data-id="heading-72">æ¨¡æ¿ 6ï¼šç¼–è¯‘é…ç½®ä¿®æ”¹</h3>
<h4 data-id="heading-73">å¯ç”¨ DMA æ¨¡å¼</h4>
<p><strong>æ–‡ä»¶</strong>ï¼š<code>ws63_liteos_app.config</code>
<strong>ä¿®æ”¹</strong>ï¼š</p>
<pre><code class="hljs language-diff" lang="diff">  #
  # SFC Configuration
  #
  
  #
  # Config  SFC
  #
<span class="hljs-deletion">- # CONFIG_SFC_SUPPORT_DMA is not set</span>
<span class="hljs-addition">+ CONFIG_SFC_SUPPORT_DMA=y</span>
  # CONFIG_SFC_ALLOW_ERASE_WRITEBACK is not set
  # CONFIG_SFC_ALREADY_INIT is not set
</code></pre>
<h4 data-id="heading-74">å¯ç”¨é€šç”¨ SPI Master</h4>
<p><strong>æ–‡ä»¶</strong>ï¼š<code>ws63_liteos_app.config</code>
<strong>ä¿®æ”¹</strong>ï¼š</p>
<pre><code class="hljs language-diff" lang="diff">  CONFIG_DRIVER_SUPPORT_SPI=y
  
  #
  # SPI Configuration
  #
  
  #
  # Config SPI
  #
<span class="hljs-deletion">- # CONFIG_SPI_SUPPORT_MASTER is not set</span>
<span class="hljs-addition">+ CONFIG_SPI_SUPPORT_MASTER=y</span>
</code></pre>
<hr/>
<h3 data-id="heading-75">ğŸ” ç¼–è¯‘éªŒè¯æ­¥éª¤</h3>
<h4 data-id="heading-76">æ­¥éª¤ 1ï¼šæ¸…ç†æ—§ç¼–è¯‘</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">cd</span> fbb_ws63-master
<span class="hljs-built_in">rm</span> -rf src/build/cmake_build
<span class="hljs-built_in">rm</span> -rf src/build/output
</code></pre>
<h4 data-id="heading-77">æ­¥éª¤ 2ï¼šé‡æ–°ç¼–è¯‘</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">cd</span> src
python build.py
</code></pre>
<h4 data-id="heading-78">æ­¥éª¤ 3ï¼šæ£€æŸ¥ç¼–è¯‘é”™è¯¯</h4>
<pre><code class="hljs language-arduino" lang="arduino">å¸¸è§é”™è¯¯ï¼š
  â€¢ <span class="hljs-string">"undefined reference to SFC_CLK"</span> 
    â†’ æ£€æŸ¥ platform_core_rom.h <span class="hljs-keyword">enum</span> å®šä¹‰
  
  â€¢ <span class="hljs-string">"SFC initialization failed"</span>
    â†’ æ£€æŸ¥ Pad å¯„å­˜å™¨åœ°å€æ˜¯å¦æ­£ç¡®
  
  â€¢ <span class="hljs-string">"Flash not detected"</span>
    â†’ æ£€æŸ¥ GPIO ç¡¬ä»¶è¿æ¥
    â†’ æ£€æŸ¥ flash_config_info.c Flash ID
</code></pre>
<h4 data-id="heading-79">æ­¥éª¤ 4ï¼šçƒ§å½•å’Œæµ‹è¯•</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># çƒ§å½•æ–°å›ºä»¶</span>
./flashtool --boot src/build/output/bin/out.bin

<span class="hljs-comment"># é€šè¿‡ä¸²å£è§‚å¯Ÿ SFC åˆå§‹åŒ–æ—¥å¿—</span>
<span class="hljs-comment"># åº”çœ‹åˆ°ç±»ä¼¼ï¼š</span>
<span class="hljs-comment">#   SFC: Identifying flash...</span>
<span class="hljs-comment">#   SFC: Flash ID = 0x1640C8</span>
<span class="hljs-comment">#   SFC: QSPI mode enabled</span>
<span class="hljs-comment">#   SFC: Initialization success</span>
</code></pre>
<hr/>
<h3 data-id="heading-80">âš ï¸ å¸¸è§é™·é˜±</h3>
<h4 data-id="heading-81">é™·é˜± 1ï¼šå¿˜è®°åŒæ—¶æ”¹å¤šä¸ªæ–‡ä»¶</h4>
<pre><code class="hljs">âŒ é”™è¯¯åšæ³•ï¼š
   åªæ”¹ platform_core_rom.hï¼Œæ²¡æ”¹ soc_porting.c

âœ… æ­£ç¡®åšæ³•ï¼š
   åŒæ—¶æ”¹ï¼š
   â€¢ platform_core_rom.hï¼ˆGPIO å·ï¼‰
   â€¢ soc_porting.cï¼ˆPad åœ°å€ï¼‰
   â€¢ hal_pinctrl_ws63.cï¼ˆé…ç½®èŒƒå›´ï¼‰
</code></pre>
<h4 data-id="heading-82">é™·é˜± 2ï¼šPad å¯„å­˜å™¨åœ°å€å‡è®¾</h4>
<pre><code class="hljs language-ini" lang="ini">âŒ é”™è¯¯åšæ³•ï¼š
   ç®€å•åœ°åŠ åç§»ï¼š0x4400d868 + <span class="hljs-attr">8</span> = <span class="hljs-number">0</span>x4400d870
   ï¼ˆå®é™…å¯èƒ½ä¸æ˜¯çº¿æ€§å…³ç³»ï¼‰

âœ… æ­£ç¡®åšæ³•ï¼š
   ä» WS63 æ•°æ®æ‰‹å†ŒæŸ¥è¡¨è·å–å‡†ç¡®åœ°å€
</code></pre>
<h4 data-id="heading-83">é™·é˜± 3ï¼šFlash ID åŒ¹é…å¤±è´¥</h4>
<pre><code class="hljs language-arduino" lang="arduino">âŒ é”™è¯¯ç°è±¡ï¼š
   Flash ID = <span class="hljs-number">0xFFFFFF</span>
   
âœ… æ’æŸ¥æ­¥éª¤ï¼š
   <span class="hljs-number">1.</span> ç”¨é€»è¾‘åˆ†æä»ªæ•è· <span class="hljs-built_in">SPI</span> é€šä¿¡
   <span class="hljs-number">2.</span> æ£€æŸ¥ GPIO_19<span class="hljs-number">-22</span> æ³¢å½¢
   <span class="hljs-number">3.</span> ç”¨ Flash æ•°æ®æ‰‹å†ŒéªŒè¯ read ID å‘½ä»¤
   <span class="hljs-number">4.</span> æ£€æŸ¥ flash_config_info.c ä¸­æ˜¯å¦æœ‰è¯¥ ID
</code></pre>
<h4 data-id="heading-84">é™·é˜± 4ï¼šQSPI æ¨¡å¼æ— æ³•å¯ç”¨</h4>
<pre><code class="hljs language-markdown" lang="markdown">âŒ é”™è¯¯ç°è±¡ï¼š
   å§‹ç»ˆè¿è¡Œåœ¨ SPI è€Œé QSPI æ¨¡å¼
   
âœ… æ’æŸ¥æ­¥éª¤ï¼š
<span class="hljs-bullet">   1.</span> ç¡®è®¤ Flash æ•°æ®æ‰‹å†Œæ”¯æŒ QSPI
<span class="hljs-bullet">   2.</span> æ£€æŸ¥ flash<span class="hljs-emphasis">_config_</span>info.c ä¸­ quad<span class="hljs-emphasis">_mode æŒ‡é’ˆæ˜¯å¦ä¸º NULL
   3. éªŒè¯ GPIO_</span>23-24 çš„è¿æ¥ï¼ˆä»… QSPI ç”¨ï¼‰
<span class="hljs-bullet">   4.</span> æ£€æŸ¥ QSPI ä½¿èƒ½å‘½ä»¤æ˜¯å¦æ­£ç¡®
</code></pre>
<hr/>
<h3 data-id="heading-85">ğŸ“š å‚è€ƒèµ„æº</h3>

























<table><thead><tr><th>èµ„æº</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>WS63 æ•°æ®æ‰‹å†Œ</td><td>Pad åœ°å€æŸ¥è¡¨ã€GPIO åŠŸèƒ½</td></tr><tr><td>Flash æ•°æ®æ‰‹å†Œ</td><td>å‘½ä»¤é›†ã€QSPI æ”¯æŒã€ID</td></tr><tr><td>GPIO_LITTLEFS_ANALYSIS.md</td><td>GPIO é…ç½®åŸç†</td></tr><tr><td>SFC_GPIO_PIN_MAPPING.md</td><td>Pin æ˜ å°„å®Œæ•´è¡¨</td></tr></tbody></table>
<hr/>
<p><strong>ç¤ºä¾‹æ–‡æ¡£å®Œæˆ</strong> | ç”¨äºå­¦ä¹ å’Œå‚è€ƒ | å®é™…ä½¿ç”¨éœ€æŒ‰ç¡¬ä»¶å®šåˆ¶</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ”¹é€ ç±³å®¶å±å¹•æŒ‚ç¯1ä»£æ¥å…¥HomeKit]]></title>    <link>https://juejin.cn/post/7604694326517923891</link>    <guid>https://juejin.cn/post/7604694326517923891</guid>    <pubDate>2026-02-09T23:40:44.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604694326517923891" data-draft-id="7604672395626905627" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ”¹é€ ç±³å®¶å±å¹•æŒ‚ç¯1ä»£æ¥å…¥HomeKit"/> <meta itemprop="keywords" content="åµŒå…¥å¼"/> <meta itemprop="datePublished" content="2026-02-09T23:40:44.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="chaosgoo"/> <meta itemprop="url" content="https://juejin.cn/user/2541726616010317"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ”¹é€ ç±³å®¶å±å¹•æŒ‚ç¯1ä»£æ¥å…¥HomeKit
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2541726616010317/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    chaosgoo
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-09T23:40:44.000Z" title="Mon Feb 09 2026 23:40:44 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æœ¬æ–‡é¦–å‘äºæˆ‘çš„ä¸ªäººåšå®¢ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fchaosgoo.com%2FAdd-your-Xiaomi-Yeelight-Monitor-Light-Bar-to-HomeKit-with-ESP32-C3%2F" target="_blank" title="https://chaosgoo.com/Add-your-Xiaomi-Yeelight-Monitor-Light-Bar-to-HomeKit-with-ESP32-C3/" ref="nofollow noopener noreferrer">chaosgoo.com</a>ï¼Œæ¬¢è¿æ¥è®¿äº¤æµã€‚</p>
</blockquote>
<h3 data-id="heading-0">å‰è¨€</h3>
<p>æˆ‘ä½çš„å±‹å­åºŠå¤´æ²¡æœ‰æ’åº§ä¹Ÿæ²¡æœ‰æ§åˆ¶æˆ¿é—´é¡¶ç¯çš„å¼€å…³,å‡å¦‚ç†„ç¯ç¡è§‰çš„è¯ä¼šè®©æˆ¿é—´é™·å…¥ä¸€ç‰‡æ¼†é»‘.
æ‰€ä»¥å¾ˆé•¿ä¸€æ®µæ—¶é—´é‡Œæˆ‘éƒ½æŠŠç±³å®¶å±å¹•æŒ‚ç¯çš„æ§åˆ¶å™¨æ”¾åœ¨åºŠå¤´,ç”¨äºä¸´æ—¶ç…§æ˜.<br/>
è¿™å°±å¼•å‘äº†å¦å¤–ä¸€ä¸ªé—®é¢˜,æ¯æ¬¡å›å®¶å¼€ç”µè„‘æ‰“å¼€å±å¹•æŒ‚ç¯,æˆ‘éƒ½å¾—èµ°åˆ°åºŠå¤´æ‰¾åˆ°æ§åˆ¶å™¨å¼€å¯å±å¹•æŒ‚ç¯.
åœ¨ç»å†äº†å¤šæ¬¡éº»çƒ¦å,æˆ‘å†³å®šæŠŠè¿™ä¸ªå±å¹•æŒ‚ç¯æ¥å…¥HomeKit. è¿™æ ·å°±å¯ä»¥ç”¨è¯­éŸ³æˆ–è€…æ‰‹æœºæ§åˆ¶äº†.</p>
<h3 data-id="heading-1">èµ„æ–™æœé›†</h3>
<p>åœ¨é˜…è¯»äº†è¿™ç¯‡<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.chongdiantou.com%2Farchives%2F55542.html" target="_blank" title="https://www.chongdiantou.com/archives/55542.html" ref="nofollow noopener noreferrer">æ‹†è§£æŠ¥å‘Šï¼šMJç±³å®¶æ˜¾ç¤ºå™¨æŒ‚ç¯MJGJD01YL</a>å, éœ€è¦åšçš„å·¥ä½œå°±å¾ˆæ˜ç¡®äº†.
å¤§è‡´åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªæ­¥éª¤</p>
<ul>
<li>é˜…è¯»æ‰‹å†Œ,æ‰¾åˆ°æ§åˆ¶å¼•è„š</li>
<li>æ‹†é™¤èŠ¯ç‰‡,æ›¿æ¢æˆESP32</li>
<li>ç¼–å†™ä»£ç ,æ¥å…¥HomeKit</li>
</ul>

<h3 data-id="heading-2">é˜…è¯»æ‰‹å†Œ,æ‰¾åˆ°æ§åˆ¶å¼•è„š</h3>
<p>çœ‹å®Œæ‹†è§£æŠ¥å‘Šå,å¾—çŸ¥äº®åº¦ç”±TLSR8368å’ŒSY7301AèŠ¯ç‰‡æ§åˆ¶å®ç°, ä¸¤æ¬¾èŠ¯ç‰‡çš„èµ„æ–™å¾ˆå®¹æ˜“åœ¨Googleä¸Šæœç´¢åˆ°.<br/>
åŸºæœ¬ä¸Šå¯ä»¥ç¡®å®šæ˜¯ç”±TLSR8368å‘é€PWMä¿¡å·ç»™SY7301Aè¿›è¡Œè°ƒå…‰.</p>
<p>TLSR8368ä¸€å…±å°±16ä¸ªå¼•è„š, å¯¹ç…§æ‰‹å†Œé…åˆç¤ºæ³¢å™¨æŒ¨ä¸ªæµ‹é‡æ§åˆ¶å¼•è„šæµ‹å‡ºPWMå¼•è„šæ˜¯ç”±#3,#5äº§ç”Ÿ, è¿˜æœ‰ä¸€ä¸ªå¼•è„š#8ç”¨äºä½¿èƒ½SY7301AèŠ¯ç‰‡.</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7eee3ad29d2345568d15d76ec5b1413c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgY2hhb3Nnb28=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771285244&amp;x-signature=RpsqGsDXIug37QbH3lfw%2FkvfJrc%3D" alt="measurePins" loading="lazy"/></p>
<p>æµ‹é‡å‡ºå¼•è„šå¦‚ä¸‹</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/16900dbf24024929878ec9377cd69de7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgY2hhb3Nnb28=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771285244&amp;x-signature=3kSHQPt%2Bz1l0V5dTGxRiJAQynIQ%3D" alt="QQ_1770680236013.png" loading="lazy"/></p>
<h3 data-id="heading-3">æ‹†é™¤èŠ¯ç‰‡,æ›¿æ¢æˆESP32</h3>
<p>åˆ°äº†è¿™ä¸€æ­¥éœ€è¦é€‰æ‹©åˆé€‚å°ºå¯¸çš„èŠ¯ç‰‡,ç„¶åé‡æ–°ç»˜åˆ¶ä¸€å—æ¿å­å¯„ç”Ÿåœ¨åŸå§‹ä½ç½®å³å¯.</p>
<p>TLSR8368çš„ç„Šç›˜ç©ºé—´è¿˜ç®—å®½æ•, è¿™é‡Œå¯ä»¥ç„Šæ¥ä¸€ä¸ªå°è£…å°ä¸€ç‚¹çš„ESP32-C3(å¯¹åº”çš„å‹å·åç§°æ˜¯ESP8685), å°è£…ä¸ºQFN28 4x4mm</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ff49a94f109047c994889201ae1f141a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgY2hhb3Nnb28=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771285244&amp;x-signature=%2FXQlk0xDrmD%2FFivbSKhAiOomXEk%3D" alt="Lamp++ Top View" loading="lazy"/></p>
<p>è¿™é‡Œå³åŠéƒ¨åˆ†çš„TypeCå’ŒLDOéƒ¨åˆ†å°†ä¼šåœ¨åœ¨çƒ§å½•åæŠ˜æ–­, åç»­å›ºä»¶å¯ä»¥é€šè¿‡4P 2mmé—´è·æ¢é’ˆæˆ–è€…OTAè¿›è¡Œæ›´æ–°.</p>
<p>é™„ä¸Šä¸€å¼ åˆç‰ˆç„Šæ¥åçš„å›¾ç‰‡, åˆç‰ˆä¸ºä¹‹å‰æ²¡æœ‰é¢„ç•™å¯æŠ˜æ–­TypeCéƒ¨åˆ†çš„ç‰ˆæœ¬.</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4bfc8ee95a8f4c8a9d8e88475c188be9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgY2hhb3Nnb28=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771285244&amp;x-signature=bv3%2BWbiO9E5dvvTdEu0OEOTGeCE%3D" alt="Preview" loading="lazy"/></p>
<h3 data-id="heading-4">ç¼–å†™ä»£ç ,æ¥å…¥HomeKit</h3>
<p>å¾—ç›ŠäºHomeSpanè¿™ä¸ªåº“,éœ€è¦ç¼–å†™çš„ä»£ç å¾ˆç®€å•.</p>
<p>ç›®å‰å®ç°äº†ç™½è‰²LEDçš„è°ƒå…‰, ç”±äºæˆ‘æŸåäº†æš–é»„è‰²LEDæ§åˆ¶å¼•è„šçš„é˜»ç„Š,å¯¼è‡´æœ€ç»ˆç‰ˆæœ¬æœªèƒ½å®ç°è‰²æ¸©è°ƒèŠ‚åŠŸèƒ½ã€‚</p>
<p>å› æ­¤ï¼Œä»¥ä¸‹ä»£ç ä¸»è¦æ¼”ç¤ºäº†å¦‚ä½•æ§åˆ¶ç™½è‰²LEDçš„å¼€å…³ä¸è°ƒå…‰</p>
<pre><code class="hljs language-cpp" lang="cpp">#<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;Arduino.h&gt;</span></span>

#<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"HomeSpan.h"</span></span>
#<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"extras/PwmPin.h"</span>  <span class="hljs-comment">// library of various PWM functions</span></span>

<span class="hljs-comment">////////////////////////////////////</span>

<span class="hljs-keyword">struct</span> <span class="hljs-title class_">FadingLED</span> : Service::LightBulb {
  LedPin *ledPin;             <span class="hljs-comment">// reference to Led Pin</span>
  SpanCharacteristic *power;  <span class="hljs-comment">// reference to the On Characteristic</span>
  SpanCharacteristic *level;  <span class="hljs-comment">// reference to the Brightness Characteristic</span>
  SpanCharacteristic *colorTemperature;  <span class="hljs-comment">// reference to the Color Temperature</span>

  <span class="hljs-built_in">FadingLED</span>(<span class="hljs-type">int</span> _ledPin) : Service::<span class="hljs-built_in">LightBulb</span>() {
    power = <span class="hljs-keyword">new</span> Characteristic::<span class="hljs-built_in">On</span>();
    level = <span class="hljs-keyword">new</span> Characteristic::<span class="hljs-built_in">Brightness</span>(<span class="hljs-number">0</span>);
    colorTemperature = <span class="hljs-keyword">new</span> Characteristic::<span class="hljs-built_in">ColorTemperature</span>(<span class="hljs-number">200</span>, <span class="hljs-literal">true</span>);
    ledPin = <span class="hljs-keyword">new</span> <span class="hljs-built_in">LedPin</span>(_ledPin);
  }

  <span class="hljs-function">boolean <span class="hljs-title">update</span><span class="hljs-params">()</span> </span>{
    Serial.<span class="hljs-built_in">printf</span>(<span class="hljs-string">"power-&gt;getNewVal()=%d"</span>, power-&gt;<span class="hljs-built_in">getNewVal</span>());
    Serial.<span class="hljs-built_in">printf</span>(<span class="hljs-string">",level-&gt;getNewVal()=%d"</span>, level-&gt;<span class="hljs-built_in">getNewVal</span>());
    Serial.<span class="hljs-built_in">printf</span>(<span class="hljs-string">",colorTemperature-&gt;getNewVal()=%d\n"</span>,
                  colorTemperature-&gt;<span class="hljs-built_in">getNewVal</span>());
    ledPin-&gt;<span class="hljs-built_in">fade</span>(power-&gt;<span class="hljs-built_in">getNewVal</span>() * level-&gt;<span class="hljs-built_in">getNewVal</span>(), <span class="hljs-number">2000</span>,
                 LedPin::PROPORTIONAL);
    <span class="hljs-keyword">while</span> (ledPin-&gt;<span class="hljs-built_in">fadeStatus</span>() == LedPin::FADING)
      ;

    <span class="hljs-keyword">return</span> (<span class="hljs-literal">true</span>);
  }

  <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">loop</span><span class="hljs-params">()</span> <span class="hljs-keyword">override</span> </span>{
    <span class="hljs-keyword">if</span> (ledPin-&gt;<span class="hljs-built_in">fadeStatus</span>() == LedPin::COMPLETED) {
      power-&gt;<span class="hljs-built_in">setVal</span>(<span class="hljs-number">1</span> - power-&gt;<span class="hljs-built_in">getVal</span>());
      level-&gt;<span class="hljs-built_in">setVal</span>(power-&gt;<span class="hljs-built_in">getVal</span>() ? <span class="hljs-number">100</span> : <span class="hljs-number">0</span>);
    }
  }
};

<span class="hljs-comment">//////////////////////////////////</span>

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">setup</span><span class="hljs-params">()</span> </span>{
  <span class="hljs-built_in">pinMode</span>(<span class="hljs-number">5</span>, OUTPUT);
  <span class="hljs-built_in">pinMode</span>(<span class="hljs-number">10</span>, OUTPUT);
  <span class="hljs-built_in">digitalWrite</span>(<span class="hljs-number">5</span>, HIGH);
  <span class="hljs-built_in">digitalWrite</span>(<span class="hljs-number">10</span>, LOW);
  Serial.<span class="hljs-built_in">begin</span>(<span class="hljs-number">115200</span>);
  <span class="hljs-built_in">digitalWrite</span>(<span class="hljs-number">10</span>, HIGH);

  Serial.<span class="hljs-built_in">println</span>(<span class="hljs-string">"Wi-Fi is Connected!"</span>);
  homeSpan.<span class="hljs-built_in">enableOTA</span>(<span class="hljs-string">"12345678"</span>);
  homeSpan.<span class="hljs-built_in">setPairingCode</span>(<span class="hljs-string">"11223344"</span>);
  homeSpan.<span class="hljs-built_in">begin</span>(Category::Lighting, <span class="hljs-string">"Lamp++"</span>);

  <span class="hljs-keyword">new</span> <span class="hljs-built_in">SpanAccessory</span>();
  <span class="hljs-keyword">new</span> Service::<span class="hljs-built_in">AccessoryInformation</span>();
  <span class="hljs-keyword">new</span> Characteristic::<span class="hljs-built_in">Identify</span>();
  <span class="hljs-keyword">new</span> Characteristic::<span class="hljs-built_in">ColorTemperature</span>(<span class="hljs-number">200</span>, <span class="hljs-literal">true</span>);
  <span class="hljs-keyword">new</span> <span class="hljs-built_in">FadingLED</span>(<span class="hljs-number">4</span>);
}

<span class="hljs-comment">//////////////////////////////////////</span>

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">loop</span><span class="hljs-params">()</span> </span>{ 
  homeSpan.<span class="hljs-built_in">poll</span>();
}

</code></pre>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-section">[env:airm2m_core_esp32c3]</span>
<span class="hljs-attr">platform</span> = espressif32@<span class="hljs-number">5.4</span>.<span class="hljs-number">0</span>
<span class="hljs-attr">board</span> = airm2m_core_esp32c3
<span class="hljs-attr">framework</span> = ardui<span class="hljs-literal">no</span>
<span class="hljs-attr">monitor_speed</span> = <span class="hljs-number">115200</span>
<span class="hljs-attr">lib_deps</span> = homespan/HomeSpan@^<span class="hljs-number">1.8</span>.<span class="hljs-number">0</span>
<span class="hljs-comment">; upload_protocol = espota</span>
<span class="hljs-comment">; upload_flags =  --auth=12345678</span>
<span class="hljs-comment">; upload_port = 192.168.0.104</span>
<span class="hljs-attr">build_flags</span> = 
	-D <span class="hljs-attr">ARDUINO_USB_MODE</span>=<span class="hljs-number">1</span>
	-D <span class="hljs-attr">ARDUINO_USB_CDC_ON_BOOT</span>=<span class="hljs-number">1</span>  
</code></pre>
<h3 data-id="heading-5">æ•ˆæœå±•ç¤º</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/82a44809216b45d5a65661f87217c7b4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgY2hhb3Nnb28=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771285244&amp;x-signature=0IyWjKqF1pppGymEJbM4la8LD%2BQ%3D" alt="Preview2" loading="lazy"/></p>
<h3 data-id="heading-6">å‚è€ƒèµ„æ–™</h3>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.chongdiantou.com%2Farchives%2F55542.html" target="_blank" title="https://www.chongdiantou.com/archives/55542.html" ref="nofollow noopener noreferrer">æ‹†è§£æŠ¥å‘Šï¼šMJç±³å®¶æ˜¾ç¤ºå™¨æŒ‚ç¯MJGJD01YL</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[MySQLçš„10ç§é«˜çº§SQLï¼Œæ€§èƒ½èµ·é£]]></title>    <link>https://juejin.cn/post/7604493165329203234</link>    <guid>https://juejin.cn/post/7604493165329203234</guid>    <pubDate>2026-02-10T02:10:56.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604493165329203234" data-draft-id="7604685644685017140" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="MySQLçš„10ç§é«˜çº§SQLï¼Œæ€§èƒ½èµ·é£"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-02-10T02:10:56.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è‹ä¸‰è¯´æŠ€æœ¯"/> <meta itemprop="url" content="https://juejin.cn/user/465848661970824"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            MySQLçš„10ç§é«˜çº§SQLï¼Œæ€§èƒ½èµ·é£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/465848661970824/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è‹ä¸‰è¯´æŠ€æœ¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-10T02:10:56.000Z" title="Tue Feb 10 2026 02:10:56 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»13åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>å¾ˆå¤šå°ä¼™ä¼´åœ¨å·¥ä½œä¸­ï¼Œå¯èƒ½åªæŠŠMySQLå½“ä½œä¸€ä¸ªç®€å•çš„â€œæ•°æ®å­˜å‚¨ç®±â€ï¼Œç”¨äº†å®ƒ80%çš„åŸºç¡€åŠŸèƒ½ï¼Œå´ä¸çŸ¥é“å®ƒè¿˜æœ‰å¦å¤–20%çš„ã€èƒ½è§£å†³90%å¤æ‚é—®é¢˜çš„â€œé«˜çº§ç”¨æ³•â€ã€‚</p>
<p>ä»Šå¤©ï¼Œæˆ‘ä¸è°ˆåŸºç¡€çš„å¢åˆ æ”¹æŸ¥ï¼Œå°±å’Œä½ æ·±å…¥èŠèŠï¼Œåœ¨å®é™…é«˜æ€§èƒ½ã€é«˜å¹¶å‘ã€å¤§æ•°æ®é‡çš„åœºæ™¯ä¸‹ï¼Œé‚£äº›çœŸæ­£èƒ½è®©ä½ å’Œå›¢é˜Ÿç”Ÿäº§åŠ›å€å¢ã€æ€§èƒ½é£å‡çš„10ç§MySQLé«˜çº§å®æˆ˜æŠ€å·§ã€‚</p>
<p>å¸Œæœ›å¯¹ä½ ä¼šæœ‰æ‰€å¸®åŠ©ã€‚</p>
<h2 data-id="heading-1">01 æ‰§è¡Œè®¡åˆ’</h2>
<p>åœ¨ä¼˜åŒ–ä»»ä½•æŸ¥è¯¢ä¹‹å‰ï¼Œ<strong>è¯»æ‡‚<code>EXPLAIN</code>çš„è¾“å‡ºæ˜¯ä½ çš„ç¬¬ä¸€é—¨å¿…ä¿®è¯¾</strong>ã€‚</p>
<p>å®ƒå°±åƒSQLçš„â€œXå…‰ç‰‡â€ï¼Œèƒ½å‘Šè¯‰ä½ MySQLç©¶ç«Ÿæ‰“ç®—å¦‚ä½•æ‰§è¡Œä½ çš„æŸ¥è¯¢ï¼Œç“¶é¢ˆåœ¨å“ªé‡Œã€‚</p>
<h3 data-id="heading-2">æ ¸å¿ƒç”¨æ³•ä¸å®æˆ˜</h3>
<p>æ‰§è¡Œ<code>EXPLAIN</code>åï¼Œä½ éœ€è¦é‡ç‚¹å…³æ³¨ä»¥ä¸‹å‡ ä¸ªå…³é”®å­—æ®µï¼š</p>
<ul>
<li><strong>type</strong>ï¼šè®¿é—®ç±»å‹ï¼Œä»æœ€ä¼˜åˆ°æœ€å·®å¤§è‡´æ˜¯ï¼š<code>system</code> &gt; <code>const</code> &gt; <code>eq_ref</code> &gt; <code>ref</code> &gt; <code>range</code> &gt; <code>index</code> &gt; <code>ALL</code>ã€‚çœ‹åˆ°<code>ALL</code>ï¼ˆå…¨è¡¨æ‰«æï¼‰å°±è¦è­¦æƒ•äº†ã€‚</li>
<li><strong>key</strong>ï¼šå®é™…ä½¿ç”¨çš„ç´¢å¼•ã€‚å¦‚æœä¸º<code>NULL</code>ï¼Œè¯´æ˜æ²¡ç”¨ä¸Šç´¢å¼•ã€‚</li>
<li><strong>rows</strong>ï¼šMySQLé¢„ä¼°è¦æ‰«æçš„è¡Œæ•°ã€‚è¿™ä¸ªæ•°å­—è¶Šæ¥è¿‘å®é™…éœ€è¦çš„æ•°æ®è¡Œæ•°è¶Šå¥½ã€‚</li>
<li><strong>Extra</strong>ï¼šåŒ…å«éå¸¸ä¸°å¯Œçš„ä¿¡æ¯ï¼Œä¾‹å¦‚<code>Using filesort</code>ï¼ˆéœ€è¦é¢å¤–æ’åºï¼‰ã€<code>Using temporary</code>ï¼ˆä½¿ç”¨äº†ä¸´æ—¶è¡¨ï¼‰ï¼Œè¿™é€šå¸¸æ˜¯æ€§èƒ½æ€æ‰‹ã€‚</li>
</ul>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- ä¸€ä¸ªéœ€è¦ä¼˜åŒ–çš„æŸ¥è¯¢ç¤ºä¾‹</span>
EXPLAIN 
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> orders 
<span class="hljs-keyword">WHERE</span> user_id <span class="hljs-operator">=</span> <span class="hljs-number">10086</span> 
  <span class="hljs-keyword">AND</span> create_time <span class="hljs-keyword">BETWEEN</span> <span class="hljs-string">'2024-01-01'</span> <span class="hljs-keyword">AND</span> <span class="hljs-string">'2024-01-31'</span>
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> amount <span class="hljs-keyword">DESC</span>;
</code></pre>
<p>å‡è®¾è¿™ä¸ªæŸ¥è¯¢çš„<code>type</code>æ˜¯<code>ALL</code>ï¼Œ<code>key</code>æ˜¯<code>NULL</code>ã€‚è¿™æ„å‘³ç€å®ƒåœ¨<code>orders</code>è¡¨ä¸Šè¿›è¡Œäº†å…¨è¡¨æ‰«æï¼Œæ€§èƒ½æå·®ã€‚ä¼˜åŒ–æ–¹æ³•é€šå¸¸æ˜¯åˆ›å»ºä¸€ä¸ªå¤åˆç´¢å¼•ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- åˆ›å»ºè¦†ç›–äº†WHEREå’ŒORDER BYçš„å¤åˆç´¢å¼•</span>
<span class="hljs-keyword">CREATE</span> INDEX idx_user_time_amount <span class="hljs-keyword">ON</span> orders(user_id, create_time, amount);
<span class="hljs-comment">-- å†æ¬¡ä½¿ç”¨EXPLAINï¼Œä½ ä¼šçœ‹åˆ°typeå˜æˆäº†rangeï¼Œkeyæ˜¾ç¤ºäº†æ–°ç´¢å¼•ï¼Œæ€§èƒ½å¤©å·®åœ°åˆ«ã€‚</span>
</code></pre>
<p><strong>æ·±åº¦å‰–æ</strong>ï¼š<code>EXPLAIN</code>æ˜¯åŸºäºè¡¨çš„ç»Ÿè®¡ä¿¡æ¯æ¥ä¼°ç®—æˆæœ¬çš„ã€‚å¦‚æœè¡¨æ•°æ®å˜åŒ–å¾ˆå¤§è€Œç»Ÿè®¡ä¿¡æ¯æœªæ›´æ–°ï¼Œä¼˜åŒ–å™¨å¯èƒ½ä¼šé€‰é”™ç´¢å¼•ã€‚</p>
<p>è¿™æ—¶ï¼Œå¯ä»¥ç”¨<code>ANALYZE TABLE table_name;</code>æ¥æ‰‹åŠ¨æ›´æ–°ç»Ÿè®¡ä¿¡æ¯ã€‚</p>
<p>æœ‰äº›å°ä¼™ä¼´åœ¨å·¥ä½œä¸­å†™çš„SQLæœ¬èº«ä¸å¤æ‚ï¼Œä½†æ‰§è¡Œå¾ˆæ…¢ï¼Œç¬¬ä¸€æ­¥å°±åº”è¯¥ç¥­å‡º<code>EXPLAIN</code>ã€‚</p>
<h2 data-id="heading-3">02 é«˜çº§ç´¢å¼•ç­–ç•¥</h2>
<p>ç´¢å¼•æ˜¯æ€§èƒ½çš„åŸºçŸ³ï¼Œä½†é”™è¯¯çš„ç´¢å¼•æ¯”æ²¡æœ‰ç´¢å¼•æ›´ç³Ÿç³•ã€‚</p>
<h3 data-id="heading-4">é«˜çº§ç´¢å¼•ç­–ç•¥</h3>
<ol>
<li><strong>è¦†ç›–ç´¢å¼•ï¼ˆCovering Indexï¼‰</strong>ï¼šå¦‚æœç´¢å¼•åŒ…å«äº†æŸ¥è¯¢éœ€è¦çš„æ‰€æœ‰å­—æ®µï¼Œå¼•æ“å°±æ— éœ€å›è¡¨æŸ¥è¯¢æ•°æ®è¡Œï¼Œé€Ÿåº¦æå¿«ã€‚</li>
</ol>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- å‡è®¾å¸¸ç”¨æŸ¥è¯¢æ˜¯è·å–ç”¨æˆ·çš„å§“åå’Œé‚®ç®±</span>
<span class="hljs-keyword">SELECT</span> name, email <span class="hljs-keyword">FROM</span> users <span class="hljs-keyword">WHERE</span> age <span class="hljs-operator">&gt;</span> <span class="hljs-number">20</span>;
<span class="hljs-comment">-- ä¸ºè¿™ä¸ªæŸ¥è¯¢è®¾è®¡è¦†ç›–ç´¢å¼•</span>
<span class="hljs-keyword">CREATE</span> INDEX idx_age_name_email <span class="hljs-keyword">ON</span> users(age, name, email);
<span class="hljs-comment">-- ageç”¨äºæŸ¥è¯¢ï¼Œnameå’Œemailæœ¬èº«å°±åœ¨ç´¢å¼•é¡µä¸­ï¼Œæ— éœ€æŸ¥æ‰¾æ•°æ®è¡Œã€‚</span>
</code></pre>
<ol start="2">
<li>
<p><strong>ç´¢å¼•ä¸‹æ¨ï¼ˆIndex Condition Pushdownï¼Œ ICPï¼‰</strong>ï¼šè¿™æ˜¯MySQL 5.6å¼•å…¥çš„é‡å¤§ä¼˜åŒ–ã€‚å¯¹äºå¤åˆç´¢å¼•<code>(a, b)</code>ï¼ŒæŸ¥è¯¢<code>WHERE a = ? AND b LIKE â€˜%xxxâ€™</code>ã€‚åœ¨æ—§ç‰ˆæœ¬ä¸­ï¼Œå³ä½¿<code>a</code>å‘½ä¸­äº†ç´¢å¼•ï¼Œå¼•æ“ä¹Ÿä¼šå°†æ‰€æœ‰<code>a=?</code>çš„è®°å½•å›è¡¨ï¼Œå†å»è¿‡æ»¤<code>b</code>ã€‚è€ŒICPå…è®¸å°†<code>b LIKE â€˜%xxxâ€™</code>è¿™ä¸ªæ¡ä»¶ä¸‹æ¨åˆ°å­˜å‚¨å¼•æ“å±‚ï¼Œåœ¨ç´¢å¼•æ‰«ææ—¶å°±è¿‡æ»¤ï¼Œå¤§å¤§å‡å°‘å›è¡¨æ¬¡æ•°ã€‚</p>
</li>
<li>
<p><strong>å‰ç¼€ç´¢å¼•ï¼ˆPrefix Indexï¼‰</strong>ï¼šå¯¹äºè¶…é•¿æ–‡æœ¬å­—æ®µï¼ˆå¦‚<code>VARCHAR(500)</code>ï¼‰ï¼Œä¸ºæ•´ä¸ªå­—æ®µå»ºç´¢å¼•éå¸¸è‡ƒè‚¿ã€‚å¯ä»¥åªå¯¹å‰Nä¸ªå­—ç¬¦å»ºç«‹ç´¢å¼•ï¼Œåœ¨ç©ºé—´å’Œæ•ˆç‡é—´å–å¾—å¹³è¡¡ã€‚</p>
</li>
</ol>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- ä¸ºcontentå­—æ®µå‰100ä¸ªå­—ç¬¦åˆ›å»ºç´¢å¼•</span>
<span class="hljs-keyword">CREATE</span> INDEX idx_content_prefix <span class="hljs-keyword">ON</span> articles (content(<span class="hljs-number">100</span>));
<span class="hljs-comment">-- ç¼ºç‚¹æ˜¯å‰ç¼€ç´¢å¼•æ— æ³•ç”¨äºGROUP BYå’ŒORDER BYæ“ä½œã€‚</span>
</code></pre>
<p><strong>æ·±åº¦å‰–æ</strong>ï¼šç´¢å¼•æ˜¯ä¸€æŠŠåŒåˆƒå‰‘ï¼ŒåŠ é€ŸæŸ¥è¯¢çš„åŒæ—¶ï¼Œä¼šé™ä½å†™æ“ä½œï¼ˆINSERT/UPDATE/DELETEï¼‰çš„é€Ÿåº¦ï¼Œå› ä¸ºç´¢å¼•æ ‘ä¹Ÿéœ€è¦ç»´æŠ¤ã€‚</p>
<p>ä¸€ä¸ªè¡¨ä¸Šåˆ›å»ºåå‡ ä¸ªç´¢å¼•æ˜¯å¸¸è§çš„è®¾è®¡è¯¯åŒºã€‚</p>
<p>ä½ éœ€è¦å®šæœŸä½¿ç”¨<code>SHOW INDEX FROM table_name;</code>å®¡æŸ¥ç´¢å¼•çš„åŸºæ•°ï¼ˆCardinalityï¼Œå”¯ä¸€å€¼æ•°é‡ï¼‰ï¼Œåˆ é™¤ä½¿ç”¨ç‡æä½çš„å†—ä½™ç´¢å¼•ã€‚</p>
<h2 data-id="heading-5">03 çª—å£å‡½æ•°</h2>
<p>è¿™æ˜¯MySQL 8.0å¸¦æ¥çš„â€œç¥å…µåˆ©å™¨â€ï¼Œç”¨äºè¿›è¡Œ<strong>è·¨è¡Œè®¡ç®—</strong>ï¼Œå®Œç¾è§£å†³å¤æ‚æ’åã€ç´¯åŠ ã€ç§»åŠ¨å¹³å‡ç­‰é—®é¢˜ã€‚</p>
<h3 data-id="heading-6">æ ¸å¿ƒåœºæ™¯ä¸è¯­æ³•</h3>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- ç»å…¸åœºæ™¯ï¼šè®¡ç®—æ¯ä¸ªéƒ¨é—¨å†…å‘˜å·¥çš„è–ªæ°´æ’å</span>
<span class="hljs-keyword">SELECT</span> 
    name,
    department,
    salary,
    <span class="hljs-built_in">RANK</span>() <span class="hljs-keyword">OVER</span> (<span class="hljs-keyword">PARTITION</span> <span class="hljs-keyword">BY</span> department <span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> salary <span class="hljs-keyword">DESC</span>) <span class="hljs-keyword">as</span> dept_salary_rank,
    <span class="hljs-comment">-- åŒæ—¶è®¡ç®—å…¬å¸æ•´ä½“æ’å</span>
    <span class="hljs-built_in">RANK</span>() <span class="hljs-keyword">OVER</span> (<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> salary <span class="hljs-keyword">DESC</span>) <span class="hljs-keyword">as</span> company_rank,
    <span class="hljs-comment">-- è®¡ç®—éƒ¨é—¨å†…è–ªæ°´ç´¯è®¡å æ¯”</span>
    <span class="hljs-built_in">SUM</span>(salary) <span class="hljs-keyword">OVER</span> (<span class="hljs-keyword">PARTITION</span> <span class="hljs-keyword">BY</span> department) <span class="hljs-keyword">as</span> dept_total,
    salary <span class="hljs-operator">/</span> <span class="hljs-built_in">SUM</span>(salary) <span class="hljs-keyword">OVER</span> (<span class="hljs-keyword">PARTITION</span> <span class="hljs-keyword">BY</span> department) <span class="hljs-keyword">as</span> salary_ratio
<span class="hljs-keyword">FROM</span> employees;
</code></pre>
<p><code>PARTITION BY</code>ç±»ä¼¼äº<code>GROUP BY</code>ï¼Œä½†ä¸ä¼šå°†è¡Œåˆå¹¶ï¼Œè€Œæ˜¯å®šä¹‰çª—å£èŒƒå›´ã€‚</p>
<p><code>ORDER BY</code>å†³å®šçª—å£å†…çš„æ’åºã€‚</p>
<p><strong>æ·±åº¦å‰–æ</strong>ï¼šåœ¨MySQL 8.0ä¹‹å‰ï¼Œè¦å®ç°ä¸Šè¿°æŸ¥è¯¢ï¼Œä½ éœ€è¦å†™å¤æ‚çš„è‡ªè¿æ¥æˆ–æ•ˆç‡æä½çš„å­æŸ¥è¯¢ã€‚çª—å£å‡½æ•°åœ¨æ•°æ®åº“å†…éƒ¨è¿›è¡Œäº†æ·±åº¦ä¼˜åŒ–ï¼Œæ€§èƒ½æå‡å¯è¾¾å‡ ä¸ªæ•°é‡çº§ã€‚</p>
<p>å®ƒç‰¹åˆ«é€‚ç”¨äº<strong>åˆ†ææŠ¥è¡¨ã€å®æ—¶æ’è¡Œæ¦œã€è®¡ç®—åŒæ¯”ç¯æ¯”</strong>ç­‰OLAPå‹åœºæ™¯ã€‚</p>
<h2 data-id="heading-7">04 é€šç”¨è¡¨è¡¨è¾¾å¼ï¼ˆCTEï¼‰</h2>
<p>CTEï¼ˆWITHå­å¥ï¼‰æ˜¯å¦ä¸€ä¸ªMySQL 8.0çš„é‡è¦ç‰¹æ€§ï¼Œå®ƒ<strong>å…è®¸ä½ å®šä¹‰ä¸´æ—¶çš„å‘½åç»“æœé›†</strong>ï¼Œåœ¨åç»­æŸ¥è¯¢ä¸­åƒæ™®é€šè¡¨ä¸€æ ·å¼•ç”¨ã€‚</p>
<h3 data-id="heading-8">ä¼˜åŠ¿ä¸ç¤ºä¾‹</h3>
<ol>
<li><strong>æå‡å¯è¯»æ€§</strong>ï¼šå°†å¤æ‚æŸ¥è¯¢åˆ†è§£æˆé€»è¾‘æ¸…æ™°çš„æ­¥éª¤ã€‚</li>
<li><strong>æ”¯æŒé€’å½’</strong>ï¼šè¿™æ˜¯CTEçš„æ€æ‰‹çº§åŠŸèƒ½ï¼Œå¯ä»¥è½»æ¾æŸ¥è¯¢æ ‘å½¢æˆ–å›¾çŠ¶æ•°æ®ã€‚</li>
</ol>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- ç¤ºä¾‹1ï¼šåˆ†è§£å¤æ‚æŸ¥è¯¢ï¼ˆéé€’å½’ï¼‰</span>
<span class="hljs-keyword">WITH</span> 
  high_value_orders <span class="hljs-keyword">AS</span> ( <span class="hljs-comment">-- æ‰¾å‡ºé«˜ä»·å€¼è®¢å•</span>
    <span class="hljs-keyword">SELECT</span> user_id, <span class="hljs-built_in">SUM</span>(amount) <span class="hljs-keyword">as</span> total_spent 
    <span class="hljs-keyword">FROM</span> orders 
    <span class="hljs-keyword">WHERE</span> status <span class="hljs-operator">=</span> <span class="hljs-string">'completed'</span>
    <span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> user_id 
    <span class="hljs-keyword">HAVING</span> total_spent <span class="hljs-operator">&gt;</span> <span class="hljs-number">10000</span>
  ),
  active_users <span class="hljs-keyword">AS</span> ( <span class="hljs-comment">-- æ‰¾å‡ºæ´»è·ƒç”¨æˆ·</span>
    <span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">DISTINCT</span> user_id 
    <span class="hljs-keyword">FROM</span> user_logs 
    <span class="hljs-keyword">WHERE</span> last_active_date <span class="hljs-operator">&gt;</span> DATE_SUB(NOW(), <span class="hljs-type">INTERVAL</span> <span class="hljs-number">30</span> <span class="hljs-keyword">DAY</span>)
  )
<span class="hljs-comment">-- æœ€ç»ˆæŸ¥è¯¢ï¼šæ—¢æ˜¯é«˜ä»·å€¼åˆæ˜¯æ´»è·ƒçš„ç”¨æˆ·</span>
<span class="hljs-keyword">SELECT</span> u.name, u.email, h.total_spent
<span class="hljs-keyword">FROM</span> users u
<span class="hljs-keyword">JOIN</span> high_value_orders h <span class="hljs-keyword">ON</span> u.id <span class="hljs-operator">=</span> h.user_id
<span class="hljs-keyword">JOIN</span> active_users a <span class="hljs-keyword">ON</span> u.id <span class="hljs-operator">=</span> a.user_id;

<span class="hljs-comment">-- ç¤ºä¾‹2ï¼šé€’å½’CTEï¼ŒæŸ¥è¯¢éƒ¨é—¨æ ‘</span>
<span class="hljs-keyword">WITH</span> <span class="hljs-keyword">RECURSIVE</span> department_tree <span class="hljs-keyword">AS</span> (
    <span class="hljs-comment">-- é”šç‚¹ï¼šæ‰¾åˆ°æ ¹éƒ¨é—¨</span>
    <span class="hljs-keyword">SELECT</span> id, name, parent_id, <span class="hljs-number">1</span> <span class="hljs-keyword">as</span> level 
    <span class="hljs-keyword">FROM</span> departments 
    <span class="hljs-keyword">WHERE</span> parent_id <span class="hljs-keyword">IS</span> <span class="hljs-keyword">NULL</span>
    <span class="hljs-keyword">UNION</span> <span class="hljs-keyword">ALL</span>
    <span class="hljs-comment">-- é€’å½’æˆå‘˜ï¼šè¿æ¥çˆ¶éƒ¨é—¨å’Œå­éƒ¨é—¨</span>
    <span class="hljs-keyword">SELECT</span> d.id, d.name, d.parent_id, dt.level <span class="hljs-operator">+</span> <span class="hljs-number">1</span>
    <span class="hljs-keyword">FROM</span> departments d
    <span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> department_tree dt <span class="hljs-keyword">ON</span> d.parent_id <span class="hljs-operator">=</span> dt.id
)
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> department_tree <span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> level, id;
</code></pre>
<p><strong>æ·±åº¦å‰–æ</strong>ï¼šé€’å½’CTEæå¤§åœ°ç®€åŒ–äº†<strong>ç»„ç»‡æ¶æ„ã€åˆ†ç±»ç›®å½•ã€è¯„è®ºåµŒå¥—</strong>ç­‰å±‚æ¬¡æ•°æ®çš„æŸ¥è¯¢ã€‚</p>
<p>åœ¨æ—§ç‰ˆæœ¬ä¸­ï¼Œè¿™é€šå¸¸éœ€è¦åœ¨åº”ç”¨å±‚è¿›è¡Œå¤šæ¬¡æŸ¥è¯¢æˆ–åœ¨æ•°æ®åº“ä¸­ä½¿ç”¨å­˜å‚¨è¿‡ç¨‹ï¼Œé€’å½’CTEåœ¨æ•°æ®åº“å†…æ ¸å®Œæˆéå†ï¼Œæ•ˆç‡æ›´é«˜ã€‚</p>
<h2 data-id="heading-9">05 JSONç±»å‹ä¸å‡½æ•°</h2>
<p>MySQL 5.7+åŸç”Ÿæ”¯æŒJSONæ•°æ®ç±»å‹ï¼Œè®©ä½ èƒ½å¤Ÿåœ¨å…³ç³»å‹æ•°æ®åº“ä¸­çµæ´»åœ°å­˜å‚¨å’ŒæŸ¥è¯¢åŠç»“æ„åŒ–æ•°æ®ï¼Œè¿™åœ¨å¤„ç†<strong>åŠ¨æ€å­—æ®µã€é…ç½®ä¿¡æ¯æˆ–ç¬¬ä¸‰æ–¹APIè¿”å›çš„æ•°æ®</strong>æ—¶éå¸¸æœ‰ç”¨ã€‚</p>
<h3 data-id="heading-10">æ ¸å¿ƒæ“ä½œ</h3>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- 1. åˆ›å»ºåŒ…å«JSONåˆ—çš„è¡¨</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> products (
    id <span class="hljs-type">INT</span> <span class="hljs-keyword">PRIMARY</span> KEY,
    name <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">100</span>),
    attributes JSON COMMENT <span class="hljs-string">'å­˜å‚¨é¢œè‰²ã€å°ºå¯¸ç­‰åŠ¨æ€å±æ€§'</span>
);

<span class="hljs-comment">-- 2. æ’å…¥JSONæ•°æ®</span>
<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> products <span class="hljs-keyword">VALUES</span> (<span class="hljs-number">1</span>, <span class="hljs-string">'T-Shirt'</span>, <span class="hljs-string">'{"color": "red", "size": ["M", "L"], "tags": ["casual", "cotton"]}'</span>);

<span class="hljs-comment">-- 3. æŸ¥è¯¢ (ä½¿ç”¨ -&gt; å’Œ -&gt;&gt; æ“ä½œç¬¦)</span>
<span class="hljs-comment">-- -&gt; è¿”å›JSONç±»å‹ï¼Œ -&gt;&gt; è¿”å›çº¯æ–‡æœ¬å­—ç¬¦ä¸²</span>
<span class="hljs-keyword">SELECT</span> 
    name,
    attributes<span class="hljs-operator">-</span><span class="hljs-operator">&gt;&gt;</span><span class="hljs-string">'$.color'</span> <span class="hljs-keyword">as</span> color, <span class="hljs-comment">-- æå–colorå€¼</span>
    attributes<span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span><span class="hljs-string">'$.size'</span> <span class="hljs-keyword">as</span> size_array <span class="hljs-comment">-- æå–sizeæ•°ç»„ï¼ˆä»ä¸ºJSONï¼‰</span>
<span class="hljs-keyword">FROM</span> products 
<span class="hljs-keyword">WHERE</span> attributes<span class="hljs-operator">-</span><span class="hljs-operator">&gt;&gt;</span><span class="hljs-string">'$.color'</span> <span class="hljs-operator">=</span> <span class="hljs-string">'red'</span> 
   <span class="hljs-keyword">OR</span> JSON_CONTAINS(attributes<span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span><span class="hljs-string">'$.tags'</span>, <span class="hljs-string">'"cotton"'</span>);

<span class="hljs-comment">-- 4. æ›´æ–°éƒ¨åˆ†JSON</span>
<span class="hljs-keyword">UPDATE</span> products 
<span class="hljs-keyword">SET</span> attributes <span class="hljs-operator">=</span> JSON_SET(attributes, <span class="hljs-string">'$.color'</span>, <span class="hljs-string">'blue'</span>, <span class="hljs-string">'$.new_field'</span>, <span class="hljs-string">'value'</span>) 
<span class="hljs-keyword">WHERE</span> id <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;
</code></pre>
<p><strong>æ·±åº¦å‰–æ</strong>ï¼šJSONåˆ—åŒæ ·å¯ä»¥å»ºç«‹ç´¢å¼•ï¼ˆé€šè¿‡å‡½æ•°ç´¢å¼•ï¼‰ï¼ŒåŠ é€ŸæŸ¥è¯¢ã€‚</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> INDEX idx_color <span class="hljs-keyword">ON</span> products( (attributes<span class="hljs-operator">-</span><span class="hljs-operator">&gt;&gt;</span><span class="hljs-string">'$.color'</span>) );
</code></pre>
<p>è¿™å…è®¸ä½ åœ¨ä¿æŒçµæ´»æ€§çš„åŒæ—¶ï¼Œä¸ä¸§å¤±å¯¹å…³é”®å­—æ®µçš„æŸ¥è¯¢æ€§èƒ½ã€‚</p>
<p>å®ƒå®Œç¾å¡«è¡¥äº†å…³ç³»æ¨¡å‹åœ¨åº”å¯¹<strong>å¤šå˜ä¸šåŠ¡éœ€æ±‚</strong>æ—¶çš„çŸ­æ¿ã€‚</p>
<h2 data-id="heading-11">06 åˆ†åŒºè¡¨ï¼ˆPartitioningï¼‰</h2>
<p>å½“å•è¡¨æ•°æ®é‡å·¨å¤§ï¼ˆå¦‚æ•°äº¿è¡Œï¼‰æ—¶ï¼Œåˆ†åŒºå¯ä»¥å°†ä¸€å¼ å¤§è¡¨åœ¨ç‰©ç†ä¸Šåˆ†å‰²ä¸ºå¤šä¸ªæ›´å°ã€æ›´æ˜“ç®¡ç†çš„éƒ¨åˆ†ï¼Œè€Œé€»è¾‘ä¸Šä»æ˜¯ä¸€å¼ è¡¨ã€‚</p>
<h3 data-id="heading-12">åˆ†åŒºç­–ç•¥ä¸ç¤ºä¾‹</h3>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- æŒ‰æ—¶é—´èŒƒå›´(RANGE)åˆ†åŒºï¼Œéå¸¸é€‚åˆæ—¥å¿—ã€è®¢å•è¡¨</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> sales (
    id <span class="hljs-type">INT</span>,
    sale_date <span class="hljs-type">DATE</span>,
    amount <span class="hljs-type">DECIMAL</span>(<span class="hljs-number">10</span>,<span class="hljs-number">2</span>)
)
<span class="hljs-keyword">PARTITION</span> <span class="hljs-keyword">BY</span> <span class="hljs-keyword">RANGE</span> COLUMNS(sale_date) (
    <span class="hljs-keyword">PARTITION</span> p2023q1 <span class="hljs-keyword">VALUES</span> LESS THAN (<span class="hljs-string">'2023-04-01'</span>),
    <span class="hljs-keyword">PARTITION</span> p2023q2 <span class="hljs-keyword">VALUES</span> LESS THAN (<span class="hljs-string">'2023-07-01'</span>),
    <span class="hljs-keyword">PARTITION</span> p2023q3 <span class="hljs-keyword">VALUES</span> LESS THAN (<span class="hljs-string">'2023-10-01'</span>),
    <span class="hljs-keyword">PARTITION</span> p2023q4 <span class="hljs-keyword">VALUES</span> LESS THAN (<span class="hljs-string">'2024-01-01'</span>),
    <span class="hljs-keyword">PARTITION</span> p_future <span class="hljs-keyword">VALUES</span> LESS THAN MAXVALUE
);

<span class="hljs-comment">-- æŸ¥è¯¢æ—¶ï¼Œä¼˜åŒ–å™¨ä¼šè‡ªåŠ¨å®šä½åˆ°ç‰¹å®šåˆ†åŒºï¼ˆåˆ†åŒºè£å‰ªï¼ŒPartition Pruningï¼‰</span>
EXPLAIN <span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> sales <span class="hljs-keyword">WHERE</span> sale_date <span class="hljs-operator">=</span> <span class="hljs-string">'2023-05-15'</span>;
<span class="hljs-comment">-- ä½ ä¼šçœ‹åˆ°partitions: p2023q2ï¼Œæ„å‘³ç€åªæ‰«æäº†2023å¹´Q2çš„åˆ†åŒºã€‚</span>
</code></pre>
<p>é™¤äº†<code>RANGE</code>ï¼Œè¿˜æœ‰<code>LIST</code>ï¼ˆæŒ‰åˆ—è¡¨å€¼ï¼‰ã€<code>HASH</code>ï¼ˆæŒ‰å“ˆå¸Œå€¼å‡åŒ€åˆ†å¸ƒï¼‰ç­‰åˆ†åŒºæ–¹å¼ã€‚</p>
<p><strong>æ·±åº¦å‰–æ</strong>ï¼šåˆ†åŒºçš„æ ¸å¿ƒä¼˜åŠ¿åœ¨äº<strong>ç»´æŠ¤æ€§</strong>å’Œ<strong>æŸ¥è¯¢æ€§èƒ½</strong>ã€‚</p>
<p>ä½ å¯ä»¥å¿«é€Ÿåˆ é™¤æˆ–å½’æ¡£æ•´ä¸ªæ—§åˆ†åŒºï¼ˆ<code>ALTER TABLE sales DROP PARTITION p2023q1;</code>ï¼‰ï¼Œè¿™æ¯”<code>DELETE</code>æ“ä½œå¿«å¾—å¤šï¼Œä¸”ä¸äº§ç”Ÿç¢ç‰‡ã€‚å¯¹äºæŒ‰åˆ†åŒºé”®è¿‡æ»¤çš„æŸ¥è¯¢ï¼Œæ€§èƒ½æå‡æ˜¾è‘—ã€‚</p>
<p>ä½†æ³¨æ„ï¼Œåˆ†åŒºé”®é€‰æ‹©ä¸å½“æˆ–è·¨åˆ†åŒºæŸ¥è¯¢ï¼Œæ€§èƒ½å¯èƒ½åè€Œä¸‹é™ã€‚</p>
<h2 data-id="heading-13">07 è¿æ¥ï¼ˆJOINï¼‰ä¸å­æŸ¥è¯¢</h2>
<p>å¤šè¡¨å…³è”æ˜¯ä¸šåŠ¡å¸¸æ€ï¼Œä½†å†™å¾—ä¸å¥½å°±æ˜¯æ€§èƒ½ç¾éš¾ã€‚</p>
<h3 data-id="heading-14">é«˜çº§æŠ€å·§</h3>
<ol>
<li><strong>æ§åˆ¶è¿æ¥é¡ºåº</strong>ï¼šMySQLä¼˜åŒ–å™¨é€šå¸¸ä¼šé€‰æ‹©å®ƒè®¤ä¸ºæœ€ä½³çš„é¡ºåºï¼Œä½†ä½ å¯ä»¥åœ¨å¤æ‚åœºæ™¯ä¸‹ç”¨<code>STRAIGHT_JOIN</code>å¼ºåˆ¶æŒ‡å®šé¡ºåºã€‚</li>
</ol>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">SELECT</span> ... 
<span class="hljs-keyword">FROM</span> small_table s
STRAIGHT_JOIN large_table l <span class="hljs-keyword">ON</span> s.id <span class="hljs-operator">=</span> l.s_id; <span class="hljs-comment">-- å¼ºåˆ¶å…ˆæŸ¥å°è¡¨</span>
</code></pre>
<ol start="2">
<li><strong>åˆ©ç”¨è¡ç”Ÿè¡¨ï¼ˆDerived Tableï¼‰ä¸‹æ¨æ¡ä»¶</strong>ï¼šæœ‰æ—¶å°†å­æŸ¥è¯¢æˆ–è¿‡æ»¤æ¡ä»¶æå‰ï¼Œèƒ½æå¤§åœ°å‡å°‘ä¸­é—´ç»“æœé›†ã€‚</li>
</ol>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- ä¼˜åŒ–å‰ï¼šå…ˆè¿æ¥ä¸¤ä¸ªå¤§è¡¨ï¼Œå†è¿‡æ»¤</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> A <span class="hljs-keyword">JOIN</span> B <span class="hljs-keyword">ON</span> A.id <span class="hljs-operator">=</span> B.aid <span class="hljs-keyword">WHERE</span> A.create_time <span class="hljs-operator">&gt;</span> <span class="hljs-string">'...'</span>;

<span class="hljs-comment">-- ä¼˜åŒ–åï¼šå…ˆè¿‡æ»¤Aè¡¨ï¼Œå†è¿æ¥</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> (<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> A <span class="hljs-keyword">WHERE</span> create_time <span class="hljs-operator">&gt;</span> <span class="hljs-string">'...'</span>) filtered_A
<span class="hljs-keyword">JOIN</span> B <span class="hljs-keyword">ON</span> filtered_A.id <span class="hljs-operator">=</span> B.aid;
</code></pre>
<ol start="3">
<li><strong><code>EXISTS</code> vs <code>IN</code></strong>ï¼šå¯¹äºâ€œæ˜¯å¦å­˜åœ¨â€çš„æŸ¥è¯¢ï¼Œç‰¹åˆ«æ˜¯å­æŸ¥è¯¢ç»“æœé›†è¾ƒå¤§æ—¶ï¼Œ<code>EXISTS</code>ï¼ˆå…³è”å­æŸ¥è¯¢ï¼‰é€šå¸¸æ¯”<code>IN</code>ï¼ˆéå…³è”å­æŸ¥è¯¢ï¼‰æ€§èƒ½æ›´å¥½ï¼Œå› ä¸ºå®ƒæ‰¾åˆ°ç¬¬ä¸€ä¸ªåŒ¹é…é¡¹å°±ä¼šåœæ­¢ã€‚</li>
</ol>
<p><strong>æ·±åº¦å‰–æ</strong>ï¼šæ‰€æœ‰çš„JOINä¼˜åŒ–ï¼Œå…¶æ ¸å¿ƒæ€æƒ³éƒ½æ˜¯ <strong>â€œå°½æ—©è¿‡æ»¤ï¼Œå‡å°‘ä¸­é—´æ•°æ®é‡â€</strong> ã€‚ç†Ÿç»ƒä½¿ç”¨<code>EXPLAIN</code>æŸ¥çœ‹è¿æ¥ç±»å‹ï¼ˆå¦‚<code>eq_ref</code>å¾ˆå¥½ï¼Œ<code>Using join buffer</code>è¯´æ˜å¯èƒ½éœ€è¦ç´¢å¼•ï¼‰æ˜¯å…³é”®ã€‚</p>
<h2 data-id="heading-15">08 ç”¨æˆ·è‡ªå®šä¹‰å˜é‡</h2>
<p>MySQLå…è®¸ä½ å®šä¹‰ç”¨æˆ·å˜é‡ï¼ˆå¦‚<code>@rank</code>ï¼‰ï¼Œè¿™åœ¨ä¸€äº›éœ€è¦<strong>è·¨è¡Œè®¡ç®—æˆ–è®°å½•ä¸­é—´çŠ¶æ€</strong>çš„åˆ†æä¸­éå¸¸æœ‰ç”¨ã€‚</p>
<h3 data-id="heading-16">å®æˆ˜æ¡ˆä¾‹ï¼šè®¡ç®—è¡Œé—´å·®å€¼</h3>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- è®¡ç®—æ¯æ—¥é”€å”®é¢çš„æ—¥ç¯æ¯”å¢é•¿ç‡</span>
<span class="hljs-keyword">SELECT</span> 
    sale_date,
    daily_amount,
    <span class="hljs-comment">-- ä½¿ç”¨å˜é‡è®°å½•å‰ä¸€å¤©çš„å€¼</span>
    <span class="hljs-variable">@prev</span>_amount <span class="hljs-keyword">as</span> prev_day_amount,
    ROUND( (daily_amount <span class="hljs-operator">-</span> <span class="hljs-variable">@prev</span>_amount) <span class="hljs-operator">/</span> <span class="hljs-variable">@prev</span>_amount <span class="hljs-operator">*</span> <span class="hljs-number">100</span>, <span class="hljs-number">2</span>) <span class="hljs-keyword">as</span> growth_rate,
    <span class="hljs-comment">-- å°†å½“å‰å€¼èµ‹ç»™å˜é‡ï¼Œä¾›ä¸‹ä¸€è¡Œä½¿ç”¨</span>
    <span class="hljs-variable">@prev</span>_amount :<span class="hljs-operator">=</span> daily_amount
<span class="hljs-keyword">FROM</span> 
    daily_sales_summary,
    (<span class="hljs-keyword">SELECT</span> <span class="hljs-variable">@prev</span>_amount :<span class="hljs-operator">=</span> <span class="hljs-number">0</span>) init <span class="hljs-comment">-- åˆå§‹åŒ–å˜é‡</span>
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> sale_date;
</code></pre>
<p><strong>æ·±åº¦å‰–æ</strong>ï¼šç”¨æˆ·å˜é‡æä¾›äº†è¿‡ç¨‹å¼ç¼–ç¨‹çš„èƒ½åŠ›ï¼Œå¯ä»¥æ¨¡æ‹Ÿçª—å£å‡½æ•°çš„éƒ¨åˆ†åŠŸèƒ½ï¼ˆåœ¨MySQL 8.0ä¹‹å‰ï¼‰ã€‚</p>
<p>ä½†å®ƒ<strong>ä¸æ˜¯SQLæ ‡å‡†</strong>ï¼Œæ‰§è¡Œé¡ºåºæœ‰æ—¶åç›´è§‰ï¼Œéœ€è°¨æ…ä½¿ç”¨ã€‚</p>
<p>åœ¨å¤æ‚çš„ä¼šè¯æˆ–äº‹åŠ¡ä¸­ï¼Œå˜é‡çš„ç”Ÿå‘½å‘¨æœŸå’Œä½œç”¨åŸŸä¹Ÿéœ€è¦ä»”ç»†è€ƒé‡ã€‚</p>
<h2 data-id="heading-17">09 åœ¨çº¿DDLä¸æ— é”å˜æ›´</h2>
<p>åœ¨ä¸šåŠ¡7x24å°æ—¶è¿è¡Œçš„æ—¶ä»£ï¼Œç»™å¤§è¡¨åŠ å­—æ®µã€æ”¹ç´¢å¼•å†ä¹Ÿä¸èƒ½éšæ„åœæœåŠ¡äº†ã€‚</p>
<p>MySQL 5.6+æä¾›äº†<code>ALGORITHM</code>å’Œ<code>LOCK</code>é€‰é¡¹ï¼Œå®ç°<strong>åœ¨çº¿DDL</strong>ï¼ˆOnline Data Definitionï¼‰ã€‚</p>
<h3 data-id="heading-18">å®‰å…¨æ“ä½œæŒ‡å—</h3>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- æ·»åŠ ä¸€ä¸ªå¯ä¸ºç©ºä¸”æœ‰é»˜è®¤å€¼çš„æ–°åˆ—ï¼Œä½¿ç”¨INPLACEç®—æ³•å’Œå°½é‡ä½çš„é”çº§åˆ«</span>
<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> huge_table 
<span class="hljs-keyword">ADD</span> <span class="hljs-keyword">COLUMN</span> new_column <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">100</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">''</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
ALGORITHM<span class="hljs-operator">=</span>INPLACE, <span class="hljs-comment">-- å°½é‡ä½¿ç”¨INPLACEï¼ˆåŸåœ°é‡å»ºï¼‰ï¼Œé¿å…COPYï¼ˆé”è¡¨å¤åˆ¶ï¼‰</span>
LOCK<span class="hljs-operator">=</span><span class="hljs-keyword">NONE</span>; <span class="hljs-comment">-- ç›®æ ‡ï¼šä¸åŠ é”ï¼Œæˆ–å…±äº«é”</span>

<span class="hljs-comment">-- ä¿®æ”¹åˆ—ç±»å‹ï¼ˆæŸäº›æƒ…å†µéœ€è¦COPYï¼Œä¼šé”è¡¨ï¼‰</span>
<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> huge_table 
MODIFY <span class="hljs-keyword">COLUMN</span> old_column <span class="hljs-type">BIGINT</span>,
ALGORITHM<span class="hljs-operator">=</span><span class="hljs-keyword">COPY</span>, <span class="hljs-comment">-- æ³¨æ„ï¼šè¿™é‡Œå¯èƒ½å¿…é¡»ç”¨COPY</span>
LOCK<span class="hljs-operator">=</span>SHARED;
</code></pre>
<p><strong>æ·±åº¦å‰–æ</strong>ï¼š<code>ALGORITHM=INPLACE</code>æ„å‘³ç€å¤§éƒ¨åˆ†å·¥ä½œï¼ˆå¦‚é‡å»ºç´¢å¼•ï¼‰åœ¨å¼•æ“å†…éƒ¨å®Œæˆï¼Œå…è®¸å¹¶å‘DMLæ“ä½œã€‚</p>
<p>è€Œ<code>ALGORITHM=COPY</code>ä¼šåˆ›å»ºæ–°è¡¨å¹¶å¤åˆ¶æ•°æ®ï¼Œå…¨ç¨‹é”è¡¨ã€‚</p>
<p>æ‰§è¡Œå‰åŠ¡å¿…ç”¨<code>ALGORITHM=DEFAULT</code>å…ˆæµ‹è¯•ä¸€ä¸‹ã€‚</p>
<p><strong>pt-online-schema-change</strong> æ˜¯Perconaæä¾›çš„ç¬¬ä¸‰æ–¹å·¥å…·ï¼Œé€šè¿‡è§¦å‘å™¨å®ç°çœŸæ­£çš„å…¨ç¨‹æ— é”ï¼Œæ˜¯æ›´ç¨³å¦¥çš„é€‰æ‹©ã€‚</p>
<h2 data-id="heading-19">10 åˆ©ç”¨ç”Ÿæˆåˆ—ä¸å‡½æ•°ç´¢å¼•</h2>
<p>ç”Ÿæˆåˆ—çš„å€¼ç”±è¡¨ä¸­å…¶ä»–åˆ—è®¡ç®—è€Œæ¥ï¼Œå¯åˆ†ä¸º<strong>è™šæ‹Ÿåˆ—ï¼ˆVIRTUALï¼Œä¸å­˜å‚¨ï¼Œè¯»å–æ—¶è®¡ç®—ï¼‰å’Œå­˜å‚¨åˆ—ï¼ˆSTOREDï¼ŒæŒä¹…åŒ–å­˜å‚¨ï¼‰</strong>ã€‚</p>
<p>è¿™ä¸ºå»ºç«‹é«˜æ•ˆçš„å‡½æ•°ç´¢å¼•é“ºå¹³äº†é“è·¯ã€‚</p>
<h3 data-id="heading-20">åº”ç”¨åœºæ™¯</h3>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- åœºæ™¯ï¼šç»å¸¸éœ€è¦æ ¹æ® `first_name` å’Œ `last_name` è¿›è¡Œå…¨åæœç´¢</span>
<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> users 
<span class="hljs-keyword">ADD</span> <span class="hljs-keyword">COLUMN</span> full_name <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">255</span>) 
GENERATED ALWAYS <span class="hljs-keyword">AS</span> (CONCAT(first_name, <span class="hljs-string">' '</span>, last_name)) STORED, <span class="hljs-comment">-- åˆ›å»ºå­˜å‚¨çš„ç”Ÿæˆåˆ—</span>
<span class="hljs-keyword">ADD</span> INDEX idx_full_name (full_name); <span class="hljs-comment">-- åœ¨ç”Ÿæˆåˆ—ä¸Šå»ºç«‹ç´¢å¼•</span>

<span class="hljs-comment">-- ç°åœ¨ï¼Œä»¥ä¸‹æŸ¥è¯¢å¯ä»¥é«˜æ•ˆä½¿ç”¨ç´¢å¼•</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> users <span class="hljs-keyword">WHERE</span> full_name <span class="hljs-operator">=</span> <span class="hljs-string">'John Doe'</span>;
</code></pre>
<p><strong>æ·±åº¦å‰–æ</strong>ï¼šè¿™è§£å†³äº†ç›´æ¥åœ¨è¡¨è¾¾å¼ï¼ˆå¦‚<code>CONCAT(first_name, â€˜ â€˜, last_name)</code>ï¼‰ä¸Šå»ºç«‹å‡½æ•°ç´¢å¼•çš„éš¾é¢˜ã€‚</p>
<p>è™šæ‹Ÿåˆ—èŠ‚çœç©ºé—´ä½†å¢åŠ CPUè®¡ç®—å¼€é”€ï¼›å­˜å‚¨åˆ—åä¹‹ã€‚</p>
<p>æ›´å¤šé¡¹ç›®å®æˆ˜åœ¨é¡¹ç›®å®æˆ˜ç½‘ï¼š<a href="https://link.juejin.cn/?target=http%3A%2F%2Fsusan.net.cn%2Fproject" title="https://link.juejin.cn/?target=http%3A%2F%2Fsusan.net.cn%2Fproject" target="_blank">javaçªå‡»é˜Ÿ</a></p>
<h2 data-id="heading-21">æ€»ç»“ï¼šä»â€œä¼šç”¨â€åˆ°â€œç²¾é€šâ€çš„è·ƒè¿</h2>
<p>å¥½äº†ï¼Œä¸€å£æ°”èŠäº†11ä¸ªMySQLçš„é«˜çº§ç”¨æ³•ã€‚è®©æˆ‘ä»¬æœ€åå†æ¢³ç†ä¸€ä¸‹ï¼Œè¿™äº›æŠ€å·§å¹¶éå­¤ç«‹å­˜åœ¨ï¼Œå®ƒä»¬æ„æˆäº†ä¸€ä¸ªåº”å¯¹ä¸åŒåœºæ™¯æŒ‘æˆ˜çš„å·¥å…·ç®±ã€‚</p>




























































<table><thead><tr><th align="left">é«˜çº§ç”¨æ³•</th><th align="left">æ ¸å¿ƒè§£å†³ç—›ç‚¹</th><th align="left">æ¨èé€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td align="left"><strong>æ‰§è¡Œè®¡åˆ’(EXPLAIN)</strong></td><td align="left">æ€§èƒ½ç“¶é¢ˆå¯è§†åŒ–</td><td align="left"><strong>æ‰€æœ‰</strong>æ…¢æŸ¥è¯¢ä¼˜åŒ–å‰çš„ç¬¬ä¸€æ­¥</td></tr><tr><td align="left"><strong>é«˜çº§ç´¢å¼•ç­–ç•¥</strong></td><td align="left">æŸ¥è¯¢é€Ÿåº¦æ…¢ï¼Œå†™æ“ä½œé‡</td><td align="left">é«˜é¢‘æŸ¥è¯¢ã€å¤§è¡¨æ€§èƒ½ä¼˜åŒ–</td></tr><tr><td align="left"><strong>çª—å£å‡½æ•°(Window)</strong></td><td align="left">å¤æ‚è·¨è¡Œè®¡ç®—æ•ˆç‡ä½</td><td align="left">æ’è¡Œæ¦œã€æ•°æ®åˆ†æã€æŠ¥è¡¨</td></tr><tr><td align="left"><strong>é€šç”¨è¡¨è¡¨è¾¾å¼(CTE)</strong></td><td align="left">å¤æ‚SQLéš¾è¯»å†™ï¼Œæ ‘æŸ¥è¯¢éš¾</td><td align="left">å¤æ‚ä¸šåŠ¡é€»è¾‘æ‹†åˆ†ï¼Œå±‚æ¬¡æ•°æ®æŸ¥è¯¢</td></tr><tr><td align="left"><strong>JSONç±»å‹</strong></td><td align="left">åŠ¨æ€ã€åŠç»“æ„åŒ–æ•°æ®å­˜å‚¨ä¸æŸ¥è¯¢</td><td align="left">é…ç½®ã€åŠ¨æ€å±æ€§ã€APIæ•°æ®å­˜å‚¨</td></tr><tr><td align="left"><strong>åˆ†åŒºè¡¨</strong></td><td align="left">è¶…å¤§è¡¨ç»´æŠ¤éš¾ï¼Œå†å²æ•°æ®æ¸…ç†æ…¢</td><td align="left">æ—¶é—´åºåˆ—æ•°æ®ï¼ˆæ—¥å¿—ã€è®¢å•ï¼‰</td></tr><tr><td align="left"><strong>JOIN/å­æŸ¥è¯¢ä¼˜åŒ–</strong></td><td align="left">å¤šè¡¨å…³è”æ€§èƒ½ä½ä¸‹</td><td align="left">æ¶‰åŠå¤šä¸ªä¸šåŠ¡å®ä½“çš„å¤æ‚æŸ¥è¯¢</td></tr><tr><td align="left"><strong>ç”¨æˆ·è‡ªå®šä¹‰å˜é‡</strong></td><td align="left">éœ€è¡Œé—´è®¡ç®—æˆ–çŠ¶æ€ä¿æŒï¼ˆ8.0å‰ï¼‰</td><td align="left">è‡ªå®šä¹‰åºåˆ—ã€å·®å€¼è®¡ç®—ï¼ˆæœ‰çª—å£å‡½æ•°åä¼˜å…ˆçº§é™ä½ï¼‰</td></tr><tr><td align="left"><strong>åœ¨çº¿DDL</strong></td><td align="left">ä¸šåŠ¡ä¸ä¸­æ–­å˜æ›´è¡¨ç»“æ„</td><td align="left">7x24å°æ—¶ç³»ç»Ÿè¡¨ç»“æ„å˜æ›´</td></tr><tr><td align="left"><strong>ç”Ÿæˆåˆ—/å‡½æ•°ç´¢å¼•</strong></td><td align="left">æ— æ³•ç›´æ¥å¯¹è¡¨è¾¾å¼å»ºç´¢å¼•</td><td align="left">åŸºäºJSONå­—æ®µã€è®¡ç®—å­—æ®µçš„é«˜æ•ˆæŸ¥è¯¢</td></tr></tbody></table>
<p>æœ‰äº›å°ä¼™ä¼´åœ¨å·¥ä½œä¸­å¯èƒ½ä¼šæœ‰è¿™æ ·çš„ç–‘é—®ï¼šâ€œæˆ‘çŸ¥é“å®ƒä»¬å¥½ï¼Œä½†è¯¥ä»å“ªé‡Œå¼€å§‹å­¦èµ·å‘¢ï¼Ÿâ€</p>
<p>æˆ‘çš„å»ºè®®æ˜¯ï¼š<strong>ä»<code>EXPLAIN</code>å’Œ<code>ç´¢å¼•ä¼˜åŒ–</code>å¼€å§‹</strong>ã€‚</p>
<p>è¿™æ˜¯æ€§èƒ½é—®é¢˜çš„æ ¹æœ¬ã€‚</p>
<p>ç„¶åï¼Œæ ¹æ®ä½ çš„ä¸šåŠ¡éœ€æ±‚ï¼Œå¼•å…¥<code>çª—å£å‡½æ•°</code>æˆ–<code>CTE</code>æ¥ç®€åŒ–å¤æ‚æŸ¥è¯¢ã€‚å½“æ•°æ®é‡ä¸Šæ¥åï¼Œè€ƒè™‘<code>åˆ†åŒº</code>ã€‚</p>
<p>å¯¹äºåŠ¨æ€æ•°æ®ç»“æ„ï¼Œå°è¯•<code>JSON</code>ç±»å‹ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Spring æºç åˆ†æ AOP çš„å®ç°åŸç†]]></title>    <link>https://juejin.cn/post/7604522883487318050</link>    <guid>https://juejin.cn/post/7604522883487318050</guid>    <pubDate>2026-02-10T02:10:48.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604522883487318050" data-draft-id="7601069677567410222" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Spring æºç åˆ†æ AOP çš„å®ç°åŸç†"/> <meta itemprop="keywords" content="Spring,Spring Boot,Java"/> <meta itemprop="datePublished" content="2026-02-10T02:10:48.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æš®è‰²å¦–å¨†ä¸¶"/> <meta itemprop="url" content="https://juejin.cn/user/4292946760307655"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Spring æºç åˆ†æ AOP çš„å®ç°åŸç†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4292946760307655/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æš®è‰²å¦–å¨†ä¸¶
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-10T02:10:48.000Z" title="Tue Feb 10 2026 02:10:48 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<h2 data-id="heading-1">AOP çš„æ¦‚å¿µ</h2>
<p><code>AOP</code> çš„å…¨ç§°æ˜¯ <code>Aspect-OrientedÂ Programming</code> é¢å‘åˆ‡é¢ç¼–ç¨‹ï¼Œé€šå¸¸åœ¨æˆ‘ä»¬æ—¥å¸¸å¼€å‘ä¸­çš„æ¨¡å¼éƒ½æ˜¯æ–¹æ³•ç›´æ¥å®ç°å®Œæ•´åŠŸèƒ½ã€‚ä½†æœ‰æ—¶å€™æˆ‘ä»¬å¸Œæœ›åœ¨æŸä¸€ä¸ªæˆ–å¤šä¸ªåŠŸèƒ½æ–¹æ³•ä¸­åŠ å…¥ä¸€äº›é€šç”¨çš„å…¶ä»–é€»è¾‘ï¼Œä½†æ˜¯åˆä¸å¸Œæœ›ä¿®æ”¹è¿™ä¸€æ‰¹æ–¹æ³•çš„æºä»£ç ï¼Œä¹Ÿä¸å¸Œæœ›ä¿®æ”¹è°ƒç”¨è¿™æ‰¹æ–¹æ³•çš„æ–¹æ³•çš„æºä»£ç ï¼Œå¯¼è‡´ä¸€å¤§å †é‡å¤ä»£ç ã€‚äºæ˜¯ <code>AOP</code> å°±è¯ç”Ÿäº†ã€‚<code>AOP</code> çš„ä½œç”¨å¯ä»¥ç†è§£ä¸ºä¸‹å›¾</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c88de1bc118f490cac334029a7f1d0f3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pqu6Imy5aaW5aiG5Li2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771294248&amp;x-signature=CSroo%2Fd8VPUTiVFF46Ck1VSTBF4%3D" alt="image.png" loading="lazy"/></p>
<p>åœ¨æ‰§è¡Œç›®æ ‡æ–¹æ³•å‰åæ·»åŠ ä¸€äº›é¢å¤–çš„é€»è¾‘ã€‚æœ€ç»å…¸çš„å®ç°æ˜¯ <code>AspectJ</code> æ¡†æ¶</p>
<h2 data-id="heading-2">AOP çš„ä»£è¡¨ä½œ AspectJ</h2>
<p>åœ¨ <code>Java</code> é¢†åŸŸä¸­ï¼Œ <code>AspectJ</code> æ˜¯æœ€æ—©ã€æœ€å®Œæ•´ã€åŠŸèƒ½æœ€å¼ºå¤§çš„ä¸€ä¸ª <code>AOP</code> æ¡†æ¶ã€‚å‰é¢æˆ‘ä»¬è¯´äº† <code>AOP</code> çš„æ€æƒ³æ˜¯åœ¨æ–¹æ³•æ‰§è¡Œå‰ååŠ å…¥ä¸€äº›è‡ªå®šä¹‰é€»è¾‘ï¼Œé‚£ä¹ˆåˆ°åº•æ€ä¹ˆåŠ å‘¢ï¼Ÿ<code>AspectJ</code> æä¾›äº†ä¸¤ç§æ–¹å¼ï¼šç¼–è¯‘æœŸç»‡å…¥å’Œè¿è¡Œæ—¶ç»‡å…¥ã€‚ä¸‹é¢æˆ‘ä»¬å…ˆçœ‹ä»£ç ç¤ºä¾‹ï¼Œä½¿ç”¨ <code>AspectJ</code> å¦‚ä½•å®ç° <code>AOP</code> ç¼–ç¨‹</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fyanzhisishui%2Faspectj-test.git" target="_blank" title="https://github.com/yanzhisishui/aspectj-test.git" ref="nofollow noopener noreferrer">ç¤ºä¾‹æºç å·²åˆ†äº«åˆ° Github</a></p>
<p>ç›®æ ‡ç±»</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserService</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test1</span><span class="hljs-params">()</span>{
        System.out.println(<span class="hljs-string">"test1 started!"</span>);
    }
}
</code></pre>
<p>åˆ‡é¢ç±»</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Aspect</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserServiceAspect</span> {
    <span class="hljs-meta">@Before("execution(* com.example.UserService.test1())")</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">before</span><span class="hljs-params">()</span>{
        System.out.println(<span class="hljs-string">"before test1!"</span>);
    }
}
</code></pre>
<p>è¿™é‡Œ <code>@Before</code> æ³¨è§£çš„å€¼å«åš <code>åˆ‡ç‚¹è¡¨è¾¾å¼</code>ï¼Œå®ƒæè¿°äº†æˆ‘ä»¬å°†è¦æ‹¦æˆªå“ªäº›ç›®æ ‡æ–¹æ³•æ‰§è¡Œå½“å‰çš„å¢å¼ºé€»è¾‘</p>
<h3 data-id="heading-3">ç¼–è¯‘æœŸç»‡å…¥</h3>
<p>ç¼–è¯‘æœŸç»‡å…¥éœ€è¦ç‰¹å®šçš„ç¼–è¯‘æ’ä»¶ã€‚åœ¨ <code>pom.xml</code> ä¸­æ·»åŠ ä¸‹é¢è¿™ä¸ªæ’ä»¶</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.codehaus.mojo<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>aspectj-maven-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.14.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">complianceLevel</span>&gt;</span>16.0<span class="hljs-tag">&lt;/<span class="hljs-name">complianceLevel</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">source</span>&gt;</span>16<span class="hljs-tag">&lt;/<span class="hljs-name">source</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">target</span>&gt;</span>16<span class="hljs-tag">&lt;/<span class="hljs-name">target</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">executions</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">execution</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">goals</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">goal</span>&gt;</span>compile<span class="hljs-tag">&lt;/<span class="hljs-name">goal</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">goals</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">execution</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">executions</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span>
</code></pre>
<p>æœ‰äº†è¿™ä¸ªæ’ä»¶ä¹‹åï¼Œ<code>maven</code> å·¥å…·æ é‡Œé¢å°±ä¼šå¤šä¸€ä¸ªå·¥å…·</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/89f54ac3b880443b90a8499fba610b40~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pqu6Imy5aaW5aiG5Li2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771294248&amp;x-signature=wLyOqO35o4MHa2QII2hRI0MglDk%3D" alt="image.png" loading="lazy"/></p>
<p>è¿è¡Œå®ƒä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥ç›´è§‚çš„çœ‹åˆ° <code>target/classes</code> æ–‡ä»¶å¤¹ä¸‹ç›®æ ‡ç±»çš„æ–¹æ³•å·²ç»å˜äº†</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/baefc08982cb4b83b6ab77496409ee26~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pqu6Imy5aaW5aiG5Li2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771294248&amp;x-signature=05ymz3iunsnalx6XYSPpEwUJ5I8%3D" alt="image.png" loading="lazy"/></p>
<p>å®é™…ä¸šåŠ¡ä¸­è¿™ç§æ–¹å¼ä½¿ç”¨å¾ˆå°‘ï¼Œè¿™é‡Œåªæ˜¯ä¸ºäº†åç»­ç†è§£ <code>Spring AOP</code> ã€‚</p>
<h3 data-id="heading-4">è¿è¡Œæ—¶ç»‡å…¥</h3>
<p>è¿è¡Œæ—¶ç»‡å…¥æ˜¯åŸºäº <code>Java agent</code> æŠ€æœ¯ã€‚å®ƒå…è®¸åœ¨ <code>JVM</code> å¯åŠ¨æ—¶æˆ–è¿è¡Œæ—¶ <strong>åŠ¨æ€ä¿®æ”¹å·²åŠ è½½æˆ–å³å°†åŠ è½½çš„ç±»çš„å­—èŠ‚ç </strong>ã€‚å¯¹äºä¸Šé¢çš„ç¤ºä¾‹ï¼Œä¹Ÿå°±æ˜¯è¯´è¿è¡Œæ—¶æŠŠ <code>UserService</code> çš„ <code>class</code> æ–‡ä»¶æ”¹äº†ï¼Œå…¶å®å°±æ˜¯æ”¹æˆäº†ä¸Šé¢ç¼–è¯‘ç»‡å…¥åçš„ <code>class</code> æ–‡ä»¶ä¸€æ ·ã€‚åªä¸è¿‡è¿™æ˜¯åŸºäº <code>Java agent</code> æŠ€æœ¯ <strong>è¿è¡Œæ—¶</strong> å®ç°çš„</p>
<p>åœ¨ <code>JVM</code> å¯åŠ¨å‚æ•°æ·»åŠ ä¸‹é¢å†…å®¹ï¼Œ<code>aspectjweaver-1.9.25.jar</code> çš„è·¯å¾„æ¢æˆè‡ªå·±å®é™…çš„åœ°å€å³å¯</p>
<pre><code class="hljs language-diff" lang="diff"><span class="hljs-deletion">-javaagent:C:\Users\14812.m2\repository\org\aspectj\aspectjweaver\1.9.25\aspectjweaver-1.9.25.jar</span>
</code></pre>
<blockquote>
<p>å…³äº Java Agent æŠ€æœ¯ä¹ŸæŒºç¥å¥‡ï¼Œåœ¨è¿è¡Œç¨‹åºåä¼šå…ˆæ‰§è¡Œ <code>aspectjweaver-1.9.25.jar</code> ä¸‹ <code>META-INF/MANIFEST.MF</code> ä¸­æŒ‡å®šçš„ä¸€ä¸ªç±» <code>Premain-Class</code></p>
</blockquote>
<h3 data-id="heading-5">åˆ‡ç‚¹ã€åˆ‡é¢ã€è¿æ¥ç‚¹ã€é€šçŸ¥</h3>
<p>æœ‰äº†ä¸Šé¢çš„æ¡ˆä¾‹ï¼Œæˆ‘ä»¬å†æ¥ç†è§£ <code>AOP</code> æ€æƒ³ä¸­æ ¸å¿ƒçš„å‡ ä¸ªæ¦‚å¿µï¼Œè¿™å¯¹äºæˆ‘ä»¬åç»­ç†è§£ <code>Spring AOP</code> éå¸¸é‡è¦ã€‚</p>
<ul>
<li>åˆ‡é¢ï¼šç›®æ ‡ç±»çš„æ¨ªåˆ‡å¢å¼ºï¼Œæ˜¯æ¨ªåˆ‡å¢å¼ºçš„å®Œæ•´å°è£…å•å…ƒï¼ŒåŒ…å«äº†å¯ä»¥å¯¹ç›®æ ‡ç±»æ‰€æœ‰å¢å¼º</li>
<li>è¿æ¥ç‚¹ï¼šç¨‹åºæ‰§è¡Œçš„æ‰€æœ‰æ½œåœ¨æ‹¦æˆªç‚¹ï¼Œå¯ä»¥ç†è§£ä¸ºç›®æ ‡ç±»ä¸­æ‰€æœ‰çš„å†…å®¹ï¼ŒåŒ…æ‹¬æ–¹æ³•ã€å­—æ®µèµ‹å€¼æˆ–è®¿é—®ã€å¯¹è±¡åˆå§‹åŒ–ç­‰</li>
<li>åˆ‡ç‚¹ï¼šè¿æ¥ç‚¹çš„ç­›é€‰å™¨ï¼Œå®ƒçš„åˆ‡ç‚¹è¡¨è¾¾å¼èƒ½ç­›é€‰å‡ºä¸€ç³»åˆ—ç¬¦åˆçš„æ–¹æ³•</li>
<li>é€šçŸ¥ï¼šå…·ä½“æ‹¦æˆªè¡Œä¸ºï¼Œæˆ‘ä»¬æ‹¦æˆªäº†è¿™ä¸ªåˆ‡ç‚¹è¦å¹²ä»€ä¹ˆä¸šåŠ¡</li>
</ul>
<p>è¿™å››ä¸ªæ¦‚å¿µæ˜¯ <code>AOP</code> æ€æƒ³çš„é‡ä¸­ä¹‹é‡ã€‚</p>



































<table><thead><tr><th>æ¦‚å¿µ</th><th>demoç¤ºä¾‹</th><th>ä»£ç è§’è‰²</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>åˆ‡é¢</strong></td><td><code>UserServiceAspect</code> ç±»</td><td><code>@Aspect</code> ç±»</td><td><strong>å®¹å™¨</strong>ï¼Œç»„ç»‡åˆ‡ç‚¹ã€é€šçŸ¥å’Œå…¶ä»– <code>AOP</code> å…ƒç´ </td></tr><tr><td><strong>è¿æ¥ç‚¹</strong></td><td><code>UserService.test1()</code> æ–¹æ³•</td><td>ç›®æ ‡ç±»ä¸­æ‰€æœ‰çš„å†…å®¹ï¼ŒåŒ…æ‹¬æ–¹æ³•ã€å­—æ®µèµ‹å€¼ã€å¯¹è±¡åˆå§‹åŒ–</td><td><strong>å®¢è§‚å­˜åœ¨</strong>çš„å¯æ‰§è¡Œç‚¹</td></tr><tr><td><strong>åˆ‡ç‚¹</strong></td><td><code>@Before("execution(* com.example.UserService.test1())")</code></td><td><code>@Pointcut</code> å®šä¹‰ <code>@Beforeã€@Afterã€@Around</code> çš„è¡¨è¾¾å¼</td><td><strong>ç­›é€‰å™¨</strong>ï¼Œé€‰æ‹©å“ªäº›è¿æ¥ç‚¹è¦å¤„ç†</td></tr><tr><td><strong>é€šçŸ¥</strong></td><td><code>public void before(){System.out.println("before test1!");}</code></td><td><code>@Beforeã€@Afterã€@Around</code>æ ‡æ³¨çš„æ–¹æ³•</td><td><strong>æ‹¦æˆªè¡Œä¸ºï¼Œå‰ç½®ã€åç½®ã€ç¯ç»•</strong>ï¼Œåœ¨è¿æ¥ç‚¹æ‰§è¡Œçš„ä»£ç </td></tr></tbody></table>
<h3 data-id="heading-6">AspectJ çš„å¼ºå¤§ä¹‹å¤„ï¼Œä¸‡ç‰©çš†å¯æ‹¦æˆª</h3>
<p>æ­£å¦‚æˆ‘ä»¬ä¸Šé¢å¯¹è¿æ¥ç‚¹çš„æè¿°ã€‚<code>AspectJ</code> ä¸ä»…èƒ½æ‹¦æˆªæ–¹æ³•ï¼Œç”šè‡³è¿˜èƒ½æ‹¦æˆªå­—æ®µçš„è®¾ç½®ã€å­—æ®µçš„è®¿é—®ã€å¯¹è±¡åˆå§‹åŒ–ç­‰ç­‰ã€‚éƒ½æ˜¯é€šè¿‡åˆ‡ç‚¹è¡¨è¾¾å¼æ¥å®ç°ï¼Œåˆ‡ç‚¹è¡¨è¾¾å¼çš„å†™æ³•éå¸¸ä¸°å¯Œã€‚<code>demo</code> ç¤ºä¾‹ä¸­æ¼”ç¤ºäº†å­—æ®µè®¿é—®çš„æ‹¦æˆªï¼Œç”±äºå·¥ä½œä¸­å‡ ä¹ç”¨ä¸åˆ°ï¼Œæ‰€ä»¥å…¶ä»–å†…å®¹è¿™é‡Œå°±ä¸ä¸€ä¸€ä»‹ç»äº†ï¼Œæœ‰å…´è¶£å¯ä»¥è‡ªå·±æ¢ç´¢ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// 1. æ‹¦æˆª User.name å­—æ®µçš„è¯»å–</span>
<span class="hljs-meta">@Before("get(private String com.example.UserService.name)")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">beforeReadName</span><span class="hljs-params">(JoinPoint jp)</span> {
    System.out.println(<span class="hljs-string">"ã€å­—æ®µè¯»ã€‘æ­£åœ¨è¯»å– User.name å­—æ®µ"</span>);
    System.out.println(<span class="hljs-string">"  ç›®æ ‡å¯¹è±¡: "</span> + jp.getTarget());
    System.out.println(<span class="hljs-string">"  åœ¨ç±»ä¸­: "</span> + jp.getSourceLocation());
}

<span class="hljs-comment">// 1. æ‹¦æˆª User.name å­—æ®µçš„èµ‹å€¼</span>
<span class="hljs-meta">@Before("set(private String com.example.UserService.name)")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">beforeSetName</span><span class="hljs-params">(JoinPoint jp)</span> {
    System.out.println(<span class="hljs-string">"ã€å­—æ®µè¯»ã€‘æ­£åœ¨è®¾ç½® User.name å­—æ®µ"</span>);
    System.out.println(<span class="hljs-string">"  ç›®æ ‡å¯¹è±¡: "</span> + jp.getTarget());
    System.out.println(<span class="hljs-string">"  åœ¨ç±»ä¸­: "</span> + jp.getSourceLocation());
}
</code></pre>
<h2 data-id="heading-7">SpringBoot é¡¹ç›®ä¸­ä½¿ç”¨ AspectJ</h2>
<h3 data-id="heading-8">Spring ä¸­çš„ AOP å®˜ç½‘ä»‹ç»</h3>
<p>åœ¨ <code>Spring</code> ä¸­ï¼Œé›†æˆäº† <code>AspectJ</code> æ¡†æ¶ï¼Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.spring.io%2Fspring-framework%2Freference%2F6.1%2Fcore%2Faop%2Fintroduction-spring-defn.html" target="_blank" title="https://docs.spring.io/spring-framework/reference/6.1/core/aop/introduction-spring-defn.html" ref="nofollow noopener noreferrer">Spring AOP å®˜ç½‘æè¿°</a> æœ‰ä¸€æ®µæ˜¯è¿™ä¹ˆè¯´çš„ï¼š</p>
<blockquote>
<p>Spring AOP never strives to compete with AspectJ to provide a comprehensive AOP solution. We believe that both proxy-based frameworks such as Spring AOP and full-blown frameworks such as AspectJ are valuable and that they are complementary, rather than in competition. Spring seamlessly integrates Spring AOP and IoC with AspectJ, to enable all uses of AOP within a consistent Spring-based application architecture. This integration does not affect the Spring AOP API or the AOP Alliance API. Spring AOP remains backward-compatible.</p>
</blockquote>
<p>å¯ä»¥è‡ªè¡Œç¿»è¯‘ã€‚<code>Spring</code> ä¿ç•™äº†åŸç”Ÿ <code>AspectJ</code> çš„ç¼–ç¨‹ç”¨æ³•ï¼Œä½†æ˜¯å®ç°åŸç†ä¸åŒï¼Œ<code>AspectJ</code> è¿è¡Œæ—¶å¢å¼ºé€šè¿‡ <code>Java agent</code> å®ç°ï¼Œ<code>Spring AOP</code> æ˜¯é€šè¿‡åŠ¨æ€ä»£ç†å®ç°ã€‚å…³äºåŠ¨æ€ä»£ç†å¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡ç«  <a href="https://juejin.cn/post/7387657842114134068" target="_blank" title="https://juejin.cn/post/7387657842114134068">å­¦ä¹  Java åŠ¨æ€ä»£ç†</a> ã€‚</p>
<h3 data-id="heading-9">ä½¿ç”¨ç¤ºä¾‹</h3>
<p>å’Œä¸Šä¸€æ®µçš„é <code>Spring</code> é¡¹ç›® <code>Aspect</code> ç¤ºä¾‹å®Œå…¨ç›¸åŒï¼Œåªè¦åœ¨ <code>UserService</code> å’Œ <code>UserServiceAspect</code> ç±»ä¸Šé¢åŠ ä¸Š <code>@Component</code> æ³¨è§£ï¼Œäº¤ç»™ <code>Spring</code> ç®¡ç†å³å¯ã€‚å¦‚æœä½¿ç”¨é <code>SpringBoot</code> é¡¹ç›®ï¼Œè¿˜éœ€è¦ä¸€ä¸ªé…ç½®ç±»ï¼Œå¯ç”¨æ³¨è§£ <code>@EnableAspectJAutoProxy</code> ã€‚å¦‚æœæ˜¯ <code>SpringBoot</code> é¡¹ç›®ï¼Œæˆ‘ä»¬å¼•å…¥ <code>aop-starter</code> å³å¯</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-aop<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>compile<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<p><code>AopAutoConfiguration</code> ä¼šè‡ªåŠ¨é…ç½®å¯ç”¨<code>@EnableAspectJAutoProxy</code>ï¼Œé‚£ä¹ˆåªéœ€è¦æŠŠæˆ‘ä»¬ä¸¤ä¸ªç±» <code>UserService</code> å’Œ <code>UserServiceAspect</code> äº¤ç»™ <code>Sping</code> ç®¡ç†å³å¯å®ç°ã€‚</p>
<h2 data-id="heading-10">Spring ä¸­å¯¹äºä»£ç†çš„æŠ½è±¡è®¾è®¡</h2>
<p><code>Spring</code> ä¸­å¯¹äºä»£ç†ä¸­çš„å‡ ä¸ªæ¦‚å¿µä¾‹å¦‚ é€šçŸ¥ã€åˆ‡ç‚¹ã€è¿æ¥çš„ã€åˆ‡é¢åšäº†ä¸€äº›æŠ½è±¡è®¾è®¡ã€‚</p>



































<table><thead><tr><th>æ¦‚å¿µ</th><th>æ¥å£</th><th>æè¿°</th><th>ä¸»è¦å®ç°ç±»</th></tr></thead><tbody><tr><td><strong>åˆ‡ç‚¹</strong></td><td>org.springframework.aop.Pointcut</td><td>åœ¨å“ªé‡Œåº”ç”¨é€šçŸ¥ï¼Œå…·ä½“æ‹¦æˆªè¡Œä¸ºå‘ç”Ÿåœ¨å“ªé‡Œï¼Œä»…æ”¯æŒæ–¹æ³•åˆ‡ç‚¹</td><td>AspectJExpressionPointcut</td></tr><tr><td><strong>é€šçŸ¥</strong></td><td>org.aopalliance.aop.Advice</td><td>å¢å¼ºè¡Œä¸ºçš„ç»Ÿä¸€æŠ½è±¡ï¼Œè¡¨ç¤ºå…·ä½“å¢å¼ºé€»è¾‘æ˜¯ä»€ä¹ˆ</td><td>BeforeAdviceã€MethodInterceptor</td></tr><tr><td><strong>åˆ‡é¢</strong></td><td>org.springframework.aop.Advisor</td><td>åœ¨ Spring AOP ä¸­é€šå¸¸æ˜¯åŒ…å«åˆ‡ç‚¹å’Œé€šçŸ¥çš„å°è£…</td><td>InstantiationModelAwarePointcutAdvisor</td></tr><tr><td><strong>è¿æ¥ç‚¹</strong></td><td>org.aopalliance.intercept.Joinpoint</td><td>å¯è®¿é—®å¯¹è±¡ï¼ˆæ–¹æ³•ï¼‰çš„è®¿é—®çš„å…·ä½“åŒ–</td><td>ReflectiveMethodInvocation</td></tr></tbody></table>
<p>è¿™é‡Œéœ€è¦ç±»æ¯”å‰é¢æˆ‘ä»¬åœ¨ <code>AspectJ</code> é‚£æ®µå…³äºè¿™å‡ ä¸ªæ¦‚å¿µçš„è¡¨æ ¼ï¼Œåœ¨ <code>Spring AOP</code> ä¸­è¿™äº›æ¦‚å¿µéƒ½æœ‰ç»Ÿä¸€çš„æŠ½è±¡å’Œå…·ä½“çš„å®ç°ã€‚</p>
<h2 data-id="heading-11">ä»£ç†ç±»çš„åˆ›å»ºè¿‡ç¨‹</h2>
<p>æ ¹æ®æˆ‘ä»¬å‰é¢çš„æ–‡ç«  <code>Bean çš„åˆ›å»ºè¿‡ç¨‹æºç åˆ†æ</code> æˆ‘ä»¬çŸ¥é“ï¼Œä»£ç†ç±»çš„åˆ›å»ºå‘ç”Ÿåœ¨ <code>BeanPostProcessor.postProcessAfterInitialization()</code>ã€‚è¿™é‡Œæœ‰ä¸€ä¸ªé‡è¦çš„å®ç°ç±» <code>AnnotationAwareAspectJAutoProxyCreator</code> ã€‚å®ƒè°ƒç”¨çˆ¶ç±» <code>AbstractAutoProxyCreator.wrapIfNecessary()</code> çš„åˆ›å»ºä»£ç†é€»è¾‘</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">protected</span> Object <span class="hljs-title function_">wrapIfNecessary</span><span class="hljs-params">(Object bean, String beanName, Object cacheKey)</span> {
    <span class="hljs-comment">//......</span>
    <span class="hljs-comment">// è·å–è¿™ä¸ªç±»æ‰€æœ‰çš„åˆ‡é¢</span>
    Object[] specificInterceptors = getAdvicesAndAdvisorsForBean(bean.getClass(), beanName, <span class="hljs-literal">null</span>);
    <span class="hljs-keyword">if</span> (specificInterceptors != DO_NOT_PROXY) {
       <span class="hljs-built_in">this</span>.advisedBeans.put(cacheKey, Boolean.TRUE);
       <span class="hljs-comment">//åˆ›å»ºä»£ç†</span>
       <span class="hljs-type">Object</span> <span class="hljs-variable">proxy</span> <span class="hljs-operator">=</span> createProxy(bean.getClass(), beanName, specificInterceptors, <span class="hljs-keyword">new</span> <span class="hljs-title class_">SingletonTargetSource</span>(bean));
       <span class="hljs-built_in">this</span>.proxyTypes.put(cacheKey, proxy.getClass());
       <span class="hljs-keyword">return</span> proxy;
    }

    <span class="hljs-built_in">this</span>.advisedBeans.put(cacheKey, Boolean.FALSE);
    <span class="hljs-keyword">return</span> bean;
}
</code></pre>
<p>è¿™é‡Œä¼šè·å–æ‰€æœ‰è¯¥ç±»çš„å¢å¼ºé€»è¾‘ï¼Œç¤ºä¾‹ä¸­ä¹Ÿå°±æ˜¯ <code>UserServiceAspect</code>ï¼Œå¦‚æœæœ‰åˆ‡é¢å°±åˆ›å»ºä»£ç†å¯¹è±¡è¿”å›ã€‚</p>
<h3 data-id="heading-12">è·å–åˆ‡é¢</h3>
<p>ä¸€è·¯è·Ÿè¸ªæºç  <code>getAdvicesAndAdvisorsForBean()</code> æºç è¿›å»ï¼Œæœ€åå‘ç°ä¼šåœ¨ <code>org.springframework.aop.aspectj.annotation.BeanFactoryAspectJAdvisorsBuilder#buildAspectJAdvisors</code> æ–¹æ³•ä¸­éå†æ‰€æœ‰çš„ <code>beanName</code> è¿‡æ»¤å‡ºæˆ‘ä»¬çš„åˆ‡é¢ç±»ï¼Œæºç ä¸­æ‰«æ <code>@Aspect</code> åˆ¤æ–­æ˜¯å¦æ˜¯ä¸€ä¸ªåˆ‡é¢ï¼Œç„¶åæ ¹æ®åˆ‡ç‚¹è¡¨è¾¾å¼åŒ¹é…å¯¹åº”çš„ç›®æ ‡ç±»ã€‚ç„¶åéå†åˆ‡ç‚¹ï¼Œä¸ºæ¯ä¸€ä¸ªåˆ‡ç‚¹éƒ½åˆ›å»ºä¸€ä¸ª <code>Advisor</code>ï¼Œå…·ä½“ç±»å‹æ˜¯ <code>InstantiationModelAwarePointcutAdvisorImpl</code>ï¼Œéšåç¼“å­˜èµ·æ¥ã€‚</p>
<p><code>InstantiationModelAwarePointcutAdvisorImpl</code> çš„ä¸»è¦ä½œç”¨æ˜¯æ ¹æ®å…¶å†…éƒ¨çš„åˆ‡é¢å·¥å‚è·å–å…·ä½“çš„åˆ‡ç‚¹æ‹¦æˆªè¡Œä¸ºã€‚</p>
<h3 data-id="heading-13">åˆ›å»ºä»£ç†çš„æ–¹å¼</h3>
<p>åœ¨ <code>AbstractAutoProxyCreator#buildProxy()</code> ä¸­å…ˆæ„å»ºä»£ç†å·¥å‚ <code>ProxyFactory</code>ï¼Œç„¶åè°ƒç”¨ <code>ProxyFactory.getProxy()</code>ã€‚å†…éƒ¨æœ€ç»ˆä¼šæ ¹æ®ä»£ç†å·¥å‚çš„é…ç½®æ¥å†³å®šä½¿ç”¨ <code>CGLIB</code> è¿˜æ˜¯ <code>JDK</code> ä»£ç†</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Override</span>
<span class="hljs-keyword">public</span> AopProxy <span class="hljs-title function_">createAopProxy</span><span class="hljs-params">(AdvisedSupport config)</span> <span class="hljs-keyword">throws</span> AopConfigException {
    <span class="hljs-comment">// config.isProxyTargetClass() åœ¨ SpringBoot ä¸­æ˜¯é»˜è®¤ä¸º true çš„</span>
    <span class="hljs-keyword">if</span> (config.isOptimize() || config.isProxyTargetClass() || !config.hasUserSuppliedInterfaces()) {
       Class&lt;?&gt; targetClass = config.getTargetClass();
       <span class="hljs-comment">//...</span>
       <span class="hljs-keyword">if</span> (targetClass == <span class="hljs-literal">null</span> || targetClass.isInterface() ||
             Proxy.isProxyClass(targetClass) || ClassUtils.isLambdaClass(targetClass)) {
          <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JdkDynamicAopProxy</span>(config);
       }
       <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ObjenesisCglibAopProxy</span>(config);
    }
    <span class="hljs-keyword">else</span> {
       <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JdkDynamicAopProxy</span>(config);
    }
}
</code></pre>
<h3 data-id="heading-14">SpringBoot å¼ºåˆ¶ CGLIB ä»£ç†</h3>
<p>ä¸Šä¸€æ®µåœ¨å®ä¾‹åŒ–ä»£ç†å·¥å‚çš„æ—¶å€™ä¼šæ‰§è¡Œä¸€ä¸ªå¤åˆ¶æ–¹æ³•ï¼ŒæŠŠå½“å‰å¯¹è±¡ <code>AnnotationAwareAspectJAutoProxyCreator</code> çš„ <code>proxyTargetClass</code> å±æ€§æ‹¿è¿‡æ¥ï¼Œèµ‹å€¼ç»™ä»£ç†å·¥å‚ï¼Œè€Œè¿™ä¸ªå±æ€§é»˜è®¤æ˜¯ <code>true</code>ï¼Œåé¢ä¼šä»‹ç»</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">//org.springframework.aop.framework.autoproxy.AbstractAutoProxyCreator#buildProxy</span>
<span class="hljs-keyword">private</span> Object <span class="hljs-title function_">buildProxy</span><span class="hljs-params">(Class&lt;?&gt; beanClass, <span class="hljs-meta">@Nullable</span> String beanName,<span class="hljs-meta">@Nullable</span> Object[] specificInterceptors, TargetSource targetSource, <span class="hljs-type">boolean</span> classOnly)</span> {
    <span class="hljs-comment">//......</span>
    <span class="hljs-type">ProxyFactory</span> <span class="hljs-variable">proxyFactory</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ProxyFactory</span>();
    proxyFactory.copyFrom(<span class="hljs-built_in">this</span>);
    <span class="hljs-comment">//......</span>
}

<span class="hljs-comment">//èµ‹å€¼æ–¹æ³•</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">copyFrom</span><span class="hljs-params">(ProxyConfig other)</span> {
    Assert.notNull(other, <span class="hljs-string">"Other ProxyConfig object must not be null"</span>);
    <span class="hljs-built_in">this</span>.proxyTargetClass = other.proxyTargetClass;
    <span class="hljs-built_in">this</span>.optimize = other.optimize;
    <span class="hljs-built_in">this</span>.exposeProxy = other.exposeProxy;
    <span class="hljs-built_in">this</span>.frozen = other.frozen;
    <span class="hljs-built_in">this</span>.opaque = other.opaque;
}
</code></pre>
<p>æ‰€ä»¥å½“æ‰§è¡Œåˆ° <code>org.springframework.aop.framework.DefaultAopProxyFactory#createAopProxy</code> æ–¹æ³•æ—¶ï¼Œä¸ç®¡ç›®æ ‡ç±»æ˜¯å¦å®ç°æ¥å£ï¼Œåªè¦å®ƒæœ¬èº«ä¸æ˜¯æ¥å£ï¼Œå°±ä¸€å®šä¼šèµ° <code>CGLIB</code> ä»£ç†ï¼Œè¿™ä¸€ç‚¹ä¸åŸç”Ÿ <code>Spring</code> ä¸åŒã€‚<strong>SpringBoot é»˜è®¤å¼ºåˆ¶èµ° CGLIB ä»£ç†</strong></p>
<h3 data-id="heading-15">CGLIB ä»£ç†åˆ›å»ºç»†èŠ‚</h3>
<p>å’Œæˆ‘ä»¬ä¹‹å‰åœ¨ <a href="https://link.juejin.cn?target=url" target="_blank" title="url" ref="nofollow noopener noreferrer">å­¦ä¹  Java åŠ¨æ€ä»£ç†</a> ä¸­æåˆ°çš„ä¸€æ ·ï¼Œå…ˆæ„é€  <code>Enhancer</code> å®ä¾‹ï¼Œç„¶åè®¾ç½®å®ƒçš„å›è°ƒåˆ—è¡¨ï¼Œ
è¿™é‡Œæœ‰ä¸€ä¸ªä»£ç†å¯¹è±¡æ–¹æ³•è°ƒç”¨å…¥å£çš„æ‹¦æˆªå™¨ <code>DynamicAdvisedInterceptor</code></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">private</span> Callback[] getCallbacks(Class&lt;?&gt; rootClass) <span class="hljs-keyword">throws</span> Exception {
    <span class="hljs-comment">// Choose an "aop" interceptor (used for AOP calls).</span>
    <span class="hljs-comment">//è°ƒç”¨ç›®æ ‡æ–¹æ³•å‰ä¼šå…ˆè°ƒç”¨è¿™ä¸ªæ‹¦æˆªå™¨ï¼Œæ„é€ æ—¶ä¼ å…¥å½“å‰ Bean çš„æ‰€æœ‰åˆ‡é¢</span>
    <span class="hljs-type">Callback</span> <span class="hljs-variable">aopInterceptor</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DynamicAdvisedInterceptor</span>(<span class="hljs-built_in">this</span>.advised);

    <span class="hljs-comment">//......</span>
    Callback[] mainCallbacks = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Callback</span>[] {
          aopInterceptor,  <span class="hljs-comment">// for normal advice</span>
          targetInterceptor,  <span class="hljs-comment">// invoke target without considering advice, if optimized</span>
          <span class="hljs-keyword">new</span> <span class="hljs-title class_">SerializableNoOp</span>(),  <span class="hljs-comment">// no override for methods mapped to this</span>
          targetDispatcher, <span class="hljs-built_in">this</span>.advisedDispatcher,
          <span class="hljs-keyword">new</span> <span class="hljs-title class_">EqualsInterceptor</span>(<span class="hljs-built_in">this</span>.advised),
          <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashCodeInterceptor</span>(<span class="hljs-built_in">this</span>.advised)
    };
    <span class="hljs-comment">//......</span>
       <span class="hljs-keyword">return</span> mainCallbacks;
    }
----------------------------åˆ†éš”çº¿-----------------------------
<span class="hljs-comment">//è®¾ç½®å›è°ƒåˆ—è¡¨    </span>
enhancer.setCallbacks(callbacks);
</code></pre>
<p>å½“ä»£ç†ç±»åˆ›å»ºå®Œæ¯•ä¹‹åï¼Œæˆ‘ä»¬è·å–å®ƒçš„ <code>class</code> å…¨åï¼Œç„¶åä½¿ç”¨ <code>arthas</code> å·¥å…·è·å–ä»£ç†ç±»çš„æºç ï¼Œä»£ç å¾ˆå¤šï¼Œè¿™é‡Œæˆ‘ä»¬åªçœ‹æˆ‘ä»¬å¢å¼ºçš„æ–¹æ³• <code>test1()</code></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test1</span><span class="hljs-params">()</span> {
    <span class="hljs-keyword">try</span> {
        <span class="hljs-type">MethodInterceptor</span> <span class="hljs-variable">methodInterceptor</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">this</span>.CGLIB$CALLBACK_0;
        <span class="hljs-keyword">if</span> (methodInterceptor == <span class="hljs-literal">null</span>) {
            UserService$$SpringCGLIB$$<span class="hljs-number">0.</span>CGLIB$BIND_CALLBACKS(<span class="hljs-built_in">this</span>);
            methodInterceptor = <span class="hljs-built_in">this</span>.CGLIB$CALLBACK_0;
        }
        <span class="hljs-keyword">if</span> (methodInterceptor != <span class="hljs-literal">null</span>) {
            <span class="hljs-type">Object</span> <span class="hljs-variable">object</span> <span class="hljs-operator">=</span> methodInterceptor.intercept(<span class="hljs-built_in">this</span>, CGLIB$test1$<span class="hljs-number">0</span>$Method, CGLIB$emptyArgs, CGLIB$test1$<span class="hljs-number">0</span>$Proxy);
            <span class="hljs-keyword">return</span>;
        }
        <span class="hljs-comment">//è°ƒç”¨åŸå§‹ç±»çš„æ–¹æ³•ï¼Œè¿™ä¹Ÿè¯´æ˜å½“å‰ä»£ç†ç±»æ˜¯åŸå§‹ç±»çš„ä¸€ä¸ªå­ç±»</span>
        <span class="hljs-built_in">super</span>.test1();
        <span class="hljs-keyword">return</span>;
    }
    <span class="hljs-comment">//......</span>
}
</code></pre>
<p>æˆ‘ä»¬å‘ç°æ‰§è¡Œ <code>super.test1()</code> ä¹Ÿå°±æ˜¯è°ƒç”¨åŸå§‹å¯¹è±¡çš„æ–¹æ³•æ—¶ï¼Œä¼šå…ˆè°ƒç”¨è¿™ä¸ª <code>CGLIB$CALLBACK_0</code> çš„ <code>intercept()</code> æ–¹æ³•ï¼Œè€Œè¿™ä¸ª <code>CGLIB$CALLBACK_0</code> å°±æ˜¯ä¸Šä¸€æ®µæˆ‘ä»¬è®¾ç½®çš„ <code>DynamicAdvisedInterceptor</code> å®ä¾‹ã€‚</p>
<h3 data-id="heading-16">AnnotationAwareAspectJAutoProxyCreator</h3>
<p>å‰é¢æˆ‘ä»¬ä»‹ç»äº†è¿™ä¸ªç±»æ˜¯åˆ›å»ºä»£ç†çš„å…¥å£ç±»ï¼ŒæŸ¥çœ‹ç±»çš„ç»§æ‰¿ç»“æ„ï¼Œå‘ç°å®ƒæ˜¯ <code>AbstractAutoProxyCreator</code> çš„å­ç±»ï¼Œå¹¶ä¸”æ˜¯ä¸€ä¸ª <code>BeanPostProcessor</code>ï¼Œå®ƒæ˜¯è¢« <code>AspectJAutoProxyRegistrar#registerBeanDefinitions</code> æ³¨å†Œåˆ° <code>Spring</code> å®¹å™¨çš„ï¼Œ<code>AspectJAutoProxyRegistrar</code> æ˜¯è¢« <code>@EnableAspectJAutoProxy</code> å¯¼å…¥çš„ï¼Œåœ¨ <code>AopAutoConfiguration</code> è‡ªåŠ¨é…ç½®ä¸­å¯ç”¨äº†è¯¥æ³¨è§£</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@AutoConfiguration</span>
<span class="hljs-meta">@ConditionalOnProperty(prefix = "spring.aop", name = "auto", havingValue = "true", matchIfMissing = true)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AopAutoConfiguration</span> {

    <span class="hljs-meta">@Configuration(proxyBeanMethods = false)</span>
    <span class="hljs-comment">//æœ‰ AspectJ æ—¶ç”Ÿæ•ˆ</span>
    <span class="hljs-meta">@ConditionalOnClass(Advice.class)</span>
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AspectJAutoProxyingConfiguration</span> {

       <span class="hljs-meta">@Configuration(proxyBeanMethods = false)</span>
       <span class="hljs-comment">//å¯ç”¨ Aspect è‡ªåŠ¨ä»£ç†ï¼ŒmatchIfMissing = true é»˜è®¤ä½¿ç”¨ CGLIB ä»£ç†</span>
       <span class="hljs-comment">//proxyTargetClass = true</span>
       <span class="hljs-meta">@EnableAspectJAutoProxy(proxyTargetClass = true)</span>
       <span class="hljs-meta">@ConditionalOnProperty(prefix = "spring.aop", name = "proxy-target-class", havingValue = "true",matchIfMissing = true)</span>
       <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CglibAutoProxyConfiguration</span> {}
    }

    <span class="hljs-meta">@Configuration(proxyBeanMethods = false)</span>
    <span class="hljs-comment">//å½“æ²¡æœ‰ AspectJ æ—¶ç”Ÿæ•ˆï¼Œä¸‹ä¸€ç¯‡è¯´äº‹åŠ¡çš„æ—¶å€™ä¼šä»‹ç»</span>
    <span class="hljs-meta">@ConditionalOnMissingClass("org.aspectj.weaver.Advice")</span>
    <span class="hljs-meta">@ConditionalOnProperty(prefix = "spring.aop", name = "proxy-target-class", havingValue = "true",matchIfMissing = true)</span>
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ClassProxyingConfiguration</span> {
       <span class="hljs-meta">@Bean</span>
       <span class="hljs-keyword">static</span> BeanFactoryPostProcessor <span class="hljs-title function_">forceAutoProxyCreatorToUseClassProxying</span><span class="hljs-params">()</span> {
          <span class="hljs-keyword">return</span> (beanFactory) -&gt; {
             <span class="hljs-keyword">if</span> (beanFactory <span class="hljs-keyword">instanceof</span> BeanDefinitionRegistry registry) {
                AopConfigUtils.registerAutoProxyCreatorIfNecessary(registry);
                AopConfigUtils.forceAutoProxyCreatorToUseClassProxying(registry);
             }
          };
       }
    }
}
</code></pre>
<p>æ€»ç»“ <code>AnnotationAwareAspectJAutoProxyCreator</code> è¿™ä¸ª <code>Bean</code> çš„æ¥æºå¦‚ä¸‹</p>
<p><code>AopAutoConfiguration â†’ AspectJAutoProxyingConfiguration â†’ @EnableAspectJAutoProxy â†’ AspectJAutoProxyRegistrar</code></p>
<h2 data-id="heading-17">ä»£ç†ç±»çš„è°ƒç”¨è¿‡ç¨‹</h2>
<p><code>debug UserService.test1()</code> æˆ‘ä»¬å‘ç°åœ¨å®é™…è°ƒç”¨è¿™ä¸ªæ–¹æ³•å‰æœ‰ä¸€ç³»åˆ—çš„è°ƒç”¨</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/add23be526f04a56b4cbb531ba5a1506~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pqu6Imy5aaW5aiG5Li2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771294248&amp;x-signature=Kzjv4qTwxRSuJB%2B9%2FvqLEtEBFuM%3D" alt="image.png" loading="lazy"/></p>
<p>æœ€æ—©çš„å…¥å£æ˜¯ä¸€ä¸ªä»£ç†ç±»çš„ <code>UserService$$SpringCGLIB$$0.test1()</code>ï¼Œç´§æ¥ç€æ˜¯æˆ‘ä»¬ä¸Šä¸€æ®µåœ¨åˆ›å»ºä»£ç†å¯¹è±¡æ˜¯æåˆ°çš„ï¼Œ<code>DynamicAdvisedInterceptor#intercept</code> å…¥å£å›è°ƒå‡½æ•°ã€‚ç„¶åå°±æ˜¯ä¸€ç³»åˆ—çš„ <code>invoke</code> æœ€ç»ˆåˆ°è¾¾æˆ‘ä»¬åŸç”Ÿçš„ <code>UserService.test1()</code> ã€‚</p>
<h3 data-id="heading-18">DynamicAdvisedInterceptor</h3>
<p>ä¸Šä¸€æ®µæˆ‘ä»¬è¯´äº†ï¼Œä»£ç†å¯¹è±¡è°ƒç”¨ç›®æ ‡å¯¹è±¡æ–¹æ³•ä¹‹å‰ä¼šè°ƒç”¨ <code>DynamicAdvisedInterceptor.intercept()</code>ï¼Œè¿™é‡Œæ˜¯ä»£ç†å¯¹è±¡å¢å¼ºé€»è¾‘å¤„ç†çš„å…¥å£ æˆ‘ä»¬çœ‹ä¸€ä¸‹å®ƒçš„æºç </p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> Object <span class="hljs-title function_">intercept</span><span class="hljs-params">(Object proxy, Method method, Object[] args, MethodProxy methodProxy)</span> <span class="hljs-keyword">throws</span> Throwable {
   <span class="hljs-comment">//......</span>
   <span class="hljs-comment">//æ ¹æ®å½“å‰ Bean çš„åˆ‡é¢è·å–ä¸€ä¸ª chain åˆ—è¡¨</span>
   List&lt;Object&gt; chain = <span class="hljs-built_in">this</span>.advised.getInterceptorsAndDynamicInterceptionAdvice(method, targetClass);
   Object retVal;
   <span class="hljs-keyword">if</span> (chain.isEmpty()) {......}
   <span class="hljs-keyword">else</span> {
      <span class="hljs-comment">// We need to create a method invocation...</span>
      retVal = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ReflectiveMethodInvocation</span>(proxy, target, method, args, targetClass, chain).proceed();
   }
   <span class="hljs-keyword">return</span> processReturnType(proxy, target, method, args, retVal);
    <span class="hljs-comment">//......</span>
}
</code></pre>
<p>åªçœ‹å…³é”®éƒ¨åˆ†ï¼Œè·å–äº†ä¸€ä¸ª <code>chain</code> åˆ—è¡¨ï¼Œç„¶åæ„é€  <code>ReflectiveMethodInvocation</code> è°ƒç”¨ <code>proceed()</code>ï¼Œè¿™ä¸ª <code>chain</code> å°±æ˜¯æˆ‘ä»¬çš„åŒ…å«å¢å¼ºé€»è¾‘çš„æ‹¦æˆªå™¨</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/108e55fa04464963a09c8de7b8a08291~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pqu6Imy5aaW5aiG5Li2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771294248&amp;x-signature=CEbGw9gu4FdpGP%2FHP%2Bwb%2B5bZXWk%3D" alt="image.png" loading="lazy"/></p>
<p>å› ä¸ºæˆ‘ä»¬æµ‹è¯•æ¡ˆä¾‹ä½¿ç”¨çš„æ˜¯ <code>@Before</code> æ³¨è§£å®ç°çš„å‰ç½®å¢å¼ºï¼Œæ‰€ä»¥è¿™é‡Œæ˜¯ <code>MethodBeforeAdviceInterceptor</code>ï¼ŒåŒç† <code>@AfterReturning</code>ã€<code>@Around</code> ç­‰éƒ½æœ‰å¯¹åº”çš„æ‹¦æˆªå™¨ï¼Œé™¤äº†ç¬¬ä¸€ä¸ª <code>ExposeInvocationInterceptor</code> ä¹‹å¤–ï¼Œå®šä¹‰å‡ ä¸ªåˆ‡ç‚¹è¿™é‡Œå°±ä¼šæœ‰å‡ ä¸ª <code>chain</code>ã€‚</p>
<p><code>ExposeInvocationInterceptor</code> æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„æ‹¦æˆªå™¨ï¼Œç”¨æ¥å……å½“ä¸Šä¸‹æ–‡çš„ï¼Œå†…éƒ¨æœ‰ä¸€ä¸ª <code>ThreadLocal</code> å­˜å‚¨å…¥å£ <code>ReflectiveMethodInvocation</code> å¯¹è±¡ï¼Œ</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> ThreadLocal&lt;MethodInvocation&gt; invocation = <span class="hljs-keyword">new</span> <span class="hljs-title class_">NamedThreadLocal</span>&lt;&gt;(<span class="hljs-string">"Current AOP method invocation"</span>);
</code></pre>
<p>è¿™å¯ä»¥ä¾¿äºåç»­ <code>AspectJ</code> å†…éƒ¨æˆ–è€…æˆ‘ä»¬è‡ªå·±åœ¨å¢å¼ºä»£ç å—ä¸­ä½¿ç”¨å®ƒï¼Œä¾‹å¦‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Around("pointcut()")</span>
<span class="hljs-keyword">public</span> Object <span class="hljs-title function_">around</span><span class="hljs-params">(ProceedingJoinPoint joinPoint)</span> <span class="hljs-keyword">throws</span> Throwable {
    <span class="hljs-comment">//è·å–å½“å‰ MethodInvocationï¼Œç°åœ¨ä½ çŸ¥é“ä¸ºä»€ä¹ˆ ExposeInvocationInterceptor åœ¨ List&lt;chain&gt; çš„ç¬¬ä¸€ä¸ªäº†å§ï¼Ÿ</span>
    <span class="hljs-type">MethodInvocation</span> <span class="hljs-variable">methodInvocation</span> <span class="hljs-operator">=</span> ExposeInvocationInterceptor.currentInvocation();
    <span class="hljs-comment">//......</span>
    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
}
</code></pre>
<p>ç°åœ¨ä½ çŸ¥é“ä¸ºä»€ä¹ˆ <code>ExposeInvocationInterceptor</code> åœ¨ <code>List&lt;chain&gt;</code> çš„ç¬¬ä¸€ä¸ªäº†å§ï¼Ÿå› ä¸ºåç»­æ¯ä¸€ä¸ªæ‹¦æˆªå™¨éƒ½å¯èƒ½ä¼šç”¨åˆ°å®ƒç»‘å®šåˆ° <code>ThreadLocal</code> çš„ <code>MethodInvocation</code> ã€‚</p>
<h3 data-id="heading-19">ReflectiveMethodInvocation</h3>
<p>è¿™æ˜¯ä»£ç†æ–¹æ³•å¢å¼ºé€»è¾‘çš„æ ¸å¿ƒï¼Œæ‹¦æˆªå™¨é“¾ä¼šåœ¨ <code>ReflectiveMethodInvocation.proceed()</code> é‡Œé¢éå†æ‰§è¡Œï¼Œå°±åƒæˆ‘ä»¬ä»¥å‰å­¦è¿‡çš„ <code>Servlet</code> è¿‡æ»¤å™¨é“¾ï¼ŒæŸ¥çœ‹æºç </p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ReflectiveMethodInvocation</span>
<span class="hljs-keyword">public</span> Object <span class="hljs-title function_">proceed</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Throwable {
    <span class="hljs-comment">// å¦‚æœå½“å‰æ‹¦æˆªå™¨åˆ—è¡¨å…¨éƒ¨æ‰§è¡Œå®Œï¼Œå°±è°ƒç”¨åŸå§‹æ–¹æ³•</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.currentInterceptorIndex == <span class="hljs-built_in">this</span>.interceptorsAndDynamicMethodMatchers.size() - <span class="hljs-number">1</span>) {
       <span class="hljs-comment">//è°ƒç”¨åŸå§‹æ–¹æ³•ï¼ˆè¢«ä»£ç†çš„å¯¹è±¡çš„æ–¹æ³•ï¼‰</span>
       <span class="hljs-keyword">return</span> invokeJoinpoint();
    }
    <span class="hljs-comment">//æ¯æ¬¡éƒ½ç´¢å¼•è‡ªå¢ï¼Œè·å–ä¸‹ä¸€ä¸ªæ‹¦æˆªå™¨</span>
    <span class="hljs-type">Object</span> <span class="hljs-variable">interceptorOrInterceptionAdvice</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">this</span>.interceptorsAndDynamicMethodMatchers.get(++<span class="hljs-built_in">this</span>.currentInterceptorIndex);
    <span class="hljs-keyword">if</span> (interceptorOrInterceptionAdvice <span class="hljs-keyword">instanceof</span> InterceptorAndDynamicMethodMatcher dm) {
       <span class="hljs-comment">//......</span>
    }
    <span class="hljs-keyword">else</span> {
       <span class="hljs-comment">//è°ƒç”¨æ‹¦æˆªå™¨</span>
       <span class="hljs-keyword">return</span> ((MethodInterceptor) interceptorOrInterceptionAdvice).invoke(<span class="hljs-built_in">this</span>);
    }
}
</code></pre>
<p>æ³¨æ„è¿™é‡Œ <code>MethodInterceptor.invoke(this)</code>ï¼Œä¼ é€’äº†å½“å‰ <code>ReflectiveMethodInvocation</code> å¯¹è±¡ï¼Œæ¯ä¸ªæ‹¦æˆªå™¨å†…éƒ¨å¤„ç†å®Œéƒ½ä¼šå†æ‰§è¡Œä¸€é <code>ReflectiveMethodInvocation.proceed()</code>ï¼Œæ‰€ä»¥ç¨‹åºåˆä¼šå›åˆ°ï¼Œ<code>ReflectiveMethodInvocation.proceed()</code> å†…éƒ¨ï¼Œè¿›è€Œå¼€å§‹æ‰§è¡Œä¸‹ä¸€ä¸ªæ‹¦æˆªå™¨ï¼Œç›´æ¥åˆ°æ‹¦æˆªå™¨åˆ—è¡¨æ‰§è¡Œå®Œæ¯•ï¼Œä¼šè°ƒç”¨ <code>invokeJoinpoint()</code> æ‰§è¡ŒåŸå§‹æ–¹æ³•ã€‚</p>
<h3 data-id="heading-20">ä»£ç†æ–¹æ³•è°ƒç”¨é“¾è·¯å›¾è§£</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b5cba946a72f442eae3e9f014fc0b923~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pqu6Imy5aaW5aiG5Li2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771294248&amp;x-signature=knrIbicSwYO%2Bcu3zPKJufrWTYlI%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-21">Spring AOP å’Œ AspectJ çš„åŒºåˆ«</h2>



























































<table><thead><tr><th>å¯¹æ¯”ç»´åº¦</th><th>Spring AOP</th><th>AspectJ åŸç”Ÿ AOP</th><th>åŒºåˆ«</th></tr></thead><tbody><tr><td><strong>æ ¸å¿ƒå®ç°æœºåˆ¶</strong></td><td><strong>åŠ¨æ€ä»£ç†</strong>ï¼ˆJDKåŠ¨æ€ä»£ç†æˆ–CGLIBå­—èŠ‚ç ç”Ÿæˆï¼‰</td><td><strong>å­—èŠ‚ç ç»‡å…¥</strong>ï¼ˆç¼–è¯‘æ—¶ã€åŠ è½½æ—¶ã€ç¼–è¯‘åï¼‰</td><td>Spring AOP åœ¨è¿è¡Œæ—¶åˆ›å»ºä»£ç†åŒ…è£…ç›®æ ‡å¯¹è±¡ï¼›AspectJ ç›´æ¥ä¿®æ”¹ .class æ–‡ä»¶å­—èŠ‚ç </td></tr><tr><td><strong>ç»‡å…¥æ—¶æœº</strong></td><td><strong>è¿è¡Œæ—¶</strong>ï¼ˆåº”ç”¨å¯åŠ¨æ—¶åˆ›å»ºä»£ç†ï¼‰</td><td><strong>ç¼–è¯‘æ—¶</strong>ã€<strong>åŠ è½½æ—¶</strong>ï¼ˆç±»åŠ è½½æœŸï¼‰æˆ–<strong>ç¼–è¯‘å</strong></td><td>AspectJ çš„ç¼–è¯‘æ—¶ç»‡å…¥æ€§èƒ½æœ€ä¼˜ï¼Œæ— è¿è¡Œæ—¶å¼€é”€ï¼›Spring AOP æ¯æ¬¡æ–¹æ³•è°ƒç”¨éƒ½æœ‰ä»£ç†è½¬å‘å¼€é”€</td></tr><tr><td><strong>æ‹¦æˆªèƒ½åŠ›ï¼ˆè¿æ¥ç‚¹ï¼‰</strong></td><td><strong>ä»…æ–¹æ³•æ‰§è¡Œ</strong>ï¼ˆä¸»è¦æ˜¯ public æ–¹æ³•ï¼‰</td><td><strong>å¾ˆå¤šç§è¿æ¥ç‚¹</strong>ï¼šæ–¹æ³•æ‰§è¡Œ/è°ƒç”¨ã€æ„é€ å™¨æ‰§è¡Œ/è°ƒç”¨ã€å­—æ®µè¯»/å†™ã€å¼‚å¸¸å¤„ç†ã€ç±»åˆå§‹åŒ–ã€é™æ€åˆå§‹åŒ–ã€å»ºè®®æ‰§è¡Œ</td><td>Spring AOP æ— æ³•æ‹¦æˆªå­—æ®µè®¿é—®ã€æ„é€ å™¨è°ƒç”¨ã€é™æ€åˆå§‹åŒ–ç­‰</td></tr><tr><td><strong>ç›®æ ‡å¯¹è±¡é™åˆ¶</strong></td><td><strong>ä»… Spring å®¹å™¨ç®¡ç†çš„ Bean</strong></td><td><strong>ä»»ä½•Javaå¯¹è±¡</strong>ï¼ˆåŒ…æ‹¬ç¬¬ä¸‰æ–¹åº“ã€è‡ªå·± new çš„å¯¹è±¡ï¼‰</td><td>Spring AOP åªèƒ½æ‹¦æˆªé€šè¿‡ Spring å®¹å™¨è·å–çš„ Beanï¼›AspectJ å¯æ‹¦æˆªä»»ä½•ç±»çš„å®ä¾‹</td></tr><tr><td><strong>å†…éƒ¨è°ƒç”¨é—®é¢˜</strong></td><td><strong>æ— æ³•æ‹¦æˆª</strong>ï¼ˆåŒç±»å†…çš„æ–¹æ³•Aè°ƒç”¨æ–¹æ³•Bï¼‰</td><td><strong>å¯ä»¥æ‹¦æˆª</strong></td><td>Spring AOP ç”±äºä»£ç†æœºåˆ¶é™åˆ¶ï¼Œå†…éƒ¨è°ƒç”¨ä¸ç»è¿‡ä»£ç†ï¼›AspectJ ç›´æ¥ä¿®æ”¹å­—èŠ‚ç ï¼Œæ— æ­¤é™åˆ¶</td></tr><tr><td><strong>æ€§èƒ½å½±å“</strong></td><td><strong>æœ‰è¿è¡Œæ—¶å¼€é”€</strong>ï¼ˆä»£ç†è°ƒç”¨é“¾ã€åå°„ï¼‰</td><td><strong>ç¼–è¯‘æ—¶ç»‡å…¥é›¶è¿è¡Œæ—¶å¼€é”€</strong>ï¼›åŠ è½½æ—¶ç»‡å…¥æœ‰åˆæ¬¡åŠ è½½å¼€é”€</td><td>å¯¹æ€§èƒ½æ•æ„Ÿåœºæ™¯ï¼ŒAspectJ ç¼–è¯‘æ—¶ç»‡å…¥æ˜¯é¦–é€‰</td></tr><tr><td><strong>ä¾èµ–å…³ç³»</strong></td><td>è½»é‡ï¼Œåªä¾èµ– Spring æ ¸å¿ƒ</td><td>éœ€è¦ AspectJ ç¼–è¯‘å™¨ï¼ˆajcï¼‰æˆ– ç»‡å…¥å™¨ agent</td><td>Spring é¡¹ç›®å¯è½»æ˜“é›†æˆ Spring AOPï¼›AspectJ éœ€è¦æ„å»ºå·¥å…·é…åˆ</td></tr><tr><td><strong>é€‚ç”¨åœºæ™¯</strong></td><td>å…¸å‹çš„ Spring åº”ç”¨ï¼Œæ¨ªåˆ‡å…³æ³¨ç‚¹ç®€å•ï¼ˆæ—¥å¿—ã€äº‹åŠ¡ã€å®‰å…¨ç­‰ï¼‰</td><td>å¤æ‚ AOP éœ€æ±‚ã€é«˜æ€§èƒ½è¦æ±‚ã€æ‹¦æˆªé Spring å¯¹è±¡ã€ç³»ç»Ÿçº§ç›‘æ§</td><td>æ ¹æ®éœ€æ±‚å¤æ‚åº¦é€‰æ‹©ï¼šç®€å•ç”¨ Spring AOP ï¼Œå¤æ‚ç”¨ AspectJ</td></tr></tbody></table>
<h2 data-id="heading-22">ç»“è¯­</h2>
<p>æŒæ¡äº† <code>Spring AOP</code> çš„å®ç°åŸç†ï¼Œå¯¹äºåç»­æˆ‘ä»¬ç†è§£ <code>Spring</code> äº‹åŠ¡çš„æ”¯æŒä¼šæœ‰æå¤§çš„å¸®åŠ©ã€‚</p>
<h3 data-id="heading-23">å¦‚æœè¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè®°å¾—ç‚¹èµåŠ å…³æ³¨ï¼ä½ çš„æ”¯æŒå°±æ˜¯æˆ‘ç»§ç»­åˆ›ä½œçš„åŠ¨åŠ›ï¼</h3></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Polymarket é‡åŒ–äº¤æ˜“å®æˆ˜ï¼ˆäºŒï¼‰ï¼šWebSocket å®æ—¶æ•°æ®æµ]]></title>    <link>https://juejin.cn/post/7604693038439759878</link>    <guid>https://juejin.cn/post/7604693038439759878</guid>    <pubDate>2026-02-10T02:05:54.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604693038439759878" data-draft-id="7604574877035823147" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Polymarket é‡åŒ–äº¤æ˜“å®æˆ˜ï¼ˆäºŒï¼‰ï¼šWebSocket å®æ—¶æ•°æ®æµ"/> <meta itemprop="keywords" content="web3,åŒºå—é“¾"/> <meta itemprop="datePublished" content="2026-02-10T02:05:54.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸è¾è¿œ_Web3"/> <meta itemprop="url" content="https://juejin.cn/user/3452906910267656"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Polymarket é‡åŒ–äº¤æ˜“å®æˆ˜ï¼ˆäºŒï¼‰ï¼šWebSocket å®æ—¶æ•°æ®æµ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3452906910267656/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸è¾è¿œ_Web3
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-10T02:05:54.000Z" title="Tue Feb 10 2026 02:05:54 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong>HTTP è½®è¯¢æ‹¿åˆ°çš„ä»·æ ¼ï¼Œæ˜¯å†å²ã€‚</strong></p>
<p>V1 ç‰ˆæœ¬çš„ Bot ç”¨ REST API è½®è¯¢ç›˜å£ï¼Œ2 ç§’ä¸€æ¬¡ã€‚ç»“æœå¾ˆç›´æ¥ï¼šå•å­è¦ä¹ˆæˆäº¤ä¸äº†ï¼Œè¦ä¹ˆæˆäº¤å³äºæŸã€‚</p>
<p>é¢„æµ‹å¸‚åœºçš„ç›˜å£å˜åŒ–å¿«ï¼Œ2 ç§’çš„å»¶è¿Ÿè¶³ä»¥è®©ä½ çœ‹åˆ°çš„ä»·æ ¼å’Œå®é™…ä»·æ ¼å®Œå…¨è„±èŠ‚ã€‚è¦åšé‡åŒ–ï¼Œ<strong>å¿…é¡»æ¥ WebSocket</strong>ã€‚</p>
<hr/>
<h2 data-id="heading-0">ä¸¤ä¸ª WebSocketï¼Œé€‰å“ªä¸ª</h2>
<p>Polymarket æä¾›ä¸¤ä¸ª WebSocket æœåŠ¡ï¼š</p>
<ol>
<li>
<p><strong>CLOB WebSocket</strong> â€” <code>wss://ws-subscriptions-clob.polymarket.com/ws/market</code><br/>
ç›˜å£ã€æˆäº¤ã€ä»·æ ¼å˜åŠ¨ï¼Œé‡åŒ–äº¤æ˜“è¦çš„æ•°æ®éƒ½åœ¨è¿™é‡Œ</p>
</li>
<li>
<p><strong>RTDS</strong> â€” <code>wss://ws-live-data.polymarket.com</code><br/>
å®æ—¶ä»·æ ¼æµå’Œè¯„è®ºæ•°æ®ï¼Œæ›´é€‚åˆåšå‰ç«¯å±•ç¤º</p>
</li>
</ol>
<p>é‡åŒ–äº¤æ˜“ç”¨ CLOB WebSocketã€‚å®ƒåˆ†ä¸¤ä¸ªé¢‘é“ï¼š</p>
<ul>
<li><strong>Market Channel</strong> â€” å…¬å¼€å¸‚åœºæ•°æ®ï¼Œä¸éœ€è¦è®¤è¯</li>
<li><strong>User Channel</strong> â€” è®¢å•çŠ¶æ€æ¨é€ï¼Œéœ€è¦ API Key è®¤è¯</li>
</ul>
<p>æˆ‘çš„ Bot ä¸¤ä¸ªéƒ½æ¥äº†ã€‚Market Channel æ‹¿ç›˜å£æ•°æ®åšå†³ç­–ï¼ŒUser Channel ç›‘å¬è‡ªå·±çš„è®¢å•çŠ¶æ€ï¼Œç¡®è®¤æˆäº¤åå†æ›´æ–°ä»“ä½ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b62902ec26994e60b3aef32cd8a9b513~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN6L6e6L-cX1dlYjM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771294516&amp;x-signature=UW6hljsCeiGD4lgfV6mbR%2BPiXlA%3D" alt="Polymarket WebSocket æ¶æ„æ€»è§ˆ" loading="lazy"/>
<em>Polymarket WebSocket æ¶æ„æ€»è§ˆ</em></p>
<h2 data-id="heading-1">è¿æ¥ä¸è®¢é˜…</h2>
<p>Market Channel ä¸éœ€è¦è®¤è¯ï¼Œè¿ä¸Šå°±èƒ½è®¢é˜…ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">import websockets
import json

WS_URL = <span class="hljs-string">"wss://ws-subscriptions-clob.polymarket.com/ws/market"</span>

async def subscribe(ws, asset_ids: list[str]):
    <span class="hljs-string">""</span><span class="hljs-string">"è®¢é˜…æŒ‡å®š token çš„å¸‚åœºæ•°æ®"</span><span class="hljs-string">""</span>
    msg = {
        <span class="hljs-string">"assets_ids"</span>: asset_ids,
        <span class="hljs-string">"type"</span>: <span class="hljs-string">"market"</span>
    }
    await ws.send(json.dumps(msg))
</code></pre>
<p>è¿æ¥å»ºç«‹åå¯ä»¥åŠ¨æ€å¢å‡è®¢é˜…ï¼Œä¸ç”¨æ–­å¼€é‡è¿ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># è¿½åŠ è®¢é˜…</span>
await ws.send(json.dumps({
    <span class="hljs-string">"assets_ids"</span>: [new_token_id],
    <span class="hljs-string">"type"</span>: <span class="hljs-string">"market"</span>,
    <span class="hljs-string">"operation"</span>: <span class="hljs-string">"subscribe"</span>
}))

<span class="hljs-comment"># å–æ¶ˆè®¢é˜…</span>
await ws.send(json.dumps({
    <span class="hljs-string">"assets_ids"</span>: [old_token_id],
    <span class="hljs-string">"type"</span>: <span class="hljs-string">"market"</span>,
    <span class="hljs-string">"operation"</span>: <span class="hljs-string">"unsubscribe"</span>
}))
</code></pre>
<p>User Channel éœ€è¦è®¤è¯ï¼Œè®¢é˜…æ ¼å¼ä¸åŒï¼š</p>
<pre><code class="hljs language-bash" lang="bash">msg = {
    <span class="hljs-string">"markets"</span>: [condition_id],
    <span class="hljs-string">"type"</span>: <span class="hljs-string">"user"</span>,
    <span class="hljs-string">"auth"</span>: {
        <span class="hljs-string">"apiKey"</span>: api_key,
        <span class="hljs-string">"secret"</span>: secret,
        <span class="hljs-string">"passphrase"</span>: passphrase
    }
}
</code></pre>
<p>è¿™é‡Œæœ‰ä¸ªå®¹æ˜“è¸©çš„å‘ï¼š<strong>Market Channel ç”¨ <code>assets_ids</code>ï¼ˆtoken IDï¼‰ï¼ŒUser Channel ç”¨ <code>markets</code>ï¼ˆcondition IDï¼‰</strong>ã€‚ä¸¤ä¸ª ID ä¸æ˜¯åŒä¸€ä¸ªä¸œè¥¿ã€‚ææ··äº†ä¸ä¼šæŠ¥é”™ï¼Œåªæ˜¯æ”¶ä¸åˆ°æ¶ˆæ¯ï¼Œdebug åŠå¤©æ‰å‘ç°ã€‚</p>
<p>ã€æ³¨ï¼štoken ID æ˜¯æŸä¸ª outcome çš„å”¯ä¸€æ ‡è¯†ï¼ˆæ¯”å¦‚ Yes tokenï¼‰ï¼Œcondition ID æ˜¯æ•´ä¸ªå¸‚åœºçš„æ ‡è¯†ã€‚ä¸€ä¸ª condition ä¸‹é€šå¸¸æœ‰ä¸¤ä¸ª tokenï¼ˆYes å’Œ Noï¼‰ã€‚ã€‘</p>
<h2 data-id="heading-2">å››ç§æ¶ˆæ¯ï¼Œå„æœ‰ç”¨å¤„</h2>
<p>è®¢é˜…æˆåŠŸåä¼šæ”¶åˆ°å››ç§æ¶ˆæ¯ã€‚ä¸æ˜¯æ¯ç§éƒ½è¦å¤„ç†ï¼Œå–å†³äºä½ çš„ç­–ç•¥ã€‚</p>
<h3 data-id="heading-3">book â€” ç›˜å£å¿«ç…§</h3>
<p>é¦–æ¬¡è®¢é˜…æˆ–ç›˜å£å¤§å¹…å˜åŠ¨æ—¶æ¨é€ï¼ŒåŒ…å«å®Œæ•´çš„ä¹°å–ç›˜ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">{
  <span class="hljs-string">"event_type"</span>: <span class="hljs-string">"book"</span>,
  <span class="hljs-string">"asset_id"</span>: <span class="hljs-string">"token_id"</span>,
  <span class="hljs-string">"market"</span>: <span class="hljs-string">"condition_id"</span>,
  <span class="hljs-string">"timestamp"</span>: <span class="hljs-string">"1700000000000"</span>,
  <span class="hljs-string">"buys"</span>: [
    { <span class="hljs-string">"price"</span>: <span class="hljs-string">"0.55"</span>, <span class="hljs-string">"size"</span>: <span class="hljs-string">"100"</span> },
    { <span class="hljs-string">"price"</span>: <span class="hljs-string">"0.54"</span>, <span class="hljs-string">"size"</span>: <span class="hljs-string">"200"</span> }
  ],
  <span class="hljs-string">"sells"</span>: [
    { <span class="hljs-string">"price"</span>: <span class="hljs-string">"0.60"</span>, <span class="hljs-string">"size"</span>: <span class="hljs-string">"50"</span> },
    { <span class="hljs-string">"price"</span>: <span class="hljs-string">"0.61"</span>, <span class="hljs-string">"size"</span>: <span class="hljs-string">"150"</span> }
  ],
  <span class="hljs-string">"hash"</span>: <span class="hljs-string">"0xabc..."</span>
}
</code></pre>
<p><code>buys</code> å’Œ <code>sells</code> æ˜¯ä»·ä½æ•°ç»„ï¼Œæ¯é¡¹åŒ…å« <code>price</code> å’Œ <code>size</code>ã€‚æ³¨æ„<strong>å­—æ®µå…¨æ˜¯å­—ç¬¦ä¸²</strong>ï¼Œéœ€è¦è‡ªå·±è½¬ floatã€‚æˆ‘ä¸€å¼€å§‹ç›´æ¥æ‹¿æ¥æ¯”è¾ƒå¤§å°ï¼Œæ€ä¹ˆæ¯”éƒ½ä¸å¯¹ï¼Œæ’æŸ¥äº†å¥½ä¸€é˜µæ‰æ„è¯†åˆ°åœ¨æ¯”è¾ƒå­—ç¬¦ä¸²ã€‚</p>
<p><code>hash</code> æ˜¯ç›˜å£å†…å®¹çš„å“ˆå¸Œå€¼ï¼Œå¯ä»¥æ ¡éªŒæœ¬åœ°ç›˜å£æ˜¯å¦å’ŒæœåŠ¡ç«¯ä¸€è‡´ã€‚å®é™…è·‘ä¸‹æ¥ï¼Œå¶å°”ä¼šå‡ºç°æœ¬åœ°ç›˜å£å’ŒæœåŠ¡ç«¯ä¸åŒæ­¥çš„æƒ…å†µï¼Œå®šæœŸç”¨ hash æ ¡éªŒå¾ˆæœ‰å¿…è¦ã€‚</p>
<h3 data-id="heading-4">price_change â€” ä»·æ ¼å˜åŠ¨</h3>
<p>æœ‰äººä¸‹å•æˆ–æ’¤å•æ—¶æ¨é€ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">{
  <span class="hljs-string">"event_type"</span>: <span class="hljs-string">"price_change"</span>,
  <span class="hljs-string">"market"</span>: <span class="hljs-string">"condition_id"</span>,
  <span class="hljs-string">"price_changes"</span>: [
    {
      <span class="hljs-string">"asset_id"</span>: <span class="hljs-string">"token_id"</span>,
      <span class="hljs-string">"price"</span>: <span class="hljs-string">"0.56"</span>,
      <span class="hljs-string">"size"</span>: <span class="hljs-string">"100"</span>,
      <span class="hljs-string">"side"</span>: <span class="hljs-string">"BUY"</span>,
      <span class="hljs-string">"best_bid"</span>: <span class="hljs-string">"0.55"</span>,
      <span class="hljs-string">"best_ask"</span>: <span class="hljs-string">"0.60"</span>
    }
  ],
  <span class="hljs-string">"timestamp"</span>: <span class="hljs-string">"1700000000000"</span>
}
</code></pre>
<p>è¿™ä¸ªæ¶ˆæ¯ç›´æ¥ç»™ä½  <code>best_bid</code> å’Œ <code>best_ask</code>ï¼Œä¸éœ€è¦è‡ªå·±ä»å®Œæ•´ç›˜å£è®¡ç®—ã€‚å¦‚æœä½ çš„ç­–ç•¥åªå…³å¿ƒæœ€ä¼˜æŠ¥ä»·ï¼Œ<strong>ç”¨ price_change æ¯” book é«˜æ•ˆå¾—å¤š</strong>â€”â€”æ•°æ®é‡å°ï¼Œæ¨é€é¢‘ç‡é«˜ã€‚</p>
<p>æˆ‘çš„ç­–ç•¥ä¸»è¦ä¾èµ–è¿™ä¸ªæ¶ˆæ¯ã€‚book åªåœ¨å¯åŠ¨æ—¶ç”¨æ¥åˆå§‹åŒ–ç›˜å£çŠ¶æ€ï¼Œä¹‹åå…¨é  price_change é©±åŠ¨ã€‚</p>
<h3 data-id="heading-5">last_trade_price â€” æœ€æ–°æˆäº¤</h3>
<p>æœ‰æˆäº¤æ—¶æ¨é€ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">{
  <span class="hljs-string">"event_type"</span>: <span class="hljs-string">"last_trade_price"</span>,
  <span class="hljs-string">"asset_id"</span>: <span class="hljs-string">"token_id"</span>,
  <span class="hljs-string">"price"</span>: <span class="hljs-string">"0.55"</span>,
  <span class="hljs-string">"side"</span>: <span class="hljs-string">"BUY"</span>,
  <span class="hljs-string">"size"</span>: <span class="hljs-string">"50"</span>,
  <span class="hljs-string">"fee_rate_bps"</span>: <span class="hljs-string">"0"</span>,
  <span class="hljs-string">"timestamp"</span>: <span class="hljs-string">"1700000000000"</span>
}
</code></pre>
<p><code>side</code> æ˜¯ä¸»åŠ¨æ–¹å‘â€”â€”BUY è¯´æ˜æ˜¯ä¹°æ–¹åƒäº†å–å•ï¼ŒSELL åä¹‹ã€‚<code>fee_rate_bps</code> æ˜¯æ‰‹ç»­è´¹ç‡ï¼Œå•ä½æ˜¯åŸºç‚¹ï¼ˆ1 åŸºç‚¹ = 0.01%ï¼‰ã€‚</p>
<p>æˆäº¤æ•°æ®å¯¹åˆ¤æ–­å¸‚åœºæ–¹å‘æœ‰ç”¨ã€‚è¿ç»­å‡ºç°å¤§å• BUYï¼Œè¯´æ˜æœ‰äººåœ¨æ‰«è´§ã€‚</p>
<h3 data-id="heading-6">tick_size_change â€” æœ€å°åˆ»åº¦å˜åŒ–</h3>
<p>å½“ä»·æ ¼æ¥è¿‘ 0 æˆ– 1ï¼ˆ&gt;0.96 æˆ– &lt;0.04ï¼‰ï¼Œæœ€å°æŠ¥ä»·åˆ»åº¦ä¼šä» 0.01 å˜æˆ 0.001ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">{
  <span class="hljs-string">"event_type"</span>: <span class="hljs-string">"tick_size_change"</span>,
  <span class="hljs-string">"asset_id"</span>: <span class="hljs-string">"token_id"</span>,
  <span class="hljs-string">"old_tick_size"</span>: <span class="hljs-string">"0.01"</span>,
  <span class="hljs-string">"new_tick_size"</span>: <span class="hljs-string">"0.001"</span>
}
</code></pre>
<p>è¿™ä¸ªæ¶ˆæ¯å®¹æ˜“è¢«å¿½ç•¥ã€‚ä½†å¦‚æœä½ çš„ç­–ç•¥åœ¨æç«¯ä»·æ ¼åŒºé—´è¿è¡Œï¼ˆæ¯”å¦‚äº‹ä»¶å³å°†ç»“ç®—ï¼‰ï¼Œ<strong>ä¸å¤„ç†åˆ»åº¦å˜åŒ–ä¼šå¯¼è‡´ä¸‹å•è¢«æ‹’</strong>ã€‚æˆ‘åœ¨ä¸€æ¬¡é€‰ä¸¾ç»“ç®—å‰å°±åƒè¿‡è¿™ä¸ªäºï¼ŒBot è¿ç»­æŠ¥é”™ INVALID_TICK_SIZEï¼Œæ’æŸ¥æ‰å‘ç°æ˜¯åˆ»åº¦å˜äº†æ²¡æ›´æ–°ã€‚</p>
<h2 data-id="heading-7">å¿ƒè·³ï¼š10 ç§’ä¸€æ¬¡ PING</h2>
<p>WebSocket è¿æ¥ä¸å‘å¿ƒè·³ä¼šè¢«æœåŠ¡ç«¯æ–­å¼€ã€‚Polymarket è¦æ±‚æ¯ 10 ç§’å‘ä¸€æ¬¡ PINGï¼š</p>
<pre><code class="hljs language-bash" lang="bash">import asyncio

async def heartbeat(ws):
    <span class="hljs-keyword">while</span> True:
        await ws.send(<span class="hljs-string">"PING"</span>)
        await asyncio.sleep(10)
</code></pre>
<p>å¿ƒè·³å’Œæ¶ˆæ¯å¤„ç†è¦å¹¶è¡Œè·‘ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">async def run():
    async with websockets.connect(WS_URL) as ws:
        await subscribe(ws, asset_ids)
        await asyncio.gather(
            heartbeat(ws),
            handle_messages(ws)
        )
</code></pre>
<h2 data-id="heading-8">æ–­è¿å¤„ç†ï¼šå…ˆæ’¤å•ï¼Œå†é‡è¿</h2>
<p>WebSocket ä¸æ˜¯ä¸‡èƒ½çš„ã€‚ç½‘ç»œæŠ–åŠ¨ã€æœåŠ¡ç«¯é‡å¯éƒ½ä¼šå¯¼è‡´æ•°æ®ä¸­æ–­ã€‚</p>
<p>æ¯æ¡æ¶ˆæ¯éƒ½å¸¦ <code>timestamp</code>ï¼Œç”¨å®ƒåˆ¤æ–­æ•°æ®æ–°é²œåº¦ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">MAX_STALE_MS = 5000  <span class="hljs-comment"># 5 ç§’</span>

def is_stale(msg_timestamp: str) -&gt; bool:
    age = time.time() * 1000 - int(msg_timestamp)
    <span class="hljs-built_in">return</span> age &gt; MAX_STALE_MS
</code></pre>
<p>æ•°æ®è¿‡æœŸæ—¶ï¼Œç­–ç•¥åº”è¯¥<strong>ç«‹å³åœæ­¢äº¤æ˜“</strong>ã€‚ä¸è¦é™çº§åˆ° HTTP è½®è¯¢â€”â€”HTTP æ‹¿åˆ°çš„æ•°æ®å»¶è¿Ÿæ›´å¤§ï¼ŒåŸºäºè¿‡æ—¶æ•°æ®äº¤æ˜“åªä¼šäºæ›´å¤šã€‚</p>
<p>æ–­è¿æ—¶çš„åŸåˆ™å¾ˆç®€å•ï¼š<strong>å…ˆæ’¤å•ï¼Œå†é‡è¿ã€‚</strong></p>
<pre><code class="hljs language-bash" lang="bash">async def handle_disconnect():
    <span class="hljs-comment"># 1. ç«‹å³æ’¤é”€æ‰€æœ‰æŒ‚å•</span>
    await client.cancel_all()
    <span class="hljs-comment"># 2. ç­‰å¾…åé‡è¿</span>
    await asyncio.sleep(2)
    await reconnect()
</code></pre>
<p>é¡ºåºä¸èƒ½åã€‚å…ˆé‡è¿å†æ’¤å•çš„è¯ï¼Œé‡è¿æœŸé—´æŒ‚å•è¿˜åœ¨ç›˜å£ä¸Šï¼Œç›˜å£å·²ç»å˜äº†ä½†ä½ ä¸çŸ¥é“ï¼Œè¢«æˆäº¤äº†å°±æ˜¯ç›²ç›’ã€‚</p>
<h2 data-id="heading-9">å®Œæ•´çš„æ¶ˆæ¯å¤„ç†æ¡†æ¶</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4bb47e59f4ff4e88a4c7c0fa52953408~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN6L6e6L-cX1dlYjM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771294516&amp;x-signature=CQ1mgFW7exKNsZzC2Okz%2FwrviHQ%3D" alt="æ¶ˆæ¯å¤„ç†ä¸æ–­è¿æµç¨‹" loading="lazy"/>
<em>æ¶ˆæ¯å¤„ç†ä¸æ–­è¿æµç¨‹</em></p>
<p>æŠŠä¸Šé¢çš„é€»è¾‘ä¸²èµ·æ¥ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">async def handle_messages(ws):
    async <span class="hljs-keyword">for</span> raw <span class="hljs-keyword">in</span> ws:
        <span class="hljs-keyword">if</span> raw == <span class="hljs-string">"PONG"</span>:
            <span class="hljs-built_in">continue</span>

        msg = json.loads(raw)
        event = msg.get(<span class="hljs-string">"event_type"</span>)

        <span class="hljs-keyword">if</span> is_stale(msg.get(<span class="hljs-string">"timestamp"</span>, <span class="hljs-string">"0"</span>)):
            logger.warning(<span class="hljs-string">"æ•°æ®è¿‡æœŸï¼Œè·³è¿‡"</span>)
            <span class="hljs-built_in">continue</span>

        <span class="hljs-keyword">if</span> event == <span class="hljs-string">"book"</span>:
            update_orderbook(msg)
        <span class="hljs-keyword">elif</span> event == <span class="hljs-string">"price_change"</span>:
            on_price_change(msg)
        <span class="hljs-keyword">elif</span> event == <span class="hljs-string">"last_trade_price"</span>:
            on_trade(msg)
        <span class="hljs-keyword">elif</span> event == <span class="hljs-string">"tick_size_change"</span>:
            on_tick_size_change(msg)
</code></pre>
<p>æ¡†æ¶æœ¬èº«ä¸å¤æ‚ã€‚éš¾çš„æ˜¯æ¯ä¸ª handler é‡Œçš„å…·ä½“é€»è¾‘â€”â€”æ€ä¹ˆç»´æŠ¤æœ¬åœ°ç›˜å£ã€æ€ä¹ˆåˆ¤æ–­ä¿¡å·ã€æ€ä¹ˆç®¡ç†è®¢å•çŠ¶æ€ã€‚è¿™äº›åœ¨åç»­çš„æ–‡ç« é‡Œä¼šè¯¦ç»†å±•å¼€ã€‚</p>
<hr/>
<p>æ‹¿åˆ°å®æ—¶æ•°æ®æµï¼Œæ‰æœ‰èµ„æ ¼è°ˆç­–ç•¥ã€‚REST API æ˜¯çœ‹åè§†é•œå¼€è½¦ï¼ŒWebSocket æ‰æ˜¯æŒ¡é£ç»ç’ƒã€‚</p>
<hr/>
<h3 data-id="heading-10">å‚è€ƒ</h3>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.polymarket.com%2Fdevelopers%2FCLOB%2Fwebsocket%2Fwss-overview" target="_blank" title="https://docs.polymarket.com/developers/CLOB/websocket/wss-overview" ref="nofollow noopener noreferrer">Polymarket WSS Overview</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.polymarket.com%2Fdevelopers%2FCLOB%2Fwebsocket%2Fmarket-channel" target="_blank" title="https://docs.polymarket.com/developers/CLOB/websocket/market-channel" ref="nofollow noopener noreferrer">Market Channel</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.polymarket.com%2Fquickstart%2Fwebsocket%2F" target="_blank" title="https://docs.polymarket.com/quickstart/websocket/" ref="nofollow noopener noreferrer">WSS Quickstart</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Meta Audience Network + AdMob åŒå¹³å°é›†æˆå®Œæ•´æŒ‡å—]]></title>    <link>https://juejin.cn/post/7604685644685164596</link>    <guid>https://juejin.cn/post/7604685644685164596</guid>    <pubDate>2026-02-10T02:25:14.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604685644685164596" data-draft-id="7604685644685115444" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Meta Audience Network + AdMob åŒå¹³å°é›†æˆå®Œæ•´æŒ‡å—"/> <meta itemprop="keywords" content="iOS"/> <meta itemprop="datePublished" content="2026-02-10T02:25:14.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å±±æ°´åŸŸ"/> <meta itemprop="url" content="https://juejin.cn/user/2260251635887309"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Meta Audience Network + AdMob åŒå¹³å°é›†æˆå®Œæ•´æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2260251635887309/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å±±æ°´åŸŸ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-10T02:25:14.000Z" title="Tue Feb 10 2026 02:25:14 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    14
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»21åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">ä¸€ã€æ¶æ„é€‰æ‹©ï¼šèšåˆå¹³å°ï¼ˆMediationï¼‰</h3>
<p>åŒæ—¶æ¥å…¥å¤šä¸ªå¹¿å‘Šç½‘ç»œï¼Œ<strong>å¼ºçƒˆæ¨èä½¿ç”¨å¹¿å‘Šèšåˆï¼ˆMediationï¼‰å¹³å°</strong>ï¼Œè€Œä¸æ˜¯è‡ªå·±æ‰‹åŠ¨ç®¡ç†åˆ‡æ¢é€»è¾‘ã€‚</p>
<h4 data-id="heading-1">1.1 ä¸»æµèšåˆå¹³å°å¯¹æ¯”</h4>






























<table><thead><tr><th>èšåˆå¹³å°</th><th>è¯´æ˜</th><th>æ¨èåº¦</th></tr></thead><tbody><tr><td><strong>Google AdMob Mediation</strong></td><td>AdMob å®˜æ–¹å†…ç½®èšåˆï¼Œæ”¯æŒ Meta AN ä½œä¸ºç¬¬ä¸‰æ–¹é€‚é…å™¨</td><td>â­â­â­â­â­</td></tr><tr><td><strong>AppLovin MAX</strong></td><td>ç‹¬ç«‹èšåˆå¹³å°ï¼Œæ”¯æŒå¹¿æ³›å¹¿å‘Šç½‘ç»œï¼Œå®æ—¶ç«ä»·èƒ½åŠ›å¼º</td><td>â­â­â­â­â­</td></tr><tr><td><strong>ironSource LevelPlay</strong></td><td>æ¸¸æˆé¢†åŸŸä¸»æµï¼Œå·²ä¸ Unity Ads åˆå¹¶</td><td>â­â­â­â­</td></tr><tr><td><strong>Mintegral / TopOn / TradPlus</strong></td><td>å›½å†…å‡ºæµ·å¸¸ç”¨ï¼Œæ”¯æŒå›½å†…å¤–ä¸»æµç½‘ç»œ</td><td>â­â­â­â­</td></tr></tbody></table>
<blockquote>
<p><strong>æœ¬æŒ‡å—é‡ç‚¹è®²è§£æœ€ä¸»æµçš„ä¸¤ç§æ–¹æ¡ˆï¼š</strong></p>
<ol>
<li><strong>Google AdMob Mediation</strong>ï¼ˆä»¥ AdMob ä¸ºä¸»ï¼ŒMeta AN åšç«ä»·è¡¥å……ï¼‰</li>
<li><strong>AppLovin MAX</strong>ï¼ˆç‹¬ç«‹èšåˆï¼ŒAdMob + Meta AN å¹¶è¡Œç«ä»·ï¼‰</li>
</ol>
</blockquote>
<hr/>
<h3 data-id="heading-2">äºŒã€æ–¹æ¡ˆä¸€ï¼šGoogle AdMob Mediation + Meta Audience Networkï¼ˆæ¨èï¼‰</h3>
<p>è¿™æ˜¯æœ€ç›´æ¥çš„æ–¹æ¡ˆâ€”â€”AdMob ä½œä¸ºèšåˆä¸»ä½“ï¼ŒMeta AN é€šè¿‡ <strong>Biddingï¼ˆå®æ—¶ç«ä»·ï¼‰</strong> å‚ä¸ç«äº‰ã€‚å¥½çš„ï¼Œå·²ç»è·å–åˆ°æ‰€æœ‰å…³é”®ä¿¡æ¯ã€‚ä¸‹é¢ä¸ºæ‚¨æ’°å†™å®Œæ•´è¯¦ç»†çš„é›†æˆæŒ‡å—ã€‚</p>
<hr/>
<h2 data-id="heading-3">Meta Audience Network + AdMob åŒå¹³å°é›†æˆå®Œæ•´æŒ‡å—ï¼ˆiOS/Swiftï¼‰</h2>
<hr/>
<h3 data-id="heading-4">ä¸€ã€æ¶æ„é€‰æ‹©ï¼šä¸ºä»€ä¹ˆéœ€è¦èšåˆï¼ˆMediationï¼‰ï¼Ÿ</h3>
<p>æ‰‹åŠ¨ç®¡ç†ä¸¤ä¸ªå¹¿å‘Š SDK çš„åŠ è½½ã€å±•ç¤ºã€é™çº§é€»è¾‘<strong>éå¸¸ç¹çä¸”å®¹æ˜“å‡ºé”™</strong>ã€‚ä½¿ç”¨ <strong>å¹¿å‘Šèšåˆå¹³å°</strong> å¯ä»¥ï¼š</p>
<ul>
<li>âœ… è‡ªåŠ¨è®©å¤šä¸ªå¹¿å‘Šç½‘ç»œå®æ—¶ç«ä»·ï¼ˆBiddingï¼‰ï¼Œæœ€å¤§åŒ–æ”¶ç›Š</li>
<li>âœ… ç»Ÿä¸€ API è°ƒç”¨ï¼Œä¸éœ€è¦ä¸ºæ¯ä¸ªå¹¿å‘Šç½‘ç»œå†™å•ç‹¬ä»£ç </li>
<li>âœ… è‡ªåŠ¨å¤„ç† No Fill é™çº§ï¼ˆA ç½‘ç»œæ²¡å¹¿å‘Šåˆ™è‡ªåŠ¨åˆ‡æ¢åˆ° Bï¼‰</li>
<li>âœ… ç»Ÿä¸€ç®¡ç†éšç§åˆè§„</li>
</ul>
<h4 data-id="heading-5">1.1 ä¸»æµèšåˆå¹³å°å¯¹æ¯”</h4>



































<table><thead><tr><th>èšåˆå¹³å°</th><th>ç‰¹ç‚¹</th><th>é€‚åˆåœºæ™¯</th><th>æ¨èåº¦</th></tr></thead><tbody><tr><td><strong>Google AdMob Mediation</strong></td><td>AdMob å®˜æ–¹å†…ç½®ï¼ŒMeta AN åšç«ä»·é€‚é…å™¨</td><td>å·²ä½¿ç”¨ AdMob çš„é¡¹ç›®ï¼Œæœ€ç®€å•</td><td>â­â­â­â­â­</td></tr><tr><td><strong>AppLovin MAX</strong></td><td>ç‹¬ç«‹èšåˆï¼Œä¸¤è€…å¹¶è¡Œç«ä»·ï¼Œå…¬æ­£é€æ˜</td><td>è¿½æ±‚æœ€é«˜ eCPM çš„æ¸¸æˆç±»åº”ç”¨</td><td>â­â­â­â­â­</td></tr><tr><td><strong>ironSource LevelPlay</strong></td><td>ä¸ Unity åˆå¹¶ï¼Œæ¸¸æˆé¢†åŸŸå¼ºåŠ¿</td><td>Unity æ¸¸æˆæˆ–å·²ä½¿ç”¨ ironSource</td><td>â­â­â­â­</td></tr><tr><td><strong>TopOn / TradPlus</strong></td><td>å›½å†…å‡ºæµ·å¸¸ç”¨ï¼Œæ”¯æŒå›½å†…å¤–ä¸»æµç½‘ç»œ</td><td>å‡ºæµ·åº”ç”¨åŒæ—¶æ¥å›½å†…å¤–å¹¿å‘Š</td><td>â­â­â­â­</td></tr></tbody></table>
<blockquote>
<p>ğŸ’¡ <strong>æœ¬æŒ‡å—é‡ç‚¹è®²è§£æœ€ä¸»æµçš„æ–¹æ¡ˆï¼šGoogle AdMob Mediation + Meta ANï¼ˆæ–¹æ¡ˆä¸€ï¼‰</strong> å’Œ <strong>AppLovin MAXï¼ˆæ–¹æ¡ˆäºŒï¼‰</strong></p>
</blockquote>
<hr/>
<h3 data-id="heading-6">äºŒã€æ–¹æ¡ˆä¸€ï¼šGoogle AdMob Mediation + Meta Audience Network</h3>
<blockquote>
<p><strong>æ ¸å¿ƒæ€è·¯ï¼š</strong> AdMob ä½œä¸ºä¸»èšåˆï¼ŒMeta AN é€šè¿‡ Bidding é€‚é…å™¨å‚ä¸å®æ—¶ç«ä»·ç«äº‰</p>
</blockquote>
<h4 data-id="heading-7">2.1 ç‰ˆæœ¬è¦æ±‚</h4>





























<table><thead><tr><th>æ¡ä»¶</th><th>æœ€ä½ç‰ˆæœ¬</th></tr></thead><tbody><tr><td>iOS Deployment Target</td><td><strong>13.0</strong></td></tr><tr><td>Google Mobile Ads SDK</td><td><strong>12.0.0+</strong>ï¼ˆæ¨èæœ€æ–°ï¼‰</td></tr><tr><td>Meta Audience Network SDK</td><td><strong>6.21.0</strong></td></tr><tr><td>Meta Adapter</td><td><strong>6.21.0.0</strong></td></tr><tr><td>Xcode</td><td>æœ€æ–°ç‰ˆæœ¬</td></tr></tbody></table>
<blockquote>
<p>âš ï¸ Meta AN è‡ª 2021 å¹´èµ· <strong>åªæ”¯æŒ Bidding</strong>ï¼ˆå®æ—¶ç«ä»·ï¼‰ï¼Œä¸å†æ”¯æŒ Waterfall</p>
</blockquote>
<h4 data-id="heading-8">2.2 CocoaPods å®‰è£…</h4>
<pre><code class="hljs language-ruby" lang="ruby">platform <span class="hljs-symbol">:ios</span>, <span class="hljs-string">'13.0'</span>

target <span class="hljs-string">'YourApp'</span> <span class="hljs-keyword">do</span>
  use_frameworks!

  <span class="hljs-comment"># â‘  Google Mobile Ads SDKï¼ˆAdMob ä¸»ä½“ï¼‰</span>
  pod <span class="hljs-string">'Google-Mobile-Ads-SDK'</span>

  <span class="hljs-comment"># â‘¡ Meta Audience Network Mediation Adapterï¼ˆè‡ªåŠ¨åŒ…å« FBAudienceNetwork SDKï¼‰</span>
  pod <span class="hljs-string">'GoogleMobileAdsMediationFacebook'</span>
<span class="hljs-keyword">end</span>
</code></pre>
<pre><code class="hljs language-bash" lang="bash">pod install --repo-update
</code></pre>
<blockquote>
<p>åªéœ€è¦æ·»åŠ  <code>GoogleMobileAdsMediationFacebook</code>ï¼Œå®ƒä¼š<strong>è‡ªåŠ¨æ‹‰å– <code>FBAudienceNetwork</code> SDK</strong>ï¼Œä¸éœ€è¦é¢å¤–å•ç‹¬å¼•å…¥ã€‚</p>
</blockquote>
<h4 data-id="heading-9">2.3 Info.plist é…ç½®</h4>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- â‘  AdMob App IDï¼ˆå¿…é¡»ï¼‰ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">key</span>&gt;</span>GADApplicationIdentifier<span class="hljs-tag">&lt;/<span class="hljs-name">key</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">string</span>&gt;</span>ca-app-pub-xxxxxxxxxxxxxxxx~yyyyyyyyyy<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span>

<span class="hljs-comment">&lt;!-- â‘¡ App Tracking Transparency æƒé™è¯´æ˜ï¼ˆiOS 14.5+ å¿…é¡»ï¼‰ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">key</span>&gt;</span>NSUserTrackingUsageDescription<span class="hljs-tag">&lt;/<span class="hljs-name">key</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">string</span>&gt;</span>æ­¤æ ‡è¯†ç¬¦å°†ç”¨äºå‘æ‚¨æŠ•æ”¾ä¸ªæ€§åŒ–å¹¿å‘Š<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span>

<span class="hljs-comment">&lt;!-- â‘¢ SKAdNetwork æ ‡è¯†ç¬¦ï¼ˆAdMob + Meta éƒ½éœ€è¦ï¼‰ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">key</span>&gt;</span>SKAdNetworkItems<span class="hljs-tag">&lt;/<span class="hljs-name">key</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">array</span>&gt;</span>
  <span class="hljs-comment">&lt;!-- Google --&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">dict</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">key</span>&gt;</span>SKAdNetworkIdentifier<span class="hljs-tag">&lt;/<span class="hljs-name">key</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">string</span>&gt;</span>cstr6suwn9.skadnetwork<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">dict</span>&gt;</span>
  <span class="hljs-comment">&lt;!-- Meta --&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">dict</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">key</span>&gt;</span>SKAdNetworkIdentifier<span class="hljs-tag">&lt;/<span class="hljs-name">key</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">string</span>&gt;</span>v9wttpbfk9.skadnetwork<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">dict</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">dict</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">key</span>&gt;</span>SKAdNetworkIdentifier<span class="hljs-tag">&lt;/<span class="hljs-name">key</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">string</span>&gt;</span>n38lu8286q.skadnetwork<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">dict</span>&gt;</span>
  <span class="hljs-comment">&lt;!-- ... å®Œæ•´åˆ—è¡¨å‚è§ Google å’Œ Meta å®˜æ–¹æ–‡æ¡£ --&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">array</span>&gt;</span>
</code></pre>
<h4 data-id="heading-10">2.4 AppDelegate åˆå§‹åŒ–</h4>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">import</span> UIKit
<span class="hljs-keyword">import</span> GoogleMobileAds
<span class="hljs-keyword">import</span> FBAudienceNetwork
<span class="hljs-keyword">import</span> AppTrackingTransparency

<span class="hljs-keyword">@main</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">AppDelegate</span>: <span class="hljs-title class_">UIResponder</span>, <span class="hljs-title class_">UIApplicationDelegate</span> {

    <span class="hljs-keyword">func</span> <span class="hljs-title function_">application</span>(
        <span class="hljs-keyword">_</span> <span class="hljs-params">application</span>: <span class="hljs-type">UIApplication</span>,
        <span class="hljs-params">didFinishLaunchingWithOptions</span> <span class="hljs-params">launchOptions</span>: [<span class="hljs-type">UIApplication</span>.<span class="hljs-params">LaunchOptionsKey</span>: <span class="hljs-keyword">Any</span>]<span class="hljs-operator">?</span>
    ) -&gt; <span class="hljs-type">Bool</span> {

        <span class="hljs-comment">// â± å»¶è¿Ÿè¯·æ±‚ ATT æƒé™ï¼ˆå»ºè®®åœ¨é¦–é¡µ viewDidAppear ä¸­è°ƒç”¨æ›´å¥½ï¼‰</span>
        <span class="hljs-comment">// ä½†å¿…é¡»åœ¨å¹¿å‘Šè¯·æ±‚ä¹‹å‰å®Œæˆ</span>
        
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
    }
}
</code></pre>
<h4 data-id="heading-11">2.5 ATT æƒé™è¯·æ±‚ + SDK åˆå§‹åŒ–ï¼ˆæ¨èå†™æ³•ï¼‰</h4>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">import</span> UIKit
<span class="hljs-keyword">import</span> GoogleMobileAds
<span class="hljs-keyword">import</span> FBAudienceNetwork
<span class="hljs-keyword">import</span> AppTrackingTransparency

<span class="hljs-keyword">class</span> <span class="hljs-title class_">MainViewController</span>: <span class="hljs-title class_">UIViewController</span> {

    <span class="hljs-keyword">override</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">viewDidAppear</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">animated</span>: <span class="hljs-type">Bool</span>) {
        <span class="hljs-keyword">super</span>.viewDidAppear(animated)
        requestATTThenInitializeAds()
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">requestATTThenInitializeAds</span>() {
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">#available</span>(<span class="hljs-keyword">iOS</span> <span class="hljs-number">14.5</span>, <span class="hljs-operator">*</span>) {
            <span class="hljs-comment">// â‘  å…ˆè¯·æ±‚ ATT æƒé™</span>
            <span class="hljs-type">ATTrackingManager</span>.requestTrackingAuthorization { [<span class="hljs-keyword">weak</span> <span class="hljs-keyword">self</span>] status <span class="hljs-keyword">in</span>
                <span class="hljs-type">DispatchQueue</span>.main.async {
                    <span class="hljs-comment">// â‘¡ æ ¹æ®ç»“æœè®¾ç½® Meta ATE æ ‡å¿—</span>
                    <span class="hljs-comment">// æ³¨æ„ï¼šSDK 6.15.0+ åœ¨ iOS 17+ ä¼šè‡ªåŠ¨è¯»å– ATT çŠ¶æ€</span>
                    <span class="hljs-comment">// ä½† iOS 14.5 ~ 16.x ä»éœ€è¦æ‰‹åŠ¨è®¾ç½®</span>
                    <span class="hljs-keyword">switch</span> status {
                    <span class="hljs-keyword">case</span> .authorized:
                        <span class="hljs-type">FBAdSettings</span>.setAdvertiserTrackingEnabled(<span class="hljs-literal">true</span>)
                    <span class="hljs-keyword">case</span> .denied, .restricted:
                        <span class="hljs-type">FBAdSettings</span>.setAdvertiserTrackingEnabled(<span class="hljs-literal">false</span>)
                    <span class="hljs-keyword">case</span> .notDetermined:
                        <span class="hljs-type">FBAdSettings</span>.setAdvertiserTrackingEnabled(<span class="hljs-literal">false</span>)
                    <span class="hljs-keyword">@unknown</span> <span class="hljs-keyword">default</span>:
                        <span class="hljs-keyword">break</span>
                    }

                    <span class="hljs-comment">// â‘¢ ATT å®Œæˆåå†åˆå§‹åŒ– Google Mobile Ads SDK</span>
                    <span class="hljs-keyword">self</span><span class="hljs-operator">?</span>.initializeGoogleAds()
                }
            }
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-comment">// iOS 14.5 ä»¥ä¸‹ç›´æ¥åˆå§‹åŒ–</span>
            initializeGoogleAds()
        }
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">initializeGoogleAds</span>() {
        <span class="hljs-comment">// Google Mobile Ads SDK åˆå§‹åŒ–ï¼ˆä¼šåŒæ—¶åˆå§‹åŒ–æ‰€æœ‰ Mediation Adapterï¼‰</span>
        <span class="hljs-type">GADMobileAds</span>.sharedInstance().start { status <span class="hljs-keyword">in</span>
            <span class="hljs-built_in">print</span>(<span class="hljs-string">"âœ… AdMob SDK åˆå§‹åŒ–å®Œæˆ"</span>)

            <span class="hljs-comment">// æ‰“å°å„ Adapter çŠ¶æ€</span>
            <span class="hljs-keyword">let</span> adapterStatuses <span class="hljs-operator">=</span> status.adapterStatusesByClassName
            <span class="hljs-keyword">for</span> (adapter, status) <span class="hljs-keyword">in</span> adapterStatuses {
                <span class="hljs-built_in">print</span>(<span class="hljs-string">"  Adapter: <span class="hljs-subst">\(adapter)</span>, State: <span class="hljs-subst">\(status.state.rawValue)</span>, Desc: <span class="hljs-subst">\(status.description)</span>"</span>)
            }
        }
    }
}
</code></pre>
<blockquote>
<p>âš ï¸ <strong>å…³é”®é¡ºåºï¼šATT æƒé™ â†’ è®¾ç½® Meta ATE â†’ åˆå§‹åŒ– GADMobileAds</strong></p>
<p>Google AdMob Mediation åˆå§‹åŒ–æ—¶ä¼šè‡ªåŠ¨åˆå§‹åŒ– Meta AN SDK é€‚é…å™¨ï¼Œ<strong>ä¸éœ€è¦</strong>å•ç‹¬è°ƒç”¨ <code>FBAudienceNetworkAds.initialize()</code></p>
</blockquote>
<h4 data-id="heading-12">2.6 Banner å¹¿å‘Šï¼ˆé€šè¿‡ AdMob èšåˆï¼‰</h4>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">import</span> UIKit
<span class="hljs-keyword">import</span> GoogleMobileAds

<span class="hljs-keyword">class</span> <span class="hljs-title class_">BannerViewController</span>: <span class="hljs-title class_">UIViewController</span>, <span class="hljs-title class_">GADBannerViewDelegate</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> bannerView: <span class="hljs-type">GADBannerView</span>!

    <span class="hljs-keyword">override</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">viewDidLoad</span>() {
        <span class="hljs-keyword">super</span>.viewDidLoad()
        setupBanner()
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">setupBanner</span>() {
        <span class="hljs-comment">// ä½¿ç”¨ AdMob çš„ Ad Unit IDï¼ˆåœ¨ AdMob åå°é…ç½®äº† Meta Mediation çš„å¹¿å‘Šå•å…ƒï¼‰</span>
        bannerView <span class="hljs-operator">=</span> <span class="hljs-type">GADBannerView</span>(adSize: <span class="hljs-type">GADAdSizeBanner</span>) <span class="hljs-comment">// 320Ã—50</span>
        bannerView.adUnitID <span class="hljs-operator">=</span> <span class="hljs-string">"ca-app-pub-xxxxx/yyyyy"</span> <span class="hljs-comment">// â¬…ï¸ AdMob Ad Unit ID</span>
        bannerView.rootViewController <span class="hljs-operator">=</span> <span class="hljs-keyword">self</span>
        bannerView.delegate <span class="hljs-operator">=</span> <span class="hljs-keyword">self</span>
        bannerView.translatesAutoresizingMaskIntoConstraints <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>

        view.addSubview(bannerView)
        <span class="hljs-type">NSLayoutConstraint</span>.activate([
            bannerView.bottomAnchor.constraint(equalTo: view.safeAreaLayoutGuide.bottomAnchor),
            bannerView.centerXAnchor.constraint(equalTo: view.centerXAnchor)
        ])

        bannerView.load(<span class="hljs-type">GADRequest</span>())
    }

    <span class="hljs-comment">// MARK: - GADBannerViewDelegate</span>

    <span class="hljs-keyword">func</span> <span class="hljs-title function_">bannerViewDidReceiveAd</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">bannerView</span>: <span class="hljs-type">GADBannerView</span>) {
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"âœ… Banner åŠ è½½æˆåŠŸ"</span>)
        <span class="hljs-comment">// å¯é€šè¿‡ bannerView.responseInfo æŸ¥çœ‹æ˜¯å“ªä¸ªç½‘ç»œå¡«å……çš„</span>
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> adNetworkClassName <span class="hljs-operator">=</span> bannerView.responseInfo<span class="hljs-operator">?</span>.loadedAdNetworkResponseInfo<span class="hljs-operator">?</span>.adNetworkClassName {
            <span class="hljs-built_in">print</span>(<span class="hljs-string">"  å¡«å……æ¥æº: <span class="hljs-subst">\(adNetworkClassName)</span>"</span>)
            <span class="hljs-comment">// å¦‚æœæ˜¯ Meta å¡«å……ï¼Œä¼šæ˜¾ç¤º GADMediationAdapterFacebook</span>
        }
    }

    <span class="hljs-keyword">func</span> <span class="hljs-title function_">bannerView</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">bannerView</span>: <span class="hljs-type">GADBannerView</span>, <span class="hljs-params">didFailToReceiveAdWithError</span> <span class="hljs-params">error</span>: <span class="hljs-type">Error</span>) {
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"âŒ Banner åŠ è½½å¤±è´¥: <span class="hljs-subst">\(error.localizedDescription)</span>"</span>)
    }

    <span class="hljs-keyword">func</span> <span class="hljs-title function_">bannerViewDidRecordImpression</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">bannerView</span>: <span class="hljs-type">GADBannerView</span>) {
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"ğŸ‘ï¸ Banner æ›å…‰"</span>)
    }

    <span class="hljs-keyword">func</span> <span class="hljs-title function_">bannerViewDidRecordClick</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">bannerView</span>: <span class="hljs-type">GADBannerView</span>) {
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"ğŸ‘† Banner ç‚¹å‡»"</span>)
    }
}
</code></pre>
<h4 data-id="heading-13">2.7 Interstitial æ’å±å¹¿å‘Šï¼ˆé€šè¿‡ AdMob èšåˆï¼‰</h4>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">import</span> UIKit
<span class="hljs-keyword">import</span> GoogleMobileAds

<span class="hljs-keyword">class</span> <span class="hljs-title class_">InterstitialViewController</span>: <span class="hljs-title class_">UIViewController</span>, <span class="hljs-title class_">GADFullScreenContentDelegate</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> interstitialAd: <span class="hljs-type">GADInterstitialAd</span>?

    <span class="hljs-keyword">override</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">viewDidLoad</span>() {
        <span class="hljs-keyword">super</span>.viewDidLoad()
        loadInterstitialAd()
    }

    <span class="hljs-comment">/// æå‰åŠ è½½æ’å±å¹¿å‘Š</span>
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">loadInterstitialAd</span>() {
        <span class="hljs-type">GADInterstitialAd</span>.load(
            withAdUnitID: <span class="hljs-string">"ca-app-pub-xxxxx/yyyyy"</span>, <span class="hljs-comment">// â¬…ï¸ AdMob Ad Unit ID</span>
            request: <span class="hljs-type">GADRequest</span>()
        ) { [<span class="hljs-keyword">weak</span> <span class="hljs-keyword">self</span>] ad, error <span class="hljs-keyword">in</span>
            <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> error <span class="hljs-operator">=</span> error {
                <span class="hljs-built_in">print</span>(<span class="hljs-string">"âŒ æ’å±å¹¿å‘ŠåŠ è½½å¤±è´¥: <span class="hljs-subst">\(error.localizedDescription)</span>"</span>)
                <span class="hljs-keyword">return</span>
            }
            <span class="hljs-built_in">print</span>(<span class="hljs-string">"âœ… æ’å±å¹¿å‘ŠåŠ è½½æˆåŠŸ"</span>)
            <span class="hljs-keyword">self</span><span class="hljs-operator">?</span>.interstitialAd <span class="hljs-operator">=</span> ad
            <span class="hljs-keyword">self</span><span class="hljs-operator">?</span>.interstitialAd<span class="hljs-operator">?</span>.fullScreenContentDelegate <span class="hljs-operator">=</span> <span class="hljs-keyword">self</span>

            <span class="hljs-comment">// æŸ¥çœ‹å¡«å……æ¥æº</span>
            <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> adNetwork <span class="hljs-operator">=</span> ad<span class="hljs-operator">?</span>.responseInfo.loadedAdNetworkResponseInfo<span class="hljs-operator">?</span>.adNetworkClassName {
                <span class="hljs-built_in">print</span>(<span class="hljs-string">"  å¡«å……æ¥æº: <span class="hljs-subst">\(adNetwork)</span>"</span>)
            }
        }
    }

    <span class="hljs-comment">/// åœ¨åˆé€‚æ—¶æœºå±•ç¤º</span>
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">showInterstitialAd</span>() {
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> ad <span class="hljs-operator">=</span> interstitialAd {
            ad.present(fromRootViewController: <span class="hljs-keyword">self</span>)
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-built_in">print</span>(<span class="hljs-string">"âš ï¸ å¹¿å‘Šå°šæœªå°±ç»ª"</span>)
        }
    }

    <span class="hljs-comment">// MARK: - GADFullScreenContentDelegate</span>

    <span class="hljs-keyword">func</span> <span class="hljs-title function_">ad</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">ad</span>: <span class="hljs-type">GADFullScreenPresentingAd</span>, <span class="hljs-params">didFailToPresentFullScreenContentWithError</span> <span class="hljs-params">error</span>: <span class="hljs-type">Error</span>) {
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"âŒ å±•ç¤ºå¤±è´¥: <span class="hljs-subst">\(error.localizedDescription)</span>"</span>)
        loadInterstitialAd() <span class="hljs-comment">// é‡æ–°åŠ è½½</span>
    }

    <span class="hljs-keyword">func</span> <span class="hljs-title function_">adDidDismissFullScreenContent</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">ad</span>: <span class="hljs-type">GADFullScreenPresentingAd</span>) {
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"âœ… æ’å±å¹¿å‘Šå·²å…³é—­"</span>)
        loadInterstitialAd() <span class="hljs-comment">// â­ å…³é—­åé¢„åŠ è½½ä¸‹ä¸€ä¸ª</span>
    }

    <span class="hljs-keyword">func</span> <span class="hljs-title function_">adDidRecordImpression</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">ad</span>: <span class="hljs-type">GADFullScreenPresentingAd</span>) {
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"ğŸ‘ï¸ æ’å±å¹¿å‘Šæ›å…‰"</span>)
    }
}
</code></pre>
<h4 data-id="heading-14">2.9 AdMob åå°é…ç½® Meta AN Mediationï¼ˆå…³é”®æ­¥éª¤ï¼‰</h4>
<p>åœ¨ AdMob åå°å®Œæˆä»¥ä¸‹é…ç½®ï¼Œæ‰èƒ½è®© Meta AN å‚ä¸ç«ä»·ï¼š</p>
<h5 data-id="heading-15">æ­¥éª¤ 1ï¼šMeta åå°åˆ›å»ºå¹¿å‘Šä½</h5>
<ol>
<li>ç™»å½• <a href="https://link.juejin.cn?target=https%3A%2F%2Fbusiness.facebook.com%2Fpub%2Fstart" target="_blank" title="https://business.facebook.com/pub/start" ref="nofollow noopener noreferrer">Meta Business Suite â†’ Monetization Manager</a></li>
<li>åˆ›å»º Property â†’ é€‰æ‹© iOS å¹³å°</li>
<li><strong>Mediation Platform é€‰æ‹© "AdMob"</strong></li>
<li>ä¸ºæ¯ç§æ ¼å¼ï¼ˆBanner / Interstitial / Rewardedï¼‰åˆ›å»º Placement</li>
<li><strong>è®°å½•æ¯ä¸ª Placement ID</strong>ï¼ˆæ ¼å¼å¦‚ <code>123456789_987654321</code>ï¼‰</li>
</ol>
<h5 data-id="heading-16">æ­¥éª¤ 2ï¼šAdMob åå°æ·»åŠ  Meta ç«ä»·</h5>
<ol>
<li>ç™»å½• <a href="https://link.juejin.cn?target=https%3A%2F%2Fapps.admob.com%2F" target="_blank" title="https://apps.admob.com/" ref="nofollow noopener noreferrer">AdMob Console</a></li>
<li>å¯¼èˆªåˆ° <strong>Mediation â†’ Mediation Groups</strong></li>
<li>åˆ›å»ºæˆ–ç¼–è¾‘ä¸€ä¸ª Mediation Group</li>
<li>åœ¨ <strong>Bidding</strong> åŒºåŸŸï¼Œç‚¹å‡» <strong>Add Ad Sources â†’ Meta Audience Network</strong></li>
<li>è¾“å…¥ Meta çš„ <strong>Placement ID</strong></li>
<li>ä¿å­˜</li>
</ol>
<blockquote>
<p>ğŸ’¡ AdMob ä¼šè‡ªåŠ¨ä¸ Meta è¿›è¡Œå®æ—¶ç«ä»·ï¼ˆBiddingï¼‰ï¼Œ<strong>ä¸éœ€è¦è®¾ç½® eCPM æ‰‹åŠ¨æ’åº</strong></p>
</blockquote>
<h5 data-id="heading-17">æ­¥éª¤ 3ï¼šé…ç½® app-ads.txt</h5>
<p>åœ¨æ‚¨çš„å¼€å‘è€…ç½‘ç«™æ ¹ç›®å½•æ·»åŠ  <code>app-ads.txt</code> æ–‡ä»¶ï¼ŒåŒ…å« AdMob å’Œ Meta çš„æˆæƒè¡Œï¼š</p>
<pre><code class="hljs language-text" lang="text"># Google AdMob
google.com, pub-xxxxxxxxxxxxxxxx, DIRECT, f08c47fec0942fa0

# Meta Audience Network
facebook.com, xxxxxxxxxxxxxxxxx, RESELLER, c3e20eee3f780d68
</code></pre>
<hr/>
<h3 data-id="heading-18">ä¸‰ã€æ–¹æ¡ˆäºŒï¼šAppLovin MAX èšåˆï¼ˆç‹¬ç«‹èšåˆå¹³å°ï¼‰</h3>
<blockquote>
<p><strong>æ ¸å¿ƒæ€è·¯ï¼š</strong> MAX ä½œä¸ºç‹¬ç«‹èšåˆï¼ŒAdMob å’Œ Meta AN åŒä¸ºç«ä»·å‚ä¸è€…ï¼Œæ›´åŠ å…¬å¹³é€æ˜å¥½çš„ï¼Œå·²ç»è·å–åˆ°äº†æ‰€æœ‰éœ€è¦çš„ä¿¡æ¯ã€‚ä»¥ä¸‹æ˜¯å®Œæ•´çš„åç»­å†…å®¹ï¼š</p>
</blockquote>
<hr/>
<h4 data-id="heading-19">3.1 CocoaPods å®‰è£…</h4>
<pre><code class="hljs language-ruby" lang="ruby">platform <span class="hljs-symbol">:ios</span>, <span class="hljs-string">'13.0'</span>

target <span class="hljs-string">'YourApp'</span> <span class="hljs-keyword">do</span>
  use_frameworks!
  inhibit_all_warnings!

  <span class="hljs-comment"># â‘  AppLovin MAX SDKï¼ˆèšåˆä¸»ä½“ï¼‰</span>
  pod <span class="hljs-string">'AppLovinSDK'</span>

  <span class="hljs-comment"># â‘¡ Google AdMob é€‚é…å™¨ï¼ˆè‡ªåŠ¨åŒ…å« Google Mobile Ads SDKï¼‰</span>
  pod <span class="hljs-string">'AppLovinMediationGoogleAdapter'</span>

  <span class="hljs-comment"># â‘¢ Meta Audience Network é€‚é…å™¨ï¼ˆè‡ªåŠ¨åŒ…å« FBAudienceNetwork SDKï¼‰</span>
  pod <span class="hljs-string">'AppLovinMediationFacebookAdapter'</span>
<span class="hljs-keyword">end</span>
</code></pre>
<pre><code class="hljs language-bash" lang="bash">pod install --repo-update
</code></pre>
<blockquote>
<p>ğŸ’¡ <strong>åªéœ€å®‰è£…é€‚é…å™¨ Podï¼Œå®ƒä»¬ä¼šè‡ªåŠ¨æ‹‰å–å¯¹åº”çš„å¹¿å‘Šç½‘ç»œ SDK</strong></p>
</blockquote>
<h4 data-id="heading-20">3.2 Info.plist é…ç½®</h4>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- â‘  AppLovin SDK Key --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">key</span>&gt;</span>AppLovinSdkKey<span class="hljs-tag">&lt;/<span class="hljs-name">key</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">string</span>&gt;</span>YOUR_APPLOVIN_SDK_KEY<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span>

<span class="hljs-comment">&lt;!-- â‘¡ AdMob App IDï¼ˆGoogle Adapter éœ€è¦ï¼‰ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">key</span>&gt;</span>GADApplicationIdentifier<span class="hljs-tag">&lt;/<span class="hljs-name">key</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">string</span>&gt;</span>ca-app-pub-xxxxxxxxxxxxxxxx~yyyyyyyyyy<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span>

<span class="hljs-comment">&lt;!-- â‘¢ ATT æƒé™æè¿° --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">key</span>&gt;</span>NSUserTrackingUsageDescription<span class="hljs-tag">&lt;/<span class="hljs-name">key</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">string</span>&gt;</span>æ­¤æ ‡è¯†ç¬¦å°†ç”¨äºå‘æ‚¨æŠ•æ”¾ä¸ªæ€§åŒ–å¹¿å‘Š<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span>

<span class="hljs-comment">&lt;!-- â‘£ SKAdNetwork æ ‡è¯†ç¬¦ï¼ˆAppLovin + Google + Meta éƒ½éœ€è¦ï¼‰ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">key</span>&gt;</span>SKAdNetworkItems<span class="hljs-tag">&lt;/<span class="hljs-name">key</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">array</span>&gt;</span>
  <span class="hljs-comment">&lt;!-- AppLovin --&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">dict</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">key</span>&gt;</span>SKAdNetworkIdentifier<span class="hljs-tag">&lt;/<span class="hljs-name">key</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">string</span>&gt;</span>ludvb6z3bs.skadnetwork<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">dict</span>&gt;</span>
  <span class="hljs-comment">&lt;!-- Google --&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">dict</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">key</span>&gt;</span>SKAdNetworkIdentifier<span class="hljs-tag">&lt;/<span class="hljs-name">key</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">string</span>&gt;</span>cstr6suwn9.skadnetwork<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">dict</span>&gt;</span>
  <span class="hljs-comment">&lt;!-- Meta --&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">dict</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">key</span>&gt;</span>SKAdNetworkIdentifier<span class="hljs-tag">&lt;/<span class="hljs-name">key</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">string</span>&gt;</span>v9wttpbfk9.skadnetwork<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">dict</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">dict</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">key</span>&gt;</span>SKAdNetworkIdentifier<span class="hljs-tag">&lt;/<span class="hljs-name">key</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">string</span>&gt;</span>n38lu8286q.skadnetwork<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">dict</span>&gt;</span>
  <span class="hljs-comment">&lt;!-- ... å®Œæ•´åˆ—è¡¨ä»å„å¹³å°æ–‡æ¡£è·å– --&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">array</span>&gt;</span>
</code></pre>
<h4 data-id="heading-21">3.3 SDK åˆå§‹åŒ–</h4>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">import</span> UIKit
<span class="hljs-keyword">import</span> AppLovinSDK
<span class="hljs-keyword">import</span> FBAudienceNetwork
<span class="hljs-keyword">import</span> AppTrackingTransparency

<span class="hljs-keyword">@main</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">AppDelegate</span>: <span class="hljs-title class_">UIResponder</span>, <span class="hljs-title class_">UIApplicationDelegate</span> {

    <span class="hljs-keyword">func</span> <span class="hljs-title function_">application</span>(
        <span class="hljs-keyword">_</span> <span class="hljs-params">application</span>: <span class="hljs-type">UIApplication</span>,
        <span class="hljs-params">didFinishLaunchingWithOptions</span> <span class="hljs-params">launchOptions</span>: [<span class="hljs-type">UIApplication</span>.<span class="hljs-params">LaunchOptionsKey</span>: <span class="hljs-keyword">Any</span>]<span class="hljs-operator">?</span>
    ) -&gt; <span class="hljs-type">Bool</span> {

        <span class="hljs-comment">// â‘  è¯·æ±‚ ATT æƒé™ï¼ˆå»¶è¿Ÿåˆ°é¦–é¡µæ›´å¥½ï¼Œæ­¤å¤„ç®€åŒ–æ¼”ç¤ºï¼‰</span>
        <span class="hljs-type">DispatchQueue</span>.main.asyncAfter(deadline: .now() <span class="hljs-operator">+</span> <span class="hljs-number">1.0</span>) {
            <span class="hljs-keyword">self</span>.requestATTAndInitialize()
        }

        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">requestATTAndInitialize</span>() {
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">#available</span>(<span class="hljs-keyword">iOS</span> <span class="hljs-number">14.5</span>, <span class="hljs-operator">*</span>) {
            <span class="hljs-type">ATTrackingManager</span>.requestTrackingAuthorization { [<span class="hljs-keyword">weak</span> <span class="hljs-keyword">self</span>] status <span class="hljs-keyword">in</span>
                <span class="hljs-type">DispatchQueue</span>.main.async {
                    <span class="hljs-comment">// â‘¡ è®¾ç½® Meta ATE æ ‡å¿—</span>
                    <span class="hljs-keyword">switch</span> status {
                    <span class="hljs-keyword">case</span> .authorized:
                        <span class="hljs-type">FBAdSettings</span>.setAdvertiserTrackingEnabled(<span class="hljs-literal">true</span>)
                    <span class="hljs-keyword">default</span>:
                        <span class="hljs-type">FBAdSettings</span>.setAdvertiserTrackingEnabled(<span class="hljs-literal">false</span>)
                    }

                    <span class="hljs-comment">// â‘¢ åˆå§‹åŒ– AppLovin MAX SDK</span>
                    <span class="hljs-keyword">self</span><span class="hljs-operator">?</span>.initializeMAX()
                }
            }
        } <span class="hljs-keyword">else</span> {
            initializeMAX()
        }
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">initializeMAX</span>() {
        <span class="hljs-comment">// SDK Key å¯åœ¨ AppLovin Dashboard â†’ Account â†’ General â†’ Keys æ‰¾åˆ°</span>
        <span class="hljs-keyword">let</span> initConfig <span class="hljs-operator">=</span> <span class="hljs-type">ALSdkInitializationConfiguration</span>(sdkKey: <span class="hljs-string">"YOUR_SDK_KEY"</span>) { builder <span class="hljs-keyword">in</span>
            builder.mediationProvider <span class="hljs-operator">=</span> <span class="hljs-type">ALMediationProviderMAX</span>

            <span class="hljs-comment">// ï¼ˆå¯é€‰ï¼‰å¦‚æœéœ€è¦æµ‹è¯•ç‰¹å®šå¹¿å‘Šå•å…ƒ</span>
            <span class="hljs-comment">// builder.testDeviceAdvertisingIdentifiers = ["YOUR_IDFA"]</span>
        }

        <span class="hljs-type">ALSdk</span>.shared().initialize(with: initConfig) { sdkConfig <span class="hljs-keyword">in</span>
            <span class="hljs-built_in">print</span>(<span class="hljs-string">"âœ… AppLovin MAX SDK åˆå§‹åŒ–å®Œæˆ"</span>)
            <span class="hljs-comment">// æ­¤æ—¶å¯ä»¥å¼€å§‹åŠ è½½å¹¿å‘Š</span>
        }
    }
}
</code></pre>
<h4 data-id="heading-22">3.4 Banner å¹¿å‘Š</h4>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">import</span> UIKit
<span class="hljs-keyword">import</span> AppLovinSDK

<span class="hljs-keyword">class</span> <span class="hljs-title class_">MAXBannerViewController</span>: <span class="hljs-title class_">UIViewController</span>, <span class="hljs-title class_">MAAdViewAdDelegate</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> adView: <span class="hljs-type">MAAdView</span>!

    <span class="hljs-keyword">override</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">viewDidLoad</span>() {
        <span class="hljs-keyword">super</span>.viewDidLoad()
        createBannerAd()
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">createBannerAd</span>() {
        <span class="hljs-comment">// Ad Unit ID åœ¨ AppLovin Dashboard â†’ MAX â†’ Ad Units åˆ›å»º</span>
        adView <span class="hljs-operator">=</span> <span class="hljs-type">MAAdView</span>(adUnitIdentifier: <span class="hljs-string">"YOUR_AD_UNIT_ID"</span>)
        adView.delegate <span class="hljs-operator">=</span> <span class="hljs-keyword">self</span>

        <span class="hljs-comment">// Banner å°ºå¯¸ï¼šiPhone 50pt / iPad 90pt</span>
        <span class="hljs-keyword">let</span> height: <span class="hljs-type">CGFloat</span> <span class="hljs-operator">=</span> <span class="hljs-type">UIDevice</span>.current.userInterfaceIdiom <span class="hljs-operator">==</span> .pad <span class="hljs-operator">?</span> <span class="hljs-number">90</span> : <span class="hljs-number">50</span>
        <span class="hljs-keyword">let</span> width: <span class="hljs-type">CGFloat</span> <span class="hljs-operator">=</span> <span class="hljs-type">UIScreen</span>.main.bounds.width

        adView.frame <span class="hljs-operator">=</span> <span class="hljs-type">CGRect</span>(
            x: <span class="hljs-number">0</span>,
            y: view.bounds.height <span class="hljs-operator">-</span> height <span class="hljs-operator">-</span> view.safeAreaInsets.bottom,
            width: width,
            height: height
        )
        adView.backgroundColor <span class="hljs-operator">=</span> .clear

        view.addSubview(adView)

        <span class="hljs-comment">// åŠ è½½å¹¿å‘Šï¼ˆBanner é»˜è®¤è‡ªåŠ¨åˆ·æ–°ï¼‰</span>
        adView.loadAd()
    }

    <span class="hljs-comment">// MARK: - MAAdViewAdDelegate</span>

    <span class="hljs-keyword">func</span> <span class="hljs-title function_">didLoad</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">ad</span>: <span class="hljs-type">MAAd</span>) {
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"âœ… Banner åŠ è½½æˆåŠŸ, æ¥æº: <span class="hljs-subst">\(ad.networkName)</span>"</span>)
        <span class="hljs-comment">// ad.networkName ä¼šæ˜¾ç¤º "Google Bidding and Google AdMob" æˆ– "Meta Audience Network"</span>
    }

    <span class="hljs-keyword">func</span> <span class="hljs-title function_">didFailToLoadAd</span>(<span class="hljs-params">forAdUnitIdentifier</span> <span class="hljs-params">adUnitIdentifier</span>: <span class="hljs-type">String</span>, <span class="hljs-params">withError</span> <span class="hljs-params">error</span>: <span class="hljs-type">MAError</span>) {
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"âŒ Banner åŠ è½½å¤±è´¥: <span class="hljs-subst">\(error.message)</span>"</span>)
    }

    <span class="hljs-keyword">func</span> <span class="hljs-title function_">didClick</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">ad</span>: <span class="hljs-type">MAAd</span>) {
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"ğŸ‘† Banner ç‚¹å‡»"</span>)
    }

    <span class="hljs-keyword">func</span> <span class="hljs-title function_">didFail</span>(<span class="hljs-params">toDisplay</span> <span class="hljs-params">ad</span>: <span class="hljs-type">MAAd</span>, <span class="hljs-params">withError</span> <span class="hljs-params">error</span>: <span class="hljs-type">MAError</span>) {
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"âŒ Banner å±•ç¤ºå¤±è´¥"</span>)
    }

    <span class="hljs-keyword">func</span> <span class="hljs-title function_">didExpand</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">ad</span>: <span class="hljs-type">MAAd</span>) {
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"ğŸ“ Banner å±•å¼€"</span>)
    }

    <span class="hljs-keyword">func</span> <span class="hljs-title function_">didCollapse</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">ad</span>: <span class="hljs-type">MAAd</span>) {
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"ğŸ“ Banner æŠ˜å "</span>)
    }

    <span class="hljs-keyword">deinit</span> {
        adView.delegate <span class="hljs-operator">=</span> <span class="hljs-literal">nil</span>
        adView.removeFromSuperview()
    }
}
</code></pre>
<h4 data-id="heading-23">3.5 Interstitial æ’å±å¹¿å‘Š</h4>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">import</span> UIKit
<span class="hljs-keyword">import</span> AppLovinSDK

<span class="hljs-keyword">class</span> <span class="hljs-title class_">MAXInterstitialViewController</span>: <span class="hljs-title class_">UIViewController</span>, <span class="hljs-title class_">MAAdDelegate</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> interstitialAd: <span class="hljs-type">MAInterstitialAd</span>!
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> retryAttempt <span class="hljs-operator">=</span> <span class="hljs-number">0</span>

    <span class="hljs-keyword">override</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">viewDidLoad</span>() {
        <span class="hljs-keyword">super</span>.viewDidLoad()
        createInterstitialAd()
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">createInterstitialAd</span>() {
        interstitialAd <span class="hljs-operator">=</span> <span class="hljs-type">MAInterstitialAd</span>(adUnitIdentifier: <span class="hljs-string">"YOUR_AD_UNIT_ID"</span>)
        interstitialAd.delegate <span class="hljs-operator">=</span> <span class="hljs-keyword">self</span>
        interstitialAd.load()
    }

    <span class="hljs-comment">/// åœ¨åˆé€‚æ—¶æœºå±•ç¤º</span>
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">showInterstitialAd</span>() {
        <span class="hljs-keyword">if</span> interstitialAd.isReady {
            interstitialAd.show()
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-built_in">print</span>(<span class="hljs-string">"âš ï¸ æ’å±å¹¿å‘Šå°šæœªå°±ç»ª"</span>)
        }
    }

    <span class="hljs-comment">// MARK: - MAAdDelegate</span>

    <span class="hljs-keyword">func</span> <span class="hljs-title function_">didLoad</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">ad</span>: <span class="hljs-type">MAAd</span>) {
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"âœ… æ’å±åŠ è½½æˆåŠŸ, æ¥æº: <span class="hljs-subst">\(ad.networkName)</span>"</span>)
        retryAttempt <span class="hljs-operator">=</span> <span class="hljs-number">0</span>
    }

    <span class="hljs-keyword">func</span> <span class="hljs-title function_">didFailToLoadAd</span>(<span class="hljs-params">forAdUnitIdentifier</span> <span class="hljs-params">adUnitIdentifier</span>: <span class="hljs-type">String</span>, <span class="hljs-params">withError</span> <span class="hljs-params">error</span>: <span class="hljs-type">MAError</span>) {
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"âŒ æ’å±åŠ è½½å¤±è´¥: <span class="hljs-subst">\(error.message)</span>"</span>)

        <span class="hljs-comment">// â­ æŒ‡æ•°é€€é¿é‡è¯•ï¼ˆæœ€å¤§ 64 ç§’ï¼‰</span>
        retryAttempt <span class="hljs-operator">+=</span> <span class="hljs-number">1</span>
        <span class="hljs-keyword">let</span> delaySec <span class="hljs-operator">=</span> pow(<span class="hljs-number">2.0</span>, <span class="hljs-built_in">min</span>(<span class="hljs-number">6.0</span>, <span class="hljs-type">Double</span>(retryAttempt)))
        <span class="hljs-type">DispatchQueue</span>.main.asyncAfter(deadline: .now() <span class="hljs-operator">+</span> delaySec) { [<span class="hljs-keyword">weak</span> <span class="hljs-keyword">self</span>] <span class="hljs-keyword">in</span>
            <span class="hljs-keyword">self</span><span class="hljs-operator">?</span>.interstitialAd.load()
        }
    }

    <span class="hljs-keyword">func</span> <span class="hljs-title function_">didDisplay</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">ad</span>: <span class="hljs-type">MAAd</span>) {
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"ğŸ“º æ’å±å·²å±•ç¤º"</span>)
    }

    <span class="hljs-keyword">func</span> <span class="hljs-title function_">didHide</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">ad</span>: <span class="hljs-type">MAAd</span>) {
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"âœ… æ’å±å·²å…³é—­"</span>)
        <span class="hljs-comment">// â­ å…³é—­åé¢„åŠ è½½ä¸‹ä¸€ä¸ª</span>
        interstitialAd.load()
    }

    <span class="hljs-keyword">func</span> <span class="hljs-title function_">didClick</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">ad</span>: <span class="hljs-type">MAAd</span>) {
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"ğŸ‘† æ’å±è¢«ç‚¹å‡»"</span>)
    }

    <span class="hljs-keyword">func</span> <span class="hljs-title function_">didFail</span>(<span class="hljs-params">toDisplay</span> <span class="hljs-params">ad</span>: <span class="hljs-type">MAAd</span>, <span class="hljs-params">withError</span> <span class="hljs-params">error</span>: <span class="hljs-type">MAError</span>) {
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"âŒ æ’å±å±•ç¤ºå¤±è´¥"</span>)
        interstitialAd.load()
    }
}
</code></pre>
<h4 data-id="heading-24">3.6 Rewarded æ¿€åŠ±è§†é¢‘å¹¿å‘Š</h4>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">import</span> UIKit
<span class="hljs-keyword">import</span> AppLovinSDK

<span class="hljs-keyword">class</span> <span class="hljs-title class_">MAXRewardedViewController</span>: <span class="hljs-title class_">UIViewController</span>, <span class="hljs-title class_">MARewardedAdDelegate</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> rewardedAd: <span class="hljs-type">MARewardedAd</span>!
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> retryAttempt <span class="hljs-operator">=</span> <span class="hljs-number">0</span>

    <span class="hljs-keyword">override</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">viewDidLoad</span>() {
        <span class="hljs-keyword">super</span>.viewDidLoad()
        createRewardedAd()
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">createRewardedAd</span>() {
        rewardedAd <span class="hljs-operator">=</span> <span class="hljs-type">MARewardedAd</span>.shared(withAdUnitIdentifier: <span class="hljs-string">"YOUR_AD_UNIT_ID"</span>)
        rewardedAd.delegate <span class="hljs-operator">=</span> <span class="hljs-keyword">self</span>
        rewardedAd.load()
    }

    <span class="hljs-comment">/// ç”¨æˆ·ä¸»åŠ¨è§¦å‘è§‚çœ‹</span>
    <span class="hljs-keyword">@IBAction</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">watchAdTapped</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">sender</span>: <span class="hljs-type">UIButton</span>) {
        <span class="hljs-keyword">if</span> rewardedAd.isReady {
            rewardedAd.show()
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-built_in">print</span>(<span class="hljs-string">"âš ï¸ æ¿€åŠ±è§†é¢‘å°šæœªå°±ç»ª"</span>)
        }
    }

    <span class="hljs-comment">// MARK: - MAAdDelegate</span>

    <span class="hljs-keyword">func</span> <span class="hljs-title function_">didLoad</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">ad</span>: <span class="hljs-type">MAAd</span>) {
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"âœ… æ¿€åŠ±è§†é¢‘åŠ è½½æˆåŠŸ, æ¥æº: <span class="hljs-subst">\(ad.networkName)</span>"</span>)
        retryAttempt <span class="hljs-operator">=</span> <span class="hljs-number">0</span>
    }

    <span class="hljs-keyword">func</span> <span class="hljs-title function_">didFailToLoadAd</span>(<span class="hljs-params">forAdUnitIdentifier</span> <span class="hljs-params">adUnitIdentifier</span>: <span class="hljs-type">String</span>, <span class="hljs-params">withError</span> <span class="hljs-params">error</span>: <span class="hljs-type">MAError</span>) {
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"âŒ æ¿€åŠ±è§†é¢‘åŠ è½½å¤±è´¥: <span class="hljs-subst">\(error.message)</span>"</span>)

        retryAttempt <span class="hljs-operator">+=</span> <span class="hljs-number">1</span>
        <span class="hljs-keyword">let</span> delaySec <span class="hljs-operator">=</span> pow(<span class="hljs-number">2.0</span>, <span class="hljs-built_in">min</span>(<span class="hljs-number">6.0</span>, <span class="hljs-type">Double</span>(retryAttempt)))
        <span class="hljs-type">DispatchQueue</span>.main.asyncAfter(deadline: .now() <span class="hljs-operator">+</span> delaySec) { [<span class="hljs-keyword">weak</span> <span class="hljs-keyword">self</span>] <span class="hljs-keyword">in</span>
            <span class="hljs-keyword">self</span><span class="hljs-operator">?</span>.rewardedAd.load()
        }
    }

    <span class="hljs-keyword">func</span> <span class="hljs-title function_">didDisplay</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">ad</span>: <span class="hljs-type">MAAd</span>) {
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"ğŸ“º æ¿€åŠ±è§†é¢‘å·²å±•ç¤º"</span>)
    }

    <span class="hljs-keyword">func</span> <span class="hljs-title function_">didHide</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">ad</span>: <span class="hljs-type">MAAd</span>) {
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"âœ… æ¿€åŠ±è§†é¢‘å·²å…³é—­"</span>)
        rewardedAd.load() <span class="hljs-comment">// â­ é¢„åŠ è½½ä¸‹ä¸€ä¸ª</span>
    }

    <span class="hljs-keyword">func</span> <span class="hljs-title function_">didClick</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">ad</span>: <span class="hljs-type">MAAd</span>) {
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"ğŸ‘† æ¿€åŠ±è§†é¢‘è¢«ç‚¹å‡»"</span>)
    }

    <span class="hljs-keyword">func</span> <span class="hljs-title function_">didFail</span>(<span class="hljs-params">toDisplay</span> <span class="hljs-params">ad</span>: <span class="hljs-type">MAAd</span>, <span class="hljs-params">withError</span> <span class="hljs-params">error</span>: <span class="hljs-type">MAError</span>) {
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"âŒ æ¿€åŠ±è§†é¢‘å±•ç¤ºå¤±è´¥"</span>)
        rewardedAd.load()
    }

    <span class="hljs-comment">// MARK: - MARewardedAdDelegate</span>

    <span class="hljs-comment">/// â­ ç”¨æˆ·è§‚çœ‹å®Œæˆï¼Œå‘æ”¾å¥–åŠ±</span>
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">didRewardUser</span>(<span class="hljs-params">for</span> <span class="hljs-params">ad</span>: <span class="hljs-type">MAAd</span>, <span class="hljs-params">with</span> <span class="hljs-params">reward</span>: <span class="hljs-type">MAReward</span>) {
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"ğŸ‰ ç”¨æˆ·è·å¾—å¥–åŠ±: <span class="hljs-subst">\(reward.amount)</span> <span class="hljs-subst">\(reward.label)</span>"</span>)
        grantReward(amount: reward.amount, currency: reward.label)
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">grantReward</span>(<span class="hljs-params">amount</span>: <span class="hljs-type">Int</span>, <span class="hljs-params">currency</span>: <span class="hljs-type">String</span>) {
        <span class="hljs-comment">// å‘æ”¾å¥–åŠ±é€»è¾‘</span>
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"å‘æ”¾ <span class="hljs-subst">\(amount)</span> <span class="hljs-subst">\(currency)</span>"</span>)
    }
}
</code></pre>
<h4 data-id="heading-25">3.7 AppLovin MAX åå°é…ç½®</h4>
<p>åœ¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fdash.applovin.com%2F" target="_blank" title="https://dash.applovin.com/" ref="nofollow noopener noreferrer">AppLovin Dashboard</a> ä¸­å®Œæˆä»¥ä¸‹é…ç½®ï¼š</p>
<h5 data-id="heading-26">æ·»åŠ  AdMob å’Œ Meta AN</h5>
<ol>
<li><strong>MAX â†’ Manage â†’ Ad Units</strong> â†’ åˆ›å»º Ad Unit</li>
<li>é€‰æ‹©æ ¼å¼ï¼ˆBanner / Interstitial / Rewardedï¼‰</li>
<li>åœ¨ <strong>Bidding</strong> åŒºåŸŸå¯ç”¨ï¼š
<ul>
<li><strong>Google Bidding and Google AdMob</strong> â†’ å¡«å…¥ AdMob çš„ <strong>Ad Unit ID</strong></li>
<li><strong>Meta Audience Network</strong> â†’ å¡«å…¥ Meta çš„ <strong>Placement ID</strong></li>
</ul>
</li>
<li>ä¿å­˜</li>
</ol>
<blockquote>
<p>ä¸¤ä¸ªç½‘ç»œéƒ½é€šè¿‡ <strong>å®æ—¶ç«ä»·ï¼ˆBiddingï¼‰</strong> å‚ä¸ï¼ŒMAX ä¼šè‡ªåŠ¨é€‰æ‹©å‡ºä»·æœ€é«˜çš„ç½‘ç»œå±•ç¤ºå¹¿å‘Š</p>
</blockquote>
<hr/>
<h3 data-id="heading-27">å››ã€ä¸¤ç§æ–¹æ¡ˆå¯¹æ¯”</h3>























































<table><thead><tr><th>ç‰¹æ€§</th><th>æ–¹æ¡ˆä¸€ï¼šAdMob Mediation</th><th>æ–¹æ¡ˆäºŒï¼šAppLovin MAX</th></tr></thead><tbody><tr><td><strong>èšåˆä¸»ä½“</strong></td><td>Google AdMob</td><td>AppLovin MAX</td></tr><tr><td><strong>ç«ä»·å…¬å¹³æ€§</strong></td><td>AdMob è‡ªå®¶å¹¿å‘Šå¯èƒ½æœ‰ä¼˜åŠ¿</td><td>æ›´å…¬å¹³é€æ˜ï¼Œæ‰€æœ‰ç½‘ç»œå¹³ç­‰ç«äº‰</td></tr><tr><td><strong>æ¥å…¥å¤æ‚åº¦</strong></td><td>â­ ç®€å•ï¼ˆå·²ç”¨ AdMob çš„é¡¹ç›®ï¼‰</td><td>â­â­ ä¸­ç­‰ï¼ˆéœ€é¢å¤–æ³¨å†Œ AppLovinï¼‰</td></tr><tr><td><strong>æ”¯æŒç½‘ç»œæ•°é‡</strong></td><td>çº¦ 20+</td><td>çº¦ 25+</td></tr><tr><td><strong>æ”¶ç›ŠæŠ¥å‘Š</strong></td><td>AdMob åå°</td><td>AppLovin Dashboardï¼ˆæ›´è¯¦ç»†ï¼‰</td></tr><tr><td><strong>A/B æµ‹è¯•</strong></td><td>æœ‰é™</td><td>å†…ç½®å¼ºå¤§ A/B æµ‹è¯•</td></tr><tr><td><strong>å¹¿å‘Šè´¨é‡å®¡æ ¸</strong></td><td>Google Ad Review</td><td>MAX Ad Review</td></tr><tr><td><strong>è´¹ç”¨</strong></td><td>å…è´¹</td><td>å…è´¹</td></tr><tr><td><strong>æ¨èåœºæ™¯</strong></td><td>å·²æ·±åº¦ä½¿ç”¨ AdMob</td><td>æ–°é¡¹ç›®æˆ–è¿½æ±‚æœ€é«˜æ”¶ç›Š</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-28">äº”ã€æ–¹æ¡ˆä¸‰ï¼šæ‰‹åŠ¨ç®¡ç†ï¼ˆä¸æ¨èä½†å¯è¡Œï¼‰</h3>
<p>å¦‚æœä½ æœ‰ç‰¹æ®ŠåŸå› <strong>ä¸æƒ³ä½¿ç”¨èšåˆå¹³å°</strong>ï¼Œå¯ä»¥æ‰‹åŠ¨ç®¡ç†ä¸¤ä¸ª SDK çš„é™çº§é€»è¾‘ï¼š</p>
<h4 data-id="heading-29">5.1 å®‰è£…ä¸¤ä¸ª SDK</h4>
<pre><code class="hljs language-ruby" lang="ruby">platform <span class="hljs-symbol">:ios</span>, <span class="hljs-string">'13.0'</span>

target <span class="hljs-string">'YourApp'</span> <span class="hljs-keyword">do</span>
  use_frameworks!

  pod <span class="hljs-string">'Google-Mobile-Ads-SDK'</span>   <span class="hljs-comment"># AdMob</span>
  pod <span class="hljs-string">'FBAudienceNetwork'</span>        <span class="hljs-comment"># Meta AN</span>
<span class="hljs-keyword">end</span>
</code></pre>
<h4 data-id="heading-30">5.2 æ‰‹åŠ¨å¹¿å‘Šç®¡ç†å™¨</h4>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">import</span> Foundation
<span class="hljs-keyword">import</span> GoogleMobileAds
<span class="hljs-keyword">import</span> FBAudienceNetwork

<span class="hljs-comment">/// å¹¿å‘Šç®¡ç†å™¨ - æ‰‹åŠ¨èšåˆï¼ˆé™çº§é€»è¾‘ï¼‰</span>
<span class="hljs-comment">/// âš ï¸ ä¸æ¨èï¼šä»…ä½œå­¦ä¹ å‚è€ƒï¼Œç”Ÿäº§ç¯å¢ƒè¯·ç”¨èšåˆå¹³å°</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ManualAdManager</span>: <span class="hljs-title class_">NSObject</span> {

    <span class="hljs-keyword">static</span> <span class="hljs-keyword">let</span> shared <span class="hljs-operator">=</span> <span class="hljs-type">ManualAdManager</span>()

    <span class="hljs-comment">// MARK: - é…ç½®</span>

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">let</span> admobInterstitialUnitID <span class="hljs-operator">=</span> <span class="hljs-string">"ca-app-pub-xxxxx/yyyyy"</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">let</span> metaInterstitialPlacementID <span class="hljs-operator">=</span> <span class="hljs-string">"123456789_987654321"</span>

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">let</span> admobRewardedUnitID <span class="hljs-operator">=</span> <span class="hljs-string">"ca-app-pub-xxxxx/zzzzz"</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">let</span> metaRewardedPlacementID <span class="hljs-operator">=</span> <span class="hljs-string">"123456789_111111111"</span>

    <span class="hljs-comment">// MARK: - å¹¿å‘Šå®ä¾‹</span>

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> admobInterstitial: <span class="hljs-type">GADInterstitialAd</span>?
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> metaInterstitial: <span class="hljs-type">FBInterstitialAd</span>?

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> admobRewarded: <span class="hljs-type">GADRewardedAd</span>?
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> metaRewarded: <span class="hljs-type">FBRewardedVideoAd</span>?

    <span class="hljs-comment">// MARK: - çŠ¶æ€è¿½è¸ª</span>

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> isAdMobInterstitialReady <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> isMetaInterstitialReady <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> isAdMobRewardedReady <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> isMetaRewardedReady <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>

    <span class="hljs-comment">// MARK: - å›è°ƒ</span>

    <span class="hljs-keyword">var</span> onRewardEarned: ((<span class="hljs-keyword">_</span> amount: <span class="hljs-type">Int</span>, <span class="hljs-keyword">_</span> type: <span class="hljs-type">String</span>) -&gt; <span class="hljs-type">Void</span>)<span class="hljs-operator">?</span>
    <span class="hljs-keyword">var</span> onInterstitialDismissed: (() -&gt; <span class="hljs-type">Void</span>)<span class="hljs-operator">?</span>

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">init</span>() {
        <span class="hljs-keyword">super</span>.<span class="hljs-keyword">init</span>()
    }

    <span class="hljs-comment">// MARK: - ==================== æ’å±å¹¿å‘Š ====================</span>

    <span class="hljs-comment">/// åŒæ—¶è¯·æ±‚ä¸¤ä¸ªç½‘ç»œï¼Œè°å…ˆ ready è°å±•ç¤º</span>
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">loadInterstitial</span>() {
        isAdMobInterstitialReady <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>
        isMetaInterstitialReady <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>

        loadAdMobInterstitial()
        loadMetaInterstitial()
    }

    <span class="hljs-comment">// â€”â€” AdMob æ’å± â€”â€”</span>

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">loadAdMobInterstitial</span>() {
        <span class="hljs-type">GADInterstitialAd</span>.load(
            withAdUnitID: admobInterstitialUnitID,
            request: <span class="hljs-type">GADRequest</span>()
        ) { [<span class="hljs-keyword">weak</span> <span class="hljs-keyword">self</span>] ad, error <span class="hljs-keyword">in</span>
            <span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> <span class="hljs-keyword">self</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">self</span> <span class="hljs-keyword">else</span> { <span class="hljs-keyword">return</span> }
            <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> error <span class="hljs-operator">=</span> error {
                <span class="hljs-built_in">print</span>(<span class="hljs-string">"âŒ AdMob æ’å±åŠ è½½å¤±è´¥: <span class="hljs-subst">\(error.localizedDescription)</span>"</span>)
                <span class="hljs-keyword">return</span>
            }
            <span class="hljs-built_in">print</span>(<span class="hljs-string">"âœ… AdMob æ’å±åŠ è½½æˆåŠŸ"</span>)
            <span class="hljs-keyword">self</span>.admobInterstitial <span class="hljs-operator">=</span> ad
            <span class="hljs-keyword">self</span>.admobInterstitial<span class="hljs-operator">?</span>.fullScreenContentDelegate <span class="hljs-operator">=</span> <span class="hljs-keyword">self</span>
            <span class="hljs-keyword">self</span>.isAdMobInterstitialReady <span class="hljs-operator">=</span> <span class="hljs-literal">true</span>
        }
    }

    <span class="hljs-comment">// â€”â€” Meta æ’å± â€”â€”</span>

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">loadMetaInterstitial</span>() {
        metaInterstitial <span class="hljs-operator">=</span> <span class="hljs-type">FBInterstitialAd</span>(placementID: metaInterstitialPlacementID)
        metaInterstitial<span class="hljs-operator">?</span>.delegate <span class="hljs-operator">=</span> <span class="hljs-keyword">self</span>
        metaInterstitial<span class="hljs-operator">?</span>.load()
    }

    <span class="hljs-comment">/// å±•ç¤ºæ’å±ï¼šä¼˜å…ˆ AdMob â†’ é™çº§ Meta â†’ ä¸¤è€…éƒ½æ— åˆ™æ”¾å¼ƒ</span>
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">showInterstitial</span>(<span class="hljs-params">from</span> <span class="hljs-params">viewController</span>: <span class="hljs-type">UIViewController</span>) -&gt; <span class="hljs-type">Bool</span> {
        <span class="hljs-keyword">if</span> isAdMobInterstitialReady, <span class="hljs-keyword">let</span> ad <span class="hljs-operator">=</span> admobInterstitial {
            <span class="hljs-built_in">print</span>(<span class="hljs-string">"ğŸ“º å±•ç¤º AdMob æ’å±"</span>)
            ad.present(fromRootViewController: viewController)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> isMetaInterstitialReady, <span class="hljs-keyword">let</span> ad <span class="hljs-operator">=</span> metaInterstitial, ad.isAdValid {
            <span class="hljs-built_in">print</span>(<span class="hljs-string">"ğŸ“º å±•ç¤º Meta æ’å±"</span>)
            ad.show(fromRootViewController: viewController)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-built_in">print</span>(<span class="hljs-string">"âš ï¸ æ— å¯ç”¨æ’å±å¹¿å‘Š"</span>)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
        }
    }

    <span class="hljs-comment">// MARK: - ==================== æ¿€åŠ±è§†é¢‘ ====================</span>

    <span class="hljs-keyword">func</span> <span class="hljs-title function_">loadRewarded</span>() {
        isAdMobRewardedReady <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>
        isMetaRewardedReady <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>

        loadAdMobRewarded()
        loadMetaRewarded()
    }

    <span class="hljs-comment">// â€”â€” AdMob æ¿€åŠ± â€”â€”</span>

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">loadAdMobRewarded</span>() {
        <span class="hljs-type">GADRewardedAd</span>.load(
            withAdUnitID: admobRewardedUnitID,
            request: <span class="hljs-type">GADRequest</span>()
        ) { [<span class="hljs-keyword">weak</span> <span class="hljs-keyword">self</span>] ad, error <span class="hljs-keyword">in</span>
            <span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> <span class="hljs-keyword">self</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">self</span> <span class="hljs-keyword">else</span> { <span class="hljs-keyword">return</span> }
            <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> error <span class="hljs-operator">=</span> error {
                <span class="hljs-built_in">print</span>(<span class="hljs-string">"âŒ AdMob æ¿€åŠ±åŠ è½½å¤±è´¥: <span class="hljs-subst">\(error.localizedDescription)</span>"</span>)
                <span class="hljs-keyword">return</span>
            }
            <span class="hljs-built_in">print</span>(<span class="hljs-string">"âœ… AdMob æ¿€åŠ±åŠ è½½æˆåŠŸ"</span>)
            <span class="hljs-keyword">self</span>.admobRewarded <span class="hljs-operator">=</span> ad
            <span class="hljs-keyword">self</span>.admobRewarded<span class="hljs-operator">?</span>.fullScreenContentDelegate <span class="hljs-operator">=</span> <span class="hljs-keyword">self</span>
            <span class="hljs-keyword">self</span>.isAdMobRewardedReady <span class="hljs-operator">=</span> <span class="hljs-literal">true</span>
        }
    }

    <span class="hljs-comment">// â€”â€” Meta æ¿€åŠ± â€”â€”</span>

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">loadMetaRewarded</span>() {
        metaRewarded <span class="hljs-operator">=</span> <span class="hljs-type">FBRewardedVideoAd</span>(placementID: metaRewardedPlacementID)
        metaRewarded<span class="hljs-operator">?</span>.delegate <span class="hljs-operator">=</span> <span class="hljs-keyword">self</span>
        metaRewarded<span class="hljs-operator">?</span>.load()
    }

    <span class="hljs-comment">/// å±•ç¤ºæ¿€åŠ±è§†é¢‘ï¼šä¼˜å…ˆ AdMob â†’ é™çº§ Meta</span>
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">showRewarded</span>(<span class="hljs-params">from</span> <span class="hljs-params">viewController</span>: <span class="hljs-type">UIViewController</span>) -&gt; <span class="hljs-type">Bool</span> {
        <span class="hljs-keyword">if</span> isAdMobRewardedReady, <span class="hljs-keyword">let</span> ad <span class="hljs-operator">=</span> admobRewarded {
            <span class="hljs-built_in">print</span>(<span class="hljs-string">"ğŸ“º å±•ç¤º AdMob æ¿€åŠ±è§†é¢‘"</span>)
            ad.present(fromRootViewController: viewController) { [<span class="hljs-keyword">weak</span> <span class="hljs-keyword">self</span>] <span class="hljs-keyword">in</span>
                <span class="hljs-keyword">let</span> reward <span class="hljs-operator">=</span> ad.adReward
                <span class="hljs-built_in">print</span>(<span class="hljs-string">"ğŸ‰ AdMob å¥–åŠ±: <span class="hljs-subst">\(reward.amount)</span> <span class="hljs-subst">\(reward.type)</span>"</span>)
                <span class="hljs-keyword">self</span><span class="hljs-operator">?</span>.onRewardEarned<span class="hljs-operator">?</span>(reward.amount.intValue, reward.type)
            }
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> isMetaRewardedReady, <span class="hljs-keyword">let</span> ad <span class="hljs-operator">=</span> metaRewarded, ad.isAdValid {
            <span class="hljs-built_in">print</span>(<span class="hljs-string">"ğŸ“º å±•ç¤º Meta æ¿€åŠ±è§†é¢‘"</span>)
            ad.show(fromRootViewController: viewController)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-built_in">print</span>(<span class="hljs-string">"âš ï¸ æ— å¯ç”¨æ¿€åŠ±è§†é¢‘"</span>)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
        }
    }

    <span class="hljs-comment">/// æ£€æŸ¥æ˜¯å¦æœ‰å¹¿å‘Šå°±ç»ª</span>
    <span class="hljs-keyword">var</span> isInterstitialReady: <span class="hljs-type">Bool</span> {
        <span class="hljs-keyword">return</span> isAdMobInterstitialReady <span class="hljs-operator">||</span> isMetaInterstitialReady
    }

    <span class="hljs-keyword">var</span> isRewardedReady: <span class="hljs-type">Bool</span> {
        <span class="hljs-keyword">return</span> isAdMobRewardedReady <span class="hljs-operator">||</span> isMetaRewardedReady
    }
}

<span class="hljs-comment">// MARK: - ==================== AdMob Delegate ====================</span>

<span class="hljs-keyword">extension</span> <span class="hljs-title class_">ManualAdManager</span>: <span class="hljs-title class_">GADFullScreenContentDelegate</span> {

    <span class="hljs-keyword">func</span> <span class="hljs-title function_">adDidDismissFullScreenContent</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">ad</span>: <span class="hljs-type">GADFullScreenPresentingAd</span>) {
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"âœ… AdMob å…¨å±å¹¿å‘Šå·²å…³é—­"</span>)
        isAdMobInterstitialReady <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>
        isAdMobRewardedReady <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>
        onInterstitialDismissed<span class="hljs-operator">?</span>()
        <span class="hljs-comment">// é¢„åŠ è½½ä¸‹ä¸€ä¸ª</span>
        loadInterstitial()
        loadRewarded()
    }

    <span class="hljs-keyword">func</span> <span class="hljs-title function_">ad</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">ad</span>: <span class="hljs-type">GADFullScreenPresentingAd</span>, <span class="hljs-params">didFailToPresentFullScreenContentWithError</span> <span class="hljs-params">error</span>: <span class="hljs-type">Error</span>) {
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"âŒ AdMob å±•ç¤ºå¤±è´¥: <span class="hljs-subst">\(error.localizedDescription)</span>"</span>)
    }
}

<span class="hljs-comment">// MARK: - ==================== Meta Interstitial Delegate ====================</span>

<span class="hljs-keyword">extension</span> <span class="hljs-title class_">ManualAdManager</span>: <span class="hljs-title class_">FBInterstitialAdDelegate</span> {

    <span class="hljs-keyword">func</span> <span class="hljs-title function_">interstitialAdDidLoad</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">interstitialAd</span>: <span class="hljs-type">FBInterstitialAd</span>) {
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"âœ… Meta æ’å±åŠ è½½æˆåŠŸ"</span>)
        isMetaInterstitialReady <span class="hljs-operator">=</span> <span class="hljs-literal">true</span>
    }

    <span class="hljs-keyword">func</span> <span class="hljs-title function_">interstitialAd</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">interstitialAd</span>: <span class="hljs-type">FBInterstitialAd</span>, <span class="hljs-params">didFailWithError</span> <span class="hljs-params">error</span>: <span class="hljs-type">Error</span>) {
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"âŒ Meta æ’å±åŠ è½½å¤±è´¥: <span class="hljs-subst">\(error.localizedDescription)</span>"</span>)
        isMetaInterstitialReady <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>
    }

    <span class="hljs-keyword">func</span> <span class="hljs-title function_">interstitialAdDidClose</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">interstitialAd</span>: <span class="hljs-type">FBInterstitialAd</span>) {
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"âœ… Meta æ’å±å·²å…³é—­"</span>)
        isMetaInterstitialReady <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>
        onInterstitialDismissed<span class="hljs-operator">?</span>()
        loadInterstitial()
    }

    <span class="hljs-keyword">func</span> <span class="hljs-title function_">interstitialAdDidClick</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">interstitialAd</span>: <span class="hljs-type">FBInterstitialAd</span>) {
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"ğŸ‘† Meta æ’å±è¢«ç‚¹å‡»"</span>)
    }

    <span class="hljs-keyword">func</span> <span class="hljs-title function_">interstitialAdWillLogImpression</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">interstitialAd</span>: <span class="hljs-type">FBInterstitialAd</span>) {
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"ğŸ‘ï¸ Meta æ’å±æ›å…‰"</span>)
    }
}

<span class="hljs-comment">// MARK: - ==================== Meta Rewarded Delegate ====================</span>

<span class="hljs-keyword">extension</span> <span class="hljs-title class_">ManualAdManager</span>: <span class="hljs-title class_">FBRewardedVideoAdDelegate</span> {

    <span class="hljs-keyword">func</span> <span class="hljs-title function_">rewardedVideoAdDidLoad</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">rewardedVideoAd</span>: <span class="hljs-type">FBRewardedVideoAd</span>) {
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"âœ… Meta æ¿€åŠ±åŠ è½½æˆåŠŸ"</span>)
        isMetaRewardedReady <span class="hljs-operator">=</span> <span class="hljs-literal">true</span>
    }

    <span class="hljs-keyword">func</span> <span class="hljs-title function_">rewardedVideoAd</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">rewardedVideoAd</span>: <span class="hljs-type">FBRewardedVideoAd</span>, <span class="hljs-params">didFailWithError</span> <span class="hljs-params">error</span>: <span class="hljs-type">Error</span>) {
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"âŒ Meta æ¿€åŠ±åŠ è½½å¤±è´¥: <span class="hljs-subst">\(error.localizedDescription)</span>"</span>)
        isMetaRewardedReady <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>
    }

    <span class="hljs-keyword">func</span> <span class="hljs-title function_">rewardedVideoAdDidClose</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">rewardedVideoAd</span>: <span class="hljs-type">FBRewardedVideoAd</span>) {
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"âœ… Meta æ¿€åŠ±è§†é¢‘å·²å…³é—­"</span>)
        isMetaRewardedReady <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>
        loadRewarded()
    }

    <span class="hljs-keyword">func</span> <span class="hljs-title function_">rewardedVideoAdVideoComplete</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">rewardedVideoAd</span>: <span class="hljs-type">FBRewardedVideoAd</span>) {
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"ğŸ‰ Meta æ¿€åŠ±è§†é¢‘è§‚çœ‹å®Œæˆ"</span>)
        <span class="hljs-comment">// Meta ä¸åƒ AdMob é‚£æ ·è¿”å›å…·ä½“å¥–åŠ±ä¿¡æ¯ï¼Œéœ€è¦è‡ªè¡Œå®šä¹‰</span>
        onRewardEarned<span class="hljs-operator">?</span>(<span class="hljs-number">1</span>, <span class="hljs-string">"coin"</span>)
    }

    <span class="hljs-keyword">func</span> <span class="hljs-title function_">rewardedVideoAdDidClick</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">rewardedVideoAd</span>: <span class="hljs-type">FBRewardedVideoAd</span>) {
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"ğŸ‘† Meta æ¿€åŠ±è§†é¢‘è¢«ç‚¹å‡»"</span>)
    }
}
</code></pre>
<h4 data-id="heading-31">5.3 æ‰‹åŠ¨æ–¹æ¡ˆçš„ä½¿ç”¨æ–¹å¼</h4>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">class</span> <span class="hljs-title class_">GameViewController</span>: <span class="hljs-title class_">UIViewController</span> {

    <span class="hljs-keyword">override</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">viewDidLoad</span>() {
        <span class="hljs-keyword">super</span>.viewDidLoad()

        <span class="hljs-comment">// é¢„åŠ è½½å¹¿å‘Š</span>
        <span class="hljs-type">ManualAdManager</span>.shared.loadInterstitial()
        <span class="hljs-type">ManualAdManager</span>.shared.loadRewarded()

        <span class="hljs-comment">// è®¾ç½®å¥–åŠ±å›è°ƒ</span>
        <span class="hljs-type">ManualAdManager</span>.shared.onRewardEarned <span class="hljs-operator">=</span> { amount, type <span class="hljs-keyword">in</span>
            <span class="hljs-built_in">print</span>(<span class="hljs-string">"ğŸ‰ å‘æ”¾å¥–åŠ±: <span class="hljs-subst">\(amount)</span> <span class="hljs-subst">\(type)</span>"</span>)
            <span class="hljs-comment">// æ›´æ–°ç”¨æˆ·ä½™é¢ç­‰</span>
        }
    }

    <span class="hljs-comment">/// å…³å¡ç»“æŸåå±•ç¤ºæ’å±</span>
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">onLevelComplete</span>() {
        <span class="hljs-keyword">_</span> <span class="hljs-operator">=</span> <span class="hljs-type">ManualAdManager</span>.shared.showInterstitial(from: <span class="hljs-keyword">self</span>)
    }

    <span class="hljs-comment">/// ç”¨æˆ·ä¸»åŠ¨è§‚çœ‹æ¿€åŠ±è§†é¢‘</span>
    <span class="hljs-keyword">@IBAction</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">watchAdForReward</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">sender</span>: <span class="hljs-type">UIButton</span>) {
        <span class="hljs-keyword">let</span> shown <span class="hljs-operator">=</span> <span class="hljs-type">ManualAdManager</span>.shared.showRewarded(from: <span class="hljs-keyword">self</span>)
        <span class="hljs-keyword">if</span> <span class="hljs-operator">!</span>shown {
            <span class="hljs-comment">// æç¤ºç”¨æˆ·ç¨åå†è¯•</span>
            showAlert(message: <span class="hljs-string">"å¹¿å‘Šæš‚ä¸å¯ç”¨ï¼Œè¯·ç¨åå†è¯•"</span>)
        }
    }
}
</code></pre>
<blockquote>
<p>âš ï¸ <strong>æ‰‹åŠ¨æ–¹æ¡ˆçš„ç¼ºç‚¹ï¼š</strong></p>
<ul>
<li>æ— æ³•å®ç°çœŸæ­£çš„å®æ—¶ç«ä»·ï¼ˆBiddingï¼‰ï¼Œåªæ˜¯ç®€å•çš„ä¼˜å…ˆçº§é™çº§</li>
<li>éœ€è¦è‡ªå·±ç»´æŠ¤ä¸¤å¥— Delegate</li>
<li>æ— æ³•åŠ¨æ€è°ƒæ•´ä¼˜å…ˆçº§å’Œ eCPM æ’åº</li>
<li>åˆè§„ï¼ˆGDPR/CCPAï¼‰éœ€è¦åˆ†åˆ«å¤„ç†</li>
<li>æ–°å¢å¹¿å‘Šç½‘ç»œæ—¶éœ€è¦å¤§é‡æ”¹ä»£ç </li>
</ul>
</blockquote>
<hr/>
<h3 data-id="heading-32">å…­ã€éšç§åˆè§„å¤„ç†ï¼ˆä¸‰ç§æ–¹æ¡ˆé€šç”¨ï¼‰</h3>
<h4 data-id="heading-33">6.1 Google UMPï¼ˆUser Messaging Platformï¼‰- GDPR åˆè§„</h4>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">import</span> UIKit
<span class="hljs-keyword">import</span> UserMessagingPlatform

<span class="hljs-keyword">class</span> <span class="hljs-title class_">ConsentManager</span> {

    <span class="hljs-keyword">static</span> <span class="hljs-keyword">let</span> shared <span class="hljs-operator">=</span> <span class="hljs-type">ConsentManager</span>()

    <span class="hljs-comment">/// åœ¨ SDK åˆå§‹åŒ–ä¹‹å‰è°ƒç”¨</span>
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">requestConsentIfNeeded</span>(<span class="hljs-params">from</span> <span class="hljs-params">viewController</span>: <span class="hljs-type">UIViewController</span>, <span class="hljs-params">completion</span>: <span class="hljs-keyword">@escaping</span> () -&gt; <span class="hljs-type">Void</span>) {

        <span class="hljs-comment">// â‘  åˆ›å»ºè¯·æ±‚å‚æ•°</span>
        <span class="hljs-keyword">let</span> parameters <span class="hljs-operator">=</span> <span class="hljs-type">UMPRequestParameters</span>()

        <span class="hljs-comment">// è°ƒè¯•æ—¶ä½¿ç”¨ï¼ˆæ­£å¼å‘å¸ƒç§»é™¤ï¼‰</span>
        <span class="hljs-keyword">#if</span> <span class="hljs-type">DEBUG</span>
        <span class="hljs-keyword">let</span> debugSettings <span class="hljs-operator">=</span> <span class="hljs-type">UMPDebugSettings</span>()
        debugSettings.testDeviceIdentifiers <span class="hljs-operator">=</span> [<span class="hljs-string">"YOUR_TEST_DEVICE_HASHED_ID"</span>]
        debugSettings.geography <span class="hljs-operator">=</span> .<span class="hljs-type">EEA</span> <span class="hljs-comment">// æ¨¡æ‹Ÿæ¬§æ´²ç”¨æˆ·</span>
        parameters.debugSettings <span class="hljs-operator">=</span> debugSettings
        <span class="hljs-keyword">#endif</span>

        <span class="hljs-comment">// â‘¡ è¯·æ±‚æ›´æ–°åŒæ„ä¿¡æ¯</span>
        <span class="hljs-type">UMPConsentInformation</span>.sharedInstance.requestConsentInfoUpdate(with: parameters) { error <span class="hljs-keyword">in</span>
            <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> error <span class="hljs-operator">=</span> error {
                <span class="hljs-built_in">print</span>(<span class="hljs-string">"âŒ åŒæ„ä¿¡æ¯æ›´æ–°å¤±è´¥: <span class="hljs-subst">\(error.localizedDescription)</span>"</span>)
                completion()
                <span class="hljs-keyword">return</span>
            }

            <span class="hljs-comment">// â‘¢ å¦‚æœéœ€è¦ï¼Œå±•ç¤ºåŒæ„è¡¨å•</span>
            <span class="hljs-type">UMPConsentForm</span>.loadAndPresentIfRequired(from: viewController) { formError <span class="hljs-keyword">in</span>
                <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> formError <span class="hljs-operator">=</span> formError {
                    <span class="hljs-built_in">print</span>(<span class="hljs-string">"âŒ åŒæ„è¡¨å•å±•ç¤ºå¤±è´¥: <span class="hljs-subst">\(formError.localizedDescription)</span>"</span>)
                }

                <span class="hljs-comment">// â‘£ æ£€æŸ¥æ˜¯å¦å¯ä»¥è¯·æ±‚å¹¿å‘Š</span>
                <span class="hljs-keyword">if</span> <span class="hljs-type">UMPConsentInformation</span>.sharedInstance.canRequestAds {
                    <span class="hljs-built_in">print</span>(<span class="hljs-string">"âœ… ç”¨æˆ·å·²æˆæƒï¼Œå¯ä»¥è¯·æ±‚å¹¿å‘Š"</span>)
                }

                completion()
            }
        }
    }

    <span class="hljs-comment">/// æ£€æŸ¥æ˜¯å¦å¯ä»¥è¯·æ±‚ä¸ªæ€§åŒ–å¹¿å‘Š</span>
    <span class="hljs-keyword">var</span> canRequestAds: <span class="hljs-type">Bool</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-type">UMPConsentInformation</span>.sharedInstance.canRequestAds
    }
}
</code></pre>
<h4 data-id="heading-34">6.2 Meta éšç§åˆè§„è®¾ç½®</h4>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">import</span> FBAudienceNetwork

<span class="hljs-keyword">class</span> <span class="hljs-title class_">MetaPrivacyHelper</span> {

    <span class="hljs-comment">/// è®¾ç½® GDPR æ•°æ®å¤„ç†é€‰é¡¹ï¼ˆæ¬§æ´²ç”¨æˆ·ï¼‰</span>
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">setGDPRConsent</span>(<span class="hljs-params">granted</span>: <span class="hljs-type">Bool</span>) {
        <span class="hljs-comment">// Meta ä¸åœ¨ IAB GVL ä¸­ï¼Œéœ€è¦ä½¿ç”¨ Additional Consent</span>
        <span class="hljs-comment">// å¦‚æœç”¨æˆ·æœªåŒæ„ï¼Œåº”å½“é™åˆ¶æ•°æ®ä½¿ç”¨</span>
        <span class="hljs-keyword">if</span> <span class="hljs-operator">!</span>granted {
            <span class="hljs-comment">// é™åˆ¶æ•°æ®å¤„ç†</span>
            <span class="hljs-type">FBAdSettings</span>.setDataProcessingOptions([<span class="hljs-string">"LDU"</span>], country: <span class="hljs-number">0</span>, state: <span class="hljs-number">0</span>)
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-comment">// ä¸é™åˆ¶</span>
            <span class="hljs-type">FBAdSettings</span>.setDataProcessingOptions([])
        }
    }

    <span class="hljs-comment">/// è®¾ç½® CCPA æ•°æ®å¤„ç†é€‰é¡¹ï¼ˆåŠ å·ç”¨æˆ·ï¼‰</span>
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">setCCPAOptOut</span>(<span class="hljs-params">optedOut</span>: <span class="hljs-type">Bool</span>) {
        <span class="hljs-keyword">if</span> optedOut {
            <span class="hljs-comment">// ç”¨æˆ·é€‰æ‹©é€€å‡ºæ•°æ®å”®å–</span>
            <span class="hljs-type">FBAdSettings</span>.setDataProcessingOptions([<span class="hljs-string">"LDU"</span>], country: <span class="hljs-number">1</span>, state: <span class="hljs-number">1000</span>)
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-type">FBAdSettings</span>.setDataProcessingOptions([])
        }
    }

    <span class="hljs-comment">/// è®¾ç½® iOS 14+ å¹¿å‘Šè¿½è¸ªçŠ¶æ€</span>
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">setAdvertiserTracking</span>(<span class="hljs-params">enabled</span>: <span class="hljs-type">Bool</span>) {
        <span class="hljs-type">FBAdSettings</span>.setAdvertiserTrackingEnabled(enabled)
    }
}
</code></pre>
<h4 data-id="heading-35">6.3 å®Œæ•´çš„åˆå§‹åŒ–æµç¨‹ï¼ˆåˆè§„ â†’ ATT â†’ å¹¿å‘Š SDKï¼‰</h4>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">import</span> UIKit
<span class="hljs-keyword">import</span> GoogleMobileAds
<span class="hljs-keyword">import</span> FBAudienceNetwork
<span class="hljs-keyword">import</span> AppTrackingTransparency
<span class="hljs-keyword">import</span> UserMessagingPlatform

<span class="hljs-keyword">class</span> <span class="hljs-title class_">AppStartupManager</span> {

    <span class="hljs-keyword">static</span> <span class="hljs-keyword">let</span> shared <span class="hljs-operator">=</span> <span class="hljs-type">AppStartupManager</span>()
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> isAdsInitialized <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>

    <span class="hljs-comment">/// å®Œæ•´çš„å¹¿å‘Šåˆå§‹åŒ–æµç¨‹ï¼šGDPR â†’ ATT â†’ Meta ATE â†’ SDK åˆå§‹åŒ–</span>
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">startAdInitialization</span>(<span class="hljs-params">from</span> <span class="hljs-params">viewController</span>: <span class="hljs-type">UIViewController</span>) {
        
        <span class="hljs-comment">// ==================== ç¬¬ 1 æ­¥ï¼šGDPR åŒæ„ ====================</span>
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"ğŸ“‹ Step 1: è¯·æ±‚ GDPR åŒæ„..."</span>)
        
        <span class="hljs-type">ConsentManager</span>.shared.requestConsentIfNeeded(from: viewController) { [<span class="hljs-keyword">weak</span> <span class="hljs-keyword">self</span>] <span class="hljs-keyword">in</span>
            <span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> <span class="hljs-keyword">self</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">self</span> <span class="hljs-keyword">else</span> { <span class="hljs-keyword">return</span> }
            
            <span class="hljs-comment">// ==================== ç¬¬ 2 æ­¥ï¼šATT æƒé™ ====================</span>
            <span class="hljs-built_in">print</span>(<span class="hljs-string">"ğŸ“‹ Step 2: è¯·æ±‚ ATT æƒé™..."</span>)
            
            <span class="hljs-keyword">self</span>.requestATTPermission { trackingAuthorized <span class="hljs-keyword">in</span>
                
                <span class="hljs-comment">// ==================== ç¬¬ 3 æ­¥ï¼šé…ç½® Meta éšç§ ====================</span>
                <span class="hljs-built_in">print</span>(<span class="hljs-string">"ğŸ“‹ Step 3: é…ç½® Meta éšç§è®¾ç½®..."</span>)
                
                <span class="hljs-type">FBAdSettings</span>.setAdvertiserTrackingEnabled(trackingAuthorized)
                
                <span class="hljs-comment">// å¦‚æœ GDPR åŒæ„ä¿¡æ¯å¯ç”¨ï¼Œé…ç½® Meta æ•°æ®å¤„ç†é€‰é¡¹</span>
                <span class="hljs-keyword">if</span> <span class="hljs-type">ConsentManager</span>.shared.canRequestAds {
                    <span class="hljs-type">FBAdSettings</span>.setDataProcessingOptions([])
                } <span class="hljs-keyword">else</span> {
                    <span class="hljs-type">FBAdSettings</span>.setDataProcessingOptions([<span class="hljs-string">"LDU"</span>], country: <span class="hljs-number">0</span>, state: <span class="hljs-number">0</span>)
                }
                
                <span class="hljs-comment">// ==================== ç¬¬ 4 æ­¥ï¼šåˆå§‹åŒ–å¹¿å‘Š SDK ====================</span>
                <span class="hljs-built_in">print</span>(<span class="hljs-string">"ğŸ“‹ Step 4: åˆå§‹åŒ–å¹¿å‘Š SDK..."</span>)
                
                <span class="hljs-keyword">self</span>.initializeAdSDK()
            }
        }
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">requestATTPermission</span>(<span class="hljs-params">completion</span>: <span class="hljs-keyword">@escaping</span> (<span class="hljs-type">Bool</span>) -&gt; <span class="hljs-type">Void</span>) {
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">#available</span>(<span class="hljs-keyword">iOS</span> <span class="hljs-number">14.5</span>, <span class="hljs-operator">*</span>) {
            <span class="hljs-type">ATTrackingManager</span>.requestTrackingAuthorization { status <span class="hljs-keyword">in</span>
                <span class="hljs-type">DispatchQueue</span>.main.async {
                    <span class="hljs-keyword">let</span> authorized <span class="hljs-operator">=</span> (status <span class="hljs-operator">==</span> .authorized)
                    <span class="hljs-built_in">print</span>(<span class="hljs-string">"  ATT çŠ¶æ€: <span class="hljs-subst">\(status.rawValue)</span>, å·²æˆæƒ: <span class="hljs-subst">\(authorized)</span>"</span>)
                    completion(authorized)
                }
            }
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-comment">// iOS 14.5 ä»¥ä¸‹é»˜è®¤å¯è¿½è¸ª</span>
            completion(<span class="hljs-literal">true</span>)
        }
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">initializeAdSDK</span>() {
        <span class="hljs-keyword">guard</span> <span class="hljs-operator">!</span>isAdsInitialized <span class="hljs-keyword">else</span> { <span class="hljs-keyword">return</span> }
        isAdsInitialized <span class="hljs-operator">=</span> <span class="hljs-literal">true</span>
        
        <span class="hljs-comment">// ====== æ–¹æ¡ˆä¸€ï¼šä½¿ç”¨ AdMob Mediation ======</span>
        <span class="hljs-type">GADMobileAds</span>.sharedInstance().start { status <span class="hljs-keyword">in</span>
            <span class="hljs-built_in">print</span>(<span class="hljs-string">"âœ… AdMob SDK åˆå§‹åŒ–å®Œæˆ"</span>)
            
            <span class="hljs-keyword">for</span> (adapter, adapterStatus) <span class="hljs-keyword">in</span> status.adapterStatusesByClassName {
                <span class="hljs-built_in">print</span>(<span class="hljs-string">"  [<span class="hljs-subst">\(adapter)</span>] state=<span class="hljs-subst">\(adapterStatus.state.rawValue)</span>, <span class="hljs-subst">\(adapterStatus.description)</span>"</span>)
            }
            
            <span class="hljs-comment">// åˆå§‹åŒ–å®Œæˆï¼Œå‘é€é€šçŸ¥è®©å„é¡µé¢å¼€å§‹åŠ è½½å¹¿å‘Š</span>
            <span class="hljs-type">NotificationCenter</span>.default.post(name: .adsSDKInitialized, object: <span class="hljs-literal">nil</span>)
        }
        
        <span class="hljs-comment">// ====== æ–¹æ¡ˆäºŒï¼ˆæ›¿ä»£ï¼‰ï¼šä½¿ç”¨ AppLovin MAX ======</span>
        <span class="hljs-comment">/*
        let initConfig = ALSdkInitializationConfiguration(sdkKey: "YOUR_SDK_KEY") { builder in
            builder.mediationProvider = ALMediationProviderMAX
        }
        ALSdk.shared().initialize(with: initConfig) { sdkConfig in
            print("âœ… AppLovin MAX SDK åˆå§‹åŒ–å®Œæˆ")
            NotificationCenter.default.post(name: .adsSDKInitialized, object: nil)
        }
        */</span>
    }
}

<span class="hljs-comment">// MARK: - è‡ªå®šä¹‰é€šçŸ¥å</span>

<span class="hljs-keyword">extension</span> <span class="hljs-title class_">Notification</span>.<span class="hljs-title class_">Name</span> {
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">let</span> adsSDKInitialized <span class="hljs-operator">=</span> <span class="hljs-type">Notification</span>.<span class="hljs-type">Name</span>(<span class="hljs-string">"adsSDKInitialized"</span>)
}
</code></pre>
<h4 data-id="heading-36">6.4 åœ¨ AppDelegate / SceneDelegate ä¸­è°ƒç”¨</h4>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// SceneDelegate.swift</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">SceneDelegate</span>: <span class="hljs-title class_">UIResponder</span>, <span class="hljs-title class_">UIWindowSceneDelegate</span> {
    
    <span class="hljs-keyword">var</span> window: <span class="hljs-type">UIWindow</span>?
    
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">scene</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">scene</span>: <span class="hljs-type">UIScene</span>, <span class="hljs-params">willConnectTo</span> <span class="hljs-params">session</span>: <span class="hljs-type">UISceneSession</span>, <span class="hljs-params">options</span> <span class="hljs-params">connectionOptions</span>: <span class="hljs-type">UIScene</span>.<span class="hljs-type">ConnectionOptions</span>) {
        <span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> windowScene <span class="hljs-operator">=</span> scene <span class="hljs-keyword">as?</span> <span class="hljs-type">UIWindowScene</span> <span class="hljs-keyword">else</span> { <span class="hljs-keyword">return</span> }
        
        <span class="hljs-keyword">let</span> window <span class="hljs-operator">=</span> <span class="hljs-type">UIWindow</span>(windowScene: windowScene)
        <span class="hljs-keyword">let</span> rootVC <span class="hljs-operator">=</span> <span class="hljs-type">MainViewController</span>()
        window.rootViewController <span class="hljs-operator">=</span> <span class="hljs-type">UINavigationController</span>(rootViewController: rootVC)
        window.makeKeyAndVisible()
        <span class="hljs-keyword">self</span>.window <span class="hljs-operator">=</span> window
    }
}

<span class="hljs-comment">// MainViewController.swift</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MainViewController</span>: <span class="hljs-title class_">UIViewController</span> {
    
    <span class="hljs-keyword">override</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">viewDidAppear</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">animated</span>: <span class="hljs-type">Bool</span>) {
        <span class="hljs-keyword">super</span>.viewDidAppear(animated)
        
        <span class="hljs-comment">// â­ åœ¨ä¸»é¡µé¢æ˜¾ç¤ºåå¯åŠ¨å¹¿å‘Šåˆå§‹åŒ–æµç¨‹</span>
        <span class="hljs-comment">// è¿™æ · GDPR å¼¹çª—å’Œ ATT å¼¹çª—èƒ½æ­£å¸¸å±•ç¤º</span>
        <span class="hljs-type">AppStartupManager</span>.shared.startAdInitialization(from: <span class="hljs-keyword">self</span>)
        
        <span class="hljs-comment">// ç›‘å¬ SDK åˆå§‹åŒ–å®Œæˆ</span>
        <span class="hljs-type">NotificationCenter</span>.default.addObserver(
            <span class="hljs-keyword">self</span>,
            selector: <span class="hljs-keyword">#selector</span>(onAdsReady),
            name: .adsSDKInitialized,
            object: <span class="hljs-literal">nil</span>
        )
    }
    
    <span class="hljs-keyword">@objc</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">onAdsReady</span>() {
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"ğŸš€ å¹¿å‘Š SDK å·²å°±ç»ªï¼Œå¼€å§‹åŠ è½½å¹¿å‘Š"</span>)
        <span class="hljs-comment">// åœ¨è¿™é‡ŒåŠ è½½å„ç§å¹¿å‘Š</span>
    }
}
</code></pre>
<hr/>
<h3 data-id="heading-37">ä¸ƒã€æµ‹è¯•å’Œè°ƒè¯•</h3>
<h4 data-id="heading-38">7.1 AdMob æµ‹è¯•å¹¿å‘Š ID</h4>
<p>åœ¨å¼€å‘é˜¶æ®µï¼Œä½¿ç”¨ Google æä¾›çš„å®˜æ–¹æµ‹è¯• IDï¼Œ<strong>ä¸è¦ä½¿ç”¨çœŸå®å¹¿å‘Š ID æµ‹è¯•</strong>ï¼ˆä¼šè¢«å°å·ï¼‰ï¼š</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">TestAdUnitIDs</span> {
    <span class="hljs-comment">// Google å®˜æ–¹æµ‹è¯• IDï¼ˆå®‰å…¨ä½¿ç”¨ï¼Œä¸ä¼šè§¦å‘è¿è§„ï¼‰</span>
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">let</span> admobBanner           <span class="hljs-operator">=</span> <span class="hljs-string">"ca-app-pub-3940256099942544/2934735716"</span>
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">let</span> admobInterstitial     <span class="hljs-operator">=</span> <span class="hljs-string">"ca-app-pub-3940256099942544/4411468910"</span>
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">let</span> admobRewarded         <span class="hljs-operator">=</span> <span class="hljs-string">"ca-app-pub-3940256099942544/1712485313"</span>
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">let</span> admobRewardedInterstitial <span class="hljs-operator">=</span> <span class="hljs-string">"ca-app-pub-3940256099942544/6978759866"</span>
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">let</span> admobNative           <span class="hljs-operator">=</span> <span class="hljs-string">"ca-app-pub-3940256099942544/3986624511"</span>
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">let</span> admobAppOpen          <span class="hljs-operator">=</span> <span class="hljs-string">"ca-app-pub-3940256099942544/5575463023"</span>
}
</code></pre>
<h4 data-id="heading-39">7.2 Meta AN æµ‹è¯•æ¨¡å¼</h4>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">#if</span> <span class="hljs-type">DEBUG</span>
<span class="hljs-comment">// æ·»åŠ æµ‹è¯•è®¾å¤‡ï¼ˆè®¾å¤‡ IDFA çš„å“ˆå¸Œå€¼ï¼Œåœ¨æ§åˆ¶å°æ—¥å¿—ä¸­æŸ¥æ‰¾ï¼‰</span>
<span class="hljs-type">FBAdSettings</span>.addTestDevice(<span class="hljs-string">"YOUR_DEVICE_HASH"</span>)

<span class="hljs-comment">// æˆ–è€…å¯ç”¨æ¨¡æ‹Ÿå™¨æµ‹è¯•æ¨¡å¼</span>
<span class="hljs-type">FBAdSettings</span>.addTestDevice(<span class="hljs-type">FBAdSettings</span>.testDeviceHash())

<span class="hljs-comment">// è®¾ç½®æµ‹è¯•å¹¿å‘Šç±»å‹ï¼ˆå¯é€‰ï¼‰</span>
<span class="hljs-comment">// FBAdSettings.setLogLevel(.log)</span>
<span class="hljs-keyword">#endif</span>
</code></pre>
<h4 data-id="heading-40">7.3 AppLovin MAX è°ƒè¯•å·¥å…·</h4>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">#if</span> <span class="hljs-type">DEBUG</span>
<span class="hljs-comment">// æ˜¾ç¤º MAX Mediation Debuggerï¼ˆå¯è§†åŒ–è°ƒè¯•é¢æ¿ï¼‰</span>
<span class="hljs-comment">// æ˜¾ç¤ºæ‰€æœ‰é€‚é…å™¨çŠ¶æ€ã€å¹¿å‘ŠåŠ è½½è®°å½•ç­‰</span>
<span class="hljs-type">ALSdk</span>.shared().showMediationDebugger()
<span class="hljs-keyword">#endif</span>
</code></pre>
<blockquote>
<p>ğŸ’¡ <strong>MAX Mediation Debugger éå¸¸å¼ºå¤§</strong>ï¼Œå¯ä»¥ä¸€ç›®äº†ç„¶çœ‹åˆ°ï¼š</p>
<ul>
<li>å„é€‚é…å™¨æ˜¯å¦æ­£ç¡®åˆå§‹åŒ–</li>
<li>å„ç½‘ç»œçš„ç«ä»·æƒ…å†µ</li>
<li>å¹¿å‘ŠåŠ è½½æˆåŠŸ/å¤±è´¥è¯¦æƒ…</li>
</ul>
</blockquote>
<h4 data-id="heading-41">7.4 å¹¿å‘Šæ¥æºè¿½è¸ªï¼ˆé€šç”¨ï¼‰</h4>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">/// ç»Ÿä¸€çš„å¹¿å‘Šäº‹ä»¶è¿½è¸ªå™¨</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">AdEventTracker</span> {
    
    <span class="hljs-comment">/// è®°å½•å¹¿å‘Šå±•ç¤ºæ¥æº</span>
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">trackImpression</span>(
        <span class="hljs-params">adFormat</span>: <span class="hljs-type">String</span>,       <span class="hljs-comment">// "banner" / "interstitial" / "rewarded"</span>
        <span class="hljs-params">networkName</span>: <span class="hljs-type">String</span>,    <span class="hljs-comment">// "AdMob" / "Meta" / "Google Bidding"</span>
        <span class="hljs-params">revenue</span>: <span class="hljs-type">Double</span>? <span class="hljs-operator">=</span> <span class="hljs-literal">nil</span>, <span class="hljs-comment">// æ”¶ç›Šï¼ˆå¦‚å¯ç”¨ï¼‰</span>
        <span class="hljs-params">adUnitID</span>: <span class="hljs-type">String</span>
    ) {
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"""
        ğŸ“Š å¹¿å‘Šæ›å…‰
          æ ¼å¼: <span class="hljs-subst">\(adFormat)</span>
          æ¥æº: <span class="hljs-subst">\(networkName)</span>
          æ”¶ç›Š: <span class="hljs-subst">\(revenue.map { String(format: <span class="hljs-string">"%.6f"</span>, <span class="hljs-variable">$0</span>) } <span class="hljs-operator">??</span> <span class="hljs-string">"N/A"</span>)</span>
          å¹¿å‘Šå•å…ƒ: <span class="hljs-subst">\(adUnitID)</span>
        """</span>)
        
        <span class="hljs-comment">// å‘é€åˆ°ä½ çš„åˆ†æå¹³å°ï¼ˆFirebase / Amplitude / è‡ªå»ºç­‰ï¼‰</span>
        <span class="hljs-comment">// Analytics.logEvent("ad_impression", parameters: [...])</span>
    }
    
    <span class="hljs-comment">// â€”â€” AdMob è·å–æ”¶ç›Šä¿¡æ¯ â€”â€”</span>
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">trackAdMobRevenue</span>(<span class="hljs-params">ad</span>: <span class="hljs-type">GADFullScreenPresentingAd</span>, <span class="hljs-params">adFormat</span>: <span class="hljs-type">String</span>) {
        <span class="hljs-comment">// AdMob æ”¶ç›Šè¿½è¸ªéœ€è¦é€šè¿‡ paidEventHandler</span>
        <span class="hljs-comment">// åœ¨åŠ è½½æˆåŠŸåè®¾ç½®ï¼š</span>
        <span class="hljs-comment">// ad.paidEventHandler = { value in</span>
        <span class="hljs-comment">//     let revenue = value.value.doubleValue / 1_000_000 // å¾®å•ä½è½¬æ¢</span>
        <span class="hljs-comment">//     trackImpression(adFormat: adFormat, networkName: "AdMob", revenue: revenue, adUnitID: "xxx")</span>
        <span class="hljs-comment">// }</span>
    }
    
    <span class="hljs-comment">// â€”â€” MAX è·å–æ”¶ç›Šä¿¡æ¯ â€”â€”</span>
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">trackMAXRevenue</span>(<span class="hljs-params">ad</span>: <span class="hljs-type">MAAd</span>, <span class="hljs-params">adFormat</span>: <span class="hljs-type">String</span>) {
        <span class="hljs-keyword">let</span> revenue <span class="hljs-operator">=</span> ad.revenue <span class="hljs-comment">// MAX ç›´æ¥æä¾›æ”¶ç›Šå€¼</span>
        <span class="hljs-keyword">let</span> networkName <span class="hljs-operator">=</span> ad.networkName
        trackImpression(
            adFormat: adFormat,
            networkName: networkName,
            revenue: revenue,
            adUnitID: ad.adUnitIdentifier
        )
    }
}
</code></pre>
<h4 data-id="heading-42">7.5 å¸¸è§é—®é¢˜æ’æŸ¥æ¸…å•</h4>


















































<table><thead><tr><th>é—®é¢˜</th><th>å¯èƒ½åŸå› </th><th>è§£å†³æ–¹æ¡ˆ</th></tr></thead><tbody><tr><td>Meta AN å§‹ç»ˆ No Fill</td><td>æœªé€šè¿‡ Meta å®¡æ ¸ / Placement ID é”™è¯¯</td><td>ç¡®è®¤ App å·²åœ¨ Meta Business å®¡æ ¸é€šè¿‡</td></tr><tr><td>AdMob Adapter æœªåˆå§‹åŒ–</td><td><code>GADApplicationIdentifier</code> æœªé…ç½®</td><td>æ£€æŸ¥ Info.plist</td></tr><tr><td>ATT å¼¹çª—ä¸å‡ºç°</td><td>åœ¨ <code>viewDidLoad</code> ä¸­è°ƒç”¨å¤ªæ—©</td><td>æ”¹åˆ° <code>viewDidAppear</code> ä¸­è°ƒç”¨</td></tr><tr><td>æ”¶ç›Šæä½</td><td>ä»…ä¸€ä¸ªç½‘ç»œå‚ä¸ç«äº‰</td><td>æ¥å…¥æ›´å¤šç½‘ç»œï¼ˆBidding ç«äº‰è¶Šå¤šæ”¶ç›Šè¶Šé«˜ï¼‰</td></tr><tr><td>æµ‹è¯•æ—¶å±•ç¤ºçœŸå®å¹¿å‘Š</td><td>æœªæ·»åŠ æµ‹è¯•è®¾å¤‡</td><td>ä½¿ç”¨æµ‹è¯• ID æˆ–æ·»åŠ æµ‹è¯•è®¾å¤‡</td></tr><tr><td>å´©æºƒï¼š<code>GADApplicationIdentifier</code></td><td>AdMob App ID æ ¼å¼é”™è¯¯</td><td>æ ¼å¼åº”ä¸º <code>ca-app-pub-xxxx~yyyy</code></td></tr><tr><td>Meta SDK åˆå§‹åŒ–å¤±è´¥</td><td>iOS Deployment Target &lt; 13.0</td><td>å‡çº§æœ€ä½ç‰ˆæœ¬åˆ° 13.0</td></tr><tr><td>MAX Debugger æ˜¾ç¤ºçº¢è‰²</td><td>é€‚é…å™¨ç‰ˆæœ¬ä¸å…¼å®¹</td><td>æ›´æ–°æ‰€æœ‰ Pod åˆ°æœ€æ–°ç‰ˆæœ¬</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-43">å…«ã€æ”¶ç›Šä¼˜åŒ–æœ€ä½³å®è·µ</h3>
<h4 data-id="heading-44">8.1 å¹¿å‘Šå±•ç¤ºç­–ç•¥</h4>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">/// å¹¿å‘Šé¢‘æ¬¡æ§åˆ¶å™¨</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">AdFrequencyManager</span> {
    
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">let</span> shared <span class="hljs-operator">=</span> <span class="hljs-type">AdFrequencyManager</span>()
    
    <span class="hljs-comment">// é…ç½®</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">let</span> interstitialMinInterval: <span class="hljs-type">TimeInterval</span> <span class="hljs-operator">=</span> <span class="hljs-number">60</span>      <span class="hljs-comment">// æ’å±æœ€å°‘é—´éš” 60 ç§’</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">let</span> maxInterstitialsPerSession <span class="hljs-operator">=</span> <span class="hljs-number">10</span>                  <span class="hljs-comment">// æ¯æ¬¡ä¼šè¯æœ€å¤š 10 ä¸ªæ’å±</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">let</span> rewardedCooldown: <span class="hljs-type">TimeInterval</span> <span class="hljs-operator">=</span> <span class="hljs-number">30</span>              <span class="hljs-comment">// æ¿€åŠ±è§†é¢‘å†·å´ 30 ç§’</span>
    
    <span class="hljs-comment">// çŠ¶æ€</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> lastInterstitialTime: <span class="hljs-type">Date</span>?
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> sessionInterstitialCount <span class="hljs-operator">=</span> <span class="hljs-number">0</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> lastRewardedTime: <span class="hljs-type">Date</span>?
    
    <span class="hljs-comment">/// æ£€æŸ¥æ˜¯å¦å¯ä»¥å±•ç¤ºæ’å±</span>
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">canShowInterstitial</span>() -&gt; <span class="hljs-type">Bool</span> {
        <span class="hljs-comment">// æ£€æŸ¥é¢‘ç‡é™åˆ¶</span>
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> lastTime <span class="hljs-operator">=</span> lastInterstitialTime {
            <span class="hljs-keyword">let</span> elapsed <span class="hljs-operator">=</span> <span class="hljs-type">Date</span>().timeIntervalSince(lastTime)
            <span class="hljs-keyword">if</span> elapsed <span class="hljs-operator">&lt;</span> interstitialMinInterval {
                <span class="hljs-built_in">print</span>(<span class="hljs-string">"â³ æ’å±å†·å´ä¸­ï¼Œè¿˜éœ€ <span class="hljs-subst">\(Int(interstitialMinInterval <span class="hljs-operator">-</span> elapsed))</span> ç§’"</span>)
                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
            }
        }
        
        <span class="hljs-comment">// æ£€æŸ¥ä¼šè¯ä¸Šé™</span>
        <span class="hljs-keyword">if</span> sessionInterstitialCount <span class="hljs-operator">&gt;=</span> maxInterstitialsPerSession {
            <span class="hljs-built_in">print</span>(<span class="hljs-string">"ğŸš« å·²è¾¾åˆ°æœ¬æ¬¡ä¼šè¯æ’å±ä¸Šé™"</span>)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
        }
        
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
    }
    
    <span class="hljs-comment">/// è®°å½•æ’å±å·²å±•ç¤º</span>
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">recordInterstitialShown</span>() {
        lastInterstitialTime <span class="hljs-operator">=</span> <span class="hljs-type">Date</span>()
        sessionInterstitialCount <span class="hljs-operator">+=</span> <span class="hljs-number">1</span>
    }
    
    <span class="hljs-comment">/// æ£€æŸ¥æ˜¯å¦å¯ä»¥å±•ç¤ºæ¿€åŠ±è§†é¢‘</span>
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">canShowRewarded</span>() -&gt; <span class="hljs-type">Bool</span> {
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> lastTime <span class="hljs-operator">=</span> lastRewardedTime {
            <span class="hljs-keyword">let</span> elapsed <span class="hljs-operator">=</span> <span class="hljs-type">Date</span>().timeIntervalSince(lastTime)
            <span class="hljs-keyword">if</span> elapsed <span class="hljs-operator">&lt;</span> rewardedCooldown {
                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
            }
        }
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
    }
    
    <span class="hljs-comment">/// è®°å½•æ¿€åŠ±è§†é¢‘å·²å±•ç¤º</span>
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">recordRewardedShown</span>() {
        lastRewardedTime <span class="hljs-operator">=</span> <span class="hljs-type">Date</span>()
    }
    
    <span class="hljs-comment">/// é‡ç½®ä¼šè¯è®¡æ•°ï¼ˆApp å¯åŠ¨æˆ–ä»åå°æ¢å¤æ—¶è°ƒç”¨ï¼‰</span>
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">resetSession</span>() {
        sessionInterstitialCount <span class="hljs-operator">=</span> <span class="hljs-number">0</span>
    }
}
</code></pre>
<h4 data-id="heading-45">8.2 æ”¶ç›Šä¼˜åŒ–æ¸…å•</h4>













































<table><thead><tr><th>ä¼˜åŒ–é¡¹</th><th>è¯´æ˜</th><th>é¢„æœŸæ•ˆæœ</th></tr></thead><tbody><tr><td><strong>æ¥å…¥ 3+ ä¸ª Bidding ç½‘ç»œ</strong></td><td>ç«äº‰è¶Šå¤šå‡ºä»·è¶Šé«˜</td><td>eCPM æå‡ 20~50%</td></tr><tr><td><strong>ä½¿ç”¨å®æ—¶ç«ä»·</strong></td><td>ä¼˜äºä¼ ç»Ÿ Waterfall</td><td>eCPM æå‡ 10~30%</td></tr><tr><td><strong>åˆç†æ§åˆ¶é¢‘æ¬¡</strong></td><td>é¿å…ç”¨æˆ·ç–²åŠ³å’Œæ”¿ç­–è¿è§„</td><td>é•¿æœŸæ”¶ç›Šç¨³å®š</td></tr><tr><td><strong>é¢„åŠ è½½å¹¿å‘Š</strong></td><td>å…³é—­åç«‹å³é¢„åŠ è½½ä¸‹ä¸€ä¸ª</td><td>å¡«å……ç‡æ¥è¿‘ 100%</td></tr><tr><td><strong>ATT ä¼˜åŒ–å¼¹çª—æ–‡æ¡ˆ</strong></td><td>æé«˜æˆæƒç‡ â†’ ä¸ªæ€§åŒ–å¹¿å‘Šæ”¶ç›Šæ›´é«˜</td><td>eCPM æå‡ 15~30%</td></tr><tr><td><strong>Banner è‡ªé€‚åº”å°ºå¯¸</strong></td><td>ä½¿ç”¨ Adaptive Banner æ›¿ä»£å›ºå®šå°ºå¯¸</td><td>eCPM æå‡ 10~20%</td></tr><tr><td><strong>å®šæœŸæ›´æ–° SDK</strong></td><td>å„ç½‘ç»œæŒç»­ä¼˜åŒ–ç«ä»·ç®—æ³•</td><td>æŒç»­æ”¶ç›Šæ”¹å–„</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-46">ä¹ã€é¡¹ç›®æ–‡ä»¶ç»“æ„å»ºè®®</h3>
<pre><code class="hljs language-arduino" lang="arduino">YourApp/
â”œâ”€â”€ Podfile
â”œâ”€â”€ Info.plist
â”œâ”€â”€ AppDelegate.swift
â”œâ”€â”€ SceneDelegate.swift
â”‚
â”œâ”€â”€ Ads/
â”‚   â”œâ”€â”€ Core/
â”‚   â”‚   â”œâ”€â”€ AppStartupManager.swift          <span class="hljs-comment">// å®Œæ•´åˆå§‹åŒ–æµç¨‹ï¼ˆGDPRâ†’ATTâ†’SDKï¼‰</span>
â”‚   â”‚   â”œâ”€â”€ ConsentManager.swift             <span class="hljs-comment">// GDPR / UMP åŒæ„ç®¡ç†</span>
â”‚   â”‚   â”œâ”€â”€ MetaPrivacyHelper.swift          <span class="hljs-comment">// Meta éšç§åˆè§„</span>
â”‚   â”‚   â”œâ”€â”€ AdFrequencyManager.swift         <span class="hljs-comment">// å¹¿å‘Šé¢‘æ¬¡æ§åˆ¶</span>
â”‚   â”‚   â””â”€â”€ AdEventTracker.swift             <span class="hljs-comment">// æ”¶ç›Š/äº‹ä»¶è¿½è¸ª</span>
â”‚   â”‚
â”‚   â”œâ”€â”€ AdMobMediation/                      <span class="hljs-comment">// æ–¹æ¡ˆä¸€ï¼šAdMob Mediation</span>
â”‚   â”‚   â”œâ”€â”€ AdMobBannerManager.swift
â”‚   â”‚   â”œâ”€â”€ AdMobInterstitialManager.swift
â”‚   â”‚   â””â”€â”€ AdMobRewardedManager.swift
â”‚   â”‚
â”‚   â”œâ”€â”€ MAXMediation/                        <span class="hljs-comment">// æ–¹æ¡ˆäºŒï¼šAppLovin MAX</span>
â”‚   â”‚   â”œâ”€â”€ MAXBannerManager.swift
â”‚   â”‚   â”œâ”€â”€ MAXInterstitialManager.swift
â”‚   â”‚   â””â”€â”€ MAXRewardedManager.swift
â”‚   â”‚
â”‚   â””â”€â”€ Manual/                              <span class="hljs-comment">// æ–¹æ¡ˆä¸‰ï¼ˆä¸æ¨èï¼‰</span>
â”‚       â””â”€â”€ ManualAdManager.swift
â”‚
â”œâ”€â”€ Config/
â”‚   â”œâ”€â”€ AdConfig.swift                       <span class="hljs-comment">// å¹¿å‘Š ID é…ç½®ï¼ˆå¼€å‘/ç”Ÿäº§ï¼‰</span>
â”‚   â””â”€â”€ TestAdUnitIDs.swift                  <span class="hljs-comment">// æµ‹è¯•å¹¿å‘Š ID</span>
â”‚
â”œâ”€â”€ Views/
â”‚   â””â”€â”€ ...
â””â”€â”€ ViewControllers/
    â””â”€â”€ ...
</code></pre>
<h4 data-id="heading-47">9.1 å¹¿å‘Šé…ç½®æ–‡ä»¶ï¼ˆå¼€å‘/ç”Ÿäº§åˆ‡æ¢ï¼‰</h4>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// AdConfig.swift</span>
<span class="hljs-keyword">import</span> Foundation

<span class="hljs-keyword">struct</span> <span class="hljs-title class_">AdConfig</span> {
    
    <span class="hljs-comment">// MARK: - ç¯å¢ƒåˆ‡æ¢</span>
    
    <span class="hljs-keyword">#if</span> <span class="hljs-type">DEBUG</span>
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">let</span> isTestMode <span class="hljs-operator">=</span> <span class="hljs-literal">true</span>
    <span class="hljs-keyword">#else</span>
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">let</span> isTestMode <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>
    <span class="hljs-keyword">#endif</span>
    
    <span class="hljs-comment">// MARK: - AdMob é…ç½®</span>
    
    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">AdMob</span> {
        <span class="hljs-keyword">static</span> <span class="hljs-keyword">var</span> bannerID: <span class="hljs-type">String</span> {
            isTestMode
                <span class="hljs-operator">?</span> <span class="hljs-string">"ca-app-pub-3940256099942544/2934735716"</span>       <span class="hljs-comment">// æµ‹è¯•</span>
                : <span class="hljs-string">"ca-app-pub-YOUR_REAL_PUB_ID/BANNER_ID"</span>       <span class="hljs-comment">// ç”Ÿäº§</span>
        }
        
        <span class="hljs-keyword">static</span> <span class="hljs-keyword">var</span> interstitialID: <span class="hljs-type">String</span> {
            isTestMode
                <span class="hljs-operator">?</span> <span class="hljs-string">"ca-app-pub-3940256099942544/4411468910"</span>
                : <span class="hljs-string">"ca-app-pub-YOUR_REAL_PUB_ID/INTERSTITIAL_ID"</span>
        }
        
        <span class="hljs-keyword">static</span> <span class="hljs-keyword">var</span> rewardedID: <span class="hljs-type">String</span> {
            isTestMode
                <span class="hljs-operator">?</span> <span class="hljs-string">"ca-app-pub-3940256099942544/1712485313"</span>
                : <span class="hljs-string">"ca-app-pub-YOUR_REAL_PUB_ID/REWARDED_ID"</span>
        }
    }
    
    <span class="hljs-comment">// MARK: - Meta AN é…ç½®</span>
    
    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">Meta</span> {
        <span class="hljs-keyword">static</span> <span class="hljs-keyword">var</span> bannerPlacementID: <span class="hljs-type">String</span> {
            isTestMode
                <span class="hljs-operator">?</span> <span class="hljs-string">"IMG_16_9_APP_INSTALL#YOUR_PLACEMENT_ID"</span>       <span class="hljs-comment">// æµ‹è¯•</span>
                : <span class="hljs-string">"YOUR_REAL_PLACEMENT_ID"</span>                        <span class="hljs-comment">// ç”Ÿäº§</span>
        }
        
        <span class="hljs-keyword">static</span> <span class="hljs-keyword">var</span> interstitialPlacementID: <span class="hljs-type">String</span> {
            isTestMode
                <span class="hljs-operator">?</span> <span class="hljs-string">"IMG_16_9_APP_INSTALL#YOUR_PLACEMENT_ID"</span>
                : <span class="hljs-string">"YOUR_REAL_PLACEMENT_ID"</span>
        }
        
        <span class="hljs-keyword">static</span> <span class="hljs-keyword">var</span> rewardedPlacementID: <span class="hljs-type">String</span> {
            isTestMode
                <span class="hljs-operator">?</span> <span class="hljs-string">"VID_HD_16_9_46S_APP_INSTALL#YOUR_PLACEMENT_ID"</span>
                : <span class="hljs-string">"YOUR_REAL_PLACEMENT_ID"</span>
        }
    }
    
    <span class="hljs-comment">// MARK: - AppLovin MAX é…ç½®</span>
    
    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">MAX</span> {
        <span class="hljs-keyword">static</span> <span class="hljs-keyword">let</span> sdkKey <span class="hljs-operator">=</span> <span class="hljs-string">"YOUR_APPLOVIN_SDK_KEY"</span>
        
        <span class="hljs-comment">// MAX Ad Unit IDï¼ˆåœ¨ AppLovin Dashboard åˆ›å»ºï¼‰</span>
        <span class="hljs-keyword">static</span> <span class="hljs-keyword">let</span> bannerAdUnitID       <span class="hljs-operator">=</span> <span class="hljs-string">"YOUR_MAX_BANNER_UNIT"</span>
        <span class="hljs-keyword">static</span> <span class="hljs-keyword">let</span> interstitialAdUnitID <span class="hljs-operator">=</span> <span class="hljs-string">"YOUR_MAX_INTERSTITIAL_UNIT"</span>
        <span class="hljs-keyword">static</span> <span class="hljs-keyword">let</span> rewardedAdUnitID     <span class="hljs-operator">=</span> <span class="hljs-string">"YOUR_MAX_REWARDED_UNIT"</span>
    }
}
</code></pre>
<hr/>
<h3 data-id="heading-48">åã€SwiftUI é›†æˆï¼ˆé¢å¤–è¡¥å……ï¼‰</h3>
<p>å¦‚æœä½ çš„é¡¹ç›®ä½¿ç”¨ SwiftUIï¼Œä»¥ä¸‹æ˜¯é€‚é…æ–¹å¼ï¼š</p>
<h4 data-id="heading-49">10.1 AdMob Banner çš„ SwiftUI å°è£…</h4>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">import</span> SwiftUI
<span class="hljs-keyword">import</span> GoogleMobileAds

<span class="hljs-keyword">struct</span> <span class="hljs-title class_">AdMobBannerView</span>: <span class="hljs-title class_">UIViewRepresentable</span> {
    
    <span class="hljs-keyword">let</span> adUnitID: <span class="hljs-type">String</span>
    
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">makeUIView</span>(<span class="hljs-params">context</span>: <span class="hljs-type">Context</span>) -&gt; <span class="hljs-type">GADBannerView</span> {
        <span class="hljs-keyword">let</span> bannerView <span class="hljs-operator">=</span> <span class="hljs-type">GADBannerView</span>(adSize: <span class="hljs-type">GADAdSizeBanner</span>)
        bannerView.adUnitID <span class="hljs-operator">=</span> adUnitID
        bannerView.delegate <span class="hljs-operator">=</span> context.coordinator
        
        <span class="hljs-comment">// å»¶è¿Ÿè·å– rootViewControllerï¼ˆSwiftUI ç¯å¢ƒéœ€è¦è¿™æ ·åšï¼‰</span>
        <span class="hljs-type">DispatchQueue</span>.main.async {
            <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> windowScene <span class="hljs-operator">=</span> <span class="hljs-type">UIApplication</span>.shared.connectedScenes.first <span class="hljs-keyword">as?</span> <span class="hljs-type">UIWindowScene</span>,
               <span class="hljs-keyword">let</span> rootVC <span class="hljs-operator">=</span> windowScene.windows.first<span class="hljs-operator">?</span>.rootViewController {
                bannerView.rootViewController <span class="hljs-operator">=</span> rootVC
                bannerView.load(<span class="hljs-type">GADRequest</span>())
            }
        }
        
        <span class="hljs-keyword">return</span> bannerView
    }
    
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">updateUIView</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">uiView</span>: <span class="hljs-type">GADBannerView</span>, <span class="hljs-params">context</span>: <span class="hljs-type">Context</span>) {}
    
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">makeCoordinator</span>() -&gt; <span class="hljs-type">Coordinator</span> {
        <span class="hljs-type">Coordinator</span>()
    }
    
    <span class="hljs-keyword">class</span> <span class="hljs-title class_">Coordinator</span>: <span class="hljs-title class_">NSObject</span>, <span class="hljs-title class_">GADBannerViewDelegate</span> {
        <span class="hljs-keyword">func</span> <span class="hljs-title function_">bannerViewDidReceiveAd</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">bannerView</span>: <span class="hljs-type">GADBannerView</span>) {
            <span class="hljs-built_in">print</span>(<span class="hljs-string">"âœ… [SwiftUI] Banner åŠ è½½æˆåŠŸ"</span>)
        }
        
        <span class="hljs-keyword">func</span> <span class="hljs-title function_">bannerView</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">bannerView</span>: <span class="hljs-type">GADBannerView</span>, <span class="hljs-params">didFailToReceiveAdWithError</span> <span class="hljs-params">error</span>: <span class="hljs-type">Error</span>) {
            <span class="hljs-built_in">print</span>(<span class="hljs-string">"âŒ [SwiftUI] Banner åŠ è½½å¤±è´¥: <span class="hljs-subst">\(error.localizedDescription)</span>"</span>)
        }
    }
}
</code></pre>
<h4 data-id="heading-50">10.2 åœ¨ SwiftUI View ä¸­ä½¿ç”¨</h4>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">import</span> SwiftUI

<span class="hljs-keyword">struct</span> <span class="hljs-title class_">GameView</span>: <span class="hljs-title class_">View</span> {
    
    <span class="hljs-meta">@StateObject</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> adViewModel <span class="hljs-operator">=</span> <span class="hljs-type">AdViewModel</span>()
    
    <span class="hljs-keyword">var</span> body: <span class="hljs-keyword">some</span> <span class="hljs-type">View</span> {
        <span class="hljs-type">VStack</span> {
            <span class="hljs-comment">// æ¸¸æˆå†…å®¹</span>
            <span class="hljs-type">Text</span>(<span class="hljs-string">"Your Game Content"</span>)
                .frame(maxWidth: .infinity, maxHeight: .infinity)
            
            <span class="hljs-comment">// åº•éƒ¨ Banner å¹¿å‘Š</span>
            <span class="hljs-type">AdMobBannerView</span>(adUnitID: <span class="hljs-type">AdConfig</span>.<span class="hljs-type">AdMob</span>.bannerID)
                .frame(height: <span class="hljs-number">50</span>)
        }
        .onAppear {
            adViewModel.loadInterstitial()
            adViewModel.loadRewarded()
        }
    }
}

<span class="hljs-comment">// MARK: - å¹¿å‘Š ViewModel</span>

<span class="hljs-keyword">class</span> <span class="hljs-title class_">AdViewModel</span>: <span class="hljs-title class_">ObservableObject</span> {
    
    <span class="hljs-meta">@Published</span> <span class="hljs-keyword">var</span> isInterstitialReady <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>
    <span class="hljs-meta">@Published</span> <span class="hljs-keyword">var</span> isRewardedReady <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> interstitialAd: <span class="hljs-type">GADInterstitialAd</span>?
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> rewardedAd: <span class="hljs-type">GADRewardedAd</span>?
    
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">loadInterstitial</span>() {
        <span class="hljs-type">GADInterstitialAd</span>.load(
            withAdUnitID: <span class="hljs-type">AdConfig</span>.<span class="hljs-type">AdMob</span>.interstitialID,
            request: <span class="hljs-type">GADRequest</span>()
        ) { [<span class="hljs-keyword">weak</span> <span class="hljs-keyword">self</span>] ad, error <span class="hljs-keyword">in</span>
            <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> ad <span class="hljs-operator">=</span> ad {
                <span class="hljs-keyword">self</span><span class="hljs-operator">?</span>.interstitialAd <span class="hljs-operator">=</span> ad
                <span class="hljs-keyword">self</span><span class="hljs-operator">?</span>.isInterstitialReady <span class="hljs-operator">=</span> <span class="hljs-literal">true</span>
            }
        }
    }
    
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">showInterstitial</span>() {
        <span class="hljs-keyword">guard</span> isInterstitialReady,
              <span class="hljs-keyword">let</span> ad <span class="hljs-operator">=</span> interstitialAd,
              <span class="hljs-keyword">let</span> windowScene <span class="hljs-operator">=</span> <span class="hljs-type">UIApplication</span>.shared.connectedScenes.first <span class="hljs-keyword">as?</span> <span class="hljs-type">UIWindowScene</span>,
              <span class="hljs-keyword">let</span> rootVC <span class="hljs-operator">=</span> windowScene.windows.first<span class="hljs-operator">?</span>.rootViewController <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">return</span>
        }
        
        ad.present(fromRootViewController: rootVC)
        isInterstitialReady <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>
        
        <span class="hljs-comment">// å±•ç¤ºåé‡æ–°åŠ è½½</span>
        <span class="hljs-type">DispatchQueue</span>.main.asyncAfter(deadline: .now() <span class="hljs-operator">+</span> <span class="hljs-number">1</span>) { [<span class="hljs-keyword">weak</span> <span class="hljs-keyword">self</span>] <span class="hljs-keyword">in</span>
            <span class="hljs-keyword">self</span><span class="hljs-operator">?</span>.loadInterstitial()
        }
    }
    
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">loadRewarded</span>() {
        <span class="hljs-type">GADRewardedAd</span>.load(
            withAdUnitID: <span class="hljs-type">AdConfig</span>.<span class="hljs-type">AdMob</span>.rewardedID,
            request: <span class="hljs-type">GADRequest</span>()
        ) { [<span class="hljs-keyword">weak</span> <span class="hljs-keyword">self</span>] ad, error <span class="hljs-keyword">in</span>
            <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> ad <span class="hljs-operator">=</span> ad {
                <span class="hljs-keyword">self</span><span class="hljs-operator">?</span>.rewardedAd <span class="hljs-operator">=</span> ad
                <span class="hljs-keyword">self</span><span class="hljs-operator">?</span>.isRewardedReady <span class="hljs-operator">=</span> <span class="hljs-literal">true</span>
            }
        }
    }
    
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">showRewarded</span>(<span class="hljs-params">onReward</span>: <span class="hljs-keyword">@escaping</span> (<span class="hljs-type">Int</span>, <span class="hljs-type">String</span>) -&gt; <span class="hljs-type">Void</span>) {
        <span class="hljs-keyword">guard</span> isRewardedReady,
              <span class="hljs-keyword">let</span> ad <span class="hljs-operator">=</span> rewardedAd,
              <span class="hljs-keyword">let</span> windowScene <span class="hljs-operator">=</span> <span class="hljs-type">UIApplication</span>.shared.connectedScenes.first <span class="hljs-keyword">as?</span> <span class="hljs-type">UIWindowScene</span>,
              <span class="hljs-keyword">let</span> rootVC <span class="hljs-operator">=</span> windowScene.windows.first<span class="hljs-operator">?</span>.rootViewController <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">return</span>
        }
        
        ad.present(fromRootViewController: rootVC) {
            <span class="hljs-keyword">let</span> reward <span class="hljs-operator">=</span> ad.adReward
            onReward(reward.amount.intValue, reward.type)
        }
        
        isRewardedReady <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>
        <span class="hljs-type">DispatchQueue</span>.main.asyncAfter(deadline: .now() <span class="hljs-operator">+</span> <span class="hljs-number">1</span>) { [<span class="hljs-keyword">weak</span> <span class="hljs-keyword">self</span>] <span class="hljs-keyword">in</span>
            <span class="hljs-keyword">self</span><span class="hljs-operator">?</span>.loadRewarded()
        }
    }
}
</code></pre>
<h4 data-id="heading-51">10.3 AppLovin MAX çš„ SwiftUI å°è£…</h4>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">import</span> SwiftUI
<span class="hljs-keyword">import</span> AppLovinSDK

<span class="hljs-keyword">struct</span> <span class="hljs-title class_">MAXBannerSwiftUIView</span>: <span class="hljs-title class_">UIViewRepresentable</span> {
    
    <span class="hljs-keyword">let</span> adUnitID: <span class="hljs-type">String</span>
    
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">makeUIView</span>(<span class="hljs-params">context</span>: <span class="hljs-type">Context</span>) -&gt; <span class="hljs-type">MAAdView</span> {
        <span class="hljs-keyword">let</span> adView <span class="hljs-operator">=</span> <span class="hljs-type">MAAdView</span>(adUnitIdentifier: adUnitID)
        adView.delegate <span class="hljs-operator">=</span> context.coordinator
        adView.backgroundColor <span class="hljs-operator">=</span> .clear
        adView.loadAd()
        <span class="hljs-keyword">return</span> adView
    }
    
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">updateUIView</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">uiView</span>: <span class="hljs-type">MAAdView</span>, <span class="hljs-params">context</span>: <span class="hljs-type">Context</span>) {}
    
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">makeCoordinator</span>() -&gt; <span class="hljs-type">Coordinator</span> {
        <span class="hljs-type">Coordinator</span>()
    }
    
    <span class="hljs-keyword">class</span> <span class="hljs-title class_">Coordinator</span>: <span class="hljs-title class_">NSObject</span>, <span class="hljs-title class_">MAAdViewAdDelegate</span> {
        <span class="hljs-keyword">func</span> <span class="hljs-title function_">didLoad</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">ad</span>: <span class="hljs-type">MAAd</span>) {
            <span class="hljs-built_in">print</span>(<span class="hljs-string">"âœ… [SwiftUI] MAX Banner åŠ è½½æˆåŠŸ, æ¥æº: <span class="hljs-subst">\(ad.networkName)</span>"</span>)
        }
        
        <span class="hljs-keyword">func</span> <span class="hljs-title function_">didFailToLoadAd</span>(<span class="hljs-params">forAdUnitIdentifier</span> <span class="hljs-params">adUnitIdentifier</span>: <span class="hljs-type">String</span>, <span class="hljs-params">withError</span> <span class="hljs-params">error</span>: <span class="hljs-type">MAError</span>) {
            <span class="hljs-built_in">print</span>(<span class="hljs-string">"âŒ [SwiftUI] MAX Banner åŠ è½½å¤±è´¥: <span class="hljs-subst">\(error.message)</span>"</span>)
        }
        
        <span class="hljs-keyword">func</span> <span class="hljs-title function_">didClick</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">ad</span>: <span class="hljs-type">MAAd</span>) {}
        <span class="hljs-keyword">func</span> <span class="hljs-title function_">didFail</span>(<span class="hljs-params">toDisplay</span> <span class="hljs-params">ad</span>: <span class="hljs-type">MAAd</span>, <span class="hljs-params">withError</span> <span class="hljs-params">error</span>: <span class="hljs-type">MAError</span>) {}
        <span class="hljs-keyword">func</span> <span class="hljs-title function_">didExpand</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">ad</span>: <span class="hljs-type">MAAd</span>) {}
        <span class="hljs-keyword">func</span> <span class="hljs-title function_">didCollapse</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">ad</span>: <span class="hljs-type">MAAd</span>) {}
    }
}

<span class="hljs-comment">// ä½¿ç”¨æ–¹å¼</span>
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">ContentView</span>: <span class="hljs-title class_">View</span> {
    <span class="hljs-keyword">var</span> body: <span class="hljs-keyword">some</span> <span class="hljs-type">View</span> {
        <span class="hljs-type">VStack</span> {
            <span class="hljs-type">Text</span>(<span class="hljs-string">"Hello World"</span>)
                .frame(maxHeight: .infinity)
            
            <span class="hljs-type">MAXBannerSwiftUIView</span>(adUnitID: <span class="hljs-type">AdConfig</span>.<span class="hljs-type">MAX</span>.bannerAdUnitID)
                .frame(height: <span class="hljs-number">50</span>)
        }
    }
}
</code></pre>
<hr/>
<h3 data-id="heading-52">åä¸€ã€å®Œæ•´çš„ Podfile æ±‡æ€»</h3>
<p>æ ¹æ®ä½ é€‰æ‹©çš„æ–¹æ¡ˆï¼Œä½¿ç”¨å¯¹åº”çš„ Podfileï¼š</p>
<h4 data-id="heading-53">æ–¹æ¡ˆä¸€ï¼šAdMob Mediationï¼ˆæ¨èå¿«é€Ÿä¸Šæ‰‹ï¼‰</h4>
<pre><code class="hljs language-ruby" lang="ruby">platform <span class="hljs-symbol">:ios</span>, <span class="hljs-string">'13.0'</span>

target <span class="hljs-string">'YourApp'</span> <span class="hljs-keyword">do</span>
  use_frameworks!

  <span class="hljs-comment"># AdMob SDKï¼ˆèšåˆä¸»ä½“ï¼‰</span>
  pod <span class="hljs-string">'Google-Mobile-Ads-SDK'</span>, <span class="hljs-string">'~&gt; 12.0'</span>

  <span class="hljs-comment"># Meta Audience Network Mediation é€‚é…å™¨</span>
  pod <span class="hljs-string">'GoogleMobileAdsMediationFacebook'</span>

  <span class="hljs-comment"># GDPR åˆè§„</span>
  pod <span class="hljs-string">'GoogleUserMessagingPlatform'</span>

  <span class="hljs-comment"># ï¼ˆå¯é€‰ï¼‰æ›´å¤šç½‘ç»œ</span>
  <span class="hljs-comment"># pod 'GoogleMobileAdsMediationAppLovin'</span>
  <span class="hljs-comment"># pod 'GoogleMobileAdsMediationUnity'</span>
<span class="hljs-keyword">end</span>
</code></pre>
<h4 data-id="heading-54">æ–¹æ¡ˆäºŒï¼šAppLovin MAXï¼ˆæ¨èè¿½æ±‚é«˜æ”¶ç›Šï¼‰</h4>
<pre><code class="hljs language-ruby" lang="ruby">platform <span class="hljs-symbol">:ios</span>, <span class="hljs-string">'13.0'</span>

target <span class="hljs-string">'YourApp'</span> <span class="hljs-keyword">do</span>
  use_frameworks!
  inhibit_all_warnings!

  <span class="hljs-comment"># AppLovin MAX SDKï¼ˆèšåˆä¸»ä½“ï¼‰</span>
  pod <span class="hljs-string">'AppLovinSDK'</span>

  <span class="hljs-comment"># AdMob é€‚é…å™¨</span>
  pod <span class="hljs-string">'AppLovinMediationGoogleAdapter'</span>

  <span class="hljs-comment"># Meta AN é€‚é…å™¨</span>
  pod <span class="hljs-string">'AppLovinMediationFacebookAdapter'</span>

  <span class="hljs-comment"># ï¼ˆå¯é€‰ï¼‰æ›´å¤šç½‘ç»œ - æ¥å…¥è¶Šå¤šç«äº‰è¶Šæ¿€çƒˆæ”¶ç›Šè¶Šé«˜</span>
  <span class="hljs-comment"># pod 'AppLovinMediationUnityAdsAdapter'</span>
  <span class="hljs-comment"># pod 'AppLovinMediationMintegralAdapter'</span>
  <span class="hljs-comment"># pod 'AppLovinMediationVungleAdapter'</span>
  <span class="hljs-comment"># pod 'AppLovinMediationIronSourceAdapter'</span>
  <span class="hljs-comment"># pod 'AppLovinMediationByteDanceAdapter'     # Pangle / TikTok</span>
  <span class="hljs-comment"># pod 'AppLovinMediationChartboostAdapter'</span>
<span class="hljs-keyword">end</span>
</code></pre>
<h4 data-id="heading-55">æ–¹æ¡ˆä¸‰ï¼šæ‰‹åŠ¨ç®¡ç†ï¼ˆä¸æ¨èï¼‰</h4>
<pre><code class="hljs language-ruby" lang="ruby">platform <span class="hljs-symbol">:ios</span>, <span class="hljs-string">'13.0'</span>

target <span class="hljs-string">'YourApp'</span> <span class="hljs-keyword">do</span>
  use_frameworks!

  pod <span class="hljs-string">'Google-Mobile-Ads-SDK'</span>, <span class="hljs-string">'~&gt; 12.0'</span>
  pod <span class="hljs-string">'FBAudienceNetwork'</span>
  pod <span class="hljs-string">'GoogleUserMessagingPlatform'</span>
<span class="hljs-keyword">end</span>
</code></pre>
<hr/>
<h3 data-id="heading-56">åäºŒã€æ€»ç»“ä¸æ¨è</h3>
<h4 data-id="heading-57">æœ€ç»ˆæ¨è</h4>

























<table><thead><tr><th>åœºæ™¯</th><th>æ¨èæ–¹æ¡ˆ</th><th>ç†ç”±</th></tr></thead><tbody><tr><td><strong>æ–°é¡¹ç›® / è¿½æ±‚æœ€é«˜æ”¶ç›Š</strong></td><td>â­ AppLovin MAX</td><td>å…¬å¹³ç«ä»·ã€æ›´å¤šç½‘ç»œã€è¯¦ç»†æŠ¥å‘Š</td></tr><tr><td><strong>å·²æœ‰ AdMob åŸºç¡€ / å¿«é€Ÿæ¥å…¥</strong></td><td>â­ AdMob Mediation</td><td>æ”¹åŠ¨æœ€å°ï¼Œç”Ÿæ€æˆç†Ÿ</td></tr><tr><td><strong>å­¦ä¹ äº†è§£åŸç†</strong></td><td>æ‰‹åŠ¨ç®¡ç†</td><td>ä»…ä½œå­¦ä¹ å‚è€ƒ</td></tr></tbody></table>
<h4 data-id="heading-58">å…³é”®è¦ç‚¹å›é¡¾</h4>
<ol>
<li><strong>ä¸€å®šè¦ä½¿ç”¨èšåˆå¹³å°</strong>ï¼Œä¸è¦æ‰‹åŠ¨ç®¡ç†å¤šä¸ª SDK</li>
<li><strong>ä¼˜å…ˆä½¿ç”¨ Biddingï¼ˆå®æ—¶ç«ä»·ï¼‰</strong> è€Œé Waterfallï¼ˆç€‘å¸ƒæµï¼‰</li>
<li><strong>æ¥å…¥ 3 ä¸ªä»¥ä¸Šç«ä»·ç½‘ç»œ</strong>ï¼Œç«äº‰è¶Šå¤šæ”¶ç›Šè¶Šé«˜</li>
<li><strong>éšç§åˆè§„ä¸‰æ­¥èµ°</strong>ï¼šGDPR åŒæ„ â†’ ATT æˆæƒ â†’ å„ SDK è®¾ç½®</li>
<li><strong>ä½¿ç”¨æµ‹è¯• ID å¼€å‘</strong>ï¼Œä¸Šçº¿å‰åˆ‡æ¢ä¸ºç”Ÿäº§ ID</li>
<li><strong>é¢„åŠ è½½ç­–ç•¥</strong>ï¼šå¹¿å‘Šå…³é—­åç«‹å³é¢„åŠ è½½ä¸‹ä¸€ä¸ª</li>
<li><strong>é¢‘æ¬¡æ§åˆ¶</strong>ï¼šé¿å…è¿‡åº¦å±•ç¤ºå¯¼è‡´ç”¨æˆ·æµå¤±æˆ–æ”¿ç­–è¿è§„</li>
<li><strong>å®šæœŸæ›´æ–° SDK</strong>ï¼šå„å¹¿å‘Šç½‘ç»œæŒç»­ä¼˜åŒ–ï¼Œæ–°ç‰ˆæœ¬é€šå¸¸å¸¦æ¥æ›´é«˜æ”¶ç›Š</li>
</ol>
<h4 data-id="heading-59">é¢„æœŸæ”¶ç›Šå‚è€ƒï¼ˆä»…ä¾›å‚è€ƒï¼Œå—åœ°åŒº/å“ç±»/ç”¨æˆ·è´¨é‡å½±å“æå¤§ï¼‰</h4>



































<table><thead><tr><th>å¹¿å‘Šæ ¼å¼</th><th>ç¾å›½å¸‚åœº eCPM å‚è€ƒ</th><th>ä¸­å›½/äºšæ´²å¸‚åœº eCPM å‚è€ƒ</th></tr></thead><tbody><tr><td>Banner</td><td><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0.5</mn><mtext>Â </mtext></mrow><annotation encoding="application/x-tex">0.5 ~ </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">0.5</span><span class="mspace nobreak">Â </span></span></span></span></span>3.0</td><td><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0.1</mn><mtext>Â </mtext></mrow><annotation encoding="application/x-tex">0.1 ~ </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">0.1</span><span class="mspace nobreak">Â </span></span></span></span></span>1.0</td></tr><tr><td>Interstitial</td><td><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>5.0</mn><mtext>Â </mtext></mrow><annotation encoding="application/x-tex">5.0 ~ </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">5.0</span><span class="mspace nobreak">Â </span></span></span></span></span>20.0</td><td><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1.0</mn><mtext>Â </mtext></mrow><annotation encoding="application/x-tex">1.0 ~ </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">1.0</span><span class="mspace nobreak">Â </span></span></span></span></span>8.0</td></tr><tr><td>Rewarded Video</td><td><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>10.0</mn><mtext>Â </mtext></mrow><annotation encoding="application/x-tex">10.0 ~ </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">10.0</span><span class="mspace nobreak">Â </span></span></span></span></span>40.0</td><td><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>3.0</mn><mtext>Â </mtext></mrow><annotation encoding="application/x-tex">3.0 ~ </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">3.0</span><span class="mspace nobreak">Â </span></span></span></span></span>15.0</td></tr><tr><td>MREC</td><td><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1.0</mn><mtext>Â </mtext></mrow><annotation encoding="application/x-tex">1.0 ~ </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">1.0</span><span class="mspace nobreak">Â </span></span></span></span></span>5.0</td><td><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0.3</mn><mtext>Â </mtext></mrow><annotation encoding="application/x-tex">0.3 ~ </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">0.3</span><span class="mspace nobreak">Â </span></span></span></span></span>2.0</td></tr><tr><td>App Open</td><td><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>5.0</mn><mtext>Â </mtext></mrow><annotation encoding="application/x-tex">5.0 ~ </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">5.0</span><span class="mspace nobreak">Â </span></span></span></span></span>15.0</td><td><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1.0</mn><mtext>Â </mtext></mrow><annotation encoding="application/x-tex">1.0 ~ </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">1.0</span><span class="mspace nobreak">Â </span></span></span></span></span>6.0</td></tr></tbody></table>
<blockquote>
<p>âš ï¸ ä»¥ä¸Šæ•°æ®ä»…ä¸ºè¡Œä¸šå¤§è‡´å‚è€ƒèŒƒå›´ã€‚å®é™… eCPM å—ä»¥ä¸‹å› ç´ å½±å“æå¤§ï¼š</p>
<ul>
<li><strong>ç”¨æˆ·åœ°åŒº</strong>ï¼ˆT1 å›½å®¶å¦‚ç¾/è‹±/æ¾³/åŠ è¿œé«˜äºå…¶ä»–åœ°åŒºï¼‰</li>
<li><strong>App å“ç±»</strong>ï¼ˆé‡‘èã€æ•™è‚²ç±» &gt; å·¥å…·ç±» &gt; æ¸¸æˆä¼‘é—²ç±»ï¼‰</li>
<li><strong>ç”¨æˆ·è´¨é‡</strong>ï¼ˆé«˜ç•™å­˜ç”¨æˆ· eCPM æ›´é«˜ï¼‰</li>
<li><strong>æ¥å…¥ç½‘ç»œæ•°é‡</strong>ï¼ˆ3+ ä¸ª Bidding ç½‘ç»œå¯æå‡ 20~50%ï¼‰</li>
<li><strong>ATT æˆæƒç‡</strong>ï¼ˆæˆæƒç”¨æˆ· eCPM å¯æ¯”æœªæˆæƒé«˜ 30~80%ï¼‰</li>
</ul>
</blockquote>
<h3 data-id="heading-60">åä¸‰ã€App Store å®¡æ ¸æ³¨æ„äº‹é¡¹</h3>
<h4 data-id="heading-61">13.1 App éšç§æ ‡ç­¾ï¼ˆPrivacy Nutrition Labelsï¼‰</h4>
<p>ä¸Šæ¶ App Store æ—¶ï¼Œéœ€è¦åœ¨ App Store Connect ä¸­å¦‚å®å¡«å†™éšç§æ ‡ç­¾ã€‚æ¥å…¥å¹¿å‘Š SDK åï¼Œé€šå¸¸éœ€è¦å£°æ˜ä»¥ä¸‹æ•°æ®æ”¶é›†ï¼š</p>









































<table><thead><tr><th>æ•°æ®ç±»å‹</th><th>æ˜¯å¦æ”¶é›†</th><th>ç”¨é€”</th><th>æ˜¯å¦å…³è”ç”¨æˆ·</th></tr></thead><tbody><tr><td>è®¾å¤‡æ ‡è¯†ç¬¦ (IDFA)</td><td>âœ…</td><td>ç¬¬ä¸‰æ–¹å¹¿å‘Šã€åˆ†æ</td><td>æ˜¯ï¼ˆå¦‚ç”¨æˆ·æˆæƒ ATTï¼‰</td></tr><tr><td>ç²—ç•¥ä½ç½®</td><td>âœ…</td><td>ç¬¬ä¸‰æ–¹å¹¿å‘Š</td><td>å¦</td></tr><tr><td>ä½¿ç”¨æ•°æ®ï¼ˆäº§å“äº¤äº’ï¼‰</td><td>âœ…</td><td>ç¬¬ä¸‰æ–¹å¹¿å‘Šã€åˆ†æ</td><td>å¦</td></tr><tr><td>è¯Šæ–­æ•°æ®</td><td>âœ…</td><td>åˆ†æ</td><td>å¦</td></tr><tr><td>å¹¿å‘Šæ•°æ®</td><td>âœ…</td><td>ç¬¬ä¸‰æ–¹å¹¿å‘Š</td><td>æ˜¯</td></tr></tbody></table>
<blockquote>
<p>ğŸ’¡ <strong>å„ SDK çš„éšç§å£°æ˜æ–‡æ¡£ï¼š</strong></p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdevelopers.google.com%2Fadmob%2Fios%2Fdata-disclosure" target="_blank" title="https://developers.google.com/admob/ios/data-disclosure" ref="nofollow noopener noreferrer">Google AdMob éšç§å£°æ˜</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdevelopers.facebook.com%2Fdocs%2Faudience-network%2Fguides%2Fapple-app-data-use" target="_blank" title="https://developers.facebook.com/docs/audience-network/guides/apple-app-data-use" ref="nofollow noopener noreferrer">Meta AN éšç§å£°æ˜</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fsupport.axon.ai%2Fen%2Fmax%2Fios%2Foverview%2Fprivacy%2F" target="_blank" title="https://support.axon.ai/en/max/ios/overview/privacy/" ref="nofollow noopener noreferrer">AppLovin éšç§å£°æ˜</a></li>
</ul>
</blockquote>
<h4 data-id="heading-62">13.2 å®¡æ ¸å¸¸è§è¢«æ‹’åŸå› åŠè§£å†³</h4>



































<table><thead><tr><th>è¢«æ‹’åŸå› </th><th>æè¿°</th><th>è§£å†³æ–¹æ¡ˆ</th></tr></thead><tbody><tr><td><strong>Guideline 5.1.1</strong></td><td>ATT å¼¹çª—æè¿°ä¸æ¸…æˆ–å­˜åœ¨è¯¯å¯¼</td><td>ä½¿ç”¨æ¸…æ™°ã€è¯šå®çš„ <code>NSUserTrackingUsageDescription</code> æ–‡æ¡ˆ</td></tr><tr><td><strong>Guideline 5.1.2</strong></td><td>éšç§æ ‡ç­¾ä¸å®é™…ä¸ç¬¦</td><td>æ ¹æ®æ‰€æœ‰æ¥å…¥ SDK å¦‚å®æ›´æ–°éšç§æ ‡ç­¾</td></tr><tr><td><strong>Guideline 2.3.2</strong></td><td>å¹¿å‘Šé®æŒ¡ UI æˆ–å½±å“åŠŸèƒ½</td><td>ç¡®ä¿ Banner ä¸é®æŒ¡æŒ‰é’®ï¼›æ’å±åœ¨åˆç†æ—¶æœºå±•ç¤º</td></tr><tr><td><strong>Guideline 3.1.1</strong></td><td>æ¿€åŠ±è§†é¢‘ç»•è¿‡å†…è´­</td><td>æ¿€åŠ±è§†é¢‘åªèƒ½å¥–åŠ±æ¶ˆè€—å‹é“å…·ï¼Œä¸èƒ½æ›¿ä»£è®¢é˜…/æ°¸ä¹…è§£é”</td></tr><tr><td><strong>Guideline 4.0</strong></td><td>å¹¿å‘Šå†…å®¹ä¸å½“</td><td>å¯ç”¨ AdMob æˆ– MAX çš„å¹¿å‘Šè´¨é‡å®¡æ ¸åŠŸèƒ½</td></tr></tbody></table>
<h4 data-id="heading-63">13.3 ATT å¼¹çª—æœ€ä½³å®è·µ</h4>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// âŒ ä¸å¥½çš„æè¿°</span>
<span class="hljs-string">"We need your permission to track you."</span>

<span class="hljs-comment">// âœ… å¥½çš„æè¿°ï¼ˆæ¸…æ™°è¯´æ˜å¯¹ç”¨æˆ·çš„å¥½å¤„ï¼‰</span>
<span class="hljs-string">"æ­¤æ ‡è¯†ç¬¦å°†ç”¨äºä¸ºæ‚¨æä¾›æ›´ç›¸å…³çš„å¹¿å‘Šä½“éªŒã€‚æ‚¨çš„æ•°æ®ä¸ä¼šç”¨äºå…¶ä»–ç›®çš„ã€‚"</span>

<span class="hljs-comment">// âœ… è‹±æ–‡ç‰ˆ</span>
<span class="hljs-string">"This identifier will be used to deliver personalized ads to you. Your data will not be used for any other purpose."</span>
</code></pre>
<p><strong>æé«˜ ATT æˆæƒç‡çš„æŠ€å·§ï¼š</strong></p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">/// åœ¨å¼¹å‡ºç³»ç»Ÿ ATT å¼¹çª—ä¹‹å‰ï¼Œå…ˆå±•ç¤ºä¸€ä¸ªè‡ªå®šä¹‰çš„é¢„å¼¹çª—è¯´æ˜</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ATTPrePromptView</span>: <span class="hljs-title class_">UIViewController</span> {
    
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">showPrePrompt</span>(<span class="hljs-params">from</span> <span class="hljs-params">viewController</span>: <span class="hljs-type">UIViewController</span>, <span class="hljs-params">completion</span>: <span class="hljs-keyword">@escaping</span> () -&gt; <span class="hljs-type">Void</span>) {
        <span class="hljs-keyword">let</span> alert <span class="hljs-operator">=</span> <span class="hljs-type">UIAlertController</span>(
            title: <span class="hljs-string">"æ”¯æŒæˆ‘ä»¬ç»§ç»­å…è´¹æä¾›æœåŠ¡ ğŸ™"</span>,
            message: <span class="hljs-string">"""
            æˆ‘ä»¬é€šè¿‡å±•ç¤ºå¹¿å‘Šæ¥ç»´æŒåº”ç”¨å…è´¹ã€‚
            
            æ¥ä¸‹æ¥ç³»ç»Ÿä¼šè¯¢é—®æ‚¨æ˜¯å¦å…è®¸è¿½è¸ªã€‚
            å¦‚æœæ‚¨åŒæ„ï¼Œæˆ‘ä»¬èƒ½ä¸ºæ‚¨å±•ç¤ºæ›´ç›¸å…³çš„å¹¿å‘Šï¼Œ
            åŒæ—¶å¸®åŠ©æˆ‘ä»¬è·å¾—æ›´å¥½çš„æ”¶å…¥æ¥æ”¹è¿›åº”ç”¨ã€‚
            
            æ‚¨çš„é€‰æ‹©ä¸ä¼šå½±å“å¹¿å‘Šæ•°é‡ã€‚
            """</span>,
            preferredStyle: .alert
        )
        
        alert.addAction(<span class="hljs-type">UIAlertAction</span>(title: <span class="hljs-string">"å¥½çš„ï¼Œç»§ç»­"</span>, style: .default) { <span class="hljs-keyword">_</span> <span class="hljs-keyword">in</span>
            completion()
        })
        
        alert.addAction(<span class="hljs-type">UIAlertAction</span>(title: <span class="hljs-string">"æš‚æ—¶è·³è¿‡"</span>, style: .cancel) { <span class="hljs-keyword">_</span> <span class="hljs-keyword">in</span>
            completion()
        })
        
        viewController.present(alert, animated: <span class="hljs-literal">true</span>)
    }
}
</code></pre>
<blockquote>
<p>ğŸ’¡ <strong>è‡ªå®šä¹‰é¢„å¼¹çª—å¯å°† ATT æˆæƒç‡ä» ~20% æå‡åˆ° ~40%+</strong>ï¼Œç›´æ¥å½±å“å¹¿å‘Šæ”¶ç›Šã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-64">åå››ã€ä¸Šçº¿å‰çš„æ£€æŸ¥æ¸…å• âœ…</h3>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section">### ğŸ“‹ ä¸Šçº¿å‰å¹¿å‘Šé›†æˆæ£€æŸ¥æ¸…å•</span>

<span class="hljs-section">#### åŸºç¡€é…ç½®</span>
<span class="hljs-bullet">-</span> [ ] Info.plist ä¸­é…ç½®äº† GADApplicationIdentifierï¼ˆAdMob App IDï¼‰
<span class="hljs-bullet">-</span> [ ] Info.plist ä¸­é…ç½®äº† NSUserTrackingUsageDescription
<span class="hljs-bullet">-</span> [ ] Info.plist ä¸­æ·»åŠ äº†æ‰€æœ‰å¿…éœ€çš„ SKAdNetworkItems
<span class="hljs-bullet">-</span> [ ] AppLovinSdkKey å·²é…ç½®ï¼ˆå¦‚ä½¿ç”¨ MAXï¼‰

<span class="hljs-section">#### SDK åˆå§‹åŒ–</span>
<span class="hljs-bullet">-</span> [ ] GDPR åŒæ„æµç¨‹åœ¨ SDK åˆå§‹åŒ–ä¹‹å‰æ‰§è¡Œ
<span class="hljs-bullet">-</span> [ ] ATT æƒé™è¯·æ±‚åœ¨ SDK åˆå§‹åŒ–ä¹‹å‰æ‰§è¡Œ
<span class="hljs-bullet">-</span> [ ] Meta ATE æ ‡å¿—æ ¹æ® ATT ç»“æœæ­£ç¡®è®¾ç½®
<span class="hljs-bullet">-</span> [ ] å¹¿å‘Š SDK åˆå§‹åŒ–åœ¨ completionHandler ä¸­ç¡®è®¤æˆåŠŸ

<span class="hljs-section">#### å¹¿å‘Šå®ç°</span>
<span class="hljs-bullet">-</span> [ ] æ‰€æœ‰æµ‹è¯• ID å·²æ›¿æ¢ä¸ºç”Ÿäº§ ID
<span class="hljs-bullet">-</span> [ ] æµ‹è¯•è®¾å¤‡ä»£ç å·²ç§»é™¤æˆ–è¢« #if DEBUG åŒ…è£¹
<span class="hljs-bullet">-</span> [ ] æ’å±å¹¿å‘Šæœ‰é¢‘æ¬¡æ§åˆ¶
<span class="hljs-bullet">-</span> [ ] å¹¿å‘Šå…³é—­åæœ‰é¢„åŠ è½½é€»è¾‘
<span class="hljs-bullet">-</span> [ ] åŠ è½½å¤±è´¥æœ‰æŒ‡æ•°é€€é¿é‡è¯•
<span class="hljs-bullet">-</span> [ ] æ¿€åŠ±è§†é¢‘å¥–åŠ±é€»è¾‘åœ¨ didRewardUser å›è°ƒä¸­å¤„ç†

<span class="hljs-section">#### éšç§åˆè§„</span>
<span class="hljs-bullet">-</span> [ ] App Store Connect éšç§æ ‡ç­¾å·²æ›´æ–°
<span class="hljs-bullet">-</span> [ ] GDPR åŒæ„å¼¹çª—åœ¨æ¬§æ´²åœ°åŒºæ­£ç¡®æ˜¾ç¤º
<span class="hljs-bullet">-</span> [ ] CCPA åˆè§„å¤„ç†ï¼ˆå¦‚é¢å‘ç¾å›½ç”¨æˆ·ï¼‰
<span class="hljs-bullet">-</span> [ ] Meta æ•°æ®å¤„ç†é€‰é¡¹æ ¹æ®ç”¨æˆ·åŒæ„çŠ¶æ€è®¾ç½®

<span class="hljs-section">#### åå°é…ç½®</span>
<span class="hljs-bullet">-</span> [ ] AdMob åå°å·²åˆ›å»ºæ‰€æœ‰ Ad Unit
<span class="hljs-bullet">-</span> [ ] Meta AN åå°å·²åˆ›å»ºæ‰€æœ‰ Placement
<span class="hljs-bullet">-</span> [ ] AppLovin Dashboard å·²é…ç½®æ‰€æœ‰ Ad Unitï¼ˆå¦‚ä½¿ç”¨ MAXï¼‰
<span class="hljs-bullet">-</span> [ ] Mediation ç»„é…ç½®æ­£ç¡®ï¼ŒBidding å·²å¯ç”¨

<span class="hljs-section">#### æµ‹è¯•éªŒè¯</span>
<span class="hljs-bullet">-</span> [ ] ä¸‰ç§å¹¿å‘Šæ ¼å¼ï¼ˆBanner/Interstitial/Rewardedï¼‰å‡èƒ½æ­£å¸¸å±•ç¤º
<span class="hljs-bullet">-</span> [ ] åœ¨æ¨¡æ‹Ÿå™¨å’ŒçœŸæœºä¸Šå‡æµ‹è¯•é€šè¿‡
<span class="hljs-bullet">-</span> [ ] å¤šæ¬¡æ‰“å¼€/å…³é—­å¹¿å‘Šæ— å´©æºƒ
<span class="hljs-bullet">-</span> [ ] ç½‘ç»œæ–­å¼€æ—¶ä¸å´©æºƒï¼Œæ¢å¤åèƒ½é‡æ–°åŠ è½½
<span class="hljs-bullet">-</span> [ ] å†…å­˜æ³„æ¼æ£€æŸ¥é€šè¿‡ï¼ˆInstruments - Leaksï¼‰

<span class="hljs-section">#### æ”¶ç›Šè¿½è¸ª</span>
<span class="hljs-bullet">-</span> [ ] å¹¿å‘Šå±•ç¤ºäº‹ä»¶æ­£ç¡®ä¸ŠæŠ¥åˆ°åˆ†æå¹³å°
<span class="hljs-bullet">-</span> [ ] æ”¶ç›Šæ•°æ®å¯åœ¨ AdMob / AppLovin åå°æŸ¥çœ‹
<span class="hljs-bullet">-</span> [ ] ä¸åŒç½‘ç»œçš„å¡«å……ç‡å’Œ eCPM å¯åˆ†åˆ«è¿½è¸ª
</code></pre>
<hr/>
<h3 data-id="heading-65">åäº”ã€å‚è€ƒé“¾æ¥æ±‡æ€»</h3>





















































<table><thead><tr><th>èµ„æº</th><th>é“¾æ¥</th></tr></thead><tbody><tr><td><strong>AdMob iOS å®˜æ–¹æ–‡æ¡£</strong></td><td><a href="https://link.juejin.cn?target=https%3A%2F%2Fdevelopers.google.com%2Fadmob%2Fios%2Fquick-start" target="_blank" title="https://developers.google.com/admob/ios/quick-start" ref="nofollow noopener noreferrer">developers.google.com/admob/ios/qâ€¦</a></td></tr><tr><td><strong>AdMob Mediation æ–‡æ¡£</strong></td><td><a href="https://link.juejin.cn?target=https%3A%2F%2Fdevelopers.google.com%2Fadmob%2Fios%2Fmediation" target="_blank" title="https://developers.google.com/admob/ios/mediation" ref="nofollow noopener noreferrer">developers.google.com/admob/ios/mâ€¦</a></td></tr><tr><td><strong>Meta AN iOS æ–‡æ¡£</strong></td><td><a href="https://link.juejin.cn?target=https%3A%2F%2Fdevelopers.facebook.com%2Fdocs%2Faudience-network%2Fget-started%2Fios" target="_blank" title="https://developers.facebook.com/docs/audience-network/get-started/ios" ref="nofollow noopener noreferrer">developers.facebook.com/docs/audienâ€¦</a></td></tr><tr><td><strong>AppLovin MAX iOS æ–‡æ¡£</strong></td><td><a href="https://link.juejin.cn?target=https%3A%2F%2Fsupport.axon.ai%2Fen%2Fmax%2Fios%2Foverview%2Fintegration%2F" target="_blank" title="https://support.axon.ai/en/max/ios/overview/integration/" ref="nofollow noopener noreferrer">support.axon.ai/en/max/ios/â€¦</a></td></tr><tr><td><strong>MAX Mediated Networks</strong></td><td><a href="https://link.juejin.cn?target=https%3A%2F%2Fsupport.axon.ai%2Fen%2Fmax%2Fios%2Fpreparing-mediated-networks%2F" target="_blank" title="https://support.axon.ai/en/max/ios/preparing-mediated-networks/" ref="nofollow noopener noreferrer">support.axon.ai/en/max/ios/â€¦</a></td></tr><tr><td><strong>MAX Banner æ–‡æ¡£</strong></td><td><a href="https://link.juejin.cn?target=https%3A%2F%2Fsupport.axon.ai%2Fen%2Fmax%2Fios%2Fad-formats%2Fbanner-and-mrec-ads%2F" target="_blank" title="https://support.axon.ai/en/max/ios/ad-formats/banner-and-mrec-ads/" ref="nofollow noopener noreferrer">support.axon.ai/en/max/ios/â€¦</a></td></tr><tr><td><strong>MAX Interstitial æ–‡æ¡£</strong></td><td><a href="https://link.juejin.cn?target=https%3A%2F%2Fsupport.axon.ai%2Fen%2Fmax%2Fios%2Fad-formats%2Finterstitial-ads%2F" target="_blank" title="https://support.axon.ai/en/max/ios/ad-formats/interstitial-ads/" ref="nofollow noopener noreferrer">support.axon.ai/en/max/ios/â€¦</a></td></tr><tr><td><strong>MAX Rewarded æ–‡æ¡£</strong></td><td><a href="https://link.juejin.cn?target=https%3A%2F%2Fsupport.axon.ai%2Fen%2Fmax%2Fios%2Fad-formats%2Frewarded-ads%2F" target="_blank" title="https://support.axon.ai/en/max/ios/ad-formats/rewarded-ads/" ref="nofollow noopener noreferrer">support.axon.ai/en/max/ios/â€¦</a></td></tr><tr><td><strong>SKAdNetwork é…ç½®</strong></td><td><a href="https://link.juejin.cn?target=https%3A%2F%2Fsupport.axon.ai%2Fen%2Fmax%2Fios%2Foverview%2Fskadnetwork%2F" target="_blank" title="https://support.axon.ai/en/max/ios/overview/skadnetwork/" ref="nofollow noopener noreferrer">support.axon.ai/en/max/ios/â€¦</a></td></tr><tr><td><strong>AppLovin MAX SDK GitHub</strong></td><td><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FAppLovin%2FAppLovin-MAX-SDK-iOS" target="_blank" title="https://github.com/AppLovin/AppLovin-MAX-SDK-iOS" ref="nofollow noopener noreferrer">github.com/AppLovin/Apâ€¦</a></td></tr><tr><td><strong>Google UMP SDK</strong></td><td><a href="https://link.juejin.cn?target=https%3A%2F%2Fdevelopers.google.com%2Fadmob%2Fump%2Fios%2Fquick-start" target="_blank" title="https://developers.google.com/admob/ump/ios/quick-start" ref="nofollow noopener noreferrer">developers.google.com/admob/ump/iâ€¦</a></td></tr></tbody></table>
<hr/>
<p>ä»¥ä¸Šå°±æ˜¯åœ¨ iOS åº”ç”¨ä¸­åŒæ—¶é›†æˆ <strong>Google AdMob</strong> å’Œ <strong>Meta Audience Network</strong> çš„å®Œæ•´æŒ‡å—ã€‚æ€»ç»“æ ¸å¿ƒå»ºè®®ï¼š</p>
<ol>
<li><strong>ä¼˜å…ˆé€‰æ‹©èšåˆæ–¹æ¡ˆ</strong>ï¼ˆAdMob Mediation æˆ– AppLovin MAXï¼‰ï¼Œé¿å…æ‰‹åŠ¨ç®¡ç†</li>
<li><strong>éšç§åˆè§„</strong>å¿…é¡»æ”¾åœ¨æœ€ä¼˜å…ˆçº§â€”â€”GDPR â†’ ATT â†’ SDK åˆå§‹åŒ–</li>
<li><strong>æ¥å…¥ 3+ ä¸ª Bidding ç½‘ç»œ</strong>æ˜¯æå‡æ”¶ç›Šçš„æœ€æœ‰æ•ˆæ‰‹æ®µ</li>
<li><strong>ä½¿ç”¨æµ‹è¯• ID å¼€å‘</strong>ï¼Œä¸Šçº¿å‰ä¸¥æ ¼æŒ‰ç…§æ£€æŸ¥æ¸…å•é€é¡¹ç¡®è®¤</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç”¨ CSS è§£å†³â€œçœŸÂ·shrinkwrapâ€ï¼šæŠŠè‡ªåŠ¨æ¢è¡Œçš„å†…å®¹ï¼Œç´§è´´åŒ…èµ·æ¥]]></title>    <link>https://juejin.cn/post/7604786493638426651</link>    <guid>https://juejin.cn/post/7604786493638426651</guid>    <pubDate>2026-02-10T02:36:13.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604786493638426651" data-draft-id="7604709514131898414" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç”¨ CSS è§£å†³â€œçœŸÂ·shrinkwrapâ€ï¼šæŠŠè‡ªåŠ¨æ¢è¡Œçš„å†…å®¹ï¼Œç´§è´´åŒ…èµ·æ¥"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-02-10T02:36:13.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ˜é‡‘å®‰ä¸œå°¼"/> <meta itemprop="url" content="https://juejin.cn/user/1521379823340792"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç”¨ CSS è§£å†³â€œçœŸÂ·shrinkwrapâ€ï¼šæŠŠè‡ªåŠ¨æ¢è¡Œçš„å†…å®¹ï¼Œç´§è´´åŒ…èµ·æ¥
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1521379823340792/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ˜é‡‘å®‰ä¸œå°¼
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-10T02:36:13.000Z" title="Tue Feb 10 2026 02:36:13 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»13åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>åŸæ–‡ï¼šSolving Shrinkwrap: New Experimental Technique (<a href="https://link.juejin.cn?target=https%3A%2F%2Fkizu.dev%2Fshrinkwrap-solution%2F" title="https://kizu.dev/shrinkwrap-solution/" target="_blank" ref="nofollow noopener noreferrer">Kizu</a>)</p>
<p>æ¬¢è¿å…³æ³¨ <a href="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2FTUARAN%2Ffrontend-weekly-digest-cn" title="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2FTUARAN%2Ffrontend-weekly-digest-cn" target="_blank">å‰ç«¯å‘¨åˆŠ</a>ï¼Œæ¯å‘¨æ›´æ–°å›½å¤–è®ºå›çš„å‰ç«¯çƒ­é—¨æ–‡ç« ï¼Œç´§è·Ÿæ—¶äº‹ï¼ŒæŒæ¡å‰ç«¯æŠ€æœ¯åŠ¨æ€ã€‚</p>
</blockquote>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e987357c15e6449fb1afe4e5376a635d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR5a6J5Lic5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771295772&amp;x-signature=%2FQVHp5kxqjel3W5U1d7t99C%2B8KI%3D" alt="" loading="lazy"/></p>
<p>å‰ç«¯å†™ UI å†™ä¹…äº†ï¼Œä½ æ€»ä¼šé‡åˆ°ä¸€ç§ç‰¹åˆ«åˆ«æ‰­çš„è§†è§‰ï¼šå†…å®¹æ˜æ˜åªæœ‰ä¸¤ä¸‰è¡Œå­—ï¼Œå®¹å™¨å´åƒè¢«â€œæ’‘åˆ°ä¸€æ•´è¡Œâ€é‚£æ ·å®½ï¼Œç•™ä¸‹ä¸€å¤§å—æ— æ„ä¹‰çš„ç©ºç™½ã€‚æ ‡é¢˜ã€æ ‡ç­¾ã€æ°”æ³¡ã€tooltipã€legendã€å›¾ç‰‡ captionâ€¦â€¦åªè¦æ–‡æœ¬ä¼šè‡ªåŠ¨æ¢è¡Œï¼Œè¿™ä¸ªé—®é¢˜å°±ä¼šåå¤å‡ºç°ã€‚</p>
<p>å¤§å®¶ç®¡å®ƒå« shrinkwrapï¼šå®¹å™¨åº”è¯¥åƒâ€œç´§è´´åŒ…è£¹â€ä¸€æ ·è´´ç€å†…å®¹ç”Ÿé•¿ã€‚CSS åœ¨å¾ˆå¤šåœºæ™¯é‡Œæœ‰ <code>inline-block</code>ã€<code>max-content</code>ã€<code>fit-content()</code>ï¼Œçœ‹èµ·æ¥éƒ½åƒç­”æ¡ˆï¼›ä½†åªè¦å†…å®¹æ¢è¡Œã€å‚ä¸å¸ƒå±€åˆ†é…ï¼ˆå°¤å…¶æ˜¯ flex / grid çš„å‰©ä½™ç©ºé—´åˆ†é…ï¼‰ï¼Œä½ å°±ä¼šå‘ç°â€œè´´åˆâ€å¾ˆå®¹æ˜“å˜æˆâ€œå æ»¡â€ã€‚è¿™ä¹Ÿæ˜¯ Roman Komarov è¿™ç¯‡æ–‡ç« è¦è§£å†³çš„æ ¸å¿ƒï¼šè®©ä¼šè‡ªåŠ¨æ¢è¡Œçš„å†…å®¹ï¼Œä¾æ—§èƒ½å¾—åˆ°çœŸæ­£å½±å“å¸ƒå±€çš„ shrinkwrapï¼Œè€Œä¸ä»…ä»…æ˜¯ç”»å‡ºæ¥åƒã€‚(<a href="https://link.juejin.cn?target=https%3A%2F%2Fkizu.dev%2Fshrinkwrap-solution%2F" title="https://kizu.dev/shrinkwrap-solution/" target="_blank" ref="nofollow noopener noreferrer">Kizu</a>)</p>
<p>æ–‡ç« ç»™å‡ºçš„ç»“è®ºå¾ˆç›´æ¥ï¼šæŠŠä¸¤ä¸ªè¿‘ä¸¤å¹´é€æ¸æˆç†Ÿçš„ CSS èƒ½åŠ›æ‹¼èµ·æ¥â€”â€”<strong>Anchor Positioningï¼ˆé”šç‚¹å®šä½ï¼‰</strong> + <strong>Scroll-driven Animationsï¼ˆæ»šåŠ¨é©±åŠ¨åŠ¨ç”»ï¼‰</strong> â€”â€”å°±èƒ½åœ¨çº¯ CSS é‡Œå®Œæˆä¸€ä»¶è¿‡å»é«˜åº¦ä¾èµ– JS çš„äº‹æƒ…ï¼š<strong>æµ‹é‡å†…éƒ¨å†…å®¹çš„å‡ ä½•å°ºå¯¸ï¼Œç„¶åæŠŠæµ‹å¾—çš„ç»“æœå›å†™ç»™å¤–å±‚å®¹å™¨ä½œä¸ºå°ºå¯¸çº¦æŸ</strong>ã€‚(<a href="https://link.juejin.cn?target=https%3A%2F%2Fkizu.dev%2Fshrinkwrap-solution%2F" title="https://kizu.dev/shrinkwrap-solution/" target="_blank" ref="nofollow noopener noreferrer">Kizu</a>)</p>
<p>è¿™å¬èµ·æ¥åƒâ€œé»‘é­”æ³•â€ï¼Œä½†å®ƒçš„å·¥ç¨‹ä»·å€¼å¾ˆæ˜ç¡®ï¼šåªè¦æµè§ˆå™¨æ”¯æŒç›¸å…³ç‰¹æ€§ï¼Œå¸ƒå±€å°±èƒ½è¿›å…¥ä¸€ä¸ªæ›´â€œå†…å®¹é©±åŠ¨â€çš„çŠ¶æ€ï¼›ä¸æ”¯æŒæ—¶è¿˜èƒ½ä¼˜é›…é™çº§ä¸ºæ™®é€šå¸ƒå±€ï¼ˆåªæ˜¯æ²¡é‚£ä¹ˆå¥½çœ‹ï¼‰ã€‚ä½œè€…ä¹Ÿå¼ºè°ƒäº†å®éªŒæ€§ä¸é£é™©ï¼Œå°¤å…¶æåˆ° Safari çš„å´©æºƒ bugï¼Œä»¥åŠç”Ÿäº§ä½¿ç”¨è¦è°¨æ…è¯„ä¼°ã€‚(<a href="https://link.juejin.cn?target=https%3A%2F%2Fkizu.dev%2Fshrinkwrap-solution%2F" title="https://kizu.dev/shrinkwrap-solution/" target="_blank" ref="nofollow noopener noreferrer">Kizu</a>)</p>
<hr/>
<h2 data-id="heading-0">è¿™ä¸ªé—®é¢˜ä¸ºä»€ä¹ˆéš¾ï¼šæ¢è¡Œä¼šå¼•å‘â€œå®½åº¦äº‰å¤ºæˆ˜â€</h2>
<p>ç†è§£ shrinkwrap çš„éš¾ç‚¹ï¼Œå…³é”®åœ¨â€œè‡ªåŠ¨æ¢è¡Œâ€è¿™å››ä¸ªå­—ã€‚</p>
<p>å½“æ–‡æœ¬èƒ½æ¢è¡Œæ—¶ï¼Œå¸ƒå±€ç³»ç»Ÿå€¾å‘äºå…ˆæ‹¿åˆ°ä¸€ä¸ªâ€œå¯ç”¨ç©ºé—´â€ï¼Œå†åœ¨è¿™ä¸ªç©ºé—´é‡Œæ’ç‰ˆã€æ¢è¡Œã€å¯¹é½ã€‚å¾ˆå¤šç»„ä»¶åœ¨ flex / grid é‡Œçœ‹èµ·æ¥â€œçªç„¶å˜å®½â€ï¼Œæ ¹æºå°±åœ¨è¿™é‡Œï¼šå…ƒç´ å®½åº¦å¼€å§‹å“åº”å¤–éƒ¨å¯ç”¨ç©ºé—´ï¼Œå†…å®¹çš„æ¢è¡Œç»“æœåˆåè¿‡æ¥å½±å“å…ƒç´ çœ‹èµ·æ¥â€œåº”è¯¥å¤šå®½â€ã€‚ä½ æƒ³è®©å®¹å™¨è´´ç€å†…å®¹ï¼Œå¸ƒå±€å¼•æ“å´æ›´æ„¿æ„è®©å†…å®¹é€‚é…å®¹å™¨ã€‚</p>
<p>è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆè¿‡å»å¸¸è§çš„è§£å†³æ–¹æ¡ˆè¦ä¹ˆæ˜¯ JS æµ‹é‡ï¼ˆ<code>getBoundingClientRect()</code> / <code>offsetWidth</code>ï¼‰ï¼Œè¦ä¹ˆæ˜¯ç¡¬ç¼–ç æ¢è¡Œï¼ˆæ‰‹åŠ¨ <code>&lt;br&gt;</code>ï¼‰ï¼Œè¦ä¹ˆæ˜¯æ¥å—ä¸å®Œç¾ï¼ˆé èƒŒæ™¯ä¼ªå…ƒç´ è£…é¥°å‡ºâ€œçœ‹èµ·æ¥è´´åˆâ€ï¼‰ã€‚ä½œè€…åœ¨ 2023 å¹´çš„æ—§æ–‡é‡Œå°±åšè¿‡ä¸€ç§åè£…é¥°æ€§çš„ workaroundï¼šé”šç‚¹èƒ½æŠŠè£…é¥°ç‰©è´´åˆ°æ¢è¡Œæ–‡æœ¬è¾¹ä¸Šï¼Œä½†å®ƒä¸æ”¹å˜çœŸæ­£çš„å¸ƒå±€å°ºå¯¸ï¼Œæ‰€ä»¥ä»ç„¶â€œçœ‹èµ·æ¥å¯¹ã€å¸ƒå±€æ²¡å˜â€ã€‚(<a href="https://link.juejin.cn?target=https%3A%2F%2Fkizu.dev%2Fshrinkwrap-solution%2F" title="https://kizu.dev/shrinkwrap-solution/" target="_blank" ref="nofollow noopener noreferrer">Kizu</a>)</p>
<p>è¿™æ¬¡çš„æ–°æŠ€å·§ï¼Œç›®æ ‡æ›´æ¿€è¿›ï¼š<strong>ç›´æ¥æ”¹å¸ƒå±€</strong>ã€‚</p>
<hr/>
<h2 data-id="heading-1">æ ¸å¿ƒæ€è·¯ï¼šæ”¾ä¸€ä¸ªâ€œæ¢é’ˆâ€ï¼Œç”¨æ»šåŠ¨åŠ¨ç”»æŠŠå°ºå¯¸â€œå·â€å‡ºæ¥</h2>
<p>æ•´å¥—æ–¹æ¡ˆå¯ä»¥æ‹†æˆä¸€å¥è¯ï¼š</p>
<blockquote>
<p>è®©å†…éƒ¨å†…å®¹åœ¨ä¸€ä¸ªå¯æ§çš„â€œå†…ç›’å­â€é‡Œè‡ªç„¶æ¢è¡Œï¼›å†æ”¾ä¸€ä¸ªç»å¯¹å®šä½çš„ probeï¼ˆæ¢é’ˆï¼‰é”šå®šåˆ°å†…å®¹çš„è¾¹ç•Œï¼›ç”¨ view-timeline æŠŠ probe çš„ä½ç½®æ˜ å°„æˆ 0~1 çš„åŠ¨ç”»è¿›åº¦ï¼›æŠŠè¿™ä¸ªè¿›åº¦è¿˜åŸæˆå®é™…åƒç´ å€¼ï¼›æœ€ç»ˆæŠŠåƒç´ å€¼å†™å›å¤–å±‚å®¹å™¨çš„ <code>inline-size</code> / <code>min-inline-size</code>ã€‚</p>
</blockquote>
<p>è¿™é‡Œæœ€å…³é”®çš„ç‚¹ï¼Œæ˜¯ä½œè€…æŠŠâ€œæ»šåŠ¨é©±åŠ¨åŠ¨ç”»â€å½“æˆäº†ä¸€ä¸ª<strong>è¿œç¨‹çŠ¶æ€ä¼ é€’ / è¿œç¨‹æµ‹é‡</strong>æœºåˆ¶ï¼šåŠ¨ç”»æœ¬æ¥æ˜¯æ‹¿æ¥åšåŠ¨æ•ˆçš„ï¼Œä½†å®ƒå¤©ç„¶å…·å¤‡â€œæŠŠä¸€ä¸ªå…ƒç´ åœ¨æŸä¸ªåæ ‡ç³»é‡Œçš„ä½ç½®ï¼Œè½¬æˆä¸€ä¸ªå¯è¢« CSS å˜é‡è¡¨è¾¾çš„æ•°â€çš„èƒ½åŠ›ã€‚(<a href="https://link.juejin.cn?target=https%3A%2F%2Fkizu.dev%2Fshrinkwrap-solution%2F" title="https://kizu.dev/shrinkwrap-solution/" target="_blank" ref="nofollow noopener noreferrer">Kizu</a>)</p>
<p>è¿™æ¡æ€è·¯åœ¨ç¤¾åŒºé‡Œä¹Ÿæœ‰å‘¼åº”ã€‚ä½œè€…å¼•ç”¨äº† Temani Afif 2024 å¹´çš„æ–‡ç« ï¼šåŒæ ·åˆ©ç”¨ scroll-driven animationsï¼Œåœ¨çº¯ CSS é‡Œè®¡ç®—å…ƒç´ å®½é«˜ã€‚ä¸¤è€…å·®å¼‚åœ¨äºæµ‹é‡ç‚¹çš„é€‰æ‹©ï¼šTemani çš„æ–¹æ³•æ›´åƒç”¨ä¸€ä¸ª <code>1px</code> å…ƒç´ é…åˆæ¯”ä¾‹åæ¨ scrollportï¼›Roman è¿™ç¯‡æ›´ä¾èµ– anchor positioningï¼ŒæŠŠæ¢é’ˆç›´æ¥é’‰åˆ°æƒ³æµ‹çš„â€œé‚£ä¸ªè¾¹ç•Œç‚¹â€ï¼Œå†é…ä¸€ä¸ªå¾ˆå¤§çš„ timeline-range å½“åˆ†è¾¨ç‡å»è¿˜åŸæ•°å€¼ã€‚(<a href="https://link.juejin.cn?target=https%3A%2F%2Fkizu.dev%2Fshrinkwrap-solution%2F" title="https://kizu.dev/shrinkwrap-solution/" target="_blank" ref="nofollow noopener noreferrer">Kizu</a>)</p>
<hr/>
<h2 data-id="heading-2">åŸºç¡€ç»“æ„ï¼šä¸ºä»€ä¹ˆè¦å¤šåŒ…ä¸‰å±‚</h2>
<p>æ–‡ç« ç»™å‡ºçš„åŸºç¡€ HTML ç»“æ„å¾ˆâ€œåˆ»æ„â€ï¼Œå› ä¸ºå®ƒæœ¬èº«å°±æ˜¯ APIï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"shrinkwrap"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"shrinkwrap-content"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"shrinkwrap-source"</span>&gt;</span>
      <span class="hljs-comment">&lt;!-- Text --&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"shrinkwrap-probe"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<p>æ¯ä¸€å±‚éƒ½æœ‰æ˜ç¡®èŒè´£ï¼š(<a href="https://link.juejin.cn?target=https%3A%2F%2Fkizu.dev%2Fshrinkwrap-solution%2F" title="https://kizu.dev/shrinkwrap-solution/" target="_blank" ref="nofollow noopener noreferrer">Kizu</a>)</p>
<ul>
<li><code>shrinkwrap</code>ï¼šå¤–å±‚çœŸæ­£è¦å‚ä¸å¸ƒå±€ã€æœ€ç»ˆè¦è¢«â€œç¼©åˆ°è´´åˆå†…å®¹â€çš„å…ƒç´ ã€‚</li>
<li><code>shrinkwrap-content</code>ï¼šä¸€ä¸ªå…è®¸â€œæ¯”å¤–å±‚æ›´å®½â€çš„å†…ç›’å­ï¼Œå®ƒå†³å®šæ–‡æœ¬å¦‚ä½•æ¢è¡Œï¼›åŒæ—¶å®ƒæ‰¿æ‹…æº¢å‡ºè£å‰ªï¼ˆ<code>overflow: hidden</code>ï¼‰ï¼Œä¸º view timeline æä¾›å¿…è¦æ¡ä»¶ã€‚(<a href="https://link.juejin.cn?target=https%3A%2F%2Fkizu.dev%2Fshrinkwrap-solution%2F" title="https://kizu.dev/shrinkwrap-solution/" target="_blank" ref="nofollow noopener noreferrer">Kizu</a>)</li>
<li><code>shrinkwrap-source</code>ï¼šè¢«æµ‹é‡çš„ç›®æ ‡ï¼Œé»˜è®¤æ˜¯è¡Œå†…å†…å®¹ï¼ˆ<code>display: inline</code>ï¼‰ï¼Œå¹¶æä¾› <code>anchor-name</code> ä½œä¸ºé”šç‚¹æ ‡è¯†ã€‚(<a href="https://link.juejin.cn?target=https%3A%2F%2Fkizu.dev%2Fshrinkwrap-solution%2F" title="https://kizu.dev/shrinkwrap-solution/" target="_blank" ref="nofollow noopener noreferrer">Kizu</a>)</li>
<li><code>shrinkwrap-probe</code>ï¼šæ¢é’ˆå…ƒç´ ï¼Œç»å¯¹å®šä½ã€ç¦ç”¨ pointer eventsï¼Œé€šè¿‡ <code>position-anchor</code> é”šå®šåˆ° sourceï¼Œå¹¶å»ºç«‹ view timelineï¼Œè®©å¤–å±‚èƒ½â€œè¯»åˆ°â€å®ƒã€‚(<a href="https://link.juejin.cn?target=https%3A%2F%2Fkizu.dev%2Fshrinkwrap-solution%2F" title="https://kizu.dev/shrinkwrap-solution/" target="_blank" ref="nofollow noopener noreferrer">Kizu</a>)</li>
</ul>
<p>è¿™é‡Œæœ‰ä¸ªéå¸¸å·¥ç¨‹åŒ–çš„åˆ¤æ–­ï¼šä½œè€…å»ºè®® probe ä¼˜å…ˆç”¨çœŸå® DOM å…ƒç´ ï¼Œé¿å… Safari åœ¨æŸäº›æ¡ä»¶ä¸‹å› ä¸ºä¼ªå…ƒç´  probe è§¦å‘æ ‡ç­¾é¡µå´©æºƒï¼›ä»–è¿˜ç»™å‡ºäº† WebKit çš„ bug é“¾æ¥ï¼Œå¹¶è§£é‡Šäº†è‡ªå·±å¦‚ä½•åšæœ€å°å¤ç°æ¥å®šä½é—®é¢˜ã€‚(<a href="https://link.juejin.cn?target=https%3A%2F%2Fkizu.dev%2Fshrinkwrap-solution%2F" title="https://kizu.dev/shrinkwrap-solution/" target="_blank" ref="nofollow noopener noreferrer">Kizu</a>)</p>
<hr/>
<h2 data-id="heading-3">å¤–å±‚ shrinkwrap çš„ CSSï¼šæµ‹é‡ + å›å†™ + é™çº§</h2>
<p>å¤–å±‚ <code>shrinkwrap</code> çš„ CSS ç‰‡æ®µé‡Œï¼Œèƒ½çœ‹åˆ°ä¸‰ä¸ªå±‚æ¬¡çš„åŠ¨ä½œï¼š(<a href="https://link.juejin.cn?target=https%3A%2F%2Fkizu.dev%2Fshrinkwrap-solution%2F" title="https://kizu.dev/shrinkwrap-solution/" target="_blank" ref="nofollow noopener noreferrer">Kizu</a>)</p>
<p>1ï¼‰ç”¨ layers + è‡ªå®šä¹‰å±æ€§å®šä¹‰ä¸€å¥—å¯è¦†å†™çš„ CSS APIï¼ˆè®©è¿™å¥—æŠ€å·§åƒâ€œç»„ä»¶â€ä¸€æ ·å¯é…ç½®ï¼‰ã€‚<br/>
2ï¼‰é€šè¿‡ <code>timeline-scope</code> + <code>animation</code> æŠŠå†…éƒ¨ probe çš„ view timelineâ€œæå‡â€åˆ°å¤–å±‚å¯è®¿é—®çš„ä½œç”¨åŸŸï¼Œç„¶åæŠŠå…³é”®åæ ‡å†™è¿›è‡ªå®šä¹‰å±æ€§ã€‚(<a href="https://link.juejin.cn?target=https%3A%2F%2Fkizu.dev%2Fshrinkwrap-solution%2F" title="https://kizu.dev/shrinkwrap-solution/" target="_blank" ref="nofollow noopener noreferrer">Kizu</a>)<br/>
3ï¼‰æŠŠå†™å…¥çš„å˜é‡ç”¨äº <code>inline-size</code> / <code>min-inline-size</code> çš„è®¡ç®—ï¼Œæœ€ç»ˆè®©å¤–å±‚çœŸçš„å˜çª„ã€‚(<a href="https://link.juejin.cn?target=https%3A%2F%2Fkizu.dev%2Fshrinkwrap-solution%2F" title="https://kizu.dev/shrinkwrap-solution/" target="_blank" ref="nofollow noopener noreferrer">Kizu</a>)</p>
<p>ä½œè€…è¿˜ç”¨äº†ä»–è‡ªå·±é•¿æœŸç ”ç©¶çš„ä¸€ç±»æŠ€å·§ï¼š<strong>Cyclic Dependency Space Toggles</strong>ï¼Œç”¨æ¥åšâ€œæ¡ä»¶å¼å¯ç”¨â€å’Œæ›´é¡ºæ»‘çš„é™çº§ã€‚å®ƒçš„æ„ä¹‰å¾ˆç°å®ï¼šå½“æµè§ˆå™¨ä¸æ”¯æŒ <code>timeline-scope</code> æˆ–é”šç‚¹å®šä½æ—¶ï¼Œå¸ƒå±€å›åˆ°æ™®é€šçŠ¶æ€ï¼Œé¡µé¢ç…§æ ·èƒ½ç”¨ï¼Œåªæ˜¯è§†è§‰è´´åˆåº¦ä¸‹é™ã€‚(<a href="https://link.juejin.cn?target=https%3A%2F%2Fkizu.dev%2Fshrinkwrap-solution%2F" title="https://kizu.dev/shrinkwrap-solution/" target="_blank" ref="nofollow noopener noreferrer">Kizu</a>)</p>
<p>æ–‡ç« é‡Œä¹Ÿä¸“é—¨åˆ—äº†é™åˆ¶æ¡ä»¶ï¼Œæ¯”å¦‚å¤–å±‚å¯ä»¥å¤„åœ¨æ™®é€šæµã€block/inline-blockã€flex/grid item éƒ½è¡Œï¼Œä½†å®ƒè‡ªå·±ä¸é€‚åˆå†æˆä¸º flex/grid å®¹å™¨ï¼›å¹¶ä¸”å®ƒçš„ <code>max-inline-size</code> ä¸èƒ½ä¾èµ–å…„å¼Ÿå…ƒç´ ï¼Œå¦åˆ™å°±ä¼šè¿›å…¥æ›´éš¾å¤„ç†çš„å¾ªç¯ä¾èµ–ã€‚(<a href="https://link.juejin.cn?target=https%3A%2F%2Fkizu.dev%2Fshrinkwrap-solution%2F" title="https://kizu.dev/shrinkwrap-solution/" target="_blank" ref="nofollow noopener noreferrer">Kizu</a>)</p>
<hr/>
<h2 data-id="heading-4">æ–‡æœ¬å¯¹é½æ˜¯éšè—å¤§å‘ï¼šå·¦å¯¹é½ä¹‹å¤–éƒ½è¦è¡¥ä¸€åˆ€</h2>
<p>å¦‚æœæ–‡æœ¬æ°¸è¿œå·¦å¯¹é½ï¼ŒåŸºç¡€æŠ€å·§å·²ç»å¤Ÿç”¨ï¼šå› ä¸ºå·¦è¾¹ç•Œå›ºå®šï¼Œå¤–å±‚ç¼©åˆ°åˆé€‚å®½åº¦å°±èƒ½â€œè´´ä½â€ã€‚(<a href="https://link.juejin.cn?target=https%3A%2F%2Fkizu.dev%2Fshrinkwrap-solution%2F" title="https://kizu.dev/shrinkwrap-solution/" target="_blank" ref="nofollow noopener noreferrer">Kizu</a>)</p>
<p>ä¸€æ—¦å‡ºç° <code>text-align: center/right</code>ï¼Œé—®é¢˜å°±å˜å¾—å¾®å¦™ï¼šæ–‡æœ¬çš„å¯¹é½å‘ç”Ÿåœ¨æ›´å¤§çš„å†…ç›’å­é‡Œï¼ˆ<code>shrinkwrap-content</code>ï¼‰ï¼Œå¤–å±‚è™½ç„¶ç¼©å°äº†ï¼Œæ–‡æœ¬ä¾æ—§åœ¨å†…ç›’å­é‡Œâ€œæŒ‰å¤§å®½åº¦å¯¹é½â€ï¼Œè§†è§‰ä¸Šå°±ä¼šæ¼‚ã€‚ä½œè€…ç»™çš„è§£å†³æ–¹å¼å¾ˆèªæ˜ï¼šç»§ç»­å¤ç”¨æµ‹é‡é˜¶æ®µå¾—åˆ°çš„å˜é‡ï¼Œç»™ <code>shrinkwrap-content</code> åŠ ä¸€ä¸ªç›¸å¯¹å®šä½åç§»ï¼Œç”¨ <code>inset-inline-start</code> æŠŠå®ƒæŒªå›å»ã€‚(<a href="https://link.juejin.cn?target=https%3A%2F%2Fkizu.dev%2Fshrinkwrap-solution%2F" title="https://kizu.dev/shrinkwrap-solution/" target="_blank" ref="nofollow noopener noreferrer">Kizu</a>)</p>
<p>è¿™é‡Œè¿˜æåˆ° Safari çš„ä¸€ä¸ªæ¸²æŸ“å·®å¼‚ï¼šåŒæ ·çš„å¯¹é½åˆ‡æ¢ï¼Œåœ¨ Safari ä¸Šç¬¬ä¸€è¡Œçš„æ’ç‰ˆå˜åŒ–å¯èƒ½æ¯” Chrome æ˜æ˜¾å¾—å¤šï¼Œè¿™æ„å‘³ç€è¾¹ç¼˜ case ä»ç„¶å­˜åœ¨ã€‚(<a href="https://link.juejin.cn?target=https%3A%2F%2Fkizu.dev%2Fshrinkwrap-solution%2F" title="https://kizu.dev/shrinkwrap-solution/" target="_blank" ref="nofollow noopener noreferrer">Kizu</a>)</p>
<hr/>
<h2 data-id="heading-5">æŠŠåŸºç¡€æŠ€å·§å½“ç§¯æœ¨ï¼šåˆ—è¡¨ã€å¡ç‰‡ã€æ®µè½éƒ½èƒ½æ‹¼</h2>
<p>æ–‡ç« ä¸­æ®µæœ€æœ‰å¯å‘çš„ä¸€ç‚¹ï¼Œæ˜¯ä½œè€…æŠŠè¿™å¥— shrinkwrap å½“æˆâ€œå¸ƒå±€ç§¯æœ¨â€æ¥ä½¿ç”¨ï¼š</p>
<p>å¦‚æœä¸€ä¸ªå¤æ‚å†…å®¹èƒ½æ‹†æˆå¤šä¸ªâ€œç‹¬ç«‹çš„è¡Œå†…å†…å®¹ä¸Šä¸‹æ–‡â€ï¼Œå°±å¯¹æ¯ä¸€æ®µè¡Œå†…å†…å®¹é‡å¤ä½¿ç”¨ shrinkwrapï¼Œç„¶ååœ¨æ›´å¤–å±‚ç”¨ <code>max-content</code> æˆ–å…¶ä»–æ–¹å¼æŠŠæ•´ä½“ä¹Ÿè´´åˆèµ·æ¥ã€‚ä½œè€…ç”¨å¤šé¡¹åˆ—è¡¨æ”¾è¿›å¡ç‰‡ã€æ¯é¡¹å¯èƒ½å¤šæ®µè½çš„ä¾‹å­è¯´æ˜ï¼šåªè¦æ‹†åˆ†å¾—å½“ï¼Œè¿™å¥—æŠ€å·§å°±èƒ½è¦†ç›–æ¯”â€œæ ‡é¢˜è´´åˆâ€æ›´å¤æ‚çš„ UIã€‚(<a href="https://link.juejin.cn?target=https%3A%2F%2Fkizu.dev%2Fshrinkwrap-solution%2F" title="https://kizu.dev/shrinkwrap-solution/" target="_blank" ref="nofollow noopener noreferrer">Kizu</a>)</p>
<p>è¿™ä¹Ÿè§£é‡Šäº†ä¸ºä»€ä¹ˆ API é‡Œæœ€é‡è¦çš„è‡ªå®šä¹‰å±æ€§æ˜¯ <code>--sw-limit</code>ï¼šå®ƒç›¸å½“äºå‘Šè¯‰è¿™å¥—æŠ€å·§â€œå…è®¸æ–‡æœ¬æœ€å¤šå ç”¨å¤šå®½çš„ä¸Šé™â€ï¼Œå¸¸è§é»˜è®¤æ˜¯ <code>100cqi</code>ï¼ˆå®¹å™¨æŸ¥è¯¢çš„ inline size å•ä½ï¼‰ï¼Œå½“ä½ å¸Œæœ›æ—è¾¹è¿˜ç•™ç©ºé—´ç»™å…¶ä»–åˆ—æˆ–æ§ä»¶æ—¶ï¼Œå°±æŠŠå®ƒç®—æˆ 50% å‡ gap/padding çš„å½¢å¼ã€‚(<a href="https://link.juejin.cn?target=https%3A%2F%2Fkizu.dev%2Fshrinkwrap-solution%2F" title="https://kizu.dev/shrinkwrap-solution/" target="_blank" ref="nofollow noopener noreferrer">Kizu</a>)</p>
<p>æ­¤å¤–è¿˜æœ‰ <code>--sw-padding</code>ã€<code>--sw-inner-padding</code>ã€<code>--sw-inset</code>ã€<code>--sw-source</code> ç­‰ï¼Œç”¨äºæŠŠ padding çº³å…¥è®¡ç®—ã€æ”¹å†™ probe æµ‹é‡èŒƒå›´ã€ç”šè‡³è®©è¢«æµ‹é‡å…ƒç´ åœ¨ shrinkwrap å¤–éƒ¨æ—¶å»ºç«‹è¿æ¥ã€‚(<a href="https://link.juejin.cn?target=https%3A%2F%2Fkizu.dev%2Fshrinkwrap-solution%2F" title="https://kizu.dev/shrinkwrap-solution/" target="_blank" ref="nofollow noopener noreferrer">Kizu</a>)</p>
<hr/>
<h2 data-id="heading-6">å¤æ‚å†…å®¹ï¼šä»â€œæšä¸¾é”šç‚¹â€åˆ°â€œé“¾å¼é”šç‚¹æ€ªç‰©â€</h2>
<p>å½“å†…å®¹ä¸å†æ˜¯ç®€å•çš„è¡Œå†…æ–‡æœ¬ï¼Œè€Œæ˜¯å¯æ¢è¡Œçš„ flex/grid itemsï¼Œé—®é¢˜ä¼šå‡çº§ã€‚</p>
<p>æ–‡ç« ç»™äº†ä¸¤æ¡è·¯çº¿ï¼š</p>
<h3 data-id="heading-7">1ï¼‰å¤šä¸ªæ˜¾å¼é”šç‚¹ï¼šçŸ¥é“å…ƒç´ æ•°é‡ï¼Œå°±èƒ½ç®—å‡ºåŒ…å›´ç›’</h3>
<p>æ€è·¯å¾ˆç›´æ¥ï¼šç»™æ¯ä¸ª item åˆ†é…å”¯ä¸€ anchorï¼Œç„¶ååœ¨ä¸€ä¸ª <code>min()</code> é‡ŒæŠŠæ‰€æœ‰ anchors çš„ inset éƒ½åˆ—å‡ºæ¥ï¼Œè®¡ç®—å‡ºå†³å®š shrinkwrap å°ºå¯¸çš„â€œæœ€è¿œè¾¹ç•Œâ€ã€‚ä½œè€…è¿˜æåˆ°éœ€è¦ç”¨ <code>calc(infinity * 1px)</code> ä½œä¸ºå›é€€ï¼Œé¿å…æŸäº› item ä¸å­˜åœ¨æ—¶è®¡ç®—å‡ºé”™ï¼Œå¹¶è®©å®ƒåœ¨ <code>min()</code> ä¸­è¢«â€œä¼˜é›…å¿½ç•¥â€ã€‚(<a href="https://link.juejin.cn?target=https%3A%2F%2Fkizu.dev%2Fshrinkwrap-solution%2F" title="https://kizu.dev/shrinkwrap-solution/" target="_blank" ref="nofollow noopener noreferrer">Kizu</a>)</p>
<h3 data-id="heading-8">2ï¼‰é“¾å¼é”šç‚¹æ€ªç‰©ï¼šä¸æšä¸¾æ•°é‡ï¼Œç”¨å¸ƒå±€é¡ºåºåšâ€œæ±‚æœ€å€¼ç®—æ³•â€</h3>
<p>è¿™ä¸€æ®µè¯»èµ·æ¥åƒç§‘å¹»ï¼šæ¯ä¸ªåˆ—è¡¨é¡¹é‡Œæ”¾ä¸¤ä¸ª probeï¼ˆleft/rightï¼‰ï¼Œåˆ©ç”¨â€œå¤šä¸ª anchors å…±äº«åŒåæ—¶å¯ä»¥é“¾å¼æŒ‡å‘å‰ä¸€ä¸ªæœ‰æ•ˆç›®æ ‡â€çš„è¡Œä¸ºï¼Œé…åˆå®¹å™¨æŸ¥è¯¢ï¼Œå½“ probe å®½åº¦å˜æˆæ­£å€¼æ—¶åŠ¨æ€å†™å…¥ <code>anchor-name</code>ï¼Œè®©â€œæœ€å·¦/æœ€å³â€åƒæ¥åŠ›ä¸€æ ·ä¼ é€’ä¸‹å»ã€‚ä½œè€…æŠŠå®ƒå½¢å®¹æˆâ€œç”¨å¸ƒå±€è¡¨è¾¾çš„æ±‚æœ€å¤§å€¼ç®—æ³•â€ã€‚(<a href="https://link.juejin.cn?target=https%3A%2F%2Fkizu.dev%2Fshrinkwrap-solution%2F" title="https://kizu.dev/shrinkwrap-solution/" target="_blank" ref="nofollow noopener noreferrer">Kizu</a>)</p>
<p>ç°å®é™åˆ¶åŒæ ·æ˜ç¡®ï¼šè¿™ä¸ª chaining è¡Œä¸ºç›®å‰ä¸»è¦åœ¨ Chrome å¯ç”¨ï¼ŒSafari å’Œ Firefox å­˜åœ¨ä¸¥é‡ bugï¼Œä½œè€…è¿˜ç»™å‡ºäº†å¯¹åº”çš„ WebKit ä¸ Bugzilla é“¾æ¥ã€‚(<a href="https://link.juejin.cn?target=https%3A%2F%2Fkizu.dev%2Fshrinkwrap-solution%2F" title="https://kizu.dev/shrinkwrap-solution/" target="_blank" ref="nofollow noopener noreferrer">Kizu</a>)<br/>
æ€§èƒ½ä¹Ÿæœ‰è¾¹ç•Œï¼šå…ƒç´ è¶…è¿‡ 100 ä¸ªå¯èƒ½å‡ºç° long taskï¼Œ1000 ä¸ªå…ƒç´ èƒ½æµ‹åˆ°åå‡ ç§’çº§åˆ«ã€‚(<a href="https://link.juejin.cn?target=https%3A%2F%2Fkizu.dev%2Fshrinkwrap-solution%2F" title="https://kizu.dev/shrinkwrap-solution/" target="_blank" ref="nofollow noopener noreferrer">Kizu</a>)</p>
<p>è¿™ä¸¤æ®µå†…å®¹çš„ä»·å€¼ï¼Œæ›´å¤šåœ¨äºâ€œæŠŠ layout å½“è®¡ç®—æ¨¡å‹â€çš„æ€ç»´ï¼šCSS åœ¨é€æ­¥è·å¾—å¯ç»„åˆã€å¯æ¨å¯¼çš„èƒ½åŠ›ï¼Œå¼€å‘è€…å¼€å§‹èƒ½ç”¨å£°æ˜å¼è§„åˆ™å»é€¼è¿‘è¿‡å»å¿…é¡»å†™è„šæœ¬æ‰èƒ½åšçš„å¸ƒå±€å†³ç­–ã€‚</p>
<hr/>
<h2 data-id="heading-9">è·¨ä¾èµ–çš„ç»ˆæéš¾é¢˜ï¼šèœå•åœºæ™¯ä¾æ—§å¾ˆç¡¬</h2>
<p>æ–‡ç« æŠŠæœ€éš¾çš„ shrinkwrap ç”¨ä¾‹ç•™ç»™äº†â€œå¯¼èˆªèœå•â€ï¼šåŒä¸€è¡Œé‡Œå¤šä¸ª flex items ä¸€èµ·å‚ä¸ç©ºé—´åˆ†é…ï¼Œç©ºé—´ä¸è¶³æ—¶æ•´ä½“æ¢è¡Œã€é—´éš™å˜å¾—å¾ˆéš¾çœ‹ã€‚è¿™ä¸ªåœºæ™¯é‡Œï¼Œæ¯ä¸ª item çš„å¯ç”¨å®½åº¦å–å†³äºå…¶ä»– itemsï¼Œé™åˆ¶å€¼ä¼šåŠ¨æ€å˜åŒ–ï¼ŒåŸºç¡€æŠ€å·§éœ€è¦ä¸€ä¸ªç¨³å®šçš„ limit æ‰èƒ½æˆç«‹ï¼Œå› æ­¤å¾ˆéš¾ç›´æ¥å¥—ç”¨ã€‚(<a href="https://link.juejin.cn?target=https%3A%2F%2Fkizu.dev%2Fshrinkwrap-solution%2F" title="https://kizu.dev/shrinkwrap-solution/" target="_blank" ref="nofollow noopener noreferrer">Kizu</a>)</p>
<p>ä½œè€…ç›®å‰æ‰¾åˆ°çš„å¯è¡Œè·¯çº¿æ˜¯â€œå†…å®¹å¤åˆ¶â€ï¼šå…ˆæ¸²æŸ“ä¸€ä¸ªéšè—ç‰ˆæœ¬è¿›è¡Œæµ‹é‡ï¼ŒæŠŠæ¯ä¸ª item çš„å°ºå¯¸åŒæ­¥åˆ°å¯è§å‰¯æœ¬ï¼Œå†æŠŠæ•´ä¸ªèœå•ä½œä¸ºæ•´ä½“æ”¾è¿›å¦ä¸€å±‚ shrinkwrapï¼Œè®©å®ƒä¹Ÿèƒ½è´´åˆå¹¶æŠŠç©ºé—´è®©ç»™æœç´¢æ¡†ç­‰æ§ä»¶ã€‚(<a href="https://link.juejin.cn?target=https%3A%2F%2Fkizu.dev%2Fshrinkwrap-solution%2F" title="https://kizu.dev/shrinkwrap-solution/" target="_blank" ref="nofollow noopener noreferrer">Kizu</a>)<br/>
ä»–ä¹Ÿæ˜ç¡®è¯´è¿™å¥—å®ç°éå¸¸è„†å¼±ï¼Œæš‚æ—¶ä¸æä¾›å®Œæ•´ä»£ç ï¼Œæ›´å¤šåƒä¸€ä¸ªâ€œæ–¹å‘æŒ‡ç¤ºç‰Œâ€ã€‚</p>
<hr/>
<h2 data-id="heading-10">ä¸€ç»„å¾ˆè½åœ°çš„ç”¨ä¾‹ï¼šæ°”æ³¡ã€legendã€å›¾ç‰‡ captionã€tooltip</h2>
<p>æ–‡ç« ååŠæ®µå¾ˆåƒâ€œè®¾è®¡ç³»ç»Ÿç»„ä»¶ç›®å½•â€ï¼Œæ¯ä¸ªä¾‹å­éƒ½å‡»ä¸­çœŸå®éœ€æ±‚ï¼š(<a href="https://link.juejin.cn?target=https%3A%2F%2Fkizu.dev%2Fshrinkwrap-solution%2F" title="https://kizu.dev/shrinkwrap-solution/" target="_blank" ref="nofollow noopener noreferrer">Kizu</a>)</p>
<ul>
<li><strong>èŠå¤©æ°”æ³¡</strong>ï¼šWeb ä¸Šé•¿æœŸéš¾åšå¾—åƒåŸç”Ÿï¼Œå…³é”®å¡ç‚¹å°±æ˜¯æ¢è¡Œåçš„è´´åˆä¸å¯¹é½ï¼›æ–°æŠ€å·§è®© <code>text-wrap: balance</code> ç»ˆäºèƒ½æ›´ç¨³å®šåœ°å‘æŒ¥ä½œç”¨ã€‚(<a href="https://link.juejin.cn?target=https%3A%2F%2Fkizu.dev%2Fshrinkwrap-solution%2F" title="https://kizu.dev/shrinkwrap-solution/" target="_blank" ref="nofollow noopener noreferrer">Kizu</a>)</li>
<li><strong>fieldset/legend</strong>ï¼šè¿‡å»å¸¸é ä¼ªå…ƒç´ è¡¥è¾¹æ¡†ï¼Œæ–°æŠ€å·§å¯ä»¥è®© legend åœ¨æ¢è¡Œåä¾æ—§è´´åˆï¼Œå¹¶ä¿ç•™åŸç”Ÿè¡Œä¸ºã€‚(<a href="https://link.juejin.cn?target=https%3A%2F%2Fkizu.dev%2Fshrinkwrap-solution%2F" title="https://kizu.dev/shrinkwrap-solution/" target="_blank" ref="nofollow noopener noreferrer">Kizu</a>)</li>
<li><strong>å›¾ç‰‡è¦†ç›– caption</strong>ï¼šåŠé€æ˜èƒŒæ™¯å°½é‡å°‘æŒ¡å›¾ï¼Œæ–‡å­—çŸ­æ²¡é—®é¢˜ï¼Œæ¢è¡Œå°±ä¼šæ¨ªå‘é“ºæ»¡ï¼›shrinkwrap èƒ½è®©èƒŒæ™¯è´´åˆæ–‡æœ¬å—ã€‚(<a href="https://link.juejin.cn?target=https%3A%2F%2Fkizu.dev%2Fshrinkwrap-solution%2F" title="https://kizu.dev/shrinkwrap-solution/" target="_blank" ref="nofollow noopener noreferrer">Kizu</a>)</li>
<li><strong>tooltip/popover</strong>ï¼šæ—¢è¦å‡è¡¡æ’ç‰ˆåˆè¦ä¸Šé™å®½åº¦ï¼Œç¼º shrinkwrap æ—¶å¾ˆå®¹æ˜“â€œå®½å¾—éš¾çœ‹â€ï¼Œæ–°æŠ€å·§èƒ½æŠŠå¼¹å±‚åšå¾—æ›´ç´§å‡‘ã€‚(<a href="https://link.juejin.cn?target=https%3A%2F%2Fkizu.dev%2Fshrinkwrap-solution%2F" title="https://kizu.dev/shrinkwrap-solution/" target="_blank" ref="nofollow noopener noreferrer">Kizu</a>)</li>
</ul>
<p>è¿™äº›ä¾‹å­å…±åŒè¯´æ˜äº†ä¸€ç‚¹ï¼šshrinkwrap ä¸æ˜¯â€œä¸ºäº†çœå‡ åƒç´ â€ï¼Œå®ƒç›´æ¥å½±å“ç»„ä»¶çš„å¯†åº¦ã€èŠ‚å¥ã€å¯¹é½æ„Ÿï¼Œæœ€ç»ˆå½±å“æ•´ä¸ªç•Œé¢çš„é«˜çº§æ„Ÿã€‚</p>
<hr/>
<h2 data-id="heading-11">æœªæ¥å±•æœ›ï¼šåŸç”Ÿ shrinkwrap å¯èƒ½å…ˆä»â€œç®€å•ç‰ˆâ€è½åœ°</h2>
<p>ä½œè€…æœ€åçš„åˆ¤æ–­å¾ˆåŠ¡å®ï¼šåŸç”Ÿå±‚é¢ä¼˜å…ˆè§£å†³â€œæœ€åŸºç¡€çš„ç”¨ä¾‹â€æ›´åˆ’ç®—ï¼Œä¹Ÿå°±æ˜¯<strong>å·²çŸ¥ä¸Šé™çš„ max-inline-size åœºæ™¯</strong>ã€‚è¿™ä¸ªèƒ½åŠ›å¯ä»¥é€šè¿‡æ–°å¢å±æ€§æˆ–æ–°å¢å‡½æ•°æä¾›ï¼Œå¯èƒ½éœ€è¦é…åˆ containment æ¥é¿å…ç™¾åˆ†æ¯”å°ºå¯¸å¼•å…¥å¾ªç¯ä¾èµ–ã€‚ç®€å•ç‰ˆä¸€æ—¦è½åœ°ï¼Œå°±èƒ½è¦†ç›–è¿‡å»åå¤šå¹´é‡Œå¤§é‡çœŸå®éœ€æ±‚ã€‚(<a href="https://link.juejin.cn?target=https%3A%2F%2Fkizu.dev%2Fshrinkwrap-solution%2F" title="https://kizu.dev/shrinkwrap-solution/" target="_blank" ref="nofollow noopener noreferrer">Kizu</a>)</p>
<p>èœå•è¿™ç§è·¨ä¾èµ– shrinkwrap å±äºæ›´å¤æ‚çš„å¸ƒå±€é—®é¢˜ï¼Œå…ˆä¸è¿½æ±‚ä¸€æ­¥åˆ°ä½ã€‚ä½œè€…è®¡åˆ’æŠŠæ–‡ç« é“¾æ¥ä¸ææ¡ˆå‘åˆ° CSSWG çš„ç›¸å…³ issueï¼Œé¼“åŠ±æœ‰æ˜ç¡®ç”¨ä¾‹çš„äººå»è¡¥å……éœ€æ±‚ï¼Œè®©è§„èŒƒè®¨è®ºæ›´è´´è¿‘ç°å®ã€‚(<a href="https://link.juejin.cn?target=https%3A%2F%2Fkizu.dev%2Fshrinkwrap-solution%2F" title="https://kizu.dev/shrinkwrap-solution/" target="_blank" ref="nofollow noopener noreferrer">Kizu</a>)</p>
<hr/>
<h2 data-id="heading-12">ç»™å·¥ç¨‹è½åœ°çš„åˆ¤æ–­ï¼šè¿™å¥—æŠ€å·§é€‚åˆç”¨åœ¨ä»€ä¹ˆåœ°æ–¹</h2>
<p>ç»“åˆä½œè€…çš„å…è´£å£°æ˜å’Œè¿™äº› demo çš„ç‰¹æ€§ï¼Œå¯ä»¥å¾—åˆ°ä¸€ä¸ªå¾ˆæ¸…æ™°çš„è½åœ°è¾¹ç•Œï¼š</p>
<p>è¿™å¥—æŠ€å·§å¾ˆé€‚åˆâ€œå¢å¼ºå‹ä½“éªŒâ€çš„ç»„ä»¶ï¼šå¯ç”¨åæ›´ç²¾è‡´ã€åœç”¨åå¯ç”¨æ€§ä¸å—å½±å“ï¼Œé£æ ¼ä¸ <code>text-wrap: balance</code> å¾ˆæ¥è¿‘ã€‚(<a href="https://link.juejin.cn?target=https%3A%2F%2Fkizu.dev%2Fshrinkwrap-solution%2F" title="https://kizu.dev/shrinkwrap-solution/" target="_blank" ref="nofollow noopener noreferrer">Kizu</a>) å…¸å‹åœºæ™¯å°±æ˜¯è®¾è®¡ç³»ç»Ÿé‡Œçš„è£…é¥°æ€§å®¹å™¨ï¼šæ°”æ³¡ã€å¾½æ ‡ã€æ ‡é¢˜æ ‡ç­¾ã€å›¾ç‰‡è§’æ ‡ã€tooltipã€‚</p>
<p>å¯¹äºå¼ºäº¤äº’ã€å¼ºä¸€è‡´æ€§è¦æ±‚çš„æ ¸å¿ƒä¸šåŠ¡å¸ƒå±€ï¼Œéœ€è¦æ›´ä¿å®ˆï¼šä¸€æ–¹é¢æµè§ˆå™¨æ”¯æŒä»åœ¨æ¼”è¿›ï¼Œå¦ä¸€æ–¹é¢ä½œè€…å·²ç»é‡åˆ°è¿‡ Safari å´©æºƒä¸ chaining å…¼å®¹é—®é¢˜ã€‚(<a href="https://link.juejin.cn?target=https%3A%2F%2Fkizu.dev%2Fshrinkwrap-solution%2F" title="https://kizu.dev/shrinkwrap-solution/" target="_blank" ref="nofollow noopener noreferrer">Kizu</a>) è¿™ç±»åœºæ™¯æ›´é€‚åˆæŠŠå®ƒå½“æˆâ€œå¯æ’æ‹”çš„å¢å¼ºå±‚â€ï¼Œç”¨ <code>@supports</code> æ§åˆ¶å¯ç”¨èŒƒå›´ï¼ŒæŠŠé£é™©éš”ç¦»åœ¨å¯å›é€€çš„å±‚é‡Œã€‚</p>
<hr/>
<h2 data-id="heading-13">ç»“è¯­ï¼šCSS æ­£åœ¨è·å¾—â€œæµ‹é‡ä¸åé¦ˆâ€çš„é—­ç¯</h2>
<p>è¿™ç¯‡æ–‡ç« çœŸæ­£è®©äººå…´å¥‹çš„ç‚¹ï¼Œæœªå¿…æ˜¯â€œç»ˆäºèƒ½åš shrinkwrap äº†â€ï¼Œè€Œæ˜¯ CSS çš„èƒ½åŠ›è¾¹ç•Œæ­£åœ¨å‘ç”Ÿå˜åŒ–ï¼š</p>
<p>Anchor positioning è®©å…ƒç´ ä¹‹é—´çš„å‡ ä½•å…³ç³»å˜å¾—å¯å¼•ç”¨ï¼›scroll-driven animations è®©â€œä½ç½®/å¯è§æ€§â€å˜æˆå¯è®¡ç®—çš„è¿ç»­å˜é‡ï¼›<code>@property</code> è®©å˜é‡å…·å¤‡ç±»å‹ä¸æ’å€¼è¯­ä¹‰ï¼›å®¹å™¨æŸ¥è¯¢è®©ç»„ä»¶èƒ½è¯»å–è‡ªèº«æ‰€å¤„ç¯å¢ƒã€‚(<a href="https://link.juejin.cn?target=https%3A%2F%2Fkizu.dev%2Fshrinkwrap-solution%2F" title="https://kizu.dev/shrinkwrap-solution/" target="_blank" ref="nofollow noopener noreferrer">Kizu</a>)</p>
<p>å½“è¿™äº›èƒ½åŠ›å¼€å§‹äº’ç›¸å’¬åˆï¼ŒCSS å°±å‡ºç°äº†ä¸€æ¡æ–°çš„è·¯å¾„ï¼š<strong>å¸ƒå±€ä¸ä»…èƒ½å£°æ˜ï¼Œè¿˜èƒ½æ¨å¯¼ï¼›æ ·å¼ä¸ä»…èƒ½æè¿°ï¼Œè¿˜èƒ½è®¡ç®—ï¼›ç»„ä»¶ä¸ä»…èƒ½æ¸²æŸ“ï¼Œè¿˜èƒ½è‡ªé€‚åº”åœ°å›å†™è‡ªèº«çº¦æŸ</strong>ã€‚</p>
<p>ä½ å¯ä»¥æŠŠè¿™ç¯‡æ–‡ç« å½“æˆä¸€æ¬¡â€œæœªæ¥ CSSâ€çš„é¢„æ¼”ã€‚å®ƒå·²ç»èƒ½åœ¨éƒ¨åˆ†ç¨³å®šç‰ˆæµè§ˆå™¨é‡Œå·¥ä½œï¼Œä¹Ÿå·²ç»èƒ½è§£å†³ä¸€æ‰¹éå¸¸çœŸå®çš„ UI ç—›ç‚¹ã€‚å‰©ä¸‹çš„ï¼Œå°±æ˜¯æŠŠè¿™äº›å®éªŒæ€§çš„ç»„åˆï¼Œé€æ­¥æ²‰æ·€æˆæ›´æœ´ç´ ã€æ›´å¯é çš„åŸç”Ÿèƒ½åŠ›ã€‚(<a href="https://link.juejin.cn?target=https%3A%2F%2Fkizu.dev%2Fshrinkwrap-solution%2F" title="https://kizu.dev/shrinkwrap-solution/" target="_blank" ref="nofollow noopener noreferrer">Kizu</a>)</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è®¾è®¡æ¨¡å¼ï¼šå¸¦ä½ ç”¨çœŸå®ä¸šåŠ¡æ–¹æ³•+Springæºç å»ç†è§£æ¨¡æ¿ + å›è°ƒ]]></title>    <link>https://juejin.cn/post/7604761524976549897</link>    <guid>https://juejin.cn/post/7604761524976549897</guid>    <pubDate>2026-02-10T02:53:58.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604761524976549897" data-draft-id="7604701848150441984" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è®¾è®¡æ¨¡å¼ï¼šå¸¦ä½ ç”¨çœŸå®ä¸šåŠ¡æ–¹æ³•+Springæºç å»ç†è§£æ¨¡æ¿ + å›è°ƒ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-02-10T02:53:58.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä»£ç ä¸°"/> <meta itemprop="url" content="https://juejin.cn/user/3732161238663437"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è®¾è®¡æ¨¡å¼ï¼šå¸¦ä½ ç”¨çœŸå®ä¸šåŠ¡æ–¹æ³•+Springæºç å»ç†è§£æ¨¡æ¿ + å›è°ƒ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3732161238663437/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä»£ç ä¸°
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-10T02:53:58.000Z" title="Tue Feb 10 2026 02:53:58 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€ä»€ä¹ˆæ˜¯æ¨¡ç‰ˆ+å›è°ƒ</h2>
<p>ä½ è‚¯å®šè§åˆ°è¿‡ç±»ä¼¼è¿™æ ·çš„ ä»£ç </p>
<pre><code class="hljs language-bash" lang="bash">              TransactionUtil.doInTransactionWithRequires(() -&gt; {
               // æ‰§è¡Œè¿™ä¸ªäº‹åŠ¡
                });
</code></pre>
<p>è€ŒdoInTransactionWithRequires è¿™ä¸ªæ–¹æ³•æ¥æ”¶ä¸€ä¸ªå‡½æ•°å¼æ–¹æ³•<br/>
supplier ç„¶åå†…éƒ¨å»è°ƒç”¨è¿™ä¸ªæ–¹æ³•</p>
<pre><code class="hljs language-bash" lang="bash">  doInTransactionWithRequiresï¼ˆSuppler&lt;T&gt; supplierï¼‰		{
	T result = supplier.get()
}
</code></pre>
<p><strong>è¿™ä¸ªå°±æ˜¯æ¨¡ç‰ˆ+å›è°ƒ</strong></p>
<blockquote>
<p>æ¨¡æ¿è´Ÿè´£â€œæµç¨‹éª¨æ¶â€ï¼Œ<br/>
å›è°ƒè´Ÿè´£â€œå˜åŒ–ç‚¹æ³¨å…¥â€ã€‚</p>
</blockquote>
<h2 data-id="heading-1">äºŒã€å…ˆçœ‹â€œçº¯æ¨¡æ¿æ–¹æ³•â€çš„é—®é¢˜</h2>
<p>ä¼ ç»Ÿçš„æ¨¡æ¿æ–¹æ³•æ¨¡å¼é•¿è¿™æ ·ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">public abstract class AbstractTask {

    public final void <span class="hljs-function"><span class="hljs-title">execute</span></span>() {
        before();
        doExecute();
        after();
    }

    protected void <span class="hljs-function"><span class="hljs-title">before</span></span>() {}
    protected abstract void doExecute();
    protected void <span class="hljs-function"><span class="hljs-title">after</span></span>() {}
}
</code></pre>
<p>å­ç±»ç»§æ‰¿ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">public class OrderTask extends AbstractTask {
    @Override
    protected void <span class="hljs-function"><span class="hljs-title">doExecute</span></span>() {      
    }
}
</code></pre>
<blockquote>
<p>è¿™ä¸ªæ–¹æ¡ˆçš„é—®é¢˜åœ¨å·¥ç¨‹é‡Œå¾ˆæ˜æ˜¾ï¼š</p>
<p>å¼ºä¾èµ–ç»§æ‰¿</p>
<p>å­ç±»è¶Šæ¥è¶Šå¤š</p>
<p>ä¸€ä¸ªç±»åªèƒ½ç»§æ‰¿ä¸€ä¸ªçˆ¶ç±»</p>
<p>è¡Œä¸ºç»„åˆéå¸¸å›°éš¾</p>
<p>æ‰€ä»¥åœ¨å¤§å‹æ¡†æ¶é‡Œï¼Œçº¯ç»§æ‰¿æ¨¡æ¿å‡ ä¹ä¸ç”¨äº†ã€‚</p>
</blockquote>
<h2 data-id="heading-2">ä¸‰ã€æ¨¡æ¿ + å›è°ƒï¼šæŠŠâ€œå˜åŒ–â€ä»ç»§æ‰¿å˜æˆå‚æ•°</h2>
<p>æ ¸å¿ƒæ€æƒ³</p>
<blockquote>
<p>ä¸å†é å­ç±»é‡å†™æ–¹æ³•ï¼Œ è€Œæ˜¯æŠŠâ€œå˜åŒ–çš„é€»è¾‘â€ä½œä¸ºå‚æ•°ä¼ è¿›å»</p>
<p>è¿™ä¸ªâ€œå‚æ•°â€ï¼Œå°±æ˜¯ å›è°ƒï¼ˆCallbackï¼‰ã€‚</p>
</blockquote>
<h2 data-id="heading-3">å››ã€æºç æ¡ˆä¾‹Spring çš„TransactionTemplateï¼š</h2>
<p>å†çœ‹ Spring æä¾›çš„ TransactionTemplateï¼š</p>
<pre><code class="hljs language-bash" lang="bash">transactionTemplate.execute(status -&gt; {
    userDao.update(user);
    orderDao.create(order);
    <span class="hljs-built_in">return</span> result;
});
</code></pre>
<p>å¯¹åº”æºç é‡Œçš„æ ¸å¿ƒé€»è¾‘:</p>
<pre><code class="hljs language-bash" lang="bash">TransactionStatus status = transactionManager.getTransaction(definition);
try {
    T result = action.doInTransaction(status); 
    transactionManager.commit(status);
    <span class="hljs-built_in">return</span> result;
} catch (Exception ex) {
    transactionManager.rollback(status);
    throw ex;
}
</code></pre>
<h2 data-id="heading-4">äº”ã€æºç æ¡ˆä¾‹ JdbcTemplate</h2>
<p>Spring JDBC é‡Œæœ€ç»å…¸çš„ JdbcTemplateï¼š</p>
<pre><code class="hljs language-bash" lang="bash">jdbcTemplate.query(
    <span class="hljs-string">"select * from user"</span>,
    (rs, rowNum) -&gt; new User(rs.getLong(<span class="hljs-string">"id"</span>), rs.getString(<span class="hljs-string">"name"</span>))
);
</code></pre>
<p>ä¼ è¿›å»çš„ RowMapperï¼Œå°±æ˜¯å›è°ƒã€‚</p>
<p>JdbcTemplate å†…éƒ¨åšçš„äº‹æ˜¯å›ºå®šçš„ï¼š</p>
<p>å˜åŒ–ç‚¹åªæœ‰ä¸€è¡Œï¼š</p>
<pre><code class="hljs language-bash" lang="bash">rowMapper.mapRow(rs, rowNum);
</code></pre>
<h2 data-id="heading-5">å…­ã€æ€»ç»“</h2>
<blockquote>
<p>æ¨¡æ¿ + å›è°ƒå¹¶ä¸ç­‰äºâ€œç»§æ‰¿ + æŠ½è±¡æ–¹æ³•â€ã€‚<br/>
åœ¨ç°ä»£ Java é¡¹ç›®é‡Œï¼Œå®ƒæ›´å¤šä»¥ å‡½æ•°å¼æ¥å£ + Lambda çš„å½¢å¼å‡ºç°ã€‚</p>
<p>ä¸ç®¡æ˜¯å…¬å¸äº‹åŠ¡å·¥å…·ç±»ã€Spring TransactionTemplateï¼Œè¿˜æ˜¯ JdbcTemplateï¼Œæœ¬è´¨éƒ½æ˜¯åŒä¸€å¥—æ€æƒ³ï¼š<br/>
æ¨¡æ¿è´Ÿè´£æµç¨‹ï¼Œå›è°ƒè´Ÿè´£å˜åŒ–ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Express å¦‚ä½•ä½¿ç”¨ multer æ–‡ä»¶ä¸Šä¼ ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7604697194795597834</link>    <guid>https://juejin.cn/post/7604697194795597834</guid>    <pubDate>2026-02-10T02:27:20.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604697194795597834" data-draft-id="7600414546189041674" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Express å¦‚ä½•ä½¿ç”¨ multer æ–‡ä»¶ä¸Šä¼ ï¼Ÿ"/> <meta itemprop="keywords" content="å‰ç«¯,NestJS,Node.js"/> <meta itemprop="datePublished" content="2026-02-10T02:27:20.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‰ç«¯ä»˜è±ª"/> <meta itemprop="url" content="https://juejin.cn/user/1741228277763278"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Express å¦‚ä½•ä½¿ç”¨ multer æ–‡ä»¶ä¸Šä¼ ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1741228277763278/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‰ç«¯ä»˜è±ª
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-10T02:27:20.000Z" title="Tue Feb 10 2026 02:27:20 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>Nest çš„æ–‡ä»¶ä¸Šä¼ æ˜¯åŸºäº Express çš„ä¸­é—´ä»¶ multer å®ç°çš„ï¼Œåœ¨å­¦ä¹  Nest æ–‡ä»¶ä¸Šä¼ ä¹‹å‰ï¼Œå…ˆå­¦ä¹ ä¸‹ multer åŒ…çš„ä½¿ç”¨</p>
<p>æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dbb2818343724a1e8dd765d828d1a72f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5LuY6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771295240&amp;x-signature=V%2FZEiXtDQtOYpW4X%2BBHSTCIbaZM%3D" alt="image.png" loading="lazy"/></p>
<p>cors åŒ…æ˜¯å¤„ç†è·¨åŸŸ header</p>
<p>index.js</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> express = <span class="hljs-built_in">require</span>(<span class="hljs-string">'express'</span>)
<span class="hljs-keyword">const</span> multer  = <span class="hljs-built_in">require</span>(<span class="hljs-string">'multer'</span>)
<span class="hljs-keyword">const</span> cors = <span class="hljs-built_in">require</span>(<span class="hljs-string">'cors'</span>);

<span class="hljs-keyword">const</span> app = <span class="hljs-title function_">express</span>()
app.<span class="hljs-title function_">use</span>(<span class="hljs-title function_">cors</span>());

<span class="hljs-keyword">const</span> upload = <span class="hljs-title function_">multer</span>({ <span class="hljs-attr">dest</span>: <span class="hljs-string">'uploads/'</span> })

app.<span class="hljs-title function_">post</span>(<span class="hljs-string">'/aaa'</span>, upload.<span class="hljs-title function_">single</span>(<span class="hljs-string">'aaa'</span>), <span class="hljs-keyword">function</span> (<span class="hljs-params">req, res, next</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'req.file'</span>, req.<span class="hljs-property">file</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'req.body'</span>, req.<span class="hljs-property">body</span>);
})

app.<span class="hljs-title function_">listen</span>(<span class="hljs-number">3000</span>);
</code></pre>
<p>æ–°å»º index.html</p>
<p>é€šè¿‡ FormData + axios ä¸Šä¼ æ–‡ä»¶ï¼ŒæŒ‡å®šå†…å®¹çš„ä¼ è¾“æ ¼å¼ content-type ä¸º multipart/form-dataã€‚</p>
<p>ï¼ˆaxios ä¼šè‡ªåŠ¨æ ¹æ®å†…å®¹æŒ‡å®š content-typeï¼Œä¸éœ€è¦æ‰‹åŠ¨æŒ‡å®šï¼‰</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;!doctype <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">"X-UA-Compatible"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"IE=edge"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Document<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://unpkg.com/axios@0.24.0/dist/axios.min.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"fileInput"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"file"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
      <span class="hljs-keyword">const</span> fileInput = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">"#fileInput"</span>);

      <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">formData</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FormData</span>();
        data.<span class="hljs-title function_">set</span>(<span class="hljs-string">"name"</span>, <span class="hljs-string">"fuhao"</span>);
        data.<span class="hljs-title function_">set</span>(<span class="hljs-string">"age"</span>, <span class="hljs-number">18</span>);
        data.<span class="hljs-title function_">set</span>(<span class="hljs-string">"aaa"</span>, fileInput.<span class="hljs-property">files</span>[<span class="hljs-number">0</span>]);

        <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> axios.<span class="hljs-title function_">post</span>(<span class="hljs-string">"http://localhost:3000/aaa"</span>, data);
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(res);
      }

      fileInput.<span class="hljs-property">onchange</span> = formData;
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>

</code></pre>
<p>ç”¨ node æŠŠ server è·‘èµ·æ¥ï¼Œå¹¶ä¸”ç”¨ http-server æŠŠé™æ€æœåŠ¡è·‘èµ·æ¥</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/962100ebe26a4c65a0027264ef3f6d25~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5LuY6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771295240&amp;x-signature=xNt3FaBV4MOK1MpTVaQ8%2FvMwztU%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c940d361e4e649e8b645f42c82d25c48~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5LuY6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771295240&amp;x-signature=6a0fcMcQ3IVt%2FTXXX1dMViS4gaU%3D" alt="image.png" loading="lazy"/></p>
<p>ä¸Šä¼ æ–‡ä»¶</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7bf7dd11d32c4afbbec5ab26baa731d2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5LuY6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771295240&amp;x-signature=qyTvYfn3aOqm4%2FtAPw%2Bj8ZVlCYo%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1eef38859dcd4aa2bbdc6dad91e02ca1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5LuY6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771295240&amp;x-signature=QgOXgHsKK%2F7fQ6%2FCQrCuZumftaE%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/050f420dc372467d8c90ba6554ad3c87~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5LuY6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771295240&amp;x-signature=zf%2FLnfyo6I6IjEuVIi%2F%2BlY%2BQyFA%3D" alt="image.png" loading="lazy"/></p>
<p>è¿™å°±æ˜¯ form-data çš„ä¼ è¾“æ ¼å¼</p>
<p>æœåŠ¡ç«¯çœ‹ä¸‹</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a63f784d97eb4afaa981ac3ab7b2e35d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5LuY6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771295240&amp;x-signature=WUsTs6mHRiBkl6GkHMJUpLjNOHQ%3D" alt="image.png" loading="lazy"/></p>
<p>req.file æ‹¿åˆ°æ–‡ä»¶å­—æ®µï¼Œéæ–‡ä»¶å­—æ®µåœ¨ req.body</p>
<p>æœåŠ¡ç«¯å¤šäº† uploads ç›®å½•ï¼Œä¸‹é¢ä¿å­˜ç€ä¸Šä¼ æ–‡ä»¶</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4032e4c65f4e4593a33e712653a1b351~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5LuY6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771295240&amp;x-signature=LnmDNyCoL9yzlEoyK3dU4pqh3wY%3D" alt="image.png" loading="lazy"/></p>
<p>è¿™æ˜¯å•æ–‡ä»¶ ä¸Šä¼  é‚£å¤šæ–‡ä»¶ä¸Šä¼ å‘¢ï¼Ÿ</p>
<p>index.js æ·»åŠ  /bbb</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> express = <span class="hljs-built_in">require</span>(<span class="hljs-string">'express'</span>)
<span class="hljs-keyword">const</span> multer  = <span class="hljs-built_in">require</span>(<span class="hljs-string">'multer'</span>)
<span class="hljs-keyword">const</span> cors = <span class="hljs-built_in">require</span>(<span class="hljs-string">'cors'</span>);

<span class="hljs-keyword">const</span> app = <span class="hljs-title function_">express</span>()
app.<span class="hljs-title function_">use</span>(<span class="hljs-title function_">cors</span>());

<span class="hljs-keyword">const</span> upload = <span class="hljs-title function_">multer</span>({ <span class="hljs-attr">dest</span>: <span class="hljs-string">'uploads/'</span> })

app.<span class="hljs-title function_">post</span>(<span class="hljs-string">'/aaa'</span>, upload.<span class="hljs-title function_">single</span>(<span class="hljs-string">'aaa'</span>), <span class="hljs-keyword">function</span> (<span class="hljs-params">req, res, next</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'req.file'</span>, req.<span class="hljs-property">file</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'req.body'</span>, req.<span class="hljs-property">body</span>);
})

app.<span class="hljs-title function_">post</span>(<span class="hljs-string">'/bbb'</span>, upload.<span class="hljs-title function_">array</span>(<span class="hljs-string">'bbb'</span>, <span class="hljs-number">2</span>), <span class="hljs-keyword">function</span> (<span class="hljs-params">req, res, next</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'req.files'</span>, req.<span class="hljs-property">files</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'req.body'</span>, req.<span class="hljs-property">body</span>);
})

app.<span class="hljs-title function_">listen</span>(<span class="hljs-number">3000</span>);
</code></pre>
<p>index.html æ”¯æŒå¤šæ–‡ä»¶</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;!doctype <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">"X-UA-Compatible"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"IE=edge"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Document<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://unpkg.com/axios@0.24.0/dist/axios.min.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"fileInput"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"file"</span> <span class="hljs-attr">multiple</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
      <span class="hljs-keyword">const</span> fileInput = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">"#fileInput"</span>);

      <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">formData2</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FormData</span>();
        data.<span class="hljs-title function_">set</span>(<span class="hljs-string">"name"</span>, <span class="hljs-string">"fuhao"</span>);
        data.<span class="hljs-title function_">set</span>(<span class="hljs-string">"age"</span>, <span class="hljs-number">20</span>);
        [...fileInput.<span class="hljs-property">files</span>].<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> {
          data.<span class="hljs-title function_">append</span>(<span class="hljs-string">"bbb"</span>, item);
        });

        <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> axios.<span class="hljs-title function_">post</span>(<span class="hljs-string">"http://localhost:3000/bbb"</span>, data);
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(res);
      }

      fileInput.<span class="hljs-property">onchange</span> = formData2;
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>

</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c107d66c82e3428392481eb993989dbc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5LuY6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771295240&amp;x-signature=C4715%2Ba8k34wXLA0feiChUe%2FPJk%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/df5ccda136f14eeeb733528b7698c495~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5LuY6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771295240&amp;x-signature=Bax8NXiLKvKaR24xEThEqa%2FvHcc%3D" alt="image.png" loading="lazy"/></p>
<p>å¦‚æœè¶…è¿‡ 2ä¸ªæ–‡ä»¶ å°±ä¼šé»˜è®¤æŠ¥é”™</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3a8690c66990452fabf78bf08dd146dc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5LuY6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771295240&amp;x-signature=LkR5buaPmaPH5%2FtlTeeL723lpLc%3D" alt="image.png" loading="lazy"/></p>
<p>æ”¹ä¸€ä¸‹è¿™ä¸ª é”™è¯¯</p>
<pre><code class="hljs language-lua" lang="lua">
app.post(<span class="hljs-string">'/bbb'</span>, upload.array(<span class="hljs-string">'bbb'</span>, <span class="hljs-number">2</span>), <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(req, res, next)</span></span> {
    console.<span class="hljs-built_in">log</span>(<span class="hljs-string">'req.files'</span>, req.files);
    console.<span class="hljs-built_in">log</span>(<span class="hljs-string">'req.body'</span>, req.body);
}, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(err, req, res, next)</span></span> {
    <span class="hljs-keyword">if</span>(err instanceof multer.MulterError &amp;&amp; err.code === <span class="hljs-string">'LIMIT_UNEXPECTED_FILE'</span>) {
        res.<span class="hljs-built_in">status</span>(<span class="hljs-number">400</span>).<span class="hljs-keyword">end</span>(<span class="hljs-string">'Too many files uploaded'</span>);
    }
})
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1715dc1de9504c7a976d1e756027504a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5LuY6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771295240&amp;x-signature=gfQxOMb30z3BN8FX%2BajmxM7QjYo%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/72826043d55845b18ba2c11625effb83~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5LuY6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771295240&amp;x-signature=5LEvegVTJLLaAnVyJIkr0Y1HFhE%3D" alt="image.png" loading="lazy"/></p>
<p>æ›´å¤æ‚ä¸€ç‚¹çš„æƒ…å†µï¼Œå¦‚æœå¤šä¸ªå­—æ®µéƒ½ä¼šä¸Šä¼ æ–‡ä»¶ï¼Œè€Œä¸”é™åˆ¶ä¹Ÿéƒ½ä¸åŒå‘¢ï¼Ÿ</p>
<p>index.js æ›´æ–°</p>
<pre><code class="hljs language-less" lang="less">
<span class="hljs-selector-tag">app</span><span class="hljs-selector-class">.post</span>(<span class="hljs-string">'/ccc'</span>, upload.<span class="hljs-built_in">fields</span>([
    { <span class="hljs-attribute">name</span>: <span class="hljs-string">'aaa'</span>, <span class="hljs-attribute">maxCount</span>: <span class="hljs-number">3</span> },
    { <span class="hljs-attribute">name</span>: <span class="hljs-string">'bbb'</span>, <span class="hljs-attribute">maxCount</span>: <span class="hljs-number">2</span> }
]), function (req, res, next) {
    <span class="hljs-selector-tag">console</span><span class="hljs-selector-class">.log</span>(<span class="hljs-string">'req.files'</span>, req.files);
    <span class="hljs-selector-tag">console</span><span class="hljs-selector-class">.log</span>(<span class="hljs-string">'req.body'</span>, req.body);
})
</code></pre>
<p>index.html æ›´æ–°</p>
<pre><code class="hljs language-ini" lang="ini">      async function formData3() {
        const <span class="hljs-attr">data</span> = new FormData()<span class="hljs-comment">;</span>
        data.set("name", "fuhao")<span class="hljs-comment">;</span>
        data.set("age", 20)<span class="hljs-comment">;</span>
        data.append("aaa", fileInput.files<span class="hljs-section">[0]</span>)<span class="hljs-comment">;</span>
        data.append("aaa", fileInput.files<span class="hljs-section">[1]</span>)<span class="hljs-comment">;</span>
        data.append("bbb", fileInput.files<span class="hljs-section">[2]</span>)<span class="hljs-comment">;</span>
        data.append("bbb", fileInput.files<span class="hljs-section">[3]</span>)<span class="hljs-comment">;</span>

        const <span class="hljs-attr">res</span> = await axios.post(<span class="hljs-string">"http://localhost:3000/ccc"</span>, data)<span class="hljs-comment">;</span>
        console.log(res)<span class="hljs-comment">;</span>
      }

      <span class="hljs-attr">fileInput.onchange</span> = formData3<span class="hljs-comment">;</span>
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9a0c9770a5b14038b1ad395c985407b8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5LuY6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771295240&amp;x-signature=k2Tagf0lxHu5EWefBQevUliKeEU%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1d9afb21f8584aa8ae1aaa7c278b3e95~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5LuY6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771295240&amp;x-signature=lqN%2B0vaPQ30sBTF6SWmQECJrUjM%3D" alt="image.png" loading="lazy"/></p>
<p>å¦‚ä½•ä¿®æ”¹ä¿å­˜çš„æ–‡ä»¶åï¼Ÿ</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> express = <span class="hljs-built_in">require</span>(<span class="hljs-string">'express'</span>)
<span class="hljs-keyword">const</span> multer  = <span class="hljs-built_in">require</span>(<span class="hljs-string">'multer'</span>)
<span class="hljs-keyword">const</span> cors = <span class="hljs-built_in">require</span>(<span class="hljs-string">'cors'</span>);
<span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">'path'</span>)

<span class="hljs-keyword">const</span> app = <span class="hljs-title function_">express</span>()
app.<span class="hljs-title function_">use</span>(<span class="hljs-title function_">cors</span>());

<span class="hljs-keyword">const</span> storage = multer.<span class="hljs-title function_">diskStorage</span>({
  <span class="hljs-title function_">destination</span>(<span class="hljs-params">req, file, cb</span>) {
    <span class="hljs-title function_">cb</span>(<span class="hljs-literal">null</span>, <span class="hljs-string">'uploads/'</span>)
  },
  <span class="hljs-title function_">filename</span>(<span class="hljs-params">req, file, cb</span>) {
    <span class="hljs-comment">// åŸå§‹æ–‡ä»¶å</span>
    <span class="hljs-keyword">const</span> ext = path.<span class="hljs-title function_">extname</span>(file.<span class="hljs-property">originalname</span>)
    <span class="hljs-keyword">const</span> name = path.<span class="hljs-title function_">basename</span>(file.<span class="hljs-property">originalname</span>, ext)

    <span class="hljs-comment">// è‡ªå®šä¹‰è§„åˆ™</span>
    <span class="hljs-keyword">const</span> newName = <span class="hljs-string">`<span class="hljs-subst">${name}</span>-<span class="hljs-subst">${<span class="hljs-built_in">Date</span>.now()}</span><span class="hljs-subst">${ext}</span>`</span>

    <span class="hljs-title function_">cb</span>(<span class="hljs-literal">null</span>, newName)
  }
})

<span class="hljs-keyword">const</span> upload = <span class="hljs-title function_">multer</span>({ storage })

app.<span class="hljs-title function_">post</span>(<span class="hljs-string">'/aaa'</span>, upload.<span class="hljs-title function_">single</span>(<span class="hljs-string">'aaa'</span>), <span class="hljs-keyword">function</span> (<span class="hljs-params">req, res, next</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'req.file'</span>, req.<span class="hljs-property">file</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'req.body'</span>, req.<span class="hljs-property">body</span>);
})

app.<span class="hljs-title function_">post</span>(<span class="hljs-string">'/bbb'</span>, upload.<span class="hljs-title function_">array</span>(<span class="hljs-string">'bbb'</span>, <span class="hljs-number">2</span>), <span class="hljs-keyword">function</span> (<span class="hljs-params">req, res, next</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'req.files'</span>, req.<span class="hljs-property">files</span>);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'req.body'</span>, req.<span class="hljs-property">body</span>);
}, <span class="hljs-keyword">function</span>(<span class="hljs-params">err, req, res, next</span>) {
    <span class="hljs-keyword">if</span>(err <span class="hljs-keyword">instanceof</span> multer.<span class="hljs-property">MulterError</span> &amp;&amp; err.<span class="hljs-property">code</span> === <span class="hljs-string">'LIMIT_UNEXPECTED_FILE'</span>) {
        res.<span class="hljs-title function_">status</span>(<span class="hljs-number">400</span>).<span class="hljs-title function_">end</span>(<span class="hljs-string">'Too many files uploaded'</span>);
    }
})

app.<span class="hljs-title function_">post</span>(<span class="hljs-string">'/ccc'</span>, upload.<span class="hljs-title function_">fields</span>([
    { <span class="hljs-attr">name</span>: <span class="hljs-string">'aaa'</span>, <span class="hljs-attr">maxCount</span>: <span class="hljs-number">3</span> },
    { <span class="hljs-attr">name</span>: <span class="hljs-string">'bbb'</span>, <span class="hljs-attr">maxCount</span>: <span class="hljs-number">2</span> }
]), <span class="hljs-keyword">function</span> (<span class="hljs-params">req, res, next</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'req.files'</span>, req.<span class="hljs-property">files</span>);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'req.body'</span>, req.<span class="hljs-property">body</span>);
})


app.<span class="hljs-title function_">listen</span>(<span class="hljs-number">3000</span>);
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/95f31046412e491bafc84786468bee53~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5LuY6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771295240&amp;x-signature=TuO4ewhO4oqB%2Fw4a0QFANM8Bf2I%3D" alt="image.png" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å…³äºElpiså…¨æ ˆæ¡†æ¶ï¼ŒDSLæ¨¡ç‰ˆå¼•æ“çš„ä¸€äº›ä¸ªäººæ€è€ƒ]]></title>    <link>https://juejin.cn/post/7604701848150392832</link>    <guid>https://juejin.cn/post/7604701848150392832</guid>    <pubDate>2026-02-10T02:34:05.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604701848150392832" data-draft-id="7604493165329006626" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å…³äºElpiså…¨æ ˆæ¡†æ¶ï¼ŒDSLæ¨¡ç‰ˆå¼•æ“çš„ä¸€äº›ä¸ªäººæ€è€ƒ"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-02-10T02:34:05.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ‡¿ç”Ÿæ‰€çˆ±"/> <meta itemprop="url" content="https://juejin.cn/user/1830001704964680"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å…³äºElpiså…¨æ ˆæ¡†æ¶ï¼ŒDSLæ¨¡ç‰ˆå¼•æ“çš„ä¸€äº›ä¸ªäººæ€è€ƒ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1830001704964680/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ‡¿ç”Ÿæ‰€çˆ±
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-10T02:34:05.000Z" title="Tue Feb 10 2026 02:34:05 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å…³äºElpiså…¨æ ˆæ¡†æ¶ï¼ŒDSLæ¨¡ç‰ˆå¼•æ“çš„ä¸€äº›ä¸ªäººæ€è€ƒ</h2>
<p>ç°é˜¶æ®µï¼Œå¤§éƒ¨åˆ†å‰ç«¯ç¨‹åºå‘˜çš„å·¥ä½œå†…å®¹éƒ½æ¯”è¾ƒæ¯ç‡¥ï¼Œä¸”è¿›è¡Œä¸€äº›æ— æ„ä¹‰çš„è‹¦åŠ›åŠ³åŠ¨ï¼Œå¦‚ä¸‹ï¼š</p>
<p>1.å·¥ä½œä¸­å¤§éƒ¨åˆ†å·¥ä½œæ˜¯é‡å¤æ€§çš„CRUD
2.é¡¹ç›®ä¸­å­˜åœ¨å¤§é‡çš„å±å±±ä»£ç ï¼Œä»£ç ç»´æŠ¤æ€§å·®
3.ä»£ç ç¨‹åºé€»è¾‘æ€§å·®ï¼Œçœ‹èµ·æ¥å¾ˆéš¾ç†è§£</p>
<p>åœ¨Elpisä¸­ï¼Œå°†å’±ä»¬ç¨‹åºå‘˜ç°é˜¶æ®µå­˜åœ¨çš„ä¸€äº›ç—›ç‚¹ï¼Œè¿›è¡Œçš„äº†æ•´åˆï¼Œåˆ©ç”¨DSLé¢†åŸŸæ¨¡å‹ï¼Œå°†æ²‰æ·€å½“ä¸‹ç¨‹åºå‘˜80%çš„é‡å¤æ€§å·¥ä½œï¼Œå°†å¼€å‘çš„ç²¾åŠ›æ”¾åœ¨20%çš„å¯æ‰©å±•æ€§çš„å¼€å‘å·¥ä½œä¸­ã€‚</p>
<h2 data-id="heading-1">å…³äºDSLçš„è®¾è®¡</h2>
<p>1.åœ¨elpisé¡¹ç›®ä¸­ï¼ŒDSLæ¨¡ç‰ˆå¼•æ“çš„ä¸€äº›åŸºç¡€é…ç½®ï¼Œé…ç½®å¦‚å›¾ï¼š</p>
<pre><code class="hljs language-module.exports" lang="module.exports">      model: '', //æ¨¡ç‰ˆç±»å‹ï¼Œä¸åŒæ¨¡ç‰ˆç±»å‹å¯¹åº”ä¸ä¸€æ ·çš„æ¨¡ç‰ˆæ•°æ®ç»“æ„
      name: '',//æ¨¡ç‰ˆåç§°
      desc:'',//æ¨¡ç‰ˆæè¿°
      icon:'',//æ¨¡ç‰ˆå›¾æ ‡
      menu: [
         {
          key: '', //èœå•å”¯ä¸€æ ‡è¯†
          name: '',//èœå•åç§°
          menuType: '',//èœå•ç±»å‹ï¼Œæšä¸¾å€¼ï¼šgroup / module
          moduleType: '',// æšä¸¾å€¼ï¼šsider/iframe/custom/schema
          }ï¼Œ...]
       }
</code></pre>
<p>é€šè¿‡å›¾ä¸­çš„æ¨¡ç‰ˆé…ç½®ï¼Œå®Œæˆå¯¹é¡µé¢çš„åŸºç¡€é…ç½®ã€‚
2.åœ¨å®Œæˆå¯¹é¡¹ç›®çš„åŸºç¡€é…ç½®ä¹‹åï¼Œéœ€è¦å¤§æ¨¡å—ä¸‹çš„å°æ¨¡å—è¿›è¡Œæ›´ç»†è‡´çš„é…ç½®æ“ä½œï¼š
ï¼ˆ1ï¼‰å½“menuTypeä¸ºgroupçš„æ—¶å€™ï¼Œä¼šåœ¨å½“å‰èœå•ä¸‹äº§ç”Ÿå­èœå•ï¼Œè¿™é‡Œå°±éœ€è¦é€’å½’å»è·å–å½“å‰èœ     å•ä¸‹çš„æ‰€æœ‰çš„å­èœå•è¿›è¡Œå±•ç¤º</p>
<pre><code class="hljs language-ini" lang="ini">//å½“ <span class="hljs-attr">menuType</span> === group æ—¶ï¼Œå¯å¡«
subMenu: <span class="hljs-section">[{
// å¯é€’å½’ menuItem
          }]</span>,
</code></pre>
<p>ï¼ˆ2ï¼‰å½“moduleTypeä¸ºschemaæ—¶ï¼Œè¯´æ˜è¿™éƒ¨åˆ†ä¸ºå’±ä»¬éœ€è¦æ²‰æ·€çš„80%çš„åŠŸèƒ½ï¼Œåœ¨elpisé¡¹ç›®ä¸­é€šè¿‡åˆ©ç”¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fjson-schema.org%2Flearn%2Fgetting-started-step-by-step" target="_blank" title="https://json-schema.org/learn/getting-started-step-by-step" ref="nofollow noopener noreferrer">ã€ŠJSON-SCHEMAã€‹</a>å·¥å…·å®Œæˆç›¸å¯¹åº”çš„é…ç½®ï¼š</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">//å½“ moduleType === schema æ—¶</span>

schemaConfig: {

api:<span class="hljs-string">''</span>,<span class="hljs-comment">//æ•°æ®æºAPIï¼ˆéµå¾ª RESTFUL è§„èŒƒï¼‰</span>

schema:{<span class="hljs-comment">//æ¿å—æ•°æ®ç»“æ„</span>

<span class="hljs-keyword">type</span>:<span class="hljs-string">'object'</span>,

properties:{

key:{

...schema,<span class="hljs-comment">//æ ‡å‡† scheam é…ç½®</span>

<span class="hljs-keyword">type</span>:<span class="hljs-string">''</span>,<span class="hljs-comment">//å­—æ®µç±»å‹</span>

label:<span class="hljs-string">''</span>,<span class="hljs-comment">//å­—æ®µä¸­æ–‡å</span>

<span class="hljs-comment">//å­—æ®µåœ¨ table-bar ä¸­çš„é…ç½®</span>

tableOption:{

...elTableColumnConfig,<span class="hljs-comment">//æ ‡å‡† el-table-column é…ç½®</span>

toFixed:<span class="hljs-number">0</span>,<span class="hljs-comment">//ä¿ç•™å‡ ä½å°æ•°</span>

visiable:<span class="hljs-literal">true</span>,<span class="hljs-comment">//é»˜è®¤ä¸ºtrue(falseæ—¶ï¼Œè¡¨ç¤ºä¸å†è¡¨å•ä¸­æ˜¾ç¤º)</span>

},<span class="hljs-comment">//å­—æ®µåœ¨ tableä¸­çš„ç›¸å…³é…ç½®</span>

<span class="hljs-comment">//å­—æ®µåœ¨ search-bar ä¸­çš„é…ç½®</span>

searchOption:{

...elComponentConfig,<span class="hljs-comment">//æ ‡å‡† el-form é…ç½®</span>

comType:<span class="hljs-string">''</span>,<span class="hljs-comment">//é…ç½®ç»„ä»¶ç±»å‹</span>

<span class="hljs-keyword">default</span>:<span class="hljs-string">''</span>,<span class="hljs-comment">//é»˜è®¤å€¼</span>
<span class="hljs-comment">//comType === 'select'</span>

enumList:[],

<span class="hljs-comment">//comType === 'dynamicSelect'</span>

api:<span class="hljs-string">''</span>

}

}

}

},

tableConfig: {

headerButtons:[{

label:<span class="hljs-string">''</span>,<span class="hljs-comment">//æŒ‰é’®ä¸­æ–‡å</span>

eventKey:<span class="hljs-string">''</span>,<span class="hljs-comment">//æŒ‰é’®äº‹ä»¶å</span>

eventOption:{},<span class="hljs-comment">//æŒ‰é’®äº‹ä»¶å…·ä½“é…ç½®</span>

...elButtonConfig <span class="hljs-comment">//æ ‡å‡† el-buttoné…ç½®</span>

},{}],<span class="hljs-comment">//å¯ä»¥å¤šä¸ªé…ç½®</span>

rowButtons:[{

label:<span class="hljs-string">''</span>,<span class="hljs-comment">//æŒ‰é’®ä¸­æ–‡å</span>

eventKey:<span class="hljs-string">''</span>,<span class="hljs-comment">//æŒ‰é’®äº‹ä»¶å</span>

eventOption:{

<span class="hljs-comment">//å½“ eventKey === â€˜removeâ€™</span>

params:{

<span class="hljs-comment">//paramKey = å‚æ•°çš„é”®å€¼</span>

<span class="hljs-comment">//rowValueKey = å‚æ•°å€¼ï¼Œæ ¼å¼ä¸ºschema::tableKey ï¼Œåˆ°table ä¸­æ‰¾ç›¸åº”çš„å­—æ®µ</span>

paramKey:rowValueKey

}

},<span class="hljs-comment">//æŒ‰é’®äº‹ä»¶å…·ä½“é…ç½®</span>

...elButtonConfig <span class="hljs-comment">//æ ‡å‡† el-buttoné…ç½®</span>

},{}],<span class="hljs-comment">//å¯ä»¥å¤šä¸ªé…ç½®</span>

},<span class="hljs-comment">//table ç›¸å…³é…ç½®</span>
searchConfig:{},<span class="hljs-comment">//search-barç›¸å…³é…ç½®</span>
</code></pre>
<p>åœ¨è¿™é‡Œå¯ä»¥çœ‹åˆ°ï¼Œåœ¨elpisé¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬å¹¶ä¸æ˜¯å»å¯¹æ¯ä¸€ä¸ªé¡µé¢çš„å„ç§ç»„ä»¶ï¼Œä¾‹å¦‚ï¼štableï¼ŒsearchBarç»„ä»¶ç­‰åœ¨æ¯ä¸ªé¡µé¢è¿›è¡Œé‡å¤æ€§çš„å¼€å‘ï¼Œè€Œæ˜¯å°†å„ç§ç»„ä»¶è¿›è¡Œäº†ä¸€ä¸ªæŠ½è±¡çš„æ¨¡ç‰ˆå®šä¹‰ï¼Œè¿™æ ·æˆ‘ä»¬å¯ä»¥é€šè¿‡å¯¹DSLæ¨¡ç‰ˆå¼•æ“çš„é…ç½®ï¼Œå°±å¯ä»¥å®Œæˆå¯¹ä¸åŒèœå•ä¸‹ä¸€äº›é‡å¤æ€§çš„CURDå·¥ä½œå°±è¡Œè€¦åˆå’Œæ²‰æ·€ï¼Œè¿™æ ·ä¹Ÿè®©ä»£ç çš„å¯ç»´æŠ¤æ€§æé«˜ã€‚</p>
<h3 data-id="heading-2">æ€»ç»“</h3>
<p>åœ¨elpisé¡¹ç›®ä¸­ï¼Œé€šè¿‡DSLé¢†åŸŸæ¨¡å‹çš„æ¦‚å¿µï¼Œå°†å‰ç«¯ç¨‹åºå‘˜æ—¥å¸¸å·¥ä½œ80%çš„å·¥ä½œè¿›è¡Œäº†æ•´åˆï¼Œè€Œé€šè¿‡DSlå°†è¿™80%çš„å·¥ä½œè¿›è¡Œæ²‰æ·€ï¼Œåªéœ€è¦ç”¨æˆ·é€šè¿‡æ–‡æ¡£è¿›è¡Œå¯¹åº”çš„é…ç½®å³å¯å±•ç¤ºæƒ³è¦çš„é¡µé¢ã€‚åœ¨ç»„ä»¶æ–¹é¢ï¼Œå¹¶ä¸æ˜¯åƒå‰ç«¯ç¨‹åºå‘˜æ—¥å¸¸å·¥ä½œä¸€æ ·ï¼Œå°†ä¸€äº›é‡å¤æ€§çš„ä¸œè¥¿æŠ½ç¦»å‡ºæ¥å˜æˆä¸€ä¸ªç»„ä»¶è¿›è¡Œè°ƒç”¨ï¼Œåœ¨elpisä¸­æˆ‘ä»¬é€šè¿‡DSLæ¨¡ç‰ˆå¼•æ“ï¼Œä»¥åŠå„ç±»ç»„ä»¶çš„è§£æå™¨è¿›è¡ŒåŠ¨æ€çš„æ¸²æŸ“ï¼Œè€Œä¸æ˜¯å†™æ­»åœ¨é¡µé¢ä¸Šã€‚</p>
<p>æ‰€ä»¥æˆ‘è§‰å¾—åœ¨elpisé¡¹ç›®ä¸­DSLæ¨¡ç‰ˆå¼•æ“çš„çœŸæ­£ç›®çš„æ˜¯ä¸ºäº†åŸ¹å…»ç¨‹åºå‘˜çš„æ¡†æ¶æ€ç»´ï¼Œä»¥åŠæ€è€ƒé—®é¢˜å’Œä¸æ–­å­¦ä¹ çš„èƒ½åŠ›ï¼Œè¿™æ ·æ‰èƒ½è®©å‰ç«¯ç¨‹åºå‘˜åœ¨æ—¥å¸¸çš„å·¥ä½œä¸­ä¿æŒæ›´é«˜çš„ç«äº‰åŠ›ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Promiseæ–¹æ³•å­˜æ¡£]]></title>    <link>https://juejin.cn/post/7604853010162712639</link>    <guid>https://juejin.cn/post/7604853010162712639</guid>    <pubDate>2026-02-10T02:42:49.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604853010162712639" data-draft-id="7604678037808594980" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Promiseæ–¹æ³•å­˜æ¡£"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-02-10T02:42:49.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="MQliferecord"/> <meta itemprop="url" content="https://juejin.cn/user/1139543665814600"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Promiseæ–¹æ³•å­˜æ¡£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1139543665814600/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    MQliferecord
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-10T02:42:49.000Z" title="Tue Feb 10 2026 02:42:49 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h5 data-id="heading-0">Promise.all</h5>
<p>å®ç°<code>Promise.all</code>æ–¹æ³•ï¼š</p>
<ol>
<li>æ¥æ”¶ä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡ï¼ˆå¦‚æ•°ç»„ï¼‰ï¼Œè¿”å›ä¸€ä¸ªæ–° Promiseï¼›</li>
<li>æ‰€æœ‰ Promise éƒ½æˆåŠŸæ—¶ï¼Œè¿”å›ç»“æœæ•°ç»„ï¼ˆé¡ºåºå’Œè¾“å…¥ä¸€è‡´ï¼‰ï¼›</li>
<li>ä»»æ„ä¸€ä¸ª Promise å¤±è´¥æ—¶ï¼Œç«‹å³è¿”å›è¯¥å¤±è´¥åŸå› ï¼›</li>
<li>è‹¥è¾“å…¥ä¸ºç©ºæ•°ç»„ï¼Œç«‹å³ resolve ç©ºæ•°ç»„ã€‚</li>
</ol>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> <span class="hljs-title function_">myPromiseAll</span> = (<span class="hljs-params">arrFunc</span>) =&gt; {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
    <span class="hljs-keyword">let</span> resArr = [];
    <span class="hljs-keyword">let</span> len = arrFunc.<span class="hljs-property">length</span>;
    <span class="hljs-keyword">let</span> k = <span class="hljs-number">0</span>;
    arrFunc.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">item, index</span>) =&gt;</span> {
      <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(item).<span class="hljs-title function_">then</span>(
        <span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> {
          k++;
          resArr[index] = res;
          <span class="hljs-keyword">if</span> (k === len) {
            <span class="hljs-title function_">resolve</span>(resArr);
          }
        },
        <span class="hljs-function">(<span class="hljs-params">rej</span>) =&gt;</span> {
          <span class="hljs-title function_">reject</span>(rej);
        }
      );
    });
  });
};
<span class="hljs-keyword">const</span> p1 = <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(<span class="hljs-number">1</span>);
<span class="hljs-keyword">const</span> p2 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">resolve</span>(<span class="hljs-number">2</span>), <span class="hljs-number">1000</span>));
<span class="hljs-keyword">const</span> p3 = <span class="hljs-number">3</span>; <span class="hljs-comment">// éPromiseå€¼</span>

<span class="hljs-title function_">myPromiseAll</span>([p1, p2, p3])
  .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"all res:"</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(res)); <span class="hljs-comment">// [1,2,3]</span>
  })
  .<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"all err:"</span>, err);
  });
</code></pre>
<h5 data-id="heading-1">Promise.race</h5>
<p>å®ç°<code>Promise.race</code>æ–¹æ³•ï¼š</p>
<ol>
<li>æ¥æ”¶å¯è¿­ä»£å¯¹è±¡ï¼Œè¿”å›æ–° Promiseï¼›</li>
<li>ç¬¬ä¸€ä¸ªå®Œæˆï¼ˆæˆåŠŸ / å¤±è´¥ï¼‰çš„ Promise çš„ç»“æœ / åŸå› ï¼Œå°±æ˜¯æœ€ç»ˆç»“æœï¼›</li>
<li>è‹¥è¾“å…¥ä¸ºç©ºæ•°ç»„ï¼Œæ°¸è¿œ pending</li>
</ol>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> <span class="hljs-title function_">MyPromiseRace</span> = (<span class="hljs-params">arrFunc</span>) =&gt; {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve,reject</span>) =&gt;</span> {
    arrFunc.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> {
      <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(item).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span>=&gt;</span>{
        <span class="hljs-title function_">resolve</span>(res)
      },<span class="hljs-function"><span class="hljs-params">rej</span>=&gt;</span>{
        <span class="hljs-title function_">reject</span>(rej)
      })
    });   
  });
};

<span class="hljs-keyword">const</span> p1 = <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(<span class="hljs-number">1</span>);
<span class="hljs-keyword">const</span> p2 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">resolve</span>(<span class="hljs-number">2</span>), <span class="hljs-number">1000</span>));
<span class="hljs-keyword">const</span> p3 = <span class="hljs-number">3</span>; <span class="hljs-comment">// éPromiseå€¼</span>

<span class="hljs-keyword">const</span> p4 = <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'fail'</span>));
<span class="hljs-title class_">MyPromiseRace</span>([p1, p4]).<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">err</span> =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'all err:'</span>, err.<span class="hljs-property">message</span>); <span class="hljs-comment">// fail</span>
});
</code></pre>
<h5 data-id="heading-2">Promise.allSettled</h5>
<p>å®ç°<code>Promise.allSettled</code>æ–¹æ³•ï¼š</p>
<ol>
<li>æ¥æ”¶å¯è¿­ä»£å¯¹è±¡ï¼Œè¿”å›æ–° Promiseï¼›</li>
<li>æ‰€æœ‰ Promise éƒ½å®Œæˆï¼ˆæˆåŠŸ / å¤±è´¥ï¼‰åï¼Œè¿”å›ç»“æœæ•°ç»„ï¼›</li>
<li>æ¯ä¸ªç»“æœå¯¹è±¡æ ¼å¼ï¼š<code>{ status: 'fulfilled', value: xxx }</code> æˆ– <code>{ status: 'rejected', reason: xxx }</code>ï¼›</li>
<li>ç©ºæ•°ç»„ç«‹å³ resolve ç©ºæ•°ç»„</li>
</ol>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> <span class="hljs-title function_">MyPromiseAllSettled</span> = (<span class="hljs-params">arrFunc</span>)=&gt;{
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve,reject</span>)=&gt;</span>{
    <span class="hljs-keyword">let</span> len = arrFunc.<span class="hljs-property">length</span>
    <span class="hljs-keyword">let</span> resarr = []
    <span class="hljs-keyword">let</span> k = <span class="hljs-number">0</span>

    arrFunc.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">item,index</span>)=&gt;</span>{
      <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(item).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span>=&gt;</span>{
        k++
        resarr[index] = res
        <span class="hljs-keyword">if</span>(len === k){
          <span class="hljs-title function_">resolve</span>(resarr)
        }
      },<span class="hljs-function"><span class="hljs-params">rej</span>=&gt;</span>{
        k++
        resarr[index] = rej
        <span class="hljs-keyword">if</span>(len === k){
          <span class="hljs-title function_">resolve</span>(resarr)
        }
      })
    })
  })
}
<span class="hljs-keyword">const</span> p1 = <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(<span class="hljs-number">1</span>);
<span class="hljs-keyword">const</span> p2 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">resolve</span>(<span class="hljs-number">2</span>), <span class="hljs-number">1000</span>));
<span class="hljs-keyword">const</span> p3 = <span class="hljs-number">3</span>; <span class="hljs-comment">// éPromiseå€¼</span>

<span class="hljs-keyword">const</span> p4 = <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'fail'</span>));
<span class="hljs-title class_">MyPromiseAllSettled</span>([p1,p2,p3, p4]).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'all err:'</span>, res); <span class="hljs-comment">// fail</span>
});
</code></pre>
<h5 data-id="heading-3">å®ç°å¼‚æ­¥å‡½æ•°ä¸²è¡Œæ‰§è¡Œï¼ˆåŸºäº Promiseï¼‰</h5>
<p>ç»™å®šä¸€ä¸ªå¼‚æ­¥å‡½æ•°æ•°ç»„ï¼ˆæ¯ä¸ªå‡½æ•°è¿”å› Promiseï¼‰ï¼Œå®ç°ä¸€ä¸ªå‡½æ•°ï¼Œè®©è¿™äº›å‡½æ•°<strong>ä¸²è¡Œæ‰§è¡Œ</strong>ï¼ˆå‰ä¸€ä¸ªå®Œæˆåï¼Œå†æ‰§è¡Œåä¸€ä¸ªï¼‰ï¼Œæœ€ç»ˆè¿”å›æ‰€æœ‰ç»“æœçš„æ•°ç»„ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> <span class="hljs-title function_">AsyncPromiseArr</span> = (<span class="hljs-params">arrFunc</span>) =&gt; {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-title function_">async</span>(resolve, reject) =&gt; {
    <span class="hljs-keyword">const</span> stack = [];
    <span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>
    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> func <span class="hljs-keyword">of</span> arrFunc){
      <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">func</span>();
      stack.<span class="hljs-title function_">push</span>(res);
      i++
      <span class="hljs-keyword">if</span>(i === arrFunc.<span class="hljs-property">length</span>){
        <span class="hljs-title function_">resolve</span>(stack)
      }
    }
  });
};

<span class="hljs-comment">// æµ‹è¯•ç”¨ä¾‹</span>
<span class="hljs-comment">// æ¨¡æ‹Ÿå¼‚æ­¥å‡½æ•°</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">task1</span> = (<span class="hljs-params"/>) =&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function"><span class="hljs-params">resolve</span> =&gt;</span> <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">resolve</span>(<span class="hljs-number">1</span>), <span class="hljs-number">500</span>));
<span class="hljs-keyword">const</span> <span class="hljs-title function_">task2</span> = (<span class="hljs-params"/>) =&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function"><span class="hljs-params">resolve</span> =&gt;</span> <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">resolve</span>(<span class="hljs-number">3</span>), <span class="hljs-number">1500</span>));
<span class="hljs-keyword">const</span> <span class="hljs-title function_">task3</span> = (<span class="hljs-params"/>) =&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function"><span class="hljs-params">resolve</span> =&gt;</span> <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">resolve</span>(<span class="hljs-number">2</span>), <span class="hljs-number">100</span>));

<span class="hljs-title class_">AsyncPromiseArr</span>([task1, task2, task3]).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'serial res:'</span>, res); <span class="hljs-comment">// [1,2,3]ï¼ˆæ‰§è¡Œé¡ºåºï¼štask1â†’task2â†’task3ï¼‰</span>
});
</code></pre>
<h5 data-id="heading-4">å®ç° Promise è¶…æ—¶å°è£…</h5>
<p>å®ç°ä¸€ä¸ªå‡½æ•°<code>withTimeout(promise, timeout, errMsg)</code>ï¼š</p>
<ol>
<li>ç»™ Promise æ·»åŠ è¶…æ—¶æ§åˆ¶ï¼Œè‹¥è¶…è¿‡<code>timeout</code>æ¯«ç§’æœªå®Œæˆï¼Œè¿”å› rejectï¼ˆé”™è¯¯ä¿¡æ¯ä¸º<code>errMsg</code>ï¼‰ï¼›</li>
<li>è‹¥ Promise åœ¨è¶…æ—¶å‰å®Œæˆï¼Œæ­£å¸¸è¿”å›ç»“æœï¼›</li>
<li>è¶…æ—¶åç»ˆæ­¢ç­‰å¾…ï¼ˆæ— éœ€å–æ¶ˆåŸ Promiseï¼Œä»…æ§åˆ¶è¿”å›ç»“æœï¼‰ã€‚</li>
</ol>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> <span class="hljs-title function_">withTimeout</span> = (<span class="hljs-params">promise,timeout,errMsg</span>)=&gt;{
  <span class="hljs-keyword">const</span> promise1 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve,reject</span>)=&gt;</span>{
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">()=&gt;</span><span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(errMsg)),timeout)
  })
  <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">race</span>([promise,promise1])
}

<span class="hljs-keyword">const</span> p1 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function"><span class="hljs-params">resolve</span> =&gt;</span> <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">resolve</span>(<span class="hljs-number">100</span>), <span class="hljs-number">500</span>));
<span class="hljs-title function_">withTimeout</span>(p1, <span class="hljs-number">1000</span>, <span class="hljs-string">'è¶…æ—¶äº†'</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'timeout res:'</span>, res); <span class="hljs-comment">// 100</span>
});

<span class="hljs-comment">// è¶…æ—¶åœºæ™¯</span>
<span class="hljs-keyword">const</span> p2 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function"><span class="hljs-params">resolve</span> =&gt;</span> <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">resolve</span>(<span class="hljs-number">200</span>), <span class="hljs-number">1500</span>));
<span class="hljs-title function_">withTimeout</span>(p2, <span class="hljs-number">1000</span>, <span class="hljs-string">'è¶…æ—¶äº†'</span>).<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">err</span> =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'timeout err:'</span>, err.<span class="hljs-property">message</span>); <span class="hljs-comment">// è¶…æ—¶äº†</span>
});
</code></pre>
<h5 data-id="heading-5">å®ç°ä¸€ä¸ªé˜²æŠ–å‡½æ•°</h5>
<p>è§¦å‘äº‹ä»¶åï¼Œç¬¬ä¸€æ¬¡è§¦å‘ç«‹å³æ‰§è¡Œï¼Œåç»­<strong>å»¶è¿Ÿ n æ¯«ç§’æ‰§è¡Œå›è°ƒå‡½æ•°</strong>ï¼›å¦‚æœåœ¨è¿™ n æ¯«ç§’å†…å†æ¬¡è§¦å‘äº‹ä»¶ï¼Œ<strong>é‡ç½®å»¶è¿Ÿæ—¶é—´</strong>ï¼ŒåŒæ—¶å¢åŠ <code>cancel</code>æ–¹æ³•æ”¯æŒæ‰‹åŠ¨å–æ¶ˆ</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> <span class="hljs-title function_">debounce_</span> = (<span class="hljs-params">fn,delay</span>)=&gt;{
  <span class="hljs-keyword">let</span> fn_
  <span class="hljs-keyword">const</span> debounceFunc = <span class="hljs-keyword">function</span>(<span class="hljs-params">...args</span>){
    <span class="hljs-keyword">if</span>(fn_){
      <span class="hljs-built_in">clearTimeout</span>(fn_)
    }<span class="hljs-keyword">else</span>{
      fn.<span class="hljs-title function_">call</span>(<span class="hljs-variable language_">this</span>,...args)
    }
    fn_ = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">()=&gt;</span>{
      fn.<span class="hljs-title function_">call</span>(<span class="hljs-variable language_">this</span>,...args)
      fn_ = <span class="hljs-literal">null</span>
    },delay)
  }
  debounceFunc.<span class="hljs-property">cancel</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>){
    <span class="hljs-title function_">clearImmediate</span>(fn_)
    fn_ = <span class="hljs-literal">null</span>
  }
  <span class="hljs-keyword">return</span> debounceFunc
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">handleSearch</span>(<span class="hljs-params">val</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æœç´¢ï¼š'</span>, val);
}

<span class="hljs-keyword">const</span> debouncedSearchImmediate = <span class="hljs-title function_">debounce_</span>(handleSearch, <span class="hljs-number">1000</span>);
<span class="hljs-title function_">debouncedSearchImmediate</span>(<span class="hljs-string">'a'</span>); <span class="hljs-comment">// ç«‹å³è¾“å‡ºã€Œæœç´¢ï¼šaã€</span>
<span class="hljs-title function_">debouncedSearchImmediate</span>(<span class="hljs-string">'ab'</span>); <span class="hljs-comment">// 500mså†…è§¦å‘ï¼Œé‡ç½®å®šæ—¶å™¨ï¼ˆæ— è¾“å‡ºï¼‰</span>
<span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title function_">debouncedSearchImmediate</span>(<span class="hljs-string">'abc'</span>); <span class="hljs-comment">// 500msåè§¦å‘ï¼Œç«‹å³è¾“å‡ºã€Œæœç´¢ï¼šabcã€</span>
},<span class="hljs-number">2000</span>);

<span class="hljs-comment">// æµ‹è¯•å–æ¶ˆåŠŸèƒ½</span>
<span class="hljs-keyword">const</span> debouncedCancel = <span class="hljs-title function_">debounce_</span>(handleSearch, <span class="hljs-number">500</span>);
<span class="hljs-title function_">debouncedCancel</span>(<span class="hljs-string">'test'</span>);
debouncedCancel.<span class="hljs-title function_">cancel</span>(); 
</code></pre>
<h5 data-id="heading-6">å®ç°èŠ‚æµå‡½æ•°</h5>
<p>è§¦å‘äº‹ä»¶åï¼Œ<strong>æ¯éš” n æ¯«ç§’åªèƒ½æ‰§è¡Œä¸€æ¬¡å›è°ƒå‡½æ•°</strong>ï¼Œæ— è®ºæœŸé—´è§¦å‘å¤šå°‘æ¬¡ï¼Œéƒ½ä¼šæŒ‰å›ºå®šé¢‘ç‡æ‰§è¡Œ</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> <span class="hljs-title function_">throttle_</span> = (<span class="hljs-params">fn, delay</span>) =&gt; {
  <span class="hljs-keyword">let</span> timer;
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span> (<span class="hljs-params">...args</span>) {
    <span class="hljs-keyword">if</span> (!timer) {
      timer = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
        fn.<span class="hljs-title function_">call</span>(<span class="hljs-variable language_">this</span>, ...args);
        timer = <span class="hljs-literal">null</span>
      }, delay);
    }
  };
};
</code></pre>
<h5 data-id="heading-7">å®ç°å¸¦ Promise çš„é˜²æŠ–å‡½æ•°</h5>
<p>å®ç°ä¸€ä¸ªé˜²æŠ–å‡½æ•°<code>debounceWithPromise(fn, delay)</code>ï¼š</p>
<ol>
<li>è§¦å‘åå»¶è¿Ÿ<code>delay</code>æ¯«ç§’æ‰§è¡Œå‡½æ•°ï¼›</li>
<li>é‡å¤è§¦å‘æ—¶é‡ç½®å»¶è¿Ÿï¼›</li>
<li>å‡½æ•°æ‰§è¡Œç»“æœé€šè¿‡ Promise è¿”å›ï¼›</li>
<li>æ”¯æŒå–æ¶ˆé˜²æŠ–ï¼ˆæ·»åŠ <code>cancel</code>æ–¹æ³•ï¼‰ã€‚</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åˆ«å†ç”¨æ—§ç‰ˆäº†ï¼OpenClaw 2026.2.9 æ›´æ–°è¿ç§»é¿å‘æŒ‡å—]]></title>    <link>https://juejin.cn/post/7604672395627544603</link>    <guid>https://juejin.cn/post/7604672395627544603</guid>    <pubDate>2026-02-10T02:40:34.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604672395627544603" data-draft-id="7604690250364157961" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åˆ«å†ç”¨æ—§ç‰ˆäº†ï¼OpenClaw 2026.2.9 æ›´æ–°è¿ç§»é¿å‘æŒ‡å—"/> <meta itemprop="keywords" content="è‡ªåŠ¨åŒ–è¿ç»´,AIGC,æœºå™¨äºº"/> <meta itemprop="datePublished" content="2026-02-10T02:40:34.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ›¹å·¥ä¸åŠ ç­"/> <meta itemprop="url" content="https://juejin.cn/user/4336129588870957"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åˆ«å†ç”¨æ—§ç‰ˆäº†ï¼OpenClaw 2026.2.9 æ›´æ–°è¿ç§»é¿å‘æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4336129588870957/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ›¹å·¥ä¸åŠ ç­
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-10T02:40:34.000Z" title="Tue Feb 10 2026 02:40:34 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸ºä»€ä¹ˆè¦æ›´æ–°/è¿ç§»?</h2>
<h3 data-id="heading-1">Clawdbot â†’ OpenClaw æ”¹åæ—¶é—´çº¿</h3>
<p>2026å¹´1æœˆ,é¡¹ç›®ç»å†ä¸‰æ¬¡æ”¹å:</p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">1æœˆ24æ—¥: Peter Steinberger å‘å¸ƒ Clawdbot</span>
<span class="hljs-section">1æœˆ26æ—¥: Anthropic å‘å¾‹å¸ˆå‡½(å•†æ ‡é—®é¢˜)</span>
<span class="hljs-section">1æœˆ27æ—¥: ç´§æ€¥æ”¹å Moltbot</span>
<span class="hljs-section">1æœˆ29æ—¥: æœ€ç»ˆå®šå OpenClaw</span>
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3f2780d7dee249768950efb3afb92514~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pu55bel5LiN5Yqg54-t:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771296034&amp;x-signature=M62%2F%2FhR5NONC%2Bb4pFtWO%2FCvUyvg%3D" alt="Clawdbotä¸‰æ¬¡æ”¹åæ—¶é—´è½´" loading="lazy"/></p>
<p>è™½ç„¶æ—§å‘½ä»¤ <code>clawdbot</code> ä»å¯ç”¨,ä½†æ–°åŠŸèƒ½ã€å®‰å…¨æ›´æ–°å’Œ bug ä¿®å¤åªåœ¨ OpenClaw ç»´æŠ¤ã€‚</p>
<h3 data-id="heading-2">æ›´æ–°/è¿ç§»çš„ç†ç”±</h3>
<p><strong>1. QMD è®°å¿†ç³»ç»Ÿ</strong>(2026.2.2+)</p>
<p>Shopify CEO Tobi å¼€å‘çš„æœ¬åœ°è¯­ä¹‰æœç´¢å¼•æ“,å·²é›†æˆåˆ° OpenClaw:</p>
<ul>
<li>Token å‰Šå‡ 60-97%</li>
<li>å“åº”é€Ÿåº¦æå‡ 5-50 å€</li>
<li>å®Œå…¨å…è´¹,é›¶ API æˆæœ¬</li>
<li>è‡ªåŠ¨é™çº§åˆ° SQLite(QMD å¤±è´¥æ—¶)</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c7e1ef116642409e896e7451ccb609bb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pu55bel5LiN5Yqg54-t:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771296034&amp;x-signature=T7IMtsfCGEJ8WD%2Fxd68WpoPpkYw%3D" alt="QMDè®°å¿†ç³»ç»Ÿæ¶æ„" loading="lazy"/></p>
<p><strong>2. æ–°æ¨¡å‹æ”¯æŒ</strong></p>
<ul>
<li>Anthropic Opus 4.6</li>
<li>OpenAI GPT-5.3-codex</li>
<li>xAI Grok(å«ç½‘ç»œæœç´¢)</li>
</ul>
<p><strong>3. å®‰å…¨å¢å¼º</strong></p>
<p>OpenClaw ä¸ VirusTotal åˆä½œæ‰«æ ClawHub æŠ€èƒ½,Code Insight(Gemini é©±åŠ¨)è‡ªåŠ¨åˆ†ææŠ€èƒ½åŒ…:</p>
<ul>
<li>âœ… <code>benign</code>: è‡ªåŠ¨é€šè¿‡</li>
<li>âš ï¸ <code>suspicious</code>: æ˜¾ç¤ºè­¦å‘Š</li>
<li>âŒ <code>malicious</code>: é˜»æ­¢ä¸‹è½½</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b9727649a6544aedb43668921387aeb7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pu55bel5LiN5Yqg54-t:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771296034&amp;x-signature=nOTvwYvUQ8gBWFh4jjky1KRvx0E%3D" alt="VirusTotalå®‰å…¨æ‰«ææµç¨‹" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-3">OpenClaw æœ€æ–°ç‰ˆæœ¬ç‰¹æ€§</h2>
<h3 data-id="heading-4">å½“å‰ç‰ˆæœ¬</h3>
<p><strong>v2026.2.9</strong>(2026å¹´2æœˆ10æ—¥)</p>
<h3 data-id="heading-5">v2026.2.9 æ–°ç‰¹æ€§</h3>
<ul>
<li>ğŸ” <strong>Grok ç½‘ç»œæœç´¢æä¾›å•†</strong>: é›†æˆ xAI Grok ä½œä¸ºç½‘ç»œæœç´¢åç«¯</li>
<li>ğŸ§  <strong>è§£å†³å‹ç¼©åé—å¿˜</strong>: ä¿®å¤è®°å¿†å‹ç¼©åçš„ä¸Šä¸‹æ–‡ä¸¢å¤±é—®é¢˜</li>
<li>ğŸ›¡ï¸ <strong>ä¸Šä¸‹æ–‡æº¢å‡ºæ¢å¤</strong>: è‡ªåŠ¨å¤„ç†è¶…é•¿å¯¹è¯çš„ä¸Šä¸‹æ–‡ç®¡ç†</li>
<li>â° <strong>Cron å¯é æ€§å¤§ä¿®</strong>: å®šæ—¶ä»»åŠ¡æ‰§è¡Œæ›´åŠ ç¨³å®š</li>
<li>ğŸ› <strong>40+ bug ä¿®å¤</strong>: æ¥è‡ª 25+ è´¡çŒ®è€…çš„è´¨é‡æ”¹è¿›</li>
<li>ğŸŒ <strong>Web UI å¢å¼º</strong>: ä»£ç†ç®¡ç† RPC æ–¹æ³•ã€å‹ç¼©åˆ†éš”ç¬¦æ˜¾ç¤º</li>
<li>ğŸ“± <strong>Telegram ä¼˜åŒ–</strong>: å¼•ç”¨è§£æå¢å¼ºã€Markdown Spoiler æ”¯æŒ</li>
</ul>
<h3 data-id="heading-6">æ ¸å¿ƒä¼˜åŠ¿</h3>
<p><strong>ğŸ§  QMD è®°å¿†ç³»ç»Ÿ</strong>: æœ¬åœ°è¯­ä¹‰æœç´¢(BM25 + å‘é‡æœç´¢ + LLM é‡æ’åº),Token å‰Šå‡ 60-97%,å“åº”é€Ÿåº¦æå‡ 5-50 å€</p>
<p><strong>ğŸ¤– æœ€æ–°æ¨¡å‹æ”¯æŒ</strong>: Opus 4.6ã€GPT-5.3-codexã€Grok(å«ç½‘ç»œæœç´¢),æ”¯æŒå‰å‘å…¼å®¹é™çº§</p>
<p><strong>ğŸ›¡ï¸ å¢å¼ºå®‰å…¨</strong>: VirusTotal æŠ€èƒ½æ‰«æã€ç½‘å…³è®¤è¯ã€ä¼šè¯å†å²è´Ÿè½½é™åˆ¶</p>
<hr/>
<h2 data-id="heading-7">æ›´æ–° OpenClaw åˆ°æœ€æ–°ç‰ˆæœ¬</h2>
<blockquote>
<p>é€‚ç”¨äºå·²åœ¨ä½¿ç”¨ OpenClaw çš„ç”¨æˆ·</p>
</blockquote>
<h3 data-id="heading-8">æ£€æŸ¥å½“å‰ç‰ˆæœ¬</h3>
<pre><code class="hljs language-bash" lang="bash">openclaw --version
</code></pre>
<p>ä½äº v2026.2.9 å»ºè®®æ›´æ–°ã€‚</p>
<h3 data-id="heading-9">å¤‡ä»½æ•°æ®(å¯é€‰ä½†æ¨è)</h3>
<p><strong>macOS/Linux:</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">mkdir</span> -p ~/openclaw-backup-$(<span class="hljs-built_in">date</span> +%Y%m%d)
<span class="hljs-built_in">cp</span> -r ~/.openclaw ~/openclaw-backup-$(<span class="hljs-built_in">date</span> +%Y%m%d)/
<span class="hljs-built_in">cp</span> -r ~/clawd ~/openclaw-backup-$(<span class="hljs-built_in">date</span> +%Y%m%d)/
</code></pre>
<p><strong>Windows:</strong></p>
<pre><code class="hljs language-powershell" lang="powershell">$date = Get-Date -Format "yyyyMMdd"
mkdir "$HOME\openclaw-backup-$date"
Copy-Item "$HOME\.openclaw" -Destination "$HOME\openclaw-backup-$date\" -Recurse
Copy-Item "$HOME\clawd" -Destination "$HOME\openclaw-backup-$date\" -Recurse
</code></pre>
<h3 data-id="heading-10">æ‰§è¡Œæ›´æ–°</h3>
<p><strong>æ–¹å¼ä¸€: Shell è„šæœ¬(æ¨è)</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># macOS/Linux</span>
curl -fsSL https://openclaw.ai/install.sh | bash

<span class="hljs-comment"># Windows</span>
iwr -useb https://openclaw.ai/install.ps1 | iex
</code></pre>
<p><strong>æ–¹å¼äºŒ: npm</strong></p>
<pre><code class="hljs language-bash" lang="bash">npm install -g openclaw@latest

<span class="hljs-comment"># æˆ–ä½¿ç”¨ pnpm</span>
pnpm add -g openclaw@latest
</code></pre>
<p>æ›´æ–°è¿‡ç¨‹ä¼šè‡ªåŠ¨ä¿ç•™ <code>~/.openclaw</code> å’Œ <code>~/clawd</code>,åªæ›´æ–°å¯æ‰§è¡Œæ–‡ä»¶ã€‚</p>
<h3 data-id="heading-11">éªŒè¯æ›´æ–°</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ£€æŸ¥ç‰ˆæœ¬</span>
openclaw --version

<span class="hljs-comment"># æ£€æŸ¥æœåŠ¡</span>
openclaw gateway status

<span class="hljs-comment"># æµ‹è¯•åŠŸèƒ½</span>
openclaw chat
</code></pre>
<h3 data-id="heading-12">æ›´æ–°åæ“ä½œ(å¯é€‰,æ¨è)</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å¯ç”¨ QMD è®°å¿†ç³»ç»Ÿ(éœ€è¦ Bun)</span>
bun install -g https://github.com/tobi/qmd
<span class="hljs-comment"># ç¼–è¾‘ ~/.openclaw/openclaw.json,è®¾ç½® memory.qmd.sessions.enabled = true</span>

<span class="hljs-comment"># æ›´æ–°æŠ€èƒ½åº“</span>
openclaw skills update
</code></pre>
<hr/>
<h2 data-id="heading-13">ä» Clawdbot è¿ç§»åˆ° OpenClaw</h2>
<blockquote>
<p><strong>è­¦å‘Š</strong>: å…ˆåœæ­¢ Clawdbot æœåŠ¡å†å®‰è£… OpenClaw!</p>
<p>ä¸¤è€…éƒ½ä½¿ç”¨ 18789 ç«¯å£,ä½† gateway token ä¸åŒã€‚ä¸åœæœç›´æ¥å®‰è£…ä¼šå¯¼è‡´:</p>
<ul>
<li>ç«¯å£å†²çª(åŒæœåŠ¡äº‰æŠ¢ç«¯å£)</li>
<li>401 è®¤è¯é”™è¯¯(token ä¸åŒ¹é…)</li>
<li>æœåŠ¡ä¸ç¨³å®š</li>
</ul>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4e3a907182f54468a855e8a0bbe747cf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pu55bel5LiN5Yqg54-t:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771296034&amp;x-signature=fv3okDcAiZT1maMMjRRDAn%2FafRI%3D" alt="åŒæœåŠ¡ç«¯å£å†²çªè­¦å‘Š" loading="lazy"/></p>
<h3 data-id="heading-14">é…ç½®æ–‡ä»¶å¤¹å¯¹æ¯”</h3>






























<table><thead><tr><th>é¡¹ç›®</th><th>Clawdbot</th><th>OpenClaw</th></tr></thead><tbody><tr><td>é…ç½®æ–‡ä»¶å¤¹</td><td><code>~/.clawdbot</code></td><td><code>~/.openclaw</code></td></tr><tr><td>é…ç½®æ–‡ä»¶</td><td><code>moltbot.json</code></td><td><code>openclaw.json</code></td></tr><tr><td>å·¥ä½œåŒº</td><td><code>~/clawd</code></td><td><code>~/clawd</code>(ç›¸åŒ)</td></tr><tr><td>ç«¯å£</td><td>18789</td><td>18789(ç›¸åŒ)</td></tr></tbody></table>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2b6ea35711924352b411f57e21b50275~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pu55bel5LiN5Yqg54-t:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771296034&amp;x-signature=STbheMpWZKH4UfcVPmM2UKABahQ%3D" alt="é…ç½®æ–‡ä»¶å¤¹å¯¹æ¯”" loading="lazy"/></p>
<p>OpenClaw å®‰è£…æ—¶ä¼šè‡ªåŠ¨è¿ç§»é…ç½®,åˆ›å»ºç¬¦å·é“¾æ¥ <code>~/.clawdbot -&gt; ~/.openclaw</code>,ä½†<strong>ä¸ä¼šè‡ªåŠ¨æ¸…ç†æ—§æœåŠ¡</strong>ã€‚</p>
<h3 data-id="heading-15">è¿ç§»æ­¥éª¤</h3>
<h4 data-id="heading-16">åœæ­¢ Clawdbot æœåŠ¡</h4>
<p><strong>macOS/Linux:</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åœæ­¢ç½‘å…³</span>
clawdbot gateway stop

<span class="hljs-comment"># Linux systemd ç”¨æˆ·</span>
systemctl --user stop clawdbot-gateway.service
systemctl --user <span class="hljs-built_in">disable</span> clawdbot-gateway.service
<span class="hljs-built_in">rm</span> -f ~/.config/systemd/user/clawdbot-gateway.service
systemctl --user daemon-reload
systemctl --user reset-failed

<span class="hljs-comment"># æ¸…ç†æ®‹ç•™è¿›ç¨‹</span>
pkill -f clawdbot

<span class="hljs-comment"># éªŒè¯ç«¯å£å·²é‡Šæ”¾</span>
lsof -i :18789
<span class="hljs-comment"># åº”è¯¥æ— è¾“å‡º</span>
</code></pre>
<p><strong>Windows:</strong></p>
<pre><code class="hljs language-powershell" lang="powershell"># åœæ­¢æœåŠ¡
clawdbot gateway stop

# æ£€æŸ¥ç«¯å£
netstat -ano | findstr :18789

# å¦‚æœä»è¢«å ç”¨,ç»ˆæ­¢è¿›ç¨‹(æ›¿æ¢ &lt;PID&gt;)
# taskkill /PID &lt;PID&gt; /F

# æˆ–å¼ºåˆ¶ç»ˆæ­¢æ‰€æœ‰ node è¿›ç¨‹
taskkill /IM node.exe /F
</code></pre>
<h4 data-id="heading-17">å¤‡ä»½æ•°æ®(æ¨è)</h4>
<p><strong>macOS/Linux:</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">mkdir</span> -p ~/openclaw-backup-$(<span class="hljs-built_in">date</span> +%Y%m%d)
<span class="hljs-built_in">cp</span> -r ~/.clawdbot ~/openclaw-backup-$(<span class="hljs-built_in">date</span> +%Y%m%d)/
<span class="hljs-built_in">cp</span> -r ~/clawd ~/openclaw-backup-$(<span class="hljs-built_in">date</span> +%Y%m%d)/
</code></pre>
<p><strong>Windows:</strong></p>
<pre><code class="hljs language-powershell" lang="powershell">$date = Get-Date -Format "yyyyMMdd"
mkdir "$HOME\openclaw-backup-$date"
Copy-Item "$HOME\.clawdbot" -Destination "$HOME\openclaw-backup-$date\" -Recurse
Copy-Item "$HOME\clawd" -Destination "$HOME\openclaw-backup-$date\" -Recurse
</code></pre>
<h4 data-id="heading-18">å®‰è£… OpenClaw</h4>
<p><strong>macOS/Linux:</strong></p>
<pre><code class="hljs language-bash" lang="bash">curl -fsSL https://openclaw.ai/install.sh | bash
</code></pre>
<p><strong>Windows:</strong></p>
<pre><code class="hljs language-powershell" lang="powershell">iwr -useb https://openclaw.ai/install.ps1 | iex
</code></pre>
<p>å®‰è£…è¿‡ç¨‹è‡ªåŠ¨è¿ç§»é…ç½®ã€åˆ›å»ºç¬¦å·é“¾æ¥å¹¶ä¿ç•™å·¥ä½œåŒºã€‚</p>
<h4 data-id="heading-19">éªŒè¯è¿ç§»</h4>
<pre><code class="hljs language-bash" lang="bash">openclaw gateway status         <span class="hljs-comment"># ç¡®è®¤æœåŠ¡è¿è¡Œ</span>
lsof -i :18789                  <span class="hljs-comment"># éªŒè¯åªæœ‰ä¸€ä¸ª openclaw è¿›ç¨‹</span>
openclaw chat                   <span class="hljs-comment"># æµ‹è¯•è®°å¿†å®Œæ•´æ€§</span>
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a6af135e06014d7596751a1668331639~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pu55bel5LiN5Yqg54-t:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771296034&amp;x-signature=lXC9bJIWKQpPTyhuHksuuIYaM%2FQ%3D" alt="å®Œæ•´è¿ç§»æµç¨‹" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-20">è¿ç§»å¸¸è§é—®é¢˜</h2>
<h3 data-id="heading-21">è¿ç§»ä¼šä¸¢å¤±è®°å¿†å—?</h3>
<p>ä¸ä¼šã€‚OpenClaw å®Œå…¨å…¼å®¹ Clawdbot æ•°æ®æ ¼å¼:</p>
<ul>
<li>å¯¹è¯å†å²: <code>~/clawd/</code> ä¸‹æ‰€æœ‰æ–‡ä»¶</li>
<li>é…ç½®ä¿¡æ¯: è‡ªåŠ¨ä» <code>~/.clawdbot</code> è¿ç§»åˆ° <code>~/.openclaw</code></li>
<li>Agent çŠ¶æ€: å®Œæ•´ä¿ç•™</li>
</ul>
<h3 data-id="heading-22">.clawdbot æ–‡ä»¶å¤¹è¿˜åœ¨,æ­£å¸¸å—?</h3>
<p>æ­£å¸¸ã€‚OpenClaw åˆ›å»ºç¬¦å·é“¾æ¥ <code>~/.clawdbot -&gt; ~/.openclaw</code> ä¿æŒå‘åå…¼å®¹ã€‚</p>
<p>éªŒè¯:</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">ls</span> -la ~/.clawdbot
<span class="hljs-comment"># åº”æ˜¾ç¤ºç¬¦å·é“¾æ¥</span>
</code></pre>
<h3 data-id="heading-23">Dashboard æ˜¾ç¤º 401 è®¤è¯é”™è¯¯?</h3>
<p>è¿™æ˜¯åŒæœåŠ¡è¿è¡Œçš„å…¸å‹ç—‡çŠ¶ã€‚ä¸¤ä¸ªæœåŠ¡ç”¨ä¸åŒçš„ gateway token,å¯¼è‡´è®¤è¯å¤±è´¥ã€‚</p>
<p>è§£å†³:</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åœæ­¢æ‰€æœ‰æœåŠ¡</span>
clawdbot gateway stop
openclaw gateway stop

<span class="hljs-comment"># æ¸…ç†è¿›ç¨‹</span>
pkill -f clawdbot
pkill -f openclaw

<span class="hljs-comment"># åªå¯åŠ¨ OpenClaw</span>
openclaw gateway start

<span class="hljs-comment"># æ¸…ç†æµè§ˆå™¨ç¼“å­˜æˆ–ç”¨æ— ç—•æ¨¡å¼</span>
</code></pre>
<p>éªŒè¯:</p>
<pre><code class="hljs language-bash" lang="bash">lsof -i :18789
<span class="hljs-comment"># åº”è¯¥åªçœ‹åˆ°ä¸€ä¸ª openclaw è¿›ç¨‹</span>
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/11fcc5ca22994d7aa24b732068fc2667~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pu55bel5LiN5Yqg54-t:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771296034&amp;x-signature=uQWrUMI2CUmxIAdFZJI99vdYu8Y%3D" alt="401è®¤è¯é”™è¯¯è¯Šæ–­ä¸è§£å†³" loading="lazy"/></p>
<h3 data-id="heading-24">ç«¯å£ 18789 è¢«å ç”¨?</h3>
<p>Clawdbot æœåŠ¡æ²¡æœ‰å®Œå…¨æ¸…ç†ã€‚</p>
<p><strong>macOS/Linux:</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æŸ¥çœ‹å ç”¨è¿›ç¨‹</span>
lsof -i :18789

<span class="hljs-comment"># å¼ºåˆ¶ç»ˆæ­¢</span>
lsof -ti :18789 | xargs <span class="hljs-built_in">kill</span> -9

<span class="hljs-comment"># æ¸…ç† systemd(Linux)</span>
systemctl --user stop clawdbot-gateway.service
systemctl --user <span class="hljs-built_in">disable</span> clawdbot-gateway.service
<span class="hljs-built_in">rm</span> -f ~/.config/systemd/user/clawdbot-gateway.service
systemctl --user daemon-reload

<span class="hljs-comment"># å†æ¬¡éªŒè¯</span>
lsof -i :18789
</code></pre>
<p><strong>Windows:</strong></p>
<pre><code class="hljs language-powershell" lang="powershell"># æŸ¥çœ‹ç«¯å£å ç”¨
netstat -ano | findstr :18789

# ç»ˆæ­¢è¿›ç¨‹
taskkill /PID &lt;PID&gt; /F

# æˆ–å¼ºåˆ¶ç»ˆæ­¢æ‰€æœ‰ node
taskkill /IM node.exe /F
</code></pre>
<h3 data-id="heading-25">éœ€è¦é‡æ–°é…ç½®é£ä¹¦/é’‰é’‰å—?</h3>
<p>ä¸éœ€è¦ã€‚é…ç½®ä¼šè‡ªåŠ¨è¿ç§»,åŒ…æ‹¬:</p>
<ul>
<li>Webhook URLs</li>
<li>æœºå™¨äºº Token</li>
<li>é¢‘é“é…ç½®</li>
</ul>
<p>éªŒè¯:</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">cat</span> ~/.openclaw/openclaw.json | grep -A 5 <span class="hljs-string">"channels"</span>
</code></pre>
<h3 data-id="heading-26">æ—§çš„ clawdbot å‘½ä»¤è¿˜èƒ½ç”¨å—?</h3>
<p>èƒ½ç”¨(ç¬¦å·é“¾æ¥),ä½†æ–°åŠŸèƒ½åªåœ¨ <code>openclaw</code> å‘½ä»¤ä¸‹æä¾›ã€‚<strong>åˆ‡å‹¿åŒæ—¶è¿è¡Œä¸¤ä¸ªæœåŠ¡ã€‚</strong></p>
<h3 data-id="heading-27">è¿ç§»åæ€§èƒ½æ²¡æœ‰æå‡?</h3>
<p>æ€§èƒ½æå‡ä¸»è¦æ¥è‡ª QMD è®°å¿†ç³»ç»Ÿ,éœ€æ‰‹åŠ¨å¯ç”¨:</p>
<pre><code class="hljs language-bash" lang="bash">bun install -g https://github.com/tobi/qmd
<span class="hljs-comment"># ç¼–è¾‘ ~/.openclaw/openclaw.json</span>
<span class="hljs-comment"># è®¾ç½® memory.qmd.sessions.enabled = true</span>
</code></pre>
<h3 data-id="heading-28">å¦‚ä½•å®Œå…¨å¸è½½ Clawdbot?</h3>
<p>è¿ç§»æˆåŠŸå¹¶ç¨³å®šè¿è¡Œå:</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ç¡®è®¤ OpenClaw æ­£å¸¸</span>
openclaw gateway status

<span class="hljs-comment"># å¸è½½ Clawdbot(npm å®‰è£…çš„)</span>
npm uninstall -g clawdbot

<span class="hljs-comment"># åˆ é™¤ç¬¦å·é“¾æ¥(å¯é€‰)</span>
<span class="hljs-built_in">rm</span> ~/.clawdbot

<span class="hljs-comment"># æ¸…ç† systemd(Linux)</span>
<span class="hljs-built_in">rm</span> -f ~/.config/systemd/user/clawdbot-gateway.service
systemctl --user daemon-reload
</code></pre>
<p>æ³¨æ„: ä¸è¦åˆ é™¤ <code>~/.openclaw</code>,å®ƒæ˜¯ä¸»é…ç½®æ–‡ä»¶å¤¹ã€‚</p>
<hr/>
<h2 data-id="heading-29">æ•…éšœæ’æŸ¥</h2>
<h3 data-id="heading-30">å¸¸è§é—®é¢˜å¿«é€Ÿè§£å†³</h3>
<p><strong>æœåŠ¡å¯åŠ¨å¤±è´¥</strong></p>
<pre><code class="hljs language-bash" lang="bash">openclaw status --all    <span class="hljs-comment"># ä¸€é”®è¯Šæ–­</span>
openclaw doctor --fix    <span class="hljs-comment"># è‡ªåŠ¨ä¿®å¤</span>
</code></pre>
<p><strong>Dashboard æ— æ³•åŠ è½½</strong></p>
<pre><code class="hljs language-bash" lang="bash">openclaw gateway status
curl http://localhost:18789/health
<span class="hljs-comment"># æ¸…ç†æµè§ˆå™¨ç¼“å­˜æˆ–ä½¿ç”¨æ— ç—•æ¨¡å¼</span>
</code></pre>
<p><strong>è®°å¿†ä¸¢å¤±</strong></p>
<pre><code class="hljs language-bash" lang="bash">openclaw memory reindex  <span class="hljs-comment"># QMD ç”¨æˆ·</span>
</code></pre>
<p><strong>å‘½ä»¤ä¸è¯†åˆ«</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">which</span> openclaw
<span class="hljs-built_in">hash</span> -r                  <span class="hljs-comment"># æ¸…ç†å‘½ä»¤ç¼“å­˜</span>
<span class="hljs-built_in">source</span> ~/.zshrc          <span class="hljs-comment"># é‡æ–°åŠ è½½é…ç½®</span>
</code></pre>
<h3 data-id="heading-31">è¯Šæ–­å‘½ä»¤é€ŸæŸ¥</h3>
<p>äº”æ­¥è¯Šæ–­æµç¨‹:</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1. ä¸€é”®è¯Šæ–­æŠ¥å‘Š</span>
openclaw status --all

<span class="hljs-comment"># 2. æ£€æŸ¥è¿æ¥</span>
openclaw gateway status

<span class="hljs-comment"># 3. è‡ªåŠ¨ä¿®å¤(æˆåŠŸç‡ 60%)</span>
openclaw doctor --fix

<span class="hljs-comment"># 4. æ£€æŸ¥äº‹ä»¶æµ</span>
openclaw channels status --probe

<span class="hljs-comment"># 5. å®æ—¶æ—¥å¿—</span>
openclaw logs --follow
</code></pre>
<p><code>openclaw status</code> å’Œ <code>openclaw doctor</code> çš„åŒºåˆ«:</p>
<ul>
<li><code>status</code>: æŠ¥å‘Šå½“å‰çŠ¶æ€(æ­£åœ¨è¿è¡Œä»€ä¹ˆ)</li>
<li><code>doctor</code>: åˆ†æé…ç½®æ­£ç¡®æ€§(é…ç½®æ˜¯å¦æœ‰è¯¯)</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f7fe640ecc8c46c7a0a4f97f18c75bdf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pu55bel5LiN5Yqg54-t:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771296034&amp;x-signature=cCiRfqUAqfEW3jNbofj4axoM%2BcI%3D" alt="äº”æ­¥è¯Šæ–­æµç¨‹" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-32">è·å–å¸®åŠ©</h2>
<h3 data-id="heading-33">å®˜æ–¹èµ„æº</h3>
<ul>
<li><strong>å®˜æ–¹æ–‡æ¡£</strong>: <a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.openclaw.ai" target="_blank" title="https://docs.openclaw.ai" ref="nofollow noopener noreferrer">docs.openclaw.ai</a></li>
<li><strong>GitHub Issues</strong>: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fopenclaw%2Fopenclaw%2Fissues" target="_blank" title="https://github.com/openclaw/openclaw/issues" ref="nofollow noopener noreferrer">github.com/openclaw/opâ€¦</a></li>
<li><strong>GitHub Discussions</strong>: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fopenclaw%2Fopenclaw%2Fdiscussions" target="_blank" title="https://github.com/openclaw/openclaw/discussions" ref="nofollow noopener noreferrer">github.com/openclaw/opâ€¦</a></li>
</ul>
<h3 data-id="heading-34">æé—®æ—¶åŒ…å«</h3>
<p><strong>ç³»ç»Ÿä¿¡æ¯:</strong></p>
<pre><code class="hljs language-bash" lang="bash">openclaw --version
<span class="hljs-built_in">uname</span> -a  <span class="hljs-comment"># Linux/macOS</span>
</code></pre>
<p><strong>é”™è¯¯æ—¥å¿—:</strong></p>
<pre><code class="hljs language-bash" lang="bash">openclaw logs --<span class="hljs-built_in">tail</span> 50
</code></pre>
<p><strong>é…ç½®ä¿¡æ¯(éšè—æ•æ„Ÿæ•°æ®):</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">cat</span> ~/.openclaw/openclaw.json | jq <span class="hljs-string">'del(.auth, .tokens)'</span>
</code></pre>
<p><strong>è¯Šæ–­ç»“æœ:</strong></p>
<pre><code class="hljs language-bash" lang="bash">openclaw doctor
</code></pre>
<hr/>
<h2 data-id="heading-35">æ€»ç»“</h2>
<h3 data-id="heading-36">å¿«é€Ÿæ›´æ–°(3åˆ†é’Ÿ)</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># macOS/Linux</span>
curl -fsSL https://openclaw.ai/install.sh | bash

<span class="hljs-comment"># Windows</span>
iwr -useb https://openclaw.ai/install.ps1 | iex
</code></pre>
<h3 data-id="heading-37">è¿ç§»å…³é”®</h3>
<p>âš ï¸ <strong>å…ˆåœ Clawdbot æœåŠ¡,å†å®‰è£… OpenClaw</strong>ã€‚é…ç½®å’Œè®°å¿†å®Œæ•´ä¿ç•™ã€‚</p>
<h3 data-id="heading-38">æ›´æ–°åæ¨èæ“ä½œ</h3>
<ol>
<li>å¯ç”¨ QMD è®°å¿†ç³»ç»Ÿ(æ€§èƒ½æå‡ 5-50 å€)</li>
<li>æ›´æ–°æŠ€èƒ½åº“: <code>openclaw skills update</code></li>
</ol>
<p><strong>å…³æ³¨å…¬ä¼—å·â€œæ›¹å·¥ä¸åŠ ç­â€ï¼ŒåŠ å…¥ AGI äº¤æµç¾¤ï¼Œä¸€èµ·èµ°å‘ AGI</strong></p>
<hr/>
<p><strong>å®˜æ–¹èµ„æº:</strong></p>
<ul>
<li><strong>å®˜ç½‘</strong>: <a href="https://link.juejin.cn?target=https%3A%2F%2Fopenclaw.ai" target="_blank" title="https://openclaw.ai" ref="nofollow noopener noreferrer">openclaw.ai</a></li>
<li><strong>GitHub</strong>: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fopenclaw%2Fopenclaw" target="_blank" title="https://github.com/openclaw/openclaw" ref="nofollow noopener noreferrer">github.com/openclaw/opâ€¦</a></li>
<li><strong>æ–‡æ¡£</strong>: <a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.openclaw.ai" target="_blank" title="https://docs.openclaw.ai" ref="nofollow noopener noreferrer">docs.openclaw.ai</a></li>
<li><strong>QMD é¡¹ç›®</strong>: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftobi%2Fqmd" target="_blank" title="https://github.com/tobi/qmd" ref="nofollow noopener noreferrer">github.com/tobi/qmd</a></li>
</ul>
<p><strong>å‚è€ƒèµ„æ–™:</strong></p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fopenclaw%2Fopenclaw%2Freleases%2Ftag%2Fv2026.2.9" target="_blank" title="https://github.com/openclaw/openclaw/releases/tag/v2026.2.9" ref="nofollow noopener noreferrer">OpenClaw v2026.2.9 å‘å¸ƒè¯´æ˜</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.openclaw.ai%2Finstall%2Fmigrating" target="_blank" title="https://docs.openclaw.ai/install/migrating" ref="nofollow noopener noreferrer">OpenClaw Migration Guide</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.openclaw.ai%2Fgateway%2Ftroubleshooting" target="_blank" title="https://docs.openclaw.ai/gateway/troubleshooting" ref="nofollow noopener noreferrer">OpenClaw Troubleshooting</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.openclaw.ai%2Fconcepts%2Fmemory" target="_blank" title="https://docs.openclaw.ai/concepts/memory" ref="nofollow noopener noreferrer">QMD å†…å­˜ç³»ç»Ÿæ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fthehackernews.com%2F2026%2F02%2Fopenclaw-integrates-virustotal-scanning.html" target="_blank" title="https://thehackernews.com/2026/02/openclaw-integrates-virustotal-scanning.html" ref="nofollow noopener noreferrer">OpenClaw ä¸ VirusTotal åˆä½œ</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vue vs Reactï¼šå½“â€œåŠ¨æ€åŒ…è£¹å™¨â€éœ€æ±‚é‡ä¸Šä¸¤ç§æ¡†æ¶å“²å­¦]]></title>    <link>https://juejin.cn/post/7604761524976582665</link>    <guid>https://juejin.cn/post/7604761524976582665</guid>    <pubDate>2026-02-10T02:58:02.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604761524976582665" data-draft-id="7604672395627724827" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vue vs Reactï¼šå½“â€œåŠ¨æ€åŒ…è£¹å™¨â€éœ€æ±‚é‡ä¸Šä¸¤ç§æ¡†æ¶å“²å­¦"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-02-10T02:58:02.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å†åƒä¸€æ ¹èƒ¡èåœ"/> <meta itemprop="url" content="https://juejin.cn/user/871275323725533"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vue vs Reactï¼šå½“â€œåŠ¨æ€åŒ…è£¹å™¨â€éœ€æ±‚é‡ä¸Šä¸¤ç§æ¡†æ¶å“²å­¦
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/871275323725533/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å†åƒä¸€æ ¹èƒ¡èåœ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-10T02:58:02.000Z" title="Tue Feb 10 2026 02:58:02 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æœ¬æ–‡ä»ä¸€ä¸ªå®é™…å¼€å‘æ¡ˆä¾‹å‡ºå‘ï¼Œå¯¹æ¯” Vue å’Œ React åœ¨å¤„ç†â€œåŠ¨æ€åŒ…è£¹å™¨â€éœ€æ±‚æ—¶çš„ä¸åŒå®ç°æ–¹å¼ã€‚é€šè¿‡è¿™ä¸ªå…·ä½“ä¾‹å­ï¼Œåˆå­¦è€…å¯ä»¥ç›´è§‚æ„Ÿå—ä¸¤ä¸ªæ¡†æ¶è®¾è®¡å“²å­¦çš„å·®å¼‚ã€‚</p>
</blockquote>
<h2 data-id="heading-0">é—®é¢˜åœºæ™¯ï¼šä¸€ä¸ªè¡¨å•ç”Ÿæˆå™¨ç»„ä»¶</h2>
<p>å‡è®¾æˆ‘ä»¬è¦å¼€å‘ä¸€ä¸ªè¡¨å•ç”Ÿæˆå™¨ç»„ä»¶ï¼Œå®ƒéœ€è¦æ»¡è¶³è¿™æ ·çš„éœ€æ±‚ï¼š</p>
<ul>
<li>é»˜è®¤æƒ…å†µä¸‹ï¼Œæ¯ä¸ªè¡¨å•é¡¹ç›´æ¥æ¸²æŸ“</li>
<li>ä½†æœ‰æ—¶éœ€è¦åœ¨å¤–å±‚åŒ…è£¹ä¸€ä¸ªå¸ƒå±€ç»„ä»¶ï¼ˆæ¯”å¦‚æ …æ ¼å¸ƒå±€çš„ <code>&lt;a-col&gt;</code>ï¼‰</li>
<li>ç”šè‡³æœ‰æ—¶éœ€è¦åŒ…è£¹ä¸€ä¸ªæç¤ºç»„ä»¶ï¼ˆæ¯”å¦‚ <code>&lt;a-tooltip&gt;</code>ï¼‰</li>
</ul>
<p>ç”¨äººç±»è¯­è¨€æè¿°å°±æ˜¯ï¼šâ€œå¦‚æœç»™äº†åŒ…è£¹å™¨ï¼Œå°±ç”¨åŒ…è£¹å™¨åŒ…ä¸€ä¸‹ï¼›å¦‚æœæ²¡ç»™ï¼Œå°±ç›´æ¥æ¸²æŸ“ã€‚â€</p>
<h2 data-id="heading-1">React çš„å®ç°ï¼šè‡ªç„¶çš„ JavaScript æ€ç»´</h2>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// FormGenerator.jsx</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">FormGenerator</span>(<span class="hljs-params">{ wrapper: Wrapper, items }</span>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">form</span>&gt;</span>
      {items.map(item =&gt; (
        // æ ¸å¿ƒé€»è¾‘ï¼šå¦‚æœç»™äº† Wrapper å°±åŒ…è£¹ï¼Œå¦åˆ™ç›´æ¥æ¸²æŸ“
        Wrapper ? (
          <span class="hljs-tag">&lt;<span class="hljs-name">Wrapper</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{item.id}</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">FormItem</span> <span class="hljs-attr">item</span>=<span class="hljs-string">{item}</span> /&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">Wrapper</span>&gt;</span>
        ) : (
          <span class="hljs-tag">&lt;<span class="hljs-name">FormItem</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{item.id}</span> <span class="hljs-attr">item</span>=<span class="hljs-string">{item}</span> /&gt;</span>
        )
      ))}
    <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span></span>
  )
}

<span class="hljs-comment">// ä½¿ç”¨æ–¹å¼ 1ï¼šä¼ å…¥ç»„ä»¶</span>
&lt;<span class="hljs-title class_">FormGenerator</span> 
  wrapper={<span class="hljs-title class_">Col</span>}  <span class="hljs-comment">// ç›´æ¥ä¼ ç»„ä»¶å¼•ç”¨</span>
  items={formItems}
/&gt;

<span class="hljs-comment">// ä½¿ç”¨æ–¹å¼ 2ï¼šä¼ å…¥è‡ªå®šä¹‰æ¸²æŸ“å‡½æ•°</span>
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">FormGenerator</span>
  <span class="hljs-attr">wrapper</span>=<span class="hljs-string">{({</span> <span class="hljs-attr">children</span> }) =&gt;</span> (
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">padding:</span> '<span class="hljs-attr">10px</span>' }}&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Tooltip</span> <span class="hljs-attr">title</span>=<span class="hljs-string">"æç¤º"</span>&gt;</span>{children}<span class="hljs-tag">&lt;/<span class="hljs-name">Tooltip</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  )}
  items={formItems}
/&gt;</span>
</code></pre>
<p>â€‹<strong>ä¸ºä»€ä¹ˆ React è¿™ä¹ˆç®€å•ï¼Ÿâ€‹</strong>â€‹<br/>
å› ä¸º React çš„ JSX æœ¬è´¨ä¸Šå°±æ˜¯ JavaScript å‡½æ•°è°ƒç”¨ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-comment">// JSX æœ€ç»ˆä¼šè¢«ç¼–è¯‘æˆè¿™æ ·çš„å‡½æ•°è°ƒç”¨</span>
React.<span class="hljs-title function_ invoke__">createElement</span>(Wrapper, { <span class="hljs-attr">key</span>: item.id }, 
  React.<span class="hljs-title function_ invoke__">createElement</span>(FormItem, { item })
)
</code></pre>
<p>æ‰€ä»¥ä½ ç”¨ <code>Wrapper ? &lt;Wrapper&gt; : &lt;FormItem&gt;</code> è¿™ç§ä¸‰ç›®è¿ç®—ç¬¦ï¼Œå°±åƒå†™æ™®é€š JavaScript æ¡ä»¶åˆ¤æ–­ä¸€æ ·è‡ªç„¶ã€‚</p>
<h2 data-id="heading-2">Vue çš„å®ç°ï¼šæ¨¡æ¿è¯­æ³•çš„æŒ‘æˆ˜ä¸è§£å†³æ–¹æ¡ˆ</h2>
<h3 data-id="heading-3">æ–¹æ¡ˆä¸€ï¼šä½¿ç”¨åŠ¨æ€ç»„ä»¶ï¼ˆç›¸å¯¹ç®€å•ï¼‰</h3>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- FormGenerator.vue --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">form</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">template</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">"item in items"</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">"item.id"</span>&gt;</span>
      <span class="hljs-comment">&lt;!-- å¦‚æœæœ‰åŒ…è£¹å™¨ --&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">component</span> 
        <span class="hljs-attr">v-if</span>=<span class="hljs-string">"wrapper"</span> 
        <span class="hljs-attr">:is</span>=<span class="hljs-string">"wrapper"</span> 
        <span class="hljs-attr">v-bind</span>=<span class="hljs-string">"wrapperProps"</span>
      &gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">slot</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"before"</span> <span class="hljs-attr">:item</span>=<span class="hljs-string">"item"</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">form-item</span> <span class="hljs-attr">:item</span>=<span class="hljs-string">"item"</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">slot</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"after"</span> <span class="hljs-attr">:item</span>=<span class="hljs-string">"item"</span> /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">component</span>&gt;</span>
      
      <span class="hljs-comment">&lt;!-- å¦‚æœæ²¡æœ‰åŒ…è£¹å™¨ --&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">template</span> <span class="hljs-attr">v-else</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">slot</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"before"</span> <span class="hljs-attr">:item</span>=<span class="hljs-string">"item"</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">form-item</span> <span class="hljs-attr">:item</span>=<span class="hljs-string">"item"</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">slot</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"after"</span> <span class="hljs-attr">:item</span>=<span class="hljs-string">"item"</span> /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-title function_">defineProps</span>({
  <span class="hljs-attr">wrapper</span>: { <span class="hljs-attr">type</span>: [<span class="hljs-title class_">Object</span>, <span class="hljs-title class_">String</span>], <span class="hljs-attr">default</span>: <span class="hljs-literal">null</span> },
  <span class="hljs-attr">wrapperProps</span>: { <span class="hljs-attr">type</span>: <span class="hljs-title class_">Object</span>, <span class="hljs-attr">default</span>: <span class="hljs-function">() =&gt;</span> ({}) }
})
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-comment">&lt;!-- ä½¿ç”¨æ–¹å¼ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">form-generator</span>
    <span class="hljs-attr">:wrapper</span>=<span class="hljs-string">"Col"</span>
    <span class="hljs-attr">:wrapper-props</span>=<span class="hljs-string">"{ span: 12 }"</span>
  /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
</code></pre>
<h3 data-id="heading-4">æ–¹æ¡ˆäºŒï¼šä½¿ç”¨ä½œç”¨åŸŸæ’æ§½ï¼ˆæ›´çµæ´»ï¼‰</h3>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- FormGenerator.vue --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">form</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">template</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">"item in items"</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">"item.id"</span>&gt;</span>
      <span class="hljs-comment">&lt;!-- æŠŠæ¸²æŸ“æ§åˆ¶æƒäº¤ç»™çˆ¶ç»„ä»¶ --&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">slot</span> 
        <span class="hljs-attr">name</span>=<span class="hljs-string">"item"</span> 
        <span class="hljs-attr">:item</span>=<span class="hljs-string">"item"</span>
        <span class="hljs-attr">:default</span>=<span class="hljs-string">"() =&gt; h(FormItem, { item })"</span>
      &gt;</span>
        <span class="hljs-comment">&lt;!-- é»˜è®¤å†…å®¹ --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">form-item</span> <span class="hljs-attr">:item</span>=<span class="hljs-string">"item"</span> /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">slot</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-comment">&lt;!-- ä½¿ç”¨æ–¹å¼ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">form-generator</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- è‡ªå·±æ§åˆ¶å¦‚ä½•åŒ…è£¹ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">template</span> #<span class="hljs-attr">item</span>=<span class="hljs-string">"{ item, default: defaultContent }"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">a-col</span> <span class="hljs-attr">:span</span>=<span class="hljs-string">"6"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">a-tooltip</span> <span class="hljs-attr">title</span>=<span class="hljs-string">"è¿™æ˜¯æç¤º"</span>&gt;</span>
          {{ defaultContent() }}
        <span class="hljs-tag">&lt;/<span class="hljs-name">a-tooltip</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">a-col</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">form-generator</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
</code></pre>
<h2 data-id="heading-5">å¯¹æ¯”åˆ†æ</h2>
<h3 data-id="heading-6">React çš„ä¼˜åŠ¿</h3>
<ol>
<li>â€‹<strong>æ€ç»´ä¸€è‡´æ€§</strong>â€‹ï¼šæ¡ä»¶æ¸²æŸ“ã€å¾ªç¯æ¸²æŸ“éƒ½æ˜¯ JavaScript é€»è¾‘ï¼Œä¸éœ€è¦å­¦ä¹ é¢å¤–è¯­æ³•</li>
<li>â€‹<strong>çµæ´»æ€§é«˜</strong>â€‹ï¼šå¯ä»¥ä¼ ç»„ä»¶å¼•ç”¨ã€å¯ä»¥ä¼ å‡½æ•°ã€ç”šè‡³å¯ä»¥ç°åœºåˆ›å»ºç»„ä»¶</li>
<li>â€‹<strong>ä»£ç ç®€æ´</strong>â€‹ï¼šä¸€ä¸ªä¸‰ç›®è¿ç®—ç¬¦æå®šæ‰€æœ‰é€»è¾‘</li>
</ol>
<h3 data-id="heading-7">Vue çš„ä¼˜åŠ¿</h3>
<ol>
<li>â€‹<strong>æ¨¡æ¿ç›´è§‚</strong>â€‹ï¼š<code>v-if</code>ã€<code>v-for</code> æŒ‡ä»¤è®©æ¨¡æ¿ç»“æ„æ¸…æ™°æ˜“è¯»</li>
<li>â€‹<strong>æ’æ§½ç³»ç»Ÿ</strong>â€‹ï¼šä½œç”¨åŸŸæ’æ§½æä¾›äº†å¼ºå¤§çš„å†…å®¹åˆ†å‘èƒ½åŠ›</li>
<li>â€‹<strong>æ¸è¿›å¼å­¦ä¹ </strong>â€‹ï¼šç®€å•çš„ç”¨ <code>v-if</code>ï¼Œå¤æ‚çš„ç”¨æ’æ§½ï¼Œæ€»æœ‰è§£å†³æ–¹æ¡ˆ</li>
</ol>
<h3 data-id="heading-8">ä¸ºä»€ä¹ˆä¼šæœ‰è¿™ç§å·®å¼‚ï¼Ÿ</h3>
<p>â€‹<strong>React è®¤ä¸º</strong>â€‹ï¼šUI æ˜¯çŠ¶æ€çš„å‡½æ•°ï¼Œæ¸²æŸ“é€»è¾‘å°±åº”è¯¥ç”¨ JavaScript è¡¨è¾¾ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// React çš„å“²å­¦ï¼šç”¨ JavaScript æè¿° UI</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">renderUI</span>(<span class="hljs-params">state</span>) {
  <span class="hljs-keyword">if</span> (state.<span class="hljs-property">loading</span>) {
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Loading</span> /&gt;</span></span>
  }
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Content</span> <span class="hljs-attr">data</span>=<span class="hljs-string">{state.data}</span> /&gt;</span></span>
}
</code></pre>
<p>â€‹<strong>Vue è®¤ä¸º</strong>â€‹ï¼šæ¨¡æ¿å’Œé€»è¾‘åº”è¯¥åˆ†ç¦»ï¼Œæ¨¡æ¿è´Ÿè´£ç»“æ„ï¼ŒJavaScript è´Ÿè´£é€»è¾‘ã€‚</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- Vue çš„å“²å­¦ï¼šæ¨¡æ¿æè¿°ç»“æ„ï¼Œè„šæœ¬å¤„ç†é€»è¾‘ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">Loading</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">"loading"</span> /&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">Content</span> <span class="hljs-attr">v-else</span> <span class="hljs-attr">:data</span>=<span class="hljs-string">"data"</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
</code></pre>
<h2 data-id="heading-9">ç»™åˆå­¦è€…çš„å»ºè®®</h2>
<ol>
<li>
<p>â€‹<strong>å¦‚æœä½ åˆšåˆšå…¥é—¨</strong>â€‹ï¼š</p>
<ul>
<li>å…ˆå­¦ Vueï¼Œå› ä¸ºå®ƒçš„æ¨¡æ¿è¯­æ³•æ›´ç›´è§‚ï¼Œæ›´å®¹æ˜“çœ‹åˆ°â€œä»£ç å¦‚ä½•å˜æˆé¡µé¢â€</li>
<li>æŠŠ Vue çš„ <code>v-if</code>ã€<code>v-for</code>ã€æ’æ§½è¿™äº›æ¦‚å¿µå­¦æ‰å®</li>
</ul>
</li>
<li>
<p>â€‹<strong>å½“ä½ ç†Ÿæ‚‰ Vue åæƒ³å­¦ React</strong>â€‹ï¼š</p>
<ul>
<li>å¿˜æ‰â€œæ¨¡æ¿â€æ€ç»´ï¼Œæ¥å—â€œä¸€åˆ‡éƒ½æ˜¯ JavaScriptâ€çš„ç†å¿µ</li>
<li>ç»ƒä¹ ç”¨ JavaScript çš„ä¸‰ç›®è¿ç®—ç¬¦ã€<code>map</code>ã€<code>filter</code> æ¥å¤„ç† UI é€»è¾‘</li>
</ul>
</li>
<li>
<p>â€‹<strong>å®é™…é¡¹ç›®ä¸­å¦‚ä½•é€‰æ‹©</strong>â€‹ï¼š</p>
<ul>
<li>å¦‚æœé¡¹ç›®æœ‰å¾ˆå¤š<strong>åŠ¨æ€çš„ã€æ¡ä»¶å¤æ‚çš„ UI</strong>â€‹ â†’ è€ƒè™‘ React</li>
<li>å¦‚æœé¡¹ç›®ä¸»è¦æ˜¯<strong>è¡¨å•ã€è¡¨æ ¼ã€å›ºå®šå¸ƒå±€</strong>â€‹ â†’ è€ƒè™‘ Vue</li>
<li>çœ‹å›¢é˜Ÿç†Ÿæ‚‰å“ªä¸ªæ¡†æ¶ï¼Œå°±ç”¨å“ªä¸ª</li>
</ul>
</li>
</ol>
<h2 data-id="heading-10">ä¸€ä¸ªæ›´ç®€å•çš„ä¾‹å­</h2>
<p>æœ€åç”¨ä¸€ä¸ªæ›´ç®€å•çš„ä¾‹å­ç»“æŸè¿™ä¸ªè®¨è®ºï¼š</p>
<p>â€‹<strong>éœ€æ±‚</strong>â€‹ï¼šæ ¹æ®ç”¨æˆ·æ˜¯å¦ç™»å½•æ˜¾ç¤ºä¸åŒå†…å®¹</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// Reactï¼šå°±æ˜¯ JavaScript æ¡ä»¶åˆ¤æ–­</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">Header</span>(<span class="hljs-params">{ user }</span>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      {user ? (
        <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>æ¬¢è¿å›æ¥ï¼Œ{user.name}ï¼<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
      ) : (
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>ç™»å½•<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
      )}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  )
}
</code></pre>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- Vueï¼šæ¨¡æ¿æŒ‡ä»¤ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">"user"</span>&gt;</span>æ¬¢è¿å›æ¥ï¼Œ{{ user.name }}ï¼<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">v-else</span>&gt;</span>ç™»å½•<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
</code></pre>
<p>â€‹<strong>ä½ çœ‹ï¼ŒReact è®©ä½ ç”¨ JavaScript å†™ UIï¼ŒVue è®©ä½ ç”¨â€œå¢å¼ºçš„ HTMLâ€å†™ UIã€‚â€‹</strong>â€‹ æ²¡æœ‰ç»å¯¹çš„å¥½åï¼Œåªæœ‰é€‚ä¸é€‚åˆä½ çš„æ€ç»´æ–¹å¼å’Œé¡¹ç›®éœ€æ±‚ã€‚</p>
<p>å¸Œæœ›è¿™ä¸ªå¯¹æ¯”èƒ½å¸®åŠ©ä½ ç†è§£ä¸¤è€…çš„å·®å¼‚ï¼åœ¨å®é™…å¼€å‘ä¸­ï¼Œä¸¤ä¸ªæ¡†æ¶éƒ½èƒ½å¾ˆå¥½åœ°å®Œæˆä»»åŠ¡ï¼Œå…³é”®æ˜¯ç†è§£å®ƒä»¬çš„è®¾è®¡å“²å­¦ï¼Œç„¶åé€‰æ‹©æœ€é€‚åˆä½ å’Œå›¢é˜Ÿçš„é‚£ä¸€ä¸ªã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æœ€çŸ­è¿ç»­å­ä¸²]]></title>    <link>https://juejin.cn/post/7604694326518792243</link>    <guid>https://juejin.cn/post/7604694326518792243</guid>    <pubDate>2026-02-10T02:50:17.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604694326518792243" data-draft-id="7604786493638328347" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æœ€çŸ­è¿ç»­å­ä¸²"/> <meta itemprop="keywords" content="JavaScript,ECMAScript 6"/> <meta itemprop="datePublished" content="2026-02-10T02:50:17.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æœ‰æ„ä¹‰"/> <meta itemprop="url" content="https://juejin.cn/user/1739866211617625"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æœ€çŸ­è¿ç»­å­ä¸²
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1739866211617625/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æœ‰æ„ä¹‰
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-10T02:50:17.000Z" title="Tue Feb 10 2026 02:50:17 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">é—®é¢˜</h3>
<p>ç»™ä¸¤ä¸ªå­—ç¬¦ä¸²ï¼š</p>
<ul>
<li><code>s</code>ï¼šä¸»ä¸²ï¼ˆæ¯”å¦‚Â <code>"ADOBECODEBANC"</code>ï¼‰</li>
<li><code>t</code>ï¼šç›®æ ‡ä¸²ï¼ˆæ¯”å¦‚Â <code>"ABC"</code>ï¼‰</li>
</ul>
<p>æ‰¾å‡ºÂ <strong><code>s</code>Â ä¸­æœ€çŸ­çš„è¿ç»­å­ä¸²</strong>ï¼Œä½¿å¾—è¿™ä¸ªå­ä¸²Â <strong>åŒ…å«Â <code>t</code>Â ä¸­æ‰€æœ‰å­—ç¬¦ï¼ˆåŒ…æ‹¬é‡å¤æ¬¡æ•°ï¼‰</strong> ã€‚</p>
<blockquote>
<p>æ¯”å¦‚Â <code>t = "AAB"</code>ï¼Œé‚£å­ä¸²é‡Œè‡³å°‘è¦æœ‰ 2 ä¸ªÂ <code>'A'</code>Â å’Œ 1 ä¸ªÂ <code>'B'</code>ã€‚</p>
</blockquote>
<p>å¦‚æœæ‰¾ä¸åˆ°ï¼Œè¿”å›ç©ºå­—ç¬¦ä¸²Â <code>""</code>ã€‚</p>
<hr/>
<h2 data-id="heading-1">æ ¸å¿ƒæ€æƒ³ï¼šæ»‘åŠ¨çª—å£ï¼ˆåŒæŒ‡é’ˆï¼‰</h2>
<p>æƒ³è±¡ä¸€ä¸ª<strong>å¯ä¼¸ç¼©çš„çª—å£</strong>åœ¨Â <code>s</code>Â ä¸Šæ»‘åŠ¨ï¼š</p>
<p><strong>å³æŒ‡é’ˆï¼ˆrightï¼‰</strong> ï¼šä¸æ–­å‘å³æ‰©å±•ï¼ŒæŠŠå­—ç¬¦â€œåƒè¿›æ¥â€</p>
<p><strong>å·¦æŒ‡é’ˆï¼ˆleftï¼‰</strong> ï¼šå½“çª—å£å·²ç»â€œæ»¡è¶³æ¡ä»¶â€æ—¶ï¼Œå°è¯•å‘å³æ”¶ç¼©ï¼Œçœ‹çœ‹èƒ½ä¸èƒ½å˜å¾—æ›´çŸ­</p>
<p>æˆ‘ä»¬çš„ç›®æ ‡æ˜¯ï¼š<strong>åœ¨æ‰€æœ‰â€œæ»¡è¶³æ¡ä»¶â€çš„çª—å£ä¸­ï¼Œæ‰¾åˆ°é•¿åº¦æœ€å°çš„é‚£ä¸ª</strong>ã€‚</p>
<hr/>
<h2 data-id="heading-2"><code>cnt</code>Â æ•°ç»„ +Â <code>less</code>Â å˜é‡</h2>
<h3 data-id="heading-3">1.Â <code>cnt</code>Â æ•°ç»„ï¼ˆå¤§å° 128ï¼‰</h3>
<p>ç”¨æ¥è®°å½•Â <strong>æ¯ä¸ªå­—ç¬¦è¿˜éœ€è¦å¤šå°‘ä¸ª</strong>ã€‚</p>
<p>åˆå§‹æ—¶ï¼Œæ ¹æ®Â <code>t</code>Â è®¾ç½®éœ€æ±‚ï¼š</p>
<p>æ¯”å¦‚Â <code>t = "ABC"</code>Â â†’Â <code>cnt[65] = 1</code>ï¼ˆ'A'ï¼‰ï¼Œ<code>cnt[66] = 1</code>ï¼ˆ'B'ï¼‰ï¼Œ<code>cnt[67] = 1</code>ï¼ˆ'C'ï¼‰</p>
<p>å½“æˆ‘ä»¬åœ¨Â <code>s</code>Â ä¸­é‡åˆ°æŸä¸ªå­—ç¬¦ï¼Œå°±Â <strong>å‡ 1</strong>ï¼ˆè¡¨ç¤ºâ€œæˆ‘æä¾›äº†ä¸€ä¸ªâ€ï¼‰</p>
<p>å¦‚æœÂ <code>cnt[c]</code>Â ä»Â <code>1</code>Â å˜æˆÂ <code>0</code>Â â†’ è¿™ä¸ªå­—ç¬¦çš„éœ€æ±‚åˆšå¥½æ»¡è¶³</p>
<p>å¦‚æœå˜æˆè´Ÿæ•°ï¼ˆæ¯”å¦‚Â <code>-1</code>ï¼‰â†’ è¿™ä¸ªå­—ç¬¦å¤šå‡ºæ¥äº†ï¼ˆå†—ä½™ï¼‰</p>
<h3 data-id="heading-4">2.Â <code>less</code>Â å˜é‡</h3>
<p>è¡¨ç¤ºÂ <strong>è¿˜æœ‰å¤šå°‘ç§å­—ç¬¦æ²¡æœ‰æ»¡è¶³éœ€æ±‚</strong>ã€‚</p>
<p>åˆå§‹å€¼ =Â <code>t</code>Â ä¸­<strong>ä¸åŒå­—ç¬¦çš„ç§ç±»æ•°</strong>ï¼ˆä¸æ˜¯æ€»é•¿åº¦ï¼ï¼‰</p>
<p><code>t = "AAB"</code>Â â†’ æœ‰Â <code>'A'</code>Â å’ŒÂ <code>'B'</code>Â ä¸¤ç§ â†’Â <code>less = 2</code></p>
<p>æ¯å½“æŸä¸ªå­—ç¬¦çš„éœ€æ±‚ä»Â <code>&gt;0</code>Â å˜æˆÂ <code>0</code>ï¼Œ<code>less--</code></p>
<p>å½“Â <code>less === 0</code>Â â†’ æ‰€æœ‰å­—ç¬¦éƒ½æ»¡è¶³äº†ï¼ğŸ‰</p>
<hr/>
<h2 data-id="heading-5">ğŸš¶ ç®—æ³•æ­¥éª¤è¯¦è§£ï¼ˆé…åˆä½ çš„ä»£ç ï¼‰</h2>
<h3 data-id="heading-6">ç¬¬ä¸€æ­¥ï¼šåˆå§‹åŒ–éœ€æ±‚</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> c <span class="hljs-keyword">of</span> t) {
    <span class="hljs-keyword">const</span> code = c.<span class="hljs-title function_">codePointAt</span>(<span class="hljs-number">0</span>);
    <span class="hljs-keyword">if</span> (cnt[code] === <span class="hljs-number">0</span>) less++; <span class="hljs-comment">// ç¬¬ä¸€æ¬¡è§åˆ°è¿™ä¸ªå­—ç¬¦</span>
    cnt[code]++;                 <span class="hljs-comment">// è®°å½•éœ€è¦å¤šå°‘ä¸ª</span>
}
</code></pre>
<p>âœ… æ­¤æ—¶Â <code>cnt</code>Â å­˜çš„æ˜¯â€œè¿˜éœ€è¦å¤šå°‘â€ï¼Œ<code>less</code>Â æ˜¯â€œè¿˜å·®å‡ ç§â€ã€‚</p>
<hr/>
<h3 data-id="heading-7">ç¬¬äºŒæ­¥ï¼šæ»‘åŠ¨çª—å£éå†Â <code>s</code></h3>
<h4 data-id="heading-8">å³æŒ‡é’ˆæ‰©å±•ï¼ˆåƒè¿›æ–°å­—ç¬¦ï¼‰</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> c = s[right].<span class="hljs-title function_">codePointAt</span>(<span class="hljs-number">0</span>);
cnt[c]--; <span class="hljs-comment">// æä¾›äº†ä¸€ä¸ª cï¼Œæ‰€ä»¥éœ€æ±‚å‡å°‘</span>
<span class="hljs-keyword">if</span> (cnt[c] === <span class="hljs-number">0</span>) less--; <span class="hljs-comment">// å¦‚æœåˆšå¥½æ»¡è¶³ï¼Œç§ç±»æ•°å‡ä¸€</span>
</code></pre>
<h4 data-id="heading-9">å·¦æŒ‡é’ˆæ”¶ç¼©ï¼ˆå½“çª—å£åˆæ³•æ—¶ï¼‰</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">while</span> (less === <span class="hljs-number">0</span>) { <span class="hljs-comment">// å½“å‰çª—å£å·²è¦†ç›– t</span>
    <span class="hljs-comment">// æ›´æ–°ç­”æ¡ˆï¼šå¦‚æœå½“å‰çª—å£æ›´çŸ­ï¼Œå°±è®°å½•</span>
    <span class="hljs-keyword">if</span> (right - left &lt; ansRight - ansLeft) {
        ansLeft = left;
        ansRight = right;
    }

    <span class="hljs-comment">// å°è¯•ç§»é™¤å·¦è¾¹å­—ç¬¦</span>
    <span class="hljs-keyword">const</span> x = s[left].<span class="hljs-title function_">codePointAt</span>(<span class="hljs-number">0</span>);
    <span class="hljs-keyword">if</span> (cnt[x] === <span class="hljs-number">0</span>) less++; <span class="hljs-comment">// ç§»é™¤åï¼Œx ä¸å¤Ÿäº†ï¼</span>
    cnt[x]++; <span class="hljs-comment">// éœ€æ±‚å¢åŠ ï¼ˆå› ä¸ºå°‘äº†ä¸€ä¸ªï¼‰</span>
    left++;
}
</code></pre>
<blockquote>
<p>é‡ç‚¹ï¼šåªæœ‰å½“Â <code>cnt[x] === 0</code>Â æ—¶ï¼Œç§»é™¤å®ƒæ‰ä¼šå¯¼è‡´â€œä¸æ»¡è¶³â€ã€‚<br/>
å› ä¸ºå¦‚æœÂ <code>cnt[x] &lt; 0</code>ï¼ˆå†—ä½™ï¼‰ï¼Œç§»é™¤ä¸€ä¸ªæ²¡å…³ç³»ï¼</p>
</blockquote>
<hr/>
<h3 data-id="heading-10">ç¬¬ä¸‰æ­¥ï¼šè¿”å›ç»“æœ</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">return</span> ansLeft &lt; <span class="hljs-number">0</span> ? <span class="hljs-string">""</span> : s.<span class="hljs-title function_">substring</span>(ansLeft, ansRight + <span class="hljs-number">1</span>);
</code></pre>
<ul>
<li>å¦‚æœä»æœªæ‰¾åˆ°åˆæ³•çª—å£ï¼ˆ<code>ansLeft</code>Â è¿˜æ˜¯ -1ï¼‰ï¼Œè¿”å›Â <code>""</code></li>
<li>å¦åˆ™è¿”å›Â <code>[ansLeft, ansRight]</code>Â çš„å­ä¸²</li>
</ul>
<hr/>
<h2 data-id="heading-11">ğŸŒ° ä¸¾ä¸ªå®Œæ•´ä¾‹å­</h2>
<p><code>s = "ADOBECODEBANC"</code>,Â <code>t = "ABC"</code></p>
<ol>
<li>
<p>åˆå§‹åŒ–Â <code>cnt</code>:<br/>
<code>cnt[65]=1 ('A'), cnt[66]=1 ('B'), cnt[67]=1 ('C')</code>, å…¶ä»–ä¸º 0<br/>
<code>less = 3</code></p>
</li>
<li>
<p>å³æŒ‡é’ˆç§»åŠ¨ï¼š</p>
<ul>
<li><code>'A'</code>Â â†’Â <code>cnt[65]=0</code>Â â†’Â <code>less=2</code></li>
<li><code>'D','O','B'</code>Â â†’Â <code>cnt[66]=0</code>Â â†’Â <code>less=1</code></li>
<li><code>'E','C'</code>Â â†’Â <code>cnt[67]=0</code>Â â†’Â <code>less=0</code>Â âœ… çª—å£Â <code>"ADOBEC"</code>Â åˆæ³•ï¼</li>
</ul>
</li>
<li>
<p>å¼€å§‹æ”¶ç¼©å·¦è¾¹ç•Œï¼š</p>
<ul>
<li>ç§»é™¤Â <code>'A'</code>Â â†’Â <code>cnt[65]=1</code>Â â†’Â <code>less=1</code>Â âŒ åœæ­¢æ”¶ç¼©</li>
<li>å½“å‰æœ€çŸ­é•¿åº¦ = 6</li>
</ul>
</li>
<li>
<p>ç»§ç»­å³ç§»â€¦â€¦ç›´åˆ°æ‰¾åˆ°Â <code>"BANC"</code>ï¼ˆé•¿åº¦ 4ï¼‰ï¼Œæ›´æ–°ç­”æ¡ˆã€‚</p>
</li>
</ol>
<p>æœ€ç»ˆè¿”å›Â <code>"BANC"</code>ã€‚</p>
<hr/>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">/**
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} <span class="hljs-variable">s</span>
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} <span class="hljs-variable">t</span>
 * <span class="hljs-doctag">@return</span> {<span class="hljs-type">string</span>}
 */</span>
<span class="hljs-keyword">var</span> minWindow = <span class="hljs-keyword">function</span>(<span class="hljs-params">s, t</span>) {
    <span class="hljs-comment">// é¢‘æ¬¡æ•°ç»„ï¼ŒASCII å…± 128 ä¸ªå­—ç¬¦</span>
    <span class="hljs-keyword">const</span> cnt = <span class="hljs-title class_">Array</span>(<span class="hljs-number">128</span>).<span class="hljs-title function_">fill</span>(<span class="hljs-number">0</span>);
    <span class="hljs-keyword">let</span> less = <span class="hljs-number">0</span>; <span class="hljs-comment">// è¡¨ç¤ºè¿˜æœ‰å¤šå°‘ç§å­—ç¬¦æœªæ»¡è¶³éœ€æ±‚</span>

    <span class="hljs-comment">// åˆå§‹åŒ– t ä¸­æ¯ä¸ªå­—ç¬¦çš„éœ€æ±‚</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> c <span class="hljs-keyword">of</span> t) {
        <span class="hljs-keyword">const</span> code = c.<span class="hljs-title function_">codePointAt</span>(<span class="hljs-number">0</span>);
        <span class="hljs-keyword">if</span> (cnt[code] === <span class="hljs-number">0</span>) {
            less++; 
        }
        cnt[code]++;
    }

    <span class="hljs-keyword">const</span> m = s.<span class="hljs-property">length</span>;
    <span class="hljs-keyword">let</span> ansLeft = -<span class="hljs-number">1</span>;
    <span class="hljs-keyword">let</span> ansRight = m; <span class="hljs-comment">// åˆå§‹è®¾ä¸ºä¸€ä¸ªè¾ƒå¤§å€¼ï¼ˆé•¿åº¦ m ä¸å¯èƒ½ï¼‰</span>
    <span class="hljs-keyword">let</span> left = <span class="hljs-number">0</span>;

    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> right = <span class="hljs-number">0</span>; right &lt; m; right++) {
        <span class="hljs-keyword">const</span> c = s[right].<span class="hljs-title function_">codePointAt</span>(<span class="hljs-number">0</span>);
        cnt[c]--;

        <span class="hljs-comment">// å¦‚æœæŸä¸ªå­—ç¬¦åˆšå¥½è¢«â€œè¡¥è¶³â€ï¼ˆä»æ­£å˜0ï¼‰ï¼Œè¯´æ˜è¿™ç§å­—ç¬¦è¾¾æ ‡äº†</span>
        <span class="hljs-keyword">if</span> (cnt[c] === <span class="hljs-number">0</span>) {
            less--;
        }

        <span class="hljs-comment">// å½“æ‰€æœ‰å­—ç¬¦éƒ½æ»¡è¶³ï¼ˆless === 0ï¼‰ï¼Œå°è¯•æ”¶ç¼©å·¦è¾¹ç•Œ</span>
        <span class="hljs-keyword">while</span> (less === <span class="hljs-number">0</span>) {
            <span class="hljs-comment">// æ›´æ–°æœ€å°çª—å£</span>
            <span class="hljs-keyword">if</span> (right - left &lt; ansRight - ansLeft) {
                ansLeft = left;
                ansRight = right;
            }

            <span class="hljs-keyword">const</span> x = s[left].<span class="hljs-title function_">codePointAt</span>(<span class="hljs-number">0</span>);
            <span class="hljs-comment">// å¦‚æœç§»é™¤ s[left] ä¼šå¯¼è‡´æŸç§å­—ç¬¦ä¸è¶³</span>
            <span class="hljs-keyword">if</span> (cnt[x] === <span class="hljs-number">0</span>) {
                less++; <span class="hljs-comment">// ç¼ºå¤±ä¸€ç§å­—ç¬¦</span>
            }
            cnt[x]++;
            left++;
        }
    }

    <span class="hljs-keyword">return</span> ansLeft &lt; <span class="hljs-number">0</span> ? <span class="hljs-string">""</span> : s.<span class="hljs-title function_">substring</span>(ansLeft, ansRight + <span class="hljs-number">1</span>);
};
</code></pre>
<h2 data-id="heading-12">ä¸ºä»€ä¹ˆè¿™ä¸ªæ–¹æ³•é«˜æ•ˆï¼Ÿ</h2>
<ul>
<li><strong>æ—¶é—´å¤æ‚åº¦</strong>ï¼šO(n) â€”â€” æ¯ä¸ªå­—ç¬¦æœ€å¤šè¢«è®¿é—®ä¸¤æ¬¡ï¼ˆå³æŒ‡é’ˆä¸€æ¬¡ï¼Œå·¦æŒ‡é’ˆä¸€æ¬¡ï¼‰</li>
<li><strong>ç©ºé—´å¤æ‚åº¦</strong>ï¼šO(1) â€”â€”Â <code>cnt</code>Â å›ºå®š 128 å¤§å°</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[CSS-æµå…‰ç‰¹æ•ˆ]]></title>    <link>https://juejin.cn/post/7604694326518825011</link>    <guid>https://juejin.cn/post/7604694326518825011</guid>    <pubDate>2026-02-10T03:00:46.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604694326518825011" data-draft-id="7604672395627642907" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="CSS-æµå…‰ç‰¹æ•ˆ"/> <meta itemprop="keywords" content="å‰ç«¯,CSS,HTML"/> <meta itemprop="datePublished" content="2026-02-10T03:00:46.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‘ç°ä¸€åªå¤§å‘†ç“œ"/> <meta itemprop="url" content="https://juejin.cn/user/180747382561607"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            CSS-æµå…‰ç‰¹æ•ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/180747382561607/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‘ç°ä¸€åªå¤§å‘†ç“œ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-10T03:00:46.000Z" title="Tue Feb 10 2026 03:00:46 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">å‰è¨€</h3>
<p>åœ¨ UI è®¾è®¡ä¸­ï¼Œåˆç†çš„åŠ¨æ•ˆèƒ½æå¤§åœ°æå‡äº§å“çš„ç§‘æŠ€æ„Ÿä¸äº¤äº’ä½“éªŒã€‚æœ¬æ–‡å°†åˆ†äº«ä¸¤ç§é«˜é¢‘ä½¿ç”¨çš„æµå…‰ç‰¹æ•ˆï¼š<strong>æ—‹è½¬è¾¹æ¡†æµå…‰</strong>ï¼ˆå¸¸ç”¨äº VIP ä¼šå‘˜å¡ç‰‡ï¼‰ä¸<strong>çº¿æ€§æ‰«ææµå…‰</strong>ï¼ˆå¸¸ç”¨äºåŠ è½½çŠ¶æ€æˆ–æŒ‰é’®é«˜äº®ï¼‰ã€‚</p>
<h2 data-id="heading-1">ä¸€ã€ æ—‹è½¬è¾¹æ¡†æµå…‰ (Border Rotating Glow)</h2>
<h3 data-id="heading-2">1. å®ç°æ•ˆæœï¼š</h3>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9b2f81d62c5745ebb35576b571c3bdaf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-R546w5LiA5Y-q5aSn5ZGG55Oc:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771297249&amp;x-signature=Hq4jfP1Fbb0D7jXRCLxuejFOgy8%3D" alt="æµå…‰è¾¹æ¡†.gif" loading="lazy"/></p>
<h3 data-id="heading-3">2. å®ç°åŸç†ï¼šèƒŒæ™¯æ—‹è½¬è£å‰ª</h3>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/37cb9aa5de494dcd9a5aee5737805786~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-R546w5LiA5Y-q5aSn5ZGG55Oc:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771297249&amp;x-signature=I8IFfEt%2BuobW1mdR%2BG1fcjhkZXE%3D" alt="æµå…‰è¾¹æ¡†åŸç†.gif" loading="lazy"/></p>
å¾ˆå¤šåŒå­¦ç¬¬ä¸€ååº”æ˜¯ä¼šå°è¯•ç›´æ¥ç»™ `border` è®¾ç½®æ¸å˜ï¼Œä½† CSS åŸç”Ÿ `border` å¹¶ä¸æ”¯æŒåŠ¨ç”»æ—‹è½¬ã€‚ 
<p><strong>æ ¸å¿ƒé»‘ç§‘æŠ€</strong>ï¼š</p>
<ol>
<li>åº•å±‚æ”¾ä¸€ä¸ª<strong>å·¨å¤§çš„ã€æ—‹è½¬çš„æ¸å˜è‰²å—</strong>ï¼ˆé€šå¸¸ç”¨ä¼ªå…ƒç´ å®ç°ï¼‰ã€‚</li>
<li>ä¸Šå±‚ç›–ä¸€ä¸ª<strong>ç•¥å°çš„å®¹å™¨</strong>ï¼ˆæŒ‰é’®ä¸»ä½“ï¼‰ã€‚</li>
<li>çˆ¶å®¹å™¨è®¾ç½® <code>overflow: hidden</code>ã€‚ è¿™æ ·ï¼Œè½¬åŠ¨çš„æ¸å˜è‰²å—è¢«è£å‰ªåï¼Œéœ²å‡ºçš„é‚£ä¸€åœˆè¾¹ç¼˜çœ‹èµ·æ¥å°±åƒæµå…‰åœ¨æ¸¸èµ°ã€‚</li>
</ol>
<h3 data-id="heading-4">3. å®ç°ä»£ç </h3>
<pre><code class="hljs language-HTML" lang="HTML"><span class="hljs-comment">&lt;!-- å¤–å±‚å®¹å™¨åŒ…è£¹æŒ‰é’® --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"glow-wrapper"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"glow-button"</span>&gt;</span>æµå…‰æŒ‰é’®<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>


/* å¤–å±‚å®¹å™¨ï¼šè´Ÿè´£æµå…‰æ•ˆæœ */
.glow-wrapper {
  position: relative; 
  display: inline-block;
  padding: 4px; /* æ§åˆ¶æµå…‰è¾¹æ¡†çš„å®½åº¦ */
  border-radius: 12px;
  overflow: hidden; /* å…³é”®ï¼šè£å‰ªæ—‹è½¬çš„æ¸å˜å±‚ */
}

/* ä¼ªå…ƒç´ ï¼šæ—‹è½¬çš„æ¸å˜æ¡† */
.glow-wrapper::before {
  content: '';
  position: absolute;
  top: -2px;
  left: -2px;
  right: -2px;
  bottom: -2px;
  background: linear-gradient(
    45deg,
    #0066ff,
    #00ccff,
    #ccff00,
    #ff9900,
    #ff00cc
  );
  border-radius: 12px;
  z-index: -1;
  animation: rotateGlow 3s linear infinite;
}

/* å†…éƒ¨çœŸå®æŒ‰é’® */
.glow-button {
  height: 42px;
  width: 122px;
  line-height: 42px;
  font-size: 18px;
  color: white;
  background: #121212;
  border-radius: 8px; /* ç•¥å°äº wrapper çš„åœ†è§’ */
}
@keyframes rotateGlow {
  0% {
    transform: rotate(0deg);
  }
  40% {
    transform: rotate(180deg);
  }
  60% {
    transform: rotate(180deg);
  }
  100% {
    transform: rotate(360deg);
  }
}
</code></pre>
<hr/>
<h2 data-id="heading-5">äºŒã€ çº¿æ€§æ‰«ææµå…‰ (Linear Scanning Glow)</h2>
<h3 data-id="heading-6">1. å®ç°æ•ˆæœï¼š</h3>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ddf3f5700fc34a3294b5bd9e47c186f3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-R546w5LiA5Y-q5aSn5ZGG55Oc:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771297249&amp;x-signature=MTdoDA5oYKlv3HLfoY2uXm14UGU%3D" alt="æ‰«ææµå…‰.gif" loading="lazy"/></p>
### 2. å®ç°åŸç†ï¼šèƒŒæ™¯ä½ç§»
<p>è¿™ç§æ•ˆæœæ¨¡æ‹Ÿäº†å…‰æŸæ‰«è¿‡ç‰©ä½“çš„è§†è§‰æ„Ÿï¼Œå¸¸ç”¨äºéª¨æ¶å±æˆ–é«˜çº§æŒ‰é’®ã€‚</p>
<p><strong>æ ¸å¿ƒæ€è·¯</strong>ï¼š</p>
<ul>
<li><strong>æ¸å˜è®¾è®¡</strong>ï¼šè®¾è®¡ä¸€ä¸ªâ€œæš—-äº®-æš—â€çš„ <code>linear-gradient</code>ã€‚</li>
<li><strong>å°ºå¯¸æ”¾å¤§</strong>ï¼šå°† <code>background-size</code> è®¾ä¸º <code>200%</code> æˆ–æ›´å¤§ï¼Œè®©â€œäº®ç‚¹â€éšè—åœ¨è§†å£ä¹‹å¤–ã€‚</li>
<li><strong>ä½ç½®åŠ¨ç”»</strong>ï¼šé€šè¿‡æ”¹å˜ <code>background-position</code>ï¼Œè®©äº®è‰²æ¡ä»å·¦è‡³å³æ°´å¹³ç©¿è¿‡ã€‚</li>
</ul>
<h3 data-id="heading-7">3. å®ç°ä»£ç </h3>
<pre><code class="hljs language-HTML" lang="HTML"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"glow-wrapper"</span>&gt;</span>æ‰«ææµå…‰<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

.glow-wrapper {
  position: relative;
  padding: 20px 40px; /* è¾¹æ¡†åšåº¦ */
  color: white;
  border-radius: 10px;
  font-weight: 800;
  background: linear-gradient(90deg, transparent, #00dbde, transparent);
  background-size: 200% 100%;
  animation: scan 2s linear infinite;
}

@keyframes scan {
  0% {
    background-position: -200% 0%;
  }
  100% {
    background-position: 200% 0%;
  }
}

</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[uToolsï¼šä¸€ä¸ªèƒ½è®©ä½ å¸è½½å‡ åä¸ªè½¯ä»¶çš„æ•ˆç‡â€œå¤–æŒ‚â€]]></title>    <link>https://juejin.cn/post/7604690250364207113</link>    <guid>https://juejin.cn/post/7604690250364207113</guid>    <pubDate>2026-02-10T01:50:53.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604690250364207113" data-draft-id="7604690250364190729" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="uToolsï¼šä¸€ä¸ªèƒ½è®©ä½ å¸è½½å‡ åä¸ªè½¯ä»¶çš„æ•ˆç‡â€œå¤–æŒ‚â€"/> <meta itemprop="keywords" content="åç«¯,Java,ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2026-02-10T01:50:53.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="SimonKing"/> <meta itemprop="url" content="https://juejin.cn/user/4001878056904584"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            uToolsï¼šä¸€ä¸ªèƒ½è®©ä½ å¸è½½å‡ åä¸ªè½¯ä»¶çš„æ•ˆç‡â€œå¤–æŒ‚â€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4001878056904584/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    SimonKing
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-10T01:50:53.000Z" title="Tue Feb 10 2026 01:50:53 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>å…³æ³¨æˆ‘çš„å…¬ä¼—å·ï¼šã€ç¼–ç¨‹æœèŠ±å¤•æ‹¾ã€‘ï¼Œå¯è·å–é¦–å‘å†…å®¹ã€‚</p>
</blockquote>
<h2 data-id="heading-0">01 å¼•è¨€</h2>
<p>ä½ æ˜¯å¦åŒå€¦äº†åœ¨æ— æ•°è½¯ä»¶é—´æ¥å›åˆ‡æ¢ï¼Ÿæ˜¯å¦å¸Œæœ›æœ‰ä¸€ä¸ªâ€œä¸‡èƒ½å…¥å£â€ï¼Œèƒ½ç¬é—´å“åº”æ‰€æœ‰ä¸´æ—¶éœ€æ±‚ï¼Ÿè¯•è¯• <code>uTools</code>ï¼Œå®ƒä¸åªæ˜¯ä¸€ç§å·¥å…·ï¼Œæ›´æ˜¯ä¸€ç§å…¨æ–°çš„æ•ˆç‡å“²å­¦ã€‚é€šè¿‡ä¸€ä¸ªç®€å•çš„æœç´¢æ¡†å’Œæ™ºèƒ½é¢æ¿ï¼Œå®ƒå°†æµ·é‡æ’ä»¶èå…¥ä½ çš„æ¯ä¸€æ¬¡ç‚¹å‡»å’Œé€‰æ‹©ï¼Œè®©å·¥å…·ä¸»åŠ¨ä¸ºä½ æœåŠ¡ï¼ŒçœŸæ­£å®ç°â€œä¸€åˆ‡çš†æ’ä»¶â€ï¼Œæ‰“é€ ä½ ç‹¬ä¸€æ— äºŒçš„æ•°å­—å·¥ä½œæµã€‚</p>
<h2 data-id="heading-1">02 ç®€ä»‹</h2>
<p><code>uTools</code>å¯ä»¥ç†è§£ä¸ºä¸€ä¸ªå¯é«˜åº¦è‡ªå®šä¹‰çš„æ•ˆç‡å¯åŠ¨å™¨ã€‚å®ƒæœ¬èº«éå¸¸è½»å·§ï¼Œä½†é€šè¿‡å®‰è£…ä¸°å¯Œçš„æ’ä»¶ï¼Œå°±èƒ½ç¬é—´å˜æˆä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„å…¨èƒ½åŠ©æ‰‹ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9d4c9f09b8dd4fb497496412c115dc8a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2ltb25LaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771293053&amp;x-signature=79tAzP5GPxfCTfVRigZg0%2F9h1f8%3D" alt="" loading="lazy"/></p>
<p>å…¶æ ¸å¿ƒæ“ä½œæ–¹å¼ï¼š</p>
<ul>
<li><strong>ä¸‡èƒ½æœç´¢æ¡†</strong>ï¼šé€šè¿‡å¿«æ·é”®ï¼ˆé»˜è®¤ <code>Alt + Space</code>ï¼‰å¿«é€Ÿå‘¼å‡ºæœç´¢æ¡†ï¼Œè¾“å…¥å…³é”®è¯å³å¯æœç´¢æœ¬åœ°æ–‡ä»¶ã€æ‰“å¼€è½¯ä»¶ï¼Œæˆ–ç›´æ¥ä½¿ç”¨å„ç§æ’ä»¶å·¥å…·ã€‚</li>
<li><strong>è¶…çº§é¢æ¿</strong>ï¼šåœ¨ä»»æ„ç•Œé¢ï¼Œé•¿æŒ‰é¼ æ ‡ä¸­é”®ï¼ˆæˆ–è‡ªå®šä¹‰é”®ï¼‰å³å¯å”¤å‡ºä¸€ä¸ªåœ†å½¢èœå•ï¼Œé‡Œé¢æ˜¯å¸¸ç”¨çš„å·¥å…·ï¼Œæ–¹ä¾¿éšæ—¶å–ç”¨ã€‚</li>
<li><strong>æ‚¬æµ®çƒ</strong>ï¼šä¸€ä¸ªå¯ä»¥å¸é™„åœ¨å±å¹•è¾¹ç¼˜çš„å°çƒï¼Œæ–¹ä¾¿å¿«é€Ÿè®¿é—®ã€‚</li>
</ul>
<p>ç›®å‰çš„ç‰ˆæœ¬å·²ç»æ›´æ–°åˆ°<code>v7.5.1</code>äº†ï¼Œåˆ†åˆ«æ”¯æŒ <code>Windows</code>, <code>macOS</code>, <code>Linux</code>ä¸‰å¤§å¹³å°ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8c1f4ea9a99f42d0bfdd6bc12431bb71~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2ltb25LaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771293053&amp;x-signature=M2c9fGmPrggn8x6pQClV4cZJmjM%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-2">03 ä½¿ç”¨</h2>
<p>æˆ‘ä»¬å¯ä»¥åœ¨æ’ä»¶å¸‚åœºä¸Šéšæ„ä¸‹è½½æ’ä»¶ã€‚æˆªæ­¢ç›®å‰æ’ä»¶å¸‚åœºå·²ç»æ”¶å½•äº†3109ä¸ªæ’ä»¶ã€‚</p>
<p>é€šè¿‡æ‚¬æµ®çƒæˆ–è€…å¿«æ·é”®<code>Alt + ç©ºæ ¼</code>å¿«é€Ÿå”¤èµ·ï¼</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f8fdcc5dcac24bc6bf58ec64a2198f6e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2ltb25LaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771293053&amp;x-signature=GlglGp5xnqlr8dDjJ8J91%2BiXiQE%3D" alt="" loading="lazy"/></p>
<p>æˆ‘ä»¬ç®€å•çš„ä»‹ç»å‡ ä¸ªæ’ä»¶ã€‚</p>
<h3 data-id="heading-3">3.1 å±å¹•å–è‰²å·¥å…·</h3>
<p>ä»€ä¹ˆæ—¶å€™ç”¨å‘¢ï¼Ÿå†™é¡µé¢æ ·å¼çš„æ—¶å€™ï¼Œè®¾è®¡åŸå‹é‡Œé¢å¦‚æœæ²¡æœ‰ç»™å‡ºé¢œè‰²çš„å€¼ï¼Œå°±éœ€è¦æˆ‘ä»¬é€šè¿‡å–è‰²å·¥å…·è·å–ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b0d2389bef464a51b260adc58ad5062d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2ltb25LaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771293053&amp;x-signature=DFC8bkweibNPGZQ6rXLL86PV01M%3D" alt="" loading="lazy"/></p>
<p>ç±»ä¼¼é¡¹ç›®ä¸­çš„è¿™ç§åº•è‰²ï¼Œæˆ‘ä»¬åªèƒ½å–è‰²æ¥è§£å†³ã€‚</p>
<p>å½“ç„¶æ­£å¸¸çš„è®¾è®¡éƒ½æœ‰ä¸“é—¨çš„<code>UI</code>è®¾è®¡ï¼Œä¼šæ ‡æ³¨çš„éå¸¸è¯¦ç»†ã€‚ä½†æ˜¯å¯¹äºæˆ‘ä»¬çš„è‡ªå·±çš„ä¸€äº›é¡¹ç›®ï¼Œæ ·å¼è¦æ±‚æ²¡æœ‰é‚£ä¹ˆé«˜çš„ï¼Œåªèƒ½é æˆ‘ä»¬è‡ªå·±æ‰‹æ“äº†ã€‚</p>
<p>æˆ‘ä»¬éœ€è¦å‘¼èµ·æœç´¢æ¡†ï¼Œç„¶åæœç´¢è‡ªå·±çš„å–è‰²å·¥å…·å³å¯ã€‚ç•Œé¢ä¼šè‡ªåŠ¨å±•ç¤ºå¸¸ç”¨çš„å·¥å…·ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/780fcb2a29ba40d5acafcb40b4f53356~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2ltb25LaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771293053&amp;x-signature=zkpwi2hSvKavtfKmTu8wbluGpKs%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/50f2fab6a9444f13b0806d1b17ed79c6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2ltb25LaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771293053&amp;x-signature=%2BxQnhzGf%2BWhbarZy9Rjsn%2BbBU0w%3D" alt="" loading="lazy"/></p>
<p>é€‰æ‹©å–è‰²å·¥å…·ï¼Œç‚¹å‡»å¼€å§‹å–è‰²ã€‚ç‚¹å‡»å³å¯å®Œæˆå–è‰²</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a1d10a0c9d1b42c8820a9f63fd94c203~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2ltb25LaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771293053&amp;x-signature=15qYmBfyCr78X5YkqTScNpFFIRA%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-4">3.2 Tree</h3>
<p>è¯»å–ç›®å½•ç»“æ„ç”Ÿæˆå¦‚ä¸‹æ‰€ç¤ºçš„æ ‘çŠ¶å›¾æ–‡æœ¬, æ¨¡ä»¿<code>tree</code>æ–¹æ³•, å¹¶æä¾›è‡ªç”±å®šä¹‰æ–‡ä»¶å¤¹ç»“æ„çš„åŠŸèƒ½.</p>
<p>å½“æˆ‘ä»¬å†™æ–‡ç« çš„æ—¶å€™ï¼Œéœ€å±•ç¤ºé¡¹ç›®ç»“æ„çš„æ—¶å€™ï¼Œæˆ‘ä»¬åªéœ€è¦ç»™åˆ°æ–‡ä»¶å¤¹å³å¯ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0a3831a87ffb48bf91b9073038be8eea~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2ltb25LaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771293053&amp;x-signature=KrtWL0cMRTeNjdn9DPms6anpcGI%3D" alt="" loading="lazy"/></p>
<p>æ— è®ºæ˜¯å†™æ–‡ç« ï¼Œè¿˜æ˜¯æŸ¥çœ‹ç›®å½•ç»“æ„éƒ½éå¸¸å‹å¥½ã€‚</p>
<h3 data-id="heading-5">3.3 ç¨‹åºå‘˜å¿…å¤‡</h3>
<p><code>ctool</code>æ”¶é›†äº†ç¨‹åºå‘˜å¸¸ç”¨çš„ä¸€äº›å·¥å…·ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2c533980bd7c482391b292b0c5939d48~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2ltb25LaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771293053&amp;x-signature=gMUrTqygbCTPFA3pEUPaJyxaYyk%3D" alt="" loading="lazy"/></p>
<p>å®˜ç½‘åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fctool.dev%2F" target="_blank" title="https://ctool.dev/" ref="nofollow noopener noreferrer">ctool.dev/</a></p>
<h3 data-id="heading-6">3.4 æˆªå›¾æ‚¬æµ®</h3>
<p>æˆªå›¾æ‚¬æµ®ç”¨åœ¨è€å¸ˆå¤šåª’ä½“è®²è¯¾çš„æ¯”è¾ƒå¤šï¼Œæˆªå–å›¾ç‰‡ç„¶åç»™å¤§å®¶åˆ†äº«å†…å®¹ã€‚æ™®é€šçš„æˆªå›¾å·¥å…·ï¼Œæˆªå®Œå›¾ä¹‹åï¼Œå›¾ç‰‡éƒ½åœ¨å‰ªåˆ‡æ¿ï¼Œè€Œæˆªå›¾æ‚¬æµ®åˆ™åœç•™åœ¨å½“å‰é¡µé¢ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/362284ba9cd542c09c120df83bfccbda~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2ltb25LaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771293053&amp;x-signature=UV6OIOdU9H40TBmXbg8c2bef3G0%3D" alt="" loading="lazy"/></p>
<p><strong>æ•ˆæœ</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5c6c96d5018542a28b4568456cdcedb7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2ltb25LaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771293053&amp;x-signature=aWGemd0gnl5AuELGnTedE8TXnv0%3D" alt="" loading="lazy"/></p>
<p>é‡Œé¢çš„æ’ä»¶è¿˜æœ‰å¾ˆå¤šï¼Œå¤§å®¶å¯ä»¥æ ¹æ®è‡ªå·±çš„å–œå¥½éšæ„å®‰è£…ã€‚</p>
<h2 data-id="heading-7">04 å°ç»“</h2>
<p><code>uTools</code>ä»¥ç›’å­çš„å½¢å¼å±•ç¤ºç»™å¤§å®¶ï¼Œå·¥å…·ä»¥æ’ä»¶çš„æ–¹å¼ç»™å¤§å®¶ä½¿ç”¨ã€‚çœŸçš„æ˜¯æ–¹ä¾¿å¾ˆå¤šã€‚å…è´¹ç‰ˆçš„ä»…æ”¯æŒ10ä¸ªæ’ä»¶ï¼Œä½†æ˜¯è¶³å¤Ÿç”¨äº†ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a0b8d687f2604d5d9fe94413db84b0e2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2ltb25LaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771293053&amp;x-signature=i4yZmfdUuwl7FR7%2FYfBKZ2JTNuo%3D" alt="" loading="lazy"/></p>
<p>æƒ³è¦å…é™åˆ¶çš„å¯ä»¥ä½¿ç”¨ç±»ä¼¼çš„è½¯ä»¶:<code>rubick</code></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e5a4c877f79e4b41a26c111721a9ff11~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2ltb25LaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771293053&amp;x-signature=VlxRyi%2BKfUu9%2Fq7Re3REKKz%2BY5U%3D" alt="" loading="lazy"/></p>
<p><code>GitHub</code>åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FrubickCenter%2Frubick" target="_blank" title="https://github.com/rubickCenter/rubick" ref="nofollow noopener noreferrer">github.com/rubickCenteâ€¦</a></p>
<p>é‡Œé¢çš„æ’ä»¶æœ‰é™ï¼Œæ•´ä½“æ„Ÿè§‰æ²¡æœ‰<code>utools</code>é¡ºç•…ï¼Œä½†æ˜¯å®Œå…¨å¼€æºå…è´¹ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ·±å…¥ç†è§£Goè¯­è¨€ç»“æ„ä½“æ ‡ç­¾ï¼šç”¨é€”ã€ç”¨æ³•ä¸æ³¨æ„äº‹é¡¹]]></title>    <link>https://juejin.cn/post/7604574877035216939</link>    <guid>https://juejin.cn/post/7604574877035216939</guid>    <pubDate>2026-02-09T16:18:41.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604574877035216939" data-draft-id="7604574877035200555" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ·±å…¥ç†è§£Goè¯­è¨€ç»“æ„ä½“æ ‡ç­¾ï¼šç”¨é€”ã€ç”¨æ³•ä¸æ³¨æ„äº‹é¡¹"/> <meta itemprop="keywords" content="åç«¯,Go,é¢è¯•"/> <meta itemprop="datePublished" content="2026-02-09T16:18:41.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æˆ‘å«é»‘å¤§å¸…"/> <meta itemprop="url" content="https://juejin.cn/user/1678295463898875"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ·±å…¥ç†è§£Goè¯­è¨€ç»“æ„ä½“æ ‡ç­¾ï¼šç”¨é€”ã€ç”¨æ³•ä¸æ³¨æ„äº‹é¡¹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1678295463898875/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æˆ‘å«é»‘å¤§å¸…
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-09T16:18:41.000Z" title="Mon Feb 09 2026 16:18:41 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»13åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æ·±å…¥ç†è§£Goè¯­è¨€ç»“æ„ä½“æ ‡ç­¾ï¼šç”¨é€”ã€ç”¨æ³•ä¸æ³¨æ„äº‹é¡¹</h2>
<p>åœ¨Goè¯­è¨€ä¸­ï¼Œç»“æ„ä½“ï¼ˆstructï¼‰æ˜¯ç”¨äºå°è£…æ•°æ®çš„æ ¸å¿ƒè¯­æ³•ï¼Œè€Œç»“æ„ä½“æ ‡ç­¾ï¼ˆStruct Tagï¼‰åˆ™æ˜¯é™„ç€åœ¨ç»“æ„ä½“å­—æ®µä¸Šçš„â€œéšå½¢å…ƒæ•°æ®â€â€”â€”å®ƒæœ¬èº«ä¸å‚ä¸ç¨‹åºçš„é€»è¾‘è¿è¡Œï¼Œä¹Ÿä¸ä¼šå½±å“å­—æ®µçš„å–å€¼å’Œèµ‹å€¼ï¼Œä½†åœ¨è¿è¡Œæ—¶å¯ä»¥é€šè¿‡**åå°„ï¼ˆreflectåŒ…ï¼‰**è¢«è¯»å–å’Œè§£æï¼Œè¿›è€Œå®ç°å„ç±»è‡ªåŠ¨åŒ–åŠŸèƒ½ã€‚</p>
<p>ç®€å•æ¥è¯´ï¼Œç»“æ„ä½“æ ‡ç­¾å°±åƒæ˜¯ç»™ç»“æ„ä½“çš„æ¯ä¸ªå­—æ®µâ€œè´´å°çº¸æ¡â€ï¼Œçº¸æ¡ä¸Šå†™ç€è¯¥å­—æ®µçš„é¢å¤–è¯´æ˜ï¼Œè¿™äº›è¯´æ˜åªæœ‰â€œå…·å¤‡é€è§†èƒ½åŠ›â€çš„åå°„æ‰èƒ½çœ‹åˆ°ï¼Œè€Œæ­£æ˜¯è¿™äº›â€œå°çº¸æ¡â€ï¼Œæ”¯æ’‘èµ·äº†Goè¯­è¨€ä¸­å¤§é‡ä¸»æµå·¥å…·åº“ï¼ˆå¦‚JSONåºåˆ—åŒ–ã€ORMæ¡†æ¶ã€å‚æ•°æ ¡éªŒåº“ï¼‰çš„æ ¸å¿ƒåŠŸèƒ½ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä»æœ¬è´¨ã€è¯­æ³•ã€æ ¸å¿ƒç”¨é€”ã€å®Œæ•´ç¤ºä¾‹ã€å¸¸è§è¯¯åŒºäº”ä¸ªç»´åº¦ï¼Œå…¨é¢æ‹†è§£ç»“æ„ä½“æ ‡ç­¾ï¼Œè®©ä½ æ—¢èƒ½æ‡‚åŸç†ï¼Œä¹Ÿèƒ½ç›´æ¥è½åœ°ä½¿ç”¨ã€‚</p>
<h3 data-id="heading-1">ä¸€ã€ç»“æ„ä½“æ ‡ç­¾çš„æœ¬è´¨ä¸åŸºç¡€è¯­æ³•</h3>
<h4 data-id="heading-2">1. æœ¬è´¨</h4>
<p>ç»“æ„ä½“æ ‡ç­¾æ˜¯<strong>å­—ç¬¦ä¸²å¸¸é‡</strong>ï¼Œé™„ç€åœ¨ç»“æ„ä½“å­—æ®µå£°æ˜çš„åæ–¹ï¼Œç”¨äºå­˜å‚¨è¯¥å­—æ®µçš„å…ƒæ•°æ®ï¼ˆæè¿°æ€§ä¿¡æ¯ï¼‰ã€‚å®ƒä¸å±äºç»“æ„ä½“å­—æ®µçš„ä¸€éƒ¨åˆ†ï¼Œç¼–è¯‘æœŸä¼šè¢«ä¿ç•™åœ¨äºŒè¿›åˆ¶æ–‡ä»¶ä¸­ï¼Œè¿è¡Œæ—¶é€šè¿‡åå°„åŒ…çš„ç›¸å…³æ–¹æ³•ï¼ˆå¦‚Tag.Get()ï¼‰è¯»å–ï¼Œè¿›è€Œå®ç°â€œæ ¹æ®å…ƒæ•°æ®è‡ªåŠ¨å¤„ç†å­—æ®µâ€çš„é€»è¾‘ã€‚</p>
<p>æ ¸å¿ƒç‰¹ç‚¹ï¼šæ— ä¾µå…¥æ€§ï¼ˆä¸ä¿®æ”¹å­—æ®µæœ¬èº«çš„åŠŸèƒ½ï¼‰ã€å¯æ‰©å±•æ€§ï¼ˆå¯è‡ªå®šä¹‰æ ‡ç­¾é”®å€¼å¯¹ï¼‰ã€ä»…èƒ½é€šè¿‡åå°„è¯»å–ï¼ˆæ™®é€šä»£ç æ— æ³•ç›´æ¥è®¿é—®ï¼‰ã€‚</p>
<h4 data-id="heading-3">2. åŸºç¡€è¯­æ³•ï¼ˆå¿…è®°ï¼Œé¿å…è¸©å‘ï¼‰</h4>
<p>ç»“æ„ä½“æ ‡ç­¾çš„è¯­æ³•æœ‰ä¸¥æ ¼è§„èŒƒï¼Œå†™é”™ä¼šå¯¼è‡´åå°„æ— æ³•è¯»å–ï¼Œä¸”ç¼–è¯‘æœŸä¸ä¼šæŠ¥é”™ï¼ˆææ˜“æ’æŸ¥ï¼‰ï¼Œæ ¸å¿ƒè§„åˆ™å¦‚ä¸‹ï¼š</p>
<ul>
<li>
<p>æ ‡ç­¾å¿…é¡»ç”¨ <strong>åå¼•å·ï¼ˆ`ï¼‰</strong> åŒ…è£¹ï¼ˆä¸èƒ½ç”¨åŒå¼•å·""æˆ–å•å¼•å·''ï¼‰ï¼Œå¦åˆ™ä¼šè¢«è§£æä¸ºæ™®é€šå­—ç¬¦ä¸²ï¼Œè€Œéæ ‡ç­¾ã€‚</p>
</li>
<li>
<p>æ ‡ç­¾å†…éƒ¨é‡‡ç”¨ <strong>é”®å€¼å¯¹</strong> æ ¼å¼ï¼Œæ ¼å¼ä¸ºï¼š<code>é”®1:"å€¼1" é”®2:"å€¼2" ...</code>ï¼ˆé”®ä¸å€¼ä¹‹é—´ç”¨å†’å·åˆ†éš”ï¼Œå€¼ç”¨åŒå¼•å·åŒ…è£¹ï¼Œå¤šä¸ªé”®å€¼å¯¹ç”¨ç©ºæ ¼åˆ†éš”ï¼Œä¸èƒ½ç”¨é€—å·ï¼‰ã€‚</p>
</li>
<li>
<p>æ ‡ç­¾çš„é”®å’Œå€¼å¯ä»¥è‡ªå®šä¹‰ï¼ˆå¦‚doc:"ç”¨æˆ·å§“å"ï¼‰ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ä¸»æµåº“çº¦å®šçš„é”®ï¼ˆå¦‚json:"username"ã€gorm:"column:id"ï¼‰ã€‚</p>
</li>
<li>
<p>æ ‡ç­¾ä¸­å¯ä»¥åŒ…å«ç©ºæ ¼ã€å¼•å·ï¼ˆéœ€è½¬ä¹‰ï¼‰ç­‰ç‰¹æ®Šå­—ç¬¦ï¼Œä½†å»ºè®®ä¿æŒç®€æ´ï¼Œä»…å­˜å‚¨å¿…è¦çš„å…ƒæ•°æ®ã€‚</p>
</li>
</ul>
<h5 data-id="heading-4">æ­£ç¡®ä¸é”™è¯¯ç¤ºä¾‹å¯¹æ¯”</h5>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// æ­£ç¡®ç¤ºä¾‹ï¼ˆåå¼•å·åŒ…è£¹ã€é”®å€¼å¯¹æ ¼å¼æ­£ç¡®ï¼‰</span>
<span class="hljs-keyword">type</span> User <span class="hljs-keyword">struct</span> {
    Name <span class="hljs-type">string</span> <span class="hljs-string">`json:"username" doc:"ç”¨æˆ·å§“å" validate:"required"`</span>
    Age  <span class="hljs-type">int</span>    <span class="hljs-string">`gorm:"column:user_age;type:int(3)"`</span>
}

<span class="hljs-comment">// é”™è¯¯ç¤ºä¾‹ï¼ˆå¸¸è§è¸©å‘ç‚¹ï¼‰</span>
<span class="hljs-keyword">type</span> UserWrong <span class="hljs-keyword">struct</span> {
    <span class="hljs-comment">// é”™è¯¯1ï¼šç”¨åŒå¼•å·åŒ…è£¹æ ‡ç­¾ï¼Œä¼šè¢«è§£æä¸ºæ™®é€šå­—ç¬¦ä¸²</span>
    Name <span class="hljs-type">string</span> <span class="hljs-string">"json:'username'"</span>
    <span class="hljs-comment">// é”™è¯¯2ï¼šå¤šä¸ªé”®å€¼å¯¹ç”¨é€—å·åˆ†éš”ï¼Œåå°„æ— æ³•è¯†åˆ«</span>
    Age  <span class="hljs-type">int</span>    <span class="hljs-string">`gorm:"column:user_age",validate:"gte=18"`</span>
    <span class="hljs-comment">// é”™è¯¯3ï¼šå€¼æœªç”¨åŒå¼•å·åŒ…è£¹ï¼Œè¯­æ³•ä¸è§„èŒƒ</span>
    Sex  <span class="hljs-type">string</span> <span class="hljs-string">`doc:ç”·/å¥³`</span>
}
</code></pre>
<h3 data-id="heading-5">äºŒã€ç»“æ„ä½“æ ‡ç­¾çš„4å¤§æ ¸å¿ƒç”¨é€”ï¼ˆé™„å®Œæ•´å¯è¿è¡Œç¤ºä¾‹ï¼‰</h3>
<p>ç»“æ„ä½“æ ‡ç­¾çš„æ ¸å¿ƒä»·å€¼çš„æ˜¯â€œè‡ªåŠ¨åŒ–â€â€”â€”é€šè¿‡æå‰å®šä¹‰æ ‡ç­¾ï¼Œè®©å·¥å…·åº“ï¼ˆä¾èµ–åå°„ï¼‰è‡ªåŠ¨å¤„ç†å­—æ®µï¼Œå‡å°‘é‡å¤ç¼–ç ã€‚ä»¥ä¸‹æ˜¯å¼€å‘ä¸­æœ€å¸¸ç”¨çš„4ä¸ªåœºæ™¯ï¼Œæ¯ä¸ªåœºæ™¯éƒ½æ­é…å®Œæ•´ä»£ç ç¤ºä¾‹ï¼Œå¯ç›´æ¥å¤åˆ¶è¿è¡Œã€‚</p>
<h4 data-id="heading-6">ç”¨é€”1ï¼šJSONåºåˆ—åŒ–/ååºåˆ—åŒ–ï¼ˆæœ€å¸¸ç”¨åœºæ™¯ï¼‰</h4>
<p>Goè¯­è¨€æ ‡å‡†åº“encoding/jsonï¼Œå°±æ˜¯é€šè¿‡è¯»å–ç»“æ„ä½“æ ‡ç­¾ä¸­çš„jsoné”®ï¼Œæ¥å®ç°ç»“æ„ä½“ä¸JSONå­—ç¬¦ä¸²çš„è½¬æ¢ï¼Œæ ¸å¿ƒä½œç”¨æ˜¯ï¼šè‡ªå®šä¹‰JSONçš„é”®åã€æ§åˆ¶å­—æ®µæ˜¯å¦åºåˆ—åŒ–ã€å¤„ç†ç©ºå€¼ç­‰ã€‚</p>
<h5 data-id="heading-7">å¸¸è§jsonæ ‡ç­¾å‚æ•°</h5>
<ul>
<li>
<p>json:"username"ï¼šæŒ‡å®šJSONä¸­çš„é”®åä¸ºusernameï¼ˆæ›¿æ¢ç»“æ„ä½“å­—æ®µåŸåNameï¼‰ã€‚</p>
</li>
<li>
<p>json:"-"ï¼šæŒ‡å®šè¯¥å­—æ®µä¸å‚ä¸JSONåºåˆ—åŒ–/ååºåˆ—åŒ–ï¼ˆæ— è®ºå­—æ®µæœ‰å€¼ä¸å¦ï¼Œéƒ½ä¸ä¼šå‡ºç°åœ¨JSONä¸­ï¼‰ã€‚</p>
</li>
<li>
<p>json:"age,omitempty"ï¼šå¦‚æœå­—æ®µå€¼ä¸ºç©ºï¼ˆå¦‚intä¸º0ã€stringä¸ºç©ºä¸²ã€sliceä¸ºç©ºï¼‰ï¼Œåˆ™ä¸æ˜¾ç¤ºè¯¥å­—æ®µã€‚</p>
</li>
<li>
<p>json:"sex,string"ï¼šå°†å­—æ®µå€¼è½¬æ¢ä¸ºå­—ç¬¦ä¸²ç±»å‹åå†åºåˆ—åŒ–ï¼ˆå¦‚intç±»å‹çš„1ï¼Œä¼šå˜æˆ"1"ï¼‰ã€‚</p>
</li>
</ul>
<h5 data-id="heading-8">å®Œæ•´ç¤ºä¾‹ä»£ç </h5>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> (
    <span class="hljs-string">"encoding/json"</span>
    <span class="hljs-string">"fmt"</span>
)

<span class="hljs-comment">// å®šä¹‰å¸¦æœ‰jsonæ ‡ç­¾çš„ç»“æ„ä½“</span>
<span class="hljs-keyword">type</span> User <span class="hljs-keyword">struct</span> {
    Name     <span class="hljs-type">string</span> <span class="hljs-string">`json:"username"`</span>       <span class="hljs-comment">// è‡ªå®šä¹‰JSONé”®å</span>
    Age      <span class="hljs-type">int</span>    <span class="hljs-string">`json:"age,omitempty"`</span>  <span class="hljs-comment">// ç©ºå€¼ä¸æ˜¾ç¤º</span>
    Password <span class="hljs-type">string</span> <span class="hljs-string">`json:"-"`</span>              <span class="hljs-comment">// ä¸å‚ä¸JSONåºåˆ—åŒ–</span>
    Sex      <span class="hljs-type">int</span>    <span class="hljs-string">`json:"sex,string"`</span>     <span class="hljs-comment">// è½¬æ¢ä¸ºå­—ç¬¦ä¸²åºåˆ—åŒ–</span>
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    <span class="hljs-comment">// 1. ç»“æ„ä½“è½¬JSONï¼ˆåºåˆ—åŒ–ï¼‰</span>
    user := User{
        Name:     <span class="hljs-string">"å¼ ä¸‰"</span>,
        Age:      <span class="hljs-number">0</span>,      <span class="hljs-comment">// ç©ºå€¼ï¼Œä¼šè¢«omitemptyå¿½ç•¥</span>
        Password: <span class="hljs-string">"123456"</span>,<span class="hljs-comment">// ä¼šè¢«json:"-"å¿½ç•¥</span>
        Sex:      <span class="hljs-number">1</span>,
    }
    jsonStr, err := json.Marshal(user)
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        fmt.Println(<span class="hljs-string">"JSONåºåˆ—åŒ–å¤±è´¥ï¼š"</span>, err)
        <span class="hljs-keyword">return</span>
    }
    fmt.Println(<span class="hljs-string">"åºåˆ—åŒ–ç»“æœï¼š"</span>, <span class="hljs-type">string</span>(jsonStr)) <span class="hljs-comment">// è¾“å‡ºï¼š{"username":"å¼ ä¸‰","sex":"1"}</span>

    <span class="hljs-comment">// 2. JSONè½¬ç»“æ„ä½“ï¼ˆååºåˆ—åŒ–ï¼‰</span>
    jsonStr2 := <span class="hljs-string">`{"username":"æå››","age":20,"sex":"0"}`</span>
    <span class="hljs-keyword">var</span> user2 User
    err = json.Unmarshal([]<span class="hljs-type">byte</span>(jsonStr2), &amp;user2)
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        fmt.Println(<span class="hljs-string">"JSONååºåˆ—åŒ–å¤±è´¥ï¼š"</span>, err)
        <span class="hljs-keyword">return</span>
    }
    fmt.Println(<span class="hljs-string">"ååºåˆ—åŒ–ç»“æœï¼š"</span>, user2) <span class="hljs-comment">// è¾“å‡ºï¼š{æå›› 20  0}</span>
}
</code></pre>
<h4 data-id="heading-9">ç”¨é€”2ï¼šæ•°æ®åº“ORMæ˜ å°„ï¼ˆGORM/XORMæ ¸å¿ƒç”¨æ³•ï¼‰</h4>
<p>åœ¨Goè¯­è¨€å¼€å‘ä¸­ï¼ŒORMæ¡†æ¶ï¼ˆå¦‚GORMï¼‰æ˜¯æ“ä½œæ•°æ®åº“çš„ä¸»æµæ–¹å¼ï¼Œè€ŒORMæ¡†æ¶æ­£æ˜¯é€šè¿‡ç»“æ„ä½“æ ‡ç­¾ï¼Œå°†ç»“æ„ä½“å­—æ®µä¸æ•°æ®åº“è¡¨çš„åˆ—è¿›è¡Œæ˜ å°„ï¼Œæ— éœ€æ‰‹åŠ¨ç¼–å†™SQLè¯­å¥ï¼Œå®ç°â€œé¢å‘å¯¹è±¡â€çš„æ•°æ®åº“æ“ä½œã€‚</p>
<p>ä»¥æœ€æµè¡Œçš„GORMæ¡†æ¶ä¸ºä¾‹ï¼Œå¸¸è§çš„gormæ ‡ç­¾å‚æ•°å¦‚ä¸‹ï¼ˆä»…åˆ—ä¸¾é«˜é¢‘ï¼‰ï¼š</p>
<h5 data-id="heading-10">å¸¸è§gormæ ‡ç­¾å‚æ•°</h5>
<ul>
<li>
<p>gorm:"column:user_id"ï¼šæŒ‡å®šæ•°æ®åº“è¡¨çš„åˆ—åä¸ºuser_idï¼ˆæ›¿æ¢ç»“æ„ä½“å­—æ®µåŸåIDï¼‰ã€‚</p>
</li>
<li>
<p>gorm:"primaryKey"ï¼šæŒ‡å®šè¯¥å­—æ®µä¸ºä¸»é”®ï¼ˆå¯¹åº”æ•°æ®åº“çš„PRIMARY KEYï¼‰ã€‚</p>
</li>
<li>
<p>gorm:"autoIncrement"ï¼šæŒ‡å®šè¯¥å­—æ®µä¸ºè‡ªå¢åˆ—ï¼ˆä»…é€‚ç”¨äºintç±»å‹ä¸»é”®ï¼‰ã€‚</p>
</li>
<li>
<p>gorm:"type:varchar(50)"ï¼šæŒ‡å®šæ•°æ®åº“åˆ—çš„ç±»å‹ï¼ˆå¦‚varchar(50)ã€int(11)ï¼‰ã€‚</p>
</li>
<li>
<p>gorm:"not null"ï¼šæŒ‡å®šè¯¥åˆ—ä¸èƒ½ä¸ºç©ºï¼ˆå¯¹åº”æ•°æ®åº“çš„NOT NULLï¼‰ã€‚</p>
</li>
<li>
<p>gorm:"default:0"ï¼šæŒ‡å®šè¯¥åˆ—çš„é»˜è®¤å€¼ï¼ˆå¯¹åº”æ•°æ®åº“çš„DEFAULTï¼‰ã€‚</p>
</li>
<li>
<p>gorm:"comment:ç”¨æˆ·å§“å"ï¼šç»™æ•°æ®åº“åˆ—æ·»åŠ æ³¨é‡Šï¼ˆæ–¹ä¾¿åæœŸç»´æŠ¤ï¼‰ã€‚</p>
</li>
</ul>
<h5 data-id="heading-11">å®Œæ•´ç¤ºä¾‹ä»£ç ï¼ˆGORMï¼‰</h5>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> (
    <span class="hljs-string">"gorm.io/driver/mysql"</span>
    <span class="hljs-string">"gorm.io/gorm"</span>
    <span class="hljs-string">"fmt"</span>
)

<span class="hljs-comment">// å®šä¹‰å¸¦æœ‰gormæ ‡ç­¾çš„ç»“æ„ä½“ï¼ˆå¯¹åº”æ•°æ®åº“è¡¨usersï¼‰</span>
<span class="hljs-keyword">type</span> User <span class="hljs-keyword">struct</span> {
    ID       <span class="hljs-type">int</span>    <span class="hljs-string">`gorm:"column:user_id;primaryKey;autoIncrement"`</span> <span class="hljs-comment">// ä¸»é”®è‡ªå¢</span>
    Name     <span class="hljs-type">string</span> <span class="hljs-string">`gorm:"column:user_name;type:varchar(50);not null;comment:ç”¨æˆ·å§“å"`</span>
    Age      <span class="hljs-type">int</span>    <span class="hljs-string">`gorm:"column:user_age;type:int(3);default:0;comment:ç”¨æˆ·å¹´é¾„"`</span>
    Email    <span class="hljs-type">string</span> <span class="hljs-string">`gorm:"column:user_email;type:varchar(100);unique;comment:ç”¨æˆ·é‚®ç®±ï¼ˆå”¯ä¸€ï¼‰"`</span>
    Password <span class="hljs-type">string</span> <span class="hljs-string">`gorm:"column:user_password;type:varchar(100);not null;comment:ç”¨æˆ·å¯†ç "`</span>
}

<span class="hljs-comment">// è‡ªå®šä¹‰è¡¨åï¼ˆå¯é€‰ï¼Œé»˜è®¤è¡¨åä¸ºç»“æ„ä½“å¤æ•°å½¢å¼usersï¼‰</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(u User)</span></span> TableName() <span class="hljs-type">string</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-string">"users"</span>
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    <span class="hljs-comment">// 1. è¿æ¥æ•°æ®åº“ï¼ˆæ›¿æ¢ä¸ºè‡ªå·±çš„æ•°æ®åº“ä¿¡æ¯ï¼‰</span>
    dsn := <span class="hljs-string">"root:123456@tcp(127.0.0.1:3306)/test?charset=utf8mb4&amp;parseTime=True&amp;loc=Local"</span>
    db, err := gorm.Open(mysql.Open(dsn), &amp;gorm.Config{})
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        <span class="hljs-built_in">panic</span>(<span class="hljs-string">"æ•°æ®åº“è¿æ¥å¤±è´¥ï¼š"</span> + err.Error())
    }

    <span class="hljs-comment">// 2. æ ¹æ®ç»“æ„ä½“åˆ›å»ºè¡¨ï¼ˆè‡ªåŠ¨æ ¹æ®gormæ ‡ç­¾ç”Ÿæˆåˆ—å±æ€§ï¼‰</span>
    err = db.AutoMigrate(&amp;User{})
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        <span class="hljs-built_in">panic</span>(<span class="hljs-string">"åˆ›å»ºè¡¨å¤±è´¥ï¼š"</span> + err.Error())
    }
    fmt.Println(<span class="hljs-string">"è¡¨åˆ›å»ºæˆåŠŸï¼ˆè‹¥ä¸å­˜åœ¨ï¼‰"</span>)

    <span class="hljs-comment">// 3. æ’å…¥æ•°æ®ï¼ˆORMè‡ªåŠ¨æ˜ å°„ç»“æ„ä½“å­—æ®µä¸æ•°æ®åº“åˆ—ï¼‰</span>
    user := User{
        Name:     <span class="hljs-string">"å¼ ä¸‰"</span>,
        Age:      <span class="hljs-number">25</span>,
        Email:    <span class="hljs-string">"zhangsan@163.com"</span>,
        Password: <span class="hljs-string">"123456"</span>,
    }
    db.Create(&amp;user)
    fmt.Println(<span class="hljs-string">"æ’å…¥æ•°æ®æˆåŠŸï¼Œç”¨æˆ·IDï¼š"</span>, user.ID)
}
</code></pre>
<h4 data-id="heading-12">ç”¨é€”3ï¼šå‚æ•°æ ¡éªŒï¼ˆvalidatoråº“å¿…å¤‡ï¼‰</h4>
<p>åœ¨æ¥å£å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦æ ¡éªŒè¯·æ±‚å‚æ•°ï¼ˆå¦‚ç”¨æˆ·æ³¨å†Œæ—¶çš„é‚®ç®±æ ¼å¼ã€å¯†ç é•¿åº¦ã€å¹´é¾„èŒƒå›´ç­‰ï¼‰ï¼Œå¦‚æœæ‰‹åŠ¨ç¼–å†™å¤§é‡if-elseåˆ¤æ–­ï¼Œä¼šå¯¼è‡´ä»£ç å†—ä½™ã€éš¾ä»¥ç»´æŠ¤ã€‚æ­¤æ—¶ï¼Œé€šè¿‡ç»“æ„ä½“æ ‡ç­¾é…åˆvalidatoråº“ï¼Œå°±èƒ½å®ç°å‚æ•°çš„è‡ªåŠ¨æ ¡éªŒã€‚</p>
<p>validatoråº“æ˜¯Goè¯­è¨€ä¸­æœ€æµè¡Œçš„å‚æ•°æ ¡éªŒåº“ï¼Œæ”¯æŒé€šè¿‡æ ‡ç­¾å®šä¹‰æ ¡éªŒè§„åˆ™ï¼Œè‡ªåŠ¨æ ¡éªŒç»“æ„ä½“å­—æ®µçš„å€¼æ˜¯å¦ç¬¦åˆè¦æ±‚ã€‚</p>
<h5 data-id="heading-13">å¸¸è§validateæ ‡ç­¾å‚æ•°ï¼ˆé«˜é¢‘ï¼‰</h5>
<ul>
<li>
<p>validate:"required"ï¼šå­—æ®µå¿…å¡«ï¼ˆä¸èƒ½ä¸ºé»˜è®¤ç©ºå€¼ï¼Œå¦‚stringä¸ºç©ºä¸²ã€intä¸º0ï¼‰ã€‚</p>
</li>
<li>
<p>validate:"email"ï¼šå­—æ®µå€¼å¿…é¡»æ˜¯åˆæ³•çš„é‚®ç®±æ ¼å¼ï¼ˆå¦‚<a href="https://link.juejin.cn?target=mailto%3Axxx%40xxx.com" target="_blank" title="mailto:xxx@xxx.com" ref="nofollow noopener noreferrer">xxx@xxx.com</a>ï¼‰ã€‚</p>
</li>
<li>
<p>validate:"gte=18,lte=120"ï¼šå­—æ®µå€¼å¿…é¡»å¤§äºç­‰äº18ã€å°äºç­‰äº120ï¼ˆä»…é€‚ç”¨äºæ•°å€¼ç±»å‹ï¼‰ã€‚</p>
</li>
<li>
<p>validate:"len=6"ï¼šå­—æ®µå€¼çš„é•¿åº¦å¿…é¡»ç­‰äº6ï¼ˆé€‚ç”¨äºstringã€sliceç­‰ï¼‰ã€‚</p>
</li>
<li>
<p>validate:"min=6,max=20"ï¼šå­—æ®µå€¼çš„é•¿åº¦å¿…é¡»åœ¨6-20ä¹‹é—´ï¼ˆé€‚ç”¨äºstringã€sliceç­‰ï¼‰ã€‚</p>
</li>
<li>
<p>validate:"oneof=male female"ï¼šå­—æ®µå€¼å¿…é¡»æ˜¯æŒ‡å®šé€‰é¡¹ä¸­çš„ä¸€ä¸ªï¼ˆå¦‚åªèƒ½æ˜¯maleæˆ–femaleï¼‰ã€‚</p>
</li>
</ul>
<h5 data-id="heading-14">å®Œæ•´ç¤ºä¾‹ä»£ç ï¼ˆvalidatorï¼‰</h5>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> (
    <span class="hljs-string">"fmt"</span>
    <span class="hljs-string">"github.com/go-playground/validator/v10"</span>
)

<span class="hljs-comment">// å®šä¹‰å¸¦æœ‰validateæ ‡ç­¾çš„è¯·æ±‚ç»“æ„ä½“</span>
<span class="hljs-keyword">type</span> RegisterRequest <span class="hljs-keyword">struct</span> {
    Username <span class="hljs-type">string</span> <span class="hljs-string">`json:"username" validate:"required,min=6,max=20"`</span> <span class="hljs-comment">// å¿…å¡«ï¼Œé•¿åº¦6-20</span>
    Email    <span class="hljs-type">string</span> <span class="hljs-string">`json:"email" validate:"required,email"`</span>          <span class="hljs-comment">// å¿…å¡«ï¼Œåˆæ³•é‚®ç®±</span>
    Age      <span class="hljs-type">int</span>    <span class="hljs-string">`json:"age" validate:"required,gte=18,lte=120"`</span>   <span class="hljs-comment">// å¿…å¡«ï¼Œå¹´é¾„18-120</span>
    Password <span class="hljs-type">string</span> <span class="hljs-string">`json:"password" validate:"required,len=6"`</span>       <span class="hljs-comment">// å¿…å¡«ï¼Œé•¿åº¦6</span>
    Sex      <span class="hljs-type">string</span> <span class="hljs-string">`json:"sex" validate:"required,oneof=male female"`</span><span class="hljs-comment">// å¿…å¡«ï¼Œåªèƒ½æ˜¯male/female</span>
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    <span class="hljs-comment">// 1. åˆå§‹åŒ–æ ¡éªŒå™¨</span>
    validate := validator.New()

    <span class="hljs-comment">// 2. æ¨¡æ‹Ÿè¯·æ±‚å‚æ•°ï¼ˆä¸ç¬¦åˆæ ¡éªŒè§„åˆ™çš„ç¤ºä¾‹ï¼‰</span>
    req := RegisterRequest{
        Username: <span class="hljs-string">"zhangsan"</span>, <span class="hljs-comment">// é•¿åº¦8ï¼Œç¬¦åˆè¦æ±‚</span>
        Email:    <span class="hljs-string">"zhangsan163.com"</span>, <span class="hljs-comment">// ä¸åˆæ³•é‚®ç®±ï¼ˆç¼ºå°‘@ï¼‰</span>
        Age:      <span class="hljs-number">17</span>,         <span class="hljs-comment">// å¹´é¾„17ï¼Œä¸ç¬¦åˆgte=18</span>
        Password: <span class="hljs-string">"12345"</span>,    <span class="hljs-comment">// é•¿åº¦5ï¼Œä¸ç¬¦åˆlen=6</span>
        Sex:      <span class="hljs-string">"man"</span>,      <span class="hljs-comment">// ä¸æ˜¯æŒ‡å®šé€‰é¡¹ï¼ˆmale/femaleï¼‰</span>
    }

    <span class="hljs-comment">// 3. æ‰§è¡Œæ ¡éªŒ</span>
    err := validate.Struct(req)
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        <span class="hljs-comment">// 4. è¾“å‡ºæ ¡éªŒå¤±è´¥ä¿¡æ¯</span>
        <span class="hljs-keyword">for</span> _, err := <span class="hljs-keyword">range</span> err.(validator.ValidationErrors) {
            fmt.Printf(<span class="hljs-string">"å‚æ•°æ ¡éªŒå¤±è´¥ï¼š%sï¼ˆå­—æ®µï¼š%sï¼Œè¦æ±‚ï¼š%sï¼‰\n"</span>, 
                err.Error(), err.Field(), err.Tag())
        }
        <span class="hljs-keyword">return</span>
    }

    fmt.Println(<span class="hljs-string">"å‚æ•°æ ¡éªŒé€šè¿‡ï¼Œå¯ä»¥æ‰§è¡Œæ³¨å†Œé€»è¾‘"</span>)
}
</code></pre>
<h4 data-id="heading-15">ç”¨é€”4ï¼šæ–‡æ¡£/è¡¨å•è‡ªåŠ¨ç”Ÿæˆï¼ˆæ¥å£å¼€å‘å¿…å¤‡ï¼‰</h4>
<p>åœ¨æ¥å£å¼€å‘ä¸­ï¼Œæˆ‘ä»¬éœ€è¦ç¼–å†™æ¥å£æ–‡æ¡£ï¼ˆå¦‚Swaggerï¼‰ï¼Œæˆ–è€…å®ç°è¡¨å•å‚æ•°ä¸ç»“æ„ä½“çš„è‡ªåŠ¨ç»‘å®šï¼Œæ­¤æ—¶ç»“æ„ä½“æ ‡ç­¾å°±èƒ½å‘æŒ¥ä½œç”¨â€”â€”é€šè¿‡è‡ªå®šä¹‰æ ‡ç­¾ï¼ˆå¦‚docã€formï¼‰ï¼Œå­˜å‚¨å­—æ®µçš„è¯´æ˜ä¿¡æ¯ã€è¡¨å•é”®åï¼Œå†é…åˆå·¥å…·åº“è‡ªåŠ¨ç”Ÿæˆæ–‡æ¡£æˆ–ç»‘å®šå‚æ•°ã€‚</p>
<p>è¿™æ­£æ˜¯ä½ ä¹‹å‰è¯­é›€é“¾æ¥ä¸­å±•ç¤ºçš„ç”¨æ³•ï¼ˆç”¨docæ ‡ç­¾å­˜å‚¨å­—æ®µè¯´æ˜ï¼‰ï¼Œæˆ‘ä»¬æ‰©å±•ä¸ºâ€œæ–‡æ¡£+è¡¨å•ç»‘å®šâ€çš„å®Œæ•´ç¤ºä¾‹ã€‚</p>
<h5 data-id="heading-16">å¸¸è§æ ‡ç­¾ï¼ˆè‡ªå®šä¹‰+ä¸»æµçº¦å®šï¼‰</h5>
<ul>
<li>
<p>doc:"ç”¨æˆ·å§“å"ï¼šå­˜å‚¨å­—æ®µçš„è¯´æ˜ä¿¡æ¯ï¼Œç”¨äºè‡ªåŠ¨ç”Ÿæˆæ¥å£æ–‡æ¡£ã€‚</p>
</li>
<li>
<p>form:"user_name"ï¼šæŒ‡å®šè¡¨å•æäº¤æ—¶çš„å‚æ•°åï¼Œç”¨äºè¡¨å•å‚æ•°ä¸ç»“æ„ä½“çš„è‡ªåŠ¨ç»‘å®šï¼ˆå¦‚ginæ¡†æ¶ï¼‰ã€‚</p>
</li>
<li>
<p>swagger:"true"ï¼šæ ‡è®°è¯¥å­—æ®µéœ€è¦æ˜¾ç¤ºåœ¨Swaggeræ–‡æ¡£ä¸­ï¼ˆé…åˆswaggoåº“ï¼‰ã€‚</p>
</li>
</ul>
<h5 data-id="heading-17">å®Œæ•´ç¤ºä¾‹ä»£ç ï¼ˆginæ¡†æ¶è¡¨å•ç»‘å®š+æ–‡æ¡£è¯´æ˜ï¼‰</h5>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> (
    <span class="hljs-string">"github.com/gin-gonic/gin"</span>
    <span class="hljs-string">"net/http"</span>
)

<span class="hljs-comment">// å®šä¹‰å¸¦æœ‰formå’Œdocæ ‡ç­¾çš„ç»“æ„ä½“ï¼ˆç”¨äºè¡¨å•æäº¤ï¼‰</span>
<span class="hljs-keyword">type</span> LoginForm <span class="hljs-keyword">struct</span> {
    Username <span class="hljs-type">string</span> <span class="hljs-string">`form:"user_name" doc:"ç™»å½•ç”¨æˆ·åï¼Œé•¿åº¦6-20ä½" validate:"required,min=6,max=20"`</span>
    Password <span class="hljs-type">string</span> <span class="hljs-string">`form:"user_password" doc:"ç™»å½•å¯†ç ï¼Œé•¿åº¦6ä½" validate:"required,len=6"`</span>
    Remember <span class="hljs-type">bool</span>   <span class="hljs-string">`form:"remember_me" doc:"æ˜¯å¦è®°ä½ç™»å½•çŠ¶æ€ï¼Œé»˜è®¤false"`</span>
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    <span class="hljs-comment">// åˆå§‹åŒ–ginå¼•æ“</span>
    r := gin.Default()

    <span class="hljs-comment">// å®šä¹‰ç™»å½•æ¥å£ï¼ˆè¡¨å•æäº¤ï¼‰</span>
    r.POST(<span class="hljs-string">"/login"</span>, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(c *gin.Context)</span></span> {
        <span class="hljs-keyword">var</span> form LoginForm
        <span class="hljs-comment">// è‡ªåŠ¨ç»‘å®šè¡¨å•å‚æ•°ï¼ˆæ ¹æ®formæ ‡ç­¾åŒ¹é…ï¼‰</span>
        <span class="hljs-keyword">if</span> err := c.ShouldBindForm(&amp;form); err != <span class="hljs-literal">nil</span> {
            c.JSON(http.StatusBadRequest, gin.H{
                <span class="hljs-string">"code"</span>: <span class="hljs-number">400</span>,
                <span class="hljs-string">"msg"</span>:  <span class="hljs-string">"è¡¨å•å‚æ•°é”™è¯¯"</span>,
                <span class="hljs-string">"err"</span>:  err.Error(),
            })
            <span class="hljs-keyword">return</span>
        }

        <span class="hljs-comment">// è¿™é‡Œå¯ä»¥æ·»åŠ å‚æ•°æ ¡éªŒã€ç™»å½•é€»è¾‘ï¼ˆçœç•¥ï¼‰</span>
        c.JSON(http.StatusOK, gin.H{
            <span class="hljs-string">"code"</span>: <span class="hljs-number">200</span>,
            <span class="hljs-string">"msg"</span>:  <span class="hljs-string">"ç™»å½•æˆåŠŸ"</span>,
            <span class="hljs-string">"data"</span>: form,
        })
    })

    <span class="hljs-comment">// å¯åŠ¨æœåŠ¡</span>
    r.Run(<span class="hljs-string">":8080"</span>)
    <span class="hljs-comment">// æµ‹è¯•ï¼šè®¿é—®http://localhost:8080/loginï¼Œæäº¤è¡¨å•å‚æ•°user_nameã€user_passwordã€remember_me</span>
    <span class="hljs-comment">// æ–‡æ¡£ç”Ÿæˆï¼šé…åˆswaggoåº“ï¼Œå¯è‡ªåŠ¨è¯»å–docæ ‡ç­¾ï¼Œç”Ÿæˆæ¥å£æ–‡æ¡£</span>
}
</code></pre>
<h3 data-id="heading-18">ä¸‰ã€åå°„è¯»å–ç»“æ„ä½“æ ‡ç­¾ï¼ˆæ ¸å¿ƒåŸç†ï¼Œå¿…æ‡‚ï¼‰</h3>
<p>å‰é¢æ‰€æœ‰ç”¨é€”ï¼Œæ ¸å¿ƒéƒ½æ˜¯â€œåå°„è¯»å–æ ‡ç­¾â€â€”â€”ç»“æ„ä½“æ ‡ç­¾æœ¬èº«æ²¡æœ‰ä»»ä½•ä½œç”¨ï¼Œåªæœ‰é€šè¿‡reflectåŒ…è¯»å–å¹¶è§£æå®ƒï¼Œæ‰èƒ½å®ç°è‡ªåŠ¨åŒ–é€»è¾‘ã€‚æˆ‘ä»¬ç»“åˆä½ ä¹‹å‰è¯­é›€é“¾æ¥ä¸­çš„ä»£ç ï¼Œæ‹†è§£åå°„è¯»å–æ ‡ç­¾çš„å®Œæ•´æµç¨‹ã€‚</p>
<h4 data-id="heading-19">åå°„è¯»å–æ ‡ç­¾çš„3ä¸ªæ ¸å¿ƒæ­¥éª¤</h4>
<ol>
<li>
<p>é€šè¿‡reflect.TypeOf()è·å–æ¥å£å˜é‡çš„åå°„ç±»å‹ï¼ˆTypeï¼‰ã€‚</p>
</li>
<li>
<p>å¦‚æœä¼ å…¥çš„æ˜¯ç»“æ„ä½“æŒ‡é’ˆï¼Œéœ€é€šè¿‡Elem()æ–¹æ³•è·å–æŒ‡é’ˆæŒ‡å‘çš„å®é™…ç»“æ„ä½“ç±»å‹ã€‚</p>
</li>
<li>
<p>é€šè¿‡Field(i).Tag.Get("é”®å")ï¼Œè¯»å–æŒ‡å®šå­—æ®µçš„æ ‡ç­¾å€¼ï¼ˆiä¸ºå­—æ®µç´¢å¼•ï¼Œä»0å¼€å§‹ï¼‰ã€‚</p>
</li>
</ol>
<h4 data-id="heading-20">å®Œæ•´ç¤ºä¾‹ä»£ç ï¼ˆåå°„è¯»å–æ ‡ç­¾ï¼‰</h4>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> (
    <span class="hljs-string">"fmt"</span>
    <span class="hljs-string">"reflect"</span>
)

<span class="hljs-comment">// å®šä¹‰å¸¦æœ‰å¤šä¸ªæ ‡ç­¾çš„ç»“æ„ä½“ï¼ˆæ¨¡æ‹Ÿè¯­é›€é“¾æ¥ä¸­çš„åœºæ™¯ï¼‰</span>
<span class="hljs-keyword">type</span> Resume <span class="hljs-keyword">struct</span> {
    Name  <span class="hljs-type">string</span> <span class="hljs-string">`json:"name" doc:"æˆ‘çš„åå­—"`</span>
    Age   <span class="hljs-type">int</span>    <span class="hljs-string">`json:"age" doc:"æˆ‘çš„å¹´é¾„"`</span>
    Email <span class="hljs-type">string</span> <span class="hljs-string">`json:"email" doc:"æˆ‘çš„é‚®ç®±" validate:"required,email"`</span>
}

<span class="hljs-comment">// findDocï¼šé€šè¿‡åå°„è¯»å–ç»“æ„ä½“çš„docæ ‡ç­¾ï¼Œè¿”å›jsonæ ‡ç­¾ä¸docæ ‡ç­¾çš„æ˜ å°„</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">findDoc</span><span class="hljs-params">(stru <span class="hljs-keyword">interface</span>{})</span></span> <span class="hljs-keyword">map</span>[<span class="hljs-type">string</span>]<span class="hljs-type">string</span> {
    <span class="hljs-comment">// 1. è·å–åå°„ç±»å‹ï¼ˆTypeï¼‰ï¼Œåˆ¤æ–­æ˜¯å¦ä¸ºæŒ‡é’ˆ</span>
    t := reflect.TypeOf(stru)
    <span class="hljs-keyword">if</span> t.Kind() != reflect.Ptr {
        fmt.Println(<span class="hljs-string">"é”™è¯¯ï¼šä¼ å…¥çš„å¿…é¡»æ˜¯ç»“æ„ä½“æŒ‡é’ˆ"</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>
    }

    <span class="hljs-comment">// 2. è·å–æŒ‡é’ˆæŒ‡å‘çš„å®é™…ç»“æ„ä½“ç±»å‹</span>
    t = t.Elem()
    <span class="hljs-keyword">if</span> t.Kind() != reflect.Struct {
        fmt.Println(<span class="hljs-string">"é”™è¯¯ï¼šä¼ å…¥çš„æŒ‡é’ˆå¿…é¡»æŒ‡å‘ç»“æ„ä½“"</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>
    }

    <span class="hljs-comment">// 3. éå†ç»“æ„ä½“çš„æ‰€æœ‰å­—æ®µï¼Œè¯»å–æ ‡ç­¾</span>
    docMap := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">map</span>[<span class="hljs-type">string</span>]<span class="hljs-type">string</span>)
    <span class="hljs-comment">// è·å–ç»“æ„ä½“å­—æ®µæ•°é‡</span>
    fieldCount := t.NumField()
    <span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; fieldCount; i++ {
        <span class="hljs-comment">// è·å–ç¬¬iä¸ªå­—æ®µ</span>
        field := t.Field(i)
        <span class="hljs-comment">// è¯»å–jsonæ ‡ç­¾çš„å€¼ï¼ˆä½œä¸ºmapçš„é”®ï¼‰</span>
        jsonKey := field.Tag.Get(<span class="hljs-string">"json"</span>)
        <span class="hljs-comment">// è¯»å–docæ ‡ç­¾çš„å€¼ï¼ˆä½œä¸ºmapçš„å€¼ï¼‰</span>
        docValue := field.Tag.Get(<span class="hljs-string">"doc"</span>)
        <span class="hljs-comment">// å­˜å…¥mapï¼ˆè·³è¿‡jsonæ ‡ç­¾ä¸ºç©ºçš„å­—æ®µï¼‰</span>
        <span class="hljs-keyword">if</span> jsonKey != <span class="hljs-string">""</span> {
            docMap[jsonKey] = docValue
        }
    }
    <span class="hljs-keyword">return</span> docMap
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    <span class="hljs-comment">// åˆ›å»ºç»“æ„ä½“å®ä¾‹</span>
    resume := Resume{
        Name:  <span class="hljs-string">"å¼ ä¸‰"</span>,
        Age:   <span class="hljs-number">25</span>,
        Email: <span class="hljs-string">"zhangsan@163.com"</span>,
    }

    <span class="hljs-comment">// ä¼ å…¥ç»“æ„ä½“æŒ‡é’ˆï¼Œè¯»å–docæ ‡ç­¾</span>
    docMap := findDoc(&amp;resume)
    fmt.Println(<span class="hljs-string">"jsonæ ‡ç­¾ä¸docæ ‡ç­¾çš„æ˜ å°„ï¼š"</span>, docMap)
    <span class="hljs-comment">// è¾“å‡ºï¼šmap[age:æˆ‘çš„å¹´é¾„ email:æˆ‘çš„é‚®ç®± name:æˆ‘çš„åå­—]</span>

    <span class="hljs-comment">// è¯»å–æŒ‡å®šjsonæ ‡ç­¾å¯¹åº”çš„docè¯´æ˜</span>
    fmt.Println(<span class="hljs-string">"nameå¯¹åº”çš„è¯´æ˜ï¼š"</span>, docMap[<span class="hljs-string">"name"</span>]) <span class="hljs-comment">// è¾“å‡ºï¼šæˆ‘çš„åå­—</span>
}
</code></pre>
<h3 data-id="heading-21">å››ã€ç»“æ„ä½“æ ‡ç­¾çš„å¸¸è§è¯¯åŒºï¼ˆé¿å‘é‡ç‚¹ï¼‰</h3>
<p>ç»“æ„ä½“æ ‡ç­¾çš„è¯­æ³•ç®€å•ï¼Œä½†å®¹æ˜“è¸©å‘ï¼Œä¸”å‘ç‚¹å¤šä¸ºâ€œç¼–è¯‘æœŸä¸æŠ¥é”™ã€è¿è¡Œæ—¶å‡ºé—®é¢˜â€ï¼Œä»¥ä¸‹æ˜¯4ä¸ªæœ€å¸¸è§çš„è¯¯åŒºï¼Œä¸€å®šè¦ç‰¢è®°ï¼š</p>
<h4 data-id="heading-22">è¯¯åŒº1ï¼šç”¨åŒå¼•å·/å•å¼•å·åŒ…è£¹æ ‡ç­¾</h4>
<p>æ ‡ç­¾å¿…é¡»ç”¨åå¼•å·ï¼ˆ`ï¼‰åŒ…è£¹ï¼Œç”¨åŒå¼•å·æˆ–å•å¼•å·ä¼šè¢«è§£æä¸ºæ™®é€šå­—ç¬¦ä¸²ï¼Œåå°„æ— æ³•è¯»å–ã€‚</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// é”™è¯¯</span>
<span class="hljs-keyword">type</span> User <span class="hljs-keyword">struct</span> {
    Name <span class="hljs-type">string</span> <span class="hljs-string">"json:'username'"</span> <span class="hljs-comment">// åŒå¼•å·åŒ…è£¹ï¼Œåå°„è¯»ä¸åˆ°</span>
}

<span class="hljs-comment">// æ­£ç¡®</span>
<span class="hljs-keyword">type</span> User <span class="hljs-keyword">struct</span> {
    Name <span class="hljs-type">string</span> <span class="hljs-string">`json:"username"`</span> <span class="hljs-comment">// åå¼•å·åŒ…è£¹</span>
}
</code></pre>
<h4 data-id="heading-23">è¯¯åŒº2ï¼šå¤šä¸ªæ ‡ç­¾é”®å€¼å¯¹ç”¨é€—å·åˆ†éš”</h4>
<p>å¤šä¸ªæ ‡ç­¾é”®å€¼å¯¹å¿…é¡»ç”¨<strong>ç©ºæ ¼</strong>åˆ†éš”ï¼Œç”¨é€—å·åˆ†éš”ä¼šå¯¼è‡´åå°„æ— æ³•è¯†åˆ«å¤šä¸ªé”®å€¼å¯¹ï¼Œåªèƒ½è¯»å–åˆ°ç¬¬ä¸€ä¸ªã€‚</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// é”™è¯¯</span>
<span class="hljs-keyword">type</span> User <span class="hljs-keyword">struct</span> {
    Name <span class="hljs-type">string</span> <span class="hljs-string">`json:"username",doc:"ç”¨æˆ·å§“å"`</span> <span class="hljs-comment">// é€—å·åˆ†éš”ï¼Œé”™è¯¯</span>
}

<span class="hljs-comment">// æ­£ç¡®</span>
<span class="hljs-keyword">type</span> User <span class="hljs-keyword">struct</span> {
    Name <span class="hljs-type">string</span> <span class="hljs-string">`json:"username" doc:"ç”¨æˆ·å§“å"`</span> <span class="hljs-comment">// ç©ºæ ¼åˆ†éš”ï¼Œæ­£ç¡®</span>
}
</code></pre>
<h4 data-id="heading-24">è¯¯åŒº3ï¼šæ ‡ç­¾å€¼æœªç”¨åŒå¼•å·åŒ…è£¹</h4>
<p>æ ‡ç­¾çš„é”®å€¼å¯¹ä¸­ï¼Œå€¼å¿…é¡»ç”¨åŒå¼•å·åŒ…è£¹ï¼Œå¦åˆ™è¯­æ³•ä¸è§„èŒƒï¼Œåå°„è¯»å–æ—¶ä¼šè¿”å›ç©ºå­—ç¬¦ä¸²ã€‚</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// é”™è¯¯</span>
<span class="hljs-keyword">type</span> User <span class="hljs-keyword">struct</span> {
    Name <span class="hljs-type">string</span> <span class="hljs-string">`json:username`</span> <span class="hljs-comment">// å€¼æœªç”¨åŒå¼•å·ï¼Œé”™è¯¯</span>
}

<span class="hljs-comment">// æ­£ç¡®</span>
<span class="hljs-keyword">type</span> User <span class="hljs-keyword">struct</span> {
    Name <span class="hljs-type">string</span> <span class="hljs-string">`json:"username"`</span> <span class="hljs-comment">// å€¼ç”¨åŒå¼•å·ï¼Œæ­£ç¡®</span>
}
</code></pre>
<h4 data-id="heading-25">è¯¯åŒº4ï¼šä¼ å…¥éæŒ‡é’ˆç±»å‹ç»™åå°„å‡½æ•°</h4>
<p>åå°„è¯»å–ç»“æ„ä½“æ ‡ç­¾æ—¶ï¼Œå¦‚æœä¼ å…¥çš„æ˜¯ç»“æ„ä½“å€¼ï¼ˆè€ŒéæŒ‡é’ˆï¼‰ï¼Œè™½ç„¶èƒ½è¯»å–åˆ°æ ‡ç­¾ï¼Œä½†å¦‚æœåç»­éœ€è¦ä¿®æ”¹ç»“æ„ä½“å­—æ®µçš„å€¼ï¼ˆç»“åˆåå°„Set()æ–¹æ³•ï¼‰ï¼Œä¼šæŠ¥é”™ï¼›åŒæ—¶ï¼Œä¼ å…¥éæŒ‡é’ˆç±»å‹ï¼Œæ— æ³•å¤„ç†â€œnilâ€çš„æƒ…å†µï¼Œå»ºè®®ç»Ÿä¸€ä¼ å…¥ç»“æ„ä½“æŒ‡é’ˆã€‚</p>
<h3 data-id="heading-26">äº”ã€æ€»ç»“</h3>
<p>ç»“æ„ä½“æ ‡ç­¾æ˜¯Goè¯­è¨€ä¸­â€œå…ƒæ•°æ®â€çš„æ ¸å¿ƒå®ç°æ–¹å¼ï¼Œå®ƒæœ¬èº«ä¸å‚ä¸ä¸šåŠ¡é€»è¾‘ï¼Œä½†é€šè¿‡åå°„ï¼Œèƒ½è®©å·¥å…·åº“å®ç°è‡ªåŠ¨åŒ–åŠŸèƒ½ï¼Œæå¤§åœ°å‡å°‘é‡å¤ç¼–ç ï¼Œæå‡å¼€å‘æ•ˆç‡ã€‚</p>
<p>æ ¸å¿ƒè¦ç‚¹å›é¡¾ï¼š</p>
<ol>
<li>
<p>æœ¬è´¨ï¼šé™„ç€åœ¨ç»“æ„ä½“å­—æ®µä¸Šçš„å­—ç¬¦ä¸²å¸¸é‡ï¼Œä»…èƒ½é€šè¿‡åå°„è¯»å–ã€‚</p>
</li>
<li>
<p>æ ¸å¿ƒç”¨é€”ï¼šJSONåºåˆ—åŒ–ã€ORMæ˜ å°„ã€å‚æ•°æ ¡éªŒã€æ–‡æ¡£/è¡¨å•ç”Ÿæˆï¼ˆå››å¤§åœºæ™¯è¦†ç›–80%+å¼€å‘éœ€æ±‚ï¼‰ã€‚</p>
</li>
<li>
<p>è¯­æ³•è§„èŒƒï¼šåå¼•å·åŒ…è£¹ã€é”®å€¼å¯¹æ ¼å¼ã€å¤šä¸ªæ ‡ç­¾ç”¨ç©ºæ ¼åˆ†éš”ï¼ˆå¿…è®°ï¼Œé¿å‘å…³é”®ï¼‰ã€‚</p>
</li>
<li>
<p>æ³¨æ„äº‹é¡¹ï¼šé¿å…å¸¸è§è¯­æ³•è¯¯åŒºï¼Œåå°„è¯»å–æ—¶å»ºè®®ä¼ å…¥ç»“æ„ä½“æŒ‡é’ˆã€‚</p>
</li>
</ol>
<p>ä¸€å¥è¯æ€»ç»“ï¼šç»“æ„ä½“æ ‡ç­¾æ˜¯â€œç»™å·¥å…·åº“çœ‹çš„å­—æ®µè¯´æ˜â€ï¼Œæœ‰äº†å®ƒï¼Œæ‰æœ‰äº†Goè¯­è¨€ä¸­å„ç±»é«˜æ•ˆçš„å·¥å…·åº“ï¼Œè®©æˆ‘ä»¬æ‘†è„±é‡å¤çš„æ‰‹åŠ¨ç¼–ç ï¼Œä¸“æ³¨äºæ ¸å¿ƒä¸šåŠ¡é€»è¾‘ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ·±å…¥ç†è§£Goè¯­è¨€çš„æ ¸å¿ƒï¼šType-Value Pairï¼ˆç±»å‹-å€¼å¯¹ï¼‰]]></title>    <link>https://juejin.cn/post/7604693038438973446</link>    <guid>https://juejin.cn/post/7604693038438973446</guid>    <pubDate>2026-02-09T16:20:27.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604693038438973446" data-draft-id="7604693038438957062" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ·±å…¥ç†è§£Goè¯­è¨€çš„æ ¸å¿ƒï¼šType-Value Pairï¼ˆç±»å‹-å€¼å¯¹ï¼‰"/> <meta itemprop="keywords" content="åç«¯,é¢è¯•,Go"/> <meta itemprop="datePublished" content="2026-02-09T16:20:27.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æˆ‘å«é»‘å¤§å¸…"/> <meta itemprop="url" content="https://juejin.cn/user/1678295463898875"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ·±å…¥ç†è§£Goè¯­è¨€çš„æ ¸å¿ƒï¼šType-Value Pairï¼ˆç±»å‹-å€¼å¯¹ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1678295463898875/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æˆ‘å«é»‘å¤§å¸…
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-09T16:20:27.000Z" title="Mon Feb 09 2026 16:20:27 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æ·±å…¥ç†è§£Goè¯­è¨€çš„æ ¸å¿ƒï¼šType-Value Pairï¼ˆç±»å‹-å€¼å¯¹ï¼‰</h2>
<p>ä½œä¸ºGoè¯­è¨€å¼€å‘è€…ï¼Œä½ æ˜¯å¦åœ¨å­¦ä¹ <strong>æ¥å£</strong>ã€<strong>åå°„</strong>æ—¶æ„Ÿåˆ°å›°æƒ‘ï¼Ÿæ¯”å¦‚ï¼šä¸ºä»€ä¹ˆç©ºæ¥å£<code>interface{}</code>èƒ½æ¥æ”¶ä»»æ„ç±»å‹çš„å€¼ï¼Ÿä¸ºä»€ä¹ˆç±»å‹æ–­è¨€æœ‰æ—¶ä¼šå¤±è´¥ï¼Ÿä¸ºä»€ä¹ˆåå°„èƒ½â€œçœ‹é€â€å˜é‡çš„æœ¬è´¨ï¼Ÿ</p>
<p>è¿™äº›é—®é¢˜çš„æ ¸å¿ƒç­”æ¡ˆï¼Œéƒ½æŒ‡å‘Goè¯­è¨€ä¸­å˜é‡çš„åº•å±‚æœ¬è´¨â€”â€”<strong>Type-Value Pairï¼ˆç±»å‹-å€¼å¯¹ï¼‰</strong>ï¼Œæˆ‘æ›´ä¹ æƒ¯ç§°å®ƒä¸ºâ€œPairâ€ã€‚ç†è§£Pairï¼Œæ˜¯æ‰“é€šGoè¯­è¨€æ¥å£ã€åå°„ä»»ç£äºŒè„‰çš„å…³é”®ã€‚</p>
<h3 data-id="heading-1">ä¸€ã€ä»€ä¹ˆæ˜¯Type-Value Pairï¼Ÿ</h3>
<p>åœ¨Goè¯­è¨€ä¸­ï¼Œ<strong>ä»»ä½•å˜é‡éƒ½ä¸æ˜¯å­¤ç«‹çš„â€œå€¼â€ï¼Œè€Œæ˜¯ç”±â€œç±»å‹â€å’Œâ€œå€¼â€ç»„æˆçš„äºŒå…ƒç»„ï¼ˆPairï¼‰</strong>ã€‚è¿™ä¸ªPairåŒ…å«ä¸¤ä¸ªæ ¸å¿ƒç»´åº¦ï¼š</p>

























<table><thead><tr><th>ç»´åº¦</th><th>è¯´æ˜</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>Static Typeï¼ˆé™æ€ç±»å‹ï¼‰</td><td>å˜é‡å£°æ˜æ—¶æ˜¾å¼æŒ‡å®šçš„ç±»å‹ï¼ˆå¦‚intã€stringã€è‡ªå®šä¹‰ç»“æ„ä½“ã€æ¥å£ï¼‰ï¼Œç¼–è¯‘æœŸç¡®å®š</td><td>æ‰€æœ‰å˜é‡</td></tr><tr><td>Concrete Typeï¼ˆå…·ä½“ç±»å‹ï¼‰</td><td>æ¥å£ç±»å‹å˜é‡å®é™…æŒ‡å‘çš„åº•å±‚ç±»å‹ï¼ˆè¿è¡Œæ—¶ç¡®å®šï¼‰ï¼Œæ™®é€šç±»å‹çš„Concrete Typeç­‰äºStatic Type</td><td>ä»…æ¥å£ç±»å‹å˜é‡</td></tr><tr><td>Valueï¼ˆå€¼ï¼‰</td><td>å˜é‡å­˜å‚¨çš„å…·ä½“æ•°æ®ï¼ˆå¦‚10ã€"hello"ã€ç»“æ„ä½“å®ä¾‹ï¼‰</td><td>æ‰€æœ‰å˜é‡</td></tr></tbody></table>
<ul>
<li>
<p>å¯¹äºæ™®é€šç±»å‹å˜é‡ï¼ˆå¦‚<code>int</code>ã€<code>string</code>ï¼‰ï¼ŒPair = <code>Static Type + Value</code>ï¼›</p>
</li>
<li>
<p>å¯¹äºæ¥å£ç±»å‹å˜é‡ï¼ˆå¦‚<code>interface{}</code>ã€<code>io.Reader</code>ï¼‰ï¼ŒPair = <code>Static Type(æ¥å£) + Concrete Type(åº•å±‚ç±»å‹) + Value</code>ã€‚</p>
</li>
</ul>
<p>ä¸¾ä¸ªæœ€åŸºç¡€çš„ä¾‹å­ï¼š</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// æ™®é€šå˜é‡ï¼šStatic Type=intï¼ŒValue=10</span>
<span class="hljs-keyword">var</span> a <span class="hljs-type">int</span> = <span class="hljs-number">10</span>
<span class="hljs-comment">// æ™®é€šå˜é‡ï¼šStatic Type=stringï¼ŒValue="Go Pair"</span>
<span class="hljs-keyword">var</span> b <span class="hljs-type">string</span> = <span class="hljs-string">"Go Pair"</span>
</code></pre>
<p>æ­¤æ—¶<code>a</code>çš„Pairæ˜¯<code>(int, 10)</code>ï¼Œ<code>b</code>çš„Pairæ˜¯<code>(string, "Go Pair")</code>â€”â€”è¿™æ˜¯æœ€ç›´è§‚çš„Pairå½¢æ€ã€‚</p>
<h3 data-id="heading-2">äºŒã€Pairçš„æ ¸å¿ƒç‰¹æ€§ï¼šä¸å˜æ€§ä¸ä¼ é€’æ€§</h3>
<p>Pairæœ€å…³é”®çš„ç‰¹æ€§æ˜¯ï¼š<strong>å˜é‡åœ¨èµ‹å€¼ã€ä¼ é€’è¿‡ç¨‹ä¸­ï¼Œå…¶åº•å±‚çš„Type-Value Pairä¸ä¼šè¢«æ”¹å˜</strong>ã€‚å“ªæ€•å°†å˜é‡èµ‹å€¼ç»™æ¥å£ç±»å‹ï¼ŒPairä¾ç„¶ä¿æŒåŸæ ·ï¼Œè¿™æ˜¯ç†è§£æ¥å£çš„æ ¸å¿ƒã€‚</p>
<h4 data-id="heading-3">ç¤ºä¾‹1ï¼šæ™®é€šå˜é‡èµ‹å€¼ç»™ç©ºæ¥å£</h4>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> <span class="hljs-string">"fmt"</span>

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    <span class="hljs-comment">// æ™®é€šå˜é‡ï¼šPair=(int, 20)</span>
    <span class="hljs-keyword">var</span> num <span class="hljs-type">int</span> = <span class="hljs-number">20</span>
    <span class="hljs-comment">// ç©ºæ¥å£å˜é‡ï¼šStatic Type=interface{}ï¼ŒConcrete Type=intï¼ŒValue=20</span>
    <span class="hljs-keyword">var</span> emptyIface <span class="hljs-keyword">interface</span>{} = num

    <span class="hljs-comment">// ç±»å‹æ–­è¨€ï¼šä»ç©ºæ¥å£ä¸­æå–Concrete Type=intçš„Value</span>
    <span class="hljs-keyword">if</span> v, ok := emptyIface.(<span class="hljs-type">int</span>); ok {
        fmt.Printf(<span class="hljs-string">"ç±»å‹ï¼š%Tï¼Œå€¼ï¼š%d\n"</span>, v, v) <span class="hljs-comment">// è¾“å‡ºï¼šç±»å‹ï¼šintï¼Œå€¼ï¼š20</span>
    }
}
</code></pre>
<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼š</p>
<ul>
<li>
<p><code>num</code>çš„Pairæ˜¯<code>(int, 20)</code>ï¼›</p>
</li>
<li>
<p>å½“æŠŠ<code>num</code>èµ‹å€¼ç»™<code>emptyIface</code>æ—¶ï¼Œ<code>emptyIface</code>çš„Pairå¹¶æ²¡æœ‰å˜æˆ<code>(interface{}, 20)</code>ï¼Œè€Œæ˜¯<strong>ä¿ç•™äº†åŸå˜é‡çš„Concrete Typeå’ŒValue</strong>ï¼Œä»…Static Typeå˜ä¸º<code>interface{}</code>ï¼›</p>
</li>
<li>
<p>ç±»å‹æ–­è¨€çš„æœ¬è´¨ï¼Œå°±æ˜¯æ£€æŸ¥æ¥å£å˜é‡çš„Concrete Typeæ˜¯å¦åŒ¹é…ï¼Œå¹¶æå–å¯¹åº”çš„Valueã€‚</p>
</li>
</ul>
<h4 data-id="heading-4">ç¤ºä¾‹2ï¼šæ¥å£åµŒå¥—ä¸Pairçš„ä¸€è‡´æ€§</h4>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> <span class="hljs-string">"fmt"</span>

<span class="hljs-comment">// å®šä¹‰ä¸¤ä¸ªæ¥å£</span>
<span class="hljs-keyword">type</span> Reader <span class="hljs-keyword">interface</span> {
    Read() <span class="hljs-type">string</span>
}

<span class="hljs-keyword">type</span> Writer <span class="hljs-keyword">interface</span> {
    Write() <span class="hljs-type">string</span>
}

<span class="hljs-comment">// å®šä¹‰ç»“æ„ä½“ï¼Œå®ç°ä¸¤ä¸ªæ¥å£</span>
<span class="hljs-keyword">type</span> Book <span class="hljs-keyword">struct</span> {
    Name <span class="hljs-type">string</span>
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(b Book)</span></span> Read() <span class="hljs-type">string</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-string">"é˜…è¯»ï¼š"</span> + b.Name
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(b Book)</span></span> Write() <span class="hljs-type">string</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-string">"è®°å½•ï¼š"</span> + b.Name
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    <span class="hljs-comment">// ç»“æ„ä½“å®ä¾‹ï¼šPair=(Book, Book{Name:"Goå®æˆ˜"})</span>
    book := Book{Name: <span class="hljs-string">"Goå®æˆ˜"</span>}
    
    <span class="hljs-comment">// èµ‹å€¼ç»™Readeræ¥å£ï¼šPair=(Reader, Book, Book{Name:"Goå®æˆ˜"})</span>
    <span class="hljs-keyword">var</span> r Reader = book
    <span class="hljs-comment">// èµ‹å€¼ç»™Writeræ¥å£ï¼šPair=(Writer, Book, Book{Name:"Goå®æˆ˜"})</span>
    <span class="hljs-keyword">var</span> w Writer = book

    <span class="hljs-comment">// ç±»å‹æ–­è¨€ï¼šReader -&gt; Bookï¼ˆæˆåŠŸï¼Œå› ä¸ºConcrete Typeæ˜¯Bookï¼‰</span>
    <span class="hljs-keyword">if</span> b, ok := r.(Book); ok {
        fmt.Println(b.Read()) <span class="hljs-comment">// è¾“å‡ºï¼šé˜…è¯»ï¼šGoå®æˆ˜</span>
    }

    <span class="hljs-comment">// ç±»å‹æ–­è¨€ï¼šWriter -&gt; Readerï¼ˆæˆåŠŸï¼Œå› ä¸ºåº•å±‚Concrete Typeéƒ½æ˜¯Bookï¼‰</span>
    <span class="hljs-keyword">if</span> r2, ok := w.(Reader); ok {
        fmt.Println(r2.Read()) <span class="hljs-comment">// è¾“å‡ºï¼šé˜…è¯»ï¼šGoå®æˆ˜</span>
    }
}
</code></pre>
<p>è¿™ä¸ªä¾‹å­éªŒè¯äº†ï¼šåªè¦æ¥å£å˜é‡çš„Concrete Typeç›¸åŒï¼Œå³ä½¿Static Typeï¼ˆæ¥å£ç±»å‹ï¼‰ä¸åŒï¼Œä¹Ÿèƒ½é€šè¿‡ç±»å‹æ–­è¨€è½¬æ¢â€”â€”æ ¸å¿ƒåŸå› å°±æ˜¯<strong>Pairä¸­çš„Concrete Typeå’ŒValueå§‹ç»ˆæœªå˜</strong>ã€‚</p>
<h3 data-id="heading-5">ä¸‰ã€Pairæ˜¯åå°„çš„â€œåº•å±‚é€»è¾‘â€</h3>
<p>Goè¯­è¨€çš„åå°„ï¼ˆ<code>reflect</code>åŒ…ï¼‰ä¹‹æ‰€ä»¥èƒ½â€œåŠ¨æ€è·å–å˜é‡ç±»å‹å’Œå€¼â€ï¼Œæœ¬è´¨æ˜¯å› ä¸ºåå°„ç›´æ¥æ“ä½œå˜é‡çš„Pairï¼š</p>
<ul>
<li>
<p><code>reflect.TypeOf(x)</code>ï¼šè·å–å˜é‡<code>x</code>çš„Concrete Typeï¼›</p>
</li>
<li>
<p><code>reflect.ValueOf(x)</code>ï¼šè·å–å˜é‡<code>x</code>çš„Valueï¼›</p>
</li>
<li>
<p>åå°„ä¿®æ”¹å˜é‡å€¼çš„å‰æï¼Œæ˜¯è·å–åˆ°å˜é‡çš„â€œå¯è®¾ç½®â€Valueï¼ˆå³æŒ‡å‘åŸå˜é‡çš„æŒ‡é’ˆï¼‰ã€‚</p>
</li>
</ul>
<p>ç¤ºä¾‹ï¼šç”¨åå°„è¯»å–Pairçš„Typeå’ŒValue</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> (
    <span class="hljs-string">"fmt"</span>
    <span class="hljs-string">"reflect"</span>
)

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">var</span> str = <span class="hljs-string">"Hello Pair"</span>
    <span class="hljs-comment">// è·å–Type</span>
    t := reflect.TypeOf(str)
    <span class="hljs-comment">// è·å–Value</span>
    v := reflect.ValueOf(str)

    fmt.Printf(<span class="hljs-string">"Typeï¼š%sï¼ŒKindï¼š%sï¼ŒValueï¼š%v\n"</span>, t.Name(), t.Kind(), v)
    <span class="hljs-comment">// è¾“å‡ºï¼šTypeï¼šstringï¼ŒKindï¼šstringï¼ŒValueï¼šHello Pair</span>

    <span class="hljs-comment">// ç©ºæ¥å£çš„åå°„</span>
    <span class="hljs-keyword">var</span> iface <span class="hljs-keyword">interface</span>{} = str
    t2 := reflect.TypeOf(iface)
    v2 := reflect.ValueOf(iface)
    fmt.Printf(<span class="hljs-string">"æ¥å£Typeï¼š%sï¼Œæ¥å£Valueï¼š%v\n"</span>, t2.Name(), v2)
    <span class="hljs-comment">// è¾“å‡ºï¼šæ¥å£Typeï¼šstringï¼Œæ¥å£Valueï¼šHello Pair</span>
}
</code></pre>
<p>å¯ä»¥çœ‹åˆ°ï¼Œå³ä½¿å˜é‡è¢«åŒ…è£…è¿›ç©ºæ¥å£ï¼Œåå°„ä¾ç„¶èƒ½ç²¾å‡†è·å–åˆ°åŸå˜é‡çš„Concrete Typeå’ŒValueâ€”â€”è¿™æ­£æ˜¯Pairçš„â€œåŠŸåŠ³â€ã€‚</p>
<h3 data-id="heading-6">å››ã€ç†è§£Pairçš„å®é™…æ„ä¹‰</h3>
<ol>
<li>
<p><strong>é¿å…æ¥å£ä½¿ç”¨çš„å‘</strong>ï¼šå¾ˆå¤šæ–°æ‰‹è®¤ä¸ºâ€œç©ºæ¥å£èƒ½å­˜ä»»æ„ç±»å‹ï¼Œæ‰€ä»¥å¯ä»¥éšæ„è½¬æ¢â€ï¼Œä½†å®é™…ä¸Šå¦‚æœConcrete Typeä¸åŒ¹é…ï¼Œç±»å‹æ–­è¨€ä¼šå¤±è´¥ã€‚æ¯”å¦‚å°†<code>int</code>ç±»å‹èµ‹å€¼ç»™ç©ºæ¥å£åï¼Œæ–­è¨€ä¸º<code>string</code>ä¼šç›´æ¥æŠ¥é”™ï¼Œæœ¬è´¨æ˜¯Pairçš„Concrete Typeä¸åŒ¹é…ã€‚</p>
</li>
<li>
<p><strong>æ­£ç¡®ä½¿ç”¨åå°„</strong>ï¼šåå°„çš„æ‰€æœ‰æ“ä½œéƒ½å›´ç»•Pairå±•å¼€ï¼Œæ¯”å¦‚ä¿®æ”¹å˜é‡å€¼æ—¶ï¼Œå¿…é¡»ç¡®ä¿<code>reflect.Value</code>æ˜¯â€œå¯è®¾ç½®çš„â€ï¼ˆå³æŒ‡å‘åŸå˜é‡çš„æŒ‡é’ˆï¼‰ï¼Œå¦åˆ™ä¼šè§¦å‘panicâ€”â€”è¿™æ˜¯å› ä¸ºåå°„ä¿®æ”¹çš„æ˜¯Pairçš„Valueï¼Œè€Œéå‰¯æœ¬ã€‚</p>
</li>
<li>
<p><strong>ç†è§£æ¥å£çš„â€œå¤šæ€â€</strong>ï¼šGoè¯­è¨€çš„æ¥å£å¤šæ€ï¼Œæœ¬è´¨æ˜¯ä¸åŒç±»å‹çš„å˜é‡ï¼ˆä¸åŒPairï¼‰èµ‹å€¼ç»™åŒä¸€æ¥å£ç±»å‹å˜é‡æ—¶ï¼Œåªè¦Concrete Typeå®ç°äº†æ¥å£çš„æ–¹æ³•ï¼Œå°±èƒ½è¢«æ¥å£â€œå…¼å®¹â€â€”â€”æ ¸å¿ƒè¿˜æ˜¯Pairçš„Concrete Typeåœ¨èµ·ä½œç”¨ã€‚</p>
</li>
</ol>
<h3 data-id="heading-7">æ€»ç»“</h3>
<p>Type-Value Pairæ˜¯Goè¯­è¨€å˜é‡çš„åº•å±‚æœ¬è´¨ï¼Œå®ƒå†³å®šäº†ï¼š</p>
<ol>
<li>
<p>å˜é‡çš„ç±»å‹å’Œå€¼æ˜¯ä¸å¯åˆ†å‰²çš„æ•´ä½“ï¼Œä¼ é€’è¿‡ç¨‹ä¸­Pairä¿æŒä¸å˜ï¼›</p>
</li>
<li>
<p>æ¥å£çš„æ ¸å¿ƒæ˜¯â€œåŒ…è£¹â€åº•å±‚å˜é‡çš„Concrete Typeå’ŒValueï¼›</p>
</li>
<li>
<p>åå°„çš„æœ¬è´¨æ˜¯å¯¹å˜é‡Pairçš„ç›´æ¥æ“ä½œã€‚</p>
</li>
</ol>
<p>ç†è§£Pairï¼Œä½ å°±èƒ½å½»åº•ææ‡‚Goè¯­è¨€çš„æ¥å£ã€åå°„æœºåˆ¶ï¼Œé¿å¼€æ–°æ‰‹å¸¸è§çš„å‘ï¼Œå†™å‡ºæ›´ç¬¦åˆGoè¯­è¨€è®¾è®¡å“²å­¦çš„ä»£ç ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[IDEAè¿æ¥MySQLæ•°æ®åº“é”™è¯¯]]></title>    <link>https://juejin.cn/post/7604574877034823723</link>    <guid>https://juejin.cn/post/7604574877034823723</guid>    <pubDate>2026-02-09T13:19:08.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604574877034823723" data-draft-id="7604433863726235702" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="IDEAè¿æ¥MySQLæ•°æ®åº“é”™è¯¯"/> <meta itemprop="keywords" content="åç«¯,IntelliJ IDEA"/> <meta itemprop="datePublished" content="2026-02-09T13:19:08.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä½•ä¸­åº”"/> <meta itemprop="url" content="https://juejin.cn/user/1435305504958535"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            IDEAè¿æ¥MySQLæ•°æ®åº“é”™è¯¯
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1435305504958535/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä½•ä¸­åº”
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-09T13:19:08.000Z" title="Mon Feb 09 2026 13:19:08 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>è¯´æ˜ï¼šä½¿ç”¨IDEAè¿æ¥äº‘æœåŠ¡å™¨ä¸­çš„MySQLæ•°æ®åº“æ—¶ï¼ŒæŠ¥ä¸‹é¢çš„è¿™ä¸ªé”™è¯¯ï¼›</p>
<pre><code class="hljs language-vbscript" lang="vbscript">[<span class="hljs-number">08</span>S01] Communications link failure

  The last packet sent successfully <span class="hljs-keyword">to</span> the <span class="hljs-built_in">server</span> was <span class="hljs-number">0</span> milliseconds ago. The driver has <span class="hljs-keyword">not</span> received any packets from the <span class="hljs-built_in">server</span>. No appropriate protocol (protocol <span class="hljs-keyword">is</span> disabled <span class="hljs-keyword">or</span> cipher suites are inappropriate)


  The following required algorithms might be disabled: SSLv3, TLSv1, TLSv1<span class="hljs-number">.1</span>, RC4, DES, MD5withRSA, DH keySize &lt; <span class="hljs-number">1024</span>, EC keySize &lt; <span class="hljs-number">224</span>, <span class="hljs-number">3</span>DES_EDE_CBC, anon, <span class="hljs-literal">NULL</span>. Edit the list of disabled algorithms <span class="hljs-keyword">to</span> include required algorithms. You can try <span class="hljs-keyword">to</span> enable TLSv1 <span class="hljs-keyword">or</span> TLSv1<span class="hljs-number">.1</span> first.  
  
  JDBC driver may have disabled TLS <span class="hljs-number">1.1</span> <span class="hljs-keyword">and</span> its earlier versions.
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9dbf8df9591c4419ba054204c193b66e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L2V5Lit5bqU:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771247947&amp;x-signature=26LlY9OF0JuVG%2B6TcfbPzgNSrGk%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>é”™è¯¯ç¿»è¯‘å¦‚ä¸‹ï¼›</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8cc60272c2ee4b33830ad10d0a2f7c4c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L2V5Lit5bqU:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771247947&amp;x-signature=aatSe%2FZ%2Br7AGEPoAbSS9jE7nv2s%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>è§£å†³ï¼š</p>
<p>å¦‚æœä½ çš„IDEAä¸­é”™è¯¯ä¸‹é¢æœ‰è¿™å‡ ä¸ªæç¤ºï¼Œé€‰æ‹©Enable TLSv1ï¼›</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/126e833803e24637aa437292056eb3a9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L2V5Lit5bqU:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771247947&amp;x-signature=QrPMnC15E83yPf4VqDUgRI6gBQI%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>IDEAä¸­ä¼šè‡ªåŠ¨å¢åŠ ä»¥ä¸‹é…ç½®ï¼Œç›´æ¥ç‚¹â€œApplyâ€å°±å¯ä»¥ï¼›</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7bff62cafc614c328e3473905f28e046~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L2V5Lit5bqU:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771247947&amp;x-signature=Yb%2Be2S6Oei4dIz44%2BoWuHRe5Jto%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>Testï¼Œè¿æ¥æˆåŠŸï¼›
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/af15bc157483422e87651fea3f656f26~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L2V5Lit5bqU:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771247947&amp;x-signature=SNlttjOsUUiVFvjzJc3j%2F4VTJUk%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>å¦‚æœæ²¡æœ‰æç¤ºï¼Œå¯æ‰‹åŠ¨æ·»åŠ ä»¥ä¸‹é…ç½®ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/56e5283979964e99b515845eb5a355f8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L2V5Lit5bqU:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771247947&amp;x-signature=Qv30ncS40hfR97QEsQX1kDCctFo%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-string">"-Djdk.tls.disabledAlgorithms=SSLv3, TLSv1.1, RC4, DES, MD5withRSA, DH keySize &lt; 1024, EC keySize &lt; 224, 3DES_EDE_CBC, anon, NULL"</span>
</code></pre>
<h2 data-id="heading-0">é¦–æ¬¡å‘å¸ƒ</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fhezhongying.blog.csdn.net%2Farticle%2Fdetails%2F132355979" target="_blank" title="https://hezhongying.blog.csdn.net/article/details/132355979" ref="nofollow noopener noreferrer">hezhongying.blog.csdn.net/article/detâ€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ·±åº¦åˆ†æï¼šRocketMQ å¦‚ä½•ä¿è¯æ¶ˆæ¯ä¸ä¸¢å¤± â€”â€” å…¨é“¾è·¯é˜²ä¸¢æœºåˆ¶ä¸ç”Ÿäº§å®è·µ]]></title>    <link>https://juejin.cn/post/7604665952320307251</link>    <guid>https://juejin.cn/post/7604665952320307251</guid>    <pubDate>2026-02-09T19:52:42.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604665952320307251" data-draft-id="7604672395626823707" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ·±åº¦åˆ†æï¼šRocketMQ å¦‚ä½•ä¿è¯æ¶ˆæ¯ä¸ä¸¢å¤± â€”â€” å…¨é“¾è·¯é˜²ä¸¢æœºåˆ¶ä¸ç”Ÿäº§å®è·µ"/> <meta itemprop="keywords" content="RocketMQ"/> <meta itemprop="datePublished" content="2026-02-09T19:52:42.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸‰æ°´ä¸æ»´"/> <meta itemprop="url" content="https://juejin.cn/user/283045639753100"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ·±åº¦åˆ†æï¼šRocketMQ å¦‚ä½•ä¿è¯æ¶ˆæ¯ä¸ä¸¢å¤± â€”â€” å…¨é“¾è·¯é˜²ä¸¢æœºåˆ¶ä¸ç”Ÿäº§å®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/283045639753100/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸‰æ°´ä¸æ»´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-09T19:52:42.000Z" title="Mon Feb 09 2026 19:52:42 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    4
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æ·±åº¦åˆ†æï¼šRocketMQ å¦‚ä½•ä¿è¯æ¶ˆæ¯ä¸ä¸¢å¤± â€”â€” å…¨é“¾è·¯é˜²ä¸¢æœºåˆ¶ä¸ç”Ÿäº§å®è·µ</h2>
<hr/>
<h2 data-id="heading-1">ä¸€ã€å‰è¨€</h2>
<p>åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œ<strong>æ¶ˆæ¯å¯é æ€§</strong>æ˜¯æ ¸å¿ƒæŒ‡æ ‡ã€‚å¾ˆå¤šäººä»¥ä¸ºç”¨äº† MQ å°±å¤©ç„¶ä¸ä¸¢æ¶ˆæ¯ï¼Œå…¶å®å®Œå…¨é”™äº†ã€‚</p>
<p>RocketMQ æœ¬èº«<strong>ä¸ä¿è¯ 100% ç»å¯¹ä¸ä¸¢</strong>ï¼Œä½†é€šè¿‡<strong>æ­£ç¡®çš„æ¶æ„ + æ­£ç¡®çš„é…ç½® + æ­£ç¡®çš„ä½¿ç”¨å§¿åŠ¿</strong>ï¼Œå¯ä»¥è¾¾åˆ°<strong>é‡‘èçº§ã€ç”Ÿäº§çº§ä¸ä¸¢å¤±</strong>ã€‚</p>
<p>æ¶ˆæ¯ä¸¢å¤±åªä¼šå‘ç”Ÿåœ¨ä¸‰ä¸ªé˜¶æ®µï¼š</p>
<ol>
<li><strong>Producer â†’ Broker</strong>ï¼ˆå‘é€ä¸¢å¤±ï¼‰</li>
<li><strong>Broker å†…å­˜ â†’ ç£ç›˜</strong>ï¼ˆå­˜å‚¨ä¸¢å¤±ï¼‰</li>
<li><strong>Broker â†’ Consumer</strong>ï¼ˆæ¶ˆè´¹ä¸¢å¤±ï¼‰</li>
</ol>
<p>æœ¬æ–‡æŠŠè¿™ä¸‰éƒ¨åˆ†<strong>å…¨éƒ¨è®²é€</strong>ã€‚</p>
<hr/>
<h2 data-id="heading-2">äºŒã€ç¬¬ä¸€é˜¶æ®µï¼šç”Ÿäº§è€…å¦‚ä½•ä¿è¯æ¶ˆæ¯ä¸ä¸¢</h2>
<p>ç”Ÿäº§è€…ä¸¢æ¶ˆæ¯ï¼Œä¸€èˆ¬æ˜¯ï¼šæ¶ˆæ¯å‘äº†ï¼Œä½† Broker æ²¡æ”¶åˆ°ã€æ²¡è¿”å› ACKã€ç”Ÿäº§è€…ç›´æ¥å¿½ç•¥å¼‚å¸¸ã€‚</p>
<h3 data-id="heading-3">2.1 ä½¿ç”¨åŒæ­¥å‘é€ï¼ˆæœ€å…³é”®ï¼‰</h3>
<ul>
<li><strong>åŒæ­¥å‘é€ <code>send()</code></strong> ï¼šç­‰å¾… Broker è¿”å› ACKï¼Œå¤±è´¥ç›´æ¥æŠ›å¼‚å¸¸ã€‚</li>
<li><strong>ä¸¥ç¦ä½¿ç”¨ <code>sendOneway()</code></strong> ï¼šå‘å®Œä¸ç®¡ï¼Œå¿…ä¸¢æ¶ˆæ¯ã€‚</li>
</ul>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// åŒæ­¥å‘é€ï¼ˆæ¨èï¼‰</span>
<span class="hljs-type">SendResult</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> producer.send(message);
</code></pre>
<h3 data-id="heading-4">2.2 å¼€å¯ç”Ÿäº§è€…é‡è¯•</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// åŒæ­¥å‘é€å¤±è´¥é‡è¯•æ¬¡æ•°</span>
producer.setRetryTimesWhenSendFailed(<span class="hljs-number">3</span>);
<span class="hljs-comment">// å¼‚æ­¥å‘é€å¤±è´¥é‡è¯•æ¬¡æ•°</span>
producer.setRetryTimesWhenSendAsyncFailed(<span class="hljs-number">3</span>);
</code></pre>
<h3 data-id="heading-5">2.3 ä¸¥æ ¼æ ¡éªŒå‘é€ç»“æœ</h3>
<p>å¿…é¡»åˆ¤æ–­ <code>SendStatus</code>ï¼Œå¤±è´¥ä¸€å®šè¦é‡è¯• / å‘Šè­¦ / è½åº“ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">if</span> (result.getSendStatus() != SendStatus.SEND_OK) {
    <span class="hljs-comment">// æ—¥å¿—ã€å‘Šè­¦ã€é‡è¯•ã€æŒä¹…åŒ–å¾…é‡å‘</span>
}
</code></pre>
<h3 data-id="heading-6">2.4 æé«˜å¯é åœºæ™¯ï¼šä½¿ç”¨äº‹åŠ¡æ¶ˆæ¯</h3>
<p>è®¢å• / æ”¯ä»˜ç­‰æ ¸å¿ƒä¸šåŠ¡ï¼Œç›´æ¥ç”¨ <strong>äº‹åŠ¡æ¶ˆæ¯</strong>ï¼Œä»æ ¹æºä¿è¯ï¼š<strong>æœ¬åœ°äº‹åŠ¡æˆåŠŸ â†” æ¶ˆæ¯ä¸€å®šå‘é€æˆåŠŸ</strong></p>
<hr/>
<h2 data-id="heading-7">ä¸‰ã€ç¬¬äºŒé˜¶æ®µï¼šBroker å¦‚ä½•ä¿è¯æ¶ˆæ¯ä¸ä¸¢ï¼ˆæœ€æ ¸å¿ƒï¼‰</h2>
<p>Broker æ˜¯æœ€å®¹æ˜“ä¸¢æ¶ˆæ¯çš„ç¯èŠ‚ï¼Œ99% æ˜¯å› ä¸ºï¼š<strong>æ¶ˆæ¯è¿˜åœ¨ PageCacheï¼Œæœºå™¨æ–­ç”µ / å®•æœºï¼Œæ•°æ®ä¸¢å¤±ã€‚</strong></p>
<h3 data-id="heading-8">3.1 åˆ·ç›˜ç­–ç•¥ï¼šåŒæ­¥åˆ·ç›˜</h3>
<p>RocketMQ é»˜è®¤æ˜¯ <strong>å¼‚æ­¥åˆ·ç›˜</strong>ï¼Œæ€§èƒ½é«˜ï¼Œä½†å¯èƒ½ä¸¢æ¶ˆæ¯ã€‚</p>
<p>è¦ç»å¯¹ä¸ä¸¢ï¼Œå¿…é¡»å¼€å¯ï¼š</p>
<pre><code class="hljs language-properties" lang="properties">flushDiskType = SYNC_FLUSH
</code></pre>
<ul>
<li>æ¶ˆæ¯<strong>çœŸæ­£å†™å…¥ç£ç›˜</strong>æ‰è¿”å› ACK</li>
<li>æœºå™¨å®•æœºã€æ–­ç”µéƒ½ä¸ä¼šä¸¢</li>
<li>é‡‘è / æ”¯ä»˜å¿…å¼€</li>
</ul>
<h3 data-id="heading-9">3.2 ä¸»ä»åŒæ­¥ï¼šåŒæ­¥åŒå†™</h3>
<p>å•æœºä¸€å®šæœ‰é£é™©ï¼Œå¿…é¡»éƒ¨ç½²ä¸»ä»ã€‚</p>
<pre><code class="hljs language-properties" lang="properties">brokerRole = SYNC_MASTER
</code></pre>
<ul>
<li>å¿…é¡» <strong>ä¸» + ä»éƒ½å†™å…¥æˆåŠŸ</strong> æ‰è¿”å›æˆåŠŸ</li>
<li>ä¸»æœºæŒ‚äº†ï¼Œä»æœºä¾ç„¶æœ‰å®Œæ•´æ•°æ®</li>
</ul>
<h3 data-id="heading-10">3.3 æœ€å¼ºä¸ä¸¢é…ç½®ï¼ˆé‡‘èçº§ï¼‰</h3>
<pre><code class="hljs language-properties" lang="properties">flushDiskType=SYNC_FLUSH
brokerRole=SYNC_MASTER
</code></pre>
<p>è¿™å¥—é…ç½®ï¼Œåªè¦ç£ç›˜ä¸åï¼Œ<strong>ç»å¯¹ä¸ä¸¢</strong>ã€‚</p>
<hr/>
<h2 data-id="heading-11">å››ã€ç¬¬ä¸‰é˜¶æ®µï¼šæ¶ˆè´¹è€…å¦‚ä½•ä¿è¯æ¶ˆæ¯ä¸ä¸¢ï¼ˆæœ€å®¹æ˜“å¿½ç•¥ï¼‰</h2>
<p>æ¶ˆè´¹ç«¯ä¸¢æ¶ˆæ¯ï¼Œæ˜¯æœ€ç»å…¸çš„å‘ï¼š</p>
<p><strong>ä¸šåŠ¡è¿˜æ²¡æ‰§è¡Œå®Œï¼Œå°±è‡ªåŠ¨ ACKï¼ŒæœåŠ¡ä¸€æŒ‚ï¼Œæ¶ˆæ¯æ°¸ä¹…ä¸¢å¤±ã€‚</strong></p>
<h3 data-id="heading-12">4.1 æ ¸å¿ƒåŸåˆ™ï¼šå…ˆæ‰§è¡Œä¸šåŠ¡ï¼Œå† ACK</h3>
<p>RocketMQ æ¶ˆè´¹è€…é€»è¾‘ï¼š</p>
<ul>
<li>è¿”å› <strong>CONSUME_SUCCESS</strong> â†’ è®¤ä¸ºæ¶ˆæ¯æ¶ˆè´¹å®Œæˆ</li>
<li>æŠ›å‡ºå¼‚å¸¸ / è¿”å› <strong>RECONSUME_LATER</strong> â†’ ä¼šé‡è¯•</li>
</ul>
<p>æ­£ç¡®å†™æ³•ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Override</span>
<span class="hljs-keyword">public</span> ConsumeConcurrentlyStatus <span class="hljs-title function_">consumeMessage</span><span class="hljs-params">(...)</span> {
    <span class="hljs-keyword">try</span> {
        <span class="hljs-comment">// 1. å…ˆæ‰§è¡Œä¸šåŠ¡ï¼ˆå…¥åº“ã€è°ƒç”¨ã€å¤„ç†ï¼‰</span>
        doBusiness();

        <span class="hljs-comment">// 2. æˆåŠŸåå†è¿”å› SUCCESS</span>
        <span class="hljs-keyword">return</span> ConsumeConcurrentlyStatus.CONSUME_SUCCESS;
    } <span class="hljs-keyword">catch</span> (Exception e) {
        log.error(<span class="hljs-string">"æ¶ˆè´¹å¤±è´¥"</span>, e);
        <span class="hljs-comment">// 3. å¼‚å¸¸ â†’ ä¸ ACKï¼ŒBroker ä¼šé‡è¯•</span>
        <span class="hljs-keyword">return</span> ConsumeConcurrentlyStatus.RECONSUME_LATER;
    }
}
</code></pre>
<h3 data-id="heading-13">4.2 ä¸¥ç¦æå‰ ACK</h3>
<p>ä¸è¦åœ¨ä¸šåŠ¡æ‰§è¡Œå‰å°±è¿”å›æˆåŠŸã€‚</p>
<h3 data-id="heading-14">4.3 æ¶ˆè´¹è¶…æ—¶åˆç†è®¾ç½®</h3>
<p>é¿å…å› ä¸ºè¶…æ—¶å¯¼è‡´é‡å¤æˆ–ä¸¢å¤±ã€‚</p>
<hr/>
<h2 data-id="heading-15">äº”ã€æ¶ˆæ¯ä¸ä¸¢å¤±å®Œæ•´æµç¨‹ï¼ˆæ€»ç»“ä¸€å¼ å›¾çœ‹æ‡‚ï¼‰</h2>
<pre><code class="hljs">ç”Ÿäº§è€…
  â†“ï¼ˆåŒæ­¥å‘é€ + æ ¡éªŒç»“æœ + é‡è¯•ï¼‰
Broker
  â†“ï¼ˆåŒæ­¥åˆ·ç›˜ + åŒæ­¥ä¸»ä»ï¼‰
æ¶ˆè´¹è€…
  â†“ï¼ˆå…ˆæ‰§è¡Œä¸šåŠ¡ï¼ŒæˆåŠŸå† ACKï¼‰
æœ€ç»ˆï¼šæ¶ˆæ¯ä¸ä¸¢å¤±
</code></pre>
<hr/>
<h2 data-id="heading-16">å…­ã€ç”Ÿäº§ç¯å¢ƒç»ˆææœ€ä½³å®è·µï¼ˆç›´æ¥ç…§åšï¼‰</h2>
<h3 data-id="heading-17">ç”Ÿäº§è€…</h3>
<ul>
<li>ä½¿ç”¨åŒæ­¥å‘é€</li>
<li>å¼€å¯é‡è¯•</li>
<li>æ ¡éªŒ SendResult</li>
<li>æ ¸å¿ƒä¸šåŠ¡ç”¨äº‹åŠ¡æ¶ˆæ¯</li>
<li>å¤±è´¥æ¶ˆæ¯è½åº“ + å®šæ—¶ä»»åŠ¡é‡è¯•</li>
</ul>
<h3 data-id="heading-18">Broker</h3>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">flushDiskType</span>=SYNC_FLUSH
<span class="hljs-attr">brokerRole</span>=SYNC_MASTER
</code></pre>
<ul>
<li>ä¸»ä»æ¶æ„</li>
<li>ç£ç›˜ RAID</li>
<li>ç›‘æ§ç£ç›˜å¥åº·ã€å†…å­˜ã€æœåŠ¡çŠ¶æ€</li>
</ul>
<h3 data-id="heading-19">æ¶ˆè´¹è€…</h3>
<ul>
<li>å…ˆå¤„ç†ä¸šåŠ¡ï¼Œå† ACK</li>
<li>å¼‚å¸¸è¿”å› RECONSUME_LATER</li>
<li>å¿…é¡»åš<strong>å¹‚ç­‰</strong>ï¼ˆé‡è¯•ä¼šé‡å¤ï¼‰</li>
<li>ç›‘æ§ï¼šå †ç§¯ã€é‡è¯•ã€æ­»ä¿¡</li>
</ul>
<hr/>
<h2 data-id="heading-20">ä¸ƒã€ç»å…¸é—®é¢˜</h2>
<ol>
<li>RocketMQ å¦‚ä½•ä¿è¯æ¶ˆæ¯ä¸ä¸¢å¤±ï¼Ÿ</li>
<li>åŒæ­¥åˆ·ç›˜ vs å¼‚æ­¥åˆ·ç›˜ åŒºåˆ«ï¼Ÿ</li>
<li>åŒæ­¥ä¸»ä» vs å¼‚æ­¥ä¸»ä» åŒºåˆ«ï¼Ÿ</li>
<li>æ¶ˆè´¹ç«¯ä¸ºä»€ä¹ˆä¼šä¸¢æ¶ˆæ¯ï¼Ÿ</li>
<li>äº‹åŠ¡æ¶ˆæ¯ä¸ºä»€ä¹ˆèƒ½é˜²ä¸¢ï¼Ÿ</li>
<li>ç”Ÿäº§ä¸­ä½ æ˜¯å¦‚ä½•ç¡®ä¿æ¶ˆæ¯ä¸ä¸¢å¤±çš„ï¼Ÿ</li>
</ol>
<hr/>
<h2 data-id="heading-21">å…«ã€æ€»ç»“</h2>
<p>RocketMQ ä¸æ‰¿è¯º â€œå¤©ç„¶ä¸ä¸¢æ¶ˆæ¯â€ï¼Œä½†é€šè¿‡ï¼š</p>
<p><strong>åŒæ­¥å‘é€ + åŒæ­¥åˆ·ç›˜ + åŒæ­¥ä¸»ä» + å…ˆä¸šåŠ¡å ACK</strong></p>
<p>å¯ä»¥å®ç°<strong>å·¥ä¸šçº§ã€é‡‘èçº§ã€ç”Ÿäº§çº§çš„æ¶ˆæ¯ä¸ä¸¢å¤±</strong>ã€‚</p>
<p>è®°ä½ä¸€å¥è¯ï¼š<strong>æ¶ˆæ¯ä¸ä¸¢å¤±ï¼Œä¸æ˜¯ä¸­é—´ä»¶å•æ–¹é¢çš„äº‹ï¼Œæ˜¯å…¨é“¾è·¯è®¾è®¡çš„ç»“æœã€‚</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ·±åº¦åˆ†æRocketMQ æ¶ˆæ¯é‡è¯•ï¼ˆé‡è¯»ï¼‰æœºåˆ¶]]></title>    <link>https://juejin.cn/post/7604690250363781129</link>    <guid>https://juejin.cn/post/7604690250363781129</guid>    <pubDate>2026-02-09T19:23:39.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604690250363781129" data-draft-id="7604665952320192563" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ·±åº¦åˆ†æRocketMQ æ¶ˆæ¯é‡è¯•ï¼ˆé‡è¯»ï¼‰æœºåˆ¶"/> <meta itemprop="keywords" content="RocketMQ"/> <meta itemprop="datePublished" content="2026-02-09T19:23:39.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸‰æ°´ä¸æ»´"/> <meta itemprop="url" content="https://juejin.cn/user/283045639753100"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ·±åº¦åˆ†æRocketMQ æ¶ˆæ¯é‡è¯•ï¼ˆé‡è¯»ï¼‰æœºåˆ¶
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/283045639753100/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸‰æ°´ä¸æ»´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-09T19:23:39.000Z" title="Mon Feb 09 2026 19:23:39 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    4
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æ·±åº¦åˆ†æ RocketMQ æ¶ˆæ¯é‡è¯•ï¼ˆé‡è¯»ï¼‰æœºåˆ¶ï¼šåŸç†ã€æµç¨‹ã€é…ç½®ä¸ç”Ÿäº§å®æˆ˜</h2>
<h3 data-id="heading-1">ä¸€ã€å‰è¨€</h3>
<p>åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿé‡Œï¼Œ<strong>æ¶ˆè´¹å¤±è´¥æ˜¯å¸¸æ€</strong>ï¼š</p>
<ul>
<li>ç½‘ç»œæŠ–åŠ¨ã€è°ƒç”¨è¶…æ—¶</li>
<li>æ•°æ®åº“å¼‚å¸¸ã€é”ç­‰å¾…</li>
<li>ä¸šåŠ¡æ ¡éªŒå¤±è´¥ã€æµé‡çªåˆº</li>
<li>æ¶ˆè´¹è€…é‡å¯ã€æ‰©å®¹ã€å®•æœº</li>
</ul>
<p>å¦‚æœæ²¡æœ‰å¯é çš„<strong>æ¶ˆæ¯é‡è¯•ï¼ˆé‡è¯»ï¼‰æœºåˆ¶</strong>ï¼Œå°±ä¼šå‡ºç°ï¼š<strong>æ•°æ®ä¸ä¸€è‡´ã€ä¸¢æ¶ˆæ¯ã€ä¸šåŠ¡ä¸­æ–­ã€äººå·¥è¡¥å•</strong>ã€‚</p>
<p>RocketMQ æä¾›äº†ä¸€å¥—<strong>å…¨è‡ªåŠ¨ã€å¯é…ç½®ã€éš”ç¦»æ€§å¼º</strong>çš„æ¶ˆè´¹é‡è¯•æ–¹æ¡ˆã€‚</p>
<h3 data-id="heading-2">äºŒã€ä»€ä¹ˆæ˜¯æ¶ˆæ¯é‡è¯•ï¼ˆé‡è¯»ï¼‰ï¼Ÿ</h3>
<p><strong>æ¶ˆæ¯é‡è¯• = æ¶ˆè´¹å¤±è´¥åï¼ŒBroker è‡ªåŠ¨é‡æ–°æŠ•é€’æ¶ˆæ¯ç»™æ¶ˆè´¹è€…ã€‚</strong></p>
<p>RocketMQ åªä¿è¯ï¼š<strong>At Least Onceï¼ˆè‡³å°‘æŠ•é€’ä¸€æ¬¡ï¼‰ä¸ä¿è¯ Exactly Onceã€‚</strong></p>
<p>æ‰€ä»¥ï¼š<strong>æ¶ˆè´¹å¤±è´¥ = ä¸è¿”å›æˆåŠŸ = è‡ªåŠ¨é‡è¯•</strong></p>
<hr/>
<h3 data-id="heading-3">ä¸‰ã€å“ªäº›æƒ…å†µä¼šè§¦å‘é‡è¯•ï¼Ÿ</h3>
<p>åªè¦æ¶ˆè´¹è€…<strong>æ²¡æœ‰æ˜ç¡®è¿”å›æˆåŠŸ</strong>ï¼Œå°±ä¼šé‡è¯•ï¼š</p>
<ol>
<li>ä¸šåŠ¡ä»£ç æŠ›å‡º <strong>Exception / Error</strong></li>
<li>æ˜¾å¼è¿”å› <code>RECONSUME_LATER</code></li>
<li>æ¶ˆè´¹<strong>è¶…æ—¶</strong>ï¼ˆé»˜è®¤ 15minï¼‰</li>
<li>æ¶ˆè´¹è€…è¿›ç¨‹æŒ‚æ‰ã€æ–­å¼€è¿æ¥</li>
<li>é˜Ÿåˆ—é‡æ–°è´Ÿè½½å‡è¡¡ï¼ˆrebalanceï¼‰</li>
</ol>
<p>åªè¦æ²¡è¿”å›ï¼š</p>
<pre><code class="hljs language-java" lang="java">ConsumeConcurrentlyStatus.CONSUME_SUCCESS
</code></pre>
<p>ä¸€å¾‹è¿›å…¥é‡è¯•ã€‚</p>
<hr/>
<h3 data-id="heading-4">å››ã€æ ¸å¿ƒæœºåˆ¶ï¼šé‡è¯•æ¶ˆæ¯å­˜åœ¨å“ªé‡Œï¼Ÿ</h3>
<p>é‡ç‚¹ï¼š<strong>é‡è¯•æ¶ˆæ¯ä¸åœ¨åŸ Topicï¼</strong></p>
<p>RocketMQ ä¼šä¸º<strong>æ¯ä¸ªæ¶ˆè´¹ç»„</strong>åˆ›å»ºä¸€ä¸ª<strong>å†…ç½®é‡è¯•é˜Ÿåˆ—</strong>ï¼š</p>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_">%</span><span class="bash">RETRY%+æ¶ˆè´¹è€…ç»„å</span>
</code></pre>
<p>ä¾‹å¦‚ï¼šæ¶ˆè´¹ç»„ï¼š<code>order-consumer-group</code>é‡è¯•é˜Ÿåˆ—ï¼š<code>%RETRY%order-consumer-group</code></p>
<p>ç‰¹ç‚¹ï¼š</p>
<ul>
<li>è‡ªåŠ¨åˆ›å»ºï¼Œæ— éœ€æ‰‹åŠ¨å»º</li>
<li>å¯¹ä¸šåŠ¡é€æ˜</li>
<li>ä¸æ­£å¸¸ Topic éš”ç¦»ï¼Œä¸å½±å“ä¸»æµç¨‹</li>
<li>åªæœ‰å½“å‰æ¶ˆè´¹ç»„èƒ½æ¶ˆè´¹</li>
</ul>
<hr/>
<h3 data-id="heading-5">äº”ã€é‡è¯•å»¶è¿Ÿè§„åˆ™ï¼ˆéå¸¸é‡è¦ï¼‰</h3>
<p>RocketMQ <strong>ä¸æ˜¯ç«‹å³é‡è¯•</strong>ï¼Œè€Œæ˜¯ä½¿ç”¨<strong>å»¶è¿Ÿç­‰çº§</strong>æ§åˆ¶é—´éš”ã€‚</p>
<p>é»˜è®¤ <strong>18 ä¸ªå»¶è¿Ÿçº§åˆ«</strong>ï¼š</p>
<pre><code class="hljs">1s 5s 10s 30s 1m 2m 3m 4m 5m 6m 7m 8m 9m 10m 20m 30m 1h 2h
</code></pre>
<p>å¯¹åº” levelï¼š<code>1 ~ 18</code></p>
<h4 data-id="heading-6">é‡è¯•æ¬¡æ•°ä¸å»¶è¿Ÿå¯¹åº”</h4>
<ul>
<li>ç¬¬ 1 æ¬¡é‡è¯• â†’ level 3 â†’ <strong>10s</strong></li>
<li>ç¬¬ 2 æ¬¡é‡è¯• â†’ level 4 â†’ <strong>30s</strong></li>
<li>ç¬¬ 3 æ¬¡é‡è¯• â†’ level 5 â†’ <strong>1m</strong></li>
<li>ç¬¬ 4 æ¬¡é‡è¯• â†’ level 6 â†’ <strong>2m</strong></li>
<li>â€¦</li>
<li>è¶Šæ¥è¶Šé•¿ï¼Œ<strong>é¿å…é›ªå´©å¼é‡è¯•</strong></li>
</ul>
<hr/>
<h3 data-id="heading-7">å…­ã€æœ€å¤§é‡è¯•æ¬¡æ•° &amp; æ­»ä¿¡é˜Ÿåˆ—ï¼ˆDLQï¼‰</h3>
<h4 data-id="heading-8">1. é»˜è®¤æœ€å¤§é‡è¯•æ¬¡æ•°</h4>
<ul>
<li><strong>é›†ç¾¤æ¨¡å¼ï¼šé»˜è®¤ 16 æ¬¡</strong></li>
<li><strong>å¹¿æ’­æ¨¡å¼ï¼šä¸é‡è¯•ï¼ˆåªå‘ä¸€æ¬¡ï¼‰</strong></li>
</ul>
<h4 data-id="heading-9">2. è¶…è¿‡æœ€å¤§é‡è¯• â†’ è¿›å…¥æ­»ä¿¡é˜Ÿåˆ—</h4>
<p>æ­»ä¿¡é˜Ÿåˆ—æ ¼å¼ï¼š</p>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_">%</span><span class="bash">DLQ%+æ¶ˆè´¹è€…ç»„å</span>
</code></pre>
<p>ç‰¹ç‚¹ï¼š</p>
<ul>
<li>è¿›å…¥æ­»ä¿¡å <strong>ä¸å†è‡ªåŠ¨æŠ•é€’</strong></li>
<li>éœ€è¦äººå·¥æ’æŸ¥ã€å¤„ç†ã€æ¢å¤</li>
<li>æ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿæœ€åçš„<strong>å…œåº•ä¿éšœ</strong></li>
</ul>
<hr/>
<h3 data-id="heading-10">ä¸ƒã€é›†ç¾¤æ¨¡å¼ vs å¹¿æ’­æ¨¡å¼ é‡è¯•å¯¹æ¯”</h3>
<p>è¡¨æ ¼</p>


























<table><thead><tr><th>æ¨¡å¼</th><th>æ˜¯å¦é‡è¯•</th><th>é‡è¯•é˜Ÿåˆ—</th><th>æ­»ä¿¡é˜Ÿåˆ—</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td><strong>é›†ç¾¤æ¨¡å¼</strong></td><td>âœ… æ˜¯</td><td>âœ… æœ‰</td><td>âœ… æœ‰</td><td>ç”Ÿäº§ç¯å¢ƒé»˜è®¤</td></tr><tr><td><strong>å¹¿æ’­æ¨¡å¼</strong></td><td>âŒ ä¸é‡è¯•</td><td>âŒ æ— </td><td>âŒ æ— </td><td>æ—¥å¿—ã€é€šçŸ¥</td></tr></tbody></table>
<p><strong>ç”Ÿäº§ 99% ç”¨é›†ç¾¤æ¨¡å¼ã€‚</strong></p>
<hr/>
<h3 data-id="heading-11">å…«ã€å®Œæ•´é‡è¯•æµç¨‹ï¼ˆå›¾æ–‡ç‰ˆé€»è¾‘ï¼‰</h3>
<pre><code class="hljs language-erlang" lang="erlang">æ¶ˆè´¹å¼€å§‹
  â†“
æ‰§è¡Œä¸šåŠ¡é€»è¾‘
  â†“
æˆåŠŸï¼Ÿâ†’ è¿”å› CONSUME_SUCCESS â†’ ç»“æŸ
  â†“
å¤±è´¥ï¼Ÿ
  â†“
å†™å…¥ <span class="hljs-comment">%RETRY%æ¶ˆè´¹ç»„ é˜Ÿåˆ—</span>
  â†“
æŒ‰å»¶è¿Ÿç­‰çº§ç­‰å¾…
  â†“
é‡æ–°æŠ•é€’ç»™æ¶ˆè´¹è€…
  â†“
é‡å¤ç›´åˆ°è¾¾åˆ°æœ€å¤§æ¬¡æ•°
  â†“
è¿›å…¥ <span class="hljs-comment">%DLQ%æ¶ˆè´¹ç»„ æ­»ä¿¡é˜Ÿåˆ—</span>
  â†“
äººå·¥å¤„ç†
</code></pre>
<hr/>
<h3 data-id="heading-12">ä¹ã€ä»£ç å±‚é¢å¦‚ä½•æ§åˆ¶é‡è¯•ï¼Ÿ</h3>
<h4 data-id="heading-13">1. æŠ›å¼‚å¸¸è‡ªåŠ¨é‡è¯•ï¼ˆæœ€å¸¸ç”¨ï¼‰</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Override</span>
<span class="hljs-keyword">public</span> ConsumeConcurrentlyStatus <span class="hljs-title function_">consumeMessage</span><span class="hljs-params">(
        List&lt;MessageExt&gt; msgs, ConsumeConcurrentlyContext context)</span> {
    <span class="hljs-keyword">try</span> {
        <span class="hljs-comment">// ä¸šåŠ¡å¤„ç†</span>
        doBusiness(msgs);
        <span class="hljs-keyword">return</span> ConsumeConcurrentlyStatus.CONSUME_SUCCESS;
    } <span class="hljs-keyword">catch</span> (Exception e) {
        log.error(<span class="hljs-string">"æ¶ˆè´¹å¼‚å¸¸ï¼Œè‡ªåŠ¨é‡è¯•"</span>, e);
        <span class="hljs-comment">// æŠ›å‡ºå¼‚å¸¸ â†’ è‡ªåŠ¨è¿›å…¥é‡è¯•</span>
        <span class="hljs-keyword">throw</span> e;
    }
}
</code></pre>
<h4 data-id="heading-14">2. æ‰‹åŠ¨è¿”å›é‡è¯•</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">return</span> ConsumeConcurrentlyStatus.RECONSUME_LATER;
</code></pre>
<h4 data-id="heading-15">3. ä¸æƒ³é‡è¯•ï¼Ÿç›´æ¥åå¼‚å¸¸</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">try</span> {
    doBusiness();
} <span class="hljs-keyword">catch</span> (Exception e) {
    log.error(<span class="hljs-string">"ä¸šåŠ¡å¤±è´¥ï¼Œä¸å†é‡è¯•"</span>, e);
}
<span class="hljs-keyword">return</span> CONSUME_SUCCESS;
</code></pre>
<p>âš ï¸ è°¨æ…ä½¿ç”¨ï¼Œä¼šä¸¢æ¶ˆæ¯ã€‚</p>
<hr/>
<h3 data-id="heading-16">åã€å¦‚ä½•è‡ªå®šä¹‰æœ€å¤§é‡è¯•æ¬¡æ•°ï¼Ÿ</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">DefaultMQPushConsumer</span> <span class="hljs-variable">consumer</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DefaultMQPushConsumer</span>(<span class="hljs-string">"order-group"</span>);
<span class="hljs-comment">// è®¾ç½®æœ€å¤§é‡è¯•æ¬¡æ•°</span>
consumer.setMaxReconsumeTimes(<span class="hljs-number">5</span>);
</code></pre>
<p>æ¨èï¼š<strong>3~5 æ¬¡</strong>ï¼Œé¿å…æ— é™é‡è¯•ã€‚</p>
<hr/>
<h3 data-id="heading-17">åä¸€ã€ç”Ÿäº§ç¯å¢ƒæœ€ä½³å®è·µ</h3>
<ol>
<li>
<p><strong>æ¶ˆè´¹å¿…é¡»å¹‚ç­‰</strong>é‡è¯•ä¸€å®šä¼šå¸¦æ¥é‡å¤æ¶ˆæ¯ï¼Œå¿…é¡»ä¿è¯é‡å¤æ¶ˆè´¹ä¸å½±å“ç»“æœã€‚</p>
</li>
<li>
<p><strong>å¯é‡è¯•ä¸ä¸å¯é‡è¯•å¼‚å¸¸åˆ†å¼€å¤„ç†</strong></p>
<ul>
<li>ç½‘ç»œ / DB æŠ–åŠ¨ï¼šå¯é‡è¯•</li>
<li>å‚æ•°éæ³• / æ•°æ®ä¸å­˜åœ¨ï¼šä¸é‡è¯•ï¼Œç›´æ¥è®°å½•</li>
</ul>
</li>
<li>
<p><strong>å¿«é€Ÿå¤±è´¥ï¼Œä¸è¦é˜»å¡</strong>é˜»å¡ä¼šå¯¼è‡´é˜Ÿåˆ—å¤§é‡å †ç§¯ã€‚</p>
</li>
<li>
<p><strong>æ­»ä¿¡é˜Ÿåˆ—å¿…é¡»ç›‘æ§å‘Šè­¦</strong>å‡ºç°æ­»ä¿¡ = ç³»ç»Ÿå¼‚å¸¸ï¼Œå¿…é¡»åŠæ—¶å¤„ç†ã€‚</p>
</li>
<li>
<p><strong>é‡è¯•æ¬¡æ•°ä¸è¦è®¾ç½®è¿‡å¤§</strong>é¿å…æ¶ˆæ¯é•¿æœŸå ç”¨é˜Ÿåˆ—ï¼Œå½±å“æ­£å¸¸æ¶ˆè´¹ã€‚</p>
</li>
<li>
<p><strong>ç¦æ­¢ç¦ç”¨é‡è¯•</strong>é«˜å¯é ç³»ç»Ÿä¸å…è®¸ä¸¢æ¶ˆæ¯ã€‚</p>
</li>
</ol>
<hr/>
<h3 data-id="heading-18">åäºŒã€æ€»ç»“</h3>
<p>RocketMQ æ¶ˆæ¯é‡è¯•ï¼ˆé‡è¯»ï¼‰æœºåˆ¶æ˜¯ï¼š<strong>é«˜å¯é åˆ†å¸ƒå¼ç³»ç»Ÿçš„æ ¸å¿ƒä¿éšœ</strong>ã€‚</p>
<p>æ ¸å¿ƒè¦ç‚¹ï¼š</p>
<ul>
<li>æ¶ˆè´¹å¤±è´¥ â†’ è¿›å…¥ <code>%RETRY%ç»„å</code></li>
<li>æŒ‰å»¶è¿Ÿç­‰çº§é‡è¯•ï¼Œé¿å…é£æš´</li>
<li>è¶…è¿‡æ¬¡æ•° â†’ è¿›å…¥ <code>%DLQ%ç»„å</code></li>
<li>æ¶ˆè´¹ç«¯å¿…é¡»åš<strong>å¹‚ç­‰</strong></li>
<li>ç”Ÿäº§å¿…é¡»ç›‘æ§<strong>é‡è¯•ã€æ­»ä¿¡ã€å †ç§¯</strong></li>
</ul>
<p>ç†è§£è¿™å¥—æœºåˆ¶ï¼Œä½ å°±èƒ½çœŸæ­£å†™å‡º<strong>ç”Ÿäº§å¯ç”¨ã€é«˜å¯é ã€é«˜å¯ç”¨</strong>çš„æ¶ˆæ¯æœåŠ¡ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€èŠ‚ç‚¹ã€‘[HDSceneColorèŠ‚ç‚¹]åŸç†è§£æä¸å®é™…åº”ç”¨]]></title>    <link>https://juejin.cn/post/7604853010162499647</link>    <guid>https://juejin.cn/post/7604853010162499647</guid>    <pubDate>2026-02-10T01:54:00.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604853010162499647" data-draft-id="7604853010162483263" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€èŠ‚ç‚¹ã€‘[HDSceneColorèŠ‚ç‚¹]åŸç†è§£æä¸å®é™…åº”ç”¨"/> <meta itemprop="keywords" content="æ¸¸æˆå¼€å‘,å›¾å½¢å­¦,Unity3D"/> <meta itemprop="datePublished" content="2026-02-10T01:54:00.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="SmalBox"/> <meta itemprop="url" content="https://juejin.cn/user/2218166695237532"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€èŠ‚ç‚¹ã€‘[HDSceneColorèŠ‚ç‚¹]åŸç†è§£æä¸å®é™…åº”ç”¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2218166695237532/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    SmalBox
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-10T01:54:00.000Z" title="Tue Feb 10 2026 01:54:00 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»16åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2Fchenghai37%2Fcategory_13074589.html%3Ffromshare%3Dblogcolumn%26sharetype%3Dblogcolumn%26sharerId%3D13074589%26sharerefer%3DPC%26sharesource%3Dchenghai37%26sharefrom%3Dfrom_link" target="_blank" title="https://blog.csdn.net/chenghai37/category_13074589.html?fromshare=blogcolumn&amp;sharetype=blogcolumn&amp;sharerId=13074589&amp;sharerefer=PC&amp;sharesource=chenghai37&amp;sharefrom=from_link" ref="nofollow noopener noreferrer">ã€Unity Shader Graph ä½¿ç”¨ä¸ç‰¹æ•ˆå®ç°ã€‘</a><strong>ä¸“æ -ç›´è¾¾</strong></p>
</blockquote>
<p>é«˜æ¸…åœºæ™¯é¢œè‰²èŠ‚ç‚¹ï¼ˆHD Scene Color Nodeï¼‰æ˜¯Unityé«˜æ¸…æ¸²æŸ“ç®¡çº¿ï¼ˆHDRPï¼‰ä¸­ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„ç€è‰²å™¨å›¾å½¢èŠ‚ç‚¹ï¼Œå®ƒæ‰©å±•äº†ä¼ ç»Ÿåœºæ™¯é¢œè‰²èŠ‚ç‚¹çš„èƒ½åŠ›ï¼Œä¸ºå¼€å‘è€…æä¾›äº†æ›´ç²¾ç»†çš„é¢œè‰²ç¼“å†²åŒºè®¿é—®æ§åˆ¶ã€‚è¯¥èŠ‚ç‚¹çš„æ ¸å¿ƒä»·å€¼åœ¨äºèƒ½å¤Ÿè®¿é—®é¢œè‰²ç¼“å†²åŒºçš„Mipmapçº§åˆ«ï¼Œè¿™åœ¨å®ç°å„ç§é«˜çº§æ¸²æŸ“æ•ˆæœæ—¶è‡³å…³é‡è¦ã€‚</p>
<p>åœ¨å®æ—¶æ¸²æŸ“ä¸­ï¼Œé¢œè‰²ç¼“å†²åŒºå­˜å‚¨äº†åœºæ™¯çš„æœ€ç»ˆæ¸²æŸ“ç»“æœï¼Œè€ŒMipmapé“¾åˆ™æ˜¯è¯¥ç¼“å†²åŒºçš„ä¸€ç³»åˆ—é€æ¸é™ä½åˆ†è¾¨ç‡ç‰ˆæœ¬ã€‚HD Scene ColorèŠ‚ç‚¹çš„ç‹¬ç‰¹ä¹‹å¤„åœ¨äºå®ƒå…è®¸ç€è‰²å™¨ç¨‹åºè®¿é—®è¿™äº›ä¸åŒåˆ†è¾¨ç‡çš„é¢œè‰²æ•°æ®ï¼Œä¸ºåå¤„ç†æ•ˆæœã€å±å¹•ç©ºé—´åå°„ã€ç»†èŠ‚å±‚æ¬¡ï¼ˆLODï¼‰ç³»ç»Ÿç­‰é«˜çº§å›¾å½¢åŠŸèƒ½æä¾›äº†æŠ€æœ¯åŸºç¡€ã€‚</p>
<h2 data-id="heading-0">æ¸²æŸ“ç®¡çº¿å…¼å®¹æ€§è¯¦è§£</h2>
<p>HD Scene ColorèŠ‚ç‚¹çš„å¯ç”¨æ€§å®Œå…¨å–å†³äºæ‰€ä½¿ç”¨çš„æ¸²æŸ“ç®¡çº¿ï¼Œè¿™æ˜¯å¼€å‘è€…åœ¨é€‰æ‹©å’Œä½¿ç”¨è¯¥èŠ‚ç‚¹æ—¶å¿…é¡»é¦–å…ˆè€ƒè™‘çš„å› ç´ ã€‚</p>
<p><strong>é«˜æ¸…æ¸²æŸ“ç®¡çº¿ï¼ˆHDRPï¼‰æ”¯æŒ</strong></p>
<ul>
<li>HDRPæ˜¯Unityé’ˆå¯¹é«˜ç«¯å¹³å°å’Œé«˜ç«¯ç¡¬ä»¶è®¾è®¡çš„é«˜ä¿çœŸæ¸²æŸ“è§£å†³æ–¹æ¡ˆ</li>
<li>HD Scene ColorèŠ‚ç‚¹ä¸“ä¸ºHDRPè®¾è®¡ï¼Œå……åˆ†åˆ©ç”¨äº†HDRPçš„å¤æ‚æ¸²æŸ“æ¶æ„</li>
<li>åœ¨HDRPä¸­ï¼Œé¢œè‰²ç¼“å†²åŒºé€šå¸¸åŒ…å«HDRï¼ˆé«˜åŠ¨æ€èŒƒå›´ï¼‰æ•°æ®ï¼Œæä¾›äº†æ›´ä¸°å¯Œçš„é¢œè‰²ä¿¡æ¯å’Œäº®åº¦èŒƒå›´</li>
<li>HDRPçš„æ¸²æŸ“è·¯å¾„å…è®¸å¤šä¸ªé¢œè‰²ç¼“å†²åŒºå¹¶å­˜ï¼ŒHD Scene ColorèŠ‚ç‚¹å¯ä»¥è®¿é—®è¿™äº›ç¼“å†²åŒºä¸­çš„ç‰¹å®šæ•°æ®</li>
</ul>
<p><strong>é€šç”¨æ¸²æŸ“ç®¡çº¿ï¼ˆURPï¼‰ä¸æ”¯æŒ</strong></p>
<ul>
<li>URPæ˜¯Unityçš„è½»é‡çº§ã€è·¨å¹³å°æ¸²æŸ“è§£å†³æ–¹æ¡ˆï¼Œè®¾è®¡ç›®æ ‡æ˜¯æ€§èƒ½å’Œæ•ˆç‡</li>
<li>URPä¸æ”¯æŒHD Scene ColorèŠ‚ç‚¹ï¼Œå› ä¸ºå®ƒç®€åŒ–äº†æ¸²æŸ“æ¶æ„ï¼Œä¸åŒ…å«å®Œæ•´çš„Mipmapé¢œè‰²ç¼“å†²åŒºé“¾</li>
<li>åœ¨URPä¸­ï¼Œå¼€å‘è€…åº”ä½¿ç”¨æ ‡å‡†çš„Scene ColorèŠ‚ç‚¹æ¥è®¿é—®åœºæ™¯é¢œè‰²ï¼Œä½†æ— æ³•è®¿é—®ä¸åŒMipçº§åˆ«çš„æ•°æ®</li>
<li>è¿™ç§è®¾è®¡å·®å¼‚åæ˜ äº†URPå’ŒHDRPåœ¨ç›®æ ‡åº”ç”¨åœºæ™¯å’ŒåŠŸèƒ½å¤æ‚åº¦ä¸Šçš„æ ¹æœ¬åŒºåˆ«</li>
</ul>
<p>é€‰æ‹©æ­£ç¡®çš„æ¸²æŸ“ç®¡çº¿å¯¹äºé¡¹ç›®æˆåŠŸè‡³å…³é‡è¦ã€‚å¦‚æœé¡¹ç›®éœ€è¦é«˜çº§é¢œè‰²ç¼“å†²åŒºæ“ä½œã€å¤æ‚çš„åå¤„ç†æ•ˆæœæˆ–é¢å‘é«˜ç«¯ç¡¬ä»¶å¹³å°ï¼ŒHDRPå’ŒHD Scene ColorèŠ‚ç‚¹æ˜¯ç†æƒ³é€‰æ‹©ã€‚è€Œå¯¹äºç§»åŠ¨ç«¯ã€VRæˆ–éœ€è¦å¹¿æ³›å¹³å°å…¼å®¹æ€§çš„é¡¹ç›®ï¼ŒURPå¯èƒ½æ˜¯æ›´åˆé€‚çš„é€‰æ‹©ï¼Œå°½ç®¡å®ƒä¸æ”¯æŒHD Scene ColorèŠ‚ç‚¹çš„æ‰€æœ‰é«˜çº§åŠŸèƒ½ã€‚</p>
<h2 data-id="heading-1">ç«¯å£è¯¦ç»†è¯´æ˜</h2>
<p>HD Scene ColorèŠ‚ç‚¹çš„ä¸‰ä¸ªç«¯å£åˆ†åˆ«æ‰¿æ‹…ç€ä¸åŒçš„åŠŸèƒ½ï¼Œç†è§£æ¯ä¸ªç«¯å£çš„ç‰¹æ€§å’Œç”¨æ³•æ˜¯å®ç°é¢„æœŸè§†è§‰æ•ˆæœçš„å…³é”®ã€‚</p>
<h3 data-id="heading-2">UVè¾“å…¥ç«¯å£</h3>
<p>UVè¾“å…¥ç«¯å£æ˜¯èŠ‚ç‚¹ä¸­æœ€å¸¸ç”¨çš„è¾“å…¥ä¹‹ä¸€ï¼Œå®ƒå®šä¹‰äº†åœ¨é¢œè‰²ç¼“å†²åŒºä¸­é‡‡æ ·çš„ä½ç½®ã€‚</p>
<p><strong>æ•°æ®ç±»å‹ä¸ç»‘å®š</strong></p>
<ul>
<li>UVç«¯å£æ¥å—Vector 4ç±»å‹çš„è¾“å…¥ï¼Œæä¾›äº†è¶³å¤Ÿçš„ç»´åº¦æ¥æ”¯æŒå„ç§é‡‡æ ·åæ ‡ç³»ç»Ÿ</li>
<li>è¯¥ç«¯å£é»˜è®¤ç»‘å®šåˆ°å±å¹•ä½ç½®ï¼ˆScreen Positionï¼‰ï¼Œè¿™æ„å‘³ç€å¦‚æœä¸æ˜¾å¼è¿æ¥å…¶ä»–å€¼ï¼ŒèŠ‚ç‚¹å°†ä½¿ç”¨å½“å‰åƒç´ çš„å±å¹•åæ ‡è¿›è¡Œé‡‡æ ·</li>
<li>å±å¹•åæ ‡é€šå¸¸æ˜¯å½’ä¸€åŒ–çš„ï¼ŒèŒƒå›´åœ¨[0,1]ä¹‹é—´ï¼Œå…¶ä¸­(0,0)è¡¨ç¤ºå±å¹•å·¦ä¸‹è§’ï¼Œ(1,1)è¡¨ç¤ºå±å¹•å³ä¸Šè§’</li>
</ul>
<p><strong>é«˜çº§ä½¿ç”¨æŠ€å·§</strong></p>
<ul>
<li>å¯ä»¥é€šè¿‡è¿æ¥å…¶ä»–èŠ‚ç‚¹æ¥ä¿®æ”¹UVå€¼ï¼Œå®ç°å¹³ç§»ã€æ—‹è½¬ã€ç¼©æ”¾ç­‰é‡‡æ ·æ•ˆæœ</li>
<li>ä½¿ç”¨æ—¶é—´å˜é‡åŠ¨ç”»UVåæ ‡å¯ä»¥åˆ›å»ºåŠ¨æ€é‡‡æ ·æ•ˆæœï¼Œå¦‚å±å¹•æ³¢åŠ¨ã€çƒ­æµªæ‰­æ›²ç­‰</li>
<li>é€šè¿‡åç§»UVåæ ‡ï¼Œå¯ä»¥å®ç°è§†å·®æ•ˆæœã€ä¼ªåå°„å’Œå…¶ä»–åŸºäºå±å¹•ç©ºé—´çš„å˜å½¢</li>
<li>åœ¨å¤šæ‘„åƒæœºè®¾ç½®ä¸­ï¼Œéœ€è¦æ³¨æ„UVåæ ‡çš„å‚è€ƒç³»ï¼Œç¡®ä¿é‡‡æ ·æ­£ç¡®çš„æ‘„åƒæœºé¢œè‰²ç¼“å†²åŒº</li>
</ul>
<p><strong>å®é™…åº”ç”¨ç¤ºä¾‹</strong></p>
<p>å‡è®¾æˆ‘ä»¬æƒ³åˆ›å»ºä¸€ä¸ªç®€å•çš„å±å¹•æ‰­æ›²æ•ˆæœï¼Œå¯ä»¥è¿æ¥ä¸€ä¸ªæ­£å¼¦æ³¢èŠ‚ç‚¹åˆ°UVç«¯å£çš„Xå’ŒYåˆ†é‡ï¼Œä½¿é‡‡æ ·ä½ç½®éšæ—¶é—´è½»å¾®æ³¢åŠ¨ï¼Œæ¨¡æ‹Ÿçƒ­é‡ haze æˆ–æ°´ä¸‹çš„æŠ˜å°„æ•ˆæœã€‚</p>
<h3 data-id="heading-3">Lodè¾“å…¥ç«¯å£</h3>
<p>Lodï¼ˆLevel of Detailï¼‰è¾“å…¥ç«¯å£æ˜¯HD Scene ColorèŠ‚ç‚¹åŒºåˆ«äºæ™®é€šScene ColorèŠ‚ç‚¹çš„å…³é”®ç‰¹æ€§ï¼Œå®ƒæ§åˆ¶ç€é‡‡æ ·æ—¶ä½¿ç”¨çš„Mipmapçº§åˆ«ã€‚</p>
<p><strong>MipmapåŸºç¡€æ¦‚å¿µ</strong></p>
<ul>
<li>Mipmapæ˜¯åŸå§‹çº¹ç†çš„ä¸€ç³»åˆ—ç¼©å°ç‰ˆæœ¬ï¼Œæ¯ä¸ªåç»­çº§åˆ«çš„åˆ†è¾¨ç‡å‡åŠ</li>
<li>åœ¨å®æ—¶æ¸²æŸ“ä¸­ï¼ŒMipmapä¸»è¦ç”¨äºå‡å°‘è¿œå¤„è¡¨é¢çš„é”¯é½¿å’Œæé«˜ç¼“å­˜æ•ˆç‡</li>
<li>HD Scene ColorèŠ‚ç‚¹å…è®¸è®¿é—®é¢œè‰²ç¼“å†²åŒºçš„Mipmapé“¾ï¼Œè¿™æ„å‘³ç€å¯ä»¥é‡‡æ ·åˆ°ä¸åŒåˆ†è¾¨ç‡çš„åœºæ™¯é¢œè‰²æ•°æ®</li>
</ul>
<p><strong>Lodç«¯å£ç‰¹æ€§</strong></p>
<ul>
<li>Lodç«¯å£æ¥å—Floatç±»å‹çš„è¾“å…¥ï¼Œè¡¨ç¤ºè¦é‡‡æ ·çš„Mipçº§åˆ«</li>
<li>å€¼ä¸º0è¡¨ç¤ºæœ€é«˜åˆ†è¾¨ç‡çš„åŸå§‹é¢œè‰²ç¼“å†²åŒº</li>
<li>å€¼æ¯å¢åŠ 1ï¼Œå¯¹åº”çš„Mipçº§åˆ«åˆ†è¾¨ç‡å‡åŠï¼ˆçº§åˆ«1ä¸º1/2åˆ†è¾¨ç‡ï¼Œçº§åˆ«2ä¸º1/4åˆ†è¾¨ç‡ï¼Œä»¥æ­¤ç±»æ¨ï¼‰</li>
<li>æ”¯æŒå°æ•°å€¼ï¼Œå…è®¸åœ¨ä¸‰çº¿æ€§è¿‡æ»¤æ¨¡å¼ä¸‹åœ¨Mipçº§åˆ«ä¹‹é—´å¹³æ»‘æ’å€¼</li>
</ul>
<p><strong>Lodå€¼çš„è®¡ç®—ä¸ä½¿ç”¨</strong></p>
<ul>
<li>å¯ä»¥ç›´æ¥è¿æ¥å¸¸é‡å€¼æ¥å›ºå®šMipçº§åˆ«</li>
<li>å¯ä»¥æ ¹æ®åƒç´ åˆ°æ‘„åƒæœºçš„è·ç¦»åŠ¨æ€è®¡ç®—Lodå€¼ï¼Œå®ç°è‡ªé€‚åº”ç»†èŠ‚çº§åˆ«</li>
<li>å¯ä»¥ä½¿ç”¨å±å¹•ç©ºé—´å¯¼æ•°å‡½æ•°ï¼ˆå¦‚ddx/ddyï¼‰æ¥è®¡ç®—åŸºäºå±€éƒ¨å‡ ä½•å¤æ‚åº¦çš„Lodå€¼</li>
<li>åœ¨åå¤„ç†æ•ˆæœä¸­ï¼Œé€šå¸¸ä½¿ç”¨è¾ƒé«˜çš„Lodå€¼ï¼ˆå¦‚2-4ï¼‰æ¥è·å–æ¨¡ç³Šçš„åœºæ™¯é¢œè‰²ï¼Œç”¨äºæ³›å…‰ã€æ™¯æ·±ç­‰æ•ˆæœ</li>
</ul>
<p><strong>æ€§èƒ½è€ƒè™‘</strong></p>
<ul>
<li>é‡‡æ ·è¾ƒé«˜çš„Mipçº§åˆ«ï¼ˆè¾ƒä½åˆ†è¾¨ç‡ï¼‰é€šå¸¸æ›´å¿«ï¼Œå› ä¸ºéœ€è¦å¤„ç†çš„æ•°æ®æ›´å°‘</li>
<li>ä½†æ˜¯ï¼Œé¢‘ç¹åœ¨ä¸åŒMipçº§åˆ«ä¹‹é—´åˆ‡æ¢å¯èƒ½å¯¼è‡´ç¼“å­˜æ•ˆç‡é™ä½</li>
<li>åœ¨æ€§èƒ½æ•æ„Ÿçš„åœºæ™¯ä¸­ï¼Œåº”å¹³è¡¡è§†è§‰æ•ˆæœéœ€æ±‚å’Œæ€§èƒ½å¼€é”€</li>
</ul>
<h3 data-id="heading-4">è¾“å‡ºç«¯å£</h3>
<p>è¾“å‡ºç«¯å£æä¾›ä»é¢œè‰²ç¼“å†²åŒºæŒ‡å®šä½ç½®å’ŒMipçº§åˆ«é‡‡æ ·å¾—åˆ°çš„é¢œè‰²å€¼ã€‚</p>
<p><strong>è¾“å‡ºç‰¹æ€§</strong></p>
<ul>
<li>è¾“å‡ºä¸ºVector 3ç±»å‹ï¼Œå¯¹åº”RGBé¢œè‰²ç©ºé—´ä¸­çš„çº¢ã€ç»¿ã€è“ä¸‰ä¸ªé€šé“</li>
<li>é¢œè‰²å€¼é€šå¸¸ä½äºHDRèŒƒå›´å†…ï¼Œå¯èƒ½åŒ…å«è¶…è¿‡[0,1]ä¼ ç»ŸèŒƒå›´çš„å€¼</li>
<li>è¾“å‡ºé¢œè‰²å·²ç»è¿‡å½“å‰æ‘„åƒæœºçš„è‰²è°ƒæ˜ å°„å’Œé¢œè‰²åˆ†çº§å¤„ç†ï¼ˆé™¤éåœ¨ç‰¹æ®Šæ¸²æŸ“é€šé“ä¸­ï¼‰</li>
</ul>
<p><strong>é¢œè‰²ç©ºé—´æ³¨æ„äº‹é¡¹</strong></p>
<ul>
<li>åœ¨HDRPä¸­ï¼Œé¢œè‰²æ•°æ®å¯èƒ½åœ¨çº¿æ€§ç©ºé—´æˆ–ä¼½é©¬ç©ºé—´ï¼Œå–å†³äºé¡¹ç›®è®¾ç½®</li>
<li>è¿›è¡Œé¢œè‰²æ“ä½œæ—¶ï¼Œç¡®ä¿äº†è§£å½“å‰å·¥ä½œé¢œè‰²ç©ºé—´ï¼Œé¿å…ä¸æ­£ç¡®çš„ç»“æœ</li>
<li>å½“ä¸å…¶ä»–é¢œè‰²å€¼æ··åˆæˆ–æ“ä½œæ—¶ï¼Œå¯èƒ½éœ€è¦æ‰‹åŠ¨è¿›è¡Œé¢œè‰²ç©ºé—´è½¬æ¢</li>
</ul>
<p><strong>è¾“å‡ºæ•°æ®çš„åç»­å¤„ç†</strong></p>
<ul>
<li>é‡‡æ ·å¾—åˆ°çš„é¢œè‰²å¯ä»¥ç”¨äºå„ç§è®¡ç®—ï¼šäº®åº¦æå–ã€é¢œè‰²æ“ä½œã€ä¸å…¶ä»–çº¹ç†æ··åˆç­‰</li>
<li>åœ¨è‡ªå®šä¹‰åå¤„ç†æ•ˆæœä¸­ï¼ŒHD Scene ColorèŠ‚ç‚¹çš„è¾“å‡ºé€šå¸¸ä½œä¸ºä¸»è¦è¾“å…¥ä¹‹ä¸€</li>
<li>å¯ä»¥é€šè¿‡è¿æ¥å…¶ä»–ç€è‰²å™¨å›¾å½¢èŠ‚ç‚¹å¯¹è¾“å‡ºé¢œè‰²è¿›è¡Œè¿›ä¸€æ­¥å¤„ç†ï¼šåº”ç”¨é¢œè‰²æ›²çº¿ã€è°ƒæ•´é¥±å’Œåº¦ã€å®æ–½é¢œè‰²æ›¿æ¢ç­‰</li>
</ul>
<h2 data-id="heading-5">æ›å…‰æ§åˆ¶æ·±å…¥è§£æ</h2>
<p>æ›å…‰æ§åˆ¶æ˜¯HD Scene ColorèŠ‚ç‚¹ä¸­ä¸€ä¸ªå¾®å¦™ä½†é‡è¦çš„ç‰¹æ€§ï¼Œæ­£ç¡®ç†è§£å’Œä½¿ç”¨å®ƒå¯¹å®ç°é¢„æœŸçš„è§†è§‰æ•ˆæœè‡³å…³é‡è¦ã€‚</p>
<h3 data-id="heading-6">æ›å…‰å±æ€§åŸºç¡€</h3>
<p>æ›å…‰å±æ€§å†³å®šäº†èŠ‚ç‚¹è¾“å‡ºé¢œè‰²æ—¶æ˜¯å¦åº”ç”¨äº†åœºæ™¯çš„æ›å…‰è®¾ç½®ã€‚</p>
<p><strong>å¯ç”¨æ›å…‰</strong></p>
<ul>
<li>å½“Exposureå±æ€§å¯ç”¨æ—¶ï¼Œè¾“å‡ºé¢œè‰²ä¼šä¹˜ä»¥å½“å‰æ‘„åƒæœºçš„æ›å…‰å€¼</li>
<li>è¿™é€‚ç”¨äºå¤§å¤šæ•°æ ‡å‡†æ¸²æŸ“æƒ…å†µï¼Œç¡®ä¿é¢œè‰²ä¸åœºæ™¯ä¸­çš„å…¶ä»–å…ƒç´ ä¸€è‡´</li>
<li>åœ¨è‡ªåŠ¨æ›å…‰ï¼ˆè‡ªé€‚åº”æ›å…‰ï¼‰æƒ…å†µä¸‹ï¼Œè¾“å‡ºé¢œè‰²ä¼šéšæ›å…‰è°ƒæ•´è€ŒåŠ¨æ€å˜åŒ–</li>
</ul>
<p><strong>ç¦ç”¨æ›å…‰</strong></p>
<ul>
<li>å½“Exposureå±æ€§ç¦ç”¨æ—¶ï¼Œè¾“å‡ºé¢œè‰²ä¸ä¼šåº”ç”¨æ›å…‰è°ƒæ•´</li>
<li>è¿™å¯ä»¥é˜²æ­¢åœ¨å·²ç»åº”ç”¨äº†æ›å…‰çš„é¢œè‰²ä¸Šé‡å¤åº”ç”¨æ›å…‰ï¼Œé¿å…è¿‡åº¦æ˜äº®æˆ–é»‘æš—çš„ç»“æœ</li>
<li>åœ¨åå¤„ç†æ•ˆæœä¸­ï¼Œé€šå¸¸éœ€è¦ç¦ç”¨æ›å…‰ï¼Œå› ä¸ºåå¤„ç†æ ˆé€šå¸¸æœ‰è‡ªå·±ç‹¬ç«‹çš„æ›å…‰æ§åˆ¶</li>
</ul>
<h3 data-id="heading-7">æ›å…‰ä¸HDRæ¸²æŸ“</h3>
<p>åœ¨é«˜åŠ¨æ€èŒƒå›´æ¸²æŸ“ä¸­ï¼Œæ›å…‰æ§åˆ¶å°¤ä¸ºé‡è¦ã€‚</p>
<p><strong>HDRé¢œè‰²å€¼</strong></p>
<ul>
<li>åœ¨HDRPä¸­ï¼Œé¢œè‰²ç¼“å†²åŒºé€šå¸¸å­˜å‚¨è¶…è¿‡ä¼ ç»Ÿ[0,1]èŒƒå›´çš„å€¼</li>
<li>è¿™äº›å€¼è¡¨ç¤ºåœºæ™¯ä¸­çœŸå®çš„ç‰©ç†å…‰ç…§æ°´å¹³ï¼Œå¯èƒ½ä»ææš—åˆ°æäº®</li>
<li>è‰²è°ƒæ˜ å°„è¿‡ç¨‹å°†è¿™äº›HDRå€¼è½¬æ¢ä¸ºæ˜¾ç¤ºè®¾å¤‡èƒ½å¤Ÿå¤„ç†çš„LDRï¼ˆä½åŠ¨æ€èŒƒå›´ï¼‰å€¼</li>
</ul>
<p><strong>æ›å…‰åœ¨è‰²è°ƒæ˜ å°„ä¸­çš„ä½œç”¨</strong></p>
<ul>
<li>æ›å…‰æ˜¯è‰²è°ƒæ˜ å°„è¿‡ç¨‹ä¸­çš„å…³é”®å‚æ•°ï¼Œæ§åˆ¶ç€HDRåˆ°LDRçš„è½¬æ¢</li>
<li>é€‚å½“çš„æ›å…‰è®¾ç½®ç¡®ä¿åœºæ™¯ä¸­çš„é‡è¦ç»†èŠ‚åœ¨æœ€ç»ˆå›¾åƒä¸­å¯è§</li>
<li>HD Scene ColorèŠ‚ç‚¹çš„æ›å…‰è®¾ç½®å†³å®šäº†é‡‡æ ·é¢œè‰²æ˜¯å¦å·²ç»è¿‡è¿™ä¸ªè½¬æ¢è¿‡ç¨‹</li>
</ul>
<h3 data-id="heading-8">é¿å…åŒé‡æ›å…‰é—®é¢˜</h3>
<p>åŒé‡æ›å…‰æ˜¯ä½¿ç”¨HD Scene ColorèŠ‚ç‚¹æ—¶å¸¸è§çš„é”™è¯¯ï¼Œä¼šå¯¼è‡´é¢œè‰²è®¡ç®—ä¸æ­£ç¡®ã€‚</p>
<p><strong>åŒé‡æ›å…‰çš„æˆå› </strong></p>
<ul>
<li>å½“é¢œè‰²ç¼“å†²åŒºä¸­çš„æ•°æ®å·²ç»åº”ç”¨äº†æ›å…‰ï¼Œè€ŒèŠ‚ç‚¹å†æ¬¡åº”ç”¨æ›å…‰æ—¶å‘ç”Ÿ</li>
<li>è¿™ä¼šå¯¼è‡´é¢œè‰²å€¼è¢«ä¸¤æ¬¡ä¹˜ä»¥æ›å…‰å€¼ï¼Œäº§ç”Ÿè¿‡åº¦æ˜äº®æˆ–é¥±å’Œçš„ç»“æœ</li>
<li>åœ¨åå¤„ç†æ•ˆæœä¸­ç‰¹åˆ«å¸¸è§ï¼Œå› ä¸ºåå¤„ç†é€šå¸¸åœ¨å…¨å±é€šé“ä¸­æ‰§è¡Œï¼Œå·²ç»åŒ…å«äº†æ›å…‰ä¿¡æ¯</li>
</ul>
<p><strong>è¯†åˆ«åŒé‡æ›å…‰</strong></p>
<ul>
<li>æ¸²æŸ“ç»“æœå¼‚å¸¸æ˜äº®æˆ–é»‘æš—ï¼Œä¸åœºæ™¯ç…§æ˜ä¸ç¬¦</li>
<li>é¢œè‰²é¥±å’Œåº¦å¼‚å¸¸é«˜ï¼Œç‰¹åˆ«æ˜¯åœ¨æ˜äº®åŒºåŸŸ</li>
<li>å½“è°ƒæ•´æ‘„åƒæœºæ›å…‰æ—¶ï¼Œæ•ˆæœå¼ºåº¦å˜åŒ–å¼‚å¸¸å‰§çƒˆ</li>
</ul>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong></p>
<ul>
<li>åœ¨å¤§å¤šæ•°åå¤„ç†åœºæ™¯ä¸­ï¼Œåº”ç¦ç”¨HD Scene ColorèŠ‚ç‚¹çš„Exposureå±æ€§</li>
<li>å¦‚æœéœ€è¦åœ¨ç€è‰²å™¨ä¸­æ‰‹åŠ¨åº”ç”¨æ›å…‰ï¼Œå¯ä»¥ä½¿ç”¨ExposureèŠ‚ç‚¹å’Œå½“å‰æ›å…‰å€¼</li>
<li>æµ‹è¯•æ—¶ï¼Œå°è¯•åˆ‡æ¢Exposureå±æ€§ï¼Œè§‚å¯Ÿç»“æœå˜åŒ–ï¼Œç¡®å®šæ­£ç¡®çš„è®¾ç½®</li>
</ul>
<h2 data-id="heading-9">é‡‡æ ·å™¨æ¨¡å¼è¯¦è§£</h2>
<p>HD Scene ColorèŠ‚ç‚¹ä½¿ç”¨çš„ä¸‰çº¿æ€§é’³ä½æ¨¡å¼é‡‡æ ·å™¨å¯¹é‡‡æ ·è´¨é‡å’Œæ€§èƒ½æœ‰é‡è¦å½±å“ã€‚</p>
<h3 data-id="heading-10">ä¸‰çº¿æ€§è¿‡æ»¤åŸç†</h3>
<p>ä¸‰çº¿æ€§è¿‡æ»¤æ˜¯ä¸€ç§é«˜çº§çº¹ç†è¿‡æ»¤æŠ€æœ¯ï¼Œç»“åˆäº†åŒçº¿æ€§è¿‡æ»¤å’ŒMipmapæ’å€¼ã€‚</p>
<p><strong>åŒçº¿æ€§è¿‡æ»¤</strong></p>
<ul>
<li>åœ¨å•ä¸ªMipçº§åˆ«å†…ï¼Œå¯¹å››ä¸ªæœ€è¿‘çš„çº¹ç´ è¿›è¡ŒåŠ æƒå¹³å‡</li>
<li>å‡å°‘äº†è¿‘è·ç¦»è§‚å¯Ÿçº¹ç†æ—¶çš„å—çŠ¶åƒç´ åŒ–ç°è±¡</li>
<li>ä½†ä¸èƒ½è§£å†³è¿œå¤„è¡¨é¢çš„é—ªçƒå’Œé”¯é½¿é—®é¢˜</li>
</ul>
<p><strong>Mipmapæ’å€¼</strong></p>
<ul>
<li>åœ¨ä¸¤ä¸ªæœ€è¿‘çš„Mipçº§åˆ«ä¹‹é—´è¿›è¡Œæ’å€¼</li>
<li>æ ¹æ®åƒç´ åœ¨å±å¹•ä¸Šçš„å¤§å°è‡ªåŠ¨é€‰æ‹©åˆé€‚çš„ç»†èŠ‚çº§åˆ«</li>
<li>è§£å†³äº†è¿œå¤„è¡¨é¢çš„é—ªçƒå’Œè«å°”å›¾æ¡ˆé—®é¢˜</li>
</ul>
<p><strong>ä¸‰çº¿æ€§è¿‡æ»¤</strong></p>
<ul>
<li>ç»“åˆäº†åŒçº¿æ€§è¿‡æ»¤å’ŒMipmapæ’å€¼</li>
<li>é¦–å…ˆåœ¨ä¸¤ä¸ªMipçº§åˆ«ä¸Šåˆ†åˆ«æ‰§è¡ŒåŒçº¿æ€§è¿‡æ»¤</li>
<li>ç„¶ååœ¨ä¸¤ä¸ªè¿‡æ»¤ç»“æœä¹‹é—´è¿›è¡Œçº¿æ€§æ’å€¼</li>
<li>æä¾›äº†å¹³æ»‘çš„ç»†èŠ‚è¿‡æ¸¡ï¼Œæ¶ˆé™¤äº†Mipçº§åˆ«ä¹‹é—´çš„çªç„¶å˜åŒ–</li>
</ul>
<h3 data-id="heading-11">é’³ä½æ¨¡å¼ç‰¹æ€§</h3>
<p>é’³ä½æ¨¡å¼å®šä¹‰äº†å½“é‡‡æ ·åæ ‡è¶…å‡ºæ ‡å‡†[0,1]èŒƒå›´æ—¶çš„é‡‡æ ·è¡Œä¸ºã€‚</p>
<p><strong>æ ‡å‡†é’³ä½è¡Œä¸º</strong></p>
<ul>
<li>å½“UVåæ ‡å°äº0æ—¶ï¼Œä½¿ç”¨è¾¹ç•Œå¤„çš„é¢œè‰²å€¼ï¼ˆUVä¸º0æ—¶çš„é¢œè‰²ï¼‰</li>
<li>å½“UVåæ ‡å¤§äº1æ—¶ï¼Œä½¿ç”¨è¾¹ç•Œå¤„çš„é¢œè‰²å€¼ï¼ˆUVä¸º1æ—¶çš„é¢œè‰²ï¼‰</li>
<li>è¿™é˜²æ­¢äº†é‡‡æ ·å™¨åœ¨çº¹ç†è¾¹ç•Œå¤–é‡‡æ ·ï¼Œé¿å…äº†æ„å¤–è¡Œä¸º</li>
</ul>
<p><strong>ä¸å…¶ä»–æ¨¡å¼çš„æ¯”è¾ƒ</strong></p>
<ul>
<li>é‡å¤ï¼ˆWrapï¼‰æ¨¡å¼ä¼šåœ¨è¶…å‡ºè¾¹ç•Œæ—¶é‡å¤çº¹ç†</li>
<li>é•œåƒï¼ˆMirrorï¼‰æ¨¡å¼ä¼šé•œåƒçº¹ç†</li>
<li>è¾¹æ¡†ï¼ˆBorderï¼‰æ¨¡å¼ä¼šä½¿ç”¨æŒ‡å®šçš„è¾¹æ¡†é¢œè‰²</li>
<li>å¯¹äºå±å¹•ç©ºé—´é‡‡æ ·ï¼Œé’³ä½æ¨¡å¼é€šå¸¸æ˜¯æœ€åˆé€‚çš„é€‰æ‹©ï¼Œå› ä¸ºå®ƒç¬¦åˆå±å¹•è¾¹ç•Œçš„ç‰©ç†ç‰¹æ€§</li>
</ul>
<h3 data-id="heading-12">æ€§èƒ½å½±å“ä¸ä¼˜åŒ–</h3>
<p>ä¸‰çº¿æ€§é’³ä½é‡‡æ ·è™½ç„¶è´¨é‡é«˜ï¼Œä½†ä¹Ÿæœ‰æ€§èƒ½æˆæœ¬ã€‚</p>
<p><strong>æ€§èƒ½è€ƒè™‘</strong></p>
<ul>
<li>ä¸‰çº¿æ€§è¿‡æ»¤éœ€è¦è®¿é—®8ä¸ªçº¹ç´ ï¼ˆä¸¤ä¸ªMipçº§åˆ«å„4ä¸ªï¼‰ï¼Œè€ŒåŒçº¿æ€§åªéœ€4ä¸ª</li>
<li>è¿™å¢åŠ äº†å†…å­˜å¸¦å®½éœ€æ±‚å’Œçº¹ç†ç¼“å­˜å‹åŠ›</li>
<li>åœ¨æ€§èƒ½æ•æ„Ÿçš„åœºæ™¯ä¸­ï¼Œå¯èƒ½éœ€è¦æƒè¡¡è´¨é‡ä¸æ€§èƒ½</li>
</ul>
<p><strong>ä¼˜åŒ–ç­–ç•¥</strong></p>
<ul>
<li>å¯¹äºä¸éœ€è¦é«˜è´¨é‡è¿‡æ»¤çš„æ•ˆæœï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨åŒçº¿æ€§é‡‡æ ·</li>
<li>é€šè¿‡é€‚å½“è®¾ç½®Lodå€¼ï¼Œå¯ä»¥å‡å°‘ä¸å¿…è¦çš„Mipçº§åˆ«æ’å€¼</li>
<li>åœ¨ç§»åŠ¨å¹³å°æˆ–ä½ç«¯ç¡¬ä»¶ä¸Šï¼Œå¯ä»¥è€ƒè™‘å‡å°‘ä¸‰çº¿æ€§è¿‡æ»¤çš„ä½¿ç”¨èŒƒå›´</li>
</ul>
<h2 data-id="heading-13">å®é™…åº”ç”¨æ¡ˆä¾‹</h2>
<p>HD Scene ColorèŠ‚ç‚¹åœ¨å®è·µä¸­æœ‰å¤šç§åº”ç”¨ï¼Œä»¥ä¸‹æ˜¯ä¸€äº›å¸¸è§çš„ä½¿ç”¨åœºæ™¯ã€‚</p>
<h3 data-id="heading-14">å±å¹•ç©ºé—´åå°„</h3>
<p>å±å¹•ç©ºé—´åå°„ï¼ˆSSRï¼‰æ˜¯HD Scene ColorèŠ‚ç‚¹çš„ç»å…¸åº”ç”¨ä¹‹ä¸€ã€‚</p>
<p><strong>åŸºæœ¬åŸç†</strong></p>
<ul>
<li>é€šè¿‡å°„çº¿è¡Œè¿›åœ¨å±å¹•ç©ºé—´ä¸­æŸ¥æ‰¾åå°„è¡¨é¢</li>
<li>ä½¿ç”¨HD Scene ColorèŠ‚ç‚¹é‡‡æ ·åå°„æ–¹å‘ä¸Šçš„åœºæ™¯é¢œè‰²</li>
<li>é€šè¿‡é€‚å½“çš„Lodè®¾ç½®å‡å°‘åå°„ä¸­çš„å™ªç‚¹å’Œé—ªçƒ</li>
</ul>
<p><strong>å®ç°æ­¥éª¤</strong></p>
<ul>
<li>è®¡ç®—å½“å‰åƒç´ çš„åå°„å‘é‡</li>
<li>åœ¨åå°„æ–¹å‘ä¸Šè¿›è¡Œå°„çº¿è¡Œè¿›ï¼Œæ£€æµ‹ä¸åœºæ™¯å‡ ä½•çš„ç¢°æ’</li>
<li>ä½¿ç”¨ç¢°æ’ç‚¹çš„å±å¹•åæ ‡ä½œä¸ºUVè¾“å…¥HD Scene ColorèŠ‚ç‚¹</li>
<li>æ ¹æ®å°„çº¿è¡Œè¿›è·ç¦»å’Œè¡¨é¢ç²—ç³™åº¦è®¾ç½®é€‚å½“çš„Lodå€¼</li>
<li>å°†é‡‡æ ·å¾—åˆ°çš„åå°„é¢œè‰²ä¸è¡¨é¢é¢œè‰²æ··åˆ</li>
</ul>
<p><strong>ä¼˜åŒ–æŠ€å·§</strong></p>
<ul>
<li>ä½¿ç”¨åˆ†å±‚å°„çº¿è¡Œè¿›æé«˜æ€§èƒ½</li>
<li>æ ¹æ®è¡¨é¢ç²—ç³™åº¦åŠ¨æ€è°ƒæ•´Lodå€¼â€”â€”ç²—ç³™è¡¨é¢ä½¿ç”¨è¾ƒé«˜Lod</li>
<li>å®æ–½å›é€€æœºåˆ¶ï¼Œå½“å±å¹•ç©ºé—´åå°„å¤±è´¥æ—¶ä½¿ç”¨å…¶ä»–åå°„æŠ€æœ¯</li>
</ul>
<h3 data-id="heading-15">è‡ªå®šä¹‰åå¤„ç†æ•ˆæœ</h3>
<p>HD Scene ColorèŠ‚ç‚¹æ˜¯åˆ›å»ºè‡ªå®šä¹‰åå¤„ç†æ•ˆæœçš„å¼ºå¤§å·¥å…·ã€‚</p>
<p><strong>é¢œè‰²åˆ†çº§æ•ˆæœ</strong></p>
<ul>
<li>é‡‡æ ·åœºæ™¯é¢œè‰²å¹¶è¿›è¡Œéçº¿æ€§é¢œè‰²å˜æ¢</li>
<li>å®ç°è‡ªå®šä¹‰çš„è‰²è°ƒæ˜ å°„æ›²çº¿ã€é¢œè‰²åˆ†çº§è¡¨ï¼ˆLUTï¼‰</li>
<li>åˆ›å»ºé£æ ¼åŒ–çš„è§†è§‰æ•ˆæœï¼Œå¦‚å¤å¤ã€ç”µå½±æ„Ÿæˆ–ç§‘å¹»é£æ ¼</li>
</ul>
<p><strong>ç©ºé—´æ•ˆæœ</strong></p>
<ul>
<li>ä½¿ç”¨æ‰­æ›²çš„UVåæ ‡é‡‡æ ·åœºæ™¯é¢œè‰²ï¼Œåˆ›å»ºçƒ­æµªã€æ°´ä¸‹æŠ˜å°„ç­‰æ•ˆæœ</li>
<li>é€šè¿‡æ—¶é—´å˜åŒ–çš„UVåç§»å®ç°å±å¹•æ³¢åŠ¨æ•ˆæœ</li>
<li>ç»“åˆæ·±åº¦ç¼“å†²åŒºå®ç°åŸºäºè·ç¦»çš„é¢œè‰²æ•ˆæœ</li>
</ul>
<p><strong>å¤šPassæ•ˆæœ</strong></p>
<ul>
<li>åœ¨ç¬¬ä¸€Passä¸­é‡‡æ ·åœºæ™¯é¢œè‰²å¹¶å­˜å‚¨åˆ°è‡ªå®šä¹‰ç¼“å†²åŒº</li>
<li>åœ¨åç»­Passä¸­ç»“åˆHD Scene ColorèŠ‚ç‚¹é‡‡æ ·è¿›è¡Œå¤æ‚æ··åˆ</li>
<li>å®ç°å¦‚è¿åŠ¨æ¨¡ç³Šã€æ™¯æ·±ã€æ³›å…‰ç­‰å¤šé˜¶æ®µåå¤„ç†æ•ˆæœ</li>
</ul>
<h3 data-id="heading-16">é«˜çº§æ··åˆæ¨¡å¼</h3>
<p>HD Scene ColorèŠ‚ç‚¹å¯ä»¥å®ç°è¶…è¶Šæ ‡å‡†æ··åˆæ¨¡å¼çš„å¤æ‚åˆæˆæ•ˆæœã€‚</p>
<p><strong>åŸºäºæ·±åº¦çš„æ··åˆ</strong></p>
<ul>
<li>ç»“åˆæ·±åº¦ç¼“å†²åŒºä¿¡æ¯ï¼Œå®ç°ä»…åœ¨ç‰¹å®šæ·±åº¦èŒƒå›´å†…ç”Ÿæ•ˆçš„æ··åˆ</li>
<li>åˆ›å»ºå¦‚é›¾æ°”ã€æ°´ä¸‹æ°´èŠ±ç­‰åŸºäºè·ç¦»çš„æ•ˆæœ</li>
</ul>
<p><strong>åŸºäºäº®åº¦çš„æ··åˆ</strong></p>
<ul>
<li>æå–é‡‡æ ·é¢œè‰²çš„äº®åº¦ï¼Œç”¨äºæ§åˆ¶æ··åˆå› å­</li>
<li>å®ç°å¦‚æ³›å…‰ã€é•œå¤´å…‰æ™•ç­‰é«˜å…‰ç›¸å…³æ•ˆæœ</li>
</ul>
<p><strong>è‡ªå®šä¹‰å±å¹•ç©ºé—´é®ç½©</strong></p>
<ul>
<li>ä½¿ç”¨HD Scene ColorèŠ‚ç‚¹é‡‡æ ·ç‰¹å®šé¢œè‰²é€šé“ä½œä¸ºé®ç½©</li>
<li>å®ç°ä»…åœ¨å±å¹•ç‰¹å®šåŒºåŸŸç”Ÿæ•ˆçš„æ•ˆæœ</li>
<li>åˆ›å»ºå¦‚ä½“ç§¯å…‰ã€ä¸Šå¸å…‰çº¿ç­‰å±€éƒ¨åå¤„ç†æ•ˆæœ</li>
</ul>
<h2 data-id="heading-17">æ€§èƒ½ä¼˜åŒ–ä¸æœ€ä½³å®è·µ</h2>
<p>æ­£ç¡®ä½¿ç”¨HD Scene ColorèŠ‚ç‚¹å¯¹ä¿æŒåº”ç”¨æ€§èƒ½è‡³å…³é‡è¦ã€‚</p>
<h3 data-id="heading-18">é‡‡æ ·æˆæœ¬åˆ†æ</h3>
<p>äº†è§£HD Scene ColorèŠ‚ç‚¹çš„æ€§èƒ½ç‰¹å¾æœ‰åŠ©äºåšå‡ºæ˜æ™ºçš„ä¼˜åŒ–å†³ç­–ã€‚</p>
<p><strong>å½±å“å› ç´ </strong></p>
<ul>
<li>é‡‡æ ·ä½ç½®ï¼ˆUVï¼‰çš„è¿è´¯æ€§å½±å“ç¼“å­˜æ•ˆç‡</li>
<li>Lodå€¼å½±å“è®¿é—®çš„Mipçº§åˆ«å’Œå†…å­˜å¸¦å®½</li>
<li>å±å¹•åˆ†è¾¨ç‡ç›´æ¥å½±å“é‡‡æ ·æ“ä½œçš„ç»å¯¹æ•°é‡</li>
</ul>
<p><strong>æ€§èƒ½ç›‘æ§</strong></p>
<ul>
<li>ä½¿ç”¨Unityçš„Frame Debuggeræˆ–Render Docåˆ†æå…·ä½“é‡‡æ ·æ“ä½œ</li>
<li>ç›‘æ§GPUæ—¶é—´å’Œå†…å­˜å¸¦å®½ä½¿ç”¨æƒ…å†µ</li>
<li>åœ¨ä¸åŒç¡¬ä»¶å¹³å°ä¸Šæµ‹è¯•æ€§èƒ½è¡¨ç°</li>
</ul>
<h3 data-id="heading-19">ä¼˜åŒ–ç­–ç•¥</h3>
<p>å¤šç§ç­–ç•¥å¯ä»¥å¸®åŠ©ä¼˜åŒ–ä½¿ç”¨HD Scene ColorèŠ‚ç‚¹çš„ç€è‰²å™¨æ€§èƒ½ã€‚</p>
<p><strong>å‡å°‘é‡‡æ ·æ¬¡æ•°</strong></p>
<ul>
<li>å°½å¯èƒ½é‡ç”¨é‡‡æ ·ç»“æœï¼Œé¿å…é‡å¤é‡‡æ ·ç›¸åŒä½ç½®</li>
<li>ä½¿ç”¨åŒçº¿æ€§è¿‡æ»¤çš„ä¼˜åŠ¿ï¼Œé€šè¿‡å•æ¬¡é‡‡æ ·è·å–å¹³æ»‘ç»“æœ</li>
<li>åœ¨å¯è¡Œçš„æƒ…å†µä¸‹ï¼Œé™ä½é‡‡æ ·é¢‘ç‡å¹¶ä½¿ç”¨æ’å€¼</li>
</ul>
<p><strong>æ™ºèƒ½Lodé€‰æ‹©</strong></p>
<ul>
<li>æ ¹æ®è§†è§‰æ•ˆæœéœ€æ±‚é€‰æ‹©æœ€ä½å¯æ¥å—çš„Lodçº§åˆ«</li>
<li>å¯¹è¿œå¤„æˆ–æ¬¡è¦æ•ˆæœä½¿ç”¨è¾ƒé«˜Lodçº§åˆ«</li>
<li>åŠ¨æ€è°ƒæ•´Lodçº§åˆ«ï¼Œå¹³è¡¡è´¨é‡ä¸æ€§èƒ½</li>
</ul>
<p><strong>å¹³å°ç‰¹å®šä¼˜åŒ–</strong></p>
<ul>
<li>åœ¨ç§»åŠ¨å¹³å°ä¸Šï¼Œè€ƒè™‘ä½¿ç”¨æ›´ç®€å•çš„é‡‡æ ·ç­–ç•¥</li>
<li>åˆ©ç”¨ç‰¹å®šç¡¬ä»¶çš„çº¹ç†é‡‡æ ·ç‰¹æ€§</li>
<li>ä¸ºä¸åŒæ€§èƒ½çº§åˆ«çš„è®¾å¤‡æä¾›å¤šä¸ªè´¨é‡è®¾ç½®</li>
</ul>
<h2 data-id="heading-20">æ•…éšœæ’é™¤ä¸å¸¸è§é—®é¢˜</h2>
<p>ä½¿ç”¨HD Scene ColorèŠ‚ç‚¹æ—¶å¯èƒ½é‡åˆ°å„ç§é—®é¢˜ï¼Œäº†è§£å¦‚ä½•è¯†åˆ«å’Œè§£å†³è¿™äº›é—®é¢˜å¾ˆé‡è¦ã€‚</p>
<h3 data-id="heading-21">é‡‡æ ·ç»“æœä¸æ­£ç¡®</h3>
<p>å½“HD Scene ColorèŠ‚ç‚¹è¿”å›æ„å¤–ç»“æœæ—¶ï¼Œå¯èƒ½çš„åŸå› å’Œè§£å†³æ–¹æ¡ˆã€‚</p>
<p><strong>UVåæ ‡é—®é¢˜</strong></p>
<ul>
<li>ç¡®è®¤UVåæ ‡åœ¨é¢„æœŸçš„[0,1]èŒƒå›´å†…</li>
<li>æ£€æŸ¥UVåæ ‡æ˜¯å¦åº”ç”¨äº†æ­£ç¡®çš„å˜æ¢</li>
<li>éªŒè¯å±å¹•ä½ç½®æ˜¯å¦æ­£ç¡®è½¬æ¢ä¸ºçº¹ç†åæ ‡</li>
</ul>
<p><strong>Lodè®¾ç½®é—®é¢˜</strong></p>
<ul>
<li>ç¡®è®¤Lodå€¼åœ¨åˆç†èŒƒå›´å†…ï¼Œä¸ä¼šå¯¼è‡´é‡‡æ ·è¿‡ä½åˆ†è¾¨ç‡çš„Mipçº§åˆ«</li>
<li>æ£€æŸ¥Lodè®¡ç®—é€»è¾‘æ˜¯å¦æ­£ç¡®ï¼Œç‰¹åˆ«æ˜¯åŸºäºè·ç¦»æˆ–å¯¼æ•°çš„è®¡ç®—</li>
<li>éªŒè¯ä¸‰çº¿æ€§æ’å€¼æ˜¯å¦æŒ‰é¢„æœŸå·¥ä½œ</li>
</ul>
<p><strong>æ›å…‰ç›¸å…³é—®é¢˜</strong></p>
<ul>
<li>æ£€æŸ¥Exposureå±æ€§è®¾ç½®æ˜¯å¦ç¬¦åˆå½“å‰æ¸²æŸ“ä¸Šä¸‹æ–‡</li>
<li>éªŒè¯æ˜¯å¦å­˜åœ¨åŒé‡æ›å…‰é—®é¢˜</li>
<li>ç¡®è®¤é¢œè‰²ç©ºé—´è½¬æ¢æ˜¯å¦æ­£ç¡®å¤„ç†</li>
</ul>
<h3 data-id="heading-22">æ€§èƒ½é—®é¢˜</h3>
<p>å½“ä½¿ç”¨HD Scene ColorèŠ‚ç‚¹å¯¼è‡´æ€§èƒ½ä¸‹é™æ—¶ï¼Œå¯èƒ½çš„ä¼˜åŒ–æ–¹å‘ã€‚</p>
<p><strong>è¯†åˆ«ç“¶é¢ˆ</strong></p>
<ul>
<li>ä½¿ç”¨æ€§èƒ½åˆ†æå·¥å…·ç¡®å®šæ˜¯ALUç“¶é¢ˆè¿˜æ˜¯å†…å­˜å¸¦å®½ç“¶é¢ˆ</li>
<li>æ£€æŸ¥æ˜¯å¦æœ‰ä¸å¿…è¦çš„é‡å¤é‡‡æ ·æ“ä½œ</li>
<li>è¯„ä¼°é‡‡æ ·é¢‘ç‡æ˜¯å¦é«˜äºè§†è§‰æ•ˆæœæ‰€éœ€</li>
</ul>
<p><strong>ä¼˜åŒ–æ–¹æ¡ˆ</strong></p>
<ul>
<li>å‡å°‘å…¨å±é‡‡æ ·æ“ä½œçš„æ•°é‡å’Œé¢‘ç‡</li>
<li>ä½¿ç”¨è¾ƒä½åˆ†è¾¨ç‡çš„Mipçº§åˆ«ï¼Œç‰¹åˆ«æ˜¯åœ¨åå¤„ç†æ•ˆæœä¸­</li>
<li>è€ƒè™‘ä½¿ç”¨è¿‘ä¼¼æ–¹æ³•æ›¿ä»£ç²¾ç¡®é‡‡æ ·</li>
</ul>
<h3 data-id="heading-23">å¹³å°å…¼å®¹æ€§é—®é¢˜</h3>
<p>åœ¨ä¸åŒå¹³å°æˆ–æ¸²æŸ“è®¾ç½®ä¸‹ï¼ŒHD Scene ColorèŠ‚ç‚¹å¯èƒ½è¡¨ç°å‡ºä¸åŒè¡Œä¸ºã€‚</p>
<p><strong>æ¸²æŸ“ç®¡çº¿å·®å¼‚</strong></p>
<ul>
<li>ç¡®è®¤é¡¹ç›®ä½¿ç”¨çš„æ˜¯HDRPï¼Œå› ä¸ºHD Scene ColorèŠ‚ç‚¹åœ¨URPä¸­ä¸å¯ç”¨</li>
<li>æ£€æŸ¥HDRPç‰ˆæœ¬å’Œé…ç½®ï¼Œç¡®ä¿æ‰€æœ‰å¿…éœ€åŠŸèƒ½å·²å¯ç”¨</li>
<li>éªŒè¯é¢œè‰²ç¼“å†²åŒºå’ŒMipmapé“¾çš„å¯ç”¨æ€§</li>
</ul>
<p><strong>å¹³å°ç‰¹å®šè¡Œä¸º</strong></p>
<ul>
<li>åœ¨ä¸åŒå›¾å½¢APIï¼ˆDirectXã€Vulkanã€Metalï¼‰ä¸‹æµ‹è¯•ç€è‰²å™¨</li>
<li>æ£€æŸ¥ç§»åŠ¨å¹³å°ä¸Šçš„åŠŸèƒ½æ”¯æŒçº§åˆ«</li>
<li>éªŒè¯ç€è‰²å™¨å˜ä½“æ˜¯å¦ä¸ºç›®æ ‡å¹³å°æ­£ç¡®ç¼–è¯‘</li>
</ul>
<hr/>
<blockquote>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2Fchenghai37%2Fcategory_13074589.html%3Ffromshare%3Dblogcolumn%26sharetype%3Dblogcolumn%26sharerId%3D13074589%26sharerefer%3DPC%26sharesource%3Dchenghai37%26sharefrom%3Dfrom_link" target="_blank" title="https://blog.csdn.net/chenghai37/category_13074589.html?fromshare=blogcolumn&amp;sharetype=blogcolumn&amp;sharerId=13074589&amp;sharerefer=PC&amp;sharesource=chenghai37&amp;sharefrom=from_link" ref="nofollow noopener noreferrer">ã€Unity Shader Graph ä½¿ç”¨ä¸ç‰¹æ•ˆå®ç°ã€‘</a><strong>ä¸“æ -ç›´è¾¾</strong>
ï¼ˆæ¬¢è¿<em>ç‚¹èµç•™è¨€</em>æ¢è®¨ï¼Œæ›´å¤šäººåŠ å…¥è¿›æ¥èƒ½æ›´åŠ å®Œå–„è¿™ä¸ªæ¢ç´¢çš„è¿‡ç¨‹ï¼ŒğŸ™ï¼‰</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç”¨ Python 5 åˆ†é’Ÿæ­ä¸€ä¸ªå¤šæ¨¡å‹ AI API ç½‘å…³ï¼ˆé™„å®Œæ•´ä»£ç ï¼‰]]></title>    <link>https://juejin.cn/post/7604853010162253887</link>    <guid>https://juejin.cn/post/7604853010162253887</guid>    <pubDate>2026-02-10T01:07:27.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604853010162253887" data-draft-id="7604666872127520787" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç”¨ Python 5 åˆ†é’Ÿæ­ä¸€ä¸ªå¤šæ¨¡å‹ AI API ç½‘å…³ï¼ˆé™„å®Œæ•´ä»£ç ï¼‰"/> <meta itemprop="keywords" content="Python"/> <meta itemprop="datePublished" content="2026-02-10T01:07:27.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç è·¯é£"/> <meta itemprop="url" content="https://juejin.cn/user/186265609189227"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç”¨ Python 5 åˆ†é’Ÿæ­ä¸€ä¸ªå¤šæ¨¡å‹ AI API ç½‘å…³ï¼ˆé™„å®Œæ•´ä»£ç ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/186265609189227/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç è·¯é£
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-10T01:07:27.000Z" title="Tue Feb 10 2026 01:07:27 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>è¿˜åœ¨æ‰‹åŠ¨åˆ‡æ¢ OpenAIã€Claudeã€DeepSeek çš„ APIï¼Ÿå¤ªè ¢äº†ã€‚æœ¬æ–‡æ•™ä½ ç”¨ Python æ­ä¸€ä¸ªç»Ÿä¸€çš„ AI ç½‘å…³ï¼Œä¸€ä¸ªæ¥å£è°ƒæ‰€æœ‰æ¨¡å‹ï¼Œè‡ªåŠ¨æ•…éšœè½¬ç§»ï¼Œä»£ç ä¸åˆ° 100 è¡Œã€‚</p>
</blockquote>
<h2 data-id="heading-0">ä¸ºä»€ä¹ˆéœ€è¦ AI API ç½‘å…³ï¼Ÿ</h2>
<p>å¦‚æœä½ åœ¨åš AI åº”ç”¨å¼€å‘ï¼Œå¤§æ¦‚ç‡é‡åˆ°è¿‡è¿™äº›é—®é¢˜ï¼š</p>
<ul>
<li>OpenAI æŠ½é£äº†ï¼ŒæœåŠ¡æŒ‚äº† 2 å°æ—¶ï¼Œä½ çš„åº”ç”¨è·Ÿç€æŒ‚</li>
<li>DeepSeek å‘å¸ƒæ–°ç‰ˆæœ¬ï¼ŒAPI è¿‡è½½ï¼Œè¯·æ±‚å…¨è¶…æ—¶</li>
<li>è€æ¿çªç„¶è¯´"æˆ‘ä»¬è¯•è¯• Claude"ï¼Œä½ å¾—æ”¹ä¸€å †ä»£ç </li>
<li>ä¸åŒæ¨¡å‹çš„ API æ ¼å¼ä¸ä¸€æ ·ï¼Œé€‚é…èµ·æ¥å¤´ç–¼</li>
</ul>
<p><strong>è¿™äº›é—®é¢˜çš„æœ¬è´¨æ˜¯ï¼šä½ çš„åº”ç”¨ç›´æ¥è€¦åˆäº†æŸä¸ªå…·ä½“çš„æ¨¡å‹ APIã€‚</strong></p>
<p>è§£å†³æ–¹æ¡ˆå¾ˆç®€å•â€”â€”åœ¨ä½ çš„åº”ç”¨å’Œæ¨¡å‹ä¹‹é—´åŠ ä¸€å±‚ç½‘å…³ï¼Œç»Ÿä¸€æ¥å£ã€è‡ªåŠ¨è·¯ç”±ã€æ•…éšœè½¬ç§»ã€‚</p>
<h2 data-id="heading-1">å®Œæ•´ä»£ç ï¼š100 è¡Œçš„ AI ç½‘å…³</h2>
<p>ç›´æ¥ä¸Šä»£ç ï¼ŒPython + FastAPIï¼Œèƒ½è·‘çš„é‚£ç§ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> os
<span class="hljs-keyword">import</span> time
<span class="hljs-keyword">import</span> httpx
<span class="hljs-keyword">import</span> asyncio
<span class="hljs-keyword">from</span> fastapi <span class="hljs-keyword">import</span> FastAPI, Request
<span class="hljs-keyword">from</span> fastapi.responses <span class="hljs-keyword">import</span> JSONResponse

app = FastAPI(title=<span class="hljs-string">"AI API Gateway"</span>)

<span class="hljs-comment"># æ¨¡å‹é…ç½®ï¼šæŒ‰ä¼˜å…ˆçº§æ’åˆ—</span>
MODEL_PROVIDERS = [
    {
        <span class="hljs-string">"name"</span>: <span class="hljs-string">"deepseek"</span>,
        <span class="hljs-string">"base_url"</span>: <span class="hljs-string">"https://api.deepseek.com/v1"</span>,
        <span class="hljs-string">"api_key"</span>: os.getenv(<span class="hljs-string">"DEEPSEEK_API_KEY"</span>, <span class="hljs-string">""</span>),
        <span class="hljs-string">"model"</span>: <span class="hljs-string">"deepseek-chat"</span>,
        <span class="hljs-string">"timeout"</span>: <span class="hljs-number">30</span>,
        <span class="hljs-string">"max_retries"</span>: <span class="hljs-number">2</span>,
    },
    {
        <span class="hljs-string">"name"</span>: <span class="hljs-string">"openai"</span>,
        <span class="hljs-string">"base_url"</span>: <span class="hljs-string">"https://api.openai.com/v1"</span>,
        <span class="hljs-string">"api_key"</span>: os.getenv(<span class="hljs-string">"OPENAI_API_KEY"</span>, <span class="hljs-string">""</span>),
        <span class="hljs-string">"model"</span>: <span class="hljs-string">"gpt-4o-mini"</span>,
        <span class="hljs-string">"timeout"</span>: <span class="hljs-number">30</span>,
        <span class="hljs-string">"max_retries"</span>: <span class="hljs-number">1</span>,
    },
    {
        <span class="hljs-string">"name"</span>: <span class="hljs-string">"anthropic"</span>,
        <span class="hljs-string">"base_url"</span>: <span class="hljs-string">"https://api.anthropic.com/v1"</span>,
        <span class="hljs-string">"api_key"</span>: os.getenv(<span class="hljs-string">"ANTHROPIC_API_KEY"</span>, <span class="hljs-string">""</span>),
        <span class="hljs-string">"model"</span>: <span class="hljs-string">"claude-3-5-sonnet-20241022"</span>,
        <span class="hljs-string">"timeout"</span>: <span class="hljs-number">30</span>,
        <span class="hljs-string">"max_retries"</span>: <span class="hljs-number">1</span>,
    },
]

<span class="hljs-comment"># å¥åº·çŠ¶æ€è¿½è¸ª</span>
provider_health = {p[<span class="hljs-string">"name"</span>]: {<span class="hljs-string">"healthy"</span>: <span class="hljs-literal">True</span>, <span class="hljs-string">"last_fail"</span>: <span class="hljs-number">0</span>} <span class="hljs-keyword">for</span> p <span class="hljs-keyword">in</span> MODEL_PROVIDERS}
COOLDOWN_SECONDS = <span class="hljs-number">60</span>  <span class="hljs-comment"># æ•…éšœå†·å´æ—¶é—´</span>


<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">call_provider</span>(<span class="hljs-params">provider: <span class="hljs-built_in">dict</span>, messages: <span class="hljs-built_in">list</span></span>) -&gt; <span class="hljs-built_in">dict</span>:
    <span class="hljs-string">"""è°ƒç”¨å•ä¸ªæ¨¡å‹ä¾›åº”å•†"""</span>
    headers = {
        <span class="hljs-string">"Authorization"</span>: <span class="hljs-string">f"Bearer <span class="hljs-subst">{provider[<span class="hljs-string">'api_key'</span>]}</span>"</span>,
        <span class="hljs-string">"Content-Type"</span>: <span class="hljs-string">"application/json"</span>,
    }

    <span class="hljs-comment"># Anthropic çš„ API æ ¼å¼ç•¥æœ‰ä¸åŒ</span>
    <span class="hljs-keyword">if</span> provider[<span class="hljs-string">"name"</span>] == <span class="hljs-string">"anthropic"</span>:
        headers = {
            <span class="hljs-string">"x-api-key"</span>: provider[<span class="hljs-string">"api_key"</span>],
            <span class="hljs-string">"anthropic-version"</span>: <span class="hljs-string">"2023-06-01"</span>,
            <span class="hljs-string">"Content-Type"</span>: <span class="hljs-string">"application/json"</span>,
        }
        payload = {
            <span class="hljs-string">"model"</span>: provider[<span class="hljs-string">"model"</span>],
            <span class="hljs-string">"max_tokens"</span>: <span class="hljs-number">4096</span>,
            <span class="hljs-string">"messages"</span>: messages,
        }
        url = <span class="hljs-string">f"<span class="hljs-subst">{provider[<span class="hljs-string">'base_url'</span>]}</span>/messages"</span>
    <span class="hljs-keyword">else</span>:
        payload = {
            <span class="hljs-string">"model"</span>: provider[<span class="hljs-string">"model"</span>],
            <span class="hljs-string">"messages"</span>: messages,
            <span class="hljs-string">"max_tokens"</span>: <span class="hljs-number">4096</span>,
        }
        url = <span class="hljs-string">f"<span class="hljs-subst">{provider[<span class="hljs-string">'base_url'</span>]}</span>/chat/completions"</span>

    <span class="hljs-keyword">async</span> <span class="hljs-keyword">with</span> httpx.AsyncClient(timeout=provider[<span class="hljs-string">"timeout"</span>]) <span class="hljs-keyword">as</span> client:
        resp = <span class="hljs-keyword">await</span> client.post(url, json=payload, headers=headers)
        resp.raise_for_status()
        <span class="hljs-keyword">return</span> resp.json()


<span class="hljs-keyword">def</span> <span class="hljs-title function_">normalize_response</span>(<span class="hljs-params">provider_name: <span class="hljs-built_in">str</span>, raw: <span class="hljs-built_in">dict</span></span>) -&gt; <span class="hljs-built_in">dict</span>:
    <span class="hljs-string">"""ç»Ÿä¸€ä¸åŒä¾›åº”å•†çš„å“åº”æ ¼å¼"""</span>
    <span class="hljs-keyword">if</span> provider_name == <span class="hljs-string">"anthropic"</span>:
        content = raw.get(<span class="hljs-string">"content"</span>, [{}])[<span class="hljs-number">0</span>].get(<span class="hljs-string">"text"</span>, <span class="hljs-string">""</span>)
        model = raw.get(<span class="hljs-string">"model"</span>, <span class="hljs-string">""</span>)
    <span class="hljs-keyword">else</span>:
        content = raw[<span class="hljs-string">"choices"</span>][<span class="hljs-number">0</span>][<span class="hljs-string">"message"</span>][<span class="hljs-string">"content"</span>]
        model = raw.get(<span class="hljs-string">"model"</span>, <span class="hljs-string">""</span>)

    <span class="hljs-keyword">return</span> {
        <span class="hljs-string">"content"</span>: content,
        <span class="hljs-string">"model"</span>: model,
        <span class="hljs-string">"provider"</span>: provider_name,
    }


<span class="hljs-meta">@app.post(<span class="hljs-params"><span class="hljs-string">"/v1/chat"</span></span>)</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">chat</span>(<span class="hljs-params">request: Request</span>):
    <span class="hljs-string">"""ç»Ÿä¸€èŠå¤©æ¥å£â€”â€”è‡ªåŠ¨è·¯ç”±åˆ°å¯ç”¨çš„æ¨¡å‹"""</span>
    body = <span class="hljs-keyword">await</span> request.json()
    messages = body.get(<span class="hljs-string">"messages"</span>, [])
    preferred = body.get(<span class="hljs-string">"provider"</span>, <span class="hljs-literal">None</span>)  <span class="hljs-comment"># å¯é€‰ï¼šæŒ‡å®šä¾›åº”å•†</span>

    errors = []

    <span class="hljs-keyword">for</span> provider <span class="hljs-keyword">in</span> MODEL_PROVIDERS:
        name = provider[<span class="hljs-string">"name"</span>]
        health = provider_health[name]

        <span class="hljs-comment"># è·³è¿‡æŒ‡å®šä¾›åº”å•†ä»¥å¤–çš„</span>
        <span class="hljs-keyword">if</span> preferred <span class="hljs-keyword">and</span> name != preferred:
            <span class="hljs-keyword">continue</span>

        <span class="hljs-comment"># è·³è¿‡å†·å´ä¸­çš„ä¾›åº”å•†</span>
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> health[<span class="hljs-string">"healthy"</span>] <span class="hljs-keyword">and</span> time.time() - health[<span class="hljs-string">"last_fail"</span>] &lt; COOLDOWN_SECONDS:
            <span class="hljs-keyword">continue</span>

        <span class="hljs-keyword">try</span>:
            raw = <span class="hljs-keyword">await</span> call_provider(provider, messages)
            provider_health[name][<span class="hljs-string">"healthy"</span>] = <span class="hljs-literal">True</span>
            <span class="hljs-keyword">return</span> JSONResponse(normalize_response(name, raw))

        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
            provider_health[name] = {<span class="hljs-string">"healthy"</span>: <span class="hljs-literal">False</span>, <span class="hljs-string">"last_fail"</span>: time.time()}
            errors.append(<span class="hljs-string">f"<span class="hljs-subst">{name}</span>: <span class="hljs-subst">{<span class="hljs-built_in">str</span>(e)}</span>"</span>)
            <span class="hljs-keyword">continue</span>

    <span class="hljs-keyword">return</span> JSONResponse(
        {<span class="hljs-string">"error"</span>: <span class="hljs-string">"All providers failed"</span>, <span class="hljs-string">"details"</span>: errors},
        status_code=<span class="hljs-number">503</span>,
    )


<span class="hljs-meta">@app.get(<span class="hljs-params"><span class="hljs-string">"/health"</span></span>)</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">health</span>():
    <span class="hljs-string">"""æŸ¥çœ‹å„ä¾›åº”å•†å¥åº·çŠ¶æ€"""</span>
    <span class="hljs-keyword">return</span> {name: info <span class="hljs-keyword">for</span> name, info <span class="hljs-keyword">in</span> provider_health.items()}
</code></pre>
<h2 data-id="heading-2">æ€ä¹ˆç”¨</h2>
<h3 data-id="heading-3">1. å®‰è£…ä¾èµ–</h3>
<pre><code class="hljs language-bash" lang="bash">pip install fastapi uvicorn httpx
</code></pre>
<h3 data-id="heading-4">2. è®¾ç½® API Key</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">export</span> DEEPSEEK_API_KEY=<span class="hljs-string">"sk-xxx"</span>
<span class="hljs-built_in">export</span> OPENAI_API_KEY=<span class="hljs-string">"sk-xxx"</span>
<span class="hljs-built_in">export</span> ANTHROPIC_API_KEY=<span class="hljs-string">"sk-xxx"</span>
</code></pre>
<h3 data-id="heading-5">3. å¯åŠ¨</h3>
<pre><code class="hljs language-bash" lang="bash">uvicorn gateway:app --port 8000
</code></pre>
<h3 data-id="heading-6">4. è°ƒç”¨</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># è‡ªåŠ¨è·¯ç”±ï¼ˆä¼˜å…ˆ DeepSeekï¼Œå¤±è´¥è‡ªåŠ¨åˆ‡æ¢ï¼‰</span>
curl -X POST http://localhost:8000/v1/chat \
  -H <span class="hljs-string">"Content-Type: application/json"</span> \
  -d <span class="hljs-string">'{"messages": [{"role": "user", "content": "ä½ å¥½"}]}'</span>

<span class="hljs-comment"># æŒ‡å®šä¾›åº”å•†</span>
curl -X POST http://localhost:8000/v1/chat \
  -H <span class="hljs-string">"Content-Type: application/json"</span> \
  -d <span class="hljs-string">'{"messages": [{"role": "user", "content": "ä½ å¥½"}], "provider": "openai"}'</span>

<span class="hljs-comment"># æŸ¥çœ‹å¥åº·çŠ¶æ€</span>
curl http://localhost:8000/health
</code></pre>
<h2 data-id="heading-7">æ ¸å¿ƒè®¾è®¡æ€è·¯</h2>
<h3 data-id="heading-8">1. ä¼˜å…ˆçº§è·¯ç”±</h3>
<p><code>MODEL_PROVIDERS</code> æ•°ç»„çš„é¡ºåºå°±æ˜¯ä¼˜å…ˆçº§ã€‚DeepSeek æ’ç¬¬ä¸€æ˜¯å› ä¸ºæ€§ä»·æ¯”æœ€é«˜ï¼ŒOpenAI å’Œ Claude ä½œä¸ºå¤‡ç”¨ã€‚</p>
<h3 data-id="heading-9">2. è‡ªåŠ¨æ•…éšœè½¬ç§»</h3>
<p>æŸä¸ªä¾›åº”å•†æŠ¥é”™åï¼Œæ ‡è®°ä¸º"ä¸å¥åº·"å¹¶è¿›å…¥ 60 ç§’å†·å´æœŸã€‚åœ¨æ­¤æœŸé—´è·³è¿‡è¯¥ä¾›åº”å•†ï¼Œç›´æ¥å°è¯•ä¸‹ä¸€ä¸ªã€‚å†·å´ç»“æŸåè‡ªåŠ¨æ¢å¤ã€‚</p>
<h3 data-id="heading-10">3. å“åº”æ ¼å¼ç»Ÿä¸€</h3>
<p>ä¸ç®¡åç«¯ç”¨çš„æ˜¯å“ªä¸ªæ¨¡å‹ï¼Œè¿”å›æ ¼å¼éƒ½æ˜¯ç»Ÿä¸€çš„ <code>{content, model, provider}</code>ï¼Œè°ƒç”¨æ–¹å®Œå…¨ä¸éœ€è¦å…³å¿ƒåº•å±‚ç”¨çš„æ˜¯è°ã€‚</p>
<h2 data-id="heading-11">è¿›é˜¶ä¼˜åŒ–æ–¹å‘</h2>
<p>è¿™ä¸ª 100 è¡Œç‰ˆæœ¬æ˜¯æœ€å°å¯ç”¨ç‰ˆã€‚ç”Ÿäº§ç¯å¢ƒä¸­ä½ å¯èƒ½è¿˜éœ€è¦ï¼š</p>

































<table><thead><tr><th>åŠŸèƒ½</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>æµå¼å“åº”</td><td>SSE æ”¯æŒï¼Œå®ç°æ‰“å­—æœºæ•ˆæœ</td></tr><tr><td>è¯·æ±‚æ—¥å¿—</td><td>è®°å½•æ¯æ¬¡è¯·æ±‚çš„æ¨¡å‹ã€è€—æ—¶ã€token æ•°</td></tr><tr><td>æˆæœ¬è¿½è¸ª</td><td>æŒ‰ token è®¡è´¹ï¼Œç»Ÿè®¡å„æ¨¡å‹èŠ±è´¹</td></tr><tr><td>è´Ÿè½½å‡è¡¡</td><td>å¤šä¸ª API Key è½®è¯¢ï¼Œé¿å…å• Key é™æµ</td></tr><tr><td>ç¼“å­˜å±‚</td><td>ç›¸åŒè¯·æ±‚å‘½ä¸­ç¼“å­˜ï¼Œçœé’±åˆå¿«</td></tr><tr><td>é‰´æƒ</td><td>ç»™ç½‘å…³åŠ  API Keyï¼Œé˜²æ­¢æ»¥ç”¨</td></tr></tbody></table>
<p>å¦‚æœä½ ä¸æƒ³è‡ªå·±é€ è½®å­ï¼Œå¸‚é¢ä¸Šä¹Ÿæœ‰ç°æˆçš„æ¨¡å‹èšåˆæ–¹æ¡ˆï¼š</p>
<ul>
<li><strong>OpenRouter</strong>ï¼šå›½å¤–ä¸»æµï¼Œæ¨¡å‹å¤šï¼Œä½†å›½å†…è®¿é—®ä¸ç¨³å®š</li>
<li><strong>Ofox.ai</strong>ï¼šå›½å†…å¯ç›´æ¥ç”¨ï¼Œæ”¯æŒä¸»æµæ¨¡å‹ï¼Œé€‚åˆå›½å†…å¼€å‘è€…</li>
<li><strong>One-API / New-API</strong>ï¼šå¼€æºè‡ªå»ºæ–¹æ¡ˆï¼Œéœ€è¦è‡ªå·±éƒ¨ç½²ç»´æŠ¤</li>
</ul>
<h2 data-id="heading-12">æ€»ç»“</h2>
<p>æ­ä¸€ä¸ª AI API ç½‘å…³å¹¶ä¸éš¾ï¼Œæ ¸å¿ƒå°±ä¸‰ä»¶äº‹ï¼š<strong>ç»Ÿä¸€æ¥å£ã€è‡ªåŠ¨è·¯ç”±ã€æ•…éšœè½¬ç§»</strong>ã€‚</p>
<p>100 è¡Œä»£ç å°±èƒ½è§£å†³ 90% çš„åœºæ™¯ã€‚å‰©ä¸‹çš„ 10%ï¼ˆæµå¼ã€ç¼“å­˜ã€ç›‘æ§ï¼‰ï¼Œè¦ä¹ˆè‡ªå·±åŠ ï¼Œè¦ä¹ˆç”¨ç°æˆçš„èšåˆå¹³å°ã€‚</p>
<p>é‡ç‚¹æ˜¯ï¼š<strong>åˆ«è®©ä½ çš„åº”ç”¨è·Ÿä»»ä½•ä¸€ä¸ªæ¨¡å‹ä¾›åº”å•†ç»‘æ­»</strong>ã€‚ä»Šå¤© DeepSeek æœ€å¼ºï¼Œæ˜å¤©å¯èƒ½æ˜¯åˆ«äººã€‚ä¿æŒçµæ´»ï¼Œæ‰èƒ½æ°¸è¿œç”¨ä¸Šæœ€å¥½çš„ã€‚</p>
<hr/>
<p><em>è§‰å¾—æœ‰ç”¨ï¼Ÿç‚¹ä¸ªèµæ”¶ä¸ªè—ï¼Œè¿™æ˜¯æˆ‘ç»§ç»­å†™çš„æœ€å¤§åŠ¨åŠ›ã€‚æœ‰é—®é¢˜è¯„è®ºåŒºè§ã€‚</em></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ·±åº¦åˆ†æ RocketMQ å¹‚ç­‰æ€§è®¾è®¡ä¸ç”Ÿäº§çº§å®ç°æ–¹æ¡ˆ]]></title>    <link>https://juejin.cn/post/7604665952320274483</link>    <guid>https://juejin.cn/post/7604665952320274483</guid>    <pubDate>2026-02-09T19:39:54.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604665952320274483" data-draft-id="7604690250363813897" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ·±åº¦åˆ†æ RocketMQ å¹‚ç­‰æ€§è®¾è®¡ä¸ç”Ÿäº§çº§å®ç°æ–¹æ¡ˆ"/> <meta itemprop="keywords" content="RocketMQ,åç«¯,è®¾è®¡"/> <meta itemprop="datePublished" content="2026-02-09T19:39:54.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸‰æ°´ä¸æ»´"/> <meta itemprop="url" content="https://juejin.cn/user/283045639753100"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ·±åº¦åˆ†æ RocketMQ å¹‚ç­‰æ€§è®¾è®¡ä¸ç”Ÿäº§çº§å®ç°æ–¹æ¡ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/283045639753100/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸‰æ°´ä¸æ»´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-09T19:39:54.000Z" title="Mon Feb 09 2026 19:39:54 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    6
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æ·±åº¦åˆ†æ RocketMQ å¹‚ç­‰æ€§è®¾è®¡ä¸ç”Ÿäº§çº§å®ç°æ–¹æ¡ˆ</h2>
<h3 data-id="heading-1">ä¸€ã€å‰è¨€</h3>
<p>åœ¨ä½¿ç”¨ RocketMQ æ—¶ï¼Œæˆ‘ä»¬å¿…é¡»é¢å¯¹ä¸€ä¸ªäº‹å®ï¼š<strong>RocketMQ åªä¿è¯ At Least Onceï¼ˆè‡³å°‘æŠ•é€’ä¸€æ¬¡ï¼‰ï¼Œä¸ä¿è¯ Exactly Onceï¼ˆç²¾ç¡®ä¸€æ¬¡ï¼‰ã€‚</strong></p>
<p>è¿™æ„å‘³ç€ï¼š<strong>æ¶ˆæ¯é‡å¤æ˜¯å¿…ç„¶çš„ï¼Œä¸æ˜¯å¶ç„¶çš„</strong>ã€‚å¦‚æœä¸åšå¹‚ç­‰å¤„ç†ï¼Œå°±ä¼šå‡ºç°ï¼š</p>
<ul>
<li>é‡å¤ä¸‹å•</li>
<li>é‡å¤æ‰£æ¬¾</li>
<li>é‡å¤æ’å…¥æ•°æ®</li>
<li>æ•°æ®ä¸ä¸€è‡´</li>
</ul>
<p>æœ¬æ–‡ä»<strong>é‡å¤åŸå›  â†’ è®¾è®¡åŸåˆ™ â†’ äº”å¤§å®ç°æ–¹æ¡ˆ â†’ ç”Ÿäº§æœ€ä½³å®è·µ</strong>ï¼ŒæŠŠ RocketMQ å¹‚ç­‰æ€§è®²é€ã€‚</p>
<hr/>
<h3 data-id="heading-2">äºŒã€ä¸ºä»€ä¹ˆ RocketMQ ä¼šå‡ºç°é‡å¤æ¶ˆæ¯ï¼Ÿ</h3>
<p>æ¶ˆæ¯é‡å¤ä¸»è¦å‘ç”Ÿåœ¨è¿™å‡ ä¸ªåœºæ™¯ï¼š</p>
<ol>
<li><strong>Producer é‡è¯•å‘é€</strong>ç½‘ç»œè¶…æ—¶ã€å¼‚å¸¸ã€Broker å“åº”ä¸¢å¤±ï¼Œéƒ½ä¼šè§¦å‘é‡è¯•ã€‚</li>
<li><strong>Broker é‡è¯•æŠ•é€’</strong>æ¶ˆè´¹å¤±è´¥ã€è¶…æ—¶ã€æ–­å¼€è¿æ¥ â†’ è¿›å…¥é‡è¯•é˜Ÿåˆ—ã€‚</li>
<li><strong>Rebalance é‡å¹³è¡¡</strong>æ‰©å®¹ã€ç¼©å®¹ã€é‡å¯å¯¼è‡´é˜Ÿåˆ—é‡æ–°åˆ†é…ã€‚</li>
<li><strong>Consumer æå‰ ACK</strong>ä¸šåŠ¡æ²¡æ‰§è¡Œå®Œå°±è¿”å›æˆåŠŸï¼Œé‡å¯åæ¶ˆæ¯å†æ¬¡æŠ•é€’ã€‚</li>
</ol>
<p><strong>ç»“è®ºï¼š<strong>RocketMQ <strong>æœ¬èº«ä¸åšå»é‡</strong>ï¼Œå»é‡å¿…é¡»ç”±</strong>ä¸šåŠ¡å±‚å®ç°å¹‚ç­‰</strong>ã€‚</p>
<hr/>
<h3 data-id="heading-3">ä¸‰ã€ä»€ä¹ˆæ˜¯å¹‚ç­‰ï¼Ÿ</h3>
<p><strong>å¹‚ç­‰ï¼šåŒä¸€ä¸ªæ¶ˆæ¯æ‰§è¡Œä¸€æ¬¡ä¸æ‰§è¡Œå¤šæ¬¡ï¼Œç»“æœå®Œå…¨ä¸€è‡´ã€‚</strong></p>
<p>æ»¡è¶³ï¼š</p>
<ul>
<li>é‡å¤æ¶ˆæ¯ä¸æŠ¥é”™</li>
<li>é‡å¤æ¶ˆæ¯ä¸äº§ç”Ÿè„æ•°æ®</li>
<li>é‡å¤æ¶ˆæ¯è¿”å›æˆåŠŸ</li>
</ul>
<hr/>
<h3 data-id="heading-4">å››ã€RocketMQ å¹‚ç­‰è®¾è®¡æ ¸å¿ƒæ€è·¯</h3>
<p>å®ç°å¹‚ç­‰åªéœ€è¦æŠ“ä½ä¸€ç‚¹ï¼š<strong>è¯†åˆ«è¿™æ¡æ¶ˆæ¯æ˜¯å¦å·²ç»è¢«å¤„ç†è¿‡ã€‚</strong></p>
<p>å…³é”®æ ‡è¯†ï¼š</p>
<ol>
<li><strong>msgId</strong>ï¼šBroker ç”Ÿæˆçš„å”¯ä¸€ ID</li>
<li><strong>offsetMsgId</strong>ï¼šåŸºäºç‰©ç†åç§»çš„ ID</li>
<li><strong>keys</strong>ï¼šä¸šåŠ¡å”¯ä¸€æ ‡è¯†ï¼ˆ<strong>æœ€æ¨è</strong>ï¼Œå¦‚è®¢å•å·ã€æµæ°´å·ï¼‰</li>
</ol>
<p><strong>æœ€ä½³å®è·µï¼šä¼˜å…ˆä½¿ç”¨ä¸šåŠ¡å”¯ä¸€é”®ã€‚</strong></p>
<hr/>
<h3 data-id="heading-5">äº”ã€ç”Ÿäº§çº§å¹‚ç­‰äº”å¤§æ–¹æ¡ˆï¼ˆä»ç®€å•åˆ°æ¨èï¼‰</h3>
<h4 data-id="heading-6">æ–¹æ¡ˆ 1ï¼šæ•°æ®åº“å”¯ä¸€ç´¢å¼•ï¼ˆæœ€ç®€å•ã€æœ€ç¨³å®šï¼‰</h4>
<p>é€‚ç”¨åœºæ™¯ï¼šinsert ç±»ä¸šåŠ¡ï¼ˆè®¢å•ã€æµæ°´ã€æ—¥å¿—ï¼‰</p>
<p>æ€è·¯ï¼šåˆ©ç”¨æ•°æ®åº“å”¯ä¸€ç´¢å¼•çº¦æŸï¼Œé‡å¤æ’å…¥ä¼šæŠ¥é”™ï¼Œæ•è·åè§†ä¸ºæˆåŠŸã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">try</span> {
    orderMapper.insert(order);
} <span class="hljs-keyword">catch</span> (DuplicateKeyException e) {
    log.info(<span class="hljs-string">"è®¢å•å·²å­˜åœ¨ï¼Œå¹‚ç­‰å¤„ç†ï¼š{}"</span>, orderNo);
}
<span class="hljs-keyword">return</span> ConsumeConcurrentlyStatus.CONSUME_SUCCESS;
</code></pre>
<p>ä¼˜ç‚¹ï¼š</p>
<ul>
<li>å®ç°æœ€ç®€å•</li>
<li>å¤©ç„¶å¹¶å‘å®‰å…¨</li>
<li>æ— é¢å¤–ä¸­é—´ä»¶</li>
</ul>
<p>ç¼ºç‚¹ï¼š</p>
<ul>
<li>åªé€‚ç”¨äºæ’å…¥åœºæ™¯</li>
</ul>
<hr/>
<h4 data-id="heading-7">æ–¹æ¡ˆ 2ï¼šå»é‡è¡¨ + äº‹åŠ¡ï¼ˆé€šç”¨å¼ºä¸€è‡´ï¼‰</h4>
<p>é€‚ç”¨åœºæ™¯ï¼šå¤šè¡¨æ“ä½œã€æ— æ³•åŠ å”¯ä¸€ç´¢å¼•</p>
<p>å»ºè¡¨ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> message_idempotent (
    id <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">PRIMARY</span> KEY AUTO_INCREMENT,
    message_key <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">64</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">UNIQUE</span>,
    create_time DATETIME
);
</code></pre>
<p>é€»è¾‘ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Transactional(rollbackFor = Exception.class)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleMessage</span><span class="hljs-params">(String key)</span> {
    <span class="hljs-comment">// æ’å…¥å»é‡è¡¨</span>
    <span class="hljs-type">int</span> <span class="hljs-variable">rows</span> <span class="hljs-operator">=</span> idempotentMapper.insertIgnore(key);
    <span class="hljs-keyword">if</span> (rows == <span class="hljs-number">0</span>) {
        <span class="hljs-comment">// å·²å¤„ç†</span>
        <span class="hljs-keyword">return</span>;
    }
    <span class="hljs-comment">// æ‰§è¡Œä¸šåŠ¡é€»è¾‘</span>
}
</code></pre>
<p>ä¼˜ç‚¹ï¼š</p>
<ul>
<li>é€šç”¨ã€å¼ºä¸€è‡´</li>
<li>ä¸ä¸šåŠ¡äº‹åŠ¡ç»‘å®š</li>
</ul>
<hr/>
<h4 data-id="heading-8">æ–¹æ¡ˆ 3ï¼šRedis åˆ†å¸ƒå¼é”ï¼ˆé«˜å¹¶å‘é¦–é€‰ï¼‰</h4>
<p>é€‚ç”¨åœºæ™¯ï¼šé«˜å¹¶å‘ã€æ›´æ–°æ“ä½œã€å¤šæœåŠ¡å®ä¾‹</p>
<p>ä»¥ <code>messageKey</code> ä½œä¸ºé”æ ‡è¯†ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">String</span> <span class="hljs-variable">key</span> <span class="hljs-operator">=</span> <span class="hljs-string">"mq:idempotent:"</span> + messageKey;
<span class="hljs-type">Boolean</span> <span class="hljs-variable">lock</span> <span class="hljs-operator">=</span> redisTemplate.opsForValue()
        .setIfAbsent(key, <span class="hljs-string">"handled"</span>, <span class="hljs-number">24</span>, TimeUnit.HOURS);

<span class="hljs-keyword">if</span> (Boolean.FALSE.equals(lock)) {
    <span class="hljs-keyword">return</span> CONSUME_SUCCESS;
}
<span class="hljs-comment">// æ‰§è¡Œä¸šåŠ¡</span>
</code></pre>
<p>ä¼˜ç‚¹ï¼š</p>
<ul>
<li>æ€§èƒ½æé«˜</li>
<li>é€‚åˆé«˜å¹¶å‘æ›´æ–°</li>
</ul>
<p>æ³¨æ„ï¼š</p>
<ul>
<li>è¿‡æœŸæ—¶é—´è¦è¶³å¤Ÿé•¿ï¼ˆâ‰¥24hï¼‰</li>
<li>ä¸è¦ä½¿ç”¨è‡ªåŠ¨ç»­æœŸ</li>
</ul>
<hr/>
<h4 data-id="heading-9">æ–¹æ¡ˆ 4ï¼šçŠ¶æ€æœºå¹‚ç­‰ï¼ˆæœ€ä¼˜é›…ã€ä¼ä¸šæœ€çˆ±ï¼‰</h4>
<p>é€‚ç”¨åœºæ™¯ï¼šè®¢å•ã€æ”¯ä»˜ã€ç‰©æµç­‰çŠ¶æ€æµè½¬</p>
<p>ä¾‹å¦‚è®¢å•çŠ¶æ€ï¼šå¾…æ”¯ä»˜ â†’ å·²æ”¯ä»˜ â†’ å·²å®Œæˆ</p>
<p>æ¶ˆè´¹æ—¶ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">UPDATE</span> <span class="hljs-keyword">order</span>
<span class="hljs-keyword">SET</span> status <span class="hljs-operator">=</span> <span class="hljs-number">2</span>
<span class="hljs-keyword">WHERE</span> order_no <span class="hljs-operator">=</span> ? <span class="hljs-keyword">AND</span> status <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;
</code></pre>
<ul>
<li>å½±å“è¡Œæ•° = 1 â†’ ç¬¬ä¸€æ¬¡å¤„ç†</li>
<li>å½±å“è¡Œæ•° = 0 â†’ é‡å¤æ¶ˆæ¯ï¼Œç›´æ¥è¿”å›æˆåŠŸ</li>
</ul>
<p>ä¼˜ç‚¹ï¼š</p>
<ul>
<li>æ— é”ã€é«˜æ€§èƒ½</li>
<li>å¤©ç„¶å¹‚ç­‰</li>
<li>ä¸šåŠ¡è¯­ä¹‰æ¸…æ™°</li>
</ul>
<p><strong>ç”Ÿäº§ç¯å¢ƒæœ€æ¨èæ–¹æ¡ˆã€‚</strong></p>
<hr/>
<h4 data-id="heading-10">æ–¹æ¡ˆ 5ï¼šä¸šåŠ¡å”¯ä¸€æ ‡è¯† + æœ¬åœ°è¡¨ + Redis å¤šçº§é˜²å¾¡</h4>
<p>é€‚ç”¨åœºæ™¯ï¼šé‡‘èã€æ”¯ä»˜æ ¸å¿ƒé“¾è·¯</p>
<p>æµç¨‹ï¼š</p>
<ol>
<li>ç”¨ä¸šåŠ¡å”¯ä¸€å·åš Redis å»é‡</li>
<li>ç”¨å»é‡è¡¨åšæŒä¹…åŒ–</li>
<li>ç”¨çŠ¶æ€æœºä¿è¯å®‰å…¨</li>
</ol>
<p>è¶…é«˜å¯é ã€‚</p>
<hr/>
<h3 data-id="heading-11">å…­ã€RocketMQ æ¶ˆè´¹ç«¯å¹‚ç­‰ç¼–ç æ¨¡æ¿</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Override</span>
<span class="hljs-keyword">public</span> ConsumeConcurrentlyStatus <span class="hljs-title function_">consumeMessage</span><span class="hljs-params">(
        List&lt;MessageExt&gt; msgs, ConsumeConcurrentlyContext context)</span> {
    <span class="hljs-keyword">for</span> (MessageExt msg : msgs) {
        <span class="hljs-type">String</span> <span class="hljs-variable">key</span> <span class="hljs-operator">=</span> msg.getKeys(); <span class="hljs-comment">// ä¸šåŠ¡å”¯ä¸€é”®</span>
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// 1. å¹‚ç­‰åˆ¤æ–­ï¼šæ˜¯å¦å·²å¤„ç†</span>
            <span class="hljs-keyword">if</span> (idempotentService.isProcessed(key)) {
                <span class="hljs-keyword">continue</span>;
            }
            <span class="hljs-comment">// 2. ä¸šåŠ¡å¤„ç†</span>
            businessService.handle(msg);
            <span class="hljs-comment">// 3. æ ‡è®°å·²å¤„ç†</span>
            idempotentService.markProcessed(key);
        } <span class="hljs-keyword">catch</span> (Exception e) {
            log.error(<span class="hljs-string">"æ¶ˆè´¹å¼‚å¸¸"</span>, e);
            <span class="hljs-comment">// å¼‚å¸¸ â†’ é‡è¯•</span>
            <span class="hljs-keyword">return</span> ConsumeConcurrentlyStatus.RECONSUME_LATER;
        }
    }
    <span class="hljs-keyword">return</span> ConsumeConcurrentlyStatus.CONSUME_SUCCESS;
}
</code></pre>
<hr/>
<h3 data-id="heading-12">ä¸ƒã€å¹‚ç­‰è®¾è®¡ä¸‰å¤§åŸåˆ™</h3>
<ol>
<li><strong>å…ˆåˆ¤æ–­æ˜¯å¦å¤„ç†ï¼Œå†æ‰§è¡Œä¸šåŠ¡</strong></li>
<li><strong>å¹‚ç­‰åˆ¤æ–­å¿…é¡»åŸå­æ€§</strong></li>
<li><strong>é‡å¤æ¶ˆæ¯ç›´æ¥è¿”å›æˆåŠŸï¼Œä¸æŠ›å¼‚å¸¸</strong></li>
</ol>
<hr/>
<h3 data-id="heading-13">å…«ã€ç»å…¸é—®é¢˜</h3>
<ol>
<li>RocketMQ æ˜¯ At Least Once è¿˜æ˜¯ Exactly Onceï¼Ÿ</li>
<li>ä¸ºä»€ä¹ˆ MQ ä¸å†…éƒ¨å®ç°å»é‡ï¼Ÿ</li>
<li>æ¶ˆæ¯é‡å¤çš„åœºæ™¯æœ‰å“ªäº›ï¼Ÿ</li>
<li>ç”Ÿäº§ä¸­ä½ ç”¨ä»€ä¹ˆæ–¹æ¡ˆå®ç°å¹‚ç­‰ï¼Ÿ</li>
<li>å”¯ä¸€ç´¢å¼•ã€Redisã€çŠ¶æ€æœºä¸‰ç§æ–¹æ¡ˆå¯¹æ¯”ï¼Ÿ</li>
<li>å¦‚ä½•ä¿è¯å¹‚ç­‰é«˜å¯ç”¨ï¼Ÿ</li>
</ol>
<hr/>
<h3 data-id="heading-14">ä¹ã€ç”Ÿäº§æœ€ä½³å®è·µæ€»ç»“</h3>
<ol>
<li><strong>æ‰€æœ‰æ¶ˆè´¹ç«¯å¿…é¡»åšå¹‚ç­‰</strong>ï¼Œä¸è¦æŠ±æœ‰ä¾¥å¹¸</li>
<li><strong>ä¼˜å…ˆä½¿ç”¨ä¸šåŠ¡å”¯ä¸€é”®ï¼ˆkeysï¼‰</strong></li>
<li><strong>æ’å…¥ç”¨å”¯ä¸€ç´¢å¼•ï¼Œæ›´æ–°ç”¨çŠ¶æ€æœºï¼Œé«˜å¹¶å‘ç”¨ Redis</strong></li>
<li>å¼‚å¸¸æ—¶è¿”å› <strong>RECONSUME_LATER</strong>ï¼Œä¸è¦åå¼‚å¸¸</li>
<li>åšå¥½<strong>é‡è¯•ã€æ­»ä¿¡ã€å †ç§¯</strong>ç›‘æ§</li>
<li>å¹‚ç­‰æ˜¯æ¶æ„é—®é¢˜ï¼Œä¸æ˜¯ MQ é—®é¢˜</li>
</ol>
<hr/>
<h3 data-id="heading-15">åã€ç»“è¯­</h3>
<p>RocketMQ ä¸ä¿è¯æ¶ˆæ¯ä¸é‡å¤ï¼Œä½†é€šè¿‡<strong>åˆç†çš„å¹‚ç­‰è®¾è®¡</strong>ï¼Œå¯ä»¥è½»æ¾å®ç°ï¼š<strong>é‡å¤æ¶ˆæ¯ = å®‰å…¨è·³è¿‡ = æœ€ç»ˆä¸€è‡´</strong>ã€‚</p>
<p>å¹‚ç­‰æ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿé«˜å¯ç”¨çš„åŸºç¡€ï¼Œä¹Ÿæ˜¯é¢è¯•ä¸ç”Ÿäº§çš„å¿…è€ƒç‚¹ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[319. Java Stream API - ä½¿ç”¨ç»ˆç«¯æ”¶é›†å™¨]]></title>    <link>https://juejin.cn/post/7604853010162040895</link>    <guid>https://juejin.cn/post/7604853010162040895</guid>    <pubDate>2026-02-09T23:25:41.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604853010162040895" data-draft-id="7604574877035413547" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="319. Java Stream API - ä½¿ç”¨ç»ˆç«¯æ”¶é›†å™¨"/> <meta itemprop="keywords" content="åç«¯,å‰ç«¯"/> <meta itemprop="datePublished" content="2026-02-09T23:25:41.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="CacheæŠ€æœ¯åˆ†äº«"/> <meta itemprop="url" content="https://juejin.cn/user/1662117313262776"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            319. Java Stream API - ä½¿ç”¨ç»ˆç«¯æ”¶é›†å™¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1662117313262776/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    CacheæŠ€æœ¯åˆ†äº«
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-09T23:25:41.000Z" title="Mon Feb 09 2026 23:25:41 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">319. Java Stream API - ä½¿ç”¨ç»ˆç«¯æ”¶é›†å™¨</h2>
<p>åœ¨ Java çš„ <strong>Collector API</strong> ä¸­ï¼Œæœ‰ä¸€ç»„éå¸¸æœ‰ç”¨çš„ <strong>ç»ˆç«¯æ”¶é›†å™¨ï¼ˆterminal collectorsï¼‰</strong>ï¼Œå®ƒä»¬ä¸ Stream API ä¸­çš„ç»ˆç«¯æ“ä½œç´§å¯†å¯¹åº”ã€‚ä¸‹é¢ï¼Œæˆ‘ä»¬æ¥é€ä¸€è®²è§£è¿™äº›æ”¶é›†å™¨çš„ä½œç”¨ã€ä½¿ç”¨æ–¹å¼ï¼Œä»¥åŠå®ƒä»¬åœ¨å®é™…å¼€å‘ä¸­çš„å…¸å‹åº”ç”¨åœºæ™¯ã€‚</p>
<hr/>
<h3 data-id="heading-1">ğŸ” 1. <code>maxBy()</code> å’Œ <code>minBy()</code></h3>
<p>è¿™ä¸¤ä¸ªæ”¶é›†å™¨ç”¨äºæ‰¾å‡ºæµä¸­çš„ <strong>æœ€å¤§å€¼æˆ–æœ€å°å€¼</strong>ã€‚
å®ƒä»¬æ¥æ”¶ä¸€ä¸ª <code>Comparator</code> ä½œä¸ºå‚æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ª <code>Optional&lt;T&gt;</code>ã€‚å¦‚æœæµä¸ºç©ºï¼Œé‚£ä¹ˆè¿”å›çš„ <code>Optional</code> ä¹Ÿæ˜¯ç©ºçš„ã€‚</p>
<h4 data-id="heading-2">ğŸ“Œ ç¤ºä¾‹ï¼š</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> java.util.*;
<span class="hljs-keyword">import</span> java.util.stream.*;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MaxMinCollectorDemo</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        List&lt;String&gt; names = List.of(<span class="hljs-string">"Alice"</span>, <span class="hljs-string">"Bob"</span>, <span class="hljs-string">"Charlie"</span>, <span class="hljs-string">"David"</span>);

        Optional&lt;String&gt; longestName = names.stream()
            .collect(Collectors.maxBy(Comparator.comparingInt(String::length)));

        Optional&lt;String&gt; shortestName = names.stream()
            .collect(Collectors.minBy(Comparator.comparingInt(String::length)));

        System.out.println(<span class="hljs-string">"Longest name: "</span> + longestName.orElse(<span class="hljs-string">"N/A"</span>));
        System.out.println(<span class="hljs-string">"Shortest name: "</span> + shortestName.orElse(<span class="hljs-string">"N/A"</span>));
    }
}
</code></pre>
<h4 data-id="heading-3">ğŸ¯ è¾“å‡ºï¼š</h4>
<pre><code class="hljs language-java" lang="java">Longest name: Charlie
Shortest name: Bob
</code></pre>
<hr/>
<h3 data-id="heading-4">â• 2. <code>summingInt()</code> / <code>summingLong()</code> / <code>summingDouble()</code></h3>
<p>è¿™ä¸‰ä¸ªæ”¶é›†å™¨ç”¨äºå¯¹æµä¸­çš„å…ƒç´ è¿›è¡Œæ±‚å’Œã€‚
ä½ éœ€è¦ä¼ å…¥ä¸€ä¸ªæ˜ å°„å‡½æ•°ï¼Œå°†å¯¹è±¡æ˜ å°„ä¸º <code>int</code>ã€<code>long</code> æˆ– <code>double</code>ï¼Œç„¶åè¿›è¡ŒåŠ æ€»ã€‚</p>
<h4 data-id="heading-5">ğŸ“Œ ç¤ºä¾‹ï¼š</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">record</span> <span class="hljs-title class_">Product</span><span class="hljs-params">(String name, <span class="hljs-type">double</span> price)</span> {}

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SumDemo</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        List&lt;Product&gt; products = List.of(
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">Product</span>(<span class="hljs-string">"Pen"</span>, <span class="hljs-number">1.5</span>),
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">Product</span>(<span class="hljs-string">"Notebook"</span>, <span class="hljs-number">3.0</span>),
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">Product</span>(<span class="hljs-string">"Pencil"</span>, <span class="hljs-number">0.5</span>)
        );

        <span class="hljs-type">double</span> <span class="hljs-variable">totalPrice</span> <span class="hljs-operator">=</span> products.stream()
            .collect(Collectors.summingDouble(Product::price));

        System.out.println(<span class="hljs-string">"Total price: "</span> + totalPrice);
    }
}
</code></pre>
<h4 data-id="heading-6">ğŸ¯ è¾“å‡ºï¼š</h4>
<pre><code class="hljs language-java" lang="java">Total price: <span class="hljs-number">5.0</span>
</code></pre>
<hr/>
<h3 data-id="heading-7">ğŸ“Š 3. <code>averagingInt()</code> / <code>averagingLong()</code> / <code>averagingDouble()</code></h3>
<p>è¿™äº›æ”¶é›†å™¨ç”¨äºè®¡ç®—å¹³å‡å€¼ï¼Œä¹Ÿæ¥å—ä¸€ä¸ªæ˜ å°„å‡½æ•°ï¼Œå°†å¯¹è±¡æ˜ å°„ä¸ºå¯¹åº”æ•°å€¼ç±»å‹ã€‚
ä¸åŒäº <code>IntStream.average()</code> ç­‰æ–¹æ³•ï¼Œè¿™äº›æ”¶é›†å™¨å§‹ç»ˆè¿”å›ä¸€ä¸ª <code>Double</code> å€¼ï¼Œå³ä½¿æµä¸ºç©ºæ—¶ä¹Ÿä¸ä¼šæŠ›å¼‚å¸¸ï¼Œè€Œæ˜¯è¿”å› <code>0.0</code>ã€‚</p>
<h4 data-id="heading-8">ğŸ“Œ ç¤ºä¾‹ï¼š</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AverageDemo</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        List&lt;String&gt; words = List.of(<span class="hljs-string">"cat"</span>, <span class="hljs-string">"elephant"</span>, <span class="hljs-string">"tiger"</span>, <span class="hljs-string">"lion"</span>);

        <span class="hljs-type">double</span> <span class="hljs-variable">averageLength</span> <span class="hljs-operator">=</span> words.stream()
            .collect(Collectors.averagingInt(String::length));

        System.out.println(<span class="hljs-string">"Average length: "</span> + averageLength);
    }
}
</code></pre>
<h4 data-id="heading-9">ğŸ¯ è¾“å‡ºï¼š</h4>
<pre><code class="hljs language-java" lang="java">Average length: <span class="hljs-number">5.25</span>
</code></pre>
<p>ğŸ§  <strong>å°è´´å£«</strong>ï¼š</p>
<ul>
<li><code>averagingInt()</code> å’Œ <code>IntStream.average()</code> çš„åŒºåˆ«åœ¨äºï¼š
<ul>
<li><code>IntStream.average()</code> è¿”å› <code>OptionalDouble</code>ï¼Œå¦‚æœæµä¸ºç©ºä¼šè¿”å› <code>Optional.empty()</code>ï¼›</li>
<li><code>Collectors.averagingInt()</code> è¿”å› <code>Double</code> ç±»å‹ï¼Œå¹¶ä¸”ç©ºæµé»˜è®¤è¿”å› <code>0.0</code>ï¼Œæ›´å®‰å…¨ã€‚</li>
</ul>
</li>
</ul>
<hr/>
<h3 data-id="heading-10">ğŸ“Œ å°ç»“</h3>





























<table><thead><tr><th>æ”¶é›†å™¨åç§°</th><th>åŠŸèƒ½æè¿°</th><th>è¿”å›ç±»å‹</th><th>ç©ºæµå¤„ç†æ–¹å¼</th></tr></thead><tbody><tr><td><code>maxBy()</code> / <code>minBy()</code></td><td>è·å–æœ€å¤§ / æœ€å°å…ƒç´ </td><td><code>Optional&lt;T&gt;</code></td><td>è¿”å›ç©º Optional</td></tr><tr><td><code>summingInt()</code> ç­‰</td><td>æ±‚å’Œ</td><td><code>int</code> / <code>long</code> / <code>double</code></td><td>è¿”å› 0</td></tr><tr><td><code>averagingInt()</code> ç­‰</td><td>æ±‚å¹³å‡å€¼</td><td><code>Double</code></td><td>è¿”å› 0.0</td></tr></tbody></table>
<hr/>
<p>è¿™äº›æ”¶é›†å™¨åœ¨å®é™…å¼€å‘ä¸­éå¸¸å¸¸è§ï¼Œå°¤å…¶é€‚ç”¨äºç»Ÿè®¡ç±»ã€æŠ¥è¡¨ç±»ã€åˆ†æç±»çš„å¤„ç†åœºæ™¯ã€‚å¦‚æœä½ æƒ³åŸºäº <code>Stream</code> ç»“æœè¿›è¡Œä¸€äº›æ±‡æ€»ã€åˆ†ææ“ä½œï¼Œè¿™äº›å·¥å…·å°±æ˜¯ä½ çš„å¥½å¸®æ‰‹ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»Vue3åˆ°Reactï¼šä¸€åœºè·¨è¶ŠèŒƒå¼çš„è¿›åŒ–ä¹‹æ—…]]></title>    <link>https://juejin.cn/post/7604685644684591156</link>    <guid>https://juejin.cn/post/7604685644684591156</guid>    <pubDate>2026-02-10T00:57:53.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604685644684591156" data-draft-id="7604522883486122018" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»Vue3åˆ°Reactï¼šä¸€åœºè·¨è¶ŠèŒƒå¼çš„è¿›åŒ–ä¹‹æ—…"/> <meta itemprop="keywords" content="å‰ç«¯,React.js"/> <meta itemprop="datePublished" content="2026-02-10T00:57:53.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é’é’å®¶çš„å°å¹¸è¿"/> <meta itemprop="url" content="https://juejin.cn/user/2295436009545944"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»Vue3åˆ°Reactï¼šä¸€åœºè·¨è¶ŠèŒƒå¼çš„è¿›åŒ–ä¹‹æ—…
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2295436009545944/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é’é’å®¶çš„å°å¹¸è¿
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-10T00:57:53.000Z" title="Tue Feb 10 2026 00:57:53 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    11
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="agate">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#333;color:#fff}.hljs-name,.hljs-strong{font-weight:700}.hljs-code,.hljs-emphasis{font-style:italic}.hljs-tag{color:#62c8f3}.hljs-selector-class,.hljs-selector-id,.hljs-template-variable,.hljs-variable{color:#ade5fc}.hljs-bullet,.hljs-string{color:#a2fca2}.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-quote,.hljs-section,.hljs-title,.hljs-type{color:#ffa}.hljs-bullet,.hljs-number,.hljs-symbol{color:#d36363}.hljs-keyword,.hljs-literal,.hljs-selector-tag{color:#fcc28c}.hljs-code,.hljs-comment,.hljs-deletion{color:#888}.hljs-link,.hljs-regexp{color:#c6b4f0}.hljs-meta{color:#fc9b9b}.hljs-deletion{background-color:#fc9b9b;color:#333}.hljs-addition{background-color:#a2fca2;color:#333}.hljs a{color:inherit}.hljs a:focus,.hljs a:hover{color:inherit;text-decoration:underline}</style><h2 data-id="heading-0">ä»Vue3åˆ°Reactï¼šä¸€åœºè·¨è¶ŠèŒƒå¼çš„è¿›åŒ–ä¹‹æ—…</h2>
<p>ä½œä¸ºæ·±è€•å‰ç«¯é¢†åŸŸ7å¹´++çš„å¼€å‘è€…ï¼Œæˆ‘æ›¾å°†Vue3è§†ä¸º"æ¸è¿›å¼æ¡†æ¶"çš„å®Œç¾ç­”æ¡ˆã€‚ç›´åˆ°å…¬å¸å†³å®šå°†æ ¸å¿ƒé¡¹ç›®è¿ç§»è‡³Reactç”Ÿæ€ï¼Œè¿™åœºæŠ€æœ¯æ ˆçš„å˜é©è®©æˆ‘æ·±åˆ»ä½“ä¼šåˆ°ï¼šâ€‹<strong>æ¡†æ¶çš„æ›´è¿­ä¸æ˜¯éæ­¤å³å½¼çš„é€‰æ‹©ï¼Œè€Œæ˜¯å¼€å‘è€…è®¤çŸ¥è¾¹ç•Œçš„æ‹“å±•</strong>ã€‚åœ¨å®Œæˆè¿ç§»çš„åŠå¹´åï¼Œæˆ‘æ—¢æƒŠå¹äºReactç”Ÿæ€çš„å¼ºå¤§ç”Ÿå‘½åŠ›ï¼Œä¹Ÿæ„ˆå‘çæƒœVue3å¸¦æ¥çš„å¼€å‘å“²å­¦å¯ç¤ºã€‚</p>
<hr/>
<h3 data-id="heading-1">ä¸€ã€èŒƒå¼ç¢°æ’ï¼šä¸¤ç§æ€ç»´æ¨¡å¼çš„å¯¹è¯</h3>
<h4 data-id="heading-2">1.1 å“åº”å¼ç³»ç»Ÿçš„å“²å­¦å·®å¼‚</h4>
<p>Vue3çš„Proxyå“åº”å¼ç³»ç»Ÿå¦‚åŒç²¾å¯†çš„ç‘å£«é’Ÿè¡¨ï¼Œé€šè¿‡<code>ref</code>å’Œ<code>reactive</code>è‡ªåŠ¨è¿½è¸ªæ•°æ®æµåŠ¨ã€‚åœ¨å¼€å‘ä¼ä¸šçº§åå°æ—¶ï¼Œæˆ‘æ›¾äº«å—è¿‡<code>watchEffect</code>è‡ªåŠ¨è¿½è¸ªä¾èµ–çš„ä¼˜é›…ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// Vue3æ•°æ®è¿½è¸ªç¤ºä¾‹</span>
<span class="hljs-keyword">const</span> userInfo = <span class="hljs-title function_">reactive</span>({ <span class="hljs-attr">name</span>: <span class="hljs-string">'å¼ ä¸‰'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">28</span> });
<span class="hljs-title function_">watchEffect</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`ç”¨æˆ· <span class="hljs-subst">${userInfo.name}</span> å¹´é¾„æ›´æ–°ä¸º <span class="hljs-subst">${userInfo.age}</span>`</span>);
});
</code></pre>
<p>è€ŒReactçš„<code>useState</code>/<code>useEffect</code>æ›´åƒä¹é«˜ç§¯æœ¨ï¼Œéœ€è¦å¼€å‘è€…æ‰‹åŠ¨æ­å»ºçŠ¶æ€ç®¡ç†é€»è¾‘ã€‚è¿ç§»åˆæœŸï¼Œè¿™ç§æ˜¾å¼å£°æ˜è®©æˆ‘å€æ„Ÿç¹çï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ReactçŠ¶æ€ç®¡ç†å¯¹æ¯”</span>
<span class="hljs-keyword">const</span> [userInfo, setUserInfo] = <span class="hljs-title function_">useState</span>({ <span class="hljs-attr">name</span>: <span class="hljs-string">'å¼ ä¸‰'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">28</span> });
<span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`ç”¨æˆ· <span class="hljs-subst">${userInfo.name}</span> å¹´é¾„æ›´æ–°ä¸º <span class="hljs-subst">${userInfo.age}</span>`</span>);
}, [userInfo]);
</code></pre>
<p>ä½†æ­£æ˜¯è¿™ç§æ˜¾å¼æ€§ï¼Œè®©æˆ‘åœ¨å¤æ‚è¡¨å•å¤„ç†æ—¶é¿å…äº†Vueä¸­<code>computed</code>å±æ€§å¯èƒ½å¼•å‘çš„ä¾èµ–é™·é˜±ã€‚</p>
<h4 data-id="heading-3">1.2 ç»„ä»¶åŒ–å¼€å‘çš„æ®Šé€”åŒå½’</h4>
<p>Vue3çš„å•æ–‡ä»¶ç»„ä»¶(SFC)å°†æ¨¡æ¿ã€é€»è¾‘ã€æ ·å¼å°è£…åœ¨<code>.vue</code>æ–‡ä»¶ä¸­ï¼Œé€‚åˆå¿«é€ŸåŸå‹å¼€å‘ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"handleSubmit"</span>&gt;</span>{{ loading ? 'æäº¤ä¸­...' : 'æäº¤' }}<span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">const</span> form = <span class="hljs-title function_">reactive</span>({ <span class="hljs-attr">title</span>: <span class="hljs-string">''</span>, <span class="hljs-attr">content</span>: <span class="hljs-string">''</span> });
<span class="hljs-keyword">const</span> { loading } = <span class="hljs-title function_">useLoading</span>();
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p>Reactçš„å‡½æ•°ç»„ä»¶+Hooksæ¨¡å¼åˆ™æ›´æ¥è¿‘åŸç”ŸJavaScriptï¼Œè¿™ç§"ä»£ç å³ç½‘é¡µ"çš„ç›´ç™½é£æ ¼åœ¨å¤§å‹é¡¹ç›®ä¸­å±•ç°å‡ºç‹¬ç‰¹ä¼˜åŠ¿ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// Reactç»„ä»¶å¯¹æ¯”</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">SubmitButton</span> = (<span class="hljs-params">{ loading }</span>) =&gt; (
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">disabled</span>=<span class="hljs-string">{loading}</span>&gt;</span>
    {loading ? 'æäº¤ä¸­...' : 'æäº¤'}
  <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>
);
</code></pre>
<p>è¿ç§»è¿‡ç¨‹ä¸­æˆ‘å‘ç°ï¼Œâ€‹<strong>ç»„ä»¶æ‹†åˆ†çš„ç²’åº¦æ§åˆ¶</strong>æ˜¯ä¸¤å¤§æ¡†æ¶çš„æ ¸å¿ƒå·®å¼‚ï¼šVueæ›´é€‚åˆä¸šåŠ¡é€»è¾‘ç´§å¯†è€¦åˆçš„æ¨¡å—ï¼Œè€ŒReactçš„ç»„ä»¶åŒ–æ›´å¼ºè°ƒå•ä¸€èŒè´£åŸåˆ™ã€‚</p>
<hr/>
<h3 data-id="heading-4">äºŒã€è¿ç§»å®æˆ˜ï¼šåœ¨æŒ‘æˆ˜ä¸­å¯»æ‰¾çªç ´</h3>
<h4 data-id="heading-5">2.1 çŠ¶æ€ç®¡ç†çš„é‡æ„è‰ºæœ¯</h4>
<p>å°†Piniaè¿ç§»åˆ°Redux Toolkitçš„è¿‡ç¨‹å……æ»¡æŒ‘æˆ˜ã€‚æˆ‘ä»¬é‡‡ç”¨æ¸è¿›å¼æ”¹é€ ç­–ç•¥ï¼š</p>
<ol>
<li>â€‹<strong>æ ¸å¿ƒçŠ¶æ€å±‚ä¿ç•™Pinia</strong>â€‹ï¼šç”¨æˆ·è®¤è¯ã€å…¨å±€é…ç½®ç­‰åŸºç¡€çŠ¶æ€ç»§ç»­ä½¿ç”¨Vuexæ¨¡å¼</li>
<li>â€‹<strong>ä¸šåŠ¡é€»è¾‘å±‚è½¬å‘Redux</strong>â€‹ï¼šä½¿ç”¨<code>createSlice</code>é‡æ„è¡¨å•æäº¤ã€æ•°æ®ç¼“å­˜ç­‰åœºæ™¯</li>
<li>â€‹<strong>ä¸­é—´ä»¶æ¡¥æ¥æ–¹æ¡ˆ</strong>â€‹ï¼šé€šè¿‡<code>redux-thunk</code>å…¼å®¹åŸæœ‰APIè°ƒç”¨æ¨¡å¼</li>
</ol>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ··åˆæ¶æ„ç¤ºä¾‹</span>
<span class="hljs-comment">// stores/auth.js (Pinia)</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> useAuthStore = <span class="hljs-title function_">defineStore</span>(<span class="hljs-string">'auth'</span>, {
  <span class="hljs-attr">state</span>: <span class="hljs-function">() =&gt;</span> ({ <span class="hljs-attr">token</span>: <span class="hljs-literal">null</span> }),
  <span class="hljs-attr">actions</span>: { login }
})

<span class="hljs-comment">// features/formSlice.js (Redux Toolkit)</span>
<span class="hljs-keyword">const</span> formSlice = <span class="hljs-title function_">createSlice</span>({
  <span class="hljs-attr">name</span>: <span class="hljs-string">'form'</span>,
  <span class="hljs-attr">reducers</span>: { <span class="hljs-attr">submit</span>: <span class="hljs-function">(<span class="hljs-params">state</span>) =&gt;</span> { <span class="hljs-comment">/* ... */</span> } }
})
</code></pre>
<h4 data-id="heading-6">2.2 è·¯ç”±ç³»ç»Ÿçš„èŒƒå¼è½¬æ¢</h4>
<p>ä»<code>vue-router</code>åˆ°<code>react-router-dom</code>çš„è¿ç§»éœ€è¦é‡æ„æ•´ä¸ªå¯¼èˆªé€»è¾‘ï¼š</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// Vue3è·¯ç”±é…ç½®</span>
const router = <span class="hljs-built_in">createRouter</span>({
  routes: })

<span class="hljs-comment">// Reactè·¯ç”±é…ç½®</span>
const router = <span class="hljs-built_in">createBrowserRouter</span>(})
</code></pre>
<p>æˆ‘ä»¬åˆ›æ–°æ€§åœ°é‡‡ç”¨<strong>æ··åˆè·¯ç”±æ–¹æ¡ˆ</strong>â€‹ï¼šæ ¸å¿ƒé¡µé¢ä½¿ç”¨React Routerï¼Œå¾®å‰ç«¯å­åº”ç”¨ä¿ç•™Vue Routerï¼Œé€šè¿‡<code>&lt;iframe&gt;</code>å®ç°æ— ç¼è¡”æ¥ã€‚</p>
<hr/>
<h3 data-id="heading-7">ä¸‰ã€è®¤çŸ¥å‡çº§ï¼šè¶…è¶Šæ¡†æ¶çš„å¼€å‘è€…æ€ç»´</h3>
<h4 data-id="heading-8">3.1 æ€§èƒ½ä¼˜åŒ–çš„æ–°ç»´åº¦</h4>
<p>React 19çš„Server Componentså½»åº•æ”¹å˜äº†æ¸²æŸ“èŒƒå¼ã€‚åœ¨å¼€å‘æ•°æ®çœ‹æ¿æ—¶ï¼Œæˆ‘ä»¬å°†å®æ—¶å›¾è¡¨ç»„ä»¶è½¬ä¸ºæœåŠ¡ç«¯æ¸²æŸ“ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// Server Componentç¤ºä¾‹</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">RealTimeChart</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchAnalytics</span>();
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Chart</span> <span class="hljs-attr">data</span>=<span class="hljs-string">{data}</span> /&gt;</span></span>;
}
</code></pre>
<p>è¿™ç§æ¶æ„ä¸‹ï¼Œé¦–å±åŠ è½½æ—¶é—´ä»2.1séª¤é™è‡³480msï¼Œä½†ä»£ä»·æ˜¯å¤±å»äº†Vueä¸­<code>&lt;keep-alive&gt;</code>çš„ç»„ä»¶ç¼“å­˜èƒ½åŠ›ã€‚æˆ‘ä»¬é€šè¿‡<strong>åˆ†å±‚ç¼“å­˜ç­–ç•¥</strong>å¼¥è¡¥ç¼ºé™·ï¼šé«˜é¢‘æ•°æ®èµ°Redisç¼“å­˜ï¼Œä½é¢‘æ•°æ®ä½¿ç”¨React Queryã€‚</p>
<h4 data-id="heading-9">3.2 å¼€å‘ä½“éªŒçš„å†å®šä¹‰</h4>
<p>React 19çš„ç¼–è¯‘å™¨é©å‘½å¸¦æ¥äº†æ„æƒ³ä¸åˆ°çš„æ”¶ç›Šã€‚åœ¨é‡æ„æ—§ç‰ˆè¡¨å•ç»„ä»¶æ—¶ï¼Œç¼–è¯‘å™¨è‡ªåŠ¨å°†<code>useEffect</code>ä¾èµ–é¡¹ä¼˜åŒ–ä¸ºç²¾ç¡®è¿½è¸ªï¼š</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// ç¼–è¯‘å‰</span>
<span class="hljs-built_in">useEffect</span>(() =&gt; {
  console<span class="hljs-selector-class">.log</span>(value);
}, <span class="hljs-selector-attr">[value]</span>);

<span class="hljs-comment">// ç¼–è¯‘åï¼ˆç­‰æ•ˆä¼˜åŒ–ï¼‰</span>
const memoizedValue = <span class="hljs-built_in">useMemo</span>(() =&gt; value, <span class="hljs-selector-attr">[value]</span>);
<span class="hljs-built_in">useEffect</span>(() =&gt; {
  console<span class="hljs-selector-class">.log</span>(memoizedValue);
}, <span class="hljs-selector-attr">[memoizedValue]</span>);
</code></pre>
<p>è¿™ç§æ™ºèƒ½ä¼˜åŒ–è®©æˆ‘ä»¬åœ¨ä¿æŒä»£ç ç®€æ´æ€§çš„åŒæ—¶ï¼Œè·å¾—æ¥è¿‘Vue3çš„å“åº”å¼ä½“éªŒã€‚</p>
<hr/>
<h3 data-id="heading-10">å››ã€åŒå‘èµ‹èƒ½ï¼šæ„å»ºæŠ€æœ¯ä¸­ç«‹çš„ä¸–ç•Œè§‚</h3>
<h4 data-id="heading-11">4.1 Vue3çš„æŒç»­ä»·å€¼</h4>
<p>åœ¨è¿ç§»è¿‡ç¨‹ä¸­ï¼ŒVue3çš„ä»¥ä¸‹ç‰¹æ€§æŒç»­å‘æŒ¥ä½œç”¨ï¼š</p>
<ul>
<li>â€‹<strong>ç»„åˆå¼API</strong>â€‹ï¼šä¸ºReact Hooksæä¾›äº†ä¼˜é›…çš„æ›¿ä»£æ–¹æ¡ˆ</li>
<li>â€‹<strong>ç¼–è¯‘å™¨å¢å¼º</strong>â€‹ï¼šVue3çš„ç¼–è¯‘å™¨æç¤ºå¸®åŠ©æˆ‘ä»¬è§„é¿äº†Reactä¸­çš„å¸¸è§é”™è¯¯</li>
<li>â€‹<strong>ç”Ÿæ€å…¼å®¹æ€§</strong>â€‹ï¼šé€šè¿‡<code>@vue/compiler-sfc</code>ç»§ç»­ç»´æŠ¤æ—§ç‰ˆç»„ä»¶åº“</li>
</ul>
<h4 data-id="heading-12">4.2 Reactçš„è¿›åŒ–å¯ç¤º</h4>
<p>Reactç”Ÿæ€çš„ä»¥ä¸‹åˆ›æ–°åå‘æ»‹å…»äº†Vueå¼€å‘ï¼š</p>
<ul>
<li>â€‹<strong>TypeScriptæ·±åº¦é›†æˆ</strong>â€‹ï¼šæ¨åŠ¨æˆ‘ä»¬ä¸ºVue3é¡¹ç›®æ·»åŠ å®Œæ•´ç±»å‹å®šä¹‰</li>
<li>â€‹<strong>Web3å¼€å‘æ¨¡å¼</strong>â€‹ï¼šå€Ÿé‰´Reactçš„<code>useEffect</code>å¼‚æ­¥æ¨¡å¼é‡æ„DAppäº¤äº’é€»è¾‘</li>
<li>â€‹<strong>å¾®å‰ç«¯æ¶æ„</strong>â€‹ï¼šé‡‡ç”¨Reactçš„æ¨¡å—è”é‚¦æ–¹æ¡ˆå®ç°Vue3å­åº”ç”¨é›†æˆ</li>
</ul>
<hr/>
<h3 data-id="heading-13">äº”ã€æœªæ¥å±•æœ›ï¼šæ¡†æ¶æ— å…³çš„å¼€å‘è€…ä¹‹è·¯</h3>
<p>ç«™åœ¨2026å¹´çš„æ—¶é—´èŠ‚ç‚¹å›æœ›ï¼ŒVue3ä¸Reactçš„è¿ç§»ç»å†è®©æˆ‘é¢†æ‚Ÿåˆ°ï¼š</p>
<ol>
<li>â€‹<strong>å·¥å…·æ˜¯ä¸­æ€§çš„</strong>â€‹ï¼šæ¡†æ¶åªæ˜¯å®ç°ç›®æ ‡çš„æ‰‹æ®µï¼Œæ ¸å¿ƒåœ¨äºç†è§£åº•å±‚åŸç†</li>
<li>â€‹<strong>è®¤çŸ¥éœ€è¦è¿­ä»£</strong>â€‹ï¼šä¿æŒå¯¹æ–°æŠ€æœ¯çš„æ•æ„Ÿåº¦ï¼Œä½†åšå®ˆæŠ€æœ¯åˆ¤æ–­åŠ›</li>
<li>â€‹<strong>ç”Ÿæ€å†³å®šæœªæ¥</strong>â€‹ï¼šReactåœ¨Web3ã€AIåº”ç”¨ä¸­çš„ä¼˜åŠ¿å€¼å¾—å…³æ³¨ï¼ŒVue3åœ¨å¯è§†åŒ–ã€ä½ä»£ç é¢†åŸŸçš„æ½œåŠ›åŒæ ·ä¸å¯å¿½è§†</li>
</ol>
<p>æ­£å¦‚æˆ‘åœ¨å›¢é˜Ÿåˆ†äº«ä¼šä¸Šå¸¸è¯´çš„ï¼šâ€‹<strong>â€‹"æˆ‘ä»¬ä¸æ˜¯Vueå¼€å‘è€…æˆ–Reactå¼€å‘è€…ï¼Œè€Œæ˜¯èƒ½ç”¨ä»»ä½•å·¥å…·è§£å†³é—®é¢˜çš„é—®é¢˜è§£å†³è€…ã€‚"â€‹</strong>â€‹ è¿™åœºæ¡†æ¶è¿ç§»ä¸æ˜¯ç»ˆç‚¹ï¼Œè€Œæ˜¯æ‰“å¼€æ›´å¹¿é˜”æŠ€æœ¯è§†é‡çš„èµ·ç‚¹ã€‚åœ¨æœªæ¥çš„é¡¹ç›®ä¸­ï¼Œæˆ‘å°†ç»§ç»­ä»¥å¼€æ”¾å¿ƒæ€æ‹¥æŠ±å˜åŒ–ï¼Œå› ä¸ºçœŸæ­£çš„å¼€å‘è€…æ°¸è¿œåœ¨è·¯ä¸Šã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[JavaScript Proxyä¸Reflect]]></title>    <link>https://juejin.cn/post/7604666872127586323</link>    <guid>https://juejin.cn/post/7604666872127586323</guid>    <pubDate>2026-02-10T01:21:25.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604666872127586323" data-draft-id="7604678037808431140" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="JavaScript Proxyä¸Reflect"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2026-02-10T01:21:25.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="wuhen_n"/> <meta itemprop="url" content="https://juejin.cn/user/4149996261738233"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            JavaScript Proxyä¸Reflect
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4149996261738233/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    wuhen_n
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-10T01:21:25.000Z" title="Tue Feb 10 2026 01:21:25 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>åœ¨ JavaScript ä¸­å¦‚ä½•æ‹¦æˆªå¯¹è±¡çš„è¯»å–ã€ä¿®æ”¹ã€åˆ é™¤æ“ä½œï¼ŸVue3çš„å“åº”å¼ç³»ç»Ÿå¦‚ä½•å®ç°ï¼Ÿæœ¬æ–‡å°†æ·±å…¥è®²è§£ JavaScript çš„å…ƒç¼–ç¨‹ä¸–ç•Œï¼Œæ¢ç´¢ Proxy å’Œ Reflect çš„å¥¥ç§˜ã€‚</p>
</blockquote>
<h2 data-id="heading-0">å‰è¨€ï¼šä»Vue3çš„å“åº”å¼è¯´èµ·</h2>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// Vue3çš„å“åº”å¼æ•°æ®å®ç°åŸç†</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">reactive</span> = (<span class="hljs-params">target</span>) =&gt; {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Proxy</span>(target, {
        <span class="hljs-title function_">get</span>(<span class="hljs-params">target, key, receiver</span>) {
            <span class="hljs-title function_">track</span>(target, key); <span class="hljs-comment">// ä¾èµ–æ”¶é›†</span>
            <span class="hljs-keyword">return</span> <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">get</span>(target, key, receiver);
        },
        <span class="hljs-title function_">set</span>(<span class="hljs-params">target, key, value, receiver</span>) {
            <span class="hljs-keyword">const</span> result = <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">set</span>(target, key, value, receiver);
            <span class="hljs-title function_">trigger</span>(target, key); <span class="hljs-comment">// è§¦å‘æ›´æ–°</span>
            <span class="hljs-keyword">return</span> result;
        }
    });
};
</code></pre>
<p>Vue3çš„å“åº”å¼æ•°æ®å®ç°åŸç†çš„èƒŒåï¼Œå°±æ˜¯ Proxy å’Œ Reflect ã€‚ç†è§£å®ƒä»¬ï¼Œæˆ‘ä»¬å°±èƒ½çœŸæ­£æŒæ¡ JavaScript å…ƒç¼–ç¨‹çš„èƒ½åŠ›ã€‚</p>
<h2 data-id="heading-1">ç†è§£Proxyä¸Reflect</h2>
<h3 data-id="heading-2">ä»€ä¹ˆæ˜¯Proxyï¼ˆä»£ç†ï¼‰ï¼Ÿ</h3>
<p><strong>Proxy</strong> å¯¹è±¡ç”¨äºåˆ›å»ºä¸€ä¸ªå¯¹è±¡çš„ä»£ç†ï¼Œä»è€Œå®ç°å¯¹åŸºæœ¬æ“ä½œçš„æ‹¦æˆªå’Œè‡ªå®šä¹‰ï¼ˆå¦‚å±æ€§æŸ¥æ‰¾ã€èµ‹å€¼ã€æšä¸¾ã€å‡½æ•°è°ƒç”¨ç­‰ï¼‰ã€‚</p>
<h3 data-id="heading-3">Proxyå·¥ä½œæµç¨‹ç¤ºæ„å›¾</h3>
<pre><code class="hljs language-text" lang="text">
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   æ“ä½œè¯·æ±‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   è½¬å‘æ“ä½œ    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å®¢æˆ·ç«¯   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ â”‚  Proxy  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ â”‚ ç›®æ ‡å¯¹è±¡ â”‚
â”‚         â”‚             â”‚  ä»£ç†    â”‚             â”‚         â”‚
â”‚         â”‚â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚         â”‚â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   å“åº”ç»“æœ   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   å®é™…ç»“æœ    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â†“                           â†“
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ æ‹¦æˆªå’Œè‡ªå®šä¹‰  â”‚            â”‚ åŸå§‹è¡Œä¸º     â”‚
         â”‚   ï¼ˆé™·é˜±ï¼‰   â”‚            â”‚             â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h3 data-id="heading-4">ä»€ä¹ˆæ˜¯Reflectï¼ˆåå°„ï¼‰ï¼Ÿ</h3>
<p><strong>Reflect</strong> æ˜¯ä¸€ä¸ªå†…ç½®çš„å¯¹è±¡ï¼Œå®ƒæä¾›æ‹¦æˆª JavaScript æ“ä½œçš„æ–¹æ³•ã€‚è¿™äº›æ–¹æ³•ä¸ Proxy çš„é™·é˜±æ–¹æ³•ä¸€ä¸€å¯¹åº”ã€‚</p>
<h3 data-id="heading-5">ä¸ºä»€ä¹ˆéœ€è¦Reflectï¼Ÿ</h3>
<ol>
<li>ç»Ÿä¸€çš„æ“ä½œAPI</li>
<li>æ›´å¥½çš„é”™è¯¯å¤„ç†ï¼ˆè¿”å›å¸ƒå°”å€¼è€ŒéæŠ›å‡ºå¼‚å¸¸ï¼‰</li>
<li>ä¸Proxyé™·é˜±æ–¹æ³•ä¸€ä¸€å¯¹åº”</li>
</ol>
<h2 data-id="heading-6">ä»£ç†åŸºç¡€ï¼šåˆ›å»ºç¬¬ä¸€ä¸ªä»£ç†</h2>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç›®æ ‡å¯¹è±¡</span>
<span class="hljs-keyword">const</span> target = {
  <span class="hljs-attr">name</span>: <span class="hljs-string">'å¼ ä¸‰'</span>,
  <span class="hljs-attr">age</span>: <span class="hljs-number">30</span>
};

<span class="hljs-comment">// å¤„ç†å™¨å¯¹è±¡ï¼ˆåŒ…å«é™·é˜±æ–¹æ³•ï¼‰</span>
<span class="hljs-keyword">const</span> handler = {
  <span class="hljs-comment">// æ‹¦æˆªå±æ€§è¯»å–</span>
  <span class="hljs-title function_">get</span>(<span class="hljs-params">target, property, receiver</span>) {

    <span class="hljs-comment">// æ·»åŠ è‡ªå®šä¹‰é€»è¾‘</span>
    <span class="hljs-keyword">if</span> (property === <span class="hljs-string">'age'</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">${target[property]}</span>å²`</span>;
    }

    <span class="hljs-comment">// é»˜è®¤è¡Œä¸ºï¼šä½¿ç”¨Reflect</span>
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">get</span>(target, property, receiver);
  },

  <span class="hljs-comment">// æ‹¦æˆªå±æ€§è®¾ç½®</span>
  <span class="hljs-title function_">set</span>(<span class="hljs-params">target, property, value, receiver</span>) {
    <span class="hljs-comment">// æ·»åŠ éªŒè¯é€»è¾‘</span>
    <span class="hljs-keyword">if</span> (property === <span class="hljs-string">'age'</span> &amp;&amp; (value &lt; <span class="hljs-number">0</span> || value &gt; <span class="hljs-number">150</span>)) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">'å¹´é¾„å¿…é¡»åœ¨0-150ä¹‹é—´'</span>);
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>; <span class="hljs-comment">// è¿”å›falseè¡¨ç¤ºè®¾ç½®å¤±è´¥</span>
    }

    <span class="hljs-comment">// é»˜è®¤è¡Œä¸ºï¼šä½¿ç”¨Reflect</span>
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">set</span>(target, property, value, receiver);
  }
};

<span class="hljs-comment">// åˆ›å»ºä»£ç†</span>
<span class="hljs-keyword">const</span> proxy = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Proxy</span>(target, handler);

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(proxy.<span class="hljs-property">name</span>);  <span class="hljs-comment">// å¼ ä¸‰</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(proxy.<span class="hljs-property">age</span>);   <span class="hljs-comment">// 30å²</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(target.<span class="hljs-property">age</span>); <span class="hljs-comment">// 30</span>
</code></pre>
<h2 data-id="heading-7">13ç§å¯æ‹¦æˆªçš„é™·é˜±æ–¹æ³•</h2>
<h3 data-id="heading-8">å®Œæ•´é™·é˜±æ–¹æ³•æ¦‚è§ˆ</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> completeHandler = {
  <span class="hljs-comment">// 1. å±æ€§è®¿é—®æ‹¦æˆª</span>
  <span class="hljs-title function_">get</span>(<span class="hljs-params">target, prop, receiver</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`get: <span class="hljs-subst">${prop}</span>`</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">get</span>(target, prop, receiver);
  },

  <span class="hljs-comment">// 2. å±æ€§èµ‹å€¼æ‹¦æˆª</span>
  <span class="hljs-title function_">set</span>(<span class="hljs-params">target, prop, value, receiver</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`set: <span class="hljs-subst">${prop}</span> = <span class="hljs-subst">${value}</span>`</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">set</span>(target, prop, value, receiver);
  },

  <span class="hljs-comment">// 3. inæ“ä½œç¬¦æ‹¦æˆª</span>
  <span class="hljs-title function_">has</span>(<span class="hljs-params">target, prop</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`has: <span class="hljs-subst">${prop}</span>`</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">has</span>(target, prop);
  },

  <span class="hljs-comment">// 4. deleteæ“ä½œç¬¦æ‹¦æˆª</span>
  <span class="hljs-title function_">deleteProperty</span>(<span class="hljs-params">target, prop</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`delete: <span class="hljs-subst">${prop}</span>`</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">deleteProperty</span>(target, prop);
  },

  <span class="hljs-comment">// 5. æ„é€ å‡½æ•°è°ƒç”¨æ‹¦æˆª</span>
  <span class="hljs-title function_">construct</span>(<span class="hljs-params">target, args, newTarget</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`construct with args:`</span>, args);
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">construct</span>(target, args, newTarget);
  },

  <span class="hljs-comment">// 6. å‡½æ•°è°ƒç”¨æ‹¦æˆª</span>
  <span class="hljs-title function_">apply</span>(<span class="hljs-params">target, thisArg, args</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`apply: thisArg=`</span>, thisArg, <span class="hljs-string">'args='</span>, args);
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">apply</span>(target, thisArg, args);
  },

  <span class="hljs-comment">// 7. Object.getOwnPropertyDescriptoræ‹¦æˆª</span>
  <span class="hljs-title function_">getOwnPropertyDescriptor</span>(<span class="hljs-params">target, prop</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`getOwnPropertyDescriptor: <span class="hljs-subst">${prop}</span>`</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">getOwnPropertyDescriptor</span>(target, prop);
  },

  <span class="hljs-comment">// 8. Object.definePropertyæ‹¦æˆª</span>
  <span class="hljs-title function_">defineProperty</span>(<span class="hljs-params">target, prop, descriptor</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`defineProperty: <span class="hljs-subst">${prop}</span>`</span>, descriptor);
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">defineProperty</span>(target, prop, descriptor);
  },

  <span class="hljs-comment">// 9. åŸå‹è®¿é—®æ‹¦æˆª</span>
  <span class="hljs-title function_">getPrototypeOf</span>(<span class="hljs-params">target</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'getPrototypeOf'</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">getPrototypeOf</span>(target);
  },

  <span class="hljs-comment">// 10. åŸå‹è®¾ç½®æ‹¦æˆª</span>
  <span class="hljs-title function_">setPrototypeOf</span>(<span class="hljs-params">target, prototype</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`setPrototypeOf:`</span>, prototype);
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">setPrototypeOf</span>(target, prototype);
  },

  <span class="hljs-comment">// 11. å¯æ‰©å±•æ€§åˆ¤æ–­æ‹¦æˆª</span>
  <span class="hljs-title function_">isExtensible</span>(<span class="hljs-params">target</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'isExtensible'</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">isExtensible</span>(target);
  },

  <span class="hljs-comment">// 12. é˜²æ­¢æ‰©å±•æ‹¦æˆª</span>
  <span class="hljs-title function_">preventExtensions</span>(<span class="hljs-params">target</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'preventExtensions'</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">preventExtensions</span>(target);
  },

  <span class="hljs-comment">// 13. è‡ªèº«å±æ€§æšä¸¾æ‹¦æˆª</span>
  <span class="hljs-title function_">ownKeys</span>(<span class="hljs-params">target</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ownKeys'</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">ownKeys</span>(target);
  }
};
</code></pre>
<h3 data-id="heading-9">é™·é˜±æ–¹æ³•è¯¦ç»†è§£æ</h3>
<h4 data-id="heading-10">1. geté™·é˜±ï¼šå±æ€§è®¿é—®æ‹¦æˆª</h4>
<p>get() ä¼šåœ¨è·å–å±æ€§å€¼çš„æ“ä½œä¸­è¢«è°ƒç”¨ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> getHandler = {
  <span class="hljs-title function_">get</span>(<span class="hljs-params">target, property, receiver</span>) {
    <span class="hljs-comment">// å¤„ç†ä¸å­˜åœ¨çš„å±æ€§</span>
    <span class="hljs-keyword">if</span> (!(property <span class="hljs-keyword">in</span> target)) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">`å±æ€§ä¸å­˜åœ¨: <span class="hljs-subst">${property}</span>`</span>);
    }

    <span class="hljs-comment">// å¤„ç†ç§æœ‰å±æ€§ï¼ˆçº¦å®šä»¥_å¼€å¤´çš„å±æ€§ä¸ºç§æœ‰ï¼‰</span>
    <span class="hljs-keyword">if</span> (property.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">'_'</span>)) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">`ä¸èƒ½è®¿é—®ç§æœ‰å±æ€§: <span class="hljs-subst">${property}</span>`</span>);
    }
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">get</span>(target, property, receiver);
  }
};
</code></pre>
<ul>
<li>å‚æ•°è¯´æ˜ï¼š
<ol>
<li>targetï¼šç›®æ ‡å¯¹è±¡</li>
<li>propertyï¼šå¼•ç”¨çš„ç›®æ ‡å¯¹è±¡ä¸Šçš„å±æ€§</li>
<li>receiverï¼šä»£ç†å¯¹è±¡</li>
</ol>
</li>
<li>è¿”å›å€¼è¯´æ˜ï¼šè¿”å›å€¼æ— é™åˆ¶</li>
</ul>
<h4 data-id="heading-11">2. seté™·é˜±ï¼šå±æ€§èµ‹å€¼æ‹¦æˆª</h4>
<p>set() ä¼šåœ¨è®¾ç½®å±æ€§å€¼çš„æ“ä½œä¸­è¢«è°ƒç”¨ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> setHandler = {
  <span class="hljs-title function_">set</span>(<span class="hljs-params">target, property, value, receiver</span>) {
    <span class="hljs-comment">// åªè¯»å±æ€§æ£€æŸ¥ï¼ˆçº¦å®šä»¥$å¼€å¤´çš„å±æ€§ä¸ºåªè¯»ï¼‰</span>
    <span class="hljs-keyword">if</span> (property.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">'$'</span>)) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">`å±æ€§ä¸å¯ä¿®æ”¹: <span class="hljs-subst">${property}</span>`</span>);
    }
    <span class="hljs-comment">// æ‰§è¡Œè®¾ç½®</span>
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">set</span>(target, property, value, receiver);
  }
};
</code></pre>
<ul>
<li>å‚æ•°è¯´æ˜ï¼š
<ol>
<li>targetï¼šç›®æ ‡å¯¹è±¡</li>
<li>propertyï¼šå¼•ç”¨çš„ç›®æ ‡å¯¹è±¡ä¸Šçš„å±æ€§</li>
<li>valueï¼šè¦ç»™å±æ€§è®¾ç½®çš„å€¼</li>
<li>receiverï¼šä»£ç†å¯¹è±¡</li>
</ol>
</li>
<li>è¿”å›å€¼è¯´æ˜ï¼šè¿”å› true è¡¨ç¤ºæˆåŠŸï¼›è¿”å›falseè¡¨ç¤ºå¤±è´¥ã€‚</li>
</ul>
<h4 data-id="heading-12">3. hasé™·é˜±ï¼šinæ“ä½œç¬¦æ‹¦æˆª</h4>
<p>has() ä¼šåœ¨ in æ“ä½œç¬¦ä¸­è¢«è°ƒç”¨ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> hasHandler = {
  <span class="hljs-title function_">has</span>(<span class="hljs-params">target, property</span>) {
    <span class="hljs-comment">// éšè—æŸäº›å±æ€§ï¼ˆä¸åœ¨inæ“ä½œä¸­æš´éœ²ï¼‰</span>
    <span class="hljs-keyword">const</span> hiddenProperties = [<span class="hljs-string">'password'</span>, <span class="hljs-string">'token'</span>, <span class="hljs-string">'_internal'</span>];
    <span class="hljs-keyword">if</span> (hiddenProperties.<span class="hljs-title function_">includes</span>(property)) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`éšè—å±æ€§: <span class="hljs-subst">${property}</span>`</span>);
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }

    <span class="hljs-comment">// è™šæ‹Ÿå±æ€§ï¼ˆä¸å­˜åœ¨ä½†è¿”å›trueï¼‰</span>
    <span class="hljs-keyword">const</span> virtualProperties = [<span class="hljs-string">'isAdmin'</span>, <span class="hljs-string">'hasAccess'</span>];
    <span class="hljs-keyword">if</span> (virtualProperties.<span class="hljs-title function_">includes</span>(property)) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`è™šæ‹Ÿå±æ€§: <span class="hljs-subst">${property}</span>`</span>);
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }

    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">has</span>(target, property);
  }
};
</code></pre>
<ul>
<li>å‚æ•°è¯´æ˜ï¼š
<ol>
<li>targetï¼šç›®æ ‡å¯¹è±¡</li>
<li>valueï¼šè¦ç»™å±æ€§è®¾ç½®çš„å€¼</li>
</ol>
</li>
<li>è¿”å›å€¼è¯´æ˜ï¼šè¿”å›å¸ƒå°”å€¼è¡¨ç¤ºå±æ€§æ˜¯å¦å­˜åœ¨ï¼Œè¿”å›éå¸ƒå°”å‹ä¼šè¢«è½¬æˆå¸ƒå°”å‹ã€‚</li>
</ul>
<blockquote>
<p>æ³¨ï¼šObject.keys() ä¸å— has() å½±å“ï¼Œä»ä¼šè¿”å›æ‰€æœ‰å±æ€§ã€‚</p>
</blockquote>
<h4 data-id="heading-13">4. applyé™·é˜±ï¼šå‡½æ•°è°ƒç”¨æ‹¦æˆª</h4>
<p>apply() ä¼šåœ¨è°ƒç”¨å‡½æ•°æ—¶è¢«è°ƒç”¨ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> applyHandler = {
  <span class="hljs-title function_">apply</span>(<span class="hljs-params">target, thisArg, argumentsList</span>) {
    <span class="hljs-comment">// å‚æ•°éªŒè¯</span>
    <span class="hljs-keyword">if</span> (target.<span class="hljs-property">name</span> === <span class="hljs-string">'calculate'</span>) {
      <span class="hljs-keyword">if</span> (argumentsList.<span class="hljs-property">length</span> &lt; <span class="hljs-number">2</span>) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'calculateå‡½æ•°éœ€è¦è‡³å°‘2ä¸ªå‚æ•°'</span>);
      }
      <span class="hljs-keyword">if</span> (!argumentsList.<span class="hljs-title function_">every</span>(<span class="hljs-function"><span class="hljs-params">arg</span> =&gt;</span> <span class="hljs-keyword">typeof</span> arg === <span class="hljs-string">'number'</span>)) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'calculateå‡½æ•°çš„æ‰€æœ‰å‚æ•°å¿…é¡»æ˜¯æ•°å­—'</span>);
      }
    }
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">apply</span>(target, thisArg, argumentsList);
  }
};
</code></pre>
<ul>
<li>å‚æ•°è¯´æ˜ï¼š
<ol>
<li>targetï¼šç›®æ ‡å¯¹è±¡</li>
<li>thisArgï¼šè°ƒç”¨å‡½æ•°æ—¶çš„thiså‚æ•°</li>
<li>argumentsListï¼šè°ƒç”¨å‡½æ•°æ—¶çš„å‚æ•°åˆ—è¡¨</li>
</ol>
</li>
<li>è¿”å›å€¼è¯´æ˜ï¼šè¿”å›å€¼æ— é™åˆ¶</li>
</ul>
<h4 data-id="heading-14">5. constructé™·é˜±ï¼šæ„é€ å‡½æ•°æ‹¦æˆª</h4>
<p>construct() ä¼šåœ¨è°ƒç”¨å‡½æ•°æ—¶è¢«è°ƒç”¨ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> constructHandler = {
  <span class="hljs-title function_">construct</span>(<span class="hljs-params">target, argumentsList, newTarget</span>) {
    <span class="hljs-comment">// å•ä¾‹æ¨¡å¼ï¼šç¡®ä¿åªæœ‰ä¸€ä¸ªå®ä¾‹</span>
    <span class="hljs-keyword">if</span> (target.<span class="hljs-property">_instance</span>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è¿”å›ç°æœ‰å®ä¾‹'</span>);
      <span class="hljs-keyword">return</span> target.<span class="hljs-property">_instance</span>;
    }

    <span class="hljs-comment">// åˆ›å»ºå®ä¾‹</span>
    <span class="hljs-keyword">const</span> instance = <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">construct</span>(target, argumentsList, newTarget);

    <span class="hljs-comment">// ä¸ºå•ä¾‹ä¿å­˜å®ä¾‹</span>
    <span class="hljs-keyword">if</span> (target.<span class="hljs-property">name</span> === <span class="hljs-string">'Singleton'</span>) {
      target.<span class="hljs-property">_instance</span> = instance;
    }

    <span class="hljs-comment">// ä¸ºå®ä¾‹æ·»åŠ é¢å¤–å±æ€§</span>
    instance.<span class="hljs-property">createdAt</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>();
    instance.<span class="hljs-property">_id</span> = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>().<span class="hljs-title function_">toString</span>(<span class="hljs-number">36</span>).<span class="hljs-title function_">substr</span>(<span class="hljs-number">2</span>, <span class="hljs-number">9</span>);

    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'åˆ›å»ºæ–°å®ä¾‹ï¼ŒID:'</span>, instance.<span class="hljs-property">_id</span>);
    <span class="hljs-keyword">return</span> instance;
  }
};
</code></pre>
<ul>
<li>å‚æ•°è¯´æ˜ï¼š
<ol>
<li>targetï¼šç›®æ ‡æ„é€ å‡½æ•°</li>
<li>argumentsListï¼šä¼ ç»™ç›®æ ‡æ„é€ å‡½æ•°çš„å‚æ•°åˆ—è¡¨</li>
<li>newTargetï¼šæœ€åˆè¢«è°ƒç”¨çš„æ„é€ å‡½æ•°</li>
</ol>
</li>
<li>è¿”å›å€¼è¯´æ˜ï¼šå¿…é¡»è¿”å›ä¸€ä¸ªå¯¹è±¡</li>
</ul>
<h4 data-id="heading-15">6. ownKeysé™·é˜±ï¼šå½±å“Object.keys()ç­‰éå†</h4>
<p>ownKeys() ä¼šåœ¨Object.keys()åŠç±»ä¼¼æ–¹æ³•ä¸­è¢«è°ƒç”¨ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> ownKeysHandler = {
  <span class="hljs-title function_">ownKeys</span>(<span class="hljs-params">target</span>) {
    <span class="hljs-comment">// è¿‡æ»¤æ‰ä»¥_å¼€å¤´çš„ç§æœ‰å±æ€§</span>
    <span class="hljs-keyword">const</span> keys = <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">ownKeys</span>(target);
    <span class="hljs-keyword">return</span> keys.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">key</span> =&gt;</span> {
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> key === <span class="hljs-string">'string'</span>) {
        <span class="hljs-keyword">return</span> !key.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">'_'</span>);
      }
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    });
  }
};
</code></pre>
<ul>
<li>å‚æ•°è¯´æ˜ï¼š
<ol>
<li>targetï¼šç›®æ ‡æ„é€ å‡½æ•°</li>
</ol>
</li>
<li>è¿”å›å€¼è¯´æ˜ï¼šå¿…é¡»è¿”å›ä¸€ä¸ªåŒ…å«å­—ç¬¦ä¸²æˆ–ç¬¦å·çš„å¯æšä¸¾å¯¹è±¡</li>
</ul>
<h4 data-id="heading-16">7. getOwnPropertyDescriptoré™·é˜±ï¼šå½±å“Object.getOwnPropertyDescriptor()</h4>
<p>getOwnPropertyDescriptor() ä¼šåœ¨Object.getOwnPropertyDescriptor()æ–¹æ³•ä¸­è¢«è°ƒç”¨ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> getOwnPropertyDescriptorHandler = {
  <span class="hljs-title function_">getOwnPropertyDescriptor</span>(<span class="hljs-params">target, prop</span>) {
    <span class="hljs-comment">// éšè—ç§æœ‰å±æ€§çš„æè¿°ç¬¦</span>
    <span class="hljs-keyword">if</span> (prop.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">'_'</span>)) {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">undefined</span>;
    }
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">getOwnPropertyDescriptor</span>(target, prop);
  }
};
</code></pre>
<ul>
<li>å‚æ•°è¯´æ˜ï¼š
<ol>
<li>targetï¼šç›®æ ‡æ„é€ å‡½æ•°</li>
<li>propï¼šå¼•ç”¨çš„ç›®æ ‡å¯¹è±¡ä¸Šçš„å­—ç¬¦ä¸²å±æ€§</li>
</ol>
</li>
<li>è¿”å›å€¼è¯´æ˜ï¼šå¿…é¡»è¿”å›å¯¹è±¡ï¼Œæˆ–åœ¨å±æ€§ä¸å­˜åœ¨æ—¶è¿”å› undefined</li>
</ul>
<h4 data-id="heading-17">8. definePropertyé™·é˜±ï¼šæ‹¦æˆªObject.defineProperty()</h4>
<p>defineProperty() ä¼šåœ¨Object.defineProperty()æ–¹æ³•ä¸­è¢«è°ƒç”¨ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> definePropertyHandler = {
  <span class="hljs-title function_">defineProperty</span>(<span class="hljs-params">target, prop, descriptor</span>) {
    <span class="hljs-comment">// é˜²æ­¢ä¿®æ”¹åªè¯»å±æ€§</span>
    <span class="hljs-keyword">if</span> (prop === <span class="hljs-string">'id'</span> &amp;&amp; target.<span class="hljs-property">id</span>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">'idå±æ€§æ˜¯åªè¯»çš„'</span>);
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">defineProperty</span>(target, prop, descriptor);
  }
};
</code></pre>
<ul>
<li>å‚æ•°è¯´æ˜ï¼š
<ol>
<li>targetï¼šç›®æ ‡æ„é€ å‡½æ•°</li>
<li>propï¼šå¼•ç”¨çš„ç›®æ ‡å¯¹è±¡ä¸Šçš„å­—ç¬¦ä¸²å±æ€§</li>
<li>descriptorï¼šåŒ…å«å¯é€‰çš„enumrableã€configurableã€valueã€get å’Œ set ç­‰å®šä¹‰çš„å¯¹è±¡</li>
</ol>
</li>
<li>è¿”å›å€¼è¯´æ˜ï¼šå¿…é¡»è¿”å›å¸ƒå°”å€¼ï¼Œè¡¨ç¤ºå±æ€§æ˜¯å¦æˆåŠŸå®šä¹‰</li>
</ul>
<h4 data-id="heading-18">9. deletePropertyé™·é˜±ï¼šæ‹¦æˆªdeleteæ“ä½œ</h4>
<p>deleteProperty() ä¼šåœ¨ delete æ“ä½œä¸­è¢«è°ƒç”¨ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> deletePropertyHandler = {
  <span class="hljs-title function_">deleteProperty</span>(<span class="hljs-params">target, prop</span>) {
    <span class="hljs-comment">// é˜²æ­¢åˆ é™¤é‡è¦å±æ€§</span>
    <span class="hljs-keyword">const</span> protectedProps = [<span class="hljs-string">'id'</span>, <span class="hljs-string">'createdAt'</span>];
    <span class="hljs-keyword">if</span> (protectedProps.<span class="hljs-title function_">includes</span>(prop)) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">`ä¸èƒ½åˆ é™¤å—ä¿æŠ¤çš„å±æ€§: <span class="hljs-subst">${prop}</span>`</span>);
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">deleteProperty</span>(target, prop);
  }
};
</code></pre>
<ul>
<li>å‚æ•°è¯´æ˜ï¼š
<ol>
<li>targetï¼šç›®æ ‡æ„é€ å‡½æ•°</li>
<li>propertyï¼šå¼•ç”¨çš„ç›®æ ‡å¯¹è±¡ä¸Šçš„å±æ€§</li>
</ol>
</li>
<li>è¿”å›å€¼è¯´æ˜ï¼šå¿…é¡»è¿”å›å¸ƒå°”å€¼ï¼Œè¡¨ç¤ºå±æ€§æ˜¯å¦è¢«æˆåŠŸåˆ é™¤</li>
</ul>
<h4 data-id="heading-19">10. preventExtensionsé™·é˜±ï¼šæ‹¦æˆªObject.preventExtensions()</h4>
<p>preventExtensions() ä¼šåœ¨ Object.preventExtensions() æ–¹æ³•ä¸­è¢«è°ƒç”¨ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> preventExtensionsHandler = {
  <span class="hljs-title function_">preventExtensions</span>(<span class="hljs-params">target</span>) {
    <span class="hljs-comment">// åœ¨é˜»æ­¢æ‰©å±•å‰æ·»åŠ æ ‡è®°</span>
    target.<span class="hljs-property">_frozenAt</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>();
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">preventExtensions</span>(target);
  }
};
</code></pre>
<ul>
<li>å‚æ•°è¯´æ˜ï¼š
<ol>
<li>targetï¼šç›®æ ‡æ„é€ å‡½æ•°</li>
</ol>
</li>
<li>è¿”å›å€¼è¯´æ˜ï¼šå¿…é¡»è¿”å›å¸ƒå°”å€¼ï¼Œè¡¨ç¤º target æ˜¯å¦å·²ç»ä¸å¯æ‰©å±•</li>
</ul>
<h4 data-id="heading-20">11. getPrototypeOfé™·é˜±ï¼šæ‹¦æˆªObject.getPrototypeOf()</h4>
<p>getPrototypeOf() ä¼šåœ¨ Object.getPrototypeOf() æ–¹æ³•ä¸­è¢«è°ƒç”¨ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> getPrototypeOfHandler = {
  <span class="hljs-title function_">getPrototypeOf</span>(<span class="hljs-params">target</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">getPrototypeOf</span>(target);
  }
};
</code></pre>
<ul>
<li>å‚æ•°è¯´æ˜ï¼š
<ol>
<li>targetï¼šç›®æ ‡æ„é€ å‡½æ•°</li>
</ol>
</li>
<li>è¿”å›å€¼è¯´æ˜ï¼šå¿…é¡»è¿”å›å¯¹è±¡æˆ–null</li>
</ul>
<h4 data-id="heading-21">12. setPrototypeOfé™·é˜±ï¼šæ‹¦æˆªObject.setPrototypeOf()</h4>
<p>setPrototypeOf() ä¼šåœ¨ Object.setPrototypeOf() æ–¹æ³•ä¸­è¢«è°ƒç”¨ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> setPrototypeOfHandler = {
  <span class="hljs-title function_">setPrototypeOf</span>(<span class="hljs-params">target, prototype</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">setPrototypeOf</span>(target, prototype);
  }
};
</code></pre>
<ul>
<li>å‚æ•°è¯´æ˜ï¼š
<ol>
<li>targetï¼šç›®æ ‡æ„é€ å‡½æ•°</li>
<li>propertyï¼šå¼•ç”¨çš„ç›®æ ‡å¯¹è±¡ä¸Šçš„å±æ€§</li>
</ol>
</li>
<li>è¿”å›å€¼è¯´æ˜ï¼šå¿…é¡»è¿”å›å¸ƒå°”å€¼ï¼Œè¡¨ç¤ºåŸå‹èµ‹å€¼æ˜¯å¦æˆåŠŸ</li>
</ul>
<h4 data-id="heading-22">13. isExtensibleé™·é˜±ï¼šæ‹¦æˆªObject.isExtensible()</h4>
<p>isExtensible() ä¼šåœ¨ Object.isExtensible() æ–¹æ³•ä¸­è¢«è°ƒç”¨ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> isExtensibleHandler = {
  <span class="hljs-title function_">isExtensible</span>(<span class="hljs-params">targete</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">isExtensible</span>(targete);
  }
};
</code></pre>
<ul>
<li>å‚æ•°è¯´æ˜ï¼š
<ol>
<li>targetï¼šç›®æ ‡æ„é€ å‡½æ•°</li>
</ol>
</li>
<li>è¿”å›å€¼è¯´æ˜ï¼šå¿…é¡»è¿”å›å¸ƒå°”å€¼ï¼Œè¡¨ç¤º target æ˜¯å¦å¯æ‰©å±•</li>
</ul>
<h2 data-id="heading-23">å¯æ’¤é”€ä»£ç†</h2>
<h3 data-id="heading-24">ä»€ä¹ˆæ˜¯å¯æ’¤é”€ä»£ç†ï¼Ÿ</h3>
<p><strong>å¯æ’¤é”€ä»£ç†</strong>ï¼ˆRevocable Proxyï¼‰æ˜¯ä¸€ç§ç‰¹æ®Šçš„ä»£ç†ï¼Œå®ƒæä¾›äº†ä¸€ä¸ª <code>revoke()</code> æ–¹æ³•ï¼Œè°ƒç”¨è¯¥æ–¹æ³•åï¼Œä»£ç†å°†ä¸å†å¯ç”¨ï¼Œæ‰€æœ‰å¯¹ä»£ç†çš„æ“ä½œéƒ½ä¼šæŠ›å‡º <code>TypeError</code>ï¼Œå³ï¼šä¼šä¸­æ–­ä»£ç†å¯¹è±¡å’Œç›®æ ‡å¯¹è±¡ä¹‹é—´çš„è”ç³»ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> target = { <span class="hljs-attr">name</span>: <span class="hljs-string">'zhangsan'</span> };
<span class="hljs-keyword">const</span> handler = {
  <span class="hljs-title function_">get</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-string">'foo'</span>;
  }
}
<span class="hljs-comment">// åˆ›å»ºå¯æ’¤é”€ä»£ç†</span>
<span class="hljs-keyword">const</span> { proxy, revoke } = <span class="hljs-title class_">Proxy</span>.<span class="hljs-title function_">revocable</span>(target, handler);

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(proxy.<span class="hljs-property">name</span>); <span class="hljs-comment">// 'zhangsan'</span>

<span class="hljs-comment">// æ’¤é”€ä»£ç†</span>
<span class="hljs-title function_">revoke</span>();

<span class="hljs-comment">// ä»£ç†å·²å¤±æ•ˆ</span>
<span class="hljs-keyword">try</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(proxy.<span class="hljs-property">name</span>); <span class="hljs-comment">// TypeError: Cannot perform 'get' on a proxy that has been revoked</span>
} <span class="hljs-keyword">catch</span> (error) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'é”™è¯¯:'</span>, error.<span class="hljs-property">message</span>);
}
</code></pre>
<h2 data-id="heading-25">å®ç°å“åº”å¼æ•°æ®ï¼ˆVue3åŸç†ï¼‰</h2>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç®€æ˜“ç‰ˆVue3å“åº”å¼ç³»ç»Ÿ</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ReactiveSystem</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">targetMap</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WeakMap</span>(); <span class="hljs-comment">// å­˜å‚¨ä¾èµ–å…³ç³»</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">effectStack</span> = [];          <span class="hljs-comment">// å½“å‰æ­£åœ¨æ‰§è¡Œçš„effect</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">batchQueue</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>();    <span class="hljs-comment">// æ‰¹é‡æ›´æ–°é˜Ÿåˆ—</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">isBatching</span> = <span class="hljs-literal">false</span>;        <span class="hljs-comment">// æ˜¯å¦å¤„äºæ‰¹é‡æ›´æ–°æ¨¡å¼</span>
  }

  <span class="hljs-comment">// æ ¸å¿ƒï¼šåˆ›å»ºå“åº”å¼å¯¹è±¡</span>
  <span class="hljs-title function_">reactive</span>(<span class="hljs-params">target</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Proxy</span>(target, {
      <span class="hljs-title function_">get</span>(<span class="hljs-params">target, key, receiver</span>) {
        <span class="hljs-comment">// è·å–åŸå§‹å€¼</span>
        <span class="hljs-keyword">const</span> result = <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">get</span>(target, key, receiver);

        <span class="hljs-comment">// ä¾èµ–æ”¶é›†</span>
        <span class="hljs-title function_">track</span>(target, key);

        <span class="hljs-comment">// æ·±åº¦å“åº”å¼ï¼ˆå¦‚æœå€¼æ˜¯å¯¹è±¡ï¼Œç»§ç»­ä»£ç†ï¼‰</span>
        <span class="hljs-keyword">if</span> (result &amp;&amp; <span class="hljs-keyword">typeof</span> result === <span class="hljs-string">'object'</span>) {
          <span class="hljs-keyword">return</span> <span class="hljs-title function_">reactive</span>(result);
        }

        <span class="hljs-keyword">return</span> result;
      },

      <span class="hljs-title function_">set</span>(<span class="hljs-params">target, key, value, receiver</span>) {
        <span class="hljs-comment">// è·å–æ—§å€¼</span>
        <span class="hljs-keyword">const</span> oldValue = target[key];

        <span class="hljs-comment">// è®¾ç½®æ–°å€¼</span>
        <span class="hljs-keyword">const</span> result = <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">set</span>(target, key, value, receiver);

        <span class="hljs-comment">// è§¦å‘æ›´æ–°ï¼ˆå€¼ç¡®å®æ”¹å˜æ—¶æ‰è§¦å‘ï¼‰</span>
        <span class="hljs-keyword">if</span> (oldValue !== value) {
          <span class="hljs-title function_">trigger</span>(target, key);
        }

        <span class="hljs-keyword">return</span> result;
      },

      <span class="hljs-comment">// å¤„ç†åˆ é™¤æ“ä½œ</span>
      <span class="hljs-title function_">deleteProperty</span>(<span class="hljs-params">target, key</span>) {
        <span class="hljs-keyword">const</span> hasKey = key <span class="hljs-keyword">in</span> target;
        <span class="hljs-keyword">const</span> result = <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">deleteProperty</span>(target, key);

        <span class="hljs-keyword">if</span> (hasKey &amp;&amp; result) {
          <span class="hljs-title function_">trigger</span>(target, key);
        }

        <span class="hljs-keyword">return</span> result;
      }
    });
  }

  <span class="hljs-comment">// ä¾èµ–æ”¶é›†</span>
  <span class="hljs-title function_">track</span>(<span class="hljs-params">target, key</span>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">effectStack</span>.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span>;

    <span class="hljs-keyword">let</span> depsMap = <span class="hljs-variable language_">this</span>.<span class="hljs-property">targetMap</span>.<span class="hljs-title function_">get</span>(target);
    <span class="hljs-keyword">if</span> (!depsMap) {
      depsMap = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">targetMap</span>.<span class="hljs-title function_">set</span>(target, depsMap);
    }

    <span class="hljs-keyword">let</span> dep = depsMap.<span class="hljs-title function_">get</span>(key);
    <span class="hljs-keyword">if</span> (!dep) {
      dep = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>();
      depsMap.<span class="hljs-title function_">set</span>(key, dep);
    }

    <span class="hljs-comment">// æ”¶é›†å½“å‰æ­£åœ¨æ‰§è¡Œçš„effect</span>
    <span class="hljs-keyword">const</span> activeEffect = <span class="hljs-variable language_">this</span>.<span class="hljs-property">effectStack</span>[<span class="hljs-variable language_">this</span>.<span class="hljs-property">effectStack</span>.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>];
    <span class="hljs-keyword">if</span> (activeEffect) {
      dep.<span class="hljs-title function_">add</span>(activeEffect);
      <span class="hljs-comment">// effectä¹Ÿéœ€è¦çŸ¥é“å“ªäº›ä¾èµ–æ”¶é›†äº†å®ƒ</span>
      activeEffect.<span class="hljs-property">deps</span>.<span class="hljs-title function_">push</span>(dep);
    }
  }

  <span class="hljs-comment">// è§¦å‘æ›´æ–°</span>
  <span class="hljs-title function_">trigger</span>(<span class="hljs-params">target, key</span>) {
    <span class="hljs-keyword">const</span> depsMap = <span class="hljs-variable language_">this</span>.<span class="hljs-property">targetMap</span>.<span class="hljs-title function_">get</span>(target);
    <span class="hljs-keyword">if</span> (!depsMap) <span class="hljs-keyword">return</span>;

    <span class="hljs-keyword">const</span> dep = depsMap.<span class="hljs-title function_">get</span>(key);
    <span class="hljs-keyword">if</span> (dep) {
      <span class="hljs-comment">// å¦‚æœæ˜¯æ‰¹é‡æ›´æ–°æ¨¡å¼ï¼ŒåŠ å…¥é˜Ÿåˆ—</span>
      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">isBatching</span>) {
        dep.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">effect</span> =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">batchQueue</span>.<span class="hljs-title function_">add</span>(effect));
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-comment">// ç«‹å³æ‰§è¡Œæ‰€æœ‰ä¾èµ–çš„effect</span>
        dep.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">effect</span> =&gt;</span> {
          <span class="hljs-keyword">if</span> (effect !== <span class="hljs-variable language_">this</span>.<span class="hljs-property">effectStack</span>[<span class="hljs-variable language_">this</span>.<span class="hljs-property">effectStack</span>.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>]) {
            effect.<span class="hljs-title function_">run</span>();
          }
        });
      }
    }
  }

  <span class="hljs-comment">// åˆ›å»ºeffectï¼ˆå‰¯ä½œç”¨ï¼‰</span>
  <span class="hljs-title function_">effect</span>(<span class="hljs-params">fn</span>) {
    <span class="hljs-keyword">const</span> effect = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ReactiveEffect</span>(fn, <span class="hljs-variable language_">this</span>);
    effect.<span class="hljs-title function_">run</span>();

    <span class="hljs-comment">// è¿”å›åœæ­¢å‡½æ•°</span>
    <span class="hljs-keyword">const</span> runner = effect.<span class="hljs-property">run</span>.<span class="hljs-title function_">bind</span>(effect);
    runner.<span class="hljs-property">effect</span> = effect;
    runner.<span class="hljs-property">stop</span> = <span class="hljs-function">() =&gt;</span> effect.<span class="hljs-title function_">stop</span>();

    <span class="hljs-keyword">return</span> runner;
  }

  <span class="hljs-comment">// å¼€å§‹æ‰¹é‡æ›´æ–°</span>
  <span class="hljs-title function_">batchStart</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">isBatching</span> = <span class="hljs-literal">true</span>;
  }

  <span class="hljs-comment">// ç»“æŸæ‰¹é‡æ›´æ–°</span>
  <span class="hljs-title function_">batchEnd</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">isBatching</span> = <span class="hljs-literal">false</span>;

    <span class="hljs-comment">// æ‰§è¡Œé˜Ÿåˆ—ä¸­çš„æ‰€æœ‰effect</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">batchQueue</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">effect</span> =&gt;</span> {
      <span class="hljs-keyword">if</span> (effect !== <span class="hljs-variable language_">this</span>.<span class="hljs-property">effectStack</span>[<span class="hljs-variable language_">this</span>.<span class="hljs-property">effectStack</span>.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>]) {
        effect.<span class="hljs-title function_">run</span>();
      }
    });

    <span class="hljs-variable language_">this</span>.<span class="hljs-property">batchQueue</span>.<span class="hljs-title function_">clear</span>();
  }

  <span class="hljs-comment">// computedè®¡ç®—å±æ€§</span>
  <span class="hljs-title function_">computed</span>(<span class="hljs-params">getter</span>) {
    <span class="hljs-keyword">let</span> value;
    <span class="hljs-keyword">let</span> dirty = <span class="hljs-literal">true</span>;

    <span class="hljs-keyword">const</span> runner = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">effect</span>(<span class="hljs-function">() =&gt;</span> {
      value = <span class="hljs-title function_">getter</span>();
      dirty = <span class="hljs-literal">false</span>;
    });

    <span class="hljs-keyword">return</span> {
      <span class="hljs-keyword">get</span> <span class="hljs-title function_">value</span>() {
        <span class="hljs-keyword">if</span> (dirty) {
          <span class="hljs-title function_">runner</span>();
        }
        <span class="hljs-keyword">return</span> value;
      }
    };
  }

  <span class="hljs-comment">// watchä¾¦å¬å™¨</span>
  <span class="hljs-title function_">watch</span>(<span class="hljs-params">source, callback, options = {}</span>) {
    <span class="hljs-keyword">let</span> getter;

    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> source === <span class="hljs-string">'function'</span>) {
      getter = source;
    } <span class="hljs-keyword">else</span> {
      getter = <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">traverse</span>(source);
    }

    <span class="hljs-keyword">let</span> oldValue;
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">job</span> = (<span class="hljs-params"/>) =&gt; {
      <span class="hljs-keyword">const</span> newValue = <span class="hljs-title function_">runner</span>();
      <span class="hljs-title function_">callback</span>(newValue, oldValue);
      oldValue = newValue;
    };

    <span class="hljs-keyword">const</span> runner = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">effect</span>(getter, {
      <span class="hljs-attr">lazy</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">scheduler</span>: job
    });

    oldValue = <span class="hljs-title function_">runner</span>();

    <span class="hljs-keyword">if</span> (options.<span class="hljs-property">immediate</span>) {
      <span class="hljs-title function_">job</span>();
    }
  }

  <span class="hljs-comment">// æ·±åº¦éå†å¯¹è±¡ï¼ˆç”¨äºwatchï¼‰</span>
  <span class="hljs-title function_">traverse</span>(<span class="hljs-params">value, seen = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Set</span>()</span>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> value !== <span class="hljs-string">'object'</span> || value === <span class="hljs-literal">null</span> || seen.<span class="hljs-title function_">has</span>(value)) {
      <span class="hljs-keyword">return</span> value;
    }

    seen.<span class="hljs-title function_">add</span>(value);

    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> key <span class="hljs-keyword">in</span> value) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">traverse</span>(value[key], seen);
    }

    <span class="hljs-keyword">return</span> value;
  }
}

<span class="hljs-comment">// å“åº”å¼effectç±»</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ReactiveEffect</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">fn, scheduler</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">fn</span> = fn;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">scheduler</span> = scheduler;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">deps</span> = [];
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">active</span> = <span class="hljs-literal">true</span>;
  }

  <span class="hljs-title function_">run</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">active</span>) <span class="hljs-keyword">return</span>;

    <span class="hljs-keyword">try</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">scheduler</span>.<span class="hljs-property">effectStack</span>.<span class="hljs-title function_">push</span>(<span class="hljs-variable language_">this</span>);
      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">fn</span>();
    } <span class="hljs-keyword">finally</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">scheduler</span>.<span class="hljs-property">effectStack</span>.<span class="hljs-title function_">pop</span>();
    }
  }

  <span class="hljs-title function_">stop</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">active</span>) {
      <span class="hljs-comment">// ä»æ‰€æœ‰ä¾èµ–ä¸­ç§»é™¤è‡ªå·±</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">deps</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">dep</span> =&gt;</span> dep.<span class="hljs-title function_">delete</span>(<span class="hljs-variable language_">this</span>));
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">deps</span>.<span class="hljs-property">length</span> = <span class="hljs-number">0</span>;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">active</span> = <span class="hljs-literal">false</span>;
    }
  }
}
</code></pre>
<h2 data-id="heading-26">å®ç°ä¸å¯å˜æ•°æ®ï¼ˆimmer.jsåŸç†ï¼‰</h2>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç®€æ˜“ç‰ˆimmerå®ç°</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Immer</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">baseState</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">baseState</span> = baseState;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">draft</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">createDraft</span>(baseState);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">isModified</span> = <span class="hljs-literal">false</span>;
  }

  <span class="hljs-comment">// åˆ›å»ºè‰ç¨¿ï¼ˆä»£ç†ï¼‰</span>
  <span class="hljs-title function_">createDraft</span>(<span class="hljs-params">base</span>) {
    <span class="hljs-comment">// å¦‚æœä¸æ˜¯å¯¹è±¡ï¼Œç›´æ¥è¿”å›</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> base !== <span class="hljs-string">'object'</span> || base === <span class="hljs-literal">null</span>) {
      <span class="hljs-keyword">return</span> base;
    }

    <span class="hljs-comment">// å¤„ç†æ•°ç»„</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(base)) {
      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">createArrayDraft</span>(base);
    }

    <span class="hljs-comment">// å¤„ç†å¯¹è±¡</span>
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">createObjectDraft</span>(base);
  }

  <span class="hljs-comment">// åˆ›å»ºå¯¹è±¡è‰ç¨¿</span>
  <span class="hljs-title function_">createObjectDraft</span>(<span class="hljs-params">base</span>) {
    <span class="hljs-keyword">const</span> draft = <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(base) ? [] : {};

    <span class="hljs-comment">// å¤åˆ¶æ‰€æœ‰å±æ€§</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> key <span class="hljs-keyword">in</span> base) {
      <span class="hljs-keyword">if</span> (base.<span class="hljs-title function_">hasOwnProperty</span>(key)) {
        draft[key] = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">createDraft</span>(base[key]);
      }
    }

    <span class="hljs-comment">// åˆ›å»ºä»£ç†</span>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Proxy</span>(draft, {
      <span class="hljs-attr">get</span>: <span class="hljs-function">(<span class="hljs-params">target, prop, receiver</span>) =&gt;</span> {
        <span class="hljs-comment">// ç‰¹æ®Šå±æ€§å¤„ç†</span>
        <span class="hljs-keyword">if</span> (prop === <span class="hljs-string">'__immer_draft__'</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        <span class="hljs-keyword">if</span> (prop === <span class="hljs-string">'__immer_original__'</span>) <span class="hljs-keyword">return</span> base;

        <span class="hljs-keyword">return</span> <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">get</span>(target, prop, receiver);
      },

      <span class="hljs-attr">set</span>: <span class="hljs-function">(<span class="hljs-params">target, prop, value, receiver</span>) =&gt;</span> {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">isModified</span> = <span class="hljs-literal">true</span>;

        <span class="hljs-comment">// å¦‚æœæ–°å€¼æ˜¯æ™®é€šå€¼ï¼Œç›´æ¥è®¾ç½®</span>
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> value !== <span class="hljs-string">'object'</span> || value === <span class="hljs-literal">null</span>) {
          <span class="hljs-keyword">return</span> <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">set</span>(target, prop, value, receiver);
        }

        <span class="hljs-comment">// å¦‚æœæ–°å€¼æ˜¯è‰ç¨¿ï¼Œè·å–å…¶æœ€ç»ˆçŠ¶æ€</span>
        <span class="hljs-keyword">if</span> (value.<span class="hljs-property">__immer_draft__</span>) {
          value = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">finalize</span>(value);
        }

        <span class="hljs-comment">// å¦‚æœæ–°å€¼æ˜¯å¯¹è±¡ï¼Œåˆ›å»ºæ–°çš„è‰ç¨¿</span>
        <span class="hljs-keyword">const</span> newDraft = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">createDraft</span>(value);
        <span class="hljs-keyword">return</span> <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">set</span>(target, prop, newDraft, receiver);
      },

      <span class="hljs-attr">deleteProperty</span>: <span class="hljs-function">(<span class="hljs-params">target, prop</span>) =&gt;</span> {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">isModified</span> = <span class="hljs-literal">true</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">deleteProperty</span>(target, prop);
      }
    });
  }

  <span class="hljs-comment">// åˆ›å»ºæ•°ç»„è‰ç¨¿ï¼ˆéœ€è¦ç‰¹æ®Šå¤„ç†ï¼‰</span>
  <span class="hljs-title function_">createArrayDraft</span>(<span class="hljs-params">base</span>) {
    <span class="hljs-keyword">const</span> draft = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">createObjectDraft</span>(base);

    <span class="hljs-comment">// ä»£ç†æ•°ç»„æ–¹æ³•</span>
    <span class="hljs-keyword">const</span> arrayMethods = [<span class="hljs-string">'push'</span>, <span class="hljs-string">'pop'</span>, <span class="hljs-string">'shift'</span>, <span class="hljs-string">'unshift'</span>, <span class="hljs-string">'splice'</span>, <span class="hljs-string">'sort'</span>, <span class="hljs-string">'reverse'</span>];

    arrayMethods.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">method</span> =&gt;</span> {
      <span class="hljs-keyword">const</span> originalMethod = <span class="hljs-title class_">Array</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>[method];

      draft[method] = <span class="hljs-keyword">function</span> (<span class="hljs-params">...args</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">isModified</span> = <span class="hljs-literal">true</span>;
        <span class="hljs-keyword">return</span> originalMethod.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, args);
      }.<span class="hljs-title function_">bind</span>({ <span class="hljs-attr">isModified</span>: <span class="hljs-literal">false</span> }); <span class="hljs-comment">// è¿™é‡Œç®€åŒ–å¤„ç†</span>
    });

    <span class="hljs-keyword">return</span> draft;
  }

  <span class="hljs-comment">// è·å–è‰ç¨¿</span>
  <span class="hljs-title function_">getDraft</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">draft</span>;
  }

  <span class="hljs-comment">// å®Œæˆä¿®æ”¹ï¼Œç”Ÿæˆæ–°çŠ¶æ€</span>
  <span class="hljs-title function_">produce</span>(<span class="hljs-params">producer</span>) {
    <span class="hljs-comment">// æ‰§è¡Œç”Ÿäº§è€…å‡½æ•°</span>
    <span class="hljs-title function_">producer</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">draft</span>);

    <span class="hljs-comment">// å¦‚æœæ²¡æœ‰ä¿®æ”¹ï¼Œè¿”å›åŸçŠ¶æ€</span>
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">isModified</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">baseState</span>;
    }

    <span class="hljs-comment">// æœ€ç»ˆåŒ–è‰ç¨¿ï¼Œç”Ÿæˆæ–°çŠ¶æ€</span>
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">finalize</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">draft</span>);
  }

  <span class="hljs-comment">// æœ€ç»ˆåŒ–è‰ç¨¿ï¼ˆå°†è‰ç¨¿è½¬æ¢ä¸ºæ™®é€šå¯¹è±¡ï¼‰</span>
  <span class="hljs-title function_">finalize</span>(<span class="hljs-params">draft</span>) {
    <span class="hljs-comment">// å¦‚æœä¸æ˜¯è‰ç¨¿ï¼Œç›´æ¥è¿”å›</span>
    <span class="hljs-keyword">if</span> (!draft || !draft.<span class="hljs-property">__immer_draft__</span>) {
      <span class="hljs-keyword">return</span> draft;
    }

    <span class="hljs-keyword">const</span> original = draft.<span class="hljs-property">__immer_original__</span>;
    <span class="hljs-keyword">const</span> result = <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(original) ? [] : {};
    <span class="hljs-keyword">let</span> hasChanges = <span class="hljs-literal">false</span>;

    <span class="hljs-comment">// æ”¶é›†æ‰€æœ‰é”®ï¼ˆåŒ…æ‹¬åŸå¯¹è±¡å’Œæ–°å¯¹è±¡ï¼‰</span>
    <span class="hljs-keyword">const</span> allKeys = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>([
      ...<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(original || {}),
      ...<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(draft)
    ]);

    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> key <span class="hljs-keyword">of</span> allKeys) {
      <span class="hljs-keyword">const</span> originalValue = original ? original[key] : <span class="hljs-literal">undefined</span>;
      <span class="hljs-keyword">const</span> draftValue = draft[key];

      <span class="hljs-comment">// å¦‚æœå±æ€§è¢«åˆ é™¤</span>
      <span class="hljs-keyword">if</span> (!(key <span class="hljs-keyword">in</span> draft)) {
        hasChanges = <span class="hljs-literal">true</span>;
        <span class="hljs-keyword">continue</span>;
      }

      <span class="hljs-comment">// å¦‚æœå€¼æ˜¯è‰ç¨¿ï¼Œé€’å½’æœ€ç»ˆåŒ–</span>
      <span class="hljs-keyword">if</span> (draftValue &amp;&amp; draftValue.<span class="hljs-property">__immer_draft__</span>) {
        <span class="hljs-keyword">const</span> finalized = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">finalize</span>(draftValue);
        <span class="hljs-keyword">if</span> (finalized !== originalValue) {
          hasChanges = <span class="hljs-literal">true</span>;
          result[key] = finalized;
        } <span class="hljs-keyword">else</span> {
          result[key] = originalValue;
        }
      }
      <span class="hljs-comment">// å¦‚æœå€¼è¢«ä¿®æ”¹</span>
      <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (draftValue !== originalValue) {
        hasChanges = <span class="hljs-literal">true</span>;
        result[key] = draftValue;
      }
      <span class="hljs-comment">// å€¼æœªä¿®æ”¹</span>
      <span class="hljs-keyword">else</span> {
        result[key] = originalValue;
      }
    }

    <span class="hljs-keyword">return</span> hasChanges ? result : original;
  }
}

<span class="hljs-comment">// ç®€åŒ–API</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">produce</span>(<span class="hljs-params">baseState, producer</span>) {
  <span class="hljs-keyword">const</span> immer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Immer</span>(baseState);
  <span class="hljs-keyword">return</span> immer.<span class="hljs-title function_">produce</span>(producer);
}

</code></pre>
<h2 data-id="heading-27">ç»“è¯­</h2>
<p>Proxyå’ŒReflectå¼€å¯äº†JavaScriptå…ƒç¼–ç¨‹çš„æ–°ç¯‡ç« ï¼Œå®ƒä»¬ä¸ä»…æ˜¯æ¡†æ¶å¼€å‘çš„åˆ©å™¨ï¼Œä¹Ÿæ˜¯ç†è§£ç°ä»£JavaScriptè¿è¡Œæ—¶ç‰¹æ€§çš„å…³é”®ã€‚å¯¹äºæ–‡ç« ä¸­é”™è¯¯çš„åœ°æ–¹æˆ–è€…æœ‰ä»»ä½•é—®é¢˜ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºç•™è¨€è®¨è®ºï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä½¿ç”¨ oxlint + oxfmt æ›¿æ¢ ESLint + Prettier]]></title>    <link>https://juejin.cn/post/7604685644684673076</link>    <guid>https://juejin.cn/post/7604685644684673076</guid>    <pubDate>2026-02-10T01:19:44.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604685644684673076" data-draft-id="7604685644684640308" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä½¿ç”¨ oxlint + oxfmt æ›¿æ¢ ESLint + Prettier"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-02-10T01:19:44.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Whbbit1999"/> <meta itemprop="url" content="https://juejin.cn/user/2225067267209288"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä½¿ç”¨ oxlint + oxfmt æ›¿æ¢ ESLint + Prettier
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2225067267209288/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Whbbit1999
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-10T01:19:44.000Z" title="Tue Feb 10 2026 01:19:44 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ€è¿‘æˆ‘å°†è‡ªå·±çš„ Nest é¡¹ç›®ä¸­çš„ ESLint å’Œ Prettier æ›¿æ¢ä¸º oxlint å’Œ oxfmtï¼Œè‡³ä»Šè¿è¡Œè‰¯å¥½ã€‚æœ€æ˜æ˜¾çš„æ”¹å–„æ˜¯é€Ÿåº¦ï¼šåŸå…ˆå®Œæ•´çš„ lint æ£€æŸ¥éœ€è¦ 10 å¤šç§’ï¼Œç°åœ¨ä»…éœ€ 1 ç§’å·¦å³ï¼›ä¿å­˜æ–‡ä»¶æ—¶çš„æ ¼å¼åŒ–ä¹Ÿå‡ ä¹æ— æ„Ÿå»¶è¿Ÿã€‚ä»Šå¤©å°±æ¥åˆ†äº«ä¸€ä¸‹ä¸ºä»€ä¹ˆè¦åšè¿™ä¸ªæ›¿æ¢ï¼Œä»¥åŠå¦‚ä½•å¹³æ»‘è¿ç§»ã€‚</p>
<h2 data-id="heading-0">ä»€ä¹ˆæ˜¯ oxlint å’Œ oxfmt</h2>
<p>ä¸¤è€…éƒ½å±äº <strong>oxc</strong> é¡¹ç›®ï¼ˆä¸€ä¸ªç”¨ Rust ç¼–å†™çš„é«˜æ€§èƒ½ JavaScript/TypeScript å·¥å…·é“¾ï¼‰ã€‚</p>
<ul>
<li><strong>oxlint</strong> å¯¹æ ‡ ESLintï¼Œç”¨äºä»£ç è´¨é‡æ£€æŸ¥ã€‚</li>
<li><strong>oxfmt</strong> å¯¹æ ‡ Prettierï¼Œç”¨äºä»£ç è‡ªåŠ¨æ ¼å¼åŒ–ã€‚</li>
</ul>
<p>ç›®å‰å®ƒä»¬å·²å®ç°ç»å¤§å¤šæ•°å¸¸ç”¨è§„åˆ™ä¸é…ç½®é€‰é¡¹ï¼Œå…¼å®¹æ€§è‰¯å¥½ï¼Œå®Œå…¨èƒ½æ»¡è¶³æ—¥å¸¸å¼€å‘éœ€æ±‚ã€‚</p>
<p>ç”±äºé‡‡ç”¨ Rust ç¼–å†™ï¼Œå®ƒä»¬åœ¨æ€§èƒ½ä¸Šå…·æœ‰æ•°é‡çº§ä¼˜åŠ¿ï¼ŒåŒæ—¶ä¿æŒäº†ä¸ç°æœ‰é…ç½®ç›¸ä¼¼çš„è¿ç§»ä½“éªŒã€‚</p>
<h2 data-id="heading-1">ä¸ºä»€ä¹ˆé€‰æ‹©å®ƒä»¬ï¼Ÿ</h2>
<ol>
<li><strong>æè‡´çš„é€Ÿåº¦</strong>ï¼šç›¸æ¯” ESLintï¼Œoxlint åœ¨å¤§å‹é¡¹ç›®ä¸­é€šå¸¸å¿« 50 å€ä»¥ä¸Šï¼›oxfmt ä¹Ÿè¿œå¿«äº Prettierï¼Œå°¤å…¶åœ¨å®æ—¶æ ¼å¼åŒ–æ—¶æ„ŸçŸ¥æ˜æ˜¾ã€‚</li>
<li><strong>é«˜åº¦å…¼å®¹</strong>ï¼šæ”¯æŒå¸¸è§çš„ ESLint è§„åˆ™ï¼ˆåŒ…æ‹¬ TypeScriptï¼‰å’Œ Prettier é…ç½®æ–¹å¼ï¼Œè¿ç§»æˆæœ¬ä½ã€‚</li>
<li><strong>è¿ç§»ç®€å•</strong>ï¼šé…ç½®ç»“æ„ä¸åŸæœ‰å·¥å…·ç›¸ä¼¼ï¼Œå¤§éƒ¨åˆ†è§„åˆ™åç§°ä¸€è‡´ï¼Œåªéœ€å°‘é‡è°ƒæ•´å³å¯æ¥å…¥ã€‚</li>
<li><strong>ä¸“æ³¨æ›¿ä»£</strong>ï¼šç›¸æ¯”äºä¸€ä½“åŒ–å·¥å…·é“¾ï¼ˆå¦‚ Biomeï¼‰ï¼Œoxlint/oxfmt æ›´ä¸“æ³¨äºç›´æ¥æ›¿ä»£ ESLint/Prettierï¼Œå¯¹ç°æœ‰é¡¹ç›®æ”¹é€ æ›´å‹å¥½ã€‚</li>
</ol>
<p>å¦‚æœä½ æ­£åœ¨å¯»æ‰¾æ›´å¿«çš„ä»£ç æ£€æŸ¥ä¸æ ¼å¼åŒ–æ–¹æ¡ˆï¼Œä¸”ä¸å¸Œæœ›å¤§å¹…æ”¹åŠ¨é…ç½®ï¼Œoxlint + oxfmt æ˜¯ä¸€ä¸ªå€¼å¾—å°è¯•çš„é€‰æ‹©ã€‚å®ƒä»¬ä¸ä»…å¸¦æ¥äº†å¼€å‘ä½“éªŒä¸Šçš„æµç•…æ„Ÿï¼Œä¹Ÿå»¶ç»­äº†ç†Ÿæ‚‰çš„é…ç½®æ–¹å¼ï¼Œæ˜¯ç›®å‰ Rust å·¥å…·é“¾ä¸­è¿ç§»æˆæœ¬è¾ƒä½çš„ä¸€å¥—æ–¹æ¡ˆã€‚</p>
<h2 data-id="heading-2">åœ¨ç°æœ‰é¡¹ç›®ä¸­æˆ‘ä»¬å¦‚ä½•å°†eslint + prettieræ›¿æ¢ä¸º oxlint å’Œoxfmt</h2>
<p>æˆ‘è¿™é‡Œæœ‰ä¸€ä¸ªä¹‹å‰çš„ nest é¡¹ç›®ï¼Œä½¿ç”¨çš„æ˜¯ eslint + prettierçš„æ–¹æ¡ˆï¼Œæˆ‘ä»¬ä¸€èµ·å°†å®ƒæ”¹é€ ä¸€ä¸‹ã€‚å…·ä½“æ”¹é€ æ­¥éª¤å¦‚ä¸‹ï¼š</p>
<h3 data-id="heading-3">1. å®‰è£…ä¾èµ–</h3>
<pre><code class="hljs language-shell" lang="shell">pnpm add -D oxlint oxfmt
</code></pre>
<h3 data-id="heading-4">2. æ”¹é€ è„šæœ¬</h3>
<p>å°†ä¹‹å‰ä½¿ç”¨ ESLint å’Œ Prettier çš„è„šæœ¬æ”¹æˆä½¿ç”¨ oxlint å’Œ oxfmt</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"scripts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"lint:check"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"oxlint"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"lint"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"oxlint --fix"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"fmt"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"oxfmt"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"fmt:check"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"oxfmt --check"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 data-id="heading-5">3. è¿è¡Œè¿ç§»è„šæœ¬</h3>
<ul>
<li>Prettier è¿ç§»</li>
</ul>
<pre><code class="hljs language-shell" lang="shell">pnpm dlx oxfmt --migrate prettier
</code></pre>
<ul>
<li>ESLint è¿ç§»</li>
</ul>
<pre><code class="hljs language-shell" lang="shell">pnpm dlx @oxlint/migrate ./eslint.config.mjs
</code></pre>
<ul>
<li>é™åˆ¶å®ƒä»¬çš„è¿è¡ŒèŒƒå›´</li>
</ul>
<p>è¿™é‡Œæˆ‘ä¸éœ€è¦å®ƒæ¥æ ¼å¼åŒ– <code>drizzle</code> å’Œ <code>dist</code> ä¸­çš„æ–‡ä»¶ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ <code>.oxfmtrc.json</code> å’Œ <code>.oxlintrc.json</code> ä¸­æ·»åŠ ä»¥ä¸‹ä»£ç ã€‚ä½ å¯ä»¥æ ¹æ®ä½ è¦é™åˆ¶çš„èŒƒå›´æ¥é…ç½®</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-attr">"ignorePatterns"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"drizzle/**"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"dist/**/*"</span><span class="hljs-punctuation">]</span>
</code></pre>
<ul>
<li>åˆ é™¤ä¹‹å‰çš„ <code>.prettierrc</code></li>
<li>åˆ é™¤ eslint.config.mjs ä¸­çš„ prettier æ’ä»¶</li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> eslintPluginPrettierRecommended <span class="hljs-keyword">from</span> <span class="hljs-string">'eslint-plugin-prettier/recommended'</span>; <span class="hljs-comment">// [!code --]</span>
<span class="hljs-comment">// å…¶ä»–å†…å®¹</span>
eslintPluginPrettierRecommended, <span class="hljs-comment">// [!code --]</span>
</code></pre>
<ul>
<li>ç§»é™¤ prettier æ’ä»¶</li>
</ul>
<pre><code class="hljs language-shell" lang="shell">pnpm remove prettier
</code></pre>
<h3 data-id="heading-6">4. æ·»åŠ  vscode é…ç½®</h3>
<p><code>.vscode/extensions.json</code> ä¸­æ·»åŠ  oxc æ’ä»¶</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"recommendations"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"oxc.oxc-vscode"</span><span class="hljs-punctuation">,</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<blockquote>
<p>è¿™æ˜¯è®©åˆ«äººåœ¨ä½¿ç”¨è¯¥é¡¹ç›®æ—¶ vscode æç¤ºè¯¥é¡¹ç›®éœ€è¦å®‰è£… oxc</p>
</blockquote>
<p><code>.vscode/settings.json</code> æ”¹é€ </p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"oxc.fmt.configPath"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">".oxfmtrc.json"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"editor.defaultFormatter"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"oxc.oxc-vscode"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"editor.formatOnSave"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"[javascript]"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"editor.defaultFormatter"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"oxc.oxc-vscode"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"editor.formatOnSave"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"[typescript]"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"editor.defaultFormatter"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"oxc.oxc-vscode"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"editor.formatOnSave"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 data-id="heading-7">5. è¿è¡Œè„šæœ¬æ£€æŸ¥æ˜¯å¦å¯ä»¥æ­£ç¡®æ ¼å¼åŒ–</h3>
<h3 data-id="heading-8">ä¸¤è€…è¿è¡Œé€Ÿåº¦å¯¹æ¯”</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9d10aeb99ac7461d9465d0f01fa83c64~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgV2hiYml0MTk5OQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771291186&amp;x-signature=57ypc6Wf8kKu792lfatEM02DBmc%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3402f401c6984b638648deddbf4900b0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgV2hiYml0MTk5OQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771291186&amp;x-signature=2oBqxTZLBSGLCuw7GkrlwN5zLqA%3D" alt="" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[uni-app x å®æˆ˜ç¼–ç¨‹æŠ€å·§ï¼šä»é«˜æ•ˆå¼€å‘åˆ°æ€§èƒ½æ‹‰æ»¡ï¼Œé™„å¯ç›´æ¥å¤ç”¨ä»£ç ]]></title>    <link>https://juejin.cn/post/7604685644684722228</link>    <guid>https://juejin.cn/post/7604685644684722228</guid>    <pubDate>2026-02-10T01:24:18.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604685644684722228" data-draft-id="7604522883487121442" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="uni-app x å®æˆ˜ç¼–ç¨‹æŠ€å·§ï¼šä»é«˜æ•ˆå¼€å‘åˆ°æ€§èƒ½æ‹‰æ»¡ï¼Œé™„å¯ç›´æ¥å¤ç”¨ä»£ç "/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-02-10T01:24:18.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è¿è¡Œå¿«ä¹"/> <meta itemprop="url" content="https://juejin.cn/user/1212117848963450"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            uni-app x å®æˆ˜ç¼–ç¨‹æŠ€å·§ï¼šä»é«˜æ•ˆå¼€å‘åˆ°æ€§èƒ½æ‹‰æ»¡ï¼Œé™„å¯ç›´æ¥å¤ç”¨ä»£ç 
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1212117848963450/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è¿è¡Œå¿«ä¹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-10T01:24:18.000Z" title="Tue Feb 10 2026 01:24:18 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å‰è¨€ï¼šuni-app x ä½œä¸º DCloud æ¨å‡ºçš„æ–°ä¸€ä»£è·¨ç«¯å¼€å‘æ¡†æ¶ï¼ŒåŸºäº uts è¯­è¨€æ‰“é€ ï¼Œå®ç°äº†çœŸæ­£çš„åŸç”Ÿæ¸²æŸ“ã€è·¨ç«¯ä¸€è‡´ä½“éªŒï¼ŒåŒæ—¶å…¼å®¹ Vue è¯­æ³•ï¼Œæˆä¸ºè¶Šæ¥è¶Šå¤šå‰ç«¯å¼€å‘è€…çš„é¦–é€‰è·¨ç«¯æ–¹æ¡ˆã€‚ä½†å¾ˆå¤šå¼€å‘è€…åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œä»ä¼šé‡åˆ°â€œå†™æ³•ç¹çã€æ€§èƒ½ç“¶é¢ˆã€è·¨ç«¯å…¼å®¹è¸©å‘â€ç­‰é—®é¢˜ï¼Œå¯¼è‡´å¼€å‘æ•ˆç‡ä½ä¸‹ï¼Œæœ€ç»ˆé¡¹ç›®ä½“éªŒä¸ä½³ã€‚<br/>
æœ¬æ–‡èšç„¦ uni-app x å®æˆ˜å¼€å‘ä¸­çš„é«˜é¢‘åœºæ™¯ï¼Œæ‹†è§£ 8 ä¸ªå¯ç›´æ¥è½åœ°çš„ç¼–ç¨‹æŠ€å·§ï¼Œæ¶µç›– uts è¯­æ³•ä¼˜åŒ–ã€åŸç”Ÿèƒ½åŠ›è°ƒç”¨ã€æ€§èƒ½ä¼˜åŒ–ã€é¿å‘æŒ‡å—ç­‰æ ¸å¿ƒç»´åº¦ï¼Œæ¯ä¸ªæŠ€å·§å‡é…å¥—å®Œæ•´ä»£ç ç¤ºä¾‹å’Œåœºæ™¯è¯´æ˜ï¼Œæ–°æ‰‹èƒ½å¿«é€Ÿä¸Šæ‰‹ï¼Œè¿›é˜¶å¼€å‘è€…å¯ç›´æ¥å¤ç”¨æå‡æ•ˆç‡ï¼ŒåŠ©åŠ›å¤§å®¶ç”¨ uni-app x å¿«é€Ÿå¼€å‘é«˜è´¨é‡è·¨ç«¯åº”ç”¨ï¼ŒåŒæ—¶é€‚é… CSDN å¼•æµéœ€æ±‚ï¼Œæ”¶è—+ç‚¹èµ+è¯„è®ºæ‹‰æ»¡ï¼</p>
<h2 data-id="heading-0"><strong>ä¸€ã€uts è¯­æ³•é«˜æ•ˆç”¨æ³•ï¼šå‘Šåˆ«å†—ä½™ï¼Œæå‡ä»£ç å¯ç»´æŠ¤æ€§</strong></h2>
<p>uni-app x ä»¥ utsï¼ˆUni TypeScriptï¼‰ä¸ºæ ¸å¿ƒå¼€å‘è¯­è¨€ï¼Œå…¼å®¹ TypeScript è¯­æ³•ï¼ŒåŒæ—¶æ–°å¢äº†åŸç”Ÿç±»å‹ã€è·¨ç«¯æ¥å£ç­‰ç‰¹æ€§ï¼Œç”¨å¥½ uts èƒ½å¤§å¹…å‡å°‘å†—ä½™ä»£ç ï¼Œé™ä½åæœŸç»´æŠ¤æˆæœ¬ã€‚</p>
<h3 data-id="heading-1"><strong>æŠ€å·§1ï¼š uts ç±»å‹å®šä¹‰å¤ç”¨ï¼Œé¿å…é‡å¤ç¼–ç </strong></h3>
<p>ç—›ç‚¹ï¼šå¼€å‘ä¸­ç»å¸¸éœ€è¦é‡å¤å®šä¹‰ç›¸åŒçš„æ¥å£ç±»å‹ï¼ˆå¦‚æ¥å£è¿”å›æ•°æ®ã€ç»„ä»¶Propsï¼‰ï¼Œä¸ä»…å†—ä½™ï¼Œè¿˜å®¹æ˜“å‡ºç°ç±»å‹ä¸ä¸€è‡´é—®é¢˜ã€‚</p>
<p>æŠ€å·§ï¼šåˆ©ç”¨ uts çš„ interface å’Œ type ç‰¹æ€§ï¼Œå°è£…å…¬å…±ç±»å‹ï¼Œå…¨å±€å¤ç”¨ï¼ŒåŒæ—¶ç»“åˆæ³›å‹é€‚é…å¤šåœºæ™¯ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// src/typings/common.uts</span>
<span class="hljs-comment">// 1. å°è£…å…¬å…±å“åº”ä½“ç±»å‹ï¼ˆæ¥å£è¯·æ±‚é€šç”¨ï¼‰</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">ApiResponse</span>&lt;T&gt; {
  <span class="hljs-attr">code</span>: <span class="hljs-built_in">number</span>; <span class="hljs-comment">// çŠ¶æ€ç </span>
  <span class="hljs-attr">msg</span>: <span class="hljs-built_in">string</span>;  <span class="hljs-comment">// æç¤ºä¿¡æ¯</span>
  <span class="hljs-attr">data</span>: T;      <span class="hljs-comment">// å“åº”æ•°æ®ï¼ˆæ³›å‹é€‚é…ä¸åŒæ¥å£ï¼‰</span>
  <span class="hljs-attr">timestamp</span>: <span class="hljs-built_in">number</span>; <span class="hljs-comment">// æ—¶é—´æˆ³</span>
}

<span class="hljs-comment">// 2. å°è£…åˆ†é¡µå‚æ•°ç±»å‹ï¼ˆåˆ—è¡¨è¯·æ±‚é€šç”¨ï¼‰</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> <span class="hljs-title class_">PageParams</span> = {
  <span class="hljs-attr">pageNum</span>: <span class="hljs-built_in">number</span>; <span class="hljs-comment">// é¡µç </span>
  <span class="hljs-attr">pageSize</span>: <span class="hljs-built_in">number</span>; <span class="hljs-comment">// æ¯é¡µæ¡æ•°</span>
  keyword?: <span class="hljs-built_in">string</span>; <span class="hljs-comment">// å¯é€‰æœç´¢å…³é”®è¯</span>
};

<span class="hljs-comment">// 3. ä¸šåŠ¡ç›¸å…³ç±»å‹ï¼ˆå¦‚ç”¨æˆ·ä¿¡æ¯ï¼‰</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">UserInfo</span> {
  <span class="hljs-attr">id</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">username</span>: <span class="hljs-built_in">string</span>;
  avatar?: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">role</span>: <span class="hljs-string">'admin'</span> | <span class="hljs-string">'user'</span>; <span class="hljs-comment">// è”åˆç±»å‹é™å®šå–å€¼</span>
}

<span class="hljs-comment">// å®æˆ˜ä½¿ç”¨ï¼ˆé¡µé¢/ç»„ä»¶ä¸­ï¼‰</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ApiResponse</span>, <span class="hljs-title class_">PageParams</span>, <span class="hljs-title class_">UserInfo</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/typings/common.uts'</span>;

<span class="hljs-comment">// è¯·æ±‚ç”¨æˆ·åˆ—è¡¨ï¼ˆæ³›å‹æŒ‡å®šdataç±»å‹ï¼‰</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getUserList</span>(<span class="hljs-params">params: PageParams</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">ApiResponse</span>&lt;<span class="hljs-title class_">UserInfo</span>[]&gt;&gt; {
  <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> uni.<span class="hljs-title function_">request</span>({
    <span class="hljs-attr">url</span>: <span class="hljs-string">'/api/user/list'</span>,
    <span class="hljs-attr">method</span>: <span class="hljs-string">'GET'</span>,
    <span class="hljs-attr">data</span>: params
  });
  <span class="hljs-keyword">return</span> res.<span class="hljs-property">data</span>;
}
</code></pre>
<p>æ³¨æ„ï¼šç±»å‹æ–‡ä»¶å»ºè®®ç»Ÿä¸€æ”¾åœ¨ src/typings ç›®å½•ä¸‹ï¼Œæ–¹ä¾¿å…¨å±€å¼•å…¥ï¼›æ³›å‹çš„åˆç†ä½¿ç”¨èƒ½å‡å°‘é‡å¤å®šä¹‰ï¼Œæå‡ä»£ç çµæ´»æ€§ï¼Œå°¤å…¶é€‚åˆæ¥å£è¯·æ±‚åœºæ™¯ã€‚</p>
<h3 data-id="heading-2"><strong>æŠ€å·§2ï¼š uts å¼‚æ­¥å¤„ç†ä¼˜åŒ–ï¼Œæ›¿ä»£ä¼ ç»Ÿå›è°ƒ</strong></h3>
<p>ç—›ç‚¹ï¼šuni-app x ä¸­éƒ¨åˆ†åŸç”Ÿæ¥å£ä»æ”¯æŒå›è°ƒå†™æ³•ï¼ŒåµŒå¥—å±‚çº§å¤šï¼Œä»£ç å¯è¯»æ€§å·®ï¼Œå®¹æ˜“å‡ºç°â€œå›è°ƒåœ°ç‹±â€ã€‚</p>
<p>æŠ€å·§ï¼šåˆ©ç”¨ async/await å°è£…å›è°ƒå¼æ¥å£ï¼ŒåŒæ—¶ç»“åˆ try/catch ç»Ÿä¸€å¤„ç†å¼‚å¸¸ï¼Œç®€åŒ–ä»£ç é€»è¾‘ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// src/utils/uniAsync.uts</span>
<span class="hljs-comment">// å°è£…uni.getSystemInfoå›è°ƒæ¥å£ä¸ºPromiseå½¢å¼</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getSystemInfoAsync</span>(<span class="hljs-params"/>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">UniApp</span>.<span class="hljs-property">GetSystemInfoResult</span>&gt; {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
    uni.<span class="hljs-title function_">getSystemInfo</span>({
      <span class="hljs-attr">success</span>: <span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> <span class="hljs-title function_">resolve</span>(res),
      <span class="hljs-attr">fail</span>: <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> <span class="hljs-title function_">reject</span>(err)
    });
  });
}

<span class="hljs-comment">// å°è£…uni.showActionSheetæ¥å£</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">showActionSheetAsync</span>(<span class="hljs-params">options: UniApp.ShowActionSheetOptions</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">UniApp</span>.<span class="hljs-property">ShowActionSheetSuccessCallbackResult</span>&gt; {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
    uni.<span class="hljs-title function_">showActionSheet</span>({
      ...options,
      <span class="hljs-attr">success</span>: resolve,
      <span class="hljs-attr">fail</span>: reject
    });
  });
}

<span class="hljs-comment">// å®æˆ˜ä½¿ç”¨ï¼ˆé¡µé¢ä¸­ï¼‰</span>
<span class="hljs-keyword">import</span> { getSystemInfoAsync } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/utils/uniAsync.uts'</span>;

<span class="hljs-title function_">onLoad</span>(<span class="hljs-keyword">async</span> () =&gt; {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// å¼‚æ­¥è·å–ç³»ç»Ÿä¿¡æ¯ï¼Œæ— éœ€åµŒå¥—å›è°ƒ</span>
    <span class="hljs-keyword">const</span> systemInfo = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getSystemInfoAsync</span>();
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç³»ç»Ÿä¿¡æ¯ï¼š'</span>, systemInfo);
    <span class="hljs-comment">// åç»­é€»è¾‘ï¼ˆå¦‚æ ¹æ®ç³»ç»Ÿç±»å‹é€‚é…å¸ƒå±€ï¼‰</span>
    <span class="hljs-keyword">if</span> (systemInfo.<span class="hljs-property">platform</span> === <span class="hljs-string">'android'</span>) {
      <span class="hljs-comment">// å®‰å“ç«¯é€‚é…</span>
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (systemInfo.<span class="hljs-property">platform</span> === <span class="hljs-string">'ios'</span>) {
      <span class="hljs-comment">// iOSç«¯é€‚é…</span>
    }
  } <span class="hljs-keyword">catch</span> (err) {
    <span class="hljs-comment">// ç»Ÿä¸€å¼‚å¸¸å¤„ç†</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'è·å–ç³»ç»Ÿä¿¡æ¯å¤±è´¥ï¼š'</span>, err);
    uni.<span class="hljs-title function_">showToast</span>({ <span class="hljs-attr">title</span>: <span class="hljs-string">'è·å–ç³»ç»Ÿä¿¡æ¯å¤±è´¥'</span>, <span class="hljs-attr">icon</span>: <span class="hljs-string">'none'</span> });
  }
})
</code></pre>
<p>å»¶ä¼¸ï¼šå¯å°†å¸¸ç”¨çš„å›è°ƒå¼æ¥å£ï¼ˆå¦‚ uni.chooseImageã€uni.getStorageï¼‰å…¨éƒ¨å°è£…ä¸º Promise å½¢å¼ï¼Œæ”¾åœ¨ utils ç›®å½•ä¸‹ï¼Œå…¨å±€å¤ç”¨ï¼Œå¤§å¹…æå‡å¼€å‘æ•ˆç‡ã€‚</p>
<h3 data-id="heading-3"><strong>äºŒã€åŸç”Ÿèƒ½åŠ›è°ƒç”¨æŠ€å·§ï¼šç®€åŒ–é…ç½®ï¼Œå‘æŒ¥ uni-app x æ ¸å¿ƒä¼˜åŠ¿</strong></h3>
<p>uni-app x æœ€å¤§çš„ä¼˜åŠ¿çš„æ˜¯â€œä¸€æ¬¡ç¼–ç ï¼Œå¤šç«¯åŸç”Ÿæ¸²æŸ“â€ï¼Œä½†å¾ˆå¤šå¼€å‘è€…åœ¨è°ƒç”¨åŸç”Ÿèƒ½åŠ›æ—¶ï¼Œä»ä¼šå‡ºç°é…ç½®ç¹çã€è°ƒç”¨å¤±è´¥ç­‰é—®é¢˜ï¼Œä»¥ä¸‹æŠ€å·§å¯å¿«é€Ÿè§£å†³ã€‚</p>
<h3 data-id="heading-4"><strong>æŠ€å·§3ï¼š åŸç”Ÿç»„ä»¶æŒ‰éœ€æ³¨å†Œï¼Œå‡å°‘åŒ…ä½“ç§¯</strong></h3>
<p>ç—›ç‚¹ï¼šuni-app x æ”¯æŒå…¨å±€æ³¨å†ŒåŸç”Ÿç»„ä»¶ï¼Œä½†å…¨å±€æ³¨å†Œè¿‡å¤šç»„ä»¶ä¼šå¯¼è‡´åŒ…ä½“ç§¯å¢å¤§ï¼Œå½±å“åº”ç”¨å¯åŠ¨é€Ÿåº¦ã€‚</p>
<p>æŠ€å·§ï¼šé‡‡ç”¨â€œå±€éƒ¨æ³¨å†Œâ€æ¨¡å¼ï¼Œåªåœ¨éœ€è¦ä½¿ç”¨ç»„ä»¶çš„é¡µé¢/ç»„ä»¶ä¸­æ³¨å†Œï¼ŒåŒæ—¶åˆ©ç”¨ easycom è‡ªåŠ¨æ³¨å†Œç‰¹æ€§ï¼Œç®€åŒ–é…ç½®ï¼ˆæ— éœ€æ‰‹åŠ¨å¼•å…¥ç»„ä»¶ï¼‰ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript">&lt;!-- é¡µé¢ç»„ä»¶ï¼špages/index/index.<span class="hljs-property">vue</span> --&amp;gt;
&amp;lt;template&amp;gt;
  &amp;lt;view&amp;gt;
    &lt;!-- ç›´æ¥ä½¿ç”¨ç»„ä»¶ï¼Œæ— éœ€æ‰‹åŠ¨<span class="hljs-keyword">import</span>å’Œcomponentsæ³¨å†Œ --&gt;
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">uni-button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"primary"</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"handleClick"</span>&gt;</span>åŸç”ŸæŒ‰é’®<span class="hljs-tag">&lt;/<span class="hljs-name">uni-button</span>&gt;</span></span>
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">uni-list</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">uni-list-item</span> <span class="hljs-attr">title</span>=<span class="hljs-string">"åˆ—è¡¨é¡¹1"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">uni-list-item</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">uni-list</span>&gt;</span></span>
  &lt;/view&gt;
&lt;/template&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"uts"</span>&gt;</span><span class="javascript">
<span class="hljs-comment">// æ— éœ€æ‰‹åŠ¨æ³¨å†Œuni-buttonã€uni-listï¼ˆeasycomè‡ªåŠ¨æ³¨å†Œï¼‰</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleClick</span> = (<span class="hljs-params"/>) =&gt; {
  uni.<span class="hljs-title function_">showToast</span>({ <span class="hljs-attr">title</span>: <span class="hljs-string">'ç‚¹å‡»æˆåŠŸ'</span> });
};
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>

<span class="hljs-comment">// é…ç½®è¯´æ˜ï¼ˆpages.jsonï¼‰</span>
{
  <span class="hljs-string">"easycom"</span>: {
    <span class="hljs-comment">// å¼€å¯easycomè‡ªåŠ¨æ³¨å†Œï¼ˆé»˜è®¤å¼€å¯ï¼‰</span>
    <span class="hljs-string">"autoscan"</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-comment">// è‡ªå®šä¹‰ç»„ä»¶åŒ¹é…è§„åˆ™ï¼ˆå¯é€‰ï¼Œé»˜è®¤é€‚é…uni-uiç»„ä»¶ï¼‰</span>
    <span class="hljs-string">"custom"</span>: {
      <span class="hljs-string">"^uni-(.*)"</span>: <span class="hljs-string">"@dcloudio/uni-ui/lib/uni-$1/uni-$1.vue"</span>
    }
  },
  <span class="hljs-string">"pages"</span>: [
    {
      <span class="hljs-string">"path"</span>: <span class="hljs-string">"pages/index/index"</span>,
      <span class="hljs-string">"style"</span>: {
        <span class="hljs-string">"navigationBarTitleText"</span>: <span class="hljs-string">"é¦–é¡µ"</span>
      }
    }
  ]
}
</code></pre>
<p>æ³¨æ„ï¼šeasycom ä»…æ”¯æŒç¬¦åˆâ€œç»„ä»¶å-ç»„ä»¶æ–‡ä»¶åâ€è§„èŒƒçš„ç»„ä»¶ï¼Œè‡ªå®šä¹‰ç»„ä»¶å»ºè®®éµå¾ªæ­¤è§„èŒƒï¼›å¯¹äºä¸å¸¸ç”¨çš„åŸç”Ÿç»„ä»¶ï¼Œä¼˜å…ˆå±€éƒ¨æ³¨å†Œï¼Œé¿å…å…¨å±€æ³¨å†Œå ç”¨èµ„æºã€‚</p>
<h3 data-id="heading-5"><strong>æŠ€å·§4ï¼š åŸç”Ÿæ¨¡å—è°ƒç”¨é¿å‘ï¼Œè§£å†³è·¨ç«¯å…¼å®¹é—®é¢˜</strong></h3>
<p>ç—›ç‚¹ï¼šuni-app x è°ƒç”¨åŸç”Ÿæ¨¡å—ï¼ˆå¦‚åœ°å›¾ã€æ”¯ä»˜ï¼‰æ—¶ï¼Œå®¹æ˜“å‡ºç°â€œæŸä¸€ç«¯æ­£å¸¸ã€æŸä¸€ç«¯å¤±æ•ˆâ€çš„é—®é¢˜ï¼Œå°¤å…¶æ˜¯å°ç¨‹åºå’ŒAppç«¯çš„å·®å¼‚ã€‚</p>
<p>æŠ€å·§ï¼šè°ƒç”¨åŸç”Ÿæ¨¡å—å‰ï¼Œå…ˆåˆ¤æ–­å½“å‰è¿è¡Œç¯å¢ƒï¼Œæ ¹æ®ç¯å¢ƒå·®å¼‚å¤„ç†é€»è¾‘ï¼›åŒæ—¶åˆ©ç”¨ uni.getSystemInfoSync() å¿«é€Ÿè·å–ç¯å¢ƒä¿¡æ¯ï¼Œç®€åŒ–åˆ¤æ–­ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// src/utils/env.uts</span>
<span class="hljs-comment">// å°è£…ç¯å¢ƒåˆ¤æ–­å·¥å…·å‡½æ•°ï¼ˆå…¨å±€å¤ç”¨ï¼‰</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> envUtil = {
  <span class="hljs-comment">// åˆ¤æ–­æ˜¯å¦ä¸ºAppç«¯</span>
  <span class="hljs-title function_">isApp</span>(): <span class="hljs-built_in">boolean</span> {
    <span class="hljs-keyword">const</span> systemInfo = uni.<span class="hljs-title function_">getSystemInfoSync</span>();
    <span class="hljs-keyword">return</span> systemInfo.<span class="hljs-property">platform</span> === <span class="hljs-string">'android'</span> || systemInfo.<span class="hljs-property">platform</span> === <span class="hljs-string">'ios'</span>;
  },
  <span class="hljs-comment">// åˆ¤æ–­æ˜¯å¦ä¸ºå¾®ä¿¡å°ç¨‹åº</span>
  <span class="hljs-title function_">isWechatMini</span>(): <span class="hljs-built_in">boolean</span> {
    <span class="hljs-keyword">const</span> systemInfo = uni.<span class="hljs-title function_">getSystemInfoSync</span>();
    <span class="hljs-keyword">return</span> systemInfo.<span class="hljs-property">mpPlatform</span> === <span class="hljs-string">'weixin'</span>;
  },
  <span class="hljs-comment">// åˆ¤æ–­æ˜¯å¦ä¸ºæ”¯ä»˜å®å°ç¨‹åº</span>
  <span class="hljs-title function_">isAlipayMini</span>(): <span class="hljs-built_in">boolean</span> {
    <span class="hljs-keyword">const</span> systemInfo = uni.<span class="hljs-title function_">getSystemInfoSync</span>();
    <span class="hljs-keyword">return</span> systemInfo.<span class="hljs-property">mpPlatform</span> === <span class="hljs-string">'alipay'</span>;
  },
  <span class="hljs-comment">// åˆ¤æ–­æ˜¯å¦ä¸ºH5ç«¯</span>
  <span class="hljs-title function_">isH5</span>(): <span class="hljs-built_in">boolean</span> {
    <span class="hljs-keyword">const</span> systemInfo = uni.<span class="hljs-title function_">getSystemInfoSync</span>();
    <span class="hljs-keyword">return</span> systemInfo.<span class="hljs-property">platform</span> === <span class="hljs-string">'h5'</span>;
  }
};

<span class="hljs-comment">// å®æˆ˜ä½¿ç”¨ï¼ˆè°ƒç”¨åœ°å›¾æ¨¡å—ï¼‰</span>
<span class="hljs-keyword">import</span> { envUtil } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/utils/env.uts'</span>;

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">openMap</span>(<span class="hljs-params">latitude: <span class="hljs-built_in">number</span>, longitude: <span class="hljs-built_in">number</span></span>) {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// æ ¹æ®ç¯å¢ƒå·®å¼‚å¤„ç†åœ°å›¾è°ƒç”¨é€»è¾‘</span>
    <span class="hljs-keyword">if</span> (envUtil.<span class="hljs-title function_">isApp</span>()) {
      <span class="hljs-comment">// Appç«¯ï¼šè°ƒç”¨åŸç”Ÿåœ°å›¾æ¨¡å—</span>
      <span class="hljs-keyword">await</span> uni.<span class="hljs-title function_">openLocation</span>({
        latitude,
        longitude,
        <span class="hljs-attr">name</span>: <span class="hljs-string">'ç›®æ ‡ä½ç½®'</span>,
        <span class="hljs-attr">address</span>: <span class="hljs-string">'è¯¦ç»†åœ°å€'</span>
      });
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (envUtil.<span class="hljs-title function_">isWechatMini</span>()) {
      <span class="hljs-comment">// å¾®ä¿¡å°ç¨‹åºï¼šåˆ¤æ–­æ˜¯å¦æœ‰æƒé™</span>
      <span class="hljs-keyword">const</span> auth = <span class="hljs-keyword">await</span> uni.<span class="hljs-title function_">getSetting</span>();
      <span class="hljs-keyword">if</span> (!auth.<span class="hljs-property">authSetting</span>[<span class="hljs-string">'scope.userLocation'</span>]) {
        <span class="hljs-comment">// æ— æƒé™ï¼Œè¯·æ±‚æˆæƒ</span>
        <span class="hljs-keyword">await</span> uni.<span class="hljs-title function_">authorize</span>({ <span class="hljs-attr">scope</span>: <span class="hljs-string">'scope.userLocation'</span> });
      }
      <span class="hljs-comment">// è°ƒç”¨å¾®ä¿¡å°ç¨‹åºåœ°å›¾</span>
      <span class="hljs-keyword">await</span> uni.<span class="hljs-title function_">openLocation</span>({ latitude, longitude, <span class="hljs-attr">name</span>: <span class="hljs-string">'ç›®æ ‡ä½ç½®'</span> });
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (envUtil.<span class="hljs-title function_">isH5</span>()) {
      <span class="hljs-comment">// H5ç«¯ï¼šè·³è½¬ç™¾åº¦/é«˜å¾·åœ°å›¾ç½‘é¡µç‰ˆ</span>
      <span class="hljs-keyword">const</span> url = <span class="hljs-string">`https://api.map.baidu.com/marker?location=<span class="hljs-subst">${latitude}</span>,<span class="hljs-subst">${longitude}</span>&amp;title=ç›®æ ‡ä½ç½®&amp;output=html`</span>;
      <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">open</span>(url, <span class="hljs-string">'_blank'</span>);
    }
  } <span class="hljs-keyword">catch</span> (err) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'æ‰“å¼€åœ°å›¾å¤±è´¥ï¼š'</span>, err);
    uni.<span class="hljs-title function_">showToast</span>({ <span class="hljs-attr">title</span>: <span class="hljs-string">'æ‰“å¼€åœ°å›¾å¤±è´¥ï¼Œè¯·æ£€æŸ¥æƒé™'</span>, <span class="hljs-attr">icon</span>: <span class="hljs-string">'none'</span> });
  }
}
</code></pre>
<p>å…³é”®ï¼šåŸç”Ÿæ¨¡å—çš„è·¨ç«¯å·®å¼‚ä¸»è¦é›†ä¸­åœ¨â€œæƒé™é…ç½®â€å’Œâ€œæ¥å£å‚æ•°â€ä¸Šï¼Œæå‰åˆ¤æ–­ç¯å¢ƒï¼Œé’ˆå¯¹æ€§å¤„ç†ï¼Œèƒ½é¿å…80%çš„è·¨ç«¯å…¼å®¹é—®é¢˜ï¼›åŒæ—¶ï¼ŒAppç«¯éœ€åœ¨ manifest.json ä¸­é…ç½®å¯¹åº”æ¨¡å—æƒé™ï¼ˆå¦‚åœ°å›¾ã€å®šä½ï¼‰ã€‚</p>
<h2 data-id="heading-6"><strong>ä¸‰ã€æ€§èƒ½ä¼˜åŒ–æŠ€å·§ï¼šä»å¯åŠ¨åˆ°è¿è¡Œï¼Œå…¨æ–¹ä½æé€Ÿ</strong></h2>
<p>æ€§èƒ½æ˜¯è·¨ç«¯åº”ç”¨çš„æ ¸å¿ƒç«äº‰åŠ›ï¼Œuni-app x è™½ç„¶åŸç”Ÿæ¸²æŸ“æ€§èƒ½ä¼˜å¼‚ï¼Œä½†ä¸åˆç†çš„å¼€å‘æ–¹å¼ä»ä¼šå¯¼è‡´å¡é¡¿ã€å¯åŠ¨æ…¢ç­‰é—®é¢˜ï¼Œä»¥ä¸‹æŠ€å·§å¯å…¨æ–¹ä½ä¼˜åŒ–æ€§èƒ½ã€‚</p>
<h3 data-id="heading-7"><strong>æŠ€å·§5ï¼š é¡µé¢æ¸²æŸ“ä¼˜åŒ–ï¼Œå‡å°‘å¡é¡¿ï¼ˆæ ¸å¿ƒé‡ç‚¹ï¼‰</strong></h3>
<p>ç—›ç‚¹ï¼šåˆ—è¡¨æ¸²æŸ“ã€é¢‘ç¹æ•°æ®æ›´æ–°æ—¶ï¼Œå®¹æ˜“å‡ºç°é¡µé¢å¡é¡¿ã€æ‰å¸§ï¼Œå°¤å…¶æ˜¯å¤§æ•°æ®åˆ—è¡¨åœºæ™¯ã€‚</p>
<p>æŠ€å·§ï¼šç»“åˆ vue3 çš„å“åº”å¼ä¼˜åŒ–å’Œ uni-app x çš„æ¸²æŸ“ç‰¹æ€§ï¼Œåšå¥½3ç‚¹ï¼š1. åˆ—è¡¨æ¸²æŸ“ç”¨ v-for + keyï¼ˆå”¯ä¸€å€¼ï¼‰ï¼›2. å¤§æ•°æ®åˆ—è¡¨ç”¨åˆ†é¡µåŠ è½½+è™šæ‹Ÿåˆ—è¡¨ï¼›3. é¿å…é¢‘ç¹ä¿®æ”¹å“åº”å¼æ•°æ®ã€‚</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- å¤§æ•°æ®åˆ—è¡¨ä¼˜åŒ–ï¼šè™šæ‹Ÿåˆ—è¡¨ + åˆ†é¡µåŠ è½½ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">view</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- è™šæ‹Ÿåˆ—è¡¨ï¼šåªæ¸²æŸ“å¯è§†åŒºåŸŸå†…çš„åˆ—è¡¨é¡¹ï¼Œå‡å°‘DOMèŠ‚ç‚¹ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">uni-virtual-list</span> 
      <span class="hljs-attr">:height</span>=<span class="hljs-string">"500"</span> 
      <span class="hljs-attr">:item-height</span>=<span class="hljs-string">"80"</span> 
      <span class="hljs-attr">:items</span>=<span class="hljs-string">"listData"</span>
      <span class="hljs-attr">key</span>=<span class="hljs-string">"id"</span>
    &gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">template</span> #<span class="hljs-attr">item</span>=<span class="hljs-string">"{ item }"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">view</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"list-item"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">image</span> <span class="hljs-attr">:src</span>=<span class="hljs-string">"item.avatar"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"avatar"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">image</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">view</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"info"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">text</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"name"</span>&gt;</span>{{ item.username }}<span class="hljs-tag">&lt;/<span class="hljs-name">text</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">text</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"desc"</span>&gt;</span>{{ item.desc }}<span class="hljs-tag">&lt;/<span class="hljs-name">text</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">uni-virtual-list</span>&gt;</span><span class="hljs-comment">&lt;!-- åŠ è½½ä¸­/æ— æ•°æ®æç¤º --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">view</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">"loading"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"loading"</span>&gt;</span>åŠ è½½ä¸­...<span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">view</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">"!loading &amp;&amp; listData.length === 0"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"no-data"</span>&gt;</span>æš‚æ— æ•°æ®<span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"uts"</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { ref, onLoad } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">PageParams</span>, <span class="hljs-title class_">UserInfo</span>, <span class="hljs-title class_">ApiResponse</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/typings/common.uts'</span>;

<span class="hljs-keyword">const</span> listData = ref&lt;<span class="hljs-title class_">UserInfo</span>[]&gt;([]);
<span class="hljs-keyword">const</span> loading = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">false</span>);
<span class="hljs-keyword">const</span> pageNum = <span class="hljs-title function_">ref</span>(<span class="hljs-number">1</span>);
<span class="hljs-keyword">const</span> pageSize = <span class="hljs-title function_">ref</span>(<span class="hljs-number">10</span>);
<span class="hljs-keyword">const</span> hasMore = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">true</span>); <span class="hljs-comment">// æ˜¯å¦è¿˜æœ‰æ›´å¤šæ•°æ®</span>

<span class="hljs-comment">// åˆ†é¡µåŠ è½½æ•°æ®</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">loadData</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">if</span> (loading.<span class="hljs-property">value</span> || !hasMore.<span class="hljs-property">value</span>) <span class="hljs-keyword">return</span>;
  loading.<span class="hljs-property">value</span> = <span class="hljs-literal">true</span>;
  
  <span class="hljs-keyword">const</span> <span class="hljs-attr">params</span>: <span class="hljs-title class_">PageParams</span> = {
    <span class="hljs-attr">pageNum</span>: pageNum.<span class="hljs-property">value</span>,
    <span class="hljs-attr">pageSize</span>: pageSize.<span class="hljs-property">value</span>
  };
  
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> <span class="hljs-attr">res</span>: <span class="hljs-title class_">ApiResponse</span>&lt;<span class="hljs-title class_">UserInfo</span>[]&gt; = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getUserList</span>(params);
    <span class="hljs-keyword">if</span> (res.<span class="hljs-property">code</span> === <span class="hljs-number">200</span>) {
      <span class="hljs-keyword">const</span> newData = res.<span class="hljs-property">data</span> || [];
      <span class="hljs-comment">// é¿å…ç›´æ¥ä¿®æ”¹listDataï¼Œç”¨concatæ‹¼æ¥ï¼ˆå‡å°‘å“åº”å¼æ›´æ–°æ¬¡æ•°ï¼‰</span>
      listData.<span class="hljs-property">value</span> = listData.<span class="hljs-property">value</span>.<span class="hljs-title function_">concat</span>(newData);
      <span class="hljs-comment">// åˆ¤æ–­æ˜¯å¦è¿˜æœ‰æ›´å¤šæ•°æ®</span>
      hasMore.<span class="hljs-property">value</span> = newData.<span class="hljs-property">length</span> === pageSize.<span class="hljs-property">value</span>;
      pageNum.<span class="hljs-property">value</span>++;
    }
  } <span class="hljs-keyword">catch</span> (err) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'åŠ è½½æ•°æ®å¤±è´¥ï¼š'</span>, err);
  } <span class="hljs-keyword">finally</span> {
    loading.<span class="hljs-property">value</span> = <span class="hljs-literal">false</span>;
  }
};

<span class="hljs-comment">// é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–æ•°æ®</span>
<span class="hljs-title function_">onLoad</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title function_">loadData</span>();
});

<span class="hljs-comment">// ä¸‹æ‹‰åˆ·æ–°ï¼ˆé¡µé¢é…ç½®enablePullDownRefresh: trueï¼‰</span>
<span class="hljs-title function_">onPullDownRefresh</span>(<span class="hljs-function">() =&gt;</span> {
  pageNum.<span class="hljs-property">value</span> = <span class="hljs-number">1</span>;
  listData.<span class="hljs-property">value</span> = [];
  hasMore.<span class="hljs-property">value</span> = <span class="hljs-literal">true</span>;
  <span class="hljs-title function_">loadData</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {
    uni.<span class="hljs-title function_">stopPullDownRefresh</span>(); <span class="hljs-comment">// åœæ­¢ä¸‹æ‹‰åˆ·æ–°</span>
  });
});

<span class="hljs-comment">// ä¸Šæ‹‰åŠ è½½ï¼ˆé¡µé¢é…ç½®onReachBottomDistance: 50ï¼‰</span>
<span class="hljs-title function_">onReachBottom</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title function_">loadData</span>();
});
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
<span class="hljs-comment">/* æ ·å¼çœç•¥ï¼Œæ³¨æ„é¿å…ä½¿ç”¨å¤æ‚é€‰æ‹©å™¨ï¼Œå‡å°‘æ¸²æŸ“å¼€é”€ */</span>
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
</code></pre>
<p>è¡¥å……ï¼šè™šæ‹Ÿåˆ—è¡¨å¯ä½¿ç”¨ uni-ui çš„ uni-virtual-list ç»„ä»¶ï¼Œæ— éœ€è‡ªå·±å°è£…ï¼›åˆ—è¡¨æ¸²æŸ“æ—¶ï¼Œkey å¿…é¡»æ˜¯å”¯ä¸€å€¼ï¼ˆå¦‚ idï¼‰ï¼Œé¿å…ä½¿ç”¨ index ä½œä¸º keyï¼Œå¦åˆ™ä¼šå¯¼è‡´æ¸²æŸ“é”™ä¹±ï¼›é¢‘ç¹æ›´æ–°çš„æ•°æ®ï¼ˆå¦‚å€’è®¡æ—¶ï¼‰ï¼Œå¯ä½¿ç”¨ vue3 çš„ shallowRef æ›¿ä»£ refï¼Œå‡å°‘å“åº”å¼ç›‘å¬å¼€é”€ã€‚</p>
<h3 data-id="heading-8"><strong>æŠ€å·§6ï¼š åŒ…ä½“ç§¯ä¼˜åŒ–ï¼Œæå‡å¯åŠ¨é€Ÿåº¦</strong></h3>
<p>ç—›ç‚¹ï¼šAppç«¯åŒ…ä½“ç§¯è¿‡å¤§ï¼Œå¯¼è‡´ä¸‹è½½æ…¢ã€å¯åŠ¨æ…¢ï¼›å°ç¨‹åºç«¯åŒ…ä½“ç§¯è¶…è¿‡é™åˆ¶ï¼Œæ— æ³•ä¸Šçº¿ã€‚</p>
<p>æŠ€å·§ï¼šä»â€œèµ„æºã€ä»£ç ã€ä¾èµ–â€ä¸‰ä¸ªç»´åº¦ä¼˜åŒ–ï¼Œæ ¸å¿ƒæŠ€å·§å¦‚ä¸‹ï¼š</p>
<ol>
<li>
<p>èµ„æºä¼˜åŒ–ï¼šå›¾ç‰‡å‹ç¼©ï¼ˆä½¿ç”¨ tinypng å‹ç¼©ï¼‰ã€å›¾æ ‡ä½¿ç”¨ iconfont æ›¿ä»£æœ¬åœ°å›¾ç‰‡ã€å¤§æ–‡ä»¶ï¼ˆå¦‚è§†é¢‘ã€éŸ³é¢‘ï¼‰é‡‡ç”¨åœ¨çº¿åŠ è½½ï¼Œä¸æ‰“åŒ…è¿›åº”ç”¨ï¼›</p>
</li>
<li>
<p>ä»£ç ä¼˜åŒ–ï¼šåˆ é™¤æ— ç”¨ä»£ç ï¼ˆdead codeï¼‰ã€åˆå¹¶é‡å¤ä»£ç ã€ä½¿ç”¨ tree-shaking å‰”é™¤æœªä½¿ç”¨çš„ä¾èµ–ï¼ˆuni-app x æ‰“åŒ…æ—¶é»˜è®¤å¼€å¯ï¼‰ï¼›</p>
</li>
<li>
<p>ä¾èµ–ä¼˜åŒ–ï¼šå‡å°‘ä¸å¿…è¦çš„ç¬¬ä¸‰æ–¹ä¾èµ–ï¼Œä¼˜å…ˆä½¿ç”¨ uni-app x åŸç”Ÿèƒ½åŠ›æ›¿ä»£ç¬¬ä¸‰æ–¹æ’ä»¶ï¼ˆå¦‚æ—¥æœŸå¤„ç†ç”¨åŸç”Ÿ Dateï¼Œæ— éœ€å¼•å…¥ moment.jsï¼‰ï¼›</p>
</li>
<li>
<p>åˆ†åŒ…åŠ è½½ï¼šå°ç¨‹åºç«¯å¼€å¯åˆ†åŒ…åŠ è½½ï¼Œå°†ä¸å¸¸ç”¨çš„é¡µé¢æ”¾åœ¨åˆ†åŒ…ä¸­ï¼Œå‡å°‘ä¸»åŒ…ä½“ç§¯ï¼›Appç«¯å¯å¼€å¯æŒ‰éœ€åŠ è½½ï¼Œæå‡å¯åŠ¨é€Ÿåº¦ã€‚</p>
</li>
</ol>
<pre><code class="hljs language-json" lang="json"><span class="hljs-comment">// å°ç¨‹åºåˆ†åŒ…é…ç½®ï¼ˆpages.jsonï¼‰</span>
<span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"pages"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-comment">// ä¸»åŒ…é¡µé¢ï¼ˆå¸¸ç”¨é¡µé¢ï¼‰</span>
    <span class="hljs-punctuation">{</span> <span class="hljs-attr">"path"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"pages/index/index"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"style"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span> <span class="hljs-attr">"path"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"pages/login/login"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"style"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span> <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-comment">// åˆ†åŒ…é…ç½®ï¼ˆä¸å¸¸ç”¨é¡µé¢ï¼Œå¦‚ä¸ªäººä¸­å¿ƒã€è®¾ç½®ï¼‰</span>
  <span class="hljs-attr">"subPackages"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"root"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"pages/subpackage/"</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// åˆ†åŒ…æ ¹ç›®å½•</span>
      <span class="hljs-attr">"pages"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
        <span class="hljs-punctuation">{</span> <span class="hljs-attr">"path"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"my/my"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"style"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
        <span class="hljs-punctuation">{</span> <span class="hljs-attr">"path"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"setting/setting"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"style"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span> <span class="hljs-punctuation">}</span>
      <span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-comment">// é¢„åŠ è½½åˆ†åŒ…ï¼ˆè¿›å…¥ä¸»åŒ…é¡µé¢æ—¶ï¼Œé¢„åŠ è½½åˆ†åŒ…ï¼Œæå‡ä½“éªŒï¼‰</span>
  <span class="hljs-attr">"preloadRule"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"pages/index/index"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"network"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"all"</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// æ‰€æœ‰ç½‘ç»œç¯å¢ƒéƒ½é¢„åŠ è½½</span>
      <span class="hljs-attr">"packages"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"pages/subpackage"</span><span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h2 data-id="heading-9"><strong>å››ã€é¿å‘ä¸å®æˆ˜æŠ€å·§ï¼šè§£å†³å¼€å‘ä¸­æœ€å¸¸è§çš„é—®é¢˜</strong></h2>
<p>ç»“åˆå¤§é‡ uni-app x å®æˆ˜ç»éªŒï¼Œæ•´ç†äº†4ä¸ªæœ€å¸¸è§çš„å‘ï¼Œä»¥åŠå¯¹åº”çš„è§£å†³æ–¹æ¡ˆï¼Œå¸®ä½ å°‘èµ°å¼¯è·¯ã€‚</p>
<h3 data-id="heading-10"><strong>æŠ€å·§7ï¼š é¡µé¢è·³è½¬ä¼ å‚é¿å‘ï¼Œè§£å†³å‚æ•°ä¸¢å¤±ã€ç±»å‹å¼‚å¸¸</strong></h3>
<p>ç—›ç‚¹ï¼šé¡µé¢è·³è½¬æ—¶ï¼Œä¼ é€’å¯¹è±¡ã€æ•°ç»„ç­‰å¤æ‚å‚æ•°ï¼Œå®¹æ˜“å‡ºç°å‚æ•°ä¸¢å¤±ã€ç±»å‹è½¬æ¢å¼‚å¸¸ï¼ˆå¦‚æ•°å­—å˜ä¸ºå­—ç¬¦ä¸²ï¼‰ã€‚</p>
<p>æŠ€å·§ï¼šä¼ é€’å¤æ‚å‚æ•°æ—¶ï¼Œå…ˆå°†å‚æ•°è½¬ä¸º JSON å­—ç¬¦ä¸²ï¼Œæ¥æ”¶æ—¶å†è§£æï¼›ä¼ é€’ç®€å•å‚æ•°ï¼ˆå¦‚ idã€nameï¼‰ï¼Œå¯ç›´æ¥æ‹¼æ¥åœ¨è·¯å¾„åï¼Œæ³¨æ„å‚æ•°ç±»å‹è½¬æ¢ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// è·³è½¬é¡µé¢ï¼Œä¼ é€’å¤æ‚å‚æ•°ï¼ˆå¦‚ç”¨æˆ·ä¿¡æ¯å¯¹è±¡ï¼‰</span>
<span class="hljs-comment">// é¡µé¢Aï¼špages/index/index.uts</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">goToDetail</span>(<span class="hljs-params">user: UserInfo</span>) {
  <span class="hljs-comment">// å¤æ‚å‚æ•°è½¬ä¸ºJSONå­—ç¬¦ä¸²</span>
  <span class="hljs-keyword">const</span> userStr = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(user);
  <span class="hljs-comment">// è·³è½¬é¡µé¢ï¼Œæºå¸¦å‚æ•°</span>
  uni.<span class="hljs-title function_">navigateTo</span>({
    <span class="hljs-attr">url</span>: <span class="hljs-string">`/pages/detail/detail?user=<span class="hljs-subst">${<span class="hljs-built_in">encodeURIComponent</span>(userStr)}</span>`</span> <span class="hljs-comment">// ç¼–ç ï¼Œé¿å…ç‰¹æ®Šå­—ç¬¦æŠ¥é”™</span>
  });
}

<span class="hljs-comment">// æ¥æ”¶å‚æ•°</span>
<span class="hljs-comment">// é¡µé¢Bï¼špages/detail/detail.uts</span>
<span class="hljs-keyword">import</span> { onLoad } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">UserInfo</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/typings/common.uts'</span>;

<span class="hljs-title function_">onLoad</span>(<span class="hljs-function">(<span class="hljs-params">options</span>) =&gt;</span> {
  <span class="hljs-comment">// æ¥æ”¶å‚æ•°ï¼Œè§£ç åè§£æä¸ºå¯¹è±¡</span>
  <span class="hljs-keyword">const</span> userStr = <span class="hljs-built_in">decodeURIComponent</span>(options.<span class="hljs-property">user</span> <span class="hljs-keyword">as</span> string);
  <span class="hljs-keyword">const</span> user = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(userStr) <span class="hljs-keyword">as</span> <span class="hljs-title class_">UserInfo</span>;
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ¥æ”¶çš„ç”¨æˆ·ä¿¡æ¯ï¼š'</span>, user);
  
  <span class="hljs-comment">// ç®€å•å‚æ•°æ¥æ”¶ï¼ˆå¦‚idï¼‰</span>
  <span class="hljs-keyword">const</span> id = <span class="hljs-title class_">Number</span>(options.<span class="hljs-property">id</span>); <span class="hljs-comment">// è½¬ä¸ºæ•°å­—ç±»å‹ï¼Œé¿å…å­—ç¬¦ä¸²ç±»å‹å¼‚å¸¸</span>
});
</code></pre>
<p>æ³¨æ„ï¼šä¼ é€’å‚æ•°æ—¶ï¼Œè‹¥å‚æ•°åŒ…å«ç‰¹æ®Šå­—ç¬¦ï¼ˆå¦‚ä¸­æ–‡ã€&amp;ã€=ï¼‰ï¼Œéœ€ç”¨ encodeURIComponent ç¼–ç ï¼Œæ¥æ”¶æ—¶ç”¨ decodeURIComponent è§£ç ï¼›JSON å­—ç¬¦ä¸²è§£ææ—¶ï¼Œéœ€åšå¥½å¼‚å¸¸æ•è·ï¼Œé¿å…å‚æ•°æ ¼å¼é”™è¯¯å¯¼è‡´æŠ¥é”™ã€‚</p>
<h3 data-id="heading-11"><strong>æŠ€å·§8ï¼š æœ¬åœ°å­˜å‚¨ä¼˜åŒ–ï¼Œé¿å…å­˜å‚¨å¼‚å¸¸ã€æ•°æ®æ³„éœ²</strong></h3>
<p>ç—›ç‚¹ï¼šä½¿ç”¨ uni.setStorage å­˜å‚¨æ•°æ®æ—¶ï¼Œå®¹æ˜“å‡ºç°æ•°æ®è¦†ç›–ã€å­˜å‚¨å®¹é‡è¶…é™ã€æ•æ„Ÿæ•°æ®æ³„éœ²ç­‰é—®é¢˜ã€‚</p>
<p>æŠ€å·§ï¼šå°è£…ç»Ÿä¸€çš„å­˜å‚¨å·¥å…·ç±»ï¼ŒåŒºåˆ†å­˜å‚¨ç±»å‹ï¼ˆä¸´æ—¶å­˜å‚¨ã€æ°¸ä¹…å­˜å‚¨ï¼‰ï¼Œæ·»åŠ å­˜å‚¨å‰ç¼€é¿å…è¦†ç›–ï¼Œæ•æ„Ÿæ•°æ®åŠ å¯†å­˜å‚¨ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// src/utils/storage.uts</span>
<span class="hljs-keyword">import</span> { encode, decode } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/utils/crypto.uts'</span>; <span class="hljs-comment">// å‡è®¾å·²å°è£…åŠ å¯†å·¥å…·</span>

<span class="hljs-comment">// å­˜å‚¨å‰ç¼€ï¼Œé¿å…ä¸å…¶ä»–é¡¹ç›®/æ’ä»¶å­˜å‚¨çš„æ•°æ®å†²çª</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">STORAGE_PREFIX</span> = <span class="hljs-string">'uni_app_x_'</span>;

<span class="hljs-comment">// å°è£…å­˜å‚¨å·¥å…·ç±»</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> storageUtil = {
  <span class="hljs-comment">// æ°¸ä¹…å­˜å‚¨ï¼ˆuni.setStorageï¼‰</span>
  <span class="hljs-title function_">set</span>(<span class="hljs-params">key: <span class="hljs-built_in">string</span>, value: <span class="hljs-built_in">any</span>, isEncrypt = <span class="hljs-literal">false</span></span>) {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> realKey = <span class="hljs-variable constant_">STORAGE_PREFIX</span> + key;
      <span class="hljs-keyword">let</span> realValue = value;
      <span class="hljs-comment">// æ•æ„Ÿæ•°æ®åŠ å¯†å­˜å‚¨ï¼ˆå¦‚tokenã€ç”¨æˆ·å¯†ç ï¼‰</span>
      <span class="hljs-keyword">if</span> (isEncrypt) {
        realValue = <span class="hljs-title function_">encode</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(realValue));
      } <span class="hljs-keyword">else</span> {
        realValue = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(realValue);
      }
      uni.<span class="hljs-title function_">setStorage</span>({ <span class="hljs-attr">key</span>: realKey, <span class="hljs-attr">data</span>: realValue });
    } <span class="hljs-keyword">catch</span> (err) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'å­˜å‚¨å¤±è´¥ï¼š'</span>, err);
      <span class="hljs-comment">// å­˜å‚¨å®¹é‡è¶…é™å¤„ç†</span>
      uni.<span class="hljs-title function_">showToast</span>({ <span class="hljs-attr">title</span>: <span class="hljs-string">'å­˜å‚¨ç©ºé—´ä¸è¶³ï¼Œè¯·æ¸…ç†ç¼“å­˜'</span>, <span class="hljs-attr">icon</span>: <span class="hljs-string">'none'</span> });
    }
  },

  <span class="hljs-comment">// æ°¸ä¹…å­˜å‚¨è·å–</span>
  <span class="hljs-title function_">get</span>(<span class="hljs-attr">key</span>: <span class="hljs-built_in">string</span>, isEncrypt = <span class="hljs-literal">false</span>): <span class="hljs-built_in">any</span> {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> realKey = <span class="hljs-variable constant_">STORAGE_PREFIX</span> + key;
      <span class="hljs-keyword">const</span> value = uni.<span class="hljs-title function_">getStorageSync</span>(realKey);
      <span class="hljs-keyword">if</span> (!value) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
      <span class="hljs-comment">// æ•æ„Ÿæ•°æ®è§£å¯†</span>
      <span class="hljs-keyword">if</span> (isEncrypt) {
        <span class="hljs-keyword">return</span> <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(<span class="hljs-title function_">decode</span>(value));
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(value);
      }
    } <span class="hljs-keyword">catch</span> (err) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'è·å–å­˜å‚¨å¤±è´¥ï¼š'</span>, err);
      <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }
  },

  <span class="hljs-comment">// ä¸´æ—¶å­˜å‚¨ï¼ˆuni.setStorageSyncï¼Œé¡µé¢å…³é—­åå¤±æ•ˆï¼‰</span>
  <span class="hljs-title function_">setTemp</span>(<span class="hljs-params">key: <span class="hljs-built_in">string</span>, value: <span class="hljs-built_in">any</span></span>) {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> realKey = <span class="hljs-variable constant_">STORAGE_PREFIX</span> + key;
      uni.<span class="hljs-title function_">setStorageSync</span>(realKey, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(value));
    } <span class="hljs-keyword">catch</span> (err) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'ä¸´æ—¶å­˜å‚¨å¤±è´¥ï¼š'</span>, err);
    }
  },

  <span class="hljs-comment">// ä¸´æ—¶å­˜å‚¨è·å–</span>
  <span class="hljs-title function_">getTemp</span>(<span class="hljs-attr">key</span>: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">any</span> {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> realKey = <span class="hljs-variable constant_">STORAGE_PREFIX</span> + key;
      <span class="hljs-keyword">const</span> value = uni.<span class="hljs-title function_">getStorageSync</span>(realKey);
      <span class="hljs-keyword">return</span> value ? <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(value) : <span class="hljs-literal">null</span>;
    } <span class="hljs-keyword">catch</span> (err) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'è·å–ä¸´æ—¶å­˜å‚¨å¤±è´¥ï¼š'</span>, err);
      <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }
  },

  <span class="hljs-comment">// åˆ é™¤æŒ‡å®šå­˜å‚¨</span>
  <span class="hljs-title function_">remove</span>(<span class="hljs-params">key: <span class="hljs-built_in">string</span></span>) {
    <span class="hljs-keyword">const</span> realKey = <span class="hljs-variable constant_">STORAGE_PREFIX</span> + key;
    uni.<span class="hljs-title function_">removeStorage</span>({ <span class="hljs-attr">key</span>: realKey });
  },

  <span class="hljs-comment">// æ¸…ç©ºæ‰€æœ‰å­˜å‚¨ï¼ˆè°¨æ…ä½¿ç”¨ï¼‰</span>
  <span class="hljs-title function_">clear</span>(<span class="hljs-params"/>) {
    uni.<span class="hljs-title function_">clearStorage</span>();
  }
};

<span class="hljs-comment">// å®æˆ˜ä½¿ç”¨</span>
<span class="hljs-comment">// å­˜å‚¨æ™®é€šæ•°æ®ï¼ˆå¦‚ç”¨æˆ·ä¿¡æ¯ï¼Œä¸åŠ å¯†ï¼‰</span>
storageUtil.<span class="hljs-title function_">set</span>(<span class="hljs-string">'userInfo'</span>, { <span class="hljs-attr">id</span>: <span class="hljs-string">'123'</span>, <span class="hljs-attr">username</span>: <span class="hljs-string">'test'</span> });

<span class="hljs-comment">// å­˜å‚¨æ•æ„Ÿæ•°æ®ï¼ˆå¦‚tokenï¼ŒåŠ å¯†ï¼‰</span>
storageUtil.<span class="hljs-title function_">set</span>(<span class="hljs-string">'token'</span>, <span class="hljs-string">'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...'</span>, <span class="hljs-literal">true</span>);

<span class="hljs-comment">// è·å–æ•°æ®</span>
<span class="hljs-keyword">const</span> userInfo = storageUtil.<span class="hljs-title function_">get</span>(<span class="hljs-string">'userInfo'</span>);
<span class="hljs-keyword">const</span> token = storageUtil.<span class="hljs-title function_">get</span>(<span class="hljs-string">'token'</span>, <span class="hljs-literal">true</span>);
</code></pre>
<h2 data-id="heading-12"><strong>äº”ã€æ€»ç»“</strong></h2>
<p>uni-app x ä½œä¸ºæ–°ä¸€ä»£è·¨ç«¯å¼€å‘æ¡†æ¶ï¼Œå‡­å€Ÿ uts è¯­æ³•ã€åŸç”Ÿæ¸²æŸ“ã€å¤šç«¯å…¼å®¹ç­‰ä¼˜åŠ¿ï¼Œæˆä¸ºå‰ç«¯å¼€å‘è€…çš„ä¼˜é€‰å·¥å…·ã€‚æœ¬æ–‡æ•´ç†çš„ 8 ä¸ªå®æˆ˜ç¼–ç¨‹æŠ€å·§ï¼Œæ¶µç›– uts è¯­æ³•ã€åŸç”Ÿèƒ½åŠ›è°ƒç”¨ã€æ€§èƒ½ä¼˜åŒ–ã€é¿å‘æŒ‡å—ç­‰æ ¸å¿ƒç»´åº¦ï¼Œæ¯ä¸ªæŠ€å·§å‡é…å¥—å®Œæ•´ä»£ç ç¤ºä¾‹ï¼Œå¯ç›´æ¥è½åœ°å¤ç”¨ï¼Œå¸®åŠ©ä½ æå‡å¼€å‘æ•ˆç‡ã€è§£å†³å®é™…å¼€å‘é—®é¢˜ã€‚</p>
<p>åç»­å°†æŒç»­åˆ†äº« uni-app x è¿›é˜¶æŠ€å·§ï¼ˆå¦‚æ’ä»¶å¼€å‘ã€æ‰“åŒ…éƒ¨ç½²ã€åŸç”Ÿæ’ä»¶é›†æˆï¼‰ï¼Œæ¬¢è¿å…³æ³¨ï¼Œä¸€èµ·æˆé•¿</p>
<p>â€‹</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vue3 + Vite æ€§èƒ½ä¼˜åŒ–å®æˆ˜]]></title>    <link>https://juejin.cn/post/7604685644684902452</link>    <guid>https://juejin.cn/post/7604685644684902452</guid>    <pubDate>2026-02-10T01:54:10.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604685644684902452" data-draft-id="7604493165329072162" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vue3 + Vite æ€§èƒ½ä¼˜åŒ–å®æˆ˜"/> <meta itemprop="keywords" content="å‰ç«¯,é¢è¯•,Vue.js"/> <meta itemprop="datePublished" content="2026-02-10T01:54:10.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸æƒ³ç§ƒå¤´çš„ç¨‹åºå‘˜"/> <meta itemprop="url" content="https://juejin.cn/user/2754702534251820"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vue3 + Vite æ€§èƒ½ä¼˜åŒ–å®æˆ˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2754702534251820/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸æƒ³ç§ƒå¤´çš„ç¨‹åºå‘˜
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-10T01:54:10.000Z" title="Tue Feb 10 2026 01:54:10 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Vue3 + Vite æ€§èƒ½ä¼˜åŒ–å®æˆ˜ï¼šä»å¼€å‘åˆ°ç”Ÿäº§ï¼Œå…¨æ–¹ä½æé€ŸæŒ‡å—</h2>
<p>å‰è¨€ï¼šåœ¨å‰ç«¯å¼€å‘çš„æ±Ÿæ¹–é‡Œï¼ŒVue3 + Vite ç»„åˆæ—©å·²æˆä¸ºä¸»æµé€‰æ‹©ï¼Œå‡­å€Ÿç®€æ´çš„è¯­æ³•ã€é«˜æ•ˆçš„æ„å»ºèƒ½åŠ›ï¼Œæˆä¸ºå¾ˆå¤šé¡¹ç›®çš„é¦–é€‰æŠ€æœ¯æ ˆã€‚ä½†ä¸å°‘å¼€å‘è€…è¿ç§»åå´çº·çº·åæ§½â€œä¸å¤Ÿå¿«â€â€”â€”å¼€å‘æ—¶å†·å¯åŠ¨å¡é¡¿ã€çƒ­æ›´æ–°å»¶è¿Ÿï¼Œç”Ÿäº§ç¯å¢ƒé¦–å±åŠ è½½ç¼“æ…¢ã€æ‰“åŒ…ä½“ç§¯è‡ƒè‚¿ã€‚å…¶å®ä¸æ˜¯ Vue3 å’Œ Vite ä¸ç»™åŠ›ï¼Œè€Œæ˜¯ä½ çš„é…ç½®å’Œç”¨æ³•æ²¡åˆ°ä½ï¼ä»Šå¤©å°±ç»“åˆå®æˆ˜ç»éªŒï¼Œåˆ†äº«ä¸€å¥—ä»å¼€å‘æœŸåˆ°ç”Ÿäº§æœŸçš„å…¨æ–¹ä½æ€§èƒ½ä¼˜åŒ–æŠ€å·§ï¼ŒæŠŠè¿™å¥—ç»„åˆçš„æ€§èƒ½å‹æ¦¨åˆ°æè‡´ï¼Œè®©ä½ çš„é¡¹ç›®å¼€å‘é£èµ·ã€è¿è¡Œä¸æ»‘âœ¨</p>
<h3 data-id="heading-1">ä¸€ã€å…ˆææ‡‚ï¼šVite å¿«çš„æ ¸å¿ƒåŸç†</h3>
<p>åœ¨å¼€å§‹ä¼˜åŒ–å‰ï¼Œå…ˆç®€å•ç†æ¸… Vite æ¯”ä¼ ç»Ÿæ„å»ºå·¥å…·ï¼ˆå¦‚ Webpackï¼‰å¿«çš„æ ¸å¿ƒé€»è¾‘ï¼Œæ‰èƒ½ç²¾å‡†æ‰¾åˆ°ä¼˜åŒ–åˆ‡å…¥ç‚¹ï¼Œé¿å…ç›²ç›®æ“ä½œã€‚</p>
<p>Vite çš„é€Ÿåº¦ä¼˜åŠ¿ä¸»è¦ä½“ç°åœ¨ä¸¤ä¸ªé˜¶æ®µï¼Œåƒé€è¿™ä¸¤ç‚¹ï¼Œåç»­ä¼˜åŒ–ä¼šæ›´æœ‰æ–¹å‘ï¼š</p>
<ol>
<li><strong>å¼€å‘æœŸï¼šåŸç”Ÿ ESM + ESBuild é¢„æ„å»º</strong>ï¼šVite å¯åŠ¨æ—¶ä¸ä¼šæ‰“åŒ…æ•´ä¸ªé¡¹ç›®ï¼Œåªéœ€å¯åŠ¨ä¸€ä¸ªå¼€å‘æœåŠ¡å™¨ï¼Œé€šè¿‡æµè§ˆå™¨åŸç”Ÿ ESM åŠ è½½æºç ï¼›åŒæ—¶ç”¨ ESBuildï¼ˆGo è¯­è¨€ç¼–å†™ï¼‰å¯¹ node_modules ä¸­çš„ä¾èµ–è¿›è¡Œé¢„æ„å»ºï¼Œæ¯” Webpack çš„ JS ç¼–å†™çš„æ„å»ºå™¨å¿« 10-100 å€ï¼Œå†·å¯åŠ¨é€Ÿåº¦å¤§å¹…æå‡ï¼Œç›¸å½“äºâ€œæ‰“å¼€ä¸€æ‰‡é—¨å°±èƒ½è¿›æˆ¿é—´ï¼Œä¸ç”¨æ‹†äº†æ•´ä¸ªæˆ¿å­é‡å»ºâ€ã€‚</li>
<li><strong>ç”Ÿäº§æœŸï¼šRollup æ·±åº¦ä¼˜åŒ–æ‰“åŒ…</strong>ï¼šç”Ÿäº§ç¯å¢ƒä¸‹ï¼ŒVite ä¼šåˆ‡æ¢åˆ° Rollup è¿›è¡Œæ‰“åŒ…ï¼ˆRollup å¯¹ ES æ¨¡å—çš„ tree-shaking æ›´å½»åº•ï¼‰ï¼Œé…åˆä¸€ç³»åˆ—ä¼˜åŒ–é…ç½®ï¼Œèƒ½æœ€å¤§ç¨‹åº¦ç²¾ç®€æ‰“åŒ…ä½“ç§¯ï¼Œå…¼é¡¾é€Ÿåº¦å’Œä½“ç§¯åŒé‡ä¼˜åŠ¿ã€‚</li>
</ol>
<p>å°æé†’ï¼šå¾ˆå¤šå¼€å‘è€…è¯¯ä»¥ä¸ºâ€œç”¨äº† Vite å°±ä¸€å®šå¿«â€ï¼Œå…¶å®é»˜è®¤é…ç½®ä¸‹ï¼Œé¢å¯¹å¤§å‹é¡¹ç›®æˆ–ä¸åˆç†çš„ä¾èµ–å¼•å…¥ï¼Œä¾ç„¶ä¼šå‡ºç°æ€§èƒ½ç“¶é¢ˆâ€”â€”è¿™ä¹Ÿæ˜¯æˆ‘ä»¬ä»Šå¤©ä¼˜åŒ–çš„æ ¸å¿ƒæ„ä¹‰ã€‚</p>
<h3 data-id="heading-2">äºŒã€å¼€å‘æœŸä¼˜åŒ–ï¼šå‘Šåˆ«å¡é¡¿ï¼Œæå‡å¼€å‘ä½“éªŒ</h3>
<p>å¼€å‘æœŸçš„ä¼˜åŒ–æ ¸å¿ƒæ˜¯â€œé™ä½å¯åŠ¨æ—¶é—´ã€å‡å°‘çƒ­æ›´æ–°å»¶è¿Ÿâ€ï¼Œè®©æˆ‘ä»¬åœ¨å†™ä»£ç æ—¶ä¸ç”¨ç­‰å¾…ï¼Œä¸“æ³¨å¼€å‘æœ¬èº«ã€‚ä»¥ä¸‹æŠ€å·§å‡ç»è¿‡å®æˆ˜éªŒè¯ï¼Œç›´æ¥å¤åˆ¶é…ç½®å³å¯ç”Ÿæ•ˆã€‚</p>
<h4 data-id="heading-3">1. ä¾èµ–é¢„æ„å»ºä¼˜åŒ–ï¼šç²¾å‡†æ§åˆ¶é¢„æ„å»ºèŒƒå›´</h4>
<p>Vite ä¼šè‡ªåŠ¨é¢„æ„å»º node_modules ä¸­çš„ä¾èµ–ï¼Œä½†é»˜è®¤é…ç½®å¯èƒ½ä¼šé¢„æ„å»ºä¸€äº›ä¸å¿…è¦çš„ä¾èµ–ï¼Œæˆ–é—æ¼å¸¸ç”¨ä¾èµ–ï¼Œå¯¼è‡´å¯åŠ¨é€Ÿåº¦å˜æ…¢ã€‚æˆ‘ä»¬å¯ä»¥æ‰‹åŠ¨é…ç½® optimizeDepsï¼Œç²¾å‡†æ§åˆ¶é¢„æ„å»ºèŒƒå›´ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// vite.config.ts</span>
<span class="hljs-keyword">import</span> { defineConfig } <span class="hljs-keyword">from</span> <span class="hljs-string">'vite'</span>
<span class="hljs-keyword">import</span> vue <span class="hljs-keyword">from</span> <span class="hljs-string">'@vitejs/plugin-vue'</span>
<span class="hljs-keyword">import</span> { resolve } <span class="hljs-keyword">from</span> <span class="hljs-string">'path'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>({
  <span class="hljs-attr">plugins</span>: [<span class="hljs-title function_">vue</span>()],
  <span class="hljs-attr">resolve</span>: {
    <span class="hljs-attr">alias</span>: {
      <span class="hljs-string">'@'</span>: <span class="hljs-title function_">resolve</span>(__dirname, <span class="hljs-string">'src'</span>) <span class="hljs-comment">// è·¯å¾„åˆ«åï¼Œå‡å°‘è·¯å¾„æŸ¥æ‰¾æ—¶é—´</span>
    }
  },
  <span class="hljs-comment">// ä¾èµ–é¢„æ„å»ºä¼˜åŒ–</span>
  <span class="hljs-attr">optimizeDeps</span>: {
    <span class="hljs-attr">include</span>: [<span class="hljs-string">'vue'</span>, <span class="hljs-string">'vue-router'</span>, <span class="hljs-string">'pinia'</span>, <span class="hljs-string">'axios'</span>], <span class="hljs-comment">// å¼ºåˆ¶é¢„æ„å»ºå¸¸ç”¨ä¾èµ–</span>
    <span class="hljs-attr">exclude</span>: [<span class="hljs-string">'some-large-library'</span>], <span class="hljs-comment">// æ’é™¤å¤§å‹ç¬¬ä¸‰æ–¹åº“ï¼ˆå¦‚echartsï¼ŒæŒ‰éœ€å¼•å…¥å³å¯ï¼‰</span>
    <span class="hljs-attr">cacheDir</span>: <span class="hljs-string">'.vite'</span>, <span class="hljs-comment">// ç¼“å­˜é¢„æ„å»ºç»“æœï¼Œæå‡äºŒæ¬¡å¯åŠ¨é€Ÿåº¦ï¼ˆé»˜è®¤å°±æ˜¯.viteï¼Œå¯è‡ªå®šä¹‰è·¯å¾„ï¼‰</span>
  }
})
</code></pre>
<p>ä¼˜åŒ–ç‚¹è¯´æ˜ï¼šinclude é…ç½®å¸¸ç”¨ä¾èµ–ï¼Œé¿å… Vite é‡å¤åˆ¤æ–­æ˜¯å¦éœ€è¦é¢„æ„å»ºï¼›exclude æ’é™¤å¤§å‹åº“ï¼Œé¿å…é¢„æ„å»ºä½“ç§¯è¿‡å¤§ï¼›è·¯å¾„åˆ«åä¸ä»…æ–¹ä¾¿å¼€å‘ï¼Œè¿˜èƒ½å‡å°‘ Vite çš„è·¯å¾„æŸ¥æ‰¾æ—¶é—´ï¼Œä¸€ä¸¾ä¸¤å¾—ã€‚</p>
<h4 data-id="heading-4">2. HMR ä¼˜åŒ–ï¼šè§£å†³çƒ­æ›´æ–°å»¶è¿Ÿé—®é¢˜</h4>
<p>çƒ­æ›´æ–°ï¼ˆHMRï¼‰æ˜¯å¼€å‘æœŸé«˜é¢‘ä½¿ç”¨çš„åŠŸèƒ½ï¼Œè‹¥å‡ºç°å»¶è¿Ÿï¼ˆä¿®æ”¹ä»£ç åå‡ ç§’æ‰ç”Ÿæ•ˆï¼‰ï¼Œä¼šä¸¥é‡å½±å“å¼€å‘æ•ˆç‡ã€‚å°¤å…¶æ˜¯åœ¨ Windows æˆ– Docker ç¯å¢ƒä¸‹ï¼Œå¤§æ¦‚ç‡æ˜¯æ–‡ä»¶ç›‘å¬é…ç½®ä¸åˆç†å¯¼è‡´çš„ï¼Œå¯é€šè¿‡ä»¥ä¸‹é…ç½®ä¼˜åŒ–ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// vite.config.ts æ–°å¢ server é…ç½®</span>
<span class="hljs-attr">server</span>: {
  <span class="hljs-attr">watch</span>: {
    <span class="hljs-attr">usePolling</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// Windows/Docker ç¯å¢ƒå¿…åŠ ï¼Œè§£å†³æ–‡ä»¶ç›‘å¬ä¸çµæ•é—®é¢˜</span>
    <span class="hljs-attr">ignored</span>: [<span class="hljs-string">'**/node_modules/**'</span>, <span class="hljs-string">'**/.git/**'</span>, <span class="hljs-string">'**/dist/**'</span>], <span class="hljs-comment">// å¿½ç•¥æ— éœ€ç›‘å¬çš„ç›®å½•</span>
    <span class="hljs-attr">interval</span>: <span class="hljs-number">100</span>, <span class="hljs-comment">// ç›‘å¬é—´éš”ï¼Œå•ä½msï¼Œé»˜è®¤100ï¼Œå¯æ ¹æ®éœ€æ±‚è°ƒæ•´</span>
  },
  <span class="hljs-attr">open</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// å¯åŠ¨åè‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨</span>
  <span class="hljs-attr">port</span>: <span class="hljs-number">3000</span>, <span class="hljs-comment">// å›ºå®šç«¯å£ï¼Œé¿å…æ¯æ¬¡å¯åŠ¨éšæœºç«¯å£</span>
  <span class="hljs-attr">strictPort</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// ç«¯å£è¢«å ç”¨æ—¶ï¼Œç›´æ¥æŠ¥é”™ï¼ˆé¿å…è‡ªåŠ¨åˆ‡æ¢ç«¯å£å¯¼è‡´çš„é…ç½®é”™ä¹±ï¼‰</span>
}
</code></pre>
<p>è¡¥å……ï¼šè‹¥é¡¹ç›®ä½“ç§¯è¿‡å¤§ï¼Œå¯é¢å¤–é…ç½® server.hmr.overlay: falseï¼Œå…³é—­çƒ­æ›´æ–°é”™è¯¯æç¤ºå±‚ï¼ˆé”™è¯¯æç¤ºä¼šæ‰“å°åˆ°æ§åˆ¶å°ï¼‰ï¼Œä¹Ÿèƒ½è½»å¾®æå‡çƒ­æ›´æ–°é€Ÿåº¦ã€‚</p>
<h4 data-id="heading-5">3. å¤šé¡µé¢åº”ç”¨ï¼ˆMPAï¼‰ä¼˜åŒ–ï¼šç‹¬ç«‹æ„å»ºï¼Œæå‡æ•ˆç‡</h4>
<p>è‹¥ä½ çš„é¡¹ç›®æ˜¯å¤šé¡µé¢åº”ç”¨ï¼ˆå¦‚åå°ç®¡ç†ç³»ç»Ÿ + å‰å°å±•ç¤ºé¡µé¢ï¼‰ï¼Œé»˜è®¤é…ç½®ä¸‹ä¼šæ„å»ºæ‰€æœ‰é¡µé¢ï¼Œå¯åŠ¨é€Ÿåº¦è¾ƒæ…¢ã€‚å¯é€šè¿‡é…ç½®å¤šå…¥å£ï¼Œè®©æ¯ä¸ªé¡µé¢ç‹¬ç«‹æ„å»ºï¼ŒæŒ‰éœ€åŠ è½½ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// vite.config.ts æ–°å¢ build é…ç½®</span>
<span class="hljs-attr">build</span>: {
  <span class="hljs-attr">rollupOptions</span>: {
    <span class="hljs-attr">input</span>: {
      <span class="hljs-attr">main</span>: <span class="hljs-title function_">resolve</span>(__dirname, <span class="hljs-string">'index.html'</span>), <span class="hljs-comment">// ä¸»é¡µé¢å…¥å£</span>
      <span class="hljs-attr">admin</span>: <span class="hljs-title function_">resolve</span>(__dirname, <span class="hljs-string">'admin.html'</span>), <span class="hljs-comment">// åå°é¡µé¢å…¥å£</span>
      <span class="hljs-attr">mobile</span>: <span class="hljs-title function_">resolve</span>(__dirname, <span class="hljs-string">'mobile.html'</span>) <span class="hljs-comment">// ç§»åŠ¨ç«¯é¡µé¢å…¥å£</span>
    },
  },
}
</code></pre>
<p>ä¼˜åŒ–æ•ˆæœï¼šå¯åŠ¨æ—¶åªä¼šæ„å»ºå½“å‰è®¿é—®çš„é¡µé¢ï¼Œå…¶ä»–é¡µé¢ä¸åŠ è½½ï¼Œå†·å¯åŠ¨é€Ÿåº¦æå‡ 50% ä»¥ä¸Šï¼›æ‰“åŒ…æ—¶ä¹Ÿèƒ½ç‹¬ç«‹æ‰“åŒ…æ¯ä¸ªé¡µé¢ï¼Œåç»­éƒ¨ç½²å¯æŒ‰éœ€éƒ¨ç½²ï¼Œé™ä½éƒ¨ç½²æˆæœ¬ã€‚</p>
<h3 data-id="heading-6">ä¸‰ã€ç”Ÿäº§æœŸä¼˜åŒ–ï¼šç²¾ç®€ä½“ç§¯ï¼Œæå‡è¿è¡Œé€Ÿåº¦</h3>
<p>ç”Ÿäº§æœŸçš„ä¼˜åŒ–æ ¸å¿ƒæ˜¯â€œå‡å°æ‰“åŒ…ä½“ç§¯ã€æå‡é¦–å±åŠ è½½é€Ÿåº¦â€â€”â€”ç”¨æˆ·ä¸ä¼šç­‰å¾…ä¸€ä¸ªåŠ è½½åå‡ ç§’çš„é¡µé¢ï¼Œé¦–å±åŠ è½½é€Ÿåº¦ç›´æ¥å½±å“ç”¨æˆ·ç•™å­˜ã€‚ä»¥ä¸‹ä¼˜åŒ–ä»â€œä½“ç§¯ç²¾ç®€ã€åŠ è½½æé€Ÿã€æ€§èƒ½ç›‘æ§â€ä¸‰ä¸ªç»´åº¦å±•å¼€ï¼Œè¦†ç›–ç”Ÿäº§æœŸå…¨åœºæ™¯ã€‚</p>
<h4 data-id="heading-7">1. ä»£ç åˆ†å‰²ï¼šåˆç†åˆ†åŒ…ï¼Œå‡å°‘é¦–å±åŠ è½½ä½“ç§¯</h4>
<p>é»˜è®¤æ‰“åŒ…ä¼šå°†æ‰€æœ‰ä»£ç åˆå¹¶æˆä¸€ä¸ªå¤§æ–‡ä»¶ï¼Œé¦–å±åŠ è½½æ—¶éœ€è¦åŠ è½½æ•´ä¸ªæ–‡ä»¶ï¼Œé€Ÿåº¦è¾ƒæ…¢ã€‚é€šè¿‡ä»£ç åˆ†å‰²ï¼Œå°†ä»£ç æ‹†åˆ†æˆå¤šä¸ªå°æ–‡ä»¶ï¼ŒæŒ‰éœ€åŠ è½½ï¼Œèƒ½æ˜¾è‘—æå‡é¦–å±åŠ è½½é€Ÿåº¦ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// vite.config.ts build é…ç½®æ–°å¢</span>
<span class="hljs-attr">build</span>: {
  <span class="hljs-attr">rollupOptions</span>: {
    <span class="hljs-attr">output</span>: {
      <span class="hljs-comment">// è‡ªå®šä¹‰åˆ†åŒ…ç­–ç•¥</span>
      <span class="hljs-attr">manualChunks</span>: {
        <span class="hljs-string">'vue-vendor'</span>: [<span class="hljs-string">'vue'</span>, <span class="hljs-string">'vue-router'</span>, <span class="hljs-string">'pinia'</span>], <span class="hljs-comment">// Vue æ ¸å¿ƒä¾èµ–æ‰“åŒ…æˆä¸€ä¸ªæ–‡ä»¶</span>
        <span class="hljs-string">'ui-vendor'</span>: [<span class="hljs-string">'element-plus'</span>, <span class="hljs-string">'ant-design-vue'</span>], <span class="hljs-comment">// UI ç»„ä»¶åº“æ‰“åŒ…æˆä¸€ä¸ªæ–‡ä»¶</span>
        <span class="hljs-string">'utils'</span>: [<span class="hljs-string">'lodash-es'</span>, <span class="hljs-string">'dayjs'</span>, <span class="hljs-string">'axios'</span>], <span class="hljs-comment">// å·¥å…·åº“æ‰“åŒ…æˆä¸€ä¸ªæ–‡ä»¶</span>
      },
      <span class="hljs-comment">// é™æ€èµ„æºå‘½åè§„èŒƒï¼Œä¾¿äºç¼“å­˜</span>
      <span class="hljs-attr">assetFileNames</span>: <span class="hljs-string">'assets/[name]-[hash].[extname]'</span>,
      <span class="hljs-attr">chunkFileNames</span>: <span class="hljs-string">'chunks/[name]-[hash].js'</span>,
      <span class="hljs-attr">entryFileNames</span>: <span class="hljs-string">'entry/[name]-[hash].js'</span>,
    },
  },
  <span class="hljs-comment">// å¼€å¯å‹ç¼©ï¼ˆé»˜è®¤å¼€å¯ï¼Œå¯è¿›ä¸€æ­¥ä¼˜åŒ–ï¼‰</span>
  <span class="hljs-attr">minify</span>: <span class="hljs-string">'esbuild'</span>, <span class="hljs-comment">// ç”¨ esbuild å‹ç¼©ï¼Œé€Ÿåº¦å¿«ï¼›éœ€è¦æ›´æè‡´å‹ç¼©å¯æ”¹ç”¨ 'terser'</span>
}
</code></pre>
<p>ä¼˜åŒ–é€»è¾‘ï¼šå°†æ ¸å¿ƒä¾èµ–ã€UI åº“ã€å·¥å…·åº“åˆ†åˆ«æ‰“åŒ…ï¼Œè¿™äº›æ–‡ä»¶å˜æ›´é¢‘ç‡ä½ï¼Œå¯åˆ©ç”¨æµè§ˆå™¨ç¼“å­˜ï¼ˆåç»­ç”¨æˆ·è®¿é—®æ—¶æ— éœ€é‡æ–°åŠ è½½ï¼‰ï¼›ä¸šåŠ¡ä»£ç å•ç‹¬æ‰“åŒ…ï¼Œå˜æ›´é¢‘ç‡é«˜ï¼Œå‡å°æ¯æ¬¡æ›´æ–°çš„åŠ è½½ä½“ç§¯ã€‚</p>
<h4 data-id="heading-8">2. é™æ€èµ„æºä¼˜åŒ–ï¼šå‡å°ä¼ è¾“ä½“ç§¯ï¼Œå‡å°‘è¯·æ±‚æ¬¡æ•°</h4>
<p>å‰ç«¯é¡¹ç›®ä¸­ï¼Œå›¾ç‰‡ã€å­—ä½“ç­‰é™æ€èµ„æºå¾€å¾€æ˜¯æ‰“åŒ…ä½“ç§¯çš„â€œå¤§å¤´â€ï¼Œåˆç†ä¼˜åŒ–é™æ€èµ„æºï¼Œèƒ½å¿«é€Ÿå‡å°æ‰“åŒ…ä½“ç§¯ï¼Œæå‡åŠ è½½é€Ÿåº¦ã€‚</p>
<h5 data-id="heading-9">ï¼ˆ1ï¼‰å›¾ç‰‡ä¼˜åŒ–</h5>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// vite.config.ts æ–°å¢ assets é…ç½®</span>
<span class="hljs-attr">build</span>: {
  <span class="hljs-attr">assetsInlineLimit</span>: <span class="hljs-number">4096</span>, <span class="hljs-comment">// å°äº 4KB çš„å›¾ç‰‡è½¬ base64ï¼Œå‡å°‘ HTTP è¯·æ±‚</span>
}
<span class="hljs-comment">// é¢å¤–å®‰è£… vite-plugin-imagemin æ’ä»¶ï¼Œå®ç°å›¾ç‰‡å‹ç¼©ï¼ˆå¯é€‰ï¼Œéœ€æ‰‹åŠ¨å®‰è£…ï¼‰</span>
<span class="hljs-keyword">import</span> imagemin <span class="hljs-keyword">from</span> <span class="hljs-string">'vite-plugin-imagemin'</span>

<span class="hljs-attr">plugins</span>: [
  <span class="hljs-title function_">vue</span>(),
  <span class="hljs-title function_">imagemin</span>({
    <span class="hljs-attr">gifsicle</span>: { <span class="hljs-attr">optimizationLevel</span>: <span class="hljs-number">7</span>, <span class="hljs-attr">interlaced</span>: <span class="hljs-literal">false</span> }, <span class="hljs-comment">// gif å‹ç¼©</span>
    <span class="hljs-attr">optipng</span>: { <span class="hljs-attr">optimizationLevel</span>: <span class="hljs-number">7</span> }, <span class="hljs-comment">// png å‹ç¼©</span>
    <span class="hljs-attr">mozjpeg</span>: { <span class="hljs-attr">quality</span>: <span class="hljs-number">80</span> }, <span class="hljs-comment">// jpg å‹ç¼©</span>
    <span class="hljs-attr">pngquant</span>: { <span class="hljs-attr">quality</span>: [<span class="hljs-number">0.7</span>, <span class="hljs-number">0.8</span>], <span class="hljs-attr">speed</span>: <span class="hljs-number">4</span> }, <span class="hljs-comment">// png æ·±åº¦å‹ç¼©</span>
  })
]
</code></pre>
<p>è¡¥å……å»ºè®®ï¼šå¼€å‘æ—¶å°½é‡ä½¿ç”¨ WebP/AVIF æ ¼å¼å›¾ç‰‡ï¼ˆä½“ç§¯æ¯” JPG/PNG å° 30%-50%ï¼‰ï¼Œå¯é€šè¿‡ picture æ ‡ç­¾åšé™çº§å…¼å®¹ï¼Œå…¼é¡¾å…¼å®¹æ€§å’Œä½“ç§¯ã€‚</p>
<h5 data-id="heading-10">ï¼ˆ2ï¼‰å­—ä½“ä¼˜åŒ–</h5>
<p>å­—ä½“æ–‡ä»¶å¾€å¾€ä½“ç§¯è¾ƒå¤§ï¼Œå¯é€šè¿‡â€œæŒ‰éœ€å¼•å…¥å­—ä½“å­é›†â€â€œå‹ç¼©å­—ä½“â€ä¼˜åŒ–ï¼š</p>
<ol>
<li>ä½¿ç”¨ font-spider å·¥å…·ï¼Œæå–é¡¹ç›®ä¸­å®é™…ç”¨åˆ°çš„å­—ä½“å­—ç¬¦ï¼Œç”Ÿæˆå­—ä½“å­é›†ï¼ˆåˆ é™¤æœªç”¨åˆ°çš„å­—ç¬¦ï¼Œä½“ç§¯å¯å‡å° 80% ä»¥ä¸Šï¼‰ï¼›</li>
<li>å°†å­—ä½“æ–‡ä»¶æ”¾åœ¨ CDN ä¸Šï¼Œé€šè¿‡ preload é¢„åŠ è½½å…³é”®å­—ä½“ï¼Œé¿å…å­—ä½“åŠ è½½å»¶è¿Ÿå¯¼è‡´çš„â€œé—ªå±â€é—®é¢˜ã€‚</li>
</ol>
<h4 data-id="heading-11">3. ç»„ä»¶æ‡’åŠ è½½ï¼šæŒ‰éœ€åŠ è½½ï¼Œå‡å°‘é¦–å±æ¸²æŸ“å‹åŠ›</h4>
<p>Vue3 æä¾›äº†è·¯ç”±çº§æ‡’åŠ è½½å’Œç»„ä»¶çº§æ‡’åŠ è½½ä¸¤ç§æ–¹å¼ï¼Œèƒ½æœ‰æ•ˆå‡å°‘é¦–å±éœ€è¦åŠ è½½çš„ç»„ä»¶æ•°é‡ï¼Œæå‡é¦–å±æ¸²æŸ“é€Ÿåº¦ï¼Œå°¤å…¶é€‚åˆå¤§å‹é¡¹ç›®ã€‚</p>
<h5 data-id="heading-12">ï¼ˆ1ï¼‰è·¯ç”±çº§æ‡’åŠ è½½ï¼ˆæœ€åŸºç¡€ã€æœ€æ¨èï¼‰</h5>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// router/index.ts</span>
<span class="hljs-keyword">import</span> { createRouter, createWebHistory } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue-router'</span>

<span class="hljs-keyword">const</span> routes = [
  {
    <span class="hljs-attr">path</span>: <span class="hljs-string">'/'</span>,
    <span class="hljs-attr">name</span>: <span class="hljs-string">'Home'</span>,
    <span class="hljs-comment">// è·¯ç”±æ‡’åŠ è½½ï¼šç‚¹å‡»è·¯ç”±æ—¶æ‰åŠ è½½å¯¹åº”çš„ç»„ä»¶</span>
    <span class="hljs-attr">component</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'@/views/Home.vue'</span>)
  },
  {
    <span class="hljs-attr">path</span>: <span class="hljs-string">'/about'</span>,
    <span class="hljs-attr">name</span>: <span class="hljs-string">'About'</span>,
    <span class="hljs-attr">component</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'@/views/About.vue'</span>)
  },
  {
    <span class="hljs-attr">path</span>: <span class="hljs-string">'/admin'</span>,
    <span class="hljs-attr">name</span>: <span class="hljs-string">'Admin'</span>,
    <span class="hljs-comment">// åµŒå¥—è·¯ç”±ä¹Ÿæ”¯æŒæ‡’åŠ è½½</span>
    <span class="hljs-attr">component</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'@/views/Admin/Admin.vue'</span>),
    <span class="hljs-attr">children</span>: [
      { <span class="hljs-attr">path</span>: <span class="hljs-string">'dashboard'</span>, <span class="hljs-attr">component</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'@/views/Admin/Dashboard.vue'</span>) }
    ]
  }
]

<span class="hljs-keyword">const</span> router = <span class="hljs-title function_">createRouter</span>({
  <span class="hljs-attr">history</span>: <span class="hljs-title function_">createWebHistory</span>(),
  routes
})

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> router
</code></pre>
<h5 data-id="heading-13">ï¼ˆ2ï¼‰ç»„ä»¶çº§æ‡’åŠ è½½ï¼ˆé’ˆå¯¹å¤§å‹ç»„ä»¶ï¼‰</h5>
<p>å¯¹äºä½“ç§¯è¾ƒå¤§çš„ç»„ä»¶ï¼ˆå¦‚å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ã€å›¾è¡¨ç»„ä»¶ï¼‰ï¼Œå³ä½¿åœ¨å½“å‰è·¯ç”±ä¸­ï¼Œä¹Ÿå¯é€šè¿‡ defineAsyncComponent å®ç°æ‡’åŠ è½½ï¼Œç”¨åˆ°æ—¶å†åŠ è½½ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// ç»„ä»¶ä¸­ä½¿ç”¨</span>
é¦–é¡µ
    &lt;!-- æ‡’åŠ è½½å¤§å‹ç»„ä»¶ --&gt;
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">HeavyComponent</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">"showHeavyComponent"</span> /&gt;</span></span>
    &lt;button @æ˜¾ç¤ºå¤§å‹ç»„ä»¶&lt;script setup 
import { ref, defineAsyncComponent } from 'vue'

// å®šä¹‰å¼‚æ­¥ç»„ä»¶ï¼ˆæ‡’åŠ è½½ï¼‰
const HeavyComponent = defineAsyncComponent(() =&gt; import('@/components/HeavyComponent.vue'))

const showHeavyComponent = ref(false)
</code></pre>
<h5 data-id="heading-14">ï¼ˆ3ï¼‰ç¬¬ä¸‰æ–¹ç»„ä»¶æŒ‰éœ€å¼•å…¥</h5>
<p>è‹¥ä½¿ç”¨ Element Plusã€Ant Design Vue ç­‰ UI ç»„ä»¶åº“ï¼Œä¸€å®šè¦å¼€å¯æŒ‰éœ€å¼•å…¥ï¼Œé¿å…æ‰“åŒ…æ•´ä¸ªç»„ä»¶åº“ï¼ˆä½“ç§¯ä¼šå¢åŠ å‡ ç™¾ KBï¼‰ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// vite.config.ts é…ç½® Element Plus æŒ‰éœ€å¼•å…¥</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Components</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'unplugin-vue-components/vite'</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ElementPlusResolver</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'unplugin-vue-components/resolvers'</span>

<span class="hljs-attr">plugins</span>: [
  <span class="hljs-title function_">vue</span>(),
  <span class="hljs-title class_">Components</span>({
    <span class="hljs-attr">resolvers</span>: [<span class="hljs-title class_">ElementPlusResolver</span>()], <span class="hljs-comment">// è‡ªåŠ¨æŒ‰éœ€å¼•å…¥ Element Plus ç»„ä»¶</span>
  })
]
</code></pre>
<p>æ³¨æ„ï¼šæ— éœ€æ‰‹åŠ¨å¼•å…¥ç»„ä»¶å’Œæ ·å¼ï¼Œæ’ä»¶ä¼šè‡ªåŠ¨è¯†åˆ«æ¨¡æ¿ä¸­ä½¿ç”¨çš„ç»„ä»¶ï¼ŒæŒ‰éœ€æ‰“åŒ…å¯¹åº”çš„ç»„ä»¶å’Œæ ·å¼ã€‚</p>
<h4 data-id="heading-15">4. æ€§èƒ½ç›‘æ§ï¼šç²¾å‡†å®šä½æ€§èƒ½ç“¶é¢ˆ</h4>
<p>ä¼˜åŒ–å®Œæˆåï¼Œéœ€è¦é€šè¿‡å·¥å…·ç›‘æ§æ€§èƒ½ï¼Œç¡®è®¤ä¼˜åŒ–æ•ˆæœï¼ŒåŒæ—¶å®šä½æœªä¼˜åŒ–åˆ°ä½çš„ç“¶é¢ˆã€‚æ¨èä¸¤ä¸ªå¸¸ç”¨å·¥å…·ï¼Œç®€å•æ˜“ä¸Šæ‰‹ï¼š</p>
<h5 data-id="heading-16">ï¼ˆ1ï¼‰æ‰“åŒ…ä½“ç§¯åˆ†æï¼šrollup-plugin-visualizer</h5>
<p>é€šè¿‡è¯¥æ’ä»¶ï¼Œå¯ç”Ÿæˆæ‰“åŒ…ä½“ç§¯åˆ†æå›¾ï¼Œæ¸…æ™°çœ‹åˆ°æ¯ä¸ªæ¨¡å—çš„ä½“ç§¯å æ¯”ï¼Œå¿«é€Ÿæ‰¾åˆ°ä½“ç§¯è¿‡å¤§çš„æ¨¡å—ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// å®‰è£…æ’ä»¶ï¼šnpm i rollup-plugin-visualizer -D</span>
<span class="hljs-keyword">import</span> { visualizer } <span class="hljs-keyword">from</span> <span class="hljs-string">'rollup-plugin-visualizer'</span>

<span class="hljs-attr">plugins</span>: [
  <span class="hljs-title function_">vue</span>(),
  <span class="hljs-comment">// æ‰“åŒ…ä½“ç§¯åˆ†æ</span>
  <span class="hljs-title function_">visualizer</span>({
    <span class="hljs-attr">open</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// æ‰“åŒ…å®Œæˆåè‡ªåŠ¨æ‰“å¼€åˆ†æå›¾</span>
    <span class="hljs-attr">gzipSize</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// æ˜¾ç¤º gzip å‹ç¼©åçš„ä½“ç§¯</span>
    <span class="hljs-attr">brotliSize</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// æ˜¾ç¤º brotli å‹ç¼©åçš„ä½“ç§¯</span>
  })
]
</code></pre>
<p>ä½¿ç”¨æ–¹æ³•ï¼šæ‰§è¡Œ npm run build åï¼Œä¼šåœ¨ dist ç›®å½•ä¸‹ç”Ÿæˆ stats.html æ–‡ä»¶ï¼Œæ‰“å¼€åå³å¯çœ‹åˆ°ä½“ç§¯åˆ†æå›¾ï¼Œé’ˆå¯¹æ€§ä¼˜åŒ–ä½“ç§¯è¿‡å¤§çš„æ¨¡å—ã€‚</p>
<h5 data-id="heading-17">ï¼ˆ2ï¼‰æµè§ˆå™¨æ€§èƒ½ç›‘æ§ï¼šLighthouse</h5>
<p>Chrome æµè§ˆå™¨è‡ªå¸¦çš„ Lighthouse å·¥å…·ï¼Œå¯å…¨é¢æ£€æµ‹é¡µé¢çš„æ€§èƒ½ã€å¯è®¿é—®æ€§ã€SEO ç­‰æŒ‡æ ‡ï¼Œç»™å‡ºå…·ä½“çš„ä¼˜åŒ–å»ºè®®ï¼š</p>
<ol>
<li>æ‰“å¼€ Chrome å¼€å‘è€…å·¥å…·ï¼ˆF12ï¼‰ï¼Œåˆ‡æ¢åˆ° Lighthouse æ ‡ç­¾ï¼›</li>
<li>å‹¾é€‰â€œPerformanceâ€ï¼ˆæ€§èƒ½ï¼‰ï¼Œç‚¹å‡»â€œGenerate reportâ€ï¼›</li>
<li>ç­‰å¾…æ£€æµ‹å®Œæˆï¼Œæ ¹æ®æŠ¥å‘Šä¸­çš„â€œOpportunitiesâ€ï¼ˆä¼˜åŒ–æœºä¼šï¼‰ï¼Œè¿›ä¸€æ­¥ä¼˜åŒ–æ€§èƒ½ã€‚</li>
</ol>
<h3 data-id="heading-18">å››ã€TS é›†æˆä¼˜åŒ–ï¼šå…¼é¡¾ç±»å‹å®‰å…¨ä¸æ€§èƒ½</h3>
<p>ç°åœ¨å¾ˆå¤š Vue3 é¡¹ç›®éƒ½ä¼šæ­é… TypeScript ä½¿ç”¨ï¼ŒTS è™½èƒ½æå‡ä»£ç å¯ç»´æŠ¤æ€§ï¼Œä½†ä¹Ÿå¯èƒ½å¸¦æ¥æ€§èƒ½æŸè€—ï¼ˆå¦‚ç±»å‹æ£€æŸ¥è€—æ—¶è¿‡é•¿ï¼‰ï¼Œå¯é€šè¿‡ä»¥ä¸‹é…ç½®ä¼˜åŒ–ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// tsconfig.json æ ¸å¿ƒé…ç½®ä¼˜åŒ–</span>
{
  <span class="hljs-string">"compilerOptions"</span>: {
    <span class="hljs-string">"target"</span>: <span class="hljs-string">"es2020"</span>, <span class="hljs-comment">// ç›®æ ‡ ES ç‰ˆæœ¬ï¼ŒåŒ¹é… Vite æ„å»ºç›®æ ‡</span>
    <span class="hljs-string">"module"</span>: <span class="hljs-string">"esnext"</span>, <span class="hljs-comment">// æ¨¡å—æ ¼å¼ï¼Œæ”¯æŒ ESM</span>
    <span class="hljs-string">"experimentalDecorators"</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// æ”¯æŒè£…é¥°å™¨ï¼ˆè‹¥ä½¿ç”¨ï¼‰</span>
    <span class="hljs-string">"useDefineForClassFields"</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-string">"isolatedModules"</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// æå‡å¤§å‹é¡¹ç›®ç±»å‹æ£€æŸ¥æ•ˆç‡</span>
    <span class="hljs-string">"skipLibCheck"</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// è·³è¿‡ç¬¬ä¸‰æ–¹åº“çš„ç±»å‹æ£€æŸ¥ï¼Œå‡å°‘è€—æ—¶</span>
    <span class="hljs-string">"noEmit"</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// åªåšç±»å‹æ£€æŸ¥ï¼Œä¸ç”Ÿæˆç¼–è¯‘æ–‡ä»¶ï¼ˆVite è´Ÿè´£æ„å»ºï¼‰</span>
    <span class="hljs-string">"strict"</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// å¼€å¯ä¸¥æ ¼æ¨¡å¼ï¼Œå…¼é¡¾ç±»å‹å®‰å…¨</span>
    <span class="hljs-string">"moduleResolution"</span>: <span class="hljs-string">"bundler"</span>, <span class="hljs-comment">// è®© TS ä½¿ç”¨ Vite çš„æ¨¡å—è§£æé€»è¾‘ï¼Œé¿å…å†²çª</span>
  },
  <span class="hljs-string">"include"</span>: [<span class="hljs-string">"src/**/*.ts"</span>, <span class="hljs-string">"src/**/*.d.ts"</span>, <span class="hljs-string">"src/**/*.tsx"</span>, <span class="hljs-string">"src/**/*.vue"</span>],
  <span class="hljs-string">"exclude"</span>: [<span class="hljs-string">"node_modules"</span>]
}
</code></pre>
<p>ä¼˜åŒ–ç‚¹è¯´æ˜ï¼šskipLibCheck è·³è¿‡ç¬¬ä¸‰æ–¹åº“ç±»å‹æ£€æŸ¥ï¼Œå¯å¤§å¹…å‡å°‘ç±»å‹æ£€æŸ¥è€—æ—¶ï¼›isolatedModules å¼€å¯åï¼ŒTS ä¼šå°†æ¯ä¸ªæ–‡ä»¶è§†ä¸ºç‹¬ç«‹æ¨¡å—ï¼Œæå‡æ„å»ºå’Œç±»å‹æ£€æŸ¥æ•ˆç‡ï¼›moduleResolution: "bundler" é¿å… TS å’Œ Vite çš„æ¨¡å—è§£æé€»è¾‘å†²çªï¼Œå‡å°‘æŠ¥é”™ã€‚</p>
<h3 data-id="heading-19">äº”ã€å®æˆ˜æ€»ç»“ï¼šä¼˜åŒ–å‰åå¯¹æ¯” &amp; é¿å‘æŒ‡å—</h3>
<h4 data-id="heading-20">1. ä¼˜åŒ–å‰åæ•ˆæœå¯¹æ¯”ï¼ˆå¤§å‹ Vue3 + Vite + TS é¡¹ç›®ï¼‰</h4>



































<table><thead><tr><th>ä¼˜åŒ–ç»´åº¦</th><th>ä¼˜åŒ–å‰</th><th>ä¼˜åŒ–å</th><th>æå‡æ¯”ä¾‹</th></tr></thead><tbody><tr><td>å¼€å‘æœŸå†·å¯åŠ¨æ—¶é—´</td><td>8-10 ç§’</td><td>1-2 ç§’</td><td>80%+</td></tr><tr><td>çƒ­æ›´æ–°å»¶è¿Ÿ</td><td>2-3 ç§’</td><td>â‰¤300ms</td><td>85%+</td></tr><tr><td>ç”Ÿäº§æ‰“åŒ…ä½“ç§¯ï¼ˆæœªå‹ç¼©ï¼‰</td><td>1.2MB</td><td>450KB</td><td>62.5%</td></tr><tr><td>é¦–å±åŠ è½½æ—¶é—´ï¼ˆ3G ç½‘ç»œï¼‰</td><td>8-10 ç§’</td><td>2-3 ç§’</td><td>70%+</td></tr></tbody></table>
<h4 data-id="heading-21">2. å¸¸è§é¿å‘ç‚¹ï¼ˆå¿…çœ‹ï¼‰</h4>
<ul>
<li>ä¸è¦ç›²ç›®å¼€å¯æ‰€æœ‰ä¼˜åŒ–ï¼šæŒ‰éœ€ä¼˜åŒ–å³å¯ï¼Œæ¯”å¦‚å°å‹é¡¹ç›®æ— éœ€é…ç½®å¤šé¡µé¢å…¥å£ã€æ‰‹åŠ¨åˆ†åŒ…ï¼Œåè€Œä¼šå¢åŠ é…ç½®å¤æ‚åº¦ï¼›</li>
<li>é¿å…è¿‡åº¦å‹ç¼©ï¼šç”¨ terser å‹ç¼©è™½èƒ½å‡å°ä½“ç§¯ï¼Œä½†ä¼šå¢åŠ æ‰“åŒ…æ—¶é—´ï¼Œå¤§å‹é¡¹ç›®å¯æƒè¡¡é€‰æ‹©ï¼Œå°å‹é¡¹ç›®ç”¨ esbuild è¶³å¤Ÿï¼›</li>
<li>å›¾ç‰‡è½¬ base64 è¦é€‚åº¦ï¼šå¤§äº 4KB çš„å›¾ç‰‡ä¸å»ºè®®è½¬ base64ï¼Œä¼šå¢åŠ  JS æ–‡ä»¶ä½“ç§¯ï¼Œåè€Œæ‹–æ…¢é¦–å±åŠ è½½ï¼›</li>
<li>ç¬¬ä¸‰æ–¹åº“ä¼˜åŒ–ä¼˜å…ˆï¼šå¾ˆå¤šæ—¶å€™æ€§èƒ½ç“¶é¢ˆæ¥è‡ªç¬¬ä¸‰æ–¹åº“ï¼ˆå¦‚ echartsã€xlsxï¼‰ï¼Œä¼˜å…ˆè€ƒè™‘æŒ‰éœ€å¼•å…¥ã€CDN å¼•å…¥ï¼Œè€Œéè‡ªå·±ä¼˜åŒ–æºç ã€‚</li>
</ul>
<h3 data-id="heading-22">å…­ã€ç»“å°¾äº’åŠ¨</h3>
<p>ä»¥ä¸Šå°±æ˜¯ Vue3 + Vite ä»å¼€å‘åˆ°ç”Ÿäº§çš„å…¨æ–¹ä½æ€§èƒ½ä¼˜åŒ–å®æˆ˜æŠ€å·§ï¼Œæ‰€æœ‰é…ç½®å‡ç»è¿‡çœŸå®é¡¹ç›®éªŒè¯ï¼Œç›´æ¥å¤åˆ¶å°±èƒ½ç”¨!</p>
<p>ä½ åœ¨ä½¿ç”¨ Vue3 + Vite æ—¶ï¼Œè¿˜é‡åˆ°è¿‡å“ªäº›æ€§èƒ½é—®é¢˜ï¼Ÿæ¯”å¦‚å†·å¯åŠ¨å¡é¡¿ã€æ‰“åŒ…ä½“ç§¯è¿‡å¤§ã€çƒ­æ›´æ–°å¤±æ•ˆç­‰ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºç•™è¨€è®¨è®ºï¼Œä¸€èµ·è§£å†³å‰ç«¯æ€§èƒ½éš¾é¢˜ï½</p>
<p>å¦‚æœè§‰å¾—è¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©ï¼Œåˆ«å¿˜äº†ç‚¹èµã€æ”¶è—ã€å…³æ³¨ï¼Œåç»­ä¼šåˆ†äº«æ›´å¤š Vue3ã€Viteã€TS ç›¸å…³çš„å®æˆ˜å¹²è´§ï¼</p>
<p>æ˜é‡‘æ ‡ç­¾æ¨èï¼š#å‰ç«¯ #Vue3 #Vite #æ€§èƒ½ä¼˜åŒ– #TypeScriptï¼ˆ3-5 ä¸ªæ ‡ç­¾ï¼Œè´´åˆä¸»é¢˜ï¼Œæå‡æ›å…‰ï¼‰</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[äº”ä¸ªchrome ! æˆ‘å†ä¹Ÿä¸ç”¨åˆ‡è´¦å·äº†]]></title>    <link>https://juejin.cn/post/7604690250364223497</link>    <guid>https://juejin.cn/post/7604690250364223497</guid>    <pubDate>2026-02-10T01:53:56.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604690250364223497" data-draft-id="7604694326518366259" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="äº”ä¸ªchrome ! æˆ‘å†ä¹Ÿä¸ç”¨åˆ‡è´¦å·äº†"/> <meta itemprop="keywords" content="JavaScript,ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2026-02-10T01:53:56.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å…†å­é¾™"/> <meta itemprop="url" content="https://juejin.cn/user/994385683293918"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            äº”ä¸ªchrome ! æˆ‘å†ä¹Ÿä¸ç”¨åˆ‡è´¦å·äº†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/994385683293918/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å…†å­é¾™
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-10T01:53:56.000Z" title="Tue Feb 10 2026 01:53:56 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‘Šåˆ«å¤šè´¦å·åˆ‡æ¢çƒ¦æ¼ï¼šChrome å¤šå®ä¾‹é…ç½®ç®¡ç†æ–¹æ¡ˆ</h2>
<h3 data-id="heading-1">å‰è¨€</h3>
<p>ç›¸ä¿¡åšè¿‡è‡ªåŠ¨åŒ–æµ‹è¯•ã€çˆ¬è™«å¼€å‘æˆ–è€…éœ€è¦ç®¡ç†å¤šä¸ªå¹³å°è´¦å·çš„åŒå­¦ï¼Œéƒ½é‡åˆ°è¿‡è¿™æ ·çš„ç—›ç‚¹ï¼š</p>
<ul>
<li>ğŸ”„ <strong>é¢‘ç¹åˆ‡æ¢è´¦å·</strong>ï¼šæµ‹è¯•ä¸åŒè´¦å·çš„åŠŸèƒ½ï¼Œæ‰‹åŠ¨ç™»å½•ç™»å‡ºæ•ˆç‡ä½ä¸‹</li>
<li>ğŸš« <strong>æ— ç—•æ¨¡å¼ä¸ç»™åŠ›</strong>ï¼šæ¯æ¬¡éƒ½è¦é‡æ–°ç™»å½•ï¼ŒCookieã€LocalStorage å…¨ä¸¢å¤±</li>
<li>ğŸ¤¯ <strong>è„šæœ¬è·‘ä¸èµ·æ¥</strong>ï¼šè‡ªåŠ¨åŒ–è„šæœ¬éœ€è¦ç¨³å®šçš„ç™»å½•æ€ï¼Œæ‰‹åŠ¨åˆ‡æ¢æ ¹æœ¬ä¸ç°å®</li>
<li>ğŸ“¦ <strong>é…ç½®éš¾ç®¡ç†</strong>ï¼šå¤šä¸ª Chrome å®ä¾‹çš„é…ç½®æ•£è½å„å¤„ï¼Œç»´æŠ¤æˆæœ¬é«˜</li>
</ul>
<p>ä»Šå¤©åˆ†äº«ä¸€ä¸ªè½»é‡çº§çš„è§£å†³æ–¹æ¡ˆï¼š<strong>Chrome å¤šå®ä¾‹é…ç½®ç®¡ç†å™¨</strong>ï¼Œè®©ä½ ä¼˜é›…åœ°ç®¡ç†å¤šä¸ªç‹¬ç«‹çš„ Chrome å®ä¾‹ã€‚</p>
<h3 data-id="heading-2">æ ¸å¿ƒæ€è·¯</h3>
<p>Chrome æä¾›äº†ä¸¤ä¸ªå…³é”®å‚æ•°ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">--user-data-dir=/path/to/profile    <span class="hljs-comment"># ç‹¬ç«‹çš„ç”¨æˆ·æ•°æ®ç›®å½•</span>
--remote-debugging-port=9222         <span class="hljs-comment"># è¿œç¨‹è°ƒè¯•ç«¯å£</span>
</code></pre>
<p>é€šè¿‡ä¸ºæ¯ä¸ªè´¦å·åˆ†é…ç‹¬ç«‹çš„ç”¨æˆ·æ•°æ®ç›®å½•å’Œè°ƒè¯•ç«¯å£ï¼Œæˆ‘ä»¬å¯ä»¥ï¼š</p>
<ol>
<li><strong>å®Œå…¨éš”ç¦»</strong>ï¼šæ¯ä¸ªå®ä¾‹æ‹¥æœ‰ç‹¬ç«‹çš„ Cookieã€LocalStorageã€æ’ä»¶ç­‰</li>
<li><strong>æŒä¹…åŒ–ç™»å½•</strong>ï¼šå…³é—­æµè§ˆå™¨åï¼Œä¸‹æ¬¡å¯åŠ¨è‡ªåŠ¨æ¢å¤ç™»å½•æ€</li>
<li><strong>å¹¶è¡Œè¿è¡Œ</strong>ï¼šå¤šä¸ªå®ä¾‹å¯ä»¥åŒæ—¶è¿è¡Œï¼Œäº’ä¸å¹²æ‰°</li>
<li><strong>è„šæœ¬å‹å¥½</strong>ï¼šé€šè¿‡è°ƒè¯•ç«¯å£ï¼Œå¯ä»¥ç”¨ Puppeteer/Playwright æ§åˆ¶æµè§ˆå™¨</li>
</ol>
<p>æ•ˆæœä¹Ÿéå¸¸æ£’</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/502a342a27b141a0858df489455e0812~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YWG5a2Q6b6Z:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771293237&amp;x-signature=gUQhvYeImDnWn%2FXlJa%2BOCXvtxYc%3D" alt="image.png" loading="lazy"/></p>
<p>æ¯ä¸ªå®ä¾‹éƒ½æ˜¯å®Œå…¨éš”å¼€</p>
<h3 data-id="heading-3">å¿«é€Ÿä¸Šæ‰‹</h3>
<h4 data-id="heading-4">1. åˆ›å»ºé…ç½®</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> { createConfig } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./chromeToolConfig'</span>)

<span class="hljs-comment">// åˆ›å»ºæŠ–éŸ³ä¸“ç”¨é…ç½®</span>
<span class="hljs-keyword">const</span> douyinConfig = <span class="hljs-keyword">await</span> <span class="hljs-title function_">createConfig</span>({
  <span class="hljs-attr">name</span>: <span class="hljs-string">'æŠ–éŸ³è´¦å·1'</span>,
  <span class="hljs-attr">config</span>: {
    <span class="hljs-attr">userDataDir</span>: <span class="hljs-string">'./chrome-profiles/douyin-1'</span>,
    <span class="hljs-attr">remoteDebuggingPort</span>: <span class="hljs-number">9222</span>
  }
})

<span class="hljs-comment">// åˆ›å»ºå¾®åšä¸“ç”¨é…ç½®</span>
<span class="hljs-keyword">const</span> weiboConfig = <span class="hljs-keyword">await</span> <span class="hljs-title function_">createConfig</span>({
  <span class="hljs-attr">name</span>: <span class="hljs-string">'å¾®åšè´¦å·1'</span>,
  <span class="hljs-attr">config</span>: {
    <span class="hljs-attr">userDataDir</span>: <span class="hljs-string">'./chrome-profiles/weibo-1'</span>,
    <span class="hljs-attr">remoteDebuggingPort</span>: <span class="hljs-number">9223</span>
  }
})

<span class="hljs-comment">// åˆ›å»ºæŠ–éŸ³å’Œå¾®åšç¬¬ä¸€ä¸ªå°å·é…ç½®</span>
<span class="hljs-keyword">const</span> config2 = <span class="hljs-keyword">await</span> <span class="hljs-title function_">createConfig</span>({
  <span class="hljs-attr">name</span>: <span class="hljs-string">'å°å·A'</span>,
  <span class="hljs-attr">config</span>: {
    <span class="hljs-attr">userDataDir</span>: <span class="hljs-string">'./chrome-profiles/douyin-2'</span>,
    <span class="hljs-attr">remoteDebuggingPort</span>: <span class="hljs-number">9224</span>
  }
})

<span class="hljs-comment">// åˆ›å»ºæŠ–éŸ³å’Œå¾®åšç¬¬äºŒä¸ªå°å·é…ç½®</span>
<span class="hljs-keyword">const</span> config3 = <span class="hljs-keyword">await</span> <span class="hljs-title function_">createConfig</span>({
  <span class="hljs-attr">name</span>: <span class="hljs-string">'å°å·B'</span>,
  <span class="hljs-attr">config</span>: {
    <span class="hljs-attr">userDataDir</span>: <span class="hljs-string">'./chrome-profiles/douyin-2'</span>,
    <span class="hljs-attr">remoteDebuggingPort</span>: <span class="hljs-number">9225</span>
  }
})
</code></pre>
<h4 data-id="heading-5">2. å¯åŠ¨ Chrome</h4>
<p>æä¾›äº†ä¸‰ç§å¯åŠ¨æ¨¡å¼ï¼Œæ»¡è¶³ä¸åŒåœºæ™¯éœ€æ±‚ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># é»˜è®¤æ¨¡å¼ï¼šå¦‚æœå·²è¿è¡Œåˆ™æç¤º</span>
node chromeToolConfig/launch.js 1

<span class="hljs-comment"># å¼ºåˆ¶é‡å¯ï¼šæ€æ­»ç°æœ‰è¿›ç¨‹å¹¶é‡å¯</span>
node chromeToolConfig/launch.js 1 -hard

<span class="hljs-comment"># å¤ç”¨æ¨¡å¼ï¼šå°†ç°æœ‰çª—å£ç½®é¡¶</span>
node chromeToolConfig/launch.js 1 -soft

<span class="hljs-comment"># å¯åŠ¨æ—¶æ‰“å¼€æŒ‡å®šç½‘å€</span>
node chromeToolConfig/launch.js 1 https://www.douyin.com
</code></pre>
<p><strong>æ¨¡å¼å¯¹æ¯”</strong>ï¼š</p>

























<table><thead><tr><th>æ¨¡å¼</th><th>åœºæ™¯</th><th>è¡Œä¸º</th></tr></thead><tbody><tr><td><code>-normal</code></td><td>æ—¥å¸¸ä½¿ç”¨</td><td>å·²è¿è¡Œæ—¶æç¤ºç”¨æˆ·é€‰æ‹©</td></tr><tr><td><code>-hard</code></td><td>è„šæœ¬è‡ªåŠ¨åŒ–</td><td>å¼ºåˆ¶é‡å¯ï¼Œç¡®ä¿å¹²å‡€ç¯å¢ƒ</td></tr><tr><td><code>-soft</code></td><td>å¿«é€Ÿåˆ‡æ¢</td><td>å¤ç”¨è¿›ç¨‹ï¼Œç§’çº§å“åº”</td></tr></tbody></table>
<h4 data-id="heading-6">3. ç®¡ç†è´¦å·é“¾æ¥</h4>
<p>ä¸ºæ¯ä¸ªé…ç½®å…³è”å¹³å°è´¦å·ä¿¡æ¯ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> { addLink } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./chromeToolConfig'</span>)

<span class="hljs-comment">// ä¸ºé…ç½®æ·»åŠ æŠ–éŸ³è´¦å·ä¿¡æ¯</span>
<span class="hljs-keyword">await</span> <span class="hljs-title function_">addLink</span>(<span class="hljs-string">'chrome_config-1'</span>, <span class="hljs-string">'douyin'</span>, {
  <span class="hljs-attr">id</span>: <span class="hljs-string">'user_123456'</span>,
  <span class="hljs-attr">name</span>: <span class="hljs-string">'æˆ‘çš„æŠ–éŸ³è´¦å·'</span>,
  <span class="hljs-attr">extra</span>: {
    ç²‰ä¸æ•°: <span class="hljs-string">'10ä¸‡'</span>,
    å¤‡æ³¨: <span class="hljs-string">'ä¸»è´¦å·'</span>
  }
})

<span class="hljs-comment">// æ·»åŠ å¾®åšè´¦å·</span>
<span class="hljs-keyword">await</span> <span class="hljs-title function_">addLink</span>(<span class="hljs-string">'chrome_config-1'</span>, <span class="hljs-string">'weibo'</span>, {
  <span class="hljs-attr">id</span>: <span class="hljs-string">'weibo_789'</span>,
  <span class="hljs-attr">name</span>: <span class="hljs-string">'æˆ‘çš„å¾®åš'</span>
})
</code></pre>
<h4 data-id="heading-7">4. ä¹¦ç­¾åŒæ­¥</h4>
<p>å°†ä¸€ä¸ªé…ç½®çš„è´¦å·ä¿¡æ¯åŒæ­¥åˆ°å¦ä¸€ä¸ªé…ç½®ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> { syncBookmarks } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./chromeToolConfig'</span>)

<span class="hljs-comment">// åˆå¹¶æ¨¡å¼ï¼šä¿ç•™ç›®æ ‡é…ç½®çš„ç°æœ‰è´¦å·</span>
<span class="hljs-keyword">await</span> <span class="hljs-title function_">syncBookmarks</span>(<span class="hljs-string">'1'</span>, <span class="hljs-string">'2'</span>, { <span class="hljs-attr">merge</span>: <span class="hljs-literal">true</span> })

<span class="hljs-comment">// è¦†ç›–æ¨¡å¼ï¼šå®Œå…¨æ›¿æ¢ç›®æ ‡é…ç½®çš„è´¦å·</span>
<span class="hljs-keyword">await</span> <span class="hljs-title function_">syncBookmarks</span>(<span class="hljs-string">'1'</span>, <span class="hljs-string">'2'</span>, { <span class="hljs-attr">merge</span>: <span class="hljs-literal">false</span> })

<span class="hljs-comment">// åªåŒæ­¥æŒ‡å®šå¹³å°</span>
<span class="hljs-keyword">await</span> <span class="hljs-title function_">syncBookmarks</span>(<span class="hljs-string">'1'</span>, <span class="hljs-string">'2'</span>, { 
  <span class="hljs-attr">platforms</span>: [<span class="hljs-string">'douyin'</span>, <span class="hljs-string">'weibo'</span>] 
})
</code></pre>
<h3 data-id="heading-8">å®æˆ˜åœºæ™¯</h3>
<h4 data-id="heading-9">åœºæ™¯ 1ï¼šè‡ªåŠ¨åŒ–æµ‹è¯•</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> puppeteer = <span class="hljs-built_in">require</span>(<span class="hljs-string">'puppeteer'</span>)
<span class="hljs-keyword">const</span> { launchChrome } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./chromeToolConfig'</span>)

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">runTest</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// å¯åŠ¨é…ç½® 1 çš„ Chrome</span>
  <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> <span class="hljs-title function_">launchChrome</span>(<span class="hljs-string">'1'</span>)
  
  <span class="hljs-comment">// è¿æ¥åˆ°å·²å¯åŠ¨çš„ Chrome</span>
  <span class="hljs-keyword">const</span> browser = <span class="hljs-keyword">await</span> puppeteer.<span class="hljs-title function_">connect</span>({
    <span class="hljs-attr">browserURL</span>: <span class="hljs-string">`http://localhost:<span class="hljs-subst">${result.port}</span>`</span>
  })
  
  <span class="hljs-keyword">const</span> page = <span class="hljs-keyword">await</span> browser.<span class="hljs-title function_">newPage</span>()
  <span class="hljs-keyword">await</span> page.<span class="hljs-title function_">goto</span>(<span class="hljs-string">'https://www.douyin.com'</span>)
  
  <span class="hljs-comment">// æ‰§è¡Œæµ‹è¯•...</span>
  <span class="hljs-comment">// ç™»å½•æ€å·²è‡ªåŠ¨æ¢å¤ï¼Œæ— éœ€é‡æ–°ç™»å½•</span>
}
</code></pre>
<h4 data-id="heading-10">åœºæ™¯ 2ï¼šå¤šè´¦å·å¹¶è¡Œæ“ä½œ</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ç»ˆç«¯ 1ï¼šå¯åŠ¨è´¦å· 1</span>
node chromeToolConfig/launch.js 1 https://www.douyin.com

<span class="hljs-comment"># ç»ˆç«¯ 2ï¼šå¯åŠ¨è´¦å· 2</span>
node chromeToolConfig/launch.js 2 https://www.douyin.com

<span class="hljs-comment"># ç»ˆç«¯ 3ï¼šå¯åŠ¨è´¦å· 3</span>
node chromeToolConfig/launch.js 3 https://www.douyin.com
</code></pre>
<p>ä¸‰ä¸ªçª—å£åŒæ—¶è¿è¡Œï¼Œäº’ä¸å¹²æ‰°ï¼Œå¯ä»¥åŒæ—¶è¿›è¡Œä¸åŒè´¦å·çš„æ“ä½œã€‚</p>
<h4 data-id="heading-11">åœºæ™¯ 3ï¼šå¿«é€Ÿåˆ‡æ¢è´¦å·</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å·¥ä½œæ—¶ä½¿ç”¨è´¦å· 1</span>
node chromeToolConfig/launch.js 1 -soft

<span class="hljs-comment"># éœ€è¦åˆ‡æ¢åˆ°è´¦å· 2</span>
node chromeToolConfig/launch.js 2 -soft

<span class="hljs-comment"># å›åˆ°è´¦å· 1</span>
node chromeToolConfig/launch.js 1 -soft
</code></pre>
<p>ä½¿ç”¨ <code>-soft</code> æ¨¡å¼ï¼Œç§’çº§åˆ‡æ¢ï¼Œçª—å£è‡ªåŠ¨ç½®é¡¶ã€‚</p>
<h3 data-id="heading-12">æ ¸å¿ƒå®ç°</h3>
<h4 data-id="heading-13">1. é…ç½®ç®¡ç†</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// api/config.js</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">createConfig</span>(<span class="hljs-params">data</span>) {
  <span class="hljs-comment">// éªŒè¯æ•°æ®</span>
  <span class="hljs-title function_">validateConfig</span>(data)
  
  <span class="hljs-comment">// æ£€æŸ¥ç«¯å£å’Œç›®å½•å”¯ä¸€æ€§</span>
  <span class="hljs-keyword">await</span> <span class="hljs-title function_">checkUniqueness</span>(data.<span class="hljs-property">config</span>)
  
  <span class="hljs-comment">// ç”Ÿæˆ ID</span>
  <span class="hljs-keyword">const</span> id = <span class="hljs-title function_">generateId</span>(<span class="hljs-string">'chrome_config'</span>)
  
  <span class="hljs-comment">// ä¿å­˜é…ç½®</span>
  <span class="hljs-keyword">const</span> config = {
    id,
    <span class="hljs-attr">name</span>: data.<span class="hljs-property">name</span>,
    <span class="hljs-attr">config</span>: data.<span class="hljs-property">config</span>,
    <span class="hljs-attr">links</span>: {},
    <span class="hljs-attr">createdAt</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">toISOString</span>()
  }
  
  <span class="hljs-keyword">await</span> db.<span class="hljs-title function_">save</span>(<span class="hljs-string">'configs'</span>, id, config)
  <span class="hljs-keyword">return</span> config
}
</code></pre>
<h4 data-id="heading-14">2. Chrome å¯åŠ¨</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// api/chrome.js</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">launchChrome</span>(<span class="hljs-params">id, options = {}</span>) {
  <span class="hljs-keyword">const</span> config = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getConfig</span>(id)
  <span class="hljs-keyword">const</span> userDataDir = path.<span class="hljs-title function_">resolve</span>(config.<span class="hljs-property">config</span>.<span class="hljs-property">userDataDir</span>)
  
  <span class="hljs-comment">// ç¡®ä¿ç›®å½•å­˜åœ¨</span>
  <span class="hljs-keyword">await</span> fs.<span class="hljs-title function_">ensureDir</span>(userDataDir)
  
  <span class="hljs-comment">// æ„å»ºå¯åŠ¨å‚æ•°</span>
  <span class="hljs-keyword">const</span> args = [
    <span class="hljs-string">`--user-data-dir=<span class="hljs-subst">${userDataDir}</span>`</span>,
    <span class="hljs-string">`--remote-debugging-port=<span class="hljs-subst">${config.config.remoteDebuggingPort}</span>`</span>
  ]
  
  <span class="hljs-keyword">if</span> (options.<span class="hljs-property">url</span>) {
    args.<span class="hljs-title function_">push</span>(options.<span class="hljs-property">url</span>)
  }
  
  <span class="hljs-comment">// å¯åŠ¨ Chrome</span>
  <span class="hljs-keyword">const</span> chromePath = <span class="hljs-title function_">getChromePath</span>()
  <span class="hljs-keyword">const</span> chromeProcess = <span class="hljs-title function_">spawn</span>(chromePath, args, {
    <span class="hljs-attr">detached</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">stdio</span>: <span class="hljs-string">'ignore'</span>
  })
  
  chromeProcess.<span class="hljs-title function_">unref</span>()
  
  <span class="hljs-keyword">return</span> {
    <span class="hljs-attr">pid</span>: chromeProcess.<span class="hljs-property">pid</span>,
    <span class="hljs-attr">port</span>: config.<span class="hljs-property">config</span>.<span class="hljs-property">remoteDebuggingPort</span>
  }
}
</code></pre>
<h4 data-id="heading-15">3. è¿›ç¨‹ç®¡ç†</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦è¿è¡Œ</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">isChromRunning</span>(<span class="hljs-params">id</span>) {
  <span class="hljs-keyword">const</span> config = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getConfig</span>(id)
  <span class="hljs-keyword">const</span> port = config.<span class="hljs-property">config</span>.<span class="hljs-property">remoteDebuggingPort</span>
  
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> req = http.<span class="hljs-title function_">get</span>(
      <span class="hljs-string">`http://localhost:<span class="hljs-subst">${port}</span>/json/version`</span>,
      <span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> <span class="hljs-title function_">resolve</span>(res.<span class="hljs-property">statusCode</span> === <span class="hljs-number">200</span>)
    )
    
    req.<span class="hljs-title function_">on</span>(<span class="hljs-string">'error'</span>, <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">resolve</span>(<span class="hljs-literal">false</span>))
    req.<span class="hljs-built_in">setTimeout</span>(<span class="hljs-number">1000</span>, <span class="hljs-function">() =&gt;</span> {
      req.<span class="hljs-title function_">destroy</span>()
      <span class="hljs-title function_">resolve</span>(<span class="hljs-literal">false</span>)
    })
  })
}

<span class="hljs-comment">// æ€æ­»è¿›ç¨‹</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">killChrome</span>(<span class="hljs-params">id</span>) {
  <span class="hljs-keyword">const</span> config = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getConfig</span>(id)
  <span class="hljs-keyword">const</span> port = config.<span class="hljs-property">config</span>.<span class="hljs-property">remoteDebuggingPort</span>
  
  <span class="hljs-comment">// é€šè¿‡ç«¯å£æŸ¥æ‰¾å¹¶æ€æ­»è¿›ç¨‹</span>
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> <span class="hljs-title function_">killChromeByPort</span>(port)
}
</code></pre>
<h3 data-id="heading-16">é¡¹ç›®ç»“æ„</h3>
<pre><code class="hljs language-bash" lang="bash">chromeToolConfig/
â”œâ”€â”€ api/                    <span class="hljs-comment"># API å±‚</span>
â”‚   â”œâ”€â”€ config.js          <span class="hljs-comment"># é…ç½®ç®¡ç†</span>
â”‚   â”œâ”€â”€ link.js            <span class="hljs-comment"># è´¦å·é“¾æ¥ç®¡ç†</span>
â”‚   â”œâ”€â”€ chrome.js          <span class="hljs-comment"># Chrome å¯åŠ¨ç®¡ç†</span>
â”‚   â””â”€â”€ validator.js       <span class="hljs-comment"># æ•°æ®éªŒè¯</span>
â”œâ”€â”€ database/              <span class="hljs-comment"># æ•°æ®å±‚</span>
â”‚   â”œâ”€â”€ db.js              <span class="hljs-comment"># æ•°æ®åº“æ“ä½œ</span>
â”‚   â”œâ”€â”€ configs.json       <span class="hljs-comment"># é…ç½®å­˜å‚¨</span>
â”‚   â””â”€â”€ todos.json         <span class="hljs-comment"># å¾…åŠäº‹é¡¹</span>
â”œâ”€â”€ utils/                 <span class="hljs-comment"># å·¥å…·å‡½æ•°</span>
â”‚   â”œâ”€â”€ index.js           <span class="hljs-comment"># é€šç”¨å·¥å…·</span>
â”‚   â””â”€â”€ sync.js            <span class="hljs-comment"># ä¹¦ç­¾åŒæ­¥</span>
â”œâ”€â”€ launch.js              <span class="hljs-comment"># å‘½ä»¤è¡Œå¯åŠ¨å·¥å…·</span>
â””â”€â”€ index.js               <span class="hljs-comment"># ä¸»å…¥å£</span>
</code></pre>
<h3 data-id="heading-17">è®¾è®¡äº®ç‚¹</h3>
<h4 data-id="heading-18">1. ID å‘½åè§„èŒƒ</h4>
<p>é‡‡ç”¨ç»Ÿä¸€çš„å‘½åè§„åˆ™ï¼š</p>
<ul>
<li>é…ç½® IDï¼š<code>chrome_config-1</code></li>
<li>å¾…åŠ IDï¼š<code>todo-1</code></li>
</ul>
<p><strong>è§„åˆ™</strong>ï¼š</p>
<ul>
<li>åŒä¸€å«ä¹‰ç”¨ <code>_</code> è¿æ¥ï¼ˆå¦‚ <code>chrome_config</code>ï¼‰</li>
<li>ä¸åŒå«ä¹‰ç”¨ <code>-</code> è¿æ¥ï¼ˆå¦‚ <code>chrome_config-1</code>ï¼‰</li>
</ul>
<h4 data-id="heading-19">2. è‡ªåŠ¨ ID è¡¥å…¨</h4>
<p>æ”¯æŒç®€å†™ï¼Œè‡ªåŠ¨è¡¥å…¨å‰ç¼€ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// è¾“å…¥ "1"ï¼Œè‡ªåŠ¨è½¬æ¢ä¸º "chrome_config-1"</span>
<span class="hljs-keyword">await</span> <span class="hljs-title function_">getConfig</span>(<span class="hljs-string">'1'</span>)
<span class="hljs-keyword">await</span> <span class="hljs-title function_">launchChrome</span>(<span class="hljs-string">'1'</span>)
<span class="hljs-keyword">await</span> <span class="hljs-title function_">syncBookmarks</span>(<span class="hljs-string">'1'</span>, <span class="hljs-string">'2'</span>)
</code></pre>
<h4 data-id="heading-20">3. æ•°æ®éªŒè¯</h4>
<p>ä½¿ç”¨ Joi è¿›è¡Œä¸¥æ ¼çš„æ•°æ®éªŒè¯ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> configSchema = <span class="hljs-title class_">Joi</span>.<span class="hljs-title function_">object</span>({
  <span class="hljs-attr">name</span>: <span class="hljs-title class_">Joi</span>.<span class="hljs-title function_">string</span>().required(),
  <span class="hljs-attr">config</span>: <span class="hljs-title class_">Joi</span>.<span class="hljs-title function_">object</span>({
    <span class="hljs-attr">userDataDir</span>: <span class="hljs-title class_">Joi</span>.<span class="hljs-title function_">string</span>().required(),
    <span class="hljs-attr">remoteDebuggingPort</span>: <span class="hljs-title class_">Joi</span>.<span class="hljs-title function_">number</span>().<span class="hljs-title function_">integer</span>().<span class="hljs-title function_">min</span>(<span class="hljs-number">1024</span>).<span class="hljs-title function_">max</span>(<span class="hljs-number">65535</span>).required(),
    <span class="hljs-attr">headless</span>: <span class="hljs-title class_">Joi</span>.<span class="hljs-title function_">boolean</span>(),
    <span class="hljs-attr">windowSize</span>: <span class="hljs-title class_">Joi</span>.<span class="hljs-title function_">string</span>().<span class="hljs-title function_">pattern</span>(<span class="hljs-regexp">/^\d+,\d+$/</span>)
  }).required()
})
</code></pre>
<h4 data-id="heading-21">4. è·¨å¹³å°æ”¯æŒ</h4>
<p>è‡ªåŠ¨æ£€æµ‹æ“ä½œç³»ç»Ÿï¼Œä½¿ç”¨å¯¹åº”çš„ Chrome è·¯å¾„ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">getChromePath</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> platform = process.<span class="hljs-property">platform</span>
  
  <span class="hljs-keyword">if</span> (platform === <span class="hljs-string">'darwin'</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-string">'/Applications/Google Chrome.app/Contents/MacOS/Google Chrome'</span>
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (platform === <span class="hljs-string">'win32'</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-string">'C:\\Program Files\\Google\\Chrome\\Application\\chrome.exe'</span>
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-string">'google-chrome'</span>
  }
}
</code></pre>
<h3 data-id="heading-22">æ‰©å±•èƒ½åŠ›</h3>
<h4 data-id="heading-23">1. ä¸ Puppeteer é›†æˆ</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> puppeteer = <span class="hljs-built_in">require</span>(<span class="hljs-string">'puppeteer'</span>)
<span class="hljs-keyword">const</span> { launchChrome } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./chromeToolConfig'</span>)

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">connectToChrome</span>(<span class="hljs-params">configId</span>) {
  <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> <span class="hljs-title function_">launchChrome</span>(configId)
  
  <span class="hljs-keyword">const</span> browser = <span class="hljs-keyword">await</span> puppeteer.<span class="hljs-title function_">connect</span>({
    <span class="hljs-attr">browserURL</span>: <span class="hljs-string">`http://localhost:<span class="hljs-subst">${result.port}</span>`</span>
  })
  
  <span class="hljs-keyword">return</span> browser
}
</code></pre>
<h4 data-id="heading-24">2. ä¸ Playwright é›†æˆ</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> { chromium } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'playwright'</span>)
<span class="hljs-keyword">const</span> { launchChrome } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./chromeToolConfig'</span>)

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">connectToChrome</span>(<span class="hljs-params">configId</span>) {
  <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> <span class="hljs-title function_">launchChrome</span>(configId)
  
  <span class="hljs-keyword">const</span> browser = <span class="hljs-keyword">await</span> chromium.<span class="hljs-title function_">connectOverCDP</span>(
    <span class="hljs-string">`http://localhost:<span class="hljs-subst">${result.port}</span>`</span>
  )
  
  <span class="hljs-keyword">return</span> browser
}
</code></pre>
<h4 data-id="heading-25">3. å®šæ—¶ä»»åŠ¡</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> cron = <span class="hljs-built_in">require</span>(<span class="hljs-string">'node-cron'</span>)

<span class="hljs-comment">// æ¯å¤©å‡Œæ™¨ 2 ç‚¹é‡å¯æ‰€æœ‰ Chrome å®ä¾‹</span>
cron.<span class="hljs-title function_">schedule</span>(<span class="hljs-string">'0 2 * * *'</span>, <span class="hljs-keyword">async</span> () =&gt; {
  <span class="hljs-keyword">const</span> configs = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getAllConfigs</span>()
  
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> config <span class="hljs-keyword">of</span> configs) {
    <span class="hljs-keyword">await</span> <span class="hljs-title function_">killChrome</span>(config.<span class="hljs-property">id</span>)
    <span class="hljs-keyword">await</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function"><span class="hljs-params">resolve</span> =&gt;</span> <span class="hljs-built_in">setTimeout</span>(resolve, <span class="hljs-number">1000</span>))
    <span class="hljs-keyword">await</span> <span class="hljs-title function_">launchChrome</span>(config.<span class="hljs-property">id</span>)
  }
})
</code></pre>
<h3 data-id="heading-26">æœ€ä½³å®è·µ</h3>
<h4 data-id="heading-27">1. ç«¯å£åˆ†é…</h4>
<p>å»ºè®®ä¸ºä¸åŒç”¨é€”çš„é…ç½®åˆ†é…ä¸åŒçš„ç«¯å£æ®µï¼š</p>
<ul>
<li>9222-9229ï¼šå¼€å‘ç¯å¢ƒ</li>
<li>9230-9239ï¼šæµ‹è¯•ç¯å¢ƒ</li>
<li>9240-9249ï¼šç”Ÿäº§ç¯å¢ƒ</li>
</ul>
<h4 data-id="heading-28">2. ç›®å½•ç®¡ç†</h4>
<p>ä½¿ç”¨æœ‰æ„ä¹‰çš„ç›®å½•åï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">await</span> <span class="hljs-title function_">createConfig</span>({
  <span class="hljs-attr">name</span>: <span class="hljs-string">'æŠ–éŸ³-ä¸»è´¦å·'</span>,
  <span class="hljs-attr">config</span>: {
    <span class="hljs-attr">userDataDir</span>: <span class="hljs-string">'./chrome-profiles/douyin/main'</span>,
    <span class="hljs-attr">remoteDebuggingPort</span>: <span class="hljs-number">9222</span>
  }
})

<span class="hljs-keyword">await</span> <span class="hljs-title function_">createConfig</span>({
  <span class="hljs-attr">name</span>: <span class="hljs-string">'æŠ–éŸ³-æµ‹è¯•è´¦å·'</span>,
  <span class="hljs-attr">config</span>: {
    <span class="hljs-attr">userDataDir</span>: <span class="hljs-string">'./chrome-profiles/douyin/test'</span>,
    <span class="hljs-attr">remoteDebuggingPort</span>: <span class="hljs-number">9223</span>
  }
})
</code></pre>
<h4 data-id="heading-29">3. å®šæœŸæ¸…ç†</h4>
<p>å®šæœŸæ¸…ç†ä¸ç”¨çš„é…ç½®å’Œç”¨æˆ·æ•°æ®ç›®å½•ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> { deleteConfig } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./chromeToolConfig'</span>)
<span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs-extra'</span>)

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">cleanup</span>(<span class="hljs-params">configId</span>) {
  <span class="hljs-keyword">const</span> config = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getConfig</span>(configId)
  
  <span class="hljs-comment">// åˆ é™¤é…ç½®</span>
  <span class="hljs-keyword">await</span> <span class="hljs-title function_">deleteConfig</span>(configId)
  
  <span class="hljs-comment">// åˆ é™¤ç”¨æˆ·æ•°æ®ç›®å½•</span>
  <span class="hljs-keyword">await</span> fs.<span class="hljs-title function_">remove</span>(config.<span class="hljs-property">config</span>.<span class="hljs-property">userDataDir</span>)
}
</code></pre>
<h4 data-id="heading-30">4. é”™è¯¯å¤„ç†</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">safelaunchChrome</span>(<span class="hljs-params">configId</span>) {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦å·²è¿è¡Œ</span>
    <span class="hljs-keyword">const</span> isRunning = <span class="hljs-keyword">await</span> <span class="hljs-title function_">isChromRunning</span>(configId)
    
    <span class="hljs-keyword">if</span> (isRunning) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Chrome å·²åœ¨è¿è¡Œï¼Œä½¿ç”¨ -hard æ¨¡å¼é‡å¯'</span>)
      <span class="hljs-keyword">await</span> <span class="hljs-title function_">killChrome</span>(configId)
      <span class="hljs-keyword">await</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function"><span class="hljs-params">resolve</span> =&gt;</span> <span class="hljs-built_in">setTimeout</span>(resolve, <span class="hljs-number">1000</span>))
    }
    
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> <span class="hljs-title function_">launchChrome</span>(configId)
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'å¯åŠ¨å¤±è´¥:'</span>, error.<span class="hljs-property">message</span>)
    <span class="hljs-keyword">throw</span> error
  }
}
</code></pre>
<h3 data-id="heading-31">æ€§èƒ½ä¼˜åŒ–</h3>
<h4 data-id="heading-32">1. å»¶è¿ŸåŠ è½½</h4>
<p>åªåœ¨éœ€è¦æ—¶æ‰å¯åŠ¨ Chromeï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ChromeManager</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">instances</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>()
  }
  
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">getInstance</span>(<span class="hljs-params">configId</span>) {
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">instances</span>.<span class="hljs-title function_">has</span>(configId)) {
      <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> <span class="hljs-title function_">launchChrome</span>(configId)
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">instances</span>.<span class="hljs-title function_">set</span>(configId, result)
    }
    
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">instances</span>.<span class="hljs-title function_">get</span>(configId)
  }
}
</code></pre>
<h4 data-id="heading-33">2. è¿æ¥æ± </h4>
<p>å¤ç”¨å·²å¯åŠ¨çš„å®ä¾‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ChromePool</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">maxSize = <span class="hljs-number">5</span></span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">pool</span> = []
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">maxSize</span> = maxSize
  }
  
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">acquire</span>(<span class="hljs-params">configId</span>) {
    <span class="hljs-comment">// æŸ¥æ‰¾ç©ºé—²å®ä¾‹</span>
    <span class="hljs-keyword">let</span> instance = <span class="hljs-variable language_">this</span>.<span class="hljs-property">pool</span>.<span class="hljs-title function_">find</span>(<span class="hljs-function"><span class="hljs-params">i</span> =&gt;</span> i.<span class="hljs-property">configId</span> === configId &amp;&amp; !i.<span class="hljs-property">busy</span>)
    
    <span class="hljs-keyword">if</span> (!instance) {
      <span class="hljs-comment">// åˆ›å»ºæ–°å®ä¾‹</span>
      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">pool</span>.<span class="hljs-property">length</span> &gt;= <span class="hljs-variable language_">this</span>.<span class="hljs-property">maxSize</span>) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'Pool is full'</span>)
      }
      
      <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> <span class="hljs-title function_">launchChrome</span>(configId)
      instance = { ...result, <span class="hljs-attr">busy</span>: <span class="hljs-literal">false</span> }
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">pool</span>.<span class="hljs-title function_">push</span>(instance)
    }
    
    instance.<span class="hljs-property">busy</span> = <span class="hljs-literal">true</span>
    <span class="hljs-keyword">return</span> instance
  }
  
  <span class="hljs-title function_">release</span>(<span class="hljs-params">instance</span>) {
    instance.<span class="hljs-property">busy</span> = <span class="hljs-literal">false</span>
  }
}
</code></pre>
<h3 data-id="heading-34">æ€»ç»“</h3>
<p>Chrome å¤šå®ä¾‹é…ç½®ç®¡ç†å™¨é€šè¿‡ä»¥ä¸‹ç‰¹æ€§ï¼Œå½»åº•è§£å†³äº†å¤šè´¦å·ç®¡ç†çš„ç—›ç‚¹ï¼š</p>
<p>âœ… <strong>å®Œå…¨éš”ç¦»</strong>ï¼šæ¯ä¸ªè´¦å·ç‹¬ç«‹çš„ç”¨æˆ·æ•°æ®ç›®å½•<br/>
âœ… <strong>æŒä¹…åŒ–ç™»å½•</strong>ï¼šå…³é—­æµè§ˆå™¨åè‡ªåŠ¨æ¢å¤ç™»å½•æ€<br/>
âœ… <strong>çµæ´»å¯åŠ¨</strong>ï¼šä¸‰ç§æ¨¡å¼æ»¡è¶³ä¸åŒåœºæ™¯éœ€æ±‚<br/>
âœ… <strong>è„šæœ¬å‹å¥½</strong>ï¼šé€šè¿‡è°ƒè¯•ç«¯å£è½»æ¾é›†æˆè‡ªåŠ¨åŒ–å·¥å…·<br/>
âœ… <strong>é…ç½®ç®¡ç†</strong>ï¼šç»Ÿä¸€ç®¡ç†æ‰€æœ‰é…ç½®å’Œè´¦å·ä¿¡æ¯<br/>
âœ… <strong>è·¨å¹³å°</strong>ï¼šæ”¯æŒ macOSã€Windowsã€Linux</p>
<p>æ— è®ºæ˜¯è‡ªåŠ¨åŒ–æµ‹è¯•ã€çˆ¬è™«å¼€å‘ï¼Œè¿˜æ˜¯æ—¥å¸¸çš„å¤šè´¦å·ç®¡ç†ï¼Œè¿™ä¸ªæ–¹æ¡ˆéƒ½èƒ½å¤§å¹…æå‡æ•ˆç‡ã€‚</p>
<h3 data-id="heading-35">å‚è€ƒèµ„æ–™</h3>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fchromedevtools.github.io%2Fdevtools-protocol%2F" target="_blank" title="https://chromedevtools.github.io/devtools-protocol/" ref="nofollow noopener noreferrer">Chrome DevTools Protocol</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fpptr.dev%2F" target="_blank" title="https://pptr.dev/" ref="nofollow noopener noreferrer">Puppeteer Documentation</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fplaywright.dev%2F" target="_blank" title="https://playwright.dev/" ref="nofollow noopener noreferrer">Playwright Documentation</a></li>
</ul>
<hr/>
<p>å¦‚æœè¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©ï¼Œæ¬¢è¿ç‚¹èµæ”¶è—ï¼æœ‰ä»»ä½•é—®é¢˜æ¬¢è¿åœ¨è¯„è®ºåŒºè®¨è®º ğŸ‰</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[GitLab/Gerritä¸­SSHåè®®å®ç°åŸç†åŠå…¬é’¥é‚®ç®±ä½œç”¨æµ…è°ˆ]]></title>    <link>https://juejin.cn/post/7604678037808611364</link>    <guid>https://juejin.cn/post/7604678037808611364</guid>    <pubDate>2026-02-10T01:55:10.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604678037808611364" data-draft-id="7604574877035741227" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="GitLab/Gerritä¸­SSHåè®®å®ç°åŸç†åŠå…¬é’¥é‚®ç®±ä½œç”¨æµ…è°ˆ"/> <meta itemprop="keywords" content="Android"/> <meta itemprop="datePublished" content="2026-02-10T01:55:10.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Androidç«¥è¯é•‡"/> <meta itemprop="url" content="https://juejin.cn/user/2716247406161241"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            GitLab/Gerritä¸­SSHåè®®å®ç°åŸç†åŠå…¬é’¥é‚®ç®±ä½œç”¨æµ…è°ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2716247406161241/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Androidç«¥è¯é•‡
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-10T01:55:10.000Z" title="Tue Feb 10 2026 01:55:10 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ğŸ”‘ SSHå¯†é’¥å¤§å†’é™©ï¼šå°æ˜ä¸GitåŸå ¡çš„æ•…äº‹</h2>
<h3 data-id="heading-1">æ•…äº‹èƒŒæ™¯ï¼šç¥ç§˜çš„GitåŸå ¡</h3>
<p>æƒ³è±¡ä¸€ä¸‹ï¼Œæœ‰ä¸€ä¸ªå«åšâ€œGitåŸå ¡â€ï¼ˆGitæœåŠ¡å™¨ï¼‰çš„åœ°æ–¹ï¼Œé‡Œé¢è—ç€å¾ˆå¤šçè´µçš„ä»£ç å®è—ã€‚å°æ˜ï¼ˆå¼€å‘è€…ï¼‰æƒ³å»åŸå ¡é‡Œå­˜æ”¾å’Œå–å‡ºå®è—ï¼Œä½†åŸå ¡æœ‰ä¸¥æ ¼çš„å®‰å…¨è§„åˆ™ï¼š</p>
<h4 data-id="heading-2">ç¬¬ä¸€ç« ï¼šç‰¹æ®Šçš„é’¥åŒ™ç³»ç»Ÿ ğŸ—ï¸</h4>
<p><strong>ä¼ ç»Ÿé’¥åŒ™ï¼ˆå¯†ç ï¼‰çš„é—®é¢˜ï¼š</strong></p>
<ul>
<li>æ¯æ¬¡è¿›å‡ºéƒ½è¦æŠ¥å¯†ç ï¼Œä¾å«ï¼ˆæœåŠ¡å™¨ï¼‰å¾—è®°ä½æ‰€æœ‰äººçš„å¯†ç </li>
<li>å¯†ç å®¹æ˜“è¢«äººå·å¬ï¼Œä¸å¤Ÿå®‰å…¨</li>
<li>å°æ˜å¾ˆå¥å¿˜ï¼Œç»å¸¸å¿˜è®°å¯†ç </li>
</ul>
<p><strong>åŸå ¡çš„æ–°å‘æ˜ï¼šåŒç”Ÿé­”æ³•é’¥åŒ™</strong></p>
<pre><code class="hljs language-text" lang="text">å…¬é’¥ = é­”æ³•é”èŠ¯ï¼ˆå¯ä»¥ç»™åˆ«äººï¼‰
ç§é’¥ = é­”æ³•é’¥åŒ™ï¼ˆè‡ªå·±ä¿ç®¡ï¼Œç»ä¸å¤–ä¼ ï¼‰
</code></pre>
<h3 data-id="heading-3">ğŸ“œ ä»£ç å®ç°ï¼šåˆ¶ä½œé­”æ³•é’¥åŒ™</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å°æ˜åœ¨æœ¬åœ°ç»ˆç«¯æ–½å±•é­”æ³•</span>
ssh-keygen -t ed25519 -C <span class="hljs-string">"xiaoming@company.com"</span>

<span class="hljs-comment"># é­”æ³•è¿‡ç¨‹è¯¦è§£ï¼š</span>
<span class="hljs-comment"># 1. -t ed25519ï¼šé€‰æ‹©æœ€å…ˆè¿›çš„é­”æ³•é…æ–¹ï¼ˆåŠ å¯†ç®—æ³•ï¼‰</span>
<span class="hljs-comment"># 2. -C "é‚®ç®±"ï¼šç»™é’¥åŒ™åˆ»ä¸Šä¸“å±æ ‡è®°</span>
<span class="hljs-comment"># 3. ç³»ç»Ÿä¼šé—®ï¼šé’¥åŒ™å­˜æ”¾å“ªé‡Œï¼Ÿï¼ˆé»˜è®¤~/.ssh/id_ed25519ï¼‰</span>
<span class="hljs-comment"># 4. ç³»ç»Ÿä¼šé—®ï¼šè¦ä¸è¦ç»™é’¥åŒ™åŠ å’’è¯­å¯†ç ï¼Ÿï¼ˆå¯é€‰ï¼‰</span>

<span class="hljs-comment"># ç”Ÿæˆçš„ä¸¤ä¸ªæ–‡ä»¶ï¼š</span>
~/.ssh/id_ed25519      <span class="hljs-comment"># ç§é’¥ï¼ˆç»å¯†ï¼600æƒé™ï¼‰</span>
~/.ssh/id_ed25519.pub  <span class="hljs-comment"># å…¬é’¥ï¼ˆå¯ä»¥å…¬å¼€ï¼‰</span>
</code></pre>
<h3 data-id="heading-4">ğŸ° å…¬é’¥å†…å®¹è§£æï¼šä¸ºä»€ä¹ˆè¦æœ‰é‚®ç®±ï¼Ÿ</h3>
<p>çœ‹çœ‹å°æ˜çš„å…¬é’¥æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-text" lang="text">ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIML5rV... xiaoming@company.com
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆå¿…é¡»åˆ»é‚®ç®±ï¼Ÿæ•…äº‹ç»§ç»­...</strong></p>
<h4 data-id="heading-5">ç¬¬äºŒç« ï¼šåŸå ¡çš„é’¥åŒ™å¢™ ğŸ§±</h4>
<p>å½“å°æ˜æŠŠè‡ªå·±çš„â€œé­”æ³•é”èŠ¯â€ï¼ˆå…¬é’¥ï¼‰äº¤ç»™åŸå ¡æ—¶ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åŸå ¡ç®¡ç†å‘˜æŠŠå…¬é’¥è´´åœ¨â€œå…è®¸è¿›å…¥çš„é’¥åŒ™å¢™â€ä¸Š</span>
<span class="hljs-comment"># æ–‡ä»¶ä½ç½®ï¼š~/.ssh/authorized_keys</span>

<span class="hljs-comment"># é’¥åŒ™å¢™å†…å®¹ï¼š</span>
ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIML5rV... xiaoming@company.com
ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQC8... xiaohong@company.com
ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIKJ9hT... ci-bot@company.com
</code></pre>
<p><strong>ğŸ“Œ é‚®ç®±çš„ä¸‰å¤§ä½œç”¨ï¼š</strong></p>
<ol>
<li><strong>èº«ä»½æ ‡è¯†</strong>ï¼šåŸå ¡ä¾å«ä¸€çœ‹å°±çŸ¥é“â€œå“¦ï¼Œè¿™æ˜¯å°æ˜æ¥äº†ï¼â€</li>
<li><strong>é˜²æ­¢æ··ä¹±</strong>ï¼šå¦‚æœå°æ˜æœ‰å¤šä¸ªå¯†é’¥ï¼ˆåŠå…¬ç”µè„‘ã€å®¶é‡Œç”µè„‘ï¼‰ï¼Œéƒ½èƒ½çŸ¥é“æ˜¯åŒä¸€ä¸ªäºº</li>
<li><strong>å®¡è®¡è¿½è¸ª</strong>ï¼šåŸå ¡æ—¥å¿—ä¼šè®°å½•â€œ<a href="https://link.juejin.cn?target=mailto%3Axiaoming%40company.com" target="_blank" title="mailto:xiaoming@company.com" ref="nofollow noopener noreferrer">xiaoming@company.com</a>Â åœ¨ 14:30 æäº¤äº†ä»£ç â€</li>
</ol>
<h3 data-id="heading-6">ğŸ­ ç”ŸåŠ¨çš„åœºæ™¯å¯¹æ¯”</h3>
<p><strong>æ²¡æœ‰é‚®ç®±çš„æƒ…å†µï¼š</strong></p>
<pre><code class="hljs language-text" lang="text">ä¾å«ï¼šå¢™ä¸Šæœ‰ä¸ªæ²¡åå­—çš„é”èŠ¯è½¬åŠ¨äº†ï¼
ä¾å«ï¼šå‘ƒ...ä½ æ˜¯è°ï¼Ÿæˆ‘è¯¥å«ä½ â€œç”¨æˆ·Aâ€è¿˜æ˜¯â€œè®¿å®¢Bâ€ï¼Ÿ
åŸå ¡æ—¥å¿—ï¼šæ— åäººæ°è®¿é—®äº†ä»“åº“ â†’ å‡ºé—®é¢˜æ²¡æ³•è¿½è¸ª
</code></pre>
<p><strong>æœ‰é‚®ç®±çš„æƒ…å†µï¼š</strong></p>
<pre><code class="hljs language-text" lang="text">ä¾å«ï¼šçœ‹åˆ° xiaoming@company.com çš„é”èŠ¯åœ¨è½¬åŠ¨ï¼
ä¾å«ï¼šæ¬¢è¿å›æ¥ï¼Œå°æ˜ï¼ä½ çš„å·¥ä½åœ¨äºŒæ¥¼ï¼Œæƒé™æ˜¯å¼€å‘è€…
åŸå ¡æ—¥å¿—ï¼šå°æ˜æäº¤äº†ç™»å½•åŠŸèƒ½ â†’ æ¸…æ™°å¯è¿½æº¯
</code></pre>
<h3 data-id="heading-7">ğŸ”„ SSHæ¡æ‰‹æ—¶åºå›¾ï¼šå®Œæ•´çš„é­”æ³•ä»ªå¼</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7a421181df4446e5be6b1e74192e048a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQW5kcm9pZOerpeivnemVhw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771293310&amp;x-signature=WINUxWekqGV3f5gkfg%2BWWeOu15Y%3D" alt="SSHæ¡æ‰‹æ—¶åºå›¾ï¼šå®Œæ•´çš„é­”æ³•ä»ªå¼.png" loading="lazy"/></p>
<h3 data-id="heading-8">ğŸ’» ä»£ç è¯¦è§£ï¼šæ¡æ‰‹è¿‡ç¨‹çš„èƒŒå</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># ç®€åŒ–ç‰ˆçš„SSHè®¤è¯é€»è¾‘ï¼ˆæ¦‚å¿µä»£ç ï¼‰</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">SSHServer</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">authenticate</span>(<span class="hljs-params">self, client_public_key, signature</span>):
        <span class="hljs-comment"># 1. åœ¨authorized_keysä¸­æŸ¥æ‰¾å…¬é’¥</span>
        user_info = self.authorized_keys.get(client_public_key)
        
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> user_info:
            <span class="hljs-keyword">return</span> <span class="hljs-string">"è®¤è¯å¤±è´¥ï¼šæœªçŸ¥çš„å…¬é’¥"</span>
        
        <span class="hljs-comment"># 2. æå–é‚®ç®±æ ‡è¯†ï¼ˆç”¨äºæ—¥å¿—å’Œæƒé™ï¼‰</span>
        email = user_info.email  <span class="hljs-comment"># è¿™å°±æ˜¯-Cå‚æ•°è®¾ç½®çš„é‚®ç®±ï¼</span>
        username = email.split(<span class="hljs-string">'@'</span>)[<span class="hljs-number">0</span>]
        
        <span class="hljs-comment"># 3. éªŒè¯ç­¾å</span>
        challenge = self.generate_challenge()
        <span class="hljs-keyword">if</span> self.verify_signature(client_public_key, signature, challenge):
            <span class="hljs-comment"># 4. æ ¹æ®é‚®ç®±åˆ†é…æƒé™</span>
            permissions = self.get_permissions_by_email(email)
            self.log_access(email, <span class="hljs-string">"è®¤è¯æˆåŠŸ"</span>)
            <span class="hljs-keyword">return</span> <span class="hljs-string">f"æ¬¢è¿ <span class="hljs-subst">{username}</span>ï¼æƒé™ï¼š<span class="hljs-subst">{permissions}</span>"</span>
        <span class="hljs-keyword">else</span>:
            self.log_access(email, <span class="hljs-string">"è®¤è¯å¤±è´¥"</span>)
            <span class="hljs-keyword">return</span> <span class="hljs-string">"ç­¾åéªŒè¯å¤±è´¥"</span>

<span class="hljs-comment"># GitLabçš„å®é™…ä½¿ç”¨åœºæ™¯</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">GitLabSSH</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">handle_git_push</span>(<span class="hljs-params">self, ssh_key</span>):
        <span class="hljs-comment"># é€šè¿‡é‚®ç®±æ‰¾åˆ°å¯¹åº”çš„GitLabç”¨æˆ·</span>
        user = User.find_by_ssh_key_email(ssh_key.email)
        
        <span class="hljs-comment"># è®°å½•è°åœ¨æ“ä½œ</span>
        AuditLog.create(
            user: user,
            action: <span class="hljs-string">'git_push'</span>,
            project: <span class="hljs-string">'android-framework'</span>
        )
        
        <span class="hljs-comment"># æ‰§è¡Œgitæ“ä½œ</span>
        <span class="hljs-keyword">return</span> self.git.receive_pack(user)
</code></pre>
<h3 data-id="heading-9">ğŸ¯ Gerritçš„ç‰¹æ®Šæƒ…å†µï¼šé‚®ç®±å³ç”¨æˆ·å</h3>
<p>åœ¨Gerritä¸­ï¼Œé‚®ç®±æ›´åŠ é‡è¦ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># Gerrité…ç½®ç¤ºä¾‹</span>
[gerrit]
    <span class="hljs-comment"># é‚®ç®±ç›´æ¥ä½œä¸ºç”¨æˆ·æ ‡è¯†</span>
    userName = xiaoming
    userEmail = xiaoming@company.com

<span class="hljs-comment"># SSHè¿æ¥Gerritæ—¶</span>
ssh -p 29418 xiaoming@gerrit.company.com
<span class="hljs-comment"># Gerritä¼šæŸ¥æ‰¾ï¼šå“ªä¸ªå…¬é’¥å±äº xiaoming@company.comï¼Ÿ</span>
</code></pre>
<h3 data-id="heading-10">ğŸš€ å®é™…å·¥ä½œä¸­çš„æœ€ä½³å®è·µ</h3>
<h4 data-id="heading-11">æƒ…å†µ1ï¼šä¸ªäººå¼€å‘</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ä¸€ä¸ªé‚®ç®±ï¼Œå¤šä¸ªè®¾å¤‡</span>
ssh-keygen -C <span class="hljs-string">"ming@company.com"</span> -f ~/.ssh/id_ed25519_work_mac
ssh-keygen -C <span class="hljs-string">"ming@company.com"</span> -f ~/.ssh/id_ed25519_work_pc
<span class="hljs-comment"># è™½ç„¶å¯†é’¥ä¸åŒï¼Œä½†é‚®ç®±ç›¸åŒï¼ŒæœåŠ¡å™¨çŸ¥é“æ˜¯åŒä¸€äºº</span>
</code></pre>
<h4 data-id="heading-12">æƒ…å†µ2ï¼šå¤šè§’è‰²åœºæ™¯</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å°æ˜åœ¨å…¬å¸æœ‰ä¸¤ä¸ªè§’è‰²</span>
ssh-keygen -C <span class="hljs-string">"xiaoming-dev@company.com"</span>   <span class="hljs-comment"># å¼€å‘æƒé™</span>
ssh-keygen -C <span class="hljs-string">"xiaoming-admin@company.com"</span> <span class="hljs-comment"># ç®¡ç†å‘˜æƒé™</span>
<span class="hljs-comment"># æœåŠ¡å™¨æ ¹æ®é‚®ç®±ç»™äºˆä¸åŒæƒé™</span>
</code></pre>
<h4 data-id="heading-13">æƒ…å†µ3ï¼šCI/CDæœºå™¨äºº</h4>
<pre><code class="hljs language-bash" lang="bash">ssh-keygen -C <span class="hljs-string">"android-ci-bot@company.com"</span>
<span class="hljs-comment"># æ—¥å¿—ä¸­æ¸…æ¥šçœ‹åˆ°æ˜¯æœºå™¨äººåœ¨æ“ä½œï¼Œä¸æ˜¯çœŸäºº</span>
</code></pre>
<h3 data-id="heading-14">ğŸ”§ æ’é”™æŒ‡å—ï¼šå½“é­”æ³•å¤±çµæ—¶</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1. æ£€æŸ¥é’¥åŒ™æƒé™ï¼ˆç§é’¥å¤ªå…¬å¼€å°±ä¸å®‰å…¨ï¼ï¼‰</span>
<span class="hljs-built_in">chmod</span> 600 ~/.ssh/id_ed25519

<span class="hljs-comment"># 2. æŸ¥çœ‹åŸå ¡çš„é’¥åŒ™å¢™</span>
<span class="hljs-built_in">cat</span> ~/.ssh/authorized_keys
<span class="hljs-comment"># ç¡®ä¿å…¬é’¥å®Œæ•´å¤åˆ¶ï¼Œé‚®ç®±åœ¨æœ«å°¾</span>

<span class="hljs-comment"># 3. æµ‹è¯•è¿æ¥å¹¶æŸ¥çœ‹è¯¦ç»†è¿‡ç¨‹</span>
ssh -Tv git@gitlab.com
<span class="hljs-comment"># ä¼šçœ‹åˆ°ç±»ä¼¼è¾“å‡ºï¼š</span>
<span class="hljs-comment"># debug1: identity file /home/xiaoming/.ssh/id_ed25519</span>
<span class="hljs-comment"># debug1: Authentications that can continue: publickey</span>
<span class="hljs-comment"># debug1: Offering public key: /home/xiaoming/.ssh/id_ed25519 ED25519 SHA256:... xiaoming@company.com</span>
</code></pre>
<h3 data-id="heading-15">ğŸ“Š æ€»ç»“ï¼šé‚®ç®±çš„é‡è¦æ€§è¡¨æ ¼</h3>



































<table><thead><tr><th>åœºæ™¯</th><th>æ²¡æœ‰é‚®ç®±</th><th>æœ‰é‚®ç®±</th></tr></thead><tbody><tr><td><strong>èº«ä»½è¯†åˆ«</strong></td><td>â€œæŸä¸ªåŒ¿åç”¨æˆ·â€</td><td>â€œå°æ˜@å…¬å¸â€</td></tr><tr><td><strong>æƒé™ç®¡ç†</strong></td><td>éš¾ä»¥ç²¾ç»†æ§åˆ¶</td><td>æŒ‰é‚®ç®±åˆ†é…è¯»å†™æƒé™</td></tr><tr><td><strong>å®¡è®¡æ—¥å¿—</strong></td><td>æ— æ³•è¿½æº¯æ“ä½œè€…</td><td>å®Œæ•´æ“ä½œè®°å½•</td></tr><tr><td><strong>å¤šå¯†é’¥ç®¡ç†</strong></td><td>æ··ä¹±ï¼Œä¸çŸ¥é“å“ªä¸ªè®¾å¤‡</td><td>æ¸…æ™°ï¼ŒçŸ¥é“æ˜¯å°æ˜çš„åŠå…¬ç”µè„‘</td></tr><tr><td><strong>å›¢é˜Ÿåä½œ</strong></td><td>å†²çªï¼šä¸¤ä¸ªäººéƒ½å«â€œandroid-devâ€</td><td>æ˜ç¡®ï¼šå°æ˜ã€å°çº¢ã€CIæœºå™¨äºº</td></tr></tbody></table>
<h3 data-id="heading-16">ğŸ ä¸€é”®é…ç½®è„šæœ¬</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>
<span class="hljs-comment"># setup_ssh_for_git.sh</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"ğŸ¯ å¼€å§‹é…ç½®SSHå¯†é’¥..."</span>
<span class="hljs-built_in">read</span> -p <span class="hljs-string">"è¯·è¾“å…¥ä½ çš„é‚®ç®±: "</span> user_email

<span class="hljs-comment"># 1. ç”Ÿæˆå¯†é’¥</span>
ssh-keygen -t ed25519 -C <span class="hljs-string">"<span class="hljs-variable">$user_email</span>"</span> -f ~/.ssh/id_ed25519_<span class="hljs-variable">$USER</span>

<span class="hljs-comment"># 2. å¯åŠ¨ssh-agent</span>
<span class="hljs-built_in">eval</span> <span class="hljs-string">"<span class="hljs-subst">$(ssh-agent -s)</span>"</span>

<span class="hljs-comment"># 3. æ·»åŠ ç§é’¥</span>
ssh-add ~/.ssh/id_ed25519_<span class="hljs-variable">$USER</span>

<span class="hljs-comment"># 4. æ˜¾ç¤ºå…¬é’¥</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"ğŸ‰ ä½ çš„å…¬é’¥å·²ç”Ÿæˆï¼è¯·å¤åˆ¶åˆ°GitLab/Gerritï¼š"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"========================================"</span>
<span class="hljs-built_in">cat</span> ~/.ssh/id_ed25519_<span class="hljs-variable">$USER</span>.pub
<span class="hljs-built_in">echo</span> <span class="hljs-string">"========================================"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"ğŸ”‘ å¯†é’¥ä½ç½®ï¼š~/.ssh/id_ed25519_<span class="hljs-variable">$USER</span>"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"ğŸ“§ å¯†é’¥æ ‡è¯†ï¼š<span class="hljs-variable">$user_email</span>"</span>
</code></pre>
<h3 data-id="heading-17">ğŸŒŸ æ ¸å¿ƒè¦ç‚¹å›é¡¾</h3>
<ol>
<li><strong>å…¬é’¥æ˜¯é”èŠ¯ï¼Œç§é’¥æ˜¯çœŸé’¥åŒ™</strong>ï¼šå…¬é’¥å¯å…¬å¼€ï¼Œç§é’¥ç»å¯†</li>
<li><strong>é‚®ç®±æ˜¯èº«ä»½è¯</strong>ï¼šå‘Šè¯‰æœåŠ¡å™¨â€œæˆ‘æ˜¯è°â€</li>
<li><strong>è®¤è¯è¿‡ç¨‹</strong>ï¼šæŒ‘æˆ˜-å“åº”ï¼Œè¯æ˜ä½ æœ‰ç§é’¥</li>
<li><strong>å®é™…ä»·å€¼</strong>ï¼šæ— éœ€å¯†ç ã€å®‰å…¨å¯é ã€æ˜“äºç®¡ç†</li>
</ol>
<p>å°±åƒå¤ä»£å°†å†›çš„è™ç¬¦ï¼Œä¸€åŠåœ¨å›ç‹ï¼ˆæœåŠ¡å™¨ï¼‰ï¼Œä¸€åŠåœ¨å°†å†›ï¼ˆå®¢æˆ·ç«¯ï¼‰ï¼Œä¸¤åŠåˆä¸€å¯¹å¾—ä¸Šï¼Œå†åŠ åˆ»ç€å°†å†›çš„åå­—ï¼ˆé‚®ç®±ï¼‰ï¼Œæ‰èƒ½è°ƒå…µé£å°†ï¼ˆæ“ä½œä»£ç åº“ï¼‰ã€‚</p>
<p>ç°åœ¨å½“ä½ åœ¨GitLabä¸Šçœ‹åˆ°Â <code>xiaoming@company.com pushed to main</code>ï¼Œå°±çŸ¥é“è¿™ä¸ä»…ä»…æ˜¯æŠ€æœ¯å®ç°ï¼Œæ›´æ˜¯æ¸…æ™°çš„åä½œæ ‡è¯†ï¼ğŸš€</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ğŸš€ Vercel AI SDK ä½¿ç”¨æŒ‡å—ï¼šå·¥å…·è°ƒç”¨ Tools]]></title>    <link>https://juejin.cn/post/7604671453453271055</link>    <guid>https://juejin.cn/post/7604671453453271055</guid>    <pubDate>2026-02-10T00:28:51.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604671453453271055" data-draft-id="7604522883487072290" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ğŸš€ Vercel AI SDK ä½¿ç”¨æŒ‡å—ï¼šå·¥å…·è°ƒç”¨ Tools"/> <meta itemprop="keywords" content="TypeScript"/> <meta itemprop="datePublished" content="2026-02-10T00:28:51.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ZaneAI"/> <meta itemprop="url" content="https://juejin.cn/user/186266444380203"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ğŸš€ Vercel AI SDK ä½¿ç”¨æŒ‡å—ï¼šå·¥å…·è°ƒç”¨ Tools
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/186266444380203/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ZaneAI
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-10T00:28:51.000Z" title="Tue Feb 10 2026 00:28:51 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    7
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ğŸ¤” ä»€ä¹ˆæ˜¯ Toolsï¼Ÿä¸ºä»€ä¹ˆéœ€è¦å®ƒï¼Ÿ</h2>
<p>å¤§æ¨¡å‹æœ¬èº«æ˜¯é™æ€çš„ï¼Œå®ƒçš„çŸ¥è¯†æˆªæ­¢äºè®­ç»ƒæ•°æ®çš„æ—¶é—´ç‚¹ï¼Œå¹¶ä¸”æ— æ³•ç›´æ¥ä¸å¤–éƒ¨ä¸–ç•Œäº¤äº’ã€‚ <strong>Toolsï¼ˆå·¥å…·ï¼‰</strong> å°±æ˜¯å¤§æ¨¡å‹çš„â€œåŒæ‰‹â€å’Œâ€œçœ¼ç›â€ã€‚</p>
<p>ç®€å•æ¥è¯´ï¼ŒTool æ˜¯ä¸€ä¸ª<strong>å¯ä»¥è¢«æ¨¡å‹è°ƒç”¨çš„å‡½æ•°</strong>ã€‚ å½“ä½ åœ¨ AI SDK ä¸­å®šä¹‰ä¸€ä¸ª Tool æ—¶ï¼Œä½ å®é™…ä¸Šæ˜¯å‘Šè¯‰æ¨¡å‹ï¼šâ€œå˜¿ï¼Œå¦‚æœä½ é‡åˆ°è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥è°ƒç”¨è¿™ä¸ªå‡½æ•°ï¼Œæˆ‘ä¼šç»™ä½ è¿”å›ç»“æœã€‚â€</p>
<p>ä¸€ä¸ªæ ‡å‡†çš„ Tool åŒ…å«ä¸‰ä¸ªæ ¸å¿ƒè¦ç´ ï¼š</p>
<ol>
<li><strong>description (æè¿°)</strong> ï¼šå‘Šè¯‰æ¨¡å‹è¿™ä¸ªå·¥å…·æ˜¯å¹²å˜›çš„ï¼ˆè¿™å…¶å®ä¹Ÿæ˜¯ Prompt çš„ä¸€éƒ¨åˆ†ï¼‰ã€‚</li>
<li><strong>inputSchema (è¾“å…¥å®šä¹‰)</strong> ï¼šå®šä¹‰æ¨¡å‹éœ€è¦æä¾›ä»€ä¹ˆå‚æ•°ï¼ˆé€šå¸¸ä½¿ç”¨ Zod å®šä¹‰ï¼‰ã€‚</li>
<li><strong>execute (æ‰§è¡Œé€»è¾‘)</strong> ï¼šå½“æ¨¡å‹å†³å®šè°ƒç”¨å·¥å…·æ—¶ï¼Œå®é™…è¿è¡Œçš„å¼‚æ­¥å‡½æ•°ã€‚</li>
</ol>
<hr/>
<h2 data-id="heading-1">ğŸ› ï¸ å®æˆ˜ï¼šå®šä¹‰ä½ çš„ç¬¬ä¸€ä¸ªè‡ªå®šä¹‰å·¥å…· (Custom Tool)</h2>
<p>AI SDK æä¾›äº†ä¸€ä¸ªæå…¶ä¼˜é›…çš„ <code>tool</code> è¾…åŠ©å‡½æ•°ã€‚æˆ‘ä»¬ä»¥ä¸€ä¸ªç»å…¸çš„â€œè·å–å¤©æ°”â€ä¸ºä¾‹ã€‚</p>
<h3 data-id="heading-2">1. å®‰è£…ä¾èµ–</h3>
<p>é¦–å…ˆç¡®ä¿ä½ å®‰è£…äº†å¿…è¦çš„åº“ï¼š</p>
<p>Bash</p>
<pre><code class="hljs">npm install ai zod
</code></pre>
<h3 data-id="heading-3">2. ç¼–å†™å·¥å…·ä»£ç </h3>
<p>TypeScript</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { tool } <span class="hljs-keyword">from</span> <span class="hljs-string">'ai'</span>;
<span class="hljs-keyword">import</span> { z } <span class="hljs-keyword">from</span> <span class="hljs-string">'zod'</span>;

<span class="hljs-comment">// å®šä¹‰ä¸€ä¸ªåä¸º weatherTool çš„å·¥å…·</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> weatherTool = <span class="hljs-title function_">tool</span>({
  <span class="hljs-comment">// 1. æè¿°ï¼šéå¸¸é‡è¦ï¼Œæ¨¡å‹æ ¹æ®å®ƒå†³å®šæ˜¯å¦è°ƒç”¨</span>
  <span class="hljs-attr">description</span>: <span class="hljs-string">'è·å–æŒ‡å®šåœ°ç‚¹çš„å®æ—¶å¤©æ°”ä¿¡æ¯'</span>,
  
  <span class="hljs-comment">// 2. å‚æ•°ç»“æ„ï¼šä½¿ç”¨ Zod å®šä¹‰ï¼Œæ¨¡å‹ä¼šä¸¥æ ¼éµå®ˆè¿™ä¸ªç»“æ„ç”Ÿæˆå‚æ•°</span>
  <span class="hljs-attr">inputSchema</span>: z.<span class="hljs-title function_">object</span>({
    <span class="hljs-attr">location</span>: z.<span class="hljs-title function_">string</span>().<span class="hljs-title function_">describe</span>(<span class="hljs-string">'éœ€è¦æŸ¥è¯¢å¤©æ°”çš„åŸå¸‚æˆ–åœ°ç‚¹ï¼Œä¾‹å¦‚ï¼šLondon, Beijing'</span>),
    <span class="hljs-attr">unit</span>: z.<span class="hljs-title function_">enum</span>([<span class="hljs-string">'celsius'</span>, <span class="hljs-string">'fahrenheit'</span>]).<span class="hljs-title function_">optional</span>().<span class="hljs-title function_">default</span>(<span class="hljs-string">'celsius'</span>).<span class="hljs-title function_">describe</span>(<span class="hljs-string">'æ¸©åº¦å•ä½'</span>),
  }),
  
  <span class="hljs-comment">// 3. æ‰§è¡Œé€»è¾‘ï¼šæ¨¡å‹è°ƒç”¨æ—¶è‡ªåŠ¨è¿è¡Œ</span>
  <span class="hljs-attr">execute</span>: <span class="hljs-keyword">async</span> ({ location, unit }) =&gt; {
    <span class="hljs-comment">// åœ¨çœŸå®åœºæ™¯ä¸­ï¼Œè¿™é‡Œä¼šè°ƒç”¨ç¬¬ä¸‰æ–¹å¤©æ°” API</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`æ­£åœ¨æŸ¥è¯¢ <span class="hljs-subst">${location}</span> çš„å¤©æ°”...`</span>);
    
    <span class="hljs-comment">// æ¨¡æ‹Ÿè¿”å›æ•°æ®</span>
    <span class="hljs-keyword">const</span> temp = <span class="hljs-number">25</span>; 
    <span class="hljs-keyword">return</span> {
      location,
      <span class="hljs-attr">temperature</span>: temp,
      unit,
      <span class="hljs-attr">condition</span>: <span class="hljs-string">'Sunny'</span>,
      <span class="hljs-attr">note</span>: <span class="hljs-string">'è¿™æ˜¯ä¸€ä¸ªæ¨¡æ‹Ÿæ•°æ®'</span>,
    };
  },
});
</code></pre>
<blockquote>
<p><strong>ğŸ’¡ æç¤º</strong>ï¼š<code>inputSchema</code> ä¸­çš„ <code>.describe()</code> éå¸¸å…³é”®ï¼Œå®ƒä¼šè¢«è½¬æ¢æˆ JSON Schema å–‚ç»™å¤§æ¨¡å‹ï¼Œå¸®åŠ©æ¨¡å‹ç†è§£å‚æ•°çš„å«ä¹‰ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-4">ğŸ”— è¿æ¥æ¨¡å‹ï¼šè®© AI ä½¿ç”¨å·¥å…·</h2>
<p>å®šä¹‰å¥½å·¥å…·åï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡ <code>generateText</code> æˆ– <code>streamText</code> å°†å…¶ç»‘å®šåˆ°æ¨¡å‹ä¸Šã€‚</p>
<p>è¿™é‡Œå‡è®¾ä½ å·²ç»é…ç½®å¥½äº† OpenAI æˆ–å…¶ä»– Providerã€‚</p>
<p>TypeScript</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { generateText } <span class="hljs-keyword">from</span> <span class="hljs-string">'ai'</span>;
<span class="hljs-keyword">import</span> { openai } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ai-sdk/openai'</span>; <span class="hljs-comment">// æˆ–å…¶ä»– provider</span>
<span class="hljs-keyword">import</span> { weatherTool } <span class="hljs-keyword">from</span> <span class="hljs-string">'./tools'</span>; <span class="hljs-comment">// å¼•å…¥ä¸Šé¢å®šä¹‰çš„å·¥å…·</span>

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">askAI</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> { text, toolResults } = <span class="hljs-keyword">await</span> <span class="hljs-title function_">generateText</span>({
    <span class="hljs-attr">model</span>: <span class="hljs-title function_">openai</span>(<span class="hljs-string">'gpt-4o'</span>), <span class="hljs-comment">// ç¡®ä¿æ¨¡å‹æ”¯æŒ Function Calling</span>
    
    <span class="hljs-comment">// å°†å·¥å…·æ³¨å†Œåˆ° tools å¯¹è±¡ä¸­</span>
    <span class="hljs-attr">tools</span>: {
      <span class="hljs-attr">weather</span>: weatherTool, 
    },
    
    <span class="hljs-comment">// å¼€å¯å¤šæ­¥äº¤äº’ï¼ˆå…³é”®ï¼ï¼‰</span>
    <span class="hljs-comment">// å¦‚æœä¸è®¾ç½® maxStepsï¼Œæ¨¡å‹åªä¼šç”Ÿæˆå·¥å…·è°ƒç”¨å‚æ•°ï¼Œè€Œä¸ä¼šæ‰§è¡Œå¹¶åˆ©ç”¨ç»“æœç”Ÿæˆæœ€ç»ˆå›å¤</span>
    <span class="hljs-attr">maxSteps</span>: <span class="hljs-number">5</span>, 
    
    <span class="hljs-attr">prompt</span>: <span class="hljs-string">'ä¸Šæµ·ç°åœ¨çš„å¤©æ°”æ€ä¹ˆæ ·ï¼Ÿé€‚åˆç©¿ä»€ä¹ˆè¡£æœï¼Ÿ'</span>,
  });

  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'AI å›å¤:'</span>, text);
}

<span class="hljs-title function_">askAI</span>();
</code></pre>
<h3 data-id="heading-5">å¹•åå‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿï¼ˆRoundtrip åŸç†ï¼‰</h3>
<p>å½“ä½ è®¾ç½® <code>maxSteps: 5</code> æ—¶ï¼ŒAI SDK è‡ªåŠ¨å¤„ç†äº†ä¸€ä¸ªå¤æ‚çš„å¾ªç¯ï¼š</p>
<ol>
<li><strong>ç”¨æˆ·æé—®</strong>ï¼šâ€œä¸Šæµ·å¤©æ°”å¦‚ä½•ï¼Ÿâ€</li>
<li><strong>æ¨¡å‹æ€è€ƒ</strong>ï¼šå‘ç°éœ€è¦å¤©æ°”ä¿¡æ¯ï¼Œå†³å®šè°ƒç”¨ <code>weather</code> å·¥å…·ï¼Œç”Ÿæˆå‚æ•° <code>{ location: "Shanghai", unit: "celsius" }</code>ã€‚</li>
<li><strong>AI SDK ä»‹å…¥</strong>ï¼šæ£€æµ‹åˆ°æ¨¡å‹æƒ³è°ƒç”¨å·¥å…·ï¼Œè‡ªåŠ¨è¿è¡Œ <code>weatherTool.execute</code> å‡½æ•°ã€‚</li>
<li><strong>è·å–ç»“æœ</strong>ï¼šå‡½æ•°è¿”å› <code>{ temperature: 25, condition: 'Sunny' }</code>ã€‚</li>
<li><strong>å›ä¼ æ¨¡å‹</strong>ï¼šAI SDK å°†å·¥å…·çš„è¿è¡Œç»“æœä½œä¸ºä¸€ç§ç‰¹æ®Šçš„â€œæ¶ˆæ¯â€å‘å›ç»™æ¨¡å‹ã€‚</li>
<li><strong>æœ€ç»ˆç”Ÿæˆ</strong>ï¼šæ¨¡å‹ç»“åˆæŸ¥è¯¢åˆ°çš„å¤©æ°”æ•°æ®ï¼Œç”Ÿæˆæœ€ç»ˆå›ç­”ï¼šâ€œä¸Šæµ·ç°åœ¨ 25 åº¦ï¼Œæ™´å¤©ï¼Œéå¸¸èˆ’é€‚ï¼Œå»ºè®®ç©¿Tæ¤...â€</li>
</ol>
<hr/>
<h2 data-id="heading-6">ğŸ§© è¿›é˜¶ï¼šä¸‰ç§å·¥å…·ç±»å‹çš„åŒºåˆ«</h2>
<p>AI SDK æ–‡æ¡£ä¸­æåˆ°äº†ä¸‰ç§å·¥å…·ç±»å‹ï¼Œç†è§£å®ƒä»¬çš„åŒºåˆ«å¯¹äºé«˜çº§å¼€å‘å¾ˆé‡è¦ï¼š</p>
<h3 data-id="heading-7">1. Custom Tools (è‡ªå®šä¹‰å·¥å…·) - <strong>æœ€å¸¸ç”¨</strong></h3>
<ul>
<li><strong>ç‰¹ç‚¹</strong>ï¼šä½ å®Œå…¨æ§åˆ¶ã€‚ä½ éœ€è¦ç¼–å†™ <code>inputSchema</code> å’Œ <code>execute</code> å‡½æ•°ã€‚</li>
<li><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šæŸ¥æ•°æ®åº“ã€è°ƒå†…éƒ¨ APIã€æ‰§è¡Œä¸šåŠ¡é€»è¾‘ã€‚</li>
<li><strong>ä»£ç </strong>ï¼šå³ä¸Šé¢æ¼”ç¤ºçš„ <code>tool({...})</code>ã€‚</li>
</ul>
<h3 data-id="heading-8">2. Provider-Defined Tools (æä¾›å•†å®šä¹‰å·¥å…·)</h3>
<ul>
<li><strong>ç‰¹ç‚¹</strong>ï¼šæä¾›å•†ï¼ˆå¦‚ Anthropicï¼‰å®šä¹‰å¥½äº† schemaï¼Œ<strong>ä½†ä»£ç åœ¨ä½ æœ¬åœ°è¿è¡Œ</strong>ã€‚</li>
<li><strong>ä¾‹å­</strong>ï¼šAnthropic çš„ <code>bash</code> æˆ– <code>text_editor</code> å·¥å…·ã€‚æ¨¡å‹ç»è¿‡ä¸“é—¨è®­ç»ƒï¼Œèƒ½æ›´ç²¾å‡†åœ°ä½¿ç”¨è¿™äº›ç‰¹å®šå·¥å…·ã€‚</li>
<li><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šå½“ä½ æƒ³åˆ©ç”¨ç‰¹å®šæ¨¡å‹å¯¹ç‰¹å®šå·¥å…·çš„å¼ºé¡¹æ—¶ï¼ˆä¾‹å¦‚è®© Claude å¸®ä½ å†™ä»£ç å¹¶å­˜æ–‡ä»¶ï¼‰ã€‚</li>
</ul>
<p>TypeScript</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä¼ªä»£ç ç¤ºä¾‹</span>
<span class="hljs-keyword">import</span> { anthropic } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ai-sdk/anthropic'</span>;
<span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> <span class="hljs-title function_">generateText</span>({
  <span class="hljs-attr">model</span>: <span class="hljs-title function_">anthropic</span>(<span class="hljs-string">'claude-3-5-sonnet-20240620'</span>),
  <span class="hljs-attr">tools</span>: {
    <span class="hljs-comment">// å¼•ç”¨ Anthropic å®šä¹‰å¥½çš„ bash å·¥å…·ç»“æ„</span>
    <span class="hljs-attr">bash</span>: anthropic.<span class="hljs-property">tools</span>.<span class="hljs-title function_">bash_20250124</span>({
      <span class="hljs-comment">// ä½ ä»ç„¶éœ€è¦æä¾›æ‰§è¡Œé€»è¾‘ï¼ˆå› ä¸ºè¿™æ˜¯åœ¨ä½ æœåŠ¡å™¨ä¸Šè·‘çš„ï¼‰</span>
      <span class="hljs-attr">execute</span>: <span class="hljs-keyword">async</span> ({ command }) =&gt; <span class="hljs-keyword">await</span> <span class="hljs-title function_">myRunCommand</span>(command), 
    }),
  },
  <span class="hljs-attr">prompt</span>: <span class="hljs-string">"åˆ—å‡ºå½“å‰ç›®å½•ä¸‹çš„æ–‡ä»¶"</span>,
});
</code></pre>
<h3 data-id="heading-9">3. Provider-Executed Tools (æä¾›å•†æ‰§è¡Œå·¥å…·)</h3>
<ul>
<li><strong>ç‰¹ç‚¹</strong>ï¼š<strong>å®Œå…¨åœ¨äº‘ç«¯è¿è¡Œ</strong>ã€‚Schema å’Œ æ‰§è¡Œé€»è¾‘éƒ½ç”±æä¾›å•†æå®šã€‚</li>
<li><strong>ä¾‹å­</strong>ï¼šOpenAI çš„ <code>web_search</code> (è”ç½‘æœç´¢) æˆ– Code Interpreterã€‚</li>
<li><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šä¸æƒ³è‡ªå·±æŠ˜è…¾åŸºç¡€è®¾æ–½ï¼Œç›´æ¥ç”¨ç°æˆçš„å¼ºåŠ›åŠŸèƒ½ã€‚</li>
</ul>
<p>TypeScript</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-comment">// ä¼ªä»£ç ç¤ºä¾‹</span>
import { openai } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ai-sdk/openai'</span>;
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">result</span> = await <span class="hljs-title function_ invoke__">generateText</span>({
  <span class="hljs-attr">model</span>: <span class="hljs-title function_ invoke__">openai</span>(<span class="hljs-string">'gpt-4-turbo'</span>),
  <span class="hljs-attr">tools</span>: {
    // ç›´æ¥å¯ç”¨ OpenAI çš„è”ç½‘æœç´¢ï¼Œä½ ä¸éœ€è¦å†™ä»»ä½•ä»£ç 
    <span class="hljs-attr">web_search</span>: openai.tools.<span class="hljs-title function_ invoke__">webSearch</span>(),
  },
  <span class="hljs-attr">prompt</span>: <span class="hljs-string">"ä»Šå¤©çš„ç§‘æŠ€æ–°é—»å¤´æ¡æ˜¯ä»€ä¹ˆï¼Ÿ"</span>,
});
</code></pre>
<hr/>
<h2 data-id="heading-10">ğŸ“¦ å·¥å…·ç”Ÿæ€ï¼šä¸è¦é‡å¤é€ è½®å­</h2>
<p>AI SDK çš„ä¸€å¤§ä¼˜åŠ¿æ˜¯å·¥å…·å¯ä»¥è¢«æ‰“åŒ…æˆ npm åŒ…å…±äº«ã€‚ä½ å¯ä»¥ç›´æ¥ä½¿ç”¨ç¤¾åŒºç°æˆçš„å·¥å…·åº“ï¼š</p>
<ul>
<li><strong>è”ç½‘æœç´¢</strong>ï¼š<code>@tavily/ai-sdk</code>, <code>@exalabs/ai-sdk</code> (Exa.ai)</li>
<li><strong>æµè§ˆå™¨æ“ä½œ</strong>ï¼š<code>@browserbasehq/ai-sdk</code></li>
<li><strong>ä¼ä¸šé›†æˆ</strong>ï¼š<code>@composio/ai-sdk</code> (è¿æ¥ GitHub, Salesforce ç­‰)</li>
</ul>
<p><strong>ä½¿ç”¨ç¤ºä¾‹ (ä»¥ Tavily æœç´¢ä¸ºä¾‹)ï¼š</strong></p>
<p>TypeScript</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { tavily } <span class="hljs-keyword">from</span> <span class="hljs-string">'@tavily/core'</span>; <span class="hljs-comment">// å‡è®¾çš„åŒ…ç»“æ„ï¼Œå…·ä½“çœ‹æ–‡æ¡£</span>
<span class="hljs-keyword">import</span> { tool } <span class="hljs-keyword">from</span> <span class="hljs-string">'ai'</span>;

<span class="hljs-comment">// å¾ˆå¤šåº“ç›´æ¥å¯¼å‡ºäº†å…¼å®¹ AI SDK çš„ tool å¯¹è±¡</span>
<span class="hljs-comment">// const searchTool = ... </span>

<span class="hljs-comment">// ç„¶ååœ¨ generateText ä¸­ç›´æ¥ç”¨ï¼š</span>
<span class="hljs-comment">// tools: { webSearch: searchTool }</span>
</code></pre>
<hr/>
<h2 data-id="heading-11">ğŸ’¡ æœ€ä½³å®è·µ Tips</h2>
<ol>
<li><strong>Prompt Engineering åœ¨æè¿°é‡Œ</strong>ï¼š<code>description</code> å­—æ®µæœ¬è´¨ä¸Šå°±æ˜¯ Promptã€‚å¦‚æœæ¨¡å‹ä¸æ„¿æ„è°ƒç”¨å·¥å…·ï¼Œå°è¯•æŠŠæè¿°å†™å¾—æ›´è¯¦ç»†ã€æ›´è¯±äººã€‚</li>
<li><strong>Schema è¶Šç»†è¶Šå¥½</strong>ï¼šåœ¨ Zod ä¸­ä½¿ç”¨ <code>.describe()</code> ä¸ä»…æ˜¯æ–‡æ¡£ï¼Œæ›´æ˜¯ç»™æ¨¡å‹çš„æŒ‡ä»¤ã€‚</li>
<li><strong>é”™è¯¯å¤„ç†</strong>ï¼šåœ¨ <code>execute</code> å‡½æ•°ä¸­å³ä½¿æŠ¥é”™ï¼Œæœ€å¥½ä¹Ÿ <code>try-catch</code> å¹¶è¿”å›ä¸€ä¸ªåŒ…å«é”™è¯¯ä¿¡æ¯çš„å­—ç¬¦ä¸²ï¼Œè€Œä¸æ˜¯ç›´æ¥æŠ›å‡ºå¼‚å¸¸å¯¼è‡´ç¨‹åºå´©æºƒã€‚è¿™æ ·æ¨¡å‹æœ‰æœºä¼šçœ‹åˆ°é”™è¯¯å¹¶å°è¯•è‡ªæˆ‘ä¿®æ­£ï¼ˆä¾‹å¦‚å‚æ•°å¡«é”™äº†ï¼Œæ¨¡å‹çœ‹åˆ°é”™è¯¯æç¤ºåå¯èƒ½ä¼šé‡è¯•ï¼‰ã€‚</li>
<li><strong>æ§åˆ¶æ­¥éª¤</strong>ï¼š<code>maxSteps</code> ä¸è¦è®¾ç½®è¿‡å¤§ï¼Œé˜²æ­¢æ¨¡å‹é™·å…¥æ­»å¾ªç¯ï¼›ä¹Ÿä¸è¦è®¾ç½®è¿‡å°ï¼Œå¤æ‚çš„ä»»åŠ¡å¯èƒ½éœ€è¦å¤šæ¬¡è°ƒç”¨å·¥å…·ã€‚</li>
</ol>
<hr/>
<h2 data-id="heading-12">ç»“è¯­</h2>
<p>Vercel AI SDK çš„ Tools æŠ½è±¡éå¸¸æ¸…æ™°ï¼Œå®ƒæŠ¹å¹³äº†ä¸åŒæ¨¡å‹æä¾›å•†ï¼ˆOpenAI, Anthropic, Google ç­‰ï¼‰åœ¨ Function Calling æ ¼å¼ä¸Šçš„å·®å¼‚ã€‚å­¦ä¼šäº†è¿™ä¸€å¥—ï¼Œä½ å°±å¯ä»¥è½»æ¾åˆ‡æ¢æ¨¡å‹ï¼Œæ„å»ºå‡ºçœŸæ­£å®ç”¨çš„ AI Agentã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä½ å¯èƒ½ä»æœªç”¨è¿‡çš„æµè§ˆå™¨ APIï¼šIndexedDB å®æˆ˜å…¥é—¨]]></title>    <link>https://juejin.cn/post/7604694326518431795</link>    <guid>https://juejin.cn/post/7604694326518431795</guid>    <pubDate>2026-02-10T01:59:23.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604694326518431795" data-draft-id="7604694326518415411" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä½ å¯èƒ½ä»æœªç”¨è¿‡çš„æµè§ˆå™¨ APIï¼šIndexedDB å®æˆ˜å…¥é—¨"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-02-10T01:59:23.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºå‘˜_June"/> <meta itemprop="url" content="https://juejin.cn/user/395479916219517"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä½ å¯èƒ½ä»æœªç”¨è¿‡çš„æµè§ˆå™¨ APIï¼šIndexedDB å®æˆ˜å…¥é—¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/395479916219517/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºå‘˜_June
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-10T01:59:23.000Z" title="Tue Feb 10 2026 01:59:23 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å‰ç«¯å¼€å‘è¿™å‡ å¹´ï¼ŒlocalStorage å’Œ sessionStorage ç”¨å¾—æœ€å¤šï¼Œcookie å¶å°”ä¹Ÿè¦æ‰“æ‰“äº¤é“ã€‚ä½†è¯´åˆ° IndexedDBï¼Œå¾ˆå¤šäººçš„ååº”æ˜¯ï¼šâ€œå¬è¯´è¿‡ï¼Œä½†æ²¡ç”¨è¿‡ã€‚â€</p>
<p>ä»Šå¤©èŠèŠè¿™ä¸ªè¢«ä½ä¼°çš„æµè§ˆå™¨å†…ç½®æ•°æ®åº“ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€ä¸ºä»€ä¹ˆéœ€è¦å¦ä¸€ä¸ªå­˜å‚¨æ–¹æ¡ˆï¼Ÿ</h2>
<p>å…ˆçœ‹ä¸ªå®é™…åœºæ™¯ã€‚æœ‹å‹å…¬å¸åšç”µå•†åå°ï¼Œäº§å“ç»ç†è¦æ±‚ï¼šâ€œèƒ½ä¸èƒ½åœ¨åˆ—è¡¨é¡µç¼“å­˜ 5000 æ¡å•†å“æ•°æ®ï¼Œè®©ç­›é€‰å’Œæœç´¢å¿«ä¸€ç‚¹ï¼Ÿâ€</p>
<p>ç¬¬ä¸€ç‰ˆç”¨ localStorageï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å­˜å‚¨</span>
<span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">'products'</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(products)) <span class="hljs-comment">// 5000æ¡æ•°æ®ï¼Œé¡µé¢å¡äº†2ç§’</span>

<span class="hljs-comment">// æœç´¢</span>
<span class="hljs-keyword">const</span> keyword = <span class="hljs-string">'æ‰‹æœº'</span>
<span class="hljs-keyword">const</span> allProducts = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(<span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">'products'</span>)) <span class="hljs-comment">// åˆå¡1ç§’</span>
<span class="hljs-keyword">const</span> results = allProducts.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">p</span> =&gt;</span> p.<span class="hljs-property">name</span>.<span class="hljs-title function_">includes</span>(keyword)) <span class="hljs-comment">// éå†5000æ¬¡</span>
</code></pre>
<p>ä¸Šçº¿åç”¨æˆ·åé¦ˆï¼šâ€œç­›é€‰æ—¶æµè§ˆå™¨åƒå¡ä½äº†ä¸€æ ·ã€‚â€</p>
<p>é—®é¢˜åœ¨å“ªï¼ŸlocalStorage æœ‰ç¡¬ä¼¤ï¼š</p>
<ul>
<li>åŒæ­¥æ“ä½œï¼Œæ•°æ®é‡å¤§å°±é˜»å¡é¡µé¢</li>
<li>åªèƒ½å­˜å­—ç¬¦ä¸²ï¼Œå¯¹è±¡è¦åºåˆ—åŒ–</li>
<li>å®¹é‡å°ï¼ˆé€šå¸¸ 5-10MBï¼‰</li>
<li>åªèƒ½å…¨é‡è¯»å–ï¼Œæ— æ³•é«˜æ•ˆæŸ¥è¯¢</li>
</ul>
<h2 data-id="heading-1">äºŒã€IndexedDB æ˜¯ä»€ä¹ˆï¼Ÿ</h2>
<p>ç®€å•è¯´ï¼Œ<strong>å®ƒæ˜¯æµè§ˆå™¨é‡Œçš„ NoSQL æ•°æ®åº“</strong>ã€‚2011 å¹´å°±å‡ºç°äº†ï¼Œä½†å¾ˆå¤šäººä¸çŸ¥é“æˆ–è§‰å¾—â€œç”¨ä¸ä¸Šâ€ã€‚</p>
<p>å‡ ä¸ªå…³é”®ç‰¹ç‚¹ï¼š</p>
<ol>
<li><strong>å®¹é‡å¤§</strong>ï¼šé€šå¸¸èƒ½å ç¡¬ç›˜ 50%ï¼Œå‡ ä¸ª GB æ²¡é—®é¢˜</li>
<li><strong>å¼‚æ­¥æ“ä½œ</strong>ï¼šä¸å¡é¡µé¢</li>
<li><strong>æ”¯æŒç´¢å¼•</strong>ï¼šæŸ¥è¯¢é€Ÿåº¦å¿«</li>
<li><strong>èƒ½å­˜å¤šç§ç±»å‹</strong>ï¼šå¯¹è±¡ã€æ–‡ä»¶ã€äºŒè¿›åˆ¶æ•°æ®éƒ½è¡Œ</li>
</ol>
<h2 data-id="heading-2">ä¸‰ã€ä¸€ä¸ªç®€å•ç¤ºä¾‹</h2>
<p>å¦‚æœä½ æ²¡ç”¨è¿‡ï¼Œå…ˆçœ‹çœ‹åŸºæœ¬ç”¨æ³•ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// 1. æ‰“å¼€æ•°æ®åº“</span>
<span class="hljs-keyword">const</span> request = indexedDB.<span class="hljs-title function_">open</span>(<span class="hljs-string">'myDB'</span>, <span class="hljs-number">1</span>)

<span class="hljs-comment">// 2. åˆ›å»ºè¡¨ç»“æ„ï¼ˆç¬¬ä¸€æ¬¡æˆ–å‡çº§æ—¶ï¼‰</span>
request.<span class="hljs-property">onupgradeneeded</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) {
  <span class="hljs-keyword">const</span> db = event.<span class="hljs-property">target</span>.<span class="hljs-property">result</span>
  
  <span class="hljs-comment">// åˆ›å»ºå¯¹è±¡å­˜å‚¨ï¼ˆç±»ä¼¼è¡¨ï¼‰</span>
  <span class="hljs-keyword">const</span> store = db.<span class="hljs-title function_">createObjectStore</span>(<span class="hljs-string">'products'</span>, {
    <span class="hljs-attr">keyPath</span>: <span class="hljs-string">'id'</span>,      <span class="hljs-comment">// ä¸»é”®</span>
    <span class="hljs-attr">autoIncrement</span>: <span class="hljs-literal">true</span> <span class="hljs-comment">// è‡ªåŠ¨ç”ŸæˆID</span>
  })
  
  <span class="hljs-comment">// åˆ›å»ºç´¢å¼•ï¼ˆåŠ é€ŸæŸ¥è¯¢çš„å…³é”®ï¼‰</span>
  store.<span class="hljs-title function_">createIndex</span>(<span class="hljs-string">'name'</span>, <span class="hljs-string">'name'</span>)      <span class="hljs-comment">// æŒ‰åç§°æŸ¥</span>
  store.<span class="hljs-title function_">createIndex</span>(<span class="hljs-string">'price'</span>, <span class="hljs-string">'price'</span>)    <span class="hljs-comment">// æŒ‰ä»·æ ¼æŸ¥</span>
  store.<span class="hljs-title function_">createIndex</span>(<span class="hljs-string">'category'</span>, <span class="hljs-string">'category'</span>) <span class="hljs-comment">// æŒ‰åˆ†ç±»æŸ¥</span>
}

<span class="hljs-comment">// 3. æ•°æ®åº“å°±ç»ª</span>
request.<span class="hljs-property">onsuccess</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) {
  <span class="hljs-keyword">const</span> db = event.<span class="hljs-property">target</span>.<span class="hljs-property">result</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ•°æ®åº“å·²å°±ç»ª'</span>)
}
</code></pre>
<h2 data-id="heading-3">å››ã€æ ¸å¿ƒä¼˜åŠ¿ï¼šæŸ¥è¯¢æ€§èƒ½</h2>
<p>è¿™æ˜¯ IndexedDB çœŸæ­£å‰å®³çš„åœ°æ–¹ã€‚åŒæ ·çš„ 5000 æ¡å•†å“æ•°æ®ï¼ŒæŸ¥è¯¢å®Œå…¨ä¸åŒï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç”¨ç´¢å¼•æŸ¥ï¼Œä¸éœ€è¦éå†æ‰€æœ‰æ•°æ®</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">searchProducts</span>(<span class="hljs-params">keyword</span>) {
  <span class="hljs-keyword">const</span> transaction = db.<span class="hljs-title function_">transaction</span>([<span class="hljs-string">'products'</span>], <span class="hljs-string">'readonly'</span>)
  <span class="hljs-keyword">const</span> store = transaction.<span class="hljs-title function_">objectStore</span>(<span class="hljs-string">'products'</span>)
  <span class="hljs-keyword">const</span> index = store.<span class="hljs-title function_">index</span>(<span class="hljs-string">'name'</span>) <span class="hljs-comment">// ä½¿ç”¨ç´¢å¼•</span>
  
  <span class="hljs-comment">// åªæœç´¢ç›¸å…³èŒƒå›´</span>
  <span class="hljs-keyword">const</span> range = <span class="hljs-title class_">IDBKeyRange</span>.<span class="hljs-title function_">bound</span>(keyword, keyword + <span class="hljs-string">'\uffff'</span>)
  <span class="hljs-keyword">const</span> request = index.<span class="hljs-title function_">openCursor</span>(range)
  
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> results = []
    request.<span class="hljs-property">onsuccess</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) {
      <span class="hljs-keyword">const</span> cursor = event.<span class="hljs-property">target</span>.<span class="hljs-property">result</span>
      <span class="hljs-keyword">if</span> (cursor) {
        results.<span class="hljs-title function_">push</span>(cursor.<span class="hljs-property">value</span>)
        cursor.<span class="hljs-title function_">continue</span>() <span class="hljs-comment">// ç»§ç»­ä¸‹ä¸€ä¸ª</span>
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-title function_">resolve</span>(results) <span class="hljs-comment">// æœç´¢å®Œæˆ</span>
      }
    }
  })
}

<span class="hljs-comment">// æ¯«ç§’çº§å“åº”ï¼Œä¸å¡é¡µé¢</span>
<span class="hljs-keyword">const</span> results = <span class="hljs-keyword">await</span> <span class="hljs-title function_">searchProducts</span>(<span class="hljs-string">'æ‰‹æœº'</span>)
</code></pre>
<p>ä½ å¯ä»¥åˆ›å»ºå¤šä¸ªç´¢å¼•ï¼Œå®ç°å„ç§å¤æ‚æŸ¥è¯¢ï¼š</p>
<ul>
<li>ä»·æ ¼åŒºé—´ç­›é€‰</li>
<li>å¤šæ¡ä»¶ç»„åˆæŸ¥è¯¢</li>
<li>åˆ†ç±»ç»Ÿè®¡</li>
<li>æ¨¡ç³Šæœç´¢</li>
</ul>
<h2 data-id="heading-4">äº”ã€é€‚ç”¨åœºæ™¯</h2>
<p>ä»€ä¹ˆæƒ…å†µä¸‹è¯¥è€ƒè™‘ IndexedDBï¼Ÿ</p>
<h3 data-id="heading-5">1. ç¦»çº¿åº”ç”¨</h3>
<p>é‚®ä»¶å®¢æˆ·ç«¯ã€æ–‡æ¡£ç¼–è¾‘å™¨ã€ç¬”è®°åº”ç”¨ã€‚æ•°æ®å…ˆå­˜æœ¬åœ°ï¼Œæœ‰ç½‘å†åŒæ­¥ã€‚</p>
<h3 data-id="heading-6">2. å¤§æ•°æ®ç¼“å­˜</h3>
<p>ç”µå•†å•†å“ç›®å½•ã€å¤§é‡é…ç½®é¡¹ã€å†å²æ•°æ®ã€‚æ›¿ä»£æ¥å£é¢‘ç¹è¯·æ±‚ã€‚</p>
<h3 data-id="heading-7">3. æ–‡ä»¶ç®¡ç†</h3>
<p>å›¾ç‰‡ã€PDFã€éŸ³è§†é¢‘çš„æœ¬åœ°ç¼“å­˜ã€‚ä¸ç”¨æ¯æ¬¡éƒ½ä¸‹è½½ã€‚</p>
<h3 data-id="heading-8">4. æ¸¸æˆæ•°æ®</h3>
<p>å­˜æ¡£ã€é…ç½®ã€èµ„æºæ–‡ä»¶ã€‚æ”¯æŒç¦»çº¿æ¸¸æˆã€‚</p>
<h3 data-id="heading-9">5. åˆ†ææ•°æ®</h3>
<p>æ”¶é›†ç”¨æˆ·è¡Œä¸ºï¼Œæ‰¹é‡ä¸Šä¼ ã€‚é¿å…é¢‘ç¹ç½‘ç»œè¯·æ±‚ã€‚</p>
<h2 data-id="heading-10">å…­ã€å®ç”¨å»ºè®®</h2>
<h3 data-id="heading-11">1. ç”¨å°è£…åº“ç®€åŒ–å¼€å‘</h3>
<p>åŸç”Ÿ API ç¡®å®æœ‰ç‚¹ç¹çã€‚æ¨èè¿™äº›åº“ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç”¨ idb åº“ï¼ˆæ¨èï¼‰</span>
<span class="hljs-keyword">import</span> { openDB } <span class="hljs-keyword">from</span> <span class="hljs-string">'idb'</span>

<span class="hljs-keyword">const</span> db = <span class="hljs-keyword">await</span> <span class="hljs-title function_">openDB</span>(<span class="hljs-string">'my-db'</span>, <span class="hljs-number">1</span>, {
  <span class="hljs-title function_">upgrade</span>(<span class="hljs-params">db</span>) {
    db.<span class="hljs-title function_">createObjectStore</span>(<span class="hljs-string">'products'</span>)
  }
})

<span class="hljs-comment">// æ“ä½œç®€å•å¤šäº†</span>
<span class="hljs-keyword">await</span> db.<span class="hljs-title function_">add</span>(<span class="hljs-string">'products'</span>, { <span class="hljs-attr">name</span>: <span class="hljs-string">'å•†å“1'</span>, <span class="hljs-attr">price</span>: <span class="hljs-number">100</span> })
<span class="hljs-keyword">const</span> products = <span class="hljs-keyword">await</span> db.<span class="hljs-title function_">getAll</span>(<span class="hljs-string">'products'</span>)
</code></pre>
<h3 data-id="heading-12">2. æ¸è¿›å¢å¼º</h3>
<p>å…ˆåˆ¤æ–­æ”¯æŒæ€§ï¼Œä¸æ”¯æŒå°±é™çº§ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">getStorage</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">if</span> (<span class="hljs-string">'indexedDB'</span> <span class="hljs-keyword">in</span> <span class="hljs-variable language_">window</span>) {
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">type</span>: <span class="hljs-string">'indexedDB'</span>,
      <span class="hljs-attr">save</span>: saveToIndexedDB,
      <span class="hljs-attr">load</span>: loadFromIndexedDB
    }
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'é™çº§åˆ° localStorage'</span>)
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">type</span>: <span class="hljs-string">'localStorage'</span>,
      <span class="hljs-attr">save</span>: saveToLocalStorage,
      <span class="hljs-attr">load</span>: loadFromLocalStorage
    }
  }
}
</code></pre>
<h3 data-id="heading-13">3. æ³¨æ„ç‰ˆæœ¬è¿ç§»</h3>
<p>ä¿®æ”¹è¡¨ç»“æ„éœ€è¦å‡çº§ç‰ˆæœ¬ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> request = indexedDB.<span class="hljs-title function_">open</span>(<span class="hljs-string">'myDB'</span>, <span class="hljs-number">2</span>) <span class="hljs-comment">// ç‰ˆæœ¬å·+1</span>

request.<span class="hljs-property">onupgradeneeded</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) {
  <span class="hljs-keyword">const</span> db = event.<span class="hljs-property">target</span>.<span class="hljs-property">result</span>
  <span class="hljs-keyword">const</span> oldVersion = event.<span class="hljs-property">oldVersion</span>
  
  <span class="hljs-keyword">if</span> (oldVersion &lt; <span class="hljs-number">1</span>) {
    <span class="hljs-comment">// åˆå§‹ç‰ˆæœ¬é€»è¾‘</span>
  }
  
  <span class="hljs-keyword">if</span> (oldVersion &lt; <span class="hljs-number">2</span>) {
    <span class="hljs-comment">// ç‰ˆæœ¬2çš„å‡çº§é€»è¾‘</span>
    <span class="hljs-comment">// æ¯”å¦‚æ·»åŠ æ–°ç´¢å¼•</span>
    <span class="hljs-keyword">const</span> store = event.<span class="hljs-property">currentTarget</span>.<span class="hljs-property">transaction</span>.<span class="hljs-title function_">objectStore</span>(<span class="hljs-string">'products'</span>)
    store.<span class="hljs-title function_">createIndex</span>(<span class="hljs-string">'createdAt'</span>, <span class="hljs-string">'createdAt'</span>)
  }
}
</code></pre>
<h2 data-id="heading-14">ä¸ƒã€ä»€ä¹ˆæ—¶å€™ä¸ç”¨ï¼Ÿ</h2>
<p>IndexedDB è™½å¥½ï¼Œä½†ä¹Ÿä¸æ˜¯ä¸‡èƒ½ï¼š</p>
<ul>
<li>å­˜ä¸ªç”¨æˆ· token â†’ ç”¨ localStorage æˆ– cookie</li>
<li>ä¼šè¯çº§ä¸´æ—¶æ•°æ® â†’ ç”¨ sessionStorage</li>
<li>ç®€å•é…ç½®é¡¹ â†’ localStorage æ›´æ–¹ä¾¿</li>
<li>éœ€è¦æœåŠ¡ç«¯è¯»å– â†’ cookie</li>
</ul>
<p>è®°ä½ï¼š<strong>æŠ€æœ¯é€‰å‹è¦çœ‹å…·ä½“éœ€æ±‚</strong>ï¼Œä¸æ˜¯è¶Šé«˜çº§è¶Šå¥½ã€‚</p>
<h2 data-id="heading-15">å…«ã€å¼€å§‹å°è¯•</h2>
<p>å¦‚æœä½ ä»æ²¡ç”¨è¿‡ IndexedDBï¼Œå¯ä»¥ä»è¿™äº›å¼€å§‹ï¼š</p>
<ol>
<li><strong>ç¼“å­˜æ¥å£æ•°æ®</strong>ï¼šæŠŠé¢‘ç¹è¯·æ±‚çš„ API ç»“æœç¼“å­˜èµ·æ¥</li>
<li><strong>ç¦»çº¿æ”¶è—åŠŸèƒ½</strong>ï¼šç”¨æˆ·æ”¶è—çš„å†…å®¹å­˜æœ¬åœ°</li>
<li><strong>å›¾ç‰‡æ‡’åŠ è½½ç¼“å­˜</strong>ï¼šçœ‹è¿‡çš„å›¾ç‰‡å­˜èµ·æ¥</li>
<li><strong>è¡¨å•è‰ç¨¿</strong>ï¼šå¤æ‚çš„è¡¨å•æ•°æ®å®æ—¶ä¿å­˜</li>
</ol>
<p>ä¸éœ€è¦ä¸€å¼€å§‹å°±å¤§åŠ¨å¹²æˆˆã€‚æ‰¾ä¸ªåˆé€‚çš„åœºæ™¯ï¼Œå…ˆè¯•è¯•æ°´ã€‚</p>
<h2 data-id="heading-16">å†™åœ¨æœ€å</h2>
<p>IndexedDB åœ¨å‰ç«¯é¢†åŸŸå­˜åœ¨æ„Ÿä¸å¼ºï¼Œå¯èƒ½å› ä¸ºå®ƒè§£å†³çš„é—®é¢˜ä¸æ˜¯æ¯ä¸ªé¡¹ç›®éƒ½ä¼šé‡åˆ°ã€‚ä½†å½“ä½ çœŸçš„éœ€è¦å¤„ç†å¤§é‡å®¢æˆ·ç«¯æ•°æ®æ—¶ï¼Œå®ƒä¼šæ˜¯ä¸ªå¾ˆå¥½çš„é€‰æ‹©ã€‚</p>
<p><strong>æŠ€æœ¯æ²¡æœ‰ç»å¯¹çš„å¥½åï¼Œåªæœ‰åˆé€‚ä¸å¦</strong>ã€‚çŸ¥é“å®ƒçš„å­˜åœ¨ï¼Œäº†è§£å®ƒçš„èƒ½åŠ›ï¼Œå½“åˆé€‚çš„éœ€æ±‚å‡ºç°æ—¶ï¼Œä½ å°±èƒ½åšå‡ºæ›´å¥½çš„é€‰æ‹©ã€‚</p>
<hr/>
<p>çœ‹å®Œæœ‰ç‚¹å…´è¶£äº†ï¼Ÿå¯ä»¥åœ¨ä¸ªäººé¡¹ç›®é‡Œè¯•è¯• IndexedDBï¼Œé‡åˆ°é—®é¢˜æ¬¢è¿äº¤æµã€‚å¦‚æœä½ å·²ç»åœ¨ç”¨ï¼Œæœ‰ä»€ä¹ˆç»éªŒæˆ–è¸©å‘æ•…äº‹ï¼Ÿè¯„è®ºåŒºèŠèŠã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åœ¨Wordæ¨¡æ¿ä¸­ç”¨HTMLæ›¿æ¢æ–‡æœ¬ï¼šSpire.Doc for .NETçš„å®è·µæŒ‡å—]]></title>    <link>https://juejin.cn/post/7604671453453664271</link>    <guid>https://juejin.cn/post/7604671453453664271</guid>    <pubDate>2026-02-10T01:59:44.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604671453453664271" data-draft-id="7604493165329088546" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åœ¨Wordæ¨¡æ¿ä¸­ç”¨HTMLæ›¿æ¢æ–‡æœ¬ï¼šSpire.Doc for .NETçš„å®è·µæŒ‡å—"/> <meta itemprop="keywords" content="åç«¯,C#,.NET"/> <meta itemprop="datePublished" content="2026-02-10T01:59:44.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¼ºç‚¹å†…å‘"/> <meta itemprop="url" content="https://juejin.cn/user/3414438228006112"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åœ¨Wordæ¨¡æ¿ä¸­ç”¨HTMLæ›¿æ¢æ–‡æœ¬ï¼šSpire.Doc for .NETçš„å®è·µæŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3414438228006112/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¼ºç‚¹å†…å‘
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-10T01:59:44.000Z" title="Tue Feb 10 2026 01:59:44 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">åœ¨Wordæ¨¡æ¿ä¸­ç”¨HTMLæ›¿æ¢æ–‡æœ¬ï¼šSpire.Doc for .NETçš„å®è·µæŒ‡å—</h2>
<p>åœ¨æ—¥å¸¸çš„è½¯ä»¶å¼€å‘å’Œä¼ä¸šçº§åº”ç”¨ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦ç”Ÿæˆå„ç§æŠ¥å‘Šã€åˆåŒã€é‚®ä»¶ç­‰æ–‡æ¡£ã€‚è¿™äº›æ–‡æ¡£å¾€å¾€åŸºäºé¢„è®¾çš„Wordæ¨¡æ¿ï¼Œä½†å…¶å†…å®¹å´éœ€è¦æ ¹æ®ä¸šåŠ¡æ•°æ®åŠ¨æ€ç”Ÿæˆã€‚ä½ æ˜¯å¦æ›¾ä¸ºå¦‚ä½•åœ¨Wordæ¨¡æ¿ä¸­åŠ¨æ€æ’å…¥å¸¦æœ‰å¤æ‚æ ¼å¼çš„å¯Œæ–‡æœ¬å†…å®¹è€Œæ„Ÿåˆ°å¤´ç–¼ï¼Ÿä¼ ç»Ÿçš„æ–‡æœ¬æ›¿æ¢æ–¹æ³•ï¼ˆä¾‹å¦‚ç®€å•çš„<code>Find/Replace</code>ï¼‰æ˜¯å¦å·²æ— æ³•æ»¡è¶³ä½ å¯¹æ ·å¼ã€å›¾ç‰‡ã€è¡¨æ ¼ç­‰ä¸°å¯Œæ ¼å¼çš„åŠ¨æ€ç”Ÿæˆéœ€æ±‚ï¼Ÿ</p>
<p>æœ¬æ–‡å°†æ·±å…¥æ¢è®¨è¿™ä¸€ç—›ç‚¹ï¼Œå¹¶ä¸ºä½ æä¾›ä¸€ç§é«˜æ•ˆã€çµæ´»çš„è§£å†³æ–¹æ¡ˆâ€”â€”åˆ©ç”¨Spire.Doc for .NETåº“ï¼Œå°†HTMLå†…å®¹æ— ç¼æ›¿æ¢åˆ°Wordæ¨¡æ¿ä¸­ã€‚è¿™ç§æ–¹æ³•ä¸ä»…èƒ½ä¿ç•™HTMLçš„ä¸°å¯Œæ ¼å¼ï¼Œè¿˜èƒ½æå¤§æå‡æ–‡æ¡£è‡ªåŠ¨åŒ–çš„æ•ˆç‡å’Œè´¨é‡ï¼Œè®©ä½ çš„åº”ç”¨ç¨‹åºèƒ½å¤Ÿè½»æ¾ç”Ÿæˆé«˜åº¦å®šåˆ¶åŒ–çš„ä¸“ä¸šæ–‡æ¡£ã€‚</p>
<h3 data-id="heading-1">ä¼ ç»ŸWordæ–‡æœ¬æ›¿æ¢çš„å±€é™ä¸å¯Œæ–‡æœ¬éœ€æ±‚</h3>
<p>ä¼ ç»Ÿçš„Wordæ–‡æœ¬æ›¿æ¢ï¼Œé€šå¸¸æŒ‡çš„æ˜¯åœ¨æ–‡æ¡£ä¸­æŸ¥æ‰¾ç‰¹å®šçš„çº¯æ–‡æœ¬å ä½ç¬¦ï¼ˆå¦‚<code>{{placeholder}}</code>ï¼‰ï¼Œç„¶åå°†å…¶æ›¿æ¢ä¸ºå¦ä¸€ä¸ªçº¯æ–‡æœ¬å­—ç¬¦ä¸²ã€‚è¿™ç§æ–¹æ³•ç®€å•ç›´æ¥ï¼Œå¯¹äºæ›¿æ¢æ ‡é¢˜ã€æ—¥æœŸã€å§“åç­‰çº¯æ–‡æœ¬ä¿¡æ¯ç»°ç»°æœ‰ä½™ã€‚</p>
<p>ç„¶è€Œï¼Œå½“æˆ‘ä»¬çš„éœ€æ±‚å‡çº§åˆ°éœ€è¦æ’å…¥åŒ…å«ç²—ä½“ã€æ–œä½“ã€åˆ—è¡¨ã€è¡¨æ ¼ã€å›¾ç‰‡ç”šè‡³è¶…é“¾æ¥ç­‰å¤æ‚æ ¼å¼çš„å†…å®¹æ—¶ï¼Œä¼ ç»Ÿæ–¹æ³•ä¾¿æ˜¾å¾—åŠ›ä¸ä»å¿ƒã€‚ä¾‹å¦‚ï¼Œä¸€ä»½è‡ªåŠ¨åŒ–ç”Ÿæˆçš„é”€å”®æŠ¥å‘Šï¼Œå¯èƒ½éœ€è¦æ’å…¥ä¸€ä¸ªæ ¼å¼ç²¾ç¾çš„äº§å“åˆ—è¡¨ï¼Œæˆ–è€…ä»Webç¼–è¾‘å™¨ä¸­è·å–çš„ç”¨æˆ·è¯„è®ºï¼ˆé€šå¸¸æ˜¯HTMLæ ¼å¼ï¼‰ã€‚å¦‚æœä»…ä»…å°†è¿™äº›HTMLå­—ç¬¦ä¸²ä½œä¸ºçº¯æ–‡æœ¬æ’å…¥ï¼ŒWordæ–‡æ¡£å°†å¤±å»åŸæœ‰çš„å¸ƒå±€å’Œæ ·å¼ï¼Œå˜å¾—éš¾ä»¥é˜…è¯»ã€‚</p>
<p>åœ¨å½“ä»Šä¼ä¸šçº§åº”ç”¨ä¸­ï¼Œå¯¹æ–‡æ¡£è‡ªåŠ¨åŒ–ã€åŠ¨æ€å†…å®¹ç”Ÿæˆçš„éœ€æ±‚æ—¥ç›Šå¢é•¿ã€‚æ— è®ºæ˜¯è‡ªåŠ¨åŒ–æŠ¥å‘Šã€åˆåŒç”Ÿæˆã€æ‰¹é‡é‚®ä»¶åˆå¹¶ï¼Œè¿˜æ˜¯ä»æ•°æ®åº“æˆ–Webç¼–è¾‘å™¨è·å–çš„HTMLç‰‡æ®µï¼Œéƒ½è¿«åˆ‡éœ€è¦ä¸€ç§èƒ½å¤Ÿå°†è¿™äº›å¯Œæ–‡æœ¬å†…å®¹â€œç†è§£â€å¹¶æ­£ç¡®æ¸²æŸ“åˆ°Wordæ–‡æ¡£ä¸­çš„æŠ€æœ¯æ–¹æ¡ˆã€‚</p>
<h3 data-id="heading-2">Spire.Doc for .NETï¼šWordæ¨¡æ¿HTMLæ›¿æ¢çš„åˆ©å™¨</h3>
<p>Spire.Doc for .NETæ˜¯ä¸€æ¬¾åŠŸèƒ½å¼ºå¤§çš„.NET Wordæ–‡æ¡£å¤„ç†åº“ï¼Œå®ƒå…è®¸å¼€å‘è€…åœ¨ä¸ä¾èµ–Microsoft Officeçš„æƒ…å†µä¸‹ï¼Œåˆ›å»ºã€è¯»å–ã€ç¼–è¾‘ã€è½¬æ¢å’Œæ‰“å°Wordæ–‡æ¡£ã€‚åœ¨Wordæ¨¡æ¿è‡ªåŠ¨åŒ–é¢†åŸŸï¼ŒSpire.Docå› å…¶å…¨é¢çš„åŠŸèƒ½å’Œæ˜“ç”¨æ€§è€Œå¤‡å—æ¨å´‡ã€‚</p>
<p>å…¶æ ¸å¿ƒä¼˜åŠ¿ä¹‹ä¸€ï¼Œä¾¿æ˜¯å¯¹HTMLå†…å®¹çš„è‰¯å¥½æ”¯æŒã€‚Spire.Doc for .NETèƒ½å¤Ÿå°†HTMLå­—ç¬¦ä¸²ç›´æ¥æ’å…¥åˆ°Wordæ–‡æ¡£çš„æŒ‡å®šä½ç½®ï¼Œå¹¶è‡ªåŠ¨è§£æHTMLæ ‡ç­¾ï¼Œå°†å…¶è½¬æ¢ä¸ºWordæ–‡æ¡£å¯è¯†åˆ«çš„æ ¼å¼ã€‚è¿™æ„å‘³ç€ä½ å¯ä»¥å°†åŒ…å«<code>&lt;h1&gt;</code>åˆ°<code>&lt;h6&gt;</code>æ ‡é¢˜ã€<code>&lt;p&gt;</code>æ®µè½ã€<code>&lt;table&gt;</code>è¡¨æ ¼ã€<code>&lt;img&gt;</code>å›¾ç‰‡ã€<code>&lt;ul&gt;</code>/<code>&lt;ol&gt;</code>åˆ—è¡¨ã€<code>&lt;strong&gt;</code>/<code>&lt;em&gt;</code>å¼ºè°ƒç­‰å¸¸ç”¨HTMLæ ‡ç­¾çš„å­—ç¬¦ä¸²ï¼Œç›´æ¥â€œç²˜è´´â€åˆ°Wordæ–‡æ¡£ä¸­ï¼Œè€Œæ— éœ€æ‰‹åŠ¨è¿›è¡Œæ ¼å¼è½¬æ¢ã€‚</p>
<p>ç›¸è¾ƒäºè‡ªè¡Œè§£æHTMLå¹¶æ‰‹åŠ¨æ„å»ºWordæ–‡æ¡£å…ƒç´ çš„å¤æ‚æ€§ï¼ŒSpire.Doc for .NETæä¾›äº†ä¸€ç«™å¼çš„è§£å†³æ–¹æ¡ˆï¼Œæå¤§åœ°ç®€åŒ–äº†å¼€å‘æµç¨‹ã€‚</p>
<h3 data-id="heading-3">å®æˆ˜æ¼”ç»ƒï¼šä½¿ç”¨Spire.Doc for .NETæ›¿æ¢HTMLå†…å®¹</h3>
<p>ä¸‹é¢ï¼Œæˆ‘ä»¬å°†é€šè¿‡ä¸€ä¸ªå…·ä½“çš„C#ä»£ç ç¤ºä¾‹ï¼Œæ¼”ç¤ºå¦‚ä½•ä½¿ç”¨Spire.Doc for .NETå°†HTMLå†…å®¹æ›¿æ¢åˆ°Wordæ¨¡æ¿ä¸­ã€‚</p>
<h4 data-id="heading-4">æ­¥éª¤åˆ†è§£</h4>
<ol>
<li><strong>å‡†å¤‡Wordæ¨¡æ¿</strong>ï¼šåœ¨ä½ çš„Wordæ¨¡æ¿ï¼ˆä¾‹å¦‚<code>.docx</code>æ–‡ä»¶ï¼‰ä¸­ï¼Œè®¾ç½®ä¸€ä¸ªæˆ–å¤šä¸ªå ä½ç¬¦ï¼Œç”¨äºæ ‡è®°HTMLå†…å®¹å°†è¢«æ’å…¥çš„ä½ç½®ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥ä½¿ç”¨<code>{{html_content}}</code>æˆ–<code>#HTML_PLACEHOLDER#</code>ã€‚</li>
<li><strong>å¼•å…¥Spire.Doc for .NET</strong>ï¼šé€šè¿‡NuGetåŒ…ç®¡ç†å™¨ï¼Œåœ¨ä½ çš„.NETé¡¹ç›®ä¸­å®‰è£…<code>Spire.Doc</code>ã€‚</li>
<li><strong>åŠ è½½Wordæ¨¡æ¿</strong>ï¼šä½¿ç”¨<code>Document</code>ç±»åŠ è½½ä½ çš„Wordæ¨¡æ¿æ–‡ä»¶ã€‚</li>
<li><strong>åˆ›å»ºHTMLå­—ç¬¦ä¸²</strong>ï¼šå‡†å¤‡å¥½ä½ æƒ³è¦æ’å…¥çš„HTMLæ ¼å¼çš„å¯Œæ–‡æœ¬å†…å®¹ã€‚</li>
<li><strong>æ‰§è¡Œæ›¿æ¢</strong>ï¼šåˆ©ç”¨<code>FindAllString()</code>æ–¹æ³•æ‰¾åˆ°å ä½ç¬¦ï¼Œç„¶åé€šè¿‡<code>TextSelection.GetAsOneRange()</code>è·å–å ä½ç¬¦æ‰€åœ¨çš„æ–‡æœ¬èŒƒå›´ï¼Œæœ€åä½¿ç”¨<code>ReplaceWithHTML()</code>æ–¹æ³•å°†HTMLå†…å®¹æ’å…¥ã€‚</li>
<li><strong>ä¿å­˜ä¿®æ”¹åçš„æ–‡æ¡£</strong>ï¼šå°†å¤„ç†åçš„Wordæ–‡æ¡£ä¿å­˜ä¸ºæ–°çš„æ–‡ä»¶ã€‚</li>
</ol>
<h4 data-id="heading-5">ä»£ç ç¤ºä¾‹</h4>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">using</span> Spire.Doc;
<span class="hljs-keyword">using</span> Spire.Doc.Documents;
<span class="hljs-keyword">using</span> Spire.Doc.Fields;
<span class="hljs-keyword">using</span> System.IO;

<span class="hljs-keyword">namespace</span> <span class="hljs-title">WordTemplateHtmlReplace</span>
{
    <span class="hljs-keyword">class</span> <span class="hljs-title">Program</span>
    {
        <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Main</span>(<span class="hljs-params"><span class="hljs-built_in">string</span>[] args</span>)</span>
        {
            <span class="hljs-comment">// 1. å‡†å¤‡Wordæ¨¡æ¿è·¯å¾„å’Œè¾“å‡ºæ–‡ä»¶è·¯å¾„</span>
            <span class="hljs-built_in">string</span> templatePath = <span class="hljs-string">"TemplateWithHtmlPlaceholder.docx"</span>; <span class="hljs-comment">// ç¡®ä¿æ­¤æ–‡ä»¶å­˜åœ¨ä¸”åŒ…å«å ä½ç¬¦</span>
            <span class="hljs-built_in">string</span> outputPath = <span class="hljs-string">"OutputDocumentWithHtml.docx"</span>;

            <span class="hljs-comment">// 2. å‡†å¤‡è¦æ’å…¥çš„HTMLå†…å®¹</span>
            <span class="hljs-built_in">string</span> htmlContent = <span class="hljs-string">@"
                &lt;h1&gt;æ¬¢è¿æ¥åˆ°åŠ¨æ€æŠ¥å‘Š&lt;/h1&gt;
                &lt;p&gt;è¿™æ˜¯ä¸€æ®µç”±HTMLç”Ÿæˆçš„&lt;strong&gt;å¯Œæ–‡æœ¬å†…å®¹&lt;/strong&gt;ã€‚å®ƒåŒ…å«äº†å¤šç§æ ¼å¼ï¼Œä¾‹å¦‚ï¼š&lt;/p&gt;
                &lt;ul&gt;
                    &lt;li&gt;é¡¹ç›®ç¬¦å·åˆ—è¡¨é¡¹ä¸€&lt;/li&gt;
                    &lt;li&gt;é¡¹ç›®ç¬¦å·åˆ—è¡¨é¡¹äºŒï¼Œå¯ä»¥æœ‰&lt;em&gt;æ–œä½“&lt;/em&gt;æ–‡å­—&lt;/li&gt;
                &lt;/ul&gt;
                &lt;p&gt;æˆ‘ä»¬è¿˜å¯ä»¥æ’å…¥ä¸€ä¸ªç®€å•çš„è¡¨æ ¼ï¼š&lt;/p&gt;
                &lt;table border='1' cellpadding='5' cellspacing='0'&gt;
                    &lt;thead&gt;
                        &lt;tr&gt;&lt;th&gt;æ ‡é¢˜1&lt;/th&gt;&lt;th&gt;æ ‡é¢˜2&lt;/th&gt;&lt;/tr&gt;
                    &lt;/thead&gt;
                    &lt;tbody&gt;
                        &lt;tr&gt;&lt;td&gt;æ•°æ®A1&lt;/td&gt;&lt;td&gt;æ•°æ®A2&lt;/td&gt;&lt;/tr&gt;
                        &lt;tr&gt;&lt;td&gt;æ•°æ®B1&lt;/td&gt;&lt;td&gt;æ•°æ®B2&lt;/td&gt;&lt;/tr&gt;
                    &lt;/tbody&gt;
                &lt;/table&gt;
                &lt;p&gt;ä»¥åŠä¸€å¼ å›¾ç‰‡ï¼ˆå¦‚æœè·¯å¾„æœ‰æ•ˆï¼‰ï¼š&lt;/p&gt;
                &lt;img src='https://www.e-iceblue.cn/images/logo.png' alt='Spire.Doc Logo' width='100' height='auto' /&gt;
                &lt;p&gt;æ„Ÿè°¢æ‚¨çš„é˜…è¯»ï¼&lt;/p&gt;"</span>;

            <span class="hljs-comment">// 3. åŠ è½½Wordæ¨¡æ¿</span>
            Document doc = <span class="hljs-keyword">new</span> Document();
            doc.LoadFromFile(templatePath);

            <span class="hljs-comment">// 4. æŸ¥æ‰¾å¹¶æ›¿æ¢å ä½ç¬¦ä¸ºHTMLå†…å®¹</span>
            <span class="hljs-comment">// æŸ¥æ‰¾æ¨¡æ¿ä¸­çš„å ä½ç¬¦ï¼Œä¾‹å¦‚ï¼š{{html_content}}</span>
            TextSelection[] selections = doc.FindAllString(<span class="hljs-string">"{{html_content}}"</span>, <span class="hljs-literal">true</span>, <span class="hljs-literal">true</span>);

            <span class="hljs-keyword">if</span> (selections.Length &gt; <span class="hljs-number">0</span>)
            {
                <span class="hljs-comment">// è·å–ç¬¬ä¸€ä¸ªåŒ¹é…åˆ°çš„å ä½ç¬¦æ‰€åœ¨çš„èŒƒå›´</span>
                TextRange range = selections[<span class="hljs-number">0</span>].GetAsOneRange();
                
                <span class="hljs-comment">// ä½¿ç”¨ReplaceWithHTMLæ–¹æ³•æ›¿æ¢å ä½ç¬¦</span>
                <span class="hljs-comment">// ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯HTMLå­—ç¬¦ä¸²</span>
                <span class="hljs-comment">// ç¬¬äºŒä¸ªå‚æ•°æ˜¯æ›¿æ¢é€‰é¡¹ï¼Œtrueè¡¨ç¤ºä¿ç•™å ä½ç¬¦çš„æ ¼å¼ï¼ˆé€šå¸¸ä¸éœ€è¦ï¼Œæ­¤å¤„ä¸ºç¤ºä¾‹ï¼‰</span>
                range.OwnerParagraph.ReplaceWithHTML(range.Text, htmlContent);
            }
            <span class="hljs-keyword">else</span>
            {
                Console.WriteLine(<span class="hljs-string">"æ¨¡æ¿ä¸­æœªæ‰¾åˆ°å ä½ç¬¦ '{{html_content}}'ã€‚"</span>);
            }

            <span class="hljs-comment">// 5. ä¿å­˜ä¿®æ”¹åçš„æ–‡æ¡£</span>
            doc.SaveToFile(outputPath, FileFormat.Docx);
            Console.WriteLine(<span class="hljs-string">$"æ–‡æ¡£å·²æˆåŠŸç”Ÿæˆåˆ°: <span class="hljs-subst">{outputPath}</span>"</span>);

            <span class="hljs-comment">// 6. é‡Šæ”¾èµ„æº</span>
            doc.Dispose();
        }
    }
}
</code></pre>
<p><strong>æ³¨æ„</strong>ï¼šåœ¨å®é™…åº”ç”¨ä¸­ï¼Œ<code>templatePath</code>å’Œ<code>outputPath</code>éœ€è¦æ›¿æ¢ä¸ºä½ çš„å®é™…æ–‡ä»¶è·¯å¾„ã€‚<code>TemplateWithHtmlPlaceholder.docx</code>æ–‡ä»¶åº”åŒ…å«æ–‡æœ¬<code>{{html_content}}</code>ä½œä¸ºå ä½ç¬¦ã€‚<code>img</code>æ ‡ç­¾ä¸­çš„<code>src</code>å±æ€§å¯ä»¥æ˜¯æœ¬åœ°è·¯å¾„æˆ–ç½‘ç»œURLã€‚</p>
<h3 data-id="heading-6">è¿›é˜¶åº”ç”¨ä¸æ³¨æ„äº‹é¡¹</h3>
<ul>
<li><strong>å¤æ‚HTMLä¸æ ·å¼</strong>ï¼šSpire.Doc for .NETèƒ½å¤Ÿè§£æå¤§éƒ¨åˆ†æ ‡å‡†çš„HTMLæ ‡ç­¾å’Œå†…è”æ ·å¼ã€‚ç„¶è€Œï¼Œå¯¹äºå¤æ‚çš„CSSæ ·å¼è¡¨ã€JavaScriptä»£ç æˆ–é«˜åº¦ä¾èµ–æµè§ˆå™¨æ¸²æŸ“çš„HTMLç»“æ„ï¼ŒSpire.Docå¯èƒ½æ— æ³•å®Œå…¨è¿˜åŸã€‚å»ºè®®åœ¨æ’å…¥å‰å¯¹HTMLå†…å®¹è¿›è¡Œé€‚å½“çš„æ¸…ç†å’Œç®€åŒ–ï¼Œåªä¿ç•™æ ¸å¿ƒçš„ç»“æ„å’Œæ ·å¼ä¿¡æ¯ã€‚</li>
<li><strong>æ€§èƒ½ä¼˜åŒ–</strong>ï¼šå¯¹äºéœ€è¦æ‰¹é‡ç”Ÿæˆå¤§é‡æ–‡æ¡£çš„åœºæ™¯ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨å¤šçº¿ç¨‹å¤„ç†ï¼Œæˆ–è€…ä¼˜åŒ–HTMLå†…å®¹çš„ç”Ÿæˆé€»è¾‘ï¼Œå‡å°‘ä¸å¿…è¦çš„å¤æ‚æ€§ã€‚Spire.Docæœ¬èº«åœ¨æ€§èƒ½æ–¹é¢è¡¨ç°ä¼˜ç§€ï¼Œä½†åˆç†çš„ä½¿ç”¨æ–¹å¼å°†è¿›ä¸€æ­¥æå‡æ•ˆç‡ã€‚</li>
<li><strong>å…¶ä»–åº”ç”¨åœºæ™¯</strong>ï¼šé™¤äº†æŠ¥å‘Šå’ŒåˆåŒï¼Œè¿™ç§HTMLæ›¿æ¢æŠ€æœ¯è¿˜å¯ä»¥å¹¿æ³›åº”ç”¨äºï¼š
<ul>
<li><strong>é‚®ä»¶åˆå¹¶</strong>ï¼šåŠ¨æ€ç”ŸæˆåŒ…å«å¯Œæ–‡æœ¬å†…å®¹çš„é‚®ä»¶æ­£æ–‡ã€‚</li>
<li><strong>åœ¨çº¿ç¼–è¾‘å™¨å†…å®¹å¯¼å‡º</strong>ï¼šå°†ç”¨æˆ·åœ¨Webç¼–è¾‘å™¨ä¸­åˆ›å»ºçš„å†…å®¹ï¼ˆé€šå¸¸æ˜¯HTMLï¼‰ç›´æ¥å¯¼å‡ºä¸ºWordæ–‡æ¡£ã€‚</li>
<li><strong>æ•°æ®å¯è§†åŒ–æŠ¥å‘Š</strong>ï¼šå°†å›¾è¡¨åº“ç”Ÿæˆçš„HTMLç‰‡æ®µï¼ˆå¦‚åŒ…å«SVGæˆ–Canvasçš„å›¾è¡¨ï¼‰åµŒå…¥åˆ°Wordæ–‡æ¡£ä¸­ã€‚</li>
</ul>
</li>
<li><strong>é”™è¯¯å¤„ç†</strong>ï¼šåœ¨å®é™…é¡¹ç›®ä¸­ï¼Œåº”å¢åŠ é€‚å½“çš„é”™è¯¯å¤„ç†æœºåˆ¶ï¼Œä¾‹å¦‚æ–‡ä»¶ä¸å­˜åœ¨ã€HTMLè§£æå¤±è´¥ç­‰æƒ…å†µã€‚</li>
</ul>
<h3 data-id="heading-7">ç»“è¯­</h3>
<p>Spire.Doc for .NETä¸ºWordæ¨¡æ¿è‡ªåŠ¨åŒ–ä¸­çš„HTMLå†…å®¹æ›¿æ¢æä¾›äº†ä¸€ä¸ªå¼ºå¤§è€Œçµæ´»çš„è§£å†³æ–¹æ¡ˆï¼Œæœ‰æ•ˆå¼¥è¡¥äº†ä¼ ç»Ÿçº¯æ–‡æœ¬æ›¿æ¢æ–¹æ³•çš„ä¸è¶³ã€‚é€šè¿‡æœ¬æ–‡çš„ä»‹ç»å’Œä»£ç ç¤ºä¾‹ï¼Œä½ åº”è¯¥å·²ç»æŒæ¡äº†å¦‚ä½•åˆ©ç”¨è¿™ä¸€å·¥å…·ï¼Œå°†å¸¦æœ‰ä¸°å¯Œæ ¼å¼çš„HTMLå†…å®¹æ— ç¼é›†æˆåˆ°Wordæ–‡æ¡£ä¸­ã€‚</p>
<p>è¿™ç§æ–¹æ³•ä½¿å¾—å¼€å‘è€…èƒ½å¤Ÿè½»æ¾å®ç°é«˜åº¦å®šåˆ¶åŒ–çš„ã€å¯Œæ–‡æœ¬å†…å®¹çš„Wordæ–‡æ¡£ç”Ÿæˆï¼Œä»è€Œæå¤§æå‡å·¥ä½œæ•ˆç‡å’Œæ–‡æ¡£è´¨é‡ã€‚ç°åœ¨ï¼Œæ˜¯æ—¶å€™å°†Spire.Doc for .NETåŠ å…¥ä½ çš„å·¥å…·ç®±ï¼Œå¼€å§‹æ„å»ºæ›´æ™ºèƒ½ã€æ›´é«˜æ•ˆçš„æ–‡æ¡£è‡ªåŠ¨åŒ–è§£å†³æ–¹æ¡ˆäº†</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ˜¥å“¥çš„Agenté€šå…³ç§˜ç±08ï¼šä»ã€å‘é‡ã€‘åˆ°ã€å¥å‘é‡ã€‘]]></title>    <link>https://juejin.cn/post/7604678037808185380</link>    <guid>https://juejin.cn/post/7604678037808185380</guid>    <pubDate>2026-02-10T00:08:52.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604678037808185380" data-draft-id="7604853010162073663" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ˜¥å“¥çš„Agenté€šå…³ç§˜ç±08ï¼šä»ã€å‘é‡ã€‘åˆ°ã€å¥å‘é‡ã€‘"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯,JavaScript"/> <meta itemprop="datePublished" content="2026-02-10T00:08:52.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ‘¸é±¼çš„æ˜¥å“¥"/> <meta itemprop="url" content="https://juejin.cn/user/1714893870865303"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ˜¥å“¥çš„Agenté€šå…³ç§˜ç±08ï¼šä»ã€å‘é‡ã€‘åˆ°ã€å¥å‘é‡ã€‘
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1714893870865303/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ‘¸é±¼çš„æ˜¥å“¥
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-10T00:08:52.000Z" title="Tue Feb 10 2026 00:08:52 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;font-weight:400;line-height:2;font-size:17px;overflow-x:hidden;color:#000}.markdown-body strong{padding:1px;color:#ee3f4d}.markdown-body em{padding:0 2px;color:#f33b1f}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{position:relative;margin-top:30px;margin-bottom:20px;line-height:1.5;font-weight:700}.markdown-body h1{text-align:center;padding-bottom:5px;font-size:32px;color:#ac1f18}.markdown-body h1:after{content:"";display:block;margin:4px auto 0;width:100px;height:2px;border-bottom:2px solid #f33b1f}.markdown-body h2{font-size:28px;border-bottom:1px solid #f33b1f}.markdown-body h2:before{content:"# "!important;color:#f33b1f}.markdown-body h3{font-size:24px;padding-left:9px;border-left:6px solid #f33b1f}.markdown-body h4{font-size:20px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #bbb;margin:16px 0}.markdown-body code{word-break:break-word;overflow-x:auto;background-color:#f9f1db;color:#ee2746;border-radius:2px;font-size:16px;padding:1px 2px}.markdown-body code,.markdown-body pre{font-family:-apple-system,-apple-system-body,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,PingFang SC,æ€æºé»‘ä½“ CN,æ€æºé»‘ä½“,JetBrains Mono,Fira Code,Menlo,Ubuntu Mono,Consolas,sans-serif}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{margin:12px 0!important;border-radius:3px;font-size:15px;padding:16px 12px;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f7f7f7}.markdown-body a{text-decoration:none;color:#1781b5;padding:0 2px;border-bottom:1px solid #1781b5}.markdown-body a:active,.markdown-body a:hover{border-bottom:2px solid #f33b1f;color:#ac1f18}.markdown-body blockquote{color:#3d3d3d;background-color:#fff9f9;padding:6px 16px;margin:16px 0;border-left:3px solid #f07c82}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:6px 0}.markdown-body ol,.markdown-body ul{padding-left:30px}.markdown-body ol li,.markdown-body ul li{margin-bottom:6px}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:6px}.markdown-body ol li{padding-left:6px}.markdown-body ::marker{color:#f33b1f}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}.markdown-body .task-list-item input[type=checkbox]{position:relative}.markdown-body .task-list-item input[type=checkbox]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;background:#fff;border:1px solid #f07c82;border-radius:3px;box-sizing:border-box;z-index:1}.markdown-body .task-list-item input[type=checkbox]:checked:after{content:"âœ“";position:absolute;top:-5px;left:0;right:0;bottom:0;width:0;height:0;color:#f33b1f;font-size:16px;font-weight:700;z-index:2}.markdown-body table{display:inline-block!important;font-size:14px;width:auto;max-width:100%;overflow:auto;border-spacing:0;border-collapse:collapse}.markdown-body table thead{background:#fff9f9;color:#000;text-align:left;font-size:15px}.markdown-body table tr:nth-child(2n){background-color:#fcfcfc}.markdown-body table tr:hover{background-color:#fff9f9}.markdown-body table td,.markdown-body table th{padding:12px 7px;line-height:24px;border:1px solid #f9f1db}.markdown-body table td{min-width:120px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="monokai">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#272822;color:#ddd}.hljs-keyword,.hljs-literal,.hljs-name,.hljs-selector-tag,.hljs-strong,.hljs-tag{color:#f92672}.hljs-code{color:#66d9ef}.hljs-class .hljs-title{color:#fff}.hljs-attribute,.hljs-link,.hljs-regexp,.hljs-symbol{color:#bf79db}.hljs-addition,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-emphasis,.hljs-section,.hljs-selector-attr,.hljs-selector-pseudo,.hljs-string,.hljs-subst,.hljs-template-tag,.hljs-template-variable,.hljs-title,.hljs-type,.hljs-variable{color:#a6e22e}.hljs-comment,.hljs-deletion,.hljs-meta,.hljs-quote{color:#75715e}.hljs-doctag,.hljs-keyword,.hljs-literal,.hljs-section,.hljs-selector-id,.hljs-selector-tag,.hljs-title,.hljs-type{font-weight:700}</style><p>æœ¬ç« æˆ‘ä»¬å°†æµ…æ˜¾åœ°äº†è§£ä¸€ä¸‹ <code>LLM</code> å¤§è¯­è¨€æ¨¡å‹ä¸­å‡ ä¸ªå…³é”®æœ¯è¯­ï¼ŒåŒºåˆ†æ¸…æ¥šã€å‘é‡ã€‘ï¼Œã€è¯å‘é‡ã€‘ï¼Œã€å¥å‘é‡ã€‘è¿™å‡ ä¸ªè¯çš„åŸºæœ¬æ¦‚å¿µå’Œå·®å¼‚ã€‚</p>
<p>è¿™å¯¹æˆ‘ä»¬åç»­æ„å»ºRAGæ¶æ„ä¼šéå¸¸æœ‰å¸®åŠ©ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€ä»€ä¹ˆæ˜¯å‘é‡</h2>
<p>å‘é‡æ˜¯ LLM ç§ä¸€ä¸ªé‡è¦çš„æ¦‚å¿µï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦å…ˆç†è§£ä¸€ä¸‹ï¼Œä»€ä¹ˆæ˜¯å‘é‡ã€‚</p>
<p>åœ¨æ•°å­¦å®šä¹‰é‡Œï¼Œå‘é‡æ˜¯æœ‰å¤§å°å’Œæ–¹å‘çš„é‡ã€‚ä½†åœ¨ AI é¢†åŸŸï¼Œä½ åªéœ€è¦æŠŠå®ƒç†è§£ä¸ºï¼šä¸€ä¸ªå›ºå®šé•¿åº¦çš„æ•°å­—åˆ—è¡¨ã€‚</p>
<p>æ‰“ä¸ªé€šä¿—çš„æ¯”æ–¹ï¼Œä½ æ­£åœ¨æ¸¸ç©ä¸€æ¬¾ <code>RPG</code> æ¸¸æˆï¼Œæ¯ä¸ªè§’è‰²éƒ½æœ‰è‡ªå·±çš„å±æ€§é¢æ¿ï¼š</p>
<ul>
<li>
<p>æˆ˜å£«ï¼šåŠ›é‡ 99ï¼Œæ™ºåŠ› 5ï¼Œæ•æ· 30</p>
</li>
<li>
<p>æ³•å¸ˆï¼šåŠ›é‡ 5ï¼Œæ™ºåŠ› 99ï¼Œæ•æ· 20</p>
</li>
</ul>
<p>å¦‚æœæˆ‘ä»¬æŠŠè¿™äº›å±æ€§å†™æˆä¸€ä¸ªæ•°ç»„ï¼š</p>
<p>æˆ˜å£« = [99, 5, 30]</p>
<p>æ³•å¸ˆ = [5, 99, 20]</p>
<p>è¿™ä¸²æ•°å­— [99, 5, 30]ï¼Œå°±æ˜¯ä¸€ä¸ªä»£è¡¨æˆ˜å£«çš„â€œå‘é‡â€ã€‚</p>
<ul>
<li>
<p>åœ¨è¿™ä¸ªä¾‹å­é‡Œï¼Œè¿™ä¸ªå‘é‡æœ‰ 3 ä¸ªç»´åº¦ï¼ˆåŠ›é‡ã€æ™ºåŠ›ã€æ•æ·ï¼‰ã€‚</p>
</li>
<li>
<p>è¿™ä¸²æ•°å­—ä¸ä»…ä»£è¡¨äº†æ•°å€¼ï¼Œè¿˜ä»£è¡¨äº†è¿™ä¸ªè§’è‰²åœ¨â€œå±æ€§ç©ºé—´â€é‡Œçš„ä½ç½®ã€‚</p>
</li>
</ul>
<p><img src="https://pic.zhangshichun.top/pic/20260207204218957.png" alt="" loading="lazy"/></p>
<p>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œä»»ä½•ä¸€ä¸ªè¯¥æ¸¸æˆä¸­çš„è§’è‰²ï¼Œå®ƒçš„å±æ€§éƒ½å¯ä»¥åœ¨è¿™ä¸ªä¸‰ç»´åæ ‡ç³»ä¸­æ‰¾åˆ°å±äºè‡ªå·±çš„ä½ç½®ã€‚</p>
<p>ç°åœ¨ä½ æ˜ç™½äº†ï¼š</p>
<blockquote>
<p>å‘é‡å°±æ˜¯è®¡ç®—æœºç”¨æ¥æè¿°ä¸€ä¸ªäº‹ç‰©ç‰¹å¾çš„ä¸€ä¸²æ•°å­—ã€‚</p>
</blockquote>
<h2 data-id="heading-1">äºŒã€ä»€ä¹ˆæ˜¯å‘é‡åŒ–</h2>
<p>å‘é‡åŒ–ï¼Œè§æ–‡çŸ¥æ„ï¼Œå°±æ˜¯æŠŠä¸€ä¸ªå…·ä½“äº‹ç‰©ï¼Œå˜æˆè®¡ç®—æœºæ›´å®¹æ˜“ç†è§£çš„å‘é‡çš„è¿‡ç¨‹ã€‚</p>
<p>ç°åœ¨ï¼Œå¦‚æœä½ æƒ³å¾€æ¸¸æˆé‡Œæ–°å¢ä¸€ä¸ªè§’è‰²ã€éª‘å£«ã€‘ï¼Œä½ åº”è¯¥æ€ä¹ˆåšå‘¢ï¼Ÿ</p>
<p>ä½ ä¼šéœ€è¦æƒ³æ˜ç™½å®ƒçš„ç‰¹ç‚¹ï¼Œå¹¶æŠŠè¿™äº›ç‰¹ç‚¹è½¬æ¢ä¸ºåŠ›é‡ã€æ™ºåŠ›ã€æ•æ· è¿™ä¸‰ä¸ªå±æ€§ã€‚</p>
<p>è¿™ä¸ªæ‰“åˆ†çš„è¿‡ç¨‹ï¼Œå°±æ˜¯å‘é‡åŒ–ã€‚</p>
<pre><code class="hljs language-python" lang="python">éª‘å£«_Vector = [<span class="hljs-number">85</span>, <span class="hljs-number">40</span>, <span class="hljs-number">20</span>]
</code></pre>
<p>ç°åœ¨ï¼Œä½ çš„æ•°æ®åº“é‡Œæœ‰äº†ä¸‰ä¸ªç‚¹ï¼š</p>
<ul>
<li>
<p>æˆ˜å£« [99, 5, 30]</p>
</li>
<li>
<p>æ³•å¸ˆ [5, 99, 20]</p>
</li>
<li>
<p>éª‘å£« [85, 40, 20]</p>
</li>
</ul>
<p><img src="https://pic.zhangshichun.top/pic/20260207210551737.png" alt="" loading="lazy"/></p>
<p>è®¡ç®—æœºä¼šæƒŠè®¶åœ°å‘ç°ï¼šâ€œå’¦ï¼Ÿæ¯”èµ·æ³•å¸ˆï¼Œâ€˜éª‘å£«â€™è¿™ä¸²æ•°å­—ç«Ÿç„¶ç¦»â€˜æˆ˜å£«â€™æ›´è¿‘ï¼â€ï¼ˆå› ä¸ºå®ƒä»¬çš„â€œåŠ›é‡â€æ•°å€¼éƒ½å¾ˆé«˜ï¼‰ã€‚</p>
<p>ç°åœ¨ï¼Œè®¡ç®—æœºæ‹¥æœ‰äº†ä¸€ç§æœ€ç®€å•çš„æ€è€ƒçš„å¸¸è¯†ï¼šå“ªäº›è§’è‰²æ›´ç›¸ä¼¼ã€‚</p>
<p>æ˜¯çš„ï¼Œä½ ä½œä¸ºä¸€ä¸ªäººç±»èƒ½å¤Ÿæ¸…æ™°åœ°çŸ¥é“éª‘å£«å’Œæˆ˜å£«æ›´ç›¸ä¼¼ï¼Œå¯èƒ½æ˜¯ä¾é çŸ¥è§‰ã€‚</p>
<p>ä½†è®¡ç®—æœºå´å¯ä»¥é€šè¿‡åæ ‡å‘ç°ï¼šéª‘å£«å’Œæˆ˜å£«æ›´åƒä¸€ç±»äººã€‚è¿™å°±æ˜¯å‘é‡åŒ–è®©è®¡ç®—æœºç†è§£è¯­ä¹‰çš„å¥¥ç§˜ã€‚</p>
<p>é‚£ä¹ˆï¼Œè¿™å’Œå¤§è¯­è¨€æ¨¡å‹åˆæœ‰ä»€ä¹ˆå…³ç³»å‘¢ï¼Ÿ</p>
<p>æœ‰çš„ï¼Œå…„å¼Ÿï¼Œæœ‰çš„ï¼</p>
<p>LLM è®­ç»ƒçš„è¿‡ç¨‹ï¼Œå…¶å®å°±æ˜¯æŠŠå„ç§å„æ ·çš„äººç±»çš„â€œæ–‡ç« â€ã€â€œæ–‡æ¡£â€å‘é‡åŒ–çš„è¿‡ç¨‹ã€‚</p>
<h2 data-id="heading-2">ä¸‰ã€å¯¹äººç±»è¯­è¨€çš„å‘é‡åŒ–è¯„ä¼°</h2>
<p>åœ¨å‰é¢çš„ä¾‹å­é‡Œï¼Œæˆ‘ä»¬å¯ä»¥æŠŠã€å‘é‡åŒ–ã€‘è¿™æ ·è§£é‡Šï¼š</p>
<blockquote>
<p>å‘é‡åŒ–æ˜¯ä¸€ä¸ªæ–¹æ³•ï¼Œè¾“å…¥çš„æ˜¯RPGæ¸¸æˆçš„è§’è‰²åç§°ï¼Œè¾“å‡ºçš„æ˜¯ä¸€æ®µæè¿°è¯¥è§’è‰²çš„å‘é‡åæ ‡ã€‚</p>
</blockquote>
<p>æ˜¯çš„ï¼Œæ²¡é—®é¢˜ï¼Œå¯¹äºä¸Šé¢çš„ä¾‹å­æ¥è¯´è¿™éå¸¸å‡†ç¡®ã€‚ä½†è®©æˆ‘ä»¬æŠŠå®ƒæ‰©å¤§ä¸€ä¸‹ï¼Œè¾“å…¥çš„ä¸å†æ˜¯RPGæ¸¸æˆçš„è§’è‰²åç§°ï¼Œè€Œæ˜¯äººç±»ä¸–ç•Œé‡Œæ— å¤„ä¸åœ¨çš„å„ç§è¯­è¨€æ–‡æœ¬ï¼š</p>
<ul>
<li>ä¸€å¥é—®å€™ï¼šâ€œä½ å¥½â€</li>
<li>ä¸€é¦–æƒ…è¯—ï¼Œ100å­—</li>
<li>ä¸€ç¯‡æŠ€æœ¯æ–‡æ¡£ï¼Œ500å­—</li>
<li>ä¸€æ®µä»£ç ï¼Œ1000å­—</li>
</ul>
<p>å½“æˆ‘ä»¬æŠŠå„ç§è¯­è¨€ä½œä¸ºè¾“å…¥æ—¶ï¼Œå¦‚æœè¿˜èƒ½ç¨³å®šè¾“å‡ºä¸€æ®µæè¿°è¯¥æ–‡æœ¬çš„å‘é‡åæ ‡ï¼Œé‚£è®¡ç®—æœºæ˜¯ä¸æ˜¯å°±èƒ½ç†è§£äººç±»è¯­è¨€çš„æœ¬è´¨äº†?</p>
<p>æ˜¯çš„ï¼Œå…„å¼Ÿï¼Œä½†ä¸‰ä¸ªç»´åº¦å¤ªå°‘äº†ï¼Œäººç±»çš„è¯­è¨€è¿‡äºå¤æ‚ã€‚</p>
<p>äºæ˜¯ï¼Œç»´åº¦çˆ†ç‚¸äº†ï¼Œè®¡ç®—æœºå¼€å§‹ç”¨1024ä¸ªç»´åº¦ã€1536ä¸ªç»´åº¦ï¼Œæˆ–è€…æ›´å¤šä¸ªç»´åº¦æ¥æè¿°ä¸€æ®µè¯çš„ç‰¹å¾ã€‚</p>
<h3 data-id="heading-3">3.1 ç¨ å¯†å‘é‡</h3>
<p>æƒ³è±¡ä¸€ä¸‹ï¼Œä½ æŠŠå…¬å¸çš„ä¸€æ¡ <strong>ã€Šä¸¥ç¦åœ¨ç”Ÿäº§ç¯å¢ƒç›´æ¥ä¿®æ”¹æ•°æ®åº“ã€‹</strong> çš„è§„å®šæ‰”ç»™æ¨¡å‹ã€‚</p>
<p>æ¨¡å‹è¯»åˆ°è¿™å¥è¯æ—¶ï¼Œå®ƒé‚£ 1536 ä¸ªç»´åº¦çš„æ¢æµ‹é’ˆä¼šç–¯ç‹‚è·³åŠ¨ã€‚è™½ç„¶æˆ‘ä»¬ä¸çŸ¥é“æ¯ä¸€æ ¹é’ˆå…·ä½“ä»£è¡¨ä»€ä¹ˆï¼Œä½†é€šè¿‡æ•°å­¦åˆ†æï¼Œæˆ‘ä»¬å‘ç°æ¨¡å‹å®é™…ä¸Šæ˜¯åœ¨è¯„ä¼°ä»¥ä¸‹è¿™ç±» <strong>â€œæŠ½è±¡ç‰¹å¾â€</strong>ï¼š</p>
<ul>
<li>
<p>ç‰¹å¾ç»´åº¦ #42ï¼ˆå¯èƒ½æ˜¯å…³äºâ€œå¼ºåˆ¶æ€§â€ï¼‰ï¼šè¿™å¥è¯è¯­æ°”éå¸¸å¼ºç¡¬ï¼ˆâ€œä¸¥ç¦â€ï¼‰ï¼Œæ‰€ä»¥è¿™ä¸ªç»´åº¦çš„æ•°å€¼é£™å‡åˆ° 0.99ã€‚</p>
</li>
<li>
<p>ç‰¹å¾ç»´åº¦ #108ï¼ˆå¯èƒ½æ˜¯å…³äºâ€œæŠ€æœ¯é¢†åŸŸâ€ï¼‰ï¼šè¿™å¥è¯åŒ…å«â€œæ•°æ®åº“â€ã€â€œç”Ÿäº§ç¯å¢ƒâ€ï¼Œæ‰€ä»¥è¿™ä¸ªç»´åº¦çš„æ•°å€¼æ˜¯ 0.85ã€‚</p>
</li>
<li>
<p>ç‰¹å¾ç»´åº¦ #555ï¼ˆå¯èƒ½æ˜¯å…³äºâ€œæƒ…æ„Ÿè‰²å½©â€ï¼‰ï¼šè¿™å¥è¯æ˜¯è­¦å‘Šæ€§è´¨ï¼Œå¸¦æœ‰è´Ÿé¢åæœæš—ç¤ºï¼Œæ•°å€¼å¯èƒ½æ˜¯ -0.6ã€‚</p>
</li>
<li>
<p>ç‰¹å¾ç»´åº¦ #999ï¼ˆå¯èƒ½æ˜¯å…³äºâ€œç¾é£Ÿ/çƒ¹é¥ªâ€ï¼‰ï¼šè¿™å¥è¯å’Œåƒçš„ä¸€ç‚¹å…³ç³»æ²¡æœ‰ï¼Œæ•°å€¼æ˜¯ 0.00ã€‚</p>
</li>
</ul>
<p>å°±è¿™æ ·ï¼Œæ¨¡å‹æŠŠè¿™å¥è¯ï¼Œå‹ç¼©æˆäº†ä¸€ä¸ª <strong>â€œé«˜å¼ºåˆ¶æ€§ + çº¯æŠ€æœ¯é¢†åŸŸ + è­¦å‘Šè¯­æ°”â€</strong> çš„æ•°å­¦åæ ‡ç‚¹ã€‚</p>
<p>è¿™ç§å¯Œå«ä¿¡æ¯é‡å’Œç‰¹å¾è¯„ä¼°çš„å‘é‡ï¼Œæœ‰ä¸€ä¸ªä¸“ä¸šåè¯ï¼Œå«ï¼šã€ç¨ å¯†å‘é‡ã€‘ã€‚</p>
<p><img src="https://pic.zhangshichun.top/pic/20260207213642250.png" alt="" loading="lazy"/></p>
<h3 data-id="heading-4">3.2 è¯ä¸å¥ï¼Œæµæ´¾ä¹‹åˆ†</h3>
<p>ä¹Ÿå°±æ˜¯åœ¨è¿™ä¸ªæ—¶å€™ï¼Œå¯¹äºæ–‡æœ¬çš„è®¡ç®—æ–¹æ³•ï¼Œè¡ç”Ÿå‡ºäº†ä¸¤ä¸ªæ€è·¯ï¼š</p>
<ul>
<li>æ€è·¯Aï¼šå…ˆæ‹†è¯ï¼Œç„¶åå¯¹æ¯ä¸ªè¯è¿›è¡Œå‘é‡åŒ–ã€‚
<ul>
<li>[æˆ‘] è®­ç»ƒä¸€ä¸ªå‘é‡</li>
<li>[å–œæ¬¢] è®­ç»ƒä¸€ä¸ªå‘é‡</li>
<li>[ä½ ] è®­ç»ƒä¸€ä¸ªå‘é‡</li>
<li>ç„¶åæŠŠä¸‰ä¸ªå‘é‡å½¢æˆä¸€ä¸ªçŸ©é˜µè¿›è¡Œå­˜å‚¨è®­ç»ƒã€‚</li>
<li>è¿™ç§æ€è·¯ï¼Œè¢«ç§°ä¸º è¯å‘é‡ (Word/Token Embedding)ã€‚</li>
</ul>
</li>
<li>æ€è·¯Bï¼šä¸æ‹†è¯ï¼Œå¯¹ä¸€æ•´å¥è¯è¿›è¡Œå‘é‡åŒ–ã€‚
<ul>
<li>[æˆ‘å–œæ¬¢ä½ ] å››ä¸ªå­—åªè®­ç»ƒå‡ºä¸€ä¸ªå‘é‡</li>
<li>è¿™ç§æ€è·¯ï¼Œå¥å‘é‡ è¢«ç§°ä¸º(Sentence Embedding)ã€‚</li>
</ul>
</li>
</ul>
<p>å“ªä¸ªæµæ´¾æ›´å‰å®³ï¼Ÿ
<img src="https://pic.zhangshichun.top/pic/20260207214053383.png" alt="" loading="lazy"/>
å¾ˆæ˜¾ç„¶ã€è¯å‘é‡ã€‘ç›¸å¯¹å¤æ‚ï¼Œç²’åº¦æ›´ç»†ã€‚å®ƒæ›´è´´åˆäººç±»è¯´è¯çš„ä¹ æƒ¯ï¼Œä¸€ä¸ªè¯ä¸€ä¸ªè¯çš„å­¦ä¹ ç†è§£ï¼Œä¸€ä¸ªè¯ä¸€ä¸ªè¯çš„ç»„è£…è¾“å‡ºã€‚</p>
<p>ã€è¯å‘é‡ã€‘æœ€ç»ˆè®­ç»ƒå‡ºäº†ç±»ä¼¼DeepSeekï¼ŒGeminiï¼ŒChatGPTè¿™æ ·è½°åŠ¨ä¸–ç•Œçš„å¤§æ¨¡å‹ï¼Œæ“…é•¿æ€è€ƒä»¥åŠå’Œäººç±»å¯¹è¯ã€‚</p>
<p>é‚£ä¹ˆï¼Œã€å¥å‘é‡ã€‘å°±ä¸€æ— æ˜¯å¤„å—ï¼Ÿ</p>
<p>ä¸æ˜¯çš„ï¼Œå…„å¼Ÿï¼Œä¸æ˜¯çš„ã€‚</p>
<p>ã€å¥å‘é‡ã€‘ä¹Ÿæœ‰å®ƒå‘å…‰å‘çƒ­çš„åœ°æ–¹ï¼Œå®ƒæ“…é•¿ä¸€æ•´æ®µä¸€æ•´æ®µçš„è¿›è¡Œæ–‡æœ¬æ£€ç´¢å’Œè¯­ä¹‰ç†è§£ã€‚</p>
<p>å› æ­¤ï¼Œåœ¨ç‰¹å®šé¢†åŸŸï¼Œå®ƒæ›´ä¸ºå¥½ç”¨ã€‚</p>
<p>æ²¡é”™ï¼Œæ­£æ˜¯æˆ‘ä»¬åé¢è¦ç€é‡è¦ä»‹ç»çš„åœºæ™¯ï¼š</p>
<p>ã€ç§æœ‰çŸ¥è¯†åº“ã€‘ã€‚</p>
<h2 data-id="heading-5">å››ã€ã€å¥å‘é‡ã€‘ï¼šå¤©ç”Ÿæˆ‘æå¿…æœ‰ç”¨</h2>
<p>å¦‚æœè¯´ï¼Œä½ ç°åœ¨æœ‰å¾ˆå¤šä¼ä¸šå†…éƒ¨çš„æ–‡æ¡£ï¼Œç§äººçš„æ–‡æ¡£éœ€è¦å½¢æˆä¸€ä¸ªçŸ¥è¯†åº“ï¼Œä½ å¹¶ä¸éœ€è¦å’Œè¿™ä¸ªæ–‡æ¡£å¯¹è¯ï¼Œè€Œæ˜¯èƒ½å¿«é€Ÿåœ°æ‰¾åˆ°æ–‡æ¡£ä¸­ç›¸å…³åº¦æœ€é«˜çš„ä½ç½®ã€‚</p>
<p>æ­¤æ—¶æ­¤åˆ»ï¼ŒåŸºäºä¸€å¥è¯è¿›è¡Œå‘é‡åŒ–çš„ã€å¥å‘é‡ã€‘åè€Œå…·å¤‡äº†ä¼˜åŠ¿ã€‚</p>
<p>å› ä¸ºå®ƒçš„å‘é‡å°±æ˜¯åŸºäºä¸€æ®µä¸€æ®µçš„è¯è¿›è¡Œç‰¹å¾æ ‡æ³¨çš„ã€‚</p>
<p>åœ¨å¿«é€Ÿæ£€ç´¢çŸ¥è¯†åŒºåŸŸè¿™æ–¹é¢ï¼Œã€å¥å‘é‡ã€‘ç›¸æ¯”äºã€è¯å‘é‡ã€‘æ‹¥æœ‰å¦‚ä¸‹ä¼˜ç‚¹:</p>
<ul>
<li>
<p>æ•°å­¦ä¸Šå¯è¡Œï¼šå®ƒæŠŠé•¿çŸ­ä¸ä¸€çš„æ–‡æœ¬ï¼Œå˜æˆäº†å›ºå®šé•¿åº¦çš„æ¡å½¢ç ï¼Œæ‰èƒ½ç®—è·ç¦»ã€‚</p>
</li>
<li>
<p>è¯­ä¹‰ä¸Šç²¾å‡†ï¼šå®ƒæå–çš„æ˜¯ä¸­å¿ƒæ€æƒ³ï¼Œè€Œä¸æ˜¯ç¢ç‰‡åŒ–çš„è¯ã€‚</p>
</li>
<li>
<p>å·¥ç¨‹ä¸Šæé€Ÿï¼šå®ƒè®©ç™¾ä¸‡çº§çš„æ£€ç´¢èƒ½åœ¨æ¯«ç§’çº§å®Œæˆã€‚</p>
</li>
</ul>
<p>æ‰€ä»¥ï¼Œã€å¥å‘é‡ã€‘å°±æˆä¸ºäº†ä¸€ç§ç”¨æ¥ä½œä¸ºç§æœ‰ææ–™åº“å’ŒçŸ¥è¯†åº“æ£€ç´¢çš„æŠ€æœ¯ã€‚</p>
<p>åªæ˜¯å•çº¯çš„æœ¬åœ°æ£€ç´¢ï¼Œæ˜¯ä¸æ˜¯å¤ªæ²¡æƒ³è±¡åŠ›äº†ï¼Ÿ</p>
<p>æ˜¯çš„ï¼Œæ£€ç´¢å‡ºæ¥ä¹‹åï¼Œå†æŠŠæ£€ç´¢åˆ°çš„å‡†ç¡®çš„æ–‡æœ¬å¡åˆ°å’ŒDeepSeekçš„å¯¹è¯é‡Œï¼Œå°†ä¼šäº§ç”Ÿæ›´å¼ºçš„æ•ˆæœã€‚</p>
<p><img src="https://pic.zhangshichun.top/pic/20260208095822333.png" alt="" loading="lazy"/></p>
<h2 data-id="heading-6">ä¸‹ä¸€æ­¥é¢„å‘Š</h2>
<p>ä¸‹èŠ‚è¯¾ï¼Œæˆ‘ä»¬å°†åŸºäºæœ¬ç« æˆ‘ä»¬å­¦ä¹ çš„ç†è®ºï¼Œæ¥æ¢³ç†RAGæ¶æ„å¿…è¦çš„æ¨¡å‹å’Œç»„ä»¶ï¼Œä»¥åŠéœ€è¦å“ªäº›æ­¥éª¤ã€‚</p>
<p>æ•¬è¯·æœŸå¾…ï¼</p>
<p><img src="https://pic.zhangshichun.top/pic/ScreenShot_2026-01-26_082327_821.png" alt="" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ¯”å®˜æ–¹è¿˜ä¾¿å®œï¼Riffusion éŸ³ä¹ API å¯¹æ¥è¯´æ˜]]></title>    <link>https://juejin.cn/post/7604678037808168996</link>    <guid>https://juejin.cn/post/7604678037808168996</guid>    <pubDate>2026-02-10T00:05:52.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604678037808168996" data-draft-id="7604678037808152612" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ¯”å®˜æ–¹è¿˜ä¾¿å®œï¼Riffusion éŸ³ä¹ API å¯¹æ¥è¯´æ˜"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-02-10T00:05:52.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å´”åº†æ‰ä¸¨é™è§…"/> <meta itemprop="url" content="https://juejin.cn/user/1521379821230269"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ¯”å®˜æ–¹è¿˜ä¾¿å®œï¼Riffusion éŸ³ä¹ API å¯¹æ¥è¯´æ˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1521379821230269/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å´”åº†æ‰ä¸¨é™è§…
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-10T00:05:52.000Z" title="Tue Feb 10 2026 00:05:52 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»31åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ¬æ–‡å°†ä»‹ç»ä¸€ç§ Riffusion Audios Generation API å¯¹æ¥è¯´æ˜ï¼Œå®ƒæ˜¯å¯ä»¥é€šè¿‡è¾“å…¥è‡ªå®šä¹‰å‚æ•°æ¥ç”Ÿæˆ Riffusion å®˜æ–¹çš„éŸ³ä¹ã€‚</p>
<h2 data-id="heading-0">ç”³è¯·æµç¨‹</h2>
<p>è¦ä½¿ç”¨ APIï¼Œéœ€è¦å…ˆåˆ° <a href="https://link.juejin.cn?target=https%3A%2F%2Fplatform.acedata.cloud%2Fdocuments%2Friffusion-audios" target="_blank" title="https://platform.acedata.cloud/documents/riffusion-audios" ref="nofollow noopener noreferrer">Riffusion Audios Generation API</a> å¯¹åº”é¡µé¢ç”³è¯·å¯¹åº”çš„æœåŠ¡ï¼Œè¿›å…¥é¡µé¢ä¹‹åï¼Œç‚¹å‡»ã€ŒAcquireã€æŒ‰é’®ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://cdn.acedata.cloud/q6ytrc.png" alt="" loading="lazy"/></p>
<p>å¦‚æœä½ å°šæœªç™»å½•æˆ–æ³¨å†Œï¼Œä¼šè‡ªåŠ¨è·³è½¬åˆ°ç™»å½•é¡µé¢é‚€è¯·æ‚¨æ¥æ³¨å†Œå’Œç™»å½•ï¼Œç™»å½•æ³¨å†Œä¹‹åä¼šè‡ªåŠ¨è¿”å›å½“å‰é¡µé¢ã€‚</p>
<p>åœ¨é¦–æ¬¡ç”³è¯·æ—¶ä¼šæœ‰å…è´¹é¢åº¦èµ é€ï¼Œå¯ä»¥å…è´¹ä½¿ç”¨è¯¥ APIã€‚</p>
<h2 data-id="heading-1">åŸºæœ¬ä½¿ç”¨</h2>
<p>æƒ³äº›ä»€ä¹ˆæ­Œæ›²ï¼Œå¯ä»¥ä»»æ„è¾“å…¥ä¸€æ®µæ–‡å­—ï¼Œæ¯”å¦‚æˆ‘æƒ³ç”Ÿæˆä¸€ä¸ªå…³äºåœ£è¯çš„æ­Œæ›²ï¼Œå°±å¯ä»¥è¾“å…¥ <code>a song for Christmas</code>ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://cdn.acedata.cloud/4i4ysn.png" width="600" class="m-auto" loading="lazy"/></p>
<p>å¯ä»¥çœ‹åˆ°è¿™é‡Œæˆ‘ä»¬è®¾ç½®äº† Request Headersï¼ŒåŒ…æ‹¬ï¼š</p>
<ul>
<li><code>accept</code>ï¼šæƒ³è¦æ¥æ”¶æ€æ ·æ ¼å¼çš„å“åº”ç»“æœï¼Œè¿™é‡Œå¡«å†™ä¸º <code>application/json</code>ï¼Œå³ JSON æ ¼å¼ã€‚</li>
<li><code>authorization</code>ï¼šè°ƒç”¨ API çš„å¯†é’¥ï¼Œç”³è¯·ä¹‹åå¯ä»¥ç›´æ¥ä¸‹æ‹‰é€‰æ‹©ã€‚</li>
</ul>
<p>å¦å¤– Request Body çš„å‚æ•°åŒ…æ‹¬ï¼š</p>
<ul>
<li><code>action</code>ï¼šæ­¤æ¬¡éŸ³ä¹ç”Ÿæˆä»»åŠ¡çš„è¡Œä¸ºï¼Œç”Ÿæˆæ­Œæ›²æ˜¯ <code>generate</code>ã€‚</li>
<li><code>model</code>ï¼šåˆ›å»ºæ­Œæ›²é‡‡ç”¨çš„æ¨¡å‹ï¼Œç›®å‰ä¸»è¦æœ‰ï¼š<strong>FUZZ-1.0</strong>ã€<strong>FUZZ-1.1</strong>ã€<strong>FUZZ-1.0 Pro</strong>ã€<strong>FUZZ-1.1 Pro</strong>ã€‚</li>
<li><code>lyric</code>ï¼šæ­Œæ›²çš„æ­Œè¯å†…å®¹ã€‚</li>
<li><code>custom</code>ï¼šæ˜¯å¦é‡‡ç”¨è‡ªå®šä¹‰æ–¹å¼ç”Ÿæˆæ­Œæ›²ã€‚</li>
<li><code>prompt</code>ï¼šçµæ„Ÿæ¨¡å¼ä¸‹çš„æç¤ºè¯ã€‚</li>
<li><code>style</code>ï¼šæ­Œæ›²é£æ ¼å‚æ•°ã€‚</li>
<li><code>title</code>ï¼šæ­Œæ›²æ ‡é¢˜ä¿¡æ¯ã€‚</li>
<li><code>callback_url</code>ï¼šéœ€è¦å›è°ƒç»“æœçš„ URLã€‚</li>
<li><code>instrumental</code>ï¼šæ˜¯å¦ä¸ºæ— æ­Œè¯æ¨¡å¼ã€‚</li>
</ul>
<p>å¦‚ä¸Šå‚æ•°å’Œå®˜æ–¹çš„è‡ªå®šä¹‰ç”Ÿæˆçš„æ˜ å°„å…³ç³»å¦‚ä¸‹ï¼š</p>
<ul>
<li><code>model</code>ï¼šå¯¹åº” Riffusion è´¦å·è®¾ç½®é¡µé¢çš„æ¨¡å‹é€‰æ‹©ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º</li>
<li><code>lyric</code>ï¼šå¯¹åº” Rifussion è‡ªå®šä¹‰ç”Ÿæˆé¡µé¢çš„ã€ŒLyricsã€éƒ¨åˆ†ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º</li>
<li><code>style</code>ï¼šå¯¹åº” Rifussion è‡ªå®šä¹‰ç”Ÿæˆé¡µé¢çš„ã€ŒSoundã€éƒ¨åˆ†ï¼Œå®é™…ä¸Šæ˜¯æŒ‡å®šä¸€äº›é£æ ¼ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º</li>
<li><code>title</code>ï¼šå¯¹åº” Rifussion è‡ªå®šä¹‰ç”Ÿæˆé¡µé¢çš„ã€ŒDetailsã€éƒ¨åˆ†ï¼Œç”¨äºæŒ‡å®šæ­Œæ›²æ ‡é¢˜ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º</li>
<li><code>instrumental</code>ï¼šå¯¹åº” Rifussion è‡ªå®šä¹‰ç”Ÿæˆé¡µé¢çš„ã€ŒInstrumentalã€å¼€å…³ï¼Œç”¨äºè®¾ç½®æ— æ­Œè¯æ¨¡å¼ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º</li>
</ul>
<p><img src="https://cdn.acedata.cloud/i68847.png" width="500" class="m-auto" loading="lazy"/></p>
<p><img src="https://cdn.acedata.cloud/eda26o.png" width="500" class="m-auto" loading="lazy"/></p>
<p>é€‰æ‹©ä¹‹åï¼Œå¯ä»¥å‘ç°å³ä¾§ä¹Ÿç”Ÿæˆäº†å¯¹åº”ä»£ç ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://cdn.acedata.cloud/0217zy.png" width="500" class="m-auto" loading="lazy"/></p>
<p>ç‚¹å‡»ã€ŒTryã€æŒ‰é’®å³å¯è¿›è¡Œæµ‹è¯•ï¼Œå¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œè¿™é‡Œæˆ‘ä»¬å°±å¾—åˆ°äº†å¦‚ä¸‹ç»“æœï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"success"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"task_id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"f45388a9-4169-41d4-aec8-fb8259c48d36"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"trace_id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"1df9f664-fd74-476b-8038-b0b5f62ddf87"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"data"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"02702b40-272d-4838-8644-675105930658"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"title"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Vibe"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"image_url"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://storage.googleapis.com/corpusant-app-public/riffs/e850008a-d9a1-4c8f-acbd-a37f228946bc/image/02702b40-272d-4838-8644-675105930658.jpg"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"lyric"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"[Intro]\nYeah, yeah\nKeep talking, keep talking\nI love the way you sound\n[Verse 1]\nYour voice is like a drug I can't put down\nEvery word you say just pulls me in\nI'm addicted to the way you laugh out loud\nAnd how you whisper when the room goes dim\nTell me 'bout your day, tell me 'bout your fears\nI could listen to you talk for years\n[Pre-Chorus]\nDon't stop now, don't you dare\nI need your voice filling up the air\n[Chorus]\nKeep talking, keep talking to me\nYour words are all I fucking need\nKeep talking, keep talking, I'm high\nOff every sound you make tonight\nKeep talking\n[Verse 2]\nYou could read the phone book, I don't care\nJust the rhythm of your breathing's enough\nWhen you say my name, it's like a prayer\nAnd your silence hits me twice as rough\nEvery conversation feels like home\nNever want to hear this dial tone\n[Pre-Chorus]\nDon't stop now, don't you dare\nI need your voice filling up the air\n[Chorus]\nKeep talking, keep talking to me\nYour words are all I fucking need\nKeep talking, keep talking, I'm high\nOff every sound you make tonight\nKeep talking\n[Bridge]\nWhen the world gets loud and crazy\nYour voice cuts through the noise\nYou're my favorite conversation\nYou're my drug of choice\nKeep talking, keep talking\nKeep talking, keep talking\nKeep talking, keep talking\nKeep talking, keep talking\n[Chorus]\nKeep talking, keep talking to me\nYour words are all I fucking need\nKeep talking, keep talking, I'm high\nOff every sound you make tonight\nKeep talking\n[Outro]\nYeah, yeah\nKeep talking, keep talking\nNever stop that sound"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"audio_url"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://storage.googleapis.com/corpusant-app-public/riffs/e850008a-d9a1-4c8f-acbd-a37f228946bc/audio/02702b40-272d-4838-8644-675105930658.m4a"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"video_url"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"created_at"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2025-06-18T15:47:54.705246Z"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"model"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"FUZZ-1.0"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"lyrics_timestamped"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"words"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
          <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">"text"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"[Intro]"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"start"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0.64</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"end"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0.64</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"line_index"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"index_range"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"wav2vec2_format"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span>
          <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
          ...
          <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">"text"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"sound"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"start"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">179.84</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"end"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">180.48</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"line_index"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">63</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"index_range"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"wav2vec2_format"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span>
          <span class="hljs-punctuation">}</span>
        <span class="hljs-punctuation">]</span>
      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"state"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"succeeded"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"style"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Pop, upbeat tempo, modern production"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"duration"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">181.12</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"be3fe757-621e-4017-9056-20aa7f01919e"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"title"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Revive"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"image_url"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://storage.googleapis.com/corpusant-app-public/riffs/e850008a-d9a1-4c8f-acbd-a37f228946bc/image/be3fe757-621e-4017-9056-20aa7f01919e.jpg"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"lyric"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"[Verse 1]\nI'm walking through the motions, moving day by day\nColors seem a little faded, nothing much to say\nFriends keep calling, asking if I'm doing fine\nBut I just smile and tell them everything's divine\n[Pre-Chorus]\nSomething's missing, can't quite name it\nFeels like I'm just going through the stages\n[Chorus]\nI'm barely breathing, barely feeling\nLike I'm floating through a life that isn't mine\nBarely breathing, barely healing\nSearching for a reason, searching for a sign\nTo feel alive again\nTo feel alive again\n[Verse 2]\nMorning coffee tastes like water, sunrise looks like rain\nEveryone around me laughs but I can't feel the same\nUsed to dance in silly moments, used to sing out loud\nNow I'm standing in the silence of a faceless crowd\n[Pre-Chorus]\nSomething's shifting, can't ignore it\nMaybe it's time to break these patterns\n[Chorus]\nI'm barely breathing, barely feeling\nLike I'm floating through a life that isn't mine\nBarely breathing, barely healing\nSearching for a reason, searching for a sign\nTo feel alive again\nTo feel alive again\n[Bridge]\nBut there's a beating in my chest\nA whisper saying \"don't give up yet\"\nMaybe tomorrow I'll remember\nHow to laugh and how to let\nMy heart wake up from this long sleep\nFind the fire I used to keep\n[Chorus]\nI'm barely breathing, barely feeling\nLike I'm floating through a life that isn't mine\nBarely breathing, barely healing\nSearching for a reason, searching for a sign\nTo feel alive again\nTo feel alive again\n[Outro]\nI'm gonna feel alive again\nI'm gonna feel alive again"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"audio_url"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://storage.googleapis.com/corpusant-app-public/riffs/e850008a-d9a1-4c8f-acbd-a37f228946bc/audio/be3fe757-621e-4017-9056-20aa7f01919e.m4a"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"video_url"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"created_at"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2025-06-18T15:48:01.139081Z"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"model"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"FUZZ-1.0"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"lyrics_timestamped"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"words"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
          <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">"text"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"[Verse"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"start"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0.64</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"end"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0.64</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"line_index"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"index_range"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"wav2vec2_format"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span>
          <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
          ...
          <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">"text"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"again"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"start"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">202.88</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"end"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">211.84</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"line_index"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">54</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"index_range"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"wav2vec2_format"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span>
          <span class="hljs-punctuation">}</span>
        <span class="hljs-punctuation">]</span>
      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"state"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"succeeded"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"style"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Pop, upbeat tempo, clean production, emotional vocals"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"duration"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">211.84</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>è¿”å›ç»“æœä¸€å…±æœ‰å¤šä¸ªå­—æ®µï¼Œä»‹ç»å¦‚ä¸‹ï¼š</p>
<ul>
<li><code>success</code>ï¼Œæ­¤æ—¶éŸ³ä¹ç”Ÿæˆä»»åŠ¡çš„çŠ¶æ€æƒ…å†µã€‚
<ul>
<li><code>data</code>ï¼Œæ­¤æ¬¡éŸ³ä¹ä»»åŠ¡çš„ç»“æœ - <code>id</code>ï¼Œæ­¤æ—¶éŸ³ä¹ç”Ÿæˆä»»åŠ¡çš„ IDã€‚
<ul>
<li><code>prompt</code>ï¼Œæ­¤æ—¶éŸ³ä¹ç”Ÿæˆä»»åŠ¡çš„æç¤ºè¯ã€‚</li>
<li><code>audio_url</code>ï¼Œæ­¤æ—¶éŸ³ä¹ç”Ÿæˆä»»åŠ¡çš„éŸ³é¢‘é“¾æ¥ã€‚</li>
<li><code>image_url</code>ï¼Œæ­¤æ—¶éŸ³ä¹ç”Ÿæˆä»»åŠ¡çš„å°é¢é“¾æ¥ã€‚</li>
<li><code>state</code>ï¼Œæ­¤æ—¶éŸ³ä¹ç”Ÿæˆä»»åŠ¡çš„çŠ¶æ€ã€‚</li>
<li><code>duration</code>ï¼Œæ­¤æ—¶éŸ³ä¹çš„æ—¶é•¿ä¿¡æ¯ã€‚</li>
<li><code>style</code>ï¼Œæ­¤æ—¶éŸ³ä¹çš„é£æ ¼ä¿¡æ¯ã€‚</li>
<li><code>model</code>ï¼Œæ­¤æ—¶éŸ³ä¹ç”Ÿæˆä»»åŠ¡é‡‡ç”¨çš„æ¨¡å‹ä¿¡æ¯ã€‚</li>
<li><code>lyric</code>ï¼Œæ­¤æ—¶éŸ³ä¹ç”Ÿæˆä»»åŠ¡çš„æ­Œè¯ä¿¡æ¯ã€‚</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>å¯ä»¥çœ‹åˆ°æˆ‘ä»¬å¾—åˆ°äº†æƒ³ç”Ÿæˆçš„éŸ³ä¹ä¿¡æ¯ï¼Œæˆ‘ä»¬åªéœ€è¦æ ¹æ®ç»“æœä¸­ <code>data</code> çš„éŸ³ä¹é“¾æ¥åœ°å€è·å–ç”Ÿæˆçš„ Riffusion éŸ³ä¹å³å¯ã€‚</p>
<p>å¦å¤–å¦‚æœæƒ³ç”Ÿæˆå¯¹åº”çš„å¯¹æ¥ä»£ç ï¼Œå¯ä»¥ç›´æ¥å¤åˆ¶ç”Ÿæˆï¼Œä¾‹å¦‚ CURL çš„ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-shell" lang="shell">curl -X POST 'https://api.acedata.cloud/riffusion/audios' \
-H 'accept: application/json' \
-H 'authorization: Bearer {token}' \
-H 'content-type: application/json' \
-d '{
  "model": "FUZZ-1.0",
  "action": "generate",
  "prompt": "A song for Christmas"
}'
</code></pre>
<h2 data-id="heading-2">è‡ªå®šä¹‰ç”Ÿæˆ</h2>
<p>å¦‚æœæƒ³è‡ªå®šä¹‰ç”Ÿæˆæ­Œè¯ï¼Œå¯ä»¥è¾“å…¥æ­Œè¯ï¼š</p>
<p>è¿™æ—¶å€™ <code>lyric</code> å­—æ®µå¯ä»¥ä¼ å…¥ç±»ä¼¼å¦‚ä¸‹å†…å®¹ï¼š</p>
<pre><code class="hljs language-vbnet" lang="vbnet">[Verse]Woke up <span class="hljs-keyword">with</span> the sun <span class="hljs-keyword">in</span> my eyesNo clouds above just blue <span class="hljs-keyword">in</span> the skiesShoes <span class="hljs-keyword">on</span> my feet Iâ€™m ready <span class="hljs-keyword">to</span> runEvery <span class="hljs-keyword">step</span> feels <span class="hljs-built_in">like</span> a loaded gun[Chorus]Happy days are rolling inLet the joy beneath my skinNo more <span class="hljs-keyword">shadows</span> no more liesJust the truth that lifts <span class="hljs-keyword">me</span> high[Verse <span class="hljs-number">2</span>]Dancing through the city streetsA rhythm pounding <span class="hljs-keyword">in</span> my heartbeatStrangers smile itâ€™s catching onThis worldâ€™s a stage weâ€™re all a song[Chorus]Happy days are rolling inLet the joy beneath my skinNo more <span class="hljs-keyword">shadows</span> no more liesJust the truth that lifts <span class="hljs-keyword">me</span> high[Bridge]<span class="hljs-keyword">Throw</span> your worries out the doorLet them sink <span class="hljs-keyword">to</span> the ocean floorWeâ€™re alive <span class="hljs-built_in">and</span> itâ€™s enoughLife <span class="hljs-built_in">is</span> messy but itâ€™s love[Chorus]Happy days are rolling inLet the joy beneath my skinNo more <span class="hljs-keyword">shadows</span> no more liesJust the truth that lifts <span class="hljs-keyword">me</span> high
</code></pre>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬è¦æ ¹æ®æ­Œè¯ã€æ ‡é¢˜ã€é£æ ¼è‡ªå®šä¹‰ç”Ÿæˆæ­Œæ›²ï¼Œå°±å¯ä»¥æŒ‡å®šå¦‚ä¸‹å†…å®¹ï¼š</p>
<ul>
<li>lyricï¼šæ­Œè¯æ–‡æœ¬</li>
<li>customï¼šå¡«å†™ä¸º <code>true</code>ï¼Œä»£è¡¨è‡ªå®šä¹‰ç”Ÿæˆï¼Œè¯¥å‚æ•°é»˜è®¤ä¸º falseï¼Œä»£è¡¨ä½¿ç”¨ <code>prompt</code> ç”Ÿæˆã€‚</li>
<li>titleï¼šæ­Œæ›²çš„æ ‡é¢˜ã€‚</li>
<li>styleï¼šæ­Œæ›²çš„é£æ ¼ï¼Œé€‰å¡«ã€‚</li>
</ul>
<p>å¡«å†™æ ·ä¾‹å¦‚ä¸‹ï¼š</p>
<p><img src="https://cdn.acedata.cloud/ny4n7m.png" width="500" class="m-auto" loading="lazy"/></p>
<p>å¡«å†™å®Œæ¯•ä¹‹åè‡ªåŠ¨ç”Ÿæˆäº†ä»£ç å¦‚ä¸‹ï¼š</p>
<p><img src="https://cdn.acedata.cloud/hm9gtn.png" width="500" class="m-auto" loading="lazy"/></p>
<p>å¯¹åº”çš„ä»£ç ï¼š</p>
<pre><code class="hljs language-shell" lang="shell">curl -X POST 'https://api.acedata.cloud/riffusion/audios' \
-H 'accept: application/json' \
-H 'authorization: Bearer {token}' \
-H 'content-type: application/json' \
-d '{
  "model": "FUZZ-1.0",
  "action": "generate",
  "lyric": "[Verse]\nWoke up with the sun in my eyes\nNo clouds above just blue in the skies\nShoes on my feet Iâ€™m ready to run\nEvery step feels like a loaded gun\n[Chorus]\nHappy days are rolling in\nLet the joy beneath my skin\nNo more shadows no more lies\nJust the truth that lifts me high\n[Verse 2]\nDancing through the city streets\nA rhythm pounding in my heartbeat\nStrangers smile itâ€™s catching on\nThis worldâ€™s a stage weâ€™re all a song\n[Chorus]\nHappy days are rolling in\nLet the joy beneath my skin\nNo more shadows no more lies\nJust the truth that lifts me high\n[Bridge]\nThrow your worries out the door\nLet them sink to the ocean floor\nWeâ€™re alive and itâ€™s enough\nLife is messy but itâ€™s love\n[Chorus]\nHappy days are rolling in\nLet the joy beneath my skin\nNo more shadows no more lies\nJust the truth that lifts me high",
  "custom": true
}'
</code></pre>
<p>æµ‹è¯•å…è®¸ï¼Œç”Ÿæˆçš„æ•ˆæœæ˜¯ç±»ä¼¼çš„ã€‚</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"success"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"task_id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"978c2912-6a90-4048-b4c1-43f9cf18c28d"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"trace_id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"08dfbb99-43ce-4f65-8fd1-74b98f2b121a"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"data"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
        <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"eac9ab69-e210-490b-9f8d-095a6f074f40"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"title"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"VibeRise"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"image_url"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://storage.googleapis.com/corpusant-app-public/riffs/3f3e1354-52ad-4f5b-902c-5f83abd17def/image/eac9ab69-e210-490b-9f8d-095a6f074f40.jpg"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"lyric"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"[Verse]\nWoke up with the sun in my eyes\nNo clouds above just blue in the skies\nShoes on my feet Iâ€™m ready to run\nEvery step feels like a loaded gun\n[Chorus]\nHappy days are rolling in\nLet the joy beneath my skin\nNo more shadows no more lies\nJust the truth that lifts me high\n[Verse 2]\nDancing through the city streets\nA rhythm pounding in my heartbeat\nStrangers smile itâ€™s catching on\nThis worldâ€™s a stage weâ€™re all a song\n[Chorus]\nHappy days are rolling in\nLet the joy beneath my skin\nNo more shadows no more lies\nJust the truth that lifts me high\n[Bridge]\nThrow your worries out the door\nLet them sink to the ocean floor\nWeâ€™re alive and itâ€™s enough\nLife is messy but itâ€™s love\n[Chorus]\nHappy days are rolling in\nLet the joy beneath my skin\nNo more shadows no more lies\nJust the truth that lifts me high"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"audio_url"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://storage.googleapis.com/corpusant-app-public/riffs/3f3e1354-52ad-4f5b-902c-5f83abd17def/audio/eac9ab69-e210-490b-9f8d-095a6f074f40.m4a"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"video_url"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"created_at"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2025-06-23T01:57:33.438644Z"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"model"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"FUZZ-1.0"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"lyrics_timestamped"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
                <span class="hljs-attr">"words"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
                    <span class="hljs-punctuation">{</span>
                        <span class="hljs-attr">"end"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0.64</span><span class="hljs-punctuation">,</span>
                        <span class="hljs-attr">"index_range"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span>
                        <span class="hljs-attr">"line_index"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
                        <span class="hljs-attr">"start"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0.64</span><span class="hljs-punctuation">,</span>
                        <span class="hljs-attr">"text"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"[Verse]"</span><span class="hljs-punctuation">,</span>
                        <span class="hljs-attr">"wav2vec2_format"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span>
                    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
                    <span class="hljs-punctuation">{</span>
                        <span class="hljs-attr">"end"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0.64</span><span class="hljs-punctuation">,</span>
                        <span class="hljs-attr">"index_range"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span>
                        <span class="hljs-attr">"line_index"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span>
                        <span class="hljs-attr">"start"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0.64</span><span class="hljs-punctuation">,</span>
                        <span class="hljs-attr">"text"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Woke"</span><span class="hljs-punctuation">,</span>
                        <span class="hljs-attr">"wav2vec2_format"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span>
                    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
                    ...
                <span class="hljs-punctuation">]</span>
            <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"state"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"succeeded"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"style"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"funk vibes, raspy, raw vocal texture"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"duration"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">158.08</span>
        <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
        <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"64fffe1f-b1aa-46dc-8012-b80ba319cf35"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"title"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Pure Dawn"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"image_url"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://storage.googleapis.com/corpusant-app-public/riffs/3f3e1354-52ad-4f5b-902c-5f83abd17def/image/64fffe1f-b1aa-46dc-8012-b80ba319cf35.jpg"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"lyric"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"[Verse]\nWoke up with the sun in my eyes\nNo clouds above just blue in the skies\nShoes on my feet Iâ€™m ready to run\nEvery step feels like a loaded gun\n[Chorus]\nHappy days are rolling in\nLet the joy beneath my skin\nNo more shadows no more lies\nJust the truth that lifts me high\n[Verse 2]\nDancing through the city streets\nA rhythm pounding in my heartbeat\nStrangers smile itâ€™s catching on\nThis worldâ€™s a stage weâ€™re all a song\n[Chorus]\nHappy days are rolling in\nLet the joy beneath my skin\nNo more shadows no more lies\nJust the truth that lifts me high\n[Bridge]\nThrow your worries out the door\nLet them sink to the ocean floor\nWeâ€™re alive and itâ€™s enough\nLife is messy but itâ€™s love\n[Chorus]\nHappy days are rolling in\nLet the joy beneath my skin\nNo more shadows no more lies\nJust the truth that lifts me high"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"audio_url"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://storage.googleapis.com/corpusant-app-public/riffs/3f3e1354-52ad-4f5b-902c-5f83abd17def/audio/64fffe1f-b1aa-46dc-8012-b80ba319cf35.m4a"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"video_url"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"created_at"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2025-06-23T01:57:33.963497Z"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"model"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"FUZZ-1.0"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"lyrics_timestamped"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
                <span class="hljs-attr">"words"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
                    <span class="hljs-punctuation">{</span>
                        <span class="hljs-attr">"end"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0.64</span><span class="hljs-punctuation">,</span>
                        <span class="hljs-attr">"index_range"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span>
                        <span class="hljs-attr">"line_index"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
                        <span class="hljs-attr">"start"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0.64</span><span class="hljs-punctuation">,</span>
                        <span class="hljs-attr">"text"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"[Verse]"</span><span class="hljs-punctuation">,</span>
                        <span class="hljs-attr">"wav2vec2_format"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span>
                    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
                    <span class="hljs-punctuation">{</span>
                        <span class="hljs-attr">"end"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0.64</span><span class="hljs-punctuation">,</span>
                        <span class="hljs-attr">"index_range"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span>
                        <span class="hljs-attr">"line_index"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span>
                        <span class="hljs-attr">"start"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0.64</span><span class="hljs-punctuation">,</span>
                        <span class="hljs-attr">"text"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Woke"</span><span class="hljs-punctuation">,</span>
                        <span class="hljs-attr">"wav2vec2_format"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span>
                    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
                    ...
                <span class="hljs-punctuation">]</span>
            <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"state"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"succeeded"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"style"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"contemporary country"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"duration"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">175.36</span>
        <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h2 data-id="heading-3">ç¿»å”±æ­Œæ›²</h2>
<p>å¦‚æœæƒ³å¯¹å·²ç»ç”Ÿæˆçš„æ­Œæ›²è¿›è¡Œç¿»å”±æ“ä½œçš„æ“ä½œï¼Œå¯ä»¥è¾“å…¥ä¸Šæ–‡ç”Ÿæˆçš„æ­Œæ›²è¿›è¡Œç¿»å”±ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬è¦æ ¹æ®æ­Œè¯ã€æ ‡é¢˜ã€é£æ ¼è‡ªå®šä¹‰ç”Ÿæˆæ­Œæ›²ã€‚</p>
<p>å¦‚æœæƒ³å¯¹è‡ªå·±ä¸Šä¼ çš„æ­Œæ›²è¿›è¡Œç»§ç»­ç¿»å”±çš„è¯ï¼Œå¯ä»¥å°†å‚æ•° <code>action</code> è®¾ç½®ä¸º <code>upload_cover</code> ï¼Œå¹¶ä¸”è¾“å…¥éœ€è¦ç»§ç»­ç¿»å”±è‡ªå®šä¹‰ä¸Šä¼ çš„æ­Œæ›² IDï¼Œæ­Œæ›² ID çš„è·å–æ˜¯ä½¿ç”¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fplatform.acedata.cloud%2Fdocuments%2F76d79f86-39af-4034-8c6a-51e4a819308d%3Finviter_id%3Db87f67c1-b04f-4332-99a1-7a5e651331c6%3Finviter_id%3Db87f67c1-b04f-4332-99a1-7a5e651331c6%3Finviter_id%3Db87f67c1-b04f-4332-99a1-7a5e651331c6%3Finviter_id%3Db87f67c1-b04f-4332-99a1-7a5e651331c6%3Finviter_id%3Db87f67c1-b04f-4332-99a1-7a5e651331c6" target="_blank" title="https://platform.acedata.cloud/documents/76d79f86-39af-4034-8c6a-51e4a819308d?inviter_id=b87f67c1-b04f-4332-99a1-7a5e651331c6?inviter_id=b87f67c1-b04f-4332-99a1-7a5e651331c6?inviter_id=b87f67c1-b04f-4332-99a1-7a5e651331c6?inviter_id=b87f67c1-b04f-4332-99a1-7a5e651331c6?inviter_id=b87f67c1-b04f-4332-99a1-7a5e651331c6" ref="nofollow noopener noreferrer">Riffusion Upload API</a>æ¥è·å–ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://cdn.acedata.cloud/z7r5fd.png" width="500" class="m-auto" loading="lazy"/></p>
<p>å°±å¯ä»¥æŒ‡å®šå¦‚ä¸‹å†…å®¹ï¼š</p>
<ul>
<li>actionï¼šæ­¤æ¬¡æ­Œæ›²ä»»åŠ¡çš„è¡Œä¸ºï¼Œç›®å‰æ”¯æŒï¼šgenerateã€coverã€extendã€upload_coverã€upload_extendã€replace_sectionã€upload_replace_sectionã€swap_vocalsã€upload_swap_vocalsã€swap_soundã€upload_swap_soundï¼Œæ­¤æ¬¡ç¿»å”±ä½¿ç”¨<code>cover</code>å‚æ•°ã€‚</li>
<li>lyricï¼šæ­Œè¯æ–‡æœ¬</li>
<li>titleï¼šæ­Œæ›²çš„æ ‡é¢˜ã€‚</li>
<li>audio_idï¼šéœ€è¦ç¿»å”±æ­Œæ›²çš„æ­Œæ›²IDã€‚</li>
<li>styleï¼šæ­Œæ›²çš„é£æ ¼ï¼Œé€‰å¡«ã€‚</li>
</ul>
<p>å¡«å†™æ ·ä¾‹å¦‚ä¸‹ï¼š</p>
<p><img src="https://cdn.acedata.cloud/e5egk2.png" width="500" class="m-auto" loading="lazy"/></p>
<p>å¡«å†™å®Œæ¯•ä¹‹åè‡ªåŠ¨ç”Ÿæˆäº†ä»£ç å¦‚ä¸‹ï¼š</p>
<p><img src="https://cdn.acedata.cloud/u0ei5u.png" width="500" class="m-auto" loading="lazy"/></p>
<p>å¯¹åº”çš„ä»£ç ï¼š</p>
<pre><code class="hljs language-shell" lang="shell">curl -X POST 'https://api.acedata.cloud/riffusion/audios' \
-H 'accept: application/json' \
-H 'authorization: Bearer {token}' \
-H 'content-type: application/json' \
-d '{
  "action": "cover",
  "model": "FUZZ-1.0 Pro",
  "lyric": "[Verse]\nWoke up with the sun in my eyes\nNo clouds above just blue in the skies\nShoes on my feet Iâ€™m ready to run\nEvery step feels like a loaded gun\n[Chorus]\nHappy days are rolling in\nLet the joy beneath my skin\nNo more shadows no more lies\nJust the truth that lifts me high\n[Verse 2]\nDancing through the city streets\nA rhythm pounding in my heartbeat\nStrangers smile itâ€™s catching on\nThis worldâ€™s a stage weâ€™re all a song\n[Chorus]\nHappy days are rolling in\nLet the joy beneath my skin\nNo more shadows no more lies\nJust the truth that lifts me high\n[Bridge]\nThrow your worries out the door\nLet them sink to the ocean floor\nWeâ€™re alive and itâ€™s enough\nLife is messy but itâ€™s love\n[Chorus]\nHappy days are rolling in\nLet the joy beneath my skin\nNo more shadows no more lies\nJust the truth that lifts me high",
  "audio_id": "b7376272-3902-49b4-a83b-62f7e6ab505c"
}'
</code></pre>
<p>æµ‹è¯•å…è®¸ï¼Œç”Ÿæˆçš„æ•ˆæœæ˜¯ç±»ä¼¼çš„ã€‚</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"success"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"task_id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"fe02997d-f58e-4886-9aa3-4074c9a430eb"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"trace_id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"997bde4c-6063-4fc2-9b03-d837f1efc72d"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"data"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
        <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"be254182-d4b7-42b3-9ee2-b86db086cff1"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"title"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Sunny Rise"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"image_url"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://storage.googleapis.com/corpusant-app-public/riffs/c2f707a9-017d-4354-8bfa-436266dadbf6/image/be254182-d4b7-42b3-9ee2-b86db086cff1.jpg"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"lyric"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"[Verse]\nWoke up with the sun in my eyes\nNo clouds above just blue in the skies\nShoes on my feet Iâ€™m ready to run\nEvery step feels like a loaded gun\n[Chorus]\nHappy days are rolling in\nLet the joy beneath my skin\nNo more shadows no more lies\nJust the truth that lifts me high\n[Verse 2]\nDancing through the city streets\nA rhythm pounding in my heartbeat\nStrangers smile itâ€™s catching on\nThis worldâ€™s a stage weâ€™re all a song\n[Chorus]\nHappy days are rolling in\nLet the joy beneath my skin\nNo more shadows no more lies\nJust the truth that lifts me high\n[Bridge]\nThrow your worries out the door\nLet them sink to the ocean floor\nWeâ€™re alive and itâ€™s enough\nLife is messy but itâ€™s love\n[Chorus]\nHappy days are rolling in\nLet the joy beneath my skin\nNo more shadows no more lies\nJust the truth that lifts me high"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"audio_url"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://storage.googleapis.com/corpusant-app-public/riffs/c2f707a9-017d-4354-8bfa-436266dadbf6/audio/be254182-d4b7-42b3-9ee2-b86db086cff1.m4a"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"video_url"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"created_at"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2025-06-23T01:59:17.666629Z"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"model"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"lyrics_timestamped"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
                <span class="hljs-attr">"words"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
                    <span class="hljs-punctuation">{</span>
                        <span class="hljs-attr">"end"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0.64</span><span class="hljs-punctuation">,</span>
                        <span class="hljs-attr">"index_range"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span>
                        <span class="hljs-attr">"line_index"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
                        <span class="hljs-attr">"start"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0.64</span><span class="hljs-punctuation">,</span>
                        <span class="hljs-attr">"text"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"[Verse]"</span><span class="hljs-punctuation">,</span>
                        <span class="hljs-attr">"wav2vec2_format"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span>
                    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
                    ...
                    <span class="hljs-punctuation">{</span>
                        <span class="hljs-attr">"end"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">237.44</span><span class="hljs-punctuation">,</span>
                        <span class="hljs-attr">"index_range"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span>
                        <span class="hljs-attr">"line_index"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">29</span><span class="hljs-punctuation">,</span>
                        <span class="hljs-attr">"start"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">236.8</span><span class="hljs-punctuation">,</span>
                        <span class="hljs-attr">"text"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"high"</span><span class="hljs-punctuation">,</span>
                        <span class="hljs-attr">"wav2vec2_format"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span>
                    <span class="hljs-punctuation">}</span>
                <span class="hljs-punctuation">]</span>
            <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"state"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"succeeded"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"style"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">""</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"duration"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">239.46235827664398</span>
        <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
        <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"9b9d2810-eb2b-44d3-85c0-cb259afa13c3"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"title"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Uplift"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"image_url"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://storage.googleapis.com/corpusant-app-public/riffs/c2f707a9-017d-4354-8bfa-436266dadbf6/image/9b9d2810-eb2b-44d3-85c0-cb259afa13c3.jpg"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"lyric"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"[Verse]\nWoke up with the sun in my eyes\nNo clouds above just blue in the skies\nShoes on my feet Iâ€™m ready to run\nEvery step feels like a loaded gun\n[Chorus]\nHappy days are rolling in\nLet the joy beneath my skin\nNo more shadows no more lies\nJust the truth that lifts me high\n[Verse 2]\nDancing through the city streets\nA rhythm pounding in my heartbeat\nStrangers smile itâ€™s catching on\nThis worldâ€™s a stage weâ€™re all a song\n[Chorus]\nHappy days are rolling in\nLet the joy beneath my skin\nNo more shadows no more lies\nJust the truth that lifts me high\n[Bridge]\nThrow your worries out the door\nLet them sink to the ocean floor\nWeâ€™re alive and itâ€™s enough\nLife is messy but itâ€™s love\n[Chorus]\nHappy days are rolling in\nLet the joy beneath my skin\nNo more shadows no more lies\nJust the truth that lifts me high"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"audio_url"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://storage.googleapis.com/corpusant-app-public/riffs/c2f707a9-017d-4354-8bfa-436266dadbf6/audio/9b9d2810-eb2b-44d3-85c0-cb259afa13c3.m4a"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"video_url"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"created_at"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2025-06-23T01:59:23.065712Z"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"model"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"lyrics_timestamped"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
                <span class="hljs-attr">"words"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
                    <span class="hljs-punctuation">{</span>
                        <span class="hljs-attr">"end"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0.64</span><span class="hljs-punctuation">,</span>
                        <span class="hljs-attr">"index_range"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span>
                        <span class="hljs-attr">"line_index"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
                        <span class="hljs-attr">"start"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0.64</span><span class="hljs-punctuation">,</span>
                        <span class="hljs-attr">"text"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"[Verse]"</span><span class="hljs-punctuation">,</span>
                        <span class="hljs-attr">"wav2vec2_format"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span>
                    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
                    ...
                    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
                    <span class="hljs-punctuation">{</span>
                        <span class="hljs-attr">"end"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">236.16</span><span class="hljs-punctuation">,</span>
                        <span class="hljs-attr">"index_range"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span>
                        <span class="hljs-attr">"line_index"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">29</span><span class="hljs-punctuation">,</span>
                        <span class="hljs-attr">"start"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">225.28</span><span class="hljs-punctuation">,</span>
                        <span class="hljs-attr">"text"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"high"</span><span class="hljs-punctuation">,</span>
                        <span class="hljs-attr">"wav2vec2_format"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span>
                    <span class="hljs-punctuation">}</span>
                <span class="hljs-punctuation">]</span>
            <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"state"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"succeeded"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"style"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">""</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"duration"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">239.5299546485261</span>
        <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h2 data-id="heading-4">ç»­å†™æ­Œæ›²</h2>
<p>å¦‚æœæƒ³ç»­å†™æ­Œæ›²çš„è¯ï¼Œæˆ‘ä»¬éœ€è¦ä¼ å…¥<code>action</code>å‚æ•°å€¼ä¸ºï¼š<code>extend</code>ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬è¦æ ¹æ®æ­Œè¯ã€æ ‡é¢˜ã€é£æ ¼è‡ªå®šä¹‰ç”Ÿæˆæ­Œæ›²ã€‚</p>
<p>å¦‚æœæƒ³å¯¹è‡ªå·±ä¸Šä¼ çš„æ­Œæ›²è¿›è¡Œç»§ç»­ç»­å†™çš„è¯ï¼Œå¯ä»¥å°†å‚æ•° <code>action</code> è®¾ç½®ä¸º <code>upload_extend</code> ï¼Œå¹¶ä¸”è¾“å…¥éœ€è¦ç»§ç»­ç»­å†™è‡ªå®šä¹‰ä¸Šä¼ çš„æ­Œæ›² IDï¼Œæ­Œæ›² ID çš„è·å–æ˜¯ä½¿ç”¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fplatform.acedata.cloud%2Fdocuments%2F76d79f86-39af-4034-8c6a-51e4a819308d%3Finviter_id%3Db87f67c1-b04f-4332-99a1-7a5e651331c6%3Finviter_id%3Db87f67c1-b04f-4332-99a1-7a5e651331c6%3Finviter_id%3Db87f67c1-b04f-4332-99a1-7a5e651331c6%3Finviter_id%3Db87f67c1-b04f-4332-99a1-7a5e651331c6%3Finviter_id%3Db87f67c1-b04f-4332-99a1-7a5e651331c6" target="_blank" title="https://platform.acedata.cloud/documents/76d79f86-39af-4034-8c6a-51e4a819308d?inviter_id=b87f67c1-b04f-4332-99a1-7a5e651331c6?inviter_id=b87f67c1-b04f-4332-99a1-7a5e651331c6?inviter_id=b87f67c1-b04f-4332-99a1-7a5e651331c6?inviter_id=b87f67c1-b04f-4332-99a1-7a5e651331c6?inviter_id=b87f67c1-b04f-4332-99a1-7a5e651331c6" ref="nofollow noopener noreferrer">Riffusion Upload API</a>æ¥è·å–ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://cdn.acedata.cloud/z7r5fd.png" width="500" class="m-auto" loading="lazy"/></p>
<p>å°±å¯ä»¥æŒ‡å®šå¦‚ä¸‹å†…å®¹ï¼š</p>
<ul>
<li>actionï¼šæ­¤æ¬¡æ­Œæ›²ä»»åŠ¡çš„è¡Œä¸ºï¼Œç›®å‰æ”¯æŒï¼šgenerateã€coverã€extendã€upload_coverã€upload_extendã€replace_sectionã€upload_replace_sectionã€swap_vocalsã€upload_swap_vocalsã€swap_soundã€upload_swap_soundï¼Œæ­¤æ¬¡ç»­å†™ä½¿ç”¨<code>extend</code>å‚æ•°ã€‚</li>
<li>lyricï¼šæ­Œè¯æ–‡æœ¬</li>
<li>titleï¼šæ­Œæ›²çš„æ ‡é¢˜ã€‚</li>
<li>audio_idï¼šæ­Œæ›²çš„IDã€‚</li>
<li>styleï¼šæ­Œæ›²çš„é£æ ¼ï¼Œé€‰å¡«ã€‚</li>
</ul>
<p>å¡«å†™æ ·ä¾‹å¦‚ä¸‹ï¼š</p>
<p><img src="https://cdn.acedata.cloud/1im68k.png" width="500" class="m-auto" loading="lazy"/></p>
<p>å¡«å†™å®Œæ¯•ä¹‹åè‡ªåŠ¨ç”Ÿæˆäº†ä»£ç å¦‚ä¸‹ï¼š</p>
<p><img src="https://cdn.acedata.cloud/yctbdk.png" width="500" class="m-auto" loading="lazy"/></p>
<p>å¯¹åº”çš„ä»£ç ï¼š</p>
<pre><code class="hljs language-shell" lang="shell">curl -X POST 'https://api.acedata.cloud/riffusion/audios' \
-H 'accept: application/json' \
-H 'authorization: Bearer {token}' \
-H 'content-type: application/json' \
-d '{
  "action": "extend",
  "model": "FUZZ-1.0 Pro",
  "lyric": "[Verse]\nWoke up with the sun in my eyes\nNo clouds above just blue in the skies\nShoes on my feet Iâ€™m ready to run\nEvery step feels like a loaded gun\n[Chorus]\nHappy days are rolling in\nLet the joy beneath my skin\nNo more shadows no more lies\nJust the truth that lifts me high\n[Verse 2]\nDancing through the city streets\nA rhythm pounding in my heartbeat\nStrangers smile itâ€™s catching on\nThis worldâ€™s a stage weâ€™re all a song\n[Chorus]\nHappy days are rolling in\nLet the joy beneath my skin\nNo more shadows no more lies\nJust the truth that lifts me high\n[Bridge]\nThrow your worries out the door\nLet them sink to the ocean floor\nWeâ€™re alive and itâ€™s enough\nLife is messy but itâ€™s love\n[Chorus]\nHappy days are rolling in\nLet the joy beneath my skin\nNo more shadows no more lies\nJust the truth that lifts me high",
  "audio_id": "b7376272-3902-49b4-a83b-62f7e6ab505c",
  "continue_at": 5
}'
</code></pre>
<p>æµ‹è¯•å…è®¸ï¼Œç”Ÿæˆçš„æ•ˆæœæ˜¯ç±»ä¼¼çš„ã€‚</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"success"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"task_id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"6388a0aa-b5ab-4485-baad-f0e0b7a7848c"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"trace_id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"da143dbe-8263-45ac-b05a-1ed57dd4aa79"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"data"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
        <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"209e27e0-500c-44f3-9134-280690014920"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"title"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"City Rhythm"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"image_url"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://storage.googleapis.com/corpusant-app-public/riffs/3a8378d5-94d4-49b7-9c0a-8432c0c4a39d/image/209e27e0-500c-44f3-9134-280690014920.jpg"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"lyric"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"[Verse]\nWoke up with the sun in my eyes\nNo clouds above just blue in the skies\nShoes on my feet Iâ€™m ready to run\nEvery step feels like a loaded gun\n[Chorus]\nHappy days are rolling in\nLet the joy beneath my skin\nNo more shadows no more lies\nJust the truth that lifts me high\n[Verse 2]\nDancing through the city streets\nA rhythm pounding in my heartbeat\nStrangers smile itâ€™s catching on\nThis worldâ€™s a stage weâ€™re all a song\n[Chorus]\nHappy days are rolling in\nLet the joy beneath my skin\nNo more shadows no more lies\nJust the truth that lifts me high\n[Bridge]\nThrow your worries out the door\nLet them sink to the ocean floor\nWeâ€™re alive and itâ€™s enough\nLife is messy but itâ€™s love\n[Chorus]\nHappy days are rolling in\nLet the joy beneath my skin\nNo more shadows no more lies\nJust the truth that lifts me high"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"audio_url"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://storage.googleapis.com/corpusant-app-public/riffs/3a8378d5-94d4-49b7-9c0a-8432c0c4a39d/audio/209e27e0-500c-44f3-9134-280690014920.m4a"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"video_url"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"created_at"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2025-06-23T02:00:53.473604Z"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"model"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"lyrics_timestamped"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
                <span class="hljs-attr">"words"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
                    <span class="hljs-punctuation">{</span>
                        <span class="hljs-attr">"end"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">4.48</span><span class="hljs-punctuation">,</span>
                        <span class="hljs-attr">"index_range"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span>
                        <span class="hljs-attr">"line_index"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
                        <span class="hljs-attr">"start"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">4.48</span><span class="hljs-punctuation">,</span>
                        <span class="hljs-attr">"text"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"[Verse]"</span><span class="hljs-punctuation">,</span>
                        <span class="hljs-attr">"wav2vec2_format"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span>
                    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
                    ...
                    <span class="hljs-punctuation">{</span>
                        <span class="hljs-attr">"end"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">179.2</span><span class="hljs-punctuation">,</span>
                        <span class="hljs-attr">"index_range"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span>
                        <span class="hljs-attr">"line_index"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">29</span><span class="hljs-punctuation">,</span>
                        <span class="hljs-attr">"start"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">178.56</span><span class="hljs-punctuation">,</span>
                        <span class="hljs-attr">"text"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"high"</span><span class="hljs-punctuation">,</span>
                        <span class="hljs-attr">"wav2vec2_format"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span>
                    <span class="hljs-punctuation">}</span>
                <span class="hljs-punctuation">]</span>
            <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"state"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"succeeded"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"style"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">""</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"duration"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">197.00850340136054</span>
        <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
        <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ff50012e-ad1b-4b71-8d0e-6a633428a54f"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"title"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Bright"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"image_url"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://storage.googleapis.com/corpusant-app-public/riffs/3a8378d5-94d4-49b7-9c0a-8432c0c4a39d/image/ff50012e-ad1b-4b71-8d0e-6a633428a54f.jpg"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"lyric"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"[Verse]\nWoke up with the sun in my eyes\nNo clouds above just blue in the skies\nShoes on my feet Iâ€™m ready to run\nEvery step feels like a loaded gun\n[Chorus]\nHappy days are rolling in\nLet the joy beneath my skin\nNo more shadows no more lies\nJust the truth that lifts me high\n[Verse 2]\nDancing through the city streets\nA rhythm pounding in my heartbeat\nStrangers smile itâ€™s catching on\nThis worldâ€™s a stage weâ€™re all a song\n[Chorus]\nHappy days are rolling in\nLet the joy beneath my skin\nNo more shadows no more lies\nJust the truth that lifts me high\n[Bridge]\nThrow your worries out the door\nLet them sink to the ocean floor\nWeâ€™re alive and itâ€™s enough\nLife is messy but itâ€™s love\n[Chorus]\nHappy days are rolling in\nLet the joy beneath my skin\nNo more shadows no more lies\nJust the truth that lifts me high"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"audio_url"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://storage.googleapis.com/corpusant-app-public/riffs/3a8378d5-94d4-49b7-9c0a-8432c0c4a39d/audio/ff50012e-ad1b-4b71-8d0e-6a633428a54f.m4a"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"video_url"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"created_at"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2025-06-23T02:00:52.795796Z"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"model"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"lyrics_timestamped"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
                <span class="hljs-attr">"words"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
                    <span class="hljs-punctuation">{</span>
                        <span class="hljs-attr">"end"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0.64</span><span class="hljs-punctuation">,</span>
                        <span class="hljs-attr">"index_range"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span>
                        <span class="hljs-attr">"line_index"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
                        <span class="hljs-attr">"start"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0.64</span><span class="hljs-punctuation">,</span>
                        <span class="hljs-attr">"text"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"[Verse]"</span><span class="hljs-punctuation">,</span>
                        <span class="hljs-attr">"wav2vec2_format"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span>
                    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
                    ...
                    <span class="hljs-punctuation">{</span>
                        <span class="hljs-attr">"end"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">186.88</span><span class="hljs-punctuation">,</span>
                        <span class="hljs-attr">"index_range"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span>
                        <span class="hljs-attr">"line_index"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">29</span><span class="hljs-punctuation">,</span>
                        <span class="hljs-attr">"start"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">186.24</span><span class="hljs-punctuation">,</span>
                        <span class="hljs-attr">"text"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"high"</span><span class="hljs-punctuation">,</span>
                        <span class="hljs-attr">"wav2vec2_format"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span>
                    <span class="hljs-punctuation">}</span>
                <span class="hljs-punctuation">]</span>
            <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"state"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"succeeded"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"style"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">""</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"duration"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">213.85757369614512</span>
        <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h2 data-id="heading-5">æ›¿æ¢ç‰‡æ®µ</h2>
<p>å¦‚æœæƒ³å¯¹æ­Œæ›²è¿›è¡Œæ›¿æ¢ç‰‡æ®µçš„è¯ï¼Œæˆ‘ä»¬éœ€è¦ä¼ å…¥<code>action</code>å‚æ•°å€¼ä¸ºï¼š<code>replace_section</code>ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬è¦æ ¹æ®æ­Œè¯ã€æ ‡é¢˜ã€é£æ ¼è‡ªå®šä¹‰ç”Ÿæˆæ­Œæ›²ã€‚</p>
<p>å¦‚æœæƒ³å¯¹è‡ªå·±ä¸Šä¼ çš„æ­Œæ›²è¿›è¡Œç»§ç»­æ›¿æ¢ç‰‡æ®µçš„è¯ï¼Œå¯ä»¥å°†å‚æ•° <code>action</code> è®¾ç½®ä¸º <code>upload_replace_section</code> ï¼Œå¹¶ä¸”è¾“å…¥éœ€è¦ç»§ç»­æ›¿æ¢ç‰‡æ®µè‡ªå®šä¹‰ä¸Šä¼ çš„æ­Œæ›² IDï¼Œæ­Œæ›² ID çš„è·å–æ˜¯ä½¿ç”¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fplatform.acedata.cloud%2Fdocuments%2F76d79f86-39af-4034-8c6a-51e4a819308d%3Finviter_id%3Db87f67c1-b04f-4332-99a1-7a5e651331c6%3Finviter_id%3Db87f67c1-b04f-4332-99a1-7a5e651331c6%3Finviter_id%3Db87f67c1-b04f-4332-99a1-7a5e651331c6%3Finviter_id%3Db87f67c1-b04f-4332-99a1-7a5e651331c6%3Finviter_id%3Db87f67c1-b04f-4332-99a1-7a5e651331c6" target="_blank" title="https://platform.acedata.cloud/documents/76d79f86-39af-4034-8c6a-51e4a819308d?inviter_id=b87f67c1-b04f-4332-99a1-7a5e651331c6?inviter_id=b87f67c1-b04f-4332-99a1-7a5e651331c6?inviter_id=b87f67c1-b04f-4332-99a1-7a5e651331c6?inviter_id=b87f67c1-b04f-4332-99a1-7a5e651331c6?inviter_id=b87f67c1-b04f-4332-99a1-7a5e651331c6" ref="nofollow noopener noreferrer">Riffusion Upload API</a>æ¥è·å–ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://cdn.acedata.cloud/z7r5fd.png" width="500" class="m-auto" loading="lazy"/></p>
<p>å°±å¯ä»¥æŒ‡å®šå¦‚ä¸‹å†…å®¹ï¼š</p>
<ul>
<li>actionï¼šæ­¤æ¬¡æ­Œæ›²ä»»åŠ¡çš„è¡Œä¸ºï¼Œç›®å‰æ”¯æŒï¼šgenerateã€coverã€extendã€upload_coverã€upload_extendã€replace_sectionã€upload_replace_sectionã€swap_vocalsã€upload_swap_vocalsã€swap_soundã€upload_swap_soundï¼Œæ­¤æ¬¡ç»­å†™ä½¿ç”¨<code>extend</code>å‚æ•°ã€‚</li>
<li>lyricï¼šéœ€è¦æ›¿æ¢åçš„æ­Œè¯æ–‡æœ¬</li>
<li>titleï¼šæ­Œæ›²çš„æ ‡é¢˜ã€‚</li>
<li>audio_idï¼šæ­Œæ›²çš„IDã€‚</li>
<li>styleï¼šæ­Œæ›²çš„é£æ ¼ï¼Œé€‰å¡«ã€‚</li>
</ul>
<p>å¡«å†™æ ·ä¾‹å¦‚ä¸‹ï¼š</p>
<p><img src="https://cdn.acedata.cloud/gbxazr.png" width="500" class="m-auto" loading="lazy"/></p>
<p>å¡«å†™å®Œæ¯•ä¹‹åè‡ªåŠ¨ç”Ÿæˆäº†ä»£ç å¦‚ä¸‹ï¼š</p>
<p><img src="https://cdn.acedata.cloud/yb4wr9.png" width="500" class="m-auto" loading="lazy"/></p>
<p>å¯¹åº”çš„ä»£ç ï¼š</p>
<pre><code class="hljs language-shell" lang="shell">curl -X POST 'https://api.acedata.cloud/riffusion/audios' \
-H 'accept: application/json' \
-H 'authorization: Bearer {token}' \
-H 'content-type: application/json' \
-d '{
  "action": "replace_section",
  "model": "FUZZ-1.0 Pro",
  "lyric": "[Verse]\nWoke up with the sun in my eyes\nNo clouds above just blue in the skies\nShoes on my feet Iâ€™m ready to run\nEvery step feels like a loaded gun\n[Chorus]\nHappy days are rolling in\nLet the joy beneath my skin\nNo more shadows no more lies\nJust the truth that lifts me high\n[Verse 2]\nDancing through the city streets\nA rhythm pounding in my heartbeat\nStrangers smile itâ€™s catching on\nThis worldâ€™s a stage weâ€™re all a song\n[Chorus]\nHappy days are rolling in\nLet the joy beneath my skin\nNo more shadows no more lies\nJust the truth that lifts me high\n[Bridge]\nThrow your worries out the door\nLet them sink to the ocean floor\nWeâ€™re alive and itâ€™s enough\nLife is messy but itâ€™s love\n[Chorus]\nHappy days are rolling in\nLet the joy beneath my skin\nNo more shadows no more lies\nJust the truth that lifts me high",
  "audio_id": "b7376272-3902-49b4-a83b-62f7e6ab505c",
  "replace_section_start": 3,
  "replace_section_end": 70
}'
</code></pre>
<p>æµ‹è¯•å…è®¸ï¼Œç”Ÿæˆçš„æ•ˆæœæ˜¯ç±»ä¼¼çš„ã€‚</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"success"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"task_id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"73defcbf-f876-4dd6-b60e-4c1c5ecd4565"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"trace_id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"9f639389-7218-4cdb-ade9-b34228bb0f21"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"data"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"037f5e9d-9da4-4d79-b58f-1f433b40d54d"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"title"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Sunrise Joy"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"image_url"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://storage.googleapis.com/corpusant-app-public/riffs/881ad27f-39c1-4c31-a789-ecc822e13b8c/image/037f5e9d-9da4-4d79-b58f-1f433b40d54d.jpg"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"lyric"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"[Verse]\nWoke up with the sun in my eyes\nNo clouds above just blue in the skies\nShoes on my feet Iâ€™m ready to run\nEvery step feels like a loaded gun\n[Chorus]\nHappy days are rolling in\nLet the joy beneath my skin\nNo more shadows no more lies\nJust the truth that lifts me high\n[Verse 2]\nDancing through the city streets\nA rhythm pounding in my heartbeat\nStrangers smile itâ€™s catching on\nThis worldâ€™s a stage weâ€™re all a song\n[Chorus]\nHappy days are rolling in\nLet the joy beneath my skin\nNo more shadows no more lies\nJust the truth that lifts me high\n[Bridge]\nThrow your worries out the door\nLet them sink to the ocean floor\nWeâ€™re alive and itâ€™s enough\nLife is messy but itâ€™s love\n[Chorus]\nHappy days are rolling in\nLet the joy beneath my skin\nNo more shadows no more lies\nJust the truth that lifts me high"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"audio_url"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://storage.googleapis.com/corpusant-app-public/riffs/881ad27f-39c1-4c31-a789-ecc822e13b8c/audio/037f5e9d-9da4-4d79-b58f-1f433b40d54d.m4a"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"video_url"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"created_at"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2025-06-23T02:18:43.031184Z"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"model"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"lyrics_timestamped"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"words"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
          <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">"end"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">3.84</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"index_range"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"line_index"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"start"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">3.84</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"text"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"[Verse]"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"wav2vec2_format"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span>
          <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
          ...
          <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">"end"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">159.36</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"index_range"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"line_index"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">29</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"start"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">159.36</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"text"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"high"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"wav2vec2_format"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span>
          <span class="hljs-punctuation">}</span>
        <span class="hljs-punctuation">]</span>
      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"state"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"succeeded"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"style"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">""</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"duration"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">199.2201133786848</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"97638295-068f-4cbc-b076-66f522449bd5"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"title"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Sunrise"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"image_url"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://storage.googleapis.com/corpusant-app-public/riffs/881ad27f-39c1-4c31-a789-ecc822e13b8c/image/97638295-068f-4cbc-b076-66f522449bd5.jpg"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"lyric"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"[Verse]\nWoke up with the sun in my eyes\nNo clouds above just blue in the skies\nShoes on my feet Iâ€™m ready to run\nEvery step feels like a loaded gun\n[Chorus]\nHappy days are rolling in\nLet the joy beneath my skin\nNo more shadows no more lies\nJust the truth that lifts me high\n[Verse 2]\nDancing through the city streets\nA rhythm pounding in my heartbeat\nStrangers smile itâ€™s catching on\nThis worldâ€™s a stage weâ€™re all a song\n[Chorus]\nHappy days are rolling in\nLet the joy beneath my skin\nNo more shadows no more lies\nJust the truth that lifts me high\n[Bridge]\nThrow your worries out the door\nLet them sink to the ocean floor\nWeâ€™re alive and itâ€™s enough\nLife is messy but itâ€™s love\n[Chorus]\nHappy days are rolling in\nLet the joy beneath my skin\nNo more shadows no more lies\nJust the truth that lifts me high"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"audio_url"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://storage.googleapis.com/corpusant-app-public/riffs/881ad27f-39c1-4c31-a789-ecc822e13b8c/audio/97638295-068f-4cbc-b076-66f522449bd5.m4a"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"video_url"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"created_at"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2025-06-23T02:18:56.267775Z"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"model"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"lyrics_timestamped"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"words"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
          <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">"end"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">3.84</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"index_range"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"line_index"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"start"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">3.84</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"text"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"[Verse]"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"wav2vec2_format"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span>
          <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
          ...
          <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">"end"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">159.36</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"index_range"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"line_index"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">29</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"start"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">159.36</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"text"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"high"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"wav2vec2_format"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span>
          <span class="hljs-punctuation">}</span>
        <span class="hljs-punctuation">]</span>
      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"state"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"succeeded"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"style"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">""</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"duration"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">199.2201133786848</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h2 data-id="heading-6">SwapSoundç”Ÿæˆ</h2>
<p>å¦‚æœæƒ³ä½¿ç”¨å®˜æ–¹çš„SwapSoundæ“ä½œï¼Œå¯ä»¥å°†<code>action</code>å‚æ•°å€¼è®¾ä¸ºï¼š<code>swap_sound</code>ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬è¦æ ¹æ®æ­Œè¯ã€æ ‡é¢˜ã€é£æ ¼è‡ªå®šä¹‰ç”Ÿæˆæ­Œæ›²ã€‚</p>
<p>å¦‚æœæƒ³å¯¹è‡ªå·±ä¸Šä¼ çš„æ­Œæ›²è¿›è¡Œç»§ç»­SwapSoundæ“ä½œçš„è¯ï¼Œå¯ä»¥å°†å‚æ•° <code>action</code> è®¾ç½®ä¸º <code>upload_swap_sound</code> ï¼Œå¹¶ä¸”è¾“å…¥éœ€è¦ç»§ç»­SwapSoundæ“ä½œè‡ªå®šä¹‰ä¸Šä¼ çš„æ­Œæ›² IDï¼Œæ­Œæ›² ID çš„è·å–æ˜¯ä½¿ç”¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fplatform.acedata.cloud%2Fdocuments%2F76d79f86-39af-4034-8c6a-51e4a819308d%3Finviter_id%3Db87f67c1-b04f-4332-99a1-7a5e651331c6%3Finviter_id%3Db87f67c1-b04f-4332-99a1-7a5e651331c6%3Finviter_id%3Db87f67c1-b04f-4332-99a1-7a5e651331c6%3Finviter_id%3Db87f67c1-b04f-4332-99a1-7a5e651331c6%3Finviter_id%3Db87f67c1-b04f-4332-99a1-7a5e651331c6" target="_blank" title="https://platform.acedata.cloud/documents/76d79f86-39af-4034-8c6a-51e4a819308d?inviter_id=b87f67c1-b04f-4332-99a1-7a5e651331c6?inviter_id=b87f67c1-b04f-4332-99a1-7a5e651331c6?inviter_id=b87f67c1-b04f-4332-99a1-7a5e651331c6?inviter_id=b87f67c1-b04f-4332-99a1-7a5e651331c6?inviter_id=b87f67c1-b04f-4332-99a1-7a5e651331c6" ref="nofollow noopener noreferrer">Riffusion Upload API</a>æ¥è·å–ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://cdn.acedata.cloud/z7r5fd.png" width="500" class="m-auto" loading="lazy"/></p>
<p>å°±å¯ä»¥æŒ‡å®šå¦‚ä¸‹å†…å®¹ï¼š</p>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬è¦æ ¹æ®æ­Œè¯ã€æ ‡é¢˜ã€é£æ ¼è‡ªå®šä¹‰ç”Ÿæˆæ­Œæ›²ï¼Œå°±å¯ä»¥æŒ‡å®šå¦‚ä¸‹å†…å®¹ï¼š</p>
<ul>
<li>actionï¼šæ­¤æ¬¡æ­Œæ›²ä»»åŠ¡çš„è¡Œä¸ºï¼Œç›®å‰æ”¯æŒï¼šgenerateã€coverã€extendã€upload_coverã€upload_extendã€replace_sectionã€upload_replace_sectionã€swap_vocalsã€upload_swap_vocalsã€swap_soundã€upload_swap_soundã€‚</li>
<li>lyricï¼šæ­Œè¯æ–‡æœ¬</li>
<li>titleï¼šæ­Œæ›²çš„æ ‡é¢˜ã€‚</li>
<li>audio_idï¼šæ­Œæ›²çš„IDã€‚</li>
<li>styleï¼šæ­Œæ›²çš„é£æ ¼ï¼Œé€‰å¡«ã€‚</li>
</ul>
<p>å¡«å†™æ ·ä¾‹å¦‚ä¸‹ï¼š</p>
<p><img src="https://cdn.acedata.cloud/psf4rm.png" width="500" class="m-auto" loading="lazy"/></p>
<p>å¡«å†™å®Œæ¯•ä¹‹åè‡ªåŠ¨ç”Ÿæˆäº†ä»£ç å¦‚ä¸‹ï¼š</p>
<p><img src="https://cdn.acedata.cloud/988rlq.png" width="500" class="m-auto" loading="lazy"/></p>
<p>å¯¹åº”çš„ä»£ç ï¼š</p>
<pre><code class="hljs language-shell" lang="shell">curl -X POST 'https://api.acedata.cloud/riffusion/audios' \
-H 'accept: application/json' \
-H 'authorization: Bearer {token}' \
-H 'content-type: application/json' \
-d '{
  "action": "swap_sound",
  "model": "FUZZ-1.0 Pro",
  "lyric": "[Verse]\nWoke up with the sun in my eyes\nNo clouds above just blue in the skies\nShoes on my feet Iâ€™m ready to run\nEvery step feels like a loaded gun\n[Chorus]\nHappy days are rolling in\nLet the joy beneath my skin\nNo more shadows no more lies\nJust the truth that lifts me high\n[Verse 2]\nDancing through the city streets\nA rhythm pounding in my heartbeat\nStrangers smile itâ€™s catching on\nThis worldâ€™s a stage weâ€™re all a song\n[Chorus]\nHappy days are rolling in\nLet the joy beneath my skin\nNo more shadows no more lies\nJust the truth that lifts me high\n[Bridge]\nThrow your worries out the door\nLet them sink to the ocean floor\nWeâ€™re alive and itâ€™s enough\nLife is messy but itâ€™s love\n[Chorus]\nHappy days are rolling in\nLet the joy beneath my skin\nNo more shadows no more lies\nJust the truth that lifts me high",
  "audio_id": "b7376272-3902-49b4-a83b-62f7e6ab505c"
}'
</code></pre>
<p>æµ‹è¯•å…è®¸ï¼Œç”Ÿæˆçš„æ•ˆæœæ˜¯ç±»ä¼¼çš„ã€‚</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"success"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"task_id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"93279260-5ca1-42d8-bde1-1fa62e0f5027"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"trace_id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"bc4e28db-4897-4ffc-9e03-45f43da7a21c"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"data"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
        <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"242035c0-8ac2-4f0b-a19c-ac2fa49d4df3"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"title"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Brightside"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"image_url"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://storage.googleapis.com/corpusant-app-public/riffs/36494e8a-eb82-4d89-bbfa-ec719e19572b/image/242035c0-8ac2-4f0b-a19c-ac2fa49d4df3.jpg"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"lyric"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"[Verse]\nWoke up with the sun in my eyes\nNo clouds above just blue in the skies\nShoes on my feet Iâ€™m ready to run\nEvery step feels like a loaded gun\n[Chorus]\nHappy days are rolling in\nLet the joy beneath my skin\nNo more shadows no more lies\nJust the truth that lifts me high\n[Verse 2]\nDancing through the city streets\nA rhythm pounding in my heartbeat\nStrangers smile itâ€™s catching on\nThis worldâ€™s a stage weâ€™re all a song\n[Chorus]\nHappy days are rolling in\nLet the joy beneath my skin\nNo more shadows no more lies\nJust the truth that lifts me high\n[Bridge]\nThrow your worries out the door\nLet them sink to the ocean floor\nWeâ€™re alive and itâ€™s enough\nLife is messy but itâ€™s love\n[Chorus]\nHappy days are rolling in\nLet the joy beneath my skin\nNo more shadows no more lies\nJust the truth that lifts me high"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"audio_url"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://storage.googleapis.com/corpusant-app-public/riffs/36494e8a-eb82-4d89-bbfa-ec719e19572b/audio/242035c0-8ac2-4f0b-a19c-ac2fa49d4df3.m4a"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"video_url"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"created_at"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2025-06-23T02:02:32.799561Z"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"model"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"lyrics_timestamped"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
                <span class="hljs-attr">"words"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
                    <span class="hljs-punctuation">{</span>
                        <span class="hljs-attr">"end"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1.28</span><span class="hljs-punctuation">,</span>
                        <span class="hljs-attr">"index_range"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span>
                        <span class="hljs-attr">"line_index"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
                        <span class="hljs-attr">"start"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1.28</span><span class="hljs-punctuation">,</span>
                        <span class="hljs-attr">"text"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"[Verse]"</span><span class="hljs-punctuation">,</span>
                        <span class="hljs-attr">"wav2vec2_format"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span>
                    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
                    ...
                    <span class="hljs-punctuation">{</span>
                        <span class="hljs-attr">"end"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">195.84</span><span class="hljs-punctuation">,</span>
                        <span class="hljs-attr">"index_range"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span>
                        <span class="hljs-attr">"line_index"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">29</span><span class="hljs-punctuation">,</span>
                        <span class="hljs-attr">"start"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">195.84</span><span class="hljs-punctuation">,</span>
                        <span class="hljs-attr">"text"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"high"</span><span class="hljs-punctuation">,</span>
                        <span class="hljs-attr">"wav2vec2_format"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span>
                    <span class="hljs-punctuation">}</span>
                <span class="hljs-punctuation">]</span>
            <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"state"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"succeeded"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"style"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">""</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"duration"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">197.2696371882086</span>
        <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
        <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"594fe702-6c71-4b0c-abb6-21b58efc74a6"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"title"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Sunrise"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"image_url"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://storage.googleapis.com/corpusant-app-public/riffs/36494e8a-eb82-4d89-bbfa-ec719e19572b/image/594fe702-6c71-4b0c-abb6-21b58efc74a6.jpg"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"lyric"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"[Verse]\nWoke up with the sun in my eyes\nNo clouds above just blue in the skies\nShoes on my feet Iâ€™m ready to run\nEvery step feels like a loaded gun\n[Chorus]\nHappy days are rolling in\nLet the joy beneath my skin\nNo more shadows no more lies\nJust the truth that lifts me high\n[Verse 2]\nDancing through the city streets\nA rhythm pounding in my heartbeat\nStrangers smile itâ€™s catching on\nThis worldâ€™s a stage weâ€™re all a song\n[Chorus]\nHappy days are rolling in\nLet the joy beneath my skin\nNo more shadows no more lies\nJust the truth that lifts me high\n[Bridge]\nThrow your worries out the door\nLet them sink to the ocean floor\nWeâ€™re alive and itâ€™s enough\nLife is messy but itâ€™s love\n[Chorus]\nHappy days are rolling in\nLet the joy beneath my skin\nNo more shadows no more lies\nJust the truth that lifts me high"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"audio_url"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://storage.googleapis.com/corpusant-app-public/riffs/36494e8a-eb82-4d89-bbfa-ec719e19572b/audio/594fe702-6c71-4b0c-abb6-21b58efc74a6.m4a"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"video_url"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"created_at"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2025-06-23T02:02:30.523279Z"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"model"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"lyrics_timestamped"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
                <span class="hljs-attr">"words"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
                    <span class="hljs-punctuation">{</span>
                        <span class="hljs-attr">"end"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0.64</span><span class="hljs-punctuation">,</span>
                        <span class="hljs-attr">"index_range"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span>
                        <span class="hljs-attr">"line_index"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
                        <span class="hljs-attr">"start"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0.64</span><span class="hljs-punctuation">,</span>
                        <span class="hljs-attr">"text"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"[Verse]"</span><span class="hljs-punctuation">,</span>
                        <span class="hljs-attr">"wav2vec2_format"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span>
                    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
                    ...
                    <span class="hljs-punctuation">{</span>
                        <span class="hljs-attr">"end"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">192.64</span><span class="hljs-punctuation">,</span>
                        <span class="hljs-attr">"index_range"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span>
                        <span class="hljs-attr">"line_index"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">29</span><span class="hljs-punctuation">,</span>
                        <span class="hljs-attr">"start"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">192.64</span><span class="hljs-punctuation">,</span>
                        <span class="hljs-attr">"text"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"high"</span><span class="hljs-punctuation">,</span>
                        <span class="hljs-attr">"wav2vec2_format"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span>
                    <span class="hljs-punctuation">}</span>
                <span class="hljs-punctuation">]</span>
            <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"state"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"succeeded"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"style"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">""</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"duration"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">196.7198866213152</span>
        <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h2 data-id="heading-7">SwapVocals ç”Ÿæˆ</h2>
<p>å¦‚æœæƒ³ä½¿ç”¨å®˜æ–¹çš„SwapVocalsæ“ä½œï¼Œå¯ä»¥å°†<code>action</code>å‚æ•°å€¼è®¾ä¸ºï¼š<code>swap_vocals</code>ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬è¦æ ¹æ®æ­Œè¯ã€æ ‡é¢˜ã€é£æ ¼è‡ªå®šä¹‰ç”Ÿæˆæ­Œæ›²ã€‚</p>
<p>å¦‚æœæƒ³å¯¹è‡ªå·±ä¸Šä¼ çš„æ­Œæ›²è¿›è¡Œç»§ç»­SwapVocalsæ“ä½œçš„è¯ï¼Œå¯ä»¥å°†å‚æ•° <code>action</code> è®¾ç½®ä¸º <code>upload_swap_vocals</code> ï¼Œå¹¶ä¸”è¾“å…¥éœ€è¦ç»§ç»­SwapVocalsæ“ä½œè‡ªå®šä¹‰ä¸Šä¼ çš„æ­Œæ›² IDï¼Œæ­Œæ›² ID çš„è·å–æ˜¯ä½¿ç”¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fplatform.acedata.cloud%2Fdocuments%2F76d79f86-39af-4034-8c6a-51e4a819308d%3Finviter_id%3Db87f67c1-b04f-4332-99a1-7a5e651331c6%3Finviter_id%3Db87f67c1-b04f-4332-99a1-7a5e651331c6%3Finviter_id%3Db87f67c1-b04f-4332-99a1-7a5e651331c6%3Finviter_id%3Db87f67c1-b04f-4332-99a1-7a5e651331c6%3Finviter_id%3Db87f67c1-b04f-4332-99a1-7a5e651331c6" target="_blank" title="https://platform.acedata.cloud/documents/76d79f86-39af-4034-8c6a-51e4a819308d?inviter_id=b87f67c1-b04f-4332-99a1-7a5e651331c6?inviter_id=b87f67c1-b04f-4332-99a1-7a5e651331c6?inviter_id=b87f67c1-b04f-4332-99a1-7a5e651331c6?inviter_id=b87f67c1-b04f-4332-99a1-7a5e651331c6?inviter_id=b87f67c1-b04f-4332-99a1-7a5e651331c6" ref="nofollow noopener noreferrer">Riffusion Upload API</a>æ¥è·å–ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://cdn.acedata.cloud/z7r5fd.png" width="500" class="m-auto" loading="lazy"/></p>
<p>å°±å¯ä»¥æŒ‡å®šå¦‚ä¸‹å†…å®¹ï¼š</p>
<ul>
<li>actionï¼šæ­¤æ¬¡æ­Œæ›²ä»»åŠ¡çš„è¡Œä¸ºï¼Œç›®å‰æ”¯æŒï¼šgenerateã€coverã€extendã€upload_coverã€upload_extendã€replace_sectionã€upload_replace_sectionã€swap_vocalsã€upload_swap_vocalsã€swap_soundã€upload_swap_soundã€‚</li>
<li>lyricï¼šæ­Œè¯æ–‡æœ¬</li>
<li>titleï¼šæ­Œæ›²çš„æ ‡é¢˜ã€‚</li>
<li>audio_idï¼šæ­Œæ›²çš„IDã€‚</li>
<li>styleï¼šæ­Œæ›²çš„é£æ ¼ï¼Œé€‰å¡«ã€‚</li>
</ul>
<p>å¡«å†™æ ·ä¾‹å¦‚ä¸‹ï¼š</p>
<p><img src="https://cdn.acedata.cloud/n6k8wk.png" width="500" class="m-auto" loading="lazy"/></p>
<p>å¡«å†™å®Œæ¯•ä¹‹åè‡ªåŠ¨ç”Ÿæˆäº†ä»£ç å¦‚ä¸‹ï¼š</p>
<p><img src="https://cdn.acedata.cloud/3wg240.png" width="500" class="m-auto" loading="lazy"/></p>
<p>å¯¹åº”çš„ä»£ç ï¼š</p>
<pre><code class="hljs language-shell" lang="shell">curl -X POST 'https://api.acedata.cloud/riffusion/audios' \
-H 'accept: application/json' \
-H 'authorization: Bearer {token}' \
-H 'content-type: application/json' \
-d '{
  "action": "swap_vocals",
  "model": "FUZZ-1.0 Pro",
  "lyric": "[Verse]\nWoke up with the sun in my eyes\nNo clouds above just blue in the skies\nShoes on my feet Iâ€™m ready to run\nEvery step feels like a loaded gun\n[Chorus]\nHappy days are rolling in\nLet the joy beneath my skin\nNo more shadows no more lies\nJust the truth that lifts me high\n[Verse 2]\nDancing through the city streets\nA rhythm pounding in my heartbeat\nStrangers smile itâ€™s catching on\nThis worldâ€™s a stage weâ€™re all a song\n[Chorus]\nHappy days are rolling in\nLet the joy beneath my skin\nNo more shadows no more lies\nJust the truth that lifts me high\n[Bridge]\nThrow your worries out the door\nLet them sink to the ocean floor\nWeâ€™re alive and itâ€™s enough\nLife is messy but itâ€™s love\n[Chorus]\nHappy days are rolling in\nLet the joy beneath my skin\nNo more shadows no more lies\nJust the truth that lifts me high",
  "audio_id": "b7376272-3902-49b4-a83b-62f7e6ab505c"
}'
</code></pre>
<p>æµ‹è¯•å…è®¸ï¼Œç”Ÿæˆçš„æ•ˆæœæ˜¯ç±»ä¼¼çš„ã€‚</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"success"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"task_id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"a6e0d456-189b-4c78-9232-2fe72166ab39"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"trace_id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ee5769d4-ae94-4e5a-a85f-b3c0ddc2e48e"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"data"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
        <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"b8b1ed14-f43c-4738-a697-60ba24b6049d"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"title"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Uplift"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"image_url"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://storage.googleapis.com/corpusant-app-public/riffs/25ce4ddd-e48c-42e2-9ea3-8e03380508f2/image/b8b1ed14-f43c-4738-a697-60ba24b6049d.jpg"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"lyric"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"[Verse]\nWoke up with the sun in my eyes\nNo clouds above just blue in the skies\nShoes on my feet Iâ€™m ready to run\nEvery step feels like a loaded gun\n[Chorus]\nHappy days are rolling in\nLet the joy beneath my skin\nNo more shadows no more lies\nJust the truth that lifts me high\n[Verse 2]\nDancing through the city streets\nA rhythm pounding in my heartbeat\nStrangers smile itâ€™s catching on\nThis worldâ€™s a stage weâ€™re all a song\n[Chorus]\nHappy days are rolling in\nLet the joy beneath my skin\nNo more shadows no more lies\nJust the truth that lifts me high\n[Bridge]\nThrow your worries out the door\nLet them sink to the ocean floor\nWeâ€™re alive and itâ€™s enough\nLife is messy but itâ€™s love\n[Chorus]\nHappy days are rolling in\nLet the joy beneath my skin\nNo more shadows no more lies\nJust the truth that lifts me high"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"audio_url"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://storage.googleapis.com/corpusant-app-public/riffs/25ce4ddd-e48c-42e2-9ea3-8e03380508f2/audio/b8b1ed14-f43c-4738-a697-60ba24b6049d.m4a"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"video_url"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"created_at"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2025-06-23T02:04:18.477032Z"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"model"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"lyrics_timestamped"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
                <span class="hljs-attr">"words"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
                    <span class="hljs-punctuation">{</span>
                        <span class="hljs-attr">"end"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2.56</span><span class="hljs-punctuation">,</span>
                        <span class="hljs-attr">"index_range"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span>
                        <span class="hljs-attr">"line_index"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
                        <span class="hljs-attr">"start"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2.56</span><span class="hljs-punctuation">,</span>
                        <span class="hljs-attr">"text"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"[Verse]"</span><span class="hljs-punctuation">,</span>
                        <span class="hljs-attr">"wav2vec2_format"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span>
                    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
                    ...
                    <span class="hljs-punctuation">{</span>
                        <span class="hljs-attr">"end"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">186.88</span><span class="hljs-punctuation">,</span>
                        <span class="hljs-attr">"index_range"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span>
                        <span class="hljs-attr">"line_index"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">29</span><span class="hljs-punctuation">,</span>
                        <span class="hljs-attr">"start"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">171.52</span><span class="hljs-punctuation">,</span>
                        <span class="hljs-attr">"text"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"high"</span><span class="hljs-punctuation">,</span>
                        <span class="hljs-attr">"wav2vec2_format"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span>
                    <span class="hljs-punctuation">}</span>
                <span class="hljs-punctuation">]</span>
            <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"state"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"succeeded"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"style"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">""</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"duration"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">195.55968253968254</span>
        <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
        <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"dfd6eb9c-a1f3-4e1f-bbf9-e0b9625e459f"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"title"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Vivid Rise"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"image_url"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://storage.googleapis.com/corpusant-app-public/riffs/25ce4ddd-e48c-42e2-9ea3-8e03380508f2/image/dfd6eb9c-a1f3-4e1f-bbf9-e0b9625e459f.jpg"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"lyric"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"[Verse]\nWoke up with the sun in my eyes\nNo clouds above just blue in the skies\nShoes on my feet Iâ€™m ready to run\nEvery step feels like a loaded gun\n[Chorus]\nHappy days are rolling in\nLet the joy beneath my skin\nNo more shadows no more lies\nJust the truth that lifts me high\n[Verse 2]\nDancing through the city streets\nA rhythm pounding in my heartbeat\nStrangers smile itâ€™s catching on\nThis worldâ€™s a stage weâ€™re all a song\n[Chorus]\nHappy days are rolling in\nLet the joy beneath my skin\nNo more shadows no more lies\nJust the truth that lifts me high\n[Bridge]\nThrow your worries out the door\nLet them sink to the ocean floor\nWeâ€™re alive and itâ€™s enough\nLife is messy but itâ€™s love\n[Chorus]\nHappy days are rolling in\nLet the joy beneath my skin\nNo more shadows no more lies\nJust the truth that lifts me high"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"audio_url"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://storage.googleapis.com/corpusant-app-public/riffs/25ce4ddd-e48c-42e2-9ea3-8e03380508f2/audio/dfd6eb9c-a1f3-4e1f-bbf9-e0b9625e459f.m4a"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"video_url"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"created_at"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2025-06-23T02:04:27.140387Z"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"model"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"lyrics_timestamped"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
                <span class="hljs-attr">"words"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
                    <span class="hljs-punctuation">{</span>
                        <span class="hljs-attr">"end"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1.28</span><span class="hljs-punctuation">,</span>
                        <span class="hljs-attr">"index_range"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span>
                        <span class="hljs-attr">"line_index"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
                        <span class="hljs-attr">"start"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1.28</span><span class="hljs-punctuation">,</span>
                        <span class="hljs-attr">"text"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"[Verse]"</span><span class="hljs-punctuation">,</span>
                        <span class="hljs-attr">"wav2vec2_format"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span>
                    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
                    ...
                    <span class="hljs-punctuation">{</span>
                        <span class="hljs-attr">"end"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">188.8</span><span class="hljs-punctuation">,</span>
                        <span class="hljs-attr">"index_range"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span>
                        <span class="hljs-attr">"line_index"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">29</span><span class="hljs-punctuation">,</span>
                        <span class="hljs-attr">"start"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">188.16</span><span class="hljs-punctuation">,</span>
                        <span class="hljs-attr">"text"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"high"</span><span class="hljs-punctuation">,</span>
                        <span class="hljs-attr">"wav2vec2_format"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span>
                    <span class="hljs-punctuation">}</span>
                <span class="hljs-punctuation">]</span>
            <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"state"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"succeeded"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"style"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">""</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"duration"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">196.07185941043085</span>
        <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h2 data-id="heading-8">å¼‚æ­¥å›è°ƒ</h2>
<p>ç”±äº Riffusion Audios Generation API ç”Ÿæˆçš„æ—¶é—´æœ‰æ—¶å€™ä¼šç›¸å¯¹è¾ƒé•¿ï¼Œå¦‚æœ API é•¿æ—¶é—´æ— å“åº”ï¼ŒHTTP è¯·æ±‚ä¼šä¸€ç›´ä¿æŒè¿æ¥ï¼Œå¯¼è‡´é¢å¤–çš„ç³»ç»Ÿèµ„æºæ¶ˆè€—ï¼Œæ‰€ä»¥æœ¬ API ä¹Ÿæä¾›äº†å¼‚æ­¥å›è°ƒçš„æ”¯æŒã€‚</p>
<p>æ•´ä½“æµç¨‹æ˜¯ï¼šå®¢æˆ·ç«¯å‘èµ·è¯·æ±‚çš„æ—¶å€™ï¼Œé¢å¤–æŒ‡å®šä¸€ä¸ª <code>callback_url</code> å­—æ®µï¼Œå®¢æˆ·ç«¯å‘èµ· API è¯·æ±‚ä¹‹åï¼ŒAPI ä¼šç«‹é©¬è¿”å›ä¸€ä¸ªç»“æœï¼ŒåŒ…å«ä¸€ä¸ª <code>task_id</code> çš„å­—æ®µä¿¡æ¯ï¼Œä»£è¡¨å½“å‰çš„ä»»åŠ¡ IDã€‚å½“ä»»åŠ¡å®Œæˆä¹‹åï¼Œç”Ÿæˆä»»åŠ¡çš„ç»“æœä¼šé€šè¿‡ POST JSON çš„å½¢å¼å‘é€åˆ°å®¢æˆ·ç«¯æŒ‡å®šçš„ <code>callback_url</code>ï¼Œå…¶ä¸­ä¹ŸåŒ…æ‹¬äº† <code>task_id</code> å­—æ®µï¼Œè¿™æ ·ä»»åŠ¡ç»“æœå°±å¯ä»¥é€šè¿‡ ID å…³è”èµ·æ¥äº†ã€‚</p>
<p>ä¸‹é¢æˆ‘ä»¬é€šè¿‡ç¤ºä¾‹æ¥äº†è§£ä¸‹å…·ä½“æ€æ ·æ“ä½œã€‚</p>
<p>é¦–å…ˆï¼ŒWebhook å›è°ƒæ˜¯ä¸€ä¸ªå¯ä»¥æ¥æ”¶ HTTP è¯·æ±‚çš„æœåŠ¡ï¼Œå¼€å‘è€…åº”è¯¥æ›¿æ¢ä¸ºè‡ªå·±æ­å»ºçš„ HTTP æœåŠ¡å™¨çš„ URLã€‚æ­¤å¤„ä¸ºäº†æ–¹ä¾¿æ¼”ç¤ºï¼Œä½¿ç”¨ä¸€ä¸ªå…¬å¼€çš„ Webhook æ ·ä¾‹ç½‘ç«™ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwebhook.site%2F" target="_blank" title="https://webhook.site/" ref="nofollow noopener noreferrer">webhook.site/</a>ï¼Œæ‰“å¼€è¯¥ç½‘ç«™å³å¯å¾—åˆ°ä¸€ä¸ª Webhook URLï¼Œå¦‚å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://cdn.acedata.cloud/tbcnai.png" alt="" loading="lazy"/></p>
<p>å°†æ­¤ URL å¤åˆ¶ä¸‹æ¥ï¼Œå°±å¯ä»¥ä½œä¸º Webhook æ¥ä½¿ç”¨ï¼Œæ­¤å¤„çš„æ ·ä¾‹ä¸º <a href="https://link.juejin.cn?target=https%3A%2F%2Fwebhook.site%2F68368fc6-7f0a-425e-b63a-cc48631615fe" target="_blank" title="https://webhook.site/68368fc6-7f0a-425e-b63a-cc48631615fe" ref="nofollow noopener noreferrer">webhook.site/68368fc6-7fâ€¦</a>ã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å¯ä»¥è®¾ç½®å­—æ®µ <code>callback_url</code> ä¸ºä¸Šè¿° Webhook URLï¼ŒåŒæ—¶å¡«å…¥ç›¸åº”çš„å‚æ•°ï¼Œå…·ä½“çš„å†…å®¹å¦‚å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://cdn.acedata.cloud/kk7y6q.png" width="500" class="m-auto" loading="lazy"/></p>
<p>ç‚¹å‡»è¿è¡Œï¼Œå¯ä»¥å‘ç°ä¼šç«‹å³å¾—åˆ°ä¸€ä¸ªç»“æœï¼Œå¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"task_id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"9939767a-7f9c-4f43-aabf-ca68fe385f3c"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>ç¨ç­‰ç‰‡åˆ»ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwebhook.site%2F68368fc6-7f0a-425e-b63a-cc48631615fe" target="_blank" title="https://webhook.site/68368fc6-7f0a-425e-b63a-cc48631615fe" ref="nofollow noopener noreferrer">webhook.site/68368fc6-7fâ€¦</a> ä¸Šè§‚å¯Ÿåˆ°ç”Ÿæˆä»»åŠ¡çš„ç»“æœï¼Œå¦‚å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://cdn.acedata.cloud/bgujzg.png" alt="" loading="lazy"/></p>
<p>å†…å®¹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"success"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"task_id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"9939767a-7f9c-4f43-aabf-ca68fe385f3c"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"trace_id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"13a86870-e705-45d0-8447-82a08701c0fa"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"data"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"72e6c476-0116-4da9-ae34-f78190020b35"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"title"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Rise"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"image_url"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://storage.googleapis.com/corpusant-app-public/riffs/9b9f3281-6b47-44ac-8e4b-3b0d105e163d/image/72e6c476-0116-4da9-ae34-f78190020b35.jpg"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"lyric"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"[Verse]\nWoke up with the sun in my eyes\nNo clouds above just blue in the skies\nShoes on my feet Iâ€™m ready to run\nEvery step feels like a loaded gun\n[Chorus]\nHappy days are rolling in\nLet the joy beneath my skin\nNo more shadows no more lies\nJust the truth that lifts me high\n[Verse 2]\nDancing through the city streets\nA rhythm pounding in my heartbeat\nStrangers smile itâ€™s catching on\nThis worldâ€™s a stage weâ€™re all a song\n[Chorus]\nHappy days are rolling in\nLet the joy beneath my skin\nNo more shadows no more lies\nJust the truth that lifts me high\n[Bridge]\nThrow your worries out the door\nLet them sink to the ocean floor\nWeâ€™re alive and itâ€™s enough\nLife is messy but itâ€™s love\n[Chorus]\nHappy days are rolling in\nLet the joy beneath my skin\nNo more shadows no more lies\nJust the truth that lifts me high"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"audio_url"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://storage.googleapis.com/corpusant-app-public/riffs/9b9f3281-6b47-44ac-8e4b-3b0d105e163d/audio/72e6c476-0116-4da9-ae34-f78190020b35.m4a"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"video_url"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"created_at"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2025-06-15T15:43:22.432605Z"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"model"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"FUZZ-1.0"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"state"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"succeeded"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"style"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"acoustic folk, finger picking"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"duration"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">184.96</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"7f4f5c20-4395-4583-9dbb-735b9bb86957"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"title"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Luminance"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"image_url"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://storage.googleapis.com/corpusant-app-public/riffs/9b9f3281-6b47-44ac-8e4b-3b0d105e163d/image/7f4f5c20-4395-4583-9dbb-735b9bb86957.jpg"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"lyric"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"[Verse]\nWoke up with the sun in my eyes\nNo clouds above just blue in the skies\nShoes on my feet Iâ€™m ready to run\nEvery step feels like a loaded gun\n[Chorus]\nHappy days are rolling in\nLet the joy beneath my skin\nNo more shadows no more lies\nJust the truth that lifts me high\n[Verse 2]\nDancing through the city streets\nA rhythm pounding in my heartbeat\nStrangers smile itâ€™s catching on\nThis worldâ€™s a stage weâ€™re all a song\n[Chorus]\nHappy days are rolling in\nLet the joy beneath my skin\nNo more shadows no more lies\nJust the truth that lifts me high\n[Bridge]\nThrow your worries out the door\nLet them sink to the ocean floor\nWeâ€™re alive and itâ€™s enough\nLife is messy but itâ€™s love\n[Chorus]\nHappy days are rolling in\nLet the joy beneath my skin\nNo more shadows no more lies\nJust the truth that lifts me high"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"audio_url"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://storage.googleapis.com/corpusant-app-public/riffs/9b9f3281-6b47-44ac-8e4b-3b0d105e163d/audio/7f4f5c20-4395-4583-9dbb-735b9bb86957.m4a"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"video_url"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"created_at"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2025-06-15T15:43:21.574561Z"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"model"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"FUZZ-1.0"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"state"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"succeeded"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"style"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"deep bass, ethereal electronic"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"duration"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">165.12</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>å¯ä»¥çœ‹åˆ°ç»“æœä¸­æœ‰ä¸€ä¸ª <code>task_id</code> å­—æ®µï¼Œå…¶ä»–çš„å­—æ®µéƒ½å’Œä¸Šæ–‡ç±»ä¼¼ï¼Œé€šè¿‡è¯¥å­—æ®µå³å¯å®ç°ä»»åŠ¡çš„å…³è”ã€‚</p>
<h2 data-id="heading-9">é”™è¯¯å¤„ç†</h2>
<p>åœ¨è°ƒç”¨ API æ—¶ï¼Œå¦‚æœé‡åˆ°é”™è¯¯ï¼ŒAPI ä¼šè¿”å›ç›¸åº”çš„é”™è¯¯ä»£ç å’Œä¿¡æ¯ã€‚ä¾‹å¦‚ï¼š</p>
<ul>
<li><code>400 token_mismatched</code>ï¼šBad request, possibly due to missing or invalid parameters.</li>
<li><code>400 api_not_implemented</code>ï¼šBad request, possibly due to missing or invalid parameters.</li>
<li><code>401 invalid_token</code>ï¼šUnauthorized, invalid or missing authorization token.</li>
<li><code>429 too_many_requests</code>ï¼šToo many requests, you have exceeded the rate limit.</li>
<li><code>500 api_error</code>ï¼šInternal server error, something went wrong on the server.</li>
</ul>
<h3 data-id="heading-10">é”™è¯¯å“åº”ç¤ºä¾‹</h3>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"success"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"error"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"code"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"api_error"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"message"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"fetch failed"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"trace_id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2cf86e86-22a4-46e1-ac2f-032c0f2a4e89"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h2 data-id="heading-11">ç»“è®º</h2>
<p>é€šè¿‡æœ¬æ–‡æ¡£ï¼Œæ‚¨å·²ç»äº†è§£äº†å¦‚ä½•ä½¿ç”¨ Riffusion Audios Generation API å¯é€šè¿‡è¾“å…¥æç¤ºè¯æ¥ç”ŸæˆéŸ³ä¹ã€‚å¸Œæœ›æœ¬æ–‡æ¡£èƒ½å¸®åŠ©æ‚¨æ›´å¥½åœ°å¯¹æ¥å’Œä½¿ç”¨è¯¥ APIã€‚å¦‚æœ‰ä»»ä½•é—®é¢˜ï¼Œè¯·éšæ—¶è”ç³»æˆ‘ä»¬çš„æŠ€æœ¯æ”¯æŒå›¢é˜Ÿã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æˆ‘çš„å¾ˆå¤šæœ‹å‹ï¼Œéƒ½æ¶ˆå¤±äº†â€¦]]></title>    <link>https://juejin.cn/post/7604665952320454707</link>    <guid>https://juejin.cn/post/7604665952320454707</guid>    <pubDate>2026-02-10T00:24:33.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604665952320454707" data-draft-id="7604697194794844170" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æˆ‘çš„å¾ˆå¤šæœ‹å‹ï¼Œéƒ½æ¶ˆå¤±äº†â€¦"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯,ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2026-02-10T00:24:33.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="CodeSheep"/> <meta itemprop="url" content="https://juejin.cn/user/4371313961738616"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æˆ‘çš„å¾ˆå¤šæœ‹å‹ï¼Œéƒ½æ¶ˆå¤±äº†â€¦
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4371313961738616/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    CodeSheep
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-10T00:24:33.000Z" title="Tue Feb 10 2026 00:24:33 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä¸çŸ¥é“å¤§å®¶æœ‰æ²¡æœ‰ç±»ä¼¼çš„æ„Ÿå—ï¼Œè‡ªä»æ¯•ä¸šä¹‹åï¼Œèº«è¾¹å¾ˆå¤šå½“å¹´åœ¨å­¦æ ¡é‡Œå…³ç³»éå¸¸è¦å¥½ï¼Œèµ°å¾—éå¸¸è¿‘çš„åŒå­¦å’Œæœ‹å‹<strong>ä¼¼ä¹å¼€å§‹æ¸æ¸ä»è‡ªå·±çš„ç”Ÿæ´»ä¸­æ¶ˆå¤±äº†</strong>ã€‚</p>
<p>è€Œä¸”éšç€å¹´é¾„çš„é€æ¸å¢åŠ ï¼Œè¿™ç§æ„Ÿè§‰ä¹Ÿæ„ˆå‘æ˜æ˜¾ã€‚</p>
<p>åŒ…æ‹¬ä¸Šå‘¨æœ«ï¼Œæˆ‘åœ¨å®¶å¤‡ä»½è¿ç§»å¾®ä¿¡èŠå¤©è®°å½•ï¼Œæˆ‘çªç„¶å‘ç°é«˜ä¸­ç­çº§ç¾¤å·²ç»å®‰é™äº†å¿«ä¸€å¹´äº†ï¼Œè¿™ä¸€å¹´ä¸­å±…ç„¶æ²¡æœ‰ä»»ä½•ä¸€ä½åŒå­¦åœ¨é‡Œé¢å‘æ¶ˆæ¯ï¼Œä¸Šä¸€æ¬¡æœ‰æ¶ˆæ¯å¼¹å‡ºï¼Œè¿˜æ˜¯å®šæ ¼åœ¨è¿‡å¹´æ—¶ç¾¤ä¸»ä¾‹è¡Œå…¬äº‹èˆ¬å‘çš„ç¥ç¦æ¨¡æ¿ã€‚</p>
<p>åæ¥æˆ‘åˆçœ‹äº†çœ‹å¤§å­¦çš„ç­çº§ç¾¤ï¼Œæœä¸å…¶ç„¶ï¼Œä¹Ÿæ˜¯å¿«ä¸€å¹´æ²¡æœ‰äººè¯´è¯äº†ã€‚</p>
<p>é¡ºç€å¾€å‰ç¿»ï¼Œç¿»åˆ°äº”å¹´å‰çš„èŠå¤©è®°å½•ï¼Œé‚£æ—¶å€™æ»¡å±è¿˜éƒ½æ˜¯â€œèšä¼šåœ°ç‚¹æŠ•ç¥¨â€ã€â€œè°ä»æ·±åœ³å›æ¥äº†â€ã€â€œèƒ½ä¸èƒ½å¸¦å®¶å±â€çš„çƒ­é—¹ã€‚</p>
<p>è€Œç°åœ¨ï¼Œé‚£ç§å¼ ç½—åŒå­¦èšä¼šçš„çƒ­æƒ…ï¼Œå¥½åƒä¸çŸ¥ä¸è§‰å°±æ·¡äº†ã€‚</p>
<p>è¿™æ—¶å€™æˆ‘ä¸ç¦æƒ³èµ·äº†å‰æ®µæ—¶é—´åˆ·èŒåœºç¤¾åŒºæ‰€çœ‹åˆ°çš„ä¸€ä¸ªå¸–å­ï¼š**ä¸ºä»€ä¹ˆç°åœ¨ä¸æµè¡ŒåŒå­¦èšä¼šäº†ï¼Ÿ**å‚ä¸è®¨è®ºçš„åŒå­¦ä¹Ÿä¸å°‘ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/61a33dbf3dbe4596bb005694c8b65f1c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZVNoZWVw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771287878&amp;x-signature=CNPCpXnULcjk0DEXBxEN55kqplY%3D" alt="" loading="lazy"/></p>
<p>è¿™ä¸é©¬ä¸Šä¹Ÿè¿‡å¹´äº†å˜›ï¼Œè¿™æ—¶å€™æˆ‘æ‰æ„è¯†åˆ°ï¼ŒåŸæ¥æˆ‘ä»¬ä¹Ÿå·²ç»æœ‰å¥½å¤šå¹´æ²¡æœ‰åŠè¿‡åŒå­¦èšä¼šäº†ã€‚</p>
<hr/>
<p>å›æƒ³èµ·å¿µä¹¦ä»¥åŠåˆšæ¯•ä¸šé‚£ä¼šå„¿ï¼ŒåŒå­¦èšä¼šæ˜¯ä»¶å¤§äº‹ã€‚æ¯é€¢å¹´èŠ‚ï¼Œç­çº§ç¾¤é‡Œæ€»ä¼šçƒ­é—¹ä¸€é˜µï¼Œè€æ—©å°±ä¼šæœ‰äººå¼€å§‹æå‰å¼ ç½—è¿™äº‹ã€‚</p>
<p>åˆšå¼€å§‹é‚£å‡ å¹´ï¼Œå¤§å®¶éƒ½æœ‰è¯´ä¸å®Œçš„è¯ï¼Œè°å»äº†åŒ—äº¬ä¸Šæµ·ï¼Œè°è€ƒä¸Šäº†å…¬åŠ¡å‘˜ã€ç ”ç©¶ç”Ÿï¼Œè°åœ¨å•ä½é‡è§äº†å¥‡è‘©é¢†å¯¼ã€‚</p>
<p>é…’æ¯ç¢°æ’çš„å£°éŸ³é‡Œï¼Œè£…ç€äºŒåå¤šå²çš„å¹´è½»äººå¯¹ä¸–ç•Œçš„æ–°é²œå›°æƒ‘ä¸è¯•æ¢ã€‚æ‰€æœ‰äººçš„çœ¼ç›éƒ½äº®æ™¶æ™¶çš„ï¼Œä»¿ä½›è¦æŠŠåˆ†å¼€è¿™äº›å¹´é”™è¿‡çš„å½¼æ­¤äººç”Ÿéƒ½æ‰¾è¡¥å›æ¥ã€‚</p>
<p>ä½†æ˜¯ç°åœ¨å‘¢ï¼Ÿ</p>
<p>ç­çº§ç¾¤å¤§å¤šæ²‰å¯‚ç€ï¼Œå³ä¾¿å¶å°”æœ‰æ¶ˆæ¯ï¼Œè¦ä¹ˆæ˜¯å­¦æ ¡æ–°é—»è½¬å‘ï¼Œæˆ–æ˜¯å¾®å•†å¸–å­ï¼Œç”šè‡³æ˜¯æŸä¸ªåŒå­¦éšæ‰‹è½¬å‘çš„äº’è”ç½‘æ–°é—»ç­‰ç­‰ã€‚</p>
<p>é‚£ä¸ªæ›¾ç»æ‰¿è½½äº†æˆ‘ä»¬æ— æ•°é’æ˜¥å›å¿†çš„ç¾¤èŠï¼Œä»¿ä½›å·²ç»æˆäº†äº’è”ç½‘ä¸Šä¸€ä¸ªè¢«é—å¿˜çš„è§’è½ã€‚æˆ‘ä»¬ä¼¼ä¹éƒ½é»˜å¥‘åœ°é€‰æ‹©äº†ä¸æ‰“æ‰°ï¼Œé€‰æ‹©äº†å„è‡ªå®‰å¥½ã€‚</p>
<p><strong>äºæ˜¯æˆ‘å°±åœ¨æƒ³ï¼Œä¸ºä»€ä¹ˆä¼šè¿™æ ·å‘¢ï¼Ÿ</strong></p>
<p>æ˜¯å¤§å®¶éƒ½å¿™äºç”Ÿè®¡ï¼ŒçœŸæŠ½ä¸å‡ºæ—¶é—´å—ï¼Ÿè¿˜æ˜¯é€šè®¯å¤ªå‘è¾¾äº†ï¼Œè®©æˆ‘ä»¬è§‰å¾—å³ä¾¿ä¸é¢å¯¹é¢ï¼Œä¹Ÿä»¿ä½›éšæ—¶èƒ½è”ç³»ä¸Šï¼Ÿäº¦æˆ–æ˜¯ï¼Œåœ¨æˆ‘ä»¬å†…å¿ƒæ·±å¤„ï¼Œå¯¹è¿™ç§å½¢å¼çš„èšä¼šï¼Œå·²ç»äº§ç”Ÿäº†ä¸€ç§éš¾ä»¥è¨€è¯´çš„å€¦æ€ å’Œç–ç¦»ï¼Ÿ</p>
<p>è¿™é‡Œæˆ‘ä¹Ÿæ¥è¯•ç€èŠä¸€èŠæˆ‘ä¸ªäººçš„ä¸€äº›ç†è§£å§ï¼Œä¹Ÿæ¬¢è¿å¤§å®¶ä¸€èµ·æ¥åˆ†äº«äº¤æµã€‚</p>
<hr/>
<p><strong>é¦–å…ˆèŠèŠå¿ƒæ€çš„å˜åŒ–ã€‚</strong></p>
<p>å¹´è½»çš„æ—¶å€™ï¼Œå¤§å®¶èšåœ¨ä¸€èµ·ï¼ŒèŠçš„æ˜¯æ¢¦æƒ³ï¼Œæ˜¯å…«å¦ï¼Œæ˜¯é‚£ä¸ªè°å–œæ¬¢è°çš„å°ç§˜å¯†ï¼Œæ˜¯è€ƒè¯•æˆç»©çš„èµ·èµ·è½è½ã€‚é‚£æ—¶å€™ï¼Œå¤§å®¶å½¼æ­¤æ˜¯å¯¹æ–¹é’æ˜¥å²æœˆé‡Œé‡è¦çš„è§è¯è€…ã€‚</p>
<p>ä½†éšç€å¹´å²æ¸é•¿ï¼Œæ­¥å…¥ç¤¾ä¼šï¼Œå¤§å®¶è¢«æŠ›å…¥äº†å„è‡ªçš„äººç”Ÿè½¨é“ã€‚å‡ å¹´ã€åå‡ å¹´è¿‡å»ï¼Œå¤§å®¶çš„å¢ƒé‡æ—©å·²åƒå·®ä¸‡åˆ«ã€‚</p>
<p>æœ‰çš„äººåœ¨èŒåœºæ˜¥é£å¾—æ„ï¼Œæœ‰çš„äººåœ¨åˆ›ä¸šè·¯ä¸Šæ‘¸çˆ¬æ»šæ‰“ï¼Œæœ‰çš„äººé€‰æ‹©å›å½’å®¶åº­ï¼Œä¹Ÿæœ‰çš„äººè¿˜åœ¨ä¸ºä¸‹ä¸€ä»½å·¥ä½œçš„å»å‘è€Œè¿·èŒ«ã€‚</p>
<p>è¿™æ—¶å€™å†èšåœ¨ä¸€èµ·ï¼ŒèŠä»€ä¹ˆå‘¢ï¼ŸèŠå·¥ä½œï¼Ÿæ€•å˜æˆç‚«è€€æˆ–è¯‰è‹¦çš„å¤§ä¼šã€‚èŠå®¶åº­ï¼Ÿæ²¡ç»“å©šçš„å°´å°¬ï¼Œç»“äº†å©šçš„å¯èƒ½æœ‰ä¸€è‚šå­è‹¦æ°´ã€‚èŠå­©å­ï¼Ÿé‚£ä¼¼ä¹æ›´æ˜¯å¦ä¸€ä¸ªæ¬¡å…ƒçš„è¯é¢˜äº†ã€‚</p>
<p>å¤§å®¶è¯•å›¾å°å¿ƒç¿¼ç¿¼åœ°é¿å¼€é‚£äº›å¯èƒ½å¼•èµ·ä¸é€‚çš„è¯é¢˜ï¼Œæœ€åå‘ç°èƒ½èŠçš„ï¼Œä¼¼ä¹åªå‰©ä¸‹ä¸€äº›è‹ç™½çš„å®¢å¥—å’Œå¯¹è¿‡å»çš„è®°å¿†ã€‚</p>
<p>è¿™æ ·ä¸€æ¥ï¼Œå°±å˜æˆå°¬èŠäº†ï¼Œæœ‰ç‚¹åƒé‚£ç§ç¤¾äº¤è¡¨æ¼”ï¼Œæ¼”å®Œå„è‡ªæ•£åœºï¼Œå¿ƒé‡Œåè€Œå¯èƒ½æ·»ä¸Šå‡ åˆ†ç©ºè½è½çš„ç–²æƒ«ã€‚</p>
<p><strong>å†è¯´è¯´ç”Ÿæ´»é‡å¿ƒçš„å˜åŒ–ã€‚</strong></p>
<p>æˆ‘ä»¬è¿™ä¸€ä»£äººï¼Œç°åœ¨å¤§å®¶ä¹Ÿé€æ¸æ­¥å…¥äº†ä¸Šæœ‰è€ä¸‹æœ‰å°çš„é˜¶æ®µäº†ã€‚</p>
<p>å·¥ä½œæ—¥è¦ä¸º KPIã€ä¸ºä»£ç ã€ä¸ºå„ç§çªå‘çŠ¶å†µç„¦å¤´çƒ‚é¢ï¼Œå‘¨æœ«é‚£ç‚¹å¯æ€œçš„ä¼‘æ¯æ—¶é—´ï¼Œæ¨ä¸å¾—å…¨éƒ¨ç”¨æ¥è¡¥è§‰ã€é™ªå®¶äººã€é™ªå­©å­ã€‚</p>
<p>å‚åŠ ä¸€æ¬¡åŒå­¦èšä¼šï¼Œæ„å‘³ç€è¦æå‰è§„åˆ’æ—¶é—´ï¼Œå¯èƒ½è¦èˆŸè½¦åŠ³é¡¿ï¼Œè¦åœ¨é¥­æ¡Œä¸Šåº”ä»˜å„ç§å¯’æš„å’Œè°ƒä¾ƒï¼Œè¿™æœ¬èº«å°±æ˜¯ä¸€ä»¶è€—è´¹å·¨å¤§ç²¾åŠ›çš„äº‹æƒ…ã€‚</p>
<p>è€Œèšä¼šå¸¦æ¥çš„â€œæ”¶ç›Šâ€å‘¢ï¼Ÿä¼¼ä¹é™¤äº†çŸ­æš‚çš„ã€ç”šè‡³æœ‰äº›è™šå‡çš„çƒ­é—¹ï¼Œå¹¶æ²¡æœ‰å¤ªå¤šå®è´¨æ€§æ„ä¹‰ã€‚</p>
<p>ä¸å…¶æŠŠå®è´µçš„ä¼‘æ¯æ—¶é—´èŠ±åœ¨å’Œä¸€ç¾¤å¯èƒ½å·²ç»é™Œç”Ÿçš„äººå°¬èŠä¸Šï¼Œä¸å¦‚åœ¨å®¶é™ªé™ªçˆ¶æ¯å­©å­ï¼Œæˆ–è€…ä¸€ä¸ªäººå®‰å®‰é™é™åœ°è¯»ä¼šä¹¦ã€æ‰“ä¼šæ¸¸æˆæ¥å¾—æƒ¬æ„å®åœ¨ã€‚</p>
<p>å¤§å®¶çš„ç²¾åŠ›å’Œæ—¶é—´ï¼Œè¶Šæ¥è¶Šå®è´µï¼Œä¹Ÿè¶Šæ¥è¶Šâ€œè‡ªç§â€å§ï¼Œå¯èƒ½åªæƒ³ç•™ç»™çœŸæ­£é‡è¦çš„äººå’Œäº‹ã€‚</p>
<p><strong>å½“ç„¶ï¼Œå¯èƒ½è¿˜æœ‰ä¸€ç§å¾®å¦™çš„å¿ƒç†åœ¨ä½œç¥Ÿï¼Œè™½ç„¶å¤§å®¶å˜´ä¸Šä¸è¯´ï¼Œä½†å¿ƒé‡Œéƒ½æ˜ç™½ï¼Œé‚£å°±æ˜¯æ¯”è¾ƒå’Œé˜²å¾¡ã€‚</strong></p>
<p>åŒå­¦èšä¼šï¼ŒæŸç§ç¨‹åº¦ä¸Šï¼Œä¹Ÿæ˜¯ä¸€åœºæ— å£°çš„æ”€æ¯”å¤§ä¼šã€‚è™½ç„¶å¤§å®¶æ˜é‡Œä¸è¯´ï¼Œä½†çœ¼ç›æ˜¯é›ªäº®çš„ã€‚</p>
<p>è°å¼€çš„è½¦å¥½ï¼Œè°ç©¿çš„è¡£æœè´µï¼Œè°çš„è¨€è°ˆä¸¾æ­¢æ›´æœ‰ç¤¾ä¼šåœ°ä½ï¼Œè°çš„å­©å­æ›´ä¼˜ç§€â€¦è¿™äº›ä¿¡æ¯ä¼šåƒé›·è¾¾ä¸€æ ·ï¼Œè‡ªåŠ¨æ‰«æã€æ¥æ”¶ã€å¤„ç†ã€‚</p>
<p>è¿™ç§æ¯”è¾ƒï¼Œå¾€å¾€ä¼šå¸¦æ¥ç„¦è™‘ã€å¤±è½ï¼Œç”šè‡³æ˜¯è‡ªå‘ã€‚ä¸ºäº†é¿å…è¿™ç§ä¸å¿…è¦çš„å¿ƒç†æ³¢åŠ¨ï¼Œå¾ˆå¤šäººé€‰æ‹©ä¸»åŠ¨å±è”½æ‰è¿™ç§å¯èƒ½å¼•å‘æ¯”è¾ƒçš„åœºæ™¯ã€‚</p>
<p>å¤§å®¶å¯èƒ½æ›´æ„¿æ„æ´»åœ¨è‡ªå·±çš„å°ä¸–ç•Œé‡Œï¼Œå®ˆæŠ¤ç€è‡ªå·±é‚£ä»½å¹³å‡¡çš„å®‰ç¨³ï¼Œè€Œä¸æ˜¯åœ¨èšä¼šçš„å–§åš£ä¸­ï¼Œè¢«åˆ«äººçš„å…‰èŠ’åˆºç—›çœ¼ç›ã€‚</p>
<p><strong>å½“ç„¶è¿˜æœ‰ä¸€ç‚¹ï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯å¤§å®¶å¯¹â€œåŒå­¦â€è¿™ä¸ªèº«ä»½çš„è®¤åŒæ„Ÿåœ¨æ¸æ¸æ·¡åŒ–å§ã€‚</strong></p>
<p>åœ¨å­¦æ ¡æ—¶ï¼Œå¤§å®¶å› ä¸ºå…±åŒçš„å­¦ä¹ ç¯å¢ƒã€å…±åŒçš„å¥‹æ–—ç›®æ ‡è€Œå‡èšåœ¨ä¸€èµ·ã€‚ä½†æ¯•ä¸šåï¼Œå¤§å®¶è¢«ç¤¾ä¼šè¿™æ‰€æ›´å¤§çš„å­¦æ ¡é‡æ–°å¡‘é€ ã€‚å¤§å®¶çš„ä»·å€¼è§‚ã€äººç”Ÿè§‚ã€ä¸–ç•Œè§‚ï¼Œéƒ½åœ¨å„è‡ªçš„ç»å†å’Œåœˆå­ä¸­å‘ç”Ÿäº†å˜åŒ–ã€‚</p>
<p>æ›¾ç»çš„å…±åŒè¯­è¨€ï¼Œå¯èƒ½æ—©å·²è¢«ç°å®çš„æ´ªæµå†²åˆ·å¾—æ‰€å‰©æ— å‡ ã€‚</p>
<p>æ›¾ç»çš„åŒå­¦æˆäº†ç¤¾ä¼šäººï¼Œèº«ä¸Šè´´æ»¡äº†å„ç§æ ‡ç­¾ï¼šçˆ¶äº²ã€æ¯äº²ã€ç¨‹åºå‘˜ã€äº§å“ç»ç†ã€é”€å”®ã€ä¸»ç®¡â€¦â€¦</p>
<p>ã€ŒåŒå­¦ã€è¿™ä¸ªæ ‡ç­¾åœ¨å½¼æ­¤èº«ä¸Šï¼Œæˆ–è®¸å·²ç»è¤ªè‰²æˆäº†æœ€ä¸é‡è¦ã€ç”šè‡³å¯ä»¥å¿½ç•¥ä¸è®¡çš„é‚£ä¸€ä¸ªã€‚</p>
<p>å¤§å®¶å¯èƒ½æ›´æ„¿æ„å’Œå¿—åŒé“åˆçš„æœ‹å‹ã€å’Œå·¥ä½œä¸Šçš„ä¼™ä¼´ã€å’Œå…´è¶£ç›¸æŠ•çš„åœˆå­äº¤å¾€ï¼Œå› ä¸ºé‚£é‡Œæœ‰æ›´ç›´æ¥çš„å…±é¸£å’Œæ›´æœ‰æ•ˆçš„è¿æ¥ã€‚</p>
<p>å½“ç„¶ï¼Œè¿™é‡Œå¹¶ä¸æ˜¯è¯´åŒå­¦èšä¼šå°±ä¸€æ— æ˜¯å¤„ï¼Œæˆ–è€…åº”è¯¥å½»åº•æ¶ˆå¤±ã€‚</p>
<p>æˆ‘åšä¿¡ï¼Œå¯¹äºæŸäº›äººï¼ŒæŸäº›ç‰¹å®šçš„åœˆå­ï¼ŒåŒå­¦èšä¼šä¾ç„¶æ˜¯ç»´ç³»æƒ…æ„Ÿçš„é‡è¦çº½å¸¦ã€‚</p>
<p>è€Œä¸”æˆ‘ä¹Ÿç›¸ä¿¡ï¼Œæ€»æœ‰ä¸€äº›çœŸæŒšçš„æƒ…è°Šï¼Œèƒ½å¤Ÿè·¨è¶Šæ—¶ç©ºçš„é˜»éš”ï¼Œå†ä¹…å¼¥æ–°ã€‚</p>
<p>åªæ˜¯ï¼Œå¯¹äºå¤§å¤šæ•°äººè€Œè¨€ï¼Œå¯¹äºè¿™ç§å½¢å¼çš„ã€å¸¦æœ‰æŸç§ä»ªå¼æ„Ÿçš„é›†ä½“èšä¼šå¯èƒ½ç¡®å®å·²ç»ä¸é‚£ä¹ˆçƒ­è¡·äº†ï¼Œå¤§å®¶è§‰å¾—å‘¢ï¼Ÿ</p>
<p>é‚£å…³äºè¿™ä¸ªé—®é¢˜ï¼Œä½ çš„çœ‹æ³•æ˜¯ä»€ä¹ˆå‘¢ï¼Œå¦‚æœæœ‰ä¸åŒçš„è§è§£ï¼Œä¹Ÿæ¬¢è¿ä¸€èµ·æ¥åˆ†äº«äº¤æµ~</p>
<blockquote>
<p>æ³¨ï¼šæœ¬æ–‡åœ¨GitHubå¼€æºä»“åº“ã€Œç¼–ç¨‹ä¹‹è·¯ã€ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Frd2coding%2FRoad2Coding" target="_blank" title="https://github.com/rd2coding/Road2Coding" ref="nofollow noopener noreferrer">github.com/rd2coding/Râ€¦</a> ä¸­å·²ç»æ”¶å½•ï¼Œé‡Œé¢æœ‰æˆ‘æ•´ç†çš„6å¤§ç¼–ç¨‹æ–¹å‘(å²—ä½)çš„è‡ªå­¦è·¯çº¿+çŸ¥è¯†ç‚¹å¤§æ¢³ç†ã€é¢è¯•è€ƒç‚¹ã€æˆ‘çš„ç®€å†ã€å‡ æœ¬ç¡¬æ ¸pdfç¬”è®°ï¼Œä»¥åŠç¨‹åºå‘˜ç”Ÿæ´»å’Œæ„Ÿæ‚Ÿï¼Œæ¬¢è¿starã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è¿½æ›´ HelloGitHub ä¸€æ•´å¹´ï¼Œç»ˆäºç­‰åˆ°äº†è¿™ç¯‡å¹´åº¦ç›˜ç‚¹]]></title>    <link>https://juejin.cn/post/7604697194794860554</link>    <guid>https://juejin.cn/post/7604697194794860554</guid>    <pubDate>2026-02-10T00:30:50.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604697194794860554" data-draft-id="7604433863726563382" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è¿½æ›´ HelloGitHub ä¸€æ•´å¹´ï¼Œç»ˆäºç­‰åˆ°äº†è¿™ç¯‡å¹´åº¦ç›˜ç‚¹"/> <meta itemprop="keywords" content="GitHub,å¼€æº"/> <meta itemprop="datePublished" content="2026-02-10T00:30:50.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="HelloGitHub"/> <meta itemprop="url" content="https://juejin.cn/user/1574156384091320"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è¿½æ›´ HelloGitHub ä¸€æ•´å¹´ï¼Œç»ˆäºç­‰åˆ°äº†è¿™ç¯‡å¹´åº¦ç›˜ç‚¹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1574156384091320/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    HelloGitHub
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-10T00:30:50.000Z" title="Tue Feb 10 2026 00:30:50 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»17åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>è½¬çœ¼ä¸€å¹´åˆè¿‡å»äº†ï¼Œæ˜¥èŠ‚å°†è‡³ HelloGitHub ä¹Ÿè¿æ¥äº†ä¸€å¹´ä¸€åº¦çš„å¹´åº¦ç›˜ç‚¹æ—¶åˆ»ã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œå°±è®©æˆ‘ä»¬ä¸€èµ·æ¥çœ‹çœ‹ï¼Œéƒ½æœ‰å“ªäº›å¼€æºé¡¹ç›®å…¥é€‰äº†ã€Š2025 å¹´ HelloGitHub å¹´åº¦çƒ­é—¨å¼€æºé¡¹ç›®ã€‹ã€‚<strong>éœ€è¦è¯´æ˜çš„æ˜¯</strong>ï¼Œå…¥é€‰å¹¶ä¸æ˜¯æŒ‰ç…§ Star å¢é•¿æˆ–â€œå‡ºåœˆâ€ç¨‹åº¦ä½œä¸ºå”¯ä¸€æ ‡å‡†ï¼Œè€Œæ˜¯æ›´çœ‹é‡æ¥è‡ª HelloGitHub ç¤¾åŒºç”¨æˆ·çš„çœŸå®åé¦ˆâ€”â€”é˜…è¯»ã€ç‚¹èµã€æ”¶è—ä¸è¯„è®ºç­‰ã€‚</p>
<p>å› æ­¤å¤§å®¶ä¸ºè‡ªå·±å–œæ¬¢çš„å¼€æºé¡¹ç›®ã€Œç‚¹èµã€ååˆ†é‡è¦ï¼Œæ¯ä¸€æ¬¡äº’åŠ¨éƒ½å¯èƒ½è®©ä½ å–œæ¬¢çš„å¼€æºé¡¹ç›®è¢«æ›´å¤šäººçœ‹åˆ°ã€‚</p>
<p>åŒæ—¶ä¸ºäº†æ»¡è¶³ä¸åŒè¯»è€…å¯¹å„ç±»å¼€æºé¡¹ç›®çš„å–œå¥½ï¼Œæˆ‘è¿˜æ•´ç†äº† 40 ä¸ªå¼€æºé¡¹ç›®ï¼ˆæ¯ç±»ç²¾é€‰ Top3ï¼‰ï¼Œé‡å¤§ç®¡é¥±æ€»ä¼šæœ‰ä½ å–œæ¬¢çš„ã€‚æ‰€ä»¥æˆ‘å°†æ–‡ç« å†…å®¹åˆ†ä¸ºäº† <strong>å¹´åº¦åä½³</strong> å’Œ <strong>åˆ†ç±»ç²¾é€‰</strong> ä¸¤ä¸ªéƒ¨åˆ†ï¼Œæ–¹ä¾¿å¤§å®¶é€Ÿè§ˆå’ŒæŒ‰éœ€é˜…è¯»ã€‚</p>
<ol>
<li>å¹´åº¦åä½³ï¼šHelloGitHub æœ€å—æ¬¢è¿çš„ 10 ä¸ªå¼€æºé¡¹ç›®</li>
<li>åˆ†ç±»ç²¾é€‰ï¼šæ ¹æ® C/C++ã€C#ã€Goã€Javaã€JavaScriptã€ç§»åŠ¨ç«¯ã€Pythonã€Rustã€äººå·¥æ™ºèƒ½ã€ä¹¦ç±/æ•™ç¨‹ã€å…¶å®ƒç­‰ç±»åˆ«æ•´ç†</li>
</ol>
<p>è¯ä¸å¤šè¯´ï¼Œå¼€å§‹æ²‰æµ¸å¼äº«å—è¿™ä»½æ¥è‡ª HelloGitHub çš„æ˜¥èŠ‚ç¤¼ç‰©å§ï½</p>
<h2 data-id="heading-0">ä¸€ã€å¹´åº¦åä½³</h2>
<p>è¿™é‡Œæ˜¯ HelloGitHub 2025 å¹´åº¦æœ€å—æ¬¢è¿çš„ 10 ä¸ªå¼€æºé¡¹ç›®ï¼Œç­›é€‰å’Œæ’åºæ˜¯ç»¼åˆäº†ç”¨æˆ·çš„æµè§ˆã€ç‚¹èµã€æ”¶è—å’Œè¯„è®ºç­‰æ•°æ®ï¼Œæ‰€ä»¥å®ƒä»¬æ˜¯æ¥è‡ª HelloGitHub ç¤¾åŒºå°ä¼™ä¼´ä»¬çš„é€‰æ‹©ï¼</p>
<h3 data-id="heading-1">1ã€è·¨å¹³å°å¯çˆ±çš„äº’åŠ¨æ¡Œå® åº”ç”¨</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fa0695c385c0417898268e65624a4b1a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGVsbG9HaXRIdWI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771288425&amp;x-signature=EXYIhT%2Fdf1mAwkTe8Jpu%2Bshq9ms%3D" alt="" loading="lazy"/></p>
<p>è¿™æ˜¯ä¸€æ¬¾å¼€æºçš„è·¨å¹³å°æ¡Œé¢å® ç‰©åº”ç”¨ï¼Œä»¥å¯çˆ±çš„çŒ«å’ªå½¢è±¡é™ªä¼´ä½ çš„æ¯ä¸€æ¬¡é”®ç›˜ä¸é¼ æ ‡æ“ä½œã€‚å®ƒåŸºäº Tauri æ„å»ºï¼Œæ”¯æŒ macOSã€Windows å’Œ Linuxï¼Œæ— è®ºä½ ä½¿ç”¨å“ªç§ç³»ç»Ÿï¼Œéƒ½èƒ½â€œé¢†å…»â€è¿™åªå¯çˆ±çŒ«å’ªï¼Œè®©ä½ çš„æ¡Œé¢å……æ»¡ä¹è¶£ã€‚</p>
<p><strong>ç”¨æˆ·è¯„ä»·</strong>ï¼šå¥½ç”¨ï¼Œåœ¨å…»äº†ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/72459baef65743d992d019de115619ce~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGVsbG9HaXRIdWI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771288425&amp;x-signature=4ABO0sN%2Ba%2F%2B6%2BdM5PRP7cMngd4A%3D" alt="" loading="lazy"/></p>
<blockquote>
<p>GitHub åœ°å€â†’<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fayangweb%2FBongoCat" target="_blank" title="https://github.com/ayangweb/BongoCat" ref="nofollow noopener noreferrer">github.com/ayangweb/Boâ€¦</a></p>
</blockquote>
<h3 data-id="heading-2">2ã€å¼€ç®±å³ç”¨çš„æ¸¸æˆå˜é€Ÿå™¨</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/81a98e3e9f804066ae9d4695e6645626~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGVsbG9HaXRIdWI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771288425&amp;x-signature=iK2ODIMKLV%2F634XOMQwCzVou%2FVE%3D" alt="" loading="lazy"/></p>
<p>è¿™æ˜¯ä¸€æ¬¾å®Œå…¨å…è´¹ã€å¼€æºçš„ Windows æ¸¸æˆåŠ é€Ÿå·¥å…·ã€‚å®ƒé€šè¿‡ Hook ç³»ç»Ÿæ—¶é—´å‡½æ•°ï¼Œå®ç°å¯¹æ¸¸æˆé€Ÿåº¦çš„çµæ´»è°ƒèŠ‚ï¼Œå¹¶æä¾›ç®€å•æ˜“ç”¨çš„ç•Œé¢ï¼Œå…¼å®¹å¤šç§å•æœºæ¸¸æˆã€‚è¯·å‹¿ç”¨äºç½‘ç»œæ¸¸æˆï¼Œä»¥å…å¯¼è‡´è´¦å·è¢«å°ï¼</p>
<p><strong>ç”¨æˆ·è¯„ä»·</strong>ï¼šå¾ˆå¥½ç”¨ï¼Œå¾ˆå¯ä»¥ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/904c553c123d4efe843b09d4dd6e6061~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGVsbG9HaXRIdWI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771288425&amp;x-signature=xXRRWbaAVVJwYT2A4fNa4pY%2BaFM%3D" alt="" loading="lazy"/></p>
<blockquote>
<p>GitHub åœ°å€â†’<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fgame1024%2FOpenSpeedy" target="_blank" title="https://github.com/game1024/OpenSpeedy" ref="nofollow noopener noreferrer">github.com/game1024/Opâ€¦</a></p>
</blockquote>
<h3 data-id="heading-3">3ã€æ²‰æµ¸å¼çš„ç”µå­ä¹¦é˜…è¯»å™¨</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f215844af82f499d86894beeb08a9f6b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGVsbG9HaXRIdWI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771288425&amp;x-signature=4mW8YU%2F8lyoeiEUnhju6ejqHDI4%3D" alt="" loading="lazy"/></p>
<p>è¿™æ˜¯ä¸€æ¬¾ä¸ºçƒ­çˆ±é˜…è¯»çš„ç”¨æˆ·é‡èº«æ‰“é€ çš„é˜…è¯»è½¯ä»¶ï¼Œå°†æç®€è®¾è®¡ä¸å¼ºå¤§åŠŸèƒ½èåˆï¼Œä¸ºä½ å¸¦æ¥ä¸“æ³¨ã€æ²‰æµ¸çš„é˜…è¯»ä½“éªŒã€‚å®ƒåŸºäº Next.js å’Œ Tauri å¼€å‘ï¼Œæ”¯æŒè·¨å¹³å°è¿è¡Œï¼Œç°å·²æ”¯æŒ macOSã€Windowsã€Linuxã€Androidã€iOS å’Œ Web å…¨å¹³å°è¦†ç›–ã€‚</p>
<p><strong>ç”¨æˆ·è¯„ä»·</strong>ï¼šå¥½ç”¨ï¼Œç‰¹åˆ«æ˜¯åœ¨çº¿ç‰ˆï¼Œæµç•…ä¸æ»‘ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fcc7b9ab17bc4438ae7189f65735dc3d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGVsbG9HaXRIdWI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771288425&amp;x-signature=wrYwp7hNUH%2BoXiq4i09CgLw5A7Y%3D" alt="" loading="lazy"/></p>
<blockquote>
<p>GitHub åœ°å€â†’<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Freadest%2Freadest" target="_blank" title="https://github.com/readest/readest" ref="nofollow noopener noreferrer">github.com/readest/reaâ€¦</a></p>
</blockquote>
<h3 data-id="heading-4">4ã€æ¯æ—¥ 60 ç§’èµ„è®¯ API é›†åˆ</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/71b961066b9546e19fbc5856e9f0c639~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGVsbG9HaXRIdWI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771288425&amp;x-signature=aes2Z8cKzX18KSGtMyEovGCn4B0%3D" alt="" loading="lazy"/></p>
<p>è¯¥é¡¹ç›®é›†åˆäº†åŒ…æ‹¬æ¯æ—¥æ–°é—»ã€å®æ—¶ç¥¨æˆ¿ã€æ±‡ç‡ã€çƒ­æœæ¦œã€éšæœºæ®µå­ç­‰å¤šç§æ•°æ®çš„ API æœåŠ¡ã€‚</p>
<p><strong>ç”¨æˆ·è¯„ä»·</strong>ï¼šå¥½ç”¨ï¼Œç§ç±»æŒºå¤šçš„ï¼Œæ”¯æŒã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/925ea58af2a241db9622ac39b8a47014~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGVsbG9HaXRIdWI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771288425&amp;x-signature=DTgfdXZSERngKxXfcq09owym2bk%3D" alt="" loading="lazy"/></p>
<blockquote>
<p>GitHub åœ°å€â†’<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fvikiboss%2F60s" target="_blank" title="https://github.com/vikiboss/60s" ref="nofollow noopener noreferrer">github.com/vikiboss/60â€¦</a></p>
</blockquote>
<h3 data-id="heading-5">5ã€æ˜“ç”¨çš„è·¨å¹³å°å¼€æºèŠå¤©åº”ç”¨</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/727318d26e854d68b78a71e373e3eff2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGVsbG9HaXRIdWI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771288425&amp;x-signature=NOow8zAYmiolSfMsV0wo4Oi%2B3yo%3D" alt="" loading="lazy"/></p>
<p>è¿™æ˜¯ä¸€æ¬¾ä¸“ä¸ºå¤šç«¯æ‰“é€ çš„ç°ä»£åŒ–å³æ—¶é€šè®¯ç³»ç»Ÿï¼Œå®ç°äº†ä»æ¡Œé¢åˆ°ç§»åŠ¨å¹³å°çš„æ— ç¼é€šè®¯ä½“éªŒã€‚å®ƒåŸºäº Tauriã€Vite 6ã€Vue 3 å’Œ TypeScript æ„å»ºï¼Œæ”¯æŒä¸€å¯¹ä¸€ç§èŠã€ç¾¤ç»„èŠå¤©ã€æ¶ˆæ¯æ’¤å›å’Œ@æé†’ç­‰åŠŸèƒ½ï¼Œé€‚ç”¨äº Windowsã€macOSã€Linuxã€iOS å’Œ Android ç­‰å¤šç§æ“ä½œç³»ç»Ÿã€‚</p>
<p><strong>ç”¨æˆ·è¯„ä»·</strong>ï¼šåªæ˜¯åœ¨æ–‡ç« ä¸­å¤šçœ‹äº†ä¸€çœ¼ï¼Œå°±è¢«æƒŠè‰³åˆ°äº†ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/902671219300497f87bb7fb4af5cce5a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGVsbG9HaXRIdWI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771288425&amp;x-signature=7A8g8g5%2B3tWgtD1in78tnDF4hzw%3D" alt="" loading="lazy"/></p>
<blockquote>
<p>GitHub åœ°å€â†’<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FHuLaSpark%2FHuLa" target="_blank" title="https://github.com/HuLaSpark/HuLa" ref="nofollow noopener noreferrer">github.com/HuLaSpark/Hâ€¦</a></p>
</blockquote>
<h3 data-id="heading-6">6ã€å…¨å¼€æºçš„å®æ—¶èµ„è®¯å¹³å°</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5300dafcc7e2439ba324572b6249cb88~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGVsbG9HaXRIdWI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771288425&amp;x-signature=4p8jquWAOBZLvkh43UF5ZtDF5yM%3D" alt="" loading="lazy"/></p>
<p>è¿™æ˜¯ä¸€æ¬¾é«˜é¢œå€¼çš„å®æ—¶æ–°é—»ä¸çƒ­æ¦œç½‘ç«™ï¼Œç›¸æ¯”ä¼ ç»Ÿçƒ­æ¦œäº§å“æ›´åŠ æ³¨é‡å®æ—¶æ–°é—»ã€‚å®ƒå‰åç«¯å®Œå…¨å¼€æºã€éƒ¨ç½²ç®€å•ï¼Œå¯è½»æ¾æ‰˜ç®¡åˆ° Cloudflare Pages æˆ– Vercel ç­‰å¹³å°ã€‚</p>
<p><strong>ç”¨æˆ·è¯„ä»·</strong>ï¼šå¤ªæ£’äº†ï¼Œä¸€è§ˆæ‰€æœ‰æ–°é—»çƒ­æ¦œã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/144b653ea680493d988796aa6bf01e71~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGVsbG9HaXRIdWI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771288425&amp;x-signature=YYP5lnL0pX%2Bs3r0uDF6PqnnqfIc%3D" alt="" loading="lazy"/></p>
<blockquote>
<p>GitHub åœ°å€â†’<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fourongxing%2Fnewsnow" target="_blank" title="https://github.com/ourongxing/newsnow" ref="nofollow noopener noreferrer">github.com/ourongxing/â€¦</a></p>
</blockquote>
<h3 data-id="heading-7">7ã€ç”¨ Excel æ‰‹æ“å„ç§ AI ç®—æ³•</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1b01f35169f2429296fd1372c43b63af~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGVsbG9HaXRIdWI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771288425&amp;x-signature=P8QYipoMVWSKKP%2FVH0AGhnEP3Gs%3D" alt="" loading="lazy"/></p>
<p>è¯¥é¡¹ç›®æ˜¯é€šè¿‡ Excel çš„å½¢å¼å®ç°å¹¶æ¼”ç¤ºäººå·¥æ™ºèƒ½ä¸æ·±åº¦å­¦ä¹ çš„æ ¸å¿ƒç®—æ³•å’Œæ¦‚å¿µï¼Œè®©åˆå­¦è€…å¯ä»¥åŠ¨æ‰‹æ“ä½œå¹¶ç†è§£ AI çš„è¿è¡ŒåŸç†ï¼ŒåŒ…æ‹¬çŸ©é˜µä¹˜æ³•ã€MLPã€RNNã€Transformerã€ResNet ç­‰ï¼Œä»¥ç‹¬ç‰¹ä¸”æµ…æ˜¾æ˜“æ‡‚çš„å½¢å¼ï¼Œé™ä½äº† AI å­¦ä¹ çš„é—¨æ§›ã€‚</p>
<p><strong>ç”¨æˆ·è¯„ä»·</strong>ï¼šæœ‰ä¸­æ–‡æ–‡æ¡£å°±å¥½äº†ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9554b5d55a0b4094acedc5aded704f0e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGVsbG9HaXRIdWI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771288425&amp;x-signature=gvd6Bwx6C2AyWkKZqm8D9515%2Bx8%3D" alt="" loading="lazy"/></p>
<blockquote>
<p>GitHub åœ°å€â†’<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FImagineAILab%2Fai-by-hand-excel" target="_blank" title="https://github.com/ImagineAILab/ai-by-hand-excel" ref="nofollow noopener noreferrer">github.com/ImagineAILaâ€¦</a></p>
</blockquote>
<h3 data-id="heading-8">8ã€ä»é›¶å¼€å§‹è®­ç»ƒå°å‹è¯­è¨€æ¨¡å‹</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/29a59fc0a0ab4ff2b60b422e868f0864~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGVsbG9HaXRIdWI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771288425&amp;x-signature=BfKdjJ8om7MSTV5YkQami0v%2FgaA%3D" alt="" loading="lazy"/></p>
<p>è¿™ä¸ä»…æ˜¯ä¸€ä¸ªå¾®å‹è¯­è¨€æ¨¡å‹çš„å®ç°ï¼Œæ›´æ˜¯ä¸€ä»½å…¥é—¨ LLM çš„æ•™ç¨‹ï¼Œæ—¨åœ¨é™ä½å­¦ä¹ å’Œä¸Šæ‰‹ LLM çš„é—¨æ§› ã€‚å®ƒæä¾›äº†ä»æ•°æ®é¢„å¤„ç†åˆ°æ¨¡å‹è®­ç»ƒã€å¾®è°ƒå’Œæ¨ç†çš„å…¨æµç¨‹ä»£ç å’Œæ•™ç¨‹ã€‚æœ€å°æ¨¡å‹ä»… 0.02B å‚æ•°ï¼Œå¯åœ¨æ™®é€š GPU ä¸Šè½»æ¾è¿è¡Œã€‚</p>
<p><strong>ç”¨æˆ·è¯„ä»·</strong>ï¼šè¯•äº†ä¸€éä¸é”™ã€‚é™ä½å‚æ•°ï¼Œè¿æˆ‘è¿™ä¸ªå…¥é—¨æ˜¾å¡éƒ½èƒ½è·‘ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/232a4cbc22774c3682f67275924b2614~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGVsbG9HaXRIdWI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771288425&amp;x-signature=VBrh6v8GI71ZqY7YJEOzXHPSCN8%3D" alt="" loading="lazy"/></p>
<blockquote>
<p>GitHub åœ°å€â†’<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fjingyaogong%2Fminimind" target="_blank" title="https://github.com/jingyaogong/minimind" ref="nofollow noopener noreferrer">github.com/jingyaogongâ€¦</a></p>
</blockquote>
<h3 data-id="heading-9">9ã€å¼€æºåœ†è§’ç­‰å®½å­—ä½“</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4771ee95796a4ebca748dda145e326bf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGVsbG9HaXRIdWI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771288425&amp;x-signature=rR%2Blpt%2BhFMbvwnTVB0fnOxhGFds%3D" alt="" loading="lazy"/></p>
<p>è¿™æ˜¯ä¸€æ¬¾é«˜è´¨é‡çš„ç­‰å®½å­—ä½“ï¼Œå…·å¤‡å¯å˜å­—ä½“ã€åœ†è§’è®¾è®¡ã€æ™ºèƒ½è¿å­—ã€å›¾æ ‡ç­‰ç‰¹æ€§ï¼Œæ”¯æŒç®€ä½“ä¸­æ–‡ã€ç¹ä½“ä¸­æ–‡å’Œæ—¥è¯­å­—ç¬¦é›†ï¼Œä»¥åŠé€šè¿‡è„šæœ¬è‡ªå®šä¹‰æ„å»ºå­—ä½“ï¼Œæ»¡è¶³ä¸åŒå¹³å°å’Œä¸ªæ€§åŒ–éœ€æ±‚ã€‚</p>
<p><strong>ç”¨æˆ·è¯„ä»·</strong>ï¼šçœŸçš„å¾ˆå¥½ç”¨ï¼ï¼å¾ˆå¥½çœ‹è€Œä¸”ç­‰å®½å¤ªèˆ’æœäº†ï¼æœ€èˆ’æœçš„æ˜¯è¿å†™ï¼Œæ›´è´´è¿‘è‡ªç„¶è¯­è¨€ï¼</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2a23ba55b27545d09a22f72f610bfa8b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGVsbG9HaXRIdWI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771288425&amp;x-signature=%2BNg873yuT7bxfv%2BJT6L8fbFscP8%3D" alt="" loading="lazy"/></p>
<blockquote>
<p>GitHub åœ°å€â†’<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fsubframe7536%2Fmaple-font" target="_blank" title="https://github.com/subframe7536/maple-font" ref="nofollow noopener noreferrer">github.com/subframe753â€¦</a></p>
</blockquote>
<h3 data-id="heading-10">10ã€DeepSeek å¼€æºçš„æ··åˆä¸“å®¶æ¨¡å‹</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2fa69d5f42dd4b30b8418c608cd57cf8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGVsbG9HaXRIdWI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771288425&amp;x-signature=ofqUlDYb7hW3itgWObaCjArQLuE%3D" alt="" loading="lazy"/></p>
<p>è¿™æ˜¯ä¸€ä¸ªåŸºäºæ··åˆä¸“å®¶ï¼ˆMoEï¼‰å’Œå¤šå¤´æ½œåœ¨æ³¨æ„åŠ›ï¼ˆMLAï¼‰æ¶æ„çš„å¼€æºå¤§è¯­è¨€æ¨¡å‹ï¼Œåœ¨æ•°å­¦æ¨ç†ã€ä»£ç ç”Ÿæˆç­‰å¤æ‚ä»»åŠ¡ä¸­è¡¨ç°ä¼˜ç§€ã€‚è¯¥æ¨¡å‹æ€»è§„æ¨¡è¾¾ 671B å‚æ•°ï¼Œä½†æ¯ä¸ª token åªæ¿€æ´»å…¶ä¸­çš„ 37B å‚æ•°ã€‚å³åœ¨å¤„ç†è¾“å…¥æ—¶ï¼Œå¹¶éæ‰€æœ‰â€œä¸“å®¶â€éƒ½å‚ä¸è®¡ç®—ï¼Œè€Œæ˜¯é€‰æ‹©ä¸€éƒ¨åˆ†ä¸“å®¶è¿›è¡Œå¤„ç†ã€‚é€šè¿‡æ¿€æ´»éƒ¨åˆ†å‚æ•°ï¼ˆ37Bï¼‰å®Œæˆè®¡ç®—ï¼Œä»è€Œé™ä½äº†è®­ç»ƒå’Œæ¨ç†çš„æˆæœ¬ã€‚</p>
<p><strong>ç”¨æˆ·è¯„ä»·</strong>ï¼šå›½äº§ä¹‹å…‰å‰å®³ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a00d01fc545745dea7d6311122626221~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGVsbG9HaXRIdWI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771288425&amp;x-signature=2a%2BzsYcLHclpq7L3aKqYaAj4hFU%3D" alt="" loading="lazy"/></p>
<blockquote>
<p>GitHub åœ°å€â†’<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fdeepseek-ai%2FDeepSeek-V3" target="_blank" title="https://github.com/deepseek-ai/DeepSeek-V3" ref="nofollow noopener noreferrer">github.com/deepseek-aiâ€¦</a></p>
</blockquote>
<h2 data-id="heading-11">äºŒã€åˆ†ç±»ç²¾é€‰</h2>
<p>å¦‚æœä¸Šé¢çš„<strong>å¹´åº¦åä½³</strong>ï¼Œæ²¡æœ‰ä½ å–œæ¬¢çš„å¼€æºé¡¹ç›®ï¼Œæ²¡å…³ç³»ï¼</p>
<pre><code class="hljs language-markdown" lang="markdown">========================================
<span class="hljs-section">ğŸ“Š 2025å¹´åº¦æ•°æ®æ¦‚è§ˆ
========================================</span>
å‘å¸ƒé¡¹ç›®æ•°     : 588
æ€»æµè§ˆé‡(UV)  : 1,253,290
æ€»æ”¶è—æ•°      : 4,462
æ€»è¯„è®ºæ•°      : 650
æ€»æŠ•ç¥¨æ•°      : 5,936
</code></pre>
<p>ä¸‹é¢æˆ‘ä»å…¶ä½™çš„ 500 å¤šä¸ªé¡¹ç›®é‡Œï¼ŒæŒ‰ç…§ 11 ä¸ªåˆ†ç±»æ•´ç†ç²¾é€‰å‡ºå…± 40 ä¸ªå¼€æºé¡¹ç›®ï¼Œå¤§éƒ¨åˆ†åˆ†ç±»åªå– Top3ï¼Œæ–¹ä¾¿å¤§å®¶é˜…è¯»ã€‚</p>
<h3 data-id="heading-12">C/C++ é¡¹ç›®</h3>
<p>1ã€<a href="https://link.juejin.cn?target=https%3A%2F%2Fhellogithub.com%2Fperiodical%2Fstatistics%2Fclick%3Ftarget%3Dhttps%3A%2F%2Fgithub.com%2Fvladelaina%2FCatime" target="_blank" title="https://hellogithub.com/periodical/statistics/click?target=https://github.com/vladelaina/Catime" ref="nofollow noopener noreferrer">Catime</a>ï¼šç®€æ´å°å·§çš„ Windows è®¡æ—¶å™¨ã€‚è¿™æ˜¯ä¸€æ¬¾è½»å·§æ˜“ç”¨çš„ Windows è®¡æ—¶å™¨ï¼Œé›†æ˜¾ç¤ºæ—¶é—´ã€å€’è®¡æ—¶å’Œç•ªèŒ„æ—¶é’ŸåŠŸèƒ½äºä¸€ä½“ã€‚å®ƒé‡‡ç”¨ C è¯­è¨€ç¼–å†™ï¼Œä½“ç§¯å°ã€å ç”¨å°‘ï¼Œæ”¯æŒé€æ˜ç•Œé¢ã€‚ç”¨æˆ·å¯ä»¥è°ƒæ•´ç•Œé¢å¤§å°å’Œä½ç½®ï¼Œè®¾ç½®è¶…æ—¶åŠ¨ä½œï¼ˆé”å±/é€šçŸ¥/å…³æœºï¼‰ï¼Œä»¥åŠè‡ªå®šä¹‰é¢œè‰²ã€å­—ä½“å’Œæ‰˜ç›˜åŠ¨ç”»ï¼Œæ»¡è¶³ä¸ªæ€§åŒ–éœ€æ±‚ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/da64b1a829844e8c8bf02f490fe55735~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGVsbG9HaXRIdWI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771288425&amp;x-signature=oymsAOWZWuEELbA1USCGgLTM9eU%3D" alt="" loading="lazy"/></p>
<p>2ã€<a href="https://link.juejin.cn?target=https%3A%2F%2Fhellogithub.com%2Fperiodical%2Fstatistics%2Fclick%3Ftarget%3Dhttps%3A%2F%2Fgithub.com%2FHIllya51%2FLunaTranslator" target="_blank" title="https://hellogithub.com/periodical/statistics/click?target=https://github.com/HIllya51/LunaTranslator" ref="nofollow noopener noreferrer">LunaTranslator</a>ï¼šå¼€æºçš„è§†è§‰å°è¯´ç¿»è¯‘å·¥å…·ã€‚è¿™æ˜¯ä¸€æ¬¾ä¸“ä¸º Windows å¹³å°è®¾è®¡çš„è§†è§‰å°è¯´ç¿»è¯‘å™¨ï¼Œæ”¯æŒ HOOKã€OCRã€å‰ªè´´æ¿ç­‰å¤šç§æ–‡æœ¬æå–æ–¹å¼ï¼Œå¯çµæ´»åˆ‡æ¢ï¼Œå¹¶æä¾›åœ¨çº¿ç¿»è¯‘ã€ç¦»çº¿ç¿»è¯‘ã€è¯­éŸ³åˆæˆç­‰åŠŸèƒ½ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/00862290105c4e5b8ced01c49a027147~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGVsbG9HaXRIdWI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771288425&amp;x-signature=BG57tI101zaI1n2XFzk%2BFhThyDE%3D" alt="" loading="lazy"/></p>
<p>3ã€<a href="https://link.juejin.cn?target=https%3A%2F%2Fhellogithub.com%2Fperiodical%2Fstatistics%2Fclick%3Ftarget%3Dhttps%3A%2F%2Fgithub.com%2Fzhongyang219%2FMusicPlayer2" target="_blank" title="https://hellogithub.com/periodical/statistics/click?target=https://github.com/zhongyang219/MusicPlayer2" ref="nofollow noopener noreferrer">MusicPlayer2</a>ï¼šå¤šåŠŸèƒ½çš„ Windows éŸ³ä¹æ’­æ”¾å™¨ã€‚è¯¥é¡¹ç›®æ˜¯ä¸€æ¬¾ç”± C++ ç¼–å†™çš„ç®€çº¦ã€å°å·§ã€å¤šåŠŸèƒ½çš„ Windows æœ¬åœ°éŸ³ä¹æ’­æ”¾å™¨ï¼Œæ”¯æŒå¸¸è§éŸ³é¢‘æ ¼å¼ï¼Œå¹¶æä¾›æ­Œè¯æ˜¾ç¤ºã€å¡æ‹‰ OK æ¨¡å¼ã€æ­Œè¯ç¼–è¾‘ã€ä¸“è¾‘å°é¢å±•ç¤ºã€é¢‘è°±åˆ†æå’ŒéŸ³æ•ˆè°ƒèŠ‚ç­‰åŠŸèƒ½ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c061e91bad9043d6898d1da40d42fe7c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGVsbG9HaXRIdWI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771288425&amp;x-signature=eW7FUoH5%2FhSiLh%2F%2BLIFqEUVSAsI%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-13">C# é¡¹ç›®</h3>
<p>4ã€<a href="https://link.juejin.cn?target=https%3A%2F%2Fhellogithub.com%2Fperiodical%2Fstatistics%2Fclick%3Ftarget%3Dhttps%3A%2F%2Fgithub.com%2FClassIsland%2FClassIsland" target="_blank" title="https://hellogithub.com/periodical/statistics/click?target=https://github.com/ClassIsland/ClassIsland" ref="nofollow noopener noreferrer">ClassIsland</a>ï¼šæŠ¬å¤´å³è§çš„å¼€æºè¯¾è¡¨å·¥å…·ã€‚è¿™æ˜¯ä¸€æ¬¾ä¸“ä¸ºå¤§å±è®¾å¤‡æ‰“é€ çš„æ¡Œé¢è¯¾è¡¨åº”ç”¨ï¼Œå¯å°†è¯¾ç¨‹è¡¨ä»¥ç®€æ´ç»„ä»¶çš„å½¢å¼å¸¸é©»æ¡Œé¢ï¼Œå–ä»£ä¼ ç»Ÿé»‘æ¿è¯¾è¡¨ã€‚æ”¯æŒä¸‹è¯¾æé†’ã€å¤©æ°”ä¿¡æ¯ã€å€’è®¡æ—¶ã€å¯†ç ä¿æŠ¤å’Œè¯¾è¡¨å¯¼å…¥ç­‰åŠŸèƒ½ï¼Œé€‚ç”¨äºé…å¤‡æ•™å®¤å¤šåª’ä½“å¤§å±ã€æŠ•å½±ä»ªæˆ–æ™ºæ…§é»‘æ¿çš„æ•™å®¤ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e270addef8bf4ad18cf801e3d9206a61~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGVsbG9HaXRIdWI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771288425&amp;x-signature=t9qNgwszyv3AKYnqSoBiT8%2Bc8xk%3D" alt="" loading="lazy"/></p>
<p>5ã€<a href="https://link.juejin.cn?target=https%3A%2F%2Fhellogithub.com%2Fperiodical%2Fstatistics%2Fclick%3Ftarget%3Dhttps%3A%2F%2Fgithub.com%2Fw4po%2FExplorerTabUtility" target="_blank" title="https://hellogithub.com/periodical/statistics/click?target=https://github.com/w4po/ExplorerTabUtility" ref="nofollow noopener noreferrer">ExplorerTabUtility</a>ï¼šWindows æ–‡ä»¶ç®¡ç†å¤šæ ‡ç­¾æ‰©å±•å·¥å…·ã€‚è¿™æ˜¯ä¸€æ¬¾ä¸“ä¸º Windows 11 æ‰“é€ çš„æ–‡ä»¶èµ„æºç®¡ç†å™¨å¢å¼ºå·¥å…·ï¼Œèƒ½å¤Ÿè‡ªåŠ¨å°†å¤šä¸ªçª—å£åˆå¹¶ä¸ºå•çª—å£å¤šæ ‡ç­¾é¡µæ¨¡å¼ã€‚æ”¯æŒè·¯å¾„å»é‡ã€æ ‡ç­¾æœç´¢ã€æ‰¹é‡æ‰“å¼€/å…³é—­/è¿˜åŸç­‰åŠŸèƒ½ï¼Œè½»æ¾å‘Šåˆ«æ¡Œé¢çª—å£æ‚ä¹±çš„çƒ¦æ¼ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/daa01c5334564ed1bffef32090f80ea3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGVsbG9HaXRIdWI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771288425&amp;x-signature=5c4nXpH3Htm5bTYhLNx59QFS3ds%3D" alt="" loading="lazy"/></p>
<p>6ã€<a href="https://link.juejin.cn?target=https%3A%2F%2Fhellogithub.com%2Fperiodical%2Fstatistics%2Fclick%3Ftarget%3Dhttps%3A%2F%2Fgithub.com%2Fduplicati%2Fduplicati" target="_blank" title="https://hellogithub.com/periodical/statistics/click?target=https://github.com/duplicati/duplicati" ref="nofollow noopener noreferrer">duplicati</a>ï¼šè·¨å¹³å°çš„å¤šäº‘å®‰å…¨å¤‡ä»½å·¥å…·ã€‚è¿™æ˜¯ä¸€æ¬¾è·¨å¹³å°çš„å¤‡ä»½å®¢æˆ·ç«¯ï¼Œæ”¯æŒå¤šç§ä¸»æµäº‘å­˜å‚¨æœåŠ¡ï¼ˆå¦‚ S3ã€Dropboxã€Google Drive ç­‰ï¼‰ã€‚å®ƒå¯å°†åŠ å¯†ã€å¢é‡ã€å‹ç¼©çš„å¤‡ä»½æ–‡ä»¶å®‰å…¨åœ°å­˜å‚¨åˆ°äº‘ç«¯æˆ–æœåŠ¡å™¨ï¼Œé€‚ç”¨äºä¸ªäººéšç§æ•°æ®çš„äº‘å¤‡ä»½ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d89b3d9c48734746bea3eea431fddc90~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGVsbG9HaXRIdWI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771288425&amp;x-signature=Kszqj8L9taNAyJuPQz9iPuL7JGc%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-14">Go é¡¹ç›®</h3>
<p>7ã€<a href="https://link.juejin.cn?target=https%3A%2F%2Fhellogithub.com%2Fperiodical%2Fstatistics%2Fclick%3Ftarget%3Dhttps%3A%2F%2Fgithub.com%2Flin-snow%2FEch0" target="_blank" title="https://hellogithub.com/periodical/statistics/click?target=https://github.com/lin-snow/Ech0" ref="nofollow noopener noreferrer">Ech0</a>ï¼šæ¸…çˆ½çš„è½»é‡çº§å†…å®¹åˆ†äº«å¹³å°ã€‚è¿™æ˜¯ä¸€æ¬¾å¼€æºã€è‡ªæ‰˜ç®¡çš„è½»é‡çº§å†…å®¹å‘å¸ƒå¹³å°ï¼Œä¸“æ³¨äºæ€æƒ³æµåŠ¨å’Œå¿«é€Ÿåˆ†äº«ã€‚å®ƒæ‹¥æœ‰ç®€æ´ç›´è§‚çš„æ“ä½œç•Œé¢ï¼Œæ”¯æŒå‘å¸ƒå’Œåˆ†äº«æƒ³æ³•ã€æ–‡å­—ã€å›¾ç‰‡å’Œé“¾æ¥ã€‚åŒæ—¶ï¼Œæ”¯æŒç±»ä¼¼ ActivityPub çš„è”é‚¦åè®®ï¼Œå®ç°ä¸åŒå®ä¾‹ï¼ˆç«™ç‚¹ï¼‰ä¹‹é—´çš„äº’è”äº’é€šï¼Œè®©å†…å®¹ä¸å†å±€é™äºå•ä¸€å­¤ç«‹çš„ç½‘ç«™ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cbd2448cbd2d4fc5b2f7489a5ac289e2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGVsbG9HaXRIdWI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771288425&amp;x-signature=afW77rqdHRDRzK39hCe9SIkBVxw%3D" alt="" loading="lazy"/></p>
<p>8ã€<a href="https://link.juejin.cn?target=https%3A%2F%2Fhellogithub.com%2Fperiodical%2Fstatistics%2Fclick%3Ftarget%3Dhttps%3A%2F%2Fgithub.com%2Fmayswind%2Fezbookkeeping" target="_blank" title="https://hellogithub.com/periodical/statistics/click?target=https://github.com/mayswind/ezbookkeeping" ref="nofollow noopener noreferrer">ezbookkeeping</a>ï¼šè½»æ¾è‡ªæ‰˜ç®¡ä½ çš„ä¸ªäººè´¢åŠ¡æ•°æ®ã€‚è¿™æ˜¯ä¸€æ¬¾å…è´¹ã€è½»é‡ã€å¯è‡ªæ‰˜ç®¡çš„ä¸ªäººè®°è´¦åº”ç”¨ï¼Œé‡‡ç”¨ Go+Vue æ„å»ºã€‚å®ƒç•Œé¢ç®€æ´æ˜“ç”¨ã€åŠŸèƒ½ä¸°å¯Œï¼Œæ”¯æŒäºŒçº§è´¦æˆ·ï¼ˆä¸ªäºº/å®¶åº­ï¼‰ã€æ”¶æ”¯åˆ†ç±»ã€äº¤æ˜“å›¾ç‰‡é™„ä»¶ã€å®šæœŸæ”¶æ”¯è‡ªåŠ¨è®°è´¦ç­‰åŠŸèƒ½ã€‚å€ŸåŠ© PWA æŠ€æœ¯ï¼Œå¯ä¸€é”®æ·»åŠ åˆ°æ‰‹æœºä¸»å±å¹•ï¼Œä½“éªŒåª²ç¾åŸç”Ÿ Appã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/59e1f3bd8af64589a4ccab9b43f889a3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGVsbG9HaXRIdWI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771288425&amp;x-signature=gRjRvJE5qU30GnptNSBqhavYcRc%3D" alt="" loading="lazy"/></p>
<p>9ã€<a href="https://link.juejin.cn?target=https%3A%2F%2Fhellogithub.com%2Fperiodical%2Fstatistics%2Fclick%3Ftarget%3Dhttps%3A%2F%2Fgithub.com%2Ftbphp%2Fgpt-load" target="_blank" title="https://hellogithub.com/periodical/statistics/click?target=https://github.com/tbphp/gpt-load" ref="nofollow noopener noreferrer">gpt-load</a>ï¼šä¼ä¸šçº§çš„å¤šæ¸ é“å¤§æ¨¡å‹ API ç®¡ç†å¹³å°ã€‚è¿™æ˜¯ä¸€æ¬¾ç”¨ Go è¯­è¨€å¼€å‘çš„ä¼ä¸šçº§å¤§æ¨¡å‹æ¥å£ç®¡ç†å¹³å°ï¼Œæ”¯æŒ OpenAIã€Geminiã€Claude ç­‰å¤šç§æœåŠ¡ã€‚å®ƒå¼€ç®±å³ç”¨ã€å†…ç½® Web ç®¡ç†ç•Œé¢ã€ä¿ç•™åŸç”Ÿ API æ ¼å¼ï¼Œæ”¯æŒå¯†é’¥è‡ªåŠ¨è½®è¯¢ã€æ•…éšœåˆ‡æ¢å’Œæ°´å¹³æ‰©å±•ï¼Œä¸“ä¸ºé«˜å¹¶å‘ç”Ÿäº§ç¯å¢ƒè€Œè®¾è®¡ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/57f7d3359aef46849c79abd0bd5a1b82~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGVsbG9HaXRIdWI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771288425&amp;x-signature=nz%2BQu6e1E2RUPgP1%2FArnEJJ6jQs%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-15">Java é¡¹ç›®</h3>
<p>10ã€<a href="https://link.juejin.cn?target=https%3A%2F%2Fhellogithub.com%2Fperiodical%2Fstatistics%2Fclick%3Ftarget%3Dhttps%3A%2F%2Fgithub.com%2Fnagisa77%2FOpenIsle" target="_blank" title="https://hellogithub.com/periodical/statistics/click?target=https://github.com/nagisa77/OpenIsle" ref="nofollow noopener noreferrer">OpenIsle</a>ï¼šJava å¼€å‘çš„è½»é‡çº§å¼€æºç¤¾åŒºç³»ç»Ÿã€‚è¿™æ˜¯ä¸€ä¸ªåŸºäº Spring Boot å’Œ Vue3 æ„å»ºçš„å¼€æºè‡ªç”±ç¤¾åŒºç³»ç»Ÿï¼Œå®šä½ä¸ºè½»é‡çº§çš„ Discourseã€‚å®ƒå®Œå…¨å¼€æºã€å¯äºŒæ¬¡å¼€å‘ï¼Œæ”¯æŒç™½åå•é‚€è¯·ã€è‡ªå®šä¹‰æ ‡ç­¾ã€å®æ—¶é€šçŸ¥ç­‰åŠŸèƒ½ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bd02051767634e09bbd0a572f77523ff~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGVsbG9HaXRIdWI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771288425&amp;x-signature=6ag3xzM7ls9LijVeiE1Tm6wLQwc%3D" alt="" loading="lazy"/></p>
<p>11ã€<a href="https://link.juejin.cn?target=https%3A%2F%2Fhellogithub.com%2Fperiodical%2Fstatistics%2Fclick%3Ftarget%3Dhttps%3A%2F%2Fgithub.com%2Fbooklore-app%2Fbooklore" target="_blank" title="https://hellogithub.com/periodical/statistics/click?target=https://github.com/booklore-app/booklore" ref="nofollow noopener noreferrer">booklore</a>ï¼šJava å¼€å‘çš„ä¸ªäººæ•°å­—å›¾ä¹¦é¦†ã€‚è¿™æ˜¯ä¸€æ¬¾å¼€æºã€è‡ªæ‰˜ç®¡çš„ç”µå­ä¹¦ç®¡ç† Web åº”ç”¨ï¼Œæ”¯æŒ PDF å’Œ ePub ç”µå­ä¹¦æ ¼å¼ã€‚å®ƒé‡‡ç”¨ Javaï¼ˆSpring Bootï¼‰+ Angular å¼€å‘ï¼Œæ”¯æŒè‡ªåŠ¨è·å–ä¹¦ç±ä¿¡æ¯ã€åˆ†äº«ä¹¦ç±ã€é˜…è¯»è¿›åº¦åŒæ­¥ã€å¤šç”¨æˆ·ç®¡ç†ç­‰åŠŸèƒ½ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5224c9cecfbb4bbc964f3fbef2785045~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGVsbG9HaXRIdWI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771288425&amp;x-signature=VZM%2FTuf%2BgvcIY7NYQ93M9Xs4Y2k%3D" alt="" loading="lazy"/></p>
<p>12ã€<a href="https://link.juejin.cn?target=https%3A%2F%2Fhellogithub.com%2Fperiodical%2Fstatistics%2Fclick%3Ftarget%3Dhttps%3A%2F%2Fgithub.com%2Fsynthetichealth%2Fsynthea" target="_blank" title="https://hellogithub.com/periodical/statistics/click?target=https://github.com/synthetichealth/synthea" ref="nofollow noopener noreferrer">synthea</a>ï¼šæ¨¡æ‹Ÿæ‚£è€…äººç¾¤çš„å¼€æºå·¥å…·ã€‚è¿™æ˜¯ä¸€æ¬¾å¼€æºçš„åˆæˆæ‚£è€…æ•°æ®å’Œå¥åº·è®°å½•çš„æ¨¡æ‹Ÿå™¨ï¼Œæ”¯æŒç”Ÿæˆç—…å†ã€ç—‡çŠ¶ã€è¯Šæ–­ã€è¯ç‰©ã€ç–«è‹—æ¥ç§è®°å½•ç­‰å¤šç§åŒ»ç–—ä¿¡æ¯æ•°æ®ï¼Œé€‚ç”¨äºä¸´åºŠç ”ç©¶ã€æµè¡Œç—…å­¦ç ”ç©¶ç­‰åœºæ™¯ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/458941b675874aeeb4332c45c1f23597~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGVsbG9HaXRIdWI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771288425&amp;x-signature=IMyA53%2B7Pp%2Bab%2B7Ki2%2FoGXCnszM%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-16">JavaScript é¡¹ç›®</h3>
<p>13ã€<a href="https://link.juejin.cn?target=https%3A%2F%2Fhellogithub.com%2Fperiodical%2Fstatistics%2Fclick%3Ftarget%3Dhttps%3A%2F%2Fgithub.com%2Fzyronon%2FTypeWords" target="_blank" title="https://hellogithub.com/periodical/statistics/click?target=https://github.com/zyronon/TypeWords" ref="nofollow noopener noreferrer">TypeWords</a>ï¼šæç®€çš„æ‰“å­—èƒŒå•è¯ç½‘ç«™ã€‚è¿™æ˜¯ä¸€æ¬¾åŸºäºç½‘é¡µçš„èƒŒå•è¯è½¯ä»¶ï¼Œå¸®åŠ©ç”¨æˆ·é€šè¿‡é”®ç›˜è¾“å…¥æ¥è®°å¿†å•è¯ã€‚å®ƒç•Œé¢ç®€æ´ã€äº¤äº’æµç•…ï¼Œæ”¯æŒå•è¯å‘éŸ³ã€é”™è¯¯ç»Ÿè®¡å’Œç”Ÿè¯æœ¬ç­‰åŠŸèƒ½ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/539d88f07b8448cfbaac94022a4d019e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGVsbG9HaXRIdWI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771288425&amp;x-signature=9q2EbVvPXtCzQf5XoohJfCvlnPs%3D" alt="" loading="lazy"/></p>
<p>14ã€<a href="https://link.juejin.cn?target=https%3A%2F%2Fhellogithub.com%2Fperiodical%2Fstatistics%2Fclick%3Ftarget%3Dhttps%3A%2F%2Fgithub.com%2Fplait-board%2Fdrawnix" target="_blank" title="https://hellogithub.com/periodical/statistics/click?target=https://github.com/plait-board/drawnix" ref="nofollow noopener noreferrer">drawnix</a>ï¼šæç®€çš„åœ¨çº¿ç™½æ¿å·¥å…·ã€‚è¿™æ˜¯ä¸€æ¬¾å…è´¹ã€å¼€æºçš„åœ¨çº¿ç™½æ¿å·¥å…·ã€‚å®ƒæä¾›ä¸€ä¸ªæ— é™ç”»å¸ƒï¼Œæ”¯æŒè‡ªç”±ç»˜åˆ¶ã€æ€ç»´å¯¼å›¾ã€æµç¨‹å›¾ã€ç”»ç¬”ã€æ’å…¥å›¾ç‰‡ã€è‡ªåŠ¨ä¿å­˜ç­‰åŠŸèƒ½ï¼Œä»¥åŠç§»åŠ¨ç«¯é€‚é…ã€Docker éƒ¨ç½²å’Œæ’ä»¶æœºåˆ¶ç­‰ç‰¹æ€§ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/af83046bc8be4fc8adb495c9a81a52f2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGVsbG9HaXRIdWI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771288425&amp;x-signature=KaIRiagpUoTMKorF%2FbimepMaTpA%3D" alt="" loading="lazy"/></p>
<p>15ã€<a href="https://link.juejin.cn?target=https%3A%2F%2Fhellogithub.com%2Fperiodical%2Fstatistics%2Fclick%3Ftarget%3Dhttps%3A%2F%2Fgithub.com%2Falgerkong%2FAlgerMusicPlayer" target="_blank" title="https://hellogithub.com/periodical/statistics/click?target=https://github.com/algerkong/AlgerMusicPlayer" ref="nofollow noopener noreferrer">AlgerMusicPlayer</a>ï¼šç®€çº¦ç¾è§‚çš„éŸ³ä¹æ’­æ”¾å™¨ã€‚è¿™æ˜¯ä¸€æ¬¾åŸºäº Electron å¼€å‘çš„ç¬¬ä¸‰æ–¹éŸ³ä¹æ’­æ”¾å™¨ï¼Œæ‹¥æœ‰é«˜é¢œå€¼çš„ç•Œé¢å’Œä¸°å¯Œçš„åŠŸèƒ½ï¼Œæ”¯æŒæœ¬åœ°åŒ–æœåŠ¡ã€æ¡Œé¢æ­Œè¯æ˜¾ç¤ºã€éŸ³ä¹ä¸‹è½½ç­‰ï¼Œé€‚ç”¨äºå¤šå¹³å°ä½¿ç”¨ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fc9ccab072554ec1af54335b229d52f4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGVsbG9HaXRIdWI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771288425&amp;x-signature=Y2pdzhRsbbAEauNbB0BKKw9nmes%3D" alt="" loading="lazy"/></p>
<p>16ã€<a href="https://link.juejin.cn?target=https%3A%2F%2Fhellogithub.com%2Fperiodical%2Fstatistics%2Fclick%3Ftarget%3Dhttps%3A%2F%2Fgithub.com%2FhexianWeb%2FCubeCity" target="_blank" title="https://hellogithub.com/periodical/statistics/click?target=https://github.com/hexianWeb/CubeCity" ref="nofollow noopener noreferrer">CubeCity</a>ï¼šå¡é€šé£æ ¼åŸå¸‚å»ºè®¾æ¨¡æ‹Ÿæ¸¸æˆã€‚è¿™æ˜¯ä¸€æ¬¾è½»é‡çº§ã€å¡é€šé£æ ¼çš„ 2.5D åŸå¸‚æ¨¡æ‹Ÿæ¸¸æˆï¼ŒåŸºäº Three.js å’Œ Vue3 æ„å»ºã€‚ç©å®¶å¯åœ¨æµè§ˆå™¨ä¸­é€šè¿‡ç‚¹é€‰å’Œæ‹–æ”¾ï¼Œå®æ—¶å»ºé€ ã€æ¬è¿å’Œæ‹†é™¤å»ºç­‘ã€‚å»ºç­‘ä¼šè‡ªåŠ¨äº§å‡ºé‡‘å¸ï¼Œå¯ç”¨äºæ–°å»ºæˆ–å‡çº§è®¾æ–½ã€‚æ¸¸æˆèåˆäº†ç¯å¢ƒã€ç¤¾ä¼šä¸æ²»ç†ï¼ˆESGï¼‰ç†å¿µï¼ŒåŸå¸‚è§„åˆ’éœ€å…¼é¡¾å¤šå…ƒéœ€æ±‚ï¼Œæ‰èƒ½æ‰“é€ å‡ºå¯æŒç»­å‘å±•çš„ç†æƒ³åŸå¸‚ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5d8c548d64364e6681ab68d428a8c969~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGVsbG9HaXRIdWI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771288425&amp;x-signature=%2F4ij9h0VUs7MWV5nel%2FeqB5YThw%3D" alt="" loading="lazy"/></p>
<p>17ã€<a href="https://link.juejin.cn?target=https%3A%2F%2Fhellogithub.com%2Fperiodical%2Fstatistics%2Fclick%3Ftarget%3Dhttps%3A%2F%2Fgithub.com%2Ffuma-nama%2Ffumadocs" target="_blank" title="https://hellogithub.com/periodical/statistics/click?target=https://github.com/fuma-nama/fumadocs" ref="nofollow noopener noreferrer">fumadocs</a>ï¼šç”¨ Next.js æ‰“é€ ç°ä»£åŒ–çš„æ–‡æ¡£ç½‘ç«™ã€‚è¯¥é¡¹ç›®æ˜¯åŸºäº Next.js æ„å»ºçš„æ–‡æ¡£ç½‘ç«™æ¡†æ¶ï¼Œä¸“ä¸ºå¿«é€Ÿåˆ›å»ºç°ä»£åŒ–ã€é«˜é¢œå€¼ã€åŠŸèƒ½ä¸°å¯Œçš„æ–‡æ¡£ç½‘ç«™è€Œè®¾è®¡ã€‚å®ƒå®Œå…¨é‡‡ç”¨ ESM æ ¼å¼ï¼Œç´§è·Ÿå‰ç«¯æŠ€æœ¯æ½®æµï¼Œæ”¯æŒå†…å®¹é›†åˆã€MDXã€Contentlayerã€TailwindCSS ç­‰æŠ€æœ¯ï¼Œé€‚ç”¨äºé¡¹ç›®æ–‡æ¡£ã€API æ–‡æ¡£ã€å¼€å‘æŒ‡å—ç­‰å¤šç§æ–‡æ¡£éœ€æ±‚ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bbbf7f3ae5ce431ca34bcd075a1eeb4b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGVsbG9HaXRIdWI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771288425&amp;x-signature=%2F1BRivd6hTiGXCnLYwnAQgZMOOM%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-17">å®¢æˆ·ç«¯é¡¹ç›®</h3>
<p>18ã€<a href="https://link.juejin.cn?target=https%3A%2F%2Fhellogithub.com%2Fperiodical%2Fstatistics%2Fclick%3Ftarget%3Dhttps%3A%2F%2Fgithub.com%2Fsaber-notes%2Fsaber" target="_blank" title="https://hellogithub.com/periodical/statistics/click?target=https://github.com/saber-notes/saber" ref="nofollow noopener noreferrer">saber</a>ï¼šæ›´æ‡‚ä½ çš„æ‰‹å†™ç¬”è®°åº”ç”¨ã€‚è¿™æ˜¯ä¸€æ¬¾å¼€æºçš„æ‰‹å†™ç¬”è®°åº”ç”¨ï¼Œæ”¯æŒ Androidã€iOSã€Windowsã€macOSã€Linux ç­‰å¹³å°ã€‚å®ƒæä¾›å¤œé—´æ¨¡å¼ã€å¤šè¡Œå…¬å¼é«˜äº®ã€å¯†ç ä¿æŠ¤ç­‰åŠŸèƒ½ï¼Œé€‚ç”¨äºè®°å½•è¯¾å ‚ç¬”è®°å’Œæ•´ç†å·¥ä½œæ€è·¯ç­‰åœºæ™¯ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3b7a35ae640b4295a5082cf169279f1a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGVsbG9HaXRIdWI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771288425&amp;x-signature=WTv6vhcyt15sX%2BLgJ%2FSi2H%2FNIt4%3D" alt="" loading="lazy"/></p>
<p>19ã€<a href="https://link.juejin.cn?target=https%3A%2F%2Fhellogithub.com%2Fperiodical%2Fstatistics%2Fclick%3Ftarget%3Dhttps%3A%2F%2Fgithub.com%2Fkylecorry31%2FTrail-Sense" target="_blank" title="https://hellogithub.com/periodical/statistics/click?target=https://github.com/kylecorry31/Trail-Sense" ref="nofollow noopener noreferrer">Trail-Sense</a>ï¼šé‡å¤–ç”Ÿå­˜å¿…å¤‡ Android åº”ç”¨ã€‚è¿™æ˜¯ä¸€æ¬¾ä¸“ä¸ºå¾’æ­¥ã€éœ²è¥ã€é‡å¤–ç”Ÿå­˜ç­‰åœºæ™¯è®¾è®¡çš„å¼€æº Android åº”ç”¨ã€‚å®ƒåˆ©ç”¨æ‰‹æœºçš„ä¼ æ„Ÿå™¨ï¼Œæä¾›ç¦»çº¿å¯¼èˆªã€æ—¥è½æé†’ã€ç…§ç‰‡åœ°å›¾ã€è·¯å¾„è¿½è¸ªç­‰å®ç”¨åŠŸèƒ½ï¼Œæ‰€æœ‰åŠŸèƒ½å‡å¯åœ¨æ— ç½‘ç»œç¯å¢ƒä¸‹ä½¿ç”¨ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f2f2c076830244708569771b197a5747~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGVsbG9HaXRIdWI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771288425&amp;x-signature=FoCJ1YMcETTGGfUoSxPF%2Fh%2BgnuI%3D" alt="" loading="lazy"/></p>
<p>20ã€<a href="https://link.juejin.cn?target=https%3A%2F%2Fhellogithub.com%2Fperiodical%2Fstatistics%2Fclick%3Ftarget%3Dhttps%3A%2F%2Fgithub.com%2FTosencen%2FXMSLEEP" target="_blank" title="https://hellogithub.com/periodical/statistics/click?target=https://github.com/Tosencen/XMSLEEP" ref="nofollow noopener noreferrer">XMSLEEP</a>ï¼šå¼€æºçš„ Android ç™½å™ªéŸ³åº”ç”¨ã€‚è¿™æ˜¯ä¸€ä¸ªä¸“æ³¨äºç™½å™ªéŸ³æ’­æ”¾çš„ Android åº”ç”¨ï¼Œæä¾›é›¨å£°ã€ç¯ç«ã€é›·å£°ã€çŒ«å’ªå‘¼å™œã€é¸Ÿé¸£ã€å¤œè™«ç­‰å¤šç§è‡ªç„¶å£°éŸ³ï¼Œå¸®åŠ©ä½ æ”¾æ¾ã€å†¥æƒ³å’Œå…¥ç¡ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/658a908bebb74c4fb0f78d4e8fbf1e72~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGVsbG9HaXRIdWI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771288425&amp;x-signature=O5KG%2FYIf5R8eNgtLUL3I%2FsHRNEU%3D" alt="" loading="lazy"/></p>
<p>21ã€<a href="https://link.juejin.cn?target=https%3A%2F%2Fhellogithub.com%2Fperiodical%2Fstatistics%2Fclick%3Ftarget%3Dhttps%3A%2F%2Fgithub.com%2Fapple%2Fcontainer" target="_blank" title="https://hellogithub.com/periodical/statistics/click?target=https://github.com/apple/container" ref="nofollow noopener noreferrer">container</a>ï¼šè‹¹æœå¼€æºçš„è½»é‡çº§è™šæ‹Ÿæœºã€‚è¿™æ˜¯ä¸€æ¬¾è‹¹æœå®˜æ–¹å¼€æºçš„è½»é‡çº§è™šæ‹ŸåŒ–å®¹å™¨å·¥å…·ï¼Œç”¨äºåœ¨ Mac ä¸Šåˆ›å»ºå’Œè¿è¡Œ Linux å®¹å™¨ã€‚å®ƒé‡‡ç”¨ Swift å¼€å‘ï¼Œå¹¶é’ˆå¯¹ Apple èŠ¯ç‰‡ï¼ˆå¦‚ M1ã€M2 èŠ¯ç‰‡ï¼‰è¿›è¡Œäº†ä¼˜åŒ–ï¼Œæ—¨åœ¨ä¸º macOS ç”¨æˆ·æä¾›é«˜æ•ˆã€åŸç”Ÿçš„å®¹å™¨ä½“éªŒï¼Œæ”¯æŒ OCI æ ‡å‡†å®¹å™¨é•œåƒï¼Œå¹¶å¯æ— ç¼å¯¹æ¥ Docker Hub ç­‰ä¸»æµé•œåƒä»“åº“ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d827c16d7bb844d4b23a84d029f22e98~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGVsbG9HaXRIdWI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771288425&amp;x-signature=gvxhnokjTJ1kbHrTsZpfZjHq8nQ%3D" alt="" loading="lazy"/></p>
<p>22ã€<a href="https://link.juejin.cn?target=https%3A%2F%2Fhellogithub.com%2Fperiodical%2Fstatistics%2Fclick%3Ftarget%3Dhttps%3A%2F%2Fgithub.com%2FLunarBar-app%2FLunarBar" target="_blank" title="https://hellogithub.com/periodical/statistics/click?target=https://github.com/LunarBar-app/LunarBar" ref="nofollow noopener noreferrer">LunarBar</a>ï¼šæç®€çš„ Mac èœå•æ æ—¥å†ã€‚è¿™æ˜¯ä¸€æ¬¾ä¸“ä¸º macOS è®¾è®¡çš„èœå•æ æ—¥å†å·¥å…·ï¼Œæ”¯æŒå†œå†ã€èŠ‚æ—¥ã€èŠ‚æ°”å’Œæé†’ç­‰åŠŸèƒ½ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9eefb0b7bfb64796bd47978e8327e256~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGVsbG9HaXRIdWI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771288425&amp;x-signature=6SK5BnM7%2BY5eU%2F%2BleIGJmIftHBM%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-18">Python é¡¹ç›®</h3>
<p>23ã€<a href="https://link.juejin.cn?target=https%3A%2F%2Fhellogithub.com%2Fperiodical%2Fstatistics%2Fclick%3Ftarget%3Dhttps%3A%2F%2Fgithub.com%2Fzauberzeug%2Fnicegui" target="_blank" title="https://hellogithub.com/periodical/statistics/click?target=https://github.com/zauberzeug/nicegui" ref="nofollow noopener noreferrer">nicegui</a>ï¼šç®€å•æ˜“ç”¨çš„ Python UI æ¡†æ¶ã€‚è¯¥é¡¹ç›®æ˜¯åŸºäº Python çš„ç”¨æˆ·ç•Œé¢æ¡†æ¶ï¼Œæ”¯æŒçº¯ Python å¼€å‘ Web æˆ–æ¡Œé¢åº”ç”¨ã€‚åªéœ€å‡ è¡Œä»£ç ï¼Œå³å¯ç”ŸæˆæŒ‰é’®ã€å›¾è¡¨ã€3D åœºæ™¯ç­‰ 50 å¤šç§ç»„ä»¶ï¼Œè§£å†³äº†ä¼ ç»Ÿ Python GUI è·¨å¹³å°éº»çƒ¦ã€å‰ç«¯å¼€å‘é—¨æ§›é«˜ç­‰é—®é¢˜ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/54285ed0273740799f49fe1b004509a2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGVsbG9HaXRIdWI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771288425&amp;x-signature=kKtM1JzMgfZ6Cmtp5Qf3FDIn82M%3D" alt="" loading="lazy"/></p>
<p>24ã€<a href="https://link.juejin.cn?target=https%3A%2F%2Fhellogithub.com%2Fperiodical%2Fstatistics%2Fclick%3Ftarget%3Dhttps%3A%2F%2Fgithub.com%2FAstrBotDevs%2FAstrBot" target="_blank" title="https://hellogithub.com/periodical/statistics/click?target=https://github.com/AstrBotDevs/AstrBot" ref="nofollow noopener noreferrer">AstrBot</a>ï¼šæ˜“ä¸Šæ‰‹çš„å¤šå¹³å° LLM èŠå¤©æœºå™¨äººã€‚è¯¥é¡¹ç›®æ˜¯åŸºäº Python æ„å»ºçš„ LLM èŠå¤©æœºå™¨äººåŠå¼€å‘æ¡†æ¶ï¼Œæ”¯æŒé›†æˆå¤šç§æ¶ˆæ¯å¹³å°å’Œå¤§è¯­è¨€æ¨¡å‹ã€‚å®ƒæä¾›äº†å¯è§†åŒ–ç®¡ç†é¢æ¿å’Œçµæ´»çš„æ’ä»¶æ‰©å±•æœºåˆ¶ï¼Œæ”¯æŒé€Ÿç‡é™åˆ¶ã€ç™½åå•ã€å…³é”®è¯è¿‡æ»¤ã€å›¾ç‰‡ç†è§£å’Œè¯­éŸ³è½¬æ–‡å­—ç­‰åŠŸèƒ½ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5c7be02aaadd42068e9a20fb338f2a3b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGVsbG9HaXRIdWI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771288425&amp;x-signature=7%2F1PfneO9irgOCgmB71VA0xXaQM%3D" alt="" loading="lazy"/></p>
<p>25ã€<a href="https://link.juejin.cn?target=https%3A%2F%2Fhellogithub.com%2Fperiodical%2Fstatistics%2Fclick%3Ftarget%3Dhttps%3A%2F%2Fgithub.com%2Fdabeaz-course%2Fpython-mastery" target="_blank" title="https://hellogithub.com/periodical/statistics/click?target=https://github.com/dabeaz-course/python-mastery" ref="nofollow noopener noreferrer">python-mastery</a>ï¼šé«˜çº§ Python ç¼–ç¨‹æ•™ç¨‹ã€‚è¯¥é¡¹ç›®æ˜¯ç”± Python ç¤¾åŒºçŸ¥åä¸“å®¶ã€ã€ŠPython Cookbookã€‹ä½œè€… David Beazley ç¼–å†™çš„é«˜çº§ Python ç¼–ç¨‹è¯¾ç¨‹ï¼Œå†…å®¹å®Œå…¨å¼€æºï¼Œæ¶µç›–ç”Ÿæˆå™¨ã€åç¨‹ã€å…ƒç¼–ç¨‹ã€æ¨¡å—ä¸åŒ…ç­‰ï¼Œé€‚åˆæœ‰ä¸€å®š Python åŸºç¡€çš„å­¦ä¹ è€…ã€‚</p>
<h3 data-id="heading-19">Rust é¡¹ç›®</h3>
<p>26ã€<a href="https://link.juejin.cn?target=https%3A%2F%2Fhellogithub.com%2Fperiodical%2Fstatistics%2Fclick%3Ftarget%3Dhttps%3A%2F%2Fgithub.com%2Feythaann%2FSeelen-UI" target="_blank" title="https://hellogithub.com/periodical/statistics/click?target=https://github.com/eythaann/Seelen-UI" ref="nofollow noopener noreferrer">Seelen-UI</a>ï¼šé«˜åº¦å¯å®šåˆ¶çš„ Windows æ¡Œé¢ç¾åŒ–å·¥å…·ã€‚è¿™æ˜¯ä¸€æ¬¾å…è´¹å¼€æºçš„ Windows æ¡Œé¢å¢å¼ºå·¥å…·ï¼Œä¸“æ³¨äºé«˜åº¦è‡ªå®šä¹‰å’Œæ•ˆç‡æå‡ã€‚å®ƒé‡‡ç”¨ Rust è¯­è¨€å¼€å‘ï¼Œç»“åˆ Tauri æ¡†æ¶ä¸ Web æŠ€æœ¯ï¼Œæ”¯æŒçª—å£å¹³é“ºç®¡ç†ã€åº”ç”¨å¯åŠ¨å™¨ã€Dockã€ä»»åŠ¡æ ã€åŠ¨æ€å£çº¸ã€æ’ä»¶æ‰©å±•ç­‰åŠŸèƒ½ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9cf3c098a0de499ea460f8d3567d14a7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGVsbG9HaXRIdWI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771288425&amp;x-signature=146TQH%2FN2m7ziVGlX0ih22cb3iQ%3D" alt="" loading="lazy"/></p>
<p>27ã€<a href="https://link.juejin.cn?target=https%3A%2F%2Fhellogithub.com%2Fperiodical%2Fstatistics%2Fclick%3Ftarget%3Dhttps%3A%2F%2Fgithub.com%2Frustfs%2Frustfs" target="_blank" title="https://hellogithub.com/periodical/statistics/click?target=https://github.com/rustfs/rustfs" ref="nofollow noopener noreferrer">rustfs</a>ï¼šåŸºäº Rust çš„é«˜æ€§èƒ½åˆ†å¸ƒå¼å­˜å‚¨ç³»ç»Ÿã€‚è¯¥é¡¹æ˜¯ç”¨ Rust æ„å»ºçš„é«˜æ€§èƒ½åˆ†å¸ƒå¼å¯¹è±¡å­˜å‚¨ç³»ç»Ÿï¼Œè‡´åŠ›äºæˆä¸º MinIO çš„å¼€æºæ›¿ä»£å“ã€‚å®ƒå®‰è£…ç®€å•ã€å…¼å®¹ S3 åè®®ï¼Œé‡‡ç”¨æ›´å‹å¥½çš„å¼€æºåè®®ï¼Œå¹¶å†…ç½®ç•Œé¢æ¸…çˆ½çš„ Web ç®¡ç†åå°ã€‚åŒæ—¶ï¼Œæ”¯æŒå›½äº§ä¿å¯†è®¾å¤‡å’Œç³»ç»Ÿï¼Œé€‚ç”¨äºæµ·é‡æ•°æ®å­˜å‚¨ã€å¤§æ•°æ®ã€äº’è”ç½‘ã€å·¥ä¸šå’Œä¿å¯†å­˜å‚¨ç­‰åœºæ™¯ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/feedcc7777ad476a89c12f3a0ae82bb4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGVsbG9HaXRIdWI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771288425&amp;x-signature=6pZnSCgu0%2FMVDgVDx7piebQ6hSI%3D" alt="" loading="lazy"/></p>
<p>28ã€<a href="https://link.juejin.cn?target=https%3A%2F%2Fhellogithub.com%2Fperiodical%2Fstatistics%2Fclick%3Ftarget%3Dhttps%3A%2F%2Fgithub.com%2Fhanshuaikang%2FNping" target="_blank" title="https://hellogithub.com/periodical/statistics/click?target=https://github.com/hanshuaikang/Nping" ref="nofollow noopener noreferrer">Nping</a>ï¼šRust çš„å¤šåœ°å€å¹¶å‘ Ping å·¥å…·ã€‚è¿™æ˜¯ä¸€ä¸ªç”¨ Rust å¼€å‘çš„å¯è§†åŒ– Ping å·¥å…·ï¼Œæ”¯æŒåŒæ—¶å¯¹å¤šä¸ªç›®æ ‡åœ°å€å¹¶å‘ Ping æ“ä½œã€‚å®ƒæä¾›äº†åˆ†åŒºæŠ˜çº¿å›¾å’Œè¡¨æ ¼è§†å›¾ç­‰å¯è§†åŒ–å±•ç¤ºï¼Œæ”¯æŒå®æ—¶åŠ¨æ€å±•ç¤ºå»¶è¿Ÿã€ä¸¢åŒ…ç‡ç­‰æ€§èƒ½æŒ‡æ ‡ï¼ŒåŒæ—¶å…¼å®¹ IPv4 å’Œ IPv6 ç½‘ç»œç¯å¢ƒã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a9dc50ecba1e4239bb0241fc23029a0c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGVsbG9HaXRIdWI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771288425&amp;x-signature=1%2BMKb5Ft4Xez6N1M3ACYcTMczcY%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-20">äººå·¥æ™ºèƒ½</h3>
<p>29ã€<a href="https://link.juejin.cn?target=https%3A%2F%2Fhellogithub.com%2Fperiodical%2Fstatistics%2Fclick%3Ftarget%3Dhttps%3A%2F%2Fgithub.com%2Fcodexu%2Fnote-gen" target="_blank" title="https://hellogithub.com/periodical/statistics/click?target=https://github.com/codexu/note-gen" ref="nofollow noopener noreferrer">note-gen</a>ï¼šåŸºäº AI çš„ Markdown ç¬”è®°åº”ç”¨ã€‚è¿™æ˜¯ä¸€æ¬¾è·¨å¹³å°çš„ Markdown ç¬”è®°åº”ç”¨ï¼Œä¸“æ³¨äºç”¨ AI æ­å»ºâ€œè®°å½•-å†™ä½œâ€çš„æ¡¥æ¢ã€‚å®ƒä¸ä»…æ”¯æŒæˆªå›¾ã€æ–‡æœ¬ã€æ’å›¾ç­‰å¤šç§è®°å½•æ–¹å¼ï¼Œè¿˜èƒ½é€šè¿‡ AI æ¨¡å‹å°†è¿™äº›ç¢ç‰‡åŒ–å†…å®¹æ•´ç†æˆå¯è¯»çš„ç¬”è®°ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/89c2ff6520654bcab5342b32ab12baa8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGVsbG9HaXRIdWI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771288425&amp;x-signature=HoZl7WhW2CXonQAw27O6vIx%2Fe6Q%3D" alt="" loading="lazy"/></p>
<p>30ã€<a href="https://link.juejin.cn?target=https%3A%2F%2Fhellogithub.com%2Fperiodical%2Fstatistics%2Fclick%3Ftarget%3Dhttps%3A%2F%2Fgithub.com%2FKlingTeam%2FLivePortrait" target="_blank" title="https://hellogithub.com/periodical/statistics/click?target=https://github.com/KlingTeam/LivePortrait" ref="nofollow noopener noreferrer">LivePortrait</a>ï¼šè®©é™æ€ç…§ç‰‡â€œæ´»â€èµ·æ¥ã€‚è¯¥é¡¹ç›®èƒ½å¤Ÿé€šè¿‡ä¸€å¼ ç…§ç‰‡å¿«é€Ÿç”Ÿæˆé«˜è´¨é‡ã€ç”ŸåŠ¨çš„è§†é¢‘ï¼Œå°¤å…¶æ“…é•¿æ•æ‰å’Œè¿˜åŸé¢éƒ¨è¡¨æƒ…ï¼Œæ”¯æŒäººç±»å’ŒåŠ¨ç‰©è‚–åƒçš„åŠ¨ç”»ç”Ÿæˆã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/befef291f89241e5ac0586c6772c3d64~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGVsbG9HaXRIdWI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771288425&amp;x-signature=JQFtkWNM8dFImphwTjM9igD4M8M%3D" alt="" loading="lazy"/></p>
<p>31ã€<a href="https://link.juejin.cn?target=https%3A%2F%2Fhellogithub.com%2Fperiodical%2Fstatistics%2Fclick%3Ftarget%3Dhttps%3A%2F%2Fgithub.com%2FSwanHubX%2FSwanLab" target="_blank" title="https://hellogithub.com/periodical/statistics/click?target=https://github.com/SwanHubX/SwanLab" ref="nofollow noopener noreferrer">SwanLab</a>ï¼šAI æ¨¡å‹è®­ç»ƒè·Ÿè¸ªä¸å¯è§‚æµ‹å¹³å°ã€‚è¿™æ˜¯ä¸€æ¬¾ä¸“ä¸º AI æ¨¡å‹è®­ç»ƒæ‰“é€ çš„è·Ÿè¸ªã€è®°å½•ã€åˆ†æä¸åä½œå·¥å…·ï¼Œæ—¨åœ¨å¸®åŠ©ç ”ç©¶è€…ä¼˜åŒ–è®­ç»ƒè¿‡ç¨‹ï¼Œæå‡å›¢é˜Ÿåä½œæ•ˆç‡ã€‚å®ƒé€šè¿‡ç®€æ´çš„ Python API å’Œç›´è§‚çš„ç•Œé¢ï¼Œæä¾›äº†è®­ç»ƒå¯è§†åŒ–ã€è‡ªåŠ¨æ—¥å¿—è®°å½•ã€ç¡¬ä»¶ç›‘æ§ã€å®éªŒç®¡ç†å’Œå¤šäººååŒç­‰åŠŸèƒ½ã€‚å·²é›†æˆ 40+ ä¸»æµè®­ç»ƒæ¡†æ¶ï¼Œé€‚ç”¨äºå¤§æ¨¡å‹è®­ç»ƒã€è®¡ç®—æœºè§†è§‰ã€éŸ³é¢‘å¤„ç†ã€AIGC ç­‰ä»»åŠ¡åœºæ™¯ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dd507c9ea3734888838c6cfd6fd4c805~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGVsbG9HaXRIdWI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771288425&amp;x-signature=dPEDpeGYO0j3hRQ7C4ZHa9W%2BImQ%3D" alt="" loading="lazy"/></p>
<p>32ã€<a href="https://link.juejin.cn?target=https%3A%2F%2Fhellogithub.com%2Fperiodical%2Fstatistics%2Fclick%3Ftarget%3Dhttps%3A%2F%2Fgithub.com%2Flinshenkx%2Fprompt-optimizer" target="_blank" title="https://hellogithub.com/periodical/statistics/click?target=https://github.com/linshenkx/prompt-optimizer" ref="nofollow noopener noreferrer">prompt-optimizer</a>ï¼šä¼˜åŒ– AI æç¤ºè¯çš„å·¥å…·ã€‚è¿™æ˜¯ä¸€æ¬¾çº¯å‰ç«¯å®ç°çš„æç¤ºè¯ä¼˜åŒ–å™¨ï¼Œå¸®åŠ©ç”¨æˆ·å¿«é€Ÿç¼–å†™æ›´é«˜è´¨é‡çš„æç¤ºè¯ã€‚æ”¯æŒå¤šç§ä¸»æµ AI æ¨¡å‹ä¸è‡ªå®šä¹‰ API åœ°å€ï¼Œå¹¶å¯å®æ—¶å¯¹æ¯”ä¼˜åŒ–å‰åçš„æ•ˆæœã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fc11b353e9cb43cf801bc62b8ed56ab1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGVsbG9HaXRIdWI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771288425&amp;x-signature=6CMhNN2HsmavOVZ7p7fM4aK810I%3D" alt="" loading="lazy"/></p>
<p>33ã€<a href="https://link.juejin.cn?target=https%3A%2F%2Fhellogithub.com%2Fperiodical%2Fstatistics%2Fclick%3Ftarget%3Dhttps%3A%2F%2Fgithub.com%2Fnndeploy%2Fnndeploy" target="_blank" title="https://hellogithub.com/periodical/statistics/click?target=https://github.com/nndeploy/nndeploy" ref="nofollow noopener noreferrer">nndeploy</a>ï¼šç®€å•æ˜“ç”¨çš„å¤šç«¯ AI æ¨ç†éƒ¨ç½²æ¡†æ¶ã€‚è¿™æ˜¯ä¸€æ¬¾ç®€å•æ˜“ç”¨ã€é«˜æ€§èƒ½ã€æ”¯æŒå¤šç«¯çš„ AI æ¨ç†éƒ¨ç½²æ¡†æ¶ã€‚å®ƒåŸºäºæœ‰å‘æ— ç¯å›¾è®¾è®¡ï¼Œå°†å‰å¤„ç†ã€æ¨ç†å’Œåå¤„ç†æŠ½è±¡ä¸ºå›¾çš„èŠ‚ç‚¹ï¼Œæ”¯æŒæµæ°´çº¿å¹¶è¡Œã€ä»»åŠ¡å¹¶è¡Œç­‰ä¼˜åŒ–æ–¹å¼ã€‚å…¼å®¹ TensorRTã€OpenVINOã€MNN ç­‰å¤šç§æ¨ç†åç«¯ï¼Œé€‚é…ä¸»æµæ–‡ç”Ÿå›¾ã€å¤§è¯­è¨€ã€æ£€æµ‹ç­‰æ¨¡å‹ï¼Œå®ç°ä¸€å¥—ä»£ç å¤šç«¯éƒ¨ç½²ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e97b280b99e74b8da5eb0aabaf5c675a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGVsbG9HaXRIdWI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771288425&amp;x-signature=bxRvQMB0iNOl59qA4ai4%2BwMXD1o%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-21">ä¹¦ç±/æ•™ç¨‹</h3>
<p>34ã€<a href="https://link.juejin.cn?target=https%3A%2F%2Fhellogithub.com%2Fperiodical%2Fstatistics%2Fclick%3Ftarget%3Dhttps%3A%2F%2Fgithub.com%2FZJU-LLMs%2FFoundations-of-LLMs" target="_blank" title="https://hellogithub.com/periodical/statistics/click?target=https://github.com/ZJU-LLMs/Foundations-of-LLMs" ref="nofollow noopener noreferrer">Foundations-of-LLMs</a>ï¼šã€Šå¤§æ¨¡å‹åŸºç¡€ã€‹ã€‚è¯¥ä¹¦æ˜¯ç”±æµ™æ±Ÿå¤§å­¦ DAILY å®éªŒå®¤å¼€æºçš„å¤§è¯­è¨€æ¨¡å‹æ•™æï¼Œå†…å®¹æ¶µç›–ä¼ ç»Ÿè¯­è¨€æ¨¡å‹ã€å¤§è¯­è¨€æ¨¡å‹æ¶æ„æ¼”åŒ–ã€Prompt å·¥ç¨‹ã€å‚æ•°é«˜æ•ˆå¾®è°ƒã€æ¨¡å‹ç¼–è¾‘ã€æ£€ç´¢å¢å¼ºç”Ÿæˆç­‰æ–¹é¢ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/72269b71ad324abb92cb86995e422d5d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGVsbG9HaXRIdWI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771288425&amp;x-signature=tCmjzb1KILb%2FD5LcbJU9NGlY5Cc%3D" alt="" loading="lazy"/></p>
<p>35ã€<a href="https://link.juejin.cn?target=https%3A%2F%2Fhellogithub.com%2Fperiodical%2Fstatistics%2Fclick%3Ftarget%3Dhttps%3A%2F%2Fgithub.com%2Fhzpt-inet-club%2Fenglish-note" target="_blank" title="https://hellogithub.com/periodical/statistics/click?target=https://github.com/hzpt-inet-club/english-note" ref="nofollow noopener noreferrer">english-note</a>ï¼šã€Šä»é›¶å¼€å§‹å­¦ä¹ è‹±è¯­è¯­æ³•ã€‹ã€‚è¿™æ˜¯ä¸€æœ¬é¢å‘è‹±è¯­åŸºç¡€è–„å¼±åŒå­¦çš„è‹±è¯­è¯­æ³•å…¥é—¨ä¹¦ç±ï¼Œå†…å®¹è¨€ç®€æ„èµ…ã€æ’å›¾å¹½é»˜é£è¶£ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c0254fa117c54910915ac6c424957564~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGVsbG9HaXRIdWI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771288425&amp;x-signature=VRw5eUmlGWgALkM%2FzuqLabZuLuk%3D" alt="" loading="lazy"/></p>
<p>36ã€<a href="https://link.juejin.cn?target=https%3A%2F%2Fhellogithub.com%2Fperiodical%2Fstatistics%2Fclick%3Ftarget%3Dhttps%3A%2F%2Fgithub.com%2Fmicrosoft%2Fai-agents-for-beginners" target="_blank" title="https://hellogithub.com/periodical/statistics/click?target=https://github.com/microsoft/ai-agents-for-beginners" ref="nofollow noopener noreferrer">ai-agents-for-beginners</a>ï¼šå¾®è½¯å¼€æºçš„ AI Agent åˆå­¦è€…æ•™ç¨‹ã€‚è¯¥é¡¹ç›®æ˜¯å¾®è½¯ä¸“ä¸ºåˆå­¦è€…æ‰“é€ çš„ AI æ™ºèƒ½ä½“ï¼ˆAgentsï¼‰æ•™ç¨‹ï¼Œå†…å®¹åˆ†ä¸º 10 ä¸ªè¯¾ç¨‹ï¼ŒåŒ…å«è¯¦ç»†çš„æ•™ç¨‹ã€è§†é¢‘å’Œç¤ºä¾‹ä»£ç ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2d4a5691ea614e1c9d5031ac34d90bcd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGVsbG9HaXRIdWI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771288425&amp;x-signature=8xzB9VGSuYHac8tq1rZe1NL9O6g%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-22">å…¶å®ƒ</h3>
<p>37ã€<a href="https://link.juejin.cn?target=https%3A%2F%2Fhellogithub.com%2Fperiodical%2Fstatistics%2Fclick%3Ftarget%3Dhttps%3A%2F%2Fgithub.com%2FCircuit-Digest%2FESP-Drone" target="_blank" title="https://hellogithub.com/periodical/statistics/click?target=https://github.com/Circuit-Digest/ESP-Drone" ref="nofollow noopener noreferrer">ESP-Drone</a>ï¼šä½æˆæœ¬çš„å¼€æºæ— äººæœºã€‚è¿™æ˜¯ä¸€ä¸ªåŸºäº ESP32 çš„å¼€æºæ— äººæœºé¡¹ç›®ï¼Œå¸®ä½ åˆ¶ä½œä¸€æ¬¾ä½æˆæœ¬ã€å¯æ‰‹æœºæ§åˆ¶çš„å°å‹æ— äººæœºã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/459f85cf2c31447aaf7bcb2799ee2247~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGVsbG9HaXRIdWI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771288425&amp;x-signature=hGlGN5OCBTEfynU9TTL6yY1Qlvs%3D" alt="" loading="lazy"/></p>
<p>38ã€<a href="https://link.juejin.cn?target=https%3A%2F%2Fhellogithub.com%2Fperiodical%2Fstatistics%2Fclick%3Ftarget%3Dhttps%3A%2F%2Fgithub.com%2FGar-b-age%2FCookLikeHOC" target="_blank" title="https://hellogithub.com/periodical/statistics/click?target=https://github.com/Gar-b-age/CookLikeHOC" ref="nofollow noopener noreferrer">CookLikeHOC</a>ï¼šè€ä¹¡é¸¡èœè°±å¼€æºç‰ˆã€‚è¯¥é¡¹ç›®éè€ä¹¡é¸¡å®˜æ–¹å‡ºå“ï¼Œæ˜¯ä½œè€…åŸºäºã€Šè€ä¹¡é¸¡èœå“æº¯æºæŠ¥å‘Šã€‹ç­‰èµ„æ–™ï¼Œå½’çº³ã€æ•´ç†äº†è€ä¹¡é¸¡èœå“çš„é…æ–¹ã€åˆ¶ä½œæµç¨‹åŠçƒ¹é¥ªè¦ç‚¹ã€‚</p>
<p>39ã€<a href="https://link.juejin.cn?target=https%3A%2F%2Fhellogithub.com%2Fperiodical%2Fstatistics%2Fclick%3Ftarget%3Dhttps%3A%2F%2Fgithub.com%2FSuperManito%2FLinuxMirrors" target="_blank" title="https://hellogithub.com/periodical/statistics/click?target=https://github.com/SuperManito/LinuxMirrors" ref="nofollow noopener noreferrer">LinuxMirrors</a>ï¼šä¸€é”®æå®š Linux æ¢æºé—®é¢˜çš„è„šæœ¬ã€‚è¯¥é¡¹ç›®æä¾›äº†ä¸€é”®åˆ‡æ¢ Linux é»˜è®¤è½¯ä»¶æºä¸ºå›½å†…é•œåƒæºçš„è„šæœ¬ï¼Œä»¥åŠ Docker å®‰è£…è„šæœ¬ï¼Œæ”¯æŒ Debianã€Ubuntuã€CentOSã€Raspberry Pi OS å’Œ Deepin ç­‰å¤šç§ä¸»æµå‘è¡Œç‰ˆã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1ca0e81585334276a102aa4eaab98b0d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGVsbG9HaXRIdWI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771288425&amp;x-signature=Kpo4hBmSE8t8MbgYih0uZU%2BEskM%3D" alt="" loading="lazy"/></p>
<p>40ã€<a href="https://link.juejin.cn?target=https%3A%2F%2Fhellogithub.com%2Fperiodical%2Fstatistics%2Fclick%3Ftarget%3Dhttps%3A%2F%2Fgithub.com%2Flucide-icons%2Flucide" target="_blank" title="https://hellogithub.com/periodical/statistics/click?target=https://github.com/lucide-icons/lucide" ref="nofollow noopener noreferrer">lucide</a>ï¼šç²¾ç¾çš„å¼€æºå›¾æ ‡åº“ã€‚è¯¥é¡¹ç›®æ˜¯ç”±ç¤¾åŒºé©±åŠ¨çš„å¼€æºå›¾æ ‡åº“ï¼Œæä¾› 1000+ é«˜è´¨é‡çš„ SVG å›¾æ ‡ï¼Œæ”¯æŒ Reactã€Vueã€Svelteã€React Native ç­‰ä¸»æµå‰ç«¯æ¡†æ¶ï¼Œä»¥åŠ Figma æ’ä»¶ï¼Œæ–¹ä¾¿å¼€å‘è€…å’Œè®¾è®¡å¸ˆä½¿ç”¨ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/97f1bbbf18704331a8f64d5928d14836~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGVsbG9HaXRIdWI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771288425&amp;x-signature=RZZ0dovGGpZgu%2FmFmj0%2BD7wGQt8%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-23">ä¸‰ã€æœ€å</h2>
<p>è¿‡å»çš„ä¸€å¹´ï¼ŒHelloGitHub åˆ†äº«äº† 588 ä¸ªå¼€æºé¡¹ç›®ï¼Œå…¶ä¸­æ¥è‡ªç”¨æˆ·çš„åˆ†äº«ä¸º 160 ä¸ªï¼ˆå æ¯” 27.2%ï¼‰ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d94ae0b4a190456cadd2e6af8c30cfd6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGVsbG9HaXRIdWI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771288425&amp;x-signature=K4JFM9CdBM3nXt3RP%2F7JNcuLVMY%3D" alt="" loading="lazy"/></p>
<p>æ„Ÿè°¢æ¯ä¸€ä½æ¥ HelloGitHub åˆ†äº«å’Œæ¨èå¼€æºé¡¹ç›®çš„å°ä¼™ä¼´ã€‚<strong>ä½ ä»¬ä¸åªæ˜¯è¯»è€…ï¼Œæ›´æ˜¯è¿™ä»½æœˆåˆŠçš„å…±åˆ›è€…ï¼</strong></p>
<p>æ–°çš„ä¸€å¹´ï¼ŒHelloGitHub ä¼šåŠªåŠ›æ¥è§¦æ›´å¤šçš„å¼€æºä½œè€…ï¼Œåˆ†äº«å¼€æºé¡¹ç›®èƒŒåçš„æ•…äº‹ï¼Œå¹¶å¸®åŠ©çœŸæ­£çƒ­çˆ±å¼€æºçš„å°ä¼™ä¼´ï¼Œå¼€å¯ä»–ä»¬çš„å¼€æºä¹‹æ—…ã€‚</p>
<p>æœ€åï¼Œæ„Ÿè°¢å¤§å®¶è¿‡å»ä¸€å¹´çš„é™ªä¼´å’Œæ”¯æŒã€‚HelloGitHub åœ¨è¿™é‡Œæå‰ç¥å¤§å®¶æ˜¥èŠ‚å¿«ä¹ã€é©¬å¹´è¡Œå¤§è¿ï¼Œæˆ‘ä»¬å¹´åè§ï½</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åˆ†å¸ƒå¼é”è¯¦è§£ï¼šåŸºäº Redis ä¸ MySQL çš„å®ç°æ–¹æ¡ˆï¼ˆ2026 å®æˆ˜æŒ‡å—ï¼‰]]></title>    <link>https://juejin.cn/post/7604671453453320207</link>    <guid>https://juejin.cn/post/7604671453453320207</guid>    <pubDate>2026-02-10T00:42:21.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604671453453320207" data-draft-id="7604685644684574772" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åˆ†å¸ƒå¼é”è¯¦è§£ï¼šåŸºäº Redis ä¸ MySQL çš„å®ç°æ–¹æ¡ˆï¼ˆ2026 å®æˆ˜æŒ‡å—ï¼‰"/> <meta itemprop="keywords" content="åˆ†å¸ƒå¼"/> <meta itemprop="datePublished" content="2026-02-10T00:42:21.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å“ˆé‡Œè°¢é¡¿"/> <meta itemprop="url" content="https://juejin.cn/user/3678304397695056"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åˆ†å¸ƒå¼é”è¯¦è§£ï¼šåŸºäº Redis ä¸ MySQL çš„å®ç°æ–¹æ¡ˆï¼ˆ2026 å®æˆ˜æŒ‡å—ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3678304397695056/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å“ˆé‡Œè°¢é¡¿
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-10T00:42:21.000Z" title="Tue Feb 10 2026 00:42:21 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p><strong>é€‚ç”¨è¯»è€…</strong>ï¼šåç«¯å¼€å‘å·¥ç¨‹å¸ˆã€ç³»ç»Ÿæ¶æ„å¸ˆ<br/>
<strong>å‰ç½®çŸ¥è¯†</strong>ï¼šRedis åŸºç¡€ã€MySQL äº‹åŠ¡ã€å¹¶å‘ç¼–ç¨‹<br/>
<strong>æ›´æ–°æ—¥æœŸ</strong>ï¼š2026 å¹´ 2 æœˆ</p>
</blockquote>
<hr/>
<h2 data-id="heading-0">ä¸€ã€ä»€ä¹ˆæ˜¯åˆ†å¸ƒå¼é”ï¼Ÿ</h2>
<p>åœ¨å•æœºåº”ç”¨ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>synchronized</code>ã€<code>ReentrantLock</code> ç­‰æœºåˆ¶ä¿è¯çº¿ç¨‹å®‰å…¨ã€‚ä½†åœ¨<strong>åˆ†å¸ƒå¼ç³»ç»Ÿ</strong>ä¸­ï¼Œå¤šä¸ªæœåŠ¡å®ä¾‹éƒ¨ç½²åœ¨ä¸åŒæœºå™¨ä¸Šï¼ŒJVM é”æ— æ³•è·¨è¿›ç¨‹ç”Ÿæ•ˆã€‚</p>
<p><strong>åˆ†å¸ƒå¼é”</strong>å°±æ˜¯ä¸ºäº†è§£å†³è¿™ä¸€é—®é¢˜è€Œç”Ÿçš„â€”â€”å®ƒæ˜¯ä¸€ç§<strong>è·¨è¿›ç¨‹ã€è·¨æœºå™¨çš„äº’æ–¥æœºåˆ¶</strong>ï¼Œç¡®ä¿åŒä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ªå®¢æˆ·ç«¯èƒ½æ‰§è¡ŒæŸæ®µå…³é”®ä»£ç ã€‚</p>
<h3 data-id="heading-1">ğŸ¯ æ ¸å¿ƒè¦æ±‚</h3>
<ol>
<li><strong>äº’æ–¥æ€§</strong>ï¼šåŒä¸€æ—¶é—´åªèƒ½æœ‰ä¸€ä¸ªå®¢æˆ·ç«¯æŒæœ‰é”</li>
<li><strong>é«˜å¯ç”¨</strong>ï¼šé”æœåŠ¡ä¸èƒ½æˆä¸ºå•ç‚¹æ•…éšœ</li>
<li><strong>é˜²æ­»é”</strong>ï¼šå®¢æˆ·ç«¯å´©æºƒåé”èƒ½è‡ªåŠ¨é‡Šæ”¾</li>
<li><strong>å¯é‡å…¥æ€§</strong>ï¼ˆå¯é€‰ï¼‰ï¼šåŒä¸€çº¿ç¨‹å¯é‡å¤è·å–é”</li>
<li><strong>é«˜æ€§èƒ½</strong>ï¼šåŠ é”/è§£é”å»¶è¿Ÿä½</li>
</ol>
<hr/>
<h2 data-id="heading-2">äºŒã€ä¸ºä»€ä¹ˆä¸ç”¨æ•°æ®åº“è¡Œé”æˆ– Redis å•å‘½ä»¤ï¼Ÿ</h2>
<ul>
<li><strong>MySQL è¡Œé”</strong>ï¼šä»…é™äºäº‹åŠ¡å†…ï¼Œæ— æ³•è·¨äº‹åŠ¡æŒæœ‰</li>
<li><strong>Redis SETNX</strong>ï¼šçœ‹ä¼¼ç®€å•ï¼Œä½†å­˜åœ¨<strong>åŸå­æ€§ç¼ºå¤±</strong>å’Œ<strong>æ­»é”é£é™©</strong></li>
</ul>
<blockquote>
<p>âœ… æ­£ç¡®çš„åˆ†å¸ƒå¼é”å¿…é¡»æ»¡è¶³ <strong>â€œåŠ é” + è®¾ç½®è¿‡æœŸæ—¶é—´â€ åŸå­æ“ä½œ</strong>ï¼</p>
</blockquote>
<hr/>
<h2 data-id="heading-3">ä¸‰ã€æ–¹æ¡ˆä¸€ï¼šåŸºäº Redis çš„åˆ†å¸ƒå¼é”ï¼ˆæ¨èï¼‰</h2>
<p>Redis å› å…¶<strong>é«˜æ€§èƒ½ã€åŸå­æ“ä½œæ”¯æŒ</strong>ï¼Œæˆä¸ºåˆ†å¸ƒå¼é”çš„é¦–é€‰æ–¹æ¡ˆã€‚</p>
<h3 data-id="heading-4">3.1 åŸºç¡€å®ç°ï¼ˆSET å‘½ä»¤ï¼‰</h3>
<p>Redis 2.6.12+ æ”¯æŒ <code>SET key value [EX seconds] [PX milliseconds] [NX|XX]</code>ï¼Œå¯<strong>åŸå­åœ°</strong>è®¾ç½®å€¼å¹¶åŠ è¿‡æœŸæ—¶é—´ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> redis
<span class="hljs-keyword">import</span> time
<span class="hljs-keyword">import</span> uuid

<span class="hljs-keyword">class</span> <span class="hljs-title class_">RedisDistributedLock</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, redis_client, lock_key, expire_time=<span class="hljs-number">30</span></span>):
        self.redis = redis_client
        self.lock_key = lock_key
        self.expire_time = expire_time  <span class="hljs-comment"># é”è‡ªåŠ¨è¿‡æœŸæ—¶é—´ï¼ˆç§’ï¼‰</span>
        self.lock_value = <span class="hljs-built_in">str</span>(uuid.uuid4())  <span class="hljs-comment"># å”¯ä¸€æ ‡è¯†ï¼Œç”¨äºé˜²æ­¢è¯¯åˆ </span>

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">acquire</span>(<span class="hljs-params">self, timeout=<span class="hljs-number">10</span></span>):
        <span class="hljs-string">"""
        è·å–é”
        :param timeout: å°è¯•è·å–é”çš„æœ€é•¿æ—¶é—´ï¼ˆç§’ï¼‰
        :return: True/False
        """</span>
        start_time = time.time()
        <span class="hljs-keyword">while</span> time.time() - start_time &lt; timeout:
            <span class="hljs-comment"># åŸå­æ“ä½œï¼šä»…å½“ key ä¸å­˜åœ¨æ—¶è®¾ç½®ï¼Œå¹¶è®¾ç½®è¿‡æœŸæ—¶é—´</span>
            <span class="hljs-keyword">if</span> self.redis.<span class="hljs-built_in">set</span>(
                self.lock_key,
                self.lock_value,
                ex=self.expire_time,  <span class="hljs-comment"># è‡ªåŠ¨è¿‡æœŸï¼Œé˜²æ­¢æ­»é”</span>
                nx=<span class="hljs-literal">True</span>               <span class="hljs-comment"># ä»…å½“ key ä¸å­˜åœ¨æ—¶è®¾ç½®</span>
            ):
                <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span>
            time.sleep(<span class="hljs-number">0.01</span>)  <span class="hljs-comment"># é¿å… busy-wait</span>
        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span>

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">release</span>(<span class="hljs-params">self</span>):
        <span class="hljs-string">"""é‡Šæ”¾é”"""</span>
        <span class="hljs-comment"># ä½¿ç”¨ Lua è„šæœ¬ä¿è¯â€œåˆ¤æ–­ + åˆ é™¤â€åŸå­æ€§</span>
        lua_script = <span class="hljs-string">"""
        if redis.call("get", KEYS[1]) == ARGV[1] then
            return redis.call("del", KEYS[1])
        else
            return 0
        end
        """</span>
        self.redis.<span class="hljs-built_in">eval</span>(lua_script, <span class="hljs-number">1</span>, self.lock_key, self.lock_value)
</code></pre>
<h3 data-id="heading-5">3.2 å…³é”®è®¾è®¡è§£æ</h3>
<h4 data-id="heading-6">âœ… ä¸ºä»€ä¹ˆç”¨ UUID ä½œä¸º valueï¼Ÿ</h4>
<ul>
<li>é˜²æ­¢ A å®¢æˆ·ç«¯è¯¯åˆ  B å®¢æˆ·ç«¯çš„é”</li>
<li>é‡Šæ”¾é”å‰å¿…é¡»æ ¡éªŒ value æ˜¯å¦åŒ¹é…</li>
</ul>
<h4 data-id="heading-7">âœ… ä¸ºä»€ä¹ˆç”¨ Lua è„šæœ¬é‡Šæ”¾é”ï¼Ÿ</h4>
<ul>
<li><code>GET + DEL</code> ä¸æ˜¯åŸå­æ“ä½œï¼</li>
<li>è‹¥ GET åå‘ç”Ÿç½‘ç»œå»¶è¿Ÿï¼Œå…¶ä»–å®¢æˆ·ç«¯å¯èƒ½å·²è·å–æ–°é”ï¼Œæ­¤æ—¶ DEL ä¼šè¯¯åˆ </li>
</ul>
<h4 data-id="heading-8">âœ… è¿‡æœŸæ—¶é—´å¦‚ä½•è®¾ç½®ï¼Ÿ</h4>
<ul>
<li><strong>å¤ªçŸ­</strong>ï¼šä¸šåŠ¡æœªæ‰§è¡Œå®Œé”å·²é‡Šæ”¾ â†’ å¤±å»äº’æ–¥æ€§</li>
<li><strong>å¤ªé•¿</strong>ï¼šå®¢æˆ·ç«¯å´©æºƒåéœ€ç­‰å¾…å¾ˆä¹… â†’ å¯ç”¨æ€§ä¸‹é™</li>
<li><strong>å»ºè®®</strong>ï¼š<code>expire_time = ä¸šåŠ¡æœ€å¤§æ‰§è¡Œæ—¶é—´ Ã— 2</code></li>
</ul>
<h3 data-id="heading-9">3.3 é«˜çº§ä¼˜åŒ–ï¼šRedlock ç®—æ³•ï¼ˆé˜² Redis å•ç‚¹æ•…éšœï¼‰</h3>
<p>å½“ Redis æ˜¯å•èŠ‚ç‚¹æ—¶ï¼Œè‹¥ä¸»èŠ‚ç‚¹å®•æœºä¸”æœªæŒä¹…åŒ–ï¼Œå¯èƒ½ä¸¢å¤±é”ä¿¡æ¯ã€‚</p>
<p><strong>Redlock</strong>ï¼ˆRedis å®˜æ–¹æ¨èï¼‰é€šè¿‡å¤šæ•°æ´¾æœºåˆ¶è§£å†³ï¼š</p>
<ol>
<li>å‘ N ä¸ªç‹¬ç«‹ Redis èŠ‚ç‚¹ï¼ˆé€šå¸¸ N=5ï¼‰è¯·æ±‚åŠ é”</li>
<li>åªæœ‰<strong>è¶…è¿‡åŠæ•°</strong>ï¼ˆâ‰¥3ï¼‰æˆåŠŸï¼Œä¸”æ€»è€—æ—¶ &lt; é”è¿‡æœŸæ—¶é—´ï¼Œæ‰ç®—è·å–é”</li>
<li>é‡Šæ”¾é”æ—¶å‘æ‰€æœ‰èŠ‚ç‚¹å‘é€ DEL</li>
</ol>
<blockquote>
<p>âš ï¸ <strong>äº‰è®®</strong>ï¼šMartin Kleppmann è®¤ä¸º Redlock åœ¨æ—¶é’Ÿæ¼‚ç§»ä¸‹ä»ä¸å®‰å…¨ã€‚<br/>
âœ… <strong>å®è·µå»ºè®®</strong>ï¼šå¯¹ä¸€è‡´æ€§è¦æ±‚æé«˜åœºæ™¯ï¼Œæ”¹ç”¨ ZooKeeperï¼›å¦åˆ™å• Redis + æŒä¹…åŒ–è¶³å¤Ÿã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-10">å››ã€æ–¹æ¡ˆäºŒï¼šåŸºäº MySQL çš„åˆ†å¸ƒå¼é”</h2>
<p>MySQL æ–¹æ¡ˆé€‚ç”¨äº<strong>å·²æœ‰æ•°æ®åº“ã€ä¸æƒ³å¼•å…¥ Redis</strong>çš„åœºæ™¯ï¼Œä½†æ€§èƒ½è¾ƒä½ã€‚</p>
<h3 data-id="heading-11">4.1 è¡¨ç»“æ„è®¾è®¡</h3>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> distributed_lock (
    lock_name <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">100</span>) <span class="hljs-keyword">PRIMARY</span> KEY,
    token <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">100</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,      <span class="hljs-comment">-- é”æŒæœ‰è€…æ ‡è¯†</span>
    expire_time <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,      <span class="hljs-comment">-- è¿‡æœŸæ—¶é—´æˆ³ï¼ˆæ¯«ç§’ï¼‰</span>
    update_time <span class="hljs-type">TIMESTAMP</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">UPDATE</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span>
) ENGINE<span class="hljs-operator">=</span>InnoDB;
</code></pre>
<h3 data-id="heading-12">4.2 åŠ é”é€»è¾‘ï¼ˆåˆ©ç”¨å”¯ä¸€ç´¢å¼• + INSERTï¼‰</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> pymysql
<span class="hljs-keyword">import</span> time
<span class="hljs-keyword">import</span> uuid

<span class="hljs-keyword">class</span> <span class="hljs-title class_">MysqlDistributedLock</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, db_conn, lock_name, expire_time=<span class="hljs-number">30</span></span>):
        self.conn = db_conn
        self.lock_name = lock_name
        self.expire_time = expire_time
        self.token = <span class="hljs-built_in">str</span>(uuid.uuid4())

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">acquire</span>(<span class="hljs-params">self, timeout=<span class="hljs-number">10</span></span>):
        <span class="hljs-string">"""è·å–é”"""</span>
        start_time = time.time()
        cursor = self.conn.cursor()
        
        <span class="hljs-keyword">while</span> time.time() - start_time &lt; timeout:
            <span class="hljs-keyword">try</span>:
                <span class="hljs-comment"># å…ˆæ¸…ç†è¿‡æœŸé”</span>
                self._clean_expired_locks(cursor)
                
                <span class="hljs-comment"># å°è¯•æ’å…¥æ–°é”ï¼ˆå”¯ä¸€ç´¢å¼•ä¿è¯äº’æ–¥ï¼‰</span>
                expire_timestamp = <span class="hljs-built_in">int</span>(time.time() * <span class="hljs-number">1000</span>) + self.expire_time * <span class="hljs-number">1000</span>
                cursor.execute(
                    <span class="hljs-string">"INSERT INTO distributed_lock (lock_name, token, expire_time) VALUES (%s, %s, %s)"</span>,
                    (self.lock_name, self.token, expire_timestamp)
                )
                self.conn.commit()
                <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span>
                
            <span class="hljs-keyword">except</span> pymysql.IntegrityError:
                <span class="hljs-comment"># å”¯ä¸€ç´¢å¼•å†²çªï¼Œè¯´æ˜é”å·²è¢«å ç”¨</span>
                self.conn.rollback()
                time.sleep(<span class="hljs-number">0.05</span>)
                
            <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
                self.conn.rollback()
                <span class="hljs-keyword">raise</span> e
                
        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span>

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">release</span>(<span class="hljs-params">self</span>):
        <span class="hljs-string">"""é‡Šæ”¾é”"""</span>
        cursor = self.conn.cursor()
        <span class="hljs-keyword">try</span>:
            <span class="hljs-comment"># ä»…åˆ é™¤è‡ªå·±çš„é”</span>
            cursor.execute(
                <span class="hljs-string">"DELETE FROM distributed_lock WHERE lock_name = %s AND token = %s"</span>,
                (self.lock_name, self.token)
            )
            self.conn.commit()
        <span class="hljs-keyword">finally</span>:
            cursor.close()

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">_clean_expired_locks</span>(<span class="hljs-params">self, cursor</span>):
        <span class="hljs-string">"""æ¸…ç†è¿‡æœŸé”"""</span>
        current_time = <span class="hljs-built_in">int</span>(time.time() * <span class="hljs-number">1000</span>)
        cursor.execute(
            <span class="hljs-string">"DELETE FROM distributed_lock WHERE expire_time &lt; %s"</span>,
            (current_time,)
        )
</code></pre>
<h3 data-id="heading-13">4.3 å…³é”®è®¾è®¡è§£æ</h3>
<h4 data-id="heading-14">âœ… ä¸ºä»€ä¹ˆç”¨ INSERT è€Œä¸æ˜¯ SELECT + UPDATEï¼Ÿ</h4>
<ul>
<li><code>SELECT ... FOR UPDATE</code> éœ€è¦äº‹åŠ¡æŒæœ‰åˆ°ä¸šåŠ¡ç»“æŸï¼Œé•¿æ—¶é—´é˜»å¡å…¶ä»–äº‹åŠ¡</li>
<li><code>INSERT</code> åˆ©ç”¨<strong>å”¯ä¸€ç´¢å¼•å†²çª</strong>å¤©ç„¶å®ç°äº’æ–¥ï¼Œæ— é”ç«äº‰</li>
</ul>
<h4 data-id="heading-15">âœ… ä¸ºä»€ä¹ˆéœ€è¦å®šæœŸæ¸…ç†è¿‡æœŸé”ï¼Ÿ</h4>
<ul>
<li>å®¢æˆ·ç«¯å´©æºƒåä¸ä¼šä¸»åŠ¨é‡Šæ”¾é”</li>
<li>ä¸‹æ¬¡åŠ é”å‰æ¸…ç†ï¼Œé¿å…â€œåƒµå°¸é”â€å ç”¨èµ„æº</li>
</ul>
<h4 data-id="heading-16">âš ï¸ æ€§èƒ½ç“¶é¢ˆ</h4>
<ul>
<li>æ¯æ¬¡åŠ é”éœ€ 1~2 æ¬¡ SQL æŸ¥è¯¢</li>
<li>é«˜å¹¶å‘ä¸‹æ•°æ®åº“å‹åŠ›å¤§</li>
<li><strong>å»ºè®® QPS &lt; 1000</strong> çš„åœºæ™¯ä½¿ç”¨</li>
</ul>
<hr/>
<h2 data-id="heading-17">äº”ã€Redis vs MySQL æ–¹æ¡ˆå¯¹æ¯”</h2>








































<table><thead><tr><th>ç‰¹æ€§</th><th>Redis æ–¹æ¡ˆ</th><th>MySQL æ–¹æ¡ˆ</th></tr></thead><tbody><tr><td><strong>æ€§èƒ½</strong></td><td>æé«˜ï¼ˆå¾®ç§’çº§ï¼‰</td><td>è¾ƒä½ï¼ˆæ¯«ç§’çº§ï¼‰</td></tr><tr><td><strong>å¯é æ€§</strong></td><td>ä¾èµ– Redis æŒä¹…åŒ–</td><td>ä¾èµ–æ•°æ®åº“äº‹åŠ¡</td></tr><tr><td><strong>å®ç°å¤æ‚åº¦</strong></td><td>ä¸­ç­‰ï¼ˆéœ€ Lua è„šæœ¬ï¼‰</td><td>ç®€å•</td></tr><tr><td><strong>é€‚ç”¨åœºæ™¯</strong></td><td>é«˜å¹¶å‘ã€ä½å»¶è¿Ÿ</td><td>ä½é¢‘ã€å·²æœ‰ DB</td></tr><tr><td><strong>æ­»é”é˜²æŠ¤</strong></td><td>è‡ªåŠ¨è¿‡æœŸ + å”¯ä¸€ value</td><td>è‡ªåŠ¨è¿‡æœŸ + æ¸…ç†ä»»åŠ¡</td></tr><tr><td><strong>æ‰©å±•æ€§</strong></td><td>æ”¯æŒ Redlock é›†ç¾¤</td><td>éš¾ä»¥æ°´å¹³æ‰©å±•</td></tr></tbody></table>
<blockquote>
<p>âœ… <strong>é€‰æ‹©å»ºè®®</strong>ï¼š</p>
<ul>
<li>90% åœºæ™¯é€‰ <strong>Redis</strong></li>
<li>æ—  Redis ä¸”å¹¶å‘ä½ â†’ é€‰ <strong>MySQL</strong></li>
<li>é‡‘èçº§å¼ºä¸€è‡´ â†’ è€ƒè™‘ <strong>ZooKeeper / etcd</strong></li>
</ul>
</blockquote>
<hr/>
<h2 data-id="heading-18">å…­ã€å¸¸è§é™·é˜±ä¸è§£å†³æ–¹æ¡ˆ</h2>
<h3 data-id="heading-19">âŒ é™·é˜± 1ï¼šé”è¿‡æœŸä½†ä¸šåŠ¡æœªå®Œæˆ</h3>
<p><strong>ç°è±¡</strong>ï¼šé”è‡ªåŠ¨é‡Šæ”¾åï¼Œå…¶ä»–å®¢æˆ·ç«¯è¿›å…¥ä¸´ç•ŒåŒºï¼Œå¯¼è‡´æ•°æ®é”™ä¹±<br/>
<strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<ul>
<li>
<p>å¯ç”¨ <strong>é”ç»­æœŸæœºåˆ¶</strong>ï¼ˆWatchdog çº¿ç¨‹å®šæœŸå»¶é•¿è¿‡æœŸæ—¶é—´ï¼‰</p>
</li>
<li>
<p>ç¤ºä¾‹ï¼ˆRedisson çš„çœ‹é—¨ç‹—ï¼‰ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// Redisson è‡ªåŠ¨æ¯ 10s ç»­æœŸä¸€æ¬¡ï¼ˆåªè¦çº¿ç¨‹ aliveï¼‰</span>
RLock <span class="hljs-keyword">lock</span> = redisson.getLock(<span class="hljs-string">"myLock"</span>);
<span class="hljs-keyword">lock</span>.<span class="hljs-keyword">lock</span>(<span class="hljs-number">30</span>, TimeUnit.SECONDS); <span class="hljs-comment">// 30s è¿‡æœŸï¼Œä½†ä¼šè‡ªåŠ¨ç»­æœŸ</span>
</code></pre>
</li>
</ul>
<h3 data-id="heading-20">âŒ é™·é˜± 2ï¼šä¸»ä»åˆ‡æ¢å¯¼è‡´é”ä¸¢å¤±ï¼ˆRedisï¼‰</h3>
<p><strong>ç°è±¡</strong>ï¼šä¸»èŠ‚ç‚¹åŠ é”åæœªåŒæ­¥åˆ°ä»èŠ‚ç‚¹ï¼Œä¸»æŒ‚åä»å‡ä¸»ï¼Œé”æ¶ˆå¤±<br/>
<strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<ul>
<li>ä½¿ç”¨ <strong>Redlock</strong>ï¼ˆå¤šèŠ‚ç‚¹ï¼‰</li>
<li>æˆ–æ¥å—<strong>æœ€ç»ˆä¸€è‡´æ€§</strong>ï¼Œä¸šåŠ¡å±‚åšå¹‚ç­‰å¤„ç†</li>
</ul>
<h3 data-id="heading-21">âŒ é™·é˜± 3ï¼šMySQL ä¸»ä»å»¶è¿Ÿ</h3>
<p><strong>ç°è±¡</strong>ï¼šå†™ä¸»åº“åç«‹å³è¯»ä»åº“ï¼Œå¯èƒ½è¯»ä¸åˆ°é”è®°å½•<br/>
<strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<ul>
<li><strong>å¼ºåˆ¶è¯»ä¸»åº“</strong></li>
<li>æˆ–ä½¿ç”¨ <strong>å•åº“å•è¡¨</strong>ï¼Œé¿å…ä¸»ä»æ¶æ„</li>
</ul>
<hr/>
<h2 data-id="heading-22">ä¸ƒã€ç”Ÿäº§ç¯å¢ƒæœ€ä½³å®è·µ</h2>
<ol>
<li>
<p><strong>è®¾ç½®åˆç†çš„è¶…æ—¶æ—¶é—´</strong></p>
<ul>
<li>ç›‘æ§ä¸šåŠ¡å¹³å‡è€—æ—¶ï¼Œè®¾ç½® <code>expire_time = P99 Ã— 2</code></li>
</ul>
</li>
<li>
<p><strong>åŠ é”å¿…é¡»å¸¦è¶…æ—¶</strong></p>
<ul>
<li>é¿å…æ— é™ç­‰å¾…å¯¼è‡´çº¿ç¨‹æ± è€—å°½</li>
</ul>
</li>
<li>
<p><strong>finally å—ä¸­é‡Šæ”¾é”</strong></p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">lock</span> = RedisDistributedLock(redis, <span class="hljs-string">"order_lock"</span>)
<span class="hljs-keyword">try</span>:
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">lock</span>.acquire():
        <span class="hljs-meta"># ä¸šåŠ¡é€»è¾‘</span>
<span class="hljs-keyword">finally</span>:
    <span class="hljs-keyword">lock</span>.release()
</code></pre>
</li>
<li>
<p><strong>ç›‘æ§é”ç«äº‰æƒ…å†µ</strong></p>
<ul>
<li>è®°å½•åŠ é”å¤±è´¥ç‡ã€æŒæœ‰æ—¶é—´</li>
<li>å‘Šè­¦å¼‚å¸¸é•¿æ—¶é—´æŒé”</li>
</ul>
</li>
<li>
<p><strong>é¿å…é”ç²’åº¦å¤ªç²—</strong></p>
<ul>
<li>ä¾‹ï¼šä¸è¦ç”¨ <code>"order_lock"</code>ï¼Œæ”¹ç”¨ <code>"order_lock_{user_id}"</code></li>
</ul>
</li>
</ol>
<hr/>
<h2 data-id="heading-23">å…«ã€æ€»ç»“</h2>























<table><thead><tr><th>æ–¹æ¡ˆ</th><th>æ ¸å¿ƒå‘½ä»¤/æ“ä½œ</th><th>ä¼˜åŠ¿</th><th>åŠ£åŠ¿</th></tr></thead><tbody><tr><td><strong>Redis</strong></td><td><code>SET key value EX nx</code> + Lua è„šæœ¬</td><td>é«˜æ€§èƒ½ã€åŸå­æ€§å¥½</td><td>éœ€ç»´æŠ¤ Redis æœåŠ¡</td></tr><tr><td><strong>MySQL</strong></td><td><code>INSERT</code> å”¯ä¸€ç´¢å¼• + è¿‡æœŸæ¸…ç†</td><td>æ— éœ€æ–°ç»„ä»¶ã€ACID ä¿è¯</td><td>æ€§èƒ½ä½ã€æ‰©å±•éš¾</td></tr></tbody></table>
<blockquote>
<p>ğŸ’¬ <strong>æœ€åå¿ å‘Š</strong>ï¼š<br/>
<strong>â€œåˆ†å¸ƒå¼é”æ˜¯æœ€åçš„æ‰‹æ®µï¼ä¼˜å…ˆè€ƒè™‘æ— é”è®¾è®¡ï¼ˆå¦‚ CASã€æ¶ˆæ¯é˜Ÿåˆ—ï¼‰ã€‚â€</strong><br/>
å½“ä½ çœŸçš„éœ€è¦å®ƒæ—¶ï¼Œè¯·åŠ¡å¿…ç†è§£ä¸Šè¿°ç»†èŠ‚ï¼Œé¿å…è¸©å‘ã€‚</p>
</blockquote>
<hr/>
<p><strong>å‚è€ƒæ–‡çŒ®</strong>ï¼š</p>
<ul>
<li>Redis å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fredis.io%2Ftopics%2Fdistlock" target="_blank" title="https://redis.io/topics/distlock" ref="nofollow noopener noreferrer">Distributed locks with Redis</a></li>
<li>Martin Kleppmann: <a href="https://link.juejin.cn?target=https%3A%2F%2Fmartin.kleppmann.com%2F2016%2F02%2F08%2Fhow-to-do-distributed-locking.html" target="_blank" title="https://martin.kleppmann.com/2016/02/08/how-to-do-distributed-locking.html" ref="nofollow noopener noreferrer">How to do distributed locking</a></li>
<li>ã€ŠRedis è®¾è®¡ä¸å®ç°ã€‹é»„å¥å®</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç¬¬15ç« ã€æ ‡å‡†åº“ç²¾è®²ï¼ˆä¸€ï¼‰â€”â€”fmtã€osã€ioã€bufio]]></title>    <link>https://juejin.cn/post/7604665952320602163</link>    <guid>https://juejin.cn/post/7604665952320602163</guid>    <pubDate>2026-02-10T00:43:01.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604665952320602163" data-draft-id="7604665952320536627" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç¬¬15ç« ã€æ ‡å‡†åº“ç²¾è®²ï¼ˆä¸€ï¼‰â€”â€”fmtã€osã€ioã€bufio"/> <meta itemprop="keywords" content="åç«¯,Go,ç¼–ç¨‹è¯­è¨€"/> <meta itemprop="datePublished" content="2026-02-10T00:43:01.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ€•æµªçŒ«"/> <meta itemprop="url" content="https://juejin.cn/user/2832784963939438"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç¬¬15ç« ã€æ ‡å‡†åº“ç²¾è®²ï¼ˆä¸€ï¼‰â€”â€”fmtã€osã€ioã€bufio
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2832784963939438/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ€•æµªçŒ«
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-10T00:43:01.000Z" title="Tue Feb 10 2026 00:43:01 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»25åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>Golangçš„å¼ºå¤§ä¹‹å¤„ï¼Œä¸ä»…åœ¨äºå…¶ç®€æ´çš„è¯­æ³•ã€é«˜æ•ˆçš„å¹¶å‘æ¨¡å‹ï¼Œæ›´åœ¨äºå…¶å†…ç½®çš„<strong>æ ‡å‡†åº“ï¼ˆStandard Libraryï¼‰</strong>â€”â€”æ— éœ€é¢å¤–å®‰è£…ä¾èµ–ï¼Œå°±èƒ½å®ç°æ ¼å¼åŒ–è¾“å‡ºã€æ–‡ä»¶æ“ä½œã€è¾“å…¥è¾“å‡ºã€ç¼“å†²è¯»å†™ç­‰ç»å¤§å¤šæ•°åŸºç¡€å¼€å‘éœ€æ±‚ã€‚</p>
<p>æœ¬ç« ä½œä¸ºæ ‡å‡†åº“ç²¾è®²çš„ç¬¬ä¸€ç¯‡ï¼Œèšç„¦æœ€å¸¸ç”¨ã€æœ€åŸºç¡€çš„4ä¸ªæ ‡å‡†åº“ï¼š<strong>fmtï¼ˆæ ¼å¼åŒ–è¾“å…¥è¾“å‡ºï¼‰ã€osï¼ˆç¯å¢ƒä¸æ–‡ä»¶åŸºç¡€ï¼‰ã€ioï¼ˆè¾“å…¥è¾“å‡ºæ¥å£ï¼‰ã€bufioï¼ˆç¼“å†²è¯»å†™ï¼‰</strong>ã€‚å…¨ç¨‹éµå¾ªâ€œæ ¸å¿ƒç”¨æ³•+æç®€ä»£ç ç¤ºä¾‹+é¿å‘é‡ç‚¹+å‚è€ƒé“¾æ¥â€çš„æ˜é‡‘å†™ä½œé€»è¾‘ï¼Œæ¯ä¸ªä»£ç ç¤ºä¾‹æ§åˆ¶åœ¨10è¡Œä»¥å†…ï¼ˆå¯ç›´æ¥å¤åˆ¶è¿è¡Œï¼‰ï¼Œä¸å †ç Œå†—ä½™å†…å®¹ï¼Œç›´å‡»å®æˆ˜ç—›ç‚¹ï¼Œå¸®ä½ å¿«é€ŸæŒæ¡è¿™4ä¸ªæ ‡å‡†åº“çš„æ ¸å¿ƒç”¨æ³•ï¼Œè½»æ¾åº”å¯¹æ—¥å¸¸å¼€å‘åœºæ™¯ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€fmtæ ¼å¼åŒ–ï¼ˆfmtåŒ…ï¼‰</h2>
<p>fmtåŒ…æ˜¯Goå¼€å‘ä¸­æœ€åŸºç¡€ã€æœ€å¸¸ç”¨çš„æ ‡å‡†åº“ï¼Œæ ¸å¿ƒä½œç”¨æ˜¯<strong>æ ¼å¼åŒ–è¾“å…¥ï¼ˆä»ç»ˆç«¯è¯»å–è¾“å…¥ï¼‰å’Œæ ¼å¼åŒ–è¾“å‡ºï¼ˆå‘ç»ˆç«¯æ‰“å°å†…å®¹ï¼‰</strong>ï¼Œæ— éœ€é¢å¤–ä¾èµ–ï¼Œå¯¼å…¥å³å¯ä½¿ç”¨ã€‚å…¶æ ¸å¿ƒä¼˜åŠ¿æ˜¯è¯­æ³•ç®€æ´ã€åŠŸèƒ½å…¨é¢ï¼Œèƒ½æ»¡è¶³å­—ç¬¦ä¸²ã€æ•°å­—ã€ç»“æ„ä½“ç­‰å„ç§ç±»å‹çš„æ ¼å¼åŒ–éœ€æ±‚ã€‚</p>
<p>æ ¸å¿ƒé€»è¾‘ï¼šé€šè¿‡â€œæ ¼å¼åŒ–åŠ¨è¯â€ï¼ˆå¦‚%sã€%dï¼‰æŒ‡å®šè¾“å‡º/è¾“å…¥çš„æ ¼å¼ï¼Œé€‚é…ä¸åŒæ•°æ®ç±»å‹ï¼Œç±»æ¯”Pythonçš„printæ ¼å¼åŒ–ã€Cè¯­è¨€çš„printfã€‚</p>
<h3 data-id="heading-1">1.1 æ ¸å¿ƒæ ¼å¼åŒ–è¾“å‡ºï¼ˆé«˜é¢‘ç”¨æ³•ï¼‰</h3>
<p>æ ¼å¼åŒ–è¾“å‡ºæ˜¯fmtåŒ…çš„æ ¸å¿ƒåœºæ™¯ï¼Œå¸¸ç”¨å‡½æ•°æœ‰3ä¸ªï¼š<code>fmt.Print()</code>ï¼ˆæ— æ¢è¡Œï¼‰ã€<code>fmt.Println()</code>ï¼ˆè‡ªåŠ¨æ¢è¡Œï¼‰ã€<code>fmt.Printf()</code>ï¼ˆè‡ªå®šä¹‰æ ¼å¼åŒ–ï¼Œæœ€å¸¸ç”¨ï¼‰ã€‚é‡ç‚¹æŒæ¡<code>fmt.Printf()</code>çš„æ ¼å¼åŒ–åŠ¨è¯ã€‚</p>
<h4 data-id="heading-2">1.1.1 å¸¸ç”¨æ ¼å¼åŒ–åŠ¨è¯ï¼ˆè¡¨æ ¼æ¢³ç†ï¼Œå¥½è®°å¥½ç”¨ï¼‰</h4>













































<table><thead><tr><th><strong>æ ¼å¼åŒ–åŠ¨è¯</strong></th><th><strong>é€‚ç”¨ç±»å‹</strong></th><th><strong>è¯´æ˜+æç®€ç¤ºä¾‹</strong></th></tr></thead><tbody><tr><td>%s</td><td>å­—ç¬¦ä¸²ã€å­—èŠ‚åˆ‡ç‰‡</td><td>è¾“å‡ºå­—ç¬¦ä¸²ï¼Œç¤ºä¾‹ï¼š<code>fmt.Printf("å§“åï¼š%s\n", "å¼ ä¸‰")</code> â†’ å§“åï¼šå¼ ä¸‰</td></tr><tr><td>%d</td><td>æ•´æ•°ï¼ˆintã€int64ç­‰ï¼‰</td><td>è¾“å‡ºåè¿›åˆ¶æ•´æ•°ï¼Œç¤ºä¾‹ï¼š<code>fmt.Printf("å¹´é¾„ï¼š%d\n", 25)</code> â†’ å¹´é¾„ï¼š25</td></tr><tr><td>%f</td><td>æµ®ç‚¹æ•°ï¼ˆfloat32ã€float64ï¼‰</td><td>è¾“å‡ºæµ®ç‚¹æ•°ï¼Œé»˜è®¤6ä½å°æ•°ï¼Œç¤ºä¾‹ï¼š<code>fmt.Printf("åˆ†æ•°ï¼š%f\n", 95.5)</code> â†’ åˆ†æ•°ï¼š95.500000</td></tr><tr><td>%.2f</td><td>æµ®ç‚¹æ•°</td><td>æŒ‡å®šä¿ç•™2ä½å°æ•°ï¼Œç¤ºä¾‹ï¼š<code>fmt.Printf("åˆ†æ•°ï¼š%.2f\n", 95.5)</code> â†’ åˆ†æ•°ï¼š95.50</td></tr><tr><td>%v</td><td>ä»»æ„ç±»å‹</td><td>è‡ªåŠ¨é€‚é…ç±»å‹ï¼Œç®€åŒ–å†™æ³•ï¼Œç¤ºä¾‹ï¼š<code>fmt.Printf("ä»»æ„å€¼ï¼š%v\n", 3.14)</code> â†’ ä»»æ„å€¼ï¼š3.14</td></tr><tr><td>%+v</td><td>ç»“æ„ä½“</td><td>è¾“å‡ºç»“æ„ä½“å­—æ®µå+å€¼ï¼Œç¤ºä¾‹è§ä¸‹æ–¹ä»£ç </td></tr><tr><td>%t</td><td>å¸ƒå°”å€¼ï¼ˆboolï¼‰</td><td>è¾“å‡ºtrue/falseï¼Œç¤ºä¾‹ï¼š<code>fmt.Printf("æ˜¯å¦æˆå¹´ï¼š%t\n", true)</code> â†’ æ˜¯å¦æˆå¹´ï¼štrue</td></tr></tbody></table>
<h4 data-id="heading-3">1.1.2 æç®€ä»£ç ç¤ºä¾‹ï¼ˆè¦†ç›–é«˜é¢‘åœºæ™¯ï¼‰</h4>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> <span class="hljs-string">"fmt"</span>

<span class="hljs-comment">// å®šä¹‰ç»“æ„ä½“ï¼Œæµ‹è¯•ç»“æ„ä½“æ ¼å¼åŒ–</span>
<span class="hljs-keyword">type</span> User <span class="hljs-keyword">struct</span> {
    Name <span class="hljs-type">string</span>
    Age  <span class="hljs-type">int</span>
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    <span class="hljs-comment">// 1. fmt.Printï¼ˆæ— æ¢è¡Œï¼‰</span>
    fmt.Print(<span class="hljs-string">"Hello "</span>)
    fmt.Print(<span class="hljs-string">"Go\n"</span>)

    <span class="hljs-comment">// 2. fmt.Printlnï¼ˆè‡ªåŠ¨æ¢è¡Œï¼‰</span>
    fmt.Println(<span class="hljs-string">"fmt.Println è‡ªåŠ¨æ¢è¡Œ"</span>)

    <span class="hljs-comment">// 3. fmt.Printfï¼ˆè‡ªå®šä¹‰æ ¼å¼åŒ–ï¼Œæœ€å¸¸ç”¨ï¼‰</span>
    name := <span class="hljs-string">"å¼ ä¸‰"</span>
    age := <span class="hljs-number">25</span>
    score := <span class="hljs-number">98.5</span>
    user := User{Name: name, Age: age}

    fmt.Printf(<span class="hljs-string">"å§“åï¼š%sï¼Œå¹´é¾„ï¼š%d\n"</span>, name, age)   <span class="hljs-comment">// å­—ç¬¦ä¸²+æ•´æ•°</span>
    fmt.Printf(<span class="hljs-string">"åˆ†æ•°ï¼š%.1f\n"</span>, score)             <span class="hljs-comment">// æµ®ç‚¹æ•°ä¿ç•™1ä½å°æ•°</span>
    fmt.Printf(<span class="hljs-string">"ç”¨æˆ·ä¿¡æ¯ï¼š%v\n"</span>, user)            <span class="hljs-comment">// ç»“æ„ä½“ç®€åŒ–è¾“å‡º</span>
    fmt.Printf(<span class="hljs-string">"ç”¨æˆ·è¯¦ç»†ä¿¡æ¯ï¼š%+v\n"</span>, user)       <span class="hljs-comment">// ç»“æ„ä½“å¸¦å­—æ®µåè¾“å‡º</span>
}
</code></pre>
<p>è¿è¡Œç»“æœï¼ˆæ¸…æ™°ç›´è§‚ï¼Œè´´åˆå®æˆ˜ï¼‰ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">Hello Go
fmt.Println è‡ªåŠ¨æ¢è¡Œ
å§“åï¼šå¼ ä¸‰ï¼Œå¹´é¾„ï¼š25
åˆ†æ•°ï¼š98.5
ç”¨æˆ·ä¿¡æ¯ï¼š{å¼ ä¸‰ 25}
ç”¨æˆ·è¯¦ç»†ä¿¡æ¯ï¼š{Name:å¼ ä¸‰ Age:25}
</code></pre>
<h3 data-id="heading-4">1.2 æ ¼å¼åŒ–è¾“å…¥ï¼ˆè¡¥å……ç”¨æ³•ï¼‰</h3>
<p>æ ¼å¼åŒ–è¾“å…¥ä¸»è¦ç”¨äºä»ç»ˆç«¯è¯»å–ç”¨æˆ·è¾“å…¥ï¼Œå¸¸ç”¨å‡½æ•°ï¼š<code>fmt.Scan()</code>ï¼ˆè¯»å–ç®€å•ç±»å‹ï¼‰ã€<code>fmt.Scanf()</code>ï¼ˆæŒ‰æ ¼å¼è¯»å–ï¼‰ã€<code>fmt.Scanln()</code>ï¼ˆè¯»å–ä¸€è¡Œï¼Œè‡ªåŠ¨å¿½ç•¥æ¢è¡Œï¼‰ã€‚</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> <span class="hljs-string">"fmt"</span>

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">var</span> name <span class="hljs-type">string</span>
    <span class="hljs-keyword">var</span> age <span class="hljs-type">int</span>

    <span class="hljs-comment">// 1. fmt.Scanï¼šè¯»å–è¾“å…¥ï¼Œç©ºæ ¼åˆ†éš”</span>
    fmt.Print(<span class="hljs-string">"è¯·è¾“å…¥å§“åå’Œå¹´é¾„ï¼ˆç©ºæ ¼åˆ†éš”ï¼‰ï¼š"</span>)
    fmt.Scan(&amp;name, &amp;age) <span class="hljs-comment">// æ³¨æ„ï¼šå˜é‡éœ€ä¼ æŒ‡é’ˆ</span>
    fmt.Printf(<span class="hljs-string">"ä½ è¾“å…¥çš„æ˜¯ï¼š%sï¼Œ%då²\n"</span>, name, age)

    <span class="hljs-comment">// 2. fmt.Scanfï¼šæŒ‰æ ¼å¼è¯»å–</span>
    <span class="hljs-keyword">var</span> score <span class="hljs-type">float64</span>
    fmt.Print(<span class="hljs-string">"è¯·è¾“å…¥åˆ†æ•°ï¼ˆæ ¼å¼ï¼šæ•°å­—ï¼‰ï¼š"</span>)
    fmt.Scanf(<span class="hljs-string">"%.2f"</span>, &amp;score)
    fmt.Printf(<span class="hljs-string">"åˆ†æ•°ï¼š%.2f\n"</span>, score)
}
</code></pre>
<h3 data-id="heading-5">1.3 é¿å‘é‡ç‚¹ï¼ˆæ˜é‡‘è¯»è€…é«˜é¢‘è¸©å‘ï¼‰</h3>
<ul>
<li>
<p>æ ¼å¼åŒ–åŠ¨è¯ä¸æ•°æ®ç±»å‹å¿…é¡»åŒ¹é…ï¼šå¦‚ç”¨%sæ¥æ”¶æ•´æ•°ã€%dæ¥æ”¶å­—ç¬¦ä¸²ï¼Œä¼šå¯¼è‡´è¾“å‡ºå¼‚å¸¸ï¼ˆæ— æŠ¥é”™ï¼Œä½†ç»“æœé”™ä¹±ï¼‰ï¼›</p>
</li>
<li>
<p>fmt.Scanç³»åˆ—å‡½æ•°éœ€ä¼ æŒ‡é’ˆï¼šå¦‚<code>fmt.Scan(name)</code>ï¼ˆé”™è¯¯ï¼‰ï¼Œå¿…é¡»å†™<code>fmt.Scan(&amp;name)</code>ï¼ˆæ­£ç¡®ï¼‰ï¼Œå¦åˆ™æ— æ³•ä¿®æ”¹å˜é‡å€¼ï¼›</p>
</li>
<li>
<p>æµ®ç‚¹æ•°æ ¼å¼åŒ–ï¼š%fé»˜è®¤ä¿ç•™6ä½å°æ•°ï¼Œå¦‚éœ€ä¿ç•™æŒ‡å®šä½æ•°ï¼Œç”¨%.nfï¼ˆnä¸ºä¿ç•™å°æ•°ä½æ•°ï¼‰ï¼Œé¿å…å†—ä½™å°æ•°ã€‚</p>
</li>
</ul>
<h3 data-id="heading-6">1.4 å‚è€ƒé“¾æ¥</h3>
<ul>
<li>Goå®˜æ–¹æ–‡æ¡£ï¼ˆfmtåŒ…ï¼‰ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgo.dev%2Fpkg%2Ffmt%2F" target="_blank" title="https://go.dev/pkg/fmt/" ref="nofollow noopener noreferrer">fmt package - fmt</a></li>
</ul>
<h2 data-id="heading-7">äºŒã€osç¯å¢ƒï¼ˆosåŒ…ï¼‰</h2>
<p>osåŒ…æä¾›äº†<strong>ä¸æ“ä½œç³»ç»Ÿäº¤äº’</strong>çš„æ ¸å¿ƒåŠŸèƒ½ï¼Œæ¶µç›–ç¯å¢ƒå˜é‡æ“ä½œã€å‘½ä»¤è¡Œå‚æ•°è¯»å–ã€ç³»ç»Ÿä¿¡æ¯è·å–ã€è¿›ç¨‹æ§åˆ¶ç­‰åŸºç¡€åœºæ™¯ï¼Œæ˜¯Goå¼€å‘ä¸­â€œé€‚é…ä¸åŒè¿è¡Œç¯å¢ƒâ€çš„æ ¸å¿ƒå·¥å…·ï¼Œç”¨æ³•ç®€æ´ï¼Œæ— éœ€å¤æ‚å°è£…ã€‚</p>
<p>æ ¸å¿ƒé‡ç‚¹ï¼šç¯å¢ƒå˜é‡ï¼ˆå¼€å‘/æµ‹è¯•/ç”Ÿäº§ç¯å¢ƒåŒºåˆ†ï¼‰ã€å‘½ä»¤è¡Œå‚æ•°ï¼ˆè„šæœ¬å¼€å‘å¸¸ç”¨ï¼‰ï¼Œè¿™ä¸¤ä¸ªæ˜¯æ—¥å¸¸å¼€å‘ä¸­æœ€é«˜é¢‘çš„ç”¨æ³•ï¼Œä¼˜å…ˆæŒæ¡ã€‚</p>
<h3 data-id="heading-8">2.1 ç¯å¢ƒå˜é‡æ“ä½œï¼ˆé«˜é¢‘ï¼‰</h3>
<p>ç¯å¢ƒå˜é‡ï¼ˆEnvironment Variableï¼‰ç”¨äºå­˜å‚¨æ“ä½œç³»ç»Ÿæˆ–åº”ç”¨çš„é…ç½®ä¿¡æ¯ï¼ˆå¦‚æ•°æ®åº“åœ°å€ã€ç«¯å£å·ã€å¯†é’¥ï¼‰ï¼Œé€šè¿‡osåŒ…å¯å®ç°â€œè¯»å–ã€è®¾ç½®ã€åˆ—å‡ºâ€ç¯å¢ƒå˜é‡ï¼Œé€‚é…ä¸åŒè¿è¡Œç¯å¢ƒï¼ˆå¦‚å¼€å‘ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒç”¨ä¸åŒçš„æ•°æ®åº“åœ°å€ï¼‰ã€‚</p>
<p>æ ¸å¿ƒå‡½æ•°ï¼š<code>os.Getenv()</code>ï¼ˆè¯»å–ç¯å¢ƒå˜é‡ï¼‰ã€<code>os.Setenv()</code>ï¼ˆè®¾ç½®ç¯å¢ƒå˜é‡ï¼‰ã€<code>os.Environ()</code>ï¼ˆåˆ—å‡ºæ‰€æœ‰ç¯å¢ƒå˜é‡ï¼‰ã€‚</p>
<h4 data-id="heading-9">2.1.1 æç®€ä»£ç ç¤ºä¾‹</h4>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> (
    <span class="hljs-string">"fmt"</span>
    <span class="hljs-string">"os"</span>
)

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    <span class="hljs-comment">// 1. è¯»å–ç¯å¢ƒå˜é‡ï¼ˆæœ€å¸¸ç”¨ï¼‰</span>
    <span class="hljs-comment">// è¯»å–ç³»ç»Ÿé»˜è®¤ç¯å¢ƒå˜é‡ï¼ˆå¦‚PATHï¼‰ï¼Œæˆ–è‡ªå®šä¹‰ç¯å¢ƒå˜é‡</span>
    path := os.Getenv(<span class="hljs-string">"PATH"</span>)
    fmt.Printf(<span class="hljs-string">"ç³»ç»ŸPATHï¼š%s\n"</span>, path[:<span class="hljs-number">50</span>]) <span class="hljs-comment">// æˆªå–å‰50å­—ç¬¦ï¼Œé¿å…è¾“å‡ºè¿‡é•¿</span>

    <span class="hljs-comment">// è¯»å–è‡ªå®šä¹‰ç¯å¢ƒå˜é‡ï¼Œä¸å­˜åœ¨åˆ™è¿”å›ç©ºå­—ç¬¦ä¸²</span>
    dbHost := os.Getenv(<span class="hljs-string">"DB_HOST"</span>)
    <span class="hljs-keyword">if</span> dbHost == <span class="hljs-string">""</span> {
        dbHost = <span class="hljs-string">"localhost"</span> <span class="hljs-comment">// å…œåº•é»˜è®¤å€¼ï¼Œé¿å‘å…³é”®</span>
    }
    fmt.Printf(<span class="hljs-string">"æ•°æ®åº“åœ°å€ï¼š%s\n"</span>, dbHost)

    <span class="hljs-comment">// 2. è®¾ç½®ç¯å¢ƒå˜é‡ï¼ˆä»…å½“å‰è¿›ç¨‹æœ‰æ•ˆï¼Œè¿›ç¨‹ç»“æŸåå¤±æ•ˆï¼‰</span>
    os.Setenv(<span class="hljs-string">"DB_PORT"</span>, <span class="hljs-string">"3306"</span>)
    fmt.Printf(<span class="hljs-string">"æ•°æ®åº“ç«¯å£ï¼š%s\n"</span>, os.Getenv(<span class="hljs-string">"DB_PORT"</span>))

    <span class="hljs-comment">// 3. åˆ—å‡ºæ‰€æœ‰ç¯å¢ƒå˜é‡ï¼ˆè¿”å›åˆ‡ç‰‡ï¼ŒåŒ…å«æ‰€æœ‰ç¯å¢ƒå˜é‡é”®å€¼å¯¹ï¼‰</span>
    envs := os.Environ()
    fmt.Printf(<span class="hljs-string">"å‰3ä¸ªç¯å¢ƒå˜é‡ï¼š%v\n"</span>, envs[:<span class="hljs-number">3</span>])
}
</code></pre>
<h3 data-id="heading-10">2.2 å‘½ä»¤è¡Œå‚æ•°è¯»å–ï¼ˆè„šæœ¬å¼€å‘å¸¸ç”¨ï¼‰</h3>
<p>å½“æˆ‘ä»¬å¼€å‘å‘½ä»¤è¡Œå·¥å…·ï¼ˆå¦‚è„šæœ¬ã€ç¦»çº¿å·¥å…·ï¼‰æ—¶ï¼Œå¸¸éœ€è¦é€šè¿‡å‘½ä»¤è¡Œä¼ å…¥å‚æ•°ï¼ˆå¦‚<code>go run main.go --name å¼ ä¸‰</code>ï¼‰ï¼ŒosåŒ…çš„<code>os.Args</code>åˆ‡ç‰‡å¯ç›´æ¥è·å–æ‰€æœ‰å‘½ä»¤è¡Œå‚æ•°ã€‚</p>
<p>æ ¸å¿ƒé€»è¾‘ï¼š<code>os.Args</code>æ˜¯ä¸€ä¸ªstringåˆ‡ç‰‡ï¼Œç¬¬ä¸€ä¸ªå…ƒç´ ï¼ˆos.Args[0]ï¼‰æ˜¯ç¨‹åºæœ¬èº«çš„è·¯å¾„ï¼Œä»ç¬¬äºŒä¸ªå…ƒç´ ï¼ˆos.Args[1]ï¼‰å¼€å§‹ï¼Œæ˜¯ä¼ å…¥çš„å‘½ä»¤è¡Œå‚æ•°ã€‚</p>
<h4 data-id="heading-11">2.2.1 æç®€ä»£ç ç¤ºä¾‹</h4>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> (
    <span class="hljs-string">"fmt"</span>
    <span class="hljs-string">"os"</span>
)

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    <span class="hljs-comment">// os.Args è·å–æ‰€æœ‰å‘½ä»¤è¡Œå‚æ•°</span>
    fmt.Printf(<span class="hljs-string">"æ‰€æœ‰å‘½ä»¤è¡Œå‚æ•°ï¼š%v\n"</span>, os.Args)
    fmt.Printf(<span class="hljs-string">"å‚æ•°ä¸ªæ•°ï¼š%d\n"</span>, <span class="hljs-built_in">len</span>(os.Args))

    <span class="hljs-comment">// è¯»å–ä¼ å…¥çš„å‚æ•°ï¼ˆå¦‚ï¼šgo run main.go å¼ ä¸‰ 25ï¼‰</span>
    <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(os.Args) &lt; <span class="hljs-number">3</span> {
        fmt.Println(<span class="hljs-string">"è¯·ä¼ å…¥ä¸¤ä¸ªå‚æ•°ï¼šå§“å å¹´é¾„"</span>)
        <span class="hljs-keyword">return</span>
    }

    name := os.Args[<span class="hljs-number">1</span>] <span class="hljs-comment">// ç¬¬ä¸€ä¸ªå‚æ•°ï¼ˆå§“åï¼‰</span>
    age := os.Args[<span class="hljs-number">2</span>]  <span class="hljs-comment">// ç¬¬äºŒä¸ªå‚æ•°ï¼ˆå¹´é¾„ï¼‰</span>
    fmt.Printf(<span class="hljs-string">"ä½ ä¼ å…¥çš„å§“åï¼š%sï¼Œå¹´é¾„ï¼š%s\n"</span>, name, age)
}
</code></pre>
<p>è¿è¡Œæµ‹è¯•ï¼ˆç»ˆç«¯æ‰§è¡Œï¼‰ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ä¼ å…¥å‚æ•°è¿è¡Œ</span>
go run main.go å¼ ä¸‰ 25

<span class="hljs-comment"># è¿è¡Œç»“æœ</span>
æ‰€æœ‰å‘½ä»¤è¡Œå‚æ•°ï¼š[./main å¼ ä¸‰ 25]
å‚æ•°ä¸ªæ•°ï¼š3
ä½ ä¼ å…¥çš„å§“åï¼šå¼ ä¸‰ï¼Œå¹´é¾„ï¼š25
</code></pre>
<h3 data-id="heading-12">2.3 å…¶ä»–å¸¸ç”¨åŠŸèƒ½ï¼ˆè¡¥å……ï¼‰</h3>
<p>é™¤äº†ç¯å¢ƒå˜é‡å’Œå‘½ä»¤è¡Œå‚æ•°ï¼ŒosåŒ…è¿˜æœ‰ä¸¤ä¸ªå¸¸ç”¨åŠŸèƒ½ï¼Œæ— éœ€æ·±å…¥ï¼ŒæŒæ¡ç”¨æ³•å³å¯ï¼š</p>
<ul>
<li>
<p><strong>è·å–å½“å‰å·¥ä½œç›®å½•</strong>ï¼š<code>os.Getwd()</code>ï¼Œè¿”å›å½“å‰ç¨‹åºè¿è¡Œçš„ç›®å½•è·¯å¾„ï¼›</p>
</li>
<li>
<p><strong>é€€å‡ºç¨‹åº</strong>ï¼š<code>os.Exit(code)</code>ï¼Œcode=0è¡¨ç¤ºæ­£å¸¸é€€å‡ºï¼Œcodeâ‰ 0è¡¨ç¤ºå¼‚å¸¸é€€å‡ºï¼ˆå¦‚<code>os.Exit(1)</code>ï¼‰ã€‚</p>
</li>
</ul>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// è¡¥å……ä»£ç ç¤ºä¾‹</span>
wd, _ := os.Getwd()
fmt.Printf(<span class="hljs-string">"å½“å‰å·¥ä½œç›®å½•ï¼š%s\n"</span>, wd)

<span class="hljs-comment">// å¼‚å¸¸é€€å‡ºï¼ˆç»ˆæ­¢ç¨‹åºè¿è¡Œï¼‰</span>
<span class="hljs-comment">// os.Exit(1)</span>
</code></pre>
<h3 data-id="heading-13">2.4 é¿å‘é‡ç‚¹</h3>
<ul>
<li>
<p>ç¯å¢ƒå˜é‡å…œåº•ï¼šè¯»å–ç¯å¢ƒå˜é‡æ—¶ï¼ŒåŠ¡å¿…åˆ¤æ–­æ˜¯å¦ä¸ºç©ºï¼Œè®¾ç½®é»˜è®¤å€¼ï¼ˆå¦‚ç¤ºä¾‹ä¸­dbHosté»˜è®¤å€¼ä¸ºlocalhostï¼‰ï¼Œé¿å…å› ç¯å¢ƒå˜é‡æœªè®¾ç½®å¯¼è‡´ç¨‹åºæŠ¥é”™ï¼›</p>
</li>
<li>
<p>å‘½ä»¤è¡Œå‚æ•°è¾¹ç•Œåˆ¤æ–­ï¼šè¯»å–os.Argsæ—¶ï¼Œéœ€åˆ¤æ–­åˆ‡ç‰‡é•¿åº¦ï¼Œé¿å…ç´¢å¼•è¶Šç•Œï¼ˆå¦‚ç”¨æˆ·æœªä¼ å…¥è¶³å¤Ÿå‚æ•°ï¼Œç›´æ¥è¯»å–os.Args[1]ä¼šæŠ¥é”™ï¼‰ï¼›</p>
</li>
<li>
<p>os.Setenvä»…å½“å‰è¿›ç¨‹æœ‰æ•ˆï¼šè®¾ç½®çš„ç¯å¢ƒå˜é‡ï¼Œåªåœ¨å½“å‰ç¨‹åºè¿è¡Œçš„è¿›ç¨‹ä¸­æœ‰æ•ˆï¼Œç¨‹åºç»“æŸåè‡ªåŠ¨å¤±æ•ˆï¼Œæ— æ³•å½±å“æ“ä½œç³»ç»Ÿå…¨å±€ç¯å¢ƒå˜é‡ã€‚</p>
</li>
</ul>
<h3 data-id="heading-14">2.5 å‚è€ƒé“¾æ¥</h3>
<ul>
<li>Goå®˜æ–¹æ–‡æ¡£ï¼ˆosåŒ…ï¼‰ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgo.dev%2Fpkg%2Fos%2F" target="_blank" title="https://go.dev/pkg/os/" ref="nofollow noopener noreferrer">os package - os</a></li>
</ul>
<h2 data-id="heading-15">ä¸‰ã€æ–‡ä»¶æ“ä½œï¼ˆosåŒ…å»¶ä¼¸ï¼‰</h2>
<p>æ–‡ä»¶æ“ä½œæ˜¯å¼€å‘ä¸­çš„æ ¸å¿ƒåœºæ™¯ï¼ˆå¦‚è¯»å–é…ç½®æ–‡ä»¶ã€å†™å…¥æ—¥å¿—ã€å¤„ç†æ–‡æœ¬æ–‡ä»¶ï¼‰ï¼ŒGoä¸­æ–‡ä»¶æ“ä½œä¸»è¦é€šè¿‡<strong>osåŒ…</strong>å®ç°ï¼Œæ ¸å¿ƒåŠŸèƒ½æ¶µç›–ï¼šæ–‡ä»¶åˆ›å»ºã€æ–‡ä»¶è¯»å–ã€æ–‡ä»¶å†™å…¥ã€æ–‡ä»¶åˆ é™¤ã€ç›®å½•æ“ä½œç­‰ï¼Œç”¨æ³•ç®€æ´ï¼Œæ— éœ€é¢å¤–ä¾èµ–ã€‚</p>
<p>æ ¸å¿ƒé€»è¾‘ï¼šå…ˆé€šè¿‡<code>os.Open()</code>ã€<code>os.Create()</code>ç­‰å‡½æ•°è·å–â€œæ–‡ä»¶å¥æŸ„â€ï¼ˆ*os.Fileï¼‰ï¼Œå†é€šè¿‡æ–‡ä»¶å¥æŸ„æ‰§è¡Œè¯»å†™æ“ä½œï¼Œæœ€ååŠ¡å¿…å…³é—­æ–‡ä»¶å¥æŸ„ï¼ˆç”¨deferç¡®ä¿ï¼‰ï¼Œé¿å…èµ„æºæ³„éœ²ã€‚</p>
<h3 data-id="heading-16">3.1 æ ¸å¿ƒæ–‡ä»¶æ“ä½œï¼ˆé«˜é¢‘åœºæ™¯ï¼‰</h3>
<p>æŒ‰â€œå®æˆ˜åœºæ™¯â€åˆ†ç±»è®²è§£ï¼Œæ¯ä¸ªåœºæ™¯é…å¥—æç®€ä»£ç ç¤ºä¾‹ï¼Œè¦†ç›–æ—¥å¸¸å¼€å‘80%çš„éœ€æ±‚ã€‚</p>
<h4 data-id="heading-17">3.1.1 åœºæ™¯1ï¼šåˆ›å»ºæ–‡ä»¶ï¼ˆå«å†™å…¥å†…å®¹ï¼‰</h4>
<p>ç”¨<code>os.Create()</code>å‡½æ•°åˆ›å»ºæ–‡ä»¶ï¼Œè‹¥æ–‡ä»¶å·²å­˜åœ¨ï¼Œä¼šæ¸…ç©ºæ–‡ä»¶å†…å®¹ï¼›è‹¥æ–‡ä»¶ä¸å­˜åœ¨ï¼Œä¼šåˆ›å»ºæ–°æ–‡ä»¶ã€‚è¿”å›æ–‡ä»¶å¥æŸ„å’Œé”™è¯¯ï¼Œéœ€åˆ¤æ–­é”™è¯¯ã€‚</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> (
    <span class="hljs-string">"fmt"</span>
    <span class="hljs-string">"os"</span>
)

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    <span class="hljs-comment">// åˆ›å»ºæ–‡ä»¶ï¼ˆè·¯å¾„ï¼štest.txtï¼‰ï¼Œè¿”å›æ–‡ä»¶å¥æŸ„å’Œé”™è¯¯</span>
    file, err := os.Create(<span class="hljs-string">"test.txt"</span>)
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        fmt.Printf(<span class="hljs-string">"åˆ›å»ºæ–‡ä»¶å¤±è´¥ï¼š%v\n"</span>, err)
        <span class="hljs-keyword">return</span>
    }
    <span class="hljs-keyword">defer</span> file.Close() <span class="hljs-comment">// å»¶è¿Ÿå…³é—­æ–‡ä»¶å¥æŸ„ï¼Œç¡®ä¿èµ„æºé‡Šæ”¾ï¼ˆå…³é”®ï¼‰</span>

    <span class="hljs-comment">// å‘æ–‡ä»¶å†™å…¥å†…å®¹ï¼ˆå­—ç¬¦ä¸²è½¬å­—èŠ‚åˆ‡ç‰‡ï¼‰</span>
    content := <span class="hljs-string">"Hello Go æ–‡ä»¶æ“ä½œï¼"</span>
    n, err := file.Write([]<span class="hljs-type">byte</span>(content)) <span class="hljs-comment">// å†™å…¥å­—èŠ‚åˆ‡ç‰‡</span>
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        fmt.Printf(<span class="hljs-string">"å†™å…¥æ–‡ä»¶å¤±è´¥ï¼š%v\n"</span>, err)
        <span class="hljs-keyword">return</span>
    }
    fmt.Printf(<span class="hljs-string">"å†™å…¥æˆåŠŸï¼Œå†™å…¥å­—èŠ‚æ•°ï¼š%d\n"</span>, n)
}
</code></pre>
<h4 data-id="heading-18">3.1.2 åœºæ™¯2ï¼šè¯»å–æ–‡ä»¶å†…å®¹ï¼ˆå®Œæ•´è¯»å–ï¼‰</h4>
<p>ç”¨<code>os.Open()</code>å‡½æ•°æ‰“å¼€æ–‡ä»¶ï¼ˆåªè¯»æ¨¡å¼ï¼‰ï¼Œè·å–æ–‡ä»¶å¥æŸ„åï¼Œé€šè¿‡<code>file.Read()</code>è¯»å–å†…å®¹ï¼Œæˆ–ç”¨<code>ioutil.ReadAll()</code>ï¼ˆGo 1.16+æ¨èç”¨os.ReadFile()ï¼‰å¿«é€Ÿè¯»å–å®Œæ•´æ–‡ä»¶ã€‚</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> (
    <span class="hljs-string">"fmt"</span>
    <span class="hljs-string">"os"</span>
)

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    <span class="hljs-comment">// æ–¹å¼1ï¼šå¿«é€Ÿè¯»å–å®Œæ•´æ–‡ä»¶ï¼ˆæ¨èï¼Œç®€æ´ï¼‰</span>
    content, err := os.ReadFile(<span class="hljs-string">"test.txt"</span>)
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        fmt.Printf(<span class="hljs-string">"è¯»å–æ–‡ä»¶å¤±è´¥ï¼š%v\n"</span>, err)
        <span class="hljs-keyword">return</span>
    }
    fmt.Printf(<span class="hljs-string">"æ–‡ä»¶å†…å®¹ï¼š%s\n"</span>, content)

    <span class="hljs-comment">// æ–¹å¼2ï¼šæ‰“å¼€æ–‡ä»¶åè¯»å–ï¼ˆçµæ´»ï¼Œå¯æ§åˆ¶è¯»å–é•¿åº¦ï¼‰</span>
    file, err := os.Open(<span class="hljs-string">"test.txt"</span>)
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        fmt.Printf(<span class="hljs-string">"æ‰“å¼€æ–‡ä»¶å¤±è´¥ï¼š%v\n"</span>, err)
        <span class="hljs-keyword">return</span>
    }
    <span class="hljs-keyword">defer</span> file.Close()

    <span class="hljs-keyword">var</span> buf [<span class="hljs-number">128</span>]<span class="hljs-type">byte</span> <span class="hljs-comment">// ç¼“å†²åŒºï¼Œå­˜å‚¨è¯»å–çš„å†…å®¹</span>
    n, err := file.Read(buf[:]) <span class="hljs-comment">// è¯»å–å†…å®¹åˆ°ç¼“å†²åŒº</span>
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        fmt.Printf(<span class="hljs-string">"è¯»å–å¤±è´¥ï¼š%v\n"</span>, err)
        <span class="hljs-keyword">return</span>
    }
    fmt.Printf(<span class="hljs-string">"è¯»å–å­—èŠ‚æ•°ï¼š%dï¼Œå†…å®¹ï¼š%s\n"</span>, n, buf[:n])
}
</code></pre>
<h4 data-id="heading-19">3.1.3 åœºæ™¯3ï¼šè¿½åŠ å†…å®¹åˆ°æ–‡ä»¶ï¼ˆä¸è¦†ç›–ï¼‰</h4>
<p>os.Create()ä¼šæ¸…ç©ºæ–‡ä»¶å†…å®¹ï¼Œè‹¥éœ€è¿½åŠ å†…å®¹ï¼Œéœ€ç”¨<code>os.OpenFile()</code>å‡½æ•°ï¼ŒæŒ‡å®šâ€œè¿½åŠ +å†™å…¥â€æ¨¡å¼ï¼ˆos.O_APPEND|os.O_WRONLYï¼‰ã€‚</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> (
    <span class="hljs-string">"fmt"</span>
    <span class="hljs-string">"os"</span>
)

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    <span class="hljs-comment">// æ‰“å¼€æ–‡ä»¶ï¼ˆè¿½åŠ +å†™å…¥æ¨¡å¼ï¼‰ï¼Œä¸å­˜åœ¨åˆ™åˆ›å»º</span>
    file, err := os.OpenFile(<span class="hljs-string">"test.txt"</span>, os.O_APPEND|os.O_WRONLY|os.O_CREATE, <span class="hljs-number">0644</span>)
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        fmt.Printf(<span class="hljs-string">"æ‰“å¼€æ–‡ä»¶å¤±è´¥ï¼š%v\n"</span>, err)
        <span class="hljs-keyword">return</span>
    }
    <span class="hljs-keyword">defer</span> file.Close()

    <span class="hljs-comment">// è¿½åŠ å†…å®¹</span>
    appendContent := <span class="hljs-string">"\nè¿½åŠ çš„å†…å®¹ï¼šGo yydsï¼"</span>
    _, err = file.WriteString(appendContent) <span class="hljs-comment">// ç›´æ¥å†™å…¥å­—ç¬¦ä¸²ï¼ˆæ›´ä¾¿æ·ï¼‰</span>
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        fmt.Printf(<span class="hljs-string">"è¿½åŠ å†…å®¹å¤±è´¥ï¼š%v\n"</span>, err)
        <span class="hljs-keyword">return</span>
    }
    fmt.Println(<span class="hljs-string">"è¿½åŠ å†…å®¹æˆåŠŸ"</span>)
}
</code></pre>
<p>è¯´æ˜ï¼š0644æ˜¯æ–‡ä»¶æƒé™ï¼ˆLinux/Macä¸‹æœ‰æ•ˆï¼‰ï¼Œè¡¨ç¤ºâ€œæ‰€æœ‰è€…å¯è¯»å†™ï¼Œå…¶ä»–ç”¨æˆ·åªè¯»â€ï¼Œæ˜¯å¸¸è§„æ–‡ä»¶çš„é»˜è®¤æƒé™ã€‚</p>
<h4 data-id="heading-20">3.1.4 åœºæ™¯4ï¼šåˆ é™¤æ–‡ä»¶/ç›®å½•</h4>
<p>åˆ é™¤æ–‡ä»¶ç”¨<code>os.Remove()</code>ï¼Œåˆ é™¤ç›®å½•ç”¨<code>os.RemoveAll()</code>ï¼ˆé€’å½’åˆ é™¤ç›®å½•ä¸‹æ‰€æœ‰å†…å®¹ï¼ŒåŒ…æ‹¬ç›®å½•æœ¬èº«ï¼‰ã€‚</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> (
    <span class="hljs-string">"fmt"</span>
    <span class="hljs-string">"os"</span>
)

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    <span class="hljs-comment">// 1. åˆ é™¤æ–‡ä»¶ï¼ˆtest.txtï¼‰</span>
    err := os.Remove(<span class="hljs-string">"test.txt"</span>)
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        fmt.Printf(<span class="hljs-string">"åˆ é™¤æ–‡ä»¶å¤±è´¥ï¼š%v\n"</span>, err)
        <span class="hljs-keyword">return</span>
    }
    fmt.Println(<span class="hljs-string">"æ–‡ä»¶åˆ é™¤æˆåŠŸ"</span>)

    <span class="hljs-comment">// 2. åˆ é™¤ç›®å½•ï¼ˆé€’å½’åˆ é™¤ï¼Œå³ä½¿ç›®å½•éç©ºï¼‰</span>
    err = os.RemoveAll(<span class="hljs-string">"test_dir"</span>)
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        fmt.Printf(<span class="hljs-string">"åˆ é™¤ç›®å½•å¤±è´¥ï¼š%v\n"</span>, err)
        <span class="hljs-keyword">return</span>
    }
    fmt.Println(<span class="hljs-string">"ç›®å½•åˆ é™¤æˆåŠŸ"</span>)
}
</code></pre>
<h3 data-id="heading-21">3.2 ç›®å½•æ“ä½œï¼ˆè¡¥å……ï¼‰</h3>
<p>æ—¥å¸¸å¼€å‘ä¸­ï¼Œé™¤äº†æ–‡ä»¶æ“ä½œï¼Œå¶å°”éœ€è¦åˆ›å»ºç›®å½•ã€è¯»å–ç›®å½•å†…å®¹ï¼Œæ ¸å¿ƒå‡½æ•°ï¼š<code>os.Mkdir()</code>ï¼ˆåˆ›å»ºå•ä¸ªç›®å½•ï¼‰ã€<code>os.MkdirAll()</code>ï¼ˆé€’å½’åˆ›å»ºå¤šçº§ç›®å½•ï¼‰ã€<code>os.ReadDir()</code>ï¼ˆè¯»å–ç›®å½•å†…å®¹ï¼‰ã€‚</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> (
    <span class="hljs-string">"fmt"</span>
    <span class="hljs-string">"os"</span>
)

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    <span class="hljs-comment">// 1. é€’å½’åˆ›å»ºå¤šçº§ç›®å½•ï¼ˆå¦‚ï¼ša/b/cï¼‰</span>
    err := os.MkdirAll(<span class="hljs-string">"a/b/c"</span>, <span class="hljs-number">0755</span>)
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        fmt.Printf(<span class="hljs-string">"åˆ›å»ºç›®å½•å¤±è´¥ï¼š%v\n"</span>, err)
        <span class="hljs-keyword">return</span>
    }
    fmt.Println(<span class="hljs-string">"å¤šçº§ç›®å½•åˆ›å»ºæˆåŠŸ"</span>)

    <span class="hljs-comment">// 2. è¯»å–ç›®å½•å†…å®¹ï¼ˆa/bç›®å½•ï¼‰</span>
    entries, err := os.ReadDir(<span class="hljs-string">"a/b"</span>)
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        fmt.Printf(<span class="hljs-string">"è¯»å–ç›®å½•å¤±è´¥ï¼š%v\n"</span>, err)
        <span class="hljs-keyword">return</span>
    }

    <span class="hljs-comment">// éå†ç›®å½•å†…å®¹</span>
    <span class="hljs-keyword">for</span> _, entry := <span class="hljs-keyword">range</span> entries {
        fmt.Printf(<span class="hljs-string">"åç§°ï¼š%sï¼Œæ˜¯å¦æ˜¯ç›®å½•ï¼š%t\n"</span>, entry.Name(), entry.IsDir())
    }
}
</code></pre>
<h3 data-id="heading-22">3.3 é¿å‘é‡ç‚¹ï¼ˆé«˜é¢‘è¸©å‘ï¼‰</h3>
<ul>
<li>
<p>å¿…é¡»å…³é—­æ–‡ä»¶å¥æŸ„ï¼šæ‰“å¼€æ–‡ä»¶ï¼ˆos.Openã€os.Createç­‰ï¼‰åï¼ŒåŠ¡å¿…ç”¨defer file.Close()å…³é—­æ–‡ä»¶å¥æŸ„ï¼Œå¦åˆ™ä¼šå¯¼è‡´æ–‡ä»¶èµ„æºæ³„éœ²ï¼Œé•¿æœŸè¿è¡Œå¯èƒ½å¯¼è‡´ç¨‹åºå¼‚å¸¸ï¼›</p>
</li>
<li>
<p>åˆ¤æ–­é”™è¯¯ï¼šæ–‡ä»¶æ“ä½œï¼ˆåˆ›å»ºã€æ‰“å¼€ã€è¯»å†™ã€åˆ é™¤ï¼‰éƒ½å¯èƒ½å‡ºé”™ï¼ˆå¦‚æ–‡ä»¶ä¸å­˜åœ¨ã€æƒé™ä¸è¶³ï¼‰ï¼Œå¿…é¡»åˆ¤æ–­è¿”å›çš„errï¼Œé¿å…ç¨‹åºå´©æºƒï¼›</p>
</li>
<li>
<p>os.RemoveAllæ…ç”¨ï¼šé€’å½’åˆ é™¤ç›®å½•ï¼Œä¸€æ—¦è·¯å¾„å†™é”™ï¼ˆå¦‚os.RemoveAll("/")ï¼‰ï¼Œä¼šå¯¼è‡´ä¸¥é‡åæœï¼Œç”Ÿäº§ç¯å¢ƒéœ€ä¸¥æ ¼æ ¡éªŒåˆ é™¤è·¯å¾„ï¼›</p>
</li>
<li>
<p>æ–‡ä»¶è·¯å¾„ï¼šç›¸å¯¹è·¯å¾„æ˜¯ç›¸å¯¹äºå½“å‰ç¨‹åºè¿è¡Œç›®å½•ï¼ˆos.Getwd()è¿”å›çš„è·¯å¾„ï¼‰ï¼Œè€Œéä»£ç æ–‡ä»¶æ‰€åœ¨ç›®å½•ï¼Œé¿å…è·¯å¾„é”™ä¹±ã€‚</p>
</li>
</ul>
<h3 data-id="heading-23">3.4 å‚è€ƒé“¾æ¥</h3>
<ul>
<li>Goå®˜æ–¹æ–‡æ¡£ï¼ˆosåŒ…æ–‡ä»¶æ“ä½œï¼‰ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgo.dev%2Fpkg%2Fos%2F%23File" target="_blank" title="https://go.dev/pkg/os/#File" ref="nofollow noopener noreferrer">os.File - os package</a></li>
</ul>
<h2 data-id="heading-24">å››ã€ioæ¥å£ï¼ˆioåŒ…ï¼‰</h2>
<p>ioåŒ…æ˜¯Goæ ‡å‡†åº“ä¸­â€œè¾“å…¥è¾“å‡ºâ€çš„æ ¸å¿ƒæŠ½è±¡ï¼Œå®šä¹‰äº†<strong>é€šç”¨çš„I/Oæ¥å£</strong>ï¼ˆå¦‚Readerã€Writerï¼‰ï¼Œç»Ÿä¸€äº†æ‰€æœ‰è¾“å…¥è¾“å‡ºåœºæ™¯çš„æ“ä½œè§„èŒƒâ€”â€”æ— è®ºæ˜¯æ–‡ä»¶è¯»å†™ã€ç½‘ç»œè¯»å†™ã€å†…å­˜è¯»å†™ï¼Œéƒ½éµå¾ªç›¸åŒçš„æ¥å£å®šä¹‰ï¼Œå®ç°äº†â€œå¤šæ€â€ï¼Œæå¤§æå‡äº†ä»£ç çš„é€šç”¨æ€§å’Œå¯æ‰©å±•æ€§ã€‚</p>
<p>æ ¸å¿ƒé‡ç‚¹ï¼šç†è§£Readerå’ŒWriterä¸¤ä¸ªæ ¸å¿ƒæ¥å£ï¼Œè¿™æ˜¯Go I/Oæ“ä½œçš„åŸºç¡€ï¼Œåç»­bufioã€netç­‰åŒ…éƒ½åŸºäºè¿™ä¸¤ä¸ªæ¥å£å®ç°ã€‚</p>
<h3 data-id="heading-25">4.1 æ ¸å¿ƒæ¥å£ï¼šReaderï¼ˆè¯»å–æ¥å£ï¼‰</h3>
<p>Readeræ¥å£å®šä¹‰äº†â€œè¯»å–æ•°æ®â€çš„è§„èŒƒï¼Œåªè¦æŸä¸ªç±»å‹å®ç°äº†Readeræ¥å£ï¼ˆå³å®ç°äº†Read()æ–¹æ³•ï¼‰ï¼Œå°±å¯ä»¥è¢«å½“ä½œâ€œè¯»å–æºâ€ï¼ˆå¦‚æ–‡ä»¶ã€å†…å­˜ã€ç½‘ç»œè¿æ¥ï¼‰ï¼Œç»Ÿä¸€ç”¨ç›¸åŒçš„æ–¹å¼è¯»å–æ•°æ®ã€‚</p>
<p>Readeræ¥å£æºç ï¼ˆæç®€ï¼Œæ¥è‡ªGoæ ‡å‡†åº“ï¼‰ï¼š</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">package</span> io

<span class="hljs-comment">// Reader è¯»å–æ¥å£ï¼Œæ ¸å¿ƒæ–¹æ³•æ˜¯Read</span>
<span class="hljs-keyword">type</span> Reader <span class="hljs-keyword">interface</span> {
    <span class="hljs-comment">// ä»è¯»å–æºè¯»å–æ•°æ®ï¼Œå†™å…¥åˆ°pï¼ˆå­—èŠ‚åˆ‡ç‰‡ï¼‰</span>
    <span class="hljs-comment">// è¿”å›å€¼nï¼šå®é™…è¯»å–çš„å­—èŠ‚æ•°ï¼›errï¼šé”™è¯¯ï¼ˆè¯»å–å®Œæˆæ—¶è¿”å›io.EOFï¼‰</span>
    Read(p []<span class="hljs-type">byte</span>) (n <span class="hljs-type">int</span>, err <span class="hljs-type">error</span>)
}
</code></pre>
<h4 data-id="heading-26">4.1.1 å¸¸ç”¨Readerå®ç°ï¼ˆå®æˆ˜ä¸­å¸¸è§ï¼‰</h4>
<p>Goæ ‡å‡†åº“ä¸­ï¼Œå¾ˆå¤šç±»å‹éƒ½å®ç°äº†Readeræ¥å£ï¼Œæ— éœ€æˆ‘ä»¬è‡ªå·±å®ç°ï¼Œç›´æ¥ä½¿ç”¨å³å¯ï¼š</p>
<ul>
<li>
<p><code>*os.File</code>ï¼šæ–‡ä»¶è¯»å–æºï¼ˆå¦‚å‰é¢æ–‡ä»¶æ“ä½œä¸­çš„fileå¥æŸ„ï¼Œå¯é€šè¿‡Read()æ–¹æ³•è¯»å–æ–‡ä»¶å†…å®¹ï¼‰ï¼›</p>
</li>
<li>
<p><code>strings.Reader</code>ï¼šå­—ç¬¦ä¸²è¯»å–æºï¼ˆå°†å­—ç¬¦ä¸²å½“ä½œè¯»å–æºï¼Œä»å­—ç¬¦ä¸²ä¸­è¯»å–æ•°æ®ï¼‰ï¼›</p>
</li>
<li>
<p><code>bytes.Reader</code>ï¼šå­—èŠ‚åˆ‡ç‰‡è¯»å–æºï¼ˆä»å­—èŠ‚åˆ‡ç‰‡ä¸­è¯»å–æ•°æ®ï¼‰ï¼›</p>
</li>
<li>
<p><code>os.Stdin</code>ï¼šæ ‡å‡†è¾“å…¥è¯»å–æºï¼ˆä»ç»ˆç«¯è¯»å–è¾“å…¥ï¼‰ã€‚</p>
</li>
</ul>
<h4 data-id="heading-27">4.1.2 æç®€ä»£ç ç¤ºä¾‹ï¼ˆä½¿ç”¨Readeræ¥å£è¯»å–ï¼‰</h4>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> (
    <span class="hljs-string">"bytes"</span>
    <span class="hljs-string">"fmt"</span>
    <span class="hljs-string">"io"</span>
)

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    <span class="hljs-comment">// 1. å­—èŠ‚åˆ‡ç‰‡ä½œä¸ºè¯»å–æºï¼ˆbytes.Reader å®ç°äº†Readeræ¥å£ï¼‰</span>
    data := []<span class="hljs-type">byte</span>(<span class="hljs-string">"Hello io.Reader!"</span>)
    reader := bytes.NewReader(data)

    <span class="hljs-comment">// 2. ç”¨Readeræ¥å£çš„Read()æ–¹æ³•è¯»å–æ•°æ®</span>
    <span class="hljs-keyword">var</span> buf [<span class="hljs-number">128</span>]<span class="hljs-type">byte</span>
    n, err := reader.Read(buf[:])
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &amp;&amp; err != io.EOF { <span class="hljs-comment">// io.EOFè¡¨ç¤ºè¯»å–å®Œæˆï¼Œéé”™è¯¯</span>
        fmt.Printf(<span class="hljs-string">"è¯»å–å¤±è´¥ï¼š%v\n"</span>, err)
        <span class="hljs-keyword">return</span>
    }

    fmt.Printf(<span class="hljs-string">"è¯»å–å­—èŠ‚æ•°ï¼š%dï¼Œå†…å®¹ï¼š%s\n"</span>, n, buf[:n])
}
</code></pre>
<p>è¯´æ˜ï¼šio.EOFæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„é”™è¯¯ï¼Œè¡¨ç¤ºâ€œè¯»å–å·²å®Œæˆâ€ï¼Œå¹¶éçœŸæ­£çš„é”™è¯¯ï¼Œæ— éœ€å¤„ç†ï¼ˆå¯å¿½ç•¥ï¼‰ã€‚</p>
<h3 data-id="heading-28">4.2 æ ¸å¿ƒæ¥å£ï¼šWriterï¼ˆå†™å…¥æ¥å£ï¼‰</h3>
<p>Writeræ¥å£å®šä¹‰äº†â€œå†™å…¥æ•°æ®â€çš„è§„èŒƒï¼Œåªè¦æŸä¸ªç±»å‹å®ç°äº†Writeræ¥å£ï¼ˆå³å®ç°äº†Write()æ–¹æ³•ï¼‰ï¼Œå°±å¯ä»¥è¢«å½“ä½œâ€œå†™å…¥ç›®æ ‡â€ï¼ˆå¦‚æ–‡ä»¶ã€å†…å­˜ã€ç½‘ç»œè¿æ¥ï¼‰ï¼Œç»Ÿä¸€ç”¨ç›¸åŒçš„æ–¹å¼å†™å…¥æ•°æ®ã€‚</p>
<p>Writeræ¥å£æºç ï¼ˆæç®€ï¼Œæ¥è‡ªGoæ ‡å‡†åº“ï¼‰ï¼š</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">package</span> io

<span class="hljs-comment">// Writer å†™å…¥æ¥å£ï¼Œæ ¸å¿ƒæ–¹æ³•æ˜¯Write</span>
<span class="hljs-keyword">type</span> Writer <span class="hljs-keyword">interface</span> {
    <span class="hljs-comment">// å°†pï¼ˆå­—èŠ‚åˆ‡ç‰‡ï¼‰ä¸­çš„æ•°æ®ï¼Œå†™å…¥åˆ°å†™å…¥ç›®æ ‡</span>
    <span class="hljs-comment">// è¿”å›å€¼nï¼šå®é™…å†™å…¥çš„å­—èŠ‚æ•°ï¼›errï¼šé”™è¯¯</span>
    Write(p []<span class="hljs-type">byte</span>) (n <span class="hljs-type">int</span>, err <span class="hljs-type">error</span>)
}
</code></pre>
<h4 data-id="heading-29">4.2.1 å¸¸ç”¨Writerå®ç°ï¼ˆå®æˆ˜ä¸­å¸¸è§ï¼‰</h4>
<ul>
<li>
<p><code>*os.File</code>ï¼šæ–‡ä»¶å†™å…¥ç›®æ ‡ï¼ˆæ–‡ä»¶å¥æŸ„ï¼Œå¯é€šè¿‡Write()æ–¹æ³•å†™å…¥æ–‡ä»¶ï¼‰ï¼›</p>
</li>
<li>
<p><code>strings.Builder</code>ï¼šå­—ç¬¦ä¸²å†™å…¥ç›®æ ‡ï¼ˆå°†æ•°æ®å†™å…¥åˆ°å­—ç¬¦ä¸²ç¼“å†²åŒºï¼Œæœ€ç»ˆæ‹¼æ¥æˆå­—ç¬¦ä¸²ï¼‰ï¼›</p>
</li>
<li>
<p><code>bytes.Buffer</code>ï¼šå­—èŠ‚åˆ‡ç‰‡å†™å…¥ç›®æ ‡ï¼ˆå°†æ•°æ®å†™å…¥åˆ°å­—èŠ‚ç¼“å†²åŒºï¼‰ï¼›</p>
</li>
<li>
<p><code>os.Stdout</code>ï¼šæ ‡å‡†è¾“å‡ºå†™å…¥ç›®æ ‡ï¼ˆå°†æ•°æ®å†™å…¥åˆ°ç»ˆç«¯ï¼Œå³fmt.Printçš„åº•å±‚å®ç°ï¼‰ã€‚</p>
</li>
</ul>
<h4 data-id="heading-30">4.2.2 æç®€ä»£ç ç¤ºä¾‹ï¼ˆä½¿ç”¨Writeræ¥å£å†™å…¥ï¼‰</h4>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> (
    <span class="hljs-string">"bytes"</span>
    <span class="hljs-string">"fmt"</span>
    <span class="hljs-string">"io"</span>
)

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    <span class="hljs-comment">// 1. å­—èŠ‚ç¼“å†²åŒºä½œä¸ºå†™å…¥ç›®æ ‡ï¼ˆbytes.Buffer å®ç°äº†Writeræ¥å£ï¼‰</span>
    <span class="hljs-keyword">var</span> writer bytes.Buffer

    <span class="hljs-comment">// 2. ç”¨Writeræ¥å£çš„Write()æ–¹æ³•å†™å…¥æ•°æ®</span>
    content := []<span class="hljs-type">byte</span>(<span class="hljs-string">"Hello io.Writer!"</span>)
    n, err := writer.Write(content)
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        fmt.Printf(<span class="hljs-string">"å†™å…¥å¤±è´¥ï¼š%v\n"</span>, err)
        <span class="hljs-keyword">return</span>
    }

    fmt.Printf(<span class="hljs-string">"å†™å…¥å­—èŠ‚æ•°ï¼š%dï¼Œç¼“å†²åŒºå†…å®¹ï¼š%s\n"</span>, n, writer.String())
}
</code></pre>
<h3 data-id="heading-31">4.3 ioåŒ…å¸¸ç”¨å·¥å…·å‡½æ•°ï¼ˆå®æˆ˜é«˜é¢‘ï¼‰</h3>
<p>ioåŒ…é™¤äº†å®šä¹‰æ ¸å¿ƒæ¥å£ï¼Œè¿˜æä¾›äº†ä¸€äº›å¸¸ç”¨å·¥å…·å‡½æ•°ï¼Œç®€åŒ–I/Oæ“ä½œï¼Œæ— éœ€è‡ªå·±å°è£…ï¼Œé‡ç‚¹æŒæ¡2ä¸ªï¼š</p>
<ul>
<li>
<p><code>io.Copy(dst Writer, src Reader)</code>ï¼šå°†è¯»å–æºï¼ˆsrcï¼‰çš„æ•°æ®ï¼Œå¤åˆ¶åˆ°å†™å…¥ç›®æ ‡ï¼ˆdstï¼‰ï¼Œè¿”å›å¤åˆ¶çš„å­—èŠ‚æ•°ï¼ˆåç»­â€œå¤åˆ¶æ•°æ®â€ç« èŠ‚è¯¦ç»†è®²ï¼‰ï¼›</p>
</li>
<li>
<p><code>io.ReadAll(r Reader)</code>ï¼šè¯»å–è¯»å–æºï¼ˆrï¼‰çš„æ‰€æœ‰æ•°æ®ï¼Œè¿”å›å­—èŠ‚åˆ‡ç‰‡ï¼ˆç®€åŒ–è¯»å–æ“ä½œï¼Œæ— éœ€æ‰‹åŠ¨å¾ªç¯è¯»å–ï¼‰ã€‚</p>
</li>
</ul>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> (
    <span class="hljs-string">"bytes"</span>
    <span class="hljs-string">"fmt"</span>
    <span class="hljs-string">"io"</span>
)

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    <span class="hljs-comment">// 1. io.ReadAllï¼šè¯»å–æ‰€æœ‰æ•°æ®</span>
    src := bytes.NewReader([]<span class="hljs-type">byte</span>(<span class="hljs-string">"Hello io.ReadAll!"</span>))
    data, err := io.ReadAll(src)
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        fmt.Printf(<span class="hljs-string">"è¯»å–å¤±è´¥ï¼š%v\n"</span>, err)
        <span class="hljs-keyword">return</span>
    }
    fmt.Printf(<span class="hljs-string">"è¯»å–æ‰€æœ‰å†…å®¹ï¼š%s\n"</span>, data)

    <span class="hljs-comment">// 2. io.Copyï¼šå¤åˆ¶æ•°æ®ï¼ˆåç»­ç« èŠ‚è¯¦ç»†è®²ï¼‰</span>
    src2 := bytes.NewReader([]<span class="hljs-type">byte</span>(<span class="hljs-string">"Hello io.Copy!"</span>))
    <span class="hljs-keyword">var</span> dst bytes.Buffer
    n, err := io.Copy(&amp;dst, src2)
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        fmt.Printf(<span class="hljs-string">"å¤åˆ¶å¤±è´¥ï¼š%v\n"</span>, err)
        <span class="hljs-keyword">return</span>
    }
    fmt.Printf(<span class="hljs-string">"å¤åˆ¶å­—èŠ‚æ•°ï¼š%dï¼Œç›®æ ‡å†…å®¹ï¼š%s\n"</span>, n, dst.String())
}
</code></pre>
<h3 data-id="heading-32">4.4 é¿å‘é‡ç‚¹</h3>
<ul>
<li>
<p>io.EOFä¸æ˜¯é”™è¯¯ï¼šè¯»å–æ•°æ®æ—¶ï¼Œè¿”å›io.EOFè¡¨ç¤ºâ€œè¯»å–å®Œæˆâ€ï¼Œæ— éœ€å¤„ç†ï¼Œé¿å…è¯¯åˆ¤ä¸ºé”™è¯¯å¯¼è‡´ç¨‹åºå¼‚å¸¸ï¼›</p>
</li>
<li>
<p>æ¥å£çš„é€šç”¨æ€§ï¼šåªè¦å®ç°äº†Reader/Writeræ¥å£ï¼Œå°±å¯ä»¥ç”¨ç›¸åŒçš„æ–¹å¼æ“ä½œï¼Œæ¯”å¦‚ç”¨io.Copy()æ—¢å¯ä»¥å¤åˆ¶æ–‡ä»¶å†…å®¹ï¼Œä¹Ÿå¯ä»¥å¤åˆ¶ç½‘ç»œæ•°æ®ï¼Œæ— éœ€åŒºåˆ†å…·ä½“ç±»å‹ï¼›</p>
</li>
<li>
<p>Read/Writeçš„è¿”å›å€¼ï¼šåŠ¡å¿…å…³æ³¨è¿”å›çš„nï¼ˆå®é™…è¯»å†™çš„å­—èŠ‚æ•°ï¼‰ï¼Œå°¤å…¶æ˜¯å¤§æ•°æ®é‡è¯»å†™æ—¶ï¼Œå¯èƒ½å‡ºç°â€œéƒ¨åˆ†è¯»å†™â€ï¼ˆnå°äºä¼ å…¥çš„å­—èŠ‚åˆ‡ç‰‡é•¿åº¦ï¼‰ï¼Œéœ€å¾ªç¯è¯»å†™ç¡®ä¿å®Œæˆã€‚</p>
</li>
</ul>
<h3 data-id="heading-33">4.5 å‚è€ƒé“¾æ¥</h3>
<ul>
<li>Goå®˜æ–¹æ–‡æ¡£ï¼ˆioåŒ…ï¼‰ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgo.dev%2Fpkg%2Fio%2F" target="_blank" title="https://go.dev/pkg/io/" ref="nofollow noopener noreferrer">io package - io</a></li>
</ul>
<h2 data-id="heading-34">äº”ã€ç¼“å†²è¯»å†™ï¼ˆbufioåŒ…ï¼‰</h2>
<p>bufioåŒ…æ˜¯åŸºäºioåŒ…çš„<strong>ç¼“å†²I/Oå·¥å…·åŒ…</strong>ï¼Œæ ¸å¿ƒä½œç”¨æ˜¯â€œç»™Reader/Writerå¢åŠ ç¼“å†²åŒºâ€ï¼Œå‡å°‘åº•å±‚I/Oæ“ä½œçš„æ¬¡æ•°ï¼Œæå‡è¯»å†™æ•ˆç‡â€”â€”å°¤å…¶æ˜¯åœ¨é«˜é¢‘ã€å°æ•°æ®é‡è¯»å†™åœºæ™¯ï¼ˆå¦‚è¯»å–æ–‡æœ¬æ–‡ä»¶çš„æ¯ä¸€è¡Œã€ç»ˆç«¯è¾“å…¥ï¼‰ï¼Œç¼“å†²è¯»å†™çš„æ•ˆç‡è¿œé«˜äºç›´æ¥è¯»å†™ã€‚</p>
<p>æ ¸å¿ƒé€»è¾‘ï¼šç¼“å†²åŒºæœ¬è´¨æ˜¯ä¸€å—å†…å­˜ï¼Œè¯»å–æ—¶å…ˆå°†æ•°æ®è¯»å–åˆ°ç¼“å†²åŒºï¼Œåç»­è¯»å–ç›´æ¥ä»ç¼“å†²åŒºè·å–ï¼›å†™å…¥æ—¶å…ˆå°†æ•°æ®å†™å…¥åˆ°ç¼“å†²åŒºï¼Œç¼“å†²åŒºæ»¡åå†ä¸€æ¬¡æ€§å†™å…¥åˆ°åº•å±‚ç›®æ ‡ï¼Œå‡å°‘åº•å±‚I/Oè°ƒç”¨ï¼ˆåº•å±‚I/Oæ“ä½œå¼€é”€è¾ƒå¤§ï¼‰ã€‚</p>
<p>æ ¸å¿ƒç»„ä»¶ï¼šbufio.Readerï¼ˆç¼“å†²è¯»å–ï¼‰ã€bufio.Writerï¼ˆç¼“å†²å†™å…¥ï¼‰ï¼Œåˆ†åˆ«å¯¹åº”io.Readerå’Œio.Writeræ¥å£ï¼Œå®Œå…¨å…¼å®¹ioåŒ…çš„æ‰€æœ‰æ“ä½œã€‚</p>
<h3 data-id="heading-35">5.1 ç¼“å†²è¯»å–ï¼ˆbufio.Readerï¼‰</h3>
<p>bufio.ReaderåŸºäºio.Readerå®ç°ï¼Œå¢åŠ äº†ç¼“å†²åŒºï¼Œæä¾›äº†æ›´ä¾¿æ·çš„è¯»å–æ–¹æ³•ï¼ˆå¦‚è¯»å–ä¸€è¡Œã€è¯»å–å•è¯ï¼‰ï¼Œæ ¸å¿ƒç”¨æ³•ï¼šå…ˆé€šè¿‡<code>bufio.NewReader()</code>åˆ›å»ºç¼“å†²è¯»å–å™¨ï¼Œå†è°ƒç”¨å…¶æ–¹æ³•è¯»å–æ•°æ®ã€‚</p>
<p>é«˜é¢‘æ–¹æ³•ï¼š<code>ReadLine()</code>ï¼ˆè¯»å–ä¸€è¡Œï¼‰ã€<code>ReadString()</code>ï¼ˆè¯»å–åˆ°æŒ‡å®šåˆ†éš”ç¬¦ï¼‰ã€<code>ReadBytes()</code>ï¼ˆè¯»å–åˆ°æŒ‡å®šåˆ†éš”ç¬¦ï¼Œè¿”å›å­—èŠ‚åˆ‡ç‰‡ï¼‰ã€‚</p>
<h4 data-id="heading-36">5.1.1 æç®€ä»£ç ç¤ºä¾‹ï¼ˆè¯»å–æ–‡ä»¶æ¯ä¸€è¡Œï¼‰</h4>
<p>è¯»å–æ–‡æœ¬æ–‡ä»¶çš„æ¯ä¸€è¡Œï¼Œæ˜¯æ—¥å¸¸å¼€å‘ä¸­é«˜é¢‘åœºæ™¯ï¼Œç”¨bufio.Readerçš„ReadLine()æ–¹æ³•æœ€ä¾¿æ·ï¼ˆæ¯”ç›´æ¥ç”¨os.ReadFile()æ›´çµæ´»ï¼‰ã€‚</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> (
    <span class="hljs-string">"bufio"</span>
    <span class="hljs-string">"fmt"</span>
    <span class="hljs-string">"os"</span>
)

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    <span class="hljs-comment">// 1. æ‰“å¼€æ–‡ä»¶ï¼ˆåªè¯»æ¨¡å¼ï¼‰</span>
    file, err := os.Open(<span class="hljs-string">"test.txt"</span>)
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        fmt.Printf(<span class="hljs-string">"æ‰“å¼€æ–‡ä»¶å¤±è´¥ï¼š%v\n"</span>, err)
        <span class="hljs-keyword">return</span>
    }
    <span class="hljs-keyword">defer</span> file.Close()

    <span class="hljs-comment">// 2. åˆ›å»ºç¼“å†²è¯»å–å™¨ï¼ˆç¼“å†²åŒºé»˜è®¤å¤§å°4096å­—èŠ‚ï¼Œå¯è‡ªå®šä¹‰ï¼‰</span>
    reader := bufio.NewReader(file)

    <span class="hljs-comment">// 3. å¾ªç¯è¯»å–æ¯ä¸€è¡Œ</span>
    <span class="hljs-keyword">for</span> {
        <span class="hljs-comment">// è¯»å–ä¸€è¡Œï¼ˆè¿”å›å­—èŠ‚åˆ‡ç‰‡ï¼Œä¸å«æ¢è¡Œç¬¦ï¼‰</span>
        line, err := reader.ReadBytes(<span class="hljs-string">'\n'</span>) <span class="hljs-comment">// æŒ‰æ¢è¡Œç¬¦åˆ†éš”</span>
        <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
            <span class="hljs-keyword">if</span> err.Error() == <span class="hljs-string">"EOF"</span> { <span class="hljs-comment">// è¯»å–å®Œæˆ</span>
                <span class="hljs-keyword">break</span>
            }
            fmt.Printf(<span class="hljs-string">"è¯»å–å¤±è´¥ï¼š%v\n"</span>, err)
            <span class="hljs-keyword">return</span>
        }
        <span class="hljs-comment">// å»é™¤æ¢è¡Œç¬¦ï¼Œæ‰“å°å†…å®¹</span>
        fmt.Printf(<span class="hljs-string">"è¯»å–ä¸€è¡Œï¼š%s"</span>, line)
    }
    fmt.Println(<span class="hljs-string">"è¯»å–å®Œæˆ"</span>)
}
</code></pre>
<p>è¡¥å……ï¼šReadString('\n')ä¸ReadBytes('\n')ç”¨æ³•ç±»ä¼¼ï¼ŒåŒºåˆ«æ˜¯ReadStringè¿”å›å­—ç¬¦ä¸²ï¼ŒReadBytesè¿”å›å­—èŠ‚åˆ‡ç‰‡ï¼Œå¯æ ¹æ®éœ€æ±‚é€‰æ‹©ã€‚</p>
<h3 data-id="heading-37">5.2 ç¼“å†²å†™å…¥ï¼ˆbufio.Writerï¼‰</h3>
<p>bufio.WriteråŸºäºio.Writerå®ç°ï¼Œå¢åŠ äº†ç¼“å†²åŒºï¼Œå†™å…¥æ•°æ®æ—¶å…ˆå†™å…¥ç¼“å†²åŒºï¼Œç¼“å†²åŒºæ»¡åè‡ªåŠ¨åˆ·æ–°åˆ°åº•å±‚ç›®æ ‡ï¼›ä¹Ÿå¯æ‰‹åŠ¨è°ƒç”¨<code>Flush()</code>æ–¹æ³•ï¼Œå°†ç¼“å†²åŒºçš„æ•°æ®ç«‹å³åˆ·æ–°åˆ°åº•å±‚ã€‚</p>
<p>æ ¸å¿ƒæ³¨æ„ï¼šç¼“å†²å†™å…¥åï¼ŒåŠ¡å¿…è°ƒç”¨Flush()æ–¹æ³•ï¼ˆç”¨deferç¡®ä¿ï¼‰ï¼Œå¦åˆ™ç¼“å†²åŒºä¸­çš„æ•°æ®å¯èƒ½æœªå†™å…¥åˆ°åº•å±‚ç›®æ ‡ï¼ˆå¯¼è‡´æ•°æ®ä¸¢å¤±ï¼‰ã€‚</p>
<h4 data-id="heading-38">5.2.1 æç®€ä»£ç ç¤ºä¾‹ï¼ˆç¼“å†²å†™å…¥æ–‡ä»¶ï¼‰</h4>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> (
    <span class="hljs-string">"bufio"</span>
    <span class="hljs-string">"fmt"</span>
    <span class="hljs-string">"os"</span>
)

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    <span class="hljs-comment">// 1. æ‰“å¼€æ–‡ä»¶ï¼ˆå†™å…¥æ¨¡å¼ï¼Œä¸å­˜åœ¨åˆ™åˆ›å»ºï¼‰</span>
    file, err := os.Create(<span class="hljs-string">"buf_test.txt"</span>)
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        fmt.Printf(<span class="hljs-string">"åˆ›å»ºæ–‡ä»¶å¤±è´¥ï¼š%v\n"</span>, err)
        <span class="hljs-keyword">return</span>
    }
    <span class="hljs-keyword">defer</span> file.Close()

    <span class="hljs-comment">// 2. åˆ›å»ºç¼“å†²å†™å…¥å™¨ï¼ˆé»˜è®¤ç¼“å†²åŒº4096å­—èŠ‚ï¼‰</span>
    writer := bufio.NewWriter(file)
    <span class="hljs-keyword">defer</span> writer.Flush() <span class="hljs-comment">// å»¶è¿Ÿåˆ·æ–°ç¼“å†²åŒºï¼Œç¡®ä¿æ•°æ®å†™å…¥æ–‡ä»¶ï¼ˆå…³é”®ï¼‰</span>

    <span class="hljs-comment">// 3. ç¼“å†²å†™å…¥å†…å®¹ï¼ˆå¤šæ¬¡å†™å…¥ï¼Œå…ˆå­˜åˆ°ç¼“å†²åŒºï¼‰</span>
    content1 := <span class="hljs-string">"ç¼“å†²å†™å…¥ç¬¬ä¸€è¡Œ\n"</span>
    content2 := <span class="hljs-string">"ç¼“å†²å†™å…¥ç¬¬äºŒè¡Œ\n"</span>

    _, err = writer.WriteString(content1)
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        fmt.Printf(<span class="hljs-string">"å†™å…¥å¤±è´¥ï¼š%v\n"</span>, err)
        <span class="hljs-keyword">return</span>
    }

    _, err = writer.WriteString(content2)
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        fmt.Printf(<span class="hljs-string">"å†™å…¥å¤±è´¥ï¼š%v\n"</span>, err)
        <span class="hljs-keyword">return</span>
    }

    fmt.Println(<span class="hljs-string">"å†™å…¥å®Œæˆï¼ˆç¼“å†²åŒºå°†è‡ªåŠ¨åˆ·æ–°ï¼‰"</span>)
}
</code></pre>
<p>è¯´æ˜ï¼šdefer writer.Flush()å¿…é¡»å†™åœ¨writeråˆ›å»ºä¹‹åï¼Œç¡®ä¿ç¨‹åºé€€å‡ºå‰ï¼Œç¼“å†²åŒºçš„æ•°æ®å…¨éƒ¨åˆ·æ–°åˆ°åº•å±‚æ–‡ä»¶ï¼Œé¿å…æ•°æ®ä¸¢å¤±ã€‚</p>
<h3 data-id="heading-39">5.3 ç¼“å†²è¯»å†™çš„ä¼˜åŠ¿ï¼ˆå¯¹æ¯”ç›´æ¥è¯»å†™ï¼‰</h3>
<p>ç”¨è¡¨æ ¼æ¸…æ™°å¯¹æ¯”â€œç›´æ¥è¯»å†™ï¼ˆosåŒ…ï¼‰â€å’Œâ€œç¼“å†²è¯»å†™ï¼ˆbufioåŒ…ï¼‰â€çš„åŒºåˆ«ï¼Œç†è§£ä¸ºä»€ä¹ˆéœ€è¦ç”¨bufioï¼š</p>






























<table><thead><tr><th><strong>å¯¹æ¯”ç»´åº¦</strong></th><th><strong>ç›´æ¥è¯»å†™ï¼ˆosåŒ…ï¼‰</strong></th><th><strong>ç¼“å†²è¯»å†™ï¼ˆbufioåŒ…ï¼‰</strong></th></tr></thead><tbody><tr><td>åº•å±‚è°ƒç”¨æ¬¡æ•°</td><td>æ¯æ¬¡è¯»å†™éƒ½è°ƒç”¨åº•å±‚I/Oï¼Œæ¬¡æ•°å¤šï¼Œå¼€é”€å¤§</td><td>å…ˆå†™å…¥/è¯»å–åˆ°ç¼“å†²åŒºï¼Œæ‰¹é‡è°ƒç”¨åº•å±‚I/Oï¼Œæ¬¡æ•°å°‘ï¼Œå¼€é”€å°</td></tr><tr><td>æ•ˆç‡</td><td>å°æ•°æ®é‡ã€é«˜é¢‘è¯»å†™æ—¶ï¼Œæ•ˆç‡æä½</td><td>å°æ•°æ®é‡ã€é«˜é¢‘è¯»å†™æ—¶ï¼Œæ•ˆç‡æå‡æ˜æ˜¾ï¼ˆ10å€+ï¼‰</td></tr><tr><td>ä¾¿æ·æ€§</td><td>ä»…æä¾›åŸºç¡€è¯»å†™æ–¹æ³•ï¼Œæ— ä¾¿æ·æ“ä½œï¼ˆå¦‚è¯»å–ä¸€è¡Œï¼‰</td><td>æä¾›ReadLineã€ReadStringç­‰ä¾¿æ·æ–¹æ³•ï¼Œç®€åŒ–å¼€å‘</td></tr><tr><td>é€‚ç”¨åœºæ™¯</td><td>å¤§æ•°æ®é‡ã€ä¸€æ¬¡æ€§è¯»å†™ï¼ˆå¦‚è¯»å–æ•´ä¸ªå¤§æ–‡ä»¶ï¼‰</td><td>å°æ•°æ®é‡ã€é«˜é¢‘è¯»å†™ï¼ˆå¦‚è¯»å–é…ç½®æ–‡ä»¶æ¯ä¸€è¡Œã€æ—¥å¿—å†™å…¥ï¼‰</td></tr></tbody></table>
<h3 data-id="heading-40">5.4 é¿å‘é‡ç‚¹</h3>
<ul>
<li>
<p>ç¼“å†²å†™å…¥å¿…é¡»Flush()ï¼šç”¨bufio.Writerå†™å…¥åï¼ŒåŠ¡å¿…è°ƒç”¨Flush()æ–¹æ³•ï¼ˆæˆ–ç”¨deferï¼‰ï¼Œå¦åˆ™ç¼“å†²åŒºä¸­çš„æ•°æ®å¯èƒ½æœªå†™å…¥åˆ°åº•å±‚ç›®æ ‡ï¼Œå¯¼è‡´æ•°æ®ä¸¢å¤±ï¼›</p>
</li>
<li>
<p>ç¼“å†²åŒºå¤§å°é€‰æ‹©ï¼šé»˜è®¤ç¼“å†²åŒºå¤§å°ä¸º4096å­—èŠ‚ï¼ˆ4KBï¼‰ï¼Œè‹¥è¯»å†™çš„å•æ¬¡æ•°æ®é‡è¾ƒå¤§ï¼ˆå¦‚1MBï¼‰ï¼Œå¯è‡ªå®šä¹‰ç¼“å†²åŒºå¤§å°ï¼ˆå¦‚bufio.NewReaderSize(file, 1024*1024)ï¼‰ï¼›</p>
</li>
<li>
<p>å…¼å®¹ioåŒ…ï¼šbufio.Readerå’Œbufio.Writeréƒ½å®ç°äº†io.Readerå’Œio.Writeræ¥å£ï¼Œå¯ä¸ioåŒ…çš„å‡½æ•°ï¼ˆå¦‚io.Copyï¼‰æ— ç¼é…åˆä½¿ç”¨ã€‚</p>
</li>
</ul>
<h3 data-id="heading-41">5.5 å‚è€ƒé“¾æ¥</h3>
<ul>
<li>Goå®˜æ–¹æ–‡æ¡£ï¼ˆbufioåŒ…ï¼‰ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgo.dev%2Fpkg%2Fbufio%2F" target="_blank" title="https://go.dev/pkg/bufio/" ref="nofollow noopener noreferrer">bufio package - bufio</a></li>
</ul>
<h2 data-id="heading-42">å…­ã€å¤åˆ¶æ•°æ®ï¼ˆio+bufioåŒ…ç»“åˆï¼‰</h2>
<p>å¤åˆ¶æ•°æ®æ˜¯I/Oæ“ä½œä¸­çš„é«˜é¢‘åœºæ™¯ï¼ˆå¦‚æ–‡ä»¶å¤åˆ¶ã€æ•°æ®å¤‡ä»½ã€ç½‘ç»œæ•°æ®è½¬å‘ï¼‰ï¼ŒGoä¸­å¤åˆ¶æ•°æ®çš„æ ¸å¿ƒå·¥å…·æ˜¯<code>io.Copy()</code>å‡½æ•°ï¼ˆioåŒ…ï¼‰ï¼Œç»“åˆbufioåŒ…çš„ç¼“å†²è¯»å†™ï¼Œå¯å®ç°é«˜æ•ˆå¤åˆ¶â€”â€”æ— éœ€æ‰‹åŠ¨å¾ªç¯è¯»å†™ï¼Œä¸€è¡Œä»£ç å³å¯å®Œæˆå¤åˆ¶æ“ä½œã€‚</p>
<p>æ ¸å¿ƒé€»è¾‘ï¼šio.Copy(dst Writer, src Reader)ï¼Œå°†è¯»å–æºï¼ˆsrcï¼‰çš„æ•°æ®ï¼Œè‡ªåŠ¨å¤åˆ¶åˆ°å†™å…¥ç›®æ ‡ï¼ˆdstï¼‰ï¼Œè¿”å›å¤åˆ¶çš„å­—èŠ‚æ•°å’Œé”™è¯¯ï¼›åº•å±‚ä¼šè‡ªåŠ¨å¤„ç†â€œéƒ¨åˆ†è¯»å†™â€ï¼Œå¾ªç¯è¯»å–ç›´åˆ°srcè¯»å–å®Œæˆï¼ˆè¿”å›io.EOFï¼‰ã€‚</p>
<h3 data-id="heading-43">6.1 æ ¸å¿ƒå¤åˆ¶åœºæ™¯ï¼ˆå®æˆ˜é«˜é¢‘ï¼‰</h3>
<h4 data-id="heading-44">6.1.1 åœºæ™¯1ï¼šæ–‡ä»¶å¤åˆ¶ï¼ˆæœ€å¸¸ç”¨ï¼‰</h4>
<p>å°†ä¸€ä¸ªæ–‡ä»¶çš„å†…å®¹ï¼Œå¤åˆ¶åˆ°å¦ä¸€ä¸ªæ–‡ä»¶ï¼Œç”¨io.Copy()ç»“åˆosåŒ…çš„æ–‡ä»¶æ“ä½œï¼Œä¸€è¡Œä»£ç å³å¯å®Œæˆï¼Œé«˜æ•ˆç®€æ´ã€‚</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> (
    <span class="hljs-string">"fmt"</span>
    <span class="hljs-string">"io"</span>
    <span class="hljs-string">"os"</span>
)

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    <span class="hljs-comment">// 1. æ‰“å¼€æºæ–‡ä»¶ï¼ˆåªè¯»æ¨¡å¼ï¼‰</span>
    srcFile, err := os.Open(<span class="hljs-string">"source.txt"</span>)
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        fmt.Printf(<span class="hljs-string">"æ‰“å¼€æºæ–‡ä»¶å¤±è´¥ï¼š%v\n"</span>, err)
        <span class="hljs-keyword">return</span>
    }
    <span class="hljs-keyword">defer</span> srcFile.Close()

    <span class="hljs-comment">// 2. åˆ›å»ºç›®æ ‡æ–‡ä»¶ï¼ˆå†™å…¥æ¨¡å¼ï¼Œä¸å­˜åœ¨åˆ™åˆ›å»ºï¼Œå­˜åœ¨åˆ™æ¸…ç©ºï¼‰</span>
    dstFile, err := os.Create(<span class="hljs-string">"target.txt"</span>)
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        fmt.Printf(<span class="hljs-string">"åˆ›å»ºç›®æ ‡æ–‡ä»¶å¤±è´¥ï¼š%v\n"</span>, err)
        <span class="hljs-keyword">return</span>
    }
    <span class="hljs-keyword">defer</span> dstFile.Close()

    <span class="hljs-comment">// 3. å¤åˆ¶æ•°æ®ï¼ˆæ ¸å¿ƒä¸€è¡Œä»£ç ï¼‰</span>
    <span class="hljs-comment">// srcFileï¼ˆReaderï¼‰ â†’ dstFileï¼ˆWriterï¼‰</span>
    n, err := io.Copy(dstFile, srcFile)
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        fmt.Printf(<span class="hljs-string">"å¤åˆ¶æ–‡ä»¶å¤±è´¥ï¼š%v\n"</span>, err)
        <span class="hljs-keyword">return</span>
    }

    fmt.Printf(<span class="hljs-string">"æ–‡ä»¶å¤åˆ¶æˆåŠŸï¼Œå¤åˆ¶å­—èŠ‚æ•°ï¼š%d\n"</span>, n)
}
</code></pre>
<h4 data-id="heading-45">6.1.2 åœºæ™¯2ï¼šé«˜æ•ˆæ–‡ä»¶å¤åˆ¶ï¼ˆç»“åˆbufioç¼“å†²ï¼‰</h4>
<p>æ™®é€šio.Copy()å·²èƒ½å®Œæˆæ–‡ä»¶å¤åˆ¶ï¼Œä½†ç»“åˆbufioåŒ…çš„ç¼“å†²è¯»å†™ï¼Œå¯è¿›ä¸€æ­¥æå‡å¤åˆ¶æ•ˆç‡ï¼ˆå°¤å…¶æ˜¯å°æ–‡ä»¶ã€é«˜é¢‘å¤åˆ¶åœºæ™¯ï¼‰ï¼Œåªéœ€ç»™srcFileå’ŒdstFileå¢åŠ ç¼“å†²å±‚å³å¯ã€‚</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> (
    <span class="hljs-string">"bufio"</span>
    <span class="hljs-string">"fmt"</span>
    <span class="hljs-string">"io"</span>
    <span class="hljs-string">"os"</span>
)

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    <span class="hljs-comment">// æ‰“å¼€æºæ–‡ä»¶å’Œç›®æ ‡æ–‡ä»¶ï¼ˆæ­¥éª¤åŒä¸Šï¼‰</span>
    srcFile, err := os.Open(<span class="hljs-string">"source.txt"</span>)
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        fmt.Printf(<span class="hljs-string">"æ‰“å¼€æºæ–‡ä»¶å¤±è´¥ï¼š%v\n"</span>, err)
        <span class="hljs-keyword">return</span>
    }
    <span class="hljs-keyword">defer</span> srcFile.Close()

    dstFile, err := os.Create(<span class="hljs-string">"target.txt"</span>)
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        fmt.Printf(<span class="hljs-string">"åˆ›å»ºç›®æ ‡æ–‡ä»¶å¤±è´¥ï¼š%v\n"</span>, err)
        <span class="hljs-keyword">return</span>
    }
    <span class="hljs-keyword">defer</span> dstFile.Close()

    <span class="hljs-comment">// å¢åŠ ç¼“å†²å±‚ï¼ˆæ ¸å¿ƒä¼˜åŒ–ï¼‰</span>
    bufSrc := bufio.NewReader(srcFile)
    bufDst := bufio.NewWriter(dstFile)
    <span class="hljs-keyword">defer</span> bufDst.Flush() <span class="hljs-comment">// ç¼“å†²å†™å…¥éœ€åˆ·æ–°</span>

    <span class="hljs-comment">// ç¼“å†²å¤åˆ¶ï¼ˆæ•ˆç‡æ›´é«˜ï¼‰</span>
    n, err := io.Copy(bufDst, bufSrc)
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        fmt.Printf(<span class="hljs-string">"å¤åˆ¶å¤±è´¥ï¼š%v\n"</span>, err)
        <span class="hljs-keyword">return</span>
    }

    fmt.Printf(<span class="hljs-string">"ç¼“å†²å¤åˆ¶æˆåŠŸï¼Œå¤åˆ¶å­—èŠ‚æ•°ï¼š%d\n"</span>, n)
}
</code></pre>
<h4 data-id="heading-46">6.1.3 åœºæ™¯3ï¼šå…¶ä»–å¤åˆ¶åœºæ™¯ï¼ˆæ‹“å±•ï¼‰</h4>
<p>ç”±äºio.Copy()åŸºäºReaderå’ŒWriteræ¥å£ï¼Œå› æ­¤å¯å®ç°ä»»æ„â€œReaderâ†’Writerâ€çš„å¤åˆ¶ï¼Œä¸æ­¢äºæ–‡ä»¶ï¼š</p>
<ul>
<li>
<p>å†…å­˜â†’æ–‡ä»¶ï¼šbytes.Readerï¼ˆå†…å­˜ï¼‰ â†’ *os.Fileï¼ˆæ–‡ä»¶ï¼‰ï¼›</p>
</li>
<li>
<p>æ–‡ä»¶â†’å†…å­˜ï¼š*os.Fileï¼ˆæ–‡ä»¶ï¼‰ â†’ bytes.Bufferï¼ˆå†…å­˜ï¼‰ï¼›</p>
</li>
<li>
<p>æ ‡å‡†è¾“å…¥â†’æ ‡å‡†è¾“å‡ºï¼šos.Stdinï¼ˆç»ˆç«¯è¾“å…¥ï¼‰ â†’ os.Stdoutï¼ˆç»ˆç«¯è¾“å‡ºï¼‰ã€‚</p>
</li>
</ul>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// ç¤ºä¾‹ï¼šæ ‡å‡†è¾“å…¥â†’æ ‡å‡†è¾“å‡ºï¼ˆç»ˆç«¯è¾“å…¥ä»€ä¹ˆï¼Œå°±æ‰“å°ä»€ä¹ˆï¼‰</span>
<span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> (
    <span class="hljs-string">"io"</span>
    <span class="hljs-string">"os"</span>
)

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    <span class="hljs-comment">// å¤åˆ¶æ ‡å‡†è¾“å…¥åˆ°æ ‡å‡†è¾“å‡º</span>
    io.Copy(os.Stdout, os.Stdin)
}
</code></pre>
<h3 data-id="heading-47">6.2 é¿å‘é‡ç‚¹</h3>
<ul>
<li>
<p>å…³é—­æ–‡ä»¶å¥æŸ„ï¼šå¤åˆ¶æ–‡ä»¶æ—¶ï¼Œæºæ–‡ä»¶å’Œç›®æ ‡æ–‡ä»¶éƒ½éœ€æ‰“å¼€ï¼ŒåŠ¡å¿…ç”¨deferå…³é—­ï¼Œé¿å…èµ„æºæ³„éœ²ï¼›</p>
</li>
<li>
<p>ç¼“å†²å†™å…¥éœ€Flush()ï¼šç»“åˆbufio.Writerå¤åˆ¶æ—¶ï¼ŒåŠ¡å¿…è°ƒç”¨Flush()æ–¹æ³•ï¼Œç¡®ä¿ç¼“å†²åŒºçš„æ•°æ®å†™å…¥ç›®æ ‡æ–‡ä»¶ï¼›</p>
</li>
<li>
<p>å¤åˆ¶å¤§æ–‡ä»¶ï¼šio.Copy()åº•å±‚ä¼šè‡ªåŠ¨åˆ†å—å¤åˆ¶ï¼Œæ— éœ€æ‹…å¿ƒå†…å­˜æº¢å‡º</p>
</li>
</ul>
<p>æç¤ºï¼šio.Copy()å‡½æ•°æœ¬èº«å·²å…·å¤‡åŸºç¡€çš„é«˜æ•ˆæ€§ï¼Œåº•å±‚ä¼šæ ¹æ®æ•°æ®é‡è‡ªåŠ¨ä¼˜åŒ–è¯»å†™é€»è¾‘ï¼›å¯¹äºè¶…å¤§æ–‡ä»¶ï¼ˆå¦‚1GBä»¥ä¸Šï¼‰ï¼Œæ— éœ€é¢å¤–å°è£…ï¼Œç›´æ¥ä½¿ç”¨io.Copy()æˆ–ç»“åˆbufioç¼“å†²å³å¯ç¨³å®šè¿è¡Œï¼Œæ— éœ€æ‹…å¿ƒå†…å­˜å ç”¨é—®é¢˜ã€‚è‡³æ­¤ï¼Œæˆ‘ä»¬å·²æŒæ¡ioåŒ…ä¸bufioåŒ…çš„æ ¸å¿ƒç»“åˆç”¨æ³•ï¼Œé€šè¿‡æ¥å£çš„é€šç”¨æ€§å’Œç¼“å†²çš„é«˜æ•ˆæ€§ï¼Œå¯è½»æ¾åº”å¯¹å„ç±»I/Oå¤åˆ¶åœºæ™¯ï¼Œå†ç»“åˆå‰æ–‡çš„fmtã€osåŒ…çŸ¥è¯†ï¼Œå››å¤§åŸºç¡€æ ‡å‡†åº“çš„æ ¸å¿ƒå®æˆ˜ç”¨æ³•å·²å…¨éƒ¨è¦†ç›–ï¼Œè¶³ä»¥æ”¯æ’‘æ—¥å¸¸å¼€å‘ä¸­çš„ç»å¤§å¤šæ•°åŸºç¡€åœºæ™¯ã€‚</p>
<h2 data-id="heading-48">ä¸ƒã€ç« èŠ‚æ€»ç»“ä¸å®æˆ˜æ‹“å±•ï¼ˆå…¨æ–‡é—­ç¯ï¼‰</h2>
<p>æœ¬ç« å›´ç»•Golangæœ€åŸºç¡€ã€æœ€å¸¸ç”¨çš„4ä¸ªæ ‡å‡†åº“ï¼ˆfmtã€osã€ioã€bufioï¼‰ï¼ŒæŒ‰â€œæ ¸å¿ƒç”¨æ³•+æç®€ä»£ç +é¿å‘é‡ç‚¹+å‚è€ƒé“¾æ¥â€çš„å®æˆ˜é€»è¾‘ï¼Œå®Œæ•´è¦†ç›–äº†æ ¼å¼åŒ–è¾“å…¥è¾“å‡ºã€æ“ä½œç³»ç»Ÿäº¤äº’ã€æ–‡ä»¶æ“ä½œã€I/Oæ¥å£ã€ç¼“å†²è¯»å†™ã€æ•°æ®å¤åˆ¶å…­å¤§æ ¸å¿ƒåœºæ™¯ï¼Œæ‰€æœ‰ä»£ç ç¤ºä¾‹å‡å¯ç›´æ¥å¤åˆ¶è¿è¡Œï¼Œæ— éœ€é¢å¤–ä¾èµ–ï¼Œç²¾å‡†åŒ¹é…æ—¥å¸¸å¼€å‘80%çš„åŸºç¡€éœ€æ±‚ã€‚</p>
<h3 data-id="heading-49">7.1 æ ¸å¿ƒçŸ¥è¯†ç‚¹æ¢³ç†ï¼ˆå¿«é€Ÿå›é¡¾ï¼Œä¾¿äºè®°å¿†ï¼‰</h3>
<p>ç”¨è¡¨æ ¼æ¸…æ™°æ±‡æ€»å››å¤§æ ‡å‡†åº“çš„æ ¸å¿ƒå®šä½å’Œé«˜é¢‘ç”¨æ³•ï¼Œå¸®ä½ å¿«é€Ÿæ¢³ç†é‡ç‚¹ï¼Œé¿å…æ··æ·†ï¼š</p>






























<table><thead><tr><th><strong>æ ‡å‡†åº“</strong></th><th><strong>æ ¸å¿ƒå®šä½</strong></th><th><strong>é«˜é¢‘æ ¸å¿ƒç”¨æ³•</strong></th></tr></thead><tbody><tr><td>fmt</td><td>æ ¼å¼åŒ–è¾“å…¥è¾“å‡º</td><td>fmt.Printf()ï¼ˆè‡ªå®šä¹‰æ ¼å¼åŒ–ï¼‰ã€fmt.Scan()ï¼ˆè¯»å–è¾“å…¥ï¼‰ã€%s/%d/%+vç­‰æ ¼å¼åŒ–åŠ¨è¯</td></tr><tr><td>os</td><td>ä¸æ“ä½œç³»ç»Ÿ/æ–‡ä»¶äº¤äº’</td><td>ç¯å¢ƒå˜é‡ï¼ˆGetenv/Setenvï¼‰ã€å‘½ä»¤è¡Œå‚æ•°ï¼ˆos.Argsï¼‰ã€æ–‡ä»¶æ“ä½œï¼ˆCreate/Open/ReadFileï¼‰</td></tr><tr><td>io</td><td>I/Oæ¥å£æŠ½è±¡ä¸å·¥å…·</td><td>Reader/Writeræ ¸å¿ƒæ¥å£ã€io.Copy()ï¼ˆæ•°æ®å¤åˆ¶ï¼‰ã€io.ReadAll()ï¼ˆè¯»å–å…¨éƒ¨æ•°æ®ï¼‰</td></tr><tr><td>bufio</td><td>ç¼“å†²è¯»å†™ä¼˜åŒ–</td><td>bufio.Readerï¼ˆè¯»å–ä¸€è¡Œï¼‰ã€bufio.Writerï¼ˆç¼“å†²å†™å…¥ï¼‰ã€Flush()ï¼ˆåˆ·æ–°ç¼“å†²åŒºï¼‰</td></tr></tbody></table>
<h3 data-id="heading-50">7.2 å®æˆ˜é¿å‘æ±‡æ€»ï¼ˆé«˜é¢‘è¸©å‘ç»ˆææ€»ç»“ï¼‰</h3>
<p>ç»“åˆå‰æ–‡å„ç« èŠ‚é¿å‘é‡ç‚¹ï¼Œæ±‡æ€»10ä¸ªæ—¥å¸¸å¼€å‘ä¸­æœ€å®¹æ˜“è¸©çš„å‘ï¼Œå¸®ä½ è§„é¿ä½çº§é”™è¯¯ï¼Œæå‡å¼€å‘æ•ˆç‡ï¼š</p>
<ul>
<li>
<p>fmtåŒ…ï¼šæ ¼å¼åŒ–åŠ¨è¯ä¸æ•°æ®ç±»å‹å¿…é¡»åŒ¹é…ï¼ˆå¦‚%sä¸èƒ½æ¥æ”¶æ•´æ•°ï¼‰ï¼›Scanç³»åˆ—å‡½æ•°å¿…é¡»ä¼ å˜é‡æŒ‡é’ˆï¼Œå¦åˆ™æ— æ³•èµ‹å€¼ã€‚</p>
</li>
<li>
<p>osåŒ…ï¼šè¯»å–ç¯å¢ƒå˜é‡åŠ¡å¿…è®¾ç½®å…œåº•é»˜è®¤å€¼ï¼Œé¿å…æœªé…ç½®ç¯å¢ƒå˜é‡å¯¼è‡´ç¨‹åºå¼‚å¸¸ï¼›os.Setenvè®¾ç½®çš„ç¯å¢ƒå˜é‡ä»…å½“å‰è¿›ç¨‹æœ‰æ•ˆã€‚</p>
</li>
<li>
<p>æ–‡ä»¶æ“ä½œï¼šæ‰“å¼€æ–‡ä»¶åå¿…é¡»ç”¨deferå…³é—­å¥æŸ„ï¼›os.RemoveAllé€’å½’åˆ é™¤éœ€ä¸¥æ ¼æ ¡éªŒè·¯å¾„ï¼Œé¿å…è¯¯åˆ é‡è¦æ–‡ä»¶ï¼›ç›¸å¯¹è·¯å¾„åŸºäºç¨‹åºè¿è¡Œç›®å½•ï¼Œè€Œéä»£ç æ–‡ä»¶ç›®å½•ã€‚</p>
</li>
<li>
<p>ioåŒ…ï¼šio.EOFæ˜¯è¯»å–å®Œæˆçš„æ ‡å¿—ï¼Œå¹¶éé”™è¯¯ï¼Œæ— éœ€å¤„ç†ï¼›Read/Writeå¯èƒ½å‡ºç°éƒ¨åˆ†è¯»å†™ï¼Œå¤§æ•°æ®é‡éœ€å¾ªç¯ç¡®ä¿è¯»å†™å®Œæ•´ã€‚</p>
</li>
<li>
<p>bufioåŒ…ï¼šç¼“å†²å†™å…¥åå¿…é¡»è°ƒç”¨Flush()ï¼Œå¦åˆ™ç¼“å†²åŒºæ•°æ®å¯èƒ½ä¸¢å¤±ï¼›å¯æ ¹æ®è¯»å†™é‡è‡ªå®šä¹‰ç¼“å†²åŒºå¤§å°ï¼Œæå‡æ•ˆç‡ã€‚</p>
</li>
<li>
<p>æ•°æ®å¤åˆ¶ï¼šç»“åˆbufioç¼“å†²å¯æå‡å°æ–‡ä»¶å¤åˆ¶æ•ˆç‡ï¼›å¤åˆ¶å®Œæˆåéœ€ç¡®ä¿æºæ–‡ä»¶ã€ç›®æ ‡æ–‡ä»¶åŠç¼“å†²å†™å…¥å™¨å‡æ­£å¸¸å…³é—­/åˆ·æ–°ã€‚</p>
</li>
</ul>
<h3 data-id="heading-51">7.3 å®æˆ˜æ‹“å±•æç¤ºï¼ˆè¿›é˜¶æ–¹å‘ï¼‰</h3>
<p>æœ¬ç« è®²è§£çš„æ˜¯å››å¤§æ ‡å‡†åº“çš„åŸºç¡€æ ¸å¿ƒç”¨æ³•ï¼ŒæŒæ¡åå¯ç»“åˆä»¥ä¸‹æ–¹å‘è¿›ä¸€æ­¥æ‹“å±•ï¼Œé€‚é…æ›´å¤æ‚çš„å¼€å‘åœºæ™¯ï¼š</p>
<ol>
<li>
<p>è¿›é˜¶æ ‡å‡†åº“å­¦ä¹ ï¼šåç»­å¯å­¦ä¹ <code>ioutil</code>ï¼ˆæ–‡ä»¶å·¥å…·ï¼ŒGo 1.16+éƒ¨åˆ†åŠŸèƒ½æ•´åˆåˆ°osåŒ…ï¼‰ã€<code>bytes</code>ï¼ˆå­—èŠ‚æ“ä½œï¼‰ã€<code>strings</code>ï¼ˆå­—ç¬¦ä¸²æ“ä½œï¼‰ï¼Œä¸æœ¬ç« å†…å®¹æ— ç¼è¡”æ¥ã€‚</p>
</li>
<li>
<p>å®æˆ˜åœºæ™¯å°è£…ï¼šå¯å°†é«˜é¢‘æ–‡ä»¶æ“ä½œã€æ•°æ®å¤åˆ¶ã€ç¯å¢ƒå˜é‡è¯»å–ç­‰é€»è¾‘å°è£…æˆå·¥å…·å‡½æ•°ï¼ˆå¦‚æ–‡ä»¶å¤åˆ¶å·¥å…·ã€é…ç½®è¯»å–å·¥å…·ï¼‰ï¼Œæå‡ä»£ç å¤ç”¨æ€§ã€‚</p>
</li>
<li>
<p>æ€§èƒ½ä¼˜åŒ–ï¼šé’ˆå¯¹è¶…å¤§æ–‡ä»¶å¤åˆ¶ã€é«˜é¢‘è¯»å†™åœºæ™¯ï¼Œå¯è‡ªå®šä¹‰bufioç¼“å†²åŒºå¤§å°ï¼Œæˆ–ç»“åˆ<code>io.CopyBuffer()</code>å®ç°æ›´çµæ´»çš„ç¼“å†²æ§åˆ¶ï¼›å°æ–‡ä»¶æ‰¹é‡å¤åˆ¶å¯å¼•å…¥å¹¶å‘ï¼Œæå‡æ•ˆç‡ã€‚</p>
</li>
<li>
<p>é”™è¯¯å¤„ç†ä¼˜åŒ–ï¼šå®é™…å¼€å‘ä¸­å¯ç»“åˆ<code>errors</code>åŒ…æˆ–ç¬¬ä¸‰æ–¹é”™è¯¯å¤„ç†åº“ï¼Œå¯¹I/Oæ“ä½œã€æ–‡ä»¶æ“ä½œçš„é”™è¯¯è¿›è¡Œæ›´è¯¦ç»†çš„å°è£…å’Œæ—¥å¿—è®°å½•ï¼Œä¾¿äºé—®é¢˜æ’æŸ¥ã€‚</p>
</li>
</ol>
<h3 data-id="heading-52">7.4 å­¦ä¹ å»ºè®®</h3>
<p>å­¦ä¹ Golangæ ‡å‡†åº“çš„æ ¸å¿ƒåŸåˆ™æ˜¯â€œå…ˆä¼šç”¨ï¼Œå†æ·±ç©¶â€ï¼šå…ˆæŒæ¡æœ¬ç« è®²è§£çš„æ ¸å¿ƒç”¨æ³•å’Œä»£ç ç¤ºä¾‹ï¼Œèƒ½ç‹¬ç«‹å®Œæˆæ ¼å¼åŒ–è¾“å‡ºã€æ–‡ä»¶æ“ä½œã€æ•°æ®å¤åˆ¶ç­‰åŸºç¡€åœºæ™¯å¼€å‘ï¼›åç»­å†æ·±å…¥é˜…è¯»æ ‡å‡†åº“æºç ï¼ˆå¦‚Reader/Writeræ¥å£å®ç°ã€bufioç¼“å†²åŒºåŸç†ï¼‰ï¼Œç†è§£åº•å±‚é€»è¾‘ï¼Œæå‡æŠ€æœ¯æ·±åº¦ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Android 17 ç»ˆäºæœ‰åŸç”Ÿåº”ç”¨é”äº†ï¼Œå°ç±³ç”¨æˆ·ç¬‘äº†ï¼šæˆ‘ä»¬ç”¨äº†å¥½å¤šå¹´äº†]]></title>    <link>https://juejin.cn/post/7604694326518104115</link>    <guid>https://juejin.cn/post/7604694326518104115</guid>    <pubDate>2026-02-10T00:54:17.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604694326518104115" data-draft-id="7604697194794975242" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Android 17 ç»ˆäºæœ‰åŸç”Ÿåº”ç”¨é”äº†ï¼Œå°ç±³ç”¨æˆ·ç¬‘äº†ï¼šæˆ‘ä»¬ç”¨äº†å¥½å¤šå¹´äº†"/> <meta itemprop="keywords" content="Android"/> <meta itemprop="datePublished" content="2026-02-10T00:54:17.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é»„æ—æ™´"/> <meta itemprop="url" content="https://juejin.cn/user/3985057546510423"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Android 17 ç»ˆäºæœ‰åŸç”Ÿåº”ç”¨é”äº†ï¼Œå°ç±³ç”¨æˆ·ç¬‘äº†ï¼šæˆ‘ä»¬ç”¨äº†å¥½å¤šå¹´äº†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3985057546510423/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é»„æ—æ™´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-10T00:54:17.000Z" title="Tue Feb 10 2026 00:54:17 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å€Ÿæ‰‹æœºç»™æœ‹å‹çœ‹ä¸ªç…§ç‰‡ï¼Œå¿ƒé‡Œå´åœ¨é»˜å¿µã€Œåƒä¸‡åˆ«ä¹±ç¿»ã€â€”â€”è¿™ç§ç„¦è™‘ï¼ŒAndroid ç”¨æˆ·åº”è¯¥éƒ½ä½“ä¼šè¿‡ã€‚</p>
<p>å°ç±³ã€ä¸‰æ˜Ÿç­‰å‚å•†æ—©å°±ç»™å‡ºäº†ç­”æ¡ˆï¼š<strong>åº”ç”¨é”</strong>ã€‚ä½†åŸç”Ÿ Androidï¼Ÿä¸€ç›´ç¼ºå¸­ã€‚</p>
<p>ç°åœ¨ï¼ŒAndroid 17 ç»ˆäºè¡¥ä¸Šäº†è¿™å—çŸ­æ¿ã€‚</p>
<p>è¿‘æ—¥ï¼Œæœ‰å¼€å‘è€…åœ¨ Android Canary 2601 ç³»ç»Ÿä»£ç ä¸­å‘ç°äº†ä¸¤ä¸ªå…³é”®å­—æ®µï¼š<code>app_locked_new_notification</code> å’Œ <code>app_locked_notification_message</code>ï¼Œæ­ç¤ºäº† Android 17 åŸç”Ÿåº”ç”¨é”åŠŸèƒ½çš„æ›´å¤šç»†èŠ‚ã€‚è€Œè¿™ä¸€æ¬¡ï¼ŒGoogle ä¸ä»…ä»…æ˜¯ã€Œé”ä½åº”ç”¨ã€é‚£ä¹ˆç®€å•ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f304e4336a9d49559c8015549b604649~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6buE5p6X5pm0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771289658&amp;x-signature=R2jSY1YC29fIWl0HgXxeM2mWc9E%3D" alt="android17_applock_cover.png" loading="lazy"/></p>
<h2 data-id="heading-0">Android 17 åŸç”Ÿåº”ç”¨é”ï¼šæ€ä¹ˆç”¨ï¼Ÿ</h2>
<p>ä»ç›®å‰æ›å…‰çš„ä¿¡æ¯æ¥çœ‹ï¼Œæ“ä½œæ–¹å¼éå¸¸ç›´è§‰ï¼š</p>
<p><strong>é•¿æŒ‰åº”ç”¨å›¾æ ‡ â†’ é€‰æ‹©ã€Œé”å®šåº”ç”¨ã€â†’ å®Œæˆ</strong></p>
<p>è§£é”æ–¹å¼æ”¯æŒï¼š</p>
<ul>
<li>â€¢ PIN ç </li>
<li>â€¢ å¯†ç </li>
<li>â€¢ æŒ‡çº¹ / é¢éƒ¨ç­‰ç”Ÿç‰©è¯†åˆ«</li>
</ul>
<p>ä¸éœ€è¦è¿›è®¾ç½®ç¿»åŠå¤©ï¼Œä¸éœ€è¦ä¸‹è½½ç¬¬ä¸‰æ–¹ Appï¼Œæ¡Œé¢ä¸Šç›´æ¥æ“ä½œï¼Œä¸¤æ­¥æå®šã€‚</p>
<p>è¿™å¯¹äºä¸€ç›´ä½¿ç”¨ Pixel ç­‰åŸç”Ÿ Android è®¾å¤‡çš„ç”¨æˆ·æ¥è¯´ï¼Œæ˜¯æœŸå¾…äº†å¤ªä¹…çš„åŠŸèƒ½ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5d3aa61a613f4662a1c81518b79e3269~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6buE5p6X5pm0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771289658&amp;x-signature=m0LMcHYPwqZCQ8XHL40HqLUe0vM%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-1">é‡å¤´æˆï¼šé€šçŸ¥å†…å®¹ä¹Ÿä¼šè¢«ã€Œé”ä½ã€</h2>
<p>åº”ç”¨é”ä¸ç¨€å¥‡ï¼Œä½† <strong>é”äº†åº”ç”¨ä¹‹åï¼Œé€šçŸ¥è¿˜åœ¨ã€Œæ³„å¯†ã€</strong>â€”â€”è¿™æ‰æ˜¯çœŸæ­£çš„ç—›ç‚¹ã€‚</p>
<p>æƒ³è±¡ä¸€ä¸‹ï¼šä½ é”äº†å¾®ä¿¡ï¼Œåˆ«äººæ‰“ä¸å¼€ã€‚ä½†ä¸€æ¡æ¶ˆæ¯å¼¹å‡ºæ¥ï¼Œé€šçŸ¥æ èµ«ç„¶æ˜¾ç¤ºã€Œè€å©†ï¼šä»Šæ™šæ—©ç‚¹å›æ¥ã€â€¦â€¦é”äº†ä¸ªå¯‚å¯ã€‚</p>
<p>Android 17 æƒ³åˆ°äº†è¿™ä¸€å±‚ã€‚</p>
<p><strong>æ ¹æ®æŠ¥é“ï¼Œç³»ç»Ÿé‡‡ç”¨äº†ã€Œåˆ†ç±»å±è”½ã€ç­–ç•¥ï¼š</strong></p>




















<table><thead><tr><th>åº”ç”¨ç±»å‹</th><th>é€šçŸ¥æ˜¾ç¤ºå†…å®¹</th><th>éšè—å†…å®¹</th></tr></thead><tbody><tr><td><strong>å³æ—¶é€šè®¯ç±»</strong>ï¼ˆå¦‚ Google Messagesï¼‰</td><td>ä»…æ˜¾ç¤ºã€Œæ–°æ¶ˆæ¯ã€</td><td>å‘é€è€…ã€èŠå¤©å†…å®¹å…¨éƒ¨éšè—</td></tr><tr><td><strong>å…¶ä»–åº”ç”¨</strong></td><td>ä»…æ˜¾ç¤ºã€Œæ–°é€šçŸ¥ã€</td><td>å…·ä½“é€šçŸ¥å†…å®¹å…¨éƒ¨éšè—</td></tr></tbody></table>
<p>è¿™æ„å‘³ç€ï¼š</p>
<ul>
<li>â€¢ é€šçŸ¥æé†’<strong>ä¾ç„¶å­˜åœ¨</strong>ï¼Œä½ ä¸ä¼šé”™è¿‡é‡è¦æ¶ˆæ¯</li>
<li>â€¢ ä½†ä»»ä½•äºº<strong>çœ‹ä¸åˆ°å…·ä½“å†…å®¹</strong>ï¼Œéšç§è¢«å½»åº•ä¿æŠ¤</li>
</ul>
<p>è‡³äºè¢«é”åº”ç”¨çš„åç§°å’Œå›¾æ ‡æ˜¯å¦ä¹Ÿä¼šåœ¨é€šçŸ¥ä¸­éšè—ï¼Œç›®å‰å°šæœªç¡®å®šã€‚å‚è€ƒå…¶ä»–å‚å•†çš„åšæ³•ï¼ŒGoogle ææœ‰å¯èƒ½é‡‡å–æŠ˜ä¸­æ–¹æ¡ˆâ€”â€”<strong>ä¿ç•™æ¥æºæ ‡è¯†ï¼Œéšè—å…·ä½“å†…å®¹</strong>ã€‚</p>
<h2 data-id="heading-2">å’Œå°ç±³åº”ç”¨é”çš„æ­£é¢å¯¹æ¯”</h2>
<p>è¯´åˆ°åº”ç”¨é”ï¼Œå°ç±³å¯èƒ½æ˜¯åšå¾—æœ€æ—©ã€æœ€å®Œå–„çš„å›½äº§å‚å•†ä¹‹ä¸€ã€‚ä» MIUI æ—¶ä»£åˆ°ç°åœ¨çš„ HyperOSï¼Œåº”ç”¨é”å·²ç»æ˜¯ä¸€å¥—æˆç†Ÿçš„éšç§ä½“ç³»äº†ã€‚</p>
<p>é‚£ Android 17 çš„åŸç”Ÿæ–¹æ¡ˆå’Œå°ç±³æ¯”ï¼Œå·®åœ¨å“ªï¼Ÿåˆå¼ºåœ¨å“ªï¼Ÿ</p>


















































<table><thead><tr><th>å¯¹æ¯”ç»´åº¦</th><th>Android 17 åŸç”Ÿåº”ç”¨é”</th><th>å°ç±³ HyperOS åº”ç”¨é”</th></tr></thead><tbody><tr><td><strong>å¯ç”¨æ–¹å¼</strong></td><td>é•¿æŒ‰å›¾æ ‡ â†’ é”å®šåº”ç”¨</td><td>è®¾ç½® â†’ åº”ç”¨è®¾ç½® â†’ åº”ç”¨é”</td></tr><tr><td><strong>è®¤è¯æ–¹å¼</strong></td><td>PIN / å¯†ç  / ç”Ÿç‰©è¯†åˆ«</td><td>æ‰‹åŠ¿å¯†ç  / PIN / æŒ‡çº¹ / é¢éƒ¨</td></tr><tr><td><strong>é€šçŸ¥å†…å®¹éšè—</strong></td><td>ç³»ç»Ÿçº§æ™ºèƒ½å±è”½ï¼ˆåˆ†ç±»ç­–ç•¥ï¼‰</td><td>æ”¯æŒï¼Œé”å±è‡ªåŠ¨éšè—æ¨é€å†…å®¹</td></tr><tr><td><strong>éšè—åº”ç”¨</strong></td><td>æš‚æœªç¡®è®¤</td><td>æ”¯æŒï¼ŒåŒæŒ‡æ»‘åŠ¨å”¤å‡ºéšè—ç©ºé—´</td></tr><tr><td><strong>ç‹¬ç«‹å¯†ç </strong></td><td>ä½¿ç”¨è®¾å¤‡é”å±å¯†ç </td><td>å¯è®¾ç½®ç‹¬ç«‹äºé”å±çš„åº”ç”¨é”å¯†ç </td></tr><tr><td><strong>ç”Ÿæ€è¦†ç›–</strong></td><td>æ‰€æœ‰ Android 17 è®¾å¤‡é€šç”¨</td><td>ä»…é™å°ç±³ / Redmi è®¾å¤‡</td></tr><tr><td><strong>ç¬¬ä¸‰æ–¹åº”ç”¨ä¾èµ–</strong></td><td>æ— éœ€ä»»ä½•ç¬¬ä¸‰æ–¹åº”ç”¨</td><td>æ— éœ€ä»»ä½•ç¬¬ä¸‰æ–¹åº”ç”¨</td></tr><tr><td><strong>å¯å®šåˆ¶æ€§</strong></td><td>è¾ƒåŸºç¡€ï¼ˆç›®å‰å·²çŸ¥ä¿¡æ¯ï¼‰</td><td>é«˜åº¦å®šåˆ¶ï¼Œæ”¯æŒæ—¶é—´é”ã€ä½ç½®é”ç­‰</td></tr></tbody></table>
<p><strong>å°ç±³çš„ä¼˜åŠ¿ï¼š</strong></p>
<p>å°ç±³åº”ç”¨é”ç»è¿‡å¤šå¹´è¿­ä»£ï¼ŒåŠŸèƒ½è¿œä¸æ­¢ã€Œé”ä½ä¸€ä¸ª Appã€é‚£ä¹ˆç®€å•ï¼š</p>
<ul>
<li>â€¢ <strong>éšè—åº”ç”¨</strong>ï¼šä¸å…‰é”ä½ï¼Œè¿˜èƒ½ä»æ¡Œé¢å½»åº•éšè—ï¼ŒåŒæŒ‡æ»‘åŠ¨æ‰èƒ½å”¤å‡º</li>
<li>â€¢ <strong>ç‹¬ç«‹å¯†ç </strong>ï¼šåº”ç”¨é”å¯†ç å¯ä»¥å’Œé”å±å¯†ç ä¸åŒï¼Œé˜²æ­¢ã€ŒçŸ¥é“é”å±å¯†ç å°±èƒ½æ‰“å¼€ä¸€åˆ‡ã€</li>
<li>â€¢ <strong>ç»†ç²’åº¦æ§åˆ¶</strong>ï¼šå¯ä»¥æŒ‰æ—¶é—´æ®µã€æŒ‰åœºæ™¯çµæ´»é…ç½®</li>
</ul>
<p><strong>Android 17 çš„ä¼˜åŠ¿ï¼š</strong></p>
<ul>
<li>â€¢ <strong>ç³»ç»Ÿçº§ç»Ÿä¸€æ ‡å‡†</strong>ï¼šæ‰€æœ‰æ­è½½ Android 17 çš„è®¾å¤‡éƒ½èƒ½ç”¨ï¼ŒPixelã€ä¸‰æ˜Ÿã€ä¸€åŠ ã€æ‘©æ‰˜ç½—æ‹‰â€¦â€¦ä¸å†æ˜¯æŸä¸ªå“ç‰Œçš„ä¸“å±</li>
<li>â€¢ <strong>é€šçŸ¥å±è”½æ›´æ™ºèƒ½</strong>ï¼šåˆ†ç±»å±è”½ç­–ç•¥æ˜¯ç³»ç»Ÿçº§å®ç°ï¼Œç¬¬ä¸‰æ–¹ App æ— æ³•ç»•è¿‡</li>
<li>â€¢ <strong>ç”Ÿæ€è”åŠ¨æ½œåŠ›</strong>ï¼šä½œä¸ºåŸç”ŸåŠŸèƒ½ï¼Œå¤©ç„¶å…·å¤‡ä¸ Wear OSã€Android Auto ç­‰å¹³å°è”åŠ¨çš„èƒ½åŠ›</li>
</ul>
<h2 data-id="heading-3">å¯¹ç”¨æˆ·æ„å‘³ç€ä»€ä¹ˆï¼Ÿ</h2>
<h3 data-id="heading-4">å¯¹åŸç”Ÿ Android ç”¨æˆ·ï¼šä¹…æ—±é€¢ç”˜éœ–</h3>
<p>Pixelã€æ‘©æ‰˜ç½—æ‹‰ã€Nokia ç­‰å“ç‰Œçš„ç”¨æˆ·ï¼Œç»ˆäºä¸ç”¨å†å¿å—ã€Œè£¸å¥”ã€çš„éšç§çŠ¶æ€ã€‚ä¸€ä¸ªç®€å•çš„é•¿æŒ‰æ“ä½œï¼Œå°±èƒ½é”ä½æ•æ„Ÿåº”ç”¨ï¼Œä¸éœ€è¦å®‰è£…ä»»ä½•ç¬¬ä¸‰æ–¹å·¥å…·ã€‚</p>
<h3 data-id="heading-5">å¯¹å°ç±³ç­‰å›½äº§æ‰‹æœºç”¨æˆ·ï¼šé”¦ä¸Šæ·»èŠ±</h3>
<p>å°ç±³çš„åº”ç”¨é”ä¸ä¼šæ¶ˆå¤±ï¼Œåè€Œä¼šå› ä¸º Android 17 çš„åŸç”Ÿæ”¯æŒè€Œ<strong>å˜å¾—æ›´å¼º</strong>ã€‚åŸç”Ÿæ¡†æ¶æä¾›äº†é€šçŸ¥å±è”½çš„åº•å±‚èƒ½åŠ›ï¼Œå°ç±³å¯ä»¥åœ¨æ­¤åŸºç¡€ä¸Šå åŠ è‡ªå·±çš„ã€Œéšè—åº”ç”¨ã€ã€Œç‹¬ç«‹å¯†ç ã€ç­‰é«˜çº§åŠŸèƒ½ï¼Œå½¢æˆ<strong>1 + 1 &gt; 2</strong> çš„æ•ˆæœã€‚</p>
<h2 data-id="heading-6">ä»€ä¹ˆæ—¶å€™èƒ½ç”¨ä¸Šï¼Ÿ</h2>
<ul>
<li>â€¢ <strong>ä»£å·ï¼š</strong> Cinnamon Bunï¼ˆè‚‰æ¡‚å·ï¼‰</li>
<li>â€¢ <strong>Developer Previewï¼š</strong> é¢„è®¡ 2026 å¹´ Q1-Q2</li>
<li>â€¢ <strong>æ­£å¼å‘å¸ƒï¼š</strong> é¢„è®¡ 2026 å¹´ 6 æœˆ Google I/O å¤§ä¼šå</li>
<li>â€¢ <strong>é¦–æ‰¹æ”¯æŒï¼š</strong> Pixel 6 åŠä»¥ä¸Šæœºå‹</li>
</ul>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç›®å‰æ›å…‰çš„åŠŸèƒ½æ¥è‡ª Canary æµ‹è¯•ç‰ˆæœ¬çš„ä»£ç ï¼Œ<strong>ä»…ä»£è¡¨åŸå‹é˜¶æ®µ</strong>ï¼Œæœ€ç»ˆæ­£å¼ç‰ˆå¯èƒ½ä¼šæœ‰è°ƒæ•´ã€‚</p>
<h2 data-id="heading-7">å†™åœ¨æœ€å</h2>
<p>åº”ç”¨é”è¿™ä¸ªåŠŸèƒ½ï¼Œå›½äº§å‚å•†åšäº†å¾ˆå¤šå¹´ï¼Œåšå¾—å¾ˆå¥½ã€‚ä½†é—®é¢˜æ˜¯â€”â€”<strong>å®ƒä¸€ç›´æ˜¯ç¢ç‰‡åŒ–çš„</strong>ã€‚</p>
<p>å°ç±³æœ‰å°ç±³çš„æ–¹æ¡ˆï¼Œä¸‰æ˜Ÿæœ‰ä¸‰æ˜Ÿçš„æ–¹æ¡ˆï¼ŒOPPO æœ‰ OPPO çš„æ–¹æ¡ˆã€‚æ¯å®¶çš„å®ç°é€»è¾‘ä¸åŒï¼Œé€šçŸ¥å¤„ç†æ–¹å¼ä¸åŒã€‚</p>
<p>Android 17 æŠŠåº”ç”¨é”æ‹‰åˆ°ç³»ç»ŸåŸç”Ÿå±‚ï¼Œæœ€å¤§çš„æ„ä¹‰ä¸åœ¨äºã€ŒPixel ç”¨æˆ·ç»ˆäºèƒ½ç”¨äº†ã€ï¼Œè€Œåœ¨äºï¼š</p>
<p><strong>å®ƒä¸ºæ•´ä¸ª Android ç”Ÿæ€æä¾›äº†ä¸€ä¸ªç»Ÿä¸€çš„éšç§ä¿æŠ¤åŸºå‡†çº¿ã€‚</strong></p>
<p>åœ¨è¿™ä¸ªåŸºå‡†çº¿ä¹‹ä¸Šï¼Œå„å‚å•†å¯ä»¥ç»§ç»­å‘æŒ¥ï¼Œåšå‡ºæ›´ä¸°å¯Œçš„å®šåˆ¶åŒ–åŠŸèƒ½ã€‚ä½†è‡³å°‘ï¼Œæ¯ä¸€å° Android 17 è®¾å¤‡ï¼Œéƒ½æœ‰äº†ä¸€ä¸ªé è°±çš„åº•çº¿ä¿éšœã€‚</p>
<p>è¿™æ‰æ˜¯åŸç”Ÿçš„åŠ›é‡ã€‚</p>
<p><strong>ä½ è§‰å¾—åŸç”Ÿåº”ç”¨é”å¤Ÿç”¨äº†ï¼Œè¿˜æ˜¯æ›´å–œæ¬¢å°ç±³çš„æ·±åº¦å®šåˆ¶æ–¹æ¡ˆï¼Ÿè¯„è®ºåŒºè¯´è¯´ä½ çš„é€‰æ‹©ã€‚</strong></p>
<p>è§‰å¾—æœ‰ç”¨çš„è¯ï¼Œç‚¹ä¸ªã€Œåœ¨çœ‹ã€è½¬å‘ç»™ä½ èº«è¾¹çš„ Android ç”¨æˆ·å§~</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¼ä¸šçº§ Prompt å·¥ç¨‹å®æˆ˜æŒ‡å—ï¼ˆä¸Šï¼‰ï¼šåˆ«è®©æ¨¡ç³ŠæŒ‡ä»¤æµªè´¹ä½ çš„AIç®—åŠ›]]></title>    <link>https://juejin.cn/post/7604678037808316452</link>    <guid>https://juejin.cn/post/7604678037808316452</guid>    <pubDate>2026-02-10T00:59:21.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604678037808316452" data-draft-id="7604693038439055366" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¼ä¸šçº§ Prompt å·¥ç¨‹å®æˆ˜æŒ‡å—ï¼ˆä¸Šï¼‰ï¼šåˆ«è®©æ¨¡ç³ŠæŒ‡ä»¤æµªè´¹ä½ çš„AIç®—åŠ›"/> <meta itemprop="keywords" content="å‰ç«¯,Cursor,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-02-10T00:59:21.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¹˜é£gg"/> <meta itemprop="url" content="https://juejin.cn/user/4248168658899741"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¼ä¸šçº§ Prompt å·¥ç¨‹å®æˆ˜æŒ‡å—ï¼ˆä¸Šï¼‰ï¼šåˆ«è®©æ¨¡ç³ŠæŒ‡ä»¤æµªè´¹ä½ çš„AIç®—åŠ›
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4248168658899741/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¹˜é£gg
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-10T00:59:21.000Z" title="Tue Feb 10 2026 00:59:21 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¼ä¸šçº§ Prompt å·¥ç¨‹å®æˆ˜æŒ‡å—ï¼ˆä¸Šï¼‰ï¼šåˆ«è®©æ¨¡ç³ŠæŒ‡ä»¤æµªè´¹ä½ çš„AIç®—åŠ›</h2>
<h3 data-id="heading-1">ä¸€ã€å¼•è¨€ï¼š80% çš„äººéƒ½è¸©å‘ï¼æŠŠ Prompt å½“ â€œèŠå¤©â€</h3>
<p><strong>Promptï¼ˆæç¤ºè¯</strong>ï¼‰æŠ€æœ¯ä½œä¸ºè¿æ¥äººç±»éœ€æ±‚ä¸å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰èƒ½åŠ›çš„å…³é”®æ¡¥æ¢ï¼Œå·²ç»æ˜¯å®¶å¸¸ä¾¿é¥­äº†ã€‚ä½†åœ¨ä¸€çº¿å®è·µä¸­ï¼Œæˆ‘å‘ç° <strong>80%</strong> çš„ä½¿ç”¨è€…å’Œå¼€å‘è€…éƒ½é™·å…¥äº†ä¸€ä¸ªè¯¯åŒºï¼šæŠŠ Prompt ç®€å•ç­‰åŒäºæ—¥å¸¸èŠå¤©ï¼Œéšæ„åœ°è¾“å…¥æŒ‡ä»¤ï¼ŒæœŸå¾…æ¨¡å‹ç»™å‡ºå®Œç¾ç­”æ¡ˆã€‚ç»“æœå‘¢ï¼Ÿè¾“å‡ºè¦ä¹ˆè·‘é¢˜ä¸‡é‡Œï¼Œè¦ä¹ˆé€»è¾‘æ··ä¹±ï¼Œç”šè‡³å‡ºç°é‡å¤å†—ä½™çš„åºŸè¯ã€‚è¿™ä¸ä»…æµªè´¹äº†å¤§é‡çš„ç®—åŠ›èµ„æºï¼Œæ›´ä¸¥é‡åˆ¶çº¦äº† AI åº”ç”¨åœ¨å®é™…ä¸šåŠ¡ä¸­çš„è½åœ°æ•ˆæœã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/441e2139d29245128f3af75dc52831d6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LmY6aOOZ2c=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771289992&amp;x-signature=V48zXdyVxtGuU3BmKFGJKAK%2BPvE%3D" alt="" loading="lazy"/></p>
<p>ä¸¾ä¸ªç®€å•ä¾‹å­ï¼Œä¸€å®¶ç”µå•†ä¼ä¸šå¸Œæœ›åˆ©ç”¨ AI ç”Ÿæˆäº§å“æ¨å¹¿æ–‡æ¡ˆã€‚è¿è¥äººå‘˜ç›´æ¥åœ¨å¯¹è¯æ¡†è¾“å…¥ â€œ<strong>ç»™æˆ‘å†™ä¸ªæ‰‹æœºæ¨å¹¿æ–‡æ¡ˆ</strong>â€ï¼Œå¾—åˆ°çš„å´æ˜¯ä¸€ç¯‡æ¯«æ— é’ˆå¯¹æ€§ã€å¹³æ·¡æ— å¥‡çš„å†…å®¹ï¼Œå®Œå…¨æ— æ³•å¸å¼•ç›®æ ‡å®¢æˆ·ã€‚ä¸ºä»€ä¹ˆä¼šè¿™æ ·ï¼Ÿå› ä¸ºæ¨¡å‹æ²¡æœ‰å¾—åˆ°æ˜ç¡®çš„æŒ‡ä»¤ã€å¿…è¦çš„äº§å“ä¿¡æ¯ä»¥åŠç›®æ ‡å—ä¼—æè¿°ï¼Œåªèƒ½åœ¨å®½æ³›çš„è¯­è¨€ç©ºé—´é‡Œ â€œççŒœâ€ã€‚</p>
<p>æœ¬æ–‡å°†ç»“åˆæˆ‘çš„å®æˆ˜ç»éªŒï¼Œä»¥<strong>å·¥ç¨‹åŒ–</strong>çš„è§†è§’æ·±å…¥å‰–æ Prompt è®¾è®¡çš„<strong>åº•å±‚é€»è¾‘ã€æ ¸å¿ƒæŠ€å·§ä¸è½åœ°ç­–ç•¥</strong>ã€‚å¸Œæœ›å¸®åŠ©å¤§å®¶ä» â€œ<strong>å‡­æ„Ÿè§‰å†™æç¤ºè¯</strong>â€ çš„åˆçº§é˜¶æ®µï¼Œè¿ˆå‘ â€œ<strong>ç”¨å·¥ç¨‹æ€ç»´æ„å»ºé«˜æ•ˆ Prompt ä½“ç³»</strong>â€ çš„æ–°é˜¶æ®µï¼Œå……åˆ†é‡Šæ”¾å¤§è¯­è¨€æ¨¡å‹çš„æ½œåŠ›ã€‚</p>
<h3 data-id="heading-2">äºŒã€Prompt çš„åº•å±‚é€»è¾‘ï¼šAI çš„ â€œå²—ä½è¯´æ˜ä¹¦â€+â€œä»»åŠ¡æ¸…å•â€</h3>
<h4 data-id="heading-3">2.1 æ ¸å¿ƒå®šä¹‰ï¼šPrompt æ˜¯äººç±»ä¸å¤§æ¨¡å‹çš„ â€œäº¤äº’æ¥å£â€</h4>
<p>ä»æŠ€æœ¯æœ¬è´¨çœ‹ï¼ŒPrompt æ˜¯å¼•å¯¼å¤§è¯­è¨€æ¨¡å‹è¾“å‡ºç‰¹å®šç»“æœçš„ç»“æ„åŒ–æŒ‡ä»¤ï¼Œå…¶ä½œç”¨ç±»ä¼¼äºç»™ AI ä¸‹è¾¾ â€œ<strong>å²—ä½è¯´æ˜ä¹¦</strong>â€ï¼ˆç³»ç»Ÿ Promptï¼‰å’Œ â€œ<strong>å…·ä½“ä»»åŠ¡æ¸…å•</strong>â€ï¼ˆç”¨æˆ· Promptï¼‰ã€‚</p>
<p>å¤§æ¨¡å‹ä½œä¸º â€œæ¦‚ç‡æœºå™¨â€ï¼Œå…¶è¾“å‡ºè´¨é‡å®Œå…¨å–å†³äºè¾“å…¥æŒ‡ä»¤çš„æ¸…æ™°åº¦ä¸ç»“æ„åŒ–ç¨‹åº¦ï¼Œè¿™ä¹Ÿæ˜¯ Prompt å·¥ç¨‹çš„æ ¸å¿ƒä»·å€¼æ‰€åœ¨ã€‚å¦‚æœæŠŠå¤§è¯­è¨€æ¨¡å‹æ¯”ä½œä¸€ä¸ªèƒ½åŠ›è¶…å¼ºä½†æ²¡æœ‰è‡ªä¸»æ„è¯†çš„ â€œ<strong>è¶…çº§å‘˜å·¥</strong>â€ï¼Œé‚£ä¹ˆ Prompt å°±æ˜¯æˆ‘ä»¬å‘å®ƒä¼ è¾¾å·¥ä½œè¦æ±‚çš„å”¯ä¸€æ–¹å¼ã€‚</p>
<p>è¿™ä¸ª â€œ<strong>å‘˜å·¥</strong>â€ è™½ç„¶æ‹¥æœ‰æµ·é‡çš„<strong>çŸ¥è¯†å‚¨å¤‡å’Œå¼ºå¤§çš„è¯­è¨€</strong>å¤„ç†èƒ½åŠ›ï¼Œ<strong>ä½†å®ƒå¹¶ä¸çŸ¥é“æˆ‘ä»¬æƒ³è¦ä»€ä¹ˆ</strong>ï¼Œé™¤éæˆ‘ä»¬ç”¨æ¸…æ™°ã€å‡†ç¡®çš„æŒ‡ä»¤å‘Šè¯‰å®ƒã€‚</p>
<h4 data-id="heading-4">2.2 ä¸¤å¤§æ ¸å¿ƒç»„ä»¶ï¼šSystem Prompt ä¸ User Prompt</h4>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d1838b6b1595486baa616a4f9b26b7f7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LmY6aOOZ2c=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771289992&amp;x-signature=xGG9tBHvaQ893yeQYhYZTn4X9hM%3D" alt="" loading="lazy"/>
<strong>System Prompt</strong> è´Ÿè´£å®šä¹‰ AI çš„è§’è‰²ã€èƒ½åŠ›è¾¹ç•Œä¸è¾“å‡ºè§„åˆ™ï¼Œæ˜¯å…¨å±€çº¦æŸï¼Œä¼˜å…ˆçº§é«˜äºç”¨æˆ·è¾“å…¥ï¼›<strong>User Prompt</strong> åˆ™æ˜¯å…·ä½“ä»»åŠ¡éœ€æ±‚ï¼ŒåŒ…å«ä¸Šä¸‹æ–‡ã€ç›®æ ‡ä¸æ ¼å¼è¦æ±‚ã€‚äºŒè€…ç»“åˆæ„æˆå®Œæ•´çš„æŒ‡ä»¤é›†ã€‚ä»¥ç”µå•†å®¢æœåœºæ™¯ä¸ºä¾‹</p>
<ul>
<li>ç³»ç»Ÿ Promptï¼šä½ æ˜¯èµ„æ·±ç”µå•†å®¢æœï¼Œä»…å¤„ç†å”®åé—®é¢˜ï¼›</li>
<li>ç”¨æˆ· Promptï¼šæˆ‘çš„æ— çº¿è€³æœºå……ä¸è¿›ç”µï¼Œå¦‚ä½•æ¢è´§â€ï¼Œ</li>
</ul>
<p>è¿™ä¸¤ä¸ªéƒ¨åˆ†ç¼ºä¸€ä¸å¯ã€‚ç³»ç»Ÿ Prompt ä¸º AI è®¾å®šäº†èº«ä»½å’ŒèŒè´£èŒƒå›´ï¼Œç¡®ä¿å®ƒä¸ä¼šåç¦»å”®åå®¢æœçš„è§’è‰²å»å›ç­”å…¶ä»–æ— å…³é—®é¢˜ï¼›è€Œç”¨æˆ· Prompt åˆ™æ˜ç¡®äº†å…·ä½“çš„ä»»åŠ¡å†…å®¹ï¼Œè®© AI èƒ½å¤Ÿé’ˆå¯¹æ€§åœ°æä¾›è§£å†³æ–¹æ¡ˆã€‚</p>
<p>å¦‚æœåªæœ‰ç”¨æˆ· Promptï¼ŒAI å¯èƒ½ä¼šå› ä¸ºç¼ºä¹è§’è‰²å®šä½è€Œç»™å‡ºä¸ä¸“ä¸šæˆ–ä¸ç›¸å…³çš„å›ç­”ï¼›åä¹‹ï¼Œå¦‚æœåªæœ‰ç³»ç»Ÿ Promptï¼Œæ²¡æœ‰å…·ä½“çš„ç”¨æˆ·éœ€æ±‚ï¼ŒAI å°±ä¸çŸ¥é“è¯¥ä»ä½•ä¸‹æ‰‹ã€‚</p>
<h4 data-id="heading-5">2.3 Prompt å››å¤§æ ¸å¿ƒè¦ç´ ï¼šè§’è‰²ã€èƒŒæ™¯ä¿¡æ¯ã€ä»»åŠ¡ã€çº¦æŸ</h4>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ae4b7925e20e4230bdef9a846b60437e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LmY6aOOZ2c=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771289992&amp;x-signature=EdV6eHAK1louoxPaCY0zT8zgxwE%3D" alt="" loading="lazy"/></p>
<p>Prompt å·¥ç¨‹çš„æ ¸å¿ƒï¼Œæœ¬è´¨æ˜¯æŠŠæ¨¡ç³Šéœ€æ±‚è½¬åŒ–ä¸ºæ¨¡å‹å¯ç²¾å‡†è§£è¯»çš„â€œç»“æ„åŒ–æŒ‡ä»¤â€ï¼Œè€Œè§’è‰²ã€èƒŒæ™¯ä¿¡æ¯ã€ä»»åŠ¡ã€çº¦æŸè¿™å››å¤§è¦ç´ ï¼Œå°±æ˜¯æ„æˆæŒ‡ä»¤çš„â€œå››å¤§åŸºçŸ³â€â€”â€”ç¼ºå°‘ä»»ä½•ä¸€ä¸ªï¼Œéƒ½å¯èƒ½å¯¼è‡´æŒ‡ä»¤æ¨¡ç³Šã€è¾“å‡ºå¤±æ§ã€‚è¿™å››å¤§è¦ç´ å¹¶éå­¤ç«‹å­˜åœ¨ï¼Œè€Œæ˜¯ç›¸äº’æ”¯æ’‘ï¼Œå…±åŒå®šä¹‰äº†â€œ<strong>AI è¯¥å¦‚ä½•åšã€åšä»€ä¹ˆã€ä¾æ®ä»€ä¹ˆåšã€ä¸èƒ½åšä»€ä¹ˆ</strong>â€ï¼Œæ˜¯ä»â€œ<strong>å‡­æ„Ÿè§‰å†™æç¤º</strong>â€åˆ°â€œ<strong>å·¥ç¨‹åŒ–è®¾è®¡</strong>â€çš„å…³é”®è½¬å˜ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/08bf55be62af4ecbac5cfb8b884ed2aa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LmY6aOOZ2c=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771289992&amp;x-signature=x8s9oo2zq5qKvRftL1VuCrht8cE%3D" alt="" loading="lazy"/></p>
<h5 data-id="heading-6">2.3.1 æ ¸å¿ƒä¸€ï¼šè§’è‰²â€”â€”ç»™ AI å®šâ€œèº«ä»½â€</h5>
<p>è§’è‰²æ˜¯ Prompt çš„â€œçµé­‚â€ï¼Œæ ¸å¿ƒä½œç”¨æ˜¯æ˜ç¡® AI çš„èº«ä»½ã€ä¸“ä¸šåº¦å’Œè¯­æ°”é£æ ¼ï¼Œç›¸å½“äºç»™â€œè¶…çº§å‘˜å·¥â€å®šå²—ä½ï¼Œè®©å®ƒçŸ¥é“è‡ªå·±è¯¥ä»¥ä½•ç§è§†è§’å›åº”éœ€æ±‚ã€‚å¾ˆå¤šå¼€å‘è€…å¿½ç•¥è§’è‰²è®¾å®šï¼Œå¯¼è‡´ AI è¾“å‡ºâ€œä¸æ¥åœ°æ°”â€â€œä¸ä¸“ä¸šâ€ï¼Œæœ¬è´¨å°±æ˜¯è§’è‰²æ¨¡ç³Šã€‚</p>
<p><strong>å®æˆ˜æ¡ˆä¾‹</strong>ï¼šåŒæ ·æ˜¯â€œè§£è¯»äº§å“æ•…éšœâ€ï¼Œä¸åŒè§’è‰²çš„è¾“å‡ºå¤©å·®åœ°åˆ«ã€‚è‹¥ä¸è®¾å®šè§’è‰²ï¼ŒPrompt ä¸ºâ€œè§£è¯»è€³æœºå……ä¸è¿›ç”µçš„åŸå› â€ï¼ŒAI å¯èƒ½è¾“å‡ºæ™¦æ¶©çš„æŠ€æœ¯æœ¯è¯­ï¼›è‹¥è®¾å®šè§’è‰²ä¸ºâ€œèµ„æ·±ç”µå•†å”®åå·¥ç¨‹å¸ˆï¼Œé¢å‘æ™®é€šæ¶ˆè´¹è€…ï¼Œç”¨é€šä¿—è¯­è¨€è§£è¯»ï¼Œé¿å…ä¸“ä¸šæœ¯è¯­â€ï¼ŒAI ä¼šè¾“å‡ºâ€œå¤§æ¦‚ç‡æ˜¯å……ç”µçº¿æ¥è§¦ä¸è‰¯æˆ–å……ç”µå£æœ‰ç°å°˜ï¼Œä½ å…ˆæ¢ä¸€æ ¹å……ç”µçº¿è¯•è¯•ï¼Œå†ç”¨æ£‰ç­¾æ¸…ç†ä¸‹å……ç”µå£â€ï¼Œæ›´è´´åˆä¸šåŠ¡éœ€æ±‚ã€‚</p>
<p><strong>å¸¸è§è¯¯åŒº</strong>ï¼šè§’è‰²è®¾å®šè¿‡äºå®½æ³›ï¼ˆå¦‚â€œä¸“ä¸šäººå£«â€ï¼‰ï¼Œæœªæ˜ç¡®å…·ä½“é¢†åŸŸå’Œæ²Ÿé€šå¯¹è±¡ï¼Œå¯¼è‡´ AI è¾“å‡ºåç¦»é¢„æœŸã€‚</p>
<h5 data-id="heading-7">2.3.2 æ ¸å¿ƒäºŒï¼šèƒŒæ™¯ä¿¡æ¯â€”â€”ç»™ AI è¡¥â€œä¸Šä¸‹æ–‡â€</h5>
<p><strong>èƒŒæ™¯ä¿¡æ¯</strong>æ˜¯ AI å†³ç­–çš„â€œä¾æ®â€ï¼Œæ ¸å¿ƒæ˜¯æä¾›ä»»åŠ¡ç›¸å…³çš„ä¸Šä¸‹æ–‡ã€å‰ææ¡ä»¶å’Œå…³é”®ä¿¡æ¯ã€‚è®©å®ƒçŸ¥é“â€œä¸ºä»€ä¹ˆåšâ€â€œåŸºäºä»€ä¹ˆåšâ€ã€‚ç¼ºå°‘èƒŒæ™¯ä¿¡æ¯ï¼ŒAI åªèƒ½ä¾èµ–é¢„è®­ç»ƒçŸ¥è¯†çŒœæµ‹ï¼Œæ˜“å‡ºç°â€œå¹»è§‰â€æˆ–åç¦»ä¸šåŠ¡åœºæ™¯ã€‚</p>
<p><strong>å®æˆ˜æ¡ˆä¾‹</strong>ï¼šç»“åˆå‰æ–‡å·¥å•åˆ†ç±»åœºæ™¯ï¼Œè‹¥ Prompt ä»…è®¾å®šè§’è‰²å’Œä»»åŠ¡ï¼ˆâ€œç”µå•†å”®åå·¥å•åˆ†ç±»ä¸“å®¶ï¼Œåˆ†ç±»å·¥å•â€ï¼‰ï¼Œæœªæä¾›èƒŒæ™¯ä¿¡æ¯ï¼ŒAI å¯èƒ½æ— æ³•åŒºåˆ†â€œç‰©æµå»¶è¿Ÿâ€å’Œâ€œäº§å“æ•…éšœâ€çš„è¾¹ç•Œï¼›è‹¥è¡¥å……èƒŒæ™¯ä¿¡æ¯â€œæœ¬ç”µå•†å¹³å°ä¸»è¥3Cäº§å“ï¼Œç‰©æµåˆä½œå¿«é€’å…¬å¸ä¸ºä¸­é€šã€åœ†é€šï¼Œå”®åå·¥å•ä¸»è¦æ¶‰åŠç‰©æµé…é€ã€äº§å“è´¨é‡ã€é€€æ¢è´§ä¸‰ç±»åœºæ™¯â€ï¼ŒAI åˆ†ç±»å‡†ç¡®ç‡ä¼šå¤§å¹…æå‡ï¼Œé¿å…å°†â€œä¸­é€šå¿«é€’å»¶è¿Ÿâ€è¯¯åˆ¤ä¸ºâ€œäº§å“æ•…éšœâ€ã€‚</p>
<p><strong>å…³é”®åŸåˆ™</strong>ï¼šèƒŒæ™¯ä¿¡æ¯æ— éœ€å†—ä½™ï¼Œåªéœ€æç‚¼â€œä¸ä»»åŠ¡ç›´æ¥ç›¸å…³â€çš„æ ¸å¿ƒä¿¡æ¯ï¼Œä¼˜å…ˆè¡¥å……â€œä¸šåŠ¡åœºæ™¯ã€è¡Œä¸šè§„åˆ™ã€å‰ææ¡ä»¶â€ï¼Œé¿å…æ— å…³ä¿¡æ¯å ç”¨ tokenã€‚</p>
<h5 data-id="heading-8">2.3.3 æ ¸å¿ƒä¸‰ï¼šä»»åŠ¡â€”â€”ç»™ AI ä¸‹â€œæŒ‡ä»¤â€</h5>
<p><strong>ä»»åŠ¡</strong>æ˜¯ Prompt çš„â€œæ ¸å¿ƒç›®æ ‡â€ï¼Œæ ¸å¿ƒæ˜¯æ˜ç¡® AI è¦å®Œæˆçš„å…·ä½“å·¥ä½œï¼Œå¿…é¡»æ¸…æ™°ã€å…·ä½“ã€ä¸èƒ½æ¨¡ç³Šã€‚è¿™æ˜¯å››å¤§è¦ç´ ä¸­æœ€åŸºç¡€ã€ä¹Ÿæœ€å®¹æ˜“è¸©å‘çš„éƒ¨åˆ†ï¼Œå‰æ–‡æåˆ°çš„â€œéšä¾¿å‘æŒ¥â€è¯¯åŒºï¼Œæœ¬è´¨å°±æ˜¯ä»»åŠ¡è®¾å®šæ¨¡ç³Šã€‚</p>
<p><strong>å®æˆ˜å¯¹æ¯”</strong>ï¼šæ¨¡ç³Šä»»åŠ¡ Prompt ä¸ºâ€œä¼˜åŒ–äº§å“æè¿°â€ï¼ŒAI è¾“å‡ºå¤§æ¦‚ç‡æ‚ä¹±æ— ç« ï¼›ç²¾å‡†ä»»åŠ¡ Prompt ä¸ºâ€œä¼˜åŒ–3Cäº§å“ï¼ˆæ— çº¿è€³æœºï¼‰çš„äº§å“æè¿°ï¼Œçªå‡ºâ€˜ç»­èˆª20å°æ—¶â€™â€˜é™å™ªæ·±åº¦40dBâ€™ä¸¤å¤§æ ¸å¿ƒå–ç‚¹ï¼Œé¢å‘å¹´è½»æ¶ˆè´¹è€…ï¼Œè¯­è¨€ç®€æ´æœ‰æ„ŸæŸ“åŠ›ï¼Œæ§åˆ¶åœ¨150å­—å†…â€ï¼ŒAI è¾“å‡ºä¼šæ›´å…·é’ˆå¯¹æ€§ã€‚</p>
<p><strong>æ ¸å¿ƒæŠ€å·§</strong>ï¼šä»»åŠ¡è®¾å®šéœ€éµå¾ªâ€œå¯é‡åŒ–ã€å¯è½åœ°â€ï¼Œé¿å…ä½¿ç”¨â€œæ›´å¥½ã€æ›´ä¸“ä¸šã€æ›´ç”ŸåŠ¨â€ç­‰æ¨¡ç³Šè¡¨è¿°ï¼Œæ˜ç¡®â€œåšä»€ä¹ˆã€åšåˆ°ä»€ä¹ˆç¨‹åº¦ã€è¾“å‡ºä»€ä¹ˆå½¢å¼â€ã€‚</p>
<h5 data-id="heading-9">2.3.4 æ ¸å¿ƒå››ï¼šçº¦æŸâ€”â€”ç»™ AI åˆ’â€œè¾¹ç•Œâ€</h5>
<p><strong>çº¦æŸçš„æ ¸å¿ƒ</strong>æ˜¯æ˜ç¡® AI çš„è¾“å‡ºè¾¹ç•Œã€ç¦æ­¢è¡Œä¸ºå’Œæ ¼å¼è¦æ±‚ï¼Œè®©å®ƒçŸ¥é“â€œä¸èƒ½åšä»€ä¹ˆâ€ã€‚ç¼ºå°‘çº¦æŸï¼Œå³ä½¿è§’è‰²ã€èƒŒæ™¯ã€ä»»åŠ¡æ˜ç¡®ï¼ŒAI ä¹Ÿå¯èƒ½è¾“å‡ºå†—ä½™ã€åç¦»æ ¼å¼æˆ–ä¸ç¬¦åˆä¸šåŠ¡è§„åˆ™çš„å†…å®¹ã€‚</p>
<p><strong>å®æˆ˜æ¡ˆä¾‹</strong>ï¼šä»ä»¥å·¥å•åˆ†ç±»åœºæ™¯ä¸ºä¾‹ï¼Œè‹¥ä»…è®¾å®šä»»åŠ¡â€œç”Ÿæˆå·¥å•æ‘˜è¦â€ï¼ŒæœªåŠ çº¦æŸï¼ŒAI å¯èƒ½ç”Ÿæˆ100å­—ä»¥ä¸Šçš„å†—ä½™å†…å®¹ï¼Œä¸ä¾¿äºå®¢æœå¿«é€ŸæŸ¥çœ‹ï¼›è‹¥è¡¥å……çº¦æŸâ€œæ‘˜è¦æ§åˆ¶åœ¨50å­—å†…ï¼Œä»…åŒ…å«ç”¨æˆ·æ ¸å¿ƒè¯‰æ±‚ã€æ¶‰åŠäº§å“å’Œå…³é”®æ—¶é—´ï¼Œç¦æ­¢å†—ä½™è¡¨è¿°ï¼Œä¸æ·»åŠ è§£å†³æ–¹æ¡ˆâ€ï¼ŒAI è¾“å‡ºä¼šä¸¥æ ¼ç¬¦åˆä¸šåŠ¡éœ€æ±‚ï¼Œå¦‚â€œç”¨æˆ·æ˜¨æ—¥æ”¶åˆ°è¡£æœï¼Œå°ºç ä¸ç¬¦ï¼Œå’¨è¯¢æ¢è´§å¯„å›æµç¨‹â€ã€‚</p>
<p><strong>å¸¸è§çº¦æŸç±»å‹</strong>ï¼šæ ¼å¼çº¦æŸï¼ˆå¦‚â€œè¾“å‡ºä¸ºJSONæ ¼å¼â€â€œåˆ†ç‚¹ç½—åˆ—â€ï¼‰ã€å†…å®¹çº¦æŸï¼ˆå¦‚â€œç¦æ­¢ä½¿ç”¨ä¸“ä¸šæœ¯è¯­â€â€œä¸æ·»åŠ æ— å…³å»ºè®®â€ï¼‰ã€ç¯‡å¹…çº¦æŸï¼ˆå¦‚â€œæ§åˆ¶åœ¨200å­—å†…â€ï¼‰ã€è¾¹ç•Œçº¦æŸï¼ˆå¦‚â€œä»…å¤„ç†å”®åé—®é¢˜ï¼Œä¸å›ç­”å”®å‰å’¨è¯¢â€ï¼‰ã€‚</p>
<p>å››å¤§è¦ç´ æ€»ç»“ï¼š<strong>å·¥ä½œè§’è‰²ã€å·¥ä½œèƒŒæ™¯èµ„æ–™ã€å·¥ä½œä»»åŠ¡ç›®æ ‡ã€å·¥ä½œè§„çŸ©</strong>ï¼Œå››å¤§è¦ç´ ååŒä½œç”¨ï¼Œæ‰èƒ½æ„æˆä¸€ä»½é«˜è´¨é‡çš„ Promptã€‚</p>
<h3 data-id="heading-10">ä¸‰ã€é¿å‘æŒ‡å—ï¼šå››å¤§å…¸å‹ Prompt è¯¯åŒºåŠä¼˜åŒ–æ–¹æ¡ˆ</h3>
<h4 data-id="heading-11">3.1 è¯¯åŒºä¸€ï¼šâ€œéšä¾¿å‘æŒ¥â€</h4>
<p><strong>é”™è¯¯ç¤ºä¾‹</strong>ï¼šâ€œå†™ç‚¹æ¨èæ–‡æ¡ˆâ€ã€‚è¿™ç§è¿‡äºå®½æ³›çš„æŒ‡ä»¤ï¼Œå°±åƒè®©ä¸€ä¸ªå¨å¸ˆ â€œåšç‚¹å¥½åƒçš„â€ï¼Œå´ä¸å‘Šè¯‰ä»–èœç³»ã€é£Ÿæå’Œç”¨é¤äººæ•°ï¼Œç»“æœå¿…ç„¶æ˜¯è¾“å‡ºå¤±æ§ã€‚ç”±äºç¼ºå°‘è§’è‰²ã€åœºæ™¯ã€å—ä¼—ç­‰å…³é”®çº¦æŸï¼ŒAI æ— æ³•å‡†ç¡®æŠŠæ¡éœ€æ±‚ï¼Œè¾“å‡ºçš„æ–‡æ¡ˆå¯èƒ½é£æ ¼æ··æ‚ã€ä¸»é¢˜æ¨¡ç³Šï¼Œæ— æ³•æ»¡è¶³ä»»ä½•å®é™…ä¸šåŠ¡éœ€æ±‚ã€‚</p>
<p><strong>ä¼˜åŒ–æ–¹æ¡ˆ</strong>ï¼šæ˜ç¡® â€œè§’è‰² + åœºæ™¯ + ç›®æ ‡ + æ ¼å¼â€ã€‚ä»¥æ¨èæ–‡æ¡ˆä¸ºä¾‹ï¼Œä¼˜åŒ–åçš„ Prompt å¯ä»¥æ˜¯ â€œ<strong>ä½ æ˜¯å°çº¢ä¹¦æ–‡æ¡ˆç­–åˆ’ï¼Œä¸ºæ³¨é‡å¥åº·çš„éƒ½å¸‚ç™½é¢†å†™ 100 å­—å†…æ— ç³–è‹æ‰“é¥®æ–™æ¨èæ–‡æ¡ˆï¼Œé£æ ¼æ´»æ³¼æœ‰ç”Ÿæ´»æ„Ÿ</strong>â€ã€‚è¿™æ ·è¯¦ç»†çš„æŒ‡ä»¤ï¼Œä»æ ¹æºä¸Šé¿å…äº† AI çš„ â€œè‡ªç”±å‘æŒ¥â€ï¼Œè®©å®ƒèƒ½å¤Ÿèšç„¦äºç›®æ ‡å—ä¼—å’Œå…·ä½“éœ€æ±‚ï¼Œç”Ÿæˆç¬¦åˆé¢„æœŸçš„å†…å®¹ã€‚é€šè¿‡æ¸…æ™°çš„è§’è‰²è®¾å®šï¼ˆå°çº¢ä¹¦æ–‡æ¡ˆç­–åˆ’ï¼‰ã€åœºæ™¯æè¿°ï¼ˆé¢å‘æ³¨é‡å¥åº·çš„éƒ½å¸‚ç™½é¢†ï¼‰ã€ç›®æ ‡ç•Œå®šï¼ˆæ¨èæ— ç³–è‹æ‰“é¥®æ–™ï¼‰å’Œæ ¼å¼è¦æ±‚ï¼ˆ100 å­—å†…ã€æ´»æ³¼æœ‰ç”Ÿæ´»æ„Ÿï¼‰ï¼ŒAI èƒ½å¤Ÿæ›´å¥½åœ°ç†è§£ä»»åŠ¡ï¼Œè¾“å‡ºæ›´æœ‰é’ˆå¯¹æ€§å’Œå¸å¼•åŠ›çš„æ–‡æ¡ˆã€‚</p>
<h4 data-id="heading-12">3.2 è¯¯åŒºäºŒï¼šå¤šç›®æ ‡å¹¶è¡Œ</h4>
<p><strong>é”™è¯¯ç¤ºä¾‹</strong>ï¼šâ€œå†™ä¼šè®®çºªè¦ + è¡ŒåŠ¨æ¸…å• + é‚®ä»¶æ¨¡æ¿â€ã€‚åœ¨è¿™ä¸ªæŒ‡ä»¤ä¸­ï¼Œå•ä¸€ Prompt åŒ…å«äº†ä¸‰ä¸ªç‹¬ç«‹ä¸”å¤æ‚çš„ä»»åŠ¡ï¼Œè¿™å¯¹äºæ¨¡å‹æ¥è¯´å°±åƒåŒæ—¶æ¥åˆ°ä¸‰ä¸ªä¸åŒå®¢æˆ·çš„è®¢å•ï¼Œå´æ²¡æœ‰æ˜ç¡®çš„ä¼˜å…ˆçº§å’Œå¤„ç†æµç¨‹ï¼Œå¾ˆå®¹æ˜“å¯¼è‡´è¾“å‡ºç»“æ„æ··ä¹±ã€é¡¾æ­¤å¤±å½¼ã€‚æ¨¡å‹å¯èƒ½ä¼šåœ¨ä¸åŒä»»åŠ¡ä¹‹é—´æ¥å›åˆ‡æ¢ï¼Œæ— æ³•æ·±å…¥å¤„ç†æ¯ä¸ªä»»åŠ¡ï¼Œæœ€ç»ˆç”Ÿæˆçš„ä¼šè®®çºªè¦ç¼ºä¹é‡ç‚¹ã€è¡ŒåŠ¨æ¸…å•é€»è¾‘ä¸æ¸…æ™°ã€é‚®ä»¶æ¨¡æ¿æ ¼å¼é”™è¯¯ã€‚</p>
<p><strong>ä¼˜åŒ–æ–¹æ¡ˆ</strong>ï¼šæ‹†åˆ†ä»»åŠ¡æˆ–ç»“æ„åŒ–æŒ‡ä»¤ã€‚ä¸€ç§æ–¹æ³•æ˜¯<strong>å°†ä»»åŠ¡åˆ†æ­¥éª¤è¿›è¡Œï¼Œå…ˆè®©æ¨¡å‹ç”Ÿæˆä¼šè®®çºªè¦ï¼Œå†åŸºäºçºªè¦ç”Ÿæˆè¡ŒåŠ¨æ¸…å•ï¼Œæœ€åæ ¹æ®å‰ä¸¤è€…ç”Ÿæˆé‚®ä»¶æ¨¡</strong>æ¿ï¼›å¦ä¸€ç§æ–¹æ³•æ˜¯åœ¨ Prompt ä¸­æ˜ç¡®è¦æ±‚ â€œåˆ†åˆ«è¾“å‡º 3 éƒ¨åˆ†å†…å®¹ï¼š<strong>1. ä¼šè®®çºªè¦ï¼›2. è¡ŒåŠ¨æ¸…å•ï¼›3. å…¨å‘˜é€šçŸ¥é‚®ä»¶æ¨¡æ¿</strong>â€ï¼Œå¹¶å¯¹æ¯éƒ¨åˆ†çš„å†…å®¹å’Œæ ¼å¼è¿›è¡Œè¯¦ç»†è¯´æ˜ã€‚è¿™æ ·å¯ä»¥é™ä½æ¨¡å‹çš„å¤„ç†å¤æ‚åº¦ï¼Œä½¿å…¶èƒ½å¤Ÿä¸“æ³¨äºæ¯ä¸ªä»»åŠ¡ï¼Œæé«˜è¾“å‡ºçš„è´¨é‡å’Œå‡†ç¡®æ€§ã€‚é€šè¿‡ç»“æ„åŒ–çš„æŒ‡ä»¤ï¼Œæ¨¡å‹èƒ½å¤Ÿæ›´å¥½åœ°ç»„ç»‡æ€è·¯ï¼ŒæŒ‰ç…§è¦æ±‚ä¾æ¬¡å®Œæˆå„ä¸ªä»»åŠ¡ï¼Œç”Ÿæˆé€»è¾‘è¿è´¯ã€ç»“æ„æ¸…æ™°çš„ç»“æœã€‚</p>
<h4 data-id="heading-13">3.3 è¯¯åŒºä¸‰ï¼šâ€œä¸“ä¸šä¸€ç‚¹â€</h4>
<p>â€œæ›´æœ‰æ„Ÿè§‰â€â€œæ›´ä¸“ä¸šâ€â€œæ›´ç”ŸåŠ¨â€ ç­‰æ¨¡ç³Šè¡¨è¿°æ˜¯ AI çš„ â€œæ­»æ•Œâ€ã€‚å› ä¸ºè¿™äº›è¡¨è¿°ç¼ºä¹é‡åŒ–æ ‡å‡†ï¼Œæ¨¡å‹æ— æ³•åˆ¤æ–­éœ€æ±‚è¾¹ç•Œã€‚ä¾‹å¦‚ï¼Œå½“æˆ‘ä»¬è¦æ±‚ â€œæŠŠç®€ä»‹å†™å¾—æ›´ä¸“ä¸šâ€ æ—¶ï¼Œä¸åŒçš„äººå¯¹ â€œä¸“ä¸šâ€ çš„ç†è§£å¯èƒ½åƒå·®ä¸‡åˆ«ï¼Œæ¨¡å‹ä¹Ÿåªèƒ½åœ¨æ¨¡ç³Šçš„æ¦‚å¿µä¸­æŒ£æ‰ï¼Œæ— æ³•ç¡®å®šå…·ä½“çš„ä¿®æ”¹æ–¹å‘å’Œç¨‹åº¦ã€‚è¿™ç§æ¨¡ç³ŠæŒ‡ä»¤ä¼šå¯¼è‡´æ¨¡å‹è¾“å‡ºçš„ç»“æœè¦ä¹ˆè¿‡äºå¹³æ·¡ï¼Œæ²¡æœ‰è¾¾åˆ°é¢„æœŸçš„ä¸“ä¸šåº¦ï¼›è¦ä¹ˆè¿‡äºå¤¸å¼ ï¼Œåç¦»äº†å®é™…éœ€æ±‚ã€‚</p>
<p><strong>ä¼˜åŒ–æ–¹æ¡ˆ</strong>ï¼šå…·è±¡åŒ–è¦æ±‚ã€‚å°† â€œæŠŠç®€ä»‹å†™å¾—æ›´ä¸“ä¸šâ€ æ”¹ä¸º â€œ<strong>å°†å…¬å¸ç®€ä»‹é‡å†™ä¸ºä¼ä¸šå®˜ç½‘ç‰ˆæœ¬ï¼Œè¯­è¨€çªå‡ºæƒå¨æ€§ä¸è¡Œä¸šå±æ€§ï¼Œé¢å‘åˆ¶é€ ä¸šå®¢æˆ·</strong>â€ï¼Œè¿™æ ·çš„æŒ‡ä»¤æ˜ç¡®äº†å…·ä½“çš„åº”ç”¨åœºæ™¯ï¼ˆä¼ä¸šå®˜ç½‘ ï¼‰ã€è¯­è¨€é£æ ¼ï¼ˆçªå‡ºæƒå¨æ€§ä¸è¡Œä¸šå±æ€§ï¼‰å’Œç›®æ ‡å—ä¼—ï¼ˆåˆ¶é€ ä¸šå®¢æˆ·ï¼‰ï¼Œè®©æ¨¡å‹èƒ½å¤Ÿæœ‰é’ˆå¯¹æ€§åœ°è¿›è¡Œåˆ›ä½œã€‚é€šè¿‡å…·è±¡åŒ–çš„æè¿°ï¼Œæ¨¡å‹èƒ½å¤Ÿæ›´å¥½åœ°ç†è§£ç”¨æˆ·å¯¹ â€œä¸“ä¸šâ€ çš„æœŸæœ›ï¼Œä»è¯­è¨€è¡¨è¾¾ã€å†…å®¹ç»„ç»‡ç­‰æ–¹é¢è¿›è¡Œä¼˜åŒ–ï¼Œç”Ÿæˆæ›´ç¬¦åˆä¸“ä¸šè¦æ±‚çš„å…¬å¸ç®€ä»‹ã€‚</p>
<h4 data-id="heading-14">3.4 è¯¯åŒºå››ï¼šæŒ‡ä»£ä¸æ˜</h4>
<p><strong>é”™è¯¯ç¤ºä¾‹</strong>ï¼šâ€œæŠŠå®ƒä¼˜åŒ–ä¸€ä¸‹â€ã€‚è¿™ä¸ªæŒ‡ä»¤ä¸­çš„ â€œå®ƒâ€ æŒ‡ä»£ä¸æ˜ï¼Œæ¨¡å‹æ— æ³•ç¡®å®šä¼˜åŒ–çš„å¯¹è±¡æ˜¯ä¸€æ®µæ–‡å­—ã€ä¸€ä¸ªè®¾è®¡è¿˜æ˜¯å…¶ä»–å†…å®¹ã€‚åŒæ—¶ï¼Œç”±äºç¼ºä¹ä¸Šä¸‹æ–‡ï¼Œæ¨¡å‹ä¹Ÿä¸çŸ¥é“ä¼˜åŒ–çš„æ–¹å‘å’Œé‡ç‚¹ï¼Œæ˜¯è¦æ”¹è¿›è¯­æ³•é”™è¯¯ã€æå‡é€»è¾‘æ¸…æ™°åº¦è¿˜æ˜¯å¢å¼ºå†…å®¹çš„å¸å¼•åŠ›ï¼Ÿè¿™ç§æŒ‡ä»£ä¸æ˜å’Œä¸Šä¸‹æ–‡ç¼ºå¤±çš„æŒ‡ä»¤ï¼Œä¼šè®©æ¨¡å‹é™·å…¥å›°æƒ‘ï¼Œæ— æ³•å‡†ç¡®ç†è§£ç”¨æˆ·çš„æ„å›¾ï¼Œä»è€Œç”Ÿæˆé”™è¯¯æˆ–ä¸ç›¸å…³çš„ç»“æœã€‚</p>
<p><strong>ä¼˜åŒ–æ–¹æ¡ˆ</strong>ï¼šè¡¥å……å®Œæ•´ä¿¡æ¯ã€‚å¦‚æœæ˜¯è¦ä¼˜åŒ–èŠ‚èƒ½å†°ç®±çš„äº§å“æè¿°ï¼Œå¯ä»¥è¿™æ ·è¡¨è¿°ï¼šâ€œä¼˜<strong>åŒ–ä»¥ä¸‹èŠ‚èƒ½å†°ç®±äº§å“æè¿°ï¼Œçªå‡ºå…¶ 24 å°æ—¶è€—ç”µ 0.5 åº¦çš„ç¯ä¿ä¼˜åŠ¿ï¼Œé€‚ç”¨äºç¯ä¿ç±»å…¬ä¼—å·ï¼Œè¯­æ°”äº²åˆ‡çœŸå®â€ã€‚è¿™æ ·çš„æŒ‡ä»¤æ˜ç¡®äº†ä¼˜åŒ–å¯¹è±¡ï¼ˆèŠ‚èƒ½å†°ç®±äº§å“æè¿°ï¼‰ã€ä¼˜åŒ–é‡ç‚¹ï¼ˆçªå‡º 24 å°æ—¶è€—ç”µ 0.5 åº¦çš„ç¯ä¿ä¼˜åŠ¿ï¼‰ã€åº”ç”¨åœºæ™¯ï¼ˆç¯ä¿ï¼‰å’Œè¯­è¨€é£æ ¼ï¼ˆè¯­æ°”äº²åˆ‡çœŸå®ï¼‰</strong>ï¼Œæ¶ˆé™¤äº†æŒ‡ä»¤ä¸­çš„æ­§ä¹‰ï¼Œè®©æ¨¡å‹èƒ½å¤Ÿæ ¹æ®å…·ä½“è¦æ±‚è¿›è¡Œæœ‰é’ˆå¯¹æ€§çš„ä¼˜åŒ–ã€‚é€šè¿‡è¡¥å……å®Œæ•´çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œæ¨¡å‹èƒ½å¤Ÿæ›´å¥½åœ°ç†è§£ç”¨æˆ·çš„éœ€æ±‚ï¼Œä»å¤šä¸ªç»´åº¦å¯¹äº§å“æè¿°è¿›è¡Œä¼˜åŒ–ï¼Œæé«˜å…¶åœ¨ç‰¹å®šåœºæ™¯ä¸‹çš„å¸å¼•åŠ›å’Œæœ‰æ•ˆæ€§ã€‚</p>
<hr/>
<h3 data-id="heading-15">ä¸‹ç¯‡é¢„å‘Š</h3>
<p>æŒæ¡äº† Prompt çš„åº•å±‚é€»è¾‘ä¸é¿å‘æŠ€å·§ï¼Œå¦‚ä½•åœ¨å®é™…ä¸šåŠ¡ä¸­è½åœ°ï¼Ÿä¸‹ç¯‡å°†å¸¦æ¥å®Œæ•´å®æˆ˜æ¡ˆä¾‹ï¼ˆ<strong>ç”µå•†å·¥å•è‡ªåŠ¨åˆ†ç±»ä¸æ‘˜è¦ç”Ÿæˆ</strong>ï¼‰ã€<strong>ä¸‰å¤§ Prompt æŠ€æœ¯è·¯å¾„å¯¹æ¯”</strong>ã€<strong>å·¥ç¨‹åŒ–è½åœ°ç­–ç•¥</strong>ï¼Œä»¥åŠ<strong>ç›®å‰è¶‹åŠ¿å±•æœ›</strong>ï¼</p>
<p>æ¬¢è¿å¤§å®¶ç‚¹èµå…³æ³¨ï¼Œä¸‹æœŸæ›´ç²¾å½©ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç§’æ€ç³»ç»Ÿå¦‚ä½•é¿å…è´¦æˆ·ä½™é¢æ‰£å‡çš„ç«æ€æ¡ä»¶ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7604672395627118619</link>    <guid>https://juejin.cn/post/7604672395627118619</guid>    <pubDate>2026-02-10T01:00:41.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604672395627118619" data-draft-id="7604672395626545179" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç§’æ€ç³»ç»Ÿå¦‚ä½•é¿å…è´¦æˆ·ä½™é¢æ‰£å‡çš„ç«æ€æ¡ä»¶ï¼Ÿ"/> <meta itemprop="keywords" content="åç«¯,Java,Redis"/> <meta itemprop="datePublished" content="2026-02-10T01:00:41.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é›¨ä¸­é£˜è¡çš„è®°å¿†"/> <meta itemprop="url" content="https://juejin.cn/user/694547077666606"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç§’æ€ç³»ç»Ÿå¦‚ä½•é¿å…è´¦æˆ·ä½™é¢æ‰£å‡çš„ç«æ€æ¡ä»¶ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/694547077666606/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é›¨ä¸­é£˜è¡çš„è®°å¿†
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-10T01:00:41.000Z" title="Tue Feb 10 2026 01:00:41 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ç§’æ€ç³»ç»Ÿå¦‚ä½•é¿å…è´¦æˆ·ä½™é¢æ‰£å‡çš„ç«æ€æ¡ä»¶ï¼Ÿ</h2>
<blockquote>
<p>ä»ç†è®ºåˆ°å®è·µï¼Œæ·±å…¥è§£æå¹¶å‘æ§åˆ¶æœºåˆ¶åœ¨ç§’æ€åœºæ™¯ä¸­çš„åº”ç”¨</p>
</blockquote>
<h3 data-id="heading-1">ä¸€ã€ä»€ä¹ˆæ˜¯ç«æ€æ¡ä»¶ï¼Ÿ</h3>
<h4 data-id="heading-2">1.1 å®šä¹‰ä¸åœºæ™¯</h4>
<p>åœ¨å¹¶å‘ç¼–ç¨‹ä¸­ï¼Œå½“å¤šä¸ªçº¿ç¨‹æˆ–è¿›ç¨‹åŒæ—¶è®¿é—®å’Œä¿®æ”¹å…±äº«èµ„æºæ—¶ï¼Œæœ€ç»ˆçš„æ‰§è¡Œç»“æœä¾èµ–äºæ‰§è¡Œé¡ºåºçš„ç°è±¡ç§°ä¸º<strong>ç«æ€æ¡ä»¶ï¼ˆRace Conditionï¼‰</strong>ã€‚</p>
<h4 data-id="heading-3">1.2 ä¸€ä¸ªçœŸå®çš„ä¾‹å­</h4>
<p>æƒ³è±¡è¿™æ ·çš„åœºæ™¯ï¼šç”¨æˆ·è´¦æˆ·ä½™é¢100å…ƒï¼Œä¸¤ä¸ªçº¿ç¨‹åŒæ—¶æ‰£å‡50å…ƒã€‚</p>
<p><strong>æœŸæœ›ç»“æœ</strong>ï¼š100 - 50 - 50 = 0å…ƒ</p>
<p><strong>å®é™…ç»“æœ</strong>ï¼šè´¦æˆ·ä½™é¢è¿˜å‰©50å…ƒï¼Œä¸¢å¤±äº†50å…ƒçš„æ›´æ–°ï¼</p>
<h4 data-id="heading-4">1.3 é—®é¢˜åˆ†æ</h4>
<p><strong>åŸå› </strong>ï¼š</p>
<ol>
<li>çº¿ç¨‹Aè¯»å–ä½™é¢ï¼š100å…ƒ</li>
<li>çº¿ç¨‹Bè¯»å–ä½™é¢ï¼š100å…ƒï¼ˆæ­¤æ—¶çº¿ç¨‹Aè¿˜æœªæäº¤ï¼‰</li>
<li>çº¿ç¨‹Aè®¡ç®—å¹¶æ›´æ–°ï¼š100 - 50 = 50å…ƒ</li>
<li>çº¿ç¨‹Bè®¡ç®—å¹¶æ›´æ–°ï¼š100 - 50 = 50å…ƒ</li>
<li>çº¿ç¨‹Bçš„æ›´æ–°è¦†ç›–äº†çº¿ç¨‹Açš„æ›´æ–°</li>
</ol>
<p>è¿™å°±æ˜¯å…¸å‹çš„**ä¸¢å¤±æ›´æ–°ï¼ˆLost Updateï¼‰**é—®é¢˜ã€‚</p>
<h4 data-id="heading-5">1.4 ç«æ€æ¡ä»¶æµç¨‹å›¾</h4>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3b2448a1d96c4eaf838ad799e1c266ea~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771290044&amp;x-signature=VW7mVSLhCeRyyaqxUFJZpwQGvD4%3D" alt="" loading="lazy"/></p>
<hr/>
<h3 data-id="heading-6">äºŒã€è§£å†³æ–¹æ¡ˆä¸€ï¼šæ‚²è§‚é”</h3>
<h4 data-id="heading-7">2.1 ä»€ä¹ˆæ˜¯æ‚²è§‚é”ï¼Ÿ</h4>
<p>æ‚²è§‚é”å‡è®¾ä¼šå‘ç”Ÿå¹¶å‘å†²çªï¼Œå› æ­¤åœ¨è®¿é—®æ•°æ®å‰å…ˆè·å–é”ã€‚</p>
<p><strong>æ ¸å¿ƒæ€æƒ³</strong>ï¼šå…ˆè·å–é”ï¼Œå†æ“ä½œæ•°æ®</p>
<h4 data-id="heading-8">2.2 æ•°æ®åº“å®ç°æ–¹å¼</h4>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- æŸ¥è¯¢æ—¶åŠ æ’ä»–é”</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> account <span class="hljs-keyword">WHERE</span> user_id <span class="hljs-operator">=</span> <span class="hljs-number">1</span> <span class="hljs-keyword">FOR</span> <span class="hljs-keyword">UPDATE</span>;

<span class="hljs-comment">-- æ›´æ–°ä½™é¢</span>
<span class="hljs-keyword">UPDATE</span> account <span class="hljs-keyword">SET</span> balance <span class="hljs-operator">=</span> balance <span class="hljs-operator">-</span> <span class="hljs-number">50</span> <span class="hljs-keyword">WHERE</span> user_id <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;

<span class="hljs-comment">-- æäº¤äº‹åŠ¡é‡Šæ”¾é”</span>
<span class="hljs-keyword">COMMIT</span>;
</code></pre>
<h4 data-id="heading-9">2.3 Javaä»£ç å®ç°</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Transactional(rollbackFor = Exception.class)</span>
<span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">deductBalancePessimistic</span><span class="hljs-params">(Long userId, Long amount)</span> {
    <span class="hljs-comment">// 1. æŸ¥è¯¢å¹¶åŠ é”</span>
    <span class="hljs-type">Account</span> <span class="hljs-variable">account</span> <span class="hljs-operator">=</span> accountMapper.selectById(userId);

    <span class="hljs-comment">// 2. æ£€æŸ¥ä½™é¢</span>
    <span class="hljs-keyword">if</span> (account.getBalance().compareTo(amount) &lt; <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }

    <span class="hljs-comment">// 3. æ‰£å‡ä½™é¢</span>
    account.setBalance(account.getBalance().subtract(amount));
    <span class="hljs-keyword">return</span> accountMapper.updateById(account) &gt; <span class="hljs-number">0</span>;
}
</code></pre>
<h4 data-id="heading-10">2.4 æ‚²è§‚é”çš„ä¼˜ç¼ºç‚¹</h4>
<p><strong>ä¼˜ç‚¹</strong>ï¼š</p>
<ul>
<li>å®ç°ç®€å•ï¼Œé€»è¾‘ç›´è§‚</li>
<li>å¼ºä¸€è‡´æ€§ä¿è¯</li>
<li>é€‚åˆé«˜å†²çªåœºæ™¯</li>
</ul>
<p><strong>ç¼ºç‚¹</strong>ï¼š</p>
<ul>
<li>å¹¶å‘æ€§èƒ½ä½ï¼Œçº¿ç¨‹é˜»å¡ç­‰å¾…</li>
<li>æ•°æ®åº“å‹åŠ›å¤§</li>
<li>å¯èƒ½å‘ç”Ÿæ­»é”</li>
</ul>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼š</p>
<ul>
<li>å¹¶å‘é‡ä¸é«˜çš„åœºæ™¯</li>
<li>å¼ºä¸€è‡´æ€§è¦æ±‚çš„åœºæ™¯</li>
<li>å†²çªç‡é«˜çš„å†™æ“ä½œ</li>
</ul>
<h4 data-id="heading-11">2.5 ç”Ÿäº§ç¯å¢ƒæœ€ä½³å®è·µ</h4>
<p><strong>ç¼©å°é”ç²’åº¦</strong>ï¼šåªé”å®šå¿…è¦çš„æ•°æ®ï¼Œé¿å…é”å®šæ•´ä¸ªç”¨æˆ·å¯¹è±¡</p>
<p><strong>æ§åˆ¶äº‹åŠ¡æ—¶é—´</strong>ï¼šäº‹åŠ¡å†…åªåšæ•°æ®åº“æ“ä½œï¼Œè¿œç¨‹è°ƒç”¨æ”¾åˆ°äº‹åŠ¡å¤–</p>
<p><strong>æ‰¹é‡æ“ä½œ</strong>ï¼šåˆå¹¶å¤šä¸ªå•æ¬¡æ›´æ–°ä¸ºæ‰¹é‡æ›´æ–°ï¼Œå‡å°‘é”ç«äº‰</p>
<hr/>
<h3 data-id="heading-12">ä¸‰ã€è§£å†³æ–¹æ¡ˆäºŒï¼šä¹è§‚é”</h3>
<h4 data-id="heading-13">3.1 ä»€ä¹ˆæ˜¯ä¹è§‚é”ï¼Ÿ</h4>
<p>ä¹è§‚é”å‡è®¾ä¸ä¼šå‘ç”Ÿå¹¶å‘å†²çªï¼Œåªåœ¨æäº¤æ—¶æ£€æŸ¥ã€‚</p>
<p><strong>æ ¸å¿ƒæ€æƒ³</strong>ï¼šå‡è®¾æ— å†²çªï¼Œæäº¤æ—¶æ£€æŸ¥ç‰ˆæœ¬å·</p>
<h4 data-id="heading-14">3.2 ç‰ˆæœ¬å·æœºåˆ¶å®ç°</h4>
<p><strong>æ•°æ®åº“è¡¨è®¾è®¡</strong>ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> account (
    id <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">PRIMARY</span> KEY,
    user_id <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
    balance <span class="hljs-type">DECIMAL</span>(<span class="hljs-number">20</span>,<span class="hljs-number">2</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
    version <span class="hljs-type">INT</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span>,  <span class="hljs-comment">-- ä¹è§‚é”ç‰ˆæœ¬å·</span>
    update_time DATETIME <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">UPDATE</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span>
);
</code></pre>
<p><strong>SQLæ›´æ–°è¯­å¥</strong>ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- CASæ›´æ–°</span>
<span class="hljs-keyword">UPDATE</span> account
<span class="hljs-keyword">SET</span> balance <span class="hljs-operator">=</span> balance <span class="hljs-operator">-</span> <span class="hljs-number">50</span>, version <span class="hljs-operator">=</span> version <span class="hljs-operator">+</span> <span class="hljs-number">1</span>
<span class="hljs-keyword">WHERE</span> user_id <span class="hljs-operator">=</span> <span class="hljs-number">1</span> <span class="hljs-keyword">AND</span> version <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
</code></pre>
<h4 data-id="heading-15">3.3 Javaä»£ç å®ç°ï¼ˆå¸¦é‡è¯•ï¼‰</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">deductBalanceOptimistic</span><span class="hljs-params">(Long userId, Long amount)</span> {
    <span class="hljs-type">int</span> <span class="hljs-variable">maxRetries</span> <span class="hljs-operator">=</span> <span class="hljs-number">5</span>;
    <span class="hljs-type">int</span> <span class="hljs-variable">retryCount</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;

    <span class="hljs-keyword">while</span> (retryCount &lt; maxRetries) {
        <span class="hljs-comment">// 1. æŸ¥è¯¢è´¦æˆ·ï¼ˆè·å–å½“å‰ç‰ˆæœ¬å·ï¼‰</span>
        <span class="hljs-type">Account</span> <span class="hljs-variable">account</span> <span class="hljs-operator">=</span> accountMapper.selectById(userId);

        <span class="hljs-keyword">if</span> (account.getBalance().compareTo(amount) &lt; <span class="hljs-number">0</span>) {
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }

        <span class="hljs-comment">// 2. CASæ›´æ–°ï¼ˆæ¯”è¾ƒå¹¶äº¤æ¢ï¼‰</span>
        <span class="hljs-type">Account</span> <span class="hljs-variable">updateAccount</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Account</span>();
        updateAccount.setId(account.getId());
        updateAccount.setBalance(account.getBalance().subtract(amount));
        updateAccount.setVersion(account.getVersion());

        <span class="hljs-type">int</span> <span class="hljs-variable">rows</span> <span class="hljs-operator">=</span> accountMapper.updateById(updateAccount);

        <span class="hljs-keyword">if</span> (rows &gt; <span class="hljs-number">0</span>) {
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>; <span class="hljs-comment">// æ›´æ–°æˆåŠŸ</span>
        }

        <span class="hljs-comment">// 3. æ›´æ–°å¤±è´¥ï¼Œç‰ˆæœ¬å·å·²å˜åŒ–ï¼Œé‡è¯•</span>
        retryCount++;
        Thread.sleep(Math.min(<span class="hljs-number">100L</span> * (<span class="hljs-number">1L</span> &lt;&lt; retryCount), <span class="hljs-number">1000L</span>));
    }

    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
}
</code></pre>
<h4 data-id="heading-16">3.4 ä¹è§‚é”çš„ä¼˜ç¼ºç‚¹</h4>
<p><strong>ä¼˜ç‚¹</strong>ï¼š</p>
<ul>
<li>å¹¶å‘æ€§èƒ½é«˜ï¼Œæ— é”æ“ä½œ</li>
<li>ä¸ä¼šå‘ç”Ÿæ­»é”</li>
<li>æ•°æ®åº“å‹åŠ›å°</li>
</ul>
<p><strong>ç¼ºç‚¹</strong>ï¼š</p>
<ul>
<li>é«˜å†²çªä¸‹é¢‘ç¹é‡è¯•ï¼Œæ€§èƒ½ä¸‹é™</li>
<li>å¯èƒ½ABAé—®é¢˜ï¼ˆå¯åŠ ç‰ˆæœ¬å·è§£å†³ï¼‰</li>
<li>éœ€è¦å¤„ç†é‡è¯•é€»è¾‘</li>
</ul>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼š</p>
<ul>
<li>å¹¶å‘é‡é«˜çš„åœºæ™¯</li>
<li>å†²çªç‡ä½çš„åœºæ™¯</li>
<li>è¯»å¤šå†™å°‘çš„åœºæ™¯</li>
</ul>
<h4 data-id="heading-17">3.5 ç”Ÿäº§ç¯å¢ƒæœ€ä½³å®è·µ</h4>
<p><strong>åŠ¨æ€é‡è¯•æ¬¡æ•°</strong>ï¼šæ ¹æ®å†å²å†²çªç‡åŠ¨æ€è°ƒæ•´é‡è¯•æ¬¡æ•°ï¼ˆ3-10æ¬¡ï¼‰</p>
<p><strong>å¿«é€Ÿå¤±è´¥ç­–ç•¥</strong>ï¼šç¬¬ä¸€æ¬¡å†²çªåç«‹å³è¿”å›é”™è¯¯ï¼Œè®©è°ƒç”¨æ–¹å†³å®šæ˜¯å¦é‡è¯•</p>
<p><strong>æŒ‡æ•°é€€é¿</strong>ï¼šé‡è¯•ç­‰å¾…æ—¶é—´æŒ‰æŒ‡æ•°å¢é•¿ï¼ˆ100ms â†’ 200ms â†’ 400ms...ï¼‰</p>
<hr/>
<h3 data-id="heading-18">å››ã€è§£å†³æ–¹æ¡ˆä¸‰ï¼šRedisåˆ†å¸ƒå¼é”</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b7b7264ed4d94780ac78c2dad041ea08~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771290044&amp;x-signature=HmRZO0JY%2FfUBmy2cMXtkMBr79Eg%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-19">4.1 ä¸ºä»€ä¹ˆéœ€è¦åˆ†å¸ƒå¼é”ï¼Ÿ</h4>
<p>åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼ŒJVMé”åªèƒ½é”ä½å½“å‰JVMå®ä¾‹ï¼Œæ— æ³•è·¨æœåŠ¡èŠ‚ç‚¹ã€‚</p>
<h4 data-id="heading-20">4.2 Redis SETå‘½ä»¤å®ç°</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åŠ é”å‘½ä»¤</span>
SET lock_key unique_value NX PX 30000

<span class="hljs-comment"># å‚æ•°è¯´æ˜ï¼š</span>
<span class="hljs-comment"># NX: ä¸å­˜åœ¨æ‰è®¾ç½®</span>
<span class="hljs-comment"># PX: è¿‡æœŸæ—¶é—´ï¼ˆæ¯«ç§’ï¼‰</span>
<span class="hljs-comment"># unique_value: å”¯ä¸€æ ‡è¯†ï¼Œé˜²æ­¢è¯¯åˆ </span>
</code></pre>
<h4 data-id="heading-21">4.3 è§£é”Luaè„šæœ¬ï¼ˆä¿è¯åŸå­æ€§ï¼‰</h4>
<pre><code class="hljs language-lua" lang="lua"><span class="hljs-keyword">if</span> redis.call(<span class="hljs-string">"get"</span>, KEYS[<span class="hljs-number">1</span>]) == ARGV[<span class="hljs-number">1</span>] <span class="hljs-keyword">then</span>
    <span class="hljs-keyword">return</span> redis.call(<span class="hljs-string">"del"</span>, KEYS[<span class="hljs-number">1</span>])
<span class="hljs-keyword">else</span>
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>
<span class="hljs-keyword">end</span>
</code></pre>
<h4 data-id="heading-22">4.4 Javaä»£ç å®ç°ï¼ˆRedissonï¼‰</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Autowired</span>
<span class="hljs-keyword">private</span> RedissonClient redissonClient;

<span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">deductBalanceWithDistributedLock</span><span class="hljs-params">(Long userId, Long amount)</span> {
    <span class="hljs-type">String</span> <span class="hljs-variable">lockKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">"account:lock:"</span> + userId;
    <span class="hljs-type">RLock</span> <span class="hljs-variable">lock</span> <span class="hljs-operator">=</span> redissonClient.getLock(lockKey);

    <span class="hljs-type">boolean</span> <span class="hljs-variable">acquired</span> <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">try</span> {
        <span class="hljs-comment">// å°è¯•è·å–é”</span>
        acquired = lock.tryLock(<span class="hljs-number">10</span>, <span class="hljs-number">30</span>, TimeUnit.SECONDS);

        <span class="hljs-keyword">if</span> (!acquired) {
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }

        <span class="hljs-comment">// æ‰§è¡Œä¸šåŠ¡é€»è¾‘</span>
        <span class="hljs-type">Account</span> <span class="hljs-variable">account</span> <span class="hljs-operator">=</span> accountMapper.selectById(userId);
        <span class="hljs-keyword">if</span> (account.getBalance().compareTo(amount) &lt; <span class="hljs-number">0</span>) {
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }

        account.setBalance(account.getBalance().subtract(amount));
        <span class="hljs-keyword">return</span> accountMapper.updateById(account) &gt; <span class="hljs-number">0</span>;

    } <span class="hljs-keyword">finally</span> {
        <span class="hljs-keyword">if</span> (acquired &amp;&amp; lock.isHeldByCurrentThread()) {
            lock.unlock();
        }
    }
}
</code></pre>
<h4 data-id="heading-23">4.5 Redisåˆ†å¸ƒå¼é”çš„å…³é”®ç‚¹</h4>
<ol>
<li><strong>NXå‚æ•°</strong>ï¼šåªæœ‰keyä¸å­˜åœ¨æ—¶æ‰è®¾ç½®ï¼Œé˜²æ­¢è¦†ç›–</li>
<li><strong>PXå‚æ•°</strong>ï¼šè®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œé˜²æ­¢æ­»é”</li>
<li><strong>unique_value</strong>ï¼šå”¯ä¸€æ ‡è¯†ï¼Œé˜²æ­¢è¯¯åˆ å…¶ä»–çº¿ç¨‹çš„é”</li>
<li><strong>Luaè„šæœ¬</strong>ï¼šä¿è¯è§£é”æ“ä½œçš„åŸå­æ€§</li>
<li><strong>çœ‹é—¨ç‹—</strong>ï¼šRedissonè‡ªåŠ¨ç»­æœŸï¼Œé˜²æ­¢ä¸šåŠ¡æœªæ‰§è¡Œå®Œé”è¿‡æœŸ</li>
<li><strong>RedLock</strong>ï¼šå¤šèŠ‚ç‚¹éƒ¨ç½²ï¼Œæé«˜å¯ç”¨æ€§</li>
</ol>
<h4 data-id="heading-24">4.6 ç”Ÿäº§ç¯å¢ƒæœ€ä½³å®è·µ</h4>
<p><strong>è¶…æ—¶æ—¶é—´è®¾ç½®</strong>ï¼šæ ¹æ®ä¸šåŠ¡ç±»å‹è®¾ç½®åˆç†çš„è¶…æ—¶æ—¶é—´ï¼ˆé€šå¸¸ä¸ºå†å²å¹³å‡æ‰§è¡Œæ—¶é—´çš„3-5å€ï¼‰</p>
<p><strong>å¯é‡å…¥æ€§</strong>ï¼šåŒä¸€çº¿ç¨‹å¯å¤šæ¬¡è·å–åŒä¸€æŠŠé”ï¼Œé¿å…æ­»é”</p>
<p><strong>ç›‘æ§å‘Šè­¦</strong>ï¼šç›‘æ§é”æŒæœ‰æ—¶é—´ã€ç­‰å¾…æ—¶é—´ï¼Œè®¾ç½®å‘Šè­¦é˜ˆå€¼</p>
<hr/>
<h3 data-id="heading-25">äº”ã€ä¸‰ç§é”çš„è¯¦ç»†å¯¹æ¯”</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3423497cec804a72989043b70008d028~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771290044&amp;x-signature=CI89AwGCCvvfAEOWOEE4lKOmra8%3D" alt="" loading="lazy"/></p>

































































<table><thead><tr><th>å¯¹æ¯”ç»´åº¦</th><th>æ‚²è§‚é”</th><th>ä¹è§‚é”</th><th>åˆ†å¸ƒå¼é”</th></tr></thead><tbody><tr><td>ä½å¹¶å‘åœºæ™¯</td><td>æ€§èƒ½æ¥è¿‘</td><td>æ€§èƒ½æ¥è¿‘</td><td>æ€§èƒ½æ¥è¿‘</td></tr><tr><td>é«˜å¹¶å‘åœºæ™¯</td><td>é”ç«äº‰ä¸¥é‡</td><td>æ€§èƒ½æ›´ä¼˜</td><td>æ€§èƒ½è¾ƒå¥½</td></tr><tr><td>å†²çªç‡é«˜</td><td>é€‚åˆ</td><td>é¢‘ç¹é‡è¯•</td><td>é€‚åˆ</td></tr><tr><td>å†²çªç‡ä½</td><td>æµªè´¹é”èµ„æº</td><td>æœ€ä½³é€‰æ‹©</td><td>æ€§èƒ½å¥½</td></tr><tr><td>CPUæ¶ˆè€—</td><td>ä½</td><td>é«˜(CASè‡ªæ—‹)</td><td>ä¸­</td></tr><tr><td>å®ç°å¤æ‚åº¦</td><td>ç®€å•</td><td>ä¸­ç­‰</td><td>ä¸­ç­‰</td></tr><tr><td>åˆ†å¸ƒå¼æ”¯æŒ</td><td>ä¸æ”¯æŒ</td><td>éœ€é¢å¤–å¤„ç†</td><td>åŸç”Ÿæ”¯æŒ</td></tr><tr><td>æ­»é”é£é™©</td><td>æœ‰</td><td>æ— </td><td>æ— ï¼ˆå¸¦è¿‡æœŸæ—¶é—´ï¼‰</td></tr><tr><td>ä¸€è‡´æ€§ä¿è¯</td><td>å¼º</td><td>æœ€ç»ˆä¸€è‡´</td><td>å¼º</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-26">å…­ã€ç§’æ€ç³»ç»Ÿæ¶æ„è®¾è®¡</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e7796fc36dc14e4c9c4ac612b2e9da11~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771290044&amp;x-signature=P2nj8WPLsyUwBNSLlUEnVi0YHJM%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-27">6.1 æ ¸å¿ƒè®¾è®¡æ€è·¯</h4>
<ol>
<li><strong>Redisé¢„æ‰£åº“å­˜</strong>ï¼šä½¿ç”¨DECRåŸå­æ“ä½œï¼Œå†…å­˜çº§åˆ«å“åº”é€Ÿåº¦</li>
<li><strong>MQå¼‚æ­¥å¤„ç†</strong>ï¼šå‰Šå³°å¡«è°·ï¼Œè®¢å•åˆ›å»ºå¼‚æ­¥åŒ–</li>
<li><strong>ä¹è§‚é”æ‰£å‡</strong>ï¼šç‰ˆæœ¬å·CASæœºåˆ¶ï¼Œä¿è¯æ•°æ®ä¸€è‡´æ€§</li>
<li><strong>åˆ†åº“åˆ†è¡¨</strong>ï¼šæŒ‰user_idåˆ†ç‰‡ï¼Œæ°´å¹³æ‰©å±•</li>
<li><strong>è¯»å†™åˆ†ç¦»</strong>ï¼š1ä¸»2ä»ï¼ŒæŸ¥è¯¢å‹åŠ›åˆ†æ•£</li>
<li><strong>é™æµé™çº§</strong>ï¼šSentinelä¿æŠ¤ç³»ç»Ÿç¨³å®šæ€§</li>
</ol>
<h4 data-id="heading-28">6.2 ç§’æ€æ ¸å¿ƒæµç¨‹</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> SeckillResult <span class="hljs-title function_">doSeckill</span><span class="hljs-params">(Long userId, Long activityId, Integer quantity)</span> {
    <span class="hljs-comment">// 1. æ£€æŸ¥æ´»åŠ¨çŠ¶æ€</span>
    <span class="hljs-type">SeckillActivity</span> <span class="hljs-variable">activity</span> <span class="hljs-operator">=</span> getActivityFromCache(activityId);

    <span class="hljs-comment">// 2. æ£€æŸ¥ç”¨æˆ·é™è´­</span>
    <span class="hljs-type">String</span> <span class="hljs-variable">limitKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">"seckill:limit:"</span> + activityId + <span class="hljs-string">":"</span> + userId;
    <span class="hljs-type">Integer</span> <span class="hljs-variable">userBought</span> <span class="hljs-operator">=</span> (Integer) redisTemplate.opsForValue().get(limitKey);
    <span class="hljs-keyword">if</span> (userBought != <span class="hljs-literal">null</span> &amp;&amp; userBought + quantity &gt; activity.getLimitPerUser()) {
        <span class="hljs-keyword">return</span> SeckillResult.fail(<span class="hljs-string">"è¶…è¿‡é™è´­æ•°é‡"</span>);
    }

    <span class="hljs-comment">// 3. Redisé¢„æ‰£åº“å­˜ï¼ˆåŸå­é€’å‡ï¼‰</span>
    <span class="hljs-type">String</span> <span class="hljs-variable">stockKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">"seckill:stock:"</span> + activityId;
    <span class="hljs-type">Long</span> <span class="hljs-variable">remainingStock</span> <span class="hljs-operator">=</span> redisTemplate.opsForValue().decrement(stockKey, quantity);

    <span class="hljs-keyword">if</span> (remainingStock == <span class="hljs-literal">null</span> || remainingStock &lt; <span class="hljs-number">0</span>) {
        <span class="hljs-comment">// åº“å­˜ä¸è¶³ï¼Œå›æ»š</span>
        redisTemplate.opsForValue().increment(stockKey, quantity);
        <span class="hljs-keyword">return</span> SeckillResult.fail(<span class="hljs-string">"åº“å­˜ä¸è¶³"</span>);
    }

    <span class="hljs-comment">// 4. è®°å½•ç”¨æˆ·è´­ä¹°æ•°é‡</span>
    redisTemplate.opsForValue().set(limitKey, userBought + quantity, <span class="hljs-number">1</span>, TimeUnit.HOURS);

    <span class="hljs-comment">// 5. å‘é€MQæ¶ˆæ¯ï¼ˆå¼‚æ­¥åˆ›å»ºè®¢å•ï¼‰</span>
    sendOrderMessage(userId, activity, quantity);

    <span class="hljs-comment">// 6. è¿”å›ç§’æ€ç»“æœ</span>
    <span class="hljs-keyword">return</span> SeckillResult.success(<span class="hljs-string">"ç§’æ€æˆåŠŸï¼Œè¯·ç­‰å¾…æ”¯ä»˜"</span>);
}
</code></pre>
<h4 data-id="heading-29">6.3 ç§’æ€æµç¨‹æ—¶åºå›¾</h4>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/41908935e4fb4362bc59b2fca3ef72ec~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771290044&amp;x-signature=S%2FmcWjHjG3LDFWfbf%2Fjqq6Jc1m0%3D" alt="" loading="lazy"/></p>
<hr/>
<h3 data-id="heading-30">ä¸ƒã€é«˜æ€§èƒ½æ¶æ„è®¾è®¡</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/660673ca31ae432aae8bf4fa5c3b6651~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771290044&amp;x-signature=kfFfPeU92dc9hFsTwwq4KYG2KMc%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-31">7.1 å¤šçº§ç¼“å­˜æ¶æ„</h4>
<ul>
<li><strong>L1æœ¬åœ°ç¼“å­˜</strong>ï¼šCaffeineç¼“å­˜ï¼Œ1ç§’è¿‡æœŸï¼Œå‡å°‘Redisè®¿é—®</li>
<li><strong>L2åˆ†å¸ƒå¼ç¼“å­˜</strong>ï¼šRedisç¼“å­˜ï¼Œ5åˆ†é’Ÿè¿‡æœŸï¼Œå…±äº«æ•°æ®</li>
<li><strong>L3æ•°æ®åº“</strong>ï¼šMySQLæŒä¹…åŒ–å­˜å‚¨</li>
</ul>
<h4 data-id="heading-32">7.2 åº“å­˜åˆ†æ¡¶ç­–ç•¥</h4>
<p>å°†æ€»åº“å­˜åˆ†åˆ°å¤šä¸ªRedisæ¡¶ä¸­ï¼Œç§’æ€æ—¶éšæœºé€‰æ‹©æ¡¶æ‰£å‡ï¼Œé™ä½ç«äº‰çƒ­åº¦ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// åº“å­˜é¢„çƒ­ï¼šåˆ†10ä¸ªæ¡¶</span>
<span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {
    <span class="hljs-type">String</span> <span class="hljs-variable">bucketKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">"seckill:stock:"</span> + activityId + <span class="hljs-string">":bucket:"</span> + i;
    redisTemplate.opsForValue().set(bucketKey, totalStock / <span class="hljs-number">10</span>);
}

<span class="hljs-comment">// ç§’æ€æ‰£å‡ï¼šéšæœºé€‰æ‹©æ¡¶</span>
<span class="hljs-type">int</span> <span class="hljs-variable">bucketIndex</span> <span class="hljs-operator">=</span> ThreadLocalRandom.current().nextInt(<span class="hljs-number">10</span>);
<span class="hljs-type">String</span> <span class="hljs-variable">bucketKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">"seckill:stock:"</span> + activityId + <span class="hljs-string">":bucket:"</span> + bucketIndex;
redisTemplate.opsForValue().decrement(bucketKey, quantity);
</code></pre>
<h4 data-id="heading-33">7.3 é™æµä¿æŠ¤</h4>
<ul>
<li><strong>QPSé™æµ</strong>ï¼šGuava RateLimiteré™åˆ¶æ€»è¯·æ±‚é‡</li>
<li><strong>ç”¨æˆ·çº§é™æµ</strong>ï¼šRedis + Luaå®ç°ç”¨æˆ·ç»´åº¦çš„é™æµ</li>
<li><strong>åº“å­˜é¢„çƒ­</strong>ï¼šæå‰å°†åº“å­˜åŠ è½½åˆ°Redis</li>
</ul>
<hr/>
<h3 data-id="heading-34">å…«ã€æœ€ä½³å®è·µ</h3>
<h4 data-id="heading-35">8.1 é«˜å¯ç”¨é…ç½®</h4>
<p><strong>æ•°æ®åº“è¿æ¥æ± é…ç½®</strong>ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">spring:</span>
  <span class="hljs-attr">datasource:</span>
    <span class="hljs-attr">druid:</span>
      <span class="hljs-attr">initial-size:</span> <span class="hljs-number">10</span>
      <span class="hljs-attr">min-idle:</span> <span class="hljs-number">10</span>
      <span class="hljs-attr">max-active:</span> <span class="hljs-number">100</span>
      <span class="hljs-attr">max-wait:</span> <span class="hljs-number">5000</span>
      <span class="hljs-attr">test-while-idle:</span> <span class="hljs-literal">true</span>
      <span class="hljs-attr">time-between-eviction-runs-millis:</span> <span class="hljs-number">60000</span>
</code></pre>
<p><strong>Redisè¿æ¥æ± é…ç½®</strong>ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">spring:</span>
  <span class="hljs-attr">redis:</span>
    <span class="hljs-attr">lettuce:</span>
      <span class="hljs-attr">pool:</span>
        <span class="hljs-attr">max-active:</span> <span class="hljs-number">50</span>
        <span class="hljs-attr">max-idle:</span> <span class="hljs-number">20</span>
        <span class="hljs-attr">min-idle:</span> <span class="hljs-number">5</span>
        <span class="hljs-attr">max-wait:</span> <span class="hljs-string">3000ms</span>
</code></pre>
<h4 data-id="heading-36">8.2 ç›‘æ§å‘Šè­¦</h4>
<p><strong>å…³é”®æŒ‡æ ‡</strong>ï¼š</p>
<ul>
<li>ç§’æ€æˆåŠŸç‡</li>
<li>åº“å­˜æ‰£å‡P99è€—æ—¶</li>
<li>Redisè¿æ¥æ± ä½¿ç”¨ç‡</li>
<li>æ•°æ®åº“è¿æ¥æ± ä½¿ç”¨ç‡</li>
<li>MQæ¶ˆæ¯å †ç§¯é‡</li>
</ul>
<p><strong>å‘Šè­¦è§„åˆ™</strong>ï¼š</p>
<ul>
<li>ç§’æ€æˆåŠŸç‡ &lt; 95%</li>
<li>åº“å­˜æ‰£å‡P99 &gt; 100ms</li>
<li>Redisè¿æ¥æ± ä½¿ç”¨ç‡ &gt; 90%</li>
</ul>
<h4 data-id="heading-37">8.3 ç†”æ–­é™çº§</h4>
<p>ä½¿ç”¨Resilience4jå®ç°ç†”æ–­é™çº§ï¼š</p>
<ul>
<li><strong>å¤±è´¥ç‡é˜ˆå€¼</strong>ï¼š50%</li>
<li><strong>æ…¢è°ƒç”¨é˜ˆå€¼</strong>ï¼š3ç§’</li>
<li><strong>åŠå¼€çŠ¶æ€å…è®¸è°ƒç”¨æ•°</strong>ï¼š5æ¬¡</li>
<li><strong>é™çº§ç­–ç•¥</strong>ï¼šä¿å­˜åˆ°å¾…å¤„ç†é˜Ÿåˆ—ï¼Œå¼‚æ­¥å¤„ç†</li>
</ul>
<h5 data-id="heading-38">8.3.1 ç†”æ–­å™¨å·¥ä½œåŸç†</h5>
<p>ç†”æ–­å™¨æ¨¡å¼ï¼ˆCircuit Breaker Patternï¼‰æ˜¯ä¸€ç§ä¿æŠ¤æœºåˆ¶ï¼Œç”¨äºé˜²æ­¢ç³»ç»Ÿåœ¨æŸä¸ªæœåŠ¡å‡ºç°æ•…éšœæ—¶æŒç»­è°ƒç”¨å¯¼è‡´é›ªå´©æ•ˆåº”ã€‚</p>
<p><strong>ä¸‰ç§çŠ¶æ€</strong>ï¼š</p>
<ol>
<li>
<p><strong>å…³é—­çŠ¶æ€ï¼ˆCLOSEDï¼‰</strong>ï¼šæ­£å¸¸æƒ…å†µä¸‹ï¼Œç†”æ–­å™¨å…³é—­ï¼Œè¯·æ±‚æ­£å¸¸é€šè¿‡ã€‚å½“å¤±è´¥ç‡è¶…è¿‡é˜ˆå€¼æ—¶ï¼Œç†”æ–­å™¨æ‰“å¼€ã€‚</p>
</li>
<li>
<p><strong>æ‰“å¼€çŠ¶æ€ï¼ˆOPENï¼‰</strong>ï¼šç†”æ–­å™¨æ‰“å¼€åï¼Œæ‰€æœ‰è¯·æ±‚ç›´æ¥è¢«æ‹’ç»ï¼Œæ‰§è¡Œé™çº§é€»è¾‘ã€‚ç»è¿‡ä¸€æ®µæ—¶é—´åè¿›å…¥åŠå¼€çŠ¶æ€ã€‚</p>
</li>
<li>
<p><strong>åŠå¼€çŠ¶æ€ï¼ˆHALF_OPENï¼‰</strong>ï¼šå…è®¸å°‘é‡è¯·æ±‚é€šè¿‡ï¼Œå¦‚æœè¿™äº›è¯·æ±‚æˆåŠŸï¼Œåˆ™å…³é—­ç†”æ–­å™¨ï¼›å¦‚æœå¤±è´¥ï¼Œåˆ™ç»§ç»­æ‰“å¼€ã€‚</p>
</li>
</ol>
<h5 data-id="heading-39">8.3.2 ç›‘æ§æŒ‡æ ‡å®ç°</h5>
<p><strong>æ ¸å¿ƒç›‘æ§æŒ‡æ ‡</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MetricsService</span> {

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> MeterRegistry meterRegistry;

    <span class="hljs-comment">// ç§’æ€æˆåŠŸæ¬¡æ•°è®¡æ•°å™¨</span>
    <span class="hljs-keyword">private</span> Counter seckillSuccessCounter;

    <span class="hljs-comment">// ç§’æ€å¤±è´¥æ¬¡æ•°è®¡æ•°å™¨</span>
    <span class="hljs-keyword">private</span> Counter seckillFailureCounter;

    <span class="hljs-comment">// ä½™é¢æ‰£å‡æˆåŠŸæ¬¡æ•°è®¡æ•°å™¨</span>
    <span class="hljs-keyword">private</span> Counter balanceDeductSuccessCounter;

    <span class="hljs-comment">// ä½™é¢æ‰£å‡å¤±è´¥æ¬¡æ•°è®¡æ•°å™¨</span>
    <span class="hljs-keyword">private</span> Counter balanceDeductFailureCounter;

    <span class="hljs-comment">/**
     * è®°å½•ç§’æ€æˆåŠŸ
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">recordSeckillSuccess</span><span class="hljs-params">(String activityId)</span> {
        seckillSuccessCounter.increment();
    }

    <span class="hljs-comment">/**
     * è®°å½•ä½™é¢æ‰£å‡æˆåŠŸ
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">recordBalanceDeductSuccess</span><span class="hljs-params">(String lockType, Long userId)</span> {
        balanceDeductSuccessCounter.increment();
    }

    <span class="hljs-comment">/**
     * è·å–ç›‘æ§ç»Ÿè®¡æ•°æ®
     */</span>
    <span class="hljs-keyword">public</span> MetricsData <span class="hljs-title function_">getMetricsData</span><span class="hljs-params">()</span> {
        <span class="hljs-type">MetricsData</span> <span class="hljs-variable">data</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MetricsData</span>();
        data.setSeckillSuccessCount(seckillSuccessCounter.count());
        data.setSeckillFailureCount(seckillFailureCounter.count());
        data.setBalanceDeductSuccessCount(balanceDeductSuccessCounter.count());
        data.setBalanceDeductFailureCount(balanceDeductFailureCounter.count());

        <span class="hljs-comment">// è®¡ç®—æˆåŠŸç‡</span>
        <span class="hljs-type">long</span> <span class="hljs-variable">total</span> <span class="hljs-operator">=</span> data.getSeckillSuccessCount() + data.getSeckillFailureCount();
        <span class="hljs-keyword">if</span> (total &gt; <span class="hljs-number">0</span>) {
            data.setSeckillSuccessRate((<span class="hljs-type">double</span>) data.getSeckillSuccessCount() / total * <span class="hljs-number">100</span>);
        }

        <span class="hljs-keyword">return</span> data;
    }
}
</code></pre>
<h5 data-id="heading-40">8.3.3 ç†”æ–­å™¨é…ç½®å®ç°</h5>
<p><strong>Resilience4jç†”æ–­å™¨é…ç½®</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CircuitBreakerConfig</span> {

    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> CircuitBreakerRegistry <span class="hljs-title function_">circuitBreakerRegistry</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> CircuitBreakerRegistry.of(
            CircuitBreakerConfig.custom()
                .slidingWindowSize(<span class="hljs-number">10</span>)  <span class="hljs-comment">// æ»‘åŠ¨çª—å£å¤§å°</span>
                .failureRateThreshold(<span class="hljs-number">50</span>) <span class="hljs-comment">// å¤±è´¥ç‡é˜ˆå€¼50%</span>
                .waitDurationInOpenState(Duration.ofSeconds(<span class="hljs-number">30</span>)) <span class="hljs-comment">// å¼€å¯åç­‰å¾…30ç§’</span>
                .permittedNumberOfCallsInHalfOpenState(<span class="hljs-number">5</span>) <span class="hljs-comment">// åŠå¼€çŠ¶æ€å…è®¸5æ¬¡è°ƒç”¨</span>
                .slowCallRateThreshold(<span class="hljs-number">50</span>) <span class="hljs-comment">// æ…¢è°ƒç”¨ç‡é˜ˆå€¼50%</span>
                .slowCallDurationThreshold(Duration.ofSeconds(<span class="hljs-number">3</span>)) <span class="hljs-comment">// æ…¢è°ƒç”¨é˜ˆå€¼3ç§’</span>
                .build(),
            <span class="hljs-string">"balanceDeduct"</span>,  <span class="hljs-comment">// ä½™é¢æ‰£å‡ç†”æ–­å™¨</span>
            <span class="hljs-string">"seckillService"</span>   <span class="hljs-comment">// ç§’æ€æœåŠ¡ç†”æ–­å™¨</span>
        );
    }
}
</code></pre>
<h5 data-id="heading-41">8.3.4 å¸¦ç†”æ–­ä¿æŠ¤çš„ä½™é¢æ‰£å‡</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SeckillServiceWithCircuitBreaker</span> {

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> CircuitBreakerRegistry circuitBreakerRegistry;

    <span class="hljs-comment">// å¾…å¤„ç†é˜Ÿåˆ—ï¼ˆé™çº§æ—¶ä¿å­˜è¯·æ±‚ï¼‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> ConcurrentHashMap&lt;Long, AtomicInteger&gt; pendingRequests = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcurrentHashMap</span>&lt;&gt;();

    <span class="hljs-comment">/**
     * å¸¦ç†”æ–­ä¿æŠ¤çš„ä½™é¢æ‰£å‡
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">deductBalanceWithCircuitBreaker</span><span class="hljs-params">(Long userId, Long amount, String lockType)</span> {
        <span class="hljs-type">CircuitBreaker</span> <span class="hljs-variable">circuitBreaker</span> <span class="hljs-operator">=</span> circuitBreakerRegistry.circuitBreaker(<span class="hljs-string">"balanceDeduct"</span>);

        <span class="hljs-keyword">return</span> Try.of(() -&gt; {
            <span class="hljs-comment">// æ£€æŸ¥ç†”æ–­å™¨çŠ¶æ€</span>
            <span class="hljs-keyword">if</span> (circuitBreaker.getState() == CircuitBreaker.State.OPEN) {
                log.warn(<span class="hljs-string">"ç†”æ–­å™¨å·²å¼€å¯ï¼Œæ‰§è¡Œé™çº§ç­–ç•¥"</span>);
                <span class="hljs-keyword">return</span> fallbackDeductBalance(userId, amount);
            }

            <span class="hljs-comment">// æ­£å¸¸ä¸šåŠ¡é€»è¾‘</span>
            <span class="hljs-type">boolean</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> doDeductBalance(userId, amount);

            <span class="hljs-comment">// è®°å½•æˆåŠŸæŒ‡æ ‡</span>
            metricsService.recordBalanceDeductSuccess(lockType, userId);

            <span class="hljs-keyword">return</span> result;

        }).recover(throwable -&gt; {
            <span class="hljs-comment">// ç†”æ–­æˆ–å¼‚å¸¸æ—¶çš„é™çº§å¤„ç†</span>
            log.warn(<span class="hljs-string">"æ‰§è¡Œé™çº§å¤„ç†ï¼Œç”¨æˆ·: {}"</span>, userId);
            <span class="hljs-keyword">return</span> fallbackDeductBalance(userId, amount);
        }).get();
    }

    <span class="hljs-comment">/**
     * é™çº§å¤„ç†ï¼šä¿å­˜åˆ°å¾…å¤„ç†é˜Ÿåˆ—
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">fallbackDeductBalance</span><span class="hljs-params">(Long userId, Long amount)</span> {
        log.info(<span class="hljs-string">"æ‰§è¡Œé™çº§ç­–ç•¥ï¼Œä¿å­˜åˆ°å¾…å¤„ç†é˜Ÿåˆ—ï¼Œç”¨æˆ·: {}, é‡‘é¢: {}"</span>, userId, amount);
        pendingRequests.computeIfAbsent(userId, k -&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">AtomicInteger</span>(<span class="hljs-number">0</span>)).addAndGet(amount.intValue());
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>; <span class="hljs-comment">// è¿”å›trueè¡¨ç¤ºå·²æ¥å—è¯·æ±‚ï¼ˆå¼‚æ­¥å¤„ç†ï¼‰</span>
    }

    <span class="hljs-comment">/**
     * å¤„ç†å¾…å¤„ç†é˜Ÿåˆ—ä¸­çš„è¯·æ±‚
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">processPendingRequests</span><span class="hljs-params">()</span> {
        log.info(<span class="hljs-string">"å¼€å§‹å¤„ç†å¾…å¤„ç†é˜Ÿåˆ—ï¼Œå¾…å¤„ç†ç”¨æˆ·æ•°: {}"</span>, pendingRequests.size());

        pendingRequests.forEach((userId, amount) -&gt; {
            <span class="hljs-keyword">try</span> {
                <span class="hljs-type">boolean</span> <span class="hljs-variable">success</span> <span class="hljs-operator">=</span> doDeductBalance(userId, amount.longValue());
                <span class="hljs-keyword">if</span> (success) {
                    pendingRequests.remove(userId);
                    log.info(<span class="hljs-string">"å¾…å¤„ç†è¯·æ±‚å¤„ç†æˆåŠŸï¼Œç”¨æˆ·: {}"</span>, userId);
                }
            } <span class="hljs-keyword">catch</span> (Exception e) {
                log.error(<span class="hljs-string">"å¾…å¤„ç†è¯·æ±‚å¤„ç†å¤±è´¥ï¼Œç”¨æˆ·: {}"</span>, userId, e);
            }
        });
    }
}
</code></pre>
<h5 data-id="heading-42">8.3.5 å‰ç«¯ç›‘æ§é¢æ¿å®ç°</h5>
<p><strong>å®æ—¶ç›‘æ§é¢æ¿</strong>ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4c617fe602774312946e8558e97debfd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771290044&amp;x-signature=Hgc8n5bV75iqwtwhONIbf%2Bg8wOA%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-43">ä¹ã€æ€»ç»“</h3>
<h4 data-id="heading-44">9.1 ä¸‰ç§é”çš„é€‰æ‹©å»ºè®®</h4>






























<table><thead><tr><th>åœºæ™¯</th><th>æ¨èæ–¹æ¡ˆ</th><th>ç†ç”±</th></tr></thead><tbody><tr><td>å•æœºä½å¹¶å‘</td><td>æ‚²è§‚é”</td><td>å®ç°ç®€å•ï¼Œæ•°æ®ä¸€è‡´æ€§å¼º</td></tr><tr><td>å•æœºé«˜å¹¶å‘</td><td>ä¹è§‚é”</td><td>æ— é”ç«äº‰ï¼Œæ€§èƒ½æœ€ä¼˜</td></tr><tr><td>åˆ†å¸ƒå¼ç³»ç»Ÿ</td><td>Redisåˆ†å¸ƒå¼é”</td><td>è·¨èŠ‚ç‚¹äº’æ–¥ï¼Œå¯é æ€§é«˜</td></tr><tr><td>ç§’æ€åœºæ™¯</td><td>Redis + MQ + ä¹è§‚é”</td><td>ç»“åˆå„è‡ªä¼˜åŠ¿</td></tr></tbody></table>
<h4 data-id="heading-45">9.2 æ€§èƒ½å¯¹æ¯”æ•°æ®ï¼ˆæµ‹è¯•ç¯å¢ƒï¼š8æ ¸16Gï¼Œ100å¹¶å‘çº¿ç¨‹ï¼‰</h4>

































<table><thead><tr><th>é”ç±»å‹</th><th>æˆåŠŸç‡</th><th>å¹³å‡è€—æ—¶(ms)</th><th>ååé‡(ops/s)</th><th>P99è€—æ—¶(ms)</th></tr></thead><tbody><tr><td>æ‚²è§‚é”</td><td>100%</td><td>245.32</td><td>408</td><td>512</td></tr><tr><td>ä¹è§‚é”</td><td>100%</td><td>78.21</td><td>1278</td><td>187</td></tr><tr><td>åˆ†å¸ƒå¼é”</td><td>100%</td><td>156.45</td><td>639</td><td>321</td></tr></tbody></table>
<blockquote>
<p>æœ¬æ–‡ä»‹ç»äº†ç§’æ€ç³»ç»Ÿä¸­è´¦æˆ·ä½™é¢æ‰£å‡çš„ç«æ€æ¡ä»¶é—®é¢˜ï¼Œä»¥åŠä¸‰ç§è§£å†³æ–¹æ¡ˆçš„è¯¦ç»†å¯¹æ¯”ã€‚é€šè¿‡å®é™…ä»£ç ç¤ºä¾‹å’Œæ¶æ„å›¾ï¼Œå¸®åŠ©ä½ ç†è§£ä¸åŒé”æœºåˆ¶çš„é€‚ç”¨åœºæ™¯ï¼Œè®¾è®¡å‡ºé«˜æ€§èƒ½é«˜å¯ç”¨çš„ç§’æ€ç³»ç»Ÿã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‰‘æŒ‡offer-74ã€nä¸ªéª°â¼¦çš„ç‚¹æ•°]]></title>    <link>https://juejin.cn/post/7604709514131128366</link>    <guid>https://juejin.cn/post/7604709514131128366</guid>    <pubDate>2026-02-09T23:10:34.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604709514131128366" data-draft-id="7603567912592965659" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‰‘æŒ‡offer-74ã€nä¸ªéª°â¼¦çš„ç‚¹æ•°"/> <meta itemprop="keywords" content="Java"/> <meta itemprop="datePublished" content="2026-02-09T23:10:34.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="SevenCoding"/> <meta itemprop="url" content="https://juejin.cn/user/3261615728242467"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‰‘æŒ‡offer-74ã€nä¸ªéª°â¼¦çš„ç‚¹æ•°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3261615728242467/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    SevenCoding
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-09T23:10:34.000Z" title="Mon Feb 09 2026 23:10:34 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">é¢˜ç›®æè¿°</h2>
<p>æŠŠ n ä¸ªéª°â¼¦æ‰”åœ¨åœ°ä¸Šï¼Œæ‰€æœ‰éª°â¼¦æœä¸Šâ¼€â¾¯çš„ç‚¹æ•°ä¹‹å’Œä¸º s ã€‚è¾“â¼Š n ï¼Œæ‰“å°å‡º s çš„æ‰€æœ‰å¯èƒ½çš„å€¼å‡ºç°çš„æ¦‚ç‡ã€‚</p>
<p>ä½ éœ€è¦â½¤â¼€ä¸ªæµ®ç‚¹æ•°æ•°ç»„è¿”å›ç­”æ¡ˆï¼Œå…¶ä¸­ç¬¬ i ä¸ªå…ƒç´ ä»£è¡¨è¿™ n ä¸ªéª°â¼¦æ‰€èƒ½æ·å‡ºçš„ç‚¹æ•°é›†åˆä¸­ç¬¬ i â¼©çš„é‚£ä¸ªçš„æ¦‚ç‡ã€‚</p>
<p>ç¤ºä¾‹1ï¼š</p>
<p>è¾“â¼Š: 1
è¾“å‡º: [0.16667,0.16667,0.16667,0.16667,0.16667,0.16667]</p>
<p>ç¤ºä¾‹2</p>
<p>è¾“â¼Š: 2
è¾“å‡º:[0.02778,0.05556,0.08333,0.11111,0.13889,0.16667,0.13889,0.11111,0.08333,0.05556,0.02778]</p>
<h2 data-id="heading-1">æ€è·¯åŠè§£ç­”</h2>
<h3 data-id="heading-2">æš´åŠ›é€’å½’</h3>
<p>æšä¸¾æ‰€æœ‰éª°å­ç»„åˆã€‚é€’å½’è®¡ç®—æ¯ä¸ªéª°å­çš„ç‚¹æ•°ï¼Œç»Ÿè®¡æ‰€æœ‰å¯èƒ½çš„å’Œ</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-type">double</span>[] dicesProbability(<span class="hljs-type">int</span> n) {
        <span class="hljs-comment">// éª°å­ç‚¹æ•°èŒƒå›´ï¼šnåˆ°6nï¼Œå…±5n+1ç§å¯èƒ½</span>
        <span class="hljs-type">int</span>[] counts = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[<span class="hljs-number">5</span> * n + <span class="hljs-number">1</span>];
        
        <span class="hljs-comment">// é€’å½’ç»Ÿè®¡æ‰€æœ‰å¯èƒ½çš„å’Œ</span>
        backtrack(n, <span class="hljs-number">0</span>, counts);
        
        <span class="hljs-comment">// è®¡ç®—æ¦‚ç‡</span>
        <span class="hljs-type">double</span> <span class="hljs-variable">total</span> <span class="hljs-operator">=</span> Math.pow(<span class="hljs-number">6</span>, n);
        <span class="hljs-type">double</span>[] res = <span class="hljs-keyword">new</span> <span class="hljs-title class_">double</span>[counts.length];
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; counts.length; i++) {
            res[i] = counts[i] / total;
        }
        <span class="hljs-keyword">return</span> res;
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">backtrack</span><span class="hljs-params">(<span class="hljs-type">int</span> remain, <span class="hljs-type">int</span> sum, <span class="hljs-type">int</span>[] counts)</span> {
        <span class="hljs-keyword">if</span> (remain == <span class="hljs-number">0</span>) {
            counts[sum - remain]++; <span class="hljs-comment">// ç»Ÿè®¡å’Œå‡ºç°çš„æ¬¡æ•°</span>
            <span class="hljs-keyword">return</span>;
        }
        
        <span class="hljs-comment">// å½“å‰éª°å­å¯ä»¥æ˜¯1åˆ°6ç‚¹</span>
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= <span class="hljs-number">6</span>; i++) {
            backtrack(remain - <span class="hljs-number">1</span>, sum + i, counts);
        }
    }
}
</code></pre>
<p>å¦‚æœä½¿â½¤æš´â¼’æ³•ï¼Œæ¯â¼€ä¸ªéª°â¼¦æ‰”åˆ° 1 - 6 çš„æ¦‚ç‡éƒ½æ˜¯ 1/6ï¼Œå¦‚æœæœ‰ n ä¸ª éª°â¼¦ï¼Œå…ˆä¸çœ‹é‡å¤çš„æƒ…å†µï¼Œâ¼€å…±æœ‰ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>6</mn><mi>n</mi></msup></mrow><annotation encoding="application/x-tex">6^n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6644em;"/><span class="mord"><span class="mord">6</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span></span></span></span></span> ç§æƒ…å†µï¼Œç‚¹æ•°çš„èŒƒå›´æ˜¯ n ~ 6n ï¼Œä¹Ÿå°±æ˜¯ 5n+1 ç§ã€‚</p>
<ul>
<li><strong>æ—¶é—´å¤æ‚åº¦</strong>ï¼šO(6â¿)ï¼Œæ¯ä¸ªéª°å­æœ‰6ç§å¯èƒ½ï¼Œnä¸ªéª°å­ç»„åˆæ•°ä¸º6â¿</li>
<li><strong>ç©ºé—´å¤æ‚åº¦</strong>ï¼šO(n)ï¼Œé€’å½’è°ƒç”¨æ ˆçš„æ·±åº¦</li>
</ul>
<p>ä»¥ä¸Šçš„è®¡ç®—å¤æ‚åº¦å®åœ¨å¤ªâ¾¼ï¼Œæˆ‘ä»¬ä¸èƒ½æ¥å—ã€‚</p>
<h3 data-id="heading-3">åŠ¨æ€è§„åˆ’ï¼ˆæ¨èï¼‰</h3>
<p>å…¶å®ï¼Œè¿™é“é¢˜å¯ä»¥â½¤åŠ¨æ€è§„åˆ’æ¥å¤„ç†ï¼Œ 1 ä¸ªéª°â¼¦çš„æƒ…å†µæ˜¯å·²çŸ¥çš„ï¼Œâ½½ 2 ä¸ªéª°â¼¦çš„æƒ…å†µå‘¢ï¼Ÿ 2 ä¸ªéª°â¼¦çš„æƒ…å†µï¼Œå¯ä»¥ä½¿â½¤ 1 ä¸ªéª°â¼¦çš„æƒ…å†µæ¨å‡ºï¼Œ 3 ä¸ªéª°â¼¦çš„æƒ…å†µï¼Œå¯ä»¥ä½¿â½¤ 2 ä¸ªéª°â¼¦çš„ç»“æœæ¨å‡º...</p>
<p><code>dp[i][j]</code>è¡¨ç¤ºiä¸ªéª°å­å’Œä¸ºjçš„å‡ºç°æ¬¡æ•°</p>
<p>æ‰§è¡Œè¿‡ç¨‹ç¤ºä¾‹ï¼ˆn=2ï¼‰ï¼š</p>
<pre><code class="hljs language-text" lang="text">åˆå§‹åŒ–dp[1][1]=1, dp[1][2]=1, ..., dp[1][6]=1
è®¡ç®—dp[2][2] = dp[1][1] = 1
dp[2][3] = dp[1][2] + dp[1][1] = 2
...
dp[2][12] = dp[1][11] (ä¸å­˜åœ¨) + ... + dp[1][6] = 1
</code></pre>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-type">double</span>[] dicesProbability(<span class="hljs-type">int</span> n) {
        <span class="hljs-comment">// dp[i][j]ï¼šiä¸ªéª°å­å’Œä¸ºjçš„å‡ºç°æ¬¡æ•°</span>
        <span class="hljs-type">int</span>[][] dp = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[n + <span class="hljs-number">1</span>][<span class="hljs-number">6</span> * n + <span class="hljs-number">1</span>];
        
        <span class="hljs-comment">// åˆå§‹åŒ–ï¼š1ä¸ªéª°å­çš„æƒ…å†µ</span>
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; j &lt;= <span class="hljs-number">6</span>; j++) {
            dp[<span class="hljs-number">1</span>][j] = <span class="hljs-number">1</span>;
        }
        
        <span class="hljs-comment">// å¡«å……çŠ¶æ€è½¬ç§»è¡¨</span>
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">2</span>; i &lt;= n; i++) {            <span class="hljs-comment">// éª°å­æ•°é‡ä»2åˆ°n</span>
            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> i; j &lt;= <span class="hljs-number">6</span> * i; j++) {     <span class="hljs-comment">// å’Œçš„èŒƒå›´ï¼šiåˆ°6i</span>
                <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">k</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; k &lt;= <span class="hljs-number">6</span> &amp;&amp; k &lt; j; k++) { <span class="hljs-comment">// æœ€åä¸€ä¸ªéª°å­çš„ç‚¹æ•°</span>
                    dp[i][j] += dp[i - <span class="hljs-number">1</span>][j - k];
                }
            }
        }
        
        <span class="hljs-comment">// è®¡ç®—æ¦‚ç‡</span>
        <span class="hljs-type">double</span> <span class="hljs-variable">total</span> <span class="hljs-operator">=</span> Math.pow(<span class="hljs-number">6</span>, n);
        <span class="hljs-type">double</span>[] res = <span class="hljs-keyword">new</span> <span class="hljs-title class_">double</span>[<span class="hljs-number">5</span> * n + <span class="hljs-number">1</span>];
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> n; j &lt;= <span class="hljs-number">6</span> * n; j++) {
            res[j - n] = dp[n][j] / total;
        }
        <span class="hljs-keyword">return</span> res;
    }
}
</code></pre>
<ul>
<li><strong>æ—¶é—´å¤æ‚åº¦</strong>ï¼šO(nÂ²)ï¼Œå¤–å±‚å¾ªç¯næ¬¡ï¼Œå†…å±‚å¾ªç¯æœ€å¤š6næ¬¡</li>
<li><strong>ç©ºé—´å¤æ‚åº¦</strong>ï¼šO(nÂ²)ï¼Œéœ€è¦äºŒç»´æ•°ç»„å­˜å‚¨ä¸­é—´ç»“æœ</li>
</ul>
<h3 data-id="heading-4">ç©ºé—´ä¼˜åŒ–åŠ¨æ€è§„åˆ’</h3>
<p>é€šè¿‡è§‚å¯Ÿå‘ç°å½“å‰çŠ¶æ€åªä¾èµ–å‰ä¸€ä¸ªçŠ¶æ€ï¼Œå¯ä»¥ä¼˜åŒ–ç©ºé—´ã€‚é€šè¿‡æ»šåŠ¨æ•°ç»„å‡å°‘ç©ºé—´ä½¿ç”¨</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-type">double</span>[] dicesProbability(<span class="hljs-type">int</span> n) {
        <span class="hljs-comment">// ä½¿ç”¨ä¸¤ä¸ªä¸€ç»´æ•°ç»„äº¤æ›¿æ›´æ–°</span>
        <span class="hljs-type">int</span>[] prev = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[<span class="hljs-number">6</span> * n + <span class="hljs-number">1</span>];
        <span class="hljs-type">int</span>[] curr = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[<span class="hljs-number">6</span> * n + <span class="hljs-number">1</span>];
        
        <span class="hljs-comment">// åˆå§‹åŒ–ç¬¬ä¸€ä¸ªéª°å­</span>
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; j &lt;= <span class="hljs-number">6</span>; j++) {
            prev[j] = <span class="hljs-number">1</span>;
        }
        
        <span class="hljs-comment">// åŠ¨æ€è§„åˆ’å¡«å……</span>
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">2</span>; i &lt;= n; i++) {
            Arrays.fill(curr, <span class="hljs-number">0</span>); <span class="hljs-comment">// æ¸…ç©ºå½“å‰æ•°ç»„</span>
            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> i; j &lt;= <span class="hljs-number">6</span> * i; j++) {
                <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">k</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; k &lt;= <span class="hljs-number">6</span> &amp;&amp; k &lt; j; k++) {
                    curr[j] += prev[j - k];
                }
            }
            <span class="hljs-comment">// äº¤æ¢æ•°ç»„ï¼Œå‡†å¤‡ä¸‹ä¸€è½®</span>
            <span class="hljs-type">int</span>[] temp = prev;
            prev = curr;
            curr = temp;
        }
        
        <span class="hljs-comment">// è®¡ç®—æ¦‚ç‡</span>
        <span class="hljs-type">double</span> <span class="hljs-variable">total</span> <span class="hljs-operator">=</span> Math.pow(<span class="hljs-number">6</span>, n);
        <span class="hljs-type">double</span>[] res = <span class="hljs-keyword">new</span> <span class="hljs-title class_">double</span>[<span class="hljs-number">5</span> * n + <span class="hljs-number">1</span>];
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> n; j &lt;= <span class="hljs-number">6</span> * n; j++) {
            res[j - n] = prev[j] / total;
        }
        <span class="hljs-keyword">return</span> res;
    }
}
</code></pre>
<ul>
<li><strong>æ—¶é—´å¤æ‚åº¦</strong>ï¼šO(nÂ²)ï¼Œå¤–å±‚å¾ªç¯næ¬¡ï¼Œå†…å±‚å¾ªç¯æœ€å¤š6næ¬¡</li>
<li><strong>ç©ºé—´å¤æ‚åº¦</strong>ï¼šO(n)ï¼Œåªä¿ç•™å‰ä¸€è½®çš„ç»“æœï¼Œç©ºé—´ä»O(nÂ²)é™åˆ°O(n)</li>
</ul>
<h3 data-id="heading-5">æ•°å­¦å…¬å¼æ³•ï¼ˆå¤šé¡¹å¼å±•å¼€ï¼‰</h3>
<p>å’Œä¸ºsçš„æ¦‚ç‡å¯¹åº”äº(x+xÂ²+...+xâ¶)â¿å±•å¼€å¼ä¸­xË¢çš„ç³»æ•°</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-type">double</span>[] dicesProbability(<span class="hljs-type">int</span> n) {
        <span class="hljs-comment">// åˆå§‹åŒ–å¤šé¡¹å¼ç³»æ•°ï¼š1ä¸ªéª°å­æ—¶å„é¡¹ç³»æ•°ä¸º1</span>
        <span class="hljs-type">int</span>[] coeff = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[<span class="hljs-number">6</span> * n + <span class="hljs-number">1</span>];
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; j &lt;= <span class="hljs-number">6</span>; j++) {
            coeff[j] = <span class="hljs-number">1</span>;
        }
        
        <span class="hljs-comment">// å¤šé¡¹å¼ä¹˜æ³•ï¼šè®¡ç®—(1x+1xÂ²+...+1xâ¶)^n</span>
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">2</span>; i &lt;= n; i++) {
            <span class="hljs-type">int</span>[] newCoeff = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[<span class="hljs-number">6</span> * i + <span class="hljs-number">1</span>];
            <span class="hljs-comment">// å¤šé¡¹å¼ä¹˜æ³•è®¡ç®—</span>
            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; j &lt;= <span class="hljs-number">6</span>; j++) {
                <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">k</span> <span class="hljs-operator">=</span> i - <span class="hljs-number">1</span>; k &lt;= <span class="hljs-number">6</span> * (i - <span class="hljs-number">1</span>); k++) {
                    newCoeff[k + j] += coeff[k];
                }
            }
            coeff = newCoeff;
        }
        
        <span class="hljs-comment">// è®¡ç®—æ¦‚ç‡</span>
        <span class="hljs-type">double</span> <span class="hljs-variable">total</span> <span class="hljs-operator">=</span> Math.pow(<span class="hljs-number">6</span>, n);
        <span class="hljs-type">double</span>[] res = <span class="hljs-keyword">new</span> <span class="hljs-title class_">double</span>[<span class="hljs-number">5</span> * n + <span class="hljs-number">1</span>];
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> n; j &lt;= <span class="hljs-number">6</span> * n; j++) {
            res[j - n] = coeff[j] / total;
        }
        <span class="hljs-keyword">return</span> res;
    }
}
</code></pre>
<ul>
<li><strong>æ—¶é—´å¤æ‚åº¦</strong>ï¼šO(nÂ²)ï¼Œå¤šé¡¹å¼ä¹˜æ³•è®¡ç®—</li>
<li><strong>ç©ºé—´å¤æ‚åº¦</strong>ï¼šO(n)ï¼Œå­˜å‚¨å¤šé¡¹å¼ç³»æ•°</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Xcode è¿ˆå…¥ Agent æ—¶ä»£ -- è‚˜å­çš„ Swift å‘¨æŠ¥ #122]]></title>    <link>https://juejin.cn/post/7604694326517940275</link>    <guid>https://juejin.cn/post/7604694326517940275</guid>    <pubDate>2026-02-09T23:47:36.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604694326517940275" data-draft-id="7604646882014806067" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Xcode è¿ˆå…¥ Agent æ—¶ä»£  -- è‚˜å­çš„ Swift å‘¨æŠ¥ #122"/> <meta itemprop="keywords" content="Swift,SwiftUI,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-02-09T23:47:36.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸œå¡è‚˜å­"/> <meta itemprop="url" content="https://juejin.cn/user/1548526032528727"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Xcode è¿ˆå…¥ Agent æ—¶ä»£  -- è‚˜å­çš„ Swift å‘¨æŠ¥ #122
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1548526032528727/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸œå¡è‚˜å­
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-09T23:47:36.000Z" title="Mon Feb 09 2026 23:47:36 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c4a5c11e00fc47d3b11b8757d418e2f4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lic5Z2h6IKY5a2Q:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771285655&amp;x-signature=olZr9UiO5V1alT7V%2BRsCMvKRzOw%3D" alt="issue122.webp" loading="lazy"/></p>
<h2 data-id="heading-0">Xcode è¿ˆå…¥ Agent æ—¶ä»£</h2>
<p>å°½ç®¡åœ¨ Xcode 26 çš„æœ€åˆç‰ˆæœ¬ä¸­ï¼Œè‹¹æœå°±å·²ç»åŠ å…¥äº†ä¸€å®šçš„ AI è¾…åŠ©ç¼–ç¨‹èƒ½åŠ›ï¼Œä½†å½“æ—¶çš„ä½“éªŒæ›´åƒæ˜¯æŠŠ ChatGPT ç”Ÿç¡¬åœ°åµŒå…¥åˆ° IDE ä¸­ï¼šåŠŸèƒ½å­˜åœ¨ï¼Œå´å½¼æ­¤å‰²è£‚ã€‚ä¸å½“æ—¶é£å¤´æ­£ç››çš„ Cursor ç›¸æ¯”ï¼Œå®ƒæ›´åƒæ˜¯ä¸¤ä¸ªæ—¶ä»£çš„äº§ç‰©ã€‚éšç€ Claude Code ç­‰ AI CLI å·¥å…·é€æ¸æˆç†Ÿï¼ŒXcode æ›´æ˜¾å¾—æ­¥ä¼è¿Ÿç¼“ï¼Œç”šè‡³è®©ä¸å°‘å¼€å‘è€…å¼€å§‹æ€€ç–‘ï¼šåœ¨ AI æ—¶ä»£ï¼Œå®ƒæ˜¯å¦è¿˜èƒ½èƒœä»»â€œä¸»åŠ› IDEâ€çš„è§’è‰²ã€‚</p>
<p>26.3 ç‰ˆæœ¬çš„åˆ°æ¥ï¼Œå‡ ä¹æ²¡æœ‰ä»»ä½•é¢„çƒ­ï¼Œå´ç”¨å®é™…è¡ŒåŠ¨å›åº”äº†è¿™äº›è´¨ç–‘ã€‚é€šè¿‡é›†æˆ Claude Code / Codexï¼Œè‹¹æœç»™å‡ºçš„ç­”æ¡ˆå¾ˆç›´æ¥ï¼šåªè¦ç­–ç•¥å¾—å½“ï¼ŒXcode ä¾ç„¶æ˜¯è‹¹æœç”Ÿæ€ä¸­æå…·æ½œåŠ›çš„å¼€å‘ç¯å¢ƒã€‚è¿™ä¸€æ¬¡ï¼ŒXcode å¹¶æ²¡æœ‰ç®€å•åœ°å¡è¿›ä¸€ä¸ª CLI å·¥å…·é¢æ¿ï¼Œè€Œæ˜¯å¼•å…¥äº†ä¸€å¥—åŸç”Ÿçš„ Xcode Toolsï¼ˆMCPï¼‰ï¼Œå¹¶é…åˆ Swift 6ã€SwiftUIã€SwiftData ç­‰å®˜æ–¹æŠ€æœ¯æ–‡æ¡£ï¼Œå½¢æˆäº†é«˜åº¦ä¸€è‡´ã€è´´åˆæœ€æ–°å®è·µçš„æ•´ä½“ä½“éªŒã€‚å³ä¾¿å¯¹äºå·²ç»ç†Ÿç»ƒä½¿ç”¨ CLI + XcodeBuildMCP + å„ç±» Skills çš„å¼€å‘è€…è€Œè¨€ï¼Œè¿™å¥—åŸç”Ÿæ–¹æ¡ˆä¾ç„¶å…·å¤‡å¾ˆå¼ºçš„ç«äº‰åŠ›â€”â€”å°¤å…¶æ˜¯å‡ ä¹ä¸ºé›¶çš„é…ç½®æˆæœ¬ï¼Œè¿™å¯¹ç»å¤§å¤šæ•°å¼€å‘è€…æ¥è¯´æ„ä¹‰é‡å¤§ã€‚</p>
<p>æ›´å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œè¿™æ¬¡æä¾›çš„ Xcode Tools å¹¶ä¸åªæ˜¯æœåŠ¡äº Xcode æœ¬èº«ï¼Œå®ƒä»¬åŒæ ·å¯ä»¥ä½œä¸ºæ ‡å‡† MCPï¼Œä¸ºå…¶ä»– AI å·¥å…·æä¾›èƒ½åŠ›æ”¯æŒã€‚è¿™ç§å¼€æ”¾å§¿æ€ï¼Œå¹¶ä¸å®Œå…¨ç¬¦åˆå¤–ç•Œå¯¹è‹¹æœä¸€è´¯é£æ ¼çš„å°è±¡ã€‚</p>
<p>å½“ç„¶ï¼Œç«™åœ¨ä»Šå¤©è¿™ä¸ªæ—¶é—´ç‚¹ï¼Œæˆ‘ä»¬è¿˜ä¸èƒ½æ–­è¨€ Xcode å·²ç»é‡æ–°å›åˆ°äº†ç¬¬ä¸€é˜µè¥ã€‚ä½†å¯ä»¥è‚¯å®šçš„æ˜¯ï¼Œ26.3 é‡Šæ”¾äº†ä¸€ä¸ªéå¸¸æ˜ç¡®çš„ä¿¡å·ï¼šè‹¹æœæ„¿æ„ä¸ä¸»æµå·¥å…·å’ŒæœåŠ¡åä½œï¼Œå»æ‰“é€ çœŸæ­£ç¬¦åˆæ—¶ä»£çš„å¼€å‘ä½“éªŒã€‚ä¹Ÿæ­£å› ä¸ºå¦‚æ­¤ï¼Œæˆ‘å¯¹ä¸‹ä¸€é˜¶æ®µçš„ Siri æŠ±æœ‰æ›´é«˜çš„æœŸå¾…â€”â€”å¾ˆå¯èƒ½åœ¨ iOS 27 ä¸­ï¼Œè‹¹æœä¼šåœ¨ç°æœ‰ Intent ä½“ç³»ä¹‹å¤–ï¼Œä¸ºç³»ç»Ÿå’Œåº”ç”¨æä¾›æ›´å¤šæ ‡å‡†åŒ–æ¥å£ï¼Œè®© AI æ›´è‡ªç„¶åœ°èå…¥æ•´ä¸ªç”Ÿæ€ã€‚</p>
<p>Xcode + Agent åªæ˜¯èµ·ç‚¹ã€‚</p>
<p>Apple + Agentï¼Œæ‰æ˜¯æ›´å€¼å¾—å…³æ³¨çš„æœªæ¥ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Ffatbobman.com%2Fzh%2Fweekly%2Fissue-122%2F" target="_blank" title="https://fatbobman.com/zh/weekly/issue-122/" ref="nofollow noopener noreferrer">æœ¬æœŸå†…å®¹</a> | <a href="https://link.juejin.cn?target=https%3A%2F%2Ffatbobman.com%2Fzh%2Fweekly%2Fissue-121%2F" target="_blank" title="https://fatbobman.com/zh/weekly/issue-121/" ref="nofollow noopener noreferrer">å‰ä¸€æœŸå†…å®¹</a> | <a href="https://link.juejin.cn?target=https%3A%2F%2Ffatbobman.com%2Fzh%2Fweekly%2F" target="_blank" title="https://fatbobman.com/zh/weekly/" ref="nofollow noopener noreferrer">å…¨éƒ¨å‘¨æŠ¥åˆ—è¡¨</a></p>
<blockquote>
<p>ğŸš€ <strong>ã€Šè‚˜å­çš„ Swift å‘¨æŠ¥ã€‹</strong></p>
<p>æ¯å‘¨ä¸ºä½ ç²¾é€‰æœ€å€¼å¾—å…³æ³¨çš„ Swiftã€SwiftUI æŠ€æœ¯åŠ¨æ€</p>
<ul>
<li><strong>ğŸ“® ç«‹å³è®¢é˜…</strong> | <a href="https://link.juejin.cn?target=https%3A%2F%2Fweekly.fatbobman.com%2Ffatbobman" target="_blank" title="https://weekly.fatbobman.com/fatbobman" ref="nofollow noopener noreferrer">weekly.fatbobman.com</a> è·å–å®Œæ•´å†…å®¹</li>
<li><strong>ğŸ‘¥ åŠ å…¥ç¤¾åŒº</strong> | <a href="https://link.juejin.cn?target=https%3A%2F%2Fdiscord.com%2Finvite%2F7FedN5E2QQ" target="_blank" title="https://discord.com/invite/7FedN5E2QQ" ref="nofollow noopener noreferrer">Discord</a> ä¸ 2000+ å¼€å‘è€…äº¤æµ</li>
<li><strong>ğŸ“š æ·±åº¦æ•™ç¨‹</strong> | <a href="https://link.juejin.cn?target=http%3A%2F%2Ffatbobman.com" target="_blank" title="http://fatbobman.com" ref="nofollow noopener noreferrer">fatbobman.com</a> æ¢ç´¢ 200+ åŸåˆ›æ–‡ç« </li>
</ul>
</blockquote>
<h2 data-id="heading-1">åŸåˆ›</h2>
<h3 data-id="heading-2"><a href="https://link.juejin.cn?target=https%3A%2F%2Ffatbobman.com%2Fzh%2Fposts%2Fxcode-263-claude%2F%3Futm_source%3Dfatbobman%2520weekly%2520issue%2520122%26utm_medium%3Dweb" target="_blank" title="https://fatbobman.com/zh/posts/xcode-263-claude/?utm_source=fatbobman%20weekly%20issue%20122&amp;utm_medium=web" ref="nofollow noopener noreferrer">Xcode 26.3 + Claude Agentï¼šæ¨¡å‹æ›¿æ¢ã€MCPã€Skill ä¸è‡ªé€‚åº”é…ç½®</a></h3>
<p>Xcode 26.3 ç‰ˆæœ¬ä¸­è‹¹æœç›´æ¥æä¾›äº†å¯¹ Claude Code/Codex çš„æ”¯æŒã€‚è‡ªæ­¤ï¼Œå¼€å‘è€…ç»ˆäºå¯ä»¥åœ¨ Xcode ä¸­æ–¹ä¾¿çš„ä½¿ç”¨åŸç”Ÿ AI Agent äº†ã€‚ è¿™ä¸¤å¤©æˆ‘é’ˆå¯¹æ–°ç‰ˆæœ¬è¿›è¡Œäº†ä¸€ç³»åˆ—å°è¯•ï¼ŒåŒ…æ‹¬å¦‚ä½•ä½¿ç”¨æœ€æ–°æ¨¡å‹ã€é…ç½® MCPs/Skill/Commandã€ä»¥åŠç¼–å†™è‡ªé€‚åº”çš„ <code>CLAUDE.md</code>ã€‚æœ¬æ–‡ä»¥ Claude Code ä¸ºä¾‹ï¼Œåˆ†äº«ä¸€äº›æ–‡æ¡£ä¹‹å¤–çš„æŠ€å·§ã€‚</p>
<h2 data-id="heading-3">è¿‘æœŸæ¨è</h2>
<h3 data-id="heading-4"><a href="https://link.juejin.cn?target=https%3A%2F%2Ffatbobman.com%2Fzh%2Fposts%2Fscreensage-from-pixel-to-meta%2F%3Futm_source%3Dfatbobman%2520weekly%2520issue%2520122%26utm_medium%3Dweb" target="_blank" title="https://fatbobman.com/zh/posts/screensage-from-pixel-to-meta/?utm_source=fatbobman%20weekly%20issue%20122&amp;utm_medium=web" ref="nofollow noopener noreferrer">macOS å½•å±è½¯ä»¶å¼€å‘å®å½•ï¼šä»åƒç´ æŠ“å–åˆ°å…ƒæ•°æ®é‡ç°</a></h3>
<p>è§†é¢‘æ­£åœ¨å–ä»£æ–‡å­—æˆä¸ºæ›´å—æ¬¢è¿çš„è¡¨è¾¾æ–¹å¼ï¼Œè€Œå¥½å·¥å…·æ˜¯åˆ›ä½œçš„åŠ é€Ÿå™¨ã€‚macOS å½•å±è½¯ä»¶ <a href="https://link.juejin.cn?target=https%3A%2F%2Fscreensage.pro%2Fzh" target="_blank" title="https://screensage.pro/zh" ref="nofollow noopener noreferrer">ScreenSage Pro</a> çš„å¼€å‘è€… <a href="https://link.juejin.cn?target=https%3A%2F%2Fx.com%2Fs1ntone" target="_blank" title="https://x.com/s1ntone" ref="nofollow noopener noreferrer">Sintone</a> æ·±åº¦å¤ç›˜äº†å¦‚ä½•åŸºäº ScreenCaptureKit å’Œ Metal å®ç°â€œå½•å®Œå³å‰ªå®Œâ€ã€‚ä»è§£å†³ SCK -3821 è¯¡å¼‚æŠ¥é”™ï¼Œåˆ°ç”± ObservableObject è¿ç§»è‡³ @Observable ä¼˜åŒ–æ—¶é—´çº¿æ€§èƒ½ï¼Œæœ¬æ–‡æ¯«æ— ä¿ç•™åœ°åˆ†äº«äº†ä»åƒç´ æŠ“å–åˆ°é«˜æ€§èƒ½åˆæˆçš„å…¨è¿‡ç¨‹ã€‚</p>
<hr/>
<h3 data-id="heading-5"><a href="https://link.juejin.cn?target=https%3A%2F%2Fl.fatbobman.com%2Fw0122-05" target="_blank" title="https://l.fatbobman.com/w0122-05" ref="nofollow noopener noreferrer">å“ªç§æ–¹å¼åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦åœ¨ç™½åå•é‡Œæœ€å¿«ï¼šSetã€Arrayã€Enumã€Dictionary è¿˜æ˜¯ switch?</a></h3>
<p>åœ¨ Swift é‡Œï¼Œåˆ¤æ–­ä¸€ä¸ªå­—ç¬¦ä¸²æ˜¯å¦å±äºæŸä¸ªé”®é›†åˆï¼Œå¯ä»¥å†™æˆ <code>Set.contains</code>ã€<code>Array.contains</code>ã€RawRepresentable enum çš„ <code>init?(rawValue:)</code>ã€<code>switch</code> å¤šåˆ†æ”¯ï¼Œç”šè‡³ç”¨ <code>Dictionary</code> æ¥åšæ˜ å°„ã€‚çœ‹èµ·æ¥å·®åˆ«ä¸å¤§ï¼Œä½†çœŸè¦æ”¾è¿›æ€§èƒ½æ•æ„Ÿè·¯å¾„ï¼Œç»“æœå¯èƒ½å¹¶ä¸å®Œå…¨ç¬¦åˆç›´è§‰ã€‚<a href="https://link.juejin.cn?target=https%3A%2F%2Fmastodon.social%2F%40helge" target="_blank" title="https://mastodon.social/@helge" ref="nofollow noopener noreferrer">Helge HeÃŸ</a> åšäº†ä¸€æ¬¡ç®€å•çš„åŸºå‡†æµ‹è¯•ï¼š<code>Set.contains</code> æ¯«æ— æ‚¬å¿µåœ°é¢†å…ˆï¼Œå…¶æ¬¡æ˜¯ <code>enum(rawValue:)</code>å’Œ <code>Dictionary</code>ï¼ˆä¸¤è€…éå¸¸æ¥è¿‘ï¼‰ï¼›è€Œå¾ˆå¤šäººä¸‹æ„è¯†ä¼šé«˜ä¼°çš„ <code>switch</code>ï¼Œåè€Œæ’åœ¨ <code>enum</code> ä¹‹åï¼Œ<code>Array.contains</code> åˆ™å«åº•æ”¶åœºã€‚ä½œä¸ºä¸€ä¸ªå°å®éªŒï¼Œè¿™ä¸ªç»“æœæˆ–è®¸æ­£å¥½å¯ä»¥æ‹¿æ¥æ ¡å‡†ä¸€ä¸‹æˆ‘ä»¬å¯¹ Swift æ€§èƒ½çš„ç›´è§‰ã€‚</p>
<hr/>
<h3 data-id="heading-6"><a href="https://link.juejin.cn?target=https%3A%2F%2Fl.fatbobman.com%2Fw0122-01" target="_blank" title="https://l.fatbobman.com/w0122-01" ref="nofollow noopener noreferrer">ä»ä¸€æ¬¡æ€§ä»˜è´¹åˆ° Freemium (Migrating an iOS app from Paid up Front to Freemium)</a></h3>
<p>ä»˜è´¹ä¸‹è½½å’Œå…è´¹ + åº”ç”¨å†…è´­ä¹°æ˜¯ä¸¤ç§æˆªç„¶ä¸åŒçš„å•†ä¸šæ¨¡å¼ï¼Œéšç€åº”ç”¨å‘å±•ï¼Œå¼€å‘è€…å¯èƒ½éœ€è¦åœ¨ä¸¤è€…ä¹‹é—´è½¬æ¢ã€‚<a href="https://link.juejin.cn?target=https%3A%2F%2Fx.com%2Fdonnywals" target="_blank" title="https://x.com/donnywals" ref="nofollow noopener noreferrer">Donny Wals</a> åœ¨æœ¬æ–‡ä¸­åˆ†äº«äº†ä»–å°† Practical Core Data åº”ç”¨ä» $4.99 ä»˜è´¹ä¸‹è½½è½¬ä¸º freemium çš„å®Œæ•´ç»å†ã€‚æ–‡ç« ä¸ä»…æ¶µç›–äº† StoreKit 2 çš„æŠ€æœ¯å®ç°ç»†èŠ‚ï¼ˆè´­ä¹°æµç¨‹ã€çŠ¶æ€ç®¡ç†ã€å®¶åº­å…±äº«ï¼‰ï¼Œæ›´æœ‰ä»·å€¼çš„æ˜¯ä»–å¯¹å•†ä¸šå†³ç­–çš„æ·±å…¥æ€è€ƒï¼šä»˜è´¹é—¨æ§›è™½ç„¶èƒ½ç­›é€‰å‡ºè®¤çœŸçš„ç”¨æˆ·ï¼Œä½†ä¹Ÿé˜»æŒ¡äº†å¤§é‡æ½œåœ¨ç”¨æˆ·ä½“éªŒäº§å“ä»·å€¼çš„æœºä¼šã€‚å¯¹äºæ•™è‚²ç±»æˆ–å·¥å…·ç±»ç‹¬ç«‹åº”ç”¨ï¼Œfreemium å¯èƒ½æ˜¯ç”¨æˆ·å¢é•¿å’Œæ”¶å…¥ä¹‹é—´æ›´å¥½çš„å¹³è¡¡ç‚¹ã€‚</p>
<hr/>
<h3 data-id="heading-7"><a href="https://link.juejin.cn?target=https%3A%2F%2Fl.fatbobman.com%2Fw0122-02" target="_blank" title="https://l.fatbobman.com/w0122-02" ref="nofollow noopener noreferrer">iOS åº”ç”¨ä¸­çš„æŒ‰éœ€èµ„æº (On-demand resources in iOS app)</a></h3>
<p>åº”ç”¨ä½“ç§¯ä¸€ç›´æ˜¯å¼€å‘è€…éœ€è¦å…³æ³¨çš„é—®é¢˜ï¼Œå°¤å…¶æ˜¯åœ¨åº”ç”¨åŒ…å«å¤§é‡å›¾ç‰‡ã€éŸ³é¢‘æˆ–å…¶ä»–èµ„æºæ—¶ã€‚å°½ç®¡è‹¹æœå¾ˆæ—©å°±åœ¨ iOS ä¸­æä¾›äº† On-Demand Resourcesï¼ˆODRï¼‰æ¥åº”å¯¹è¿™ä¸€æŒ‘æˆ˜ï¼Œä½†è¿™ä¸€åŠŸèƒ½çš„å­˜åœ¨æ„Ÿå¹¶ä¸å¼ºï¼Œå¸¸è¢«å¼€å‘è€…å¿½ç•¥ã€‚åœ¨æœ¬æ–‡ä¸­ï¼Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Ftwitter.com%2Fmecid" target="_blank" title="https://twitter.com/mecid" ref="nofollow noopener noreferrer">Majid Jabrayilov</a> ç³»ç»Ÿæ€§åœ°å›é¡¾äº† ODR çš„å·¥ä½œæœºåˆ¶ä¸ä½¿ç”¨æ–¹å¼ï¼ŒåŒ…æ‹¬èµ„æºåˆ†ç»„ã€æ ‡ç­¾ç®¡ç†ã€ä¸‹è½½ç”Ÿå‘½å‘¨æœŸï¼Œä»¥åŠä¸ç³»ç»Ÿç¼“å­˜ç­–ç•¥ä¹‹é—´çš„åä½œå…³ç³»ã€‚</p>
<p>è™½ç„¶è‹¹æœåœ¨æ¨å¹¿ Background Assets ä½œä¸ºæ›´ç°ä»£çš„æ–¹æ¡ˆï¼Œä½† ODR åœ¨éœ€è¦å³æ—¶å“åº”çš„æŒ‰éœ€ä¸‹è½½ã€ç»†ç²’åº¦èµ„æºæ§åˆ¶ç­‰åœºæ™¯ä¸‹ä»æœ‰å…¶ç‹¬ç‰¹ä»·å€¼ã€‚</p>
<hr/>
<h3 data-id="heading-8"><a href="https://link.juejin.cn?target=https%3A%2F%2Fl.fatbobman.com%2Fw0122-03" target="_blank" title="https://l.fatbobman.com/w0122-03" ref="nofollow noopener noreferrer">Observation å››ä¸ªå¸¸è§é™·é˜± (Objectively Better, Observably Trickier)</a></h3>
<p>åœ¨å…¨é¢æ‹¥æŠ± Observation æ¡†æ¶æ—¶ï¼Œå¼€å‘è€…éœ€è¦è­¦æƒ•å…¶å·¥ä½œæœºåˆ¶ä¸ Combine çš„ <code>@Published</code> å¹¶ä¸ç›¸åŒï¼Œç®€å•æ›¿æ¢å¾€å¾€ä¼šå¼•å…¥éšè”½çš„é—®é¢˜ã€‚<a href="https://link.juejin.cn?target=https%3A%2F%2Fx.com%2Fdbolella" target="_blank" title="https://x.com/dbolella" ref="nofollow noopener noreferrer">Danny Bolella</a> æ€»ç»“äº†è¿ç§»è¿‡ç¨‹ä¸­å››ä¸ªå¸¸è§é™·é˜±ï¼š<code>@State</code> æŒæœ‰å¼•ç”¨ç±»å‹æ—¶çš„éæƒ°æ€§åˆå§‹åŒ–ã€åµŒå¥— <code>@Observable</code> å¯¹è±¡å¯¼è‡´çš„æ›´æ–°ä¸¢å¤±ã€æ•°ç»„å…ƒç´ ç»‘å®šæ–¹å¼çš„å˜åŒ–ï¼Œä»¥åŠä¸å…¶ä»–å±æ€§åŒ…è£…å™¨äº§ç”Ÿçš„å†²çªã€‚æ–‡ç« é€šè¿‡æ¸…æ™°çš„ä»£ç ç¤ºä¾‹é€ä¸€ç»™å‡ºè§£å†³æ–¹æ¡ˆï¼Œå¹¶åå¤å¼ºè°ƒä¸€ä¸ªæ ¸å¿ƒåŸåˆ™ï¼šåªæœ‰è§†å›¾å½“å‰æ­£åœ¨è®¿é—®ï¼ˆè°ƒç”¨ getterï¼‰çš„å±æ€§å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæ‰ä¼šè§¦å‘æ›´æ–°ã€‚ç†è§£å¹¶é¡ºåº”è¿™ç§â€œæƒ°æ€§è§‚å¯Ÿâ€çš„æ€ç»´æ–¹å¼ï¼Œæ˜¯æ­£ç¡®ä½¿ç”¨ Observation æ¡†æ¶çš„å…³é”®ã€‚</p>
<hr/>
<h3 data-id="heading-9"><a href="https://link.juejin.cn?target=https%3A%2F%2Fl.fatbobman.com%2Fw0122-04" target="_blank" title="https://l.fatbobman.com/w0122-04" ref="nofollow noopener noreferrer">åœ¨ macOS åº”ç”¨ä¸­å®ç° Open Recent èœå• (Add an Open Recent Menu to a SwiftUI app)</a></h3>
<p>â€œOpen Recentâ€ æ˜¯ macOS åº”ç”¨çš„æ ‡å‡†åŠŸèƒ½ï¼Œä½†å¯¹äº SwiftUI å¼€å‘è€…æ¥è¯´ï¼Œæ­£ç¡®å®ç°è¿™ä¸ªåŠŸèƒ½å¹¶ä¸ç›´è§‚ã€‚åœ¨æœ¬æ–‡ä¸­ï¼Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fmastodon.world%2F%40swiftdevjournal" target="_blank" title="https://mastodon.world/@swiftdevjournal" ref="nofollow noopener noreferrer">Mark Szymczyk</a> é€šè¿‡ä¸€ä¸ªç®€æ´çš„ç¤ºä¾‹ï¼Œå±•ç¤ºäº†å¦‚ä½•åˆ©ç”¨ <code>NSDocumentController</code> ä¸ºåº”ç”¨æ¥å…¥ç³»ç»Ÿçº§çš„æœ€è¿‘æ–‡ä»¶ç®¡ç†èƒ½åŠ›ï¼šè‡ªåŠ¨ç»´æŠ¤åˆ—è¡¨ã€æ›´æ–°èœå•ï¼Œä»¥åŠä¸æ–‡æ¡£ç”Ÿå‘½å‘¨æœŸçš„æ— ç¼åä½œã€‚å¯¹äºæ–‡æ¡£å‹æˆ–å·¥å…·ç±»åº”ç”¨ï¼Œè¿™æ˜¯ä¸€ä¸ªä½æˆæœ¬ã€å´èƒ½æ˜æ˜¾æå‡â€œåŸç”Ÿæ„Ÿâ€çš„ç»†èŠ‚ä¼˜åŒ–ã€‚</p>
<h2 data-id="heading-10">å·¥å…·</h2>
<h3 data-id="heading-11"><a href="https://link.juejin.cn?target=https%3A%2F%2Fl.fatbobman.com%2Fw0122-06" target="_blank" title="https://l.fatbobman.com/w0122-06" ref="nofollow noopener noreferrer">Radioformï¼šä¸€ä¸ªåŸç”Ÿã€å¼€æºçš„ macOS éŸ³é¢‘å‡è¡¡å™¨</a></h3>
<p>macOS ä¸€ç›´ç¼ºå°‘ç³»ç»Ÿçº§çš„éŸ³é¢‘å‡è¡¡å™¨ï¼Œç”± <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.linkedin.com%2Fin%2Fmatthew-porteous-23847a2b2%2F" target="_blank" title="https://www.linkedin.com/in/matthew-porteous-23847a2b2/" ref="nofollow noopener noreferrer">Matthew Porteous</a> å¼€å‘çš„ Radioform å¡«è¡¥äº†è¿™ä¸ªç©ºç™½ã€‚è¯¥é¡¹ç›®é‡‡ç”¨ SwiftUI èœå•æ  App + Swift Host + CoreAudio HAL Driver + C++ DSP çš„åˆ†å±‚æ¶æ„ï¼ŒæŠŠ UI ä¸å®æ—¶éŸ³é¢‘å¤„ç†å½»åº•è§£è€¦ã€‚DSP éƒ¨åˆ†å®ç°äº† 10 æ®µå‚æ•° EQã€å‚æ•°å¹³æ»‘ã€é™å¹…ä¸å®æ—¶å®‰å…¨æ§åˆ¶ï¼›å·¥ç¨‹ä¸Šä¹Ÿæœ‰å®Œæ•´ CIã€ç­¾åå…¬è¯ä¸ DMG å‘å¸ƒæµç¨‹ã€‚ä¸æ˜¯â€œèƒ½è·‘å°±è¡Œâ€çš„ Demoï¼Œè€Œæ˜¯æ¥è¿‘å¯é•¿æœŸç»´æŠ¤çš„ç”Ÿäº§çº§éŸ³é¢‘å·¥ç¨‹æ ·æ¿ã€‚</p>
<hr/>
<h3 data-id="heading-12"><a href="https://link.juejin.cn?target=https%3A%2F%2Fl.fatbobman.com%2Fw0122-07" target="_blank" title="https://l.fatbobman.com/w0122-07" ref="nofollow noopener noreferrer">CircuitProï¼šmacOS åŸç”Ÿçš„ PCB è®¾è®¡å·¥å…·</a></h3>
<p>è¿™æ˜¯ä¸€ä¸ª macOS åŸç”Ÿåº”ç”¨è¾ƒå°‘æ¶‰è¶³çš„é¢†åŸŸï¼šPCB è®¾è®¡ã€‚CircuitPro æ˜¯ä¸€æ¬¾é¢å‘ macOS çš„ PCB EDA å·¥å…·ï¼Œç›®æ ‡æ˜¯æŠŠåŸç†å›¾ã€å¸ƒå±€ä¸å…ƒä»¶åº“æµç¨‹åšæˆæ›´ç¬¦åˆ Apple å¹³å°ä¹ æƒ¯çš„ä½“éªŒã€‚ï¼ˆé¡¹ç›®ä»å¤„äºæ—©æœŸå¼€å‘é˜¶æ®µï¼‰</p>
<p>é¡¹ç›®é‡Œæœ€å¸å¼•æˆ‘çš„æ˜¯è‡ªç ”çš„ CanvasKitã€‚å®ƒæ›´åƒä¸€ä¸ªé¢å‘ EDA åœºæ™¯çš„ 2D äº¤äº’å¼•æ“ï¼Œè€Œä¸åªæ˜¯æ™®é€šç”»å¸ƒç»„ä»¶ï¼šä¸Šå±‚æ˜¯å£°æ˜å¼ <code>CanvasView</code>ï¼Œä¸­å±‚æ˜¯çŠ¶æ€ä¸­æ¢ <code>CanvasController</code>ï¼Œåº•å±‚æ˜¯è¾“å…¥è·¯ç”±ã€æ¸²æŸ“æ ‘ä¸å·¥å…·ç³»ç»Ÿã€‚æ›´å…³é”®çš„æ˜¯ï¼Œå¸é™„ã€è¾“å…¥å¤„ç†ã€è¿çº¿å¼•æ“éƒ½è¢«åšæˆäº†åè®®åŒ–æ’æ‹”ç‚¹ï¼Œè®©åŸç†å›¾å’Œå¸ƒå±€å…±äº«åŒä¸€åŸºç¡€è®¾æ–½ï¼ŒåŒæ—¶ä¿ç•™å„è‡ªçš„è·¯ç”±è§„åˆ™ã€‚</p>
<p>å³ä¾¿ä½ å¯¹ PCB è®¾è®¡æœ¬èº«ä¸æ„Ÿå…´è¶£ï¼ŒCircuitPro ä¹Ÿå¾ˆå€¼å¾—å…³æ³¨ï¼Œå°¤å…¶æ˜¯å®ƒåœ¨ SwiftUI + AppKit èåˆæ¶æ„ä¸Šçš„å·¥ç¨‹å®è·µã€‚</p>
<h2 data-id="heading-13">æ±‚è´¤</h2>
<h3 data-id="heading-14"><a href="https://link.juejin.cn?target=mailto%3Axx2bab%40gmail.com" target="_blank" title="mailto:xx2bab@gmail.com" ref="nofollow noopener noreferrer">äº†è§£äºŒæ¬¡å…ƒçš„ iOS å·¥ç¨‹å¸ˆ</a></h3>
<p>æœ¬å…¬å¸æ˜¯äºŒæ¬¡å…ƒæ–‡ç”Ÿå›¾å¤´éƒ¨ä¼ä¸šï¼ˆæ€»éƒ¨æ–°åŠ å¡ï¼‰ï¼Œæ‹›è˜å²—ä½ä¸ºå¤§é™†å…¨èŒ remoteã€‚æ±‚èŒè€…éœ€è¦äº†è§£äºŒæ¬¡å…ƒæ–‡åŒ–ï¼Œæ‡‚å¾—äºŒæ¬¡å…ƒç”¨è¯­ï¼ˆé»‘è¯ï¼‰ã€‚</p>
<h4 data-id="heading-15">å²—ä½èŒè´£ (Responsibilities):</h4>
<ul>
<li>
<p>æˆ‘ä»¬æ­£åœ¨å¯»æ‰¾ä¸€ä½ç»éªŒä¸°å¯Œçš„ iOS å·¥ç¨‹å¸ˆï¼ˆä¸­é«˜çº§ï¼‰ï¼Œè´Ÿè´£ä¸»å¯¼æˆ‘ä»¬ iOS åº”ç”¨çš„å¼€å‘ä¸ä¼˜åŒ–å·¥ä½œã€‚</p>
</li>
<li>
<p>ç†æƒ³çš„å€™é€‰äººåº”å…·å¤‡æ·±åšçš„ Swift æŠ€æœ¯åŠŸåº•ï¼Œå‡ºè‰²çš„æµ‹è¯•ä¸å›¢é˜Ÿåä½œèƒ½åŠ›ï¼Œå¹¶æ‹¥æœ‰ç°ä»£ iOS æ¶æ„åŠå·¥å…·é“¾çš„å®æˆ˜ç»éªŒã€‚</p>
</li>
</ul>
<h4 data-id="heading-16">ä»»èŒè¦æ±‚ (Requirements):</h4>
<ul>
<li>
<p><strong>3 å¹´ä»¥ä¸Š iOS å¼€å‘ç»éªŒ</strong>ï¼Œä¸»è¦ä½¿ç”¨ Swiftï¼ŒåŒæ—¶å…·å¤‡ä¸€å®šçš„ Objective-C ä»£ç ç»´æŠ¤èƒ½åŠ›ã€‚</p>
</li>
<li>
<p><strong>è‡³å°‘ 1 å¹´çš„ SwiftUI å’Œ SPM (Swift Package Manager) å®æˆ˜ç»éªŒ</strong>ï¼Œç†Ÿæ‚‰å…¶ç”Ÿæ€ç³»ç»ŸåŠæœ€ä½³å®è·µã€‚</p>
</li>
<li>
<p><strong>ç†Ÿæ‚‰ iOS 15+ æ–°ç‰¹æ€§</strong>ï¼Œèƒ½å¤Ÿé’ˆå¯¹ä¸åŒçš„ iOS ç‰ˆæœ¬å’Œè®¾å¤‡å±å¹•å°ºå¯¸è¿›è¡Œé€‚é…åŠæ€§èƒ½ä¼˜åŒ–ã€‚</p>
</li>
<li>
<p><strong>æŒæ¡å•å…ƒæµ‹è¯•å’Œ UI è‡ªåŠ¨åŒ–æµ‹è¯•</strong> (XCTest, XCUITest)ï¼Œæœ‰èƒ½åŠ›ç¼–å†™å¯ç»´æŠ¤çš„ä»£ç ï¼Œä»¥ç¡®ä¿é¡¹ç›®çš„ç¨³å®šæ€§å’Œå¯æ‰©å±•æ€§ã€‚</p>
</li>
<li>
<p><strong>ç²¾é€š Git å·¥ä½œæµ</strong>ï¼ˆGit Flow, ä¸»å¹²å¼€å‘/Trunk-Based Developmentï¼‰ï¼Œå¹¶å…·å¤‡åŸºæœ¬çš„ä»£ç å®¡æŸ¥ (Code Review) æŠ€èƒ½ã€‚</p>
</li>
<li>
<p><strong>ç†è§£åŸºç¡€çš„ iOS åº”ç”¨æ¨¡å—åŒ–è®¾è®¡ã€å¤šç§å•é¡µé¢æ¶æ„æ¨¡å¼</strong>ä»¥åŠæ€§èƒ½ä¼˜åŒ–æ–¹æ³•ï¼Œå¹¶å…·å¤‡åœ¨é¡¹ç›®ä¸­è½åœ°çš„èƒ½åŠ›ã€‚</p>
</li>
</ul>
<h4 data-id="heading-17"><strong>åŠ åˆ†é¡¹/ä¼˜å…ˆè€ƒè™‘ (We will give priority to who):</strong></h4>
<ul>
<li>
<p><strong>æ‹¥æœ‰è·¨å¹³å°å¼€å‘ç»éªŒ</strong>ï¼ˆæ»¡è¶³ä»¥ä¸‹ä»»æ„ä¸€é¡¹å³å¯ï¼‰ï¼š</p>
</li>
<li>
<p>6 ä¸ªæœˆä»¥ä¸Šçš„ä»»æ„å‰ç«¯æŠ€æœ¯æ ˆç»éªŒ (TypeScript/JavaScript, React, React Native)ã€‚</p>
</li>
<li>
<p>6 ä¸ªæœˆä»¥ä¸Šä½¿ç”¨ Kotlin åŠç›¸å…³æ¡†æ¶çš„ Android å¼€å‘ç»éªŒã€‚</p>
</li>
<li>
<p>6 ä¸ªæœˆä»¥ä¸Šçš„ä»»æ„åç«¯å¼€å‘æ¡†æ¶ç»éªŒã€‚</p>
</li>
<li>
<p><strong>æ‹¥æœ‰è‡³å°‘ 6 ä¸ªæœˆçš„ iOS åŸºç¡€è®¾æ–½å·¥å…·æˆ–æ¡†æ¶æ­å»ºç»éªŒ</strong>ï¼ŒåŒ…æ‹¬ä»£ç è´¨é‡æå‡ï¼ˆLinting, é™æ€åˆ†æ, CI/CDï¼‰ã€æ•ˆç‡ä¼˜åŒ–ï¼ˆæ¨¡å—åŒ–ï¼ŒGradle ç»„ä»¶åŒ–*ï¼‰ã€ä»¥åŠæ€§èƒ½è°ƒä¼˜ï¼ˆå¯åŠ¨é€Ÿåº¦ã€å¸§ç‡ã€ç¦»çº¿æ¨¡å¼ã€å¤šçº¿ç¨‹ï¼‰ã€‚</p>
</li>
<li>
<p><strong>æ‹¥æœ‰ 1 å¹´ä»¥ä¸Š SDK å¼€å‘ç»éªŒ</strong>ï¼ŒåŒ…æ‹¬é€šç”¨åº“å¼€å‘ï¼Œå¦‚å›¾ç‰‡åŠ è½½åº“ (SDWebImage, Kingfisher)ã€å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ã€ç½‘ç»œå±‚æˆ–æŒä¹…åŒ–å±‚ (SQLite, Realm, Core Data)ã€‚</p>
</li>
<li>
<p><strong>å…·å¤‡ UI/UX ç›¸å…³ç»éªŒ</strong>ï¼š</p>
</li>
<li>
<p>ç†Ÿæ‚‰ Apple äººæœºäº¤äº’æŒ‡å— (HIG)ï¼Œèƒ½å¤Ÿåœ¨ç†è§£è·¨å¹³å°è®¾è®¡å·®å¼‚çš„åŒæ—¶ï¼Œå®ç°ç¬¦åˆ Apple è®¾è®¡æ ‡å‡†çš„ UIã€‚</p>
</li>
<li>
<p>æ‹¥æœ‰æ‰å®çš„åŠ¨ç”»å’Œäº¤äº’åŠ¨æ•ˆå¼€å‘ç»éªŒï¼Œç†Ÿæ‚‰ Core Animation, UIKit Dynamics ç­‰ã€‚</p>
</li>
<li>
<p>æœ‰<strong>æ·±è‰²æ¨¡å¼ (Dark Mode)</strong> åŠä¸»é¢˜åˆ‡æ¢åŠŸèƒ½çš„å¼€å‘ç»éªŒã€‚</p>
</li>
<li>
<p><strong>å…·å¤‡æå¼ºçš„å®¡ç¾æ„ŸçŸ¥åŠ›</strong>ï¼Œæ‹¥æœ‰ç»˜ç”»ã€æ‘„å½±æˆ–è®¾è®¡ç›¸å…³çš„æŠ€èƒ½æˆ–çˆ±å¥½ï¼ˆé™„å¸¦ä½œå“é›†è€…ä¼˜å…ˆï¼‰ã€‚</p>
</li>
<li>
<p><strong>æ‹¥æœ‰å®Œæ•´çš„ App ç”Ÿå‘½å‘¨æœŸç»éªŒ</strong>ï¼šæ›¾ç‹¬ç«‹å¼€å‘ã€å‘å¸ƒå¹¶ç»´æŠ¤è¿‡æ”¯æŒå¤šå›½/å¤šè¯­è¨€çš„ iOS åº”ç”¨ã€‚</p>
</li>
<li>
<p><strong>ç§¯æå‚ä¸æŠ€æœ¯ç¤¾åŒº</strong>ï¼Œä¾‹å¦‚ï¼š</p>
</li>
<li>
<p>å…·æœ‰ä¸»åŠ¨å­¦ä¹ å’Œåˆ†äº«çš„å¿ƒæ€ï¼Œæœ‰è¿›è¡ŒæŠ€æœ¯æ¼”è®²çš„ç»éªŒã€‚</p>
</li>
<li>
<p>æœ‰æŠ€æœ¯å†™ä½œç»éªŒï¼ˆåšå®¢ã€æ–‡ç« ï¼‰ã€‚</p>
</li>
<li>
<p>æœ‰å¼€æºé¡¹ç›®è´¡çŒ®ç»å†ã€‚</p>
</li>
<li>
<p><strong>æœ‰ä½¿ç”¨ AI ç¼–ç¨‹å·¥å…·çš„ç»éªŒ</strong>ï¼Œå¦‚ Claude, ChatGPT, GitHub Copilot, Cursor æˆ– Windsurfã€‚</p>
</li>
<li>
<p><strong>å…·å¤‡æµåˆ©çš„è‹±è¯­æ²Ÿé€šèƒ½åŠ›æˆ–æŒæœ‰æ—¥è¯­ N2 è¯ä¹¦ã€‚</strong></p>
</li>
</ul>
<h4 data-id="heading-18">è”ç³»äºº</h4>
<p><a href="https://link.juejin.cn?target=mailto%3Axx2bab%40gmail.com" target="_blank" title="mailto:xx2bab@gmail.com" ref="nofollow noopener noreferrer">xx2bab@gmail.com</a></p>
<h2 data-id="heading-19">å¾€æœŸå†…å®¹</h2>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fhttps%3A%2F%2Ffatbobman.com%2Fzh%2Fweekly%2Fissue-121%2F" target="_blank" title="https://https://fatbobman.com/zh/weekly/issue-121/" ref="nofollow noopener noreferrer">å˜å¹»çš„å…‰å½±ï¼Œä¸å˜çš„å¹²è‰å †- #121</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ffatbobman.com%2Fzh%2Fweekly%2Fissue-120%2F" target="_blank" title="https://fatbobman.com/zh/weekly/issue-120/" ref="nofollow noopener noreferrer">Skip å¼€æºï¼šä»â€œå–å·¥å…·â€åˆ°â€œå–ä¿¡ä»»â€çš„è±ªèµŒ - #120</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ffatbobman.com%2Fzh%2Fweekly%2Fissue-119%2F" target="_blank" title="https://fatbobman.com/zh/weekly/issue-119/" ref="nofollow noopener noreferrer">ä» Anthropic å°æ€ä¸è‹¹æœè°·æ­Œç»“ç›Ÿï¼Œçœ‹ AI æŠ¤åŸæ²³çš„æ„å»º - #119</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ffatbobman.com%2Fzh%2Fweekly%2Fissue-118%2F" target="_blank" title="https://fatbobman.com/zh/weekly/issue-118/" ref="nofollow noopener noreferrer">AT çš„äººç”Ÿæœªå¿…æ¯” MT æ›´å¥½- #118</a></li>
</ul>
<h2 data-id="heading-20">ğŸ’ æ”¯æŒä¸åé¦ˆ</h2>
<p>å¦‚æœæœ¬æœŸå‘¨æŠ¥å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ï¼š</p>
<ul>
<li>ğŸ‘ <strong>ç‚¹èµ</strong> - è®©æ›´å¤šå¼€å‘è€…çœ‹åˆ°</li>
<li>ğŸ’¬ <strong>è¯„è®º</strong> - åˆ†äº«ä½ çš„çœ‹æ³•æˆ–é—®é¢˜</li>
<li>ğŸ”„ <strong>è½¬å‘</strong> - å¸®åŠ©åŒè¡Œå…±åŒæˆé•¿</li>
</ul>
<hr/>
<blockquote>
<p>ğŸš€ <strong>æ‹“å±• Swift è§†é‡</strong></p>
<ul>
<li><strong>ğŸ“® é‚®ä»¶è®¢é˜…</strong> | <a href="https://link.juejin.cn?target=https%3A%2F%2Fweekly.fatbobman.com%2Fwelcome" target="_blank" title="https://weekly.fatbobman.com/welcome" ref="nofollow noopener noreferrer">weekly.fatbobman.com</a> è·å–ç‹¬å®¶æŠ€æœ¯æ´å¯Ÿ</li>
<li><strong>ğŸ‘¥ å¼€å‘è€…ç¤¾åŒº</strong> | <a href="https://link.juejin.cn?target=https%3A%2F%2Fdiscord.com%2Finvite%2F7FedN5E2QQ" target="_blank" title="https://discord.com/invite/7FedN5E2QQ" ref="nofollow noopener noreferrer">Discord</a> å®æ—¶äº¤æµå¼€å‘ç»éªŒ</li>
<li><strong>ğŸ“š åŸåˆ›æ•™ç¨‹</strong> | <a href="https://link.juejin.cn?target=http%3A%2F%2Ffatbobman.com" target="_blank" title="http://fatbobman.com" ref="nofollow noopener noreferrer">fatbobman.com</a> å­¦ä¹  Swift/SwiftUI æœ€ä½³å®è·µ</li>
</ul>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[mcpå­¦ä¹ ç¬”è®°ï¼ˆä¸€ï¼‰-mcpæ ¸å¿ƒæ¦‚å¿µæ¢³ç†]]></title>    <link>https://juejin.cn/post/7604693038439022598</link>    <guid>https://juejin.cn/post/7604693038439022598</guid>    <pubDate>2026-02-09T17:14:40.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604693038439022598" data-draft-id="7604693038439006214" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="mcpå­¦ä¹ ç¬”è®°ï¼ˆä¸€ï¼‰-mcpæ ¸å¿ƒæ¦‚å¿µæ¢³ç†"/> <meta itemprop="keywords" content="LLM,MCP,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-02-09T17:14:40.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Shawn_Shawn"/> <meta itemprop="url" content="https://juejin.cn/user/1855631358965384"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            mcpå­¦ä¹ ç¬”è®°ï¼ˆä¸€ï¼‰-mcpæ ¸å¿ƒæ¦‚å¿µæ¢³ç†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1855631358965384/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Shawn_Shawn
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-09T17:14:40.000Z" title="Mon Feb 09 2026 17:14:40 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong>Model Context Protocol (MCP)</strong> ï¼Œå³<strong>æ¨¡å‹ä¸Šä¸‹æ–‡åè®®</strong>ï¼Œæ˜¯ä¸€ä¸ª<strong>å¼€æ”¾æ ‡å‡†å’Œå¼€æºæ¡†æ¶</strong>ï¼Œæ—¨åœ¨ä¸ºå¤§å‹è¯­è¨€æ¨¡å‹ï¼ˆLLMsï¼‰åº”ç”¨æä¾›ä¸€ä¸ªæ ‡å‡†åŒ–çš„æ¥å£ï¼Œä½¿å…¶èƒ½å¤Ÿ<strong>æ— ç¼é›†æˆå’Œäº¤äº’</strong>å¤–éƒ¨æ•°æ®æºã€å·¥å…·å’Œç³»ç»Ÿã€‚</p>
<p>å…¶ä¸»è¦ä½œç”¨ä¸ºï¼š</p>
<ol>
<li>æä¾›æ ‡å‡†åŒ–æ¥å£ï¼Œè®©LLMsï¼ˆæˆ–åŸºäºLLMsæ„å»ºçš„AIä»£ç†ï¼‰èƒ½å¤Ÿè¿æ¥åˆ°å„ç§å¤–éƒ¨èµ„æºï¼Œå¦‚æ•°æ®åº“ï¼Œæ–‡ä»¶ç³»ç»Ÿï¼ŒService Apiï¼Œçˆ¬è™«ç­‰èµ„æºï¼Œè·å–åˆ°æ•°æ®ã€‚</li>
<li>LLMså¯ä»¥å®æ—¶ä¸mcp<strong>åŒå‘äº¤äº’</strong>ï¼ŒåŠæ—¶æ›´æ–°LLMä¸­çš„ä¸Šä¸‹æ–‡ä¿¡æ¯å¹¶èƒ½å¤Ÿå³æ—¶æ‰§è¡ŒLLMå‘å‡ºçš„æŒ‡ä»¤ï¼Œå®Œæˆä»»åŠ¡ã€‚</li>
<li><strong>è§£å†³ç¢ç‰‡åŒ–</strong>ï¼šç»Ÿä¸€ä¸åŒLLMå’ŒæœåŠ¡çš„äº¤äº’æ–¹å¼ï¼Œèƒ½å¤Ÿçµæ´»åˆ‡æ¢ä¸åŒçš„ LLM æä¾›å•†å’Œå‚å•†ï¼Œç®€åŒ–äº†å¼€å‘äººå‘˜æ„å»ºAIåº”ç”¨æˆ–å°†AIåŠŸèƒ½é›†æˆåˆ°ç°æœ‰ç³»ç»Ÿä¸­çš„å¤æ‚æ€§ã€‚</li>
<li><strong>æ•°æ®å®‰å…¨</strong>ï¼šåœ¨ä½ çš„åŸºç¡€è®¾æ–½å†…å®‰å…¨åœ°å¤„ç†æ•°æ®</li>
</ol>
<h2 data-id="heading-0">mcpæ¶æ„</h2>
<h3 data-id="heading-1">è§’è‰²</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/69c9914f39004c2b8504b4e623b49cf6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2hhd25fU2hhd24=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771262081&amp;x-signature=vOaC%2Bg%2BusyutoM3xIN7lhNSAz7w%3D" alt="" loading="lazy"/></p>
<p>MCP æ ¸å¿ƒé‡‡ç”¨å®¢æˆ·ç«¯-æœåŠ¡å™¨æ¶æ„</p>
<ul>
<li><strong>MCP Hosts</strong>: å¦‚ Claude Desktopã€IDE æˆ– AI å·¥å…·ï¼Œå¸Œæœ›é€šè¿‡ MCP è®¿é—®æ•°æ®çš„ç¨‹åº</li>
<li><strong>MCP Clients</strong>: ç»´æŠ¤ä¸æœåŠ¡å™¨ä¸€å¯¹ä¸€è¿æ¥çš„åè®®å®¢æˆ·ç«¯</li>
<li><strong>MCP Servers</strong>: è½»é‡çº§ç¨‹åºï¼Œé€šè¿‡æ ‡å‡†çš„ Model Context Protocol æä¾›ç‰¹å®šèƒ½åŠ›ä¸º clients æä¾›resourcesã€tools å’Œ prompts</li>
</ul>
<h3 data-id="heading-2">åˆ†å±‚</h3>
<h4 data-id="heading-3">æ•°æ®å±‚</h4>
<p>æ•°æ®å±‚å®ç°äº†ä¸€ä¸ªåŸºäº JSON-RPC 2.0 çš„äº¤äº’åè®®ï¼Œå…¶ä¸»è¦ä½œç”¨æ˜¯å®šä¹‰ MCP å®¢æˆ·ç«¯å’Œ MCP æœåŠ¡ç«¯ä¹‹é—´çš„æ¶æ„å’Œè¯­ä¹‰ã€‚</p>
<ul>
<li><strong>ç”Ÿå‘½å‘¨æœŸç®¡ç†</strong>ï¼šå¤„ç†å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ä¹‹é—´çš„è¿æ¥åˆå§‹åŒ–ã€èƒ½åŠ›åå•†å’Œè¿æ¥ç»ˆæ­¢</li>
<li><strong>æ ¸å¿ƒæºè¯­</strong>ï¼šå®šä¹‰äº†å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯å¯ä»¥ç›¸äº’æä¾›çš„å†…å®¹ã€‚è¿™äº›åŸè¯­æŒ‡å®šäº†å¯ä»¥ä¸ AI åº”ç”¨å…±äº«çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ç±»å‹ä»¥åŠå¯ä»¥æ‰§è¡Œçš„æ“ä½œèŒƒå›´ã€‚</li>
<li><strong>å®ç”¨ç‰¹æ€§</strong>ï¼šæ”¯æŒé¢å¤–åŠŸèƒ½ï¼Œå¦‚ç”¨äºå®æ—¶æ›´æ–°çš„â€œé€šçŸ¥â€å’Œç”¨äºé•¿æ—¶é—´è¿è¡Œæ“ä½œçš„â€œè¿›åº¦è·Ÿè¸ªâ€</li>
</ul>
<h5 data-id="heading-4">ç”Ÿå‘½å‘¨æœŸç®¡ç†</h5>
<p>MCP æ˜¯ä¸€ä¸ªæœ‰çŠ¶æ€åè®®éœ€è¦ç”Ÿå‘½å‘¨æœŸç®¡ç†ã€‚ç”Ÿå‘½å‘¨æœŸç®¡ç†çš„ç›®çš„æ˜¯åå•†å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯éƒ½æ”¯æŒçš„èƒ½åŠ›ã€‚</p>
<h5 data-id="heading-5">æ ¸å¿ƒæºè¯­</h5>
<h6 data-id="heading-6">Serverå±‚æºè¯­</h6>
<ul>
<li><strong>å·¥å…· (Tools)</strong> ï¼šAI åº”ç”¨å¯ä»¥è°ƒç”¨ä»¥æ‰§è¡Œæ“ä½œçš„å¯æ‰§è¡Œå‡½æ•°ï¼ˆä¾‹å¦‚ï¼šæ–‡ä»¶æ“ä½œã€API è°ƒç”¨ã€æ•°æ®åº“æŸ¥è¯¢ï¼‰</li>
<li><strong>èµ„æº (Resources)</strong> ï¼šä¸º AI åº”ç”¨æä¾›ä¸Šä¸‹æ–‡ä¿¡æ¯çš„æ•°æ®æºï¼ˆä¾‹å¦‚ï¼šæ–‡ä»¶å†…å®¹ã€æ•°æ®åº“è®°å½•ã€API å“åº”ï¼‰</li>
<li><strong>æç¤ºè¯ (Prompts)</strong> ï¼šå¸®åŠ©æ„å»ºä¸è¯­è¨€æ¨¡å‹äº¤äº’çš„å¯é‡ç”¨æ¨¡æ¿ï¼ˆä¾‹å¦‚ï¼šç³»ç»Ÿæç¤ºè¯ã€å°‘æ ·æœ¬ç¤ºä¾‹ï¼‰</li>
</ul>
<p>æ¯ç§åŸè¯­ç±»å‹éƒ½æœ‰å…³è”çš„å‘ç° (<code> */list</code>)ã€è·å– (<code> */get</code>) ä»¥åŠåœ¨æŸäº›æƒ…å†µä¸‹çš„æ‰§è¡Œ (<code>tools/call</code>) æ–¹æ³•ã€‚MCP å®¢æˆ·ç«¯å°†ä½¿ç”¨ <code>*/list</code> æ–¹æ³•æ¥å‘ç°å¯ç”¨çš„åŸè¯­ã€‚ä¾‹å¦‚ï¼Œå®¢æˆ·ç«¯å¯ä»¥å…ˆåˆ—å‡ºæ‰€æœ‰å¯ç”¨å·¥å…· (<code>tools/list</code>) ç„¶åæ‰§è¡Œå®ƒä»¬ã€‚è¿™ç§è®¾è®¡å…è®¸åˆ—è¡¨æ˜¯åŠ¨æ€çš„ã€‚</p>
<h6 data-id="heading-7">Clientå±‚æºè¯­</h6>
<ul>
<li><strong>é‡‡æ · (Sampling)</strong> ï¼šå…è®¸æœåŠ¡ç«¯è¯·æ±‚å®¢æˆ·ç«¯ AI åº”ç”¨è¿›è¡Œè¯­è¨€æ¨¡å‹è¡¥å…¨ã€‚å½“æœåŠ¡ç«¯ä½œè€…æƒ³è¦è®¿é—®è¯­è¨€æ¨¡å‹ï¼Œä½†å¸Œæœ›ä¿æŒæ¨¡å‹ç‹¬ç«‹ä¸”ä¸æ„¿åœ¨ MCP æœåŠ¡ç«¯ä¸­åŒ…å«è¯­è¨€æ¨¡å‹ SDK æ—¶ï¼Œè¿™éå¸¸æœ‰ç”¨ã€‚ä»–ä»¬å¯ä»¥ä½¿ç”¨ <code>sampling/complete</code> æ–¹æ³•è¯·æ±‚å®¢æˆ·ç«¯ AI åº”ç”¨è¿›è¡Œè¯­è¨€æ¨¡å‹è¡¥å…¨ã€‚</li>
<li><strong>å¼•å¯¼ (Elicitation)</strong> ï¼šå…è®¸æœåŠ¡ç«¯å‘ç”¨æˆ·è¯·æ±‚é¢å¤–ä¿¡æ¯ã€‚å½“æœåŠ¡ç«¯ä½œè€…æƒ³è¦ä»ç”¨æˆ·é‚£é‡Œè·å–æ›´å¤šä¿¡æ¯æˆ–è¯·æ±‚å¯¹æŸé¡¹æ“ä½œçš„ç¡®è®¤æ—¶ï¼Œè¿™éå¸¸æœ‰ç”¨ã€‚ä»–ä»¬å¯ä»¥ä½¿ç”¨ <code>elicitation/request</code> æ–¹æ³•å‘ç”¨æˆ·è¯·æ±‚é¢å¤–ä¿¡æ¯ã€‚</li>
<li><strong>æ—¥å¿—è®°å½• (Logging)</strong> ï¼šä½¿æœåŠ¡ç«¯èƒ½å¤Ÿå‘å®¢æˆ·ç«¯å‘é€æ—¥å¿—æ¶ˆæ¯ï¼Œç”¨äºè°ƒè¯•å’Œç›‘æ§ç›®çš„ã€‚</li>
</ul>
<h5 data-id="heading-8">å®æ—¶ç‰¹æ€§</h5>
<p>è¯¥åè®®æ”¯æŒå®æ—¶é€šçŸ¥ï¼Œä»¥å®ç°æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯ä¹‹é—´çš„åŠ¨æ€æ›´æ–°ã€‚ä¾‹å¦‚ï¼Œå½“æœåŠ¡ç«¯çš„å¯ç”¨å·¥å…·å‘ç”Ÿå˜åŒ–æ—¶â€”â€”æ¯”å¦‚æ–°åŠŸèƒ½ä¸Šçº¿æˆ–ç°æœ‰å·¥å…·è¢«ä¿®æ”¹â€”â€”æœåŠ¡ç«¯å¯ä»¥å‘é€å·¥å…·æ›´æ–°é€šçŸ¥ï¼Œä»¥å‘ŠçŸ¥å·²è¿æ¥çš„å®¢æˆ·ç«¯è¿™äº›å˜åŒ–ã€‚é€šçŸ¥ä»¥ JSON-RPC 2.0 é€šçŸ¥æ¶ˆæ¯çš„å½¢å¼å‘é€ï¼ˆä¸æœŸæœ›å“åº”ï¼‰ï¼Œå¹¶ä½¿ MCP æœåŠ¡ç«¯èƒ½å¤Ÿå‘å·²è¿æ¥çš„å®¢æˆ·ç«¯æä¾›å®æ—¶æ›´æ–°ã€‚</p>
<h4 data-id="heading-9">ä¼ è¾“å±‚</h4>
<p>å®šä¹‰ä½¿å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´å®ç°æ•°æ®äº¤æ¢çš„é€šä¿¡æœºåˆ¶å’Œé€šé“ï¼ŒåŒ…æ‹¬ç‰¹å®šäºä¼ è¾“çš„è¿æ¥å»ºç«‹ã€æ¶ˆæ¯æ¡†æ¶å’Œæˆæƒã€‚æœ‰ä¸¤ä¸ªä¸»æµçš„transportæ–¹å¼ï¼šStdioå’ŒStreamable HTTP transport</p>
<ul>
<li>Stdio transportï¼šä½¿ç”¨æ ‡å‡†è¾“å…¥/è¾“å‡ºæµè¿›è¡ŒåŒä¸€æœºå™¨ä¸Šæœ¬åœ°è¿›ç¨‹ä¹‹é—´çš„ç›´æ¥è¿›ç¨‹é€šä¿¡ï¼Œæä¾›æœ€ä½³æ€§èƒ½è€Œæ²¡æœ‰ç½‘ç»œå¼€é”€ã€‚</li>
<li>Streamable HTTP transportï¼šä½¿ç”¨HTTP POSTè¿›è¡Œå®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ä¹‹é—´çš„æ¶ˆæ¯ä¼ è¾“ï¼Œå¹¶å¯é€‰åœ°ä½¿ç”¨æœåŠ¡å™¨æ¨é€äº‹ä»¶å®ç°æµåª’ä½“åŠŸèƒ½ã€‚è¯¥ä¼ è¾“æ–¹å¼æ”¯æŒè¿œç¨‹æœåŠ¡å™¨é€šä¿¡ï¼Œå¹¶æ”¯æŒåŒ…æ‹¬æŒæœ‰è€…ä»¤ç‰Œã€APIå¯†é’¥å’Œè‡ªå®šä¹‰å¤´åœ¨å†…çš„æ ‡å‡†HTTPèº«ä»½éªŒè¯æ–¹æ³•ã€‚MCPå»ºè®®ä½¿ç”¨OAuthæ¥è·å–èº«ä»½éªŒè¯ä»¤ç‰Œã€‚</li>
</ul>
<h5 data-id="heading-10">Stdio</h5>
<ul>
<li><strong>å®šä¹‰</strong>ï¼šä½¿ç”¨æ ‡å‡†è¾“å…¥/è¾“å‡ºæµè¿›è¡ŒåŒä¸€æœºå™¨ä¸Šæœ¬åœ°è¿›ç¨‹ä¹‹é—´çš„ç›´æ¥è¿›ç¨‹é€šä¿¡ï¼Œæä¾›æœ€ä½³æ€§èƒ½è€Œæ²¡æœ‰ç½‘ç»œå¼€é”€ã€‚</li>
<li><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šLocal Mcp Serverï¼Œä¾‹å¦‚Claude Codeè¿æ¥localfilesystme server</li>
<li><strong>æ ¸å¿ƒä¼˜åŠ¿</strong>ï¼š</li>
</ul>

<ul>
<li>
<ul>
<li><strong>é›¶ç½‘ç»œä¾èµ–</strong>ï¼šæ— éœ€é…ç½®ç½‘ç»œç¯å¢ƒï¼Œé€‚åˆæœ¬åœ°å¼€å‘è°ƒè¯•ã€‚</li>
<li><strong>é«˜å®‰å…¨æ€§</strong>ï¼šæ•°æ®ä»…åœ¨æœ¬åœ°æµè½¬ï¼Œé¿å…è¿œç¨‹æ³„éœ²é£é™©ã€‚</li>
<li><strong>ä½å»¶è¿Ÿ</strong>ï¼šç›´æ¥é€šè¿‡å†…å­˜æˆ–ç®¡é“ä¼ è¾“ï¼Œæ€§èƒ½é«˜æ•ˆã€‚</li>
</ul>
</li>
</ul>

<ul>
<li><strong>å±€é™æ€§ï¼š</strong></li>
</ul>

<ul>
<li>
<ul>
<li><strong>å•è¿›ç¨‹é™åˆ¶</strong>ï¼šæ— æ³•åŒæ—¶å¤„ç†å¤šå®¢æˆ·ç«¯è¯·æ±‚ï¼Œæ‰©å±•æ€§å·®ã€‚</li>
<li><strong>ä»…é™æœ¬åœ°</strong>ï¼šæ— æ³•æ”¯æŒåˆ†å¸ƒå¼æˆ–è¿œç¨‹èµ„æºè®¿é—®ã€‚</li>
</ul>
</li>
</ul>
<h5 data-id="heading-11"><strong>Streamable HTTP</strong></h5>
<ul>
<li><strong>å®šä¹‰</strong>ï¼šä½¿ç”¨HTTP POSTè¿›è¡Œå®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ä¹‹é—´çš„æ¶ˆæ¯ä¼ è¾“ï¼Œå¹¶å¯é€‰åœ°ä½¿ç”¨æœåŠ¡å™¨æ¨é€äº‹ä»¶å®ç°æµåª’ä½“åŠŸèƒ½ã€‚è¯¥ä¼ è¾“æ–¹å¼æ”¯æŒè¿œç¨‹æœåŠ¡å™¨é€šä¿¡ï¼Œå¹¶æ”¯æŒåŒ…æ‹¬æŒæœ‰è€…ä»¤ç‰Œã€APIå¯†é’¥å’Œè‡ªå®šä¹‰å¤´åœ¨å†…çš„æ ‡å‡†HTTPèº«ä»½éªŒè¯æ–¹æ³•ã€‚ã€‚</li>
<li><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šRemote Mcp Serverï¼Œä¾‹å¦‚è¿æ¥é«˜å¾·åœ°å›¾MCP Serverï¼Œè·å–å¤©æ°”çš„MCP Serverç­‰ç­‰</li>
<li><strong>æ ¸å¿ƒä¼˜åŠ¿</strong>ï¼š</li>
</ul>

<ul>
<li>
<ul>
<li><strong>æ— çŠ¶æ€æ”¯æŒ</strong>ï¼šå»ä¸­å¿ƒåŒ–ã€æ— å¼ºåˆ¶è¦æ±‚æŒç»­è¿æ¥ï¼ŒæœåŠ¡å™¨å¯å®Œå…¨æ— çŠ¶æ€è¿è¡Œï¼Œé™ä½è¿ç»´å¤æ‚åº¦ã€‚</li>
<li><strong>åŸºç¡€è®¾æ–½å…¼å®¹</strong>ï¼šä¸CDNã€APIç½‘å…³ã€è´Ÿè½½å‡è¡¡æ— ç¼é›†æˆã€‚</li>
<li><strong>çµæ´»æµå¼å¤„ç†</strong>ï¼šæ”¯æŒæŒ‰éœ€åˆ‡æ¢ä¸ºæµå¼ä¼ è¾“ï¼ˆå¦‚é•¿æ–‡æœ¬ç”Ÿæˆè¿›åº¦æ¨é€ï¼‰ã€‚</li>
</ul>
</li>
</ul>

<ul>
<li><strong>å±€é™æ€§ï¼š</strong></li>
</ul>

<ul>
<li>
<ul>
<li><strong>å®ç°å¤æ‚åº¦</strong>ï¼šéœ€å¤„ç†ä¼šè¯IDå’ŒçŠ¶æ€ç®¡ç†ï¼ˆå¯é€‰ï¼‰ã€‚</li>
</ul>
</li>
</ul>
<h5 data-id="heading-12"><strong>SSE</strong></h5>
<p>å®é™…ä¸Šmcpä¹‹å‰è¿˜æ”¯æŒ<strong>SSE</strong>ï¼Œç°åœ¨å®˜ç½‘ä¸Šå·²ç»æ²¡æœ‰è¯´æ˜äº†ï¼Œä½†æ˜¯å®é™…è¿˜æ˜¯å¯ä»¥ä½¿ç”¨ã€‚</p>
<ul>
<li><strong>å®šä¹‰</strong>ï¼šé€šè¿‡HTTPé•¿è¿æ¥å®ç°è¿œç¨‹é€šä¿¡ã€‚æœåŠ¡å™¨éœ€æä¾›ä¸¤ä¸ªç«¯ç‚¹ï¼š</li>
</ul>

<ul>
<li>
<ul>
<li><strong>/sse</strong>ï¼ˆGETè¯·æ±‚ï¼‰ï¼šå»ºç«‹é•¿è¿æ¥ï¼Œæ¥æ”¶æœåŠ¡å™¨æ¨é€çš„äº‹ä»¶æµã€‚</li>
<li><strong>/messages</strong>ï¼ˆPOSTè¯·æ±‚ï¼‰ï¼šå®¢æˆ·ç«¯å‘é€è¯·æ±‚è‡³è¯¥ç«¯ç‚¹ã€‚</li>
</ul>
</li>
</ul>

<ul>
<li><strong>æ ¸å¿ƒä¼˜åŠ¿</strong></li>
</ul>

<ul>
<li>
<ul>
<li><strong>æ”¯æŒè¿œç¨‹è®¿é—®</strong>ï¼šçªç ´æœ¬åœ°é™åˆ¶ï¼Œé€‚ç”¨äºåˆ†å¸ƒå¼éƒ¨ç½²ã€‚</li>
<li><strong>å®æ—¶æ€§</strong>ï¼šæœåŠ¡å™¨å¯ä¸»åŠ¨æ¨é€äº‹ä»¶ã€‚</li>
</ul>
</li>
</ul>

<ul>
<li><strong>å±€é™æ€§</strong></li>
</ul>

<ul>
<li>
<ul>
<li><strong>é«˜å¯ç”¨æ€§è¦æ±‚</strong>ï¼šæœåŠ¡å™¨å¿…é¡»ä¸€ç›´ä¿æŒä¸€ä¸ªç¨³å®šã€ä¸ä¸­æ–­çš„ <strong>SSE</strong> é•¿è¿æ¥ï¼Œå¦åˆ™é€šä¿¡å°±ä¸­æ–­ï¼Œå¦‚æœä¸­æ–­äº†ï¼Œä¹Ÿæ²¡æœ‰æ–­ç‚¹ç»­è¿çš„èƒ½åŠ›ï¼Œåªèƒ½é‡æ–°å¼€å§‹æ–°çš„è¿æ¥ï¼Œä¹‹å‰çš„ä¸Šä¸‹æ–‡å¯èƒ½ä¼šä¸¢å¤±ã€‚</li>
<li><strong>å•å‘æ€§ç¼ºé™·</strong>ï¼šå®¢æˆ·ç«¯éœ€é€šè¿‡é¢å¤–HTTPè¯·æ±‚å‘é€æ•°æ®ï¼Œæ— æ³•å®ç°åŒå‘æµå¼äº¤äº’ã€‚</li>
<li><strong>å³å°†åºŸå¼ƒ</strong>ï¼šå®é™…ä¸Šmcpä¹‹å‰è¿˜æ”¯æŒ<strong>SSE</strong>ï¼Œç°åœ¨å®˜ç½‘ä¸Šå·²ç»æ²¡æœ‰è¯´æ˜äº†ï¼Œä½†æ˜¯å®é™…è¿˜æ˜¯å¯ä»¥ä½¿ç”¨ã€‚å®˜æ–¹è®¡åˆ’ç”¨Streamable HTTPæ›¿ä»£SSEã€‚</li>
</ul>
</li>
</ul>
<p><strong>SSEä¸Streamableçš„åŒºåˆ«</strong></p>
<ul>
<li><strong>Streamable</strong>ç§»é™¤äº† <code>/sse</code>ç«¯ç‚¹ï¼Œæ‰€æœ‰å®¢æˆ·ç«¯ â†’ æœåŠ¡ç«¯çš„æ¶ˆæ¯éƒ½é€šè¿‡ <code>/message</code>å‘é€</li>
<li><strong>Streamable</strong>çš„æ‰€æœ‰å®¢æˆ·ç«¯ â†’ æœåŠ¡ç«¯çš„è¯·æ±‚éƒ½å¯ä»¥è¢«æœåŠ¡å™¨å‡çº§ä¸º SSEï¼Œä»¥å‘é€é€šçŸ¥æˆ–è¯·æ±‚</li>
<li><strong>Streamable</strong>çš„æœåŠ¡å™¨å¯ä»¥é€‰æ‹©å»ºç«‹ä¼šè¯ ID ä»¥ç»´æŠ¤çŠ¶æ€</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[2025å¹´ç»ˆæ€»ç»“]]></title>    <link>https://juejin.cn/post/7604709514130866222</link>    <guid>https://juejin.cn/post/7604709514130866222</guid>    <pubDate>2026-02-09T16:09:21.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604709514130866222" data-draft-id="7604690250363650057" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="2025å¹´ç»ˆæ€»ç»“"/> <meta itemprop="keywords" content="ç¨‹åºå‘˜,å‰ç«¯,åç«¯"/> <meta itemprop="datePublished" content="2026-02-09T16:09:21.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="leobertlan"/> <meta itemprop="url" content="https://juejin.cn/user/2066737589654327"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            2025å¹´ç»ˆæ€»ç»“
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2066737589654327/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    leobertlan
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-09T16:09:21.000Z" title="Mon Feb 09 2026 16:09:21 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æ—¶å…‰é£é€ï¼Œä¸€å¹´è½¬ç¬å³é€ã€‚æ—¶è¿‘å¹´å…³ï¼Œäº¦å½“é€‚æ—¶æ€»ç»“ï¼Œä»¥æ¢³ç†è¿‡å¾€ã€å±•æœ›æœªæ¥ã€‚</p>
<h2 data-id="heading-0">å·¥ä½œ</h2>
<blockquote>
<p>çªƒä»¥ä¸ºï¼šæœ€ç†æƒ³çš„å·¥ä½œçŠ¶æ€å½“å¦‚æ˜¯ï¼Œæ—¢èƒ½å®Œæˆå·¥ä½œã€åˆ›é€ ä»·å€¼ï¼Œåˆæœ‰åˆé€‚çš„æŒ‘æˆ˜ä¸æˆé•¿ç©ºé—´ï¼Œä¸è§‰æ¯ç‡¥ï¼Œå¸¸æœ‰æ”¶è·ã€‚</p>
</blockquote>
<p>åœ¨å‡ å¹´å‰ï¼Œæˆ‘çš„å·¥ä½œéœ€è¦èšç„¦äºAndroidç§»åŠ¨ç«¯ã€åç«¯å’Œæ¶æ„ï¼Œè‡³å¦‚ä»Šï¼Œå·²ç»å˜æˆï¼šåœ¨åˆé€‚çš„ç›®æ ‡å¹³å°ä¸Šè®¾è®¡ç³»ç»Ÿå®ç°è½¯ä»¶ï¼Œè§£å†³é—®é¢˜åˆ›é€ ä»·å€¼ã€‚é¢†åŸŸçŸ¥è¯†å·²æˆä¸ºæ”¯æ’‘å†³ç­–çš„åŸºçŸ³ï¼Œç¼–ç¨‹è¯­è¨€å·²æˆä¸ºæ­å»ºæ¥¼å°çš„è„šæ‰‹æ¶ã€‚</p>
<p>ä»ä»…äº¤ä»˜å•†ä¸šè½¯ä»¶ï¼Œåˆ°äº¤ä»˜å•†ä¸šè½¯ä»¶&amp;ç§‘ç ”ç”¨é€”è½¯ä»¶&amp;æµ‹è¯•å·¥å…·è½¯ä»¶&amp;ç ”å‘ç”¨æ’ä»¶&amp;æ—¥å¸¸æ•ˆç‡è„šæœ¬ï¼Œè®¾è®¡ç¼–å†™è½¯ä»¶å·²ä¸å†æ˜¯ç›®æ ‡ï¼Œè€Œæ˜¯è¾¾æˆç›®æ ‡çš„æ–¹æ³•ã€‚</p>
<p>ä»ä¸»è¦ä½¿ç”¨kotlin&amp;java&amp;TypeScriptç±»åˆ°ä¸é™äºC++ã€Javaã€Kotlinã€groovyã€python...è¯­è¨€å·²ä¸ºæˆ‘æ‰€ç”¨ï¼Œè€Œæˆ‘ä¸å†å—å…¶æ‰€é™ã€‚</p>
<h3 data-id="heading-1">å·¥ä½œå±•æœ›</h3>
<blockquote>
<p>ä½œè€…æŒ‰ï¼šéšç€AIå´›èµ·ï¼Œåº”å½“æ‹¿èµ·AIæ¥å¯¹ç”Ÿäº§è¿‡ç¨‹è¿›è¡Œé©å‘½ï¼Œè‡´åŠ›äºç¤¾ä¼šç”Ÿäº§åŠ›å˜é©çš„å®å¤§å™äº‹ã€‚è€Œä¸æ˜¯åœ¨èµ„æœ¬å®¶çš„ä»£ç ç¼–å†™è½¦é—´å†…ï¼ŒæŒ‘èµ·ç¨‹åºå‘˜ä¸AIä¹‹é—´çš„æˆ˜äº‰ã€‚</p>
</blockquote>
<blockquote>
<p>ã€Šé»„å¸å†…ç»ã€‹æ›°ï¼šâ€œç”·å­å…«å²è€Œè‚¾æ°”å®ï¼Œå‘é•¿é½¿æ›´ï¼ŒäºŒå…«è‚¾æ°”ç››ï¼Œå¤©ç™¸è‡³ï¼Œç²¾æ°”æº¢æ³»ï¼Œé˜´é˜³å’Œï¼Œæ•…èƒ½æœ‰å­ï¼Œä¸‰å…«è‚¾æ°”å¹³å‡ï¼Œç­‹éª¨åŠ²å¼ºï¼Œæ•…çœŸç‰™ç”Ÿè€Œé•¿æï¼Œå››å…«ç­‹éª¨éš†ç››ï¼Œè‚Œè‚‰æ»¡å£®ï¼Œäº”å…«è‚¾æ°”è¡°ï¼Œå‘å •é½¿æ§ï¼Œå…­å…«é˜³æ°”è¡°ç«­äºä¸Šï¼Œé¢ç„¦ï¼Œå‘é¬“é¢ç™½ï¼Œä¸ƒå…«è‚æ°”è¡°ï¼Œç­‹ä¸èƒ½åŠ¨ï¼Œå¤©ç™¸ç«­ï¼Œç²¾å°‘ï¼Œè‚¾è„è¡°ï¼Œå½¢ä½“çš†æï¼Œå…«å…«åˆ™é½¿å‘å»ã€‚â€</p>
</blockquote>
<p>ç¨‹åºå‘˜çš„å·¥ä½œæœ¬è´¨ä¸Šä»å±äºåŠ³åŠ¨èŒƒç•´ã€‚ä¸ä¼ ç»Ÿä½“åŠ›åŠ³åŠ¨ä¸åŒï¼Œç¨‹åºå‘˜çš„åŠ³åŠ¨æ˜¯æ™ºåŠ›ã€ä½“åŠ›ä¸è½¬æ¢èƒ½åŠ›çš„ä¸‰é‡ç»“åˆã€‚éšç€ç§‘æŠ€è¿›æ­¥ï¼Œä¸‰è€…çš„æ¯”é‡å’Œä½œç”¨ä¹Ÿåœ¨ä¸æ–­å˜åŒ–ã€‚</p>
<p>ä½™å°è§‚è±¡æ£‹ç‰¹å¤§è®¸é“¶å·å¼ˆæ£‹ï¼Œçºµæœ‰â€œä¸–å¤–é«˜äººâ€ä»¥ç®—åŠ›å‹é˜µï¼Œç„¶å…¶ç­¹ç®—ä¹‹ç²¾å¾®ï¼Œå¸ƒå±€ä¹‹æ·±è¿œï¼ŒçŠ¹èƒ½å‡Œé©¾äºæœºå·§ä¹‹ä¸Šã€‚æ˜¯æ•…ï¼Œ<strong>äººä¹‹æ™ºè¯†ï¼Œè´µåœ¨é©¾é©­</strong>ã€‚</p>
<p>ç›–AIä¹‹èƒ½ï¼Œåœ¨äºé€Ÿç®—å¹¿è¯†ï¼Œç„¶å…¶ä¸é€šæƒå˜ï¼Œä¸è¾¾äººæƒ…ï¼›äººä¹‹æ‰€é•¿ï¼Œåœ¨äºæ˜ç†å®¡åŠ¿ï¼ŒæŒä¸­å®ˆæ­£ã€‚æ•…å–„é©­è€…ï¼Œä¸åºŸäººä¹‹ä¸»ä½ï¼Œè€Œå‡AIä¹‹åˆ©å™¨ã€‚</p>
<h2 data-id="heading-2">å­¦ä¹ </h2>
<blockquote>
<p>ä¸–é—´ä¼ è¯´ï¼Œåœ¨æ»‡è¥¿ä¹‹åœ°ï¼Œæœ‰ä¸€åº§äº‘é›¾ç¬¼ç½©çš„å¤§é˜µï¼Œåœ¨é˜µä¸­ï¼Œæœ‰æ—è‘³è•¤ï¼Œæ›°å¾€ç”Ÿæ—ï¼Œèœ‰è£å›½ä¾¿åœ¨æ­¤å¤„ã€‚èœ‰è£å›½äººæœç”Ÿæš®æ­»ï¼Œå´å°†é¡»è‡¾ç”Ÿå‘½å°½æ•°å€¾æ³¨äºæ±‚çŸ¥ä¸åˆ›é€ ã€‚æ™¨å…‰ä¸­è¯ç”Ÿï¼Œæš®è‰²é‡Œæ¶ˆæ•£ï¼Œæ¯ä¸€ç¬éƒ½é•Œåˆ»ç€æ–‡æ˜çš„åˆ»åº¦ã€‚äººç±»åŒæ ·å›°äºç™¾å¹´ä¹‹èº«ï¼Œå´å€Ÿç”±å­¦ä¹ æŒ£è„±æ—¶é—´çš„é”é“¾ã€‚æ¯ä¸€æ¬¡å¯¹çŸ¥è¯†çš„æ¢æ±‚ï¼Œéƒ½æ˜¯å¯¹èœ‰è£ä¹‹èº¯çš„è¶…è¶Šã€‚</p>
</blockquote>
<p>èŠ¸èŠ¸ä¼—ç”Ÿï¼Œæœ‰äººä¸ºäººç±»æ–‡æ˜ä¸å®å¤§å™äº‹è€Œå­¦ä¹ ï¼Œæœ‰äººä¸ºé€‚åº”ç¤¾ä¼šä¸è´£ä»»è´¡çŒ®è€Œå­¦ä¹ ï¼Œæœ‰äººä¸ºä¸ªäººæˆé•¿ä¸è‡ªæˆ‘å®ç°è€Œå­¦ä¹ ã€‚</p>
<p>å»å¹´ï¼Œæˆ‘äº¦åœ¨å·¥ä½œå¯è¾æ•£åˆ°çš„é¢†åŸŸè¿›è¡Œäº†å­¦ä¹ ï¼Œå¦‚ç³»ç»Ÿå·¥ç¨‹ã€RTOSã€åµŒå…¥å¼è½¯ä»¶è®¾è®¡ã€ä¿¡æ¯è®ºã€ç”µè·¯åˆ†æï¼Œæ‰€æ±‚è€…ï¼šæå‡è®¤çŸ¥ä¸æ€ç»´ã€è·å–çŸ¥è¯†ä¸æŠ€èƒ½ã€‚åœ¨26å¹´ï¼Œæˆ‘è®¡åˆ’æŠ•å…¥æ—¶é—´é‡æ–°å­¦ä¹ æ•°å­¦ï¼Œä»¥å¾€åŒ®ä¹å·¥ç¨‹åº”ç”¨ç»éªŒï¼Œå­¦è€Œä¸æ€åˆ™ç½”ï¼Œè‡³å¦‚ä»Šï¼Œæ€è€Œä¸å­¦åˆ™æ®†ã€‚</p>
<h2 data-id="heading-3">é˜…è¯»</h2>
<p>é™¤å»æŠ€æœ¯ç±»ä¹¦ç±ï¼Œå»å¹´å®Œæ•´é˜…è¯»çº¦15æœ¬ä¹¦ç±ï¼Œé¢‡ä¸ºç¹æ‚ï¼Œæ—¢æœ‰ã€Šèµ„æ²»é€šé‰´ã€‹è¿™ç±»åšé‡çš„å²é‰´ï¼Œè¯•å›¾ä»ä¸­å¯»æ‰¾è§„å¾‹ä¸æ´å¯Ÿï¼›ä¹Ÿæœ‰å“²å­¦è‘—ä½œï¼Œäºæ€è¾¨ä¸­é”¤ç‚¼æ€ç»´çš„æ¡†æ¶ä¸æ·±åº¦ï¼›åŒæ—¶ï¼Œåˆé‡æ¸©æ­¥éçƒŸç¬”ä¸‹ç‘°ä¸½çš„æ±Ÿæ¹–ä¸–ç•Œï¼Œåœ¨æ–‡å­¦æƒ³è±¡ä¸­è·å¾—çº¯ç²¹çš„æ„‰æ‚¦ã€‚</p>
<p>é˜…è¯»äºæˆ‘çš„æ„ä¹‰ï¼Œåœ¨äºå…¶éåŠŸåˆ©çš„æ ¸å¿ƒä»·å€¼ï¼š</p>
<ul>
<li>
<p><strong>å®ƒæ˜¯å¿ƒæ€§çš„ç£¨åˆ€çŸ³ã€‚</strong> åœ¨ç¢ç‰‡ä¿¡æ¯ä¸å³æ—¶åé¦ˆå……æ–¥çš„æ—¶ä»£ï¼Œæ²‰æµ¸äºé•¿ç¯‡çš„ã€ç³»ç»Ÿçš„é˜…è¯»ï¼Œæ˜¯å¯¹ä¸“æ³¨åŠ›ä¸è€å¿ƒçš„ä¿®ç‚¼ã€‚ä¸æ²‰é»˜çš„æ–‡å­—å¯¹è¯ï¼Œåœ¨ç¼“æ…¢çš„èŠ‚å¥ä¸­å¯¹æŠ—æµ®èºï¼Œè·å¾—ä¸€ç§æ²‰é™è€Œåšå®çš„å†…åœ¨å®šåŠ›ã€‚</p>
</li>
<li>
<p><strong>å®ƒæ˜¯è¡¨è¾¾çš„è“„æ°´æ± ã€‚</strong> å†å²å™äº‹çš„å®å¤§ã€å“²å­¦æ€è¾¨çš„ç²¾å¯†ã€æ–‡å­¦æç»˜çš„ç”ŸåŠ¨ï¼Œæ— å½¢ä¸­ä¸°å¯Œç€æˆ‘çš„è¯­è¨€åº“ä¸æ€ç»´å±‚æ¬¡ã€‚åœ¨ä¸äººæ·±åº¦æ²Ÿé€šæ—¶ï¼Œé‚£äº›é˜…è¯»ä¸­æ±²å–çš„å…»åˆ†ï¼Œä¼šè‡ªç„¶è€Œç„¶åœ°æµæ·Œå‡ºæ¥ï¼Œè®©æ€æƒ³çš„ä¼ é€’æ›´å‡†ç¡®ï¼Œä¹Ÿæ›´èƒ½æŠµè¾¾äººå¿ƒã€‚</p>
</li>
<li>
<p><strong>å®ƒæ›´æ˜¯ç²¾ç¥çš„æ –æ¯åœ°ã€‚</strong> é˜…è¯»ä¸åŒäºç›®æ ‡æ˜ç¡®çš„å­¦ä¹ ï¼Œå®ƒä¸ç›´æ¥æŒ‡å‘æŠ€èƒ½æˆ–ç­”æ¡ˆã€‚æ˜¯çœ¼ç•Œçš„å¼€é˜”ã€å…±æƒ…èƒ½åŠ›çš„æå‡ã€çœ‹å¾…ä¸–ç•Œä¸äººç”Ÿçš„å¤šç»´è§†è§’ã€‚è®©æˆ‘åœ¨æ¡ˆç‰åŠ³å½¢å¤„ï¼Œå§‹ç»ˆä¿ç•™ç€ä¸€ç‰‡ä¸æ›´å¹¿é˜”äººç±»æ™ºæ…§ç›¸è¿çš„æ˜Ÿç©ºï¼Œå®ˆæŠ¤å†…å¿ƒçš„ç§©åºä¸æ¾„æ˜ã€‚</p>
</li>
</ul>
<h2 data-id="heading-4">å±•æœ›æœªæ¥é“è·¯</h2>
<p>å¤«ç²¾æœ¯è€…ï¼Œå…¶è¦åœ¨ä¸‰ï¼Œä¸€æ›°æ˜é“ï¼ŒäºŒæ›°ç«‹åˆ¶ï¼Œä¸‰æ›°é€šå™¨ã€‚</p>
<p>ä¸æ˜å…¶é“ï¼Œä¸é€šå…¶ç†ï¼Œæ˜¯æ•…çª¥ç‰©ä»¥æœºï¼Œè®ºäº‹ä»¥æ³•ï¼Œæ˜¯ä¸ºæ ¼ç‰©è‡´çŸ¥ï¼›
ä¸ç«‹å…¶åˆ¶ï¼Œä¸æˆå…¶çº¦ï¼Œæ˜¯æ•…è§£ä¹‹å¾ªæ„ï¼Œé™„ä¹‹äºæ¶ï¼Œæ˜¯ä¸ºçº²ä¸¾ç›®å¼ ï¼›
ä¸é€šå…¶å™¨ï¼Œä¸é€ å…¶ç‰©ï¼Œæ˜¯æ•…æ‰§è§„ä»¥åœ†ï¼Œè¿æ–¤æˆé£ï¼Œæ˜¯ä¸ºå¾—å¿ƒåº”æ‰‹ï¼›</p>
<p>ç¨‹åºå‘˜çš„æŒç»­æˆé•¿ï¼Œåº”å½“ç€çœ¼äºï¼šæå‡å¯¹äºäº‹ç‰©è¿è½¬è§„å¾‹çš„è§è§£ï¼Œæå‡æè¿°äº‹ç‰©çš„å‡†ç¡®æ€§ï¼Œæå‡æ„å»ºç³»ç»Ÿçš„èƒ½åŠ›ï¼Œæ‰©å±•è¿ç”¨è¯­è¨€å’Œå·¥å…·çš„èƒ½åŠ›ï¼Œç±æ­¤æ‹¥æœ‰å¼ºå¤§çš„è®¾è®¡ç³»ç»Ÿå®ç°è½¯ä»¶ä»¥è§£å†³é—®é¢˜åˆ›é€ ä»·å€¼çš„èƒ½åŠ›ã€‚</p>
<pre><code class="hljs"/></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Ralph Loop è®©Claudeæ— æ­¢å°½å¹²æ´»çš„ç‰›é©¬...]]></title>    <link>https://juejin.cn/post/7604493165328629794</link>    <guid>https://juejin.cn/post/7604493165328629794</guid>    <pubDate>2026-02-09T15:04:30.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604493165328629794" data-draft-id="7604522883486777378" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Ralph Loop è®©Claudeæ— æ­¢å°½å¹²æ´»çš„ç‰›é©¬..."/> <meta itemprop="keywords" content="åç«¯,å‰ç«¯"/> <meta itemprop="datePublished" content="2026-02-09T15:04:30.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ˜“å®‰è¯´AI"/> <meta itemprop="url" content="https://juejin.cn/user/4009298287660777"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Ralph Loop è®©Claudeæ— æ­¢å°½å¹²æ´»çš„ç‰›é©¬...
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4009298287660777/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ˜“å®‰è¯´AI
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-09T15:04:30.000Z" title="Mon Feb 09 2026 15:04:30 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ€è¿‘åœ¨ç”¨ Claude Code çš„ Ralph Loop æ’ä»¶åš AI é©±åŠ¨å¼€å‘ï¼Œé‡åˆ°ä¸€ä¸ªå®é™…é—®é¢˜ï¼šå¦‚ä½•è®© Ralph Loop åœ¨åå°é•¿æ—¶é—´è¿è¡Œï¼Œä¸å ç”¨ç»ˆç«¯çª—å£ï¼Ÿç ”ç©¶äº†å‡ ç§æ–¹æ¡ˆï¼Œä»ç®€å•çš„ tmux åˆ°å®Œæ•´çš„ç®¡ç†ç³»ç»Ÿï¼Œè®°å½•ä¸€ä¸‹å®è·µè¿‡ç¨‹ã€‚</p>
<p><strong>ï¼ˆå¯¹äº†è¯´ä¸ªç¦åˆ©ï¼šéœ€è¦ä½æˆæœ¬ä½¿ç”¨ClaudeCodeå¯ä»¥è”ç³»æ˜“å®‰ï¼š20133213ï¼Œå¤§é‡åŸç”Ÿclaude maxå¸å·ï¼Œæ•ˆæœæä½³ï¼Œæ˜“å®‰åšæŒè‡ªå·±åšå¸å·è½¬å‘ï¼Œå·æ± å·²ç»å‡ åä¸ªå·äº†ï¼Œå¦‚æœä½ æ˜¯é«˜T,æ˜“å®‰éå¸¸å¸Œæœ›ç»™ä½ çœä¸€äº›æ—¶é—´ã€‚ï¼‰</strong></p>
<h2 data-id="heading-0">é—®é¢˜èƒŒæ™¯</h2>
<p>Ralph Loop æ˜¯ Claude Code çš„ä¸€ä¸ªæ’ä»¶ï¼Œå®ç°äº†è‡ªæˆ‘è¿­ä»£çš„ AI å¼€å‘å¾ªç¯ã€‚ç®€å•è¯´å°±æ˜¯ç»™ AI ä¸€ä¸ªä»»åŠ¡ï¼Œå®ƒä¼šä¸æ–­å°è¯•ã€æµ‹è¯•ã€ä¿®å¤ï¼Œç›´åˆ°å®Œæˆã€‚ç‰¹åˆ«é€‚åˆé…åˆ BMAD æ•æ·æ¡†æ¶ä½¿ç”¨ï¼Œä¸€æ¬¡æ€§å®Œæˆæ•´ä¸ª Epic çš„å¤šä¸ªç”¨æˆ·æ•…äº‹ã€‚</p>
<p>é—®é¢˜æ˜¯ï¼š</p>
<ul>
<li>ä¸€ä¸ª Epic å¯èƒ½åŒ…å« 5-10 ä¸ªæ•…äº‹ï¼Œè·‘å‡ ä¸ªå°æ—¶</li>
<li>å ç”¨ç»ˆç«¯çª—å£ï¼Œæ— æ³•åšå…¶ä»–äº‹</li>
<li>Mac åˆä¸Šç›–å­ä¼šä¼‘çœ ï¼Œè¿›ç¨‹ä¸­æ–­</li>
<li>æƒ³åŒæ—¶è·‘å¤šä¸ª Epicï¼Œä½†ç»ˆç«¯çª—å£ä¸å¤Ÿ</li>
</ul>
<h2 data-id="heading-1">å®‰è£… Ralph Loop æ’ä»¶</h2>
<p>å…ˆè¯´æ’ä»¶å®‰è£…ï¼Œå®˜æ–¹æ’ä»¶åå«Â <code>ralph-loop</code>ï¼ˆä¸æ˜¯ ralph-wiggumï¼‰ï¼š</p>
<pre><code class="hljs language-perl" lang="perl"><span class="hljs-comment"># ç›´æ¥å®‰è£…</span>
claude plugin install ralph-loop@claude-plugins-official

<span class="hljs-comment"># ç¡®è®¤å®‰è£…æˆåŠŸ</span>
claude plugin list
</code></pre>
<p>å®‰è£…åå°±å¯ä»¥ç”¨Â <code>/ralph-loop</code>Â å‘½ä»¤äº†ã€‚</p>
<h3 data-id="heading-2">Ralph Loop å·¥ä½œåŸç†</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9fe0c93560b143f6a89c9486502118d2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piT5a6J6K-0QUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771254274&amp;x-signature=o2eQAroMtByBZ9qC8AlMpfezWJg%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è¿™ä¸ªè‡ªæˆ‘è¿­ä»£çš„å¾ªç¯æ˜¯ Ralph Loop çš„æ ¸å¿ƒï¼Œé…åˆåå°è¿è¡Œï¼Œå¯ä»¥è®© AI é•¿æ—¶é—´è‡ªä¸»å·¥ä½œã€‚æµ‹è¯•å¤±è´¥äº†ä¼šè‡ªæˆ‘ä¿®å¤ï¼Œä»»åŠ¡æ²¡å®Œæˆä¼šç»§ç»­è¿­ä»£ä¼˜åŒ–ï¼Œæ•´ä¸ªè¿‡ç¨‹ä¸éœ€è¦äººå·¥å¹²é¢„ã€‚</p>
<h2 data-id="heading-3">åå°æ‰§è¡Œæ–¹æ¡ˆå¯¹æ¯”</h2>
<p>æˆ‘è¯•äº† 5 ç§æ–¹æ¡ˆï¼ŒæŒ‰æ¨èåº¦æ’åºï¼š</p>
<h3 data-id="heading-4">æ–¹æ¡ˆå¯¹æ¯”è¡¨</h3>





















































<table><thead><tr><th>æ–¹æ¡ˆ</th><th>é€‚ç”¨åœºæ™¯</th><th>æ“ä½œéš¾åº¦</th><th>ç¨³å®šæ€§</th><th>å¯äº¤äº’æ€§</th><th>æ¨èåº¦</th></tr></thead><tbody><tr><td><strong>tmux</strong></td><td>æ—¥å¸¸å¼€å‘</td><td>ç®€å•</td><td>æé«˜</td><td>éšæ—¶å¯è¿</td><td>å¼ºçƒˆæ¨è</td></tr><tr><td><strong>tmux + caffeinate</strong></td><td>è¿‡å¤œè¿è¡Œ</td><td>ä¸­ç­‰</td><td>æé«˜</td><td>éšæ—¶å¯è¿</td><td>å¼ºçƒˆæ¨è</td></tr><tr><td><strong>screen</strong></td><td>è½»é‡æ›¿ä»£</td><td>ç®€å•</td><td>é«˜</td><td>éšæ—¶å¯è¿</td><td>æ¨è</td></tr><tr><td><strong>nohup</strong></td><td>å®Œå…¨æ— äººå€¼å®ˆ</td><td>ä¸­ç­‰</td><td>ä¸­ç­‰</td><td>ä»…æ—¥å¿—</td><td>é€‚ç”¨ç‰¹å®šåœºæ™¯</td></tr><tr><td><strong>Ralph Manager</strong></td><td>å¤šä»»åŠ¡ç®¡ç†</td><td>è¾ƒå¤æ‚</td><td>æé«˜</td><td>å®Œæ•´ç®¡ç†</td><td>å¼ºçƒˆæ¨è</td></tr></tbody></table>
<h3 data-id="heading-5">æ–¹æ¡ˆ 1: tmuxï¼ˆæœ€æ¨èï¼‰</h3>
<p><strong>é€‚åˆåœºæ™¯</strong>ï¼šæ—¥å¸¸å¼€å‘ï¼Œéœ€è¦éšæ—¶æŸ¥çœ‹è¿›åº¦</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åˆ›å»ºä¼šè¯</span>
tmux new -s ralph-epic1

<span class="hljs-comment"># åœ¨ä¼šè¯ä¸­è¿è¡Œ Claude Code</span>
<span class="hljs-built_in">cd</span>Â /path/to/project
claude

<span class="hljs-comment"># è¿è¡Œ Ralph Loop</span>
/ralph-loopÂ <span class="hljs-string">"ä»»åŠ¡æè¿°..."</span>Â --max-iterations 100

<span class="hljs-comment"># åˆ†ç¦»ä¼šè¯ï¼ˆè®©å®ƒåå°è¿è¡Œï¼‰</span>
<span class="hljs-comment"># æŒ‰ Ctrl+B ç„¶å D</span>

<span class="hljs-comment"># é‡æ–°è¿æ¥æŸ¥çœ‹è¿›åº¦</span>
tmux attach -t ralph-epic1

<span class="hljs-comment"># åˆ—å‡ºæ‰€æœ‰ä¼šè¯</span>
tmuxÂ <span class="hljs-built_in">ls</span>

<span class="hljs-comment"># å…³é—­ä¼šè¯</span>
tmux kill-session -t ralph-epic1
</code></pre>
<p><strong>ä¼˜ç‚¹</strong>ï¼š</p>
<p>å¯ä»¥éšæ—¶é‡è¿æŸ¥çœ‹è¿›åº¦ã€‚æ”¯æŒå¤šçª—å£ã€åˆ†å±ã€‚ç¨³å®šï¼Œä¸ä¼šå› ä¸ºç½‘ç»œæ–­å¼€è€Œä¸­æ–­ã€‚</p>
<p><strong>æˆ‘çš„é…ç½®</strong>ï¼š</p>
<p>åˆ›å»ºÂ <code>~/.tmux.conf</code>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ä¿®æ”¹å‰ç¼€é”®ä¸º Ctrl+Aï¼ˆæ›´å¥½æŒ‰ï¼‰</span>
<span class="hljs-built_in">set</span>Â -g prefix C-a
unbind C-b

<span class="hljs-comment"># å¯ç”¨é¼ æ ‡æ”¯æŒ</span>
<span class="hljs-built_in">set</span>Â -g mouse on

<span class="hljs-comment"># å¢åŠ å†å²ç¼“å†²åŒº</span>
<span class="hljs-built_in">set</span>Â -g history-limit 10000

<span class="hljs-comment"># åˆ†å±å¿«æ·é”®</span>
<span class="hljs-built_in">bind</span>Â | split-window -h -cÂ <span class="hljs-string">"#{pane_current_path}"</span>
<span class="hljs-built_in">bind</span>Â - split-window -v -cÂ <span class="hljs-string">"#{pane_current_path}"</span>
</code></pre>
<p>è¿™æ ·æ“ä½œæ›´é¡ºæ‰‹ã€‚</p>
<h3 data-id="heading-6">tmux å®Œæ•´æ“ä½œæµç¨‹</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bf49c732335145fa98bfcafc54480c4c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piT5a6J6K-0QUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771254274&amp;x-signature=x3XWbd6c8Mipndfk0A5dmTCsKlk%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æ•´ä¸ªæµç¨‹åˆ†ä¸º 4 ä¸ªé˜¶æ®µï¼š</p>
<ol>
<li>1.Â <strong>åˆå§‹åŒ–</strong>ï¼šåˆ›å»º tmux ä¼šè¯</li>
<li>2.Â <strong>æ‰§è¡Œä»»åŠ¡</strong>ï¼šè¿è¡Œ Claude Code å’Œ Ralph Loop</li>
<li>3.Â <strong>åå°è¿è¡Œ</strong>ï¼šåˆ†ç¦»ä¼šè¯ï¼Œå¯éšæ—¶é‡è¿æŸ¥çœ‹è¿›åº¦</li>
<li>4.Â <strong>å®Œæˆæ¸…ç†</strong>ï¼šæŸ¥çœ‹ç»“æœå¹¶å…³é—­ä¼šè¯</li>
</ol>
<p>å…³é”®æ“ä½œï¼š<code>Ctrl+B D</code>ï¼ˆåˆ†ç¦»ï¼‰ã€<code>tmux attach</code>ï¼ˆé‡è¿ï¼‰</p>
<h3 data-id="heading-7">æ–¹æ¡ˆ 2: tmux + caffeinateï¼ˆè¿‡å¤œè¿è¡Œï¼‰</h3>
<p><strong>é€‚åˆåœºæ™¯</strong>ï¼šéœ€è¦é•¿æ—¶é—´è¿è¡Œï¼Œå¯èƒ½åˆä¸Š Mac ç›–å­</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åˆ›å»ºä¼šè¯å¹¶é˜²æ­¢ä¼‘çœ </span>
tmux new -s overnight
<span class="hljs-built_in">cd</span>Â /path/to/project

<span class="hljs-comment"># é˜²æ­¢ç³»ç»Ÿä¼‘çœ </span>
caffeinate -i claude

<span class="hljs-comment"># åœ¨ Claude ä¸­è¿è¡Œ Ralph Loop</span>
/ralph-loopÂ <span class="hljs-string">"..."</span>Â --max-iterations 100

<span class="hljs-comment"># åˆ†ç¦»ä¼šè¯</span>
<span class="hljs-comment"># Ctrl+B D</span>
</code></pre>
<p><code>caffeinate</code>Â çš„å‡ ä¸ªé€‰é¡¹ï¼š</p>
<ul>
<li>â€¢Â <code>-i</code>ï¼šé˜²æ­¢ç³»ç»Ÿç©ºé—²ä¼‘çœ </li>
<li>â€¢Â <code>-d</code>ï¼šé˜²æ­¢æ˜¾ç¤ºå™¨ä¼‘çœ </li>
<li>â€¢Â <code>-s</code>ï¼šé˜²æ­¢ç³»ç»Ÿä¼‘çœ </li>
<li>â€¢Â <code>-w PID</code>ï¼šé˜²æ­¢ä¼‘çœ ç›´åˆ°æŒ‡å®šè¿›ç¨‹ç»“æŸ</li>
</ul>
<p><strong>å®é™…æµ‹è¯•</strong>ï¼š</p>
<ul>
<li>â€¢ è·‘äº†ä¸€å¤œï¼ˆ8å°æ—¶ï¼‰ï¼Œå®Œæˆäº† 2 ä¸ª Epic</li>
<li>â€¢ Mac åˆç›–çŠ¶æ€ï¼Œæ¥ç”µæº</li>
<li>â€¢ æ—©ä¸Šèµ·æ¥ä¼šè¯è¿˜åœ¨ï¼Œè¿›åº¦æ­£å¸¸</li>
</ul>
<h3 data-id="heading-8">æ–¹æ¡ˆ 3: screen</h3>
<p><strong>é€‚åˆåœºæ™¯</strong>ï¼šæ²¡æœ‰ tmux æˆ–ä¹ æƒ¯ç”¨ screen</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åˆ›å»º screen ä¼šè¯</span>
screen -S ralph-work

<span class="hljs-comment"># è¿è¡Œä»»åŠ¡</span>
<span class="hljs-built_in">cd</span>Â /path/to/project
claude
/ralph-loopÂ <span class="hljs-string">"..."</span>Â --max-iterations 100

<span class="hljs-comment"># åˆ†ç¦»ä¼šè¯</span>
<span class="hljs-comment"># Ctrl+A D</span>

<span class="hljs-comment"># é‡æ–°è¿æ¥</span>
screen -r ralph-work

<span class="hljs-comment"># å¦‚æœæ˜¾ç¤º Attachedï¼Œå¼ºåˆ¶è¿æ¥</span>
screen -d -r ralph-work
</code></pre>
<p>screen æ¯” tmux è€ï¼ŒåŠŸèƒ½å°‘ä¸€äº›ï¼Œä½†æ›´è½»é‡ã€‚æˆ‘ä¸ªäººè¿˜æ˜¯æ›´å–œæ¬¢ tmuxã€‚</p>
<h3 data-id="heading-9">æ–¹æ¡ˆ 4: nohup + åå°è¿›ç¨‹</h3>
<p><strong>é€‚åˆåœºæ™¯</strong>ï¼šå®Œå…¨æ— äººå€¼å®ˆï¼Œä¸éœ€è¦äº¤äº’</p>
<p>åˆ›å»ºå¯åŠ¨è„šæœ¬Â <code>run-ralph.sh</code>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>
<span class="hljs-built_in">cd</span>Â /path/to/project

<span class="hljs-comment"># åˆ›å»ºå‘½ä»¤æ–‡ä»¶</span>
<span class="hljs-built_in">cat</span>Â &gt; /tmp/ralph-cmd.txt &lt;&lt;Â <span class="hljs-string">'EOF'</span>
/ralph-loopÂ <span class="hljs-string">"å®ç°æ‰€æœ‰æ•…äº‹"</span>Â --max-iterations 100 --completion-promiseÂ <span class="hljs-string">"COMPLETE"</span>
EOF

<span class="hljs-comment"># åå°è¿è¡Œ</span>
<span class="hljs-built_in">nohup</span>Â <span class="hljs-built_in">cat</span>Â /tmp/ralph-cmd.txt | claude &gt; ralph-output.log 2&gt;&amp;1 &amp;

<span class="hljs-built_in">echo</span>Â <span class="hljs-string">"ä»»åŠ¡å·²å¯åŠ¨ï¼ŒæŸ¥çœ‹æ—¥å¿—: tail -f ralph-output.log"</span>
</code></pre>
<p>è¿è¡Œï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">chmod</span>Â +x run-ralph.sh
./run-ralph.sh

<span class="hljs-comment"># æŸ¥çœ‹å®æ—¶æ—¥å¿—</span>
<span class="hljs-built_in">tail</span>Â -f ralph-output.log

<span class="hljs-comment"># åœæ­¢ä»»åŠ¡</span>
pkill -f claude
</code></pre>
<p><strong>é—®é¢˜</strong>ï¼š</p>
<p>æ— æ³•äº¤äº’æŸ¥çœ‹è¿›åº¦ï¼Œåªèƒ½é€šè¿‡æ—¥å¿—äº†è§£çŠ¶æ€ã€‚é€‚åˆå®Œå…¨ç¡®å®šçš„ä»»åŠ¡ã€‚</p>
<h3 data-id="heading-10">æ–¹æ¡ˆ 5: ç”Ÿäº§çº§ç®¡ç†ç³»ç»Ÿ</h3>
<p><strong>é€‚åˆåœºæ™¯</strong>ï¼šç»å¸¸ä½¿ç”¨ï¼Œéœ€è¦ç®¡ç†å¤šä¸ªä»»åŠ¡</p>
<p>æˆ‘å†™äº†ä¸€ä¸ªå®Œæ•´çš„ç®¡ç†è„šæœ¬Â <code>ralph.sh</code>ï¼Œå¯ä»¥å¯åŠ¨/åœæ­¢ Epicã€æŸ¥çœ‹çŠ¶æ€å’Œæ—¥å¿—ã€å¤šä»»åŠ¡å¹¶è¡Œç®¡ç†ã€è‡ªåŠ¨å½’æ¡£æ—¥å¿—ã€‚</p>
<p>æ ¸å¿ƒå‘½ä»¤ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å®‰è£…ï¼ˆåˆ›å»º ~/ralph-manager/ralph.shï¼‰</span>
<span class="hljs-comment"># ... è„šæœ¬å†…å®¹è§å‰æ–‡ ...</span>

<span class="hljs-comment"># åˆ›å»ºç¬¦å·é“¾æ¥</span>
sudoÂ <span class="hljs-built_in">ln</span>Â -s ~/ralph-manager/ralph.sh /usr/local/bin/ralph

<span class="hljs-comment"># ä½¿ç”¨</span>
ralph start epic1Â <span class="hljs-string">"1-*.md"</span>Â  Â Â <span class="hljs-comment"># å¯åŠ¨ Epic 1</span>
ralph status epic1 Â  Â  Â  Â  Â  Â Â <span class="hljs-comment"># æŸ¥çœ‹çŠ¶æ€</span>
ralph logs epic1 follow Â  Â  Â  Â <span class="hljs-comment"># æŸ¥çœ‹å®æ—¶æ—¥å¿—</span>
ralph attach epic1 Â  Â  Â  Â  Â  Â Â <span class="hljs-comment"># è¿æ¥åˆ°ä¼šè¯</span>
ralph stop epic1 Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-comment"># åœæ­¢ä»»åŠ¡</span>
</code></pre>
<p><strong>å®é™…æ•ˆæœ</strong>ï¼š</p>
<p>å¯ä»¥åŒæ—¶è·‘å¤šä¸ª Epicï¼š</p>
<pre><code class="hljs language-sql" lang="sql">ralph <span class="hljs-keyword">start</span> epic1Â "1-*.md"
ralph <span class="hljs-keyword">start</span> epic2Â "2-*.md"
ralph <span class="hljs-keyword">start</span> epic3Â "3-*.md"

ralph status <span class="hljs-keyword">all</span> Â # æŸ¥çœ‹æ‰€æœ‰çŠ¶æ€
</code></pre>
<h2 data-id="heading-11">ç»“åˆ BMAD æ¡†æ¶çš„æœ€ä½³å®è·µ</h2>
<p>BMAD æ˜¯ä¸€ä¸ª AI é©±åŠ¨çš„æ•æ·å¼€å‘æ¡†æ¶ï¼Œä¼šç”Ÿæˆè¯¦ç»†çš„ç”¨æˆ·æ•…äº‹æ–‡ä»¶ï¼ŒåŒ…å« ACï¼ˆéªŒæ”¶æ ‡å‡†ï¼‰å’Œ Tasksã€‚</p>
<h3 data-id="heading-12">BMAD + Ralph Loop å·¥ä½œæµç¨‹</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ba078075c0c84a3a88ad7cf56f42d4ea~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piT5a6J6K-0QUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771254274&amp;x-signature=96lhkz9%2BjVJ3FNKZPxNHAwVTDA0%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æµç¨‹å¾ˆæ¸…æ™°ï¼Œåˆ†ä¸‰æ­¥èµ°ã€‚</p>
<p>BMAD è´Ÿè´£è§„åˆ’ï¼Œç”¨ AI è¾…åŠ©åšéœ€æ±‚åˆ†æï¼Œç”Ÿæˆ Epicï¼Œæ‹†åˆ†æˆä¸€ä¸ªä¸ªç”¨æˆ·æ•…äº‹ï¼Œæ¯ä¸ªæ•…äº‹éƒ½æœ‰æ˜ç¡®çš„éªŒæ”¶æ ‡å‡†ï¼ˆACï¼‰å’Œä»»åŠ¡æ¸…å•ï¼ˆTasksï¼‰ã€‚è¿™æ · AI å°±ä¸ç”¨çŒœä½ æƒ³è¦ä»€ä¹ˆäº†ã€‚</p>
<p>Ralph Loop æ¥æ‰‹æ‰§è¡Œã€‚å®ƒåœ¨åå°è·‘ï¼Œè¯»å–æ•…äº‹æ–‡ä»¶ï¼Œå®ç°åŠŸèƒ½ï¼Œè·‘æµ‹è¯•ï¼Œå‘ç°é—®é¢˜è‡ªåŠ¨ä¿®å¤ï¼Œå®Œæˆä¸€ä¸ªå‹¾é€‰ä¸€ä¸ªï¼Œè‡ªåŠ¨å¤„ç†æ•´ä¸ª Epicã€‚è¿™ä¸ªé˜¶æ®µå®Œå…¨ä¸éœ€è¦äººç›¯ç€ã€‚</p>
<p>æœ€åæ˜¯äººå·¥æŠŠå…³ã€‚Code Review çœ‹ä»£ç è´¨é‡ï¼Œæµ‹è¯•éªŒæ”¶ï¼Œç¡®è®¤æ²¡é—®é¢˜å†åˆå¹¶å‘å¸ƒã€‚</p>
<p>å®é™…è·‘ä¸‹æ¥ï¼Œä¸€ä¸ª Epicï¼ˆ6ä¸ªæ•…äº‹ï¼‰å¤§æ¦‚ 4 å°æ—¶ï¼Œ8ä¸ªæ•…äº‹ 6 å°æ—¶å·¦å³ã€‚æˆåŠŸç‡ 85% å·¦å³ï¼Œå‰©ä¸‹ 15% éœ€è¦æ‰‹åŠ¨è°ƒæ•´ã€‚API æˆæœ¬æ¯ä¸ª Epic äºŒä¸‰åç¾å…ƒã€‚</p>
<h3 data-id="heading-13">å•ä¸ªæ•…äº‹æ¨¡å¼</h3>
<p>é€‚åˆæ–°æ‰‹æˆ–å¤æ‚æ•…äº‹ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">/ralph-loopÂ <span class="hljs-string">"å®ç° Story 1.1: ç”¨æˆ·è®¤è¯æ¨¡å—

å·¥ä½œç›®å½•: ~/projects/my-app
æ•…äº‹æ–‡ä»¶: _bmad-output/implementation-artifacts/1-1-user-authentication.md

è¦æ±‚:
1. ä¸¥æ ¼æŒ‰ç…§æ•…äº‹æ–‡ä»¶ä¸­çš„ Acceptance Criteria å’Œ Tasks æ‰§è¡Œ
2. å®Œæˆæ‰€æœ‰ Tasks å¹¶å‹¾é€‰å®Œæˆçš„å¤é€‰æ¡†
3. æ›´æ–° Status ä¸º done
4. å¡«å†™ Dev Agent Record éƒ¨åˆ†
5. è¿è¡Œæ‰€æœ‰æµ‹è¯•ç¡®ä¿é€šè¿‡

å®Œæˆæ ‡å‡†:
- æ‰€æœ‰ AC å’Œ Tasks å‹¾é€‰å®Œæˆ
- æµ‹è¯•é€šè¿‡
- Story Status æ›´æ–°ä¸º done

å®Œæˆåè¾“å‡º: &lt;promise&gt;STORY_1.1_COMPLETE&lt;/promise&gt;
"</span>Â --max-iterations <span class="hljs-number">30</span> --completion-promiseÂ <span class="hljs-string">"STORY_1.1_COMPLETE"</span>
</code></pre>
<h3 data-id="heading-14">Epic æ‰¹é‡æ¨¡å¼</h3>
<p>é€‚åˆç†Ÿç»ƒä½¿ç”¨ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">/ralph-loopÂ <span class="hljs-string">"å®ç° Epic 1 çš„æ‰€æœ‰ç”¨æˆ·æ•…äº‹

å·¥ä½œç›®å½•: ~/projects/my-app
æ•…äº‹ç›®å½•: _bmad-output/implementation-artifacts/

æ•…äº‹é¡ºåº:
1. Story 1.1: ç”¨æˆ·è®¤è¯æ¨¡å—
2. Story 1.2: æƒé™ç®¡ç†ç³»ç»Ÿ
3. Story 1.3: ç”¨æˆ·ä¸ªäººèµ„æ–™
4. Story 1.4: å¯†ç é‡ç½®åŠŸèƒ½
5. Story 1.5: ç™»å½•æ—¥å¿—è®°å½•
6. Story 1.6: ä¼šè¯ç®¡ç†ä¼˜åŒ–

å·¥ä½œæµç¨‹:
1. æŒ‰é¡ºåºå®Œæˆæ¯ä¸ªæ•…äº‹
2. å®Œæˆä¸€ä¸ªåå†å¼€å§‹ä¸‹ä¸€ä¸ª
3. æ¯ä¸ªæ•…äº‹éƒ½è¦å®Œæˆæ‰€æœ‰ AC/Tasksã€è¿è¡Œæµ‹è¯•ã€æ›´æ–°çŠ¶æ€
4. å¦‚æœæŸä¸ªæ•…äº‹å¤±è´¥è¶…è¿‡3æ¬¡ï¼Œè®°å½•é—®é¢˜å¹¶ç»§ç»­ä¸‹ä¸€ä¸ª

å®Œæˆåè¾“å‡º: &lt;promise&gt;EPIC_1_COMPLETE&lt;/promise&gt;
"</span>Â --max-iterations <span class="hljs-number">100</span> --completion-promiseÂ <span class="hljs-string">"EPIC_1_COMPLETE"</span>
</code></pre>
<h3 data-id="heading-15">å®é™…è¿è¡Œæ•ˆæœ</h3>
<p>ä½¿ç”¨ Ralph Manager + tmux + caffeinate çš„ç»„åˆï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å¯åŠ¨</span>
ralph start epic1Â <span class="hljs-string">"1-*.md"</span>

<span class="hljs-comment"># åˆ†ç¦»ä¼šè¯</span>
tmux detach

<span class="hljs-comment"># é˜²æ­¢ä¼‘çœ </span>
caffeinate -iÂ <span class="hljs-built_in">sleep</span>Â 28800 Â <span class="hljs-comment"># 8å°æ—¶</span>

<span class="hljs-comment"># ç¬¬äºŒå¤©æ£€æŸ¥</span>
ralph status epic1

<span class="hljs-comment"># æŸ¥çœ‹å®Œæˆæƒ…å†µ</span>
<span class="hljs-built_in">cd</span>Â ~/projects/my-app
grep -rÂ <span class="hljs-string">"Status: done"</span>Â _bmad-output/implementation-artifacts/
</code></pre>
<p><strong>çœŸå®æ•°æ®</strong>ï¼š</p>
<ul>
<li>â€¢ Epic 1ï¼ˆ6ä¸ªæ•…äº‹ï¼‰ï¼šè€—æ—¶çº¦ 4 å°æ—¶</li>
<li>â€¢ Epic 2ï¼ˆ8ä¸ªæ•…äº‹ï¼‰ï¼šè€—æ—¶çº¦ 6 å°æ—¶</li>
<li>â€¢ æˆåŠŸç‡ï¼šçº¦ 85%ï¼ˆéƒ¨åˆ†æ•…äº‹éœ€è¦æ‰‹åŠ¨ä¿®å¤ï¼‰</li>
</ul>
<h2 data-id="heading-16">é‡åˆ°çš„é—®é¢˜</h2>
<h3 data-id="heading-17">é—®é¢˜ 1: tmux ä¼šè¯çªç„¶æ¶ˆå¤±</h3>
<p><strong>ç°è±¡</strong>ï¼šé‡è¿æ—¶æç¤ºÂ <code>no sessions</code></p>
<p><strong>åŸå› </strong>ï¼šç³»ç»Ÿé‡å¯æˆ– tmux è¿›ç¨‹è¢«æ€</p>
<p><strong>è§£å†³</strong>ï¼š</p>
<pre><code class="hljs language-perl" lang="perl"><span class="hljs-comment"># æ£€æŸ¥ tmux è¿›ç¨‹</span>
ps aux | <span class="hljs-keyword">grep</span> tmux

<span class="hljs-comment"># å¦‚æœæ²¡æœ‰ï¼Œé‡å¯ tmux</span>
tmux

<span class="hljs-comment"># æ¢å¤ä¼šè¯ï¼ˆå¦‚æœæœ‰ä¿å­˜æ’ä»¶ï¼‰</span>
</code></pre>
<p>æˆ‘ç°åœ¨ä¼šå®šæœŸä¿å­˜æ—¥å¿—ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">claude 2&gt;&amp;1 |Â <span class="hljs-built_in">tee</span>Â ralph-$(<span class="hljs-built_in">date</span>Â +%Y%m%d-%H%M%S).<span class="hljs-built_in">log</span>
</code></pre>
<h3 data-id="heading-18">é—®é¢˜ 2: Mac è¿˜æ˜¯ä¼šä¼‘çœ </h3>
<p><strong>ç°è±¡</strong>ï¼šå³ä½¿ç”¨äº†Â <code>caffeinate</code>ï¼ŒMac è¿˜æ˜¯ä¼‘çœ äº†</p>
<p><strong>åŸå› </strong>ï¼š<code>caffeinate</code>Â å‚æ•°ä¸å¯¹ï¼Œæˆ–è€…ç”µæ± ç”µé‡ä½</p>
<p><strong>è§£å†³</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ä½¿ç”¨æœ€å¼ºçš„é˜²ä¼‘çœ é€‰é¡¹</span>
caffeinate -dims tmux attach -t ralph-epic1

<span class="hljs-comment"># æˆ–ç¡®ä¿æ¥ç”µæº</span>
pmset -g Â <span class="hljs-comment"># æŸ¥çœ‹ç”µæºè®¾ç½®</span>
</code></pre>
<h3 data-id="heading-19">é—®é¢˜ 3: Claude è¿›ç¨‹å¡ä½</h3>
<p><strong>ç°è±¡</strong>ï¼šæ—¥å¿—ä¸å†æ›´æ–°ï¼Œè¿›ç¨‹è¿˜åœ¨ä½†æ— å“åº”</p>
<p><strong>åŸå› </strong>ï¼šå¯èƒ½é‡åˆ°äº†éœ€è¦äººå·¥ç¡®è®¤çš„é—®é¢˜</p>
<p><strong>è§£å†³</strong>ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino"># è¿æ¥åˆ°ä¼šè¯æŸ¥çœ‹
tmux attach -t ralph-epic1

# å¦‚æœç¡®å®å¡ä½ï¼Œé‡å¯ä»»åŠ¡
ralph stop epic1
ralph start epic1Â <span class="hljs-string">"1-*.md"</span>
</code></pre>
<h2 data-id="heading-20">æˆ‘çš„æ¨èæ–¹æ¡ˆ</h2>
<p>æ ¹æ®ä¸åŒåœºæ™¯é€‰æ‹©åˆé€‚çš„æ–¹æ¡ˆï¼š</p>
<p><strong>æ—¥å¸¸å¼€å‘ï¼ˆ1-2å°æ—¶ä»»åŠ¡ï¼‰</strong> ï¼š</p>
<pre><code class="hljs">tmux + æ‰‹åŠ¨æŸ¥çœ‹è¿›åº¦
</code></pre>
<p><strong>è¿‡å¤œè¿è¡Œï¼ˆ4-8å°æ—¶ä»»åŠ¡ï¼‰</strong> ï¼š</p>
<pre><code class="hljs">tmux + caffeinate + æ—¥å¿—è®°å½•
</code></pre>
<p><strong>å¤šä»»åŠ¡å¹¶è¡Œ</strong>ï¼š</p>
<pre><code class="hljs">Ralph Manager
</code></pre>
<p><strong>å®Œå…¨æ— äººå€¼å®ˆ</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">nohup</span>ï¼ˆä½†è¦ç¡®ä¿ä»»åŠ¡è¶³å¤Ÿç¨³å®šï¼‰
</code></pre>
<h2 data-id="heading-21">ä¸€äº›æ€è€ƒ</h2>
<p>Ralph Loop ä¸æ˜¯ä¸‡èƒ½çš„ã€‚å®ƒé€‚åˆæ˜ç¡®çš„å¼€å‘ä»»åŠ¡ï¼Œä½†ä¸é€‚åˆéœ€è¦è®¾è®¡å†³ç­–çš„åœºæ™¯ã€‚å¦‚æœä½ çš„ä»»åŠ¡éœ€è¦æ¶æ„é€‰å‹æˆ–æ–¹æ¡ˆè®¨è®ºï¼Œè¿˜æ˜¯å¾—äººæ¥åšã€‚æœ€å¥½é…åˆ BMAD è¿™æ ·çš„è¯¦ç»†æ•…äº‹æ–‡ä»¶ï¼Œè®© AI çŸ¥é“å…·ä½“è¦åšä»€ä¹ˆã€‚</p>
<p>åå°è¿è¡Œæ˜¯æŠŠåŒåˆƒå‰‘ã€‚çœæ—¶é—´ï¼Œä½†ä¹Ÿæ„å‘³ç€å¤±å»äº†ä¸€å®šæ§åˆ¶ã€‚æˆ‘çš„åšæ³•æ˜¯å…ˆæ‰‹åŠ¨è·‘ 1-2 ä¸ªæ•…äº‹ï¼Œç¡®è®¤ AI ç†è§£æ­£ç¡®äº†ï¼Œå†å¼€åå°è®©å®ƒè·‘å®Œæ•´ä¸ª Epicã€‚</p>
<p>æˆæœ¬æ–¹é¢ï¼Œä¸€ä¸ª Epicï¼ˆ6-8ä¸ªæ•…äº‹ï¼‰å¤§çº¦ $20-30 çš„ API è´¹ç”¨ã€‚ç›¸æ¯”äººå·¥å¼€å‘çš„æ—¶é—´æˆæœ¬ï¼Œè¿™ä¸ªä»·æ ¼è¿˜æŒºå€¼çš„ã€‚ä½†è®°å¾—è®¾ç½®Â <code>--max-iterations</code>ï¼Œé˜²æ­¢æ— é™å¾ªç¯æŠŠé’±çƒ§å…‰ã€‚</p>
<p>è´¨é‡æ£€æŸ¥ä¸èƒ½çœã€‚å³ä½¿ AI è¯´å®Œæˆäº†ï¼Œä¹Ÿè¦è‡ªå·± code review ä¸€éã€‚æˆ‘ä¼šç”¨Â <code>/sc:code-review</code>Â æ’ä»¶å†æ£€æŸ¥ä¸€éï¼Œæµ‹è¯•è¦†ç›–ç‡ä¹Ÿå¾ˆé‡è¦ã€‚</p>
<h2 data-id="heading-22">èµ„æºé“¾æ¥</h2>
<ul>
<li>â€¢Â Ralph Loop æ’ä»¶æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fanthropics%2Fclaude-code%2Ftree%2Fmain%2Fplugins%2Fralph-loop" target="_blank" title="https://github.com/anthropics/claude-code/tree/main/plugins/ralph-loop" ref="nofollow noopener noreferrer">github.com/anthropics/â€¦</a></li>
<li>â€¢Â BMAD æ¡†æ¶ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fbmad-code-org%2FBMAD-METHOD" target="_blank" title="https://github.com/bmad-code-org/BMAD-METHOD" ref="nofollow noopener noreferrer">github.com/bmad-code-oâ€¦</a></li>
<li>â€¢Â tmux å…¥é—¨æ•™ç¨‹ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftmux%2Ftmux%2Fwiki" target="_blank" title="https://github.com/tmux/tmux/wiki" ref="nofollow noopener noreferrer">github.com/tmux/tmux/wâ€¦</a></li>
</ul>
<hr/>
<p>è¿™æ˜¯æˆ‘å®é™…ä½¿ç”¨ Ralph Loop çš„ç»éªŒï¼Œä¸åŒé¡¹ç›®å¯èƒ½éœ€è¦è°ƒæ•´ã€‚å¦‚æœä½ ä¹Ÿåœ¨ç”¨ AI é©±åŠ¨å¼€å‘ï¼Œæ¬¢è¿äº¤æµï¼Œ20133213å¯ä»¥æ‰¾åˆ°æˆ‘ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item>  </channel></rss>