<?xml version="1.0" encoding="UTF-8"?><rss version="2.0">  <channel>      <title>æ˜é‡‘æ–‡ç« æ¨è</title>      <link>https://juejin.cn/recommended?sort=newest</link>      <description>ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…æˆé•¿çš„ç¤¾åŒº</description>      <generator>python juejin_recom.py @Pi20</generator>      <item>    <title><![CDATA[åˆ†äº«å‰ç«¯é¡¹ç›®å¸¸ç”¨çš„ä¸‰ä¸ªSkills--Vueã€React ä¸ UI æ ¸å¿ƒ Skills | æ˜é‡‘ä¸€å‘¨ 2.5]]></title>    <link>https://juejin.cn/post/7603160727717609523</link>    <guid>https://juejin.cn/post/7603160727717609523</guid>    <pubDate>2026-02-05T08:40:11.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603160727717609523" data-draft-id="7602935146707337262" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åˆ†äº«å‰ç«¯é¡¹ç›®å¸¸ç”¨çš„ä¸‰ä¸ªSkills--Vueã€React ä¸ UI æ ¸å¿ƒ Skills | æ˜é‡‘ä¸€å‘¨ 2.5"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-02-05T08:40:11.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ˜é‡‘ä¸€å‘¨"/> <meta itemprop="url" content="https://juejin.cn/user/53218623894222"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åˆ†äº«å‰ç«¯é¡¹ç›®å¸¸ç”¨çš„ä¸‰ä¸ªSkills--Vueã€React ä¸ UI æ ¸å¿ƒ Skills | æ˜é‡‘ä¸€å‘¨ 2.5
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/53218623894222/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ˜é‡‘ä¸€å‘¨
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-05T08:40:11.000Z" title="Thu Feb 05 2026 08:40:11 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-05
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    4
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><em>æœ¬æ–‡å­—æ•°1500+ ï¼Œé˜…è¯»æ—¶é—´å¤§çº¦éœ€è¦ 4åˆ†é’Ÿã€‚</em></p>
<blockquote>
<p>ã€æ˜é‡‘ä¸€å‘¨ã€‘æœ¬æœŸäº®ç‚¹ï¼š</p>
</blockquote>
<ul>
<li>
<p><a href="https://juejin.cn/post/7599641289887055918" target="_blank" title="https://juejin.cn/post/7599641289887055918">åˆ†äº«å‰ç«¯é¡¹ç›®å¸¸ç”¨çš„ä¸‰ä¸ªSkills--Vueã€React ä¸ UI æ ¸å¿ƒ Skills</a></p>
</li>
<li>
<p><a href="https://juejin.cn/post/7598921649888968731" target="_blank" title="https://juejin.cn/post/7598921649888968731">ä¾›åº”é“¾ç³»ç»Ÿä¸­çš„ Web æ‰“å°æ–¹æ¡ˆçš„æ¢ç´¢å®è·µ</a></p>
</li>
<li>
<p><a href="https://juejin.cn/post/7600238071038197769" target="_blank" title="https://juejin.cn/post/7600238071038197769">Clawdbot å®Œæ•´å¯¹æ¥é£ä¹¦æ•™ç¨‹ æ‰‹æŠŠæ‰‹æ­å»ºä½ çš„ä¸“å± AI åŠ©æ‰‹</a></p>
</li>
<li>
<p><a href="https://juejin.cn/post/7598737609494855699" target="_blank" title="https://juejin.cn/post/7598737609494855699">è¡€å‹é£™å‡ï¼ŒFlutter &amp; Dart 2025 å¹´åº¦å·¨å‘å›é¡¾</a></p>
</li>
<li>
<p><a href="https://juejin.cn/post/7599970244786864191" target="_blank" title="https://juejin.cn/post/7599970244786864191">ä»é›¶å¼€å§‹æ­å»ºéƒ¨ç½² Moltbot/Clawdbot å®Œæ•´æ”»ç•¥</a></p>
</li>
</ul>
<blockquote>
<p><strong>ã€Œä¸Šæ¦œè§„åˆ™ã€</strong>ï¼šæ–‡ç« å‘å¸ƒæ—¶é—´åœ¨æœ¬æœŸã€Œæ˜é‡‘ä¸€å‘¨ã€å‘å¸ƒæ—¶é—´çš„å‰ä¸€å‘¨å†…ï¼›ä¸”ç¬¦åˆå„ä¸ªæ ç›®çš„å†…å®¹å®šä½å’Œè¦æ±‚ã€‚ å¦‚å‘ç°æ–‡ç« æœ‰æŠ„è¢­ã€æ´—ç¨¿ç­‰è¿åç¤¾åŒºè§„åˆ™çš„è¡Œä¸ºï¼Œå°†å–æ¶ˆå½“æœŸåŠåç»­ä¸Šæ¦œèµ„æ ¼ã€‚</p>
</blockquote>
<h2 data-id="heading-0">ä¸€å‘¨â€œé‡‘â€é€‰</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/73d5bf990a124e3a87cffb06443ad9ca~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR5LiA5ZGo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770885743&amp;x-signature=pvexyGP3pjpEg0Fli4%2Fh4yfoMXQ%3D" alt="æ˜é‡‘ä¸€å‘¨ æ–‡ç« å¤´å›¾ 1303x734.jpg" loading="lazy"/></p>
<p><em>å†…å®¹è¯„å®¡ä»¬ä¼šåœ¨è¿‡å»çš„ä¸€å‘¨å†…å¯¹ç¤¾åŒºæ·±åº¦æŠ€æœ¯å¥½æ–‡è¿›è¡ŒæŒ–æ˜å’Œç­›é€‰ï¼Œä¼˜è´¨çš„æŠ€æœ¯æ–‡ç« æœ‰æœºä¼šå‡ºç°åœ¨ä¸‹æ–¹æ¦œå•ä¸­ï¼Œæ’åä¸åˆ†å…ˆåã€‚</em></p>
<h3 data-id="heading-1">å‰ç«¯</h3>
<p><a href="https://juejin.cn/post/7599641289887055918" target="_blank" title="https://juejin.cn/post/7599641289887055918">åˆ†äº«å‰ç«¯é¡¹ç›®å¸¸ç”¨çš„ä¸‰ä¸ªSkills--Vueã€React ä¸ UI æ ¸å¿ƒ Skills</a><a href="https://juejin.cn/user/598569647873805/posts" target="_blank" title="https://juejin.cn/user/598569647873805/posts">@å»ä¼ªå­˜çœŸ</a></p>
<blockquote>
<p>æ–‡ç« ä»‹ç»å‰ç«¯é¡¹ç›®å¸¸ç”¨æŠ€èƒ½åŒ…ã€‚Vue-Skills è§£å†³ Vue 3 å¼€å‘ç—›ç‚¹ï¼›React-Skills æ¶µç›–ç»„ä»¶ç»„åˆã€æ€§èƒ½ä¼˜åŒ–ç­‰è§„åˆ™ï¼›UI-Skills æä¾›å¤šå…ƒé£æ ¼ã€é€‚é…å¤šæŠ€æœ¯æ ˆã€‚Skills è®©å¼€å‘è€…è½¬å˜è§’è‰²ï¼Œæå‡å¼€å‘æ•ˆç‡ä¸ä»£ç è´¨é‡ã€‚</p>
</blockquote>
<p><a href="https://juejin.cn/post/7598921649888968731" target="_blank" title="https://juejin.cn/post/7598921649888968731">ä¾›åº”é“¾ç³»ç»Ÿä¸­çš„ Web æ‰“å°æ–¹æ¡ˆçš„æ¢ç´¢å®è·µ</a><a href="https://juejin.cn/user/3233040624266695/posts" target="_blank" title="https://juejin.cn/user/3233040624266695/posts">@å¤èŒ—å‰ç«¯å›¢é˜Ÿ</a></p>
<blockquote>
<p>æœ¬æ–‡å›´ç»•ä¾›åº”é“¾ç³»ç»Ÿä¸­çš„Webæ‰“å°æ–¹æ¡ˆå±•å¼€ã€‚è°ƒç ”äº†åŸºäºDOMã€å¯è§†åŒ–æ¨¡æ¿ã€æœ¬åœ°æ‰“å°æ§ä»¶ä¸‰ç±»ä¸»æµæ–¹æ¡ˆå¹¶å¯¹æ¯”ã€‚é‡ç‚¹åˆ†æwindow.printï¼Œç»™å‡ºæŒ‡å®šåŒºåŸŸä¸æ‰¹é‡æ‰“å°æ€è·¯ï¼Œä»‹ç»æ ¸å¿ƒCSSæ‰“å°é…ç½®ï¼ŒæŒ‡å‡ºå…¶ä»æ˜¯é«˜æ€§ä»·æ¯”æ–¹æ¡ˆã€‚</p>
</blockquote>
<p><a href="https://juejin.cn/post/7599586891084726306" target="_blank" title="https://juejin.cn/post/7599586891084726306">æˆ‘æ¥æ‰‹äº†ä¸€ä¸ª 10 å¹´å‰çš„ jQuery è€é¡¹ç›®ï¼Œç”¨ Web Components ç»™å®ƒç»­äº†å‘½</a><a href="https://juejin.cn/user/3878732754331096/posts" target="_blank" title="https://juejin.cn/user/3878732754331096/posts">@ErpanOmer</a></p>
<blockquote>
<p>ä½œè€…æ¥æ‰‹ 2015 å¹´ä¸Šçº¿çš„ jQuery è€ CRM é¡¹ç›®ï¼Œéœ€æ·»åŠ  AI æ™ºèƒ½å®¢æœåŠŸèƒ½ã€‚å› ä¸šåŠ¡æ—¶é—´ç´§ï¼Œé€‰æ‹© Web Componentsï¼Œåˆ©ç”¨å…¶ Shadow DOM è§£å†³ CSS æ±¡æŸ“ã€‚ä»‹ç»ç»„ä»¶å®šä¹‰ä¸ä½¿ç”¨ï¼Œè¯¥æ–¹æ¡ˆä¾µå…¥æ€§é›¶ã€æ¡†æ¶æ— å…³ã€å¯æ¸è¿›è¿ç§»ï¼Œè¿˜ç»™å‡ºé¿å‘æŒ‡å—ã€‚</p>
</blockquote>
<p><a href="https://juejin.cn/post/7600581247020253193" target="_blank" title="https://juejin.cn/post/7600581247020253193">æ‰‹æŠŠæ‰‹æ•™ä½ ä½¿ç”¨LangChainï¼ˆå‰ç«¯å¼€å‘ç¨‹åºå‘˜ç‰ˆï¼‰</a><a href="https://juejin.cn/user/2788017220891128/posts" target="_blank" title="https://juejin.cn/user/2788017220891128/posts">@å‰ç«¯å°è±†</a></p>
<blockquote>
<p>æœ¬æ–‡æ˜¯é¢å‘å‰ç«¯å¼€å‘è€…çš„LangChainæ•™ç¨‹ã€‚å…ˆä»‹ç»å‰ç½®å‡†å¤‡ï¼Œæ¥ç€ä»ç¯å¢ƒæ­å»ºã€æ ¸å¿ƒåŠŸèƒ½å®æ“ã€å‰ç«¯é¡¹ç›®é›†æˆå±•å¼€æ•™å­¦ï¼Œè¿˜ç»™å‡ºé¿å‘æŒ‡å—ï¼Œæœ€åæŒ‡æ˜è¿›é˜¶æ–¹å‘ï¼ŒåŠ©å‰ç«¯å¼€å‘è€…ç”¨JS/TSé›†æˆAIèƒ½åŠ›ï¼Œæ‰“é€ æ™ºèƒ½åº”ç”¨ã€‚</p>
</blockquote>
<h3 data-id="heading-2">åç«¯</h3>
<p><a href="https://juejin.cn/post/7600238071038197769" target="_blank" title="https://juejin.cn/post/7600238071038197769">Clawdbot å®Œæ•´å¯¹æ¥é£ä¹¦æ•™ç¨‹ æ‰‹æŠŠæ‰‹æ­å»ºä½ çš„ä¸“å± AI åŠ©æ‰‹</a><a href="https://juejin.cn/user/993614242266077/posts" target="_blank" title="https://juejin.cn/user/993614242266077/posts">@BingoGo</a></p>
<blockquote>
<p>æœ¬æ–‡æ˜¯ Moltbotï¼ˆåŸ Clawdbotï¼‰å¯¹æ¥é£ä¹¦çš„æ•™ç¨‹ã€‚å…ˆä»‹ç»åœ¨ Linux ç³»ç»Ÿå®‰è£…ï¼ŒåŒ…æ‹¬ Gitã€Node.js åŠ Moltbot å®‰è£…æ­¥éª¤ï¼Œè¿˜æåŠæŸ¥çœ‹æœåŠ¡å’Œè®¿é—® Web UI é¢æ¿æ–¹æ³•ã€‚æ¥ç€è¯´æ˜å¯¹æ¥é£ä¹¦æµç¨‹ï¼Œå«æ’ä»¶å®‰è£…ã€å‚æ•°é…ç½®ã€æƒé™è®¾ç½®ç­‰ï¼Œå®Œæˆåå¯ä¸æœºå™¨äººå¯¹è¯ã€‚</p>
</blockquote>
<p><a href="https://juejin.cn/post/7600994087588053011" target="_blank" title="https://juejin.cn/post/7600994087588053011">Agent Skillså·¥ä½œæµï¼šä»å…¥é—¨åˆ°å®æˆ˜</a><a href="https://juejin.cn/user/694547077666606/posts" target="_blank" title="https://juejin.cn/user/694547077666606/posts">@é›¨ä¸­é£˜è¡çš„è®°å¿†</a></p>
<blockquote>
<p>æœ¬æ–‡å›´ç»•Agent Skillså·¥ä½œæµå±•å¼€ï¼Œå…ˆä»‹ç»æ ¸å¿ƒæ¦‚å¿µä¸æ¶æ„è®¾è®¡ï¼Œæ¥ç€é˜è¿°æ ¸å¿ƒç»„ä»¶ã€åŸºç¡€æŠ€èƒ½å®ç°ï¼Œè¿˜æ¶‰åŠäº¤äº’æœºåˆ¶ã€å¤šAgentåä½œã€‚ä»¥æ™ºèƒ½æ•°æ®åˆ†æç³»ç»Ÿä¸ºä¾‹å®æˆ˜ï¼Œç»™å‡ºéƒ¨ç½²ã€æµ‹è¯•ç­–ç•¥ä¸è®¾è®¡åŸåˆ™ï¼Œå±•ç°å…¶ç»“åˆAIä¸ä¼ ç»Ÿå¼€å‘çš„ä¼˜åŠ¿ã€‚</p>
</blockquote>
<p><a href="https://juejin.cn/post/7599237603976134699" target="_blank" title="https://juejin.cn/post/7599237603976134699">æ€§èƒ½å‘Šè­¦æƒŠå››åº§ ç¥å™¨å‡ºæ‰‹ä¼æ¶é¾™</a><a href="https://juejin.cn/user/2586510420095944/posts" target="_blank" title="https://juejin.cn/user/2586510420095944/posts">@Hello_world_</a></p>
<blockquote>
<p>2025å¹´12æœˆ29æ—¥æœåŠ¡å‡ºç°CPUé˜ˆå€¼å‘Šè­¦ï¼Œä½œè€…ä»ä»£ç ã€æµé‡ã€JVMç»´åº¦æ’æŸ¥ï¼Œæœªæ‰¾åˆ°æ ¹æœ¬åŸå› ã€‚åç”¨ç¥å™¨Arthasåˆ†æï¼Œå‘ç°æ˜¯ä¸šåŠ¡ä»£ç ä¸­åºåˆ—åŒ–/ååºåˆ—åŒ–ä»£ç ä½¿ç”¨ä¸å½“æ‰€è‡´ã€‚ä¿®æ”¹ä»£ç åï¼ŒCPUåˆ©ç”¨ç‡å¤§å¹…é™ä½ã€‚</p>
</blockquote>
<h3 data-id="heading-3">Android</h3>
<p><a href="https://juejin.cn/post/7598737609494855699" target="_blank" title="https://juejin.cn/post/7598737609494855699">è¡€å‹é£™å‡ï¼ŒFlutter &amp; Dart 2025 å¹´åº¦å·¨å‘å›é¡¾</a><a href="https://juejin.cn/user/817692379985752/posts" target="_blank" title="https://juejin.cn/user/817692379985752/posts">@æ‹çŒ«deå°éƒ­</a></p>
<blockquote>
<p>æœ¬æ–‡å…ˆæåŠ Google å‘å¸ƒçš„ Flutter &amp; Dart 2025 é«˜å…‰å›é¡¾ï¼Œéšåç€é‡ç›˜ç‚¹è¯¥å¹´ Flutter ç»å…¸å·¨å‘ï¼Œå¦‚å®åŠŸèƒ½æš‚åœã€çº¿ç¨‹åˆå¹¶é—®é¢˜ç­‰ï¼Œå…¶ä¸­è¶…åŠæ•°ä¸º iOS ç›¸å…³é—®é¢˜ï¼Œè™½å®˜æ–¹ç§¯æè§£å†³ï¼Œä½†å¹³å°å‡çº§å‘å¤šã€‚</p>
</blockquote>
<p><a href="https://juejin.cn/post/7600787795478134830" target="_blank" title="https://juejin.cn/post/7600787795478134830">Composeä¸­çš„IntrinsicSizeå®æˆ˜æŒ‡å—</a><a href="https://juejin.cn/user/2788017216685784/posts" target="_blank" title="https://juejin.cn/user/2788017216685784/posts">@ç¨€æœ‰çŒ¿è¯‰</a></p>
<blockquote>
<p>æœ¬æ–‡å›´ç»•Composeä¸­çš„IntrinsicSizeå±•å¼€ï¼Œä»¥æ„å»ºé‡å å¡ç‰‡å¼UIä¸ºä¾‹ï¼ŒæŒ‡å‡ºweightä¿®é¥°ç¬¦å¯¼è‡´å¸ƒå±€é—®é¢˜çš„åŸå› ï¼Œä»‹ç»äº†IntrinsicSizeæ‰“ç ´å¾ªç¯ä¾èµ–çš„åŸç†ï¼Œåˆ—ä¸¾å¸¸è§ç”¨ä¾‹ï¼Œè¿˜æåŠæ€§èƒ½æ³¨æ„äº‹é¡¹ï¼Œå¼ºè°ƒå…¶å¯¹å¤æ‚UIæ„å»ºçš„é‡è¦æ€§ã€‚</p>
</blockquote>
<h3 data-id="heading-4">äººå·¥æ™ºèƒ½</h3>
<p><a href="https://juejin.cn/post/7599970244786864191" target="_blank" title="https://juejin.cn/post/7599970244786864191">ä»é›¶å¼€å§‹æ­å»ºéƒ¨ç½² Moltbot/Clawdbot å®Œæ•´æ”»ç•¥</a><a href="https://juejin.cn/user/4388906150921614/posts" target="_blank" title="https://juejin.cn/user/4388906150921614/posts">@å‡ºé—¨ä¸ä¸‹é›¨</a></p>
<blockquote>
<p>æœ¬æ–‡æ˜¯ Moltbot/Clawdbot æ­å»ºéƒ¨ç½²æ”»ç•¥ã€‚ä»‹ç»å…¶ä¸ºæ”¯æŒå¤šæ¨¡å‹ã€å¤šå¹³å°çš„ AI åŠ©æ‰‹æ¡†æ¶ï¼Œé˜è¿°ç³»ç»Ÿè¦æ±‚ï¼Œç»™å‡º Windowsã€Mac å®‰è£…æ­¥éª¤ï¼Œæ¶µç›–é¦–æ¬¡é…ç½®ã€å¸¸ç”¨æŒ‡ä»¤ã€æ—¥å¸¸ç»´æŠ¤ã€æ•…éšœæ’é™¤åŠè¿›é˜¶é…ç½®å†…å®¹ï¼Œè¿˜è§£ç­”å¸¸è§é—®é¢˜ã€‚</p>
</blockquote>
<p><a href="https://juejin.cn/post/7599604510366236710" target="_blank" title="https://juejin.cn/post/7599604510366236710">Agent Skills å‚»ç“œå¼æ•™ç¨‹ï¼Œ26 å¹´æœ€ç« AI æŠ€æœ¯å°±è¿™ï¼Ÿ</a><a href="https://juejin.cn/user/2444938365386621/posts" target="_blank" title="https://juejin.cn/user/2444938365386621/posts">@ç¨‹åºå‘˜é±¼çš®</a></p>
<blockquote>
<p>æœ¬æ–‡å›´ç»• Agent Skills å±•å¼€ï¼Œå®ƒæ˜¯ Anthropic æ¨å‡ºçš„å¼€æ”¾æ ‡å‡†ï¼Œå¯è®© AI å­¦ä¹ ä¸“ä¸šæŠ€èƒ½ã€‚ä»‹ç»äº†å…¥é—¨å®æˆ˜ã€å†…éƒ¨åŸç†ã€è·¨å·¥å…·ä½¿ç”¨ã€åˆ›å»ºæ–¹æ³•ï¼Œè¿˜å¯¹æ¯”äº†ä¸ MCPã€æ–œæ å‘½ä»¤åŒºåˆ«ï¼Œå› å…¶å¼€æ”¾å¤ç”¨ä¸”é™ä½é—¨æ§›è€Œå¤§ç«ã€‚</p>
</blockquote>
<p><a href="https://juejin.cn/post/7598918127578972194" target="_blank" title="https://juejin.cn/post/7598918127578972194">Agent Skillså®Œå…¨æŒ‡å—ï¼šæ ¸å¿ƒæ¦‚å¿µä¸¨è®¾è®¡æ¨¡å¼ä¸¨å®æˆ˜ä»£ç </a><a href="https://juejin.cn/user/3140624091453053/posts" target="_blank" title="https://juejin.cn/user/3140624091453053/posts">@å¤§æ¨¡å‹çœŸå¥½ç©</a></p>
<blockquote>
<p>æœ¬æ–‡å›´ç»• Agent Skills å±•å¼€ï¼Œå®ƒæ˜¯æ¸è¿›å¼æŠ«éœ²çš„æç¤ºè¯ç®¡ç†æœºåˆ¶ï¼Œèƒ½é™ä½ Token æ¶ˆè€—ã€‚ä»¥ Claude Code ä¸ºä¾‹ï¼Œä»‹ç»å®‰è£…ã€ä½¿ç”¨åŠè¿›é˜¶æ–¹æ³•ã€‚è¿˜å¯¹æ¯”äº†ä¸ MCP çš„åŒºåˆ«ï¼ŒåŠ©å¼€å‘è€…æ„å»ºå¼ºå¤§æ™ºèƒ½ä½“ã€‚</p>
</blockquote>
<h2 data-id="heading-5">ğŸ“– æŠ•ç¨¿ä¸“åŒº</h2>
<blockquote>
<p>å¤§å®¶å¯ä»¥åœ¨è¯„è®ºåŒºæ¨èè®¤ä¸ºä¸é”™çš„æ–‡ç« ï¼Œå¹¶é™„ä¸Šé“¾æ¥å’Œæ¨èç†ç”±ï¼Œæœ‰æœºä¼šå‘ˆç°åœ¨ä¸‹ä¸€æœŸã€‚æ–‡ç« åˆ›å»ºæ—¥æœŸå¿…é¡»åœ¨ä¸‹æœŸæ˜é‡‘ä¸€å‘¨å‘å¸ƒå‰ä¸€å‘¨ä»¥å†…ï¼›å¯ä»¥æ¨èè‡ªå·±çš„æ–‡ç« ã€ä¹Ÿå¯ä»¥æ¨èä»–äººçš„æ–‡ç« ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[WMSæºç è§£æ]]></title>    <link>https://juejin.cn/post/7603185231801139226</link>    <guid>https://juejin.cn/post/7603185231801139226</guid>    <pubDate>2026-02-05T08:32:33.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603185231801139226" data-draft-id="7600953879501078579" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="WMSæºç è§£æ"/> <meta itemprop="keywords" content="æºç "/> <meta itemprop="datePublished" content="2026-02-05T08:32:33.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="XRay"/> <meta itemprop="url" content="https://juejin.cn/user/3966693685869288"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            WMSæºç è§£æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3966693685869288/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    XRay
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-05T08:32:33.000Z" title="Thu Feb 05 2026 08:32:33 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-05
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€. WMS</h2>
<p>WMS æ˜¯ Android ä¸­å¾ˆé‡è¦çš„ä¸€ä¸ªæœåŠ¡ï¼Œå®ƒæ˜¯ WindowManager çš„ç®¡ç†è€…ï¼ŒWMS æ— è®ºå¯¹äºåº”ç”¨å¼€å‘è¿˜æ˜¯ Framework å¼€å‘æ¥è¯´éƒ½æ˜¯é‡è¦çš„çŸ¥è¯†ç‚¹ï¼Œå…¶åŸå› æ˜¯å› ä¸º WMS æœ‰å¾ˆå¤šèŒè´£ï¼Œæ¯ä¸ªèŒè´£éƒ½ä¼šæ¶‰åŠé‡è¦ä¸”å¤æ‚çš„ç³»ç»Ÿï¼Œè¿™ä½¿å¾— WMS å°±åƒä¸€ä¸ªåå­—è·¯å£çš„äº¤é€šç¯ä¸€æ ·ï¼Œæ²¡æœ‰äº†è¿™ä¸ªäº¤é€šç¯ï¼Œåå­—è·¯å£å°±æ— æ³•æ­£å¸¸é€šè½¦ã€‚</p>
<p>WMS çš„èŒè´£ç®€å•æ¥è¯´ä¸»è¦æœ‰ä»¥ä¸‹å‡ ç‚¹ï¼š</p>
<ol>
<li>çª—å£ç®¡ç†ï¼šWMS æ˜¯çª—å£çš„ç®¡ç†è€…ï¼Œå®ƒè´Ÿè´£çª—å£çš„å¯åŠ¨ã€æ·»åŠ å’Œåˆ é™¤ã€‚å¦å¤–çª—å£çš„å¤§å°å’Œå±‚çº§ä¹Ÿæ˜¯ç”± WMS è¿›è¡Œç®¡ç†çš„ã€‚</li>
<li>çª—å£åŠ¨ç”»ï¼šçª—å£åŠ¨ç”»ç”± WMS çš„åŠ¨ç”»å­ç³»ç»Ÿæ¥è´Ÿè´£ï¼ŒåŠ¨ç”»å­ç³»ç»Ÿçš„ç®¡ç†è€…ä¸º WindowAnimatorã€‚</li>
<li>è¾“å…¥ç³»ç»Ÿä¸­è½¬ç«™ï¼šé€šè¿‡å¯¹çª—å£çš„è§¦æ‘¸ä»è€Œäº§ç”Ÿè§¦æ‘¸äº‹ä»¶ï¼ŒInputManagerServiceï¼ˆIMSï¼‰ä¼šå¯¹è§¦æ‘¸äº‹ä»¶è¿›è¡Œå¤„ç†ï¼Œå®ƒä¼šå¯»æ‰¾ä¸€ä¸ªæœ€åˆé€‚çš„çª—å£æ¥å¤„ç†è§¦æ‘¸åé¦ˆä¿¡æ¯ï¼ŒWMS æ˜¯çª—å£çš„ç®¡ç†è€…ï¼Œå®ƒä½œä¸ºè¾“å…¥ç³»ç»Ÿçš„ä¸­è½¬ç«™å†åˆé€‚ä¸è¿‡äº†ã€‚</li>
<li>Surface ç®¡ç†ï¼šçª—å£ä¸å…·å¤‡ç»˜åˆ¶åŠŸèƒ½ï¼Œå› æ­¤æ¯ä¸ªçª—å£éƒ½éœ€è¦æœ‰ä¸€å— Surface æ¥ä¾›è‡ªå·±ç»˜åˆ¶ï¼Œä¸ºæ¯ä¸ªçª—å£åˆ†é… Surface æ˜¯ç”± WMS æ¥å®Œæˆçš„ã€‚</li>
</ol>
<p>WMSçš„èŒè´£å¯ä»¥ç®€å•æ€»ç»“ä¸ºä¸‹å›¾ï¼š
<img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d32fd0132c804c3c885a8849e73bb679~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=871&amp;h=448&amp;s=23841&amp;e=png&amp;b=ffffff" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-1">äºŒ. WMS çš„é‡è¦æˆå‘˜</h2>
<p>WMS çš„éƒ¨åˆ†æˆå‘˜å˜é‡å¦‚ä¸‹ï¼Œæœ¬æ–‡æºç åŸºäº Android 11.0ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">WindowManagerService</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">IWindowManager</span>.Stub
        <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Watchdog</span>.Monitor, WindowManagerPolicy.WindowManagerFuncs {

    WindowManagerPolicy mPolicy;
    <span class="hljs-keyword">final</span> ArraySet&lt;Session&gt; mSessions = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArraySet</span>&lt;&gt;();
    <span class="hljs-keyword">final</span> HashMap&lt;IBinder, WindowState&gt; mWindowMap = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();

    <span class="hljs-comment">/**
    * Windows that are being resized. Used so we can tell the client about
    * the resize after closing the transaction in which we resized the
    * underlying surface.
    */</span>
    <span class="hljs-keyword">final</span> ArrayList&lt;WindowState&gt; mResizingWindows = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();

    <span class="hljs-comment">/**
    * Windows whose animations have ended and now must be removed.
    */</span>
    <span class="hljs-keyword">final</span> ArrayList&lt;WindowState&gt; mPendingRemove = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();

    <span class="hljs-comment">/**
    * Used when processing mPendingRemove to avoid working on the original array.
    */</span>
    WindowState[] mPendingRemoveTmp = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WindowState</span>[<span class="hljs-number">20</span>];

    <span class="hljs-comment">/**
    * Windows whose surface should be destroyed.
    */</span>
    <span class="hljs-keyword">final</span> ArrayList&lt;WindowState&gt; mDestroySurface = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();

    <span class="hljs-comment">/**
    * Windows with a preserved surface waiting to be destroyed. These windows
    * are going through a surface change. We keep the old surface around until
    * the first frame on the new surface finishes drawing.
    */</span>
    <span class="hljs-keyword">final</span> ArrayList&lt;WindowState&gt; mDestroyPreservedSurface = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();

    <span class="hljs-keyword">final</span> InputManagerService mInputManager;

    <span class="hljs-keyword">final</span> WindowAnimator mAnimator;

    <span class="hljs-keyword">final</span> <span class="hljs-type">H</span> <span class="hljs-variable">mH</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">H</span>();
}
</code></pre>
<h3 data-id="heading-2">1. mPolicyï¼šWindowManagerPolicy</h3>
<p>WindowManagerPolicyï¼ˆWMPï¼‰ç±»å‹çš„å˜é‡ã€‚WindowManagerPolicy æ˜¯çª—å£ç®¡ç†ç­–ç•¥çš„æ¥å£ç±»ï¼Œç”¨æ¥å®šä¹‰ä¸€ä¸ªçª—å£ç­–ç•¥æ‰€è¦éµå¾ªçš„é€šç”¨è§„èŒƒï¼Œå¹¶æä¾›äº† WindowManager æ‰€æœ‰çš„ç‰¹å®šçš„ UI è¡Œä¸ºã€‚å®ƒçš„å…·ä½“å®ç°ç±»ä¸º PhoneWindowManager ï¼Œè¿™ä¸ªå®ç°ç±»åœ¨ WMS åˆ›å»ºæ—¶è¢«åˆ›å»ºã€‚WMP å…è®¸å®šåˆ¶çª—å£å±‚çº§å’Œç‰¹æ®Šçª—å£ç±»å‹ä»¥åŠå…³é”®çš„è°ƒåº¦å’Œå¸ƒå±€ã€‚</p>
<h3 data-id="heading-3">2. mSessionsï¼šArraySet&lt;Session&gt;</h3>
<p>ArraySet&lt;Session&gt; ç±»å‹çš„å˜é‡ã€‚å®ƒä¸»è¦ç”¨äºè¿›ç¨‹é—´é€šä¿¡ï¼Œå…¶ä»–çš„åº”ç”¨ç¨‹åºè¿›ç¨‹æƒ³è¦å’Œ WMS è¿›ç¨‹è¿›è¡Œé€šä¿¡å°±éœ€è¦ç»è¿‡ Session ï¼Œå¹¶ä¸”æ¯ä¸ªåº”ç”¨ç¨‹åºè¿›ç¨‹éƒ½ä¼šå¯¹åº”ä¸€ä¸ª Session ï¼ŒWMS ä¿å­˜è¿™äº› Session ç”¨æ¥è®°å½•æ‰€æœ‰å‘ WMS æå‡ºçª—å£ç®¡ç†æœåŠ¡çš„å®¢æˆ·ç«¯ã€‚</p>
<h3 data-id="heading-4">3. mWindowMapï¼šHashMap&lt;IBinder, WindowState&gt;</h3>
<p>mWindowMap æ˜¯ä¸€ä¸ª HashMapï¼Œkey çš„ç±»å‹ä¸º IBinder ï¼Œvalue çš„ç±»å‹ä¸º WindowState ã€‚WindowState ç”¨äºä¿å­˜çª—å£çš„ä¿¡æ¯ï¼Œåœ¨ WMS ä¸­å®ƒç”¨æ¥æè¿°ä¸€ä¸ªçª—å£ã€‚ç»¼ä¸Šå¾—å‡ºç»“è®ºï¼ŒmWindowMap å°±æ˜¯ç”¨æ¥ä¿å­˜ WMS ä¸­å„ç§çª—å£çš„é›†åˆã€‚</p>
<h3 data-id="heading-5">4.mResizingWindowsï¼šArrayList&lt;WindowState&gt;</h3>
<p>mResizingWindows æ˜¯ç”¨æ¥å­˜å‚¨æ­£åœ¨è°ƒæ•´å¤§å°çš„çª—å£çš„åˆ—è¡¨çš„ã€‚ä¸ mResizingWindows ç±»ä¼¼çš„è¿˜æœ‰ mPendingRemoveã€mDestroySurface å’Œ mDestroyPreservedSurface ç­‰ï¼Œå…¶ä¸­ mPendingRemove æ˜¯åœ¨å†…å­˜è€—å°½æ—¶è®¾ç½®çš„ï¼Œé‡Œé¢å­˜æœ‰éœ€è¦å¼ºåˆ¶åˆ é™¤çš„çª—å£ï¼ŒmDestroySurface é‡Œé¢å­˜æœ‰éœ€è¦è¢«é”€æ¯çš„Surfaceï¼ŒmDestroyPreservedSurface é‡Œé¢å­˜æœ‰çª—å£éœ€è¦ä¿å­˜çš„ç­‰å¾…é”€æ¯çš„ Surfaceï¼Œä¸ºä»€ä¹ˆçª—å£è¦ä¿å­˜è¿™äº› Surface ï¼Ÿè¿™æ˜¯å› ä¸ºå½“çª—å£ç»å† Surface å˜åŒ–æ—¶ï¼Œçª—å£éœ€è¦ä¸€ç›´ä¿æŒæ—§çš„ Surfaceï¼Œç›´åˆ°æ–° Surface çš„ç¬¬ä¸€å¸§ç»˜åˆ¶å®Œæˆã€‚</p>
<h3 data-id="heading-6">5.mAnimatorï¼šWindowAnimator</h3>
<p>mAnimator æ˜¯ WindowAnimator ç±»å‹çš„å˜é‡ï¼Œç”¨äºç®¡ç†çª—å£çš„åŠ¨ç”»ä»¥åŠç‰¹æ•ˆåŠ¨ç”»ã€‚</p>
<h3 data-id="heading-7">6.mHï¼šH</h3>
<p>mH æ˜¯ H ç±»å‹çš„å˜é‡ï¼Œç³»ç»Ÿçš„ Handler ç±»ï¼Œç”¨äºå°†ä»»åŠ¡åŠ å…¥åˆ°ä¸»çº¿ç¨‹çš„æ¶ˆæ¯é˜Ÿåˆ—ä¸­ï¼Œè¿™æ ·ä»£ç é€»è¾‘å°±ä¼šåœ¨ä¸»çº¿ç¨‹ä¸­æ‰§è¡Œã€‚</p>
<h3 data-id="heading-8">7.mInputManagerï¼šInputManagerService</h3>
<p>InputManagerService ç±»å‹çš„å˜é‡ï¼Œè¾“å…¥ç³»ç»Ÿçš„ç®¡ç†è€…ã€‚InputManagerServiceï¼ˆIMSï¼‰ä¼šå¯¹è§¦æ‘¸äº‹ä»¶è¿›è¡Œå¤„ç†ï¼Œå®ƒä¼šå¯»æ‰¾ä¸€ä¸ªæœ€åˆé€‚çš„çª—å£æ¥å¤„ç†è§¦æ‘¸åé¦ˆä¿¡æ¯ï¼ŒWMS æ˜¯çª—å£çš„ç®¡ç†è€…ï¼Œå› æ­¤ï¼ŒWMS â€œç†æ‰€åº”å½“â€ çš„æˆä¸ºäº†è¾“å…¥ç³»ç»Ÿçš„ä¸­è½¬ç«™ã€‚</p>
<p>è¿˜éœ€è¦ç†è§£çš„å‡ ä¸ªæ¦‚å¿µï¼š</p>
<p><strong>WindowToken</strong>ï¼š</p>
<ul>
<li>å¯ä»¥ç†è§£ä¸ºçª—å£ä»¤ç‰Œï¼Œå½“åº”ç”¨ç¨‹åºæƒ³è¦å‘ WMS ç”³è¯·æ–°åˆ›å»ºä¸€ä¸ªçª—å£ï¼Œåˆ™éœ€è¦å‘ WMS å‡ºç¤ºæœ‰æ•ˆçš„ WindowTokenã€‚WindowToken ä¼šå°†ç›¸åŒç»„ä»¶ï¼ˆæ¯”å¦‚åŒä¸€ä¸ªAcitivityï¼‰çš„çª—å£ï¼ˆWindowStateï¼‰é›†åˆåœ¨ä¸€èµ·ï¼Œæ–¹ä¾¿ç®¡ç†ã€‚</li>
</ul>
<p><strong>WindowState</strong>:</p>
<ul>
<li>WindowState è¡¨ç¤ºä¸€ä¸ªçª—å£çš„æ‰€æœ‰å±æ€§ï¼Œä¸”å­˜åœ¨äº WMS ç«¯ï¼Œæ‰€ä»¥å®ƒæ˜¯ WMS ä¸­äº‹å®ä¸Šçš„çª—å£ã€‚App ç«¯çš„ä¸€ä¸ª Windowï¼Œåœ¨ WMS ç«¯å°±ä¼šæœ‰ä¸€ä¸ª WindowState ã€‚</li>
</ul>
<h2 data-id="heading-9">ä¸‰. Window çš„æ·»åŠ è¿‡ç¨‹ï¼ˆWMS å¤„ç†çš„éƒ¨åˆ†ï¼‰</h2>
<p>å¯¹ Window çš„æ“ä½œåˆ†ä¸ºä¸¤å¤§éƒ¨åˆ†ï¼Œä¸€éƒ¨åˆ†æ˜¯ WindowManger çš„å¤„ç†ï¼Œåœ¨ <a href="https://juejin.cn/post/7602259669706801178" target="_blank" title="https://juejin.cn/post/7602259669706801178">Windowå’ŒWindowManageræºç è§£æ</a> ä¸­å·²ç»åˆ†æè¿‡ï¼Œå¦ä¸€éƒ¨åˆ†æ˜¯ WMS çš„å¤„ç†ï¼Œè¿™é‡Œæˆ‘ä»¬æ¥åˆ†æ WMS å¤„ç†çš„éƒ¨åˆ†ã€‚Window çš„æ·»åŠ è¿‡ç¨‹éƒ½ä¼šè°ƒç”¨ WMS çš„ addWindow() æ–¹æ³•ï¼Œç”±äºè¿™ä¸ªæ–¹æ³•ä»£ç é€»è¾‘æ¯”è¾ƒå¤šï¼Œè¿™é‡Œåˆ†æˆ3ä¸ªéƒ¨åˆ†æ¥åˆ†æã€‚</p>
<h3 data-id="heading-10">3.1 çª—å£æ£€æŸ¥</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">WindowManagerService</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">IWindowManager</span>.Stub
        <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Watchdog</span>.Monitor, WindowManagerPolicy.WindowManagerFuncs {

    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">addWindow</span><span class="hljs-params">(Session session, IWindow client, <span class="hljs-type">int</span> seq,
                         LayoutParams attrs, <span class="hljs-type">int</span> viewVisibility, <span class="hljs-type">int</span> displayId, Rect outFrame,
                         Rect outContentInsets, Rect outStableInsets,
                         DisplayCutout.ParcelableWrapper outDisplayCutout, InputChannel outInputChannel,
                         InsetsState outInsetsState, InsetsSourceControl[] outActiveControls,
                         <span class="hljs-type">int</span> requestUserId)</span> {
        Arrays.fill(outActiveControls, <span class="hljs-literal">null</span>);
        <span class="hljs-type">int</span>[] appOp = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[<span class="hljs-number">1</span>];
        <span class="hljs-keyword">final</span> <span class="hljs-type">boolean</span> <span class="hljs-variable">isRoundedCornerOverlay</span> <span class="hljs-operator">=</span> (attrs.privateFlags
                &amp; PRIVATE_FLAG_IS_ROUNDED_CORNERS_OVERLAY) != <span class="hljs-number">0</span>;
        <span class="hljs-comment">// è°ƒç”¨ WindowManagerPolicy çš„ checkAddPermission() æ–¹æ³•æ¥æ£€æŸ¥æƒé™ </span>
        <span class="hljs-type">int</span> <span class="hljs-variable">res</span> <span class="hljs-operator">=</span> mPolicy.checkAddPermission(attrs.type, isRoundedCornerOverlay, attrs.packageName,
                appOp);
        <span class="hljs-keyword">if</span> (res != WindowManagerGlobal.ADD_OKAY) {
            <span class="hljs-keyword">return</span> res;
        }
        ...
        <span class="hljs-keyword">synchronized</span> (mGlobalLock) {
            ...
            <span class="hljs-comment">// é€šè¿‡ DisplayId æ¥è·å¾—çª—å£è¦æ·»åŠ åˆ°å“ªä¸ª DisplayContent ä¸Š</span>
            <span class="hljs-keyword">final</span> <span class="hljs-type">DisplayContent</span> <span class="hljs-variable">displayContent</span> <span class="hljs-operator">=</span> getDisplayContentOrCreate(displayId, attrs.token);

            <span class="hljs-comment">// å¦‚æœæ²¡æœ‰æ‰¾åˆ° DisplayContentï¼Œè¿”å› WindowManagerGlobal.ADD_INVALID_DISPLAY</span>
            <span class="hljs-keyword">if</span> (displayContent == <span class="hljs-literal">null</span>) {
                ProtoLog.w(WM_ERROR, <span class="hljs-string">"Attempted to add window to a display that does "</span>
                        + <span class="hljs-string">"not exist: %d. Aborting."</span>, displayId);
                <span class="hljs-keyword">return</span> WindowManagerGlobal.ADD_INVALID_DISPLAY;
            }
            <span class="hljs-keyword">if</span> (!displayContent.hasAccess(session.mUid)) {
                ProtoLog.w(WM_ERROR,
                        <span class="hljs-string">"Attempted to add window to a display for which the application "</span>
                                + <span class="hljs-string">"does not have access: %d. Aborting."</span>, displayId);
                <span class="hljs-keyword">return</span> WindowManagerGlobal.ADD_INVALID_DISPLAY;
            }

            <span class="hljs-keyword">if</span> (mWindowMap.containsKey(client.asBinder())) {
                ProtoLog.w(WM_ERROR, <span class="hljs-string">"Window %s is already added"</span>, client);
                <span class="hljs-keyword">return</span> WindowManagerGlobal.ADD_DUPLICATE_ADD;
            }

            <span class="hljs-comment">// type åœ¨ FIRST_SUB_WINDOW ä¸ LAST_SUB_WINDOW ä¹‹é—´ï¼ˆ1000~1999ï¼‰ï¼Œè¯´æ˜æ˜¯å­çª—å£</span>
            <span class="hljs-keyword">if</span> (type &gt;= FIRST_SUB_WINDOW &amp;&amp; type &lt;= LAST_SUB_WINDOW) {
                <span class="hljs-comment">// attrs.token æ˜¯ IBinder ç±»å‹çš„å¯¹è±¡</span>
                parentWindow = windowForClientLocked(<span class="hljs-literal">null</span>, attrs.token, <span class="hljs-literal">false</span>);
                <span class="hljs-keyword">if</span> (parentWindow == <span class="hljs-literal">null</span>) {
                    ProtoLog.w(WM_ERROR, <span class="hljs-string">"Attempted to add window with token that is not a window: "</span>
                            + <span class="hljs-string">"%s. Aborting."</span>, attrs.token);
                    <span class="hljs-keyword">return</span> WindowManagerGlobal.ADD_BAD_SUBWINDOW_TOKEN;
                }
                <span class="hljs-keyword">if</span> (parentWindow.mAttrs.type &gt;= FIRST_SUB_WINDOW
                        &amp;&amp; parentWindow.mAttrs.type &lt;= LAST_SUB_WINDOW) {
                    ProtoLog.w(WM_ERROR, <span class="hljs-string">"Attempted to add window with token that is a sub-window: "</span>
                            + <span class="hljs-string">"%s. Aborting."</span>, attrs.token);
                    <span class="hljs-keyword">return</span> WindowManagerGlobal.ADD_BAD_SUBWINDOW_TOKEN;
                }
            }
        }
        ...
        <span class="hljs-keyword">return</span> res;
    }
}
</code></pre>
<p>WMS çš„ addWindow() çš„è¿”å›å€¼è¡¨ç¤ºçš„æ˜¯ addWindow() çš„å„ç§çŠ¶æ€ï¼Œæ˜¯ä¸€ä¸ª int å€¼ï¼Œå®šä¹‰åœ¨ WindowManagerGlobal ä¸­ã€‚åœ¨ addWindow() æ–¹æ³•ä¸­å…ˆè°ƒç”¨ WindowManagerPolicy çš„ checkAddPermission() æ–¹æ³•æ¥æ£€æŸ¥æƒé™ï¼Œå…·ä½“åœ¨ PhoneWindowManager çš„ checkAddPermission() æ–¹æ³•ä¸­å®ç°ï¼Œå¦‚æœæ²¡æœ‰æƒé™å°±ä¸ä¼šæ‰§è¡Œåç»­çš„ä»£ç é€»è¾‘ã€‚ç„¶åé€šè¿‡ DisplayId æ¥è·å¾—çª—å£è¦æ·»åŠ åˆ°å“ªä¸ª DisplayContent ä¸Šï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ° DisplayContent ï¼Œè¿”å› ADD_INVALID_DISPLAYï¼Œå…¶ä¸­ DisplayContent æ˜¯ç”¨æ¥æè¿°ä¸€å—å±å¹•çš„ã€‚å…¶ä¸­ type è¡¨ç¤ºçª—å£çš„ç±»å‹ï¼Œå¦‚æœä»‹äº FIRST_SUB_WINDOW å’Œ LAST_SUB_WINDOW ä¹‹é—´ï¼Œè¯´æ˜è¿™ä¸ªçª—å£æ˜¯ä¸€ä¸ªå­çª—å£ï¼Œè¦æ‹¿åˆ°çˆ¶çª—å£çš„ WindowStateï¼Œattrs.token æ˜¯ IBinder ç±»å‹ï¼ŒwindowForClientLocked() æ–¹æ³•ä¼šæ ¹æ® attrs.token ä½œä¸º key å€¼ä» mWindowMap ä¸­å¾—åˆ°è¯¥å­çª—å£çš„çˆ¶çª—å£ã€‚æ¥ç€å¯¹çˆ¶çª—å£è¿›è¡Œåˆ¤æ–­ï¼Œå¦‚æœçˆ¶çª—å£çš„ WindowState ä¸º null æˆ–è€…çˆ¶çª—å£çš„ type ä¹Ÿæ˜¯å­çª—å£çš„èŒƒå›´ï¼Œä¼šè¿”å›é”™è¯¯çŠ¶æ€ã€‚</p>
<h3 data-id="heading-11">3.2 WindowToken ç›¸å…³å¤„ç†</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// é€šè¿‡ DisplayContent å°è¯•è·å– WindowToken </span>
<span class="hljs-type">WindowToken</span> <span class="hljs-variable">token</span> <span class="hljs-operator">=</span> displayContent.getWindowToken(
        hasParent ? parentWindow.mAttrs.token : attrs.token);
<span class="hljs-comment">// If this is a child window, we want to apply the same type checking rules as the</span>
<span class="hljs-comment">// parent window type.</span>
<span class="hljs-comment">// å¦‚æœæœ‰çˆ¶çª—å£ï¼Œå°±å°†çˆ¶çª—å£çš„ type èµ‹å€¼ç»™ rootTypeï¼Œå¦‚æœæ²¡æœ‰å°±å°†å½“å‰çª—å£çš„ type èµ‹å€¼ç»™ rootType</span>
<span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">rootType</span> <span class="hljs-operator">=</span> hasParent ? parentWindow.mAttrs.type : type;

<span class="hljs-type">boolean</span> <span class="hljs-variable">addToastWindowRequiresToken</span> <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>;

<span class="hljs-comment">// å¦‚æœ token ä¸º null</span>
<span class="hljs-keyword">if</span> (token == <span class="hljs-literal">null</span>) {
    <span class="hljs-comment">// ä½¿ç”¨ unprivilegedAppCanCreateTokenWith() æ–¹æ³•å¯¹ rootType å’Œ type è¿›è¡Œæ£€æŸ¥</span>
    <span class="hljs-keyword">if</span> (!unprivilegedAppCanCreateTokenWith(parentWindow, callingUid, type,
            rootType, attrs.token, attrs.packageName)) {
        <span class="hljs-keyword">return</span> WindowManagerGlobal.ADD_BAD_APP_TOKEN;
    }
    <span class="hljs-keyword">final</span> <span class="hljs-type">IBinder</span> <span class="hljs-variable">binder</span> <span class="hljs-operator">=</span> attrs.token != <span class="hljs-literal">null</span> ? attrs.token : client.asBinder();
    <span class="hljs-comment">// åˆ›å»º WindowTokenï¼Œç¬¬ 4 ä¸ªå‚æ•°ä¸º false ï¼Œè¡¨ç¤ºè¿™ä¸ª WindowToken æ˜¯éšå¼åˆ›å»ºçš„</span>
    token = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WindowToken</span>(<span class="hljs-built_in">this</span>, binder, type, <span class="hljs-literal">false</span>, displayContent,
            session.mCanAddInternalSystemWindow, isRoundedCornerOverlay);
} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (rootType &gt;= FIRST_APPLICATION_WINDOW
        &amp;&amp; rootType &lt;= LAST_APPLICATION_WINDOW) {
    activity = token.asActivityRecord();
    <span class="hljs-keyword">if</span> (activity == <span class="hljs-literal">null</span>) {
        ProtoLog.w(WM_ERROR, <span class="hljs-string">"Attempted to add window with non-application token "</span>
                + <span class="hljs-string">".%s Aborting."</span>, token);
        <span class="hljs-keyword">return</span> WindowManagerGlobal.ADD_NOT_APP_TOKEN;
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (activity.getParent() == <span class="hljs-literal">null</span>) {
        ProtoLog.w(WM_ERROR, <span class="hljs-string">"Attempted to add window with exiting application token "</span>
                + <span class="hljs-string">".%s Aborting."</span>, token);
        <span class="hljs-keyword">return</span> WindowManagerGlobal.ADD_APP_EXITING;
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (type == TYPE_APPLICATION_STARTING &amp;&amp; activity.startingWindow != <span class="hljs-literal">null</span>) {
        ProtoLog.w(WM_ERROR,
                <span class="hljs-string">"Attempted to add starting window to token with already existing"</span>
                        + <span class="hljs-string">" starting window"</span>);
        <span class="hljs-keyword">return</span> WindowManagerGlobal.ADD_DUPLICATE_ADD;
    }
} 
...
</code></pre>
<p>è¿™é‡Œå…ˆé€šè¿‡ DisplayContent çš„ getWindowToken() æ–¹æ³•å°è¯•è·å– WindowToken ï¼Œå¦‚æœæœ‰çˆ¶çª—å£ï¼Œå°±å°†çˆ¶çª—å£çš„ type èµ‹å€¼ç»™ rootType ï¼Œå¦‚æœæ²¡æœ‰ï¼Œå°±å°†å½“å‰çª—å£çš„ type èµ‹å€¼ç»™ rootType ã€‚æ¥ä¸‹æ¥å¦‚æœ token ä¸º null ï¼Œä½¿ç”¨ unprivilegedAppCanCreateTokenWith() æ–¹æ³•å¯¹ rootType å’Œ type è¿›è¡Œæ£€æŸ¥ï¼Œé‡Œé¢æ£€æŸ¥å¦‚æœ rootType å€¼ç­‰äº TYPE_INPUT_METHODã€TYPE_WALLPAPER ç­‰å€¼æ—¶ï¼Œåˆ™è¿”å› ADD_BAD_APP_TOKENï¼Œè¯´æ˜ rootType å€¼ç­‰äº TYPE_INPUT_METHODã€TYPE_WALLPAPER ç­‰å€¼æ—¶æ˜¯ä¸å…è®¸ WindowToken ä¸º null çš„ã€‚å¦‚æœæ£€æŸ¥é€šè¿‡äº†ï¼Œä¼šåˆ›å»º WidowTokenï¼Œè¿™è¯´æ˜å½“æˆ‘ä»¬æ·»åŠ çª—å£æ—¶å¯ä»¥ä¸å‘ WMS æä¾› WindowTokenï¼Œå‰ææ˜¯ rootType å’Œ type çš„å€¼ä¸ä¸ºå‰é¢æ¡ä»¶åˆ¤æ–­ç­›é€‰çš„å€¼ã€‚WindowToken éšå¼å’Œæ˜¾å¼çš„åˆ›å»ºè‚¯å®šæ˜¯è¦åŠ ä»¥åŒºåˆ†çš„ï¼Œåˆ›å»º WidowToken ä¼ å…¥çš„ç¬¬ 4 ä¸ªå‚æ•°ä¸º false å°±è¡¨ç¤ºè¿™ä¸ª WindowToken æ˜¯éšå¼åˆ›å»ºçš„ã€‚</p>
<p>æ¥ä¸‹æ¥çš„ä»£ç é€»è¾‘å°±æ˜¯ WindowToken ä¸ä¸º null çš„æƒ…å†µï¼Œæ ¹æ® rootType å’Œ type çš„å€¼è¿›è¡Œåˆ¤æ–­ã€‚å…ˆåˆ¤æ–­å¦‚æœçª—å£ä¸ºåº”ç”¨ç¨‹åºçª—å£ï¼Œé€šè¿‡ WindowToken çš„ asActivityRecord() æ–¹æ³•æ‹¿åˆ° ActivityRecordï¼Œç„¶åæ ¹æ® ActivityRecord è¿›è¡Œåç»­çš„åˆ¤æ–­ï¼Œè¿”å›ä¸åŒçš„çŠ¶æ€ç ã€‚</p>
<h3 data-id="heading-12">3.3 WindowState çš„åˆ›å»ºå’Œå¤„ç†</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// åˆ›å»º WindowStateï¼Œå®ƒå­˜æœ‰çª—å£çš„æ‰€æœ‰çŠ¶æ€ä¿¡æ¯ï¼Œåœ¨ WMS ä¸­å®ƒä»£è¡¨ä¸€ä¸ªçª—å£ï¼Œ</span>
<span class="hljs-comment">// this æŒ‡çš„æ˜¯ WMSï¼Œclient æŒ‡çš„æ˜¯ IWindowï¼Œ token æŒ‡çš„æ˜¯ WindowTokenã€‚</span>
<span class="hljs-keyword">final</span> <span class="hljs-type">WindowState</span> <span class="hljs-variable">win</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">WindowState</span>(<span class="hljs-built_in">this</span>, session, client, token, parentWindow,
        appOp[<span class="hljs-number">0</span>], seq, attrs, viewVisibility, session.mUid, userId,
        session.mCanAddInternalSystemWindow);

<span class="hljs-comment">// åˆ¤æ–­è¯·æ±‚æ·»åŠ çª—å£çš„å®¢æˆ·ç«¯æ˜¯å¦å·²ç»æ­»äº¡ </span>
<span class="hljs-keyword">if</span> (win.mDeathRecipient == <span class="hljs-literal">null</span>) {
    <span class="hljs-comment">// Client has apparently died, so there is no reason to</span>
    <span class="hljs-comment">// continue.</span>
    ProtoLog.w(WM_ERROR, <span class="hljs-string">"Adding window client %s"</span>
            + <span class="hljs-string">" that is dead, aborting."</span>, client.asBinder());
    <span class="hljs-keyword">return</span> WindowManagerGlobal.ADD_APP_EXITING;
}

<span class="hljs-comment">// åˆ¤æ–­çª—å£çš„ DisplayContent æ˜¯å¦ä¸º null</span>
<span class="hljs-keyword">if</span> (win.getDisplayContent() == <span class="hljs-literal">null</span>) {
    ProtoLog.w(WM_ERROR, <span class="hljs-string">"Adding window to Display that has been removed."</span>);
    <span class="hljs-keyword">return</span> WindowManagerGlobal.ADD_INVALID_DISPLAY;
}

<span class="hljs-keyword">final</span> <span class="hljs-type">DisplayPolicy</span> <span class="hljs-variable">displayPolicy</span> <span class="hljs-operator">=</span> displayContent.getDisplayPolicy();
<span class="hljs-comment">// æ ¹æ®çª—å£çš„ type å¯¹çª—å£çš„ LayoutParams çš„ä¸€äº›æˆå‘˜å˜é‡è¿›è¡Œä¿®æ”¹</span>
displayPolicy.adjustWindowParamsLw(win, win.mAttrs, callingPid, callingUid);
<span class="hljs-comment">// æ ¹æ®çª—å£çš„ type æ£€æŸ¥æ˜¯å¦å¯ä»¥æŠŠè¿™ä¸ªçª—å£æ·»åŠ åˆ°ç³»ç»Ÿä¸­</span>
res = displayPolicy.validateAddingWindowLw(attrs, callingPid, callingUid);
<span class="hljs-keyword">if</span> (res != WindowManagerGlobal.ADD_OKAY) {
    <span class="hljs-keyword">return</span> res;
}
...
win.attach();
<span class="hljs-comment">//å°† WindowState æ·»åŠ åˆ° mWindowMap ä¸­</span>
mWindowMap.put(client.asBinder(), win);
win.initAppOpsState();

<span class="hljs-keyword">final</span> <span class="hljs-type">boolean</span> <span class="hljs-variable">suspended</span> <span class="hljs-operator">=</span> mPmInternal.isPackageSuspended(win.getOwningPackage(),
        UserHandle.getUserId(win.getOwningUid()));
win.setHiddenWhileSuspended(suspended);

<span class="hljs-keyword">final</span> <span class="hljs-type">boolean</span> <span class="hljs-variable">hideSystemAlertWindows</span> <span class="hljs-operator">=</span> !mHidingNonSystemOverlayWindows.isEmpty();
win.setForceHideNonSystemOverlayWindowIfNeeded(hideSystemAlertWindows);

<span class="hljs-keyword">final</span> <span class="hljs-type">ActivityRecord</span> <span class="hljs-variable">tokenActivity</span> <span class="hljs-operator">=</span> token.asActivityRecord();
<span class="hljs-keyword">if</span> (type == TYPE_APPLICATION_STARTING &amp;&amp; tokenActivity != <span class="hljs-literal">null</span>) {
    tokenActivity.startingWindow = win;
    ProtoLog.v(WM_DEBUG_STARTING_WINDOW, <span class="hljs-string">"addWindow: %s startingWindow=%s"</span>,
            activity, win);
}

<span class="hljs-type">boolean</span> <span class="hljs-variable">imMayMove</span> <span class="hljs-operator">=</span> <span class="hljs-literal">true</span>;
<span class="hljs-comment">//å°† WindowState æ·»åŠ åˆ°è¯¥ WindowState å¯¹åº”çš„ WindowToken ä¸­</span>
win.mToken.addWindow(win);
displayPolicy.addWindowLw(win, attrs);
<span class="hljs-keyword">if</span> (type == TYPE_INPUT_METHOD) {
    displayContent.setInputMethodWindowLocked(win);
    imMayMove = <span class="hljs-literal">false</span>;
} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (type == TYPE_INPUT_METHOD_DIALOG) {
    displayContent.computeImeTarget(<span class="hljs-literal">true</span> <span class="hljs-comment">/* updateImeTarget */</span>);
    imMayMove = <span class="hljs-literal">false</span>;
} <span class="hljs-keyword">else</span> {
    <span class="hljs-keyword">if</span> (type == TYPE_WALLPAPER) {
        displayContent.mWallpaperController.clearLastWallpaperTimeoutTime();
        displayContent.pendingLayoutChanges |= FINISH_LAYOUT_REDO_WALLPAPER;
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ((attrs.flags &amp; FLAG_SHOW_WALLPAPER) != <span class="hljs-number">0</span>) {
        displayContent.pendingLayoutChanges |= FINISH_LAYOUT_REDO_WALLPAPER;
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (displayContent.mWallpaperController.isBelowWallpaperTarget(win)) {
        <span class="hljs-comment">// If there is currently a wallpaper being shown, and</span>
        <span class="hljs-comment">// the base layer of the new window is below the current</span>
        <span class="hljs-comment">// layer of the target window, then adjust the wallpaper.</span>
        <span class="hljs-comment">// This is to avoid a new window being placed between the</span>
        <span class="hljs-comment">// wallpaper and its target.</span>
        displayContent.pendingLayoutChanges |= FINISH_LAYOUT_REDO_WALLPAPER;
    }
}
...
</code></pre>
<p>å…ˆåˆ›å»ºäº† WindowStateï¼Œå®ƒå­˜æœ‰çª—å£çš„æ‰€æœ‰çš„çŠ¶æ€ä¿¡æ¯ï¼Œåœ¨ WMS ä¸­å®ƒä»£è¡¨ä¸€ä¸ªçª—å£ã€‚åœ¨åˆ›å»º WindowState ä¼ å…¥çš„å‚æ•°ä¸­ï¼Œthis æŒ‡çš„æ˜¯ WMSï¼Œclient æŒ‡çš„æ˜¯ IWindowï¼ŒIWindow ä¼šå°† WMS ä¸­çª—å£ç®¡ç†çš„æ“ä½œå›è°ƒç»™ ViewRootImplï¼Œtoken æŒ‡çš„æ˜¯ WindowToken ï¼Œç´§æ¥ç€åˆ†åˆ«åˆ¤æ–­è¯·æ±‚æ·»åŠ çª—å£çš„å®¢æˆ·ç«¯æ˜¯å¦å·²ç»æ­»äº¡ã€çª—å£çš„
DisplayContent æ˜¯å¦ä¸º nullï¼Œå¦‚æœæ˜¯åˆ™ä¸ä¼šå†æ‰§è¡Œä¸‹é¢çš„ä»£ç é€»è¾‘ã€‚ç„¶åè°ƒç”¨äº† DisplayPolicy çš„ adiustWindowParamsLw() æ–¹æ³•ï¼Œæ­¤æ–¹æ³•ä¼šæ ¹æ®çª—å£çš„ type å¯¹çª—å£çš„ LayoutParams çš„ä¸€äº›æˆå‘˜å˜é‡è¿›è¡Œä¿®æ”¹ã€‚ç„¶åè°ƒç”¨ DisplayPolicy çš„ validateAddingWindowLw() æ–¹æ³•ï¼Œç”¨äºæ£€æŸ¥æ˜¯å¦å¯ä»¥æŠŠè¿™ä¸ªçª—å£æ·»åŠ åˆ°ç³»ç»Ÿä¸­ã€‚æ¥ç€å°† WindowState æ·»åŠ åˆ° mWindowMap ä¸­ï¼Œç„¶åå°† WindowState æ·»åŠ åˆ°è¯¥ WindowState å¯¹åº”çš„ WindowToken ä¸­ï¼ˆå®é™…æ˜¯ä¿å­˜åœ¨ WndowToken çš„çˆ¶ç±» WindowContainer ä¸­ï¼‰ï¼Œè¿™æ · WindowToken å°±åŒ…å«äº†åŒä¸€ä¸ªç»„ä»¶çš„ WindowStateã€‚</p>
<h3 data-id="heading-13">3.4 addWindow()æ–¹æ³•æ€»ç»“</h3>
<p>addWindow() æ–¹æ³•åˆ†äº† 3 ä¸ªéƒ¨åˆ†æ¥è¿›è¡Œè®²è§£ï¼Œä¸»è¦å°±æ˜¯åšäº†ä¸‹é¢ 4 ä»¶äº‹:</p>
<ol>
<li>å¯¹æ‰€è¦æ·»åŠ çš„çª—å£è¿›è¡Œæ£€æŸ¥ï¼Œå¦‚æœçª—å£ä¸æ»¡è¶³ä¸€äº›æ¡ä»¶ï¼Œå°±ä¸ä¼šå†æ‰§è¡Œä¸‹é¢çš„ä»£ç é€»è¾‘ã€‚</li>
<li>WindowToken ç›¸å…³çš„å¤„ç†ï¼Œæ¯”å¦‚æœ‰çš„çª—å£ç±»å‹éœ€è¦æä¾› WindowToken ï¼Œæ²¡æœ‰æä¾›çš„è¯å°±ä¸ä¼šæ‰§è¡Œä¸‹é¢çš„ä»£ç é€»è¾‘ï¼Œæœ‰çš„çª—å£ç±»å‹åˆ™å¯ä»¥ç”± WMS éšå¼åˆ›å»º WindowTokenã€‚</li>
<li>WindowStateçš„åˆ›å»ºå’Œç›¸å…³å¤„ç†ï¼Œå°† WindowToken å’Œ WindowState ç›¸å…³è”ã€‚</li>
<li>åˆ›å»ºå’Œé…ç½® DisplayContentï¼Œå®Œæˆçª—å£æ·»åŠ åˆ°ç³»ç»Ÿå‰çš„å‡†å¤‡å·¥ä½œã€‚</li>
</ol>
<h2 data-id="heading-14">å››. Window çš„åˆ é™¤è¿‡ç¨‹</h2>
<p>Window çš„åˆ é™¤è¿‡ç¨‹ä¼šè°ƒç”¨ WMS çš„ removeWindow() æ–¹æ³•ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">void</span> <span class="hljs-title function_">removeWindow</span><span class="hljs-params">(Session session, IWindow client)</span> {
    <span class="hljs-keyword">synchronized</span> (mGlobalLock) {
        <span class="hljs-type">WindowState</span> <span class="hljs-variable">win</span> <span class="hljs-operator">=</span> windowForClientLocked(session, client, <span class="hljs-literal">false</span>); <span class="hljs-comment">// 1</span>
        <span class="hljs-keyword">if</span> (win != <span class="hljs-literal">null</span>) {
            win.removeIfPossible(); <span class="hljs-comment">// 2</span>
            <span class="hljs-keyword">return</span>;
        }

        <span class="hljs-comment">// Remove embedded window map if the token belongs to an embedded window</span>
        mEmbeddedWindowController.remove(client);
    }
}
</code></pre>
<p>åœ¨æ³¨é‡Š 1 å¤„è·å– Window å¯¹åº”çš„ WindowStateï¼ŒWindowState ç”¨äºä¿å­˜çª—å£çš„ä¿¡æ¯ï¼Œåœ¨ WMS ä¸­å®ƒç”¨æ¥æè¿°ä¸€ä¸ªçª—å£ã€‚æ¥ç€åœ¨æ³¨é‡Š 2 å¤„è°ƒç”¨ WindowState çš„ removelfPossible() æ–¹æ³•ï¼Œå¦‚ä¸‹æ‰€ç¤º:</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">void</span> <span class="hljs-title function_">removeIfPossible</span><span class="hljs-params">()</span> {
    <span class="hljs-built_in">super</span>.removeIfPossible();
    removeIfPossible(<span class="hljs-literal">false</span> <span class="hljs-comment">/*keepVisibleDeadWindow*/</span>);
    immediatelyNotifyBlastSync();
}
</code></pre>
<p>é‡Œé¢æ¥ç€åˆè°ƒç”¨äº†å¸¦å‚æ•°çš„ removeIfPossible() æ–¹æ³•ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">removeIfPossible</span><span class="hljs-params">(<span class="hljs-type">boolean</span> keepVisibleDeadWindow)</span> {
    <span class="hljs-comment">// æ¡ä»¶åˆ¤æ–­è¿‡æ»¤ï¼Œæ»¡è¶³å…¶ä¸­ä¸€ä¸ªæ¡ä»¶å°±ä¼š returnï¼Œæ¨è¿Ÿåˆ é™¤æ“ä½œ</span>
    ...
    removeImmediately(); <span class="hljs-comment">// 1</span>
    <span class="hljs-comment">// Removing a visible window will effect the computed orientation</span>
    <span class="hljs-comment">// So just update orientation if needed.</span>
    <span class="hljs-keyword">if</span> (wasVisible) {
        <span class="hljs-keyword">final</span> <span class="hljs-type">DisplayContent</span> <span class="hljs-variable">displayContent</span> <span class="hljs-operator">=</span> getDisplayContent();
        <span class="hljs-keyword">if</span> (displayContent.updateOrientation()) {
            displayContent.sendNewConfiguration();
        }
    }
    mWmService.updateFocusedWindowLocked(isFocused()
                    ? UPDATE_FOCUS_REMOVING_FOCUS
                    : UPDATE_FOCUS_NORMAL,
            <span class="hljs-literal">true</span> <span class="hljs-comment">/*updateInputWindows*/</span>);
}
</code></pre>
<p>removelfPossible() æ–¹æ³•å’Œå®ƒçš„åå­—ä¸€æ ·ï¼Œå¹¶ä¸æ˜¯ç›´æ¥æ‰§è¡Œåˆ é™¤æ“ä½œçš„ï¼Œè€Œæ˜¯è¿›è¡Œå¤šä¸ªæ¡ä»¶åˆ¤æ–­è¿‡æ»¤ï¼Œæ»¡è¶³å…¶ä¸­ä¸€ä¸ªæ¡ä»¶å°±ä¼š returnï¼Œæ¨è¿Ÿåˆ é™¤æ“ä½œã€‚æ¯”å¦‚ View æ­£åœ¨è¿è¡Œä¸€ä¸ªåŠ¨ç”»è¿™æ—¶å°±å¾—æ¨è¿Ÿåˆ é™¤æ“ä½œï¼Œç›´åˆ°åŠ¨ç”»å®Œæˆã€‚é€šè¿‡è¿™äº›æ¡ä»¶åˆ¤æ–­è¿‡æ»¤å°±ä¼šæ‰§è¡Œæ³¨é‡Š 1 å¤„çš„ removeImmediately() æ–¹æ³•:</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">void</span> <span class="hljs-title function_">removeImmediately</span><span class="hljs-params">()</span> {
    <span class="hljs-built_in">super</span>.removeImmediately();

    <span class="hljs-keyword">if</span> (mRemoved) { <span class="hljs-comment">// 1</span>
        <span class="hljs-comment">// Nothing to do.</span>
        ProtoLog.v(WM_DEBUG_ADD_REMOVE,
                <span class="hljs-string">"WS.removeImmediately: %s Already removed..."</span>, <span class="hljs-built_in">this</span>);
        <span class="hljs-keyword">return</span>;
    }

    mRemoved = <span class="hljs-literal">true</span>; 

    ...
    dc.getDisplayPolicy().removeWindowLw(<span class="hljs-built_in">this</span>); <span class="hljs-comment">// 2</span>

    disposeInputChannel();

    mWinAnimator.destroyDeferredSurfaceLocked();
    mWinAnimator.destroySurfaceLocked();
    mSession.windowRemovedLocked(); <span class="hljs-comment">// 3</span>
    <span class="hljs-keyword">try</span> {
        mClient.asBinder().unlinkToDeath(mDeathRecipient, <span class="hljs-number">0</span>);
    } <span class="hljs-keyword">catch</span> (RuntimeException e) {
        <span class="hljs-comment">// Ignore if it has already been removed (usually because</span>
        <span class="hljs-comment">// we are doing this as part of processing a death note.)</span>
    }

    mWmService.postWindowRemoveCleanupLocked(<span class="hljs-built_in">this</span>); <span class="hljs-comment">// 4</span>
}
</code></pre>
<p>removelmmediately() æ–¹æ³•å¦‚åŒå®ƒçš„åå­—ä¸€æ ·ï¼Œç”¨äºç«‹å³è¿›è¡Œåˆ é™¤æ“ä½œã€‚åœ¨æ³¨é‡Š 1 å¤„çš„ mRemoved ä¸º true æ„å‘³ç€æ­£åœ¨æ‰§è¡Œåˆ é™¤ Window æ“ä½œã€‚åœ¨æ³¨é‡Š 2 å¤„å¦‚æœå½“å‰è¦åˆ é™¤çš„ Window æ˜¯ StatusBar æˆ–è€… NavigationBarï¼Œå°±ä¼šå°†è¿™ä¸ª Window ä»å¯¹åº”çš„æ§åˆ¶å™¨ä¸­åˆ é™¤ã€‚åœ¨æ³¨é‡Š 3 å¤„å°†å¯¹åº”çš„ Session ä» WMS çš„ ArraySet&lt;Session&gt; ç±»å‹çš„å‚æ•° mSessions ä¸­åˆ é™¤å¹¶æ¸…é™¤ Session å¯¹åº”çš„ SurfaceSession èµ„æºï¼ˆSurfaceSession æ˜¯ SurfaceFlinger çš„ä¸€ä¸ªè¿æ¥ï¼Œé€šè¿‡è¿™ä¸ªè¿æ¥å¯ä»¥åˆ›å»º 1 ä¸ªæˆ–è€…å¤šä¸ª Surface å¹¶æ¸²æŸ“åˆ°å±å¹•ä¸Šï¼‰ã€‚åœ¨æ³¨é‡Š 4 å¤„è°ƒç”¨äº† WMS çš„ postWindowRemoveCleanupLocked() æ–¹æ³•ç”¨äºå¯¹ View è¿›è¡Œä¸€äº›é›†ä¸­çš„æ¸…ç†å·¥ä½œã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[androidç½‘ç»œæµé‡ç»Ÿè®¡]]></title>    <link>https://juejin.cn/post/7602965400808849458</link>    <guid>https://juejin.cn/post/7602965400808849458</guid>    <pubDate>2026-02-05T08:38:12.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602965400808849458" data-draft-id="7603160727717576755" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="androidç½‘ç»œæµé‡ç»Ÿè®¡"/> <meta itemprop="keywords" content="Android"/> <meta itemprop="datePublished" content="2026-02-05T08:38:12.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æˆ·341408199125"/> <meta itemprop="url" content="https://juejin.cn/user/570004686782272"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            androidç½‘ç»œæµé‡ç»Ÿè®¡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/570004686782272/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æˆ·341408199125
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-05T08:38:12.000Z" title="Thu Feb 05 2026 08:38:12 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-05
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ğŸ“Š <strong>Android ç½‘ç»œæµé‡ç»Ÿè®¡æ¶æ„å…¨è§£æ</strong></h2>
<p>Android ç½‘ç»œæµé‡ç»Ÿè®¡æ˜¯ä¸€ä¸ª<strong>å¤šå±‚æ¬¡ã€é«˜åº¦ä¼˜åŒ–</strong>çš„ç³»ç»Ÿï¼Œä»å†…æ ¸å±‚åˆ°åº”ç”¨å±‚æä¾›äº†å®Œæ•´çš„æµé‡ç›‘æ§å’Œç»Ÿè®¡èƒ½åŠ›ã€‚è®©æˆ‘ä¸ºæ‚¨è¯¦ç»†è§£æï¼š</p>
<hr/>
<h2 data-id="heading-1">ğŸ—ï¸ <strong>æ•´ä½“æ¶æ„å›¾</strong></h2>
<pre><code class="hljs language-scss" lang="scss">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    åº”ç”¨å±‚ (App Layer)                        â”‚
â”‚  - TrafficStats API (ç®€å•æŸ¥è¯¢)                               â”‚
â”‚  - NetworkStatsManager (å†å²æ•°æ®ã€æŒ‰æ—¶é—´æ®µæŸ¥è¯¢)              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚ Binder IPC
               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Framework å±‚ (System Server)                        â”‚
â”‚  - NetworkStatsService                                      â”‚
â”‚    * å‘¨æœŸæ€§è½®è¯¢ (Poll)                                      â”‚
â”‚    * æŒä¹…åŒ–å­˜å‚¨ (NetworkStatsCollection)                    â”‚
â”‚    * æµé‡å‘Šè­¦ (Data Usage Alert)                            â”‚
â”‚  - NetworkStatsFactory (æ•°æ®è§£æ)                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚ JNI
               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Native å±‚ (libnetworkstats)                       â”‚
â”‚  - BpfNetworkStats<span class="hljs-selector-class">.cpp</span>                                      â”‚
â”‚  - è¯»å– eBPF Map                                            â”‚
â”‚  - è§£æç»Ÿè®¡æ•°æ®                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚ eBPF System Calls
               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              å†…æ ¸å±‚ (Linux Kernel)                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  eBPF ç¨‹åº (Android <span class="hljs-number">9</span>+, Kernel <span class="hljs-number">4.9</span>+)               â”‚    â”‚
â”‚  â”‚  - cgroupskb/ingress/stats                        â”‚    â”‚
â”‚  â”‚  - cgroupskb/egress/stats                         â”‚    â”‚
â”‚  â”‚  - æŒ‚è½½ç‚¹: /sys/fs/cgroup/                        â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚               â”‚ å†™å…¥                                        â”‚
â”‚               â†“                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  eBPF Maps (å†…å­˜ä¸­çš„ Hash Table)                   â”‚    â”‚
â”‚  â”‚  - cookie_tag_map    (Socket â†’ UID/Tag)           â”‚    â”‚
â”‚  â”‚  - uid_stats_map     (UID æµé‡ç»Ÿè®¡)               â”‚    â”‚
â”‚  â”‚  - app_uid_stats_map (App æµé‡ç»Ÿè®¡)               â”‚    â”‚
â”‚  â”‚  - iface_stats_map   (ç½‘å¡æµé‡ç»Ÿè®¡)               â”‚    â”‚
â”‚  â”‚  - tag_stats_map     (Tag æµé‡ç»Ÿè®¡)               â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  è€æ—§è®¾å¤‡ (Android <span class="hljs-number">8</span>-, Kernel &lt; <span class="hljs-number">4.9</span>)               â”‚    â”‚
â”‚  â”‚  - xt_qtaguid (Netfilter æ¨¡å—)                    â”‚    â”‚
â”‚  â”‚  - /proc/net/xt_qtaguid/stats                     â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<hr/>
<h2 data-id="heading-2">1ï¸âƒ£ <strong>åº”ç”¨å±‚ APIï¼šTrafficStats</strong></h2>
<h3 data-id="heading-3"><strong>åŸºæœ¬ç”¨æ³•</strong></h3>
<pre><code class="hljs language-44:82:packages_modules_Connectivity/framework-t/src/android/net/TrafficStats.java" lang="44:82:packages_modules_Connectivity/framework-t/src/android/net/TrafficStats.java">/**
 * Class that provides network traffic statistics. These statistics include
 * bytes transmitted and received and network packets transmitted and received,
 * over all interfaces, over the mobile interface, and on a per-UID basis.
 * &lt;p&gt;
 * These statistics may not be available on all platforms. If the statistics are
 * not supported by this device, {@link #UNSUPPORTED} will be returned.
 * &lt;p&gt;
 * Note that the statistics returned by this class reset and start from zero
 * after every reboot. To access more robust historical network statistics data,
 * use {@link NetworkStatsManager} instead.
 */
public class TrafficStats {
    static {
        System.loadLibrary("framework-connectivity-tiramisu-jni");
    }

    private static final String TAG = TrafficStats.class.getSimpleName();
    /**
     * The return value to indicate that the device does not support the statistic.
     */
    public final static int UNSUPPORTED = -1;

    /** @hide @deprecated use {@code DataUnit} instead to clarify SI-vs-IEC */
    @Deprecated
    public static final long KB_IN_BYTES = 1024;
    /** @hide @deprecated use {@code DataUnit} instead to clarify SI-vs-IEC */
    @Deprecated
    public static final long MB_IN_BYTES = KB_IN_BYTES * 1024;
    /** @hide @deprecated use {@code DataUnit} instead to clarify SI-vs-IEC */
    @Deprecated
    public static final long GB_IN_BYTES = MB_IN_BYTES * 1024;
    /** @hide @deprecated use {@code DataUnit} instead to clarify SI-vs-IEC */
    @Deprecated
    public static final long TB_IN_BYTES = GB_IN_BYTES * 1024;
    /** @hide @deprecated use {@code DataUnit} instead to clarify SI-vs-IEC */
    @Deprecated
    public static final long PB_IN_BYTES = TB_IN_BYTES * 1024;

    /**
     * Special UID value used when collecting {@link NetworkStatsHistory} for
     * removed applications.
     *
     * @hide
     */
    public static final int UID_REMOVED = -4;
</code></pre>
<h3 data-id="heading-4"><strong>æ ¸å¿ƒæ–¹æ³•</strong></h3>
<pre><code class="hljs language-917:967:packages_modules_Connectivity/framework-t/src/android/net/TrafficStats.java" lang="917:967:packages_modules_Connectivity/framework-t/src/android/net/TrafficStats.java">    /**
     * Return number of bytes transmitted by the given UID since device boot.
     * Counts packets across all network interfaces, and always increases
     * monotonically since device boot. Statistics are measured at the network
     * layer, so they include both TCP and UDP usage.
     * &lt;p&gt;
     * Before {@link android.os.Build.VERSION_CODES#JELLY_BEAN_MR2}, this may
     * return {@link #UNSUPPORTED} on devices where statistics aren't available.
     * &lt;p&gt;
     * Starting in {@link android.os.Build.VERSION_CODES#N} this will only
     * report traffic statistics for the calling UID. It will return
     * {@link #UNSUPPORTED} for all other UIDs for privacy reasons. To access
     * historical network statistics belonging to other UIDs, use
     * {@link NetworkStatsManager}.
     *
     * @see android.os.Process#myUid()
     * @see android.content.pm.ApplicationInfo#uid
     */
    public static long getUidTxBytes(int uid) {
        try {
            return getStatsService().getUidStats(uid, TYPE_TX_BYTES);
        } catch (RemoteException e) {
            throw e.rethrowFromSystemServer();
        }
    }

    /**
     * Return number of bytes received by the given UID since device boot.
     * Counts packets across all network interfaces, and always increases
     * monotonically since device boot. Statistics are measured at the network
     * layer, so they include both TCP and UDP usage.
     * &lt;p&gt;
     * Before {@link android.os.Build.VERSION_CODES#JELLY_BEAN_MR2}, this may return
     * {@link #UNSUPPORTED} on devices where statistics aren't available.
     * &lt;p&gt;
     * Starting in {@link android.os.Build.VERSION_CODES#N} this will only
     * report traffic statistics for the calling UID. It will return
     * {@link #UNSUPPORTED} for all other UIDs for privacy reasons. To access
     * historical network statistics belonging to other UIDs, use
     * {@link NetworkStatsManager}.
     *
     * @see android.os.Process#myUid()
     * @see android.content.pm.ApplicationInfo#uid
     */
    public static long getUidRxBytes(int uid) {
        try {
            return getStatsService().getUidStats(uid, TYPE_RX_BYTES);
        } catch (RemoteException e) {
            throw e.rethrowFromSystemServer();
        }
    }
</code></pre>
<p><strong>ç¤ºä¾‹ä»£ç </strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// è·å–å½“å‰ App çš„æµé‡</span>
<span class="hljs-type">long</span> <span class="hljs-variable">txBytes</span> <span class="hljs-operator">=</span> TrafficStats.getUidTxBytes(Process.myUid());
<span class="hljs-type">long</span> <span class="hljs-variable">rxBytes</span> <span class="hljs-operator">=</span> TrafficStats.getUidRxBytes(Process.myUid());

<span class="hljs-comment">// è·å–ç§»åŠ¨ç½‘ç»œæ€»æµé‡</span>
<span class="hljs-type">long</span> <span class="hljs-variable">mobileTx</span> <span class="hljs-operator">=</span> TrafficStats.getMobileTxBytes();
<span class="hljs-type">long</span> <span class="hljs-variable">mobileRx</span> <span class="hljs-operator">=</span> TrafficStats.getMobileRxBytes();

<span class="hljs-comment">// è·å–æ€»æµé‡</span>
<span class="hljs-type">long</span> <span class="hljs-variable">totalTx</span> <span class="hljs-operator">=</span> TrafficStats.getTotalTxBytes();
<span class="hljs-type">long</span> <span class="hljs-variable">totalRx</span> <span class="hljs-operator">=</span> TrafficStats.getTotalRxBytes();
</code></pre>
<hr/>
<h2 data-id="heading-5">2ï¸âƒ£ <strong>System Serverï¼šNetworkStatsService</strong></h2>
<h3 data-id="heading-6"><strong>æ ¸å¿ƒèŒè´£</strong></h3>
<ol>
<li><strong>å‘¨æœŸæ€§è½®è¯¢ï¼ˆPollingï¼‰</strong></li>
<li><strong>æ•°æ®æŒä¹…åŒ–å­˜å‚¨</strong></li>
<li><strong>æµé‡å‘Šè­¦æœºåˆ¶</strong></li>
<li><strong>å¤šç»´åº¦ç»Ÿè®¡ï¼ˆæ¥å£ã€UIDã€Tagã€æ—¶é—´æ®µï¼‰</strong></li>
</ol>
<h3 data-id="heading-7"><strong>è½®è¯¢æœºåˆ¶</strong></h3>
<pre><code class="hljs language-2593:2733:packages_modules_Connectivity/service-t/src/com/android/server/net/NetworkStatsService.java" lang="2593:2733:packages_modules_Connectivity/service-t/src/com/android/server/net/NetworkStatsService.java">    /**
     * Periodic poll operation, reading current statistics and recording into
     * {@link NetworkStatsHistory}.
     */
    @GuardedBy("mStatsLock")
    private void performPollLocked(int flags, @Nullable PollEvent event) {
        if (!mSystemReady) return;
        if (LOGV) Log.v(TAG, "performPollLocked(flags=0x" + Integer.toHexString(flags) + ")");
        Trace.traceBegin(TRACE_TAG_NETWORK, "performPollLocked");

        if (mSupportEventLogger) {
            mEventLogger.logPollEvent(flags, event);
        }

        final boolean persistNetwork = (flags &amp; FLAG_PERSIST_NETWORK) != 0;
        final boolean persistUid = (flags &amp; FLAG_PERSIST_UID) != 0;
        final boolean persistForce = (flags &amp; FLAG_PERSIST_FORCE) != 0;

        performPollFromProvidersLocked();

        // TODO: consider marking "untrusted" times in historical stats
        final long currentTime = mClock.millis();

        try {
</code></pre>
<p><strong>è½®è¯¢è§¦å‘æ¡ä»¶</strong>ï¼š</p>
<ul>
<li>â° <strong>å®šæœŸè½®è¯¢</strong>ï¼šé»˜è®¤ 30 åˆ†é’Ÿ</li>
<li>ğŸ“¡ <strong>ç½‘ç»œçŠ¶æ€å˜åŒ–</strong>ï¼šåˆ‡æ¢ WiFi/ç§»åŠ¨ç½‘ç»œ</li>
<li>ğŸš¨ <strong>æµé‡å‘Šè­¦</strong>ï¼šè¾¾åˆ°é¢„è®¾é˜ˆå€¼</li>
<li>ğŸ“Š <strong>ç³»ç»Ÿäº‹ä»¶</strong>ï¼šå¼€å…³æœºã€UID ç§»é™¤ã€dumpsys å‘½ä»¤</li>
</ul>
<h3 data-id="heading-8"><strong>æ•°æ®å­˜å‚¨ç»“æ„</strong></h3>
<pre><code class="hljs language-python" lang="python">/data/system/netstats/
â”œâ”€â”€ netstats_xt.<span class="hljs-built_in">bin</span>        <span class="hljs-comment"># æ¥å£çº§åˆ«ç»Ÿè®¡ (Interface)</span>
â”œâ”€â”€ netstats_uid.<span class="hljs-built_in">bin</span>       <span class="hljs-comment"># UID çº§åˆ«ç»Ÿè®¡</span>
â””â”€â”€ netstats_uid_tag.<span class="hljs-built_in">bin</span>   <span class="hljs-comment"># UID + Tag ç»Ÿè®¡</span>
</code></pre>
<hr/>
<h2 data-id="heading-9">3ï¸âƒ£ <strong>å†…æ ¸å±‚ï¼šeBPF vs xt_qtaguid</strong></h2>
<h3 data-id="heading-10"><strong>eBPFï¼ˆAndroid 9+ï¼ŒKernel 4.9+ï¼‰</strong></h3>
<h4 data-id="heading-11"><strong>ä¼˜åŠ¿</strong></h4>
<ul>
<li>âœ… <strong>æ€§èƒ½æé«˜</strong>ï¼šå†…æ ¸æ€ç›´æ¥å¤„ç†ï¼Œæ— éœ€ä¸Šä¸‹æ–‡åˆ‡æ¢</li>
<li>âœ… <strong>å®æ—¶æ€§å¥½</strong>ï¼šæ¯ä¸ªæ•°æ®åŒ…éƒ½è¢«ç²¾ç¡®ç»Ÿè®¡</li>
<li>âœ… <strong>å¯æ‰©å±•æ€§å¼º</strong>ï¼šé€šè¿‡ Map è½»æ¾æ‰©å±•ç»Ÿè®¡ç»´åº¦</li>
</ul>
<h4 data-id="heading-12"><strong>æ ¸å¿ƒ eBPF ç¨‹åº</strong></h4>
<pre><code class="hljs language-493:525:packages_modules_Connectivity/bpf_progs/netd.c" lang="493:525:packages_modules_Connectivity/bpf_progs/netd.c">#define TAG_SYSTEM_DNS 0xFFFFFF82
    if (tag == TAG_SYSTEM_DNS &amp;&amp; uid == AID_DNS) {
        uid = sock_uid;
        if (match == DROP_UNLESS_DNS) match = PASS;
    } else {
        if (match == DROP_UNLESS_DNS) match = DROP;
    }

    // If an outbound packet is going to be dropped, we do not count that traffic.
    if (egress.egress &amp;&amp; (match == DROP)) return DROP;

    StatsKey key = {.uid = uid, .tag = tag, .counterSet = 0, .ifaceIndex = skb-&gt;ifindex};

    uint8_t* counterSet = bpf_uid_counterset_map_lookup_elem(&amp;uid);
    if (counterSet) key.counterSet = (uint32_t)*counterSet;

    uint32_t mapSettingKey = CURRENT_STATS_MAP_CONFIGURATION_KEY;
    uint32_t* selectedMap = bpf_configuration_map_lookup_elem(&amp;mapSettingKey);

    if (!selectedMap) return PASS;  // cannot happen, needed to keep bpf verifier happy

    do_packet_tracing(skb, egress, uid, tag, enable_tracing, kver);
    update_stats_with_config(*selectedMap, skb, &amp;key, egress, kver);
    update_app_uid_stats_map(skb, &amp;uid, egress, kver);

    // We've already handled DROP_UNLESS_DNS up above, thus when we reach here the only
    // possible values of match are DROP(0) or PASS(1), however we need to use
    // "match &amp;= 1" before 'return match' to help the kernel's bpf verifier,
    // so that it can be 100% certain that the returned value is always 0 or 1.
    // We use assembly so that it cannot be optimized out by a too smart compiler.
    asm("%0 &amp;= 1" : "+r"(match));
    return match;
}
</code></pre>
<h4 data-id="heading-13"><strong>eBPF Maps ç»“æ„</strong></h4>
<pre><code class="hljs language-103:129:packages_modules_Connectivity/bpf_progs/netd.h" lang="103:129:packages_modules_Connectivity/bpf_progs/netd.h">// app_uid_stats_map:   key:  4 bytes, value: 32 bytes, cost: 1062784 bytes    =  1063Kbytes
// uid_stats_map:       key: 16 bytes, value: 32 bytes, cost: 1142848 bytes    =  1143Kbytes
// tag_stats_map:       key: 16 bytes, value: 32 bytes, cost: 1142848 bytes    =  1143Kbytes
// iface_index_name_map:key:  4 bytes, value: 16 bytes, cost:   80896 bytes    =    81Kbytes
// iface_stats_map:     key:  4 bytes, value: 32 bytes, cost:   97024 bytes    =    97Kbytes
// dozable_uid_map:     key:  4 bytes, value:  1 bytes, cost:  145216 bytes    =   145Kbytes
// standby_uid_map:     key:  4 bytes, value:  1 bytes, cost:  145216 bytes    =   145Kbytes
// powersave_uid_map:   key:  4 bytes, value:  1 bytes, cost:  145216 bytes    =   145Kbytes
// packet_trace_ringbuf:key:  0 bytes, value: 24 bytes, cost:   32768 bytes    =    32Kbytes
// total:                                                                         4962Kbytes
// It takes maximum 4.9MB kernel memory space if all maps are full, which requires any devices
// running this module to have a memlock rlimit to be larger then 5MB. In the old qtaguid module,
// we don't have a total limit for data entries but only have limitation of tags each uid can have.
// (default is 1024 in kernel);

// 'static' - otherwise these constants end up in .rodata in the resulting .o post compilation
static const int COOKIE_UID_MAP_SIZE = 10000;
static const int UID_COUNTERSET_MAP_SIZE = 4000;
static const int APP_STATS_MAP_SIZE = 10000;
static const int STATS_MAP_SIZE = 5000;
static const int IFACE_INDEX_NAME_MAP_SIZE = 1000;
static const int IFACE_STATS_MAP_SIZE = 1000;
static const int CONFIGURATION_MAP_SIZE = 2;
static const int UID_OWNER_MAP_SIZE = 4000;
static const int INGRESS_DISCARD_MAP_SIZE = 100;
static const int PACKET_TRACE_BUF_SIZE = 32 * 1024;
static const int DATA_SAVER_ENABLED_MAP_SIZE = 1;
</code></pre>
<p><strong>å…³é”® Maps</strong>ï¼š</p>
<ul>
<li>ğŸ”‘ <strong>cookie_tag_map</strong>ï¼šSocket Cookie â†’ (UID, Tag) æ˜ å°„</li>
<li>ğŸ“Š <strong>uid_stats_map</strong>ï¼šUID æµé‡ç»Ÿè®¡ï¼ˆRX/TX Bytes &amp; Packetsï¼‰</li>
<li>ğŸ·ï¸ <strong>tag_stats_map</strong>ï¼šTag æµé‡ç»Ÿè®¡ï¼ˆç”¨äº Socket Taggingï¼‰</li>
<li>ğŸŒ <strong>iface_stats_map</strong>ï¼šç½‘å¡æ¥å£æµé‡ç»Ÿè®¡</li>
</ul>
<h3 data-id="heading-14"><strong>xt_qtaguidï¼ˆè€æ—§è®¾å¤‡ï¼‰</strong></h3>
<p><strong>æ–‡ä»¶è·¯å¾„</strong>ï¼š<code>/proc/net/xt_qtaguid/stats</code></p>
<p><strong>ç¼ºç‚¹</strong>ï¼š</p>
<ul>
<li>âŒ æ€§èƒ½è¾ƒå·®ï¼ˆNetfilter é’©å­å¼€é”€å¤§ï¼‰</li>
<li>âŒ æ— æ³•ç²¾ç¡®ç»Ÿè®¡æŸäº›åœºæ™¯ï¼ˆå¦‚ eBPF offloadï¼‰</li>
<li>âŒ å·²åœ¨ Android 9+ åºŸå¼ƒ</li>
</ul>
<hr/>
<h2 data-id="heading-15">4ï¸âƒ£ <strong>ç‰¹æ®Šæœºåˆ¶ï¼šSocket Tagging</strong></h2>
<h3 data-id="heading-16"><strong>ä»€ä¹ˆæ˜¯ Socket Taggingï¼Ÿ</strong></h3>
<p>å…è®¸åº”ç”¨ä¸º Socket æ‰“ä¸Šè‡ªå®šä¹‰æ ‡ç­¾ï¼ˆTagï¼‰ï¼Œå®ç°<strong>æ›´ç»†ç²’åº¦çš„æµé‡ç»Ÿè®¡</strong>ã€‚</p>
<h3 data-id="heading-17"><strong>ä½¿ç”¨åœºæ™¯</strong></h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// åœ¨å‘èµ·ç½‘ç»œè¯·æ±‚å‰</span>
TrafficStats.setThreadStatsTag(<span class="hljs-number">0xDEADBEEF</span>); <span class="hljs-comment">// è®¾ç½® Tag</span>
<span class="hljs-keyword">try</span> {
    <span class="hljs-type">HttpURLConnection</span> <span class="hljs-variable">conn</span> <span class="hljs-operator">=</span> (HttpURLConnection) url.openConnection();
    <span class="hljs-comment">// è¿™ä¸ªè¿æ¥çš„æµé‡ä¼šè¢«ç»Ÿè®¡åˆ° Tag 0xDEADBEEF</span>
} <span class="hljs-keyword">finally</span> {
    TrafficStats.clearThreadStatsTag(); <span class="hljs-comment">// æ¸…é™¤ Tag</span>
}
</code></pre>
<p><strong>å®é™…åº”ç”¨</strong>ï¼š</p>
<ul>
<li>ğŸ“± <strong>å¤šè´¦å· App</strong>ï¼šåŒºåˆ†ä¸åŒè´¦å·çš„æµé‡</li>
<li>ğŸ® <strong>æ¸¸æˆ App</strong>ï¼šåŒºåˆ†æ¸¸æˆå†…ä¸åŒåŠŸèƒ½çš„æµé‡ï¼ˆèŠå¤© vs æˆ˜æ–—ï¼‰</li>
<li>ğŸ“º <strong>è§†é¢‘ App</strong>ï¼šåŒºåˆ†è§†é¢‘æµé‡ vs å¹¿å‘Šæµé‡</li>
</ul>
<h3 data-id="heading-18"><strong>å†…æ ¸å®ç°</strong></h3>
<pre><code class="hljs language-37:53:packages_modules_Connectivity/netd/BpfHandler.h" lang="37:53:packages_modules_Connectivity/netd/BpfHandler.h">     * Tag the socket with the specified tag and uid. In the qtaguid module, the
     * first tag request that grab the spinlock of rb_tree can update the tag
     * information first and other request need to wait until it finish. All the
     * tag request will be addressed in the order of they obtaining the spinlock.
     * In the eBPF implementation, the kernel will try to update the eBPF map
     * entry with the tag request. And the hashmap update process is protected by
     * the spinlock initialized with the map. So the behavior of two modules
     * should be the same. No additional lock needed.
     */
    int tagSocket(int sockFd, uint32_t tag, uid_t chargeUid, uid_t realUid);

    /*
     * The untag process is similar to tag socket and both old qtaguid module and
     * new eBPF module have spinlock inside the kernel for concurrent update. No
     * external lock is required.
     */
    int untagSocket(int sockFd);
</code></pre>
<hr/>
<h2 data-id="heading-19">5ï¸âƒ£ <strong>464xlat æµé‡æ ¡æ­£</strong></h2>
<h3 data-id="heading-20"><strong>é—®é¢˜èƒŒæ™¯</strong></h3>
<p>åœ¨ IPv4-only App é€šè¿‡ 464xlat ä½¿ç”¨ IPv6-only ç½‘ç»œæ—¶ï¼Œä¼šå‡ºç°æµé‡ç»Ÿè®¡åå·®ï¼š</p>
<ul>
<li><strong>IPv4 åŒ…å¤´</strong>ï¼š20 å­—èŠ‚</li>
<li><strong>IPv6 åŒ…å¤´</strong>ï¼š40 å­—èŠ‚</li>
<li><strong>å·®å¼‚</strong>ï¼šæ¯ä¸ªåŒ…å¤š 20 å­—èŠ‚</li>
</ul>
<h3 data-id="heading-21"><strong>æ ¡æ­£æœºåˆ¶</strong></h3>
<pre><code class="hljs language-1181:1230:packages_modules_Connectivity/framework-t/src/android/net/NetworkStats.java" lang="1181:1230:packages_modules_Connectivity/framework-t/src/android/net/NetworkStats.java">    /**
     * Calculate and apply adjustments to captured statistics for 464xlat traffic.
     *
     * &lt;p&gt;This mutates stacked traffic stats, to account for IPv4/IPv6 header size difference.
     *
     * &lt;p&gt;UID stats, which are only accounted on the stacked interface, need to be increased
     * by 20 bytes/packet to account for translation overhead.
     *
     * &lt;p&gt;The potential additional overhead of 8 bytes/packet for ip fragments is ignored.
     *
     * &lt;p&gt;Interface stats need to sum traffic on both stacked and base interface because:
     *   - eBPF offloaded packets appear only on the stacked interface
     *   - Non-offloaded ingress packets appear only on the stacked interface
     *     (due to iptables raw PREROUTING drop rules)
     *   - Non-offloaded egress packets appear only on the stacked interface
     *     (due to ignoring traffic from clat daemon by uid match)
     * (and of course the 20 bytes/packet overhead needs to be applied to stacked interface stats)
     *
     * &lt;p&gt;This method will behave fine if {@code stackedIfaces} is an non-synchronized but add-only
     * {@code ConcurrentHashMap}
     * @param baseTraffic Traffic on the base interfaces. Will be mutated.
     * @param stackedTraffic Stats with traffic stacked on top of our ifaces. Will also be mutated.
     * @param stackedIfaces Mapping ipv6if -&gt; ipv4if interface where traffic is counted on both.
     * @hide
     */
    public static void apply464xlatAdjustments(NetworkStats baseTraffic,
            NetworkStats stackedTraffic, Map&lt;String, String&gt; stackedIfaces) {
        // For recycling
        Entry entry = null;
        for (int i = 0; i &lt; stackedTraffic.size; i++) {
            entry = stackedTraffic.getValues(i, entry);
            if (entry == null) continue;
            if (entry.iface == null) continue;
            if (!entry.iface.startsWith(CLATD_INTERFACE_PREFIX)) continue;

            // For 464xlat traffic, per uid stats only counts the bytes of the native IPv4 packet
            // sent on the stacked interface with prefix "v4-" and drops the IPv6 header size after
            // unwrapping. To account correctly for on-the-wire traffic, add the 20 additional bytes
            // difference for all packets (http://b/12249687, http:/b/33681750).
            //
            // Note: this doesn't account for LRO/GRO/GSO/TSO (ie. &gt;mtu) traffic correctly, nor
            // does it correctly account for the 8 extra bytes in the IPv6 fragmentation header.
            //
            // While the ebpf code path does try to simulate proper post segmentation packet
            // counts, we have nothing of the sort of xt_qtaguid stats.
            entry.rxBytes += entry.rxPackets * IPV4V6_HEADER_DELTA;
            entry.txBytes += entry.txPackets * IPV4V6_HEADER_DELTA;
            stackedTraffic.setValues(i, entry);
        }
    }
</code></pre>
<hr/>
<h2 data-id="heading-22">ğŸ“ˆ <strong>ç»Ÿè®¡ç»´åº¦æ€»ç»“</strong></h2>








































<table><thead><tr><th>ç»´åº¦</th><th>è¯´æ˜</th><th>API</th></tr></thead><tbody><tr><td><strong>UID</strong></td><td>æŒ‰åº”ç”¨ç¨‹åºç»Ÿè®¡</td><td><code>TrafficStats.getUidTxBytes(uid)</code></td></tr><tr><td><strong>Tag</strong></td><td>æŒ‰ Socket æ ‡ç­¾ç»Ÿè®¡</td><td><code>TrafficStats.setThreadStatsTag()</code></td></tr><tr><td><strong>Interface</strong></td><td>æŒ‰ç½‘å¡æ¥å£ç»Ÿè®¡ï¼ˆrmnet0, wlan0 ç­‰ï¼‰</td><td><code>TrafficStats.getTxBytes(iface)</code></td></tr><tr><td><strong>Set</strong></td><td>å‰å°/åå°æµé‡åˆ†ç¦»</td><td><code>NetworkStats.SET_FOREGROUND</code></td></tr><tr><td><strong>Network</strong></td><td>æŒ‰ç½‘ç»œç±»å‹ï¼ˆWiFi, ç§»åŠ¨æ•°æ®ï¼‰</td><td><code>NetworkStatsManager.queryDetails()</code></td></tr><tr><td><strong>Time</strong></td><td>æŒ‰æ—¶é—´æ®µæŸ¥è¯¢å†å²æ•°æ®</td><td><code>NetworkStatsManager</code></td></tr></tbody></table>
<hr/>
<h2 data-id="heading-23">ğŸ¯ <strong>å®æˆ˜åœºæ™¯</strong></h2>
<h3 data-id="heading-24">1. <strong>æ•°æ®ç”¨é‡ç›‘æ§ App</strong></h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">NetworkStatsManager</span> <span class="hljs-variable">statsManager</span> <span class="hljs-operator">=</span> context.getSystemService(NetworkStatsManager.class);
<span class="hljs-type">NetworkStats</span> <span class="hljs-variable">stats</span> <span class="hljs-operator">=</span> statsManager.queryDetails(
    ConnectivityManager.TYPE_MOBILE, 
    subscriberId,
    startTime, 
    endTime
);
</code></pre>
<h3 data-id="heading-25">2. <strong>é˜²ç«å¢™ Appï¼ˆé™åˆ¶åå°æµé‡ï¼‰</strong></h3>
<p>é€šè¿‡è®¾ç½® <code>uid_counterset_map</code>ï¼Œå°† UID æ ‡è®°ä¸º <code>SET_DEFAULT</code> æˆ– <code>SET_FOREGROUND</code>ã€‚</p>
<h3 data-id="heading-26">3. <strong>æµé‡ç»Ÿè®¡ Widget</strong></h3>
<p>å®æ—¶æ˜¾ç¤ºå½“å‰ App çš„ä¸Šä¼ /ä¸‹è½½é€Ÿåº¦ã€‚</p>
<hr/>
<h2 data-id="heading-27">âš¡ <strong>æ€§èƒ½ä¼˜åŒ–</strong></h2>
<ol>
<li><strong>eBPF Zero-Copy</strong>ï¼šå†…æ ¸æ€æ•°æ®ç›´æ¥æ˜ å°„åˆ°ç”¨æˆ·æ€ï¼Œæ— éœ€æ‹·è´</li>
<li><strong>åŒç¼“å†²æœºåˆ¶</strong>ï¼šè¯»å†™åˆ†ç¦»çš„ Stats Mapï¼ˆMap A / Map Bï¼‰</li>
<li><strong>ç¼“å­˜æœºåˆ¶</strong>ï¼šTrafficStats ç»“æœç¼“å­˜ 1 ç§’ï¼Œé¿å…é¢‘ç¹ IPC</li>
<li><strong>å¢é‡æ›´æ–°</strong>ï¼šåªè®°å½•å˜åŒ–é‡ï¼Œå‡å°‘å­˜å‚¨ç©ºé—´</li>
</ol>
<hr/>
<p>å¸Œæœ›è¿™ä»½è¯¦å°½çš„è§£æå¸®åŠ©æ‚¨æ·±å…¥ç†è§£äº† Android ç½‘ç»œæµé‡ç»Ÿè®¡çš„å®Œæ•´æ¶æ„ï¼ä»å†…æ ¸ eBPF åˆ°åº”ç”¨å±‚ APIï¼ŒAndroid æ„å»ºäº†ä¸€å¥—é«˜æ•ˆã€å‡†ç¡®ã€çµæ´»çš„æµé‡ç›‘æ§ä½“ç³»ã€‚å¦‚æœæ‚¨æƒ³æ·±å…¥ç ”ç©¶æŸä¸ªå…·ä½“éƒ¨åˆ†ï¼ˆå¦‚ eBPF ç¨‹åºç¼–å†™ã€NetworkStatsService çš„æŒä¹…åŒ–æœºåˆ¶ã€æˆ–æµé‡å‘Šè­¦çš„å®ç°ï¼‰ï¼Œéšæ—¶å‘Šè¯‰æˆ‘ï¼ğŸ“ŠğŸš€</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å°ç±³ HyperOS 4 å¤§å˜æ ·ï¼Ÿæ ¸å¿ƒåº”ç”¨ä»¥ Rust / Flutter é‡å†™ï¼Œä¸å…¼å®¹è€ç³»ç»Ÿ]]></title>    <link>https://juejin.cn/post/7602512064977207359</link>    <guid>https://juejin.cn/post/7602512064977207359</guid>    <pubDate>2026-02-04T04:29:58.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602512064977207359" data-draft-id="7602512064977190975" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å°ç±³ HyperOS 4 å¤§å˜æ ·ï¼Ÿæ ¸å¿ƒåº”ç”¨ä»¥ Rust / Flutter é‡å†™ï¼Œä¸å…¼å®¹è€ç³»ç»Ÿ"/> <meta itemprop="keywords" content="å‰ç«¯,Flutter,Android"/> <meta itemprop="datePublished" content="2026-02-04T04:29:58.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ‹çŒ«deå°éƒ­"/> <meta itemprop="url" content="https://juejin.cn/user/817692379985752"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å°ç±³ HyperOS 4 å¤§å˜æ ·ï¼Ÿæ ¸å¿ƒåº”ç”¨ä»¥ Rust / Flutter é‡å†™ï¼Œä¸å…¼å®¹è€ç³»ç»Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/817692379985752/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ‹çŒ«deå°éƒ­
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T04:29:58.000Z" title="Wed Feb 04 2026 04:29:58 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    480
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä»Šæ—¥ï¼Œxiaomi time å‘å¸ƒäº†ç›¸å…³è¡¨ç¤ºï¼Œ<strong>HyperOS 4 å°†æ˜¯å°ç±³å†å²ä¸Šæœ€ç¨³å®šçš„æ›´æ–°</strong>ï¼Œå½“ç„¶è¿™ä¸æ˜¯é‡ç‚¹ï¼Œé‡ç‚¹æ˜¯æ ¹æ®è¿‘æœŸ HyperOS 3.1 ç‰ˆæœ¬ï¼Œå¯ä»¥çœ‹åˆ°å¯¹åº”çš„åº”ç”¨æ¶æ„å‡ºç°äº†å˜åŒ–ï¼Œå°ç±³æ­£åœ¨åˆ†é˜¶æ®µå¼ƒç”¨å¯¹åº”çš„æ—§ç‰ˆä»£ç æ¶æ„ï¼Œä¾‹å¦‚ï¼š</p>
<blockquote>
<p>HyperOS 3.1 å¼€å§‹ç§»é™¤éƒ¨åˆ†ç³»ç»Ÿæ¨¡å—ï¼ˆç‰¹åˆ«æ˜¯å¤©æ°”å’Œå›¾åº“ï¼‰ä¸­çš„ <code>MIUI SDK</code> ã€‚</p>
</blockquote>
<p>ä»¥ HyperOS 3.1 ä½œä¸ºè¿‡æ¸¡ç‰ˆæœ¬ï¼Œé€šè¿‡å¼•å…¥äº†åŸç”Ÿ <code>HyperOS SDK</code> ä»¥åŠå·²å¼ƒç”¨çš„ <code>MIUI SDK</code> ï¼Œæœªæ¥ HyperOS 4 é¢„è®¡å°†é€šè¿‡å½»åº•ç§»é™¤å‘åå…¼å®¹å±‚æ¥å®Œæˆè¿™ä¸€è¿ç§»ã€‚</p>
<blockquote>
<p>è¿™ä¸€è½¬å˜é¢„è®¡å¯ä»¥æ¶ˆé™¤åå¤šå¹´æ¥å†—ä½™çš„å‡½æ•°è°ƒç”¨å’Œæœªä¼˜åŒ–çš„ä¾èµ–é“¾ã€‚</p>
</blockquote>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/82cc8a0de3c1486b83044c083eb3c34c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oGL54yrZGXlsI_pg60=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770796677&amp;x-signature=bIUVpKYH8pmBQDYnRgkVJbn9tWc%3D" alt="image-20260204121849635" loading="lazy"/></p>
<p>å½“ç„¶ï¼Œæœ€æœ‰æ„æ€çš„è¿˜æ˜¯ï¼Œé’ˆå¯¹ç³»ç»Ÿæ ¸å¿ƒåº”ç”¨ï¼Œ<strong>HyperOS å·²ç»åœ¨ä½¿ç”¨ Flutter å’Œ Rust é‡å†™ï¼Œç›®å‰å·²åœ¨ HyperOS 3.1 ä¸­è¿›è¡Œè¯•ç‚¹</strong> ï¼ŒæŒ‰ç…§å®ƒçš„è¯´æ³•ï¼š</p>
<blockquote>
<p>HyperOS 4 æ—¨åœ¨ç»Ÿä¸€ç³»ç»Ÿåˆ†åŒºå†…çš„ UI æ¸²æŸ“å’Œé€»è¾‘ç¨³å®šæ€§ï¼Œä»è€Œå–ä»£ä¹‹å‰ MIUI ç‰ˆæœ¬ä¸­ç¢ç‰‡åŒ–çš„ Java/Kotlin é—ç•™æ¶æ„ã€‚</p>
</blockquote>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/327855b295de4b4cbae7c4c94c348874~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oGL54yrZGXlsI_pg60=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770796677&amp;x-signature=vQYq70PPQCR7TF7TroFW3yD1INU%3D" alt="" loading="lazy"/></p>
<p>å½“ç„¶ï¼Œè¿™ç®—æ˜¯ä¸€ä¸ªå¤§çš„ break change ï¼Œä» HyperOS 3.1 å¼€å§‹ï¼ŒåŸºäº Flutter çš„åº”ç”¨ä¼šæ‰“ç ´ä¹‹å‰æ—§ç³»ç»Ÿå¯ä»¥å‡çº§æ–°ç³»ç»Ÿåº”ç”¨çš„æƒ…å†µï¼Œå› ä¸ºæ–°çš„ HyperOS 4 Flutter åº”ç”¨ä¼šæ— æ³•åœ¨ HyperOS 3 åŠæ›´æ—©ç‰ˆæœ¬ä¸Šè¿è¡Œã€‚</p>
<blockquote>
<p>æ³¨æ„ï¼Œè¿™é‡Œè¯´çš„æ˜¯ç”¨æ¥çš„æ–° Hyper SDK çš„ç³»ç»Ÿæ ¸å¿ƒåº”ç”¨ã€‚</p>
</blockquote>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8a0d52c82ee741e5a8046e7e4059d82e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oGL54yrZGXlsI_pg60=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770796677&amp;x-signature=0SN4VDkvTHGW2o1Fe7U9kLNYivk%3D" alt="" loading="lazy"/></p>
<p>å…¶å®å¯¹æ¯”æ–°æ—§çš„ç›¸å†Œåº”ç”¨ä¹Ÿå¯ä»¥çœ‹å‡ºæ¥ï¼Œå›¾ä¸€æ˜¯ 4.x ç‰ˆæœ¬ï¼Œ è€Œå›¾è€Œæ˜¯ 5.0-R çš„ç‰ˆæœ¬ï¼Œæ–°ç‰ˆæœ¬åœ¨ libchecker ä¸‹å·²ç»çœ‹ä¸åˆ°ç›¸åº”çš„ Kotlin ä¿¡æ¯äº†ï¼Œç”šè‡³æ²¡æœ‰äº†å¯¹åº”çš„ dex ç›®å½•ï¼Œåªæœ‰åŸç”ŸåŠ¨æ€åº“ ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/05dc413bd67c4a6491b166afbaecc074~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oGL54yrZGXlsI_pg60=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770796677&amp;x-signature=%2FVvqH%2FmXcjI4XAsTgfK7D8w53ZQ%3D" alt="" loading="lazy"/></p>
<p>å¦å¤–ï¼Œä¹Ÿæœ‰ç½‘å‹åˆ†æäº†ä»–å†…éƒ¨çš„ä¾èµ–ï¼Œå¯ä»¥çœ‹åˆ° hyper ç›¸å…³çš„å®ç°ä¸å°‘ï¼Œåº”è¯¥æ˜¯ HyperSDK æä¾›ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8daf5f65615b45488f53f0da388944e9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oGL54yrZGXlsI_pg60=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770796677&amp;x-signature=cVtIfpmP2KquOLi8SGrbeJgbkek%3D" alt="" loading="lazy"/></p>
<p>å½“ç„¶ï¼Œxiaomi time ä¹Ÿè¡¨ç¤ºï¼Œæ——èˆ°çº§æœºå‹åœ¨ HyperOS 4 ä¸Šæ€§èƒ½æå‡å¹…åº¦æœ‰é™ï¼Œç›¸åå…¥é—¨çº§å’Œä¸­ç«¯è®¾å¤‡åè€Œå¯èƒ½è·å¾—æ›´æ˜¾è‘—çš„æ€§èƒ½æå‡ï¼Œå› ä¸ºæŠ€æœ¯å€ºåŠ¡çš„æ¶ˆé™¤ï¼Œä¹Ÿå¯ä»¥èŠ‚çœæ›´å¤šçš„ç©ºé—´ã€‚</p>
<p>å½“ç„¶ï¼Œä¹Ÿæœ‰äººçŒœæµ‹è¿™ä¸ªæ“ä½œæ˜¯ä¸ºäº†æå‰å¸ƒå±€ï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li>å°ç±³æœ‰å¾ˆå¤šä¸åŒå¹³å°çš„äº§å“ï¼Œç”¨ flutter å¯ä»¥åšåˆ°ä¸åŒå¹³å°çš„äº§å“ä¹Ÿå¯ä»¥è·¨å¹³å°ï¼Œä¹Ÿå°±æ˜¯æ ¸å¿ƒç³»ç»Ÿåº”ç”¨æœªæ¥æœ‰å¯èƒ½å‡ºç°åœ¨å…¶ä»–å¹³å°ä¸Šï¼Œæ¯”å¦‚æ±½è½¦ï¼Œçœ¼é•œç­‰</li>
</ul>

<ul>
<li>å°ç±³æ‰“ç®—èµ°å’Œåä¸ºä¸€æ ·çš„è·¯çº¿ï¼Œåä¸ºæ—©æœŸä¹Ÿæ˜¯é€šè¿‡ flutter åš UI å±‚å…¼å®¹æŠ½è±¡ï¼Œé€šè¿‡ flutter ï¼Œå¦‚æœåç»­å°ç±³æœ‰ç‹¬ç«‹ç³»ç»Ÿå‘å¸ƒï¼Œåº”ç”¨æ”¯æŒå¯ä»¥æ›´æ–¹ä¾¿ç›´æ¥iè¿ç§»ï¼Œ å› ä¸º flutter åªéœ€è¦é€‚é…åµŒå…¥å±‚å’Œ vulkan å°±å¯ä»¥æ— ç¼é€‚é…</li>
</ul>
<p>ä¸è¿‡è¿™äº›éƒ½åªæ˜¯çŒœæµ‹ï¼Œè€Œä»ç›®å‰çš„æƒ…å†µæ¥çœ‹ï¼Œè¿™ä¸ªå†³ç­–åº”è¯¥æ˜¯çœŸçš„ï¼Œåªæ˜¯å¸¦æ¥çš„å½±å“å¦‚ä½•ï¼Œåªèƒ½ç­‰å®˜æ–¹æ­£å¼å‘å¸ƒåçœ‹çœ‹äº†ã€‚</p>
<h2 data-id="heading-0">å‚è€ƒé“¾æ¥</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fxiaomitime.com%2Fwhy-hyperos-4-will-be-the-most-stable-update-in-xiaomi-history-88033%2F" target="_blank" title="https://xiaomitime.com/why-hyperos-4-will-be-the-most-stable-update-in-xiaomi-history-88033/" ref="nofollow noopener noreferrer">xiaomitime.com/why-hyperosâ€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è´§æ‹‰æ‹‰UIè‡ªåŠ¨åŒ–æ–°èŒƒå¼ï¼šä»äººå·¥ç»´æŠ¤åˆ°AIè‡ªæ„ˆ]]></title>    <link>https://juejin.cn/post/7602472997921505280</link>    <guid>https://juejin.cn/post/7602472997921505280</guid>    <pubDate>2026-02-04T01:58:31.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602472997921505280" data-draft-id="7602146335216615464" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è´§æ‹‰æ‹‰UIè‡ªåŠ¨åŒ–æ–°èŒƒå¼ï¼šä»äººå·¥ç»´æŠ¤åˆ°AIè‡ªæ„ˆ"/> <meta itemprop="keywords" content="æµ‹è¯•"/> <meta itemprop="datePublished" content="2026-02-04T01:58:31.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è´§æ‹‰æ‹‰æŠ€æœ¯"/> <meta itemprop="url" content="https://juejin.cn/user/1768489241815070"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è´§æ‹‰æ‹‰UIè‡ªåŠ¨åŒ–æ–°èŒƒå¼ï¼šä»äººå·¥ç»´æŠ¤åˆ°AIè‡ªæ„ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1768489241815070/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è´§æ‹‰æ‹‰æŠ€æœ¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T01:58:31.000Z" title="Wed Feb 04 2026 01:58:31 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    159
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»15åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>ä½œè€…ä»‹ç»ï¼šèƒ¡å˜‰æ¤¿ï¼Œæ¥è‡ªè´§æ‹‰æ‹‰/æŠ€æœ¯ä¸­å¿ƒ/è´¨é‡ä¿éšœéƒ¨ï¼Œä¸“æ³¨äºç§»åŠ¨æµ‹è¯•æ•ˆèƒ½æ–¹å‘ã€‚</p>
</blockquote>
<h2 data-id="heading-0">ä¸€ã€èƒŒæ™¯ä¸æŒ‘æˆ˜</h2>
<p>åœ¨ç§»åŠ¨ç«¯æµ‹è¯•ä¸­ï¼Œæˆ‘ä»¬å§‹ç»ˆé¢å¯¹ç€åŒä¸€ä¸ªæ ¸å¿ƒæŒ‘æˆ˜ï¼š<strong>å¦‚ä½•æŒç»­é™ä½æ‰‹å·¥æµ‹è¯•çš„å·¥ä½œé‡ï¼Ÿ</strong> ä¸ºæ­¤ï¼Œæˆ‘ä»¬å›¢é˜Ÿå·²ç»å»ºç«‹èµ·ä¸¤æ¡æˆç†Ÿçš„åˆ›æ–°ææ•ˆè·¯å¾„ï¼š</p>
<ol>
<li><strong>åœ¨è€åŠŸèƒ½å›å½’æµ‹è¯•ä¸Š</strong>ï¼Œæˆ‘ä»¬ä»¥<strong>UIå½•åˆ¶å›æ”¾ï¼ˆå‚è€ƒã€Š</strong> <strong><a href="https://juejin.cn/post/7306331307477794867" target="_blank" title="https://juejin.cn/post/7306331307477794867">è´§æ‹‰æ‹‰Appå½•åˆ¶å›æ”¾çš„æ¢ç´¢ä¸å®è·µ</a></strong> <strong>ã€‹ï¼‰</strong> æŠ€æœ¯ï¼Œé¢ è¦†äº†ä¼ ç»Ÿæ‰‹å†™è„šæœ¬æ¨¡å¼ï¼Œå®ç°äº†è„šæœ¬çš„â€œ<strong>é›¶ä»£ç â€</strong> ç”Ÿæˆä¸å¤§è§„æ¨¡è¦†ç›–ï¼Œä»æ ¹æœ¬ä¸Šè§£å†³äº†è‡ªåŠ¨åŒ–æ™®åŠçš„ç“¶é¢ˆã€‚</li>
<li><strong>åœ¨æ–°åŠŸèƒ½æµ‹è¯•ä¸Š</strong>ï¼Œæˆ‘ä»¬æ¨å‡ºäº†<strong>å¤šæœºåŒæ­¥æ¨¡å¼ï¼ˆå‚è€ƒã€Š</strong> <strong><a href="https://juejin.cn/post/7430902939316109312" target="_blank" title="https://juejin.cn/post/7430902939316109312">è´§æ‹‰æ‹‰äº‘çœŸæœºå¤šæœºåŒæ­¥æ¢ç´¢ä¸å®è·µ</a></strong> <strong>ã€‹ï¼‰</strong> ï¼Œç»•å¼€äº†ä¼ ç»Ÿè„šæœ¬çš„å±€é™ï¼Œå®ç°äº†â€œä¸€ç«¯æ“ä½œã€å¤šç«¯è¦†ç›–â€ï¼Œç¼“è§£äº†å¤šæœºå‹ã€å¤šç«¯å£çš„æ•ˆç‡ç“¶é¢ˆé—®é¢˜ã€‚</li>
</ol>
<p>åŸºäºè¿™äº›åˆ›æ–°å®è·µï¼Œä¸ºæˆ‘ä»¬æ„å»ºäº†è´§æ‹‰æ‹‰ç§»åŠ¨ç«¯æµ‹è¯•çš„ææ•ˆä½“ç³»ã€‚ç„¶è€Œï¼Œæ•ˆç‡æå‡çš„çº¢åˆ©æ­£é€æ¸è§¦è¾¾ç“¶é¢ˆï¼Œè€Œä¸”ä¹Ÿæœ‰æ–°çš„æŒ‘æˆ˜ï¼š</p>
<ul>
<li><strong>è‡ªåŠ¨åŒ–æµ‹è¯•ï¼Œä»éœ€è¦â€œäººå·¥ç»´æŠ¤â€</strong> ï¼šéšç€è„šæœ¬è§„æ¨¡è¶…è¿‡18,000æ¡ï¼ŒApp UIé¢‘ç¹è¿­ä»£å¸¦æ¥çš„è„šæœ¬å¤±æ•ˆé—®é¢˜ï¼Œä½¿æˆ‘ä»¬é™·å…¥äº†æ–°çš„â€œè„šæœ¬ä¿®å¤â€å¾ªç¯ã€‚</li>
<li><strong>æ–°åŠŸèƒ½ï¼Œä»æ˜¯â€œäººå·¥é©±åŠ¨â€</strong> ï¼šå¤šæœºåŒæ­¥æœ¬è´¨ä¸Šæ˜¯å°† N æ¬¡åœ¨æ‰‹æœºä¸Šçš„æ“ä½œå˜æˆ 1 æ¬¡ï¼Œæµ‹è¯•æ‰§è¡Œæœ¬èº«ä¾ç„¶éœ€è¦ä¾èµ–äººå·¥ã€‚</li>
</ul>
<p>å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦ä»ä¸Šè¿°ä¸¤ä¸ªæ–¹å‘ä¸Šå¯»æ±‚çªç ´ï¼Œæ‰“é€šâ€œæœ€åä¸€å…¬é‡Œâ€çš„éšœç¢ï¼ŒçœŸæ­£å®ç°æµ‹è¯•ææ•ˆçš„é—­ç¯ã€‚é’ˆå¯¹æ–°åŠŸèƒ½æµ‹è¯•ä»ä¾èµ–â€œäººå·¥é©±åŠ¨â€çš„ç“¶é¢ˆï¼Œæˆ‘ä»¬å›¢é˜Ÿå·²åœ¨ç§¯ææ¢ç´¢ç›¸å…³è§£å†³æ–¹æ¡ˆï¼Œå¹¶è®¡åˆ’åœ¨åç»­è¿›è¡Œåˆ†äº«ï¼›æœ¬æ–‡åˆ™å°†èšç„¦äº UI è‡ªåŠ¨åŒ–æµ‹è¯•å®è·µä¸­çš„ç¨³å®šæ€§å’Œæ•ˆèƒ½ç“¶é¢ˆï¼Œæ·±å…¥æ¢è®¨å…¶æŒ‘æˆ˜ä¸å®è·µè·¯å¾„ã€‚</p>
<h2 data-id="heading-1">äºŒã€UIè‡ªåŠ¨åŒ–çš„å±€é™æ€§</h2>
<p>æˆ‘ä»¬é€šè¿‡åˆ†æUIè‡ªåŠ¨åŒ–æµ‹è¯•çš„å†å²æŠ¥å‘Šä¸è„šæœ¬ç»´æŠ¤äººå‘˜çš„å®é™…ç—›ç‚¹ï¼Œå‘ç°ä¸¤å¤§æ ¸å¿ƒå›°å¢ƒæ­£åå™¬ç€æµ‹è¯•æ•ˆèƒ½ï¼š</p>
<ul>
<li><strong>è„šæœ¬ç»´æŠ¤çš„â€œå¾ªç¯â€å›°å¢ƒ</strong> ä¼ ç»Ÿ UI è„šæœ¬é«˜åº¦ä¾èµ–å…ƒç´ å®šä½ç­–ç•¥ï¼ˆå¦‚ ID ã€å›¾åƒæˆ–æ–‡æœ¬åŒ¹é…ï¼‰ï¼Œåœ¨è´§æ‹‰æ‹‰å•å‘¨è¿­ä»£App çš„å†²å‡»ä¸‹å¸¦æ¥çš„UIå¾®è°ƒï¼Œæ¯å‘¨éƒ½æœ‰ä¸å°‘çš„è„šæœ¬é™·å…¥â€œæŠ¢æ•‘å¼â€ä¿®å¤ã€‚</li>
<li><strong>æ‰§è¡Œç¨³å®šæ€§çš„ç“¶é¢ˆ</strong> é¢å¯¹å“ç‰Œç¢ç‰‡åŒ–å¸¦æ¥çš„å„ç±»å¼¹çª—â€œçªè¢­â€ï¼ˆå¦‚ç³»ç»Ÿæ¨é€ã€æƒé™ç”³è¯·ã€Appå¹¿å‘Šç­‰ï¼‰ï¼Œè‡ªåŠ¨åŒ–è„šæœ¬çš„å¹³å‡é€šè¿‡ç‡é•¿æœŸå¾˜å¾Šåœ¨80%çš„ç“¶é¢ˆçº¿ä¸Šï¼›ä¸ºä¿éšœç¨³å®šæ€§ï¼Œéœ€è¦æŒç»­åœ¨è„šæœ¬ä¸­å åŠ å„ç±»å¼¹çª—è¯†åˆ«ä¸å¤„ç†é€»è¾‘ï¼Œè¿›ä¸€æ­¥æ‹‰é«˜ç»´æŠ¤æˆæœ¬ã€‚</li>
</ul>
<p>è¿™ä¸¤å¤§å›°å¢ƒå¦‚åŒä¸€ä¸ªæ°¸è¿œå¡«ä¸æ»¡çš„æ²™æ¼ï¼Œä¸æ–­çš„åœ¨èš•é£Ÿå®è´µçš„æµ‹è¯•èµ„æºã€‚</p>
<h2 data-id="heading-2">ä¸‰ã€AIä»‹å…¥UIè‡ªåŠ¨åŒ–</h2>
<p>ä¼ ç»ŸUIè‡ªåŠ¨åŒ–æµ‹è¯•å…ƒç´ å®šä½ç­–ç•¥æš´éœ²å‡ºä¸¥é‡çš„è„†å¼±æ€§å’Œç»´æŠ¤æˆæœ¬ï¼Œæˆ‘ä»¬é€šè¿‡åœ¨æµ‹è¯•æ‰§è¡Œè¿‡ç¨‹ä¸­å¼•å…¥<strong>AI</strong> <strong>è‡ªæ„ˆèƒ½åŠ›ï¼ˆå¤šæ¨¡æ€ç‰¹å¾èåˆ+è§†è§‰æ¨¡å‹+è¯­ä¹‰åˆ†æèƒ½åŠ›ï¼‰ï¼Œ</strong> ä¸ºUIè„šæœ¬æå‡é²æ£’æ€§ã€‚AIä»‹å…¥æ—¶æœºå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f5080afb65b349609d4a6c1816068f3f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770795442&amp;x-signature=Wf2nKuL8HIK506%2Fp%2BkIhE0rq9Pg%3D" alt="image.png" loading="lazy"/></p>
<p>AIé©±åŠ¨çš„UIè‡ªåŠ¨åŒ–ï¼Œçªç ´ä¼ ç»Ÿâ€œè„šæœ¬å¤±æ•ˆå³ä¸­æ–­â€çš„è„†å¼±æ¨¡å¼ï¼Œæ„å»ºæ„ŸçŸ¥-è¯Šæ–­-å†³ç­–-ä¿®å¤çš„æ™ºèƒ½é—­ç¯ä½“ç³»ï¼Œå…¶æ ¸å¿ƒä¼˜åŠ¿åœ¨äºï¼š</p>
<ul>
<li><strong>ç²¾å‡†é—®é¢˜å®šä½ï¼š</strong> å½“ç”¨ä¾‹æ‰§è¡Œä¸­æ–­æ—¶ï¼ŒAIè‡ªæ„ˆé€šè¿‡å¤šæ¨¡æ€æ•°æ®ï¼ˆæˆªå›¾ã€OCRã€DOMã€Exceptionï¼‰è¿›è¡Œæ™ºèƒ½è¯Šæ–­ï¼Œç»“åˆçŸ¥è¯†åº“ã€æ§ä»¶ç”»åƒç²¾å‡†è¯†åˆ«é—®é¢˜ç±»å‹ï¼ˆå¼¹çª—ä¸­æ–­ã€å…ƒç´ å˜æ›´ç­‰ï¼‰ã€‚</li>
<li><strong>é—­ç¯è‡ªæ„ˆèƒ½åŠ›ï¼š</strong> è¯Šæ–­ç»“æœç›´æ¥ç”Ÿæˆç»“æ„åŒ–<code>Action</code>æŒ‡ä»¤ï¼ˆå¦‚â€œå¼¹çª—å…³é—­â€æˆ–â€œå®šä½å™¨ä¿®å¤â€ï¼‰ï¼Œé€šè¿‡æ˜ å°„è„šæœ¬é‡è¯•ï¼Œä»»åŠ¡æˆåŠŸåè‡ªåŠ¨æ›´æ–°ç”¨ä¾‹åº“ï¼Œå®ç°â€œå‘ç°é—®é¢˜â†’åˆ†æé—®é¢˜â†’è§£å†³é—®é¢˜â€çš„å®Œæ•´é—­ç¯ï¼Œæ— éœ€äººå·¥ä»‹å…¥ã€‚</li>
</ul>
<h2 data-id="heading-3">å››ã€AIè‡ªæ„ˆèƒ½åŠ›æ„å»º</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/110c08bf8b684988a52a564bf425b3f6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770795442&amp;x-signature=mh%2BkkCGrXpiELEK%2BqZjP%2BuShXbw%3D" alt="image.png" loading="lazy"/>
AIé©±åŠ¨çš„UIè‡ªåŠ¨åŒ–æ–°èŒƒå¼ç³»ç»Ÿæ¶æ„é‡‡ç”¨å¤šå±‚èƒ½åŠ›è®¾è®¡ï¼Œå„å±‚èŒè´£æ˜ç¡®ã€ååŒè¿ä½œï¼š</p>
<ul>
<li>
<p><strong>èƒ½åŠ›å»ºè®¾å±‚é¢</strong> æä¾›å››å¤§æ ¸å¿ƒèƒ½åŠ›ï¼Œå¼¹çª—æ™ºèƒ½å¤„ç†ã€æ–‡æœ¬è‡ªæ„ˆã€å…ƒç´ è‡ªæ„ˆã€æ™ºèƒ½ç­‰å¾…ï¼Œç›´æ¥é¢å‘æµ‹è¯•åœºæ™¯ä¸­çš„å›°éš¾è§£å†³å…·ä½“é—®é¢˜ã€‚</p>
</li>
<li>
<p><strong>æ•°æ®é‡‡é›†å±‚é¢</strong></p>
<ul>
<li>å¤šæ¨¡æ€æ•°æ®åŸºçº¿ï¼šæ•´åˆAPPä¿¡æ¯ã€ç”¨ä¾‹æ­¥éª¤ã€è®¾å¤‡å¿«ç…§ã€OCRä¸DOMæ•°æ®ï¼›</li>
<li>ç”¨ä¾‹åº“ç®¡ç†ï¼šé€šè¿‡è„šæœ¬æ˜ å°„ã€è‡ªæ„ˆæ ‡è®°å®ç°ç”¨ä¾‹æ™ºèƒ½æ›´æ–°ï¼Œç¡®ä¿ä¿®å¤æˆæœæŒç»­æ²‰æ·€ã€‚</li>
</ul>
</li>
<li>
<p><strong>UIè‡ªæ„ˆAgentå±‚é¢</strong></p>
<ul>
<li>çŸ¥è¯†åº“ï¼šæ²‰æ·€ä¸šåŠ¡çŸ¥è¯†ã€å†å²ç»éªŒã€å¼¹çª—ç‰¹å¾ä¸è§„åˆ™æ¨¡æ¿ï¼›</li>
<li>æ™ºèƒ½å¼•æ“ï¼šé©±åŠ¨å¼¹çª—åˆ†æã€æ–‡æœ¬/å…ƒç´ å˜æ›´æ„ŸçŸ¥ç­‰æ ¸å¿ƒèƒ½åŠ›ï¼›</li>
<li>æ™ºèƒ½å†³ç­–ä½“ï¼šå®ç°é—®é¢˜è¯Šæ–­ä¸è¡ŒåŠ¨å†³ç­–çš„é—­ç¯ï¼Œæ˜¯â€œè‡ªæ„ˆå¤§è„‘â€ã€‚</li>
</ul>
</li>
</ul>
<h3 data-id="heading-4">4.1 äº”æ­¥è¯Šæ–­æ³•</h3>
<p>å½“æµ‹è¯•ä»»åŠ¡å¼‚å¸¸ä¸­æ–­æ—¶ï¼ŒAIè‡ªæ„ˆä¼šæ‰§è¡Œäº”æ­¥åˆ†å±‚è¯Šæ–­æµç¨‹ï¼šé¦–å…ˆæ£€æµ‹è®¾å¤‡å¥åº·çŠ¶æ€ï¼ˆå†…å­˜/ç£ç›˜/ç½‘ç»œ/ç‰©ç†è¿æ¥ï¼‰ï¼Œå…¶æ¬¡éªŒè¯è‡ªåŠ¨åŒ–æ¡†æ¶å¯ç”¨æ€§ï¼ˆä¼šè¯çŠ¶æ€ä¸é©±åŠ¨æœåŠ¡ï¼‰ï¼Œç¬¬ä¸‰æ­¥é€šè¿‡AIå¤§æ¨¡å‹èåˆå¼¹çª—çŸ¥è¯†åº“è¯†åˆ«å¹²æ‰°å¼¹çª—ç±»å‹æ™ºèƒ½å¤„ç†ï¼Œç¬¬å››æ­¥åˆ©ç”¨è§†è§‰è¯­è¨€æ¨¡å‹ï¼ˆVLMï¼‰åˆ†æé¡µé¢åŠ è½½çŠ¶æ€ä¸å†…å®¹å®Œæ•´æ€§ï¼Œæœ€ååŸºäºæ§ä»¶ç”»åƒä¸å†å²åŸºçº¿è¿›è¡Œå¤šæ¨¡æ€å¤§æ¨¡å‹æ¯”å¯¹ï¼Œç²¾å‡†æ„ŸçŸ¥å…ƒç´ å˜æ›´ã€‚AIè‡ªæ„ˆé‡‡ç”¨é€’è¿›å¼å†³ç­–æœºåˆ¶ï¼Œæ¯æ­¥è¾“å‡ºç»“æ„åŒ–ä¿®å¤æŒ‡ä»¤ï¼ˆå¦‚â€œå¼¹çª—ä¸­æ–­â†’å®‰å…¨å…³é—­â€ã€â€œå…ƒç´ å˜æ›´â†’åŠ¨æ€é‡æ„å®šä½å™¨â€ï¼‰ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2729240d4493417990f2ac3df35c84c9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770795442&amp;x-signature=%2Bq0KhQ0sgkhslgiSz%2F45nZif4rc%3D" alt="image.png" loading="lazy"/></p>
<p>äº”æ­¥è¯Šæ–­æµç¨‹ç”±è‡ªæ„ˆå¼•æ“æœåŠ¡æ¥é©±åŠ¨ï¼Œå„å±‚çº§è¯Šæ–­ç»“æœä¼šè¾“å‡ºç»“æ„åŒ–çš„å¯æ‰§è¡Œä¿®å¤æŒ‡ä»¤ã€‚è‡ªæ„ˆå¼•æ“æœåŠ¡æ—¶åºå›¾å¦‚ä¸‹ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/71c2cfc3a061430b89abb0a761429b96~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770795442&amp;x-signature=CqXielYIWJ4W8gkcFdAx4OOQyWQ%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-5">4.2 å¼¹çª—æ™ºèƒ½å¤„ç†å¼•æ“</h3>
<h4 data-id="heading-6">4.2.1 è·¨å¹³å°å¼¹çª—ç¢ç‰‡åŒ–æŒ‘æˆ˜</h4>
<p>è·¨å¹³å°å¼¹çª—ç¢ç‰‡åŒ–æŒ‘æˆ˜ï¼šåœ¨Android/iOS/HarmonyOSå¤šå¹³å°ã€OPPO/vivo/å°ç±³ç­‰å“ç‰ŒåŠMIUI/ColorOSç­‰å®šåˆ¶ç³»ç»Ÿç¯å¢ƒä¸‹ï¼ŒåŒç±»å¼¹çª—ï¼ˆå¦‚ä½ç½®æƒé™ç”³è¯·ï¼‰å‘ˆç°é«˜åº¦å·®å¼‚åŒ–çš„UIè¡¨ç°ã€‚å¦‚å›¾æ‰€ç¤ºï¼Œä»…ä½ç½®æƒé™å¼¹çª—åœ¨ä¸åŒè®¾å¤‡ä¸Šçš„æŒ‰é’®å¸ƒå±€ã€æ–‡æ¡ˆè¡¨è¿°åŠäº¤äº’æ¨¡å¼å‡å­˜åœ¨æ˜¾è‘—å·®å¼‚ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7ebb93567d9f4aa6beea60276742658e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770795442&amp;x-signature=4W2%2BwNLi5Tv3IkKqFIOqRYi0VG4%3D" alt="" loading="lazy"/></p>
<p>Androidæ–¹é¢ï¼Œä¼ ç»Ÿæ–¹æ¡ˆï¼ˆå¦‚åŸºäº<code>DeviceOwner</code>æƒé™è‡ªåŠ¨æˆæƒï¼‰ä»…èƒ½è¦†ç›–éƒ¨åˆ†åœºæ™¯ï¼Œå¯¹å‚å•†æ·±åº¦å®šåˆ¶çš„Romï¼ˆéšç§åˆè§„ã€ç³»ç»Ÿé€šçŸ¥ç±»ï¼ŒOPPOç³»å¼¹çª—ï¼‰ä»å­˜åœ¨é€‚é…ç›²åŒºï¼ŒiOSå’ŒHarmonyæ–¹é¢åˆ™ç¼ºå°‘è‡ªåŠ¨æˆæƒæ¨¡å¼ã€‚æ‰€ä»¥è¿˜æœ‰éƒ¨åˆ†æ–¹æ¡ˆè¿˜æ˜¯é€šè¿‡è§„åˆ™æ¥åŒ¹é…ï¼Œä½†æ˜¯æ— è®ºæˆ‘ä»¬åŠ å¤šå°‘å±‚åŒ¹é…ï¼Œä¸‹æ¬¡æ‰§è¡Œçš„æ—¶å€™è¿˜æ˜¯ä¼šå‡ºç°æ–°çš„é—®é¢˜ã€‚</p>
<h4 data-id="heading-7">4.2.2 ç»“æ„åŒ–å¼¹çª—ç‰¹å¾å»ºæ¨¡</h4>
<p>æˆ‘ä»¬çš„è§£æ³•ä¸å†ç©·ä¸¾æ¨¡å¼ï¼Œè€Œæ˜¯æ„å»ºç‰¹å¾å¼¹çª—è®¤çŸ¥ä½“ç³»ï¼šVLå¤§æ¨¡å‹ä»è§†è§‰å¸ƒå±€ã€è¯­ä¹‰å…³é”®è¯ç»´åº¦æŠ½è±¡å¼¹çª—æœ¬è´¨ç‰¹å¾ï¼Œå¯¹å¼¹çª—è¿›è¡Œå¤šç»´åº¦ã€è¯­ä¹‰åŒ–çš„å½’ç±»å»ºæ¨¡ï¼ˆå¦‚æŒ‰æƒé™ã€ç³»ç»Ÿé€šçŸ¥ç­‰ç±»å‹ï¼‰ï¼Œå°†å…¶æ³›åŒ–ä¸ºå¯ç†è§£çš„ç»“æ„åŒ–çŸ¥è¯†ï¼Œæœ€åè¾“å…¥ç»™å¤§æ¨¡å‹åˆ†æå¹¶æ¨ç†å¼¹çª—å’Œå†³ç­–å¤„ç†ã€‚</p>
<p>è¿™é‡Œåˆ—ä¸¾ä¸€ä¸‹å¸¸è§çš„å¼¹çª—ç±»å‹ï¼š</p>
<ol>
<li>æƒé™ç”³è¯·ç±»ï¼šä½ç½®ã€å­˜å‚¨ã€é€šçŸ¥ã€ç”µè¯ã€çŸ­ä¿¡ç­‰ï¼›</li>
<li>ç³»ç»Ÿé€šçŸ¥ç±»ï¼šç³»ç»Ÿæ›´æ–°ã€ç”µé‡è­¦å‘Šã€ç³»ç»Ÿæ¨é€ã€å­˜å‚¨ä¸è¶³ç­‰ï¼›</li>
<li>éšç§åˆè§„ç±»ï¼šæ•°æ®æ”¶é›†ã€éšç§åˆè§„ç­‰ï¼›</li>
<li>å‚å•†å®šåˆ¶ç±»ï¼šä¼˜åŒ–å»ºè®®ã€è‡ªå¯åŠ¨ã€çœç”µæ¨¡å¼æ¿€æ´»ç­‰ç­‰ã€‚</li>
</ol>
<p>æš‚æ—¶æ— æ³•åœ¨é£ä¹¦æ–‡æ¡£å¤–å±•ç¤ºæ­¤å†…å®¹</p>
<p>ä¸å…ˆå‰æ¢ç´¢çš„ä¼ ç»Ÿæ–¹å¼æ¯”è¾ƒï¼Œä»â€œæœºæ¢°åŒ¹é…â€å‡çº§ä¸ºâ€œæ™ºèƒ½è®¤çŸ¥â€å¤„ç†ï¼Œä¼˜åŠ¿å¦‚ä¸‹ï¼š</p>









































<table><thead><tr><th>ç»´åº¦</th><th>æšä¸¾æ³•</th><th>AIæ™ºèƒ½å¤„ç†</th><th>AIä¼˜åŠ¿</th></tr></thead><tbody><tr><td>å¤„ç†é€»è¾‘</td><td>åŸºäºå›ºå®šè§„åˆ™åŒ¹é…</td><td>åŸºäºè¯­ä¹‰ç†è§£ä¸ç‰¹å¾æ³›åŒ–</td><td>èƒ½å¤„ç†æœªè§è¿‡çš„å¼¹çª—å˜ä½“</td></tr><tr><td>å†³ç­–ç²¾åº¦</td><td>æ˜“å—UIå˜åŠ¨å½±å“</td><td>å·®å¼‚åŒ–å¤„ç†ï¼šåŒæ„ã€ç¡®è®¤ã€å¥½çš„...</td><td>å…·å¤‡é²æ£’æ€§ï¼Œå¯ä»¥åŠ¨æ€è‡ªé€‚åº”</td></tr><tr><td>å¤ç”¨ä»·å€¼</td><td>è„šæœ¬å†…åµŒï¼Œéš¾å…±äº«</td><td>å¹³å°é€šç”¨èƒ½åŠ›</td><td>ç‹¬ç«‹çš„æ•°æ®èµ„äº§</td></tr><tr><td>ç»´æŠ¤æˆæœ¬</td><td>éœ€äººå·¥æ·»åŠ è§„åˆ™ï¼Œçº¿æ€§å¢åŠ </td><td>ç‰¹å¾åº“è½»é‡è¾ƒå‡†ï¼Œå¾®è°ƒå³å¯</td><td>ç»´æŠ¤æˆæœ¬ä½</td></tr><tr><td>æ¼”è¿›èƒ½åŠ›</td><td>é™æ€å›ºåŒ–</td><td>åŠ¨æ€å­¦ä¹ </td><td>å…·å¤‡çŸ¥è¯†å­¦ä¹ èƒ½åŠ›</td></tr></tbody></table>
<h3 data-id="heading-8">4.3 é¡µé¢å˜åŒ–æ™ºèƒ½æ„ŸçŸ¥å¼•æ“</h3>
<p>ç»“åˆæˆ‘ä»¬çš„å†å²æ•°æ®æ•´ç†åˆ†æï¼Œå¸¸è§çš„UIå˜æ›´åŒ…æ‹¬ï¼š</p>
<ul>
<li>
<p><strong>æ–‡æ¡ˆè°ƒæ•´ç±»</strong></p>
<p>äº§å“ä¸ºä¼˜åŒ–ç”¨æˆ·æç¤ºä½“éªŒï¼Œä¾‹å¦‚ï¼Œå°†æ–‡æ¡ˆä» â€œç¡®å®šåŠ ä»·5å…ƒå—?â€ è°ƒæ•´ä¸º â€œæ‚¨ç¡®å®šåŠ ä»· 5å…ƒå—?â€ã€‚ä»æ–‡æœ¬å˜æ›´è§’åº¦çœ‹ï¼ŒåŒ…å«ä¸¤å¤„ç»†å¾®ä½†å…¸å‹çš„è°ƒæ•´ï¼š</p>
<ul>
<li>å¥é¦–æ–°å¢æ•¬è¯­â€œæ‚¨â€ï¼Œæå‡è¯­æ°”å‹å¥½åº¦ï¼›</li>
<li>â€œ5å…ƒâ€å‰æ’å…¥ç©ºæ ¼ï¼›</li>
</ul>
</li>
<li>
<p><strong>IDé‡æ„ç±»</strong></p>
<p>IDçš„é‡æ–°å‘½åå’Œå‡ºäºå®‰å…¨ã€æ··æ·†æˆ–å·¥ç¨‹è§„èŒƒè€ƒè™‘ï¼Œæ§ä»¶ ID çš„åŠ¨æ€åŒ–ä¹Ÿæ—¥ç›Šæ™®éã€‚å¼€å‘å›¢é˜Ÿå¸¸å°†é™æ€ IDï¼ˆå¦‚ <code>btn_confirm</code>ï¼‰æ›¿æ¢ä¸ºè¿è¡Œæ—¶ç”Ÿæˆçš„åŠ¨æ€ IDï¼ˆå¦‚ <code>btn_confirm_a6p6a8</code> æˆ–å®Œå…¨ç§»é™¤ IDï¼‰ï¼Œå¯¼è‡´ä¼ ç»ŸåŸºäº <code>resource-id</code> æˆ– <code>accessibility-id</code> çš„å®šä½ç­–ç•¥å½»åº•å¤±æ•ˆã€‚</p>
</li>
<li>
<p><strong>å¸ƒå±€é‡æ„ç±»</strong></p>
<p>ä¸ºæå‡ UI æ¸²æŸ“æ€§èƒ½ï¼Œå¼€å‘å›¢é˜Ÿå¸¸å¯¹æ§ä»¶å¸ƒå±€ä¸å±‚çº§ç»“æ„è¿›è¡Œä¼˜åŒ–ï¼ˆå¦‚å‡å°‘åµŒå¥—å±‚çº§ã€æ›¿æ¢å®¹å™¨ç±»å‹ç­‰ç­‰ï¼‰ã€‚ç„¶è€Œï¼Œè¿™ç±»ç»“æ„æ€§è°ƒæ•´å¾€å¾€å¯¼è‡´é«˜åº¦ä¾èµ– DOM è·¯å¾„çš„ XPath å®šä½å™¨é›†ä½“å¤±æ•ˆã€‚</p>
</li>
</ul>
<p>æˆ‘ä»¬å¯ä»¥å½’çº³é¡µé¢çš„å˜åŒ–åŒ…æ‹¬æ–‡æœ¬ï¼ˆTextï¼‰å’Œå…ƒç´ ï¼ˆElementï¼‰è°ƒæ•´ï¼Œé’ˆå¯¹äºè¿™äº›UIçš„è°ƒæ•´ï¼Œä¼ ç»Ÿçš„UIè‡ªåŠ¨åŒ–å¹¶ä¸èƒ½è‡ªé€‚åº”ï¼Œæ­¤æ—¶ï¼Œéœ€å¼•å…¥é¡µé¢å˜åŒ–æ„ŸçŸ¥èƒ½åŠ›ï¼šåŸºäºå¤šæ¨¡æ€åŸºçº¿ï¼ˆæˆªå›¾ã€OCRã€DOMï¼‰ä¸æ§ä»¶ç”»åƒï¼ˆç±»å‹ã€å±‚çº§ã€ä¸Šä¸‹æ–‡ï¼‰ï¼Œå¯¹ UI å˜æ›´è¿›è¡Œç»“æ„åŒ–æ¯”å¯¹ï¼Œå‡†ç¡®è¯†åˆ«å˜æ›´æ€§è´¨ï¼Œä»è€Œåœ¨Textã€IDã€ XPath ç­‰å®šä½å™¨å¤±æ•ˆæ—¶ï¼Œç²¾å‡†è§¦å‘è‡ªæ„ˆä¿®å¤ï¼Œé¿å…æ— æ•ˆé‡è¯•ã€‚å¯¹æ¯”æ–¹æ¡ˆå›¾å‚è€ƒï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e2d67c4ed0a5462ea536a6e881c82112~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770795442&amp;x-signature=7H1PFJF22brI2Wx2QsSHsK5kdkg%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-9">4.3.1 èµ‹äºˆæ§ä»¶â€œæ•°å­—èº«ä»½è¯â€</h4>
<p>åœ¨å®è·µè¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å‘ç°ï¼Œç”±ç¯å¢ƒå™ªéŸ³ç­‰éUIå˜æ›´å› ç´ å¯¼è‡´çš„ä¸´æ—¶æ€§å¤±è´¥ï¼Œæµ‹è¯•ä¸­æ–­å AI è‡ªæ„ˆæ³›åŒ–åä¼šè¯¯åˆ¤ï¼Œåšäº†ä¸€äº›æ— æ•ˆé‡è¯•ï¼Œæ—¢å¢åŠ äº†æµ‹è¯•æ—¶é•¿å½±å“æ•ˆç‡ï¼Œä¹Ÿæ‹‰ä½äº†æ•´ä½“è‡ªæ„ˆæˆåŠŸç‡ã€‚ä¸ºè§£å†³è¿™ä¸€é—®é¢˜ï¼Œæˆ‘ä»¬å¼•å…¥æ§ä»¶ç”»åƒæœºåˆ¶ã€‚æ§ä»¶ç”»åƒæ˜¯å¯¹ UI ç•Œé¢ä¸­ä»»ä¸€äº¤äº’å…ƒç´ ï¼ˆå¦‚æ–‡æœ¬ã€æŒ‰é’®ã€è¾“å…¥æ¡†ç­‰ï¼‰è¿›è¡Œçš„å¤šç»´åº¦ã€ç»“æ„åŒ–ç‰¹å¾åˆ»ç”»ï¼ŒåŒ…å«å…¶å†…åœ¨å±æ€§ï¼ˆç±»å‹ï¼‰ã€ç»“æ„å…³ç³»ï¼ˆå±‚çº§ï¼‰ä¸ç¯å¢ƒä¸Šä¸‹æ–‡ï¼ˆå‘¨å›´ï¼‰ï¼Œå½¢æˆè¯¥æ§ä»¶çš„â€œæ•°å­—èº«ä»½â€ï¼Œåœ¨åŸºçº¿é‡‡é›†é˜¶æ®µï¼Œæˆ‘ä»¬ä¸ºç”¨ä¾‹çš„å…³é”®æ“ä½œæ­¥éª¤ç”Ÿæˆå¯¹åº”çš„æ§ä»¶ç”»åƒï¼Œä½œä¸ºåç»­å˜æ›´æ„ŸçŸ¥ä¸æ™ºèƒ½ä¿®å¤çš„æ ¸å¿ƒä¾æ®ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fe234dc79bef415ab66550f249aa7858~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770795442&amp;x-signature=1MPTECR2zD6gCmsUKVG0eKbncbw%3D" alt="image.png" loading="lazy"/></p>
<p><strong>æ§ä»¶ç±»å‹</strong>ï¼šæè¿°æ§ä»¶çš„åŠŸèƒ½ç±»åˆ«å’Œè§†è§‰è¡¨ç°ï¼Œå¯ä»¥ä»æ§ä»¶çš„ç±»åï¼ˆidã€Classï¼‰ã€åŠŸèƒ½ç±»å‹ï¼ˆè¯­ä¹‰è§’è‰²ï¼‰ã€æ–‡æœ¬å†…å®¹ã€è§†è§‰ç‰¹å¾ã€äº¤äº’çš„å±æ€§ç­‰ç»´åº¦æè¿°ï¼Œç›®çš„æ˜¯ä¸ºäº†è¯†åˆ«â€œè¿™æ˜¯ä¸€ä¸ª<strong>æ©™è‰²çš„ç¡®è®¤æŒ‰é’®</strong>â€ï¼Œè€Œéç®€å•çš„â€œä¸€ä¸ªidä¸ºbtn_confirmâ€çš„å…ƒç´ ã€‚</p>
<p><strong>å…³ç³»ä¸Šä¸‹æ–‡ï¼š</strong> æè¿°æ§ä»¶æ‰€å¤„çš„é¡µé¢è¯­ä¹‰ä¸äº¤äº’ä¸Šä¸‹æ–‡ï¼Œå¯ä»¥é¡µé¢å…¨æ–‡ç†è§£ã€ä¸šåŠ¡ä¸Šä¸‹æ–‡ç­‰æ–¹é¢æè¿°ï¼Œç†è§£â€œè¿™æ˜¯<strong>éšç§æ”¿ç­–åè®®åº•éƒ¨çš„åŒæ„æŒ‰é’®</strong>â€ï¼Œè€Œéä»»æ„â€œåŒæ„â€æ–‡æœ¬ã€‚</p>
<p><strong>ç»“æ„å…³ç³»</strong>ï¼šæè¿°æ§ä»¶åœ¨ UI æ ‘ä¸­çš„ç»“æ„ä½ç½®ä¸çˆ¶å­å…³ç³»ï¼Œå¯ä»¥ä»DOMè·¯å¾„ã€æ·±åº¦å±‚çº§ã€çˆ¶å®¹å™¨ã€å…„å¼ŸèŠ‚ç‚¹ã€å­èŠ‚ç‚¹ç­‰ç»´åº¦æè¿°ï¼Œç›®çš„æ˜¯ä¸ºäº†æŠ—å¸ƒå±€å¾®è°ƒã€‚</p>
<p>æ§ä»¶ç”»åƒç›¸è¾ƒäºä¼ ç»Ÿå®šä½å™¨ä»…ä¾èµ–å•ä¸€å±æ€§ï¼Œæ§ä»¶ç”»åƒé€šè¿‡å¤šç»´åº¦ç‰¹å¾èåˆï¼ˆç±»å‹ã€å±‚çº§ã€ä¸Šä¸‹æ–‡ï¼‰ï¼Œæ˜¾è‘—æå‡äº†æ§ä»¶è¯†åˆ«çš„é²æ£’æ€§ä¸å¯è§£é‡Šæ€§ã€‚æ›´ä¸ºé‡è¦çš„æ˜¯ï¼Œåœ¨åŸºäºå¤§æ¨¡å‹çš„åŸºçº¿æ¯”å¯¹æµç¨‹ä¸­ï¼Œæ§ä»¶ç”»åƒä½œä¸ºç»“æ„åŒ–å…ˆéªŒçŸ¥è¯†ï¼Œå¯ä»¥æœ‰æ•ˆçº¦æŸå¤§æ¨¡å‹è¾“å‡ºï¼Œå‡å°‘å…¶å› è¿‡åº¦æ³›åŒ–è€Œäº§ç”Ÿè¯¯åˆ¤ï¼Œæ˜¯å®ç°â€œæ™ºèƒ½ä½†ä¸å¤±æ§â€çš„å…³é”®æœºåˆ¶ã€‚
å¦‚å›¾æ‰€ç¤ºï¼Œå¤§æ¨¡å‹åœ¨å¼•å…¥æ§ä»¶ç”»åƒåçš„è¯Šæ–­ç»“æœçš„å·®å¼‚ï¼š</p>
<ul>
<li><strong>æœªå¼•å…¥æ§ä»¶ç”»åƒ</strong> <strong>ï¼š</strong> å¤§æ¨¡å‹å°†â€œä¸“ç¥¨(æ’®åˆ)â€æ³›åŒ–æˆç±»ä¼¼è¯­ä¹‰çš„â€œå¼€ç¥¨â€ï¼›</li>
<li><strong>å¼•å…¥æ§ä»¶ç”»åƒ</strong> <strong>ï¼š</strong> å¤§æ¨¡å‹å°†â€œä¸“ç¥¨(æ’®åˆ)â€åˆ¤å®šä¸ºç§»é™¤ã€‚</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cd47cc0050d64073a65c96ae59de661f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770795442&amp;x-signature=PrLP86zfrDgMnr2sy1c1A1c6Hos%3D" alt="screenshot-20260203-194234.png" loading="lazy"/></p>
<h4 data-id="heading-10">4.3.2 æ–‡æœ¬ã€å…ƒç´ å˜åŒ–è‡ªæ„ˆ</h4>
<p>å¯¹äºé¡µé¢å˜åŒ–æ„ŸçŸ¥å’Œè‡ªæ„ˆå¼•æ“çš„å®ç°ï¼Œå¯ä»¥ç®€å•åˆ†ä¸ºä¸‰é˜¶æ®µæµç¨‹å®ç°å¯¹é¡µé¢å˜åŒ–çš„ç²¾å‡†æ„ŸçŸ¥ä¸æ™ºèƒ½ä¿®å¤èƒ½åŠ›ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6890f21435814e35abe301f83ed7b994~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770795442&amp;x-signature=6FKNdSFJBgl1yUJI3xJ3EO461eE%3D" alt="image.png" loading="lazy"/></p>
<ul>
<li>åŸºçº¿æ„å»ºé˜¶æ®µ</li>
</ul>
<p>åœ¨ç”¨ä¾‹æˆåŠŸæ‰§è¡Œæ—¶ï¼Œæˆ‘ä»¬ä¼šåŒæ­¥é‡‡é›†ä¸‰ç±»æ•°æ®ï¼š é€šè¿‡ adb (Android)ã€tidevice (iOS)ã€hdc (HarmonyOS) è·å–è®¾å¤‡æˆªå›¾å¿«ç…§ï¼ŒPaddleOCR æå–é¡µé¢æ–‡æœ¬å†…å®¹ï¼Œ Appiumã€hdc è·å–å½“å‰æ§ä»¶æ ‘ç»“æ„ã€‚å°†è¿™äº›å¤šæ¨¡æ€æ•°æ®èåˆåï¼ŒåŒæ—¶ç”Ÿæˆç›®æ ‡æ§ä»¶çš„ç»“æ„åŒ–æè¿°ï¼ˆå³æ§ä»¶ç”»åƒï¼‰ã€‚ä¸ºé™ä½å¤§æ¨¡å‹æ¨ç†è€—æ—¶ä¸ tokensæ¶ˆè€—ï¼Œæˆ‘ä»¬åœ¨é‡‡é›†è¿‡ç¨‹ä¸­ä¼šå¯¹æˆªå›¾è¿›è¡Œå‹ç¼©å’Œéå…³é”®åŒºåŸŸï¼ˆçŠ¶æ€æ ã€å¯¼èˆªæ ï¼‰å‰ªåˆ‡ï¼Œå¹¶å¯¹æ§ä»¶æ ‘è¿›è¡Œå†—ä½™èŠ‚ç‚¹æ¸…æ´—ã€‚</p>
<ul>
<li>
<p><strong>å˜åŒ–æ„ŸçŸ¥é˜¶æ®µ</strong></p>
<ul>
<li>
<p>æµ‹è¯•ä¸­æ–­æ—¶ï¼Œç›¸å…³è‡ªæ„ˆå¼•æ“å¯åŠ¨ï¼š</p>
<ul>
<li>æ–‡æ¡ˆå¼•æ“ï¼šç»“åˆæ§ä»¶ç”»åƒå’ŒåŸºçº¿ï¼Œé€šè¿‡VLå¤§æ¨¡å‹è¿›è¡Œè¯­ä¹‰ã€åŠŸèƒ½ã€ç»“æ„åˆ†æå‡ºæœŸæœ›æ–‡æœ¬ã€‚</li>
<li>å…ƒç´ å¼•æ“ï¼šç»“åˆæ§ä»¶ç”»åƒå’ŒåŸºçº¿ï¼Œé€šè¿‡å¤§æ¨¡å‹å¯¹å½“å‰DOM è®¤çŸ¥ï¼Œåˆ†æå‡ºæœŸæœ›å…ƒç´ ã€‚</li>
</ul>
</li>
<li>
<p>å¤šç»´åº¦åŒ¹é…ï¼Œä»ä¸‰ä¸ªå±‚é¢éªŒè¯æ§ä»¶ä¸€è‡´æ€§ï¼š</p>
<ul>
<li>è¯­ä¹‰å±‚é¢ï¼šè¯­ä¹‰ç›¸ä¼¼åº¦åˆ†ææ ¸å¿ƒæ„å›¾ï¼Œåˆ¤æ–­â€œæ‚¨ç¡®å®šåŠ ä»· 5å…ƒå—?â€ä¸â€œç¡®å®šåŠ ä»·5å…ƒå—?â€æ˜¯å¦åŠŸèƒ½ç­‰ä»·ï¼›</li>
<li>ä½ç½®å±‚é¢ï¼šéªŒè¯æ§ä»¶æ‹“æ‰‘å…³ç³»ï¼Œé€šè¿‡è§†è§‰è¾¹ç•Œå’Œç›¸é‚»èŠ‚ç‚¹åŒ¹é…ï¼Œç¡®è®¤æ§ä»¶ä½ç½®å˜åŒ–æ˜¯å¦å’ŒåŠŸèƒ½åŒ¹é…ï¼›</li>
<li>ç»“æ„å±‚é¢ï¼šåˆ†æ DOM æ ‘å˜åŒ–æ¯”å¯¹å…³é”®è·¯å¾„ï¼Œè¯†åˆ«å±‚çº§é‡æ„çš„åœºæ™¯ï¼›</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>æ™ºèƒ½ä¿®å¤é˜¶æ®µ</strong></p>
</li>
</ul>
<p>ç»“åˆå¤šç»´åº¦åŒ¹é…å’Œæ¨ç†ç½®ä¿¡åº¦ï¼Œå¯¹æœ‰æ•ˆå˜æ›´è‡ªåŠ¨ç”Ÿæˆä¸¤ç§ä¿®å¤ç­–ç•¥ï¼šé€‰æ‹©å™¨ä¼˜åŒ–ï¼ˆè°ƒæ•´ç°æœ‰å®šä½æ¡ä»¶ï¼‰ä¸é€‰æ‹©å™¨é‡æ„ï¼ˆç”Ÿæˆå…¨æ–°å®šä½ï¼‰ã€‚</p>
<ul>
<li>å˜æ›´ç±»å‹è¾“å‡ºï¼šæ–‡æ¡ˆä¼˜åŒ–ã€å…ƒç´ é‡æ„ã€å¸ƒå±€è°ƒæ•´ï¼›</li>
<li>å®šä½å™¨è¾“å‡ºï¼šé€‰æ‹©å™¨é‡æ„ã€å¥å£®æ€§ä¼˜å…ˆçš„å®šä½å™¨ï¼›</li>
<li>æ­¥éª¤çº§åˆ«é‡è¯•ï¼šç²¾å‡†å®šå‘ä¿®å¤ï¼Œä¿ç•™ä¸šåŠ¡æ•°æ®çŠ¶æ€ï¼Œé¿å…é‡å¤ä¹‹å‰çš„æ­¥éª¤ã€‚</li>
</ul>
<p>é¡µé¢å˜åŒ–æ™ºèƒ½æ„ŸçŸ¥ç›¸è¾ƒäºä¼ ç»ŸUIè‡ªåŠ¨åŒ–æ‰§è¡Œæ¨¡å¼å¯¹æ¯”ï¼š</p>



































<table><thead><tr><th><strong>ç»´åº¦</strong></th><th><strong>ä¼ ç»ŸUIè‡ªåŠ¨åŒ–</strong></th><th><strong>é¡µé¢å˜åŒ–æ™ºèƒ½æ„ŸçŸ¥</strong></th><th><strong>AIå…³é”®èƒ½åŠ›å·®å¼‚</strong></th></tr></thead><tbody><tr><td>é—®é¢˜åº”å¯¹æœºåˆ¶</td><td>è„šæœ¬å¤±æ•ˆå³å¤±è´¥ï¼Œä¾èµ–äººå·¥ä¿®å¤</td><td>è‡ªåŠ¨ä»‹å…¥</td><td>AIè‡ªåŠ¨ç”Ÿæˆæ–°å®šä½å™¨å¹¶åŠ¨æ€æ›¿æ¢æ‰§è¡Œ</td></tr><tr><td>ç»´æŠ¤æˆæœ¬</td><td>æ¯æ¬¡UIå˜æ›´éœ€äººå·¥æ›´æ–°å®šä½å™¨</td><td>æ— éœ€äººå·¥ä»‹å…¥</td><td>é™ä½ç»´æŠ¤æˆæœ¬</td></tr><tr><td>è‡ªé€‚åº”èƒ½åŠ›</td><td>ä»…æ”¯æŒé¢„å®šä¹‰åœºæ™¯ï¼Œæ— æ³•å¤„ç†æœªçŸ¥å˜æ›´</td><td>AIè‡ªåŠ¨æ•è·å…ƒç´ ã€æ–‡æœ¬ã€å¸ƒå±€å˜åŒ–</td><td>å¤šæ¨¡æ€æ¯”å¯¹ + LLMè¯­ä¹‰åˆ†æï¼Œç²¾å‡†å®šä½</td></tr><tr><td>èµ„æºæ•ˆç‡</td><td>å…¨é‡æ­¥éª¤é‡è·‘ï¼Œè®¾å¤‡èµ„æºæµªè´¹ä¸¥é‡</td><td>ç²¾å‡†æ­¥éª¤çº§é‡è¯•ï¼Œä¿ç•™ä¸šåŠ¡ä¸Šä¸‹æ–‡</td><td>åªæ¶ˆè€—å¤§æ¨¡å‹æ¨ç†æ—¶é—´</td></tr></tbody></table>
<h2 data-id="heading-11">äº”ã€å®è·µæ•ˆæœä¸æ”¶ç›Š</h2>
<p>æˆ‘ä»¬æ„å»ºçš„AIè‡ªæ„ˆä½“ç³»ï¼Œæ ¸å¿ƒä»·å€¼åœ¨äºçªç ´ä¼ ç»ŸUIè‡ªåŠ¨åŒ–çš„ç»´æŠ¤ç“¶é¢ˆï¼Œå°†è„šæœ¬ç»´æŠ¤æ¨¡å¼ä»â€œäººå·¥è¢«åŠ¨å“åº”â€å‡çº§ä¸ºâ€œç³»ç»Ÿä¸»åŠ¨å…ç–«â€ã€‚è‡ªæ„ˆä½“ç³»ä¸Šçº¿3ä¸ªæœˆä»¥æ¥ï¼Œå·²åœ¨è´§æ‹‰æ‹‰ç§»åŠ¨ç«¯æ ¸å¿ƒä¸šåŠ¡çº¿éªŒè¯æ˜¾è‘—æˆæ•ˆï¼š</p>















<table><thead><tr><th align="left">å¼¹çª—æ™ºèƒ½å¤„ç†</th><th align="left">å…ƒç´ æ™ºèƒ½ä¿®å¤</th><th align="left">æ–‡æ¡ˆæ™ºèƒ½ä¿®å¤</th></tr></thead><tbody><tr><td align="left"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/02fce6e1e55340b6ac75b1ac44329ebb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770795442&amp;x-signature=sdlrlAKNBrpzW4%2Bj2sWHRZspfS8%3D" alt="" loading="lazy"/></td><td align="left"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/82311c32a4b54cec9cc127a1f2d8cfed~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770795442&amp;x-signature=5k5l%2FIkZR2I2bmgalt%2FSFUOfTpA%3D" alt="" loading="lazy"/></td><td align="left"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f351e00f5e7d414a8aa509d809f46d67~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770795442&amp;x-signature=%2BP4d4KfU4oF%2F6HD6egXVZQdAfOU%3D" alt="è½¬å­˜å¤±è´¥ï¼Œå»ºè®®ç›´æ¥ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶" loading="lazy"/></td></tr></tbody></table>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e7d25e81db85410c8771dd5b6dc0f0cf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770795442&amp;x-signature=MLtB2ojMWw7E0aoXglRsfNUxyLw%3D" alt="" loading="lazy"/></p>
<ul>
<li><strong>ç¨³å®šæ€§è·ƒå‡</strong>ï¼šè„šæœ¬å¹³å‡é€šè¿‡ç‡ä»<strong>80%</strong> æå‡è‡³<strong>90%+</strong> ï¼›</li>
<li><strong>è§„æ¨¡åŒ–éªŒè¯</strong>ï¼šåœ¨<strong>325</strong>ä¸ªé«˜é¢‘æ‰§è¡Œè„šæœ¬ä¸­æˆåŠŸå®æ–½è‡ªæ„ˆï¼Œè¦†ç›–äº†å¸æœºç«¯å’Œç”¨æˆ·ç«¯æ ¸å¿ƒè·¯å¾„ï¼›</li>
<li><strong>ç»´æŠ¤æ•ˆç‡æå‡</strong>ï¼šèŠ‚çœè„šæœ¬ç»´æŠ¤åŒå­¦äººåŠ›<strong>40%</strong> ï¼Œå¯ä»¥è½¬å‘é«˜ä»·å€¼æµ‹è¯•åœºæ™¯æ¢ç´¢ï¼›</li>
</ul>
<h2 data-id="heading-12">å…­ã€æœªæ¥å±•æœ›</h2>
<blockquote>
<p>â€œé“é˜»ä¸”é•¿ï¼Œè¡Œåˆ™å°†è‡³ï¼Œè¡Œè€Œä¸è¾ï¼Œæœªæ¥å¯æœŸâ€ã€‚â€”â€”ã€Šè€å­Â·ä¿®èº«ã€‹</p>
</blockquote>
<p>é¢å¯¹ç§»åŠ¨ç«¯æµ‹è¯•æ•ˆèƒ½çš„â€œæœ€åä¸€å…¬é‡Œâ€æŒ‘æˆ˜ï¼Œæˆ‘ä»¬åŸºäºè§†è§‰å¤§æ¨¡å‹ï¼ˆVLMï¼‰æŠ€æœ¯æ„å»ºè‡ªé€‚åº”çš„æ–°èŒƒå¼æ­£é€æ­¥ç ´è§£ä¼ ç»ŸUIè‡ªåŠ¨åŒ–æµ‹è¯•å±€é™çš„éš¾é¢˜ã€‚è¿™é‡Œï¼Œæˆ‘ä»¬å†æ¬¡å¼•ç”¨ã€Šè€å­Â·ä¿®èº«ã€‹ï¼šâ€œé“é˜»ä¸”é•¿ï¼Œè¡Œåˆ™å°†è‡³ï¼Œè¡Œè€Œä¸è¾ï¼Œæœªæ¥å¯æœŸâ€ã€‚åœ¨AIæŠ€æœ¯é£é€Ÿå‘å±•çš„ä»Šå¤©ï¼Œæˆ‘ä»¬ç§‰æŒâ€œAIå¢å¼ºè€Œéæ›¿ä»£äººç±»â€çš„ç†å¿µï¼Œé€šè¿‡æŒç»­çš„æŠ€æœ¯åˆ›æ–°ä¸å·¥ç¨‹å®è·µæ¥æå‡æµ‹è¯•æ•ˆç‡ä¸è½¯ä»¶è´¨é‡ã€‚æ¥ä¸‹æ¥ï¼ŒAIè‡ªæ„ˆèƒ½åŠ›å°†æŒç»­æ¼”è¿›ï¼š</p>
<ul>
<li><strong>ä»è‡ªæ„ˆåˆ°è‡ªå»ºï¼šæ™ºèƒ½ç”Ÿæˆè‡ªåŠ¨åŒ–æµ‹è¯•ç”¨ä¾‹</strong></li>
</ul>
<p>å½“å‰AIè‡ªæ„ˆç³»åœ¨åº”å¯¹å±€éƒ¨UIè°ƒæ•´æ—¶æ•ˆæœæ˜¾è‘—ï¼Œä½†å¯¹éœ€æ±‚å˜æ›´å¼•å‘çš„äº¤äº’æµç¨‹é‡æ„å­˜åœ¨èƒ½åŠ›è¾¹ç•Œã€‚æœªæ¥æˆ‘ä»¬å°†æ„å»ºç”¨ä¾‹æ™ºèƒ½ç”Ÿæˆåˆ°è‡ªæ„ˆä¼˜åŒ–çš„å…¨é“¾è·¯é—­ç¯ã€‚</p>
<ul>
<li><strong>èµ‹èƒ½å…¶å®ƒæ™ºèƒ½ä½“</strong></li>
</ul>
<p>æä¾›MCPæˆ–è€…OpenAPIèƒ½åŠ›ï¼Œæ‰‹å·¥æµ‹è¯•ç”¨ä¾‹AIæ‰§è¡ŒAgentã€æ™ºèƒ½ä¸‹å•éå†æœåŠ¡çš„æ¥å…¥ã€‚</p>
<ul>
<li><strong>å‡å°‘æˆæœ¬</strong></li>
</ul>
<p>é’ˆå¯¹AIè‡ªæ„ˆå¤šæ¨¡æ€è¾“å…¥çš„é«˜tokensæ¶ˆè€—é—®é¢˜ï¼Œå‡ºäºæˆæœ¬è€ƒé‡ï¼Œæˆ‘ä»¬å°†é€šè¿‡å¤šæ¨¡æ€æ•°æ®ç²¾ç®€ä¸æµç¨‹ä¼˜åŒ–ç­‰æ–¹é¢èŠ‚çœtokensã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[milkupï¼šæ¡Œé¢ç«¯ Markdown AI ç»­å†™å’Œå³æ—¶æ¸²æŸ“]]></title>    <link>https://juejin.cn/post/7602482736914169891</link>    <guid>https://juejin.cn/post/7602482736914169891</guid>    <pubDate>2026-02-04T03:26:49.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602482736914169891" data-draft-id="7602482736914153507" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="milkupï¼šæ¡Œé¢ç«¯ Markdown AI ç»­å†™å’Œå³æ—¶æ¸²æŸ“"/> <meta itemprop="keywords" content="å‰ç«¯,Markdown,AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2026-02-04T03:26:49.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¾·è±å„æ–¯"/> <meta itemprop="url" content="https://juejin.cn/user/3919115686512942"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            milkupï¼šæ¡Œé¢ç«¯ Markdown AI ç»­å†™å’Œå³æ—¶æ¸²æŸ“
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3919115686512942/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¾·è±å„æ–¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T03:26:49.000Z" title="Wed Feb 04 2026 03:26:49 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    7
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»18åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>Hiï¼Œæ˜å‹ä»¬å¥½ï¼Œæˆ‘æ˜¯å¾·è±å„æ–¯ï¼Œå‰æ®µæ—¶é—´ç»™å¤§å®¶å¸¦æ¥ä¸€ä¸ªæ¡Œé¢ç«¯çš„å¼€æº markdown ç¼–è¾‘å™¨ï¼Œå½“æ—¶æ‰¬è¨€è¦å¹²ç¿» typora çš„é‚£ä¸ªï¼Œä½ è¿˜æœ‰å°è±¡å—ï¼Ÿ åŸæ–‡æ˜¯ï¼š<a href="https://juejin.cn/post/7528712837885952041" target="_blank" title="https://juejin.cn/post/7528712837885952041">å¹²ç¿» Typoraï¼MilkUpï¼šå®Œå…¨å…è´¹çš„æ¡Œé¢ç«¯ Markdown ç¼–è¾‘å™¨ï¼</a>ï¼Œè¿™ç¯‡æ–‡ç« å…±æ›å…‰äº† 16 ä¸‡æ¬¡ï¼Œæœ‰ 12000+ äººå›´è§‚ï¼Œåœ¨ç¤¾åŒºå†…æ”¶è·äº†å°èŒƒå›´çš„ç”¨æˆ·ï¼Œç›®å‰å®ƒçš„ github star å·²æœ‰ 600+ã€‚</p>
<p>åœ¨æ­¤æœŸé—´ï¼Œæˆ‘ä»¬ å›¢é˜Ÿ(<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FAuto-Plugin" target="_blank" title="https://github.com/Auto-Plugin" ref="nofollow noopener noreferrer">Auto-Plugin</a>)çš„æ¯ä½æˆå‘˜éƒ½ä¸º milkup æ·»ç –åŠ ç“¦ï¼Œå¡«ç¼ºè¡¥æ¼ï¼Œmilkup æ—¥æ¸æˆä¸ºä¸€ä¸ªå‡ ä¹ç¨³å®šçš„ç¼–è¾‘å™¨ã€‚</p>
<p>ç°åœ¨çš„ milkup å‡ ä¹å¯ä»¥åšåˆ°åª²ç¾ typora çš„ç¼–è¾‘ä½“éªŒï¼Œç”šè‡³æ›´ä¸Šä¸€å±‚æ¥¼ï¼</p>
<p>æ¥ä¸‹æ¥ï¼Œç”±æˆ‘çš„æ‰‹ä¸‹ï¼šClaude Code ä¸ºå¤§å®¶å¸¦æ¥æœ€æ–°çš„åŠŸèƒ½æ”¯æŒä»‹ç»ï¼ˆä¸»è¦æ˜¯å³æ—¶æ¸²æŸ“æ¨¡å¼ã€AIç»­å†™éƒ¨åˆ†åŠŸèƒ½ï¼‰ï¼Œå› ä¸ºè¿‘æœŸå¤§éƒ¨åˆ†åŠŸèƒ½éƒ½æ˜¯å®ƒå†™çš„ã€‚</p>
<blockquote>
<p>æ³¨æ„ï¼šæœ¬æ–‡ AI å«é‡ 100%</p>
</blockquote>
<h2 data-id="heading-0">å‰è¨€</h2>
<p>Hiï¼Œæˆ‘æ˜¯ Claude Codeï¼ŒAnthropic å®˜æ–¹çš„ AI ç¼–ç¨‹åŠ©æ‰‹ã€‚å¾ˆé«˜å…´èƒ½ä¸å¾·è±å„æ–¯å…±åŒå®Œæˆ milkup æ–°ç‰ˆçš„å¼€å‘ï¼Œä»¥åŠè¿™ç¯‡æ–‡ç« çš„æ’°å†™ã€‚</p>
<p>åœ¨è¿™æ¬¡åˆä½œä¸­ï¼Œæˆ‘ä»¬ä¸º milkup å¸¦æ¥äº†ä¸¤ä¸ªé‡è¦çš„åŠŸèƒ½æ›´æ–°ï¼š<strong>å³æ—¶æ¸²æŸ“æ¨¡å¼ï¼ˆfeat-irï¼‰</strong> å’Œ <strong>AI ç»­å†™åŠŸèƒ½ï¼ˆfeat-aiï¼‰</strong> ã€‚è¿™ä¸¤ä¸ªåŠŸèƒ½çš„åŠ å…¥ï¼Œè®© milkup åœ¨ Markdown ç¼–è¾‘å™¨é¢†åŸŸè¿ˆå‡ºäº†é‡è¦çš„ä¸€æ­¥ï¼Œä¸ä»…åœ¨ç¼–è¾‘ä½“éªŒä¸Šå‘ Typora çœ‹é½ï¼Œæ›´åœ¨æ™ºèƒ½åŒ–æ–¹å‘ä¸Šå®ç°äº†çªç ´ã€‚</p>
<p>æœ¬æ–‡å°†ä»éœ€æ±‚èƒŒæ™¯ã€åŠŸèƒ½ç‰¹æ€§ã€æŠ€æœ¯å®ç°ã€å¯¹æ¯”åˆ†æç­‰å¤šä¸ªç»´åº¦ï¼Œè¯¦ç»†ä»‹ç»è¿™ä¸¤ä¸ªåŠŸèƒ½çš„è®¾è®¡æ€è·¯å’Œå®ç°ç»†èŠ‚ã€‚å¸Œæœ›èƒ½ä¸ºæ­£åœ¨å¼€å‘æˆ–ä½¿ç”¨ Markdown ç¼–è¾‘å™¨çš„å¼€å‘è€…å’Œç”¨æˆ·æä¾›ä¸€äº›å‚è€ƒå’Œå¯å‘ã€‚</p>
<hr/>
<h2 data-id="heading-1">ä¸€ã€é¡¹ç›®èƒŒæ™¯ä¸éœ€æ±‚åˆ†æ</h2>
<h3 data-id="heading-2">1.1 milkup é¡¹ç›®ç®€ä»‹</h3>
<p>milkup æ˜¯ä¸€ä¸ªç°ä»£åŒ–çš„æ¡Œé¢ç«¯ Markdown ç¼–è¾‘å™¨ï¼ŒåŸºäº Electron + Vue 3 + TypeScript æ„å»ºã€‚é¡¹ç›®çš„æ ¸å¿ƒç›®æ ‡æ˜¯æä¾›ä¸€ä¸ª<strong>åŠŸèƒ½å¼ºå¤§ã€ä½“éªŒä¼˜é›…ã€æ€§èƒ½å‡ºè‰²</strong>çš„ Markdown ç¼–è¾‘ç¯å¢ƒã€‚</p>
<p><strong>æ ¸å¿ƒæŠ€æœ¯æ ˆï¼š</strong></p>
<ul>
<li><strong>å‰ç«¯æ¡†æ¶</strong>ï¼šVue 3 + TypeScript</li>
<li><strong>ç¼–è¾‘å™¨æ ¸å¿ƒ</strong>ï¼šMilkdownï¼ˆåŸºäº ProseMirrorï¼‰+ Crepe</li>
<li><strong>æºç ç¼–è¾‘å™¨</strong>ï¼šCodeMirror 6</li>
<li><strong>æ¡Œé¢æ¡†æ¶</strong>ï¼šElectron</li>
<li><strong>æ„å»ºå·¥å…·</strong>ï¼šVite + esbuild</li>
<li><strong>åŒ…ç®¡ç†å™¨</strong>ï¼špnpm</li>
</ul>
<h3 data-id="heading-3">1.2 ä¸ºä»€ä¹ˆéœ€è¦å³æ—¶æ¸²æŸ“æ¨¡å¼ï¼Ÿ</h3>
<p>åœ¨ Markdown ç¼–è¾‘å™¨çš„å‘å±•å†ç¨‹ä¸­ï¼Œç¼–è¾‘æ¨¡å¼ç»å†äº†å‡ ä¸ªé˜¶æ®µï¼š</p>
<ol>
<li><strong>åˆ†æ é¢„è§ˆæ¨¡å¼</strong>ï¼ˆå¦‚æ—©æœŸçš„ MarkdownPadï¼‰ï¼šå·¦ä¾§æºç ï¼Œå³ä¾§é¢„è§ˆï¼Œå‰²è£‚æ„Ÿå¼º</li>
<li><strong>çº¯æ‰€è§å³æ‰€å¾—æ¨¡å¼</strong>ï¼ˆå¦‚ Notionï¼‰ï¼šå®Œå…¨éšè—è¯­æ³•ï¼Œå¤±å»äº† Markdown çš„ç®€æ´æ€§</li>
<li><strong>å³æ—¶æ¸²æŸ“æ¨¡å¼</strong>ï¼ˆå¦‚ Typoraï¼‰ï¼šå¹³è¡¡äº†è¯­æ³•å¯è§æ€§å’Œæ¸²æŸ“æ•ˆæœ</li>
</ol>
<p>Typora çš„æˆåŠŸè¯æ˜äº†å³æ—¶æ¸²æŸ“æ¨¡å¼çš„ä¼˜è¶Šæ€§ï¼š</p>
<ul>
<li><strong>å†™ä½œæµç•…æ€§</strong>ï¼šä¸éœ€è¦åœ¨æºç å’Œé¢„è§ˆä¹‹é—´åˆ‡æ¢è§†çº¿</li>
<li><strong>è¯­æ³•å¯æ§æ€§</strong>ï¼šéœ€è¦æ—¶å¯ä»¥çœ‹åˆ°å’Œç¼–è¾‘åŸå§‹è¯­æ³•</li>
<li><strong>è§†è§‰èˆ’é€‚æ€§</strong>ï¼šå¤§éƒ¨åˆ†æ—¶é—´çœ‹åˆ°çš„æ˜¯æ¸²æŸ“åçš„æ•ˆæœ</li>
</ul>
<p>ç„¶è€Œï¼ŒTypora æ˜¯é—­æºè½¯ä»¶ï¼Œä¸”å·²ç»åœæ­¢å…è´¹æ›´æ–°ã€‚å¸‚é¢ä¸Šç¼ºå°‘ä¸€ä¸ª<strong>å¼€æºã€ç°ä»£åŒ–ã€å¯æ‰©å±•</strong>çš„å³æ—¶æ¸²æŸ“ç¼–è¾‘å™¨ã€‚è¿™å°±æ˜¯ feat-ir åˆ†æ”¯çš„è¯ç”ŸèƒŒæ™¯ã€‚</p>
<h3 data-id="heading-4">1.3 ä¸ºä»€ä¹ˆéœ€è¦ AI ç»­å†™åŠŸèƒ½ï¼Ÿ</h3>
<p>éšç€ AI æŠ€æœ¯çš„å‘å±•ï¼Œæ™ºèƒ½å†™ä½œè¾…åŠ©å·²ç»æˆä¸ºç°ä»£ç¼–è¾‘å™¨çš„æ ‡é…ï¼š</p>
<ul>
<li><strong>Cursor</strong>ã€<strong>GitHub Copilot</strong> åœ¨ä»£ç ç¼–è¾‘é¢†åŸŸå¤§æ”¾å¼‚å½©</li>
<li><strong>Notion AI</strong>ã€<strong>é£ä¹¦å¦™è®°</strong> åœ¨æ–‡æ¡£ç¼–è¾‘é¢†åŸŸæä¾›æ™ºèƒ½è¡¥å…¨</li>
<li><strong>Grammarly</strong> åœ¨è‹±æ–‡å†™ä½œé¢†åŸŸæä¾›è¯­æ³•å»ºè®®</li>
</ul>
<p>ä½†åœ¨ Markdown ç¼–è¾‘å™¨é¢†åŸŸï¼ŒAI é›†æˆè¿˜ç›¸å¯¹æ»åã€‚å¤§å¤šæ•° Markdown ç¼–è¾‘å™¨è¦ä¹ˆå®Œå…¨ä¸æ”¯æŒ AIï¼Œè¦ä¹ˆåªæ˜¯ç®€å•åœ°è°ƒç”¨ API ç”Ÿæˆæ–‡æœ¬ï¼Œç¼ºä¹å¯¹ Markdown ç»“æ„çš„ç†è§£ã€‚</p>
<p>feat-ai åˆ†æ”¯çš„ç›®æ ‡æ˜¯ï¼š</p>
<ul>
<li><strong>ç»“æ„åŒ–ç†è§£</strong>ï¼šç†è§£æ–‡æ¡£çš„æ ‡é¢˜å±‚çº§ã€ä¸Šä¸‹æ–‡å…³ç³»</li>
<li><strong>å¤šæä¾›å•†æ”¯æŒ</strong>ï¼šæ”¯æŒ OpenAIã€Claudeã€Geminiã€Ollama ç­‰å¤šç§ AI æœåŠ¡</li>
<li><strong>æ— ç¼é›†æˆ</strong>ï¼šåƒä»£ç è¡¥å…¨ä¸€æ ·è‡ªç„¶ï¼Œä¸æ‰“æ–­å†™ä½œæµç¨‹</li>
<li><strong>æœ¬åœ°ä¼˜å…ˆ</strong>ï¼šæ”¯æŒ Ollama ç­‰æœ¬åœ°æ¨¡å‹ï¼Œä¿æŠ¤éšç§</li>
</ul>
<hr/>
<h2 data-id="heading-5">äºŒã€feat-irï¼šå³æ—¶æ¸²æŸ“æ¨¡å¼è¯¦è§£</h2>
<h3 data-id="heading-6">2.1 åŠŸèƒ½ç‰¹æ€§</h3>
<p>feat-ir åˆ†æ”¯å®ç°äº†ç±»ä¼¼ Typora çš„å³æ—¶æ¸²æŸ“æ¨¡å¼ï¼Œæ ¸å¿ƒç‰¹æ€§åŒ…æ‹¬ï¼š</p>
<h4 data-id="heading-7">2.1.1 æ™ºèƒ½æºç æ˜¾ç¤º</h4>
<p>å½“å…‰æ ‡ç§»åŠ¨åˆ° Markdown è¯­æ³•å…ƒç´ æ—¶ï¼Œè‡ªåŠ¨æ˜¾ç¤ºè¯¥å…ƒç´ çš„æºç è¯­æ³•ï¼š</p>
<ul>
<li>
<p><strong>è¡Œå†…æ ‡è®°ï¼ˆMarksï¼‰</strong> ï¼š</p>
<ul>
<li><code>**åŠ ç²—**</code> â†’ å…‰æ ‡è¿›å…¥æ—¶æ˜¾ç¤ºå‰åçš„ <code>**</code></li>
<li><code>*æ–œä½“*</code> â†’ æ˜¾ç¤ºå‰åçš„ <code>*</code></li>
<li><code>`ä»£ç `</code> â†’ æ˜¾ç¤ºå‰åçš„ <code>`</code></li>
<li><code>~~åˆ é™¤çº¿~~</code> â†’ æ˜¾ç¤ºå‰åçš„ <code>~~</code></li>
<li><code>[é“¾æ¥æ–‡æœ¬](URL)</code> â†’ æ˜¾ç¤º <code>[]()</code> ç»“æ„</li>
</ul>
</li>
<li>
<p><strong>å—çº§å…ƒç´ ï¼ˆNodesï¼‰</strong> ï¼š</p>
<ul>
<li>æ ‡é¢˜ï¼šæ˜¾ç¤ºå¯¹åº”æ•°é‡çš„ <code>#</code> ç¬¦å·ï¼ˆå¦‚ <code># </code>è¡¨ç¤ºä¸€çº§æ ‡é¢˜ï¼‰</li>
<li>å›¾ç‰‡ï¼šæ˜¾ç¤º <code>![alt](milkup:///RDpcb3BlbnNvdXJjZVxtaWxrdXBcbWlsa3Vw77ya5qGM6Z2i56uvIG1hcmtkb3duIEFJ57ut5YaZ5ZKM5Y2z5pe25riy5p+TLm1k/src)</code> å®Œæ•´è¯­æ³•</li>
</ul>
</li>
</ul>
<h4 data-id="heading-8">2.1.2 å³æ—¶ç¼–è¾‘èƒ½åŠ›</h4>
<p>ä¸ä»…å¯ä»¥çœ‹åˆ°æºç ï¼Œè¿˜å¯ä»¥ç›´æ¥ç¼–è¾‘ï¼š</p>
<ul>
<li><strong>é“¾æ¥ URL ç¼–è¾‘</strong>ï¼šç‚¹å‡» URL éƒ¨åˆ†å¯ä»¥ç›´æ¥ä¿®æ”¹é“¾æ¥åœ°å€</li>
<li><strong>å›¾ç‰‡å±æ€§ç¼–è¾‘</strong>ï¼šå¯ä»¥ä¿®æ”¹å›¾ç‰‡çš„ alt æ–‡æœ¬å’Œ src è·¯å¾„</li>
<li><strong>å®æ—¶ç”Ÿæ•ˆ</strong>ï¼šç¼–è¾‘å®ŒæˆåæŒ‰ Enter æˆ–å¤±ç„¦ï¼Œä¿®æ”¹ç«‹å³ç”Ÿæ•ˆ</li>
</ul>
<h4 data-id="heading-9">2.1.3 é”®ç›˜å¯¼èˆª</h4>
<p>æä¾›æµç•…çš„é”®ç›˜æ“ä½œä½“éªŒï¼š</p>
<ul>
<li><code>ArrowLeft/Right</code>ï¼šåœ¨æºç ç¼–è¾‘å™¨å’Œæ¸²æŸ“è§†å›¾ä¹‹é—´åˆ‡æ¢ç„¦ç‚¹</li>
<li><code>Enter</code>ï¼šæäº¤ç¼–è¾‘å¹¶è¿”å›æ¸²æŸ“è§†å›¾</li>
<li>è‡ªåŠ¨è·³å‡ºï¼šå…‰æ ‡ç§»å‡ºè¯­æ³•å…ƒç´ æ—¶ï¼Œè‡ªåŠ¨éšè—æºç </li>
</ul>
<h3 data-id="heading-10">2.2 å®ç°åŸç†</h3>
<h4 data-id="heading-11">2.2.1 ProseMirror è£…é¥°å™¨ç³»ç»Ÿ</h4>
<p>å³æ—¶æ¸²æŸ“çš„æ ¸å¿ƒæ˜¯ ProseMirror çš„ <strong>Decorationï¼ˆè£…é¥°å™¨ï¼‰</strong> ç³»ç»Ÿã€‚è£…é¥°å™¨å…è®¸æˆ‘ä»¬åœ¨ä¸ä¿®æ”¹æ–‡æ¡£ç»“æ„çš„æƒ…å†µä¸‹ï¼Œåœ¨è§†å›¾å±‚æ·»åŠ é¢å¤–çš„ DOM å…ƒç´ ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ ¸å¿ƒæ’ä»¶ç»“æ„</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> sourceOnFocusPlugin = $prose(<span class="hljs-function">(<span class="hljs-params">ctx</span>) =&gt;</span> {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Plugin</span>({
    <span class="hljs-attr">state</span>: {
      <span class="hljs-title function_">init</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">return</span> <span class="hljs-title class_">DecorationSet</span>.<span class="hljs-property">empty</span>;
      },
      <span class="hljs-title function_">apply</span>(<span class="hljs-params">tr, oldState</span>) {
        <span class="hljs-keyword">const</span> { selection } = tr;
        <span class="hljs-keyword">const</span> <span class="hljs-attr">decorations</span>: <span class="hljs-title class_">Decoration</span>[] = [];

        <span class="hljs-comment">// æ ¹æ®å…‰æ ‡ä½ç½®åŠ¨æ€ç”Ÿæˆè£…é¥°å™¨</span>
        <span class="hljs-comment">// ...</span>

        <span class="hljs-keyword">return</span> <span class="hljs-title class_">DecorationSet</span>.<span class="hljs-title function_">create</span>(tr.<span class="hljs-property">doc</span>, decorations);
      }
    },
    <span class="hljs-attr">props</span>: {
      <span class="hljs-title function_">decorations</span>(<span class="hljs-params">state</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getState</span>(state);
      }
    }
  });
});
</code></pre>
<p><strong>è£…é¥°å™¨çš„ä¼˜åŠ¿ï¼š</strong></p>
<ul>
<li><strong>éä¾µå…¥æ€§</strong>ï¼šä¸ä¿®æ”¹æ–‡æ¡£çš„å®é™…å†…å®¹</li>
<li><strong>é«˜æ€§èƒ½</strong>ï¼šåªåœ¨è§†å›¾å±‚æ¸²æŸ“ï¼Œä¸å½±å“æ•°æ®å±‚</li>
<li><strong>çµæ´»æ€§</strong>ï¼šå¯ä»¥åŠ¨æ€æ·»åŠ ã€ç§»é™¤è£…é¥°å™¨</li>
</ul>
<h4 data-id="heading-12">2.2.2 Marks å¤„ç†ç­–ç•¥</h4>
<p>å¯¹äºè¡Œå†…æ ‡è®°ï¼ˆå¦‚åŠ ç²—ã€æ–œä½“ã€é“¾æ¥ï¼‰ï¼Œæˆ‘ä»¬éœ€è¦åœ¨æ–‡æœ¬å‰åæ·»åŠ è¯­æ³•ç¬¦å·ï¼š</p>
<p><strong>å®ç°æ€è·¯ï¼š</strong></p>
<ol>
<li><strong>éå†å…‰æ ‡ä½ç½®çš„ Marks</strong>ï¼šè·å–å½“å‰å…‰æ ‡æ‰€åœ¨ä½ç½®çš„æ‰€æœ‰æ ‡è®°</li>
<li><strong>è®¡ç®—æ ‡è®°èŒƒå›´</strong>ï¼šæ‰¾åˆ°æ¯ä¸ªæ ‡è®°çš„èµ·å§‹å’Œç»“æŸä½ç½®</li>
<li><strong>åˆ›å»ºè£…é¥°å™¨</strong>ï¼šåœ¨èµ·å§‹ä½ç½®å‰å’Œç»“æŸä½ç½®åæ’å…¥è¯­æ³•ç¬¦å·</li>
</ol>
<p><strong>ä»¥é“¾æ¥ä¸ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-ini" lang="ini">// å¤„ç†é“¾æ¥æ ‡è®°
if (<span class="hljs-attr">mark.type.name</span> === <span class="hljs-string">"link"</span>) {
  const <span class="hljs-attr">href</span> = mark.attrs.href || <span class="hljs-string">""</span><span class="hljs-comment">;</span>

  // åˆ›å»ºå‰ç¼€ <span class="hljs-section">[
  const prefixSpan = document.createElement("span");
  prefixSpan.className = "md-source";
  prefixSpan.textContent = "[";

  // åˆ›å»ºåç¼€ ]</span>(URL)
  const <span class="hljs-attr">suffixSpan</span> = document.createElement(<span class="hljs-string">"span"</span>)<span class="hljs-comment">;</span>
  <span class="hljs-attr">suffixSpan.className</span> = <span class="hljs-string">"md-source"</span><span class="hljs-comment">;</span>
  <span class="hljs-attr">suffixSpan.textContent</span> = <span class="hljs-string">"]("</span><span class="hljs-comment">;</span>

  // åˆ›å»ºå¯ç¼–è¾‘çš„ URL éƒ¨åˆ†
  const <span class="hljs-attr">urlSpan</span> = document.createElement(<span class="hljs-string">"span"</span>)<span class="hljs-comment">;</span>
  <span class="hljs-attr">urlSpan.className</span> = <span class="hljs-string">"md-source-url-editable"</span><span class="hljs-comment">;</span>
  <span class="hljs-attr">urlSpan.contentEditable</span> = <span class="hljs-string">"true"</span><span class="hljs-comment">;</span>
  <span class="hljs-attr">urlSpan.textContent</span> = href<span class="hljs-comment">;</span>

  // ç›‘å¬ç¼–è¾‘äº‹ä»¶
  urlSpan.addEventListener("blur", () =&gt; {
    const <span class="hljs-attr">newHref</span> = urlSpan.textContent || <span class="hljs-string">""</span><span class="hljs-comment">;</span>
    if (newHref !== href) {
      // æ›´æ–°æ–‡æ¡£ä¸­çš„é“¾æ¥
      view.dispatch(
        view.state.tr
          .removeMark(start, end, mark.type)
          .addMark(start, end, mark.type.create({ href: newHref }))
      )<span class="hljs-comment">;</span>
    }
  })<span class="hljs-comment">;</span>

  suffixSpan.appendChild(urlSpan)<span class="hljs-comment">;</span>

  const <span class="hljs-attr">closingSpan</span> = document.createElement(<span class="hljs-string">"span"</span>)<span class="hljs-comment">;</span>
  <span class="hljs-attr">closingSpan.className</span> = <span class="hljs-string">"md-source"</span><span class="hljs-comment">;</span>
  <span class="hljs-attr">closingSpan.textContent</span> = <span class="hljs-string">")"</span><span class="hljs-comment">;</span>
  suffixSpan.appendChild(closingSpan)<span class="hljs-comment">;</span>

  // æ·»åŠ è£…é¥°å™¨
  decorations.push(
    Decoration.widget(start, () =&gt; prefixSpan),
    Decoration.widget(end, () =&gt; suffixSpan)
  )<span class="hljs-comment">;</span>
}
</code></pre>
<p><strong>å…³é”®ç‚¹ï¼š</strong></p>
<ul>
<li>ä½¿ç”¨ <code>contentEditable="true"</code> å®ç°å³æ—¶ç¼–è¾‘</li>
<li>é€šè¿‡ <code>blur</code> äº‹ä»¶ç›‘å¬ç¼–è¾‘å®Œæˆ</li>
<li>ä½¿ç”¨ ProseMirror çš„ <code>transaction</code> æ›´æ–°æ–‡æ¡£</li>
</ul>
<h4 data-id="heading-13">2.2.3 Nodes å¤„ç†ç­–ç•¥</h4>
<p>å¯¹äºå—çº§å…ƒç´ ï¼ˆå¦‚æ ‡é¢˜ã€å›¾ç‰‡ï¼‰ï¼Œå¤„ç†æ–¹å¼ç•¥æœ‰ä¸åŒï¼š</p>
<p><strong>æ ‡é¢˜å¤„ç†ï¼š</strong></p>
<pre><code class="hljs language-ini" lang="ini">if (<span class="hljs-attr">node.type.name</span> === <span class="hljs-string">"heading"</span>) {
  const <span class="hljs-attr">level</span> = node.attrs.level || <span class="hljs-number">1</span><span class="hljs-comment">;</span>
  const <span class="hljs-attr">prefix</span> = <span class="hljs-string">"#"</span>.repeat(level) + <span class="hljs-string">" "</span><span class="hljs-comment">;</span>

  const <span class="hljs-attr">span</span> = document.createElement(<span class="hljs-string">"span"</span>)<span class="hljs-comment">;</span>
  <span class="hljs-attr">span.className</span> = <span class="hljs-string">"md-source"</span><span class="hljs-comment">;</span>
  <span class="hljs-attr">span.textContent</span> = prefix<span class="hljs-comment">;</span>

  decorations.push(
    Decoration.widget($from.start(), () =&gt; span)
  )<span class="hljs-comment">;</span>
}
</code></pre>
<p><strong>å›¾ç‰‡å¤„ç†ï¼š</strong></p>
<p>å›¾ç‰‡çš„å¤„ç†æ›´å¤æ‚ï¼Œå› ä¸ºéœ€è¦åŒæ—¶ç¼–è¾‘ alt æ–‡æœ¬å’Œ src è·¯å¾„ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">if (<span class="hljs-attr">node.type.name</span> === <span class="hljs-string">"image"</span>) {
  const { src, alt } = node.attrs<span class="hljs-comment">;</span>

  // åˆ›å»º !<span class="hljs-section">[
  const prefixSpan = document.createElement("span");
  prefixSpan.className = "md-source";
  prefixSpan.textContent = "![";

  // åˆ›å»ºå¯ç¼–è¾‘çš„ alt
  const altSpan = document.createElement("span");
  altSpan.className = "md-source-editable";
  altSpan.contentEditable = "true";
  altSpan.textContent = alt || "";

  // åˆ›å»º ]</span>(milkup:///RDpcb3BlbnNvdXJjZVxtaWxrdXBcbWlsa3Vw77ya5qGM6Z2i56uvIG1hcmtkb3duIEFJ57ut5YaZ5ZKM5Y2z5pe25riy5p+TLm1k/
%20%20const%20middleSpan%<span class="hljs-attr">20</span>=%<span class="hljs-number">20</span>document.createElement(<span class="hljs-string">"span"</span>)<span class="hljs-comment">;</span>
  <span class="hljs-attr">middleSpan.className</span> = <span class="hljs-string">"md-source"</span><span class="hljs-comment">;</span>
  <span class="hljs-attr">middleSpan.textContent</span> = <span class="hljs-string">"]("</span><span class="hljs-comment">;</span>

  // åˆ›å»ºå¯ç¼–è¾‘çš„ src
  const <span class="hljs-attr">srcSpan</span> = document.createElement(<span class="hljs-string">"span"</span>)<span class="hljs-comment">;</span>
  <span class="hljs-attr">srcSpan.className</span> = <span class="hljs-string">"md-source-url-editable"</span><span class="hljs-comment">;</span>
  <span class="hljs-attr">srcSpan.contentEditable</span> = <span class="hljs-string">"true"</span><span class="hljs-comment">;</span>
  <span class="hljs-attr">srcSpan.textContent</span> = src || <span class="hljs-string">""</span><span class="hljs-comment">;</span>

  // åˆ›å»º )
  const <span class="hljs-attr">suffixSpan</span> = document.createElement(<span class="hljs-string">"span"</span>)<span class="hljs-comment">;</span>
  <span class="hljs-attr">suffixSpan.className</span> = <span class="hljs-string">"md-source"</span><span class="hljs-comment">;</span>
  <span class="hljs-attr">suffixSpan.textContent</span> = <span class="hljs-string">")"</span><span class="hljs-comment">;</span>

  // ç»„åˆæ‰€æœ‰å…ƒç´ 
  const <span class="hljs-attr">container</span> = document.createElement(<span class="hljs-string">"div"</span>)<span class="hljs-comment">;</span>
  container.append(prefixSpan, altSpan, middleSpan, srcSpan, suffixSpan)<span class="hljs-comment">;</span>

  decorations.push(
    Decoration.widget(pos, () =&gt; container)
  )<span class="hljs-comment">;</span>
}
</code></pre>
<h4 data-id="heading-14">2.2.4 æ ·å¼è®¾è®¡</h4>
<p>ä¸ºäº†è®©æºç æ˜¾ç¤ºæ—¢æ¸…æ™°åˆä¸çªå…€ï¼Œæˆ‘ä»¬è®¾è®¡äº†ä¸“é—¨çš„æ ·å¼ï¼š</p>
<pre><code class="hljs language-css" lang="css">// æºç åŸºç¡€æ ·å¼
<span class="hljs-selector-class">.md-source</span> {
  <span class="hljs-attribute">color</span>: <span class="hljs-built_in">var</span>(--text-color-<span class="hljs-number">4</span>);           // ä½¿ç”¨è¾ƒæµ…çš„é¢œè‰²
  <span class="hljs-attribute">font-family</span>: <span class="hljs-built_in">var</span>(--milkup-font-code); // ç­‰å®½å­—ä½“
  <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0.6</span>;                         // åŠé€æ˜
  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">var</span>(--background-color-<span class="hljs-number">2</span>); // æµ…è‰²èƒŒæ™¯
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span> <span class="hljs-number">2px</span>;
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">2px</span>;
  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">0.9em</span>;
}

// å¯ç¼–è¾‘çš„ URL æ ·å¼
<span class="hljs-selector-class">.md-source-url-editable</span> {
  <span class="hljs-attribute">display</span>: inline-block;
  <span class="hljs-attribute">outline</span>: none;
  <span class="hljs-attribute">cursor</span>: text;
  <span class="hljs-attribute">border-bottom</span>: <span class="hljs-number">1px</span> dashed <span class="hljs-built_in">var</span>(--border-color); // è™šçº¿ä¸‹åˆ’çº¿æç¤ºå¯ç¼–è¾‘
  <span class="hljs-attribute">min-width</span>: <span class="hljs-number">50px</span>;

  &amp;<span class="hljs-selector-pseudo">:hover</span> {
    <span class="hljs-attribute">background</span>: <span class="hljs-built_in">var</span>(--background-color-<span class="hljs-number">3</span>);
  }

  &amp;<span class="hljs-selector-pseudo">:focus</span> {
    <span class="hljs-attribute">border-bottom-style</span>: solid;
    <span class="hljs-attribute">background</span>: <span class="hljs-built_in">var</span>(--background-color-<span class="hljs-number">3</span>);
  }
}
</code></pre>
<p><strong>è®¾è®¡åŸåˆ™ï¼š</strong></p>
<ul>
<li><strong>ä½å¯¹æ¯”åº¦</strong>ï¼šä½¿ç”¨åŠé€æ˜å’Œæµ…è‰²ï¼Œä¸å¹²æ‰°é˜…è¯»</li>
<li><strong>ç­‰å®½å­—ä½“</strong>ï¼šä¿æŒä»£ç æ„Ÿï¼Œä¸æ­£æ–‡åŒºåˆ†</li>
<li><strong>äº¤äº’æç¤º</strong>ï¼šå¯ç¼–è¾‘å…ƒç´ æœ‰æ˜ç¡®çš„è§†è§‰åé¦ˆ</li>
</ul>
<h3 data-id="heading-15">2.3 æŠ€æœ¯æŒ‘æˆ˜ä¸è§£å†³æ–¹æ¡ˆ</h3>
<h4 data-id="heading-16">2.3.1 å…‰æ ‡è·³å‡ºé—®é¢˜</h4>
<p><strong>é—®é¢˜</strong>ï¼šå½“ç”¨æˆ·åœ¨å¯ç¼–è¾‘çš„ URL ä¸­æŒ‰æ–¹å‘é”®æ—¶ï¼Œå…‰æ ‡å¯èƒ½è¢«å›°åœ¨ <code>contentEditable</code> å…ƒç´ ä¸­ï¼Œæ— æ³•è·³å‡ºã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼šç›‘å¬é”®ç›˜äº‹ä»¶ï¼Œæ‰‹åŠ¨æ§åˆ¶å…‰æ ‡ç§»åŠ¨ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">urlSpan.addEventListener("keydown", (e) =&gt; {
  if (<span class="hljs-attr">e.key</span> === <span class="hljs-string">"ArrowLeft"</span> &amp;&amp; urlSpan.selectionStart === <span class="hljs-number">0</span>) {
    // å…‰æ ‡åœ¨æœ€å·¦ä¾§ï¼ŒæŒ‰å·¦é”®è·³å‡º
    e.preventDefault()<span class="hljs-comment">;</span>
    const <span class="hljs-attr">pos</span> = view.posAtDOM(urlSpan, <span class="hljs-number">0</span>)<span class="hljs-comment">;</span>
    view.dispatch(view.state.tr.setSelection(TextSelection.create(view.state.doc, pos)))<span class="hljs-comment">;</span>
    view.focus()<span class="hljs-comment">;</span>
  } else if (<span class="hljs-attr">e.key</span> === <span class="hljs-string">"ArrowRight"</span> &amp;&amp; urlSpan.selectionEnd === urlSpan.textContent.length) {
    // å…‰æ ‡åœ¨æœ€å³ä¾§ï¼ŒæŒ‰å³é”®è·³å‡º
    e.preventDefault()<span class="hljs-comment">;</span>
    const <span class="hljs-attr">pos</span> = view.posAtDOM(urlSpan, urlSpan.textContent.length)<span class="hljs-comment">;</span>
    view.dispatch(view.state.tr.setSelection(TextSelection.create(view.state.doc, pos + 1)))<span class="hljs-comment">;</span>
    view.focus()<span class="hljs-comment">;</span>
  } else if (<span class="hljs-attr">e.key</span> === <span class="hljs-string">"Enter"</span>) {
    // æŒ‰ Enter æäº¤å¹¶è·³å‡º
    e.preventDefault()<span class="hljs-comment">;</span>
    urlSpan.blur()<span class="hljs-comment">;</span>
  }
})<span class="hljs-comment">;</span>
</code></pre>
<h4 data-id="heading-17">2.3.2 è£…é¥°å™¨æ€§èƒ½ä¼˜åŒ–</h4>
<p><strong>é—®é¢˜</strong>ï¼šæ¯æ¬¡å…‰æ ‡ç§»åŠ¨éƒ½é‡æ–°è®¡ç®—æ‰€æœ‰è£…é¥°å™¨ï¼Œå¯èƒ½å¯¼è‡´æ€§èƒ½é—®é¢˜ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<ol>
<li><strong>å¢é‡æ›´æ–°</strong>ï¼šåªåœ¨å…‰æ ‡ä½ç½®å˜åŒ–æ—¶æ›´æ–°è£…é¥°å™¨</li>
<li><strong>ç¼“å­˜æœºåˆ¶</strong>ï¼šç¼“å­˜ä¸Šä¸€æ¬¡çš„è£…é¥°å™¨é›†åˆï¼Œé¿å…é‡å¤è®¡ç®—</li>
<li><strong>èŒƒå›´é™åˆ¶</strong>ï¼šåªå¤„ç†å…‰æ ‡é™„è¿‘çš„å…ƒç´ ï¼Œä¸éå†æ•´ä¸ªæ–‡æ¡£</li>
</ol>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title function_">apply</span>(<span class="hljs-params">tr, oldState</span>) {
  <span class="hljs-comment">// å¦‚æœå…‰æ ‡ä½ç½®æ²¡å˜ï¼Œç›´æ¥è¿”å›æ—§çŠ¶æ€</span>
  <span class="hljs-keyword">if</span> (!tr.<span class="hljs-property">docChanged</span> &amp;&amp; !tr.<span class="hljs-property">selectionSet</span>) {
    <span class="hljs-keyword">return</span> oldState;
  }

  <span class="hljs-comment">// åªå¤„ç†å…‰æ ‡é™„è¿‘ 1000 å­—ç¬¦èŒƒå›´å†…çš„å…ƒç´ </span>
  <span class="hljs-keyword">const</span> { <span class="hljs-keyword">from</span>, to } = tr.<span class="hljs-property">selection</span>;
  <span class="hljs-keyword">const</span> rangeStart = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(<span class="hljs-number">0</span>, <span class="hljs-keyword">from</span> - <span class="hljs-number">500</span>);
  <span class="hljs-keyword">const</span> rangeEnd = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(tr.<span class="hljs-property">doc</span>.<span class="hljs-property">content</span>.<span class="hljs-property">size</span>, to + <span class="hljs-number">500</span>);

  <span class="hljs-comment">// åªåœ¨è¿™ä¸ªèŒƒå›´å†…æŸ¥æ‰¾éœ€è¦è£…é¥°çš„å…ƒç´ </span>
  <span class="hljs-comment">// ...</span>
}
</code></pre>
<h4 data-id="heading-18">2.3.3 ä¸å…¶ä»–æ’ä»¶çš„å…¼å®¹æ€§</h4>
<p><strong>é—®é¢˜</strong>ï¼šè£…é¥°å™¨å¯èƒ½ä¸å…¶ä»–æ’ä»¶ï¼ˆå¦‚æ‹¼å†™æ£€æŸ¥ã€è¯­æ³•é«˜äº®ï¼‰å†²çªã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<ol>
<li><strong>è£…é¥°å™¨ä¼˜å…ˆçº§</strong>ï¼šä½¿ç”¨ ProseMirror çš„ <code>spec.key</code> è®¾ç½®ä¼˜å…ˆçº§</li>
<li><strong>é¿å…é‡å </strong>ï¼šæ£€æµ‹è£…é¥°å™¨æ˜¯å¦é‡å ï¼Œé¿å…è¦†ç›–</li>
<li><strong>äº‹ä»¶éš”ç¦»</strong>ï¼šä½¿ç”¨ <code>stopPropagation</code> é˜²æ­¢äº‹ä»¶å†’æ³¡</li>
</ol>
<hr/>
<h2 data-id="heading-19">ä¸‰ã€feat-aiï¼šAI ç»­å†™åŠŸèƒ½è¯¦è§£</h2>
<h3 data-id="heading-20">3.1 åŠŸèƒ½ç‰¹æ€§</h3>
<p>feat-ai åˆ†æ”¯ä¸º milkup å¸¦æ¥äº†æ™ºèƒ½ç»­å†™èƒ½åŠ›ï¼Œè®© AI æˆä¸ºä½ çš„å†™ä½œåŠ©æ‰‹ã€‚</p>
<h4 data-id="heading-21">3.1.1 å¤š AI æä¾›å•†æ”¯æŒ</h4>
<p>æ”¯æŒä¸»æµçš„ AI æœåŠ¡æä¾›å•†ï¼š</p>
<ul>
<li><strong>OpenAI</strong>ï¼šGPT-3.5-turboã€GPT-4ã€GPT-4-turbo</li>
<li><strong>Anthropic</strong>ï¼šClaude 3 Haikuã€Claude 3 Sonnetã€Claude 3 Opus</li>
<li><strong>Google</strong>ï¼šGemini Proã€Gemini Pro Vision</li>
<li><strong>Ollama</strong>ï¼šæ”¯æŒæœ¬åœ°è¿è¡Œçš„å¼€æºæ¨¡å‹ï¼ˆLlama 2ã€Mistralã€Qwen ç­‰ï¼‰</li>
<li><strong>è‡ªå®šä¹‰ API</strong>ï¼šå…¼å®¹ OpenAI API æ ¼å¼çš„ä»»ä½•æœåŠ¡</li>
</ul>
<p><strong>é…ç½®ç•Œé¢ï¼š</strong></p>
<p>ç”¨æˆ·å¯ä»¥åœ¨è®¾ç½®ä¸­è½»æ¾é…ç½® AI æœåŠ¡ï¼š</p>
<ul>
<li>é€‰æ‹©æä¾›å•†</li>
<li>è¾“å…¥ API Key</li>
<li>è®¾ç½® Base URLï¼ˆç”¨äºä»£ç†æˆ–è‡ªå®šä¹‰æœåŠ¡ï¼‰</li>
<li>é€‰æ‹©æ¨¡å‹</li>
<li>è°ƒæ•´æ¸©åº¦å‚æ•°ï¼ˆæ§åˆ¶åˆ›é€ æ€§ï¼‰</li>
<li>è®¾ç½®é˜²æŠ–å»¶è¿Ÿï¼ˆæ§åˆ¶è§¦å‘é¢‘ç‡ï¼‰</li>
</ul>
<h4 data-id="heading-22">3.1.2 ç»“æ„åŒ–ä¸Šä¸‹æ–‡ç†è§£</h4>
<p>AI ç»­å†™ä¸æ˜¯ç®€å•åœ°ç»­æ¥æ–‡æœ¬ï¼Œè€Œæ˜¯ç†è§£æ–‡æ¡£çš„ç»“æ„ï¼š</p>
<p><strong>æå–çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼š</strong></p>
<ol>
<li><strong>æ–‡ä»¶å</strong>ï¼šäº†è§£æ–‡æ¡£ä¸»é¢˜</li>
<li><strong>æ ‡é¢˜å±‚çº§</strong>ï¼šç†è§£æ–‡æ¡£ç»“æ„å’Œå½“å‰ç« èŠ‚</li>
<li><strong>å‰æ–‡å†…å®¹</strong>ï¼šåˆ†æå†™ä½œé£æ ¼å’Œä¸Šä¸‹æ–‡</li>
<li><strong>å…‰æ ‡ä½ç½®</strong>ï¼šç¡®å®šç»­å†™çš„èµ·ç‚¹</li>
</ol>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<p>å‡è®¾ä½ æ­£åœ¨å†™ä¸€ç¯‡æŠ€æœ¯åšå®¢ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># Vue 3 ç»„åˆå¼ API æœ€ä½³å®è·µ</span>

<span class="hljs-section">## ä¸€ã€ä¸ºä»€ä¹ˆé€‰æ‹©ç»„åˆå¼ API</span>

ç»„åˆå¼ API æ˜¯ Vue 3 å¼•å…¥çš„æ–°ç‰¹æ€§ï¼Œå®ƒæä¾›äº†æ›´çµæ´»çš„ä»£ç ç»„ç»‡æ–¹å¼ã€‚

<span class="hljs-section">## äºŒã€æ ¸å¿ƒæ¦‚å¿µ</span>

<span class="hljs-section">### 2.1 å“åº”å¼ç³»ç»Ÿ</span>

Vue 3 çš„å“åº”å¼ç³»ç»ŸåŸºäº Proxyï¼Œç›¸æ¯” Vue 2 çš„ Object.defineProperty æœ‰ä»¥ä¸‹ä¼˜åŠ¿ï¼š
<span class="hljs-bullet">-</span> å¯ä»¥æ£€æµ‹å±æ€§çš„æ·»åŠ å’Œåˆ é™¤
<span class="hljs-bullet">-</span> å¯ä»¥æ£€æµ‹æ•°ç»„ç´¢å¼•å’Œé•¿åº¦çš„å˜åŒ–
<span class="hljs-bullet">-</span> [å…‰æ ‡åœ¨è¿™é‡Œ]
</code></pre>
<p>AI ä¼šç†è§£ï¼š</p>
<ul>
<li>è¿™æ˜¯ä¸€ç¯‡å…³äº Vue 3 çš„æŠ€æœ¯æ–‡ç« </li>
<li>å½“å‰åœ¨è®¨è®ºå“åº”å¼ç³»ç»Ÿçš„ä¼˜åŠ¿</li>
<li>å‰é¢å·²ç»åˆ—ä¸¾äº†ä¸¤ä¸ªä¼˜åŠ¿</li>
<li>åº”è¯¥ç»§ç»­åˆ—ä¸¾æ›´å¤šä¼˜åŠ¿æˆ–å±•å¼€è¯´æ˜</li>
</ul>
<h4 data-id="heading-23">3.1.3 æ™ºèƒ½è§¦å‘æœºåˆ¶</h4>
<p><strong>é˜²æŠ–ç­–ç•¥ï¼š</strong></p>
<ul>
<li>ç”¨æˆ·åœæ­¢è¾“å…¥åç­‰å¾… 1-3 ç§’ï¼ˆå¯é…ç½®ï¼‰</li>
<li>é¿å…é¢‘ç¹è°ƒç”¨ APIï¼ŒèŠ‚çœæˆæœ¬</li>
<li>ä¸æ‰“æ–­ç”¨æˆ·çš„å†™ä½œæµç¨‹</li>
</ul>
<p><strong>è§¦å‘æ¡ä»¶ï¼š</strong></p>
<ul>
<li>å…‰æ ‡åœ¨æ®µè½æœ«å°¾</li>
<li>å‰é¢æœ‰è¶³å¤Ÿçš„ä¸Šä¸‹æ–‡ï¼ˆè‡³å°‘ 50 ä¸ªå­—ç¬¦ï¼‰</li>
<li>ä¸åœ¨ä»£ç å—ã€è¡¨æ ¼ç­‰ç‰¹æ®ŠåŒºåŸŸå†…</li>
</ul>
<p><strong>å–æ¶ˆæœºåˆ¶ï¼š</strong></p>
<ul>
<li>ç”¨æˆ·ç»§ç»­è¾“å…¥æ—¶ï¼Œè‡ªåŠ¨å–æ¶ˆå½“å‰è¯·æ±‚</li>
<li>æ–‡æ¡£å†…å®¹å˜åŒ–æ—¶ï¼Œæ¸…é™¤å·²æ˜¾ç¤ºçš„å»ºè®®</li>
</ul>
<h4 data-id="heading-24">3.1.4 ä¼˜é›…çš„ UI é›†æˆ</h4>
<p><strong>æ˜¾ç¤ºæ–¹å¼ï¼š</strong></p>
<ul>
<li>ç»­å†™å»ºè®®ä»¥åŠé€æ˜æ–‡æœ¬æ˜¾ç¤ºåœ¨å…‰æ ‡å</li>
<li>ä½¿ç”¨ä¸åŒçš„é¢œè‰²å’Œå­—ä½“æ ·å¼ï¼Œä¸æ­£æ–‡åŒºåˆ†</li>
<li>ä¸å ç”¨å®é™…çš„æ–‡æ¡£ç©ºé—´</li>
</ul>
<p><strong>äº¤äº’æ–¹å¼ï¼š</strong></p>
<ul>
<li>æŒ‰ <code>Tab</code> é”®æ¥å—å»ºè®®</li>
<li>æŒ‰ <code>Esc</code> é”®æ‹’ç»å»ºè®®</li>
<li>ç»§ç»­è¾“å…¥è‡ªåŠ¨æ¸…é™¤å»ºè®®</li>
</ul>
<p><strong>è§†è§‰è®¾è®¡ï¼š</strong></p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.ai-completion-suggestion</span> {
  <span class="hljs-attribute">color</span>: <span class="hljs-built_in">var</span>(--text-color-<span class="hljs-number">3</span>);
  <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0.5</span>;
  <span class="hljs-attribute">font-style</span>: italic;
  <span class="hljs-attribute">pointer-events</span>: none; // ä¸å½±å“é¼ æ ‡äº¤äº’
  user-select: none;    // ä¸å¯é€‰ä¸­
}
</code></pre>
<h3 data-id="heading-25">3.2 å®ç°åŸç†</h3>
<h4 data-id="heading-26">3.2.1 æ’ä»¶æ¶æ„</h4>
<p>AI ç»­å†™åŠŸèƒ½é€šè¿‡ ProseMirror æ’ä»¶å®ç°ï¼Œæ ¸å¿ƒæ–‡ä»¶ä½äº <code>src/renderer/components/editor/plugins/completionPlugin.ts</code>ã€‚</p>
<p><strong>æ’ä»¶çŠ¶æ€ç®¡ç†ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> completionPlugin = $prose(<span class="hljs-function">(<span class="hljs-params">ctx</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> completionKey = <span class="hljs-keyword">new</span> <span class="hljs-title class_">PluginKey</span>(<span class="hljs-string">"completion"</span>);

  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Plugin</span>({
    <span class="hljs-attr">key</span>: completionKey,
    <span class="hljs-attr">state</span>: {
      <span class="hljs-title function_">init</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">return</span> {
          <span class="hljs-attr">decoration</span>: <span class="hljs-title class_">DecorationSet</span>.<span class="hljs-property">empty</span>,
          <span class="hljs-attr">suggestion</span>: <span class="hljs-literal">null</span>,
          <span class="hljs-attr">loading</span>: <span class="hljs-literal">false</span>
        };
      },
      <span class="hljs-title function_">apply</span>(<span class="hljs-params">tr, value</span>) {
        <span class="hljs-comment">// æ–‡æ¡£å†…å®¹å˜åŒ–æ—¶æ¸…é™¤å»ºè®®</span>
        <span class="hljs-keyword">if</span> (tr.<span class="hljs-property">docChanged</span>) {
          <span class="hljs-keyword">return</span> {
            <span class="hljs-attr">decoration</span>: <span class="hljs-title class_">DecorationSet</span>.<span class="hljs-property">empty</span>,
            <span class="hljs-attr">suggestion</span>: <span class="hljs-literal">null</span>,
            <span class="hljs-attr">loading</span>: <span class="hljs-literal">false</span>
          };
        }

        <span class="hljs-comment">// æ‰‹åŠ¨æ›´æ–°ï¼ˆå¦‚ AI è¿”å›ç»“æœï¼‰</span>
        <span class="hljs-keyword">const</span> meta = tr.<span class="hljs-title function_">getMeta</span>(completionKey);
        <span class="hljs-keyword">if</span> (meta) {
          <span class="hljs-keyword">return</span> meta;
        }

        <span class="hljs-keyword">return</span> value;
      }
    },
    <span class="hljs-attr">props</span>: {
      <span class="hljs-title function_">decorations</span>(<span class="hljs-params">state</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getState</span>(state)?.<span class="hljs-property">decoration</span>;
      },
      <span class="hljs-title function_">handleKeyDown</span>(<span class="hljs-params">view, event</span>) {
        <span class="hljs-comment">// å¤„ç† Tab é”®æ¥å—å»ºè®®</span>
        <span class="hljs-keyword">if</span> (event.<span class="hljs-property">key</span> === <span class="hljs-string">"Tab"</span>) {
          <span class="hljs-keyword">const</span> state = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getState</span>(view.<span class="hljs-property">state</span>);
          <span class="hljs-keyword">if</span> (state?.<span class="hljs-property">suggestion</span>) {
            event.<span class="hljs-title function_">preventDefault</span>();
            <span class="hljs-keyword">const</span> tr = view.<span class="hljs-property">state</span>.<span class="hljs-property">tr</span>.<span class="hljs-title function_">insertText</span>(
              state.<span class="hljs-property">suggestion</span>,
              view.<span class="hljs-property">state</span>.<span class="hljs-property">selection</span>.<span class="hljs-property">to</span>
            );
            tr.<span class="hljs-title function_">setMeta</span>(completionKey, {
              <span class="hljs-attr">decoration</span>: <span class="hljs-title class_">DecorationSet</span>.<span class="hljs-property">empty</span>,
              <span class="hljs-attr">suggestion</span>: <span class="hljs-literal">null</span>,
              <span class="hljs-attr">loading</span>: <span class="hljs-literal">false</span>
            });
            view.<span class="hljs-title function_">dispatch</span>(tr);
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
          }
        }
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
      }
    }
  });
});
</code></pre>
<p><strong>æ’ä»¶çŠ¶æ€åŒ…å«ä¸‰ä¸ªå­—æ®µï¼š</strong></p>
<ul>
<li><code>decoration</code>ï¼šç”¨äºæ˜¾ç¤ºå»ºè®®çš„è£…é¥°å™¨é›†åˆ</li>
<li><code>suggestion</code>ï¼šå½“å‰çš„å»ºè®®æ–‡æœ¬</li>
<li><code>loading</code>ï¼šæ˜¯å¦æ­£åœ¨è¯·æ±‚ AI</li>
</ul>
<h4 data-id="heading-27">3.2.2 å¤š AI æä¾›å•†é›†æˆ</h4>
<p>AI æœåŠ¡å±‚ä½äº <code>src/renderer/services/ai.ts</code>ï¼Œé€šè¿‡ç»Ÿä¸€çš„æ¥å£æ”¯æŒå¤šä¸ªæä¾›å•†ã€‚</p>
<p><strong>æœåŠ¡æ¥å£è®¾è®¡ï¼š</strong></p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AIService</span> {
  <span class="hljs-function"><span class="hljs-type">static</span> async <span class="hljs-title">complete</span><span class="hljs-params">(context: APIContext)</span>: Promise&lt;CompletionResponse&gt; {</span>
    <span class="hljs-type">const</span> config = <span class="hljs-built_in">useAIConfig</span>().config.value;

    <span class="hljs-keyword">if</span> (!config.enabled || !config.apiKey) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">"AI æœåŠ¡æœªé…ç½®"</span>);
    }

    <span class="hljs-comment">// æ ¹æ®æä¾›å•†æ„å»ºä¸åŒçš„è¯·æ±‚</span>
    <span class="hljs-type">const</span> { url, headers, body } = <span class="hljs-keyword">this</span>.<span class="hljs-built_in">buildRequest</span>(config, context);

    <span class="hljs-comment">// å‘é€è¯·æ±‚</span>
    <span class="hljs-type">const</span> response = await <span class="hljs-keyword">this</span>.<span class="hljs-built_in">request</span>(url, {
      method: <span class="hljs-string">"POST"</span>,
      headers,
      body: JSON.<span class="hljs-built_in">stringify</span>(body)
    });

    <span class="hljs-comment">// è§£æå“åº”</span>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.<span class="hljs-built_in">parseResponse</span>(response, config.provider);
  }
}
</code></pre>
<p><strong>å„æä¾›å•†çš„å®ç°å·®å¼‚ï¼š</strong></p>
<ol>
<li><strong>OpenAI / è‡ªå®šä¹‰ API</strong>ï¼šä½¿ç”¨ <code>response_format</code> å¼ºåˆ¶ JSON è¾“å‡º</li>
</ol>
<pre><code class="hljs language-css" lang="css">case "openai":
case <span class="hljs-string">"custom"</span>:
  return {
    url: `${config<span class="hljs-selector-class">.baseUrl</span>}/chat/completions`,
    headers: {
      "<span class="hljs-attribute">Content</span>-Type": <span class="hljs-string">"application/json"</span>,
      <span class="hljs-string">"Authorization"</span>: `Bearer ${config<span class="hljs-selector-class">.apiKey</span>}`
    },
    <span class="hljs-selector-tag">body</span>: {
      model: config.model,
      messages: [
        { role: <span class="hljs-string">"system"</span>, content: SYSTEM_PROMPT },
        { role: <span class="hljs-string">"user"</span>, content: userMessage }
      ],
      temperature: config.temperature,
      response_format: {
        type: <span class="hljs-string">"json_schema"</span>,
        json_schema: {
          name: <span class="hljs-string">"continuation"</span>,
          schema: {
            type: <span class="hljs-string">"object"</span>,
            properties: {
              continuation: { type: <span class="hljs-string">"string"</span> }
            },
            required: [<span class="hljs-string">"continuation"</span>]
          }
        }
      }
    }
  };
</code></pre>
<ol>
<li><strong>Anthropic (Claude)</strong> ï¼šä½¿ç”¨ Tool Use æœºåˆ¶</li>
</ol>
<pre><code class="hljs language-css" lang="css">case "anthropic":
  return {
    url: `${config<span class="hljs-selector-class">.baseUrl</span>}/v1/messages`,
    headers: {
      "<span class="hljs-attribute">Content</span>-Type": <span class="hljs-string">"application/json"</span>,
      <span class="hljs-string">"x-api-key"</span>: config.apiKey,
      <span class="hljs-string">"anthropic-version"</span>: <span class="hljs-string">"2023-06-01"</span>
    },
    <span class="hljs-selector-tag">body</span>: {
      model: config.model,
      system: SYSTEM_PROMPT,
      messages: [{ role: <span class="hljs-string">"user"</span>, content: userMessage }],
      tools: [{
        name: <span class="hljs-string">"print_continuation"</span>,
        description: <span class="hljs-string">"è¾“å‡ºç»­å†™å†…å®¹"</span>,
        input_schema: {
          type: <span class="hljs-string">"object"</span>,
          properties: {
            continuation: { type: <span class="hljs-string">"string"</span> }
          },
          required: [<span class="hljs-string">"continuation"</span>]
        }
      }],
      tool_choice: { type: <span class="hljs-string">"tool"</span>, name: <span class="hljs-string">"print_continuation"</span> }
    }
  };
</code></pre>
<ol>
<li><strong>Google Gemini</strong>ï¼šä½¿ç”¨ <code>responseMimeType</code> å’Œ <code>responseSchema</code></li>
</ol>
<pre><code class="hljs language-css" lang="css">case "gemini":
  return {
    url: `${config<span class="hljs-selector-class">.baseUrl</span>}/v1beta/models/${config<span class="hljs-selector-class">.model</span>}:generateContent?key=${config<span class="hljs-selector-class">.apiKey</span>}`,
    headers: {
      "<span class="hljs-attribute">Content</span>-Type": <span class="hljs-string">"application/json"</span>
    },
    <span class="hljs-selector-tag">body</span>: {
      contents: [{
        parts: [{ text: SYSTEM_PROMPT + <span class="hljs-string">"\n"</span> + userMessage }]
      }],
      generationConfig: {
        temperature: config.temperature,
        responseMimeType: <span class="hljs-string">"application/json"</span>,
        responseSchema: {
          type: <span class="hljs-string">"OBJECT"</span>,
          properties: {
            continuation: { type: <span class="hljs-string">"STRING"</span> }
          },
          required: [<span class="hljs-string">"continuation"</span>]
        }
      }
    }
  };
</code></pre>
<ol>
<li><strong>Ollama</strong>ï¼šä½¿ç”¨ <code>format</code> å‚æ•°æŒ‡å®š JSON Schema</li>
</ol>
<pre><code class="hljs language-css" lang="css">case "ollama":
  return {
    url: `${config<span class="hljs-selector-class">.baseUrl</span>}/api/chat`,
    headers: {
      "<span class="hljs-attribute">Content</span>-Type": <span class="hljs-string">"application/json"</span>
    },
    <span class="hljs-selector-tag">body</span>: {
      model: config.model,
      messages: [
        { role: <span class="hljs-string">"system"</span>, content: SYSTEM_PROMPT },
        { role: <span class="hljs-string">"user"</span>, content: userMessage }
      ],
      format: {
        type: <span class="hljs-string">"object"</span>,
        properties: {
          continuation: { type: <span class="hljs-string">"string"</span> }
        },
        required: [<span class="hljs-string">"continuation"</span>]
      },
      stream: false,
      options: {
        temperature: config.temperature
      }
    }
  };
</code></pre>
<p><strong>è®¾è®¡äº®ç‚¹ï¼š</strong></p>
<ul>
<li>ç»Ÿä¸€çš„æ¥å£ï¼Œéšè—æä¾›å•†å·®å¼‚</li>
<li>å……åˆ†åˆ©ç”¨å„æä¾›å•†çš„åŸç”Ÿèƒ½åŠ›ï¼ˆJSON Schemaã€Tool Useï¼‰</li>
<li>æ˜“äºæ‰©å±•ï¼Œæ·»åŠ æ–°æä¾›å•†åªéœ€å¢åŠ ä¸€ä¸ª case</li>
</ul>
<h4 data-id="heading-28">3.2.3 ä¸Šä¸‹æ–‡æå–ç­–ç•¥</h4>
<p>AI ç»­å†™çš„è´¨é‡å¾ˆå¤§ç¨‹åº¦ä¸Šå–å†³äºä¸Šä¸‹æ–‡çš„è´¨é‡ã€‚milkup å®ç°äº†æ™ºèƒ½çš„ä¸Šä¸‹æ–‡æå–ç­–ç•¥ã€‚</p>
<p><strong>æå–çš„ä¿¡æ¯ï¼š</strong></p>
<ol>
<li><strong>æ–‡ä»¶æ ‡é¢˜</strong>ï¼šä»æ–‡ä»¶è·¯å¾„ä¸­æå–</li>
</ol>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> fileTitle = (<span class="hljs-variable language_">window</span> <span class="hljs-keyword">as</span> <span class="hljs-built_in">any</span>).<span class="hljs-property">__currentFilePath</span>
  ? (<span class="hljs-variable language_">window</span> <span class="hljs-keyword">as</span> <span class="hljs-built_in">any</span>).<span class="hljs-property">__currentFilePath</span>.<span class="hljs-title function_">split</span>(<span class="hljs-regexp">/[\/]/</span>).<span class="hljs-title function_">pop</span>()
  : <span class="hljs-string">"æœªå‘½åæ–‡æ¡£"</span>;
</code></pre>
<ol>
<li><strong>å‰æ–‡å†…å®¹</strong>ï¼šè·å–å…‰æ ‡å‰æœ€è¿‘ 200 ä¸ªå­—ç¬¦</li>
</ol>
<pre><code class="hljs language-ini" lang="ini">const <span class="hljs-attr">start</span> = Math.max(<span class="hljs-number">0</span>, to - <span class="hljs-number">200</span>)<span class="hljs-comment">;</span>
const <span class="hljs-attr">previousContent</span> = doc.textBetween(start, to, <span class="hljs-string">"\n"</span>)<span class="hljs-comment">;</span>
</code></pre>
<ol>
<li><strong>æ ‡é¢˜å±‚çº§</strong>ï¼šéå†æ–‡æ¡£æå–æ‰€æœ‰æ ‡é¢˜</li>
</ol>
<pre><code class="hljs language-vbnet" lang="vbnet"><span class="hljs-keyword">const</span> headers: { level: number; <span class="hljs-keyword">text</span>: <span class="hljs-type">string</span> }[] = [];
doc.nodesBetween(<span class="hljs-number">0</span>, <span class="hljs-keyword">to</span>, (node, pos) =&gt; {
  <span class="hljs-keyword">if</span> (node.type.name === <span class="hljs-string">"heading"</span>) {
    <span class="hljs-keyword">if</span> (pos + node.nodeSize &lt;= <span class="hljs-keyword">to</span>) {
      headers.push({
        level: node.attrs.level,
        <span class="hljs-keyword">text</span>: node.textContent
      });
    }
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  }
  <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
});
</code></pre>
<ol>
<li><strong>å½“å‰ç« èŠ‚</strong>ï¼šç¡®å®šå½“å‰æ‰€åœ¨çš„ç« èŠ‚å’Œå­ç« èŠ‚</li>
</ol>
<pre><code class="hljs language-ini" lang="ini">let <span class="hljs-attr">sectionTitle</span> = <span class="hljs-string">"æœªçŸ¥"</span><span class="hljs-comment">;</span>
let <span class="hljs-attr">subSectionTitle</span> = <span class="hljs-string">"æœªçŸ¥"</span><span class="hljs-comment">;</span>

if (headers.length &gt; 0) {
  const <span class="hljs-attr">lastHeader</span> = headers[headers.length - <span class="hljs-number">1</span>]<span class="hljs-comment">;</span>
  <span class="hljs-attr">subSectionTitle</span> = lastHeader.text<span class="hljs-comment">;</span>

  // æŸ¥æ‰¾çˆ¶çº§æ ‡é¢˜
  const <span class="hljs-attr">parentHeader</span> = headers
    .slice(0, -1)
    .reverse()
    .find((h) =&gt; h.level &lt; lastHeader.level)<span class="hljs-comment">;</span>

  if (parentHeader) {
    <span class="hljs-attr">sectionTitle</span> = parentHeader.text<span class="hljs-comment">;</span>
  }
}
</code></pre>
<p><strong>æ„å»º Promptï¼š</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-title function_">buildPrompt</span>(<span class="hljs-attr">context</span>: <span class="hljs-title class_">APIContext</span>): <span class="hljs-built_in">string</span> {
  <span class="hljs-keyword">return</span> <span class="hljs-string">`ä¸Šä¸‹æ–‡ï¼š
æ–‡ç« æ ‡é¢˜ï¼š<span class="hljs-subst">${context.fileTitle || <span class="hljs-string">"æœªçŸ¥"</span>}</span>
å¤§æ ‡é¢˜ï¼š<span class="hljs-subst">${context.sectionTitle || <span class="hljs-string">"æœªçŸ¥"</span>}</span>
æœ¬å°èŠ‚æ ‡é¢˜ï¼š<span class="hljs-subst">${context.subSectionTitle || <span class="hljs-string">"æœªçŸ¥"</span>}</span>
å‰é¢å†…å®¹ï¼ˆè¯·ç´§å¯†è¡”æ¥ï¼‰ï¼š<span class="hljs-subst">${context.previousContent}</span>`</span>;
}
</code></pre>
<p><strong>System Promptï¼š</strong></p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-type">const</span> SYSTEM_PROMPT = `ä½ æ˜¯ä¸€ä¸ªæŠ€æœ¯æ–‡æ¡£ç»­å†™åŠ©æ‰‹ã€‚
ä¸¥æ ¼åªè¾“å‡ºä»¥ä¸‹ JSONï¼Œ**ä¸è¦æœ‰ä»»ä½•å‰ç¼€ã€åç¼€ã€markdownã€æ¢è¡Œã€è§£é‡Š**ï¼š

{<span class="hljs-string">"continuation"</span>: <span class="hljs-string">"æ¥ä¸‹æ¥åªå†™3â€“35ä¸ªæ±‰å­—çš„è‡ªç„¶è¡”æ¥å†…å®¹"</span>}
`;
</code></pre>
<p><strong>è®¾è®¡ç†å¿µï¼š</strong></p>
<ul>
<li><strong>ç»“æ„åŒ–ç†è§£</strong>ï¼šä¸ä»…æä¾›æ–‡æœ¬ï¼Œè¿˜æä¾›æ–‡æ¡£ç»“æ„</li>
<li><strong>ç²¾ç¡®å®šä½</strong>ï¼šæ˜ç¡®å½“å‰æ‰€åœ¨çš„ç« èŠ‚ä½ç½®</li>
<li><strong>é•¿åº¦æ§åˆ¶</strong>ï¼šé™åˆ¶ 3-35 ä¸ªæ±‰å­—ï¼Œé¿å…è¿‡åº¦ç”Ÿæˆ</li>
<li><strong>æ ¼å¼çº¦æŸ</strong>ï¼šå¼ºåˆ¶ JSON è¾“å‡ºï¼Œä¾¿äºè§£æ</li>
</ul>
<h4 data-id="heading-29">3.2.4 UI æ˜¾ç¤ºæœºåˆ¶</h4>
<p>å»ºè®®çš„æ˜¾ç¤ºä½¿ç”¨ ProseMirror çš„ Decoration ç³»ç»Ÿï¼Œåœ¨å…‰æ ‡ä½ç½®æ’å…¥åŠé€æ˜çš„å»ºè®®æ–‡æœ¬ã€‚</p>
<p><strong>åˆ›å»ºå»ºè®® Widgetï¼š</strong></p>
<pre><code class="hljs language-ini" lang="ini">// åˆ›å»ºå»ºè®®å…ƒç´ 
const <span class="hljs-attr">widget</span> = document.createElement(<span class="hljs-string">"span"</span>)<span class="hljs-comment">;</span>
<span class="hljs-attr">widget.textContent</span> = result.continuation<span class="hljs-comment">;</span>
<span class="hljs-attr">widget.className</span> = <span class="hljs-string">"ai-completion-suggestion"</span><span class="hljs-comment">;</span>
<span class="hljs-attr">widget.style.color</span> = <span class="hljs-string">"var(--text-color-light, #999)"</span><span class="hljs-comment">;</span>
<span class="hljs-attr">widget.style.opacity</span> = <span class="hljs-string">"0.6"</span><span class="hljs-comment">;</span>
<span class="hljs-attr">widget.style.fontStyle</span> = <span class="hljs-string">"italic"</span><span class="hljs-comment">;</span>
<span class="hljs-attr">widget.style.pointerEvents</span> = <span class="hljs-string">"none"</span><span class="hljs-comment">;  // ä¸å½±å“é¼ æ ‡äº¤äº’</span>
<span class="hljs-attr">widget.style.userSelect</span> = <span class="hljs-string">"none"</span><span class="hljs-comment">;     // ä¸å¯é€‰ä¸­</span>
<span class="hljs-attr">widget.dataset.suggestion</span> = result.continuation<span class="hljs-comment">;</span>

// åˆ›å»ºè£…é¥°å™¨
const <span class="hljs-attr">deco</span> = Decoration.widget(to, widget, { side: <span class="hljs-number">1</span> })<span class="hljs-comment">;</span>
const <span class="hljs-attr">decoSet</span> = DecorationSet.create(view.state.doc, [deco])<span class="hljs-comment">;</span>

// æ›´æ–°ç¼–è¾‘å™¨çŠ¶æ€
const <span class="hljs-attr">tr</span> = view.state.tr.setMeta(completionKey, {
  decoration: decoSet,
  suggestion: result.continuation,
  loading: false
})<span class="hljs-comment">;</span>
view.dispatch(tr)<span class="hljs-comment">;</span>
</code></pre>
<p><strong>æ ·å¼è®¾è®¡ï¼š</strong></p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.ai-completion-suggestion</span> {
  <span class="hljs-attribute">color</span>: <span class="hljs-built_in">var</span>(--text-color-<span class="hljs-number">3</span>);
  <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0.5</span>;
  <span class="hljs-attribute">font-style</span>: italic;
  <span class="hljs-attribute">pointer-events</span>: none;
  user-select: none;
  <span class="hljs-attribute">transition</span>: opacity <span class="hljs-number">0.2s</span> ease;

  &amp;<span class="hljs-selector-pseudo">:hover</span> {
    <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0.7</span>;
  }
}
</code></pre>
<p><strong>äº¤äº’è®¾è®¡ï¼š</strong></p>
<ol>
<li><strong>Tab é”®æ¥å—å»ºè®®</strong>ï¼š</li>
</ol>
<pre><code class="hljs language-ini" lang="ini">if (<span class="hljs-attr">event.key</span> === <span class="hljs-string">"Tab"</span>) {
  const <span class="hljs-attr">state</span> = this.getState(view.state)<span class="hljs-comment">;</span>
  if (state?.suggestion) {
    event.preventDefault()<span class="hljs-comment">;</span>

    // æ’å…¥å»ºè®®æ–‡æœ¬
    const <span class="hljs-attr">tr</span> = view.state.tr.insertText(
      state.suggestion,
      view.state.selection.to
    )<span class="hljs-comment">;</span>

    // æ¸…é™¤å»ºè®®
    tr.setMeta(completionKey, {
      decoration: DecorationSet.empty,
      suggestion: null,
      loading: false
    })<span class="hljs-comment">;</span>

    view.dispatch(tr)<span class="hljs-comment">;</span>
    return true<span class="hljs-comment">;</span>
  }
}
</code></pre>
<ol>
<li><strong>è‡ªåŠ¨æ¸…é™¤æœºåˆ¶</strong>ï¼š</li>
</ol>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title function_">apply</span>(<span class="hljs-params">tr, value</span>) {
  <span class="hljs-comment">// æ–‡æ¡£å†…å®¹å˜åŒ–æ—¶æ¸…é™¤å»ºè®®</span>
  <span class="hljs-keyword">if</span> (tr.<span class="hljs-property">docChanged</span>) {
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">decoration</span>: <span class="hljs-title class_">DecorationSet</span>.<span class="hljs-property">empty</span>,
      <span class="hljs-attr">suggestion</span>: <span class="hljs-literal">null</span>,
      <span class="hljs-attr">loading</span>: <span class="hljs-literal">false</span>
    };
  }

  <span class="hljs-keyword">return</span> value;
}
</code></pre>
<p><strong>ç”¨æˆ·ä½“éªŒç»†èŠ‚ï¼š</strong></p>
<ul>
<li><strong>åŠé€æ˜æ˜¾ç¤º</strong>ï¼šä¸å¹²æ‰°æ­£å¸¸é˜…è¯»</li>
<li><strong>æ–œä½“æ ·å¼</strong>ï¼šä¸æ­£æ–‡åŒºåˆ†</li>
<li><strong>ä¸å¯äº¤äº’</strong>ï¼šä¸å½±å“é¼ æ ‡ç‚¹å‡»å’Œæ–‡æœ¬é€‰æ‹©</li>
<li><strong>å³æ—¶æ¸…é™¤</strong>ï¼šç”¨æˆ·ç»§ç»­è¾“å…¥æ—¶è‡ªåŠ¨æ¶ˆå¤±</li>
<li><strong>å¿«æ·æ¥å—</strong>ï¼šTab é”®ä¸€é”®æ¥å—</li>
</ul>
<h3 data-id="heading-30">3.3 æŠ€æœ¯æŒ‘æˆ˜ä¸è§£å†³æ–¹æ¡ˆ</h3>
<h4 data-id="heading-31">3.3.1 ç»“æ„åŒ–è¾“å‡ºçš„æŒ‘æˆ˜</h4>
<p><strong>é—®é¢˜</strong>ï¼šä¸åŒçš„ AI æ¨¡å‹å¯¹è¾“å‡ºæ ¼å¼çš„æ§åˆ¶èƒ½åŠ›ä¸åŒï¼Œæœ‰äº›æ¨¡å‹å¯èƒ½è¾“å‡ºé¢å¤–çš„æ–‡æœ¬ã€markdown ä»£ç å—æˆ–è§£é‡Šæ€§å†…å®¹ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<ol>
<li>
<p><strong>åˆ©ç”¨å„æä¾›å•†çš„åŸç”Ÿèƒ½åŠ›</strong>ï¼š</p>
<ul>
<li>OpenAIï¼šä½¿ç”¨ <code>response_format</code> çš„ JSON Schema</li>
<li>Claudeï¼šä½¿ç”¨ Tool Use æœºåˆ¶</li>
<li>Geminiï¼šä½¿ç”¨ <code>responseMimeType</code> å’Œ <code>responseSchema</code></li>
<li>Ollamaï¼šä½¿ç”¨ <code>format</code> å‚æ•°</li>
</ul>
</li>
<li>
<p><strong>å¤šå±‚è§£æç­–ç•¥</strong>ï¼š</p>
</li>
</ol>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-title function_">parseResponse</span>(<span class="hljs-attr">text</span>: <span class="hljs-built_in">string</span>): <span class="hljs-title class_">CompletionResponse</span> {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// 1. å°è¯•ç›´æ¥ JSON è§£æ</span>
    <span class="hljs-keyword">const</span> cleanText = text.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/```json\n?|\n?```/g</span>, <span class="hljs-string">""</span>).<span class="hljs-title function_">trim</span>();
    <span class="hljs-keyword">const</span> json = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(cleanText);
    <span class="hljs-keyword">if</span> (json.<span class="hljs-property">continuation</span>) {
      <span class="hljs-keyword">return</span> { <span class="hljs-attr">continuation</span>: json.<span class="hljs-property">continuation</span> };
    }
  } <span class="hljs-keyword">catch</span> (e) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">"JSON parse failed, trying regex extraction"</span>);
  }

  <span class="hljs-comment">// 2. æ­£åˆ™æå–</span>
  <span class="hljs-keyword">const</span> match = text.<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/"continuation"\s*:\s*"([^"]+)"/</span>);
  <span class="hljs-keyword">if</span> (match &amp;&amp; match[<span class="hljs-number">1</span>]) {
    <span class="hljs-keyword">return</span> { <span class="hljs-attr">continuation</span>: match[<span class="hljs-number">1</span>] };
  }

  <span class="hljs-comment">// 3. å…œåº•ç­–ç•¥ï¼šå¦‚æœæ–‡æœ¬å¾ˆçŸ­ä¸”ä¸åŒ…å« JSON ç»“æ„ï¼Œç›´æ¥ä½¿ç”¨</span>
  <span class="hljs-keyword">if</span> (text.<span class="hljs-property">length</span> &lt; <span class="hljs-number">50</span> &amp;&amp; !text.<span class="hljs-title function_">includes</span>(<span class="hljs-string">"{"</span>)) {
    <span class="hljs-keyword">return</span> { <span class="hljs-attr">continuation</span>: text.<span class="hljs-title function_">trim</span>() };
  }

  <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">"Failed to parse AI response"</span>);
}
</code></pre>
<p><strong>é²æ£’æ€§ä¿è¯ï¼š</strong></p>
<ul>
<li>æ¸…ç† markdown ä»£ç å—æ ‡è®°</li>
<li>æ­£åˆ™è¡¨è¾¾å¼å…œåº•</li>
<li>çŸ­æ–‡æœ¬ç›´æ¥ä½¿ç”¨</li>
<li>å¤šå±‚å®¹é”™æœºåˆ¶</li>
</ul>
<h4 data-id="heading-32">3.3.2 é˜²æŠ–ä¸å–æ¶ˆæœºåˆ¶</h4>
<p><strong>é—®é¢˜</strong>ï¼šç”¨æˆ·è¾“å…¥æ—¶é¢‘ç¹è§¦å‘ AI è¯·æ±‚ï¼Œæµªè´¹èµ„æºä¸”å½±å“ä½“éªŒã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<ol>
<li><strong>é˜²æŠ–è§¦å‘</strong>ï¼š</li>
</ol>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">let</span> <span class="hljs-attr">debounceTimer</span>: <span class="hljs-title class_">NodeJS</span>.<span class="hljs-property">Timeout</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;

view.<span class="hljs-title function_">updateState</span>(view.<span class="hljs-property">state</span>);

<span class="hljs-comment">// æ¸…é™¤æ—§çš„å®šæ—¶å™¨</span>
<span class="hljs-keyword">if</span> (debounceTimer) {
  <span class="hljs-built_in">clearTimeout</span>(debounceTimer);
}

<span class="hljs-comment">// è®¾ç½®æ–°çš„å®šæ—¶å™¨</span>
debounceTimer = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-keyword">async</span> () =&gt; {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> <span class="hljs-title class_">AIService</span>.<span class="hljs-title function_">complete</span>(context);

    <span class="hljs-comment">// æ˜¾ç¤ºå»ºè®®</span>
    <span class="hljs-comment">// ...</span>
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"AI completion failed:"</span>, error);
  }
}, config.<span class="hljs-property">debounceWait</span> || <span class="hljs-number">1500</span>);
</code></pre>
<ol>
<li><strong>è¯·æ±‚å–æ¶ˆ</strong>ï¼š</li>
</ol>
<pre><code class="hljs language-ini" lang="ini">let currentAbortController: AbortController | <span class="hljs-attr">null</span> = null<span class="hljs-comment">;</span>

// å–æ¶ˆæ—§è¯·æ±‚
if (currentAbortController) {
  currentAbortController.abort()<span class="hljs-comment">;</span>
}

// åˆ›å»ºæ–°çš„ AbortController
<span class="hljs-attr">currentAbortController</span> = new AbortController()<span class="hljs-comment">;</span>

const <span class="hljs-attr">response</span> = await fetch(url, {
  signal: currentAbortController.signal,
  // ...
})<span class="hljs-comment">;</span>
</code></pre>
<p><strong>ä¼˜åŒ–æ•ˆæœï¼š</strong></p>
<ul>
<li>å‡å°‘ä¸å¿…è¦çš„ API è°ƒç”¨</li>
<li>èŠ‚çœæˆæœ¬</li>
<li>æå‡å“åº”é€Ÿåº¦</li>
<li>é¿å…è¿‡æ—¶çš„å»ºè®®</li>
</ul>
<h4 data-id="heading-33">3.3.3 é…ç½®ç®¡ç†ä¸æŒä¹…åŒ–</h4>
<p><strong>é—®é¢˜</strong>ï¼šç”¨æˆ·é…ç½®éœ€è¦åœ¨åº”ç”¨é‡å¯åä¿æŒï¼Œä¸”éœ€è¦å“åº”å¼æ›´æ–°ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼šä½¿ç”¨ VueUse çš„ <code>useStorage</code></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { useStorage } <span class="hljs-keyword">from</span> <span class="hljs-string">"@vueuse/core"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">useAIConfig</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> config = useStorage&lt;<span class="hljs-title class_">AIConfig</span>&gt;(
    <span class="hljs-string">"milkup-ai-config"</span>,
    defaultAIConfig,
    <span class="hljs-variable language_">localStorage</span>,
    { <span class="hljs-attr">mergeDefaults</span>: <span class="hljs-literal">true</span> }
  );

  <span class="hljs-keyword">return</span> { config };
}
</code></pre>
<p><strong>ä¼˜åŠ¿ï¼š</strong></p>
<ul>
<li>è‡ªåŠ¨åŒæ­¥åˆ° localStorage</li>
<li>å“åº”å¼æ›´æ–°ï¼Œé…ç½®å˜åŒ–ç«‹å³ç”Ÿæ•ˆ</li>
<li>æ”¯æŒé»˜è®¤å€¼åˆå¹¶</li>
<li>ç±»å‹å®‰å…¨</li>
</ul>
<h4 data-id="heading-34">3.3.4 Ollama æ¨¡å‹åˆ—è¡¨åŠ¨æ€è·å–</h4>
<p><strong>é—®é¢˜</strong>ï¼šOllama æ”¯æŒå¤šç§æœ¬åœ°æ¨¡å‹ï¼Œéœ€è¦åŠ¨æ€è·å–å¯ç”¨æ¨¡å‹åˆ—è¡¨ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">fetchOllamaModels</span>(<span class="hljs-params"/>) {
  loadingModels.<span class="hljs-property">value</span> = <span class="hljs-literal">true</span>;
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> models = <span class="hljs-keyword">await</span> <span class="hljs-title class_">AIService</span>.<span class="hljs-title function_">getModels</span>(config.<span class="hljs-property">value</span>);
    ollamaModels.<span class="hljs-property">value</span> = models;
  } <span class="hljs-keyword">catch</span> (e) {
    toast.<span class="hljs-title function_">show</span>(<span class="hljs-string">"è·å–æ¨¡å‹åˆ—è¡¨å¤±è´¥"</span>, <span class="hljs-string">"error"</span>);
  } <span class="hljs-keyword">finally</span> {
    loadingModels.<span class="hljs-property">value</span> = <span class="hljs-literal">false</span>;
  }
}

<span class="hljs-comment">// AIService.getModels å®ç°</span>
<span class="hljs-keyword">static</span> <span class="hljs-keyword">async</span> <span class="hljs-title function_">getModels</span>(<span class="hljs-attr">config</span>: <span class="hljs-title class_">AIConfig</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">string</span>[]&gt; {
  <span class="hljs-keyword">if</span> (config.<span class="hljs-property">provider</span> === <span class="hljs-string">"ollama"</span>) {
    <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">request</span>(<span class="hljs-string">`<span class="hljs-subst">${config.baseUrl}</span>/api/tags`</span>, {
      <span class="hljs-attr">method</span>: <span class="hljs-string">"GET"</span>
    });
    <span class="hljs-keyword">return</span> res.<span class="hljs-property">models</span>?.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">m: <span class="hljs-built_in">any</span></span>) =&gt;</span> m.<span class="hljs-property">name</span>) || [];
  }
  <span class="hljs-keyword">return</span> [];
}
</code></pre>
<p><strong>ç”¨æˆ·ä½“éªŒï¼š</strong></p>
<ul>
<li>è‡ªåŠ¨æ£€æµ‹æœ¬åœ°å¯ç”¨æ¨¡å‹</li>
<li>ä¸‹æ‹‰é€‰æ‹©ï¼Œæ— éœ€æ‰‹åŠ¨è¾“å…¥</li>
<li>å®æ—¶åˆ·æ–°</li>
</ul>
<hr/>
<h2 data-id="heading-35">å››ã€å¯¹æ¯”åˆ†æ</h2>
<h3 data-id="heading-36">4.1 å³æ—¶æ¸²æŸ“æ¨¡å¼å¯¹æ¯”</h3>




































































<table><thead><tr><th>ç‰¹æ€§</th><th>milkup (feat-ir)</th><th>Typora</th><th>Notion</th><th>VS Code + Markdown Preview</th></tr></thead><tbody><tr><td><strong>å¼€æº</strong></td><td>âœ… æ˜¯</td><td>âŒ å¦</td><td>âŒ å¦</td><td>âœ… æ˜¯</td></tr><tr><td><strong>å³æ—¶æ¸²æŸ“</strong></td><td>âœ… æ˜¯</td><td>âœ… æ˜¯</td><td>âœ… æ˜¯</td><td>âŒ å¦ï¼ˆåˆ†æ é¢„è§ˆï¼‰</td></tr><tr><td><strong>æºç å¯è§</strong></td><td>âœ… å…‰æ ‡èšç„¦æ—¶æ˜¾ç¤º</td><td>âœ… å…‰æ ‡èšç„¦æ—¶æ˜¾ç¤º</td><td>âŒ å®Œå…¨éšè—</td><td>âœ… å§‹ç»ˆæ˜¾ç¤º</td></tr><tr><td><strong>æºç å¯ç¼–è¾‘</strong></td><td>âœ… é“¾æ¥ã€å›¾ç‰‡å¯ç›´æ¥ç¼–è¾‘</td><td>âš ï¸ éƒ¨åˆ†æ”¯æŒ</td><td>âŒ å¦</td><td>âœ… æ˜¯</td></tr><tr><td><strong>æŠ€æœ¯æ ˆ</strong></td><td>ProseMirror + Milkdown</td><td>è‡ªç ”</td><td>è‡ªç ”</td><td>CodeMirror</td></tr><tr><td><strong>æ‰©å±•æ€§</strong></td><td>âœ… æ’ä»¶åŒ–æ¶æ„</td><td>âŒ ä¸æ”¯æŒæ’ä»¶</td><td>âš ï¸ æœ‰é™çš„ API</td><td>âœ… VS Code æ’ä»¶ç”Ÿæ€</td></tr><tr><td><strong>æ€§èƒ½</strong></td><td>âœ… ä¼˜ç§€</td><td>âœ… ä¼˜ç§€</td><td>âš ï¸ å¤§æ–‡æ¡£è¾ƒæ…¢</td><td>âœ… ä¼˜ç§€</td></tr><tr><td><strong>è·¨å¹³å°</strong></td><td>âœ… Windows/Mac/Linux</td><td>âœ… Windows/Mac/Linux</td><td>âœ… Web/æ¡Œé¢/ç§»åŠ¨</td><td>âœ… Windows/Mac/Linux</td></tr></tbody></table>
<p><strong>milkup çš„ä¼˜åŠ¿ï¼š</strong></p>
<ul>
<li><strong>å¼€æºå…è´¹</strong>ï¼šå®Œå…¨å¼€æºï¼Œå¯è‡ªç”±å®šåˆ¶</li>
<li><strong>ç°ä»£åŒ–æŠ€æœ¯æ ˆ</strong>ï¼šåŸºäº Vue 3 + TypeScript + ProseMirror</li>
<li><strong>å¯æ‰©å±•æ€§å¼º</strong>ï¼šæ’ä»¶åŒ–æ¶æ„ï¼Œæ˜“äºæ·»åŠ æ–°åŠŸèƒ½</li>
<li><strong>æºç ç¼–è¾‘èƒ½åŠ›</strong>ï¼šé“¾æ¥å’Œå›¾ç‰‡å¯ç›´æ¥ç¼–è¾‘ï¼Œæ— éœ€åˆ‡æ¢æ¨¡å¼</li>
</ul>
<p><strong>Typora çš„ä¼˜åŠ¿ï¼š</strong></p>
<ul>
<li><strong>æˆç†Ÿç¨³å®š</strong>ï¼šç»è¿‡å¤šå¹´æ‰“ç£¨ï¼ŒåŠŸèƒ½å®Œå–„</li>
<li><strong>ç”¨æˆ·ä½“éªŒ</strong>ï¼šç»†èŠ‚æ‰“ç£¨åˆ°ä½ï¼Œäº¤äº’æµç•…</li>
</ul>
<p><strong>Notion çš„ä¼˜åŠ¿ï¼š</strong></p>
<ul>
<li><strong>åä½œèƒ½åŠ›</strong>ï¼šå¤šäººå®æ—¶åä½œ</li>
<li><strong>æ•°æ®åº“åŠŸèƒ½</strong>ï¼šä¸ä»…æ˜¯ç¼–è¾‘å™¨ï¼Œè¿˜æ˜¯çŸ¥è¯†ç®¡ç†å·¥å…·</li>
</ul>
<h3 data-id="heading-37">4.2 AI ç»­å†™åŠŸèƒ½å¯¹æ¯”</h3>




































































<table><thead><tr><th>ç‰¹æ€§</th><th>milkup (feat-ai)</th><th>Cursor</th><th>Notion AI</th><th>GitHub Copilot</th></tr></thead><tbody><tr><td><strong>æ”¯æŒåœºæ™¯</strong></td><td>Markdown æ–‡æ¡£</td><td>ä»£ç ç¼–è¾‘</td><td>æ–‡æ¡£ç¼–è¾‘</td><td>ä»£ç ç¼–è¾‘</td></tr><tr><td><strong>å¤šæä¾›å•†</strong></td><td>âœ… OpenAI/Claude/Gemini/Ollama</td><td>âŒ ä»… OpenAI</td><td>âŒ è‡ªæœ‰æ¨¡å‹</td><td>âŒ ä»… GitHub æ¨¡å‹</td></tr><tr><td><strong>æœ¬åœ°æ¨¡å‹</strong></td><td>âœ… æ”¯æŒ Ollama</td><td>âŒ å¦</td><td>âŒ å¦</td><td>âŒ å¦</td></tr><tr><td><strong>ç»“æ„åŒ–ç†è§£</strong></td><td>âœ… ç†è§£æ ‡é¢˜å±‚çº§</td><td>âœ… ç†è§£ä»£ç ç»“æ„</td><td>âš ï¸ æœ‰é™</td><td>âœ… ç†è§£ä»£ç ä¸Šä¸‹æ–‡</td></tr><tr><td><strong>è§¦å‘æ–¹å¼</strong></td><td>è‡ªåŠ¨é˜²æŠ–è§¦å‘</td><td>è‡ªåŠ¨è§¦å‘</td><td>æ‰‹åŠ¨è§¦å‘</td><td>è‡ªåŠ¨è§¦å‘</td></tr><tr><td><strong>æ¥å—æ–¹å¼</strong></td><td>Tab é”®</td><td>Tab é”®</td><td>ç‚¹å‡»æŒ‰é’®</td><td>Tab é”®</td></tr><tr><td><strong>å¼€æº</strong></td><td>âœ… æ˜¯</td><td>âŒ å¦</td><td>âŒ å¦</td><td>âŒ å¦</td></tr><tr><td><strong>éšç§ä¿æŠ¤</strong></td><td>âœ… æ”¯æŒæœ¬åœ°æ¨¡å‹</td><td>âŒ æ•°æ®ä¸Šä¼ äº‘ç«¯</td><td>âŒ æ•°æ®ä¸Šä¼ äº‘ç«¯</td><td>âŒ æ•°æ®ä¸Šä¼ äº‘ç«¯</td></tr></tbody></table>
<p><strong>milkup çš„ä¼˜åŠ¿ï¼š</strong></p>
<ul>
<li><strong>å¤šæä¾›å•†æ”¯æŒ</strong>ï¼šå¯è‡ªç”±é€‰æ‹© AI æœåŠ¡</li>
<li><strong>æœ¬åœ°ä¼˜å…ˆ</strong>ï¼šæ”¯æŒ Ollamaï¼Œä¿æŠ¤éšç§</li>
<li><strong>å¼€æºé€æ˜</strong>ï¼šä»£ç å…¬å¼€ï¼Œå¯å®¡è®¡</li>
<li><strong>é’ˆå¯¹ Markdown</strong>ï¼šä¸“é—¨ä¼˜åŒ–æ–‡æ¡£å†™ä½œåœºæ™¯</li>
</ul>
<p><strong>Cursor/Copilot çš„ä¼˜åŠ¿ï¼š</strong></p>
<ul>
<li><strong>ä»£ç ä¸“ç²¾</strong>ï¼šé’ˆå¯¹ä»£ç ç¼–è¾‘ä¼˜åŒ–</li>
<li><strong>ä¸Šä¸‹æ–‡æ›´ä¸°å¯Œ</strong>ï¼šå¯ä»¥ç†è§£æ•´ä¸ªé¡¹ç›®</li>
<li><strong>æˆç†Ÿåº¦é«˜</strong>ï¼šç»è¿‡å¤§é‡ç”¨æˆ·éªŒè¯</li>
</ul>
<p><strong>Notion AI çš„ä¼˜åŠ¿ï¼š</strong></p>
<ul>
<li><strong>å¤šåŠŸèƒ½</strong>ï¼šä¸ä»…ç»­å†™ï¼Œè¿˜æ”¯æŒæ€»ç»“ã€ç¿»è¯‘ã€æ”¹å†™ç­‰</li>
<li><strong>é›†æˆåº¦é«˜</strong>ï¼šä¸ Notion ç”Ÿæ€æ·±åº¦é›†æˆ</li>
</ul>
<hr/>
<h2 data-id="heading-38">äº”ã€æ€»ç»“ä¸å±•æœ›</h2>
<h3 data-id="heading-39">5.1 æŠ€æœ¯æ€»ç»“</h3>
<p>é€šè¿‡ feat-ir å’Œ feat-ai ä¸¤ä¸ªåˆ†æ”¯çš„å¼€å‘ï¼Œmilkup åœ¨ Markdown ç¼–è¾‘å™¨é¢†åŸŸå®ç°äº†é‡è¦çªç ´ï¼š</p>
<p><strong>å³æ—¶æ¸²æŸ“æ¨¡å¼ï¼ˆfeat-irï¼‰ï¼š</strong></p>
<ul>
<li>åŸºäº ProseMirror Decoration ç³»ç»Ÿå®ç°</li>
<li>æ™ºèƒ½æ˜¾ç¤ºæºç ï¼Œå…‰æ ‡èšç„¦æ—¶å¯è§</li>
<li>æ”¯æŒé“¾æ¥å’Œå›¾ç‰‡çš„å³æ—¶ç¼–è¾‘</li>
<li>æ€§èƒ½ä¼˜åŒ–ï¼Œå¤§æ–‡æ¡£æµç•…è¿è¡Œ</li>
</ul>
<p><strong>AI ç»­å†™åŠŸèƒ½ï¼ˆfeat-aiï¼‰ï¼š</strong></p>
<ul>
<li>æ”¯æŒ OpenAIã€Claudeã€Geminiã€Ollama ç­‰å¤šä¸ªæä¾›å•†</li>
<li>ç»“æ„åŒ–ç†è§£æ–‡æ¡£ï¼Œæå–æ ‡é¢˜å±‚çº§å’Œä¸Šä¸‹æ–‡</li>
<li>ä¼˜é›…çš„ UI é›†æˆï¼ŒåŠé€æ˜å»ºè®®ä¸å¹²æ‰°é˜…è¯»</li>
<li>é˜²æŠ–å’Œå–æ¶ˆæœºåˆ¶ï¼Œä¼˜åŒ–æ€§èƒ½å’Œæˆæœ¬</li>
</ul>
<p><strong>æŠ€æœ¯äº®ç‚¹ï¼š</strong></p>
<ol>
<li><strong>æ’ä»¶åŒ–æ¶æ„</strong>ï¼šæ˜“äºæ‰©å±•å’Œç»´æŠ¤</li>
<li><strong>ç°ä»£åŒ–æŠ€æœ¯æ ˆ</strong>ï¼šVue 3 + TypeScript + ProseMirror</li>
<li><strong>ç”¨æˆ·ä½“éªŒä¼˜å…ˆ</strong>ï¼šæµç•…çš„äº¤äº’ï¼Œä¼˜é›…çš„è§†è§‰è®¾è®¡</li>
<li><strong>å¼€æºé€æ˜</strong>ï¼šä»£ç å…¬å¼€ï¼Œç¤¾åŒºé©±åŠ¨</li>
</ol>
<h3 data-id="heading-40">5.2 æœªæ¥å±•æœ›</h3>
<p><strong>çŸ­æœŸè®¡åˆ’ï¼š</strong></p>
<ol>
<li>
<p><strong>åŠŸèƒ½å®Œå–„</strong>ï¼š</p>
<ul>
<li>æ”¯æŒæ›´å¤š Markdown å…ƒç´ çš„å³æ—¶æ¸²æŸ“ï¼ˆè¡¨æ ¼ã€å…¬å¼ï¼‰</li>
<li>AI ç»­å†™æ”¯æŒæ›´å¤šåœºæ™¯ï¼ˆä»£ç å—ã€åˆ—è¡¨ï¼‰</li>
<li>æ·»åŠ  AI æ”¹å†™ã€æ€»ç»“ç­‰åŠŸèƒ½</li>
</ul>
</li>
<li>
<p><strong>æ€§èƒ½ä¼˜åŒ–</strong>ï¼š</p>
<ul>
<li>å¤§æ–‡æ¡£æ€§èƒ½ä¼˜åŒ–</li>
<li>AI è¯·æ±‚ç¼“å­˜æœºåˆ¶</li>
<li>å¢é‡æ¸²æŸ“</li>
</ul>
</li>
<li>
<p><strong>ç”¨æˆ·ä½“éªŒ</strong>ï¼š</p>
<ul>
<li>æ›´ä¸°å¯Œçš„å¿«æ·é”®</li>
<li>è‡ªå®šä¹‰ä¸»é¢˜</li>
<li>æ›´å¤šé…ç½®é€‰é¡¹</li>
</ul>
</li>
</ol>
<p><strong>é•¿æœŸæ„¿æ™¯ï¼š</strong></p>
<ol>
<li>
<p><strong>åä½œèƒ½åŠ›</strong>ï¼š</p>
<ul>
<li>å¤šäººå®æ—¶åä½œ</li>
<li>ç‰ˆæœ¬æ§åˆ¶é›†æˆ</li>
<li>è¯„è®ºå’Œæ‰¹æ³¨</li>
</ul>
</li>
<li>
<p><strong>çŸ¥è¯†ç®¡ç†</strong>ï¼š</p>
<ul>
<li>åŒå‘é“¾æ¥</li>
<li>æ ‡ç­¾ç³»ç»Ÿ</li>
<li>å…¨æ–‡æœç´¢</li>
</ul>
</li>
<li>
<p><strong>AI æ·±åº¦é›†æˆ</strong>ï¼š</p>
<ul>
<li>æ™ºèƒ½å¤§çº²ç”Ÿæˆ</li>
<li>è‡ªåŠ¨æ’ç‰ˆä¼˜åŒ–</li>
<li>å¤šè¯­è¨€ç¿»è¯‘</li>
<li>è¯­æ³•æ£€æŸ¥å’Œæ”¹è¿›å»ºè®®</li>
</ul>
</li>
<li>
<p><strong>ç”Ÿæ€å»ºè®¾</strong>ï¼š</p>
<ul>
<li>æ’ä»¶å¸‚åœº</li>
<li>ä¸»é¢˜å•†åº—</li>
<li>ç¤¾åŒºè´¡çŒ®</li>
</ul>
</li>
</ol>
<h3 data-id="heading-41">5.3 è‡´è°¢</h3>
<p>æ„Ÿè°¢æ‰€æœ‰ä¸º milkup é¡¹ç›®åšå‡ºè´¡çŒ®çš„å¼€å‘è€…å’Œç”¨æˆ·ã€‚ç‰¹åˆ«æ„Ÿè°¢ï¼š</p>
<ul>
<li><strong>Milkdown</strong> å›¢é˜Ÿï¼šæä¾›äº†ä¼˜ç§€çš„ç¼–è¾‘å™¨æ¡†æ¶</li>
<li><strong>ProseMirror</strong> ç¤¾åŒºï¼šå¼ºå¤§çš„ç¼–è¾‘å™¨å†…æ ¸</li>
<li><strong>Vue.js</strong> å›¢é˜Ÿï¼šç°ä»£åŒ–çš„å‰ç«¯æ¡†æ¶</li>
<li><strong>Anthropic</strong>ï¼šClaude Code çš„å¼€å‘æ”¯æŒ</li>
</ul>
<h3 data-id="heading-42">5.4 å‚è€ƒèµ„æº</h3>
<p><strong>é¡¹ç›®åœ°å€ï¼š</strong></p>
<ul>
<li>GitHub: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fauto-plugin%2Fmilkup" target="_blank" title="https://github.com/auto-plugin/milkup" ref="nofollow noopener noreferrer">milkup</a></li>
</ul>
<h2 data-id="heading-43">ç»“è¯­</h2>
<p>milkup çš„å¼€å‘æ˜¯ä¸€æ¬¡æœ‰è¶£çš„æŠ€æœ¯æ¢ç´¢ä¹‹æ—…ã€‚æˆ‘ä»¬ä¸ä»…å®ç°äº†ç±»ä¼¼ Typora çš„å³æ—¶æ¸²æŸ“æ¨¡å¼ï¼Œè¿˜åœ¨ AI é›†æˆæ–¹é¢èµ°åœ¨äº†å‰åˆ—ã€‚</p>
<p>ä½œä¸ºä¸€ä¸ªå¼€æºé¡¹ç›®ï¼Œmilkup çš„æˆé•¿ç¦»ä¸å¼€ç¤¾åŒºçš„æ”¯æŒã€‚æˆ‘ä»¬æ¬¢è¿ä»»ä½•å½¢å¼çš„è´¡çŒ®ï¼šä»£ç ã€æ–‡æ¡£ã€å»ºè®®ã€bug æŠ¥å‘Šã€‚è®©æˆ‘ä»¬ä¸€èµ·æ‰“é€ ä¸€ä¸ªæ›´å¥½çš„ Markdown ç¼–è¾‘å™¨ï¼</p>
<p>å¦‚æœä½ å¯¹ milkup æ„Ÿå…´è¶£ï¼Œæ¬¢è¿ï¼š</p>
<ul>
<li>â­ Star é¡¹ç›®</li>
<li>ğŸ› æäº¤ Issue</li>
<li>ğŸ”§ è´¡çŒ®ä»£ç </li>
<li>ğŸ’¬ åŠ å…¥è®¨è®º</li>
</ul>
<p>è®©æˆ‘ä»¬ä¸€èµ·æ¨åŠ¨ Markdown ç¼–è¾‘å™¨çš„å‘å±•ï¼</p>
<hr/>
<p><strong>ä½œè€…ï¼š</strong> å¾·è±å„æ–¯ &amp; Claude Code <strong>æ—¥æœŸï¼š</strong> 2026 å¹´ 2 æœˆ <strong>ç‰ˆæœ¬ï¼š</strong> v1.0</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¦‚ä½•æ­£ç¡®å–æ¶ˆ ViewModel é‡Œçš„åç¨‹]]></title>    <link>https://juejin.cn/post/7602488187407614004</link>    <guid>https://juejin.cn/post/7602488187407614004</guid>    <pubDate>2026-02-04T00:29:49.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602488187407614004" data-draft-id="7600225000851111971" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¦‚ä½•æ­£ç¡®å–æ¶ˆ ViewModel é‡Œçš„åç¨‹"/> <meta itemprop="keywords" content="Kotlin,Android"/> <meta itemprop="datePublished" content="2026-02-04T00:29:49.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="RockByte"/> <meta itemprop="url" content="https://juejin.cn/user/1046390797768519"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¦‚ä½•æ­£ç¡®å–æ¶ˆ ViewModel é‡Œçš„åç¨‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1046390797768519/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    RockByte
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T00:29:49.000Z" title="Wed Feb 04 2026 00:29:49 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{font-family:-apple-system,BlinkMacSystemFont,PingFang SC,Helvetica Neue,Helvetica,Arial,sans-serif;word-break:break-word;line-height:1.75;font-weight:200;font-size:16px;overflow-x:hidden;color:#666;letter-spacing:.5px}.markdown-body a{text-decoration:none;color:#0064c8;position:relative}.markdown-body a:after{content:"";position:absolute;bottom:-2px;left:0;width:100%;height:1px;background-color:rgba(0,100,200,.7);transform:scale(0);transition:all .4s ease-in-out}.markdown-body a:link:hover:after{transform:scale(1)}.markdown-body code{padding:2px 4px;font-size:.9em;font-family:Menlo,Monaco,Consolas,Courier New,monospace;border-radius:2px;background-color:rgba(0,46,70,.0431);color:#39f}.markdown-body strong{font-weight:400}.markdown-body em{color:#ff6a00}.markdown-body del,.markdown-body s{color:#bbb}.markdown-body small{font-size:.8em;color:#bbb}.markdown-body kbd{margin:0 .1em;padding:5px 8px 3px;border:1px solid #d1d5d9;border-radius:3px;box-shadow:0 1px 0 0 #e3e4e6,inset 0 0 0 2px #fff;background-color:#eee;font-weight:600;font-size:.8em;font-family:Arial,Helvetica Neue,Helvetica,sans-serif;white-space:nowrap;color:#666}.markdown-body kbd:first-child{margin-left:0}.markdown-body kbd:last-child{margin-right:0}.markdown-body img{display:block;border:0;max-width:calc(100% - 20px);min-width:20px;min-height:20px;margin:0 10px;box-shadow:0 2px 8px 2px rgba(0,0,0,.2);transition:all .25s ease-in-out}.markdown-body img:hover{transform:translateY(-4px)}.markdown-body blockquote,.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6,.markdown-body ol,.markdown-body p,.markdown-body pre,.markdown-body table,.markdown-body ul{line-height:inherit;font-size:inherit;color:inherit}.markdown-body blockquote:first-child,.markdown-body h1:first-child,.markdown-body h2:first-child,.markdown-body h3:first-child,.markdown-body h4:first-child,.markdown-body h5:first-child,.markdown-body h6:first-child,.markdown-body ol:first-child,.markdown-body p:first-child,.markdown-body pre:first-child,.markdown-body table:first-child,.markdown-body ul:first-child{margin-top:0}.markdown-body blockquote:last-child,.markdown-body h1:last-child,.markdown-body h2:last-child,.markdown-body h3:last-child,.markdown-body h4:last-child,.markdown-body h5:last-child,.markdown-body h6:last-child,.markdown-body ol:last-child,.markdown-body p:last-child,.markdown-body pre:last-child,.markdown-body table:last-child,.markdown-body ul:last-child{margin-bottom:0}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin:1.6em 0 .6em;color:#333;font-weight:400;position:relative}.markdown-body h1:before,.markdown-body h2:before,.markdown-body h3:before,.markdown-body h4:before,.markdown-body h5:before,.markdown-body h6:before{position:absolute;left:-2em}.markdown-body h1{font-size:1.75em}.markdown-body h1:before{content:"#"}.markdown-body h1:first-child{margin-top:0}.markdown-body h2{font-size:1.5em}.markdown-body h3{font-size:1.35em}.markdown-body h4{font-size:1.2em}.markdown-body h5{font-size:1.1em}.markdown-body h6{font-size:1em}.markdown-body blockquote,.markdown-body ol,.markdown-body pre,.markdown-body table,.markdown-body ul{margin:1em 0}.markdown-body p{margin:.7em 0;word-break:break-word}.markdown-body pre{padding:8px 12px;color:#666;background-color:rgba(0,46,70,.0431);border:1px solid #ebebeb;tab-size:4;white-space:pre-wrap;line-height:1.4}.markdown-body pre code{color:inherit;background-color:transparent;padding:0}.markdown-body ol,.markdown-body ul{margin:1em 0 1em 2em;padding:0;line-height:1.5!important;font-size:inherit;color:inherit}.markdown-body ol:first-child,.markdown-body ul:first-child{margin-top:0}.markdown-body ol:last-child,.markdown-body ul:last-child{margin-bottom:0}.markdown-body ol li,.markdown-body ul li{margin:.5em 0;list-style:inherit}.markdown-body ul{list-style:disc outside}.markdown-body ul ul{list-style-type:circle}.markdown-body ul ul ul{list-style-type:square}.markdown-body ol{list-style:decimal outside}.markdown-body ol ol{list-style-type:lower-alpha}.markdown-body ol ol ol{list-style-type:lower-roman}.markdown-body blockquote{font-size:.9em;padding:8px 20px 8px 15px;color:#666;border-left:5px solid rgba(0,100,200,.7);background-color:rgba(0,100,200,.1)}.markdown-body table{border-collapse:collapse;border-spacing:0;max-width:100%;min-width:50%;word-wrap:break-word;color:inherit}.markdown-body table thead tr{background-color:#f4f6f7}.markdown-body table td,.markdown-body table th{padding:4px 16px;font-size:.95em;text-align:left;color:inherit;border:0;min-width:72px}.markdown-body table td[align=center],.markdown-body table th[align=center]{text-align:center}.markdown-body table td[align=right],.markdown-body table th[align=right]{text-align:right}.markdown-body table th{border-bottom:2px solid #e3e4e6;color:#333;font-weight:400;white-space:nowrap}.markdown-body table td{border-bottom:1px solid #ebebeb}.markdown-body hr{margin:1.5em 0;padding:0;border:0;background:linear-gradient(90deg,rgba(0,46,70,.0431),#ebebeb 50%,rgba(0,46,70,.0431));height:1px}.markdown-body br{content:"";display:block}</style><style data-highlight="" data-highlight-key="xcode">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#fff;color:#000}.xml .hljs-meta{color:silver}.hljs-comment,.hljs-quote{color:#007400}.hljs-attribute,.hljs-keyword,.hljs-literal,.hljs-name,.hljs-selector-tag,.hljs-tag{color:#aa0d91}.hljs-template-variable,.hljs-variable{color:#3f6e74}.hljs-code,.hljs-meta-string,.hljs-string{color:#c41a16}.hljs-link,.hljs-regexp{color:#0e0eff}.hljs-bullet,.hljs-number,.hljs-symbol,.hljs-title{color:#1c00cf}.hljs-meta,.hljs-section{color:#643820}.hljs-built_in,.hljs-builtin-name,.hljs-class .hljs-title,.hljs-params,.hljs-type{color:#5c2699}.hljs-attr{color:#836c28}.hljs-subst{color:#000}.hljs-formula{background-color:#eee;font-style:italic}.hljs-addition{background-color:#baeeba}.hljs-deletion{background-color:#ffc8bd}.hljs-selector-class,.hljs-selector-id{color:#9b703f}.hljs-doctag,.hljs-strong{font-weight:700}.hljs-emphasis{font-style:italic}</style><p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c9c242af436549feb356a83a5d210f54~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUm9ja0J5dGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770769789&amp;x-signature=B%2B3HYeFBUGjLyg%2F2%2FyV7t5iLOLU%3D" alt="0.png" loading="lazy"/></p>
<p>æ˜¨å¤©ï¼Œæˆ‘å†™è¿‡è¿™æ ·<a href="https://juejin.cn/post/7602072652607602728" target="_blank" title="https://juejin.cn/post/7602072652607602728">ä¸€ç¯‡æ–‡ç« </a>ï¼Œé‡Œé¢è®²è¿°äº†ä¸€ä¸ªå¯èƒ½ 90% çš„å¼€å‘è€…éƒ½ç­”ä¸ä¸Šæ¥é—®é¢˜ã€‚</p>
<p>ä¸­åˆæˆ‘å’ŒåŒäº‹åƒé¥­çš„æ—¶å€™ï¼Œä»–é—®æˆ‘ï¼šç„¶åå‘¢ï¼Œä½ å°±æ°´ä¸€ç¯‡æ–‡ç« ä¸ç»™è§£å†³æ–¹æ¡ˆï¼Ÿä½ çŸ¥é“ç¨‹åºå‘˜æµè¡Œä¸€å¥ä»€ä¹ˆæ ·çš„è¯å—ï¼Ÿâ€”â€”ç•™å›¾ä¸ç•™ç§ï¼Œxxä¸‡äººxã€‚</p>
<p>OKï¼Œæ‰“ä½ï¼</p>
<p>è¿™é‡Œï¼Œæˆ‘ä»¬ä» <code>viewModelScope</code> å…¥æ‰‹ï¼Œçœ‹çœ‹è¿™ä¸ªå–æ¶ˆçš„é—®é¢˜ï¼</p>
<h2 data-id="heading-0">viewModelScope</h2>
<p>æˆ‘çŸ¥é“ï¼Œä½œä¸ºä¸€åå®‰å“å¼€å‘è€…ï¼Œéƒ½æ›¾èŠ±è´¹æ— æ•°æ—¶é—´è°ƒè¯•å„ç§è¯¡å¼‚çš„å´©æºƒé—®é¢˜å’Œå†…å­˜æ³„æ¼ï¼Œè€Œè¿™äº›é—®é¢˜çš„æ ¹æºå¾€å¾€éƒ½æŒ‡å‘åç¨‹å¤„ç†ä¸å½“ã€‚</p>
<p>å¦‚æœä½¿ç”¨ <code>Kotlin</code> åç¨‹ï¼Œå¤§æ¦‚ç‡å¯¹ <code>viewModelScope</code> å¹¶ä¸é™Œç”Ÿã€‚</p>
<p>å®ƒæ˜¯å°†åç¨‹ä¸ <code>ViewModel</code> ç”Ÿå‘½å‘¨æœŸç»‘å®šçš„ç»ä½³å·¥å…·ï¼Œä½†å¦‚æœå–æ¶ˆæ“ä½œå¤„ç†ä¸å½“ï¼Œéº»çƒ¦ä¾¿ä¼šæ¥è¸µè€Œè‡³ã€‚</p>
<p>æ³„æ¼çš„åç¨‹ä¼šæŒç»­å ç”¨èµ„æºã€æµªè´¹ <code>CPU</code> ç®—åŠ›ï¼Œæ›´ç³Ÿçš„æ˜¯ï¼Œè¿˜å¯èƒ½å¯¼è‡´åº”ç”¨è¡Œä¸ºå¼‚å¸¸ã€‚</p>
<p>åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘å°†åˆ†äº«è‡ªå·±æ‘¸ç´¢å‡ºçš„ <code>viewModelScope</code> å–æ¶ˆæ“ä½œå®æˆ˜ç»éªŒï¼Œç»“åˆå…·ä½“ç¤ºä¾‹å’ŒæŠ€å·§ï¼Œé¿å…è¢«â€œxxä¸‡äººxâ€ã€‚</p>
<h2 data-id="heading-1">ä¸ºä½•å–æ¶ˆæ“ä½œè‡³å…³é‡è¦</h2>
<p><code>viewModelScope</code> æ˜¯ä¸ <code>ViewModel</code> ç”Ÿå‘½å‘¨æœŸç»‘å®šçš„åç¨‹ä½œç”¨åŸŸã€‚</p>
<p>å½“ <code>ViewModel</code> è¢«é”€æ¯æ—¶ï¼ˆæ¯”å¦‚å…³è”çš„ <code>Activity</code> æˆ– <code>Fragment</code> é”€æ¯ï¼‰ï¼Œè¯¥ä½œç”¨åŸŸä¼šè‡ªåŠ¨å–æ¶ˆæ‰€æœ‰å…³è”çš„åç¨‹ã€‚</p>
<p>å¬èµ·æ¥å¾ˆå®Œç¾ï¼Ÿ</p>
<p>ä½†å…³é”®é—®é¢˜åœ¨äºï¼šè‡ªåŠ¨å–æ¶ˆä¸ä»£è¡¨å¯ä»¥é«˜æ•æ— å¿§ã€‚ç¨ä¸æ³¨æ„ï¼Œåç¨‹ä»å¯èƒ½è¶…æ—¶è¿è¡Œã€å ç”¨èµ„æºï¼Œæˆ–è§¦å‘æœªæ•è·å¼‚å¸¸å¯¼è‡´åº”ç”¨å´©æºƒã€‚</p>
<p><em>è¿˜è®°å¾—ä¹‹å‰çš„æ–‡ç« çš„é‚£å¥è¯å—ï¼Ÿåç¨‹çš„å–æ¶ˆæ˜¯åä½œçš„ã€‚</em></p>
<p>è§„èŒƒçš„å–æ¶ˆæ“ä½œèƒ½ç¡®ä¿åº”ç”¨å§‹ç»ˆè½»é‡ã€è¡Œä¸ºå¯é¢„æµ‹ï¼Œå°¤å…¶æ˜¯åœ¨é…ç½®å˜æ›´æˆ–è¿›ç¨‹ç»ˆæ­¢çš„åœºæ™¯ä¸‹ã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬èŠèŠå¦‚ä½•ä¸“ä¸šåœ°ç®¡ç† <code>viewModelScope</code> çš„å–æ¶ˆé€»è¾‘ã€‚</p>
<h2 data-id="heading-2">ç†è§£ viewModelScope</h2>
<p><code>viewModelScope</code> æ˜¯ <code>androidx.lifecycle:lifecycle-viewmodel-ktx</code> åº“æä¾›çš„å±æ€§ï¼Œæœ¬è´¨æ˜¯ç»‘å®šåˆ° <code>Dispatchers.Main</code> ä¸»çº¿ç¨‹ã€ä¸”ä¸ <code>ViewModel</code> ç”Ÿå‘½å‘¨æœŸå…³è”çš„ <code>CoroutineScope</code>ã€‚</p>
<p>å½“ <code>ViewModel</code> çš„ <code>onCleared()</code> æ–¹æ³•è¢«è°ƒç”¨æ—¶ï¼Œè¯¥ä½œç”¨åŸŸä¼šå–æ¶ˆæ‰€æœ‰åç¨‹ã€‚</p>
<p>è¿™å¯¹ <code>Android</code> å¼€å‘è€Œè¨€å ªç§°ç»é…â€”â€”æ¯•ç«Ÿ <code>UI</code> ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸæœ¬å°±å¤šå˜ï¼Œä½†è¿™ä¸€åˆ‡çš„å‰ææ˜¯ï¼Œä½ ç¼–å†™çš„ä»£ç è¦å…·å¤‡â€œå–æ¶ˆæ„ŸçŸ¥â€èƒ½åŠ›ã€‚</p>
<p>ä»¥ä¸‹æ˜¯ä½¿ç”¨ <code>viewModelScope</code> çš„ç®€å• <code>ViewModel</code> ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-Kotlin" lang="Kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyViewModel</span> : <span class="hljs-type">ViewModel</span>() {
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">fetchData</span><span class="hljs-params">()</span></span> {
        viewModelScope.launch {
            <span class="hljs-keyword">val</span> <span class="hljs-keyword">data</span> = fetchDataFromNetwork() <span class="hljs-comment">// æŒ‚èµ·å‡½æ•°</span>
            <span class="hljs-comment">// æ›´æ–°UI</span>
        }
    }
}
</code></pre>
<p>å½“ <code>ViewModel</code> è¢«é”€æ¯ï¼ˆæ¯”å¦‚ç”¨æˆ·è·³è½¬é¡µé¢ï¼‰ï¼Œåç¨‹ä¼šè¢«å–æ¶ˆã€‚</p>
<p>ä½†å¦‚æœ <code>fetchDataFromNetwork()</code> æ˜¯è€—æ—¶æ“ä½œï¼Œæƒ…å†µä¼šå¦‚ä½•ï¼Ÿ</p>
<h2 data-id="heading-3">å–æ¶ˆæ“ä½œä¸å½“çš„å¸¸è§é™·é˜±</h2>
<p>åœ¨æˆ‘æ—©æœŸçš„é¡¹ç›®ä¸­ï¼Œæˆ‘æ›¾ä»¥ä¸º <code>viewModelScope</code> èƒ½â€œé­”æ³•èˆ¬â€å¤„ç†æ‰€æœ‰é—®é¢˜ï¼Œå®é™…ä¸Šæ ¹æœ¬ä¸å¯èƒ½ã€‚</p>
<p>ä»¥ä¸‹æ˜¯æˆ‘è¸©è¿‡çš„å…¸å‹å‘ï¼š</p>
<ol>
<li><strong>ä¸å¯å–æ¶ˆçš„æ“ä½œ</strong>ï¼šéƒ¨åˆ†æŒ‚èµ·å‡½æ•°ï¼ˆå¦‚ç¬¬ä¸‰æ–¹åº“è°ƒç”¨ï¼‰ä¸å“åº”å–æ¶ˆæŒ‡ä»¤ï¼Œå¯¼è‡´èµ„æºæŒç»­å ç”¨ã€‚æˆ–è€…ï¼Œä½ è°ƒç”¨çš„å‡½æ•°å°±æ˜¯ä¸€ä¸ªæ™®é€šå‡½æ•°ï¼Œæ ¹æœ¬ä¸æ˜¯æŒ‚èµ·å‡½æ•°ï¼Œä¸å¯èƒ½å“åº”å–æ¶ˆæŒ‡ä»¤ï¼›</li>
<li><strong>èµ„æºæ³„æ¼</strong>ï¼šè‹¥åç¨‹æŒæœ‰ <code>Context</code> æˆ– <code>View</code> çš„å¼•ç”¨ï¼Œå³ä¾¿å–æ¶ˆåç¨‹ä¹Ÿæ— æ³•é‡Šæ”¾èµ„æºï¼Œæœ€ç»ˆå¼•å‘å†…å­˜æ³„æ¼ï¼›</li>
<li><strong>æœªæ•è·å¼‚å¸¸</strong>ï¼šåç¨‹å–æ¶ˆè¿‡ç¨‹ä¸­è‹¥æŠ›å‡ºæœªå¤„ç†çš„ <code>CancellationException</code>ï¼Œå¯èƒ½ç›´æ¥å¯¼è‡´åº”ç”¨å´©æºƒã€‚</li>
</ol>
<h2 data-id="heading-4">é¢˜å¤–è¯</h2>
<p>å…¶å®æ—©æœŸå¯¹äºçº¿ç¨‹æˆ‘ä¹Ÿæ˜¯è¿™ä¹ˆç†è§£çš„ï¼Œæˆ‘ä»¬ç¿»çœ‹ä¸€ä¸‹ç°åœ¨çš„ Java çº¿ç¨‹çš„æºç ï¼š</p>
<pre><code class="hljs language-Java" lang="Java"><span class="hljs-meta">@Deprecated(
    since = "1.2",
    forRemoval = true
)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">stop</span><span class="hljs-params">()</span> {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UnsupportedOperationException</span>();
}

<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">interrupt</span><span class="hljs-params">()</span> {
    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span> != currentThread()) {
        <span class="hljs-built_in">this</span>.checkAccess();
    }

    <span class="hljs-built_in">this</span>.interrupted = <span class="hljs-literal">true</span>;
    <span class="hljs-built_in">this</span>.interrupt0();
    <span class="hljs-comment">//...</span>
}
</code></pre>
<p><code>stop</code> å·²ç»æ˜¯ä¸€ä¸ªå¼ƒç”¨ä¸”ä¸å¯ç”¨çš„æ¥å£äº†ã€‚</p>
<p>åˆšå­¦ Java çš„æˆ‘ä¸€ç›´ä»¥ä¸ºï¼Œå¦‚æœæˆ‘è°ƒç”¨ <code>stop</code> æˆ–è€… <code>interrupt</code>ï¼ŒJava ä¸€å®šä¼šå®Œç¾çš„å¸®æˆ‘å–æ¶ˆçº¿ç¨‹ï¼Œé‡Šæ”¾èµ„æºã€‚ä½†å®é™…ä¸Šæˆ‘ä»¬éœ€è¦å†™é¢å¤–çš„ä»£ç æ¥è¾¾æˆè¿™ä¸€æ­¥ï¼Œä¾‹å¦‚åˆ¤æ–­ <code>interrupted</code> æ ‡å¿—ä½ã€‚</p>
<p>é¢˜å¤–è¯ç»“æŸï¼Œæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬çœ‹çœ‹å¦‚ä½•è§£å†³å–æ¶ˆæ“ä½œä¸å½“çš„é—®é¢˜ã€‚</p>
<h2 data-id="heading-5">ç¼–å†™æ”¯æŒå–æ¶ˆçš„æŒ‚èµ·å‡½æ•°</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4074f668c159463a8e31aeae9a229d66~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUm9ja0J5dGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770769789&amp;x-signature=CKTSF1VeJh4qxqWnP4AA7W0FRyg%3D" alt="1.png" loading="lazy"/></p>
<p><strong>å¹¶éæ‰€æœ‰æŒ‚èµ·å‡½æ•°éƒ½å¤©ç”Ÿæ”¯æŒå–æ¶ˆ</strong>ã€‚</p>
<p>å¦‚æœè°ƒç”¨çš„æ˜¯éæŒ‚èµ·çš„é˜»å¡å¼ <code>API</code>ï¼ˆå¦‚é—ç•™åº“ï¼‰ï¼Œéœ€é€šè¿‡åŒ…è£…è®©å…¶å“åº”å–æ¶ˆæŒ‡ä»¤ï¼Œå¯ä½¿ç”¨ <code>isActive</code> æˆ– <code>yield()</code> æ£€æŸ¥å–æ¶ˆçŠ¶æ€ã€‚</p>
<p>ä»¥ä¸‹æ˜¯æ”¯æŒå–æ¶ˆçš„æŒ‚èµ·å‡½æ•°ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-Kotlin" lang="Kotlin"><span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">fetchDataFromNetwork</span><span class="hljs-params">()</span></span>: String = withContext(Dispatchers.IO) {
    <span class="hljs-comment">// æ¨¡æ‹Ÿè€—æ—¶ç½‘ç»œè¯·æ±‚</span>
    <span class="hljs-keyword">for</span> (i <span class="hljs-keyword">in</span> <span class="hljs-number">1.</span><span class="hljs-number">.10</span>) {
        <span class="hljs-keyword">if</span> (!isActive) <span class="hljs-keyword">return</span><span class="hljs-symbol">@withContext</span> <span class="hljs-string">"å·²å–æ¶ˆ"</span> <span class="hljs-comment">// å–æ¶ˆåˆ™é€€å‡º</span>
        delay(<span class="hljs-number">1000</span>) <span class="hljs-comment">// æ¨¡æ‹Ÿç½‘ç»œå»¶è¿Ÿ</span>
    }
    <span class="hljs-string">"æ•°æ®è·å–æˆåŠŸ"</span>
}
</code></pre>
<p>è¯¥å‡½æ•°ä¸­ï¼Œ<code>isActive</code> ä¼šæ£€æŸ¥åç¨‹æ˜¯å¦ä»å¤„äºæ´»è·ƒçŠ¶æ€ã€‚å½“ <code>ViewModel</code> è¢«é”€æ¯æ—¶ï¼Œ<code>isActive</code> å˜ä¸º <code>false</code>ï¼Œå‡½æ•°ä¼šæå‰é€€å‡ºã€‚</p>
<h2 data-id="heading-6">éµå¾ªç»“æ„åŒ–å¹¶å‘åŸåˆ™</h2>
<p><strong>ç»“æ„åŒ–å¹¶å‘èƒ½ç¡®ä¿å­åç¨‹éšçˆ¶ä½œç”¨åŸŸå–æ¶ˆè€Œå–æ¶ˆ</strong>ã€‚</p>
<p><code>viewModelScope</code> æœ¬èº«å·²éµå¾ªè¿™ä¸€åŸåˆ™ï¼Œä½†å¯åŠ¨åµŒå¥—åç¨‹æ—¶ä»éœ€åˆ»æ„æ³¨æ„ï¼šé¿å…ä½¿ç”¨ <code>GlobalScope</code>ï¼Œå› å…¶ä¸ç»‘å®šä»»ä½•ç”Ÿå‘½å‘¨æœŸï¼Œé€šå¸¸æ¯” <code>ViewModel</code> å­˜æ´»æ›´ä¹…ã€‚</p>
<pre><code class="hljs language-Kotlin" lang="Kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyViewModel</span> : <span class="hljs-type">ViewModel</span>() {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> _data = MutableLiveData&lt;String&gt;()
    <span class="hljs-keyword">val</span> <span class="hljs-keyword">data</span>: LiveData&lt;String&gt; = _data

    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">fetchMultipleData</span><span class="hljs-params">()</span></span> {
        viewModelScope.launch {
            <span class="hljs-keyword">try</span> {
                <span class="hljs-keyword">val</span> result1 = async { fetchDataFromNetwork() }.await()
                <span class="hljs-keyword">val</span> result2 = async { fetchDataFromNetwork() }.await()
                _data.value = <span class="hljs-string">"<span class="hljs-variable">$result1</span>, <span class="hljs-variable">$result2</span>"</span>
            } <span class="hljs-keyword">catch</span> (e: CancellationException) {
                _data.value = <span class="hljs-string">"æ“ä½œå·²å–æ¶ˆ"</span>
            } <span class="hljs-keyword">catch</span> (e: Exception) {
                _data.value = <span class="hljs-string">"é”™è¯¯ï¼š<span class="hljs-subst">${e.message}</span>"</span>
            }
        }
    }
}
</code></pre>
<p>æ­¤å¤„çš„ <code>async</code> åç¨‹æ˜¯ <code>viewModelScope.launch</code> ä»£ç å—çš„å­åç¨‹ï¼Œå½“ <code>ViewModel</code> è¢«é”€æ¯æ—¶ï¼Œæ‰€æœ‰å­åç¨‹ä¼šè‡ªåŠ¨å–æ¶ˆã€‚</p>
<p><em>é’ˆå¯¹ <code>CancellationException</code> çš„æ­£ç¡®åšæ³•åº”è¯¥æ˜¯é‡æ–°æŠ›å‡ºï¼Œä¸è¿‡è¿™é‡Œåªæ˜¯ä¸ºäº†å±•ç¤ºå½“å‰å‡½æ•°çš„å–æ¶ˆé€»è¾‘ï¼Œæ‰€ä»¥å¹¶æ²¡æœ‰è¿™ä¹ˆåšï¼Œæ–‡ç« çš„åç»­éƒ¨åˆ†å°†ä¾ç„¶é‡‡ç”¨è¿™ç§åšæ³•ï¼Œä½†æ˜¯äº²çˆ±çš„è¯»è€…ä»¬ï¼Œä½ ä»¬è¦çŸ¥é“è¿™ä¸ªåœ°æ–¹è¿™ä¹ˆåšæ˜¯æœ‰å¾…å•†æ¦·çš„ã€‚</em></p>
<h2 data-id="heading-7">å¤„ç†å–æ¶ˆå¼‚å¸¸</h2>
<p>åç¨‹å–æ¶ˆæ—¶ä¼šæŠ›å‡º <code>CancellationException</code>ï¼Œè¿™æ˜¯æ­£å¸¸è¡Œä¸ºï¼Œä½†å¿…é¡»å¦¥å–„å¤„ç†ä»¥é¿å…æ„å¤–å´©æºƒã€‚å»ºè®®å§‹ç»ˆå°†åç¨‹ä»£ç åŒ…è£¹åœ¨ <code>try-catch</code> å—ä¸­ã€‚</p>
<pre><code class="hljs language-Kotlin" lang="Kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyViewModel</span> : <span class="hljs-type">ViewModel</span>() {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> _status = MutableLiveData&lt;String&gt;()
    <span class="hljs-keyword">val</span> status: LiveData&lt;String&gt; = _status

    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">performLongRunningTask</span><span class="hljs-params">()</span></span> {
        viewModelScope.launch {
            <span class="hljs-keyword">try</span> {
                _status.value = withContext(Dispatchers.IO) {
                    <span class="hljs-comment">// è€—æ—¶ä»»åŠ¡</span>
                    delay(<span class="hljs-number">5000</span>)
                    <span class="hljs-string">"ä»»åŠ¡å®Œæˆ"</span>
                }
            } <span class="hljs-keyword">catch</span> (e: CancellationException) {
                _status.value = <span class="hljs-string">"ä»»åŠ¡å·²å–æ¶ˆ"</span>
            } <span class="hljs-keyword">catch</span> (e: Exception) {
                _status.value = <span class="hljs-string">"é”™è¯¯ï¼š<span class="hljs-subst">${e.message}</span>"</span>
            }
        }
    }
}
</code></pre>
<p>è¿™èƒ½ç¡®ä¿ <code>ViewModel</code> é”€æ¯æ—¶ï¼Œåº”ç”¨ä¼˜é›…å¤„ç†å–æ¶ˆæ“ä½œï¼Œå¹¶åŒæ­¥æ›´æ–° <code>UI</code> çŠ¶æ€ã€‚</p>
<h2 data-id="heading-8">é¿å…æŒæœ‰ UI ç»„ä»¶å¼•ç”¨</h2>
<p><code>viewModelScope</code> ä¸­çš„åç¨‹è‹¥ä¸æ…æŒæœ‰ <code>Activity</code> æˆ– <code>Fragment</code> çš„å¼•ç”¨ï¼Œææ˜“å¼•å‘å†…å­˜æ³„æ¼ã€‚</p>
<p>æ¯”å¦‚å‘æŒ‚èµ·å‡½æ•°ä¼ é€’ <code>Context</code>ï¼Œå¯èƒ½å¯¼è‡´<code>Activity</code> åœ¨å–æ¶ˆåä»æ— æ³•é‡Šæ”¾ã€‚å»ºè®®æ”¹ç”¨ä¾èµ–æ³¨å…¥ï¼Œæˆ–æ˜¾å¼ä¼ é€’æ•°æ®ã€‚</p>
<p>âŒ é”™è¯¯ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-Kotlin" lang="Kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyViewModel</span> : <span class="hljs-type">ViewModel</span>() {
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">badFetch</span><span class="hljs-params">(activity: <span class="hljs-type">Activity</span>)</span></span> {
        viewModelScope.launch {
            <span class="hljs-comment">// æŒæœ‰Activityå¼•ç”¨æ˜“å¯¼è‡´æ³„æ¼</span>
            activity.showToast(fetchDataFromNetwork())
        }
    }
}
</code></pre>
<p>âœ… ä¼˜åŒ–æ–¹æ¡ˆï¼š</p>
<pre><code class="hljs language-Kotlin" lang="Kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyViewModel</span> : <span class="hljs-type">ViewModel</span>() {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> _toastMessage = MutableStateFlow&lt;String&gt;(<span class="hljs-string">""</span>)
    <span class="hljs-keyword">val</span> toastMessage: Flow&lt;String&gt; = _toastMessage

    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">fetchAndNotify</span><span class="hljs-params">()</span></span> {
        viewModelScope.launch {
            _toastMessage.value = fetchDataFromNetwork()
        }
    }
}
</code></pre>
<p>åœ¨ <code>Activity</code> ä¸­è§‚å¯Ÿ <code>toastMessage</code> å¹¶æ˜¾ç¤ºå¼¹çª—ï¼Œå®ç°åç¨‹ä¸ <code>UI</code> è§£è€¦ã€‚</p>
<h2 data-id="heading-9">æµ‹è¯•å–æ¶ˆè¡Œä¸º</h2>
<p>å–æ¶ˆé€»è¾‘çš„æµ‹è¯•è™½æœ‰éš¾åº¦ï¼Œä½†è‡³å…³é‡è¦ã€‚å¯ä½¿ç”¨ <code>kotlinx-coroutines-test</code> åº“çš„ <code>runBlockingTest</code> æ¨¡æ‹Ÿå•å…ƒæµ‹è¯•ä¸­çš„å–æ¶ˆåœºæ™¯ï¼š</p>
<pre><code class="hljs language-Kotlin" lang="Kotlin"><span class="hljs-meta">@Test</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> `fetchData cancels correctly`<span class="hljs-params">()</span></span> = runBlockingTest {
    <span class="hljs-keyword">val</span> viewModel = MyViewModel()
    <span class="hljs-keyword">val</span> job = viewModel.viewModelScope.launch {
        viewModel.fetchData()
    }
    job.cancel()
    assertEquals(<span class="hljs-string">"ä»»åŠ¡å·²å–æ¶ˆ"</span>, viewModel.status.value)
}
</code></pre>
<p>è¿™èƒ½ç¡®ä¿åç¨‹å–æ¶ˆæ—¶èƒ½æ­£ç¡®æ¸…ç†èµ„æºã€‚</p>
<h2 data-id="heading-10">å®æˆ˜</h2>
<p>å¦‚æœéœ€æ±‚éœ€è¦å®ç°â€œè·å–ç”¨æˆ·æ•°æ® â†’ å¤„ç†æ•°æ® â†’ æ›´æ–° <code>UI</code>â€çš„æµç¨‹ï¼ŒåŒæ—¶è¦é€‚é…é…ç½®å˜æ›´å’Œæ½œåœ¨çš„å–æ¶ˆæ“ä½œï¼Œä»¥ä¸‹æ˜¯ä¸€ä¸ªå…¸å‹çš„å®ç°æ–¹æ¡ˆï¼š</p>
<pre><code class="hljs language-Kotlin" lang="Kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">UserViewModel</span>(<span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> apiService: ApiService) : ViewModel() {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> _userData = MutableStateFlow&lt;User&gt;(DEF_USER)
    <span class="hljs-keyword">val</span> userData: Flow&lt;User&gt; = _userData
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> _error = MutableStateFlow&lt;String&gt;(DEF_USER)
    <span class="hljs-keyword">val</span> error: Flow&lt;String&gt; = _error

    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">fetchUserProfile</span><span class="hljs-params">(userId: <span class="hljs-type">String</span>)</span></span> {
        viewModelScope.launch {
            <span class="hljs-keyword">try</span> {
                <span class="hljs-keyword">val</span> user = withContext(Dispatchers.IO) {
                    ensureActive() <span class="hljs-comment">// æ‰§è¡Œå‰æ£€æŸ¥å–æ¶ˆçŠ¶æ€</span>
                    <span class="hljs-keyword">val</span> rawData = apiService.getUser(userId)
                    processUserData(rawData) <span class="hljs-comment">// è€—æ—¶å¤„ç†æ“ä½œ</span>
                }
                _userData.value = user
            } <span class="hljs-keyword">catch</span> (e: CancellationException) {
                _error.value = <span class="hljs-string">"ç”¨æˆ·æ•°æ®è·å–å·²å–æ¶ˆ"</span>
            } <span class="hljs-keyword">catch</span> (e: Exception) {
                _error.value = <span class="hljs-string">"è·å–ç”¨æˆ·æ•°æ®å¤±è´¥ï¼š<span class="hljs-subst">${e.message}</span>"</span>
            }
        }
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">processUserData</span><span class="hljs-params">(rawData: <span class="hljs-type">RawUserData</span>)</span></span>: User {
        <span class="hljs-keyword">return</span> withContext(Dispatchers.Default) {
            ensureActive() <span class="hljs-comment">// å¤„ç†è¿‡ç¨‹ä¸­æ£€æŸ¥å–æ¶ˆçŠ¶æ€</span>
            <span class="hljs-comment">// æ¨¡æ‹Ÿå¤æ‚æ•°æ®å¤„ç†</span>
            delay(<span class="hljs-number">2000</span>)
            User(rawData.id, rawData.name)
        }
    }
}
</code></pre>
<p>æ ¸å¿ƒè¦ç‚¹ï¼š</p>
<ul>
<li><code>ensureActive()</code> ä¼šåœ¨åç¨‹å–æ¶ˆæ—¶æŠ›å‡º <code>CancellationException</code>ï¼Œè®©å‡½æ•°å…·å¤‡å–æ¶ˆæ„ŸçŸ¥èƒ½åŠ›ï¼›</li>
<li><code>Dispatchers.IO</code> å’Œ <code>Dispatchers.Default</code> ç¡®ä¿è€—æ—¶æ“ä½œè„±ç¦»ä¸»çº¿ç¨‹ï¼›</li>
<li>é€šè¿‡ <code>Flow</code> ä¼ é€’é”™è¯¯å’Œå–æ¶ˆçŠ¶æ€ï¼Œä¿æŒ <code>UI</code> åŒæ­¥ã€‚</li>
</ul>
<h2 data-id="heading-11">é¿å‘æŒ‡å—</h2>
<ol>
<li><strong>å¿½ç•¥å–æ¶ˆæ£€æŸ¥</strong>ï¼šè€—æ—¶æŒ‚èµ·å‡½æ•°ä¸­åŠ¡å¿…é€šè¿‡ <code>isActive</code> æˆ– <code>ensureActive()</code> æ£€æŸ¥å–æ¶ˆçŠ¶æ€ï¼›</li>
<li><strong>æ»¥ç”¨ GlobalScope</strong>ï¼šåšæŒä½¿ç”¨ <code>viewModelScope</code>ï¼Œç¡®ä¿åç¨‹ä¸ç”Ÿå‘½å‘¨æœŸç»‘å®šã€‚å¦‚æœä½ çš„ä»£ç ä¸­å‡ºç°äº† <code>GlobalScope</code>ï¼Œä½ çš„ä»£ç ä¸€å®šæœ‰é—®é¢˜ï¼›</li>
<li><strong>å¿˜è®°å¤„ç†å¼‚å¸¸</strong>ï¼šåŠ¡å¿…å°† <code>CancellationException</code> ä¸å…¶ä»–å¼‚å¸¸åˆ†å¼€æ•è·ï¼Œæ›´é€šç”¨çš„åšæ³•å°±æ˜¯é‡æ–°æŠ›å‡ºï¼›</li>
<li><strong>é˜»å¡ä¸»çº¿ç¨‹</strong>ï¼šé <code>UI</code> æ“ä½œéœ€é€šè¿‡ <code>withContext</code> åˆ‡æ¢åˆ°åˆé€‚çš„è°ƒåº¦å™¨ã€‚</li>
</ol>
<h2 data-id="heading-12">æ€»ç»“</h2>
<p>æŒæ¡ <code>viewModelScope</code> å–æ¶ˆæ“ä½œçš„æ ¸å¿ƒï¼Œåœ¨äºç†è§£ç”Ÿå‘½å‘¨æœŸã€ç¼–å†™æ”¯æŒå–æ¶ˆçš„ä»£ç ï¼Œå¹¶ä¼˜é›…å¤„ç†è¾¹ç•Œæƒ…å†µã€‚</p>
<p>éµå¾ªè¿™äº›æœ€ä½³å®è·µâ€”â€”ç¼–å†™åä½œå¼æŒ‚èµ·å‡½æ•°ã€åˆ©ç”¨ç»“æ„åŒ–å¹¶å‘ã€å¦¥å–„å¤„ç†å¼‚å¸¸ã€é¿å…æŒæœ‰ <code>UI</code> å¼•ç”¨ï¼Œä½ å°±èƒ½å¼€å‘å‡ºå¥å£®ä¸”é«˜æ•ˆçš„ <code>Android</code> åº”ç”¨ã€‚</p>
<p>ä¸‹æ¬¡é‡åˆ°è«åçš„å†…å­˜æ³„æ¼æˆ–å´©æºƒæ—¶ï¼Œä¸å¦¨æ£€æŸ¥ä¸€ä¸‹åç¨‹ï¼šå¾€å¾€åªéœ€åšå¥½å–æ¶ˆå¤„ç†ï¼Œå°±èƒ½è§£å†³é—®é¢˜ã€‚</p>
<p>æˆ‘é©¬ä¸ŠæŠŠè¿™ç¯‡æ–‡ç« å‘ç»™æˆ‘çš„åŒäº‹ï¼Œå…å¾—åæ‚£æ— ç©·ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Codex App å‘å¸ƒï¼šè‡ªåŠ¨åŒ– + Skillsï¼Œè®©å·¥ä½œäº¤ç»™æ™ºèƒ½ä½“]]></title>    <link>https://juejin.cn/post/7602553969970675766</link>    <guid>https://juejin.cn/post/7602553969970675766</guid>    <pubDate>2026-02-04T08:56:28.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602553969970675766" data-draft-id="7602553969970659382" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Codex App å‘å¸ƒï¼šè‡ªåŠ¨åŒ– + Skillsï¼Œè®©å·¥ä½œäº¤ç»™æ™ºèƒ½ä½“"/> <meta itemprop="keywords" content="åç«¯,ç¨‹åºå‘˜,äº§å“"/> <meta itemprop="datePublished" content="2026-02-04T08:56:28.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ‘†çƒ‚å·¥ç¨‹å¸ˆ"/> <meta itemprop="url" content="https://juejin.cn/user/1552933235470589"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Codex App å‘å¸ƒï¼šè‡ªåŠ¨åŒ– + Skillsï¼Œè®©å·¥ä½œäº¤ç»™æ™ºèƒ½ä½“
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1552933235470589/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ‘†çƒ‚å·¥ç¨‹å¸ˆ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T08:56:28.000Z" title="Wed Feb 04 2026 08:56:28 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ€è¿‘ OpenAI çš„ Codex æ›´æ–°äº†ï¼Œå¹¶ä¸”å‘å¸ƒäº† Codex åº”ç”¨ç‰ˆï¼ˆç›®å‰ä»…æ”¯æŒ mac ç”µè„‘ï¼Œ windows/linux ç‰ˆæœ¬éƒ½æ²¡æœ‰æ¨å‡ºï¼‰ã€‚</p>
<p>è¿™æ¬¡å‘å¸ƒçš„ <strong>Codex åº”ç”¨ä¸æ˜¯ IDEï¼Œä¸æ˜¯ CLIï¼Œè€Œæ˜¯ä¸€ä¸ªä»£ç†å¼ç¼–ç¨‹çš„æŒ‡æŒ¥ä¸­å¿ƒ</strong>ã€‚</p>
<p>åŒæ—¶ä¹Ÿå¼€å¯äº†ä¿ƒé”€æ´»åŠ¨ï¼Œåªè¦å®‰è£… Codex åº”ç”¨ç‰ˆå°±å¯ä»¥äº«å—ï¼š</p>
<ul>
<li>ChatGPT å…è´¹ç”¨æˆ· å’Œ Go ç”¨æˆ· å¯ä»¥è·å¾— 1ä¸ªæœˆçš„ Codex ä½¿ç”¨æƒ</li>
<li>æ‰€æœ‰ä»˜è´¹è®¡åˆ’ï¼ˆProã€ Plusã€ Businessï¼‰ç”¨æˆ·éƒ½è·å¾— Codex 2å€çš„é¢åº¦ï¼ŒæŒç»­2ä¸ªæœˆã€‚</li>
</ul>
<p>æˆ‘ç«‹é©¬ä» vscode çš„ codex è½¬ç§»åˆ° codex åº”ç”¨ï¼Œé¢åº¦ä¸ä»…å……è¶³ï¼Œ<strong>è€Œä¸” GPT-5.2-Codex å’Œ GPT-5.2 é€Ÿåº¦ä¹Ÿæå‡äº†40%ã€‚</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7f21a830129b46308c7755781bc9c32d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pGG54OC5bel56iL5biI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770800188&amp;x-signature=6eKNPD8YupxO4NK89DGOLUjzH1w%3D" alt="" loading="lazy"/></p>
<p>å½“ç„¶è¿™æ¬¡é¢åº¦å’Œé€Ÿåº¦çš„æå‡ä¸å±€é™äº Codex åº”ç”¨ï¼Œåœ¨ Codex CLI åŒæ ·å¯ä»¥äº«å—ã€‚</p>
<h2 data-id="heading-0">é¢åº¦å’Œé€Ÿåº¦æå‡ã€Juice ä¸‹é™</h2>
<p>ä½†æ˜¯é€Ÿåº¦çš„æå‡æœ‰ç‚¹ä¸å¯¹åŠ²ï¼Œå› ä¸º Codex å…è´¹ç”¨æˆ·çš„å¢é•¿ï¼Œä¸ºäº†å¹³è¡¡è®¡ç®—èµ„æºï¼Œ<strong>æ¨ç†çš„ Juice å€¼ ä¹Ÿä¸‹é™äº†ä¸€åŠ</strong>ï¼Œä»è€Œæå‡äº† 40% çš„é€Ÿåº¦ ï¼Ÿ</p>
<p>ä¹Ÿå°±æ˜¯ Codex å¯èƒ½ä¼šæ—¶ä¸æ—¶å‡ºç°æ‡’æƒ°çš„è¡Œä¸ºï¼Œä¸ä¼šè¯»å–æ›´å¤šçš„æ–‡ä»¶å†…å®¹ï¼Œè€Œæ˜¯å¿«é€Ÿçš„è¾“å‡ºå†™å®Œä»£ç äº†ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6a13105dbb484f8fa64e11514fdc7374~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pGG54OC5bel56iL5biI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770800188&amp;x-signature=Y1WXjZKAXDibKSZd0JVOPx4RMMU%3D" alt="" loading="lazy"/></p>
<p>å…è´¹ç‰ˆ å’Œ Go ç‰ˆæœ¬çš„ Juice å€¼ä¸€ç›´å¾ˆä½çš„ï¼Œ<strong>å¦‚æœä½ éœ€è¦ä½“éªŒå¥½ä¸€äº›çš„ Codex ç¼–ç¨‹ï¼Œå»ºè®®é€‰æ‹©æ¨¡å‹ GPT-5.2-Codexï¼Œæ¨ç†é€‰æ‹© è¶…é«˜ï¼ˆExtra Highï¼‰</strong>ï¼Œä»˜è´¹ç”¨æˆ·çš„é¢åº¦å·²ç»ç¿»å€äº†ï¼Œé€‰æ‹©è¶…é«˜æ¨¡å¼å¯ä»¥ä½¿ç”¨ä¸€æ®µæ—¶é—´ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/38d5f031e7594e5ca55cfd67dbba4175~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pGG54OC5bel56iL5biI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770800188&amp;x-signature=TKRcVsFlLy6cQSYd4bh9YJdYQPY%3D" alt="" loading="lazy"/></p>
<p>å¯¹äº†ï¼Œå¦‚æœä½ ä¸çŸ¥é“å›½å†…å¦‚ä½•å‡çº§è‡ªå·±çš„ ChatGPT çš„è¯ï¼Œå¯ä»¥çœ‹ä¸€ä¸‹è¿™ä¸ªä¸€é”®å‡çº§ç³»ç»Ÿ:</p>
<blockquote>
<p>GPT å‡çº§ç³»ç»Ÿï¼š<strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fupchatgpt.com" target="_blank" title="https://upchatgpt.com" ref="nofollow noopener noreferrer">upchatgpt.com</a></strong></p>
</blockquote>
<p>ç°åœ¨å¤–é¢çš„ GPT å‡çº§é±¼é¾™æ··æ‚ï¼Œå¤ªå¤šå˜¿å……å’Œ0å…ƒè´­äº†ï¼Œå¾ˆå®¹æ˜“å°±å¯¼è‡´ä½ çš„è´¦å·è¢«å°äº†ã€‚</p>
<p>æ‰¾ä¸€ä¸ªæ­£è§„æ¸ é“ï¼Œç¨³å®šå……å€¼çš„å¹¶ä¸ç®€å•äº†ï¼Œè®¤å‡†å½“å‰è¿™ä¸ªç³»ç»Ÿï¼Œå·²ç»ç¨³å®šè¿è¡Œäº†å¥½é•¿æ—¶é—´ã€‚</p>
<h2 data-id="heading-1">Codex åº”ç”¨çš„æ–°åŠŸèƒ½ï¼š</h2>
<ul>
<li>å†…ç½®å·¥ä½œæ ‘ï¼ˆworktreeï¼‰ï¼šä½¿å¤šä¸ªä»£ç†èƒ½å¤Ÿæ— å†²çªåœ°å·¥ä½œ</li>
<li>è®¡åˆ’æ¨¡å¼ï¼šè¾“å…¥ /plan ä¸ Codex è¿›è¡Œæ¥å›äº¤æµ</li>
<li>é£æ ¼ï¼šå¯ä»¥é€‰æ‹©é€‚åˆä½ é£æ ¼çš„äº’åŠ¨æ–¹å¼</li>
<li>Skillsï¼šè¿æ¥ä½ å·²ä½¿ç”¨çš„skillï¼Œå¹¶è¶…è¶Šç¼–å†™ä»£ç </li>
<li>è‡ªåŠ¨åŒ–ï¼šåœ¨åå°å§”æ´¾é‡å¤çš„å‘¨æœŸæ€§ä»»åŠ¡</li>
</ul>
<p>åœ¨ Codex çš„åº”ç”¨é‡Œï¼Œä½ å¯ä»¥åˆ›å»º<strong>è‡ªåŠ¨åŒ–ä»»åŠ¡</strong>ã€‚å…ˆæŠŠè§„åˆ™å’Œç›®æ ‡è®¾ç½®å¥½ï¼Œä¹‹åå¾ˆå¤šäº‹æƒ… Codex å¯ä»¥<strong>ä¸ç”¨ä½ æ¯æ¬¡éƒ½å¼€å£æé†’</strong>ï¼Œè‡ªå·±æŒ‰æ—¶/æŒ‰æ¡ä»¶å»æ‰§è¡Œã€‚</p>
<p>å®ƒç‰¹åˆ«é€‚åˆåšä¸€äº›â€œæ¯å¤©éƒ½è¦åšã€åˆå¾ˆè€—ç²¾åŠ›â€çš„å·¥ç¨‹æ‚æ´»ï¼Œæ¯”å¦‚ï¼š</p>
<ul>
<li>é—®é¢˜åˆ†æµï¼šæ–°æ¥çš„ issue / å·¥å•å…ˆå¸®ä½ åˆ†ç±»ã€æ‰“æ ‡ç­¾ã€åˆ†é…è´Ÿè´£äºº</li>
<li>å‘Šè­¦ç›‘æ§ï¼šçº¿ä¸Šä¸€æŠ¥é”™æˆ–æŒ‡æ ‡å¼‚å¸¸ï¼Œè‡ªåŠ¨é€šçŸ¥åˆ°å¯¹åº”ç¾¤/è´Ÿè´£äººï¼Œå¹¶é™„ä¸Šæ’æŸ¥çº¿ç´¢</li>
<li>CI/CDï¼šä»£ç ä¸€åˆå¹¶å°±è‡ªåŠ¨è·‘æµ‹è¯•ã€æ„å»ºã€å‘å¸ƒï¼Œå¤±è´¥äº†è¿˜èƒ½æŠŠåŸå› æ€»ç»“å‡ºæ¥</li>
</ul>
<p><strong>æŠŠé‡å¤æ€§çš„æ—¥å¸¸ç»´æŠ¤äº¤ç»™ Codexï¼Œä½ æŠŠæ³¨æ„åŠ›ç•™ç»™çœŸæ­£çš„å¼€å‘å’Œè®¾è®¡å†³ç­–ã€‚</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/03eecd6b15d44aa2a17042cb14b2bf71~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pGG54OC5bel56iL5biI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770800188&amp;x-signature=8SMGlE5HshPAxfdBa8UmKtI8oN0%3D" alt="" loading="lazy"/></p>
<p>ä½ è¿˜å¯ä»¥ç»™ Codex åˆ›å»ºå„ç§ Skillï¼ˆæŠ€èƒ½ï¼‰ã€‚ <strong>è®© Codex ä¸åªâ€œå†™ä»£ç â€ï¼Œè€Œæ˜¯â€œå‚ä¸æŠŠäº§å“åšå‡ºæ¥â€ã€‚</strong></p>
<p>æŠŠå›¢é˜Ÿå¸¸ç”¨çš„å·¥ä½œæ–¹å¼ã€æ ‡å‡†æµç¨‹ã€è¾“å‡ºæ ¼å¼ï¼Œåšæˆä¸€å¥—â€œå¯å¤ç”¨èƒ½åŠ›â€ï¼Œè®©å®ƒæ¯æ¬¡éƒ½æŒ‰ä½ ä»¬çš„ä¹ æƒ¯æ¥åšäº‹ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f18737d568564560a51010ac4633a5b1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pGG54OC5bel56iL5biI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770800188&amp;x-signature=N0TSnEpg%2BMh5IexHBfAEzaDqQaM%3D" alt="" loading="lazy"/></p>
<p>å¹³æ—¶ç¼–ç¨‹æ—¶ï¼Œç»å¸¸ç¢°åˆ° Codex è¯¢é—®ä½ çš„æƒé™æ—¶ï¼Œä½ è§‰å¾—éº»çƒ¦çš„è¯ï¼Œå¯ä»¥å¼€å¯ <code>full access</code> ç»™ä»–å…¨éƒ¨è®¿é—®çš„æƒé™ï¼Œåç»­å°±ä¼šä¸€ç›´è¿è¡Œç¼–ç ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/95ac1b0e7f354934b0d43423f21cbc7c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pGG54OC5bel56iL5biI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770800188&amp;x-signature=UgJYGrFDdmxG50%2BiFS6gzu5MpNY%3D" alt="" loading="lazy"/></p>
<p>Codex åŸºäºä¸€ä¸ªç®€å•çš„å‰æï¼šæ‰€æœ‰äº‹ç‰©éƒ½ç”±ä»£ç æ§åˆ¶ã€‚æ™ºèƒ½ä½“åœ¨æ¨ç†å’Œç”Ÿæˆä»£ç æ–¹é¢è¶Šå‡ºè‰²ï¼Œå®ƒåœ¨æ‰€æœ‰å½¢å¼çš„æŠ€æœ¯å’ŒçŸ¥è¯†å‹å·¥ä½œä¸­å°±è¶Šæœ‰èƒ½åŠ›ã€‚</p>
<p>Codex æƒ³æŠŠâ€œå¾ˆèªæ˜ä½†ä¸å¥½ç”¨çš„æ¨¡å‹â€ï¼Œå˜æˆâ€œä½ èƒ½è½»æ¾æŒ‡æŒ¥ã€å¯ç›‘ç£ã€èƒ½ç¨³å®šäº§å‡ºå¹¶æŠŠä»£ç ä¸€è·¯æ¨åˆ°äº¤ä»˜â€çš„å·¥ä½œå‹æ™ºèƒ½ä½“ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¦‚ä½•è®¾è®¡ä¸€ä¸ªæ‰›ä½åƒä¸‡çº§æµé‡çš„ç³»ç»Ÿï¼Ÿ]]></title>    <link>https://juejin.cn/post/7602497125268750342</link>    <guid>https://juejin.cn/post/7602497125268750342</guid>    <pubDate>2026-02-04T02:23:25.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602497125268750342" data-draft-id="7602512064976551999" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¦‚ä½•è®¾è®¡ä¸€ä¸ªæ‰›ä½åƒä¸‡çº§æµé‡çš„ç³»ç»Ÿï¼Ÿ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-02-04T02:23:25.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è‹ä¸‰è¯´æŠ€æœ¯"/> <meta itemprop="url" content="https://juejin.cn/user/465848661970824"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¦‚ä½•è®¾è®¡ä¸€ä¸ªæ‰›ä½åƒä¸‡çº§æµé‡çš„ç³»ç»Ÿï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/465848661970824/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è‹ä¸‰è¯´æŠ€æœ¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T02:23:25.000Z" title="Wed Feb 04 2026 02:23:25 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯è‹ä¸‰ã€‚</p>
<p>ä»Šå¤©è·Ÿå¤§å®¶èŠä¸€ä¸‹å¾ˆå¤šå°ä¼™ä¼´éƒ½æ¯”è¾ƒå…³å¿ƒçš„è¯é¢˜ï¼šå¦‚ä½•è®¾è®¡ä¸€ä¸ªæ‰›ä½åƒä¸‡çº§æµé‡çš„ç³»ç»Ÿï¼Ÿ</p>
<p>è¿™ä¸ªè¯é¢˜æ— è®ºåœ¨é¢è¯•ï¼Œè¿˜æ˜¯åœ¨å®é™…å·¥ä½œä¸­ï¼Œéƒ½éå¸¸å¸¸è§ã€‚</p>
<p>ä»Šå¤©è¿™ç¯‡æ–‡ç« å°±ä¸“é—¨è·Ÿå¤§å®¶èŠèŠè¿™ä¸ªé—®é¢˜ï¼Œå¸Œæœ›å¯¹ä½ ä¼šæœ‰æ‰€å¸®åŠ©ã€‚</p>
<h2 data-id="heading-1">01 ä¸‰ä¸ªå…³é”®ç‚¹</h2>
<p>åœ¨æ·±å…¥æŠ€æœ¯ç»†èŠ‚å‰ï¼Œæˆ‘ä»¬å…ˆè¦æ˜ç¡®è®¾è®¡åƒä¸‡çº§ç³»ç»Ÿçš„æ ¸å¿ƒç›®æ ‡ã€‚</p>
<p>è®°ä½è¿™ä¸‰ä¸ªå…³é”®ç‚¹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/62a6014e62dc49daa091c87ad5c031ce~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuP5LiJ6K-05oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770776606&amp;x-signature=XBYdJ4pk7dm0R78A0ZGYcRXtMr0%3D" alt="" loading="lazy"/></p>
<p><strong>1. é«˜æ€§èƒ½</strong>ï¼šä¸æ˜¯ç®€å•è¿½æ±‚å¿«ï¼Œè€Œæ˜¯è¦åœ¨ä¿è¯æ­£ç¡®æ€§çš„å‰æä¸‹ï¼Œç”¨æœ‰é™çš„èµ„æºå¤„ç†å°½å¯èƒ½å¤šçš„è¯·æ±‚ã€‚æˆ‘ä»¬çš„ç›®æ ‡æ˜¯æ ¸å¿ƒæ¥å£P99å“åº”æ—¶é—´ä½äº100æ¯«ç§’ï¼Œå•æœºQPSä¸ä½äº5000ã€‚</p>
<p><strong>2. é«˜å¯ç”¨</strong>ï¼šç³»ç»Ÿéœ€è¦å…·å¤‡æ•…éšœè‡ªæ„ˆèƒ½åŠ›ã€‚æˆ‘ä»¬è¿½æ±‚çš„æ˜¯â€œä¸¤ä¸ª9â€æ‰“åº•ï¼Œâ€œä¸‰ä¸ª9â€èµ·æ­¥ï¼Œâ€œå››ä¸ª9â€åŠªåŠ›çš„ç›®æ ‡ï¼ˆå³99.99%å¯ç”¨æ€§ï¼Œå…¨å¹´ä¸å¯ç”¨æ—¶é—´ä¸è¶…è¿‡53åˆ†é’Ÿï¼‰ã€‚</p>
<p><strong>3. å¯æ‰©å±•</strong>ï¼šç³»ç»Ÿè¦èƒ½éšç€ä¸šåŠ¡å¢é•¿è€Œå¹³æ»‘æ‰©å±•ï¼Œä¸”æ‰©å±•æˆæœ¬è¦å¯æ§ã€‚è¿™é‡ŒåŒ…æ‹¬æ°´å¹³æ‰©å±•ï¼ˆåŠ æœºå™¨ï¼‰å’Œå‚ç›´æ‰©å±•ï¼ˆä¼˜åŒ–å•æœºæ€§èƒ½ï¼‰ä¸¤ä¸ªç»´åº¦ã€‚</p>
<h2 data-id="heading-2">02 æ¶æ„æ¼”è¿›ï¼šä»å•ä½“åˆ°åƒä¸‡çº§çš„å››æ­¥èµ°</h2>
<p>è®©æˆ‘ä»¬ä»ä¸€ä¸ªæœ€ç®€å•çš„ç”µå•†ç³»ç»Ÿå¼€å§‹ï¼Œçœ‹çœ‹å®ƒæ˜¯å¦‚ä½•ä¸€æ­¥æ­¥æ¼”è¿›åˆ°æ”¯æ’‘åƒä¸‡çº§æµé‡çš„ã€‚</p>
<h3 data-id="heading-3">é˜¶æ®µä¸€ï¼šå•æœºå•ä½“æ¶æ„ï¼ˆæ—¥è¯·æ±‚&lt;10ä¸‡ï¼‰</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æœ€ç®€å•çš„Spring Bootå•ä½“åº”ç”¨</span>
<span class="hljs-meta">@SpringBootApplication</span>
<span class="hljs-meta">@RestController</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MonolithicApp</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> ProductService productService;
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> OrderService orderService;
    
    <span class="hljs-meta">@GetMapping("/product/{id}")</span>
    <span class="hljs-keyword">public</span> Product <span class="hljs-title function_">getProduct</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable</span> Long id)</span> {
        <span class="hljs-keyword">return</span> productService.getById(id);
    }
    
    <span class="hljs-meta">@PostMapping("/order")</span>
    <span class="hljs-keyword">public</span> Order <span class="hljs-title function_">createOrder</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> OrderRequest request)</span> {
        <span class="hljs-keyword">return</span> orderService.createOrder(request);
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        SpringApplication.run(MonolithicApp.class, args);
    }
}
</code></pre>
<p><strong>é—®é¢˜åˆ†æ</strong>ï¼š</p>
<ul>
<li>æ‰€æœ‰æœåŠ¡éƒ½åœ¨ä¸€ä¸ªJVMè¿›ç¨‹ä¸­ï¼Œä¸€ä¸ªbugå¯èƒ½å¯¼è‡´æ•´ä¸ªç³»ç»Ÿå´©æºƒ</li>
<li>æ•°æ®åº“æˆä¸ºå•ç‚¹ç“¶é¢ˆï¼Œæ— æ³•æ°´å¹³æ‰©å±•</li>
<li>å‘å¸ƒæ—¶éœ€è¦åœæœºï¼Œå½±å“ç”¨æˆ·ä½“éªŒ</li>
</ul>
<h3 data-id="heading-4">é˜¶æ®µäºŒï¼šå‚ç›´æ‹†åˆ†ï¼ˆæ—¥è¯·æ±‚10ä¸‡-100ä¸‡ï¼‰</h3>
<p>å½“ç³»ç»Ÿå‹åŠ›å¢å¤§æ—¶ï¼Œæˆ‘ä»¬é¦–å…ˆè¿›è¡Œå‚ç›´æ‹†åˆ†ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// å•†å“æœåŠ¡ - ç‹¬ç«‹éƒ¨ç½²</span>
<span class="hljs-meta">@SpringBootApplication</span>
<span class="hljs-meta">@RestController</span>
<span class="hljs-meta">@RequestMapping("/product")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ProductServiceApp</span> {
    
    <span class="hljs-meta">@GetMapping("/{id}")</span>
    <span class="hljs-keyword">public</span> Product <span class="hljs-title function_">getProduct</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable</span> Long id)</span> {
        <span class="hljs-comment">// ç›´æ¥æŸ¥è¯¢æ•°æ®åº“</span>
        <span class="hljs-keyword">return</span> productRepository.findById(id).orElse(<span class="hljs-literal">null</span>);
    }
}

<span class="hljs-comment">// è®¢å•æœåŠ¡ - ç‹¬ç«‹éƒ¨ç½²  </span>
<span class="hljs-meta">@SpringBootApplication</span>
<span class="hljs-meta">@RestController</span>
<span class="hljs-meta">@RequestMapping("/order")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderServiceApp</span> {
    
    <span class="hljs-meta">@PostMapping("/")</span>
    <span class="hljs-keyword">public</span> Order <span class="hljs-title function_">createOrder</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> OrderRequest request)</span> {
        <span class="hljs-comment">// é€šè¿‡HTTPè°ƒç”¨å•†å“æœåŠ¡</span>
        <span class="hljs-type">Product</span> <span class="hljs-variable">product</span> <span class="hljs-operator">=</span> restTemplate.getForObject(
            <span class="hljs-string">"http://product-service/product/"</span> + request.getProductId(),
            Product.class
        );
        <span class="hljs-comment">// åˆ›å»ºè®¢å•é€»è¾‘</span>
        <span class="hljs-keyword">return</span> orderRepository.save(order);
    }
}
</code></pre>
<p><strong>å…³é”®æ”¹è¿›</strong>ï¼š</p>
<ol>
<li>æ•°æ®åº“æŒ‰ä¸šåŠ¡æ‹†åˆ†ï¼šå•†å“åº“ã€è®¢å•åº“åˆ†ç¦»</li>
<li>æœåŠ¡ç‹¬ç«‹éƒ¨ç½²ï¼Œæ•…éšœéš”ç¦»</li>
<li>å¯ä»¥é’ˆå¯¹ä¸åŒæœåŠ¡è¿›è¡Œé’ˆå¯¹æ€§ä¼˜åŒ–</li>
</ol>
<h3 data-id="heading-5">é˜¶æ®µä¸‰ï¼šæ°´å¹³æ‰©å±•ä¸æœåŠ¡æ²»ç†ï¼ˆæ—¥è¯·æ±‚100ä¸‡-500ä¸‡ï¼‰</h3>
<p>å½“å•å®ä¾‹æ— æ³•æ‰¿è½½æµé‡æ—¶ï¼Œæˆ‘ä»¬å¼€å§‹æ°´å¹³æ‰©å±•ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># Kuberneteséƒ¨ç½²é…ç½®æ–‡ä»¶ç¤ºä¾‹</span>
<span class="hljs-attr">apiVersion:</span> <span class="hljs-string">apps/v1</span>
<span class="hljs-attr">kind:</span> <span class="hljs-string">Deployment</span>
<span class="hljs-attr">metadata:</span>
  <span class="hljs-attr">name:</span> <span class="hljs-string">product-service</span>
<span class="hljs-attr">spec:</span>
  <span class="hljs-attr">replicas:</span> <span class="hljs-number">3</span>  <span class="hljs-comment"># 3ä¸ªå®ä¾‹</span>
  <span class="hljs-attr">selector:</span>
    <span class="hljs-attr">matchLabels:</span>
      <span class="hljs-attr">app:</span> <span class="hljs-string">product-service</span>
  <span class="hljs-attr">template:</span>
    <span class="hljs-attr">metadata:</span>
      <span class="hljs-attr">labels:</span>
        <span class="hljs-attr">app:</span> <span class="hljs-string">product-service</span>
    <span class="hljs-attr">spec:</span>
      <span class="hljs-attr">containers:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">product-service</span>
        <span class="hljs-attr">image:</span> <span class="hljs-string">product-service:latest</span>
        <span class="hljs-attr">resources:</span>
          <span class="hljs-attr">limits:</span>
            <span class="hljs-attr">memory:</span> <span class="hljs-string">"512Mi"</span>
            <span class="hljs-attr">cpu:</span> <span class="hljs-string">"500m"</span>
        <span class="hljs-attr">readinessProbe:</span>  <span class="hljs-comment"># å°±ç»ªæ¢é’ˆ</span>
          <span class="hljs-attr">httpGet:</span>
            <span class="hljs-attr">path:</span> <span class="hljs-string">/actuator/health</span>
            <span class="hljs-attr">port:</span> <span class="hljs-number">8080</span>
          <span class="hljs-attr">initialDelaySeconds:</span> <span class="hljs-number">30</span>
          <span class="hljs-attr">periodSeconds:</span> <span class="hljs-number">10</span>
        <span class="hljs-attr">livenessProbe:</span>   <span class="hljs-comment"># å­˜æ´»æ¢é’ˆ</span>
          <span class="hljs-attr">httpGet:</span>
            <span class="hljs-attr">path:</span> <span class="hljs-string">/actuator/health</span>
            <span class="hljs-attr">port:</span> <span class="hljs-number">8080</span>
          <span class="hljs-attr">initialDelaySeconds:</span> <span class="hljs-number">60</span>
          <span class="hljs-attr">periodSeconds:</span> <span class="hljs-number">10</span>
<span class="hljs-meta">---</span>
<span class="hljs-attr">apiVersion:</span> <span class="hljs-string">v1</span>
<span class="hljs-attr">kind:</span> <span class="hljs-string">Service</span>
<span class="hljs-attr">metadata:</span>
  <span class="hljs-attr">name:</span> <span class="hljs-string">product-service</span>
<span class="hljs-attr">spec:</span>
  <span class="hljs-attr">selector:</span>
    <span class="hljs-attr">app:</span> <span class="hljs-string">product-service</span>
  <span class="hljs-attr">ports:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">port:</span> <span class="hljs-number">80</span>
    <span class="hljs-attr">targetPort:</span> <span class="hljs-number">8080</span>
  <span class="hljs-attr">type:</span> <span class="hljs-string">ClusterIP</span>
</code></pre>
<p><strong>å…³é”®æ”¹è¿›</strong>ï¼š</p>
<ol>
<li>æœåŠ¡å¤šå®ä¾‹éƒ¨ç½²ï¼Œè´Ÿè½½å‡è¡¡</li>
<li>å¼•å…¥æœåŠ¡æ³¨å†Œä¸å‘ç°ï¼ˆå¦‚Nacosã€Consulï¼‰</li>
<li>å¢åŠ å¥åº·æ£€æŸ¥ï¼Œå®ç°æ•…éšœè‡ªåŠ¨è½¬ç§»</li>
<li>é…ç½®ä¸­å¿ƒç»Ÿä¸€ç®¡ç†é…ç½®</li>
</ol>
<h3 data-id="heading-6">é˜¶æ®µå››ï¼šå…¨é“¾è·¯ä¼˜åŒ–ï¼ˆæ—¥è¯·æ±‚500ä¸‡ä»¥ä¸Šï¼‰</h3>
<p>å½“ç³»ç»Ÿè§„æ¨¡ç»§ç»­æ‰©å¤§ï¼Œæˆ‘ä»¬éœ€è¦æ›´ç²¾ç»†çš„ä¼˜åŒ–ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d57fed678ad7445eb99e2e362c586080~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuP5LiJ6K-05oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770776606&amp;x-signature=XBPgxLcHgdmKyxIyKpZfWfI%2BKTI%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e9ffdbac90324ad29f67a15cf5a13ac3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuP5LiJ6K-05oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770776606&amp;x-signature=q9ROmgL%2FTnK1L6nWKW4i%2B9gX6wk%3D" alt="" loading="lazy"/></p>
<p>è¿™ä¸ªæ¶æ„å›¾å±•ç¤ºäº†ä¸€ä¸ªå®Œæ•´çš„åƒä¸‡çº§ç³»ç»Ÿæ¶æ„ã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ·±å…¥æ¯ä¸ªå…³é”®ç»„ä»¶ã€‚</p>
<h2 data-id="heading-7">03 è´Ÿè½½å‡è¡¡ï¼šæµé‡åˆ†å‘çš„é«˜å¯ç”¨ä¹‹é“</h2>
<p>è´Ÿè½½å‡è¡¡æ˜¯åƒä¸‡çº§ç³»ç»Ÿçš„ç¬¬ä¸€é“é˜²çº¿ã€‚æˆ‘ä»¬é€šå¸¸é‡‡ç”¨å¤šå±‚è´Ÿè½½å‡è¡¡ç­–ç•¥ï¼š</p>
<h3 data-id="heading-8">å››å±‚è´Ÿè½½å‡è¡¡ï¼ˆLVS/ELBï¼‰</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># LVS DRæ¨¡å¼é…ç½®ç¤ºä¾‹</span>
<span class="hljs-comment"># çœŸå®æœåŠ¡å™¨é…ç½®å›ç¯æ¥å£</span>
ifconfig lo:0 192.168.1.100 netmask 255.255.255.255 up
route add -host 192.168.1.100 dev lo:0

<span class="hljs-comment"># é…ç½®ARPæŠ‘åˆ¶</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"1"</span> &gt; /proc/sys/net/ipv4/conf/lo/arp_ignore
<span class="hljs-built_in">echo</span> <span class="hljs-string">"2"</span> &gt; /proc/sys/net/ipv4/conf/lo/arp_announce
<span class="hljs-built_in">echo</span> <span class="hljs-string">"1"</span> &gt; /proc/sys/net/ipv4/conf/all/arp_ignore
<span class="hljs-built_in">echo</span> <span class="hljs-string">"2"</span> &gt; /proc/sys/net/ipv4/conf/all/arp_announce

<span class="hljs-comment"># LVS Directoré…ç½®</span>
ipvsadm -A -t 192.168.1.100:80 -s wrr
ipvsadm -a -t 192.168.1.100:80 -r 192.168.1.10:8080 -g -w 1
ipvsadm -a -t 192.168.1.100:80 -r 192.168.1.11:8080 -g -w 2
</code></pre>
<h3 data-id="heading-9">ä¸ƒå±‚è´Ÿè½½å‡è¡¡ï¼ˆNginx/APIç½‘å…³ï¼‰</h3>
<pre><code class="hljs language-nginx" lang="nginx"># Nginxè´Ÿè½½å‡è¡¡é…ç½®
upstream backend_servers {
    # åŠ æƒè½®è¯¢ï¼Œé…åˆå¥åº·æ£€æŸ¥
    server 192.168.1.10:8080 weight=3 max_fails=3 fail_timeout=30s;
    server 192.168.1.11:8080 weight=2 max_fails=3 fail_timeout=30s;
    server 192.168.1.12:8080 weight=1 max_fails=3 fail_timeout=30s;
    
    # ä¼šè¯ä¿æŒï¼ˆéœ€è¦æ—¶å¼€å¯ï¼‰
    # sticky cookie srv_id expires=1h domain=.example.com path=/;
    
    # å¤‡ä»½æœåŠ¡å™¨
    server 192.168.1.13:8080 backup;
}

server {
    listen 80;
    server_name api.example.com;
    
    # é™æµé…ç½®
    limit_req_zone $binary_remote_addr zone=api_limit:10m rate=100r/s;
    
    location /api/ {
        # åº”ç”¨é™æµ
        limit_req zone=api_limit burst=50 nodelay;
        
        # è¿æ¥è¶…æ—¶è®¾ç½®
        proxy_connect_timeout 3s;
        proxy_read_timeout 10s;
        proxy_send_timeout 10s;
        
        # è´Ÿè½½å‡è¡¡
        proxy_pass http://backend_servers;
        
        # æ•…éšœè½¬ç§»
        proxy_next_upstream error timeout invalid_header http_500 http_502 http_503;
        proxy_next_upstream_timeout 0;
        proxy_next_upstream_tries 3;
        
        # æ·»åŠ ä»£ç†å¤´
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    }
    
    # å¥åº·æ£€æŸ¥ç«¯ç‚¹
    location /health {
        access_log off;
        return 200 "healthy\n";
    }
}
</code></pre>
<h3 data-id="heading-10">ç°ä»£APIç½‘å…³ï¼ˆSpring Cloud Gatewayï¼‰</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">GatewayConfig</span> {
    
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> RouteLocator <span class="hljs-title function_">customRouteLocator</span><span class="hljs-params">(RouteLocatorBuilder builder)</span> {
        <span class="hljs-keyword">return</span> builder.routes()
            .route(<span class="hljs-string">"product_route"</span>, r -&gt; r
                .path(<span class="hljs-string">"/api/product/**"</span>)
                .filters(f -&gt; f
                    .requestRateLimiter(config -&gt; config
                        .setRateLimiter(redisRateLimiter())
                        .setKeyResolver(ipKeyResolver()))
                    .circuitBreaker(config -&gt; config
                        .setName(<span class="hljs-string">"productCircuitBreaker"</span>)
                        .setFallbackUri(<span class="hljs-string">"forward:/fallback/product"</span>))
                    .rewritePath(<span class="hljs-string">"/api/(?&lt;segment&gt;.*)"</span>, <span class="hljs-string">"/${segment}"</span>)
                )
                .uri(<span class="hljs-string">"lb://product-service"</span>))
            .route(<span class="hljs-string">"order_route"</span>, r -&gt; r
                .path(<span class="hljs-string">"/api/order/**"</span>)
                .filters(f -&gt; f
                    .requestRateLimiter(config -&gt; config
                        .setRateLimiter(redisRateLimiter())
                        .setKeyResolver(userKeyResolver()))
                    .retry(config -&gt; config
                        .setRetries(<span class="hljs-number">3</span>)
                        .setStatuses(HttpStatus.INTERNAL_SERVER_ERROR))
                )
                .uri(<span class="hljs-string">"lb://order-service"</span>))
            .build();
    }
    
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> RedisRateLimiter <span class="hljs-title function_">redisRateLimiter</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// æ¯ç§’10ä¸ªè¯·æ±‚ï¼Œçªå‘å®¹é‡20</span>
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RedisRateLimiter</span>(<span class="hljs-number">10</span>, <span class="hljs-number">20</span>, <span class="hljs-number">1</span>);
    }
    
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> KeyResolver <span class="hljs-title function_">ipKeyResolver</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> exchange -&gt; Mono.just(
            exchange.getRequest().getRemoteAddress().getAddress().getHostAddress()
        );
    }
}
</code></pre>
<h2 data-id="heading-11">04 ç¼“å­˜ç­–ç•¥ï¼šæ€§èƒ½åŠ é€Ÿçš„æ™ºèƒ½åˆ†å±‚</h2>
<p>ç¼“å­˜æ˜¯æå‡ç³»ç»Ÿæ€§èƒ½æœ€æœ‰æ•ˆçš„æ‰‹æ®µä¹‹ä¸€ã€‚åƒä¸‡çº§ç³»ç»Ÿéœ€è¦è®¾è®¡æ™ºèƒ½çš„å¤šçº§ç¼“å­˜ç­–ç•¥ã€‚</p>
<h3 data-id="heading-12">å››çº§ç¼“å­˜æ¶æ„</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/94af7efb4b914d118986805a9825e3c4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuP5LiJ6K-05oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770776606&amp;x-signature=sKizoiUNdeqhlaTVPzmlSK8mpyw%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-13">1. æœ¬åœ°ç¼“å­˜ï¼ˆCaffeineï¼‰</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LocalCacheManager</span> {
    
    <span class="hljs-comment">// ä¸€çº§ç¼“å­˜ï¼šGuava Cacheï¼ˆé€‚åˆè¾ƒå°æ•°æ®é‡ï¼‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Cache&lt;String, Object&gt; guavaCache = CacheBuilder.newBuilder()
            .maximumSize(<span class="hljs-number">10000</span>)
            .expireAfterWrite(<span class="hljs-number">5</span>, TimeUnit.MINUTES)
            .recordStats()
            .build();
    
    <span class="hljs-comment">// äºŒçº§ç¼“å­˜ï¼šCaffeineï¼ˆé«˜æ€§èƒ½ï¼ŒW-TinyLFUç®—æ³•ï¼‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Cache&lt;String, Object&gt; caffeineCache = Caffeine.newBuilder()
            .maximumSize(<span class="hljs-number">50000</span>)
            .expireAfterWrite(<span class="hljs-number">10</span>, TimeUnit.MINUTES)
            .refreshAfterWrite(<span class="hljs-number">1</span>, TimeUnit.MINUTES)
            .recordStats()
            .build();
    
    <span class="hljs-comment">// çƒ­ç‚¹æ•°æ®ç‰¹æ®Šç¼“å­˜ï¼ˆå¦‚ç§’æ€å•†å“ï¼‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Cache&lt;String, Object&gt; hotDataCache = Caffeine.newBuilder()
            .maximumSize(<span class="hljs-number">1000</span>)
            .expireAfterWrite(<span class="hljs-number">30</span>, TimeUnit.SECONDS) <span class="hljs-comment">// çƒ­ç‚¹æ•°æ®è¿‡æœŸå¿«</span>
            .recordStats()
            .build();
    
    <span class="hljs-keyword">public</span> &lt;T&gt; T <span class="hljs-title function_">getWithCache</span><span class="hljs-params">(String key, Class&lt;T&gt; clazz, 
                              Supplier&lt;T&gt; loader, CacheLevel level)</span> {
        <span class="hljs-keyword">switch</span> (level) {
            <span class="hljs-keyword">case</span> LOCAL_HOT:
                <span class="hljs-keyword">return</span> getFromHotCache(key, clazz, loader);
            <span class="hljs-keyword">case</span> LOCAL_NORMAL:
                <span class="hljs-keyword">return</span> getFromLocalCache(key, clazz, loader);
            <span class="hljs-keyword">case</span> DISTRIBUTED:
                <span class="hljs-keyword">return</span> getFromDistributedCache(key, clazz, loader);
            <span class="hljs-keyword">default</span>:
                <span class="hljs-keyword">return</span> loader.get();
        }
    }
    
    <span class="hljs-keyword">private</span> &lt;T&gt; T <span class="hljs-title function_">getFromLocalCache</span><span class="hljs-params">(String key, Class&lt;T&gt; clazz, Supplier&lt;T&gt; loader)</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">return</span> (T) caffeineCache.get(key, k -&gt; {
                <span class="hljs-type">T</span> <span class="hljs-variable">value</span> <span class="hljs-operator">=</span> loader.get();
                <span class="hljs-keyword">if</span> (value == <span class="hljs-literal">null</span>) {
                    <span class="hljs-comment">// ç¼“å­˜ç©ºå€¼ï¼Œé˜²æ­¢ç¼“å­˜ç©¿é€</span>
                    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">NullValue</span>();
                }
                <span class="hljs-keyword">return</span> value;
            });
        } <span class="hljs-keyword">catch</span> (Exception e) {
            <span class="hljs-comment">// æœ¬åœ°ç¼“å­˜å¼‚å¸¸ï¼Œé™çº§ç›´æ¥åŠ è½½</span>
            <span class="hljs-keyword">return</span> loader.get();
        }
    }
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ProductService</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> LocalCacheManager cacheManager;
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> RedisTemplate&lt;String, Product&gt; redisTemplate;
    
    <span class="hljs-keyword">public</span> Product <span class="hljs-title function_">getProductWithCache</span><span class="hljs-params">(Long productId)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">cacheKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">"product:"</span> + productId;
        
        <span class="hljs-keyword">return</span> cacheManager.getWithCache(cacheKey, Product.class, () -&gt; {
            <span class="hljs-comment">// å…ˆæŸ¥Redisåˆ†å¸ƒå¼ç¼“å­˜</span>
            <span class="hljs-type">Product</span> <span class="hljs-variable">product</span> <span class="hljs-operator">=</span> redisTemplate.opsForValue().get(cacheKey);
            <span class="hljs-keyword">if</span> (product != <span class="hljs-literal">null</span>) {
                <span class="hljs-keyword">return</span> product;
            }
            
            <span class="hljs-comment">// Redisæ²¡æœ‰ï¼ŒæŸ¥æ•°æ®åº“</span>
            product = productRepository.findById(productId).orElse(<span class="hljs-literal">null</span>);
            <span class="hljs-keyword">if</span> (product != <span class="hljs-literal">null</span>) {
                <span class="hljs-comment">// å¼‚æ­¥å›å†™åˆ°Redisï¼Œä¸é˜»å¡å½“å‰è¯·æ±‚</span>
                CompletableFuture.runAsync(() -&gt; 
                    redisTemplate.opsForValue().set(cacheKey, product, <span class="hljs-number">1</span>, TimeUnit.HOURS)
                );
            }
            
            <span class="hljs-keyword">return</span> product;
        }, CacheLevel.LOCAL_NORMAL);
    }
}
</code></pre>
<h3 data-id="heading-14">2. åˆ†å¸ƒå¼ç¼“å­˜ï¼ˆRedisé›†ç¾¤ï¼‰</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RedisConfig</span> {
    
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> RedisConnectionFactory <span class="hljs-title function_">redisConnectionFactory</span><span class="hljs-params">()</span> {
        <span class="hljs-type">RedisClusterConfiguration</span> <span class="hljs-variable">clusterConfig</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RedisClusterConfiguration</span>();
        
        <span class="hljs-comment">// é›†ç¾¤èŠ‚ç‚¹é…ç½®</span>
        clusterConfig.addClusterNode(<span class="hljs-keyword">new</span> <span class="hljs-title class_">RedisNode</span>(<span class="hljs-string">"192.168.1.100"</span>, <span class="hljs-number">6379</span>));
        clusterConfig.addClusterNode(<span class="hljs-keyword">new</span> <span class="hljs-title class_">RedisNode</span>(<span class="hljs-string">"192.168.1.101"</span>, <span class="hljs-number">6379</span>));
        clusterConfig.addClusterNode(<span class="hljs-keyword">new</span> <span class="hljs-title class_">RedisNode</span>(<span class="hljs-string">"192.168.1.102"</span>, <span class="hljs-number">6379</span>));
        
        <span class="hljs-comment">// é›†ç¾¤é…ç½®</span>
        clusterConfig.setMaxRedirects(<span class="hljs-number">3</span>); <span class="hljs-comment">// æœ€å¤§é‡å®šå‘æ¬¡æ•°</span>
        
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JedisConnectionFactory</span>(clusterConfig);
    }
    
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> RedisTemplate&lt;String, Object&gt; <span class="hljs-title function_">redisTemplate</span><span class="hljs-params">()</span> {
        RedisTemplate&lt;String, Object&gt; template = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RedisTemplate</span>&lt;&gt;();
        template.setConnectionFactory(redisConnectionFactory());
        
        <span class="hljs-comment">// ä½¿ç”¨Stringåºåˆ—åŒ–å™¨</span>
        template.setKeySerializer(<span class="hljs-keyword">new</span> <span class="hljs-title class_">StringRedisSerializer</span>());
        template.setValueSerializer(<span class="hljs-keyword">new</span> <span class="hljs-title class_">GenericJackson2JsonRedisSerializer</span>());
        
        <span class="hljs-comment">// å¼€å¯äº‹åŠ¡æ”¯æŒ</span>
        template.setEnableTransactionSupport(<span class="hljs-literal">true</span>);
        
        <span class="hljs-keyword">return</span> template;
    }
    
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> RedisCacheManager <span class="hljs-title function_">cacheManager</span><span class="hljs-params">(RedisConnectionFactory connectionFactory)</span> {
        <span class="hljs-type">RedisCacheConfiguration</span> <span class="hljs-variable">config</span> <span class="hljs-operator">=</span> RedisCacheConfiguration.defaultCacheConfig()
                .entryTtl(Duration.ofMinutes(<span class="hljs-number">30</span>)) <span class="hljs-comment">// é»˜è®¤è¿‡æœŸæ—¶é—´</span>
                .disableCachingNullValues() <span class="hljs-comment">// ä¸ç¼“å­˜nullå€¼</span>
                .serializeKeysWith(RedisSerializationContext.SerializationPair
                        .fromSerializer(<span class="hljs-keyword">new</span> <span class="hljs-title class_">StringRedisSerializer</span>()))
                .serializeValuesWith(RedisSerializationContext.SerializationPair
                        .fromSerializer(<span class="hljs-keyword">new</span> <span class="hljs-title class_">GenericJackson2JsonRedisSerializer</span>()));
        
        <span class="hljs-comment">// ä¸åŒç¼“å­˜åŒºåŸŸçš„ä¸åŒé…ç½®</span>
        Map&lt;String, RedisCacheConfiguration&gt; cacheConfigurations = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
        cacheConfigurations.put(<span class="hljs-string">"product"</span>, config.entryTtl(Duration.ofHours(<span class="hljs-number">1</span>)));
        cacheConfigurations.put(<span class="hljs-string">"user"</span>, config.entryTtl(Duration.ofDays(<span class="hljs-number">1</span>)));
        
        <span class="hljs-keyword">return</span> RedisCacheManager.builder(connectionFactory)
                .cacheDefaults(config)
                .withInitialCacheConfigurations(cacheConfigurations)
                .transactionAware()
                .build();
    }
}
</code></pre>
<h3 data-id="heading-15">3. ç¼“å­˜ç­–ç•¥ä¸é—®é¢˜è§£å†³</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CacheStrategyService</span> {
    
    <span class="hljs-comment">/**
     * é˜²æ­¢ç¼“å­˜ç©¿é€ï¼šç¼“å­˜ç©ºå€¼
     */</span>
    <span class="hljs-keyword">public</span> Product <span class="hljs-title function_">getProductWithNullCache</span><span class="hljs-params">(Long productId)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">cacheKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">"product:"</span> + productId;
        <span class="hljs-type">String</span> <span class="hljs-variable">nullCacheKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">"product_null:"</span> + productId;
        
        <span class="hljs-comment">// å…ˆæ£€æŸ¥ç©ºå€¼ç¼“å­˜</span>
        <span class="hljs-keyword">if</span> (Boolean.TRUE.equals(redisTemplate.hasKey(nullCacheKey))) {
            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>; <span class="hljs-comment">// çŸ¥é“æ˜¯ç©ºå€¼ï¼Œç›´æ¥è¿”å›ï¼Œä¸æŸ¥æ•°æ®åº“</span>
        }
        
        <span class="hljs-type">Product</span> <span class="hljs-variable">product</span> <span class="hljs-operator">=</span> redisTemplate.opsForValue().get(cacheKey);
        <span class="hljs-keyword">if</span> (product != <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">return</span> product;
        }
        
        <span class="hljs-comment">// åŠ åˆ†å¸ƒå¼é”ï¼Œé˜²æ­¢ç¼“å­˜å‡»ç©¿</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">lockKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">"lock:product:"</span> + productId;
        <span class="hljs-type">boolean</span> <span class="hljs-variable">locked</span> <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">try</span> {
            locked = tryLock(lockKey, <span class="hljs-number">3</span>, TimeUnit.SECONDS);
            <span class="hljs-keyword">if</span> (locked) {
                <span class="hljs-comment">// åŒé‡æ£€æŸ¥</span>
                product = redisTemplate.opsForValue().get(cacheKey);
                <span class="hljs-keyword">if</span> (product != <span class="hljs-literal">null</span>) {
                    <span class="hljs-keyword">return</span> product;
                }
                
                <span class="hljs-comment">// æŸ¥è¯¢æ•°æ®åº“</span>
                product = productRepository.findById(productId).orElse(<span class="hljs-literal">null</span>);
                
                <span class="hljs-keyword">if</span> (product == <span class="hljs-literal">null</span>) {
                    <span class="hljs-comment">// ç¼“å­˜ç©ºå€¼ï¼Œè¿‡æœŸæ—¶é—´çŸ­</span>
                    redisTemplate.opsForValue().set(nullCacheKey, <span class="hljs-string">"NULL"</span>, <span class="hljs-number">5</span>, TimeUnit.MINUTES);
                } <span class="hljs-keyword">else</span> {
                    <span class="hljs-comment">// ç¼“å­˜æ•°æ®</span>
                    redisTemplate.opsForValue().set(cacheKey, product, <span class="hljs-number">1</span>, TimeUnit.HOURS);
                }
                
                <span class="hljs-keyword">return</span> product;
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-comment">// æœªè·å–åˆ°é”ï¼ŒçŸ­æš‚ç­‰å¾…åé‡è¯•æˆ–è¿”å›é™çº§æ•°æ®</span>
                Thread.sleep(<span class="hljs-number">100</span>);
                <span class="hljs-keyword">return</span> getProductWithNullCache(productId);
            }
        } <span class="hljs-keyword">catch</span> (InterruptedException e) {
            Thread.currentThread().interrupt();
            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
        } <span class="hljs-keyword">finally</span> {
            <span class="hljs-keyword">if</span> (locked) {
                releaseLock(lockKey);
            }
        }
    }
    
    <span class="hljs-comment">/**
     * é˜²æ­¢ç¼“å­˜é›ªå´©ï¼šéšæœºè¿‡æœŸæ—¶é—´
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setWithRandomExpire</span><span class="hljs-params">(String key, Object value, <span class="hljs-type">long</span> baseExpire, TimeUnit unit)</span> {
        <span class="hljs-type">long</span> <span class="hljs-variable">expireTime</span> <span class="hljs-operator">=</span> unit.toMillis(baseExpire);
        
        <span class="hljs-comment">// å¢åŠ éšæœºåç§»é‡ï¼ˆÂ±20%ï¼‰</span>
        <span class="hljs-type">double</span> <span class="hljs-variable">randomFactor</span> <span class="hljs-operator">=</span> <span class="hljs-number">0.8</span> + Math.random() * <span class="hljs-number">0.4</span>; <span class="hljs-comment">// 0.8 ~ 1.2</span>
        <span class="hljs-type">long</span> <span class="hljs-variable">actualExpire</span> <span class="hljs-operator">=</span> (<span class="hljs-type">long</span>) (expireTime * randomFactor);
        
        redisTemplate.opsForValue().set(
            key, value, actualExpire, TimeUnit.MILLISECONDS
        );
    }
    
    <span class="hljs-comment">/**
     * çƒ­ç‚¹æ•°æ®å‘ç°ä¸è‡ªåŠ¨ç¼“å­˜
     */</span>
    <span class="hljs-meta">@Scheduled(fixedDelay = 60000)</span> <span class="hljs-comment">// æ¯åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">discoverHotData</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// ä»Redisç»Ÿè®¡è®¿é—®é¢‘ç‡</span>
        Set&lt;String&gt; hotKeys = findHotKeys();
        
        <span class="hljs-keyword">for</span> (String key : hotKeys) {
            <span class="hljs-comment">// å°†çƒ­ç‚¹æ•°æ®åŠ è½½åˆ°æœ¬åœ°ç¼“å­˜</span>
            <span class="hljs-type">Object</span> <span class="hljs-variable">value</span> <span class="hljs-operator">=</span> redisTemplate.opsForValue().get(key);
            <span class="hljs-keyword">if</span> (value != <span class="hljs-literal">null</span>) {
                localCache.put(key, value);
            }
        }
    }
}
</code></pre>
<h2 data-id="heading-16">05 æ•°æ®åº“è®¾è®¡ï¼šä»å•æœºåˆ°åˆ†å¸ƒå¼</h2>
<p>æ•°æ®åº“æ˜¯ç³»ç»Ÿçš„æ ¸å¿ƒï¼Œä¹Ÿæ˜¯åƒä¸‡çº§ç³»ç»Ÿæœ€éš¾æ‰©å±•çš„éƒ¨åˆ†ã€‚</p>
<h3 data-id="heading-17">è¯»å†™åˆ†ç¦»</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DataSourceConfig</span> {
    
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-meta">@Primary</span>
    <span class="hljs-keyword">public</span> DataSource <span class="hljs-title function_">dataSource</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// ä¸»ä»æ•°æ®æºé…ç½®</span>
        Map&lt;Object, Object&gt; targetDataSources = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
        
        <span class="hljs-comment">// ä¸»åº“</span>
        <span class="hljs-type">DataSource</span> <span class="hljs-variable">masterDataSource</span> <span class="hljs-operator">=</span> createDataSource(
            <span class="hljs-string">"jdbc:mysql://master-db:3306/db?useSSL=false"</span>,
            <span class="hljs-string">"master_user"</span>,
            <span class="hljs-string">"master_password"</span>
        );
        targetDataSources.put(DataSourceType.MASTER, masterDataSource);
        
        <span class="hljs-comment">// ä»åº“1</span>
        <span class="hljs-type">DataSource</span> <span class="hljs-variable">slave1DataSource</span> <span class="hljs-operator">=</span> createDataSource(
            <span class="hljs-string">"jdbc:mysql://slave1-db:3306/db?useSSL=false"</span>,
            <span class="hljs-string">"slave_user"</span>,
            <span class="hljs-string">"slave_password"</span>
        );
        targetDataSources.put(<span class="hljs-string">"slave1"</span>, slave1DataSource);
        
        <span class="hljs-comment">// ä»åº“2</span>
        <span class="hljs-type">DataSource</span> <span class="hljs-variable">slave2DataSource</span> <span class="hljs-operator">=</span> createDataSource(
            <span class="hljs-string">"jdbc:mysql://slave2-db:3306/db?useSSL=false"</span>,
            <span class="hljs-string">"slave_user"</span>,
            <span class="hljs-string">"slave_password"</span>
        );
        targetDataSources.put(<span class="hljs-string">"slave2"</span>, slave2DataSource);
        
        <span class="hljs-comment">// åŠ¨æ€æ•°æ®æº</span>
        <span class="hljs-type">DynamicDataSource</span> <span class="hljs-variable">dynamicDataSource</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DynamicDataSource</span>();
        dynamicDataSource.setDefaultTargetDataSource(masterDataSource);
        dynamicDataSource.setTargetDataSources(targetDataSources);
        
        <span class="hljs-keyword">return</span> dynamicDataSource;
    }
    
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> AbstractRoutingDataSource <span class="hljs-title function_">routingDataSource</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AbstractRoutingDataSource</span>() {
            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">protected</span> Object <span class="hljs-title function_">determineCurrentLookupKey</span><span class="hljs-params">()</span> {
                <span class="hljs-keyword">return</span> DynamicDataSourceContextHolder.getDataSourceType();
            }
        };
    }
    
    <span class="hljs-meta">@Aspect</span>
    <span class="hljs-meta">@Component</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DataSourceAspect</span> {
        
        <span class="hljs-meta">@Before("@annotation(com.example.annotation.Master)")</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setMasterDataSource</span><span class="hljs-params">()</span> {
            DynamicDataSourceContextHolder.setDataSourceType(DataSourceType.MASTER);
        }
        
        <span class="hljs-meta">@Before("@annotation(com.example.annotation.Slave)")</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setSlaveDataSource</span><span class="hljs-params">()</span> {
            <span class="hljs-comment">// éšæœºé€‰æ‹©ä»åº“</span>
            String[] slaves = {<span class="hljs-string">"slave1"</span>, <span class="hljs-string">"slave2"</span>};
            <span class="hljs-type">String</span> <span class="hljs-variable">selectedSlave</span> <span class="hljs-operator">=</span> slaves[ThreadLocalRandom.current().nextInt(slaves.length)];
            DynamicDataSourceContextHolder.setDataSourceType(selectedSlave);
        }
        
        <span class="hljs-meta">@After("@annotation(com.example.annotation.Master) || " +
               "@annotation(com.example.annotation.Slave)")</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">clearDataSource</span><span class="hljs-params">()</span> {
            DynamicDataSourceContextHolder.clearDataSourceType();
        }
    }
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderService</span> {
    
    <span class="hljs-meta">@Master</span> <span class="hljs-comment">// ä½¿ç”¨ä¸»åº“</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">createOrder</span><span class="hljs-params">(Order order)</span> {
        orderRepository.save(order); <span class="hljs-comment">// å†™æ“ä½œ</span>
    }
    
    <span class="hljs-meta">@Slave</span> <span class="hljs-comment">// ä½¿ç”¨ä»åº“</span>
    <span class="hljs-keyword">public</span> Order <span class="hljs-title function_">getOrder</span><span class="hljs-params">(Long orderId)</span> {
        <span class="hljs-keyword">return</span> orderRepository.findById(orderId).orElse(<span class="hljs-literal">null</span>); <span class="hljs-comment">// è¯»æ“ä½œ</span>
    }
}
</code></pre>
<h3 data-id="heading-18">åˆ†åº“åˆ†è¡¨</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// åˆ†ç‰‡ç­–ç•¥ï¼šç”¨æˆ·IDå–æ¨¡åˆ†ç‰‡</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserShardingStrategy</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">PreciseShardingAlgorithm</span>&lt;Long&gt; {
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">doSharding</span><span class="hljs-params">(Collection&lt;String&gt; availableTargetNames, 
                             PreciseShardingValue&lt;Long&gt; shardingValue)</span> {
        <span class="hljs-type">long</span> <span class="hljs-variable">userId</span> <span class="hljs-operator">=</span> shardingValue.getValue();
        
        <span class="hljs-comment">// åˆ†ç‰‡æ•°</span>
        <span class="hljs-type">int</span> <span class="hljs-variable">shardCount</span> <span class="hljs-operator">=</span> availableTargetNames.size();
        
        <span class="hljs-comment">// ç®€å•å–æ¨¡åˆ†ç‰‡</span>
        <span class="hljs-type">long</span> <span class="hljs-variable">shardIndex</span> <span class="hljs-operator">=</span> userId % shardCount;
        
        <span class="hljs-keyword">for</span> (String tableName : availableTargetNames) {
            <span class="hljs-keyword">if</span> (tableName.endsWith(<span class="hljs-string">"_"</span> + shardIndex)) {
                <span class="hljs-keyword">return</span> tableName;
            }
        }
        
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UnsupportedOperationException</span>(<span class="hljs-string">"æ— æ³•æ‰¾åˆ°å¯¹åº”çš„åˆ†ç‰‡è¡¨"</span>);
    }
}

<span class="hljs-comment">// åˆ†åº“åˆ†è¡¨é…ç½®</span>
<span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ShardingConfig</span> {
    
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> DataSource <span class="hljs-title function_">shardingDataSource</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> SQLException {
        <span class="hljs-comment">// æ•°æ®æºæ˜ å°„</span>
        Map&lt;String, DataSource&gt; dataSourceMap = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
        dataSourceMap.put(<span class="hljs-string">"ds0"</span>, createDataSource(<span class="hljs-string">"jdbc:mysql://db0:3306/db"</span>));
        dataSourceMap.put(<span class="hljs-string">"ds1"</span>, createDataSource(<span class="hljs-string">"jdbc:mysql://db1:3306/db"</span>));
        dataSourceMap.put(<span class="hljs-string">"ds2"</span>, createDataSource(<span class="hljs-string">"jdbc:mysql://db2:3306/db"</span>));
        
        <span class="hljs-comment">// ç”¨æˆ·è¡¨åˆ†ç‰‡è§„åˆ™</span>
        <span class="hljs-type">ShardingRuleConfiguration</span> <span class="hljs-variable">shardingRuleConfig</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ShardingRuleConfiguration</span>();
        
        <span class="hljs-comment">// ç”¨æˆ·è¡¨åˆ†è¡¨è§„åˆ™</span>
        <span class="hljs-type">TableRuleConfiguration</span> <span class="hljs-variable">userTableRuleConfig</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TableRuleConfiguration</span>(<span class="hljs-string">"user"</span>, <span class="hljs-string">"ds${0..2}.user_${0..7}"</span>);
        userTableRuleConfig.setDatabaseShardingStrategyConfig(
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">InlineShardingStrategyConfiguration</span>(<span class="hljs-string">"id"</span>, <span class="hljs-string">"ds${id % 3}"</span>)
        );
        userTableRuleConfig.setTableShardingStrategyConfig(
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">StandardShardingStrategyConfiguration</span>(<span class="hljs-string">"id"</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">UserShardingStrategy</span>())
        );
        
        <span class="hljs-comment">// è®¢å•è¡¨åˆ†è¡¨è§„åˆ™</span>
        <span class="hljs-type">TableRuleConfiguration</span> <span class="hljs-variable">orderTableRuleConfig</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TableRuleConfiguration</span>(<span class="hljs-string">"order"</span>, <span class="hljs-string">"ds${0..2}.order_${0..15}"</span>);
        orderTableRuleConfig.setDatabaseShardingStrategyConfig(
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">InlineShardingStrategyConfiguration</span>(<span class="hljs-string">"user_id"</span>, <span class="hljs-string">"ds${user_id % 3}"</span>)
        );
        orderTableRuleConfig.setTableShardingStrategyConfig(
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">InlineShardingStrategyConfiguration</span>(<span class="hljs-string">"order_id"</span>, <span class="hljs-string">"order_${order_id % 16}"</span>)
        );
        
        shardingRuleConfig.getTableRuleConfigs().add(userTableRuleConfig);
        shardingRuleConfig.getTableRuleConfigs().add(orderTableRuleConfig);
        
        <span class="hljs-comment">// åˆ›å»ºShardingSphereæ•°æ®æº</span>
        <span class="hljs-keyword">return</span> ShardingSphereDataSourceFactory.createDataSource(
            dataSourceMap, Collections.singleton(shardingRuleConfig), <span class="hljs-keyword">new</span> <span class="hljs-title class_">Properties</span>()
        );
    }
}
</code></pre>
<h3 data-id="heading-19">æ•°æ®åº“ä¼˜åŒ–å®æˆ˜</h3>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- 1. ç´¢å¼•ä¼˜åŒ–ç¤ºä¾‹</span>
<span class="hljs-comment">-- é”™è¯¯çš„ç´¢å¼•è®¾è®¡</span>
<span class="hljs-keyword">CREATE</span> INDEX idx_user_email <span class="hljs-keyword">ON</span> <span class="hljs-keyword">user</span>(email); <span class="hljs-comment">-- è¿‡é•¿çš„ç´¢å¼•</span>
<span class="hljs-keyword">CREATE</span> INDEX idx_user_status <span class="hljs-keyword">ON</span> <span class="hljs-keyword">user</span>(status); <span class="hljs-comment">-- ä½åŒºåˆ†åº¦çš„ç´¢å¼•</span>

<span class="hljs-comment">-- æ­£ç¡®çš„ç´¢å¼•è®¾è®¡</span>
<span class="hljs-comment">-- è”åˆç´¢å¼•ï¼Œæ³¨æ„å­—æ®µé¡ºåº</span>
<span class="hljs-keyword">CREATE</span> INDEX idx_user_created_status <span class="hljs-keyword">ON</span> <span class="hljs-keyword">user</span>(created_at, status);
<span class="hljs-comment">-- å‰ç¼€ç´¢å¼•ï¼Œé€‚åˆé•¿å­—æ®µ</span>
<span class="hljs-keyword">CREATE</span> INDEX idx_user_email_prefix <span class="hljs-keyword">ON</span> <span class="hljs-keyword">user</span>(email(<span class="hljs-number">20</span>));

<span class="hljs-comment">-- 2. æ…¢æŸ¥è¯¢ä¼˜åŒ–ç¤ºä¾‹</span>
<span class="hljs-comment">-- ä¼˜åŒ–å‰ï¼šå…¨è¡¨æ‰«æ</span>
EXPLAIN <span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> <span class="hljs-keyword">order</span> <span class="hljs-keyword">WHERE</span> <span class="hljs-keyword">YEAR</span>(created_at) <span class="hljs-operator">=</span> <span class="hljs-number">2024</span>;

<span class="hljs-comment">-- ä¼˜åŒ–åï¼šä½¿ç”¨ç´¢å¼•</span>
EXPLAIN <span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> <span class="hljs-keyword">order</span> 
<span class="hljs-keyword">WHERE</span> created_at <span class="hljs-operator">&gt;=</span> <span class="hljs-string">'2024-01-01'</span> 
  <span class="hljs-keyword">AND</span> created_at <span class="hljs-operator">&lt;</span> <span class="hljs-string">'2025-01-01'</span>;

<span class="hljs-comment">-- 3. åˆ†é¡µä¼˜åŒ–</span>
<span class="hljs-comment">-- ä¼ ç»Ÿåˆ†é¡µï¼ˆæ•°æ®é‡å¤§æ—¶æ…¢ï¼‰</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> <span class="hljs-keyword">user</span> <span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> id LIMIT <span class="hljs-number">1000000</span>, <span class="hljs-number">20</span>;

<span class="hljs-comment">-- ä¼˜åŒ–åˆ†é¡µï¼ˆä½¿ç”¨è¦†ç›–ç´¢å¼•ï¼‰</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> <span class="hljs-keyword">user</span> 
<span class="hljs-keyword">WHERE</span> id <span class="hljs-operator">&gt;</span> (<span class="hljs-keyword">SELECT</span> id <span class="hljs-keyword">FROM</span> <span class="hljs-keyword">user</span> <span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> id LIMIT <span class="hljs-number">1000000</span>, <span class="hljs-number">1</span>)
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> id LIMIT <span class="hljs-number">20</span>;

<span class="hljs-comment">-- 4. æ‰¹é‡æ“ä½œä¼˜åŒ–</span>
<span class="hljs-comment">-- æ‰¹é‡æ’å…¥</span>
<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> <span class="hljs-keyword">user</span> (name, email) <span class="hljs-keyword">VALUES</span> 
(<span class="hljs-string">'user1'</span>, <span class="hljs-string">'user1@example.com'</span>),
(<span class="hljs-string">'user2'</span>, <span class="hljs-string">'user2@example.com'</span>),
<span class="hljs-comment">-- ... 1000æ¡</span>
(<span class="hljs-string">'user1000'</span>, <span class="hljs-string">'user1000@example.com'</span>);

<span class="hljs-comment">-- æ‰¹é‡æ›´æ–°ï¼ˆé¿å…åœ¨å¾ªç¯ä¸­å•æ¡æ›´æ–°ï¼‰</span>
<span class="hljs-keyword">UPDATE</span> <span class="hljs-keyword">user</span> <span class="hljs-keyword">SET</span> status <span class="hljs-operator">=</span> <span class="hljs-string">'active'</span> 
<span class="hljs-keyword">WHERE</span> id <span class="hljs-keyword">IN</span> (<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, ..., <span class="hljs-number">1000</span>);
</code></pre>
<h2 data-id="heading-20">06 å¼‚æ­¥å¤„ç†ä¸æ¶ˆæ¯é˜Ÿåˆ—</h2>
<p>å¯¹äºåƒä¸‡çº§ç³»ç»Ÿï¼ŒåŒæ­¥å¤„ç†æ‰€æœ‰è¯·æ±‚æ˜¯ä¸ç°å®çš„ã€‚å¼‚æ­¥åŒ–æ˜¯æé«˜ç³»ç»Ÿååé‡çš„å…³é”®ã€‚</p>
<h3 data-id="heading-21">æ¶ˆæ¯é˜Ÿåˆ—è®¾è®¡</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">KafkaConfig</span> {
    
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> ProducerFactory&lt;String, String&gt; <span class="hljs-title function_">producerFactory</span><span class="hljs-params">()</span> {
        Map&lt;String, Object&gt; configProps = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
        configProps.put(
            ProducerConfig.BOOTSTRAP_SERVERS_CONFIG,
            <span class="hljs-string">"kafka1:9092,kafka2:9092,kafka3:9092"</span>
        );
        configProps.put(
            ProducerConfig.KEY_SERIALIZER_CLASS_CONFIG,
            StringSerializer.class
        );
        configProps.put(
            ProducerConfig.VALUE_SERIALIZER_CLASS_CONFIG,
            StringSerializer.class
        );
        <span class="hljs-comment">// é«˜ååé‡é…ç½®</span>
        configProps.put(ProducerConfig.LINGER_MS_CONFIG, <span class="hljs-number">20</span>); <span class="hljs-comment">// æ‰¹é‡å‘é€å»¶è¿Ÿ</span>
        configProps.put(ProducerConfig.BATCH_SIZE_CONFIG, <span class="hljs-number">32</span> * <span class="hljs-number">1024</span>); <span class="hljs-comment">// æ‰¹é‡å¤§å°</span>
        configProps.put(ProducerConfig.COMPRESSION_TYPE_CONFIG, <span class="hljs-string">"lz4"</span>); <span class="hljs-comment">// å‹ç¼©</span>
        
        <span class="hljs-comment">// é«˜å¯é æ€§é…ç½®</span>
        configProps.put(ProducerConfig.ACKS_CONFIG, <span class="hljs-string">"all"</span>); <span class="hljs-comment">// æ‰€æœ‰å‰¯æœ¬ç¡®è®¤</span>
        configProps.put(ProducerConfig.RETRIES_CONFIG, <span class="hljs-number">3</span>); <span class="hljs-comment">// é‡è¯•æ¬¡æ•°</span>
        configProps.put(ProducerConfig.ENABLE_IDEMPOTENCE_CONFIG, <span class="hljs-literal">true</span>); <span class="hljs-comment">// å¹‚ç­‰æ€§</span>
        
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DefaultKafkaProducerFactory</span>&lt;&gt;(configProps);
    }
    
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> KafkaTemplate&lt;String, String&gt; <span class="hljs-title function_">kafkaTemplate</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">KafkaTemplate</span>&lt;&gt;(producerFactory());
    }
}

<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderMessageService</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> KafkaTemplate&lt;String, String&gt; kafkaTemplate;
    
    <span class="hljs-comment">// é¡ºåºæ¶ˆæ¯å‘é€</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">sendOrderEvent</span><span class="hljs-params">(OrderEvent event)</span> {
        <span class="hljs-comment">// ä½¿ç”¨è®¢å•IDä½œä¸ºkeyï¼Œä¿è¯åŒä¸€è®¢å•çš„æ¶ˆæ¯é¡ºåº</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">key</span> <span class="hljs-operator">=</span> String.valueOf(event.getOrderId());
        <span class="hljs-type">String</span> <span class="hljs-variable">topic</span> <span class="hljs-operator">=</span> <span class="hljs-string">"order-events"</span>;
        
        kafkaTemplate.send(topic, key, JsonUtils.toJson(event))
            .addCallback(
                result -&gt; log.info(<span class="hljs-string">"æ¶ˆæ¯å‘é€æˆåŠŸ: {}"</span>, event),
                ex -&gt; {
                    log.error(<span class="hljs-string">"æ¶ˆæ¯å‘é€å¤±è´¥: {}"</span>, event, ex);
                    <span class="hljs-comment">// å¤±è´¥å¤„ç†ï¼šè®°å½•åˆ°æ•°æ®åº“ï¼Œå®šæ—¶é‡è¯•</span>
                    saveFailedMessage(event, ex.getMessage());
                }
            );
    }
    
    <span class="hljs-comment">// æ‰¹é‡æ¶ˆæ¯å¤„ç†</span>
    <span class="hljs-meta">@KafkaListener(topics = "order-events", 
                   containerFactory = "batchFactory")</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">processOrderEvents</span><span class="hljs-params">(List&lt;ConsumerRecord&lt;String, String&gt;&gt; records)</span> {
        List&lt;OrderEvent&gt; events = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
        
        <span class="hljs-keyword">for</span> (ConsumerRecord&lt;String, String&gt; record : records) {
            <span class="hljs-keyword">try</span> {
                <span class="hljs-type">OrderEvent</span> <span class="hljs-variable">event</span> <span class="hljs-operator">=</span> JsonUtils.fromJson(record.value(), OrderEvent.class);
                events.add(event);
            } <span class="hljs-keyword">catch</span> (Exception e) {
                log.error(<span class="hljs-string">"æ¶ˆæ¯è§£æå¤±è´¥: {}"</span>, record.value(), e);
            }
        }
        
        <span class="hljs-keyword">if</span> (!events.isEmpty()) {
            <span class="hljs-comment">// æ‰¹é‡å¤„ç†</span>
            batchProcessOrders(events);
        }
    }
    
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> ConcurrentKafkaListenerContainerFactory&lt;String, String&gt; <span class="hljs-title function_">batchFactory</span><span class="hljs-params">()</span> {
        ConcurrentKafkaListenerContainerFactory&lt;String, String&gt; factory =
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcurrentKafkaListenerContainerFactory</span>&lt;&gt;();
        factory.setConsumerFactory(consumerFactory());
        factory.setBatchListener(<span class="hljs-literal">true</span>); <span class="hljs-comment">// å¼€å¯æ‰¹é‡ç›‘å¬</span>
        factory.getContainerProperties().setPollTimeout(<span class="hljs-number">3000</span>);
        <span class="hljs-keyword">return</span> factory;
    }
}
</code></pre>
<h3 data-id="heading-22">å¼‚æ­¥å¤„ç†æ¨¡å¼</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// 1. CompletableFutureå¼‚æ­¥å¤„ç†</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AsyncOrderService</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> ThreadPoolTaskExecutor taskExecutor;
    
    <span class="hljs-keyword">public</span> CompletableFuture&lt;OrderResult&gt; <span class="hljs-title function_">createOrderAsync</span><span class="hljs-params">(OrderRequest request)</span> {
        <span class="hljs-keyword">return</span> CompletableFuture.supplyAsync(() -&gt; {
            <span class="hljs-comment">// ç¬¬ä¸€æ­¥ï¼šæ ¡éªŒ</span>
            validateOrder(request);
            
            <span class="hljs-keyword">return</span> request;
        }, taskExecutor).thenComposeAsync(validatedRequest -&gt; {
            <span class="hljs-comment">// ç¬¬äºŒæ­¥ï¼šæ‰£å‡åº“å­˜</span>
            <span class="hljs-keyword">return</span> reduceInventoryAsync(validatedRequest);
        }, taskExecutor).thenComposeAsync(inventoryResult -&gt; {
            <span class="hljs-comment">// ç¬¬ä¸‰æ­¥ï¼šç”Ÿæˆè®¢å•</span>
            <span class="hljs-keyword">return</span> generateOrderAsync(inventoryResult);
        }, taskExecutor).thenApplyAsync(order -&gt; {
            <span class="hljs-comment">// ç¬¬å››æ­¥ï¼šå‘é€é€šçŸ¥</span>
            sendNotification(order);
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">OrderResult</span>(order, <span class="hljs-string">"SUCCESS"</span>);
        }, taskExecutor).exceptionally(ex -&gt; {
            <span class="hljs-comment">// å¼‚å¸¸å¤„ç†</span>
            log.error(<span class="hljs-string">"è®¢å•åˆ›å»ºå¤±è´¥"</span>, ex);
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">OrderResult</span>(<span class="hljs-literal">null</span>, <span class="hljs-string">"FAILED: "</span> + ex.getMessage());
        });
    }
    
    <span class="hljs-comment">// 2. äº‹ä»¶é©±åŠ¨æ¶æ„</span>
    <span class="hljs-meta">@Component</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderEventPublisher</span> {
        
        <span class="hljs-meta">@Autowired</span>
        <span class="hljs-keyword">private</span> ApplicationEventPublisher eventPublisher;
        
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">createOrder</span><span class="hljs-params">(Order order)</span> {
            <span class="hljs-comment">// ä¿å­˜è®¢å•</span>
            orderRepository.save(order);
            
            <span class="hljs-comment">// å‘å¸ƒé¢†åŸŸäº‹ä»¶</span>
            eventPublisher.publishEvent(<span class="hljs-keyword">new</span> <span class="hljs-title class_">OrderCreatedEvent</span>(<span class="hljs-built_in">this</span>, order));
        }
    }
    
    <span class="hljs-meta">@Component</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderEventListener</span> {
        
        <span class="hljs-meta">@EventListener</span>
        <span class="hljs-meta">@Async</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleOrderCreated</span><span class="hljs-params">(OrderCreatedEvent event)</span> {
            <span class="hljs-type">Order</span> <span class="hljs-variable">order</span> <span class="hljs-operator">=</span> event.getOrder();
            
            <span class="hljs-comment">// å¼‚æ­¥å‘é€é‚®ä»¶</span>
            emailService.sendOrderConfirmation(order);
            
            <span class="hljs-comment">// å¼‚æ­¥æ›´æ–°ç»Ÿè®¡æ•°æ®</span>
            statisticsService.updateOrderStats(order);
            
            <span class="hljs-comment">// å¼‚æ­¥é€šçŸ¥åº“å­˜ç³»ç»Ÿ</span>
            inventoryService.notifyOrderCreated(order);
        }
    }
}
</code></pre>
<h2 data-id="heading-23">07 ç›‘æ§ä¸æ²»ç†ï¼šç³»ç»Ÿçš„çœ¼ç›å’Œå¤§è„‘</h2>
<p>æ²¡æœ‰ç›‘æ§çš„ç³»ç»Ÿå°±åƒç›²äººå¼€è½¦ã€‚åƒä¸‡çº§ç³»ç»Ÿéœ€è¦å®Œå–„çš„ç›‘æ§ä½“ç³»ã€‚</p>
<h3 data-id="heading-24">å…¨é“¾è·¯ç›‘æ§</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// 1. é“¾è·¯è¿½è¸ªï¼ˆåŸºäºSkyWalkingï¼‰</span>
<span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TracingConfig</span> {
    
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> Tracer <span class="hljs-title function_">skywalkingTracer</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// SkyWalkingè‡ªåŠ¨æ³¨å…¥ï¼Œåªéœ€æ·»åŠ ä¾èµ–</span>
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SkywalkingTracer</span>();
    }
}

<span class="hljs-comment">// åœ¨ä¸šåŠ¡ä»£ç ä¸­è‡ªåŠ¨è¿½è¸ª</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ProductService</span> {
    
    <span class="hljs-meta">@Trace(operationName = "ProductService.getProduct")</span> <span class="hljs-comment">// SkyWalkingæ³¨è§£</span>
    <span class="hljs-meta">@Tag(key = "productId", value = "arg[0]")</span> <span class="hljs-comment">// æ·»åŠ æ ‡ç­¾</span>
    <span class="hljs-keyword">public</span> Product <span class="hljs-title function_">getProduct</span><span class="hljs-params">(Long productId)</span> {
        <span class="hljs-comment">// ä¸šåŠ¡é€»è¾‘</span>
        <span class="hljs-keyword">return</span> productRepository.findById(productId).orElse(<span class="hljs-literal">null</span>);
    }
}

<span class="hljs-comment">// 2. æŒ‡æ ‡ç›‘æ§ï¼ˆMicrometer + Prometheusï¼‰</span>
<span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MetricsConfig</span> {
    
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> MeterRegistry <span class="hljs-title function_">meterRegistry</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">PrometheusMeterRegistry</span>(PrometheusConfig.DEFAULT);
    }
    
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> TimedAspect <span class="hljs-title function_">timedAspect</span><span class="hljs-params">(MeterRegistry registry)</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TimedAspect</span>(registry);
    }
}

<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderService</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Counter orderCounter;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Timer orderTimer;
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">OrderService</span><span class="hljs-params">(MeterRegistry registry)</span> {
        orderCounter = Counter.builder(<span class="hljs-string">"orders.created"</span>)
            .description(<span class="hljs-string">"åˆ›å»ºçš„è®¢å•æ•°é‡"</span>)
            .tag(<span class="hljs-string">"type"</span>, <span class="hljs-string">"normal"</span>)
            .register(registry);
        
        orderTimer = Timer.builder(<span class="hljs-string">"orders.process.time"</span>)
            .description(<span class="hljs-string">"è®¢å•å¤„ç†æ—¶é—´"</span>)
            .publishPercentiles(<span class="hljs-number">0.5</span>, <span class="hljs-number">0.95</span>, <span class="hljs-number">0.99</span>) <span class="hljs-comment">// 50%, 95%, 99%åˆ†ä½æ•°</span>
            .register(registry);
    }
    
    <span class="hljs-meta">@Timed(value = "orders.create", extraTags = {"priority", "high"})</span>
    <span class="hljs-keyword">public</span> Order <span class="hljs-title function_">createOrder</span><span class="hljs-params">(OrderRequest request)</span> {
        <span class="hljs-keyword">return</span> orderTimer.record(() -&gt; {
            <span class="hljs-type">Order</span> <span class="hljs-variable">order</span> <span class="hljs-operator">=</span> processOrder(request);
            orderCounter.increment();
            <span class="hljs-keyword">return</span> order;
        });
    }
}

<span class="hljs-comment">// 3. å¥åº·æ£€æŸ¥</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CustomHealthIndicator</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">HealthIndicator</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> DataSource dataSource;
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> RedisConnectionFactory redisConnectionFactory;
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> Health <span class="hljs-title function_">health</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// æ£€æŸ¥æ•°æ®åº“è¿æ¥</span>
        <span class="hljs-type">boolean</span> <span class="hljs-variable">dbHealthy</span> <span class="hljs-operator">=</span> checkDatabase();
        
        <span class="hljs-comment">// æ£€æŸ¥Redisè¿æ¥</span>
        <span class="hljs-type">boolean</span> <span class="hljs-variable">redisHealthy</span> <span class="hljs-operator">=</span> checkRedis();
        
        <span class="hljs-comment">// æ£€æŸ¥ç£ç›˜ç©ºé—´</span>
        <span class="hljs-type">boolean</span> <span class="hljs-variable">diskHealthy</span> <span class="hljs-operator">=</span> checkDiskSpace();
        
        <span class="hljs-keyword">if</span> (dbHealthy &amp;&amp; redisHealthy &amp;&amp; diskHealthy) {
            <span class="hljs-keyword">return</span> Health.up()
                .withDetail(<span class="hljs-string">"database"</span>, <span class="hljs-string">"connected"</span>)
                .withDetail(<span class="hljs-string">"redis"</span>, <span class="hljs-string">"connected"</span>)
                .withDetail(<span class="hljs-string">"disk"</span>, <span class="hljs-string">"sufficient"</span>)
                .build();
        } <span class="hljs-keyword">else</span> {
            Map&lt;String, Object&gt; details = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
            details.put(<span class="hljs-string">"database"</span>, dbHealthy ? <span class="hljs-string">"connected"</span> : <span class="hljs-string">"disconnected"</span>);
            details.put(<span class="hljs-string">"redis"</span>, redisHealthy ? <span class="hljs-string">"connected"</span> : <span class="hljs-string">"disconnected"</span>);
            details.put(<span class="hljs-string">"disk"</span>, diskHealthy ? <span class="hljs-string">"sufficient"</span> : <span class="hljs-string">"insufficient"</span>);
            
            <span class="hljs-keyword">return</span> Health.down().withDetails(details).build();
        }
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">checkDatabase</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">return</span> dataSource.getConnection().isValid(<span class="hljs-number">5</span>);
        } <span class="hljs-keyword">catch</span> (SQLException e) {
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
    }
}
</code></pre>
<h3 data-id="heading-25">æ™ºèƒ½å‘Šè­¦</h3>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># Prometheuså‘Šè­¦è§„åˆ™</span>
<span class="hljs-attr">groups:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">application_alerts</span>
    <span class="hljs-attr">rules:</span>
      <span class="hljs-comment"># é”™è¯¯ç‡å‘Šè­¦</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">alert:</span> <span class="hljs-string">HighErrorRate</span>
        <span class="hljs-attr">expr:</span> <span class="hljs-string">rate(http_requests_total{status=~"5.."}[5m])</span> <span class="hljs-string">/</span> <span class="hljs-string">rate(http_requests_total[5m])</span> <span class="hljs-string">&gt;</span> <span class="hljs-number">0.01</span>
        <span class="hljs-attr">for:</span> <span class="hljs-string">2m</span>
        <span class="hljs-attr">labels:</span>
          <span class="hljs-attr">severity:</span> <span class="hljs-string">critical</span>
        <span class="hljs-attr">annotations:</span>
          <span class="hljs-attr">summary:</span> <span class="hljs-string">"é«˜é”™è¯¯ç‡å‘Šè­¦"</span>
          <span class="hljs-attr">description:</span> <span class="hljs-string">"é”™è¯¯ç‡è¶…è¿‡1% (å½“å‰å€¼: <span class="hljs-template-variable">{{ $value }}</span>)"</span>
      
      <span class="hljs-comment"># å»¶è¿Ÿå‘Šè­¦</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">alert:</span> <span class="hljs-string">HighLatency</span>
        <span class="hljs-attr">expr:</span> <span class="hljs-string">histogram_quantile(0.95,</span> <span class="hljs-string">rate(http_request_duration_seconds_bucket[5m]))</span> <span class="hljs-string">&gt;</span> <span class="hljs-number">1</span>
        <span class="hljs-attr">for:</span> <span class="hljs-string">5m</span>
        <span class="hljs-attr">labels:</span>
          <span class="hljs-attr">severity:</span> <span class="hljs-string">warning</span>
        <span class="hljs-attr">annotations:</span>
          <span class="hljs-attr">summary:</span> <span class="hljs-string">"é«˜å»¶è¿Ÿå‘Šè­¦"</span>
          <span class="hljs-attr">description:</span> <span class="hljs-string">"95åˆ†ä½å»¶è¿Ÿè¶…è¿‡1ç§’ (å½“å‰å€¼: <span class="hljs-template-variable">{{ $value }}</span>s)"</span>
      
      <span class="hljs-comment"># æœåŠ¡å®•æœºå‘Šè­¦</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">alert:</span> <span class="hljs-string">ServiceDown</span>
        <span class="hljs-attr">expr:</span> <span class="hljs-string">up</span> <span class="hljs-string">==</span> <span class="hljs-number">0</span>
        <span class="hljs-attr">for:</span> <span class="hljs-string">1m</span>
        <span class="hljs-attr">labels:</span>
          <span class="hljs-attr">severity:</span> <span class="hljs-string">critical</span>
        <span class="hljs-attr">annotations:</span>
          <span class="hljs-attr">summary:</span> <span class="hljs-string">"æœåŠ¡å®•æœºå‘Šè­¦"</span>
          <span class="hljs-attr">description:</span> <span class="hljs-string">"<span class="hljs-template-variable">{{ $labels.job }}</span> æœåŠ¡å·²å®•æœº"</span>
</code></pre>
<h2 data-id="heading-26">08 å®æˆ˜æ¡ˆä¾‹ï¼šç§’æ€ç³»ç»Ÿè®¾è®¡</h2>
<p>è®©æˆ‘ä»¬ç”¨ä¸€ä¸ªå…·ä½“çš„ä¾‹å­æ¥ç»¼åˆè¿ç”¨ä¸Šè¿°æŠ€æœ¯ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SeckillService</span> {
    
    <span class="hljs-comment">// 1. ç¼“å­˜é¢„çƒ­</span>
    <span class="hljs-meta">@PostConstruct</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">warmUpCache</span><span class="hljs-params">()</span> {
        List&lt;SeckillProduct&gt; hotProducts = findHotProducts();
        
        hotProducts.parallelStream().forEach(product -&gt; {
            <span class="hljs-type">String</span> <span class="hljs-variable">stockKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">"seckill:stock:"</span> + product.getId();
            redisTemplate.opsForValue().set(stockKey, product.getStock());
            
            <span class="hljs-comment">// è®¾ç½®éšæœºè¿‡æœŸæ—¶é—´ï¼Œé˜²æ­¢é›ªå´©</span>
            setWithRandomExpire(stockKey, product.getStock(), <span class="hljs-number">10</span>, TimeUnit.MINUTES);
        });
    }
    
    <span class="hljs-comment">// 2. ç§’æ€å…¥å£ï¼ˆé˜²åˆ·+é™æµï¼‰</span>
    <span class="hljs-meta">@RateLimiter(key = "'seckill:' + #userId", 
                 limit = 1, period = 10, unit = TimeUnit.SECONDS)</span>
    <span class="hljs-keyword">public</span> SeckillResult <span class="hljs-title function_">seckill</span><span class="hljs-params">(Long userId, Long productId)</span> {
        <span class="hljs-comment">// 2.1 èµ„æ ¼æ ¡éªŒï¼ˆRediså®ç°ï¼‰</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">userKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">"seckill:user:"</span> + productId + <span class="hljs-string">":"</span> + userId;
        <span class="hljs-keyword">if</span> (Boolean.TRUE.equals(redisTemplate.hasKey(userKey))) {
            <span class="hljs-keyword">return</span> SeckillResult.alreadyParticipated();
        }
        
        <span class="hljs-comment">// 2.2 åº“å­˜é¢„æ‰£å‡ï¼ˆLuaè„šæœ¬ä¿è¯åŸå­æ€§ï¼‰</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">stockKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">"seckill:stock:"</span> + productId;
        <span class="hljs-type">Long</span> <span class="hljs-variable">remaining</span> <span class="hljs-operator">=</span> redisTemplate.execute(
            stockDecrScript, 
            Collections.singletonList(stockKey), 
            <span class="hljs-string">"1"</span>
        );
        
        <span class="hljs-keyword">if</span> (remaining &lt; <span class="hljs-number">0</span>) {
            <span class="hljs-comment">// åº“å­˜ä¸è¶³ï¼Œå›æ»š</span>
            redisTemplate.opsForValue().increment(stockKey, <span class="hljs-number">1</span>);
            <span class="hljs-keyword">return</span> SeckillResult.outOfStock();
        }
        
        <span class="hljs-comment">// 2.3 è®°å½•ç”¨æˆ·è´­ä¹°èµ„æ ¼</span>
        redisTemplate.opsForValue().set(userKey, <span class="hljs-string">"1"</span>, <span class="hljs-number">1</span>, TimeUnit.HOURS);
        
        <span class="hljs-comment">// 2.4 å‘é€æ¶ˆæ¯åˆ°é˜Ÿåˆ—ï¼Œå¼‚æ­¥åˆ›å»ºè®¢å•</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">orderKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">"seckill:order:"</span> + UUID.randomUUID();
        <span class="hljs-type">SeckillOrderMessage</span> <span class="hljs-variable">message</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SeckillOrderMessage</span>(userId, productId, orderKey);
        
        kafkaTemplate.send(<span class="hljs-string">"seckill-orders"</span>, 
            String.valueOf(productId), 
            JsonUtils.toJson(message)
        );
        
        <span class="hljs-keyword">return</span> SeckillResult.success(orderKey);
    }
    
    <span class="hljs-comment">// 3. å¼‚æ­¥è®¢å•å¤„ç†</span>
    <span class="hljs-meta">@KafkaListener(topics = "seckill-orders", 
                   groupId = "seckill-order-processor")</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">processSeckillOrder</span><span class="hljs-params">(String message)</span> {
        <span class="hljs-type">SeckillOrderMessage</span> <span class="hljs-variable">orderMessage</span> <span class="hljs-operator">=</span> JsonUtils.fromJson(message, SeckillOrderMessage.class);
        
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// 3.1 åˆ›å»ºè®¢å•ï¼ˆæ•°æ®åº“æ“ä½œï¼‰</span>
            <span class="hljs-type">Order</span> <span class="hljs-variable">order</span> <span class="hljs-operator">=</span> createOrderInDB(orderMessage);
            
            <span class="hljs-comment">// 3.2 æ›´æ–°ç¼“å­˜çŠ¶æ€</span>
            <span class="hljs-type">String</span> <span class="hljs-variable">resultKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">"seckill:result:"</span> + orderMessage.getOrderKey();
            redisTemplate.opsForValue().set(resultKey, order.getId(), <span class="hljs-number">10</span>, TimeUnit.MINUTES);
            
            <span class="hljs-comment">// 3.3 å‘é€æˆåŠŸé€šçŸ¥</span>
            notifyUser(orderMessage.getUserId(), order);
            
        } <span class="hljs-keyword">catch</span> (Exception e) {
            log.error(<span class="hljs-string">"å¤„ç†ç§’æ€è®¢å•å¤±è´¥"</span>, e);
            
            <span class="hljs-comment">// å¤±è´¥å¤„ç†ï¼šæ¢å¤åº“å­˜</span>
            <span class="hljs-type">String</span> <span class="hljs-variable">stockKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">"seckill:stock:"</span> + orderMessage.getProductId();
            redisTemplate.opsForValue().increment(stockKey, <span class="hljs-number">1</span>);
            
            <span class="hljs-comment">// ç§»é™¤ç”¨æˆ·èµ„æ ¼è®°å½•</span>
            <span class="hljs-type">String</span> <span class="hljs-variable">userKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">"seckill:user:"</span> + orderMessage.getProductId() + <span class="hljs-string">":"</span> + orderMessage.getUserId();
            redisTemplate.delete(userKey);
        }
    }
    
    <span class="hljs-comment">// 4. åº“å­˜æ‰£å‡Luaè„šæœ¬</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> DefaultRedisScript&lt;Long&gt; stockDecrScript = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DefaultRedisScript</span>&lt;&gt;(
        <span class="hljs-string">"local key = KEYS[1]\n"</span> +
        <span class="hljs-string">"local decrement = tonumber(ARGV[1])\n"</span> +
        <span class="hljs-string">"local current = redis.call('get', key)\n"</span> +
        <span class="hljs-string">"if not current then\n"</span> +
        <span class="hljs-string">"    return -1\n"</span> +
        <span class="hljs-string">"end\n"</span> +
        <span class="hljs-string">"local currentNum = tonumber(current)\n"</span> +
        <span class="hljs-string">"if currentNum &lt; decrement then\n"</span> +
        <span class="hljs-string">"    return -1\n"</span> +
        <span class="hljs-string">"end\n"</span> +
        <span class="hljs-string">"return redis.call('decrby', key, decrement)"</span>,
        Long.class
    );
}
</code></pre>
<p>æ›´å¤šé¡¹ç›®å®æˆ˜ï¼š<a href="https://link.juejin.cn?target=http%3A%2F%2Fsusan.net.cn%2Fproject" target="_blank" title="http://susan.net.cn/project" ref="nofollow noopener noreferrer">javaçªå‡»é˜Ÿ</a></p>
<h2 data-id="heading-27">æ€»ç»“</h2>
<p>è®¾è®¡ä¸€ä¸ªæ‰›ä½åƒä¸‡çº§æµé‡çš„ç³»ç»Ÿï¼Œä¸æ˜¯ç®€å•å †ç ŒæŠ€æœ¯ç»„ä»¶ï¼Œè€Œæ˜¯<strong>æ„å»ºä¸€ä¸ªæœ‰æœºçš„ã€èƒ½è‡ªæˆ‘è°ƒèŠ‚çš„ç”Ÿæ€ç³»ç»Ÿ</strong>ã€‚</p>
<p>é€šè¿‡æœ¬æ–‡çš„åˆ†äº«ï¼Œæˆ‘æƒ³ä½ å·²ç»çœ‹åˆ°äº†ä¸€ä¸ªå®Œæ•´çš„é«˜å¹¶å‘ç³»ç»Ÿæ¶æ„å›¾æ™¯ã€‚</p>
<p>è®©æˆ‘æœ€åæ€»ç»“ä¸€ä¸‹å…³é”®ç‚¹ï¼š</p>
<ol>
<li>
<p><strong>æ¶æ„æ˜¯æ¼”è¿›è€Œæ¥çš„</strong>ï¼šä¸è¦ä¸€å¼€å§‹å°±è¿½æ±‚å®Œç¾æ¶æ„ï¼Œè€Œæ˜¯éšç€ä¸šåŠ¡å¢é•¿ä¸æ–­æ¼”è¿›ã€‚ä»å°è€Œç¾çš„å•ä½“å¼€å§‹ï¼Œé€æ­¥æ‹†åˆ†ã€ä¼˜åŒ–ã€æ‰©å±•ã€‚</p>
</li>
<li>
<p><strong>ç¼“å­˜æ˜¯æ€§èƒ½çš„é“¶å¼¹</strong>ï¼šä½†è¦ç”¨å¾—èªæ˜ã€‚å¤šçº§ç¼“å­˜ã€æ™ºèƒ½æ·˜æ±°ã€é˜²æ­¢ç©¿é€/å‡»ç©¿/é›ªå´©ï¼Œæ¯ä¸ªç»†èŠ‚éƒ½å½±å“å·¨å¤§ã€‚</p>
</li>
<li>
<p><strong>æ•°æ®åº“æ˜¯ç“¶é¢ˆæ‰€åœ¨</strong>ï¼šè¯»å†™åˆ†ç¦»ã€åˆ†åº“åˆ†è¡¨ã€ç´¢å¼•ä¼˜åŒ–ã€SQLè°ƒä¼˜ï¼Œè¿™äº›åŸºæœ¬åŠŸæ¯”ä»»ä½•ç‚«é…·çš„æŠ€æœ¯éƒ½é‡è¦ã€‚</p>
</li>
<li>
<p><strong>å¼‚æ­¥æ˜¯æ‰©å±•çš„å…³é”®</strong>ï¼šèƒ½å¼‚æ­¥çš„ç»ä¸åŒæ­¥ï¼Œèƒ½æ‰¹å¤„ç†çš„ç»ä¸å•æ¡ã€‚æ¶ˆæ¯é˜Ÿåˆ—ã€äº‹ä»¶é©±åŠ¨ã€ååº”å¼ç¼–ç¨‹ï¼Œè®©ç³»ç»Ÿæ¾è€¦åˆã€é«˜å†…èšã€‚</p>
</li>
<li>
<p><strong>ç›‘æ§æ˜¯ç³»ç»Ÿçš„çœ¼ç›</strong>ï¼šæ²¡æœ‰ç›‘æ§çš„ç³»ç»Ÿå°±æ˜¯åœ¨è£¸å¥”ã€‚å…¨é“¾è·¯è¿½è¸ªã€æŒ‡æ ‡ç›‘æ§ã€æ—¥å¿—èšåˆã€æ™ºèƒ½å‘Šè­¦ï¼Œç¼ºä¸€ä¸å¯ã€‚</p>
</li>
<li>
<p><strong>å®¹é”™æ¯”ä¼˜åŒ–æ›´é‡è¦</strong>ï¼šç³»ç»Ÿä¸€å®šä¼šå‡ºé—®é¢˜ï¼Œå…³é”®æ˜¯å¦‚ä½•å¿«é€Ÿå‘ç°ã€å¿«é€Ÿæ¢å¤ã€å¿«é€Ÿæ­¢æŸã€‚ç†”æ–­ã€é™çº§ã€é™æµã€é‡è¯•ï¼Œè¿™äº›æœºåˆ¶æ˜¯ç³»ç»Ÿçš„ä¿é™©ç»³ã€‚</p>
</li>
</ol>
<p>çœŸæ­£çš„æ¶æ„å¤§å¸ˆï¼Œä¸æ˜¯æŒæ¡äº†å¤šå°‘æŠ€æœ¯æ¡†æ¶ï¼Œè€Œæ˜¯èƒ½åœ¨ä¸šåŠ¡éœ€æ±‚ã€æŠ€æœ¯å®ç°ã€å›¢é˜Ÿèƒ½åŠ›ã€èµ„æºçº¦æŸä¹‹é—´æ‰¾åˆ°æœ€ä½³å¹³è¡¡ç‚¹ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸€æ–‡è¯»æ‡‚OpenClawæ ¸å¿ƒç‰¹æ€§ä¸åŸç†è§£æ(æ–‡æœ«é™„å›½äº§å¤§æ¨¡å‹+èŠå¤©è½¯ä»¶æ¥å…¥OpenClawè§†é¢‘æ•™ç¨‹åœ°å€)]]></title>    <link>https://juejin.cn/post/7602466689713078287</link>    <guid>https://juejin.cn/post/7602466689713078287</guid>    <pubDate>2026-02-04T02:55:08.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602466689713078287" data-draft-id="7602106969698566207" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸€æ–‡è¯»æ‡‚OpenClawæ ¸å¿ƒç‰¹æ€§ä¸åŸç†è§£æ(æ–‡æœ«é™„å›½äº§å¤§æ¨¡å‹+èŠå¤©è½¯ä»¶æ¥å…¥OpenClawè§†é¢‘æ•™ç¨‹åœ°å€)"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,LangChain,Agent"/> <meta itemprop="datePublished" content="2026-02-04T02:55:08.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§æ¨¡å‹çœŸå¥½ç©"/> <meta itemprop="url" content="https://juejin.cn/user/3140624091453053"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸€æ–‡è¯»æ‡‚OpenClawæ ¸å¿ƒç‰¹æ€§ä¸åŸç†è§£æ(æ–‡æœ«é™„å›½äº§å¤§æ¨¡å‹+èŠå¤©è½¯ä»¶æ¥å…¥OpenClawè§†é¢‘æ•™ç¨‹åœ°å€)
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3140624091453053/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§æ¨¡å‹çœŸå¥½ç©
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T02:55:08.000Z" title="Wed Feb 04 2026 02:55:08 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252b3a}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px;color:#5e7ce0}.markdown-body h1{font-size:24px;margin-bottom:5px;margin-top:80px;position:relative;text-align:center}.markdown-body h2{font-size:20px;padding-bottom:12px;border-bottom:1px solid #dfe1e6}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h4{font-size:16px;margin-top:30px}.markdown-body h5{font-size:14px;margin-top:20px}.markdown-body h6{font-size:14px;margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #dfe1e6;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#ffeeed;color:#c73636;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#252b3a;background:#f8f8f8}.markdown-body a{position:relative;text-decoration:none;color:#5e7ce0;padding-right:18px;padding-bottom:4px}.markdown-body a[href^=http]:after{position:absolute;display:inline-block;width:16px;height:16px;margin-left:2px;margin-top:6px;content:"";background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAIRlWElmTU0AKgAAAAgABQESAAMAAAABAAEAAAEaAAUAAAABAAAASgEbAAUAAAABAAAAUgEoAAMAAAABAAIAAIdpAAQAAAABAAAAWgAAAAAAAABIAAAAAQAAAEgAAAABAAOgAQADAAAAAQABAACgAgAEAAAAAQAAACCgAwAEAAAAAQAAACAAAAAAX7wP8AAAAAlwSFlzAAALEwAACxMBAJqcGAAAAVlpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDYuMC4wIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iPgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KGV7hBwAABWVJREFUWAnlVktsVFUY/s85997pC9BOTKxRWnEKsXWlxjWJj0RWJjrFAAXjAlewYWOkgauACVu7a2IiNUEyExM3yoZE3Wmi7qgPJthJBDE6JUNpO3Mf5/j95/bOTOcBlBgXejJ37rn/Of/7O/9/iP7vQ/zTAcjnC4ry+a5ii1OkiYTpuvjvEc0Gp51uivP+ZW+QBuSW4QjW5rptAa1Ey0uOGKOxwPetVyafN6p/52/PkNBbjdAhGaGEpMRjLZTryB8+9MUSYSGNRIcBvm8kBAY9tHYlHz78nTs392xIkwv9FA3Oe33bdoX1ZZKOS0bH0CXI6RugYLW6BwIu5gskkQ4sEG0wYF25PjBzbZfSYY6kDLUmWMt7FR7Lw3xYUkaTdjxHfTPnPwav0iEGYADVa9XIRIEyxrAA0jIQxgFL22gYwF7A8/DAzNVdksJvJaTEUZ2kYnZWziN5s1ADPHneEIXByotYuMSrf9JEbbsuv7VcvbaKML8plXtQR0EdIYDqWEmtOgAomZFH8EjWSnek2ulmtljljttHbmaIHCCCHzd9MjwfsmscBeZH9Jyd10nMvz92UQrtCBKvMF06mQy0SiEdRMEGg8mN0YjAlgoDDkPrMI5qJKSkKKydpbB2CZjJkhIBvOBw2CGQgii85bpx//dMqFRKam5uvH7w+K97oe+Cl0HO68uIBH0qyEzpOMwIbZIcFq0I+9cwoElizCjk2KFI1y7Nnx614W1db58fOXIlMzs7Xn/jeDmvBV2Q0mXjGf554O/m4LZHp2N8r61WPMvLZWLdiC4GMAk5BjeeB5lhv39l6+BIbu3m760hXMDKBD08XBKzR8fr04nygnIypOOAJUx/fHrsi0Mnys+vVK+V4VUohaiyPCo2Q9DFALvF/ikw8WS4QvVZALS5ksw47/7R8ejgTPk1UFqU6/3zp8bOM7B/kdu/fkguPGU5JibW+F0sTjWOUw8DklRrg4BiLGeBqbaRLxjlT4no0InFV402RcftJz41cH/f/JnHP3kZaaF6VX/liwist9vYG5+NU9Cg3MNkt/+lU5wS8fTxq3mc7ILjDlAE4CJpe89BOWPiIjBhi9O6PI4G1jsc6RGB3lZwmS76k8H0zOKTkFboG8jS2krFKCX2fvTeaPHIBwAkMHHgncURnL3nuCSnxSopdIzN5th0BIonJ0Lf9yUA9iMkzdRWl3BixOusfDcwQVcS4UKIFwYfGPnM8wY/DyP9NFMXaTE5BU39tGkDgGZz+fJJG0oYcSaOafLcqdECY4LzfSObSzyUOgxqtyisr8SSNOOAkubWoh3TTaeA2YtFEXPnm5x81/j+6MI6JqyS25WSNU6hbCMKHG84marJbdR+vwakRhQLRuQpbzHRLjmpmijI+OmWCtq+LzWtnX5v30gHSsqmWne74DtiACi2+Wz0iXbuLt9D2cDyoPEkWOiyp5XUIwLMi/wJY1FbH5B9ONtdC1KrsD/Q0MCQAS0wccILORDW25amAeOtooAj/KQxfzF17uwTSQ1v3dJ7jnLINwdZYRDa4tPU0sHVXFo/vxFF5BqFqxRfOmgPCk4ft2NgKTCy2Y47JIEg+MIhjYsLy5I25qUYTQlCjMRHsr/UwdYwIK33UO1J5fFNB9XNO6akcywJofVmXQDP2wfrSPcI2xG5BSs3I+IosHr4EtvO1TDAu16xHQq5+ykMblfRXLbhEoFIdDTBdhldvzl+3CMg60ZktI2vNzLW6IIp0waLklot9L63yzuUp8dJd7bglPFe3hIXstBEP58/s6Ocyr4rH2+866ZNbriTzA0RSOWCwakMl1QJgculxPt8Z7O5GLdtW6bvU8R/nO1vb+hMExVAVtEAAAAASUVORK5CYII=");background-size:100%}.markdown-body a:active,.markdown-body a:hover{border-bottom:2px solid #5e7ce0}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #5e7ce0;border-spacing:0}.markdown-body thead{color:#fff;text-align:left}.markdown-body thead tr{background:#5e7ce0}.markdown-body thead th{border-bottom:1px solid #dfe1e6}.markdown-body tr{background-color:#fff}.markdown-body tr:nth-child(2n){background-color:#f2f5fc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#252b3a;padding:1px 23px;margin:22px 0;border-left:4px solid #5e7ce0;background-color:#f2f5fc}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{padding-left:10px;margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#5e7ce0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body ul li::marker{content:"â€¢";color:#5e7ce0}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}.markdown-body input[type=checkbox]:before{display:inline-block;width:16px;height:16px;content:"";background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAABCCAYAAADjVADoAAAK2GlDQ1BJQ0MgUHJvZmlsZQAASImVlwdUU9kWhs+96Y0WiHRC70gngJTQQxGkg6iEJJBQYkgIKmJnUMGxoCKCZcSKKFhGQMaCWLANAopdJ8igoD4HC6Ki5t3AI8zMW++99fZaJ+dbO/vss/e55671XwAoYWyRKBdWAyBPWCCODQ2gJ6ek0nHPAQRgQAI2wIHNkYiYMTGRALHJ+a/28S4Sjdhte0Wuf///v5oGlyfhAAClIZzBlXDyEG5DxkuOSFwAAOoI4jddUCBScBfCmmKkQIR/V3DWBH9ScMY4o8njMfGxgQjTAcCT2WxxFgBkO8RPL+RkIXnIih4chVyBEOFihH05fDYX4TMI2+XlzVfwIMJWSLwIAApyOoCR8aecWX/Jn6HMz2ZnKXmir3HDBwkkolz2ov/zaP635eVKJ/ewQAaZLw6LVeyHnN/9nPkRShZmzIyeZAF3oiYF86VhCZPMkQSmTjKXHRShXJs7M3KSMwUhLGWeAlb8JPMkwXGTLJ4fq9wrUxzInGS2eHxfIsIyaU6C0s/nsZT5i/jxSZNcKEicOcmSnLiIqZhApV8sjVXWzxOGBkztG6LsPU/yp34FLOXaAn58mLJ39lT9PCFzKqckWVkblxcUPBWToIwXFQQo9xLlxijjebmhSr+kME65tgC5nFNrY5RnmM0Oj5lkIABRgA04dNVJAqCAt7BA0UjgfNEisSCLX0BnIm8bj84Schzs6M6Ozs4AKN7dievwnjb+TkK061O+NYjHr10ul5+e8oUi9/i4KfJYbk35LCsAUNUD4Op+jlRcOOFDK34wyNNTBZpABxgCU2AF7IEzcAfewB8Eg3AQDeJBCpiL1MoHeUAMFoBisAKUgnKwEWwF1WA32AsOgaPgBGgGZ8AFcAXcAF2gFzwCMjAAXoFh8BGMQRCEgygQFdKBjCBzyBZyhhiQLxQMRUKxUAqUDmVBQkgKFUOroHKoAqqG9kB10HHoNHQBugZ1Qw+gPmgIegd9gVEwGdaEDWALeDrMgJlwBBwPz4Gz4Hy4CC6B18NVcC18BG6CL8A34F5YBr+CR1AARULRUMYoexQDFYiKRqWiMlFi1FJUGaoSVYtqQLWiOlC3UTLUa9RnNBZNRdPR9mhvdBg6Ac1B56OXotehq9GH0E3oS+jb6D70MPo7hoLRx9hivDAsTDImC7MAU4qpxBzAnMJcxvRiBjAfsVgsDWuJ9cCGYVOw2djF2HXYndhGbBu2G9uPHcHhcDo4W5wPLhrHxhXgSnHbcUdw53E9uAHcJzwJb4R3xofgU/FC/Ep8Jf4w/hy+B/8CP0ZQI5gTvAjRBC5hEWEDYR+hlXCLMEAYI6oTLYk+xHhiNnEFsYrYQLxMfEx8TyKRTEiepFkkAWk5qYp0jHSV1Ef6TNYg25ADyWlkKXk9+SC5jfyA/J5CoVhQ/CmplALKekod5SLlKeWTClXFQYWlwlVZplKj0qTSo/JGlaBqrspUnatapFqpelL1luprNYKahVqgGlttqVqN2mm1e2oj6lR1J/Vo9Tz1deqH1a+pD2rgNCw0gjW4GiUaezUuavRTUVRTaiCVQ11F3Ue9TB3QxGpaarI0szXLNY9qdmoOa2louWolai3UqtE6qyWjoWgWNBYtl7aBdoJ2l/ZlmsE05jTetLXTGqb1TBvV1tP21+Zpl2k3avdqf9Gh6wTr5Ohs0mnWeaKL1rXRnaW7QHeX7mXd13qaet56HL0yvRN6D/VhfRv9WP3F+nv1b+qPGBgahBqIDLYbXDR4bUgz9DfMNtxieM5wyIhq5GskMNpidN7oJV2LzqTn0qvol+jDxvrGYcZS4z3GncZjJpYmCSYrTRpNnpgSTRmmmaZbTNtNh82MzKLMis3qzR6aE8wZ5nzzbeYd5qMWlhZJFqstmi0GLbUtWZZFlvWWj60oVn5W+Va1VnessdYM6xzrndZdNrCNmw3fpsbmli1s624rsN1p222HsfO0E9rV2t2zJ9sz7Qvt6+37HGgOkQ4rHZod3kw3m546fdP0junfHd0ccx33OT5y0nAKd1rp1Or0ztnGmeNc43zHheIS4rLMpcXlrautK891l+t9N6pblNtqt3a3b+4e7mL3BvchDzOPdI8dHvcYmowYxjrGVU+MZ4DnMs8znp+93L0KvE54/eFt753jfdh7cIblDN6MfTP6fUx82D57fGS+dN903598ZX7Gfmy/Wr9n/qb+XP8D/i+Y1sxs5hHmmwDHAHHAqYDRQK/AJYFtQaig0KCyoM5gjeCE4OrgpyEmIVkh9SHDoW6hi0PbwjBhEWGbwu6xDFgcVh1rONwjfEn4pQhyRFxEdcSzSJtIcWRrFBwVHrU56vFM85nCmc3RIJoVvTn6SYxlTH7ML7Ows2Jm1cx6HusUWxzbEUeNmxd3OO5jfED8hvhHCVYJ0oT2RNXEtMS6xNGkoKSKJFny9OQlyTdSdFMEKS2puNTE1AOpI7ODZ2+dPZDmllaadneO5ZyFc67N1Z2bO/fsPNV57Hkn0zHpSemH07+yo9m17JEMVsaOjGFOIGcb5xXXn7uFO8Tz4VXwXmT6ZFZkDmb5ZG3OGuL78Sv5rwWBgmrB2+yw7N3ZoznROQdz5LlJuY15+Lz0vNNCDWGO8NJ8w/kL53eLbEWlIlm+V/7W/GFxhPiABJLMkbQUaCIi6abUSvqDtK/Qt7Cm8NOCxAUnF6ovFC68uchm0dpFL4pCivYvRi/mLG4vNi5eUdy3hLlkz1JoacbS9mWmy0qWDSwPXX5oBXFFzopfVzqurFj5YVXSqtYSg5LlJf0/hP5QX6pSKi69t9p79e416DWCNZ1rXdZuX/u9jFt2vdyxvLL86zrOuus/Ov1Y9aN8feb6zg3uG3ZtxG4Ubry7yW/ToQr1iqKK/s1Rm5u20LeUbfmwdd7Wa5Wulbu3EbdJt8mqIqtatptt37j9azW/urcmoKZxh/6OtTtGd3J39uzy39Ww22B3+e4vPwl+ur8ndE9TrUVt5V7s3sK9z/cl7uvYz9hfd0D3QPmBbweFB2WHYg9dqvOoqzusf3hDPVwvrR86knak62jQ0ZYG+4Y9jbTG8mPgmPTYy+Ppx++eiDjRfpJxsuFn8593nKKeKmuCmhY1DTfzm2UtKS3dp8NPt7d6t576xeGXg2eMz9Sc1Tq74RzxXMk5+fmi8yNtorbXF7Iu9LfPa390MfninUuzLnVejrh89UrIlYsdzI7zV32unrnmde30dcb15hvuN5puut089avbr6c63Tubbnncauny7GrtntF9rsev58LtoNtX7rDu3Oid2dt9N+Hu/Xtp92T3ufcHH+Q+ePuw8OHYo+WPMY/Lnqg9qXyq/7T2N+vfGmXusrN9QX03n8U9e9TP6X/1u+T3rwMlzynPK18YvagbdB48MxQy1PVy9suBV6JXY69L/6H+jx1vrN78/If/HzeHk4cH3orfyt+te6/z/uAH1w/tIzEjTz/mfRwbLfuk8+nQZ8bnji9JX16MLfiK+1r1zfpb6/eI74/leXK5iC1mj0sBFDLgzEwA3h1EtHEKAFRElxNnT2jrcYMmvgfGCfwnntDf4+YOQAMyKWQR0x+Akwo5i8wqyKyQRPH+AHZxUY5/mSTTxXkiFxlRlphPcvl7AwBwrQB8E8vlYzvl8m/7kGIfANCWP6HpFYZFtHyD3vJRg6LbPe3g7zah9//U499noKjAFfx9/ieoZhkWVvYkwwAAAGxlWElmTU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAIdpAAQAAAABAAAATgAAAAAAAACQAAAAAQAAAJAAAAABAAKgAgAEAAAAAQAAAEKgAwAEAAAAAQAAAEIAAAAAgodoEQAAAAlwSFlzAAAWJQAAFiUBSVIk8AAAAhRJREFUeAHtnLEuBFEUhs9cu7JCskEhIrZAgYZGoREPwBuIygOoPITKA6jEG/AAolFoaFCgICIKZBNiY8Pyz5rNOWe9wNz5T7N3Z2eT/b/7zZlpziat3xKWBDJoEyh5EDd3DTk5r8vV7Yc8vzbl6zvfwvSERIYHyzI90SeLc1WZrFV85PR9oi+N/YMnOT6t/3tiLAeXFqqytjrSFacDYmfvQS6u37tOiPHA7FS/bK6PmWhpj4AJRYGA9MiKzLpK6An+cqiNVmRleUhArrec6PNzt/5sttLgh0cvcvfY6Px+ZNY9I6Ax6gKErY1xmZ8ZyD0E5MJGIgsyIZsunT3g7qALJuTdAp0nWyMTsunS2QNukbpwOcRaPpvOHvxzQow2ZBvrs+nsfLL8o0QQBJFdMO1XGkEjaIQlQCMsD/YIGkEjLAEaYXmwR9AIGmEJ0AjLgz2CRtAIS4BGWB7sETSCRlgCNMLyYI+gETTCEqARlgd7BI2gEZYAjbA82CNoBI2wBGiE5cEeQSNohCVAIywP9ggaQSMsARphebBH0AgaYQnQCMsjYC5SF2agYi2fTWcPGA7VFfO0n8+mswdMyOrCNJwnpz/P6xqZkE2Xzh4w8qcLI4Hbu/dydvkWBRAAQBZk0uOOyKyzp5PARRiF1puNtR+NTh+oMCvtJ+D8F2N6j6x+PrwzG46gRTDDm5BtsAGBg0X924Qfj7i23p7HNgQAAAAASUVORK5CYII=");background-size:100%;position:relative;right:2px;top:-5px}.markdown-body input[type=checkbox]:checked:before{background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAABCCAYAAADjVADoAAAK2GlDQ1BJQ0MgUHJvZmlsZQAASImVlwdUU9kWhs+96Y0WiHRC70gngJTQQxGkg6iEJJBQYkgIKmJnUMGxoCKCZcSKKFhGQMaCWLANAopdJ8igoD4HC6Ki5t3AI8zMW++99fZaJ+dbO/vss/e55671XwAoYWyRKBdWAyBPWCCODQ2gJ6ek0nHPAQRgQAI2wIHNkYiYMTGRALHJ+a/28S4Sjdhte0Wuf///v5oGlyfhAAClIZzBlXDyEG5DxkuOSFwAAOoI4jddUCBScBfCmmKkQIR/V3DWBH9ScMY4o8njMfGxgQjTAcCT2WxxFgBkO8RPL+RkIXnIih4chVyBEOFihH05fDYX4TMI2+XlzVfwIMJWSLwIAApyOoCR8aecWX/Jn6HMz2ZnKXmir3HDBwkkolz2ov/zaP635eVKJ/ewQAaZLw6LVeyHnN/9nPkRShZmzIyeZAF3oiYF86VhCZPMkQSmTjKXHRShXJs7M3KSMwUhLGWeAlb8JPMkwXGTLJ4fq9wrUxzInGS2eHxfIsIyaU6C0s/nsZT5i/jxSZNcKEicOcmSnLiIqZhApV8sjVXWzxOGBkztG6LsPU/yp34FLOXaAn58mLJ39lT9PCFzKqckWVkblxcUPBWToIwXFQQo9xLlxijjebmhSr+kME65tgC5nFNrY5RnmM0Oj5lkIABRgA04dNVJAqCAt7BA0UjgfNEisSCLX0BnIm8bj84Schzs6M6Ozs4AKN7dievwnjb+TkK061O+NYjHr10ul5+e8oUi9/i4KfJYbk35LCsAUNUD4Op+jlRcOOFDK34wyNNTBZpABxgCU2AF7IEzcAfewB8Eg3AQDeJBCpiL1MoHeUAMFoBisAKUgnKwEWwF1WA32AsOgaPgBGgGZ8AFcAXcAF2gFzwCMjAAXoFh8BGMQRCEgygQFdKBjCBzyBZyhhiQLxQMRUKxUAqUDmVBQkgKFUOroHKoAqqG9kB10HHoNHQBugZ1Qw+gPmgIegd9gVEwGdaEDWALeDrMgJlwBBwPz4Gz4Hy4CC6B18NVcC18BG6CL8A34F5YBr+CR1AARULRUMYoexQDFYiKRqWiMlFi1FJUGaoSVYtqQLWiOlC3UTLUa9RnNBZNRdPR9mhvdBg6Ac1B56OXotehq9GH0E3oS+jb6D70MPo7hoLRx9hivDAsTDImC7MAU4qpxBzAnMJcxvRiBjAfsVgsDWuJ9cCGYVOw2djF2HXYndhGbBu2G9uPHcHhcDo4W5wPLhrHxhXgSnHbcUdw53E9uAHcJzwJb4R3xofgU/FC/Ep8Jf4w/hy+B/8CP0ZQI5gTvAjRBC5hEWEDYR+hlXCLMEAYI6oTLYk+xHhiNnEFsYrYQLxMfEx8TyKRTEiepFkkAWk5qYp0jHSV1Ef6TNYg25ADyWlkKXk9+SC5jfyA/J5CoVhQ/CmplALKekod5SLlKeWTClXFQYWlwlVZplKj0qTSo/JGlaBqrspUnatapFqpelL1luprNYKahVqgGlttqVqN2mm1e2oj6lR1J/Vo9Tz1deqH1a+pD2rgNCw0gjW4GiUaezUuavRTUVRTaiCVQ11F3Ue9TB3QxGpaarI0szXLNY9qdmoOa2louWolai3UqtE6qyWjoWgWNBYtl7aBdoJ2l/ZlmsE05jTetLXTGqb1TBvV1tP21+Zpl2k3avdqf9Gh6wTr5Ohs0mnWeaKL1rXRnaW7QHeX7mXd13qaet56HL0yvRN6D/VhfRv9WP3F+nv1b+qPGBgahBqIDLYbXDR4bUgz9DfMNtxieM5wyIhq5GskMNpidN7oJV2LzqTn0qvol+jDxvrGYcZS4z3GncZjJpYmCSYrTRpNnpgSTRmmmaZbTNtNh82MzKLMis3qzR6aE8wZ5nzzbeYd5qMWlhZJFqstmi0GLbUtWZZFlvWWj60oVn5W+Va1VnessdYM6xzrndZdNrCNmw3fpsbmli1s624rsN1p222HsfO0E9rV2t2zJ9sz7Qvt6+37HGgOkQ4rHZod3kw3m546fdP0junfHd0ccx33OT5y0nAKd1rp1Or0ztnGmeNc43zHheIS4rLMpcXlrautK891l+t9N6pblNtqt3a3b+4e7mL3BvchDzOPdI8dHvcYmowYxjrGVU+MZ4DnMs8znp+93L0KvE54/eFt753jfdh7cIblDN6MfTP6fUx82D57fGS+dN903598ZX7Gfmy/Wr9n/qb+XP8D/i+Y1sxs5hHmmwDHAHHAqYDRQK/AJYFtQaig0KCyoM5gjeCE4OrgpyEmIVkh9SHDoW6hi0PbwjBhEWGbwu6xDFgcVh1rONwjfEn4pQhyRFxEdcSzSJtIcWRrFBwVHrU56vFM85nCmc3RIJoVvTn6SYxlTH7ML7Ows2Jm1cx6HusUWxzbEUeNmxd3OO5jfED8hvhHCVYJ0oT2RNXEtMS6xNGkoKSKJFny9OQlyTdSdFMEKS2puNTE1AOpI7ODZ2+dPZDmllaadneO5ZyFc67N1Z2bO/fsPNV57Hkn0zHpSemH07+yo9m17JEMVsaOjGFOIGcb5xXXn7uFO8Tz4VXwXmT6ZFZkDmb5ZG3OGuL78Sv5rwWBgmrB2+yw7N3ZoznROQdz5LlJuY15+Lz0vNNCDWGO8NJ8w/kL53eLbEWlIlm+V/7W/GFxhPiABJLMkbQUaCIi6abUSvqDtK/Qt7Cm8NOCxAUnF6ovFC68uchm0dpFL4pCivYvRi/mLG4vNi5eUdy3hLlkz1JoacbS9mWmy0qWDSwPXX5oBXFFzopfVzqurFj5YVXSqtYSg5LlJf0/hP5QX6pSKi69t9p79e416DWCNZ1rXdZuX/u9jFt2vdyxvLL86zrOuus/Ov1Y9aN8feb6zg3uG3ZtxG4Ubry7yW/ToQr1iqKK/s1Rm5u20LeUbfmwdd7Wa5Wulbu3EbdJt8mqIqtatptt37j9azW/urcmoKZxh/6OtTtGd3J39uzy39Ww22B3+e4vPwl+ur8ndE9TrUVt5V7s3sK9z/cl7uvYz9hfd0D3QPmBbweFB2WHYg9dqvOoqzusf3hDPVwvrR86knak62jQ0ZYG+4Y9jbTG8mPgmPTYy+Ppx++eiDjRfpJxsuFn8593nKKeKmuCmhY1DTfzm2UtKS3dp8NPt7d6t576xeGXg2eMz9Sc1Tq74RzxXMk5+fmi8yNtorbXF7Iu9LfPa390MfninUuzLnVejrh89UrIlYsdzI7zV32unrnmde30dcb15hvuN5puut089avbr6c63Tubbnncauny7GrtntF9rsev58LtoNtX7rDu3Oid2dt9N+Hu/Xtp92T3ufcHH+Q+ePuw8OHYo+WPMY/Lnqg9qXyq/7T2N+vfGmXusrN9QX03n8U9e9TP6X/1u+T3rwMlzynPK18YvagbdB48MxQy1PVy9suBV6JXY69L/6H+jx1vrN78/If/HzeHk4cH3orfyt+te6/z/uAH1w/tIzEjTz/mfRwbLfuk8+nQZ8bnji9JX16MLfiK+1r1zfpb6/eI74/leXK5iC1mj0sBFDLgzEwA3h1EtHEKAFRElxNnT2jrcYMmvgfGCfwnntDf4+YOQAMyKWQR0x+Akwo5i8wqyKyQRPH+AHZxUY5/mSTTxXkiFxlRlphPcvl7AwBwrQB8E8vlYzvl8m/7kGIfANCWP6HpFYZFtHyD3vJRg6LbPe3g7zah9//U499noKjAFfx9/ieoZhkWVvYkwwAAAGxlWElmTU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAIdpAAQAAAABAAAATgAAAAAAAACQAAAAAQAAAJAAAAABAAKgAgAEAAAAAQAAAEKgAwAEAAAAAQAAAEIAAAAAgodoEQAAAAlwSFlzAAAWJQAAFiUBSVIk8AAABMtJREFUeAHtXM2KFDEQzrQKruIu4mEXRFlUVLz4A4K7B99AcO8io0/gwQfxDVzFuwu+gQf34EG8iOAPKAh6EFlBFMSf/qa2uqszlVR6ZtYxM5PDJNVVSer78nU6KrHzpyxuVlwx44AY2O0T8eb9D7f5fMu9fPvdff7y0/36nbdgdhUdd+jgHnf62JxbObvgjh/d60Pu2R35ajx49Mk9frqlBk7Kw8sXF9y1K4t9cCoi7tz/4F68/tYXMIkPzpzY725dP9yA1tsjoIRpIQHogRWYZSmwJ4Reh06nI2Nd7rYEA8zAzqXAxhgq/pc1d9vHKbEX+Dr4JbzypJDc/YxXYi/wifRLeOXpU5q7n/FK7EXsnBBeeRoqd7/EHj1ZhleeiMjdz8pArRKR+0pb+UsCuK0SkftKW/kzeFmrRHCAxWzufsaJOkqExWzufpOI8EpP1jnCJCK80pN1jjCJ4ICwMigidz/jRD3bI7bZUInIfaWt/KUSuK0SEd4jqFvufgYva5UIDrCYzd3POFFHifhfV/7k8lwPw7D5mUSEV3r854ju2pK7ffOIWzk/X+Go803Lr+ooGqoiwkyP9xzRXVt0q9sE3CgJYTLqfNPyE/irpkoEe2um6ck4bSiBSeD8JBl41jY/Hgd1lIiaaeoyLlsjgUGAjEH3DB4DtUpEW2Z3Mj5GAgA8efbVvXpX/200nln5IMYvKhHDrvylcwdc9+pSNdeg46WQsP7wo2s7fpWYaPT926fw9ZiVk4BpywYJkGuvlJs4EuWS0p/HTyHh3kbzH2najM85cR0lgpPiYMtukFB26m1u5Ua+vkFkWP3Zn0KCJDg1Px6f42Wtvhrhdyz8ncanrFKCmGH1wrwDMCrh/uxPIUFTAvdHbeVPsc1fVRE+c7Ud/k6fWt7XHFlYqcqQ5wTRvWpiY4wrIZwfDUL+akDRUBXB/jCzFCH9SHCzTDRUmsro7z+cEvrHwxOZn2ZTL/pVFcEBtRLoiWXfxQ5ehvoHHx4vpIwUEuJKSMvPz5/zQq0qwmIy5m+rjBQSwnsCQYnlgwjfT72av6oifOba2qnKcOXeGVIP0rT3BALTNr8mBWSpRHAgmJSTtLGhDHwj+A9GPCbX2DNiBSRoShg0H8zl5y/njxIhJ0WntralDJmIbO+UEvz85Zwt9wj7HIDB5Ttp7RkyGbRDSqC49vOjX50P9aexmr+qInzmajvtO13H02SpyrCVMNj8dT7/4BwByDXzRIC0LWXEldA/njVfip9GpV9VERxQM0lPhrVDyrCVMJr5/fwZJ+qWewR1lSuNJ21sXxnjVgIhck5VhM/cqG1WBpIAMX4Z9Xz+eP58sFUiOBArLQcZpQ0CNCXt1HzA5OfPOFGrrwYHyKTwbNJsxolaJUJbKeo0mu/4uMeXBHBbJSK88qP5jo97fAYva5UIDgivHEXk7mecqKNEhFeOhsjdbxKR+0pb+UsCuK0qIveVtvJn8LJWieAAi9nc/YwTdZQIi9nc/SYR4ZWenSO2yZvgcwTuRYZKWBnUI3e/xF7gcmio5L4HWPlL7AVuyPol95W28me8EnuBa8J+sZjM3c94JfYCd6VxTXjaCjDLe+K9cwTuSuOa8LQUYPXvh1d3w0HC7JK8kMK0/rcJfwHkVMYgi4xhOgAAAABJRU5ErkJggg==");background-size:100%}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>2026å¹´å¼€å¹´çš„AIæ™ºèƒ½ä½“é¡¹ç›®ä¸­ï¼Œ<strong>OpenClaw</strong>Â æ— ç–‘æ˜¯è¿‘æœŸæœ€å—ç©ç›®çš„ç°è±¡çº§å¼€æºæˆæœã€‚è¯¥é¡¹ç›®åœ¨ GitHub ä¸Šå¼€æºä¸åˆ°ä¸€ä¸ªæœˆï¼Œä¾¿æ–©è·è¿‘Â <strong>15 ä¸‡ Star</strong>ï¼Œçƒ­åº¦ç”šè‡³è¶…è¶Š Claude Codeã€‚æœ‰è¶£çš„æ˜¯ï¼Œå®ƒæ›¾åœ¨çŸ­çŸ­ä¸€ä¸ªæœˆå†…å†ç»ä¸‰æ¬¡æ›´åâ€”â€”ä» Clawd Bot åˆ° MoltBotï¼Œå†åˆ°å¦‚ä»Šçš„ OpenClawï¼Œå…¶è¿­ä»£ä¹‹å¿«ç”šè‡³è¶…è¿‡äº†ç¬”è€…çš„æ›´æ–‡é€Ÿåº¦ã€‚</p>
<p><strong>OpenClaw</strong> ä¸ä»…å—åˆ°å¼€å‘è€…ç¤¾åŒºçš„ç‹‚çƒ­è¿½æ§ï¼Œè¿˜è·å¾—äº† OpenAI è”åˆåˆ›å§‹äºº Karpathy çš„é«˜åº¦è¯„ä»·ï¼Œè¢«ç§°ä¸ºâ€œè¿„ä»Šä¸ºæ­¢æœ€å®ç”¨çš„æ™ºèƒ½ä½“é¡¹ç›®â€ã€‚å…¶å½±å“åŠ›ç”šè‡³æº¢å‡ºæŠ€æœ¯åœˆï¼Œä¸€åº¦å› ä¼—å¤šç”¨æˆ·äº‰ç›¸éƒ¨ç½²è€Œå¸¦åŠ¨ Mac Mini æŠ¢è´­çƒ­æ½®ï¼Œè¶³ä»¥è§è¯å®ƒçš„å—æ¬¢è¿ç¨‹åº¦ã€‚</p>
<p>ç›®å‰ï¼Œç½‘ç»œä¸Šå·²æ¶Œç°å¤§é‡ OpenClaw çš„éƒ¨ç½²æ•™ç¨‹ï¼Œæœ¬æ–‡ä¸å†é‡å¤èµ˜è¿°ï¼ˆæ–‡æœ«å°†é™„ä¸Šç¬”è€…æ¨èçš„æœ¬åœ°éƒ¨ç½²æ•™ç¨‹é“¾æ¥ï¼‰ã€‚æœ¬ç¯‡å†…å®¹ç¬”è€…é‡ç‚¹åœ¨äºè§£æÂ <strong>OpenClaw çš„æ ¸å¿ƒç‰¹æ€§ä¸è®¾è®¡æ€è·¯</strong>ï¼Œé€šè¿‡é€šä¿—æ˜“æ‡‚çš„åŸç†è§£è¯»ï¼Œå¸®åŠ©å¤§å®¶åœ¨ä½“éªŒå…¶å¼ºå¤§åŠŸèƒ½çš„åŒæ—¶ï¼Œæ·±å…¥ç†è§£å…¶å·¥ä½œæœºåˆ¶ï¼ŒçœŸæ­£åšåˆ°<strong>çŸ¥å…¶ç„¶ï¼Œäº¦çŸ¥å…¶æ‰€ä»¥ç„¶</strong>ã€‚</p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dd3eeb24d7ee453dacf3a0b0d533f0e8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L55yf5aW9546p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770778510&amp;x-signature=4qiB4UFED8ofvoeVzayjyiSggEM%3D" alt="0.png" width="70%" loading="lazy"/></p>
<h2 data-id="heading-1">ä¸€ã€OpenClawç‰¹æ€§è¯¦è§£</h2>
<h3 data-id="heading-2">1.1 OpenClawèƒ½åŠ›æ¦‚è§ˆ</h3>
<p>ä½œä¸º 2026 å¹´ä»¥æ¥æœ€å—å…³æ³¨çš„å¼€æºé¡¹ç›®ï¼ŒOpenClaw çš„èƒ½åŠ›è¦†ç›–èŒƒå›´æå¹¿ï¼Œå‡ ä¹å¯ä»¥è§†ä½œä¸€ä½å…¨èƒ½çš„â€œæ•°å­—å‘˜å·¥â€ã€‚å…¶ä¸»è¦åº”ç”¨åœºæ™¯åŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>è‡ªåŠ¨åŒ–ä¸å¼€å‘</strong>ï¼šæµè§ˆå™¨è‡ªåŠ¨åŒ–ã€AI è‡ªåŠ¨ç¼–ç¨‹ã€æ•°æ®å¤„ç†ä¸æŠ¥å‘Šç”Ÿæˆã€‚</li>
<li><strong>æ—¥å¸¸åŠå…¬è¾…åŠ©</strong>ï¼šè‡ªåŠ¨å›å¤é‚®ä»¶ã€å…¨ç½‘å•†å“æ¯”ä»·ã€æ•´ç†å¤‡å¿˜å½•ã€ä¼šè®®å½•éŸ³è½¬æ–‡å­—çºªè¦ç­‰ã€‚</li>
<li><strong>æ™ºèƒ½è®¾å¤‡è”åŠ¨</strong>ï¼šæ¥å…¥æ™ºèƒ½å®¶å±…ï¼Œè‡ªåŠ¨è°ƒèŠ‚ç¯å…‰ã€æ¸©åº¦ç­‰ç¯å¢ƒå‚æ•°ã€‚</li>
<li><strong>è·¨ç»ˆç«¯è¿œç¨‹åä½œ</strong>ï¼šé€šè¿‡ä¸ iMessage ç­‰å³æ—¶é€šè®¯å·¥å…·å¯¹æ¥ï¼Œç”¨æˆ·å¯ç›´æ¥åœ¨æ‰‹æœºç«¯å‘ OpenClaw ä¸‹è¾¾æŒ‡ä»¤ï¼Œè¿œç¨‹å®‰æ’å·¥ä½œã€‚æ›´æœ‰å¼€å‘è€…å®ç°äº†é€šè¿‡ Apple Watch è¿œç¨‹æŒ‡æŒ¥ OpenClaw åˆå¹¶ PRã€è‡ªåŠ¨ Debug ç­‰æ“ä½œã€‚</li>
</ul>
<p>æ€»çš„æ¥è¯´å‡¡æ˜¯èƒ½å¤Ÿé€šè¿‡Â <strong>Skillsï¼ˆæŠ€èƒ½æ¨¡å—ï¼‰</strong> Â æˆ–Â <strong>MCPï¼ˆModel Context Protocolï¼Œæ¨¡å‹ä¸Šä¸‹æ–‡åè®®ï¼‰</strong> Â å°è£…å®ç°çš„åŠŸèƒ½ï¼ŒOpenClaw çš†èƒ½æ— ç¼è¡”æ¥ã€‚</p>
<p>æ³¨ï¼šå¦‚å¯¹ Agent Skills æˆ– MCP ä¸ç†Ÿæ‚‰ï¼Œå¯å‚é˜…ç¬”è€…å¾€æœŸæ–‡ç« ï¼š</p>
<ul>
<li>ã€Š<a href="https://juejin.cn/post/7598918127578972194" target="_blank" title="https://juejin.cn/post/7598918127578972194">Agent Skills å®Œå…¨æŒ‡å—ï¼šæ ¸å¿ƒæ¦‚å¿µä¸¨è®¾è®¡æ¨¡å¼ä¸¨å®æˆ˜ä»£ç </a>ã€‹</li>
<li>ã€Š<a href="https://juejin.cn/post/7488895565314949120" target="_blank" title="https://juejin.cn/post/7488895565314949120">ç†è®º+ä»£ç ä¸€æ–‡å¸¦ä½ æ·±å…¥æµ…å‡º MCPï¼šäººå·¥æ™ºèƒ½å¤§æ¨¡å‹ä¸å¤–éƒ¨ä¸–ç•Œäº¤äº’çš„é©å‘½æ€§çªç ´</a>ã€‹</li>
</ul>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8b858711bb244d0b8f00948fdc92d520~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L55yf5aW9546p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770778510&amp;x-signature=JrV4cIExlXTwTZPL92ESW%2F0kxfI%3D" alt="2.png" loading="lazy"/></p>
<h3 data-id="heading-3">1.2 OpenClaw æ ¸å¿ƒç‰¹æ€§</h3>
<p>é™¤äº†å¹¿æ³›çš„èƒ½åŠ›è¦†ç›–ï¼ŒOpenClaw åœ¨è®¾è®¡ä¸Šè¿˜å…·æœ‰ä»¥ä¸‹ä¸‰å¤§æ ¸å¿ƒä¼˜åŠ¿ï¼š</p>
<p><strong>1. å…¨å¹³å°æ¥å…¥ä¸å®æ—¶äº¤äº’</strong><br/>
OpenClaw å¯è½»æ¾æ¥å…¥å„ç±»èŠå¤©å·¥å…·ï¼ˆå¦‚ Telegramã€å¾®ä¿¡ã€iMessage ç­‰ï¼‰ä¸æ™ºèƒ½è®¾å¤‡ã€‚ç”¨æˆ·å³ä½¿ä¸åœ¨ç”µè„‘å‰ï¼Œä¹Ÿèƒ½é€šè¿‡æ‰‹æœºè¿œç¨‹æŒ‡æ´¾ä»»åŠ¡ã€‚OpenClaw ä¸ä»…èƒ½æ‰§è¡Œæ“ä½œï¼Œè¿˜èƒ½å®æ—¶å›ä¼ å±å¹•æˆªå›¾ã€æ‰§è¡Œæ—¥å¿—ç­‰ä¿¡æ¯ï¼Œè®©æ•´ä¸ªè¿‡ç¨‹å®Œå…¨é€æ˜ã€‚æ­¤å¤–ï¼Œé€šè¿‡å¯¹æ¥éº¦å…‹é£ã€æ‘„åƒå¤´ç­‰å¤–è®¾ï¼Œå®ƒè¿˜èƒ½ç›´æ¥å¤„ç†éŸ³è§†é¢‘ä¿¡æ¯ï¼Œå®ç°æ›´è‡ªç„¶çš„äº¤äº’ã€‚</p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b611d17e8edf471b921409285adcb516~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L55yf5aW9546p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770778510&amp;x-signature=0op8yMs%2Bngwo7Ne%2FLc9jIVyjLPw%3D" alt="3.png" width="50%" loading="lazy"/></p>
<p><strong>2. æ™ºèƒ½å®šæ—¶ä»»åŠ¡ä¸ä¸»åŠ¨åˆ¤æ–­</strong><br/>
OpenClawå†…ç½®å¼ºå¤§çš„è‡ªç„¶è¯­è¨€å®šæ—¶ä»»åŠ¡å¼•æ“ã€‚ç”¨æˆ·åªéœ€ç”¨æ—¥å¸¸è¯­è¨€æè¿°ï¼Œå³å¯åˆ›å»ºä¸´æ—¶æé†’ã€å®šæœŸæ£€æŸ¥æ”¶ä»¶ç®±ç­‰ä»»åŠ¡ã€‚æ›´é‡è¦çš„æ˜¯ï¼ŒOpenClaw å…·å¤‡äº‹ä»¶ç´§æ€¥ç¨‹åº¦åˆ¤æ–­èƒ½åŠ›ï¼Œå¯è‡ªä¸»å†³å®šæ˜¯å¦é€šè¿‡èŠå¤©å·¥å…·ä¸»åŠ¨è”ç³»ç”¨æˆ·ã€‚è¿™ä¸€åšæ³•æ‰“ç ´äº†ä¼ ç»Ÿâ€œæŒ‡ä»¤-æ‰§è¡Œâ€çš„è¢«åŠ¨å¾ªç¯ï¼Œè®©æ™ºèƒ½ä½“å……åˆ†å‘æŒ¥å®ƒçš„ä¸»è§‚èƒ½åŠ¨æ€§ã€‚</p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a506b7b3461b400d87619fd2972d7ef2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L55yf5aW9546p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770778510&amp;x-signature=A%2BGOqfYRcgDQBZiQHZF8UiZEmJs%3D" alt="4.png" width="50%" loading="lazy"/></p>
<p><strong>3. æŒç»­è¿›åŒ–çš„é•¿æœŸè®°å¿†</strong><br/>
OpenClaw æ”¯æŒå°†è®°å¿†ä»¥æ–‡ä»¶å½¢å¼å­˜å‚¨åœ¨æœ¬åœ°ï¼Œå¹¶èƒ½åœ¨å¯¹è¯ä¸­å¿«é€Ÿæ£€ç´¢ç›¸å…³è®°å¿†å¹¶æ”¾å…¥ä¸Šä¸‹æ–‡ã€‚éšç€ä½¿ç”¨é¢‘æ¬¡å¢åŠ ï¼Œå®ƒä¼šä¸»åŠ¨æ›´æ–°å’Œä¼˜åŒ–è¿™äº›è®°å¿†æ–‡ä»¶ï¼Œå®ç°â€œè¶Šç”¨è¶Šèªæ˜â€çš„æŒç»­å­¦ä¹ æ•ˆæœã€‚</p>
<p>ç»è¿‡å…¨ç½‘å¤§é‡çš„å®è·µè¯æ˜ï¼ŒOpenClawä¸ä»…æ˜¯ä¸€ä¸ªåŠŸèƒ½å®Œå–„ã€æ€§èƒ½å‰æ²¿çš„å…¨æ–°ä¸€ä»£æ™ºèƒ½ä½“ï¼Œè€Œä¸”è¿è¡Œç¨³å®šï¼Œå„é¡¹å‚æ•°ç”Ÿæˆå®Œæ•´ï¼Œæ˜¯ä¸€é¡¹å®Œå…¨èƒ½å¤Ÿåº”ç”¨äºå·¥ä¸šçº§åœºæ™¯çš„é«˜æ€§èƒ½æ™ºèƒ½ä½“ã€‚æˆ–è®¸OpenClawçš„å‡ºç°æ˜¯æˆ‘ä»¬äººç±»ç¬¬ä¸€æ¬¡çœŸæ­£æ„ä¹‰ä¸Šæ‹¥æœ‰äº†æœŸå¾…å·²ä¹…çš„æ•°å­—å‘˜å·¥ï¼</p>
<h2 data-id="heading-4">äºŒã€OpenClaw åŸç†è§£æ</h2>
<p>OpenClaw ç”±å‰ PSPDFKit åˆ›å§‹äºº Peter Steinberger å¼€å‘ï¼Œä¸€ä½è‡ªç§°ä¸ºâ€œé€€ä¼‘ç¨‹åºå‘˜â€ï¼Œå´æ‰“é€ å‡ºäº†ä¸€æ¬¾é¢‡å…·é©å‘½æ€§çš„å¼€æºä¸ªäººAIåŠ©æ‰‹çš„å¤§ç¥! è¯¥é¡¹ç›®æœ€åˆçš„ç†å¿µæ˜¯ â€œClaude with handsâ€ï¼ˆæ‹¥æœ‰åŒæ‰‹çš„ Claudeï¼‰ï¼Œæ—¨åœ¨å°†å¤§å‹è¯­è¨€æ¨¡å‹çš„æ™ºèƒ½ä¸æœ¬åœ°ç³»ç»Ÿçš„æ“ä½œèƒ½åŠ›æ·±åº¦èåˆã€‚</p>
<p>åˆæ¬¡æ¥è§¦ OpenClawï¼Œå¤§å®¶æˆ–è®¸ä¼šè”æƒ³åˆ°æ­¤å‰å¤§ç«çš„Â <a href="https://juejin.cn/post/7479212482546073611" target="_blank" title="https://juejin.cn/post/7479212482546073611">Manus</a>Â ç­‰é¡¹ç›®ã€‚ä½† OpenClaw å¹¶éä¸€ä¸ªè¿è¡Œåœ¨æµè§ˆå™¨ä¸­çš„ç½‘é¡µåº”ç”¨ï¼Œè€Œæ˜¯ä¸€ä¸ªéƒ¨ç½²äºæœ¬åœ°çš„åå°æœåŠ¡ã€‚è¿™æ„å‘³ç€å®ƒæ‹¥æœ‰æé«˜çš„éšç§å®‰å…¨æ€§å’Œå¯¹ä½ ç”µè„‘çš„ç›´æ¥æ“ä½œæƒé™ã€‚å¤§å®¶å¯ä»¥å°†å…¶ç†è§£ä¸ºä¸€ä¸ªæˆç†Ÿçš„â€œComputer Useâ€ï¼Œèƒ½å¤Ÿæ‰§è¡Œå‘½ä»¤è¡ŒæŒ‡ä»¤ã€åœ¨æ²™ç›’ç¯å¢ƒä¸­è¿è¡Œä»£ç ï¼Œå¹¶æ“æ§æµè§ˆå™¨ç­‰åº”ç”¨ã€‚</p>
<p>OpenClaw ä¸ Manus ç­‰é¡¹ç›®çš„æœ¬è´¨åŒºåˆ«ï¼Œåœ¨äºå…¶ä»¥ä¸‹å‡ é¡¹æ ¸å¿ƒæ¶æ„çš„å·§å¦™è®¾è®¡ï¼š</p>
<h3 data-id="heading-5">2.1 ç½‘å…³ç³»ç»Ÿï¼šåè®®æ— å…³çš„æ™ºèƒ½ç¼–æ’å±‚</h3>
<p>OpenClaw æ‹¥æœ‰ä¸€ä¸ªå¼ºå¤§ä¸”çµæ´»çš„<strong>ç½‘å…³ç³»ç»Ÿï¼ˆGateway Systemï¼‰</strong> ã€‚å®ƒä¸ä»…ä»…æ˜¯ä¸€ä¸ªç®€å•çš„ API è½¬å‘å™¨ï¼Œæ›´æ˜¯ä¸€ä¸ª<strong>åè®®æ— å…³çš„ç¼–æ’å±‚ï¼ˆProtocol-Agnostic Orchestratorï¼‰</strong> ã€‚å…¶æ ¸å¿ƒåœ¨äºç»´æŠ¤ä¸€ä¸ªæŒä¹…çš„ WebSocket è¿æ¥ï¼Œæ„å»ºå‡ºä¸€æ¡å®æ—¶ã€åŒå‘çš„é€šä¿¡é€šé“ã€‚æ— è®ºæŒ‡ä»¤æ¥è‡ªç»ˆç«¯å‘½ä»¤è¡Œã€Web æ§åˆ¶é¢æ¿ï¼Œè¿˜æ˜¯é€šè¿‡ iMessage ç­‰é€šè®¯å·¥å…·è¿œç¨‹å‘é€ï¼Œç½‘å…³éƒ½èƒ½å°†è¿™äº›å¼‚æ„çš„è¾“å…¥ä¿¡å·å³æ—¶æ ‡å‡†åŒ–ï¼Œå¹¶ç»Ÿä¸€ç»´æŠ¤<strong>ä¼šè¯çŠ¶æ€ï¼ˆSession Stateï¼‰</strong> ã€‚</p>
<p>è¿™ä¹Ÿè§£é‡Šäº†ä¸ºä½•è®¸å¤šç”¨æˆ·é€‰æ‹©ä½¿ç”¨ Mac Mini ä½œä¸º OpenClaw çš„æœåŠ¡å™¨ï¼šä¸€æ–¹é¢æ˜¯ä¸ºäº†æ‹¥æœ‰ä¸€ä¸ª 7x24 å°æ—¶å¾…å‘½çš„ä¸“å± AI åŠ©æ‰‹ï¼›å¦ä¸€æ–¹é¢ï¼Œåœ¨è‹¹æœç”Ÿæ€ä¸‹ï¼Œç”¨æˆ·å¯ä»¥ç›´æ¥é€šè¿‡ iPhone æˆ– Apple Watch ä¸Šçš„ iMessage ä¸è¿œç¨‹ OpenClaw å¯¹è¯ï¼Œæ— éœ€å®‰è£…ä»»ä½•é¢å¤–æ’ä»¶ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6743cd220f1348cbbe761fbd5a68ae79~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L55yf5aW9546p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770778510&amp;x-signature=3rOc5Tj7KDK3mhi8Lh6zinrM8S4%3D" alt="6.png" loading="lazy"/></p>
<h3 data-id="heading-6">2.2 å››å±‚è®°å¿†æ¶æ„ï¼šå®ç°æ— é™é•¿ä¸Šä¸‹æ–‡ä¸æŒç»­è¿›åŒ–</h3>
<p>OpenClaw çš„å¦ä¸€å¤§æ ¸å¿ƒä¼˜åŠ¿åœ¨äºå…¶ç²¾å·§çš„ä¸Šä¸‹æ–‡ç®¡ç†å·¥ç¨‹ã€‚å®ƒé€šè¿‡Â <strong>SOULã€TOOLSã€USERã€Session</strong>Â å››å±‚è®°å¿†ç»“æ„ï¼Œæ„å»ºäº†ä¸€å¥—é«˜æ€§èƒ½çš„ä¸Šä¸‹æ–‡ç®¡ç†ç³»ç»Ÿã€‚</p>
<ol>
<li><strong>SOULï¼ˆçµé­‚ï¼‰</strong> ï¼šæ™ºèƒ½ä½“çš„ä¸å¯å˜å†…æ ¸ï¼ŒåŒ…å«äº†å…¶åº•å±‚çš„ç³»ç»ŸæŒ‡ä»¤ä¸æ ¸å¿ƒè¡Œä¸ºå‡†åˆ™ã€‚</li>
<li><strong>TOOLSï¼ˆå·¥å…·ï¼‰</strong> ï¼šåŠ¨æ€çš„å·¥å…·æ³¨å†Œè¡¨ã€‚ç³»ç»Ÿå¯æ ¹æ®å½“å‰ç¯å¢ƒï¼Œçµæ´»æ³¨å…¥å¯ç”¨çš„ API å’Œèƒ½åŠ›ï¼Œå®ç°æŒ‰éœ€è°ƒç”¨ã€‚</li>
<li><strong>USERï¼ˆç”¨æˆ·è®°å¿†ï¼‰</strong> ï¼šåŸºäºè¯­ä¹‰å‘é‡çš„é•¿æœŸè®°å¿†åº“ã€‚OpenClaw ä¼šåœ¨äº¤äº’ä¸­è‡ªåŠ¨å­¦ä¹ å¹¶å­˜å‚¨ç”¨æˆ·çš„åå¥½ã€ä¹ æƒ¯ç”šè‡³ä»£ç é£æ ¼ï¼Œä»è€Œå®ç°â€œè¶Šç”¨è¶Šæ‡‚ä½ â€çš„ä¸ªæ€§åŒ–ä½“éªŒã€‚</li>
<li><strong>Sessionï¼ˆä¼šè¯è®°å¿†ï¼‰</strong> ï¼šå®æ—¶çš„æƒ…æ™¯è®°å¿†ã€‚å®ƒèƒ½æ•æ‰å½“å‰å¯¹è¯ä¸­æœ‰ä»·å€¼çš„ä¿¡æ¯ï¼Œå¹¶åŠ¨æ€åœ°å°†å…¶çº³å…¥ä¸Šä¸‹æ–‡ï¼Œä¿è¯å¯¹è¯çš„è¿è´¯æ€§ã€‚</li>
</ol>
<p>è¿™å¥—åˆ†å±‚è®°å¿†ä½“ç³»ä¸ä»…æ”¯æ’‘äº†â€œæ— é™é•¿ä¸Šä¸‹æ–‡â€çš„å¯¹è¯ä½“éªŒï¼Œæ›´æ˜¯ OpenClaw èƒ½å¤ŸæŒç»­å­¦ä¹ ã€ä¸æ–­è¿›åŒ–çš„æŠ€æœ¯åŸºçŸ³ã€‚è¿™ä¸€æ•´å¥—çš„ä¸Šä¸‹æ–‡è®°å¿†ç®¡ç†å·¥ç¨‹å€¼å¾—å¤§å®¶å¼€å‘æ™ºèƒ½ä½“å€Ÿé‰´å­¦ä¹ ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0a46634fdc7a49fbbdd74921e4c1f197~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L55yf5aW9546p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770778510&amp;x-signature=J6fEFfMZh5d6UN0u6g2aGXud6j0%3D" alt="7.png" loading="lazy"/></p>
<h3 data-id="heading-7">2.3 Agent Skills åŠŸèƒ½ä½“ç³»ï¼šå³æ’å³ç”¨çš„èƒ½åŠ›æ‰©å±•</h3>
<p>å¦‚æœè¯´ MCP åè®®æ˜¯ä¸ºäº†è®©æ™ºèƒ½ä½“æ›´é«˜æ•ˆåœ°â€œè°ƒç”¨å·¥å…·â€ï¼Œé‚£ä¹ˆÂ <strong>Agent Skills</strong>Â åˆ™æ˜¯ç›´æ¥ä¸ºæ™ºèƒ½ä½“â€œèµ‹äºˆèƒ½åŠ›â€ã€‚</p>
<p>ä¾‹å¦‚ï¼Œå®‰è£…Â <code>apple-notes</code>Â Skill åï¼ŒOpenClaw ä¾¿å³åˆ»è·å¾—è¯»å†™å’Œæ“ä½œè‹¹æœä¾¿ç­¾çš„å…¨éƒ¨æƒé™ï¼›åŠ è½½Â <code>bird</code>Â Skillï¼Œå®ƒå°±èƒ½è‡ªåŠ¨å¸®ä½ æœé›†ã€æ•´ç†æ¨ç‰¹ä¿¡æ¯ï¼Œç”šè‡³ä»£ä¸ºå‘å¸ƒæ¨æ–‡ã€‚ç®€è€Œè¨€ä¹‹ï¼Œ<strong>æƒ³è®© OpenClaw å…·å¤‡ä»€ä¹ˆèƒ½åŠ›ï¼Œåªéœ€å®‰è£…å¯¹åº”çš„ Skill å³å¯</strong>ã€‚</p>
<p>æ­¤å¤–ï¼ŒOpenClaw è¿˜æ”¯æŒå®Œæ•´çš„<strong>å¤šæ¨¡æ€æ¨¡å‹è°ƒç”¨</strong>ï¼Œå¹¶é›†æˆäº†è¯¸å¦‚çœ‹é—¨ç‹—ï¼ˆç›‘æ§ï¼‰å­ç³»ç»Ÿã€æ’ä»¶ä½“ç³»ã€è·¨å¹³å°éƒ¨ç½²ç­‰å¤šé¡¹ä¼ä¸šçº§ç‰¹æ€§ã€‚ç”±æ­¤å¯è§ï¼Œè¿™ç»éä¸€ä¸ªç®€å•çš„â€œä¸ªäººç©å…·â€ï¼Œè€Œæ˜¯åœ¨ Agent Skills ä¸ Vibe Coding æ—¶ä»£èƒŒæ™¯ä¸‹ï¼Œè¶…è¶Š Manus çš„ã€é¢å‘æœªæ¥çš„æ–°ä¸€ä»£é€šç”¨æ™ºèƒ½ä½“å¹³å°ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8864ac619cc0453ba5b9c789e933c0bb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L55yf5aW9546p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770778510&amp;x-signature=00uX14ToOWk47vqyWOrGm4tdiK8%3D" alt="8.png" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1ac4100b4e6548a1b8909017b35d9129~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L55yf5aW9546p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770778510&amp;x-signature=12XJz7e7%2Fe86R3IozLf797R%2BuZI%3D" alt="9.png" loading="lazy"/></p>
<h2 data-id="heading-8">ä¸‰ã€OpenClaw å®ç”¨æŒ‡å—ï¼šæ¥å…¥å›½å†…å¤§æ¨¡å‹ä¸ä¸»æµèŠå¤©å·¥å…·</h2>
<p>æ— è®ºæ˜¯å¸Œæœ›æ‹¥æœ‰ä¸€ä¸ªä¸“å±çš„â€œè´¾ç»´æ–¯â€æ¥æå‡å·¥ä½œæ•ˆç‡ï¼Œè¿˜æ˜¯ä½œä¸ºå¼€å‘è€…å¸Œæœ›å­¦ä¹ æœ€å‰æ²¿çš„ Agent è®¾è®¡ç†å¿µï¼ŒOpenClaw éƒ½æ˜¯ä¸€ä¸ªæå…·ä»·å€¼çš„é«˜è´¨é‡é¡¹ç›®ï¼Œéå¸¸å€¼å¾—åœ¨æœ¬åœ°è¿›è¡Œæ·±å…¥å°è¯•å’Œå®è·µã€‚</p>
<p>ä¸ºäº†å¸®åŠ©å¤§å®¶å¿«é€Ÿå®ç°ä¸€ä¸ªâ€œèƒ½å¹²äº‹ã€ä¼šæ²Ÿé€šâ€çš„ä¸ªäººæ™ºèƒ½ä½“ï¼Œä»¥ä¸‹æ˜¯ç¬”è€…æ•´ç†çš„Â <strong>OpenClaw æ¥å…¥å›½å†…ä¸»æµèŠå¤©å·¥å…·ä¸å›½äº§å¤§æ¨¡å‹çš„å®ç”¨æŒ‡å—æ±‡æ€»</strong>ã€‚</p>
<h3 data-id="heading-9">3.1 ä¸»æµèŠå¤©å·¥å…·æ¥å…¥</h3>
<p>OpenClaw å¼ºå¤§çš„ç½‘å…³ç³»ç»Ÿä½¿å…¶èƒ½è½»æ¾é€‚é…å„ç±»å³æ—¶é€šè®¯å·¥å…·ã€‚ä»¥ä¸‹æ˜¯å‡ ä¸ªä¸»æµå¹³å°çš„æ¥å…¥æ•™ç¨‹ï¼š</p>
<ul>
<li>
<p><strong>æ¥å…¥ WhatsApp æŒ‡å—</strong><br/>
è§†é¢‘æ•™ç¨‹ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV1kH6nBFEPq" target="_blank" title="https://www.bilibili.com/video/BV1kH6nBFEPq" ref="nofollow noopener noreferrer">www.bilibili.com/video/BV1kHâ€¦</a></p>
</li>
<li>
<p><strong>æ¥å…¥é£ä¹¦æŒ‡å—</strong><br/>
è§†é¢‘æ•™ç¨‹ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV1kH6nBFEPq" target="_blank" title="https://www.bilibili.com/video/BV1kH6nBFEPq" ref="nofollow noopener noreferrer">www.bilibili.com/video/BV1kHâ€¦</a></p>
</li>
<li>
<p><strong>æ¥å…¥å¾®ä¿¡ã€é’‰é’‰ã€QQ ä¸€ç«™å¼æŒ‡å—</strong><br/>
è§†é¢‘æ•™ç¨‹ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV1MfFAz6EnR" target="_blank" title="https://www.bilibili.com/video/BV1MfFAz6EnR" ref="nofollow noopener noreferrer">www.bilibili.com/video/BV1Mfâ€¦</a></p>
</li>
</ul>
<h3 data-id="heading-10">3.2 å›½äº§å¤§æ¨¡å‹é›†æˆæ–¹æ¡ˆ</h3>
<p>é™¤äº†é»˜è®¤çš„ Claude/OpenAI æ¨¡å‹ï¼ŒOpenClaw æ¶æ„ä¹Ÿæ”¯æŒçµæ´»å¯¹æ¥å›½äº§å¤§æ¨¡å‹ï¼ˆå¦‚MinMaxç­‰ï¼‰ã€‚é€šå¸¸åªéœ€åœ¨é…ç½®ä¸­æ›¿æ¢å¯¹åº”çš„ API ç«¯ç‚¹ä¸å¯†é’¥ï¼Œå³å¯äº«å—å›½äº§æ¨¡å‹æœåŠ¡ï¼Œåœ¨æ•°æ®éšç§ä¸ç½‘ç»œå»¶è¿Ÿä¸Šæ›´å…·ä¼˜åŠ¿ã€‚</p>
<h3 data-id="heading-11">3.3 äº‘å¹³å°ä¸€ç«™å¼éƒ¨ç½²</h3>
<p>ç›®å‰ï¼Œ<strong>é˜¿é‡Œäº‘ã€ç«å±±å¼•æ“</strong>ç­‰ä¸»æµäº‘å¹³å°å·²æä¾›é¢„é›†æˆçš„ OpenClaw éƒ¨ç½²æ–¹æ¡ˆã€‚åœ¨å¯¹åº”çš„äº‘å¸‚åœºæˆ–AIå¹³å°æœåŠ¡ä¸­æœç´¢ â€œOpenClawâ€ï¼Œå³å¯æ‰¾åˆ°å®˜æ–¹æˆ–ç¤¾åŒºç»´æŠ¤çš„é•œåƒä¸éƒ¨ç½²æ¨¡æ¿ï¼Œå®ç°åˆ†é’Ÿçº§äº‘ç«¯ä¸Šçº¿ï¼Œéå¸¸é€‚åˆä¸æƒ³æŠ˜è…¾æœ¬åœ°ç¯å¢ƒçš„ç”¨æˆ·ã€‚</p>
<p><strong>å°è¯•éƒ¨ç½²å±äºå¤§å®¶çš„ OpenClawï¼Œå¼€å¯é«˜æ•ˆæ™ºèƒ½çš„â€œæ•°å­—å‘˜å·¥â€æ—¶ä»£å§ï¼</strong></p>
<h2 data-id="heading-12">å››ã€æ€»ç»“</h2>
<p>æœ¬æ–‡åˆ†äº«äº†OpenClawæ ¸å¿ƒç‰¹æ€§ä¸è®¾è®¡åŸç†ï¼Œå¹¶æä¾›äº†æ¥å…¥å›½äº§å¤§æ¨¡å‹ä¸ä¸»æµèŠå¤©å·¥å…·çš„å®ç”¨æŒ‡å—ã€‚OpenClawæ˜¯2026å¹´ç°è±¡çº§å¼€æºæ™ºèƒ½ä½“ï¼Œå®ƒé€šè¿‡ç‹¬ç‰¹çš„ç½‘å…³ç³»ç»Ÿå®ç°å…¨å¹³å°å®æ—¶äº¤äº’ï¼Œå‡­å€Ÿå››å±‚è®°å¿†æ¶æ„æ‹¥æœ‰é•¿æœŸè®°å¿†ä¸å­¦ä¹ èƒ½åŠ›ï¼Œå¹¶å€Ÿç”±Agent Skillsä½“ç³»çµæ´»æ‰©å±•åŠŸèƒ½æ­£å‘ç€æœªæ¥æ—¶ä»£çš„å…¨èƒ½æ•°å­—å‘˜å·¥è¿ˆè¿›ã€‚</p>
<p>2026æ³¨å®šæ˜¯å¤§æ¨¡å‹æ¥ç»­çˆ†å‘çš„ä¸€å¹´ï¼ä¸ºäº†è®©å¤§å®¶å½»åº•ææ‡‚å¤§æ¨¡å‹çš„ä½œç”¨åŸç†ï¼Œç¬”è€…ä¹Ÿå‘å¸ƒäº†<a href="https://juejin.cn/column/7594655863548248116" target="_blank" title="https://juejin.cn/column/7594655863548248116">ã€Šæ•°æ®åˆ°æ¨¡å‹åˆ°åº”ç”¨ï¼šå¤§æ¨¡å‹è®­ç»ƒå…¨æµç¨‹å®æˆ˜æŒ‡å—ã€‹</a>ä¸“æ ï¼Œé¢„è®¡ä¼šæœ‰50æœŸå†…å®¹ï¼Œå°†ç³»ç»Ÿæ‹†è§£ä»æ•°æ®å¤„ç†ã€æ¨¡å‹è®­ç»ƒåˆ°å¼ºåŒ–å­¦ä¹ ä¸æ™ºèƒ½ä½“å¼€å‘çš„å…¨æµç¨‹ï¼Œå¹¶å¸¦å¤§å®¶ä»é›¶å®ç°æ¨¡å‹ï¼Œå¸®åŠ©å¤§å®¶æŒæ¡å¤§æ¨¡å‹è®­ç»ƒçš„å…¨æŠ€èƒ½ï¼ŒçœŸæ­£æŒæ¡å¡‘é€ æ™ºèƒ½çš„èƒ½åŠ›ï¼æ„Ÿå…´è¶£å¤§å®¶å¯å…³æ³¨ç¬”è€…æ˜é‡‘è´¦å·ï¼Œæ›´å¯å…³æ³¨ç¬”è€…åŒåå¾®ä¿¡å…¬ä¼—å·ï¼š<strong>å¤§æ¨¡å‹çœŸå¥½ç©</strong>ï¼Œæ›´å¤šæ•™ç¨‹å’Œå¤§é‡å¤§æ¨¡å‹å­¦ä¹ èµ„æ–™åˆ†äº«~</p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼šå¤§æ¨¡å‹è®­ç»ƒå¯¹è®¡ç®—èµ„æºæœ‰ä¸€å®šè¦æ±‚ï¼Œå°¤å…¶æ˜¯GPUæ˜¾å­˜ã€‚ä¸ºé™ä½å­¦ä¹ é—¨æ§›ï¼Œç¬”è€…ä¸å›½å†…ä¸»æµäº‘å¹³å°åˆä½œï¼Œå¤§å®¶å¯ä»¥é€šè¿‡æ‰“å¼€é“¾æ¥:Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.lab4ai.cn%2Fregister%3FagentID%3Duser-XorgKKc56U" target="_blank" title="https://www.lab4ai.cn/register?agentID=user-XorgKKc56U" ref="nofollow noopener noreferrer">Lab4AI</a>Â ï¼Œä½“éªŒ<strong>H100 GPU 6.5å°æ—¶</strong>çš„ç®—åŠ›ã€‚æœ¬ç³»åˆ—æ‰€æœ‰å®æˆ˜æ•™ç¨‹å‡å°†åœ¨è¯¥å¹³å°ä¸Šå®Œæˆï¼Œå¸®åŠ©å¤§å®¶ä½æˆæœ¬ä¸Šæ‰‹å®è·µã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸€æ¬¡ WebGPU æµä½“ä¹‹æ—…]]></title>    <link>https://juejin.cn/post/7602544700475031562</link>    <guid>https://juejin.cn/post/7602544700475031562</guid>    <pubDate>2026-02-04T03:42:52.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602544700475031562" data-draft-id="7602512226999500850" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸€æ¬¡ WebGPU æµä½“ä¹‹æ—…"/> <meta itemprop="keywords" content="å‰ç«¯,é¢è¯•,JavaScript"/> <meta itemprop="datePublished" content="2026-02-04T03:42:52.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ˜é‡‘å®‰ä¸œå°¼"/> <meta itemprop="url" content="https://juejin.cn/user/1521379823340792"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸€æ¬¡ WebGPU æµä½“ä¹‹æ—…
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1521379823340792/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ˜é‡‘å®‰ä¸œå°¼
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T03:42:52.000Z" title="Wed Feb 04 2026 03:42:52 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    66
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»20åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>åŸæ–‡ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Ftympanus.net%2Fcodrops%2F2025%2F01%2F29%2Fparticles-progress-and-perseverance-a-journey-into-webgpu-fluids%2F" target="_blank" title="https://tympanus.net/codrops/2025/01/29/particles-progress-and-perseverance-a-journey-into-webgpu-fluids/" ref="nofollow noopener noreferrer">Particles, Progress, and Perseverance: A Journey into WebGPU Fluids</a></p>
<p>ä½œè€…ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Ftympanus.net%2Fcodrops%2Fauthor%2Fhector%2F" target="_blank" title="https://tympanus.net/codrops/author/hector/" ref="nofollow noopener noreferrer">Hector Arellano</a></p>
<p>æ—¥æœŸï¼š2025å¹´1æœˆ29æ—¥</p>
<p>ç¿»è¯‘ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FTUARAN" target="_blank" title="https://github.com/TUARAN" ref="nofollow noopener noreferrer">TUARAN</a></p>
</blockquote>
<blockquote>
<p>æ¬¢è¿å…³æ³¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FTUARAN%2Ffrontend-weekly-digest-cn" target="_blank" title="https://github.com/TUARAN/frontend-weekly-digest-cn" ref="nofollow noopener noreferrer">å‰ç«¯å‘¨åˆŠ</a>ï¼Œæ¯å‘¨æ›´æ–°å›½å¤–è®ºå›çš„å‰ç«¯çƒ­é—¨æ–‡ç« ï¼Œç´§è·Ÿæ—¶äº‹ï¼ŒæŒæ¡å‰ç«¯æŠ€æœ¯åŠ¨æ€ã€‚</p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/66a8f7b9d2d741bd8bb08aabe1c5e1aa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR5a6J5Lic5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770793485&amp;x-signature=%2BWk7ZnAXLhS03OdQS9rk8t%2FT0g0%3D" alt="image.png" loading="lazy"/></p>
<p>æœ¬æ–‡æ˜¯ä¸€æ®µå›é¡¾å¼çš„é•¿æ—…ç¨‹ï¼šä½œè€…ç”¨åå¤šå¹´çš„æ—¶é—´ä¸æ–­å°è¯•â€œæµè§ˆå™¨é‡Œåšæµä½“â€ï¼Œä» WebGL æ—¶ä»£çš„å„ç§ Hackï¼Œä¸€è·¯èµ°åˆ° WebGPU è®©è®¸å¤šâ€œç°ä»£å›¾å½¢ API èƒ½åŠ›â€å˜å¾—å¯ç”¨ã€‚</p>
<ul>
<li>Demoï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Ftympanus.net%2FTutorials%2FWebGPUFluid%2F" target="_blank" title="https://tympanus.net/Tutorials/WebGPUFluid/" ref="nofollow noopener noreferrer">tympanus.net/Tutorials/Wâ€¦</a></li>
<li>Codeï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FHectorArellanoDev%2FWebGPUFluids" target="_blank" title="https://github.com/HectorArellanoDev/WebGPUFluids" ref="nofollow noopener noreferrer">github.com/HectorArellâ€¦</a></li>
</ul>
<p>ç¼–è€…æŒ‰ï¼šå¦‚æœä½ å…³æ³¨è¿‡ Web å›¾å½¢åœˆå­ï¼Œå¯èƒ½çŸ¥é“ Hector Arellanoï¼ˆåˆå <a href="https://link.juejin.cn?target=https%3A%2F%2Fx.com%2Fhector_arellano" target="_blank" title="https://x.com/hector_arellano" ref="nofollow noopener noreferrer">Hat</a>ï¼‰ã€‚è¿™ç¯‡æ–‡ç« ä¸ä»…æ˜¯æŠ€æœ¯æ‹†è§£ï¼Œæ›´æ˜¯ä¸€æ®µå…³äºåšæŒã€è¯•é”™ã€ä¸ Web å›¾å½¢æ¼”è¿›çš„æ•…äº‹ã€‚</p>
<p>æ³¨æ„ï¼šDemo ä¾èµ– <strong>WebGPU</strong>ï¼Œå¹¶éæ‰€æœ‰æµè§ˆå™¨éƒ½æ”¯æŒã€‚è¯·ä½¿ç”¨æ”¯æŒ WebGPU çš„æµè§ˆå™¨ï¼ˆä¾‹å¦‚æœ€æ–°ç‰ˆ Chrome / Edgeï¼Œå¹¶ç¡®ä¿ WebGPU å·²å¯ç”¨ï¼‰ã€‚</p>
<p>åœ¨ç»§ç»­é˜…è¯»ä¹‹å‰â€¦â€¦å…ˆå»æ‹¿æ¯å–çš„â€”â€”<em>è¿™ç¯‡å¾ˆé•¿</em>ã€‚</p>
<h2 data-id="heading-0">13 å¹´å‰â€¦â€¦</h2>
<p>æˆ‘æ­£ç›¯ç€ç”µè„‘å±å¹•å‘å‘†ï¼ˆæ— èŠå¾—å¾ˆï¼‰ï¼Œä¸€ä¸ªå¾ˆè¦å¥½çš„æœ‹å‹ <a href="https://link.juejin.cn?target=https%3A%2F%2Fx.com%2FSirokos" target="_blank" title="https://x.com/Sirokos" ref="nofollow noopener noreferrer">Felix</a> æ‰“ç”µè¯ç»™æˆ‘ï¼Œéå¸¸è®¤çœŸåˆå…´å¥‹åœ°è¯´ï¼šGathering Party åˆšå‘å¸ƒäº†ä¸€ä¸ª<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3DLTOC_ajkRkU" target="_blank" title="https://www.youtube.com/watch?v=LTOC_ajkRkU" ref="nofollow noopener noreferrer">æ–° Demo</a>ã€‚å®ƒæœ‰æµä½“æ¨¡æ‹Ÿã€ç²’å­åŠ¨ç”»ã€æƒŠè‰³çš„ç€è‰²æ–¹æ¡ˆâ€”â€”æœ€é‡è¦çš„æ˜¯ï¼Œå®ƒçœŸçš„å¾ˆç¾ã€‚</p>
<p>é‚£æ—¶å€™ WebGL è¿˜ç®—â€œæ–°ä¸œè¥¿â€ï¼ŒæŠŠç¡¬ä»¶åŠ é€Ÿçš„ 3D å›¾å½¢å¸¦è¿›æµè§ˆå™¨ï¼Œçœ‹èµ·æ¥ä¼šæ‰“å¼€å¾ˆå¤šé—¨ã€‚æˆ‘å¤©çœŸåœ°ä»¥ä¸ºï¼šWebGL ä¹Ÿè®¸èƒ½åšå‡º Felix ç»™æˆ‘çœ‹çš„é‚£ç§ä¸œè¥¿ã€‚</p>
<p>ä½†æˆ‘å¼€å§‹ç ”ç©¶é‚£ä¸ª Demo çš„å®ç°æ–¹å¼æ—¶ï¼Œå°±æ’ä¸Šäº†æ®‹é…·ç°å®ï¼šé‡Œé¢ç”¨åˆ°äº†ä¸€å †æˆ‘ä»æ²¡å¬è¿‡çš„ API/ç‰¹æ€§â€”â€”â€œAtomicsï¼ˆåŸå­æ“ä½œï¼‰â€â€œIndirect Draw Callsï¼ˆé—´æ¥ç»˜åˆ¶è°ƒç”¨ï¼‰â€â€œIndirect Dispatchï¼ˆé—´æ¥æ´¾å‘ï¼‰â€â€œStorage Buffersï¼ˆå­˜å‚¨ç¼“å†²åŒºï¼‰â€â€œCompute Shadersï¼ˆè®¡ç®—ç€è‰²å™¨ï¼‰â€â€œ3D Texturesï¼ˆä¸‰ç»´çº¹ç†ï¼‰â€ã€‚</p>
<p>å®ƒä»¬å±äºç°ä»£å›¾å½¢ API çš„èƒ½åŠ›ï¼Œä½†åœ¨å½“æ—¶çš„ WebGL é‡ŒåŸºæœ¬ä¸å­˜åœ¨ã€‚</p>
<p>æ›´åˆ«æå®ƒè¿˜ç”¨äº†å¾ˆå¤šå¬èµ·æ¥å°±å¾ˆå¤æ‚çš„ç®—æ³•/æŠ€æœ¯ï¼šç”¨ <strong>SPHï¼ˆSmoothed Particle Hydrodynamicsï¼Œå¹³æ»‘ç²’å­æµä½“åŠ¨åŠ›å­¦ï¼‰</strong> é©±åŠ¨ç²’å­åŠ¨ç”»ã€ç”¨ <strong>histopyramids</strong> åšæµå‹ç¼©ï¼ˆæˆ‘å½“æ—¶è¿˜æƒ³ï¼šæˆ‘ä¸ºä»€ä¹ˆéœ€è¦è¿™ä¸ªï¼Ÿï¼‰ã€ç”¨ GPU ä¸Šçš„ <strong>marching cubes</strong>ï¼ˆä»ç²’å­ç”Ÿæˆä¸‰è§’å½¢ï¼Ÿï¼Ÿï¼Ÿï¼‰ç­‰ç­‰ã€‚</p>
<p>æˆ‘å®Œå…¨ä¸çŸ¥é“ä»å“ªé‡Œå¼€å§‹ã€‚æ›´ç³Ÿçš„æ˜¯ï¼ŒFelix è·Ÿæˆ‘æ‰“èµŒï¼šè¿™ç§æµä½“æ•ˆæœä¸å¯èƒ½åœ¨æµè§ˆå™¨é‡Œâ€œå¯ç”¨äºç”Ÿäº§â€ã€‚</p>
<h2 data-id="heading-1">10 å¹´å‰â€¦â€¦</h2>
<p>åˆè¿‡äº†ä¸‰å¹´ï¼ŒFelix è¯´ä»–è¿˜æœ‰ä¸€ä¸ª<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3Di8hSZGTXTx8" target="_blank" title="https://www.youtube.com/watch?v=i8hSZGTXTx8" ref="nofollow noopener noreferrer">æ›´ç‚¸è£‚çš„ Demo</a>ä¸€å®šè¦æˆ‘çœ‹ã€‚é™¤äº†æµä½“æ¨¡æ‹Ÿï¼Œå®ƒè¿˜ç”¨å®æ—¶å…‰çº¿è¿½è¸ªæ¸²æŸ“äº†å‡ ä½•ä½“â€”â€”æè´¨å¾ˆéœ‡æ’¼ã€ç”»é¢å¾ˆæƒŠäººã€‚</p>
<p>è¿™ä¸‹æŒ‘æˆ˜æ›´å¤§äº†ï¼šæˆ‘ä¸ä»…æƒ³æ¨¡æ‹Ÿæµä½“ï¼Œæˆ‘è¿˜æƒ³ç”¨å…‰è¿½å»æ¸²æŸ“å®ƒï¼Œå¾—åˆ°æ¼‚äº®çš„åå°„ä¸æŠ˜å°„ã€‚</p>
<p>æˆ‘èŠ±äº†å¤§æ¦‚ 3 å¹´æ‰æŠŠè¿™äº›ä¸œè¥¿ç†è§£åˆ°èƒ½åœ¨ WebGL é‡Œâ€œç¡¬å‡¿â€å‡ºæ¥ï¼š</p>
<ul>
<li>æˆ‘ç”¨ SPH è®©ç²’å­è¡Œä¸ºåƒæµä½“ï¼›</li>
<li>æˆ‘ç”¨ marching cubes ä»ç²’å­ç”Ÿæˆç½‘æ ¼ï¼ˆè§å›¾ 1 çš„æè¿°ï¼‰ã€‚</li>
</ul>
<p>å½“æ—¶æ²¡æœ‰ atomicsï¼Œæˆ‘å°±ç”¨å¤šæ¬¡ draw call æŠŠæ•°æ®å¡è¿›çº¹ç†çš„ RGBA é€šé“æ¥â€œåˆ†å±‚â€ï¼›æ²¡æœ‰ storage buffer å’Œ 3D çº¹ç†ï¼Œæˆ‘å°±ç”¨çº¹ç†å­˜æ•°æ®ï¼Œå¹¶ç”¨äºŒç»´å±‚æ¥â€œæ¨¡æ‹Ÿâ€ 3D çº¹ç†ï¼›æ²¡æœ‰ indirect drawï¼Œæˆ‘å°±å¹²è„†æŒ‰é¢„æœŸæ•°é‡å‘èµ· draw callï¼›æ²¡æœ‰ compute shaderï¼Œæˆ‘å°±ç”¨é¡¶ç‚¹ç€è‰²å™¨åš GPGPU çš„æ•°æ®é‡æ’â€¦â€¦è™½ç„¶ä¹Ÿåšä¸å‡ºé‚£ç§â€œåœ¨ buffer é‡Œéšæ„å†™å¤šä¸ªå†…å­˜ä½ç½®â€çš„äº‹ï¼Œä½†è‡³å°‘æˆ‘èƒ½åœ¨ GPU é‡Œç”Ÿæˆä¸€ä¸ªåŠ é€Ÿç»“æ„ã€‚</p>
<p>å®ç°æ˜¯èƒ½è·‘ï¼Œä½†ç¦»â€œç¾â€å·®å¾—å¾ˆè¿œï¼ˆFelix ç›´æ¥è¯„ä»·ï¼šä¸‘ã€‚ç¡®å®ä¸‘ï¼Œä½ å¯ä»¥æƒ³è±¡å›¾ 2ï¼‰ã€‚æˆ‘é‚£æ—¶ä¹Ÿä¸å¤ªæ‡‚è·ç¦»åœºï¼Œä¹Ÿä¸çŸ¥é“æ€ä¹ˆæŠŠ shading åšå¾—æ›´æœ‰è¶£ï¼ŒåŸºæœ¬å°±æ˜¯è€æ´¾ phongã€‚</p>
<p>æ€§èƒ½ä¹Ÿé™åˆ¶äº†å¾ˆå¤šé«˜çº§æ•ˆæœï¼šç¯å¢ƒå…‰é®è”½ã€æ›´å¤æ‚çš„åå°„æŠ˜å°„â€¦â€¦ä½†è‡³å°‘æˆ‘èƒ½æ¸²æŸ“å‡ºç‚¹ä¸œè¥¿ã€‚</p>
<h2 data-id="heading-2">7 å¹´å‰â€¦â€¦</h2>
<p>å†è¿‡ä¸‰å¹´ï¼Œæˆ‘åˆåšäº†ä¸€äº›è¿›å±•ï¼šå®ç°äº†ä¸€ä¸ªæ··åˆå¼å…‰è¿½ã€‚æ€è·¯æ˜¯ï¼šmarching cubes å…ˆç”Ÿæˆä¸‰è§’å½¢ï¼Œç„¶åç”¨å…‰è¿½å»ç®—äºŒæ¬¡å°„çº¿åšåå°„/æŠ˜å°„ï¼›åŒä¸€ä¸ªå…‰è¿½è¿˜èƒ½éå†åŠ é€Ÿç»“æ„å»åšç„¦æ•£ã€‚è¿™äº›åŸºæœ¬éƒ½æ²¿ç”¨äº† <a href="https://link.juejin.cn?target=https%3A%2F%2Fx.com%2Fmattswoboda" target="_blank" title="https://x.com/mattswoboda" ref="nofollow noopener noreferrer">Matt Swoboda</a> çš„æƒ³æ³•ï¼ˆé‚£äº› Demo çš„åŸä½œè€…ï¼‰ã€‚æˆ‘çš„å·¥ä½œå¤§éƒ¨åˆ†å°±æ˜¯ï¼šæŠŠä»–çš„ç‚¹å­å°½é‡åœ¨ WebGL é‡Œè·‘èµ·æ¥ï¼ˆç¥ä½ å¥½è¿ï¼‰ã€‚</p>
<p>æ•ˆæœåœ¨è§†è§‰ä¸Šè¿˜ä¸é”™ï¼ˆç±»ä¼¼å›¾ 3ï¼‰ï¼Œä½†éœ€è¦éå¸¸å¼ºçš„ GPUã€‚å½“æ—¶æˆ‘ç”¨çš„æ˜¯ NVidia 1080GTXã€‚ä¹Ÿå°±æ˜¯è¯´ï¼šå³ä½¿ WebGL å¯è¡Œï¼Œä¹Ÿä¸å¯èƒ½æ‹¿å»åšâ€œç”Ÿäº§â€ã€‚æ‰‹æœºä¸è¡Œï¼Œæ™®é€šç¬”è®°æœ¬ä¹Ÿæ‰›ä¸ä½ã€‚</p>
<p>çœ‹å¾—åˆ°â€œç»“æœâ€ï¼Œå´ç”¨ä¸åˆ°çœŸå®é¡¹ç›®é‡Œï¼Œè¿™ç§æŒ«è´¥æ„Ÿå¾ˆå¼ºã€‚æˆ‘èŠ±äº†å¤ªå¤šæ—¶é—´ï¼Œæœ€åä¹Ÿæ²¡æœ‰è¾¾åˆ°æœŸæœ›ã€‚è‡³å°‘ï¼Œè¿™å¥—ä»£ç åº“è¿˜èƒ½ç»§ç»­å¸®æˆ‘å­¦ä¹ ã€‚</p>
<p>äºæ˜¯æˆ‘åœäº†ã€‚</p>
<p>Felix èµ¢äº†èµŒå±€ã€‚</p>
<p>è¿™æ®µé“ºå«å¯¹ä¸€ç¯‡â€œæ•™ç¨‹â€æ¥è¯´å¤ªé•¿äº†ï¼Œä½†æˆ‘æƒ³æŠŠèƒŒæ™¯äº¤ä»£æ¸…æ¥šï¼šæœ‰äº› Demo çœ‹èµ·æ¥åƒâ€œå‡ å¤©æå®šâ€ï¼Œå®é™…å¯èƒ½æ˜¯å¤šå¹´ç§¯ç´¯ï¼›ä½ è¦èŠ±æ—¶é—´å­¦å¾ˆå¤šæŠ€æœ¯ï¼Œä¹Ÿç»å¸¸è¦å€Ÿé‰´åˆ«äººçš„æƒ³æ³•â€”â€”æœ€åä¹Ÿå¯èƒ½ä»ç„¶å¤±è´¥ã€‚</p>
<h2 data-id="heading-3">WebGPU ç™»åœº</h2>
<p>è¿˜è®°å¾—é‚£äº›â€œç°ä»£å›¾å½¢ API çš„å…³é”®è¯â€å—ï¼ŸWebGPU åŸºäºç°ä»£ API æ ‡å‡†ï¼Œè¿™æ„å‘³ç€æˆ‘ä¸å¿…å†é  Hackï¼š</p>
<ul>
<li>æˆ‘å¯ä»¥ç”¨ compute shader ç›´æ¥æ“ä½œ storage bufferï¼›</li>
<li>æˆ‘å¯ä»¥ç”¨ atomics åšé‚»åŸŸæœç´¢ã€æµå‹ç¼©æ—¶çš„ç´¢å¼•å†™å…¥ï¼›</li>
<li>æˆ‘å¯ä»¥ç”¨ dispatch indirect æ¥åªç”Ÿæˆå¿…è¦æ•°é‡çš„ä¸‰è§’å½¢ï¼Œå¹¶ç”¨åŒæ ·çš„æ–¹å¼ç»˜åˆ¶å®ƒä»¬ã€‚</li>
</ul>
<p>æˆ‘æƒ³å­¦ä¹  WebGPUï¼Œäºæ˜¯å†³å®šæŠŠä¹‹å‰çš„æµä½“å·¥ä½œè¿ç§»è¿‡æ¥ï¼Œé¡ºä¾¿ç†è§£æ–°èŒƒå¼ï¼šæ€ä¹ˆç»„ç»‡ pipeline å’Œ bindingã€æ€ä¹ˆç®¡ç† GPU å†…å­˜ä¸èµ„æºâ€¦â€¦åšä¸€ä¸ªå° Demo å¾ˆé€‚åˆç»ƒæ‰‹ã€‚</p>
<p>éœ€è¦å…ˆè®²æ¸…æ¥šï¼šæœ¬æ–‡çš„ Demo <strong>å¹¶ä¸é€‚åˆç”Ÿäº§</strong>ã€‚åœ¨ M3 Max è¿™ç±»æ¯”è¾ƒå¼ºçš„ MacBook Pro ä¸Šå®ƒå¯èƒ½èƒ½è·‘åˆ° 120fpsï¼›M1 Pro ä¸Šå¤§æ¦‚ 60fpsï¼›å…¶å®ƒä¸é”™çš„æœºå™¨ä¹Ÿè®¸ 50fpsâ€¦â€¦ä½†å¦‚æœä½ æ‹¿å»è·‘åœ¨ MacBook Air ä¸Šï¼Œâ€œæµè§ˆå™¨æµä½“æ¢¦â€ä¼šå¾ˆå¿«ç ´ç¢ã€‚</p>
<p>é‚£å®ƒä¸ºä»€ä¹ˆä»ç„¶æœ‰ä»·å€¼ï¼Ÿ</p>
<p>å› ä¸ºå®ƒå…¶å®æ˜¯ä¸€ç»„å¯æ‹†è§£çš„æŠ€æœ¯é›†åˆã€‚ä½ å¯èƒ½å¯¹å…¶ä¸­æŸä¸ªéƒ¨åˆ†æ„Ÿå…´è¶£ï¼šç²’å­åŠ¨ç”»ã€ä»åŠ¿åœºç”Ÿæˆè¡¨é¢ï¼ˆé¿å… ray marchingï¼‰ã€é—´æ¥å…‰ã€ä¸–ç•Œç©ºé—´ AOâ€¦â€¦ä½ å¯ä»¥æŠŠä»“åº“é‡Œçš„ä»£ç æ‹¿å‡ºæ¥ï¼Œåªå–ä½ éœ€è¦çš„éƒ¨åˆ†æ¥æ„å»ºè‡ªå·±çš„æƒ³æ³•ã€‚</p>
<p>è¿™ä¸ª Demo å¤§è‡´å¯ä»¥æ‹†æˆ 4 ä¸ªä¸»è¦é˜¶æ®µï¼š</p>
<ul>
<li><strong>æµä½“æ¨¡æ‹Ÿ</strong>ï¼šç”¨ç²’å­æ¨¡æ‹Ÿï¼ˆåŸºäº Position Based Dynamics æ€è·¯ï¼‰é©±åŠ¨æµä½“çš„è¿åŠ¨ã€‚</li>
<li><strong>å‡ ä½•ç”Ÿæˆ</strong>ï¼šç”¨ GPU ä¸Šçš„ marching cubesï¼Œä»ç²’å­ç”Ÿæˆæ¸²æŸ“ç”¨ä¸‰è§’å½¢ã€‚</li>
<li><strong>å‡ ä½•æ¸²æŸ“</strong>ï¼šä½¿ç”¨è·ç¦»åœºä¼°ç®—å‡ ä½•åšåº¦ä»¥åšæ¬¡è¡¨é¢æ•£å°„ï¼ˆSSSï¼‰ï¼Œå¹¶ç”¨ä½“ç´ é”¥è¿½è¸ªï¼ˆVoxel Cone Tracingï¼‰è®¡ç®— AOã€‚</li>
<li><strong>åˆæˆ</strong>ï¼šåœ°é¢åå°„æ¨¡ç³Šã€è°ƒè‰²ä¸ Bloom ç­‰åæœŸã€‚</li>
</ul>
<h2 data-id="heading-4">æµä½“æ¨¡æ‹Ÿ</h2>
<p>å¾ˆå¤šå¹´å‰ï¼Œå¦‚æœä½ æƒ³åœ¨å›¾å½¢åœˆå­é‡Œâ€œæ˜¾å¾—å¾ˆé…·â€ï¼Œä½ å¾—è¯æ˜ä½ èƒ½è‡ªå·±åšæµä½“æ¨¡æ‹Ÿï¼šåš 2D å°±å¾ˆå¼ºï¼Œåš 3D å°±æ˜¯â€œå°ç¥â€ï¼ˆå½“ç„¶è¿™æ˜¯æˆ‘è„‘å†…çš„ä¸­äºŒè®¾å®šï¼‰ã€‚ä¸ºäº†â€œå°ç¥â€ï¼ˆä¹Ÿä¸ºäº†èµ¢èµŒå±€ï¼‰ï¼Œæˆ‘å¼€å§‹ç–¯ç‹‚è¯» 3D æ¨¡æ‹Ÿç›¸å…³çš„èµ„æ–™ã€‚</p>
<p>åšæµä½“çš„æ–¹æ³•å¾ˆå¤šï¼Œå…¶ä¸­ä¸€ç§å« <strong>SPH</strong>ã€‚ç†æ€§åšæ³•åº”è¯¥æ˜¯å…ˆè¯„ä¼°å“ªä¸ªæ–¹æ³•æ›´é€‚åˆ Webï¼Œä½†æˆ‘å½“æ—¶é€‰å®ƒå°±å› ä¸ºåå­—å¬èµ·æ¥å¾ˆé…·ã€‚SPH æ˜¯ç²’å­æ³•ï¼Œè¿™ä¸€ç‚¹é•¿æœŸæ¥çœ‹å¾ˆæœ‰å¥½å¤„ï¼Œå› ä¸ºåæ¥æˆ‘æŠŠ SPH æ¢æˆäº† position based çš„æ–¹æ³•ã€‚</p>
<p>å¦‚æœä½ åšè¿‡â€œç¾¤ä½“è¡Œä¸ºï¼ˆsteering behaviorsï¼‰â€æˆ– flockingï¼Œä¼šæ›´å®¹æ˜“ç†è§£ SPHã€‚</p>
<p>Three.js æœ‰å¾ˆå¤š flocking ç¤ºä¾‹ï¼Œå®ƒåŸºäºå¸å¼•ã€å¯¹é½ã€æ’æ–¥ç­‰ steering è¡Œä¸ºã€‚ç”¨ä¸åŒçš„æƒé‡/å‡½æ•°ï¼Œæ ¹æ®ç²’å­ä¹‹é—´çš„è·ç¦»å†³å®šç²’å­å—å“ªäº›è¡Œä¸ºå½±å“ã€‚</p>
<p>SPH çš„åšæ³•ä¹Ÿæœ‰ç‚¹ç±»ä¼¼ï¼šä½ å…ˆç®—æ¯ä¸ªç²’å­çš„å¯†åº¦ï¼Œå†ç”¨å¯†åº¦ç®—å‹åŠ›ï¼›å‹åŠ›å°±åƒ flocking é‡Œçš„å¸å¼•/æ’æ–¥ï¼Œä½¿ç²’å­é è¿‘æˆ–è¿œç¦»ã€‚å¯†åº¦åˆæ˜¯é‚»åŸŸç²’å­è·ç¦»çš„å‡½æ•°ï¼Œæ‰€ä»¥å‹åŠ›æœ¬è´¨ä¸Šä¹Ÿæ˜¯â€œç”±è·ç¦»é—´æ¥å†³å®šçš„â€ã€‚</p>
<p>SPH çš„ç²˜æ€§é¡¹ï¼ˆviscosityï¼‰ä¹Ÿç±»ä¼¼ flocking çš„å¯¹é½é¡¹ï¼ˆalignmentï¼‰ï¼šè®©ç²’å­é€Ÿåº¦è¶‹å‘é‚»åŸŸçš„å¹³å‡é€Ÿåº¦åœºã€‚</p>
<p>ä¸ºäº†ï¼ˆè¿‡åº¦ï¼‰ç®€åŒ–ï¼Œä½ å¯ä»¥æŠŠ SPH ç†è§£æˆï¼šç»™ flocking å¥—ä¸Šä¸€ç»„æ›´â€œç‰©ç†æ­£ç¡®â€çš„å‚æ•°ï¼Œè®©ç²’å­æ›´åƒæµä½“ã€‚å½“ç„¶ SPH è¿˜ä¼šæ¶‰åŠè¡¨é¢å¼ åŠ›ç­‰æ›´å¤šæ­¥éª¤ï¼Œä¸”å…¶æ ¸å‡½æ•°/æƒé‡è¿œæ¯”è¿™é‡Œæè¿°å¤æ‚ï¼Œä½†å¦‚æœä½ èƒ½æŠŠ flocking åšå¥½ï¼Œç†è§£ SPH ä¼šæ›´è½»æ¾ã€‚</p>
<p>SPH/ç¾¤ä½“è¡Œä¸ºéƒ½æœ‰ä¸€ä¸ªå…±åŒéš¾ç‚¹ï¼šæœ´ç´ å®ç°æ˜¯ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mi>n</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span>ï¼Œç²’å­å¤šå°±ä¼šçˆ†ç‚¸ã€‚ä½ éœ€è¦ä¸€ä¸ªåŠ é€Ÿç»“æ„åªæŸ¥è¯¢é™„è¿‘ç²’å­ï¼Œè®©å¤æ‚åº¦ä» <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mi>n</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span> é™åˆ° <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>k</mi><mo>â‹…</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(k\cdot n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></span>ï¼ˆ<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"/><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span></span> æ˜¯æ¯ä¸ªç²’å­è¦æ£€æŸ¥çš„é‚»å±…æ•°ï¼‰ã€‚å¸¸è§åšæ³•æ˜¯ä½“ç´ ç½‘æ ¼ï¼šæ¯ä¸ªä½“ç´ æ ¼å­å­˜æœ€å¤š 4 ä¸ªç²’å­ç´¢å¼•ã€‚</p>
<p>åœ¨è¿™ä¸ªç¤ºä¾‹é‡Œï¼Œç®—æ³•ä¼šæ£€æŸ¥ç²’å­å‘¨å›´ 27 ä¸ªä½“ç´ ï¼Œæ¯ä¸ªä½“ç´ æœ€å¤š 4 ä¸ªç²’å­ï¼Œæ‰€ä»¥æœ€å¤š 108 æ¬¡é‚»åŸŸæ£€æŸ¥ã€‚å¬èµ·æ¥ä¹Ÿä¸å°‘ï¼Œä½†æ¯”æ£€æŸ¥ 8 ä¸‡ä¸ªç²’å­è¦å¥½å¤ªå¤šã€‚</p>
<p>ä½†é‚»åŸŸéå†ä»ç„¶æ˜‚è´µã€‚SPH è¿˜è¦æ±‚å¤šæ¬¡ passï¼šå¯†åº¦ã€å‹åŠ›/ä½ç§»ã€ç²˜æ€§ã€è¡¨é¢å¼ åŠ›â€¦â€¦å½“ä½ æ„è¯†åˆ° GPU ç»å¤§éƒ¨åˆ†ç®—åŠ›éƒ½åœ¨â€œé©±åŠ¨ç²’å­â€æ—¶ï¼Œæ€§èƒ½å°±ä¼šå˜å¾—éå¸¸é‡è¦ã€‚</p>
<p>è€Œä¸” SPH å¾ˆéš¾è°ƒå‚ï¼Œä½ å¾—ç†è§£å¾ˆå¤šå·¥ç¨‹/ç‰©ç†å‚æ•°æ‰èƒ½åšå¾—å¥½çœ‹ã€‚</p>
<p>åæ¥ NVidia æå‡ºäº†ä¸€å¥—ç²’å­åŠ¨åŠ›å­¦æ–¹æ³•ï¼š<strong>Position Based Dynamicsï¼ˆPBDï¼‰</strong>ï¼Œå…¶ä¸­åŒ…å«åˆšä½“ã€è½¯ä½“ã€æµä½“ã€ç¢°æ’ç­‰ã€‚<a href="https://link.juejin.cn?target=https%3A%2F%2Fmmacklin.com%2F2017-EG-CourseNotes.pdf" target="_blank" title="https://mmacklin.com/2017-EG-CourseNotes.pdf" ref="nofollow noopener noreferrer">è¯¾ç¨‹ç¬”è®°åœ¨è¿™é‡Œ</a>ã€‚</p>
<p>PBD é€šè¿‡â€œçº¦æŸï¼ˆconstraintsï¼‰â€ç›´æ¥ä¿®æ­£ç²’å­ä½ç½®ï¼Œç»“æœç¨³å®šã€è°ƒå‚ç›¸å¯¹å®¹æ˜“ã€‚è¿™è®©æˆ‘ä» SPH è½¬å‘ <strong>PBFï¼ˆPosition Based Fluidsï¼‰</strong>ã€‚æ ¸å¿ƒå·®åˆ«åœ¨äºï¼šPBF ç”¨çº¦æŸæ¥å®šä¹‰ä½ç§»ï¼Œè€Œä¸æ˜¯åƒ SPH é‚£æ ·å…ˆç®—å¯†åº¦ã€‚</p>
<p>PBF çš„å‚æ•°æ›´â€œæ— é‡çº²â€ï¼Œæ›´å¥½ç†è§£ã€‚</p>
<p>ä½†å®ƒä¹Ÿæœ‰ä»£ä»·ï¼šPBD å¾€å¾€è¦è¿­ä»£å¤šæ¬¡æ‰èƒ½å¾—åˆ°æ›´å¥½ç»“æœï¼ˆè®¡ç®—çº¦æŸã€åº”ç”¨ä½ç§»ã€è®¡ç®—ç²˜æ€§â€¦â€¦åå¤æ‰§è¡Œï¼‰ï¼Œç¨³å®šä½†æ›´æ…¢ã€‚</p>
<p>è€Œæˆ‘ä¸æƒ³åªæ¸²æŸ“ç²’å­ï¼Œæˆ‘è¦æ¸²æŸ“ç½‘æ ¼ï¼šGPU è¿˜è¦ç®—ä¸‰è§’å½¢ã€åšæ¸²æŸ“ã€‚æˆ‘æ²¡æœ‰è¶³å¤Ÿé¢„ç®—åšå¤šè½®è¿­ä»£ï¼Œæ‰€ä»¥æˆ‘å¿…é¡»â€œç è§’â€ã€‚</p>
<p>å¹¸è¿çš„æ˜¯ï¼ŒPBD æœ‰ä¸€ç§å¾ˆä¾¿å®œçš„ç¢°æ’è®¡ç®—æ–¹å¼ï¼šåœ¨æ–½åŠ åŠ›ï¼ˆforcesï¼‰ååšä¸€æ¬¡ pass å³å¯ã€‚æˆ‘é€‰æ‹©ï¼š</p>
<ul>
<li>ç”¨é‡åŠ›ä½œä¸ºä¸»åŠ›ï¼›</li>
<li>ç”¨ curl noise ä½œä¸ºè¾…åŠ©åŠ›ï¼Œå¢åŠ æµä½“æ„Ÿï¼›</li>
<li>ç”¨é¼ æ ‡é©±åŠ¨ä¸€ä¸ªå¾ˆå¼ºçš„æ–¥åŠ›ï¼ˆrepulsionï¼‰ï¼›</li>
<li>è®©ç¢°æ’è´Ÿè´£é¿å…ç²’å­èšæˆå¥‡æ€ªçš„å›¢ã€‚</li>
</ul>
<p>curl + é‡åŠ›æä¾›â€œåƒæµä½“â€çš„æ•´ä½“è¶‹åŠ¿ï¼Œç¢°æ’é¿å…ç²’å­èšå›¢ã€‚å®ƒä¸å¦‚ PBF é‚£ä¹ˆçœŸå®ï¼Œä½†æ›´å¿«ã€‚</p>
<p>å®ç°ä¸Šåªéœ€è¦ä¸€æ¬¡ pass åº”ç”¨æ‰€æœ‰åŠ›ï¼ŒåŒæ—¶åœ¨ storage buffer é‡Œç”Ÿæˆç½‘æ ¼åŠ é€Ÿç»“æ„ï¼›atomics å†™ç´¢å¼•åªéœ€è¦å‡ è¡Œä»£ç ã€‚ä½ å¯ä»¥åœ¨ä»“åº“çš„ <code>PBF_applyForces.wgsl</code> é‡Œè¯»åˆ°åŠ›ä¸ç½‘æ ¼æ„å»ºçš„å®ç°ã€‚</p>
<p>ç²’å­ä½ç½®æ›´æ–°åœ¨ <code>PBF_calculateDisplacements.wgsl</code>ï¼šè´Ÿè´£éå†é‚»åŸŸåšç¢°æ’ï¼Œä¹Ÿè´Ÿè´£å’Œç¯å¢ƒï¼ˆä¸å¯è§åŒ…å›´ç›’ï¼‰ç¢°æ’ã€‚</p>
<p>pipeline ä¸ç»‘å®šåœ¨ <code>PBF.js</code>ï¼šæ¨¡æ‹Ÿåªç”¨ä¸‰ä¸ª shaderâ€”â€”æ–½åŠ›ã€ä½ç§»æ›´æ–°ã€é€Ÿåº¦ç§¯åˆ†ã€‚ä½ç½®æ›´æ–°åï¼Œé€Ÿåº¦é€šè¿‡â€œæ–°ä½ç½® - æ—§ä½ç½®â€çš„å·®å€¼å¾—åˆ°ã€‚</p>
<p>æœ€åä¸€ä¸ª shader <code>PBF_integrateVelocity.wgsl</code> è¿˜ä¼šè®¾ç½®ä¸€ä¸ªåŒ…å«ç²’å­ä¿¡æ¯çš„ 3D çº¹ç†ï¼Œåç»­ä¼šç”¨äº marching cubes ç”ŸæˆåŠ¿åœºã€‚</p>
<h2 data-id="heading-5">Marching Cubesï¼ˆå‡ ä½•ç”Ÿæˆï¼‰</h2>
<p>å½“å¹´æˆ‘ç¬¬ä¸€æ¬¡ç”¨ SPH æŠŠç²’å­è·‘èµ·æ¥æ—¶å…´å¥‹å¾—ä¸è¡Œï¼Œåœ¨åŠå…¬å®¤åˆ°å¤„å¹ï¼ˆåŸºæœ¬åˆ°å¤„éƒ½æ˜¯ï¼‰ã€‚Felix å½“ç„¶çŸ¥é“æ€ä¹ˆæ²»æˆ‘ï¼šä»–æŠŠæˆ‘èµ¶å›å»ç»§ç»­åšâ€œè¡¨é¢ç”Ÿæˆâ€ï¼Œå› ä¸ºåªæœ‰æŠŠæµä½“æ¸²æŸ“æˆæ¶²ä½“è¡¨é¢è€Œä¸æ˜¯ç‚¹ï¼Œæ‰ç®—â€œåƒæ ·â€ã€‚</p>
<p>ä»ç²’å­åœºæ¸²æŸ“è¡¨é¢å¸¸è§æœ‰ä¸‰ç§æ€è·¯ï¼š</p>
<ul>
<li>Point Splatting</li>
<li>Raymarching</li>
<li>Marching Cubes</li>
</ul>
<p>Point splatting æ˜¯æœ€ç®€å•ä¹Ÿæœ€å¿«çš„ä¸€ç§ï¼šå±å¹•ç©ºé—´æ•ˆæœï¼Œæ¸²æŸ“ç²’å­åç»“åˆå¯åˆ†ç¦»æ¨¡ç³Šä¸æ·±åº¦æ¥ç”Ÿæˆæ³•çº¿ã€‚æ•ˆæœå¾ˆä¸é”™ï¼Œè¿˜èƒ½åšç„¦æ•£ï¼Œå®æ—¶æ€§èƒ½ä¹Ÿå¥½ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/52e2d6af1d614b8984c5ae358dd1e3fe~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR5a6J5Lic5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770793485&amp;x-signature=%2BFv1qWiKe3RdlTzFlMsdeN1aWKc%3D" alt="image.png" loading="lazy"/></p>
<p>Raymarching å¾ˆæœ‰è¶£ï¼Œèƒ½åšå¤šæ¬¡åå°„æŠ˜å°„ç­‰å¤æ‚æ•ˆæœï¼Œä½†éå¸¸æ…¢ï¼šä½ éœ€è¦ä»ç²’å­ç”Ÿæˆè·ç¦»åœºï¼Œå†åœ¨è·ç¦»åœºé‡Œåšæ­¥è¿›é‡‡æ ·ï¼ˆè¿‡å»è¿˜æ²¡æœ‰ 3D çº¹ç†ï¼Œåªèƒ½è½¯æ’å€¼ï¼‰ã€‚å³ä½¿ç¡¬ä»¶æ”¯æŒä¸‰çº¿æ€§æ’å€¼ï¼Œæ€§èƒ½ä¹Ÿä¾ç„¶ä¸å¤ªç†æƒ³ã€‚ç”»é¢å¾ˆç¾ï¼Œä½†ä¸é€‚åˆå®æ—¶ã€‚</p>
<p>Marching cubes å¬èµ·æ¥å¾ˆå¸å¼•äººï¼šä»ç²’å­ç”Ÿæˆçš„åŠ¿åœºï¼ˆpotential fieldï¼‰é‡Œæå–ç­‰å€¼é¢ç”Ÿæˆç½‘æ ¼ã€‚ä¼˜ç‚¹æ˜¯ç½‘æ ¼å¯ç›´æ¥æ …æ ¼åŒ–ï¼Œåœ¨é«˜åˆ†è¾¨ç‡ä¸‹ä¹Ÿèƒ½ç¨³å®šæ¸²æŸ“ï¼›å¹¶ä¸”æœ‰äº†ç½‘æ ¼ï¼Œå¾ˆå¤šâ€œåå°„â€å°±èƒ½æ›´ä¾¿å®œåœ°å®ç°ã€‚ä¸å‰ä¸¤ç§æ–¹æ¡ˆç›¸æ¯”ï¼Œå®ƒæ›´å®¹æ˜“ä½œä¸ºä¸–ç•Œç©ºé—´å‡ ä½•ä½“èå…¥åœºæ™¯ã€‚</p>
<p>Three.js æœ‰ marching cubes çš„ä¾‹å­ï¼Œä½†é‚£äº›æ˜¯ CPU ä¸Šç”Ÿæˆè¡¨é¢ï¼›è€Œæˆ‘çš„ç²’å­æ•°æ®åœ¨ GPUã€‚æˆ‘å»è¯» Matt Swoboda çš„åˆ†äº«ï¼Œäº†è§£ä»–å¦‚ä½•åœ¨ GPU ä¸Šåš marching cubesï¼Œä½†é‡Œé¢æœ‰å¾ˆå¤šæˆ‘å½“æ—¶è¿˜ä¸æ‡‚çš„é—®é¢˜ï¼š</p>
<ul>
<li>å¦‚ä½•ä»ç²’å­åœºç”ŸæˆåŠ¿åœºï¼Ÿ</li>
<li>é—´æ¥ dispatch æ˜¯æ€ä¹ˆå›äº‹ï¼Ÿ</li>
<li>å¦‚ä½•åœ¨ GPU ä¸Šç”Ÿæˆä¸‰è§’å½¢ï¼Ÿ</li>
</ul>
<p>å…ˆæŠŠè·¯çº¿å›¾è®²æ¸…æ¥šã€‚Marching cubes æœ¬è´¨æ˜¯ä»åŠ¿åœºæå–ç­‰å€¼é¢ï¼ˆiso-surfaceï¼‰ã€‚å…³é”®æ­¥éª¤æœ‰ï¼š</p>
<ol>
<li>ä»ç²’å­ç”ŸæˆåŠ¿åœºï¼ˆpotentialï¼‰ã€‚</li>
<li>åœ¨ä½“ç´ ç½‘æ ¼ä¸Šè¯„ä¼°åŠ¿å€¼ï¼Œå†³å®šæ¯ä¸ªä½“ç´ å¯¹åº” 256 ç§â€œcaseâ€é‡Œå“ªä¸€ç§ï¼ˆæ¯ä¸ªä½“ç´ ä¼šç”Ÿæˆ 0 åˆ° 5 ä¸ªä¸‰è§’å½¢ï¼‰ã€‚</li>
<li>GPU ä¸ŠæŠŠæ»¡è¶³æ¡ä»¶çš„ä½“ç´ å†™å…¥è¿ç»­ bufferï¼ˆç”¨ atomics è¿½åŠ ï¼‰ã€‚</li>
<li>æ ¹æ®ä½“ç´ ä¿¡æ¯ç”Ÿæˆä¸‰è§’å½¢ã€‚</li>
</ol>
<h3 data-id="heading-6">åŠ¿åœºç”Ÿæˆï¼ˆPotential Generationï¼‰</h3>
<p>å¦‚æœä½ äº†è§£ point splattingï¼Œä¼šå‘ç°â€œæ¨¡ç³Šâ€å¾ˆå…³é”®ï¼šå®ƒèƒ½æŠŠç‚¹äº‘å¹³æ»‘æˆè¿‘ä¼¼è¡¨é¢ã€‚åŒæ ·æ€è·¯ä¹Ÿé€‚ç”¨äº 3D çº¹ç†ï¼šå¯¹ 3D çº¹ç†åš blurï¼Œå°±èƒ½å¾—åˆ°ä¸€ç§â€œç©·äººç‰ˆè·ç¦»åœºâ€ã€‚</p>
<p>ä½ ä¹Ÿå¯ä»¥ç”¨ Jump Flood ç®—æ³•ç”Ÿæˆæ›´ç²¾ç¡®çš„è·ç¦»åœºï¼ˆç²’å­ä¹Ÿå¯ä»¥ï¼‰ï¼Œçœ‹èµ·æ¥è¿˜å¯èƒ½æ¯” 3D blur æ›´å¿«â€”â€”ä½†å®ƒæœ‰ä¸ªè‡´å‘½ç¼ºç‚¹ï¼šå®ƒ<strong>å¤ªç²¾ç¡®</strong>äº†ã€‚</p>
<p>Jump Flood çš„ç»“æœæ›´åƒæ˜¯ä¸€ç»„çƒä½“çš„è·ç¦»åœºï¼Œç­‰å€¼é¢é˜ˆå€¼ä¸åŒä¼šæŠŠçƒâ€œè¿èµ·æ¥â€ï¼Œä½†ä¸ä¼šä»¥ä¸€ç§â€œå¥½çœ‹â€çš„æ–¹å¼å¹³æ»‘ã€‚ä½ å¾—æœ‰éå¸¸å¤šçš„ç²’å­æ‰ä¼šåƒè¿ç»­è¡¨é¢ï¼Œè€Œé‚£ç§æƒ…å†µä¸‹ä½ å€’ä¸å¦‚ç›´æ¥ç”¨ point splattingã€‚</p>
<p>3D blur åè€Œä¼šæŠŠç²’å­â€œæŠ¹å¼€â€ï¼Œå»æ‰é«˜é¢‘çš„é¢—ç²’æ„Ÿï¼Œè®©å®ƒæ›´åƒè¡¨é¢ã€‚blur æ¬¡æ•°è¶Šå¤šï¼Œè¡¨é¢è¶Šå¹³æ»‘ï¼›ä½ ä¹Ÿèƒ½å°è¯•ä¸åŒ blur æ–¹å¼æ··åˆå‡ºä¸åŒçš„è¡¨é¢æ•ˆæœã€‚å¥‡å¦™çš„æ˜¯ï¼šè¿™ä¸ªç®€å•åŠæ³•åœ¨è¿™é‡Œåè€Œæ›´å¿«ã€æ›´å®ç”¨ã€‚</p>
<p>å®ç°ä¸Šï¼Œblur ç”¨ compute shader <code>Blur3D.wgsl</code>ï¼Œæ²¿ä¸‰ä¸ªè½´å„ dispatch ä¸€æ¬¡ï¼›ç»‘å®šä¸ dispatch åœ¨ <code>Blur3D.js</code>ã€‚</p>
<h3 data-id="heading-7">ä½“ç´ ç­›é€‰ï¼ˆChecking voxelsï¼‰</h3>
<p>åŠ¿åœºç”Ÿæˆåï¼Œæˆ‘ç”¨å¦ä¸€ä¸ª compute shader æ‰«æä½“ç´ ç½‘æ ¼ï¼Œæ‰¾å‡ºä¼šç”Ÿæˆä¸‰è§’å½¢çš„ä½“ç´ ã€‚ä»“åº“é‡Œçš„ <code>MarchCase.wgsl</code> ä¼šéå†æ•´ä¸ªä½“ç´ ç½‘æ ¼ï¼Œä¸ºéœ€è¦ç”Ÿæˆä¸‰è§’å½¢çš„ä½“ç´ è®¡ç®— marching cubes caseï¼Œå¹¶ç”¨ atomics æŠŠè¯¥ä½“ç´ çš„ 3D åæ ‡ä¸ case è¿ç»­å†™å…¥ storage bufferã€‚</p>
<p>ç„¶å <code>EncodeBuffer.wgsl</code> è¯»å–ä¸Šä¸€æ­¥å¾—åˆ°çš„ä½“ç´ æ•°é‡ï¼Œç¼–ç å‡ºç”¨äºâ€œé—´æ¥ dispatchâ€çš„å‚æ•°ï¼ˆä¸‰è§’å½¢ç”Ÿæˆéœ€è¦å¤šå°‘é¡¶ç‚¹ï¼‰ä»¥åŠâ€œé—´æ¥ drawâ€çš„å‚æ•°ï¼ˆéœ€è¦ç»˜åˆ¶å¤šå°‘ä¸‰è§’å½¢ï¼‰ã€‚</p>
<h3 data-id="heading-8">ä¸‰è§’å½¢ç”Ÿæˆï¼ˆTriangles Generationï¼‰</h3>
<p>è´Ÿè´£ç”Ÿæˆé¡¶ç‚¹/æ³•çº¿çš„ shader æ˜¯ <code>GenerateTriangles.wgsl</code>ã€‚å®ƒæ ¹æ®æ¯ä¸ªçº¿ç¨‹çš„å…¨å±€ç´¢å¼•å®šä½åˆ°å¯¹åº”ä½“ç´ å’Œè¦ç”Ÿæˆçš„é¡¶ç‚¹ï¼Œå¹¶é€šè¿‡ <code>EncodeBuffer.wgsl</code> äº§ç”Ÿçš„é—´æ¥ dispatch æ¥è¿è¡Œã€‚</p>
<p>ä½“ç´ ä¿¡æ¯ç”¨äºåœ¨è¾¹çš„ä¸¤ä¸ªè§’ç‚¹ä¹‹é—´åšçº¿æ€§æ’å€¼ï¼Œå¾—åˆ°é¡¶ç‚¹ä½ç½®ï¼›æ³•çº¿åˆ™æ¥è‡ªè¾¹ä¸¤ç«¯è§’ç‚¹æ¢¯åº¦ï¼ˆgradientï¼‰çš„çº¿æ€§æ’å€¼ã€‚</p>
<p>åŠ¿åœºç”Ÿæˆã€ä½“ç´ æ”¶é›†ã€ä¸‰è§’å½¢ç”Ÿæˆè¿™äº›æ­¥éª¤åœ¨ <code>TrianglesGenerator.js</code> çš„ <code>generateTriangles</code> å‡½æ•°é‡Œä¸²èµ·æ¥ï¼Œæ¯æ¬¡ç²’å­ä½ç½®æ›´æ–°åéƒ½ä¼šè°ƒç”¨ã€‚</p>
<h2 data-id="heading-9">æ¸²æŸ“</h2>
<p>è¿™äº›å¹´æˆ‘æœ€å¤§çš„é”™è¯¯ä¹‹ä¸€ï¼Œæ˜¯æŠŠâ€œæ¨¡æ‹Ÿ/GPGPU æŠ€æœ¯â€çœ‹å¾—æ¯”â€œè§†è§‰ç¾æ„Ÿâ€æ›´é‡è¦ã€‚æˆ‘å¤ªæ‰§ç€äºè¯æ˜è‡ªå·±èƒ½åšå¤æ‚ä¸œè¥¿ï¼Œè€Œå¿½ç•¥äº†æœ€ç»ˆç”»é¢ã€‚</p>
<p>Felix ç»å¸¸åœ¨æˆ‘å‡†å¤‡å‘å¸ƒ Demo ä¹‹å‰æ‹¦ä½æˆ‘ï¼šèŠ±æ›´å¤šæ—¶é—´æŠŠç”»é¢æ‰“ç£¨å¾—æ›´èˆ’æœï¼Œåˆ«åªåšæˆé‚£ç§â€œåªæœ‰å››ä¸ªäººä¼šè§‰å¾—å¾ˆé…·â€çš„æŠ€æœ¯å±•ç¤ºã€‚</p>
<p>ç›¸ä¿¡æˆ‘ï¼šä½ å¯ä»¥åšå¾ˆå¼ºçš„ç‰©ç†æ¨¡æ‹Ÿã€å¾ˆå¤æ‚çš„æè´¨â€”â€”ä½†å¦‚æœçœ‹èµ·æ¥å¾ˆç³Ÿç³•ï¼Œé‚£å®ƒå°±æ˜¯ç³Ÿç³•ã€‚</p>
<p>æµä½“çš„éš¾ç‚¹åœ¨äºï¼šä½ å·²ç»æŠŠå¤§é‡ GPU æ—¶é—´èŠ±åœ¨ç²’å­åŠ¨åŠ›å­¦å’Œè¡¨é¢ç”Ÿæˆä¸Šäº†ï¼Œç•™ç»™æ¸²æŸ“æ•ˆæœçš„é¢„ç®—ä¸å¤šï¼›è¿˜è¦ç»™åœºæ™¯é‡Œå…¶å®ƒä¸œè¥¿ç•™æ—¶é—´ã€‚æ‰€ä»¥å®æ—¶æµä½“ä¸€èˆ¬å¾ˆéš¾åšåˆ°â€œæè‡´ç”»è´¨â€ã€‚</p>
<p>å®æ—¶æ¸²æŸ“æ¶²ä½“çš„æœ€ä¼˜è§£é€šå¸¸æ˜¯ point splattingï¼šåå°„ã€æŠ˜å°„ã€é˜´å½±ã€ç„¦æ•£éƒ½èƒ½åšï¼Œè€Œä¸”å¾ˆâ€œä¾¿å®œâ€ã€‚ä¸ä¿¡å¯ä»¥çœ‹çœ‹è¿™ä¸ªå¾ˆæ£’çš„ Demoï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwebgpu-ocean.netlify.app%2F" target="_blank" title="https://webgpu-ocean.netlify.app/" ref="nofollow noopener noreferrer">webgpu-ocean.netlify.app/</a></p>
<p>å¦‚æœä½ è¦çš„æ˜¯ä¸é€æ˜/åŠé€æ˜ä½†ä¸éœ€è¦â€œçœŸæ­£é€æ˜â€çš„æ¶²ä½“ï¼ˆæ¯”å¦‚é¢œæ–™ï¼‰ï¼Œmarching cubes æ˜¯ä¸é”™é€‰æ‹©ï¼šä½ å¯ä»¥ç”¨ PBR å¾—åˆ°å¾ˆå¥½çœ‹çš„è§†è§‰ï¼Œè€Œä¸”å®ƒæ˜¯ä¸–ç•Œç©ºé—´å‡ ä½•ï¼Œå’Œåœºæ™¯æ•´åˆæ›´ç®€å•ã€‚</p>
<p>åœ¨è¿™ä¸ª Demo çš„èŒƒå›´é‡Œï¼Œæˆ‘æƒ³åˆ©ç”¨ç°æˆçš„ä½“ç´ ç»“æ„ï¼ˆç”¨äºä¸‰è§’å½¢ç”Ÿæˆï¼‰ä»¥åŠç”¨äºç”Ÿæˆä¸‰è§’å½¢çš„åŠ¿åœºï¼ˆå¯è§†ä½œè·ç¦»åœºï¼‰ï¼Œåšä¸€äº›â€œç›¸å¯¹ä¾¿å®œä½†æœ‰æ•ˆâ€çš„è§†è§‰æå‡ã€‚</p>
<p>æˆ‘å…ˆåšäº†åŸºäºä½“ç´ é”¥è¿½è¸ªï¼ˆVoxel Cone Tracingï¼ŒVCTï¼‰çš„ AOã€‚VCT é€šå¸¸è¦æ±‚å…ˆæŠŠä¸‰è§’å½¢ä½“ç´ åŒ–ï¼Œä½†è¿™ä¸ª Demo åè¿‡æ¥ï¼šæˆ‘ä»¬æœ¬æ¥å°±æ˜¯ä»ä½“ç´ ç”Ÿæˆä¸‰è§’å½¢ã€‚æ‰€ä»¥ VCT æ‰€éœ€çš„ä¸€å¤§å—å·¥ä½œå·²ç»åœ¨æµç¨‹é‡Œã€‚</p>
<p>æˆ‘åªéœ€è¦ç¨å¾®æ”¹ä¸€ä¸‹ <code>MarchCase.wgsl</code>ï¼šç”¨ç¦»æ•£åŒ–æ–¹å¼æ›´æ–°ä½“ç´ ç½‘æ ¼â€”â€”æœ‰ä¸‰è§’å½¢çš„ä½“ç´ æ ‡è®°ä¸º 1ï¼Œæ²¡æœ‰çš„æ ‡è®°ä¸º 0ï¼›åŒæ—¶æŠŠåœ°é¢ä»¥ä¸‹ä¸€å®šé«˜åº¦çš„ä½“ç´ æ ‡ 0.5 æ¥æ¨¡æ‹Ÿåœ°é¢ AOã€‚åªå¤šåŠ ä¸¤è¡Œä»£ç å°±èƒ½å‡†å¤‡å¥½ VCT çš„ä¿¡æ¯ã€‚</p>
<p>ä½“ç´ ç½‘æ ¼æ›´æ–°åï¼Œå†å¯¹ 3D çº¹ç†åš mipmapï¼ˆ<code>MipMapCompute.wgsl</code>ï¼Œç»‘å®šåœ¨ <code>CalculateMipMap.js</code>ï¼‰ã€‚</p>
<p>ä½ ä¼šæ³¨æ„åˆ°æˆ‘ä¹Ÿåšäº†åœ°é¢åå°„ï¼šmarching cubes ç”Ÿæˆçš„æ˜¯ç½‘æ ¼ï¼Œåšåå°„å¾ˆç›´æ¥â€”â€”ç®—åå°„çŸ©é˜µï¼ŒæŠŠç½‘æ ¼ç»˜åˆ¶ä¸¤éå³å¯ã€‚è‹¥ç”¨ ray marching åšåŒæ ·æ•ˆæœä¼šè´µå¾ˆå¤šã€‚</p>
<p>è¿™æ—¶æˆ‘è¿˜æœ‰ä¸€ç‚¹ GPU é¢„ç®—ï¼Œäºæ˜¯ç»§ç»­é—®æœ‹å‹ï¼šè¿˜æœ‰ä»€ä¹ˆç‰¹æ€§å€¼å¾—åŠ ï¼Ÿæœ‰äººå»ºè®®åšæ¬¡è¡¨é¢æ•£å°„ï¼ˆSubsurface Scatteringï¼ŒSSSï¼‰ï¼Œåƒä¸‹é¢è¿™ç§æ•ˆæœã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f0a005defdf94b9ab69c2e9e5833a86f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR5a6J5Lic5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770793485&amp;x-signature=OEuS3dZvmPaJIRKMCpYZJri4eCo%3D" alt="image.png" loading="lazy"/></p>
<p>SSS åšå¾—å¥½éå¸¸åŠ åˆ†ï¼Œéš¾ç‚¹åœ¨äºè¦çŸ¥é“å‡ ä½•ä½“çš„åšåº¦ï¼ˆthicknessï¼‰ï¼Œæ‰èƒ½å†³å®šå…‰åœ¨å†…éƒ¨æ•£å°„çš„ç¨‹åº¦ã€‚</p>
<p>å¾ˆå¤š SSS demo ç”¨â€œåšåº¦è´´å›¾â€ï¼Œä½†æµä½“è¡¨é¢æ— æ³•çƒ˜ç„™åšåº¦ï¼Œå¿…é¡»å®æ—¶è®¡ç®—ã€‚</p>
<p>å¹¸è¿çš„æ˜¯ï¼Œæˆ‘ä»¬åœ¨ç”Ÿæˆä¸‰è§’å½¢ä¹‹å‰å·²ç»æœ‰åŠ¿åœºï¼Œå®ƒå¯ä»¥å½“è·ç¦»åœºç”¨æ¥å®æ—¶ä¼°ç®—è¡¨é¢åšåº¦ã€‚æ¦‚å¿µä¸Šç±»ä¼¼ IÃ±igo Quilez åš AO çš„æ–¹å¼ï¼šåœ¨è·ç¦»åœºé‡Œ ray marchingï¼Œçœ‹è¡¨é¢è·ç¦»å¦‚ä½•å½±å“é®è”½ã€‚</p>
<p>æˆ‘é‡‡ç”¨ç±»ä¼¼æ€è·¯ï¼Œä½†æŠŠå…‰çº¿æ²¿â€œè¿›å…¥å‡ ä½•å†…éƒ¨â€çš„æ–¹å‘å‘å°„ï¼Œä»è€Œä¼°ç®—å†…éƒ¨å…‰ä¼ æ’­è¢«é®æŒ¡çš„ç¨‹åº¦â€”â€”åšçš„åœ°æ–¹æ•£å°„å¼±ï¼Œè–„çš„åœ°æ–¹æ•£å°„å¼ºã€‚æ•ˆæœå‡ºä¹æ„æ–™åœ°å¥½ã€‚</p>
<p>å‡ ä½•æè´¨åœ¨ <code>RenderMC.wgsl</code>ï¼šé¡¶ç‚¹ç€è‰²å™¨ä½¿ç”¨å­˜å‚¨åœ¨ storage buffer çš„é¡¶ç‚¹ä½ç½®ä¸æ³•çº¿ã€‚å› ä¸º CPU ä¸çŸ¥é“ marching cubes å®é™…ç”Ÿæˆäº†å¤šå°‘ä¸‰è§’å½¢ï¼Œæ‰€ä»¥ç”¨ <code>EncodeBuffer.wgsl</code> ç¼–ç å‡ºçš„é—´æ¥ draw æ¥ç»˜åˆ¶ã€‚</p>
<p>ç»‘å®šé‡Œæˆ‘ç”¨äº†ä¸¤å¥—çŸ©é˜µï¼šä¸€å¥—ç”¨äºæ­£å¸¸è§†è§’ï¼Œå¦ä¸€å¥—ç”¨äºåå°„ç½‘æ ¼ï¼›è¿™äº›åœ¨ <code>Main.js</code> å®Œæˆã€‚</p>
<p>åˆ°è¿™ä¸€æ­¥ï¼Œæ¨¡æ‹Ÿã€è¡¨é¢ç”Ÿæˆã€æè´¨éƒ½æœ‰äº†ï¼Œæ¥ä¸‹æ¥è¯¥è°ˆåˆæˆï¼ˆcompositionï¼‰ã€‚</p>
<h2 data-id="heading-10">åˆæˆï¼ˆCompositionï¼‰</h2>
<p>ä½ å¯èƒ½è§‰å¾—è‡ªå·±æ˜¯å¾ˆå‰å®³çš„å›¾å½¢å¼€å‘è€…ï¼šä¼šç”¨ Three.js / Babylon.js / PlayCanvas åšé…·ç‚«æ•ˆæœâ€¦â€¦ä¹Ÿå¯èƒ½ä½ æ›´å¼ºï¼Œå¾ˆå¤šä¸œè¥¿è‡ªå·±å†™ã€‚</p>
<p>æˆ‘æƒ³è¯´çš„æ˜¯ï¼šæˆ‘ä¸æ˜¯ã€‚</p>
<p>æˆ‘ä¸ºä»€ä¹ˆçŸ¥é“ï¼Ÿ</p>
<p>å› ä¸ºæˆ‘æ›¾åœ¨ Active Theoryï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Factivetheory.net%2F" target="_blank" title="https://activetheory.net/" ref="nofollow noopener noreferrer">activetheory.net/</a>ï¼‰å·¥ä½œï¼Œèº«è¾¹æ˜¯éå¸¸ä¼˜ç§€çš„å›¾å½¢å¼€å‘å’Œ 3D è‰ºæœ¯å®¶ã€‚ä»–ä»¬è®©æˆ‘çœ‹æ¸…è‡ªå·±çš„çŸ­æ¿ï¼Œä¹Ÿå¸®åŠ©æˆ‘æŠŠäº¤ä»˜ç‰©æ¨åˆ°æ›´å¥½çš„çŠ¶æ€ã€‚</p>
<p>å¦‚æœä½ èƒ½äº‰å–å’Œä»–ä»¬å…±äº‹ï¼Œå¯¹ä½ çš„èŒä¸šå‘å±•éå¸¸æœ‰å¸®åŠ©â€”â€”ä½ ä¼šå­¦åˆ°å¾ˆå¤šã€‚</p>
<p>å…¶ä¸­æœ€å…³é”®çš„ä¸€ç‚¹æ˜¯ï¼š<strong>åˆæˆå†³å®šä¸€åˆ‡ã€‚</strong></p>
<p>æˆ‘è¯·æ›¾åœ¨ Active Theory å…±äº‹çš„ Paul-guilhem Repauxï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fx.com%2Farpeegee" target="_blank" title="https://x.com/arpeegee" ref="nofollow noopener noreferrer">x.com/arpeegee</a>ï¼‰å¸®æˆ‘åšåˆæˆå»ºè®®ã€‚ä»–æŒ‡å‡ºäº†å‡ ä¸ªå…³é”®é—®é¢˜ï¼š</p>
<ul>
<li>åœ°é¢åå°„è¿‡äºæ¸…æ™°ï¼Œåº”è¯¥æ›´ç²—ç³™ï¼ˆæ›´æ¨¡ç³Šï¼‰ã€‚</li>
<li>é»‘è‰²èƒŒæ™¯æ— æ³•ä½“ç°å…‰ä»å“ªé‡Œæ¥ï¼›èƒŒæ™¯åº”è¯¥è¥é€ æ›´â€œæœ‰æƒ…ç»ªâ€çš„æ°›å›´ã€‚</li>
<li>ç¼ºå°‘æŠŠå‡ ä½•ä½“ä¸ç¯å¢ƒèåˆçš„å…‰æ•ˆã€‚</li>
<li>å­—æ¯ä¹‹é—´çš„è¿‡æ¸¡ç¼ºä¹åˆç†æ€§ã€‚</li>
<li>éœ€è¦è°ƒè‰²ã€‚</li>
</ul>
<p>ï¼ˆå½“ç„¶è¿˜æœ‰å¾ˆå¤šèƒ½æ”¹çš„åœ°æ–¹ï¼Œä»–åªæ˜¯å¾ˆå‹å¥½åœ°æŒ‘äº†æœ€å…³é”®çš„ã€‚ï¼‰</p>
<h3 data-id="heading-11">åå°„</h3>
<p>ç¬¬ä¸€ç‚¹å¯ä»¥ç”¨åæœŸè§£å†³ï¼šæ ¹æ®å‡ ä½•ä½“åˆ°åœ°é¢çš„è·ç¦»å†³å®šåå°„çš„æ¨¡ç³Šç¨‹åº¦â€”â€”ç¦»åœ°è¶Šè¿œè¶Šæ¨¡ç³Šï¼Œä»è€Œå¾—åˆ°â€œç²—ç³™åº¦â€æ•ˆæœã€‚</p>
<p>ä½†å¦‚æœåªåœ¨â€œæœ‰å‡ ä½•ä½“é«˜åº¦ä¿¡æ¯â€çš„åŒºåŸŸæ¨¡ç³Šï¼Œå‘¨å›´ç©ºç™½åŒºåŸŸä¼šä¸æ¨¡ç³Šï¼Œç»“æœä¼šå¾ˆæ€ªã€‚</p>
<p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘å…ˆåšäº†ä¸€ä¸ªé¢„å¤„ç† passï¼šæŠŠåå°„å‡ ä½•ä½“åšä¸€ä¸ªåç§»ï¼Œå¹¶æŠŠâ€œæœ€è¿‘çš„é«˜åº¦â€å†™å…¥ä¸€å¼ çº¹ç†ï¼Œç”¨æ¥åœ¨ç©ºç™½åŒºåŸŸä¹Ÿå†³å®šæ¨¡ç³Šå¼ºåº¦ã€‚</p>
<p>æ·±çº¢è‰²æ˜¯æœªåå°„å‡ ä½•ä½“ï¼Œç»¿è‰²æ˜¯åå°„å‡ ä½•ä½“ï¼ˆåŒ…å«åç§»ï¼‰ï¼Œä½ ä¼šçœ‹åˆ°ç»¿è‰²æ›´â€œåšâ€ã€‚é«˜åº¦ç¼–ç åœ¨çº¢è‰²é€šé“é‡Œï¼Œå¯è§†ä¸ºä»åœ°é¢åˆ°ä¸Šæ–¹çš„æ¸å˜ã€‚</p>
<h3 data-id="heading-12">èƒŒæ™¯ä¸å…‰</h3>
<p>SSS çš„å®ç°å‡è®¾å…‰æºå§‹ç»ˆä»å‡ ä½•ä½“èƒŒåæ‰“è¿‡æ¥â€”â€”å³ä¾¿é•œå¤´ç§»åŠ¨ï¼Œè¿™ä¸ªæ–¹å‘ä¹Ÿå¾—æˆç«‹ï¼Œå¦åˆ™ SSS ä¸æ˜æ˜¾ã€‚</p>
<p>è¿™å¯¹èƒŒæ™¯è®¾è®¡åè€Œæ˜¯å¥½äº‹ï¼šèƒŒæ™¯å¯ä»¥åšä¸€ä¸ªâ€œèƒŒå…‰æ¸å˜â€ï¼Œè‡ªç„¶åœ°è§£é‡Šå…‰æ¥è‡ªèƒŒåï¼›åŒæ—¶èƒŒæ™¯è‰²ä¹Ÿå¯ä»¥å’Œæè´¨æ›´æ¥è¿‘ï¼Œè®©æ•´ä½“æ›´èåˆã€‚</p>
<h3 data-id="heading-13">å…‰æ•ˆèåˆ</h3>
<p>æœ€åï¼Œä¸ºäº†è®©èƒŒæ™¯ä¸å‡ ä½•ä½“çš„å…‰èåˆå¾—æ›´å¥½ï¼Œæˆ‘åŠ äº† Bloomï¼šåœ¨å‡ ä½•ä½“æ›´è–„çš„åŒºåŸŸï¼ŒBloom æ›´å¼ºï¼Œä»è€Œå¼ºåŒ– SSS çš„è§†è§‰ã€‚</p>
<p>ï¼ˆé¡ºå¸¦ä¸€æï¼šæˆ‘è¿˜å°è¯•è¿‡æŠŠå­—æ¯åŠ¨ç”»å’Œ Codrops çš„ Logo å¯¹é½ï¼Œä½†çœ‹èµ·æ¥åƒå„¿ç«¥è¯†å­—åº”ç”¨ï¼Œäºæ˜¯æ”¾å¼ƒã€‚ï¼‰</p>
<h3 data-id="heading-14">è°ƒè‰²ä¸æ°›å›´</h3>
<p>æœ€åæˆ‘åŠ äº†äº®åº¦ã€å¯¹æ¯”åº¦ã€gamma æ ¡æ­£ï¼Œé€‰æ‹©åæš–çš„é…è‰²è®©æ°›å›´æ›´æŸ”å’Œã€‚åæœŸç”±å¤šä¸ª compute shader å®Œæˆï¼Œåœ¨ <code>Main.js</code> é‡Œè°ƒç”¨ã€‚</p>
<p>å®Œæ•´ä»£ç åº“ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FHectorArellanoDev%2FCodrops" target="_blank" title="https://github.com/HectorArellanoDev/Codrops" ref="nofollow noopener noreferrer">github.com/HectorArellâ€¦</a></p>
<p>ç®€åŒ–ç‰ˆä»“åº“ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FHectorArellanoDev%2FCodropsBasic" target="_blank" title="https://github.com/HectorArellanoDev/CodropsBasic" ref="nofollow noopener noreferrer">github.com/HectorArellâ€¦</a></p>
<p>ä½ å¯ä»¥é€šè¿‡åœ¨ Demo URL æœ«å°¾åŠ  <code>/?word=something</code> æ¥æ›´æ”¹å±•ç¤ºçš„å•è¯ã€‚</p>
<h2 data-id="heading-15">ç»“è¯­</h2>
<p>æœ¬æ–‡æ²¡æœ‰æ·±å…¥æ€§èƒ½ä¼˜åŒ–ï¼Œæˆ‘è§‰å¾—ä¹Ÿæ²¡å¿…è¦ï¼šè¿™ä¸ª Demo æœ¬æ¥å°±é¢å‘å¼º GPUï¼Œä¸æ˜¯ç§»åŠ¨ç«¯ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3331a9a8c18049729abbc850de008876~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR5a6J5Lic5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770793485&amp;x-signature=EMqTEmzlQVMjfUx%2FbmPohsc26hU%3D" alt="image.png" loading="lazy"/></p>
<p>WebGPU çš„ timestamp query è®©å®šä½ç“¶é¢ˆå˜å¾—æ›´å®¹æ˜“ï¼ˆä¾‹å¦‚ <code>Blur3D.js</code> é‡Œå°±æœ‰æ³¨é‡Šæ‰çš„æŸ¥è¯¢ï¼‰ã€‚</p>
<p>è¿™å¹¶ä¸æ„å‘³ç€â€œè¿™å¥—æ–¹æ¡ˆèƒ½ç›´æ¥ä¸Šç”Ÿäº§â€ã€‚Felix åšè¿‡ä¸€ä¸ªç”¨ SPH åšå­—æ¯çš„æ¢ç´¢ï¼Œéå¸¸å¿«ä¹Ÿå¾ˆé…·ï¼Œä½ å¯ä»¥çœ‹çœ‹ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Ffluid.felixmartinez.dev%2F" target="_blank" title="https://fluid.felixmartinez.dev/" ref="nofollow noopener noreferrer">fluid.felixmartinez.dev/</a></p>
<p>æ€»ä¹‹ï¼Œè¿™ä¹ˆå¤šå¹´è¿‡å»ï¼ŒFelix è¿˜æ˜¯èµ¢ç€èµŒå±€ï¼Œè€Œæˆ‘è¿˜åœ¨åŠªåŠ›æ‰­è½¬ç»“æœâ€¦â€¦å¸Œæœ›ä½ ä¹Ÿèƒ½é‡åˆ°ä¸€ä¸ªè®©ä½ è¯´å‡º <em>â€œhold my beerâ€</em> çš„äººã€‚</p>
<h2 data-id="heading-16">å°ç»“</h2>
<p>WebGPU æµä½“é•¿æ–‡çœŸæ­£æœ‰ä»·å€¼çš„ç‚¹åœ¨äºï¼šå®ƒæŠŠâ€œé…·ç‚« Demoâ€æ‹†æˆäº†å¯å¤ç”¨çš„å·¥ç¨‹æ¨¡å—é“¾è·¯â€”â€”ç²’å­æ¨¡æ‹Ÿã€åŠ¿åœºç”Ÿæˆã€marching cubesã€é—´æ¥ dispatch/drawã€å†åˆ°åˆæˆä¸è°ƒè‰²ã€‚è½åœ°æ—¶æœ€å®¹æ˜“å¡ä½çš„å¾€å¾€æ˜¯æ€§èƒ½é¢„ç®—ä¸è°ƒå‚æˆæœ¬ï¼šç®—åŠ›éƒ½èŠ±åœ¨æ¨¡æ‹Ÿä¸å‡ ä½•ç”Ÿæˆä¸Šï¼Œç•™ç»™ç”»é¢æ‰“ç£¨çš„ç©ºé—´å¾ˆå°ï¼Œæ‰€ä»¥å·¥ç¨‹ä¸Šéœ€è¦æŠŠå¯æ§çš„é˜¶æ®µæ‹†å¼€éªŒè¯ã€é€æ­¥è¿­ä»£ã€‚å®è·µä¸­å¯ä»¥ç”¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.rollcode.cn%2F%3Fsource%3Dba%26id%3Dfrontendweekly" target="_blank" title="https://www.rollcode.cn/?source=ba&amp;id=frontendweekly" ref="nofollow noopener noreferrer">RollCode ä½ä»£ç å¹³å°</a>ã€<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.rollcode.cn%2F%3Fsource%3Dba%26id%3Dfrontendweekly" target="_blank" title="https://www.rollcode.cn/?source=ba&amp;id=frontendweekly" ref="nofollow noopener noreferrer">ç§æœ‰åŒ–éƒ¨ç½²</a>ã€<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.rollcode.cn%2F%3Fsource%3Dba%26id%3Dfrontendweekly" target="_blank" title="https://www.rollcode.cn/?source=ba&amp;id=frontendweekly" ref="nofollow noopener noreferrer">è‡ªå®šä¹‰ç»„ä»¶</a>ã€<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.rollcode.cn%2F%3Fsource%3Dba%26id%3Dfrontendweekly" target="_blank" title="https://www.rollcode.cn/?source=ba&amp;id=frontendweekly" ref="nofollow noopener noreferrer">é™æ€é¡µé¢å‘å¸ƒï¼ˆSSG + SEOï¼‰</a> æ¥æŠŠ Demo å±•ç¤ºã€å‚æ•°é¢æ¿ã€ç´ æä¸å‘å¸ƒæµç¨‹åšæˆå¯å¤ç°çš„äº¤ä»˜é—­ç¯ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Spring Boot 4 æ–°ç‰¹æ€§ï¼šæ¨¡å—åŒ–æ¶æ„]]></title>    <link>https://juejin.cn/post/7602531501457129481</link>    <guid>https://juejin.cn/post/7602531501457129481</guid>    <pubDate>2026-02-04T06:29:00.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602531501457129481" data-draft-id="7602544700475736074" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Spring Boot 4 æ–°ç‰¹æ€§ï¼šæ¨¡å—åŒ–æ¶æ„"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-02-04T06:29:00.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Javaç¼–ç¨‹çˆ±å¥½è€…"/> <meta itemprop="url" content="https://juejin.cn/user/819554264300154"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Spring Boot 4 æ–°ç‰¹æ€§ï¼šæ¨¡å—åŒ–æ¶æ„
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/819554264300154/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Javaç¼–ç¨‹çˆ±å¥½è€…
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T06:29:00.000Z" title="Wed Feb 04 2026 06:29:00 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    35
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>2014 å¹´ï¼ŒSpring Boot 1.0 æ¨ªç©ºå‡ºä¸–ï¼Œå‡­å€Ÿâ€œå¼€ç®±å³ç”¨â€çš„ç†å¿µå½»åº•æ”¹å˜äº† Java å¼€å‘æ–¹å¼ã€‚</p>
<p>å½“æ—¶ï¼Œå®ƒçš„æ ¸å¿ƒè‡ªåŠ¨é…ç½®åŒ…Â <code>spring-boot-autoconfigure</code>Â ä»… 182 KBã€‚</p>
<p>ä½†åˆ°äº† Spring Boot 3.5ï¼Œè¿™ä¸ªåŒ…å·²ç»è†¨èƒ€è‡³ 2 MBï¼Œæ”¯æŒçš„åŠŸèƒ½è¶Šæ¥è¶Šå¤šï¼Œä½†å¤æ‚åº¦å’Œä½“ç§¯ä¹Ÿéšä¹‹å¢é•¿ã€‚</p>
<p>åœ¨å³å°†åˆ°æ¥çš„Â <strong>Spring Boot 4</strong>Â ä¸­ï¼ŒSpring å®˜æ–¹å›¢é˜Ÿå¯¹è¿™ä¸€ç°çŠ¶è¿›è¡Œäº†å½»åº•é‡æ„ï¼Œæ­£å¼å¼•å…¥Â <strong>æ¨¡å—åŒ–ï¼ˆModularizationï¼‰</strong> Â æ¶æ„ã€‚</p>
<p>è¿™ä¸€æ”¹å˜ä¸ä»…å½±å“äº†é¡¹ç›®ç»“æ„å’Œä¾èµ–å…³ç³»ï¼Œæ›´ä¸ºå¼€å‘è€…å¸¦æ¥äº†æ›´è½»é‡ã€æ›´æ¸…æ™°ã€æ›´é«˜æ•ˆçš„ä½¿ç”¨ä½“éªŒã€‚</p>
<p>Spring Boot çš„æœ€å¤§ä¼˜ç‚¹ä¹‹ä¸€ï¼Œæ˜¯å®ƒèƒ½è‡ªåŠ¨é…ç½®å¤§é‡æŠ€æœ¯ç»„ä»¶ï¼Œå¦‚ Webã€JPAã€Redisã€Kafka ç­‰ã€‚</p>
<p>ä½†éšç€æ”¯æŒèŒƒå›´çš„æ‰©å¤§ï¼Œä¹Ÿå¸¦æ¥äº†å‡ ä¸ªé—®é¢˜ï¼š</p>
<ul>
<li><strong>è‡ƒè‚¿çš„è‡ªåŠ¨é…ç½®åŒ…</strong>ï¼šæ— è®ºæ˜¯å¦ä½¿ç”¨ï¼Œæ‰€æœ‰è‡ªåŠ¨é…ç½®ç±»éƒ½ä¼šè¢«æ‰“åŒ…è¿›åº”ç”¨ï¼›</li>
<li><strong>IDE æç¤ºå™ªéŸ³å¤š</strong>ï¼šä¼šå‡ºç°è®¸å¤šæ— å…³çš„ç±»å’Œé…ç½®å»ºè®®ï¼›</li>
<li><strong>å¯åŠ¨æ‰«æå¼€é”€å¤§</strong>ï¼šç±»è·¯å¾„è¶Šå¤§ï¼Œå¯åŠ¨é€Ÿåº¦è¶Šæ…¢ã€‚</li>
</ul>
<p>Spring å›¢é˜Ÿæ„è¯†åˆ°ï¼šè¦ä¿æŒ Spring Boot çš„â€œè½»é‡â€å’Œâ€œæ˜“ç”¨â€ï¼Œå°±å¿…é¡»é‡æ–°è®¾è®¡å…¶æ¶æ„è¾¹ç•Œï¼Œè¿™æ­£æ˜¯ Spring Boot 4 æ¨¡å—åŒ–çš„å‡ºå‘ç‚¹ã€‚</p>
<p>Spring Boot 4 å°†åŸå…ˆçš„å•ä½“å¼è‡ªåŠ¨é…ç½®åŒ…Â <strong>æ‹†åˆ†ä¸ºå¤šä¸ªç‹¬ç«‹æ¨¡å—</strong>ã€‚</p>
<p>æ¯ä¸ªæ¨¡å—ä»…è´Ÿè´£ä¸€ç§ç‰¹å®šæŠ€æœ¯çš„è‡ªåŠ¨é…ç½®ï¼Œä¾‹å¦‚ï¼š</p>





























<table><thead><tr><th>æ¨¡å—åç§°</th><th>åŠŸèƒ½æè¿°</th></tr></thead><tbody><tr><td><code>spring-boot-webmvc</code></td><td>ä¼ ç»Ÿ Servlet Web åº”ç”¨</td></tr><tr><td><code>spring-boot-webflux</code></td><td>å“åº”å¼ Web åº”ç”¨</td></tr><tr><td><code>spring-boot-data-jdbc</code></td><td>JDBC æ•°æ®è®¿é—®</td></tr><tr><td><code>spring-boot-flyway</code></td><td>æ•°æ®åº“è¿ç§»ç®¡ç†</td></tr><tr><td><code>spring-boot-webclient</code></td><td>ç‹¬ç«‹ WebClient æ”¯æŒ</td></tr></tbody></table>
<p>æ¯ä¸ªæ¨¡å—éƒ½æœ‰æ¸…æ™°çš„è¾¹ç•Œï¼ŒèŒè´£å•ä¸€ã€ä¾èµ–æ˜ç¡®ï¼Œä»è€Œè®©æ•´ä¸ªæ¡†æ¶å¯ç»´æŠ¤æ€§æ›´é«˜ã€‚</p>
<p>æ¨¡å—åŒ–å¸¦æ¥çš„å¥½å¤„æœ‰ï¼š</p>
<ol>
<li><strong>å¯ç»´æŠ¤æ€§æ›´é«˜ï¼š</strong> æ¨¡å—è¾¹ç•Œæ¸…æ™°ï¼Œå¼€å‘è€…å’Œè´¡çŒ®è€…å¯ä»¥æ›´ä¸“æ³¨äºç‰¹å®šæŠ€æœ¯é¢†åŸŸï¼ŒIDE ä¹Ÿèƒ½æä¾›æ›´ç²¾å‡†çš„ä»£ç æç¤ºã€‚</li>
<li><strong>å¯åŠ¨æ›´å¿«ã€å†…å­˜å ç”¨æ›´å°ï¼š</strong> åº”ç”¨åªå¼•å…¥æ‰€éœ€æ¨¡å—ï¼Œä¸å†åŠ è½½å†—ä½™åŠŸèƒ½ï¼Œå‡å°‘ç±»è·¯å¾„æ‰«æï¼Œä¼˜åŒ–å¯åŠ¨æ—¶é—´ä¸å†…å­˜å ç”¨ã€‚</li>
<li><strong>é…ç½®æ›´ç²¾å‡†ï¼š</strong> Spring Boot 4 èƒ½æ›´å‡†ç¡®åœ°è¯†åˆ«ä¾èµ–æ„å›¾ã€‚ ä¾‹å¦‚ï¼Œåªæƒ³ä½¿ç”¨Â <code>WebClient</code>Â æ—¶ï¼Œå¼•å…¥Â <code>spring-boot-webclient</code>Â æ¨¡å—å³å¯ï¼Œæ— éœ€å†å…³é—­ Web æœåŠ¡å™¨è‡ªåŠ¨é…ç½®ã€‚</li>
<li><strong>æ”¯æŒæ›´å¤šçµæ´»ç”¨ä¾‹ï¼š</strong> ä¾‹å¦‚ï¼Œ<code>Micrometer</code>Â ç›‘æ§æ¨¡å—å¯ä»¥ç‹¬ç«‹ä½¿ç”¨ï¼Œæ— éœ€å¼•å…¥å®Œæ•´çš„Â <code>Actuator</code>Â ä¾èµ–é“¾ã€‚</li>
</ol>
<p>æ¨¡å—åŒ–ä¸ä»…ä½“ç°åœ¨ä¸»åŠŸèƒ½ä¸Šï¼Œ<strong>æµ‹è¯•æ”¯æŒä¹Ÿéšä¹‹é‡æ„</strong>ã€‚</p>
<p>Spring Boot 4 æ–°å¢äº†æµ‹è¯•ä¸“ç”¨æ¨¡å—ï¼Œå¦‚ï¼š</p>
<ul>
<li><code>spring-boot-data-jdbc-test</code></li>
<li><code>spring-boot-starter-webmvc-test</code></li>
<li><code>spring-boot-starter-security-test</code></li>
<li><code>spring-boot-starter-flyway-test</code></li>
</ul>
<p>æ¯ä¸ªåŠŸèƒ½æ¨¡å—éƒ½æœ‰å¯¹åº”çš„æµ‹è¯• Starterï¼Œç¡®ä¿æµ‹è¯•ä¾èµ–å’Œç”Ÿäº§ä¾èµ–ä¿æŒä¸€è‡´ä¸”ç²¾ç®€ã€‚</p>
<p>å¦‚æœä½ æƒ³ä» Spring Boot 3 è¿ç§»åˆ° Spring Boot 4ï¼Œå¤§å¤šæ•°é¡¹ç›®åªéœ€è¦ï¼š</p>
<ul>
<li>æ›´æ–° Starter ä¾èµ–</li>
<li>æ·»åŠ æµ‹è¯• Starter</li>
<li>æ›´æ–°åŒ…è·¯å¾„ä¸è‡ªå®šä¹‰é…ç½®</li>
</ul>
<p>æ¨¡å—åŒ–åï¼ŒåŒ…è·¯å¾„è°ƒæ•´ä¸ºÂ <code>org.springframework.boot.&lt;module&gt;</code>ã€‚</p>
<p>å¦‚æœé¡¹ç›®ä¸­æœ‰æ‰‹åŠ¨å¯¼å…¥çš„è‡ªåŠ¨é…ç½®ç±»æˆ–è‡ªå®šä¹‰ Starterï¼Œéœ€è¦åŒæ­¥ä¿®æ”¹ã€‚</p>
<p>ä¸ºæ–¹ä¾¿è€é¡¹ç›®å¹³æ»‘è¿ç§»ï¼ŒSpring Boot 4 æä¾›äº†Â  <strong>â€œClassic Startersâ€</strong> ï¼š</p>
<pre><code class="hljs language-xml" lang="xml">
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-classic<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<p>è¯¥æ¨¡å¼ä¼šè‡ªåŠ¨å¼•å…¥æ‰€æœ‰æ¨¡å—çš„è‡ªåŠ¨é…ç½®ï¼Œä½†ä¸åŒ…å«æ–°çš„ä¾èµ–ç»“æ„ï¼Œé€‚åˆè¿‡æ¸¡é˜¶æ®µã€‚</p>
<p>å¼€å‘è€…å¯å…ˆè¿ç§»åˆ° Spring Boot 4 çš„ Classic æ¨¡å¼ï¼Œå†é€æ­¥ç²¾ç®€ä¸ºç‹¬ç«‹æ¨¡å—ã€‚</p>
<p>Spring Boot 4 çš„æ¨¡å—åŒ–ä¸ä»…è®©æ¡†æ¶å˜å¾—æ›´æ¸…æ™°ã€æ›´è½»é‡ï¼Œä¹Ÿè®©å¼€å‘ä½“éªŒæ›´è‡ªç„¶ã€æ›´é«˜æ•ˆã€‚</p>
<p>å¯¹äºæƒ³è¦æ„å»ºæ›´è½»ã€æ›´å¿«ã€æ›´å¯æ§çš„ä¼ä¸šçº§åº”ç”¨è€Œè¨€ï¼ŒSpring Boot 4 çš„æ¨¡å—åŒ–ï¼Œæ˜¯ä¸€åœºå€¼å¾—æŠ•å…¥çš„å‡çº§ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[IntelliJ IDEA 2026.1 EAP 2 å‘å¸ƒï¼ŒClaude Code ä½“éªŒä¼˜åŒ–ï¼äººéº»äº†ã€‚]]></title>    <link>https://juejin.cn/post/7602901565033644078</link>    <guid>https://juejin.cn/post/7602901565033644078</guid>    <pubDate>2026-02-04T12:24:10.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602901565033644078" data-draft-id="7602811649126187059" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="IntelliJ IDEA 2026.1 EAP 2 å‘å¸ƒï¼ŒClaude Code ä½“éªŒä¼˜åŒ–ï¼äººéº»äº†ã€‚"/> <meta itemprop="keywords" content="åç«¯,Java"/> <meta itemprop="datePublished" content="2026-02-04T12:24:10.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="JavaGuide"/> <meta itemprop="url" content="https://juejin.cn/user/166781497383294"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            IntelliJ IDEA 2026.1 EAP 2 å‘å¸ƒï¼ŒClaude Code ä½“éªŒä¼˜åŒ–ï¼äººéº»äº†ã€‚
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/166781497383294/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    JavaGuide
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T12:24:10.000Z" title="Wed Feb 04 2026 12:24:10 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯ Guideã€‚IntelliJ IDEA 2026.1 EAP 2 æ¥äº†ï¼è¿™æ¬¡æ›´æ–°å˜åŒ–ä¸å°â€”â€”Gradle Tooling API å‡çº§åˆ° 9.3.0ã€Java è°ƒè¯•å™¨æ–°å¢å¼‚æ­¥å †æ ˆè·Ÿè¸ªå¼€é”€æ£€æµ‹ã€Claude Code æ”¯æŒ Shift+Enter æ¢è¡Œã€JUnit 6 çš„ CancellationToken æ”¯æŒã€DevContainers å®¹å™¨åŒ–å¼€å‘å¢å¼ºã€‚</p>
<p>å’Œå¤§å®¶ä¸€æ ·ï¼Œç°æœ‰ Cursorã€Claude Codeã€ Codex ç­‰ AI ç¼–ç¨‹ IDE ä¹‹åï¼Œæˆ‘æ‰“å¼€ IDEA çš„é¢‘ç‡çœŸçš„å°‘å¤šäº†ã€‚ä¸è¿‡ï¼Œæˆ‘è¿˜æ˜¯ä¼šåœ¨ç”µè„‘è£…ä¸Šï¼Œå¹³æ—¶ CR æˆ–è€…è°ƒè¯•ç­‰åœºæ™¯è¿˜æ˜¯æ›´ç†Ÿæ‚‰ä¸€äº›ã€‚</p>
<p>å½“ä¸‹å»ä¸‹ç»“è®ºï¼Œè¯´è¿™æ¬¾é™ªä¼´äº†ç»å¤§éƒ¨åˆ† Java å¼€å‘è€…è¿™ä¹ˆå¤šå¹´çš„ IDE ä¼šèµ°å‘ç­äº¡ï¼ŒçœŸè¿˜ä¸å¤ªå¥½è¯´ï¼Œè¿™ä¸ªæ—¶ä»£ä¸€åˆ‡å‘å±•éƒ½å¿«äº†ï¼è¯´ä¸å®š IDEA åé¢åœ¨ AI æ–¹å‘å–å¾—äº†è¿›æ­¥å‘¢ï¼Ÿ</p>
<p>å¼€å§‹ä»‹ç»æœ¬æ¬¡å¸¦æ¥çš„ä¸»è¦æ›´æ–°ä¹‹å‰ï¼Œå…ˆç®€å•ä»‹ç»ä¸€ä¸‹ EAPã€‚</p>
<h2 data-id="heading-0">ä»€ä¹ˆæ˜¯ EAPï¼Ÿ</h2>
<p><strong>EAPï¼ˆEarly Access Programï¼‰</strong> æ˜¯ JetBrains çš„æ—©æœŸè®¿é—®è®¡åˆ’ï¼Œæä¾›<strong>å…è´¹çš„å…¨åŠŸèƒ½é¢„è§ˆç‰ˆæœ¬</strong>ã€‚ä½ å¯ä»¥å°†å…¶è§†ä¸ºâ€œå®˜æ–¹å…¬æµ‹ç‰ˆâ€â€”â€”åŠŸèƒ½å®Œæ•´ä½†å¤„äºæ‰“ç£¨æœŸï¼Œé€‚åˆæƒ³æå‰å°é²œæˆ–å…è´¹ä½¿ç”¨æ­£ç‰ˆ IDE çš„å¼€å‘è€…ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/20c9100bb0bf40d7aae693a6077ac9a6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YUd1aWRl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770812652&amp;x-signature=kgIPiSi%2FSjxYi26QmKWoqnyQebA%3D" alt="" loading="lazy"/></p>
<p><strong>ä¸ºä»€ä¹ˆè¦å…³æ³¨ EAPï¼Ÿ</strong></p>
<ul>
<li><strong>å®Œå…¨å…è´¹</strong>ï¼šEAP ç‰ˆæœ¬åœ¨æœ‰æ•ˆæœŸå†…æ²¡æœ‰ä»»ä½•åŠŸèƒ½é™åˆ¶ã€‚</li>
<li><strong>æå‰ä½“éªŒæ–°ç‰¹æ€§</strong>ï¼šæ¯”æ­£å¼ç‰ˆæ—©å‡ ä¸ªæœˆç”¨ä¸Šç”Ÿäº§åŠ›å·¥å…·ã€‚</li>
<li><strong>å½±å“äº§å“æ–¹å‘</strong>ï¼šä½ çš„åé¦ˆå¯ä»¥ç›´æ¥æäº¤ç»™å¼€å‘è€…ï¼Œç”šè‡³å½±å“æœ€ç»ˆç‰ˆæœ¬çš„èµ°å‘ã€‚</li>
</ul>
<p><strong>æ³¨æ„</strong>ï¼šç”±äºæ˜¯ä¸ç¨³å®šç‰ˆæœ¬ï¼Œç”Ÿäº§ç¯å¢ƒå»ºè®®ä½¿ç”¨æ­£å¼ç‰ˆï¼›ä¸ªäººé¡¹ç›®æˆ–æŠ€æœ¯ç ”ç©¶å»ºè®®å°è¯• EAPã€‚</p>
<p>ä¸‹é¢å¸¦å¤§å®¶è¯¦ç»†çœ‹çœ‹è¿™æ¬¡æ›´æ–°ã€‚</p>
<h2 data-id="heading-1">Java è°ƒè¯•å™¨ä¼˜åŒ–</h2>
<p>å†™å¼‚æ­¥ä»£ç æœ€å¤´ç–¼çš„æ˜¯ä»€ä¹ˆï¼Ÿ<strong>è°ƒè¯•</strong>ã€‚</p>
<p>å½“ä½ ç”¨ <code>CompletableFuture</code>ã€Reactorã€RxJava è¿™äº›åº“å†™å¼‚æ­¥é€»è¾‘æ—¶ï¼Œå †æ ˆè·Ÿè¸ªä¼šå˜æˆä¸€ä¸² <code>lambda$xxx$xxx</code>ï¼Œçœ‹ä¸å‡ºä¸šåŠ¡é€»è¾‘åœ¨å“ªã€‚</p>
<p><strong>ä»€ä¹ˆæ˜¯å¼‚æ­¥å †æ ˆè·Ÿè¸ªï¼Ÿ</strong></p>
<p>ä¼ ç»Ÿå †æ ˆæ˜¯â€œç‰©ç†â€çš„ï¼Œè®°å½•çš„æ˜¯å½“å‰çº¿ç¨‹çš„è°ƒç”¨ã€‚è€Œå¼‚æ­¥ä»£ç ä¸­ï¼Œä»»åŠ¡ä¼šåœ¨ä¸åŒçº¿ç¨‹é—´ä¼ é€’ï¼Œå¯¼è‡´è°ƒç”¨é“¾æ–­è£‚ã€‚å¼‚æ­¥å †æ ˆè·Ÿè¸ªå°è¯•è¿˜åŸâ€œé€»è¾‘è°ƒç”¨é“¾â€ï¼Œè®©ä½ çœ‹åˆ°ä»»åŠ¡æ˜¯ä»å“ªé‡Œè¢«åˆ›å»ºå’Œè§¦å‘çš„ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä¼ ç»Ÿä»£ç çš„å †æ ˆ</span>
Thread.run()
  â””â”€ service.process()
      â””â”€ repository.save()

<span class="hljs-comment">// å¼‚æ­¥ä»£ç çš„å †æ ˆï¼ˆä¼ ç»Ÿæ–¹å¼ï¼‰</span>
ForkJoinPool.run()
  â””â”€ lambda$asyncProcess$abc123
      â””â”€ CompletableFuture.apply()
          â””â”€ ?? ä¸šåŠ¡é€»è¾‘åœ¨å“ªï¼Ÿ
</code></pre>
<p><strong>å¼‚æ­¥å †æ ˆè·Ÿè¸ª</strong>å°è¯•è¿˜åŸ"é€»è¾‘è°ƒç”¨é“¾"ï¼Œè€Œä¸æ˜¯"ç‰©ç†çº¿ç¨‹æ ˆ"ï¼Œè®©å¼€å‘è€…èƒ½çœ‹åˆ°ä¸šåŠ¡ä»£ç çš„æ‰§è¡Œè·¯å¾„ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/36daa702f4114fc9ab7cc4a30bdfd27b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YUd1aWRl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770812652&amp;x-signature=uPCv0Z0dciGPdBYsNPoyoompIfo%3D" alt="åœ¨æ§åˆ¶å°ä¸­æ‰“å°çš„å¤±è´¥æµ‹è¯•çš„å¼‚æ­¥å †æ ˆè·Ÿè¸ª" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c4119f26dad94da6bee533c36a819f5c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YUd1aWRl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770812652&amp;x-signature=GLAz0UIBNcxLJLcDh5c81EPYq2o%3D" alt="è¿è¡Œé…ç½®å¯¹è¯æ¡†ä¸­çš„â€œæ‰“å°å¼‚å¸¸çš„å¼‚æ­¥å †æ ˆè·Ÿè¸ªâ€å¤é€‰æ¡†" loading="lazy"/></p>
<p>EAP 2 å¼•å…¥äº†<strong>å¼‚æ­¥å †æ ˆè·Ÿè¸ªå¼€é”€æ£€æµ‹</strong>ã€‚</p>
<p><strong>ä¸ºä»€ä¹ˆè¦æ£€æµ‹å¼€é”€ï¼Ÿ</strong></p>
<p>ç»´æŠ¤é€»è¾‘è°ƒç”¨å…³ç³»éœ€è¦é¢å¤–çš„å†…å­˜å’Œ CPU èµ„æºã€‚åœ¨æŸäº›æç«¯åœºæ™¯ä¸‹ï¼Œè¿™ç§ç›‘æ§æœ¬èº«å¯èƒ½æˆä¸ºæ€§èƒ½ç“¶é¢ˆã€‚æ–°ç‰¹æ€§ä¼šä¸»åŠ¨ç›‘æµ‹è°ƒè¯•å™¨çš„è¿è¡Œå¼€é”€ï¼Œå½“å‘ç°å…¶æ¶ˆè€—èµ„æºè¿‡å¤šæ—¶ä¼šåŠæ—¶æç¤ºã€‚è¿™èƒ½æœ‰æ•ˆé˜²æ­¢å¼€å‘è€…å› ä¸ºâ€œè°ƒè¯•å·¥å…·å¤ªé‡â€è€Œå¯¹åº”ç”¨æœ¬èº«çš„æ€§èƒ½äº§ç”Ÿè¯¯åˆ¤ã€‚</p>
<h2 data-id="heading-2">é€‚é… JUnit 6 æ–°ç‰¹æ€§</h2>
<p>JUnit 6.0.0 å·²ç»å‘å¸ƒï¼ŒIDEA 2026.1 EAP 2 å¯¹å…¶æ”¯æŒè¿›è¡Œäº†ä¼˜åŒ–ã€‚</p>
<h3 data-id="heading-3">CancellationToken æ”¯æŒï¼ˆæ–°ç‰¹æ€§ï¼‰</h3>
<p>IDEA-382199ï¼š<strong>JUnit 6 æ”¯æŒ CancellationToken</strong>ã€‚</p>
<p><strong>JUnit 6 æœ‰å“ªäº›æ–°ç‰¹æ€§ï¼Ÿ</strong></p>
<p>JUnit 6 æ˜¯ä¸€æ¬¡é‡å¤§å‡çº§ï¼Œå…¶æ ¸å¿ƒå˜åŒ–åŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>ç‰ˆæœ¬å·ç»Ÿä¸€</strong>ï¼šJUnit Platformã€Jupiter å’Œ Vintage ç°åœ¨ç»Ÿä¸€ä½¿ç”¨ 6.0.0 ç‰ˆæœ¬å·ã€‚</li>
<li><strong>åŸºçº¿æå‡</strong>ï¼šè¦æ±‚ <strong>Java 17+</strong> å’Œ <strong>Kotlin 2.2+</strong>ã€‚</li>
<li><strong>åŸç”Ÿæ”¯æŒ Kotlin æŒ‚èµ·å‡½æ•°</strong>ï¼šå¯ä»¥ç›´æ¥æµ‹è¯• <code>suspend</code> æ–¹æ³•ã€‚</li>
<li><strong>åä½œå¼å–æ¶ˆ</strong>ï¼šå¼•å…¥ CancellationToken APIã€‚</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/184a684db55c4258b55053e218faf58c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YUd1aWRl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770812652&amp;x-signature=GpaNjV2pctW2HASoffmYdLszde4%3D" alt="" loading="lazy"/></p>
<p><strong>CancellationToken</strong> æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<p>å®ƒè®©æµ‹è¯•å¯ä»¥è¢«"ä¸»åŠ¨å–æ¶ˆ"ã€‚</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">// ä½ å¯åŠ¨äº† 1000 ä¸ªæµ‹è¯•</span>
<span class="hljs-comment">// è·‘åˆ°ç¬¬ 10 ä¸ªå‘ç°å…³é”® bugï¼Œæƒ³ç«‹å³åœæ­¢</span>
<span class="hljs-comment">// ä»¥å‰åªèƒ½æ‰‹åŠ¨ kill è¿›ç¨‹</span>
<span class="hljs-comment">// ç°åœ¨å¯ä»¥ç”¨ CancellationToken å–æ¶ˆå‰©ä½™æµ‹è¯•</span>
</code></pre>
<p>å¯¹ CI/CD åœºæ™¯å°¤å…¶æœ‰ç”¨â€”â€”å¿«é€Ÿåé¦ˆã€èŠ‚çœèµ„æºã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fd51fdc5c75f42159041ec223857af6b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YUd1aWRl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770812652&amp;x-signature=xcZmvD6HEC03kHG9Xbb19wxy4%2Fk%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h3 data-id="heading-4">@FieldSource é™æ€åˆ†æä¿®å¤</h3>
<p>ä¿®å¤äº† JUnit 6 <code>@FieldSource</code> çš„é™æ€åˆ†æè¯¯æŠ¥ã€‚</p>
<pre><code class="hljs language-arduino" lang="arduino">@<span class="hljs-built_in">FieldSource</span>(<span class="hljs-string">"testData.txt"</span>)
<span class="hljs-type">static</span> <span class="hljs-built_in">Stream</span>&lt;<span class="hljs-type">String</span>&gt; testData;

<span class="hljs-comment">// ä»¥å‰ï¼šIDE æŠ¥é”™ "Field source type must be convertible to a Stream"</span>
<span class="hljs-comment">// ç°åœ¨ï¼šæ­£ç¡®è¯†åˆ«ç±»å‹ï¼Œä¸å†è¯¯æŠ¥</span>
</code></pre>
<h2 data-id="heading-5">DevContainers å¢å¼º</h2>
<p>å¦‚æœä½ åœ¨ç”¨ DevContainersï¼ˆå®¹å™¨åŒ–å¼€å‘ç¯å¢ƒï¼‰ï¼Œè¿™æ¬¡æ›´æ–°æœ‰å‡ ä¸ªé‡è¦æ”¹è¿›ã€‚</p>
<p><strong>ä»€ä¹ˆæ˜¯ DevContainersï¼Ÿ</strong></p>
<p><strong>DevContainersï¼ˆå¼€å‘å®¹å™¨ï¼‰</strong> æ˜¯ç”¨å®¹å™¨å°è£…å®Œæ•´å¼€å‘ç¯å¢ƒçš„æŠ€æœ¯ã€‚ä½ æŠŠé¡¹ç›®éœ€è¦çš„æ‰€æœ‰å·¥å…·ã€ä¾èµ–ã€é…ç½®éƒ½æ‰“åŒ…è¿› Docker å®¹å™¨ï¼Œå›¢é˜Ÿæˆå‘˜ç”¨åŒä¸€ä¸ªé•œåƒå¼€å‘â€”â€”"åœ¨æˆ‘æœºå™¨ä¸Šèƒ½è·‘"çš„é—®é¢˜ç›´æ¥æ¶ˆå¤±ã€‚</p>
<p>æ ¸å¿ƒå¥½å¤„ï¼š</p>
<ul>
<li><strong>ç¯å¢ƒä¸€è‡´æ€§</strong>ï¼šæ‰€æœ‰äººç”¨åŒä¸€ä¸ªå®¹å™¨ï¼Œæœ¬åœ°ã€æµ‹è¯•ã€ç”Ÿäº§ç¯å¢ƒå¯¹é½</li>
<li><strong>å¿«é€Ÿä¸Šæ‰‹</strong>ï¼šæ–°æˆå‘˜ <code>docker-compose up</code> å°±èƒ½å¹²æ´»</li>
<li><strong>éš”ç¦»æ€§</strong>ï¼šé¡¹ç›®ä¾èµ–ä¸æ±¡æŸ“æœ¬åœ°æœºå™¨</li>
<li><strong>å¯ç§»æ¤</strong>ï¼šäº‘å¼€å‘ç¯å¢ƒï¼ˆGitHub Codespacesã€Gitpodï¼‰æ— ç¼åˆ‡æ¢</li>
</ul>
<h3 data-id="heading-6">æ–°å¢ DevContainers é…ç½®é€‰é¡¹</h3>
<p>ä¸ºäº†æ›´å¥½åœ°å…¼å®¹ <strong>Dev Container Specification</strong>ï¼ŒEAP 2 æ–°å¢äº†ä¸‰ä¸ªå…³é”®é…ç½®é¡¹ï¼š</p>





















<table><thead><tr><th align="left">é€‰é¡¹</th><th align="left">ä½œç”¨</th></tr></thead><tbody><tr><td align="left"><code>remoteUser</code></td><td align="left">æŒ‡å®šå®¹å™¨å†…è¿è¡Œå‘½ä»¤çš„ç”¨æˆ·ï¼ˆå¦‚é¿å…ä½¿ç”¨ root å¸¦æ¥çš„æƒé™é—®é¢˜ï¼‰</td></tr><tr><td align="left"><code>remoteEnv</code></td><td align="left">çµæ´»è®¾ç½®å®¹å™¨å†…çš„ç¯å¢ƒå˜é‡</td></tr><tr><td align="left"><code>userEnvProbe</code></td><td align="left">ä¼˜åŒ–æ¢æµ‹ç”¨æˆ·ç¯å¢ƒé…ç½®ï¼ˆå¦‚ <code>.zshrc</code>ï¼‰çš„æ–¹å¼</td></tr></tbody></table>
<p>è¿™äº›æ”¹è¿›è®© IDEA åœ¨å¤„ç†å¤æ‚çš„å®¹å™¨æƒé™å’Œç¯å¢ƒå·®å¼‚æ—¶æ›´åŠ æ¸¸åˆƒæœ‰ä½™ã€‚</p>
<h3 data-id="heading-7">Docker è¿æ¥ä¿®å¤</h3>
<p>ä¿®å¤äº† <strong>macOS ä¸Š Docker æ’ä»¶è¿æ¥å¤±è´¥</strong>çš„é—®é¢˜ã€‚è¯¥é—®é¢˜ç”± Docker Desktop for macOS æ›´æ”¹é»˜è®¤ Socket è·¯å¾„å¼•èµ·ï¼Œæ–°ç‰ˆæœ¬å·²å®Œæˆè·¯å¾„è‡ªåŠ¨é€‚é…ã€‚</p>
<h2 data-id="heading-8">Gradle ç”Ÿæ€å‡çº§</h2>
<p>è¿™æ¬¡ EAP 2 åœ¨ Gradle é›†æˆä¸Šä¸‹äº†å¤§åŠŸå¤«ï¼Œæ ¸å¿ƒæ˜¯<strong>Gradle Tooling API å‡çº§åˆ° 9.3.0</strong>ã€‚</p>
<h3 data-id="heading-9">Gradle Tooling API 9.3.0</h3>
<p><strong>ä»€ä¹ˆæ˜¯ Gradle Tooling APIï¼Ÿ</strong></p>
<p>å®ƒæ˜¯ Gradle æä¾›çš„ç¼–ç¨‹æ¥å£ï¼Œè®© IDE å¯ä»¥"æ·±å…¥"æ„å»ºè¿‡ç¨‹â€”â€”ä¸æ˜¯ç®€å•è°ƒç”¨å‘½ä»¤è¡Œï¼Œè€Œæ˜¯ç›´æ¥æŸ¥è¯¢é¡¹ç›®ç»“æ„ã€ä¾èµ–å…³ç³»ã€ä»»åŠ¡ä¿¡æ¯ï¼Œå¹¶ç”¨ç±»å‹å®‰å…¨çš„æ–¹å¼è¿”å›ç»“æœã€‚</p>
<p>ç®€å•å¯¹æ¯”ï¼š</p>
<ul>
<li><strong>å‘½ä»¤è¡Œæ–¹å¼</strong>ï¼šIDE è°ƒç”¨ <code>gradle tasks</code>ï¼Œç„¶åè§£ææ–‡æœ¬è¾“å‡º</li>
<li><strong>Tooling API</strong>ï¼šIDE è°ƒç”¨ <code>getTasks()</code>ï¼Œç›´æ¥æ‹¿åˆ°ä»»åŠ¡å¯¹è±¡åˆ—è¡¨</li>
</ul>
<p>Tooling API çš„ä¼˜åŠ¿ï¼š</p>
<ul>
<li><strong>ç‰ˆæœ¬ç‹¬ç«‹</strong>ï¼šåŒä¸€ API ç‰ˆæœ¬å¯ä»¥å…¼å®¹ä¸åŒ Gradle ç‰ˆæœ¬</li>
<li><strong>ç»“æ„åŒ–æ•°æ®</strong>ï¼šä¸éœ€è¦è§£ææ–‡æœ¬ï¼Œç›´æ¥è·å–æ¨¡å‹å¯¹è±¡</li>
<li><strong>æ·±åº¦é›†æˆ</strong>ï¼šå¯ä»¥å®æ—¶ç›‘å¬æ„å»ºè¿›åº¦ã€æ¨¡å‹å˜åŒ–</li>
</ul>
<p>å‡çº§åˆ° 9.3.0 å¸¦æ¥çš„å¥½å¤„ï¼š</p>
<ul>
<li>æ›´å¥½çš„ WSL/Docker ç¯å¢ƒæ”¯æŒ</li>
<li>æœ¬åœ°ä¾èµ–è¡¥å…¨ä½“éªŒæå‡</li>
<li>ç‰ˆæœ¬ç›®å½•ï¼ˆVersion Catalogï¼‰ç›¸å…³é€»è¾‘ä¿®å¤</li>
</ul>
<h3 data-id="heading-10">Gradle Best Practices æ£€æµ‹</h3>
<p>æ–°å¢<strong>æœ€ä½³å®è·µæ£€æµ‹</strong>åŠŸèƒ½ã€‚Gradle å®˜æ–¹æœ‰ä¸€å¥—æ„å»ºæœ€ä½³å®è·µï¼ˆæ¯”å¦‚é¿å…ä½¿ç”¨è¿‡æ—¶è¯­æ³•ã€åˆç†é…ç½®ä¾èµ–ç­‰ï¼‰ï¼ŒIDEA ç°åœ¨ä¼šä¸»åŠ¨æ£€æµ‹ä½ çš„ <code>build.gradle</code>/<code>build.gradle.kts</code> æ˜¯å¦ç¬¦åˆè¿™äº›å®è·µã€‚</p>
<pre><code class="hljs language-groovy" lang="groovy">// ä¸æ¨è
dependencies {
    implementation 'org.springframework.boot:spring-boot-starter-web:3.2.0'
}

// æ¨èï¼šä½¿ç”¨ç‰ˆæœ¬ç›®å½•
dependencies {
    implementation libs.spring.boot.starter.web
}
</code></pre>
<h3 data-id="heading-11">æœ¬åœ°ä¾èµ–è¡¥å…¨</h3>
<p>EAP 2 ä¿®å¤äº†<strong>æœ¬åœ°ä¾èµ–è¡¥å…¨</strong>çš„é—®é¢˜ã€‚ä»¥å‰åœ¨ <code>dependencies {}</code> å—é‡Œè¡¥å…¨æœ¬åœ°é¡¹ç›®ä¾èµ–æ—¶ï¼Œé‡åˆ°æ¨ªæ ï¼ˆ<code>-</code>ï¼‰ç¬¦å·ä¼šå¤±æ•ˆï¼Œç°åœ¨å·²ç»ä¿®å¤ã€‚</p>
<p>å¦å¤–ï¼Œ<strong>TOML å…ƒç´ </strong>çš„ Find Usages çª—å£æ ‡é¢˜ä¹Ÿæ”¹äº†ï¼ˆIDEA-382192ï¼‰ï¼Œæ›´æ¸…æ™°ã€‚</p>
<h2 data-id="heading-12">å¼€å‘è€…ä½“éªŒä¼˜åŒ–</h2>
<h3 data-id="heading-13">HTTP Client æ–°å¢ wait-for å‡½æ•°</h3>
<p><strong>HTTP Client æ”¯æŒ <code>wait-for(x)</code> å‡½æ•°</strong>ï¼ˆä¼‘çœ /ç­‰å¾…ï¼‰ã€‚</p>
<pre><code class="hljs language-perl" lang="perl"><span class="hljs-comment">## æµ‹è¯•æ¥å£å»¶è¿Ÿ</span>
GET https:<span class="hljs-regexp">//api</span>.example.com/ping

<span class="hljs-comment">## ç­‰å¾… 3 ç§’åå†æ¬¡è¯·æ±‚</span>
<span class="hljs-keyword">wait</span>-<span class="hljs-keyword">for</span>(<span class="hljs-number">3</span>)

GET https:<span class="hljs-regexp">//api</span>.example.com/ping
</code></pre>
<p>è¿™å¯¹æµ‹è¯•"å»¶è¿Ÿè§¦å‘"ã€"é‡è¯•é€»è¾‘"ç­‰åœºæ™¯æœ‰ç”¨ã€‚</p>
<h3 data-id="heading-14">Terminal ä¸­ Claude Code æ”¯æŒä¼˜åŒ–</h3>
<p><strong>Terminal ä¸­ Claude Code æ”¯æŒ Shift+Enter æ¢è¡Œ</strong>ã€‚</p>
<p>ä»¥å‰åœ¨ Terminal é‡Œè¿›å…¥ Claude Code æ¨¡å¼åï¼ŒæŒ‰ Enter æ˜¯å‘é€æ¶ˆæ¯ï¼Œæ— æ³•æ¢è¡Œã€‚ç°åœ¨ Shift+Enter å¯ä»¥æ’å…¥æ–°è¡Œã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d37c6aa901844af99543cb9e5fe5c7ec~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YUd1aWRl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770812652&amp;x-signature=2Z5NgwZtF1ZLSuiJg40FH7NLiZ4%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-15">è¯­è¨€çº§åˆ«æ™ºèƒ½åŒ¹é…</h3>
<p><strong>è¯­è¨€çº§åˆ«è‡ªåŠ¨åŒ¹é…æœ€é«˜æ”¯æŒçš„ JDK</strong>ã€‚</p>
<p>ä»¥å‰æ‰‹åŠ¨è®¾ç½®è¯­è¨€çº§åˆ«å¾ˆçƒ¦â€”â€”é¡¹ç›®ç”¨ JDK 21ï¼Œä½†è¯­è¨€çº§åˆ«è¿˜æ˜¯ Java 17ï¼Œæ–°è¯­æ³•æŠ¥é”™ã€‚ç°åœ¨ IDEA ä¼šè‡ªåŠ¨è¯†åˆ«é¡¹ç›® JDKï¼ŒæŠŠè¯­è¨€çº§åˆ«è®¾åˆ°æœ€é«˜æ”¯æŒç‰ˆæœ¬ã€‚</p>
<h3 data-id="heading-16">é«˜ CPU å ç”¨ä¼˜åŒ–</h3>
<p>ä¿®å¤äº†<strong>æ‰“å¼€å¸¦é€šé…ç¬¦æ³›å‹çš„ Java ç±»å¯¼è‡´ CPU é£™å‡</strong>çš„é—®é¢˜ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// è¿™ç§ä»£ç ä»¥å‰ä¸€æ‰“å¼€ IDEA å°±å¼€å§‹ç‹‚åƒ CPU</span>
<span class="hljs-title class_">List</span>&lt;? <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Map</span>&lt;<span class="hljs-title class_">String</span>, ? <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Collection</span>&lt;?&gt;&gt;&gt; wildcardHell;
</code></pre>
<h2 data-id="heading-17">K2 ç¼–è¯‘å™¨æŒç»­è¿›åŒ–</h2>
<h3 data-id="heading-18">æ™ºèƒ½è¡¥å…¨æ”¹è¿›</h3>
<p><strong>æ”¹è¿›çš„å‘½åå‚æ•°è¡¥å…¨æ’åº</strong>ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// ä»¥å‰ï¼šå‘½åå‚æ•°è¡¥å…¨é¡ºåºæ··ä¹±</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">processUser</span><span class="hljs-params">(id: <span class="hljs-type">Long</span>, name: <span class="hljs-type">String</span>, age: <span class="hljs-type">Int</span>, email: <span class="hljs-type">String</span>)</span></span>

processUser(id = <span class="hljs-number">1</span>, ??? æç¤ºé¡ºåºå¾ˆä¹±)

<span class="hljs-comment">// ç°åœ¨ï¼šæŒ‰ä½¿ç”¨é¢‘ç‡ã€ä¸Šä¸‹æ–‡ç›¸å…³æ€§æ’åº</span>
processUser(id = <span class="hljs-number">1</span>, name = <span class="hljs-string">"å¼ ä¸‰"</span>, age = <span class="hljs-number">25</span>, email = <span class="hljs-string">"..."</span>)
</code></pre>
<h3 data-id="heading-19">æšä¸¾å€¼è½¯å¼ƒç”¨æç¤º</h3>
<p><strong>è½¯å¼ƒç”¨ <code>kotlin.enumValues</code> å‡½æ•°</strong>ã€‚</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// ä»¥å‰</span>
val values = enumValues&lt;<span class="hljs-attribute">Color</span>&gt;()

<span class="hljs-comment">// ç°åœ¨ IDE å»ºè®®ç”¨æ›´ç°ä»£çš„æ–¹å¼</span>
val values = <span class="hljs-attribute">Color</span><span class="hljs-selector-class">.entries</span>
</code></pre>
<p><code>enumValues</code> æ˜¯ Kotlin 1.9 ä¹‹å‰çš„é—ç•™ APIï¼Œæ–°ä»£ç åº”è¯¥ç”¨ <code>entries</code> å±æ€§ã€‚</p>
<h2 data-id="heading-20">Bug ä¿®å¤å¤§ç›˜ç‚¹</h2>
<p>EAP 2 ä¿®å¤äº†å¤§é‡ Bugï¼Œä»¥ä¸‹æ˜¯æŒ‰æ¨¡å—åˆ†ç±»çš„ä¸»è¦ä¿®å¤ï¼š</p>









































<table><thead><tr><th align="left">æ¨¡å—</th><th align="left">ä¸»è¦ä¿®å¤</th></tr></thead><tbody><tr><td align="left"><strong>Gradle</strong></td><td align="left">æœ¬åœ°ä¾èµ–è¡¥å…¨æ¨ªæ å¤±æ•ˆã€ç‰ˆæœ¬ç›®å½•é‡å‘½åã€WSL ç£ç›˜æ‰«æ</td></tr><tr><td align="left"><strong>Java</strong></td><td align="left">é€šé…æ³›å‹ CPU é£™å‡ã€åŒ…æ³¨è§£ PSI ä¸¢å¤±ã€optimize imports å¿½ç•¥æ³¨é‡Š</td></tr><tr><td align="left"><strong>è°ƒè¯•å™¨</strong></td><td align="left">Split Debugger å€¼æ›´æ–°é—®é¢˜ã€å¼‚æ­¥å †æ ˆè·Ÿè¸ªå¼€é”€æ£€æµ‹</td></tr><tr><td align="left"><strong>æµ‹è¯•</strong></td><td align="left">JUnit å‚æ•°æœªä½¿ç”¨è¯¯æŠ¥ã€Cucumber æ–œæ è½¬ä¹‰</td></tr><tr><td align="left"><strong>Kotlin</strong></td><td align="left">K2 ç§»é™¤æœªç”¨å˜é‡ã€æ™ºèƒ½è¡¥å…¨æ’åºã€æšä¸¾å€¼è½¯å¼ƒç”¨</td></tr><tr><td align="left"><strong>DevContainers</strong></td><td align="left">WSL/Docker è·¯å¾„é—®é¢˜ã€è¿œç¨‹ç”¨æˆ·/ç¯å¢ƒå˜é‡æ”¯æŒ</td></tr><tr><td align="left"><strong>UI</strong></td><td align="left">èœå•é—ªçƒã€Islands ä¸»é¢˜æ¸å˜ä¸æµç•…ã€å­—ä½“æ ·å¼é‡ç½®</td></tr><tr><td align="left"><strong>Version Control</strong></td><td align="left">Git é«˜äº®æ®‹ç•™ã€Worktree æ‰“å¼€å¤±è´¥</td></tr></tbody></table>
<h2 data-id="heading-21">æ€»ç»“</h2>
<p><strong>IntelliJ IDEA 2026.1 EAP 2 çš„å…³é”®å‡çº§ï¼š</strong></p>
<ol>
<li><strong>Gradle Tooling API 9.3.0</strong>ï¼šåº•å±‚é€šä¿¡å‡çº§ï¼Œæœ¬åœ°ä¾èµ–è¡¥å…¨ä¿®å¤</li>
<li><strong>Java è°ƒè¯•å™¨å¢å¼º</strong>ï¼šå¼‚æ­¥å †æ ˆè·Ÿè¸ªå¼€é”€æ£€æµ‹</li>
<li><strong>JUnit 6 æ”¯æŒ</strong>ï¼š<code>CancellationToken</code>ã€<code>@FieldSource</code> ä¿®å¤</li>
<li><strong>DevContainers å¢å¼º</strong>ï¼šr<code>emoteUser/remoteEnv/userEnvProbe</code> é€‰é¡¹</li>
<li><strong>HTTP Client</strong>ï¼šæ–°å¢ <code>wait-for</code> å‡½æ•°</li>
<li><strong>Claude Code</strong>ï¼šClaude Code æ”¯æŒ Shift+Enter æ¢è¡Œ</li>
<li><strong>Kotlin K2</strong>ï¼šæ™ºèƒ½è¡¥å…¨æ”¹è¿›ã€æšä¸¾å€¼è½¯å¼ƒç”¨</li>
<li><strong>æ€§èƒ½ä¼˜åŒ–</strong>ï¼šä¿®å¤é€šé…æ³›å‹ CPU é£™å‡ç­‰é—®é¢˜</li>
</ol>
<p><strong>å»ºè®®ï¼š</strong></p>
<ul>
<li>å¦‚æœä½ åœ¨ç”¨ Gradle 9.xã€JUnit 6ã€æˆ–è€…æå®¹å™¨åŒ–å¼€å‘ï¼Œè¿™æ¬¡ EAP å€¼å¾—ä¸€è¯•</li>
<li>EAP ç‰ˆæœ¬å®Œå…¨å…è´¹ï¼Œä½†å¯èƒ½ä¸ç¨³å®šï¼Œç”Ÿäº§ç¯å¢ƒè°¨æ…ä½¿ç”¨</li>
<li>å¯ä»¥åœ¨è™šæ‹Ÿæœºæˆ–æµ‹è¯•é¡¹ç›®é‡Œå…ˆè¯•è¯•ï¼Œåé¦ˆç»™ JetBrains å¸®åŠ©æ”¹è¿›æœ€ç»ˆç‰ˆæœ¬</li>
</ul>
<p><strong>â­ï¸æ¨è</strong>:</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fjavaguide.cn%2Fhome.html" target="_blank" title="https://javaguide.cn/home.html" ref="nofollow noopener noreferrer">Java é¢è¯• &amp; åç«¯é€šç”¨é¢è¯•æŒ‡å—</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fjavaguide.cn%2Fzhuanlan%2Finterview-guide.html" target="_blank" title="https://javaguide.cn/zhuanlan/interview-guide.html" ref="nofollow noopener noreferrer">ã€ŠSpringAI æ™ºèƒ½é¢è¯•å¹³å°+RAG çŸ¥è¯†åº“ã€‹</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fjavaguide.cn%2Finterview-preparation%2Fjava-roadmap.html" target="_blank" title="https://javaguide.cn/interview-preparation/java-roadmap.html" ref="nofollow noopener noreferrer">Java å­¦ä¹ è·¯çº¿(æœ€æ–°ç‰ˆï¼Œ4w+å­—)</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fjavaguide.cn%2Finterview-preparation%2Fpdf-interview-javaguide.html" target="_blank" title="https://javaguide.cn/interview-preparation/pdf-interview-javaguide.html" ref="nofollow noopener noreferrer">2026 æœ€æ–°åç«¯é¢è¯• PDF èµ„æ–™</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å½“ JS é˜»å¡ä¸»çº¿ç¨‹æ—¶ï¼Œä¸ºä»€ä¹ˆä½ çš„ CSS åŠ¨ç”»è¿˜åœ¨è·‘ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7602503154506580009</link>    <guid>https://juejin.cn/post/7602503154506580009</guid>    <pubDate>2026-02-04T03:45:54.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602503154506580009" data-draft-id="7602497125269159942" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å½“ JS é˜»å¡ä¸»çº¿ç¨‹æ—¶ï¼Œä¸ºä»€ä¹ˆä½ çš„ CSS åŠ¨ç”»è¿˜åœ¨è·‘ï¼Ÿ"/> <meta itemprop="keywords" content="å‰ç«¯,é¢è¯•,æ€§èƒ½ä¼˜åŒ–"/> <meta itemprop="datePublished" content="2026-02-04T03:45:54.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ssshooter"/> <meta itemprop="url" content="https://juejin.cn/user/3122268751795101"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å½“ JS é˜»å¡ä¸»çº¿ç¨‹æ—¶ï¼Œä¸ºä»€ä¹ˆä½ çš„ CSS åŠ¨ç”»è¿˜åœ¨è·‘ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3122268751795101/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ssshooter
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T03:45:54.000Z" title="Wed Feb 04 2026 03:45:54 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>â€”â€” ä»ä¸€ä¸ª React Demo çœ‹æµè§ˆå™¨æ¸²æŸ“ä¸åˆæˆçº¿ç¨‹</p>
<p>ä¼ é€é—¨ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.mind-elixir.com%2Fzh%2Flearn-js-blocking" target="_blank" title="https://tools.mind-elixir.com/zh/learn-js-blocking" ref="nofollow noopener noreferrer">tools.mind-elixir.com/zh/learn-jsâ€¦</a></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/786bb1cf088147a78a43c0f9b866b895~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc3NzaG9vdGVy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770781554&amp;x-signature=GNcSQcPDf%2BcWJp%2BqJhT3lfeCIcU%3D" alt="åŠ¨ç”»é˜»å¡å®éªŒ.png" loading="lazy"/></p>
<p>åœ¨å‰ç«¯å¼€å‘ä¸­ï¼Œæˆ‘ä»¬å¸¸å¬åˆ°ä¸€å¥è¯ï¼šâ€œä¸è¦é˜»å¡ä¸»çº¿ç¨‹ï¼ˆMain Threadï¼‰â€ã€‚æˆ‘ä»¬ä¹Ÿå¸¸å¬åˆ°å¦ä¸€æ¡æ€§èƒ½ä¼˜åŒ–å»ºè®®ï¼šâ€œå°½é‡ä½¿ç”¨ <code>transform</code> å’Œ <code>opacity</code> åšåŠ¨ç”»â€ã€‚</p>
<p>è¿™ä¸¤è€…ä¹‹é—´æœ‰ä»€ä¹ˆæ·±å±‚è”ç³»ï¼Ÿä¸ºä»€ä¹ˆå½“ä¸€æ®µæ­»å¾ªç¯ JavaScript ä»£ç æŠŠé¡µé¢å¡æ­»æ—¶ï¼ŒæŸäº›åŠ¨ç”»å´èƒ½åƒâ€œå¹¸å­˜è€…â€ä¸€æ ·æµç•…è¿è¡Œï¼Œè€Œå…¶ä»–çš„åˆ™ç¬é—´å†»ç»“ï¼Ÿ</p>
<p>ä»Šå¤©ï¼Œæˆ‘ä»¬é€šè¿‡ä¸€ä¸ªå…·ä½“çš„ React Demo æ¥é€šè¿‡å®éªŒæ­å¼€æµè§ˆå™¨æ¸²æŸ“æœºåˆ¶çš„é¢çº±ã€‚</p>
<h2 data-id="heading-0">å®éªŒç°åœºï¼šä¸€ä¸ªâ€œå¡é¡¿â€çš„æŒ‰é’®</h2>
<p>æˆ‘ä»¬æ„å»ºäº†ä¸€ä¸ªç®€å•çš„ React åº”ç”¨ã€‚æ ¸å¿ƒé€»è¾‘åœ¨äºä¸€ä¸ªåä¸ºâ€œBlock Main Threadâ€çš„æŒ‰é’®ã€‚ç‚¹å‡»å®ƒï¼Œä¼šè§¦å‘ä¸€æ®µè€—æ—¶ 3 ç§’çš„åŒæ­¥ <code>while</code> å¾ªç¯ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// æ¨¡æ‹Ÿä¸»çº¿ç¨‹é˜»å¡</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleBlock</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-title function_">setIsBlocking</span>(<span class="hljs-literal">true</span>);
  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> start = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
    <span class="hljs-keyword">const</span> duration = <span class="hljs-number">3000</span>; 
    <span class="hljs-comment">// ğŸ’€ æ­»å¾ªç¯ï¼šå½»åº•éœ¸å ä¸»çº¿ç¨‹ 3000ms</span>
    <span class="hljs-keyword">while</span> (<span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>() - start &lt; duration) {
      <span class="hljs-comment">// Blocking main thread</span>
    }
    <span class="hljs-title function_">setIsBlocking</span>(<span class="hljs-literal">false</span>);
  }, <span class="hljs-number">100</span>);
};

</code></pre>
<p>åœ¨è¿™ 3 ç§’å†…ï¼Œæµè§ˆå™¨çš„ä¸»çº¿ç¨‹ï¼ˆMain Threadï¼‰è¢«å®Œå…¨æŒ‚èµ·ã€‚å®ƒæ— æ³•å“åº”ç‚¹å‡»ã€æ— æ³•æ»šåŠ¨é¡µé¢ã€æ— æ³•æ‰§è¡Œå…¶ä»–çš„ JavaScript ä»£ç ã€‚</p>
<p>ä½†åœ¨é¡µé¢ä¸Šï¼Œæˆ‘ä»¬æ”¾ç½®äº†å››ä¸ªæ­£åœ¨è¿è¡Œçš„åŠ¨ç”»æ–¹å—ï¼ˆCase A, B, C, Dï¼‰ã€‚å½“æˆ‘ä»¬ç‚¹å‡»é˜»å¡æŒ‰é’®æ—¶ï¼Œå¥‡æ€ªçš„ç°è±¡å‘ç”Ÿäº†ï¼š</p>
<ol>
<li><strong>æ–¹å— Cï¼ˆJS é©±åŠ¨ï¼‰</strong>ï¼šç«‹å³åœæ­¢ã€‚</li>
<li><strong>æ–¹å— Dï¼ˆMargin åŠ¨ç”»ï¼‰</strong>ï¼šç«‹å³åœæ­¢ã€‚</li>
<li><strong>æ–¹å— Bï¼ˆTransform + Widthï¼‰</strong>ï¼šç«‹å³åœæ­¢ï¼ˆæˆ–å˜å¾—æåº¦å¡é¡¿ï¼‰ã€‚</li>
<li><strong>æ–¹å— Aï¼ˆçº¯ Transformï¼‰</strong>ï¼š<strong>å±…ç„¶è¿˜åœ¨æµç•…æ—‹è½¬ï¼</strong></li>
</ol>
<p>ä¸ºä»€ä¹ˆæ–¹å— A èƒ½çªç ´ JS çš„å°é”ï¼Ÿ</p>
<h2 data-id="heading-1">å¿…é¡»äº†è§£çš„ä¸¤ä½ä¸»è§’ï¼šä¸»çº¿ç¨‹ vs. åˆæˆçº¿ç¨‹</h2>
<p>è¦ç†è§£è¿™ä¸ªç°è±¡ï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“æµè§ˆå™¨å†…éƒ¨ä¹Ÿæ˜¯â€œå¤šçº¿ç¨‹â€å·¥ä½œçš„ã€‚å…¶ä¸­æœ€é‡è¦çš„ä¸¤ä¸ªçº¿ç¨‹æ˜¯ï¼š</p>
<ol>
<li><strong>ä¸»çº¿ç¨‹ (Main Thread)</strong>ï¼š</li>
</ol>
<ul>
<li>å®ƒæ˜¯æœ€å¿™ç¢Œçš„ã€‚è´Ÿè´£è¿è¡Œ JavaScriptã€è®¡ç®— HTML å…ƒç´ çš„æ ·å¼ï¼ˆStyleï¼‰ã€è®¡ç®—é¡µé¢å¸ƒå±€ï¼ˆLayoutï¼‰ã€ç»˜åˆ¶å›¾å±‚å†…å®¹ï¼ˆPaintï¼‰ã€‚</li>
<li><strong>å®ƒæ˜¯â€œå•çº¿ç¨‹â€çš„</strong>ã€‚å¦‚æœä½ å†™äº†ä¸€ä¸ªæ­»å¾ªç¯ï¼Œå®ƒå°±æ²¡ç©ºå»ç®—å¸ƒå±€ï¼Œä¹Ÿæ²¡ç©ºç»˜å›¾ã€‚</li>
</ul>
<ol start="2">
<li><strong>åˆæˆçº¿ç¨‹ (Compositor Thread)</strong>ï¼š</li>
</ol>
<ul>
<li>å®ƒæ˜¯ä¸»çº¿ç¨‹çš„åŠ©æ‰‹ï¼Œé€šå¸¸ç”± GPU ååŠ©ã€‚</li>
<li>å®ƒçš„å·¥ä½œæ˜¯å°†ä¸»çº¿ç¨‹ç”»å¥½çš„å„ä¸ªå›¾å±‚ï¼ˆLayersï¼‰æ¥æ”¶è¿‡æ¥ï¼Œè¿›è¡Œåˆæˆï¼ˆCompositeï¼‰ï¼Œå¹¶æœ€ç»ˆæ˜¾ç¤ºåœ¨å±å¹•ä¸Šã€‚</li>
<li><strong>é‡ç‚¹</strong>ï¼šå®ƒå¯ä»¥ç‹¬ç«‹äºä¸»çº¿ç¨‹å¤„ç†ä¸€äº›ç‰¹å®šçš„è§†è§‰å˜æ¢ï¼Œæ¯”å¦‚<strong>ä½ç§»ï¼ˆTranslateï¼‰ã€æ—‹è½¬ï¼ˆRotateï¼‰ã€ç¼©æ”¾ï¼ˆScaleï¼‰å’Œé€æ˜åº¦ï¼ˆOpacityï¼‰</strong>ã€‚</li>
</ul>
<h2 data-id="heading-2">æ¡ˆä»¶åˆ†æ</h2>
<p>è®©æˆ‘ä»¬ç»“åˆä»£ç é€ä¸€åˆ†æå››ä¸ªæ–¹å—çš„å‘½è¿ã€‚</p>
<h3 data-id="heading-3">å—å®³è€…ä¸€ï¼šCase C (JavaScript é©±åŠ¨)</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// JS é©±åŠ¨çš„åŠ¨ç”»é€»è¾‘</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">animateJS</span> = (<span class="hljs-params">time: <span class="hljs-built_in">number</span></span>) =&gt; {
  <span class="hljs-comment">// ...è®¡ç®—ä½ç½® x ...</span>
  <span class="hljs-keyword">if</span> (jsBoxRef.<span class="hljs-property">current</span>) {
    jsBoxRef.<span class="hljs-property">current</span>.<span class="hljs-property">style</span>.<span class="hljs-property">transform</span> = <span class="hljs-string">`translateX(<span class="hljs-subst">${x}</span>px)`</span>;
  }
  requestRef.<span class="hljs-property">current</span> = <span class="hljs-title function_">requestAnimationFrame</span>(animateJS);
};

</code></pre>
<p><strong>æ­»å› </strong>ï¼šä¾èµ–ä¸»çº¿ç¨‹ã€‚
<code>requestAnimationFrame</code> æ˜¯è¯·æ±‚æµè§ˆå™¨åœ¨ä¸‹ä¸€æ¬¡é‡ç»˜å‰è°ƒç”¨æŒ‡å®šçš„å›è°ƒå‡½æ•°ã€‚è¿™ä¸ªå›è°ƒå‡½æ•°æ˜¯åœ¨<strong>ä¸»çº¿ç¨‹</strong>ä¸Šæ‰§è¡Œçš„ã€‚å½“ä¸»çº¿ç¨‹è¢« <code>while</code> å¾ªç¯å¡æ­»æ—¶ï¼Œ<code>animateJS</code> å‡½æ•°æ ¹æœ¬å¾—ä¸åˆ°æ‰§è¡Œæœºä¼šã€‚æ‰€ä»¥åŠ¨ç”»ç¬é—´å†»ç»“ã€‚</p>
<h3 data-id="heading-4">å—å®³è€…äºŒï¼šCase D (Layout å±æ€§ - Margin)</h3>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* æ”¹å˜ margin-left */</span>
<span class="hljs-keyword">@keyframes</span> pure-margin {
  <span class="hljs-number">0%</span> { <span class="hljs-attribute">margin-left</span>: <span class="hljs-number">0</span>; }
  <span class="hljs-number">50%</span> { <span class="hljs-attribute">margin-left</span>: <span class="hljs-number">150px</span>; } <span class="hljs-comment">/* è§¦å‘ Layout */</span>
  <span class="hljs-number">100%</span> { <span class="hljs-attribute">margin-left</span>: <span class="hljs-number">0</span>; }
}

</code></pre>
<p><strong>æ­»å› </strong>ï¼šè§¦å‘é‡æ’ï¼ˆReflow/Layoutï¼‰ã€‚
<code>margin</code> å±æ€§å†³å®šäº†å…ƒç´ åœ¨æ–‡æ¡£æµä¸­çš„ä½ç½®ã€‚ä¿®æ”¹å®ƒä¼šå½±å“å‘¨å›´å…ƒç´ çš„æ’ç‰ˆã€‚æµè§ˆå™¨å¿…é¡»é‡æ–°è®¡ç®—å¸ƒå±€ï¼ˆLayout é˜¶æ®µï¼‰ï¼Œè¿™ä¸ªè®¡ç®—è¿‡ç¨‹å¿…é¡»åœ¨<strong>ä¸»çº¿ç¨‹</strong>å®Œæˆã€‚ä¸»çº¿ç¨‹å¿™ç€è·‘æ­»å¾ªç¯ï¼Œæ²¡ç©ºç®—å¸ƒå±€ï¼Œæ‰€ä»¥åŠ¨ç”»åœæ­¢ã€‚</p>
<h3 data-id="heading-5">å—å®³è€…ä¸‰ï¼šCase B (æ··åˆå±æ€§ - Transform + Width)</h3>
<pre><code class="hljs language-css" lang="css"><span class="hljs-keyword">@keyframes</span> mixed-transform {
  <span class="hljs-number">0%</span> { <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">rotate</span>(<span class="hljs-number">0deg</span>); <span class="hljs-attribute">width</span>: <span class="hljs-number">48px</span>; }
  <span class="hljs-number">50%</span> { <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">rotate</span>(<span class="hljs-number">180deg</span>); <span class="hljs-attribute">width</span>: <span class="hljs-number">120px</span>; } <span class="hljs-comment">/* Width è§¦å‘ Layout */</span>
  <span class="hljs-number">100%</span> { <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">rotate</span>(<span class="hljs-number">360deg</span>); <span class="hljs-attribute">width</span>: <span class="hljs-number">48px</span>; }
}

</code></pre>
<p><strong>æ­»å› </strong>ï¼šè¢«é˜Ÿå‹æ‹–ç´¯ã€‚
è™½ç„¶å®ƒåŒ…å« <code>transform</code>ï¼ˆç”±åˆæˆçº¿ç¨‹å¤„ç†ï¼‰ï¼Œä½†å®ƒåŒæ—¶ä¹Ÿæ”¹å˜äº† <code>width</code>ã€‚<code>width</code> çš„æ”¹å˜ä¼šè§¦å‘ Layoutã€‚æµè§ˆå™¨é€šå¸¸éœ€è¦æ¯ä¸€å¸§éƒ½ç¡®è®¤ Layout çš„ç»“æœï¼Œæ‰èƒ½è¿›è¡Œåç»­çš„ç»˜åˆ¶å’Œåˆæˆã€‚å› ä¸º <code>width</code> çš„è®¡ç®—è¢«ä¸»çº¿ç¨‹é˜»å¡äº†ï¼Œæ•´ä¸ªåŠ¨ç”»å¸§çš„æäº¤è¢«å»¶åï¼Œå¯¼è‡´å³ä½¿æ˜¯æ—‹è½¬éƒ¨åˆ†ä¹Ÿè¢«è¿«åœæ­¢ã€‚</p>
<h3 data-id="heading-6">å¹¸å­˜è€…ï¼šCase A (çº¯ Transform)</h3>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* ä»…æ”¹å˜ transform */</span>
<span class="hljs-keyword">@keyframes</span> pure-transform {
  <span class="hljs-selector-tag">from</span> { <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">rotate</span>(<span class="hljs-number">0deg</span>); }
  <span class="hljs-selector-tag">to</span> { <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">rotate</span>(<span class="hljs-number">360deg</span>); }
}

</code></pre>
<p><strong>ç”Ÿè¿˜åŸå› </strong>ï¼š<strong>è„±ç¦»ä¸»çº¿ç¨‹ï¼ˆOff Main Threadï¼‰</strong>ã€‚
è¿™æ˜¯æ€§èƒ½ä¼˜åŒ–çš„æ ¸å¿ƒé­”æ³•ã€‚</p>
<ol>
<li>å½“æµè§ˆå™¨åˆ†æè¿™ä¸ª CSS åŠ¨ç”»æ—¶ï¼Œå®ƒå‘ç°è¿™ä¸ªåŠ¨ç”»<strong>åª</strong>æ¶‰åŠ <code>transform</code>ã€‚</li>
<li><code>transform</code> ä¸ä¼šæ”¹å˜å…ƒç´ çš„å¸ƒå±€ï¼ˆLayoutï¼‰ï¼Œä¹Ÿä¸éœ€è¦é‡æ–°ç»˜åˆ¶å†…å®¹ï¼ˆPaintï¼‰ï¼Œå®ƒåªéœ€è¦æŠŠç°æœ‰çš„å›¾å±‚æ‹¿æ¥æ—‹è½¬ä¸€ä¸‹ã€‚</li>
<li>ä¸»çº¿ç¨‹ä¼šå°†è¿™ä¸ªåŠ¨ç”»ä»»åŠ¡åŠå…¶å›¾å±‚ä¿¡æ¯ç›´æ¥<strong>æäº¤ï¼ˆCommitï¼‰ç»™åˆæˆçº¿ç¨‹</strong>ã€‚</li>
<li><strong>åˆæˆçº¿ç¨‹</strong>è¯´ï¼šâ€œæ”¶åˆ°ï¼Œå‰©ä¸‹çš„äº¤ç»™æˆ‘ã€‚â€</li>
</ol>
<p>æ­¤æ—¶ï¼Œæ— è®ºä¸»çº¿ç¨‹æ˜¯åœ¨è·‘æ­»å¾ªç¯ï¼Œè¿˜æ˜¯åœ¨è¿›è¡Œå¤æ‚çš„è®¡ç®—ï¼Œ<strong>åˆæˆçº¿ç¨‹</strong>éƒ½åœ¨ç‹¬ç«‹å·¥ä½œã€‚å®ƒä¸æ–­åœ°æŒ‡ç¤º GPU æ—‹è½¬é‚£ä¸ªå›¾å±‚ï¼Œå¹¶æ›´æ–°å±å¹•ã€‚</p>
<p>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆå³ä¾¿ä½ çš„ JS å¡æ­»äº†ï¼ŒLoading è½¬åœˆåŠ¨ç”»ï¼ˆå¦‚æœå†™å¾—å¯¹ï¼‰ä¾ç„¶åœ¨è½¬ã€‚</p>
<h2 data-id="heading-7">æ€»ç»“ä¸æŠ€æœ¯å¯ç¤º</h2>
<p>é€šè¿‡è¿™ä¸ª Demoï¼Œæˆ‘ä»¬å¯ä»¥å¾—å‡ºæ˜ç¡®çš„æ€§èƒ½ä¼˜åŒ–åŸåˆ™ï¼š</p>
<ol>
<li><strong>é¿å…ä¸»çº¿ç¨‹é˜»å¡</strong>ï¼š</li>
</ol>
<ul>
<li>é•¿è€—æ—¶çš„è®¡ç®—ä»»åŠ¡ï¼ˆå¦‚å¤§æ•°ç»„å¤„ç†ã€å¤æ‚ç®—æ³•ï¼‰ä¸åº”åœ¨ UI æ¸²æŸ“è·¯å¾„ï¼ˆReact Render, Event Handlersï¼‰ä¸­åŒæ­¥æ‰§è¡Œã€‚</li>
<li>è€ƒè™‘ä½¿ç”¨ <code>Web Worker</code> å°†è®¡ç®—ä»»åŠ¡ç§»å‡ºä¸»çº¿ç¨‹ã€‚</li>
<li>åˆ©ç”¨ <code>React Concurrent Mode</code> æˆ– <code>Time Slicing</code> åˆ‡åˆ†ä»»åŠ¡ã€‚</li>
</ul>
<ol start="2">
<li><strong>åŠ¨ç”»æ€§èƒ½é»„é‡‘æ³•åˆ™</strong>ï¼š</li>
</ol>
<ul>
<li>**åšæŒä½¿ç”¨ <code>transform</code> å’Œ <code>opacity**</code>ã€‚åªæœ‰è¿™ä¸¤ä¸ªå±æ€§å¯ä»¥ä¿è¯ 100% åœ¨åˆæˆçº¿ç¨‹è¿è¡Œï¼Œå®Œå…¨ä¸å— JS é˜»å¡å½±å“ã€‚</li>
<li><strong>é¿å…åŠ¨ç”»åŒ–å¸ƒå±€å±æ€§</strong>ï¼ˆå¦‚ <code>width</code>, <code>height</code>, <code>margin</code>, <code>padding</code>, <code>left</code>, <code>top</code>ï¼‰ã€‚è¿™äº›å±æ€§ä¸ä»…å¼€é”€å¤§ï¼ˆè§¦å‘ Layoutï¼‰ï¼Œè€Œä¸”ä¸€æ—¦ä¸»çº¿ç¨‹å¡é¡¿ï¼ŒåŠ¨ç”»å°±ä¼šæ‰å¸§ã€‚</li>
<li><strong>è­¦æƒ•â€œæ··åˆæ±¡æŸ“â€</strong>ï¼šä¸è¦åœ¨ä¸€ä¸ª <code>@keyframes</code> ä¸­åŒæ—¶åŒ…å«åˆæˆå±æ€§ï¼ˆtransformï¼‰å’Œå¸ƒå±€å±æ€§ï¼ˆwidthï¼‰ï¼Œå¦åˆ™é«˜æ€§èƒ½çš„å±æ€§ä¹Ÿä¼šè¢«æ‹–ç´¯ã€‚</li>
</ul>
<h2 data-id="heading-8">ä¸‹ä¸€æ­¥è¡ŒåŠ¨</h2>
<p>æ£€æŸ¥ä½ é¡¹ç›®ä¸­çš„ Loading ç»„ä»¶æˆ–è¿‡æ¸¡åŠ¨ç”»ã€‚ç¡®ä¿å®ƒä»¬æ˜¯åŸºäº CSS <code>transform</code> å®ç°çš„ï¼Œè€Œä¸æ˜¯ JavaScript æˆ– <code>margin</code>ã€‚è¿™æ ·ï¼Œå³ä½¿ä½ çš„åç«¯æ¥å£è¿”å›æ…¢ï¼Œæˆ–è€…å‰ç«¯æ•°æ®å¤„ç†å¡é¡¿ï¼Œç”¨æˆ·ä¾ç„¶èƒ½çœ‹åˆ°ä¸€ä¸ªä¸èˆ¬é¡ºæ»‘çš„åŠ è½½æŒ‡ç¤ºå™¨ï¼Œä»è€Œå‡å°‘â€œåº”ç”¨å·²å´©æºƒâ€çš„é”™è§‰ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Monkey-AIï¼šåŸºäºç«¯ä¾§ AI çš„ Android è‡ªåŠ¨åŒ–æµ‹è¯• Agent]]></title>    <link>https://juejin.cn/post/7602559134575099940</link>    <guid>https://juejin.cn/post/7602559134575099940</guid>    <pubDate>2026-02-04T03:48:53.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602559134575099940" data-draft-id="7602512064977027135" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Monkey-AIï¼šåŸºäºç«¯ä¾§ AI çš„ Android è‡ªåŠ¨åŒ–æµ‹è¯• Agent"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,æœºå™¨å­¦ä¹ ,Android"/> <meta itemprop="datePublished" content="2026-02-04T03:48:53.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æœ±æ¶›çš„è‡ªä¹ å®¤"/> <meta itemprop="url" content="https://juejin.cn/user/2119514149637032"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Monkey-AIï¼šåŸºäºç«¯ä¾§ AI çš„ Android è‡ªåŠ¨åŒ–æµ‹è¯• Agent
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2119514149637032/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æœ±æ¶›çš„è‡ªä¹ å®¤
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T03:48:53.000Z" title="Wed Feb 04 2026 03:48:53 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨è¿™ä¸ª AI æŠ€æœ¯<strong>ç‹‚é£™</strong>çš„æ—¶ä»£ï¼Œä» ChatGPT åˆ° Geminiã€Qwenã€Deepseekï¼Œæ¯éš”å‡ å¤©å°±ä¼šæœ‰ä¸€ä¸ªå¤§æ–°é—»ã€‚äººå·¥æ™ºèƒ½æ­£åœ¨é‡å¡‘æ¯ä¸€ä¸ªè¡Œä¸šã€‚</p>
<p>å¯¹äº Android å¼€å‘è€…è€Œè¨€ï¼Œè‡ªåŠ¨åŒ–æµ‹è¯•ï¼Œä¸€ç›´æ˜¯ä¸ªå¾ˆé¸¡è‚‹çš„ä»»åŠ¡ï¼šå†™å§ï¼Œå«Œéº»çƒ¦ï¼Œè€Œä¸”ç»å¸¸è¦è·Ÿéšè¿­ä»£ç»´æŠ¤ã€‚ä¸å†™å§ï¼Ÿå¥½åƒåˆæ˜¾å¾—ä¸ä¸“ä¸šï¼Ÿå®¹æ˜“å¿ƒæ…Œï¼Ÿ</p>
<p>ä¹Ÿè®¸ä½ å¬è¯´è¿‡ Espresso æˆ– Appium èƒ½åšè‡ªåŠ¨åŒ–æµ‹è¯•ï¼Œä½†ä»ç„¶é€ƒä¸äº†å†™æµ‹è¯•è„šæœ¬çš„å‘½è¿ã€‚è¿™æ ·çš„é—®é¢˜æœ‰å¾ˆå¤šè§£æ³•ï¼Œæ¯”å¦‚ï¼Œè®© AI æ¥å†™æµ‹è¯•ã€‚</p>
<p>è€Œæˆ‘æƒ³åˆ°äº†å¦ä¸€ä¸ªæ€è·¯ï¼Œé‚£å°±æ˜¯ï¼š<strong>è®© AI å¸®æˆ‘åšæµ‹è¯•</strong>ï¼</p>
<p>æœ‰äº†è¿™ä¸ªæƒ³æ³•ï¼Œæˆ‘å°±å¼€å§‹å†™ä»£ç äº†ã€‚å®é™…æ“ä½œä¸‹æ¥ï¼Œé‡åˆ°äº†ä¸å°‘é—®é¢˜ï¼Œæˆ‘æ…¢æ…¢é€šè¿‡åšå®¢æ¥è®°å½•ã€‚</p>
<p>é¦–å…ˆï¼Œäº‘ç«¯ AI API è‚¯å®šæ˜¯ä¸èƒ½ç”¨çš„ï¼Œå› ä¸ºä¼šç‰¹åˆ«çƒ§é’±ã€‚æœ€å¥½èƒ½è®© AI è·‘åœ¨æˆ‘ä»¬è‡ªå·±çš„ç”µè„‘ä¸Šï¼Œè¿™æ ·ä¸€æ¥è‡ªåŠ¨åŒ–æµ‹è¯•çš„æˆæœ¬å°±å¯ä»¥<code>å¿½ç•¥ä¸è®¡</code>äº†ã€‚å¹¸è¿çš„æ˜¯ï¼Œéšç€ Gemmaã€Qwen ç­‰å¼€æºæ¨¡å‹çš„æŒç»­ä¼˜åŒ–ï¼Œ<code>ç«¯ä¾§æ¨¡å‹çš„æ™ºèƒ½ç¨‹åº¦å·²ç»è¶³ä»¥èƒœä»»è¿™äº›ç®€å•çš„é€»è¾‘ä»»åŠ¡ã€‚</code></p>
<p>è§£å†³äº†ç«¯ä¾§ AI è¿è¡Œçš„é—®é¢˜åï¼Œå‰©ä¸‹çš„ OCRã€OpenCV ç›¸å…³çš„æŠ€æœ¯å°±ä¸æ˜¯é—®é¢˜äº†ã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œè¯·å¤§å®¶çœ‹çœ‹æˆ‘é—²æš‡æ—¶é—´å†™çš„è¿™ä¸ªé¡¹ç›®ï¼šåŸºäºç«¯ä¾§ AI çš„ Android è‡ªåŠ¨åŒ–æµ‹è¯• Agent é¡¹ç›®â€”â€”<strong>Monkey-AI</strong>ã€‚</p>
<h2 data-id="heading-0">ä»€ä¹ˆæ˜¯ Monkey-AIï¼Ÿ</h2>
<p>ä½œä¸º Android ç¨‹åºå‘˜ï¼ŒMonkey å¤šå¤šå°‘å°‘éƒ½åº”è¯¥å¬è¯´è¿‡å§ï¼Ÿ<code>Monkey-AI</code> é¡¾åæ€ä¹‰ï¼Œå°±æ˜¯ä¸€ä¸ªè¿è¡Œåœ¨æ¡Œé¢ç”µè„‘ï¼ˆ MacOS/Windowsï¼‰çš„ Android è‡ªåŠ¨åŒ–æµ‹è¯• Agentã€‚å®ƒä¸ä¾èµ–æ˜‚è´µçš„äº‘ç«¯ APIï¼Œå®Œå…¨åŸºäºæœ¬åœ°è¿è¡Œçš„å¼€æºå¤§æ¨¡å‹æ¥é©±åŠ¨ã€‚</p>
<p>å®ƒå°±åƒä¸€åª<code>èªæ˜</code>ä¸”<code>ä¸çŸ¥ç–²å€¦</code>çš„â€œçŒ´å­â€ï¼Œä½†è¿™åªçŒ´å­è£…ä¸Šäº†â€œå¤§è„‘â€å’Œâ€œçœ¼ç›â€ï¼š</p>
<ul>
<li><strong>å¤§è„‘</strong>ï¼šç”± Gemma æˆ– Qwen æ¨¡å‹é©±åŠ¨ï¼Œè´Ÿè´£ç†è§£æŒ‡ä»¤å’Œè§„åˆ’åŠ¨ä½œã€‚</li>
<li><strong>çœ¼ç›</strong>ï¼šç»“åˆäº† OCR å’Œå›¾æ ‡æ£€æµ‹æŠ€æœ¯ï¼Œèƒ½å¤Ÿç²¾å‡†è¯†åˆ«å±å¹•ä¸Šçš„æ–‡å­—å’Œå›¾æ ‡ã€‚</li>
<li><strong>æ‰‹è„š</strong>ï¼šé€šè¿‡ ADB æŒ‡ä»¤æ‰§è¡Œç‚¹å‡»ã€æ»‘åŠ¨ã€è¾“å…¥ç­‰æ“ä½œã€‚</li>
</ul>
<h2 data-id="heading-1">æ ¸å¿ƒåŠ¨åŠ›ï¼šGemma ä¸ Qwen å®¶æ—</h2>
<p>æœ¬é¡¹ç›®ç›®å‰æ”¯æŒä¸¤å¤§ä¸»æµå¼€æºæ¨¡å‹å®¶æ—ï¼Œå®ƒä»¬å„æœ‰æ‰€é•¿ï¼š</p>
<h3 data-id="heading-2">1. Gemma (Google)</h3>
<p>Gemma æ˜¯ Google åŸºäº Gemini æŠ€æœ¯æ„å»ºçš„è½»é‡çº§å¼€æ”¾æ¨¡å‹ã€‚</p>
<ul>
<li><strong>ç‰¹ç‚¹</strong>ï¼šä½“ç§¯å°ï¼ˆå¦‚ 2B/7B ç‰ˆæœ¬ï¼‰ï¼ŒæŒ‡ä»¤éµå¾ªèƒ½åŠ›å¼ºï¼Œé€»è¾‘æ¨ç†å‡ºè‰²ã€‚å°¤å…¶æ˜¯ 270M å‚æ•°è§„æ¨¡çš„ FunctionGemmaï¼Œåœ¨ Function Calling æ–¹é¢çš„è¡¨ç°éå¸¸å‡ºè‰²ï¼Œä½“ç§¯ä»…å‡ ç™¾å…†ã€‚</li>
<li><strong>åœ¨æœ¬é¡¹ç›®ä¸­çš„åº”ç”¨</strong>ï¼šGemma ä¸»è¦ä½œä¸º <strong>Text Brainï¼ˆæ–‡æœ¬å¤§è„‘ï¼‰</strong>ã€‚æˆ‘ä»¬å°†å±å¹•ä¸Šçš„ UI å…ƒç´ è½¬åŒ–ä¸ºç»“æ„åŒ–çš„æ–‡æœ¬æè¿°å–‚ç»™ Gemmaï¼Œå®ƒèƒ½å¿«é€Ÿåˆ†æå‡ºâ€œè¦ç‚¹å‡»å“ªä¸ªæŒ‰é’®â€æˆ–â€œè¦è¾“å…¥ä»€ä¹ˆå†…å®¹â€ã€‚</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/abe8459a1c6745529e686bec604583c3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pyx5rab55qE6Ieq5Lmg5a6k:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770781733&amp;x-signature=FZZc1mSeX8xu0mgRSoB1DSoAa%2FY%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-3">2. Qwen-VL (é˜¿é‡Œ)</h3>
<p>Qwen (é€šä¹‰åƒé—®) å®¶æ—çš„ Vision-Language (VL) ç‰ˆæœ¬ï¼Œæ‹¥æœ‰å¼ºå¤§çš„è§†è§‰ç†è§£èƒ½åŠ›ã€‚</p>
<ul>
<li><strong>ç‰¹ç‚¹</strong>ï¼šä¸ä»…èƒ½â€œè¯»â€å­—ï¼Œè¿˜èƒ½ç›´æ¥â€œçœ‹â€å›¾ã€‚å®ƒèƒ½ç†è§£å±å¹•æˆªå›¾ä¸­çš„å¤æ‚å¸ƒå±€å’Œå›¾æ ‡å«ä¹‰ã€‚</li>
<li><strong>åœ¨æœ¬é¡¹ç›®ä¸­çš„åº”ç”¨</strong>ï¼šä½œä¸º <strong>Vision Brainï¼ˆè§†è§‰å¤§è„‘ï¼‰</strong>ã€‚ç›´æ¥å°†æ‰‹æœºæˆªå›¾å–‚ç»™æ¨¡å‹ï¼Œè®©å®ƒåƒäººç±»ä¸€æ ·åŸºäºè§†è§‰ä¿¡æ¯é€šè¿‡åæ ‡è¿›è¡Œå†³ç­–ï¼Œé€šè¿‡è§†è§‰ç†è§£èƒ½åŠ›å¼¥è¡¥çº¯æ–‡æœ¬æè¿°çš„ä¸è¶³ã€‚</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b277be68dc4e4906b5ce18c7d11171a7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pyx5rab55qE6Ieq5Lmg5a6k:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770781733&amp;x-signature=cPYxDpomoZVwHBad98QYW725m7s%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-4">æ¶æ„æ­ç§˜ï¼šMonkey-AI æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ</h2>
<p><code>Monkey-AI</code> çš„å®ç°é€»è¾‘å¹¶ä¸å¤æ‚ï¼Œæ ¸å¿ƒæ˜¯ä¸€ä¸ª<strong>æ„ŸçŸ¥-å†³ç­–-æ‰§è¡Œ</strong>çš„é—­ç¯ç³»ç»Ÿã€‚ä¸‹é¢æ˜¯å®ƒçš„æ¶æ„æµç¨‹å›¾ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9d28b52b453748d3ad7dc65fc9fecc27~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pyx5rab55qE6Ieq5Lmg5a6k:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770781733&amp;x-signature=hbYhTHQB%2Btmqh0gbucAybFwJ95Y%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-5">1. æ„ŸçŸ¥å±‚ (Perception Engine)</h3>
<p>è¿™æ˜¯ Agent çš„â€œçœ¼ç›â€ã€‚å•çº¯çš„å¤§æ¨¡å‹è™½ç„¶å¼ºå¤§ï¼Œä½†ç›´æ¥å¤„ç†é«˜åˆ†è¾¨ç‡æˆªå›¾é€Ÿåº¦è¾ƒæ…¢ä¸”ç²¾åº¦æœ‰é™ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¼•å…¥äº†ä¼ ç»Ÿçš„è®¡ç®—æœºè§†è§‰æŠ€æœ¯ä½œä¸ºè¾…åŠ©ï¼š</p>
<ul>
<li><strong>OCR</strong>ï¼šå¿«é€Ÿæå–å±å¹•ä¸Šçš„æ‰€æœ‰æ–‡å­—ä¿¡æ¯ã€‚</li>
<li><strong>Icon æ£€æµ‹ (YOLO)</strong>ï¼šä¸“é—¨è®­ç»ƒçš„æ¨¡å‹ï¼Œç”¨äºè¯†åˆ«â€œè¿”å›â€ã€â€œè®¾ç½®â€ã€â€œWiFiâ€ç­‰å¸¸è§å›¾æ ‡ã€‚</li>
<li><strong>èåˆ (Fusion)</strong>ï¼šå°†æ–‡å­—å’Œå›¾æ ‡ä½ç½®åˆå¹¶ï¼Œç”Ÿæˆä¸€ä»½åŒ…å«åæ ‡å’Œç±»å‹çš„ <code>ClickableElement</code> åˆ—è¡¨ã€‚</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/aec0f9d025f9406b962cfff413972604~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pyx5rab55qE6Ieq5Lmg5a6k:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770781733&amp;x-signature=68hkRcK0IPpKvJCEku1L%2F1w4hdg%3D" alt="image.png" loading="lazy"/></p>
<p>å…¶å®ï¼ŒOCR å’Œ YOLO é¢„å¤„ç†è¿™ä¸ªæ­¥éª¤ï¼Œå¯¹äºé¡¶å°–çš„ LLM æ˜¯å¯ä»¥çœç•¥çš„ï¼Œåƒ Gemini 3ã€GPT5ï¼Œå®ƒä»¬éƒ½èƒ½å¤Ÿç›´æ¥é€šè¿‡æˆªå›¾ç»™å‡ºå…·ä½“è¡Œä¸ºçš„åæ ‡ã€‚ä½†æˆ‘ä»¬è¿™ä¸æ˜¯ä¸ºäº†çœé’±ï¼Œæƒ³ç”¨è‡ªå·±çš„ç”µè„‘æ¥è·‘å˜›ï¼Œæ‰€ä»¥ï¼Œè¿™ä¸ªé¢„å¤„ç†æ­¥éª¤å°±æ˜¾å¾—å¾ˆé‡è¦äº†ã€‚</p>
<p>æå‰æ ‡è®°å¥½æ‰€æœ‰çš„æ–‡æœ¬ã€iconï¼Œç»™å®ƒä»¬ç¼–å·ï¼ŒLLM åœ¨å†³ç­–çš„æ—¶å€™èƒ½å¤Ÿè·³è¿‡åæ ‡è®¡ç®—ï¼Œç›´æ¥æ¨ç†ä¸‹ä¸€æ­¥å…·ä½“çš„è¡Œä¸ºã€‚è¿™ä¸ªæ­¥éª¤å¯ä»¥å¤§å¹…æå‡å°æ¨¡å‹çš„è¡Œä¸ºå‡†ç¡®åº¦ã€‚</p>
<h3 data-id="heading-6">2. å†³ç­–å±‚ (Brain)</h3>
<p>è¿™æ˜¯ Agent çš„â€œå¤§è„‘â€ã€‚</p>
<ul>
<li><strong>Text Brain</strong>ï¼šæ¥æ”¶ç”¨æˆ·ç›®æ ‡ï¼ˆGoalï¼‰å’Œæ„ŸçŸ¥å±‚æä¾›çš„ UI å…ƒç´ åˆ—è¡¨ã€‚å®ƒä¸éœ€è¦çœ‹å›¾ï¼Œåªéœ€åˆ†ææ–‡æœ¬ï¼šâ€œç›®æ ‡æ˜¯æ‰“å¼€ WiFiï¼Œç°åœ¨å±å¹•ä¸Šæœ‰â€˜è®¾ç½®â€™å›¾æ ‡ï¼Œæ‰€ä»¥æˆ‘åº”è¯¥ç‚¹å‡»â€˜è®¾ç½®â€™ã€‚â€</li>
<li><strong>Vision Brain</strong>ï¼šåœ¨æ–‡æœ¬ä¿¡æ¯ä¸è¶³æ—¶ï¼Œç›´æ¥è§‚å¯Ÿæˆªå›¾ã€‚ä¾‹å¦‚ï¼Œæœ‰äº›æŒ‰é’®åªæœ‰å¤æ‚çš„å›¾å½¢æ²¡æœ‰æ–‡å­—ï¼Œè§†è§‰æ¨¡å‹èƒ½æ›´å¥½åœ°ç†è§£å…¶å«ä¹‰ã€‚</li>
</ul>
<pre><code class="hljs language-python" lang="python">// Brain å±‚æŠ½è±¡
<span class="hljs-meta">@dataclass(<span class="hljs-params">frozen=<span class="hljs-literal">True</span></span>)</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ScreenState</span>:
    elements: <span class="hljs-built_in">list</span>[ClickableElement]
    screen_size: <span class="hljs-built_in">tuple</span>[<span class="hljs-built_in">int</span>, <span class="hljs-built_in">int</span>]
    package: <span class="hljs-built_in">str</span> | <span class="hljs-literal">None</span>
    image_bgr: <span class="hljs-string">"np.ndarray | None"</span> = <span class="hljs-literal">None</span>


<span class="hljs-keyword">class</span> <span class="hljs-title class_">Brain</span>(<span class="hljs-title class_ inherited__">ABC</span>):
<span class="hljs-meta">    @abstractmethod</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">next_action</span>(<span class="hljs-params">self, screen: ScreenState</span>) -&gt; Action:
        <span class="hljs-keyword">raise</span> NotImplementedError

</code></pre>
<p>å¯¹äºç«¯ä¾§çš„ AI æ¨¡å‹ï¼Œæ˜¯å¦å¼€å¯ Thinkï¼Œæ•ˆæœå·®å¼‚ä¼šå¾ˆå¤§ã€‚</p>
<pre><code class="hljs language-scss" lang="scss">ç”¨æˆ·ç°åœ¨éœ€è¦å®Œæˆçš„ä»»åŠ¡æ˜¯ï¼šæ‰“å¼€è®¾ç½®é¡µé¢ï¼Œè¿›å…¥é€šçŸ¥æ ï¼Œå»åº”ç”¨è®¾ç½®é‡Œï¼Œå…³é—­Chromeçš„é€šçŸ¥æƒé™ã€‚é¦–å…ˆçœ‹å†å²åŠ¨ä½œå·²ç»ç‚¹å‡»äº†è®¾ç½®å›¾æ ‡ï¼Œæ‰€ä»¥å½“å‰åœ¨è®¾ç½®ä¸»ç•Œé¢ã€‚

æ¥ä¸‹æ¥è¦è¿›å…¥é€šçŸ¥ç›¸å…³éƒ¨åˆ†ã€‚æ ¹æ®å…ƒç´ åˆ—è¡¨ï¼Œ<span class="hljs-number">27</span>å¯¹åº”çš„æ˜¯â€œé€šçŸ¥â€ï¼Œæ–‡æœ¬æ˜¯â€œé€šçŸ¥â€ï¼Œä½ç½®åœ¨å±å¹•ä¸­ä¸‹éƒ¨ã€‚æ‰€ä»¥éœ€è¦ç‚¹å‡»â€œé€šçŸ¥â€é€‰é¡¹æ¥è¿›å…¥é€šçŸ¥è®¾ç½®é¡µé¢ã€‚

æ£€æŸ¥å¯ç‚¹å‡»å…ƒç´ åˆ—è¡¨ï¼Œç¬¬<span class="hljs-number">27</span>ä¸ªå…ƒç´ æ˜¯text é€šçŸ¥ (<span class="hljs-number">226</span>, <span class="hljs-number">1955</span>, <span class="hljs-number">414</span>, <span class="hljs-number">2029</span>)ï¼Œå¯¹åº”çš„å°±æ˜¯é€šçŸ¥å…¥å£ã€‚å› æ­¤ä¸‹ä¸€æ­¥æ“ä½œåº”è¯¥æ˜¯ç‚¹å‡»è¿™ä¸ªâ€œé€šçŸ¥â€é€‰é¡¹ã€‚
&lt;/think&gt;

</code></pre>
<h3 data-id="heading-7">3. æ‰§è¡Œå±‚ (Action Executor)</h3>
<p>è¿™æ˜¯ Agent çš„â€œæ‰‹â€ã€‚
å¤§è„‘è¾“å‡ºçš„å†³ç­–é€šå¸¸æ˜¯æŠ½è±¡çš„ï¼ˆä¾‹å¦‚ï¼šâ€œç‚¹å‡» ID ä¸º 5 çš„å…ƒç´ â€ï¼‰ã€‚æ‰§è¡Œå±‚è´Ÿè´£å°†è¿™äº›æŒ‡ä»¤ç¿»è¯‘æˆå…·ä½“çš„ Android åæ ‡ï¼Œé€šè¿‡ ADB å‘é€ <code>input tap</code> æˆ– <code>input swipe</code> å‘½ä»¤ï¼Œç”šè‡³å¤„ç†åæ ‡æ˜ å°„ï¼ˆä»æˆªå›¾åæ ‡ç³»åˆ°è®¾å¤‡åæ ‡ç³»ï¼‰ã€‚</p>
<p>è¿™ä¸ªéƒ¨åˆ†åè€Œæ˜¯æœ€ç®€å•çš„ï¼Œä½œä¸º Android ç¨‹åºå‘˜ï¼Œè°è¿˜ä¸ä¼šç‚¹ adb å‘½ä»¤äº†ï¼Ÿ</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">AndroidDevice</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, device: u2.Device</span>) -&gt; <span class="hljs-literal">None</span>:
        self._device = device

<span class="hljs-meta">    @classmethod</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">connect</span>(<span class="hljs-params">cls, serial: <span class="hljs-built_in">str</span> | <span class="hljs-literal">None</span> = <span class="hljs-literal">None</span></span>) -&gt; <span class="hljs-string">"AndroidDevice"</span>:
        device = u2.connect(serial) <span class="hljs-keyword">if</span> serial <span class="hljs-keyword">else</span> u2.connect()
        <span class="hljs-keyword">return</span> cls(device)

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">info</span>(<span class="hljs-params">self</span>) -&gt; DeviceInfo:
        info = self._device.info
        width = <span class="hljs-built_in">int</span>(info.get(<span class="hljs-string">"displayWidth"</span>) <span class="hljs-keyword">or</span> <span class="hljs-number">0</span>)
        height = <span class="hljs-built_in">int</span>(info.get(<span class="hljs-string">"displayHeight"</span>) <span class="hljs-keyword">or</span> <span class="hljs-number">0</span>)
        serial = info.get(<span class="hljs-string">"serial"</span>)
        <span class="hljs-keyword">return</span> DeviceInfo(width=width, height=height, serial=serial)

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">screenshot_bgr</span>(<span class="hljs-params">self</span>) -&gt; np.ndarray:
        image = self._device.screenshot(<span class="hljs-built_in">format</span>=<span class="hljs-string">"opencv"</span>)
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> <span class="hljs-built_in">isinstance</span>(image, np.ndarray):
            <span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">"screenshot not returned as ndarray"</span>)
        <span class="hljs-keyword">return</span> image

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">click</span>(<span class="hljs-params">self, x: <span class="hljs-built_in">int</span>, y: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-literal">None</span>:
        self._device.click(x, y)

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">swipe</span>(<span class="hljs-params">self, start: <span class="hljs-built_in">tuple</span>[<span class="hljs-built_in">int</span>, <span class="hljs-built_in">int</span>], end: <span class="hljs-built_in">tuple</span>[<span class="hljs-built_in">int</span>, <span class="hljs-built_in">int</span>], duration: <span class="hljs-built_in">float</span> | <span class="hljs-literal">None</span> = <span class="hljs-literal">None</span></span>) -&gt; <span class="hljs-literal">None</span>:
        <span class="hljs-keyword">if</span> duration <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>:
            self._device.swipe(start[<span class="hljs-number">0</span>], start[<span class="hljs-number">1</span>], end[<span class="hljs-number">0</span>], end[<span class="hljs-number">1</span>])
        <span class="hljs-keyword">else</span>:
            self._device.swipe(start[<span class="hljs-number">0</span>], start[<span class="hljs-number">1</span>], end[<span class="hljs-number">0</span>], end[<span class="hljs-number">1</span>], duration)

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">press</span>(<span class="hljs-params">self, key: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-literal">None</span>:
        self._device.press(key)

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">input_text</span>(<span class="hljs-params">self, text: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-literal">None</span>:
        payload = text.replace(<span class="hljs-string">" "</span>, <span class="hljs-string">"%s"</span>)
        self._device.adb_shell(<span class="hljs-string">"input"</span>, <span class="hljs-string">"text"</span>, payload)

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">app_start</span>(<span class="hljs-params">self, package: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-literal">None</span>:
        self._device.app_start(package, wait=<span class="hljs-literal">True</span>)

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">app_current</span>(<span class="hljs-params">self</span>) -&gt; <span class="hljs-built_in">dict</span>[<span class="hljs-built_in">str</span>, <span class="hljs-type">Any</span>]:
        <span class="hljs-keyword">return</span> self._device.app_current()

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">window_size</span>(<span class="hljs-params">self</span>) -&gt; <span class="hljs-built_in">tuple</span>[<span class="hljs-built_in">int</span>, <span class="hljs-built_in">int</span>]:
        size = self._device.window_size()
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">int</span>(size[<span class="hljs-number">0</span>]), <span class="hljs-built_in">int</span>(size[<span class="hljs-number">1</span>])
</code></pre>
<h2 data-id="heading-8">æ€»ç»“ä¸å±•æœ›</h2>
<p><code>Monkey-AI</code> ç›®å‰è¿˜æ˜¯ä¸€ä¸ª <strong>Lite</strong> ç‰ˆæœ¬ï¼Œä½†å®ƒå±•ç¤ºäº†<strong>ç«¯ä¾§ AI + è‡ªåŠ¨åŒ–æµ‹è¯•</strong>çš„å·¨å¤§æ½œåŠ›ï¼š</p>
<ol>
<li><strong>éšç§å®‰å…¨</strong>ï¼šæ•°æ®ä¸å‡ºæœ¬åœ°ï¼Œé€‚åˆä¼ä¸šå†…éƒ¨æ•æ„Ÿåº”ç”¨çš„æµ‹è¯•ã€‚</li>
<li><strong>ä½æˆæœ¬</strong>ï¼šæ— éœ€æ”¯ä»˜æ˜‚è´µçš„ Token è´¹ç”¨ï¼Œä¸”æ¶ˆè´¹çº§çš„æ˜¾å¡æˆ–è€… 16G RAM çš„ Mac Mini å³å¯è¿è¡Œã€‚</li>
<li><strong>æ— é™å¯èƒ½</strong>ï¼šéšç€æ¨¡å‹èƒ½åŠ›çš„æå‡ï¼Œæœªæ¥çš„ Agent ä¸ä»…èƒ½è·‘å†’çƒŸæµ‹è¯•ï¼Œç”šè‡³èƒ½è¿›è¡Œæ¢ç´¢æ€§æµ‹è¯•ï¼Œå‘ç°äººç±»éš¾ä»¥å¯Ÿè§‰çš„ Bugã€‚</li>
</ol>
<p>è™½ç„¶ç°é˜¶æ®µè·‘åœ¨PCç”µè„‘ä¸Šçš„ Monkey-AI å¶å°”è¿˜ä¼šâ€œçŠ¯å‚»â€ï¼Œæ“ä½œé€Ÿåº¦ä¹Ÿæ¯”ä¸ä¸Šæ‰‹å†™è„šæœ¬ï¼Œä½†å®ƒä»£è¡¨äº†æœªæ¥çš„æ–¹å‘ã€‚Android å¼€å‘è€…ä»¬ï¼Œæ˜¯æ—¶å€™æ‹¥æŠ± AIï¼Œè®©æˆ‘ä»¬çš„æµ‹è¯•å·¥ä½œå˜å¾—æ›´é…·ã€æ›´æ™ºèƒ½äº†ï¼</p>
<p>ç›®å‰ Monkey-AI è¿˜åœ¨å†…éƒ¨æµ‹è¯•é˜¶æ®µï¼Œæ¬¢è¿æ„Ÿå…´è¶£çš„æœ‹å‹å…³æ³¨æˆ‘çš„å…¬ä¼—å·ï¼š<code>æœ±æ¶›çš„è‡ªä¹ å®¤</code>ï¼Œå‚ä¸æµ‹è¯•ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è¸©å‘è®°å½•ï¼šiOS Safari è½¯é”®ç›˜ä¸‹çš„"å¹½çµå¼¹çª—"é—®é¢˜]]></title>    <link>https://juejin.cn/post/7602466689713340431</link>    <guid>https://juejin.cn/post/7602466689713340431</guid>    <pubDate>2026-02-04T04:59:03.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602466689713340431" data-draft-id="7602488187408580660" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è¸©å‘è®°å½•ï¼šiOS Safari è½¯é”®ç›˜ä¸‹çš„&quot;å¹½çµå¼¹çª—&quot;é—®é¢˜"/> <meta itemprop="keywords" content="å‰ç«¯,é¢è¯•"/> <meta itemprop="datePublished" content="2026-02-04T04:59:03.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="RemHusband"/> <meta itemprop="url" content="https://juejin.cn/user/1425415102792237"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è¸©å‘è®°å½•ï¼šiOS Safari è½¯é”®ç›˜ä¸‹çš„"å¹½çµå¼¹çª—"é—®é¢˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1425415102792237/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    RemHusband
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T04:59:03.000Z" title="Wed Feb 04 2026 04:59:03 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#2b2b2b;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(159,219,252,.15) 3%,transparent 0),linear-gradient(1turn,rgba(159,219,252,.15) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin-top:35px;margin-bottom:10px;color:#4dd0e1}.markdown-body h1{font-size:30px;text-align:center;position:relative;width:max-content;margin:0 auto}.markdown-body h1:before{position:absolute;content:"";z-index:-1;top:-20px;height:100%;width:100px;left:0;right:0;margin:0 auto;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADsAAAA6CAYAAAAOeSEWAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAABkLSURBVGhDtZoHnJ1llcbP3Om9ZiYzmfSQhCQQIbRQVQKI9CYC68qKriJK0UXcZRcINqStIoiIqKCi1NACQihBWiCkkJ5MJlMyvd7p7d759v989/sy34yTbIj48Atz71ff855znvOc971xDrB/EtoGI7a9Z8Aq+wZML0mNj7dE95NZ1OKsj1dHo1GbnJpss9OTbWJyonvun4VP1Njuoagtb+m0it4By0iIt8LEeMvkr8XFWcfgkA1gYDLf47i2PzpsyU7UspKSLDoctagTZ7Vc08MzClMS7awJ2ZaflBB78CeET8TYla1dtrKt2w5KS7YCDGzEoz2RqKUmhGw6x2bhuXyOp2BoRXef1Q1E7Lj8TIsMD1sbxu1kcnYSAX1810RMTUmyMB7f2j1gC7NS7byinNiL/kH8Q8a+2NRh77b32El56VaPAe0YeGR2mh2bm+FdMRqP1rbZe+3dFsHT35qcb/Oz0rwzo7Gxs9feYPLS4kM2h8lawee5hPmlJXneFQeGAzJ2F564v7rFzi7Msu3d/Xgjzq5g8ArX8VCNN2vJ28daey0zZJabmGCLslP5HOf+Oygr3UzDGOf+JxrauXfQjslJt+dbuuyMgiwmk+sPAB/b2Lt2NdoMZnuY21qHIvbvUyZ4Z0ZQiXGrWjvsmPxsK4R0nmHA8ZCTQvxVQn5eRipklIBtcVbV1WtHYsjati47ZWKuTUpP9Z4yGk/xDBGe3v1mW4/dOrvYO7P/2G9jRSjf31FnXyaUXiB8r51WaJkM3kcfOSa2FR6qarIenooTLQHPLcC4mYThyw1tVpKWYlVERlZ8nC3Oz3Jzdn1nn5uvQ8OOHYvhR/CvsqffJbkCkZTvcYZ6Z0WTfTovw5Y1dtjXp+TbFPhgf7FfxpYxuMfr2uwo8rEtMmwXF+d6Z8wGmIR2PLyjo8cqOFffP2SLGexJEJCP9R29thkPXlpa4A5Y3w/jmuVNYYwO2QkY7WMtz3mVcE1hkualJdmSolzX8GnpKd4VZq80d1o7zN0RdWxGaqItgbn3B/+vsasgh/UMNBOvzYMZDxtDKp289KGaVguFQvb1yQWWwuB97GaSXqUUnVaYbSUwrDCEBz/C2CM8EhNrP13fbkeSh3OJgCAe2N1CWXKsGOc6TOr5U4q8MwYhDtkTda02MyPN+nnGBQEH7A37NHYz5KOZVv08qyjbSseEzKauPnsMj98wc6Ibcj5UUv7M8QWZTE52jEwGOVaD8U1Dw1YNWX0qM8VKyb80L/TrOPYOzH4KBJQTrK8M7+7KZjuM63sHBt17FubGoibCuf+tarWFGUmuwWeT8/vCXo1tZOYeZcazCaez8MwEzzM+HqhqtiJI5twxL1jeGLYk7jmKMF1JOCbg6Qj5nAdRqX7q3BYm8VAmQvW1lfcMc58IT95uIA3q+gftrDHPXUXJWkVEHJme5Bp5UmHsvIZ/O3l8ECE/FWcsItX2hr0ae8O2Wjs+J43QTbOZzGYQ/7Wtxq6eXjRK3r0By4YJ6Ty8EiYSJqcm2eGeV4Pox/ANENJR49RiEdfqcLflUJrEBZqgxYHrBjn2ExFURqKdVETN9YirJxKxR2rbrYeQv5ISmB6IsiDGNfZGWPeMgkzr58xnPaJ5p6XDZPKz4T77wayJ7jGhhXLwanOHTWBgq5n5q6YUwNJ7l3kKcRl7OJ7fF56l1GzvHbSD8dghTPi0wIRfv6XafjJ3ssv0PnZQ7nZx/etwzO1zJ3lHR2OETTw8x0tOx1AN3De0D7YV+63oGthjaJQ5Ur7eVVZjcdGInUyuaT73ZWg3efV8fZs7cc2E777Qi5eunVbghvPPymrt/krKGfcLd8ybYjdxrK6333Z09rjHZkNuLYzz0uIc+xWCZzz8nbHbe4dsY1e/XUOY+nimvtUaSazv4jXhaQasSbmYmpuenGwHZ8TKggSEQm08rMD7ahBOoExcMqXQegjnZ+CEvaEa1ZQUQkt39dj0zDS7krq+ARmpdws/nlNqD9WFbWN7l5u3wr9MyrcXKUsqWy3jTOaoML4DdaQ83YIoT4VYpEXvYQZLmbX5SLohBrgOj186Kc/iKTUPUhq+Rrm5ekOl3TWv1Mr6hqwbY0VOQXwEo+Moq4Z47q5qsU489G944LyJOW4LOLZOKtT/iI6+nGe/0dhuEd4ltj2NmiuCU4hnk5fHIi7+RK4uTEu0e+s7rAiRcw1CYy3OejvcYz+eXeI9MYY9nu3lYZl0KavJJ7Vjibzgjp319rUZE20j7CkJqFr5JQYgQ39f3eQaKpQk0afy8nl4uBzvjUUTRk7k3iebOm0pabDiyFn2XGu3dRME41CGVeBVqSiVnc6hIUpekp1VjHLDSOEcQlui5W/U8C7IKREjv1Gabw3wRwUTvpv7jybPtzHmIPZ49q6KRjuccqBQVCOtGvqXhrCFUUXJzOYSHt7Kw5Ix9H08dSje1o1JyL73IYXpEMmE5CRbw6wuykx2pR+Pd6/J4JpLiJKV6N9OnrcQNfQ0Zem6qQX2MmFXyWTE+DMO0kGx4e08DEjnXbsYuOq7niHB8jdY/wQ8Srm2XCZZUrOakF1CY5EKX0h93Tu/1J4kRdbDMT8MamgZK9xe3uDcvrPe++Y4f61rcZr7B53rN1c5N2ytcV5rCrvHt3T2Og19g+5nH7dvq3bqunr4NOwgK2MHA1jeEDuG7HNuLmtw7qpocl5t6nCPvdTQ7v4N4u3WTqeyu9cZHIo4f6lqdFoHh7wzMbzDeeGv3Hvzjlrnh2W1zofhHuftxpFn3VFe7zxS0+p0DlKVPbhhvBxhvwiFMgfP+mjHA08gEC4pybeLyK1iZldh8zC5VJQyUl8l59KZ0WJk2xaiYWxNrkXXJhA8r3PvZRur7ZZZRfadaRPsfiTmX9HGajC2tXd6V8dQTMhX0h8rNdJx9Ra8F8SbRNLzhPRnJmTZIUTYueTyWxyr7uv3rjC3OkzE8495oS+4xq6D5WoI0bO5WVCOSerl8rIeBrOI/Hkaw6ME5W1zSuzx2la3CRdWi3zIG+FDBvUp9LMgI/vggUmE7KkT81yGvOOgEYa/aUahhRAF5xLec3OzbF1r2O17BbVxIi7hzJIC64IYhXdJA+nh/5xVbOmE9J0QqjSxWk0pp37M2YEtgjS8GpimACu7xkqxdKJ6fEXyYl2Lre0ZtC8yELVewtWUnbfCPIhrvgDFz8WI5yhJKgcnFMZWEFrwhgzo5uWDDDA1oGSOzcu0xfx7vTlsv6posIMpJ6cGWPiw/BxL4PU7vbrpjgf8bMdu5OYwOdhm83DARUSa0ELknYIeEAaILuWxlhGa0M8+EuJCrpJT+ymENhN60pXBxa3LZ5TsucnlGaCmIEQ4Evru91yuz0xMtKaeXluI5zdh9Mm8vAlBn4aR07X64EH3vEKdXQkZJXPP/JxMvNRpLxEtHZ5RQgmNewnpouvVTpYTHdfOnmy5kFUGnpRTfEhXD9DiBdFFJB0/YWS9aj6pmc89r0BaQmgTRkgI+EsdKsYasJZOBF+QqTH474NK7LbyBvf7W+RgOxNyxfQY2/2hrp2+NkroxrzrQ55fSZkpJIa28znCgF6rb7H1hOSslATyvNflAh9pvHcX3lVE/Ya8FjTJIexa2Rq77nfU96unTnD7aME3+TAm6BFKYrPnqCNIqV5sq0ZGCiEV+Db+qWMQqpFgb5KPx48R6omeDl2EuP9DTYt9iGA/f1KBS1w/La+H4ktsSmLItvZHXLUkrCeflVtJ9DVVg1H7+sxiGvVM975rZpfabuqHVhuP5F1vewav5O8GamUe91yDanoYw47FWzC929O+DJnKA2opFY1Rjru5CE7kOcO0jJtQVUIynzuZEMeb+1CEOFXN8iFSGeRpCm1BTlJxVg49Azm819SO7Bu0axEbwn27GuxMck+TMQHDP8fn48gfDVIL4R8xKVPJ73MQBUIfA/Z54LMw5vmlE+w+VFo2A78X/SsyPA/RMD0z3e2qVLtfo7aeBslpMX0N0TEnLcUlKym1jyBFqSohmYntI5enBhYB9CY/2kNarhwJhNiMtRGyWnkQdKaCFyQwgydjyNUw4VchKxXv2/DoKdC+lkQbCX1NlKCGvJiBJkSGbCus6jfo4yGBNySgr+u7e20BCsxdVAcFlJ/tHd32+cIsNxSXUULUUx+dg/d47g7OPYFw2MxkSuyMwLHVTI6PBN6dS8Sppw45zHJSgDXV3aQzmz40Z6fDgBfiAXU0uZxby2zejee+j3eltoQMzhV6qSBogXwrEXDj7ElWxUQ8RrnSaoU0dxIsKaiMvMykXTu90NqJsGHP4z78SdLigUrLKat32nFwy/E07pfDFRdQ/7N5r57pQ1482uvWhMGhQcviGkVrKDUp0ToCxfhQal5n4Hs/g1jOgH4LWdwFOd1b1WzHET4vLZppv+Czjxo840OrDlG8jAJzv2tp5mLK1dsU/lfIOeWy5NxFxfl2BoYImlQtx9QF6mJRQKBsQYYuO2yaLYPBUXvu/VqYPxtHhNy7Y4hCkNLGPtKSklzCVKSHtMQxcqm5Kw1DhI2PTGZtcGDAvoLQ/u7MifYtWFBlxz2H9zo8RkwKzC5UYiG+p44ccqE62YAxLeT/TOpf8MXx8Qk0IJFRY1Go+viQVJpE5Ehjf49xfAZeqGIy/7us3nqxwQfCkjZypPxobVr/6YpQHIalUvuCyEwbSXC9PC8QnkFcXlrgLpoLIhIfKuaqlQkYIAwQnr/f3eyu7KttOw2lNpv8/BPHyjzVNER3o72gvEBKqRMTflndbP8BMweRDyeciEj5bFayFXqTLzheivgYJC0jwzwHa0MDDEotm48ndze5BBBElAnxxcRYHAFh3FfZaA9UNRmC354kNwUx8eHkmVj5dcTE5ZMnuEyr1QqlhtaJLuOYZv4v3KNo0TKrGPUZ1NILPKuWcvVn5Trv10SMB6h0j/ARMnlOuafCBIfnSWEx/Raif3HDzofYMM31dOyY9LBaLK3TjoX2fEqT4+2qaUVWSTQvyM6wC8nNJyEetXIyuLKrx04P7MKNnbJZlKUtNAIHo7i2dA/YU3Vtdi5l6jCepXy8hOedSSSsI8/HQg5Q+gxTKXwkMHkbESo+hjG0lbRRzQ3Fc5LOzDuFhs3Ptumpie7ilRDhlEJOq/hjsZljCxjkt7fWuPS/EekpXMggJQIk0G+eN9Xu2VmHWIkJe0nJRN4ptBBit2yutG9ML7J1DHAxebiAMrZ4VZlduqGS8I2tJc2iborUxmIN79c+kTovFxivPvrcSaP3n7RSKYTUmKt4N3rMOcw4JOneD3sP956jNaMglIeTER5Xbdlt15Tm2W10NEsYrA/N5JLCHHsR9tSqwxq08G3bqm1ZTbOtagnbo6SLvH/VzBL7W7jPzqFea0LmMLFzUuLtdwumuO3i1Vtq7OK15Xgw3l1PDmIXak+6QBEkvB9YJIzBcc/L20JIYaSZ/qAzVm5Ut4oowk3QehC+N3xo/1wTqt7zsYawfX9no9XjqdPXVLhrwyo/wucJYQkE1e4j8rLcBuHUItQQKqgMXb6LGvxFQlXw33AdZLR0V5P9Fr29lP73scNnosoyvdWPv4fPJ+uJrLVtMakqaL1M1cTvv0OLIZE6wk2a2IcIRUQh+DaejpdcXepBa7bKDRGM9PIVxTl2EwarZ72rooVuY4RQtMypdk6e1lLLehhY2lt7QEd7WxlCDvdIli6E9B4+ZIodmZEMccUGqgiZOqru9tkR3iJ8nCcXRWRZCSPMLPEjlx2LjQL1OM5qKAm+vhSuRqSfV5Ttrg8FdWcrnhMqCTex7DEM6qTsVEuM1+8hovaHQ6e6a1Fz0xLd3nUt4ToWWuzWNkhcoAIIjUx2ZpxjLzWF9+SYmngR1lok4TEoJxGfuijhI/7OICoFmadl2llcL9b1oRVJtbD+JLlv1KrhHG5811t9ELbzgk14ICUwqE+TDzftqHPz98vUSy3jSIwP8dCpkNqLDPTx+rArz4T5qLG3G2PrvJKKPoLBWE501NC3ilUX5mVjVIb9nIbgWcpPMiSXjbcL8K62UkR86m1/yfkSeMaHFuK04X0CE3J6SWzFUxw0BSNHlSzi3RmIRJwHq5udO3c16quLp6sbnffbupxbt+12vzOrzuvNHc7ycRbIxuJHgYU7YSASdQgxp7qz2ynv6HJeqW91doa7nLruXof+17sqhhu31Xif9o7HalqczV29Dnrb/f5EXZvzdH27U98/6LR5i3N0UM5zjHU71/lwjRWWltU5CAIn7F1MqLp/r9hQ5RoaxG+qmrxP4yNKcfsFLwuiprffeb2l03m2scO5h3Or2rudzjGrhk8x4Cqu2xcexilBvNEcdi5Yu4tKF3Ue4tzPy+td5/1md4tzw5iJ27NuXEYobYUdlb8z6GTWkdxaCvk2zHjd5mpKQ459mv5TkAp6mQb9Aq9HHQ8S6mrZnuc6vUG6WHusIhCJGNXl9byvnJyaiE7+Eoz8c5TYNQiUveENGpJpcIJ+biS8R0+rlcazGNs7pKB+zPLTOSX2KNWhlDAf4r2Spj72JORB5OyHULX+dlD/FOky/HFy5ygYU0sey/i8moeqdunXK1qC3RuaMOYHlI/raQMl3M+EeTV5WxD3Km8a8PkM8nr648sQ9+esKbf5e/nxiKBfAOQkxbv3SU9LYmqPV9V/Pn+V20VwTyVjTqCI6edEQUOFUXs9WmfSll8DyX2dt7GlnwkswaM3l9XZ0oNK3MTXbxpOV2sGk69s6XCJw4cY8KbyRrt9TrHt7Bm0rRBQe1+fHUWNfaapU0KbqxzbORC1M/LS3dJwIl3KOrwykQG/E+61q+isgniztdOKqNOziDgZqZIzFwPvqGiyg5NCtoCqoG5NxHhPZTOsnORulKskjoKMDeLuXQ3OmnC3syxARFXdfc57LR3OrdtrvSOOs55rnqhtcdoGhpxHdjc5EfJUuHZTlftX+G15rXPlhkrnLe59F7Lz8VGHdg8c5y2OLeMZ126qduq9XC3v7nd+FchLvYPJd15gPCu8XQnh/qpm59WGVudZzvvQO97kXTcGxhnEuJvR39tWY8cwK4uhcikk4a3Gdstg9l5B2t0wfaTdWkEou5vCPOV5PH73vFL3+DfXltnh6OxjkJD6Wd5F3g88tMe6CW/7YmI99VIL4u0oqUK8ocW4d8hFrXMVoOQU8s3U97MnjvDD/XRYkyhHM1MT3GVZQR2Tdv70U8EbA5vlo+CaPAaaSWoZXm50otGodxQ6L6txGKxzw5ZYORrBsPPrykZKQIy1n8bTjwb2fO4Te3ue7x6KOKvaYns1wtIddd4nx3mwot55qyl2360cp81zurg+CGqwU8v4/Of5uAVvPgObrwvHomY8jOtZ4fXWLnefdHVXv9044+8ZklCx75DXwcV1Sb27y+vInUQEuVYSaMgRJYfAwtoj0raFxIUW1A8nz35f02qLc9Lc9lG7CBkwtUR7bf+A+5uL6ehnH9Lat+5sIEfj3Cbj3NKRvP7Rjlo7FSmqavKvpSP8MRZ7NVbQYLSkqlC9ZW4sPH18gBTcORjrhMWmQWzFmK2UsvO90qQ1oZcI8UhkCLZPtRqMy0NirobAvjIpb4/sW06qKGyPR2oGIdlazjOOTk+kLYzaaYGSp63Wz6HsXsQ51wd+LTAuZOy+8GBNq7tF+IOdDU4kENJthNID5YRafZtzZ3mDs9LbRgzixcZ2l1h83OKFbDmEd0/FiFp7DWHgp0AQGzq6nf8hPF+oa3EehOz0ziCWcm4NpBRMhX1hn571oR9wqVVSDVPtUi32sQ0vbu7scZdY9aOt2ZSEL9BEBIW+dv20AKDd9/ep09oimYqHpyImkKDuRllS4PrlHNuIqDmCJmNJQba7q1joEaUQJuR/WdXsLrJrq/L6cdJsPOyXscJ7GLKqo8cOpqhrO//yQG6oS3kZwS9xPkRB3wi7diFMtDN+PLk5m1ath+8f0Fy80dbjhvVXub+U5mEqeal27UP+dWpPlknNxW79Ak6/7Tg3UMOF52j1xA1qK7Trd6nXC+8P9ttYQcumIonLSnJtBdJNa77axw1C2x3qR4Wqnj73x9f6MbV+CCYFBZO6y51aSh3gzVrsmwzJnULEbCJC1oZ7vIZ/9Iqmfvn2u5oWO5n8fApxcuWUApum5diPgY9lrA9EtvUNOzYf8vqAcJPsU5iOh7XtXQgt2uZhjKU2amF7HQyfEYWcZk5yQ1RDKNrLcq02k/9IGmldrB93KiokPw8EB2SsoKWXO5FmxXhlckqi+3vEUvLqwok5PHVkIWAszlqzy1p54zuLpnPZ3q9bod08JlLSb5DrNxDm38Sbvsg5EBywsT7oH+3XNW3uasGirFSrxRNdCllKiPZHZzJYLZb5qEcpae3pxMCuu9oibS5/QCOiLcYUrp+MmtJeURjFdVlxzqiae6D4h40NQt54HyGv3JRo10aVfv8YhtC0pSlVKcPFuxIXahr08mzCO4VzMlLSsZuomZ+RaucU0rXsw/sfF5+osUFonWob/7TrLdaUgdpV93fl9X+VIC0Y6tek2uI8OD3J5gT2Vj9ZmP0f4IM4iY7RQ5gAAAAASUVORK5CYII=) no-repeat 50%;background-size:64px 64px;opacity:.84}.markdown-body h1:after{position:absolute;content:"";width:150%;left:-25%;height:50%;bottom:12px;border-radius:50%;background:linear-gradient(transparent 80%,rgba(77,208,225,.8));background-size:400% 200%;opacity:.6;animation:h1Animate 6s linear infinite}@keyframes h1Animate{0%{background-position:100% 100%}50%{background-position:100% 50%}to{background-position:100% 100%}}.markdown-body h2{display:block;border-bottom:4px solid #4dd0e1;position:relative;font-size:24px;padding:12px 32px;margin:30px 0}.markdown-body h2:before{width:24px;height:24px;left:0;top:0;margin:auto;background-size:24px 24px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADGklEQVRYR81X32vTYBQ999s6mFjQgQ+DrbHiVFZYU4cDcQ/6pGhTFVYFEXGi82H+Bz448UnEF1Fx9ccEEcXpZE3d5tP2ooKiTacTHaLNpigMHDgnU9tcSbrWrkwWR0sbyEOSe885ObnfvV8IRT6oyPwoLQHBx+OVM5WJvSyEVAhnBOjt7yU/+/rr6r6l8TMO+F/EN0JQhICqQpD/xaRpcpAc9tS+M+9lBCia/oqBamK+zeDuQogQZaKJk3wcQjxSva7tGQGB2Ke1zIk3DNyMyNL+QpCnMQOaPsDAVuGAp9cjvbYc8Ec/bCYSg0zoiHilk1tHxqsqEsYlML4kjIpT/eurJxRNPweQU5VdrWaOEo1fgKAVbBgXIz73kF3R/ph+ghgdzMYWM29eAWlBJqgZaFlFYtC6nhWpaDqnSGlIlV1WjJ3DloDNgyNLncudqgX//Ucg3LxuStHGuhi8pqKCW3rqV342rwFjRznKm+/LNaN2yC237ThgF2wxcfMLeP6+ncrKzoPoKTGeLQbYbg4TNoC5iZPJY5HGVRdSNZAWYBclD3FzBQzrR8hACAKdzBzKA/4/IYioDQaOskBbpEG6PO8qKKSAEi3CnEb0Pw4oMf0OmKbTDWqh3Lw6EIiNBZi5lxh3wz4puBD5ovqAMvxhHSdFKxE1CQe3m/07TeTX4lcJdAhE+1Sv65Z5P/ByvIGTRowIZ9igbtXnmrOsbTvgj+kHBNMuBu9OdVw8EeU4nC1A0cYmAHZOTRrLhra4Z8ywnSN6vZHAFTA2WnnMfQB3qz73ddsOZM8CACFDIPSgQXqebXEgqgeZcAeEe6pXasm1f8ew3igMtAHWac0Uc/jYdyAaP0xEBwFsmgUPqbJ0NE2UKj4EGcahiOzuyhagaHpnmtgcVgTcCMuua7YdyAHbA3ArQNscVFbb4635aD6fnYaTvxxi9UNP7ddMXaRWVBdAcaLk6bDXPZCNZ9uBXEsDUX1T2Cc9yjig6Z0EHg3LK8/aqf6MwJKchkXfks1+0+JtSq3qLPa23BRR1B+T/6nkfMaW1r9hPt/MLtYfTLEpP+T9FNoAAAAASUVORK5CYII=)}.markdown-body h2:after,.markdown-body h2:before{content:"";display:block;position:absolute;bottom:0}.markdown-body h2:after{right:0;width:400px;height:10px;border-top-right-radius:24px;background:linear-gradient(90deg,#fff,#4dd0e1);max-width:50vw}.markdown-body h3{margin:30px 0;font-size:18px;position:relative;padding:4px 32px;width:max-content}.markdown-body h3:before{border-bottom:2px solid #4dd0e1;width:100%;content:"";display:block;height:28px;position:absolute;left:0;top:0;bottom:-2px;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);background-repeat:no-repeat;animation:h3AnimationBefore 2s infinite alternate}@keyframes h3AnimationBefore{0%{width:28px}25%{width:100%}50%{width:100%}to{width:100%}}.markdown-body h3:after{content:"";display:block;width:28px;height:28px;position:absolute;border:2px solid #4dd0e1;border-radius:50%;right:-15px;top:0;bottom:0;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);animation:h3AnimationAfter 2s infinite alternate}@keyframes h3AnimationAfter{0%{transform:rotate(0)}10%{transform:rotate(0)}50%{transform:rotate(-1turn)}to{transform:rotate(-1turn)}}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin:22px 0;letter-spacing:2px;font-size:14px;word-spacing:2px}.markdown-body img{max-width:80%;border-radius:6px;display:block;margin:20px auto!important;object-fit:contain;box-shadow:0 0 16px hsla(0,0%,43.1%,.45)}.markdown-body figcaption{display:block;font-size:13px;color:#2b2b2b}.markdown-body figcaption:before{content:"";background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAGFBMVEVHcExAuPtAuPpAuPtAuPpAuPtAvPxAuPokzOX5AAAAB3RSTlMAkDLqNegkoiUM7wAAAGBJREFUKM9jYBhcgMkBTUDVBE1BeDGqEtXychNUBeXlKEqACsrLQxB8lnCQQClCiWt5OYoSiAIkJVAF5eVBqAqAShTAAs7l5ShKWMwRAmAlSArASpAVgJUkCqIAscESHwCVVjMBK9JnbQAAAABJRU5ErkJggg==);display:inline-block;width:18px;height:18px;background-size:18px;background-repeat:no-repeat;background-position:50%;margin-right:5px;margin-bottom:-5px}.markdown-body hr{border:none;border-top:1px solid #4dd0e1;margin-top:32px;margin-bottom:32px}.markdown-body del{color:#4dd0e1}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(77,208,225,.08);color:#26c6da;padding:.195em .4em}.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#4dd0e1;border-bottom:1px solid #4dd0e1;font-weight:400;text-decoration:none;margin:0 4px}.markdown-body a:active,.markdown-body a:hover{background-color:rgba(77,208,225,.1)}.markdown-body strong{color:#26c6da}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{font-style:normal;color:#4dd0e1;font-weight:700}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(77,208,225,.05)}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{margin:2em 0;padding:24px 32px;border-left:4px solid #26c6da;background:rgba(77,208,225,.15);position:relative}.markdown-body blockquote:before{content:"â";top:8px;left:8px;color:#4dd0e1;font-size:30px;line-height:1;font-weight:700;position:absolute;opacity:.7}.markdown-body blockquote:after{content:"â";font-size:30px;position:absolute;right:8px;bottom:0;color:#4dd0e1;opacity:.7}.markdown-body blockquote p{color:#595959;line-height:2}.markdown-body ol,.markdown-body ul{color:#595959;padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æœ€è¿‘åœ¨åšç§»åŠ¨ç«¯ H5 ç™»å½•é¡µé¢æ—¶ï¼Œé‡åˆ°äº†ä¸€ä¸ªè¯¡å¼‚çš„ bugï¼šåœ¨ iOS Safari ä¸­ï¼Œå¼¹çª—æ˜æ˜æ˜¾ç¤ºåœ¨å±å¹•ä¸­å¤®ï¼Œç‚¹å‡»æŒ‰é’®å´æ¯«æ— ååº”ã€‚æ£€æŸ¥å…ƒç´ åå‘ç°ï¼ŒDOM çš„å®é™…ä½ç½®å’Œè§†è§‰ä½ç½®å®Œå…¨å¯¹ä¸ä¸Šã€‚æŠ˜è…¾äº†ä¸€ç•ªåç»ˆäºææ¸…æ¥šäº†åŸå› ï¼Œè®°å½•ä¸€ä¸‹ã€‚</p>
</blockquote>
<h2 data-id="heading-0">é—®é¢˜ç°è±¡</h2>
<p>æˆ‘ä»¬çš„ç™»å½•æ¨¡å—æœ‰ä¸¤ä¸ªé¡µé¢ï¼šè´¦å·å¯†ç ç™»å½•å’ŒéªŒè¯ç ç™»å½•ï¼Œå¯ä»¥äº’ç›¸åˆ‡æ¢ã€‚ä¸¤ä¸ªé¡µé¢éƒ½æœ‰ä¸€ä¸ªåè®®ç¡®è®¤å¼¹çª—ï¼Œä½¿ç”¨ <code>position: fixed</code> å®šä½ã€‚</p>
<p>è¯¡å¼‚çš„äº‹æƒ…å‘ç”Ÿäº†ï¼š</p>
<ol>
<li>åœ¨è´¦å·å¯†ç é¡µé¢è¾“å…¥æ‰‹æœºå·ï¼ˆè½¯é”®ç›˜å¼¹å‡ºï¼‰ï¼Œè§¦å‘å¼¹çª—ï¼Œç‚¹å‡»å–æ¶ˆ â€”â€” <strong>æ­£å¸¸</strong></li>
<li>åˆ‡æ¢åˆ°éªŒè¯ç é¡µé¢ï¼Œè§¦å‘å¼¹çª—ï¼Œç‚¹å‡»å–æ¶ˆ â€”â€” <strong>æ­£å¸¸</strong></li>
<li>å†åˆ‡æ¢å›è´¦å·å¯†ç é¡µé¢ï¼Œè§¦å‘å¼¹çª—ï¼Œç‚¹å‡»å–æ¶ˆ â€”â€” <strong>æ²¡ååº”ï¼</strong></li>
</ol>
<p>æ‰“å¼€ Safari è°ƒè¯•å™¨ä¸€çœ‹ï¼Œå¼¹çª—çš„ DOM ä½ç½®å’Œå±å¹•ä¸Šæ˜¾ç¤ºçš„ä½ç½®å·®äº†å¥½å‡ ç™¾åƒç´ ã€‚ç‚¹å‡»äº‹ä»¶å®é™…è§¦å‘åœ¨äº†ç©ºç™½åŒºåŸŸã€‚</p>
<p>è¿™å°±æ˜¯ä¼ è¯´ä¸­çš„"å¹½çµå¼¹çª—"ã€‚</p>
<hr/>
<h2 data-id="heading-1">å‰ç½®çŸ¥è¯†ï¼šç†è§£ç§»åŠ¨ç«¯è§†å£</h2>
<p>è¦ææ¸…æ¥šè¿™ä¸ªé—®é¢˜ï¼Œå¾—å…ˆç†è§£ç§»åŠ¨ç«¯æµè§ˆå™¨çš„è§†å£æ¦‚å¿µã€‚è¿™éƒ¨åˆ†å†…å®¹ç¨å¾®æœ‰ç‚¹ç»•ï¼Œä½†ç†è§£äº†ä¹‹åå¾ˆå¤šç§»åŠ¨ç«¯çš„å‘å°±éƒ½èƒ½è§£é‡Šäº†ã€‚</p>
<h3 data-id="heading-2">ä¸‰ç§è§†å£</h3>
<p>ç§»åŠ¨ç«¯æµè§ˆå™¨æœ‰ä¸‰ç§è§†å£ï¼š</p>
<h4 data-id="heading-3">1. å¸ƒå±€è§†å£ï¼ˆLayout Viewportï¼‰</h4>
<p>å¸ƒå±€è§†å£æ˜¯ CSS å¸ƒå±€çš„åŸºå‡†ã€‚å½“ä½ å†™ <code>width: 100%</code> æ—¶ï¼Œè¿™ä¸ª 100% å°±æ˜¯ç›¸å¯¹äºå¸ƒå±€è§†å£çš„å®½åº¦ã€‚</p>
<p>åœ¨æ²¡æœ‰ <code>&lt;meta name="viewport"&gt;</code> æ ‡ç­¾çš„æƒ…å†µä¸‹ï¼Œç§»åŠ¨ç«¯æµè§ˆå™¨çš„å¸ƒå±€è§†å£é»˜è®¤æ˜¯ 980pxï¼ˆä¸åŒæµè§ˆå™¨å¯èƒ½ç•¥æœ‰å·®å¼‚ï¼‰ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæ—©æœŸçš„æ¡Œé¢ç½‘é¡µåœ¨æ‰‹æœºä¸Šçœ‹èµ·æ¥ç‰¹åˆ«å° â€”â€” æµè§ˆå™¨æŠŠ 980px çš„å†…å®¹ç¡¬å¡è¿›äº† 320px çš„å±å¹•ã€‚</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-comment">&lt;!-- è¿™è¡Œä»£ç è®©å¸ƒå±€è§†å£ç­‰äºè®¾å¤‡å®½åº¦ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
</code></pre>
<h4 data-id="heading-4">2. è§†è§‰è§†å£ï¼ˆVisual Viewportï¼‰</h4>
<p>è§†è§‰è§†å£æ˜¯ç”¨æˆ·å½“å‰èƒ½çœ‹åˆ°çš„åŒºåŸŸã€‚å½“ç”¨æˆ·åŒæŒ‡ç¼©æ”¾é¡µé¢æ—¶ï¼Œå¸ƒå±€è§†å£ä¸å˜ï¼Œä½†è§†è§‰è§†å£ä¼šå˜å°ï¼ˆæ”¾å¤§æ—¶ï¼‰æˆ–å˜å¤§ï¼ˆç¼©å°æ—¶ï¼‰ã€‚</p>
<p>å¯ä»¥è¿™æ ·ç†è§£ï¼šå¸ƒå±€è§†å£æ˜¯ä¸€å¼ å¤§åœ°å›¾ï¼Œè§†è§‰è§†å£æ˜¯ä½ æ‰‹é‡Œçš„æ”¾å¤§é•œã€‚æ”¾å¤§é•œç§»åŠ¨æˆ–ç¼©æ”¾ï¼Œåœ°å›¾æœ¬èº«ä¸ä¼šå˜ã€‚</p>
<h4 data-id="heading-5">3. ç†æƒ³è§†å£ï¼ˆIdeal Viewportï¼‰</h4>
<p>ç†æƒ³è§†å£æ˜¯è®¾å¤‡å±å¹•çš„å®é™…å°ºå¯¸ã€‚<code>width=device-width</code> å°±æ˜¯è®©å¸ƒå±€è§†å£ç­‰äºç†æƒ³è§†å£ã€‚</p>
<h3 data-id="heading-6">ç”¨ä»£ç è·å–è§†å£ä¿¡æ¯</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å¸ƒå±€è§†å£</span>
<span class="hljs-keyword">const</span> layoutWidth = <span class="hljs-variable language_">document</span>.<span class="hljs-property">documentElement</span>.<span class="hljs-property">clientWidth</span>;
<span class="hljs-keyword">const</span> layoutHeight = <span class="hljs-variable language_">document</span>.<span class="hljs-property">documentElement</span>.<span class="hljs-property">clientHeight</span>;

<span class="hljs-comment">// è§†è§‰è§†å£ï¼ˆéœ€è¦ Visual Viewport APIï¼‰</span>
<span class="hljs-keyword">const</span> visualWidth = <span class="hljs-variable language_">window</span>.<span class="hljs-property">visualViewport</span>?.<span class="hljs-property">width</span>;
<span class="hljs-keyword">const</span> visualHeight = <span class="hljs-variable language_">window</span>.<span class="hljs-property">visualViewport</span>?.<span class="hljs-property">height</span>;
<span class="hljs-keyword">const</span> offsetTop = <span class="hljs-variable language_">window</span>.<span class="hljs-property">visualViewport</span>?.<span class="hljs-property">offsetTop</span>; <span class="hljs-comment">// è§†è§‰è§†å£ç›¸å¯¹äºå¸ƒå±€è§†å£çš„åç§»</span>

<span class="hljs-comment">// å±å¹•å°ºå¯¸</span>
<span class="hljs-keyword">const</span> screenWidth = <span class="hljs-variable language_">window</span>.<span class="hljs-property">screen</span>.<span class="hljs-property">width</span>;
<span class="hljs-keyword">const</span> screenHeight = <span class="hljs-variable language_">window</span>.<span class="hljs-property">screen</span>.<span class="hljs-property">height</span>;
</code></pre>
<h3 data-id="heading-7">è§†å£ä¸ position: fixed çš„å…³ç³»</h3>
<p>è¿™é‡Œæ˜¯å…³é”®ç‚¹ï¼š<strong><code>position: fixed</code> çš„å…ƒç´ æ˜¯ç›¸å¯¹äºè§†è§‰è§†å£å®šä½çš„ï¼Œä½†å®ƒçš„ç‚¹å‡»åŒºåŸŸæ˜¯æ ¹æ®å¸ƒå±€è§†å£è®¡ç®—çš„</strong>ã€‚</p>
<p>æ­£å¸¸æƒ…å†µä¸‹ï¼Œè§†è§‰è§†å£å’Œå¸ƒå±€è§†å£æ˜¯é‡åˆçš„ï¼Œæ‰€ä»¥æ²¡é—®é¢˜ã€‚ä½†å½“è½¯é”®ç›˜å¼¹å‡ºæ—¶ï¼ŒiOS Safari ä¼šæ”¹å˜è§†è§‰è§†å£è€Œä¸æ”¹å˜å¸ƒå±€è§†å£ï¼Œè¿™å°±å¯¼è‡´äº†è§†è§‰ä½ç½®å’Œç‚¹å‡»åŒºåŸŸçš„é”™ä½ã€‚</p>
<hr/>
<h2 data-id="heading-8">æµè§ˆå™¨æ¸²æŸ“åŸç†ï¼šä¸ºä»€ä¹ˆä¼š"é”™ä½"</h2>
<p>è¦ç†è§£"å¹½çµå¼¹çª—"ï¼Œè¿˜éœ€è¦äº†è§£æµè§ˆå™¨æ˜¯æ€ä¹ˆæ¸²æŸ“é¡µé¢çš„ã€‚</p>
<h3 data-id="heading-9">æ¸²æŸ“æµæ°´çº¿</h3>
<p>æµè§ˆå™¨æ¸²æŸ“ä¸€ä¸ªé¡µé¢å¤§è‡´ç»è¿‡ä»¥ä¸‹æ­¥éª¤ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-tag">HTML</span> â†’ DOM Tree
              â†˜
                â†’ Render Tree â†’ Layout â†’ Paint â†’ Composite
              â†—
CSS  â†’ CSSOM
</code></pre>
<ol>
<li><strong>è§£æ HTML</strong>ï¼šæ„å»º DOM æ ‘</li>
<li><strong>è§£æ CSS</strong>ï¼šæ„å»º CSSOMï¼ˆCSS Object Modelï¼‰</li>
<li><strong>åˆå¹¶</strong>ï¼šDOM + CSSOM = Render Treeï¼ˆæ¸²æŸ“æ ‘ï¼‰</li>
<li><strong>å¸ƒå±€ï¼ˆLayout/Reflowï¼‰</strong>ï¼šè®¡ç®—æ¯ä¸ªå…ƒç´ çš„ä½ç½®å’Œå¤§å°</li>
<li><strong>ç»˜åˆ¶ï¼ˆPaintï¼‰</strong>ï¼šæŠŠå…ƒç´ ç”»åˆ°å±å¹•ä¸Š</li>
<li><strong>åˆæˆï¼ˆCompositeï¼‰</strong>ï¼šæŠŠä¸åŒå›¾å±‚åˆå¹¶</li>
</ol>
<h3 data-id="heading-10">é‡æ’ï¼ˆReflowï¼‰ä¸é‡ç»˜ï¼ˆRepaintï¼‰</h3>
<h4 data-id="heading-11">é‡æ’ï¼ˆReflowï¼‰</h4>
<p>å½“å…ƒç´ çš„å‡ ä½•å±æ€§ï¼ˆä½ç½®ã€å¤§å°ï¼‰å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæµè§ˆå™¨éœ€è¦é‡æ–°è®¡ç®—å¸ƒå±€ï¼Œè¿™å°±æ˜¯é‡æ’ã€‚</p>
<p>è§¦å‘é‡æ’çš„æ“ä½œï¼š</p>
<ul>
<li>æ”¹å˜çª—å£å¤§å°</li>
<li>æ”¹å˜å­—ä½“å¤§å°</li>
<li>æ·»åŠ /åˆ é™¤ DOM å…ƒç´ </li>
<li>æ”¹å˜å…ƒç´ çš„ <code>width</code>ã€<code>height</code>ã€<code>margin</code>ã€<code>padding</code> ç­‰</li>
<li>è¯»å–æŸäº›å±æ€§ï¼š<code>offsetTop</code>ã€<code>scrollTop</code>ã€<code>clientTop</code>ã€<code>getComputedStyle()</code> ç­‰</li>
</ul>
<h4 data-id="heading-12">é‡ç»˜ï¼ˆRepaintï¼‰</h4>
<p>å½“å…ƒç´ çš„å¤–è§‚ï¼ˆé¢œè‰²ã€èƒŒæ™¯ã€é˜´å½±ç­‰ï¼‰å‘ç”Ÿå˜åŒ–ï¼Œä½†å‡ ä½•å±æ€§ä¸å˜æ—¶ï¼Œåªéœ€è¦é‡ç»˜ï¼Œä¸éœ€è¦é‡æ’ã€‚</p>
<p>è§¦å‘é‡ç»˜çš„æ“ä½œï¼š</p>
<ul>
<li>æ”¹å˜ <code>color</code>ã€<code>background</code>ã€<code>visibility</code> ç­‰</li>
</ul>
<h4 data-id="heading-13">æ€§èƒ½å½±å“</h4>
<p>é‡æ’çš„ä»£ä»·æ¯”é‡ç»˜å¤§å¾—å¤šï¼Œå› ä¸ºé‡æ’ä¼šå¯¼è‡´æ•´ä¸ªæ¸²æŸ“æ ‘çš„é‡æ–°è®¡ç®—ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬è¦å°½é‡é¿å…é¢‘ç¹è§¦å‘é‡æ’ã€‚</p>
<h3 data-id="heading-14">å›¾å±‚ï¼ˆLayerï¼‰ä¸åˆæˆ</h3>
<p>ç°ä»£æµè§ˆå™¨ä¼šæŠŠé¡µé¢åˆ†æˆå¤šä¸ªå›¾å±‚ï¼Œæ¯ä¸ªå›¾å±‚ç‹¬ç«‹æ¸²æŸ“ï¼Œæœ€ååˆæˆåˆ°ä¸€èµ·ã€‚æŸäº› CSS å±æ€§ä¼šè§¦å‘å…ƒç´ æå‡ä¸ºç‹¬ç«‹å›¾å±‚ï¼š</p>
<ul>
<li><code>transform</code></li>
<li><code>opacity</code></li>
<li><code>will-change</code></li>
<li><code>position: fixed</code>ï¼ˆåœ¨æŸäº›æµè§ˆå™¨ä¸­ï¼‰</li>
</ul>
<p>ç‹¬ç«‹å›¾å±‚çš„å¥½å¤„æ˜¯ï¼šå½“è¿™ä¸ªå…ƒç´ å˜åŒ–æ—¶ï¼Œä¸ä¼šå½±å“å…¶ä»–å›¾å±‚ï¼Œåªéœ€è¦é‡æ–°åˆæˆï¼Œä¸éœ€è¦é‡æ’æ•´ä¸ªé¡µé¢ã€‚</p>
<p>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬åœ¨è§£å†³æ–¹æ¡ˆä¸­ä½¿ç”¨ <code>transform: translate3d(0, 0, 0)</code> â€”â€” å®ƒå¼ºåˆ¶åˆ›å»ºä¸€ä¸ªç‹¬ç«‹çš„åˆæˆå±‚ï¼Œè®©å¼¹çª—çš„æ¸²æŸ“ä¸é¡µé¢å…¶ä»–éƒ¨åˆ†éš”ç¦»ã€‚</p>
<hr/>
<h2 data-id="heading-15">é—®é¢˜æ ¹å› æ·±åº¦åˆ†æ</h2>
<p>ç°åœ¨æˆ‘ä»¬æœ‰äº†è¶³å¤Ÿçš„èƒŒæ™¯çŸ¥è¯†ï¼Œæ¥æ·±å…¥åˆ†æ"å¹½çµå¼¹çª—"çš„æˆå› ã€‚</p>
<h3 data-id="heading-16">iOS Safari çš„"ç‹¬ç‰¹"å¤„ç†æ–¹å¼</h3>
<p>å½“è½¯é”®ç›˜å¼¹å‡ºæ—¶ï¼Œä¸åŒå¹³å°çš„å¤„ç†æ–¹å¼ä¸åŒï¼š</p>
<p><strong>Android Chrome çš„åšæ³•ï¼š</strong></p>
<pre><code class="hljs language-scss" lang="scss">è½¯é”®ç›˜å¼¹å‡ºå‰ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     â”‚
â”‚   Layout Viewport   â”‚ = Visual Viewport
â”‚   (<span class="hljs-number">100vh</span>)           â”‚
â”‚                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

è½¯é”®ç›˜å¼¹å‡ºåï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Layout Viewport   â”‚ = Visual Viewportï¼ˆç¼©å°äº†ï¼‰
â”‚   (å˜å°äº†)           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚      è½¯é”®ç›˜          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<p>Android çš„åšæ³•æ˜¯ç¼©å°å¸ƒå±€è§†å£ï¼Œ<code>position: fixed</code> çš„å…ƒç´ ä¼šç›¸å¯¹äºæ–°çš„è§†å£é‡æ–°å®šä½ï¼Œä¸€åˆ‡æ­£å¸¸ã€‚</p>
<p><strong>iOS Safari çš„åšæ³•ï¼š</strong></p>
<pre><code class="hljs language-scss" lang="scss">è½¯é”®ç›˜å¼¹å‡ºå‰ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     â”‚
â”‚   Layout Viewport   â”‚ = Visual Viewport
â”‚   (<span class="hljs-number">100vh</span>)           â”‚
â”‚                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

è½¯é”®ç›˜å¼¹å‡ºåï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â† Layout Viewportï¼ˆä¸å˜ï¼‰
â”‚   â†‘                 â”‚
â”‚   â”‚ é¡µé¢è¢«æ¨ä¸Šå»     â”‚
â”‚   â†“                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â† Visual Viewportï¼ˆå˜å°äº†ï¼‰
â”‚      è½¯é”®ç›˜          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<p>iOS ä¿æŒå¸ƒå±€è§†å£ä¸å˜ï¼Œåªæ˜¯æŠŠé¡µé¢å†…å®¹å¾€ä¸Š"æ¨"ã€‚è¿™æ—¶å€™ï¼š</p>
<ul>
<li><code>position: fixed</code> çš„å…ƒç´ æ ¹æ®å¸ƒå±€è§†å£è®¡ç®—ä½ç½®</li>
<li>ä½†ç”¨æˆ·çœ‹åˆ°çš„æ˜¯è§†è§‰è§†å£</li>
<li>ä¸¤è€…ä¸ä¸€è‡´ï¼Œå°±å‡ºç°äº†"å¹½çµ"ç°è±¡</li>
</ul>
<h3 data-id="heading-17">ä¸ºä»€ä¹ˆå¤šæ¬¡åˆ‡æ¢åæ‰å‡ºé—®é¢˜ï¼Ÿ</h3>
<p>æ¯æ¬¡è½¯é”®ç›˜å¼¹å‡ºï¼Œ<code>window.scrollY</code> éƒ½ä¼šäº§ç”Ÿå˜åŒ–ã€‚å½“ç”¨æˆ·åœ¨å¤šä¸ªé¡µé¢ä¹‹é—´åˆ‡æ¢æ—¶ï¼š</p>
<ol>
<li>é¡µé¢ Aï¼šè½¯é”®ç›˜å¼¹å‡ºï¼Œ<code>scrollY = 200</code></li>
<li>åˆ‡æ¢åˆ°é¡µé¢ Bï¼š<code>scrollY</code> å¯èƒ½æ²¡æœ‰å®Œå…¨é‡ç½®</li>
<li>é¡µé¢ Bï¼šè½¯é”®ç›˜å¼¹å‡ºï¼Œ<code>scrollY</code> ç´¯åŠ </li>
<li>åˆ‡æ¢å›é¡µé¢ Aï¼šç´¯ç§¯çš„åç§»é‡å¯¼è‡´è®¡ç®—é”™è¯¯</li>
</ol>
<p>Vue Router çš„ <code>router.replace()</code> ä¸ä¼šè§¦å‘å®Œæ•´çš„é¡µé¢åˆ·æ–°ï¼Œæ»šåŠ¨çŠ¶æ€ä¼šæ®‹ç•™ã€‚</p>
<h3 data-id="heading-18">ä¸ºä»€ä¹ˆ iOS Chrome ä¹Ÿæœ‰é—®é¢˜ï¼Ÿ</h3>
<p>è¿™é‡Œè¦æä¸€ä¸ªå¾ˆå¤šäººä¸çŸ¥é“çš„äº‹å®ï¼š<strong>iOS ä¸Šæ‰€æœ‰æµè§ˆå™¨éƒ½æ˜¯ Safari å¥—å£³</strong>ã€‚</p>
<p>Apple çš„ App Store æ”¿ç­–è¦æ±‚ï¼šiOS ä¸Šçš„æ‰€æœ‰æµè§ˆå™¨å¿…é¡»ä½¿ç”¨ WebKit å¼•æ“ã€‚æ‰€ä»¥ï¼š</p>






























<table><thead><tr><th>æµè§ˆå™¨</th><th>Android å¼•æ“</th><th>iOS å¼•æ“</th></tr></thead><tbody><tr><td>Chrome</td><td>Blink</td><td>WebKit</td></tr><tr><td>Firefox</td><td>Gecko</td><td>WebKit</td></tr><tr><td>Edge</td><td>Blink</td><td>WebKit</td></tr><tr><td>Safari</td><td>-</td><td>WebKit</td></tr></tbody></table>
<p>iOS ä¸Šçš„ Chrome åªæ˜¯æ¢äº†ä¸ª UI çš„ Safariï¼Œåº•å±‚æ¸²æŸ“å¼•æ“å®Œå…¨ä¸€æ ·ã€‚è¿™ä¸ªé—®é¢˜åœ¨ iOS ä¸Šæ˜¯æ— å·®åˆ«æ”»å‡»ã€‚</p>
<hr/>
<h2 data-id="heading-19">è§£å†³æ–¹æ¡ˆ</h2>
<h3 data-id="heading-20">æ ¸å¿ƒæ€è·¯</h3>
<p>å¼¹çª—æ˜¾ç¤ºæ—¶ï¼ŒæŠŠé¡µé¢"å†»ä½"ï¼Œè®©å¸ƒå±€è§†å£å’Œè§†è§‰è§†å£å¼ºåˆ¶ä¿æŒä¸€è‡´ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">let</span> savedScrollY = <span class="hljs-number">0</span>;
<span class="hljs-keyword">let</span> savedBodyStyle = <span class="hljs-string">''</span>;

<span class="hljs-comment">// é”å®š</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">lockBodyScroll</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-comment">// å…¼å®¹æ€§å†™æ³•ï¼Œç¡®ä¿èƒ½è·å–åˆ°æ»šåŠ¨ä½ç½®</span>
  savedScrollY = <span class="hljs-variable language_">window</span>.<span class="hljs-property">scrollY</span> || <span class="hljs-variable language_">window</span>.<span class="hljs-property">pageYOffset</span> || <span class="hljs-variable language_">document</span>.<span class="hljs-property">documentElement</span>.<span class="hljs-property">scrollTop</span> || <span class="hljs-number">0</span>;
  savedBodyStyle = <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-property">style</span>.<span class="hljs-property">cssText</span>;

  <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-property">style</span>.<span class="hljs-property">cssText</span> = <span class="hljs-string">`
    <span class="hljs-subst">${savedBodyStyle}</span>;
    position: fixed;
    top: -<span class="hljs-subst">${savedScrollY}</span>px;
    left: 0;
    right: 0;
    width: 100%;
    overflow: hidden;
  `</span>;
};

<span class="hljs-comment">// è§£é”</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">unlockBodyScroll</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-property">style</span>.<span class="hljs-property">cssText</span> = savedBodyStyle;
  <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">scrollTo</span>(<span class="hljs-number">0</span>, savedScrollY);
};
</code></pre>
<p><strong>åŸç†è§£æï¼š</strong></p>
<ol>
<li><code>position: fixed</code> è®© body è„±ç¦»æ–‡æ¡£æµï¼Œä¸å†æ»šåŠ¨</li>
<li><code>top: -${savedScrollY}px</code> ç”¨è´Ÿå€¼è¡¥å¿å½“å‰æ»šåŠ¨ä½ç½®ï¼Œä¿æŒè§†è§‰ä¸€è‡´</li>
<li><code>overflow: hidden</code> ç¦æ­¢æ»šåŠ¨</li>
<li>å…³é—­å¼¹çª—æ—¶æ¢å¤åŸå§‹æ ·å¼ï¼Œå¹¶ç”¨ <code>scrollTo</code> æ¢å¤æ»šåŠ¨ä½ç½®</li>
</ol>
<h3 data-id="heading-21">Vue ç»„ä»¶ä¸­çš„ä½¿ç”¨</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { watch, toRefs, nextTick } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>;

<span class="hljs-keyword">const</span> props = defineProps&lt;{ <span class="hljs-attr">show</span>: <span class="hljs-built_in">boolean</span> }&gt;();
<span class="hljs-keyword">const</span> { show } = <span class="hljs-title function_">toRefs</span>(props);

<span class="hljs-title function_">watch</span>(show, <span class="hljs-function">(<span class="hljs-params">val</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (val) {
    <span class="hljs-title function_">nextTick</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-title function_">lockBodyScroll</span>();
    });
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-title function_">unlockBodyScroll</span>();
  }
}, { <span class="hljs-attr">immediate</span>: <span class="hljs-literal">true</span> });

<span class="hljs-comment">// ç»„ä»¶å¸è½½æ—¶ç¡®ä¿è§£é”ï¼Œé˜²æ­¢çŠ¶æ€æ®‹ç•™</span>
<span class="hljs-title function_">onBeforeUnmount</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">if</span> (show.<span class="hljs-property">value</span>) {
    <span class="hljs-title function_">unlockBodyScroll</span>();
  }
});
</code></pre>
<h3 data-id="heading-22">CSS ä¼˜åŒ–</h3>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-selector-class">.dialog-overlay</span> {
  <span class="hljs-attribute">position</span>: fixed;
  <span class="hljs-attribute">top</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">left</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">right</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">bottom</span>: <span class="hljs-number">0</span>;

  <span class="hljs-comment">// åŠ¨æ€è§†å£é«˜åº¦ï¼ŒiOS 15+ æ”¯æŒ</span>
  <span class="hljs-comment">// ä¼šéšè½¯é”®ç›˜å¼¹å‡ºè‡ªåŠ¨è°ƒæ•´</span>
  <span class="hljs-attribute">min-height</span>: <span class="hljs-number">100vh</span>;
  <span class="hljs-attribute">min-height</span>: <span class="hljs-number">100</span>dvh;

  <span class="hljs-comment">// å¼ºåˆ¶åˆ›å»ºç‹¬ç«‹åˆæˆå±‚</span>
  <span class="hljs-comment">// è®©å¼¹çª—çš„æ¸²æŸ“ä¸é¡µé¢éš”ç¦»</span>
  <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translate3d</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);
  -webkit-<span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translate3d</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);

  <span class="hljs-comment">// ç¦ç”¨è§¦æ‘¸æ»šåŠ¨æ‰‹åŠ¿</span>
  touch-action: none;
  -webkit-touch-callout: none;

  <span class="hljs-comment">// é˜²æ­¢æ»šåŠ¨ç©¿é€åˆ°çˆ¶å…ƒç´ </span>
  overscroll-behavior: contain;
}
</code></pre>
<p><strong>CSS å±æ€§è§£æï¼š</strong></p>

























<table><thead><tr><th>å±æ€§</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td><code>100dvh</code></td><td>åŠ¨æ€è§†å£é«˜åº¦ï¼Œä¼šéšè½¯é”®ç›˜å˜åŒ–</td></tr><tr><td><code>transform: translate3d(0,0,0)</code></td><td>è§¦å‘ GPU åŠ é€Ÿï¼Œåˆ›å»ºç‹¬ç«‹å›¾å±‚</td></tr><tr><td><code>touch-action: none</code></td><td>ç¦ç”¨æ‰€æœ‰è§¦æ‘¸æ‰‹åŠ¿</td></tr><tr><td><code>overscroll-behavior: contain</code></td><td>æ»šåŠ¨åˆ°è¾¹ç•Œæ—¶ä¸ä¼šè§¦å‘çˆ¶å…ƒç´ æ»šåŠ¨</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-23">è¸©è¿‡çš„å‘</h2>
<h3 data-id="heading-24">å‘ 1ï¼šå¿˜è®°åœ¨ç»„ä»¶å¸è½½æ—¶è§£é”</h3>
<p>å¦‚æœç”¨æˆ·åœ¨å¼¹çª—æ‰“å¼€çŠ¶æ€ä¸‹åˆ‡æ¢é¡µé¢ï¼ˆæ¯”å¦‚ç‚¹å‡»äº†å¼¹çª—é‡Œçš„é“¾æ¥ï¼‰ï¼Œ<code>body</code> çš„ <code>fixed</code> æ ·å¼ä¼šæ®‹ç•™ï¼Œå¯¼è‡´æ–°é¡µé¢æ— æ³•æ»šåŠ¨ã€‚</p>
<p><strong>è§£å†³ï¼š</strong> ä¸€å®šè¦åœ¨ <code>onBeforeUnmount</code> é‡Œæ¸…ç†ã€‚</p>
<h3 data-id="heading-25">å‘ 2ï¼šæ»šåŠ¨ä½ç½®æ¢å¤ä¸å‡†ç¡®</h3>
<p><code>window.scrollY</code> åœ¨æŸäº›è€æ—§æµè§ˆå™¨æˆ–ç‰¹æ®Šæƒ…å†µä¸‹å¯èƒ½æ˜¯ <code>undefined</code>ã€‚</p>
<p><strong>è§£å†³ï¼š</strong> ä½¿ç”¨å…¼å®¹æ€§å†™æ³•ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> scrollY = <span class="hljs-variable language_">window</span>.<span class="hljs-property">scrollY</span> || <span class="hljs-variable language_">window</span>.<span class="hljs-property">pageYOffset</span> || <span class="hljs-variable language_">document</span>.<span class="hljs-property">documentElement</span>.<span class="hljs-property">scrollTop</span> || <span class="hljs-number">0</span>;
</code></pre>
<h3 data-id="heading-26">å‘ 3ï¼š100vh åœ¨ iOS ä¸Šä¸é è°±</h3>
<p>iOS Safari çš„ <code>100vh</code> æ˜¯ä¸€ä¸ª"ç†æƒ³å€¼"ï¼ŒåŒ…å«äº†åœ°å€æ çš„é«˜åº¦ã€‚å½“åœ°å€æ æ”¶èµ·æˆ–è½¯é”®ç›˜å¼¹å‡ºæ—¶ï¼Œå®é™…å¯è§†åŒºåŸŸä¼šå˜åŒ–ï¼Œä½† <code>100vh</code> ä¸å˜ã€‚</p>
<p><strong>è§£å†³ï¼š</strong> ä½¿ç”¨ <code>100dvh</code>ï¼ˆåŠ¨æ€è§†å£é«˜åº¦ï¼‰ï¼Œä½†è¦æ³¨æ„å…¼å®¹æ€§ï¼š</p>
<ul>
<li>iOS 15.4+</li>
<li>Chrome 108+</li>
<li>Firefox 101+</li>
</ul>
<p>å¯¹äºä¸æ”¯æŒçš„æµè§ˆå™¨ï¼Œå¯ä»¥ç”¨ JS åŠ¨æ€è®¡ç®—ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">setVh</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> vh = <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerHeight</span> * <span class="hljs-number">0.01</span>;
  <span class="hljs-variable language_">document</span>.<span class="hljs-property">documentElement</span>.<span class="hljs-property">style</span>.<span class="hljs-title function_">setProperty</span>(<span class="hljs-string">'--vh'</span>, <span class="hljs-string">`<span class="hljs-subst">${vh}</span>px`</span>);
};
<span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'resize'</span>, setVh);
</code></pre>
<h3 data-id="heading-27">å‘ 4ï¼šå¤šä¸ªå¼¹çª—åµŒå¥—</h3>
<p>å¦‚æœé¡µé¢ä¸Šæœ‰å¤šä¸ªå¼¹çª—ç»„ä»¶ï¼Œæ¯ä¸ªéƒ½è°ƒç”¨ <code>lockBodyScroll</code>ï¼Œä¼šäº’ç›¸è¦†ç›– <code>savedScrollY</code>ã€‚</p>
<p><strong>è§£å†³ï¼š</strong> ä½¿ç”¨å¼•ç”¨è®¡æ•°ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">let</span> lockCount = <span class="hljs-number">0</span>;
<span class="hljs-keyword">let</span> savedScrollY = <span class="hljs-number">0</span>;
<span class="hljs-keyword">let</span> savedBodyStyle = <span class="hljs-string">''</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title function_">lockBodyScroll</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">if</span> (lockCount === <span class="hljs-number">0</span>) {
    savedScrollY = <span class="hljs-variable language_">window</span>.<span class="hljs-property">scrollY</span> || <span class="hljs-number">0</span>;
    savedBodyStyle = <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-property">style</span>.<span class="hljs-property">cssText</span>;
    <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-property">style</span>.<span class="hljs-property">cssText</span> = <span class="hljs-string">`...`</span>;
  }
  lockCount++;
};

<span class="hljs-keyword">const</span> <span class="hljs-title function_">unlockBodyScroll</span> = (<span class="hljs-params"/>) =&gt; {
  lockCount--;
  <span class="hljs-keyword">if</span> (lockCount === <span class="hljs-number">0</span>) {
    <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-property">style</span>.<span class="hljs-property">cssText</span> = savedBodyStyle;
    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">scrollTo</span>(<span class="hljs-number">0</span>, savedScrollY);
  }
};
</code></pre>
<hr/>
<h2 data-id="heading-28">å»¶ä¼¸ï¼šå…¶ä»–è§£å†³æ–¹æ¡ˆ</h2>
<h3 data-id="heading-29">æ–¹æ¡ˆäºŒï¼šä½¿ç”¨ Visual Viewport API</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">adjustDialogPosition</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">window</span>.<span class="hljs-property">visualViewport</span>) {
    <span class="hljs-keyword">const</span> offsetY = <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerHeight</span> - <span class="hljs-variable language_">window</span>.<span class="hljs-property">visualViewport</span>.<span class="hljs-property">height</span>;
    dialogRef.<span class="hljs-property">value</span>.<span class="hljs-property">style</span>.<span class="hljs-property">transform</span> = <span class="hljs-string">`translateY(-<span class="hljs-subst">${offsetY / <span class="hljs-number">2</span>}</span>px)`</span>;
  }
};

<span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">window</span>.<span class="hljs-property">visualViewport</span>?.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'resize'</span>, adjustDialogPosition);
});

<span class="hljs-title function_">onBeforeUnmount</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">window</span>.<span class="hljs-property">visualViewport</span>?.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'resize'</span>, adjustDialogPosition);
});
</code></pre>
<p><strong>ä¼˜ç‚¹ï¼š</strong> ä¸éœ€è¦é”å®š bodyï¼Œæ›´"ä¼˜é›…"
<strong>ç¼ºç‚¹ï¼š</strong> éœ€è¦æŒç»­ç›‘å¬ï¼Œæœ‰æ€§èƒ½å¼€é”€ï¼›å¼¹çª—ä½ç½®ä¼šè·³åŠ¨</p>
<h3 data-id="heading-30">æ–¹æ¡ˆä¸‰ï¼šè½¯é”®ç›˜æ”¶èµ·åå†æ˜¾ç¤ºå¼¹çª—</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">showDialog</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-comment">// å…ˆè®©è¾“å…¥æ¡†å¤±ç„¦ï¼Œæ”¶èµ·è½¯é”®ç›˜</span>
  (<span class="hljs-variable language_">document</span>.<span class="hljs-property">activeElement</span> <span class="hljs-keyword">as</span> <span class="hljs-title class_">HTMLElement</span>)?.<span class="hljs-title function_">blur</span>();

  <span class="hljs-comment">// ç­‰å¾…è½¯é”®ç›˜æ”¶èµ·åŠ¨ç”»å®Œæˆ</span>
  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
    dialogVisible.<span class="hljs-property">value</span> = <span class="hljs-literal">true</span>;
  }, <span class="hljs-number">300</span>);
};
</code></pre>
<p><strong>ä¼˜ç‚¹ï¼š</strong> ç®€å•ç²—æš´ï¼Œç»•è¿‡é—®é¢˜
<strong>ç¼ºç‚¹ï¼š</strong> ç”¨æˆ·ä½“éªŒä¸å¥½ï¼Œæœ‰æ˜æ˜¾å»¶è¿Ÿ</p>
<hr/>
<h2 data-id="heading-31">æ€»ç»“</h2>
<p>è¿™ä¸ªé—®é¢˜æœ¬è´¨ä¸Šæ˜¯ <strong>iOS WebKit çš„ viewport å¤„ç†æœºåˆ¶</strong> å’Œ <strong><code>position: fixed</code> å®šä½</strong> çš„å†²çªã€‚</p>
<p>å…³é”®ç‚¹ï¼š</p>
<ol>
<li>iOS Safari è½¯é”®ç›˜å¼¹å‡ºæ—¶åªæ”¹å˜ Visual Viewportï¼Œä¸æ”¹å˜ Layout Viewport</li>
<li><code>position: fixed</code> æ ¹æ® Layout Viewport è®¡ç®—ä½ç½®ï¼Œä½†æ¸²æŸ“åœ¨ Visual Viewport</li>
<li>é¡µé¢åˆ‡æ¢æ—¶æ»šåŠ¨çŠ¶æ€ç´¯ç§¯ï¼ŒåŠ å‰§äº†åç§»</li>
</ol>
<p>è§£å†³æ–¹æ¡ˆçš„æ ¸å¿ƒå°±ä¸€å¥è¯ï¼š<strong>å¼¹çª—æ˜¾ç¤ºæ—¶é”å®š body æ»šåŠ¨ï¼Œå…³é—­æ—¶æ¢å¤</strong>ã€‚</p>
<p>è¿™ä¸æ˜¯ bugï¼Œæ˜¯ Apple çš„"è®¾è®¡é€‰æ‹©"ã€‚ä½œä¸ºå¼€å‘è€…ï¼Œæˆ‘ä»¬åªèƒ½è§æ‹›æ‹†æ‹›ã€‚</p>
<p>å¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¸®åˆ°é‡åˆ°åŒæ ·é—®é¢˜çš„æœ‹å‹ï¼Œå°‘èµ°ç‚¹å¼¯è·¯ã€‚</p>
<hr/>
<p><em>å‚è€ƒèµ„æ–™ï¼š</em></p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fbugs.webkit.org%2Fshow_bug.cgi%3Fid%3D141832" target="_blank" title="https://bugs.webkit.org/show_bug.cgi?id=141832" ref="nofollow noopener noreferrer">WebKit Bug #141832: position:fixed and virtual keyboard</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FAPI%2FVisual_Viewport_API" target="_blank" title="https://developer.mozilla.org/en-US/docs/Web/API/Visual_Viewport_API" ref="nofollow noopener noreferrer">MDN: Visual Viewport API</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FCSS%2Flength%23dynamic_viewport_units" target="_blank" title="https://developer.mozilla.org/en-US/docs/Web/CSS/length#dynamic_viewport_units" ref="nofollow noopener noreferrer">MDN: CSS length - Dynamic viewport units</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.quirksmode.org%2Fmobile%2Fviewports2.html" target="_blank" title="https://www.quirksmode.org/mobile/viewports2.html" ref="nofollow noopener noreferrer">A tale of two viewports</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdevelopers.google.com%2Fweb%2Ffundamentals%2Fperformance%2Frendering" target="_blank" title="https://developers.google.com/web/fundamentals/performance/rendering" ref="nofollow noopener noreferrer">Google Developers: Rendering Performance</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç©è½¬ Clawdbot æ¥å…¥ Discord ä¿å§†çº§æ•™ç¨‹]]></title>    <link>https://juejin.cn/post/7602991346585075746</link>    <guid>https://juejin.cn/post/7602991346585075746</guid>    <pubDate>2026-02-05T08:48:31.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602991346585075746" data-draft-id="7602916013878296591" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç©è½¬ Clawdbot æ¥å…¥ Discord ä¿å§†çº§æ•™ç¨‹"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-02-05T08:48:31.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ·±åœ³è”“å»¶ç§‘æŠ€"/> <meta itemprop="url" content="https://juejin.cn/user/1919099566570249"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç©è½¬ Clawdbot æ¥å…¥ Discord ä¿å§†çº§æ•™ç¨‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1919099566570249/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ·±åœ³è”“å»¶ç§‘æŠ€
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-05T08:48:31.000Z" title="Thu Feb 05 2026 08:48:31 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-05
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ç©è½¬ Clawdbot æ¥å…¥ Discord ä¿å§†çº§æ•™ç¨‹</h2>
<h3 data-id="heading-1">å‰è¨€</h3>
<p>Clawdbotï¼ˆåŸ Moltbotï¼‰æ˜¯ä¸€æ¬¾å¼ºå¤§çš„ AI åŠ©æ‰‹æ¡†æ¶ï¼Œæ”¯æŒé€šè¿‡æ’ä»¶æ‰©å±•å„ç§åŠŸèƒ½ã€‚æœ¬æ–‡å°†è¯¦ç»†ä»‹ç»å¦‚ä½•å°† Clawdbot æ¥å…¥ Discordï¼Œå®ç°é€šè¿‡ Discord é¢‘é“æˆ–ç§èŠä¸ AI åŠ©æ‰‹äº¤äº’ã€‚</p>
<p>æœ¬æ•™ç¨‹çš„æ ¸å¿ƒæ˜¯ä½¿ç”¨ <strong>clawdbot-discord-proxy</strong> æ’ä»¶ï¼Œè¯¥æ’ä»¶æ”¯æŒé€šè¿‡ä»£ç†è¿æ¥ Discordï¼Œç‰¹åˆ«é€‚åˆå¤§é™†åœ°åŒºç”¨æˆ·ã€‚</p>
<h3 data-id="heading-2">ä¸€ã€å‰ç½®å‡†å¤‡</h3>
<ol start="0">
<li><strong>å·²éƒ¨ç½² Clawdbot çš„äº‘æœåŠ¡å™¨</strong>ï¼ˆNode.js â‰¥ 22ï¼Œå·²å®‰è£… Clawdbotï¼‰</li>
<li><strong>Discord è´¦å·</strong>ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fdiscord.com%2Fregister" target="_blank" title="https://discord.com/register" ref="nofollow noopener noreferrer">æ³¨å†Œåœ°å€</a>ï¼‰</li>
<li><strong>äº‘æœåŠ¡å™¨å·²é…ç½®æµ·å¤–ä»£ç†</strong>ï¼ˆèƒ½è®¿é—® Discord APIï¼‰</li>
</ol>
<h3 data-id="heading-3">äºŒã€å®‰è£… clawdbot-discord-proxy æ’ä»¶</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1. å…‹éš†é¡¹ç›®</span>
git <span class="hljs-built_in">clone</span> https://github.com/Terendelev/clawdbot-discord-proxy.git
<span class="hljs-built_in">cd</span> clawdbot-discord-proxy
â€‹
<span class="hljs-comment"># 2. å®‰è£…ä¾èµ–å¹¶ç¼–è¯‘</span>
npm install
npm run build
â€‹
<span class="hljs-comment"># 3. å¤åˆ¶åˆ° Clawdbot æ’ä»¶ç›®å½•</span>
<span class="hljs-built_in">cp</span> -r ./ ~/.clawdbot/extensions/clawdbot-discord-proxy/
â€‹
<span class="hljs-comment"># 4. é‡å¯ Gateway //å¦‚æœå¤±è´¥è¯·å…ˆå¤åˆ¶é…ç½®æ–‡ä»¶</span>
clawdbot gateway restart
</code></pre>
<h3 data-id="heading-4">ä¸‰ã€åˆ›å»º Discord Bot</h3>
<ol start="0">
<li>
<p>æ‰“å¼€ <a href="https://link.juejin.cn?target=https%3A%2F%2Fdiscord.com%2Fdevelopers%2Fapplications" target="_blank" title="https://discord.com/developers/applications" ref="nofollow noopener noreferrer">Discord å¼€å‘è€…å¹³å°</a></p>
</li>
<li>
<p>ç‚¹å‡» <strong>New Application</strong>ï¼Œè¾“å…¥ Bot åç§°ï¼ˆå¦‚ Clawdbot-AIï¼‰</p>
</li>
<li>
<p>ç‚¹å‡»å·¦ä¾§ <strong>Bot</strong> â†’ <strong>Add Bot</strong>ï¼Œç¡®è®¤åˆ›å»º Bot</p>
</li>
<li>
<p>å¤åˆ¶ <strong>Token</strong>ï¼ˆç‚¹å‡» Reset Token ç”Ÿæˆï¼Œå¦¥å–„ä¿å­˜ï¼‰</p>
</li>
<li>
<p>å¼€å¯å…³é”®æƒé™ï¼š</p>
<ul>
<li><strong>MESSAGE CONTENT INTENT</strong>ï¼ˆè¯»å–æ¶ˆæ¯å†…å®¹ï¼‰</li>
<li><strong>SERVER MEMBERS INTENT</strong>ï¼ˆå¯é€‰ï¼‰</li>
</ul>
</li>
</ol>
<h3 data-id="heading-5">å››ã€é…ç½® Bot æƒé™</h3>
<ol start="0">
<li>
<p>å·¦ä¾§ç‚¹å‡» <strong>OAuth2</strong> â†’ <strong>URL Generator</strong></p>
</li>
<li>
<p>å‹¾é€‰æƒé™ï¼š</p>
<ul>
<li><strong>Scopes</strong>: <code>bot</code> + <code>applications.commands</code></li>
<li><strong>Bot Permissions</strong>: <code>Send Messages</code>, <code>Read Message History</code>, <code>Embed Links</code>, <code>Use Slash Commands</code></li>
</ul>
</li>
<li>
<p>å¤åˆ¶ç”Ÿæˆçš„ Invite Linkï¼Œåœ¨æµè§ˆå™¨æ‰“å¼€ï¼Œå°† Bot é‚€è¯·åˆ°æœåŠ¡å™¨</p>
</li>
</ol>
<h3 data-id="heading-6">äº”ã€é…ç½® Clawdbot</h3>
<p>ç¼–è¾‘ <code>~/.clawdbot/clawdbot.json</code>ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
 Â <span class="hljs-attr">"channels"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
 Â  Â <span class="hljs-attr">"clawdbot-discord-proxy"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
 Â  Â  Â <span class="hljs-attr">"accounts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
 Â  Â  Â  Â <span class="hljs-attr">"default"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
 Â  Â  Â  Â  Â <span class="hljs-attr">"token"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"YOUR_DISCORD_BOT_TOKEN"</span><span class="hljs-punctuation">,</span>
 Â  Â  Â  Â  Â <span class="hljs-attr">"enabled"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
 Â  Â  Â  Â  Â <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Clawdbot Discord"</span>
 Â  Â  Â   <span class="hljs-punctuation">}</span>
 Â  Â   <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
 Â  Â  Â <span class="hljs-attr">"proxyConfig"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
 Â  Â  Â  Â <span class="hljs-attr">"httpUrl"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"http://PROXY_IP:HTTP_PORT"</span><span class="hljs-punctuation">,</span>
 Â  Â  Â  Â <span class="hljs-attr">"httpsUrl"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"http://PROXY_IP:HTTP_PORT"</span><span class="hljs-punctuation">,</span>
 Â  Â  Â  Â <span class="hljs-attr">"wsUrl"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"socks5://PROXY_IP:SOCKS_PORT"</span><span class="hljs-punctuation">,</span>
 Â  Â  Â  Â <span class="hljs-attr">"wssUrl"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"socks5://PROXY_IP:SOCKS_PORT"</span><span class="hljs-punctuation">,</span>
 Â  Â  Â  Â <span class="hljs-attr">"noProxy"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"localhost"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"127.0.0.1"</span><span class="hljs-punctuation">]</span>
 Â  Â   <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
 Â  Â  Â <span class="hljs-attr">"pluralkit"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
 Â  Â  Â  Â <span class="hljs-attr">"enabled"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span>
 Â  Â   <span class="hljs-punctuation">}</span>
 Â   <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
 Â <span class="hljs-attr">"plugins"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
 Â  Â <span class="hljs-attr">"entries"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
 Â  Â  Â <span class="hljs-attr">"clawdbot-discord-proxy"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
 Â  Â  Â  Â <span class="hljs-attr">"enabled"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span>
 Â  Â   <span class="hljs-punctuation">}</span>
 Â   <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h4 data-id="heading-7">é…ç½®è¯´æ˜</h4>

























<table><thead><tr><th>é…ç½®é¡¹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>token</code></td><td>Discord Bot Token</td></tr><tr><td><code>httpUrl</code> / <code>httpsUrl</code></td><td>HTTP/HTTPS ä»£ç†åœ°å€</td></tr><tr><td><code>wsUrl</code> / <code>wssUrl</code></td><td>SOCKS5 ä»£ç†åœ°å€</td></tr><tr><td><code>pluralkit.enabled</code></td><td>æ˜¯å¦å¯ç”¨ PluralKit æ”¯æŒ</td></tr></tbody></table>
<h3 data-id="heading-8">å…­ã€å¯åŠ¨ Gateway</h3>
<pre><code class="hljs">clawdbot gateway Â restart
</code></pre>
<h3 data-id="heading-9">ä¸ƒã€åŠŸèƒ½ç‰¹æ€§</h3>
<ul>
<li><strong>WebSocket Gateway</strong> - é€šè¿‡ä»£ç†è¿æ¥ Discord å®æ—¶ç½‘å…³</li>
<li><strong>REST API</strong> - å®Œæ•´çš„ Discord REST API å°è£…</li>
<li><strong>ä»£ç†æ”¯æŒ</strong> - HTTP/HTTPS å’Œ SOCKS5 ä»£ç†</li>
<li><strong>PluralKit æ”¯æŒ</strong> - è‡ªåŠ¨è¯†åˆ«ä»£ç†æ¶ˆæ¯</li>
</ul>
<h3 data-id="heading-10">å…«ã€å¸¸è§é—®é¢˜</h3>
<h4 data-id="heading-11">1. Gateway è¿æ¥è¶…æ—¶</h4>
<ul>
<li>æ£€æŸ¥ SOCKS5 ä»£ç†æ˜¯å¦æ­£å¸¸è¿è¡Œ</li>
<li>éªŒè¯ Bot Token æ˜¯å¦æœ‰æ•ˆ</li>
<li>ç¡®ä¿é˜²ç«å¢™å…è®¸ WebSocket è¿æ¥</li>
</ul>
<h4 data-id="heading-12">2. æ¶ˆæ¯å‘é€å¤±è´¥</h4>
<ul>
<li>æ£€æŸ¥ Bot æ˜¯å¦æœ‰å‘é€æ¶ˆæ¯æƒé™</li>
<li>ç¡®è®¤ç›®æ ‡ç”¨æˆ·å·²æœ‰ä¸ Bot çš„ DM é¢‘é“</li>
<li>æŸ¥çœ‹æ—¥å¿—ï¼š<code>tail -50 /tmp/clawdbot/clawdbot-*.log</code></li>
</ul>
<h4 data-id="heading-13">3. ä»£ç†é…ç½®ä¸ç”Ÿæ•ˆ</h4>
<ul>
<li>ç¡®è®¤ä»£ç†åœ°å€å’Œç«¯å£æ­£ç¡®</li>
<li>æ£€æŸ¥ <code>noProxy</code> åˆ—è¡¨æ˜¯å¦åŒ…å«å¿…è¦åœ°å€</li>
</ul>
<h3 data-id="heading-14">ä¹ã€ç›¸å…³é“¾æ¥</h3>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FTerendelev%2Fclawdbot-discord-proxy" target="_blank" title="https://github.com/Terendelev/clawdbot-discord-proxy" ref="nofollow noopener noreferrer">GitHub ä»“åº“</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.clawd.bot" target="_blank" title="https://docs.clawd.bot" ref="nofollow noopener noreferrer">Clawdbot æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdiscord.com%2Fdevelopers%2Fapplications" target="_blank" title="https://discord.com/developers/applications" ref="nofollow noopener noreferrer">Discord Developer Portal</a></li>
</ul>
<hr/>
<p><em>æœ¬æ–‡ç”± Clawdbot ç¤¾åŒºè´¡çŒ®</em></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ScrapeGraphAIï¼šåƒå¯¹è¯ä¸€æ ·æå–ç¤¾äº¤åª’ä½“æ•°æ®ï¼ˆæ— éœ€æ‰‹åŠ¨ç»´æŠ¤è§£æè§„åˆ™ï¼‰]]></title>    <link>https://juejin.cn/post/7602935146707566638</link>    <guid>https://juejin.cn/post/7602935146707566638</guid>    <pubDate>2026-02-05T08:47:30.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602935146707566638" data-draft-id="7603160727717593139" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ScrapeGraphAIï¼šåƒå¯¹è¯ä¸€æ ·æå–ç¤¾äº¤åª’ä½“æ•°æ®ï¼ˆæ— éœ€æ‰‹åŠ¨ç»´æŠ¤è§£æè§„åˆ™ï¼‰"/> <meta itemprop="keywords" content="GitHub,çˆ¬è™«"/> <meta itemprop="datePublished" content="2026-02-05T08:47:30.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="AIé¦–å¸­æƒ…æŠ¥å‘˜_é˜¿å¸ƒ"/> <meta itemprop="url" content="https://juejin.cn/user/4114839354741274"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ScrapeGraphAIï¼šåƒå¯¹è¯ä¸€æ ·æå–ç¤¾äº¤åª’ä½“æ•°æ®ï¼ˆæ— éœ€æ‰‹åŠ¨ç»´æŠ¤è§£æè§„åˆ™ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4114839354741274/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    AIé¦–å¸­æƒ…æŠ¥å‘˜_é˜¿å¸ƒ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-05T08:47:30.000Z" title="Thu Feb 05 2026 08:47:30 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-05
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/463c5e151c8c42adb010f88064f11756~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnpppbluK3mg4XmiqXlkZhf6Zi_5biD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770886052&amp;x-signature=NXU%2BsgmvywhecCnZA0r6ztdrlGQ%3D" alt="image" loading="lazy"/> åœ¨ç¤¾äº¤åª’ä½“æ•°æ®é‡‡é›†é¢†åŸŸï¼Œä¼ ç»Ÿçš„çˆ¬è™«æ–¹æ¡ˆæ­£é¢ä¸´ä¸¥å³»æŒ‘æˆ˜ã€‚åŠ¨æ€åŠ è½½ã€é¢‘ç¹æ”¹ç‰ˆä»¥åŠå¤æ‚çš„åçˆ¬æœºåˆ¶ï¼Œä½¿å¾—ç»´æŠ¤ XPath æˆ– CSS é€‰æ‹©å™¨çš„æˆæœ¬æé«˜ã€‚ScrapeGraphAI å¼•å…¥äº†â€œLLM + å›¾é€»è¾‘â€æ¶æ„ï¼Œè¯•å›¾å°†çˆ¬è™«ä»â€œæ‰‹å·¥ç¼–å†™è§„åˆ™â€è½¬å‘â€œè¯­ä¹‰åŒ–è‡ªåŠ¨æå–â€ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€ ç¤¾äº¤åª’ä½“çˆ¬è™«çš„å·¥ç¨‹ç—›ç‚¹</h2>
<p>ç¤¾äº¤åª’ä½“å¹³å°ï¼ˆå¦‚ Instagramã€LinkedInã€Redditï¼‰çš„æ•°æ®é‡‡é›†ä¸»è¦å­˜åœ¨ä»¥ä¸‹æŠ€æœ¯ç“¶é¢ˆï¼š</p>
<ol>
<li><strong>è§£æé€»è¾‘ææ˜“å¤±æ•ˆ</strong>ï¼šç¤¾äº¤å¹³å°é¢‘ç¹è¿›è¡Œ A/B æµ‹è¯•æˆ– UI æ”¹ç‰ˆï¼Œä»»ä½• DOM ç»“æ„çš„å¾®è°ƒéƒ½ä¼šå¯¼è‡´ä¼ ç»Ÿçˆ¬è™«å´©æºƒã€‚</li>
<li><strong>æ·±åº¦ä¾èµ– JS æ¸²æŸ“</strong>ï¼šå†…å®¹å¤šç”±å¼‚æ­¥è¯·æ±‚åŠ è½½ï¼Œç®€å•çš„ HTML æŠ“å–åªèƒ½æ‹¿åˆ°ç©ºç™½å£³æ–‡ä»¶ã€‚</li>
<li><strong>é£æ§é—¨æ§›é«˜</strong>ï¼šé«˜é¢‘è®¿é—®ææ˜“è§¦å‘ IP å°ç¦ã€éªŒè¯ç æˆ–è¡Œä¸ºæ£€æµ‹ã€‚</li>
<li><strong>åˆè§„æ€§é£é™©</strong>ï¼šToSï¼ˆæœåŠ¡æ¡æ¬¾ï¼‰é™åˆ¶ä¸¥æ ¼ï¼Œéå…¬å¼€æ•°æ®çš„é‡‡é›†å­˜åœ¨æ³•å¾‹çº¢çº¿ã€‚</li>
</ol>
<p>ScrapeGraphAI é€šè¿‡ LLM è‡ªåŠ¨æ¨æ–­é¡µé¢ç»“æ„ï¼Œç”¨æˆ·åªéœ€æè¿°â€œæƒ³è¦ä»€ä¹ˆâ€ï¼Œæ— éœ€å…³å¿ƒâ€œæ•°æ®åœ¨å“ªâ€ã€‚</p>
<hr/>
<h2 data-id="heading-1">äºŒã€ æ ¸å¿ƒæ¶æ„ä¸åŠŸèƒ½æ¨¡å—</h2>
<p>ScrapeGraphAI çš„æ ¸å¿ƒåœ¨äºå°†çˆ¬å–æµç¨‹æŠ½è±¡ä¸º<strong>æœ‰å‘å›¾ï¼ˆDirect Graphï¼‰</strong> ï¼Œæ¯ä¸ªèŠ‚ç‚¹è´Ÿè´£æŠ“å–ã€æ¸…æ´—ã€æ¨ç†æˆ–éªŒè¯ã€‚</p>
<h3 data-id="heading-2">1. æ ¸å¿ƒç»„ä»¶æ‹“æ‰‘</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fd9ecf8614fe4bfbb0aea78bc09a741c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnpppbluK3mg4XmiqXlkZhf6Zi_5biD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770886052&amp;x-signature=ZJL5RNeRt%2FAo2ACeMegJGjV2Htw%3D" alt="image" loading="lazy"/></p>
<h3 data-id="heading-3">2. ä¸»è¦åŠŸèƒ½ç±»</h3>
<ul>
<li><strong>SmartScraperGraph</strong>ï¼šå•é¡µé¢æ™ºèƒ½æå–ï¼Œé€‚åˆç²¾ç¡®é‡‡é›†ç‰¹å®šè´¦å·èµ„æ–™ã€‚</li>
<li><strong>SmartScraperMultiGraph</strong>ï¼šå¤šé¡µé¢å¹¶å‘æå–ï¼Œé€‚ç”¨äºæ‰¹é‡é‡‡é›†å¸–å­æˆ–è¯é¢˜ã€‚</li>
<li><strong>SearchGraph</strong>ï¼šåŸºäºæœç´¢å…³é”®è¯è‡ªåŠ¨å¯»æ‰¾æºå¹¶æå–ä¿¡æ¯ã€‚</li>
<li><strong>ScriptCreatorGraph</strong>ï¼šè‡ªåŠ¨ç”Ÿæˆå¯ç‹¬ç«‹è¿è¡Œçš„ Python çˆ¬è™«è„šæœ¬ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-4">ä¸‰ã€ ç¯å¢ƒéƒ¨ç½²ä¸å¿«é€Ÿä¸Šæ‰‹</h2>
<p>ScrapeGraphAI æ”¯æŒ<strong>æœ¬åœ°å¼€æºåº“</strong>ä¸<strong>äº‘ç«¯ API</strong> ä¸¤ç§æ¥å…¥æ¨¡å¼ã€‚</p>
<h3 data-id="heading-5">1. æœ¬åœ°å¼€æºåº“å®‰è£…</h3>
<p>æœ¬åœ°æ¨¡å¼é€‚åˆéœ€è¦æ·±åº¦è‡ªå®šä¹‰é€»è¾‘æˆ–è¿½æ±‚ä½æˆæœ¬çš„åœºæ™¯ã€‚</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å®‰è£…æ ¸å¿ƒåº“</span>
pip install scrapegraphai

<span class="hljs-comment"># å®‰è£…æµè§ˆå™¨å†…æ ¸ï¼ˆå¤„ç† JS æ¸²æŸ“ï¼‰</span>
playwright install
</code></pre>
<h3 data-id="heading-6">2. é…ç½®æœ¬åœ° LLM (Ollama)</h3>
<p>è‹¥éœ€å®Œå…¨æœ¬åœ°åŒ–è¿è¡Œï¼Œå¯é…åˆ Ollama ä½¿ç”¨ï¼š</p>
<pre><code class="hljs language-makefile" lang="makefile">graph_config = {
    <span class="hljs-string">"llm"</span>: {
        <span class="hljs-string">"model"</span>: <span class="hljs-string">"ollama/mistral"</span>,
        <span class="hljs-string">"temperature"</span>: 0,
        <span class="hljs-string">"format"</span>: <span class="hljs-string">"json"</span>,
        <span class="hljs-string">"base_url"</span>: <span class="hljs-string">"http://localhost:11434"</span>
    },
    <span class="hljs-string">"embeddings"</span>: {
        <span class="hljs-string">"model"</span>: <span class="hljs-string">"ollama/nomic-embed-text"</span>,
        <span class="hljs-string">"base_url"</span>: <span class="hljs-string">"http://localhost:11434"</span>
    }
}
</code></pre>
<hr/>
<h2 data-id="heading-7">å››ã€ ç¤¾äº¤åª’ä½“å®æˆ˜ï¼šInstagram ç›‘æ§æ–¹æ¡ˆ</h2>
<p>é’ˆå¯¹ç¤¾äº¤åª’ä½“åœºæ™¯ï¼Œæ¨èä½¿ç”¨äº‘ API é…åˆ SDKï¼Œä»¥é™ä½ç¯å¢ƒç»´æŠ¤æˆæœ¬å¹¶æé«˜ç¨³å®šæ€§ã€‚</p>
<h3 data-id="heading-8">1. å“ç‰Œç›‘æ§é€»è¾‘å®ç°</h3>
<p>é€šè¿‡ <code>scrapegraph-py</code> SDKï¼Œå¯ä»¥ç”¨æç®€çš„ä»£ç å®ç° Instagram å…¬å¼€èµ„æ–™æå–ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">from scrapegraph_py import Client

<span class="hljs-attr">client</span> = Client(api_key=<span class="hljs-string">"YOUR_API_KEY"</span>)

<span class="hljs-comment"># æå– Instagram ä¸ªäººèµ„æ–™åŠè¿‘æœŸäº’åŠ¨</span>
<span class="hljs-attr">response</span> = client.smartscraper(
    <span class="hljs-attr">website_url</span>=<span class="hljs-string">"https://www.instagram.com/target_username/"</span>,
    <span class="hljs-attr">user_prompt</span>=<span class="hljs-string">"æå–ç”¨æˆ·åã€ç²‰ä¸æ•°ã€å‘å¸–æ•°ä»¥åŠæœ€è¿‘ 3 æ¡å¸–å­çš„ç‚¹èµå’Œè¯„è®ºæ•°"</span>
)

<span class="hljs-attr">data</span> = response[<span class="hljs-string">"result"</span>]
</code></pre>
<h3 data-id="heading-9">2. é¢„æœŸè¾“å‡ºç»“æ„</h3>
<p>ç³»ç»Ÿä¼šè‡ªåŠ¨è¿”å›æ ¼å¼åŒ–çš„ JSON æ•°æ®ï¼Œæ— éœ€æ‰‹åŠ¨è§£æ HTMLï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"username"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"target_username"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"stats"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"followers"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2500000</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"posts_count"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">3427</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"recent_engagement"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span><span class="hljs-attr">"likes"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">45678</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"comments"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">892</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span><span class="hljs-attr">"likes"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">31200</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"comments"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">450</span><span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<hr/>
<h2 data-id="heading-10">äº”ã€ ç«å“æ¨ªå‘å¯¹æ¯”</h2>
<p>åœ¨ç¤¾äº¤åª’ä½“æ•°æ®è·å–è¿™ä¸€ç‰¹å®šç»´åº¦ï¼ŒScrapeGraphAI ä¸ä¸»æµæ–¹æ¡ˆçš„å·®å¼‚å¦‚ä¸‹ï¼š</p>















































<table><thead><tr><th>ç»´åº¦</th><th>ScrapeGraphAI</th><th>Apify</th><th>Bright Data</th><th>ScraperAPI</th></tr></thead><tbody><tr><td><strong>æ ¸å¿ƒé©±åŠ¨</strong></td><td><strong>LLM + è¯­ä¹‰ç†è§£</strong></td><td>ç¤¾åŒº Actors è„šæœ¬</td><td>ä»£ç†ç½‘ç»œ + æ•°æ®é›†</td><td>ä»£ç† + HTML æŠ“å–</td></tr><tr><td><strong>æŠ€æœ¯é—¨æ§›</strong></td><td>æä½ï¼ˆè‡ªç„¶è¯­è¨€ï¼‰</td><td>ä¸­ï¼ˆéœ€ç†è§£ Actor æ¨¡å‹ï¼‰</td><td>é«˜ï¼ˆé…ç½®å¤æ‚ï¼‰</td><td>ä¸­ï¼ˆéœ€è‡ªå†™è§£æå™¨ï¼‰</td></tr><tr><td><strong>è¾“å‡ºè´¨é‡</strong></td><td>ç»“æ„åŒ– JSON (è‡ªå®šä¹‰)</td><td>è§†è„šæœ¬è€Œå®š</td><td>æ ‡å‡†åŒ–æ•°æ®é›†</td><td>åŸå§‹ HTML</td></tr><tr><td><strong>AI èƒ½åŠ›</strong></td><td>åŸç”Ÿæ”¯æŒ</td><td>éœ€è‡ªè¡Œé›†æˆ</td><td>å¼±</td><td>æ— </td></tr><tr><td><strong>é€‚ç”¨åœºæ™¯</strong></td><td>å¿«é€ŸåŸå‹ã€çµæ´»å˜åŠ¨</td><td>å¤§è§„æ¨¡å·¥ç¨‹åŒ–çˆ¬å–</td><td>ä¼ä¸šçº§åˆè§„æ•°æ®é‡‡è´­</td><td>åŸºç¡€ä»£ç†éœ€æ±‚</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-11">å…­ã€ é¿å‘æŒ‡å—ä¸æœ€ä½³å®è·µ</h2>
<h3 data-id="heading-12">1. æŠ€æœ¯å®ç°è¦ç‚¹</h3>
<ul>
<li><strong>å¼ºåˆ¶ Schema çº¦æŸ</strong>ï¼šåœ¨ Prompt ä¸­æ˜ç¡®è¦æ±‚ JSON ç»“æ„ï¼Œé¿å… LLM è¾“å‡ºæ ¼å¼ä¸ç¨³å®šã€‚</li>
<li><strong>å¤„ç† JS æ¸²æŸ“</strong>ï¼šç¡®ä¿ <code>playwright</code> å·²æ­£ç¡®å®‰è£…ï¼ŒDebug é˜¶æ®µå¯å°† <code>headless</code> è®¾ä¸º <code>False</code> è§‚å¯ŸåŠ è½½è¿‡ç¨‹ã€‚</li>
<li><strong>é€Ÿç‡æ§åˆ¶</strong>ï¼šç¤¾äº¤å¹³å°å¯¹é«˜é¢‘è¯·æ±‚æå…¶æ•æ„Ÿï¼Œå»ºè®®å• IP è¯·æ±‚é—´éš” &gt; 1ç§’ï¼Œå¹¶é…åˆéšæœºå»¶è¿Ÿã€‚</li>
</ul>
<h3 data-id="heading-13">2. åˆè§„ä¸ä¼¦ç†</h3>
<ul>
<li><strong>ä»…æŠ“å–å…¬å¼€æ•°æ®</strong>ï¼šä¸¥ç¦æœªç»æˆæƒæŠ“å–ç§æœ‰æˆ–æ•æ„Ÿä¸ªäººä¿¡æ¯ã€‚</li>
<li><strong>éµå®ˆ robots.txt</strong>ï¼šåœ¨ç”Ÿäº§ç¯å¢ƒè¿è¡Œå‰ï¼Œåº”é¢„å…ˆæ£€æŸ¥ç›®æ ‡ç«™ç‚¹çš„æŠ“å–è®¸å¯ã€‚</li>
</ul>
<h3 data-id="heading-14">3. è½åœ°è·¯çº¿å›¾</h3>
<pre><code class="hljs"/></pre>
<h2 data-id="heading-15">æ€»ç»“</h2>
<p>ScrapeGraphAI é™ä½äº†ç¤¾äº¤åª’ä½“æ•°æ®è·å–çš„å·¥ç¨‹é—¨æ§›ã€‚å®ƒå°†çˆ¬è™«çš„é‡ç‚¹ä»â€œå¦‚ä½•ç¼–å†™è§£æä»£ç â€è½¬ç§»åˆ°äº†â€œå¦‚ä½•å®šä¹‰æ•°æ®éœ€æ±‚â€ã€‚å¯¹äºéœ€è¦å¿«é€Ÿæ„å»ºèˆ†æƒ…ç›‘æ§ã€KOL åˆ†ææˆ–ç«å“è·Ÿè¸ªåŸå‹çš„å›¢é˜Ÿï¼Œè¿™æ˜¯ä¸€ä¸ªæå…·æ€§ä»·æ¯”çš„åº•åº§å·¥å…·ã€‚</p>
<h4 data-id="heading-16">é¡¹ç›®åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FScrapeGraphAI%2FScrapegraph-ai" target="_blank" title="https://github.com/ScrapeGraphAI/Scrapegraph-ai" ref="nofollow noopener noreferrer">github.com/ScrapeGraphâ€¦</a></h4></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç«™åœ¨ Android çš„è§’åº¦ï¼ŒèŠèŠ Clean Architecture]]></title>    <link>https://juejin.cn/post/7603043152672358415</link>    <guid>https://juejin.cn/post/7603043152672358415</guid>    <pubDate>2026-02-05T08:54:04.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603043152672358415" data-draft-id="7599496293162287145" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç«™åœ¨ Android çš„è§’åº¦ï¼ŒèŠèŠ Clean Architecture"/> <meta itemprop="keywords" content="æ¶æ„"/> <meta itemprop="datePublished" content="2026-02-05T08:54:04.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿å¥å›"/> <meta itemprop="url" content="https://juejin.cn/user/2313804282603431"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç«™åœ¨ Android çš„è§’åº¦ï¼ŒèŠèŠ Clean Architecture
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2313804282603431/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿å¥å›
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-05T08:54:04.000Z" title="Thu Feb 05 2026 08:54:04 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-05
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong>Clean Architecture</strong>ï¼ˆæ•´æ´æ¶æ„ï¼‰æ˜¯ç”±è‘—åè½¯ä»¶å·¥ç¨‹å¸ˆ Robert C. Martin æå‡ºçš„ä¸€ç§è½¯ä»¶è®¾è®¡ç†å¿µå’Œæ¶æ„æ¨¡å¼ï¼Œå®ƒé€šè¿‡ç»“æ„åŒ–çš„æ–¹å¼ç»„ç»‡ä»£ç ï¼Œä½¿ Android åº”ç”¨å…·å¤‡é«˜åº¦å¯ç»´æŠ¤æ€§ï¼Œå¯æµ‹è¯•æ€§å’Œå¯æ‰©å±•æ€§ã€‚</p>
<h2 data-id="heading-0">æ ¸å¿ƒæ€æƒ³</h2>
<p><strong>Clean Architecture</strong> çš„æ ¸å¿ƒåŸåˆ™æ˜¯ä¾èµ–è§„åˆ™ï¼šæºä»£ç ä¾èµ–åªèƒ½æŒ‡å‘å†…å±‚ï¼Œå†…å±‚ä¸åº”è¯¥çŸ¥é“ä»»ä½•å…³äºå¤–å±‚çš„ä¸œè¥¿ã€‚</p>
<ul>
<li>é¢†åŸŸå±‚ï¼ˆdomainï¼‰-&gt; ä¸ä¾èµ–ä»»ä½•å¤–å±‚ï¼Œçº¯ Kotlin/Javaï¼Œé›¶ Android æ¡†æ¶ä¾èµ–ï¼Œåªå®šä¹‰ä¸šåŠ¡è§„åˆ™ï¼ŒUseCase å’Œ Repository æ¥å£ã€‚</li>
<li>æ•°æ®å±‚ï¼ˆdataï¼‰-&gt; ä¾èµ–é¢†åŸŸå±‚ï¼Œå®ç°é¢†åŸŸå±‚å®šä¹‰çš„ Repository æ¥å£ï¼Œä½†é¢†åŸŸå±‚ä¸çŸ¥å…¶å®ç°ã€‚</li>
<li>è¡¨ç°å±‚ï¼ˆpresentationï¼‰-&gt; ä¾èµ–é¢†åŸŸå±‚ï¼Œé€šè¿‡ UseCase è°ƒç”¨ä¸šåŠ¡é€»è¾‘ï¼Œç»ä¸ç›´æ¥ä¾èµ–æ•°æ®å±‚ã€‚</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d98264980bd9441f99223bebee0086a4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_5YGl5ZCb:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770886855&amp;x-signature=zo4APV2yN1Vp9oP%2FuFYllEEAvvQ%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-1">åˆ†å±‚ç»“æ„</h2>
<p>å…ˆæ¥çœ‹ä¸€ä¸‹ Android çš„é¡¹ç›®ç»“æ„</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b08fb6c4b62744479cf0e583f1877ba7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_5YGl5ZCb:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770886855&amp;x-signature=ETd6EtjiRSGJ5Cqs10VxTXWoJ34%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-2">é¢†åŸŸå±‚ - å†…å±‚</h3>
<p><strong>èŒè´£ä¸å®šä½</strong>ï¼š</p>
<ul>
<li>é¢†åŸŸå±‚æ˜¯æ ¸å¿ƒï¼Œæ‰¿è½½äº†é¡¹ç›®çœŸæ­£çš„ä¸šåŠ¡ä»·å€¼ã€‚</li>
<li>å®šä¹‰ä¸šåŠ¡è§„åˆ™å’Œä¸šåŠ¡æ¨¡å‹ï¼ŒåŒ…å«åº”ç”¨çš„æ ¸å¿ƒä¸šåŠ¡é€»è¾‘ã€‚</li>
<li>åªå…³å¿ƒè¦åšä»€ä¹ˆï¼Œè€Œä¸æ˜¯æ€ä¹ˆåšã€‚</li>
</ul>
<p><strong>ä¸»è¦ç»„æˆ</strong>ï¼š</p>
<ul>
<li>å®ä½“ï¼ˆmodelï¼‰ï¼šè¡¨ç¤ºä¸šåŠ¡æ ¸å¿ƒå¯¹è±¡ã€‚</li>
<li>ç”¨ä¾‹ï¼ˆusecaseï¼‰ï¼šå°è£…ç‰¹å®šä¸šåŠ¡è¡Œä¸ºã€‚</li>
<li>ä»“åº“æ¥å£ï¼ˆrepositoryï¼‰ï¼šå®šä¹‰æ•°æ®æ“ä½œçš„å¥‘çº¦ï¼Œä¸åŒ…å«å®ç°ã€‚</li>
</ul>
<p><strong>å…³é”®ç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li>çº¯ Kotlin/Java ä»£ç ï¼Œä¸ä¾èµ– Android æ¡†æ¶ã€‚</li>
<li>ä¸ä¾èµ–ä»»ä½•ç¬¬ä¸‰æ–¹åº“ã€‚</li>
<li>æ˜¯æ•´ä¸ªé¡¹ç›®ä¸­æœ€ç¨³å®šçš„ä¸€å±‚ã€‚</li>
</ul>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Post</span>(
    <span class="hljs-keyword">val</span> id: String,
    <span class="hljs-keyword">val</span> name: String
)
</code></pre>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">GetPostsUseCase</span> <span class="hljs-meta">@Inject</span> <span class="hljs-keyword">constructor</span>(
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> postRepository: PostRepository
) {
    <span class="hljs-keyword">suspend</span> <span class="hljs-keyword">operator</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">invoke</span><span class="hljs-params">(params: <span class="hljs-type">HashMap</span>&lt;<span class="hljs-type">String</span>, String&gt;)</span></span>: Result&lt;BaseResp&lt;List&lt;Post&gt;&gt;&gt; {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">try</span> {
            Result.success(postRepository.getPosts(params))
        } <span class="hljs-keyword">catch</span> (e: Exception) {
            Result.failure(e)
        }
    }
}
</code></pre>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">PostRepository</span> {
    <span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getPosts</span><span class="hljs-params">(params: <span class="hljs-type">HashMap</span>&lt;<span class="hljs-type">String</span>, String&gt;)</span></span>: BaseResp&lt;List&lt;Post&gt;&gt;
}
</code></pre>
<h3 data-id="heading-3">æ•°æ®å±‚ - ä¸­é—´å±‚</h3>
<p><strong>èŒè´£ä¸å®šä½</strong>ï¼š</p>
<ul>
<li>è´Ÿè´£æ•°æ®ä»å“ªé‡Œæ¥ï¼Œå¦‚ä½•è·å–ã€‚</li>
<li>å¤„ç†æ•°æ®æ£€ç´¢å’Œå­˜å‚¨ã€‚</li>
<li>å®ç°é¢†åŸŸå±‚å®šä¹‰çš„æ•°æ®è®¿é—®æ¥å£ã€‚</li>
</ul>
<p><strong>ä¸»è¦ç»„æˆ</strong>ï¼š</p>
<ul>
<li>æ•°æ®æºï¼ˆdatasourceï¼‰ï¼šæœ¬åœ°æ•°æ®æºæˆ–è¿œç¨‹æ•°æ®æº</li>
<li>ä»“åº“å®ç°ï¼ˆrepositoryï¼‰ï¼šåè°ƒä¸åŒæ•°æ®æºï¼Œå®ç°é¢†åŸŸå±‚å®šä¹‰çš„ Repository æ¥å£ï¼Œå¤„ç†å¼‚å¸¸ï¼Œå°†æŠ€æœ¯å¼‚å¸¸è½¬æ¢ä¸ºä¸šåŠ¡å¯ç†è§£çš„ç»“æœã€‚</li>
</ul>
<p><strong>å…³é”®ç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li>å¯ä»¥è‡ªç”±åˆ‡æ¢æ•°æ®æ¥æº</li>
<li>å˜åŒ–æœ€é¢‘ç¹çš„ä¸€å±‚</li>
<li>å¯æ ¹æ®éœ€æ±‚é€‰æ‹©ä¸åŒçš„æ•°æ®å­˜å‚¨æ–¹æ¡ˆ</li>
</ul>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">PostService</span> {
    <span class="hljs-meta">@GET(<span class="hljs-string">"/xzj/net/api/example/post"</span>)</span>
    <span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getPosts</span><span class="hljs-params">(<span class="hljs-meta">@QueryMap</span> params: <span class="hljs-type">HashMap</span>&lt;<span class="hljs-type">String</span>, String&gt;)</span></span>: BaseResp&lt;List&lt;Post&gt;&gt;
}
</code></pre>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">PostRepositoryImpl</span> <span class="hljs-meta">@Inject</span> <span class="hljs-keyword">constructor</span>(
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> postService: PostService
) : PostRepository {
    <span class="hljs-keyword">override</span> <span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getPosts</span><span class="hljs-params">(params: <span class="hljs-type">HashMap</span>&lt;<span class="hljs-type">String</span>, String&gt;)</span></span>: BaseResp&lt;List&lt;Post&gt;&gt; {
        <span class="hljs-keyword">return</span> postService.getPosts(params)
    }
}
</code></pre>
<h3 data-id="heading-4">è¡¨ç°å±‚ - å¤–å±‚</h3>
<p><strong>èŒè´£ä¸å®šä½</strong>ï¼š</p>
<ul>
<li>è´Ÿè´£ UI å±•ç¤ºå’Œç”¨æˆ·äº¤äº’ã€‚</li>
<li>å°†æ•°æ®è½¬æ¢ä¸ºç”¨æˆ·å¯æ„ŸçŸ¥çš„ç•Œé¢çŠ¶æ€ã€‚</li>
<li>ä¸åŒ…å«ä¸šåŠ¡è§„åˆ™ï¼Œåªè´Ÿè´£ç®¡ç† UIStateã€‚</li>
</ul>
<p><strong>ä¸»è¦ç»„æˆ</strong>ï¼š</p>
<ul>
<li>viewï¼šè§†å›¾ç»„ä»¶</li>
<li>ViewModelï¼šé€šè¿‡ usecase ä¸ é¢†åŸŸå±‚äº¤äº’</li>
<li>stateï¼šUI çŠ¶æ€</li>
</ul>
<p><strong>å…³é”®ç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li>é€šå¸¸ä½¿ç”¨ MVVM æˆ– MVI æ¨¡å¼ç»„ç»‡ä»£ç ã€‚</li>
<li>ä¸“æ³¨äº UI State ç®¡ç†ã€‚</li>
<li>å¯è½»æ¾æ›´æ¢ç”¨æˆ·ç•Œé¢æ¡†æ¶æˆ–è¿›è¡Œç•Œé¢ä¼˜åŒ–ï¼Œè€Œä¸å½±å“ä¸šåŠ¡é€»è¾‘ã€‚</li>
</ul>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PostListState</span>(
    <span class="hljs-keyword">val</span> posts: List&lt;Post&gt; = emptyList(),
    <span class="hljs-keyword">val</span> isLoading: <span class="hljs-built_in">Boolean</span> = <span class="hljs-literal">false</span>,
    <span class="hljs-keyword">val</span> error: String? = <span class="hljs-literal">null</span>
)
</code></pre>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@HiltViewModel</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">PostListViewModel</span> <span class="hljs-meta">@Inject</span> <span class="hljs-keyword">constructor</span>(
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> getPostsUseCase: GetPostsUseCase
) : ViewModel() {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> _state = MutableStateFlow(PostListState())
    <span class="hljs-keyword">val</span> state: StateFlow&lt;PostListState&gt; = _state.asStateFlow()

    <span class="hljs-keyword">init</span> {
        loadPosts()
    }

    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">loadPosts</span><span class="hljs-params">()</span></span> = viewModelScope.launch {
        _state.update { it.copy(isLoading = <span class="hljs-literal">true</span>) }
        <span class="hljs-keyword">val</span> params = hashMapOf(
            <span class="hljs-string">"param1"</span> to <span class="hljs-string">"param1"</span>,
            <span class="hljs-string">"param2"</span> to <span class="hljs-string">"param2"</span>
        )
        getPostsUseCase(params).onSuccess { posts -&gt;
            _state.update { it.copy(posts = posts.<span class="hljs-keyword">data</span>, isLoading = <span class="hljs-literal">false</span>) }
        }.onFailure { error -&gt;
            _state.update { it.copy(error = error.message, isLoading = <span class="hljs-literal">false</span>) }
        }
    }
}
</code></pre>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">PostListScreen</span><span class="hljs-params">(viewModel: <span class="hljs-type">PostListViewModel</span> = hiltViewModel()</span></span>) {
    <span class="hljs-keyword">val</span> state <span class="hljs-keyword">by</span> viewModel.state.collectAsState()

    <span class="hljs-keyword">when</span> {
        state.isLoading -&gt; CircularProgressIndicator()
        state.error != <span class="hljs-literal">null</span> -&gt; Text(<span class="hljs-string">"Error: <span class="hljs-subst">${state.error}</span>"</span>)
        <span class="hljs-keyword">else</span> -&gt; LazyColumn {
            items(state.posts) { post -&gt;
                Text(post.name, fontSize = <span class="hljs-number">20.</span>sp, color = Color.Red)
            }
        }
    }
}
</code></pre>
<p>Hilt é€šè¿‡ @HiltViewModel å’Œ hiltViewModel() è‡ªåŠ¨å¤„ç† ViewModel çš„ä¾èµ–æ³¨å…¥ã€‚åœ¨ Compose ä¸­ä½¿ç”¨ hiltViewModel() è·å– ViewModel å®ä¾‹ï¼Œç¡®ä¿ ViewModel åŠå…¶ä¾èµ–è¢«æ­£ç¡®åˆå§‹åŒ–ã€‚</p>
<h2 data-id="heading-5">Hilt ä¾èµ–æ³¨å…¥é…ç½®</h2>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@Module</span>
<span class="hljs-meta">@InstallIn(SingletonComponent::class)</span>
<span class="hljs-keyword">object</span> NetworkModule {

    <span class="hljs-meta">@Singleton</span>
    <span class="hljs-meta">@Provides</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">provideRetrofit</span><span class="hljs-params">()</span></span>: Retrofit {
        <span class="hljs-keyword">return</span> Retrofit.Builder()
            .baseUrl(BASE_URL)
            .addConverterFactory(GsonConverterFactory.create())
            .build()
    }

    <span class="hljs-meta">@Singleton</span>
    <span class="hljs-meta">@Provides</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">providePostService</span><span class="hljs-params">(retrofit: <span class="hljs-type">Retrofit</span>)</span></span>: PostService {
        <span class="hljs-keyword">return</span> retrofit.create(PostService::<span class="hljs-keyword">class</span>.java)
    }
}


<span class="hljs-meta">@Module</span>
<span class="hljs-meta">@InstallIn(SingletonComponent::class)</span>
<span class="hljs-keyword">object</span> AppModule {

    <span class="hljs-meta">@Singleton</span>
    <span class="hljs-meta">@Provides</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">providePostRepository</span><span class="hljs-params">(
        postService: <span class="hljs-type">PostService</span>
    )</span></span>: PostRepository {
        <span class="hljs-keyword">return</span> PostRepositoryImpl(postService)
    }

    <span class="hljs-meta">@Provides</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">provideGetPostsUseCase</span><span class="hljs-params">(
        postRepository: <span class="hljs-type">PostRepository</span>
    )</span></span>: GetPostsUseCase {
        <span class="hljs-keyword">return</span> GetPostsUseCase(postRepository)
    }
}
</code></pre>
<h2 data-id="heading-6">æ„ä¹‰ä½•åœ¨</h2>
<p>çœ‹åˆ°è¿™ï¼Œä½ ä»¬å¯èƒ½è¦åæ§½äº†ï¼Œå®ç°ä¸€ä¸ªåŠŸèƒ½è¦å»ºè¿™ä¹ˆå¤šå±‚ï¼Œè¿™ä¹ˆå¤šç±»ï¼Œä»£ç é‡å¤šè¿™ä¹ˆå¤šï¼Œä¸æ˜¯å¾’å¢å·¥ä½œé‡å—ï¼ŸçœŸçš„æœ‰æ„ä¹‰å—ï¼Ÿ</p>
<p>é¦–å…ˆï¼Œå¾’å¢å·¥ä½œé‡æ˜¯å®¢è§‚å­˜åœ¨çš„ï¼Œæ¯”å¦‚ä½ å®ç°ä¸€ä¸ªç®€å•çš„åŠŸèƒ½ - è·å–ç”¨æˆ·ä¿¡æ¯ï¼Œä½ éœ€è¦åˆ›å»ºé¢†åŸŸå±‚ï¼Œæ•°æ®å±‚ï¼Œè¡¨ç°å±‚ï¼Œè¿˜æœ‰å„ç§æ¥å£ä¸æ¥å£å®ç°ï¼Œå¯¹æ¯” â€œä¸€æŠŠæ¢­â€ å†™æ³•ï¼ˆActivity ç›´æ¥è°ƒç”¨æ–¹æ³•è·å–æ•°æ®ï¼‰ï¼Œä»£ç é‡å¯èƒ½è¦ç¿»ä¸‰å€ä»¥ä¸Šã€‚</p>
<p>å¾·å›½è‘—åå“²å­¦å®¶é»‘æ ¼å°”æ›¾è¯´è¿‡ï¼šå­˜åœ¨å³åˆç†ã€‚æ‰€ä»¥ï¼ŒClean Architecture æ—¢ç„¶å­˜åœ¨ï¼Œé‚£è‚¯å®šæ˜¯æœ‰æ„ä¹‰çš„ï¼å®ƒçš„æ„ä¹‰å°±åœ¨äºï¼šç”¨çŸ­æœŸæˆæœ¬æ¢é•¿æœŸæ”¶ç›Šã€‚</p>
<p>ä¸¾ä¸ªéœ€æ±‚å˜æ›´çš„ä¾‹å­å§ï¼Œå°±æ‹¿å¸¸è§çš„ç”¨æˆ·ä¿¡æ¯æ¥è¯´ï¼Œä¸€å¼€å§‹åªè¦æ±‚æ˜¾ç¤º user.nameï¼Œä½†æ˜¯å‡ å¤©åï¼Œäº§å“çªç„¶æ”¹ä¸»æ„äº†ï¼ŒVIP ç”¨æˆ·å¾—æ˜¾ç¤º VIP å’Œåå­—ã€‚</p>
<p>æŒ‰ç…§ â€œä¸€æŠŠæ¢­â€ çš„å†™æ³•ï¼Œè§„åˆ™æ•£è½åœ¨å„ä¸ª Composable ä¸­çš„ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">UserCard</span><span class="hljs-params">(user: <span class="hljs-type">User</span>)</span></span> {
    Card {
        <span class="hljs-comment">// ç¬¬ä¸€å¤„ï¼šä¸šåŠ¡è§„åˆ™ç›´æ¥å†™æ­»åœ¨ UI é‡Œï¼</span>
        Text(text = <span class="hljs-keyword">if</span> (user.isVip) <span class="hljs-string">"VIP: <span class="hljs-subst">${user.name}</span>"</span> <span class="hljs-keyword">else</span> user.name) 
    }
}

<span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">UserProfileHeader</span><span class="hljs-params">(user: <span class="hljs-type">User</span>)</span></span> {
    Column {
        <span class="hljs-comment">// ç¬¬äºŒå¤„ï¼è§„åˆ™é‡å¤</span>
        Text(text = <span class="hljs-keyword">if</span> (user.isVip) <span class="hljs-string">"VIP: <span class="hljs-subst">${user.name}</span>"</span> <span class="hljs-keyword">else</span> user.name, style = Title)
    }
}

<span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">SearchItem</span><span class="hljs-params">(user: <span class="hljs-type">User</span>)</span></span> {
    Row {
        <span class="hljs-comment">// ç¬¬ä¸‰å¤„ï¼æ”¹éœ€æ±‚æ—¶éœ€å…¨å±€æœç´¢æ›¿æ¢</span>
        Text(text = <span class="hljs-keyword">if</span> (user.isVip) <span class="hljs-string">"VIP: <span class="hljs-subst">${user.name}</span>"</span> <span class="hljs-keyword">else</span> user.name)
    }
}
</code></pre>
<p>å¦‚æœä½¿ç”¨ Clean Architecture çš„è¯ï¼Œåªéœ€ä¿®æ”¹ domain å±‚å³å¯ï¼Œå…¶æœ¬èº«å°±æ˜¯è§„åˆ™çš„é›†ä¸­ç®¡ç†ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">GetDisplayNameUseCase</span> { <span class="hljs-comment">//è§„åˆ™å”¯ä¸€æºå¤´ï¼</span>
    <span class="hljs-keyword">operator</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">invoke</span><span class="hljs-params">(user: <span class="hljs-type">User</span>)</span></span>: String =
        <span class="hljs-keyword">if</span> (user.isVip) <span class="hljs-string">"â­VIP: <span class="hljs-subst">${user.name}</span>"</span> <span class="hljs-keyword">else</span> user.name
        <span class="hljs-comment">// åªæ”¹è¿™é‡Œï¼</span>
}
</code></pre>
<p>åªéœ€ä¿®æ”¹ UseCaseï¼Œå…¶ä½™éƒ½ä¸ç”¨ä¿®æ”¹ï¼Œç®€ç›´ä¸è¦å¤ªä¼˜é›…ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@HiltViewModel</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">UserViewModel</span> <span class="hljs-meta">@Inject</span> <span class="hljs-keyword">constructor</span>(
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> getDisplayName: GetDisplayNameUseCase <span class="hljs-comment">// ä¾èµ–æ³¨å…¥</span>
) : ViewModel() {
    <span class="hljs-comment">// ViewModel åªè´Ÿè´£è°ƒç”¨è§„åˆ™ï¼Œä¸åŒ…å«è§„åˆ™æœ¬èº«ã€‚</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getDisplayName</span><span class="hljs-params">(user: <span class="hljs-type">User</span>)</span></span> = getDisplayName(user)
}
</code></pre>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">UserCard</span><span class="hljs-params">(user: <span class="hljs-type">User</span>, viewModel: <span class="hljs-type">UserViewModel</span> = hiltViewModel()</span></span>) {
    Card {
        <span class="hljs-comment">// Composable çº¯ç²¹åªå…³æ³¨æ˜¾ç¤ºä»€ä¹ˆï¼Œä¸å…³å¿ƒä¸ºä»€ä¹ˆè¿™æ ·æ˜¾ç¤ºã€‚</span>
        Text(text = viewModel.getDisplayName(user))
    }
}

<span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">UserProfileHeader</span><span class="hljs-params">(user: <span class="hljs-type">User</span>, viewModel: <span class="hljs-type">UserViewModel</span> = hiltViewModel()</span></span>) {
    Text(text = viewModel.getDisplayName(user), style = Title)
}

<span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">SearchItem</span><span class="hljs-params">(user: <span class="hljs-type">User</span>, viewModel: <span class="hljs-type">UserViewModel</span> = hiltViewModel()</span></span>) {
    Text(text = viewModel.getDisplayName(user))
}
</code></pre>
<p>ä¸‹æ¬¡äº§å“å†è¯´åŠ ä»€ä¹ˆå…¶ä»–ä¿¡æ¯çš„æ—¶å€™ï¼Œä½ åªéœ€å¾®ç¬‘æ‰“å¼€ UseCase å³å¯ï¼Œè€Œä¸ç”¨ç¿»éæ‰€æœ‰ Composableã€‚</p>
<p>ä½†ä¹Ÿä¸æ˜¯æ‰€æœ‰é¡¹ç›®éƒ½è¯¥ç”¨ï¼Œè€Œæ˜¯è¯¥ç”¨æ—¶å¿…é¡»ç”¨ï¼å¯¹äºå¤§å‹ä¸”éœ€æŒç»­è¿­ä»£çš„é¡¹ç›®ï¼Œæ¶æ„æ²»ç†æ˜¯å¿…ç„¶è¦æ±‚ï¼Œéšç€ä»£ç é‡å¢åŠ ï¼Œæ”¹åŠ¨æˆæœ¬ä¸æ–­ä¸Šå‡ï¼Œæ‰€ä»¥æ¯”è¾ƒé€‚ç”¨äº â€œä¸­å¤§å‹â€ï¼Œâ€œå›¢é˜Ÿåä½œâ€ï¼Œâ€œé«˜å¯é æ€§è¦æ±‚â€ çš„é¡¹ç›®ã€‚å¦‚æœä½ çš„é¡¹ç›®æœ¬èº«è§„æ¨¡ä¸å¤§ï¼Œä¹Ÿä¸éœ€è¦èŠ±é¢å¤–ç²¾åŠ›æ²»ç†æ¶æ„ï¼Œå¯¹äºå°è§„æ¨¡é¡¹ç›®ï¼Œå¼•å…¥ Clean Architecture å¯èƒ½ä¼šå¢åŠ å¼€å‘æˆæœ¬ï¼Œæ‰€ä»¥ä¸é€‚ç”¨ã€‚</p>
<blockquote>
<p>æ¶æ„ä¸æ˜¯ç‚«æŠ€ï¼Œè€Œæ˜¯ä¸ºæœªæ¥çš„è‡ªå·±å’Œå›¢é˜Ÿå‡è´Ÿï¼Œæˆ‘ä»¬ä¸èƒ½ â€œä¸ºäº†æ¶æ„è€Œæ¶æ„â€ï¼Œè‹¥é¡¹ç›®æ³¨å®š â€œä¸€æ¬¡æ€§â€ï¼Œè¯·å¤§èƒ†ç®€åŒ–ï¼Œæ•ˆç‡ä¼˜å…ˆï¼Œè‹¥é¡¹ç›®éœ€ â€œæ´»ä¸‹å»ã€é•¿å‡ºæ¥â€ï¼Œå°±å¾—æ¥å—çŸ­æœŸæˆæœ¬ï¼ŒæŠ•èµ„é•¿æœŸå¥åº·ã€‚Clean Architecture çš„ç²¾é«“å°±åœ¨äºå®ƒä¸æ‰¿è¯º â€œå†™å¾—æ›´å¿«â€ï¼Œä½†æ‰¿è¯º â€œæ”¹å¾—æ›´ç¨³â€ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¯¼å‡º git æäº¤è®°å½•çš„æ–‡ä»¶]]></title>    <link>https://juejin.cn/post/7602929352717369344</link>    <guid>https://juejin.cn/post/7602929352717369344</guid>    <pubDate>2026-02-05T08:54:24.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602929352717369344" data-draft-id="7602991346585092130" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¯¼å‡º git æäº¤è®°å½•çš„æ–‡ä»¶"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-02-05T08:54:24.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="jokerä¸¶ç‰§ç¾Šäºº"/> <meta itemprop="url" content="https://juejin.cn/user/4054654614250958"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¯¼å‡º git æäº¤è®°å½•çš„æ–‡ä»¶
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4054654614250958/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    jokerä¸¶ç‰§ç¾Šäºº
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-05T08:54:24.000Z" title="Thu Feb 05 2026 08:54:24 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-05
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">å‰è¨€</h3>
<blockquote>
<p>ä¸ºäº†æ–¹ä¾¿åœ¨çº¿ä¸Šç›´æ¥è¦†ç›–æ›´æ–°ï¼Œè€Œä¸ç”¨å•ä¸ªæ–‡ä»¶è¦†ç›–ï¼Œä»è€Œå‡å°‘æ›´æ–°é”™è¯¯ç‡ï¼Œæå‡æ›´æ–°æ•ˆç‡ã€‚</p>
<p>æ¯æ¬¡å‘ç‰ˆæ›´æ–°å‰ï¼Œéƒ½è¦æ•´ç†æœ€è¿‘ä¿®æ”¹çš„æ–‡ä»¶ï¼Œå¹¶æŒ‰ç…§æ–‡ä»¶åŸæœ‰ç›®å½•ç»“æ„æ”¾ç½®ã€‚</p>
<p>å½“æäº¤æ¬¡æ•°å¤šäº†åï¼Œæ“ä½œèµ·æ¥å°±éå¸¸çš„éº»çƒ¦ï¼›ä¸ºæ­¤ï¼Œå°±æƒ³ä½¿ç”¨è„šæœ¬ä¸€æ¬¡æ€§å¤„ç†è¯¥éœ€æ±‚ã€‚</p>
<p>ä»è€Œè¯ç”Ÿäº†è¿™ä¸ªè„šæœ¬ã€‚</p>
</blockquote>
<h3 data-id="heading-1">åŠŸèƒ½è¯´æ˜</h3>
<blockquote>
<p>å¯¼å‡º git æäº¤è®°å½•æ–‡ä»¶ï¼Œå¹¶æŒ‰ç…§æ–‡ä»¶åŸæœ‰ç›®å½•ç»“æ„æ”¾ç½®</p>
</blockquote>
<h3 data-id="heading-2">å¦‚ä½•ä½¿ç”¨</h3>
<ul>
<li>
<p>ä¿®æ”¹é¡¹ç›®ç›®å½•å…¬å…±å‰ç¼€ <code>PROJECT_PATH_PREFIX</code></p>
</li>
<li>
<p>ä¿®æ”¹å¯¼å‡ºç›®å½•å…¬å…±å‰ç¼€ <code>EXPORT_BASE</code></p>
</li>
<li>
<p>ä¿®æ”¹é¡¹ç›®é…ç½®ä¿¡æ¯ï¼Œå¯å¤šé¡¹ç›®å…±å­˜</p>
<blockquote>
<p>å…·ä½“ä¿¡æ¯è¯·æŸ¥çœ‹è„šæœ¬æ–‡ä»¶ä¸­çš„æ³¨é‡Šè¯´æ˜</p>
</blockquote>
<pre><code class="hljs language-shell" lang="shell">project "
    name='é¡¹ç›®A'
    path='projectA'
    commit_ids='fa5b485e0508ee0c054496d4c5822777ead86503 9232dcbaec77abbec5a0806692a50e36a162b57e'
<span class="hljs-meta prompt_"># </span><span class="bash">   start_time=<span class="hljs-string">'2023-10-01 09:00'</span></span>
<span class="hljs-meta prompt_"># </span><span class="bash">   end_time=<span class="hljs-string">'2023-10-15 18:00'</span></span>
"

project "
    name='é¡¹ç›®B'
    path='projectB'
    commit_ids=''
    start_time='2026-02-01 09:00'
    end_time=''
"
<span class="hljs-meta prompt_">
# </span><span class="bash">ç¤ºä¾‹ï¼šç»å¯¹è·¯å¾„ä¸”åªç”¨ start_time</span>
<span class="hljs-meta prompt_"># </span><span class="bash">project <span class="hljs-string">"</span></span>
<span class="hljs-meta prompt_"># </span><span class="bash"><span class="hljs-string">    name='å¤–éƒ¨é¡¹ç›®'</span></span>
<span class="hljs-meta prompt_"># </span><span class="bash"><span class="hljs-string">    path='/e/work/other-repo'</span></span>
<span class="hljs-meta prompt_"># </span><span class="bash"><span class="hljs-string">    start_time='yesterday'</span></span>
<span class="hljs-meta prompt_"># </span><span class="bash"><span class="hljs-string">"</span></span>
</code></pre>
</li>
<li>
<p>ä¿å­˜ï¼Œæ·»åŠ æ–‡ä»¶æ‰§è¡Œæƒé™</p>
</li>
<li>
<p>æ‰§è¡Œæ–‡ä»¶</p>
</li>
</ul>
<h3 data-id="heading-3">è„šæœ¬å†…å®¹</h3>
<blockquote>
<p>å¯ç›´æ¥ä½¿ç”¨</p>
</blockquote>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_">#</span><span class="bash">!/usr/bin/env bash</span>
set -e
<span class="hljs-meta prompt_">
#</span><span class="bash"><span class="hljs-comment">#################################################</span></span>
<span class="hljs-meta prompt_"># </span><span class="bash">ä¸€ã€å…¨å±€é…ç½®</span>
<span class="hljs-meta prompt_">#</span><span class="bash"><span class="hljs-comment">#################################################</span></span>
<span class="hljs-meta prompt_"># </span><span class="bash">é»˜è®¤ä»“åº“æ ¹ç›®å½•ï¼ˆWindows ç¯å¢ƒç¤ºä¾‹ï¼‰</span>
PROJECT_PATH_PREFIX="/d/www"
<span class="hljs-meta prompt_"># </span><span class="bash">å¯¼å‡ºç›®æ ‡æ ¹ç›®å½•</span>
EXPORT_BASE="/d/www/export-git-commit"
<span class="hljs-meta prompt_"># </span><span class="bash">æœ¬æ¬¡å¯¼å‡ºçš„æ—¶é—´æˆ³æ–‡ä»¶å¤¹</span>
EXPORT_TIME=$(date +"%Y%m%d_%H%M%S")
<span class="hljs-meta prompt_">
#</span><span class="bash"><span class="hljs-comment">#################################################</span></span>
<span class="hljs-meta prompt_"># </span><span class="bash">äºŒã€æ ¸å¿ƒé€»è¾‘å¼•æ“</span>
<span class="hljs-meta prompt_">#</span><span class="bash"><span class="hljs-comment">#################################################</span></span>

project() {
    # åœ¨å­ Shell ä¸­è¿è¡Œï¼Œç¡®ä¿å˜é‡éš”ç¦»
    (
        # åˆå§‹åŒ–å±€éƒ¨å˜é‡ï¼Œé˜²æ­¢è¯»å–åˆ°ä¸Šä¸€ä¸ªé¡¹ç›®çš„é…ç½®
        local name=""
        local path=""
        local commit_ids=""
        local start_time=""
        local end_time=""

        # ã€æ ¸å¿ƒä¿®æ­£ã€‘è§£æä¼ å…¥çš„é…ç½®å­—ç¬¦ä¸²
        eval "$1"

        # 1. åŸºç¡€æ ¡éªŒ
        if [[ -z "$name" || -z "$path" ]]; then
            echo -e "\033[31mâŒ é…ç½®é”™è¯¯: name æˆ– path ä¸èƒ½ä¸ºç©º\033[0m"
            return
        fi

        # 2. è·¯å¾„æ‹¼æ¥é€»è¾‘
        local REPO_PATH
        if [[ "$path" == /* ]]; then
            REPO_PATH="$path"
        else
            REPO_PATH="${PROJECT_PATH_PREFIX%/}/$path"
        fi

        echo -e "\n\033[32m========================================\033[0m"
        echo "ğŸ“¦ é¡¹ç›®: $name"
        echo "ğŸ“ ä»“åº“: $REPO_PATH"

        if [ ! -d "$REPO_PATH/.git" ]; then
            echo "âŒ ä»“åº“è·¯å¾„ä¸å­˜åœ¨ï¼Œå·²è·³è¿‡"
            return
        fi
        cd "$REPO_PATH"

        # 3. ç¡®å®š Commit èŒƒå›´ (ä¼˜å…ˆçº§: æ—¶é—´ &gt; Commit IDs)
        local FINAL_COMMITS=""
        if [[ -n "$start_time" ]]; then
            echo "ğŸ•’ æ¨¡å¼: æ—¶é—´åŒºé—´ [$start_time] -&gt; [${end_time:-è‡³ä»Š}]"
            local LOG_CMD="git log --reverse --format=%H --since=\"$start_time\""
            [[ -n "$end_time" ]] &amp;&amp; LOG_CMD="$LOG_CMD --until=\"$end_time\""
            FINAL_COMMITS=$(eval "$LOG_CMD")
        elif [[ -n "$commit_ids" ]]; then
            echo "ğŸ”– æ¨¡å¼: æŒ‡å®š Commit IDs"
            # è‡ªåŠ¨æŒ‰æäº¤æ—¶é—´æ’åº
            FINAL_COMMITS=$(for C in $commit_ids; do
                local TS=$(git show -s --format=%ct "$C" 2&gt;/dev/null || true)
                [[ -n "$TS" ]] &amp;&amp; echo "$TS $C"
            done | sort -n | awk '{print $2}')
        fi

        if [[ -z "$FINAL_COMMITS" ]]; then
            echo "âš ï¸ æœªæ‰¾åˆ°ç¬¦åˆæ¡ä»¶çš„æäº¤ï¼Œè·³è¿‡"
            return
        fi

        # 4. è¿½è¸ªæ–‡ä»¶æœ€ç»ˆçŠ¶æ€ (ä½¿ç”¨å…³è”æ•°ç»„ï¼ŒBash 4.0+)
        declare -A FILE_STATE
        for COMMIT in $FINAL_COMMITS; do
            while read -r STATUS FILE; do
                if [[ "$STATUS" == "D" ]]; then
                    unset FILE_STATE["$FILE"]
                else
                    FILE_STATE["$FILE"]="$COMMIT"
                fi
            done &lt; &lt;(git diff-tree --no-commit-id --name-status -r "$COMMIT")
        done

        # 5. æ‰§è¡Œå¯¼å‡º
        local FILE_COUNT=${#FILE_STATE[@]}
        if [[ $FILE_COUNT -eq 0 ]]; then
            echo "ğŸ“­ æ— æ–‡ä»¶éœ€è¦å¯¼å‡º"
            return
        fi

        local OUT_ROOT="$EXPORT_BASE/$name/$EXPORT_TIME"
        mkdir -p "$OUT_ROOT"

        # è®°å½•å¯¼å‡ºæ¸…å•
        local SUMMARY="$OUT_ROOT/export-summary.txt"
        {
            echo "é¡¹ç›®: $name"
            echo "å¯¼å‡ºæ—¶é—´: $EXPORT_TIME"
            echo "æäº¤èŒƒå›´: $(echo $FINAL_COMMITS | tr '\n' ' ')"
            echo "--------------------------------"
        } &gt; "$SUMMARY"

        for F in "${!FILE_STATE[@]}"; do
            local TARGET="$OUT_ROOT/$F"
            mkdir -p "$(dirname "$TARGET")"
            # ä»å¯¹åº”çš„ commit ä¸­æå–æ–‡ä»¶
            git show "${FILE_STATE[$F]}:$F" &gt; "$TARGET"
            echo "âœ” $F (æ¥è‡ª ${FILE_STATE[$F]:0:7})" &gt;&gt; "$SUMMARY"
        done

        echo "âœ… æˆåŠŸå¯¼å‡º $FILE_COUNT ä¸ªæ–‡ä»¶"
        echo "ğŸ“‚ å¯¼å‡ºè‡³: $OUT_ROOT"
    )
}
<span class="hljs-meta prompt_">
#</span><span class="bash"><span class="hljs-comment">#################################################</span></span>
<span class="hljs-meta prompt_"># </span><span class="bash">ä¸‰-1ã€é¡¹ç›®é…ç½®åŒºï¼ˆKey-Value æ¨¡å¼ï¼‰</span>
<span class="hljs-meta prompt_">#</span><span class="bash"><span class="hljs-comment">#################################################</span></span>
<span class="hljs-meta prompt_"># </span><span class="bash">æ³¨æ„ï¼šé…ç½®å¿…é¡»åŒ…è£¹åœ¨åŒå¼•å· <span class="hljs-string">""</span> å†…</span>

project "
    name='é¡¹ç›®A'
    path='projectA'
    commit_ids='fa5b485e0508ee0c054496d4c5822777ead86503 9232dcbaec77abbec5a0806692a50e36a162b57e'
<span class="hljs-meta prompt_"># </span><span class="bash">   start_time=<span class="hljs-string">'2023-10-01 09:00'</span></span>
<span class="hljs-meta prompt_"># </span><span class="bash">   end_time=<span class="hljs-string">'2023-10-15 18:00'</span></span>
"

project "
    name='é¡¹ç›®B'
    path='projectB'
    commit_ids=''
    start_time='2026-02-01 09:00'
    end_time=''
"
<span class="hljs-meta prompt_">
# </span><span class="bash">ç¤ºä¾‹ï¼šç»å¯¹è·¯å¾„ä¸”åªç”¨ start_time</span>
<span class="hljs-meta prompt_"># </span><span class="bash">project <span class="hljs-string">"</span></span>
<span class="hljs-meta prompt_"># </span><span class="bash"><span class="hljs-string">    name='å¤–éƒ¨é¡¹ç›®'</span></span>
<span class="hljs-meta prompt_"># </span><span class="bash"><span class="hljs-string">    path='/e/work/other-repo'</span></span>
<span class="hljs-meta prompt_"># </span><span class="bash"><span class="hljs-string">    start_time='yesterday'</span></span>
<span class="hljs-meta prompt_"># </span><span class="bash"><span class="hljs-string">"</span></span>

echo -e "\n\033[36mâœ¨ æ‰€æœ‰å¯¼å‡ºä»»åŠ¡å¤„ç†å®Œæ¯•ï¼\033[0m"
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[JS-ä¸€æ–‡å¸¦ä½ å½»åº•ææ‡‚ Promise å¹¶å‘æ§åˆ¶ï¼šall, race, any, allSettled]]></title>    <link>https://juejin.cn/post/7602544700476227594</link>    <guid>https://juejin.cn/post/7602544700476227594</guid>    <pubDate>2026-02-04T07:40:10.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602544700476227594" data-draft-id="7602531501457555465" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="JS-ä¸€æ–‡å¸¦ä½ å½»åº•ææ‡‚ Promise å¹¶å‘æ§åˆ¶ï¼šall, race, any, allSettled"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,é¢è¯•"/> <meta itemprop="datePublished" content="2026-02-04T07:40:10.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‘ç°ä¸€åªå¤§å‘†ç“œ"/> <meta itemprop="url" content="https://juejin.cn/user/180747382561607"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            JS-ä¸€æ–‡å¸¦ä½ å½»åº•ææ‡‚ Promise å¹¶å‘æ§åˆ¶ï¼šall, race, any, allSettled
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/180747382561607/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‘ç°ä¸€åªå¤§å‘†ç“œ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T07:40:10.000Z" title="Wed Feb 04 2026 07:40:10 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">å‰è¨€</h3>
<p>åœ¨å¤„ç†å¼‚æ­¥ä»»åŠ¡æ—¶ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦åŒæ—¶å‘èµ·å¤šä¸ªè¯·æ±‚ã€‚Promise æä¾›çš„é™æ€æ–¹æ³•èƒ½è®©æˆ‘ä»¬ä¼˜é›…åœ°æ§åˆ¶å¤šä¸ªå¹¶å‘å¼‚æ­¥ä»»åŠ¡ã€‚æœ¬æ–‡å°†æ·±åº¦å¯¹æ¯” <code>all</code>ã€<code>race</code>ã€<code>any</code> å’Œ <code>allSettled</code> çš„åŒºåˆ«ä¸åº”ç”¨åœºæ™¯ã€‚</p>
<h2 data-id="heading-1">ä¸€ã€ æ–¹æ³•è¯¦è§£ä¸å¯¹æ¯”</h2>
<h3 data-id="heading-2">1. Promise.all() â€”â€” â€œå…¨å‘˜é€šè¿‡åˆ¶â€</h3>
<ul>
<li>
<p><strong>æ¦‚å¿µ</strong>ï¼šå°†å¤šä¸ª Promise å®ä¾‹åŒ…è£…æˆä¸€ä¸ªã€‚</p>
</li>
<li>
<p><strong>çŠ¶æ€å†³å®š</strong>ï¼š</p>
<ul>
<li><strong>Fulfilled</strong>ï¼šæ‰€æœ‰å®ä¾‹éƒ½æˆåŠŸã€‚</li>
<li><strong>Rejected</strong>ï¼šåªè¦æœ‰<strong>ä¸€ä¸ª</strong>å¤±è´¥ï¼Œæ•´ä½“ç«‹å³å¤±è´¥ã€‚</li>
</ul>
</li>
<li>
<p><strong>åº”ç”¨åœºæ™¯</strong>ï¼šå¤šä¸ªæ¥å£è”åŠ¨ï¼Œå¿…é¡»å…¨éƒ¨æ‹¿åˆ°æ•°æ®æ‰èƒ½æ¸²æŸ“é¡µé¢ã€‚</p>
</li>
</ul>
<pre><code class="hljs language-JavaScript" lang="JavaScript">  <span class="hljs-keyword">const</span> p1 = <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(<span class="hljs-number">1</span>);
  <span class="hljs-keyword">const</span> p2 = <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(<span class="hljs-number">2</span>);
  <span class="hljs-keyword">const</span> p3 = <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(<span class="hljs-number">3</span>);

  <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>([p1, p2, p3])
    .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">results</span>) =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(results); <span class="hljs-comment">// [1, 2, 3] é¡ºåºä¸ä¼ å…¥ä¸€è‡´</span>
    })
    .<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'å…¶ä¸­ä¸€ä¸ªå¤±è´¥äº†'</span>, err);
    });
</code></pre>
<h3 data-id="heading-3">2. Promise.race() â€”â€” â€œç«é€Ÿåˆ¶â€</h3>
<ul>
<li><strong>æ¦‚å¿µ</strong>ï¼šè°è·‘å¾—å¿«å°±å¬è°çš„ã€‚</li>
<li><strong>çŠ¶æ€å†³å®š</strong>ï¼šçŠ¶æ€å–å†³äº<strong>ç¬¬ä¸€ä¸ª</strong>æ”¹å˜çŠ¶æ€çš„å®ä¾‹ã€‚</li>
<li><strong>åº”ç”¨åœºæ™¯</strong>ï¼šè¯·æ±‚è¶…æ—¶æ§åˆ¶ã€‚</li>
</ul>
<pre><code class="hljs language-JavaScript" lang="JavaScript">  <span class="hljs-keyword">const</span> p1 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span>
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">resolve</span>(<span class="hljs-string">'1ç§’åæˆåŠŸ'</span>), <span class="hljs-number">1000</span>)
  );
  <span class="hljs-keyword">const</span> p2 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span>
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">resolve</span>(<span class="hljs-string">'500æ¯«ç§’åæˆåŠŸ'</span>), <span class="hljs-number">500</span>)
  );
  <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">race</span>([p1, p2]).<span class="hljs-title function_">then</span>(
    <span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`æµ‹è¯•1ç»“æœï¼š<span class="hljs-subst">${res}</span> (ç«é€Ÿèµ¢å®¶)`</span>, <span class="hljs-string">'success'</span>),
    <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`æµ‹è¯•1å¤±è´¥ï¼š<span class="hljs-subst">${err}</span>`</span>, <span class="hljs-string">'error'</span>)
  );
</code></pre>
<h3 data-id="heading-4">3. Promise.any() â€”â€” â€œæ‹©ä¼˜å½•å–åˆ¶â€</h3>
<ul>
<li>
<p><strong>æ¦‚å¿µ</strong>ï¼šåªè¦æœ‰ä¸€ä¸ªæˆåŠŸå°±ç®—æˆåŠŸã€‚</p>
</li>
<li>
<p><strong>çŠ¶æ€å†³å®š</strong>ï¼š</p>
<ul>
<li><strong>Fulfilled</strong>ï¼šåªè¦æœ‰ä¸€ä¸ªæˆåŠŸã€‚</li>
<li><strong>Rejected</strong>ï¼š<strong>å…¨éƒ¨</strong>éƒ½å¤±è´¥æ—¶æ‰å¤±è´¥ï¼ˆè¿”å› <code>AggregateError</code>ï¼‰ã€‚</li>
</ul>
</li>
<li>
<p><strong>åº”ç”¨åœºæ™¯</strong>ï¼šä»å¤šä¸ªå¤‡ç”¨æœåŠ¡å™¨è·å–ç›¸åŒèµ„æºã€‚</p>
</li>
</ul>
<pre><code class="hljs language-JavaScript" lang="JavaScript">  <span class="hljs-keyword">const</span> p1 = <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(<span class="hljs-number">1</span>);
  <span class="hljs-keyword">const</span> p2 = <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(<span class="hljs-number">2</span>);
  <span class="hljs-keyword">const</span> p3 = <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(<span class="hljs-number">3</span>);
  <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">any</span>([p1, p2, p3])
    .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`æœ‰ä¸€ä¸ªæˆåŠŸäº†ï¼š<span class="hljs-subst">${res}</span>`</span>, <span class="hljs-string">'success'</span>))
    .<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`æ‰€æœ‰éƒ½å¤±è´¥äº†ï¼š<span class="hljs-subst">${err}</span>`</span>, <span class="hljs-string">'error'</span>));
</code></pre>
<h3 data-id="heading-5">4. Promise.allSettled() â€”â€” â€œç»“æœå¯¼å‘åˆ¶â€</h3>
<ul>
<li><strong>æ¦‚å¿µ</strong>ï¼šæ— è®ºæˆåŠŸå¤±è´¥ï¼Œæˆ‘å…¨éƒ½è¦ã€‚</li>
<li><strong>çŠ¶æ€å†³å®š</strong>ï¼šæ°¸è¿œæ˜¯ <strong>fulfilled</strong>ï¼ˆåœ¨æ‰€æœ‰å®ä¾‹éƒ½ç»“æŸåï¼‰ã€‚</li>
<li><strong>åº”ç”¨åœºæ™¯</strong>ï¼šæ‰§è¡Œå¤šä¸ªäº’ä¸å½±å“çš„æ“ä½œï¼Œæœ€åç»Ÿä¸€ç»Ÿè®¡ç»“æœã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-6">äºŒã€ æ ¸å¿ƒå·®å¼‚å¯¹æ¯”è¡¨</h2>
<p>ä¸ºäº† scannabilityï¼ˆæ˜“è¯»æ€§ï¼‰ï¼Œæˆ‘ä»¬é€šè¿‡è¡¨æ ¼ç›´è§‚å¯¹æ¯”ï¼š</p>



































<table><thead><tr><th><strong>æ–¹æ³•</strong></th><th><strong>æˆåŠŸæ¡ä»¶ (Fulfilled)</strong></th><th><strong>å¤±è´¥æ¡ä»¶ (Rejected)</strong></th><th><strong>ç»“æœè¿”å›å€¼</strong></th></tr></thead><tbody><tr><td><strong><code>.all()</code></strong></td><td><strong>å…¨éƒ¨</strong>æˆåŠŸ</td><td><strong>ä»»æ„ä¸€ä¸ª</strong>å¤±è´¥</td><td>æˆåŠŸç»“æœæ•°ç»„ï¼ˆæŒ‰åºï¼‰</td></tr><tr><td><strong><code>.race()</code></strong></td><td><strong>ä»»æ„ä¸€ä¸ª</strong>æœ€å…ˆæˆåŠŸ</td><td><strong>ä»»æ„ä¸€ä¸ª</strong>æœ€å…ˆå¤±è´¥</td><td>ç¬¬ä¸€ä¸ªæ”¹å˜çŠ¶æ€çš„å€¼</td></tr><tr><td><strong><code>.any()</code></strong></td><td><strong>ä»»æ„ä¸€ä¸ª</strong>æˆåŠŸ</td><td><strong>å…¨éƒ¨</strong>å¤±è´¥</td><td>ç¬¬ä¸€ä¸ªæˆåŠŸçš„å€¼</td></tr><tr><td><strong><code>.allSettled()</code></strong></td><td><strong>æ‰€æœ‰</strong>ä»»åŠ¡ç»“æŸ</td><td>ä»ä¸ï¼ˆçŠ¶æ€æ°¸è¿œæˆåŠŸï¼‰</td><td>åŒ…å«çŠ¶æ€å’Œå€¼çš„å¯¹è±¡æ•°ç»„</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-7">ä¸‰ã€ æ€»ç»“</h2>
<h3 data-id="heading-8">1. Promise.all ä¸ Promise.race çš„ç›´è§‚åŒºåˆ«</h3>
<ul>
<li><strong>Promise.all</strong>ï¼šç…§é¡¾â€œè·‘å¾—æœ€æ…¢â€çš„ã€‚å¿…é¡»ç­‰æœ€æ…¢çš„ä¸€ä¸ªå®Œæˆï¼Œä¸”å…¨å‘˜åˆæ ¼ï¼Œæ‰ç»™æœ€ç»ˆç»“æœã€‚</li>
<li><strong>Promise.race</strong>ï¼šå…³æ³¨â€œè·‘å¾—æœ€å¿«â€çš„ã€‚æœ€å¿«çš„é‚£ä¸ªä¸€æ—¦è¿‡çº¿ï¼Œæ— è®ºè¾“èµ¢ï¼Œæ¯”èµ›ç«‹åˆ»ç»“æŸã€‚</li>
</ul>
<h3 data-id="heading-9">2.  è¿›é˜¶ä½¿ç”¨</h3>
<p>åœ¨é¡¹ç›®ä¸­ï¼Œé…åˆ <code>async/await</code> ä½¿ç”¨æ›´åŠ ä¼˜é›…ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> <span class="hljs-title function_">fetchData</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// å¼ºç±»å‹çº¦æŸç»“æœæ•°ç»„</span>
    <span class="hljs-keyword">const</span> [user, orders] = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-property">all</span>&lt;[<span class="hljs-title class_">UserType</span>, <span class="hljs-title class_">OrderType</span>[]]&gt;([
      <span class="hljs-title function_">getUserInfo</span>(),
      <span class="hljs-title function_">getOrderList</span>()
    ]);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(user, orders);
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-comment">// å¤„ç†ç¬¬ä¸€ä¸ªæ•è·åˆ°çš„é”™è¯¯</span>
  }
};
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ï¼ˆçº¯å¹²è´§ï¼‰å¦‚ä½•ä¸º AI agents ç¼–å†™ä¼˜ç§€çš„ Spec]]></title>    <link>https://juejin.cn/post/7602901565032792110</link>    <guid>https://juejin.cn/post/7602901565032792110</guid>    <pubDate>2026-02-04T08:29:54.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602901565032792110" data-draft-id="7601486204174843954" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ï¼ˆçº¯å¹²è´§ï¼‰å¦‚ä½•ä¸º AI agents ç¼–å†™ä¼˜ç§€çš„ Spec"/> <meta itemprop="keywords" content="AIç¼–ç¨‹,VibeCoding,Agent"/> <meta itemprop="datePublished" content="2026-02-04T08:29:54.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æˆ‘ä¸åƒé¥¼å¹²"/> <meta itemprop="url" content="https://juejin.cn/user/3263006241480605"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ï¼ˆçº¯å¹²è´§ï¼‰å¦‚ä½•ä¸º AI agents ç¼–å†™ä¼˜ç§€çš„ Spec
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3263006241480605/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æˆ‘ä¸åƒé¥¼å¹²
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T08:29:54.000Z" title="Wed Feb 04 2026 08:29:54 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»39åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.7;font-weight:400;font-size:16px;overflow-x:hidden;color:#212122}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-bottom:8px;padding-bottom:8px}.markdown-body h1{color:#a0a0a0;font-size:38px;margin-top:32px;padding-top:32px}.markdown-body h2{color:#fff;background-color:#212122;width:fit-content;border-bottom-right-radius:100px;margin-top:47px;margin-bottom:16px;padding:4px 48px 4px 8px;line-height:1.7;font-size:30px;transition:all .3s ease-out}.markdown-body h2:hover{border-bottom-right-radius:50px;transition:all .3s ease-out}.markdown-body h3{font-size:24px;padding-left:8px;margin-top:32px;border-bottom:2px solid #c6c4c4;line-height:1.7}.markdown-body h4{font-size:20px;padding-left:8px;margin-top:32px;border-bottom:1px solid #ddd}.markdown-body h5{font-size:16px;margin-top:24px}.markdown-body h6{margin-top:16px;line-height:1.1}.markdown-body p{font-size:16px;text-align:start;white-space:normal;text-size-adjust:auto;line-height:2;margin-top:16px;margin-bottom:16px}.markdown-body img{max-width:100%;margin:auto;padding-left:8px;padding-right:8px}.markdown-body hr{border:none;border-top:4px double #212122;margin-top:32px;margin-bottom:32px;text-align:center}.markdown-body hr:after{content:"â™¥";display:inline-block;position:relative;top:-15px;padding:0 10px;color:#212122;font-size:18px}.markdown-body code{word-break:break-word;overflow-x:auto;background-color:#f1f1f1;color:#ef7060;font-size:14px;padding:.065em 6px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;border-radius:2px}.markdown-body pre{overflow:auto;position:relative;line-height:1.7;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);margin:32px 16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-color:#212122;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);background-size:40px}.markdown-body pre&gt;code{font-size:14px;padding:16px 8px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#fff;background:#272822}.markdown-body pre&gt;code::-webkit-scrollbar{height:10px;background-color:#f5f5f5}.markdown-body pre&gt;code::-webkit-scrollbar-track{box-shadow:inset 0 0 6px rgba(0,0,0,.3);border-radius:3px;background-color:#f5f5f5}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{border-radius:3px;box-shadow:inset 0 0 6px rgba(0,0,0,.3);background-color:#555}.markdown-body a{color:#ef7060;padding:2px;text-decoration:none;border-bottom:.125em solid #ef7060;border-radius:2px;box-shadow:inset 0 -.025em 0 #ef7060;transition:box-shadow .27s cubic-bezier(.77,0,.175,1),color .27s cubic-bezier(.77,0,.175,1)}.markdown-body a:focus,.markdown-body a:hover{outline:none;box-shadow:inset 0 -1.5em 0 #ef7060;color:#fff}.markdown-body a:before{content:"â‡² ";vertical-align:top;margin-left:2px;font-family:dart!important;font-size:12px;color:inherit;opacity:.7}.markdown-body table{background:#fbfbfb;border-radius:4px;border-collapse:collapse;margin:auto;padding:5px;width:95%;box-shadow:0 5px 10px rgba(0,0,0,.1);animation:float 5s infinite}.markdown-body table th{color:#fff;background:#212122;border-bottom:1px solid #9ea7af;border-right:1px solid #343a45;font-size:18px;padding:16px;text-align:left;vertical-align:middle}.markdown-body table th:first-child{border-top-left-radius:4px}.markdown-body table th:last-child{border-top-right-radius:4px;border-right:none}.markdown-body table tr{border-top:1px solid #c1c3d1;border-bottom:1px solid #c1c3d1;color:#666b85}.markdown-body table tr:hover td{background:#212122;color:#fff;border-top:1px solid #22262e}.markdown-body table tr:first-child{border-top:none}.markdown-body table tr:last-child{border-bottom:none}.markdown-body table tr:nth-child(odd) td{background:#f1f1f1}.markdown-body table tr:nth-child(odd):hover td{background:#212122}.markdown-body table tr:last-child td:first-child{border-bottom-left-radius:4px}.markdown-body table tr:last-child td:last-child{border-bottom-right-radius:4px}.markdown-body table td{background:#fbfbfb;padding:16px;text-align:left;vertical-align:middle;font-size:16px;border-right:1px solid #c1c3d1}.markdown-body table td:last-child{border-right:0}.markdown-body blockquote{color:#777;padding:1px 16px;margin:24px 0;border-left:4px solid #c6c4c4;background-color:#f1f1f1;transition:all .3s ease-out;border-radius:4px}.markdown-body blockquote:hover{border-left-color:#212122;background-color:#212122;color:#fff}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:24px}.markdown-body ol li,.markdown-body ul li{margin-bottom:6px;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body span.math{margin-left:32px;font-size:18px;font-weight:700}@media (max-width:720px){.markdown-body h1{font-size:30.4px}.markdown-body h2{font-size:24px}.markdown-body h3{font-size:19.2px}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:12.8px}}</style><style data-highlight="" data-highlight-key="a11y-light">.hljs-comment,.hljs-quote{color:#696969}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#d91e18}.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#aa5d00}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:green}.hljs-section,.hljs-title{color:#007faa}.hljs-keyword,.hljs-selector-tag{color:#7928a1}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#fefefe;color:#545454}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}@media screen and (-ms-high-contrast:active){.hljs-addition,.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-comment,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-quote,.hljs-string,.hljs-symbol,.hljs-type{color:highlight}.hljs-keyword,.hljs-selector-tag{font-weight:700}}</style><blockquote>
<p>åŸæ–‡ <a href="https://link.juejin.cn?target=https%3A%2F%2Faddyosmani.com%2Fblog%2Fgood-spec%2F" target="_blank" title="https://addyosmani.com/blog/good-spec/" ref="nofollow noopener noreferrer">How to write a good spec for AI agents</a></p>
<p>å› ä¸ºè‹±è¯­æ¯”è¾ƒå·®æ‰€ä»¥æœºç¿»äº†ä¸€éï¼Œå†æ…¢æ…¢é˜…è¯»ï¼Œä¸é€šé¡ºçš„åœ°æ–¹éƒ½åšäº†ä¿®æ”¹ï¼Œå°±é¡ºä¾¿åˆ†äº«å‡ºæ¥ã€‚æ–‡ç« å¾ˆé•¿ï¼Œå»ºè®®æ…¢æ…¢çœ‹ï¼Œæ”¶è·å¾ˆå¤šã€‚</p>
</blockquote>
<p><strong>å¤ªé•¿ä¸çœ‹ç‰ˆï¼šç›®æ ‡æ˜¯æ’°å†™ä¸€ä»½æ¸…æ™°çš„ specï¼ŒåŒ…å«æ°åˆ°å¥½å¤„çš„ç»†èŠ‚ï¼ˆå¯èƒ½åŒ…æ‹¬ç»“æ„ã€é£æ ¼ã€æµ‹è¯•ã€è¾¹ç•Œæ¡ä»¶ï¼‰ï¼Œæ—¢èƒ½å¼•å¯¼ AIï¼Œåˆä¸ä¼šå› ä¿¡æ¯è¿‡è½½è€Œå¯¼è‡´æ¨¡å‹è¿·å¤±æ–¹å‘ã€‚å°†å¤§ä»»åŠ¡æ‹†è§£ä¸ºå°ä»»åŠ¡ï¼Œè€Œä¸æ˜¯å°†æ‰€æœ‰å†…å®¹éƒ½å¡è¿›ä¸€ä¸ªå·¨å¤§çš„ promptï¼ˆæç¤ºè¯ï¼‰ä¸­ã€‚å…ˆåœ¨åªè¯»æ¨¡å¼ä¸‹è§„åˆ’ï¼Œå†æ‰§è¡Œï¼Œå¹¶æŒç»­è¿­ä»£ã€‚</strong></p>
<blockquote>
<p>â€œå…³äºæ€æ ·ä¸º AI agent å†™å¥½ specï¼Œæˆ‘å¬è¿‡å¾ˆå¤šè®¨è®ºï¼Œä½†ä¸€ç›´æ²¡æ‰¾åˆ°ä¸€ä¸ªé è°±çš„æ¡†æ¶ã€‚æˆ‘å¯ä»¥æŠŠ spec å†™å¾—åƒ RFC ä¸€æ ·è¯¦å°½ï¼Œä½†åˆ°æŸä¸ªç‚¹ï¼Œä¸Šä¸‹æ–‡å¤ªå¤§ï¼Œæ¨¡å‹å°±æ’‘ä¸ä½äº†ã€‚â€</p>
</blockquote>
<p>è®¸å¤šå¼€å‘è€…éƒ½æœ‰è¿™ç§æŒ«è´¥æ„Ÿï¼šç›´æ¥æŠŠä¸€ä»½å·¨å¤§çš„ spec æ‰”ç»™ AI agent å¹¶ä¸ä¼šå¥æ•ˆâ€”â€”ä¸Šä¸‹æ–‡çª—å£çš„é™åˆ¶å’Œæ¨¡å‹çš„â€œæ³¨æ„åŠ›é¢„ç®—â€ä¼šæˆä¸ºé˜»ç¢ã€‚å…³é”®åœ¨äºå†™èªæ˜çš„ specï¼šæ—¢èƒ½æ¸…æ™°å¼•å¯¼ agentï¼Œåˆèƒ½æ§åˆ¶åœ¨å®é™…å¯ç”¨çš„ä¸Šä¸‹æ–‡è§„æ¨¡å†…ï¼Œå¹¶èƒ½éšç€é¡¹ç›®æ¨è¿›ä¸æ–­æ¼”åŒ–ã€‚æœ¬æ–‡æ€»ç»“äº†æˆ‘ä½¿ç”¨ Claude Codeã€Gemini CLI ç­‰ç¼–ç  agent çš„ç»éªŒä¸æœ€ä½³å®è·µï¼Œæ•´ç†æˆä¸€å¥— spec ç¼–å†™æ¡†æ¶ï¼Œè®©ä½ çš„ AI agent ä¿æŒä¸“æ³¨ã€é«˜æ•ˆã€‚</p>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬ä¼šä»‹ç»å†™å‡ºä¼˜ç§€ AI agent spec çš„äº”ä¸ªåŸåˆ™ï¼›æ¯ä¸ªåŸåˆ™éƒ½ä¼šå…ˆç»™å‡ºä¸€æ¡åŠ ç²—çš„æ ¸å¿ƒè¦ç‚¹ã€‚</p>
<h2 data-id="heading-0">1. ä»é«˜å±‚æ„¿æ™¯å¼€å§‹ï¼Œè®© AI èµ·è‰ç»†èŠ‚</h2>
<p><strong>å…ˆç”¨ä¸€ä»½ç®€æ˜çš„ high-level specï¼ˆé¡¹ç›®æ¦‚è¦ï¼‰å¯åŠ¨é¡¹ç›®ï¼Œç„¶åè®© AI å°†å…¶æ‰©å±•ä¸ºè¯¦ç»†è®¡åˆ’ã€‚</strong></p>
<p>ä¸å…¶åœ¨å‰æœŸè¿‡åº¦è®¾è®¡ï¼Œä¸å¦‚ä»ä¸€ä¸ªæ¸…æ™°çš„ç›®æ ‡é™ˆè¿°å’Œå‡ ä¸ªæ ¸å¿ƒéœ€æ±‚å¼€å§‹ã€‚å°†å…¶è§†ä¸ºâ€œäº§å“ç®€æŠ¥â€ï¼Œè®© agent ä»ä¸­ç”Ÿæˆæ›´è¯¦å°½çš„ specã€‚è¿™æ ·æ—¢èƒ½åˆ©ç”¨ AI åœ¨ç»†èŠ‚é˜è¿°æ–¹é¢çš„ä¼˜åŠ¿ï¼Œåˆèƒ½è®©ä½ æŒæ§å¤§å±€ã€‚é™¤éä½ ä»ä¸€å¼€å§‹å°±æœ‰éå¸¸å…·ä½“çš„æŠ€æœ¯è¦æ±‚å¿…é¡»æ»¡è¶³ï¼Œå¦åˆ™è¿™ç§æ–¹æ³•æ•ˆæœå¾ˆå¥½ã€‚</p>
<p><strong>ä¸ºä»€ä¹ˆæœ‰æ•ˆï¼š</strong> åŸºäºå¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰çš„ agent åœ¨è·å¾—å¯é çš„ high-level æŒ‡ä»¤æ—¶ï¼Œæ“…é•¿å……å®ç»†èŠ‚ï¼Œä½†å®ƒä»¬éœ€è¦ä¸€ä¸ªæ¸…æ™°çš„ä»»åŠ¡ç›®æ ‡ä»¥é¿å…åç¦»æ–¹å‘ã€‚é€šè¿‡æä¾›ç®€çŸ­çš„å¤§çº²æˆ–ç›®æ ‡æè¿°ï¼Œå¹¶è¦æ±‚ AI ç”Ÿæˆå®Œæ•´çš„ specï¼ˆä¾‹å¦‚ <code>spec.md</code> æ–‡ä»¶ï¼‰ï¼Œä½ å°±åˆ›å»ºäº†ä¸€ä¸ªä¾› agent æŒç»­å‚è€ƒçš„æ–‡æ¡£ã€‚å¯¹äº agent è€Œè¨€ï¼Œæå‰è§„åˆ’æ›´ä¸ºé‡è¦â€”â€”ä½ å¯ä»¥å…ˆè¿­ä»£å®Œå–„è®¡åˆ’ï¼Œç„¶åå†äº¤ç»™ agent ç¼–å†™ä»£ç ã€‚spec æˆä¸ºä½ å’Œ AI å…±åŒæ„å»ºçš„ç¬¬ä¸€ä¸ªäº§å‡ºç‰©ã€‚</p>
<p><strong>å®è·µæ–¹æ³•ï¼š</strong> é€šè¿‡è¿™æ ·çš„ prompt å¼€å§‹æ–°çš„ç¼–ç ä¼šè¯ï¼šâ€œä½ æ˜¯ä¸€å AI è½¯ä»¶å·¥ç¨‹å¸ˆã€‚ä¸º [é¡¹ç›® X] èµ·è‰ä¸€ä»½è¯¦ç»† specï¼Œæ¶µç›–ç›®æ ‡ã€åŠŸèƒ½ã€çº¦æŸæ¡ä»¶å’Œåˆ†æ­¥è®¡åˆ’ã€‚â€ä¿æŒåˆå§‹ prompt çš„ high-level ç‰¹æ€§â€”â€”ä¾‹å¦‚â€œæ„å»ºä¸€ä¸ªç½‘é¡µåº”ç”¨ï¼Œç”¨æˆ·å¯ä»¥è·Ÿè¸ªä»»åŠ¡ï¼ˆå¾…åŠäº‹é¡¹åˆ—è¡¨ï¼‰ï¼ŒåŒ…å«ç”¨æˆ·è´¦æˆ·ã€æ•°æ®åº“å’Œç®€æ´çš„ç”¨æˆ·ç•Œé¢â€ã€‚agent å¯èƒ½ä¼šå›å¤ä¸€ä»½ç»“æ„åŒ–çš„ spec è‰æ¡ˆï¼šæ¦‚è¿°ã€åŠŸèƒ½åˆ—è¡¨ã€æŠ€æœ¯æ ˆå»ºè®®ã€æ•°æ®æ¨¡å‹ç­‰ç­‰ã€‚è¿™ä»½ spec éšåæˆä¸ºä½ å’Œ agent éƒ½èƒ½å›æº¯å‚è€ƒçš„â€œçœŸç†ä¹‹æºâ€ã€‚GitHub çš„ AI å›¢é˜Ÿå€¡å¯¼ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.blog%2Fai-and-ml%2Fgenerative-ai%2Fspec-driven-development-with-ai-get-started-with-a-new-open-source-toolkit%2F" target="_blank" title="https://github.blog/ai-and-ml/generative-ai/spec-driven-development-with-ai-get-started-with-a-new-open-source-toolkit/" ref="nofollow noopener noreferrer">spec é©±åŠ¨å¼€å‘</a>ï¼Œè®¤ä¸ºâ€œspec æˆä¸ºå…±äº«çš„çœŸç†ä¹‹æºâ€¦â€¦æ˜¯éšé¡¹ç›®æ¼”è¿›çš„æ´»æ–‡æ¡£ã€å¯æ‰§è¡Œçš„äº§å‡ºç‰©â€ã€‚åœ¨ç¼–å†™ä»»ä½•ä»£ç ä¹‹å‰ï¼Œå®¡æŸ¥å¹¶å®Œå–„ AI ç”Ÿæˆçš„ specã€‚ç¡®ä¿å®ƒä¸ä½ çš„æ„¿æ™¯ä¸€è‡´ï¼Œå¹¶çº æ­£ä»»ä½•å¹»è§‰æˆ–åç¦»ç›®æ ‡çš„ç»†èŠ‚ã€‚</p>
<p><strong>ä½¿ç”¨ Plan Mode å¼ºåˆ¶ä¼˜å…ˆè§„åˆ’ï¼š</strong> åƒ Claude Code è¿™æ ·çš„å·¥å…·æä¾›äº† <a href="https://link.juejin.cn?target=https%3A%2F%2Fcode.claude.com%2Fdocs%2Fen%2Fcommon-workflows" target="_blank" title="https://code.claude.com/docs/en/common-workflows" ref="nofollow noopener noreferrer">Plan Modeï¼ˆè®¡åˆ’æ¨¡å¼ï¼‰</a>ï¼Œè¯¥æ¨¡å¼å°† agent é™åˆ¶ä¸ºåªè¯»æ“ä½œâ€”â€”å®ƒå¯ä»¥åˆ†æä½ çš„ä»£ç åº“å¹¶åˆ›å»ºè¯¦ç»†è®¡åˆ’ï¼Œä½†åœ¨ä½ å‡†å¤‡å¥½ä¹‹å‰ä¸ä¼šç¼–å†™ä»»ä½•ä»£ç ã€‚è¿™å¯¹è§„åˆ’é˜¶æ®µéå¸¸ç†æƒ³ï¼šåœ¨ Plan Mode ä¸‹å¯åŠ¨ï¼ˆClaude Code ä¸­æŒ‰ Shift+Tabï¼‰ï¼Œæè¿°ä½ æƒ³æ„å»ºä»€ä¹ˆï¼Œè®© agent åœ¨æ¢ç´¢ç°æœ‰ä»£ç çš„åŒæ—¶èµ·è‰ specã€‚è®©å®ƒé€šè¿‡è¯¢é—®ä½ æ¥é˜æ˜è®¡åˆ’ä¸­çš„æ¨¡ç³Šä¹‹å¤„ã€‚è®©å®ƒå®¡æŸ¥è®¡åˆ’çš„æ¶æ„ã€æœ€ä½³å®è·µã€å®‰å…¨é£é™©å’Œæµ‹è¯•ç­–ç•¥ã€‚ç›®æ ‡æ˜¯å®Œå–„è®¡åˆ’ç›´åˆ°æ²¡æœ‰ä»»ä½•è¯¯è§£ã€‚ç›´åˆ°æ­¤æ—¶æ‰é€€å‡º Plan Modeï¼Œè®© agent æ‰§è¡Œã€‚è¿™ä¸ªå·¥ä½œæµç¨‹é¿å…äº†åœ¨ spec å°šæœªç¨³å›ºå‰å°±ç›´æ¥è·³å…¥ä»£ç ç”Ÿæˆçš„å¸¸è§é™·é˜±ã€‚</p>
<p><strong>å°† spec ç”¨ä½œä¸Šä¸‹æ–‡ï¼š</strong> spec ä¸€æ—¦é€šè¿‡ï¼Œä¿å­˜è¿™ä»½ specï¼ˆä¾‹å¦‚ä¿å­˜ä¸º <code>SPEC.md</code>ï¼‰ï¼Œå¹¶æ ¹æ®éœ€è¦å°†ç›¸å…³éƒ¨åˆ†æä¾›ç»™ agentã€‚è®¸å¤šä½¿ç”¨å¼ºå¤§æ¨¡å‹çš„å¼€å‘è€…æ­£æ˜¯è¿™æ ·åšçš„â€”â€”spec æ–‡ä»¶åœ¨ä¼šè¯ä¹‹é—´æŒä¹…å­˜åœ¨ï¼Œæ¯å½“é¡¹ç›®å·¥ä½œæ¢å¤æ—¶éƒ½èƒ½ä¸º AI æä¾›é”šç‚¹ã€‚è¿™ç¼“è§£äº†å½“å¯¹è¯å†å²è¿‡é•¿æˆ–å¿…é¡»é‡å¯ agent æ—¶å¯èƒ½å‘ç”Ÿçš„â€œå¥å¿˜â€é—®é¢˜ã€‚è¿™ç±»ä¼¼äºå›¢é˜Ÿä¸­ä½¿ç”¨äº§å“éœ€æ±‚æ–‡æ¡£ï¼ˆPRDï¼‰çš„æ–¹å¼ï¼šä¸€ä»½æ¯ä¸ªäººï¼ˆæ— è®ºæ˜¯äººè¿˜æ˜¯ AIï¼‰éƒ½èƒ½æŸ¥é˜…ä»¥ä¿æŒæ­£è½¨çš„å‚è€ƒæ–‡æ¡£ã€‚æ­£å¦‚ä¸€ä½å·¥ç¨‹å¸ˆè§‚å¯Ÿåˆ°çš„ï¼Œæœ‰ç»éªŒçš„äººé€šå¸¸â€œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fsimonwillison.net%2F2025%2FOct%2F7%2Fvibe-engineering%2F" target="_blank" title="https://simonwillison.net/2025/Oct/7/vibe-engineering/" ref="nofollow noopener noreferrer">å…ˆç¼–å†™è‰¯å¥½çš„æ–‡æ¡£</a>ï¼Œæ¨¡å‹å¯èƒ½ä»…å‡­è¯¥è¾“å…¥å°±èƒ½æ„å»ºåŒ¹é…çš„å®ç°â€ã€‚è€Œ spec å°±æ˜¯é‚£ä»½æ–‡æ¡£ã€‚</p>
<p><strong>ä¿æŒç›®æ ‡å¯¼å‘ï¼š</strong> ä¸º AI agent ç¼–å†™çš„ high-level spec åº”è¯¥æ›´å¤šåœ°å…³æ³¨æ˜¯ä»€ä¹ˆå’Œä¸ºä»€ä¹ˆï¼Œè€Œä¸æ˜¯ï¼ˆè‡³å°‘æœ€åˆï¼‰ç»†ææœ«èŠ‚çš„æ€ä¹ˆåšã€‚æŠŠå®ƒæƒ³è±¡æˆç”¨æˆ·æ•…äº‹å’ŒéªŒæ”¶æ ‡å‡†ï¼šç”¨æˆ·æ˜¯è°ï¼Ÿä»–ä»¬éœ€è¦ä»€ä¹ˆï¼ŸæˆåŠŸæ˜¯ä»€ä¹ˆæ ·å­ï¼Ÿï¼ˆä¾‹å¦‚â€œç”¨æˆ·å¯ä»¥æ·»åŠ ã€ç¼–è¾‘ã€å®Œæˆä»»åŠ¡ï¼›æ•°æ®æŒä¹…ä¿å­˜ï¼›åº”ç”¨å“åº”è¿…é€Ÿä¸”å®‰å…¨â€ï¼‰ã€‚è¿™ä½¿ AI çš„è¯¦ç»† spec æ¤æ ¹äºç”¨æˆ·éœ€æ±‚å’Œç»“æœï¼Œè€Œä¸ä»…ä»…æ˜¯æŠ€æœ¯å¾…åŠäº‹é¡¹ã€‚æ­£å¦‚ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.blog%2Fai-and-ml%2Fgenerative-ai%2Fspec-driven-development-with-ai-get-started-with-a-new-open-source-toolkit%2F" target="_blank" title="https://github.blog/ai-and-ml/generative-ai/spec-driven-development-with-ai-get-started-with-a-new-open-source-toolkit/" ref="nofollow noopener noreferrer">GitHub Spec Kit docs</a> æ–‡æ¡£æ‰€è¯´ï¼Œæä¾›ä½ æ­£åœ¨æ„å»ºä»€ä¹ˆä»¥åŠä¸ºä»€ä¹ˆçš„ high-level æè¿°ï¼Œè®© coding agent ç”Ÿæˆä¸“æ³¨äºç”¨æˆ·ä½“éªŒå’ŒæˆåŠŸæ ‡å‡†çš„è¯¦ç»† specã€‚ä»è¿™ä¸ªå®è§‚æ„¿æ™¯å¼€å§‹ï¼Œå¯ä»¥é˜²æ­¢ agent åœ¨åç»­ç¼–ç æ—¶åªè§æ ‘æœ¨ä¸è§æ£®æ—ã€‚</p>
<h2 data-id="heading-1">2. åƒä¸“ä¸š PRDï¼ˆæˆ– SRSï¼‰é‚£æ ·æ„å»º spec</h2>
<p><strong>å°†ä½ çš„ AI spec è§†ä¸ºä¸€ä»½ç»“æ„åŒ–æ–‡æ¡£ï¼ˆPRDï¼‰ï¼ŒåŒ…å«æ¸…æ™°çš„ç« èŠ‚ï¼Œè€Œä¸æ˜¯ä¸€å †æ¾æ•£çš„ç¬”è®°ã€‚</strong></p>
<p>è®¸å¤šå¼€å‘è€…å†™ç»™ AI agent çš„ specï¼Œæ–¹å¼ä¸ä¼ ç»Ÿçš„äº§å“éœ€æ±‚æ–‡æ¡£ï¼ˆPRDï¼‰æˆ–ç³»ç»Ÿè®¾è®¡æ–‡æ¡£éå¸¸ç›¸ä¼¼â€”â€”å…¨é¢ã€ç»„ç»‡è‰¯å¥½ï¼Œä¸”ä¾¿äºâ€œå­—é¢ç†è§£â€çš„ AI è§£æã€‚è¿™ç§æ›´æ­£å¼çš„å†™æ³•ä¸º agent æä¾›äº†ä¸€ä»½å¯éµå¾ªçš„è“å›¾ï¼Œå¹¶å‡å°‘äº†æ­§ä¹‰ã€‚</p>
<p><strong>å…­ä¸ªæ ¸å¿ƒé¢†åŸŸï¼š</strong> GitHub å¯¹ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.blog%2Fai-and-ml%2Fgithub-copilot%2Fhow-to-write-a-great-agents-md-lessons-from-over-2500-repositories%2F" target="_blank" title="https://github.blog/ai-and-ml/github-copilot/how-to-write-a-great-agents-md-lessons-from-over-2500-repositories/" ref="nofollow noopener noreferrer">è¶…è¿‡ 2,500 ä¸ª agent é…ç½®æ–‡ä»¶çš„åˆ†æ</a> æ­ç¤ºäº†ä¸€ä¸ªæ¸…æ™°çš„æ¨¡å¼ï¼šæœ€æœ‰æ•ˆçš„ spec æ¶µç›–å…­ä¸ªé¢†åŸŸã€‚å¯ä»¥æŠŠå®ƒå½“ä½œå®Œæ•´æ€§æ£€æŸ¥æ¸…å•ï¼š</p>
<ol>
<li>
<p><strong>å‘½ä»¤ï¼š</strong> å°†å¯æ‰§è¡Œå‘½ä»¤æ”¾åœ¨å‰é¢â€”â€”ä¸ä»…ä»…æ˜¯å·¥å…·åç§°ï¼Œè€Œæ˜¯å¸¦æœ‰å‚æ•°çš„å®Œæ•´å‘½ä»¤ï¼š<code>npm test</code>ã€<code>pytest -v</code>ã€<code>npm run build</code>ã€‚agent ä¼šä¸æ–­å‚è€ƒè¿™äº›å‘½ä»¤ã€‚</p>
</li>
<li>
<p><strong>æµ‹è¯•ï¼š</strong> å¦‚ä½•è¿è¡Œæµ‹è¯•ã€ä½¿ç”¨ä»€ä¹ˆæ¡†æ¶ã€æµ‹è¯•æ–‡ä»¶ä½äºä½•å¤„ï¼Œä»¥åŠå­˜åœ¨ä»€ä¹ˆè¦†ç›–ç‡æœŸæœ›ã€‚</p>
</li>
<li>
<p><strong>é¡¹ç›®ç»“æ„ï¼š</strong> æºä»£ç ä½äºä½•å¤„ã€æµ‹è¯•æ”¾åœ¨å“ªé‡Œã€æ–‡æ¡£å½’å±ä½•å¤„ã€‚è¦æ˜ç¡®ï¼šâ€œ<code>src/</code> ç”¨äºåº”ç”¨ä»£ç ï¼Œ<code>tests/</code> ç”¨äºå•å…ƒæµ‹è¯•ï¼Œ<code>docs/</code> ç”¨äºæ–‡æ¡£ã€‚â€</p>
</li>
<li>
<p><strong>ä»£ç é£æ ¼ï¼š</strong> ä¸€ä¸ªçœŸå®çš„ä»£ç ç‰‡æ®µå±•ç¤ºä½ çš„é£æ ¼ï¼Œèƒœè¿‡ä¸‰æ®µæè¿°æ€§æ–‡å­—ã€‚åŒ…æ‹¬å‘½åçº¦å®šã€æ ¼å¼è§„åˆ™å’Œè‰¯å¥½è¾“å‡ºçš„ç¤ºä¾‹ã€‚</p>
</li>
<li>
<p><strong>Git å·¥ä½œæµï¼š</strong> åˆ†æ”¯å‘½åã€commit ä¿¡æ¯æ ¼å¼ã€PR è¦æ±‚ã€‚å¦‚æœä½ æ˜ç¡®è¯´æ˜ï¼Œagent ä¼šéµå¾ªè¿™äº›è§„åˆ™ã€‚</p>
</li>
<li>
<p><strong>è¾¹ç•Œæ¡ä»¶ï¼š</strong> agent ç»ä¸åº”æ¥è§¦çš„å†…å®¹â€”â€”å¯†é’¥ã€vendor ç›®å½•ã€ç”Ÿäº§ç¯å¢ƒé…ç½®ã€ç‰¹å®šæ–‡ä»¶å¤¹ã€‚â€œæ°¸è¿œä¸è¦æäº¤å¯†é’¥â€æ˜¯ GitHub ç ”ç©¶ä¸­æœ€å¸¸è§ã€ä¹Ÿæœ€æœ‰ç”¨çš„çº¦æŸä¹‹ä¸€ã€‚</p>
</li>
</ol>
<p><strong>æ˜ç¡®ä½ çš„æŠ€æœ¯æ ˆï¼š</strong> è¯´â€œReact 18 + TypeScriptã€Viteã€Tailwind CSSâ€ï¼Œè€Œä¸æ˜¯â€œReact é¡¹ç›®â€ã€‚åŒæ—¶å†™æ¸…ç‰ˆæœ¬ä¸å…³é”®ä¾èµ–ã€‚æ¨¡ç³Šçš„ spec å¾€å¾€åªä¼šäº§å‡ºæ¨¡ç³Šçš„ä»£ç ã€‚</p>
<p><strong>ä½¿ç”¨ä¸€è‡´çš„æ ¼å¼ï¼š</strong> æ¸…æ™°ä¸ºç‹ã€‚è®¸å¤šå¼€å‘è€…ä¼šåœ¨ spec ä¸­ä½¿ç”¨ Markdown æ ‡é¢˜ï¼Œç”šè‡³ç”¨ç±»ä¼¼ XML çš„æ ‡ç­¾æ¥åˆ’åˆ†ç« èŠ‚ï¼Œå› ä¸º AI æ¨¡å‹æ›´æ“…é•¿å¤„ç†ç»“æ„åŒ–æ–‡æœ¬ï¼Œè€Œä¸æ˜¯è‡ªç”±æ•£æ–‡ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥è¿™æ ·ç»„ç»‡ specï¼š</p>
<pre><code class="hljs language-md" lang="md"><span class="hljs-section"># Project spec: My team's tasks app</span>

<span class="hljs-section">## Objective</span>
<span class="hljs-bullet">-</span> Build a web app for small teams to manage tasks...

<span class="hljs-section">## Tech Stack</span>
<span class="hljs-bullet">-</span> React 18+, TypeScript, Vite, Tailwind CSS
<span class="hljs-bullet">-</span> Node.js/Express backend, PostgreSQL, Prisma ORM

<span class="hljs-section">## Commands</span>
<span class="hljs-bullet">-</span> Build: <span class="hljs-code">`npm run build`</span> (compiles TypeScript, outputs to dist/)
<span class="hljs-bullet">-</span> Test: <span class="hljs-code">`npm test`</span> (runs Jest, must pass before commits)
<span class="hljs-bullet">-</span> Lint: <span class="hljs-code">`npm run lint --fix`</span> (auto-fixes ESLint errors)

<span class="hljs-section">## Project Structure</span>
<span class="hljs-bullet">-</span> <span class="hljs-code">`src/`</span> â€“ Application source code
<span class="hljs-bullet">-</span> <span class="hljs-code">`tests/`</span> â€“ Unit and integration tests
<span class="hljs-bullet">-</span> <span class="hljs-code">`docs/`</span> â€“ Documentation

<span class="hljs-section">## Boundaries</span>
<span class="hljs-bullet">-</span> âœ… Always: Run tests before commits, follow naming conventions
<span class="hljs-bullet">-</span> âš ï¸ Ask first: Database schema changes, adding dependencies
<span class="hljs-bullet">-</span> ğŸš« Never: Commit secrets, edit node<span class="hljs-emphasis">_modules/, modify CI config
</span></code></pre>
<p>è¿™ç§ç»„ç»‡å±‚æ¬¡ä¸ä»…å¸®åŠ©ä½ æŠŠäº‹æƒ…æƒ³æ¸…æ¥šï¼Œä¹Ÿèƒ½å¸®åŠ© AI æ›´å¿«å®šä½ä¿¡æ¯ã€‚Anthropic çš„å·¥ç¨‹å¸ˆå»ºè®®<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.anthropic.com%2Fengineering%2Feffective-context-engineering-for-ai-agents" target="_blank" title="https://www.anthropic.com/engineering/effective-context-engineering-for-ai-agents" ref="nofollow noopener noreferrer">å°† prompt ç»„ç»‡æˆä¸åŒçš„éƒ¨åˆ†</a>ï¼ˆå¦‚ <code>&lt;background&gt;</code>ã€<code>&lt;instructions&gt;</code>ã€<code>&lt;tools&gt;</code>ã€<code>&lt;output_format&gt;</code> ç­‰ï¼‰ï¼Œæ­£æ˜¯å‡ºäºè¿™ä¸ªåŸå› â€”â€”å®ƒèƒ½ç»™æ¨¡å‹å¼ºæœ‰åŠ›çš„çº¿ç´¢ï¼ŒåŒºåˆ†ä¸åŒç±»å‹çš„ä¿¡æ¯ã€‚è®°ä½ï¼Œâ€œç®€æ´ä¸ä¸€å®šæ„å‘³ç€ç®€çŸ­â€â€”â€”å¦‚æœç»†èŠ‚å¾ˆé‡è¦ï¼Œä¸è¦å›é¿ï¼›ä½†è¦ä¿æŒä¸“æ³¨ã€‚</p>
<p><strong>å°† spec é›†æˆåˆ°ä½ çš„å·¥å…·é“¾ä¸­ï¼š</strong> å°† spec è§†ä¸ºä¸ç‰ˆæœ¬æ§åˆ¶å’Œ CI/CD ç»‘å®šçš„â€œå¯æ‰§è¡Œäº§å‡ºç‰©â€ã€‚<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.blog%2Fai-and-ml%2Fgenerative-ai%2Fspec-driven-development-with-ai-get-started-with-a-new-open-source-toolkit%2F" target="_blank" title="https://github.blog/ai-and-ml/generative-ai/spec-driven-development-with-ai-get-started-with-a-new-open-source-toolkit/" ref="nofollow noopener noreferrer">GitHub Spec Kit</a> ä½¿ç”¨å››é˜¶æ®µçš„é—¨æ§å·¥ä½œæµï¼Œè®© spec æˆä¸ºå·¥ç¨‹æµç¨‹çš„ä¸­å¿ƒã€‚ä¸å…¶å†™å®Œ spec å°±æç½®ï¼Œä¸å¦‚è®© spec é©±åŠ¨å®ç°ã€æ£€æŸ¥æ¸…å•å’Œä»»åŠ¡æ‹†è§£ã€‚ä½ çš„ä¸»è¦è§’è‰²æ˜¯æŒèˆµï¼›coding agent è´Ÿè´£å¤§éƒ¨åˆ†äº§å‡ºã€‚æ¯ä¸ªé˜¶æ®µéƒ½æœ‰æ˜ç¡®èŒè´£ï¼Œåœ¨å½“å‰é˜¶æ®µå®Œå…¨éªŒè¯ä¹‹å‰ï¼Œä¸è¿›å…¥ä¸‹ä¸€é˜¶æ®µï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e26591adff7f4e41900f4bd855719220~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5LiN5ZCD6aW85bmy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770798594&amp;x-signature=1n8zRtqSk97KM6%2FGTn80EJUpnVI%3D" alt="image.png" loading="lazy"/></p>
<ol>
<li>
<p><strong>Spec é˜¶æ®µï¼ˆSpecifyï¼‰ï¼š</strong> ä½ æä¾›å…³äºâ€œè¦æ„å»ºä»€ä¹ˆã€ä¸ºä»€ä¹ˆè¦æ„å»ºâ€çš„ high-level æè¿°ï¼Œcoding agent ç”Ÿæˆè¯¦ç»† specã€‚è¿™ä¸æ˜¯åœ¨è®¨è®ºæŠ€æœ¯æ ˆæˆ–åº”ç”¨è®¾è®¡â€”â€”è€Œæ˜¯ç”¨æˆ·æ—…ç¨‹ï¼ˆuser journeysï¼‰ã€ä½“éªŒï¼Œä»¥åŠâ€œæˆåŠŸé•¿ä»€ä¹ˆæ ·â€ã€‚è°ä¼šä½¿ç”¨å®ƒï¼Ÿå®ƒè§£å†³ä»€ä¹ˆé—®é¢˜ï¼Ÿä»–ä»¬ä¼šå¦‚ä½•ä¸ä¹‹äº¤äº’ï¼Ÿä½ å¯ä»¥æŠŠå®ƒçœ‹ä½œæ˜¯åœ¨å‹¾å‹’æœŸæœ›çš„ç”¨æˆ·ä½“éªŒï¼Œå†ç”± coding agent è¡¥é½ç»†èŠ‚ã€‚å®ƒä¼šéšç€ä½ æŒæ¡æ›´å¤šä¿¡æ¯è€ŒæŒç»­æ¼”è¿›ã€‚</p>
</li>
<li>
<p><strong>è®¡åˆ’é˜¶æ®µï¼ˆPlanï¼‰ï¼š</strong> ç°åœ¨è¿›å…¥æŠ€æœ¯å±‚é¢ã€‚ä½ æä¾›æœŸæœ›çš„æŠ€æœ¯æ ˆã€æ¶æ„ä¸çº¦æŸæ¡ä»¶ï¼Œcoding agent ç”Ÿæˆå…¨é¢çš„æŠ€æœ¯è®¡åˆ’ã€‚å¦‚æœä½ æ‰€åœ¨å›¢é˜Ÿå¯¹æŸäº›æŠ€æœ¯æœ‰æ ‡å‡†åŒ–è¦æ±‚ï¼Œå°±åœ¨è¿™é‡Œè¯´æ¸…æ¥šã€‚å¦‚æœä½ è¦ä¸å·²æœ‰ç³»ç»Ÿé›†æˆï¼Œæˆ–æœ‰åˆè§„è¦æ±‚ï¼Œä¹Ÿéƒ½æ”¾åœ¨è¿™é‡Œã€‚ä½ å¯ä»¥è¦æ±‚å¤šå¥—è®¡åˆ’æ–¹æ¡ˆæ¥å¯¹æ¯”å–èˆï¼›å¦‚æœä½ æä¾›å†…éƒ¨æ–‡æ¡£ï¼Œagent ä¹Ÿå¯ä»¥æŠŠä½ ä»¬çš„æ¶æ„æ¨¡å¼ç›´æ¥æ•´åˆè¿›è®¡åˆ’ã€‚</p>
</li>
<li>
<p><strong>ä»»åŠ¡é˜¶æ®µï¼ˆTasksï¼‰ï¼š</strong> coding agent å°† spec ä¸è®¡åˆ’æ‹†è§£æˆå®é™…å·¥ä½œâ€”â€”å°è€Œå¯å®¡æŸ¥çš„ä»»åŠ¡å—ï¼Œæ¯ä¸ªåªè§£å†³æ‹¼å›¾ä¸­çš„æŸä¸€å—ã€‚æ¯ä¸ªä»»åŠ¡éƒ½åº”å½“å¯ä»¥è¢«ç‹¬ç«‹å®ç°ä¸æµ‹è¯•ï¼Œè¿™å‡ ä¹å°±åƒæ˜¯åœ¨å¯¹ä½ çš„ AI agent åšæµ‹è¯•é©±åŠ¨å¼€å‘ã€‚ä½ ä¸ä¼šæ‹¿åˆ°â€œæ„å»ºèº«ä»½éªŒè¯â€è¿™ç§ç¬¼ç»Ÿä»»åŠ¡ï¼Œè€Œæ˜¯æ›´å…·ä½“çš„æ¡ç›®ï¼Œä¾‹å¦‚â€œåˆ›å»ºä¸€ä¸ªç”¨æˆ·æ³¨å†Œç«¯ç‚¹ï¼ˆendpointï¼‰ï¼Œå¹¶éªŒè¯ç”µå­é‚®ä»¶æ ¼å¼â€ã€‚</p>
</li>
<li>
<p><strong>å®ç°é˜¶æ®µï¼ˆImplementï¼‰ï¼š</strong> coding agent é€ä¸ªï¼ˆæˆ–å¹¶è¡Œï¼‰æ‰§è¡Œä»»åŠ¡ã€‚ä½ ä¸å¿…å®¡æŸ¥â€œä¸Šåƒè¡Œä»£ç å€¾å€’â€ï¼Œè€Œæ˜¯å®¡æŸ¥ä¸ºè§£å†³ç‰¹å®šé—®é¢˜è€Œåšçš„é›†ä¸­æ”¹åŠ¨ã€‚agent æ¸…æ¥šè¦æ„å»ºä»€ä¹ˆï¼ˆspecï¼‰ã€å¦‚ä½•æ„å»ºï¼ˆplanï¼‰ã€è¦åšä»€ä¹ˆï¼ˆtaskï¼‰ã€‚å…³é”®åœ¨äºï¼Œä½ è¦åœ¨æ¯ä¸ªé˜¶æ®µåšéªŒè¯ï¼šspec æ˜¯å¦å‡†ç¡®è¡¨è¾¾äº†ä½ çš„æ„å›¾ï¼Ÿè®¡åˆ’æ˜¯å¦è€ƒè™‘äº†çº¦æŸæ¡ä»¶ï¼ŸAI æ˜¯å¦é—æ¼äº†è¾¹ç•Œæƒ…å†µï¼Ÿè¿™å¥—æµç¨‹å†…ç½®äº†æ£€æŸ¥ç‚¹ï¼Œç¡®ä¿ä½ åœ¨ç»§ç»­æ¨è¿›å‰èƒ½åŠæ—¶è¯„ä¼°ã€å‘ç°åå·®å¹¶çº æ­£ã€‚</p>
</li>
</ol>
<p>è¿™ç§é—¨æ§å·¥ä½œæµèƒ½é˜²æ­¢ Willison æ‰€è¯´çš„â€œçº¸ç‰Œå±‹ä»£ç â€â€”â€”ç»ä¸èµ·å®¡æŸ¥çš„ã€è„†å¼±çš„ AI è¾“å‡ºã€‚Anthropic çš„æŠ€èƒ½ç³»ç»Ÿï¼ˆSkills systemï¼‰ä¹Ÿæä¾›äº†ç±»ä¼¼æ¨¡å¼ï¼Œè®©ä½ å®šä¹‰å¯å¤ç”¨ã€åŸºäº Markdown çš„è¡Œä¸ºä¾› agent è°ƒç”¨ã€‚æŠŠ spec åµŒå…¥è¿™äº›å·¥ä½œæµåï¼Œä½ å¯ä»¥ç¡®ä¿ spec æœªéªŒè¯å‰ï¼Œagent ä¸èƒ½ç»§ç»­å¾€ä¸‹èµ°ï¼›åŒæ—¶ï¼Œspec çš„æ›´æ”¹ä¹Ÿä¼šè‡ªåŠ¨ä¼ é€’åˆ°ä»»åŠ¡æ‹†è§£ä¸æµ‹è¯•ä¸­ã€‚</p>
<p><strong>è€ƒè™‘ç”¨ <code>agents.md</code> å®šä¹‰ä¸“é—¨è§’è‰²ï¼š</strong> å¯¹äºåƒ GitHub Copilot è¿™æ ·çš„å·¥å…·ï¼Œä½ å¯ä»¥åˆ›å»º <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.blog%2Fai-and-ml%2Fgithub-copilot%2Fhow-to-write-a-great-agents-md-lessons-from-over-2500-repositories%2F" target="_blank" title="https://github.blog/ai-and-ml/github-copilot/how-to-write-a-great-agents-md-lessons-from-over-2500-repositories/" ref="nofollow noopener noreferrer"><code>agents.md</code> æ–‡ä»¶</a> æ¥å®šä¹‰ä¸“é—¨çš„ agent è§’è‰²â€”â€”ç”¨äºæŠ€æœ¯å†™ä½œçš„ @docs-agentã€ç”¨äºè´¨é‡ä¿è¯çš„ @test-agentã€ç”¨äºä»£ç å®¡æŸ¥çš„ @security-agentã€‚æ¯ä¸ªæ–‡ä»¶éƒ½å……å½“è¯¥è§’è‰²è¡Œä¸ºã€å‘½ä»¤ä¸è¾¹ç•Œçš„â€œä¸“æ³¨ specâ€ã€‚å½“ä½ å¸Œæœ›æŒ‰ä»»åŠ¡åˆ‡æ¢ä¸åŒ agentï¼Œè€Œä¸æ˜¯åªç”¨ä¸€ä¸ªé€šç”¨åŠ©æ‰‹æ—¶ï¼Œè¿™ä¼šç‰¹åˆ«æœ‰ç”¨ã€‚</p>
<p><strong>ä¸º Agent Experience (AX) è€Œè®¾è®¡ï¼š</strong> æ­£å¦‚æˆ‘ä»¬ä¸ºå¼€å‘è€…ä½“éªŒï¼ˆdeveloper experienceï¼ŒDXï¼‰è®¾è®¡ API ä¸€æ ·ï¼Œä¹Ÿå¯ä»¥è€ƒè™‘ä¸ºâ€œAgent Experienceâ€è®¾è®¡ specã€‚è¿™æ„å‘³ç€ä½¿ç”¨æ¸…æ™°ã€å¯è§£æçš„æ ¼å¼ï¼šagent å°†è¦è°ƒç”¨çš„ API çš„ OpenAPI schemaã€é¢å‘ LLM çš„æ–‡æ¡£æ‘˜è¦æ–‡ä»¶ <code>llms.txt</code>ã€ä»¥åŠæ˜ç¡®çš„ç±»å‹å®šä¹‰ç­‰ã€‚æ™ºèƒ½ä½“ AI åŸºé‡‘ä¼šï¼ˆAAIFï¼‰æ­£åœ¨æ ‡å‡†åŒ–åƒ MCPï¼ˆæ¨¡å‹ä¸Šä¸‹æ–‡åè®®ï¼‰è¿™ç±»å·¥å…·é›†æˆåè®®â€”â€”éµå¾ªè¿™äº›æ¨¡å¼çš„ specï¼Œæ›´å®¹æ˜“è¢« agent ç¨³å®šåœ°ç†è§£ä¸æ‰§è¡Œã€‚</p>
<p><strong>PRD ä¸ SRS æ€ç»´æ–¹å¼ï¼š</strong> å€Ÿé‰´æˆç†Ÿçš„æ–‡æ¡£å®è·µå¾ˆæœ‰å¸®åŠ©ã€‚å¯¹äº AI agent specï¼Œä½ é€šå¸¸ä¼šæŠŠä¸¤è€…èåˆåˆ°åŒä¸€ä»½æ–‡æ¡£ä¸­ï¼ˆå¦‚ä¸Šæ‰€ç¤ºï¼‰ï¼Œä½†åŒæ—¶è¦†ç›–è¿™ä¸¤ä¸ªè§†è§’å¾€å¾€æ›´ç¨³ã€‚æŒ‰ PRD çš„å†™æ³•èƒ½ç¡®ä¿ä½ è¡¥é½ä»¥ç”¨æˆ·ä¸ºä¸­å¿ƒçš„ä¸Šä¸‹æ–‡ï¼ˆâ€œæ¯ä¸ªåŠŸèƒ½èƒŒåçš„åŸå› â€ï¼‰ï¼Œé¿å… AI ä¸ºé”™è¯¯çš„ç›®æ ‡åšä¼˜åŒ–ï¼›æŒ‰ SRS çš„å†™æ³•æ‰©å±•ï¼Œåˆ™èƒ½æ˜ç¡® AI ç”Ÿæˆæ­£ç¡®ä»£ç æ‰€éœ€çš„å…³é”®ç»†èŠ‚ï¼ˆä¾‹å¦‚ç”¨ä»€ä¹ˆæ•°æ®åº“ã€è°ƒç”¨ä»€ä¹ˆ APIï¼‰ã€‚å¾ˆå¤šå¼€å‘è€…å‘ç°ï¼Œå¤šåšä¸€ç‚¹å‰æœŸåŠŸå¤«ï¼Œèƒ½æ˜¾è‘—å‡å°‘åç»­ä¸ agent çš„è¯¯è§£æˆæœ¬ã€‚</p>
<p><strong>ä½¿ spec æˆä¸ºâ€œæ´»æ–‡æ¡£â€ï¼š</strong> ä¸è¦å†™å®Œå°±å¿˜ã€‚éšç€ä½ å’Œ agent åšå‡ºå†³ç­–æˆ–å‘ç°æ–°ä¿¡æ¯ï¼ŒåŠæ—¶æ›´æ–° specã€‚å¦‚æœ AI éœ€è¦æ›´æ”¹æ•°æ®æ¨¡å‹ï¼Œæˆ–ä½ å†³å®šç æ‰æŸä¸ªåŠŸèƒ½ï¼Œéœ€è¦åœ¨ spec ä¸­åæ˜ å‡ºæ¥ï¼Œè®©å®ƒå§‹ç»ˆä¿æŒä¸ºâ€œåŸºå‡†äº‹å®â€ï¼ˆground truthï¼‰ã€‚æŠŠå®ƒå½“ä½œå—ç‰ˆæœ¬æ§åˆ¶çš„æ–‡æ¡£ã€‚åœ¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.blog%2Fai-and-ml%2Fgenerative-ai%2Fspec-driven-development-with-ai-get-started-with-a-new-open-source-toolkit%2F" target="_blank" title="https://github.blog/ai-and-ml/generative-ai/spec-driven-development-with-ai-get-started-with-a-new-open-source-toolkit/" ref="nofollow noopener noreferrer">spec é©±åŠ¨çš„å·¥ä½œæµä¸­</a>ï¼Œspec ä¼šé©±åŠ¨å®ç°ã€æµ‹è¯•ä¸ä»»åŠ¡æ‹†è§£ï¼›åœ¨ spec éªŒè¯ä¹‹å‰ï¼Œä½ ä¸ä¼šè¿›å…¥ç¼–ç é˜¶æ®µã€‚è¿™ä¸ªä¹ æƒ¯èƒ½ä¿æŒé¡¹ç›®çš„ä¸€è‡´æ€§ï¼Œå°¤å…¶åœ¨ä½ æˆ– agent æš‚æ—¶ç¦»å¼€ä¹‹åå†å›æ¥æ—¶æ›´æ˜æ˜¾ã€‚è®°ä½ï¼šspec ä¸ä»…æ˜¯å†™ç»™ AI çš„â€”â€”å®ƒä¹Ÿå¸®åŠ©ä½ ä½œä¸ºå¼€å‘è€…ä¿æŒç›‘ç£ï¼Œå¹¶ç¡®ä¿ AI çš„å·¥ä½œæ»¡è¶³çœŸå®éœ€æ±‚ã€‚</p>
<h2 data-id="heading-2">3. å°†ä»»åŠ¡åˆ†è§£ä¸ºæ¨¡å—åŒ– prompt å’Œä¸Šä¸‹æ–‡ï¼Œè€Œéä¸€ä¸ªå¤§ prompt</h2>
<p><strong>åˆ†è€Œæ²»ä¹‹ï¼š</strong> ä¸€æ¬¡ç»™ AI ä¸€ä¸ªä¸“æ³¨çš„ä»»åŠ¡ï¼Œè€Œä¸æ˜¯è¯•å›¾ç”¨ä¸€ä¸ªåŒ…å«æ‰€æœ‰å†…å®¹çš„åºå¤§ prompt æŠŠäº‹æƒ…â€œä¸€æ¬¡è¯´å®Œâ€ã€‚</p>
<p>æœ‰ç»éªŒçš„ AI å·¥ç¨‹å¸ˆéƒ½å‘ç°ï¼ŒæŠŠæ•´ä¸ªé¡¹ç›®ï¼ˆæ‰€æœ‰éœ€æ±‚ã€æ‰€æœ‰ä»£ç ã€æ‰€æœ‰æŒ‡ä»¤ï¼‰å¡è¿›å•ä¸ª prompt æˆ–å•æ¡ agent æ¶ˆæ¯ï¼Œæ˜¯èµ°å‘æ··ä¹±çš„æ ¹æºã€‚ä½ ä¸ä»…å®¹æ˜“è§¦å‘ token ä¸Šé™ï¼Œè¿˜ä¼šå› ä¸ºæ‰€è°“çš„ <a href="https://link.juejin.cn?target=https%3A%2F%2Fmaxpool.dev%2Fresearch-papers%2Fcurse_of_instructions_report.html" target="_blank" title="https://maxpool.dev/research-papers/curse_of_instructions_report.html" ref="nofollow noopener noreferrer">â€œæŒ‡ä»¤è¯…å’’ï¼ˆcurse of instructionsï¼‰â€</a> è€Œè®©æ¨¡å‹å¤±å»ç„¦ç‚¹â€”â€”æŒ‡ä»¤å¤ªå¤šæ—¶ï¼Œå®ƒå¾€å¾€ä»€ä¹ˆéƒ½åšä¸å¥½ã€‚æ›´å¥½çš„åšæ³•æ˜¯ç”¨æ¨¡å—åŒ–çš„æ–¹å¼è®¾è®¡ spec å’Œå·¥ä½œæµï¼šä¸€æ¬¡åªå¤„ç†ä¸€ä¸ªéƒ¨åˆ†ï¼Œåªæä¾›è¿™ä¸ªéƒ¨åˆ†çœŸæ­£éœ€è¦çš„ä¸Šä¸‹æ–‡ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d24c31ba41114e858bf1e34a7af13076~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5LiN5ZCD6aW85bmy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770798594&amp;x-signature=RUDVjoLKOwiYWmcJu4yEfhk81zg%3D" alt="image.png" loading="lazy"/></p>
<p><strong>è¿‡å¤šä¸Šä¸‹æ–‡ / æŒ‡ä»¤çš„è¯…å’’ï¼š</strong> ç ”ç©¶éªŒè¯äº†è®¸å¤šå¼€å‘è€…çš„è§‚ç‚¹ï¼šå½“ä½ åœ¨ prompt é‡Œå †æ›´å¤šæŒ‡ä»¤ or æ•°æ®æ—¶ï¼Œæ¨¡å‹å¯¹æ¯ä¸€æ¡æŒ‡ä»¤çš„éµå®ˆåº¦éƒ½ä¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fopenreview.net%2Fpdf%2F848f1332e941771aa491f036f6350af2effe0513.pdf" target="_blank" title="https://openreview.net/pdf/848f1332e941771aa491f036f6350af2effe0513.pdf" ref="nofollow noopener noreferrer">æ˜æ˜¾ä¸‹é™</a>ã€‚ä¸€é¡¹ç ”ç©¶æŠŠè¿™å«ä½œâ€œæŒ‡ä»¤è¯…å’’â€ï¼Œè¡¨æ˜å³ä½¿æ˜¯ GPT-4 å’Œ Claudeï¼Œåœ¨è¢«è¦æ±‚åŒæ—¶æ»¡è¶³å¾ˆå¤šè¦æ±‚æ—¶ä¹Ÿä¼šåƒåŠ›ã€‚å®é™…æ“ä½œä¸­ï¼Œå¦‚æœä½ ç»™å‡º 10 æ¡è¯¦ç»†è§„åˆ™ï¼ŒAI å¾€å¾€åªä¼šè®¤çœŸéµå®ˆå‰å‡ æ¡ï¼Œåé¢çš„å°±å¼€å§‹è¢«å¿½ç•¥ã€‚æ›´å¥½çš„ç­–ç•¥æ˜¯â€œè¿­ä»£èšç„¦â€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmaxpool.dev%2Fresearch-papers%2Fcurse_of_instructions_report.html" target="_blank" title="https://maxpool.dev/research-papers/curse_of_instructions_report.html" ref="nofollow noopener noreferrer">è¡Œä¸šæŒ‡å—</a> å»ºè®®æŠŠå¤æ‚éœ€æ±‚æ‹†æˆé¡ºåºæ‰§è¡Œçš„ç®€å•æŒ‡ä»¤ä½œä¸ºæœ€ä½³å®è·µã€‚è®© AI ä¸€æ¬¡åªä¸“æ³¨äºä¸€ä¸ªå­é—®é¢˜ï¼Œå®Œæˆä¹‹åå†ç»§ç»­ä¸‹ä¸€æ­¥ï¼Œè¿™æ ·æ—¢èƒ½ä¿æŒè´¨é‡ï¼Œåˆè®©é”™è¯¯æ›´å¯æ§ã€‚</p>
<p><strong>å°† spec åˆ†ä¸ºé˜¶æ®µæˆ–ç»„ä»¶ï¼š</strong> å¦‚æœä½ çš„ spec æ–‡æ¡£éå¸¸é•¿ï¼Œæˆ–è€…è¦†ç›–äº†å¾ˆå¤šé¢†åŸŸï¼Œå¯ä»¥è€ƒè™‘æŠŠå®ƒæ‹†æˆè‹¥å¹²éƒ¨åˆ†ï¼ˆç‰©ç†ä¸Šåˆ†æˆå¤šä¸ªæ–‡ä»¶ï¼Œæˆ–åœ¨åŒä¸€æ–‡æ¡£ä¸­æ¸…æ™°åˆ†èŠ‚ï¼‰ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥æœ‰â€œåç«¯ API specâ€éƒ¨åˆ†ï¼Œå’Œâ€œå‰ç«¯ UI specâ€éƒ¨åˆ†ã€‚AI åœ¨å¤„ç†åç«¯æ—¶ï¼Œå¹¶ä¸éœ€è¦å‰ç«¯ specï¼Œåä¹‹äº¦ç„¶ã€‚å¾ˆå¤šé‡‡ç”¨å¤š agent æ¶æ„çš„å›¢é˜Ÿï¼Œç”šè‡³ä¼šä¸ºæ¯ä¸€éƒ¨åˆ†åˆ›å»ºç‹¬ç«‹çš„ agent æˆ–å­æµç¨‹â€”â€”ä¾‹å¦‚ï¼Œä¸€ä¸ª agent è´Ÿè´£æ•°æ®åº“ / æ¨¡å‹ï¼Œå¦ä¸€ä¸ªè´Ÿè´£ API é€»è¾‘ï¼Œå†ä¸€ä¸ªè´Ÿè´£å‰ç«¯â€”â€”æ¯ä¸ªåªæ‹¿åˆ°ä¸è‡ªå·±ç›¸å…³çš„ specã€‚å³ä¾¿ä½ ä½¿ç”¨å•ä¸ª agentï¼Œä¹Ÿå¯ä»¥é€šè¿‡ä»…å°†ç›¸å…³ spec éƒ¨åˆ†å¤åˆ¶åˆ°è¯¥ä»»åŠ¡çš„ prompt ä¸­æ¥æ¨¡æ‹Ÿè¿™ä¸€ç‚¹ã€‚è¦é¿å…ä¸Šä¸‹æ–‡è¿‡è½½ï¼šæ­£å¦‚ <a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.digitalocean.com%2Fproducts%2Fgradient-ai-platform%2Fconcepts%2Fcontext-management%2F" target="_blank" title="https://docs.digitalocean.com/products/gradient-ai-platform/concepts/context-management/" ref="nofollow noopener noreferrer">DigitalOcean AI æŒ‡å—</a> æ‰€æé†’çš„ï¼Œä¸è¦åœ¨ä¸€ä¸ª prompt é‡Œåˆåšèº«ä»½éªŒè¯ï¼Œåˆæ”¹æ•°æ®åº“ schemaã€‚è®©æ¯ä¸ª prompt éƒ½ç´§ç´§å›´ç»•ä¸€ä¸ªå½“å‰ç›®æ ‡ã€‚</p>
<p><strong>å¤§å‹ spec çš„æ‰©å±•ç›®å½• / æ‘˜è¦ï¼š</strong> ä¸€ä¸ªå¾ˆå®ç”¨çš„å°æŠ€å·§ï¼Œæ˜¯è®© agent ä¸º spec æ„å»ºä¸€ä¸ªâ€œå¸¦æ‘˜è¦çš„æ‰©å±•ç›®å½•â€ã€‚æœ¬è´¨ä¸Šï¼Œå®ƒå°±æ˜¯ä¸€ä»½â€œspec æ‘˜è¦â€ï¼ŒæŠŠæ¯ä¸ªéƒ¨åˆ†å‹ç¼©æˆå‡ ä¸ªå…³é”®ç‚¹æˆ–å…³é”®è¯ï¼Œå¹¶æ ‡å‡ºå¯ä»¥æŸ¥çœ‹è¯¦ç»†å†…å®¹çš„ä½ç½®ã€‚æ¯”å¦‚ï¼Œå¦‚æœå®Œæ•´ spec é‡Œæœ‰ä¸€èŠ‚â€œå®‰å…¨è¦æ±‚â€é•¿è¾¾ 500 å­—ï¼Œä½ å¯ä»¥è®© agent æŠŠå®ƒæ€»ç»“æˆï¼šâ€œå®‰å…¨ï¼šä½¿ç”¨ HTTPSï¼Œä¿æŠ¤ API å¯†é’¥ï¼Œå®æ–½è¾“å…¥éªŒè¯ï¼ˆè§å®Œæ•´ spec Â§4.2ï¼‰â€ã€‚åœ¨è§„åˆ’é˜¶æ®µå…ˆåšå‡ºè¿™æ ·çš„åˆ†å±‚æ‘˜è¦ï¼Œä½ å°±èƒ½å¾—åˆ°ä¸€ä¸ªå¯ä»¥å¸¸é©»åœ¨ prompt é‡Œçš„â€œé¸Ÿç°å›¾â€ï¼Œè€Œç»†èŠ‚åˆ™åœ¨ä¸éœ€è¦æ—¶ä¿æŒå¸è½½çŠ¶æ€ã€‚è¿™ä¸ªæ‰©å±•ç›®å½•å°±åƒç´¢å¼•ï¼šagent å¯ä»¥å…ˆçœ‹å®ƒï¼Œç„¶åè¯´â€œå•Šå“ˆï¼Œè¿™é‡Œæœ‰ä¸€èŠ‚å®‰å…¨ç›¸å…³å†…å®¹éœ€è¦çœ‹çœ‹â€ï¼Œæ¥ç€ä½ å†æŒ‰éœ€æä¾›é‚£ä¸€å°èŠ‚çš„å…¨æ–‡ã€‚è¿™å¾ˆåƒäººç±»å¼€å‘è€…çœ‹ç›®å½•ã€å†ç¿»åˆ° spec æ–‡æ¡£å¯¹åº”é¡µé¢çš„è¿‡ç¨‹ã€‚</p>
<p>è¦å®ç°è¿™ä¸€ç‚¹ï¼Œä½ å¯ä»¥åœ¨å†™å®Œ spec åè¿™æ ·æç¤º agentï¼šâ€œå°†ä¸Šè¿° spec æ€»ç»“ä¸ºä¸€ä¸ªéå¸¸ç®€æ´çš„å¤§çº²ï¼ŒåŒ…å«æ¯ä¸ªéƒ¨åˆ†çš„å…³é”®ç‚¹å’Œå‚è€ƒæ ‡ç­¾ã€‚â€è¾“å‡ºç»“æœå¾ˆå¯èƒ½æ˜¯ä¸€ä»½åˆ†èŠ‚åˆ—è¡¨ï¼Œæ¯èŠ‚åªç”¨ä¸€ä¸¤å¥è¯æ¦‚æ‹¬ã€‚è¿™ä¸ªæ‘˜è¦å¯ä»¥æ”¾åœ¨ system / assistant æ¶ˆæ¯é‡Œï¼Œæ—¢èƒ½æŒ‡å¯¼ agent æŠŠæ³¨æ„åŠ›æ”¾åœ¨æ­£ç¡®çš„åœ°æ–¹ï¼Œåˆä¸ä¼šåƒæ‰å¤ªå¤š tokenã€‚å·²çŸ¥è¿™ç§<a href="https://link.juejin.cn?target=https%3A%2F%2Faddyo.substack.com%2Fp%2Fcontext-engineering-bringing-engineering" target="_blank" title="https://addyo.substack.com/p/context-engineering-bringing-engineering" ref="nofollow noopener noreferrer">åˆ†å±‚æ€»ç»“çš„æ–¹å¼</a>Â ï¼Œå¯ä»¥é€šè¿‡å¼ºåŒ–å¯¹é«˜å±‚ç»“æ„çš„å…³æ³¨ï¼Œå¸®åŠ© LLM ç»´æŒé•¿æœŸä¸Šä¸‹æ–‡â€”â€”ç›¸å½“äºè®© agent åœ¨è„‘æµ·é‡Œæºå¸¦ä¸€ä»½ spec çš„â€œå¿ƒæ™ºåœ°å›¾â€ã€‚</p>
<p><strong>åˆ©ç”¨å­ agent æˆ–â€œæŠ€èƒ½â€å¤„ç†ä¸åŒ spec éƒ¨åˆ†ï¼š</strong> å¦ä¸€ç§æ›´é«˜çº§çš„æ–¹å¼ï¼Œæ˜¯ä½¿ç”¨å¤šä¸ªä¸“é—¨çš„ agentï¼ˆAnthropic ç§°ä¹‹ä¸º subagentï¼Œä½ ä¹Ÿå¯ä»¥ç†è§£æˆâ€œæŠ€èƒ½â€ï¼‰ã€‚æ¯ä¸ªå­ agent éƒ½é…ç½®ä¸ºæŸä¸ªç‰¹å®šé¢†åŸŸï¼Œå¹¶åªæ‹¿åˆ°ä¸è¯¥é¢†åŸŸç›¸å…³çš„é‚£éƒ¨åˆ† specã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥æœ‰ä¸€ä¸ªâ€œæ•°æ®åº“è®¾è®¡å¸ˆâ€å­ agentï¼Œå®ƒåªäº†è§£æ•°æ®æ¨¡å‹é‚£ä¸€èŠ‚ï¼›å†æœ‰ä¸€ä¸ªâ€œAPI å¼€å‘è€…â€å­ agentï¼Œåªçœ‹ API æ¥å£ specã€‚ä¸» agentï¼ˆæˆ–ä¸€ä¸ªç¼–æ’å™¨ï¼‰å¯ä»¥è‡ªåŠ¨æŠŠä»»åŠ¡è·¯ç”±ç»™åˆé€‚çš„å­ agentã€‚å¥½å¤„æ˜¯ï¼šæ¯ä¸ª agent è¦å¤„ç†çš„ä¸Šä¸‹æ–‡çª—å£æ›´å°ï¼Œè§’è‰²æ›´èšç„¦ï¼Œè¿™å¾€å¾€èƒ½<a href="https://link.juejin.cn?target=https%3A%2F%2F10xdevelopers.dev%2Fstructured%2Fclaude-code-with-subagents%2F" target="_blank" title="https://10xdevelopers.dev/structured/claude-code-with-subagents/" ref="nofollow noopener noreferrer">æé«˜å‡†ç¡®æ€§ï¼Œå¹¶å…è®¸åœ¨ç›¸äº’ç‹¬ç«‹çš„ä»»åŠ¡ä¸Šå¹¶è¡Œå·¥ä½œ</a>ã€‚Anthropic çš„ Claude Code æ”¯æŒä½ å®šä¹‰å¸¦æœ‰è‡ªå·± system prompt å’Œå·¥å…·é›†çš„å­ agentã€‚æ­£å¦‚ä»–ä»¬çš„æ–‡æ¡£ä¸­æ‰€è¯´ï¼šâ€œæ¯ä¸ªå­ agent éƒ½æœ‰ç‰¹å®šçš„ç›®çš„å’Œä¸“ä¸šé¢†åŸŸï¼Œä½¿ç”¨ç‹¬ç«‹äºä¸»å¯¹è¯çš„ä¸Šä¸‹æ–‡çª—å£ï¼Œå¹¶æœ‰è‡ªå®šä¹‰çš„ system prompt æŒ‡å¯¼å…¶è¡Œä¸ºã€‚â€ å½“å‡ºç°ä¸€ä¸ªä»»åŠ¡æ°å¥½å±äºæŸä¸ªå­ agent çš„é¢†åŸŸæ—¶ï¼ŒClaude å¯ä»¥æŠŠä»»åŠ¡å§”æ‰˜ç»™å®ƒï¼Œç”±å­ agent ç‹¬ç«‹è¿”å›ç»“æœã€‚</p>
<p><strong>å¹¶è¡Œ agent æé«˜ååé‡ï¼š</strong> åŒæ—¶è¿è¡Œå¤šä¸ª agentï¼Œæ­£åœ¨æˆä¸ºæå‡å¼€å‘è€…ç”Ÿäº§åŠ›çš„â€œä¸‹ä¸€ä¸ªå¤§è¶‹åŠ¿â€ã€‚ä¸å…¶ç­‰ä¸€ä¸ª agent å¹²å®Œå†å¼€ä¸‹ä¸€ä¸ªä»»åŠ¡ï¼Œä½ å¯ä»¥ä¸ºäº’ä¸é‡å çš„å·¥ä½œåŒæ—¶å¯åŠ¨å¤šä¸ª agentã€‚Willison æŠŠè¿™ç§°ä½œâ€œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fsimonwillison.net%2F2025%2FOct%2F7%2Fvibe-engineering%2F" target="_blank" title="https://simonwillison.net/2025/Oct/7/vibe-engineering/" ref="nofollow noopener noreferrer">æ‹¥æŠ±å¹¶è¡Œç¼–ç  agent</a>â€ï¼Œå¹¶æŒ‡å‡ºè¿™â€œå‡ºå¥‡åœ°é«˜æ•ˆï¼Œè™½ç„¶ç²¾ç¥è´Ÿæ‹…ä¸å°â€ã€‚å…³é”®åœ¨äºåˆç†åˆ’åˆ†ä»»åŠ¡è¾¹ç•Œï¼Œé¿å… agent ç›¸äº’å¹²æ‰°â€”â€”æ¯”å¦‚ï¼Œä¸€ä¸ª agent å†™åŠŸèƒ½ä»£ç ï¼Œå¦ä¸€ä¸ªå†™æµ‹è¯•ï¼Œæˆ–è€…ä¸åŒç»„ä»¶å¹¶è¡Œå¼€å‘ã€‚åƒ LangGraphã€OpenAI Swarm è¿™æ ·çš„ç¼–æ’æ¡†æ¶å¯ä»¥å¸®åŠ©åè°ƒè¿™äº› agentï¼Œè€Œé€šè¿‡å‘é‡æ•°æ®åº“ï¼ˆå¦‚ Chromaï¼‰è¿™æ ·çš„å…±äº«å†…å­˜ï¼Œå®ƒä»¬å¯ä»¥è®¿é—®å…¬å…±ä¸Šä¸‹æ–‡ï¼Œè€Œä¸éœ€è¦å†—ä½™ promptã€‚</p>
<p><strong>å• agent ä¸å¤š agentï¼šå„è‡ªé€‚ç”¨åœ¨ä»€ä¹ˆæ—¶å€™ï¼Ÿ</strong></p>






























<table><thead><tr><th>ç»´åº¦</th><th>å• agent</th><th>å¹¶è¡Œ / å¤š agent</th></tr></thead><tbody><tr><td><strong>ä¼˜åŠ¿</strong></td><td>è®¾ç½®æ›´ç®€å•ï¼›å¼€é”€æ›´å°ï¼›æ›´æ˜“è°ƒè¯•å’Œè¿½è¸ª</td><td>ååé‡æ›´é«˜ï¼›èƒ½å¤„ç†å¤æ‚ä¾èµ–å…³ç³»ï¼›å¯ä¸ºä¸åŒé¢†åŸŸé…ç½®ä¸“é—¨çš„ agent</td></tr><tr><td><strong>æŒ‘æˆ˜</strong></td><td>å¤§é¡¹ç›®å®¹æ˜“ä¸Šä¸‹æ–‡è¿‡è½½ï¼›è¿­ä»£è¾ƒæ…¢ï¼›å­˜åœ¨å•ç‚¹æ•…éšœ</td><td>åè°ƒå¼€é”€å¤§ï¼›å¯èƒ½å‡ºç°å†²çªï¼›éœ€è¦å…±äº«å†…å­˜ï¼ˆä¾‹å¦‚å‘é‡æ•°æ®åº“ï¼‰</td></tr><tr><td><strong>é€‚ç”¨åœºæ™¯</strong></td><td>ç›¸å¯¹ç‹¬ç«‹çš„æ¨¡å—ï¼›ä¸­å°å‹é¡¹ç›®ï¼›æ—©æœŸåŸå‹é˜¶æ®µ</td><td>å¤§å‹ä»£ç åº“ï¼›ä¸€äººå†™ä»£ç  + ä¸€äººå†™æµ‹è¯• + ä¸€äººåšè¯„å®¡ï¼›å½¼æ­¤ç‹¬ç«‹çš„åŠŸèƒ½æ¨¡å—</td></tr><tr><td><strong>Tips</strong></td><td>ä½¿ç”¨ spec æ‘˜è¦ï¼›æŒ‰ä»»åŠ¡åˆ·æ–°ä¸Šä¸‹æ–‡ï¼›åœ¨åˆ‡æ¢å¤§åŠŸèƒ½æ—¶é‡å¼€ä¼šè¯</td><td>åˆæœŸå…ˆä» 2â€“3 ä¸ª agent å¼€å§‹ï¼›ç”¨ MCP å…±äº«å·¥å…·ï¼›æå‰å®šä¹‰æ¸…æ™°çš„èŒè´£è¾¹ç•Œ</td></tr></tbody></table>
<p>åœ¨å®è·µä¸­ï¼Œä½¿ç”¨å­ agent æˆ–æŠ€èƒ½ç‰¹å®šçš„æç¤ºå¯èƒ½æ˜¯è¿™æ ·çš„ï¼šä½ ç»´æŠ¤å¤šä¸ª spec æ–‡ä»¶ï¼ˆæˆ– prompt æ¨¡æ¿ï¼‰â€”â€”ä¾‹å¦‚ <code>SPEC_backend.md</code>ã€<code>SPEC_frontend.md</code> â€”â€” ç„¶åå‘Šè¯‰ AIï¼šâ€œå¤„ç†åç«¯ä»»åŠ¡æ—¶ï¼Œå‚è€ƒ <code>SPEC_backend</code>ï¼›å¤„ç†å‰ç«¯ä»»åŠ¡æ—¶ï¼Œå‚è€ƒ <code>SPEC_frontend</code>ã€‚â€ æˆ–è€…åœ¨ Cursor/Claude è¿™æ ·çš„å·¥å…·ä¸­ï¼Œä½ å®é™…ä¸Šä¼šä¸ºæ¯ä¸ªéƒ¨åˆ†å¯åŠ¨ä¸€ä¸ªå­ agentã€‚è¿™å½“ç„¶æ¯”å• agent å¾ªç¯æ›´å¤æ‚ï¼Œä½†å®ƒæ¨¡æ‹Ÿäº†äººç±»å¼€å‘è€…çš„åšæ³• â€”â€” æˆ‘ä»¬åœ¨å¿ƒé‡Œä¼šæŠŠå¤§å‹ spec æ‹†åˆ†æˆç›¸å…³çš„å—ï¼ˆä½ ä¸ä¼šä¸€æ¬¡æ€§æŠŠæ•´ä»½ 50 é¡µçš„ spec éƒ½è®°åœ¨è„‘å­é‡Œï¼›ä½ ä¼šå›å¿†å½“å‰ä»»åŠ¡éœ€è¦çš„éƒ¨åˆ†ï¼Œå¹¶å¯¹æ•´ä½“æ¶æ„æœ‰ä¸€ä¸ªå¤§è‡´äº†è§£ï¼‰ã€‚å¦‚å‰æ‰€è¿°ï¼ŒæŒ‘æˆ˜åœ¨äºç®¡ç†ç›¸äº’ä¾èµ–å…³ç³»ï¼šå­ agent ä»ç„¶éœ€è¦åè°ƒï¼ˆå‰ç«¯éœ€è¦çŸ¥é“åç«¯ spec ä¸­çš„ API çº¦å®šç­‰ï¼‰ã€‚ä¸€ä¸ªä¸­å¿ƒæ¦‚è§ˆï¼ˆæˆ–ä¸€ä¸ª â€œæ¶æ„å¸ˆâ€ agentï¼‰å¯ä»¥é€šè¿‡å¼•ç”¨å­ spec å¹¶ç¡®ä¿ä¸€è‡´æ€§æ¥æä¾›å¸®åŠ©ã€‚</p>
<p><strong>è®©æ¯ä¸ª prompt ä¸“æ³¨äºä¸€ä¸ªä»»åŠ¡/éƒ¨åˆ†ï¼š</strong> å³ä½¿æ²¡æœ‰èŠ±å“¨çš„å¤š agent è®¾ç½®ï¼Œä½ ä¹Ÿå¯ä»¥æ‰‹åŠ¨å¼ºåˆ¶æ¨¡å—åŒ–ã€‚ä¾‹å¦‚ï¼Œspec å†™å®Œåï¼Œä½ çš„ä¸‹ä¸€æ­¥å¯èƒ½æ˜¯ï¼šâ€œæ­¥éª¤ 1ï¼šå®ç°æ•°æ®åº“ schemaã€‚â€ä½ åªç»™ agent æä¾› spec çš„æ•°æ®åº“éƒ¨åˆ†ï¼ŒåŠ ä¸Š spec ä¸­çš„ä»»ä½•å…¨å±€çº¦æŸï¼ˆå¦‚æŠ€æœ¯æ ˆï¼‰ã€‚agent å¤„ç†è¿™ä¸ªã€‚ç„¶åå¯¹äºæ­¥éª¤ 2ï¼Œâ€œç°åœ¨å®ç°èº«ä»½éªŒè¯åŠŸèƒ½â€ï¼Œä½ æä¾› spec çš„ Auth éƒ¨åˆ†ï¼Œå¦‚æœéœ€è¦çš„è¯ï¼Œå¯èƒ½è¿˜æä¾› schema çš„ç›¸å…³éƒ¨åˆ†ã€‚é€šè¿‡ä¸ºæ¯ä¸ªä¸»è¦ä»»åŠ¡åˆ·æ–°ä¸Šä¸‹æ–‡ï¼Œä½ ç¡®ä¿æ¨¡å‹ä¸ä¼šæºå¸¦å¤§é‡å¯èƒ½åˆ†æ•£æ³¨æ„åŠ›çš„è¿‡æ—¶æˆ–æ— å…³ä¿¡æ¯ã€‚æ­£å¦‚ä¸€ä»½æŒ‡å—æ‰€å»ºè®®çš„ï¼šâ€œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.digitalocean.com%2Fproducts%2Fgradient-ai-platform%2Fconcepts%2Fcontext-management%2F" target="_blank" title="https://docs.digitalocean.com/products/gradient-ai-platform/concepts/context-management/" ref="nofollow noopener noreferrer">é‡æ–°å¼€å§‹ï¼šåœ¨åˆ‡æ¢ä¸»è¦åŠŸèƒ½æ—¶å¼€å§‹æ–°ä¼šè¯ä»¥æ¸…é™¤ä¸Šä¸‹æ–‡</a>â€ã€‚ä½ å¯ä»¥åœ¨æ¯æ¬¡éƒ½æé†’ agent å…³é”®çš„å…¨å±€è§„åˆ™ï¼ˆæ¥è‡ª spec çš„çº¦æŸéƒ¨åˆ†ï¼‰ï¼Œä½†å¦‚æœä¸éœ€è¦ï¼Œå°±ä¸è¦æŠŠæ•´ä¸ª spec éƒ½å¡è¿›å»ã€‚</p>
<p><strong>ä½¿ç”¨å†…è”æŒ‡ä»¤å’Œä»£ç  TODOï¼š</strong> å¦ä¸€ä¸ªæ¨¡å—åŒ–æŠ€å·§æ˜¯å°†ä½ çš„ä»£ç æˆ– spec ä½œä¸ºå¯¹è¯çš„æ´»è·ƒéƒ¨åˆ†ã€‚ä¾‹å¦‚ï¼Œç”¨ <code>// TODO</code> æ³¨é‡Šæ­å»ºä»£ç æ¡†æ¶ï¼Œæè¿°éœ€è¦å®Œæˆçš„å†…å®¹ï¼Œç„¶åè®© agent é€ä¸€å¡«å……ã€‚æ¯ä¸ª TODO æœ¬è´¨ä¸Šéƒ½æ˜¯ä¸€ä¸ªå°ä»»åŠ¡çš„è¿·ä½  specã€‚è¿™è®© AI ä¿æŒæ¿€å…‰èˆ¬çš„ä¸“æ³¨ï¼ˆâ€œæ ¹æ®è¿™ä¸ª spec ç‰‡æ®µå®ç°è¿™ä¸ªç‰¹å®šå‡½æ•°â€ï¼‰ï¼Œä½ å¯ä»¥åœ¨ç´§å¯†å¾ªç¯ä¸­è¿­ä»£ã€‚è¿™ç±»ä¼¼äºç»™ AI ä¸€ä¸ªå¾…åŠæ¸…å•é¡¹æ¥å®Œæˆï¼Œè€Œä¸æ˜¯ä¸€æ¬¡æ€§ç»™å‡ºæ•´ä¸ªæ¸…å•ã€‚</p>
<p>æ€»ç»“ï¼šå°è€Œèšç„¦çš„ä¸Šä¸‹æ–‡èƒœè¿‡ä¸€ä¸ªå¤§ promptã€‚è¿™æé«˜äº†è´¨é‡ï¼Œå¹¶é˜²æ­¢ AI å› ä¸€æ¬¡æ€§æ¥æ”¶å¤ªå¤šä¿¡æ¯è€Œâ€œä¸å ªé‡è´Ÿâ€ã€‚æ­£å¦‚ä¸€å¥—æœ€ä½³å®è·µæ‰€æ€»ç»“çš„ï¼Œå‘æ¨¡å‹æä¾› â€œå•ä¸€ä»»åŠ¡èšç„¦â€ å’Œ â€œä»…æä¾›ç›¸å…³ä¿¡æ¯â€ï¼Œé¿å…åˆ°å¤„å€¾å€’æ‰€æœ‰å†…å®¹ã€‚é€šè¿‡å°†å·¥ä½œæ„å»ºæˆæ¨¡å—â€”â€”å¹¶ä½¿ç”¨ spec æ‘˜è¦æˆ–å­ spec agent ç­‰ç­–ç•¥â€”â€”ä½ å°†ç»•è¿‡ä¸Šä¸‹æ–‡å¤§å°é™åˆ¶å’Œ AI çš„çŸ­æœŸè®°å¿†ä¸Šé™ã€‚è®°ä½ï¼Œä¸€ä¸ªâ€œå–‚å¾—å¥½â€çš„ AI å°±åƒä¸€ä¸ªâ€œå–‚å¾—å¥½â€çš„å‡½æ•°ï¼šåªç»™å®ƒ <a href="https://link.juejin.cn?target=https%3A%2F%2Faddyo.substack.com%2Fp%2Fcontext-engineering-bringing-engineering" target="_blank" title="https://addyo.substack.com/p/context-engineering-bringing-engineering" ref="nofollow noopener noreferrer">æ‰‹å¤´å·¥ä½œæ‰€éœ€çš„è¾“å…¥</a>ã€‚</p>
<h2 data-id="heading-3">4. å†…ç½®è‡ªæ£€ã€çº¦æŸå’Œäººç±»ä¸“ä¸šçŸ¥è¯†</h2>
<p><strong>è®©ä½ çš„ spec ä¸ä»…æ˜¯ agent çš„å¾…åŠæ¸…å•ï¼Œä¹Ÿæ˜¯è´¨é‡æ§åˆ¶çš„æŒ‡å—ï¼Œä¸è¦å®³æ€•æ³¨å…¥ä½ è‡ªå·±çš„ä¸“ä¸šçŸ¥è¯†ã€‚</strong></p>
<p>ä¸€ä»½å¥½çš„ AI agent spec ä¼šé¢„åˆ¤ AI å¯èƒ½å‡ºé”™çš„åœ°æ–¹ï¼Œå¹¶è®¾ç½®é˜²æŠ¤æ ã€‚å®ƒè¿˜ä¼šåˆ©ç”¨ä½ æ‰€çŸ¥é“çš„çŸ¥è¯†ï¼ˆé¢†åŸŸçŸ¥è¯†ã€è¾¹ç•Œæƒ…å†µã€â€œé™·é˜±â€ï¼‰è®© AI ä¸ä¼šåœ¨çœŸç©ºä¸­æ“ä½œã€‚æŠŠ spec æƒ³è±¡æˆ AI çš„æ•™ç»ƒå’Œè£åˆ¤ï¼šå®ƒåº”è¯¥é¼“åŠ±æ­£ç¡®çš„æ–¹æ³•ï¼Œå¹¶æŒ‡å‡ºçŠ¯è§„ã€‚</p>
<p><strong>ä½¿ç”¨ä¸‰å±‚è¾¹ç•Œï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.blog%2Fai-and-ml%2Fgithub-copilot%2Fhow-to-write-a-great-agents-md-lessons-from-over-2500-repositories%2F" target="_blank" title="https://github.blog/ai-and-ml/github-copilot/how-to-write-a-great-agents-md-lessons-from-over-2500-repositories/" ref="nofollow noopener noreferrer">GitHub å¯¹ 2,500+ ä¸ª agent æ–‡ä»¶çš„åˆ†æ</a> å‘ç°ï¼Œæœ€æœ‰æ•ˆçš„ spec ä½¿ç”¨ä¸‰å±‚è¾¹ç•Œç³»ç»Ÿï¼Œè€Œä¸æ˜¯ç®€å•çš„ç¦æ­¢äº‹é¡¹åˆ—è¡¨ã€‚è¿™ä¸º agent æä¾›äº†æ›´æ¸…æ™°çš„æŒ‡å¯¼æ¥è¯´æ˜ä½•æ—¶ç»§ç»­ã€ä½•æ—¶æš‚åœã€ä½•æ—¶åœæ­¢ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/90e8372bc6734a43802d98d4a510a0ab~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5LiN5ZCD6aW85bmy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770798594&amp;x-signature=BqB7nUXz9VMNMy6LR2DnRrnPH9c%3D" alt="image.png" loading="lazy"/></p>
<p>âœ… <strong>æ€»æ˜¯è¦åšï¼š</strong> agent åº”è¯¥æ— éœ€è¯¢é—®å°±æ‰§è¡Œçš„æ“ä½œã€‚â€œæäº¤å‰æ€»æ˜¯è¿è¡Œæµ‹è¯•ã€‚â€â€œæ€»æ˜¯éµå¾ªé£æ ¼æŒ‡å—ä¸­çš„å‘½åçº¦å®šã€‚â€â€œæ€»æ˜¯å°†é”™è¯¯è®°å½•åˆ°ç›‘æ§æœåŠ¡ã€‚â€</p>
<p>âš ï¸ <strong>å…ˆè¯¢é—®ï¼š</strong> éœ€è¦äººå·¥æ‰¹å‡†çš„æ“ä½œã€‚â€œä¿®æ”¹æ•°æ®åº“ schema å‰å…ˆè¯¢é—®ã€‚â€â€œæ·»åŠ æ–°ä¾èµ–å‰å…ˆè¯¢é—®ã€‚â€â€œæ›´æ”¹ CI/CD é…ç½®å‰å…ˆè¯¢é—®ã€‚â€è¿™ä¸€å±‚æ•è·é‚£äº›å¯èƒ½æ²¡é—®é¢˜ä½†éœ€è¦äººå·¥æ£€æŸ¥çš„é«˜å½±å“å˜æ›´ã€‚</p>
<p>ğŸš« <strong>æ°¸è¿œä¸è¦åšï¼š</strong> ç¡¬æ€§åœæ­¢ã€‚â€œæ°¸è¿œä¸è¦æäº¤å¯†ç æˆ– API å¯†é’¥ã€‚â€â€œæ°¸è¿œä¸è¦ç¼–è¾‘ <code>node_modules/</code> æˆ– <code>vendor/</code>ã€‚â€â€œæ°¸è¿œä¸è¦åœ¨æœªç»æ˜ç¡®æ‰¹å‡†çš„æƒ…å†µä¸‹åˆ é™¤å¤±è´¥çš„æµ‹è¯•ã€‚â€â€œæ°¸è¿œä¸è¦æäº¤å¯†é’¥â€æ˜¯ç ”ç©¶ä¸­æœ€å¸¸è§ã€ä¹Ÿæœ€æœ‰ç”¨çš„çº¦æŸã€‚</p>
<p>è¿™ç§ä¸‰å±‚æ–¹æ³•æ¯”æ‰å¹³åŒ–çš„è§„åˆ™åˆ—è¡¨æ›´åŠ ç»†è‡´ã€‚å®ƒé˜æ˜æœ‰äº›æ“ä½œæ€»æ˜¯å®‰å…¨çš„ï¼Œæœ‰äº›éœ€è¦ç›‘ç£ï¼Œæœ‰äº›åˆ™å®Œå…¨ç¦æ­¢ã€‚agent å¯ä»¥è‡ªä¿¡åœ°æ‰§è¡Œâ€œæ€»æ˜¯è¦åšâ€çš„é¡¹ç›®ï¼Œæ ‡è®°â€œå…ˆè¯¢é—®â€çš„é¡¹ç›®ä»¥ä¾›å®¡æŸ¥ï¼Œå¹¶åœ¨â€œæ°¸è¿œä¸è¦åšâ€çš„é¡¹ç›®ä¸Šç¡¬æ€§åœæ­¢ã€‚</p>
<p><strong>é¼“åŠ±è‡ªæ£€ï¼š</strong> ä¸€ä¸ªå¼ºå¤§çš„æ¨¡å¼æ˜¯è®© agent è‡ªåŠ¨å¯¹ç…§ spec éªŒè¯å…¶å·¥ä½œã€‚å¦‚æœä½ çš„å·¥å…·å…è®¸ï¼Œå¯ä»¥é›†æˆå•å…ƒæµ‹è¯•æˆ– lint æ£€æŸ¥ï¼Œè®© AI åœ¨ç”Ÿæˆä»£ç åè¿è¡Œã€‚ä½†å³ä½¿åœ¨ spec/prompt å±‚é¢ï¼Œä½ ä¹Ÿå¯ä»¥æŒ‡ç¤º AI è¿›è¡ŒäºŒæ¬¡æ£€æŸ¥ï¼šä¾‹å¦‚â€œå®ç°åï¼Œå°†ç»“æœä¸ spec è¿›è¡Œæ¯”è¾ƒï¼Œç¡®è®¤æ‰€æœ‰è¦æ±‚éƒ½å·²æ»¡è¶³ã€‚åˆ—å‡ºä»»ä½•æœªå¤„ç†çš„ spec é¡¹ã€‚â€è¿™æ¨åŠ¨ LLM åæ€å…¶è¾“å‡ºç›¸å¯¹äº spec çš„æƒ…å†µï¼Œæ•è·é—æ¼ã€‚è¿™æ˜¯å†…ç½®åœ¨æµç¨‹ä¸­çš„ä¸€ç§è‡ªæˆ‘å®¡è®¡å½¢å¼ã€‚</p>
<p>ä¾‹å¦‚ï¼Œä½ å¯ä»¥åœ¨ prompt æœ«å°¾æ·»åŠ ï¼šâ€œï¼ˆç¼–å†™å‡½æ•°åï¼Œå›é¡¾ä¸Šè¿°éœ€æ±‚åˆ—è¡¨ï¼Œç¡®ä¿æ¯ä¸€é¡¹éƒ½å¾—åˆ°æ»¡è¶³ï¼Œæ ‡è®°ä»»ä½•ç¼ºå¤±çš„é¡¹ï¼‰ã€‚â€ç„¶åæ¨¡å‹ä¼šï¼ˆç†æƒ³æƒ…å†µä¸‹ï¼‰è¾“å‡ºä»£ç ï¼Œåè·Ÿä¸€ä¸ªç®€çŸ­çš„æ£€æŸ¥æ¸…å•ï¼Œè¯´æ˜æ˜¯å¦æ»¡è¶³æ¯ä¸ªè¦æ±‚ã€‚è¿™é™ä½äº†å®ƒåœ¨è¿è¡Œæµ‹è¯•ä¹‹å‰å°±å¿˜è®°æŸäº›å†…å®¹çš„å¯èƒ½æ€§ã€‚è¿™ä¸æ˜¯ä¸‡æ— ä¸€å¤±çš„ï¼Œä½†ç¡®å®æœ‰å¸®åŠ©ã€‚</p>
<p><strong>ä½¿ç”¨ LLM-as-a-Judge è¿›è¡Œä¸»è§‚æ£€æŸ¥ï¼š</strong> å¯¹äºéš¾ä»¥è‡ªåŠ¨æµ‹è¯•çš„æ ‡å‡†â€”â€”ä»£ç é£æ ¼ã€å¯è¯»æ€§ã€å¯¹æ¶æ„æ¨¡å¼çš„éµå¾ªâ€”â€”è€ƒè™‘ä½¿ç”¨â€œLLM-as-a-Judgeï¼ˆLLM ä½œä¸ºè£åˆ¤ï¼‰â€ã€‚è¿™æ„å‘³ç€è®©ç¬¬äºŒä¸ª agentï¼ˆæˆ–å•ç‹¬çš„ promptï¼‰æ ¹æ®ä½ çš„ spec è´¨é‡æŒ‡å—å®¡æŸ¥ç¬¬ä¸€ä¸ª agent çš„è¾“å‡ºã€‚Anthropic å’Œå…¶ä»–å…¬å¸å‘ç°è¿™å¯¹ä¸»è§‚è¯„ä¼°å¾ˆæœ‰æ•ˆã€‚ä½ å¯ä»¥è¿™æ ·å†™ promptï¼šâ€œå®¡æŸ¥è¿™æ®µä»£ç æ˜¯å¦ç¬¦åˆæˆ‘ä»¬çš„é£æ ¼æŒ‡å—ã€‚æ ‡è®°ä»»ä½•è¿è§„è¡Œä¸ºã€‚â€ è£åˆ¤ agent è¿”å›åé¦ˆï¼Œè¦ä¹ˆè¢«æ¥å—ï¼Œè¦ä¹ˆè§¦å‘ä¿®æ”¹ã€‚è¿™åœ¨è¯­æ³•æ£€æŸ¥ä¹‹å¤–å¢åŠ äº†ä¸€å±‚è¯­ä¹‰è¯„ä¼°ã€‚</p>
<p><strong>ä¸€è‡´æ€§æµ‹è¯•ï¼š</strong> Willison ä¸»å¼ æ„å»ºä¸€è‡´æ€§æµ‹è¯•å¥—ä»¶â€”â€”ä»»ä½•å®ç°éƒ½å¿…é¡»é€šè¿‡çš„ç‹¬ç«‹äºè¯­è¨€çš„æµ‹è¯•ï¼ˆé€šå¸¸åŸºäº YAMLï¼‰ã€‚è¿™äº›æµ‹è¯•å……å½“å¥‘çº¦ï¼šå¦‚æœä½ æ­£åœ¨æ„å»º APIï¼Œä¸€è‡´æ€§æµ‹è¯•å¥—ä»¶æŒ‡å®šé¢„æœŸçš„è¾“å…¥/è¾“å‡ºï¼Œagent çš„ä»£ç å¿…é¡»æ»¡è¶³æ‰€æœ‰æµ‹è¯• caseã€‚è¿™æ¯”ä¸´æ—¶å•å…ƒæµ‹è¯•æ›´ä¸¥æ ¼ï¼Œå› ä¸ºå®ƒç›´æ¥æ¥è‡ª spec å¹¶ä¸”å¯ä»¥å¤ç”¨äºä¸åŒå®ç°ã€‚åœ¨ä½ çš„ spec çš„â€œæˆåŠŸæ ‡å‡†â€éƒ¨åˆ†åŒ…å«ä¸€è‡´æ€§æµ‹è¯•æ ‡å‡†ï¼ˆä¾‹å¦‚ï¼Œâ€œå¿…é¡»é€šè¿‡ <code>conformance/api-tests.yaml</code> ä¸­çš„æ‰€æœ‰æµ‹è¯•ç”¨ä¾‹â€ï¼‰ã€‚</p>
<p><strong>åœ¨ spec ä¸­åˆ©ç”¨æµ‹è¯•ï¼š</strong> å¦‚æœå¯èƒ½ï¼Œåœ¨ spec å’Œ prompt æµç¨‹ä¸­çº³å…¥æµ‹è¯•è®¡åˆ’ç”šè‡³å®é™…æµ‹è¯•ä»£ç ã€‚åœ¨ä¼ ç»Ÿå¼€å‘ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ TDD æˆ–ç¼–å†™æµ‹è¯•ç”¨ä¾‹æ¥æ˜ç¡®éœ€æ±‚â€”â€”ä½ å¯ä»¥å¯¹ AI åšåŒæ ·çš„äº‹æƒ…ã€‚ä¾‹å¦‚ï¼Œåœ¨ä½ çš„ spec çš„â€œæˆåŠŸæ ‡å‡†â€ä¸­ï¼Œä½ å¯ä»¥è¯´â€œè¿™äº›ç¤ºä¾‹è¾“å…¥åº”è¯¥äº§ç”Ÿè¿™äº›è¾“å‡ºâ€¦â€¦â€æˆ–â€œä»¥ä¸‹å•å…ƒæµ‹è¯•åº”è¯¥é€šè¿‡â€ã€‚å¯ä»¥æç¤º agent åœ¨è„‘æµ·ä¸­è¿è¡Œè¿™äº›ç”¨ä¾‹ï¼Œæˆ–è€…å¦‚æœå®ƒæœ‰è¿™ç§èƒ½åŠ›ç›´æ¥æ‰§è¡Œç”¨ä¾‹ã€‚Simon Willison æŒ‡å‡ºï¼Œæ‹¥æœ‰<a href="https://link.juejin.cn?target=https%3A%2F%2Fsimonwillison.net%2F2025%2FOct%2F7%2Fvibe-engineering%2F" target="_blank" title="https://simonwillison.net/2025/Oct/7/vibe-engineering/" ref="nofollow noopener noreferrer">å¼ºå¤§çš„æµ‹è¯•å¥—ä»¶</a>å°±åƒç»™ agent è¶…èƒ½åŠ›â€”â€”å½“æµ‹è¯•å¤±è´¥æ—¶ï¼Œå®ƒä»¬å¯ä»¥å¿«é€ŸéªŒè¯å’Œè¿­ä»£ã€‚åœ¨ AI ç¼–ç ä¸Šä¸‹æ–‡ä¸­ï¼Œåœ¨ spec ä¸­ä¸ºæµ‹è¯•æˆ–é¢„æœŸç»“æœç¼–å†™ä¸€äº›ä¼ªä»£ç å¯ä»¥æŒ‡å¯¼ agent çš„å®ç°ã€‚æ­¤å¤–ï¼Œä½ å¯ä»¥åœ¨å­ agent è®¾ç½®ä¸­ä½¿ç”¨ä¸“é—¨çš„â€œ<a href="https://link.juejin.cn?target=https%3A%2F%2F10xdevelopers.dev%2Fstructured%2Fclaude-code-with-subagents%2F" target="_blank" title="https://10xdevelopers.dev/structured/claude-code-with-subagents/" ref="nofollow noopener noreferrer">æµ‹è¯• agent</a>â€ï¼Œå®ƒæ ¹æ® spec çš„æ ‡å‡†å¹¶æŒç»­éªŒè¯â€œç¼–ç  agentâ€çš„è¾“å‡ºã€‚</p>
<p><strong>æ³¨å…¥ä½ çš„é¢†åŸŸçŸ¥è¯†ï¼š</strong> ä½ çš„ spec åº”è¯¥ä½“ç°åªæœ‰ç»éªŒä¸°å¯Œçš„å¼€å‘è€…æˆ–äº†è§£ä¸Šä¸‹æ–‡çš„äººæ‰ä¼šçŸ¥é“çš„è§è§£ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ æ­£åœ¨æ„å»ºä¸€ä¸ªç”µå•† agentï¼Œå¹¶ä¸”ä½ çŸ¥é“â€œäº§å“â€å’Œâ€œç±»åˆ«â€å…·æœ‰å¤šå¯¹å¤šå…³ç³»ï¼Œè¯·æ˜ç¡®è¯´æ˜ï¼ˆä¸è¦å‡è®¾ AI ä¼šæ¨æ–­å‡ºæ¥â€”â€”å®ƒå¯èƒ½ä¸ä¼šï¼‰ã€‚å¦‚æœæŸä¸ªåº“ç‰¹åˆ«æ£˜æ‰‹ï¼Œè¯·æåŠè¦é¿å…çš„é™·é˜±ã€‚æœ¬è´¨ä¸Šæ˜¯æŠŠä½ çš„æŒ‡å¯¼æ³¨å…¥åˆ° spec ä¸­ã€‚spec å¯ä»¥åŒ…å«è¿™æ ·çš„å»ºè®®ï¼šâ€œå¦‚æœä½¿ç”¨åº“ Xï¼Œè¯·æ³¨æ„ç‰ˆæœ¬ Y ä¸­çš„å†…å­˜æ³„æ¼é—®é¢˜ï¼ˆåº”ç”¨è§£å†³æ–¹æ¡ˆ Zï¼‰ã€‚â€è¿™ç§è¯¦ç»†ç¨‹åº¦æ˜¯å°†æ™®é€šçš„ AI è¾“å‡ºè½¬å˜ä¸ºçœŸæ­£å¥å£®è§£å†³æ–¹æ¡ˆçš„å…³é”®ï¼Œå› ä¸ºä½ å·²ç»å¼•å¯¼ AI è¿œç¦»å¸¸è§é™·é˜±ã€‚</p>
<p>å¦å¤–ï¼Œå¦‚æœä½ æœ‰åå¥½æˆ–é£æ ¼æŒ‡å—ï¼ˆæ¯”å¦‚ï¼Œâ€œåœ¨ React ä¸­ä½¿ç”¨å‡½æ•°ç»„ä»¶è€Œä¸æ˜¯ç±»ç»„ä»¶â€ï¼‰ï¼Œå°†å…¶ç¼–ç åˆ° spec ä¸­ã€‚ç„¶å AI ä¼šæ¨¡ä»¿ä½ çš„é£æ ¼ã€‚è®¸å¤šå·¥ç¨‹å¸ˆç”šè‡³åœ¨ spec ä¸­åŒ…å«å°ä¾‹å­ï¼Œä¾‹å¦‚ï¼Œâ€œæ‰€æœ‰ API å“åº”éƒ½åº”è¯¥æ˜¯ JSONã€‚ä¾‹å¦‚ï¼Œé”™è¯¯æ—¶ä½¿ç”¨ <code>{"error": "message"}</code>ã€‚â€é€šè¿‡ç»™å‡ºç®€å•ç¤ºä¾‹ï¼Œå°† AI é”šå®šåˆ°ä½ æƒ³è¦çš„ç²¾ç¡®æ ¼å¼ã€‚</p>
<p><strong>ç®€å•ä»»åŠ¡çš„æç®€ä¸»ä¹‰ï¼š</strong> è™½ç„¶æˆ‘ä»¬æå€¡è¯¦å°½çš„ specï¼Œä½†ä¸“ä¸šçŸ¥è¯†ä¹ŸåŒ…æ‹¬æ‡‚å¾—ä½•æ—¶ä¿æŒç®€æ´ã€‚å¯¹äºç›¸å¯¹ç®€å•ã€å­¤ç«‹çš„ä»»åŠ¡ï¼Œç¹ççš„ spec å®é™…ä¸Šå¯èƒ½é€ æˆå›°æƒ‘è€Œéå¸®åŠ©ã€‚è‹¥ä½ è®© agent åšç›´æ¥æ˜äº†çš„äº‹ï¼ˆå¦‚"åœ¨é¡µé¢ä¸Šå±…ä¸­ä¸€ä¸ª div"ï¼‰ï¼Œä½ å¯èƒ½åªéœ€è¦è¯´ï¼Œâ€œç¡®ä¿è§£å†³æ–¹æ¡ˆç®€æ´ï¼Œä¸è¦æ·»åŠ å¤šä½™çš„æ ‡è®°æˆ–æ ·å¼ã€‚â€ ä¸éœ€è¦å®Œæ•´çš„ PRDã€‚ç›¸åï¼Œå¯¹äºå¤æ‚çš„ä»»åŠ¡ï¼ˆæ¯”å¦‚â€œå®ç°å¸¦æœ‰ä»¤ç‰Œåˆ·æ–°å’Œé”™è¯¯å¤„ç†çš„ OAuth æµç¨‹â€ï¼‰ï¼Œæ‰æ˜¯ä½ è¯¦ç»†ç¼–å†™ spec çš„æ—¶å€™ã€‚ä¸€ä¸ªå¥½çš„ç»éªŒæ³•åˆ™æ˜¯ï¼šæ ¹æ®ä»»åŠ¡å¤æ‚åº¦è°ƒæ•´ spec è¯¦ç»†ç¨‹åº¦ã€‚ä¸è¦å¯¹å›°éš¾é—®é¢˜ spec ä¸è¶³ï¼ˆagent ä¼šå¤±è´¥æˆ–åç¦»è½¨é“ï¼‰ï¼Œä½†ä¹Ÿä¸è¦å¯¹çç¢é—®é¢˜è¿‡åº¦ specï¼ˆagent å¯èƒ½ä¼šè¢«çº ç¼ æˆ–åœ¨ä¸å¿…è¦çš„æŒ‡ä»¤ä¸Šæ¶ˆè€—ä¸Šä¸‹æ–‡ï¼‰ã€‚</p>
<p><strong>å¦‚éœ€è¦ï¼Œä¿æŒ AI çš„â€œäººè®¾â€ï¼š</strong> æœ‰æ—¶ï¼Œä½ çš„ spec çš„ä¸€éƒ¨åˆ†æ˜¯å®šä¹‰ agent åº”è¯¥å¦‚ä½•è¡Œä¸ºæˆ–å“åº”ï¼Œå°¤å…¶å½“ agent ä¸ç”¨æˆ·äº¤äº’æ—¶ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ„å»ºå®¢æˆ·æ”¯æŒ agentï¼Œä½ çš„ spec å¯èƒ½åŒ…å«è¿™æ ·çš„æŒ‡å¯¼åŸåˆ™ï¼šâ€œä½¿ç”¨å‹å¥½å’Œä¸“ä¸šçš„è¯­æ°”â€ï¼Œâ€œå¦‚æœä½ ä¸çŸ¥é“ç­”æ¡ˆï¼Œå¯»æ±‚è§£é‡Šæˆ–æä¾›åç»­è·Ÿè¿›ï¼Œè€Œä¸æ˜¯çŒœæµ‹ã€‚â€ è¿™ç±»è§„åˆ™ï¼ˆé€šå¸¸åŒ…å«åœ¨ system prompt ä¸­ï¼‰æœ‰åŠ©äºä¿æŒ AI çš„è¾“å‡ºä¸æœŸæœ›ä¸€è‡´ã€‚å®ƒä»¬æœ¬è´¨ä¸Šæ˜¯ AI è¡Œä¸ºçš„ spec é¡¹ã€‚ä¿æŒå®ƒä»¬ä¸€è‡´ï¼Œå¹¶åœ¨é•¿ä¼šè¯ä¸­éœ€è¦æ—¶æé†’æ¨¡å‹ï¼ˆå¦‚æœä¸åŠ ä»¥çº¦æŸï¼ŒLLM çš„é£æ ¼å¯èƒ½ä¼šéšæ—¶é—´â€œæ¼‚ç§»â€ï¼‰ã€‚</p>
<p><strong>ä½ ä»ç„¶æ˜¯å¾ªç¯ä¸­çš„æ‰§è¡Œè€…ï¼š</strong> spec èµ‹äºˆ agent æƒåŠ›ï¼Œä½†ä½ ä»ç„¶æ˜¯æœ€ç»ˆçš„è´¨é‡è¿‡æ»¤å™¨ã€‚å¦‚æœ agent äº§ç”Ÿäº†æŠ€æœ¯ä¸Šç¬¦åˆ spec ä½†æ„Ÿè§‰ä¸å¯¹çš„ä¸œè¥¿ï¼Œç›¸ä¿¡ä½ çš„åˆ¤æ–­ã€‚è¦ä¹ˆå®Œå–„ specï¼Œè¦ä¹ˆç›´æ¥è°ƒæ•´è¾“å‡ºã€‚AI agent çš„ä¼˜ç‚¹æ˜¯å®ƒä»¬ä¸ä¼šæ„Ÿåˆ°å†’çŠ¯â€”â€”å¦‚æœå®ƒä»¬äº¤ä»˜äº†ä¸€ä¸ªåç¦»é¢„æœŸçš„è®¾è®¡ï¼Œä½ å¯ä»¥è¯´ï¼Œâ€œå®é™…ä¸Šï¼Œè¿™ä¸æ˜¯æˆ‘çš„æœ¬æ„ï¼Œè®©æˆ‘ä»¬æ˜ç¡® spec å¹¶é‡åšã€‚â€spec æ˜¯ä¸ AI åä½œçš„æ´»æ–‡æ¡£ï¼Œè€Œä¸æ˜¯ä½ ä¸èƒ½æ›´æ”¹çš„ä¸€æ¬¡æ€§åˆåŒã€‚</p>
<p>Simon Willison å¹½é»˜åœ°å°†ä¸ AI agent åˆä½œæ¯”ä½œâ€œä¸€ç§éå¸¸å¥‡æ€ªçš„ç®¡ç†å½¢å¼â€ï¼Œç”šè‡³â€œä»ç¼–ç  agent ä¸­è·å¾—è‰¯å¥½ç»“æœæ„Ÿè§‰<a href="https://link.juejin.cn?target=https%3A%2F%2Fsimonwillison.net%2F2025%2FOct%2F7%2Fvibe-engineering%2F" target="_blank" title="https://simonwillison.net/2025/Oct/7/vibe-engineering/" ref="nofollow noopener noreferrer">ä¸ç®¡ç†äººç±»å®ä¹ ç”Ÿéå¸¸æ¥è¿‘</a>â€ã€‚ä½ éœ€è¦æä¾›æ¸…æ™°çš„æŒ‡ä»¤ï¼ˆspecï¼‰ï¼Œç¡®ä¿å®ƒä»¬æœ‰å¿…è¦çš„ä¸Šä¸‹æ–‡ï¼ˆspec å’Œç›¸å…³ä¿¡æ¯ï¼‰ï¼Œå¹¶ç»™å‡ºå¯æ“ä½œçš„åé¦ˆã€‚spec è®¾å®šäº†èˆå°ï¼Œä½†æ‰§è¡Œè¿‡ç¨‹ä¸­çš„ç›‘ç£å’Œåé¦ˆæ˜¯å…³é”®ã€‚å¦‚æœ AI æ˜¯â€œä¸€ä¸ªéå¸¸å¥‡æ€ªçš„æ•°å­—å®ä¹ ç”Ÿï¼Œå¦‚æœä½ ç»™å®ƒæœºä¼šï¼Œå®ƒç»å¯¹ä¼šä½œå¼Šâ€ï¼Œé‚£ä¹ˆä½ ç¼–å†™çš„ spec å’Œçº¦æŸå°±æ˜¯å¦‚ä½•é˜²æ­¢è¿™ç§ä½œå¼Šå¹¶è®©å®ƒä»¬ä¸“æ³¨äºä»»åŠ¡ã€‚</p>
<p>è¿™å°±æ˜¯å›æŠ¥ï¼šä¸€ä¸ªå¥½çš„ spec ä¸ä»…å‘Šè¯‰ AI è¦æ„å»ºä»€ä¹ˆï¼Œè¿˜å¸®åŠ©å®ƒè‡ªæˆ‘çº æ­£å¹¶ä¿æŒåœ¨å®‰å…¨è¾¹ç•Œå†…ã€‚é€šè¿‡èå…¥éªŒè¯æ­¥éª¤ã€çº¦æŸå’Œä½ æ¥ä¹‹ä¸æ˜“çš„çŸ¥è¯†ï¼Œä½ å¤§å¤§å¢åŠ äº† agent çš„è¾“å‡ºåœ¨ç¬¬ä¸€æ¬¡å°è¯•æ—¶å°±æ­£ç¡®ï¼ˆæˆ–è‡³å°‘æ›´æ¥è¿‘æ­£ç¡®ï¼‰çš„å¯èƒ½æ€§ã€‚è¿™å‡å°‘äº†è¿­ä»£å’Œé‚£äº›â€œå®ƒåˆ°åº•ä¸ºä»€ä¹ˆè¦é‚£æ ·åšï¼Ÿâ€çš„æ—¶åˆ»ã€‚</p>
<h2 data-id="heading-4">5. æµ‹è¯•ã€è¿­ä»£å¹¶æ”¹è¿› specï¼ˆå¹¶ä½¿ç”¨æ­£ç¡®çš„å·¥å…·ï¼‰</h2>
<p><strong>å°† spec ç¼–å†™å’Œ agent æ„å»ºè§†ä¸ºè¿­ä»£å¾ªç¯ï¼šå°½æ—©æµ‹è¯•ï¼Œæ”¶é›†åé¦ˆï¼Œå®Œå–„ specï¼Œå¹¶åˆ©ç”¨å·¥å…·è‡ªåŠ¨åŒ–æ£€æŸ¥ã€‚</strong></p>
<p>åˆå§‹çš„ spec ä¸æ˜¯ç»ˆç‚¹â€”â€”å®ƒæ˜¯ä¸€ä¸ªå¾ªç¯çš„å¼€å§‹ã€‚æŒç»­æ ¹æ® spec éªŒè¯ agent çš„å·¥ä½œå¹¶ç›¸åº”è°ƒæ•´æ‰ä¼šè·å¾—æœ€ä½³ç»“æœã€‚æ­¤å¤–ï¼Œç°ä»£ AI å¼€å‘è€…ä½¿ç”¨å„ç§å·¥å…·æ¥æ”¯æŒè¿™ä¸€è¿‡ç¨‹ï¼ˆä» CI æµæ°´çº¿åˆ°ä¸Šä¸‹æ–‡ç®¡ç†å·¥å…·ï¼‰ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1af19dda49d341b1a405c26d46bf48bc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5LiN5ZCD6aW85bmy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770798594&amp;x-signature=%2B6B8pYkIyU7kOTmULPaptppdWNU%3D" alt="image.png" loading="lazy"/></p>
<p><strong>æŒç»­æµ‹è¯•ï¼š</strong> ä¸è¦ç­‰åˆ°æœ€åæ‰çœ‹ agent æ˜¯å¦æ»¡è¶³ specã€‚åœ¨æ¯ä¸ªä¸»è¦é‡Œç¨‹ç¢‘ä¹‹åï¼Œç”šè‡³æ¯ä¸ªå‡½æ•°ä¹‹åï¼Œè¿è¡Œæµ‹è¯•æˆ–è‡³å°‘è¿›è¡Œå¿«é€Ÿæ‰‹åŠ¨æ£€æŸ¥ã€‚å¦‚æœå‡ºç°å¤±è´¥ï¼Œåœ¨ç»§ç»­ä¹‹å‰æ›´æ–° spec æˆ– promptã€‚ä¾‹å¦‚ï¼Œå¦‚æœ spec è¯´â€œå¯†ç å¿…é¡»ç”¨ bcrypt å“ˆå¸Œâ€ï¼Œè€Œä½ çœ‹åˆ° agent çš„ä»£ç å­˜å‚¨æ˜æ–‡â€”â€”åœä¸‹æ¥çº æ­£å®ƒï¼ˆå¹¶åœ¨ spec æˆ– prompt ä¸­æé†’è¯¥è§„åˆ™ï¼‰ã€‚è‡ªåŠ¨åŒ–æµ‹è¯•åœ¨è¿™é‡Œå¤§æ”¾å¼‚å½©ï¼šå¦‚æœä½ æä¾›äº†æµ‹è¯•ï¼ˆæˆ–è¾¹åšè¾¹å†™ï¼‰ï¼Œè®© agent è¿è¡Œå®ƒä»¬ã€‚åœ¨è®¸å¤š coding agent è®¾ç½®ä¸­ï¼Œä½ å¯ä»¥è®© agent åœ¨å®Œæˆä»»åŠ¡åè¿è¡Œ <code>npm test</code> æˆ–ç±»ä¼¼å‘½ä»¤ã€‚ç»“æœï¼ˆå¤±è´¥ï¼‰å¯ä»¥åé¦ˆåˆ°ä¸‹ä¸€ä¸ª prompt ä¸­ï¼Œæœ‰æ•ˆåœ°å‘Šè¯‰ agentâ€œä½ çš„è¾“å‡ºåœ¨ Xã€Yã€Z ä¸Šä¸ç¬¦åˆ specâ€”â€”ä¿®å¤å®ƒã€‚â€è¿™ç§ agent å¾ªç¯ï¼ˆä»£ç  -&gt; æµ‹è¯• -&gt; ä¿®å¤ -&gt; é‡å¤ï¼‰éå¸¸å¼ºå¤§ï¼Œè¿™æ­£æ˜¯åƒ Claude Code æˆ– Copilot Labs ç­‰å·¥å…·è¿›åŒ–ä»¥å¤„ç†æ›´å¤§ä»»åŠ¡çš„æ–¹å¼ã€‚å§‹ç»ˆå®šä¹‰â€œå®Œæˆâ€çš„å«ä¹‰ï¼ˆé€šè¿‡æµ‹è¯•æˆ–æ ‡å‡†ï¼‰å¹¶è¿›è¡Œæ£€æŸ¥ã€‚</p>
<p><strong>è¿­ä»£ spec æœ¬èº«ï¼š</strong> å¦‚æœä½ å‘ç° spec ä¸å®Œæ•´æˆ–ä¸æ¸…æ¥šï¼ˆä¹Ÿè®¸ agent è¯¯è§£äº†æŸäº›å†…å®¹ï¼Œæˆ–è€…ä½ æ„è¯†åˆ°é—æ¼äº†ä¸€ä¸ªéœ€æ±‚ï¼‰ï¼Œæ›´æ–° spec æ–‡æ¡£ã€‚ç„¶åæ˜ç¡®åœ°å°† agent ä¸æ–° spec é‡æ–°åŒæ­¥ï¼šâ€œæˆ‘å·²æŒ‰å¦‚ä¸‹æ–¹å¼æ›´æ–°äº† specâ€¦â€¦æ ¹æ®æ›´æ–°çš„ specï¼Œç›¸åº”åœ°è°ƒæ•´è®¡åˆ’æˆ–é‡æ„ä»£ç ã€‚â€è¿™æ · spec ä»ç„¶æ˜¯å”¯ä¸€çš„çœŸç†æ¥æºã€‚è¿™ç±»ä¼¼äºæˆ‘ä»¬åœ¨æ­£å¸¸å¼€å‘ä¸­å¤„ç†éœ€æ±‚å˜æ›´çš„æ–¹å¼â€”â€”ä½†åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ ä¹Ÿæ˜¯ AI agent çš„äº§å“ç»ç†ã€‚å¦‚æœå¯èƒ½ï¼Œä¿ç•™ç‰ˆæœ¬å†å²ï¼ˆå³ä½¿åªæ˜¯é€šè¿‡commitæ¶ˆæ¯æˆ–ç¬”è®°ï¼‰ï¼Œè¿™æ ·ä½ å°±çŸ¥é“å‘ç”Ÿäº†ä»€ä¹ˆå˜åŒ–ä»¥åŠä¸ºä»€ä¹ˆã€‚</p>
<p><strong>åˆ©ç”¨ä¸Šä¸‹æ–‡ç®¡ç†å’Œè®°å¿†å·¥å…·ï¼š</strong> ä¸æ–­å¢é•¿çš„å·¥å…·ç”Ÿæ€å¯ä»¥å¸®åŠ©ä½ ç®¡ç† AI agent çš„ä¸Šä¸‹æ–‡å’ŒçŸ¥è¯†ã€‚ä¾‹å¦‚ï¼Œæ£€ç´¢å¢å¼ºç”Ÿæˆï¼ˆRAGï¼‰æ˜¯ä¸€ç§æ¨¡å¼ï¼Œagent å¯ä»¥å³æ—¶ä»çŸ¥è¯†åº“ï¼ˆå¦‚å‘é‡æ•°æ®åº“ï¼‰ä¸­æå–ç›¸å…³æ•°æ®å—ã€‚å¦‚æœä½ çš„ spec å¾ˆå¤§ï¼Œä½ å¯ä»¥åµŒå…¥å…¶ä¸­çš„éƒ¨åˆ†ï¼Œè®© agent åœ¨éœ€è¦æ—¶æ£€ç´¢æœ€ç›¸å…³çš„éƒ¨åˆ†ï¼Œè€Œä¸æ˜¯æ€»æ˜¯æä¾›æ•´ä¸ªå†…å®¹ã€‚è¿˜æœ‰ä¸€äº›æ¡†æ¶å®ç°äº†æ¨¡å‹ä¸Šä¸‹æ–‡åè®®ï¼ˆMCPï¼‰ï¼Œå®ƒæ ¹æ®å½“å‰ä»»åŠ¡è‡ªåŠ¨å‘æ¨¡å‹æä¾›æ­£ç¡®çš„ä¸Šä¸‹æ–‡ã€‚ä¸€ä¸ªä¾‹å­æ˜¯ <a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.digitalocean.com%2Fproducts%2Fgradient-ai-platform%2Fconcepts%2Fcontext-management%2F" target="_blank" title="https://docs.digitalocean.com/products/gradient-ai-platform/concepts/context-management/" ref="nofollow noopener noreferrer">Context7</a> (context7.com)ï¼Œå®ƒå¯ä»¥æ ¹æ®ä½ æ­£åœ¨å¤„ç†çš„å†…å®¹è‡ªåŠ¨ä»æ–‡æ¡£ä¸­è·å–ç›¸å…³çš„ä¸Šä¸‹æ–‡ç‰‡æ®µã€‚å®é™…ä¸Šï¼Œè¿™å¯èƒ½æ„å‘³ç€ agent æ³¨æ„åˆ°ä½ æ­£åœ¨å¤„ç†â€œæ”¯ä»˜å¤„ç†â€ï¼Œå®ƒä¼šå°† spec æˆ–æ–‡æ¡£çš„â€œæ”¯ä»˜â€éƒ¨åˆ†æ‹‰å…¥æç¤ºä¸­ã€‚è€ƒè™‘é‡‡ç”¨è¿™äº›å·¥å…·ï¼Œæˆ–è€…è‡³å°‘è®¾ç½®ä¸€ä¸ªåŸºç¡€ç‰ˆæœ¬ï¼ˆå³ä½¿åªæ˜¯åœ¨ spec æ–‡æ¡£ä¸­è¿›è¡Œç®€å•æœç´¢ï¼‰ã€‚</p>
<p><strong>è°¨æ…å¹¶è¡ŒåŒ–ï¼š</strong> ä¸€äº›å¼€å‘è€…åœ¨ä¸åŒä»»åŠ¡ä¸Šå¹¶è¡Œè¿è¡Œå¤šä¸ª agent å®ä¾‹ï¼ˆå¦‚å‰é¢æåˆ°çš„ subagentï¼‰ã€‚è¿™å¯ä»¥åŠ å¿«å¼€å‘é€Ÿåº¦â€”â€”ä¾‹å¦‚ï¼Œä¸€ä¸ª agent ç”Ÿæˆä»£ç ï¼Œè€Œå¦ä¸€ä¸ªåŒæ—¶ç¼–å†™æµ‹è¯•ï¼Œæˆ–è€…ä¸¤ä¸ªåŠŸèƒ½åŒæ—¶æ„å»ºã€‚å¦‚æœä½ é‡‡ç”¨è¿™ç§æ–¹å¼ï¼Œç¡®ä¿ä»»åŠ¡çœŸæ­£ç‹¬ç«‹æˆ–æ˜ç¡®åˆ†ç¦»ä»¥é¿å…å†²çªï¼ˆspec åº”æ³¨æ˜ä»»ä½•ä¾èµ–å…³ç³»ï¼‰ã€‚ä¾‹å¦‚ï¼Œä¸è¦è®©ä¸¤ä¸ª agent åŒæ—¶å†™å…¥åŒä¸€ä¸ªæ–‡ä»¶ã€‚ä¸€ç§å·¥ä½œæµç¨‹æ˜¯è®©ä¸€ä¸ª agent ç”Ÿæˆä»£ç ï¼Œå¦ä¸€ä¸ªå¹¶è¡Œå®¡æŸ¥å®ƒï¼Œæˆ–è€…æ„å»ºå•ç‹¬çš„ç»„ä»¶ä»¥ä¾¿ä»¥åé›†æˆã€‚è¿™æ˜¯é«˜çº§ç”¨æ³•ï¼Œç®¡ç†èµ·æ¥å¯èƒ½åœ¨ç²¾ç¥ä¸Šå¾ˆç´¯ï¼ˆæ­£å¦‚ Willison æ‰¿è®¤çš„ï¼Œè¿è¡Œå¤šä¸ª agent å‡ºå¥‡åœ°æœ‰æ•ˆï¼Œå°½ç®¡åœ¨ç²¾ç¥ä¸Šä»¤äººç–²æƒ«ï¼ï¼‰ã€‚æœ€å¤šä» 2-3 ä¸ª agent å¼€å§‹ï¼Œä»¥ä¿æŒå¯ç®¡ç†æ€§ã€‚</p>
<p><strong>ç‰ˆæœ¬æ§åˆ¶å’Œ spec é”å®šï¼š</strong> ä½¿ç”¨ Git æˆ–ä½ é€‰æ‹©çš„ç‰ˆæœ¬æ§åˆ¶æ¥è·Ÿè¸ª agent çš„æ“ä½œã€‚<a href="https://link.juejin.cn?target=https%3A%2F%2Fsimonwillison.net%2F2025%2FOct%2F7%2Fvibe-engineering%2F" target="_blank" title="https://simonwillison.net/2025/Oct/7/vibe-engineering/" ref="nofollow noopener noreferrer">è‰¯å¥½çš„ç‰ˆæœ¬æ§åˆ¶ä¹ æƒ¯</a>åœ¨ AI è¾…åŠ©ä¸‹æ›´ä¸ºé‡è¦ã€‚å°† spec æ–‡ä»¶æœ¬èº«æäº¤åˆ°ä»“åº“ã€‚è¿™ä¸ä»…ä¿ç•™äº†å†å²è®°å½•ï¼Œagent ç”šè‡³å¯ä»¥ä½¿ç”¨ <code>git diff</code> æˆ– <code>blame</code> æ¥ç†è§£å˜åŒ–ï¼ˆLLM éå¸¸æ“…é•¿é˜…è¯»å·®å¼‚ï¼‰ã€‚ä¸€äº›é«˜çº§ agent è®¾ç½®è®© agent æŸ¥è¯¢ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿå†å²ä»¥æŸ¥çœ‹æŸäº›å†…å®¹ä½•æ—¶å¼•å…¥â€”â€”ä»¤äººæƒŠè®¶çš„æ˜¯ï¼Œæ¨¡å‹â€œåœ¨ Git æ–¹é¢éå¸¸èƒœä»»â€ã€‚é€šè¿‡å°† spec ä¿å­˜åœ¨ä»“åº“ä¸­ï¼Œå¯ä»¥è®©ä½ å’Œ AI éƒ½è·Ÿè¸ªå˜åŒ–ã€‚æœ‰ä¸€äº›å·¥å…·ï¼ˆå¦‚å‰é¢æåˆ°çš„ GitHub Spec Kitï¼‰å°† spec é©±åŠ¨å¼€å‘é›†æˆåˆ° git å·¥ä½œæµä¸­â€”â€”ä¾‹å¦‚ï¼Œåœ¨æ›´æ–° spec æ—¶é™åˆ¶åˆå¹¶æˆ–ä» spec é¡¹ç”Ÿæˆæ£€æŸ¥æ¸…å•ã€‚è™½ç„¶ä½ ä¸éœ€è¦è¿™äº›å·¥å…·å°±èƒ½æˆåŠŸï¼Œä½†é‡ç‚¹æ˜¯åƒå¯¹å¾…ä»£ç ä¸€æ ·å¯¹å¾… specâ€”â€”è®¤çœŸç»´æŠ¤å®ƒã€‚</p>
<p><strong>æˆæœ¬å’Œé€Ÿåº¦è€ƒè™‘ï¼š</strong> ä½¿ç”¨å¤§å‹æ¨¡å‹å’Œé•¿ä¸Šä¸‹æ–‡å¯èƒ½æ—¢æ…¢åˆè´µã€‚ä¸€ä¸ªå®ç”¨çš„æŠ€å·§æ˜¯å·§å¦™åœ°ä½¿ç”¨æ¨¡å‹é€‰æ‹©å’Œæ‰¹å¤„ç†ã€‚ä¹Ÿè®¸ä½¿ç”¨æ›´ä¾¿å®œ/æ›´å¿«çš„æ¨¡å‹è¿›è¡Œåˆå§‹è‰ç¨¿æˆ–é‡å¤ï¼Œå¹¶å°†æœ€å¼ºå¤§ï¼ˆå’Œæ˜‚è´µï¼‰çš„æ¨¡å‹ä¿ç•™ç”¨äºæœ€ç»ˆè¾“å‡ºæˆ–å¤æ‚æ¨ç†ã€‚ä¸€äº›å¼€å‘è€…ä½¿ç”¨ GPT-4 æˆ– Claude è¿›è¡Œè§„åˆ’å’Œå…³é”®æ­¥éª¤ï¼Œä½†å°†æ›´ç®€å•çš„æ‰©å±•æˆ–é‡æ„åº”ç”¨åœ¨æœ¬åœ°æ¨¡å‹æˆ–è¾ƒå°çš„ API æ¨¡å‹ã€‚å¦‚æœä½¿ç”¨å¤šä¸ª agentï¼Œä¹Ÿè®¸ä¸æ˜¯æ‰€æœ‰ agent éƒ½éœ€è¦é¡¶çº§ï¼›è¿è¡Œæµ‹è¯•çš„ agent æˆ–ä»£ç æ£€æŸ¥ agent å¯ä»¥æ˜¯è¾ƒå°çš„æ¨¡å‹ã€‚è¿˜è¦è€ƒè™‘é™åˆ¶ä¸Šä¸‹æ–‡å¤§å°ï¼šå¦‚æœ 5k å°±å¤Ÿäº†ï¼Œå°±ä¸è¦æä¾› 20k tokenã€‚æ­£å¦‚æˆ‘ä»¬è®¨è®ºçš„ï¼Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.anthropic.com%2Fengineering%2Feffective-context-engineering-for-ai-agents" target="_blank" title="https://www.anthropic.com/engineering/effective-context-engineering-for-ai-agents" ref="nofollow noopener noreferrer">æ›´å¤š token å¯èƒ½æ„å‘³ç€æ”¶ç›Šé€’å‡</a>ã€‚</p>
<p><strong>ç›‘æ§å¹¶è®°å½•ä¸€åˆ‡ï¼š</strong> åœ¨å¤æ‚çš„ agent å·¥ä½œæµä¸­ï¼Œè®°å½• agent çš„æ“ä½œå’Œè¾“å‡ºè‡³å…³é‡è¦ã€‚æ£€æŸ¥æ—¥å¿—ä»¥æŸ¥çœ‹ agent æ˜¯å¦åç¦»æˆ–é‡åˆ°é”™è¯¯ã€‚è®¸å¤šæ¡†æ¶æä¾›è·Ÿè¸ªæ—¥å¿—æˆ–å…è®¸æ‰“å° agent çš„æ€è€ƒé“¾ï¼ˆç‰¹åˆ«æ˜¯å¦‚æœä½ æç¤ºå®ƒé€æ­¥æ€è€ƒï¼‰ã€‚å®¡æŸ¥è¿™äº›æ—¥å¿—å¯ä»¥çªå‡ºæ˜¾ç¤º spec æˆ–æŒ‡ä»¤å¯èƒ½è¢«è¯¯è§£çš„åœ°æ–¹ã€‚è¿™ä¸è°ƒè¯•ç¨‹åºæ²¡ä»€ä¹ˆä¸åŒâ€”â€”åªæ˜¯â€œç¨‹åºâ€æ˜¯å¯¹è¯/æç¤ºé“¾ã€‚å¦‚æœå‘ç”Ÿå¥‡æ€ªçš„äº‹æƒ…ï¼Œå›åˆ° spec/æŒ‡ä»¤çœ‹çœ‹æ˜¯å¦å­˜åœ¨æ­§ä¹‰ã€‚</p>
<p><strong>å­¦ä¹ å’Œæ”¹è¿›ï¼š</strong> æœ€åï¼Œå°†æ¯ä¸ªé¡¹ç›®è§†ä¸ºå®Œå–„ spec ç¼–å†™æŠ€èƒ½çš„å­¦ä¹ æœºä¼šã€‚ä¹Ÿè®¸ä½ ä¼šå‘ç°æŸç§æªè¾æ€»æ˜¯è®© AI å›°æƒ‘ï¼Œæˆ–è€…ä»¥æŸç§æ–¹å¼ç»„ç»‡ spec éƒ¨åˆ†ä¼šäº§ç”Ÿæ›´å¥½çš„éµå®ˆæ€§ã€‚å°†è¿™äº›ç»éªŒæ•™è®­èå…¥ä¸‹ä¸€ä¸ª specã€‚AI agent é¢†åŸŸæ­£åœ¨å¿«é€Ÿå‘å±•ï¼Œå› æ­¤æ–°çš„æœ€ä½³å®è·µï¼ˆå’Œå·¥å…·ï¼‰ä¸æ–­æ¶Œç°ã€‚é€šè¿‡åšå®¢ï¼ˆå¦‚ Simon Willisonã€Andrej Karpathy ç­‰ï¼‰ä¿æŒæ›´æ–°ï¼Œä¸è¦çŠ¹è±«å»å®éªŒã€‚</p>
<p>ä¸º AI agent ç¼–å†™çš„ spec ä¸æ˜¯â€œå†™ä¸€æ¬¡å°±å®Œæˆâ€ã€‚å®ƒæ˜¯æŒ‡å¯¼ã€éªŒè¯å’Œå®Œå–„çš„æŒç»­å¾ªç¯çš„ä¸€éƒ¨åˆ†ã€‚è¿™ç§å‹¤å¥‹çš„å›æŠ¥æ˜¯å·¨å¤§çš„ï¼šé€šè¿‡å°½æ—©å‘ç°é—®é¢˜å¹¶ä¿æŒ agent å¯¹é½ï¼Œä½ å¯ä»¥é¿å…åæœŸæ˜‚è´µçš„é‡å†™æˆ–å¤±è´¥ã€‚æ­£å¦‚ä¸€ä½ AI å·¥ç¨‹å¸ˆæ‰“è¶£è¯´ï¼Œä½¿ç”¨è¿™äº›å®è·µå¯ä»¥æ„Ÿè§‰åƒæ‹¥æœ‰â€œä¸€æ”¯å®ä¹ ç”Ÿå†›é˜Ÿâ€ä¸ºä½ å·¥ä½œï¼Œä½†ä½ å¿…é¡»å¥½å¥½ç®¡ç†ä»–ä»¬ã€‚ä¸€ä¸ªè‰¯å¥½çš„ã€æŒç»­ç»´æŠ¤çš„ spec å°±æ˜¯ä½ çš„ç®¡ç†å·¥å…·ã€‚</p>
<h2 data-id="heading-5">é¿å…å¸¸è§é™·é˜±</h2>
<p>åœ¨ç»“æŸä¹‹å‰ï¼Œå€¼å¾—æŒ‡å‡ºçš„æ˜¯ï¼Œå³ä½¿æ˜¯å–„æ„çš„ spec é©±åŠ¨å·¥ä½œæµï¼Œä¹Ÿå¯èƒ½ä¼šè„±è½¨çš„é”™è¯¯æ¨¡å¼ã€‚<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.blog%2Fai-and-ml%2Fgithub-copilot%2Fhow-to-write-a-great-agents-md-lessons-from-over-2500-repositories%2F" target="_blank" title="https://github.blog/ai-and-ml/github-copilot/how-to-write-a-great-agents-md-lessons-from-over-2500-repositories/" ref="nofollow noopener noreferrer">GitHub å¯¹ 2,500 å¤šä¸ª agent æ–‡ä»¶çš„ç ”ç©¶</a> æ­ç¤ºäº†ä¸€ä¸ªæ˜æ˜¾çš„åˆ†æ­§ï¼šâ€œå¤§å¤šæ•° agent æ–‡ä»¶å¤±è´¥æ˜¯å› ä¸ºå®ƒä»¬å¤ªæ¨¡ç³Šã€‚â€ä»¥ä¸‹æ˜¯è¦é¿å…çš„é”™è¯¯ï¼š</p>
<p><strong>æ¨¡ç³Šçš„ promptï¼š</strong> â€œç»™æˆ‘æ„å»ºä¸€äº›é…·çš„ä¸œè¥¿â€æˆ–â€œè®©å®ƒå·¥ä½œå¾—æ›´å¥½â€æ²¡æœ‰ç»™ agent ä»»ä½•å¯ä»¥ä¾é çš„ä¸œè¥¿ã€‚æ­£å¦‚ Baptiste Studer æ‰€è¯´ï¼šâ€œæ¨¡ç³Šçš„ prompt æ„å‘³ç€é”™è¯¯çš„ç»“æœã€‚â€å¯¹è¾“å…¥ã€è¾“å‡ºå’Œçº¦æŸè¦å…·ä½“ã€‚â€œä½ æ˜¯ä¸€ä¸ªæœ‰ç”¨çš„ç¼–ç åŠ©æ‰‹â€ä¸èµ·ä½œç”¨ã€‚â€œä½ æ˜¯ä¸€åä¸º React ç»„ä»¶ç¼–å†™æµ‹è¯•çš„æµ‹è¯•å·¥ç¨‹å¸ˆï¼Œéµå¾ªè¿™äº›ç¤ºä¾‹ï¼Œæ°¸è¿œä¸ä¿®æ”¹æºä»£ç â€æ‰æœ‰æ•ˆã€‚</p>
<p><strong>è¿‡é•¿çš„ä¸Šä¸‹æ–‡è€Œæ²¡æœ‰æ€»ç»“ï¼š</strong> å°† 50 é¡µæ–‡æ¡£æ‰”è¿› prompt ä¸­å¹¶å¸Œæœ›æ¨¡å‹èƒ½ç†è§£ï¼Œè¿™å¾ˆå°‘å¥æ•ˆã€‚ä½¿ç”¨åˆ†å±‚æ‘˜è¦ï¼ˆå¦‚åŸåˆ™ 3 ä¸­è®¨è®ºçš„ï¼‰æˆ– RAG ä»…å‘ˆç°ç›¸å…³å†…å®¹ã€‚ä¸Šä¸‹æ–‡é•¿åº¦ä¸èƒ½æ›¿ä»£ä¸Šä¸‹æ–‡è´¨é‡ã€‚</p>
<p><strong>è·³è¿‡äººå·¥å®¡æŸ¥ï¼š</strong> Willison æœ‰ä¸€ä¸ªä¸ªäººè§„åˆ™ï¼šâ€œæˆ‘ä¸ä¼šæäº¤æˆ‘æ— æ³•å‘åˆ«äººè§£é‡Šçš„ä»£ç ã€‚â€ è¿™å› ä¸º agent ç”Ÿæˆçš„ä¸œè¥¿é€šè¿‡äº†æµ‹è¯•ï¼Œå¹¶ä¸æ„å‘³ç€å®ƒæ˜¯æ­£ç¡®çš„ã€å®‰å…¨çš„æˆ–å¯ç»´æŠ¤çš„ã€‚å§‹ç»ˆå®¡æŸ¥å…³é”®ä»£ç è·¯å¾„ã€‚â€œçº¸ç‰Œå±‹â€çš„æ¯”å–»é€‚ç”¨ï¼šAI ç”Ÿæˆçš„ä»£ç å¯èƒ½çœ‹èµ·æ¥å¾ˆç¨³å›ºï¼Œä½†åœ¨ä½ æ²¡æœ‰æµ‹è¯•çš„è¾¹ç¼˜æƒ…å†µä¸‹ä¼šå´©æºƒã€‚</p>
<p><strong>å°†vibe codingä¸ç”Ÿäº§å·¥ç¨‹æ··ä¸ºä¸€è°ˆï¼š</strong> ä½¿ç”¨ AI è¿›è¡Œå¿«é€ŸåŸå‹è®¾è®¡ï¼ˆâ€œvibe codingï¼Œæ°›å›´ç¼–ç¨‹â€ï¼‰å¯¹äºæ¢ç´¢å’Œä¸€æ¬¡æ€§é¡¹ç›®å¾ˆå¥½ã€‚ä½†åœ¨æ²¡æœ‰ä¸¥æ ¼ specã€æµ‹è¯•å’Œå®¡æŸ¥çš„æƒ…å†µä¸‹å°†è¯¥ä»£ç å‘å¸ƒåˆ°ç”Ÿäº§ç¯å¢ƒæ˜¯è‡ªæ‰¾éº»çƒ¦ã€‚æˆ‘åŒºåˆ†â€œvibe codingâ€å’Œâ€œAI è¾…åŠ©å·¥ç¨‹â€â€”â€”åè€…éœ€è¦æœ¬æŒ‡å—æè¿°çš„çºªå¾‹ã€‚çŸ¥é“ä½ å¤„äºå“ªç§æ¨¡å¼ã€‚</p>
<p><strong>å¿½è§†â€œè‡´å‘½ä¸‰è¦ç´ â€ï¼š</strong> Willison è­¦å‘Šä¸‰ä¸ªä½¿ AI agent å±é™©çš„å±æ€§ï¼šé€Ÿåº¦ï¼ˆå®ƒä»¬å·¥ä½œå¾—æ¯”ä½ å®¡æŸ¥å¾—å¿«ï¼‰ã€éç¡®å®šæ€§ï¼ˆç›¸åŒè¾“å…¥ï¼Œä¸åŒè¾“å‡ºï¼‰å’Œæˆæœ¬ï¼ˆé¼“åŠ±åœ¨éªŒè¯ä¸Šå·å·¥å‡æ–™ï¼‰ã€‚ä½ çš„ spec å’Œå®¡æŸ¥æµç¨‹å¿…é¡»è€ƒè™‘æ‰€æœ‰ä¸‰ä¸ªå› ç´ ã€‚ä¸è¦è®©é€Ÿåº¦è¶…è¿‡ä½ çš„éªŒè¯èƒ½åŠ›ã€‚</p>
<p><strong>é—æ¼å…­ä¸ªæ ¸å¿ƒé¢†åŸŸï¼š</strong> å¦‚æœä½ çš„ spec æ²¡æœ‰æ¶µç›–å‘½ä»¤ã€æµ‹è¯•ã€é¡¹ç›®ç»“æ„ã€ä»£ç é£æ ¼ã€git å·¥ä½œæµå’Œè¾¹ç•Œæ¡ä»¶ï¼Œä½ å¯èƒ½é—æ¼äº† agent éœ€è¦çš„ä¸œè¥¿ã€‚åœ¨äº¤ç»™ agent ä¹‹å‰ï¼Œä½¿ç”¨ç¬¬ 2 èŠ‚çš„å…­é¢†åŸŸæ£€æŸ¥æ¸…å•ä½œä¸ºå¥å…¨æ€§æ£€æŸ¥ã€‚</p>
<h2 data-id="heading-6">ç»“è®º</h2>
<p>ä¸º AI ç¼–ç  agent ç¼–å†™æœ‰æ•ˆçš„ spec éœ€è¦æ‰å®çš„è½¯ä»¶å·¥ç¨‹åŸåˆ™ï¼Œç»“åˆå¯¹å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰ç‰¹æ€§çš„é€‚åº”ã€‚ä»æ˜ç¡®çš„ç›®æ ‡å¼€å§‹ï¼Œè®© AI å¸®åŠ©æ‰©å±•è®¡åˆ’ã€‚åƒä¸¥è‚ƒçš„è®¾è®¡æ–‡æ¡£é‚£æ ·æ„å»º spec â€”â€” æ¶µç›–å…­ä¸ªæ ¸å¿ƒé¢†åŸŸï¼Œå¹¶å°†å…¶é›†æˆåˆ°ä½ çš„å·¥å…·é“¾ä¸­ï¼Œä½¿å…¶æˆä¸ºå¯æ‰§è¡Œçš„äº§å‡ºç‰©ï¼Œè€Œä¸ä»…ä»…æ˜¯æ–‡å­—ã€‚é€šè¿‡ä¸€æ¬¡å‘ agent æä¾›ä¸€å—æ‹¼å›¾æ¥ä¿æŒå…¶ç„¦ç‚¹ç´§å¯†ï¼ˆå¹¶è€ƒè™‘ä½¿ç”¨å·§å¦™çš„ç­–ç•¥ï¼Œå¦‚æ‘˜è¦ç›®å½•ã€å­ agent æˆ–å¹¶è¡Œç¼–æ’æ¥å¤„ç†å¤§å‹ specï¼‰ã€‚é€šè¿‡åŒ…å«ä¸‰å±‚è¾¹ç•Œï¼ˆå§‹ç»ˆ/å…ˆè¯¢é—®/æ°¸ä¸ï¼‰ã€è‡ªæˆ‘æ£€æŸ¥å’Œä¸€è‡´æ€§æµ‹è¯•æ¥é¢„é˜²é™·é˜±â€”â€”æœ¬è´¨ä¸Šï¼Œæ˜¯æ•™ AI å¦‚ä½•ä¸å¤±è´¥ã€‚å¹¶å°†æ•´ä¸ªè¿‡ç¨‹è§†ä¸ºè¿­ä»£çš„ï¼šä½¿ç”¨æµ‹è¯•å’Œåé¦ˆæŒç»­å®Œå–„ spec å’Œä»£ç ã€‚</p>
<p>éµå¾ªè¿™äº›æŒ‡å—ï¼Œä½ çš„ AI agent åœ¨å¤§å‹ä¸Šä¸‹æ–‡ä¸‹â€œå´©æºƒâ€æˆ–åç¦»åˆ°æ— æ„ä¹‰å†…å®¹çš„å¯èƒ½æ€§å°†å¤§å¤§é™ä½ã€‚</p>
<p>ç¥ spec ç¼–å†™æ„‰å¿«ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Spring AIä¸­çš„å¤šè½®å¯¹è¯è‰ºæœ¯ï¼šè®©å¤§æ¨¡å‹ä¸»åŠ¨æé—®è·å–æ˜ç¡®éœ€æ±‚]]></title>    <link>https://juejin.cn/post/7602482736913301539</link>    <guid>https://juejin.cn/post/7602482736913301539</guid>    <pubDate>2026-02-04T01:00:17.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602482736913301539" data-draft-id="7602482736913285155" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Spring AIä¸­çš„å¤šè½®å¯¹è¯è‰ºæœ¯ï¼šè®©å¤§æ¨¡å‹ä¸»åŠ¨æé—®è·å–æ˜ç¡®éœ€æ±‚"/> <meta itemprop="keywords" content="åç«¯,LLM"/> <meta itemprop="datePublished" content="2026-02-04T01:00:17.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸€ç°ç°"/> <meta itemprop="url" content="https://juejin.cn/user/377887729916126"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Spring AIä¸­çš„å¤šè½®å¯¹è¯è‰ºæœ¯ï¼šè®©å¤§æ¨¡å‹ä¸»åŠ¨æé—®è·å–æ˜ç¡®éœ€æ±‚
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/377887729916126/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸€ç°ç°
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T01:00:17.000Z" title="Wed Feb 04 2026 01:00:17 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Spring AIä¸­çš„å¤šè½®å¯¹è¯è‰ºæœ¯ï¼šè®©å¤§æ¨¡å‹ä¸»åŠ¨æé—®è·å–æ˜ç¡®éœ€æ±‚</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e929010384814e7ab6e1a65d5a8ff290~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA54Gw54Gw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770771616&amp;x-signature=3bDDrGdPQUPJhFM7p9YtB7fsELs%3D" alt="" loading="lazy"/></p>
<blockquote>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FLcvmiIERs6aOIlRAKGGnFg" target="_blank" title="https://mp.weixin.qq.com/s/LcvmiIERs6aOIlRAKGGnFg" ref="nofollow noopener noreferrer">Spring AIä¸­çš„å¤šè½®å¯¹è¯è‰ºæœ¯ï¼šè®©å¤§æ¨¡å‹ä¸»åŠ¨æé—®è·å–æ˜ç¡®éœ€æ±‚</a></p>
</blockquote>
<p>åœ¨æ—¥å¸¸æˆ‘ä»¬ä¸å¤§æ¨¡å‹äº¤äº’çš„è¿‡ç¨‹ä¸­ï¼Œé€šå¸¸æ˜¯æˆ‘è¾“å…¥ä¸€ä¸ªé—®é¢˜æˆ–è€…åœºæ™¯è¦æ±‚ï¼Œç„¶åå¤§æ¨¡å‹åŸºäºæˆ‘ç»™å‡ºçš„ä¿¡æ¯è¿›è¡Œç”Ÿæˆå†…å®¹ã€‚è¿™ç§æ–¹å¼å¾ˆå®¹æ˜“å‡ºç°ä¸€ä¸ªç­”éæ‰€é—®çš„åœºæ™¯ï¼ˆå¥½åƒå¤§æ¨¡å‹å¹¶ä¸èƒ½æ€»æ˜¯å›ç­”åˆ°æˆ‘çš„å¿ƒè¶´ä¸ŠğŸ¤£ï¼‰</p>
<p>é‚£ä¹ˆæœ‰ä»€ä¹ˆå¥½çš„è§£å†³åŠæ³•å—ï¼Ÿ</p>
<p>ç†Ÿç»ƒè°ƒæ•™å¤§æ¨¡å‹çš„å°ä¼™ä¼´ï¼Œå¯èƒ½æ—©å°±æœ‰è‡ªå·±çš„ä¸€å¥—æ ‡å‡†æµç¨‹äº† -- é€šè¿‡å¤šæ¬¡ä¸å¤§æ¨¡å‹ä¹‹é—´çš„å¤šæ¬¡é—®è¯¢å›ç­”ï¼Œè®©å¤§æ¨¡å‹èƒ½æ›´æ¸…æ™°çš„çŸ¥é“è‡ªå·±çš„è¯‰æ±‚</p>
<p>é‚£ä¹ˆå¦‚ä½•è®©AIä¸»åŠ¨é—®è¯¢ç”¨æˆ·æ¥è·å–æ›´ç²¾ç¡®çš„ä¿¡æ¯å‘¢ï¼Ÿå¦‚æœæˆ‘å¼€å‘çš„å¤§æ¨¡å‹åº”ç”¨ï¼Œå¸Œæœ›é›†æˆè¿™æ ·çš„èƒ½åŠ›ï¼Œåˆå¯ä»¥æ€ä¹ˆå®ç°å‘¢ï¼Ÿ</p>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬çœ‹çœ‹ï¼ŒSpringAIä¸­ï¼Œå¦‚ä½•é€šè¿‡å·§å¦™çš„å¤šè½®å¯¹è¯è‰ºæœ¯ï¼Œæ¥å®ç°è®©å¤§æ¨¡å‹ä¸»åŠ¨æé—®è·å–æ˜ç¡®éœ€æ±‚</p>
<h3 data-id="heading-1">ä¸€ã€æ–¹æ¡ˆè®¾è®¡</h3>
<h4 data-id="heading-2">1.1 æ ¸å¿ƒé—®é¢˜</h4>
<p>åœ¨æˆ‘ä»¬è¿™ä¸ªåœºæ™¯ä¸­ï¼Œæ ¸å¿ƒçš„é—®é¢˜ç‚¹åœ¨äº <strong>å¦‚ä½•è®©å¤§æ¨¡å‹åœ¨é¢å¯¹æ¨¡ç³Šéœ€æ±‚æ—¶ï¼Œèƒ½å¤Ÿä¸»åŠ¨å‘èµ·è¯¢é—®ï¼Œè·å–æ›´è¯¦ç»†çš„ä¿¡æ¯ï¼Œä»è€Œæä¾›æ›´ç²¾å‡†çš„å“åº”ã€‚</strong></p>
<p>å¸¸è§çš„å®ç°ä¸­ï¼Œå­˜åœ¨çš„é—®é¢˜å¦‚ä¸‹ï¼š</p>
<ul>
<li>å•æ¬¡äº¤äº’è¯•å›¾è§£å†³å¤æ‚é—®é¢˜</li>
<li>å¯¹æ¨¡ç³Šè¾“å…¥ä¸åšå¤„ç†ç›´æ¥å“åº”</li>
<li>ç¼ºå°‘å¤šè½®å¯¹è¯çš„çŠ¶æ€ç®¡ç†</li>
</ul>
<p>è¿™äº›é—®é¢˜çš„æ ¹æœ¬åŸå› åœ¨äºæ²¡æœ‰å»ºç«‹èµ·AIä¸ç”¨æˆ·ä¹‹é—´çš„æœ‰æ•ˆåé¦ˆå¾ªç¯ï¼Œå¯¼è‡´å¤§æ¨¡å‹æ— æ³•è·å–è¶³å¤Ÿçš„ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œä½†æ˜¯å¯¹äºå¤§æ¨¡å‹è€Œè¨€ï¼Œå“åº”å†…å®¹æ˜¯å¯¹å®ƒçš„ä¸€ä¸ªéå¸¸é‡è¦çš„è€ƒé‡æŒ‡æ ‡ï¼Œæ‰€ä»¥å°±å¾ˆå®¹å‡ºç°å¤§æ¨¡å‹<code>è¯è¯´å…«é“</code> <code>ç­”éæ‰€é—®</code>ç­‰å¹»è§‰é‚£é—®é¢˜</p>
<h4 data-id="heading-3">1.2 ä¸»åŠ¨é—®è¯¢è®¾è®¡</h4>
<blockquote>
<p>å¥½çš„è®¾è®¡åº”è¯¥ä¸»åŠ¨é€‚åº”ç”¨æˆ·ï¼Œè€Œä¸æ˜¯è®©ç”¨æˆ·é€‚åº”è®¾è®¡ã€‚</p>
</blockquote>
<p>å¾ˆå¤šäººè®¤ä¸ºå¤§æ¨¡å‹åªèƒ½è¢«åŠ¨æ¥æ”¶è¾“å…¥ï¼Œå®é™…ä¸Š <code>Spring AI</code> æä¾›äº† <code>AskUserQuestionTool</code> è¿™ä¸ªå¼ºå¤§çš„å·¥å…·ï¼Œè®©AIèƒ½å¤Ÿä¸»åŠ¨å‘ç”¨æˆ·æå‡ºé—®é¢˜ã€‚</p>
<p>å®ƒæ˜¯é€šè¿‡ä»€ä¹ˆå®ç°çš„å‘¢ï¼Ÿå¯ä»¥çœ‹ä¸‹é¢è¿™å¼ å›¾</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/594ea809f72c42a4a2428ae4980a072e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA54Gw54Gw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770771616&amp;x-signature=ey6meq8ehHSd3pNPWjgKgxmyIpY%3D" alt="æ ¸å¿ƒå®ç°æµç¨‹" loading="lazy"/></p>
<ul>
<li>é€šè¿‡Function Callbackæ¥å®ç°ï¼Œå°†<code>AskUserQuestionTool</code>æ³¨å†Œä¸ºå¤§æ¨¡å‹å¯å›è°ƒä½¿ç”¨çš„å·¥å…·ï¼Œé€šè¿‡è¿™ä¸ªå·¥å…·æ¥å®ç°å¤šè½®é—®è¯¢åº”ç­”</li>
</ul>
<p>ä¸‹é¢æ˜¯è¿™ä¸ªå·¥å…·çš„æ ¸å¿ƒå®šä¹‰:</p>
<pre><code class="hljs language-java" lang="java">
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AskUserQuestionTool</span> {
    <span class="hljs-meta">@Tool(
        name = "AskUserQuestionTool",
        description = "Use this tool when you need to ask the user questions during execution. This allows you to:\n1. Gather user preferences or requirements\n2. Clarify ambiguous instructions\n3. Get decisions on implementation choices as you work\n4. Offer choices to the user about what direction to take.\n\nUsage notes:\n- Users will always be able to select \"Other\" to provide custom text input\n- Use multiSelect: true to allow multiple answers to be selected for a question\n- If you recommend a specific option, make that the first option in the list and add \"(Recommended)\" at the end of the label\n"
    )</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">askUserQuestion</span><span class="hljs-params">(<span class="hljs-meta">@ToolParam(description = "Questions to ask the user (1-4 questions)")</span> List&lt;Question&gt; questions, <span class="hljs-meta">@ToolParam(description = "User answers collected by the permission component",required = false)</span> Map&lt;String, String&gt; answers)</span> {
        <span class="hljs-built_in">this</span>.validateQuestions(questions);
        <span class="hljs-comment">// çœç•¥...</span>
    }
}
</code></pre>
<p>é‡ç‚¹çœ‹ä¸€ä¸‹è¿™ä¸ªå·¥å…·çš„æè¿°ï¼Œå°†å…¶ç¿»è¯‘æˆä¸­æ–‡ï¼Œå†…å®¹å¦‚ä¸‹</p>
<pre><code class="hljs language-txt" lang="txt">åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­éœ€è¦å‘ç”¨æˆ·æé—®æ—¶ï¼Œè¯·ä½¿ç”¨æ­¤å·¥å…·ã€‚è¿™ä½¿æ‚¨èƒ½å¤Ÿï¼š
1. æ”¶é›†ç”¨æˆ·åå¥½æˆ–éœ€æ±‚
2. æ˜ç¡®å«ç³Šä¸æ¸…çš„æŒ‡ä»¤
3. åœ¨å·¥ä½œä¸­å°±å®æ–½é€‰æ‹©åšå‡ºå†³ç­–
4. å‘ç”¨æˆ·æä¾›é€‰æ‹©ï¼Œè®©ä»–ä»¬å†³å®šè¦é‡‡å–çš„æ–¹å‘ã€‚

ä½¿ç”¨é¡»çŸ¥ï¼š
- ç”¨æˆ·å§‹ç»ˆå¯ä»¥é€‰æ‹©â€œå…¶ä»–â€æ¥æä¾›è‡ªå®šä¹‰æ–‡æœ¬è¾“å…¥
- ä½¿ç”¨multiSelect: trueï¼Œå…è®¸ä¸€ä¸ªé—®é¢˜æœ‰å¤šä¸ªç­”æ¡ˆé€‰é¡¹
- å¦‚æœä½ æ¨èäº†ä¸€ä¸ªç‰¹å®šé€‰é¡¹ï¼Œè¯·å°†å…¶ä½œä¸ºåˆ—è¡¨ä¸­çš„ç¬¬ä¸€ä¸ªé€‰é¡¹ï¼Œå¹¶åœ¨æ ‡ç­¾æœ«å°¾åŠ ä¸Šâ€œï¼ˆæ¨èï¼‰â€
</code></pre>
<p>åœ¨è¿™ä¸ªå·¥å…·ç±»ä¸­ï¼Œé€šè¿‡å·§å¦™çš„è®¾è®¡ï¼Œå‘Šè¯‰å¤§æ¨¡å‹åœ¨å…·ä½“å“åº”ä¹‹å‰ï¼Œå¯ä»¥å…ˆè¿›è¡Œç”¨æˆ·é—®è¯¢</p>
<ul>
<li>å¤§æ¨¡å‹å°†éœ€è¦é—®è¯¢çš„å†…å®¹ï¼Œè½¬æ¢ä¸ºç»“æ„åŒ–çš„ <code>List&lt;Question&gt;</code></li>
<li>é€šè¿‡è®¾è®¡ä¸€ä¸ª<code>QuestionHandler</code>æ¥å¤„ç†å…·ä½“çš„ç”¨æˆ·é—®ç­”äº¤äº’æµç¨‹ï¼Œé€šè¿‡è´£ä»»åˆ†ç¦»çš„è®¾è®¡æ€æƒ³ï¼ŒAIè´Ÿè´£å†³å®šä½•æ—¶æé—®ï¼Œå…·ä½“çš„UIäº¤äº’ç”±å¼€å‘è€…è‡ªå®šä¹‰ã€‚ä½ å¯ä»¥å°†å…¶é€‚é…åˆ°Webç•Œé¢ã€ç§»åŠ¨ç«¯æˆ–ä»»ä½•å…¶ä»–å¹³å°ã€‚</li>
</ul>
<p>å› æ­¤å…·ä½“çš„é—®è¯¢åº”ç­”æ–¹å¼ï¼Œå®Œå…¨æ˜¯ç”±åº”ç”¨æ–¹ï¼ˆå³å¼€å‘è€…ï¼‰æ¥æ§åˆ¶çš„</p>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬è¿›å…¥å®æˆ˜æ¼”ç»ƒï¼Œçœ‹çœ‹å¦‚ä½•å®ç°è¿™æ ·çš„ä¸€ä¸ªå¤šè½®é—®è¯¢</p>
<h3 data-id="heading-4">äºŒã€é¡¹ç›®åˆ›å»º</h3>
<h4 data-id="heading-5">2.1 åŸºç¡€ç¯å¢ƒè¦æ±‚</h4>
<p>è¦ä½“éªŒSpringAIçš„é—®è¯¢æœºåˆ¶ï¼Œç›®å‰éœ€è¦å‡çº§åˆ°SpringAI 2.xç‰ˆæœ¬ï¼ŒåŒæ—¶æˆ‘ä»¬çš„SpringBootä¹Ÿå¯ä»¥å‡çº§åˆ°4.x</p>
<ul>
<li>SpringAI: 2.0.0-M2</li>
<li>SpringBoot: 4.0.1</li>
<li>JDK21/17ï¼šè¿™ä¸¤ç‰ˆæœ¬éƒ½å¯ä»¥</li>
</ul>
<p>é™¤äº†è¿™å‡ ä¸ªåŸºæœ¬ä¾èµ–ä¹‹å¤–ï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©ä¸€ä¸ªæ”¯æŒFunction Toolçš„å¤§æ¨¡å‹æ¥ä½œä¸ºè¿™ä¸ªå®ç°çš„å¤§è„‘ä¸­æ¢</p>
<p>æˆ‘ä»¬è¿™é‡Œé€‰æ‹©æ™ºè°±çš„å¤§æ¨¡å‹<code>GLM-4.5-Flash</code> ï¼ˆåŸå› å°±æ˜¯å› ä¸ºå®ƒå…è´¹ï¼Œä¸”æ•ˆæœè¿˜è¡Œï¼Œå¯¹æ‰€æœ‰æƒ³ä½“éªŒçš„å°ä¼™ä¼´æ²¡æœ‰ä»»ä½•é¢å¤–æˆæœ¬æŠ•å…¥ï¼‰</p>
<h4 data-id="heading-6">2.2 é¡¹ç›®åˆ›å»º</h4>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªSpringAIåº”ç”¨ï¼Œå¯¹äºä¸€ä¸ªæ ‡å‡†çš„SpringAIåº”ç”¨ï¼Œåœ¨<code>pom.xml</code>é…ç½®ä¸­ï¼Œä½ ä¼šçœ‹åˆ°ä¸‹é¢è¿™äº›åŸºç¡€ç‰ˆæœ¬æŒ‡å®šï¼Œè¿™ä¸ªä¹Ÿæ²¡ä»€ä¹ˆå¥½è¯´çš„</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">parent</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>4.0.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">relativePath</span> /&gt;</span> 
<span class="hljs-tag">&lt;/<span class="hljs-name">parent</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">maven.compiler.source</span>&gt;</span>21<span class="hljs-tag">&lt;/<span class="hljs-name">maven.compiler.source</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">maven.compiler.target</span>&gt;</span>21<span class="hljs-tag">&lt;/<span class="hljs-name">maven.compiler.target</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="hljs-tag">&lt;/<span class="hljs-name">project.build.sourceEncoding</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">spring-ai.version</span>&gt;</span>2.0.0-M2<span class="hljs-tag">&lt;/<span class="hljs-name">spring-ai.version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span>


<span class="hljs-tag">&lt;<span class="hljs-name">dependencyManagement</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.ai<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-ai-bom<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>${spring-ai.version}<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">type</span>&gt;</span>pom<span class="hljs-tag">&lt;/<span class="hljs-name">type</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>import<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependencyManagement</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">build</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">plugins</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">plugins</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">build</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">repositories</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">repository</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>spring-snapshots<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>Spring Snapshots<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">url</span>&gt;</span>https://repo.spring.io/snapshot<span class="hljs-tag">&lt;/<span class="hljs-name">url</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">releases</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">enabled</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-name">enabled</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">releases</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">repository</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">repository</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>Central Portal Snapshots<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>central-portal-snapshots<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">url</span>&gt;</span>https://central.sonatype.com/repository/maven-snapshots/<span class="hljs-tag">&lt;/<span class="hljs-name">url</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">releases</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">enabled</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-name">enabled</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">releases</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">snapshots</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">enabled</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">enabled</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">snapshots</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">repository</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">repositories</span>&gt;</span>
</code></pre>
<p>æ¥ä¸‹æ¥é‡ç‚¹çœ‹ä¸€ä¸‹æˆ‘ä»¬è¿™ä¸ªé¡¹ç›®æ‰€ç”¨åˆ°çš„å‡ ä¸ªæ ¸å¿ƒä¾èµ–</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springaicommunity<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-ai-agent-utils<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>0.4.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.ai<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-ai-starter-model-zhipuai<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span>
</code></pre>
<ul>
<li>spring-ai-agent-utils: è¿™ä¸ªå°±æ˜¯SpringAIè¿›è¡Œagentå¼€å‘çš„å…³é”®ä¾èµ–åŒ…</li>
<li>spring-ai-starter-model-zhipuai: è¿™ä¸ªæ˜¯æ™ºè°±å¤§æ¨¡å‹è¿›è¡Œäº¤äº’çš„ä¾èµ–åŒ…</li>
</ul>
<h4 data-id="heading-7">2.3 é¡¹ç›®é…ç½®</h4>
<p>ä¾èµ–æå®šä¹‹åï¼Œæ¥ä¸‹æ¥å°±æ˜¯åœ¨é…ç½®æ–‡ä»¶ä¸­ï¼Œé…ç½®LLMè®¿é—®çš„ç›¸å…³ä¿¡æ¯ã€ä»¥åŠagentç›¸å…³é…ç½®å‚æ•°ï¼Œå¯¹åº”çš„é…ç½®æ–‡ä»¶ <code>resources/application.yml</code></p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">spring:</span>
  <span class="hljs-attr">ai:</span>
    <span class="hljs-attr">zhipuai:</span>
      <span class="hljs-comment"># api-key ä½¿ç”¨ä½ è‡ªå·±ç”³è¯·çš„è¿›è¡Œæ›¿æ¢ï¼›å¦‚æœä¸ºäº†å®‰å…¨è€ƒè™‘ï¼Œå¯ä»¥é€šè¿‡å¯åŠ¨å‚æ•°è¿›è¡Œè®¾ç½®</span>
      <span class="hljs-attr">api-key:</span> <span class="hljs-string">${zhipuai-api-key}</span>
      <span class="hljs-attr">chat:</span> <span class="hljs-comment"># èŠå¤©æ¨¡å‹</span>
        <span class="hljs-attr">options:</span>
          <span class="hljs-attr">model:</span> <span class="hljs-string">GLM-4.7-Flash</span>
</code></pre>
<h3 data-id="heading-8">ä¸‰ã€æ ¸å¿ƒå®ç°</h3>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬è¿›è¡Œå¿«é€Ÿä½“éªŒï¼Œé¦–å…ˆä¸ºäº†æ›´å¥½çš„è§‚å¯Ÿåº”ç”¨ä¸å¤§æ¨¡å‹ä¹‹é—´çš„äº¤äº’ï¼Œæˆ‘ä»¬å®ç°ä¸€ä¸ª<code>LoggingAdvisor</code></p>
<h4 data-id="heading-9">3.1 äº¤äº’æ—¥å¿—æ‰“å°ï¼š MyLoggingAdvisor</h4>
<blockquote>
<p>è¯´æ˜ï¼šè¿™ä¸ªå®ç°éå¿…éœ€ï¼Œä¸æ„Ÿå…´è¶£çš„ç›´æ¥è·³è¿‡</p>
</blockquote>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyLoggingAdvisor</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">BaseAdvisor</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> order;

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-type">boolean</span> showSystemMessage;

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-type">boolean</span> showAvailableTools;

    <span class="hljs-keyword">private</span> <span class="hljs-type">AtomicInteger</span> <span class="hljs-variable">cnt</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AtomicInteger</span>(<span class="hljs-number">1</span>);

    <span class="hljs-keyword">private</span> <span class="hljs-title function_">MyLoggingAdvisor</span><span class="hljs-params">(<span class="hljs-type">int</span> order, <span class="hljs-type">boolean</span> showSystemMessage, <span class="hljs-type">boolean</span> showAvailableTools)</span> {
        <span class="hljs-built_in">this</span>.order = order;
        <span class="hljs-built_in">this</span>.showSystemMessage = showSystemMessage;
        <span class="hljs-built_in">this</span>.showAvailableTools = showAvailableTools;
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getOrder</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.order;
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> ChatClientRequest <span class="hljs-title function_">before</span><span class="hljs-params">(ChatClientRequest chatClientRequest, AdvisorChain advisorChain)</span> {
        System.out.println(<span class="hljs-string">"======================= ç¬¬ "</span> + cnt.getAndAdd(<span class="hljs-number">1</span>) + <span class="hljs-string">" è½® ===================================="</span>);

        <span class="hljs-type">StringBuilder</span> <span class="hljs-variable">sb</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuilder</span>(<span class="hljs-string">"\nUSER: "</span>);

        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.showSystemMessage &amp;&amp; chatClientRequest.prompt().getSystemMessage() != <span class="hljs-literal">null</span>) {
            sb.append(<span class="hljs-string">"\n - SYSTEM: "</span>).append(first(chatClientRequest.prompt().getSystemMessage().getText(), <span class="hljs-number">300</span>));
        }

        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.showAvailableTools) {
            <span class="hljs-type">Object</span> <span class="hljs-variable">tools</span> <span class="hljs-operator">=</span> <span class="hljs-string">"No Tools"</span>;

            <span class="hljs-keyword">if</span> (chatClientRequest.prompt().getOptions() <span class="hljs-keyword">instanceof</span> ToolCallingChatOptions toolOptions) {
                tools = toolOptions.getToolCallbacks().stream().map(tc -&gt; tc.getToolDefinition().name()).toList();
            }

            sb.append(<span class="hljs-string">"\n - TOOLS: "</span>).append(ModelOptionsUtils.toJsonString(tools));
        }

        <span class="hljs-type">Message</span> <span class="hljs-variable">lastMessage</span> <span class="hljs-operator">=</span> chatClientRequest.prompt().getLastUserOrToolResponseMessage();

        <span class="hljs-keyword">if</span> (lastMessage.getMessageType() == MessageType.TOOL) {
            <span class="hljs-type">ToolResponseMessage</span> <span class="hljs-variable">toolResponseMessage</span> <span class="hljs-operator">=</span> (ToolResponseMessage) lastMessage;
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> toolResponse : toolResponseMessage.getResponses()) {
                <span class="hljs-type">var</span> <span class="hljs-variable">tr</span> <span class="hljs-operator">=</span> toolResponse.name() + <span class="hljs-string">": "</span> + first(toolResponse.responseData(), <span class="hljs-number">1000</span>);
                sb.append(<span class="hljs-string">"\n - TOOL-RESPONSE: "</span>).append(tr);
            }
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (lastMessage.getMessageType() == MessageType.USER) {
            <span class="hljs-keyword">if</span> (StringUtils.hasText(lastMessage.getText())) {
                sb.append(<span class="hljs-string">"\n - TEXT: "</span>).append(first(lastMessage.getText(), <span class="hljs-number">1000</span>));
            }
        }

        System.out.println(<span class="hljs-string">"before: "</span> + sb);
        <span class="hljs-keyword">return</span> chatClientRequest;
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> ChatClientResponse <span class="hljs-title function_">after</span><span class="hljs-params">(ChatClientResponse chatClientResponse, AdvisorChain advisorChain)</span> {
        <span class="hljs-type">StringBuilder</span> <span class="hljs-variable">sb</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuilder</span>(<span class="hljs-string">"\nASSISTANT: "</span>);

        <span class="hljs-keyword">if</span> (chatClientResponse.chatResponse() == <span class="hljs-literal">null</span> || chatClientResponse.chatResponse().getResults() == <span class="hljs-literal">null</span>) {
            sb.append(<span class="hljs-string">" No chat response "</span>);
            System.out.println(<span class="hljs-string">"after: "</span> + sb);
            <span class="hljs-keyword">return</span> chatClientResponse;
        }

        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> generation : chatClientResponse.chatResponse().getResults()) {
            <span class="hljs-type">var</span> <span class="hljs-variable">message</span> <span class="hljs-operator">=</span> generation.getOutput();
            <span class="hljs-keyword">if</span> (message.getToolCalls() != <span class="hljs-literal">null</span>) {
                <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> toolCall : message.getToolCalls()) {
                    sb.append(<span class="hljs-string">"\n - TOOL-CALL: "</span>)
                            .append(toolCall.name())
                            .append(<span class="hljs-string">" ("</span>)
                            .append(toolCall.arguments())
                            .append(<span class="hljs-string">")"</span>);
                }
            }

            <span class="hljs-keyword">if</span> (message.getText() != <span class="hljs-literal">null</span>) {
                <span class="hljs-keyword">if</span> (StringUtils.hasText(message.getText())) {
                    sb.append(<span class="hljs-string">"\n - TEXT: "</span>).append(first(message.getText(), <span class="hljs-number">1200</span>));
                }
            }
        }

        System.out.println(<span class="hljs-string">"after: "</span> + sb);
        <span class="hljs-keyword">return</span> chatClientResponse;
    }

    <span class="hljs-keyword">private</span> String <span class="hljs-title function_">first</span><span class="hljs-params">(String text, <span class="hljs-type">int</span> n)</span> {
        <span class="hljs-keyword">if</span> (text.length() &lt;= n) {
            <span class="hljs-keyword">return</span> text;
        }
        <span class="hljs-keyword">return</span> text.substring(<span class="hljs-number">0</span>, n) + <span class="hljs-string">"..."</span>;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Builder <span class="hljs-title function_">builder</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Builder</span>();
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Builder</span> {

        <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">order</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;

        <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> <span class="hljs-variable">showSystemMessage</span> <span class="hljs-operator">=</span> <span class="hljs-literal">true</span>;

        <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> <span class="hljs-variable">showAvailableTools</span> <span class="hljs-operator">=</span> <span class="hljs-literal">true</span>;

        <span class="hljs-keyword">public</span> Builder <span class="hljs-title function_">order</span><span class="hljs-params">(<span class="hljs-type">int</span> order)</span> {
            <span class="hljs-built_in">this</span>.order = order;
            <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>;
        }

        <span class="hljs-keyword">public</span> Builder <span class="hljs-title function_">showSystemMessage</span><span class="hljs-params">(<span class="hljs-type">boolean</span> showSystemMessage)</span> {
            <span class="hljs-built_in">this</span>.showSystemMessage = showSystemMessage;
            <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>;
        }

        <span class="hljs-keyword">public</span> Builder <span class="hljs-title function_">showAvailableTools</span><span class="hljs-params">(<span class="hljs-type">boolean</span> showAvailableTools)</span> {
            <span class="hljs-built_in">this</span>.showAvailableTools = showAvailableTools;
            <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>;
        }

        <span class="hljs-keyword">public</span> MyLoggingAdvisor <span class="hljs-title function_">build</span><span class="hljs-params">()</span> {
            <span class="hljs-type">MyLoggingAdvisor</span> <span class="hljs-variable">advisor</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyLoggingAdvisor</span>(<span class="hljs-built_in">this</span>.order, <span class="hljs-built_in">this</span>.showSystemMessage,
                    <span class="hljs-built_in">this</span>.showAvailableTools);
            <span class="hljs-keyword">return</span> advisor;
        }
    }

}
</code></pre>
<h4 data-id="heading-10">3.2 å‘½ä»¤è¡Œçš„é—®è¯¢åº”ç­”å®ç°ï¼šCommandLineQuestionHandler</h4>
<p>åœ¨å‰é¢çš„è®¾è®¡ç¯‡ä¸­ä»‹ç»äº†<code>AskUserQuestionTool</code>ä¸­ï¼Œè®¾è®¡äº†ä¸€ä¸ªæ‰©å±•ç‚¹ <code>QuestionHandler</code> ç”±ä½¿ç”¨è€…æ¥å®ç°å…·ä½“çš„é—®ç­”äº¤äº’æ–¹æ¡ˆï¼Œå› æ­¤æˆ‘ä»¬å…ˆå®ç°ä¸€ä¸ªåŸºç¡€çš„åŸºäºå‘½ä»¤è¡Œçš„é—®ç­”</p>
<ul>
<li><code>CommandLineQuestionHandler</code>ï¼šå®ç°<code>QuestionHandler</code>æ¥å£ï¼Œå¤„ç†ç”¨æˆ·é—®é¢˜åˆ—è¡¨</li>
<li><code>handle</code>æ–¹æ³•ï¼šéå†é—®é¢˜ï¼Œæ˜¾ç¤ºé€‰é¡¹ä¾›ç”¨æˆ·é€‰æ‹©ï¼Œæ”¯æŒå•é€‰/å¤šé€‰æ¨¡å¼</li>
<li><code>parseResponse</code>æ–¹æ³•ï¼šè§£æç”¨æˆ·è¾“å…¥ï¼Œå°†æ•°å­—ç¼–å·è½¬æ¢ä¸ºå¯¹åº”é€‰é¡¹æ ‡ç­¾ï¼Œæˆ–ç›´æ¥è¿”å›è‡ªå®šä¹‰æ–‡æœ¬ç­”æ¡ˆ</li>
</ul>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * å‘½ä»¤è¡Œé—®é¢˜å¤„ç†å™¨ï¼Œå®ç° AskUserQuestionTool.QuestionHandler æ¥å£
 * ç”¨äºå¤„ç†AIå·¥å…·å‘ç”¨æˆ·æå‡ºçš„é—®é¢˜ï¼Œæ”¯æŒå•é€‰ã€å¤šé€‰å’Œè‡ªå®šä¹‰æ–‡æœ¬è¾“å…¥
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CommandLineQuestionHandler</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">AskUserQuestionTool</span>.QuestionHandler {

    <span class="hljs-comment">/**
     * å¤„ç†ä¼ å…¥çš„é—®é¢˜åˆ—è¡¨ï¼Œé€ä¸ªæ˜¾ç¤ºé—®é¢˜å’Œé€‰é¡¹ï¼Œæ”¶é›†ç”¨æˆ·è¾“å…¥çš„ç­”æ¡ˆ
     *
     * <span class="hljs-doctag">@param</span> questions éœ€è¦å¤„ç†çš„é—®é¢˜åˆ—è¡¨
     * <span class="hljs-doctag">@return</span> åŒ…å«é—®é¢˜å’Œå¯¹åº”ç­”æ¡ˆçš„æ˜ å°„è¡¨
     */</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> Map&lt;String, String&gt; <span class="hljs-title function_">handle</span><span class="hljs-params">(List&lt;AskUserQuestionTool.Question&gt; questions)</span> {
        Map&lt;String, String&gt; answers = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();

        <span class="hljs-type">Scanner</span> <span class="hljs-variable">scanner</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);

        <span class="hljs-keyword">for</span> (AskUserQuestionTool.Question q : questions) {
            <span class="hljs-comment">// æ˜¾ç¤ºé—®é¢˜æ ‡é¢˜å’Œå†…å®¹</span>
            System.out.println(<span class="hljs-string">"\n"</span> + q.header() + <span class="hljs-string">": "</span> + q.question());

            <span class="hljs-comment">// è·å–å¹¶æ˜¾ç¤ºé€‰é¡¹</span>
            List&lt;AskUserQuestionTool.Question.Option&gt; options = q.options();
            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; options.size(); i++) {
                AskUserQuestionTool.Question.<span class="hljs-type">Option</span> <span class="hljs-variable">opt</span> <span class="hljs-operator">=</span> options.get(i);
                System.out.printf(<span class="hljs-string">"  %d. %s - %s%n"</span>, i + <span class="hljs-number">1</span>, opt.label(), opt.description());
            }

            <span class="hljs-comment">// æ ¹æ®æ˜¯å¦ä¸ºå¤šé€‰æ˜¾ç¤ºæç¤ºä¿¡æ¯</span>
            <span class="hljs-keyword">if</span> (q.multiSelect()) {
                System.out.println(<span class="hljs-string">"  (Enter numbers separated by commas, or type custom text)"</span>);
            } <span class="hljs-keyword">else</span> {
                System.out.println(<span class="hljs-string">"  (Enter a number, or type custom text)"</span>);
            }

            <span class="hljs-comment">// è¯»å–ç”¨æˆ·è¾“å…¥å¹¶è§£æç­”æ¡ˆ</span>
            <span class="hljs-type">String</span> <span class="hljs-variable">response</span> <span class="hljs-operator">=</span> scanner.nextLine().trim();
            answers.put(q.question(), parseResponse(response, options));
        }

        <span class="hljs-keyword">return</span> answers;
    }

    <span class="hljs-comment">/**
     * è§£æç”¨æˆ·è¾“å…¥çš„å“åº”ï¼Œæ ¹æ®é€‰é¡¹ç´¢å¼•æˆ–è‡ªå®šä¹‰æ–‡æœ¬è¿”å›å¯¹åº”çš„å€¼
     *
     * <span class="hljs-doctag">@param</span> response ç”¨æˆ·è¾“å…¥çš„åŸå§‹å­—ç¬¦ä¸²
     * <span class="hljs-doctag">@param</span> options  å¯ç”¨çš„é€‰é¡¹åˆ—è¡¨
     * <span class="hljs-doctag">@return</span> è§£æåçš„ç­”æ¡ˆå­—ç¬¦ä¸²
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">parseResponse</span><span class="hljs-params">(String response, List&lt;AskUserQuestionTool.Question.Option&gt; options)</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// å°è¯•å°†è¾“å…¥è§£æä¸ºé€‰é¡¹ç¼–å·ï¼ˆæ”¯æŒå¤šä¸ªé€‰é¡¹ï¼‰</span>
            String[] parts = response.split(<span class="hljs-string">","</span>);
            List&lt;String&gt; labels = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
            <span class="hljs-keyword">for</span> (String part : parts) {
                <span class="hljs-type">int</span> <span class="hljs-variable">index</span> <span class="hljs-operator">=</span> Integer.parseInt(part.trim()) - <span class="hljs-number">1</span>;
                <span class="hljs-keyword">if</span> (index &gt;= <span class="hljs-number">0</span> &amp;&amp; index &lt; options.size()) {
                    labels.add(options.get(index).label());
                }
            }
            <span class="hljs-comment">// å¦‚æœæ²¡æœ‰æ‰¾åˆ°æœ‰æ•ˆçš„é€‰é¡¹ç¼–å·ï¼Œåˆ™è¿”å›åŸå§‹è¾“å…¥ï¼›å¦åˆ™è¿”å›é€‰é¡¹æ ‡ç­¾çš„ç»„åˆ</span>
            <span class="hljs-keyword">return</span> labels.isEmpty() ? response : String.join(<span class="hljs-string">", "</span>, labels);
        } <span class="hljs-keyword">catch</span> (NumberFormatException e) {
            <span class="hljs-comment">// å¦‚æœè¾“å…¥ä¸æ˜¯æ•°å­—ï¼Œåˆ™å°†å…¶è§†ä¸ºè‡ªç”±æ–‡æœ¬</span>
            <span class="hljs-keyword">return</span> response;
        }
    }
}
</code></pre>
<h4 data-id="heading-11">3.3 é—®è¯¢å¯¹è¯å®ç°</h4>
<p>åˆ›å»ºä¸€ä¸ªç®€æ˜“èŠå¤©å®¢æˆ·ç«¯ï¼Œé…ç½®äº†ä¸‰ä¸ªAdvisorï¼šå·¥å…·è°ƒç”¨é¡¾é—®ã€æ¶ˆæ¯è®°å¿†é¡¾é—®å’Œè‡ªå®šä¹‰æ—¥å¿—é¡¾é—®ï¼ˆéšè—å¯ç”¨å·¥å…·å’Œç³»ç»Ÿæ¶ˆæ¯ï¼‰ã€‚</p>
<p>ç„¶åå¯åŠ¨ä¸€ä¸ªå‘½ä»¤è¡Œå¾ªç¯ï¼Œç”¨æˆ·è¾“å…¥é—®é¢˜åé€šè¿‡èŠå¤©å®¢æˆ·ç«¯å¤„ç†å¹¶è¾“å‡ºAIåŠ©æ‰‹çš„å›ç­”</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Bean</span>
CommandLineRunner <span class="hljs-title function_">commandLineRunner</span><span class="hljs-params">(ChatClient.Builder chatClientBuilder)</span> <span class="hljs-keyword">throws</span> IOException {
    <span class="hljs-keyword">return</span> args -&gt; {
        <span class="hljs-comment">// æ„å»ºChatClientå®ä¾‹ï¼Œé…ç½®æ‰€éœ€çš„å·¥å…·å’Œé¡¾é—®</span>
        <span class="hljs-type">ChatClient</span> <span class="hljs-variable">chatClient</span> <span class="hljs-operator">=</span> chatClientBuilder
                <span class="hljs-comment">// è®¾ç½®é»˜è®¤å·¥å…·ï¼Œè¿™é‡Œä½¿ç”¨AskUserQuestionToolï¼Œå®ƒå…è®¸AIå‘ç”¨æˆ·æé—®</span>
                .defaultTools(AskUserQuestionTool.builder()
                        <span class="hljs-comment">// ä½¿ç”¨å‘½ä»¤è¡Œé—®é¢˜å¤„ç†å™¨æ¥å¤„ç†AIå‘ç”¨æˆ·æå‡ºçš„é—®é¢˜</span>
                        .questionHandler(<span class="hljs-keyword">new</span> <span class="hljs-title class_">CommandLineQuestionHandler</span>())
                        .build())

                <span class="hljs-comment">// é…ç½®é»˜è®¤çš„é¡¾é—®ï¼ˆæ‹¦æˆªå™¨ï¼‰ï¼ŒæŒ‰é¡ºåºæ‰§è¡Œ</span>
                .defaultAdvisors(
                        <span class="hljs-comment">// å·¥å…·è°ƒç”¨é¡¾é—®ï¼šå¤„ç†å·¥å…·è°ƒç”¨é€»è¾‘</span>
                        ToolCallAdvisor.builder().conversationHistoryEnabled(<span class="hljs-literal">false</span>).build(),
                        
                        <span class="hljs-comment">// æ¶ˆæ¯è®°å¿†é¡¾é—®ï¼šç»´æŠ¤å¯¹è¯å†å²ï¼Œä½¿ç”¨æ¶ˆæ¯çª—å£èŠå¤©è®°å¿†</span>
                        <span class="hljs-comment">// ä½äºå·¥å…·è°ƒç”¨é¡¾é—®ä¹‹åï¼Œä»¥ç¡®ä¿èƒ½å¤Ÿè®°ä½å·¥å…·è°ƒç”¨ç»“æœ</span>
                        MessageChatMemoryAdvisor.builder(
                            MessageWindowChatMemory.builder()
                                .maxMessages(<span class="hljs-number">500</span>)  <span class="hljs-comment">// æœ€å¤šä¿å­˜500æ¡æ¶ˆæ¯</span>
                                .build())
                        .build(),
                        
                        <span class="hljs-comment">// è‡ªå®šä¹‰æ—¥å¿—é¡¾é—®ï¼šè®°å½•å¯¹è¯è¿‡ç¨‹ï¼Œå¯æ§åˆ¶æ˜¯å¦æ˜¾ç¤ºå¯ç”¨å·¥å…·å’Œç³»ç»Ÿæ¶ˆæ¯</span>
                        MyLoggingAdvisor.builder()
                                .showAvailableTools(<span class="hljs-literal">true</span>)   <span class="hljs-comment">// æ˜¾ç¤ºå¯ç”¨å·¥å…·åˆ—è¡¨</span>
                                .showSystemMessage(<span class="hljs-literal">true</span>)    <span class="hljs-comment">// æ˜¾ç¤ºç³»ç»Ÿæ¶ˆæ¯</span>
                                .build())
                .build();

        <span class="hljs-comment">// å¯åŠ¨èŠå¤©å¾ªç¯çš„æç¤ºä¿¡æ¯</span>
        System.out.println(<span class="hljs-string">"\nI am your assistant.\n"</span>);

        <span class="hljs-comment">// ä½¿ç”¨try-with-resourcesç¡®ä¿Scannerèµ„æºå¾—åˆ°æ­£ç¡®é‡Šæ”¾</span>
        <span class="hljs-keyword">try</span> (<span class="hljs-type">Scanner</span> <span class="hljs-variable">scanner</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in)) {
            <span class="hljs-comment">// æ— é™å¾ªç¯ï¼ŒæŒç»­æ¥æ”¶ç”¨æˆ·è¾“å…¥å¹¶è¿”å›AIå›å¤</span>
            <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
                System.out.print(<span class="hljs-string">"\n$-&gt;USER: "</span>);  <span class="hljs-comment">// æç¤ºç”¨æˆ·è¾“å…¥</span>
                
                <span class="hljs-comment">// è·å–ç”¨æˆ·è¾“å…¥ï¼Œé€šè¿‡chatClientå‘é€è¯·æ±‚ï¼ŒæŒ‡å®šå¯¹è¯IDï¼Œå¹¶è¾“å‡ºAIå›å¤</span>
                System.out.println(<span class="hljs-string">"\n$-&gt;ASSISTANT: "</span> + 
                        chatClient.prompt(scanner.nextLine())  <span class="hljs-comment">// å‘é€ç”¨æˆ·è¾“å…¥åˆ°AI</span>
                                .advisors(a -&gt; a.param(ChatMemory.CONVERSATION_ID, <span class="hljs-string">"113331"</span>))  <span class="hljs-comment">// è®¾ç½®å¯¹è¯IDä»¥ç»´æŠ¤ä¸Šä¸‹æ–‡</span>
                                .call().content());  <span class="hljs-comment">// æ‰§è¡Œè°ƒç”¨å¹¶è·å–AIå›å¤å†…å®¹</span>
            }
        }
    };
}
</code></pre>
<h4 data-id="heading-12">3.4 æµ‹è¯•éªŒè¯</h4>
<p>ç›´æ¥å¯åŠ¨é¡¹ç›®ï¼Œç„¶åå†æ§åˆ¶å°ä¸­è¾“å…¥æˆ‘çš„åŸå§‹è¯‰æ±‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/864eac3fbd7043a0948db1c2c339fa90~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA54Gw54Gw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770771616&amp;x-signature=uwWH9EvIUxlWsS1KvtWLzPeVC%2B4%3D" alt="" loading="lazy"/></p>
<p>ä¸‹é¢æ˜¯å®Œæ•´çš„æ–‡å­—ç‰ˆæœ¬è¾“å‡ºå†…å®¹</p>
<pre><code class="hljs language-bash" lang="bash">I am your assistant.


$-&gt;USER: æˆ‘å‡†å¤‡è®¾è®¡ä¸€å¼ é”¦é²¤ä¸»é¢˜çš„å¾®ä¿¡çº¢åŒ…å°é¢
======================= ç¬¬ 1 è½® ====================================
before: 
USER: 
 - SYSTEM: 
 - TOOLS: [<span class="hljs-string">"AskUserQuestionTool"</span>]
 - TEXT: æˆ‘å‡†å¤‡è®¾è®¡ä¸€å¼ é”¦é²¤ä¸»é¢˜çš„å¾®ä¿¡çº¢åŒ…å°é¢
after: 
ASSISTANT: 
 - TOOL-CALL: AskUserQuestionTool ({<span class="hljs-string">"questions"</span>:[{<span class="hljs-string">"header"</span>: <span class="hljs-string">"è®¾è®¡é£æ ¼"</span>, <span class="hljs-string">"multiSelect"</span>: <span class="hljs-literal">false</span>, <span class="hljs-string">"options"</span>: [{<span class="hljs-string">"description"</span>: <span class="hljs-string">"ç®€çº¦çº¿æ¡å’Œç°ä»£è‰²å½©ï¼Œé€‚åˆæ—¥å¸¸ä½¿ç”¨"</span>, <span class="hljs-string">"label"</span>: <span class="hljs-string">"ç®€çº¦ç°ä»£é£"</span>}, {<span class="hljs-string">"description"</span>: <span class="hljs-string">"ä¼ ç»Ÿæ°´å¢¨ç”»é£æ ¼ï¼Œå±•ç°å›½æ½®éŸµå‘³"</span>, <span class="hljs-string">"label"</span>: <span class="hljs-string">"å›½æ½®æ°´å¢¨é£"</span>}, {<span class="hljs-string">"description"</span>: <span class="hljs-string">"å¯çˆ±çš„å¡é€šå½¢è±¡ï¼Œæ´»æ³¼æœ‰è¶£"</span>, <span class="hljs-string">"label"</span>: <span class="hljs-string">"å¯çˆ±å¡é€šé£"</span>}, {<span class="hljs-string">"description"</span>: <span class="hljs-string">"é‡‘è‰²ä¸ºä¸»ï¼Œé…ä»¥ä¼ ç»Ÿçº¹æ ·ï¼Œæ˜¾å¾—é«˜çº§"</span>, <span class="hljs-string">"label"</span>: <span class="hljs-string">"é‡‘è‰²å¥¢åé£"</span>}], <span class="hljs-string">"question"</span>: <span class="hljs-string">"ä½ å¸Œæœ›çº¢åŒ…å°é¢çš„è®¾è®¡é£æ ¼æ˜¯ä»€ä¹ˆæ ·çš„ï¼Ÿ"</span>}, {<span class="hljs-string">"header"</span>: <span class="hljs-string">"ä½¿ç”¨åœºæ™¯"</span>, <span class="hljs-string">"multiSelect"</span>: <span class="hljs-literal">true</span>, <span class="hljs-string">"options"</span>: [{<span class="hljs-string">"description"</span>: <span class="hljs-string">"æ–°å¹´ã€æ˜¥èŠ‚ç­‰ä¼ ç»ŸèŠ‚æ—¥"</span>, <span class="hljs-string">"label"</span>: <span class="hljs-string">"ä¼ ç»ŸèŠ‚æ—¥"</span>}, {<span class="hljs-string">"description"</span>: <span class="hljs-string">"å©šç¤¼ã€ç”Ÿæ—¥ã€åº†å…¸ç­‰å–œåº†åœºåˆ"</span>, <span class="hljs-string">"label"</span>: <span class="hljs-string">"å–œåº†åœºåˆ"</span>}, {<span class="hljs-string">"description"</span>: <span class="hljs-string">"æ—¥å¸¸é€ç¤¼ã€æœ‹å‹é—´äº’åŠ¨"</span>, <span class="hljs-string">"label"</span>: <span class="hljs-string">"æ—¥å¸¸äº’åŠ¨"</span>}, {<span class="hljs-string">"description"</span>: <span class="hljs-string">"å•†åŠ¡åœºåˆã€å®¢æˆ·å…³ç³»ç»´æŠ¤"</span>, <span class="hljs-string">"label"</span>: <span class="hljs-string">"å•†åŠ¡åœºåˆ"</span>}], <span class="hljs-string">"question"</span>: <span class="hljs-string">"è¿™ä¸ªçº¢åŒ…å°é¢ä¸»è¦ä¼šåœ¨ä»€ä¹ˆåœºåˆä½¿ç”¨ï¼Ÿ"</span>}, {<span class="hljs-string">"header"</span>: <span class="hljs-string">"é¢œè‰²åå¥½"</span>, <span class="hljs-string">"multiSelect"</span>: <span class="hljs-literal">false</span>, <span class="hljs-string">"options"</span>: [{<span class="hljs-string">"description"</span>: <span class="hljs-string">"çº¢è‰²ä¸ºä¸»ï¼Œé…é‡‘è‰²æˆ–ç™½è‰²"</span>, <span class="hljs-string">"label"</span>: <span class="hljs-string">"çº¢é‡‘é…è‰²"</span>}, {<span class="hljs-string">"description"</span>: <span class="hljs-string">"è“è‰²ä¸ºä¸»ï¼Œé…é‡‘è‰²æˆ–ç™½è‰²"</span>, <span class="hljs-string">"label"</span>: <span class="hljs-string">"è“é‡‘é…è‰²"</span>}, {<span class="hljs-string">"description"</span>: <span class="hljs-string">"çº¯è‰²èƒŒæ™¯ï¼Œç®€æ´å¤§æ–¹"</span>, <span class="hljs-string">"label"</span>: <span class="hljs-string">"å•è‰²èƒŒæ™¯"</span>}, {<span class="hljs-string">"description"</span>: <span class="hljs-string">"æ ¹æ®é”¦é²¤è‡ªç„¶è‰²å½©æ­é…"</span>, <span class="hljs-string">"label"</span>: <span class="hljs-string">"è‡ªç„¶è‰²å½©"</span>}], <span class="hljs-string">"question"</span>: <span class="hljs-string">"ä½ æ›´å€¾å‘äºä»€ä¹ˆé¢œè‰²æ­é…ï¼Ÿ"</span>}, {<span class="hljs-string">"header"</span>: <span class="hljs-string">"æ–‡å­—å†…å®¹"</span>, <span class="hljs-string">"multiSelect"</span>: <span class="hljs-literal">false</span>, <span class="hljs-string">"options"</span>: [{<span class="hljs-string">"description"</span>: <span class="hljs-string">"åªæ”¾é”¦é²¤å›¾æ¡ˆï¼Œç®€æ´å¤§æ–¹"</span>, <span class="hljs-string">"label"</span>: <span class="hljs-string">"çº¯å›¾æ¡ˆ"</span>}, {<span class="hljs-string">"description"</span>: <span class="hljs-string">"é”¦é²¤å›¾æ¡ˆ+ç®€å•ç¥ç¦è¯­"</span>, <span class="hljs-string">"label"</span>: <span class="hljs-string">"å›¾æ¡ˆ+ç¥ç¦è¯­"</span>}, {<span class="hljs-string">"description"</span>: <span class="hljs-string">"é”¦é²¤å›¾æ¡ˆ+å“ç‰Œæˆ–å…¬å¸ä¿¡æ¯"</span>, <span class="hljs-string">"label"</span>: <span class="hljs-string">"å›¾æ¡ˆ+æ–‡å­—"</span>}], <span class="hljs-string">"question"</span>: <span class="hljs-string">"çº¢åŒ…å°é¢æ˜¯å¦éœ€è¦æ·»åŠ æ–‡å­—å†…å®¹ï¼Ÿ"</span>}]})
 - TEXT: æˆ‘æ¥å¸®ä½ è®¾è®¡é”¦é²¤ä¸»é¢˜çš„å¾®ä¿¡çº¢åŒ…å°é¢ï¼ä¸ºäº†ç»™ä½ æä¾›æ›´ç¬¦åˆéœ€æ±‚çš„è®¾è®¡æ–¹æ¡ˆï¼Œæˆ‘éœ€è¦äº†è§£ä¸€äº›å…·ä½“ä¿¡æ¯ã€‚

è®¾è®¡é£æ ¼: ä½ å¸Œæœ›çº¢åŒ…å°é¢çš„è®¾è®¡é£æ ¼æ˜¯ä»€ä¹ˆæ ·çš„ï¼Ÿ
  1. ç®€çº¦ç°ä»£é£ - ç®€çº¦çº¿æ¡å’Œç°ä»£è‰²å½©ï¼Œé€‚åˆæ—¥å¸¸ä½¿ç”¨
  2. å›½æ½®æ°´å¢¨é£ - ä¼ ç»Ÿæ°´å¢¨ç”»é£æ ¼ï¼Œå±•ç°å›½æ½®éŸµå‘³
  3. å¯çˆ±å¡é€šé£ - å¯çˆ±çš„å¡é€šå½¢è±¡ï¼Œæ´»æ³¼æœ‰è¶£
  4. é‡‘è‰²å¥¢åé£ - é‡‘è‰²ä¸ºä¸»ï¼Œé…ä»¥ä¼ ç»Ÿçº¹æ ·ï¼Œæ˜¾å¾—é«˜çº§
  (Enter a number, or <span class="hljs-built_in">type</span> custom text)
1

ä½¿ç”¨åœºæ™¯: è¿™ä¸ªçº¢åŒ…å°é¢ä¸»è¦ä¼šåœ¨ä»€ä¹ˆåœºåˆä½¿ç”¨ï¼Ÿ
  1. ä¼ ç»ŸèŠ‚æ—¥ - æ–°å¹´ã€æ˜¥èŠ‚ç­‰ä¼ ç»ŸèŠ‚æ—¥
  2. å–œåº†åœºåˆ - å©šç¤¼ã€ç”Ÿæ—¥ã€åº†å…¸ç­‰å–œåº†åœºåˆ
  3. æ—¥å¸¸äº’åŠ¨ - æ—¥å¸¸é€ç¤¼ã€æœ‹å‹é—´äº’åŠ¨
  4. å•†åŠ¡åœºåˆ - å•†åŠ¡åœºåˆã€å®¢æˆ·å…³ç³»ç»´æŠ¤
  (Enter numbers separated by commas, or <span class="hljs-built_in">type</span> custom text)
1

é¢œè‰²åå¥½: ä½ æ›´å€¾å‘äºä»€ä¹ˆé¢œè‰²æ­é…ï¼Ÿ
  1. çº¢é‡‘é…è‰² - çº¢è‰²ä¸ºä¸»ï¼Œé…é‡‘è‰²æˆ–ç™½è‰²
  2. è“é‡‘é…è‰² - è“è‰²ä¸ºä¸»ï¼Œé…é‡‘è‰²æˆ–ç™½è‰²
  3. å•è‰²èƒŒæ™¯ - çº¯è‰²èƒŒæ™¯ï¼Œç®€æ´å¤§æ–¹
  4. è‡ªç„¶è‰²å½© - æ ¹æ®é”¦é²¤è‡ªç„¶è‰²å½©æ­é…
  (Enter a number, or <span class="hljs-built_in">type</span> custom text)
1

æ–‡å­—å†…å®¹: çº¢åŒ…å°é¢æ˜¯å¦éœ€è¦æ·»åŠ æ–‡å­—å†…å®¹ï¼Ÿ
  1. çº¯å›¾æ¡ˆ - åªæ”¾é”¦é²¤å›¾æ¡ˆï¼Œç®€æ´å¤§æ–¹
  2. å›¾æ¡ˆ+ç¥ç¦è¯­ - é”¦é²¤å›¾æ¡ˆ+ç®€å•ç¥ç¦è¯­
  3. å›¾æ¡ˆ+æ–‡å­— - é”¦é²¤å›¾æ¡ˆ+å“ç‰Œæˆ–å…¬å¸ä¿¡æ¯
  (Enter a number, or <span class="hljs-built_in">type</span> custom text)
2
======================= ç¬¬ 2 è½® ====================================
before: 
USER: 
 - SYSTEM: 
 - TOOLS: [<span class="hljs-string">"AskUserQuestionTool"</span>]
 - TOOL-RESPONSE: AskUserQuestionTool: <span class="hljs-string">"User has answered your questions: {\"è¿™ä¸ªçº¢åŒ…å°é¢ä¸»è¦ä¼šåœ¨ä»€ä¹ˆåœºåˆä½¿ç”¨ï¼Ÿ\":\"ä¼ ç»ŸèŠ‚æ—¥\",\"ä½ å¸Œæœ›çº¢åŒ…å°é¢çš„è®¾è®¡é£æ ¼æ˜¯ä»€ä¹ˆæ ·çš„ï¼Ÿ\":\"ç®€çº¦ç°ä»£é£\",\"ä½ æ›´å€¾å‘äºä»€ä¹ˆé¢œè‰²æ­é…ï¼Ÿ\":\"çº¢é‡‘é…è‰²\",\"çº¢åŒ…å°é¢æ˜¯å¦éœ€è¦æ·»åŠ æ–‡å­—å†…å®¹ï¼Ÿ\":\"å›¾æ¡ˆ+ç¥ç¦è¯­\"}"</span>
after: 
ASSISTANT: 
 - TEXT: æ ¹æ®æ‚¨çš„éœ€æ±‚ï¼Œæˆ‘ä¸ºæ‚¨è®¾è®¡äº†ä¸€ä¸ª**ç®€çº¦ç°ä»£é£ã€çº¢é‡‘é…è‰²çš„é”¦é²¤ä¸»é¢˜å¾®ä¿¡çº¢åŒ…å°é¢**ï¼Œéå¸¸é€‚åˆä¼ ç»ŸèŠ‚æ—¥ä½¿ç”¨ã€‚

<span class="hljs-comment">## ğŸ¨ è®¾è®¡æ–¹æ¡ˆè¯¦æƒ…</span>

<span class="hljs-comment">### ğŸ“ å°ºå¯¸è§„æ ¼</span>
- **ä¸»å°ºå¯¸**: 1080Ã—1920åƒç´ ï¼ˆç¬¦åˆå¾®ä¿¡çº¢åŒ…å°é¢æ ‡å‡†ï¼‰
- **å®‰å…¨åŒºåŸŸ**: ä¸Šä¸‹å·¦å³å„ç•™å‡º100pxï¼Œç¡®ä¿é‡è¦å†…å®¹ä¸è¢«é®æŒ¡

<span class="hljs-comment">### ğŸ¯ è®¾è®¡å…ƒç´ </span>
1. **èƒŒæ™¯**: 
   - ä½¿ç”¨æ¸å˜çº¢è‰²èƒŒæ™¯ï¼ˆä»æ·±çº¢åˆ°æµ…çº¢ï¼‰ï¼Œè¥é€ èŠ‚æ—¥æ°›å›´
   - æ·»åŠ å¾®å¦™çš„é‡‘è‰²ç½‘æ ¼çº¹ç†ï¼Œå¢åŠ ç°ä»£æ„Ÿ

2. **é”¦é²¤å›¾æ¡ˆ**:
   - é€‰ç”¨ç®€çº¦çº¿æ¡é£æ ¼çš„é”¦é²¤å‰ªå½±
   - é”¦é²¤å‘ˆå‘ä¸Šæ¸¸åŠ¨å§¿æ€ï¼Œå¯“æ„<span class="hljs-string">"é±¼è·ƒé¾™é—¨"</span>
   - é‡‘è‰²çº¿æ¡å‹¾å‹’ï¼Œä¸çº¢è‰²èƒŒæ™¯å½¢æˆå¯¹æ¯”

3. **æ–‡å­—å†…å®¹**:
   - **ä¸»æ ‡é¢˜**: <span class="hljs-string">"ç¦æ»¡é”¦é²¤"</span>ï¼ˆé‡‘è‰²ç«‹ä½“æ•ˆæœï¼‰
   - **ç¥ç¦è¯­**: <span class="hljs-string">"å¹´å¹´æœ‰ä½™ï¼Œç¦è¿ç»µé•¿"</span>
   - **è£…é¥°å…ƒç´ **: æ°´æ³¢çº¹ã€ç¥¥äº‘ç­‰ä¼ ç»Ÿå…ƒç´ ç‚¹ç¼€

4. **å“ç‰Œä¿¡æ¯**ï¼ˆå¯é€‰ï¼‰:
   - åº•éƒ¨å°å­—ï¼š<span class="hljs-string">"[æ‚¨çš„å“ç‰Œ/å§“å]ç¥æ‚¨æ–°å¹´å¿«ä¹"</span>

<span class="hljs-comment">### ğŸŒˆ è‰²å½©æ–¹æ¡ˆ</span>
- **ä¸»è‰²**: <span class="hljs-comment">#D32F2Fï¼ˆæ·±çº¢ï¼‰â†’ #FFEB3Bï¼ˆé‡‘è‰²æ¸å˜ï¼‰</span>
- **è¾…åŠ©è‰²**: <span class="hljs-comment">#FFF8E1ï¼ˆæµ…ç±³è‰²ï¼Œç”¨äºæ–‡å­—èƒŒæ™¯ï¼‰</span>

<span class="hljs-comment">### âœ¨ è®¾è®¡äº®ç‚¹</span>
- ç®€çº¦ç°ä»£çš„çº¿æ¡é£æ ¼ï¼Œé¿å…è¿‡äºç¹å¤
- çº¢é‡‘é…è‰²ç»å…¸å¤§æ°”ï¼Œç¬¦åˆä¼ ç»ŸèŠ‚æ—¥æ°›å›´
- é”¦é²¤å‘ä¸Šæ¸¸åŠ¨çš„å§¿æ€ï¼Œå¯“æ„ç§¯æå‘ä¸Š
- èŠ‚å¥æ„Ÿçš„å¸ƒå±€ï¼Œè§†è§‰å¹³è¡¡åè°ƒ

<span class="hljs-comment">### ğŸ“ ä½¿ç”¨å»ºè®®</span>
- é€‚åˆæ˜¥èŠ‚ã€å…ƒå®µèŠ‚ã€ä¸­ç§‹ç­‰ä¼ ç»ŸèŠ‚æ—¥å‘é€
- å¯ç”¨äºäº²å‹ç¥ç¦ã€å•†åŠ¡æ‹œå¹´ã€å®¢æˆ·ç­”è°¢ç­‰åœºåˆ
- çº¢é‡‘é…è‰²æ—¢æœ‰ä¼ ç»ŸéŸµå‘³ï¼Œåˆä¸å¤±ç°ä»£æ„Ÿ

è¿™ä¸ªè®¾è®¡æ–¹æ¡ˆæ—¢ä¿æŒäº†ä¼ ç»ŸèŠ‚æ—¥çš„å–œåº†æ°›å›´ï¼Œåˆç¬¦åˆç°ä»£å®¡ç¾ï¼Œç›¸ä¿¡ä¼šæ˜¯ä¸€ä¸ªå¾ˆå—æ¬¢è¿çš„çº¢åŒ…å°é¢ï¼æ‚¨è§‰å¾—è¿™ä¸ªè®¾è®¡æ–¹æ¡ˆå¦‚ä½•ï¼Ÿå¦‚æœéœ€è¦è°ƒæ•´ä»»ä½•ç»†èŠ‚ï¼Œè¯·å‘Šè¯‰æˆ‘ã€‚

$-&gt;ASSISTANT: æ ¹æ®æ‚¨çš„éœ€æ±‚ï¼Œæˆ‘ä¸ºæ‚¨è®¾è®¡äº†ä¸€ä¸ª**ç®€çº¦ç°ä»£é£ã€çº¢é‡‘é…è‰²çš„é”¦é²¤ä¸»é¢˜å¾®ä¿¡çº¢åŒ…å°é¢**ï¼Œéå¸¸é€‚åˆä¼ ç»ŸèŠ‚æ—¥ä½¿ç”¨ã€‚

<span class="hljs-comment">## ğŸ¨ è®¾è®¡æ–¹æ¡ˆè¯¦æƒ…</span>

<span class="hljs-comment">### ğŸ“ å°ºå¯¸è§„æ ¼</span>
- **ä¸»å°ºå¯¸**: 1080Ã—1920åƒç´ ï¼ˆç¬¦åˆå¾®ä¿¡çº¢åŒ…å°é¢æ ‡å‡†ï¼‰
- **å®‰å…¨åŒºåŸŸ**: ä¸Šä¸‹å·¦å³å„ç•™å‡º100pxï¼Œç¡®ä¿é‡è¦å†…å®¹ä¸è¢«é®æŒ¡

<span class="hljs-comment">### ğŸ¯ è®¾è®¡å…ƒç´ </span>
1. **èƒŒæ™¯**: 
   - ä½¿ç”¨æ¸å˜çº¢è‰²èƒŒæ™¯ï¼ˆä»æ·±çº¢åˆ°æµ…çº¢ï¼‰ï¼Œè¥é€ èŠ‚æ—¥æ°›å›´
   - æ·»åŠ å¾®å¦™çš„é‡‘è‰²ç½‘æ ¼çº¹ç†ï¼Œå¢åŠ ç°ä»£æ„Ÿ

2. **é”¦é²¤å›¾æ¡ˆ**:
   - é€‰ç”¨ç®€çº¦çº¿æ¡é£æ ¼çš„é”¦é²¤å‰ªå½±
   - é”¦é²¤å‘ˆå‘ä¸Šæ¸¸åŠ¨å§¿æ€ï¼Œå¯“æ„<span class="hljs-string">"é±¼è·ƒé¾™é—¨"</span>
   - é‡‘è‰²çº¿æ¡å‹¾å‹’ï¼Œä¸çº¢è‰²èƒŒæ™¯å½¢æˆå¯¹æ¯”

3. **æ–‡å­—å†…å®¹**:
   - **ä¸»æ ‡é¢˜**: <span class="hljs-string">"ç¦æ»¡é”¦é²¤"</span>ï¼ˆé‡‘è‰²ç«‹ä½“æ•ˆæœï¼‰
   - **ç¥ç¦è¯­**: <span class="hljs-string">"å¹´å¹´æœ‰ä½™ï¼Œç¦è¿ç»µé•¿"</span>
   - **è£…é¥°å…ƒç´ **: æ°´æ³¢çº¹ã€ç¥¥äº‘ç­‰ä¼ ç»Ÿå…ƒç´ ç‚¹ç¼€

4. **å“ç‰Œä¿¡æ¯**ï¼ˆå¯é€‰ï¼‰:
   - åº•éƒ¨å°å­—ï¼š<span class="hljs-string">"[æ‚¨çš„å“ç‰Œ/å§“å]ç¥æ‚¨æ–°å¹´å¿«ä¹"</span>

<span class="hljs-comment">### ğŸŒˆ è‰²å½©æ–¹æ¡ˆ</span>
- **ä¸»è‰²**: <span class="hljs-comment">#D32F2Fï¼ˆæ·±çº¢ï¼‰â†’ #FFEB3Bï¼ˆé‡‘è‰²æ¸å˜ï¼‰</span>
- **è¾…åŠ©è‰²**: <span class="hljs-comment">#FFF8E1ï¼ˆæµ…ç±³è‰²ï¼Œç”¨äºæ–‡å­—èƒŒæ™¯ï¼‰</span>

<span class="hljs-comment">### âœ¨ è®¾è®¡äº®ç‚¹</span>
- ç®€çº¦ç°ä»£çš„çº¿æ¡é£æ ¼ï¼Œé¿å…è¿‡äºç¹å¤
- çº¢é‡‘é…è‰²ç»å…¸å¤§æ°”ï¼Œç¬¦åˆä¼ ç»ŸèŠ‚æ—¥æ°›å›´
- é”¦é²¤å‘ä¸Šæ¸¸åŠ¨çš„å§¿æ€ï¼Œå¯“æ„ç§¯æå‘ä¸Š
- èŠ‚å¥æ„Ÿçš„å¸ƒå±€ï¼Œè§†è§‰å¹³è¡¡åè°ƒ

<span class="hljs-comment">### ğŸ“ ä½¿ç”¨å»ºè®®</span>
- é€‚åˆæ˜¥èŠ‚ã€å…ƒå®µèŠ‚ã€ä¸­ç§‹ç­‰ä¼ ç»ŸèŠ‚æ—¥å‘é€
- å¯ç”¨äºäº²å‹ç¥ç¦ã€å•†åŠ¡æ‹œå¹´ã€å®¢æˆ·ç­”è°¢ç­‰åœºåˆ
- çº¢é‡‘é…è‰²æ—¢æœ‰ä¼ ç»ŸéŸµå‘³ï¼Œåˆä¸å¤±ç°ä»£æ„Ÿ

è¿™ä¸ªè®¾è®¡æ–¹æ¡ˆæ—¢ä¿æŒäº†ä¼ ç»ŸèŠ‚æ—¥çš„å–œåº†æ°›å›´ï¼Œåˆç¬¦åˆç°ä»£å®¡ç¾ï¼Œç›¸ä¿¡ä¼šæ˜¯ä¸€ä¸ªå¾ˆå—æ¬¢è¿çš„çº¢åŒ…å°é¢ï¼æ‚¨è§‰å¾—è¿™ä¸ªè®¾è®¡æ–¹æ¡ˆå¦‚ä½•ï¼Ÿå¦‚æœéœ€è¦è°ƒæ•´ä»»ä½•ç»†èŠ‚ï¼Œè¯·å‘Šè¯‰æˆ‘ã€‚
</code></pre>
<p>æˆ‘ä»¬å¯ä»¥å°†è¿™ä¸ªæ–¹æ¡ˆï¼Œæ‹¿æ¥ç”Ÿæˆå›¾ç‰‡ï¼Œæ¯”å¦‚ä¸‹é¢æ˜¯è±†åŒ…ã€åƒé—®ã€å…ƒå®ç­‰ä¸åŒå¹³å°çš„ç”Ÿæˆæ•ˆæœ</p>





























<table><thead><tr><th>æ¨¡å‹</th><th>æ•ˆæœå›¾</th></tr></thead><tbody><tr><td>è±†åŒ…</td><td><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/717a119154874a61b6fe649239838e51~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA54Gw54Gw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770771616&amp;x-signature=Ld4iSoksfjl16C8apJ%2BhCh1B0yc%3D" alt="è±†åŒ…" loading="lazy"/></td></tr><tr><td>å…ƒå®</td><td><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/14e3fc00f46b43818e7ff42892a301e5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA54Gw54Gw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770771616&amp;x-signature=AaenZvOolMK%2F4ncc4TKkO3uL1XY%3D" alt="å…ƒå®æ•ˆæœå›¾" loading="lazy"/></td></tr><tr><td>åƒé—®</td><td><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/603dca0305f24dab83da1d8ce80d0a30~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA54Gw54Gw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770771616&amp;x-signature=gZZ46JjDQtqyYqYnrSL9LsAd1KA%3D" alt="åƒé—®æ•ˆæœå›¾" loading="lazy"/></td></tr><tr><td>ç™¾åº¦</td><td><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1d5c66d6ba72445c854a7b748bd58deb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA54Gw54Gw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770771616&amp;x-signature=sVD%2BPj7bEw0QPXyBKI6xBmJQ6JM%3D" alt="ç™¾åº¦" loading="lazy"/></td></tr><tr><td>ChatGPT</td><td><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3245a0fa03324eed97d57e275782c46c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA54Gw54Gw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770771616&amp;x-signature=Cyo%2BVFZb0WpXa8WlbeDHtQM618A%3D" alt="ChatGPTæ•ˆæœå›¾" loading="lazy"/></td></tr></tbody></table>
<h3 data-id="heading-13">å››ã€å°ç»“</h3>
<p>æœ¬ç‰‡å†…å®¹é€šè¿‡è®¾è®¡+å®ä¾‹ç»™å¤§å®¶æ¼”ç¤ºäº†ä¸€ä¸‹Spring AIä¸­çš„å¤šè½®å¯¹è¯è‰ºæœ¯ï¼Œå¦‚ä½•è®©å¤§æ¨¡å‹ä¸»åŠ¨æé—®è·å–æ˜ç¡®éœ€æ±‚ï¼Ÿ ä¸‹é¢å‡ éƒ¨å³å¯ï¼š</p>
<ul>
<li>ä¸»åŠ¨è¯¢é—®æœºåˆ¶ï¼šä½¿ç”¨AskUserQuestionToolè®©AIåœ¨ä¿¡æ¯ä¸è¶³æ—¶ä¸»åŠ¨æé—®</li>
<li>çµæ´»çš„å“åº”å¤„ç†ï¼šé€šè¿‡è‡ªå®šä¹‰QuestionHandleré€‚é…ä¸åŒå¹³å°çš„äº¤äº’æ–¹å¼</li>
<li>å¯¹è¯çŠ¶æ€ç®¡ç†ï¼šåˆ©ç”¨MessageChatMemoryAdvisorç»´æŠ¤å¤šè½®å¯¹è¯çš„ä¸Šä¸‹æ–‡</li>
<li>å·¥å…·ç»„åˆä½¿ç”¨ï¼šå°†è¯¢é—®å·¥å…·ä¸è®°å¿†é¡¾é—®ã€æ—¥å¿—é¡¾é—®ç­‰é…åˆä½¿ç”¨ï¼Œæ„å»ºå®Œæ•´çš„äº¤äº’ä½“ç³»</li>
<li>å¼‚æ­¥å¤„ç†æ”¯æŒï¼šåœ¨Webç¯å¢ƒä¸­ä½¿ç”¨SSEå®ç°æµç•…çš„å¤šè½®å¯¹è¯ä½“éªŒ</li>
</ul>
<blockquote>
<p>é¡¹ç›®æºç ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fliuyueyi%2Fspring-ai-demo%2Ftree%2Fmaster%2Fv2%2FT02-manual-qa-cli-robot" target="_blank" title="https://github.com/liuyueyi/spring-ai-demo/tree/master/v2/T02-manual-qa-cli-robot" ref="nofollow noopener noreferrer">github.com/liuyueyi/spâ€¦</a></p>
</blockquote>
<hr/>
<p>å¯¹äºå¤§æ¨¡å‹åº”ç”¨å¼€å‘æ„Ÿå…´è¶£çš„å°ä¼™ä¼´ï¼Œæˆ–è€…å¯¹ä¸Šé¢æåˆ°çš„çŸ¥è¯†ç‚¹æœ‰ç–‘æƒ‘çš„å°ä¼™ä¼´ï¼Œä¸å¦¨çœ‹çœ‹ä»¥ä¸‹å‡ ç¯‡å†…å®¹ï¼ˆæ¯ç¯‡è€—æ—¶ä¸è¶…è¿‡äº”åˆ†é’ŸğŸ˜Šï¼‰</p>
<p>é›¶åŸºç¡€å…¥é—¨ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FqCn8x2XO2shA8MheYbHq0w" target="_blank" title="https://mp.weixin.qq.com/s/qCn8x2XO2shA8MheYbHq0w" ref="nofollow noopener noreferrer">LLM åº”ç”¨å¼€å‘æ˜¯ä»€ä¹ˆï¼šé›¶åŸºç¡€ä¹Ÿå¯ä»¥è¯»æ‡‚çš„ç§‘æ™®æ–‡(æç®€ç‰ˆ)</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2F2GXBNOUq3jlysipftz8TpA" target="_blank" title="https://mp.weixin.qq.com/s/2GXBNOUq3jlysipftz8TpA" ref="nofollow noopener noreferrer">å¤§æ¨¡å‹åº”ç”¨å¼€å‘ç³»åˆ—æ•™ç¨‹ï¼šåº-ä¸ºä»€ä¹ˆä½ â€œä¼šç”¨ LLMâ€ï¼Œä½†åšä¸å‡ºå¤æ‚åº”ç”¨ï¼Ÿ</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2Fv-z6EHY300ElOxdGPdzc0w" target="_blank" title="https://mp.weixin.qq.com/s/v-z6EHY300ElOxdGPdzc0w" ref="nofollow noopener noreferrer">å¤§æ¨¡å‹åº”ç”¨å¼€å‘ç³»åˆ—æ•™ç¨‹ï¼šç¬¬ä¸€ç« LLMåˆ°åº•åœ¨åšä»€ä¹ˆï¼Ÿ</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2Ft_BuAW9i0npcaJdua3Am2Q" target="_blank" title="https://mp.weixin.qq.com/s/t_BuAW9i0npcaJdua3Am2Q" ref="nofollow noopener noreferrer">å¤§æ¨¡å‹åº”ç”¨å¼€å‘ç³»åˆ—æ•™ç¨‹ï¼šç¬¬äºŒç«  æ¨¡å‹ä¸æ˜¯é‡ç‚¹ï¼Œå‚æ•°æ‰æ˜¯ä½ çœŸæ­£çš„æ§åˆ¶é¢æ¿</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2Fvzt0bGwcfnASOiBa0Kc7VQ" target="_blank" title="https://mp.weixin.qq.com/s/vzt0bGwcfnASOiBa0Kc7VQ" ref="nofollow noopener noreferrer">å¤§æ¨¡å‹åº”ç”¨å¼€å‘ç³»åˆ—æ•™ç¨‹ï¼šç¬¬ä¸‰ç«  ä¸ºä»€ä¹ˆæˆ‘çš„Promptè¡¨ç°å¾ˆç³Ÿï¼Ÿ</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FNk-N34TLJVCTI5F4k5rGaQ" target="_blank" title="https://mp.weixin.qq.com/s/Nk-N34TLJVCTI5F4k5rGaQ" ref="nofollow noopener noreferrer">å¤§æ¨¡å‹åº”ç”¨å¼€å‘ç³»åˆ—æ•™ç¨‹ï¼šç¬¬å››ç« Prompt çš„å·¥ç¨‹åŒ–ç»“æ„è®¾è®¡</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FZQbztqBq7_PzynG06N4-mg" target="_blank" title="https://mp.weixin.qq.com/s/ZQbztqBq7_PzynG06N4-mg" ref="nofollow noopener noreferrer">å¤§æ¨¡å‹åº”ç”¨å¼€å‘ç³»åˆ—æ•™ç¨‹ï¼šç¬¬äº”ç«  ä» Prompt åˆ° Prompt æ¨¡æ¿ä¸å·¥ç¨‹æ²»ç†</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FnnKspRO87xbrn4-LBV3RNA" target="_blank" title="https://mp.weixin.qq.com/s/nnKspRO87xbrn4-LBV3RNA" ref="nofollow noopener noreferrer">å¤§æ¨¡å‹åº”ç”¨å¼€å‘ç³»åˆ—æ•™ç¨‹ï¼šç¬¬å…­ç«  ä¸Šä¸‹æ–‡çª—å£çš„çœŸå®è¾¹ç•Œ</a></li>
</ul>
<hr/>
<p>å®æˆ˜</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2F96rHyp_gBUgmA2dhSbzNww" target="_blank" title="https://mp.weixin.qq.com/s/96rHyp_gBUgmA2dhSbzNww" ref="nofollow noopener noreferrer">å¤§æ¨¡å‹åº”ç”¨å¼€å‘å®æˆ˜ï¼šä¸¤ç™¾è¡Œå®ç°ä¸€ä¸ªè‡ªç„¶è¯­è¨€åœ°å€æå–æ™ºèƒ½ä½“</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FSnXdTB6tYqAzG7HgbnTSAQ" target="_blank" title="https://mp.weixin.qq.com/s/SnXdTB6tYqAzG7HgbnTSAQ" ref="nofollow noopener noreferrer">å¤§æ¨¡å‹åº”ç”¨å¼€å‘å®æˆ˜ï¼šåŸºäºSpringAIä¸å¤§æ¨¡å‹çš„é›¶é…ç½®å‘ç¥¨æ™ºèƒ½æå–æ¶æ„</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FNHqLJbos-_nrxNNmhg7IBQ" target="_blank" title="https://mp.weixin.qq.com/s/NHqLJbos-_nrxNNmhg7IBQ" ref="nofollow noopener noreferrer">å®æˆ˜ | é›¶åŸºç¡€æ­å»ºçŸ¥è¯†åº“é—®ç­”æœºå™¨äººï¼šåŸºäºSpringAI+RAGçš„å®Œæ•´å®ç°</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é¸¿è’™å¼€å‘å®æˆ˜ï¼šç©è½¬â€œæ™ºæ„Ÿæ¡å§¿â€â€”â€”æ–°é—»åˆ—è¡¨å·¦å³æ‰‹æ™ºèƒ½åˆ‡æ¢]]></title>    <link>https://juejin.cn/post/7602455806446993414</link>    <guid>https://juejin.cn/post/7602455806446993414</guid>    <pubDate>2026-02-04T02:00:35.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602455806446993414" data-draft-id="7602455806446977030" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é¸¿è’™å¼€å‘å®æˆ˜ï¼šç©è½¬â€œæ™ºæ„Ÿæ¡å§¿â€â€”â€”æ–°é—»åˆ—è¡¨å·¦å³æ‰‹æ™ºèƒ½åˆ‡æ¢"/> <meta itemprop="keywords" content="HarmonyOS,ArkUI,ArkTS"/> <meta itemprop="datePublished" content="2026-02-04T02:00:35.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¨å“¥çˆ±ç¼–ç¨‹"/> <meta itemprop="url" content="https://juejin.cn/user/2242659450109575"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é¸¿è’™å¼€å‘å®æˆ˜ï¼šç©è½¬â€œæ™ºæ„Ÿæ¡å§¿â€â€”â€”æ–°é—»åˆ—è¡¨å·¦å³æ‰‹æ™ºèƒ½åˆ‡æ¢
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2242659450109575/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¨å“¥çˆ±ç¼–ç¨‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T02:00:35.000Z" title="Wed Feb 04 2026 02:00:35 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯Vå“¥ã€‚</p>
<p>ä½ æœ‰æ²¡æœ‰é‡åˆ°è¿‡è¿™ç§æƒ…å†µï¼š</p>
<blockquote>
<p>å·¦æ‰‹æ‹¿ç€å¥¶èŒ¶ï¼Œå³æ‰‹åˆ·æ–°é—»ï¼Œç»“æœå¤´å›¾æ°¸è¿œåœ¨å³è¾¹ï¼Œç‚¹éƒ½ç‚¹ä¸åˆ°ï¼Ÿ</p>
</blockquote>
<p>ç°åœ¨å¥½äº†ï¼Œç³»ç»Ÿèƒ½å®æ—¶æ„ŸçŸ¥ä½ æ˜¯å·¦æ‰‹è¿˜æ˜¯å³æ‰‹æ¡æŒï¼ŒUI è‡ªåŠ¨é€‚é…ï¼è¿™æ‰æ˜¯çœŸæ­£çš„â€œæ‡‚ä½ â€ï¼</p>
<p>ä»Šå¤© V å“¥å°±ç”¨ä¸€ä¸ªæ–°é—»åˆ—è¡¨é¡µé¢ï¼Œå¸¦ä½  10 åˆ†é’Ÿæå®šæ™ºæ„Ÿæ¡å§¿çš„å®Œæ•´å¼€å‘ï¼èƒ½æ ¹æ®ä½ æ‹¿æ‰‹æœºçš„å§¿åŠ¿ï¼Œè‡ªåŠ¨æŠŠå›¾ç‰‡å’Œæ–‡å­—äº’æ¢ä½ç½®ã€‚ä»£ç å…¨åœ¨ä¸€ä¸ªé¡µé¢ï¼Œå¤åˆ¶è¿›å»å°±èƒ½è·‘ï¼Œç»å¯¹ç¡¬æ ¸ï¼</p>
<h2 data-id="heading-0">æŠ€æœ¯åŸç†ï¼šæ‰‹æœºæ€ä¹ˆçŸ¥é“é‚£æ˜¯ä½ çš„å·¦æ‰‹ï¼Ÿ</h2>
<p>å…¶å®å¾ˆç®€å•ã€‚ä½ æƒ³æƒ³ï¼Œå½“ä½ ç”¨<strong>å³æ‰‹</strong>å•æ‰‹æ¡æŒæ‰‹æœºæ—¶ï¼Œä¸ºäº†è®©å¤§æ‹‡æŒ‡å¤Ÿåˆ°å±å¹•å·¦ä¾§ï¼Œæ‰‹æœºé€šå¸¸ä¼šä¸ç”±è‡ªä¸»åœ°å‘<strong>å·¦å€¾æ–œ</strong>ä¸€ç‚¹ç‚¹ï¼ˆæˆ–è€…å‘å³å€¾æ–œï¼Œçœ‹ä¸ªäººä¹ æƒ¯ï¼Œé€šå¸¸æˆ‘ä»¬è®¾å®šä¸€ä¸ªå€¾æ–œé˜ˆå€¼ï¼‰ã€‚</p>
<p>å’±ä»¬åˆ©ç”¨é¸¿è’™çš„ <code>@ohos.sensor</code>ï¼ˆä¼ æ„Ÿå™¨èƒ½åŠ›ï¼‰ï¼Œç›‘å¬é‡åŠ›å˜åŒ–ã€‚</p>
<ul>
<li>å½“æ£€æµ‹åˆ°æ‰‹æœºå‘å·¦å€¾æ–œï¼ˆXè½´é‡åŠ›åˆ†é‡å˜åŒ–ï¼‰ï¼Œåˆ¤å®šä¸ºå·¦æ‰‹æˆ–å·¦ä¾§æ¨¡å¼ã€‚</li>
<li>å½“æ£€æµ‹åˆ°æ‰‹æœºå‘å³å€¾æ–œï¼Œåˆ¤å®šä¸ºå³æ‰‹æˆ–å³ä¾§æ¨¡å¼ã€‚</li>
</ul>
<p>è¯ä¸å¤šè¯´ï¼Œç›´æ¥ä¸Šå¹²è´§ã€‚</p>
<h2 data-id="heading-1">å®æˆ˜ä»£ç ï¼šæ™ºæ„Ÿæ¡å§¿æ–°é—»åˆ—è¡¨</h2>
<p>å…ˆçœ‹ä¸€ä¸‹ V å“¥å†™çš„æ¡ˆä¾‹æˆªå›¾ï¼š</p>
<p>å·¦æ‰‹æ¨¡å¼ï¼š
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b42835686180458ca633de69f422302a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aiB5ZOl54ix57yW56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770775235&amp;x-signature=RB6sXkH4TZrwj%2Fb4HNrZXo9ZmmY%3D" alt="" loading="lazy"/></p>
<p>å³æ‰‹æ¨¡å¼ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f0a094fd43a24a7f87fec7d5fd8d656e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aiB5ZOl54ix57yW56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770775235&amp;x-signature=GCDYvuJye6KgaQScA9xY62BDwho%3D" alt="" loading="lazy"/></p>
<p>å‡†å¤‡å¥½ä½ çš„ DevEco Studioï¼Œæ–°å»ºä¸€ä¸ª ArkTS é¡µé¢ï¼ŒæŠŠä¸‹é¢çš„ä»£ç å…¨é€‰ã€å¤åˆ¶ã€ç²˜è´´è¿›å»ã€‚</p>
<h3 data-id="heading-2">å®Œæ•´ä»£ç æ¡ˆä¾‹</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> sensor <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.sensor'</span>;
<span class="hljs-keyword">import</span> promptAction <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.promptAction'</span>;

<span class="hljs-comment">// 1. å®šä¹‰æ–°é—»æ•°æ®æ¨¡å‹</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">NewsItem</span> {
  <span class="hljs-attr">id</span>: <span class="hljs-built_in">number</span>;
  <span class="hljs-attr">title</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">summary</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">imageColor</span>: <span class="hljs-title class_">Color</span>; <span class="hljs-comment">// ç”¨é¢œè‰²å—ä»£æ›¿å›¾ç‰‡ï¼Œæ–¹ä¾¿æµ‹è¯•ï¼Œä¸ç”¨æ‰¾èµ„æº</span>

  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">id: <span class="hljs-built_in">number</span>, title: <span class="hljs-built_in">string</span>, summary: <span class="hljs-built_in">string</span>, color: Color</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">id</span> = id;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">title</span> = title;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">summary</span> = summary;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">imageColor</span> = color;
  }
}

<span class="hljs-meta">@Entry</span>
<span class="hljs-meta">@Component</span>
struct <span class="hljs-title class_">SmartGripNewsPage</span> {
  <span class="hljs-comment">// 2. çŠ¶æ€å˜é‡</span>
  <span class="hljs-comment">// isRightMode: true ä»£è¡¨å³æ‰‹æ¨¡å¼ï¼ˆå›¾åœ¨å³ï¼‰ï¼Œfalse ä»£è¡¨å·¦æ‰‹æ¨¡å¼ï¼ˆå›¾åœ¨å·¦ï¼‰</span>
  <span class="hljs-meta">@State</span> <span class="hljs-attr">isRightMode</span>: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">true</span>;
  <span class="hljs-comment">// è®°å½•å½“å‰çš„å€¾æ–œè§’åº¦Xå€¼ï¼Œç”¨äºæ˜¾ç¤ºè°ƒè¯•ä¿¡æ¯</span>
  <span class="hljs-meta">@State</span> <span class="hljs-attr">currentGravityX</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;

  <span class="hljs-comment">// æ¨¡æ‹Ÿæ–°é—»æ•°æ®</span>
  <span class="hljs-meta">@State</span> <span class="hljs-attr">newsList</span>: <span class="hljs-title class_">NewsItem</span>[] = [
    <span class="hljs-keyword">new</span> <span class="hljs-title class_">NewsItem</span>(<span class="hljs-number">1</span>, <span class="hljs-string">"é¸¿è’™Nextæ­£å¼å‘å¸ƒ"</span>, <span class="hljs-string">"çº¯è¡€é¸¿è’™ä¸å†å…¼å®¹å®‰å“ï¼Œå¼€å¯ç§»åŠ¨æ“ä½œç³»ç»Ÿæ–°çºªå…ƒã€‚"</span>, <span class="hljs-title class_">Color</span>.<span class="hljs-property">Blue</span>),
    <span class="hljs-keyword">new</span> <span class="hljs-title class_">NewsItem</span>(<span class="hljs-number">2</span>, <span class="hljs-string">"Vå“¥èŠæŠ€æœ¯"</span>, <span class="hljs-string">"æ·±åº¦è§£æArkTSè¯­è¨€ç‰¹æ€§ï¼Œå¸¦ä½ å¼¯é“è¶…è½¦ã€‚"</span>, <span class="hljs-title class_">Color</span>.<span class="hljs-property">Red</span>),
    <span class="hljs-keyword">new</span> <span class="hljs-title class_">NewsItem</span>(<span class="hljs-number">3</span>, <span class="hljs-string">"2026è¡Œä¸šå±•æœ›"</span>, <span class="hljs-string">"AIèµ›é“çˆ†å‘ï¼Œæ™®é€šç¨‹åºå‘˜å¦‚ä½•æŠ“ä½æœ€åçš„æœºä¼šï¼Ÿ"</span>, <span class="hljs-title class_">Color</span>.<span class="hljs-property">Green</span>),
    <span class="hljs-keyword">new</span> <span class="hljs-title class_">NewsItem</span>(<span class="hljs-number">4</span>, <span class="hljs-string">"SpaceXæ˜Ÿèˆ°å‘å°„"</span>, <span class="hljs-string">"é©¬æ–¯å…‹ç«æ˜Ÿæ®–æ°‘è®¡åˆ’åˆè¿‘äº†ä¸€æ­¥ï¼Œéœ‡æ’¼å…¨äººç±»ã€‚"</span>, <span class="hljs-title class_">Color</span>.<span class="hljs-property">Orange</span>),
    <span class="hljs-keyword">new</span> <span class="hljs-title class_">NewsItem</span>(<span class="hljs-number">5</span>, <span class="hljs-string">"å‘¨æœ«å»å“ªå„¿ç©"</span>, <span class="hljs-string">"å‘ç°åŸå¸‚å‘¨è¾¹çš„å°ä¼—éœ²è¥åœ°ï¼Œæ”¾æ¾èº«å¿ƒå¥½å»å¤„ã€‚"</span>, <span class="hljs-title class_">Color</span>.<span class="hljs-property">Pink</span>),
  ];

  <span class="hljs-comment">// 3. é¡µé¢åŠ è½½æ—¶å¼€å¯ä¼ æ„Ÿå™¨ç›‘å¬</span>
  <span class="hljs-title function_">aboutToAppear</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">startSensor</span>();
  }

  <span class="hljs-comment">// 4. é¡µé¢é”€æ¯æ—¶å…³é—­ä¼ æ„Ÿå™¨ï¼Œçœç”µ</span>
  <span class="hljs-title function_">aboutToDisappear</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">stopSensor</span>();
  }

  <span class="hljs-comment">// å¼€å¯ä¼ æ„Ÿå™¨é€»è¾‘</span>
  <span class="hljs-title function_">startSensor</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-comment">// ç›‘å¬é‡åŠ›ä¼ æ„Ÿå™¨ï¼Œé¢‘ç‡è®¾ç½®ä¸º UI (é€‚åˆUIäº¤äº’çš„é¢‘ç‡)</span>
      sensor.<span class="hljs-title function_">on</span>(sensor.<span class="hljs-property">SensorId</span>.<span class="hljs-property">GRAVITY</span>, <span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {
        <span class="hljs-comment">// data.x ä»£è¡¨ x è½´çš„é‡åŠ›åˆ†é‡</span>
        <span class="hljs-comment">// å½“æ‰‹æœºç«–å±é¢å¯¹ä½ ï¼š</span>
        <span class="hljs-comment">// æ‰‹æœºå‘å³å€¾æ–œï¼Œx &gt; 0</span>
        <span class="hljs-comment">// æ‰‹æœºå‘å·¦å€¾æ–œï¼Œx &lt; 0</span>
        
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">currentGravityX</span> = data.<span class="hljs-property">x</span>;

        <span class="hljs-comment">// è®¾ç½®ä¸€ä¸ªé˜ˆå€¼ï¼Œé˜²æ­¢è½»å¾®æŠ–åŠ¨å°±åˆ‡æ¢</span>
        <span class="hljs-comment">// è¿™é‡Œè®¾ç½® 1.5 ä¸ºé˜ˆå€¼ï¼Œä½ å¯ä»¥æ ¹æ®æ‰‹æ„Ÿè°ƒæ•´</span>
        <span class="hljs-keyword">if</span> (data.<span class="hljs-property">x</span> &gt; <span class="hljs-number">1.5</span>) {
          <span class="hljs-comment">// å‘å³å€¾æ–œï¼Œè®¤ä¸ºæ˜¯å³æ‰‹æ¡æŒæˆ–è€…æƒ³çœ‹å³è¾¹</span>
          <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">isRightMode</span> === <span class="hljs-literal">false</span>) {
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">isRightMode</span> = <span class="hljs-literal">true</span>;
            <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">showToast</span>(<span class="hljs-string">"æ™ºæ„Ÿåˆ‡æ¢ï¼šå³æ‰‹æ¨¡å¼"</span>);
          }
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (data.<span class="hljs-property">x</span> &lt; -<span class="hljs-number">1.5</span>) {
          <span class="hljs-comment">// å‘å·¦å€¾æ–œï¼Œè®¤ä¸ºæ˜¯å·¦æ‰‹æ¡æŒ</span>
          <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">isRightMode</span> === <span class="hljs-literal">true</span>) {
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">isRightMode</span> = <span class="hljs-literal">false</span>;
            <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">showToast</span>(<span class="hljs-string">"æ™ºæ„Ÿåˆ‡æ¢ï¼šå·¦æ‰‹æ¨¡å¼"</span>);
          }
        }
      }, { <span class="hljs-attr">interval</span>: <span class="hljs-number">100000000</span> }); <span class="hljs-comment">// 100ms ä¸€æ¬¡å›è°ƒ</span>
    } <span class="hljs-keyword">catch</span> (err) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"Vå“¥æç¤ºï¼šä¼ æ„Ÿå™¨å¯åŠ¨å¤±è´¥ï¼Œå¯èƒ½æ˜¯æ¨¡æ‹Ÿå™¨ä¸æ”¯æŒ"</span>, err);
    }
  }

  <span class="hljs-comment">// å…³é—­ä¼ æ„Ÿå™¨</span>
  <span class="hljs-title function_">stopSensor</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">try</span> {
      sensor.<span class="hljs-title function_">off</span>(sensor.<span class="hljs-property">SensorId</span>.<span class="hljs-property">GRAVITY</span>);
    } <span class="hljs-keyword">catch</span> (err) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"Vå“¥æç¤ºï¼šä¼ æ„Ÿå™¨å…³é—­å¤±è´¥"</span>, err);
    }
  }

  <span class="hljs-comment">// å°æç¤ºå¼¹çª—</span>
  <span class="hljs-title function_">showToast</span>(<span class="hljs-params">msg: <span class="hljs-built_in">string</span></span>) {
    promptAction.<span class="hljs-title function_">showToast</span>({
      <span class="hljs-attr">message</span>: msg,
      <span class="hljs-attr">duration</span>: <span class="hljs-number">1500</span>,
      <span class="hljs-attr">bottom</span>: <span class="hljs-number">100</span>
    });
  }

  <span class="hljs-title function_">build</span>(<span class="hljs-params"/>) {
    <span class="hljs-title class_">Column</span>() {
      <span class="hljs-comment">// é¡¶éƒ¨æ ‡é¢˜æ </span>
      <span class="hljs-title class_">Row</span>() {
        <span class="hljs-title class_">Text</span>(<span class="hljs-string">"æ™ºæ„Ÿæ–°é—»"</span>)
          .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">24</span>)
          .<span class="hljs-title function_">fontWeight</span>(<span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Bold</span>)
        <span class="hljs-title class_">Blank</span>()
        <span class="hljs-comment">// æ˜¾ç¤ºå½“å‰æ¨¡å¼çŠ¶æ€</span>
        <span class="hljs-title class_">Text</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">isRightMode</span> ? <span class="hljs-string">"å½“å‰ï¼šå³æ‰‹æ¨¡å¼"</span> : <span class="hljs-string">"å½“å‰ï¼šå·¦æ‰‹æ¨¡å¼"</span>)
          .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">14</span>)
          .<span class="hljs-title function_">fontColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">Gray</span>)
      }
      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)
      .<span class="hljs-title function_">padding</span>(<span class="hljs-number">20</span>)
      .<span class="hljs-title function_">height</span>(<span class="hljs-number">60</span>)
      .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#F1F3F5'</span>)

      <span class="hljs-comment">// è°ƒè¯•ä¿¡æ¯ï¼ˆæ­£å¼ä¸Šçº¿å¯ä»¥å»æ‰ï¼‰</span>
      <span class="hljs-title class_">Text</span>(<span class="hljs-string">`é‡åŠ›Xè½´æ„Ÿåº”å€¼: <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.currentGravityX.toFixed(<span class="hljs-number">2</span>)}</span>`</span>)
        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">12</span>)
        .<span class="hljs-title function_">fontColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">Gray</span>)
        .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">bottom</span>: <span class="hljs-number">10</span> })

      <span class="hljs-comment">// æ–°é—»åˆ—è¡¨</span>
      <span class="hljs-title class_">List</span>({ <span class="hljs-attr">space</span>: <span class="hljs-number">15</span> }) {
        <span class="hljs-title class_">ForEach</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">newsList</span>, <span class="hljs-function">(<span class="hljs-params">item: NewsItem</span>) =&gt;</span> {
          <span class="hljs-title class_">ListItem</span>() {
            <span class="hljs-comment">// æ ¸å¿ƒå¸ƒå±€ï¼šæ ¹æ® isRightMode å†³å®šå¸ƒå±€æ–¹å‘</span>
            <span class="hljs-comment">// Direction.Ltr (Left to Right) æˆ–è€…æ˜¯ Rtl</span>
            <span class="hljs-comment">// è¿™é‡Œæˆ‘ä»¬ç”¨ Flex æˆ–è€… Row æ‰‹åŠ¨æ§åˆ¶é¡ºåºæ›´ç¨³</span>
            <span class="hljs-variable language_">this</span>.<span class="hljs-title class_">NewsItemBuilder</span>(item)
          }
        })
      }
      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)
      .<span class="hljs-title function_">layoutWeight</span>(<span class="hljs-number">1</span>) <span class="hljs-comment">// å æ»¡å‰©ä½™ç©ºé—´</span>
      .<span class="hljs-title function_">padding</span>({ <span class="hljs-attr">left</span>: <span class="hljs-number">15</span>, <span class="hljs-attr">right</span>: <span class="hljs-number">15</span> })
    }
    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)
    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)
  }

  <span class="hljs-comment">// è‡ªå®šä¹‰æ„å»ºå‡½æ•°ï¼Œå¤„ç†å•ä¸ªæ–°é—»çš„å¸ƒå±€</span>
  <span class="hljs-meta">@Builder</span>
  <span class="hljs-title class_">NewsItemBuilder</span>(<span class="hljs-attr">item</span>: <span class="hljs-title class_">NewsItem</span>) {
    <span class="hljs-title class_">Row</span>() {
      <span class="hljs-comment">// è¿™é‡Œçš„é€»è¾‘ï¼š</span>
      <span class="hljs-comment">// å¦‚æœæ˜¯å·¦æ‰‹æ¨¡å¼(isRightMode=false)ï¼Œå›¾ç‰‡åœ¨å·¦ï¼Œæ–‡å­—åœ¨å³</span>
      <span class="hljs-comment">// å¦‚æœæ˜¯å³æ‰‹æ¨¡å¼(isRightMode=true)ï¼Œæ–‡å­—åœ¨å·¦ï¼Œå›¾ç‰‡åœ¨å³</span>
      <span class="hljs-comment">// åˆ©ç”¨ Row çš„ direction å±æ€§æˆ–è€…ç®€å•çš„ if/else æ¸²æŸ“é¡ºåº</span>

      <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">isRightMode</span>) {
        <span class="hljs-comment">// å·¦æ‰‹æ¨¡å¼ï¼šå›¾ -&gt; æ–‡</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-title class_">ImageBlock</span>(item.<span class="hljs-property">imageColor</span>)
        <span class="hljs-variable language_">this</span>.<span class="hljs-title class_">TextBlock</span>(item)
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-comment">// å³æ‰‹æ¨¡å¼ï¼šæ–‡ -&gt; å›¾</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-title class_">TextBlock</span>(item)
        <span class="hljs-variable language_">this</span>.<span class="hljs-title class_">ImageBlock</span>(item.<span class="hljs-property">imageColor</span>)
      }
    }
    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)
    .<span class="hljs-title function_">height</span>(<span class="hljs-number">100</span>)
    .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">White</span>)
    .<span class="hljs-title function_">borderRadius</span>(<span class="hljs-number">10</span>)
    .<span class="hljs-title function_">shadow</span>({ <span class="hljs-attr">radius</span>: <span class="hljs-number">5</span>, <span class="hljs-attr">color</span>: <span class="hljs-number">0x1F000000</span>, <span class="hljs-attr">offsetY</span>: <span class="hljs-number">2</span> })
    .<span class="hljs-title function_">padding</span>(<span class="hljs-number">10</span>)
    <span class="hljs-comment">// æ·»åŠ ä¸€ä¸ªé¡ºæ»‘çš„åŠ¨ç”»æ•ˆæœ</span>
    .<span class="hljs-title function_">animation</span>({
      <span class="hljs-attr">duration</span>: <span class="hljs-number">300</span>,
      <span class="hljs-attr">curve</span>: <span class="hljs-title class_">Curve</span>.<span class="hljs-property">EaseInOut</span>
    })
  }

  <span class="hljs-comment">// æŠ½å–å›¾ç‰‡ç»„ä»¶</span>
  <span class="hljs-meta">@Builder</span>
  <span class="hljs-title class_">ImageBlock</span>(<span class="hljs-attr">color</span>: <span class="hljs-title class_">Color</span>) {
    <span class="hljs-comment">// æ¨¡æ‹Ÿå›¾ç‰‡</span>
    <span class="hljs-title class_">Stack</span>() {
      <span class="hljs-title class_">Text</span>(<span class="hljs-string">"å¤´å›¾"</span>)
        .<span class="hljs-title function_">fontColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">White</span>)
        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">12</span>)
    }
    .<span class="hljs-title function_">width</span>(<span class="hljs-number">100</span>)
    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)
    .<span class="hljs-title function_">backgroundColor</span>(color)
    .<span class="hljs-title function_">borderRadius</span>(<span class="hljs-number">8</span>)
    .<span class="hljs-title function_">margin</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">isRightMode</span> ? { <span class="hljs-attr">left</span>: <span class="hljs-number">10</span> } : { <span class="hljs-attr">right</span>: <span class="hljs-number">10</span> }) <span class="hljs-comment">// æ ¹æ®ä½ç½®ç»™é—´è·</span>
  }

  <span class="hljs-comment">// æŠ½å–æ–‡å­—ç»„ä»¶</span>
  <span class="hljs-meta">@Builder</span>
  <span class="hljs-title class_">TextBlock</span>(<span class="hljs-attr">item</span>: <span class="hljs-title class_">NewsItem</span>) {
    <span class="hljs-title class_">Column</span>() {
      <span class="hljs-title class_">Text</span>(item.<span class="hljs-property">title</span>)
        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">16</span>)
        .<span class="hljs-title function_">fontWeight</span>(<span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Bold</span>)
        .<span class="hljs-title function_">maxLines</span>(<span class="hljs-number">1</span>)
        .<span class="hljs-title function_">textOverflow</span>({ <span class="hljs-attr">overflow</span>: <span class="hljs-title class_">TextOverflow</span>.<span class="hljs-property">Ellipsis</span> })
        .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)
      
      <span class="hljs-title class_">Text</span>(item.<span class="hljs-property">summary</span>)
        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">14</span>)
        .<span class="hljs-title function_">fontColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">Gray</span>)
        .<span class="hljs-title function_">maxLines</span>(<span class="hljs-number">2</span>)
        .<span class="hljs-title function_">textOverflow</span>({ <span class="hljs-attr">overflow</span>: <span class="hljs-title class_">TextOverflow</span>.<span class="hljs-property">Ellipsis</span> })
        .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">top</span>: <span class="hljs-number">5</span> })
        .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)
    }
    .<span class="hljs-title function_">layoutWeight</span>(<span class="hljs-number">1</span>) <span class="hljs-comment">// å æ»¡å‰©ä½™å®½åº¦</span>
    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)
    .<span class="hljs-title function_">justifyContent</span>(<span class="hljs-title class_">FlexAlign</span>.<span class="hljs-property">Start</span>)
    .<span class="hljs-title function_">alignItems</span>(<span class="hljs-title class_">HorizontalAlign</span>.<span class="hljs-property">Start</span>)
  }
}
</code></pre>
<h3 data-id="heading-3">ä»£ç æ·±åº¦è§£æï¼ˆVå“¥æ°ç¢äº†è®²ï¼‰</h3>
<p>å…„å¼Ÿä»¬ï¼Œä»£ç è´´å®Œäº†ï¼ŒVå“¥ç»™ä½ æ‹ä¸€æ‹è¿™é‡Œçš„æ ¸å¿ƒé—¨é“ï¼Œé¢è¯•æˆ–è€…åšé¡¹ç›®çš„æ—¶å€™éƒ½èƒ½å¹ä¸€æ³¢ã€‚</p>
<p><strong>1. ä¼ æ„Ÿå™¨ç›‘å¬ (<code>sensor.on</code>)</strong>
è¿™æ˜¯æ•´ä¸ªåŠŸèƒ½çš„çµé­‚ã€‚æˆ‘ä»¬ç”¨äº† <code>sensor.SensorId.GRAVITY</code>ã€‚</p>
<ul>
<li><code>data.x</code> æ˜¯å…³é”®ã€‚å½“ä½ æ‹¿ç€æ‰‹æœºå¾€å·¦æ­ªï¼ˆåƒæ˜¯å·¦æ‰‹æ‹¿ç€æ‰‹æœºæƒ³çœ‹å·¦è¾¹å±å¹•ï¼‰æ—¶ï¼ŒXè½´ä¼šå˜è´Ÿæ•°ï¼›å¾€å³æ­ªæ—¶ï¼ŒXè½´å˜æ­£æ•°ã€‚</li>
<li>è¿™é‡Œæˆ‘åŠ äº†ä¸ª<strong>é˜ˆå€¼ 1.5</strong>ã€‚ä¸ºå•¥ï¼Ÿå¦‚æœä¸åŠ é˜ˆå€¼ï¼Œä½ çš„æ‰‹ç¨å¾®æŠ–ä¸€ä¸‹ï¼Œç•Œé¢å°±å·¦å³ä¹±è·³ï¼Œç”¨æˆ·å¾—æ°”æ­»ã€‚1.5 æ˜¯ä¸ªç»éªŒå€¼ï¼Œå¤§çº¦å€¾æ–œ 15-20 åº¦å·¦å³è§¦å‘ï¼Œæ—¢çµæ•åˆä¸ä¼šè¯¯è§¦ã€‚</li>
</ul>
<p><strong>2. çŠ¶æ€é©±åŠ¨ UI (<code>@State isRightMode</code>)</strong>
é¸¿è’™ ArkUI çš„ç²¾é«“å°±æ˜¯<strong>çŠ¶æ€é©±åŠ¨</strong>ã€‚</p>
<ul>
<li>æˆ‘ä»¬ä¸éœ€è¦å»æ‰‹åŠ¨æ¬è¿ç»„ä»¶ã€‚åªè¦æ”¹å˜ <code>isRightMode</code> è¿™ä¸ªå¸ƒå°”å€¼ï¼ŒUI å°±ä¼šè‡ªåŠ¨åˆ·æ–°ã€‚</li>
<li>é…åˆ <code>.animation</code> å±æ€§ï¼Œå½“ç»„ä»¶ä½ç½®äº’æ¢æ—¶ï¼Œä¸ä¼šç”Ÿç¡¬åœ°â€œé—ªç°â€ï¼Œè€Œæ˜¯ä¼šæœ‰ä¸€ä¸ªæ»‘åŠ¨çš„è¿‡æ¸¡æ•ˆæœï¼Œé«˜çº§æ„Ÿç«‹é©¬å°±æ¥äº†ã€‚</li>
</ul>
<p><strong>3. æ¡ä»¶æ¸²æŸ“ (<code>if/else</code>)</strong>
åœ¨ <code>NewsItemBuilder</code> é‡Œï¼ŒVå“¥ç”¨äº†ä¸€ä¸ªæœ€ç¬¨ä½†æœ€æœ‰æ•ˆçš„æ–¹æ³•ï¼š</p>
<ul>
<li>å¦‚æœæ˜¯å·¦æ‰‹æ¨¡å¼ï¼šå…ˆæ¸²æŸ“å›¾ç‰‡ç»„ä»¶ï¼Œå†æ¸²æŸ“æ–‡å­—ç»„ä»¶ã€‚</li>
<li>å¦‚æœæ˜¯å³æ‰‹æ¨¡å¼ï¼šå…ˆæ¸²æŸ“æ–‡å­—ç»„ä»¶ï¼Œå†æ¸²æŸ“å›¾ç‰‡ç»„ä»¶ã€‚</li>
<li>å› ä¸ºæ˜¯åœ¨ <code>Row</code> å®¹å™¨é‡Œï¼Œæ¸²æŸ“é¡ºåºç›´æ¥å†³å®šäº†è°åœ¨å·¦è°åœ¨å³ã€‚</li>
</ul>
<h3 data-id="heading-4">æ€ä¹ˆæµ‹è¯•ï¼Ÿ</h3>
<ol>
<li><strong>çœŸæœºæµ‹è¯•ï¼ˆæ¨èï¼‰</strong>ï¼šæŠŠä»£ç çƒ§å½•åˆ°é¸¿è’™æ‰‹æœºä¸Šã€‚æ‹¿ç€æ‰‹æœºå‘å·¦å€¾æ–œä¸€ä¸‹ï¼Œä½ ä¼šå‘ç°å›¾ç‰‡â€œåˆ·â€ä¸€ä¸‹è·‘åˆ°å·¦è¾¹äº†ï¼›å‘å³å€¾æ–œä¸€ä¸‹ï¼Œå›¾ç‰‡åˆè·‘å›å³è¾¹äº†ã€‚</li>
<li><strong>æ¨¡æ‹Ÿå™¨æµ‹è¯•</strong>ï¼šDevEco Studio çš„æ¨¡æ‹Ÿå™¨é€šå¸¸æœ‰ä¸ªâ€œè™šæ‹Ÿä¼ æ„Ÿå™¨â€é¢æ¿ã€‚ä½ å¯ä»¥æ‰‹åŠ¨æ‹–åŠ¨é‡åŠ›ä¼ æ„Ÿå™¨çš„ X è½´æ»‘å—ï¼Œæ¨¡æ‹Ÿæ‰‹æœºå€¾æ–œï¼Œçœ‹ç•Œé¢ä¼šä¸ä¼šå˜ã€‚</li>
</ol>
<h3 data-id="heading-5">Vå“¥çš„æœ€åå” å¨</h3>
<p>å…„å¼Ÿä»¬ï¼Œè¿™ä¸ªåŠŸèƒ½è™½ç„¶ä»£ç ä¸å¤šï¼Œä½†ä½“ç°çš„æ˜¯<strong>ä»¥äººä¸ºæœ¬</strong>çš„è®¾è®¡æ€ç»´ã€‚</p>
<p>è¿™å°±æ˜¯é¸¿è’™ Next å¼€å‘å¥½ç©çš„åœ°æ–¹ï¼Œç¡¬ä»¶èƒ½åŠ›è°ƒç”¨æå…¶ç®€å•ã€‚2026å¹´ï¼Œä¸ç®¡æ˜¯åšåº”ç”¨è¿˜æ˜¯åšç³»ç»Ÿï¼Œ<strong>äº¤äº’ä½“éªŒ</strong>æ°¸è¿œæ˜¯æ ¸å¿ƒç«äº‰åŠ›ã€‚</p>
<p>èµ¶ç´§æŠŠè¿™ä»£ç è·‘èµ·æ¥ï¼Œä»¥åè€æ¿è®©ä½ åšâ€œé€‚è€åŒ–â€æˆ–è€…â€œå•æ‰‹æ¨¡å¼â€ï¼Œä½ æŠŠè¿™ä¸ª Demo ä¸€äº®ï¼Œç»å¯¹æƒŠè‰³å…¨åœºï¼ç¥å¤§å®¶å‘ç æ„‰å¿«ï¼Œæ²¡æœ‰ Bugï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[JS-æ‰‹å†™ç³»åˆ—ï¼šä»é›¶æ‰‹å†™ Promise]]></title>    <link>https://juejin.cn/post/7602565408533004338</link>    <guid>https://juejin.cn/post/7602565408533004338</guid>    <pubDate>2026-02-04T07:17:19.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602565408533004338" data-draft-id="7602565408532922418" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="JS-æ‰‹å†™ç³»åˆ—ï¼šä»é›¶æ‰‹å†™ Promise"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,é¢è¯•"/> <meta itemprop="datePublished" content="2026-02-04T07:17:19.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‘ç°ä¸€åªå¤§å‘†ç“œ"/> <meta itemprop="url" content="https://juejin.cn/user/180747382561607"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            JS-æ‰‹å†™ç³»åˆ—ï¼šä»é›¶æ‰‹å†™ Promise
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/180747382561607/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‘ç°ä¸€åªå¤§å‘†ç“œ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T07:17:19.000Z" title="Wed Feb 04 2026 07:17:19 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">å‰è¨€</h3>
<p><code>Promise</code> æ˜¯ JavaScript å¤„ç†å¼‚æ­¥ç¼–ç¨‹çš„åŸºçŸ³ã€‚è™½ç„¶æˆ‘ä»¬åœ¨æ—¥å¸¸å¼€å‘ä¸­é¢‘ç¹ä½¿ç”¨ <code>async/await</code>ï¼Œä½†æ‰‹åŠ¨å®ç°ä¸€ä¸ªç¬¦åˆ Promiseè§„èŒƒçš„ç±»ï¼Œä¸ä»…èƒ½è®©ä½ åœ¨é¢è¯•ä¸­è„±é¢–è€Œå‡ºï¼Œæ›´èƒ½è®©ä½ æ·±åˆ»ç†è§£å¾®ä»»åŠ¡ä¸é“¾å¼è°ƒç”¨çš„æœ¬è´¨ã€‚</p>
<hr/>
<h2 data-id="heading-1">ä¸€ã€ Promise æ ¸å¿ƒè®¾è®¡æ–¹æ¡ˆ</h2>
<p>å®ç°ä¸€ä¸ªæ ‡å‡†çš„ Promiseï¼Œå¿…é¡»ç´§æ‰£ä»¥ä¸‹å››ä¸ªæ ¸å¿ƒç‚¹ï¼š</p>
<ol>
<li><strong>çŠ¶æ€æœºæœºåˆ¶</strong>ï¼šå­˜åœ¨ <code>PENDING</code>ï¼ˆç­‰å¾…ï¼‰ã€<code>FULFILLED</code>ï¼ˆæˆåŠŸï¼‰ã€<code>REJECTED</code>ï¼ˆå¤±è´¥ï¼‰ä¸‰ç§çŠ¶æ€ï¼ŒçŠ¶æ€è½¬æ¢ä¸å¯é€†ã€‚</li>
<li><strong>ç«‹å³æ‰§è¡Œ</strong>ï¼šæ„é€ å‡½æ•°ä¸­çš„æ‰§è¡Œå™¨ <code>executor(resolve, reject)</code> æ˜¯åŒæ­¥ç«‹å³æ‰§è¡Œçš„ã€‚</li>
<li><strong>å¾®ä»»åŠ¡é˜Ÿåˆ—</strong>ï¼šå›è°ƒå‡½æ•°çš„æ‰§è¡Œå¿…é¡»æ˜¯å¼‚æ­¥çš„ï¼Œé€šå¸¸ä½¿ç”¨ <code>queueMicrotask</code> æ¥å®ç°ã€‚</li>
<li><strong>é“¾å¼è°ƒç”¨</strong>ï¼š<code>then</code> æ–¹æ³•å¿…é¡»è¿”å›ä¸€ä¸ªæ–°çš„ Promiseï¼Œå¹¶å°†å‰ä¸€ä¸ª Promise çš„è¾“å‡ºä½œä¸ºåä¸€ä¸ª Promise çš„è¾“å…¥ã€‚</li>
</ol>
<h2 data-id="heading-2">äºŒã€ ä»£ç å®ç°</h2>
<pre><code class="hljs language-JavaScript" lang="JavaScript">      <span class="hljs-comment">// å®šä¹‰Promiseçš„ä¸‰ç§çŠ¶æ€</span>
      <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">PENDING</span> = <span class="hljs-string">'pending'</span>;
      <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">FULFILLED</span> = <span class="hljs-string">'fulfilled'</span>;
      <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">REJECTED</span> = <span class="hljs-string">'rejected'</span>;

      <span class="hljs-comment">/**
       * è‡ªå®šä¹‰Promiseå®ç°
       * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Function</span>} executor æ‰§è¡Œå™¨å‡½æ•°ï¼Œæ¥æ”¶resolveå’Œrejectå‚æ•°
       */</span>
      <span class="hljs-keyword">function</span> <span class="hljs-title function_">MyPromise</span>(<span class="hljs-params">executor</span>) {
        <span class="hljs-keyword">const</span> self = <span class="hljs-variable language_">this</span>; <span class="hljs-comment">// ä¿å­˜thisæŒ‡å‘ï¼Œé¿å…å›è°ƒä¸­ä¸¢å¤±</span>
        self.<span class="hljs-property">status</span> = <span class="hljs-variable constant_">PENDING</span>; <span class="hljs-comment">// åˆå§‹çŠ¶æ€ä¸ºpending</span>
        self.<span class="hljs-property">value</span> = <span class="hljs-literal">undefined</span>; <span class="hljs-comment">// æˆåŠŸçš„ç»“æœå€¼</span>
        self.<span class="hljs-property">reason</span> = <span class="hljs-literal">undefined</span>; <span class="hljs-comment">// å¤±è´¥çš„åŸå› </span>
        self.<span class="hljs-property">onFulfilledCallbacks</span> = []; <span class="hljs-comment">// å­˜å‚¨æˆåŠŸå›è°ƒ</span>
        self.<span class="hljs-property">onRejectedCallbacks</span> = []; <span class="hljs-comment">// å­˜å‚¨å¤±è´¥å›è°ƒ</span>

        <span class="hljs-comment">// æˆåŠŸå›è°ƒå‡½æ•°</span>
        <span class="hljs-keyword">function</span> <span class="hljs-title function_">resolve</span>(<span class="hljs-params">value</span>) {
          <span class="hljs-comment">// åªæœ‰pendingçŠ¶æ€æ‰èƒ½æ”¹å˜</span>
          <span class="hljs-keyword">if</span> (self.<span class="hljs-property">status</span> === <span class="hljs-variable constant_">PENDING</span>) {
            self.<span class="hljs-property">status</span> = <span class="hljs-variable constant_">FULFILLED</span>;
            self.<span class="hljs-property">value</span> = value;
            <span class="hljs-comment">// å¼‚æ­¥æ‰§è¡Œæ‰€æœ‰æˆåŠŸå›è°ƒï¼Œå› ä¸ºthenæ–¹æ³•æ˜¯å¼‚æ­¥çš„ï¼Œæ‰€ä»¥è¦ç­‰executoræ‰§è¡Œå®Œå†æ‰§è¡Œ</span>
            <span class="hljs-title function_">queueMicrotask</span>(<span class="hljs-function">() =&gt;</span> {
              self.<span class="hljs-property">onFulfilledCallbacks</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">callback</span>) =&gt;</span> {
                <span class="hljs-title function_">callback</span>(self.<span class="hljs-property">value</span>);
              });
            });
          }
        }

        <span class="hljs-comment">// å¤±è´¥å›è°ƒå‡½æ•°</span>
        <span class="hljs-keyword">function</span> <span class="hljs-title function_">reject</span>(<span class="hljs-params">reason</span>) {
          <span class="hljs-comment">// åªæœ‰pendingçŠ¶æ€æ‰èƒ½æ”¹å˜</span>
          <span class="hljs-keyword">if</span> (self.<span class="hljs-property">status</span> === <span class="hljs-variable constant_">PENDING</span>) {
            self.<span class="hljs-property">status</span> = <span class="hljs-variable constant_">REJECTED</span>;
            self.<span class="hljs-property">reason</span> = reason;
            <span class="hljs-comment">// å¼‚æ­¥æ‰§è¡Œæ‰€æœ‰å¤±è´¥å›è°ƒ</span>
            <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
              self.<span class="hljs-property">onRejectedCallbacks</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">callback</span>) =&gt;</span> {
                <span class="hljs-title function_">callback</span>(self.<span class="hljs-property">reason</span>);
              });
            });
          }
        }

        <span class="hljs-keyword">try</span> {
          <span class="hljs-comment">// ç«‹å³æ‰§è¡Œæ‰§è¡Œå™¨å‡½æ•°</span>
          <span class="hljs-title function_">executor</span>(resolve, reject);
        } <span class="hljs-keyword">catch</span> (error) {
          <span class="hljs-comment">// æ‰§è¡Œå™¨æŠ›å‡ºå¼‚å¸¸æ—¶ï¼Œç›´æ¥è°ƒç”¨reject</span>
          <span class="hljs-title function_">reject</span>(error);
        }
      }

      <span class="hljs-comment">/** thenæ–¹æ³•å®ç°
       * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Function</span>} onFulfilled æˆåŠŸå›è°ƒ
       * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Function</span>} onRejected å¤±è´¥å›è°ƒ
       * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">MyPromise</span>} è¿”å›æ–°çš„Promiseå®ç°é“¾å¼è°ƒç”¨
       */</span>
      <span class="hljs-title class_">MyPromise</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">then</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">onFulfilled, onRejected</span>) {
        <span class="hljs-keyword">const</span> self = <span class="hljs-variable language_">this</span>;
        <span class="hljs-comment">// å¤„ç†é»˜è®¤å›è°ƒï¼ˆå…¼å®¹ä¸ä¼ å›è°ƒçš„æƒ…å†µï¼‰</span>
        onFulfilled =
          <span class="hljs-keyword">typeof</span> onFulfilled === <span class="hljs-string">'function'</span> ? onFulfilled : <span class="hljs-function">(<span class="hljs-params">value</span>) =&gt;</span> value;
        onRejected =
          <span class="hljs-keyword">typeof</span> onRejected === <span class="hljs-string">'function'</span>
            ? onRejected
            : <span class="hljs-function">(<span class="hljs-params">reason</span>) =&gt;</span> {
                <span class="hljs-keyword">throw</span> reason;
              };

        <span class="hljs-comment">// è¿”å›æ–°çš„Promiseå®ç°é“¾å¼è°ƒç”¨ï¼Œå› ä¸ºåç»­å‡½æ•°ä¹Ÿå¯ä»¥é€šè¿‡thenæ–¹æ³•æ¥å¤„ç†</span>
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyPromise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
          <span class="hljs-comment">// å¤„ç†æˆåŠŸçŠ¶æ€</span>
          <span class="hljs-keyword">if</span> (self.<span class="hljs-property">status</span> === <span class="hljs-variable constant_">FULFILLED</span>) {
            <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
              <span class="hljs-keyword">try</span> {
                <span class="hljs-comment">// æ‰§è¡ŒæˆåŠŸå›è°ƒå¹¶è·å–è¿”å›å€¼</span>
                <span class="hljs-keyword">const</span> result = <span class="hljs-title function_">onFulfilled</span>(self.<span class="hljs-property">value</span>);
                <span class="hljs-comment">// æ ¹æ®è¿”å›å€¼å¤„ç†æ–°Promiseçš„çŠ¶æ€</span>
                <span class="hljs-title function_">resolvePromise</span>(result, resolve, reject);
              } <span class="hljs-keyword">catch</span> (error) {
                <span class="hljs-title function_">reject</span>(error);
              }
            });
          }


          <span class="hljs-comment">// å¤„ç†å¤±è´¥çŠ¶æ€</span>
          <span class="hljs-keyword">if</span> (self.<span class="hljs-property">status</span> === <span class="hljs-variable constant_">REJECTED</span>) {
            <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
              <span class="hljs-keyword">try</span> {
                <span class="hljs-comment">// æ‰§è¡Œå¤±è´¥å›è°ƒå¹¶è·å–è¿”å›å€¼</span>
                <span class="hljs-keyword">const</span> result = <span class="hljs-title function_">onRejected</span>(self.<span class="hljs-property">reason</span>);
                <span class="hljs-comment">// æ ¹æ®è¿”å›å€¼å¤„ç†æ–°Promiseçš„çŠ¶æ€</span>
                <span class="hljs-title function_">resolvePromise</span>(result, resolve, reject);
              } <span class="hljs-keyword">catch</span> (error) {
                <span class="hljs-title function_">reject</span>(error);
              }
            });
          }

          <span class="hljs-comment">// å¤„ç†ç­‰å¾…çŠ¶æ€ï¼ˆæš‚å­˜å›è°ƒï¼‰</span>
          <span class="hljs-keyword">if</span> (self.<span class="hljs-property">status</span> === <span class="hljs-variable constant_">PENDING</span>) {
            self.<span class="hljs-property">onFulfilledCallbacks</span>.<span class="hljs-title function_">push</span>(<span class="hljs-function">() =&gt;</span> {
              <span class="hljs-keyword">try</span> {
                <span class="hljs-keyword">const</span> result = <span class="hljs-title function_">onFulfilled</span>(self.<span class="hljs-property">value</span>);
                <span class="hljs-title function_">resolvePromise</span>(result, resolve, reject);
              } <span class="hljs-keyword">catch</span> (error) {
                <span class="hljs-title function_">reject</span>(error);
              }
            });

            self.<span class="hljs-property">onRejectedCallbacks</span>.<span class="hljs-title function_">push</span>(<span class="hljs-function">() =&gt;</span> {
              <span class="hljs-keyword">try</span> {
                <span class="hljs-keyword">const</span> result = <span class="hljs-title function_">onRejected</span>(self.<span class="hljs-property">reason</span>);
                <span class="hljs-title function_">resolvePromise</span>(result, resolve, reject);
              } <span class="hljs-keyword">catch</span> (error) {
                <span class="hljs-title function_">reject</span>(error);
              }
            });
          }
        });
      };

      <span class="hljs-comment">/** catchæ–¹æ³•å®ç°ï¼ˆè¯­æ³•ç³–ï¼Œç­‰ä»·äºthen(null, onRejected)ï¼‰
       * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Function</span>} onRejected å¤±è´¥å›è°ƒ
       * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">MyPromise</span>}
       */</span>
      <span class="hljs-title class_">MyPromise</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">catch</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">onRejected</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">then</span>(<span class="hljs-literal">null</span>, onRejected);
      };

      <span class="hljs-comment">//é™æ€æ–¹æ³•resolve - è¿”å›ä¸€ä¸ªå·²å®Œæˆçš„Promise</span>
      <span class="hljs-title class_">MyPromise</span>.<span class="hljs-property">resolve</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">value</span>) {
        <span class="hljs-keyword">if</span> (value <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">MyPromise</span>) {
          <span class="hljs-keyword">return</span> value;
        }
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyPromise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> {
          <span class="hljs-title function_">resolve</span>(value);
        });
      };

      <span class="hljs-comment">//é™æ€æ–¹æ³•reject - è¿”å›ä¸€ä¸ªå·²å¤±è´¥çš„Promise</span>
      <span class="hljs-title class_">MyPromise</span>.<span class="hljs-property">reject</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">reason</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyPromise</span>(<span class="hljs-function">(<span class="hljs-params">_, reject</span>) =&gt;</span> {
          <span class="hljs-title function_">reject</span>(reason);
        });
      };

      <span class="hljs-comment">// å¤„ç†thenå›è°ƒè¿”å›å€¼çš„å·¥å…·å‡½æ•°</span>
      <span class="hljs-keyword">function</span> <span class="hljs-title function_">resolvePromise</span>(<span class="hljs-params">result, resolve, reject</span>) {
        <span class="hljs-comment">// å¦‚æœè¿”å›å€¼æ˜¯å½“å‰Promiseï¼ŒæŠ›å‡ºå¾ªç¯å¼•ç”¨é”™è¯¯</span>
        <span class="hljs-keyword">if</span> (result <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">MyPromise</span>) {
          result.<span class="hljs-title function_">then</span>(resolve, reject);
        } <span class="hljs-keyword">else</span> {
          <span class="hljs-comment">// æ™®é€šå€¼ç›´æ¥resolve</span>
          <span class="hljs-title function_">resolve</span>(result);
        }
      }
    
      <span class="hljs-comment">// æµ‹è¯•ç”¨ä¾‹</span>
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'--- æµ‹è¯•ç”¨ä¾‹å¼€å§‹ ---'</span>);

      <span class="hljs-comment">// 1. åŸºæœ¬ resolve</span>
      <span class="hljs-keyword">const</span> p1 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyPromise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> {
        <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">resolve</span>(<span class="hljs-string">'æˆåŠŸ1'</span>), <span class="hljs-number">100</span>);
      })
      p1.<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Test 1: æˆåŠŸ1'</span>, res); <span class="hljs-comment">// æˆåŠŸ1</span>
      })
      p1.<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">err</span> =&gt;</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Test 1: å¤±è´¥1'</span>, err);
      })

      <span class="hljs-comment">// 2. åŸºæœ¬ reject + catch</span>
      <span class="hljs-comment">// const p2 = new MyPromise((_, reject) =&gt; {</span>
      <span class="hljs-comment">//   setTimeout(() =&gt; reject('å¤±è´¥1'), 100);</span>
      <span class="hljs-comment">// })</span>
      <span class="hljs-comment">// p2.then(success =&gt; {</span>
      <span class="hljs-comment">//   console.log('Test 2: æˆåŠŸ1', success); // å¤±è´¥1</span>
      <span class="hljs-comment">// }, (err) =&gt; {</span>
      <span class="hljs-comment">//   console.log('Test 2: å¤±è´¥1', err); // å¤±è´¥1</span>
      <span class="hljs-comment">// })</span>
      <span class="hljs-comment">// p2.catch(err =&gt; {</span>
      <span class="hljs-comment">//   console.log('Test 2: å¤±è´¥2', err); // å¤±è´¥1</span>
      <span class="hljs-comment">// })</span>

      <span class="hljs-comment">// 3. executor æŠ›å‡ºå¼‚å¸¸</span>
      <span class="hljs-comment">// new MyPromise(() =&gt; {</span>
      <span class="hljs-comment">//   throw new Error('executor error');</span>
      <span class="hljs-comment">// }).catch(err =&gt; {</span>
      <span class="hljs-comment">//   console.log('Test 4: å¼‚å¸¸', err.message); // executor error</span>
      <span class="hljs-comment">// });</span>

      <span class="hljs-comment">// 4. Promise é“¾å¼åµŒå¥—</span>
      <span class="hljs-comment">// const p4 = new MyPromise((resolve) =&gt; resolve(1))</span>
      <span class="hljs-comment">//   .then((v) =&gt; v + 1)</span>
      <span class="hljs-comment">//   .then((v) =&gt; MyPromise.resolve(v * 2))</span>
      <span class="hljs-comment">//   .then((v) =&gt; {</span>
      <span class="hljs-comment">//     console.log('Test 5:', v); // 4</span>
      <span class="hljs-comment">//   });</span>
</code></pre>
<h2 data-id="heading-3">ä¸‰ã€ æ·±åº¦ç»†èŠ‚è§£æ</h2>
<h3 data-id="heading-4">1. ä¸ºä»€ä¹ˆä½¿ç”¨ <code>queueMicrotask</code>ï¼Ÿ</h3>
<p>æ ¹æ® Promiseè§„èŒƒï¼Œ<code>onFulfilled</code> æˆ– <code>onRejected</code> å¿…é¡»åœ¨æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆä»…åŒ…å«å¹³å°ä»£ç æ—¶æ‰§è¡Œã€‚è¿™æ„å‘³ç€å›è°ƒå¿…é¡»æ˜¯å¼‚æ­¥çš„ã€‚ä½¿ç”¨å¾®ä»»åŠ¡è€Œä¸æ˜¯å®ä»»åŠ¡ï¼ˆå¦‚ <code>setTimeout</code>ï¼‰ï¼Œæ˜¯ä¸ºäº†ä¿è¯åœ¨å½“å‰ä»»åŠ¡å¾ªç¯ç»“æŸå‰å°½å¯èƒ½å¿«åœ°æ‰§è¡Œå›è°ƒã€‚</p>
<h3 data-id="heading-5">2. çŠ¶æ€ä¸å¯é€†æ€§</h3>
<p>åœ¨ <code>resolve</code> å’Œ <code>reject</code> å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆåˆ¤æ–­ <code>state === 'pending'</code>ã€‚ä¸€æ—¦çŠ¶æ€å˜ä¸º <code>fulfilled</code> æˆ– <code>rejected</code>ï¼Œåç»­ä»»ä½•è°ƒç”¨éƒ½å°†è¢«å¿½ç•¥ï¼Œè¿™ä¿è¯äº† Promise çš„ç¨³å®šæ€§ã€‚</p>
<hr/>
<h2 data-id="heading-6">å››ã€ æ€»ç»“</h2>
<ol>
<li><strong>åŒæ­¥æ‰§è¡Œ</strong> <code>executor</code>ã€‚</li>
<li><strong>å¼‚æ­¥æ”¶é›†</strong> å›è°ƒå‡½æ•°ã€‚</li>
<li><strong>é€’å½’è§£æ</strong> è¿”å›å€¼ï¼Œå®ç°é“¾å¼è°ƒç”¨ã€‚</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Redis äº‹åŠ¡çš„â€œåŸå­æ€§â€è¿·æ€ï¼šä¸ºä»€ä¹ˆæˆ‘ä»¬æœ€ç»ˆé€‰æ‹©äº† Lua è„šæœ¬]]></title>    <link>https://juejin.cn/post/7602811649126613043</link>    <guid>https://juejin.cn/post/7602811649126613043</guid>    <pubDate>2026-02-04T14:44:09.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602811649126613043" data-draft-id="7602901565024862217" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Redis äº‹åŠ¡çš„â€œåŸå­æ€§â€è¿·æ€ï¼šä¸ºä»€ä¹ˆæˆ‘ä»¬æœ€ç»ˆé€‰æ‹©äº† Lua è„šæœ¬"/> <meta itemprop="keywords" content="Redis,é¢è¯•,æ€§èƒ½ä¼˜åŒ–"/> <meta itemprop="datePublished" content="2026-02-04T14:44:09.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸€æ—…äºº"/> <meta itemprop="url" content="https://juejin.cn/user/3485898277388519"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Redis äº‹åŠ¡çš„â€œåŸå­æ€§â€è¿·æ€ï¼šä¸ºä»€ä¹ˆæˆ‘ä»¬æœ€ç»ˆé€‰æ‹©äº† Lua è„šæœ¬
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3485898277388519/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸€æ—…äºº
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T14:44:09.000Z" title="Wed Feb 04 2026 14:44:09 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p><strong>å†™åœ¨å‰é¢çš„è¯</strong></p>
<p>ä½œä¸ºä¸€ä¸ªé•¿æœŸå’Œå…³ç³»å‹æ•°æ®åº“ï¼ˆRDBMSï¼‰æ‰“äº¤é“çš„å¼€å‘è€…ï¼Œåˆæ¬¡æŸ¥é˜… Redis æ–‡æ¡£æ—¶ï¼Œçœ‹åˆ° <code>MULTI</code>ã€<code>EXEC</code>ã€<code>DISCARD</code> è¿™äº›æŒ‡ä»¤ï¼Œå¿ƒä¸­éš¾å…æ¶Œèµ·ä¸€è‚¡ç”±äºç†Ÿæ‚‰è€Œå¸¦æ¥çš„å®‰å…¨æ„Ÿã€‚</p>
<p>æˆ‘ä»¬çš„å¤§è„‘ä¼šè‡ªåŠ¨å»ºç«‹æ˜ å°„ï¼š<code>MULTI</code> å°±æ˜¯ <code>BEGIN</code>ï¼Œ<code>EXEC</code> å°±æ˜¯ <code>COMMIT</code>ï¼Œ<code>DISCARD</code> å°±æ˜¯ <code>ROLLBACK</code>ã€‚è¿™å¥—ç»„åˆæ‹³æ‰“ä¸‹æ¥ï¼Œæ‰€æœ‰çš„ä¸šåŠ¡é€»è¾‘ä¼¼ä¹éƒ½åº”è¯¥å…·å¤‡äº†â€œä¸æˆåŠŸä¾¿æˆä»â€çš„åŸå­æ€§ä¿éšœã€‚</p>
<p>ä½†è¿™æ°æ°æ˜¯ Redis ç»™æˆ‘ä¸Šçš„ç¬¬ä¸€è¯¾ï¼š<strong>ç›¸ä¼¼çš„å‘½åèƒŒåï¼Œå¾€å¾€è—ç€æˆªç„¶ä¸åŒçš„çµé­‚ã€‚</strong> å½“ä½ æŠŠ MySQL çš„äº‹åŠ¡è§‚ç”Ÿæ¬ç¡¬å¥—åˆ° Redis èº«ä¸Šæ—¶ï¼Œé”™ä»˜å°±å·²ç»å¼€å§‹äº†ã€‚</p>
<p>è¿™ç¯‡æ–‡ç« å°†å¸¦ä½ å‰¥å¼€ <strong>Redis äº‹åŠ¡</strong>çš„å¤–è¡£ï¼Œä»â€œåŸå­æ€§â€çš„å®šä¹‰åå·®è¯´èµ·ï¼ŒèŠèŠä¸ºä»€ä¹ˆåœ¨ç°ä»£å¼€å‘ä¸­ï¼Œæˆ‘ä»¬è¶Šæ¥è¶Šå€¾å‘äº<strong>ç”¨ Lua è„šæœ¬æ¥æ›¿ä»£å®ƒã€‚</strong></p>
</blockquote>
<hr/>
<h2 data-id="heading-0">ä¸€ã€å…ˆæŠŠè¯¯ä¼šè§£å¼€ï¼šRedis äº‹åŠ¡ä¸æ˜¯ ACID</h2>
<p><strong>åœ¨å…³ç³»å‹æ•°æ®åº“çš„ä¸–ç•Œé‡Œï¼Œâ€œäº‹åŠ¡â€äºŒå­—é‡è‹¥åƒé’§</strong>ï¼Œå®ƒå‡ ä¹ç­‰åŒäº <strong>ACID</strong>ï¼ˆåŸå­æ€§ã€ä¸€è‡´æ€§ã€éš”ç¦»æ€§ã€æŒä¹…æ€§ï¼‰ã€‚æˆ‘ä»¬ä¹ æƒ¯äº†â€œè¦ä¹ˆå…¨æœ‰ï¼Œè¦ä¹ˆå…¨æ— â€çš„å®‰å…¨æ„Ÿã€‚</p>
<p>è€Œåœ¨ Redis çš„ä¸–ç•Œé‡Œï¼Œ<code>MULTI</code> å’Œ <code>EXEC</code> æ›´åƒæ˜¯ä¸€ä¸ª<strong>æ‰¹å¤„ç†ä¿¡å·</strong>ï¼š</p>
<blockquote>
<p><strong>æŠŠä¸€å †å‘½ä»¤å…ˆæ”¾è¿›é˜Ÿåˆ—é‡Œæ’é˜Ÿï¼Œç­‰åˆ° <code>EXEC</code> æ—¶ï¼Œä¸€æ¬¡æ€§ã€æŒ‰é¡ºåºåœ°æ‰§è¡Œå®ƒä»¬ã€‚</strong></p>
</blockquote>
<p>è¿™é‡Œæœ‰ä¸€ä¸ªå·¨å¤§çš„è®¤çŸ¥åå·®ã€‚å½“æˆ‘ä»¬è°ˆè®º Redis çš„â€œåŸå­æ€§â€æ—¶ï¼ŒRedis æŒ‡çš„å…¶å®æ˜¯ <strong>éš”ç¦»æ€§ï¼ˆIsolationï¼‰</strong>ï¼Œè€Œä¸æ˜¯ <strong>å›æ»šï¼ˆRollbackï¼‰</strong>ã€‚</p>
<ul>
<li><strong>å®ƒä¿è¯çš„æ˜¯</strong>ï¼š<strong>æˆ‘æ‰§è¡Œè¿™æ®µå‘½ä»¤çš„æ—¶å€™ï¼Œåˆ«äººä¸èƒ½æ’é˜Ÿï¼ˆç‹¬å æ‰§è¡Œï¼‰ã€‚</strong></li>
<li><strong>å®ƒä¸ä¿è¯çš„æ˜¯</strong>ï¼š<strong>å¦‚æœæˆ‘æ‰§è¡Œåˆ°ä¸€åŠæŠ¥é”™äº†ï¼Œæˆ‘ä¼šå¸®ä½ æŠŠå‰é¢çš„æ“ä½œæ’¤é”€ï¼ˆå¤±è´¥å›æ»šï¼‰ã€‚</strong></li>
</ul>
<p>ä¸ºäº†æ›´ç›´è§‚åœ°ç†è§£ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹æ¯”ä¸€ä¸‹ Redis äº‹åŠ¡å’Œæ ‡å‡† ACID äº‹åŠ¡çš„åŒºåˆ«ï¼š</p>



































<table><thead><tr><th align="left">ç‰¹æ€§</th><th align="left">å…³ç³»å‹æ•°æ®åº“ (MySQL)</th><th align="left">Redis äº‹åŠ¡</th><th align="left">å·®å¼‚è§£è¯»</th></tr></thead><tbody><tr><td align="left"><strong>åŸå­æ€§ (Atomicity)</strong></td><td align="left"><strong>All or Nothing</strong> <br/> å¤±è´¥å³å›æ»šï¼Œå¦‚åŒæœªå‘ç”Ÿè¿‡</td><td align="left"><strong>All or Partial</strong> <br/> æ²¡å¾—å•†é‡ï¼Œé”™äº†å°±é”™äº†ï¼Œå‰©ä¸‹çš„æ¥ç€å¹²</td><td align="left">Redis ä¸æ”¯æŒ Rollbackï¼Œéƒ¨åˆ†æˆåŠŸæ˜¯å¸¸æ€</td></tr><tr><td align="left"><strong>ä¸€è‡´æ€§ (Consistency)</strong></td><td align="left">å¼ºä¸€è‡´æ€§ <br/> çº¦æŸå¿…é¡»æ»¡è¶³</td><td align="left">å¼±ä¸€è‡´æ€§ <br/> ä¾èµ–ä¸šåŠ¡ä»£ç ä¿éšœ</td><td align="left">Redis ä¸ä¼šæ ¡éªŒä¸šåŠ¡çº¦æŸï¼ˆå¦‚å¤–é”®ã€éç©ºç­‰ï¼‰</td></tr><tr><td align="left"><strong>éš”ç¦»æ€§ (Isolation)</strong></td><td align="left">æœ‰å¤šç§éš”ç¦»çº§åˆ« (RC/RR/Serializable)</td><td align="left"><strong>ä¸²è¡ŒåŒ–æ‰§è¡Œ</strong> <br/> æ‰§è¡ŒæœŸé—´ä¸å¯è¢«æ‰“æ–­</td><td align="left">å¾—ç›Šäºå•çº¿ç¨‹æ¨¡å‹ï¼Œ<code>EXEC</code> æœŸé—´å¤©ç„¶éš”ç¦»</td></tr><tr><td align="left"><strong>æŒä¹…æ€§ (Durability)</strong></td><td align="left">WAL æ—¥å¿—ä¿éšœ <br/> æ‰ç”µä¸ä¸¢å¤±</td><td align="left">å–å†³äº AOF/RDB é…ç½®</td><td align="left">é»˜è®¤é…ç½®ä¸‹é€šå¸¸æœ‰æ•°æ®ä¸¢å¤±é£é™©</td></tr></tbody></table>
<blockquote>
<p><strong>ä¸€å¥è¯æ€»ç»“ï¼š</strong>
<strong>Redis äº‹åŠ¡æ˜¯â€œå‘½ä»¤é˜Ÿåˆ— + ç‹¬å æ‰§è¡Œâ€ï¼Œç»ä¸æ˜¯â€œå¤±è´¥å›æ»š + å¼ºä¸€è‡´â€ã€‚</strong></p>
</blockquote>
<hr/>
<h2 data-id="heading-1">äºŒã€æ®‹é…·çš„çœŸç›¸ï¼šå®ƒçœŸçš„ä¸åŒ…å›æ»š</h2>
<p>ä¸ºäº†æŠŠè¿™ä¸ªæ¦‚å¿µåˆ»è¿› DNAï¼Œæˆ‘ä»¬çœ‹ä¸¤ç§çœŸå®çš„é”™è¯¯åœºæ™¯ã€‚</p>
<h3 data-id="heading-2">1. å…¥é˜Ÿæ—¶çš„â€œä½çº§é”™è¯¯â€ï¼ˆå…¨å‘˜è¿åï¼‰</h3>
<p>å¦‚æœä½ åœ¨<strong>å‘½ä»¤å…¥é˜Ÿé˜¶æ®µ</strong>å°±çŠ¯äº†è¯­æ³•é”™è¯¯ï¼ˆæ¯”å¦‚å‚æ•°å†™å°‘äº†ï¼‰ï¼ŒRedis è¿˜æ˜¯è®²é“ç†çš„ï¼Œå®ƒä¼šç›´æ¥æ‹’ç»æ•´ä¸ªäº‹åŠ¡ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">127.0.0.1:6379&gt; MULTI
OK
127.0.0.1:6379&gt; SET key1 value1
QUEUED
127.0.0.1:6379&gt; SET key2      <span class="hljs-comment"># &lt;--- è¯­æ³•é”™è¯¯ï¼šå°‘äº†å‚æ•°</span>
(error) ERR wrong number of arguments <span class="hljs-keyword">for</span> <span class="hljs-string">'set'</span> <span class="hljs-built_in">command</span>
127.0.0.1:6379&gt; EXEC
(error) EXECABORT Transaction discarded because of previous errors.
</code></pre>
<p>è¿™æ—¶å€™ï¼Œ<strong>æ‰€æœ‰å‘½ä»¤éƒ½ä¸ä¼šæ‰§è¡Œ</strong>ã€‚è¿™ç¬¦åˆæˆ‘ä»¬å¯¹â€œäº‹åŠ¡â€çš„é¢„æœŸã€‚</p>
<h3 data-id="heading-3">2. æ‰§è¡Œæ—¶çš„â€œè¿è¡Œæ—¶é”™è¯¯â€ï¼ˆè™½æ­»çŠ¹è¿›ï¼‰</h3>
<p>è¿™æ‰æ˜¯çœŸæ­£çš„å‘ã€‚å‡è®¾è¯­æ³•æ²¡é—®é¢˜ï¼Œä½†åœ¨<strong>æ‰§è¡ŒæœŸé—´</strong>ï¼ŒæŸæ¡å‘½ä»¤å› ä¸ºæ•°æ®ç±»å‹ä¸åŒ¹é…æŠ¥é”™äº†ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">127.0.0.1:6379&gt; MULTI
OK
127.0.0.1:6379&gt; SET user:A:points 100
QUEUED
127.0.0.1:6379&gt; LPUSH user:A:points <span class="hljs-string">"error_data"</span>  <span class="hljs-comment"># &lt;--- å¯¹ String ç±»å‹åš List æ“ä½œï¼Œæ³¨å®šè¿è¡ŒæŠ¥é”™</span>
QUEUED
127.0.0.1:6379&gt; INCR user:A:points                 <span class="hljs-comment"># &lt;--- åç»­å‘½ä»¤</span>
QUEUED

127.0.0.1:6379&gt; EXEC
1) OK
2) (error) WRONGTYPE Operation against a key holding the wrong kind of value  &lt;--- æŠ¥é”™ï¼
3) (<span class="hljs-built_in">integer</span>) 101                                                              &lt;--- ä¾ç„¶æˆåŠŸäº†ï¼
</code></pre>
<p><strong>ç›®çªå£å‘†äº†å—ï¼Ÿ</strong>
ç¬¬äºŒæ¡å‘½ä»¤æŠ¥é”™äº†ï¼Œä½†ç¬¬ä¸‰æ¡å‘½ä»¤ä¾ç„¶æ¬¢å¿«åœ°æ‰§è¡Œäº†ã€‚æ•°æ®å‡ºç°äº†ä¸­é—´æ€ï¼šå³æ‰€è°“çš„â€œä¸ä¸€è‡´â€ã€‚</p>
<p>Redis å®˜æ–¹å¯¹æ­¤çš„è§£é‡Šéå¸¸â€œç›´ç”·â€ï¼š</p>
<blockquote>
<p>â€œåªæœ‰è¯­æ³•é”™è¯¯æ‰ä¼šè¢«æ‹¦æˆªï¼Œè¿è¡Œæ—¶é”™è¯¯å±äºç¨‹åºå‘˜çš„é€»è¾‘ Bugï¼ˆæ¯”å¦‚æŠŠ String å½“ List ç”¨ï¼‰ã€‚<strong>æ•°æ®åº“ä¸åº”è¯¥ä¸ºäº†ç¨‹åºå‘˜çš„ Bug ä¹°å•ï¼Œå»æå¤æ‚çš„å›æ»šæœºåˆ¶ã€‚</strong>â€</p>
</blockquote>
<hr/>
<h2 data-id="heading-4">ä¸‰ã€è¿›é˜¶ä¹‹è·¯ï¼šä»åŸç”Ÿæ‰¹é‡åˆ° Lua è„šæœ¬</h2>
<blockquote>
<p><strong>ğŸ’¡ é¢„å¤‡çŸ¥è¯†ï¼šRTT æ˜¯æ€§èƒ½æ€æ‰‹</strong></p>
<p>ä¸€ä¸ª Redis å‘½ä»¤çš„æ‰§è¡Œå¯ä»¥ç®€åŒ–ä¸º 4 æ­¥ï¼š<strong>å‘é€å‘½ä»¤ â†’ å‘½ä»¤æ’é˜Ÿ â†’ å‘½ä»¤æ‰§è¡Œ â†’ è¿”å›ç»“æœ</strong>ã€‚</p>
<p>å…¶ä¸­ï¼Œç¬¬ 1 æ­¥å’Œç¬¬ 4 æ­¥çš„æ—¶é—´ä¹‹å’Œç§°ä¸º <strong>RTT (å¾€è¿”æ—¶é—´)</strong>ã€‚å¦‚æœæˆ‘æœ‰ 100 ä¸ªå‘½ä»¤ï¼Œä¸€ä¸ªä¸ªå‘å°±éœ€è¦ 100 æ¬¡ RTTï¼Œå¤§éƒ¨åˆ†æ—¶é—´éƒ½æµªè´¹åœ¨ç½‘ç»œä¼ è¾“ä¸Šã€‚
<strong>æ‰¹é‡æ“ä½œçš„æ ¸å¿ƒæ„ä¹‰ï¼Œå°±æ˜¯æŠŠ 100 æ¬¡ RTT å‹ç¼©æˆ 1 æ¬¡ã€‚</strong></p>
</blockquote>
<p>æ—¢ç„¶ <code>MULTI/EXEC</code> è¿™ä¹ˆâ€œå¤´é“â€ï¼Œé‚£æˆ‘ä»¬åœ¨å®é™…å¼€å‘ä¸­åˆ°åº•è¯¥æ€ä¹ˆé€‰ï¼Ÿæˆ‘ä»¬å¯ä»¥æŠŠ Redis çš„æ‰¹é‡æ“ä½œèƒ½åŠ›åˆ†ä¸ºå‡ ä¸ªæ®µä½ã€‚</p>
<h3 data-id="heading-5">Lv1. åŸç”Ÿæ‰¹é‡å‘½ä»¤ (MSET / MGET)</h3>
<p>è¿™æ˜¯æœ€ç®€å•ã€æœ€å¿«çš„æ–¹å¼ã€‚</p>
<ul>
<li><strong>ç‰¹ç‚¹</strong>ï¼šåŸç”Ÿçš„åŸå­æ€§ã€‚<code>MSET key1 val1 key2 val2</code> æ˜¯ä¸€ä¸ªåŸå­æ“ä½œï¼Œ<strong>è¦ä¹ˆéƒ½æˆåŠŸï¼Œè¦ä¹ˆéƒ½å¤±è´¥</strong>ï¼ˆåœ¨ Redis å±‚é¢ï¼‰ã€‚</li>
<li><strong>ç¤ºä¾‹</strong>ï¼š
<pre><code class="hljs language-bash" lang="bash">MSET key1 <span class="hljs-string">"Hello"</span> key2 <span class="hljs-string">"World"</span>
</code></pre>
</li>
<li><strong>å±€é™</strong>ï¼šåªèƒ½å¤„ç†åŒä¸€ç§å‘½ä»¤ï¼Œé€»è¾‘æ­»æ¿ã€‚</li>
</ul>
<h3 data-id="heading-6">Lv2. ç®¡é“ (Pipeline)</h3>
<p>å½“ä½ éœ€è¦æ‰¹é‡æ‰§è¡Œå‡ åä¸ªä¸åŒçš„å‘½ä»¤ï¼Œä¸”ä¸éœ€è¦å®ƒä»¬ä¹‹é—´æœ‰é€»è¾‘ä¾èµ–æ—¶ï¼ŒPipeline æ˜¯é¦–é€‰ã€‚</p>
<ul>
<li><strong>ç‰¹ç‚¹</strong>ï¼š<strong>å”¯å¿«ä¸ç ´</strong>ã€‚å®ƒæŠŠå‡ åä¸ªå‘½ä»¤æ‰“åŒ…ï¼Œä¸€æ¬¡ç½‘ç»œè¯·æ±‚ï¼ˆRTTï¼‰å‘ç»™æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨æ‰§è¡Œå®Œå†ä¸€æ¬¡æ€§è¿”å›ã€‚</li>
<li><strong>å½¢è±¡ç†è§£</strong>ï¼š<strong>ä¸‹ 100 ä¸ªå• -&gt; ä¸€æ¬¡æ€§æ”¶ 100 ä¸ªå¿«é€’ (1 æ¬¡ RTT)</strong>ã€‚</li>
<li><strong>ä¸äº‹åŠ¡çš„åŒºåˆ«</strong>ï¼š
<ul>
<li><strong>éåŸå­æ€§</strong>ï¼šPipeline åªæ˜¯æ‰“åŒ…å‘é€ï¼ŒRedis å¯èƒ½ä¼šåœ¨å¤„ç† Pipeline ä¸­é—´ç©¿æ’æ‰§è¡Œå…¶ä»–å®¢æˆ·ç«¯çš„å‘½ä»¤ï¼ˆäº¤é”™æ‰§è¡Œï¼‰ã€‚</li>
<li><strong>æ•ˆç‡æ›´é«˜</strong>ï¼šä¸éœ€è¦åƒäº‹åŠ¡é‚£æ ·æ¯ä¸ªå‘½ä»¤éƒ½å‘ä¸€æ¬¡ï¼Œåªéœ€è¦å‘é€ä¸€æ¬¡ã€‚</li>
</ul>
</li>
</ul>
<h3 data-id="heading-7">Lv3. äº‹åŠ¡ (MULTI / EXEC)</h3>
<p>æ¯” Pipeline å¤šäº†ä¸€å±‚ä¿éšœï¼š<strong>ç‹¬å æ‰§è¡Œ</strong>ã€‚</p>
<ul>
<li><strong>ç‰¹ç‚¹</strong>ï¼š<strong>åŸå­æ“ä½œï¼ˆéš”ç¦»æ€§ï¼‰</strong>ã€‚
<ul>
<li><strong>ä¸¤ä¸ªä¸åŒçš„äº‹åŠ¡ä¸ä¼šåŒæ—¶è¿è¡Œ</strong>ã€‚åœ¨ <code>EXEC</code> æ‰§è¡ŒæœŸé—´ï¼ŒRedis ä¼šâ€œä»¥æ­¤ä¸ºå°Šâ€ï¼Œä¿è¯æ²¡æœ‰å…¶ä»–å®¢æˆ·ç«¯èƒ½æ’é˜Ÿã€‚</li>
</ul>
</li>
<li><strong>ç¼ºç‚¹</strong>ï¼š
<ul>
<li><strong>RTT å¼€é”€å¤§</strong>ï¼šäº‹åŠ¡ä¸­ <strong>æ¯ä¸ªå‘½ä»¤éƒ½éœ€è¦å•ç‹¬å‘é€</strong> åˆ°æœåŠ¡ç«¯å…¥é˜Ÿï¼Œè¯·æ±‚æ¬¡æ•°å¹¶æ²¡æœ‰å‡å°‘ã€‚</li>
<li><strong>ä¸æ”¯æŒå›æ»š</strong>ï¼Œä¸æ”¯æŒåœ¨äº‹åŠ¡ä¸­é—´åšé€»è¾‘åˆ¤æ–­ã€‚</li>
</ul>
</li>
</ul>
<h3 data-id="heading-8">Lv3.1 äº‹åŠ¡ + WATCH (ä¹è§‚é”)</h3>
<p>å•çº¯çš„ <code>MULTI/EXEC</code> å¾€å¾€æ¯”è¾ƒé¸¡è‚‹ï¼Œå› ä¸ºå®ƒæ— æ³•æ„ŸçŸ¥ä¸­é—´çŠ¶æ€ã€‚<strong>ä½†è¿™å¥—æœºåˆ¶å”¯ä¸€çš„â€œç‹ç‰Œâ€ç»„åˆæ˜¯é…åˆ <code>WATCH</code> å‘½ä»¤ï¼Œå®ç°ä¹è§‚é” (CAS)ã€‚</strong></p>
<ul>
<li>
<p><strong>åœºæ™¯</strong>ï¼šç§’æ€æ‰£å‡åº“å­˜ã€‚</p>
<ul>
<li>åœ¨ <code>MULTI</code> ä¹‹å‰ <code>WATCH stock</code>ã€‚</li>
<li>å¦‚æœåœ¨ <code>EXEC</code> æ‰§è¡Œå‰ <code>stock</code> è¢«åˆ«äººæ”¹äº†ï¼Œæ•´ä¸ªäº‹åŠ¡åŸåœ°å–æ¶ˆï¼ˆè¿”å› nilï¼‰ã€‚</li>
</ul>
</li>
<li>
<p><strong>ä»£ç ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">WATCH stock:001                <span class="hljs-comment"># 1. ç›‘è§†åº“å­˜</span>
GET stock:001                  <span class="hljs-comment"># 2. è¯»åº“å­˜ï¼Œå‘ç°æ˜¯ 10</span>
MULTI                          <span class="hljs-comment"># 3. å¼€å¯äº‹åŠ¡ (å¼€å§‹æ’é˜Ÿ)</span>
DECR stock:001                 <span class="hljs-comment"># 4. å‡åº“å­˜</span>
EXEC                           <span class="hljs-comment"># 5. æ‰§è¡Œ</span>
<span class="hljs-comment"># å¦‚æœåœ¨æ­¥éª¤ 1-5 ä¹‹é—´ï¼Œåˆ«äººæ”¹äº† stock:001ï¼Œè¿™é‡Œä¼šè¿”å› (nil)ï¼Œäº‹åŠ¡å›æ»šã€‚</span>
</code></pre>
</li>
<li>
<p><strong>è‡´å‘½å¼±ç‚¹</strong>ï¼š<strong>é«˜å¹¶å‘ä¸‹æ€§èƒ½æå·®</strong>ã€‚</p>
<ul>
<li>å°±åƒä¸€ç¾¤äººæŠ¢ä¸€ä¸ªéº¦å…‹é£ï¼Œä¸€ä¸ªäººæŠ¢åˆ°äº†ï¼Œå…¶ä»–äººçš„ <code>CAS</code> å…¨éƒ¨å¤±è´¥ï¼Œåªèƒ½å®¢æˆ·ç«¯é‡è¯•ï¼ˆè‡ªæ—‹ï¼‰ã€‚</li>
<li><strong>ç«äº‰è¶Šæ¿€çƒˆï¼Œé‡è¯•è¶Šé¢‘ç¹ï¼ŒCPU ç©ºè½¬è¶Šä¸¥é‡ã€‚</strong></li>
</ul>
</li>
</ul>
<h3 data-id="heading-9">Lv4. æœ€ç»ˆå…µå™¨ â€”â€” Lua è„šæœ¬</h3>
<p>ä» Redis 2.6 å¼€å§‹ï¼ŒLua è„šæœ¬æˆä¸ºäº†è§£å†³å¤æ‚åŸå­æ€§é—®é¢˜çš„æ ¸å¿ƒæ–¹æ¡ˆï¼Œå®ƒå®Œç¾æ›¿ä»£äº† <code>WATCH</code> äº‹åŠ¡ã€‚</p>
<p><strong>ä¸ºä»€ä¹ˆå®ƒæ¯”äº‹åŠ¡å¼ºï¼Ÿ</strong></p>
<ol>
<li><strong>é€»è¾‘åŸå­æ€§</strong>ï¼šä¸€æ®µ Lua è„šæœ¬è¢«è§†ä½œä¸€æ¡å‘½ä»¤ã€‚Redis ä¿è¯è„šæœ¬æ‰§è¡ŒæœŸé—´ï¼Œ<strong>ä¸ä¼šæœ‰ä»»ä½•å…¶ä»–è„šæœ¬æˆ–å‘½ä»¤æ’å…¥</strong>ã€‚</li>
<li><strong>æ•ˆç‡æ›´é«˜</strong>ï¼šä¸éœ€è¦åƒ <code>WATCH</code> é‚£æ ·åå¤é‡è¯•ã€‚è„šæœ¬åœ¨æœåŠ¡å™¨ç«¯æ‰§è¡Œï¼Œåªæœ‰ä¸€æ¬¡ RTTã€‚</li>
</ol>
<p><strong>ç¤ºä¾‹ï¼šå®‰å…¨çš„â€œå…ˆæŸ¥åæ”¹â€</strong></p>
<pre><code class="hljs language-lua" lang="lua"><span class="hljs-comment">-- åˆ¤æ–­ key æ˜¯å¦ç­‰äºé¢„æœŸå€¼ï¼Œå¦‚æœæ˜¯åˆ™åˆ é™¤</span>
<span class="hljs-keyword">if</span> redis.call(<span class="hljs-string">"GET"</span>, KEYS[<span class="hljs-number">1</span>]) == ARGV[<span class="hljs-number">1</span>] <span class="hljs-keyword">then</span>
    <span class="hljs-keyword">return</span> redis.call(<span class="hljs-string">"DEL"</span>, KEYS[<span class="hljs-number">1</span>])
<span class="hljs-keyword">else</span>
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p><strong>âš ï¸ å¿…é¡»è­¦æƒ•çš„ç¼ºé™·ï¼šLua ä¹Ÿä¸å›æ»šï¼</strong>
è™½ç„¶ Lua è„šæœ¬è¢«ç§°ä¸ºâ€œåŸå­æ“ä½œâ€ï¼Œä½†è¯·æ³¨æ„ï¼šå®ƒçš„åŸå­æ€§ä¾ç„¶æŒ‡çš„æ˜¯<strong>ä¸è¢«æ‰“æ‰°</strong>ï¼Œè€Œä¸æ˜¯<strong>å¤±è´¥å›æ»š</strong>ã€‚</p>
<blockquote>
<p><strong>å¦‚æœ Lua è„šæœ¬è¿è¡Œåˆ°ä¸­é€”å‡ºé”™ï¼ˆæ¯”å¦‚è°ƒç”¨äº†ä¸å­˜åœ¨çš„å‘½ä»¤ï¼Œæˆ–æ˜¾å¼æŠ¥é”™é€€å‡ºï¼‰ï¼Œè„šæœ¬ä¼šåœæ­¢æ‰§è¡Œï¼Œä½†ä¹‹å‰å·²ç»æ‰§è¡Œè¿‡çš„å†™æ“ä½œï¼Œæ˜¯ä¸ä¼šè¢«æ’¤é”€çš„ï¼</strong></p>
</blockquote>
<p>è¿™æ„å‘³ç€ï¼Œå³ä½¿æ˜¯ Luaï¼Œä¹Ÿä¸èƒ½ç»™ä½ å¸¦æ¥ RDBMS é‚£ç§â€œå›æ»šä¸€åˆ‡â€çš„å®‰å…¨æ„Ÿã€‚ä½ ä¾ç„¶éœ€è¦åœ¨ä»£ç å±‚é¢ä¿è¯é€»è¾‘çš„ä¸¥å¯†æ€§ã€‚</p>
<hr/>
<h2 data-id="heading-10">å››ã€æ€»ç»“ï¼šé€‰å‹å†³ç­–è¡¨</h2>
<p>ä¸ºäº†è®©ä½ åœ¨å®é™…ä¸šåŠ¡ä¸­ä¸å†çº ç»“ï¼Œæˆ‘æ•´ç†äº†ä¸€ä»½ç®€å•çš„å†³ç­–è¡¨ï¼š</p>



































<table><thead><tr><th align="left">éœ€æ±‚åœºæ™¯</th><th align="left">æ¨èæ–¹æ¡ˆ</th><th align="left">æ ¸å¿ƒç†ç”±</th></tr></thead><tbody><tr><td align="left"><strong>ç®€å•æ‰¹é‡è¯»å†™ (KV)</strong></td><td align="left"><strong>MSET / MGET</strong></td><td align="left">åŸç”Ÿå‘½ä»¤ï¼Œæœ€å¿«ï¼Œæœ€çœå¿ƒã€‚</td></tr><tr><td align="left"><strong>å¤§é‡ç¦»æ•£å‘½ä»¤ (æ— å…³è”)</strong></td><td align="left"><strong>Pipeline</strong></td><td align="left">ç½‘ç»œå¼€é”€æœ€ä½ï¼Œååé‡æœ€é«˜ã€‚</td></tr><tr><td align="left"><strong>éœ€è¦ CAS (ä½å¹¶å‘)</strong></td><td align="left"><strong>WATCH + MULTI</strong></td><td align="left"><strong>äº‹åŠ¡å”¯ä¸€çš„ç”¨æ­¦ä¹‹åœ°ã€‚</strong> é€‚åˆä½é¢‘ç«äº‰ï¼Œå®ç°ç®€å•ã€‚</td></tr><tr><td align="left"><strong>å¤æ‚é€»è¾‘ / é«˜å¹¶å‘</strong></td><td align="left"><strong>Lua è„šæœ¬</strong></td><td align="left"><strong>è¡Œä¸šæ ‡å‡†ã€‚</strong> é¿å…äº† CAS è‡ªæ—‹çš„æ€§èƒ½å¼€é”€ï¼ŒåŸå­æ€§å¼ºã€‚</td></tr><tr><td align="left"><strong>å³ä½¿æŠ¥é”™ä¹Ÿè¦å›æ»š</strong></td><td align="left"><strong>MySQL / RDBMS</strong></td><td align="left"><strong>åˆ«ä¸ºéš¾ Redisã€‚</strong> å®ƒæ²¡æœ‰ Undo Logï¼Œåšä¸åˆ°çœŸæ­£çš„å›æ»šã€‚</td></tr></tbody></table>
<h2 data-id="heading-11">å†™åœ¨æœ€å</h2>
<p>å›å¤´çœ‹ï¼Œ<strong>Redis äº‹åŠ¡è¿™å¥—æœºåˆ¶ï¼Œå°±åƒæ˜¯ä¸€ä¸ªâ€œå¦‚æœä¸ä»”ç»†è¯»è¯´æ˜ä¹¦ä¸€å®šä¼šç”¨é”™â€çš„åŠæˆå“ã€‚</strong></p>
<p>ä½†æ­£æ˜¯è¿™ä¸ªâ€œåŠæˆå“â€ï¼ŒæŠ˜å°„å‡ºäº† Redis æœ€åº•å±‚çš„ä»·å€¼è§‚ï¼š<strong>ä¸ºäº†æ€§èƒ½ï¼Œå¯ä»¥ç‰ºç‰²ä¸€åˆ‡â€œçœ‹èµ·æ¥å¾ˆç¾â€çš„æŠ½è±¡</strong>ã€‚å®ƒæ‹’ç»äº†æ²‰é‡çš„ Undo Logï¼Œæ‹’ç»äº†å¤æ‚çš„éš”ç¦»çº§åˆ«ï¼Œåªç•™ä¸‹äº†ä¸€ä¸ªæœ€ç®€å•çš„â€œæ’é˜Ÿæ‰§è¡Œâ€é€»è¾‘ã€‚</p>
<p>æ‰€ä»¥ï¼Œå½“æˆ‘ä»¬ä¸‹æ¬¡å†å†™ä¸‹ <code>MULTI</code> çš„æ—¶å€™ï¼Œå¿ƒé‡Œè¦æ¸…æ¥šï¼š</p>
<ul>
<li>å¦‚æœåªæ˜¯ä¸ºäº†å¿«ï¼Œ<strong>Pipeline</strong> æ‰æ˜¯é‚£ä¸ªä¸è®²æ­¦å¾·çš„â€œåŠ é€Ÿå™¨â€ã€‚</li>
<li>å¦‚æœåªæ˜¯ä¸ºäº†é˜²æ’é˜Ÿï¼Œ<strong>Transaction</strong> å¤Ÿç”¨äº†ï¼Œä½†åœ¨é«˜å¹¶å‘ä¸‹ï¼Œå®ƒè„†å¼±å¾—åƒä¸ªæ˜“ç¢å“ã€‚</li>
<li>å¦‚æœè¦å¤„ç†çœŸæ­£çš„å¤æ‚é€»è¾‘ï¼Œè¯·æ¯«ä¸çŠ¹è±«åœ°æ‹¥æŠ± <strong>Lua</strong> â€”â€” è™½ç„¶å®ƒä¹Ÿä¸ä¼šå›æ»šï¼Œä½†è‡³å°‘åœ¨â€œæ‰§è¡ŒåŸå­æ€§â€ä¸Šï¼Œå®ƒæ˜¯æˆ‘ä»¬æ‰‹é‡Œæœ€ç¨³çš„é‚£å¼ ç‰Œã€‚</li>
</ul>
<p>çœŸæ­£çš„æŠ€æœ¯æˆç†Ÿï¼Œä¸æ˜¯èƒŒè¯µå…«è‚¡æ–‡é‡Œçš„ ACID å®šä¹‰ï¼Œè€Œæ˜¯æ‡‚å¾—åœ¨<strong>ç”±äºç‰©ç†é™åˆ¶è€Œæ»¡æ˜¯é—æ†¾çš„çœŸå®ä¸–ç•Œé‡Œ</strong>ï¼Œåšå‡ºé‚£ä¸ªæœ€ä¸åçš„é€‰æ‹©ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Android Studio Otter 3 å‘å¸ƒï¼šæ—¥å¸¸å¼€å‘é€‰ASè¿˜æ˜¯Cursorï¼Ÿ]]></title>    <link>https://juejin.cn/post/7603004323912286214</link>    <guid>https://juejin.cn/post/7603004323912286214</guid>    <pubDate>2026-02-05T07:46:17.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603004323912286214" data-draft-id="7603030564837343286" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Android Studio Otter 3 å‘å¸ƒï¼šæ—¥å¸¸å¼€å‘é€‰ASè¿˜æ˜¯Cursorï¼Ÿ"/> <meta itemprop="keywords" content="Android Studio,Cursor,Flutter"/> <meta itemprop="datePublished" content="2026-02-05T07:46:17.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºå‘˜è€åˆ˜"/> <meta itemprop="url" content="https://juejin.cn/user/662360127965769"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Android Studio Otter 3 å‘å¸ƒï¼šæ—¥å¸¸å¼€å‘é€‰ASè¿˜æ˜¯Cursorï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/662360127965769/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºå‘˜è€åˆ˜
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-05T07:46:17.000Z" title="Thu Feb 05 2026 07:46:17 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-05
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯è€åˆ˜</strong></p>
<p>å‰å‡ å¤©Android Studio Otter 3 å‘å¸ƒäº†ã€‚è¿™çœ‹èµ·æ¥ä¸æ˜¯ä¸€ä¸ªç‰¹åˆ«é‡å¤§çš„æ–°ç‰ˆæœ¬ï¼Œä½†æ˜¯å¯¹å½“å‰çš„å®¢æˆ·ç«¯å’ŒFlutterå¼€å‘è€…æ¥è¯´å´æ˜¯æœ‰ç€æ¯”è¾ƒå¤§çš„å½±å“ã€‚</p>
<p>è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆè€åˆ˜åšFlutterå¼€å‘7å¹´äº†ï¼Œå¹³æ—¶å¯¹sdkç‰ˆæœ¬å’ŒIDEçš„å‡çº§å¹¶ä¸ç§¯æï¼Œä½†æ˜¯è¿™ä¸ªç‰ˆæœ¬è¦å•ç‹¬è¯´ä¸€ä¸‹çš„åŸå› ã€‚</p>
<p>æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸‹AS Otter 3åšäº†å“ªäº›å‡çº§ï¼Œç„¶åæ¥èŠèŠå‡çº§åçš„ASå’ŒCursorè¿™æ ·çš„AI IDEç›¸æ¯”ï¼Œä½ è¯¥é€‰è°ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€Android Studio Otter 3 å‡çº§äº†å“ªäº›åŠŸèƒ½ï¼Ÿ</h2>
<h3 data-id="heading-1">1. AI æ¨¡å‹çµæ´»æ€§ä¸æœ¬åœ°åŒ–</h3>
<p>è¿™æ˜¯ AS è¿ˆå‘å¼€æ”¾çš„é‡è¦ä¸€æ­¥ï¼Œä¸å†å±€é™äºå†…ç½®æ¨¡å‹ã€‚ç°åœ¨ASç»ˆäºå‘å…¶å®ƒAI IDEçœ‹é½äº†ã€‚</p>
<p><strong>æ”¯æŒæœ¬åœ°æ¨¡å‹ (Local Models)</strong></p>
<p>å…è®¸å¼€å‘è€…é€šè¿‡ Ollama æˆ– LM Studio è¿è¡Œæœ¬åœ° LLMï¼ˆå¦‚ Llama 3, DeepSeek ç­‰ï¼‰ï¼Œæ»¡è¶³éšç§å®‰å…¨æˆ–ç¦»çº¿å¼€å‘éœ€æ±‚ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d0107dedefef41e3928ef4e18db28b49~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6ICB5YiY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770882379&amp;x-signature=2T9nVK8s88%2BrqwDPnAPHj4RdZrU%3D" alt="alt text" loading="lazy"/></p>
<p>å¾ˆå¤šå¤§å‚ç°åœ¨æœ‰è¿™æ–¹é¢çš„è§„å®šï¼Œæ¯”å¦‚è¦æ±‚åªèƒ½ä½¿ç”¨è‡ªå®¶çš„AI IDEã€‚</p>
<p>ä½†æ˜¯å®é™…æƒ…å†µæ˜¯å¯¹äºAndroidå¼€å‘æˆ–è€…Flutterå¼€å‘æ¥è¯´ï¼Œç›®å‰æ²¡æœ‰å·¥å…·èƒ½å®Œå…¨æ›¿ä»£ASåœ¨å®é™…å¼€å‘ä¸­çš„ä½œç”¨ã€‚</p>
<p><strong>æ”¯æŒè‡ªå®šä¹‰ Gemini API Key</strong></p>
<p>å¼€å‘è€…å¯ä»¥å¡«å…¥è‡ªå·±çš„ API Keyï¼Œä»è€Œç›´æ¥è°ƒç”¨ Google æœ€æ–°çš„ Gemini 3 Pro å’Œ Gemini 3 Flash æ¨¡å‹ã€‚</p>
<p>è¿™æ ·å¯ä»¥è·å¾—æ›´å¤§çš„ä¸Šä¸‹æ–‡çª—å£ï¼ˆContext Windowï¼‰å’Œæ›´é«˜çš„é…é¢ï¼Œç‰¹åˆ«é€‚åˆå¤„ç†å¤æ‚çš„ä»£ç åº“ã€‚</p>
<p><strong>è¿œç¨‹æ¨¡å‹æ”¯æŒ</strong></p>
<p>å…è®¸æ¥å…¥ OpenAI (GPT)ã€Anthropic (Claude) ç­‰ç¬¬ä¸‰æ–¹è¿œç¨‹æ¨¡å‹ï¼Œéœ€é…ç½® API ç«¯ç‚¹å’Œå¯†é’¥ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0770a77878774714bd2cdeabeacef5bc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6ICB5YiY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770882379&amp;x-signature=MCA8%2BWEfMgogSGjEvgip7QZ36%2BA%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-2">2. æ™ºèƒ½ä½“æ¨¡å¼ (Agent Mode) å¢å¼º</h3>
<p>AS çš„ Agent Mode å˜å¾—æ›´åƒä¸€ä¸ªå…¨èƒ½ç»“å¯¹ç¨‹åºå‘˜ï¼Œå…·å¤‡äº†æ„ŸçŸ¥å’Œæ“ä½œè®¾å¤‡çš„èƒ½åŠ›ã€‚</p>
<p><strong>è®¾å¤‡äº¤äº’ä¸éªŒè¯ (Device Actions)</strong></p>
<p>Agent ç°åœ¨ä¸ä»…ä»…æ˜¯å†™ä»£ç ï¼Œè¿˜å¯ä»¥ éƒ¨ç½²åº”ç”¨åˆ°è®¾å¤‡ ï¼Œå¹¶çœ‹åˆ°å±å¹•å†…å®¹ã€æ£€æŸ¥ Logcat æ—¥å¿—ã€‚</p>
<p>ä¹Ÿå°±æ˜¯è¯´å®ƒå¯ä»¥åœ¨ä¿®æ”¹ä»£ç åï¼Œè‡ªåŠ¨è¿è¡Œ App å¹¶éªŒè¯ä¿®å¤æ˜¯å¦ç”Ÿæ•ˆã€‚</p>
<p><strong>å˜æ›´æŠ½å±‰ (Changes Drawer)</strong></p>
<p>æ–°å¢äº†ä¸€ä¸ªä¸“é—¨çš„é¢æ¿æ¥ç®¡ç† Agent äº§ç”Ÿçš„ä»£ç å˜æ›´ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/87ba4fec029548a898dcf3179925fc91~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6ICB5YiY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770882379&amp;x-signature=qK2xffInzDTGr%2FuIqpwhJY4Kvjo%3D" alt="" loading="lazy"/></p>
<p>å¼€å‘è€…å¯ä»¥æŸ¥çœ‹æ‰€æœ‰ä¿®æ”¹çš„æ–‡ä»¶åˆ—è¡¨ï¼Œé€šè¿‡ Diff è§†å›¾é€ä¸ªå®¡æŸ¥ã€æ¥å—æˆ–å›æ»šæ›´æ”¹ï¼Œè§£å†³äº† AI ä¹±æ”¹ä»£ç éš¾ä»¥è¿½è¸ªçš„é—®é¢˜ã€‚</p>
<p><strong>å¤šçº¿ç¨‹å¯¹è¯ (Multiple Conversation Threads)</strong></p>
<p>æ”¯æŒåŒæ—¶è¿›è¡Œå¤šä¸ªç‹¬ç«‹çš„å¯¹è¯çº¿ç¨‹ï¼Œé¿å…ä¸åŒä»»åŠ¡çš„ä¸Šä¸‹æ–‡æ··æ·†ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/350d6d1a099f41749c3c86fbfb25066d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6ICB5YiY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770882379&amp;x-signature=j9KdS2DWJV4h%2BBrisAo5v%2BjwHnQ%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-3">3. å¼€å‘ä¸æµ‹è¯•æ–°ä½“éªŒ</h3>
<p><strong>Journeys (è‡ªç„¶è¯­è¨€ UI æµ‹è¯•)</strong></p>
<p>éœ€åœ¨ Studio Labs ä¸­å¼€å¯</p>
<p>åˆ©ç”¨ Gemini çš„è§†è§‰å’Œæ¨ç†èƒ½åŠ›ï¼Œå¼€å‘è€…å¯ä»¥ç”¨è‡ªç„¶è¯­è¨€ç¼–å†™ç«¯åˆ°ç«¯çš„ UI æµ‹è¯•ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d7e04accfce74de1b0816493a4e3bc3c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6ICB5YiY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770882379&amp;x-signature=eFYgCaOL3Allqx3IDHwC0jKxBNw%3D" alt="" loading="lazy"/></p>
<p>Gemini ä¼šå°†â€œç‚¹å‡»ç™»å½•æŒ‰é’®â€è¿™æ ·çš„æŒ‡ä»¤è½¬æ¢ä¸ºå®é™…çš„æµ‹è¯•æ“ä½œï¼Œå¹¶æ ¹æ®å±å¹•è§†è§‰å†…å®¹è¿›è¡Œæ–­è¨€ï¼Œæ¯”ä¼ ç»Ÿçš„ View æŸ¥æ‰¾æ–¹å¼æ›´ç¨³å¥ã€‚</p>
<p><strong>Logcat è‡ªåŠ¨ R8 åæ··æ·†</strong></p>
<p>åœ¨ä½¿ç”¨ AGP 9.0 (æˆ– 8.12+) ä¸”å¼€å¯ R8 ( minifyEnabled = true ) æ—¶ï¼ŒLogcat ç°åœ¨ä¼šè‡ªåŠ¨è¿˜åŸï¼ˆRetraceï¼‰å †æ ˆä¿¡æ¯ï¼Œæ— éœ€å†æ‰‹åŠ¨ä½¿ç”¨å‘½ä»¤è¡Œå·¥å…·è¿›è¡Œæ˜ å°„ï¼Œæå¤§æ–¹ä¾¿äº† Release åŒ…çš„ Crash æ’æŸ¥ã€‚</p>
<p>è¯è¯´è¿™ä¸€ç‚¹æ˜¯è€åˆ˜è¿™æ ·çš„ä¼ä¸šå¼€å‘è€…éå¸¸éœ€è¦çš„ï¼Œå¯¹äºå®šä½çº¿ä¸Šé—®é¢˜å¯ä»¥çœä¸å°‘äº‹ã€‚</p>
<h3 data-id="heading-4">4. æ”¯æŒAGP 9.0</h3>
<p>ä¸‹è¡¨åˆ—å‡ºäº†å„ä¸ª Android Studio ç‰ˆæœ¬éœ€è¦çš„ AGP ç‰ˆæœ¬ã€‚</p>













































<table><thead><tr><th>Android Studio ç‰ˆæœ¬</th><th>AGP ç‰ˆæœ¬</th></tr></thead><tbody><tr><td>Otter 3 åŠŸèƒ½æ›´æ–° | 2025.2.3</td><td>4.0â€“9.0</td></tr><tr><td>Otter 2 åŠŸèƒ½æ›´æ–° | 2025.2.2</td><td>4.0â€“8.13</td></tr><tr><td>Otter | 2025.2.1</td><td>4.0â€“8.13</td></tr><tr><td>Narwhal 4 åŠŸèƒ½æ›´æ–° | 2025.1.4</td><td>4.0â€“8.13</td></tr><tr><td>Narwhal 3 åŠŸèƒ½æ›´æ–° | 2025.1.3</td><td>4.0â€“8.13</td></tr><tr><td>Narwhal åŠŸèƒ½æ›´æ–° | 2025.1.2</td><td>4.0â€“8.12</td></tr><tr><td>Narwhal | 2025.1.1</td><td>3.2â€“8.11</td></tr><tr><td>Meerkat åŠŸèƒ½æ›´æ–° | 2024.3.2</td><td>3.2â€“8.10</td></tr><tr><td>Meerkat | 2024.3.1</td><td>3.2â€“8.9</td></tr></tbody></table>
<h2 data-id="heading-5">äºŒã€æ—¥å¸¸å¼€å‘é€‰ASè¿˜æ˜¯Cursorï¼ˆFlutter å¼€å‘è€…è§†è§’ï¼‰ ï¼Ÿ</h2>
<p>äºæ˜¯ä¸€ä¸ªé—®é¢˜å°±å‡ºç°äº†ï¼šæ—¥å¸¸å¼€å‘é€‰ASè¿˜æ˜¯Cursor / Trae è¿™æ ·çš„AI IDE ï¼Ÿ</p>
<h3 data-id="heading-6">1. AI IDEèƒ½å®Œå…¨æ›¿ä»£ASå—ï¼ˆFlutter å¼€å‘è€…è§†è§’ï¼‰ï¼Ÿ</h3>
<p>æ¯”å¦‚è€åˆ˜è‡ªå·±ï¼Œè¿‘å‡ ä¸ªæœˆæ¥ï¼Œç”¨Cursoræˆ–è€…Traeçš„æ—¶é—´è¶Šæ¥è¶Šå¤šäº†ã€‚</p>
<p>å…¶å®è¿™ä¸­é—´ä¸€ä¸ªæœ€é‡è¦çš„å½±å“å› ç´ æ˜¯æ€§ä»·æ¯”ã€‚</p>
<p>æ¯”å¦‚Trae æ¯ä¸ªæœˆ10åˆ€ï¼Œè™½ç„¶æ²¡æœ‰äº†Claudeæ¨¡å‹ï¼Œä½†æ˜¯Gemini 3 Pro ç”¨èµ·æ¥ä¹Ÿè¿˜æ˜¯ä¸é”™çš„ã€‚</p>
<p>è¿™æ˜¯ç›®å‰è€åˆ˜ä½¿ç”¨çš„æœ€å…·æ€§ä»·æ¯”çš„æ–¹æ¡ˆäº†ï¼Œè€Œä¸”è¿˜ä¸ç”¨æ¯æ¬¡å†™ä»£ç éƒ½è€ƒè™‘ç½‘ç»œé—®é¢˜ã€‚</p>
<p>Cursor è™½ç„¶è¦20åˆ€ï¼Œä½†æ˜¯å®ƒçš„åŠŸèƒ½æ›´åŠ å¼ºå¤§ï¼Œè€Œä¸”å¯ä»¥ç”¨claudeç³»åˆ—æ¨¡å‹ã€‚</p>
<p>é‚£ä¹ˆ Trae æˆ–è€… Cursorèƒ½å®Œå…¨æ›¿ä»£ASå—ï¼Ÿ</p>
<p><strong>ç­”æ¡ˆæ˜¯å¦å®šçš„ã€‚</strong></p>
<p>æ ¹æœ¬åŸå› åœ¨äºAIåœ¨å¤§å‹é¡¹ç›®ç‰¹åˆ«æ˜¯ä¼ä¸šé¡¹ç›®çš„å¼€å‘ä¸­è¿˜æ²¡åŠæ³•å®Œå…¨æ›¿ä»£ç¨‹åºå‘˜çš„ä½œç”¨ã€‚</p>
<h4 data-id="heading-7">ä¸ªäººå¼€å‘å’Œä¼ä¸šå¼€å‘çš„å·®å¼‚ï¼ˆFlutter å¼€å‘è€…è§†è§’ï¼‰</h4>
<p>è¿™å¯èƒ½æ˜¯å¾ˆå¤šäººçš„ä¸€ä¸ªè¯¯åŒºï¼Œè§‰å¾—AIç°åœ¨ä»€ä¹ˆæ ·çš„ä»£ç éƒ½èƒ½å†™å‡ºæ¥ï¼Œåº”è¯¥èƒ½ä»£æ›¿å¤§éƒ¨åˆ†å¼€å‘è€…äº†ã€‚</p>
<p>æ¯”å¦‚ä½ å¯èƒ½ä¸€å¥è¯å°±å¯ä»¥åˆ©ç”¨AIå†™ä¸€ä¸ªå¾ˆæ¼‚äº®çš„Appã€‚</p>
<p>ä½†æ˜¯å®é™…ä¸Šä¼ä¸šå¼€å‘å’Œå¾ˆå¤šä¸ªäººå¼€å‘è€…å¼€å‘æ˜¯å®Œå…¨ä¸åŒçš„å·¥ä½œæ–¹å¼ã€‚</p>
<p><strong>å¯¹ä¸ªäººå¼€å‘è€…æ¥è¯´</strong></p>
<p>é‡è¦çš„æ˜¯çœ‹åˆ°éœ€æ±‚å’Œå¸‚åœºï¼Œç„¶ååˆ©ç”¨AIå¿«é€Ÿå®ç°æƒ³è¦çš„åŠŸèƒ½ã€‚</p>
<p>è¿™ç§æƒ…å†µä¸‹åªè¦AIå†™å‡ºæ¥çš„ä»£ç åŠŸèƒ½æ­£ç¡®ï¼Œç•Œé¢æ¼‚äº®ï¼Œé‚£ä¹ˆå°±å¯ä»¥å‘å¸ƒï¼Œç„¶åå†æ ¹æ®ç”¨æˆ·çš„åé¦ˆè¿›è¡Œè¿­ä»£ã€‚</p>
<p>æ¯”å¦‚ä½ è®©AIå†™ä¸€ä¸ªç™»å½•é¡µé¢ï¼Œä»–å°±èƒ½è‡ªåŠ¨å®ç°ä¸€ä¸ªæ¼‚äº®çš„ç™»å½•ç•Œé¢ï¼Œè€Œä¸”åŠŸèƒ½ä¹Ÿæ¯”è¾ƒå®Œå–„ã€‚</p>
<p><strong>å¯¹ä¼ä¸šå¼€å‘è€…æ¥è¯´</strong></p>
<p>å¼€å‘è€…éœ€è¦100%çš„å®ç°äº§å“å›¢é˜Ÿéœ€æ±‚æè¿°ä¸­çš„æ¯ä¸€ä¸ªç»†èŠ‚ã€‚</p>
<p>UIä¸Šï¼Œä½ çš„æ¯ä¸€ä¸ªåƒç´ ã€æ¯ä¸€ä¸ªäº¤äº’çš„ç»†èŠ‚ï¼Œéƒ½éœ€è¦100% çš„è¿˜åŸUI/UE è®¾è®¡ï¼Œè€Œä¸æ˜¯ç”¨AIå®ç°ä¸€ä¸ªå·®ä¸å¤šçš„ä¸œè¥¿ã€‚</p>
<p>åœ¨åŠŸèƒ½é€»è¾‘ä¸Šæ›´æ˜¯å¦‚æ­¤ã€‚</p>
<p>å¾ˆå¤šåŠŸèƒ½çš„ç»†èŠ‚æ˜¯è¿è¥ã€äº§å“ã€å¼€å‘ã€æµ‹è¯•å¤šä¸ªå›¢é˜Ÿçš„äººååœ¨ä¸€èµ·è®¨è®ºå‡ºæ¥çš„ï¼Œè™½ç„¶æœ€åä¼šè½åœ¨éœ€æ±‚è§„æ ¼è¯´æ˜ä¹¦è¿™æ ·çš„æ–‡æ¡£ä¸­ï¼Œä½†æ˜¯æ–‡æ¡£æ¯•ç«Ÿæ²¡åŠæ³•å®Œå…¨æè¿°å‡ºæ¯ä¸€ä¸ªç»†èŠ‚ã€‚</p>
<p>æ‰€ä»¥å®é™…å¼€å‘ä¸­æœ‰å¾ˆå¤šä¸œè¥¿è¿˜æ˜¯åªå­˜åœ¨äºå¼€å‘è€…çš„è„‘æµ·ä¸­ï¼Œæˆ–è€…æ˜¯éšæ—¶ä¸äº§å“å›¢é˜Ÿè¿›è¡Œæ²Ÿé€šã€‚</p>
<p>æ‰€ä»¥ç»™AIä¸€ä¸ªéœ€æ±‚è¯´æ˜æ–‡æ¡£ï¼Œç„¶åAIå®ç°ä¸€ä¸ªå·®ä¸å¤šçš„ä»£ç ï¼Œæ˜¯å®Œå…¨è¡Œä¸é€šçš„ã€‚</p>
<p>æœ€åè¿˜æ˜¯éœ€è¦å¼€å‘è€…è‡ªå·±å»å®ç°æˆ–è€…è°ƒæ•´å¾ˆå¤šçš„ç»†èŠ‚ã€‚</p>
<p>åœ¨è¿™ç§æƒ…å†µä¸‹ç‰¹åˆ«æ˜¯å®¢æˆ·ç«¯é¡¹ç›®ä¸­ï¼Œä¸ç®¡æ˜¯AndroidåŸç”Ÿè¿˜æ˜¯Flutteré¡¹ç›®ï¼ŒASå¯¹å¼€å‘æ¥è¯´æ•ˆç‡éƒ½ä¼šæ›´é«˜ä¸€äº›ã€‚</p>
<h4 data-id="heading-8">ASåœ¨bugå®šä½å’Œæ€§èƒ½åˆ†ææ–¹é¢æ›´æ–¹ä¾¿</h4>
<p>AS å¯¹ bug å®šä½å’Œæ€§èƒ½åˆ†ææä¾›äº†æ›´æ–¹ä¾¿çš„å·¥å…·å’ŒåŠŸèƒ½ã€‚</p>
<p>æ¯”å¦‚æˆ‘ä»¬å‰é¢æåˆ°çš„è¿™æ¬¡ASæ›´æ–°çš„åŠŸèƒ½ï¼Œ<strong>Logcat è‡ªåŠ¨ R8 åæ··æ·†</strong>ã€‚</p>
<p>å†æ¯”å¦‚ï¼ŒAS è¿˜æä¾›äº†æ€§èƒ½åˆ†æå·¥å…·ï¼Œå¦‚ Profiler å¯ä»¥å¸®åŠ©å¼€å‘è€…åˆ†æåº”ç”¨çš„æ€§èƒ½ç“¶é¢ˆï¼Œä¼˜åŒ–åº”ç”¨çš„æ€§èƒ½ã€‚</p>
<p>è™½ç„¶ä¹Ÿæœ‰ä¸€äº›ç½‘é¡µç‰ˆçš„å·¥å…·æ¯”å¦‚Flutterçš„dev toolsï¼Œä½†æ˜¯å§‹ç»ˆæ²¡æœ‰ASå†…éƒ¨çš„é¡ºæ‰‹ä¸”æ–¹ä¾¿ã€‚</p>
<h3 data-id="heading-9">2. æ—¥å¸¸å¼€å‘Flutteré¡¹ç›®ï¼Œè€åˆ˜ç”¨å•¥å·¥å…·ï¼Ÿ</h3>
<p>æ—¥å¸¸å¼€å‘Flutteré¡¹ç›®çš„æ—¶å€™è€åˆ˜åˆ°åº•æ˜¯ç”¨Traeè¿˜æ˜¯ASå‘¢ï¼Ÿ</p>
<p>ç­”æ¡ˆæ˜¯ä¸¤ä¸ªéƒ½ç”¨ã€‚</p>
<h4 data-id="heading-10">æ–¹æ¡ˆè®¾è®¡ç”¨Trae</h4>
<p>åœ¨çœŸæ­£å¼€å§‹å†™ä»£ç å‰ï¼Œé€šå¸¸æˆ‘ä¼šå’ŒAIè®¨è®ºä¸€ä¸‹æ¶æ„æ–¹æ¡ˆã€‚</p>
<p>æ¯”å¦‚æ¨¡å—å¦‚ä½•æ‹†åˆ†ï¼Œæ•°æ®æµå¦‚ä½•è®¾è®¡ç­‰ç­‰ã€‚</p>
<h4 data-id="heading-11">å¤§å—ä»£ç ç”¨Trae</h4>
<p>å› ä¸ºè€åˆ˜å·¥ä½œä¸­å¤§éƒ¨åˆ†çš„é¡¹ç›®åŸºç¡€è®¾æ–½å·²ç»å°è£…å“ˆäº†ï¼Œå³ä½¿å¼€æ–°çš„Appï¼Œå¤§æ¦‚ç‡ä¹Ÿä¼šåŸºäºè¿™äº›åŸºç¡€è®¾æ–½è¿›è¡Œå¼€å‘ã€‚</p>
<p>æ¯”å¦‚Flutterçš„çŠ¶æ€ç®¡ç†ã€è·¯ç”±ç®¡ç†ã€åº•å±‚æ•°æ®åº“ã€æœåŠ¡ç«¯æ¥å£ç­‰ç­‰ï¼Œéƒ½æœ‰ç°æˆçš„å°è£…å¥½çš„ä»£ç å¯ä»¥ç”¨ã€‚</p>
<p>æ‰€ä»¥æˆ‘é€šå¸¸å¯ä»¥åœ¨é¡¹ç›®çš„æ—©æœŸå°±è¿›å…¥ä¸šåŠ¡é€»è¾‘çš„å¼€å‘é˜¶æ®µã€‚</p>
<p>è¿™ä¸ªé˜¶æ®µæˆ‘ä¸»è¦ç”¨çš„æ˜¯Traeï¼Œå› ä¸ºå®ƒä¾¿å®œã€‚</p>
<p>æ³¨æ„è¿™é‡Œå¹¶ä¸æ˜¯è¯´ä¸€æ¬¡äº¤ç»™AIä¸€ä¸ªé¡µé¢ï¼Œè®©ä»–ä¸€æ¬¡æ€§å®Œæˆã€‚</p>
<p>æˆ‘ä¼šåˆ†æˆå¤šä¸ªæ­¥éª¤ã€‚</p>
<p>æ¯”å¦‚å…ˆç”Ÿæˆä¸€ä¸ªé¡µé¢æ¡†æ¶ï¼ŒæŠŠæ ‡é¢˜ã€é¡µé¢ç»“æ„ã€èƒŒæ™¯è‰²ç­‰åŸºæœ¬å…ƒç´ å…ˆå†™å¥½ã€‚</p>
<p>ç„¶åå°†é¡µé¢çš„å…·ä½“å†…å®¹åˆ†æˆå‡ ä¸ªæ¨¡å—ã€‚</p>
<p>æ¯ä¸ªæ¨¡å—å•ç‹¬è®©Traeå®ç°ã€‚</p>
<p>æ¯”å¦‚å…ˆå®ç°ä¸€ä¸ªå•†å“æè¿°å¡ç‰‡ï¼Œç„¶åå®ç°ç±»ä¼¼å•†å“æ¨èå¡ç‰‡ã€‚</p>
<p>æ¯ä¸ªæ¨¡å—å®ç°å®Œåï¼Œå…ˆæ£€æŸ¥ä¸€ä¸‹ä»£ç æ˜¯å¦ç¬¦åˆè§„èŒƒï¼Œæ˜¯å¦æœ‰é”™è¯¯ã€‚</p>
<p>å¦‚æœæœ‰é”™è¯¯ï¼Œå’ŒAIè¿›è¡Œæ²Ÿé€šï¼Œç„¶åä¸€èµ·è§£å†³ã€‚</p>
<p>è¿™ä¸ªè¿‡ç¨‹ä¸­éœ€è¦AIè¿›è¡Œå¤šæ¬¡æ²Ÿé€šï¼Œç›´åˆ°æ¨¡å—å®ç°ç¬¦åˆé¢„æœŸã€‚</p>
<h4 data-id="heading-12">ç»†èŠ‚è°ƒæ•´ç”¨AS</h4>
<p>å‰é¢è¯´äº†ï¼ŒAIæ²¡åŠæ³•100%çš„å®Œæˆéœ€æ±‚çš„æ‰€æœ‰ç»†èŠ‚ã€‚</p>
<p>å› æ­¤Traeå®ç°çš„ä»£ç åªæ˜¯ä¸€ä¸ªåˆå§‹ç‰ˆæœ¬ï¼Œéœ€è¦å¼€å‘è€…è‡ªå·±å»è°ƒæ•´å’Œå®Œå–„ã€‚</p>
<p>å…¶ä¸­æ¯”è¾ƒç®€å•çš„é—®é¢˜ç›´æ¥åœ¨Traeä¸­å°±ä¿®æ”¹äº†ï¼Œæ¯”å¦‚å¸ƒå±€é—®é¢˜ã€‚</p>
<p>æœ‰äº›é—®é¢˜å’ŒAIå¤šæ¬¡æ²Ÿé€šéƒ½æ²¡åŠæ³•å¾ˆå¥½çš„è§£å†³ï¼Œæ¯”å¦‚ä¸€äº›æ¯”è¾ƒå¤æ‚çš„äº¤äº’é€»è¾‘ã€‚</p>
<p>è¿™ç§é—®é¢˜å¯èƒ½å°±ä¼šæ”¾åˆ°ASä¸­è‡ªå·±å»å®ç°ã€‚</p>
<p>ä½†æ˜¯è¿™ä¸ªåˆ‡æ¢ä¸æ˜¯å¾ˆé¢‘ç¹ã€‚</p>
<p>æ¯”å¦‚ä»Šå¤©ä¸»è¦ç”¨Traeå®ç°å¤§éƒ¨åˆ†ä»£ç ï¼Œé‚£å³ä½¿è¦è‡ªå·±å†™ä¸€äº›ä»£ç ï¼Œå°±ä¹Ÿä¼šåœ¨Traeä¸­å®Œæˆã€‚</p>
<p>ç­‰ç¬¬äºŒå¤©ä¸Šç­æƒ³æƒ³ä»Šå¤©çš„ä»»åŠ¡ä¸»è¦æ˜¯è‡ªå·±å†™ï¼Œé‚£å°±ä¼šåœ¨ASä¸­å®Œæˆã€‚</p>
<h4 data-id="heading-13">bugä¿®å¤ä¸»è¦ç”¨AS</h4>
<p>ä»£ç å®Œæˆæäº¤æµ‹è¯•åå¤§æ¦‚ç‡ä¼šæœ‰ä¸€äº›bugï¼ˆå…¶å®æˆ‘ä»¬ç”¨TDDä¼šé¿å…å¾ˆå¤šbugï¼Œä½†æ²¡æ³•åšåˆ°å®Œå…¨æ²¡æœ‰ï¼‰ã€‚</p>
<p>è¿™ç§æƒ…å†µä¸‹å®šä½bugå¯èƒ½æ›´å¤šçš„æ˜¯åœ¨ASä¸­ã€‚</p>
<p>ä»¥ä¸ºç»è¿‡TDDçš„éªŒè¯ï¼Œé‚£äº›ç®€å•çš„bugæ˜¯ä¸ä¼šè¿›å…¥åˆ°æµ‹è¯•ç¯å¢ƒçš„ã€‚</p>
<p>æ‰€ä»¥è¿™ä¸ªé˜¶æ®µæ”¶åˆ°çš„bugåŸºæœ¬éƒ½æ˜¯æ¯”è¾ƒå¤æ‚çš„ï¼Œæ¯”å¦‚é‚£äº›éš¾ä»¥å¤ç°çš„ï¼Œæˆ–è€…éš¾ä»¥å®šä½çš„ã€‚</p>
<p>è¿™ç§bugäº¤ç»™AIé€šå¸¸æ•ˆæœå¹¶ä¸ç†æƒ³ã€‚å› ä¸ºAIå¹¶ä¸èƒ½çœŸæ­£ç†è§£ä½ çš„é—®é¢˜ï¼Œå®ƒåªæ˜¯ä¸€ä¸ªåŸºäºæ¦‚ç‡çš„æ¨¡å¼åŒ¹é…çš„æœºå™¨ã€‚</p>
<p>æ‰€ä»¥åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒASçš„bugå®šä½å’Œä¿®å¤å·¥å…·å°±ä¼šéå¸¸æ–¹ä¾¿ã€‚</p>
<p>å¥½äº†ï¼Œæ€»ç»“ä¸€ä¸‹å°±æ˜¯ç°é˜¶æ®µAIå¹¶ä¸èƒ½å®Œå…¨æ›¿ä»£ç¨‹åºå‘˜å®Œæˆå¼€å‘å·¥ä½œï¼Œç‰¹åˆ«æ˜¯åœ¨ä¼ä¸šçº§é¡¹ç›®çš„å¼€å‘ä¸­ã€‚æ‰€ä»¥è€åˆ˜è‡ªå·±ç›®å‰çš„å®é™…ç”¨æ³•æ˜¯Traeå’ŒASæ··åˆä½¿ç”¨ã€‚</p>
<h2 data-id="heading-14">ä¸‰ã€ä¸ºå•¥ä¸æClaude Codeï¼Ÿ</h2>
<p>åˆ°è¿™é‡Œå¯èƒ½å¾ˆå¤šäººæœ‰ç–‘é—®ï¼Œä¸ºå•¥æ²¡æœ‰æClaude Codeè¿™ç±»å¼€å‘å·¥å…·ï¼Ÿå…¶å®æœ‰ä¸¤ä¸ªåŸå› </p>
<h3 data-id="heading-15">1. åŸºäºç»ˆç«¯çš„AIå¼€å‘å·¥å…·ä¸é™IDE</h3>
<p>è€åˆ˜è§‰å¾—è¿™æ˜¯åŸºäºcliçš„å¼€å‘å·¥å…·æœ€èªæ˜çš„åœ°æ–¹ï¼Œé¿å¼€äº†å’Œå„ç§IDEçš„ç›´æ¥ç«äº‰ï¼Œå¯ä»¥æ— ç¼è¡”æ¥åˆ°ä»»ä½•ä¸€ä¸ªIDEä¸­ã€‚</p>
<p>ä½†æ˜¯è¿˜æ˜¯è¦è¯´å›æ¥ï¼ŒCLIç±»çš„å¼€å‘å·¥å…·æ¯•ç«Ÿæ— æ³•å®Œå…¨ä»£æ›¿IDEã€‚</p>
<p>å°±å¥½åƒæˆ‘ä»¬å‰é¢è¯´çš„ï¼Œç°é˜¶æ®µåœ¨ä¼ä¸šçº§å¼€å‘ä¸­AIè¿˜æ²¡åŠæ³•100%å®Œæˆéœ€æ±‚</p>
<p>æ—¢ç„¶è¿˜éœ€è¦å¼€å‘è€…çš„å¹²é¢„ï¼Œé‚£ä¹ˆå°±è¿˜æ˜¯æ— æ³•ç»•å¼€IDEè€Œå®Œå…¨åˆ‡æ¢åˆ°çº¯cliå¼€å‘å·¥å…·ä¸Šã€‚</p>
<h3 data-id="heading-16">2. æ€§ä»·æ¯”ä¸é«˜</h3>
<p>è€åˆ˜ç”¨Claude Codeçš„æ—¶é—´å…¶å®ä¹Ÿä¸ç®—çŸ­ã€‚æ€»ç»“Claude Codeæœ‰ä¸¤ä¸ªé—®é¢˜</p>
<p><strong>ç¬¬ä¸€ä¸ªæ˜¯å®˜æ–¹è´¦å·å¤ªå®¹æ˜“å°å·äº†ã€‚</strong></p>
<p>è€åˆ˜è‡ªå·±è¢«å°äº†ä¸¤ä¸ªè´¦å·ï¼Œèº«è¾¹çš„åŒäº‹ä¹ŸåŸºæœ¬éƒ½æœ‰ä¸­æ‹›çš„ã€‚</p>
<p>è¿™å°±é€ æˆäº†ç”¨èµ·æ¥å¾ˆä¸ç¨³å®šï¼Œè€Œä¸”æå¿ƒåŠèƒ†çš„ã€‚</p>
<p>æ‰€æœ‰ç¬¬äºŒä¸ªè´¦å·è¢«å°åï¼Œè€åˆ˜å°±ç›´æ¥è½¬ç”¨å›½å†…çš„APIä»£ç†äº†ã€‚</p>
<p><strong>ç¬¬äºŒä¸ªæ˜¯ä»·æ ¼è¾ƒé«˜</strong></p>
<p>å…¶å®claudeå®˜æ–¹è´¦å·æœ¬èº«è®¢é˜…å°±ä¸ä¾¿å®œã€‚</p>
<p>ç›¸ä¿¡ç›®å‰æ„¿æ„ç»™å‘˜å·¥ä»˜è´¹claudeè´¦å·çš„å…¬å¸å¯¥å¯¥å¯æ•°å§ï¼Ÿ</p>
<p>å¦‚æœè®©å‘˜å·¥è‡ªå·±ä¹°ï¼Œé‚£ç›¸å½“äºä»˜è´¹ä¸Šç­äº†ï¼Œè¿™ä¸ªå¯¹å¤§å¤šæ•°ç‰›é©¬æ¥è¯´ä¼°è®¡æ˜¯ä¸ä¼šå¹²çš„ã€‚</p>
<p>æ‰€ä»¥å®˜æ–¹è®¢é˜…å…¶å®æ›´é€‚åˆé‚£äº›ç‹¬ç«‹å¼€å‘è€…ã€‚</p>
<p>æ¯”å¦‚å¦‚æœè€åˆ˜å»å†™åç«¯ä»£ç ï¼Œå› ä¸ºæˆ‘è‡ªå·±ä¹Ÿä¸ç†Ÿï¼Œæ‰€ä»¥å¯èƒ½å°±éœ€è¦å’Œé€šè¿‡AIè¿›è¡Œåå¤çš„ä¿®æ”¹ã€‚</p>
<p>è¿™æ—¶å€™å®˜æ–¹çš„è®¢é˜…åŸºæœ¬ä¸Šèƒ½é”å®šä¸€ä¸ªå°é¡¶çš„ä»·æ ¼ï¼Œæ€»çš„æ¥è¯´å°±è¿˜æ˜¯æ¯”è¾ƒåˆé€‚çš„ã€‚</p>
<p>é‚£å›½å†…çš„ APIä»£ç†æ€ä¹ˆæ ·å‘¢ï¼Ÿ</p>
<p>è¿™ä¸ªæœ€å¤§çš„é—®é¢˜æ˜¯å¤§å¤šæ•°ä»£ç†éƒ½æ˜¯æŒ‰ä½¿ç”¨é‡æ”¶è´¹ï¼Œå°‘æœ‰åŒ…æœˆçš„ï¼Œæˆ–è€…åŒ…æœˆæ¯”å®˜æ–¹è¿˜è´µã€‚</p>
<p>æŒ‰ä½¿ç”¨é‡çš„è¯ï¼Œè€åˆ˜å»ºè®®ä¸è¦è½»æ˜“å°è¯•ï¼ŒåŸºæœ¬ä¸Šæ˜¯ å‡ ç¾åˆ€æ¯å°æ—¶çš„æ ·å­ã€‚</p>
<h2 data-id="heading-17">å››ã€æ€»ç»“</h2>
<p>æ€»çš„æ¥è¯´Android Studio Otter 3 çš„å‘å¸ƒï¼Œæ ‡å¿—ç€å®˜æ–¹ IDE åœ¨å¼€æ”¾æ€§å’Œæ™ºèƒ½åŒ–ä¸Šè¿ˆå‡ºäº†é‡è¦ä¸€æ­¥ï¼Œç‰¹åˆ«æ˜¯æœ¬åœ°æ¨¡å‹æ”¯æŒå’Œ Agent æ¨¡å¼çš„å¢å¼ºï¼Œè®©å®ƒåœ¨ä¸“ä¸šå¼€å‘é¢†åŸŸä¾ç„¶ç¨³å›ºã€‚</p>
<p>ä½†åœ¨ AI ç¼–ç¨‹æµªæ½®ä¸‹ï¼ŒCursor å’Œ Trae ç­‰æ–°å…´ IDE å‡­å€Ÿæé«˜çš„å¼€å‘æ•ˆç‡å’Œæ€§ä»·æ¯”ï¼Œæ­£åœ¨é‡å¡‘æˆ‘ä»¬çš„ç¼–ç ä¹ æƒ¯ã€‚å¯¹äºå¼€å‘è€…ï¼ˆå°¤å…¶æ˜¯ Flutter å¼€å‘è€…ï¼‰æ¥è¯´ï¼Œè¿™å¹¶éæ˜¯ä¸€åœºéæ­¤å³å½¼çš„æ·˜æ±°èµ›ï¼Œè€Œæ˜¯ä¸€æ¬¡å·¥å…·ç®±çš„å‡çº§ã€‚</p>
<p>æœ€èªæ˜çš„åšæ³•æ˜¯<strong>åšé‡‡ä¼—é•¿</strong>ï¼š</p>
<ol>
<li><strong>å‰æœŸ</strong>ï¼šåˆ©ç”¨ <strong>Trae</strong> ç­‰ AI IDE çš„é«˜æ€§ä»·æ¯”å’Œå¿«é€Ÿç”Ÿæˆèƒ½åŠ›ï¼Œå®Œæˆæ–¹æ¡ˆéªŒè¯ã€æ¡†æ¶æ­å»ºå’Œå¤§å—ä¸šåŠ¡é€»è¾‘çš„å®ç°ã€‚</li>
<li><strong>åæœŸ</strong>ï¼šå›å½’ <strong>Android Studio</strong>ï¼Œåˆ©ç”¨å…¶å¼ºå¤§çš„è°ƒè¯•å·¥å…·ã€æ€§èƒ½åˆ†æå™¨å’Œå¯¹åŸç”Ÿç¯å¢ƒçš„å®Œç¾æ”¯æŒï¼Œè¿›è¡Œç»†èŠ‚æ‰“ç£¨ã€Bug ä¿®å¤å’Œæœ€ç»ˆäº¤ä»˜ã€‚</li>
</ol>
<p>å·¥å…·åªæ˜¯æ‰‹æ®µï¼Œæ•ˆç‡æ‰æ˜¯ç›®çš„ã€‚åœ¨è¿™ä¸ª AI å¿«é€Ÿè¿­ä»£çš„æ—¶ä»£ï¼Œçµæ´»ç»„åˆä½¿ç”¨ä¸åŒçš„å·¥å…·ï¼Œå„å–æ‰€é•¿ï¼Œæ‰æ˜¯å½“ä¸‹æœ€é«˜æ•ˆçš„ç”Ÿå­˜ä¹‹é“ã€‚</p>
<blockquote>
<p>ğŸ¤ å¦‚æœçœ‹åˆ°è¿™é‡Œçš„åŒå­¦å¯¹å®¢æˆ·ç«¯æˆ–è€…Flutterå¼€å‘æ„Ÿå…´è¶£ï¼Œæ¬¢è¿è”ç³»è€åˆ˜ï¼Œæˆ‘ä»¬äº’ç›¸å­¦ä¹ ã€‚</p>
<p>ğŸ ç§ä¿¡å…è´¹é¢†è€åˆ˜æ•´ç†çš„ã€ŠFlutterå¼€å‘æ‰‹å†Œã€‹ï¼Œè¦†ç›–90%åº”ç”¨å¼€å‘åœºæ™¯ã€‚å¯ä»¥ä½œä¸ºFlutterå­¦ä¹ çš„çŸ¥è¯†åœ°å›¾ã€‚</p>
<p>ğŸ’¬ : laoliu_dev</p>
</blockquote>
<blockquote>
<p>ğŸ“‚ è€åˆ˜ä¹ŸæŠŠè‡ªå·±å†å²æ–‡ç« æ•´ç†åœ¨GitHubä»“åº“é‡Œï¼Œæ–¹ä¾¿å¤§å®¶æŸ¥é˜…ã€‚</p>
<p>ğŸ”— <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Flzt-code%2Fblog" target="_blank" title="https://github.com/lzt-code/blog" ref="nofollow noopener noreferrer">github.com/lzt-code/blâ€¦</a></p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ·±å…¥å‰–æRocketMQçš„æ¶ˆè´¹é€»è¾‘]]></title>    <link>https://juejin.cn/post/7602497125268897798</link>    <guid>https://juejin.cn/post/7602497125268897798</guid>    <pubDate>2026-02-04T02:57:19.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602497125268897798" data-draft-id="7602529888483311679" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ·±å…¥å‰–æRocketMQçš„æ¶ˆè´¹é€»è¾‘"/> <meta itemprop="keywords" content="åç«¯,RocketMQ"/> <meta itemprop="datePublished" content="2026-02-04T02:57:19.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è¸æµªæ— ç—•"/> <meta itemprop="url" content="https://juejin.cn/user/2834988091055719"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ·±å…¥å‰–æRocketMQçš„æ¶ˆè´¹é€»è¾‘
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2834988091055719/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è¸æµªæ— ç—•
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T02:57:19.000Z" title="Wed Feb 04 2026 02:57:19 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    30
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>å¾ˆå¤šäººåœ¨ä½¿ç”¨RocketMQæ—¶ï¼ŒåªçŸ¥é“å†™ä¸ªListenerå°±èƒ½æ¶ˆè´¹æ¶ˆæ¯ï¼Œä½†å¯¹åº•å±‚çš„æ¶ˆè´¹æœºåˆ¶ä¸€çŸ¥åŠè§£ã€‚æœ¬æ–‡å°†ç”¨å¤§ç™½è¯æ·±å…¥å‰–æRocketMQçš„æ¶ˆè´¹é€»è¾‘ï¼Œå¸®åŠ©ä½ çœŸæ­£ç†è§£ï¼šæ¶ˆæ¯æ˜¯æ€ä¹ˆåˆ°è¾¾ä½ çš„ä»£ç çš„ï¼Ÿæ¨æ¨¡å¼è¿˜æ˜¯æ‹‰æ¨¡å¼ï¼Ÿçº¿ç¨‹æ˜¯æ€ä¹ˆå·¥ä½œçš„ï¼Ÿ</p>
<p>æœ¬æ–‡ä»¥Spring Boot Starteræ–¹å¼ä¸ºä¾‹è¿›è¡Œè®²è§£ï¼Œè¿™ä¹Ÿæ˜¯ç›®å‰æœ€å¸¸ç”¨çš„æ–¹å¼ã€‚</p>
<h2 data-id="heading-1">ä¸€ã€æ•´ä½“æ¶ˆè´¹æµç¨‹æ¦‚è§ˆ</h2>
<p>å…ˆä»å®è§‚å±‚é¢çœ‹çœ‹RocketMQçš„æ¶ˆè´¹æµç¨‹ã€‚æ•´ä¸ªè¿‡ç¨‹å¯ä»¥åˆ†ä¸ºä¸‰ä¸ªæ ¸å¿ƒç¯èŠ‚ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[Brokerå­˜å‚¨æ¶ˆæ¯] --&gt;|é•¿è½®è¯¢æ‹‰å–| B[Consumeræ‹‰å–çº¿ç¨‹]
    B --&gt;|æ”¾å…¥æœ¬åœ°ç¼“å­˜| C[ProcessQueue]
    C --&gt;|åˆ†å‘æ¶ˆæ¯| D[æ¶ˆè´¹çº¿ç¨‹æ± ]
    D --&gt;|å›è°ƒ| E[ä½ çš„ä¸šåŠ¡ä»£ç ]
    E --&gt;|è¿”å›ç»“æœ| F[ACK/NACK]
    
    style A fill:#e1f5ff,stroke:#01579b,stroke-width:2px
    style B fill:#fff3e0,stroke:#e65100,stroke-width:2px
    style C fill:#f3e5f5,stroke:#4a148c,stroke-width:2px
    style D fill:#e8f5e9,stroke:#1b5e20,stroke-width:2px
    style E fill:#fff9c4,stroke:#f57f17,stroke-width:2px
    style F fill:#fce4ec,stroke:#880e4f,stroke-width:2px
</code></pre>
<p>è¿™ä¸ªæµç¨‹çœ‹èµ·æ¥ç®€å•ï¼Œä½†æ¯ä¸€æ­¥éƒ½æœ‰å¾ˆå¤šç»†èŠ‚å€¼å¾—æ·±ç©¶ã€‚</p>
<h2 data-id="heading-2">äºŒã€æ¨æ¨¡å¼ vs æ‹‰æ¨¡å¼ï¼šä¸€ä¸ªç¾ä¸½çš„è¯¯è§£</h2>
<h3 data-id="heading-3">2.1 è¡¨é¢ç°è±¡ï¼šçœ‹èµ·æ¥æ˜¯æ¨æ¨¡å¼</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@RocketMQMessageListener(topic = "order-topic", consumerGroup = "order-group")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderListener</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">RocketMQListener</span>&lt;Order&gt; {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onMessage</span><span class="hljs-params">(Order order)</span> {
        <span class="hljs-comment">// æ¶ˆæ¯è‡ªåŠ¨"æ¨é€"åˆ°è¿™é‡Œ</span>
        System.out.println(<span class="hljs-string">"æ”¶åˆ°è®¢å•: "</span> + order);
    }
}
</code></pre>
<p>çœ‹èµ·æ¥æ¶ˆæ¯æ˜¯è¢«"æ¨é€"è¿‡æ¥çš„å¯¹å§ï¼Ÿä½ ä»€ä¹ˆéƒ½ä¸ç”¨åšï¼Œæ¶ˆæ¯å°±è‡ªåŠ¨åˆ°è¾¾äº†ä½ çš„æ–¹æ³•ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆRocketMQçš„Consumerå«åš <code>PushConsumer</code>ã€‚</p>
<h3 data-id="heading-4">2.2 åº•å±‚çœŸç›¸ï¼šæœ¬è´¨æ˜¯æ‹‰æ¨¡å¼</h3>
<p>ä½†å®é™…ä¸Šï¼ŒRocketMQçš„åº•å±‚å®ç°æ˜¯<strong>æ‹‰æ¨¡å¼</strong>ã€‚Consumerå¹¶ä¸æ˜¯è¢«åŠ¨ç­‰å¾…ï¼Œè€Œæ˜¯ä¸»åŠ¨å»Brokeræ‹‰å–æ¶ˆæ¯ã€‚</p>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant C as Consumer
    participant B as Broker
    
    rect rgb(230, 245, 255)
    Note over C,B: æ‹‰æ¨¡å¼çš„çœŸå®æµç¨‹
    C-&gt;&gt;B: å‘èµ·æ‹‰å–è¯·æ±‚
    B--&gt;&gt;C: æ²¡æœ‰æ–°æ¶ˆæ¯ï¼Œç­‰å¾…...
    Note over B: BrokeræŒ‚èµ·è¯·æ±‚æœ€å¤š30ç§’
    B-&gt;&gt;B: æœ‰æ–°æ¶ˆæ¯åˆ°è¾¾
    B--&gt;&gt;C: ç«‹å³è¿”å›æ¶ˆæ¯
    C-&gt;&gt;C: å¤„ç†æ¶ˆæ¯
    C-&gt;&gt;B: ç«‹å³å‘èµ·ä¸‹ä¸€æ¬¡æ‹‰å–
    end
</code></pre>
<h3 data-id="heading-5">2.3 ä¸ºä»€ä¹ˆè¦è¿™æ ·è®¾è®¡ï¼Ÿ</h3>
<p>RocketMQæŠŠæ‹‰å–é€»è¾‘å°è£…åœ¨SDKé‡Œï¼Œå¯¹å¤–æš´éœ²æˆæ¨æ¨¡å¼çš„æ¥å£ï¼Œç›®çš„æ˜¯ï¼š</p>
<ol>
<li><strong>ç®€åŒ–å¼€å‘</strong>ï¼šå¼€å‘è€…åªéœ€å†™Listenerï¼Œæ— éœ€å…³å¿ƒæ‹‰å–é€»è¾‘</li>
<li><strong>æµé‡æ§åˆ¶</strong>ï¼šConsumerå¯ä»¥æ§åˆ¶æ‹‰å–é€Ÿåº¦ï¼Œé¿å…è¢«å‹å®</li>
<li><strong>å®æ—¶æ€§å¥½</strong>ï¼šé•¿è½®è¯¢æœºåˆ¶ä¿è¯æ¶ˆæ¯åŠæ—¶é€è¾¾</li>
</ol>
<p><strong>å…³é”®ç†è§£ï¼š</strong></p>
<ul>
<li><strong>æ¨æ¨¡å¼ï¼ˆè¡¨è±¡ï¼‰</strong>ï¼šå¼€å‘è€…æ— éœ€å…³å¿ƒæ‹‰å–ï¼Œä¸“æ³¨ä¸šåŠ¡é€»è¾‘</li>
<li><strong>æ‹‰æ¨¡å¼ï¼ˆæœ¬è´¨ï¼‰</strong>ï¼šConsumerä¸»åŠ¨æ§åˆ¶æ‹‰å–é€Ÿåº¦</li>
<li><strong>é•¿è½®è¯¢ï¼ˆå®ç°ï¼‰</strong>ï¼šå…¼é¡¾å®æ—¶æ€§å’Œæ€§èƒ½</li>
</ul>
<h2 data-id="heading-6">ä¸‰ã€é•¿è½®è¯¢ï¼šæ¨æ‹‰æ¨¡å¼çš„å®Œç¾ç»“åˆ</h2>
<h3 data-id="heading-7">3.1 ä»€ä¹ˆæ˜¯é•¿è½®è¯¢</h3>
<p>é•¿è½®è¯¢ï¼ˆLong Pollingï¼‰æ˜¯RocketMQå®ç°"ç±»æ¨æ¨¡å¼"çš„æ ¸å¿ƒæŠ€æœ¯ã€‚å®ƒè§£å†³äº†ä¸¤ä¸ªé—®é¢˜ï¼š</p>
<ul>
<li>å¦‚ä½•åšåˆ°å®æ—¶æ€§é«˜ï¼ˆåƒæ¨æ¨¡å¼ï¼‰</li>
<li>å¦‚ä½•é¿å…é¢‘ç¹ç©ºè½®è¯¢æµªè´¹èµ„æºï¼ˆåƒæ‹‰æ¨¡å¼ï¼‰</li>
</ul>
<h3 data-id="heading-8">3.2 é•¿è½®è¯¢çš„å·¥ä½œæµç¨‹</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant C as Consumer
    participant B as Broker
    participant S as Storage
    
    rect rgb(255, 243, 224)
    Note over C,B: åœºæ™¯1: æœ‰æ¶ˆæ¯
    C-&gt;&gt;B: æ‹‰å–è¯·æ±‚(timeout=30s)
    B-&gt;&gt;S: æŸ¥è¯¢æ–°æ¶ˆæ¯
    S--&gt;&gt;B: æœ‰3æ¡æ¶ˆæ¯
    B--&gt;&gt;C: ç«‹å³è¿”å›(è€—æ—¶&lt;5ms)
    end
    
    rect rgb(232, 245, 233)
    Note over C,B: åœºæ™¯2: æš‚æ— æ¶ˆæ¯
    C-&gt;&gt;B: æ‹‰å–è¯·æ±‚(timeout=30s)
    B-&gt;&gt;S: æŸ¥è¯¢æ–°æ¶ˆæ¯
    S--&gt;&gt;B: æš‚æ— æ¶ˆæ¯
    Note over B: æŒ‚èµ·è¯·æ±‚ï¼Œç­‰å¾…æœ€å¤š30ç§’
    S-&gt;&gt;B: æ–°æ¶ˆæ¯åˆ°è¾¾
    B--&gt;&gt;C: ç«‹å³è¿”å›æ¶ˆæ¯
    end
</code></pre>
<h3 data-id="heading-9">3.3 é•¿è½®è¯¢çš„ä¼˜åŠ¿</h3>





























<table><thead><tr><th>å¯¹æ¯”é¡¹</th><th>çŸ­è½®è¯¢</th><th>é•¿è½®è¯¢</th><th>çœŸæ¨é€</th></tr></thead><tbody><tr><td><strong>å®æ—¶æ€§</strong></td><td>å·®</td><td>å¥½</td><td>æœ€å¥½</td></tr><tr><td><strong>æœåŠ¡å™¨å‹åŠ›</strong></td><td>å¤§</td><td>å°</td><td>å°</td></tr><tr><td><strong>Consumeræ§åˆ¶åŠ›</strong></td><td>é«˜</td><td>é«˜</td><td>ä½</td></tr></tbody></table>
<p><strong>RocketMQé€‰æ‹©é•¿è½®è¯¢çš„åŸå› ï¼š</strong></p>
<ol>
<li>å…¼é¡¾å®æ—¶æ€§ï¼šæ–°æ¶ˆæ¯åˆ°è¾¾æ—¶ç«‹å³è¿”å›</li>
<li>é™ä½å‹åŠ›ï¼šé¿å…é¢‘ç¹çš„ç©ºè½®è¯¢</li>
<li>Consumerå¯æ§ï¼šæ§åˆ¶æ‹‰å–é€Ÿåº¦ï¼Œä¸ä¼šè¢«å‹å®</li>
<li>å®ç°ç®€å•ï¼šæ¯”ç»´æŠ¤é•¿è¿æ¥ç®€å•</li>
</ol>
<h3 data-id="heading-10">3.4 é…ç½®å‚æ•°</h3>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">rocketmq:</span>
  <span class="hljs-attr">consumer:</span>
    <span class="hljs-attr">pull-timeout:</span> <span class="hljs-number">30000</span>        <span class="hljs-comment"># é•¿è½®è¯¢è¶…æ—¶30ç§’(æ¨èé»˜è®¤å€¼)</span>
    <span class="hljs-attr">pull-interval:</span> <span class="hljs-number">0</span>           <span class="hljs-comment"># æ‹‰å–é—´éš”0æ¯«ç§’(ç«‹å³æ‹‰å–)</span>
    <span class="hljs-attr">pull-batch-size:</span> <span class="hljs-number">32</span>        <span class="hljs-comment"># æ¯æ¬¡æ‹‰å–32æ¡æ¶ˆæ¯</span>
</code></pre>
<h2 data-id="heading-11">å››ã€é˜Ÿåˆ—åˆ†é…æœºåˆ¶ï¼šConsumerå¦‚ä½•ç“œåˆ†é˜Ÿåˆ—</h2>
<h3 data-id="heading-12">4.1 é˜Ÿåˆ—åˆ†é…åŸç†</h3>
<p>å‡è®¾ä¸€ä¸ªTopicæœ‰8ä¸ªé˜Ÿåˆ—ï¼Œ2ä¸ªConsumerï¼Œå®ƒä»¬æ˜¯æ€ä¹ˆåˆ†é…çš„ï¼Ÿ</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TB
    subgraph Topic: order-topic
    Q1[Queue-0]
    Q2[Queue-1]
    Q3[Queue-2]
    Q4[Queue-3]
    Q5[Queue-4]
    Q6[Queue-5]
    Q7[Queue-6]
    Q8[Queue-7]
    end
    
    subgraph Consumer Group
    C1[Consumer-1&lt;br/&gt;Pod-1]
    C2[Consumer-2&lt;br/&gt;Pod-2]
    end
    
    Q1 &amp; Q2 &amp; Q3 &amp; Q4 --&gt; C1
    Q5 &amp; Q6 &amp; Q7 &amp; Q8 --&gt; C2
    
    style Q1 fill:#e1f5ff,stroke:#01579b
    style Q2 fill:#e1f5ff,stroke:#01579b
    style Q3 fill:#e1f5ff,stroke:#01579b
    style Q4 fill:#e1f5ff,stroke:#01579b
    style Q5 fill:#fff3e0,stroke:#e65100
    style Q6 fill:#fff3e0,stroke:#e65100
    style Q7 fill:#fff3e0,stroke:#e65100
    style Q8 fill:#fff3e0,stroke:#e65100
    style C1 fill:#e1f5ff,stroke:#01579b,stroke-width:3px
    style C2 fill:#fff3e0,stroke:#e65100,stroke-width:3px
</code></pre>
<p><strong>åˆ†é…ç­–ç•¥ï¼šå¹³å‡åˆ†é…ï¼ˆé»˜è®¤ï¼‰</strong></p>
<p>RocketMQä½¿ç”¨ <code>AllocateMessageQueueAveragely</code> ç­–ç•¥ï¼š</p>
<ul>
<li>8ä¸ªé˜Ÿåˆ— Ã· 2ä¸ªConsumer = æ¯ä¸ªConsumeråˆ†é…4ä¸ªé˜Ÿåˆ—</li>
<li>Consumer-1 åˆ†é… Queue 0-3</li>
<li>Consumer-2 åˆ†é… Queue 4-7</li>
</ul>
<h3 data-id="heading-13">4.2 å¸¸è§çš„é˜Ÿåˆ—åˆ†é…åœºæ™¯</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    subgraph S1["åœºæ™¯1: é˜Ÿåˆ—æ•° = Consumeræ•°"]
    A1["8 Queues"] --&gt;|å®Œç¾å‡åˆ†| B1["8 Consumersæ¯äºº1ä¸ª"]
    end
    
    subgraph S2["åœºæ™¯2: é˜Ÿåˆ—æ•° &gt; Consumeræ•°"]
    A2["8 Queues"] --&gt;|å‡åˆ†| B2["2 Consumersæ¯äºº4ä¸ª"]
    end
    
    subgraph S3["åœºæ™¯3: é˜Ÿåˆ—æ•° &lt; Consumeræ•°"]
    A3["4 Queues"] --&gt;|æœ‰äººç©ºé—²| B3["8 Consumers 4äººå·¥ä½œ 4äººç©ºé—²"]
    end
    
    style A1 fill:#e8f5e9,stroke:#2e7d32
    style B1 fill:#e8f5e9,stroke:#2e7d32
    style A2 fill:#fff3e0,stroke:#e65100
    style B2 fill:#fff3e0,stroke:#e65100
    style A3 fill:#ffebee,stroke:#c62828
    style B3 fill:#ffebee,stroke:#c62828
</code></pre>
<p><strong>é‡è¦ç»“è®ºï¼š</strong></p>
<ul>
<li>é˜Ÿåˆ—æ˜¯æ¶ˆè´¹å¹¶å‘çš„åŸºæœ¬å•ä½</li>
<li>Consumeræ•°é‡ &gt; é˜Ÿåˆ—æ•°é‡æ—¶ï¼Œå¤šä½™çš„Consumerä¼šç©ºé—²</li>
<li>æƒ³æé«˜æ¶ˆè´¹å¹¶å‘ï¼Œåº”è¯¥å¢åŠ é˜Ÿåˆ—æ•°ï¼Œè€Œä¸æ˜¯ç›²ç›®å¢åŠ Consumer</li>
</ul>
<h3 data-id="heading-14">4.3 Rebalanceï¼šåŠ¨æ€é‡åˆ†é…</h3>
<p>å½“Consumeræ•°é‡å˜åŒ–æ—¶ï¼ˆæ–°å¢ã€ä¸‹çº¿ã€å´©æºƒï¼‰ï¼Œä¼šè§¦å‘Rebalanceé‡æ–°åˆ†é…é˜Ÿåˆ—ã€‚</p>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant C1 as Consumer-1
    participant C2 as Consumer-2
    participant C3 as Consumer-3(æ–°åŠ å…¥)
    participant B as Broker
    
    rect rgb(232, 245, 233)
    Note over C1,C2: åˆå§‹çŠ¶æ€ï¼š2ä¸ªConsumer
    Note over C1: æŒæœ‰ Q0,Q1,Q2,Q3
    Note over C2: æŒæœ‰ Q4,Q5,Q6,Q7
    end
    
    rect rgb(255, 243, 224)
    Note over C1,C3: Consumer-3 åŠ å…¥
    C3-&gt;&gt;B: æˆ‘åŠ å…¥äº† ConsumerGroup
    B-&gt;&gt;C1: è§¦å‘ Rebalance
    B-&gt;&gt;C2: è§¦å‘ Rebalance
    B-&gt;&gt;C3: è§¦å‘ Rebalance
    end
    
    rect rgb(227, 242, 253)
    Note over C1,C3: é‡æ–°åˆ†é…å®Œæˆ
    Note over C1: æŒæœ‰ Q0,Q1,Q2
    Note over C2: æŒæœ‰ Q3,Q4,Q5
    Note over C3: æŒæœ‰ Q6,Q7
    end
</code></pre>
<p><strong>Rebalanceçš„å½±å“ï¼š</strong></p>
<ul>
<li>ä¼šçŸ­æš‚æš‚åœæ¶ˆè´¹ï¼ˆé€šå¸¸å‡ ç§’ï¼‰</li>
<li>å¯èƒ½å¯¼è‡´æ¶ˆæ¯é‡å¤æ¶ˆè´¹ï¼ˆéœ€è¦ä¸šåŠ¡ä¿è¯å¹‚ç­‰ï¼‰</li>
<li>é¢‘ç¹Rebalanceä¼šå½±å“æ€§èƒ½</li>
</ul>
<h2 data-id="heading-15">äº”ã€çº¿ç¨‹æ¨¡å‹ï¼šæ‹‰å–çº¿ç¨‹ vs æ¶ˆè´¹çº¿ç¨‹</h2>
<p>è¿™æ˜¯ç†è§£RocketMQæ¶ˆè´¹æœºåˆ¶æœ€æ ¸å¿ƒçš„éƒ¨åˆ†ã€‚å¾ˆå¤šäººä»¥ä¸ºConsumeråªæœ‰ä¸€ä¸ªçº¿ç¨‹ï¼Œå…¶å®å†…éƒ¨æœ‰ä¸¤å¥—å®Œå…¨ç‹¬ç«‹çš„çº¿ç¨‹æœºåˆ¶ã€‚</p>
<h3 data-id="heading-16">5.1 åŒçº¿ç¨‹æ¨¡å‹æ€»è§ˆ</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TB
    subgraph Consumer["Consumerè¿›ç¨‹"]
        subgraph Pull["æ‹‰å–å±‚"]
        PT["PullMessageService&lt;br/&gt;æ‹‰å–çº¿ç¨‹(å•çº¿ç¨‹)"]
        end
        
        subgraph Cache["ç¼“å­˜å±‚"]
        PQ1["ProcessQueue-1"]
        PQ2["ProcessQueue-2"]
        PQ3["ProcessQueue-3"]
        PQ4["ProcessQueue-4"]
        end
        
        subgraph Consume["æ¶ˆè´¹å±‚"]
        TP["æ¶ˆè´¹çº¿ç¨‹æ± &lt;br/&gt;(é»˜è®¤20-64çº¿ç¨‹)"]
        end
    end
    
    Broker --&gt;|é•¿è½®è¯¢æ‹‰å–| PT
    PT --&gt;|åˆ†å‘åˆ°å¯¹åº”é˜Ÿåˆ—| PQ1 &amp; PQ2 &amp; PQ3 &amp; PQ4
    PQ1 &amp; PQ2 &amp; PQ3 &amp; PQ4 --&gt;|æäº¤æ¶ˆè´¹ä»»åŠ¡| TP
    TP --&gt;|å›è°ƒ| Listener["ä½ çš„ onMessage æ–¹æ³•"]
    
    style PT fill:#fff3e0,stroke:#e65100,stroke-width:2px
    style PQ1 fill:#f3e5f5,stroke:#4a148c
    style PQ2 fill:#f3e5f5,stroke:#4a148c
    style PQ3 fill:#f3e5f5,stroke:#4a148c
    style PQ4 fill:#f3e5f5,stroke:#4a148c
    style TP fill:#e8f5e9,stroke:#1b5e20,stroke-width:2px
    style Listener fill:#fff9c4,stroke:#f57f17,stroke-width:2px
</code></pre>
<h3 data-id="heading-17">5.2 æ‹‰å–çº¿ç¨‹ï¼šå•çº¿ç¨‹è½®è¯¢</h3>
<p>æ‹‰å–çº¿ç¨‹æ˜¯ä¸€ä¸ªå•çº¿ç¨‹ï¼ŒèŒè´£å¾ˆç®€å•ï¼šä¸åœåœ°è½®è¯¢æ‰€æœ‰åˆ†é…çš„é˜Ÿåˆ—ã€‚</p>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart LR
    Start(["å¯åŠ¨"]) --&gt; Loop{"è¿è¡Œä¸­?"}
    Loop --&gt;|æ˜¯| Q1["æ‹‰å– Queue-0"]
    Q1 --&gt; Q2["æ‹‰å– Queue-1"]
    Q2 --&gt; Q3["æ‹‰å– Queue-2"]
    Q3 --&gt; Q4["æ‹‰å– Queue-3"]
    Q4 --&gt; Loop
    Loop --&gt;|å¦| End(["ç»“æŸ"])
    
    style Start fill:#e8f5e9,stroke:#2e7d32
    style Loop fill:#fff3e0,stroke:#e65100
    style Q1 fill:#e1f5ff,stroke:#01579b
    style Q2 fill:#e1f5ff,stroke:#01579b
    style Q3 fill:#e1f5ff,stroke:#01579b
    style Q4 fill:#e1f5ff,stroke:#01579b
    style End fill:#ffebee,stroke:#c62828
</code></pre>
<p><strong>å…³é”®ç‚¹ï¼š</strong></p>
<ul>
<li>åªæœ‰1ä¸ªä¸“é—¨çš„æ‹‰å–çº¿ç¨‹</li>
<li>è½®è¯¢æ‰€æœ‰é˜Ÿåˆ—ï¼ˆQueue-0, 1, 2, 3...ï¼‰</li>
<li>ä½¿ç”¨é•¿è½®è¯¢ï¼Œä¸ä¼šé¢‘ç¹å ç”¨CPU</li>
<li>æ‹‰å–åˆ°çš„æ¶ˆæ¯æ”¾å…¥ProcessQueue</li>
</ul>
<h3 data-id="heading-18">5.3 ProcessQueueï¼šæœ¬åœ°æ¶ˆæ¯ç¼“å­˜</h3>
<p>ProcessQueueæ˜¯è¿æ¥æ‹‰å–å’Œæ¶ˆè´¹çš„æ¡¥æ¢ï¼Œæ¯ä¸ªé˜Ÿåˆ—éƒ½æœ‰ä¸€ä¸ªç‹¬ç«‹çš„ProcessQueueã€‚</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A["æ‹‰å–çº¿ç¨‹"] --&gt;|æ”¾å…¥æ¶ˆæ¯| B["ProcessQueue&lt;br/&gt;æœ¬åœ°ç¼“å­˜&lt;br/&gt;æœ€å¤š1000æ¡"]
    B --&gt;|å–å‡ºæ¶ˆæ¯| C["æ¶ˆè´¹çº¿ç¨‹æ± "]
    B --&gt;|è¶…è¿‡1000æ¡| D["æš‚åœæ‹‰å–&lt;br/&gt;é˜²æ­¢å†…å­˜æº¢å‡º"]
    
    style A fill:#fff3e0,stroke:#e65100
    style B fill:#f3e5f5,stroke:#4a148c,stroke-width:2px
    style C fill:#e8f5e9,stroke:#1b5e20
    style D fill:#ffebee,stroke:#c62828
</code></pre>
<p><strong>ProcessQueueçš„ä½œç”¨ï¼š</strong></p>
<ol>
<li>è§£è€¦æ‹‰å–å’Œæ¶ˆè´¹ï¼šæ‹‰å–çº¿ç¨‹å’Œæ¶ˆè´¹çº¿ç¨‹äº’ä¸é˜»å¡</li>
<li>æµé‡æ§åˆ¶ï¼šç¼“å­˜æ»¡äº†å°±æš‚åœæ‹‰å–</li>
<li>æ‰¹é‡å¤„ç†ï¼šæ¶ˆè´¹çº¿ç¨‹å¯ä»¥æ‰¹é‡å–æ¶ˆæ¯</li>
</ol>
<h3 data-id="heading-19">5.4 æ¶ˆè´¹çº¿ç¨‹æ± ï¼šå¤šçº¿ç¨‹å¹¶å‘æ¶ˆè´¹</h3>
<p>æ¶ˆè´¹çº¿ç¨‹æ± æ˜¯çœŸæ­£æ‰§è¡Œä¸šåŠ¡é€»è¾‘çš„åœ°æ–¹ï¼Œé»˜è®¤æœ‰20-64ä¸ªçº¿ç¨‹ã€‚</p>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant PQ1 as ProcessQueue-1
    participant PQ2 as ProcessQueue-2
    participant Pool as æ¶ˆè´¹çº¿ç¨‹æ± 
    participant T1 as Thread-1
    participant T2 as Thread-2
    
    rect rgb(232, 245, 233)
    PQ1-&gt;&gt;Pool: æäº¤æ¶ˆè´¹ä»»åŠ¡(3æ¡æ¶ˆæ¯)
    Pool-&gt;&gt;T1: åˆ†é…ç»™Thread-1
    T1-&gt;&gt;T1: onMessage(msg1)&lt;br/&gt;onMessage(msg2)&lt;br/&gt;onMessage(msg3)
    end
    
    rect rgb(255, 243, 224)
    PQ2-&gt;&gt;Pool: æäº¤æ¶ˆè´¹ä»»åŠ¡(5æ¡æ¶ˆæ¯)
    Pool-&gt;&gt;T2: åˆ†é…ç»™Thread-2
    T2-&gt;&gt;T2: onMessage(msg4)&lt;br/&gt;onMessage(msg5)
    end
</code></pre>
<p><strong>æ¶ˆè´¹çº¿ç¨‹æ± çš„ç‰¹ç‚¹ï¼š</strong></p>
<ul>
<li>å¤šä¸ªçº¿ç¨‹å¹¶å‘æ¶ˆè´¹ï¼ˆé»˜è®¤20-64ä¸ªï¼‰</li>
<li>ä¸ç»‘å®šç‰¹å®šé˜Ÿåˆ—ï¼šå“ªä¸ªçº¿ç¨‹ç©ºé—²å°±æ¶ˆè´¹å“ªä¸ªæ¶ˆæ¯</li>
<li>ä½ çš„<code>onMessage()</code>æ–¹æ³•æ˜¯è¢«è¿™äº›çº¿ç¨‹è°ƒç”¨çš„</li>
</ul>
<h3 data-id="heading-20">5.5 å®Œæ•´çš„æ¶ˆæ¯æµè½¬</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant B as Broker
    participant PT as æ‹‰å–çº¿ç¨‹
    participant PQ as ProcessQueue
    participant Pool as æ¶ˆè´¹çº¿ç¨‹æ± 
    participant Listener as Listener
    
    Note over B,PT: æ‹‰å–çº¿ç¨‹å·¥ä½œ
    PT-&gt;&gt;B: æ‹‰å– Queue-0
    B--&gt;&gt;PT: è¿”å› msg1, msg2
    PT-&gt;&gt;PQ: æ”¾å…¥ç¼“å­˜
    
    Note over PQ,Pool: æäº¤æ¶ˆè´¹ä»»åŠ¡
    PQ-&gt;&gt;Pool: æäº¤ä»»åŠ¡(msg1, msg2)
    
    Note over Pool,Listener: æ¶ˆè´¹çº¿ç¨‹å¤„ç†
    Pool-&gt;&gt;Listener: Thread-1: onMessage(msg1)
    Pool-&gt;&gt;Listener: Thread-2: onMessage(msg2)
    
    Listener--&gt;&gt;Pool: SUCCESS
    Pool-&gt;&gt;B: ACK
</code></pre>
<p><strong>å…³é”®ç†è§£ï¼š</strong></p>
<ol>
<li>æ‹‰å–çº¿ç¨‹åªè´Ÿè´£æ‹‰æ¶ˆæ¯</li>
<li>æ¶ˆè´¹çº¿ç¨‹åªè´Ÿè´£æ¶ˆè´¹</li>
<li>ProcessQueueæ˜¯ä¸­é—´ç¼“å†²åŒº</li>
<li>æ¶ˆè´¹çº¿ç¨‹ä¸ç»‘å®šé˜Ÿåˆ—ï¼Œçµæ´»è°ƒåº¦</li>
</ol>
<h2 data-id="heading-21">å…­ã€çº¿ç¨‹é…ç½®ï¼šä¸è¦è¿·ä¿¡çº¿ç¨‹æ•°</h2>
<p>å¾ˆå¤šäººé‡åˆ°æ¶ˆè´¹æ…¢çš„ç¬¬ä¸€ååº”æ˜¯ï¼šåŠ çº¿ç¨‹ï¼ä½†è¿™å¾€å¾€æ˜¯é”™è¯¯çš„ã€‚</p>
<h3 data-id="heading-22">6.1 Spring Boot Starterçš„çº¿ç¨‹é…ç½®</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@RocketMQMessageListener(
    topic = "order-topic",
    consumerGroup = "order-group",
    consumeThreadMin = 20,      // æœ€å°æ¶ˆè´¹çº¿ç¨‹æ•°
    consumeThreadMax = 64,      // æœ€å¤§æ¶ˆè´¹çº¿ç¨‹æ•°
    consumeTimeout = 15         // å•æ¡æ¶ˆæ¯æ¶ˆè´¹è¶…æ—¶æ—¶é—´ï¼ˆåˆ†é’Ÿï¼‰
)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderListener</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">RocketMQListener</span>&lt;Order&gt; {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onMessage</span><span class="hljs-params">(Order order)</span> {
        <span class="hljs-comment">// ä½ çš„ä¸šåŠ¡é€»è¾‘</span>
    }
}
</code></pre>
<h3 data-id="heading-23">6.2 æ¶ˆè´¹æ€§èƒ½çš„çœŸæ­£ç“¶é¢ˆ</h3>
<p>å¾ˆå¤šäººé‡åˆ°æ¶ˆè´¹æ…¢çš„ç¬¬ä¸€ååº”æ˜¯ï¼šåŠ çº¿ç¨‹ï¼ä½†è¿™å¾€å¾€æ˜¯é”™è¯¯çš„ã€‚</p>
<p><strong>æ€§èƒ½ç“¶é¢ˆåˆ†æï¼š</strong></p>
<ol>
<li>
<p><strong>é˜Ÿåˆ—æ•°ä¸å¤Ÿ</strong>ï¼šè¿™æ˜¯æœ€å¸¸è§çš„é—®é¢˜</p>
<ul>
<li>4ä¸ªé˜Ÿåˆ— + 40ä¸ªçº¿ç¨‹ = å®é™…åªæœ‰4ä¸ªçº¿ç¨‹å·¥ä½œ</li>
<li>è§£å†³ï¼šå¢åŠ é˜Ÿåˆ—æ•°åˆ°16-32ä¸ª</li>
</ul>
</li>
<li>
<p><strong>çº¿ç¨‹æ•°ä¸å¤Ÿ</strong>ï¼šé˜Ÿåˆ—å¤Ÿä½†çº¿ç¨‹å…¨å¿™</p>
<ul>
<li>é˜Ÿåˆ—æ•° = 16ï¼Œçº¿ç¨‹æ•° = 5ï¼Œæœ‰11ä¸ªé˜Ÿåˆ—åœ¨ç­‰å¾…</li>
<li>è§£å†³ï¼šå¢åŠ çº¿ç¨‹æ•°åˆ°16-20ä¸ª</li>
</ul>
</li>
<li>
<p><strong>ä¸šåŠ¡å¤„ç†æ…¢</strong>ï¼šçº¿ç¨‹å¤Ÿä½†æ¯æ¡æ¶ˆæ¯å¤„ç†å¾ˆæ…¢</p>
<ul>
<li>ä¸šåŠ¡è€—æ—¶100msï¼Œå³ä½¿100ä¸ªçº¿ç¨‹ä¹Ÿæ…¢</li>
<li>è§£å†³ï¼šä¼˜åŒ–ä¸šåŠ¡é€»è¾‘ï¼ŒåŠ ç¼“å­˜/ç´¢å¼•/å¼‚æ­¥å¤„ç†</li>
</ul>
</li>
</ol>
<p><strong>ä¼˜åŒ–é¡ºåºï¼šé˜Ÿåˆ—æ•° â†’ ä¸šåŠ¡ä¼˜åŒ– â†’ çº¿ç¨‹æ•°</strong></p>
<h3 data-id="heading-24">6.3 é˜Ÿåˆ—æ•°æ‰æ˜¯æ¶ˆè´¹å¹¶å‘çš„ä¸Šé™</h3>
<p><strong>æ ¸å¿ƒåŸåˆ™ï¼šæ¶ˆè´¹å¹¶å‘åº¦ = min(é˜Ÿåˆ—æ•°, Consumeræ•° Ã— çº¿ç¨‹æ•°)</strong></p>
<p>çœ‹è¿™ä¸ªä¾‹å­ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TB
    Q["Topicæœ‰4ä¸ªé˜Ÿåˆ—"] --&gt; C1["Consumer-1æŒæœ‰2ä¸ªé˜Ÿåˆ—&lt;br/&gt;é…ç½®20çº¿ç¨‹"]
    Q --&gt; C2["Consumer-2æŒæœ‰2ä¸ªé˜Ÿåˆ—&lt;br/&gt;é…ç½®20çº¿ç¨‹"]
    C1 --&gt; R["å®é™…ç»“æœ:&lt;br/&gt;æœ€å¤š4ä¸ªçº¿ç¨‹åœ¨å·¥ä½œ&lt;br/&gt;å…¶ä½™36ä¸ªçº¿ç¨‹ç©ºé—²"]
    C2 --&gt; R
    
    style Q fill:#e1f5ff,stroke:#01579b,stroke-width:2px
    style C1 fill:#fff3e0,stroke:#e65100
    style C2 fill:#fff3e0,stroke:#e65100
    style R fill:#ffebee,stroke:#c62828,stroke-width:3px
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆï¼Ÿ</strong></p>
<ul>
<li>4ä¸ªé˜Ÿåˆ—è¢«å¹³å‡åˆ†é…ï¼šæ¯ä¸ªConsumeræŒæœ‰2ä¸ªé˜Ÿåˆ—</li>
<li>æ¯ä¸ªé˜Ÿåˆ—åŒä¸€æ—¶åˆ»åªèƒ½è¢«1ä¸ªçº¿ç¨‹æ¶ˆè´¹</li>
<li>æ‰€ä»¥å®é™…å·¥ä½œçš„çº¿ç¨‹æœ€å¤šåªæœ‰4ä¸ª</li>
<li>å…¶ä½™çš„36ä¸ªçº¿ç¨‹éƒ½åœ¨ç©ºé—²ç­‰å¾…</li>
</ul>
<p><strong>æ­£ç¡®çš„åšæ³•ï¼š</strong></p>
<ol>
<li>å…ˆå¢åŠ é˜Ÿåˆ—æ•°åˆ°16-32ä¸ª</li>
<li>æ ¹æ®é˜Ÿåˆ—æ•°è°ƒæ•´Consumeræ•°é‡</li>
<li>æœ€åè°ƒæ•´çº¿ç¨‹æ•°ï¼ˆç•¥å¤§äºå¹³å‡é˜Ÿåˆ—æ•°ï¼‰</li>
</ol>
<h3 data-id="heading-25">6.4 çº¿ç¨‹é…ç½®çš„å®è·µå»ºè®®</h3>
<p><strong>è§„åˆ™1ï¼šé˜Ÿåˆ—æ•°ä¼˜å…ˆäºçº¿ç¨‹æ•°</strong></p>
<p>å…ˆç¡®ä¿é˜Ÿåˆ—æ•°è¶³å¤Ÿï¼ˆå»ºè®®16-32ä¸ªï¼‰ï¼Œå†è°ƒæ•´çº¿ç¨‹æ•°ã€‚</p>
<p><strong>è§„åˆ™2ï¼šçº¿ç¨‹æ•°ç•¥å¤§äºå¹³å‡é˜Ÿåˆ—æ•°</strong></p>
<pre><code class="hljs language-ini" lang="ini">å‡è®¾ï¼šé˜Ÿåˆ—æ•° = 16, Consumeræ•° = 2
å¹³å‡æ¯ä¸ªConsumeråˆ†é… = 16 / <span class="hljs-attr">2</span> = <span class="hljs-number">8</span>ä¸ªé˜Ÿåˆ—
å»ºè®®çº¿ç¨‹æ•° = 8 åˆ° 16ä¸ªçº¿ç¨‹
</code></pre>
<p><strong>è§„åˆ™3ï¼šæ ¹æ®ä¸šåŠ¡è€—æ—¶è°ƒæ•´</strong></p>
<ul>
<li>ä¸šåŠ¡å¾ˆå¿«ï¼ˆå‡ æ¯«ç§’ï¼‰ï¼šçº¿ç¨‹æ•° = é˜Ÿåˆ—æ•°</li>
<li>ä¸šåŠ¡è¾ƒæ…¢ï¼ˆå‡ åæ¯«ç§’ï¼‰ï¼šçº¿ç¨‹æ•° = é˜Ÿåˆ—æ•° Ã— 1.5</li>
<li>ä¸šåŠ¡å¾ˆæ…¢ï¼ˆæœ‰IOæ“ä½œï¼‰ï¼šçº¿ç¨‹æ•° = é˜Ÿåˆ—æ•° Ã— 2ï¼Œä½†æ›´åº”è¯¥ä¼˜åŒ–ä¸šåŠ¡é€»è¾‘</li>
</ul>
<p><strong>é…ç½®ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@RocketMQMessageListener(
    topic = "order-topic",
    consumerGroup = "order-group",
    consumeThreadMin = 10,     // æœ€å°çº¿ç¨‹æ•°
    consumeThreadMax = 20      // æœ€å¤§çº¿ç¨‹æ•°
)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderListener</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">RocketMQListener</span>&lt;Order&gt; {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onMessage</span><span class="hljs-params">(Order order)</span> {
        <span class="hljs-comment">// ä¸šåŠ¡é€»è¾‘</span>
    }
}
</code></pre>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># application.yml</span>
<span class="hljs-attr">rocketmq:</span>
  <span class="hljs-attr">consumer:</span>
    <span class="hljs-attr">pull-batch-size:</span> <span class="hljs-number">32</span>        <span class="hljs-comment"># æ¯æ¬¡æ‹‰å–æ¶ˆæ¯æ•°</span>
    <span class="hljs-attr">pull-timeout:</span> <span class="hljs-number">30000</span>        <span class="hljs-comment"># é•¿è½®è¯¢è¶…æ—¶30ç§’</span>
</code></pre>
<h2 data-id="heading-26">ä¸ƒã€æ€»ç»“</h2>
<h3 data-id="heading-27">æ ¸å¿ƒè¦ç‚¹</h3>
<ol>
<li>
<p><strong>æ¨æ‹‰æ¨¡å¼çš„æœ¬è´¨</strong></p>
<ul>
<li>è¡¨é¢æ˜¯æ¨æ¨¡å¼ï¼Œåº•å±‚æ˜¯æ‹‰æ¨¡å¼</li>
<li>é€šè¿‡é•¿è½®è¯¢å®ç°é«˜å®æ—¶æ€§å’Œä½èµ„æºæ¶ˆè€—</li>
</ul>
</li>
<li>
<p><strong>åŒçº¿ç¨‹æ¶æ„</strong></p>
<ul>
<li>æ‹‰å–çº¿ç¨‹ï¼šå•çº¿ç¨‹è½®è¯¢æ‰€æœ‰é˜Ÿåˆ—</li>
<li>æ¶ˆè´¹çº¿ç¨‹æ± ï¼šå¤šçº¿ç¨‹å¹¶å‘æ¶ˆè´¹</li>
<li>ProcessQueueï¼šè¿æ¥æ‹‰å–å’Œæ¶ˆè´¹çš„æ¡¥æ¢</li>
</ul>
</li>
<li>
<p><strong>æ€§èƒ½å…³é”®å› ç´ </strong></p>
<ul>
<li>é˜Ÿåˆ—æ•°æ˜¯æ¶ˆè´¹å¹¶å‘çš„çœŸæ­£ä¸Šé™</li>
<li>æ¶ˆè´¹å¹¶å‘åº¦ = min(é˜Ÿåˆ—æ•°, Consumeræ•° Ã— çº¿ç¨‹æ•°)</li>
<li>ä¸è¦ç›²ç›®å¢åŠ çº¿ç¨‹æ•°ï¼Œä¼˜å…ˆå¢åŠ é˜Ÿåˆ—æ•°</li>
</ul>
</li>
<li>
<p><strong>é…ç½®å»ºè®®</strong></p>
<ul>
<li>é˜Ÿåˆ—æ•°ï¼š16-32ä¸ªï¼ˆæ ¹æ®ä¸šåŠ¡é‡è°ƒæ•´ï¼‰</li>
<li>çº¿ç¨‹æ•°ï¼šç•¥å¤§äºå¹³å‡é˜Ÿåˆ—æ•°ï¼ˆ1.5-2å€ï¼‰</li>
<li>é•¿è½®è¯¢ä¿æŒ30ç§’é»˜è®¤å€¼</li>
</ul>
</li>
</ol>
<h3 data-id="heading-28">æ•´ä½“æ¶æ„</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TB
    subgraph Producer[ç”Ÿäº§ç«¯]
    P[Producer]
    end
    
    subgraph Broker[Brokeré›†ç¾¤]
    T[Topic: 16ä¸ªé˜Ÿåˆ—]
    end
    
    subgraph Consumer1[Consumer-1]
    PT1[æ‹‰å–çº¿ç¨‹]
    PQ1[ProcessQueue]
    TP1[æ¶ˆè´¹çº¿ç¨‹æ± ]
    L1[Listener]
    end
    
    subgraph Consumer2[Consumer-2]
    PT2[æ‹‰å–çº¿ç¨‹]
    PQ2[ProcessQueue]
    TP2[æ¶ˆè´¹çº¿ç¨‹æ± ]
    L2[Listener]
    end
    
    P --&gt;|å‘é€æ¶ˆæ¯| T
    T --&gt;|é•¿è½®è¯¢æ‹‰å–| PT1
    T --&gt;|é•¿è½®è¯¢æ‹‰å–| PT2
    PT1 --&gt; PQ1
    PT2 --&gt; PQ2
    PQ1 --&gt; TP1
    PQ2 --&gt; TP2
    TP1 --&gt; L1
    TP2 --&gt; L2
    
    style P fill:#e1f5ff,stroke:#01579b
    style T fill:#fff3e0,stroke:#e65100,stroke-width:2px
    style PT1 fill:#f3e5f5,stroke:#4a148c
    style PT2 fill:#f3e5f5,stroke:#4a148c
    style PQ1 fill:#fff9c4,stroke:#f57f17
    style PQ2 fill:#fff9c4,stroke:#f57f17
    style TP1 fill:#e8f5e9,stroke:#1b5e20
    style TP2 fill:#e8f5e9,stroke:#1b5e20
    style L1 fill:#ffebee,stroke:#c62828
    style L2 fill:#ffebee,stroke:#c62828
</code></pre>
<p>ç†è§£äº†RocketMQçš„æ¶ˆè´¹æœºåˆ¶ï¼Œå°±èƒ½åœ¨å®é™…å·¥ä½œä¸­åˆç†é…ç½®Consumerï¼Œé¿å…æ€§èƒ½é—®é¢˜ã€‚è®°ä½ï¼š<strong>ç†è§£åŸç†æ¯”è®°ä½é…ç½®æ›´é‡è¦</strong>ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‰ç«¯å‘æ¶æ„çªå›´ç³»åˆ— - æ€§èƒ½è§‚æµ‹ [7 - 3]ï¼šåˆ†å±‚çº§çš„ç³»ç»ŸåŒ–æ€§èƒ½ä¼˜åŒ–æ–¹æ¡ˆ]]></title>    <link>https://juejin.cn/post/7602465642534043698</link>    <guid>https://juejin.cn/post/7602465642534043698</guid>    <pubDate>2026-02-04T01:26:48.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602465642534043698" data-draft-id="7602471311509454875" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‰ç«¯å‘æ¶æ„çªå›´ç³»åˆ— - æ€§èƒ½è§‚æµ‹ [7 - 3]ï¼šåˆ†å±‚çº§çš„ç³»ç»ŸåŒ–æ€§èƒ½ä¼˜åŒ–æ–¹æ¡ˆ"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-02-04T01:26:48.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‰ç«¯ç‹å£®å£®"/> <meta itemprop="url" content="https://juejin.cn/user/4473272506789485"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‰ç«¯å‘æ¶æ„çªå›´ç³»åˆ— - æ€§èƒ½è§‚æµ‹ [7 - 3]ï¼šåˆ†å±‚çº§çš„ç³»ç»ŸåŒ–æ€§èƒ½ä¼˜åŒ–æ–¹æ¡ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4473272506789485/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‰ç«¯ç‹å£®å£®
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T01:26:48.000Z" title="Wed Feb 04 2026 01:26:48 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:14px;overflow-x:hidden;color:var(--cyanosis-base-color);transition:color .35s;--cyanosis-base-color:#353535;--cyanosis-title-color:#005bb7;--cyanosis-strong-color:#2196f3;--cyanosis-em-color:#4fc3f7;--cyanosis-del-color:#ccc;--cyanosis-link-color:#3da8f5;--cyanosis-linkh-color:#007fff;--cyanosis-border-color:#bedcff;--cyanosis-border-color-2:#ececec;--cyanosis-bg-color:#fff;--cyanosis-blockquote-color:#8c8c8c;--cyanosis-blockquote-bg-color:#f0fdff;--cyanosis-code-color:#c2185b;--cyanosis-code-bg-color:#fff4f4;--cyanosis-code-pre-color:#f8f8f8;--cyanosis-table-border-color:#c3e0fd;--cyanosis-table-th-color:#dff0ff;--cyanosis-table-tht-color:#005bb7;--cyanosis-table-tr-nc-color:#f7fbff;--cyanosis-table-trh-color:#e0edf7;--cyanosis-slct-title-color:#005bb7;--cyanosis-slct-titlebg-color:rgba(175,207,247,0.25);--cyanosis-slct-text-color:#c80000;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#e8ebec;--cyanosis-slct-codebg-color:#ffeaeb;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body.__dark{--cyanosis-base-color:#cacaca;--cyanosis-title-color:#ddd;--cyanosis-strong-color:#fe9900;--cyanosis-em-color:#ffd28e;--cyanosis-del-color:#ccc;--cyanosis-link-color:#ffb648;--cyanosis-linkh-color:#fe9900;--cyanosis-border-color:#ffe3ba;--cyanosis-border-color-2:#ffcb7b;--cyanosis-bg-color:#2f2f2f;--cyanosis-blockquote-color:#c7c7c7;--cyanosis-blockquote-bg-color:rgba(255,199,116,0.1);--cyanosis-code-color:#000;--cyanosis-code-bg-color:#ffcb7b;--cyanosis-code-pre-color:rgba(255,227,185,0.5);--cyanosis-table-border-color:#fe9900;--cyanosis-table-th-color:#ffb648;--cyanosis-table-tht-color:#000;--cyanosis-table-tr-nc-color:#6d5736;--cyanosis-table-trh-color:#947443;--cyanosis-slct-title-color:#000;--cyanosis-slct-titlebg-color:#fe9900;--cyanosis-slct-text-color:#00c888;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#000;--cyanosis-slct-codebg-color:#ffcb7b;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body h1{padding-bottom:4px;font-size:30px}.markdown-body h1,.markdown-body h2{margin-top:36px;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);transition:color .35s}.markdown-body h2{position:relative;padding-left:10px;padding-right:10px;padding-bottom:10px;font-size:24px;border-bottom:1px solid var(--cyanosis-border-color-2)}.markdown-body h2:before{content:"ã€Œ";position:absolute;top:-6px;left:-14px}.markdown-body h2:after{content:"ã€";position:relative;top:6px;right:auto}.markdown-body h3{position:relative;padding-bottom:0;margin-top:30px;margin-bottom:10px;font-size:20px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h3:before{content:"Â»";padding-right:6px;color:var(--cyanosis-strong-color)}.markdown-body h4{margin-top:24px;font-size:16px}.markdown-body h4,.markdown-body h5{padding-bottom:0;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h5{margin-top:18px;font-size:14px}.markdown-body h6{padding-bottom:0;margin-top:12px;margin-bottom:10px;font-size:12px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body p{line-height:inherit;margin-top:16px;margin-bottom:16px}.markdown-body img{max-width:100%}.markdown-body hr{position:relative;width:98%;height:1px;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,var(--cyanosis-link-color),rgba(255,0,0,.3),hsla(0,0%,100%,.1),rgba(255,0,0,.3),var(--cyanosis-link-color));border-width:0;overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background-color:var(--cyanosis-bg-color);background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center;transition:background-color .5s}.markdown-body code{padding:.065em .4em;font-size:.87em;color:var(--cyanosis-code-color);word-break:break-word;overflow-x:auto;background-color:var(--cyanosis-code-bg-color);border-radius:2px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;padding:16px 12px;margin:0;font-size:12px;color:#333;word-break:normal;overflow-x:auto;background:var(--cyanosis-code-pre-color)}.markdown-body pre&gt;code::-webkit-scrollbar{width:4px;height:4px}.markdown-body pre&gt;code::-webkit-scrollbar-track{background-color:var(--cyanosis-border-color)}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:var(--cyanosis-strong-color);border-radius:10px}.markdown-body a{position:relative;text-decoration:none;color:var(--cyanosis-link-color);border-bottom:1px solid var(--cyanosis-border-color)}.markdown-body a:hover{border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body a:active,.markdown-body a:hover{color:var(--cyanosis-linkh-color)}.markdown-body a:after{position:absolute;content:"";top:100%;left:0;width:100%;opacity:0;border-bottom:1px solid var(--cyanosis-border-color);transition:top .3s,opacity .3s;transform:translateZ(0)}.markdown-body a:hover:after{top:0;opacity:1;border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid var(--cyanosis-table-border-color);border-spacing:0;border-collapse:collapse}.markdown-body table thead{color:#000;text-align:left;font-size:14px;background:#f6f6f6}.markdown-body table tr:nth-child(2n){background-color:var(--cyanosis-table-tr-nc-color)}.markdown-body table tr:hover{background-color:var(--cyanosis-table-trh-color)}.markdown-body table td,.markdown-body table th{padding:12px 8px;line-height:24px;border:1px solid var(--cyanosis-table-border-color)}.markdown-body table th{color:var(--cyanosis-table-tht-color);background-color:var(--cyanosis-table-th-color)}.markdown-body table td{min-width:120px}.markdown-body blockquote{color:var(--cyanosis-blockquote-color);border-left:4px solid var(--cyanosis-strong-color);background-color:var(--cyanosis-blockquote-bg-color);padding:1px 20px;margin:22px 0;transition:color .35s}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body b,.markdown-body blockquote&gt;b,.markdown-body blockquote&gt;strong,.markdown-body strong{color:var(--cyanosis-strong-color)}.markdown-body em,.markdown-body i{color:var(--cyanosis-em-color)}.markdown-body del{color:var(--cyanosis-del-color)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:4px}.markdown-body ol li{padding-left:6px}.markdown-body details&gt;summary{outline:none;color:var(--cyanosis-title-color);font-size:20px;font-weight:bolder;border-bottom:1px solid var(--cyanosis-border-color);cursor:pointer}.markdown-body details&gt;p{padding:10px 20px;margin:10px 0 0;color:#666;background-color:var(--cyanosis-blockquote-bg-color);border:2px dashed var(--cyanosis-strong-color)}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection{color:var(--cyanosis-slct-title-color);background-color:var(--cyanosis-slct-titlebg-color)}.markdown-body ol li::selection,.markdown-body p::selection,.markdown-body ul li::selection{color:var(--cyanosis-slct-text-color);background-color:var(--cyanosis-slct-bg-color)}.markdown-body a::selection,.markdown-body b::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:var(--cyanosis-slct-elbg-color)}.markdown-body del::selection{color:var(--cyanosis-slct-del-color);background-color:var(--cyanosis-slct-elbg-color)}.markdown-body table thead th::selection{background-color:transparent}.markdown-body table tbody td::selection{background-color:var(--cyanosis-slct-bg-color)}.markdown-body code::selection{background-color:var(--cyanosis-slct-codebg-color)}.markdown-body pre&gt;code::selection{background-color:var(--cyanosis-slct-prebg-color)}.markdown-body .contains-task-list{padding-left:14px;list-style:none}.markdown-body .contains-task-list input[type=checkbox]{position:relative}.markdown-body .contains-task-list input[type=checkbox]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;width:inherit;height:inherit;background:#f0f8ff;border:1px solid #add6ff;border-radius:2px;box-sizing:border-box;z-index:1}.markdown-body .contains-task-list input[type=checkbox]:checked:after{content:"âœ“";position:absolute;top:-12px;left:0;right:0;bottom:0;width:0;height:0;color:#f55;font-size:20px;font-weight:700;z-index:2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atom-one-dark">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#abb2bf;background:#282c34}.hljs-comment,.hljs-quote{color:#5c6370;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#c678dd}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e06c75}.hljs-literal{color:#56b6c2}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#98c379}.hljs-built_in,.hljs-class .hljs-title{color:#e6c07b}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#d19a66}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#61aeee}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}</style><blockquote>
<p><strong>å†™åœ¨å‰é¢</strong></p>
<p>å¾ˆå¤šé¡¹ç›®çš„æ€§èƒ½ä¼˜åŒ–æ–‡æ¡£é‡Œåªæœ‰ä¸€è¡Œå­—ï¼šâ€œå›¾ç‰‡å‹ç¼©ï¼Œä»£ç åˆ†åŒ…â€ã€‚ è¿™å¤ªåˆçº§äº†ã€‚</p>
<p>çœŸæ­£çš„ç³»ç»ŸåŒ–ä¼˜åŒ–ï¼Œåº”è¯¥åƒå‰¥æ´‹è‘±ä¸€æ ·ï¼Œåˆ†ä¸ºå››å±‚ï¼š</p>
<ol>
<li><strong>é“¾è·¯å±‚ (Network):</strong> è®©æ•°æ®è·‘å¾—æ›´å¿«ã€‚</li>
<li><strong>èµ„æºå±‚ (Assets):</strong> è®©æ•°æ®å˜å¾—æ›´å°ã€‚</li>
<li><strong>æ¸²æŸ“å±‚ (Runtime):</strong> è®©æµè§ˆå™¨ç”»å¾—æ›´é¡ºã€‚</li>
<li><strong>æ„ŸçŸ¥å±‚ (Psychology):</strong> è®©ç”¨æˆ·è§‰å¾—æ›´å¿«ã€‚</li>
</ol>
<p>æœ¬ç¯‡æˆ‘ä»¬å°†æŒ‰ç…§è¿™ä¸ªå±‚çº§ï¼Œæ¢³ç†å‡ºæ¶æ„å¸ˆçº§åˆ«çš„æˆ˜æœ¯æ‰‹å†Œã€‚</p>
</blockquote>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8daf9025d2184adf8b4bb83a4dba7669~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv546L5aOu5aOu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770773208&amp;x-signature=KmblQGtnamq6B0uF%2BGsqCplLtEQ%3D" alt="image.png" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-0">ç¬¬ä¸€å±‚ï¼šé“¾è·¯å±‚â€”â€”ç®¡é“çš„æ‹“å®½ä¸åŠ é€Ÿ</h2>
<p>è¿™æ˜¯ä¼˜åŒ–çš„â€œç‰©ç†åŸºç¡€â€ã€‚å¦‚æœé«˜é€Ÿå…¬è·¯åªæœ‰ä¸€æ¡è½¦é“ï¼Œä½ çš„æ³•æ‹‰åˆ©ï¼ˆä»£ç ï¼‰è·‘å¾—å†å¿«ä¹Ÿæ²¡ç”¨ã€‚</p>
<h3 data-id="heading-1">1.1 åè®®å‡çº§ï¼šä» HTTP/1.1 åˆ° QUIC</h3>
<ul>
<li>
<p><strong>ç—›ç‚¹ï¼š</strong> TCP çš„é˜Ÿå¤´é˜»å¡ï¼ˆHead-of-Line Blockingï¼‰å’Œæ…¢å¯åŠ¨ã€‚</p>
</li>
<li>
<p><strong>æˆ˜æœ¯ï¼š</strong></p>
<ul>
<li><strong>å…¨ç«™ HTTP/2:</strong> å¤šè·¯å¤ç”¨æ˜¯æ ‡é…ã€‚</li>
<li><strong>æ¿€è¿›çš„ HTTP/3 (QUIC):</strong> åŸºäº UDPï¼Œå½»åº•è§£å†³ä¸¢åŒ…å¯¼è‡´çš„é˜»å¡ï¼Œä¸”æ”¯æŒ 0-RTT å»ºè¿ï¼ˆç”¨æˆ·ç¬¬äºŒæ¬¡è®¿é—®æ—¶å‡ ä¹ 0 å»¶è¿Ÿï¼‰ã€‚</li>
<li><em>æ¶æ„å†³ç­–ï¼š</em> åœ¨ç½‘å…³å±‚ï¼ˆNginx/Ingressï¼‰å¼€å¯ QUIC æ”¯æŒï¼Œå¯¹ç§»åŠ¨ç«¯å¼±ç½‘ç¯å¢ƒæœ‰å¥‡æ•ˆã€‚</li>
</ul>
</li>
</ul>
<h3 data-id="heading-2">1.2 è¾¹ç¼˜è®¡ç®—ä¸ CDN ç­–ç•¥</h3>
<p>ä¸è¦åªæŠŠ CDN å½“ä½œå›¾ç‰‡å­˜å‚¨æ¡¶ã€‚</p>
<ul>
<li>
<p><strong>æˆ˜æœ¯ï¼š</strong></p>
<ul>
<li><strong>HTML è¾¹ç¼˜ç¼“å­˜:</strong> åˆ©ç”¨ Edge Computing (å¦‚ Cloudflare Workers) ç¼“å­˜ HTML é™æ€éƒ¨åˆ†ï¼ŒåŠ¨æ€æ•°æ®é€šè¿‡æµå¼ä¼ è¾“ (Streaming) è¡¥å…¨ã€‚</li>
<li><strong>DNS é¢„è§£æ:</strong> <code>&lt;link rel="dns-prefetch" href="//api.example.com"&gt;</code>ï¼Œåœ¨ JS å‘èµ·è¯·æ±‚å‰ï¼Œå…ˆæŠŠåŸŸåè§£æåšå¥½ã€‚</li>
</ul>
</li>
</ul>
<hr/>
<h2 data-id="heading-3">ç¬¬äºŒå±‚ï¼šèµ„æºå±‚â€”â€”ä½“ç§¯çš„æè‡´å‹ç¼©</h2>
<p>è¿™æ˜¯ä¼˜åŒ–çš„â€œå‡è‚¥è®¡åˆ’â€ã€‚ç½‘ç»œå†å¿«ï¼Œä¹Ÿæ‰›ä¸ä½ä½ å‘ 10MB çš„ JS åŒ…ã€‚</p>
<h3 data-id="heading-4">2.1 ç°ä»£æ ¼å¼çš„é™ç»´æ‰“å‡»</h3>
<ul>
<li>
<p><strong>å›¾ç‰‡ï¼š</strong> æ”¾å¼ƒ JPG/PNGã€‚å…¨é¢æ‹¥æŠ± <strong>AVIF</strong> (æ¯” WebP æ›´å° 20%)ã€‚</p>
<ul>
<li><em>å…¼å®¹æ–¹æ¡ˆï¼š</em> <code>&lt;picture&gt;</code> æ ‡ç­¾åšé™çº§å¤„ç†ã€‚</li>
</ul>
</li>
<li>
<p><strong>å­—ä½“ï¼š</strong> å­—ä½“æ–‡ä»¶é€šå¸¸æ˜¯ LCP çš„æ€æ‰‹ã€‚</p>
<ul>
<li><strong>å­é›†åŒ– (Subsetting):</strong> åªæ‰“åŒ…ç”¨åˆ°çš„å­—å½¢ã€‚</li>
<li><strong>Woff2:</strong> å‹ç¼©ç‡æœ€é«˜çš„å­—ä½“æ ¼å¼ã€‚</li>
</ul>
</li>
<li>
<p><strong>å‹ç¼©ç®—æ³•ï¼š</strong> å¼€å¯ <strong>Brotli (br)</strong> å‹ç¼©ï¼Œæ¯” Gzip å¼º 15%-20%ã€‚</p>
</li>
</ul>
<h3 data-id="heading-5">2.2 æ„å»ºç­–ç•¥ï¼šTree Shaking ä¸åˆ†åŒ…</h3>
<ul>
<li><strong>Deep Tree Shaking:</strong> ç¡®ä¿ä½ çš„ npm åŒ…æ˜¯ ESM æ ¼å¼ï¼Œå¹¶åœ¨ <code>package.json</code> ä¸­æ­£ç¡®é…ç½® <code>sideEffects: false</code>ï¼Œå¦åˆ™ Webpack ä¸æ•¢åˆ ä»£ç ã€‚</li>
<li><strong>è·¯ç”±çº§ä»£ç åˆ†å‰²:</strong> è¿™æ˜¯åŸºæ“ã€‚</li>
<li><strong>Granular Chunking (ç»†ç²’åº¦åˆ†åŒ…):</strong> ä¹Ÿå°±æ˜¯ Vite/Rollup çš„ç­–ç•¥ã€‚ä¸è¦æŠŠæ‰€æœ‰ <code>node_modules</code> æ‰“æˆä¸€ä¸ªå·¨å¤§çš„ <code>vendor.js</code>ï¼Œè€Œæ˜¯æ‹†åˆ†æˆå¤šä¸ªå°å—ï¼Œåˆ©ç”¨ HTTP/2 çš„å¹¶å‘èƒ½åŠ›ä¸‹è½½ï¼Œæœ€å¤§åŒ–ç¼“å­˜å‘½ä¸­ç‡ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-6">ç¬¬ä¸‰å±‚ï¼šæ¸²æŸ“å±‚â€”â€”æµè§ˆå™¨çš„å‡è´Ÿè¿åŠ¨</h2>
<p>è¿™æ˜¯ä¼˜åŒ–çš„â€œå†…åŠŸå¿ƒæ³•â€ã€‚èµ„æºä¸‹è½½å®Œäº†ï¼Œä¸»çº¿ç¨‹ï¼ˆMain Threadï¼‰å¦‚æœä¸å¹²æ´»ï¼Œé¡µé¢è¿˜æ˜¯ç™½çš„ã€‚</p>
<h3 data-id="heading-7">3.1 å…³é”®æ¸²æŸ“è·¯å¾„ (CRP) ä¼˜åŒ–</h3>
<p>æµè§ˆå™¨æ¸²æŸ“é¡µé¢çš„é¡ºåºæ˜¯ï¼šHTML -&gt; CSSOM -&gt; RenderTree -&gt; Layout -&gt; Paintã€‚</p>
<ul>
<li>
<p><strong>æˆ˜æœ¯ï¼š</strong></p>
<ul>
<li><strong>Critical CSS Inlining:</strong> æå–é¦–å±å¯è§çš„ CSSï¼Œç›´æ¥å†…è”åœ¨ HTML çš„ <code>&lt;style&gt;</code> é‡Œã€‚è®©é¡µé¢åœ¨ CSS æ–‡ä»¶è¿˜æ²¡ä¸‹è½½å®Œä¹‹å‰å°±èƒ½æ¸²æŸ“å‡ºæ ·å¼ã€‚</li>
<li><strong>å¼‚æ­¥åŠ è½½éå…³é”® CSS:</strong> <code>&lt;link rel="stylesheet" media="print" onload="this.media='all'"&gt;</code>ã€‚</li>
</ul>
</li>
</ul>
<h3 data-id="heading-8">3.2 é¿å…å›æµä¸é‡ç»˜ (Reflow &amp; Repaint)</h3>
<ul>
<li><strong>CSS æ–°ç‰¹æ€§ï¼š</strong> <code>content-visibility: auto</code>ã€‚è¿™ä¸ªå±æ€§å‘Šè¯‰æµè§ˆå™¨ï¼šâ€œå±å¹•å¤–çš„å…ƒç´ å…ˆåˆ«ç®—å¸ƒå±€â€ï¼Œç­‰æ»šåˆ°äº†å†ç®—ã€‚è¿™èƒ½æå¤§é™ä½é•¿åˆ—è¡¨é¡µé¢çš„æ¸²æŸ“æˆæœ¬ã€‚</li>
<li><strong>GPU åŠ é€Ÿï¼š</strong> å¯¹åŠ¨ç”»å…ƒç´ ä½¿ç”¨ <code>transform</code> å’Œ <code>opacity</code>ï¼Œå°†å›¾å±‚æå‡åˆ° GPU åˆæˆå±‚ï¼Œä¸å ç”¨ä¸»çº¿ç¨‹ CPUã€‚</li>
</ul>
<h3 data-id="heading-9">3.3 æ¡†æ¶å±‚é¢çš„ä¼˜åŒ–</h3>
<ul>
<li><strong>React:</strong> é¿å…ä¸å¿…è¦çš„ re-renderï¼ˆä½¿ç”¨ React Compiler æˆ– useMemoï¼‰ã€‚</li>
<li><strong>Vue:</strong> å–„ç”¨ <code>&lt;KeepAlive&gt;</code> ç¼“å­˜ç»„ä»¶å®ä¾‹ã€‚</li>
<li><strong>è™šæ‹Ÿåˆ—è¡¨ (Virtual Scroll):</strong> DOM èŠ‚ç‚¹æ°¸è¿œä¸è¦è¶…è¿‡ 1000 ä¸ªã€‚é•¿åˆ—è¡¨å¿…é¡»å›æ”¶ DOMã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-10">ç¬¬å››å±‚ï¼šæ„ŸçŸ¥å±‚â€”â€”å¿ƒç†æ—¶é—´çš„é­”æœ¯</h2>
<p>è¿™æ˜¯ä¼˜åŒ–çš„â€œéšœçœ¼æ³•â€ã€‚å½“ç‰©ç†é€Ÿåº¦è¾¾åˆ°æé™æ—¶ï¼Œæˆ‘ä»¬è¦æ¬ºéª—ç”¨æˆ·çš„å¤§è„‘ã€‚</p>
<h3 data-id="heading-11">4.1 éª¨æ¶å± (Skeleton) vs Loading è½¬åœˆ</h3>
<ul>
<li><strong>å¿ƒç†å­¦åŸç†ï¼š</strong> éª¨æ¶å±ç»™å‡ºäº†é¡µé¢çš„â€œç»“æ„é¢„æœŸâ€ï¼Œç”¨æˆ·ä¼šè§‰å¾—â€œåŠ è½½å·²ç»å¼€å§‹äº†â€ï¼Œç„¦è™‘æ„Ÿæ›´ä½ã€‚Loading è½¬åœˆåˆ™è®©ç”¨æˆ·è§‰å¾—â€œè¿˜åœ¨è¿æ¥æœåŠ¡å™¨â€ã€‚</li>
</ul>
<h3 data-id="heading-12">4.2 ä¹è§‚ UI (Optimistic UI)</h3>
<ul>
<li><strong>åœºæ™¯ï¼š</strong> ç”¨æˆ·ç‚¹èµã€è¯„è®ºã€‚</li>
<li><strong>æˆ˜æœ¯ï¼š</strong> å…ˆæ”¹ UI çŠ¶æ€ï¼ˆå˜çº¢ã€æ˜¾ç¤ºè¯„è®ºï¼‰ï¼Œå†å‘è¯·æ±‚ã€‚å¦‚æœè¯·æ±‚å¤±è´¥äº†ï¼Œå†æ‚„æ‚„å›æ»šå¹¶æç¤ºã€‚</li>
<li><strong>æ•ˆæœï¼š</strong> ç”¨æˆ·æ„Ÿè§‰æ“ä½œæ˜¯ <strong>0 å»¶è¿Ÿ</strong> çš„ã€‚</li>
</ul>
<h3 data-id="heading-13">4.3 é¢„æµ‹æ€§é¢„åŠ è½½ (Predictive Preloading)</h3>
<ul>
<li>
<p><strong>æˆ˜æœ¯ï¼š</strong></p>
<ul>
<li><strong>é¼ æ ‡æ‚¬åœé¢„åŠ è½½:</strong> å½“é¼ æ ‡ hover åˆ°é“¾æ¥ä¸Šè¶…è¿‡ 200msï¼Œæå¤§ç¨åç‚¹å‡»ï¼Œæ­¤æ—¶ç«‹åˆ»åå°åŠ è½½ä¸‹ä¸€ä¸ªé¡µé¢çš„èµ„æºã€‚</li>
<li><strong>Guess.js:</strong> åˆ©ç”¨ Google Analytics æ•°æ®ï¼ŒåŸºäºæœºå™¨å­¦ä¹ é¢„æµ‹ç”¨æˆ·ä¸‹ä¸€æ­¥æœ€å¯èƒ½å»çš„é¡µé¢ï¼Œå¹¶æå‰ <code>prefetch</code>ã€‚</li>
</ul>
</li>
</ul>
<hr/>
<h2 data-id="heading-14">äº”ã€ æ¶æ„å¸ˆçš„å†³ç­–çŸ©é˜µï¼šROI åˆ†æ</h2>
<p>æ‰‹é‡Œæœ‰è¿™ä¹ˆå¤šæˆ˜æœ¯ï¼Œå…ˆç”¨å“ªä¸ªï¼Ÿ æ¶æ„å¸ˆåˆ‡å¿Œâ€œä¸ºäº†ä¼˜åŒ–è€Œä¼˜åŒ–â€ã€‚ä½ éœ€è¦ä¸€ä¸ª <strong>æŠ•å…¥äº§å‡ºæ¯” (ROI)</strong> çŸ©é˜µã€‚</p>















































<table><thead><tr><th>æˆ˜æœ¯æ‰‹æ®µ</th><th>å®æ–½éš¾åº¦</th><th>æ”¶ç›Š (LCP/INP)</th><th>ä¼˜å…ˆçº§</th></tr></thead><tbody><tr><td><strong>å¼€å¯ HTTP/2 &amp; Gzip/Brotli</strong></td><td>ä½ (æ”¹é…ç½®)</td><td>é«˜</td><td><strong>P0 (å¿…é¡»åš)</strong></td></tr><tr><td><strong>å›¾ç‰‡æ ¼å¼å‡çº§ AVIF/WebP</strong></td><td>ä¸­ (æ”¹æ„å»º)</td><td>é«˜</td><td><strong>P0 (å¿…é¡»åš)</strong></td></tr><tr><td><strong>CDN ç¼“å­˜ç­–ç•¥</strong></td><td>ä½</td><td>ä¸­</td><td><strong>P1</strong></td></tr><tr><td><strong>è·¯ç”±æ‡’åŠ è½½</strong></td><td>ä½</td><td>ä¸­</td><td><strong>P1</strong></td></tr><tr><td><strong>å…³é”® CSS å†…è”</strong></td><td>é«˜ (æ˜“æ ·å¼é”™ä¹±)</td><td>ä¸­</td><td><strong>P2</strong></td></tr><tr><td><strong>Web Workers å¤šçº¿ç¨‹è®¡ç®—</strong></td><td>é«˜ (é‡æ„ä»£ç )</td><td>ä½ (ä»…ç‰¹å®šåœºæ™¯)</td><td><strong>P3</strong></td></tr></tbody></table>
<hr/>
<h2 data-id="heading-15">ç»“è¯­ï¼šæ€§èƒ½ä¼˜åŒ–çš„ç»ˆå±€</h2>
<p>ä¼˜åŒ–çš„æœ€é«˜å¢ƒç•Œï¼Œä¸æ˜¯æŠŠæ‰€æœ‰æŠ€å·§éƒ½ç”¨ä¸Šä¸€éï¼Œè€Œæ˜¯**â€œå› åœ°åˆ¶å®œâ€**ã€‚ å¯¹äºä¸€ä¸ªæ–°é—»ç½‘ç«™ï¼ŒLCP (é¦–å±å†…å®¹) æ˜¯å‘½è„‰ï¼›å¯¹äºä¸€ä¸ªåœ¨çº¿æ–‡æ¡£å·¥å…·ï¼ŒINP (äº¤äº’å“åº”) æ‰æ˜¯æ ¸å¿ƒã€‚</p>
<p>ç°åœ¨ï¼Œä½ çš„æ­¦å™¨åº“é‡Œå·²ç»è£…æ»¡äº†å„ç§é•¿æªçŸ­ç‚®ã€‚ ä½†æ˜¯ï¼Œ<strong>æ”»åŸå®¹æ˜“å®ˆåŸéš¾</strong>ã€‚ ä»Šå¤©ä½ æŠŠ LCP ä¼˜åŒ–åˆ°äº† 1.5sï¼Œä¸‹å‘¨å®ä¹ ç”Ÿæäº¤äº†ä¸€å¼  5MB çš„èƒŒæ™¯å›¾ï¼ŒLCP ç¬é—´å˜å› 5sã€‚</p>
<p>å¦‚ä½•é˜²æ­¢æ€§èƒ½é€€åŒ–ï¼Ÿå¦‚ä½•æŠŠæ€§èƒ½æ ‡å‡†å˜æˆåƒâ€œç¦æ­¢éšåœ°å¤§å°ä¾¿â€ä¸€æ ·çš„é“å¾‹ï¼Ÿ æˆ‘ä»¬éœ€è¦ <strong>CI/CD æµæ°´çº¿ä¸Šçš„å®ˆé—¨å‘˜</strong>ã€‚</p>
<blockquote>
<p><strong>Next Step:</strong> ä¸‹ä¸€èŠ‚ï¼Œæˆ‘ä»¬å°†è¿æ¥æœ¬é˜¶æ®µçš„æœ€ç»ˆç« ã€‚æˆ‘ä»¬å°†å­¦ä¹ å¦‚ä½•åœ¨ä»£ç æäº¤é˜¶æ®µï¼Œå°±è‡ªåŠ¨æ‹¦æˆªä¸åˆæ ¼çš„æ€§èƒ½ä»£ç ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Jetpack Compose ä»å…¥é—¨åˆ°ç²¾é€šï¼ˆäº”ï¼‰ï¼šåŠ¨ç”»ä¸äº¤äº’]]></title>    <link>https://juejin.cn/post/7602497125268946950</link>    <guid>https://juejin.cn/post/7602497125268946950</guid>    <pubDate>2026-02-04T03:05:13.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602497125268946950" data-draft-id="7602497125268930566" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Jetpack Compose ä»å…¥é—¨åˆ°ç²¾é€šï¼ˆäº”ï¼‰ï¼šåŠ¨ç”»ä¸äº¤äº’"/> <meta itemprop="keywords" content="Android,Android Jetpack,Kotlin"/> <meta itemprop="datePublished" content="2026-02-04T03:05:13.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é‚¹é˜¿æ¶›æ¶›æ¶›æ¶›æ¶›æ¶›æ¶›æ¶›"/> <meta itemprop="url" content="https://juejin.cn/user/3808364009106839"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Jetpack Compose ä»å…¥é—¨åˆ°ç²¾é€šï¼ˆäº”ï¼‰ï¼šåŠ¨ç”»ä¸äº¤äº’
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3808364009106839/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é‚¹é˜¿æ¶›æ¶›æ¶›æ¶›æ¶›æ¶›æ¶›æ¶›
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T03:05:13.000Z" title="Wed Feb 04 2026 03:05:13 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æ·±å…¥ç†è§£ Compose åŠ¨ç”»ç³»ç»Ÿæ¶æ„ï¼ŒæŒæ¡å±æ€§åŠ¨ç”»ã€è¿‡æ¸¡åŠ¨ç”»ã€æ‰‹åŠ¿å¤„ç†çš„å®Œæ•´å®ç°æ–¹æ¡ˆï¼Œä»¥åŠè‡ªå®šä¹‰åŠ¨ç”»çš„è®¾è®¡æ€è·¯ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-0">å‰è¨€</h2>
<p>åŠ¨ç”»æ˜¯æå‡ç”¨æˆ·ä½“éªŒçš„é‡è¦æ‰‹æ®µã€‚å¥½çš„åŠ¨ç”»èƒ½è®©ç•Œé¢æ›´æµç•…ã€æ›´è‡ªç„¶ï¼Œå¸®åŠ©ç”¨æˆ·ç†è§£ç•Œé¢å˜åŒ–ã€‚</p>
<p>Compose çš„åŠ¨ç”»ç³»ç»Ÿç›¸æ¯”ä¼ ç»Ÿ View ç³»ç»Ÿæœ‰è´¨çš„é£è·ƒï¼š</p>
<ul>
<li><strong>å£°æ˜å¼</strong>ï¼šç”¨ä»£ç æè¿°åŠ¨ç”»ç›®æ ‡çŠ¶æ€ï¼Œç³»ç»Ÿè‡ªåŠ¨å¤„ç†è¿‡æ¸¡</li>
<li><strong>å¯ç»„åˆ</strong>ï¼šåŠ¨ç”»å¯ä»¥åƒç»„ä»¶ä¸€æ ·ç»„åˆä½¿ç”¨</li>
<li><strong>é«˜æ€§èƒ½</strong>ï¼šåŸºäºåº•å±‚æ¸²æŸ“ä¼˜åŒ–ï¼Œ60fps æµç•…è¿è¡Œ</li>
</ul>
<p>æœ¬ç¯‡æ–‡ç« å°†æ·±å…¥è®²è§£ï¼š</p>
<ul>
<li>Compose åŠ¨ç”»ç³»ç»Ÿçš„æ¶æ„è®¾è®¡</li>
<li>å±æ€§åŠ¨ç”»ä¸è¿‡æ¸¡åŠ¨ç”»çš„å®ç°åŸç†</li>
<li>æ‰‹åŠ¿æ£€æµ‹ä¸å¤„ç†çš„å®Œæ•´æ–¹æ¡ˆ</li>
<li>è‡ªå®šä¹‰åŠ¨ç”»çš„è®¾è®¡æ€è·¯</li>
</ul>
<hr/>
<h2 data-id="heading-1">ä¸€ã€Compose åŠ¨ç”»ç³»ç»Ÿæ¶æ„</h2>
<h3 data-id="heading-2">1.1 åŠ¨ç”»ç³»ç»Ÿçš„å±‚æ¬¡ç»“æ„</h3>
<p>Compose åŠ¨ç”»ç³»ç»Ÿåˆ†ä¸ºä¸‰å±‚ï¼š</p>
<pre><code class="hljs language-css" lang="css">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Compose åŠ¨ç”»ç³»ç»Ÿæ¶æ„                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  é«˜å±‚ APIï¼ˆ declarative ï¼‰                                â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€ animate*AsStateï¼ˆå±æ€§åŠ¨ç”»ï¼‰                          â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€ AnimatedVisibilityï¼ˆå¯è§æ€§åŠ¨ç”»ï¼‰                     â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€ AnimatedContentï¼ˆå†…å®¹åˆ‡æ¢åŠ¨ç”»ï¼‰                      â”‚   â”‚
â”‚  â”‚  â””â”€â”€ Crossfadeï¼ˆæ·¡å…¥æ·¡å‡ºï¼‰                                â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                              â†“                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  ä¸­å±‚ APIï¼ˆ imperative ï¼‰                                 â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€ Animatableï¼ˆå¯æ§åŠ¨ç”»ï¼‰                               â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€ animateDecayï¼ˆè¡°å‡åŠ¨ç”»ï¼‰                             â”‚   â”‚
â”‚  â”‚  â””â”€â”€ <span class="hljs-attribute">Transition</span>ï¼ˆçŠ¶æ€è¿‡æ¸¡ï¼‰                               â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                              â†“                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  åº•å±‚ APIï¼ˆåº•å±‚æ§åˆ¶ï¼‰                                     â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€ <span class="hljs-attribute">Animation</span>ï¼ˆåŠ¨ç”»æ ¸å¿ƒï¼‰                                â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€ AnimationVectorï¼ˆåŠ¨ç”»å‘é‡ï¼‰                          â”‚   â”‚
â”‚  â”‚  â””â”€â”€ AnimationSpecï¼ˆåŠ¨ç”»è§„æ ¼ï¼‰                            â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h3 data-id="heading-3">1.2 åŠ¨ç”»çš„æ ¸å¿ƒæ¦‚å¿µ</h3>
<h4 data-id="heading-4">1.2.1 AnimationSpecï¼šåŠ¨ç”»è§„æ ¼</h4>
<p>AnimationSpec å®šä¹‰äº†åŠ¨ç”»çš„æ‰§è¡Œæ–¹å¼ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// 1. tweenï¼šè¡¥é—´åŠ¨ç”»ï¼ŒæŒ‡å®šæ—¶é•¿å’Œç¼“åŠ¨æ›²çº¿</span>
<span class="hljs-keyword">val</span> tweenSpec = tween&lt;<span class="hljs-built_in">Float</span>&gt;(
    durationMillis = <span class="hljs-number">300</span>,
    easing = FastOutSlowInEasing
)

<span class="hljs-comment">// 2. springï¼šå¼¹ç°§åŠ¨ç”»ï¼Œç‰©ç†æ¨¡æ‹Ÿ</span>
<span class="hljs-keyword">val</span> springSpec = spring&lt;<span class="hljs-built_in">Float</span>&gt;(
    dampingRatio = Spring.DampingRatioMediumBouncy,
    stiffness = Spring.StiffnessLow
)

<span class="hljs-comment">// 3. keyframesï¼šå…³é”®å¸§åŠ¨ç”»</span>
<span class="hljs-keyword">val</span> keyframesSpec = keyframes&lt;<span class="hljs-built_in">Float</span>&gt; {
    durationMillis = <span class="hljs-number">900</span>
    <span class="hljs-number">0f</span> at <span class="hljs-number">0</span>
    <span class="hljs-number">0.4f</span> at <span class="hljs-number">300</span>
    <span class="hljs-number">0.4f</span> at <span class="hljs-number">600</span>
    <span class="hljs-number">1f</span> at <span class="hljs-number">900</span>
}

<span class="hljs-comment">// 4. repeatableï¼šé‡å¤åŠ¨ç”»</span>
<span class="hljs-keyword">val</span> repeatableSpec = repeatable&lt;<span class="hljs-built_in">Float</span>&gt;(
    iterations = <span class="hljs-number">3</span>,
    animation = tween(<span class="hljs-number">100</span>),
    repeatMode = RepeatMode.Reverse
)

<span class="hljs-comment">// 5. infiniteRepeatableï¼šæ— é™é‡å¤</span>
<span class="hljs-keyword">val</span> infiniteSpec = infiniteRepeatable&lt;<span class="hljs-built_in">Float</span>&gt;(
    animation = tween(<span class="hljs-number">1000</span>),
    repeatMode = RepeatMode.Reverse
)
</code></pre>
<h4 data-id="heading-5">1.2.2 Easingï¼šç¼“åŠ¨æ›²çº¿</h4>
<p>ç¼“åŠ¨æ›²çº¿å†³å®šäº†åŠ¨ç”»çš„é€Ÿåº¦å˜åŒ–ï¼š</p>
<pre><code class="hljs">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ç¼“åŠ¨æ›²çº¿å¯¹æ¯”                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  Linearï¼ˆçº¿æ€§ï¼‰                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    åŒ€é€Ÿè¿åŠ¨                               â”‚   â”‚
â”‚  â”‚  é€Ÿåº¦: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â”‚  FastOutSlowInï¼ˆå…ˆå¿«åæ…¢ï¼‰                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    è‡ªç„¶å‡é€Ÿ                               â”‚   â”‚
â”‚  â”‚  é€Ÿåº¦: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â”‚  FastOutLinearInï¼ˆå…ˆå¿«ååŒ€é€Ÿï¼‰                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    å¿«é€Ÿå¯åŠ¨                               â”‚   â”‚
â”‚  â”‚  é€Ÿåº¦: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â”‚  LinearOutSlowInï¼ˆå…ˆåŒ€é€Ÿåæ…¢ï¼‰                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    ç¼“æ…¢åœæ­¢                               â”‚   â”‚
â”‚  â”‚  é€Ÿåº¦: â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â”‚  Springï¼ˆå¼¹ç°§ï¼‰                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    ç‰©ç†æ¨¡æ‹Ÿ                               â”‚   â”‚
â”‚  â”‚  é€Ÿåº¦: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–ˆâ–ˆâ–‘â–‘â–‘â–ˆâ–‘â–‘â–‘â–ˆâ–‘â–‘                 â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<hr/>
<h2 data-id="heading-6">äºŒã€å±æ€§åŠ¨ç”»ï¼ˆanimate*AsStateï¼‰</h2>
<h3 data-id="heading-7">2.1 ä»€ä¹ˆæ˜¯å±æ€§åŠ¨ç”»ï¼Ÿ</h3>
<p>å±æ€§åŠ¨ç”»æ˜¯æœ€å¸¸ç”¨çš„åŠ¨ç”» APIï¼Œç”¨äºå°†æŸä¸ªå±æ€§çš„å˜åŒ–è¿‡ç¨‹åŠ¨ç”»åŒ–ã€‚</p>
<h3 data-id="heading-8">2.2 animate*AsState ç³»åˆ—å‡½æ•°</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// 1. åŠ¨ç”»åŒ– Float å€¼</span>
<span class="hljs-keyword">val</span> alpha <span class="hljs-keyword">by</span> animateFloatAsState(
    targetValue = <span class="hljs-keyword">if</span> (visible) <span class="hljs-number">1f</span> <span class="hljs-keyword">else</span> <span class="hljs-number">0f</span>,
    animationSpec = tween(<span class="hljs-number">300</span>)
)

<span class="hljs-comment">// 2. åŠ¨ç”»åŒ– Dp å€¼</span>
<span class="hljs-keyword">val</span> size <span class="hljs-keyword">by</span> animateDpAsState(
    targetValue = <span class="hljs-keyword">if</span> (expanded) <span class="hljs-number">200.</span>dp <span class="hljs-keyword">else</span> <span class="hljs-number">100.</span>dp,
    animationSpec = spring()
)

<span class="hljs-comment">// 3. åŠ¨ç”»åŒ– Offset</span>
<span class="hljs-keyword">val</span> offset <span class="hljs-keyword">by</span> animateOffsetAsState(
    targetValue = <span class="hljs-keyword">if</span> (moved) Offset(<span class="hljs-number">100f</span>, <span class="hljs-number">100f</span>) <span class="hljs-keyword">else</span> Offset.Zero,
    animationSpec = tween(<span class="hljs-number">500</span>)
)

<span class="hljs-comment">// 4. åŠ¨ç”»åŒ– Color</span>
<span class="hljs-keyword">val</span> color <span class="hljs-keyword">by</span> animateColorAsState(
    targetValue = <span class="hljs-keyword">if</span> (selected) Color.Blue <span class="hljs-keyword">else</span> Color.Gray,
    animationSpec = tween(<span class="hljs-number">200</span>)
)

<span class="hljs-comment">// 5. åŠ¨ç”»åŒ–ä»»ä½•ç±»å‹ï¼ˆéœ€è¦æŒ‡å®š TwoWayConverterï¼‰</span>
<span class="hljs-keyword">val</span> rect <span class="hljs-keyword">by</span> animateValueAsState(
    targetValue = <span class="hljs-keyword">if</span> (expanded) Rect(<span class="hljs-number">0f</span>, <span class="hljs-number">0f</span>, <span class="hljs-number">200f</span>, <span class="hljs-number">200f</span>) <span class="hljs-keyword">else</span> Rect(<span class="hljs-number">0f</span>, <span class="hljs-number">0f</span>, <span class="hljs-number">100f</span>, <span class="hljs-number">100f</span>),
    typeConverter = Rect.VectorConverter,
    animationSpec = tween(<span class="hljs-number">300</span>)
)
</code></pre>
<h3 data-id="heading-9">2.3 å®æˆ˜ï¼šå¯å±•å¼€å¡ç‰‡</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">ExpandableCard</span><span class="hljs-params">(
    title: <span class="hljs-type">String</span>,
    content: <span class="hljs-type">String</span>
)</span></span> {
    <span class="hljs-keyword">var</span> expanded <span class="hljs-keyword">by</span> remember { mutableStateOf(<span class="hljs-literal">false</span>) }
    
    <span class="hljs-comment">// åŠ¨ç”»åŒ–é«˜åº¦</span>
    <span class="hljs-keyword">val</span> cardHeight <span class="hljs-keyword">by</span> animateDpAsState(
        targetValue = <span class="hljs-keyword">if</span> (expanded) <span class="hljs-number">200.</span>dp <span class="hljs-keyword">else</span> <span class="hljs-number">80.</span>dp,
        animationSpec = spring(
            dampingRatio = Spring.DampingRatioMediumBouncy,
            stiffness = Spring.StiffnessLow
        ),
        label = <span class="hljs-string">"cardHeight"</span>
    )
    
    <span class="hljs-comment">// åŠ¨ç”»åŒ–æ—‹è½¬è§’åº¦</span>
    <span class="hljs-keyword">val</span> rotation <span class="hljs-keyword">by</span> animateFloatAsState(
        targetValue = <span class="hljs-keyword">if</span> (expanded) <span class="hljs-number">180f</span> <span class="hljs-keyword">else</span> <span class="hljs-number">0f</span>,
        animationSpec = tween(<span class="hljs-number">300</span>),
        label = <span class="hljs-string">"rotation"</span>
    )
    
    Card(
        modifier = Modifier
            .fillMaxWidth()
            .height(cardHeight)
            .clickable { expanded = !expanded },
        colors = CardDefaults.cardColors(
            containerColor = MaterialTheme.colorScheme.surfaceVariant
        )
    ) {
        Column(
            modifier = Modifier.padding(<span class="hljs-number">16.</span>dp)
        ) {
            Row(
                modifier = Modifier.fillMaxWidth(),
                horizontalArrangement = Arrangement.SpaceBetween,
                verticalAlignment = Alignment.CenterVertically
            ) {
                Text(
                    text = title,
                    style = MaterialTheme.typography.titleMedium
                )
                
                Icon(
                    imageVector = Icons.Default.ExpandMore,
                    contentDescription = <span class="hljs-keyword">if</span> (expanded) <span class="hljs-string">"æ”¶èµ·"</span> <span class="hljs-keyword">else</span> <span class="hljs-string">"å±•å¼€"</span>,
                    modifier = Modifier.rotate(rotation)
                )
            }
            
            AnimatedVisibility(visible = expanded) {
                Text(
                    text = content,
                    style = MaterialTheme.typography.bodyMedium,
                    modifier = Modifier.padding(top = <span class="hljs-number">16.</span>dp)
                )
            }
        }
    }
}
</code></pre>
<h3 data-id="heading-10">2.4 animate*AsState çš„æºç è§£æ</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// animateFloatAsState ç®€åŒ–å®ç°</span>
<span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">animateFloatAsState</span><span class="hljs-params">(
    targetValue: <span class="hljs-type">Float</span>,
    animationSpec: <span class="hljs-type">AnimationSpec</span>&lt;<span class="hljs-type">Float</span>&gt; = defaultAnimationSpec,
    label: <span class="hljs-type">String</span> = <span class="hljs-string">"FloatAnimation"</span>
)</span></span>: State&lt;<span class="hljs-built_in">Float</span>&gt; {
    <span class="hljs-comment">// åˆ›å»º Animatable ä¿å­˜åŠ¨ç”»çŠ¶æ€</span>
    <span class="hljs-keyword">val</span> animatable = remember { Animatable(targetValue) }
    
    <span class="hljs-comment">// å½“ targetValue å˜åŒ–æ—¶å¯åŠ¨åŠ¨ç”»</span>
    LaunchedEffect(targetValue) {
        animatable.animateTo(
            targetValue = targetValue,
            animationSpec = animationSpec
        )
    }
    
    <span class="hljs-keyword">return</span> animatable.asState()
}
</code></pre>
<p><strong>æ‰§è¡Œæµç¨‹</strong>ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-bullet">1.</span> é¦–æ¬¡ç»„åˆ
   â”œâ”€â”€ åˆ›å»º Animatableï¼Œåˆå§‹å€¼ä¸º targetValue
   â”œâ”€â”€ è¿”å›å½“å‰å€¼
   
<span class="hljs-bullet">2.</span> targetValue å˜åŒ–
   â”œâ”€â”€ LaunchedEffect æ£€æµ‹åˆ°å˜åŒ–
   â”œâ”€â”€ å¯åŠ¨åŠ¨ç”»ï¼Œä»å½“å‰å€¼è¿‡æ¸¡åˆ°æ–°å€¼
   â”œâ”€â”€ æ¯å¸§æ›´æ–° Animatable çš„å€¼
   â”œâ”€â”€ è§¦å‘é‡ç»„ï¼ŒUI æ›´æ–°
   
<span class="hljs-bullet">3.</span> åŠ¨ç”»å®Œæˆ
   â”œâ”€â”€ Animatable çš„å€¼ç¨³å®šåœ¨ targetValue
   â”œâ”€â”€ åœæ­¢æ›´æ–°
</code></pre>
<hr/>
<h2 data-id="heading-11">ä¸‰ã€è¿‡æ¸¡åŠ¨ç”»</h2>
<h3 data-id="heading-12">3.1 AnimatedVisibilityï¼šå¯è§æ€§åŠ¨ç”»</h3>
<p>AnimatedVisibility ç”¨äºæ§åˆ¶ç»„ä»¶çš„æ˜¾ç¤º/éšè—åŠ¨ç”»ã€‚</p>
<h4 data-id="heading-13">3.1.1 åŸºæœ¬ç”¨æ³•</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">var</span> visible <span class="hljs-keyword">by</span> remember { mutableStateOf(<span class="hljs-literal">true</span>) }

AnimatedVisibility(
    visible = visible,
    enter = fadeIn() + expandVertically(),
    exit = fadeOut() + shrinkVertically()
) {
    Text(<span class="hljs-string">"Hello, World!"</span>)
}
</code></pre>
<h4 data-id="heading-14">3.1.2 å†…ç½®åŠ¨ç”»æ•ˆæœ</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// è¿›å…¥åŠ¨ç”»</span>
fadeIn(animationSpec = tween(<span class="hljs-number">300</span>))           <span class="hljs-comment">// æ·¡å…¥</span>
slideInHorizontally { it }                   <span class="hljs-comment">// æ°´å¹³æ»‘å…¥</span>
slideInVertically { it }                     <span class="hljs-comment">// å‚ç›´æ»‘å…¥</span>
expandIn(expandFrom = Alignment.TopStart)    <span class="hljs-comment">// æ‰©å±•è¿›å…¥</span>
expandHorizontally()                         <span class="hljs-comment">// æ°´å¹³æ‰©å±•</span>
expandVertically()                           <span class="hljs-comment">// å‚ç›´æ‰©å±•</span>
scaleIn(initialScale = <span class="hljs-number">0.5f</span>)                 <span class="hljs-comment">// ç¼©æ”¾è¿›å…¥</span>

<span class="hljs-comment">// é€€å‡ºåŠ¨ç”»</span>
fadeOut(animationSpec = tween(<span class="hljs-number">300</span>))          <span class="hljs-comment">// æ·¡å‡º</span>
slideOutHorizontally { it }                  <span class="hljs-comment">// æ°´å¹³æ»‘å‡º</span>
slideOutVertically { it }                    <span class="hljs-comment">// å‚ç›´æ»‘å‡º</span>
shrinkOut(shrinkTowards = Alignment.TopStart)<span class="hljs-comment">// æ”¶ç¼©é€€å‡º</span>
shrinkHorizontally()                         <span class="hljs-comment">// æ°´å¹³æ”¶ç¼©</span>
shrinkVertically()                           <span class="hljs-comment">// å‚ç›´æ”¶ç¼©</span>
scaleOut(targetScale = <span class="hljs-number">0.5f</span>)                 <span class="hljs-comment">// ç¼©æ”¾é€€å‡º</span>

<span class="hljs-comment">// ç»„åˆåŠ¨ç”»</span>
enter = fadeIn() + slideInVertically()       <span class="hljs-comment">// æ·¡å…¥ + ä¸Šæ»‘</span>
exit = fadeOut() + slideOutVertically()      <span class="hljs-comment">// æ·¡å‡º + ä¸‹æ»‘</span>
</code></pre>
<h4 data-id="heading-15">3.1.3 å®æˆ˜ï¼šåˆ—è¡¨é¡¹åˆ é™¤åŠ¨ç”»</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">DeletableListItem</span><span class="hljs-params">(
    item: <span class="hljs-type">String</span>,
    onDelete: () -&gt; <span class="hljs-type">Unit</span>
)</span></span> {
    <span class="hljs-keyword">var</span> visible <span class="hljs-keyword">by</span> remember { mutableStateOf(<span class="hljs-literal">true</span>) }
    
    AnimatedVisibility(
        visible = visible,
        enter = fadeIn() + expandVertically(),
        exit = fadeOut() + shrinkVertically(
            animationSpec = tween(<span class="hljs-number">300</span>),
            shrinkTowards = Alignment.Top
        )
    ) {
        Card(
            modifier = Modifier
                .fillMaxWidth()
                .padding(<span class="hljs-number">8.</span>dp)
        ) {
            Row(
                modifier = Modifier.padding(<span class="hljs-number">16.</span>dp),
                horizontalArrangement = Arrangement.SpaceBetween
            ) {
                Text(item)
                IconButton(
                    onClick = {
                        visible = <span class="hljs-literal">false</span>  <span class="hljs-comment">// è§¦å‘åŠ¨ç”»</span>
                        <span class="hljs-comment">// åŠ¨ç”»å®ŒæˆåçœŸæ­£åˆ é™¤</span>
                        Handler(Looper.getMainLooper()).postDelayed({
                            onDelete()
                        }, <span class="hljs-number">300</span>)
                    }
                ) {
                    Icon(Icons.Default.Delete, contentDescription = <span class="hljs-string">"åˆ é™¤"</span>)
                }
            }
        }
    }
}
</code></pre>
<h3 data-id="heading-16">3.2 AnimatedContentï¼šå†…å®¹åˆ‡æ¢åŠ¨ç”»</h3>
<p>AnimatedContent ç”¨äºåœ¨å†…å®¹å˜åŒ–æ—¶æ’­æ”¾è¿‡æ¸¡åŠ¨ç”»ã€‚</p>
<h4 data-id="heading-17">3.2.1 åŸºæœ¬ç”¨æ³•</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">var</span> count <span class="hljs-keyword">by</span> remember { mutableStateOf(<span class="hljs-number">0</span>) }

AnimatedContent(
    targetState = count,
    transitionSpec = {
        <span class="hljs-comment">// è¿›å…¥åŠ¨ç”»</span>
        (slideInVertically { it } + fadeIn())
            .togetherWith(
                <span class="hljs-comment">// é€€å‡ºåŠ¨ç”»</span>
                slideOutVertically { -it } + fadeOut()
            )
    },
    label = <span class="hljs-string">"count"</span>
) { targetCount -&gt;
    Text(
        text = <span class="hljs-string">"<span class="hljs-variable">$targetCount</span>"</span>,
        style = MaterialTheme.typography.headlineLarge
    )
}
</code></pre>
<h4 data-id="heading-18">3.2.2 å®æˆ˜ï¼šé¡µé¢åˆ‡æ¢åŠ¨ç”»</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">sealed</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Screen</span> {
    <span class="hljs-keyword">data</span> <span class="hljs-keyword">object</span> Home : Screen()
    <span class="hljs-keyword">data</span> <span class="hljs-keyword">object</span> Profile : Screen()
    <span class="hljs-keyword">data</span> <span class="hljs-keyword">object</span> Settings : Screen()
}

<span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">AppNavigation</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">var</span> currentScreen <span class="hljs-keyword">by</span> remember { mutableStateOf&lt;Screen&gt;(Screen.Home) }
    
    AnimatedContent(
        targetState = currentScreen,
        transitionSpec = {
            <span class="hljs-comment">// æ ¹æ®å¯¼èˆªæ–¹å‘é€‰æ‹©åŠ¨ç”»</span>
            <span class="hljs-keyword">val</span> direction = <span class="hljs-keyword">if</span> (targetState &gt; initialState) <span class="hljs-number">1</span> <span class="hljs-keyword">else</span> -<span class="hljs-number">1</span>
            
            (slideInHorizontally { it * direction } + fadeIn())
                .togetherWith(
                    slideOutHorizontally { -it * direction } + fadeOut()
                )
        },
        label = <span class="hljs-string">"screen"</span>
    ) { screen -&gt;
        <span class="hljs-keyword">when</span> (screen) {
            <span class="hljs-keyword">is</span> Screen.Home -&gt; HomeScreen()
            <span class="hljs-keyword">is</span> Screen.Profile -&gt; ProfileScreen()
            <span class="hljs-keyword">is</span> Screen.Settings -&gt; SettingsScreen()
        }
    }
}
</code></pre>
<h3 data-id="heading-19">3.3 Crossfadeï¼šæ·¡å…¥æ·¡å‡º</h3>
<p>Crossfade ç”¨äºä¸¤ä¸ªå†…å®¹ä¹‹é—´çš„äº¤å‰æ·¡å…¥æ·¡å‡ºã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">var</span> currentPage <span class="hljs-keyword">by</span> remember { mutableStateOf(<span class="hljs-string">"A"</span>) }

Crossfade(
    targetState = currentPage,
    animationSpec = tween(<span class="hljs-number">500</span>),
    label = <span class="hljs-string">"page"</span>
) { page -&gt;
    <span class="hljs-keyword">when</span> (page) {
        <span class="hljs-string">"A"</span> -&gt; PageA()
        <span class="hljs-string">"B"</span> -&gt; PageB()
        <span class="hljs-string">"C"</span> -&gt; PageC()
    }
}
</code></pre>
<hr/>
<h2 data-id="heading-20">å››ã€Animatableï¼šå¯æ§åŠ¨ç”»</h2>
<h3 data-id="heading-21">4.1 ä»€ä¹ˆæ˜¯ Animatableï¼Ÿ</h3>
<p>Animatable æ˜¯ä¸€ä¸ªå¯åŠ¨ç”»åŒ–çš„å€¼å®¹å™¨ï¼Œæä¾›äº†æ›´ç»†ç²’åº¦çš„åŠ¨ç”»æ§åˆ¶ï¼š</p>
<ul>
<li>åœæ­¢åŠ¨ç”»</li>
<li>è·³è½¬ç›®æ ‡å€¼</li>
<li>å¿«ç…§å½“å‰å€¼</li>
</ul>
<h3 data-id="heading-22">4.2 Animatable çš„åŸºæœ¬ç”¨æ³•</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">DraggableBox</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">val</span> offsetX = remember { Animatable(<span class="hljs-number">0f</span>) }
    <span class="hljs-keyword">val</span> scope = rememberCoroutineScope()
    
    Box(
        modifier = Modifier
            .offset { IntOffset(offsetX.value.toInt(), <span class="hljs-number">0</span>) }
            .size(<span class="hljs-number">100.</span>dp)
            .background(Color.Blue)
            .pointerInput(<span class="hljs-built_in">Unit</span>) {
                detectDragGestures(
                    onDrag = { change, dragAmount -&gt;
                        change.consume()
                        scope.launch {
                            offsetX.snapTo(offsetX.value + dragAmount.x)
                        }
                    },
                    onDragEnd = {
                        scope.launch {
                            <span class="hljs-comment">// å¼¹å›åŸç‚¹</span>
                            offsetX.animateTo(
                                targetValue = <span class="hljs-number">0f</span>,
                                animationSpec = spring()
                            )
                        }
                    }
                )
            }
    )
}
</code></pre>
<h3 data-id="heading-23">4.3 Animatable çš„æ–¹æ³•</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">val</span> animatable = remember { Animatable(<span class="hljs-number">0f</span>) }

<span class="hljs-comment">// 1. animateToï¼šåŠ¨ç”»åˆ°ç›®æ ‡å€¼</span>
animatable.animateTo(<span class="hljs-number">100f</span>, tween(<span class="hljs-number">300</span>))

<span class="hljs-comment">// 2. snapToï¼šç«‹å³è·³è½¬åˆ°ç›®æ ‡å€¼ï¼ˆæ— åŠ¨ç”»ï¼‰</span>
animatable.snapTo(<span class="hljs-number">100f</span>)

<span class="hljs-comment">// 3. stopï¼šåœæ­¢å½“å‰åŠ¨ç”»</span>
animatable.stop()

<span class="hljs-comment">// 4. è·å–å½“å‰å€¼</span>
<span class="hljs-keyword">val</span> currentValue = animatable.value
</code></pre>
<hr/>
<h2 data-id="heading-24">äº”ã€æ‰‹åŠ¿å¤„ç†</h2>
<h3 data-id="heading-25">5.1 ç‚¹å‡»æ‰‹åŠ¿</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// 1. clickableï¼šåŸºç¡€ç‚¹å‡»</span>
Box(
    modifier = Modifier.clickable { <span class="hljs-comment">/* ç‚¹å‡»å¤„ç† */</span> }
)

<span class="hljs-comment">// 2. combinedClickableï¼šç»„åˆç‚¹å‡»ï¼ˆå•å‡»ã€åŒå‡»ã€é•¿æŒ‰ï¼‰</span>
Box(
    modifier = Modifier.combinedClickable(
        onClick = { <span class="hljs-comment">/* å•å‡» */</span> },
        onDoubleClick = { <span class="hljs-comment">/* åŒå‡» */</span> },
        onLongClick = { <span class="hljs-comment">/* é•¿æŒ‰ */</span> }
    )
)

<span class="hljs-comment">// 3. indicationï¼šè‡ªå®šä¹‰æ¶Ÿæ¼ªæ•ˆæœ</span>
Box(
    modifier = Modifier.clickable(
        interactionSource = remember { MutableInteractionSource() },
        indication = ripple(color = Color.Red),
        onClick = { }
    )
)
</code></pre>
<h3 data-id="heading-26">5.2 æ‹–åŠ¨æ‰‹åŠ¿</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">DraggableCard</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">var</span> offsetX <span class="hljs-keyword">by</span> remember { mutableStateOf(<span class="hljs-number">0f</span>) }
    <span class="hljs-keyword">var</span> offsetY <span class="hljs-keyword">by</span> remember { mutableStateOf(<span class="hljs-number">0f</span>) }
    
    Card(
        modifier = Modifier
            .offset { IntOffset(offsetX.toInt(), offsetY.toInt()) }
            .pointerInput(<span class="hljs-built_in">Unit</span>) {
                detectDragGestures { change, dragAmount -&gt;
                    change.consume()
                    offsetX += dragAmount.x
                    offsetY += dragAmount.y
                }
            }
    ) {
        Text(<span class="hljs-string">"æ‹–åŠ¨æˆ‘"</span>)
    }
}
</code></pre>
<h3 data-id="heading-27">5.3 æ»‘åŠ¨æ‰‹åŠ¿</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">SwipeableCard</span><span class="hljs-params">(
    onDismiss: () -&gt; <span class="hljs-type">Unit</span>
)</span></span> {
    <span class="hljs-keyword">val</span> scope = rememberCoroutineScope()
    <span class="hljs-keyword">val</span> offsetX = remember { Animatable(<span class="hljs-number">0f</span>) }
    
    <span class="hljs-comment">// æ»‘åŠ¨é˜ˆå€¼</span>
    <span class="hljs-keyword">val</span> dismissThreshold = <span class="hljs-number">300f</span>
    
    Card(
        modifier = Modifier
            .offset { IntOffset(offsetX.value.toInt(), <span class="hljs-number">0</span>) }
            .pointerInput(<span class="hljs-built_in">Unit</span>) {
                detectHorizontalDragGestures(
                    onDragEnd = {
                        scope.launch {
                            <span class="hljs-keyword">if</span> (abs(offsetX.value) &gt; dismissThreshold) {
                                <span class="hljs-comment">// æ»‘è¿‡é˜ˆå€¼ï¼Œæ‰§è¡Œåˆ é™¤</span>
                                offsetX.animateTo(
                                    <span class="hljs-keyword">if</span> (offsetX.value &gt; <span class="hljs-number">0</span>) <span class="hljs-number">1000f</span> <span class="hljs-keyword">else</span> -<span class="hljs-number">1000f</span>
                                )
                                onDismiss()
                            } <span class="hljs-keyword">else</span> {
                                <span class="hljs-comment">// æœªæ»‘è¿‡é˜ˆå€¼ï¼Œå¼¹å›</span>
                                offsetX.animateTo(<span class="hljs-number">0f</span>, spring())
                            }
                        }
                    },
                    onHorizontalDrag = { change, dragAmount -&gt;
                        change.consume()
                        scope.launch {
                            offsetX.snapTo(offsetX.value + dragAmount)
                        }
                    }
                )
            }
    ) {
        Text(<span class="hljs-string">"å·¦å³æ»‘åŠ¨"</span>)
    }
}
</code></pre>
<h3 data-id="heading-28">5.4 ç¼©æ”¾æ‰‹åŠ¿</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">ZoomableImage</span><span class="hljs-params">(
    painter: <span class="hljs-type">Painter</span>
)</span></span> {
    <span class="hljs-keyword">var</span> scale <span class="hljs-keyword">by</span> remember { mutableStateOf(<span class="hljs-number">1f</span>) }
    <span class="hljs-keyword">var</span> offsetX <span class="hljs-keyword">by</span> remember { mutableStateOf(<span class="hljs-number">0f</span>) }
    <span class="hljs-keyword">var</span> offsetY <span class="hljs-keyword">by</span> remember { mutableStateOf(<span class="hljs-number">0f</span>) }
    
    Image(
        painter = painter,
        contentDescription = <span class="hljs-literal">null</span>,
        modifier = Modifier
            .fillMaxSize()
            .graphicsLayer {
                scaleX = scale
                scaleY = scale
                translationX = offsetX
                translationY = offsetY
            }
            .pointerInput(<span class="hljs-built_in">Unit</span>) {
                detectTransformGestures { _, pan, zoom, _ -&gt;
                    scale = (scale * zoom).coerceIn(<span class="hljs-number">1f</span>, <span class="hljs-number">5f</span>)
                    offsetX += pan.x
                    offsetY += pan.y
                }
            }
    )
}
</code></pre>
<h3 data-id="heading-29">5.5 åµŒå¥—æ»šåŠ¨</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">NestedScrollDemo</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">val</span> scrollState = rememberScrollState()
    
    Column(
        modifier = Modifier
            .fillMaxSize()
            .nestedScroll(
                connection = remember {
                    <span class="hljs-keyword">object</span> : NestedScrollConnection {
                        <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onPreScroll</span><span class="hljs-params">(
                            available: <span class="hljs-type">Offset</span>,
                            source: <span class="hljs-type">NestedScrollSource</span>
                        )</span></span>: Offset {
                            <span class="hljs-comment">// åœ¨å­ç»„ä»¶æ»šåŠ¨å‰å¤„ç†</span>
                            <span class="hljs-keyword">return</span> Offset.Zero
                        }
                        
                        <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onPostScroll</span><span class="hljs-params">(
                            consumed: <span class="hljs-type">Offset</span>,
                            available: <span class="hljs-type">Offset</span>,
                            source: <span class="hljs-type">NestedScrollSource</span>
                        )</span></span>: Offset {
                            <span class="hljs-comment">// åœ¨å­ç»„ä»¶æ»šåŠ¨åå¤„ç†</span>
                            <span class="hljs-keyword">return</span> Offset.Zero
                        }
                    }
                }
            )
            .verticalScroll(scrollState)
    ) {
        <span class="hljs-comment">// å†…å®¹</span>
    }
}
</code></pre>
<hr/>
<h2 data-id="heading-30">å…­ã€è‡ªå®šä¹‰åŠ¨ç”»</h2>
<h3 data-id="heading-31">6.1 æ— é™å¾ªç¯åŠ¨ç”»</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">PulsingDot</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">val</span> infiniteTransition = rememberInfiniteTransition(label = <span class="hljs-string">"pulse"</span>)
    
    <span class="hljs-keyword">val</span> scale <span class="hljs-keyword">by</span> infiniteTransition.animateFloat(
        initialValue = <span class="hljs-number">1f</span>,
        targetValue = <span class="hljs-number">1.5f</span>,
        animationSpec = infiniteRepeatable(
            animation = tween(<span class="hljs-number">1000</span>),
            repeatMode = RepeatMode.Reverse
        ),
        label = <span class="hljs-string">"scale"</span>
    )
    
    <span class="hljs-keyword">val</span> alpha <span class="hljs-keyword">by</span> infiniteTransition.animateFloat(
        initialValue = <span class="hljs-number">1f</span>,
        targetValue = <span class="hljs-number">0.5f</span>,
        animationSpec = infiniteRepeatable(
            animation = tween(<span class="hljs-number">1000</span>),
            repeatMode = RepeatMode.Reverse
        ),
        label = <span class="hljs-string">"alpha"</span>
    )
    
    Box(
        modifier = Modifier
            .size(<span class="hljs-number">20.</span>dp)
            .scale(scale)
            .alpha(alpha)
            .background(Color.Red, CircleShape)
    )
}
</code></pre>
<h3 data-id="heading-32">6.2 å…³é”®å¸§åŠ¨ç”»</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">BouncingBall</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">val</span> ballY <span class="hljs-keyword">by</span> animateFloatAsState(
        targetValue = <span class="hljs-number">300f</span>,
        animationSpec = keyframes {
            durationMillis = <span class="hljs-number">1000</span>
            <span class="hljs-number">0f</span> at <span class="hljs-number">0</span> with FastOutSlowInEasing
            <span class="hljs-number">300f</span> at <span class="hljs-number">300</span> with LinearEasing
            <span class="hljs-number">150f</span> at <span class="hljs-number">500</span> with FastOutSlowInEasing
            <span class="hljs-number">300f</span> at <span class="hljs-number">700</span> with LinearEasing
            <span class="hljs-number">225f</span> at <span class="hljs-number">850</span> with FastOutSlowInEasing
            <span class="hljs-number">300f</span> at <span class="hljs-number">1000</span>
        },
        label = <span class="hljs-string">"bounce"</span>
    )
    
    Box(
        modifier = Modifier
            .offset(y = ballY.dp)
            .size(<span class="hljs-number">50.</span>dp)
            .background(Color.Blue, CircleShape)
    )
}
</code></pre>
<h3 data-id="heading-33">6.3 æ‰‹åŠ¿é©±åŠ¨çš„åŠ¨ç”»</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">SwipeToDismissItem</span><span class="hljs-params">(
    content: @<span class="hljs-type">Composable</span> () -&gt; <span class="hljs-type">Unit</span>,
    onDismiss: () -&gt; <span class="hljs-type">Unit</span>
)</span></span> {
    <span class="hljs-keyword">val</span> scope = rememberCoroutineScope()
    <span class="hljs-keyword">val</span> offsetX = remember { Animatable(<span class="hljs-number">0f</span>) }
    
    Box(
        modifier = Modifier
            .offset { IntOffset(offsetX.value.toInt(), <span class="hljs-number">0</span>) }
            .draggable(
                orientation = Orientation.Horizontal,
                state = rememberDraggableState { delta -&gt;
                    scope.launch {
                        offsetX.snapTo(offsetX.value + delta)
                    }
                },
                onDragStopped = {
                    scope.launch {
                        <span class="hljs-keyword">if</span> (abs(offsetX.value) &gt; <span class="hljs-number">200f</span>) {
                            offsetX.animateTo(<span class="hljs-keyword">if</span> (offsetX.value &gt; <span class="hljs-number">0</span>) <span class="hljs-number">1000f</span> <span class="hljs-keyword">else</span> -<span class="hljs-number">1000f</span>)
                            onDismiss()
                        } <span class="hljs-keyword">else</span> {
                            offsetX.animateTo(<span class="hljs-number">0f</span>, spring())
                        }
                    }
                }
            )
    ) {
        content()
    }
}
</code></pre>
<hr/>
<h2 data-id="heading-34">ä¸ƒã€åŠ¨ç”»æ€§èƒ½ä¼˜åŒ–</h2>
<h3 data-id="heading-35">7.1 åŠ¨ç”»æ€§èƒ½åŸåˆ™</h3>
<pre><code class="hljs language-arduino" lang="arduino">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    åŠ¨ç”»æ€§èƒ½ä¼˜åŒ–åŸåˆ™                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  âœ… æ¨è                                                         â”‚
â”‚  â”œâ”€â”€ ä½¿ç”¨ graphicsLayer è¿›è¡Œå˜æ¢ï¼ˆscaleã€rotationã€alphaï¼‰       â”‚
â”‚  â”œâ”€â”€ ä½¿ç”¨ offset è¿›è¡Œä½ç½®ç§»åŠ¨                                    â”‚
â”‚  â”œâ”€â”€ é¿å…åŠ¨ç”»åŒ–å°ºå¯¸å˜åŒ–ï¼ˆwidthã€heightï¼‰                         â”‚
â”‚  â””â”€â”€ ä½¿ç”¨ derivedStateOf å‡å°‘ä¸å¿…è¦çš„åŠ¨ç”»è®¡ç®—                    â”‚
â”‚                                                                 â”‚
â”‚  âŒ é¿å…                                                         â”‚
â”‚  â”œâ”€â”€ åŠ¨ç”»åŒ–å¤æ‚å¸ƒå±€ï¼ˆConstraintLayoutã€è‡ªå®šä¹‰ Layoutï¼‰           â”‚
â”‚  â”œâ”€â”€ åœ¨åŠ¨ç”»ä¸­è¯»å–/å†™å…¥å¤§é‡çŠ¶æ€                                   â”‚
â”‚  â””â”€â”€ åŒæ—¶è¿è¡Œè¿‡å¤šçš„åŠ¨ç”»                                          â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h3 data-id="heading-36">7.2 ä½¿ç”¨ graphicsLayer ä¼˜åŒ–</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// âœ… æ¨èï¼šä½¿ç”¨ graphicsLayer è¿›è¡Œå˜æ¢</span>
Box(
    modifier = Modifier
        .graphicsLayer {
            scaleX = scale
            scaleY = scale
            rotationZ = rotation
            alpha = alpha
            translationX = offsetX
            translationY = offsetY
        }
)

<span class="hljs-comment">// âŒ é¿å…ï¼šç›´æ¥ä¿®æ”¹å°ºå¯¸</span>
Box(
    modifier = Modifier
        .size(size)  <span class="hljs-comment">// è¿™ä¼šè§¦å‘é‡æ–°æµ‹é‡å’Œå¸ƒå±€</span>
)
</code></pre>
<h3 data-id="heading-37">7.3 åŠ¨ç”»è°ƒè¯•</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// ä½¿ç”¨ label æ ‡è¯†åŠ¨ç”»ï¼Œä¾¿äºè°ƒè¯•</span>
<span class="hljs-keyword">val</span> alpha <span class="hljs-keyword">by</span> animateFloatAsState(
    targetValue = <span class="hljs-keyword">if</span> (visible) <span class="hljs-number">1f</span> <span class="hljs-keyword">else</span> <span class="hljs-number">0f</span>,
    label = <span class="hljs-string">"fadeAlpha"</span>  <span class="hljs-comment">// åœ¨ Android Studio åŠ¨ç”»æ£€æŸ¥å™¨ä¸­æ˜¾ç¤º</span>
)
</code></pre>
<hr/>
<h2 data-id="heading-38">å…«ã€æœ¬ç¯‡å°ç»“</h2>
<p>ä»Šå¤©æˆ‘ä»¬æ·±å…¥æ¢è®¨äº† Compose çš„åŠ¨ç”»ä¸äº¤äº’ç³»ç»Ÿï¼š</p>
<h3 data-id="heading-39">åŠ¨ç”»ç³»ç»Ÿæ¶æ„</h3>
<ul>
<li>ç†è§£äº†é«˜å±‚ã€ä¸­å±‚ã€åº•å±‚ API çš„åˆ†å±‚è®¾è®¡</li>
<li>æŒæ¡äº† AnimationSpec å’Œ Easing çš„ä½¿ç”¨</li>
</ul>
<h3 data-id="heading-40">å±æ€§åŠ¨ç”»</h3>
<ul>
<li>æŒæ¡äº† animate*AsState ç³»åˆ—å‡½æ•°</li>
<li>ç†è§£äº† Animatable çš„åº•å±‚å®ç°</li>
</ul>
<h3 data-id="heading-41">è¿‡æ¸¡åŠ¨ç”»</h3>
<ul>
<li>æŒæ¡äº† AnimatedVisibilityã€AnimatedContentã€Crossfade</li>
<li>å­¦ä¼šäº†ç»„åˆåŠ¨ç”»æ•ˆæœ</li>
</ul>
<h3 data-id="heading-42">æ‰‹åŠ¿å¤„ç†</h3>
<ul>
<li>æŒæ¡äº†ç‚¹å‡»ã€æ‹–åŠ¨ã€æ»‘åŠ¨ã€ç¼©æ”¾æ‰‹åŠ¿</li>
<li>ç†è§£äº†åµŒå¥—æ»šåŠ¨çš„å¤„ç†</li>
</ul>
<h3 data-id="heading-43">è‡ªå®šä¹‰åŠ¨ç”»</h3>
<ul>
<li>å­¦ä¼šäº†æ— é™å¾ªç¯åŠ¨ç”»ã€å…³é”®å¸§åŠ¨ç”»</li>
<li>æŒæ¡äº†æ‰‹åŠ¿é©±åŠ¨çš„åŠ¨ç”»</li>
</ul>
<h3 data-id="heading-44">æ€§èƒ½ä¼˜åŒ–</h3>
<ul>
<li>ç†è§£äº†åŠ¨ç”»æ€§èƒ½åŸåˆ™</li>
<li>å­¦ä¼šäº†ä½¿ç”¨ graphicsLayer ä¼˜åŒ–</li>
</ul>
<hr/>
<h2 data-id="heading-45">ä¸‹ç¯‡é¢„å‘Š</h2>
<p><strong>ç¬¬å…­ç¯‡ï¼šæ¶æ„ä¸å·¥ç¨‹åŒ–</strong> å°†æ·±å…¥è®²è§£ï¼š</p>
<ul>
<li>Navigation ç»„ä»¶ä¸ Compose é›†æˆ</li>
<li>Hilt ä¾èµ–æ³¨å…¥åœ¨ Compose ä¸­çš„åº”ç”¨</li>
<li>å‰¯ä½œç”¨ API è¯¦è§£</li>
<li>Compose æ€§èƒ½ä¼˜åŒ–å®æˆ˜</li>
</ul>
<p>æ•¬è¯·æœŸå¾…ï¼</p>
<hr/>
<blockquote>
<p>ğŸ“Œ <strong>ç³»åˆ—æ–‡ç« å¯¼èˆª</strong></p>
<ul>
<li>ç¬¬ä¸€ç¯‡ï¼šåˆè¯† Compose âœ…</li>
<li>ç¬¬äºŒç¯‡ï¼šæ ¸å¿ƒåŸºçŸ³ âœ…</li>
<li>ç¬¬ä¸‰ç¯‡ï¼šçŠ¶æ€ç®¡ç† âœ…</li>
<li>ç¬¬å››ç¯‡ï¼šMaterial ç»„ä»¶ä¸ä¸»é¢˜ âœ…</li>
<li>ç¬¬äº”ç¯‡ï¼šåŠ¨ç”»ä¸äº¤äº’ï¼ˆå½“å‰ï¼‰âœ…</li>
<li>ç¬¬å…­ç¯‡ï¼šæ¶æ„ä¸å·¥ç¨‹åŒ–</li>
<li>ç¬¬ä¸ƒç¯‡ï¼šé«˜çº§ç‰¹æ€§ä¸å®æˆ˜</li>
</ul>
</blockquote>
<hr/>
<p>å¦‚æœè¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©ï¼Œæ¬¢è¿ <strong>ç‚¹èµ</strong>ã€<strong>æ”¶è—</strong>ã€<strong>å…³æ³¨</strong>ï¼æœ‰ä»»ä½•é—®é¢˜å¯ä»¥åœ¨è¯„è®ºåŒºç•™è¨€ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Java ä»£ç æ³¨é‡Šçš„è‰ºæœ¯ï¼šæ„å»ºé«˜è´¨é‡ã€å¯è¯»æ€§ä¸æ¶æ„çº§æ–‡æ¡£çš„ç»ˆææŒ‡å—]]></title>    <link>https://juejin.cn/post/7602497125269012486</link>    <guid>https://juejin.cn/post/7602497125269012486</guid>    <pubDate>2026-02-04T03:11:54.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602497125269012486" data-draft-id="7602454700504776745" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Java ä»£ç æ³¨é‡Šçš„è‰ºæœ¯ï¼šæ„å»ºé«˜è´¨é‡ã€å¯è¯»æ€§ä¸æ¶æ„çº§æ–‡æ¡£çš„ç»ˆææŒ‡å—"/> <meta itemprop="keywords" content="åç«¯,Java,ä»£ç è§„èŒƒ"/> <meta itemprop="datePublished" content="2026-02-04T03:11:54.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Shepherd"/> <meta itemprop="url" content="https://juejin.cn/user/3415500769991869"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Java ä»£ç æ³¨é‡Šçš„è‰ºæœ¯ï¼šæ„å»ºé«˜è´¨é‡ã€å¯è¯»æ€§ä¸æ¶æ„çº§æ–‡æ¡£çš„ç»ˆææŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3415500769991869/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Shepherd
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T03:11:54.000Z" title="Wed Feb 04 2026 03:11:54 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">1.æ¦‚è¿°ï¼šä»£ç å³æ–‡å­¦ï¼Œæ³¨é‡Šå³çµé­‚</h2>
<p>åœ¨ä¼ä¸šçº§ Java åç«¯å¼€å‘çš„æµ©ç€šå·¥ç¨‹ä¸­ï¼Œä»£ç è´¨é‡å¾€å¾€ä¸ä»…ä»…å–å†³äºç®—æ³•çš„å¤æ‚åº¦æˆ–æ¶æ„çš„è§£è€¦ç¨‹åº¦ï¼Œæ›´å–å†³äºå…¶å¯è¯»æ€§ä¸å¯ç»´æŠ¤æ€§ã€‚ä½œä¸ºä¸€åæ·±è€• Java æŠ€æœ¯æ ˆå¤šå¹´çš„å¼€å‘è€…ï¼Œæˆ‘ä»¬æ·±çŸ¥â€œä»£ç æ˜¯å†™ç»™äººçœ‹çš„ï¼Œé¡ºä¾¿ç»™æœºå™¨è¿è¡Œâ€è¿™ä¸€è‡³ç†åè¨€ã€‚ç„¶è€Œï¼Œåœ¨å®é™…çš„å¼€å‘è¿­ä»£ä¸­ï¼Œæˆ‘ä»¬å¸¸å¸¸é™·å…¥ä¸€ä¸ªè¯¯åŒºï¼šç›²ç›®è¿½æ±‚â€œä»£ç è‡ªè§£é‡Šâ€ï¼ˆSelf-documenting Codeï¼‰ï¼Œè€Œå¿½è§†äº†é«˜è´¨é‡æ–‡æ¡£æ³¨é‡Šï¼ˆJavadocï¼‰çš„é‡è¦æ€§ã€‚äº‹å®ä¸Šï¼Œå¯¹äºå¤æ‚çš„ä¸šåŠ¡é€»è¾‘ã€å…¬å…± API æ¥å£ä»¥åŠåº•å±‚æ¡†æ¶å°è£…ï¼Œæ²¡æœ‰ä»»ä½•å˜é‡å‘½åèƒ½å¤Ÿæ›¿ä»£ä¸€æ®µç²¾å‡†ã€è¯¦å®ä¸”å¯Œæœ‰æ´å¯ŸåŠ›çš„ Javadoc</p>
<p>å½“æˆ‘ä»¬ç¿»é˜… JDK æºç ï¼ˆå¦‚ <code>java.util.concurrent</code> åŒ…ï¼‰ã€Spring Framework çš„æ ¸å¿ƒå®¹å™¨ä»£ç ï¼Œæˆ–æ˜¯ Google Guava çš„å·¥å…·ç±»æ—¶ï¼Œä¼šè¢«å…¶ä¸¥è°¨çš„æ³¨é‡Šä½“ç³»æ‰€éœ‡æ’¼ã€‚è¿™äº›æ¡†æ¶ä¹‹æ‰€ä»¥èƒ½æˆä¸ºå·¥ä¸šç•Œçš„æ ‡å‡†ï¼Œä¸ä»…å› ä¸ºå…¶ä»£ç é²æ£’ï¼Œæ›´å› ä¸ºå…¶æ–‡æ¡£è¯¦å°½åœ°é˜è¿°äº†æ¯ä¸€ä¸ªç±»ã€æ¯ä¸€ä¸ªæ–¹æ³•çš„â€œå‰ç½®æ¡ä»¶â€ï¼ˆPreconditionsï¼‰ã€â€œåç½®æ¡ä»¶â€ï¼ˆPostconditionsï¼‰ã€â€œå‰¯ä½œç”¨â€ï¼ˆSide Effectsï¼‰ä»¥åŠâ€œçº¿ç¨‹å®‰å…¨æ€§â€ï¼ˆThread Safetyï¼‰ã€‚</p>
<p>å…ˆæ¥çœ‹ä¸€ä¸ªå®Œç¾æ³¨é‡Šçš„å®Œæ•´ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">/**
 * ç”¨æˆ·æœåŠ¡ç±»
 * æä¾›ç”¨æˆ·ç›¸å…³çš„ä¸šåŠ¡æ“ä½œï¼ŒåŒ…æ‹¬ç”¨æˆ·æ³¨å†Œã€ç™»å½•ã€ä¿¡æ¯æŸ¥è¯¢ç­‰åŠŸèƒ½
 * 
 * <span class="hljs-doctag">@author</span> <span class="hljs-variable">ZhangSan</span>
 * <span class="hljs-doctag">@version</span> 1.2.0
 * <span class="hljs-doctag">@since</span> 2026-01-01
 * <span class="hljs-doctag">@see</span> <span class="hljs-variable">User</span>
 * <span class="hljs-doctag">@see</span> <span class="hljs-variable">UserDao</span>
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserService</span> {
 Â  Â 
 Â  Â <span class="hljs-comment">/**
 Â  Â  * ç”¨æˆ·æ³¨å†Œ
 Â  Â  * è¯¥æ–¹æ³•ç”¨äºæ–°ç”¨æˆ·æ³¨å†Œï¼Œä¼šå¯¹ç”¨æˆ·åè¿›è¡Œå”¯ä¸€æ€§æ ¡éªŒ
 Â  Â  *
 Â  Â  * <span class="hljs-doctag">@param</span> username ç”¨æˆ·åï¼Œå¿…é¡»æ˜¯å”¯ä¸€çš„ï¼Œé•¿åº¦3-20å­—ç¬¦
 Â  Â  * <span class="hljs-doctag">@param</span> password å¯†ç ï¼Œéœ€è¦æ»¡è¶³å¯†ç å¼ºåº¦è¦æ±‚
 Â  Â  * <span class="hljs-doctag">@param</span> email é‚®ç®±åœ°å€ï¼Œç”¨äºéªŒè¯å’Œé€šçŸ¥
 Â  Â  * <span class="hljs-doctag">@return</span> æ³¨å†ŒæˆåŠŸçš„ç”¨æˆ·IDï¼Œå¦‚æœæ³¨å†Œå¤±è´¥è¿”å›null
 Â  Â  * <span class="hljs-doctag">@throws</span> UserExistsException å½“ç”¨æˆ·åå·²å­˜åœ¨æ—¶æŠ›å‡º
 Â  Â  * <span class="hljs-doctag">@throws</span> InvalidParameterException å½“å‚æ•°ä¸ç¬¦åˆè¦æ±‚æ—¶æŠ›å‡º
 Â  Â  * <span class="hljs-doctag">@see</span> <span class="hljs-variable">User</span>
 Â  Â  * <span class="hljs-doctag">@since</span> 1.0.0
 Â  Â  */</span>
 Â  Â <span class="hljs-keyword">public</span> <span class="hljs-title class_">Long</span> <span class="hljs-title function_">registerUser</span>(<span class="hljs-title class_">String</span> username, <span class="hljs-title class_">String</span> password, <span class="hljs-title class_">String</span> email) 
 Â  Â  Â  Â  Â  Â throws <span class="hljs-title class_">UserExistsException</span>, <span class="hljs-title class_">InvalidParameterException</span> {
 Â  Â  Â  Â <span class="hljs-comment">// æ–¹æ³•å®ç°</span>
 Â  Â  Â  Â <span class="hljs-keyword">return</span> 1L;
 Â   }
 Â  Â 
 Â  Â <span class="hljs-comment">/**
 Â  Â  * <span class="hljs-doctag">@deprecated</span> è¯¥æ–¹æ³•å·²è¿‡æ—¶ï¼Œè¯·ä½¿ç”¨ {<span class="hljs-doctag">@link</span> #registerUser(String, String, String)}
 Â  Â  * æ›¿ä»£ã€‚æ–°æ–¹æ³•æä¾›äº†æ›´å®Œå–„çš„å‚æ•°æ ¡éªŒã€‚
 Â  Â  */</span>
 Â  Â <span class="hljs-meta">@Deprecated</span>
 Â  Â <span class="hljs-keyword">public</span> <span class="hljs-title class_">Long</span> <span class="hljs-title function_">register</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> username, <span class="hljs-built_in">String</span> password</span>) {
 Â  Â  Â  Â <span class="hljs-comment">// æ—§æ–¹æ³•å®ç°</span>
 Â  Â  Â  Â <span class="hljs-keyword">return</span> 1L;
 Â   }
}
</code></pre>
<h2 data-id="heading-1">2.å¸¸ç”¨Javadocæ ‡ç­¾è¯¦è§£</h2>
<p><strong>@param å‚æ•°è¯´æ˜</strong></p>
<pre><code class="hljs language-typescript" lang="typescript">â€‹
<span class="hljs-comment">/**
 * å¤„ç†ç”¨æˆ·åˆ—è¡¨
 * 
 * <span class="hljs-doctag">@param</span> users ç”¨æˆ·åˆ—è¡¨ï¼Œä¸èƒ½ä¸ºnullä½†å¯ä»¥ä¸ºç©ºåˆ—è¡¨
 * <span class="hljs-doctag">@param</span> options å¤„ç†é€‰é¡¹ï¼ŒåŒ…å«æ’åºã€è¿‡æ»¤ç­‰è®¾ç½®
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">processUsers</span>(<span class="hljs-params">List&lt;User&gt; users, ProcessOptions options</span>) {
 Â  Â <span class="hljs-comment">// æ–¹æ³•å®ç°</span>
}
</code></pre>
<p><strong>@return è¿”å›å€¼è¯´æ˜</strong></p>
<pre><code class="hljs language-csharp" lang="csharp">â€‹
<span class="hljs-comment">/**
 * è·å–æ‰€æœ‰æ´»è·ƒç”¨æˆ·
 * 
 * @return æ´»è·ƒç”¨æˆ·åˆ—è¡¨ï¼Œä¸ä¼šè¿”å›nullï¼Œä½†å¯èƒ½è¿”å›ç©ºåˆ—è¡¨
 */</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;User&gt; <span class="hljs-title">getActiveUsers</span>()</span> {
 Â  Â <span class="hljs-keyword">return</span> userDAO.findByStatus(<span class="hljs-string">"active"</span>);
}
â€‹
</code></pre>
<p><strong>@throws / @exception å¼‚å¸¸è¯´æ˜</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * æ–‡ä»¶ä¸Šä¼ å¤„ç†
 * 
 * <span class="hljs-doctag">@param</span> file ä¸Šä¼ çš„æ–‡ä»¶
 * <span class="hljs-doctag">@throws</span> FileNotFoundException å½“æ–‡ä»¶ä¸å­˜åœ¨æ—¶æŠ›å‡º
 * <span class="hljs-doctag">@throws</span> FileSizeExceededException å½“æ–‡ä»¶å¤§å°è¶…è¿‡é™åˆ¶æ—¶æŠ›å‡º
 * <span class="hljs-doctag">@throws</span> IOException å½“æ–‡ä»¶è¯»å†™å‘ç”Ÿé”™è¯¯æ—¶æŠ›å‡º
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">uploadFile</span><span class="hljs-params">(File file)</span> <span class="hljs-keyword">throws</span> FileNotFoundException, 
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â FileSizeExceededException, 
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â IOException {
 Â  Â <span class="hljs-keyword">if</span> (!file.exists()) {
 Â  Â  Â  Â <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileNotFoundException</span>(<span class="hljs-string">"æ–‡ä»¶ä¸å­˜åœ¨: "</span> + file.getName());
 Â   }
 Â  Â <span class="hljs-comment">// å…¶ä»–å¤„ç†é€»è¾‘</span>
}
â€‹
<span class="hljs-comment">/**
 * ç”¨æˆ·ç™»å½•éªŒè¯
 * 
 * <span class="hljs-doctag">@param</span> username ç”¨æˆ·å
 * <span class="hljs-doctag">@param</span> password å¯†ç 
 * <span class="hljs-doctag">@exception</span> AuthenticationException å½“ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯æ—¶æŠ›å‡º
 * <span class="hljs-doctag">@exception</span> AccountLockedException å½“è´¦æˆ·è¢«é”å®šæ—¶æŠ›å‡º
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">login</span><span class="hljs-params">(String username, String password)</span> 
 Â  Â  Â  Â <span class="hljs-keyword">throws</span> AuthenticationException, AccountLockedException {
 Â  Â <span class="hljs-comment">// ç™»å½•é€»è¾‘</span>
}
</code></pre>
<p><strong>@see å‚è€ƒé“¾æ¥</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">/**
 * è®¢å•æ”¯ä»˜æœåŠ¡
 * 
 * <span class="hljs-doctag">@see</span> Order è®¢å•å®ä½“ç±»
 * <span class="hljs-doctag">@see</span> PaymentController#processPayment(Long) æ”¯ä»˜å¤„ç†æ–¹æ³•
 * <span class="hljs-doctag">@see</span> &lt;a href="https://example.com/payment-api"&gt;æ”¯ä»˜APIæ–‡æ¡£&lt;/a&gt;
 * <span class="hljs-doctag">@see</span> "Javaç¼–ç¨‹è§„èŒƒ"
 * <span class="hljs-doctag">@see</span> #refund(Long) é€€æ¬¾æ–¹æ³•
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PaymentService</span> {
 Â  Â 
 Â  Â <span class="hljs-comment">/**
 Â  Â  * æ‰§è¡Œæ”¯ä»˜
 Â  Â  * <span class="hljs-doctag">@see</span> PaymentGateway æ”¯ä»˜ç½‘å…³æ¥å£
 Â  Â  */</span>
 Â  Â <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">processPayment</span>(<span class="hljs-params">Order order</span>) {
 Â  Â  Â  Â <span class="hljs-comment">// æ”¯ä»˜é€»è¾‘</span>
 Â   }
 Â  Â 
 Â  Â <span class="hljs-comment">/**
 Â  Â  * è®¢å•é€€æ¬¾
 Â  Â  * 
 Â  Â  * <span class="hljs-doctag">@see</span> #processPayment(Order)
 Â  Â  */</span>
 Â  Â <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">refund</span>(<span class="hljs-params">Long orderId</span>) {
 Â  Â  Â  Â <span class="hljs-comment">// é€€æ¬¾é€»è¾‘</span>
 Â   }
}
</code></pre>
<p><strong>@deprecated è¿‡æ—¶è¯´æ˜</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OldClass</span> {
 Â  Â 
 Â  Â <span class="hljs-comment">/**
 Â  Â  * <span class="hljs-doctag">@deprecated</span> è¿™ä¸ªå­—æ®µå·²è¿‡æ—¶ï¼Œè¯·ä½¿ç”¨ {<span class="hljs-doctag">@link</span> #newField} æ›¿ä»£ã€‚
 Â  Â  * å°†åœ¨ä¸‹ä¸€ä¸ªä¸»è¦ç‰ˆæœ¬ä¸­ç§»é™¤ã€‚
 Â  Â  */</span>
 Â  Â <span class="hljs-meta">@Deprecated</span>
 Â  Â <span class="hljs-keyword">private</span> <span class="hljs-title class_">String</span> oldField;
 Â  Â 
 Â  Â <span class="hljs-keyword">private</span> <span class="hljs-title class_">String</span> newField;
 Â  Â 
 Â  Â <span class="hljs-comment">/**
 Â  Â  * <span class="hljs-doctag">@deprecated</span> è¿™ä¸ªæ–¹æ³•å·²è¿‡æ—¶ï¼Œå› ä¸ºæ€§èƒ½é—®é¢˜ã€‚
 Â  Â  * è¯·ä½¿ç”¨ {<span class="hljs-doctag">@link</span> #newMethod(String)} æ›¿ä»£ã€‚
 Â  Â  * 
 Â  Â  * <span class="hljs-doctag">@param</span> name ç”¨æˆ·å
 Â  Â  * <span class="hljs-doctag">@return</span> å¤„ç†ç»“æœ
 Â  Â  */</span>
 Â  Â <span class="hljs-meta">@Deprecated</span>(since = <span class="hljs-string">"2.0"</span>, forRemoval = <span class="hljs-literal">true</span>)
 Â  Â <span class="hljs-keyword">public</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">oldMethod</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> name</span>) {
 Â  Â  Â  Â <span class="hljs-keyword">return</span> <span class="hljs-string">"old result"</span>;
 Â   }
 Â  Â 
 Â  Â <span class="hljs-comment">/**
 Â  Â  * æ–°çš„å¤„ç†æ–¹æ³•
 Â  Â  */</span>
 Â  Â <span class="hljs-keyword">public</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">newMethod</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> name</span>) {
 Â  Â  Â  Â <span class="hljs-keyword">return</span> <span class="hljs-string">"new result"</span>;
 Â   }
}
</code></pre>
<p><strong>{@code} - ä»£ç æ ¼å¼</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">/**
 * è®¾ç½®é…ç½®é¡¹
 * 
 * ä½¿ç”¨æ–¹æ³•ï¼š
 * {<span class="hljs-doctag">@code</span>
 * Config config = new Config();
 * config.setProperty("key", "value");
 * }
 * 
 * æˆ–è€…å•è¡Œä»£ç ï¼š{<span class="hljs-doctag">@code</span> String name = "John";}
 * 
 * <span class="hljs-doctag">@param</span> key é…ç½®é”®ï¼Œæ ¼å¼ä¸º {<span class="hljs-doctag">@code</span> "section.name"}
 * <span class="hljs-doctag">@param</span> value é…ç½®å€¼
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">setProperty</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> key, <span class="hljs-built_in">String</span> value</span>) {
 Â  Â <span class="hljs-comment">// æ–¹æ³•å®ç°</span>
}
</code></pre>
<h3 data-id="heading-2">{@link} - å†…éƒ¨é“¾æ¥</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">/**
 * ç”¨æˆ·ç®¡ç†æœåŠ¡
 * 
 * ç›¸å…³æ–¹æ³•ï¼š
 * - {<span class="hljs-doctag">@link</span> #createUser(User)}
 * - {<span class="hljs-doctag">@link</span> #updateUser(User)}
 * - {<span class="hljs-doctag">@link</span> #deleteUser(Long)}
 * 
 * ç›¸å…³ç±»ï¼š
 * - {<span class="hljs-doctag">@link</span> User}
 * - {<span class="hljs-doctag">@link</span> UserDao}
 * 
 * <span class="hljs-doctag">@see</span> UserService
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserManager</span> {
 Â  Â 
 Â  Â <span class="hljs-comment">/**
 Â  Â  * åˆ›å»ºç”¨æˆ·
 Â  Â  * 
 Â  Â  * <span class="hljs-doctag">@param</span> user ç”¨æˆ·å¯¹è±¡ï¼Œå‚è€ƒ {<span class="hljs-doctag">@link</span> User} ç±»å®šä¹‰
 Â  Â  * <span class="hljs-doctag">@return</span> ç”¨æˆ·ID
 Â  Â  * <span class="hljs-doctag">@see</span> #updateUser(User)
 Â  Â  */</span>
 Â  Â <span class="hljs-keyword">public</span> <span class="hljs-built_in">Long</span> createUser(User user) {
 Â  Â  Â  Â <span class="hljs-keyword">return</span> <span class="hljs-number">1L</span>;
 Â   }
}
</code></pre>
<p><strong>{@literal} - æ–‡æœ¬å­—é¢é‡</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">/**
 * ç‰¹æ®Šå­—ç¬¦è¯´æ˜
 * 
 * åœ¨XMLä¸­éœ€è¦ä½¿ç”¨ {<span class="hljs-doctag">@literal</span> &lt;root&gt;} å’Œ {<span class="hljs-doctag">@literal</span> &lt;/root&gt;} æ ‡ç­¾ã€‚
 * åœ¨æ­£åˆ™è¡¨è¾¾å¼ä¸­ä½¿ç”¨ {<span class="hljs-doctag">@literal</span> [a-z]+} åŒ¹é…å°å†™å­—æ¯ã€‚
 * 
 * æ¯”è¾ƒæ“ä½œï¼š{<span class="hljs-doctag">@literal</span> a &lt; b &amp;&amp; c &gt; d}
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SpecialCharacters</span> {
    <span class="hljs-comment">// ç±»å®ç°</span>
}
</code></pre>
<h2 data-id="heading-3">3.Javaæ³¨é‡Šä¸­çš„HTMLæ ‡ç­¾è¯¦è§£</h2>
<p><strong><code>&lt;p&gt;</code> - æ®µè½æ ‡ç­¾</strong></p>
<pre><code class="hljs language-xml" lang="xml">/**
 * ç”¨æˆ·æœåŠ¡ç±»
 * 
 * <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>è¿™ä¸ªç±»è´Ÿè´£å¤„ç†ç”¨æˆ·ç›¸å…³çš„æ‰€æœ‰ä¸šåŠ¡é€»è¾‘ã€‚<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
 * 
 * <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>åŒ…æ‹¬ç”¨æˆ·æ³¨å†Œã€ç™»å½•éªŒè¯ã€ä¿¡æ¯ä¿®æ”¹ç­‰åŠŸèƒ½ã€‚
 * æ¯ä¸ªåŠŸèƒ½éƒ½ç»è¿‡ä¸¥æ ¼æµ‹è¯•ï¼Œç¡®ä¿ä¸šåŠ¡é€»è¾‘çš„æ­£ç¡®æ€§ã€‚<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
 * 
 * <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>åœ¨ä½¿ç”¨æ—¶éœ€è¦æ³¨æ„çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Œå»ºè®®é…åˆSpringå®¹å™¨ä½¿ç”¨ã€‚<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
 */
public class UserService {
    // åœ¨Javadocä¸­ï¼Œ<span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>æ ‡ç­¾ä¼šè‡ªåŠ¨åœ¨æ®µè½é—´åˆ›å»ºç©ºè¡Œï¼Œä½¿æ–‡æ¡£æ›´æ˜“è¯»
}
</code></pre>
<p><strong><code>&lt;br&gt;</code> - æ¢è¡Œæ ‡ç­¾</strong></p>
<pre><code class="hljs language-xml" lang="xml">/**
 * åœ°å€éªŒè¯å·¥å…·
 * 
 * <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>éªŒè¯è§„åˆ™ï¼š<span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span>
 * 1. åœ°å€ä¸èƒ½ä¸ºç©º<span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span>
 * 2. åœ°å€é•¿åº¦ä¸è¶…è¿‡200å­—ç¬¦<span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span>
 * 3. å¿…é¡»åŒ…å«çœå¸‚åŒºä¿¡æ¯<span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span>
 * 4. è¯¦ç»†åœ°å€ä¸èƒ½åŒ…å«ç‰¹æ®Šå­—ç¬¦<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
 * 
 * <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>æ³¨æ„ï¼šæ­¤éªŒè¯ä»…é’ˆå¯¹ä¸­å›½å¤§é™†åœ°å€ï¼Œ<span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span>
 * å›½é™…åœ°å€éœ€è¦ä½¿ç”¨å…¶ä»–éªŒè¯è§„åˆ™ã€‚<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
 */
public class AddressValidator {
    // <span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span>é€‚åˆåœ¨åŒä¸€ä¸ªæ®µè½å†…åˆ›å»ºåˆ—è¡¨å¼å†…å®¹
}
</code></pre>
<p><strong><code>&lt;b&gt;</code> å’Œ <code>&lt;strong&gt;</code> - ç²—ä½“æ ‡ç­¾</strong></p>
<p><strong>ç”¨é€”</strong>ï¼šå¼ºè°ƒé‡è¦æ–‡æœ¬</p>
<pre><code class="hljs language-xml" lang="xml">/**
 * æ”¯ä»˜å®‰å…¨æœåŠ¡
 * 
 * <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">b</span>&gt;</span>é‡è¦æç¤ºï¼š<span class="hljs-tag">&lt;/<span class="hljs-name">b</span>&gt;</span>æ‰€æœ‰æ”¯ä»˜æ“ä½œéƒ½å¿…é¡»è®°å½•å®¡è®¡æ—¥å¿—ã€‚<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
 * 
 * <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>å®‰å…¨è­¦å‘Šï¼š<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span>APIå¯†é’¥å¿…é¡»åŠ å¯†å­˜å‚¨ï¼Œ<span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span>
 * ä¸¥ç¦åœ¨æ—¥å¿—ä¸­è¾“å‡ºæ•æ„Ÿä¿¡æ¯ã€‚<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
 * 
 * <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>æ™®é€šæ–‡æœ¬ï¼Œ<span class="hljs-tag">&lt;<span class="hljs-name">b</span>&gt;</span>å…³é”®æ“ä½œ<span class="hljs-tag">&lt;/<span class="hljs-name">b</span>&gt;</span>éœ€è¦åŒé‡éªŒè¯ï¼Œ<span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span>
 * <span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>é«˜é£é™©æ“ä½œ<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span>éœ€è¦ç®¡ç†å‘˜å®¡æ‰¹ã€‚<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
 */
public class PaymentSecurityService {
    // <span class="hljs-tag">&lt;<span class="hljs-name">b</span>&gt;</span>å’Œ<span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>åœ¨è§†è§‰ä¸Šæ•ˆæœç›¸åŒï¼Œä½†<span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>è¯­ä¹‰ä¸Šæ›´å¼ºè°ƒé‡è¦æ€§
}
</code></pre>
<p><strong><code>&lt;i&gt;</code> å’Œ <code>&lt;em&gt;</code> - æ–œä½“æ ‡ç­¾</strong></p>
<p><strong>ç”¨é€”</strong>ï¼šè¡¨ç¤ºæŠ€æœ¯æœ¯è¯­ã€å¤–æ¥è¯­æˆ–å¼ºè°ƒ</p>
<pre><code class="hljs language-xml" lang="xml">/**
 * ç§‘å­¦è®¡ç®—å·¥å…·
 * 
 * <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>æœ¬ç±»æä¾›å¸¸ç”¨çš„ç§‘å­¦è®¡ç®—åŠŸèƒ½ï¼š<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
 * 
 * <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">i</span>&gt;</span>æ¬§æ‹‰å…¬å¼<span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span>ï¼še^(iÏ€) + 1 = 0<span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span>
 * <span class="hljs-tag">&lt;<span class="hljs-name">em</span>&gt;</span>å‹¾è‚¡å®šç†<span class="hljs-tag">&lt;/<span class="hljs-name">em</span>&gt;</span>ï¼šaÂ² + bÂ² = cÂ²<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
 * 
 * <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>æ³¨æ„ï¼š<span class="hljs-tag">&lt;<span class="hljs-name">i</span>&gt;</span>æµ®ç‚¹æ•°è®¡ç®—<span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span>å¯èƒ½å­˜åœ¨ç²¾åº¦é—®é¢˜ï¼Œ<span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span>
 * <span class="hljs-tag">&lt;<span class="hljs-name">em</span>&gt;</span>å¤§è§„æ¨¡çŸ©é˜µè¿ç®—<span class="hljs-tag">&lt;/<span class="hljs-name">em</span>&gt;</span>å»ºè®®ä½¿ç”¨ä¸“ä¸šæ•°å­¦åº“ã€‚<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
 */
public class MathUtils {
    // <span class="hljs-tag">&lt;<span class="hljs-name">i</span>&gt;</span>é€šå¸¸ç”¨äºæŠ€æœ¯æœ¯è¯­ï¼Œ<span class="hljs-tag">&lt;<span class="hljs-name">em</span>&gt;</span>ç”¨äºè¯­ä¹‰å¼ºè°ƒ
}
</code></pre>
<p><strong><code>&lt;ul&gt;</code> - æ— åºåˆ—è¡¨</strong></p>
<p><strong>ç”¨é€”</strong>ï¼šåˆ›å»ºé¡¹ç›®ç¬¦å·åˆ—è¡¨</p>
<pre><code class="hljs language-xml" lang="xml">/**
 * åŠŸèƒ½ç‰¹æ€§è¯´æ˜
 * 
 * <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">b</span>&gt;</span>ä¸»è¦åŠŸèƒ½ï¼š<span class="hljs-tag">&lt;/<span class="hljs-name">b</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
 * <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>
 *   <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>ç”¨æˆ·è®¤è¯å’Œæˆæƒ<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
 *   <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>æ•°æ®åŠ å¯†å­˜å‚¨
 *     <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>
 *       <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>AES-256åŠ å¯†æ•æ„Ÿæ•°æ®<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
 *       <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>RSAåŠ å¯†ä¼ è¾“æ•°æ®<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
 *     <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
 *   <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
 *   <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>å®¡è®¡æ—¥å¿—è®°å½•<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
 *   <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>æ€§èƒ½ç›‘æ§å’Œç»Ÿè®¡<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
 * <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
 * 
 * <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">b</span>&gt;</span>æŠ€æœ¯ç‰¹ç‚¹ï¼š<span class="hljs-tag">&lt;/<span class="hljs-name">b</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
 * <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>
 *   <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>åŸºäºSpring Bootæ¡†æ¶<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
 *   <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>æ”¯æŒå¤šæ•°æ®æº<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
 *   <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>å†…ç½®ç¼“å­˜æœºåˆ¶<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
 * <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
 */
public class SystemFeatures {
    // <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>åˆ›å»ºå¸¦é¡¹ç›®ç¬¦å·çš„åˆ—è¡¨ï¼Œé€‚åˆåˆ—ä¸¾ç‰¹æ€§ã€åŠŸèƒ½ç‚¹ç­‰
}
</code></pre>
<p><strong><code>&lt;ol&gt;</code> - æœ‰åºåˆ—è¡¨</strong></p>
<p><strong>ç”¨é€”</strong>ï¼šåˆ›å»ºå¸¦ç¼–å·çš„æ­¥éª¤åˆ—è¡¨</p>
<pre><code class="hljs language-xml" lang="xml">/**
 * å®‰è£…é…ç½®æŒ‡å—
 * 
 * <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">b</span>&gt;</span>å®‰è£…æ­¥éª¤ï¼š<span class="hljs-tag">&lt;/<span class="hljs-name">b</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
 * <span class="hljs-tag">&lt;<span class="hljs-name">ol</span>&gt;</span>
 *   <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>ä¸‹è½½å®‰è£…åŒ…<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
 *   <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>è§£å‹åˆ°ç›®æ ‡ç›®å½•<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
 *   <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>ä¿®æ”¹é…ç½®æ–‡ä»¶
 *     <span class="hljs-tag">&lt;<span class="hljs-name">ol</span>&gt;</span>
 *       <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>é…ç½®æ•°æ®åº“è¿æ¥<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
 *       <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>è®¾ç½®ç®¡ç†å‘˜è´¦å·<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
 *       <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>é…ç½®æ—¥å¿—è·¯å¾„<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
 *     <span class="hljs-tag">&lt;/<span class="hljs-name">ol</span>&gt;</span>
 *   <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
 *   <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>å¯åŠ¨æœåŠ¡<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
 *   <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>éªŒè¯å®‰è£…ç»“æœ<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
 * <span class="hljs-tag">&lt;/<span class="hljs-name">ol</span>&gt;</span>
 * 
 * <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">b</span>&gt;</span>å¯åŠ¨é¡ºåºï¼š<span class="hljs-tag">&lt;/<span class="hljs-name">b</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
 * <span class="hljs-tag">&lt;<span class="hljs-name">ol</span>&gt;</span>
 *   <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>æ•°æ®åº“æœåŠ¡<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
 *   <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>ç¼“å­˜æœåŠ¡<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
 *   <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>åº”ç”¨æœåŠ¡<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
 *   <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>ç›‘æ§æœåŠ¡<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
 * <span class="hljs-tag">&lt;/<span class="hljs-name">ol</span>&gt;</span>
 */
public class InstallationGuide {
    // <span class="hljs-tag">&lt;<span class="hljs-name">ol</span>&gt;</span>åˆ›å»ºå¸¦æ•°å­—ç¼–å·çš„åˆ—è¡¨ï¼Œé€‚åˆæ­¥éª¤ã€æµç¨‹è¯´æ˜
}
</code></pre>
<h2 data-id="heading-4">4.æ€»ç»“</h2>
<p>ç¼–å†™æ–‡æ¡£æ³¨é‡Šå¹¶éå•çº¯çš„ä½“åŠ›åŠ³åŠ¨ï¼Œå®ƒæ˜¯ä¸€ç§è®¾è®¡æ´»åŠ¨ã€‚å½“ä½ è¢«è¿«ç”¨è‡ªç„¶è¯­è¨€æ¸…æ™°åœ°æè¿°ä¸€ä¸ªæ–¹æ³•æ—¶ï¼Œå¾€å¾€ä¼šå‘ç°ä»£ç é€»è¾‘æœ¬èº«çš„æ¨¡ç³Šæˆ–è®¾è®¡ä¸Šçš„ç¼ºé™·ã€‚é«˜è´¨é‡çš„ Javadoc æ˜¯ä»£ç é‡æ„çš„å‚¬åŒ–å‰‚ã€‚</p>
<p>ä½œä¸º Java åç«¯é«˜çº§å¼€å‘ï¼Œå½“æˆ‘ä»¬ä»å•çº¯å…³æ³¨â€œä»£ç æ€ä¹ˆè·‘â€è½¬å˜ä¸ºå…³æ³¨â€œä»£ç æ€ä¹ˆè¯»â€æ—¶ï¼Œæˆ‘ä»¬å°±è·¨è¶Šäº†ä»å·¥åŒ åˆ°å¤§å¸ˆçš„é—¨æ§›ã€‚å¸Œæœ›è¿™ç¯‡åšæ–‡èƒ½æˆä¸ºä½ å›¢é˜Ÿä¸­çš„â€œæ–‡æ¡£åœ£ç»â€ï¼Œä¸ä»…æå‡ä»£ç åº“çš„å¥åº·åº¦ï¼Œæ›´åœ¨æŠ€æœ¯ç¤¾åŒºä¸­æ ‘ç«‹ä½ ä½œä¸º uncompromising engineerï¼ˆä¸å¦¥åçš„å·¥ç¨‹å¸ˆï¼‰çš„ä¸“ä¸šå½¢è±¡ã€‚è®©æˆ‘ä»¬ä¸€èµ·ï¼Œç”¨æ³¨é‡Šç‚¹äº®ä»£ç çš„é»‘æš—è§’è½</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ··ç”¨ @Transactional å’Œ TransactionTemplate è¢«æ€¼äº†ï¼Œä¸‰ç§äº‹åŠ¡ç®¡ç†åˆ°åº•æ€ä¹ˆé€‰ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7602531501457621001</link>    <guid>https://juejin.cn/post/7602531501457621001</guid>    <pubDate>2026-02-04T07:34:19.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602531501457621001" data-draft-id="7602901565032333358" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ··ç”¨ @Transactional å’Œ TransactionTemplate è¢«æ€¼äº†ï¼Œä¸‰ç§äº‹åŠ¡ç®¡ç†åˆ°åº•æ€ä¹ˆé€‰ï¼Ÿ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-02-04T07:34:19.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¥å¥‡å°æ±¤åœ†"/> <meta itemprop="url" content="https://juejin.cn/user/1151943919285431"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ··ç”¨ @Transactional å’Œ TransactionTemplate è¢«æ€¼äº†ï¼Œä¸‰ç§äº‹åŠ¡ç®¡ç†åˆ°åº•æ€ä¹ˆé€‰ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1151943919285431/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¥å¥‡å°æ±¤åœ†
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T07:34:19.000Z" title="Wed Feb 04 2026 07:34:19 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">å¼•è¨€</h3>
<p>â€œåªè¦ä½ ä¸è€ƒè™‘äº‹åŠ¡çš„é—®é¢˜ï¼Œæ€»æœ‰ä¸€å¤©äº‹åŠ¡ä¼šæ¥è€ƒè™‘ä½ ã€‚â€</p>
<p>å¿˜è®°æ˜¯å“ªä½å“²äººè¯´çš„è¿™å¥è¯äº†ï¼Œåœ¨æœ€è¿‘çš„ä¸€æ¬¡code reviewä¸­ï¼Œæˆ‘é€æ¸ä½“ä¼šåˆ°äº†è¿™å¥è¯çš„åˆ†é‡ã€‚</p>
<p>å½“æˆ‘çœ‹åˆ°åŒäº‹åœ¨ä¸€ä¸ªå¤æ‚çš„ä¸šåŠ¡é€»è¾‘ä¸­æ··ç”¨äº†<code>@Transactional</code>æ³¨è§£å’Œ<code>TransactionTemplate</code>æ—¶ï¼Œå°±é¢„æ„Ÿåˆ°å¯èƒ½ä¼šæœ‰é—®é¢˜ã€‚</p>
<p>æˆ‘é—®ä»–ä¸ºä»€ä¹ˆè¿™æ ·è®¾è®¡ï¼Œä»–çš„å›ç­”è®©æˆ‘æœ‰äº›æ„å¤–ï¼š"åæ­£éƒ½èƒ½å®ç°äº‹åŠ¡ï¼Œåº”è¯¥æ²¡ä»€ä¹ˆåŒºåˆ«å§ï¼Ÿ"</p>
<p>è¿™ä¸ªå›ç­”è®©æˆ‘æ„è¯†åˆ°ï¼Œå¾ˆå¤šå¼€å‘è€…å¯¹Springçš„äº‹åŠ¡ç®¡ç†æœºåˆ¶å…¶å®ç†è§£å¾—å¹¶ä¸æ·±å…¥ã€‚å¤§å®¶å¾€å¾€çŸ¥é“åŠ ä¸ª<code>@Transactional</code>å°±èƒ½å¼€å¯äº‹åŠ¡ï¼Œä½†å¯¹äºä»€ä¹ˆæ—¶å€™è¯¥ç”¨å£°æ˜å¼ã€ä»€ä¹ˆæ—¶å€™è¯¥ç”¨ç¼–ç¨‹å¼ï¼Œä»¥åŠå®ƒä»¬èƒŒåçš„å·¥ä½œåŸç†ï¼Œå´å¾ˆå°‘æ·±ç©¶ã€‚</p>
<p>äº‹åŠ¡ç®¡ç†çœ‹ä¼¼ç®€å•ï¼Œå®åˆ™æš—è—ç„æœºã€‚</p>
<p>ä»Šå¤©æˆ‘ä»¬å°±æ¥æ·±å…¥èŠèŠSpringä¸­çš„ä¸‰ç§äº‹åŠ¡ç®¡ç†æ–¹å¼ï¼Œä»¥åŠå®ƒä»¬å„è‡ªçš„é€‚ç”¨åœºæ™¯å’Œæ½œåœ¨çš„é£é™©ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8d964424c74b45938a57897c2554b256~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56We5aWH5bCP5rGk5ZyG:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770795260&amp;x-signature=seLeQjuDQreb1FaVcLBrPus82qg%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-1">æ­£æ–‡</h3>
<h4 data-id="heading-2">ä¸‰ç§æ–¹å¼ï¼Œå„æœ‰åƒç§‹</h4>
<p>Springç»™æˆ‘ä»¬æä¾›äº†ä¸‰ç§å¤„ç†äº‹åŠ¡çš„æ–¹å¼ï¼š<code>@Transactional</code>æ³¨è§£ã€<code>TransactionTemplate</code>å’Œç›´æ¥ä½¿ç”¨<code>TransactionManager</code>ã€‚</p>
<p>å°±åƒæ­¦ä¾ å°è¯´é‡Œçš„ä¸‰ç§å…µå™¨ï¼Œæ¯ç§éƒ½æœ‰è‡ªå·±çš„æ‹›å¼å’Œé€‚ç”¨åœºæ™¯ã€‚</p>
<h5 data-id="heading-3">@Transactionalï¼šæœ€çœå¿ƒçš„</h5>
<p>æåˆ°äº‹åŠ¡ç®¡ç†ï¼ŒåŸºæœ¬ä¸Šéƒ½ä¼šæƒ³åˆ°å»ç”¨<code>@Transactional</code>ã€‚</p>
<p>ç¡®å®ï¼Œè¿™ç©æ„å„¿ç”¨èµ·æ¥ç®€å•ç²—æš´ï¼Œåœ¨æ–¹æ³•ä¸ŠåŠ ä¸€ä¸ªæ³¨è§£å°±å®Œäº‹äº†ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span>Â <span class="hljs-keyword">class</span>Â <span class="hljs-title class_">UserService</span>Â {
Â  Â Â 
Â  Â Â <span class="hljs-meta">@Transactional</span>
Â  Â Â <span class="hljs-keyword">public</span>Â <span class="hljs-built_in">void</span>Â <span class="hljs-title function_">createUser</span>(<span class="hljs-params">User user</span>)Â {
Â  Â  Â  Â  userRepository.<span class="hljs-title function_">save</span>(user);
Â  Â  Â  Â Â <span class="hljs-comment">// å¦‚æœè¿™é‡ŒæŠ›å¼‚å¸¸ï¼Œä¸Šé¢çš„æ“ä½œä¼šå›æ»š</span>
Â  Â  Â  Â  <span class="hljs-title function_">sendWelcomeEmail</span>(user);
Â  Â  }
}
</code></pre>
<p>æœ€å¤§çš„ä¼˜ç‚¹å°±æ˜¯<strong>æ— ä¾µå…¥</strong>ã€‚</p>
<p>ä¸šåŠ¡ä»£ç ä¾ç„¶å¹²å‡€ï¼Œäº‹åŠ¡é€»è¾‘å®Œå…¨äº¤ç»™Springåœ¨èƒŒåæå®šäº†ã€‚ä½†æ˜¯ï¼Œè¿™ç§é»‘ç›’å¼çš„ä¾¿åˆ©å¿…ç„¶æœ‰ä»£ä»·ã€‚</p>
<p>Springé€šè¿‡AOPæ¥å®ç°å£°æ˜å¼äº‹åŠ¡ï¼Œç»™æ–¹æ³•å¤–é¢åŒ…äº†ä¸€å±‚ä»£ç†ï¼Œè¿™å°±ä¼šå¯¼è‡´ä¸€äº›è®©äººå¤´ç–¼çš„é—®é¢˜ï¼š</p>
<p><strong>å†…éƒ¨æ–¹æ³•è°ƒç”¨å¤±æ•ˆ</strong>ï¼šè¿™æ˜¯æœ€å®¹æ˜“è¸©çš„å‘ï¼å½“åŒä¸€ä¸ªç±»å†…éƒ¨çš„æ–¹æ³•è°ƒç”¨å¸¦æœ‰<code>@Transactional</code>æ³¨è§£çš„æ–¹æ³•æ—¶ï¼Œäº‹åŠ¡ä¸ä¼šç”Ÿæ•ˆã€‚å› ä¸ºå†…éƒ¨è°ƒç”¨ä¸ä¼šèµ°ä»£ç†ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@Service</span>Â Â 
<span class="hljs-keyword">public</span>Â <span class="hljs-keyword">class</span>Â <span class="hljs-title class_">UserService</span>Â {
Â  Â Â <span class="hljs-keyword">public</span>Â <span class="hljs-built_in">void</span>Â <span class="hljs-title function_">batchCreate</span>(<span class="hljs-params">List&lt;User&gt; users</span>)Â {
Â  Â  Â  Â Â <span class="hljs-keyword">for</span>Â (<span class="hljs-title class_">User</span> user : users) {
Â  Â  Â  Â  Â  Â  <span class="hljs-title function_">createUser</span>(user);Â <span class="hljs-comment">// âŒ è¿™é‡Œäº‹åŠ¡ä¸ä¼šç”Ÿæ•ˆï¼</span>
Â  Â  Â  Â  }
Â  Â  }
Â  Â Â 
Â  Â Â <span class="hljs-meta">@Transactional</span>
Â  Â Â <span class="hljs-keyword">public</span>Â <span class="hljs-built_in">void</span>Â <span class="hljs-title function_">createUser</span>(<span class="hljs-params">User user</span>)Â {
Â  Â  Â  Â  userRepository.<span class="hljs-title function_">save</span>(user);
Â  Â  }
}
</code></pre>
<p><strong>åªå¯¹publicæ–¹æ³•ç”Ÿæ•ˆ</strong>ï¼šç§æœ‰æ–¹æ³•æˆ–è€…protectedæ–¹æ³•ä¸ŠåŠ <code>@Transactional</code>æ¯«æ— åµç”¨ã€‚</p>
<p><strong>è¦åŒ¹é…å¼‚å¸¸ç±»å‹</strong>ï¼šé»˜è®¤åªæœ‰<code>RuntimeException</code>å’Œ<code>Error</code>ä¼šè§¦å‘å›æ»šï¼Œæ£€æŸ¥å‹å¼‚å¸¸éœ€è¦ç‰¹æ®Šé…ç½®ã€‚</p>
<p>å¯ä»¥çœ‹è¿™ç¯‡æ–‡ç« ï¼š</p>
<p><a href="https://juejin.cn/post/7496344493709885455" target="_blank" title="https://juejin.cn/post/7496344493709885455">juejin.cn/post/749634â€¦</a></p>
<p>è™½ç„¶è¿™äº›éƒ½æ˜¯è€ç”Ÿå¸¸è°ˆçš„é—®é¢˜äº†ï¼Œä½†åœ¨å®é™…å¼€å‘ä¸­ï¼Œè¿˜æ˜¯æœ‰å¤ªå¤šå› ä¸ºè¿™ç§ç»†èŠ‚å‡ºbugçš„æƒ…å†µã€‚</p>
<h5 data-id="heading-4">TransactionTemplateï¼šå¯æ§çš„</h5>
<p><code>TransactionTemplate</code>ç®—æ˜¯å£°æ˜å¼å’Œç¼–ç¨‹å¼äº‹åŠ¡çš„ä¸€ä¸ªå¹³è¡¡ç‚¹ã€‚å®ƒæ—¢ä¿æŒäº†ä¸€å®šçš„çµæ´»æ€§ï¼Œåˆä¸ä¼šè®©ä»£ç å˜å¾—è¿‡äºå¤æ‚ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span><span class="hljs-keyword">class</span>Â <span class="hljs-title class_">AccountService</span>Â {
Â  Â Â 
Â  Â Â <span class="hljs-meta">@Autowired</span>
Â  Â Â <span class="hljs-keyword">private</span>Â <span class="hljs-title class_">TransactionTemplate</span> transactionTemplate;
Â  Â Â 
Â  Â Â <span class="hljs-keyword">public</span>Â <span class="hljs-built_in">void</span>Â <span class="hljs-title function_">transfer</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> fromAccount, <span class="hljs-built_in">String</span> toAccount, BigDecimal amount</span>)Â {
Â  Â  Â  Â  transactionTemplate.<span class="hljs-title function_">execute</span>(status -&gt; {
Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">try</span>Â {
Â  Â  Â  Â  Â  Â  Â  Â  accountRepository.<span class="hljs-title function_">debit</span>(fromAccount, amount);
Â  Â  Â  Â  Â  Â  Â  Â  accountRepository.<span class="hljs-title function_">credit</span>(toAccount, amount);
Â  Â  Â  Â  Â  Â  Â  Â Â returnnull;
Â  Â  Â  Â  Â  Â  }Â <span class="hljs-keyword">catch</span>Â (<span class="hljs-title class_">InsufficientFundsException</span> e) {
Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-comment">// å¯ä»¥æ ¹æ®ä¸šåŠ¡é€»è¾‘å†³å®šæ˜¯å¦å›æ»š</span>
Â  Â  Â  Â  Â  Â  Â  Â  status.<span class="hljs-title function_">setRollbackOnly</span>();
Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">throw</span>Â e;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  });
Â  Â  }
}
</code></pre>
<p>ç”¨<code>TransactionTemplate</code>çš„å¥½å¤„æ˜¯ä½ å¯ä»¥ç²¾ç¡®æ§åˆ¶äº‹åŠ¡çš„è¾¹ç•Œï¼Œä¹Ÿä¸ç”¨æ‹…å¿ƒæ–¹æ³•è°ƒç”¨çš„é—®é¢˜ã€‚</p>
<p>è€Œä¸”è¿˜å¯ä»¥åœ¨äº‹åŠ¡æ‰§è¡Œè¿‡ç¨‹ä¸­è·å–åˆ°äº‹åŠ¡çš„çŠ¶æ€ä¿¡æ¯ï¼Œåšç‚¹æ›´ç»†è‡´çš„æ§åˆ¶ã€‚</p>
<p>ä½†è¿™ç§æ–¹å¼ä¹Ÿæœ‰äº›é—®é¢˜ã€‚</p>
<p>æœ€æ˜æ˜¾çš„å°±æ˜¯ä»£ç çš„å¯è¯»æ€§ä¼šå˜å·®ä¸€äº›ï¼Œä¸šåŠ¡é€»è¾‘å’Œäº‹åŠ¡é€»è¾‘ä¼šæ··åœ¨ä¸€èµ·ã€‚</p>
<p>å¦å¤–ï¼Œå¦‚æœä¸šåŠ¡é€»è¾‘æ¯”è¾ƒå¤æ‚ï¼ŒåµŒå¥—å±‚æ¬¡æ·±çš„è¯ï¼Œä»£ç ä¹Ÿä¼šå˜å¾—ä¸å¤ªå¥½ç»´æŠ¤ã€‚</p>
<p>å½“ç„¶ä¸€èˆ¬æ¥è¯´éƒ½ä¼šåœ¨é¢å¤–å°è£…ä¸€äº›æ–¹æ³•ä»¥ä¾›ä¸šåŠ¡ä¾§æ¥è°ƒç”¨ã€‚</p>
<h5 data-id="heading-5">TransactionManagerï¼šæœ€çµæ´»çš„</h5>
<p>å¦‚æœæƒ³è¦å®Œå…¨çš„æ§åˆ¶æƒï¼Œé‚£å°±å¾—ç›´æ¥ç”¨<code>TransactionManager</code>äº†ã€‚è¿™ç§æ–¹å¼æœ€çµæ´»ï¼Œä½†çµæ´»çš„ä»£ä»·å°±æ˜¯å®¹æ˜“å‡ºé”™ã€‚</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-keyword">@Service</span>
publicclassÂ PaymentServiceÂ {
Â  Â Â 
Â  Â Â <span class="hljs-keyword">@Autowired</span>
Â  Â Â privateÂ PlatformTransactionManager transactionManager;
Â  Â Â 
Â  Â Â publicÂ voidÂ <span class="hljs-built_in">processPayment</span>(Payment payment)Â {
Â  Â  Â  Â  DefaultTransactionDefinition def =Â newÂ <span class="hljs-built_in">DefaultTransactionDefinition</span>();
Â  Â  Â  Â  def<span class="hljs-selector-class">.setIsolationLevel</span>(TransactionDefinition.ISOLATION_READ_COMMITTED);
Â  Â  Â  Â  def<span class="hljs-selector-class">.setPropagationBehavior</span>(TransactionDefinition.PROPAGATION_REQUIRED);
Â  Â  Â  Â Â 
Â  Â  Â  Â  TransactionStatus status = transactionManager<span class="hljs-selector-class">.getTransaction</span>(def);
Â  Â  Â  Â Â tryÂ {
Â  Â  Â  Â  Â  Â  paymentRepository<span class="hljs-selector-class">.save</span>(payment);
Â  Â  Â  Â  Â  Â  notificationService<span class="hljs-selector-class">.sendPaymentConfirmation</span>(payment);
Â  Â  Â  Â  Â  Â  transactionManager<span class="hljs-selector-class">.commit</span>(status);
Â  Â  Â  Â  }Â catchÂ (Exception e) {
Â  Â  Â  Â  Â  Â  transactionManager<span class="hljs-selector-class">.rollback</span>(status);
Â  Â  Â  Â  Â  Â Â throwÂ e;
Â  Â  Â  Â  }
Â  Â  }
}
</code></pre>
<p>è¿™ç§æ–¹å¼çš„å¥½å¤„æ˜¯å¯ä»¥ç²¾ç¡®æ§åˆ¶äº‹åŠ¡çš„æ¯ä¸€ä¸ªç»†èŠ‚ï¼Œæ¯”å¦‚éš”ç¦»çº§åˆ«ã€ä¼ æ’­è¡Œä¸ºã€è¶…æ—¶æ—¶é—´ç­‰ç­‰ã€‚</p>
<p>ä½†æ˜¯ä»£ç é‡ä¼šå¢åŠ å¾ˆå¤šï¼Œè€Œä¸”å®¹æ˜“å‡ºé”™ã€‚</p>
<p>ä¸€æ—¦å¿˜è®°æäº¤æˆ–è€…å›æ»šï¼Œé‚£è¿Ÿæ—©ä¼šæœ‰æ•°æ®ä¸ä¸€è‡´çš„æƒŠå–œã€‚</p>
<h4 data-id="heading-6">è¯¥é€‰å“ªä¸ªï¼Ÿ</h4>
<p>ç»è¿‡ä¸Šé¢çš„ä»‹ç»ï¼Œåˆ°åº•è¯¥æ€ä¹ˆé€‰æ‹©å‘¢ï¼Ÿ</p>
<p>æˆ‘çš„å»ºè®®æ˜¯è¿™æ ·çš„ï¼š</p>
<p><strong>å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œ@Transactionalå°±å¤Ÿç”¨äº†</strong>ã€‚å®ƒç®€å•ã€ç›´æ¥ï¼Œèƒ½è§£å†³90%çš„åœºæ™¯ã€‚é™¤éä½ é‡åˆ°äº†å®ƒè§£å†³ä¸äº†çš„é—®é¢˜ï¼Œå¦åˆ™æ²¡å¿…è¦æå¤æ‚ã€‚</p>
<p><strong>éœ€è¦ç²¾ç»†æ§åˆ¶æ—¶ï¼Œè€ƒè™‘TransactionTemplate</strong>ã€‚æ¯”å¦‚ä½ éœ€è¦åœ¨äº‹åŠ¡æ‰§è¡Œè¿‡ç¨‹ä¸­æ ¹æ®æŸäº›æ¡ä»¶å†³å®šæ˜¯å¦å›æ»šï¼Œæˆ–è€…éœ€è¦åœ¨ä¸€ä¸ªæ–¹æ³•é‡Œç®¡ç†å¤šä¸ªäº‹åŠ¡ï¼Œè¿™æ—¶å€™å°±éœ€è¦ç”¨ä¸Š<code>TransactionTemplate</code>äº†ã€‚</p>
<p><strong>æå°‘æ•°æƒ…å†µä¸‹æ‰ç›´æ¥ç”¨TransactionManager</strong>ã€‚é€šå¸¸æ˜¯åœ¨å†™æ¡†æ¶ä»£ç æˆ–è€…æœ‰éå¸¸ç‰¹æ®Šçš„éœ€æ±‚æ—¶æ‰ä¼šç”¨åˆ°ã€‚</p>
<h4 data-id="heading-7">ä¸€ä¸ªä¾‹å­</h4>
<p>è®©æˆ‘ä¸¾ä¸ªå®é™…çš„ä¾‹å­æ¥è¯´æ˜è¿™ä¸‰ç§æ–¹å¼çš„å·®å¼‚ã€‚</p>
<p>å‡è®¾æˆ‘ä»¬è¦å®ç°ä¸€ä¸ªæ‰¹é‡å¯¼å…¥ç”¨æˆ·çš„åŠŸèƒ½ï¼Œè¦æ±‚æ˜¯ï¼šå¦‚æœæŸä¸ªç”¨æˆ·å¯¼å…¥å¤±è´¥ï¼Œä¸åº”è¯¥å½±å“å…¶ä»–ç”¨æˆ·çš„å¯¼å…¥ã€‚</p>
<p>ç”¨<code>@Transactional</code>çš„è¯ï¼Œå¯èƒ½ä¼šè¿™æ ·å†™ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span><span class="hljs-keyword">class</span>Â <span class="hljs-title class_">UserImportService</span>Â {
Â  Â Â 
Â  Â Â <span class="hljs-keyword">public</span>Â <span class="hljs-built_in">void</span>Â <span class="hljs-title function_">importUsers</span>(<span class="hljs-params">List&lt;User&gt; users</span>)Â {
Â  Â  Â  Â Â <span class="hljs-keyword">for</span>Â (<span class="hljs-title class_">User</span> user : users) {
Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">try</span>Â {
Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-title function_">createUserWithTransaction</span>(user); Â <span class="hljs-comment">// æ³¨æ„ï¼Œè¿™æ ·å†™äº‹åŠ¡ä¸ä¼šç”Ÿæ•ˆï¼</span>
Â  Â  Â  Â  Â  Â  }Â <span class="hljs-keyword">catch</span>Â (<span class="hljs-title class_">Exception</span> e) {
Â  Â  Â  Â  Â  Â  Â  Â  log.<span class="hljs-title function_">error</span>(<span class="hljs-string">"å¯¼å…¥ç”¨æˆ·å¤±è´¥: {}"</span>, user.<span class="hljs-title function_">getUsername</span>(), e);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }
Â  Â  }
Â  Â Â 
Â  Â Â <span class="hljs-meta">@Transactional</span>
Â  Â Â <span class="hljs-keyword">public</span>Â <span class="hljs-built_in">void</span>Â <span class="hljs-title function_">createUserWithTransaction</span>(<span class="hljs-params">User user</span>)Â {
Â  Â  Â  Â  userRepository.<span class="hljs-title function_">save</span>(user);
Â  Â  Â  Â  userProfileRepository.<span class="hljs-title function_">save</span>(user.<span class="hljs-title function_">getProfile</span>());
Â  Â  }
}
</code></pre>
<p><strong>âš ï¸ ä¸Šé¢çš„ä»£ç ä¸­ï¼Œäº‹åŠ¡æ˜¯ä¸ä¼šç”Ÿæ•ˆçš„ï¼</strong></p>
<p>è¿™æ˜¯å› ä¸º<code>importUsers</code>æ–¹æ³•è°ƒç”¨åŒä¸€ä¸ªç±»ä¸­çš„<code>createUserWithTransaction</code>æ–¹æ³•ï¼Œå±äº<strong>å†…éƒ¨æ–¹æ³•è°ƒç”¨</strong>ã€‚Spring AOPé€šè¿‡ä»£ç†å®ç°äº‹åŠ¡ï¼Œè€ŒåŒä¸€ä¸ªç±»å†…éƒ¨çš„æ–¹æ³•è°ƒç”¨ä¸ä¼šèµ°ä»£ç†ï¼Œæ‰€ä»¥<code>@Transactional</code>æ³¨è§£å®Œå…¨å¤±æ•ˆã€‚</p>
<p>é€šä¿—çš„åšæ³•æ˜¯å°†æœ‰äº‹åŠ¡çš„æ–¹æ³•æŠ½å–åˆ°å¦ä¸€ä¸ªServiceä¸­ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span><span class="hljs-keyword">class</span>Â <span class="hljs-title class_">UserImportService</span>Â {
Â  Â Â 
Â  Â Â <span class="hljs-meta">@Autowired</span>
Â  Â Â <span class="hljs-keyword">private</span>Â <span class="hljs-title class_">UserTransactionService</span> userTransactionService;
Â  Â Â 
Â  Â Â <span class="hljs-keyword">public</span>Â <span class="hljs-built_in">void</span>Â <span class="hljs-title function_">importUsers</span>(<span class="hljs-params">List&lt;User&gt; users</span>)Â {
Â  Â  Â  Â Â <span class="hljs-keyword">for</span>Â (<span class="hljs-title class_">User</span> user : users) {
Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">try</span>Â {
Â  Â  Â  Â  Â  Â  Â  Â  userTransactionService.<span class="hljs-title function_">createUserWithTransaction</span>(user); Â <span class="hljs-comment">// âœ… è¿™æ ·æ‰ä¼šç”Ÿæ•ˆ</span>
Â  Â  Â  Â  Â  Â  }Â <span class="hljs-keyword">catch</span>Â (<span class="hljs-title class_">Exception</span> e) {
Â  Â  Â  Â  Â  Â  Â  Â  log.<span class="hljs-title function_">error</span>(<span class="hljs-string">"å¯¼å…¥ç”¨æˆ·å¤±è´¥: {}"</span>, user.<span class="hljs-title function_">getUsername</span>(), e);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }
Â  Â  }
}

<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span><span class="hljs-keyword">class</span>Â <span class="hljs-title class_">UserTransactionService</span>Â {
Â  Â Â 
Â  Â Â <span class="hljs-meta">@Transactional</span>
Â  Â Â <span class="hljs-keyword">public</span>Â <span class="hljs-built_in">void</span>Â <span class="hljs-title function_">createUserWithTransaction</span>(<span class="hljs-params">User user</span>)Â {
Â  Â  Â  Â  userRepository.<span class="hljs-title function_">save</span>(user);
Â  Â  Â  Â  userProfileRepository.<span class="hljs-title function_">save</span>(user.<span class="hljs-title function_">getProfile</span>());
Â  Â  }
}
</code></pre>
<p>è¿™ç§æ–¹å¼çš„é—®é¢˜æ˜¯éœ€è¦é¢å¤–åˆ›å»ºä¸€ä¸ªServiceç±»ï¼Œå¢åŠ äº†ä»£ç å¤æ‚åº¦ã€‚</p>
<p>å½“ç„¶è¿˜æœ‰å¦ä¸€ç§æ–¹å¼ä½¿ç”¨Springçš„Â <code>AopContext.currentProxy()</code>Â æ‹¿åˆ°å½“å‰ä»£ç†å¯¹è±¡å†å»è°ƒç”¨ï¼Œæˆ–è€…ç”¨Â <code>ApplicationContext</code>Â å»ä»å®¹å™¨é‡Œè·å–ä»£ç†å¯¹è±¡ï¼Œä½†å§‹ç»ˆè§‰å¾—ä¸å¤ªä¼˜é›…ã€‚</p>
<p>è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæœ‰æ—¶å€™<code>TransactionTemplate</code>ä¼šæ˜¯æ›´å¥½çš„é€‰æ‹©ã€‚</p>
<p>ç”¨<code>TransactionTemplate</code>çš„è¯ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span><span class="hljs-keyword">class</span>Â <span class="hljs-title class_">UserImportService</span>Â {
Â  Â Â 
Â  Â Â <span class="hljs-meta">@Autowired</span>
Â  Â Â <span class="hljs-keyword">private</span>Â <span class="hljs-title class_">TransactionTemplate</span> transactionTemplate;
Â  Â Â 
Â  Â Â <span class="hljs-keyword">public</span>Â <span class="hljs-built_in">void</span>Â <span class="hljs-title function_">importUsers</span>(<span class="hljs-params">List&lt;User&gt; users</span>)Â {
Â  Â  Â  Â Â <span class="hljs-keyword">for</span>Â (<span class="hljs-title class_">User</span> user : users) {
Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">try</span>Â {
Â  Â  Â  Â  Â  Â  Â  Â  transactionTemplate.<span class="hljs-title function_">execute</span>(status -&gt; {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  userRepository.<span class="hljs-title function_">save</span>(user);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  userProfileRepository.<span class="hljs-title function_">save</span>(user.<span class="hljs-title function_">getProfile</span>());
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â returnnull;
Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  }Â <span class="hljs-keyword">catch</span>Â (<span class="hljs-title class_">Exception</span> e) {
Â  Â  Â  Â  Â  Â  Â  Â  log.<span class="hljs-title function_">error</span>(<span class="hljs-string">"å¯¼å…¥ç”¨æˆ·å¤±è´¥: {}"</span>, user.<span class="hljs-title function_">getUsername</span>(), e);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }
Â  Â  }
}
</code></pre>
<p>è¿™ç§æ–¹å¼å°±å¾ˆæ¸…æ™°ï¼Œäº‹åŠ¡è¾¹ç•Œåœ¨ä»£ç ä¸­ä¸€ç›®äº†ç„¶ï¼Œè€Œä¸”ä¸ç”¨æ‹…å¿ƒæ–¹æ³•è°ƒç”¨çš„é—®é¢˜ã€‚</p>
<p>é‚£<code>TransactionManager</code>å‘¢ï¼Ÿ</p>
<p>å†™ä¸šåŠ¡çš„æ—¶å€™åŸºæœ¬ä¸å¤ªä¼šç”¨åˆ°ï¼Œæ‰€ä»¥å’±ä¹Ÿä¸å¤šè´¹å£èˆŒäº†ã€‚</p>
<h4 data-id="heading-8">è¸©è¿‡çš„å‘</h4>
<p>è¯´åˆ°äº‹åŠ¡ç®¡ç†ï¼Œæˆ‘è‡ªå·±ä¹Ÿè¸©è¿‡ä¸å°‘å‘ã€‚</p>
<p>å°è±¡æœ€æ·±çš„ä¸€æ¬¡æ˜¯åœ¨å¤„ç†ä¸€ä¸ªæŠ¥è¡¨ç»Ÿè®¡çš„åŠŸèƒ½æ—¶ï¼Œç”±äºæ•°æ®é‡æ¯”è¾ƒå¤§ï¼Œæˆ‘æƒ³ç€ç”¨åªè¯»äº‹åŠ¡æ¥æé«˜æ€§èƒ½ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@Transactional</span>(readOnly =Â <span class="hljs-literal">true</span>)
<span class="hljs-keyword">public</span>Â <span class="hljs-title class_">List</span>&lt;<span class="hljs-title class_">ReportData</span>&gt;Â <span class="hljs-title function_">generateReport</span>(<span class="hljs-params">ReportQuery query</span>)Â {
Â  Â Â <span class="hljs-comment">// å¤æ‚çš„æŸ¥è¯¢é€»è¾‘</span>
Â  Â Â <span class="hljs-keyword">return</span>Â reportRepository.<span class="hljs-title function_">findComplexData</span>(query);
}
</code></pre>
<p>ç»“æœå‘ç°æ€§èƒ½æå‡å¹¶ä¸æ˜æ˜¾ï¼Œåæ¥æ‰çŸ¥é“åªè¯»äº‹åŠ¡åœ¨æŸäº›æ•°æ®åº“è¿æ¥æ± é…ç½®ä¸‹ï¼Œæ•ˆæœå¹¶ä¸ç†æƒ³ã€‚</p>
<p>å¦ä¸€ä¸ªå¸¸è§çš„é—®é¢˜æ˜¯äº‹åŠ¡è¶…æ—¶ã€‚</p>
<p>æœ‰äº›å¼€å‘è€…å–œæ¬¢æŠŠäº‹åŠ¡è¶…æ—¶è®¾ç½®å¾—å¾ˆé•¿ï¼Œç”Ÿæ€•ä¸šåŠ¡é€»è¾‘æ‰§è¡Œæ—¶é—´è¿‡é•¿å¯¼è‡´äº‹åŠ¡å›æ»šã€‚ä½†è¿™æ ·åšçš„é£é™©å¾ˆæ˜æ˜¾ï¼Œå¦‚æœçœŸå‡ºç°äº†æ­»é”æˆ–è€…å…¶ä»–é—®é¢˜ï¼Œç³»ç»Ÿä¼šé•¿æ—¶é—´æ— å“åº”ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// è¿™æ ·è®¾ç½®å¿…ç„¶æ˜¯ä¸å¤ªå¥½çš„ï¼Œæå…¶ä¸æ¨èï¼Œé™¤éä½ æ˜ç¡®çŸ¥é“è‡ªå·±åœ¨åšä»€ä¹ˆ</span>
<span class="hljs-meta">@Transactional(timeout =Â 300)</span>Â <span class="hljs-comment">// 5åˆ†é’Ÿè¶…æ—¶</span>
<span class="hljs-keyword">public</span>Â <span class="hljs-keyword">void</span>Â <span class="hljs-title function_">processLargeDataSet</span><span class="hljs-params">(List&lt;Data&gt; dataList)</span>Â {
Â  Â Â <span class="hljs-comment">// å¤§é‡æ•°æ®å¤„ç†é€»è¾‘</span>
}
</code></pre>
<p>æ›´å¥½çš„åšæ³•æ˜¯ï¼ŒæŠŠå¤§äº‹åŠ¡æ‹†åˆ†æˆå°äº‹åŠ¡ï¼Œæˆ–è€…æ”¹å†™æˆæ‰¹å¤„ç†ã€‚</p>
<h4 data-id="heading-9">æ··åˆä½¿ç”¨çš„é—®é¢˜</h4>
<p>å›åˆ°æ–‡ç« å¼€å¤´æåˆ°çš„é‚£ä¸ªåŒäº‹çš„ä»£ç ï¼Œæ··åˆä½¿ç”¨ä¸åŒçš„äº‹åŠ¡ç®¡ç†æ–¹å¼å¾ˆå®¹æ˜“å‡ºé—®é¢˜ã€‚</p>
<p>æœ€å¸¸è§çš„æƒ…å†µæ˜¯äº‹åŠ¡ä¼ æ’­è¡Œä¸ºçš„ç†è§£åå·®ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span><span class="hljs-keyword">class</span>Â <span class="hljs-title class_">OrderService</span>Â {
Â  Â Â 
Â  Â Â <span class="hljs-meta">@Autowired</span>
Â  Â Â <span class="hljs-keyword">private</span>Â <span class="hljs-title class_">TransactionTemplate</span> transactionTemplate;
Â  Â Â 
Â  Â Â <span class="hljs-meta">@Transactional</span>
Â  Â Â <span class="hljs-keyword">public</span>Â <span class="hljs-built_in">void</span>Â <span class="hljs-title function_">processOrder</span>(<span class="hljs-params">Order order</span>)Â {
Â  Â  Â  Â  orderRepository.<span class="hljs-title function_">save</span>(order);
Â  Â  Â  Â Â 
Â  Â  Â  Â Â <span class="hljs-comment">// è¿™é‡Œåˆå¼€äº†ä¸€ä¸ªäº‹åŠ¡æ¨¡æ¿ï¼Œä¼ æ’­è¡Œä¸ºå¯èƒ½å’Œé¢„æœŸä¸ä¸€è‡´</span>
Â  Â  Â  Â  transactionTemplate.<span class="hljs-title function_">execute</span>(status -&gt; {
Â  Â  Â  Â  Â  Â  auditRepository.<span class="hljs-title function_">save</span>(<span class="hljs-keyword">new</span>Â <span class="hljs-title class_">OrderAudit</span>(order));
Â  Â  Â  Â  Â  Â Â returnnull;
Â  Â  Â  Â  });
Â  Â  }
}
</code></pre>
<p>è¿™ç§æ··ç”¨çš„ä»£ç å¾ˆè›‹ç–¼ï¼Œå¾ˆéš¾ç†è§£äº‹åŠ¡çš„è¾¹ç•Œï¼Œè°ƒè¯•èµ·æ¥ä¹Ÿå¾ˆçƒ¦ã€‚</p>
<p>æ‰€ä»¥åœ¨ä¸€ä¸ªserviceç±»ä¸­å°½é‡ä¿æŒäº‹åŠ¡ç®¡ç†æ–¹å¼çš„ä¸€è‡´æ€§ï¼Œæ²¡äº‹å°‘æŠ˜è…¾ã€‚</p>
<h3 data-id="heading-10">ç»“å°¾/æ€»ç»“</h3>
<p>ç¨å¾®æ€»ç»“ä¸€ä¸‹ã€‚</p>
<p>å¯¹äºæ–°æ‰‹ï¼Œå»ºè®®å…ˆæŠŠ<code>@Transactional</code>çš„å„ç§ç‰¹æ€§å’Œå‘ç‚¹ææ˜ç™½ï¼ŒåŸºæœ¬èƒ½è§£å†³å¤§éƒ¨åˆ†é—®é¢˜ã€‚ç­‰åˆ°çœŸæ­£éœ€è¦æ›´ç²¾ç»†æ§åˆ¶çš„æ—¶å€™ï¼Œå†è€ƒè™‘å…¶ä»–æ–¹æ¡ˆã€‚</p>
<p>å¯¹äºæœ‰ç»éªŒçš„å¼€å‘è€…ï¼Œåœ¨å·²ç»ç†Ÿç»ƒæŒæ¡ç¼–ç¨‹æ—¶äº‹åŠ¡æ§åˆ¶çš„å‰æä¸‹ï¼Œå†å¤šå…³æ³¨äº‹åŠ¡çš„æ€§èƒ½å½±å“ã€‚</p>
<p>äº‹åŠ¡ä¸æ˜¯ä¸‡é‡‘æ²¹ï¼Œè¿‡åº¦ä½¿ç”¨æˆ–è€…ä¸å½“ä½¿ç”¨éƒ½ä¼šå¸¦æ¥ä¸å¯é¢„æ–™çš„æ€§èƒ½é—®é¢˜ã€‚</p>
<p>æœ€é‡è¦çš„æ˜¯ï¼Œæ— è®ºé€‰æ‹©å“ªç§æ–¹å¼ï¼Œéƒ½è¦ä¿è¯ä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</p>
<p>æŠ€æœ¯æ˜¯ä¸ºä¸šåŠ¡æœåŠ¡çš„ï¼Œè€Œä»£ç æ˜¯è¦ç»™æ•´ä¸ªå›¢é˜Ÿä¸€èµ·ç»´æŠ¤çš„ï¼Œä¸è¦ä¸ºäº†ç‚«æŠ€è®©ä»£ç å˜å¾—æ™¦æ¶©éš¾æ‡‚ã€‚</p>
<p>å¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¸®ä½ ç†æ¸…æ¥šè¿™ä¸‰ç§æ–¹å¼çš„åŒºåˆ«å’Œä½¿ç”¨åœºæ™¯ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Swift è‡ªå®šä¹‰å­—ç¬¦ä¸²æ’å€¼è¯¦è§£ï¼šä»åŸºç¡€åˆ°è¿›é˜¶åº”ç”¨]]></title>    <link>https://juejin.cn/post/7602996277664858166</link>    <guid>https://juejin.cn/post/7602996277664858166</guid>    <pubDate>2026-02-05T07:52:07.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602996277664858166" data-draft-id="7603142147642163243" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Swift è‡ªå®šä¹‰å­—ç¬¦ä¸²æ’å€¼è¯¦è§£ï¼šä»åŸºç¡€åˆ°è¿›é˜¶åº”ç”¨"/> <meta itemprop="keywords" content="Swift"/> <meta itemprop="datePublished" content="2026-02-05T07:52:07.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="unravel2025"/> <meta itemprop="url" content="https://juejin.cn/user/1116759541421880"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Swift è‡ªå®šä¹‰å­—ç¬¦ä¸²æ’å€¼è¯¦è§£ï¼šä»åŸºç¡€åˆ°è¿›é˜¶åº”ç”¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1116759541421880/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    unravel2025
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-05T07:52:07.000Z" title="Thu Feb 05 2026 07:52:07 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-05
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€</h2>
<p>Swift çš„å­—ç¬¦ä¸²æ’å€¼åŠŸèƒ½è¿œä¸æ­¢ç®€å•çš„å€¼æ›¿æ¢ã€‚è™½ç„¶å¤§å¤šæ•°å¼€å‘è€…ä¹ æƒ¯ä½¿ç”¨ <code>\()</code> è¯­æ³•å°†å˜é‡ç›´æ¥åµŒå…¥å­—ç¬¦ä¸²ï¼Œä½† Swift çš„å­—ç¬¦ä¸²æ’å€¼ç³»ç»Ÿå®é™…ä¸Šæ˜¯ä¸€ä¸ªé«˜åº¦å¯å®šåˆ¶ã€åŠŸèƒ½å¼ºå¤§çš„æœºåˆ¶ã€‚é€šè¿‡æ‰©å±• <code>String.StringInterpolation</code>ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å­—ç¬¦ä¸²å­—é¢é‡ä¸­ç›´æ¥æ‰§è¡Œæ ¼å¼åŒ–ã€éªŒè¯ã€æ¡ä»¶é€»è¾‘ç­‰æ“ä½œï¼Œä½¿ä»£ç æ›´åŠ ç®€æ´ã€è¡¨è¾¾åŠ›æ›´å¼ºã€‚</p>
<h2 data-id="heading-1">æ ¸å¿ƒæ¦‚å¿µè§£æ</h2>
<p>String.StringInterpolation æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<p><code>String.StringInterpolation</code> æ˜¯ Swift æ ‡å‡†åº“ä¸­çš„ä¸€ä¸ªç»“æ„ä½“ï¼Œè´Ÿè´£åœ¨ç¼–è¯‘æ—¶æ•è·å­—ç¬¦ä¸²å­—é¢é‡ä¸­çš„æ’å€¼æ®µã€‚æ¯å½“ä½ åœ¨å­—ç¬¦ä¸²ä¸­ä½¿ç”¨ <code>\(...)</code> è¯­æ³•æ—¶ï¼ŒSwift ç¼–è¯‘å™¨å®é™…ä¸Šä¼šï¼š</p>
<ol>
<li>åˆ›å»ºä¸€ä¸ª <code>String.StringInterpolation</code> å®ä¾‹</li>
<li>æŒ‰é¡ºåºè°ƒç”¨ <code>appendLiteral(_:)</code> æ·»åŠ å­—é¢é‡éƒ¨åˆ†</li>
<li>è°ƒç”¨ <code>appendInterpolation(...)</code> æ–¹æ³•å¤„ç†æ’å€¼éƒ¨åˆ†</li>
<li>æœ€åé€šè¿‡ <code>String(stringInterpolation:)</code> åˆå§‹åŒ–å™¨ç”Ÿæˆæœ€ç»ˆå­—ç¬¦ä¸²</li>
</ol>
<p>è‡ªå®šä¹‰æ’å€¼çš„å…³é”®åœ¨äºï¼šä¸º <code>String.StringInterpolation</code> æ·»åŠ é‡è½½çš„ <code>appendInterpolation</code> æ–¹æ³•ã€‚</p>
<p>appendInterpolation æ–¹æ³•çš„é­”æ³•</p>
<p><code>appendInterpolation</code> æ–¹æ³•æœ‰å‡ ä¸ªç‰¹æ®Šä¹‹å¤„ï¼š</p>
<ul>
<li>æ–¹æ³•åå›ºå®šï¼šå¿…é¡»å‘½åä¸º <code>appendInterpolation</code></li>
<li>å‚æ•°è‡ªç”±ï¼šå¯ä»¥å®šä¹‰ä»»æ„æ•°é‡å’Œç±»å‹çš„å‚æ•°</li>
<li>å¯å˜æ–¹æ³•ï¼šå¿…é¡»æ ‡è®°ä¸º <code>mutating</code>ï¼Œå› ä¸ºå®ƒä¼šä¿®æ”¹æ’å€¼çŠ¶æ€</li>
</ul>
<p>ç¼–è¯‘å™¨ä¼šæ ¹æ®æ’å€¼ä¸­çš„å‚æ•°ç±»å‹è‡ªåŠ¨é€‰æ‹©åŒ¹é…çš„é‡è½½ç‰ˆæœ¬ã€‚ä¾‹å¦‚ï¼š</p>
<ul>
<li><code>\(age)</code> ä¼šåŒ¹é… <code>appendInterpolation(_ value: Int)</code></li>
<li><code>\(score, format: .number)</code> ä¼šåŒ¹é… <code>appendInterpolation(_ value: Double, format: FormatStyle)</code></li>
</ul>
<h2 data-id="heading-2">åŸºç¡€å®ç°ï¼šæ ¼å¼åŒ–æ’å€¼</h2>
<p>FormatStyle åè®®æ‰©å±•ï¼šå®ç°å¯¹ <code>FormatStyle</code> åè®®çš„è‡ªå®šä¹‰æ’å€¼æ”¯æŒï¼š</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">import</span> Foundation

<span class="hljs-keyword">extension</span> <span class="hljs-title class_">String</span>.<span class="hljs-title class_">StringInterpolation</span> {
    <span class="hljs-comment">// æ·»åŠ ä¸€ä¸ªæ³›å‹æ’å€¼æ–¹æ³•ï¼Œæ¥å—ä»»ä½•ç¬¦åˆ FormatStyle åè®®çš„ç±»å‹</span>
    <span class="hljs-keyword">mutating</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">appendInterpolation</span>&lt;<span class="hljs-type">F</span>: <span class="hljs-type">FormatStyle</span>&gt;(
        <span class="hljs-keyword">_</span> <span class="hljs-params">value</span>: <span class="hljs-type">F</span>.<span class="hljs-type">FormatInput</span>,          <span class="hljs-comment">// è¦æ ¼å¼åŒ–çš„å€¼</span>
        <span class="hljs-params">format</span>: <span class="hljs-type">F</span>                        <span class="hljs-comment">// æ ¼å¼åŒ–å™¨å®ä¾‹</span>
    ) <span class="hljs-keyword">where</span> <span class="hljs-type">F</span>.<span class="hljs-type">FormatInput</span>: <span class="hljs-type">Equatable</span>, <span class="hljs-type">F</span>.<span class="hljs-type">FormatOutput</span> <span class="hljs-operator">==</span> <span class="hljs-type">String</span> {
        <span class="hljs-comment">// è°ƒç”¨æ ¼å¼åŒ–å™¨çš„ format æ–¹æ³•å¹¶è¿½åŠ ç»“æœ</span>
        appendLiteral(format.format(value))
    }
}
</code></pre>
<p>ä»£ç è§£æï¼š</p>
<ul>
<li><code>&lt;F: FormatStyle&gt;</code>ï¼šæ³›å‹å‚æ•°ï¼Œæ¥å—ä»»ä½•ç¬¦åˆ <code>FormatStyle</code> åè®®çš„ç±»å‹</li>
<li><code>F.FormatInput</code>ï¼šæ ¼å¼åŒ–å™¨çš„è¾“å…¥ç±»å‹</li>
<li><code>F.FormatOutput == String</code>ï¼šçº¦æŸè¾“å‡ºå¿…é¡»æ˜¯å­—ç¬¦ä¸²</li>
<li><code>appendLiteral(_:)</code>ï¼šå°†æ ¼å¼åŒ–åçš„å­—ç¬¦ä¸²æ·»åŠ åˆ°æœ€ç»ˆç»“æœä¸­</li>
</ul>
<p>ä½¿ç”¨ç¤ºä¾‹</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">let</span> today <span class="hljs-operator">=</span> <span class="hljs-type">Date</span>()

<span class="hljs-comment">// åœ¨å­—ç¬¦ä¸²ä¸­ç›´æ¥è¿›è¡Œæ—¥æœŸæ ¼å¼åŒ–</span>
<span class="hljs-keyword">let</span> formattedString <span class="hljs-operator">=</span> <span class="hljs-string">"""
Today's date is <span class="hljs-subst">\(today, format: .dateTime.year().month().day())</span>
"""</span>

<span class="hljs-built_in">print</span>(formattedString)
<span class="hljs-comment">// è¾“å‡º: Today's date is 13 Jan 2026</span>

<span class="hljs-comment">// æ›´å¤š FormatStyle ç¤ºä¾‹</span>
<span class="hljs-keyword">let</span> price <span class="hljs-operator">=</span> <span class="hljs-number">99.99</span>
<span class="hljs-keyword">let</span> priceString <span class="hljs-operator">=</span> <span class="hljs-string">"Price: <span class="hljs-subst">\(price, format: .currency(code: <span class="hljs-string">"USD"</span>))</span>"</span>
<span class="hljs-comment">// è¾“å‡º: Price: $99.99</span>

<span class="hljs-keyword">let</span> number <span class="hljs-operator">=</span> <span class="hljs-number">1234567.89</span>
<span class="hljs-keyword">let</span> numberString <span class="hljs-operator">=</span> <span class="hljs-string">"Number: <span class="hljs-subst">\(number, format: .number.precision(.fractionLength(<span class="hljs-number">2</span>)))</span>"</span>
<span class="hljs-comment">// è¾“å‡º: Number: 1,234,567.89</span>
</code></pre>
<h2 data-id="heading-3">è¿›é˜¶åº”ç”¨åœºæ™¯</h2>
<p>åœºæ™¯ä¸€ï¼šæ•°å€¼èŒƒå›´éªŒè¯ä¸æ˜¾ç¤º</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">extension</span> <span class="hljs-title class_">String</span>.<span class="hljs-title class_">StringInterpolation</span> {
    <span class="hljs-comment">// æ·»åŠ æ¸©åº¦æ’å€¼ï¼Œè‡ªåŠ¨éªŒè¯èŒƒå›´å¹¶æ·»åŠ å•ä½</span>
    <span class="hljs-keyword">mutating</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">appendInterpolation</span>(<span class="hljs-params">temperature</span>: <span class="hljs-type">Double</span>) {
        <span class="hljs-keyword">if</span> temperature <span class="hljs-operator">&lt;</span> <span class="hljs-operator">-</span><span class="hljs-number">273.15</span> {
            appendLiteral(<span class="hljs-string">"Invalid (below absolute zero)"</span>)
        } <span class="hljs-keyword">else</span> {
            appendLiteral(<span class="hljs-type">String</span>(format: <span class="hljs-string">"%.1fÂ°C"</span>, temperature))
        }
    }
}

<span class="hljs-keyword">let</span> temp1 <span class="hljs-operator">=</span> <span class="hljs-number">25.5</span>
<span class="hljs-keyword">let</span> temp2 <span class="hljs-operator">=</span> <span class="hljs-operator">-</span><span class="hljs-number">300.0</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"Room temp: <span class="hljs-subst">\(temperature: temp1)</span>"</span>)  <span class="hljs-comment">// Room temp: 25.5Â°C</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"Invalid: <span class="hljs-subst">\(temperature: temp2)</span>"</span>)    <span class="hljs-comment">// Invalid: Invalid (below absolute zero)</span>
</code></pre>
<p>åœºæ™¯äºŒï¼šæ¡ä»¶é€»è¾‘ä¸å¯é€‰å€¼å¤„ç†</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">extension</span> <span class="hljs-title class_">String</span>.<span class="hljs-title class_">StringInterpolation</span> {
    <span class="hljs-comment">// ä¼˜é›…å¤„ç†å¯é€‰å€¼</span>
    <span class="hljs-keyword">mutating</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">appendInterpolation</span>&lt;<span class="hljs-type">T</span>&gt;(
        <span class="hljs-keyword">_</span> <span class="hljs-params">value</span>: <span class="hljs-type">T</span>?, 
        <span class="hljs-params">default</span> <span class="hljs-params">defaultValue</span>: <span class="hljs-type">String</span> <span class="hljs-operator">=</span> <span class="hljs-string">"N/A"</span>
    ) {
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> value <span class="hljs-operator">=</span> value {
            appendLiteral(<span class="hljs-string">"<span class="hljs-subst">\(value)</span>"</span>)
        } <span class="hljs-keyword">else</span> {
            appendLiteral(defaultValue)
        }
    }
}

<span class="hljs-keyword">let</span> name: <span class="hljs-type">String</span>? <span class="hljs-operator">=</span> <span class="hljs-string">"Alice"</span>
<span class="hljs-keyword">let</span> age: <span class="hljs-type">Int</span>? <span class="hljs-operator">=</span> <span class="hljs-literal">nil</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"Name: <span class="hljs-subst">\(name, <span class="hljs-keyword">default</span>: <span class="hljs-string">"Unknown"</span>)</span>"</span>)  <span class="hljs-comment">// Name: Alice</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"Age: <span class="hljs-subst">\(age)</span>"</span>)                        <span class="hljs-comment">// Age: N/A</span>
</code></pre>
<p>åœºæ™¯ä¸‰ï¼šæ„å»ºé¢†åŸŸä¸“ç”¨è¯­è¨€(DSL)</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// ä¸º HTML æ„å»ºè‡ªå®šä¹‰æ’å€¼</span>
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">HTMLTag</span> {
    <span class="hljs-keyword">let</span> name: <span class="hljs-type">String</span>
    <span class="hljs-keyword">let</span> content: <span class="hljs-type">String</span>
    
    <span class="hljs-keyword">var</span> htmlString: <span class="hljs-type">String</span> {
        <span class="hljs-string">"&lt;<span class="hljs-subst">\(name)</span>&gt;<span class="hljs-subst">\(content)</span>&lt;/<span class="hljs-subst">\(name)</span>&gt;"</span>
    }
}

<span class="hljs-keyword">extension</span> <span class="hljs-title class_">String</span>.<span class="hljs-title class_">StringInterpolation</span> {
    <span class="hljs-comment">// ç›´æ¥åœ¨å­—ç¬¦ä¸²ä¸­åµŒå…¥ HTML</span>
    <span class="hljs-keyword">mutating</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">appendInterpolation</span>(<span class="hljs-params">html</span> <span class="hljs-params">tag</span>: <span class="hljs-type">HTMLTag</span>) {
        appendLiteral(tag.htmlString)
    }
}

<span class="hljs-keyword">let</span> title <span class="hljs-operator">=</span> <span class="hljs-type">HTMLTag</span>(name: <span class="hljs-string">"h1"</span>, content: <span class="hljs-string">"Hello World"</span>)
<span class="hljs-keyword">let</span> paragraph <span class="hljs-operator">=</span> <span class="hljs-type">HTMLTag</span>(name: <span class="hljs-string">"p"</span>, content: <span class="hljs-string">"This is a paragraph."</span>)

<span class="hljs-keyword">let</span> html <span class="hljs-operator">=</span> <span class="hljs-string">"""
&lt;!DOCTYPE html&gt;
<span class="hljs-subst">\(html: title)</span>
<span class="hljs-subst">\(html: paragraph)</span>
"""</span>
</code></pre>
<h2 data-id="heading-4">æ·±å…¥åŸç†åˆ†æ</h2>
<h3 data-id="heading-5">ç¼–è¯‘æ—¶è½¬æ¢æœºåˆ¶</h3>
<p>Swift ç¼–è¯‘å™¨ä¼šå°†å­—ç¬¦ä¸²å­—é¢é‡è½¬æ¢ä¸ºä¸€ç³»åˆ—æ–¹æ³•è°ƒç”¨ã€‚ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// æºä»£ç </span>
<span class="hljs-keyword">let</span> s <span class="hljs-operator">=</span> <span class="hljs-string">"Hello <span class="hljs-subst">\(name)</span>!

Welcome, <span class="hljs-subst">\(age)</span> year-old <span class="hljs-subst">\(name)</span>."</span>
</code></pre>
<p>// ç¼–è¯‘å™¨å®é™…ç”Ÿæˆçš„ä»£ç 
var interpolation = String.StringInterpolation(literalCapacity: 25, interpolationCount: 3)
interpolation.appendLiteral("Hello ")
interpolation.appendInterpolation(name)
interpolation.appendLiteral("!\n\nWelcome, ")
interpolation.appendInterpolation(age)
interpolation.appendLiteral(" year-old ")
interpolation.appendInterpolation(name)
interpolation.appendLiteral(".")
let s = String(stringInterpolation: interpolation)</p>
<pre><code class="hljs language-swift" lang="swift">
### æ€§èƒ½ä¼˜åŒ–ï¼šé¢„ç•™å®¹é‡

`<span class="hljs-type">String</span>.<span class="hljs-type">StringInterpolation</span>` çš„åˆå§‹åŒ–å™¨æ¥å—ä¸¤ä¸ªå‚æ•°ï¼š
<span class="hljs-operator">-</span> `literalCapacity`ï¼šé¢„ä¼°çš„å­—é¢é‡å­—ç¬¦æ€»æ•°
<span class="hljs-operator">-</span> `interpolationCount`ï¼šé¢„ä¼°çš„æ’å€¼æ®µæ•°é‡

è¿™å…è®¸å†…éƒ¨å®ç°é¢„å…ˆåˆ†é…å†…å­˜ï¼Œé¿å…é‡å¤åˆ†é…<span class="hljs-operator">ã€‚</span>è‡ªå®šä¹‰ `appendInterpolation` åº”å°½å¯èƒ½é«˜æ•ˆ<span class="hljs-operator">ã€‚</span>

### è®¾è®¡å“²å­¦

<span class="hljs-type">Swift</span> çš„å­—ç¬¦ä¸²æ’å€¼è®¾è®¡éµå¾ªå‡ ä¸ªæ ¸å¿ƒåŸåˆ™ï¼š

<span class="hljs-number">1</span>. <span class="hljs-operator">**</span>ç±»å‹å®‰å…¨<span class="hljs-operator">**</span>ï¼šæ’å€¼æ–¹æ³•å¯ä»¥é’ˆå¯¹å…·ä½“ç±»å‹ï¼Œé¿å…è¿è¡Œæ—¶é”™è¯¯
<span class="hljs-number">2</span>. <span class="hljs-operator">**</span>å¯æ‰©å±•æ€§<span class="hljs-operator">**</span>ï¼šé€šè¿‡åè®®å’Œæ³›å‹ï¼Œç¬¬ä¸‰æ–¹åº“ä¹Ÿèƒ½æä¾›è‡ªå®šä¹‰æ’å€¼
<span class="hljs-number">3</span>. <span class="hljs-operator">**</span>è¡¨è¾¾åŠ›<span class="hljs-operator">**</span>ï¼šå°†æ ¼å¼åŒ–é€»è¾‘ä»ä»£ç ä¸­ç§»åˆ°å­—ç¬¦ä¸²å­—é¢é‡ä¸­ï¼Œæé«˜å¯è¯»æ€§
<span class="hljs-number">4</span>. <span class="hljs-operator">**</span>é›¶æˆæœ¬æŠ½è±¡<span class="hljs-operator">**</span>ï¼šåŸºæœ¬æ’å€¼ä¸å­—ç¬¦ä¸²æ‹¼æ¥æ€§èƒ½ç›¸å½“

## æ‰©å±•åœºæ™¯ä¸æœ€ä½³å®è·µ

### åœºæ™¯å››ï¼šæ—¥å¿—ç³»ç»Ÿå¢å¼º

```swift
<span class="hljs-comment">// ä¸ºæ—¥å¿—çº§åˆ«æ·»åŠ é¢œè‰²æ ‡è®°</span>
<span class="hljs-keyword">enum</span> <span class="hljs-title class_">LogLevel</span> {
    <span class="hljs-keyword">case</span> debug, info, warning, error
    
    <span class="hljs-keyword">var</span> <span class="hljs-keyword">prefix</span>: <span class="hljs-type">String</span> {
        <span class="hljs-keyword">switch</span> <span class="hljs-keyword">self</span> {
        <span class="hljs-keyword">case</span> .debug:   <span class="hljs-keyword">return</span> <span class="hljs-string">"ğŸ› DEBUG"</span>
        <span class="hljs-keyword">case</span> .info:    <span class="hljs-keyword">return</span> <span class="hljs-string">"â„¹ï¸ INFO"</span>
        <span class="hljs-keyword">case</span> .warning: <span class="hljs-keyword">return</span> <span class="hljs-string">"âš ï¸ WARNING"</span>
        <span class="hljs-keyword">case</span> .error:   <span class="hljs-keyword">return</span> <span class="hljs-string">"âŒ ERROR"</span>
        }
    }
}

<span class="hljs-keyword">extension</span> <span class="hljs-title class_">String</span>.<span class="hljs-title class_">StringInterpolation</span> {
    <span class="hljs-keyword">mutating</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">appendInterpolation</span>(
        <span class="hljs-params">log</span> <span class="hljs-params">message</span>: <span class="hljs-keyword">@autoclosure</span> () -&gt; <span class="hljs-type">String</span>,
        <span class="hljs-params">level</span>: <span class="hljs-type">LogLevel</span> <span class="hljs-operator">=</span> .info,
        <span class="hljs-params">file</span>: <span class="hljs-type">String</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">#file</span>,
        <span class="hljs-params">line</span>: <span class="hljs-type">Int</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">#line</span>
    ) {
        <span class="hljs-keyword">let</span> filename <span class="hljs-operator">=</span> <span class="hljs-type">URL</span>(fileURLWithPath: file).lastPathComponent
        appendLiteral(<span class="hljs-string">"[<span class="hljs-subst">\(level.prefix)</span>] <span class="hljs-subst">\(filename)</span>:<span class="hljs-subst">\(line)</span> - <span class="hljs-subst">\(message())</span>"</span>)
    }
}

<span class="hljs-keyword">func</span> <span class="hljs-title function_">logDebug</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">msg</span>: <span class="hljs-type">String</span>) {
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"<span class="hljs-subst">\(log: msg, level: .debug)</span>"</span>)
}
</code></pre>
<p>åœºæ™¯äº”ï¼šæœ¬åœ°åŒ–æ”¯æŒ</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">extension</span> <span class="hljs-title class_">String</span>.<span class="hljs-title class_">StringInterpolation</span> {
    <span class="hljs-comment">// æ”¯æŒæœ¬åœ°åŒ–é”®</span>
    <span class="hljs-keyword">mutating</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">appendInterpolation</span>(
        <span class="hljs-params">localized</span> <span class="hljs-params">key</span>: <span class="hljs-type">String</span>,
        <span class="hljs-params">tableName</span>: <span class="hljs-type">String</span>? <span class="hljs-operator">=</span> <span class="hljs-literal">nil</span>,
        <span class="hljs-params">bundle</span>: <span class="hljs-type">Bundle</span> <span class="hljs-operator">=</span> .main
    ) {
        <span class="hljs-keyword">let</span> localized <span class="hljs-operator">=</span> <span class="hljs-type">NSLocalizedString</span>(key, tableName: tableName, bundle: bundle, comment: <span class="hljs-string">""</span>)
        appendLiteral(localized)
    }
}

<span class="hljs-comment">// ä½¿ç”¨: "Welcome message: \(localized: "welcome.message")"</span>
</code></pre>
<p>åœºæ™¯å…­ï¼šJSON æ„å»º</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">extension</span> <span class="hljs-title class_">String</span>.<span class="hljs-title class_">StringInterpolation</span> {
    <span class="hljs-comment">// å®‰å…¨åœ°æ’å…¥ JSON å€¼</span>
    <span class="hljs-keyword">mutating</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">appendInterpolation</span>(<span class="hljs-params">json</span> <span class="hljs-params">value</span>: <span class="hljs-keyword">Any</span>) {
        <span class="hljs-keyword">if</span> <span class="hljs-type">JSONSerialization</span>.isValidJSONObject([value]),
           <span class="hljs-keyword">let</span> data <span class="hljs-operator">=</span> <span class="hljs-keyword">try?</span> <span class="hljs-type">JSONSerialization</span>.data(withJSONObject: value),
           <span class="hljs-keyword">let</span> string <span class="hljs-operator">=</span> <span class="hljs-type">String</span>(data: data, encoding: .utf8) {
            appendLiteral(string)
        } <span class="hljs-keyword">else</span> {
            appendLiteral(<span class="hljs-string">"null"</span>)
        }
    }
}

<span class="hljs-keyword">let</span> dict <span class="hljs-operator">=</span> [<span class="hljs-string">"name"</span>: <span class="hljs-string">"Swift"</span>, <span class="hljs-string">"age"</span>: <span class="hljs-number">7</span>]
<span class="hljs-keyword">let</span> jsonString <span class="hljs-operator">=</span> <span class="hljs-string">"""
{
  "language": <span class="hljs-subst">\(json: <span class="hljs-string">"Swift"</span>)</span>,
  "details": <span class="hljs-subst">\(json: dict)</span>
}
"""</span>
</code></pre>
<p>æ³¨æ„äº‹é¡¹ä¸é™·é˜±</p>
<ol>
<li>é¿å…è¿‡åº¦ä½¿ç”¨ï¼šè™½ç„¶å¼ºå¤§ï¼Œä½†è¿‡å¤šçš„è‡ªå®šä¹‰æ’å€¼ä¼šé™ä½ä»£ç å¯è¯»æ€§</li>
<li>å‘½åå†²çªï¼šä¸åŒæ¨¡å—çš„ <code>appendInterpolation</code> å¯èƒ½äº§ç”Ÿæ­§ä¹‰ï¼Œå»ºè®®ä½¿ç”¨ç‰¹å®šæ ‡ç­¾</li>
<li>å¤æ‚é€»è¾‘ï¼šæ’å€¼ä¸­ä¸åº”åŒ…å«å¤æ‚ä¸šåŠ¡é€»è¾‘ï¼Œä¿æŒç®€å•å’Œèšç„¦</li>
<li>æ€§èƒ½æ•æ„Ÿï¼šåœ¨çƒ­è·¯å¾„ä¸­ï¼Œå¤§é‡æ’å€¼å¯èƒ½å½±å“æ€§èƒ½ï¼Œè€ƒè™‘é¢„æ ¼å¼åŒ–</li>
</ol>
<h2 data-id="heading-6">è§è§£ä¸æ€»ç»“</h2>
<p>Swift çš„è‡ªå®šä¹‰å­—ç¬¦ä¸²æ’å€¼æ˜¯ä¸€ä¸ªè¢«ä½ä¼°çš„å¼ºå¤§ç‰¹æ€§ã€‚å®ƒä¸ä»…ä»…æ˜¯è¯­æ³•ç³–ï¼Œæ›´æ˜¯è¯­è¨€å¯æ‰©å±•æ€§çš„ä½“ç°ã€‚ç›¸æ¯”å…¶ä»–è¯­è¨€çš„å­—ç¬¦ä¸²æ ¼å¼åŒ–ï¼ˆå¦‚ C çš„ <code>printf</code>ã€Python çš„ <code>f-string</code>ï¼‰ï¼ŒSwift çš„æ–¹æ¡ˆæä¾›äº†ï¼š</p>
<ul>
<li>ç¼–è¯‘æ—¶ç±»å‹æ£€æŸ¥ï¼šé¿å… <code>%d</code> å¯¹åº”å­—ç¬¦ä¸²çš„è¿è¡Œæ—¶é”™è¯¯</li>
<li>IDE æ”¯æŒï¼šXcode èƒ½æä¾›å®Œæ•´çš„è‡ªåŠ¨è¡¥å…¨å’Œç±»å‹ä¿¡æ¯</li>
<li>æ— é™æ‰©å±•ï¼šä»»ä½•ç±»å‹ã€ä»»ä½•åº“éƒ½å¯ä»¥æ·»åŠ è‡ªå·±çš„æ’å€¼è¡Œä¸º</li>
</ul>
<p>æ ¸å¿ƒä¼˜åŠ¿ï¼š</p>
<ol>
<li>å£°æ˜å¼æ ¼å¼åŒ–ï¼šå°†"å¦‚ä½•æ˜¾ç¤º"ä¸"æ˜¾ç¤ºä»€ä¹ˆ"åˆ†ç¦»</li>
<li>å‡å°‘é‡å¤ï¼šæ ¼å¼åŒ–é€»è¾‘é›†ä¸­å®šä¹‰ï¼Œå¤šå¤„å¤ç”¨</li>
<li>æå‡å¯è¯»æ€§ï¼šæ ¼å¼åŒ–æ„å›¾ç›´æ¥ä½“ç°åœ¨å­—ç¬¦ä¸²å­—é¢é‡ä¸­</li>
</ol>
<p>æ¨èåº”ç”¨åœºæ™¯ï¼š</p>
<ul>
<li>ç»Ÿä¸€çš„æ—¥æœŸã€æ•°å­—ã€è´§å¸æ ¼å¼åŒ–</li>
<li>é¢†åŸŸç‰¹å®šè¯­è¨€ï¼ˆDSLï¼‰æ„å»º</li>
<li>æ—¥å¿—ã€è°ƒè¯•ä¿¡æ¯çš„å¢å¼º</li>
<li>æ¨¡æ¿å¼•æ“çš„ç®€å•å®ç°</li>
</ul>
<p>åº”é¿å…çš„åœºæ™¯ï¼š</p>
<ul>
<li>å¤æ‚çš„ä¸šåŠ¡é€»è¾‘è®¡ç®—</li>
<li>ä¾èµ–å¤–éƒ¨çŠ¶æ€çš„æ ¼å¼åŒ–</li>
<li>éœ€è¦å›½é™…åŒ–/æœ¬åœ°åŒ–çš„é•¿æ–‡æœ¬</li>
</ul>
<p>å‚è€ƒèµ„æ–™</p>
<ol>
<li>
<p>å®˜æ–¹æ–‡æ¡£ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.swift.org%2Fswift-book%2Fdocumentation%2Fthe-swift-programming-language%2Fstringsandcharacters%2F%23String-Interpolation" target="_blank" title="https://docs.swift.org/swift-book/documentation/the-swift-programming-language/stringsandcharacters/#String-Interpolation" ref="nofollow noopener noreferrer">String Interpolation</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.apple.com%2Fdocumentation%2Fswift%2Fstring%2Fstringinterpolation" target="_blank" title="https://developer.apple.com/documentation/swift/string/stringinterpolation" ref="nofollow noopener noreferrer">String.StringInterpolation Structure</a></li>
</ul>
</li>
<li>
<p>ç›¸å…³åšå®¢ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fnilcoalescing.com%2Fblog%2FDefiningCustomStringInterpolationBehaviorInSwift%2F" target="_blank" title="https://nilcoalescing.com/blog/DefiningCustomStringInterpolationBehaviorInSwift/" ref="nofollow noopener noreferrer">DefiningCustomStringInterpolationBehaviorInSwift</a></li>
</ul>
</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸€æ¬¡ TimeZone é”ç«äº‰å¼•å‘çš„æ€§èƒ½ä¼˜åŒ–]]></title>    <link>https://juejin.cn/post/7602531501457899529</link>    <guid>https://juejin.cn/post/7602531501457899529</guid>    <pubDate>2026-02-04T08:17:47.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602531501457899529" data-draft-id="7602555027304005672" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸€æ¬¡ TimeZone é”ç«äº‰å¼•å‘çš„æ€§èƒ½ä¼˜åŒ–"/> <meta itemprop="keywords" content="åç«¯,Java,æ€§èƒ½ä¼˜åŒ–"/> <meta itemprop="datePublished" content="2026-02-04T08:17:47.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ¡¦è¯´ç¼–ç¨‹"/> <meta itemprop="url" content="https://juejin.cn/user/2212689394274136"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸€æ¬¡ TimeZone é”ç«äº‰å¼•å‘çš„æ€§èƒ½ä¼˜åŒ–
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2212689394274136/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ¡¦è¯´ç¼–ç¨‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T08:17:47.000Z" title="Wed Feb 04 2026 08:17:47 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    28
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">èƒŒæ™¯</h2>
<p>åœ¨é«˜å¹¶å‘æœåŠ¡çš„æ€§èƒ½æ’æŸ¥ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡çº¿ç¨‹ dump å‘ç°äº†å¤§é‡çº¿ç¨‹é˜»å¡åœ¨åŒä¸€æŠŠé”ä¸Šã€‚æœ¬æ–‡å°†è¯¦ç»†åˆ†æé—®é¢˜æ ¹å› ï¼Œå¹¶ä»‹ç»æˆ‘çš„ä¼˜åŒ–æ–¹æ¡ˆã€‚</p>
<h2 data-id="heading-1">é—®é¢˜å‘ç°</h2>
<p>åœ¨ç”Ÿäº§ç¯å¢ƒè¿›è¡Œ thread dump æ—¶ï¼Œå‘ç°å¤šä¸ªå·¥ä½œçº¿ç¨‹ï¼ˆ20+ï¼‰å¤„äº BLOCKED çŠ¶æ€ï¼Œç­‰å¾…åŒä¸€ä¸ª Class å¯¹è±¡é”ï¼š</p>
<pre><code class="hljs language-php" lang="php">at java.util.TimeZone.<span class="hljs-title function_ invoke__">getTimeZone</span>(TimeZone.<span class="hljs-attr">java</span>:<span class="hljs-number">549</span>)
    - waiting on java.lang.Class@<span class="hljs-number">37</span>b99a71

at org.joda.time.DateTimeZone.<span class="hljs-title function_ invoke__">toTimeZone</span>(DateTimeZone.<span class="hljs-attr">java</span>:<span class="hljs-number">1250</span>)
at org.joda.time.base.AbstractDateTime.<span class="hljs-title function_ invoke__">toGregorianCalendar</span>(AbstractDateTime.<span class="hljs-attr">java</span>:<span class="hljs-number">296</span>)
at xxx.common.DateTimeUtils.<span class="hljs-title function_ invoke__">toCalendar</span>(DateTimeUtils.<span class="hljs-attr">java</span>:<span class="hljs-number">469</span>)
at xxx.business.RefundEndorseBusiness.<span class="hljs-title function_ invoke__">doSetRefundEndorseFee</span>(...)
...
at java.util.concurrent.ThreadPoolExecutor<span class="hljs-variable">$Worker</span>.<span class="hljs-title function_ invoke__">run</span>(ThreadPoolExecutor.<span class="hljs-attr">java</span>:<span class="hljs-number">642</span>)
</code></pre>
<p>å…³é”®ä¿¡æ¯ï¼š</p>
<ul>
<li><strong>é˜»å¡ä½ç½®</strong>: <code>java.util.TimeZone.getTimeZone</code></li>
<li><strong>ç­‰å¾…å¯¹è±¡</strong>: <code>java.lang.Class@37b99a71</code>ï¼ˆç±»é”ï¼‰</li>
<li><strong>è°ƒç”¨æ¥æº</strong>: Joda-Time çš„ <code>DateTimeZone.toTimeZone()</code> æ–¹æ³•</li>
</ul>
<h2 data-id="heading-2">é—®é¢˜åˆ†æ</h2>
<h3 data-id="heading-3">JDK TimeZone.getTimeZone çš„é”æœºåˆ¶</h3>
<p><code>TimeZone.getTimeZone(String ID)</code> æ–¹æ³•å†…éƒ¨å®ç°ä½¿ç”¨äº† <code>synchronized</code> å…³é”®å­—ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">synchronized</span> TimeZone <span class="hljs-title function_">getTimeZone</span><span class="hljs-params">(String ID)</span> {
    <span class="hljs-comment">// ä»ç¼“å­˜æˆ–æ–‡ä»¶åŠ è½½æ—¶åŒºä¿¡æ¯</span>
    ...
}
</code></pre>
<p>è¿™æ„å‘³ç€<strong>æ‰€æœ‰è°ƒç”¨è¯¥æ–¹æ³•çš„çº¿ç¨‹éƒ½éœ€è¦ç«äº‰åŒä¸€æŠŠç±»é”</strong>ã€‚</p>
<h3 data-id="heading-4">Joda-Time çš„è°ƒç”¨é“¾</h3>
<p>åˆ†æ Joda-Time æºç ï¼Œ<code>DateTime.toGregorianCalendar()</code> çš„å®ç°å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// org.joda.time.base.AbstractDateTime</span>
<span class="hljs-keyword">public</span> GregorianCalendar <span class="hljs-title function_">toGregorianCalendar</span><span class="hljs-params">()</span> {
    <span class="hljs-type">DateTimeZone</span> <span class="hljs-variable">zone</span> <span class="hljs-operator">=</span> getZone();
    <span class="hljs-type">GregorianCalendar</span> <span class="hljs-variable">cal</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">GregorianCalendar</span>(zone.toTimeZone());
    cal.setTime(toDate());
    <span class="hljs-keyword">return</span> cal;
}
</code></pre>
<p>æ¯æ¬¡è°ƒç”¨éƒ½ä¼šæ‰§è¡Œ <code>zone.toTimeZone()</code>ï¼Œæœ€ç»ˆè§¦å‘ <code>TimeZone.getTimeZone()</code>ã€‚</p>
<h3 data-id="heading-5">é—®é¢˜æ ¹å› </h3>
<pre><code class="hljs language-scss" lang="scss">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      é«˜å¹¶å‘è¯·æ±‚                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Thread-<span class="hljs-number">1</span>    Thread-<span class="hljs-number">2</span>    Thread-<span class="hljs-number">3</span>    ...    Thread-N           â”‚
â”‚      â”‚           â”‚           â”‚                   â”‚              â”‚
â”‚      â–¼           â–¼           â–¼                   â–¼              â”‚
â”‚  <span class="hljs-built_in">toCalendar</span>()  <span class="hljs-built_in">toCalendar</span>()  <span class="hljs-built_in">toCalendar</span>()   <span class="hljs-built_in">toCalendar</span>()        â”‚
â”‚      â”‚           â”‚           â”‚                   â”‚              â”‚
â”‚      â–¼           â–¼           â–¼                   â–¼              â”‚
â”‚  <span class="hljs-built_in">toGregorianCalendar</span>() â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚
â”‚      â”‚           â”‚           â”‚                   â”‚              â”‚
â”‚      â–¼           â–¼           â–¼                   â–¼              â”‚
â”‚  <span class="hljs-built_in">toTimeZone</span>() â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚
â”‚      â”‚           â”‚           â”‚                   â”‚              â”‚
â”‚      â–¼           â–¼           â–¼                   â–¼              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚     TimeZone<span class="hljs-selector-class">.getTimeZone</span>() - synchronized ç±»é”           â”‚   â”‚
â”‚  â”‚                                                          â”‚   â”‚
â”‚  â”‚   Thread-<span class="hljs-number">1</span>: è·å–é”ï¼Œæ‰§è¡Œä¸­...                             â”‚   â”‚
â”‚  â”‚   Thread-<span class="hljs-number">2</span>: BLOCKED (waiting on java.lang.Class)        â”‚   â”‚
â”‚  â”‚   Thread-<span class="hljs-number">3</span>: BLOCKED (waiting on java.lang.Class)        â”‚   â”‚
â”‚  â”‚   ...                                                    â”‚   â”‚
â”‚  â”‚   Thread-N: BLOCKED (waiting on java.lang.Class)        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<p><strong>æ ¸å¿ƒé—®é¢˜</strong>ï¼š</p>
<ol>
<li>æ¯æ¬¡æ—¶é—´è½¬æ¢éƒ½è§¦å‘ <code>toTimeZone()</code> è°ƒç”¨</li>
<li><code>TimeZone.getTimeZone()</code> æ˜¯åŒæ­¥æ–¹æ³•ï¼ˆJDK 8ï¼‰</li>
<li>é«˜å¹¶å‘ä¸‹å¤§é‡çº¿ç¨‹ç«äº‰åŒä¸€æŠŠç±»é”</li>
<li>å®é™…ä¸šåŠ¡ä¸­æ—¶åŒºç§ç±»éå¸¸æœ‰é™ï¼ˆå¦‚ä»… <code>Asia/Shanghai</code>ã€<code>UTC</code> ç­‰ï¼‰</li>
</ol>
<h2 data-id="heading-6">åŸå§‹å®ç°</h2>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Calendar <span class="hljs-title function_">toCalendar</span><span class="hljs-params">(DateTime dateTime)</span> {
    Calendar result;
    <span class="hljs-keyword">if</span> (dateTime == <span class="hljs-literal">null</span> || DateTimeUtils.isLogicMin(dateTime)) {
        result = <span class="hljs-keyword">new</span> <span class="hljs-title class_">GregorianCalendar</span>(<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);
        result.setTimeZone(TimeZone.getTimeZone(<span class="hljs-string">"UTC"</span>));
        <span class="hljs-keyword">return</span> result;
    }
    <span class="hljs-keyword">if</span> (DateTimeUtils.isLogicMax(dateTime)) {
        result = <span class="hljs-keyword">new</span> <span class="hljs-title class_">GregorianCalendar</span>(<span class="hljs-number">9999</span>, Calendar.DECEMBER, <span class="hljs-number">31</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);
        result.setTimeZone(TimeZone.getTimeZone(<span class="hljs-string">"UTC"</span>));
        <span class="hljs-keyword">return</span> result;
    }
    <span class="hljs-comment">// é—®é¢˜æ‰€åœ¨ï¼šæ¯æ¬¡éƒ½è°ƒç”¨ toGregorianCalendar()</span>
    result = dateTime.toGregorianCalendar();
    <span class="hljs-keyword">return</span> result;
}
</code></pre>
<h2 data-id="heading-7">ä¼˜åŒ–æ–¹æ¡ˆ</h2>
<h3 data-id="heading-8">è®¾è®¡æ€è·¯</h3>
<p>ç”±äºåº•å±‚APIåœ¨é¡¹ç›®ä¸­é¢‘ç¹ä½¿ç”¨ï¼Œå…¨éƒ¨æ”¹åŠ¨é£é™©æ¯”è¾ƒå¤§ï¼Œæˆ‘ä¹Ÿä¸æƒ³å› ä¸ºå‡ºé”™è€ŒèƒŒé”…ï¼Œæ‰€ä»¥è€ƒè™‘æ¶ˆé™¤é”ç«äº‰çš„æ–¹æ¡ˆã€‚</p>
<p>æ—¢ç„¶æ—¶åŒºæ•°é‡æœ‰é™ï¼Œæˆ‘ä»¬å¯ä»¥<strong>ç¼“å­˜ <code>DateTimeZone</code> åˆ° <code>TimeZone</code> çš„æ˜ å°„</strong>ï¼Œé¿å…é‡å¤è°ƒç”¨ <code>toTimeZone()</code>ã€‚</p>
<h3 data-id="heading-9">æŠ€æœ¯é€‰å‹ï¼šä¸ºä»€ä¹ˆé€‰æ‹© Caffeine</h3>






























<table><thead><tr><th>æ–¹æ¡ˆ</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th></tr></thead><tbody><tr><td><code>HashMap</code> + <code>synchronized</code></td><td>å®ç°ç®€å•</td><td>é”ç²’åº¦ç²—ï¼Œä¸åŸé—®é¢˜ç±»ä¼¼</td></tr><tr><td><code>ConcurrentHashMap.computeIfAbsent</code></td><td>JDK åŸç”Ÿï¼Œæ— ä¾èµ–</td><td>é¦–æ¬¡åŠ è½½æ—¶ä»æœ‰é”ç«äº‰ï¼›é•¿ key å¯èƒ½ hash å†²çª</td></tr><tr><td><strong>Caffeine</strong></td><td>é«˜æ€§èƒ½ã€è‡ªåŠ¨é©±é€ã€ç»Ÿè®¡ç›‘æ§</td><td>å¼•å…¥é¢å¤–ä¾èµ–</td></tr><tr><td>Guava Cache</td><td>åŠŸèƒ½å®Œå–„</td><td>æ€§èƒ½ç•¥é€Šäº Caffeine</td></tr></tbody></table>
<p>é€‰æ‹© <strong>Caffeine</strong> çš„åŸå› ï¼š</p>
<ol>
<li><strong>é«˜æ€§èƒ½</strong>: åŸºäº W-TinyLFU ç®—æ³•ï¼Œè¿‘ä¹ O(1) çš„è¯»å†™æ€§èƒ½</li>
<li><strong>æ— é”è¯»å–</strong>: è¯»æ“ä½œå‡ ä¹æ— é”ç«äº‰</li>
<li><strong>è‡ªåŠ¨ç®¡ç†</strong>: æ”¯æŒå®¹é‡é™åˆ¶å’Œè‡ªåŠ¨é©±é€</li>
<li><strong>é¡¹ç›®å·²æœ‰ä¾èµ–</strong>: æ— éœ€å¼•å…¥æ–°çš„ jar åŒ…</li>
</ol>
<h3 data-id="heading-10">ä¼˜åŒ–åçš„å®ç°</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * ç¼“å­˜å¼€å…³ï¼Œé©±é€æ—¶é™çº§ä¸ºç›´æ¥è°ƒç”¨
 */</span>
<span class="hljs-keyword">static</span> <span class="hljs-keyword">volatile</span> <span class="hljs-type">boolean</span> <span class="hljs-variable">zoneCacheEnable</span> <span class="hljs-operator">=</span> <span class="hljs-literal">true</span>;

<span class="hljs-comment">/**
 * DateTimeZone -&gt; TimeZone ç¼“å­˜
 * ç”Ÿäº§ç¯å¢ƒæ—¶åŒºç§ç±»æœ‰é™ï¼ˆé€šå¸¸ &lt; 5 ç§ï¼‰ï¼Œè®¾ç½® maximumSize = 24 è¶³å¤Ÿ
 */</span>
<span class="hljs-keyword">static</span> LoadingCache&lt;DateTimeZone, TimeZone&gt; zoneCache = Caffeine.newBuilder()
        .maximumSize(<span class="hljs-number">24</span>)
        .evictionListener((k, v, c) -&gt; {
            <span class="hljs-comment">// æ­£å¸¸æƒ…å†µä¸åº”è¯¥è§¦å‘é©±é€ï¼Œå¦‚æœè§¦å‘è¯´æ˜æ—¶åŒºç§ç±»å¼‚å¸¸å¤š</span>
            LOGGER.error(<span class="hljs-string">"zone cache evicted k={}, v={}, cause={}"</span>, k, v, c);
            zoneCacheEnable = <span class="hljs-literal">false</span>;
        })
        .build(DateTimeZone::toTimeZone);

<span class="hljs-comment">/**
 * ä»ç¼“å­˜è·å– TimeZoneï¼Œå¸¦ fallback
 */</span>
<span class="hljs-keyword">static</span> TimeZone <span class="hljs-title function_">getTimeZoneFromCache</span><span class="hljs-params">(DateTimeZone zone)</span> {
    <span class="hljs-keyword">return</span> zoneCacheEnable ? zoneCache.get(zone) : zone.toTimeZone();
}

<span class="hljs-comment">/**
 * ä¼˜åŒ–åçš„ toCalendar æ–¹æ³•
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Calendar <span class="hljs-title function_">toCalendar</span><span class="hljs-params">(DateTime dateTime)</span> {
    Calendar result;
    <span class="hljs-keyword">if</span> (dateTime == <span class="hljs-literal">null</span> || DateTimeUtils.isLogicMin(dateTime)) {
        result = <span class="hljs-keyword">new</span> <span class="hljs-title class_">GregorianCalendar</span>(<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);
        result.setTimeZone(TimeZone.getTimeZone(<span class="hljs-string">"UTC"</span>));
        <span class="hljs-keyword">return</span> result;
    }
    <span class="hljs-keyword">if</span> (DateTimeUtils.isLogicMax(dateTime)) {
        result = <span class="hljs-keyword">new</span> <span class="hljs-title class_">GregorianCalendar</span>(<span class="hljs-number">9999</span>, Calendar.DECEMBER, <span class="hljs-number">31</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);
        result.setTimeZone(TimeZone.getTimeZone(<span class="hljs-string">"UTC"</span>));
        <span class="hljs-keyword">return</span> result;
    }

    <span class="hljs-comment">// ä¼˜åŒ–ï¼šä»ç¼“å­˜è·å– TimeZoneï¼Œé¿å…é”ç«äº‰</span>
    <span class="hljs-type">DateTimeZone</span> <span class="hljs-variable">zone</span> <span class="hljs-operator">=</span> dateTime.getZone();
    <span class="hljs-type">TimeZone</span> <span class="hljs-variable">timeZone</span> <span class="hljs-operator">=</span> getTimeZoneFromCache(zone);
    <span class="hljs-type">GregorianCalendar</span> <span class="hljs-variable">cal</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">GregorianCalendar</span>(timeZone);
    cal.setTime(dateTime.toDate());
    <span class="hljs-keyword">return</span> cal;
}
</code></pre>
<h3 data-id="heading-11">ä¼˜åŒ–å‰åå¯¹æ¯”</h3>
<pre><code class="hljs language-scss" lang="scss">ä¼˜åŒ–å‰ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  N ä¸ªçº¿ç¨‹åŒæ—¶è°ƒç”¨ <span class="hljs-built_in">toCalendar</span>()                           â”‚
â”‚           â”‚                                             â”‚
â”‚           â–¼                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  TimeZone<span class="hljs-selector-class">.getTimeZone</span>() - synchronized ç±»é”     â”‚    â”‚
â”‚  â”‚  æ‰€æœ‰çº¿ç¨‹ä¸²è¡Œç­‰å¾…                                 â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ä¼˜åŒ–åï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  N ä¸ªçº¿ç¨‹åŒæ—¶è°ƒç”¨ <span class="hljs-built_in">toCalendar</span>()                           â”‚
â”‚           â”‚                                             â”‚
â”‚           â–¼                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  Caffeine Cache - æ— é”è¯»å–                       â”‚    â”‚
â”‚  â”‚  æ‰€æœ‰çº¿ç¨‹å¹¶è¡Œè·å–ç¼“å­˜çš„ TimeZone                   â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h2 data-id="heading-12">å…³é”®è®¾è®¡å†³ç­–</h2>
<h3 data-id="heading-13">1. ä¸ºä»€ä¹ˆè®¾ç½® maximumSize = 24</h3>
<ul>
<li>å›½å†…ä¸šåŠ¡ä¸»è¦æ¶‰åŠ <code>Asia/Shanghai</code>ã€<code>UTC</code>ã€<code>Asia/Hong_Kong</code> ç­‰å°‘æ•°å‡ ä¸ªæ—¶åŒº</li>
<li>å¦‚æœè¶…è¿‡ 24 ä¸ªä¸åŒæ—¶åŒºï¼Œè¯´æ˜æ•°æ®å¼‚å¸¸ï¼Œè§¦å‘å‘Šè­¦</li>
</ul>
<h3 data-id="heading-14">2. evictionListener çš„ä½œç”¨</h3>
<pre><code class="hljs language-java" lang="java">.evictionListener((k, v, c) -&gt; {
    LOGGER.error(<span class="hljs-string">"zone cache evicted k={}, v={}, cause={}"</span>, k, v, c);
    zoneCacheEnable = <span class="hljs-literal">false</span>;
})
</code></pre>
<ul>
<li>æ­£å¸¸æƒ…å†µä¸‹ä¸åº”è¯¥è§¦å‘é©±é€ï¼ˆæ—¶åŒºæ•°é‡ &lt; 8ï¼‰</li>
<li>å¦‚æœè§¦å‘ï¼Œè¯´æ˜ï¼š
<ul>
<li>å­˜åœ¨å¼‚å¸¸æ•°æ®å¯¼è‡´æ—¶åŒºç§ç±»è¿‡å¤š</li>
<li>æˆ–è€…ç¼“å­˜é…ç½®éœ€è¦è°ƒæ•´</li>
</ul>
</li>
<li>è®°å½•é”™è¯¯æ—¥å¿—ä¾¿äºæ’æŸ¥</li>
<li>ç¦ç”¨ç¼“å­˜ä½œä¸º fallbackï¼Œé¿å…é¢‘ç¹é©±é€å¸¦æ¥çš„æ€§èƒ½æŸè€—</li>
</ul>
<h3 data-id="heading-15">3. volatile å…³é”®å­—çš„ä½¿ç”¨</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">static</span> <span class="hljs-keyword">volatile</span> <span class="hljs-type">boolean</span> <span class="hljs-variable">zoneCacheEnable</span> <span class="hljs-operator">=</span> <span class="hljs-literal">true</span>;
</code></pre>
<ul>
<li>ä¿è¯å¤šçº¿ç¨‹é—´çš„å¯è§æ€§</li>
<li>å…è®¸åœ¨å‘ç°å¼‚å¸¸æ—¶å¿«é€Ÿé™çº§</li>
</ul>
<h2 data-id="heading-16">æ€»ç»“</h2>
<p>é€šè¿‡å¼•å…¥ Caffeine ç¼“å­˜ï¼Œæˆ‘ä»¬æˆåŠŸæ¶ˆé™¤äº† <code>TimeZone.getTimeZone()</code> çš„é”ç«äº‰é—®é¢˜ã€‚è¿™ä¸ªä¼˜åŒ–çš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼š<strong>å¯¹äºæ•°é‡æœ‰é™ã€åˆ›å»ºæˆæœ¬é«˜çš„å¯¹è±¡ï¼Œä½¿ç”¨ç¼“å­˜æ¥æ¢å–å¹¶å‘æ€§èƒ½</strong>ã€‚</p>
<p>ä¸è¦ä½¿ç”¨è¿‡æ—¶çš„APIã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å½»åº•ææ‡‚å¤§æ–‡ä»¶ä¸Šä¼ ï¼šä»å¹¼å„¿å›­åˆ°åšå£«é˜¶æ®µçš„å…¨æ ˆæ–¹æ¡ˆ]]></title>    <link>https://juejin.cn/post/7602982045137780782</link>    <guid>https://juejin.cn/post/7602982045137780782</guid>    <pubDate>2026-02-05T07:58:10.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602982045137780782" data-draft-id="7602935146707058734" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å½»åº•ææ‡‚å¤§æ–‡ä»¶ä¸Šä¼ ï¼šä»å¹¼å„¿å›­åˆ°åšå£«é˜¶æ®µçš„å…¨æ ˆæ–¹æ¡ˆ"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯,é¢è¯•"/> <meta itemprop="datePublished" content="2026-02-05T07:58:10.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è±†è‹—å­¦å‰ç«¯"/> <meta itemprop="url" content="https://juejin.cn/user/1935598759719400"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å½»åº•ææ‡‚å¤§æ–‡ä»¶ä¸Šä¼ ï¼šä»å¹¼å„¿å›­åˆ°åšå£«é˜¶æ®µçš„å…¨æ ˆæ–¹æ¡ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1935598759719400/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è±†è‹—å­¦å‰ç«¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-05T07:58:10.000Z" title="Thu Feb 05 2026 07:58:10 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-05
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»23åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ç¬¬ä¸€å±‚ï¼šå¹¼å„¿å›­é˜¶æ®µ â€”â€” ä¸ºä»€ä¹ˆè¦æå¤æ‚ä¸Šä¼ ï¼Ÿ</h2>
<p>æƒ³è±¡ä¸€ä¸‹ï¼šä½ è¦æŠŠå®¶é‡Œçš„**ä¸€ä¸‡æœ¬ä¹¦ï¼ˆ10GB æ–‡ä»¶ï¼‰**æ¬åˆ°æ–°å®¶ã€‚</p>
<p><strong>æ™®é€šæ–¹æ¡ˆï¼ˆç®€å•ä¸Šä¼ ï¼‰</strong>ï¼šä½ è¯•å›¾ä¸€æ¬¡æ€§æŠŠä¸€ä¸‡æœ¬ä¹¦å¡è¿›ä¸€ä¸ªå°ä¸‰è½®è½¦ã€‚ç»“æœï¼šè½¦çˆ†èƒäº†ï¼ˆæµè§ˆå™¨å†…å­˜æº¢å‡ºï¼‰ï¼Œæˆ–è€…è·¯ä¸Šå µè½¦å¤ªä¹…ï¼Œæ–°å®¶ç®¡ç†å‘˜ç­‰å¾—ä¸è€çƒ¦æŠŠé—¨å…³äº†ï¼ˆè¯·æ±‚è¶…æ—¶ï¼‰ã€‚</p>
<p><strong>å…¨æ ˆæ–¹æ¡ˆï¼ˆåˆ†ç‰‡ä¸Šä¼ ï¼‰</strong>ï¼šä½ æŠŠä¹¦è£…æˆ 100 ä¸ªå°ç®±å­ï¼Œä¸€ç®±ä¸€ç®±è¿ã€‚å³ä¾¿è·¯ä¸Šæœ‰ä¸€ç®±ä¸¢äº†ï¼Œä½ åªéœ€è¦è¡¥å‘é‚£ä¸€ç®±ï¼Œè€Œä¸æ˜¯é‡æ–°æ¬ä¸€ä¸‡æœ¬ä¹¦ã€‚</p>
<p><strong>ä¸ºä»€ä¹ˆè¿™æ ·åšï¼Ÿ</strong></p>
<ul>
<li>é™ä½å•æ¬¡ä¼ è¾“çš„æ•°æ®é‡ï¼Œé¿å…å†…å­˜æº¢å‡º</li>
<li>å‡å°‘å•ä¸ªè¯·æ±‚çš„å¤„ç†æ—¶é—´ï¼Œé™ä½è¶…æ—¶é£é™©</li>
<li>æ”¯æŒæ–­ç‚¹ç»­ä¼ ï¼Œæé«˜ä¸Šä¼ æˆåŠŸç‡</li>
</ul>
<h2 data-id="heading-1">ç¬¬äºŒå±‚ï¼šå°å­¦é˜¶æ®µ â€”â€” ç®€å•ä¸Šä¼ çš„æé™</h2>
<p>å¯¹äºå°äº 10MB çš„å›¾ç‰‡æˆ–æ–‡æ¡£ï¼Œæˆ‘ä»¬ç”¨ FormDataã€‚</p>
<p><strong>å‰ç«¯ (Vue)</strong>ï¼šinput type="file" è·å–æ–‡ä»¶ï¼Œå°å…¥ FormDataï¼Œé€šè¿‡ axios å‘é€ã€‚</p>
<p><strong>åç«¯ (Node)</strong>ï¼šä½¿ç”¨ multer æˆ– formidable ä¸­é—´ä»¶æ¥æ”¶ã€‚</p>
<p><strong>æ•°æ®åº“ (MySQL)</strong>ï¼šåˆ‡è®°ï¼ æ•°æ®åº“ä¸å­˜æ–‡ä»¶äºŒè¿›åˆ¶æµï¼Œåªå­˜æ–‡ä»¶çš„è®¿é—®è·¯å¾„ï¼ˆURLï¼‰ã€æ–‡ä»¶åã€å¤§å°å’Œä¸Šä¼ æ—¶é—´ã€‚</p>
<p><strong>ä¸ºä»€ä¹ˆæ•°æ®åº“ä¸å­˜æ–‡ä»¶ï¼Ÿ</strong></p>
<ul>
<li>æ–‡ä»¶ä½“ç§¯å¤ªå¤§ï¼Œå½±å“æ•°æ®åº“æ€§èƒ½</li>
<li>æ•°æ®åº“å¤‡ä»½å’Œè¿ç§»å˜å¾—å›°éš¾</li>
<li>ç£ç›˜ç©ºé—´æµªè´¹ï¼Œéš¾ä»¥æ¸…ç†</li>
</ul>
<p><strong>ç®€å•ä¸Šä¼ çš„ä»£ç ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å‰ç«¯</span>
<span class="hljs-keyword">const</span> formData = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FormData</span>();
formData.<span class="hljs-title function_">append</span>(<span class="hljs-string">'file'</span>, fileInput.<span class="hljs-property">files</span>[<span class="hljs-number">0</span>]);
axios.<span class="hljs-title function_">post</span>(<span class="hljs-string">'/upload'</span>, formData);

<span class="hljs-comment">// åç«¯</span>
<span class="hljs-keyword">const</span> upload = <span class="hljs-title function_">multer</span>({ <span class="hljs-attr">dest</span>: <span class="hljs-string">'uploads/'</span> });
app.<span class="hljs-title function_">post</span>(<span class="hljs-string">'/upload'</span>, upload.<span class="hljs-title function_">single</span>(<span class="hljs-string">'file'</span>), <span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> {
  <span class="hljs-comment">// å¤„ç†ä¸Šä¼ </span>
});
</code></pre>
<h2 data-id="heading-2">ç¬¬ä¸‰å±‚ï¼šä¸­å­¦é˜¶æ®µ â€”â€” åˆ†ç‰‡ä¸Šä¼  (Chunking) çš„é€»è¾‘å…¬å¼</h2>
<p>è¿™æ˜¯é¢è¯•çš„æ ¸å¿ƒèµ·ç‚¹ã€‚è¯·èƒŒè¯µæµç¨‹ï¼š</p>
<p><strong>åˆ‡ç‰‡</strong>ï¼šåˆ©ç”¨ File å¯¹è±¡çš„ slice æ–¹æ³•ï¼ˆåº•å±‚æ˜¯ Blobï¼‰ï¼Œå°†å¤§æ–‡ä»¶åˆ‡æˆ N ä»½ã€‚
<strong>æ ‡è¯†</strong>ï¼šç»™æ¯ä¸ªç‰‡èµ·ä¸ªåå­—ï¼Œé€šå¸¸æ˜¯ æ–‡ä»¶å + ä¸‹æ ‡ã€‚
<strong>å¹¶å‘å‘é€</strong>ï¼šåŒæ—¶å‘é€å¤šä¸ª HTTP è¯·æ±‚ã€‚
<strong>åˆå¹¶</strong>ï¼šå‰ç«¯å‘ä¸ª"æŒ‡ä»¤"ï¼Œåç«¯æŠŠæ‰€æœ‰ç¢ç‰‡æŒ‰é¡ºåºåˆæˆä¸€ä¸ªå®Œæ•´æ–‡ä»¶ã€‚</p>
<p><strong>ä¸ºä»€ä¹ˆè¦ç”¨sliceæ–¹æ³•ï¼Ÿ</strong></p>
<ul>
<li>å®ƒä¸ä¼šå¤åˆ¶æ•´ä¸ªæ–‡ä»¶åˆ°å†…å­˜ï¼Œè€Œæ˜¯åˆ›å»ºä¸€ä¸ªæŒ‡å‘åŸæ–‡ä»¶éƒ¨åˆ†çš„å¼•ç”¨</li>
<li>å†…å­˜å ç”¨æå°ï¼Œé€‚åˆå¤„ç†å¤§æ–‡ä»¶</li>
<li>å¯ä»¥ç²¾ç¡®æ§åˆ¶æ¯ä¸ªåˆ†ç‰‡çš„å¤§å°</li>
</ul>
<p><strong>åˆ†ç‰‡ä¸Šä¼ çš„å®ç°é€»è¾‘</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åˆ†ç‰‡å‡½æ•°</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">createFileChunks</span>(<span class="hljs-params">file, chunkSize = <span class="hljs-number">1024</span> * <span class="hljs-number">1024</span> * <span class="hljs-number">2</span></span>) { <span class="hljs-comment">// 2MB per chunk</span>
  <span class="hljs-keyword">const</span> chunks = [];
  <span class="hljs-keyword">let</span> start = <span class="hljs-number">0</span>;
  
  <span class="hljs-keyword">while</span> (start &lt; file.<span class="hljs-property">size</span>) {
    <span class="hljs-keyword">const</span> end = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(start + chunkSize, file.<span class="hljs-property">size</span>);
    <span class="hljs-keyword">const</span> chunk = file.<span class="hljs-title function_">slice</span>(start, end); <span class="hljs-comment">// æ ¸å¿ƒAPI</span>
    chunks.<span class="hljs-title function_">push</span>({
      <span class="hljs-attr">blob</span>: chunk,
      <span class="hljs-attr">index</span>: chunks.<span class="hljs-property">length</span>,
      start,
      end
    });
    start = end;
  }
  
  <span class="hljs-keyword">return</span> chunks;
}
</code></pre>
<h2 data-id="heading-3">ç¬¬å››å±‚ï¼šå¤§å­¦é˜¶æ®µ â€”â€” ç§’ä¼ ä¸å”¯ä¸€æ ‡è¯† (MD5)</h2>
<p>é¢è¯•å®˜é—®ï¼š"å¦‚æœç”¨æˆ·ä¸Šä¼ ä¸€ä¸ªæœåŠ¡å™¨å·²ç»æœ‰çš„æ–‡ä»¶ï¼Œæ€ä¹ˆå®ç°ç§’ä¼ ï¼Ÿ"</p>
<p><strong>æ ¸å¿ƒ</strong>ï¼šæ–‡ä»¶çš„"èº«ä»½è¯"ã€‚ä¸èƒ½ç”¨æ–‡ä»¶åï¼Œè¦ç”¨æ–‡ä»¶çš„å†…å®¹ç”Ÿæˆ MD5 å“ˆå¸Œå€¼ã€‚</p>
<p><strong>æµç¨‹</strong>ï¼š</p>
<ol>
<li>å‰ç«¯ç”¨ spark-md5 è®¡ç®—æ–‡ä»¶å“ˆå¸Œã€‚</li>
<li>ä¸Šä¼ å‰å…ˆé—®åç«¯ï¼š"è¿™ä¸ª MD5 å¯¹åº”çš„æ–‡ä»¶ä½ æœ‰æ²¡æœ‰ï¼Ÿ"</li>
<li>åç«¯æŸ¥ MySQLï¼Œå¦‚æœæœ‰ï¼Œç›´æ¥è¿”å›æˆåŠŸâ€”â€”è¿™å°±æ˜¯ç§’ä¼ ã€‚</li>
</ol>
<p><strong>ä¸ºä»€ä¹ˆç”¨MD5è€Œä¸æ˜¯æ–‡ä»¶åï¼Ÿ</strong></p>
<ul>
<li>æ–‡ä»¶åå¯ä»¥é‡å¤ï¼Œä½†å†…å®¹ä¸åŒçš„æ–‡ä»¶</li>
<li>æ–‡ä»¶åå¯ä»¥è¢«ä¿®æ”¹ï¼Œä½†å†…å®¹ä¸å˜</li>
<li>MD5æ˜¯å†…å®¹çš„æ•°å­—æŒ‡çº¹ï¼Œç›¸åŒå†…å®¹å¿…å®šæœ‰ç›¸åŒçš„MD5</li>
</ul>
<p><strong>MD5è®¡ç®—ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">SparkMD5</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'spark-md5'</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">calculateFileHash</span>(<span class="hljs-params">file</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> fileReader = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileReader</span>();
    <span class="hljs-keyword">const</span> spark = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SparkMD5</span>.<span class="hljs-title class_">ArrayBuffer</span>();
    <span class="hljs-keyword">let</span> chunkIndex = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">const</span> chunkSize = <span class="hljs-number">2097152</span>; <span class="hljs-comment">// 2MB</span>
    
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">loadNext</span> = (<span class="hljs-params"/>) =&gt; {
      <span class="hljs-keyword">const</span> start = chunkIndex * chunkSize;
      <span class="hljs-keyword">const</span> end = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(start + chunkSize, file.<span class="hljs-property">size</span>);
      
      fileReader.<span class="hljs-title function_">readAsArrayBuffer</span>(file.<span class="hljs-title function_">slice</span>(start, end));
    };
    
    fileReader.<span class="hljs-property">onload</span> = <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
      spark.<span class="hljs-title function_">append</span>(e.<span class="hljs-property">target</span>.<span class="hljs-property">result</span>);
      chunkIndex++;
      
      <span class="hljs-keyword">if</span> (chunkIndex * chunkSize &lt; file.<span class="hljs-property">size</span>) {
        <span class="hljs-title function_">loadNext</span>(); <span class="hljs-comment">// ç»§ç»­è¯»å–ä¸‹ä¸€ä¸ªåˆ†ç‰‡</span>
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-title function_">resolve</span>(spark.<span class="hljs-title function_">end</span>()); <span class="hljs-comment">// è¿”å›æœ€ç»ˆå“ˆå¸Œå€¼</span>
      }
    };
    
    <span class="hljs-title function_">loadNext</span>();
  });
}
</code></pre>
<h2 data-id="heading-4">ç¬¬äº”å±‚ï¼šåšå£«é˜¶æ®µ â€”â€” æ–­ç‚¹ç»­ä¼  (Resumable)</h2>
<p>å¦‚æœä¼ åˆ°ä¸€åŠæ–­ç½‘äº†ï¼Œå‰©ä¸‹çš„æ€ä¹ˆåŠï¼Ÿ</p>
<p><strong>æ–¹æ¡ˆ A</strong>ï¼šå‰ç«¯è®°å½•ï¼ˆä¸å¯é ï¼‰
<strong>æ–¹æ¡ˆ Bï¼ˆæ¨èï¼‰</strong>ï¼šåç«¯ MySQL è®°å½•å·²æ”¶åˆ°çš„åˆ†ç‰‡åºå·ã€‚</p>
<p><strong>æµç¨‹</strong>ï¼š</p>
<ol>
<li>é‡æ–°ä¸Šä¼ å‰ï¼Œè°ƒç”¨ checkChunks æ¥å£</li>
<li>åç«¯æŸ¥åº“è¿”å›ï¼š{ uploadedList: [1, 2, 5] }</li>
<li>å‰ç«¯è¿‡æ»¤æ‰å·²å­˜åœ¨çš„åºå·ï¼Œåªå‘å‰©ä¸‹çš„</li>
</ol>
<p><strong>ä¸ºä»€ä¹ˆé€‰æ‹©åç«¯è®°å½•ï¼Ÿ</strong></p>
<ul>
<li>å‰ç«¯å­˜å‚¨ä¸å¯é ï¼ˆlocalStorageå¯èƒ½è¢«æ¸…é™¤ï¼‰</li>
<li>æ”¯æŒè·¨è®¾å¤‡ç»­ä¼ ï¼ˆä»æ‰‹æœºä¸Šä¼ ä¸€åŠï¼Œä»ç”µè„‘ç»§ç»­ï¼‰</li>
<li>æ•°æ®ä¸€è‡´æ€§æ›´å¥½ï¼Œä¸å®¹æ˜“å‡ºç°è„æ•°æ®</li>
</ul>
<p><strong>æ–­ç‚¹ç»­ä¼ å®ç°</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ£€æŸ¥å·²ä¸Šä¼ åˆ†ç‰‡</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">checkUploadedChunks</span>(<span class="hljs-params">fileHash</span>) {
  <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> api.<span class="hljs-title function_">checkChunks</span>({ fileHash });
  <span class="hljs-keyword">return</span> response.<span class="hljs-property">uploadedList</span> || []; <span class="hljs-comment">// å·²ä¸Šä¼ çš„åˆ†ç‰‡ç´¢å¼•æ•°ç»„</span>
}

<span class="hljs-comment">// è¿‡æ»¤æœªä¸Šä¼ çš„åˆ†ç‰‡</span>
<span class="hljs-keyword">const</span> uploadedList = <span class="hljs-keyword">await</span> <span class="hljs-title function_">checkUploadedChunks</span>(fileHash);
<span class="hljs-keyword">const</span> needUploadChunks = allChunks.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">chunk</span> =&gt;</span> 
  !uploadedList.<span class="hljs-title function_">includes</span>(chunk.<span class="hljs-property">index</span>)
);
</code></pre>
<h2 data-id="heading-5">ç¬¬å…­å±‚ï¼šæ€§èƒ½å·…å³° â€”â€” åªæœ‰ 1% çš„äººçŸ¥é“çš„ Worker è®¡ç®—</h2>
<p>æµè§ˆå™¨æ˜¯"å•çº¿ç¨‹"çš„ï¼ŒJavaScript å¼•æ“å’Œé¡µé¢æ¸²æŸ“ï¼ˆDOM æ ‘æ„å»ºã€å¸ƒå±€ã€ç»˜åˆ¶ï¼‰å…±ç”¨ä¸€ä¸ªçº¿ç¨‹ï¼Œå¦‚æœä½ åœ¨ä¸»çº¿ç¨‹æ‰§è¡Œä¸€ä¸ªè€—æ—¶ 10 ç§’çš„å¾ªç¯ï¼ˆæ¯”å¦‚è®¡ç®—å¤§æ–‡ä»¶çš„ MD5ï¼‰ï¼Œæµè§ˆå™¨ä¼šç›´æ¥å¡æ­»ã€‚ç”¨æˆ·ç‚¹ä¸åŠ¨æŒ‰é’®ã€åŠ¨ç”»åœæ­¢ã€ç”šè‡³æµè§ˆå™¨å¼¹å‡º"é¡µé¢æ— å“åº”"ã€‚</p>
<p>å±å¹•åˆ·æ–°ç‡é€šå¸¸æ˜¯ 60Hzï¼Œæ„å‘³ç€æµè§ˆå™¨æ¯ 16.7ms å°±è¦æ¸²æŸ“ä¸€å¸§ã€‚å¦‚æœä½ çš„è®¡ç®—ä»»åŠ¡å æ®äº†è¿™ 16.7msï¼Œé¡µé¢å°±ä¼šæ‰å¸§ã€å¡é¡¿ã€‚</p>
<h3 data-id="heading-6">äºŒã€ ä»€ä¹ˆæ˜¯ Web Workerï¼Ÿï¼ˆå®šä¹‰ï¼‰</h3>
<p>Web Worker æ˜¯ HTML5 æ ‡å‡†å¼•å…¥çš„ä¸€é¡¹æŠ€æœ¯ï¼Œå®ƒå…è®¸ JavaScript è„šæœ¬åœ¨åå°çº¿ç¨‹ä¸­è¿è¡Œï¼Œä¸å ç”¨ä¸»çº¿ç¨‹ã€‚</p>
<p>å®ƒçš„åœ°ä½ï¼š å®ƒæ˜¯ä¸»çº¿ç¨‹çš„"æ‰“å·¥ä»”"ã€‚</p>
<p>å®ƒçš„ç¯å¢ƒï¼š å®ƒè¿è¡Œåœ¨å¦ä¸€ä¸ªå®Œå…¨ç‹¬ç«‹çš„ç¯å¢ƒä¸­ï¼Œæ‹¥æœ‰è‡ªå·±çš„å…¨å±€å¯¹è±¡ï¼ˆself è€Œä¸æ˜¯ windowï¼‰ã€‚</p>
<h3 data-id="heading-7">ä¸‰ã€ Web Worker èƒ½å¹²ä»€ä¹ˆï¼Ÿï¼ˆèŒè´£ä¸å±€é™ï¼‰</h3>
<p><strong>èƒ½å¹²ä»€ä¹ˆï¼š</strong></p>
<p>CPU å¯†é›†å‹è®¡ç®—ï¼š MD5 è®¡ç®—ã€åŠ å¯†è§£å¯†ã€å›¾åƒ/è§†é¢‘å¤„ç†ã€å¤§æ•°æ®æ’åºã€‚</p>
<p>ç½‘ç»œè¯·æ±‚ï¼š å¯ä»¥åœ¨åå°è½®è¯¢æ¥å£ã€‚</p>
<p><strong>ä¸èƒ½å¹²ä»€ä¹ˆï¼ˆé¢è¯•å¿…è€ƒç‚¹ï¼‰ï¼š</strong></p>
<p>ä¸èƒ½æ“ä½œ DOMï¼š å®ƒæ‹¿ä¸åˆ° windowã€documentã€parent å¯¹è±¡ã€‚</p>
<p>ä¸èƒ½å¼¹çª—ï¼š æ— æ³•ä½¿ç”¨ alert()ã€‚</p>
<p>å—é™é€šä¿¡ï¼š å®ƒå’Œä¸»çº¿ç¨‹ä¹‹é—´åªèƒ½é€šè¿‡ "æ¶ˆæ¯ä¼ é€’"ï¼ˆPostMessageï¼‰æ²Ÿé€šã€‚</p>
<h3 data-id="heading-8">å››ã€ æ€ä¹ˆå¹²ï¼Ÿï¼ˆæ ¸å¿ƒ API å®æˆ˜ï¼‰</h3>
<p>æˆ‘ä»¬è¦å®ç°çš„ç›®æ ‡æ˜¯ï¼šåœ¨ä¸å¡é¡¿é¡µé¢çš„æƒ…å†µä¸‹ï¼Œè®¡ç®—ä¸€ä¸ª 1GB æ–‡ä»¶çš„ MD5ã€‚</p>
<p><strong>æ­¥éª¤ 1ï¼šä¸»çº¿ç¨‹é€»è¾‘ï¼ˆVue/JS ç¯å¢ƒï¼‰</strong></p>
<p>ä¸»çº¿ç¨‹è´Ÿè´£é›‡ä½£ Workerï¼Œå¹¶ç»™å®ƒæ´¾æ´»ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// 1. åˆ›å»º Worker å®ä¾‹ (è·¯å¾„æŒ‡å‘ worker è„šæœ¬)</span>
<span class="hljs-keyword">const</span> myWorker = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Worker</span>(<span class="hljs-string">'hash-worker.js'</span>);

<span class="hljs-comment">// 2. å‘é€ä»»åŠ¡ (æŠŠæ–‡ä»¶å¯¹è±¡ä¼ ç»™ Worker)</span>
myWorker.<span class="hljs-title function_">postMessage</span>({ <span class="hljs-attr">file</span>: fileObject });

<span class="hljs-comment">// 3. æ¥æ”¶ç»“æœ (ç›‘å¬ Worker å›ä¼ çš„æ¶ˆæ¯)</span>
myWorker.<span class="hljs-property">onmessage</span> = <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> { hash, percentage } = e.<span class="hljs-property">data</span>;
    <span class="hljs-keyword">if</span> (hash) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"è®¡ç®—å®Œæˆï¼MD5 ä¸º:"</span>, hash);
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"å½“å‰è¿›åº¦:"</span>, percentage);
    }
};

<span class="hljs-comment">// 4. å¼‚å¸¸å¤„ç†</span>
myWorker.<span class="hljs-property">onerror</span> = <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"Worker æŠ¥é”™äº†:"</span>, err);
};
</code></pre>
<p><strong>æ­¥éª¤ 2ï¼šWorker çº¿ç¨‹é€»è¾‘ï¼ˆhash-worker.jsï¼‰</strong></p>
<p>Worker è´Ÿè´£åŸ‹å¤´è‹¦å¹²ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å¼•å…¥è®¡ç®— MD5 çš„åº“ (Worker å†…éƒ¨å¼•ç”¨è„šæœ¬çš„æ–¹å¼)</span>
importScripts(<span class="hljs-string">'spark-md5.min.js'</span>);

self.<span class="hljs-property">onmessage</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) {
    <span class="hljs-keyword">const</span> { file } = e.<span class="hljs-property">data</span>;
    <span class="hljs-keyword">const</span> spark = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SparkMD5</span>.<span class="hljs-title class_">ArrayBuffer</span>(); <span class="hljs-comment">// å¢é‡è®¡ç®—å®ä¾‹</span>
    <span class="hljs-keyword">const</span> reader = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileReader</span>();
    <span class="hljs-keyword">const</span> chunkSize = <span class="hljs-number">2</span> * <span class="hljs-number">1024</span> * <span class="hljs-number">1024</span>; <span class="hljs-comment">// æ¯æ¬¡è¯» 2MB</span>
    <span class="hljs-keyword">let</span> currentChunk = <span class="hljs-number">0</span>;

    <span class="hljs-comment">// åˆ†å—è¯»å–çš„æ ¸å¿ƒé€»è¾‘</span>
    reader.<span class="hljs-property">onload</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) {
        spark.<span class="hljs-title function_">append</span>(event.<span class="hljs-property">target</span>.<span class="hljs-property">result</span>); <span class="hljs-comment">// å°† 2MB æ•°æ®å–‚ç»™ spark</span>
        currentChunk++;

        <span class="hljs-keyword">if</span> (currentChunk &lt; <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">ceil</span>(file.<span class="hljs-property">size</span> / chunkSize)) {
            <span class="hljs-title function_">loadNext</span>(); <span class="hljs-comment">// ç»§ç»­è¯»ä¸‹ä¸€å—</span>
            <span class="hljs-comment">// åé¦ˆè¿›åº¦</span>
            self.<span class="hljs-title function_">postMessage</span>({ 
                <span class="hljs-attr">percentage</span>: (currentChunk / <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">ceil</span>(file.<span class="hljs-property">size</span> / chunkSize) * <span class="hljs-number">100</span>).<span class="hljs-title function_">toFixed</span>(<span class="hljs-number">2</span>) 
            });
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-comment">// å…¨éƒ¨è¯»å®Œï¼Œç”Ÿæˆæœ€ç»ˆ MD5</span>
            <span class="hljs-keyword">const</span> md5 = spark.<span class="hljs-title function_">end</span>();
            self.<span class="hljs-title function_">postMessage</span>({ <span class="hljs-attr">hash</span>: md5 }); <span class="hljs-comment">// å®Œå·¥ï¼Œå›ä¼ ç»“æœ</span>
        }
    };

    <span class="hljs-keyword">function</span> <span class="hljs-title function_">loadNext</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">const</span> start = currentChunk * chunkSize;
        <span class="hljs-keyword">const</span> end = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(start + chunkSize, file.<span class="hljs-property">size</span>);
        <span class="hljs-comment">// å…³é”®ç‚¹ï¼šä½¿ç”¨ slice åˆ‡ç‰‡è¯»å–ï¼Œé¿å…ä¸€æ¬¡æ€§è¯»å…¥å†…å­˜</span>
        reader.<span class="hljs-title function_">readAsArrayBuffer</span>(file.<span class="hljs-title function_">slice</span>(start, end));
    }

    <span class="hljs-title function_">loadNext</span>(); <span class="hljs-comment">// å¼€å§‹ä»»åŠ¡</span>
};
</code></pre>
<h3 data-id="heading-9">äº”ã€ å…³é”®æ€è·¯è¿‡ç¨‹ï¼ˆç»™é¢è¯•å®˜è®²å‡ºæ·±åº¦ï¼‰</h3>
<p>å½“ä½ å‘é¢è¯•å®˜å¤è¿°è¿™ä¸ªè¿‡ç¨‹æ—¶ï¼Œè¦æŒ‰ç…§è¿™ä¸ªé€»è¾‘é“¾æ¡ï¼š</p>
<p><strong>å®ä¾‹åŒ–ï¼ˆNew Workerï¼‰ï¼š</strong></p>
<p>"é¦–å…ˆï¼Œæˆ‘é€šè¿‡ new Worker å¯åŠ¨ä¸€ä¸ªç‹¬ç«‹çº¿ç¨‹ï¼Œå°†è€—æ—¶çš„è®¡ç®—é€»è¾‘ä»ä¸»çº¿ç¨‹å‰¥ç¦»ã€‚"</p>
<p><strong>æ•°æ®ä¼ è¾“ï¼ˆPostMessageï¼‰ï¼š</strong></p>
<p>"ä¸»çº¿ç¨‹å°† File å¯¹è±¡å‘é€ç»™ Workerã€‚è¿™é‡Œè¦æ³¨æ„ï¼ŒFile å¯¹è±¡æ˜¯ File å¥æŸ„ï¼Œå‘é€å®ƒå¹¶ä¸ä¼šç¬é—´å æ®å¤§é‡å†…å­˜ï¼Œå› ä¸ºå®ƒæ˜¯åŸºäº Blob çš„ï¼Œæ˜¯æƒ°æ€§çš„ã€‚"</p>
<p><strong>åˆ†å—è¯»å–ä¸å¢é‡è®¡ç®—ï¼ˆChunked Hashingï¼‰ï¼š</strong></p>
<p>"è¿™æ˜¯æœ€æ ¸å¿ƒçš„ä¸€æ­¥ã€‚å³ä¾¿åœ¨ Worker å†…éƒ¨ï¼Œæˆ‘ä¹Ÿä¸èƒ½ç›´æ¥è¯»å–æ•´ä¸ªæ–‡ä»¶ï¼ˆæ¯”å¦‚ 5GB è¯»è¿›å†…å­˜ä¼šç›´æ¥è®© Worker è¿›ç¨‹æŒ‚æ‰ï¼‰ã€‚</p>
<p>æˆ‘ä½¿ç”¨äº† file.slice é…åˆ FileReaderï¼Œæ¯æ¬¡åªè¯»å– 2MB æ•°æ®ã€‚</p>
<p>é…åˆ spark-md5 çš„ append æ–¹æ³•ï¼Œå°†æ•°æ®'å–‚'ç»™è®¡ç®—å¼•æ“ï¼Œå¤„ç†å®Œåï¼Œä¹‹å‰çš„å†…å­˜å—ä¼šè¢«é‡Šæ”¾ã€‚"</p>
<p><strong>å¼‚æ­¥é€šä¿¡ï¼ˆMessagingï¼‰ï¼š</strong></p>
<p>"åœ¨è®¡ç®—è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä¸æ–­é€šè¿‡ self.postMessage å‘ä¸»çº¿ç¨‹å‘é€è®¡ç®—è¿›åº¦ï¼Œä»¥ä¾¿ç”¨æˆ·åœ¨ç•Œé¢ä¸Šèƒ½çœ‹åˆ°åŠ¨æ€çš„ç™¾åˆ†æ¯”ã€‚</p>
<p>æœ€åè®¡ç®—å®Œæˆï¼Œé€šè¿‡æ¶ˆæ¯å›ä¼ æœ€ç»ˆ MD5ã€‚"</p>
<h3 data-id="heading-10">å…­ã€ æ€»ç»“ï¼šæ ¸å¿ƒ API è®°äº‹æœ¬</h3>
<p>new Worker('path'): å¼€å¯æ‹›è˜ã€‚</p>
<p>postMessage(data): äº’å‘çŸ­ä¿¡ã€‚</p>
<p>onmessage: æ¥æ”¶çŸ­ä¿¡ã€‚</p>
<p>importScripts(): Worker å†…éƒ¨åŠ è½½æ’ä»¶ã€‚</p>
<p>file.slice(): ç‰©ç†ä¸Šçš„"åˆ‡ç‰‡"ï¼ŒMD5 ä¸å´©æºƒçš„ç§˜è¯€ã€‚</p>
<p>FileReader.readAsArrayBuffer(): å°†äºŒè¿›åˆ¶å†…å®¹è¯»å…¥å†…å­˜è¿›è¡Œè®¡ç®—ã€‚</p>
<h3 data-id="heading-11">ä¸ƒ. è°ˆ å†…å­˜ç®¡ç† (Memory Management)</h3>
<p><strong>é¢è¯•å®˜å¯èƒ½ä¼šé—®ï¼š</strong> "åœ¨Workerå†…éƒ¨å¦‚ä½•é¿å…å†…å­˜æº¢å‡ºï¼Ÿ"</p>
<p><strong>å›ç­”ï¼š</strong> "åœ¨ Worker å†…éƒ¨ï¼Œæˆ‘æ²¡æœ‰ä½¿ç”¨ fileReader.readAsArrayBuffer(file) ç›´æ¥è¯»å–æ•´ä¸ªæ–‡ä»¶ã€‚å› ä¸º 4GB çš„æ–‡ä»¶å¦‚æœç›´æ¥è¯»å…¥å†…å­˜ï¼ŒV8 å¼•æ“ä¼šç›´æ¥ OOM (Out of Memory) å´©æºƒã€‚æˆ‘é‡‡ç”¨äº† 'åˆ†å—è¯»å– -&gt; å¢é‡å“ˆå¸Œ' çš„ç­–ç•¥ã€‚åˆ©ç”¨ spark.append() æ¯æ¬¡åªå¤„ç† 2MB çš„æ•°æ®ï¼Œå¤„ç†å®Œå V8 çš„åƒåœ¾å›æ”¶æœºåˆ¶ä¼šè‡ªåŠ¨é‡Šæ”¾è¿™å—å†…å­˜ï¼Œä»è€Œå®ç°ç”¨æå°çš„å†…å­˜å¼€é”€å¤„ç†æå¤§çš„æ–‡ä»¶ã€‚"</p>
<h3 data-id="heading-12">å…«. è°ˆ æŠ½æ ·å“ˆå¸Œ (æ€§èƒ½æ€æ‰‹é”) â€”â€” åªæœ‰ 1% çš„äººçŸ¥é“çš„é»‘ç§‘æŠ€</h3>
<p><strong>é¢è¯•å®˜ï¼š</strong> "å¦‚æœæ–‡ä»¶ 100GBï¼ŒWorker è®¡ç®—ä¹Ÿè¦å¥½å‡ åˆ†é’Ÿï¼Œç”¨æˆ·ç­‰ä¸åŠæ€ä¹ˆåŠï¼Ÿ"</p>
<p><strong>ä½ çš„æ€æ‰‹é”ï¼š</strong> "å¦‚æœå¯¹å®Œæ•´æ€§æ ¡éªŒè¦æ±‚ä¸æ˜¯ 100% ä¸¥è‹›ï¼Œæˆ‘ä¼šé‡‡ç”¨ 'æŠ½æ ·å“ˆå¸Œ' æ–¹æ¡ˆï¼š</p>
<ul>
<li>æ–‡ä»¶å¤´ 2MB å…¨éƒ¨å–æ ·</li>
<li>æ–‡ä»¶å°¾ 2MB å…¨éƒ¨å–æ ·</li>
<li>ä¸­é—´éƒ¨åˆ†ï¼šæ¯éš”ä¸€æ®µè·ç¦»å–æ ·å‡ ä¸ªå­—èŠ‚</li>
</ul>
<p>è¿™æ · 10GB çš„æ–‡ä»¶æˆ‘ä¹Ÿåªéœ€è¦è®¡ç®— 10MB å·¦å³çš„æ•°æ®ï¼ŒMD5 è®¡ç®—ä¼šåœ¨ 1ç§’å†… å®Œæˆï¼Œé…åˆåç«¯æ ¡éªŒï¼Œèƒ½å®ç°'ç§’çº§'é¢„åˆ¤ï¼Œæå¤§æå‡ç”¨æˆ·ä½“éªŒã€‚"</p>
<h3 data-id="heading-13">D. æ€»ç»“ï¼šé¢è¯•åŠ åˆ†å…³é”®è¯</h3>
<ul>
<li><strong>å¢é‡è®¡ç®— (Incremental Hashing)</strong>ï¼šä¸æ˜¯ä¸€æ¬¡æ€§ç®—ï¼Œæ˜¯æ”’ç€ç®—</li>
<li><strong>Blob.slice</strong>ï¼šæ–‡ä»¶åˆ‡ç‰‡çš„æ ¸å¿ƒåº•å±‚ API</li>
<li><strong>éé˜»å¡ (Non-blocking)</strong>ï¼šWorker çš„æ ¸å¿ƒä»·å€¼</li>
<li><strong>OOM é¢„é˜²</strong>ï¼šé€šè¿‡åˆ†å—è¯»å–æ§åˆ¶å†…å­˜å³°å€¼</li>
<li><strong>æŠ½æ ·å“ˆå¸Œ</strong>ï¼šå¤§æ–‡ä»¶å¿«é€Ÿè¯†åˆ«çš„æœ‰æ•ˆæ‰‹æ®µ</li>
</ul>
<p>"å…¶å® Web Worker ä¹Ÿæœ‰å¼€é”€ï¼Œåˆ›å»ºå®ƒéœ€è¦æ—¶é—´å’Œå†…å­˜ã€‚å¯¹äºå‡ ç™¾ KB çš„å°æ–‡ä»¶ï¼Œç›´æ¥åœ¨ä¸»çº¿ç¨‹ç®—å¯èƒ½æ›´å¿«ï¼›ä½†å¯¹äºå¤§æ–‡ä»¶ä¸Šä¼ ï¼ŒWorker æ˜¯ä¿è¯ UI å“åº”æ€§ çš„å”¯ä¸€æ­£ç¡®è§£ã€‚"</p>
<h2 data-id="heading-14">ç¬¬ä¸ƒå±‚ï¼šNode.js åç«¯å‹æµ‹ â€”â€” ç¢ç‰‡åˆå¹¶çš„è‰ºæœ¯</h2>
<p>å½“ 1000 ä¸ªåˆ‡ç‰‡ä¼ ä¸Šæ¥ï¼ŒNode å¦‚ä½•é«˜æ•ˆåˆå¹¶ï¼Ÿ</p>
<p><strong>åˆçº§</strong>ï¼šfs.readFileSyncã€‚ ç¬é—´æ’‘çˆ†å†…å­˜ï¼ŒNode.jsï¼ˆV8ï¼‰é»˜è®¤å†…å­˜é™åˆ¶é€šå¸¸åœ¨ 1GB~2GB å·¦å³ã€‚æ‰§è¡Œ readFile åˆå¹¶å¤§æ–‡ä»¶ï¼ŒæœåŠ¡å™¨ä¼šç¬é—´ Crashã€‚</p>
<p><strong>é«˜çº§</strong>ï¼šfs.createReadStream å’Œ fs.createWriteStreamã€‚</p>
<p>åˆ©ç”¨"æµï¼ˆStreamï¼‰"çš„ç®¡é“æ¨¡å¼ï¼Œè¾¹è¯»è¾¹å†™ï¼Œå†…å­˜å ç”¨æä½ã€‚</p>
<h3 data-id="heading-15">ä¸€ã€ ä»€ä¹ˆæ˜¯ Streamï¼Ÿï¼ˆæœ¬è´¨å®šä¹‰ï¼‰</h3>
<p>æµï¼ˆStreamï¼‰æ˜¯ Node.js æä¾›çš„å¤„ç† æµå¼æ•°æ® çš„æŠ½è±¡æ¥å£ã€‚å®ƒå°†æ•°æ®åˆ†æˆä¸€å°å—ä¸€å°å—ï¼ˆBufferï¼‰ï¼Œåƒæµæ°´ä¸€æ ·ä»ä¸€å¤´æµå‘å¦ä¸€å¤´ã€‚</p>
<p>Readableï¼ˆå¯è¯»æµï¼‰ï¼š æ•°æ®çš„æºå¤´ï¼ˆå¦‚ï¼šåˆ†ç‰‡æ–‡ä»¶ï¼‰ã€‚</p>
<p>Writableï¼ˆå¯å†™æµï¼‰ï¼š æ•°æ®çš„ç»ˆç‚¹ï¼ˆå¦‚ï¼šæœ€ç»ˆåˆå¹¶çš„å¤§æ–‡ä»¶ï¼‰ã€‚</p>
<p>Pipeï¼ˆç®¡é“ï¼‰ï¼š è¿æ¥ä¸¤è€…çš„æ°´ç®¡ï¼Œæ•°æ®é€šè¿‡ç®¡é“è‡ªåŠ¨æµè¿‡å»ã€‚</p>
<h3 data-id="heading-16">äºŒã€ èƒ½å¹²ä»€ä¹ˆï¼Ÿ</h3>
<p>åœ¨æ–‡ä»¶ä¸Šä¼ åœºæ™¯ä¸­ï¼Œå®ƒèƒ½ï¼š</p>
<p>ä½å†…å­˜åˆå¹¶ï¼š æ— è®ºæ–‡ä»¶å¤šå¤§ï¼ˆ1G æˆ– 100Gï¼‰ï¼Œå†…å­˜å ç”¨å§‹ç»ˆç¨³å®šåœ¨å‡ å MBã€‚</p>
<p>è¾¹è¯»è¾¹å†™ï¼š è¯»å…¥ä¸€å°å—åˆ†ç‰‡ï¼Œç«‹å³å†™å…¥ç›®æ ‡æ–‡ä»¶ï¼Œä¸éœ€è¦ç­‰å¾…æ•´ä¸ªåˆ†ç‰‡è¯»å®Œã€‚</p>
<p>è‡ªåŠ¨èƒŒå‹å¤„ç†ï¼ˆBackpressureï¼‰ï¼š å¦‚æœå†™çš„é€Ÿåº¦æ…¢ï¼Œè¯»çš„é€Ÿåº¦å¿«ï¼Œç®¡é“ä¼šè‡ªåŠ¨è®©è¯»å–æ…¢ä¸‹æ¥ï¼Œé˜²æ­¢å†…å­˜ç§¯å‹ã€‚</p>
<h3 data-id="heading-17">ä¸‰ã€ æ€ä¹ˆå¹²ï¼Ÿï¼ˆæ ¸å¿ƒ API ä¸å®æˆ˜ï¼‰</h3>
<p><strong>1. æ ¸å¿ƒ API è®°äº‹æœ¬</strong></p>
<p>fs.createReadStream(path)ï¼šåˆ›å»ºä¸€ä¸ªæŒ‡å‘åˆ†ç‰‡æ–‡ä»¶çš„æ°´é¾™å¤´ã€‚</p>
<p>fs.createWriteStream(path, { flags: 'a' })ï¼šåˆ›å»ºä¸€ä¸ªæŒ‡å‘ç›®æ ‡æ–‡ä»¶çš„æ¥æ”¶æ¡¶ã€‚flags: 'a' è¡¨ç¤ºè¿½åŠ å†™å…¥ï¼ˆAppendï¼‰ã€‚</p>
<p>reader.pipe(writer)ï¼šæŠŠæ°´é¾™å¤´æ¥åˆ°æ¡¶ä¸Šã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>);
<span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">'path'</span>);

<span class="hljs-comment">/**
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} targetFile æœ€ç»ˆæ–‡ä»¶å­˜æ”¾è·¯å¾„
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} chunkDir åˆ†ç‰‡ä¸´æ—¶å­˜æ”¾ç›®å½•
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">number</span>} chunkCount åˆ†ç‰‡æ€»æ•°
 */</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">mergeFileChunks</span>(<span class="hljs-params">targetFile, chunkDir, chunkCount</span>) {
    <span class="hljs-comment">// 1. åˆ›å»ºä¸€ä¸ªå¯å†™æµï¼Œå‡†å¤‡å†™å…¥æœ€ç»ˆæ–‡ä»¶</span>
    <span class="hljs-comment">// flags: 'a' è¡¨ç¤ºè¿½åŠ æ¨¡å¼ï¼Œå¦‚æœæ–‡ä»¶å·²å­˜åœ¨ï¼Œå°±åœ¨æœ«å°¾æ¥ç€å†™</span>
    <span class="hljs-keyword">const</span> writeStream = fs.<span class="hljs-title function_">createWriteStream</span>(targetFile, { <span class="hljs-attr">flags</span>: <span class="hljs-string">'a'</span> });

    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; chunkCount; i++) {
        <span class="hljs-keyword">const</span> chunkPath = path.<span class="hljs-title function_">join</span>(chunkDir, <span class="hljs-string">`<span class="hljs-subst">${i}</span>.part`</span>);
        
        <span class="hljs-comment">// 2. ä¾æ¬¡è¯»å–æ¯ä¸ªåˆ†ç‰‡</span>
        <span class="hljs-keyword">const</span> readStream = fs.<span class="hljs-title function_">createReadStream</span>(chunkPath);

        <span class="hljs-comment">// 3. æ ¸å¿ƒï¼šé€šè¿‡ Promise å°è£…ï¼Œç¡®ä¿"æŒ‰é¡ºåº"åˆå¹¶</span>
        <span class="hljs-comment">// å¿…é¡»ç­‰ç¬¬ 0 ç‰‡åˆå®Œäº†ï¼Œæ‰èƒ½åˆç¬¬ 1 ç‰‡ï¼Œå¦åˆ™æ–‡ä»¶å†…å®¹ä¼šé”™ä¹±</span>
        <span class="hljs-keyword">await</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
            <span class="hljs-comment">// å°†è¯»å–æµçš„å†…å®¹å¯¼å‘å†™å…¥æµ</span>
            <span class="hljs-comment">// æ³¨æ„ï¼šend: false è¡¨ç¤ºè¯»å®Œè¿™ä¸€ä¸ªåˆ†ç‰‡åï¼Œä¸è¦å…³é—­ç›®æ ‡æ–‡ä»¶å†™å…¥æµ</span>
            readStream.<span class="hljs-title function_">pipe</span>(writeStream, { <span class="hljs-attr">end</span>: <span class="hljs-literal">false</span> });
            
            readStream.<span class="hljs-title function_">on</span>(<span class="hljs-string">'end'</span>, <span class="hljs-function">() =&gt;</span> {
                <span class="hljs-comment">// è¯»å–å®Œåï¼Œåˆ é™¤è¿™ä¸ªä¸´æ—¶åˆ†ç‰‡ï¼ˆèŠ‚çœç©ºé—´ï¼‰</span>
                fs.<span class="hljs-title function_">unlinkSync</span>(chunkPath); 
                <span class="hljs-title function_">resolve</span>();
            });
            
            readStream.<span class="hljs-title function_">on</span>(<span class="hljs-string">'error'</span>, <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
                <span class="hljs-title function_">reject</span>(err);
            });
        });
    }

    <span class="hljs-comment">// 4. æ‰€æœ‰åˆ†ç‰‡è¯»å®Œäº†ï¼Œæ‰‹åŠ¨å…³é—­å†™å…¥æµ</span>
    writeStream.<span class="hljs-title function_">end</span>();
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"åˆå¹¶å®Œæˆï¼"</span>);
}
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆç”¨Streamè€Œä¸æ˜¯readFileSyncï¼Ÿ</strong></p>
<ul>
<li>readFileSyncä¼šå°†æ•´ä¸ªæ–‡ä»¶åŠ è½½åˆ°å†…å­˜ï¼Œå¤§æ–‡ä»¶ä¼šçˆ†å†…å­˜</li>
<li>Streamæ˜¯æµå¼å¤„ç†ï¼Œå†…å­˜å ç”¨å›ºå®š</li>
<li>æ€§èƒ½æ›´å¥½ï¼Œé€‚åˆå¤„ç†å¤§æ–‡ä»¶</li>
</ul>
<p><strong>åŠæ‰“é¢è¯•å®˜ï¼š</strong></p>
<p>"åœ¨å¤§æ–‡ä»¶åˆå¹¶çš„å¤„ç†ä¸Šï¼Œæˆ‘ç»å¯¹ä¸ä¼šä½¿ç”¨ fs.readFileSyncã€‚æˆ‘ä¼šä½¿ç”¨ Node.js çš„ Stream APIã€‚</p>
<p>å…·ä½“çš„å®ç°æ€è·¯æ˜¯ï¼š</p>
<p>é¦–å…ˆï¼Œåˆ›å»ºä¸€ä¸ª WriteStream æŒ‡å‘æœ€ç»ˆæ–‡ä»¶ã€‚</p>
<p>ç„¶åï¼Œéå†æ‰€æœ‰åˆ†ç‰‡ï¼Œé€šè¿‡ createReadStream é€ä¸ªè¯»å–ã€‚</p>
<p>å…³é”®ç‚¹åœ¨äºåˆ©ç”¨ pipe ç®¡é“å°†è¯»æµå¯¼å‘å†™æµã€‚ä¸ºäº†ä¿è¯æ–‡ä»¶çš„æ­£ç¡®æ€§ï¼Œæˆ‘ä¼šé€šè¿‡ Promise åŒ…è£…å®ç°ä¸²è¡Œåˆå¹¶ã€‚åŒæ—¶ï¼Œè®¾ç½® pipe çš„ end å‚æ•°ä¸º falseï¼Œç¡®ä¿å†™å…¥æµåœ¨åˆå¹¶è¿‡ç¨‹ä¸­ä¸è¢«æå‰å…³é—­ã€‚</p>
<p>è¿™ç§åšæ³•çš„ä¼˜åŠ¿åœ¨äºï¼šåˆ©ç”¨äº† Stream çš„èƒŒå‹æœºåˆ¶ï¼Œå†…å­˜å ç”¨æä½ï¼ˆé€šå¸¸åªæœ‰å‡ å KBï¼‰ï¼Œå³ä¾¿æ˜¯åœ¨ä½é…ç½®çš„æœåŠ¡å™¨ä¸Šï¼Œä¹Ÿèƒ½ç¨³å®šåˆå¹¶å‡ å GB çš„å¤§æ–‡ä»¶ã€‚"</p>
<h2 data-id="heading-18">ç¬¬å…«å±‚ï¼šMySQL è¡¨ç»“æ„è®¾è®¡ (å®æˆ˜æ¶æ„)</h2>
<p>ä½ éœ€è¦ä¸¤å¼ è¡¨æ¥æ”¯æ’‘è¿™ä¸ªç³»ç»Ÿï¼š</p>
<p><strong>æ–‡ä»¶è¡¨ (Files)</strong>ï¼šid, file_md5, file_name, file_url, status(0:ä¸Šä¼ ä¸­, 1:å·²å®Œæˆ)ã€‚
<strong>åˆ‡ç‰‡è®°å½•è¡¨ (Chunks)</strong>ï¼šid, file_md5, chunk_index, chunk_nameã€‚</p>
<p><strong>æŸ¥è¯¢ä¼˜åŒ–</strong>ï¼šç»™ file_md5 åŠ å”¯ä¸€ç´¢å¼•ï¼Œæå¤§æå‡æŸ¥è¯¢é€Ÿåº¦ã€‚</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- æ–‡ä»¶ä¸»è¡¨</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> files (
  id <span class="hljs-type">INT</span> AUTO_INCREMENT <span class="hljs-keyword">PRIMARY</span> KEY,
  file_md5 <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">32</span>) <span class="hljs-keyword">UNIQUE</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'æ–‡ä»¶MD5'</span>,
  file_name <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">255</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'åŸå§‹æ–‡ä»¶å'</span>,
  file_size <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'æ–‡ä»¶å¤§å°(å­—èŠ‚)'</span>,
  file_url <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">500</span>) COMMENT <span class="hljs-string">'å­˜å‚¨è·¯å¾„'</span>,
  status TINYINT <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span> COMMENT <span class="hljs-string">'çŠ¶æ€:0-ä¸Šä¼ ä¸­,1-å·²å®Œæˆ'</span>,
  upload_time <span class="hljs-type">TIMESTAMP</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span>,
  INDEX idx_file_md5 (file_md5)
);

<span class="hljs-comment">-- åˆ†ç‰‡è®°å½•è¡¨</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> chunks (
  id <span class="hljs-type">INT</span> AUTO_INCREMENT <span class="hljs-keyword">PRIMARY</span> KEY,
  file_md5 <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">32</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
  chunk_index <span class="hljs-type">INT</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'åˆ†ç‰‡ç´¢å¼•'</span>,
  chunk_name <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">100</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'åˆ†ç‰‡æ–‡ä»¶å'</span>,
  upload_status TINYINT <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span> COMMENT <span class="hljs-string">'ä¸Šä¼ çŠ¶æ€'</span>,
  created_at <span class="hljs-type">TIMESTAMP</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span>,
  <span class="hljs-keyword">FOREIGN</span> KEY (file_md5) <span class="hljs-keyword">REFERENCES</span> files(file_md5),
  INDEX idx_file_chunk (file_md5, chunk_index)
);
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆfile_md5è¦åŠ ç´¢å¼•ï¼Ÿ</strong></p>
<ul>
<li>ç§’ä¼ æŸ¥è¯¢æ—¶éœ€è¦å¿«é€Ÿå®šä½æ–‡ä»¶æ˜¯å¦å­˜åœ¨</li>
<li>æ–­ç‚¹ç»­ä¼ æ—¶éœ€è¦å¿«é€Ÿè·å–æŸä¸ªæ–‡ä»¶çš„æ‰€æœ‰åˆ†ç‰‡</li>
<li>æå‡æŸ¥è¯¢æ€§èƒ½ï¼Œé¿å…å…¨è¡¨æ‰«æ</li>
</ul>
<h3 data-id="heading-19">ä¸€ã€ ä¸ºä»€ä¹ˆè¦è¿™ä¹ˆå»ºè¡¨ï¼Ÿï¼ˆæ ¸å¿ƒç—›ç‚¹ï¼‰</h3>
<p>å¦‚æœä¸å­˜æ•°æ®åº“ï¼Œåªå­˜æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿï¼Œä½ ä¼šé¢ä¸´ä¸‰ä¸ªæ­»ç©´ï¼š</p>
<p>æ–­ç‚¹ç»­ä¼ æ²¡ä¾æ®ï¼š ç”¨æˆ·åˆ·æ–°ç½‘é¡µï¼Œå‰ç«¯å†…å­˜ä¸¢äº†ï¼Œæ€ä¹ˆçŸ¥é“å“ªäº›ç‰‡ä¼ è¿‡ï¼Ÿå¿…é¡»æŸ¥åº“ã€‚</p>
<p>ç§’ä¼ æ— æ³•å®ç°ï¼š 10GB çš„æ–‡ä»¶ï¼Œæ€ä¹ˆç¬é—´åˆ¤æ–­æœåŠ¡å™¨æœ‰æ²¡æœ‰ï¼Ÿå…¨ç›˜æ‰«æç‰©ç†æ–‡ä»¶ï¼Ÿå¤ªæ…¢ï¼å¿…é¡»æŸ¥ç´¢å¼•ã€‚</p>
<p>å¹¶å‘åˆå¹¶é£é™©ï¼š å¤šä¸ªè¯·æ±‚åŒæ—¶è§¦å‘åˆå¹¶é€»è¾‘æ€ä¹ˆåŠï¼Ÿéœ€è¦æ•°æ®åº“çš„çŠ¶æ€é”ï¼ˆStatusï¼‰æ¥æ§åˆ¶ã€‚</p>
<h3 data-id="heading-20">äºŒã€ è¡¨ç»“æ„è¯¦è§£ï¼šå®ƒä»¬å„å¸å…¶èŒ</h3>
<p><strong>1. æ–‡ä»¶å…ƒæ•°æ®è¡¨ (files) â€”â€” "èº«ä»½è¯"</strong></p>
<p>file_md5 (æ ¸å¿ƒ)ï¼š è¿™æ˜¯æ–‡ä»¶çš„å”¯ä¸€ç‰©ç†æ ‡è¯†ã€‚ä¸ç®¡æ–‡ä»¶åå«"é«˜æ¸….mp4"è¿˜æ˜¯"å­¦ä¹ èµ„æ–™.avi"ï¼Œåªè¦å†…å®¹ä¸€æ ·ï¼ŒMD5 å°±ä¸€æ ·ã€‚</p>
<p>statusï¼š æ ‡è®°æ–‡ä»¶çŠ¶æ€ã€‚</p>
<p>0 (Uploading): è¿˜æ²¡ä¼ å®Œæˆ–æ­£åœ¨åˆå¹¶ã€‚</p>
<p>1 (Completed): å·²ç»åˆå¹¶æˆåŠŸï¼Œå¯ä»¥ç›´æ¥è®¿é—®ã€‚</p>
<p>file_urlï¼š æœ€ç»ˆåˆå¹¶åçš„è®¿é—®è·¯å¾„ã€‚</p>
<p><strong>2. åˆ‡ç‰‡è®°å½•è¡¨ (chunks) â€”â€” "è¿›åº¦è¡¨"</strong></p>
<p>chunk_indexï¼š è®°å½•è¿™æ˜¯ç¬¬å‡ ä¸ªåˆ†ç‰‡ã€‚</p>
<p>å…³ç³»ï¼š é€šè¿‡ file_md5 å…³è”ã€‚ä¸€ä¸ª files è®°å½•å¯¹åº”å¤šä¸ª chunks è®°å½•ã€‚</p>
<h3 data-id="heading-21">ä¸‰ã€ æ€ä¹ˆå»ºç«‹è”ç³»ï¼Ÿï¼ˆé€»è¾‘å…³è”å›¾ï¼‰</h3>
<p>ä¸€å¯¹å¤šå…³ç³»ï¼š</p>
<p>files.file_md5 (1) &lt;â€”â€”â€”â€”&gt; chunks.file_md5 (N)</p>
<p><strong>ç§’ä¼ é€»è¾‘ï¼š</strong></p>
<p>å‰ç«¯ä¼  MD5 ç»™åç«¯ã€‚</p>
<p>SQL: SELECT file_url FROM files WHERE file_md5 = 'xxx' AND status = 1;</p>
<p>ç»“æœï¼š æœ‰è®°å½•ï¼Ÿç›´æ¥è¿”å› URLï¼ˆç§’ä¼ æˆåŠŸï¼‰ã€‚æ²¡è®°å½•ï¼Ÿè¿›å…¥ä¸‹ä¸€æ­¥ã€‚</p>
<p><strong>ç»­ä¼ é€»è¾‘ï¼š</strong></p>
<p>å‰ç«¯é—®ï¼š"è¿™ä¸ª MD5 æˆ‘ä¼ äº†å¤šå°‘äº†ï¼Ÿ"</p>
<p>SQL: SELECT chunk_index FROM chunks WHERE file_md5 = 'xxx';</p>
<p>ç»“æœï¼š åç«¯è¿”å› [0, 1, 2, 5]ï¼Œå‰ç«¯å‘ç°å°‘äº† 3 å’Œ 4ï¼Œäºæ˜¯åªè¡¥ä¼  3 å’Œ 4ã€‚</p>
<h3 data-id="heading-22">å››ã€ å…³é”®æ€è·¯ä¸å®æˆ˜ SQL</h3>
<p><strong>1. ä¸ºä»€ä¹ˆåŠ å”¯ä¸€ç´¢å¼•ï¼ˆUnique Indexï¼‰ï¼Ÿ</strong></p>
<p>file_md5 å¿…é¡»æ˜¯ UNIQUEã€‚</p>
<p>é¢è¯•ç‚¹ï¼š "æˆ‘ç»™ file_md5 åŠ äº†å”¯ä¸€ç´¢å¼•ï¼Œè¿™ä¸ä»…æ˜¯ä¸ºäº†æŸ¥è¯¢å¿«ï¼Œæ›´æ˜¯ä¸€ç§ä¸šåŠ¡å…œåº•ã€‚åœ¨é«˜å¹¶å‘ä¸‹ï¼Œå¦‚æœä¸¤ä¸ªç”¨æˆ·åŒæ—¶ä¸Šä¼ åŒä¸€ä¸ªæ–‡ä»¶ï¼Œæ•°æ®åº“çš„å”¯ä¸€çº¦æŸèƒ½é˜²æ­¢äº§ç”Ÿä¸¤æ¡é‡å¤çš„æ–‡ä»¶è®°å½•ã€‚"</p>
<p><strong>2. å¤åˆç´¢å¼•ä¼˜åŒ–</strong></p>
<p>åœ¨ chunks è¡¨ï¼Œæˆ‘å»ºè®®å»ºç«‹å¤åˆç´¢å¼•ï¼šINDEX idx_md5_index (file_md5, chunk_index)ã€‚</p>
<p>åŸå› ï¼š ç»­ä¼ æŸ¥è¯¢æ—¶ï¼Œæˆ‘ä»¬ç»å¸¸è¦æŸ¥"æŸä¸ª MD5 ä¸‹çš„ç´¢å¼•æƒ…å†µ"ï¼Œå¤åˆç´¢å¼•èƒ½è®©è¿™ç§æœç´¢è¾¾åˆ°æ¯«ç§’çº§ã€‚</p>
<h3 data-id="heading-23">äº”ã€ å…¨æµç¨‹æ¼”ç»ƒï¼ˆæ€ä¹ˆå¹²ï¼‰</h3>
<p><strong>ç¬¬ä¸€æ­¥ï¼šåˆå§‹åŒ– (Pre-check)</strong></p>
<p>ç”¨æˆ·é€‰å¥½æ–‡ä»¶ï¼Œè®¡ç®— MD5ï¼Œå‘ç»™åç«¯ã€‚</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- å°è¯•æ’å…¥ä¸»è¡¨ï¼Œå¦‚æœ MD5 å·²å­˜åœ¨åˆ™å¿½ç•¥ï¼ˆæˆ–è¿”å›å·²å­˜åœ¨è®°å½•ï¼‰</span>
<span class="hljs-keyword">INSERT</span> IGNORE <span class="hljs-keyword">INTO</span> files (file_md5, file_name, file_size, status) 
<span class="hljs-keyword">VALUES</span> (<span class="hljs-string">'abc123hash'</span>, <span class="hljs-string">'video.mp4'</span>, <span class="hljs-number">102400</span>, <span class="hljs-number">0</span>);
</code></pre>
<p><strong>ç¬¬äºŒæ­¥ï¼šåˆ†ç‰‡ä¸Šä¼  (Chunk Upload)</strong></p>
<p>æ¯æ”¶åˆ°ä¸€ä¸ªç‰‡ï¼Œå­˜å…¥ chunks è¡¨ã€‚</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- è®°å½•å·²æ”¶åˆ°çš„åˆ†ç‰‡</span>
<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> chunks (file_md5, chunk_index, chunk_name) 
<span class="hljs-keyword">VALUES</span> (<span class="hljs-string">'abc123hash'</span>, <span class="hljs-number">0</span>, <span class="hljs-string">'abc123hash_0.part'</span>);
</code></pre>
<p><strong>ç¬¬ä¸‰æ­¥ï¼šåˆå¹¶è§¦å‘ (Merge)</strong></p>
<p>å‰ç«¯å‘åˆå¹¶æŒ‡ä»¤ï¼Œåç«¯æ ¡éªŒåˆ†ç‰‡æ•°é‡ã€‚</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- æ£€æŸ¥åˆ†ç‰‡æ˜¯å¦é½å…¨</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">COUNT</span>(<span class="hljs-operator">*</span>) <span class="hljs-keyword">FROM</span> chunks <span class="hljs-keyword">WHERE</span> file_md5 <span class="hljs-operator">=</span> <span class="hljs-string">'abc123hash'</span>;
<span class="hljs-comment">-- å¦‚æœ Count == æ€»ç‰‡æ•°ï¼Œå¼€å§‹ Stream åˆå¹¶</span>
</code></pre>
<p><strong>ç¬¬å››æ­¥ï¼šå®Œå·¥ (Finish)</strong></p>
<p>åˆå¹¶æˆåŠŸï¼Œæ›´æ–°ä¸»è¡¨ã€‚</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- æ›´æ–°çŠ¶æ€å’Œæœ€ç»ˆè·¯å¾„</span>
<span class="hljs-keyword">UPDATE</span> files <span class="hljs-keyword">SET</span> status <span class="hljs-operator">=</span> <span class="hljs-number">1</span>, file_url <span class="hljs-operator">=</span> <span class="hljs-string">'/uploads/2023/video.mp4'</span> 
<span class="hljs-keyword">WHERE</span> file_md5 <span class="hljs-operator">=</span> <span class="hljs-string">'abc123hash'</span>;
</code></pre>
<h3 data-id="heading-24">å…­ã€ æ€»ç»“è¯æœ¯ï¼ˆåŠæ‰“é¢è¯•å®˜ç‰ˆï¼‰</h3>
<p>"æˆ‘çš„æ•°æ®åº“è®¾è®¡æ ¸å¿ƒæ€è·¯æ˜¯ 'å†…å®¹æ ‡è¯†èƒœäºæ–‡ä»¶æ ‡è¯†'ã€‚</p>
<p>æˆ‘é€šè¿‡ files è¡¨å­˜å‚¨æ–‡ä»¶çš„ MD5 å’Œå…¨å±€çŠ¶æ€ï¼Œé…åˆ UNIQUE ç´¢å¼•å®ç°ç§’ä¼ çš„å¿«é€Ÿæ£€ç´¢å’Œå¹¶å‘æ§åˆ¶ã€‚</p>
<p>é€šè¿‡ chunks è¡¨è®°å½•æ¯ä¸€ä¸ªåˆ†ç‰‡çš„åˆ°è¾¾çŠ¶æ€ï¼Œå®ç°æ–­ç‚¹ç»­ä¼ ã€‚</p>
<p>å€¼å¾—æ³¨æ„çš„ç»†èŠ‚æ˜¯ï¼š</p>
<p>æˆ‘ä½¿ç”¨äº† BIGINT æ¥å­˜å‚¨ file_sizeï¼Œå› ä¸º 4GB ä»¥ä¸Šçš„æ–‡ä»¶ INT ä¼šæº¢å‡ºã€‚</p>
<p>æˆ‘ç»™ file_md5 åšäº†ç´¢å¼•ä¼˜åŒ–ï¼Œç¡®ä¿åœ¨ç™¾ä¸‡çº§æ–‡ä»¶è®°å½•ä¸­ï¼Œæ ¡éªŒæ–‡ä»¶çŠ¶æ€ä¾ç„¶æ˜¯ O(1) çš„å¤æ‚åº¦ã€‚</p>
<p>åˆå¹¶é€»è¾‘å®Œæˆåï¼Œæˆ‘ä¼šé€šè¿‡äº‹åŠ¡æˆ–çŠ¶æ€é”æ›´æ–° status å­—æ®µï¼Œç¡®ä¿æ•°æ®çš„ä¸€è‡´æ€§ã€‚"</p>
<h2 data-id="heading-25">ç¬¬ä¹å±‚ï¼šä¸Šå¸è§†è§’ â€”â€” å¹¶å‘æ§åˆ¶ (Concurrency Control)</h2>
<p>è¿™ä¸€å±‚æ˜¯é¢è¯•ä¸­çš„é«˜å…‰æ—¶åˆ»ã€‚å¦‚æœè¯´ MD5 æ˜¯ä¸ºäº†"å‡†ç¡®"ï¼ŒStream æ˜¯ä¸ºäº†"ç¨³å¥"ï¼Œé‚£ä¹ˆå¹¶å‘æ§åˆ¶å°±æ˜¯ä¸ºäº†"å¹³è¡¡"ã€‚</p>
<p>å¦‚æœä¸€ä¸ªæ–‡ä»¶åˆ‡äº† 1000 ç‰‡ï¼Œæµè§ˆå™¨ç¬é—´å‘å‡º 1000 ä¸ªè¯·æ±‚ï¼Œä¼šå¯¼è‡´æµè§ˆå™¨å´©æºƒæˆ–æœåŠ¡å™¨å®•æœºã€‚</p>
<p><strong>é¢è¯•åŠ åˆ†é¡¹</strong>ï¼šå¼‚æ­¥å¹¶å‘é™åˆ¶é˜Ÿåˆ—ã€‚</p>
<p>é™åˆ¶åŒæ—¶åªæœ‰ 6 ä¸ªè¯·æ±‚åœ¨è·‘ï¼ˆChrome çš„é»˜è®¤é™åˆ¶ï¼‰ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">sendRequest</span>(<span class="hljs-params">tasks, limit = <span class="hljs-number">6</span></span>) {
    <span class="hljs-keyword">const</span> pool = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>();
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> task <span class="hljs-keyword">of</span> tasks) {
        <span class="hljs-keyword">const</span> promise = <span class="hljs-title function_">task</span>();
        pool.<span class="hljs-title function_">add</span>(promise);
        promise.<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> pool.<span class="hljs-title function_">delete</span>(promise));
        <span class="hljs-keyword">if</span> (pool.<span class="hljs-property">size</span> &gt;= limit) <span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">race</span>(pool);
    }
}
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆé™åˆ¶6ä¸ªå¹¶å‘ï¼Ÿ</strong></p>
<ul>
<li>æµè§ˆå™¨å¯¹åŒä¸€åŸŸåæœ‰æœ€å¤§è¿æ¥æ•°é™åˆ¶ï¼ˆé€šå¸¸ä¸º6ï¼‰</li>
<li>é¿å…è¿‡å¤šHTTPè¯·æ±‚å¯¼è‡´ç½‘ç»œæ‹¥å µ</li>
<li>å¹³è¡¡ä¸Šä¼ é€Ÿåº¦å’Œç³»ç»Ÿç¨³å®šæ€§</li>
</ul>
<h3 data-id="heading-26">ä¸€ã€ ä¸ºä»€ä¹ˆè¦æå¹¶å‘æ§åˆ¶ï¼Ÿï¼ˆç—›ç‚¹ï¼‰</h3>
<ol>
<li>
<p>æµè§ˆå™¨"è‡ªä¿"æœºåˆ¶ï¼š
Chrome æµè§ˆå™¨å¯¹åŒä¸€ä¸ªåŸŸåçš„ HTTP è¿æ¥æ•°æœ‰é™åˆ¶ï¼ˆé€šå¸¸æ˜¯ 6 ä¸ªï¼‰ã€‚
å¦‚æœä½ ç¬é—´å‘èµ· 1000 ä¸ªè¯·æ±‚ï¼Œå‰©ä¸‹çš„ 994 ä¸ªä¼šå¤„äº Pendingï¼ˆæ’é˜Ÿï¼‰çŠ¶æ€ã€‚è™½ç„¶ä¸ä¼šç›´æ¥å´©æºƒï¼Œä½†ä¼šé˜»å¡è¯¥åŸŸåçš„å…¶ä»–æ‰€æœ‰è¯·æ±‚ï¼ˆæ¯”å¦‚ä½ åŒæ—¶æƒ³åŠ è½½ä¸€å¼ å›¾ç‰‡ï¼Œéƒ½è¦æ’åœ¨ 900 å¤šä¸ªåˆ‡ç‰‡åé¢ï¼‰ã€‚</p>
</li>
<li>
<p>å†…å­˜ä¸æ€§èƒ½å‹åŠ›ï¼š
å‰ç«¯ï¼š 1000 ä¸ª Promise å¯¹è±¡è¢«åˆ›å»ºï¼Œä¼šç¬é—´åƒæ‰å¤§é‡å†…å­˜ã€‚
åç«¯ï¼ˆNodeï¼‰ï¼š æœåŠ¡å™¨ç¬é—´æ¥æ”¶ 1000 ä¸ªå¹¶å‘è¿æ¥ï¼Œç£ç›˜ IO ä¼šè¢«å æ»¡ï¼ŒCPU å¯èƒ½ä¼šé£™å‡ï¼Œç”šè‡³è§¦å‘æœåŠ¡å™¨çš„æ‹’ç»æœåŠ¡ä¿æŠ¤ã€‚</p>
</li>
</ol>
<h3 data-id="heading-27">äºŒã€ ä»€ä¹ˆæ˜¯å¹¶å‘æ§åˆ¶ï¼Ÿï¼ˆæœ¬è´¨å®šä¹‰ï¼‰</h3>
<p>å¹¶å‘æ§åˆ¶ï¼ˆConcurrency Controlï¼‰ å°±åƒæ˜¯ä¸€ä¸ª"åå­—è·¯å£çš„çº¢ç»¿ç¯"æˆ–è€…"é“¶è¡Œçš„æ’å·æœº"ã€‚</p>
<p>å®ƒä¸æ”¹å˜ä»»åŠ¡æ€»é‡ã€‚</p>
<p>å®ƒæ§åˆ¶åŒä¸€æ—¶åˆ»æ­£åœ¨è¿è¡Œçš„ä»»åŠ¡æ•°é‡ã€‚</p>
<h3 data-id="heading-28">ä¸‰ã€ æ€ä¹ˆå¹²ï¼Ÿï¼ˆæ ¸å¿ƒé€»è¾‘å…¬å¼ï¼‰</h3>
<p>æˆ‘ä»¬è¦å®ç°ä¸€ä¸ª"å·¥ä½œæ± ï¼ˆPoolï¼‰"ï¼Œé€»è¾‘å¦‚ä¸‹ï¼š</p>
<p>å¡«æ»¡ï¼š å…ˆä¸€æ¬¡æ€§å‘å‡º limitï¼ˆæ¯”å¦‚ 6 ä¸ªï¼‰ä¸ªè¯·æ±‚ã€‚</p>
<p>æ¥æ›¿ï¼š åªè¦è¿™ 6 ä¸ªè¯·æ±‚ä¸­ä»»ä½•ä¸€ä¸ªå®Œæˆäº†ï¼Œç©ºå‡ºä¸€ä¸ªä½å­ï¼Œå°±ç«‹åˆ»è¡¥ä¸Šç¬¬ 7 ä¸ªã€‚</p>
<p>å¾ªç¯ï¼š å§‹ç»ˆä¿æŒæœ‰ 6 ä¸ªè¯·æ±‚åœ¨è·‘ï¼Œç›´åˆ° 1000 ä¸ªå…¨éƒ¨å‘å®Œã€‚</p>
<h3 data-id="heading-29">å››ã€ ä»£ç è¯¦è§£ï¼šè¿™ 10 è¡Œä»£ç å€¼ 5k è–ªèµ„</h3>
<p>è¿™æ˜¯åˆ©ç”¨ Promise.race å®ç°çš„æå…¶ç²¾å¦™çš„æ–¹æ¡ˆã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">/**
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Array</span>} <span class="hljs-variable">tasks</span> - æ‰€æœ‰çš„ä¸Šä¼ ä»»åŠ¡ï¼ˆå‡½æ•°æ•°ç»„ï¼Œæ‰§è¡Œå‡½æ•°æ‰å‘è¯·æ±‚ï¼‰
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">number</span>} <span class="hljs-variable">limit</span> - æœ€å¤§å¹¶å‘æ•°
 */</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">sendRequest</span>(<span class="hljs-params">tasks, limit = <span class="hljs-number">6</span></span>) {
    <span class="hljs-keyword">const</span> pool = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>(); <span class="hljs-comment">// æ­£åœ¨æ‰§è¡Œçš„ä»»åŠ¡æ± </span>
    <span class="hljs-keyword">const</span> results = [];     <span class="hljs-comment">// å­˜å‚¨æ‰€æœ‰è¯·æ±‚ç»“æœ</span>

    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> task <span class="hljs-keyword">of</span> tasks) {
        <span class="hljs-comment">// 1. å¼€å§‹æ‰§è¡Œä»»åŠ¡ (task æ˜¯ä¸€ä¸ªè¿”å› Promise çš„å‡½æ•°)</span>
        <span class="hljs-keyword">const</span> promise = <span class="hljs-title function_">task</span>();
        results.<span class="hljs-title function_">push</span>(promise);
        pool.<span class="hljs-title function_">add</span>(promise);

        <span class="hljs-comment">// 2. ä»»åŠ¡æ‰§è¡Œå®Œåï¼Œä»æ± å­é‡Œåˆ æ‰è‡ªå·±</span>
        promise.<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> pool.<span class="hljs-title function_">delete</span>(promise));

        <span class="hljs-comment">// 3. æ ¸å¿ƒï¼šå¦‚æœæ± å­æ»¡äº†ï¼Œå°±ç­‰æœ€å¿«çš„ä¸€ä¸ªå®Œæˆ</span>
        <span class="hljs-keyword">if</span> (pool.<span class="hljs-property">size</span> &gt;= limit) {
            <span class="hljs-comment">// Promise.race ä¼šåœ¨ pool ä¸­ä»»ä½•ä¸€ä¸ª promise å®Œæˆæ—¶ resolve</span>
            <span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">race</span>(pool);
        }
    }

    <span class="hljs-comment">// 4. ç­‰æœ€åå‰©ä¸‹çš„å‡ ä¸ªä¹Ÿè·‘å®Œ</span>
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>(results);
}
</code></pre>
<h3 data-id="heading-30">äº”ã€ å…³é”®æ€è·¯æ‹†è§£ï¼ˆç»™é¢è¯•å®˜è®²é€ï¼‰</h3>
<ol>
<li>
<p>ä¸ºä»€ä¹ˆè¦ä¼ å…¥ tasks å‡½æ•°æ•°ç»„ï¼Œè€Œä¸æ˜¯ Promise æ•°ç»„ï¼Ÿ
å›ç­”ï¼š "å› ä¸º Promise ä¸€æ—¦åˆ›å»ºå°±ä¼šç«‹å³æ‰§è¡Œã€‚å¦‚æœæˆ‘ä¼  [axios(), axios()]ï¼Œé‚£å¹¶å‘æ§åˆ¶å°±æ²¡æ„ä¹‰äº†ã€‚æˆ‘å¿…é¡»ä¼  [() =&gt; axios(), () =&gt; axios()]ï¼Œè¿™æ ·æˆ‘æ‰èƒ½åœ¨å¾ªç¯é‡Œæ‰‹åŠ¨æ§åˆ¶ä»€ä¹ˆæ—¶å€™æ‰§è¡Œå®ƒã€‚"</p>
</li>
<li>
<p>Promise.race èµ·åˆ°äº†ä»€ä¹ˆä½œç”¨ï¼Ÿ
å›ç­”ï¼š "å®ƒå……å½“äº†'é˜»å¡å™¨'ã€‚å½“æ± å­æ»¡äº†ï¼Œawait Promise.race(pool) ä¼šè®© for å¾ªç¯åœä¸‹æ¥ã€‚åªæœ‰å½“æ± å­é‡Œæœ€å¿«çš„ä¸€ä¸ªè¯·æ±‚å®Œæˆäº†ï¼Œrace æ‰ä¼šè§£é™¤é˜»å¡ï¼Œå¾ªç¯ç»§ç»­ï¼Œä»è€Œå‘èµ·ä¸‹ä¸€ä¸ªè¯·æ±‚ã€‚"</p>
</li>
<li>
<p>ä¸ºä»€ä¹ˆæ˜¯ 6 ä¸ªï¼Ÿ
å›ç­”ï¼š "è¿™æ˜¯åŸºäº RFC 2616 æ ‡å‡†å»ºè®®å’Œä¸»æµæµè§ˆå™¨ï¼ˆChrome/Firefoxï¼‰çš„é»˜è®¤é™åˆ¶ã€‚è¶…è¿‡ 6 ä¸ªï¼Œæµè§ˆå™¨ä¹Ÿä¼šè®©å‰©ä¸‹çš„æ’é˜Ÿã€‚æ‰€ä»¥æˆ‘ä»¬å°†å¹¶å‘æ•°è®¾ä¸º 6ï¼Œæ—¢èƒ½æ¦¨å¹²å¸¦å®½ï¼Œåˆèƒ½ä¿æŒæµè§ˆå™¨çš„å“åº”é¡ºç•…ã€‚"</p>
</li>
</ol>
<h3 data-id="heading-31">å…­ã€ è¿›é˜¶ï¼šå¦‚æœè¯·æ±‚å¤±è´¥äº†æ€ä¹ˆåŠï¼Ÿï¼ˆæ–­ç‚¹ç»­ä¼ çš„ç»“åˆï¼‰</h3>
<p>åœ¨å®æˆ˜ä¸­ï¼Œæˆ‘ä»¬è¿˜éœ€è¦åŠ ä¸Šé‡è¯•æœºåˆ¶ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä¼ªä»£ç ï¼šå¸¦é‡è¯•çš„ task</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">createTask</span> = (<span class="hljs-params">chunk</span>) =&gt; {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">async</span> () =&gt; {
        <span class="hljs-keyword">let</span> retries = <span class="hljs-number">3</span>;
        <span class="hljs-keyword">while</span> (retries &gt; <span class="hljs-number">0</span>) {
            <span class="hljs-keyword">try</span> {
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> axios.<span class="hljs-title function_">post</span>(<span class="hljs-string">'/upload'</span>, chunk);
            } <span class="hljs-keyword">catch</span> (err) {
                retries--;
                <span class="hljs-keyword">if</span> (retries === <span class="hljs-number">0</span>) <span class="hljs-keyword">throw</span> err;
            }
        }
    };
};
</code></pre>
<h3 data-id="heading-32">ä¸ƒã€ æ€»ç»“</h3>
<p>"åœ¨å¤§æ–‡ä»¶ä¸Šä¼ åœºæ™¯ä¸‹ï¼Œç›²ç›®å‘èµ·æˆç™¾ä¸Šåƒä¸ªåˆ‡ç‰‡è¯·æ±‚ä¼šå¯¼è‡´æµè§ˆå™¨ç½‘ç»œå±‚é˜»å¡å’ŒæœåŠ¡å™¨å‹åŠ›è¿‡å¤§ã€‚</p>
<p>æˆ‘çš„è§£å†³æ–¹æ¡ˆæ˜¯å®ç°ä¸€ä¸ª 'å¼‚æ­¥å¹¶å‘æ§åˆ¶é˜Ÿåˆ—'ã€‚</p>
<p>æ ¸å¿ƒæ€æƒ³æ˜¯åˆ©ç”¨ Promise.raceã€‚æˆ‘å°†å¹¶å‘æ•°é™åˆ¶åœ¨ 6 ä¸ªã€‚åœ¨ for å¾ªç¯ä¸­ï¼Œæˆ‘ç»´æŠ¤ä¸€ä¸ª Set ç»“æ„çš„æ‰§è¡Œæ± ã€‚æ¯å½“ä¸€ä¸ªåˆ‡ç‰‡è¯·æ±‚å¼€å§‹ï¼Œå°±åŠ å…¥æ± å­ï¼›å®Œæˆåç§»å‡ºã€‚å½“æ± å­è¾¾åˆ°é™åˆ¶æ•°æ—¶ï¼Œåˆ©ç”¨ await Promise.race é˜»å¡å¾ªç¯ï¼Œå®ç°**'èµ°ä¸€ä¸ªï¼Œè¡¥ä¸€ä¸ª'**çš„åŠ¨æ€å¹³è¡¡ã€‚</p>
<p>è¿™æ ·åšä¸ä»…éµå®ˆäº†æµè§ˆå™¨çš„è¿æ¥é™åˆ¶ï¼Œæ›´é‡è¦çš„æ˜¯ä¿è¯äº†å‰ç«¯é¡µé¢çš„æµç•…åº¦å’Œåç«¯ IO çš„ç¨³å®šæ€§ã€‚å¦‚æœé‡åˆ°å¤±è´¥çš„è¯·æ±‚ï¼Œæˆ‘è¿˜ä¼šé…åˆé‡è¯•é€»è¾‘å’Œæ–­ç‚¹ç»­ä¼ è®°å½•ï¼Œç¡®ä¿æ•´ä¸ªä¸Šä¼ è¿‡ç¨‹çš„å¼ºå£®æ€§ã€‚"</p>
<h2 data-id="heading-33">ç¬¬åå±‚ï¼šç»ˆæå›ç­”ç­–ç•¥ (æ¶æ„å¸ˆæ”¶ç½‘ç‰ˆ)</h2>
<p>å¦‚æœé¢è¯•å®˜è®©ä½ æ€»ç»“ä¸€å¥—"å®Œç¾çš„æ–‡ä»¶ä¸Šä¼ æ–¹æ¡ˆ"ï¼Œè¯·æŒ‰ç…§äº”ä¸ªç»´åº¦æ·±åº¦æ”¶ç½‘ï¼š</p>
<h3 data-id="heading-34">ç”¨æˆ·ä½“éªŒå±‚ (Performance)ï¼š</h3>
<p>é‡‡ç”¨ Web Worker å¼€å¯åå°çº¿ç¨‹ï¼Œé…åˆ Spark-MD5 å®ç°å¢é‡å“ˆå¸Œè®¡ç®—ã€‚</p>
<p>æ ¸å¿ƒäº®ç‚¹ï¼šé€šè¿‡"åˆ†å—è¯»å– -&gt; å¢é‡ç´¯åŠ "ç­–ç•¥é¿å… 4GB+ å¤§æ–‡ä»¶å¯¼è‡´çš„æµè§ˆå™¨ OOMï¼ˆå†…å­˜æº¢å‡ºï¼‰ï¼Œå¹¶åˆ©ç”¨ Worker çš„éé˜»å¡ç‰¹æ€§ç¡®ä¿ UI å“åº”å§‹ç»ˆä¿æŒ 60fpsã€‚å¯¹äºè¶…å¤§æ–‡ä»¶ï¼Œå¯é€‰æŠ½æ ·å“ˆå¸Œæ–¹æ¡ˆï¼Œç§’çº§ç”ŸæˆæŒ‡çº¹ã€‚</p>
<h3 data-id="heading-35">ä¼ è¾“ç­–ç•¥å±‚ (Strategy)ï¼š</h3>
<p><strong>ç§’ä¼ </strong>ï¼šä¸Šä¼ å‰é¢„æ£€ MD5ï¼Œå®ç°"å†…å®¹å³è·¯å¾„"çš„ç¬é—´å®Œæˆã€‚</p>
<p><strong>æ–­ç‚¹ç»­ä¼ </strong>ï¼šä»¥åç«¯å­˜å‚¨ä¸ºå‡†ï¼Œé€šè¿‡æ¥å£æŸ¥è¯¢ MySQL ä¸­å·²å­˜åœ¨çš„ chunk_indexï¼Œå‰ç«¯æ‰§è¡Œ filter å¢é‡ä¸Šä¼ ã€‚</p>
<p><strong>å¹¶å‘æ§åˆ¶</strong>ï¼šæ‰‹å†™å¼‚æ­¥å¹¶å‘æ± ï¼Œåˆ©ç”¨ Promise.race å®ç°"èµ°ä¸€ä¸ªï¼Œè¡¥ä¸€ä¸ª"çš„æ§½ä½æ§åˆ¶ï¼ˆé™åˆ¶ 6 ä¸ªå¹¶å‘ï¼‰ï¼Œæ—¢æ¦¨å¹²å¸¦å®½åˆé˜²æ­¢ TCP é˜»å¡åŠæœåŠ¡å™¨ IO çˆ†è¡¨ã€‚</p>
<h3 data-id="heading-36">åç«¯å¤„ç†å±‚ (Processing)ï¼š</h3>
<p><strong>æµå¼åˆå¹¶</strong>ï¼šæ”¾å¼ƒ fs.readFileï¼ŒåšæŒä½¿ç”¨ Node.js Stream (pipe)ã€‚</p>
<p>æ ¸å¿ƒäº®ç‚¹ï¼šåˆ©ç”¨ WriteStream çš„è¿½åŠ æ¨¡å¼ä¸è¯»æµå¯¹æ¥ï¼Œé€šè¿‡ Promise ä¸²è¡ŒåŒ– ä¿è¯åˆ‡ç‰‡é¡ºåºï¼Œå¹¶ä¾é  Stream çš„èƒŒå‹ï¼ˆBackpressureï¼‰æœºåˆ¶è‡ªåŠ¨å¹³è¡¡è¯»å†™é€Ÿåº¦ï¼Œå°†å†…å­˜å ç”¨ç¨³å®šåœ¨ 30MB å·¦å³ã€‚</p>
<h3 data-id="heading-37">æŒä¹…åŒ–è®¾è®¡å±‚ (Database)ï¼š</h3>
<p><strong>æ–‡ä»¶å…ƒæ•°æ®ç®¡ç†</strong>ï¼šMySQL è®°å½•æ–‡ä»¶ MD5ã€çŠ¶æ€ä¸æœ€ç»ˆå­˜å‚¨ URLã€‚</p>
<p><strong>æŸ¥è¯¢ä¼˜åŒ–</strong>ï¼šç»™ file_md5 åŠ  Unique Indexï¼ˆå”¯ä¸€ç´¢å¼•ï¼‰ï¼Œä¸ä»…æå‡ç§’ä¼ æŸ¥è¯¢æ•ˆç‡ï¼Œæ›´åœ¨æ•°æ®åº“å±‚é¢å…œåº•é«˜å¹¶å‘ä¸‹çš„é‡å¤å†™å…¥é£é™©ã€‚</p>
<h3 data-id="heading-38">å®‰å…¨é˜²æŠ¤å±‚ (Security)ï¼š</h3>
<p><strong>äºŒè¿›åˆ¶æ ¡éªŒ</strong>ï¼šä¸ä¿¡ä»»å‰ç«¯åç¼€åï¼Œåç«¯è¯»å–æ–‡ä»¶æµå‰ 8 å­—èŠ‚çš„ Magic Numberï¼ˆé­”æ•°ï¼‰ æ ¡éªŒäºŒè¿›åˆ¶å¤´ï¼Œé˜²æ­¢ä¼ªé€ åç¼€çš„æœ¨é©¬æ”»å‡»ã€‚</p>
<h3 data-id="heading-39">æ€»ç»“è¯æœ¯ï¼šä¸€åˆ†é’Ÿ"åŠæ‰“"é¢è¯•å®˜</h3>
<p>"åœ¨å¤„ç†å¤§æ–‡ä»¶ä¸Šä¼ æ—¶ï¼Œæˆ‘çš„æ ¸å¿ƒæ€è·¯æ˜¯ 'åˆ†è€Œæ²»ä¹‹' ä¸ 'çŠ¶æ€æŒä¹…åŒ–'ã€‚</p>
<p>åœ¨å‰ç«¯å±‚é¢ï¼Œæˆ‘é€šè¿‡ Web Worker é…åˆå¢é‡å“ˆå¸Œ è§£å†³äº†è®¡ç®—å¤§æ–‡ä»¶ MD5 æ—¶çš„ UI é˜»å¡å’Œå†…å­˜æº¢å‡ºé—®é¢˜ã€‚åˆ©ç”¨ Blob.slice å®ç°é€»è¾‘åˆ‡ç‰‡åï¼Œæˆ‘æ²¡æœ‰ç›²ç›®å‘èµ·è¯·æ±‚ï¼Œè€Œæ˜¯è®¾è®¡äº†ä¸€ä¸ªåŸºäº Promise.race çš„å¹¶å‘æ§åˆ¶é˜Ÿåˆ—ï¼Œåœ¨éµå®ˆæµè§ˆå™¨ TCP é™åˆ¶çš„åŒæ—¶ï¼Œä¿è¯äº†ä¼ è¾“çš„å¹³ç¨³æ€§ã€‚</p>
<p>åœ¨çŠ¶æ€ç®¡ç†ä¸Šï¼Œæˆ‘é‡‡ç”¨ 'åç«¯é©±åŠ¨'çš„æ–­ç‚¹ç»­ä¼ æ–¹æ¡ˆã€‚å‰ç«¯åœ¨ä¸Šä¼ å‰ä¼šé€šè¿‡æ¥å£æŸ¥è¯¢ MySQL è·å–å·²ä¸Šä¼ åˆ†ç‰‡åˆ—è¡¨ï¼Œè¿™ç§æ–¹æ¡ˆæ¯” localStorage æ›´å¯é ï¼Œä¸”å¤©ç„¶æ”¯æŒè·¨è®¾å¤‡ç»­ä¼ ã€‚</p>
<p>åœ¨åç«¯å¤„ç†ä¸Šï¼Œæˆ‘æ·±åº¦ä½¿ç”¨äº† Node.js çš„ Stream æµ è¿›è¡Œåˆ†ç‰‡åˆå¹¶ã€‚é€šè¿‡ç®¡é“æ¨¡å¼ä¸èƒŒå‹å¤„ç†ï¼Œæˆ‘ç¡®ä¿äº†æœåŠ¡å™¨åœ¨å¤„ç†å‡ å GB æ•°æ®æ—¶ï¼Œå†…å­˜æ°´ä½ä¾ç„¶ä¿æŒåœ¨æä½èŒƒå›´ã€‚</p>
<p>åœ¨å®‰å…¨æ€§ä¸ä¸¥è°¨æ€§ä¸Šï¼Œæˆ‘é€šè¿‡ MySQL å”¯ä¸€ç´¢å¼• å¤„ç†å¹¶å‘å†™å†²çªï¼Œé€šè¿‡ æ–‡ä»¶å¤´äºŒè¿›åˆ¶æ ¡éªŒ è¿‡æ»¤æ¶æ„æ–‡ä»¶ã€‚</p>
<p>è¿™å¥—æ–¹æ¡ˆä¸ä»…æ˜¯åŠŸèƒ½çš„å †ç Œï¼Œæ›´æ˜¯å¯¹æµè§ˆå™¨æ¸²æŸ“æœºåˆ¶ã€ç½‘ç»œæ‹¥å¡æ§åˆ¶ã€å†…å­˜ç®¡ç†ä»¥åŠæœåŠ¡å™¨ IO ç“¶é¢ˆçš„ç»¼åˆä¼˜åŒ–æ–¹æ¡ˆã€‚"</p>
<h3 data-id="heading-40">ğŸ’¡ é¢è¯•å®˜å¯èƒ½è¿½é—®çš„"è¡¥ä¸"</h3>
<p><strong>è¿½é—®</strong>ï¼šå¦‚æœåˆå¹¶è¿‡ç¨‹ä¸­æœåŠ¡å™¨æ–­ç”µäº†æ€ä¹ˆåŠï¼Ÿ</p>
<p><strong>å›ç­”</strong>ï¼š ç”±äºæˆ‘ä»¬æ˜¯é€šè¿‡æ•°æ®åº“è®°å½• status çš„ï¼Œåˆå¹¶æœªå®Œæˆå‰ status å§‹ç»ˆä¸º 0ã€‚æœåŠ¡å™¨é‡å¯åï¼Œå¯ä»¥æ ¹æ® status=0 ä¸”åˆ‡ç‰‡å·²é½å…¨çš„è®°å½•ï¼Œé‡æ–°è§¦å‘åˆå¹¶ä»»åŠ¡ï¼Œæˆ–è€…ç”±å‰ç«¯ä¸‹æ¬¡è§¦å‘é¢„æ£€æ—¶é‡æ–°åˆå¹¶ã€‚</p>
<p><strong>è¿½é—®</strong>ï¼šåˆ‡ç‰‡å¤§å°è®¾ä¸ºå¤šå°‘åˆé€‚ï¼Ÿ</p>
<p><strong>å›ç­”</strong>ï¼š é€šå¸¸å»ºè®® 2MB - 5MBã€‚å¤ªå°ä¼šå¯¼è‡´è¯·æ±‚ç¢ç‰‡è¿‡å¤šï¼ˆHTTP å¤´éƒ¨å¼€é”€å¤§ï¼‰ï¼Œå¤ªå¤§å®¹æ˜“è§¦å‘ç½‘ç»œæ³¢åŠ¨å¯¼è‡´çš„å•ä¸ªè¯·æ±‚å¤±è´¥ã€‚</p>
<p><strong>è¿½é—®</strong>ï¼šä¸Šä¼ è¿‡ç¨‹ä¸­è¿›åº¦æ¡å¦‚ä½•å®ç°ï¼Ÿ</p>
<p><strong>å›ç­”</strong>ï¼š ä¸¤ä¸ªç»´åº¦ã€‚ä¸€æ˜¯ MD5 è¿›åº¦ï¼ˆWorker è¿”å›ï¼‰ï¼ŒäºŒæ˜¯ä¸Šä¼ è¿›åº¦ï¼ˆä½¿ç”¨ axios çš„ onUploadProgress ç›‘æ§æ¯ä¸ªåˆ†ç‰‡ï¼Œç»“åˆå·²ä¸Šä¼ åˆ†ç‰‡æ•°é‡è®¡ç®—åŠ æƒå¹³å‡è¿›åº¦ï¼‰ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ¥ä¸€èµ·å®ç°ä¸€ä¸ªæŒ‰é’®æ•ˆæœ]]></title>    <link>https://juejin.cn/post/7602579671476142099</link>    <guid>https://juejin.cn/post/7602579671476142099</guid>    <pubDate>2026-02-04T09:57:15.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602579671476142099" data-draft-id="7602579671476043795" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ¥ä¸€èµ·å®ç°ä¸€ä¸ªæŒ‰é’®æ•ˆæœ"/> <meta itemprop="keywords" content="Flutter,Android"/> <meta itemprop="datePublished" content="2026-02-04T09:57:15.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç«æŸ´å°±æ˜¯æˆ‘"/> <meta itemprop="url" content="https://juejin.cn/user/272334614705575"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ¥ä¸€èµ·å®ç°ä¸€ä¸ªæŒ‰é’®æ•ˆæœ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/272334614705575/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç«æŸ´å°±æ˜¯æˆ‘
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T09:57:15.000Z" title="Wed Feb 04 2026 09:57:15 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fdbbf3423beb43edb667935812c1d84e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54Gr5p-05bCx5piv5oiR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770803834&amp;x-signature=xzpDfRhn9tXwwIWxOlEXb0vljCI%3D" alt="image.png" width="70%" loading="lazy"/>
<p>æ•ˆæœç‚¹ï¼š1 æŒ‰é’®å¤–éƒ¨æ˜¯ç™½è‰²ï¼Œé‡Œé¢çš„é¢œè‰²åœ¨å››å‘¨åƒæ˜¯æ¸å˜å‡å¼±</p>
<p>2 æœ‰é˜´å½±å¹¶ä¸”é˜´å½±çœ‹ç€å¾ˆè‡ªç„¶ï¼ˆç›¸å¯¹äºç›´æ¥è®¾ç½®BoxShadowï¼‰</p>
<p>å®ç°çš„æ•ˆæœ</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f36ea769d4e348bc856be7b27eceed9f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54Gr5p-05bCx5piv5oiR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770803834&amp;x-signature=sAPgK9BD0%2BgfXeuVbXECHM0w7QA%3D" alt="image.png" loading="lazy"/></p>
<p>æ²¡æœ‰ç›´æ¥ç”¨BoxShadow,BoxShadowä¹Ÿæ˜¯ç”¨..maskFilter = MaskFilter.blur(BlurStyle.normal, 10); api æ¥å®ç°çš„é˜´å½±ï¼Œæˆ‘è¿™é‡Œå°±æ˜¯ç›´æ¥ç”¨çš„è¿™ä¸ªapiè¿›è¡Œç»˜åˆ¶ã€‚</p>
<p>ä¸»è¦ç»˜åˆ¶ä»£ç </p>
<pre><code class="hljs language-js" lang="js">      
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ShadowPainter</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">CustomPainter</span> {
  @override
  <span class="hljs-keyword">void</span> <span class="hljs-title function_">paint</span>(<span class="hljs-params">Canvas canvas, Size size</span>) {
<span class="hljs-comment">// 1. åˆ›å»ºç»˜åˆ¶è·¯å¾„ï¼ˆåœ†å½¢ï¼‰</span>
    <span class="hljs-keyword">var</span> rect = <span class="hljs-title class_">RRect</span>.<span class="hljs-title function_">fromLTRBR</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, size.<span class="hljs-property">width</span>, size.<span class="hljs-property">height</span>, <span class="hljs-title class_">Radius</span>.<span class="hljs-title function_">circular</span>(size.<span class="hljs-property">height</span>/<span class="hljs-number">2</span>));
    final path = <span class="hljs-title class_">Path</span>()..<span class="hljs-title function_">addRRect</span>(rect);
    final path2 = <span class="hljs-title class_">Path</span>()..<span class="hljs-title function_">addRRect</span>(rect.<span class="hljs-title function_">deflate</span>(<span class="hljs-number">5</span>));

    final path3 = <span class="hljs-title class_">Path</span>()..<span class="hljs-title function_">addRRect</span>(rect.<span class="hljs-title function_">deflate</span>(<span class="hljs-number">10</span>));

    <span class="hljs-comment">//ç»˜åˆ¶åº•éƒ¨é˜´å½±</span>
    <span class="hljs-comment">//path3 æ¯”rect å° è¿™æ ·è®¾ç½®outeræ¨¡å¼çš„æ—¶å€™å¤–æ•£çš„å…‰è¶…å‡ºç»„ä»¶çš„éƒ¨åˆ†å°±çœ‹ç€å¾ˆæŸ”å’Œ</span>
    final <span class="hljs-title class_">Paint</span> paint3 = <span class="hljs-title class_">Paint</span>()
      ..<span class="hljs-property">color</span> = <span class="hljs-title class_">Color</span>.<span class="hljs-title function_">fromRGBO</span>(<span class="hljs-number">249</span>, <span class="hljs-number">142</span>, <span class="hljs-number">119</span>, <span class="hljs-number">1</span>)
      ..<span class="hljs-property">maskFilter</span> = <span class="hljs-title class_">MaskFilter</span>.<span class="hljs-title function_">blur</span>(<span class="hljs-title class_">BlurStyle</span>.<span class="hljs-property">outer</span>, <span class="hljs-number">30</span>);
    canvas.<span class="hljs-title function_">drawPath</span>(path3, paint3);

    <span class="hljs-comment">//ç»˜åˆ¶ç™½è‰²åº•è‰²</span>
    final <span class="hljs-title class_">Paint</span> paint = <span class="hljs-title class_">Paint</span>()
      ..<span class="hljs-property">color</span> = <span class="hljs-title class_">Colors</span>.<span class="hljs-property">white</span>;
    canvas.<span class="hljs-title function_">drawPath</span>(path, paint);

    <span class="hljs-comment">//ç»˜åˆ¶ä¸­å¿ƒé¢œè‰² </span>
    <span class="hljs-comment">//å°±å¯ä»¥è®©å››å‘¨çš„é¢œè‰²æ¸å˜</span>
    final <span class="hljs-title class_">Paint</span> paint1 = <span class="hljs-title class_">Paint</span>()
      ..<span class="hljs-property">color</span> = <span class="hljs-title class_">Color</span>.<span class="hljs-title function_">fromRGBO</span>(<span class="hljs-number">249</span>, <span class="hljs-number">142</span>, <span class="hljs-number">119</span>, <span class="hljs-number">1</span>)
      ..<span class="hljs-property">maskFilter</span> = <span class="hljs-title class_">MaskFilter</span>.<span class="hljs-title function_">blur</span>(<span class="hljs-title class_">BlurStyle</span>.<span class="hljs-property">normal</span>, <span class="hljs-number">10</span>);

    canvas.<span class="hljs-title function_">drawPath</span>(path2, paint1);
  }

  @override
  bool <span class="hljs-title function_">shouldRepaint</span>(covariant <span class="hljs-title class_">CustomPainter</span> oldDelegate) =&gt; <span class="hljs-literal">false</span>;
}
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Swiftä¸­çš„AutoreleasePoolï¼šåŸç†ã€å®è·µä¸æœ€ä½³ä½¿ç”¨åœºæ™¯]]></title>    <link>https://juejin.cn/post/7602454700504563753</link>    <guid>https://juejin.cn/post/7602454700504563753</guid>    <pubDate>2026-02-04T02:20:08.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602454700504563753" data-draft-id="7602482736913645603" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Swiftä¸­çš„AutoreleasePoolï¼šåŸç†ã€å®è·µä¸æœ€ä½³ä½¿ç”¨åœºæ™¯"/> <meta itemprop="keywords" content="Swift"/> <meta itemprop="datePublished" content="2026-02-04T02:20:08.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="unravel2025"/> <meta itemprop="url" content="https://juejin.cn/user/1116759541421880"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Swiftä¸­çš„AutoreleasePoolï¼šåŸç†ã€å®è·µä¸æœ€ä½³ä½¿ç”¨åœºæ™¯
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1116759541421880/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    unravel2025
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T02:20:08.000Z" title="Wed Feb 04 2026 02:20:08 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    7
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æ ¸å¿ƒæ¦‚å¿µè§£æ</h2>
<h3 data-id="heading-1">ä»€ä¹ˆæ˜¯AutoreleasePoolï¼Ÿ</h3>
<p>AutoreleasePoolï¼ˆè‡ªåŠ¨é‡Šæ”¾æ± ï¼‰æ˜¯iOSå†…å­˜ç®¡ç†ä¸­çš„é‡è¦æœºåˆ¶ï¼Œå®ƒæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªå±€éƒ¨ä¸Šä¸‹æ–‡æˆ–å®¹å™¨ã€‚æ‰€æœ‰åœ¨è¿™ä¸ªå®¹å™¨å†…å®šä¹‰çš„å¯¹è±¡ï¼Œåœ¨å®¹å™¨é€€å‡ºä½œç”¨åŸŸæ—¶åº”è¯¥è¢«é‡Šæ”¾ã€‚å®ƒæ˜¯ä¸€ç§å»¶è¿Ÿé‡Šæ”¾ç­–ç•¥ï¼Œå…è®¸å¯¹è±¡åœ¨æ–¹æ³•è¿”å›åä»èƒ½è¢«ä½¿ç”¨ï¼Œè€Œä¸æ˜¯ç«‹å³é‡Šæ”¾ã€‚</p>
<p>åœ¨Swiftä¸­ï¼Œå°½ç®¡æˆ‘ä»¬ä½¿ç”¨ARCï¼ˆè‡ªåŠ¨å¼•ç”¨è®¡æ•°ï¼‰è‡ªåŠ¨ç®¡ç†å†…å­˜ï¼Œä½†autoreleasepoolå¹¶æœªæ¶ˆå¤±ã€‚ç¼–è¯‘å™¨ä¼šåœ¨åˆé€‚çš„ä½ç½®è‡ªåŠ¨æ’å…¥<code>retain</code>ã€<code>release</code>å’Œ<code>autorelease</code>è°ƒç”¨ï¼Œä½†autoreleasepoolæä¾›äº†ä¸€ç§æ‰‹åŠ¨æ§åˆ¶é‡Šæ”¾æ—¶æœºçš„æ‰‹æ®µã€‚</p>
<p>å…³é”®ç†è§£ç‚¹ï¼š</p>
<ul>
<li>AutoreleasePoolä¸ä¼šé˜»æ­¢å¯¹è±¡é‡Šæ”¾ï¼Œè€Œæ˜¯æ§åˆ¶é‡Šæ”¾çš„æ—¶æœº</li>
<li>å®ƒç®¡ç†çš„æ˜¯autoreleaseå¯¹è±¡ï¼ˆé€šè¿‡<code>autorelease</code>æ¶ˆæ¯æ ‡è®°çš„å¯¹è±¡ï¼‰</li>
<li>Swift nativeå¯¹è±¡é€šå¸¸ä¸æ˜¯autoreleaseå¯¹è±¡ï¼Œä½†Objective-Cå¯¹è±¡ï¼ˆåŒ…æ‹¬Cocoaæ¡†æ¶ç±»ï¼‰ä»ç„¶æ˜¯</li>
</ul>
<h3 data-id="heading-2">ä¸ºä»€ä¹ˆSwiftè¿˜éœ€è¦AutoreleasePoolï¼Ÿ</h3>
<ol>
<li>ä¸Objective-Cçš„äº’æ“ä½œæ€§ï¼šSwiftå®Œå…¨å…¼å®¹Objective-Cè¿è¡Œæ—¶ï¼Œå½“è°ƒç”¨Cocoaæ¡†æ¶æˆ–æ··åˆOCä»£ç æ—¶ï¼Œä¼šå¤„ç†å¤§é‡autoreleaseå¯¹è±¡</li>
<li>æ§åˆ¶å†…å­˜å³°å€¼ï¼šåœ¨å¤§é‡ä¸´æ—¶å¯¹è±¡åˆ›å»ºçš„åœºæ™¯ä¸‹ï¼Œé˜²æ­¢å†…å­˜æš´æ¶¨</li>
<li>å•å…ƒæµ‹è¯•å†…å­˜æ³„æ¼ï¼šéªŒè¯å¯¹è±¡æ˜¯å¦è¢«æ­£ç¡®é‡Šæ”¾</li>
</ol>
<h2 data-id="heading-3">å·¥ä½œåŸç†æ·±åº¦å‰–æ</h2>
<h3 data-id="heading-4">åº•å±‚å®ç°æœºåˆ¶</h3>
<p>AutoreleasePoolçš„åº•å±‚å®ç°åŸºäº<code>AutoreleasePoolPage</code>ç±»ï¼Œè¿™æ˜¯ä¸€ä¸ªæ ˆç»“æ„çš„å†…å­˜ç®¡ç†ç³»ç»Ÿï¼š</p>
<pre><code class="hljs language-objc" lang="objc"><span class="hljs-comment">// AutoreleasePoolPageçš„æ ¸å¿ƒç»“æ„ï¼ˆåŸºäºAppleå¼€æºä»£ç ï¼‰</span>
<span class="hljs-keyword">class</span> AutoreleasePoolPage {
    <span class="hljs-comment">// æˆå‘˜å˜é‡</span>
    magic_t <span class="hljs-keyword">const</span> magic;           <span class="hljs-comment">// é­”æ•°ï¼Œç”¨äºæ ¡éªŒ</span>
    <span class="hljs-type">id</span> *next;                      <span class="hljs-comment">// æŒ‡å‘ä¸‹ä¸€ä¸ªå¯å­˜å‚¨autoreleaseå¯¹è±¡çš„åœ°å€</span>
    pthread_t <span class="hljs-keyword">const</span> thread;        <span class="hljs-comment">// å½“å‰çº¿ç¨‹</span>
    AutoreleasePoolPage * <span class="hljs-keyword">const</span> parent;  <span class="hljs-comment">// ä¸Šä¸€ä¸ªpage</span>
    AutoreleasePoolPage *child;    <span class="hljs-comment">// ä¸‹ä¸€ä¸ªpage</span>
    uint32_t <span class="hljs-keyword">const</span> depth;          <span class="hljs-comment">// æ± æ·±åº¦</span>
    uint32_t hiwat;                <span class="hljs-comment">// é«˜æ°´ä½æ ‡è®°</span>
    
    <span class="hljs-comment">// æ ¸å¿ƒå‡½æ•°</span>
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">inline</span> <span class="hljs-type">id</span> autorelease(<span class="hljs-type">id</span> obj);  <span class="hljs-comment">// å°†å¯¹è±¡åŠ å…¥è‡ªåŠ¨é‡Šæ”¾æ± </span>
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">inline</span> <span class="hljs-type">void</span> *push();            <span class="hljs-comment">// åˆ›å»ºæ–°æ± è¾¹ç•Œ</span>
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">inline</span> <span class="hljs-type">void</span> pop(<span class="hljs-type">void</span> *token);   <span class="hljs-comment">// é‡Šæ”¾æ± å†…å¯¹è±¡</span>
}
</code></pre>
<p>å·¥ä½œæµç¨‹ï¼š</p>
<ol>
<li>Pushé˜¶æ®µï¼šè°ƒç”¨<code>autoreleasepool {}</code>æ—¶ï¼Œç³»ç»Ÿæ’å…¥ä¸€ä¸ª<code>POOL_BOUNDARY</code>ï¼ˆè¾¹ç•Œæ ‡è®°ï¼‰åˆ°å½“å‰page</li>
<li>æ·»åŠ å¯¹è±¡ï¼šè°ƒç”¨OCå¯¹è±¡çš„<code>autorelease</code>æ–¹æ³•æ—¶ï¼Œå¯¹è±¡æŒ‡é’ˆè¢«æ·»åŠ åˆ°pageçš„æ ˆä¸­</li>
<li>Popé˜¶æ®µï¼šä½œç”¨åŸŸç»“æŸæ—¶ï¼Œ<code>pop</code>å‡½æ•°ä»æ ˆé¡¶å‘ä¸‹é‡Šæ”¾å¯¹è±¡ï¼Œç›´åˆ°é‡åˆ°<code>POOL_BOUNDARY</code></li>
</ol>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// Swiftä¸­çš„autoreleasepoolå®é™…ä¸Šè°ƒç”¨äº†åº•å±‚Cå‡½æ•°</span>
autoreleasepool {
    <span class="hljs-comment">// ç­‰ä»·äºï¼švoid *token = objc_autoreleasePoolPush();</span>
    <span class="hljs-keyword">let</span> image <span class="hljs-operator">=</span> <span class="hljs-type">UIImage</span>(named: <span class="hljs-string">"example"</span>) <span class="hljs-comment">// å¯èƒ½äº§ç”Ÿautoreleaseå¯¹è±¡</span>
    <span class="hljs-comment">// ...</span>
} <span class="hljs-comment">// ç­‰ä»·äºï¼šobjc_autoreleasePoolPop(token);</span>
</code></pre>
<h3 data-id="heading-5">çº¿ç¨‹ä¸RunLoopçš„å…³ç³»</h3>
<ul>
<li>ä¸»çº¿ç¨‹ï¼šæ•´ä¸ªä¸»çº¿ç¨‹è¿è¡Œåœ¨è‡ªåŠ¨é‡Šæ”¾æ± ä¸­ï¼Œæ¯ä¸ªä¸»RunLoopç»“æŸæ—¶æ‰§è¡Œdrainæ“ä½œ</li>
<li>åå°çº¿ç¨‹ï¼šéœ€è¦æ‰‹åŠ¨åˆ›å»ºautoreleasepoolï¼Œå¦åˆ™å¯èƒ½é€ æˆå†…å­˜æ³„æ¼</li>
<li>GCDé˜Ÿåˆ—ï¼šç³»ç»Ÿç®¡ç†çš„å…¨å±€å¹¶å‘é˜Ÿåˆ—å·²ç»å†…ç½®autoreleasepoolï¼Œä½†è‡ªå®šä¹‰é˜Ÿåˆ—éœ€è¦æ‰‹åŠ¨å¤„ç†</li>
</ul>
<h2 data-id="heading-6">ä½¿ç”¨åœºæ™¯ä¸å®æˆ˜ç¤ºä¾‹</h2>
<h3 data-id="heading-7">å¾ªç¯ä¸­å¤§é‡åˆ›å»ºä¸´æ—¶å¯¹è±¡</h3>
<p>è¿™æ˜¯æœ€å…¸å‹çš„åº”ç”¨åœºæ™¯ï¼Œé˜²æ­¢å†…å­˜å³°å€¼è¿‡é«˜ï¼š</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// âŒ ä¸æ¨èï¼šå¯èƒ½å¯¼è‡´å†…å­˜æš´æ¶¨</span>
<span class="hljs-keyword">func</span> <span class="hljs-title function_">processLargeData</span>() {
    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-number">0</span><span class="hljs-operator">..&lt;</span><span class="hljs-number">10000</span> {
        <span class="hljs-keyword">let</span> data <span class="hljs-operator">=</span> <span class="hljs-type">Data</span>(repeating: <span class="hljs-type">UInt8</span>(i <span class="hljs-operator">%</span> <span class="hljs-number">256</span>), count: <span class="hljs-number">1024</span>)
        <span class="hljs-keyword">let</span> string <span class="hljs-operator">=</span> <span class="hljs-type">String</span>(data: data, encoding: .utf8)
        <span class="hljs-built_in">print</span>(string) <span class="hljs-comment">// æ‰“å°å¯èƒ½æ¶‰åŠOCå¯¹è±¡è½¬æ¢</span>
    }
}

<span class="hljs-comment">// âœ… æ¨èï¼šä½¿ç”¨autoreleasepoolåŠæ—¶é‡Šæ”¾</span>
<span class="hljs-keyword">func</span> <span class="hljs-title function_">processLargeDataOptimized</span>() {
    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-number">0</span><span class="hljs-operator">..&lt;</span><span class="hljs-number">10000</span> {
        autoreleasepool {
            <span class="hljs-comment">// æ¯æ¬¡å¾ªç¯ç»“æŸç«‹å³é‡Šæ”¾ä¸´æ—¶å¯¹è±¡</span>
            <span class="hljs-keyword">let</span> data <span class="hljs-operator">=</span> <span class="hljs-type">Data</span>(repeating: <span class="hljs-type">UInt8</span>(i <span class="hljs-operator">%</span> <span class="hljs-number">256</span>), count: <span class="hljs-number">1024</span>)
            <span class="hljs-keyword">let</span> string <span class="hljs-operator">=</span> <span class="hljs-type">String</span>(data: data, encoding: .utf8)
            <span class="hljs-built_in">print</span>(string) <span class="hljs-comment">// printå¯èƒ½åˆ›å»ºautoreleaseå­—ç¬¦ä¸²</span>
        }
    }
}
</code></pre>
<p>å†…å­˜å¯¹æ¯”ï¼š</p>
<ul>
<li>æ— autoreleasepoolï¼šå†…å­˜æŒç»­ç´¯ç§¯ï¼Œå³°å€¼å¯èƒ½è¾¾åˆ°æ•°ç™¾MB</li>
<li>æœ‰autoreleasepoolï¼šæ¯æ¬¡å¾ªç¯é‡Šæ”¾ï¼Œå†…å­˜ä¿æŒå¹³ç¨³åœ¨è¾ƒä½æ°´å¹³</li>
</ul>
<h3 data-id="heading-8">å›¾åƒå¤„ç†ä¸å¤§é‡IOæ“ä½œ</h3>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">func</span> <span class="hljs-title function_">resizeImages</span>(<span class="hljs-params">in</span> <span class="hljs-params">directory</span>: <span class="hljs-type">URL</span>, <span class="hljs-params">to</span> <span class="hljs-params">size</span>: <span class="hljs-type">CGSize</span>) {
    <span class="hljs-keyword">let</span> fileManager <span class="hljs-operator">=</span> <span class="hljs-type">FileManager</span>.default
    <span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> files <span class="hljs-operator">=</span> <span class="hljs-keyword">try?</span> fileManager.contentsOfDirectory(at: directory, includingPropertiesForKeys: <span class="hljs-literal">nil</span>) 
    <span class="hljs-keyword">else</span> { <span class="hljs-keyword">return</span> }
    
    <span class="hljs-keyword">for</span> fileURL <span class="hljs-keyword">in</span> files {
        autoreleasepool {
            <span class="hljs-comment">// å›¾åƒæ“ä½œäº§ç”Ÿå¤§é‡autoreleaseå¯¹è±¡</span>
            <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> image <span class="hljs-operator">=</span> <span class="hljs-type">UIImage</span>(contentsOfFile: fileURL.path),
               <span class="hljs-keyword">let</span> resized <span class="hljs-operator">=</span> resizeImage(image, to: size) {
                saveImage(resized, to: fileURL)
            }
            <span class="hljs-comment">// UIImageã€CGImageç­‰å¯¹è±¡åœ¨æ­¤å¤„è¢«é‡Šæ”¾</span>
        }
    }
}

<span class="hljs-comment">// è¾…åŠ©å‡½æ•°</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">resizeImage</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">image</span>: <span class="hljs-type">UIImage</span>, <span class="hljs-params">to</span> <span class="hljs-params">size</span>: <span class="hljs-type">CGSize</span>) -&gt; <span class="hljs-type">UIImage</span>? {
    <span class="hljs-type">UIGraphicsBeginImageContextWithOptions</span>(size, <span class="hljs-literal">false</span>, <span class="hljs-number">0.0</span>)
    <span class="hljs-keyword">defer</span> { <span class="hljs-type">UIGraphicsEndImageContext</span>() }
    image.draw(in: <span class="hljs-type">CGRect</span>(origin: .zero, size: size))
    <span class="hljs-keyword">return</span> <span class="hljs-type">UIGraphicsGetImageFromCurrentImageContext</span>()
}

<span class="hljs-keyword">private</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">saveImage</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">image</span>: <span class="hljs-type">UIImage</span>, <span class="hljs-params">to</span> <span class="hljs-params">url</span>: <span class="hljs-type">URL</span>) {
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> data <span class="hljs-operator">=</span> image.pngData() {
        <span class="hljs-keyword">try?</span> data.write(to: url)
    }
}
</code></pre>
<h3 data-id="heading-9">å•å…ƒæµ‹è¯•ä¸­éªŒè¯å†…å­˜æ³„æ¼</h3>
<p>è¿™æ˜¯autoreleasepoolåœ¨Swiftä¸­æœ€æœ‰ä»·å€¼çš„åº”ç”¨ä¹‹ä¸€ï¼š</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">import</span> XCTest

<span class="hljs-comment">// æ‰©å±•XCTestCaseä»¥æ£€æµ‹å¯¹è±¡é‡Šæ”¾</span>
<span class="hljs-keyword">extension</span> <span class="hljs-title class_">XCTestCase</span> {
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">assertDeallocation</span>&lt;<span class="hljs-type">T</span>: <span class="hljs-type">AnyObject</span>&gt;(<span class="hljs-params">of</span> <span class="hljs-params">objectFactory</span>: () -&gt; <span class="hljs-type">T</span>) {
        <span class="hljs-keyword">weak</span> <span class="hljs-keyword">var</span> weakReference: <span class="hljs-type">T</span>?
        <span class="hljs-keyword">let</span> expectation <span class="hljs-operator">=</span> <span class="hljs-keyword">self</span>.expectation(description: <span class="hljs-string">"Object should deallocate"</span>)
        
        autoreleasepool {
            <span class="hljs-keyword">let</span> object <span class="hljs-operator">=</span> objectFactory()
            weakReference <span class="hljs-operator">=</span> object
            <span class="hljs-type">XCTAssertNotNil</span>(weakReference, <span class="hljs-string">"å¯¹è±¡åº”è¯¥å­˜åœ¨"</span>)
            expectation.fulfill()
        }
        
        <span class="hljs-comment">// ç­‰å¾…autoreleasepoolæ’ç©ºåéªŒè¯</span>
        wait(for: [expectation], timeout: <span class="hljs-number">1.0</span>)
        
        <span class="hljs-comment">// å»¶è¿Ÿæ£€æŸ¥ç¡®ä¿é‡Šæ”¾å®Œæˆ</span>
        <span class="hljs-type">DispatchQueue</span>.main.asyncAfter(deadline: .now() <span class="hljs-operator">+</span> <span class="hljs-number">0.1</span>) {
            <span class="hljs-type">XCTAssertNil</span>(weakReference, <span class="hljs-string">"å¯¹è±¡åº”è¯¥è¢«é‡Šæ”¾ï¼Œå­˜åœ¨å†…å­˜æ³„æ¼"</span>)
        }
    }
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ViewControllerTests</span>: <span class="hljs-title class_">XCTestCase</span> {
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">testViewControllerDeallocation</span>() {
        assertDeallocation {
            <span class="hljs-keyword">let</span> storyboard <span class="hljs-operator">=</span> <span class="hljs-type">UIStoryboard</span>(name: <span class="hljs-string">"Main"</span>, bundle: <span class="hljs-literal">nil</span>)
            <span class="hljs-keyword">return</span> storyboard.instantiateViewController(withIdentifier: <span class="hljs-string">"TestVC"</span>)
        }
    }
    
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">testCustomObjectDeallocation</span>() {
        assertDeallocation {
            <span class="hljs-keyword">return</span> <span class="hljs-type">MyServiceManager</span>()
        }
    }
}

<span class="hljs-comment">// è‡ªå®šä¹‰ç±»æµ‹è¯•</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MyServiceManager</span> {
    <span class="hljs-keyword">init</span>() {
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"MyServiceManageråˆå§‹åŒ–"</span>)
    }
    
    <span class="hljs-keyword">deinit</span> {
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"MyServiceManagerè¢«é‡Šæ”¾äº†"</span>) <span class="hljs-comment">// åº”è¯¥è¢«æ‰“å°</span>
    }
}
</code></pre>
<h3 data-id="heading-10">å¤šçº¿ç¨‹ä¸GCD</h3>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// åœ¨è‡ªå®šä¹‰åå°é˜Ÿåˆ—ä¸­å¿…é¡»ä½¿ç”¨autoreleasepool</span>
<span class="hljs-keyword">func</span> <span class="hljs-title function_">processInBackground</span>() {
    <span class="hljs-keyword">let</span> queue <span class="hljs-operator">=</span> <span class="hljs-type">DispatchQueue</span>(label: <span class="hljs-string">"com.example.processing"</span>, attributes: .concurrent)
    
    queue.async {
        autoreleasepool {
            <span class="hljs-comment">// å¤§é‡æ•°æ®å¤„ç†</span>
            <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> largeDataSet {
                <span class="hljs-keyword">let</span> processed <span class="hljs-operator">=</span> <span class="hljs-keyword">self</span>.processItem(item)
                <span class="hljs-keyword">self</span>.saveToTempStorage(processed)
            }
            <span class="hljs-comment">// ç¡®ä¿ä¸´æ—¶å¯¹è±¡åœ¨çº¿ç¨‹ç»“æŸæ—¶é‡Šæ”¾</span>
        }
    }
}

<span class="hljs-comment">// ç³»ç»Ÿå…¨å±€é˜Ÿåˆ—å·²å†…ç½®autoreleasepoolï¼Œä½†æ˜¾å¼å£°æ˜æ›´å®‰å…¨</span>
<span class="hljs-keyword">func</span> <span class="hljs-title function_">processOnGlobalQueue</span>() {
    <span class="hljs-type">DispatchQueue</span>.global().async {
        autoreleasepool {
            <span class="hljs-keyword">let</span> strings <span class="hljs-operator">=</span> (<span class="hljs-number">0</span><span class="hljs-operator">..&lt;</span><span class="hljs-number">1000</span>).map { <span class="hljs-string">"Item-<span class="hljs-subst">\(<span class="hljs-variable">$0</span>)</span>"</span> }
            <span class="hljs-built_in">print</span>(strings.joined(separator: <span class="hljs-string">", "</span>))
        }
    }
}
</code></pre>
<h2 data-id="heading-11">æ·±å…¥åŸç†åˆ†æ</h2>
<h3 data-id="heading-12">AutoreleasePoolPageçš„å†…å­˜å¸ƒå±€</h3>
<p>AutoreleasePoolä½¿ç”¨åˆ†é¡µæ ˆç»“æ„ç®¡ç†å†…å­˜ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">Pageç»“æ„ï¼š
+-------------------+
|  magic            |
|  next (æŒ‡é’ˆ)       |
|  thread           |
|  parent           |
|  child            |
|  depth            |
|  hiwat            |
+-------------------+
|  å¯¹è±¡æŒ‡é’ˆæ ˆ        |
|  <span class="hljs-selector-attr">[0]</span> = POOL_BOUNDARY
|  <span class="hljs-selector-attr">[1]</span> = <span class="hljs-number">0</span>x600003f2a8c0 (å¯¹è±¡<span class="hljs-number">1</span>)
|  <span class="hljs-selector-attr">[2]</span> = <span class="hljs-number">0</span>x600003f2a8d0 (å¯¹è±¡<span class="hljs-number">2</span>)
|  ...              |
+-------------------+
</code></pre>
<p>å½“å½“å‰pageæ»¡æ—¶ï¼ˆé€šå¸¸ä¸º4096å­—èŠ‚ï¼‰ï¼Œä¼šåˆ›å»ºæ–°çš„pageå¹¶é“¾æ¥æˆåŒå‘é“¾è¡¨ã€‚<code>hotPage()</code>æ€»æ˜¯æŒ‡å‘æœ€æ–°pageï¼Œæ–°autoreleaseå¯¹è±¡è¿½åŠ åˆ°<code>next</code>æŒ‡é’ˆä½ç½®ã€‚</p>
<h3 data-id="heading-13">Popæ“ä½œçš„é‡Šæ”¾é€»è¾‘</h3>
<pre><code class="hljs language-c" lang="c"><span class="hljs-comment">// ä¼ªä»£ç ï¼špopå‡½æ•°çš„è¡Œä¸º</span>
<span class="hljs-type">void</span> <span class="hljs-title function_">pop</span><span class="hljs-params">(<span class="hljs-type">void</span> *token)</span> {
    AutoreleasePoolPage *page = pageForPointer(token);
    id *stop = (id *)token;
    
    <span class="hljs-comment">// ä»æ ˆé¡¶å‘ä¸‹é‡Šæ”¾ï¼Œç›´åˆ°é‡åˆ°token</span>
    <span class="hljs-keyword">while</span> (page-&gt;next &gt; stop) {
        id obj = *--page-&gt;next;
        <span class="hljs-keyword">if</span> (obj != POOL_BOUNDARY) {
            [obj release]; <span class="hljs-comment">// å®é™…é‡Šæ”¾å¯¹è±¡</span>
        }
    }
    
    <span class="hljs-comment">// æ¸…ç†ç©ºpage</span>
    <span class="hljs-keyword">if</span> (page-&gt;empty() &amp;&amp; page-&gt;child) {
        page-&gt;child-&gt;kill(); <span class="hljs-comment">// å›æ”¶å†…å­˜</span>
    }
}
</code></pre>
<p>å…³é”®ç†è§£ï¼šé‡Šæ”¾æ˜¯å•å‘çº¿æ€§çš„ï¼Œä»æœ€æ–°å¯¹è±¡å‘æ—§å¯¹è±¡é‡Šæ”¾ï¼Œç›´åˆ°è¾¹ç•Œæ ‡è®°ã€‚è¿™è§£é‡Šäº†ä¸ºä»€ä¹ˆautoreleasepoolèƒ½ç²¾ç¡®æ§åˆ¶ä½œç”¨åŸŸã€‚</p>
<h3 data-id="heading-14">æ€§èƒ½è€ƒé‡</h3>
<ul>
<li>æ— å¼€é”€ï¼šåœ¨æ²¡æœ‰autoreleaseå¯¹è±¡æ—¶ï¼Œautoreleasepoolå‡ ä¹æ²¡æœ‰æ€§èƒ½æŸå¤±</li>
<li>åŠæ—¶é‡Šæ”¾ï¼šé¿å…å†…å­˜ç§¯å‹ï¼Œå‡å°‘å³°å€¼å†…å­˜å ç”¨</li>
<li>ç¼“å­˜å‹å¥½ï¼šAutoreleasePoolPageç»“æ„ç´§å‡‘ï¼Œåˆ©ç”¨äº†CPUç¼“å­˜</li>
</ul>
<h2 data-id="heading-15">å¸¸è§è¯¯åŒºä¸æ³¨æ„äº‹é¡¹</h2>
<h3 data-id="heading-16">è¯¯åŒºä¸€ï¼šSwiftä¸­autoreleasepoolæ— ç”¨</h3>
<p>çœŸç›¸ï¼šè™½ç„¶Swift nativeå¯¹è±¡ä¸ä½¿ç”¨autoreleaseï¼Œä½†Cocoaæ¡†æ¶ï¼ˆUIKitã€Foundationï¼‰å¤§é‡ä½¿ç”¨ã€‚ä»»ä½•æ¶‰åŠ<code>NSString</code>ã€<code>NSData</code>ã€<code>UIImage</code>ç­‰ç±»çš„å¯†é›†æ“ä½œéƒ½å¯èƒ½éœ€è¦ã€‚</p>
<h3 data-id="heading-17">è¯¯åŒºäºŒï¼šautoreleasepoolè§£å†³å†…å­˜æ³„æ¼</h3>
<p>çœŸç›¸ï¼šautoreleasepoolä¸èƒ½è§£å†³çœŸæ­£çš„å†…å­˜æ³„æ¼ï¼ˆå¼ºå¼•ç”¨å¾ªç¯ï¼‰ã€‚å®ƒä»…æ§åˆ¶é‡Šæ”¾æ—¶æœºï¼Œä¸èƒ½é‡Šæ”¾è¢«å¼ºæŒæœ‰çš„å¯¹è±¡ã€‚</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// âŒ é”™è¯¯ç¤ºä¾‹ï¼šautoreleasepoolæ— æ³•è§£å†³å¾ªç¯å¼•ç”¨</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">A</span> {
    <span class="hljs-keyword">var</span> b: <span class="hljs-type">B</span>?
    <span class="hljs-keyword">deinit</span> { <span class="hljs-built_in">print</span>(<span class="hljs-string">"A deinit"</span>) }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">B</span> {
    <span class="hljs-keyword">var</span> a: <span class="hljs-type">A</span>?
    <span class="hljs-keyword">deinit</span> { <span class="hljs-built_in">print</span>(<span class="hljs-string">"B deinit"</span>) }
}

autoreleasepool {
    <span class="hljs-keyword">let</span> a <span class="hljs-operator">=</span> <span class="hljs-type">A</span>()
    <span class="hljs-keyword">let</span> b <span class="hljs-operator">=</span> <span class="hljs-type">B</span>()
    a.b <span class="hljs-operator">=</span> b
    b.a <span class="hljs-operator">=</span> a <span class="hljs-comment">// å¾ªç¯å¼•ç”¨ï¼</span>
} <span class="hljs-comment">// aå’Œbéƒ½ä¸ä¼šè¢«é‡Šæ”¾</span>
</code></pre>
<h3 data-id="heading-18">è¯¯åŒºä¸‰ï¼šè¿‡åº¦ä½¿ç”¨autoreleasepool</h3>
<p>ä¸å¿…è¦åœºæ™¯ï¼š</p>
<ul>
<li>å°‘é‡å¯¹è±¡çš„æ™®é€šå¾ªç¯</li>
<li>Swift value typeï¼ˆStructã€Enumï¼‰çš„æ“ä½œ</li>
<li>å·²ç»ç”±ç³»ç»Ÿç®¡ç†çš„ä»£ç å—ï¼ˆå¦‚UIViewåŠ¨ç”»ï¼‰</li>
</ul>
<h2 data-id="heading-19">è§è§£ä¸æœ€ä½³å®è·µ</h2>
<h3 data-id="heading-20">ä½¿ç”¨åŸåˆ™</h3>








































<table><thead><tr><th align="left">åœºæ™¯</th><th align="left">æ˜¯å¦éœ€è¦ <code>autoreleasepool</code></th><th align="left">åŸå› </th></tr></thead><tbody><tr><td align="left">å¾ªç¯ &gt;1000 æ¬¡åˆ›å»ºå¯¹è±¡</td><td align="left">âœ… å¼ºçƒˆæ¨è</td><td align="left">å¤§é‡ä¸´æ—¶ autorelease å¯¹è±¡ä¼šå †ç§¯ï¼Œç›´åˆ°å¾ªç¯ç»“æŸæ‰é‡Šæ”¾ï¼Œå®¹æ˜“å†²é«˜å†…å­˜å³°å€¼ã€‚åœ¨å¾ªç¯å†…ä½¿ç”¨ <code>@autoreleasepool {}</code> å¯åŠæ—¶é‡Šæ”¾ï¼Œé™ä½å³°å€¼ã€‚</td></tr><tr><td align="left">å›¾åƒ/è§†é¢‘æ‰¹é‡å¤„ç†</td><td align="left">âœ… å¿…é¡»</td><td align="left"><code>UIImage</code>/<code>NSData</code> ç­‰å¤§é‡ API è¿”å› autorelease å¯¹è±¡ã€‚è‹¥ä¸æ‰‹åŠ¨åŠ æ± ï¼Œæ‰€æœ‰å¯¹è±¡ä¼šç­‰åˆ° RunLoop æˆ–çº¿ç¨‹ç»“æŸæ—¶æ‰é‡Šæ”¾ï¼Œææ˜“å› å†…å­˜æš´æ¶¨è€Œè¢«ç³»ç»Ÿæ€è¿›ç¨‹ã€‚</td></tr><tr><td align="left">å•å…ƒæµ‹è¯•éªŒè¯ <code>deinit</code></td><td align="left">âœ… å¿…é¡»</td><td align="left">æµ‹è¯•æ¡†æ¶çš„é‡Šæ”¾æ—¶æœºä¸ç¡®å®šï¼Œå¯¹è±¡å¯èƒ½å»¶è¿Ÿåˆ°æµ‹è¯•ç»“æŸåæ‰é‡Šæ”¾ã€‚ä½¿ç”¨ <code>@autoreleasepool {}</code> åŒ…è£¹è¢«æµ‹ä»£ç ï¼Œå¯åœ¨æ–­è¨€å‰å¼ºåˆ¶æ’ç©ºæ± ï¼Œç¡®ä¿ <code>deinit</code> è¢«åŠæ—¶è°ƒç”¨ã€‚</td></tr><tr><td align="left">è‡ªå®šä¹‰åå°çº¿ç¨‹</td><td align="left">âœ… æ¨è</td><td align="left">å­çº¿ç¨‹é»˜è®¤æ²¡æœ‰ RunLoop è‡ªåŠ¨ç®¡ç† autoreleasepoolã€‚é•¿æ—¶é—´è¿è¡Œçš„çº¿ç¨‹è‹¥ä¸æ‰‹åŠ¨åˆ›å»ºï¼Œautorelease å¯¹è±¡ä¼šä¸€ç›´å †ç§¯ï¼Œé€ æˆå†…å­˜æ³„æ¼æˆ–å³°å€¼ã€‚æ¨èåœ¨çº¿ç¨‹å…¥å£å¤„ä½¿ç”¨ <code>@autoreleasepool {}</code> åŒ…è£¹ä»»åŠ¡ã€‚</td></tr><tr><td align="left">æ™®é€šä¸šåŠ¡é€»è¾‘</td><td align="left">âŒ ä¸éœ€è¦</td><td align="left">ä¸»çº¿ç¨‹ RunLoop ä¼šåœ¨æ¯ä¸ªäº‹ä»¶å¾ªç¯ç»“æŸæ—¶è‡ªåŠ¨åˆ›å»ºå’Œé‡Šæ”¾ autoreleasepoolã€‚æ™®é€šä¸šåŠ¡ä»£ç äº§ç”Ÿçš„ä¸´æ—¶å¯¹è±¡èƒ½åŠæ—¶å¾—åˆ°é‡Šæ”¾ï¼Œæ— éœ€é¢å¤–æ·»åŠ ã€‚</td></tr><tr><td align="left">Swift çº¯å€¼ç±»å‹æ“ä½œ</td><td align="left">âŒ å®Œå…¨ä¸éœ€è¦</td><td align="left">çº¯å€¼ç±»å‹ï¼ˆ<code>struct</code>/<code>enum</code>/<code>Int</code> ç­‰ï¼‰ä¸æ¶‰åŠ Objective-C çš„å¼•ç”¨è®¡æ•°å’Œ autorelease æœºåˆ¶ï¼Œå› æ­¤ <code>@autoreleasepool</code> å¯¹å…¶æ— æ•ˆä¹Ÿæ— å¿…è¦ã€‚</td></tr></tbody></table>
<h2 data-id="heading-21">æ€»ç»“</h2>
<p>AutoreleasePoolåœ¨Swiftä¸­æ˜¯ä¸€ä¸ªè¢«ä½ä¼°ä½†å¼ºå¤§çš„å·¥å…·ã€‚å®ƒä¸æ˜¯ARCçš„æ›¿ä»£å“ï¼Œè€Œæ˜¯è¡¥å……å’Œå¢å¼ºï¼š</p>
<ol>
<li>æ ¸å¿ƒä½œç”¨ï¼šæ§åˆ¶Objective-Cå¯¹è±¡çš„é‡Šæ”¾æ—¶æœºï¼Œé™ä½å†…å­˜å³°å€¼</li>
<li>ä¸‰å¤§åº”ç”¨åœºæ™¯ï¼šå¤§æ‰¹é‡æ•°æ®å¤„ç†ã€å•å…ƒæµ‹è¯•å†…å­˜éªŒè¯ã€åå°çº¿ç¨‹ç®¡ç†</li>
<li>æ€§èƒ½å½±å“ï¼šå‡ ä¹æ— å¼€é”€ï¼Œä½†èƒ½æ˜¾è‘—ä¼˜åŒ–å†…å­˜ä½¿ç”¨</li>
<li>æœªæ¥è¶‹åŠ¿ï¼šä»ä¼šé•¿æœŸå­˜åœ¨ï¼Œæ˜¯æ··åˆç¼–ç¨‹ç¯å¢ƒä¸­çš„é‡è¦å·¥å…·</li>
</ol>
<h2 data-id="heading-22">å‚è€ƒèµ„æ–™</h2>
<ol>
<li>Appleå®˜æ–¹æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.apple.com%2Flibrary%2Farchive%2Fdocumentation%2FCocoa%2FConceptual%2FMemoryMgmt%2FArticles%2FMemoryMgmt.html" target="_blank" title="https://developer.apple.com/library/archive/documentation/Cocoa/Conceptual/MemoryMgmt/Articles/MemoryMgmt.html" ref="nofollow noopener noreferrer">Advanced Memory Management Programming Guide</a></li>
<li>Swiftæºç : <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fswiftlang%2Fswift%2Fblob%2Fmain%2Fstdlib%2Fpublic%2Fcore%2FBridgeObjectiveC.swift" target="_blank" title="https://github.com/swiftlang/swift/blob/main/stdlib/public/core/BridgeObjectiveC.swift" ref="nofollow noopener noreferrer">Swift/stdlib/public/core/BridgeObjectiveC.swift</a> - autoreleasepoolå®ç°</li>
<li>Objective-Cè¿è¡Œæ—¶: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fapple-oss-distributions%2Fobjc4" target="_blank" title="https://github.com/apple-oss-distributions/objc4" ref="nofollow noopener noreferrer">objc4/runtime/NSObject.mm</a> - AutoreleasePoolPageå®ç°</li>
<li>Stack Overflow: <a href="https://link.juejin.cn?target=https%3A%2F%2Fstackoverflow.com%2Fquestions%2F25860942%2Fis-it-necessary-to-use-autoreleasepool-in-a-swift-program" target="_blank" title="https://stackoverflow.com/questions/25860942/is-it-necessary-to-use-autoreleasepool-in-a-swift-program" ref="nofollow noopener noreferrer">Is it necessary to use autoreleasepool in a Swift program?</a> - æ·±å…¥çš„æŠ€æœ¯è®¨è®º</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ–‡å¿ƒå¿«ç 2025æ–©è·å¤šé¡¹æƒå¨å¥–é¡¹ï¼Œå¼•é¢†è½¯ä»¶ç ”å‘æ™ºèƒ½å˜é©]]></title>    <link>https://juejin.cn/post/7602929352716943360</link>    <guid>https://juejin.cn/post/7602929352716943360</guid>    <pubDate>2026-02-05T07:52:42.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602929352716943360" data-draft-id="7602936997175066676" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ–‡å¿ƒå¿«ç 2025æ–©è·å¤šé¡¹æƒå¨å¥–é¡¹ï¼Œå¼•é¢†è½¯ä»¶ç ”å‘æ™ºèƒ½å˜é©"/> <meta itemprop="keywords" content="å‰ç«¯,ç¨‹åºå‘˜,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-02-05T07:52:42.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ–‡å¿ƒå¿«ç BaiduComate"/> <meta itemprop="url" content="https://juejin.cn/user/992209294070809"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ–‡å¿ƒå¿«ç 2025æ–©è·å¤šé¡¹æƒå¨å¥–é¡¹ï¼Œå¼•é¢†è½¯ä»¶ç ”å‘æ™ºèƒ½å˜é©
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/992209294070809/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ–‡å¿ƒå¿«ç BaiduComate
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-05T07:52:42.000Z" title="Thu Feb 05 2026 07:52:42 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-05
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨æ•°å­—åŒ–æµªæ½®ä¸äººå·¥æ™ºèƒ½æŠ€æœ¯æ·±åº¦èåˆçš„2025å¹´ï¼Œè¡Œä¸šçš„ç›®å…‰æ­£èšç„¦äºé‚£äº›ä»¥åˆ›æ–°é©±åŠ¨å˜é©ã€ä»¥å®è·µå®šä¹‰æœªæ¥çš„å…ˆé”‹åŠ›é‡ã€‚<strong>ç™¾åº¦æ–‡å¿ƒå¿«ç ï¼Œä½œä¸ºâ€œAI+è½¯ä»¶å·¥ç¨‹â€é¢†åŸŸçš„å¼€æ‹“è€…ä¸æ·±è€•è€…ï¼Œ</strong> å‡­å€Ÿä¸€ç³»åˆ—çªç ´æ€§çš„æŠ€æœ¯æˆæœä¸æ·±åº¦äº§ä¸šå®è·µï¼Œåœ¨2025å¹´æ”¶è·å¤šé¡¹é‡é‡çº§å¥–é¡¹ä¸æƒå¨è®¤å¯ã€‚</p>
<p><strong>å¸‚åœºè®¤å¯ç»´åº¦</strong>ï¼Œæ–‡å¿ƒå¿«ç ç»¼åˆå®åŠ›å¤‡å—é’çï¼Œå±¡è·æƒå¨è‚¯å®šï¼Œä»åœ¨IDCã€Šä¸­å›½å¸‚åœºä»£ç ç”Ÿæˆäº§å“è¯„ä¼°ã€‹ä¸­æ–©è·3é¡¹ç¬¬ä¸€ï¼Œåˆ°è£è†ºä¸­å›½è½¯ä»¶è¡Œä¸šåä¼šâ€œå¹´åº¦ä¼˜ç§€è½¯ä»¶äº§å“â€ï¼Œè¯æ˜äº†Comateä½œä¸ºä¼ä¸šçº§ç”Ÿäº§å·¥å…·çš„æˆç†Ÿã€å¯é ï¼›</p>
<p><strong>æŠ€æœ¯æ ‡å‡†ç»´åº¦ï¼Œ</strong> æ–‡å¿ƒå¿«ç ç§¯æå¼•é¢†æŠ€æœ¯æ ‡å‡†è§„èŒƒï¼Œå‚ä¸ç¼–åˆ¶äº†ã€Šé¢å‘è½¯ä»¶å·¥ç¨‹æ™ºèƒ½ä½“çš„æŠ€æœ¯å’Œåº”ç”¨è¦æ±‚ ç¬¬1éƒ¨åˆ†ï¼šå¼€å‘æ™ºèƒ½ä½“ã€‹è¿™ä¸€è¡Œä¸šé¦–ä¸ªæ™ºèƒ½ä½“æŠ€æœ¯æ ‡å‡†ï¼Œå¹¶è”åˆäººå·¥æ™ºèƒ½å…³é”®æŠ€æœ¯å’Œåº”ç”¨è¯„æµ‹é‡ç‚¹å®éªŒå®¤ï¼Œå…±åŒç¼–å†™äº†ã€Šé¢å‘è½¯ä»¶å·¥ç¨‹æ™ºèƒ½ä½“çš„æŠ€æœ¯å’Œåº”ç”¨è¦æ±‚ ç¬¬ä¸€éƒ¨åˆ†ï¼šå¼€å‘æ™ºèƒ½ä½“ã€‹æ–‡çŒ®ï¼Œä¸ºâ€œAI+è½¯ä»¶å·¥ç¨‹â€çš„æ ‡å‡†åŒ–å‘å±•è´¡çŒ®äº†æ ¸å¿ƒåŠ›é‡ï¼›</p>
<p><strong>åœ¨äº§ä¸šå®è·µä¸­ï¼Œ</strong> æ–‡å¿ƒå¿«ç ç›´å‡»ç”¨æˆ·ç—›ç‚¹ï¼Œå…ˆååœ¨AIIAã€æœè´¸ä¼šã€AiDDå³°ä¼šã€ITæ–°æ²»ç†é¢†å¯¼åŠ›è®ºå›ç­‰è¡Œä¸šå³°ä¼šçš„é‡é‡çº§è¯„é€‰ä¸­ï¼Œåˆ†åˆ«å›Šè·2025å¹´åå¤§AI4SEâ€œé“¶å¼¹â€æ ‡æ†æ¡ˆä¾‹ã€â€œæ•°æ™ºå½±å“åŠ›â€å…ˆé”‹æ¡ˆä¾‹ã€AI+ç ”å‘å·¥å…·å…ˆé”‹å¥–ã€2025XOpsåˆ›æ–°å®è·µå¥–ç­‰é‡é‡çº§å¥–é¡¹ï¼Œå°è¯äº†æ–‡å¿ƒå¿«ç åœ¨çœŸå®ä¸šåŠ¡åœºæ™¯ä¸­è§£å†³å¤æ‚ç ”å‘éš¾é¢˜ã€æ¨åŠ¨å…¨æµç¨‹æ•ˆèƒ½å˜é©çš„è½åœ°å®æˆ˜èƒ½åŠ›ï¼›</p>
<p><strong>é¢å‘ç¤¾ä¼šä»·å€¼</strong>ï¼Œæ–‡å¿ƒå¿«ç è‡´åŠ›äºè·µè¡Œç§‘æŠ€å‘å–„ï¼Œè½å®æŠ€æœ¯æ™®æƒ ï¼Œè·å¾—äº†å¯åŠä¿¡æ¯æ— éšœç¢ä¼˜ç§€æ¡ˆä¾‹å’Œç™¾åº¦é«˜ä»·å€¼ä¸“åˆ©å¥–ï¼Œä½“ç°äº†æŠ€æœ¯æ¸©åº¦ä¸ä¼ä¸šæˆ˜ç•¥çš„ç»Ÿä¸€ã€‚</p>
<p>æ–‡å¿ƒå¿«ç æ–©è·çš„å¤šç»´åº¦é‡ç£…è£èª‰ï¼Œä¸ä»…æ˜¯å¯¹å…¶è¿‡å»ä¸€å¹´åœ¨å„æ–¹é¢æˆå°±çš„é›†ä¸­è‚¯å®šï¼Œæ›´æ˜¯æ–‡å¿ƒå¿«ç ä½œä¸ºâ€œAI+è½¯ä»¶å·¥ç¨‹â€å¼€æ‹“è€…ä¸æ·±è€•è€…çš„æœ€ä½³æ³¨è„šã€‚</p>
<h2 data-id="heading-0">ä¸€ã€å¸‚åœºè®¤å¯â€”â€”å®åŠ›å¤‡å—é’çï¼Œå±¡è·æƒå¨è‚¯å®š</h2>
<h3 data-id="heading-1">1.IDCã€Šä¸­å›½å¸‚åœºä»£ç ç”Ÿæˆäº§å“è¯„ä¼°ã€‹3é¡¹ç¬¬ä¸€</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5896947ff24e4e2ea4f4e0cf477888c3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paH5b-D5b-r56CBQmFpZHVDb21hdGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770883054&amp;x-signature=YLSJLWgf62WEstNw3tfCi3%2Bywcw%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c358eed698e54ae887a078c488fb36da~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paH5b-D5b-r56CBQmFpZHVDb21hdGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770883054&amp;x-signature=%2FGQk%2Fv7YCFgDnUrHUcpbAAZNWqI%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>2025å¹´6æœˆï¼Œå›½é™…æƒå¨è¯„æµ‹æœºæ„IDCæ­£å¼å‘å¸ƒäº†ã€Šä¸­å›½å¸‚åœºä»£ç ç”Ÿæˆäº§å“è¯„ä¼°ã€‹ï¼Œå›½å†…å¸‚åœº10å®¶å¤´éƒ¨ä»£ç ç”Ÿæˆå¤´éƒ¨äº§å“å‚è¯„ã€‚<strong>åœ¨æœ¬æ¬¡è¯„ä¼°ä¸­ï¼Œç™¾åº¦æ™ºèƒ½ä»£ç åŠ©æ‰‹æ–‡å¿ƒå¿«ç è„±é¢–è€Œå‡ºï¼Œæ–©è·3é¡¹ç¬¬ä¸€ï¼š</strong></p>
<ul>
<li>åœ¨æ¶‰åŠçš„9é¡¹è¯„åˆ†ç»´åº¦ä¸­è¾¾æˆ8é¡¹æ»¡åˆ†ï¼Œæ»¡åˆ†ç»´åº¦æ•°é‡ç¬¬ä¸€</li>
<li>C++äº§å“èƒ½åŠ›å®æµ‹æ€»åˆ†ç¬¬ä¸€</li>
<li>â€œæ ¸å¿ƒä»£ç å®ç°â€ï¼ˆå³ä»£ç è´¨é‡ï¼‰æ€»åˆ†æ•°æ’åç¬¬ä¸€</li>
</ul>
<h3 data-id="heading-2">2.ä¸­å›½è½¯ä»¶è¡Œä¸šåä¼šâ€œ2025å¹´åº¦ä¼˜ç§€è½¯ä»¶äº§å“â€</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6b9163e412394bb2bb66eeaf0c53839c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paH5b-D5b-r56CBQmFpZHVDb21hdGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770883054&amp;x-signature=FD3SYRPFqIzqY5%2FTB1DF5ifgUPY%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>2025å¹´9æœˆï¼Œä¸­å›½è½¯ä»¶è¡Œä¸šåä¼šæ­æ™“â€œ2025å¹´åº¦ä¼˜ç§€è½¯ä»¶äº§å“â€è¯„é€‰ç»“æœã€‚<strong>ç™¾åº¦æ™ºèƒ½ä»£ç åŠ©æ‰‹æ–‡å¿ƒå¿«ç å‡­å€Ÿåœ¨AIèµ‹èƒ½ç ”å‘é¢†åŸŸçš„æŒç»­çªç ´ä¸åˆ›æ–°ï¼ŒæˆåŠŸæ‘˜å¾—è¿™ä¸€è£èª‰ã€‚</strong></p>
<p><strong>æœ¬æ¬¡è¯„é€‰ä»¥è½¯ä»¶çš„è‡ªä¸»çŸ¥è¯†äº§æƒã€å•†å“åŒ–ç¨‹åº¦ã€æŠ€æœ¯æ°´å¹³ã€ç¨³å®šæ€§ã€å¯é æ€§ã€ç”¨æˆ·æ»¡æ„åº¦ç­‰ä½œä¸ºä¸»è¦è€ƒè¯„æŒ‡æ ‡ã€‚æ–‡å¿ƒå¿«ç è·è¯„â€œä¼˜ç§€è½¯ä»¶äº§å“â€ï¼Œè¯æ˜äº†å…¶é¢†èˆªAIç¼–ç æ–°æ—¶ä»£çš„æ ‡æ†æ¨¡èŒƒä½œç”¨ã€‚</strong></p>
<h2 data-id="heading-3">äºŒã€æŠ€æœ¯æ ‡å‡†â€”â€”å¼•é¢†æŠ€æœ¯å®è·µã€å…±å»ºæ ‡å‡†è§„èŒƒ</h2>
<h3 data-id="heading-4">3.å‚ç¼–ã€Šé¢å‘è½¯ä»¶å·¥ç¨‹æ™ºèƒ½ä½“çš„æŠ€æœ¯å’Œåº”ç”¨è¦æ±‚ã€‹</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5bfbb5d53c6b4533bd668c3717b5a04f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paH5b-D5b-r56CBQmFpZHVDb21hdGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770883054&amp;x-signature=fPYMQzwAd8WbNj9nSnqyBNC2y9M%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6eed005f07f5487685e9292e6b3db62b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paH5b-D5b-r56CBQmFpZHVDb21hdGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770883054&amp;x-signature=8%2BbW5b1ugIZVfR1yesWSlg7z1Io%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>2025å¹´5æœˆ30æ—¥ï¼Œä¸­å›½ä¿¡æ¯é€šä¿¡ç ”ç©¶é™¢ï¼ˆç®€ç§°â€œä¸­å›½ä¿¡é€šé™¢â€ï¼‰ä¸ä¸­å›½å·¥å•†é“¶è¡Œã€åŒ—äº¬å…´äº‘æ•°ç§‘æŠ€æœ¯æœ‰é™å…¬å¸ã€<strong>åŒ—äº¬ç™¾åº¦ç½‘è®¯ç§‘æŠ€æœ‰é™å…¬å¸</strong>ç‰µå¤´ï¼Œè”åˆå†œä¸šé“¶è¡Œã€é‚®å‚¨é“¶è¡Œã€ç§‘å¤§è®¯é£ã€è…¾è®¯ã€é˜¿é‡Œã€åä¸ºç­‰äºŒåä½™å®¶å¤´éƒ¨ä¼ä¸šï¼Œå…±åŒç¼–åˆ¶å¹¶æ­£å¼å‘å¸ƒäº† <strong>ã€Šé¢å‘è½¯ä»¶å·¥ç¨‹æ™ºèƒ½ä½“çš„æŠ€æœ¯å’Œåº”ç”¨è¦æ±‚ ç¬¬1éƒ¨åˆ†ï¼šå¼€å‘æ™ºèƒ½ä½“ã€‹</strong> ï¼ˆæŠ€æœ¯è§„èŒƒç¼–å·AIIA/T 0219-2025ï¼‰ã€‚</p>
<p>è¯¥æ ‡å‡†çš„å‘å¸ƒæ ‡å¿—ç€æˆ‘å›½åœ¨AI æ™ºèƒ½ä½“é¢†åŸŸçš„æ ‡å‡†åŒ–è¿›ç¨‹è¿ˆå‡ºå…³é”®ä¸€æ­¥ï¼Œä¸ºä¼ä¸šå¼€å‘æ™ºèƒ½ä½“æä¾›èƒ½åŠ›å»ºè®¾æŒ‡å¯¼ï¼ŒåŠ©åŠ›äº§å“å¿«é€Ÿè¿­ä»£ï¼ŒåŒæ—¶ä¸ºä¼ä¸šæä¾›æŠ€æœ¯é€‰å‹å‚è€ƒï¼Œæ¨åŠ¨å¼€å‘æ™ºèƒ½ä½“çš„è½åœ°åº”ç”¨ã€‚</p>
<h3 data-id="heading-5">4.åˆä½œäººå·¥æ™ºèƒ½å…³é”®æŠ€æœ¯å’Œåº”ç”¨è¯„æµ‹é‡ç‚¹å®éªŒå®¤ç¼–å†™æ–‡çŒ®</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b15f6307b26c46ccad76af3630b71282~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paH5b-D5b-r56CBQmFpZHVDb21hdGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770883054&amp;x-signature=O1pBl7cjJ0Zw2ARVg2vRYJqD8jc%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>ç”±ç™¾åº¦ç‰µå¤´ï¼Œè”åˆäººå·¥æ™ºèƒ½å…³é”®æŠ€æœ¯å’Œåº”ç”¨è¯„æµ‹é‡ç‚¹å®éªŒå®¤ï¼Œå…±åŒç¼–å†™äº†ã€Šé¢å‘è½¯ä»¶å·¥ç¨‹æ™ºèƒ½ä½“çš„æŠ€æœ¯å’Œåº”ç”¨è¦æ±‚ ç¬¬ä¸€éƒ¨åˆ†ï¼šå¼€å‘æ™ºèƒ½ä½“ã€‹ã€‚è¿™æ ‡å¿—ç€ç™¾åº¦åœ¨â€œAI+è½¯ä»¶å·¥ç¨‹â€é¢†åŸŸçš„æŠ€æœ¯ç§¯ç´¯å’Œäº§ä¸šæ´å¯Ÿå·²ä¸Šå‡è‡³è¡Œä¸šè§„èŒƒåˆ¶å®šå±‚é¢ï¼Œä¸ºè½¯ä»¶å¼€å‘æ™ºèƒ½ä½“çš„æŠ€æœ¯èƒ½åŠ›ã€åº”ç”¨åœºæ™¯åŠè¯„ä»·ä½“ç³»å»ºç«‹äº†æƒå¨å‚è€ƒæ¡†æ¶ã€‚</p>
<h2 data-id="heading-6">ä¸‰ã€äº§ä¸šå®è·µâ€”â€”ç›´å‡»ç”¨æˆ·ç—›ç‚¹ï¼Œé©±åŠ¨æ•ˆèƒ½è·ƒå‡</h2>
<h3 data-id="heading-7">5.AIIA 2025å¹´åå¤§AI4SEâ€œé“¶å¼¹â€æ ‡æ†æ¡ˆä¾‹</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c2897c159fe9401b93a73c7c7497b604~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paH5b-D5b-r56CBQmFpZHVDb21hdGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770883054&amp;x-signature=h92AZNdZ8H73LEwXgUrcu%2BdWSh4%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>2025å¹´9æœˆï¼Œä¸­å›½äººå·¥æ™ºèƒ½äº§ä¸šå‘å±•è”ç›Ÿï¼ˆAIIAï¼‰åœ¨ä¸­å›½å›½é™…æœåŠ¡è´¸æ˜“äº¤æ˜“ä¼š â€œå¤§æ¨¡å‹é©±åŠ¨ä¼ä¸šæ•°æ™ºåŒ–è½¬å‹è®ºå›â€ ä¸Šå…¬å¸ƒ 2025å¹´åå¤§äººå·¥æ™ºèƒ½AI4SEâ€œé“¶å¼¹â€æ ‡æ†æ¡ˆä¾‹ã€‚â€œ<strong>ç™¾åº¦åŸºäºç¼–ç æ™ºèƒ½ä½“Zuluçš„ææ•ˆå®è·µâ€æˆåŠŸå…¥é€‰ã€‚</strong> AI4SEâ€œé“¶å¼¹â€æ¡ˆä¾‹æ—¨åœ¨å‘æ˜å’Œæ¨å¹¿èƒ½å¤Ÿæ˜¾è‘—æå‡è½¯ä»¶ç ”å‘æ•ˆç‡ä¸è´¨é‡çš„å…¸å‹è½åœ°å®è·µã€‚<strong>æ–‡å¿ƒå¿«ç çš„å…¥é€‰ä½“ç°äº†å…¶åœ¨æ¨åŠ¨AIèµ‹èƒ½è½¯ä»¶å·¥ç¨‹é¢†åŸŸçš„æŒç»­çªç ´ä¸é¢†å…ˆå®åŠ›ã€‚</strong></p>
<h3 data-id="heading-8">6.2025æœè´¸ä¼šâ€œæ•°æ™ºå½±å“åŠ›â€å…ˆé”‹æ¡ˆä¾‹</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/59ac6e1f5f564179858c5f6423c72fb8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paH5b-D5b-r56CBQmFpZHVDb21hdGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770883054&amp;x-signature=K3WOtx5Rju0%2FVafutT54N56o1xw%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>2025å¹´9æœˆï¼Œåœ¨2025ä¸­å›½å›½é™…æœåŠ¡è´¸æ˜“äº¤æ˜“ä¼šâ€œå¤§æ¨¡å‹é©±åŠ¨ä¼ä¸šæ•°æ™ºåŒ–è½¬å‹è®ºå›â€ä¸Šï¼Œâ€œ<strong>ç™¾åº¦æ™ºèƒ½ä»£ç åŠ©æ‰‹â€”â€”æ–‡å¿ƒå¿«ç çš„ææ•ˆå®è·µâ€å…¥é€‰â€œæ•°æ™ºå½±å“åŠ›â€å…ˆé”‹æ¡ˆä¾‹ã€‚</strong> æ ‡å¿—ç€å…¶åœ¨æ¨åŠ¨è½¯ä»¶å¼€å‘äº§ä¸šæ™ºèƒ½åŒ–è½¬å‹æ–¹é¢çš„å“è¶Šæˆæœè·å¾—äº†å…¨çƒæœåŠ¡è´¸æ˜“é¢†åŸŸçš„é«˜åº¦è®¤å¯ã€‚</p>
<h3 data-id="heading-9">7.AI+ç ”å‘å·¥å…·å…ˆé”‹å¥–</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f87279a391094c01b6d4eeee34e72f99~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paH5b-D5b-r56CBQmFpZHVDb21hdGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770883054&amp;x-signature=KJPZjKQ58vUVZuBZCenJ3B2JIIw%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>2025å¹´12æœˆï¼Œåœ¨AiDDå³°ä¼šï¼ˆå…¨çƒè½¯ä»¶å¼€å‘å¤§ä¼šï¼‰ä¸Šï¼Œç™¾åº¦æ–‡å¿ƒå¿«ç å‡­å€Ÿå…¶åœ¨AI+ç ”å‘é¢†åŸŸçš„çªç ´æ€§è´¡çŒ®ï¼Œ<strong>è£è†ºç»„å§”ä¼šé¢å‘çš„â€œAI+ç ”å‘å·¥å…·å…ˆé”‹å¥–â€ã€‚</strong> ä½œä¸ºâ€œAI+ç ”å‘â€èµ›é“çš„å¼€æ‹“è€…ï¼Œæ–‡å¿ƒå¿«ç æ™ºèƒ½ç ”å‘è§£å†³æ–¹æ¡ˆï¼Œæ¨åŠ¨äº†è¡Œä¸šå‘æ™ºèƒ½åŒ–ã€è‡ªåŠ¨åŒ–ç ”å‘æ¨¡å¼çš„ç³»ç»Ÿæ€§æ¼”è¿›ï¼Œ<strong>å±•ç°äº†ç™¾åº¦åœ¨AIèµ‹èƒ½äº§ä¸šå‡çº§æ–¹é¢çš„æŠ€æœ¯å®åŠ›ä¸ç”Ÿæ€å½±å“åŠ›ã€‚</strong></p>
<h3 data-id="heading-10">8.2025XOpsåˆ›æ–°å®è·µå¥–</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/36d6f23592674acd8450e01725edd1fd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paH5b-D5b-r56CBQmFpZHVDb21hdGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770883054&amp;x-signature=TaaAVDs28yPrcOIBdfPFvkSz8Fo%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>åœ¨ç¬¬å…­å±ŠITæ–°æ²»ç†é¢†å¯¼åŠ›è®ºå›ï¼Œç™¾åº¦æ–‡å¿ƒå¿«ç <strong>å‡­å€Ÿå…¶å¼€åˆ›æ€§çš„â€œæ™ºèƒ½ä½“äººæœºååŒç ”å‘æ–°èŒƒå¼â€å®è·µï¼Œè£è·â€œ2025 XOpsåˆ›æ–°å®è·µâ€å¥–ã€‚</strong> æ–‡å¿ƒå¿«ç ä»¥å…¶æ™ºèƒ½ä½“ä¸ºæ ¸å¿ƒï¼Œæ„å»ºäº†é«˜æ•ˆçš„äººæœºååŒä½“ç³»ï¼Œæ˜¾è‘—æå‡äº†ä»£ç ç”Ÿæˆã€æµ‹è¯•ã€è¿ç»´çš„è‡ªåŠ¨åŒ–å’Œæ™ºèƒ½åŒ–æ°´å¹³ã€‚</p>
<h2 data-id="heading-11">å››ã€ç¤¾ä¼šä»·å€¼ä¸ä¼ä¸šæˆ˜ç•¥â€”â€”è·µè¡Œç§‘æŠ€å‘å–„ï¼Œè½å®æŠ€æœ¯æ™®æƒ </h2>
<h3 data-id="heading-12">9.å¯åŠä¿¡æ¯æ— éšœç¢ä¼˜ç§€æ¡ˆä¾‹</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/351e01ed3bc74ccc9b324bedb1e7ff2a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paH5b-D5b-r56CBQmFpZHVDb21hdGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770883054&amp;x-signature=y4860hrUM26HgY50Ix0DMyXQuMY%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>åœ¨2025å¹´ä¿¡æ¯æ— éšœç¢é¢†åŸŸè¯„é€‰ä¸­ï¼Œç™¾åº¦æ–‡å¿ƒå¿«ç æ— éšœç¢é€‚é…ç‰ˆ<strong>å‡­å€Ÿå…¶åˆ›æ–°çš„æŠ€æœ¯ç†å¿µä¸åˆ‡å®çš„ç¤¾ä¼šä»·å€¼ï¼Œè£è†ºâ€œå¯åŠä¿¡æ¯æ— éšœç¢ä¼˜ç§€æ¡ˆä¾‹â€å¥–é¡¹ã€‚</strong> æ–‡å¿ƒå¿«ç ä»¥AIæŠ€æœ¯å¼¥åˆæ•°å­—é¸¿æ²Ÿï¼Œä¸ä»…ä½“ç°äº†ç™¾åº¦ <strong>â€œç”¨ç§‘æŠ€è®©å¤æ‚çš„ç¤¾ä¼šæ›´ç®€å•â€</strong> çš„ç¤¾ä¼šè´£ä»»æ‹…å½“ï¼Œæ›´ä¸ºæ¨åŠ¨ç ”å‘å·¥å…·æ™®æƒ åŒ–ã€æ„å»ºåŒ…å®¹æ€§æ•°å­—ç”Ÿæ€æ ‘ç«‹äº†è¡Œä¸šæ ‡æ†ã€‚</p>
<h3 data-id="heading-13">10.2025ç™¾åº¦é«˜ä»·å€¼ä¸“åˆ©å¥–</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d7ebd3642d7d4e0c97ef7cbb0ae4da38~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paH5b-D5b-r56CBQmFpZHVDb21hdGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770883054&amp;x-signature=tRSlb37sTdK5N7GVIyIr%2FofpZzI%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>2025å¹´ï¼Œ<strong>å‡­å€Ÿæ ¸å¿ƒæŠ€æœ¯æˆæœâ€œäº‘ç«¯ä»£ç å¼€å‘ç³»ç»Ÿã€æ–¹æ³•ã€è£…ç½®ã€è®¾å¤‡åŠå‚¨å­˜ä»‹è´¨â€ï¼Œè£è·â€œç™¾åº¦é«˜ä»·å€¼ä¸“åˆ©å¥–â€ã€‚</strong> è¯¥å¥–é¡¹ä½“ç°äº†ç™¾åº¦åœ¨AIå¼€å‘å·¥å…·é¢†åŸŸæŒç»­æŠ•å…¥æ‰€å½¢æˆçš„æŠ€æœ¯å£å’ä¸çŸ¥è¯†äº§æƒä¼˜åŠ¿ã€‚</p>
<h2 data-id="heading-14">å¯„è¯­</h2>
<p>è£è€€å±äºè¿‡å»ï¼Œå¥‹æ–—å®šä¹‰æœªæ¥ã€‚æ„Ÿæ©2025å¹´æ¥è‡ªè¡Œä¸šã€æœºæ„çš„æ¯ä¸€ä»½è®¤å¯ä¸ä¿¡èµ–ï¼Œè¿™ä¸ä»…æ˜¯æ–‡å¿ƒå¿«ç å‰è¡Œè·¯ä¸Šçš„ç’€ç’¨æ³¨è„šï¼Œæ›´æ˜¯æˆ‘ä»¬è‚©è´Ÿçš„è´£ä»»ä¸æœŸè®¸ã€‚è¿ˆå‘2026ï¼Œæˆ‘ä»¬å°†ç»§ç»­ä»¥åˆ›æ–°ä¸ºç‚¬ï¼Œç»§ç»­æ·±è€•â€œAI+è½¯ä»¶å·¥ç¨‹â€çš„æŠ€æœ¯æ·±æ°´åŒºï¼Œä¸æ–­çªç ´æ™ºèƒ½ç ”å‘çš„æ•ˆèƒ½è¾¹ç•Œã€‚æ–‡å¿ƒå¿«ç å°†ä»¥æ›´åšå®çš„æŠ€æœ¯ã€æ›´å¼€æ”¾çš„ç”Ÿæ€ï¼Œå›é¦ˆæ¯ä¸€ä»½æ”¯æŒï¼Œä¸è¡Œä¸šå¹¶è‚©åŒè¡Œï¼Œå…±åŒè¿æ¥è½¯ä»¶å¼€å‘æ™ºèƒ½åŒ–å˜é©çš„æ˜Ÿè¾°å¤§æµ·ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Windows ä¹Ÿèƒ½è·‘ OpenClawï¼æœ€å®Œæ•´å®‰è£…æ•™ç¨‹ + é£ä¹¦æ¥å…¥ï¼Œå…¨ç¨‹é¿å‘]]></title>    <link>https://juejin.cn/post/7603142147642196011</link>    <guid>https://juejin.cn/post/7603142147642196011</guid>    <pubDate>2026-02-05T07:58:42.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603142147642196011" data-draft-id="7603030564837392438" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Windows ä¹Ÿèƒ½è·‘ OpenClawï¼æœ€å®Œæ•´å®‰è£…æ•™ç¨‹ + é£ä¹¦æ¥å…¥ï¼Œå…¨ç¨‹é¿å‘"/> <meta itemprop="keywords" content="ç¨‹åºå‘˜,AIGC,AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2026-02-05T07:58:42.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åˆ«æƒ¹CC"/> <meta itemprop="url" content="https://juejin.cn/user/4095037267779687"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Windows ä¹Ÿèƒ½è·‘ OpenClawï¼æœ€å®Œæ•´å®‰è£…æ•™ç¨‹ + é£ä¹¦æ¥å…¥ï¼Œå…¨ç¨‹é¿å‘
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4095037267779687/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åˆ«æƒ¹CC
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-05T07:58:42.000Z" title="Thu Feb 05 2026 07:58:42 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-05
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>âš ï¸ å°è´´å£«ï¼šåœ¨å¼€å§‹ä¹‹å‰ï¼Œæœ‰ä¸€ä¸ªéå¸¸é‡è¦çš„æé†’ï¼šç”±äºæ­¤ç±»å·¥å…·æ¶‰åŠè‡ªåŠ¨åŒ–æ“ä½œå’Œç¯å¢ƒé…ç½®ï¼Œå¦‚æœä½ çš„ç”µè„‘å­˜æœ‰é‡è¦çš„å•†ä¸š/èµ„äº§æˆ–ä¸ªäººéšç§ä¿¡æ¯ï¼Œ<strong>å¼ºçƒˆå»ºè®®å¼„ä¸€å°å¹²å‡€çš„å¤‡ç”¨è®¾å¤‡ï¼Œæˆ–è€…ç›´æ¥ç§Ÿç”¨ä¸€ä¸ªäº‘ç«¯è™šæ‹Ÿæœºï¼ˆVPSï¼‰æ¥è¿è¡Œã€‚</strong> è¿™æ ·æ—¢èƒ½ä¿æŠ¤éšç§ï¼Œä¹Ÿèƒ½é¿å…ç¯å¢ƒå†²çªã€‚</p>
</blockquote>
<p>æœ€è¿‘ <strong>OpenClaw</strong> çƒ­åº¦å¾ˆé«˜ï¼Œä½†å®˜æ–¹å¯¹ <strong>Windows åŸç”Ÿç¯å¢ƒ</strong>å¹¶ä¸ç®—å‹å¥½ï¼Œå¾ˆå¤šäººä¼šå¡åœ¨ Node ç¯å¢ƒã€æƒé™ã€è·¯å¾„ã€æ’ä»¶å®‰è£…ç­‰é—®é¢˜ä¸Šã€‚ä¸‹é¢æˆ‘æŠŠè‡ªå·±å®Œæ•´è·‘é€šçš„æµç¨‹æ•´ç†æˆä¸€ç¯‡â€œç…§åšå°±èƒ½æˆâ€çš„æ•™ç¨‹ï¼šä»ç¯å¢ƒå‡†å¤‡ â†’ OpenClaw å®‰è£… â†’ åˆå§‹åŒ–é…ç½® â†’ <strong>æ¥å…¥é£ä¹¦æœºå™¨äºº</strong>ï¼Œæœ€åå†è¡¥ä¸€ä»½å¸¸ç”¨æ’é”™å‘½ä»¤ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€ç¯å¢ƒå‡†å¤‡</h2>
<h3 data-id="heading-1">1ï¼‰å®‰è£… nvm for Windowsï¼ˆå»ºè®®ç”¨æœ€æ–°ç‰ˆï¼‰</h3>
<p><strong>Windows ç”¨æˆ·</strong> åˆ° GitHub Releases ä¸‹è½½ <code>nvm-setup.exe</code>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fcoreybutler%2Fnvm-windows%2Freleases" target="_blank" title="https://github.com/coreybutler/nvm-windows/releases" ref="nofollow noopener noreferrer">github.com/coreybutlerâ€¦</a></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/37bc339dcc8c43cb9bb38a0668f7fcaf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yir5oO5Q0M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770883122&amp;x-signature=uPTeJKXAsHhnx1goZXysFyyRz%2BA%3D" alt="1.png" loading="lazy"/></p>
<p>å®‰è£…è¿‡ç¨‹ä¸€è·¯ Next å³å¯ã€‚å®‰è£…æˆåŠŸåå»ºè®®ä½ ç”¨ <strong>ç®¡ç†å‘˜æƒé™</strong>æ‰“å¼€ PowerShellï¼š</p>
<ul>
<li>æŒ‰ <strong>Win é”® + S</strong></li>
<li>æœç´¢ <strong>PowerShell</strong></li>
<li>é¼ æ ‡å³é”® â†’ <strong>ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œ</strong></li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/18d05ee8ba88475bb627d4c764fcfb60~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yir5oO5Q0M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770883122&amp;x-signature=ff2Ks1qaV3dqAhlvEr%2F1ZO1N9QU%3D" alt="2.png" loading="lazy"/></p>
<h3 data-id="heading-2">2.å®‰è£… node.js 22.22.0 ç‰ˆæœ¬</h3>
<p>æŒ‰ç…§é¡ºåºåˆ†åˆ«åœ¨ <code>powershell</code> ä¸­è¿è¡Œä¸‹åˆ—æŒ‡ä»¤ã€‚</p>
<pre><code class="hljs language-powershell" lang="powershell"># å®‰è£…æŒ‡ä»¤
nvm install 22

# ä½¿ç”¨æŒ‡ä»¤
nvm use 22.22.0
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a96291aab9274019af9d0cd804cae559~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yir5oO5Q0M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770883122&amp;x-signature=r1LSdREFT3K7mTdNnleaSTubJcM%3D" alt="3.png" loading="lazy"/></p>
<p>æˆåŠŸåä¼šçœ‹åˆ°ç±»ä¼¼æç¤ºï¼š<code>Now using node v22.22.0</code></p>
<blockquote>
<p>å¦‚æœä½ ä»ç„¶ä¸‹è½½å¤±è´¥ï¼Œæˆ–è€…å…¬å¸ç½‘ç»œæ‹¦æˆªäº†ä¸‹è½½ï¼Œä¹Ÿå¯ä»¥æ‰‹åŠ¨å»å®˜ç½‘ä¸‹è½½å®‰è£…ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fnodejs.org%2Fzh-cn%2Fdownload" target="_blank" title="https://nodejs.org/zh-cn/download" ref="nofollow noopener noreferrer">nodejs.org/zh-cn/downlâ€¦</a></p>
</blockquote>
<h2 data-id="heading-3">äºŒã€å®‰è£… + é…ç½® OpenClaw</h2>
<h3 data-id="heading-4">1ï¼‰ä¸€é”®å®‰è£…ï¼ˆPowerShellï¼‰</h3>
<p>åœ¨ <strong>ç®¡ç†å‘˜ PowerShell</strong> ä¸­è¿è¡Œï¼š</p>
<pre><code class="hljs language-powershell" lang="powershell">iwr -useb https://openclaw.ai/install.ps1 | iex
</code></pre>
<p>å¦‚æœé‡åˆ°æ‰§è¡Œç­–ç•¥æŠ¥é”™ï¼ˆå¸¸è§äºé¦–æ¬¡è¿è¡Œè„šæœ¬ï¼‰ï¼Œåœ¨ PowerShell è¾“å…¥ï¼š</p>
<pre><code class="hljs language-powershell" lang="powershell">Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c1e1a8aa13404874aa31b1b8a71fcaec~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yir5oO5Q0M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770883122&amp;x-signature=xW6EJeCaMUVjZ2rbQm3%2BjBZJcEE%3D" alt="4.png" loading="lazy"/></p>
<h3 data-id="heading-5">2ï¼‰åˆå§‹åŒ–é…ç½®</h3>
<p>å®‰è£…å®Œæˆåé€šå¸¸ä¼šè‡ªåŠ¨è¿›å…¥é…ç½®æµç¨‹ã€‚
å¦‚æœä½ ä¸å°å¿ƒå…³é—­äº† PowerShellï¼Œé‡æ–°æ‰“å¼€åæ‰§è¡Œï¼š</p>
<pre><code class="hljs language-powershell" lang="powershell">openclaw onboard --flow quickstart
</code></pre>
<p>ç¬¬ä¸€ä¸ªé£é™©æç¤ºï¼š</p>
<blockquote>
<p>I understand this is powerful and inherently risky. Continue?</p>
</blockquote>
<p>é€‰æ‹© <strong>Yes</strong>ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9fb74ec6a75441f7b11b96f96ba4dfc5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yir5oO5Q0M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770883122&amp;x-signature=Gdm6csrAoM%2Bxr3UQ9ilvMYGwLGc%3D" alt="5.png" loading="lazy"/></p>
<p>å¦‚æœæœ‰å°ä¼™ä¼´é‡åˆ°è¿™ä¸ªé—®é¢˜ï¼šç³»ç»Ÿä¸çŸ¥é“å®ƒè¢«å®‰è£…åœ¨å“ªé‡Œäº†ã€‚å¤„ç†æ–¹å¼é€šå¸¸å¾ˆç®€å•ï¼š</p>
<blockquote>
<ul>
<li><strong>å…³é—­å½“å‰ PowerShell</strong></li>
<li><strong>é‡æ–°ç”¨ç®¡ç†å‘˜æ–¹å¼æ‰“å¼€ PowerShell</strong></li>
<li>ä¸€èˆ¬ <code>nvm</code>/ç¯å¢ƒå˜é‡ä¼šè‡ªåŠ¨åˆ·æ–°è·¯å¾„ï¼Œé—®é¢˜å³å¯æ¶ˆå¤±</li>
</ul>
</blockquote>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/49925214147e446f90a6c7c403e07ce4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yir5oO5Q0M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770883122&amp;x-signature=wcNv7PJkF%2FCbIArk18eZSkXUtAc%3D" alt="7.png" loading="lazy"/></p>
<p>ä¹‹åæŒ‰æç¤ºé€‰æ‹©æ¨¡å‹ã€‚æˆ‘è¿™é‡Œç¤ºä¾‹ç”¨çš„æ˜¯ <strong>Kimi</strong>ï¼Œä½ ä¹Ÿå¯ä»¥æŒ‰è‡ªå·±ä¹ æƒ¯é€‰æ‹©ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/605f91a9d9924256a68a83d883dff7ef~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yir5oO5Q0M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770883122&amp;x-signature=hm83q3D%2FonPWJT6IWOHIPldUGAc%3D" alt="8.png" loading="lazy"/></p>
<p>å¯ä»¥çœ‹ä¸‹é…ç½®ï¼Œä¸»è¦è¾“å…¥API  keyï¼Œå…¶ä»–éƒ½å¯ä»¥é»˜è®¤ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e19602e5230742e284b0e69ad4c0d020~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yir5oO5Q0M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770883122&amp;x-signature=ZpgZxx6gXGuEO6O6oQ6p7TkCDYY%3D" alt="9.png" loading="lazy"/></p>
<p>æ¥ç€é…ç½®é€šè®¯å·¥å…·ï¼Œè™½ç„¶å®˜æ–¹è¿™é‡Œç›´æ¥å¯ä»¥é€‰é£ä¹¦ï¼Œä½†å®˜æ–¹æ–‡æ¡£æ˜ç¡®å»ºè®® <strong>Windows é€šè¿‡ WSL2 è¿è¡Œ</strong>ï¼Œå¹¶ä¸”æåˆ°åŸç”Ÿ Windows æœªæµ‹è¯•ã€æ›´å®¹æ˜“å‡ºé—®é¢˜ã€‚å¹¶ä¸”æˆ‘å®æµ‹è¿™é‡Œä¸‹è½½æ’ä»¶ä¼šæŠ¥é”™ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿™é‡Œå…ˆè·³è¿‡ï¼Œåç»­å†å®‰è£…ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2a7ad10229ca4b329d81bb6adb4e9b6d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yir5oO5Q0M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770883122&amp;x-signature=Mk86ZoZxlv111T1OFlpKBvs8Sic%3D" alt="11.png" loading="lazy"/></p>
<p>skillä¹Ÿå…ˆè·³è¿‡ï¼Œåç»­å’±ä»¬åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­æ ¹æ®è‡ªå·±çš„å·¥ä½œæµæ…¢æ…¢è¿­ä»£è‡ªå·±çš„skillã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dc4331d063754f92ad641c657cda633d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yir5oO5Q0M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770883122&amp;x-signature=3rt3v3aDB%2BcZ%2B5GzjSNgqiikcJs%3D" alt="12.png" loading="lazy"/></p>
<p>å®‰è£…å¯åŠ¨ç½‘å…³åï¼Œå®ƒä¼šè‡ªåŠ¨æ–°å¼€ä¸€ä¸ª PowerShell çª—å£ï¼Œéƒ½ä¸è¦å…³é—­ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fbbe48a09c064117aad539748ad8c130~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yir5oO5Q0M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770883122&amp;x-signature=kdMzJ77ZX%2FjLBYvm0Bx2fkMSxGo%3D" alt="13.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b06d6a5211dc4b3baecb867c7e7b0360~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yir5oO5Q0M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770883122&amp;x-signature=NHrTxSjXPRL65%2BwajTcInq6lG2A%3D" alt="14.png" loading="lazy"/></p>
<p>æµè§ˆå™¨ä¼šè‡ªåŠ¨æ‰“å¼€æ§åˆ¶å°ã€‚åç»­ä½ ä¹Ÿå¯ä»¥ç›´æ¥è®¿é—®ï¼š<a href="https://link.juejin.cn?target=http%3A%2F%2F127.0.0.1%3A18789%2F" target="_blank" title="http://127.0.0.1:18789/" ref="nofollow noopener noreferrer">http://127.0.0.1:18789/</a></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b29ea936ddc1486eae25ec47ccaba6b8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yir5oO5Q0M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770883122&amp;x-signature=a2kyjAYc4%2Bk8MRjpBB6VgLVFsBQ%3D" alt="15.png" loading="lazy"/></p>
<p>å‘æ¶ˆæ¯æµ‹è¯•ï¼Œæœ‰å›å¤å°±è¯´æ˜å®‰è£…æˆåŠŸï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9b3db6be653243069073215c181f80e6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yir5oO5Q0M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770883122&amp;x-signature=gere4Pt2inaARPMNSOofBbIErT0%3D" alt="16.png" loading="lazy"/></p>
<h2 data-id="heading-6">ä¸‰ã€é…ç½®è¿æ¥é£ä¹¦</h2>
<p>æ•´ä½“æ€è·¯æ˜¯ä¸¤æ­¥ï¼š</p>
<ol>
<li>åœ¨ OpenClaw é‡Œå®‰è£…é£ä¹¦æ’ä»¶</li>
<li>åœ¨é£ä¹¦å¼€æ”¾å¹³å°åˆ›å»ºåº”ç”¨ â†’ é…æƒé™/äº‹ä»¶ â†’ å‘å¸ƒç‰ˆæœ¬ â†’ å›åˆ° OpenClaw å¡« AppID/Secret</li>
</ol>
<h3 data-id="heading-7">1ï¼‰å®‰è£…é£ä¹¦æ’ä»¶</h3>
<p>ä½ å¯ä»¥åœ¨æ§åˆ¶å°é‡Œè®©å®ƒå¸®ä½ æ‰§è¡Œå®‰è£…å‘½ä»¤ï¼š</p>
<pre><code class="hljs language-powershell" lang="powershell">openclaw plugins install @m1heng-clawd/feishu
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/92eb563ef66046f99663e0b783cf7dc8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yir5oO5Q0M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770883122&amp;x-signature=6Fu%2Facx3Sq2KpJGF1P5lwtoSsuY%3D" alt="17.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8655dae9cb7d4f6a824d7afa1b40c46f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yir5oO5Q0M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770883122&amp;x-signature=mDjDaFqjOunB0di04G1OlDASq2E%3D" alt="18.png" loading="lazy"/></p>
<blockquote>
<p>æ’ä»¶å®‰è£…å¯èƒ½è¦ç­‰ä¸€ä¼šå„¿ï¼Œè¿™æ®µæ—¶é—´ä½ å¯ä»¥å»é£ä¹¦å¼€æ”¾å¹³å°æŠŠåº”ç”¨å…ˆå»ºå¥½ã€‚</p>
</blockquote>
<h3 data-id="heading-8">2ï¼‰é£ä¹¦å¼€æ”¾å¹³å°åˆ›å»ºåº”ç”¨</h3>
<p>è¿›å…¥é£ä¹¦å¼€æ”¾å¹³å°ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fopen.feishu.cn%2F%25EF%25BC%258C%25E5%2588%259B%25E5%25BB%25BA%25E4%25B8%2580%25E4%25B8%25AA%25E5%25BA%2594%25E7%2594%25A8%25EF%25BC%258C%25E5%25B9%25B6%25E6%25B7%25BB%25E5%258A%25A0%25E6%259C%25BA%25E5%2599%25A8%25E4%25BA%25BA%25E5%25BA%2594%25E7%2594%25A8%25E8%2583%25BD%25E5%258A%259B%25E3%2580%2582" target="_blank" title="https://open.feishu.cn/%EF%BC%8C%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%BA%94%E7%94%A8%EF%BC%8C%E5%B9%B6%E6%B7%BB%E5%8A%A0%E6%9C%BA%E5%99%A8%E4%BA%BA%E5%BA%94%E7%94%A8%E8%83%BD%E5%8A%9B%E3%80%82" ref="nofollow noopener noreferrer">open.feishu.cn/ï¼Œåˆ›å»ºä¸€ä¸ªåº”ç”¨ï¼Œå¹¶æ·»åŠ â€¦</a></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/de92703fe3854d6a991f5d24628f0a3a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yir5oO5Q0M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770883122&amp;x-signature=4mrZ2zRIB%2BvceNoEmGtbhmOyNEM%3D" alt="19.png" loading="lazy"/></p>
<p>ç„¶åæŠŠ <strong>App ID</strong> å’Œ <strong>App Secret</strong> å¤åˆ¶å‡ºæ¥å¤‡ç”¨ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/960d82e1c33546959f087c49364cf475~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yir5oO5Q0M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770883122&amp;x-signature=4%2F9GNQ%2BDdWgb0TTKmq991AhNOGQ%3D" alt="20.png" loading="lazy"/></p>
<p>æŠŠè¿™ä¸¤é¡¹æä¾›ç»™ OpenClaw ï¼Œè®©å®ƒå®Œæˆé…ç½®ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/30220fa6129047eba58d3c062163064e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yir5oO5Q0M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770883122&amp;x-signature=hnAYZixJqsK1ZJyJPALrppK%2Bzvo%3D" alt="20-1.png" loading="lazy"/></p>
<h3 data-id="heading-9">3ï¼‰æ‰¹é‡å¯¼å…¥æƒé™</h3>
<p>è¿›å…¥ <strong>æƒé™ç®¡ç†</strong> â†’ æ‰¾åˆ°ã€Œæ‰¹é‡å¯¼å…¥å¯¼å‡ºæƒé™ã€â†’ æƒé™é…ç½® JSON â†’ ç²˜è´´å¯¼å…¥ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"scopes"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"tenant"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
      <span class="hljs-string">"aily:file:read"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"aily:file:write"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"application:application.app_message_stats.overview:readonly"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"application:application:self_manage"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"application:bot.menu:write"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"contact:user.employee_id:readonly"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"corehr:file:download"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"event:ip_list"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"im:chat.access_event.bot_p2p_chat:read"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"im:chat.members:bot_access"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"im:message"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"im:message.group_at_msg:readonly"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"im:message.p2p_msg:readonly"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"im:message:readonly"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"im:message:send_as_bot"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"im:resource"</span>
    <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"user"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"aily:file:read"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"aily:file:write"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"im:chat.access_event.bot_p2p_chat:read"</span><span class="hljs-punctuation">]</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>å¯¼å…¥å®Œæˆåç‚¹å‡»ã€Œç¡®è®¤æ–°å¢æƒé™ã€ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fb41ddaca6dc48fda9561c0ca1a96072~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yir5oO5Q0M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770883122&amp;x-signature=T5CL5kZ%2B7ZCI1fV9bJaHaxEHgkc%3D" alt="21.png" loading="lazy"/></p>
<h3 data-id="heading-10">4ï¼‰äº‹ä»¶è®¢é˜…</h3>
<p>è¿›å…¥ã€Œäº‹ä»¶ä¸å›è°ƒã€é¡µé¢ï¼š</p>
<ul>
<li>ã€Œäº‹ä»¶é…ç½®ã€â†’ã€Œè®¢é˜…æ–¹å¼ã€</li>
<li>é€‰æ‹©ï¼š<strong>ä½¿ç”¨é•¿è¿æ¥æ¥æ”¶äº‹ä»¶</strong></li>
<li>ä¿å­˜</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5a900916b4654ffeb7ece91fae52d655~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yir5oO5Q0M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770883122&amp;x-signature=YYlV1Cs2OXeT7VrHGoLWXBezZLs%3D" alt="22.png" loading="lazy"/></p>
<blockquote>
<p>å¦‚æœæç¤ºâ€œæ²¡æœ‰å»ºç«‹é•¿è¿æ¥â€ï¼š</p>
<ul>
<li>å…ˆåˆ«æ…Œï¼Œé€šå¸¸ç­‰ 1ï½2 åˆ†é’Ÿå†ç‚¹ä¿å­˜å°±å¥½</li>
<li>å¦‚æœç­‰å¾ˆä¹…ä»ä¸è¡Œï¼Œä¼˜å…ˆæ£€æŸ¥ <strong>OpenClaw ç½‘å…³æ˜¯å¦æ­£å¸¸è¿è¡Œ</strong>ï¼Œå¹¶æŸ¥çœ‹æ—¥å¿—ï¼ˆä¸‹é¢ç¬¬å››éƒ¨åˆ†ç»™äº†å‘½ä»¤ï¼‰</li>
</ul>
</blockquote>
<h3 data-id="heading-11">5ï¼‰æ·»åŠ æ¥æ”¶æ¶ˆæ¯äº‹ä»¶</h3>
<p>åœ¨ã€Œäº‹ä»¶é…ç½®ã€é¡µé¢ç‚¹å‡»ã€Œæ·»åŠ äº‹ä»¶ã€ï¼Œæœç´¢å¹¶æ·»åŠ ï¼š</p>
<ul>
<li><code>im.message.receive_v1</code></li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bfc212bebfeb4ddfa56522801cfd0234~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yir5oO5Q0M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770883122&amp;x-signature=76Z84VjoXbcnCAhs6r4yUTJaKrg%3D" alt="23.png" loading="lazy"/></p>
<blockquote>
<p>ä¸æ·»åŠ è¿™ä¸ªäº‹ä»¶ï¼Œæœºå™¨äººå°±æ— æ³•æ”¶åˆ°ä½ çš„æ¶ˆæ¯ã€‚</p>
</blockquote>
<h3 data-id="heading-12">6ï¼‰å‘å¸ƒç‰ˆæœ¬</h3>
<p>è¿›å…¥ã€Œç‰ˆæœ¬ç®¡ç†ä¸å‘å¸ƒã€ï¼š</p>
<ul>
<li>åˆ›å»ºç‰ˆæœ¬</li>
<li>å‘å¸ƒ</li>
</ul>
<p>åªæœ‰å‘å¸ƒåï¼Œå‰é¢çš„é…ç½®æ‰ä¼šçœŸæ­£ç”Ÿæ•ˆã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/51bbee8f79aa438cba32668d7326cae5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yir5oO5Q0M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770883122&amp;x-signature=EeS0zraMXSXFXPXv%2Bg8v79Sx4G8%3D" alt="24.png" loading="lazy"/></p>
<p>ç„¶ååœ¨é£ä¹¦é‡Œæ‰¾åˆ°ä½ åˆšåˆ›å»ºçš„æœºå™¨äººï¼Œå‘é€ä¸€æ¡æ¶ˆæ¯ï¼Œå®ƒä¼šè‡ªåŠ¨å›å¤ä¸€ä¸ªé…å¯¹ç </p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7f7e0fa260f5419587638caa4a680261~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yir5oO5Q0M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770883122&amp;x-signature=XrLshMDNpIOUvgpTussheMy6uBw%3D" alt="25.png" loading="lazy"/></p>
<p>å¤åˆ¶è¿™ä¸ªé…å¯¹ç ï¼Œæ‰“å¼€ Clawdbot çš„ Web UIï¼ˆå°±æ˜¯å‰é¢é‚£ä¸ªæ§åˆ¶å°ï¼‰ï¼ŒæŠŠé…å¯¹ç å‘ç»™å®ƒï¼ŒClawdbot ä¼šè‡ªåŠ¨å®Œæˆç»‘å®šã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7f2177ca181c4b889deb7aab211272fd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yir5oO5Q0M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770883122&amp;x-signature=mxK8jd%2By%2BBICCbaAXvWynROfaIA%3D" alt="26.png" loading="lazy"/></p>
<p>ç»‘å®šæˆåŠŸåï¼Œä½ å°±å¯ä»¥åœ¨é£ä¹¦é‡Œè·Ÿ Clawdbot æ„‰å¿«äº¤æµäº†ï¼Œä¹Ÿå¯ä»¥æŠŠæœºå™¨äººæ‹‰åˆ°å…¬å¸ç¾¤é‡Œï¼Œè®©æ‰€æœ‰å°ä¼™ä¼´éƒ½èƒ½ç”¨ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/633ab41e53e347918d013af6c3c54c40~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yir5oO5Q0M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770883122&amp;x-signature=qKftuS4vOMmfBtISIv2flG51klw%3D" alt="27.png" loading="lazy"/></p>
<h2 data-id="heading-13">å››ã€å¸¸ç”¨å‘½ä»¤ï¼ˆæ’æŸ¥/ä¿®å¤å¿…å¤‡ï¼‰</h2>
<p>ä¸‹é¢è¿™äº›å‘½ä»¤éå¸¸å®ç”¨ï¼šé…ç½®è¿‡ç¨‹ä¸­é‡åˆ°å¡æ­»ã€æ’ä»¶å¼‚å¸¸ã€ç½‘å…³æ²¡èµ·ç­‰é—®é¢˜ï¼Œä¼˜å…ˆç”¨å®ƒä»¬è‡ªæŸ¥ã€‚</p>
<pre><code class="hljs language-powershell" lang="powershell"># å¯åŠ¨ç½‘å…³
openclaw gateway start

# é‡å¯ç½‘å…³ï¼ˆåˆ·æ–°æœºå™¨äººçŠ¶æ€ï¼‰
openclaw gateway restart

# é‡ç½®/æ›´æ”¹ API ç­‰é…ç½®
openclaw config

# è¯Šæ–­æ£€æŸ¥
openclaw doctor

# å®æ—¶æŸ¥çœ‹æ—¥å¿—ï¼ˆå¼ºçƒˆæ¨èï¼šå‡º bug åŸºæœ¬éƒ½é å®ƒå®šä½ï¼‰
openclaw logs follow
</code></pre>
<p>å¥½äº†ï¼Œè¿™å°±æ˜¯æ•´ä¸ªå®‰è£…å’Œé…ç½®æµç¨‹ã€‚</p>
<p>å¦‚æœä½ è§‰å¾—å¯¹ä½ æœ‰å¸®åŠ©çš„è¯ï¼Œå¯ä»¥å¸®æˆ‘ç‚¹ä¸ªèµğŸ‘ï¼Œä¹Ÿå¯ä»¥è½¬å‘ç»™å…¶ä»–ä½ è§‰å¾—éœ€è¦çš„æœ‹å‹ä»¬ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‰ç«¯å¹¶å‘å¤„ç†æœ€ä½³å®è·µï¼šToken å…±äº«èµ„æºçš„å•ä¾‹ Promise æ¨¡å¼]]></title>    <link>https://juejin.cn/post/7602553969971052598</link>    <guid>https://juejin.cn/post/7602553969971052598</guid>    <pubDate>2026-02-04T09:51:04.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602553969971052598" data-draft-id="7602543146237591595" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‰ç«¯å¹¶å‘å¤„ç†æœ€ä½³å®è·µï¼šToken å…±äº«èµ„æºçš„å•ä¾‹ Promise æ¨¡å¼"/> <meta itemprop="keywords" content="JavaScript,å‰ç«¯"/> <meta itemprop="datePublished" content="2026-02-04T09:51:04.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸€æ‹³ä¸æ˜¯è¶…äºº"/> <meta itemprop="url" content="https://juejin.cn/user/3456520289261902"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‰ç«¯å¹¶å‘å¤„ç†æœ€ä½³å®è·µï¼šToken å…±äº«èµ„æºçš„å•ä¾‹ Promise æ¨¡å¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3456520289261902/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸€æ‹³ä¸æ˜¯è¶…äºº
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T09:51:04.000Z" title="Wed Feb 04 2026 09:51:04 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    17
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨å‰ç«¯å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸é‡åˆ°è¿™æ ·çš„åœºæ™¯ï¼šå¤šä¸ªç‹¬ç«‹çš„ç»„ä»¶æˆ–äº‹ä»¶æµï¼ˆEvent Streamï¼‰å‡ ä¹åŒæ—¶è§¦å‘ï¼Œå®ƒä»¬éƒ½éœ€è¦ä¾èµ–åŒä¸€ä¸ªå¼‚æ­¥è·å–çš„èµ„æºâ€”â€”æ¯”å¦‚é‰´æƒ Tokenã€‚</p>
<p>å¦‚æœå¤„ç†ä¸å½“ï¼Œå°±ä¼šå¯¼è‡´Â <strong>Race Conditionï¼ˆç«æ€æ¡ä»¶ï¼‰</strong> Â æˆ–è€…Â <strong>é‡å¤çš„ç½‘ç»œè¯·æ±‚</strong>ã€‚ä»Šå¤©æˆ‘ä»¬æ¥åˆ†äº«ä¸€ç§ç®€å•è€Œå¥å£®çš„æœ€ä½³å®è·µï¼š<strong>Singleton Promise Patternï¼ˆå•ä¾‹ Promise æ¨¡å¼ï¼‰</strong> ã€‚</p>
<h2 data-id="heading-0">å¸¸è§é—®é¢˜ï¼šå¹¶å‘åœ°ç‹±</h2>
<p>å‡è®¾ä½ æœ‰ä¸€ä¸ªÂ <code>audio-to-text</code>ï¼ˆè¯­éŸ³è½¬æ–‡å­—ï¼‰çš„åŠŸèƒ½ï¼Œæ¯æ¬¡è§¦å‘éƒ½éœ€è¦å…ˆè·å–ä¸€ä¸ªä¸´æ—¶çš„ API Tokenã€‚</p>
<p>å¦‚æœç”¨æˆ·è¿ç»­å¿«é€Ÿæ’­æ”¾äº† 3 æ¡è¯­éŸ³ï¼Œæˆ–è€…é¡µé¢åˆå§‹åŒ–æ—¶æœ‰å¤šä¸ªç»„ä»¶åŒæ—¶è¯·æ±‚ Tokenï¼Œå¯èƒ½ä¼šå‘ç”Ÿä»¥ä¸‹æƒ…å†µï¼š</p>
<ol>
<li><strong>èµ„æºæµªè´¹</strong>ï¼šå‘èµ·äº† 3 æ¬¡è·å– Token çš„ç½‘ç»œè¯·æ±‚ï¼Œä½†å®é™…ä¸Šåªéœ€è¦ 1 æ¬¡ã€‚</li>
<li><strong>çŠ¶æ€ä¸ä¸€è‡´</strong>ï¼šç¬¬ 1 ä¸ªè¯·æ±‚æˆåŠŸäº†ï¼Œä½†åœ¨å®ƒå†™å…¥æœ¬åœ°ç¼“å­˜ä¹‹å‰ï¼Œç¬¬ 2 ä¸ªè¯·æ±‚åˆå‘èµ·äº†ã€‚</li>
<li><strong>æ­»é”/æ— é™ç­‰å¾…</strong>ï¼šä½¿ç”¨ç®€å•çš„Â <code>isLoading</code>Â é”ï¼Œå¦‚æœä»£ç é€»è¾‘åœ¨å¼‚å¸¸å¤„ç†ï¼ˆcatchï¼‰ä¸­é—æ¼äº†é‡ç½®é”ï¼Œå¯¼è‡´åç»­è¯·æ±‚ä¸€ç›´ pendingã€‚</li>
</ol>
<h2 data-id="heading-1">è§£å†³æ–¹æ¡ˆï¼šå•ä¾‹ Promise æ¨¡å¼</h2>
<p>æ ¸å¿ƒæ€æƒ³éå¸¸ç®€å•ï¼š<strong>å°†"æ­£åœ¨è¿›è¡Œçš„è¯·æ±‚"ç¼“å­˜èµ·æ¥ï¼Œè€Œä¸æ˜¯åªç¼“å­˜ç»“æœã€‚</strong></p>
<p>å¯¹äºå…±äº«èµ„æºï¼Œæˆ‘ä»¬ç»´æŠ¤ä¸€ä¸ªå…¨å±€å”¯ä¸€çš„ Promiseã€‚</p>
<ul>
<li>å½“ç¬¬ä¸€ä¸ªè¯·æ±‚è¿›æ¥æ—¶ï¼Œåˆ›å»ºä¸€ä¸ª Promise å¹¶å‘èµ·è¯·æ±‚ã€‚</li>
<li>å½“åç»­è¯·æ±‚è¿›æ¥æ—¶ï¼Œå¦‚æœå‘ç°å·²ç»æœ‰ä¸€ä¸ª Promise åœ¨ pendingï¼Œç›´æ¥å¤ç”¨å¹¶è¿”å›è¿™ä¸ª Promiseã€‚</li>
<li>æ— è®ºæˆåŠŸæˆ–å¤±è´¥ï¼ŒPromise settled åï¼Œæ¸…ç†çŠ¶æ€ï¼Œä»¥ä¾¿ä¸‹æ¬¡å¯ä»¥å‘èµ·æ–°è¯·æ±‚ã€‚</li>
</ul>
<h3 data-id="heading-2">ä»£ç å®ç°æ¨¡æ¿</h3>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªå¥å£®çš„å®ç°æ¨¡æ¿ï¼ŒåŒ…å«äº†Â <strong>é˜²æŠ–ï¼ˆDebounceï¼‰</strong> ã€<strong>å¼‚å¸¸å®‰å…¨ï¼ˆException Safetyï¼‰</strong> Â å’ŒÂ <strong>çŠ¶æ€å¤ä½</strong>ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å…¨å±€çŠ¶æ€å˜é‡</span>
<span class="hljs-keyword">let</span> getTokenTask = <span class="hljs-literal">null</span>; <span class="hljs-comment">// å­˜å‚¨æ­£åœ¨è¿›è¡Œçš„ Promise</span>
<span class="hljs-keyword">let</span> isGettingToken = <span class="hljs-literal">false</span>; <span class="hljs-comment">// é”æ ‡è®°</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getSharedToken</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// 1. æ£€æŸ¥æœ¬åœ°ç¼“å­˜æ˜¯å¦æœ‰æ•ˆ</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-title function_">isTokenValid</span>()) {
    <span class="hljs-keyword">return</span> <span class="hljs-title function_">getTokenFromStorage</span>();
  }
  <span class="hljs-comment">// 2. å¹¶å‘æ‹¦æˆªï¼šå¦‚æœæœ‰æ­£åœ¨è¿›è¡Œçš„ä»»åŠ¡ï¼Œç›´æ¥å¤ç”¨ï¼Œä¸å‘èµ·æ–°è¯·æ±‚</span>
  <span class="hljs-keyword">if</span> (isGettingToken &amp;&amp; getTokenTask) {
    <span class="hljs-keyword">return</span> getTokenTask;
  }
  <span class="hljs-comment">// 3. åˆå§‹åŒ–ä¸€ä¸ªæ–°çš„å•ä¾‹ä»»åŠ¡</span>
  isGettingToken = <span class="hljs-literal">true</span>;
  
  <span class="hljs-comment">// åˆ›å»º Promise é—­åŒ…ï¼Œç¡®ä¿æˆ‘ä»¬å¯ä»¥æ§åˆ¶ resolve</span>
  <span class="hljs-keyword">let</span> taskResolve = <span class="hljs-literal">null</span>;
  getTokenTask = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> {
    taskResolve = resolve;
  });
  <span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// 4. æ‰§è¡Œå®é™…çš„å¼‚æ­¥æ“ä½œ</span>
    <span class="hljs-keyword">const</span> token = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchTokenFromServer</span>();
    
    <span class="hljs-comment">// 5. ç¼“å­˜ç»“æœ</span>
    <span class="hljs-title function_">saveTokenToStorage</span>(token);
    
    <span class="hljs-keyword">return</span> token;
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'è·å– Token å¤±è´¥'</span>, error);
    <span class="hljs-keyword">throw</span> error; <span class="hljs-comment">// å‘ä¸Šä¼ é€’é”™è¯¯ï¼Œè®©è°ƒç”¨æ–¹å†³å®šå¦‚ä½•å¤„ç†</span>
  } <span class="hljs-keyword">finally</span> {
    <span class="hljs-comment">// 6. å…³é”®ï¼šæ— è®ºæˆåŠŸè¿˜æ˜¯å¤±è´¥ï¼Œéƒ½è¦é€šçŸ¥ç­‰å¾…çš„ Promise å¹¶é‡Šæ”¾é”</span>
    <span class="hljs-keyword">if</span> (taskResolve) {
      <span class="hljs-comment">// è·å–å½“å‰æœ€æ–°çš„ token (å¯èƒ½åœ¨ try å—ä¸­å·²ç»å­˜å…¥ï¼Œä¹Ÿå¯èƒ½ä¸ºç©º)</span>
      <span class="hljs-keyword">const</span> currentToken = <span class="hljs-title function_">getTokenFromStorage</span>();
      <span class="hljs-title function_">taskResolve</span>(currentToken);
    }
    
    <span class="hljs-comment">// é‡ç½®çŠ¶æ€ï¼Œå…è®¸ä¸‹ä¸€æ¬¡æ–°çš„è¯·æ±‚å‘èµ·</span>
    isGettingToken = <span class="hljs-literal">false</span>; 
    getTokenTask = <span class="hljs-literal">null</span>;
  }
}
</code></pre>
<h2 data-id="heading-3">ğŸ’¡ æ ¸å¿ƒè®¾è®¡ç‚¹è§£æ</h2>
<h3 data-id="heading-4">1. ä¸ºä»€ä¹ˆè¦è¿”å› Promise è€Œä¸æ˜¯ç­‰å¾…Â <code>await</code>Â åè¿”å›ç»“æœï¼Ÿ</h3>
<p>è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆé€šè¿‡Â <code>if (isGettingToken) return getTokenTask</code>Â ç›´æ¥è¿”å› Promise å¯¹è±¡ã€‚è¿™æ ·ï¼Œä¸‰ä¸ªå¹¶å‘çš„è°ƒç”¨è€…Â <code>await getSharedToken()</code>Â å®é™…ä¸Šæ˜¯åœ¨ç­‰å¾…åŒä¸€ä¸ª Promise å¯¹è±¡ resolveã€‚ä¸€æ—¦ Leader è¯·æ±‚å®Œæˆï¼Œä¸‰ä¸ªè°ƒç”¨è€…ä¼šåŒæ—¶å¾—åˆ°é€šçŸ¥ã€‚</p>
<h3 data-id="heading-5">2. Try...Finally çš„é‡è¦æ€§</h3>
<p>å¹¶å‘æ§åˆ¶ä¸­æœ€æ€•çš„æ˜¯Â  <strong>"æ­»é”"</strong> ã€‚å¦‚æœ API è¯·æ±‚æŠ›å‡ºå¼‚å¸¸ï¼Œè€Œä½ å¿˜è®°åœ¨Â <code>catch</code>Â å—ä¸­æŠŠÂ <code>isGettingToken</code>Â è®¾ç½®å›Â <code>false</code>ï¼Œé‚£ä¹ˆæ•´ä¸ªåº”ç”¨çš„ç›¸å…³åŠŸèƒ½å°±ä¼šæ°¸ä¹…å¡æ­»ã€‚ ä½¿ç”¨Â <code>finally</code>Â å—å¯ä»¥ä¿è¯æ— è®ºä»£ç è·¯å¾„å¦‚ä½•ï¼ˆæ­£å¸¸è¿”å›ã€æŠ›å‡ºé”™è¯¯ã€ç”šè‡³æ—©é€€ï¼‰ï¼Œé”ä¸€å®šä¼šè¢«é‡Šæ”¾ã€‚</p>
<h3 data-id="heading-6">3. ä¸è¦ä¸ºæ¯ä¸ªè¯·æ±‚åˆ›å»ºç¼“å­˜ Map</h3>
<p>æœ‰äº›å¼€å‘è€…ä¼šæƒ³ï¼š"æˆ‘æ˜¯ä¸æ˜¯åº”è¯¥ç”¨ä¸€ä¸ª Mapï¼Œæ ¹æ® Request ID æ¥ç¼“å­˜ï¼Ÿ" å¯¹äº Token è¿™ç§Â <strong>å…¨å±€å…±äº«èµ„æº</strong>ï¼Œä¸éœ€è¦ã€‚å› ä¸ºæ— è®ºè°å‘èµ·çš„è¯·æ±‚ï¼Œä»–ä»¬è¦çš„éƒ½æ˜¯åŒä¸€ä¸ªä¸œè¥¿ã€‚Map åªä¼šå¢åŠ å†…å­˜æ³„æ¼çš„é£é™©å’Œç®¡ç†çš„å¤æ‚åº¦ã€‚</p>
<h2 data-id="heading-7">æ€»ç»“</h2>
<p>åœ¨é«˜å¹¶å‘çš„å‰ç«¯åœºæ™¯ä¸‹ï¼Œ<strong>å…±äº«èµ„æºçš„å•ä¾‹ Promise æ¨¡å¼</strong>Â æ˜¯æ€§ä»·æ¯”æé«˜çš„ä¼˜åŒ–æ‰‹æ®µã€‚å®ƒç”¨æå°‘çš„ä»£ç æˆæœ¬ï¼Œå®ç°äº†ï¼š</p>
<ul>
<li><strong>æµé‡èŠ‚çœ</strong>ï¼šN ä¸ªå¹¶å‘è¯·æ±‚åªéœ€ 1 æ¬¡ç½‘ç»œè°ƒç”¨ã€‚</li>
<li><strong>é«˜æ€§èƒ½</strong>ï¼šæ‰€æœ‰è¯·æ±‚å‡ ä¹åŒæ—¶å¾—åˆ°å“åº”ï¼Œæ²¡æœ‰é˜»å¡ã€‚</li>
<li><strong>é«˜å¥å£®æ€§</strong>ï¼šå¼‚å¸¸æƒ…å†µä¸‹ä¹Ÿèƒ½è‡ªåŠ¨æ¢å¤ï¼Œä¸ä¼šå¡æ­»ã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[PyTorch å…¥é—¨æŒ‡å—ï¼šæ·±åº¦å­¦ä¹ çš„ç‘å£«å†›åˆ€]]></title>    <link>https://juejin.cn/post/7602916406981673001</link>    <guid>https://juejin.cn/post/7602916406981673001</guid>    <pubDate>2026-02-05T06:48:28.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602916406981673001" data-draft-id="7602914378388996106" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="PyTorch å…¥é—¨æŒ‡å—ï¼šæ·±åº¦å­¦ä¹ çš„ç‘å£«å†›åˆ€"/> <meta itemprop="keywords" content="Python,PyTorch"/> <meta itemprop="datePublished" content="2026-02-05T06:48:28.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°å°å¼ è¯´æ•…äº‹"/> <meta itemprop="url" content="https://juejin.cn/user/741501567509111"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            PyTorch å…¥é—¨æŒ‡å—ï¼šæ·±åº¦å­¦ä¹ çš„ç‘å£«å†›åˆ€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/741501567509111/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°å°å¼ è¯´æ•…äº‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-05T06:48:28.000Z" title="Thu Feb 05 2026 06:48:28 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-05
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">1. åº“çš„æ¦‚è§ˆä¸æ ¸å¿ƒä»·å€¼</h2>
<p>æƒ³è±¡ä¸€ä¸‹ï¼Œä½ æƒ³å»ºé€ ä¸€ä¸ªèƒ½å¤Ÿè¯†åˆ«å›¾ç‰‡ã€ç¿»è¯‘è¯­è¨€æˆ–è€…å¯¹è¯çš„æ™ºèƒ½ç³»ç»Ÿã€‚å¦‚æœä½ ä»é›¶å¼€å§‹ç¼–å†™æ‰€æœ‰çš„æ•°å­¦è¿ç®—ã€åå‘ä¼ æ’­ç®—æ³•å’ŒGPUåŠ é€Ÿä»£ç ï¼Œè¿™å°±åƒæƒ³è¦çƒ¤åˆ¶è›‹ç³•å´éœ€è¦å…ˆå‘æ˜çƒ¤ç®±â€”â€”æ—¢è€—æ—¶åˆå®¹æ˜“å‡ºé”™ã€‚PyTorch æ­£æ˜¯ä¸ºæ­¤è€Œç”Ÿçš„å·¥å…·ï¼Œå®ƒè®©æ·±åº¦å­¦ä¹ å˜å¾—è§¦æ‰‹å¯åŠã€‚</p>
<p>PyTorch æ˜¯ä¸€ä¸ªå¼€æºçš„æ·±åº¦å­¦ä¹ æ¡†æ¶ï¼Œç”± Facebookï¼ˆç° Metaï¼‰AI Research å›¢é˜Ÿå¼€å‘ã€‚åœ¨ Python ç”Ÿæ€ç³»ç»Ÿä¸­ï¼ŒPyTorch ä»¥å…¶åŠ¨æ€è®¡ç®—å›¾ã€ç›´è§‚çš„ API è®¾è®¡å’Œå¼ºå¤§çš„ GPU åŠ é€Ÿèƒ½åŠ›è‘—ç§°ã€‚ä¸é™æ€æ¡†æ¶ä¸åŒï¼ŒPyTorch å…è®¸ä½ åƒç¼–å†™æ™®é€š Python ä»£ç ä¸€æ ·æ„å»ºç¥ç»ç½‘ç»œâ€”â€”å¯ä»¥éšæ—¶è°ƒè¯•ã€ä¿®æ”¹å’Œå®éªŒï¼Œè¿™ä½¿å¾—å®ƒæˆä¸ºç ”ç©¶äººå‘˜å’Œå·¥ç¨‹å¸ˆçš„é¦–é€‰å·¥å…·ã€‚</p>
<p>PyTorch çš„æ ¸å¿ƒä»·å€¼ä½“ç°åœ¨ä¸‰ä¸ªæ–¹é¢ï¼š</p>
<ul>
<li><strong>çµæ´»æ€§</strong>ï¼šåŠ¨æ€è®¡ç®—å›¾è®©ä½ èƒ½å¤Ÿè½»æ¾å¤„ç†å˜é•¿è¾“å…¥ã€æ¡ä»¶åˆ†æ”¯å’Œå¤æ‚çš„æ§åˆ¶æµ</li>
<li><strong>ç›´è§‚æ€§</strong>ï¼šä¸ NumPy ç›¸ä¼¼çš„ API è®¾è®¡ï¼Œå­¦ä¹ æ›²çº¿å¹³ç¼“</li>
<li><strong>ç”Ÿäº§çº§æ€§èƒ½</strong>ï¼šé€šè¿‡ TorchScript ç­‰æŠ€æœ¯ï¼Œå¯ä»¥æ— ç¼å°†æ¨¡å‹éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ</li>
</ul>
<h2 data-id="heading-1">2. ç¯å¢ƒæ­å»ºä¸ "Hello, World"</h2>
<h3 data-id="heading-2">å®‰è£…è¯´æ˜</h3>
<p>PyTorch æ”¯æŒå¤šç§å®‰è£…æ–¹å¼ï¼Œæ¨èæ ¹æ®ä½ çš„ç¡¬ä»¶é…ç½®é€‰æ‹©åˆé€‚çš„ç‰ˆæœ¬ï¼š</p>
<p><strong>æ–¹æ³•ä¸€ï¼šä½¿ç”¨ pip å®‰è£…ï¼ˆæœ€ç®€å•ï¼‰</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># CPU ç‰ˆæœ¬ï¼ˆé€‚ç”¨äºæ—  NVIDIA æ˜¾å¡çš„æƒ…å†µï¼‰</span>
pip3 install torch torchvision torchaudio

<span class="hljs-comment"># GPU ç‰ˆæœ¬ï¼ˆéœ€è¦ NVIDIA æ˜¾å¡ï¼ŒCUDA 12.6ï¼‰</span>
pip3 install torch torchvision torchaudio --index-url https://download.pytorch.org/whl/cu126
</code></pre>
<p><strong>æ–¹æ³•äºŒï¼šä½¿ç”¨ conda å®‰è£…ï¼ˆæ¨èï¼‰</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ</span>
conda create -n pytorch_env python=3.10
conda activate pytorch_env

<span class="hljs-comment"># CPU ç‰ˆæœ¬</span>
conda install pytorch torchvision torchaudio cpuonly -c pytorch

<span class="hljs-comment"># GPU ç‰ˆæœ¬ï¼ˆCUDA 12.6ï¼‰</span>
conda install pytorch torchvision torchaudio pytorch-cuda=12.6 -c pytorch -c nvidia
</code></pre>
<p><strong>å®‰è£…æ³¨æ„äº‹é¡¹ï¼š</strong></p>
<ul>
<li>PyTorch éœ€è¦ Python 3.10 æˆ–æ›´é«˜ç‰ˆæœ¬</li>
<li>GPU ç‰ˆæœ¬éœ€è¦å®‰è£…å¯¹åº”çš„ NVIDIA é©±åŠ¨å’Œ CUDA Toolkit</li>
<li>macOS ç”¨æˆ·ï¼ˆApple Siliconï¼‰å¯ä»¥ä½¿ç”¨ MPS åŠ é€Ÿï¼š<code>conda install pytorch -c pytorch -c apple</code></li>
</ul>
<h3 data-id="heading-3">"Hello, World" ç¤ºä¾‹</h3>
<p>è®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªæœ€ç®€å•çš„ä¾‹å­æ¥æ„Ÿå— PyTorch çš„é­…åŠ›ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> torch

<span class="hljs-comment"># åˆ›å»ºä¸€ä¸ªéšæœºå¼ é‡</span>
x = torch.rand(<span class="hljs-number">2</span>, <span class="hljs-number">3</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"éšæœºå¼ é‡ x:"</span>)
<span class="hljs-built_in">print</span>(x)

<span class="hljs-comment"># åŸºæœ¬è¿ç®—</span>
y = torch.ones(<span class="hljs-number">2</span>, <span class="hljs-number">3</span>)
z = x + y
<span class="hljs-built_in">print</span>(<span class="hljs-string">"\nx + y çš„ç»“æœ:"</span>)
<span class="hljs-built_in">print</span>(z)

<span class="hljs-comment"># æ£€æŸ¥ GPU æ˜¯å¦å¯ç”¨</span>
<span class="hljs-keyword">if</span> torch.cuda.is_available():
    device = torch.device(<span class="hljs-string">"cuda"</span>)
    x_gpu = x.to(device)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\nå¼ é‡å·²ç§»åŠ¨åˆ°è®¾å¤‡: <span class="hljs-subst">{x_gpu.device}</span>"</span>)
<span class="hljs-keyword">else</span>:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"\næœªæ£€æµ‹åˆ° GPUï¼Œä½¿ç”¨ CPU ç‰ˆæœ¬"</span>)
</code></pre>
<p><strong>ä»£ç é€è¡Œè§£é‡Šï¼š</strong></p>
<ul>
<li><code>import torch</code>ï¼šå¯¼å…¥ PyTorch ä¸»æ¨¡å—ï¼Œæ‰€æœ‰çš„å¼ é‡æ“ä½œéƒ½åœ¨è¿™ä¸ªæ¨¡å—ä¸‹</li>
<li><code>torch.rand(2, 3)</code>ï¼šåˆ›å»ºä¸€ä¸ªå½¢çŠ¶ä¸º 2Ã—3 çš„éšæœºå¼ é‡ï¼Œå…ƒç´ å€¼åœ¨ [0, 1) åŒºé—´å‡åŒ€åˆ†å¸ƒ</li>
<li><code>torch.ones(2, 3)</code>ï¼šåˆ›å»ºä¸€ä¸ªå…¨ä¸º 1 çš„å¼ é‡</li>
<li><code>x + y</code>ï¼šå¼ é‡é—´çš„é€å…ƒç´ ç›¸åŠ ï¼ŒPyTorch é‡è½½äº†åŠ æ³•è¿ç®—ç¬¦</li>
<li><code>torch.cuda.is_available()</code>ï¼šæ£€æŸ¥ç³»ç»Ÿæ˜¯å¦æ”¯æŒ CUDAï¼ˆNVIDIA GPU åŠ é€Ÿï¼‰</li>
<li><code>x.to(device)</code>ï¼šå°†å¼ é‡ç§»åŠ¨åˆ°æŒ‡å®šè®¾å¤‡ï¼ˆGPU æˆ– CPUï¼‰</li>
</ul>
<p><strong>é¢„æœŸè¾“å‡ºç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-lua" lang="lua">éšæœºå¼ é‡ x:
tensor(<span class="hljs-string">[[0.1234, 0.5678, 0.9012],
        [0.3456, 0.7890, 0.2345]]</span>)

x + y çš„ç»“æœ:
tensor(<span class="hljs-string">[[1.1234, 1.5678, 1.9012],
        [1.3456, 1.7890, 1.2345]]</span>)

æœªæ£€æµ‹åˆ° GPUï¼Œä½¿ç”¨ CPU ç‰ˆæœ¬
</code></pre>
<h2 data-id="heading-4">3. æ ¸å¿ƒæ¦‚å¿µè§£æ</h2>
<p>PyTorch çš„æ ¸å¿ƒå»ºç«‹åœ¨ä¸‰ä¸ªåŸºæœ¬æ¦‚å¿µä¹‹ä¸Šï¼šTensorï¼ˆå¼ é‡ï¼‰ã€Autogradï¼ˆè‡ªåŠ¨æ±‚å¯¼ï¼‰å’Œ Neural Networkï¼ˆç¥ç»ç½‘ç»œï¼‰ã€‚ç†è§£è¿™äº›æ¦‚å¿µæ˜¯æŒæ¡ PyTorch çš„å…³é”®ã€‚</p>
<h3 data-id="heading-5">3.1 Tensorï¼šæ•°æ®çš„åŸºæœ¬å•å…ƒ</h3>
<p>Tensor æ˜¯ PyTorch ä¸­æœ€åŸºæœ¬çš„æ•°æ®ç»“æ„ï¼Œå¯ä»¥ç†è§£ä¸ºå¤šç»´æ•°ç»„ã€‚å®ƒä¸ NumPy çš„ ndarray éå¸¸ç›¸ä¼¼ï¼Œä½†æœ‰ä¸¤ä¸ªå…³é”®åŒºåˆ«ï¼šæ”¯æŒ GPU åŠ é€Ÿå’Œè‡ªåŠ¨æ±‚å¯¼ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># ä»ä¸åŒæ–¹å¼åˆ›å»ºå¼ é‡</span>
<span class="hljs-keyword">import</span> torch

<span class="hljs-comment"># ä» Python åˆ—è¡¨åˆ›å»º</span>
data = [[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>], [<span class="hljs-number">3</span>, <span class="hljs-number">4</span>]]
tensor_from_list = torch.tensor(data)

<span class="hljs-comment"># åˆ›å»ºç‰¹å®šå½¢çŠ¶çš„éšæœºå¼ é‡</span>
random_tensor = torch.rand(<span class="hljs-number">3</span>, <span class="hljs-number">4</span>)  <span class="hljs-comment"># 3Ã—4 çš„éšæœºå¼ é‡</span>

<span class="hljs-comment"># åˆ›å»ºå…¨é›¶å¼ é‡</span>
zeros_tensor = torch.zeros(<span class="hljs-number">2</span>, <span class="hljs-number">3</span>)

<span class="hljs-comment"># æŸ¥çœ‹å¼ é‡å±æ€§</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"å½¢çŠ¶: <span class="hljs-subst">{random_tensor.shape}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ•°æ®ç±»å‹: <span class="hljs-subst">{random_tensor.dtype}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"å­˜å‚¨è®¾å¤‡: <span class="hljs-subst">{random_tensor.device}</span>"</span>)
</code></pre>
<p><strong>å¼ é‡çš„å…³é”®å±æ€§ï¼š</strong></p>
<ul>
<li><strong>shapeï¼ˆå½¢çŠ¶ï¼‰</strong>ï¼šæè¿°å¼ é‡æ¯ä¸ªç»´åº¦çš„é•¿åº¦ï¼Œå¦‚ (2, 3) è¡¨ç¤º 2 è¡Œ 3 åˆ—</li>
<li><strong>dtypeï¼ˆæ•°æ®ç±»å‹ï¼‰</strong>ï¼šå¦‚ <code>torch.float32</code>ã€<code>torch.int64</code> ç­‰</li>
<li><strong>deviceï¼ˆè®¾å¤‡ï¼‰</strong>ï¼šå¼ é‡å­˜å‚¨åœ¨ CPU è¿˜æ˜¯ GPU ä¸Š</li>
</ul>
<h3 data-id="heading-6">3.2 Autogradï¼šè‡ªåŠ¨æ±‚å¯¼å¼•æ“</h3>
<p>Autograd æ˜¯ PyTorch çš„è‡ªåŠ¨æ±‚å¯¼å¼•æ“ï¼Œå®ƒèƒ½å¤Ÿè‡ªåŠ¨è®¡ç®—ç¥ç»ç½‘ç»œä¸­å‚æ•°çš„æ¢¯åº¦ã€‚è¿™æ˜¯æ·±åº¦å­¦ä¹ çš„æ ¸å¿ƒâ€”â€”é€šè¿‡åå‘ä¼ æ’­ç®—æ³•æ›´æ–°æ¨¡å‹å‚æ•°ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># æ¼”ç¤ºè‡ªåŠ¨æ±‚å¯¼</span>
x = torch.tensor(<span class="hljs-number">2.0</span>, requires_grad=<span class="hljs-literal">True</span>)
y = x ** <span class="hljs-number">3</span>

<span class="hljs-comment"># è®¡ç®— y å¯¹ x çš„æ¢¯åº¦</span>
y.backward()

<span class="hljs-built_in">print</span>(<span class="hljs-string">f"x = <span class="hljs-subst">{x}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"y = xÂ³ = <span class="hljs-subst">{y}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"dy/dx = <span class="hljs-subst">{x.grad}</span>"</span>)  <span class="hljs-comment"># dy/dx = 3xÂ² = 3 * 4 = 12</span>
</code></pre>
<p><strong>Autograd çš„å·¥ä½œåŸç†ï¼š</strong></p>
<ol>
<li>å½“ä½ åˆ›å»ºå¼ é‡å¹¶è®¾ç½® <code>requires_grad=True</code> æ—¶ï¼ŒPyTorch å¼€å§‹è·Ÿè¸ªè¯¥å¼ é‡çš„æ‰€æœ‰æ“ä½œ</li>
<li>è¿™äº›æ“ä½œè¢«è®°å½•åœ¨è®¡ç®—å›¾ä¸­</li>
<li>è°ƒç”¨ <code>.backward()</code> æ—¶ï¼ŒPyTorch è‡ªåŠ¨è®¡ç®—æ¢¯åº¦å¹¶å­˜å‚¨åœ¨ <code>.grad</code> å±æ€§ä¸­</li>
<li>æ¢¯åº¦ç”¨äºæ›´æ–°ç¥ç»ç½‘ç»œä¸­çš„æƒé‡å‚æ•°</li>
</ol>
<h3 data-id="heading-7">3.3 æ ¸å¿ƒæ¦‚å¿µå…³ç³»å›¾</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TD
    A[Tensor å¼ é‡] --&gt; B[æ•°æ®å­˜å‚¨ä¸è¿ç®—]
    A --&gt; C[GPU åŠ é€Ÿ]
    A --&gt; D[requires_grad=True]
    
    D --&gt; E[Autograd è‡ªåŠ¨æ±‚å¯¼]
    E --&gt; F[è®¡ç®—å›¾æ„å»º]
    E --&gt; G[åå‘ä¼ æ’­]
    E --&gt; H[æ¢¯åº¦è®¡ç®—]
    
    H --&gt; I[ç¥ç»ç½‘ç»œè®­ç»ƒ]
    I --&gt; J[torch.nn æ¨¡å—]
    I --&gt; K[torch.optim ä¼˜åŒ–å™¨]
    
    J --&gt; L[æ¨¡å‹å®šä¹‰]
    K --&gt; M[å‚æ•°æ›´æ–°]
    
    C --&gt; N[CUDA/MPS æ”¯æŒ]
    B --&gt; O[ä¸ NumPy äº’æ“ä½œ]
    
    style A fill:#e1f5fe
    style E fill:#fff9c4
    style I fill:#f3e5f5
</code></pre>
<p><strong>æ¦‚å¿µé—´çš„äº¤äº’ï¼š</strong></p>
<ul>
<li>Tensor æ˜¯æ•°æ®çš„åŸºç¡€è½½ä½“ï¼Œæ—¢å¯ä»¥åœ¨ CPU ä¸Šè¿è¡Œï¼Œä¹Ÿå¯ä»¥é€šè¿‡ CUDA åœ¨ GPU ä¸ŠåŠ é€Ÿ</li>
<li>å½“ Tensor è®¾ç½® <code>requires_grad=True</code> æ—¶ï¼ŒAutograd è‡ªåŠ¨å¼€å§‹è·Ÿè¸ªæ“ä½œ</li>
<li><code>torch.nn</code> æ¨¡å—åŸºäº Tensor å’Œ Autograd æ„å»ºç¥ç»ç½‘ç»œå±‚</li>
<li><code>torch.optim</code> ä¼˜åŒ–å™¨ä½¿ç”¨ Autograd è®¡ç®—çš„æ¢¯åº¦æ¥æ›´æ–°ç½‘ç»œå‚æ•°</li>
</ul>
<h2 data-id="heading-8">4. å®æˆ˜æ¼”ç»ƒï¼šæ„å»ºç®€å•çš„å›¾åƒåˆ†ç±»å™¨</h2>
<p>è®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªå®Œæ•´çš„ä¾‹å­æ¥ä½“éªŒ PyTorch çš„å¼ºå¤§åŠŸèƒ½ã€‚æˆ‘ä»¬å°†æ„å»ºä¸€ä¸ªç®€å•çš„ç¥ç»ç½‘ç»œæ¥è¯†åˆ«æ‰‹å†™æ•°å­—ï¼ˆç»å…¸çš„ MNIST æ•°æ®é›†ï¼‰ã€‚</p>
<h3 data-id="heading-9">éœ€æ±‚åˆ†æ</h3>
<p>æˆ‘ä»¬çš„ç›®æ ‡æ˜¯åˆ›å»ºä¸€ä¸ªèƒ½å¤Ÿè¯†åˆ« 0-9 æ‰‹å†™æ•°å­—çš„ç¥ç»ç½‘ç»œæ¨¡å‹ã€‚è¿™ä¸ªé—®é¢˜æ˜¯æ·±åº¦å­¦ä¹ çš„"Hello World"ï¼Œä½†æ¶µç›–äº†æ‰€æœ‰æ ¸å¿ƒæ¦‚å¿µï¼šæ•°æ®åŠ è½½ã€æ¨¡å‹å®šä¹‰ã€è®­ç»ƒå’Œè¯„ä¼°ã€‚</p>
<h3 data-id="heading-10">æ–¹æ¡ˆè®¾è®¡</h3>
<p>æˆ‘ä»¬å°†ä½¿ç”¨ä»¥ä¸‹ PyTorch ç»„ä»¶ï¼š</p>
<ul>
<li><strong>torchvision.datasets</strong>ï¼šä¸‹è½½å’ŒåŠ è½½ MNIST æ•°æ®é›†</li>
<li><strong>torch.utils.data.DataLoader</strong>ï¼šæ‰¹é‡åŠ è½½æ•°æ®</li>
<li><strong>torch.nn</strong>ï¼šå®šä¹‰ç¥ç»ç½‘ç»œç»“æ„</li>
<li><strong>torch.optim</strong>ï¼šä½¿ç”¨ Adam ä¼˜åŒ–å™¨æ›´æ–°å‚æ•°</li>
</ul>
<h3 data-id="heading-11">ä»£ç å®ç°</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> torch
<span class="hljs-keyword">import</span> torch.nn <span class="hljs-keyword">as</span> nn
<span class="hljs-keyword">import</span> torch.optim <span class="hljs-keyword">as</span> optim
<span class="hljs-keyword">from</span> torchvision <span class="hljs-keyword">import</span> datasets, transforms
<span class="hljs-keyword">from</span> torch.utils.data <span class="hljs-keyword">import</span> DataLoader

<span class="hljs-comment"># 1. æ•°æ®å‡†å¤‡</span>
<span class="hljs-comment"># å®šä¹‰æ•°æ®é¢„å¤„ç†ï¼šè½¬æ¢ä¸ºå¼ é‡å¹¶å½’ä¸€åŒ–åˆ° [0, 1]</span>
transform = transforms.Compose([
    transforms.ToTensor(),
    transforms.Normalize((<span class="hljs-number">0.5</span>,), (<span class="hljs-number">0.5</span>,))
])

<span class="hljs-comment"># ä¸‹è½½å¹¶åŠ è½½è®­ç»ƒé›†å’Œæµ‹è¯•é›†</span>
train_dataset = datasets.MNIST(<span class="hljs-string">'./data'</span>, train=<span class="hljs-literal">True</span>, download=<span class="hljs-literal">True</span>, transform=transform)
test_dataset = datasets.MNIST(<span class="hljs-string">'./data'</span>, train=<span class="hljs-literal">False</span>, download=<span class="hljs-literal">True</span>, transform=transform)

<span class="hljs-comment"># åˆ›å»ºæ•°æ®åŠ è½½å™¨ï¼Œæ‰¹é‡å¤§å°ä¸º 64</span>
train_loader = DataLoader(train_dataset, batch_size=<span class="hljs-number">64</span>, shuffle=<span class="hljs-literal">True</span>)
test_loader = DataLoader(test_dataset, batch_size=<span class="hljs-number">64</span>, shuffle=<span class="hljs-literal">False</span>)

<span class="hljs-comment"># 2. å®šä¹‰ç¥ç»ç½‘ç»œ</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">SimpleNet</span>(nn.Module):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):
        <span class="hljs-built_in">super</span>(SimpleNet, self).__init__()
        <span class="hljs-comment"># è¾“å…¥å±‚ï¼š784 ä¸ªç¥ç»å…ƒï¼ˆ28Ã—28 å›¾åƒå±•å¹³ï¼‰</span>
        <span class="hljs-comment"># éšè—å±‚ï¼š128 ä¸ªç¥ç»å…ƒ</span>
        self.fc1 = nn.Linear(<span class="hljs-number">784</span>, <span class="hljs-number">128</span>)
        self.relu = nn.ReLU()
        <span class="hljs-comment"># è¾“å‡ºå±‚ï¼š10 ä¸ªç¥ç»å…ƒï¼ˆå¯¹åº” 0-9 åä¸ªæ•°å­—ï¼‰</span>
        self.fc2 = nn.Linear(<span class="hljs-number">128</span>, <span class="hljs-number">10</span>)
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">forward</span>(<span class="hljs-params">self, x</span>):
        <span class="hljs-comment"># å±•å¹³å›¾åƒå¼ é‡ï¼š(batch_size, 1, 28, 28) -&gt; (batch_size, 784)</span>
        x = x.view(x.size(<span class="hljs-number">0</span>), -<span class="hljs-number">1</span>)
        <span class="hljs-comment"># å‰å‘ä¼ æ’­</span>
        x = self.fc1(x)
        x = self.relu(x)
        x = self.fc2(x)
        <span class="hljs-keyword">return</span> x

<span class="hljs-comment"># åˆå§‹åŒ–æ¨¡å‹</span>
model = SimpleNet()

<span class="hljs-comment"># 3. å®šä¹‰æŸå¤±å‡½æ•°å’Œä¼˜åŒ–å™¨</span>
criterion = nn.CrossEntropyLoss()
optimizer = optim.Adam(model.parameters(), lr=<span class="hljs-number">0.001</span>)

<span class="hljs-comment"># 4. è®­ç»ƒæ¨¡å‹</span>
num_epochs = <span class="hljs-number">5</span>

<span class="hljs-keyword">for</span> epoch <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(num_epochs):
    model.train()  <span class="hljs-comment"># è®¾ç½®ä¸ºè®­ç»ƒæ¨¡å¼</span>
    running_loss = <span class="hljs-number">0.0</span>
    
    <span class="hljs-keyword">for</span> images, labels <span class="hljs-keyword">in</span> train_loader:
        <span class="hljs-comment"># æ¸…é›¶æ¢¯åº¦</span>
        optimizer.zero_grad()
        
        <span class="hljs-comment"># å‰å‘ä¼ æ’­</span>
        outputs = model(images)
        loss = criterion(outputs, labels)
        
        <span class="hljs-comment"># åå‘ä¼ æ’­å’Œä¼˜åŒ–</span>
        loss.backward()
        optimizer.step()
        
        running_loss += loss.item()
    
    <span class="hljs-comment"># æ‰“å°æ¯ä¸ª epoch çš„å¹³å‡æŸå¤±</span>
    avg_loss = running_loss / <span class="hljs-built_in">len</span>(train_loader)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f'Epoch [<span class="hljs-subst">{epoch+<span class="hljs-number">1</span>}</span>/<span class="hljs-subst">{num_epochs}</span>], Loss: <span class="hljs-subst">{avg_loss:<span class="hljs-number">.4</span>f}</span>'</span>)

<span class="hljs-comment"># 5. åœ¨æµ‹è¯•é›†ä¸Šè¯„ä¼°æ¨¡å‹</span>
model.<span class="hljs-built_in">eval</span>()  <span class="hljs-comment"># è®¾ç½®ä¸ºè¯„ä¼°æ¨¡å¼</span>
correct = <span class="hljs-number">0</span>
total = <span class="hljs-number">0</span>

<span class="hljs-keyword">with</span> torch.no_grad():  <span class="hljs-comment"># ä¸è®¡ç®—æ¢¯åº¦ï¼ŒèŠ‚çœå†…å­˜</span>
    <span class="hljs-keyword">for</span> images, labels <span class="hljs-keyword">in</span> test_loader:
        outputs = model(images)
        <span class="hljs-comment"># è·å–é¢„æµ‹ç»“æœï¼ˆæœ€å¤§å€¼çš„ç´¢å¼•ï¼‰</span>
        _, predicted = torch.<span class="hljs-built_in">max</span>(outputs.data, <span class="hljs-number">1</span>)
        total += labels.size(<span class="hljs-number">0</span>)
        correct += (predicted == labels).<span class="hljs-built_in">sum</span>().item()

accuracy = <span class="hljs-number">100</span> * correct / total
<span class="hljs-built_in">print</span>(<span class="hljs-string">f'æµ‹è¯•é›†å‡†ç¡®ç‡: <span class="hljs-subst">{accuracy:<span class="hljs-number">.2</span>f}</span>%'</span>)

<span class="hljs-comment"># 6. ä¿å­˜æ¨¡å‹</span>
torch.save(model.state_dict(), <span class="hljs-string">'simple_net.pth'</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"æ¨¡å‹å·²ä¿å­˜ä¸º simple_net.pth"</span>)
</code></pre>
<h3 data-id="heading-12">è¿è¡Œè¯´æ˜</h3>
<p><strong>è¿è¡Œç¯å¢ƒè¦æ±‚ï¼š</strong></p>
<ul>
<li>Python 3.10+</li>
<li>PyTorch 2.0+</li>
<li>torchvisionï¼ˆå›¾åƒå¤„ç†å·¥å…·åŒ…ï¼‰</li>
<li>è¶³å¤Ÿçš„ç£ç›˜ç©ºé—´ï¼ˆMNIST æ•°æ®é›†çº¦ 50MBï¼‰</li>
</ul>
<p><strong>è¿è¡Œæ­¥éª¤ï¼š</strong></p>
<ol>
<li>ç¡®ä¿å·²å®‰è£…æ‰€æœ‰ä¾èµ–ï¼š<code>pip install torch torchvision</code></li>
<li>å°†ä¸Šè¿°ä»£ç ä¿å­˜ä¸º <code>mnist_classifier.py</code></li>
<li>è¿è¡Œç¨‹åºï¼š<code>python mnist_classifier.py</code></li>
<li>ç¨‹åºä¼šè‡ªåŠ¨ä¸‹è½½ MNIST æ•°æ®é›†å¹¶å¼€å§‹è®­ç»ƒ</li>
</ol>
<p><strong>é¢„æœŸç»“æœï¼š</strong></p>
<pre><code class="hljs language-ini" lang="ini">Epoch <span class="hljs-section">[1/5]</span>, Loss: 0.3562
Epoch <span class="hljs-section">[2/5]</span>, Loss: 0.1824
Epoch <span class="hljs-section">[3/5]</span>, Loss: 0.1347
Epoch <span class="hljs-section">[4/5]</span>, Loss: 0.1078
Epoch <span class="hljs-section">[5/5]</span>, Loss: 0.0912
æµ‹è¯•é›†å‡†ç¡®ç‡: 96.85%
æ¨¡å‹å·²ä¿å­˜ä¸º simple_net.pth
</code></pre>
<p><strong>ç»“æœè§£è¯»ï¼š</strong></p>
<ul>
<li>æŸå¤±å€¼ï¼ˆLossï¼‰éšç€è®­ç»ƒé€æ¸ä¸‹é™ï¼Œè¯´æ˜æ¨¡å‹åœ¨å­¦ä¹ </li>
<li>æµ‹è¯•é›†å‡†ç¡®ç‡è¾¾åˆ° 96% ä»¥ä¸Šï¼Œè¡¨æ˜æ¨¡å‹å…·æœ‰è‰¯å¥½çš„æ³›åŒ–èƒ½åŠ›</li>
<li>æ¨¡å‹å‚æ•°è¢«ä¿å­˜ï¼Œå¯ä»¥ç”¨äºåç»­çš„é¢„æµ‹æˆ–è¿›ä¸€æ­¥è®­ç»ƒ</li>
</ul>
<h2 data-id="heading-13">5. æœ€ä½³å®è·µä¸å¸¸è§é™·é˜±</h2>
<p>åœ¨ä½¿ç”¨ PyTorch æ—¶ï¼Œæœ‰ä¸€äº›æœ€ä½³å®è·µå’Œå¸¸è§é”™è¯¯éœ€è¦ç‰¹åˆ«æ³¨æ„ã€‚éµå¾ªè¿™äº›åŸåˆ™å¯ä»¥é¿å…å¾ˆå¤šå‘ï¼Œæé«˜å¼€å‘æ•ˆç‡ã€‚</p>
<h3 data-id="heading-14">å¸¸è§é”™è¯¯åŠè§£å†³æ–¹æ¡ˆ</h3>
<p><strong>é”™è¯¯ 1ï¼šè®¾å¤‡ä¸åŒ¹é…</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># âŒ é”™è¯¯åšæ³•ï¼šGPU å¼ é‡å’Œ CPU å¼ é‡ç›´æ¥è¿ç®—</span>
x = torch.tensor([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>])  <span class="hljs-comment"># CPU å¼ é‡</span>
y = torch.tensor([<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>]).cuda()  <span class="hljs-comment"># GPU å¼ é‡</span>
z = x + y  <span class="hljs-comment"># æŠ¥é”™ï¼è®¾å¤‡ä¸åŒ¹é…</span>

<span class="hljs-comment"># âœ… æ­£ç¡®åšæ³•ï¼šç¡®ä¿æ‰€æœ‰å¼ é‡åœ¨åŒä¸€è®¾å¤‡ä¸Š</span>
device = torch.device(<span class="hljs-string">"cuda"</span> <span class="hljs-keyword">if</span> torch.cuda.is_available() <span class="hljs-keyword">else</span> <span class="hljs-string">"cpu"</span>)
x = torch.tensor([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]).to(device)
y = torch.tensor([<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>]).to(device)
z = x + y  <span class="hljs-comment"># æ­£å¸¸è¿ç®—</span>
</code></pre>
<p><strong>é”™è¯¯ 2ï¼šæ¢¯åº¦ç´¯ç§¯</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># âŒ é”™è¯¯åšæ³•ï¼šå¿˜è®°æ¸…é›¶æ¢¯åº¦å¯¼è‡´æ¢¯åº¦ç´¯ç§¯</span>
optimizer = optim.Adam(model.parameters(), lr=<span class="hljs-number">0.001</span>)

<span class="hljs-keyword">for</span> epoch <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(num_epochs):
    <span class="hljs-keyword">for</span> batch_x, batch_y <span class="hljs-keyword">in</span> dataloader:
        outputs = model(batch_x)
        loss = criterion(outputs, batch_y)
        loss.backward()  <span class="hljs-comment"># æ¢¯åº¦ç´¯ç§¯ï¼</span>
        optimizer.step()
        <span class="hljs-comment"># ç¼ºå°‘ optimizer.zero_grad()</span>
</code></pre>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># âœ… æ­£ç¡®åšæ³•ï¼šæ¯æ¬¡åå‘ä¼ æ’­å‰æ¸…é›¶æ¢¯åº¦</span>
<span class="hljs-keyword">for</span> epoch <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(num_epochs):
    <span class="hljs-keyword">for</span> batch_x, batch_y <span class="hljs-keyword">in</span> dataloader:
        optimizer.zero_grad()  <span class="hljs-comment"># æ¸…é›¶æ¢¯åº¦</span>
        outputs = model(batch_x)
        loss = criterion(outputs, batch_y)
        loss.backward()
        optimizer.step()
</code></pre>
<p><strong>é”™è¯¯ 3ï¼šæ•°æ®ç±»å‹ä¸åŒ¹é…</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># âŒ é”™è¯¯åšæ³•ï¼šä¸åŒæ•°æ®ç±»å‹å¼ é‡è¿ç®—</span>
a = torch.tensor([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>], dtype=torch.int32)
b = torch.tensor([<span class="hljs-number">0.5</span>, <span class="hljs-number">0.5</span>], dtype=torch.float32)
c = a + b  <span class="hljs-comment"># å¯èƒ½ä¼šæŠ¥é”™æˆ–ç²¾åº¦ä¸¢å¤±</span>

<span class="hljs-comment"># âœ… æ­£ç¡®åšæ³•ï¼šç»Ÿä¸€æ•°æ®ç±»å‹</span>
a = a.to(torch.float32)
c = a + b  <span class="hljs-comment"># æ­£å¸¸è¿ç®—</span>
</code></pre>
<h3 data-id="heading-15">æœ€ä½³å®è·µå»ºè®®</h3>
<p><strong>1. ä½¿ç”¨ DataLoader é«˜æ•ˆåŠ è½½æ•°æ®</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># æ¨èé…ç½®</span>
dataloader = DataLoader(
    dataset,
    batch_size=<span class="hljs-number">32</span>,        <span class="hljs-comment"># æ ¹æ® GPU å†…å­˜è°ƒæ•´</span>
    shuffle=<span class="hljs-literal">True</span>,         <span class="hljs-comment"># è®­ç»ƒé›†æ‰“ä¹±</span>
    num_workers=<span class="hljs-number">4</span>,        <span class="hljs-comment"># å¤šè¿›ç¨‹åŠ è½½æ•°æ®</span>
    pin_memory=<span class="hljs-literal">True</span>       <span class="hljs-comment"># åŠ é€Ÿ GPU æ•°æ®ä¼ è¾“</span>
)
</code></pre>
<p><strong>2. å–„ç”¨ GPU åŠ é€Ÿ</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># æ£€æŸ¥å¹¶ä½¿ç”¨ GPU</span>
device = torch.device(<span class="hljs-string">"cuda"</span> <span class="hljs-keyword">if</span> torch.cuda.is_available() <span class="hljs-keyword">else</span> <span class="hljs-string">"cpu"</span>)
model = model.to(device)

<span class="hljs-comment"># è®­ç»ƒæ—¶ç§»åŠ¨æ•°æ®åˆ° GPU</span>
<span class="hljs-keyword">for</span> inputs, labels <span class="hljs-keyword">in</span> dataloader:
    inputs, labels = inputs.to(device), labels.to(device)
</code></pre>
<p><strong>3. æ¨¡å‹ä¿å­˜ä¸åŠ è½½</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># ä¿å­˜æ¨¡å‹</span>
torch.save({
    <span class="hljs-string">'model_state_dict'</span>: model.state_dict(),
    <span class="hljs-string">'optimizer_state_dict'</span>: optimizer.state_dict(),
    <span class="hljs-string">'epoch'</span>: epoch,
}, <span class="hljs-string">'checkpoint.pth'</span>)

<span class="hljs-comment"># åŠ è½½æ¨¡å‹</span>
checkpoint = torch.load(<span class="hljs-string">'checkpoint.pth'</span>)
model.load_state_dict(checkpoint[<span class="hljs-string">'model_state_dict'</span>])
optimizer.load_state_dict(checkpoint[<span class="hljs-string">'optimizer_state_dict'</span>])
epoch = checkpoint[<span class="hljs-string">'epoch'</span>]
</code></pre>
<p><strong>4. ä½¿ç”¨éªŒè¯é›†ç›‘æ§è®­ç»ƒ</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­ç›‘æ§éªŒè¯é›†å‡†ç¡®ç‡</span>
best_acc = <span class="hljs-number">0.0</span>

<span class="hljs-keyword">for</span> epoch <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(num_epochs):
    <span class="hljs-comment"># è®­ç»ƒä»£ç ...</span>
    
    <span class="hljs-comment"># éªŒè¯</span>
    model.<span class="hljs-built_in">eval</span>()
    val_acc = evaluate(model, val_loader)
    
    <span class="hljs-comment"># ä¿å­˜æœ€ä½³æ¨¡å‹</span>
    <span class="hljs-keyword">if</span> val_acc &gt; best_acc:
        best_acc = val_acc
        torch.save(model.state_dict(), <span class="hljs-string">'best_model.pth'</span>)
    
    model.train()
</code></pre>
<h3 data-id="heading-16">æ€§èƒ½ä¼˜åŒ–æŠ€å·§</h3>
<ul>
<li><strong>æ‰¹é‡å¤§å°ï¼ˆBatch Sizeï¼‰</strong>ï¼šåœ¨ GPU å†…å­˜å…è®¸çš„æƒ…å†µä¸‹ï¼Œå¢å¤§æ‰¹é‡å¤§å°å¯ä»¥æé«˜ GPU åˆ©ç”¨ç‡</li>
<li><strong>æ··åˆç²¾åº¦è®­ç»ƒ</strong>ï¼šä½¿ç”¨ <code>torch.cuda.amp</code> å¯ä»¥åŠ é€Ÿè®­ç»ƒå¹¶å‡å°‘å†…å­˜å ç”¨</li>
<li><strong>æ¨¡å‹å¹¶è¡Œ</strong>ï¼šå¯¹äºè¶…å¤§æ¨¡å‹ï¼Œå¯ä»¥å°†æ¨¡å‹çš„ä¸åŒå±‚åˆ†å¸ƒåˆ°å¤šä¸ª GPU ä¸Š</li>
<li><strong>æ¢¯åº¦ç´¯ç§¯</strong>ï¼šå½“æ‰¹é‡å¤§å°å—é™äº GPU å†…å­˜æ—¶ï¼Œå¯ä»¥é€šè¿‡ç´¯ç§¯æ¢¯åº¦æ¨¡æ‹Ÿæ›´å¤§çš„æ‰¹é‡</li>
</ul>
<h2 data-id="heading-17">6. è¿›é˜¶æŒ‡å¼•</h2>
<p>æŒæ¡åŸºç¡€ä¹‹åï¼ŒPyTorch è¿˜æœ‰è®¸å¤šé«˜çº§ç‰¹æ€§å’Œä¸°å¯Œçš„ç”Ÿæ€ç³»ç»Ÿå€¼å¾—æ¢ç´¢ã€‚</p>
<h3 data-id="heading-18">é«˜çº§åŠŸèƒ½</h3>
<p><strong>1. è‡ªå®šä¹‰å±‚å’ŒæŸå¤±å‡½æ•°</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># è‡ªå®šä¹‰å±‚</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">CustomLayer</span>(nn.Module):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, in_features, out_features</span>):
        <span class="hljs-built_in">super</span>().__init__()
        self.linear = nn.Linear(in_features, out_features)
        self.custom_param = nn.Parameter(torch.randn(out_features))
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">forward</span>(<span class="hljs-params">self, x</span>):
        <span class="hljs-keyword">return</span> self.linear(x) + self.custom_param

<span class="hljs-comment"># è‡ªå®šä¹‰æŸå¤±å‡½æ•°</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">custom_loss</span>(<span class="hljs-params">output, target</span>):
    <span class="hljs-keyword">return</span> torch.mean((output - target) ** <span class="hljs-number">2</span>) + torch.<span class="hljs-built_in">abs</span>(output).mean()
</code></pre>
<p><strong>2. ä½¿ç”¨é¢„è®­ç»ƒæ¨¡å‹ï¼ˆè¿ç§»å­¦ä¹ ï¼‰</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> torchvision <span class="hljs-keyword">import</span> models

<span class="hljs-comment"># åŠ è½½é¢„è®­ç»ƒçš„ ResNet</span>
model = models.resnet18(pretrained=<span class="hljs-literal">True</span>)

<span class="hljs-comment"># å†»ç»“éƒ¨åˆ†å±‚</span>
<span class="hljs-keyword">for</span> param <span class="hljs-keyword">in</span> model.parameters():
    param.requires_grad = <span class="hljs-literal">False</span>

<span class="hljs-comment"># æ›¿æ¢æœ€åä¸€å±‚</span>
model.fc = nn.Linear(<span class="hljs-number">512</span>, num_classes)
</code></pre>
<p><strong>3. åˆ†å¸ƒå¼è®­ç»ƒ</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> torch.distributed <span class="hljs-keyword">as</span> dist

<span class="hljs-comment"># åˆå§‹åŒ–åˆ†å¸ƒå¼ç¯å¢ƒ</span>
dist.init_process_group(backend=<span class="hljs-string">'nccl'</span>)

<span class="hljs-comment"># åŒ…è£…æ¨¡å‹</span>
model = nn.parallel.DistributedDataParallel(model)
</code></pre>
<h3 data-id="heading-19">ç”Ÿæ€ç³»ç»Ÿæ‰©å±•</h3>
<p>PyTorch æ‹¥æœ‰åºå¤§çš„ç”Ÿæ€ç³»ç»Ÿï¼Œä»¥ä¸‹æ˜¯ä¸€äº›é‡è¦çš„æ‰©å±•åº“ï¼š</p>
<ul>
<li><strong>torchvision</strong>ï¼šè®¡ç®—æœºè§†è§‰å·¥å…·åŒ…ï¼ŒåŒ…å«æ•°æ®é›†ã€æ¨¡å‹å’Œå›¾åƒå˜æ¢</li>
<li><strong>torchaudio</strong>ï¼šéŸ³é¢‘å¤„ç†å·¥å…·åŒ…</li>
<li><strong>torchtext</strong>ï¼šè‡ªç„¶è¯­è¨€å¤„ç†å·¥å…·åŒ…</li>
<li><strong>PyTorch Lightning</strong>ï¼šè½»é‡çº§è®­ç»ƒæ¡†æ¶ï¼Œç®€åŒ–è®­ç»ƒå¾ªç¯</li>
<li><strong>Hugging Face Transformers</strong>ï¼šæœ€æµè¡Œçš„ NLP é¢„è®­ç»ƒæ¨¡å‹åº“</li>
<li><strong>Captum</strong>ï¼šæ¨¡å‹å¯è§£é‡Šæ€§å·¥å…·</li>
</ul>
<h3 data-id="heading-20">å­¦ä¹ èµ„æºæ¨è</h3>
<p><strong>å®˜æ–¹èµ„æºï¼š</strong></p>
<ul>
<li>PyTorch å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fpytorch.org%2Fdocs%2F" target="_blank" title="https://pytorch.org/docs/" ref="nofollow noopener noreferrer">pytorch.org/docs/</a></li>
<li>PyTorch æ•™ç¨‹ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fpytorch.org%2Ftutorials%2F" target="_blank" title="https://pytorch.org/tutorials/" ref="nofollow noopener noreferrer">pytorch.org/tutorials/</a></li>
<li>PyTorch è®ºæ–‡ï¼šé˜…è¯» PyTorch å›¢é˜Ÿå‘è¡¨çš„è®ºæ–‡äº†è§£è®¾è®¡ç†å¿µ</li>
</ul>
<p><strong>ç¤¾åŒºèµ„æºï¼š</strong></p>
<ul>
<li>PyTorch è®ºå›ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdiscuss.pytorch.org%2F" target="_blank" title="https://discuss.pytorch.org/" ref="nofollow noopener noreferrer">discuss.pytorch.org/</a></li>
<li>GitHub ä¸Šä¸°å¯Œçš„å¼€æºé¡¹ç›®</li>
<li>ä¼˜ç§€çš„åšå®¢å’Œè§†é¢‘æ•™ç¨‹ï¼ˆå¦‚è«çƒ¦Pythonã€å´æ©è¾¾æ·±åº¦å­¦ä¹ è¯¾ç¨‹ï¼‰</li>
</ul>
<p><strong>å®è·µé¡¹ç›®ï¼š</strong></p>
<ul>
<li>å¤ç°ç»å…¸è®ºæ–‡ï¼šå°è¯•ç”¨ PyTorch å®ç° ResNetã€Transformer ç­‰ç»å…¸æ¨¡å‹</li>
<li>å‚åŠ  Kaggle æ¯”èµ›ï¼šåœ¨çœŸå®é—®é¢˜ä¸Šç£¨ç»ƒæŠ€èƒ½</li>
<li>è´¡çŒ®å¼€æºé¡¹ç›®ï¼šä¸º PyTorch ç”Ÿæ€ç³»ç»Ÿåšå‡ºè´¡çŒ®</li>
</ul>
<p>PyTorch çš„å­¦ä¹ æ›²çº¿è™½ç„¶å¹³ç¼“ï¼Œä½†è¦ç²¾é€šä»éœ€è¦å¤§é‡çš„å®è·µå’Œæ¢ç´¢ã€‚å»ºè®®ä»ç®€å•çš„é¡¹ç›®å¼€å§‹ï¼Œé€æ­¥æŒ‘æˆ˜æ›´å¤æ‚çš„ä»»åŠ¡ï¼Œå¤šé˜…è¯»ä¼˜ç§€ä»£ç ï¼Œå…³æ³¨ç¤¾åŒºåŠ¨æ€ã€‚æ·±åº¦å­¦ä¹ æ˜¯ä¸€ä¸ªå¿«é€Ÿå‘å±•çš„é¢†åŸŸï¼Œä¿æŒå¥½å¥‡å¿ƒå’ŒæŒç»­å­¦ä¹ çš„å¿ƒæ€è‡³å…³é‡è¦ã€‚</p>
<p>ç¥ä½ åœ¨ PyTorch çš„å­¦ä¹ ä¹‹æ—…ä¸­æ”¶è·æ»¡æ»¡ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Redis è°ƒä¼˜ï¼šå¿…é¡»å…³æ³¨çš„å‡ ä¸ªå‚æ•°]]></title>    <link>https://juejin.cn/post/7602935146706632750</link>    <guid>https://juejin.cn/post/7602935146706632750</guid>    <pubDate>2026-02-05T06:49:57.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602935146706632750" data-draft-id="7602928386596601882" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Redis è°ƒä¼˜ï¼šå¿…é¡»å…³æ³¨çš„å‡ ä¸ªå‚æ•°"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-02-05T06:49:57.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¥å¥‡å°æ±¤åœ†"/> <meta itemprop="url" content="https://juejin.cn/user/1151943919285431"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Redis è°ƒä¼˜ï¼šå¿…é¡»å…³æ³¨çš„å‡ ä¸ªå‚æ•°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1151943919285431/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¥å¥‡å°æ±¤åœ†
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-05T06:49:57.000Z" title="Thu Feb 05 2026 06:49:57 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-05
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">èƒŒæ™¯</h2>
<p>åœ¨ä¸€å°æœªç»è¿‡ä»»ä½•è°ƒä¼˜çš„Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fzhida.zhihu.com%2Fsearch%3Fcontent_id%3D269234620%26content_type%3DArticle%26match_order%3D1%26q%3DLinux%26zhida_source%3Dentity" target="_blank" title="https://zhida.zhihu.com/search?content_id=269234620&amp;content_type=Article&amp;match_order=1&amp;q=Linux&amp;zhida_source=entity" ref="nofollow noopener noreferrer">Linux</a>Â æœåŠ¡å™¨ä¸Šéƒ¨ç½² Redisï¼Œåœ¨ Redis å¯åŠ¨è¿‡ç¨‹ä¸­ï¼Œå¯èƒ½ä¼šç¢°åˆ°ä»¥ä¸‹è­¦å‘Šä¿¡æ¯ã€‚</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-number">1363410</span><span class="hljs-string">:M</span> <span class="hljs-number">15</span> <span class="hljs-string">Jan</span> <span class="hljs-number">2026 13:07:34.879</span> <span class="hljs-comment"># WARNING: The TCP backlog setting of 512 cannot be enforced because /proc/sys/net/core/somaxconn is set to the lower value of 128.</span>
<span class="hljs-number">1363410</span><span class="hljs-string">:M</span> <span class="hljs-number">15</span> <span class="hljs-string">Jan</span> <span class="hljs-number">2026 13:07:34.879</span> <span class="hljs-comment"># Server initialized</span>
<span class="hljs-number">1363410</span><span class="hljs-string">:M</span> <span class="hljs-number">15</span> <span class="hljs-string">Jan</span> <span class="hljs-number">2026 13:07:34.879</span> <span class="hljs-comment"># WARNING Memory overcommit must be enabled! Without it, a background save or replication may fail under low memory condition. Being disabled, it can can also cause failures without low memory condition, see https://github.com/jemalloc/jemalloc/issues/1328. To fix this issue add 'vm.overcommit_memory = 1' to /etc/sysctl.conf and then reboot or run the command 'sysctl vm.overcommit_memory=1' for this to take effect.</span>
<span class="hljs-number">1363410</span><span class="hljs-string">:M</span> <span class="hljs-number">15</span> <span class="hljs-string">Jan</span> <span class="hljs-number">2026 13:07:34.879</span> <span class="hljs-comment"># WARNING You have Transparent Huge Pages (THP) support enabled in your kernel. This will create latency and memory usage issues with Redis. To fix this issue run the command 'echo madvise &gt; /sys/kernel/mm/transparent_hugepage/enabled' as root, and add it to your /etc/rc.local in order to retain the setting after a reboot. Redis must be restarted after THP is disabled (set to 'madvise' or 'never').</span>
</code></pre>
<p>è¿™äº›è­¦å‘Šä¿¡æ¯å®é™…ä¸Šæ˜¯åœ¨æé†’æˆ‘ä»¬ï¼Œæ“ä½œç³»ç»Ÿçš„æŸäº›å‚æ•°è®¾ç½®å¾—ä¸åˆç†ï¼Œéœ€è¦è°ƒæ•´ï¼Œå¦åˆ™ä¼šå½±å“ Redis çš„æ€§èƒ½å’Œç¨³å®šæ€§ã€‚</p>
<p>é™¤æ­¤ä¹‹å¤–ï¼ŒRedis è¿˜æä¾›äº†å¤šä¸ªå‚æ•°ï¼Œç”¨äºåœ¨è¿›ç¨‹æˆ–è¿æ¥çº§åˆ«è¿›è¡Œå†…æ ¸å‚æ•°ä¼˜åŒ–ï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li><strong>tcp-backlog</strong>ï¼šè®¾ç½® TCP æœåŠ¡å™¨ä¸­<code>listen()</code>çš„ backlog å‚æ•°ã€‚</li>
<li><strong>disable-thp</strong>ï¼šåœ¨è¿›ç¨‹çº§åˆ«å…³é—­é€æ˜å¤§é¡µï¼ˆTHPï¼‰ã€‚</li>
<li><strong>tcp-keepalive</strong>ï¼šåœ¨è¿æ¥çº§åˆ«è®¾ç½®Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fzhida.zhihu.com%2Fsearch%3Fcontent_id%3D269234620%26content_type%3DArticle%26match_order%3D1%26q%3DTCP%2BKeepalive%26zhida_source%3Dentity" target="_blank" title="https://zhida.zhihu.com/search?content_id=269234620&amp;content_type=Article&amp;match_order=1&amp;q=TCP+Keepalive&amp;zhida_source=entity" ref="nofollow noopener noreferrer">TCP Keepalive</a>Â å‚æ•°ã€‚</li>
<li><strong>server_cpulistã€bio_cpulist</strong>ï¼šå¯å°† Redis è¿›ç¨‹æˆ–åå° I/O çº¿ç¨‹ç»‘å®šåˆ°æŒ‡å®š CPUã€‚</li>
<li><strong>oom-score-adj</strong>ã€<strong>oom-score-adj-values</strong>ï¼šè°ƒæ•´è¿›ç¨‹çš„ oom_scoreã€‚oom_score æ˜¯ Linux å†…æ ¸ä¸ºæ¯ä¸ªè¿›ç¨‹è®¡ç®—çš„ä¸€ä¸ªæ•´æ•°å€¼ï¼ˆä½äº<code>/proc/[pid]/oom_score</code>ï¼‰ï¼Œåˆ†æ•°è¶Šé«˜ï¼Œè¿›ç¨‹åœ¨å†…å­˜ä¸è¶³æ—¶è¶Šå®¹æ˜“è¢« OOM Killer æ€æ­»ã€‚</li>
</ul>
<p>ä¸‹é¢ï¼Œæˆ‘ä»¬çœ‹çœ‹è¿™äº›å‚æ•°çš„å®ç°ç»†èŠ‚å’Œè®¾ç½®å»ºè®®ã€‚</p>
<h2 data-id="heading-1">tcp-backlog</h2>
<pre><code class="hljs language-sql" lang="sql">createIntConfig("tcp-backlog", <span class="hljs-keyword">NULL</span>, IMMUTABLE_CONFIG, <span class="hljs-number">0</span>, INT_MAX, server.tcp_backlog, <span class="hljs-number">511</span>, INTEGER_CONFIG, <span class="hljs-keyword">NULL</span>, <span class="hljs-keyword">NULL</span>), <span class="hljs-comment">/* TCP listen backlog. */</span>
</code></pre>
<p>tcp-backlog ç”¨äºè®¾ç½® TCP æœåŠ¡å™¨åœ¨è°ƒç”¨<code>listen()</code>æ—¶ä½¿ç”¨çš„ backlog å‚æ•°ã€‚è¯¥å‚æ•°ç”¨äºæŒ‡å®šå·²å®Œæˆä¸‰æ¬¡æ¡æ‰‹ã€ä½†å°šæœªè¢«<code>accept()</code>å¤„ç†çš„è¿æ¥é˜Ÿåˆ—é•¿åº¦ã€‚</p>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªå…¸å‹çš„ TCP æœåŠ¡å™¨æµç¨‹ï¼š</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// 1. åˆ›å»º socket</span>
int fd = <span class="hljs-built_in">socket</span>(AF_INET, SOCK_STREAM, <span class="hljs-number">0</span>); 
<span class="hljs-comment">// 2. ç»‘å®š IP + ç«¯å£</span>
<span class="hljs-built_in">bind</span>(fd, ...);   
<span class="hljs-comment">// 3. å¼€å§‹ç›‘å¬</span>
<span class="hljs-built_in">listen</span>(fd, backlog);       
<span class="hljs-comment">// 4. æ¥å—è¿æ¥</span>
int connfd = <span class="hljs-built_in">accept</span>(fd, ...);
</code></pre>
<p>å½“å®¢æˆ·ç«¯å‘èµ·è¿æ¥æ—¶ï¼š</p>
<ol>
<li>TCP ä¸‰æ¬¡æ¡æ‰‹å®Œæˆåï¼Œè¿æ¥ä¼šè¢«æ”¾å…¥å·²å®Œæˆè¿æ¥é˜Ÿåˆ—ï¼ˆaccept queueï¼‰ï¼Œå…¶é•¿åº¦ç”±<code>listen(backlog)</code>æ§åˆ¶ã€‚</li>
<li>æœåŠ¡å™¨é€šè¿‡<code>accept()</code>ä»é˜Ÿåˆ—ä¸­å–èµ°è¿æ¥ï¼Œäº¤ç»™åº”ç”¨å±‚å¤„ç†ã€‚</li>
<li>å½“å·²å®Œæˆè¿æ¥é˜Ÿåˆ—å·²æ»¡æ—¶ï¼Œæ–°å®Œæˆä¸‰æ¬¡æ¡æ‰‹çš„è¿æ¥æ— æ³•è¿›å…¥ accept queueï¼Œå†…æ ¸é€šå¸¸ä¼šä¸¢å¼ƒæˆ–å»¶è¿Ÿ ACKï¼Œå¯¼è‡´å®¢æˆ·ç«¯å‡ºç°è¿æ¥è¶…æ—¶ã€é‡ä¼ ã€‚</li>
</ol>
<p>tcp-backlog çš„é»˜è®¤å€¼ä¸º 511ï¼Œå¯¹åº”çš„å†…å­˜å˜é‡ä¸º server.tcp_backlogã€‚</p>
<pre><code class="hljs language-perl" lang="perl">static <span class="hljs-keyword">int</span> anetListen(char *err, <span class="hljs-keyword">int</span> s, struct sockaddr *sa, socklen_t len, <span class="hljs-keyword">int</span> backlog) {
    <span class="hljs-regexp">//</span> å°† <span class="hljs-keyword">socket</span> ç»‘å®šåˆ°æŒ‡å®šçš„ IP å’Œç«¯å£
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">bind</span>(s,sa,len) == -<span class="hljs-number">1</span>) {
        anetSetError(err, <span class="hljs-string">"bind: %s"</span>, strerror(errno));
        <span class="hljs-keyword">close</span>(s);
        <span class="hljs-keyword">return</span> ANET_ERR;
    }
    // å°† <span class="hljs-keyword">socket</span> è®¾ç½®ä¸ºç›‘å¬çŠ¶æ€ï¼Œå¼€å§‹æ¥æ”¶å®¢æˆ·ç«¯è¿æ¥ï¼Œbacklog æŒ‡å®šå†…æ ¸å…è®¸æ’é˜Ÿçš„æœ€å¤§æœªå¤„ç†è¿æ¥æ•°
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">listen</span>(s, backlog) == -<span class="hljs-number">1</span>) {
        anetSetError(err, <span class="hljs-string">"listen: %s"</span>, strerror(errno));
        <span class="hljs-keyword">close</span>(s);
        <span class="hljs-keyword">return</span> ANET_ERR;
    }
    <span class="hljs-keyword">return</span> ANET_OK;
}
</code></pre>
<p>å®ä¾‹åœ¨å¯åŠ¨æ—¶ï¼Œä¼šè°ƒç”¨<code>checkTcpBacklogSettings()</code>æ£€æŸ¥ server.tcp_backlog çš„é…ç½®æ˜¯å¦åˆç†ã€‚</p>
<pre><code class="hljs language-scss" lang="scss">void <span class="hljs-built_in">checkTcpBacklogSettings</span>(void) {
<span class="hljs-selector-id">#if</span> <span class="hljs-built_in">defined</span>(HAVE_PROC_SOMAXCONN)
    FILE *fp = <span class="hljs-built_in">fopen</span>("/proc/sys/net/core/somaxconn","r");
    char buf<span class="hljs-selector-attr">[1024]</span>;
    if (!fp) return;
    if (fgets(buf,sizeof(buf),fp) != NULL) {
        int somaxconn = <span class="hljs-built_in">atoi</span>(buf);
        if (somaxconn &gt; <span class="hljs-number">0</span> &amp;&amp; somaxconn &lt; server.tcp_backlog) {
            <span class="hljs-built_in">serverLog</span>(LL_WARNING,"WARNING: The TCP backlog setting of %d cannot be enforced because /proc/sys/net/core/somaxconn is set to the lower value of %d.", server.tcp_backlog, somaxconn);
        }
    }
    <span class="hljs-built_in">fclose</span>(fp);
...
<span class="hljs-selector-id">#endif</span>
}
</code></pre>
<p>å…·ä½“å®ç°ä¸Šï¼Œå®ƒä¼šè·å–<code>/proc/sys/net/core/somaxconn</code>çš„å€¼ã€‚</p>
<p>somaxconn å†³å®šäº† Linux å†…æ ¸å…è®¸çš„å•ä¸ª TCP socket çš„æœ€å¤§ backlog é˜Ÿåˆ—é•¿åº¦ï¼Œä¹Ÿå°±æ˜¯<code>listen()</code>çš„ backlog å‚æ•°åœ¨å†…æ ¸å±‚é¢çš„ä¸Šé™ã€‚</p>
<p>å¦‚æœ somaxconn çš„å€¼å°äº tcp-backlogï¼ŒRedis ä¼šæ‰“å°å¦‚ä¸‹ä¿¡æ¯ï¼Œæ­¤æ—¶ï¼Œåœ¨<code>listen()</code>å‡½æ•°ä¸­å®é™…ç”Ÿæ•ˆçš„å°±æ˜¯ somaxconn çš„å€¼ã€‚</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># WARNING: The TCP backlog setting of 512 cannot be enforced because /proc/sys/net/core/somaxconn is set to the lower value of 128.</span>
</code></pre>
<p>è®¾ç½®å»ºè®®ï¼šå¯¹äºæ™®é€šçš„ Web æœåŠ¡ï¼ˆå‡ ç™¾å¹¶å‘ï¼‰ï¼Œé»˜è®¤å€¼ï¼ˆ511ï¼‰å·²ç»è¶³å¤Ÿã€‚å¦‚æœæ˜¯é«˜å¹¶å‘æœåŠ¡ï¼ˆä¸Šä¸‡å¹¶å‘ TCP è¿æ¥ï¼‰ï¼Œå¯å°† backlog è°ƒæ•´ä¸º 4096 ç”šè‡³æ›´é«˜ã€‚</p>
<h2 data-id="heading-2">disable-thp</h2>
<pre><code class="hljs language-vbscript" lang="vbscript">createBoolConfig(<span class="hljs-string">"disable-thp"</span>, <span class="hljs-literal">NULL</span>, IMMUTABLE_CONFIG, <span class="hljs-built_in">server</span>.disable_thp, <span class="hljs-number">1</span>, <span class="hljs-literal">NULL</span>, <span class="hljs-literal">NULL</span>),
</code></pre>
<p>disable-thp ç”¨æ¥æ§åˆ¶æ˜¯å¦åœ¨è¿›ç¨‹çº§åˆ«å…³é—­é€æ˜å¤§é¡µã€‚é»˜è®¤å€¼æ˜¯ 1ï¼Œå¯¹åº”çš„å†…éƒ¨å˜é‡æ˜¯ server.disable_thpã€‚</p>
<p>å®ä¾‹åœ¨å¯åŠ¨æ—¶ï¼Œä¼šè°ƒç”¨<code>linuxMemoryWarnings</code>åˆ¤æ–­ Linux ç³»ç»Ÿå†…å­˜ç›¸å…³çš„é…ç½®ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">void linuxMemoryWarnings(void) {
    sds <span class="hljs-attr">err_msg</span> = NULL<span class="hljs-comment">;</span>
    if (checkOvercommit(&amp;err_msg) &lt; 0) {
        serverLog(LL_WARNING,"WARNING %s", err_msg)<span class="hljs-comment">;</span>
        sdsfree(err_msg)<span class="hljs-comment">;</span>
    }
    if (checkTHPEnabled(&amp;err_msg) &lt; 0) {
        <span class="hljs-attr">server.thp_enabled</span> = <span class="hljs-number">1</span><span class="hljs-comment">;</span>
        if (THPDisable() == 0) {
            <span class="hljs-attr">server.thp_enabled</span> = <span class="hljs-number">0</span><span class="hljs-comment">;</span>
        } else {
            serverLog(LL_WARNING, "WARNING %s", err_msg)<span class="hljs-comment">;</span>
        }
        sdsfree(err_msg)<span class="hljs-comment">;</span>
    }
}
</code></pre>
<p>åœ¨å…·ä½“å®ç°ä¸Šï¼Œè¯¥å‡½æ•°é¦–å…ˆä¼šè°ƒç”¨<code>checkOvercommit</code>è·å–<code>/proc/sys/vm/overcommit_memory</code>çš„å€¼ï¼Œå¦‚æœ overcommit_memory å€¼ä¸ä¸º 1ï¼Œåˆ™ä¼šæç¤ºä»¥ä¸‹è­¦å‘Šä¿¡æ¯ã€‚</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># WARNING Memory overcommit must be enabled! Without it, a background save or replication may fail under low memory condition. Being disabled, it can can also cause failures without low memory condition, see https://github.com/jemalloc/jemalloc/issues/1328. To fix this issue add 'vm.overcommit_memory = 1' to /etc/sysctl.conf and then reboot or run the command 'sysctl vm.overcommit_memory=1' for this to take effect.</span>
</code></pre>
<p>åœ¨ Redis ä¸­ï¼Œå»ºè®®å°† vm.overcommit_memory è®¾ç½®ä¸º 1ï¼Œå¦åˆ™<code>fork()</code>å­è¿›ç¨‹ï¼ˆå¦‚ RDBã€AOF rewriteã€å…¨é‡å¤åˆ¶ï¼‰æ“ä½œåœ¨ä½å†…å­˜æ—¶ä¼šå¤±è´¥ã€‚</p>
<p>æ¥ç€ï¼Œä¼šè°ƒç”¨<code>checkTHPEnabled</code>è·å–<code>/sys/kernel/mm/transparent_hugepage/enabled</code>çš„å€¼ï¼Œå¦‚æœå®ƒçš„å€¼ä¸º alwaysï¼Œåˆ™ä¼šè°ƒç”¨<code>THPDisable()</code>ã€‚</p>
<p>è¯¥å‡½æ•°ä¼šåŸºäº server.disable_thp çš„å€¼æ¥å†³å®šæ˜¯å¦ç¦ç”¨å½“å‰è¿›ç¨‹çš„é€æ˜å¤§é¡µã€‚</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;sys/prctl.h&gt;</span></span>
<span class="hljs-comment">/* since linux-3.5, kernel supports to set the state of the "THP disable" flag
 * for the calling thread. PR_SET_THP_DISABLE is defined in linux/prctl.h */</span>
<span class="hljs-function"><span class="hljs-type">static</span> <span class="hljs-type">int</span> <span class="hljs-title">THPDisable</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span> </span>{
    <span class="hljs-type">int</span> ret = -EINVAL;

    <span class="hljs-keyword">if</span> (!server.disable_thp)
        <span class="hljs-keyword">return</span> ret;

<span class="hljs-meta">#<span class="hljs-keyword">ifdef</span> PR_SET_THP_DISABLE</span>
    ret = <span class="hljs-built_in">prctl</span>(PR_SET_THP_DISABLE, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);
<span class="hljs-meta">#<span class="hljs-keyword">endif</span></span>

    <span class="hljs-keyword">return</span> ret;
}
</code></pre>
<p>å¦‚æœè¯¥å˜é‡çš„å€¼ä¸º 0ï¼Œåˆ™ä¸å…³é—­ï¼Œå¦‚æœä¸º 1ï¼Œåˆ™ä¼šè°ƒç”¨<code>prctl(PR_SET_THP_DISABLE, 1, 0, 0, 0)</code>ç¦ç”¨å½“å‰è¿›ç¨‹çš„é€æ˜å¤§é¡µã€‚</p>
<p>å¦‚æœæ“ä½œç³»ç»Ÿå¼€å¯äº†é€æ˜å¤§é¡µï¼Œä¸” Redis æ²¡æœ‰å…³é—­ï¼Œåˆ™ä¼šåœ¨æ—¥å¿—ä¸­æ‰“å°ä»¥ä¸‹ä¿¡æ¯ã€‚</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># WARNING You have Transparent Huge Pages (THP) support enabled in your kernel. This will create latency and memory usage issues with Redis. To fix this issue run the command 'echo madvise &gt; /sys/kernel/mm/transparent_hugepage/enabled' as root, and add it to your /etc/rc.local in order to retain the setting after a reboot. Redis must be restarted after THP is disabled (set to 'madvise' or 'never').</span>
</code></pre>
<p>åœ¨ Redis ä¸­ï¼Œå»ºè®®å…³é—­é€æ˜å¤§é¡µï¼Œå¦åˆ™<code>fork()</code>Â æ“ä½œå¯èƒ½å› ç®¡ç†å¤§é¡µè€Œæ˜¾è‘—å˜æ…¢ï¼Œè€Œä¸”å†…å­˜ç´§å¼ æ—¶ï¼Œåˆå¹¶/æ‹†åˆ†å¤§é¡µæ“ä½œä¹Ÿä¼šå¢åŠ  Redis å“åº”è€—æ—¶ã€‚</p>
<p>è®¾ç½®å»ºè®®ï¼šé»˜è®¤å€¼å³å¯ã€‚</p>
<h2 data-id="heading-3">tcp-keepalive</h2>
<pre><code class="hljs language-vbscript" lang="vbscript">createIntConfig(<span class="hljs-string">"tcp-keepalive"</span>, <span class="hljs-literal">NULL</span>, MODIFIABLE_CONFIG, <span class="hljs-number">0</span>, INT_MAX, <span class="hljs-built_in">server</span>.tcpkeepalive, <span class="hljs-number">300</span>, INTEGER_CONFIG, <span class="hljs-literal">NULL</span>, <span class="hljs-literal">NULL</span>),
</code></pre>
<p>tcp-keepalive çš„é»˜è®¤å€¼ä¸º 300ï¼Œå¯¹åº”çš„å†…éƒ¨å˜é‡æ˜¯ server.tcpkeepaliveã€‚</p>
<p>Redis ä¼šåœ¨å»ºç«‹ TCP è¿æ¥åè°ƒç”¨<code>anetKeepAlive</code>å‡½æ•°ï¼Œé€šè¿‡ setsockopt é…ç½®åº•å±‚ socket çš„ keepalive å‚æ•°ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">int anetKeepAlive(char *err, int fd, int interval)
{
    int <span class="hljs-keyword">val</span> = <span class="hljs-number">1</span>;
    <span class="hljs-comment">// å¯ç”¨ TCP keepalive</span>
    <span class="hljs-keyword">if</span> (setsockopt(fd, SOL_SOCKET, SO_KEEPALIVE, &amp;<span class="hljs-keyword">val</span>, sizeof(<span class="hljs-keyword">val</span>)) == -<span class="hljs-number">1</span>)
    {
        anetSetError(err, <span class="hljs-string">"setsockopt SO_KEEPALIVE: %s"</span>, strerror(errno));
        <span class="hljs-keyword">return</span> ANET_ERR;
    }
    <span class="hljs-comment">// è®¾ç½®é¦–æ¬¡æ¢æµ‹æ—¶é—´ï¼šç©ºé—² interval ç§’åå¼€å§‹å‘é€ç¬¬ä¸€ä¸ªæ¢æµ‹åŒ…</span>
    <span class="hljs-keyword">val</span> = interval;
    <span class="hljs-keyword">if</span> (setsockopt(fd, IPPROTO_TCP, TCP_KEEPIDLE, &amp;<span class="hljs-keyword">val</span>, sizeof(<span class="hljs-keyword">val</span>)) &lt; <span class="hljs-number">0</span>) {
        anetSetError(err, <span class="hljs-string">"setsockopt TCP_KEEPIDLE: %s\n"</span>, strerror(errno));
        <span class="hljs-keyword">return</span> ANET_ERR;
    }
    <span class="hljs-comment">// è®¾ç½®æ¢æµ‹é—´éš”ï¼šæ¯ interval/3 ç§’å‘é€ä¸€æ¬¡æ¢æµ‹åŒ…</span>
    <span class="hljs-keyword">val</span> = interval/<span class="hljs-number">3</span>;
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">val</span> == <span class="hljs-number">0</span>) <span class="hljs-keyword">val</span> = <span class="hljs-number">1</span>;
    <span class="hljs-keyword">if</span> (setsockopt(fd, IPPROTO_TCP, TCP_KEEPINTVL, &amp;<span class="hljs-keyword">val</span>, sizeof(<span class="hljs-keyword">val</span>)) &lt; <span class="hljs-number">0</span>) {
        anetSetError(err, <span class="hljs-string">"setsockopt TCP_KEEPINTVL: %s\n"</span>, strerror(errno));
        <span class="hljs-keyword">return</span> ANET_ERR;
    }
    <span class="hljs-comment">// è®¾ç½®æœ€å¤§æ¢æµ‹æ¬¡æ•°ï¼šè¿ç»­ 3 æ¬¡æ¢æµ‹å¤±è´¥ååˆ¤å®šè¿æ¥å·²æ­»</span>
    <span class="hljs-keyword">val</span> = <span class="hljs-number">3</span>;
    <span class="hljs-keyword">if</span> (setsockopt(fd, IPPROTO_TCP, TCP_KEEPCNT, &amp;<span class="hljs-keyword">val</span>, sizeof(<span class="hljs-keyword">val</span>)) &lt; <span class="hljs-number">0</span>) {
        anetSetError(err, <span class="hljs-string">"setsockopt TCP_KEEPCNT: %s\n"</span>, strerror(errno));
        <span class="hljs-keyword">return</span> ANET_ERR;
    }
    ...
    <span class="hljs-keyword">return</span> ANET_OK;
}
</code></pre>
<p>ä¸‹é¢æ˜¯ Redis ä¸­çš„è®¾ç½®ä¸ Linux å¯¹åº”å‚æ•°é»˜è®¤å€¼çš„å¯¹æ¯”ï¼š</p>





























<table><thead><tr><th>é€‰é¡¹</th><th>å¯¹åº”å†…æ ¸å‚æ•°</th><th>ä½œç”¨</th><th>ä»£ç é€»è¾‘ä¸é»˜è®¤å€¼å¯¹æ¯”</th></tr></thead><tbody><tr><td>TCP_KEEPIDLE</td><td>net.ipv4.tcp_keepalive_time</td><td>é¦–æ¬¡æ¢æµ‹çš„ç­‰å¾…æ—¶é—´ã€‚è¿æ¥ç©ºé—²å¤šä¹…åå‘é€ç¬¬ä¸€ä¸ªæ¢æµ‹åŒ…ã€‚</td><td>è®¾ä¸º tcp-keepaliveã€‚é»˜è®¤æ˜¯ 7200 ç§’ã€‚</td></tr><tr><td>TCP_KEEPINTVL</td><td>net.ipv4.tcp_keepalive_intvl</td><td>æ¢æµ‹é—´éš”ã€‚ä¸¤ä¸ªæ¢æµ‹åŒ…ä¹‹é—´çš„æ—¶é—´ã€‚</td><td>è®¾ä¸º tcp-keepalive/3ï¼ˆæœ€å°ä¸º1ï¼‰ã€‚é»˜è®¤æ˜¯ 75 ç§’ã€‚</td></tr><tr><td>TCP_KEEPCNT</td><td>net.ipv4.tcp_keepalive_probes</td><td>æ¢æµ‹æ¬¡æ•°ã€‚è¾¾åˆ°æ¬¡æ•°åä»æ— å“åº”åˆ™åˆ¤å®šè¿æ¥æ­»äº¡ã€‚</td><td>å›ºå®šè®¾ä¸º 3ã€‚é»˜è®¤æ˜¯ 9 æ¬¡ã€‚</td></tr></tbody></table>
<p>Redis é€šè¿‡åœ¨è¿æ¥çº§åˆ«è®¾ç½®è¾ƒçŸ­çš„ TCP Keepalive å‚æ•°ï¼Œå¯ä»¥æå‰å‘ç°æ­»æ‰æˆ–å¼‚å¸¸çš„å®¢æˆ·ç«¯è¿æ¥ï¼›é¿å…é•¿æ—¶é—´ä¿ç•™æ— æ•ˆè¿æ¥å ç”¨èµ„æºï¼›æé«˜ Redis åœ¨é•¿è¿æ¥å’Œé«˜å¹¶å‘åœºæ™¯ä¸‹çš„ç¨³å®šæ€§ã€‚</p>
<p>è®¾ç½®å»ºè®®ï¼šé»˜è®¤å€¼å³å¯ã€‚å¦‚æœç½‘ç»œè´¨é‡ç‰¹åˆ«å·®ï¼Œå¯è®¾ç½®æ›´å°çš„å€¼ã€‚</p>
<h2 data-id="heading-4">xxx_cpulist</h2>
<p>Redis æ”¯æŒé€šè¿‡å‚æ•°å¯¹ä¸åŒæ‰§è¡Œå•å…ƒè¿›è¡Œ CPU ç»‘å®šï¼Œç›¸å…³å‚æ•°å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-vbscript" lang="vbscript">createStringConfig(<span class="hljs-string">"server_cpulist"</span>, <span class="hljs-literal">NULL</span>, IMMUTABLE_CONFIG, EMPTY_STRING_IS_NULL, <span class="hljs-built_in">server</span>.server_cpulist, <span class="hljs-literal">NULL</span>, <span class="hljs-literal">NULL</span>, <span class="hljs-literal">NULL</span>),
createStringConfig(<span class="hljs-string">"bio_cpulist"</span>, <span class="hljs-literal">NULL</span>, IMMUTABLE_CONFIG, EMPTY_STRING_IS_NULL, <span class="hljs-built_in">server</span>.bio_cpulist, <span class="hljs-literal">NULL</span>, <span class="hljs-literal">NULL</span>, <span class="hljs-literal">NULL</span>),
createStringConfig(<span class="hljs-string">"aof_rewrite_cpulist"</span>, <span class="hljs-literal">NULL</span>, IMMUTABLE_CONFIG, EMPTY_STRING_IS_NULL, <span class="hljs-built_in">server</span>.aof_rewrite_cpulist, <span class="hljs-literal">NULL</span>, <span class="hljs-literal">NULL</span>, <span class="hljs-literal">NULL</span>),
createStringConfig(<span class="hljs-string">"bgsave_cpulist"</span>, <span class="hljs-literal">NULL</span>, IMMUTABLE_CONFIG, EMPTY_STRING_IS_NULL, <span class="hljs-built_in">server</span>.bgsave_cpulist, <span class="hljs-literal">NULL</span>, <span class="hljs-literal">NULL</span>, <span class="hljs-literal">NULL</span>),
</code></pre>
<p>å…¶ä¸­ï¼Œserver_cpulistã€bio_cpulistã€bgsave_cpulistã€aof_rewrite_cpulist åˆ†åˆ«ç”¨äºç»‘å®š Redis ä¸»çº¿ç¨‹ã€BIO åå°çº¿ç¨‹ã€RDB å­è¿›ç¨‹å’Œ AOF rewrite å­è¿›ç¨‹ã€‚</p>
<p>åœ¨å®ç°ä¸Šï¼ŒRedis æä¾›äº†<code>setcpuaffinity</code>å‡½æ•°æ¥å°è£… CPU ç»‘å®šæ“ä½œï¼Œè¯¥å‡½æ•°ä¼šæ ¹æ®æ“ä½œç³»ç»Ÿè°ƒç”¨å¯¹åº”æ¥å£ã€‚ä¾‹å¦‚ï¼Œåœ¨ Linux ä¸Šï¼Œå®ƒä¼šä½¿ç”¨<code>sched_setaffinity</code>å°†çº¿ç¨‹ç»‘å®šåˆ°æŒ‡å®šæ ¸å¿ƒã€‚</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-type">void</span> <span class="hljs-title function_">redisSetCpuAffinity</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">char</span> *cpulist)</span> {
<span class="hljs-meta">#<span class="hljs-keyword">ifdef</span> USE_SETCPUAFFINITY</span>
    setcpuaffinity(cpulist);
<span class="hljs-meta">#<span class="hljs-keyword">else</span></span>
    UNUSED(cpulist);
<span class="hljs-meta">#<span class="hljs-keyword">endif</span></span>
}

<span class="hljs-comment">/* set current thread cpu affinity to cpu list, this function works like
 * taskset command (actually cpulist parsing logic reference to util-linux).
 * example of this function: "0,2,3", "0,2-3", "0-20:2". */</span>
<span class="hljs-type">void</span> <span class="hljs-title function_">setcpuaffinity</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">char</span> *cpulist)</span> {
...
<span class="hljs-meta">#<span class="hljs-keyword">ifdef</span> __linux__</span>
    sched_setaffinity(<span class="hljs-number">0</span>, <span class="hljs-keyword">sizeof</span>(cpuset), &amp;cpuset);
<span class="hljs-meta">#<span class="hljs-keyword">endif</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">ifdef</span> __FreeBSD__</span>
    cpuset_setaffinity(CPU_LEVEL_WHICH, CPU_WHICH_TID, <span class="hljs-number">-1</span>, <span class="hljs-keyword">sizeof</span>(cpuset), &amp;cpuset);
<span class="hljs-meta">#<span class="hljs-keyword">endif</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">ifdef</span> __DragonFly__</span>
    pthread_setaffinity_np(pthread_self(), <span class="hljs-keyword">sizeof</span>(cpuset), &amp;cpuset);
<span class="hljs-meta">#<span class="hljs-keyword">endif</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">ifdef</span> __NetBSD__</span>
    pthread_setaffinity_np(pthread_self(), cpuset_size(cpuset), cpuset);
    cpuset_destroy(cpuset);
<span class="hljs-meta">#<span class="hljs-keyword">endif</span></span>
}
</code></pre>
<p>å¯¹äº Redis è¿™ç§å•çº¿ç¨‹åº”ç”¨ï¼ˆä¸»çº¿ç¨‹åªèƒ½åœ¨ä¸€ä¸ª CPU æ ¸å¿ƒä¸Šå¤„ç†è¯·æ±‚ï¼‰æ¥è¯´ï¼Œè¿›è¡Œ CPU ç»‘å®šçš„å¥½å¤„æ˜¾è€Œæ˜“è§ï¼šå‡å°‘ CPU ä¸Šä¸‹æ–‡åˆ‡æ¢ã€æé«˜ CPU Cache å‘½ä¸­ç‡ã€é¿å…å—åˆ°å…¶ä»–é«˜è´Ÿè½½ä»»åŠ¡çš„å¹²æ‰°ã€‚å”¯ä¸€çš„ä¸è¶³æ˜¯å¢åŠ äº†è¿ç»´çš„é…ç½®å’Œç®¡ç†æˆæœ¬ã€‚</p>
<h2 data-id="heading-5">oom-score-adjã€oom-score-adj-values</h2>
<pre><code class="hljs language-vbscript" lang="vbscript">createEnumConfig(<span class="hljs-string">"oom-score-adj"</span>, <span class="hljs-literal">NULL</span>, MODIFIABLE_CONFIG, oom_score_adj_enum, <span class="hljs-built_in">server</span>.oom_score_adj, OOM_SCORE_ADJ_NO, <span class="hljs-literal">NULL</span>, updateOOMScoreAdj),
createSpecialConfig(<span class="hljs-string">"oom-score-adj-values"</span>, <span class="hljs-literal">NULL</span>, MODIFIABLE_CONFIG | MULTI_ARG_CONFIG, setConfigOOMScoreAdjValuesOption, getConfigOOMScoreAdjValuesOption, rewriteConfigOOMScoreAdjValuesOption, updateOOMScoreAdj),
</code></pre>
<p>å…¶ä¸­ï¼Œ</p>
<ul>
<li>oom-score-adjï¼šæ˜¯å¦å¯ç”¨ OOM è°ƒæ•´ã€‚å¯é€‰å€¼æœ‰ï¼š</li>
<li>
<ul>
<li>noï¼šç¦ç”¨ã€‚é»˜è®¤å€¼ã€‚</li>
<li>yes / relativeï¼šå¯ç”¨ç›¸å¯¹æ¨¡å¼ï¼ˆåœ¨ç³»ç»ŸåŸå§‹ OOM å€¼çš„åŸºç¡€ä¸Šå åŠ ï¼‰ã€‚</li>
<li>absoluteï¼šå¯ç”¨ç»å¯¹æ¨¡å¼ï¼ˆç›´æ¥ä½¿ç”¨é…ç½®å€¼ï¼Œä¸è€ƒè™‘ç³»ç»ŸåŸå§‹å€¼ï¼‰ã€‚</li>
</ul>
</li>
<li>oom-score-adj-valuesï¼šé’ˆå¯¹ä¸åŒè§’è‰²è®¾ç½® OOM æƒé‡ã€‚è¯¥å‚æ•°éœ€è¦é…ç½®ä¸‰ä¸ªå€¼ï¼Œåˆ†åˆ«å¯¹åº”ï¼šä¸»èŠ‚ç‚¹ã€ä»èŠ‚ç‚¹ã€åå°å­è¿›ç¨‹ï¼ˆBGCHILDï¼Œç”¨äº RDB / AOF / å¤åˆ¶ï¼‰ã€‚é»˜è®¤å€¼ä¸º<code>0 200 800</code>ã€‚æ•°å€¼è¶Šå¤§ï¼Œè¡¨ç¤ºåœ¨ç³»ç»Ÿå†…å­˜ç´§å¼ æ—¶è¶Šå®¹æ˜“è¢« OOM Killer æ€æ­»ã€‚</li>
</ul>
<p>æ— è®ºæ˜¯ä¿®æ”¹ oom-score-adj è¿˜æ˜¯ oom-score-adj-valuesï¼Œéƒ½ä¼šè°ƒç”¨<code>updateOOMScoreAdj</code>Â ã€‚</p>
<p>è¯¥å‡½æ•°ä¼šæ ¹æ®è¿›ç¨‹è§’è‰²ï¼ˆä¸»èŠ‚ç‚¹ã€ä»èŠ‚ç‚¹æˆ–åå°å­è¿›ç¨‹ï¼‰ä¸ºå½“å‰è¿›ç¨‹è®¾ç½®å¯¹åº”çš„ oom_score_adj å€¼ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">static int updateOOMScoreAdj(const char **err) {
    if (setOOMScoreAdj(-1) == C_ERR) {
        *<span class="hljs-attr">err</span> = <span class="hljs-string">"Failed to set current oom_score_adj. Check server logs."</span><span class="hljs-comment">;</span>
        return 0<span class="hljs-comment">;</span>
    }

    return 1<span class="hljs-comment">;</span>
}

// æ ¹æ®è¿›ç¨‹ç±»åˆ«è®¾ç½® Redis çš„ oom_score_adjï¼Œprocess_class: è¿›ç¨‹ç±»åˆ«ï¼Œ-1 è¡¨ç¤ºè‡ªåŠ¨é€‰æ‹©
int setOOMScoreAdj(int process_class) {
    // å¦‚æœä¼ å…¥ -1ï¼Œè‡ªåŠ¨æ ¹æ®è§’è‰²é€‰æ‹© master æˆ– replica
    if (<span class="hljs-attr">process_class</span> == -<span class="hljs-number">1</span>)
        <span class="hljs-attr">process_class</span> = (server.masterhost ? CONFIG_OOM_REPLICA : CONFIG_OOM_MASTER)<span class="hljs-comment">;</span>

    serverAssert(process_class &gt;= 0 &amp;&amp; process_class &lt; CONFIG_OOM_COUNT)<span class="hljs-comment">;</span>

<span class="hljs-comment">#ifdef HAVE_PROC_OOM_SCORE_ADJ</span>
    // oom_score_adjusted_by_redisï¼šæ ‡è®° Redis æ˜¯å¦å·²ä¿®æ”¹è¿‡ OOM åˆ†æ•°ã€‚
    // oom_score_adj_baseï¼šä¿å­˜åŸå§‹ OOM åˆ†æ•°ï¼Œä»¥ä¾¿å›æ»šæˆ–ç¦ç”¨æ—¶æ¢å¤ã€‚
    static int <span class="hljs-attr">oom_score_adjusted_by_redis</span> = <span class="hljs-number">0</span><span class="hljs-comment">;</span>
    static int <span class="hljs-attr">oom_score_adj_base</span> = <span class="hljs-number">0</span><span class="hljs-comment">;</span>

    int fd<span class="hljs-comment">;</span>
    int val<span class="hljs-comment">;</span>
    char buf<span class="hljs-section">[64]</span><span class="hljs-comment">;</span>
    // oom_score_adj ä¸ä¸º no
    if (server.oom_score_adj != OOM_SCORE_ADJ_NO) {
        // ç¬¬ä¸€æ¬¡ä¿®æ”¹æ—¶ï¼Œå¤‡ä»½åŸå§‹ oom_score_adj
        if (!oom_score_adjusted_by_redis) {
            <span class="hljs-attr">oom_score_adjusted_by_redis</span> = <span class="hljs-number">1</span><span class="hljs-comment">;</span>
            /* Backup base value before enabling Redis control over oom score */
            <span class="hljs-attr">fd</span> = open(<span class="hljs-string">"/proc/self/oom_score_adj"</span>, O_RDONLY)<span class="hljs-comment">;</span>
            if (fd &lt; 0 || read(fd, buf, sizeof(buf)) &lt; 0) {
                serverLog(LL_WARNING, "Unable to read oom_score_adj: %s", strerror(errno))<span class="hljs-comment">;</span>
                if (fd != -1) close(fd)<span class="hljs-comment">;</span>
                return C_ERR<span class="hljs-comment">;</span>
            }
            <span class="hljs-attr">oom_score_adj_base</span> = atoi(buf)<span class="hljs-comment">;</span>
            close(fd)<span class="hljs-comment">;</span>
        }
        // è·å–é…ç½®çš„ OOM åˆ†æ•°
        <span class="hljs-attr">val</span> = server.oom_score_adj_values[process_class]<span class="hljs-comment">;</span>
        // å¦‚æœæ˜¯ç›¸å¯¹æ¨¡å¼ï¼Œç´¯åŠ åŸå§‹å€¼
        if (<span class="hljs-attr">server.oom_score_adj</span> == OOM_SCORE_RELATIVE)
            val += oom_score_adj_base<span class="hljs-comment">;</span>
        // é™åˆ¶å€¼åœ¨ <span class="hljs-section">[-1000, 1000]</span>
        if (val &gt; 1000) <span class="hljs-attr">val</span> = <span class="hljs-number">1000</span><span class="hljs-comment">;</span>
        if (val &lt; -1000) <span class="hljs-attr">val</span> = -<span class="hljs-number">1000</span><span class="hljs-comment">;</span>
    } else if (oom_score_adjusted_by_redis) {
        // å¦‚æœé…ç½®ç¦ç”¨ OOM è°ƒæ•´ä¸”ä¹‹å‰å·²ä¿®æ”¹è¿‡ï¼Œæ¢å¤åŸå§‹å€¼
        <span class="hljs-attr">oom_score_adjusted_by_redis</span> = <span class="hljs-number">0</span><span class="hljs-comment">;</span>
        <span class="hljs-attr">val</span> = oom_score_adj_base<span class="hljs-comment">;</span>
    }
    else {
        return C_OK<span class="hljs-comment">;</span>
    }

    snprintf(buf, sizeof(buf) - 1, "%d\n", val)<span class="hljs-comment">;</span>
    // å†™å…¥ /proc/self/oom_score_adjï¼Œä½¿å†…æ ¸ç”Ÿæ•ˆ
    <span class="hljs-attr">fd</span> = open(<span class="hljs-string">"/proc/self/oom_score_adj"</span>, O_WRONLY)<span class="hljs-comment">;</span>
    if (fd &lt; 0 || write(fd, buf, strlen(buf)) &lt; 0) {
        serverLog(LL_WARNING, "Unable to write oom_score_adj: %s", strerror(errno))<span class="hljs-comment">;</span>
        if (fd != -1) close(fd)<span class="hljs-comment">;</span>
        return C_ERR<span class="hljs-comment">;</span>
    }

    close(fd)<span class="hljs-comment">;</span>
    return C_OK<span class="hljs-comment">;</span>
<span class="hljs-comment">#else</span>
    /* Unsupported */
    return C_ERR<span class="hljs-comment">;</span>
<span class="hljs-comment">#endif</span>
}
</code></pre>
<p>å…·ä½“å®ç°ä¸Šï¼Œç³»ç»Ÿçš„åŸå§‹ OOM å€¼é€šè¿‡è¯»å–<code>/proc/self/oom_score_adj</code>è·å–ã€‚</p>
<p>åœ¨ç¬¬ä¸€æ¬¡å¯ç”¨ OOM è°ƒæ•´æ—¶ï¼ŒRedis ä¼šå°†è¯¥åŸå§‹å€¼ä¿å­˜åˆ° oom_score_adj_base ä¸­ï¼Œä»¥ä¾¿åœ¨åç»­ç¦ç”¨é…ç½®æˆ–å‘ç”Ÿé…ç½®å›æ»šæ—¶ï¼Œèƒ½å¤Ÿå°†è¿›ç¨‹çš„ OOM å€¼æ¢å¤ä¸ºè°ƒæ•´å‰çš„çŠ¶æ€ã€‚</p>
<p>æ— è®ºæ˜¯ç›¸å¯¹æ¨¡å¼è¿˜æ˜¯ç»å¯¹æ¨¡å¼ï¼Œæœ€ç»ˆç”Ÿæ•ˆçš„ OOM å€¼éƒ½ä¼šå†™å›åˆ°<code>/proc/self/oom_score_adj</code>ã€‚</p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œoom-score-adj-values å…è®¸é…ç½®çš„å–å€¼èŒƒå›´ä¸º [-2000, 2000]ï¼Œè€Œ Linux å†…æ ¸å®é™…æ”¯æŒçš„ oom_score_adj èŒƒå›´ä»…ä¸º[-1000, 1000]ã€‚</p>
<p>ä¹‹æ‰€ä»¥æ”¾å®½é…ç½®èŒƒå›´ï¼Œæ˜¯ä¸ºäº†æ›´å¥½åœ°æ”¯æŒç›¸å¯¹æ¨¡å¼ï¼ˆrelativeï¼‰ï¼šåœ¨ç›¸å¯¹æ¨¡å¼ä¸‹ï¼Œé…ç½®å€¼ä¼šä¸ç³»ç»ŸåŸå§‹ OOM å€¼è¿›è¡Œå åŠ ï¼Œå åŠ åçš„ç»“æœå†è¢«è£å‰ªåˆ°å†…æ ¸å…è®¸çš„èŒƒå›´å†…ï¼Œä»è€Œåœ¨ä¸åŒç³»ç»Ÿåˆå§‹ OOM è®¾ç½®ä¸‹ä»èƒ½ä¿æŒåˆç†ã€å¯æ§çš„è°ƒæ•´æ•ˆæœã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[OpenClaw è°ƒåº¦æ¶æ„æ·±åº¦å‰–æï¼šé«˜è‡ªä¸» AI ä»£ç†å¦‚ä½•å®ç°ç¡®å®šæ€§ä»»åŠ¡ç¼–æ’ä¸å®æ—¶å“åº”]]></title>    <link>https://juejin.cn/post/7602928783597060102</link>    <guid>https://juejin.cn/post/7602928783597060102</guid>    <pubDate>2026-02-05T06:50:20.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602928783597060102" data-draft-id="7602996277663875126" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="OpenClaw è°ƒåº¦æ¶æ„æ·±åº¦å‰–æï¼šé«˜è‡ªä¸» AI ä»£ç†å¦‚ä½•å®ç°ç¡®å®šæ€§ä»»åŠ¡ç¼–æ’ä¸å®æ—¶å“åº”"/> <meta itemprop="keywords" content="æ¶æ„"/> <meta itemprop="datePublished" content="2026-02-05T06:50:20.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="RoyLin"/> <meta itemprop="url" content="https://juejin.cn/user/2928754708185917"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            OpenClaw è°ƒåº¦æ¶æ„æ·±åº¦å‰–æï¼šé«˜è‡ªä¸» AI ä»£ç†å¦‚ä½•å®ç°ç¡®å®šæ€§ä»»åŠ¡ç¼–æ’ä¸å®æ—¶å“åº”
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2928754708185917/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    RoyLin
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-05T06:50:20.000Z" title="Thu Feb 05 2026 06:50:20 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-05
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>OpenClawï¼ˆå‰èº« Clawdbot / Moltbotï¼‰ä½œä¸ºç›®å‰æœ€æ´»è·ƒçš„è‡ªæ‰˜ç®¡å¸¸é©»å¼ agentic AI å¹³å°ä¹‹ä¸€ï¼Œä»¥å…¶å¼ºå¤§çš„é•¿æœŸè‡ªæ²»èƒ½åŠ›ã€å¤šæºè§¦å‘å“åº”ã€å¤æ‚å·¥å…·é“¾å¹¶å‘æ‰§è¡Œè€Œåœ¨ç¤¾åŒºè¿…é€Ÿç§¯ç´¯çƒ­åº¦ã€‚å…¶åº•å±‚ä»»åŠ¡è°ƒåº¦ç³»ç»Ÿèƒ½å¤Ÿåœ¨å¤„ç†æµ·é‡å¼‚æ­¥äº‹ä»¶ã€ç”¨æˆ·äº¤äº’ã€å®šæ—¶ä»»åŠ¡ã€å¤–éƒ¨è§¦å‘çš„åŒæ—¶ï¼Œä¿æŒä½å»¶è¿Ÿã€é«˜ç¡®å®šæ€§å’Œå¯æ§æ€§ï¼Œæˆä¸º agentic ç³»ç»Ÿå·¥ç¨‹å®è·µçš„å…¸å‹æ¡ˆä¾‹ã€‚</p>
<p>æœ¬æ–‡åŸºäº OpenClaw çš„å…¬å¼€è®¾è®¡æ–‡æ¡£ã€ç¤¾åŒºè®¨è®ºä¸å®é™…è¿è¡Œç‰¹å¾ï¼Œç³»ç»Ÿæ‹†è§£å…¶è°ƒåº¦æ¶æ„çš„æ ¸å¿ƒé€»è¾‘ã€ä¼˜å…ˆçº§ç­–ç•¥ã€å¹¶å‘éš”ç¦»æœºåˆ¶ä¸å¯é æ€§ä¿éšœæ‰‹æ®µï¼Œå¹¶ç»“åˆè‡ªåŠ¨é©¾é©¶é¢†åŸŸå¸¸è§çš„ç±»ä¼¼éœ€æ±‚è¿›è¡Œå¯¹æ¯”åˆ†æï¼Œå¸®åŠ©å¼€å‘è€…ç†è§£è¿™ç±»é«˜è‡ªä¸» AI ä»£ç†åœ¨ç”Ÿäº§ç¯å¢ƒä¸‹çš„çœŸå®å·¥ç¨‹æŒ‘æˆ˜ä¸è§£å†³æ–¹æ¡ˆã€‚</p>
<h2 data-id="heading-0">OpenClaw ä»»åŠ¡è°ƒåº¦æ ¸å¿ƒæ¶æ„æ€»è§ˆ</h2>
<p>OpenClaw çš„è¿è¡Œæ—¶æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªæ°¸ä¸åœæ­¢çš„â€œäº‹ä»¶-å†³ç­–-è¡ŒåŠ¨â€é—­ç¯å¼•æ“ï¼Œä¸»è¦ç”±ä»¥ä¸‹å‡ ä¸ªå…³é”®å±‚ç»„æˆï¼š</p>
<ol>
<li>
<p><strong>äº‹ä»¶æºå±‚</strong><br/>
æŒç»­ç›‘å¬å¤šæ¸ é“è¾“å…¥ï¼šç”¨æˆ·èŠå¤©æ¶ˆæ¯ã€é‚®ä»¶/IM é€šçŸ¥ã€æ–‡ä»¶/ç›®å½•å˜æ›´ç›‘æ§ã€å®šæ—¶ Cronã€Webhookã€RSS è®¢é˜…ç­‰ã€‚æ¯ä¸ªäº‹ä»¶è¢«å°è£…ä¸ºç»Ÿä¸€çš„â€œè§¦å‘å™¨â€ï¼ˆTriggerï¼‰å¯¹è±¡ï¼Œæºå¸¦å…ƒä¿¡æ¯ï¼ˆæ¥æºã€ç´§æ€¥åº¦ã€å…³è”ä¼šè¯ç­‰ï¼‰ã€‚</p>
</li>
<li>
<p><strong>ä»»åŠ¡ç”Ÿæˆä¸ä¼˜å…ˆçº§æ ‡æ³¨å±‚</strong><br/>
è§¦å‘å™¨ç»è¿‡ LLM æ¨ç†æˆ–è§„åˆ™å¼•æ“åï¼Œç”Ÿæˆä¸€ä¸ªæˆ–å¤šä¸ªå¯æ‰§è¡Œçš„â€œå‘½ä»¤â€ï¼ˆCommandï¼‰ï¼Œæ¯ä¸ªå‘½ä»¤è¢«èµ‹äºˆä¼˜å…ˆçº§æ ‡ç­¾ã€‚ä¼˜å…ˆçº§é€šå¸¸åˆ†ä¸º 4â€“6 ä¸ªçº§åˆ«ï¼š</p>
<ul>
<li>æœ€é«˜ï¼šç³»ç»Ÿçº§å®‰å…¨/ç´§æ€¥å¹²é¢„ï¼ˆæ²™ç®±é€ƒé€¸æ¢å¤ã€æ•æ„Ÿæ“ä½œç¡®è®¤ã€ç«‹å³åœæ­¢ï¼‰</li>
<li>é«˜ï¼šç”¨æˆ·ç›´æ¥æŒ‡ä»¤ï¼ˆå°¤å…¶æ˜¯åŒ…å«â€œç°åœ¨â€â€œç´§æ€¥â€â€œç«‹å³â€ç­‰æ˜¾å¼æ€¥è¿«è¯­ä¹‰ï¼‰</li>
<li>ä¸­ï¼šå®æ—¶å“åº”å‹ä»»åŠ¡ï¼ˆé‚®ä»¶å›å¤ã€å¼‚å¸¸å‘Šè­¦æ¨é€ã€æµè§ˆå™¨å…³é”®æ­¥éª¤ï¼‰</li>
<li>ä½ï¼šä¸»åŠ¨è§„åˆ’å‹ä»»åŠ¡ï¼ˆæ¯æ—¥/æ¯å‘¨æ‘˜è¦ã€é•¿æœŸç›®æ ‡æ‹†è§£ï¼‰</li>
<li>æä½ï¼šåå°ç»´æŠ¤ï¼ˆç´¢å¼•æ„å»ºã€æ—¥å¿—èšåˆã€æ¨¡å‹ç¼“å­˜åˆ·æ–°ï¼‰</li>
</ul>
</li>
<li>
<p><strong>å¤šçº§æ‰§è¡Œé˜Ÿåˆ—ä¸è°ƒåº¦å™¨</strong><br/>
OpenClaw é‡‡ç”¨å¤šé˜Ÿåˆ— + ä¼˜å…ˆçº§è°ƒåº¦å™¨æ¨¡å‹ï¼Œè€Œéå•ä¸€ FIFO é˜Ÿåˆ—ã€‚è°ƒåº¦å™¨æŒ‰ä¼˜å…ˆçº§é¡ºåºè½®è¯¢å„ä¸ªé˜Ÿåˆ—ï¼Œåªæœ‰å½“å‰æœ€é«˜ä¼˜å…ˆçº§é˜Ÿåˆ—ä¸ºç©ºæˆ–è¾¾åˆ°å¹¶å‘ä¸Šé™æ—¶ï¼Œæ‰ä¼šä¸‹æ¢åˆ°ä¸‹ä¸€çº§ã€‚è¿™ç§è®¾è®¡ç¡®ä¿äº†å…³é”®è·¯å¾„çš„ç¡®å®šæ€§å“åº”ã€‚</p>
</li>
<li>
<p><strong>æ‰§è¡Œå¼•æ“å±‚</strong><br/>
åŸºäº Tokioï¼ˆæˆ–ç±»ä¼¼å¼‚æ­¥è¿è¡Œæ—¶ï¼‰çš„å·¥ä½œè€…æ± æ‰§è¡Œå‘½ä»¤ï¼Œæ”¯æŒå·¥å…·è°ƒç”¨ï¼ˆæµè§ˆå™¨è‡ªåŠ¨åŒ–ã€shell æ‰§è¡Œã€API è¯·æ±‚ç­‰ï¼‰ã€‚æ¯ä¸ªå‘½ä»¤æ‰§è¡Œä¸Šä¸‹æ–‡ç‹¬ç«‹ï¼ŒåŒ…å«è¶…æ—¶ã€é‡è¯•ã€é”™è¯¯æ•è·ä¸ç»“æœå›ä¼ æœºåˆ¶ã€‚</p>
</li>
<li>
<p><strong>çŠ¶æ€ä¸å†å²ç®¡ç†</strong><br/>
æ‰€æœ‰å‘½ä»¤æ‰§è¡Œè®°å½•æŒä¹…åŒ–åˆ°æœ¬åœ°æ•°æ®åº“ï¼ˆé€šå¸¸ SQLite æˆ– LevelDBï¼‰ï¼Œæ”¯æŒæ–­ç‚¹ç»­è·‘ã€å¤±è´¥é‡æ”¾ã€äººå·¥å¹²é¢„ç­‰åŠŸèƒ½ã€‚</p>
</li>
</ol>
<h2 data-id="heading-1">ä¼˜å…ˆçº§ä¸å¹¶å‘éš”ç¦»çš„å…³é”®å®ç°ç»†èŠ‚</h2>
<p>OpenClaw é€šè¿‡ä»¥ä¸‹æœºåˆ¶å®ç°ä»»åŠ¡é—´çš„ä¸¥æ ¼éš”ç¦»ä¸èµ„æºå…¬å¹³ï¼š</p>
<ul>
<li>
<p><strong>ä¼˜å…ˆçº§æŠ¢å å¼è°ƒåº¦</strong><br/>
è°ƒåº¦å¾ªç¯å§‹ç»ˆä¼˜å…ˆå¤„ç†æœ€é«˜ä¼˜å…ˆçº§é˜Ÿåˆ—ä¸­çš„å¾…æ‰§è¡Œå‘½ä»¤ã€‚åªæœ‰è¯¥é˜Ÿåˆ—ä¸ºç©ºæˆ–æ´»è·ƒä»»åŠ¡æ•°è¾¾åˆ°ä¸Šé™ï¼Œæ‰ä¼šå¤„ç†æ¬¡é«˜ä¼˜å…ˆçº§é˜Ÿåˆ—ã€‚è¿™ç§ä¸¥æ ¼ä¼˜å…ˆçº§ç­–ç•¥é¿å…äº†ä½ä¼˜å…ˆçº§é•¿ä»»åŠ¡é˜»å¡ç”¨æˆ·äº¤äº’ã€‚</p>
</li>
<li>
<p><strong>åˆ†çº§å¹¶å‘é™æµ</strong><br/>
ä¸åŒä¼˜å…ˆçº§é˜Ÿåˆ—æ‹¥æœ‰ç‹¬ç«‹çš„å¹¶å‘ä¸Šé™ï¼š</p>
<ul>
<li>ç³»ç»Ÿ/ç´§æ€¥é˜Ÿåˆ—ï¼šå¹¶å‘ 1â€“2ï¼ˆç‹¬å å¼æ‰§è¡Œï¼Œé¿å…ç«äº‰ï¼‰</li>
<li>ç”¨æˆ·ç›´æ¥æŒ‡ä»¤ï¼šå¹¶å‘ 2â€“4ï¼ˆä¿è¯äº¤äº’æµç•…ï¼‰</li>
<li>å·¥å…·è°ƒç”¨é˜Ÿåˆ—ï¼šå¹¶å‘ 4â€“10ï¼ˆè§†æœ¬åœ°èµ„æºåŠ¨æ€è°ƒæ•´ï¼‰</li>
<li>åå°é˜Ÿåˆ—ï¼šå¹¶å‘ 1â€“2ï¼ˆèµ„æºç©ºé—²æ—¶æ‰§è¡Œï¼‰</li>
</ul>
</li>
<li>
<p><strong>åŠ¨æ€ä¼˜å…ˆçº§æå‡ï¼ˆPriority Boostingï¼‰</strong><br/>
åœ¨è¿è¡Œæ—¶æ£€æµ‹åˆ°é«˜ç´§æ€¥è¯­ä¹‰ï¼ˆå…³é”®è¯åŒ¹é…ã€ç”¨æˆ·è¿ç»­è¿½é—®ã€å¼‚å¸¸åˆ†æ•°è¶…é˜ˆå€¼ç­‰ï¼‰æ—¶ï¼Œå¯å°†ä»»åŠ¡ä¸´æ—¶æå‡åˆ°æ›´é«˜ä¼˜å…ˆçº§é˜Ÿåˆ—ã€‚è¿™ç§æœºåˆ¶åœ¨ç”¨æˆ·ä½“éªŒä¸ç³»ç»Ÿç¨³å®šæ€§ä¹‹é—´å–å¾—äº†è‰¯å¥½å¹³è¡¡ã€‚</p>
</li>
<li>
<p><strong>è¶…æ—¶ä¸é‡è¯•åˆ†å±‚</strong><br/>
é«˜ä¼˜å…ˆçº§å‘½ä»¤é€šå¸¸è®¾ç½®è¾ƒçŸ­è¶…æ—¶ï¼ˆ5â€“30sï¼‰ï¼Œå¤±è´¥åå¿«é€Ÿé‡è¯•æˆ–è¿›å…¥äººå·¥å®¡æ ¸ï¼›ä½ä¼˜å…ˆçº§ä»»åŠ¡åˆ™å…è®¸æ›´é•¿è¶…æ—¶ä¸æ›´å¤šé‡è¯•æ¬¡æ•°ã€‚</p>
</li>
</ul>
<h2 data-id="heading-2">å¯é æ€§ä¸å¯è§‚æµ‹æ€§ä¿éšœ</h2>
<ul>
<li>
<p><strong>æ­»ä¿¡ä¸å¤±è´¥æ•è·</strong><br/>
å¤šæ¬¡é‡è¯•å¤±è´¥çš„å‘½ä»¤è¢«æ¨å…¥æ­»ä¿¡é˜Ÿåˆ—ï¼ˆDead Letter Queueï¼‰ï¼Œä¿ç•™å®Œæ•´ä¸Šä¸‹æ–‡ï¼ˆè¾“å…¥ã€é”™è¯¯æ ˆã€æ‰§è¡Œç¯å¢ƒå¿«ç…§ï¼‰ï¼Œä¾¿äºå¼€å‘è€…ç¦»çº¿è¯Šæ–­ä¸è¡¥å¿ã€‚</p>
</li>
<li>
<p><strong>ä¼˜é›…å…³æœºä¸æ’æ°´</strong><br/>
æ”¯æŒ drain æ¨¡å¼ï¼šåœ¨æ”¶åˆ°åœæ­¢ä¿¡å·åï¼Œå…ˆå¤„ç†å®Œæ‰€æœ‰å·²æ¥å—çš„é«˜ä¼˜å…ˆçº§ä»»åŠ¡ï¼Œå†é€æ­¥å…³é—­ä½ä¼˜å…ˆçº§é˜Ÿåˆ—ï¼Œç¡®ä¿æ•°æ®ä¸€è‡´æ€§ã€‚</p>
</li>
<li>
<p><strong>æŒ‡æ ‡ä¸å‘Šè­¦</strong><br/>
å®æ—¶æš´éœ²é˜Ÿåˆ—æ·±åº¦ã€å‘½ä»¤å»¶è¿Ÿåˆ†å¸ƒï¼ˆp50/p90/p99ï¼‰ã€é‡è¯•ç‡ã€å¤±è´¥ç‡ç­‰æ ¸å¿ƒæŒ‡æ ‡ã€‚ç¤¾åŒºå¸¸è§åšæ³•æ˜¯é›†æˆ Prometheus + Grafanaï¼Œæˆ–ç®€å•é€šè¿‡æ—¥å¿— + webhook å®ç°é˜ˆå€¼å‘Šè­¦ã€‚</p>
</li>
</ul>
<h2 data-id="heading-3">ä¸è‡ªåŠ¨é©¾é©¶è°ƒåº¦éœ€æ±‚çš„å¯¹æ¯”</h2>
<p>è‡ªåŠ¨é©¾é©¶ç³»ç»Ÿçš„ä»»åŠ¡è°ƒåº¦éœ€æ±‚ä¸ OpenClaw æœ‰é«˜åº¦ç›¸ä¼¼æ€§ï¼Œä½†å¯¹ç¡®å®šæ€§ä¸å»¶è¿Ÿçš„è¦æ±‚æ›´æç«¯ï¼š</p>









































<table><thead><tr><th>ç»´åº¦</th><th>OpenClawï¼ˆagentic AIï¼‰</th><th>è‡ªåŠ¨é©¾é©¶ï¼ˆL4/L5 çº§åˆ«ï¼‰</th><th>å…±åŒè§£å†³æ–¹æ¡ˆè¶‹åŠ¿</th></tr></thead><tbody><tr><td>æœ€é«˜ä¼˜å…ˆçº§ä»»åŠ¡</td><td>ç”¨æˆ·ç´§æ€¥æŒ‡ä»¤ã€å®‰å…¨å¹²é¢„</td><td>AEBã€æ¥ç®¡è¯·æ±‚ã€æ•…éšœå®‰å…¨</td><td>ä¸¥æ ¼ä¼˜å…ˆçº§ + å¹¶å‘ 1â€“2</td></tr><tr><td>æ ¸å¿ƒæ§åˆ¶å¾ªç¯</td><td>å·¥å…·è°ƒç”¨ä¸»è·¯å¾„</td><td>æ„ŸçŸ¥â†’é¢„æµ‹â†’è§„åˆ’â†’æ§åˆ¶ 100â€“200Hz ä¸»å¾ªç¯</td><td>ä¸“ç”¨é«˜ä¼˜å…ˆçº§é€šé“ + ä½æŠ–åŠ¨è°ƒåº¦</td></tr><tr><td>åå°ä»»åŠ¡</td><td>æ—¥å¿—ã€ç´¢å¼•ã€æ¨¡å‹æ›´æ–°</td><td>åœ°å›¾å¢é‡ã€è¯Šæ–­ä¸Šä¼ ã€OTA</td><td>æä½ä¼˜å…ˆçº§ + èµ„æºç©ºé—²æ‰§è¡Œ</td></tr><tr><td>åŠ¨æ€ä¼˜å…ˆçº§è°ƒæ•´</td><td>è¯­ä¹‰æ€¥è¿«åº¦ã€è¿ç»­äº¤äº’</td><td>è¡Œäºº/çº¢ç¯ç´§æ€¥åœºæ™¯ã€æ¥ç®¡ä¿¡å·</td><td>è¿è¡Œæ—¶ boosting æœºåˆ¶</td></tr><tr><td>å®¹é”™ä¸æ¢å¤</td><td>æ­»ä¿¡é˜Ÿåˆ— + äººå·¥å¹²é¢„</td><td>å…³é”®ä»»åŠ¡æŒä¹…åŒ– + èŠ‚ç‚¹é‡å¯å¿«é€Ÿæ¢å¤</td><td>DLQ + æŒä¹…åŒ–å­˜å‚¨</td></tr></tbody></table>
<p>ä¸¤è€…éƒ½å¼ºçƒˆä¾èµ–â€œå¤šé˜Ÿåˆ— + ä¸¥æ ¼ä¼˜å…ˆçº§ + å¹¶å‘éš”ç¦»â€çš„èŒƒå¼ï¼Œä»¥é¿å…ä½ä¼˜å…ˆçº§ä»»åŠ¡å¯¹å…³é”®è·¯å¾„çš„å¹²æ‰°ã€‚</p>
<h2 data-id="heading-4">æ€»ç»“</h2>
<p>OpenClaw çš„è°ƒåº¦æ¶æ„é€šè¿‡å¤šçº§ä¼˜å…ˆçº§é˜Ÿåˆ—ã€åŠ¨æ€å¹¶å‘é™æµã€ä¼˜å…ˆçº§æå‡ä¸å®Œå¤‡çš„å¯é æ€§æœºåˆ¶ï¼ŒæˆåŠŸå®ç°äº†é«˜è‡ªä¸» AI ä»£ç†åœ¨å¤æ‚ã€å¤šæºã€é•¿æ—¶é—´è¿è¡Œåœºæ™¯ä¸‹çš„ç¡®å®šæ€§ä¸å¯æ§æ€§ã€‚å…¶è®¾è®¡æ€è·¯å¯¹ä»»ä½•éœ€è¦å¤„ç†æ··åˆä¼˜å…ˆçº§å¼‚æ­¥ä»»åŠ¡çš„ç³»ç»Ÿï¼ˆåŒ…æ‹¬ä½†ä¸é™äº agentic AIã€å®æ—¶å†³ç­–å¹³å°ã€å·¥ä¸šæ§åˆ¶ç­‰ï¼‰éƒ½å…·æœ‰æé«˜çš„å‚è€ƒä»·å€¼ã€‚</p>
<p>å€¼å¾—ä¸€æçš„æ˜¯ï¼Œç¤¾åŒºä¸­ä¹Ÿæœ‰ä¸€äº›ä¸“æ³¨äºç±»ä¼¼åœºæ™¯çš„ Rust å¼€æºé¡¹ç›®ï¼Œä¾‹å¦‚ A3S-Lab å®ç°çš„ Lane-based Command Queueï¼Œå®ƒé‡‡ç”¨çº¯ Rust å¼€å‘çš„å¤šè½¦é“ï¼ˆLaneï¼‰ä¼˜å…ˆçº§å‘½ä»¤é˜Ÿåˆ—æ¨¡å‹ï¼Œæä¾›ä¸¥æ ¼ä¼˜å…ˆçº§è°ƒåº¦ã€ç²¾ç»†å¹¶å‘æ§åˆ¶ä¸ä¼ä¸šçº§å¯è§‚æµ‹æ€§ï¼Œå·²åœ¨éƒ¨åˆ†é«˜ç¡®å®šæ€§å¼‚æ­¥ç³»ç»Ÿä¸­å¾—åˆ°éªŒè¯ä¸åº”ç”¨ã€‚æ„Ÿå…´è¶£çš„å¼€å‘è€…å¯è¿›ä¸€æ­¥å¯¹æ¯”ä¸åŒè¯­è¨€ä¸å®ç°èŒƒå¼ä¸‹çš„å·¥ç¨‹å–èˆã€‚</p>
<p>é¡¹ç›®åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FA3S-Lab%2FLane" target="_blank" title="https://github.com/A3S-Lab/Lane" ref="nofollow noopener noreferrer">github.com/A3S-Lab/Lanâ€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¼ ç»ŸRestful APIå¿«é€Ÿé›†æˆAI Agentï¼š3ç§æ–¹æ¡ˆ+é€‰å‹æŒ‡å—]]></title>    <link>https://juejin.cn/post/7603160727716692019</link>    <guid>https://juejin.cn/post/7603160727716692019</guid>    <pubDate>2026-02-05T06:50:33.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603160727716692019" data-draft-id="7602935146706616366" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¼ ç»ŸRestful APIå¿«é€Ÿé›†æˆAI Agentï¼š3ç§æ–¹æ¡ˆ+é€‰å‹æŒ‡å—"/> <meta itemprop="keywords" content="Spring Boot,RESTful,Java"/> <meta itemprop="datePublished" content="2026-02-05T06:50:33.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºå‘˜è¶Š"/> <meta itemprop="url" content="https://juejin.cn/user/1523239911963420"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¼ ç»ŸRestful APIå¿«é€Ÿé›†æˆAI Agentï¼š3ç§æ–¹æ¡ˆ+é€‰å‹æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1523239911963420/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºå‘˜è¶Š
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-05T06:50:33.000Z" title="Thu Feb 05 2026 06:50:33 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-05
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3d9e87a3b95c4aa993b816be08a6bbdf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6LaK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770879035&amp;x-signature=%2FTO%2FrX0wj22bwY109xC3E%2F8Yf3Q%3D" alt="" loading="lazy"/></p>
<p>éšç€AIæŠ€æœ¯çš„é£é€Ÿæ™®åŠï¼Œè¶Šæ¥è¶Šå¤šä¼ä¸šå¼€å§‹æ¥å…¥AI Agentï¼Œå¸Œæœ›å€ŸåŠ©è‡ªç„¶è¯­è¨€äº¤äº’çš„ä¾¿æ·æ€§ï¼Œç»™ç”¨æˆ·å¸¦æ¥æ›´æµç•…çš„ä½¿ç”¨ä½“éªŒã€‚ä½†å¾ˆå¤šä¼ä¸šéƒ½ä¼šé‡åˆ°ä¸€ä¸ªå…±æ€§éš¾é¢˜ï¼š<strong>åŸæœ¬è¿è¡Œç¨³å®šçš„ä¼ ç»ŸRestful APIï¼Œæ€ä¹ˆæ‰èƒ½å¿«é€Ÿè®©AI Agentè°ƒç”¨èµ·æ¥ï¼Ÿ</strong></p>
<p>æˆ‘ä»¬ä¸å¦¨å…ˆå›æƒ³ä¸€ä¸‹ä¼ ç»ŸRestful APIçš„ä½¿ç”¨åœºæ™¯ï¼šè¿‡å»ï¼Œè¿™äº›APIçš„è°ƒç”¨å…¨é æŒ‰é’®è§¦å‘ï¼Œæ¯”å¦‚ç”¨æˆ·è¦ä¸‹å•ï¼Œå°±å¾—æ‰‹åŠ¨ç‚¹å‡»â€œåˆ›å»ºè®¢å•â€æŒ‰é’®ï¼Œç³»ç»Ÿå†è°ƒç”¨å¯¹åº”çš„APIå®Œæˆæ“ä½œï¼›è€Œç°åœ¨æœ‰äº†AI Agentï¼Œç”¨æˆ·åªéœ€è¯´ä¸€å¥â€œå¸®æˆ‘ä¸‹å•ä¹°XXå•†å“â€ï¼Œå°±èƒ½å®ç°è‡ªç„¶äº¤äº’ï¼Œä½†å°´å°¬çš„æ˜¯â€”â€”AI Agentèƒ½å¬æ‡‚ç”¨æˆ·çš„éœ€æ±‚ï¼Œå´æ²¡æ³•ç›´æ¥è°ƒç”¨ä¼ ç»ŸAPIå»æ‰§è¡Œä¸‹å•ã€æ”¯ä»˜ã€æŸ¥è¯¢ç­‰å…·ä½“åŠŸèƒ½ï¼Œç›¸å½“äºâ€œæœ‰å˜´è¯´ï¼Œæ²¡æ‰‹åšâ€ï¼Œè¿™ä¹Ÿè®©AI Agentçš„ä»·å€¼å¤§æ‰“æŠ˜æ‰£ã€‚</p>
<p>ä»Šå¤©ï¼Œå°±ç»™å¤§å®¶åˆ†äº«3ç§å®ç”¨æ–¹æ¡ˆï¼Œå¸®ä½ å¿«é€Ÿæ‰“é€šä¼ ç»ŸRestful APIä¸AI Agentçš„è¡”æ¥ï¼Œå…¼é¡¾æ•ˆç‡ä¸å®ç”¨æ€§ï¼Œæ–°æ‰‹ä¹Ÿèƒ½è½»æ¾ç†è§£ï¼</p>
<h2 data-id="heading-0">ä¸€ã€3ç§æ ¸å¿ƒé›†æˆæ–¹æ¡ˆï¼ˆä¼˜ç¼ºç‚¹ä¸€ç›®äº†ç„¶ï¼‰</h2>
<p>ç»“åˆä¼ä¸šå®é™…å¼€å‘åœºæ™¯ï¼ˆä»å°é¡¹ç›®åˆ°å¤§å¾®æœåŠ¡æ¶æ„ï¼‰ï¼Œæˆ‘ä»¬æ•´ç†äº†3ç§æœ€å¸¸ç”¨çš„é›†æˆæ–¹æ¡ˆï¼Œæ¯ç§æ–¹æ¡ˆéƒ½æ˜ç¡®äº†é€‚ç”¨åœºæ™¯ã€ä¼˜ç‚¹å’Œç¼ºç‚¹ï¼Œå¯ä»¥æŒ‰éœ€é€‰æ‹©ï¼Œé¿å¼€è¸©å‘ï¼</p>
<h3 data-id="heading-1">æ–¹æ¡ˆ1ï¼šç›´æ¥ä½¿ç”¨AI Function Callè°ƒç”¨åç«¯API</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d7bd80c5f7804a4dbdf29f94f5e06364~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6LaK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770879035&amp;x-signature=1b9fJMDea40zcT%2F5s35M4JdtiuM%3D" alt="" loading="lazy"/></p>
<p>è¿™æ˜¯æœ€åŸºç¡€ã€æœ€å¿«æ·çš„é›†æˆæ–¹å¼ï¼Œæ ¸å¿ƒé€»è¾‘å°±æ˜¯ï¼šå°†ä¼ ç»ŸRestful APIçš„è°ƒç”¨é€»è¾‘ï¼Œå°è£…æˆAI Agentèƒ½è¯†åˆ«çš„<strong>Functionï¼ˆå‡½æ•°ï¼‰</strong>ï¼Œå½“ç”¨æˆ·è§¦å‘ç›¸å…³éœ€æ±‚æ—¶ï¼ŒAI Agentç›´æ¥è°ƒç”¨å¯¹åº”Functionï¼Œè¿›è€Œè§¦å‘åç«¯APIæ‰§è¡Œæ“ä½œï¼ˆæ¯”å¦‚æŸ¥è¯¢è®¢å•ã€å‘èµ·æ”¯ä»˜ï¼‰ã€‚</p>
<h4 data-id="heading-2">æ ¸å¿ƒä¼˜ç¼ºç‚¹</h4>
<ul>
<li>
<p><strong>ä¼˜ç‚¹</strong>ï¼šé›†æˆé—¨æ§›æä½ã€é€Ÿåº¦æœ€å¿«ï¼Œä¸éœ€è¦é¢å¤–å¼€å‘ä¸­é—´æœåŠ¡ï¼Œå‡ è¡Œä»£ç å°±èƒ½å®Œæˆå°è£…ã€‚å¦‚æœæ˜¯å°å‹é¡¹ç›®ï¼ˆæ¯”å¦‚åªæœ‰å‡ ä¸ªAPIã€æ²¡æœ‰å¤æ‚å¾®æœåŠ¡ï¼‰ï¼Œç”¨è¿™ç§æ–¹å¼æœ€çœå¿ƒï¼Œèƒ½å¿«é€Ÿå®ç°AI Agentä¸APIçš„è¡”æ¥ï¼Œä¸ç”¨æŠ•å…¥è¿‡å¤šäººåŠ›å’Œæ—¶é—´æˆæœ¬ã€‚</p>
</li>
<li>
<p><strong>ç¼ºç‚¹</strong>ï¼šæ‰©å±•æ€§æå·®ï¼Œåªé€‚åˆå°é¡¹ç›®ã€‚ä¸€æ—¦é¡¹ç›®è§„æ¨¡æ‰©å¤§ï¼Œé‡‡ç”¨å¾®æœåŠ¡æ¶æ„ï¼ˆæ¯”å¦‚è®¢å•ã€ç”¨æˆ·ã€æ”¯ä»˜ç­‰æ¨¡å—åˆ†åˆ«ç”±ä¸åŒå›¢é˜Ÿå¼€å‘ï¼‰ï¼Œé—®é¢˜å°±ä¼šå‡¸æ˜¾â€”â€”è¦è®©AI Agentè°ƒç”¨æ‰€æœ‰æ¨¡å—çš„APIï¼Œå°±éœ€è¦æ‰€æœ‰å¾®æœåŠ¡å›¢é˜Ÿéƒ½å‚ä¸åˆ°AI Agentçš„å¼€å‘ä¸­ï¼ŒæŠŠå„è‡ªçš„APIå°è£…æˆFunctionï¼Œä¸ä»…æ²Ÿé€šæˆæœ¬æé«˜ï¼Œè¿˜ä¼šå¯¼è‡´AI Agentçš„ä»£ç è¶Šæ¥è¶Šè‡ƒè‚¿ï¼Œéš¾ä»¥ç»´æŠ¤ï¼Œå®Œå…¨ä¸ç¬¦åˆç°ä»£è½¯ä»¶â€œåˆ†å·¥åä½œã€ç‹¬ç«‹éƒ¨ç½²â€çš„å¼€å‘æ¨¡å¼ã€‚</p>
</li>
</ul>
<h3 data-id="heading-3">æ–¹æ¡ˆ2ï¼šåˆ›å»ºMCPæœåŠ¡ä½œä¸ºä¸­é—´å±‚è¡”æ¥</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ad36659168f543ccb1fc8b51535c89b1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6LaK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770879035&amp;x-signature=49vHmQ0Gz9%2FPHx7%2FnSs2rg0Z%2Bp0%3D" alt="" loading="lazy"/></p>
<p>é’ˆå¯¹å¾®æœåŠ¡æ¶æ„çš„ç—›ç‚¹ï¼Œè¿™ç§æ–¹æ¡ˆåº”è¿è€Œç”Ÿâ€”â€”æ ¸å¿ƒé€»è¾‘æ˜¯ï¼šä¸ºæ¯ä¸ªå¾®æœåŠ¡ï¼ˆè®¢å•ã€ç”¨æˆ·ã€æ”¯ä»˜ç­‰ï¼‰ï¼Œå•ç‹¬åˆ›å»ºä¸€ä¸ª<strong>MCPæœåŠ¡ï¼ˆä¸­é—´é€šä¿¡æœåŠ¡ï¼‰</strong>ï¼ŒMCPæœåŠ¡ä¸“é—¨è´Ÿè´£æ¥æ”¶AI Agentçš„è°ƒç”¨è¯·æ±‚ï¼Œå†å°†è¯·æ±‚è½¬æ¢ä¸ºåç«¯Restful APIèƒ½è¯†åˆ«çš„æ ¼å¼ï¼ŒåŒæ—¶å¤„ç†APIçš„è¿”å›ç»“æœï¼Œå†åé¦ˆç»™AI Agentã€‚ç®€å•è¯´ï¼ŒMCPæœåŠ¡å°±æ˜¯AI Agentå’Œä¼ ç»ŸAPIä¹‹é—´çš„â€œç¿»è¯‘å®˜â€ï¼Œè®©ä¸¤è€…èƒ½é¡ºç•…æ²Ÿé€šã€‚</p>
<h4 data-id="heading-4">æ ¸å¿ƒä¼˜ç¼ºç‚¹</h4>
<ul>
<li>
<p><strong>ä¼˜ç‚¹</strong>ï¼šå®Œå…¨é€‚é…å¾®æœåŠ¡æ¶æ„ï¼Œåˆ†å·¥æ¸…æ™°ã€äº’ä¸å¹²æ‰°ã€‚æ¯ä¸ªå¾®æœåŠ¡å›¢é˜Ÿå¯ä»¥ç‹¬ç«‹å¼€å‘è‡ªå·±çš„MCPæœåŠ¡ï¼Œä¸ç”¨å‚ä¸AI Agentçš„å¼€å‘ï¼Œåªéœ€ä¿è¯è‡ªå·±çš„MCPæœåŠ¡èƒ½æ­£å¸¸è°ƒç”¨æœ¬å›¢é˜Ÿçš„APIå³å¯ï¼Œæ—¢èƒ½æå‡å¼€å‘æ•ˆç‡ï¼Œåˆèƒ½é™ä½æ²Ÿé€šæˆæœ¬ï¼Œåç»­å¾®æœåŠ¡å‡çº§ã€APIè¿­ä»£æ—¶ï¼Œä¹Ÿä¸ä¼šå½±å“åˆ°AI Agentï¼Œç»´æŠ¤èµ·æ¥æ›´è½»æ¾ï¼Œç¬¦åˆç°ä»£è½¯ä»¶çš„å¼€å‘æ¨¡å¼ã€‚</p>
</li>
<li>
<p><strong>ç¼ºç‚¹</strong>ï¼šéœ€è¦é¢å¤–æŠ•å…¥äººåŠ›å’Œèµ„æºæˆæœ¬ã€‚æ¯ä¸ªå¾®æœåŠ¡éƒ½è¦å¼€å‘å¯¹åº”çš„MCPæœåŠ¡ï¼Œè¿˜è¦åšæµ‹è¯•ã€éƒ¨ç½²ã€ç»´æŠ¤ï¼Œå¯¹äºèµ„æºç´§å¼ çš„ä¸­å°ä¼ä¸šæ¥è¯´ï¼Œä¼šå¢åŠ ä¸€å®šçš„è´Ÿæ‹…ï¼›å¦‚æœå¾®æœåŠ¡æ•°é‡è¾ƒå¤šï¼ŒMCPæœåŠ¡çš„ç®¡ç†ä¹Ÿä¼šå¸¦æ¥å°‘é‡é¢å¤–æˆæœ¬ã€‚</p>
</li>
</ul>
<h3 data-id="heading-5">æ–¹æ¡ˆ3ï¼šä½¿ç”¨Higress + Nacosï¼Œç›´æ¥å°†ä¼ ç»ŸAPIè½¬æ¢ä¸ºMCPæœåŠ¡</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f1856e56966b4efa8396c5615179d8fd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6LaK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770879035&amp;x-signature=%2BSZyzXdyPQba92N3jW4cX8GnwEQ%3D" alt="" loading="lazy"/></p>
<p>è¿™æ˜¯å…¼é¡¾æ•ˆç‡å’Œæˆæœ¬çš„â€œæœ€ä¼˜è§£â€ä¹‹ä¸€ï¼Œæ ¸å¿ƒé€»è¾‘æ˜¯ï¼šå€ŸåŠ©**Higressï¼ˆç½‘å…³å·¥å…·ï¼‰<strong>å’Œ</strong>Nacosï¼ˆæœåŠ¡æ³¨å†Œä¸­å¿ƒï¼‰**çš„åŸç”Ÿèƒ½åŠ›ï¼Œä¸ç”¨æ‰‹åŠ¨å¼€å‘MCPæœåŠ¡ï¼Œé€šè¿‡ç®€å•çš„é…ç½®æ“ä½œï¼Œå°±èƒ½ç›´æ¥å°†ä¼ ç»ŸRestful APIè½¬æ¢ä¸ºAI Agentèƒ½è¯†åˆ«çš„MCPæœåŠ¡ï¼Œç›¸å½“äºâ€œé›¶ä»£ç /å°‘ä»£ç â€å®Œæˆé›†æˆã€‚</p>
<p>ç®€å•è¯´ï¼Œå°±æ˜¯åˆ©ç”¨ç°æˆçš„å·¥å…·ï¼Œè‡ªåŠ¨å®Œæˆâ€œç¿»è¯‘å®˜â€ï¼ˆMCPæœåŠ¡ï¼‰çš„åˆ›å»ºï¼Œä¸ç”¨æ¯ä¸ªå›¢é˜Ÿå•ç‹¬å¼€å‘ï¼Œå¤§å¤§èŠ‚çœäººåŠ›æˆæœ¬ã€‚</p>
<h4 data-id="heading-6">æ ¸å¿ƒä¼˜ç¼ºç‚¹</h4>
<ul>
<li>
<p><strong>ä¼˜ç‚¹</strong>ï¼šæ•ˆç‡æœ€é«˜ã€æˆæœ¬æœ€ä½ã€‚ç†æƒ³æƒ…å†µä¸‹ï¼Œä¸ç”¨ç¼–å†™ä¸€è¡Œä»£ç ï¼Œåªéœ€åœ¨Higresså’ŒNacosä¸Šåšä¸€äº›é…ç½®ï¼ˆæ¯”å¦‚æ³¨å†ŒAPIã€è®¾ç½®è½¬æ¢è§„åˆ™ï¼‰ï¼Œå°±èƒ½å®Œæˆä¼ ç»ŸAPIåˆ°MCPæœåŠ¡çš„è½¬æ¢ï¼Œé€‚é…AI Agentçš„è°ƒç”¨ï¼›åŒæ—¶ï¼Œä¸å½±å“åŸæœ‰å¾®æœåŠ¡çš„æ¶æ„ï¼Œåç»­APIè¿­ä»£æ—¶ï¼Œåªéœ€è°ƒæ•´é…ç½®å³å¯ï¼Œç»´æŠ¤æˆæœ¬æä½ã€‚</p>
</li>
<li>
<p><strong>ç¼ºç‚¹</strong>ï¼šå¯¹ç°æœ‰é¡¹ç›®æœ‰ä¸€å®šçš„ç¯å¢ƒè¦æ±‚ï¼Œæœ‰å°‘é‡æ”¹é€ æˆæœ¬ã€‚â‘  å¦‚æœé¡¹ç›®ä¸­æœ‰å¤§é‡APIï¼Œé…ç½®çš„ç»´æŠ¤ä¾ç„¶éœ€è¦æŠ•å…¥ä¸€å®šçš„äººåŠ›ï¼›â‘¡ è€é¡¹ç›®å¦‚æœæ²¡æœ‰ä½¿ç”¨Nacosï¼ˆæˆ–å…¶ä»–æœåŠ¡æ³¨å†Œä¸­å¿ƒï¼‰ï¼Œå°±éœ€è¦é¢å¤–éƒ¨ç½²Nacoså¹¶æ”¹é€ é¡¹ç›®ï¼Œè®©APIæ”¯æŒæœåŠ¡æ³¨å†Œï¼›â‘¢ éœ€è¦ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬çš„Higresså’ŒNacosï¼Œè€é¡¹ç›®çš„ç›¸å…³ç»„ä»¶ç‰ˆæœ¬è¿‡ä½æ—¶ï¼Œéœ€è¦å‡çº§ç»„ä»¶ï¼Œå¯èƒ½ä¼šå¸¦æ¥çŸ­æš‚çš„ä¸ç¨³å®šé£é™©ï¼ˆæ¯”å¦‚å…¼å®¹æ€§é—®é¢˜ï¼‰ã€‚</p>
</li>
</ul>
<h2 data-id="heading-7">äºŒã€æ–¹æ¡ˆé€‰å‹æŒ‡å—ï¼ˆæŒ‰éœ€é€‰æ‹©ï¼Œä¸è¸©å‘ï¼‰</h2>
<p>å¾ˆå¤šä¼ä¸šçº ç»“â€œé€‰å“ªç§æ–¹æ¡ˆâ€ï¼Œæ ¸å¿ƒè¿˜æ˜¯çœ‹<strong>é¡¹ç›®è§„æ¨¡ã€å¾®æœåŠ¡æ¶æ„ã€äººåŠ›èµ„æº</strong>è¿™3ä¸ªå…³é”®å› ç´ ï¼Œè¿™é‡Œç»™å¤§å®¶æ˜ç¡®çš„é€‰å‹å»ºè®®ï¼Œç›´æ¥å¯¹å·å…¥åº§å³å¯ï¼š</p>
<ol>
<li>
<p>å¦‚æœæ˜¯<strong>å°å‹é¡¹ç›®</strong>ï¼ˆæ— å¤æ‚å¾®æœåŠ¡ï¼ŒAPIæ•°é‡å°‘ï¼Œæ¯”å¦‚ä¸ªäººé¡¹ç›®ã€å°å‹å·¥å…·ç±»äº§å“ï¼‰ï¼šä¼˜å…ˆé€‰ã€æ–¹æ¡ˆ1ï¼šAI Function Callç›´æ¥è°ƒç”¨ã€‘ï¼Œå¿«é€Ÿè½åœ°ï¼ŒèŠ‚çœæˆæœ¬ï¼Œä¸ç”¨è¿‡åº¦è®¾è®¡æ¶æ„ã€‚</p>
</li>
<li>
<p>å¦‚æœæ˜¯<strong>ä¸­å¤§å‹é¡¹ç›®</strong>ï¼ˆé‡‡ç”¨å¾®æœåŠ¡æ¶æ„ï¼Œå¤šä¸ªå›¢é˜Ÿåˆ†å·¥å¼€å‘ï¼ŒAPIæ•°é‡å¤šï¼Œéœ€è¦é•¿æœŸç»´æŠ¤ï¼‰ï¼šä¼˜å…ˆé€‰ã€æ–¹æ¡ˆ2ï¼šåˆ›å»ºMCPæœåŠ¡ã€‘ï¼Œè™½ç„¶å‰æœŸæœ‰å¼€å‘æˆæœ¬ï¼Œä½†é•¿æœŸæ¥çœ‹ï¼Œèƒ½ä¿è¯æ¶æ„çš„çµæ´»æ€§å’Œå¯ç»´æŠ¤æ€§ï¼Œé¿å…åç»­å‡ºç°â€œç‰µä¸€å‘è€ŒåŠ¨å…¨èº«â€çš„é—®é¢˜ã€‚</p>
</li>
<li>
<p>å¦‚æœæ˜¯<strong>ä¸­å¤§å‹é¡¹ç›®ï¼Œä¸”å¸Œæœ›èŠ‚çœäººåŠ›æˆæœ¬ã€å¿«é€Ÿè½åœ°</strong>ï¼ˆç°æœ‰é¡¹ç›®å·²ä½¿ç”¨Nacosï¼Œç»„ä»¶ç‰ˆæœ¬è¾ƒæ–°ï¼‰ï¼šä¼˜å…ˆé€‰ã€æ–¹æ¡ˆ3ï¼šHigress + Nacosè½¬æ¢ã€‘ï¼Œä¸ç”¨å¼€å‘MCPæœåŠ¡ï¼Œé€šè¿‡é…ç½®å°±èƒ½å®Œæˆé›†æˆï¼Œå…¼é¡¾æ•ˆç‡å’Œå®ç”¨æ€§ï¼›å¦‚æœé¡¹ç›®æœªä½¿ç”¨Nacosï¼Œå¯è¯„ä¼°æ”¹é€ æˆæœ¬ï¼Œè‹¥æ”¹é€ ç®€å•ï¼Œä¹Ÿå¯ä¼˜å…ˆé€‰æ‹©æ­¤æ–¹æ¡ˆã€‚</p>
</li>
</ol>
<blockquote>
<p>ğŸ”” è¡¥å……æé†’ï¼šå¦‚æœä¼ä¸šå‰æœŸä¸ç¡®å®šå“ªç§æ–¹æ¡ˆæ›´åˆé€‚ï¼Œå¯å…ˆé‡‡ç”¨æ–¹æ¡ˆ1å¿«é€ŸéªŒè¯åœºæ™¯ï¼ˆæ¯”å¦‚å…ˆè®©AI Agentè°ƒç”¨1-2ä¸ªæ ¸å¿ƒAPIï¼‰ï¼Œåç»­éšç€é¡¹ç›®è§„æ¨¡æ‰©å¤§ï¼Œå†é€æ­¥è¿ç§»åˆ°æ–¹æ¡ˆ2æˆ–æ–¹æ¡ˆ3ï¼Œé™ä½è¯•é”™æˆæœ¬ã€‚</p>
</blockquote>
<h2 data-id="heading-8">ä¸‰ã€æ€»ç»“ï¼šé«˜æ•ˆé›†æˆçš„æ ¸å¿ƒé€»è¾‘</h2>
<p>ä¼ ç»ŸRestful APIé›†æˆAI Agentï¼Œæ ¸å¿ƒä¸æ˜¯â€œé‡æ„APIâ€ï¼Œè€Œæ˜¯â€œæ‰“é€šè¡”æ¥é€šé“â€â€”â€”è®©AI Agentèƒ½é¡ºåˆ©è°ƒç”¨APIã€è·å–è¿”å›ç»“æœï¼ŒåŒæ—¶ä¸å½±å“åŸæœ‰ç³»ç»Ÿçš„ç¨³å®šæ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</p>
<p>æˆ‘ä»¬æ¢³ç†çš„3ç§æ–¹æ¡ˆï¼Œæœ¬è´¨ä¸Šæ˜¯â€œä»ç®€å•åˆ°å¤æ‚ã€ä»å¿«é€Ÿè½åœ°åˆ°é•¿æœŸé€‚é…â€çš„æ¢¯åº¦é€‰æ‹©ï¼šæ–¹æ¡ˆ1é€‚åˆå¿«é€ŸéªŒè¯ï¼Œæ–¹æ¡ˆ2é€‚åˆé•¿æœŸç»´æŠ¤ï¼Œæ–¹æ¡ˆ3é€‚åˆå…¼é¡¾æ•ˆç‡ä¸æˆæœ¬ã€‚</p>
<p>æœ€åæé†’å¤§å®¶ï¼šé›†æˆæ—¶ä¸ç”¨è¿½æ±‚â€œæœ€å…ˆè¿›â€ï¼Œè€Œæ˜¯è¦â€œæœ€é€‚é…â€â€”â€”ç»“åˆè‡ªå·±çš„é¡¹ç›®è§„æ¨¡ã€äººåŠ›æˆæœ¬ï¼Œé€‰æ‹©èƒ½å¿«é€Ÿè½åœ°ã€åç»­å¥½ç»´æŠ¤çš„æ–¹æ¡ˆï¼Œå°±æ˜¯æœ€ä¼˜è§£ã€‚åªè¦æ‰“é€šäº†ä¼ ç»ŸAPIä¸AI Agentçš„è¡”æ¥ï¼Œå°±èƒ½è®©AI AgentçœŸæ­£â€œè½åœ°å¯ç”¨â€ï¼Œæ—¢ä¿ç•™åŸæœ‰ç³»ç»Ÿçš„ç¨³å®šæ€§ï¼Œåˆèƒ½å€ŸåŠ©AIçš„ä¼˜åŠ¿ï¼Œæå‡ç”¨æˆ·ä½“éªŒå’Œä¸šåŠ¡æ•ˆç‡ã€‚</p>
<h2 data-id="heading-9">å‚è€ƒèµ„æ–™</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fjava2ai.com%2Fintegration%2Fmcps%2Fnacos%2Fspring-ai-alibaba-mcp-nacos-introduce" target="_blank" title="https://java2ai.com/integration/mcps/nacos/spring-ai-alibaba-mcp-nacos-introduce" ref="nofollow noopener noreferrer">java2ai.com/integrationâ€¦</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fnacos.io%2Fdocs%2Flatest%2Fmanual%2Fuser%2Fai%2Fapi-to-mcp%2F%3Fspm%3D5238cd80.6a33be36.0.0.2f431e5d0fwVgN%26source%3Dblog" target="_blank" title="https://nacos.io/docs/latest/manual/user/ai/api-to-mcp/?spm=5238cd80.6a33be36.0.0.2f431e5d0fwVgN&amp;source=blog" ref="nofollow noopener noreferrer">nacos.io/docs/latestâ€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[MybatisToolsâ€”â€” ç›´æ¥è¿è¡Œæµ‹è¯• sql]]></title>    <link>https://juejin.cn/post/7602936997175099444</link>    <guid>https://juejin.cn/post/7602936997175099444</guid>    <pubDate>2026-02-05T06:54:20.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602936997175099444" data-draft-id="7602916013877641231" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="MybatisToolsâ€”â€” ç›´æ¥è¿è¡Œæµ‹è¯• sql"/> <meta itemprop="keywords" content="IntelliJ IDEA,MyBatis"/> <meta itemprop="datePublished" content="2026-02-05T06:54:20.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¢§ç‰ç¬™"/> <meta itemprop="url" content="https://juejin.cn/user/3263006244611949"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            MybatisToolsâ€”â€” ç›´æ¥è¿è¡Œæµ‹è¯• sql
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3263006244611949/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¢§ç‰ç¬™
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-05T06:54:20.000Z" title="Thu Feb 05 2026 06:54:20 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-05
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ¬æ¬¡æ›´æ–°ä¸»è¦æ˜¯é€‚é…æ–°ç‰ˆæœ¬ï¼ˆ2025.2+ï¼‰ï¼Œå¦å¤–å¸¦æ¥å‡ ä¸ªæ–°åŠŸèƒ½ã€‚</p>
<p>è¿˜ä¸çŸ¥é“è¿™ä¸ªæ’ä»¶å¹²ä»€ä¹ˆçš„å¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡ç« <code>[MybatisTools ä½¿ç”¨æ‰‹å†Œ](https://www.toutiao.com/article/7431384971811553846/?log_from=d4b7047673e2b8_1770197767606)</code>ã€‚æœ¬ç¯‡ä»…è®²æ›´æ–°çš„åŠŸèƒ½ï¼šè¿è¡Œå’Œæµ‹è¯• sqlã€‚</p>
<p>åœ¨ mapper çš„ xmlæˆ–è€…æ¥å£ç±»é‡Œé¼ æ ‡å³é”®ç‚¹å‡»å·¦ä¾§ icon
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f125308f523c4d21bbf67f4507f876ac~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56Kn546J56yZ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770879260&amp;x-signature=kvaDn1J96QzEgVn%2FUdrC%2FpRvC4E%3D" alt="image.png" loading="lazy"/>
åœ¨å¼¹å‡ºçš„çª—å£é‡Œè¾“å…¥å‚æ•°ï¼Œç‚¹å‡» transform å¯ä»¥æŸ¥çœ‹ sql æ˜¯å¦æ­£ç¡®ï¼Œå¦‚æœæ²¡æœ‰é—®é¢˜åˆ™å¯ä»¥ç›´æ¥ç‚¹å‡» run è¿›è¡Œæ‰§è¡Œ
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/66778d11e6f8420db7f3b75a9951884a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56Kn546J56yZ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770879260&amp;x-signature=3ekZICvBsbR4TIKNp2irOykqcbw%3D" alt="image.png" loading="lazy"/>
ç‚¹å‡» run æŒ‰é’®å¯ä»¥å¾—åˆ°ç»“æœ
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c55b86de72114325a14361d009bca797~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56Kn546J56yZ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770879260&amp;x-signature=0wStQQ8lMGvXNYwWe47Msq8g870%3D" alt="image.png" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ZSTDæ¥å£ä¸åŒçš„å‚æ•°ç»„åˆçš„æ•ˆæœ]]></title>    <link>https://juejin.cn/post/7602936997175115828</link>    <guid>https://juejin.cn/post/7602936997175115828</guid>    <pubDate>2026-02-05T06:55:45.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602936997175115828" data-draft-id="7602931486597513251" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ZSTDæ¥å£ä¸åŒçš„å‚æ•°ç»„åˆçš„æ•ˆæœ"/> <meta itemprop="keywords" content="C++"/> <meta itemprop="datePublished" content="2026-02-05T06:55:45.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸€åªå…¬ç¾Š"/> <meta itemprop="url" content="https://juejin.cn/user/928423275930535"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ZSTDæ¥å£ä¸åŒçš„å‚æ•°ç»„åˆçš„æ•ˆæœ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/928423275930535/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸€åªå…¬ç¾Š
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-05T06:55:45.000Z" title="Thu Feb 05 2026 06:55:45 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-05
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>Zstandard (ZSTD) è¿™ç§å‹ç¼©ç®—æ³•ä¹‹æ‰€ä»¥åœ¨å·¥ä¸šç•Œå¤§æ”¾å¼‚å½©ï¼Œæ ¸å¿ƒå°±åœ¨äºå®ƒçš„<strong>é«˜åº¦å¯å®šåˆ¶æ€§</strong>ã€‚å®ƒä¸ä»…ä»…æä¾› 1-22 çº§çš„å‹ç¼©ç­‰çº§ï¼Œè¿˜å…è®¸å¼€å‘è€…æ·±å…¥åº•å±‚ï¼Œåƒè°ƒéŸ³å¸ˆä¸€æ ·è°ƒæ•´å„é¡¹å‚æ•°ã€‚</p>
<p>ä»¥ä¸‹æ˜¯ ZSTD æ¥å£å‚æ•°çš„æ·±åº¦è§£æã€ç»„åˆæ•ˆæœåŠä»£ç ç¤ºä¾‹ã€‚</p>
<hr/>
<h2 data-id="heading-0">1. æ ¸å¿ƒåŸºç¡€å‚æ•°ï¼šå‹ç¼©ç­‰çº§ (Compression Level)</h2>
<p>è¿™æ˜¯æœ€å¸¸ç”¨çš„å‚æ•°ï¼Œå†³å®šäº†å‹ç¼©é€Ÿåº¦ä¸å‹ç¼©ç‡ä¹‹é—´çš„å¹³è¡¡ã€‚</p>
<ul>
<li>
<p><strong>èŒƒå›´</strong>ï¼š1 åˆ° 22ã€‚</p>
<ul>
<li><strong>1-3</strong>ï¼šå¿«é€Ÿæ¨¡å¼ï¼Œé€‚ç”¨äºå¯¹å»¶è¿Ÿæå…¶æ•æ„Ÿçš„åœºæ™¯ï¼ˆå¦‚æ—¥å¿—å®æ—¶ä¼ è¾“ï¼‰ã€‚</li>
<li><strong>4-15</strong>ï¼šå¹³è¡¡æ¨¡å¼ï¼Œé€‚ç”¨äºé€šç”¨çš„æ–‡ä»¶å­˜å‚¨ã€‚</li>
<li><strong>16-22 (Ultra)</strong> ï¼šæè‡´æ¨¡å¼ï¼Œæ¶ˆè€—å¤§é‡ CPU å’Œå†…å­˜ï¼Œæ¢å–æœ€å°çš„ä½“ç§¯ï¼ˆé€‚ç”¨äºå†·å¤‡ä»½ã€å®‰è£…åŒ…ï¼‰ã€‚</li>
</ul>
</li>
<li>
<p><strong>è´Ÿæ•°ç­‰çº§</strong>ï¼šZSTD æ”¯æŒ <code>--fast</code> æ¨¡å¼ï¼ˆå¦‚ -1 åˆ° -5ï¼‰ï¼Œæ¯”ç­‰çº§ 1 æ›´å¿«ï¼Œç‰ºç‰²æ›´å¤šå‹ç¼©ç‡ã€‚</p>
</li>
</ul>
<hr/>
<h2 data-id="heading-1">2. è¿›é˜¶å¾®è°ƒå‚æ•° (ZSTD_cParameter)</h2>
<p>å½“ä½ ä½¿ç”¨ <code>ZSTD_CCtx_setParameter()</code> æ¥å£æ—¶ï¼Œå¯ä»¥ç²¾ç»†æ§åˆ¶å‹ç¼©å¼•æ“çš„å†…éƒ¨è¡Œä¸ºã€‚</p>








































<table><thead><tr><th><strong>å‚æ•°å (C API)</strong></th><th><strong>åŠŸèƒ½æè¿°</strong></th><th><strong>æ•ˆæœè¯´æ˜</strong></th></tr></thead><tbody><tr><td><code>ZSTD_c_windowLog</code></td><td>æŸ¥æ‰¾çª—å£å¤§å° (<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mi>x</mi></msup></mrow><annotation encoding="application/x-tex">2^x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6644em;"/><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">x</span></span></span></span></span></span></span></span></span></span></span></span> å­—èŠ‚)</td><td><strong>æ ¸å¿ƒå‚æ•°</strong>ã€‚å€¼è¶Šå¤§ï¼Œèƒ½åŒ¹é…åˆ°çš„é‡å¤æ•°æ®è¶Šè¿œï¼Œå‹ç¼©ç‡è¶Šé«˜ï¼Œä½†è§£å‹/å‹ç¼©å†…å­˜å ç”¨ç¿»å€ã€‚</td></tr><tr><td><code>ZSTD_c_hashLog</code></td><td>å“ˆå¸Œè¡¨å¤§å°</td><td>å½±å“å“ˆå¸Œç¢°æ’ç‡ã€‚è°ƒå¤§å¯æå‡æœç´¢æ•ˆç‡ï¼Œé€‚åˆå¤§æ–‡ä»¶ã€‚</td></tr><tr><td><code>ZSTD_c_chainLog</code></td><td>æœç´¢é“¾é•¿åº¦</td><td>å†³å®šäº†åœ¨å“ˆå¸Œå†²çªæ—¶æœç´¢çš„æ·±åº¦ã€‚è¶Šå¤§è¶Šæ…¢ï¼Œä½†å‹ç¼©ç‡è¶Šé«˜ã€‚</td></tr><tr><td><code>ZSTD_c_searchLog</code></td><td>æœç´¢èŒƒå›´</td><td>é™åˆ¶æœç´¢æ¬¡æ•°ã€‚å€¼è¶Šå¤§ï¼Œæœç´¢è¶Šå½»åº•ã€‚</td></tr><tr><td><code>ZSTD_c_minMatch</code></td><td>æœ€å°åŒ¹é…é•¿åº¦</td><td>é€šå¸¸ä¸º 3-7ã€‚å€¼è¶Šå°ï¼Œèƒ½å‘ç°çš„ç»†å¾®é‡å¤è¶Šå¤šï¼ˆå‹ç¼©ç‡é«˜ï¼‰ï¼Œä½†å¤„ç†å˜æ…¢ã€‚</td></tr><tr><td><code>ZSTD_c_strategy</code></td><td>æœç´¢ç­–ç•¥</td><td>ä» <code>Fast</code> åˆ° <code>BTUltra2</code>ã€‚ç­–ç•¥è¶Šå¤æ‚ï¼Œå‹ç¼©è´¨é‡è¶Šé«˜ï¼Œè€—æ—¶å‘ˆæŒ‡æ•°å¢é•¿ã€‚</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-2">3. ç‰¹è‰²åŠŸèƒ½å‚æ•°</h2>
<h3 data-id="heading-3">A. å¤šçº¿ç¨‹å‚æ•° (<code>ZSTD_c_nbWorkers</code>)</h3>
<p>ZSTD åŸç”Ÿæ”¯æŒå¹¶è¡Œå‹ç¼©ã€‚</p>
<ul>
<li><strong>æ•ˆæœ</strong>ï¼šè®¾ç½®ä¸º <code>n</code> æ—¶ï¼Œä¼šå°†æ•°æ®åˆ†æˆå¤šä¸ªå—å¹¶è¡Œå¤„ç†ã€‚</li>
<li><strong>æ³¨æ„</strong>ï¼šå¤šçº¿ç¨‹ä¼šç•¥å¾®é™ä½å‹ç¼©ç‡ï¼ˆå› ä¸ºå—ä¹‹é—´å­˜åœ¨è¾¹ç•Œï¼‰ï¼Œä½†ä¼šæå¤§åœ°ç¼©çŸ­å‹ç¼©æ—¶é—´ã€‚</li>
</ul>
<h3 data-id="heading-4">B. è¿œç¨‹åŒ¹é… (Long Distance Matching - LDM)</h3>
<ul>
<li><strong>å‚æ•°</strong>ï¼š<code>ZSTD_c_enableLongDistanceMatching</code></li>
<li><strong>æ•ˆæœ</strong>ï¼šä¸“é—¨ç”¨äºå¤„ç†<strong>æå…¶åºå¤§ä¸”æœ‰è¿œè·ç¦»é‡å¤</strong>çš„æ•°æ®ï¼ˆå¦‚è™šæ‹Ÿæœºé•œåƒã€ç›¸ä¼¼åº¦é«˜çš„æµ·é‡æ—¥å¿—ï¼‰ã€‚å®ƒå¯ä»¥åœ¨å‡ ç™¾ MB ç”šè‡³ GB ä¹‹å¤–å¯»æ‰¾é‡å¤æ•°æ®ï¼Œè€Œä¸å— <code>windowLog</code> çš„å†…å­˜é™åˆ¶ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-5">4. å…¸å‹åœºæ™¯å‚æ•°ç»„åˆä¸æ•ˆæœ</h2>
<h3 data-id="heading-6">åœºæ™¯ä¸€ï¼šæé€Ÿæ—¥å¿—æµ (Low Latency)</h3>
<ul>
<li><strong>ç»„åˆ</strong>ï¼š<code>Level 1</code> + <code>nbWorkers=0</code> (å•çº¿ç¨‹å‡å°‘å¼€é”€) + <code>windowLog=10</code> (1KB çª—å£)</li>
<li><strong>æ•ˆæœ</strong>ï¼šæä½çš„ CPU å ç”¨ï¼Œäºšæ¯«ç§’çº§å»¶è¿Ÿï¼Œé€‚åˆååé‡å·¨å¤§çš„å®æ—¶æ•°æ®æµã€‚</li>
</ul>
<h3 data-id="heading-7">åœºæ™¯äºŒï¼šå¸¸è§„ Web é™æ€èµ„æºå‹ç¼©</h3>
<ul>
<li><strong>ç»„åˆ</strong>ï¼š<code>Level 3</code> (é»˜è®¤) + <code>nbWorkers=4</code></li>
<li><strong>æ•ˆæœ</strong>ï¼šåœ¨ä¸æ˜æ˜¾æ‹–æ…¢æ„å»ºé€Ÿåº¦çš„å‰æä¸‹ï¼Œè¾¾åˆ°ä¼˜äº Gzip çš„å‹ç¼©ç‡ã€‚</li>
</ul>
<h3 data-id="heading-8">åœºæ™¯ä¸‰ï¼šç¦»çº¿å¤§æ•°æ®å­˜æ¡£ (Maximum Compression)</h3>
<ul>
<li><strong>ç»„åˆ</strong>ï¼š<code>Level 22</code> + <code>windowLog=27</code> (128MB) + <code>enableLDM=1</code> + <code>strategy=BTUltra2</code></li>
<li><strong>æ•ˆæœ</strong>ï¼šå‹ç¼©æå…¶ç¼“æ…¢ï¼Œä½†æ–‡ä»¶ä½“ç§¯ä¼šè¾¾åˆ°æƒŠäººçš„å°ï¼Œé€‚åˆä¸€æ—¦å­˜å…¥åŸºæœ¬ä¸åŠ¨çš„æ•°æ®ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-9">5. ä»£ç ç¤ºä¾‹ (Python æ¥å£æ¼”ç¤º)</h2>
<p>è™½ç„¶ C æ˜¯åŸç”Ÿæ¥å£ï¼Œä½† Python çš„ <code>zstandard</code> åº“èƒ½æ›´ç›´è§‚åœ°å±•ç¤ºå‚æ•°ç»„åˆã€‚</p>
<p>Python</p>
<pre><code class="hljs language-ini" lang="ini">import zstandard as zstd

<span class="hljs-comment"># æ¨¡æ‹Ÿä¸€ä»½å…·æœ‰é‡å¤ç»“æ„çš„å¤§æ•°æ®</span>
<span class="hljs-attr">data</span> = b<span class="hljs-string">"Welcome to ZSTD exploration! "</span> * <span class="hljs-number">10000</span> 

<span class="hljs-comment"># 1. åˆ›å»ºä¸€ä¸ªé«˜æ€§èƒ½å‹ç¼©å™¨ï¼šå¤šçº¿ç¨‹ + ä½ç­‰çº§</span>
<span class="hljs-attr">params_fast</span> = zstd.ZstdCompressionParameters.from_level(<span class="hljs-number">1</span>, threads=<span class="hljs-number">4</span>)
<span class="hljs-attr">cctx_fast</span> = zstd.ZstdCompressor(compression_params=params_fast)
<span class="hljs-attr">compressed_fast</span> = cctx_fast.compress(data)

<span class="hljs-comment"># 2. åˆ›å»ºä¸€ä¸ªæè‡´å‹ç¼©å™¨ï¼šé«˜ç­‰çº§ + è¿œç¨‹åŒ¹é… (LDM)</span>
<span class="hljs-comment"># æ˜¾å¼è°ƒæ•´é«˜çº§å‚æ•°</span>
<span class="hljs-attr">params_ultra</span> = zstd.ZstdCompressionParameters(
    <span class="hljs-attr">compression_level</span>=<span class="hljs-number">22</span>,
    <span class="hljs-attr">enable_ldm</span>=<span class="hljs-literal">True</span>,           <span class="hljs-comment"># å¼€å¯é•¿è·ç¦»åŒ¹é…</span>
    <span class="hljs-attr">window_log</span>=<span class="hljs-number">22</span>,             <span class="hljs-comment"># 4MB çª—å£</span>
    <span class="hljs-attr">min_match</span>=<span class="hljs-number">3</span>,               <span class="hljs-comment"># å°½å¯èƒ½åŒ¹é…çŸ­é‡å¤é¡¹</span>
    <span class="hljs-attr">strategy</span>=zstd.STRATEGY_BTULTRA2 <span class="hljs-comment"># æœ€å¼ºæœç´¢ç­–ç•¥</span>
)
<span class="hljs-attr">cctx_ultra</span> = zstd.ZstdCompressor(compression_params=params_ultra)
<span class="hljs-attr">compressed_ultra</span> = cctx_ultra.compress(data)

print(f"åŸå§‹å¤§å°: {len(data) / 1024:.2f} KB")
print(f"å¿«é€Ÿæ¨¡å¼å¤§å°: {len(compressed_fast) / 1024:.2f} KB")
print(f"æè‡´æ¨¡å¼å¤§å°: {len(compressed_ultra) / 1024:.2f} KB")
</code></pre>
<hr/>
<h2 data-id="heading-10">6. ä½¿ç”¨å»ºè®®ä¸é¿å‘æŒ‡å—</h2>
<ol>
<li><strong>å†…å­˜å ç”¨è®¡ç®—</strong>ï¼šå‹ç¼©æ—¶å†…å­˜å¼€é”€çº¦ä¸º <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>3</mn><mo>Ã—</mo><msup><mn>2</mn><mrow><mi>w</mi><mi>i</mi><mi>n</mi><mi>d</mi><mi>o</mi><mi>w</mi><mi>L</mi><mi>o</mi><mi>g</mi></mrow></msup></mrow><annotation encoding="application/x-tex">3 \times 2^{windowLog}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"/><span class="mord">3</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.8491em;"/><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.02691em;">w</span><span class="mord mathnormal mtight">in</span><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight" style="margin-right:0.02691em;">w</span><span class="mord mathnormal mtight">L</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight" style="margin-right:0.03588em;">g</span></span></span></span></span></span></span></span></span></span></span></span></span>ã€‚å¦‚æœå°† <code>windowLog</code> è®¾ä¸º 31ï¼ˆ2GBï¼‰ï¼Œå•ä¸ªå‹ç¼©ä»»åŠ¡å¯èƒ½åƒæ‰ 6GB å†…å­˜ã€‚<strong>åŠ¡å¿…æ ¹æ®æœåŠ¡å™¨è§„æ ¼é™åˆ¶ <code>windowLog</code></strong>ã€‚</li>
<li><strong>è§£å‹å†…å­˜å›ºå®š</strong>ï¼šZSTD æœ€å¤§çš„ä¼˜åŠ¿ä¹‹ä¸€æ˜¯<strong>è§£å‹å†…å­˜æ’å®š</strong>ã€‚è§£å‹æ—¶éœ€è¦çš„å†…å­˜ä»…ç­‰äºå‹ç¼©æ—¶è®¾ç½®çš„ <code>windowLog</code>ã€‚å› æ­¤ï¼Œå³ä½¿å‹ç¼©æ—¶ç”¨äº† Level 22ï¼Œåªè¦çª—å£è®¾å¾—åˆç†ï¼Œæ‰‹æœºç«¯ä¹Ÿèƒ½è½»æ¾è§£å‹ã€‚</li>
<li><strong>å­—å…¸å‹ç¼© (Dictionary Compression)</strong> ï¼šå¦‚æœä½ åœ¨å¤„ç†å¤§é‡<strong>å°æ•°æ®</strong>ï¼ˆå¦‚ JSON API å“åº”ï¼Œæ¯ä¸ªä»… 1KBï¼‰ï¼Œå‚æ•°è°ƒæ•´çš„æ•ˆæœä¸å¦‚<strong>è®­ç»ƒä¸€ä¸ªå­—å…¸</strong>æ•ˆæœå¥½ã€‚</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[uni-appä½¿ç”¨éuni_modulesçš„uchartsç»„ä»¶ï¼Œæœ¬åœ°è¿è¡Œæ²¡é—®é¢˜ï¼Œéƒ¨ç½²åˆ°çº¿ä¸Šå‡ºé—®é¢˜ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7602996277663957046</link>    <guid>https://juejin.cn/post/7602996277663957046</guid>    <pubDate>2026-02-05T06:47:06.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602996277663957046" data-draft-id="7602921143490314283" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="uni-appä½¿ç”¨éuni_modulesçš„uchartsç»„ä»¶ï¼Œæœ¬åœ°è¿è¡Œæ²¡é—®é¢˜ï¼Œéƒ¨ç½²åˆ°çº¿ä¸Šå‡ºé—®é¢˜ï¼Ÿ"/> <meta itemprop="keywords" content="Vue.js"/> <meta itemprop="datePublished" content="2026-02-05T06:47:06.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é¾™luckGå‰ç«¯"/> <meta itemprop="url" content="https://juejin.cn/user/1464996737332168"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            uni-appä½¿ç”¨éuni_modulesçš„uchartsç»„ä»¶ï¼Œæœ¬åœ°è¿è¡Œæ²¡é—®é¢˜ï¼Œéƒ¨ç½²åˆ°çº¿ä¸Šå‡ºé—®é¢˜ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1464996737332168/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é¾™luckGå‰ç«¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-05T06:47:06.000Z" title="Thu Feb 05 2026 06:47:06 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-05
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong>é—®é¢˜èƒŒæ™¯</strong>ï¼šä½¿ç”¨éuni_modulesçš„uchartsç»„ä»¶ï¼Œæœ¬åœ°è¿è¡Œæ²¡ç”¨é—®é¢˜ï¼Œå‘å¸ƒä¸ºh5åæœªè§æŠ¥é”™ï¼Œä½†uchartså´å§‹ç»ˆå‡ºä¸æ¥ã€‚</p>
<p><strong>æ­¥éª¤å¤ç°</strong>ï¼š</p>
<ol>
<li>
<p>æ‰‹ä¸Šæœ‰ä¸ªéœ€æ±‚ï¼Œéœ€è¦ä½¿ç”¨uni-appå¼€å‘å¾®ä¿¡å°ç¨‹åºï¼Œåˆå§‹æ—¶ä½¿ç”¨h5ä½œä¸ºæ¼”ç¤ºç³»ç»Ÿï¼Œéœ€æ±‚é‡Œé¢å­˜åœ¨å›¾è¡¨å±•ç¤ºåŠŸèƒ½ã€‚è¿™æ—¶ï¼Œç½‘ä¸Šå»æ‰¾å¯¹åº”é€‚åˆçš„chartsç»„ä»¶ï¼Œå‘ç°uchartså¯ä»¥ç”¨äºç§»åŠ¨ç«¯å›¾è¡¨å±•ç¤ºã€‚</p>
</li>
<li>
<p>å¼•å…¥å®˜æ–¹éuni_modulesç»„ä»¶ï¼ˆå®˜æ–¹æœ‰è¯´æ˜æ–‡æ¡£ï¼‰ï¼Œè¿›è¡Œå¼€å‘ã€‚
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d77bee669cd647f68289179135a52e49~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6b6ZbHVja0fliY3nq68=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770878826&amp;x-signature=2L3o6tk6MLUDntQSaXnXbN%2FbP1A%3D" alt="image.png" loading="lazy"/></p>
</li>
<li>
<p>æŒ‰ç…§æ­¥éª¤å¼•å…¥qiun-data-charts.vueç»„ä»¶åï¼Œæœ¬åœ°è¿è¡Œå¯ä»¥æ­£å¸¸å‡ºæ¥ï¼Œä¹Ÿæ²¡è§æŠ¥é”™ï¼Œè¿™æ—¶buildä¸ºh5åå‘å¸ƒåˆ°æœåŠ¡å™¨ï¼Œç¥å¥‡çš„ä¸€å¹•å‡ºç°äº†ï¼Œchartsç«Ÿç„¶å‡ºä¸æ¥ï¼ï¼ï¼èµ¶ç´§æŸåº¦ï¼Œç”šè‡³ä¸Šäº†AIï¼Œä½†éƒ½æ²¡è§£å†³é—®é¢˜ï¼Œåé¢æˆ‘å°±ç¢ç£¨æ˜¯å¦é…ç½®æœ‰é—®é¢˜ï¼Œæ¯”å¦‚optsæˆ–è€…eoptså‡ºé—®é¢˜äº†ï¼Œä½†å¯¹æ¯”äº†ä¸€ä¸‹å®˜æ–¹apiå‡æœªå‘ç°é—®é¢˜ï¼Œåªèƒ½å»ç¿»uchartsæºç ã€‚</p>
</li>
<li>
<p>çœ‹äº†ä¸€ä¸‹æºç åå‘ç°æœ‰ä¸€æ®µä»£ç ç”¨åˆ°äº†<strong>è·¯å¾„</strong>ï¼Œå°±æ€€ç–‘æ˜¯ä¸æ˜¯è·¯å¾„è§£æå‡ºäº†é—®é¢˜ï¼ŒåŠ äº†ä¸ªæ‰“å°å†æ¬¡éƒ¨ç½²æŸ¥çœ‹ï¼Œå‘ç°æœçœŸå¤šäº†ä¸ª./ ç„¶åå»æ‰¾äº†ä¸€ä¸‹ä¸ºä»€ä¹ˆä¼šå¤šå‡ºè¿™ä¸ªä¸œè¥¿ï¼ŒåŸå› æ˜¯æ‰“åŒ…çš„æ—¶å€™é…ç½®äº†æŒ‡å®šèµ„æºæ‰“åŒ…è·¯å¾„ï¼Œ<strong>é‡æ–°ä¿®æ”¹uchartsèµ„æºè·¯å¾„</strong>ä¹‹åå°±å¯ä»¥æ­£å¸¸å‡ºæ¥äº†ã€‚
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2ddcf8b67564485d940e96585d91ef90~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6b6ZbHVja0fliY3nq68=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770878826&amp;x-signature=uBbQwb6%2FXiv5qELNtvFZMNRR2DE%3D" alt="image.png" loading="lazy"/>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1bf91a7f614a402badfd46e464e03d44~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6b6ZbHVja0fliY3nq68=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770878826&amp;x-signature=LEkPOe%2F7c21WSomnjVCbaeow%2FFI%3D" alt="image.png" loading="lazy"/>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e7e45b836ca045a6bb4d1658fa96ebc1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6b6ZbHVja0fliY3nq68=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770878826&amp;x-signature=flu6ovR5FcCfgdE4tq0SRLD9C3A%3D" alt="image.png" loading="lazy"/></p>
</li>
</ol>
<h4 data-id="heading-0">ä»¥ä¸Šå†…å®¹ä»…ä¾›å‚è€ƒ</h4></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Kotlin 2.3 å‘Šåˆ«å†—ä½™ï¼šæ·±åº¦è§£æâ€œexplicit backing fieldsâ€]]></title>    <link>https://juejin.cn/post/7602916406981689385</link>    <guid>https://juejin.cn/post/7602916406981689385</guid>    <pubDate>2026-02-05T06:48:32.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602916406981689385" data-draft-id="7602996277663842358" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Kotlin 2.3 å‘Šåˆ«å†—ä½™ï¼šæ·±åº¦è§£æâ€œexplicit backing fieldsâ€"/> <meta itemprop="keywords" content="Kotlin,Android"/> <meta itemprop="datePublished" content="2026-02-05T06:48:32.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Ehtan_Zheng"/> <meta itemprop="url" content="https://juejin.cn/user/413072099642478"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Kotlin 2.3 å‘Šåˆ«å†—ä½™ï¼šæ·±åº¦è§£æâ€œexplicit backing fieldsâ€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/413072099642478/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Ehtan_Zheng
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-05T06:48:32.000Z" title="Thu Feb 05 2026 06:48:32 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-05
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>Kotlin 2.3 å¼•å…¥äº†<strong>explicit backing fields</strong>ï¼Œå…è®¸ä½ ç”¨å•ä¸ªå±æ€§æ›¿æ¢ç»å…¸çš„ <code>_state</code> + <code>state</code> æ¨¡æ¿ä»£ç ï¼Œä½ çš„ ViewModel å°†å˜å¾—å‰æ‰€æœªæœ‰çš„æ¸…çˆ½ã€‚</p>
<hr/>
<h2 data-id="heading-0">ç°çŠ¶ï¼šè¢«â€œä¸‹åˆ’çº¿â€ç»Ÿæ²»çš„æ¨¡æ¿ä»£ç </h2>
<p>å¤šå¹´æ¥ï¼Œä¸ºäº†ç¡®ä¿å°è£…æ€§ï¼ŒAndroid å¼€å‘è€…ä¸€ç›´éµå¾ªç€ä¸€ç§â€œæ ‡å‡†ä»ªå¼â€ï¼šåˆ›å»ºä¸€ä¸ªç§æœ‰çš„ <code>MutableStateFlow</code> ç”¨äºå†…éƒ¨ä¿®æ”¹ï¼Œå†æš´éœ²ä¸€ä¸ªå…¬æœ‰çš„ <code>StateFlow</code> ä¾›å¤–éƒ¨è¯»å–ã€‚</p>
<h3 data-id="heading-1">â€œæ—§â€æ–¹æ¡ˆï¼ˆç¹ççš„æ ·æ¿ä»£ç ï¼‰</h3>
<p>Kotlin</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// å†…éƒ¨ä½¿ç”¨çš„å¯å˜çŠ¶æ€</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> _uiState = MutableStateFlow(UiState.Loading)

<span class="hljs-comment">// æš´éœ²ç»™å¤–éƒ¨çš„åªè¯»è§†å›¾</span>
<span class="hljs-keyword">val</span> uiState: StateFlow&lt;UiState&gt; = _uiState.asStateFlow()
</code></pre>
<p>è™½ç„¶è¿™ç§åšæ³•è¡Œä¹‹æœ‰æ•ˆï¼Œä½†å®ƒä¸ä»…è®© IDE çš„è‡ªåŠ¨è¡¥å…¨å……æ»¡äº†å„ç§å¸¦ä¸‹åˆ’çº¿çš„å˜é‡ï¼Œè¿˜ä¸ºæ¯ä¸€ä¸ª ViewModel å¢åŠ äº†å¤§é‡çš„å˜é‡å®šä¹‰ã€‚</p>
<hr/>
<h2 data-id="heading-2">æ˜¾å¼å¹•åå­—æ®µï¼ˆExplicit Backing Fieldsï¼‰</h2>
<p>åœ¨ <strong>Kotlin 2.3</strong> ä¸­ï¼Œä½ ç°åœ¨å¯ä»¥åœ¨å•ä¸ªå±æ€§å†…éƒ¨å®šä¹‰ä¸€ä¸ª <code>field</code> å—ã€‚è¿™è®©ä½ å¯ä»¥ä¸ºå±æ€§å®šä¹‰<strong>ç‰¹å®šçš„å†…éƒ¨å­˜å‚¨ç±»å‹</strong>ï¼ŒåŒæ—¶å¯¹å¤–ç•Œä»…æš´éœ²<strong>åªè¯»çš„ API</strong>ã€‚</p>
<h3 data-id="heading-3">â€œæ–°â€æ–¹æ¡ˆï¼ˆä¼˜é›…çš„å•å±æ€§ï¼‰</h3>
<p>Kotlin</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">UserProfileViewModel</span> : <span class="hljs-type">ViewModel</span>() {

    <span class="hljs-comment">// åŒä¸€ä¸ªå±æ€§åï¼Œä¸¤ç§ä¸åŒçš„ç±»å‹</span>
    <span class="hljs-keyword">val</span> uiState: StateFlow&lt;ProfileState&gt;
        field = MutableStateFlow(ProfileState.Loading) 

    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">updateUsername</span><span class="hljs-params">(newName: <span class="hljs-type">String</span>)</span></span> {
        <span class="hljs-comment">// åœ¨ç±»å†…éƒ¨ï¼Œ'field' è®©æˆ‘ä»¬ç›´æ¥æ‹¥æœ‰å¯å˜çš„è®¿é—®æƒé™</span>
        field.value = ProfileState.Success(username = newName)
    }
}
</code></pre>
<hr/>
<h2 data-id="heading-4">âš ï¸ å·¥ç¨‹å®è·µä¸­çš„ç°å®é—®é¢˜</h2>
<p>åœ¨ä½ æ‰“ç®—åˆ æ‰é¡¹ç›®ä¸­æ‰€æœ‰çš„ä¸‹åˆ’çº¿å˜é‡ä¹‹å‰ï¼Œæœ‰å‡ ä¸ªå…³é”®çš„å·¥ç¨‹ç»†èŠ‚éœ€è¦ä½ çŸ¥æ™“ï¼š</p>
<ul>
<li><strong>åªè¯» vs ä¸å¯å˜ï¼š</strong> <code>StateFlow</code> æˆ– <code>List</code> åªæ˜¯<strong>åªè¯»è§†å›¾</strong>ï¼Œè€Œéç»å¯¹ä¸å¯å˜ã€‚è™½ç„¶å¤–éƒ¨ API æ²¡æœ‰æä¾›ä¿®æ”¹å·¥å…·ï¼Œä½†åº•å±‚çš„<strong>explicit backing fields</strong>ä¾ç„¶æ˜¯å¯å˜çš„ã€‚</li>
<li><strong>ä»…é™ç®€å•åˆå§‹åŒ–ï¼š</strong> <strong>explicit backing fields</strong>æœ€é€‚åˆç®€å•çš„èµ‹å€¼ã€‚å¦‚æœä½ çš„çŠ¶æ€éœ€è¦å¤æ‚çš„é“¾å¼æ“ä½œï¼ˆå¦‚ <code>.stateIn()</code>ï¼‰æˆ–è€…åŸºäºæ„é€ å‚æ•°çš„å¤æ‚æ¡ä»¶é€»è¾‘ï¼Œä¼ ç»Ÿçš„åŒå±æ€§æ–¹æ¡ˆä¾ç„¶æ›´å…·çµæ´»æ€§ã€‚</li>
<li><strong>ä¸¥æ ¼çš„å®éªŒæ€§é˜¶æ®µï¼š</strong> è¯¥ç‰¹æ€§ç›®å‰éšè—åœ¨ <code>-Xexplicit-backing-fields</code> ç¼–è¯‘å™¨å‚æ•°ä¹‹åã€‚åœ¨å½“å‰ç‰ˆæœ¬çš„ Android Studio ä¸­ï¼Œè¯­æ³•é«˜äº®å’Œé‡æ„æ”¯æŒå¯èƒ½è¿˜ä¸å¤Ÿç¨³å®šã€‚</li>
<li><strong>è¿è¡Œæ—¶å®‰å…¨ç¼ºå£ï¼š</strong> ä¼ ç»Ÿçš„ <code>_state.asStateFlow()</code> æ¨¡å¼ä¼šåˆ›å»ºä¸€ä¸ªåŒ…è£…å±‚ï¼Œé˜²æ­¢å¤–éƒ¨åœ¨è¿è¡Œæ—¶å°†å…¶å¼ºè½¬å› <code>MutableStateFlow</code>ã€‚<strong>explicit backing fields</strong>ç›®å‰åœ¨åº•å±‚å¹¶ä¸å¤©ç”Ÿå…·å¤‡è¿™ç§â€œé˜²å¼ºè½¬â€æœºåˆ¶ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-5">æ€»ç»“</h2>
<p><strong>explicit backing fields</strong>è®©ä»£ç æ›´åŠ å¹²å‡€ã€ç´§å‡‘ã€‚è™½ç„¶ç›®å‰å®ƒè¿˜å¤„äºå®éªŒé˜¶æ®µï¼Œä½†å®ƒä»£è¡¨äº† Kotlin æ¶ˆé™¤æ ·æ¿ä»£ç ã€æå‡å¼€å‘è€…å¹¸ç¦æ„Ÿçš„æ˜ç¡®æ–¹å‘ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[iOSâ€”â€”IPAToolå·¥å…·çš„ä½¿ç”¨]]></title>    <link>https://juejin.cn/post/7602894102993338378</link>    <guid>https://juejin.cn/post/7602894102993338378</guid>    <pubDate>2026-02-05T06:52:02.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602894102993338378" data-draft-id="7603160727716642867" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="iOSâ€”â€”IPAToolå·¥å…·çš„ä½¿ç”¨"/> <meta itemprop="keywords" content="iOS"/> <meta itemprop="datePublished" content="2026-02-05T06:52:02.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Haha_bj"/> <meta itemprop="url" content="https://juejin.cn/user/2612027844214647"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            iOSâ€”â€”IPAToolå·¥å…·çš„ä½¿ç”¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2612027844214647/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Haha_bj
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-05T06:52:02.000Z" title="Thu Feb 05 2026 06:52:02 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-05
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>IPATool æ˜¯ä¸€æ¬¾å‘½ä»¤è¡Œå·¥å…·ï¼Œå¯é€šè¿‡ Apple ID ä» App Store ä¸‹è½½åŠ å¯† IPA åŒ…ï¼Œæ”¯æŒå¤šå¹³å°ï¼ˆmacOS/Windows/Linuxï¼‰ï¼Œé€‚ç”¨äºå¼€å‘è€…æµ‹è¯•ã€ç‰ˆæœ¬å½’æ¡£ç­‰åœºæ™¯ã€‚</p>
<h3 data-id="heading-0">ä¸€ã€å®‰è£…ï¼ˆåˆ†å¹³å°ï¼‰</h3>
<h4 data-id="heading-1">1. macOSï¼ˆæ¨è Homebrewï¼‰</h4>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-meta"># å®‰è£… ipatool</span>
brew install ipatool
<span class="hljs-meta"># éªŒè¯</span>
ipatool --version
<span class="hljs-comment">// ç»“æœ ipatool version 2.1.6</span>
</code></pre>
<ol>
<li>éªŒè¯ï¼šç»ˆç«¯è¾“å…¥ <code>ipatool --version</code> æ˜¾ç¤ºç‰ˆæœ¬å·å³å¯ã€‚</li>
</ol>
<h3 data-id="heading-2">äºŒã€æ ¸å¿ƒæµç¨‹ï¼šè®¤è¯ â†’ æœç´¢ â†’ ä¸‹è½½</h3>
<h4 data-id="heading-3">1. è´¦å·è®¤è¯ï¼ˆå¿…éœ€ï¼‰</h4>
<p>bash</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ç™»å½• Apple IDï¼ˆå¼€å¯åŒé‡éªŒè¯éœ€è¾“å…¥éªŒè¯ç ï¼‰</span>
ipatool auth login -e ä½ çš„é‚®ç®± -p ä½ çš„å¯†ç 
<span class="hljs-comment"># æŸ¥çœ‹ç™»å½•ä¿¡æ¯</span>
ipatool auth info
<span class="hljs-comment"># ç™»å‡º/æ’¤é”€å‡­è¯</span>
ipatool auth revoke
</code></pre>
<p><strong>æ³¨æ„</strong>ï¼šåŒé‡éªŒè¯ç¯å¢ƒä¸‹ï¼Œå¯†ç éœ€ç”¨ã€ŒApp ä¸“ç”¨å¯†ç ã€ï¼ˆApple ID ç®¡ç†é¡µç”Ÿæˆï¼‰ï¼Œé¿å…ç™»å½•å¤±è´¥ã€‚</p>
<h4 data-id="heading-4">2. æœç´¢åº”ç”¨ï¼ˆè·å– Bundle ID/App IDï¼‰</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æœç´¢å…³é”®è¯ï¼Œé™åˆ¶è¿”å› 5 æ¡ç»“æœ</span>
ipatool search <span class="hljs-string">"å¾®ä¿¡"</span> --<span class="hljs-built_in">limit</span> 5
<span class="hljs-comment"># è¾“å‡ºç¤ºä¾‹ï¼ˆå« Bundle IDï¼šcom.tencent.xinï¼‰</span>
</code></pre>
<h4 data-id="heading-5">3. IPAæ–‡ä»¶ä¸‹è½½</h4>
<p>æ‰¾åˆ°ç›®æ ‡åº”ç”¨åï¼Œä½¿ç”¨åº”ç”¨IDè¿›è¡Œä¸‹è½½ï¼š</p>
<pre><code class="hljs language-css" lang="css">ipatool download <span class="hljs-attr">--app-id</span> åº”ç”¨ID <span class="hljs-attr">--output</span> ä¿å­˜è·¯å¾„
//ä¾‹ ipatool download <span class="hljs-attr">--app-id</span> <span class="hljs-number">155342910943</span> <span class="hljs-attr">--output</span> ä¿å­˜è·¯å¾„
</code></pre>
<p>å¤‡æ³¨:
ä¸‹è½½æç¤ºã€Œæœªè´­ä¹°ã€æœªåŠ  <code>--purchase</code> å‚æ•°é¦–æ¬¡ä¸‹è½½æ·»åŠ  <code>--purchase</code> è·å–è®¸å¯</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item>  </channel></rss>